# StackOverflow 问答 12216000-12216999

# sql-server - Azure nodejs 站点无法连接到排序规则与默认值不同的 SQL DB

> ID：12216003
> 
> 赞同：0
> 
> 时间：2012-08-31T13:07:44.863
> 
> 标签：sql-server, node.js, azure, collation

我有这个简单的nodejs页面[http://pastebin.com/HxMsHBbg](http://pastebin.com/HxMsHBbg)

```
/**
 * Module dependencies.
 */

var express = require('express'),  
    http = require('http'),
    url = require('url'),
    util = require('util');

var nconf = require('nconf');
var sql = require('node-sqlserver');    

nconf.env();
var conn = nconf.get("SQL_CONN");   
var app = express();

app.get('/', function(req, res){
    var qs = url.parse( req.url, true );        
    res.writeHead(200, {'Content-Type': 'application/json; charset=utf-8'});

    var alldata={}; 

    var select = "SELECT 1";
    sql.query(conn, select, function(err, items) {

        res.end(JSON.stringify(alldata));       
    });

});
http.createServer(app).listen(process.env.PORT || 3000, function(){
  console.log("Express server listening ");
}); 
```

当 SQL_CONN 是带有排序规则的 MSSQL 数据库时 - 比如说 - Greek_CI_AI ，然后我得到错误

HRESULT：0x6d HTTP 状态：500 HTTP 原因：内部服务器错误

如果数据库在默认排序规则中，那么没有问题。有没有人有解决方案或者它是一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:39:12.130

问题已解决，请看[这里](https://github.com/WindowsAzure/node-sqlserver/issues/70)

# azure - 如何在本地测试运行时更改 Azure 服务配置设置？

> ID：12216007
> 
> 赞同：9
> 
> 时间：2012-08-31T13:07:49.317
> 
> 标签：azure, azure-configuration, azure-compute-emulator

我正在编写我们的 Azure 应用程序以使用 Azure 服务配置设置，以便我们可以实时更改它。我可以通过在 Azure Web 门户中部署然后更改它们来测试它。

如何允许在本地 azure 计算模拟器上实时更改服务配置？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T15:12:01.320

为了更新服务配置，您需要修改 *.cscfg 文件并执行 csrun.exe（在*C:\Program Files\Microsoft SDKs\Windows Azure\Emulator*中）：

```
csrun.exe /update:<deployment-id>;<service-configuration-file> 
```

请注意，这似乎仅在没有调试器的情况下运行应用程序时才有效。

我最近在这里写了一篇博客：[Controlling your instances in the Windows Azure Compute Emulator](http://fabriccontroller.net/blog/posts/controlling-your-instances-in-the-windows-azure-compute-emulator/)（查看在模拟器*中处理 RoleEnvironment.Changing 事件*）。

# opengl - 使用对象顺序空白空间跳过实现体积渲染

> ID：12216008
> 
> 赞同：2
> 
> 时间：2012-08-31T13:07:55.123
> 
> 标签：opengl, 3d, octree, volume-rendering

我从 Scenegraph 2009 课程笔记的[Advanced IlluminationTechniques for GPU-Based Volume Raycasting](http://www.google.com.hk/url?sa=t&source=web&cd=1&cad=rja&ved=0CC0QFjAA&url=http%3A%2F%2Fscivis.itn.liu.se%2Fpublications%2F2009%2FRHRL09%2Fsiggraph09-coursenotes.pdf&ei=x7NAUNPtEoiTiAef-oGwBw&usg=AFQjCNHkIOf4l11Hs4yfiqPLm89u6WfSxg)中学习了一些体积渲染技术。我对对象顺序空白空间跳过感兴趣，它将边界框光栅化为许多小块，如下图所示：![医疗量数据](../Images/b4a9998e1c4b4a1a083e75ff8fce6013.png)

我想知道如何实现这个？通过八叉树？或任何其他技术？我已经实现了一个简单的光线投射体积渲染程序，没有对象顺序空白空间跳过。代码片段或伪代码会有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T23:09:38.770

基本思想是将边界几何体生成为三角形网格，然后将该网格渲染到屏幕外缓冲区，以便计算用于第二遍中光线行进的开始和结束位置。

我已经使用 OpenGL 4 在 C++ 中实现了这一点，并[在博客中介绍了它](http://haferburg.github.io/)，包括源代码。这是一般大纲：

*   初始化：给定具有 iso 值的体积纹理，在粗网格上生成边界几何。例如，体积可以是 256x256x200，网格单元可以跨越 8³ 体素，因此网格尺寸为 32x32x25。
    *   首先生成一个体积纹理`gridTex`，其中每个体素都包含最大的 iso 值。
    *   给定阈值 iso 值，生成边界几何。如果网格体素包含任何可见的东西，则认为它是*活动的。*对于等值面，这意味着该值高于阈值。对于 中的每一对相邻体素`gridTex`，如果一个处于活动状态而另一个处于非活动状态，则生成一个四边形。每次 iso 值更改时都执行此操作。
*   第一遍：将边界几何渲染到屏幕外缓冲区，存储每个片段的最小和最大深度值。
*   第二遍：再次将正面渲染到主缓冲区。
    *   如果不是最小深度值，则丢弃。根据最小和最大深度值计算光线的开始和结束位置。
    *   像往常一样行进射线。

# javascript - 使用带有变量的 javascript 更改图像 src

> ID：12216011
> 
> 赞同：0
> 
> 时间：2012-08-31T13:08:09.133
> 
> 标签：javascript, image, wordpress

我用 HTML 制作了一个模板，现在我将它作为 wordpress 模板放入。但是在我的 .js 文件中，我得到了这个：

```
 $('.tab_home').find('img').attr('src', '/images/home.png'); 
```

这是单击功能的一部分，当我单击某些内容时会更改图像。它在 HTML 中运行良好，但是当我想把它放在 wordpress 中时，它被破坏了，因为 src url 是错误的。现在我确实找到了这个线程：[js script file中的WordPress path url](https://stackoverflow.com/questions/5221630/wordpress-path-url-in-js-script-file)，这将是我解决方案的一部分，除了我不能`"+templateUrl+"`输入我的`.attr('src', '/images/home.png')`原因然后我得到一个链接，如：

```
<img alt="" src=""+templateUrl+"/images/home.png"> 
```

some1 知道我在这里做错了什么，以及如何解决它？

谢谢转发。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:12:51.703

您必须执行以下操作：

```
$('.tab_home').find('img').attr('src', templateUrl + '/images/home.png'); 
```

并且不要忘记在模板的标题中设置 templateUrl，如您所指的帖子中所述：

```
<script type="text/javascript">
var templateUrl = '<?= get_bloginfo("template_url"); ?>';
</script> 
```

# ruby - Ruby 和 Rails 异步

> ID：12216024
> 
> 赞同：0
> 
> 时间：2012-08-31T13:08:50.750
> 
> 标签：ruby, ruby-on-rails-3.2, sidekiq

我需要在 ruby​​/rails 中异步执行长时间运行的操作。谷歌搜索我发现的一个选项是 Sidekiq。

```
class WeeklyReportWorker
  include Sidekiq::Worker

  def perform(user, product, year = Time.now.year, week = Date.today.cweek)
    report = WeeklyReport.build(user, product, year, week)
    report.save
  end
end

# call WeeklyReportWorker.perform_async('user', 'product') 
```

一切都很好！但有一个问题。

如果我每隔几秒就一直调用这个异步方法，但是执行繁重操作的实际时间是一分钟，那么事情就不起作用了。

让我举个例子。

```
5.times { WeeklyReportWorker.perform_async('user', 'product') } 
```

现在我的繁重手术将进行5次。最佳情况下，它应该只执行一次或两次，具体取决于第一个操作的执行是否在第 5 次异步调用之前开始。

你有提示如何解决它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:23:14.203

这是一种天真的方法。我是一个 resque 用户，也许 sidekiq 可以提供更好的东西。

```
def perform(user, product, year = Time.now.year, week = Date.today.cweek)
  # first, make a name for lock key. For example, include all arguments
  # there, so that another perform with the same arguments won't do any work
  # while the first one is still running
  lock_key_name = make_lock_key_name(user, product, year, week)
  Sidekiq.redis do |redis| # sidekiq uses redis, let us leverage that
    begin
      res = redis.incr lock_key_name
      return if res != 1 # protection from race condition. Since incr is atomic, 
                         # the very first one will set value to 1\. All subsequent
                         # incrs will return greater values.
                         # if incr returned not 1, then another copy of this 
                         # operation is already running, so we quit.

      # finally, perform your business logic here
      report = WeeklyReport.build(user, product, year, week)
      report.save
    ensure
      redis.del lock_key_name # drop lock key, so that operation may run again.
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:21:16.097

我不确定我是否很好地理解了您的情况，但是看看这个宝石怎么样：

[https://github.com/collectiveidea/delayed_job](https://github.com/collectiveidea/delayed_job)

所以不要这样做：

```
5.times { WeeklyReportWorker.perform_async('user', 'product') } 
```

你可以做：

```
5.times { WeeklyReportWorker.delay.perform('user', 'product') } 
```

开箱即用，这将使工作进程在第一个工作之后处理第二个工作，但前提是您使用默认设置（因为默认情况下工作进程只有一个）。

宝石提供了以下可能性：

*   将作业放入队列；
*   如果需要，为不同的工作设置不同的队列；
*   有多个worker处理一个队列（例如，可以在4-CPU机器上启动4个worker，效率更高）；
*   安排作业在准确的时间运行，或在作业排队后的设定时间后运行。（或者，默认情况下，安排立即后台执行）。

我希望它能像你对我一样帮助你。

# php - PHP显示ftp_get的进度百分比？

> ID：12216028
> 
> 赞同：2
> 
> 时间：2012-08-31T13:09:00.780
> 
> 标签：php, ftp

我有一个有效的 FTP 文件下载脚本。
我下载的文件每天大约 2-4 GB。
我想知道是否有办法获取文件所在位置的百分比？

我在 php.net 和这里看过，但我找不到任何类似的问题，而是花更多时间寻找我想我会问比我自己聪明得多的人。

我在考虑是否有一个功能可以查看它在下载中的位置，但我找不到一个，因为`ftp_get`必须先完成，这样就消除了每隔几秒刷新一次缓冲区以显示新百分比的机会。

任何人？

这是我的代码：我将所有变量都隐藏在它上面。

```
$conn_id = ftp_connect($ftp_server);

$login_result = ftp_login($conn_id, $ftp_user_name, $ftp_user_pass);

if (ftp_get($conn_id, $local_file, $server_file, FTP_BINARY)) {
    echo "Successfully written to $local_file\n";
} else {
    echo "There was a problem\n";
}

ftp_close($conn_id); 
```

* * *

编辑：

我添加了`ftp_nb_get`，这是我的代码。它一直在正常下载，只是不会将其回显到浏览器中。

```
$ret = ftp_nb_get($conn_id, $local_file, $server_file, FTP_BINARY, $size);
while ($ret == FTP_MOREDATA) {
  echo round((filesize($local_file)/$server_size)*100)."%\n";
  $ret = ftp_nb_continue($conn_id);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:15:48.390

尝试使用非阻塞版本[`ftp_nb_get()`](http://www.php.net/manual/en/function.ftp-nb-get.php)并[`ftp_nb_continue()`](http://www.php.net/manual/en/function.ftp-nb-continue.php)循环使用，并检查保存文件的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-23T07:22:13.550

它可以使用[FTP URL 协议包装器](https://www.php.net/manual/en/wrappers.ftp.php)轻松实现：

```
$url = "ftp://username:password@ftp.example.com/remote/source/path/file.zip";

$size = filesize($url) or die("Cannot retrieve size file");

$hin = fopen($url, "rb") or die("Cannot open source file");
$hout = fopen("/local/dest/path/file.zip", "wb") or die("Cannot open destination file");

while (!feof($hin))
{
    $buf = fread($hin, 10240);
    fwrite($hout, $buf);
    echo "\r".intval(ftell($hout)/$size*100)."%";
}

echo "\n";

fclose($hout);
fclose($hin); 
```

* * *

关于您使用的尝试`ftp_nb_get`：缓存结果，因此重复调用它会得到相同的值。你必须打电话。
`filesize`[`clearstatcache`](https://www.php.net/manual/en/function.clearstatcache.php)

完整的代码如下：

```
$conn_id = ftp_connect("ftp.example.com");
ftp_login($conn_id, "username", "password");

ftp_pasv($conn_id, true);

$local_path = "/local/dest/path/file.zip";
$remote_path = "/remote/source/path/file.zip";
$size = ftp_size($conn_id, $remote_path);

$ret = ftp_nb_get($conn_id, $local_path, $remote_path, FTP_BINARY);

while ($ret == FTP_MOREDATA)
{
  clearstatcache(false, $local_path);
  echo "\r".intval(filesize($local_path)/$size*100)."%";
  $ret = ftp_nb_continue($conn_id);
}

echo "\n"; 
```

或者使用[`ftp_nb_fget`](https://www.php.net/manual/en/function.ftp-nb-fget.php)和查询文件句柄，就像我的第一个例子一样。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-01-12T20:57:08.067

You should try buffer flush - ob_flush() and flush().

This technique works, I already used it. [here is a tutorial](http://meddle.dzygn.com/eng/weblog/progress.bar.php/)

I am sure that you can wind yourself some more. Just google "progress php flush buffer"

# hibernate - sql中的休眠排序

> ID：12216031
> 
> 赞同：0
> 
> 时间：2012-08-31T13:09:09.860
> 
> 标签：hibernate, jpa, fluent-nhibernate, jpa-2.0, hibernate-mapping

是否可以在不使用接口、不使用注释的`Set`情况下使用休眠在 sql 中对集合进行排序- 只需使用条件的 addOrder。`SortedSet``@OrderBy`

我已经尝试过了，它添加了 order by 子句，但集合没有排序。

我使用休眠 3.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:14:22.267

即使集合映射支持排序依据，NHibernate 集合也没有“顺序”。请参阅 Ayende 的[解释](http://ayende.com/blog/3943/nhibernate-mapping-set)：

> 请注意，[order-by] 不适用于泛型集合，并且通常，您不想依赖这些排序属性，而是希望使用所选集合的自然属性。根据定义，集合是唯一元素的无序集合。

您可以将 order by 子句附加到底层 SQL，但是当 NHibernate 构建集合时，该顺序会丢失。当然，使用“有序”集合或其他集合类型（袋子或列表）将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:17:19.480

如果您将“Set”更改为“List”并且“List”中不存在的方法放置等效项，我们将正常工作。

问候，

# mysql - MySQL选择带有日期的行

> ID：12216033
> 
> 赞同：18
> 
> 时间：2012-08-31T13:09:27.133
> 
> 标签：mysql, sql, date, select, date-formatting

在 MySQL 我有这个查询

```
SELECT DISTINCT date, descr FROM book ORDER BY date 
```

日期格式`yyyy-mm-dd`

我只想选择*2012 年 1 月*的书籍。我曾尝试使用`like`，但这不起作用。

有任何想法吗？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-31T13:13:09.957

使用[`DATE_FORMAT`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_date-format)功能

```
SELECT DISTINCT date, descr FROM book 
WHERE DATE_FORMAT(date, '%Y %m') = DATE_FORMAT('2012-01-01', '%Y %m')
ORDER BY date 
```

或者使用[`MONTH`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_month)and[`YEAR`](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_year)函数

```
SELECT DISTINCT date, descr FROM book 
WHERE Month(date) = Month('2012-01-01')
AND Year(date) = Year('2012-01-01')
ORDER BY date; 
```

或者使用[`BETWEEN`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_between)函数

```
SELECT DISTINCT date, descr FROM book 
WHERE date BETWEEN '2012-01-01'
AND '2012-01-31'
ORDER BY date; 
```

或使用[`<=`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_less-than-or-equal)and[`>=`](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#operator_greater-than-or-equal)运算符

```
SELECT DISTINCT date, descr FROM book 
WHERE date >= '2012-01-01'
AND date <= '2012-01-31'
ORDER BY date; 
```

### [*看到这个 SQLFiddle*](http://www.sqlfiddle.com/#!9/aa4a4/1)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T13:13:27.940

您可以在此处使用`>=`和`<=`运算符。检查以下代码：

```
SELECT *
FROM book
WHERE date >= '2012-01-01' AND date <= '2012-01-31' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T13:12:35.867

试试这个：

```
SELECT DISTINCT date, descr FROM book WHERE YEAR(date) = '2012' and MONTH(date) = '1' 
```

如果您的“日期”列是 MySQL 日期字段，则此方法有效。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-14T09:42:11.890

如果您坚持要使用 LIKE 语法，可以先将日期转换为 CHAR：

SELECT DISTINCT date, descr FROM book WHERE CAST(date AS char) LIKE '2012-01%' ORDER BY date;

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-01-03T10:12:21.090

使用 like 也可以。使用@hims056 fiddle，您可以对其进行测试：

```
SELECT DISTINCT ID, date FROM book 
WHERE date LIKE '2012-01%'
ORDER BY date; 
```

但是，通常不使用 like 进行日期过滤，对我来说使用 >= 和 <= 或两者之间更自然。此外，还有性能优势。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T13:16:14.973

```
SELECT DISTINCT date, descr
FROM book
WHERE YEAR = DATE(NOW()) AND MONTH(date) = '1' 
```

这会给你今年的书

# c# - 如果收件人未解析，则隐藏 Outlook LDAP 错误 (C#)

> ID：12216034
> 
> 赞同：1
> 
> 时间：2012-08-31T13:09:30.317
> 
> 标签：c#, outlook, ldap, resolve

我的问题是，当我尝试使用不存在的名称解析收件人时，Outlook 会打开一个新窗口：LDAP 错误。有没有机会阻止 Outlook 这样做？我想显示我自己的错误消息。
那是我的代码：

```
string rec = "LastName, FirstName";
Microsoft.Office.Interop.Outlook.Recipient r = createRecipient(rec);
r.Resolve(); 
```

我认为这可能很容易，我自己什么都找不到。有要捕获的异常吗？
谢谢你的帮助！

编辑：对不起，我忘了那个。

```
using OutLook = Microsoft.Office.Interop.Outlook;
private static OutLook._Application _outlookObj = new OutLook.Application();
private static OutLook._NameSpace _nameSpace = _outlookObj.GetNamespace("MAPI");

public OutLook.Recipient createRecipient(string rec)
    {
        OutLook.Recipient r = _nameSpace.CreateRecipient(rec);
        return r;
    } 
```

# mysql - 在 MySQL 中使用 SQL 创建批量插入转储文件

> ID：12216035
> 
> 赞同：0
> 
> 时间：2012-08-31T13:09:33.437
> 
> 标签：mysql, sql

如何在不调用 mysqldump 实用程序的情况下使用 SQL 语法从表中创建批量插入语句？

请记住，这 `SELECT ... INTO OUTFILE 'file_name'`对我不起作用，因为它生成一个 CSV 文件，而不是**BULK INSERT SQL**格式的输出，如下所示

```
INSERT INTO mytable VALUES (1,2), (5,5), ...; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:14:40.220

跑

```
SELECT * FROM mytable INTO OUTFILE 'dump.csv' 
FIELDS TERMINATED BY ',' ENCLOSED BY '"' LINES TERMINATED BY '\n'; 
```

然后使用 sed/perl/python/shell/whateverelse 对输出 CSV 进行后处理以获取 SQL 脚本。

例如在 python 中：

```
import csv
with open('dump.csv',"rU") as inf:
    reader = csv.reader(inf)
    with open("dump.sql","wb") as outf:
        for row in reader:
            outf.write('insert into mytable values ("'+ '","'.join(row)  +'");\n') 
```

该脚本不适`Null`用于列值中的 s 和引号字符。

# android - 点击事件打开 FileDialog

> ID：12216037
> 
> 赞同：0
> 
> 时间：2012-08-31T13:09:38.280
> 
> 标签：android

我是 Android 的初学者，我正在尝试开发 Set Wallpaper App。单击图像后，第二个活动将打开。这是我的代码：

清单.xml

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.myfirstapplication"
    android:versionCode="1"
    android:versionName="1.0" >
     <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="15" />

   <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >
        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".secondActivity"
                  android:label="@string/app_name">
        </activity>
    </application>

</manifest> 
```

activity_main.xml

```
 <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="wrap_content"
     android:layout_height="fill_parent"
     android:orientation="vertical"
     android:paddingLeft="8dp"
     android:paddingRight="8dp" >

     <ImageView
         android:id="@+id/imageView1"
         android:layout_width="wrap_content"
         android:layout_height="wrap_content"
         android:src="@android:drawable/btn_star_big_on"
         android:clickable="true"  
         android:onClick="imageClick"  />

     <TextView
         android:id="@android:id/empty"
         android:layout_width="150dp"
         android:layout_height="wrap_content"
         android:text="Wallpaper" />
 </LinearLayout> 
```

主要的.xml

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
     xmlns:tools="http://schemas.android.com/tools"
     android:layout_width="wrap_content"
     android:layout_height="fill_parent"
     android:orientation="vertical"
     android:paddingLeft="8dp"
     android:paddingRight="8dp" >

    <Button
        android:id="@+id/set"
        android:layout_width="298dp"
        android:layout_height="70dp"
        android:text="Set Wallpaper" />

    <Button
        android:id="@+id/hoti"
        android:layout_width="fill_parent"
        android:layout_height="193dp"
        android:text="HOTI" />

    <Button
        android:id="@+id/smb"
        android:layout_width="298dp"
        android:layout_height="70dp"
        android:text="See More" />
    <Button
        android:id="@+id/quit"
        android:layout_width="298dp"
        android:layout_height="70dp"
        android:text="Quit" />
 </LinearLayout> 
```

MainActivity.java

```
package com.example.myfirstapplication;

import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;
import android.view.View;

public class MainActivity extends Activity {

 @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
    }

public void imageClick(View v){

    //Create an intent to start the new activity.
       // Our intention is to start secondActivity
    Intent intent = new Intent();
    intent.setClass(this,secondActivity.class);
    startActivity(intent);
   }
} 
```

secondActivity.java

```
package com.example.myfirstapplication;

import android.app.Activity;
import android.graphics.Bitmap;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class secondActivity extends Activity {
    Bitmap bitmap;
   /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

     // Set the layout for this activity
        setContentView(R.layout.main);

        Button btn1 = (Button) findViewById(R.id.quit);
        btn1.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                finish();
                System.exit(0);
            }
        });
        }

} 
```

单击设置壁纸按钮后，文件选择器应该打开，我可以从中选择图像，也可以看到该图像的预览并将其设置为壁纸。请帮帮我。单击“查看更多”按钮后，我还想打开一个弹出窗口。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:17:13.817

showFileChooser() 方法将为您执行此操作。希望你得到你的要求。

```
 private void showFileChooser() {
            Intent intent = new Intent(Intent.ACTION_GET_CONTENT); 
            intent.setType("*/*"); 
            intent.addCategory(Intent.CATEGORY_OPENABLE);

            try {
                startActivityForResult(
                        Intent.createChooser(intent, "Select a Image"), FILE_SELECT_CODE);
            } catch (android.content.ActivityNotFoundException ex) {
                Toast.makeText(this, "Please install a File Manager.",Toast.LENGTH_SHORT).show();
            }
        }

        @Override
        protected void onActivityResult(int requestCode, int resultCode, Intent data) {
            super.onActivityResult(requestCode, resultCode, data);
            switch (requestCode) {
                case FILE_SELECT_CODE:      
                if (resultCode == RESULT_OK) {  

                    Uri uri = data.getData();
                    String path = getRealPathFromURI(uri);
                    File imgFile = new File(path);
                    if(imgFile.exists())
                    {
                       myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
                       img.setImageBitmap(myBitmap);
                    }

                }           
                break;
            }
        }

        /**
         * Returns path of the file specified by content Uri
         */
        public String getRealPathFromURI(Uri contentUri) {
            String[] proj = { MediaStore.Images.Media.DATA };
            Cursor cursor = managedQuery(contentUri, proj, null, null, null);
            int column_index = cursor.getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
            cursor.moveToFirst();
            String path = cursor.getString(column_index);
            cursor.close();
            return path;
        } 
```

# codeigniter - Codeigniter 购物车

> ID：12216039
> 
> 赞同：1
> 
> 时间：2012-08-31T13:09:52.640
> 
> 标签：codeigniter, shopping-cart

当我使用 CI Cart Class 创建购物车时，它首先将产品添加到购物车 1，然后当我下次将该产品添加到购物车时，它也会添加 1 个产品而不是 2。

我想这样做，当有人将商品添加到他们的购物车并且购物车中已经有完全相同的商品时，购物车中的数量会增加。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T14:32:27.913

如果您可以发布一些代码或您要发送到购物车类的数据将会很有帮助，但这应该会为您指明正确的方向：

```
function add_cart_item(){

        $data = $_POST;

        $id = $data['product_id'];    //get new product id
        $qty = $data['quantity'];     //get quantity if that item       
        $cart = $this->cart->contents(); //get all items in the cart
            $exists = false;             //lets say that the new item we're adding is not in the cart
            $rowid = '';

            foreach($cart as $item){
                if($item['id'] == $id)     //if the item we're adding is in cart add up those two quantities
                {
                    $exists = true;
                    $rowid = $item['rowid'];
                    $qty = $item['qty'] + $qty;
                }       
            }

            if($exists)
            {
                $this->cart_model->update_item($rowid, $qty);                   
                echo 'true'; // For ajax calls if javascript is enabled, return true, so the cart gets updated          
            }
            else
            {
                if($this->cart_model->add_cart_item() == TRUE)
                {           
                    echo 'true'; // for ajax calls if javascript is enabled, return true, so the cart gets updated
                }
            }   

} 
```

在 cart_model 中，您将更新和添加看起来像这样的函数

```
function update_item($rowid, $qty){     

        // Create an array with the products rowid's and quantities. 
        $data = array(
             'rowid' => $rowid,
             'qty'   => $qty
          );

    // Update the cart with the new information
        $this->cart->update($data);
    }

    // Add an item to the cart
    function add_cart_item(){

        $id = $this->input->post('product_id'); // Assign posted product_id to $id
        $qty = $this->input->post('quantity'); // Assign posted quantity to $cty
        //$img = $this->input->post('image'); // Assign posted quantity to $img

        $this->db->where('id', $id); // Select where id matches the posted id
        $query = $this->db->get('products', 1); // Select the products where a match is found and limit the query by 1

        // Check if a row has been found
        if($query->num_rows > 0){

            foreach ($query->result() as $row)
            {
                $data = array(
                    'id'      => $id,
                    'qty'     => $qty,
                    'price'   => $row->price,
                    'name'    => $row->name,
                    //'options' => array('image' => $img),
                );

                $this->cart->insert($data); 

                return TRUE;
            }

        // Nothing found! Return FALSE! 
        }else{
            return FALSE;
        }
    } 
```

# jquery - jquery：按钮选择器无法处理动态按钮字段

> ID：12216040
> 
> 赞同：1
> 
> 时间：2012-08-31T13:09:55.277
> 
> 标签：jquery, dynamic, jquery-selectors

在下面的代码中，jquery 选择器 $(":button") 能够选择 (+) 按钮。

但是，当我根据下拉菜单的选定值创建新按钮时。同一选择器无法选择新的 (-) 按钮。

附上代码：

```
 <script>
$(document).ready(function () {
$(":button").click(function () {
        alert("here");
        })
});

</script>

<select id="thing" name="garden" >
<option id="u" selected="selected" ></option>
<option id="1" > Flowers </option>
<option id="2" > Shrubs </option>
<option id="3" > Trees </option>
<option id="4" > Bushes </option>
<option id="5" > Grass</option>
<option id="6" > Dirt</option>

</select>

<button> + </button>

<div id="area"></div>

<button> + </button>
<script>
$("#thing").change(function () {
      var str = "";
      var id="";
      var num=1;
      $("#thing option:selected").each(function () {
            str += $(this).text() + " ";
            id = $(this).attr('id');
    $("#"+id).attr('disabled',"disabled");
          });
      if (id != "u") {
          var tx=$("#area").html();
          var button="<button>-</button>";
          $("#area").html(tx+"<div>"+str+" "+button+"</div>");
      };
    }).trigger('change');
</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:13:06.853

```
$(document).on('click', 'button', function () {
    alert("here");
}); 
```

这是一个委托事件处理程序，这意味着它可以处理动态添加的元素。来自该[`on`方法](http://api.jquery.com/on/)的 jQuery 文档：

> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档的头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:12:47.743

对于dynamicallay生成的元素事件应该委托，可以使用`on`方法。

```
$(document).on('click', 'button', function() {
        alert("here");
}); 
```

另请注意，`:button`选择器已弃用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:16:47.873

原因是，因为您的 click 函数仅将 click 事件侦听器绑定到文档准备好后直接存在的元素。如果您想让事件也监听动态创建的元素，请使用 .on() 函数。这个函数的文档在[这里](http://api.jquery.com/on/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:17:06.953

```
$(":button").bind("click", function () { alert("here"); }); 
```

只需使用绑定，更容易..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T13:11:27.057

尝试这个 ：

```
$("#thing").on("click","button",function () {
   alert("here");
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T13:12:49.897

尝试`on`代替`click`

```
$(":button").on("click",function () {
        alert("here");
}) 
```

[jQuery 文档](http://api.jquery.com/on/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T13:13:33.377

您只需要在添加新元素后绑定按钮的点击事件。即在创建新按钮的代码之后，再写一次这个函数

```
 $(":button").click(function () {
    alert("here");
    }) 
```

# c# - 在组加入 linq 查询中将字符串转换为十进制

> ID：12216043
> 
> 赞同：9
> 
> 时间：2012-08-31T13:10:06.120
> 
> 标签：c#, sql, linq, entity-framework

我必须加入两个表，但只返回第二个表中与第一个表中的记录关联的所有记录的“值”总和相同的那些记录。

```
from p in db.TPs
join n in db.TNs
on p.Key equals n.Key
where (decimal.Parse(p.Value) == db.TNs.Where( nn => nn.Key == p.Key )
                                       .Sum( nn=> decimal.Parse(kk.Value))) 
```

我正在使用实体框架代码优先。

当然，Linq 抱怨

> LINQ to Entities 无法识别方法“System.Decimal Parse(System.String)”方法

表很大，我必须减少输出，所以在客户端进行这种转换是不可能的。列类型转换也不是一种选择。

SQL查询是：

```
select * from TP as p
join * from TN as n on n.Key = p.Key
where p.Value = (select sum(cast(n.Value as decimal(12,2))) from TN where Key = p.Key) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T14:49:12.470

您可以通过创建一些模型定义的函数来做到这一点。请参阅此链接：[Creating and Calling Model-Defined Functions in at least Entity Framework 4](http://msdn.microsoft.com/en-us/library/dd456857)

具体来说，要添加一些函数将字符串转换为十进制和字符串转换为 int，请执行以下步骤：

以 XML 格式打开 .EDMX 文件，以便编辑文本。

将您的自定义转换函数添加到“CSDL 内容”部分的“方案”部分

```
<edmx:ConceptualModels>
<Schema....> 
```

新功能：

```
<Function Name="ConvertToInt32" ReturnType="Edm.Int32">
  <Parameter Name="myStr" Type="Edm.String" />
  <DefiningExpression>
    CAST(myStr AS Edm.Int32)
  </DefiningExpression>
</Function>
<Function Name="ConvertToDecimal" ReturnType="Edm.Decimal">
  <Parameter Name="myStr" Type="Edm.String" />
  <DefiningExpression>
    CAST(myStr AS Edm.Decimal(12, 2))
  </DefiningExpression>
</Function> 
```

（修改上述 Edm.Decimal 的精度以满足您的需要。）

然后，在您的 c# 代码中，您需要创建可以存储在静态类中的相应静态方法：

```
// NOTE: Change the "EFTestDBModel" namespace to the name of your model
[System.Data.Objects.DataClasses.EdmFunction("EFTestDBModel", "ConvertToInt32")]
public static int ConvertToInt32(string myStr)
{
    throw new NotSupportedException("Direct calls are not supported.");
}

// NOTE: Change the "EFTestDBModel" namespace to the name of your model
[System.Data.Objects.DataClasses.EdmFunction("EFTestDBModel", "ConvertToDecimal")]
public static decimal ConvertToDecimal(string myStr)
{
    throw new NotSupportedException("Direct calls are not supported.");
} 
```

最后，调用你的新方法：

```
using (var ctx = new EFTestDBEntities())
{
    var results = from x in ctx.MyTables
                  let TheTotal = ctx.MyTables.Sum(y => ConvertToDecimal(y.Price))
                  select new
                  {
                      ID = x.ID,
                      // the following three values are stored as strings in DB
                      Price = ConvertToDecimal(x.Price),
                      Quantity = ConvertToInt32(x.Quantity),
                      Amount = x.Amount,
                      TheTotal
                  };
} 
```

您的具体示例如下所示：

```
from p in db.TPs
join n in db.TNs
on p.Key equals n.Key
where (ConvertToDecimal(p.Value) == 
        db.TNs.Where( nn => nn.Key == p.Key ).Sum( nn=> ConvertToDecimal(kk.Value))) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:21:59.307

不幸的是 LINQ to SQL 不能创建一个带有字符串到十进制转换的 SQL 表达式。

如果您想这样做，您必须使用以下命令执行您自己的查询：

[执行存储查询](http://msdn.microsoft.com/en-us/library/dd487208.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:24:11.660

您可以将 转换`string`为，而不是将其转换为。如果其他人不这样做，这种方法可能会奏效。`decimal``decimal``string`

# java - 为什么不抛出 ConcurrentModificationException

> ID：12216045
> 
> 赞同：1
> 
> 时间：2012-08-31T13:10:11.503
> 
> 标签：java, exception, collections

当您使用 Java 1.5 现代 for 循环迭代集合并删除某些元素时，会引发并发修改异常。

但是当我运行以下代码时，它不会抛出任何异常：

```
 public static void main(String a []){
          Set<String> strs = new HashSet<String>();
          strs.add("one");
          strs.add("two");
          strs.add("three);

          for(String str : strs){
                   if(str.equalsIgnoreCase("two"){
                          strs.remove(str);
                   }
          }  
    } 
```

上面的代码不会抛出 ConcurrentModificationException。但是当我在我的 Web 应用程序服务方法中使用任何这样的 for 循环时，它总是抛出一个。为什么？我确信当它在服务方法中运行时没有两个线程正在访问集合那么是什么导致了两种场景中的差异，即它被抛出而不是另一个？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T13:13:56.870

我`ConcurrentModificationException`在运行你的代码时得到一个（在修复了几个错别字之后）。

您不会得到 a 的唯一情况`ConcurrentModificationException`是：

*   如果您删除的项目不在集合中，请参见以下示例：
*   如果您删除最后一个迭代项（在 HashSet 的情况下不一定是最后添加的项）

```
public static void main(String[] args) {
    Set<String> strs = new HashSet<String>();
    strs.add("one");
    strs.add("two");
    strs.add("three");

    for (String str : strs) {
        //note the typo: twos is NOT in the set
        if (str.equalsIgnoreCase("twos")) {
            strs.remove(str);
        }
    }
} 
```

# javascript - 在打开的页面上调用特定于页面的函数

> ID：12216052
> 
> 赞同：0
> 
> 时间：2012-08-31T13:10:58.127
> 
> 标签：javascript, tabs, firefox-addon, firefox-addon-sdk, dom-events

在我目前正在使用**插件构建器**开发的 Firefox 扩展中，我在新选项卡中打开一个页面，我想调用此页面上脚本中定义的 JS 函数。为此，我使用以下代码：

```
var toOpenTab = require("tabs");
toOpenTab.on('open', function(tab){
    toOpenTab.on('ready', function(tab){
        tab.attach({
            contentScript:
                "function showFile(){PageSpecificFunction()};window.onload=showFile();"
        });

    });

}); 
```

*我实现了 window.onload 事件，以确保在页面中加载包含 PageSpecificFunction() 定义的脚本，即使我认为没有必要（因为我使用了 toOpenTab.onReady 事件）。*

问题是：**PageSpecificFunction() is not defined**。我知道该函数已正确定义并且可以正常工作，因为我可以在 firebug 控制台中调用它并且它可以完美运行。

打开我的页面后，有没有办法让我的扩展程序调用这个函数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:28:15.860

您需要使用全局`unsafeWindow`对象：

`unsafeWindow.PageSpecificFunction();`

[然而，这是一个安全风险](https://addons.mozilla.org/en-US/developers/docs/sdk/1.9/dev-guide/guides/content-scripts/accessing-the-dom.html)

# javascript - 与 Jasmine 内置的 Spys 相比，使用 Sinon.js 有什么优势？

> ID：12216053
> 
> 赞同：20
> 
> 时间：2012-08-31T13:11:04.100
> 
> 标签：javascript, bdd, jasmine, sinon, js-test-driver

我正在拼凑一个 jsTestDriver/Jasmine 环境来测试我们的前端代码，并且我看到很多对 Sinon.js 的引用，用于独立（或插入）间谍。有人能描述一下 Sinon.js 带来了什么 Jasmine 没有用于测试 UI 的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-11T19:46:29.957

***将其发布为答案，因为这不适合评论部分！***

FWIW，我们使用 SinonJS 创建了一个 FakeHTTP（LinearEPG）服务器组件，用于实现承载 EPG（线性电视节目时间表）信息的真实服务器的 REST-API。

然后，我们以两种方式使用了这个 FakeHTTP-LinearEPG 服务器：

1.  与显示 EPG 的 Web-App 一起使用，用于测试导航等。
2.  测试获取 EPG 以及 Jasmine UT Specs 的 Javascript 代码。

当然，我们可以使用 Jasmine-Spies 实现 FakeServer 功能，但它似乎有点复杂。另一方面，FakeServer 提供了一种优雅而快速的方式来模拟提供 REST 接口的服务器。

当服务器本身还在开发中时，基于 SinonJS 的 FakeServer 被证明是非常有用的！

# android - 以编程方式创建的按钮上的 OnClick 事件处理程序

> ID：12216063
> 
> 赞同：0
> 
> 时间：2012-08-31T13:11:44.030
> 
> 标签：android, android-fragments, android-viewpager

我正在开发一个使用片段的 Android 3.1 应用程序。

在其中一个片段上，需要创建**n 个**按钮并为每个按钮设置一个 onClick 事件处理程序。

为此，我想创建一个`FragmentActivity`处理这些事件的方法，但我不知道如何。注意：`FragmentActivity`是一个`android.support.v4.app.FragmentActivity`使用`android.support.v4.view.ViewPager`.

在另一个片段上，我有以下`XML`代码：

```
 <Button
        android:id="@+id/btnTakeArticlePhotos"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="right"
        android:text="@string/btn_take_photo"
        android:onClick="onTakePhotoClick" /> 
```

而这段代码`FragmentActivity`：

```
public void onTakePhotoClick(View view)
{
    Log.v("FillEReportFragmentActivity", "onTakeFactoryPhotoClick");
    int imgType, imgSubType;

    switch (view.getId())
    {
        case R.id.btnTakeFactoryPhotos:
            imgType = ImageType.EREPORT;
            imgSubType = SubImageType.EREPORT_FACTORY_OUTLOOK;
        break;
        case R.id.btnTakeArticlePhotos:
            imgType = ImageType.ARTICLE;
            imgSubType = SubImageType.NONSET;
        default:
            imgType = -1;
            imgSubType = -1;
        break;
    }

    Intent intent = new Intent(FillEReportFragmentActivity.this, CameraActivity.class);
    intent.putExtra(BundleKeys.tablePk, eReportId);
    intent.putExtra(BundleKeys.imgType, imgType);
    intent.putExtra(BundleKeys.imgSubType, imgSubType);

    startActivityForResult(intent, CAMERA_REQUEST_CODE);
} 
```

**我想对这些`n`按钮做同样的事情：创建一个方法`FragmentActivity`来处理所有的 onClick 事件。**

我看到，如果我想处理以编程方式创建的按钮上的 onClick 事件，我需要实现`onClickEventListener`.

如何处理那些 onClick 事件`FragmentActivity`？还是有更好的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:19:33.367

你应该做你的`FragmentActivity`工具`View.OnClickListener`。

然后在您`Fragment`的`onActivityCreated()`回调中，您可以执行以下操作：

```
getView().findViewById(R.id.Button1).setOnClickListener(
                                  (OnClickListener)getActivity)); 
```

你也可以定义你自己的`interface`，并让你的`Activity`实现`interface`与 in 相同`onActivityCreated()`，然后让`Fragment`实现`OnClickListener`，然后`Activity`像这样调用你：

```
public MyFragment extends Fragment implements OnClickListener(){
      public MyInterface mInterface;

      protected void onActiviyCreated(){
           mInterface=(MyInterface)getActivity();
      }

      public void onViewCreated(View view, Bundle savedInstanceState){
           view.findViewById(R.id.myButton).setOnClickListener(this);
      }
      public void onClick(View v){
          ....
          mInterface.buttonClicked();
      }
} 
```

# cocoa-touch - 将 UITapGestureRecognizer 放在 UIButton 上方时谁会赢？

> ID：12216064
> 
> 赞同：1
> 
> 时间：2012-08-31T13:11:44.413
> 
> 标签：cocoa-touch, uiview, uigesturerecognizer

我在我的 UI 上放置了一个透明`UIView`的来检测点击手势。我的 UI 中也有一些`UIButton`需要保持活跃的 s。

透明视图下面会`UIButton`与`UITapGestureRecognizer`?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:54:54.160

我尝试了我的 TapRegocnizer 的所有选项，这是结论：

```
C B E  
       Recognizer and Buttons react
    x  Recognizer and Buttons react
  x    Only Recognizer works
  x x  Only Recognizer works
x      Only Recognizer works
x   x  Only Recognizer works
x x    Only Recognizer works
x x x  Only Recognizer works

Legend:
C: Canceled in View
B: Delayed Begin
D: Delayed End 
```

看起来 TapRecognizer 总是被触发，即使它下面有一个 Button。`Canceled in View`如果没有设置或`Delayed Begin`选项，按钮将被激活。所以要回答我的问题，按钮永远不会胜过 TapRecognizer。

# java - 如何从java中的输入字符串中提取数值

> ID：12216065
> 
> 赞同：13
> 
> 时间：2012-08-31T13:11:44.420
> 
> 标签：java, string

如何仅从输入字符串中提取数值？

例如，输入字符串可能是这样的：

```
String str="abc d 1234567890pqr 54897"; 
```

我只想要数值，即`"1234567890"`和`"54897"`。所有字母和特殊字符都将被丢弃。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-31T13:15:08.867

您可以使用类中的[`.nextInt()`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextInt%28%29)方法[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)：

> 将输入的下一个标记扫描为 int。

或者，您也可以执行以下操作：

```
String str=" abc d 1234567890pqr 54897";

Pattern p = Pattern.compile("(\\d+)");
Matcher m = p.matcher(str);
while(m.find())
{
    System.out.println(m.group(1));
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-31T13:28:07.887

```
String str=" abc d 1234567890pqr 54897";
Pattern pattern = Pattern.compile("\\w+([0-9]+)\\w+([0-9]+)");
Matcher matcher = pattern.matcher(str);
for(int i = 0 ; i < matcher.groupCount(); i++) {
  matcher.find();
  System.out.println(matcher.group());
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-31T13:17:42.237

`yourString.toCharArray();`使用Then 遍历字符并将字符串拆分为 char 数组，并使用它`Character.isDigit(ch);`来识别这是否是数值。或者遍历整个字符串并使用`str.charAt(i)`. 例如：

```
public static void main(String[] args) {
    String str = "abc d 1234567890pqr 54897";
    StringBuilder myNumbers = new StringBuilder();
    for (int i = 0; i < str.length(); i++) {
        if (Character.isDigit(str.charAt(i))) {
            myNumbers.append(str.charAt(i));
            System.out.println(str.charAt(i) + " is a digit.");
        } else {
            System.out.println(str.charAt(i) + " not a digit.");
        }
    }
    System.out.println("Your numbers: " + myNumbers.toString());
} 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-31T13:17:35.847

您可以执行以下操作：

```
Matcher m = Pattern.compile("\\d+").matcher(str);
while (m.find()) {
   System.out.println(m.group(0));
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-01-03T00:48:48.677

使用 java Scanner 类的示例

```
import java.util.Scanner;

Scanner s = new Scanner( "abc d 1234567890pqr 54897" );
s.useDelimiter( "\\D+" );
while ( s.hasNextInt() ){
    s.nextInt(); // get int
} 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2015-03-26T09:03:23.240

如果您不想使用正则表达式，

```
String str = " abc d 1234567890pqr 54897";

char[] chars = new char[str.length()];

int i = 0;
for (int j = 0; j < str.length(); j++) {
    char c = str.charAt(j);
    if (Character.isDigit(c)) {
        chars[i++] = c;
        if (j != chars.length - 1)
            continue;
    }
    if (chars[0] == '\0')
        continue;
    String num = new String(chars).trim();
    System.out.println(num);
    chars = new char[str.length()];
    i = 0;

} 
```

输出：1234567890 54897

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-08-31T13:26:09.193

您可以使用`str = str.replaceAll("replaced_string","replacing_string");`

```
String str=" abc d 1234567890pqr 54897";
String str_rep1=" abc d ";
String str_rep2="pqr ";
String result1=str.replaceAll("", str_rep1);
String result2=str.replaceAll(",",str_rep2); 
```

npinti 的建议也可以使用。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-12-23T17:47:37.100

您想丢弃除数字和空格之外的所有内容：

```
String nums = input.replaceAll("[^0-9 ]", "").replaceAll(" +", " ").trim(); 
```

额外的调用清理了双倍和前导/尾随空格。

如果您需要一个数组，请添加一个拆分：

```
String[] nums = input.replaceAll("[^0-9 ]", "").trim().split(" +"); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2016-05-06T05:56:37.330

```
 String line = "This order was32354 placed 343434for 43411 QT ! OK?";
        String regex = "[^\\d]+";

        String[] str = line.split(regex);
        String required = "";
        for(String st: str){
            System.out.println(st);
        } 
```

通过上面的代码，您将获得所有数值。然后你可以合并它们或者你想对这些数值做什么。

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2012-08-31T13:44:34.110

```
public static List<String> extractNumbers(String string) {
    List<String> numbers = new LinkedList<String>();
    char[] array = string.toCharArray();
    Stack<Character> stack = new Stack<Character>();

    for (int i = 0; i < array.length; i++) {
        if (Character.isDigit(array[i])) {
            stack.push(array[i]);
        } else if (!stack.isEmpty()) {
            String number = getStackContent(stack);
            stack.clear();
            numbers.add(number);
        }
    }
    if(!stack.isEmpty()){
        String number = getStackContent(stack);
        numbers.add(number);            
    }
    return numbers;
}

private static String getStackContent(Stack<Character> stack) {
    StringBuilder sb = new StringBuilder();
    Enumeration<Character> elements = stack.elements();
    while (elements.hasMoreElements()) {
        sb.append(elements.nextElement());
    }
    return sb.toString();
}

public static void main(String[] args) {
    String str = " abc d 1234567890pqr 54897";
    List<String> extractNumbers = extractNumbers(str);
    for (String number : extractNumbers) {
        System.out.println(number);
    }
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2013-06-27T04:28:33.430

只需提取数字

```
String str=" abc d 1234567890pqr 54897";        

for(int i=0; i<str.length(); i++)
    if( str.charAt(i) > 47 && str.charAt(i) < 58)
        System.out.print(str.charAt(i)); 
```

另一个版本

```
String str=" abc d 1234567890pqr 54897";        
boolean flag = false;
for(int i=0; i<str.length(); i++)
    if( str.charAt(i) > 47 && str.charAt(i) < 58) {
        System.out.print(str.charAt(i));
        flag = true;
    } else {
        System.out.print( flag ? '\n' : "");
        flag = false;
    } 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2012-08-31T13:15:20.653

您可以在空格上拆分字符串以获取各个条目，遍历它们，并尝试使用相关方法 on 解析它们`Integer`，使用`try`/`catch`方法来处理将其解析为数字失败的情况。这可能是最直接的方法。

或者，您可以构建一个正则表达式以仅匹配数字并使用它来查找所有数字。对于大字符串来说，这可能性能要好得多。正则表达式看起来*像*`\b\d+\b'。

更新：或者，如果这不是家庭作业或类似的（我有点假设您正在寻找自己实现它的线索，但这可能无效），您可以使用@npinti 提供的解决方案。这可能是您在生产代码中应该采用的方法。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2019-12-11T11:44:53.187

```
String str = "abc d 1234567890pqr 54897";
str = str.replaceAll("[^\\d ]", ""); 
```

结果将是“1234567890 54897”。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2017-06-20T09:00:01.540

```
 public static String convertBudgetStringToPriceInteger(String budget) {
    if (!AndroidUtils.isEmpty(budget) && !"0".equalsIgnoreCase(budget)) {
        double numbers = getNumericFromString(budget);
        if( budget.contains("Crore") ){
            numbers= numbers* 10000000;
        }else if(budget.contains("Lac")){
            numbers= numbers* 100000;
        }
        return removeTrailingZeroesFromDouble(numbers);
    }else{
        return "0";
    }
} 
```

从字母数字字符串中获取数值

```
 public static double getNumericFromString(String string){
    try {
        if(!AndroidUtils.isEmpty(string)){
            String commaRemovedString = string.replaceAll(",","");
            return Double.parseDouble(commaRemovedString.replaceAll("[A-z]+$", ""));
            /*return Double.parseDouble(string.replaceAll("[^[0-9]+[.[0-9]]*]", "").trim());*/

        }
    }catch (NumberFormatException e){
        e.printStackTrace();
    }
    return 0;
} 
```

例如。如果我通过 1.5 lac 或 15,0000 或 15 千万，那么我们可以从这些函数中获得数值。我们可以根据需要自定义字符串。例如。如果是 1.5 Lac，结果将是 150000

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2015-12-23T10:46:42.703

```
public class ExtractNum

{

  public static void main(String args[])

  {

   String input = "abc d 1234567890pqr 54897";

   String digits = input.replaceAll("[^0-9.]","");

   System.out.println("\nGiven Number is :"+digits);

  }

 } 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-01-14T15:49:54.620

```
String str = "abc34bfg 56tyu";

str = str.replaceAll("[^0-9]",""); 
```

输出：3456

# java - Struts 1：如何在动作之间传递数据？

> ID：12216066
> 
> 赞同：1
> 
> 时间：2012-08-31T13:11:52.437
> 
> 标签：java, jsp, struts

我正在尝试在两个`Action`类之间传递数据。我目前正在这样做

在我的第一个动作课上

```
doExecute(){
         request.setAttribute("Order_ID", 2);
         // code to find forward to next Action class
} 
```

在下面的 Action 类中

```
doExecute(){
     Object id = request.getAttribute("Order_ID");
     // code to process id
} 
```

但是，该`getAttribute()`方法始终返回 null。如何在两个相互跟随的动作表单之间传递数据？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:41:22.290

有很多方法，你可以做到这一点。

**方法一：**

在会话中设置属性，然后取回值，然后将其从会话中删除。

```
doExecute(){

 HttpSssion session=request.getSession();
 session.setAttribute("Order_ID", 2);
} 
```

然后将其退回。

```
doExecute(){

 HttpSssion session=request.getSession();
 Object id =session.getAttribute("Order_ID");
 session.removeAttribute("Order_ID");
} 
```

**方法二：**

传递 url 中的值，然后从其他操作中取回，但这里需要记住，您的请求不会丢失。

有关更多信息，请参阅以下链接。

[http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html](http://www.apl.jhu.edu/~hall/java/Servlet-Tutorial/Servlet-Tutorial-Session-Tracking.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:03:29.837

如果您处于会话模式，则在您的 actionForm 中保存您想要传输的数据，那么您不需要 setAttribute/getAttribute。

# html - 如何创建更改页面的按钮？

> ID：12216073
> 
> 赞同：0
> 
> 时间：2012-08-31T13:12:12.543
> 
> 标签：html, google-apps-script

我的 google 应用程序脚本项目中的 html 文件中有一个表单，单击提交按钮时我需要重定向到另一个 html 文件。

HTML 代码：

```
 <html>
      <script>
        function doSomething(){
          alert('this one works too!'); 
          //here Change of page
        }
      </script>

     <body>
        <h1 style="text-align:center;font-family:Tahoma;">HORAS LABORADAS<br/>    
        <form style="margin-left:90px;font-family:Trebuchet MS;">
          <b>Nombre</b><br/>
          <input type="button" onclick="doSomething()">
        </form>
      </body>
 </html> 
```

我称之为

```
function doGet() {
  return HtmlService.createTemplateFromFile('prueba').evaluate();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:10:35.373

HTML文件1

```
 <html>
          <body>
            <h1 style="text-align:center;font-family:Tahoma;">HORAS LABORADAS<br/>    
            <form style="margin-left:90px;font-family:Trebuchet MS;">
              <b>Nombre</b><br/>
              <?var url = getUrl();?><a href='<?=url?>?page=2'><input type='button' name='test' value='GO TO PAGE 2'></a>
            </form>
          </body>
     </html> 
```

HTML文件2

```
<html>
  <h1>This is Page 2.</h1><br/>
 <?var url = getUrl();?><a href='<?=url?>?page=1'>  <input type='button' name='test' value='RETURN TO PAGE 1'></a>
</html> 
```

代码.GS

```
function getUrl(){
  var url = ScriptApp.getService().getUrl();
  return url;
}

 function doGet(requestInfo) {
      var url = ScriptApp.getService().getUrl();
      if (requestInfo.parameter && requestInfo.parameter['page'] == '2') {
        return HtmlService.createTemplateFromFile('FILE2').evaluate();
      }
      return HtmlService.createTemplateFromFile('FILE1').evaluate();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:30:17.287

如果您只是想重定向到另一个页面，请使用以下命令：

```
<script>
    function doSomething(){
      alert('this one works too!'); 
      window.location.href = "http://myurl.com";
    }
</script> 
```

来源：[点击此链接](https://stackoverflow.com/questions/503093/how-can-i-make-a-redirect-page-in-jquery-javascript)

# alfresco-share - Alfresco 4.0d 自定义方面搜索

> ID：12216075
> 
> 赞同：0
> 
> 时间：2012-08-31T13:12:31.217
> 
> 标签：alfresco-share

我目前正在 Alfresco 中为我创建的一些自定义方面开发自定义搜索。你能指导我到正确的 xml 文件，我需要编辑它以在搜索中添加我的自定义方面吗？我在网上搜索了很多帖子，但我找不到任何东西......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:02:01.270

解释得更好，您的意思是 Alfresco Explorer 中的默认高级搜索吗？在这种情况下，您应该在里面搜索一个名为 web-client-config-custom.xml.sample 的文件：

```
/Alfresco/tomcat/shared/classes/alfresco/extension 
```

或者

```
/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/extension 
```

然后重命名删除示例扩展名的文件，使其具有 web-client-config-custom.xml 并将文件复制到上面的第一个路径中（“共享”路径，而不是 webapps/alfresco 路径）；然后，在里面，搜索一个名为“config evaluator”的标签 Advanced Search，它应该是这样的：

```
 <!-- Example of configuring advanced search -->
   <!--
   <config evaluator="string-compare" condition="Advanced Search">
      <advanced-search>
         <content-types>
         </content-types>
         <custom-properties>
            <meta-data aspect="app:simpleworkflow" property="app:approveStep" />
         </custom-properties>
      </advanced-search>
   </config>
   --> 
```

在那里，您可以添加您在 customModel.xml 文件中创建的自定义方面。要扩展自定义高级搜索功能，您可以添加一些自定义内容类型搜索或不属于方面的属性，如下所示：

```
<config evaluator="string-compare" condition="Advanced Search">
    <advanced-search>
        <content-types>
            <type name="myNamespace:customType" />
        </content-types>
        <custom-properties>
            <meta-data type="myNamespace:customType" property="myNamespace:customTypeProperty" />
            <meta-data aspect="myNamespace:customAspect" property="myNamespace:customAspectProperty" />
        </custom-properties>
    </advanced-search>
</config> 
```

希望能帮助到你..

# php - cronjob 每分钟运行一次

> ID：12216082
> 
> 赞同：1
> 
> 时间：2012-08-31T13:12:50.390
> 
> 标签：php, mysql, cron, sleep, crontab

**Q：**设置cronjob每分钟运行脚本可以吗，否则会导致过载？
我想每分钟运行一次的原因是：

公共脚本：
* 客户端添加（例如：）广告
* 脚本在 mysql 数据库中插入数据（when = time + 2hrs, `activated = 0`, ...）

Cronjob 运行：
* 脚本检查 mysql 数据库，WHERE 时间低于`"NOW"`，`activated = 0`并获取该信息，将其插入另一个表，设置`activated = 1`何时插入..（`activated = 1`发生在第一个表中（公共脚本放置信息的位置））

那么如果这个脚本每分钟运行一次会导致过载吗？

如果是：
**Q2**您是否可以建议其他选项（关于更改脚本的工作方式）？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:20:31.083

每分钟都可能过多，但不会使计算机超载。您正在执行的只是 1`SELECT`和几个`INSERT`s。这最多需要几秒钟。

但是，您可以进行的一项设计更改是，通常在关系数据库中的表之间复制数据是没有意义的。您可能只想使用外键引用数据，并使用`JOIN`语句通过其他信息访问它。在这种情况下，您不会在 cron 作业中复制任何内容；你只需插入一个外键。

# android - JellyBean 上的 WiFi-Direct，WPA 请求者搞砸了

> ID：12216085
> 
> 赞同：5
> 
> 时间：2012-08-31T13:13:03.017
> 
> 标签：android, wifi, android-4.2-jelly-bean, wifi-direct

所以几个月前我开始开发一些 WiFi-Direct 应用程序。几天前，我将我的 Galaxy Nexus 都更新为 Jelly Bean (4.1.x) 并测试了我的应用程序，但似乎又出现了问题。获得主要功能集已经很痛苦了在 ICS 上，但现在它不再工作了。

在我的 logcat 中，我得到的只是这样的：

```
/wpa_supplicant(  392): p2p0: P2P-PROV-DISC-PBC-REQ a2:0b:ba:xy:zz:xx p2p_dev_addr=a2:0b:ba:xy:zz:xx pri_dev_type=10-0050F204-x name='Android_e9f0' config_methods=0x188 dev_capab=0x27 group_capab=0x0
I/wpa_supplicant(  392): p2p0: P2P-DEVICE-FOUND a2:0b:ba:xy:zz:xx p2p_dev_addr=a2:0b:ba:xy:zz:xx pri_dev_type=10-0050F204-5 name='Android_e9f0' config_methods=0x188 dev_capab=0x27 group_capab=0x0
I/wpa_supplicant(  392): p2p0: P2P-GO-NEG-REQUEST a2:0b:ba:xx:zz:xy dev_passwd_id=4
I/wpa_supplicant(  392): p2p0: P2P-FIND-STOPPED 
I/wpa_supplicant(  392): p2p0: P2P-GO-NEG-FAILURE status=7
W/Netd    (  120): No subsystem found in netlink event
D/NetlinkEvent(  120): Unexpected netlink message. type=0x11
I/wpa_supplicant(  392): p2p0: P2P-DEVICE-LOST p2p_dev_addr=a2:0b:ba:xx:zz:xy
I/wpa_supplicant(  392): p2p0: P2P-DEVICE-FOUND a2:0b:ba:xx:zz:xy p2p_dev_addr=a2:0b:ba:xx:zz:xy pri_dev_type=10-0050F204-5 name='Android_e9f0' config_methods=0x188 dev_capab=0x27 group_capab=0x0 
```

“邀请对话框”在第二部手机上正确弹出，并且“有时”（随机）它甚至可以工作，但仅在每五次尝试时才会出现。所以 logcat 告诉我，因为我不是 android-intern 代码的专业人士，所以协商根本就失败了，设备会丢失一小会儿，然后再次被发现，似乎有点混乱。

我的邀请是这样发出的：

```
public void onPeersAvailable(WifiP2pDeviceList peers) {
    if (isInvitationSent)
        return;
    for (WifiP2pDevice dev : peers.getDeviceList()) {
        WifiP2pConfig c = new WifiP2pConfig();
        c.deviceAddress = dev.deviceAddress;
        c.wps.setup = WpsInfo.PBC;

        if (initiator
                && !isInvitationSent
                && WiFiSupport.compareMacAddressesInsensitive(MAC_ADDRESS,
                        dev.deviceAddress)) {
            isInvitationSent = true;
            sendInvitation(c);
        }
    }
}

private void sendInvitation(final WifiP2pConfig config) {
    log("Sending invitation to " + config.deviceAddress);
    mWifiManager.connect(mChannel, config, new ActionListener() {
        @Override
        public void onSuccess() {
            log("Invitation sent!");
        }

        @Override
        public void onFailure(int reason) {
            log("Invitation failed!");
            Toast.makeText(getApplicationContext(), "Could not connect to peer, reason:"+reason, Toast.LENGTH_LONG).show();
            if (!retryChannel) {
                log("Retrying to send invitation.");
                retryChannel = true;
                sendInvitation(config);
            }
        }
    });
} 
```

我在 android 上的 wifi direct 上阅读了很多内容，在我将手机更新为果冻豆之前它一直运行良好。任何人都知道，可能出了什么问题？如果您需要更多代码示例或代码的任何特定部分，请告诉我，因为我不知道什么是可靠的。

感谢您的帮助。

编辑：

将 WifiP2pConfig.wps.setup 方法更改为“显示”，这导致设备 #1 显示 PIN 码，设备 #2 弹出一个带有输入字段的对话框 - 输入正确的 pin 后，这是 logcat 告诉我的：

```
08-31 15:13:28.241: I/wpa_supplicant(384): p2p0: P2P-GO-NEG-SUCCESS 
08-31 15:13:28.241: I/wpa_supplicant(384): rfkill: Cannot open RFKILL control device
08-31 15:13:29.850: W/wpa_supplicant(384): p2p-p2p0-3: Could not connect to kernel driver
08-31 15:13:30.264: E/wpa_supplicant(384): Using interface p2p-p2p0-3 with hwaddr a2:0b:ba:x:y:z and ssid 'DIRECT-ps-Android_e9f0'
08-31 15:13:30.491: I/wpa_supplicant(384): p2p-p2p0-3: CTRL-EVENT-CONNECTED - Connection to a2:0b:ba:x:y:z completed (auth) [id=0 id_str=]
08-31 15:13:43.491: I/wpa_supplicant(384): p2p0: P2P-GROUP-FORMATION-FAILURE 
08-31 15:13:43.491: I/wpa_supplicant(384): p2p0: P2P-GROUP-REMOVED p2p-p2p0-3 GO
08-31 15:13:43.491: W/wpa_supplicant(384): p2p-p2p0-3: Could not connect to kernel driver
08-31 15:13:44.061: E/wpa_supplicant(384): Failed to remove interface (ifidx=15)
08-31 15:13:44.178: W/Netd(120): No subsystem found in netlink event
08-31 15:13:44.178: D/NetlinkEvent(120): Unexpected netlink message. type=0x11
08-31 15:13:44.248: W/Netd(120): No subsystem found in netlink event
08-31 15:13:44.248: D/NetlinkEvent(120): Unexpected netlink message. type=0x11
08-31 15:13:44.280: I/wpa_supplicant(384): p2p0: P2P-DEVICE-LOST p2p_dev_addr=a2:0b:ba:x:y:z
08-31 15:13:46.155: I/wpa_supplicant(384): p2p0: P2P-DEVICE-FOUND a2:0b:ba:x:y:z p2p_dev_addr=a2:0b:ba:x:y:z pri_dev_type=10-0050F204-5 name='Android_755f' config_methods=0x188 dev_capab=0x27 group_capab=0x0 
```

有趣的是：08-31 15:13:43.491: W/wpa_supplicant(384): p2p-p2p0-3: 无法连接到内核驱动程序

我认为。对我来说，这看起来像是 Android 自己的 wifi-direct-framework 中的一个错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-14T10:37:41.430

要将这个问题标记为已回答，我只需将我的“解决方案”复制到这个问题：

似乎只有当您在另一个 wifi 网络中时，组形成才会失败，例如在您的家庭 wifi 等中。所以 Android 无法禁用它 - 因此无法通过 WiFi Direct 连接。

我必须确保这些设备不在 wifi 网络中。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-11-14T18:56:11.057

Android 在 API 级别 16 中使用 Jelly Bean 更新了 Wi-Fi Direct API。如您所知，核心 API 是在 API 级别 14 中首先与 ICS 一起添加的。在这里您可以找到有关 Wi-Fi Direct 的添加类，

```
WifiP2pDnsSdServiceInfo
WifiP2pDnsSdServiceRequest
WifiP2pServiceInfo
WifiP2pServiceRequest
WifiP2pUpnpServiceInfo
WifiP2pUpnpServiceRequest 
```

这里的一些类使用`WifiP2pManager`类作为参数。你最好自己看看它们：

[http://developer.android.com/reference/android/net/wifi/p2p/nsd/package-summary.html](http://developer.android.com/reference/android/net/wifi/p2p/nsd/package-summary.html)

IMO 您的应用程序可能会在 API 16 中的此更新之后被损坏、被操纵或其他任何情况。我看到您已经创建了自己的方法来向其他对等方发送邀请，尽管这并不是真正需要的。对等方在 Wi-Fi Direct 中自动获得邀请。因此，您可以让它自己处理邀请过程。再一次，我建议你看看[这里](http://developer.android.com/guide/topics/connectivity/wifip2p.html)，除非你以前做过。

# cocos2d-iphone - 如何在精灵中居中 cclabelttf

> ID：12216086
> 
> 赞同：1
> 
> 时间：2012-08-31T13:13:03.977
> 
> 标签：cocos2d-iphone

所以基本上我想在精灵中添加一些文本并将其居中（无论文本大小如何，都将其居中，就像真正居中一样）

![我想要的是](../Images/996ee85ee79bae6664eaae9d2f9bb549.png)

![问题](../Images/399165fdb0d4b71712c056efaaebfb9b.png)

![这是调试绘图](../Images/0951163dd773fdc3907deb59f5bae48d.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-11T12:16:19.563

你可以设置

```
myLab.position = ccp(mySprite.contentSize.width/2, mySprite.contentSize.hieght/2);
[mySprite addChild: myLab]; 
```

用这个享受...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:46:18.800

默认情况下，您将位置设置为标签的中心。当然，如果你没有改变它的锚点。所以，这段代码

```
[label setPosition: ccpMult(ccpFromSize(sprite.contentSize), 0.5f) ];
[sprite addChild: label]; 
```

将您的标签放在中心

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T14:12:16.730

假设 sprite 和 label 具有相同的父级：

```
label.position = sprite.position; 
```

假设 label 是 sprite 的子项：

```
label.position = ccp(sprite.contentSize.width * sprite.anchorPoint.x,
                     sprite.contentSize.height * sprite.anchorPoint.y); 
```

如果您修改任一节点的锚点，事情就会变得复杂。这可能解释了您注意到的偏移量。在第一种情况下，我不会修改任一节点的锚点。在第二种情况下，您可以修改精灵的锚点，但不能修改标签。

一个常见的错误是使用纹理的 contentSize 属性（即 sprite.texture.contentSize），因为这会给你纹理的尺寸，通常是两倍大小的幂。例如，尺寸为 100x200 的图像会创建一个尺寸为 100x200 的 sprite.contentSize，但纹理尺寸将是 128x256，因为填充到下一个最近的二维幂。

顺便说一句，您的示例图像在字体上方和下方显示了等量的填充。这可能是为“过度绘制”字符或下标等保留空间。这似乎很正常。只要两侧的填充量相等，这种填充不会影响标签的居中。填充也可能取决于您使用的字体类型。

**提示：** 打开 ccConfig.h 并通过修改此行打开边界框的绘制：

```
#define CC_SPRITE_DEBUG_DRAW 1 
```

尽管名称如此，这也会打开 CCLabelTTF 的边界框。它可能会帮助您调试问题。

# php - PHP - 读取目录与从数据库中获取

> ID：12216095
> 
> 赞同：5
> 
> 时间：2012-08-31T13:13:24.937
> 
> 标签：php, database, memory, directory, glob

我的主要原因是对不同的选择发表意见。我在与视频关联的目录中有文件/拇指，当我必须获取它们时，我使用 glob() 函数 glob(DIRECTORY./file_name*.jpg); 它返回视频的所有 JPG 文件的数组。

glob 函数本身非常快，但我仍然担心使用情况，因为每个页面上可以有 20 到 50 个视频，所以会有 20 到 50 个 glob 调用，我应该继续使用它还是开始将数据放入数据库以从中获取文件列表那里而不是 glob(); ?

如果有更好的选择，请告诉我。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T13:27:48.403

与通常的性能问题一样，结果可能会有很大差异，因此答案是：更快的是对**您**来说更快的方法。

开始的地方是衡量你现在正在做的事情需要多少时间。完成此操作后，问问自己：这是否足够快？可能是，尽管它可能不是最快的做事方式，但它仍然如此之快，以至于速度不是问题。

处理页面花费了多少时间来获取文件 glob？1%？10%？50%？这个百分比越高，考虑改变你做事的方式就越值得。

另外，网站的整体性能如何？如果您将每个页面的加载速度提高一倍，人们会注意到吗？如果不是，那么即使您看到明显的地方，也可能不值得进行性能调整。

如果您认为自己可以做得更好，请使用您的数据库实现该功能并衡量是否更快。同样，与此相关的结果可能是高度可变的。例如，如果**您的**数据库负载很重，那么从数据库中获取结果可能会慢得多。如果你有一个几乎没有使用过的强大的数据库，它可能会非常快。只有测试才能告诉你真相。

我要补充一点，您现在做事的方式似乎更简单且更易于维护，因为它会根据磁盘上的实际文件查找文件名。如果您尝试使用数据库，您将不得不担心将数据库中的文件名列表与文件系统中的文件列表同步。

但是，需要注意的一件事是，当您有一个包含大量文件的目录时，许多文件系统的性能会更差。如果您遇到这种情况，请考虑将文件拆分为多个子目录。一种流行的方法是创建名称为 az 的目录，然后将所有以“a”开头的文件放在“a”目录中，将所有以“b”开头的文件放在“b”目录中，等等。但是，这可能只是一旦您拥有数以万计的文件，这很重要，即使那样，它也取决于特定的文件系统及其运行的硬件。

（根据评论编辑：）

由于您正在谈论预先计算结果并将其存储在数据库中，我建议比将内容放入数据库中更好的方法是使用像 http://memcached.org/ 这样的缓存服务器。您可以将其视为一种混合方法：您仍然按照现在的方式做事，但是每次想要结果时，您首先检查缓存是否包含结果；如果是，则使用缓存的结果，否则计算新的 glob。这避免了保持数据库和文件系统同步的问题，因为旧的缓存条目可能会过期并被新的正确条目替换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:48:07.420

如果您已经在数据库中存储了视频本身的信息，您可能会考虑在包含视频数据的表中仅存储每个视频的拇指数。这比查询完整文件名的单独表要快得多，因为您只需要引用您已经查询过的记录中的字段。这可能是您当前两个想法之间的一个很好的折衷方案。但是，您必须确保拇指的名称是一致且可编程的。例如，仅假设视频 123 有 4 个拇指，您可以生成：

```
/path/to/video_123/thumb_01.jpg
/path/to/video_123/thumb_02.jpg
/path/to/video_123/thumb_03.jpg
/path/to/video_123/thumb_04.jpg 
```

# php - TYPO3 在 php 中向图像添加文本，而不是 TS，前端插件

> ID：12216096
> 
> 赞同：-2
> 
> 时间：2012-08-31T13:13:27.160
> 
> 标签：php, image, typo3, typoscript

我需要在图像顶部放置文本并创建缩略图。谷歌地图上有很多标记，上面有数字。

根据下面的评论，我可以理解没有“addTextToImage（）”，但 GIFBUILDER 是要走的路。所以我从一位同事那里得到了一些帮助，最终得到了这个效果很好的结果。在此处阅读有关功能和设置的更多信息：

*   [http://typo3.org/documentation/document-library/core-documentation/doc_core_tsbyex/0.0.16/view/6/3/](http://typo3.org/documentation/document-library/core-documentation/doc_core_tsbyex/0.0.16/view/6/3/)
*   [http://wiki.typo3.org/GIFBUILDER](http://wiki.typo3.org/GIFBUILDER)

以下示例使用 Google 21x22px 的标记。使用 png 最终图像以白色背景结束。使用 gif 创建的图像确实有一个透明的背景组。这可能是服务器设置而不是一般问题。

这是带有简短注释的代码

```
// create marker
$path = 'fileadmin/templates/matchoffice/images/mapPointer.gif'; // gif on transparent backgroupd. If using a png the background cannot be made transparent
$cObj = t3lib_div::makeInstance('tslib_cObj');
$counter = $gmapsElementCounter; // the number that will be written on each marker

$imgTSConfigThumb['file'] = 'GIFBUILDER';
$imgTSConfigThumb['file.']['XY'] = '21,22'; // size of final image. In this case same as input file size
$imgTSConfigThumb['file.']['format'] = 'png';
$imgTSConfigThumb['file.']['backColor'] = '#ffffff'; // we want it transparent. That is done in next line
$imgTSConfigThumb['file.']['transparentColor'] = '#ffffff'; // this color to be transparent.... workaround
$imgTSConfigThumb['file.']['10'] = 'IMAGE';
$imgTSConfigThumb['file.']['10.']['file'] = $path;
$imgTSConfigThumb['file.']['10.']['file.']['maxW'] = 21; // just setting them to the size of the input pig
$imgTSConfigThumb['file.']['10.']['file.']['maxH'] = 22; // just setting them to the size of the input pig
$imgTSConfigThumb['file.']['10.']['align'] = 'c,c'; // center this layer (left/right))
$imgTSConfigThumb['file.']['20'] = 'TEXT';
$imgTSConfigThumb['file.']['20.']['text'] = $counter; // use counter as text
$imgTSConfigThumb['file.']['20.']['fontFile'] = 'fileadmin/templates/matchoffice/fonts/arial.ttf'; // font for text
$imgTSConfigThumb['file.']['20.']['align'] = 'center'; // center (left/right)
$imgTSConfigThumb['file.']['20.']['offset'] = '0,12'; // move it 0pz to the left and 12px down
$imgTSConfigThumb['file.']['20.']['fontColor'] = 'white'; // text color white
$imgTSConfigThumb['file.']['20.']['fontSize'] = '9';
$imgTSConfigThumb['file.']['20.']['niceText'] = '1'; // don't know, but it did improve the text

$thumbpath = $this->cObj->IMG_RESOURCE($imgTSConfigThumb); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T17:58:09.433

问题已结束 - 在此之前更新为有效的最终解决方案

GIFBUILDER 似乎是向图像添加文本时要走的路。如果您需要做同样的事情，请使用上面的代码。

# asp.net-mvc - 更改 asp:button 标签以包含图像

> ID：12216101
> 
> 赞同：0
> 
> 时间：2012-08-31T13:13:50.090
> 
> 标签：asp.net-mvc, button, imagebutton

目前这是我的按钮标签的样子，这就是我想要的样子：

```
 <button class="glossyBtn" type="submit" id="Save" name="Save">
        <img style="vertical-align: middle" alt="" src="<%:Url.Content("~/Content/blueprint/plugins/buttons/icons/tick.png")%>" />
        <span style="vertical-align: middle">Save</span>
 </button> 
```

但我也有一个 asp:Button 标签，我想添加相同的 img 和 span 标签，但不知道如何更改它。所以我可以在按钮文本的左侧添加一个图标图像。

```
<asp:Button runat="server" CommandName="Insert" ToolTip="Insert" Text="Insert" CssClass="glossyBtn"/> 
```

我还有一个 asp:DynamicHyperLink 我想将图像和跨度功能添加到以下内容：

```
<asp:DynamicHyperLink CssClass="glossyBtn" ID="InsertHyperLink" ToolTip="Add New Item" runat="server" Action="Insert">Add New Item            
                </asp:DynamicHyperLink> 
```

任何有见地的提示将不胜感激。

# jquery - jQuery 显示和隐藏未按预期工作

> ID：12216102
> 
> 赞同：2
> 
> 时间：2012-08-31T13:13:51.700
> 
> 标签：jquery, hide, show

请查看示例[http://jsfiddle.net/FuFHe/7/](http://jsfiddle.net/FuFHe/7/)

当我单击按钮 Show Data loader 时，应该显示 div 并在几秒钟后隐藏。在控制台日志中，您可以清楚地看到 qloader div 的 display 属性设置为 block 和 none，但没有任何反应，qloader div 永远不会显示。

怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:19:05.203

为什么使用`sleep`使用`setTimeout`

```
setTimeout(function(){
        $("#loading").hide();},3000); 
```

[现场演示](http://jsfiddle.net/FuFHe/16/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:18:34.160

您需要`sleep()`在`show()`函数完成后立即调用函数。检查小提琴。它现在应该可以工作了。**[JSFIDDLE 链接](http://jsfiddle.net/FuFHe/9/)**

但正如@rahul 所提到的，你应该使用`setTimeout()`函数。

```
$("#loading").show(function(){
    sleep(3000);
    $("#loading").hide();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:19:03.020

这不是一个好的睡眠方式。它吃掉了 CPU，你甚至不能指望它在一台快速机器上花费整整 3 秒。而是[使用 setTimeout()](http://jsfiddle.net/FuFHe/8/)：

```
setTimeout(function(){
    $("#loading").hide();     
    console.log("qloader display = " + $("#loading").css("display")); 
}, 3000); 
```

这将允许浏览器和您的网站在您等待时间过去时继续运行。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:22:14.717

尝试使用 setTimeout

```
$('.btn').on( "click" , function( event ){
 $("#loading").show(); 
    setTimeout(function(){
       $("#loading").hide();
    }, 3000);

}); 
```

[**jsFiddle**](http://jsfiddle.net/FuFHe/14/)

# php - php 如何从远程 url 提供下载（流）？

> ID：12216107
> 
> 赞同：1
> 
> 时间：2012-08-31T13:13:57.473
> 
> 标签：php, curl, readfile

我必须从我不知道文件大小的远程 url 提供下载。

到目前为止我遇到的问题

*   我不知道文件大小

*   大文件约 100 mb

*   当我使用 CURL/readfile/... 为用户提供下载时，PHP 会等待 ful 文件，然后显示下载窗口。

如何提供部分、流、大块下载器？

我想在 phpmyadmin 上做一些事情——如果你下载一个 sql 导出——那么它也会流式传输。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:17:59.857

流式传输通常使用一个小缓冲区来完成。假设您已`allow_url_fopen`设置为 true：

```
$file = fopen('http://example.com/large-file.bin', 'rb');
while (($content = fread($file, 2048)) !== false) { // Read in 2048-byte chunks
    echo $content; // or output it somehow else.
    flush(); // force output so far
}
fclose($file); 
```

# html - 如何将由图像组成的画布保存到图像对象中

> ID：12216108
> 
> 赞同：1
> 
> 时间：2012-08-31T13:14:00.910
> 
> 标签：html, canvas, html5-canvas

我有一个画布，里面有一个图像。现在我正在尝试将画布保存为我想在另一个画布中使用的 Image 对象。但是每次我得到一个空的画布（没有图像）。这是我正在做的事情：

**canvas.toDataURL()**

```
var imageObj = new Image();

imageObj.onload = function() {
    context.drawImage(imageObj,200,20,100,150);
};
imageObj.src = "images/yoda.jpg";
var canvasImage = canvas.toDataURL(); 
```

和**canvas.getContext("2d").getImageData()**

```
var imageObj = new Image();

imageObj.onload = function() {
    context.drawImage(imageObj,200,20,100,150);
};
imageObj.src = "images/yoda.jpg"; 
var imageData = context.getImageData(195,15,110,160); 
```

但这似乎并没有保存画布中存在的图像。有什么帮助吗？

查看实时预览

[http://jsfiddle.net/tvnbD/17/](http://jsfiddle.net/tvnbD/17/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:38:05.050

您必须将 toDataURL 移到 onload 函数中。现在，在图像完成加载之前调用 toDataURL。

# xcode - NSTextview 子类：绑定不起作用

> ID：12216109
> 
> 赞同：1
> 
> 时间：2012-08-31T13:14:13.573
> 
> 标签：xcode, cocoa, binding, subclass, nstextview

我有一个 NSTextView 的子类，它的“值”属性绑定到我的 CoreData 模型中的字符串。我已经在 IB 中设置了它，它工作正常。

现在我想像这样以编程方式更改绑定：

```
[_myView bind:@"value" toObject: _myArrayController withKeyPath:@"selection.myString" options:nil]; 
```

这对普通的 NSTextView 没有问题，但对我的子类没有问题。

所以我用谷歌搜索了一段时间，但没有找到解决方案。然后我发现了这个：当我在我的 appController 中检查我的 NSTextView 子类的暴露绑定时，如下所示：

```
NSLog(@"%@",[_myView exposedBindings]); 
```

我得到“（空）”。如果我把这个命令

```
NSLog(@"%@",[self exposedBindings]); 
```

在我的 NSTextView 子类中的任何方法中，我得到一个包含所有可用绑定的数组，包括“值”。绑定似乎在某些时候丢失了，或者我无法从我的 appControler 访问它们。

这怎么可能？有任何想法吗？

# ajax - 如何通过 jquery 调用具有键/值参数的 wcf 方法？

> ID：12216110
> 
> 赞同：0
> 
> 时间：2012-08-31T13:14:14.193
> 
> 标签：ajax, wcf, jquery

你好; 我有一个关于调用 wcf 服务的问题。如何填充数据数组键/值对？如何通过jquery有效地发送collaction？

```
 $('#btn').click(function () {
            var val = [];
            var names = [];
            $('#cblist :checkbox:checked').each(function (i) {
                val[i] = $(this).val();
                names[i] = $(this).attr('name');
            });

        });

<div id="cblist">"Dynamically filling"</div>
 <br />
     <input type="button" class="btn" value="AddParameter" id="btn" name="btnDelete" /> 
```

**我不喜欢下面的方法（但下面的代码不起作用）你喜欢这个吗？如果您愿意，我怎样才能编写正确的编码？**

```
 for (var i in names,val) data.push({ name: names[i], value: val[i] });
    $.ajax({
       url: "echo/json/",
       data: data,
       dataType: "json",
       traditional: true,
       success: function(msg){alert(msg)}
    }); 
```

但我不能：我不喜欢调用 wcf 服务每个数组项。我将编写 2 种 wvf 服务：

第一个是：

```
 Service1.svc/AddParameter:

public void AddParameters(int id, params string[] names, params string[] values)
{
    //dosomething
} 
```

第二个是：

```
 Service2.svc/AddParameter:

public void AddParameters(int id, NameValueCollection  NameswithValues)
{
    //dosomething

} 
```

概括; 我想为json格式准备数据数组：data{ id: 1, name1:value1, name2,value2..........n}，然后调用Service1和Service2。哪一种是有效的方法？

我的主要问题是：如何编写调用Service1.svc和Service2.svc的高效json ajax方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:20:23.707

试试这个

```
var data;    
$('#cblist :checkbox:checked').each(function (i) {

                   data[$(this).attr('name')] = $(this).val();
                }); 
```

然后只需在您的 ajax 调用中传递数据。

# iphone - MKMapView 注释更改顺序/顺序

> ID：12216114
> 
> 赞同：3
> 
> 时间：2012-08-31T13:14:28.690
> 
> 标签：iphone, annotations, mkmapview, mkannotation

我通过以下方法将注释替换为地图视图中的特定图片：

*   (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id)annotation

但是这个方法不是按addAnnotation的顺序执行的。

这意味着“addAnnotation:”方法是由 A,B,C,D... 的顺序执行的，但是“mapView: viewForAnnotation:”方法是由 B,D,C,A... 执行的

如何使“mapView：viewForAnnotation：”方法按addAnnotation的顺序执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:04:45.043

你不能。Apple从未承诺按照您添加注释的顺序执行该功能，并且由于仅在地图当前可见区域内的注释上调用viewForAnnotations，因此按照您要求的顺序调用它们是没有意义的. 屏幕外的注释会发生什么？当用户滚动地图并看到更多地图时会怎样？再次循环遍历它们，还是只循环新的？

相反，您应该向每个注释添加一些信息，以便您可以计算地图要求的视图。您编写的用于实现 MKAnnotationProtocol 的类需要保存生成正确视图所需的信息，或者包含指向列表中包含其余信息的项目的指针。

# mysql - mysql 字段列表中的未知列变量

> ID：12216115
> 
> 赞同：2
> 
> 时间：2012-08-31T13:14:29.450
> 
> 标签：mysql

我正在尝试编写一个程序来接受受害者及其人数。`victims` 参数将包含这样的值`'123,321,222'`，我正在使用函数调用`SPLIT_STR_FUNCTION`将文本拆分为逗号分隔值。然后我将在数据库中插入每个值。

这是我的程序：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `InsertPost`( in pmsg text, in pthumbPath text, in ppath text, in puserid bigint, in count int, in victims text) 
BEGIN 
INSERT INTO posts(path,thumbpath,msg,userid) VALUES(ppath,pthumbpath,pmsg,puserid);

SET @lastpostid = (SELECT postid FROM posts ORDER BY postid DESC LIMIT 1);

SET @startindex=1;

WHILE @startindex <= count DO 
SET @IndividualIDs=convert((select SPLIT_STR_Function(victims, ',', @startindex)),signed); 
SET @startindex=startindex+1;     
INSERT INTO victims(victimid,postid) VALUES(@IndividualIDs,@lastpostid); 

end WHILE; 
END 
```

错误： **字段列表中的未知列 startindex**

**SPLIT_STR_FUNCTION：（**从[这里](http://blog.fedecarg.com/2009/02/22/mysql-split-string-function/)）

```
CREATE DEFINER=`root`@`localhost` FUNCTION `SPLIT_STR_Function`(
x VARCHAR(255),
delim VARCHAR(12),
pos INT
 ) 

 RETURNS varchar(255) CHARSET latin1
 RETURN REPLACE(SUBSTRING(SUBSTRING_INDEX(x, delim, pos),
    LENGTH(SUBSTRING_INDEX(x, delim, pos -1)) + 1),
    delim, '') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:24:29.183

当您增加它时，您的用户变量`@startindex`会丢失：`@`

```
SET @startindex=startindex+1;
-- Should be:
SET @startindex = @startindex+1; 
```

# mysql - 该表是否需要索引？

> ID：12216121
> 
> 赞同：0
> 
> 时间：2012-08-31T13:14:56.737
> 
> 标签：mysql, performance, refactoring, indexing, uuid

你好，Stackoverflow...

我的组织正在使用 SugarCRM 进行内部流程处理。我们正在进口大约。将 27Gig 价值的 MsSQL 数据放入选定的表中。当我在一个名为 accounts_contacts 的表中工作时，是一个将“帐户”链接到“联系人”的中间表（惊喜）。这是表结构：

名称 类型 归类 Null 默认 id varchar(36) utf8_general_ci 否 无
contact_id varchar(36) utf8_general_ci 是 NULL
account_id varchar(36) utf8_general_ci 是 NULL
date_modified datetime 是 NULL
已删除 tinyint(1) 是 0

演示数据：

0001391a-9d28-4bd0-9cec-f469cd244ca7 19135ac7-d47c-e111-b389-1cc1dee8bacd 1a135ac7-d47c-e111-b389-1cc1dee8bacd 0000-00-00 00:00:00 0

000262b6-a0ef-48de-b0f6-47db097b35d6 43080e24-a24d-e111-8cf6-1cc1dee8aa73 44080e24-a24d-e111-8cf6-1cc1dee8aa73 0000-00-00 00:00:00 0

00042aa7-39cd-4fcb-9f47-dc2b31c69a11 e9764a4d-d921-e111-8e18-1cc1dee8bacd ea764a4d-d921-e111-8e18-1cc1dee8bacd 0000-00-00 00:00:00

目前所说的桌子休息在大约。55k 行。

我的问题：为了速度和性能，这个表在什么时候会保证 contact_id 和 account_id 的索引？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:25:42.753

我想说，contact_id 和 account_id 的组合索引将为您加入帐户和联系人提供即时性能提升。不向表添加索引的唯一原因是在表数据插入/更新时保持索引同步的开销。因此，如果您对该链接表进行了多次写入，则应该对索引的影响进行基准测试。否则，如果您大多只是从该表中读取 - 创建一个索引。

# iphone - 检查像素是否在某个颜色范围内

> ID：12216124
> 
> 赞同：1
> 
> 时间：2012-08-31T13:15:08.710
> 
> 标签：iphone, objective-c, ios

我有一个 iPhone 应用程序，您可以在其中从图像中选择一个像素，它会返回 RGBA 颜色细节。

我需要能够确定所选像素是否在某个颜色范围内，例如特定颜色的明暗变化。

这样做最有效的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:35:55.607

您首先必须将您的 RGBA 颜色空间转换为 HSBA（如 @Zaph 所建议的那样）

```
- (BOOL)getHue:(CGFloat *)hue saturation:(CGFloat *)saturation brightness:(CGFloat 
*)brightness alpha:(CGFloat *)alpha 
```

一旦知道了色调、饱和度和亮度，就可以围绕特定点定义一个“3D 球体”。色调是颜色的定义，饱和度是颜色的鲜艳程度（或变灰），亮度是亮度的量。

我会假设您想要一个紧密的色调，以及一个宽松的饱和度和亮度值，如果您没有透明度，则无需查看 alpha。

# c++ - 用于跨平台的 C++ 控制台显示

> ID：12216125
> 
> 赞同：4
> 
> 时间：2012-08-31T13:15:12.403
> 
> 标签：c++, cross-platform, console-application

将 C++ 用于跨平台控制台应用程序，有没有办法实现静态和动态变化的显示，而不是在先前输出下打印的输出？即对于一个简单的棋盘游戏，不是每回合都重新打印棋盘，而是更新单个输出。

编辑：AFAIK，unicode 不是完全必要的，我只使用出现在标准 EN-GB 键盘上的字符。

我会研究 NCURSES，尽管我想知道 C++ 标准中是否有一些东西可以帮助我实现这一目标。如果你愿意，可以称我为无知，但我只是想知道。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T13:18:07.330

我认为[NCURSES](http://tldp.org/HOWTO/NCURSES-Programming-HOWTO/)是您正在寻找的。ConsoleUI 的终端包装器，它是跨平台的。它允许您写入虚拟屏幕缓冲区，并控制刷新的时间和方式。它对该缓冲区进行内部簿记，并且只会刷新更改的字符。诅咒是在连接速度很重要的时代设计的，因此终端刷新操作以智能方式完成。

SO 上有一个 ncurses 标签，所以你会在这里找到很多关于细节的信息。

# php - 如果 Imagick::pingImage() 返回 false，则 PHP 代码中断

> ID：12216132
> 
> 赞同：1
> 
> 时间：2012-08-31T13:15:40.780
> 
> 标签：php, imagick

```
<?php
   $im = new Imagick();
   if ($im->pingImage('1.jpg')) {
       $image_info = $im->identifyImage();
       print_r($image_info);
   }
   else {
       echo 'image doesn't exist';
   }
?> 
```

如果我传递给`pingImage`一个真实的图像名称，则`print_r`显示一个带有参数的数组。但是，如果我传递的`pingImage`不是真实的图像名称，则不会发生任何事情，但我希望输出“图像不存在”。同时，如果我在条件**之前**`echo`添加一个输出，这确实有效。**`echo`**

 **通常代码一直工作到`pingImage`return `false`。

我没有在 Imagick 文档中找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:23:21.517

您的代码中出现语法错误，在 else 子句中。它应该是：

```
echo "image doesn't exist"; 
```

或者

```
echo 'image doesn\'t exist'; 
```

（事件 SO 突出显示应该告诉您有问题:)。并使您的代码更清晰，并`file_exists()`首先使用来查看您期望的文件名是否真的指向您可以访问的文件：

```
if( file_exists( $fileName ) ) {
   $im = new Imagick();
   if ($im->pingImage( $fileName )) {
       $image_info = $im->identifyImage();
       print_r($image_info);
   } else {
     printf("Can't get image attributes of %s", htmlspecialchars( $fileName ));

   }
} else {
   printf("Can't open file %s", htmlspecialchars( $fileName ));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T11:30:37.493

我在另一个问题中找到了答案：[https](https://stackoverflow.com/a/4613341/678026) ://stackoverflow.com/a/4613341/678026 我需要做的就是应用**try - catch**构造：

```
$im = new Imagick();
try {
    $im->pingImage('3.jpg');
}
catch(ImagickException $e) {
    echo "image doesn't exist";
} 
```**

# python - 多次导入模块

> ID：12216136
> 
> 赞同：-1
> 
> 时间：2012-08-31T13:15:49.757
> 
> 标签：python

> **可能重复：**
> [运行进程隐藏的 Python](https://stackoverflow.com/questions/12214326/run-process-hidden-python)

我是 phyton 的新手，我需要为“Python22”编写代码：

我有`module1`，`module2`我想`module2`从`module1`

模块 1：

```
import module2 
```

模块2：

```
import os
os.system('taskkill /FI "WINDOWTITLE eq Notepad') 
```

如果我打开`module1`进程被杀死但只有一次，我想做的是`module2`每 2 分钟加载一次（例如）

我试过`time.sleep(2)`了，但我认为我能做到的唯一方法是多次复制相同的行，所以它不正确。

感谢帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:22:22.273

导入只工作一次。如果要重新加载模块，则需要调用

```
reload(module2) 
```

但这不是重点——重新加载模块不是你应该经常做的事情。你*想要*做的是将你的系统调用放在一个函数中，然后调用它。

模块1：

```
import os
import time
def kill_notepad():
    os.system('taskkill /FI "WINDOWTITLE eq Notepad')
while True:
    kill_notepad()
    time.sleep(2) 
```

# java - 休眠合并丢失数据

> ID：12216138
> 
> 赞同：6
> 
> 时间：2012-08-31T13:16:00.927
> 
> 标签：java, hibernate, inheritance, hibernate-cascade

我在使用休眠和合并时遇到了一个奇怪的问题。

有问题的类的结构是这样的：

```
Project --> CaseWorkerA --|> CaseWorker --|> User 
```

所以基本上我有一个项目类，其中包含对 CaseWorkerA 的引用，它是 CaseWorker 的子类，它又是 User 的子类。

在代码中：

```
public class Project {
    [...]
    private CaseWorkerA caseWorkerA;

    @ManyToOne(fetch = FetchType.EAGER)
    @Cascade({ org.hibernate.annotations.CascadeType.SAVE_UPDATE, org.hibernate.annotations.CascadeType.PERSIST,
           org.hibernate.annotations.CascadeType.REFRESH, org.hibernate.annotations.CascadeType.MERGE })
    @JoinColumn(name = "CaseWorker_A")
    public CaseWorkerA getCaseWorkerA() {
        return caseWorkerA;
    }
} 
```

然后我们有用户层次结构：

```
public class User {
    [...]
}

public class CaseWorker extends User {
    private CaseWorkerStatus status;

    @Enumerated(EnumType.STRING)
    public CaseWorkerStatus getStatus() {
        return status;
    }
    [...]
}

public class CaseWorkerA extends CaseWorker {
    [...]
} 
```

然后，在 Dao 类中有一个方法，用于存储项目：

```
public class ProjectDao {
    [...]
    public Project saveUpdateProject(final Project project) {
        if (project.getId() == null) {
            getSession(false).save(project);
        } else {
            project = (Project) getSession(false).merge(project);
        }
        getHibernateTemplate().flush();
        return project;
    }
} 
```

现在，问题如下：

Dao 方法接收一个存在于数据库中的项目。此项目连接到 CaseWorkerA，该 CaseWorkerA 的状态为 CaseWorkerStatus.ACTIVE（在数据库和传入对象中）。但是在合并之后，caseworker 的状态变成了 null。

I really don't get how this is possible, since the value is the same in the database, as in the object to be stored, I would expect it to stay the same after the merge.

(There are no triggers in the database for this field..)

(I am going to try to change the dao-method to use saveOrUpdate instead, but even if this will fix the problem I would still very much like to know what caused it in the first place).

Update:

So I fiddled around with the debugger, and found the following: When I queried the session for the CaseWorker in question, it appeared with it's status-field set (actually, the object returned was exactly the one that was connected to the Project).

Doing a saveOrUpdate, and then a get, resulted in a CaseWorker with the status-field set. So it seems to be a problem with the merge method..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T12:04:04.900

Managed to figure it out, it turned out that there was a second path from Project to User (lastChangedBy kind of thing), where someone had decided to put cascade for some strange reason. So when the person who last changed the project was a CaseWorker, then the lastChangedBy referenced it as a User, which doesn't know anything about the status, so it was stored a null.

Code:

```
public class Project {
    private User changedBy;

    @Cascade({ org.hibernate.annotations.CascadeType.SAVE_UPDATE, org.hibernate.annotations.CascadeType.PERSIST,
               org.hibernate.annotations.CascadeType.REFRESH, org.hibernate.annotations.CascadeType.MERGE })
    @ManyToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "changed_by")
    public User getChangedBy() {
        return this.changedBy;
    }
    [...]
} 
```

The user that was set as changedBy was retrieved from the database like this:

```
public class UserDao {
    public User getUser(final String userName) {
        return (User) getSession(false).createQuery("from User u where u.loginName = :username").setParameter("username", userName).uniqueResult();
    }
} 
```

Appearantly, even if the user one ends up retrieving is-a CaseWorker, the fields pertaining to a CaseWorker does not get retrieved..

Anyways, removed the uneccesary cascade, and it's all good :)

# javascript - 将 global.getelementbyid 连接成单个变量

> ID：12216141
> 
> 赞同：0
> 
> 时间：2012-08-31T13:16:07.280
> 
> 标签：javascript

我可以将 3 条`global.getElementById`语句连接成一个变量吗？这些是一些代码..

```
var cmbOrgNodeType = global.getElementById('cmbOrgNodeType').options[global.getElementById('cmbOrgNodeType').selectedIndex].value;    
var cmbOrgNodeSubType = global.getElementById('cmbOrgNodeSubType').options[global.getElementById('cmbOrgNodeSubType').selectedIndex].value;    
var cmbOrgNodeComponentType = global.getElementById('cmbOrgNodeComponentType').options[global.getElementById('cmbOrgNodeComponentType').selectedIndex].value; 
```

我想将这三个连接成单个变量 var`TypeID=?` 我应该怎么做才能将所有这三个的值存储在单个变量中。？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:20:54.660

要创建所有值的串联字符串：

```
var TypeID = cmbOrgNodeType + cmbOrgNodeSubType + cmbOrgNodeComponentType; 
```

除非您仍然需要单独访问，否则我会这样做：

```
TypeID = { 
  cmbOrgNodeType: null, 
  cmbOrgNodeSubType: null, 
  cmbOrgNodeComponentType: null 
}
for(name in TypeID) {
  TypeID[name] = global.getElementById(name).options[global.getElementById(name).selectedIndex].value;
} 
```

请记住，**干燥**是件好事:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:21:36.077

就像把它们放在一起？

```
var nodes = {
 cmbOrgNodeType: global.getElementById('cmbOrgNodeType').options[global.getElementById('cmbOrgNodeType').selectedIndex].value,
 cmbOrgNodeSubType: global.getElementById('cmbOrgNodeSubType').options[global.getElementById('cmbOrgNodeSubType').selectedIndex].value,
 cmbOrgNodeComponentType: global.getElementById('cmbOrgNodeComponentType').options[global.getElementById('cmbOrgNodeComponentType').selectedIndex].value
}

alert(nodes.cmbOrgNodeType)
alert(nodes.cmbOrgNodeSubType)
alert(nodes.cmbOrgNodeComponentType) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:22:05.770

您可以通过像这样在 javascript 中创建一个对象来做到这一点。

```
var TypeID={}
TypeID.cmbOrgNodeType =cmbOrgNodeType ;
TypeID.cmbOrgNodeSubType =cmbOrgNodeSubType ;
TypeID.cmbOrgNodeComponentType =cmbOrgNodeComponentType ; 
```

如果需要，您可以像这样访问它。

```
 TypeID.cmbOrgNodeType
 TypeID.cmbOrgNodeSubType 
 TypeID.cmbOrgNodeComponentType 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:22:12.540

您可以从字面上连接字符串：

```
var type = cmbOrgNodeType + " " + cmbOrgNodeSubType + " " + cmbOrgNodeComponentType; 
```

但是，这将很难从中提取它们的旧值，因此除非您输出它，否则我建议您将它们存储在一个对象中，以便它可以用作一个变量：

```
var type = {
    "cmbOrgNodeType": global.getElementById('cmbOrgNodeType').options[global.getElementById('cmbOrgNodeType').selectedIndex].value,
    "cmbOrgNodeSubType": global.getElementById('cmbOrgNodeSubType').options[global.getElementById('cmbOrgNodeSubType').selectedIndex].value,
    "cmbOrgNodeComponentType": global.getElementById('cmbOrgNodeComponentType').options[global.getElementById('cmbOrgNodeComponentType').selectedIndex].value
} 
```

（这是[对象文字符号](http://www.dyn-web.com/tutorials/obj_lit.php)）

`type.cmbOrgNodeType`然后您可以使用等访问每个属性。

# asp.net - 如何在运行时更新 Universal Provider 连接字符串？

> ID：12216143
> 
> 赞同：2
> 
> 时间：2012-08-31T13:16:07.930
> 
> 标签：asp.net, asp.net-membership, universal-provider

我们正在使用基于通用提供程序的成员资格提供程序，我想更改它在运行时使用的连接字符串。

以下问题[http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/260d8536-c39f-41ec-b181-4d452cf054b3/](http://social.msdn.microsoft.com/Forums/en-US/adodotnetdataproviders/thread/260d8536-c39f-41ec-b181-4d452cf054b3/)显示了如何在运行时更改 SQL 成员资格提供程序。

但是，如果我使用 System.Web.Providers.DefaultMembershipProvider 执行此操作，则它不起作用，因为它似乎没有要设置的 _sqlConnectionString 字段。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T23:22:07.760

我使用了以下博客文章中的代码

[http://fabriccontroller.net/blog/posts/asp-net-universal-providers-and-the-windows-azure-service-configuration/](http://fabriccontroller.net/blog/posts/asp-net-universal-providers-and-the-windows-azure-service-configuration/)

基本上我继承了 defaultmembershipprovider 覆盖它的 Initialize 方法访问了它的连接字符串名称，然后使用 ConfigurationManager [http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx](http://msdn.microsoft.com/en-us/library/system.configuration.configurationmanager.aspx)来更新 web.config

# android - 如何重用活动代码？

> ID：12216145
> 
> 赞同：1
> 
> 时间：2012-08-31T13:16:11.707
> 
> 标签：android, android-layout, android-activity, code-reuse

我们可以使用`<include />`将布局包含到另一个布局中。

我使用 .xml 将**activity_main.xml**包含到**activity_second.xml**中`<include />`。

**activity_main.xml**有一个`<TextView />`和一个`<Button />`。并且在**MainActivity.java**`<Button />`中有一个处理程序`doThis(View v){..}`

 **如何在**SecondActivity.java中重用按钮处理程序**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:25:17.883

您可以为此使用片段

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:18:51.053

没有按钮处理程序。它是`OnClickListener`。并且要重用它，要么将该源复制到第二个活动类，要么创建`MyActivity`你的类，`MainActivity`并将`SecondAcivity`其扩展并将公共代码放在那里。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:51:48.347

我对你的问题做了类似的事情。不要认为它比使用 Fragments 更好，但简而言之。

你有你的 layout_main.xml。您可以像这样将其他 XML (menu.xml) 导入其中：

```
<include
    android:id="@+id/layoutMenu"
    layout="@layout/menu" /> 
```

像这样创建一个 Menu.java 类（我从自己的类中复制了它，所以它不完整，但出于它的想法）：

```
 public class Menu {

ImageView buttonNieuws;

public void set(Activity activity, String currentPage) {

    // Button NIEUWS
    buttonNieuws = (ImageView) activity.findViewById(R.id.button_nieuws);

    if (!currentPage.equals("nieuws")) {

        buttonNieuws.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View view) {
                Intent intent = new Intent(view.getContext(),
                        Nieuws.class);
                view.getContext().startActivity(intent);
            }
        });

    } else {

        buttonNieuws.setImageDrawable(activity.getResources().getDrawable(
                R.drawable.button_nieuws_on));
    } ... 
```

然后在您的主活动类中，您可以使用这样的代码将它们链接在一起：

```
 Menu menu = new Menu();
 menu.set(this, currentPage); 
```

巨大的缺点是无限的活动会堆叠在一起。这是我的临时解决方案，因为我还没有进入 Fragments。**

# android - Android 屏幕方向因设备而异

> ID：12216148
> 
> 赞同：7
> 
> 时间：2012-08-31T13:16:25.877
> 
> 标签：android, orientation, sensors, screen-orientation, android-sensors

**描述**

我有一个在表面视图上显示相机预览的活动。我不希望它在方向更改时重新启动（因为它不断扫描二维码），所以方向被锁定为纵向。

我遇到的问题是我需要在屏幕底部向用户显示屏幕说明。鉴于屏幕被锁定在一个方向，我不会收到新方向的通知，因为活动没有重绘。因此，无论手机处于纵向、倒置纵向、横向还是横向，指令都呈现在同一个位置。

为了解决这个问题，我连接到传感器管理器以实时读取方向。（见下面的代码）在阅读后，我自己制定方向并根据需要移动我的指令，因为每次更新都发送给我。到目前为止，这对我来说一直有效，直到最近。在华硕 Transformer Prime 和 Xoom 平板电脑上进行测试时。平板电脑将纵向返回为“90”​​的方向，而不是像我的其他 2 部手机那样的“0”。正如您在下面的代码中看到的，我检查平板电脑（大屏幕）并减去额外的 90 度。

**问题**

问题是新的 Nexus 7 平板电脑没有这种额外的偏见。在纵向它返回“0”，但我将其检测为平板电脑，因此负 90 度因此结果为 270，它会将我的指令放置在平板电脑处于横向模式时。我认为这背后的原因是 Xoom/Transformer 设计用于横向，而 Nexus 用于纵向，但除非我知道所有受影响的设备，否则这无济于事。

**问题**

是否有一种可靠的方法来检测所有设备的方向并“实时”返回结果，如下面的代码所示，但考虑到设备的默认方向（即电话 + Nexus 7 是纵向的，但大多数平板电脑都是景观）？

**当前代码**

```
 boolean large = ((getBaseContext().getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == Configuration.SCREENLAYOUT_SIZE_LARGE);
    boolean xlarge = ((getBaseContext().getResources().getConfiguration().screenLayout & Configuration.SCREENLAYOUT_SIZE_MASK) == 4);       
    isTablet = large || xlarge;
    myOrientationEventListener = new OrientationEventListener(getBaseContext(), SensorManager.SENSOR_DELAY_NORMAL)
    {

        @Override
        public void onOrientationChanged(int orientation)
        {
            if (orientation == -1)
            {
                return;
            }

            if (isTablet)
            {
                orientation += -90;
                if (orientation < 0) // keep the result between 0-360
                {
                    orientation += 360;
                }
            }

            // Work out the orientation

            if (orientation >= 60 && orientation <= 140)
            {
                screenOrientation = ScreenOrientation.Landscape_Reversed;
            }
            else if (orientation >= 140 && orientation <= 220)
            {
                screenOrientation = ScreenOrientation.Portrait_Reversed;
            }
            else if (orientation >= 220 && orientation <= 300)
            {
                screenOrientation = ScreenOrientation.Landscape;
            }
            else
            {
                screenOrientation = ScreenOrientation.Portrait;
            }

            //... Do stuff with new orientation here
        }
    }; 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T14:29:44.983

解决它

替换了代码

```
 if (isTablet)
        {
            orientation += -90;
            if (orientation < 0) // keep the result between 0-360
            {
                orientation += 360;
            }
        } 
```

与以下

```
 //Check "normal" screen orientation and adjust accordingly
            int naturalOrientation = ((WindowManager) getSystemService(Context.WINDOW_SERVICE)).getDefaultDisplay().getRotation();
            if (naturalOrientation == Surface.ROTATION_0)
            {
                Logging.d(TAG, "Rotation ROTATION_0");
            }
            else if (naturalOrientation == Surface.ROTATION_90)
            {
                Logging.d(TAG, "Rotation ROTATION_90");
                orientation += 90;
            }
            else if (naturalOrientation == Surface.ROTATION_180)
            {
                Logging.d(TAG, "Rotation ROTATION_180");
                orientation += 180;
            }
            else if (naturalOrientation == Surface.ROTATION_270)
            {
                Logging.d(TAG, "Rotation ROTATION_270");
                orientation += 270;
            }

            if (orientation > 360) // Check if we have gone too far forward with rotation adjustment, keep the result between 0-360
            {
                orientation -= 360;
            } 
```

# javascript - 建立空图表，然后设置它的数据

> ID：12216160
> 
> 赞同：3
> 
> 时间：2012-08-31T13:17:26.767
> 
> 标签：javascript, jquery, ajax, highcharts

我已经开始在 Highcharts 实现柱形图。（[http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/combo/](http://jsfiddle.net/gh/get/jquery/1.7.2/highslide-software/highcharts.com/tree/master/samples/highcharts/demo/combo/)柱状图的一部分）

我将系列设置为：

```
...
series : []
... 
```

我从服务器返回这样的东西：

```
[ {
  "name" : "4346",
  "data" : [ 3010840179 ],
  "type" : "column"
}, {
  "name" : "20232",
  "data" : [ 2135308977 ],
  "type" : "column"
} ] 
```

当我首先复制该值并设置系列时，它会呈现图形。但是我不会从服务器返回什么（有多少元素等），我尝试这样做：

```
chart.series = data; //chart is my chart variable's name, data is the returning JSON String from server. 
```

然而，图表上什么也没有发生，我知道这不是一个有效的用法。我应该怎么做才能一次设置图表的系列变量？

**PS 1：**我尝试在 $.getJSON() 的回调函数中设置数据

**PS 2：** chart.series[n].setData(); 不适合我。我有来自服务器的每个元素的数据和名称。我想一次设置图表的整个系列变量。

**编辑 1： http:** [//jsfiddle.net/HD6CY/](http://jsfiddle.net/HD6CY/)这是我想要实现的。

**编辑 3：**我想创建一个带有系列的图表：[] 并且在我从服务器获取数据之后（需要很长时间）我想将它设置为我的图表的 seres 变量。如果等待获取数据，我不想阻止创建我的图表，我想建立空，然后我将设置它。我将在屏幕上显示加载文本，因此即使在开始时没有任何内容可显示，也会有一些内容而不是空页面。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:12:54.100

检查一下`addSeries`。

建立一个空图表后，执行以下操作。

```
var  variable =   [{
    type: 'column',
    name: 'Jane',
    data: [3, 2, 1, 3, 4]
}, {
    type: 'column',
    name: 'John',
    data: [2, 3, 5, 7, 6]
}, {
    type: 'column',
    name: 'Joe',
    data: [4, 3, 3, 9, 0]
}]; 
for(var i in variable) {
    chart.addSeries(variable[i], false); // don't redraw
}
chart.redraw(); // redraw only after add all series 
```

[**演示**](http://jsfiddle.net/HD6CY/4/)

*参考*

*   [http://api.highcharts.com/highstock#object-Chart](http://api.highcharts.com/highstock#object-Chart)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:26:38.027

您是否尝试过在 ajax 调用成功时创建图表？：

```
 ...
  success: function(data) { 
       var chart;  
       chart = new Highcharts.Chart({
             ...
             series: data
             ....
       });
  ... 
```

# php - 在 Magento 的设计文件中使用替代 php 语法的技术优势是什么

> ID：12216161
> 
> 赞同：0
> 
> 时间：2012-08-31T13:17:27.890
> 
> 标签：php, templates, magento

对于 Magento 设计文件，似乎非常倾向于使用替代 php 语法（下面的示例）。有哪些技术优势？或者，如果它只是一种风格偏好，那么技术上的吸引力是什么？

```
<div class="page-title title-buttons">
    <h1><?php echo $this->__('Shopping Cart') ?></h1>
    <?php if(!$this->hasError()): ?>
    <ul class="checkout-types">
    <?php foreach ($this->getMethods('top_methods') as $method): ?>
        <?php if ($methodHtml = $this->getMethodHtml($method)): ?>
        <li><?php echo $methodHtml; ?></li>
        <?php endif; ?>
    <?php endforeach; ?>
    </ul>
    <?php endif; ?>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:24:17.973

没有“优势”或“劣势”。它归结为偏好和可维护性。

记住 => 你真的应该分离 PHP 和 HTML 语法。将您的 PHP 和 HTML 保存在单独的文件中 - 这是为了可维护性和许多其他原因（如果您搜索，那里有很多信息）。没有办法完全分开这两件事......你总是需要将 PHP 变量插入 HTML 和其他东西，但这应该保持在最低限度。

因此，我更喜欢在 Wordpress、Codeigniter 和其他东西的模板文件中使用这种替代语法，因为我看到它的方式是在模板文件中将 PHP**插入**HTML，所以让这些 PHP 块保持孤立。

即对我来说：

```
<?php

if(something){
    // this is a block of PHP
    // if you want to output html in here 
    // it seems right to do
    echo "<div>Here is some HTML</div>";
}

?> 
```

反之亦然：

```
<div>
    <!-- this is a template file and is written in html -->
    Hello <?=$username?> <!-- inserting PHP into HTML -->
    <?php if(something): ?> <!-- keep it insular - in its own separate blocks, don't mix the two -->
        <button>A button</button>
    <?php endif; ?>
</div> 
```

同样，没有“技术优势”，它只是更清洁更好（IMO）。这将 PHP 和 HTML 混合得太多了：

```
<div><!-- straight html -->

    <?php
        if(something){
            echo "<button>A Button</button>"; <!-- html output via php -->
        }
    ?>

</div> 
```

这简直太可怕了**：**

```
<div>

    <?php
        if(something){
            ?>
                <button>A Button</button>
                <!-- make your mind up! -->
            <?php
        }
    ?>

</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:24:07.170

简而言之，它看起来更干净，您可以看到每个右大括号对应的内容（ish）。您仍然可以使用`<?php if(foo) { ?>`and `<?php } ?>`，但它看起来不那么干净。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:25:21.600

优点实际上只是代码（特别是 HTML）在您的代码编辑器中变得清晰且语法突出显示，这可以帮助您发现拼写错误/错误等。它也更干净，因为您不会到处都有花括号，并且代码都可以很好地缩进。

否则，它将全部作为 PHP 字符串出现，并且您的编辑器不会对其应用任何样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:26:41.053

magento 团队可以这样做的原因有很多。

如果您喜欢自动格式化以使其更具可读性，您的 IDE 将更容易缩进。您还可以使用您想要的任何引号编写纯 html，而不必尝试将其放在“..”中。

我不确定您在以另一种方式执行此操作时收到的打击。我会尽力为你解决这个问题，但如果有的话，它不会太多。

# html - 适用于不同浏览器的可扩展 HTML 表单

> ID：12216166
> 
> 赞同：0
> 
> 时间：2012-08-31T13:17:43.427
> 
> 标签：html, forms, web

为不同的浏览器和屏幕尺寸（手机浏览器、iDevices、桌面等）创建可扩展表单的正确方法是什么？或者唯一的方法是为彼此创建特定页面？

我有一项任务是创建一个简单的图像上传和电子邮件发送表单。该表单用于不同的设备，我希望所有表单元素（按钮等）在每个浏览器中都可以正确缩放和调整大小。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:28:53.163

通过使用 css 媒体查询...基本上在您的 css 文件中，您可以设置一定宽度的浏览器窗口，并在该 css 块中放置正确的样式：

```
@media (max-width: 699px) and (min-width: 520px) {
  body {
    background: red;
  }
} 
```

每当浏览器窗口的宽度在 520px 和 699px 之间时，主体背景将是红色的

尝试研究“响应式网页设计”和“css 媒体查询”。 [http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/](http://www.smashingmagazine.com/responsive-web-design-guidelines-tutorials/)

# java - 调用 JasperFillManager.fillReport 方法时出现“错误生成报告。未知打印订单 0”错误

> ID：12216176
> 
> 赞同：3
> 
> 时间：2012-08-31T13:18:07.903
> 
> 标签：java, jakarta-ee, jasper-reports, tomcat5.5, subreport

我正在使用*Java 6*、*Dynamic Web Module 2.4*、*Tomcat 5.5*和*MySQL 5.5开发**Java EE*应用程序。

 ***我们使用的是用*iReport设计的**JR*报告。所有这些都正常工作，但只有一个。奇怪的是，这个报告之前运行正常，而我们并没有更改代码中的任何内容……（配置问题？）。

 *当我们执行报告时，错误是这样的：

```
org.apache.jasper.JasperException: getOutputStream() has already been called for this response
    org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:500)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:407)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:308)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:259)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:729) 
```

控制台这样说：

```
error generando informe Unkown print order 0.
net.sf.jasperreports.engine.JRRuntimeException: Unkown print order 0.
    at net.sf.jasperreports.engine.fill.JRFillSubreport.initSubreportFiller(JRFillSubreport.java:390)
    at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateSubreport(JRFillSubreport.java:359)
    at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluate(JRFillSubreport.java:260)
    at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:275)
    at net.sf.jasperreports.engine.fill.JRFillBand.evaluate(JRFillBand.java:426)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillColumnBand(JRVerticalFiller.java:1380)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillDetail(JRVerticalFiller.java:692)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReportStart(JRVerticalFiller.java:255)
    at net.sf.jasperreports.engine.fill.JRVerticalFiller.fillReport(JRVerticalFiller.java:113)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:888)
    at net.sf.jasperreports.engine.fill.JRBaseFiller.fill(JRBaseFiller.java:810)
    at net.sf.jasperreports.engine.fill.JRFiller.fillReport(JRFiller.java:89)
    at net.sf.jasperreports.engine.JasperFillManager.fillReport(JasperFillManager.java:601)
    at com.tsystems.web.ModuloInformes.InformesNuevos.InformeGestion.Actions.InformeGestionAction.generarReporte(InformeGestionAction.java:1655)
    at com.tsystems.web.ModuloInformes.InformesNuevos.InformeGestion.Actions.InformeGestionAction.generarInformeGestion(InformeGestionAction.java:222)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.apache.struts.actions.DispatchAction.dispatchMethod(DispatchAction.java:270)
    at org.apache.struts.actions.DispatchAction.execute(DispatchAction.java:187)
    at org.apache.struts.action.RequestProcessor.processActionPerform(RequestProcessor.java:431)
    at org.apache.struts.action.RequestProcessor.process(RequestProcessor.java:236)
    at org.apache.struts.action.ActionServlet.process(ActionServlet.java:1196)
    at org.apache.struts.action.ActionServlet.doPost(ActionServlet.java:432)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:647)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:729)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:269)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at com.tsystems.web.common.FiltroSeguridad.doFilter(FiltroSeguridad.java:79)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:215)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:188)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:213)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:172)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:117)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:108)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:174)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:879)
    at org.apache.coyote.http11.Http11BaseProtocol$Http11ConnectionHandler.processConnection(Http11BaseProtocol.java:665)
    at org.apache.tomcat.util.net.PoolTcpEndpoint.processSocket(PoolTcpEndpoint.java:528)
    at org.apache.tomcat.util.net.LeaderFollowerWorkerThread.runIt(LeaderFollowerWorkerThread.java:81)
    at org.apache.tomcat.util.threads.ThreadPool$ControlRunnable.run(ThreadPool.java:689)
    at java.lang.Thread.run(Unknown Source) 
```

执行报告的操作（Java 方法）是这样的：

```
 private void generarReporte(List info, InformeGestionFormBean gestionBean, HttpServletRequest request, HttpServletResponse response, String descripDispo) {
        try {
. . . 
            InputStream is = null;
            String header = "";
            is = informeGestionAction.class.getClassLoader().getResourceAsStream(ruta + "InformeCuadroGestion.jrxml");          

            header = "attachment; filename=\"InformeCuadroGestion";

            JRExporter exporter = null;
            JasperReport reporte = JasperCompileManager.compileReport(is);          
            JasperPrint jasperPrint;
            JRBeanCollectionDataSource datos = new JRBeanCollectionDataSource(info);

            jasperPrint = JasperFillManager.fillReport(reporte, parametros, datos); 
```

`JasperFillManager.fillReport`调用时出现错误。

报告的 XML 代码是：

```
<field name="bloqueInforme1" class="java.util.List"/>
<subreport  isUsingCache="true">
<reportElement  x="0"   y="6"   width="782"height="10" key="subreport-1"positionType="Float"/>
<dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRBeanCollectionDataSource($F{bloqueInforme1})]]></dataSourceExpression>    
<subreportExpression  class="java.lang.String"><![CDATA[$P{SUBREPORT_DIR} + "PDFInformeCuadroGestionSub1.jasper"]]></subreportExpression>
</subreport>
</jasperReport> 
```

我们在 Java 代码中遵循***了 bloqueinforme1的值。******bloqueinforme1***是一个*列表*，其中包含报告信息的*列表*，我们已经看到这些值是正确的。该错误似乎出现在主报告使用的子报告中。

我一直专注于属于***bloqueinforme1的一个字段（例如******Item***）。我们可以正确打印和获取 Item 值，但是当我们仅使用***Item***执行报告时，报告说它找不到 Item。

 **我们不知道错误原因；也许是*列表*列表（它找不到子列表）*；*或配置问题（我们不得不将*Dynamic Module*从*3.0*更改为*2.4*）。

拜托，我很绝望！你能帮助我吗？

* * *

我很抱歉！我第一篇文章的错误不是最初的错误。最初的错误是这样的：

```
Could not load object from location : ..\..\iReport\PDFInformeCuadroGestionSub1.jasper
    net.sf.jasperreports.engine.JRException: Could not load object from location : ..\..\iReport\PDFInformeCuadroGestionSub1.jasper
        at net.sf.jasperreports.engine.util.JRLoader.loadObjectFromLocation(JRLoader.java:271)
        at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluateSubreport(JRFillSubreport.java:311)
        at net.sf.jasperreports.engine.fill.JRFillSubreport.evaluate(JRFillSubreport.java:260)
        at net.sf.jasperreports.engine.fill.JRFillElementContainer.evaluate(JRFillElementContainer.java:275) 
```

我们有很多报告工作正常。唯一失败的是唯一一个有子报表的。当我用 iReport 编译报告（包括子报告）时，它编译正常，所以我认为不是编译问题。我们的应用程序在运行时生成 .japer 文件。这个报告以前工作得很好，但是现在……我们用作参数来指定生成报告和子报告的位置的路径，我的意思是 .jasper 文件，是一个相对路径：../../iReport。我尝试了绝对路径，但是当我尝试这条路径时：

```
C:/Documents and Settings/Administrador/workspace/.metadata/.plugins/org.eclipse.wst.server.core/tmp0/wtpwebapps/phnemos_ph/iReport/ 
```

我收到此错误：

```
net.sf.jasperreports.engine.JRException: java.net.MalformedURLException 
```

我从几周前就开始解决这个问题了。我需要帮助，你能告诉我的一切都会很棒。非常感谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-12T09:14:03.173

再次您好，感谢您的所有支持。

我想报告一些重要的事情。当我从以下位置更改 jrxml 文件中的标头时：

```
<!DOCTYPE jasperReport PUBLIC "//JasperReports//DTD Report Design//EN" "http://jasperreports.sourceforge.net/dtds/jasperreport.dtd"> 
```

至

```
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" 
```

我又得到`Unknown print order 0`

非常感谢你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T11:04:34.087

我觉得问题可能是因为 $P{SUBREPORT_DIR} 变量。为什么不将 sub-report.jasper 文件作为 <"DATA_SOURCE",jasperreport file> 作为填充管理器.fillreport 的第二个参数中的哈希图传递。在主报告中创建一个参数字段作为 DATA_SOURCE。您的数据源表达式似乎很好。******

# tomcat6 - tomcat 6 maxThreads 设置不起作用

> ID：12216177
> 
> 赞同：1
> 
> 时间：2012-08-31T13:18:12.477
> 
> 标签：tomcat6, threadpool

我们在 tomcat 上运行了一个相当庞大的应用程序。我正在尝试对最简单的 servlet 进行一些简单的负载测试。我有一个简单的脚本，可以向该 servlet 发送 200 个后台 curl 命令。其中许多命令获得“对等方重置连接”。当我使用 VisualVM 监控 tomcat 时，我看到它以大约 70 个线程开始（有些是我们自己的线程池，例如 Quartz），当我运行此脚本时，线程数将上升到 170 个左右，但不会更多。似乎无论我如何为 8080 连接器设置 maxThreads，我都会得到相同的结果。从线程的角度来看，在出现内存不足错误之前，我的机器每个 JVM 可以处理大约 2,030 个 Java 线程，所以这不是问题。

我看到有大约 5 个关于类似主题的其他主题，但没有任何帮助。

谢谢你。

# ios - 通过 xcode 将二进制文件上传到应用商店时，出现 info.plist 错误

> ID：12216180
> 
> 赞同：0
> 
> 时间：2012-08-31T13:18:25.643
> 
> 标签：ios, info.plist

通过 xcode 将二进制文件上传到应用商店时，出现 info.plist 错误。 [http://screencast.com/t/nhZPC9ybj](http://screencast.com/t/nhZPC9ybj)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:29:28.460

我们很多人现在都得到了这个。这似乎是苹果的问题。我尝试更改 Info.plist 设置、重新启动 Finder、重新启动等，但无法解决。

请参阅：[无法处理应用程序 plist 验证](https://stackoverflow.com/questions/8390708/unable-to-process-application-plist-validation)

（更新：大约 24 小时后，Apple 解决了这个问题。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T23:10:13.503

这绝对是苹果的问题。他们已经意识到了这个问题，并希望能够找到解决方案。在某些情况下，您可能还会看到“IO 错误”。请耐心等待，每隔几个小时再次尝试提交，直到问题得到解决。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T07:23:02.037

我在第二天尝试了同样的方法。它工作正常，没有任何问题。只需等待一段时间或在第二天尝试它肯定会工作。

# android - 在 toast 通知中添加声音警报？

> ID：12216182
> 
> 赞同：-1
> 
> 时间：2012-08-31T13:18:36.390
> 
> 标签：android, notifications

我正在使用下面的代码在 2 分钟后收到一条敬酒消息，同时我想用它添加一个声音警报。

```
Calendar cal = Calendar.getInstance();
     cal.get(Calendar.DATE);
     cal.add(Calendar.MINUTE,2);
     Intent intent = new Intent(this, MyBroadcastReceiver.class);
            PendingIntent pendingIntent = PendingIntent.getBroadcast(this.getApplicationContext(), 234324243, intent, 0);
            AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

            alarmManager.set(AlarmManager.RTC_WAKEUP,  cal.getTimeInMillis()
                , pendingIntent);

            Toast.makeText(this, "Time to get",
                    Toast.LENGTH_LONG).show(); 
```

我尝试使用以下代码：

```
int icon = R.drawable.ic_launcher;        // icon from resources
            CharSequence tickerText = "Hello";              // ticker-text
            long when = cal.getTimeInMillis();        // notification time
            Context context = getApplicationContext();      // application Context
            CharSequence contentTitle = "My notification";  // message title
            CharSequence contentText = "Hello World!";      // message text

            Intent notificationIntent = new Intent(this, MyBroadcastReceiver.class);
            PendingIntent contentIntent = PendingIntent.getActivity(this.getApplicationContext(), 12345, notificationIntent, 0);

            // the next two lines initialize the Notification, using the configurations above
            Notification notification = new Notification(icon, tickerText, when);
            notification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
            notification.defaults |= Notification.DEFAULT_SOUND; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:31:39.013

你可以使用`SoundPool`类，像这样：

```
 private SoundPool soundPool;
    soundPool = new SoundPool(4, AudioManager.STREAM_MUSIC, 100);
    soundPoolMap = new HashMap<Integer, Integer>();
    //Put your sounds here, from raw resources
    soundPoolMap.put(SOUND_SCHIVATO, soundPool.load(ctx, R.raw.schivato, 1));
    soundPoolMap.put(SOUND_GONG, soundPool.load(ctx, R.raw.gong, 1));
    soundPoolMap.put(SOUND_AHH, soundPool.load(ctx, R.raw.ahhh, 1));
    ...

    private void playSound(int sound) {
        /* Volume calculations */
        AudioManager mgr = (AudioManager) ctx
                .getSystemService(Context.AUDIO_SERVICE);
        float streamVolumeCurrent = mgr
                .getStreamVolume(AudioManager.STREAM_MUSIC);
        float streamVolumeMax = mgr
                .getStreamMaxVolume(AudioManager.STREAM_MUSIC);
        float volume = streamVolumeCurrent / streamVolumeMax;

        /* Play the sound with the correct volume */
        soundPool.play(soundPoolMap.get(sound), volume, volume, 1, 0, 1f);
} 
```

在我的项目中，我创建了一个类来管理所有包含我发布的片段的音频通知。这个类非常简单，它只加载我的自定义声音`HashMap`并公开公共方法来播放它们。

`Context`需要加载 SounPool 的资源。[这里](http://www.vogella.com/articles/AndroidMedia/article.html)有一个简单的教程

# c# - Dynamics 2011 SDK IServiceProvider

> ID：12216187
> 
> 赞同：1
> 
> 时间：2012-08-31T13:19:01.867
> 
> 标签：c#, sdk, dynamics-crm, dynamics-crm-2011

我正在编写一个独立的服务（不是插件，在最严格的意义上），以使用 SDK 定期更新 Dynamics CRM 2011。

我的代码包括以下内容：

```
// Get entity metadata so we can process attributes correctly
IPluginExecutionContext context = (IPluginExecutionContext)ServiceProvider.GetService(typeof(IPluginExecutionContext));
IOrganizationServiceFactory serviceFactory = (IOrganizationServiceFactory)ServiceProvider.GetService(typeof(IOrganizationServiceFactory));
IOrganizationService service = serviceFactory.CreateOrganizationService(context.UserId);
... (etc) 
```

这需要一个 ServiceProvider 类的实例 [它实现了 IServiceProvider]，但我不知道如何获得它。

那么，我该如何获得呢？

谢谢

[编辑]

我目前正在考虑使用 ServerConnection 作为替代方案。

[http://msdn.microsoft.com/en-us/library/gg309393.aspx](http://msdn.microsoft.com/en-us/library/gg309393.aspx)

[/编辑]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T15:55:52.820

我整理好了

来自[http://markuserlandsson.wordpress.com/2011/01/26/my-first-crm-2011-project-part-1/](http://markuserlandsson.wordpress.com/2011/01/26/my-first-crm-2011-project-part-1/)

（为安全起见，此处转载）

```
ClientCredentials credentials = new ClientCredentials();
credentials.Windows.ClientCredential = CredentialCache.DefaultNetworkCredentials;

IServiceConfiguration<IOrganizationService> config = 
        ServiceConfigurationFactory.CreateConfiguration<IOrganizationService>(
        new Uri(Properties.Settings.Default.CrmUrl));
config.CurrentServiceEndpoint.Behaviors.Add(new ProxyTypesBehavior());

OrganizationServiceProxy proxy = new OrganizationServiceProxy(config, credentials);
OrganizationServiceContext context = new OrganizationServiceContext(proxy); 
```

然后使用它`proxy`或`context`做你需要的。

# python - 使用numpy中的一维数组从二维数组中选择多个元素

> ID：12216191
> 
> 赞同：3
> 
> 时间：2012-08-31T13:19:10.493
> 
> 标签：python, arrays, numpy

我在 numpy 中有两个数组。第一个是二维数组，可以认为是向量列表。第二个是一维数组，可以将其视为二维数组的索引列表。

我想使用一维数组的索引选择二维数组的元素。现在我一直在做

```
 z=rnd.rand(2,10) # a list of 2d vectors of length 10
        z_idx=rnd.randint(2,size=z.shape[1]) #indices selecting a dimension of the 2d vector

        result=np.array([z[z_idx[i],i] for i in xrange(len(z_idx))]) 
```

但这非常慢。

在 numpy 中有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:28:41.977

可能是最简单的方法：

```
result = z[z_idx].diagonal() 
```

也许更有效的是使用`arange`：

```
result = z[z_idx, np.arange(z_idx.size)] 
```

更合适但等效的是`np.indices`：

```
result = z[z_idx, np.indices(z_idx.shape)[0]] 
```

# webgl - Three.js 中的 Collada 加载程序限制

> ID：12216193
> 
> 赞同：2
> 
> 时间：2012-08-31T13:19:17.437
> 
> 标签：webgl, three.js, collada

在 Three.js 中，Collada Loader 无法加载超过大约 65000 个顶点的模型，我知道这是因为 WebGL 的限制，但也许可以将模型划分为不同的缓冲区？那么有没有办法加载大型 Collada 模型？

谢谢。

# ios - 在 IOS 中记录样本

> ID：12216194
> 
> 赞同：-1
> 
> 时间：2012-08-31T13:19:18.447
> 
> 标签：ios, audio, record

我想制作一个像[http://itunes.apple.com/us/app/conga-drums-free/id473562183?mt=8](http://itunes.apple.com/us/app/conga-drums-free/id473562183?mt=8)这样的应用程序。

用户可以制作自己的节拍。我想在演奏时或以后记录他们的节拍并保存。然后将其发送到服务器。关于从麦克风录制的例子太多了，但我没有找到任何关于在 IOS 中录制输出声音的内容。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T06:12:27.450

We can do it in 2 ways either using AVfoundation or CoreAudio.

I haven't explored coreAudio but in AVfoundation its pretty simple. using this blog... [http://www.techotopia.com/index.php/Recording_Audio_on_an_iPhone_with_AVAudioRecorder_%28iOS_4%29](http://www.techotopia.com/index.php/Recording_Audio_on_an_iPhone_with_AVAudioRecorder_%28iOS_4%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:07:16.797

你将不得不学习处理 CoreAudio。虽然有一个很好的框架设计用于消除痛苦，称为[novocaine](https://github.com/alexbw/novocaine)。使它像（来自框架文档）一样简单

```
Novocaine *audioManager = [Novocaine audioManager];
[audioManager setInputBlock:^(float *newAudio, UInt32 numSamples, UInt32 numChannels) {
    // Now you're getting audio from the microphone every 20 milliseconds or so. How's that for easy?
    // Audio comes in interleaved, so,
    // if numChannels = 2, newAudio[0] is channel 1, newAudio[1] is channel 2, newAudio[2] is channel 1, etc.
}]; 
```

如果您有兴趣进行更精细的控制，那么查看框架的源代码将是一个不错的起点。获取数据后，您可以使用[AFNetworking](https://github.com/AFNetworking/AFNetworking)等框架将数据上传到服务器。

# sencha-touch - 如何在 sencha touch 的工具栏中添加简单的文本

> ID：12216196
> 
> 赞同：2
> 
> 时间：2012-08-31T13:19:24.877
> 
> 标签：sencha-touch, extjs, sencha-touch-2

嗨，我需要在工具栏中添加一个简单的文本，文本应该在工具栏中声明的两个按钮之间，知道怎么做吗？请让我知道，谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:48:20.603

您可以使用以下两个选项：

如果您只想在工具栏的中心显示文本，请使用 title 属性：

```
{
    title: 'Some text here',
    items [/* Your buttons */]
} 
```

如果你想要多个文本元素，一个快速而肮脏的方法是使用带有 html 属性集的面板，它将用 html 替换创建的面板的内容：

```
{
    items [{
        // Button 1
    },{
        xtype: 'panel',
        html: 'The text you want here'
    },{
        // Button 2
    }]
} 
```

如果您这样做，面板可能无法很好地设置样式，因此您可能必须对面板的`style`或`baseCls`属性应用一些样式才能按照您的需要重新设置样式。

请注意，在 ExtJS 中，您可以只在项目列表中包含文本，它会执行您想要的操作，但文档并没有说明这是否适用于 Sencha Touch，我现在无法测试。如果这确实有效，它看起来像这样：

```
{
    title: 'Some text here',
    items [items [{
        // Button 1
    },
    'Your text here',
    {
        // Button 2
    }]
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:52:59.947

在我看来，最简单的解决方案是使用[TitleBar](http://docs.sencha.com/touch/2-0/#!/api/Ext.TitleBar)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-19T10:59:00.840

这是在工具栏上的两个按钮之间添加简单文本的代码。

```
{
   xtype: 'toolbar',
   docked: 'top',
   **title: 'text you want to add here'**,
   items:[{
            xtype: 'button',
            ui: 'action',
            text: '1st button'
          },
          {
            xtype: 'button',
            ui: 'action',
            right: '0%',
            text: '2nd button',
          }
        ], 
```

}

希望这会帮助你。谢谢。

# jquery-mobile - jQueryMobile 在标题中使用不同的色板主题化导航栏

> ID：12216202
> 
> 赞同：0
> 
> 时间：2012-08-31T13:19:39.823
> 
> 标签：jquery-mobile

使用 jquerymobile 主题，我希望标题中的导航栏使用与标题不同的样本。[根据http://jquerymobile.com/demos/1.1.1/docs/toolbars/docs-navbar.html](http://jquerymobile.com/demos/1.1.1/docs/toolbars/docs-navbar.html)底部的示例，似乎我需要做的就是将主题应用于服务的各个链接作为导航栏项目。如果您查看示例的源代码，它们看起来与我的代码中的类似。

目前，样本 A 应用于标题（徽标图像所在的位置），但导航栏只是标准灰色。

```
 <section data-role="page" data-theme="a">
      <header data-role="header">
        <img src="images/mcn-logo-rev.png" id="logo" />
        <img src="images/question-mark-in-circle.png" id="help" class="ui-btn-right" />

        <div data-role="navbar">
          <ul>
            <li><a href="#" data-icon="mcn-messages" data-theme="b">Messages</a></li>
            <li><a href="#" data-icon="mcn-groups" data-theme="b">Groups</a></li>
            <li><a href="#" data-icon="mcn-settings" data-theme="b">Settings</a></li>
          </ul>
        </div>

        <div data-role="navbar">
          <ul>
            <li><a href="#" data-theme="b">All</a></li>
            <li><a href="#" data-theme="b">Unread</a></li>
            <li><a href="#" data-theme="b">Search</a></li>
          </ul>
        </div>
... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:27:28.163

主题属性应该应用于列表项，而不是其中的链接。更改此代码：

```
 <div data-role="navbar">
              <ul>
                <li><a href="#" data-icon="mcn-messages" data-theme="b">Messages</a></li>
                <li><a href="#" data-icon="mcn-groups" data-theme="b">Groups</a></li>
                <li><a href="#" data-icon="mcn-settings" data-theme="b">Settings</a></li>
              </ul>
            </div>

<div data-role="navbar">
          <ul>
            <li><a href="#" data-theme="b">All</a></li>
            <li><a href="#" data-theme="b">Unread</a></li>
            <li><a href="#" data-theme="b">Search</a></li>
          </ul>
        </div> 
```

对此：

```
 <div data-role="navbar">
              <ul>
                <li data-icon="mcn-messages" data-theme="b"><a href="#">Messages</a></li>
                <li data-icon="mcn-groups" data-theme="b"><a href="#">Groups</a></li>
                <li data-icon="mcn-settings" data-theme="b"><a href="#">Settings</a></li>
              </ul>
            </div>

<div data-role="navbar">
          <ul>
            <li data-theme="b"><a href="#">All</a></li>
            <li data-theme="b"><a href="#">Unread</a></li>
            <li data-theme="b"><a href="#">Search</a></li>
          </ul>
        </div> 
```

不建议您对链接而不是列表项进行主题标记，并且可能在将来的版本中不起作用。这是来源：http: [//jquerymobile.com/demos/1.1.1/docs/lists/lists-themes.html](http://jquerymobile.com/demos/1.1.1/docs/lists/lists-themes.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:28:37.810

其实原来的标记是好的。我误解了jQueryMobile。我认为导航栏会选择工具栏颜色，而不是选择您应用的样本的按钮颜色。修复主题应用了正确的颜色而不更改标记。

# security - Chrome 现在阻止从 https 到 http 的所有 jsonp 请求？

> ID：12216208
> 
> 赞同：29
> 
> 时间：2012-08-31T13:20:13.923
> 
> 标签：security, google-chrome, https, jsonp, securitydomain

最近，Chrome 已停止显示通过 jsonp 加载的数据并出现错误

[阻止] [https://user.example.com/category/12345的页面运行来自](https://user.example.com/category/12345)[http://livedata.example.com/Data.svc/jsonp/GetData?category=12345&callback=_jsp&_1346417951424=](http://livedata.example.com/Data.svc/jsonp/GetData?category=12345&callback=_jsp&_1346417951424=)的不安全内容。

它在所有其他浏览器上仍然可以正常工作，并且已在运行 Chrome 的几台不同计算机上得到确认。

我之前唯一提到过这个问题是当页面是从谷歌自己的域之一提供时（我猜是谷歌应用程序的安全功能？），这是在最近的版本中现在在所有域上启用的东西铬？

理想情况下，我们不希望在我们的 livedata 子域上启用 https，因为它会导致额外的服务器负载，数据都是公开可用的，因此没有迫切需要对其进行加密。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-01T09:11:08.357

它绝对应该阻止它——它不安全并且违背了 HTTPS 的承诺。

JSONP 资源获取是通过创建`<script>`指向目标的资源来完成的。这意味着目标服务器可以在包含页面上运行它喜欢的任何 JavaScript，因此任何中间人都可以将任意脚本注入到所谓的受 HTTPS 保护的页面中（例如，添加键盘记录器或完全替换页面内容）。`<script>`来自 HTTP的 HTTPS 页面并不比普通的 HTTP 页面更安全。

如果您希望 HTTPS 页面能够访问它，您将需要提供数据馈送的 HTTPS 版本。否则浏览器至少应该产生警告。Chrome 现在默认阻止并不会改变问题的性质，它只是为您提供正确修复它所需的额外推动力。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-09T20:31:42.610

`<script src="//domain.com/script.js"></script>`如果远程服务器允许 HTTPS，则解决问题... // 如果站点通过 https 访问，将自动将协议设置为 https。

# ruby-on-rails - Tire + Elasticsearch：如何搜索值范围？

> ID：12216219
> 
> 赞同：1
> 
> 时间：2012-08-31T13:20:52.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, elasticsearch, tire

到目前为止喜欢轮胎和弹性搜索，但无法弄清楚如何在范围之间搜索值，例如：

*   年龄从年龄到
*   18 至 20

并返回年龄在这两个范围之间的所有个人资料？我有一个整数列 Profile.age

到目前为止不完整的功能

```
def self.search(params)

    #, default_operator: "AND
    tire.search(load: true, page: params[:page], per_page: 20) do
      query do
        should { string params[:query] } if params[:query].present?
        should { integer age_to[:age_to] } if params[:age_to].present?
      end
      to_curl
    end

  end 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T13:27:14.443

```
query do
    should { string params[:query] } if params[:query].present?
    should { range :age, { gte: params[:age_from], lte: params[:age_to] } } if params[:age_to].present? && params[:age_from].present?
end 
```

# wpf - Google Directions API + URL 链接

> ID：12216222
> 
> 赞同：0
> 
> 时间：2012-08-31T13:20:59.450
> 
> 标签：wpf, api, google-maps

我在 WPF 中使用 Google 方向 API。我找到了几个项目来将方向合并到 WPF 应用程序中，使用默认 Web 浏览器或 WPF Web 浏览器控件。

我似乎无法获得以下任何信息。

指示完成后是否可以通过 API 获取 URL 链接。

如果你打开谷歌地图，输入开始和结束地址并点击获取路线，然后点击右上角的链接图标，它会为你提供电子邮件或其他任何内容的 URL。

我可以以编程方式获取该 URL 地址吗？

任何帮助表示赞赏。

非常感谢，

尼尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:28:42.867

[mapki](http://mapki.com/)上有一个[Google Maps 的 URL 参数](http://mapki.com/wiki/Google_Map_Parameters)列表，您可以使用它来为 Google Maps 创建一个 URL。

*   [Mike Williams 的 v2 Google Maps API 教程中的示例（带说明）](http://econym.org.uk/gmap/basic4.htm)

# python - 在 ctype 结构中定义的 ctypes 字符串不起作用

> ID：12216223
> 
> 赞同：0
> 
> 时间：2012-08-31T13:20:59.950
> 
> 标签：python, string, ctypes

我在创建一个包含字符串的 ctypes 结构并用有意义的值初始化它时遇到了一些问题。

这是我的结构：

```
class MyStruct( Structure ):
    _fields_ = [ ("someString", c_char_p) ] 
```

这是我试图初始化它

```
obj = MyStruct( "something" ) 
```

当然，这两种尝试都失败了。这是错误消息：

> obj_1= MyStruct("something") TypeError: string or integer address expected instead of str instance

如果我使用 *c_char_p* 运算符 obj = MyStruct( c_char_p( "something" ) ) 也会发生同样的事情

我必须提到，这段代码是在 Blender 2.63a 环境中执行的。

谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:25:34.043

您需要使用该[`__init__`方法来实例化](https://stackoverflow.com/questions/625083/python-init-and-self-what-do-they-do)：

```
class MyStruct( Structure ):
    def __init__(self,some_string):
         self._fields_ = [ (some_string, c_char_p) ] 
```

然后制作一个新的结构，应该工作：

```
obj = MyStruct( "something" ) 
```

# c# - 如何声明带有连字符的变量

> ID：12216225
> 
> 赞同：4
> 
> 时间：2012-08-31T13:21:18.200
> 
> 标签：c#, .net

最近我在类中遇到了一个 json 对象名称声明，并且能够通过以下方式解决它：

```
 [JsonProperty("flv-270p")]
        public string flv270p { get; set; } 
```

那么如果我想在没有 JsonProperty 的情况下声明 flv-270p 我该怎么做呢？

喜欢 ：

```
public string flv270-p { get; set; } 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T13:30:41.437

你不能：

有效名称定义为：

```
identifier:
    available-identifier
    @   identifier-or-keyword
available-identifier:
    An identifier-or-keyword that is not a keyword
identifier-or-keyword:
    identifier-start-character   identifier-part-charactersopt
identifier-start-character:
    letter-character
    _ (the underscore character U+005F) 
identifier-part-characters:
    identifier-part-character
    identifier-part-characters   identifier-part-character
identifier-part-character:
    letter-character
    decimal-digit-character
    connecting-character
    combining-character
    formatting-character
letter-character:
    A Unicode character of classes Lu, Ll, Lt, Lm, Lo, or Nl
    A unicode-escape-sequence representing a character of classes Lu, Ll, Lt, Lm, Lo, or Nl
combining-character:
    A Unicode character of classes Mn or Mc
    A unicode-escape-sequence representing a character of classes Mn or Mc
decimal-digit-character:
    A Unicode character of the class Nd
    A unicode-escape-sequence representing a character of the class Nd
connecting-character:
    A Unicode character of the class Pc
    A unicode-escape-sequence representing a character of the class Pc
formatting-character:
    A Unicode character of the class Cf
    A unicode-escape-sequence representing a character of the class Cf 
```

连字符减号属于 Pd 类，因此在上面不允许使用。

这确实是为什么在名称中允许 Pd 类的东西是一个坏主意的原因之一：

```
int x-y = 3;
int x = 10;
int y = 2;
int z = x-y; //3 or 8? Impossible to tell if the first line were allowed. 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T13:29:01.197

简短的回答：你不能。

.NET 支持任意成员名称，包括在 CIL 语言中非法的成员名称。但是，如果一种语言不支持它，那么您就不能使用它，这包括连字符和破折号。出于这个原因，C# 中的自动属性在其隐藏的支持字段名称中`<`使用。`>`

C# 确实允许您在关键字前面加上`@`符号，以允许您将其用作变量或成员名称（例如`public int @class`，或者`public void @struct(int @interface)`，但这是为了消费者的利益。

但是，在任何情况下，c# 都不允许您在名称中使用连字符，因为该字符用于一元否定和二元减法运算符。名称`flv270-p`被解释为“`flv270`减号`p`”。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-07-06T22:11:26.100

实际上你可以使用这样的代码

```
public string flv270_p { get; set; } 
```

并返回一个用“_”替换“-”的重新格式化的类。

例如，如果你有这个，

```
var jsonstring = ApiRequest.DoRequest(ApiRequest.GetBaseUriFor(typeof(SMS), "/sms/json"), new Dictionary<string, string>()
        {
            {"from", request.from},
            {"to", request.to},
            {"text", request.text}
        });

        return JsonConvert.DeserializeObject<SMSResponse>(jsonstring); 
```

做这个，

```
var jsonstring = ApiRequest.DoRequest(ApiRequest.GetBaseUriFor(typeof(SMS), "/sms/json"), new Dictionary<string, string>()
        {
            {"from", request.from},
            {"to", request.to},
            {"text", request.text}
        }).Replace("-","_");

        return JsonConvert.DeserializeObject<SMSResponse>(jsonstring); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T15:29:00.313

其他答案很好地解释了为什么你**不能** do exacwhat you are asking for. That being said, I have encountered situations where I wanted my object metadata to have hyphens for the purpose of formulating descriptive URLs that are optimized for SEO. The Attribute approach you used in the question works, but you can also use conventions to indicate this kind of customization without attributes. One suggestion is to preprocess member names to use either PascalCase and insert a hyphen delimiter in between words. This might cause too much metadata alteration. Another option is to use an underscore '_', which is a legal character in C# names, and to replace underscores with hyphens in your preprocessing. Your question doesnt really say enough about your use case to indicate how this would be implemented/injected in your metadata context, but hopefully these ideas are helpful when you're designing your api.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T13:30:09.360

`flv-270p`在 C# 中不是有效的变量名。每当您在代码中键入类似的内容时，编译器都会认为您正在尝试执行“flv270 minus p”:)

# php - HTML-Email 烦人的换行

> ID：12216228
> 
> 赞同：10
> 
> 时间：2012-08-31T13:21:41.677
> 
> 标签：php, html, email

我正在深入研究 html-email 的东西，最后，我仍然有一个令人讨厌的换行符的未解决问题：/

GMail 和/或 Outlook 经常在标签期间准确地断行 - 导致外观和感觉完全被破坏。所以可能会发生整个内容都在 < h2 > 中，因为结束标签被换行符打破..

```
m</strong><br/>Passwort: <
strong>20o3a7 
```

这是我的 PHPMailer 代码生成的损坏电子邮件的示例。

现在我着迷于一家公司的电子邮件，风格完美的时事通讯。在那里我看到了这样的代码：

```
<table width=3D"100%" cellspacin=
g=3D"0" border=3D"0" cellpadding=3D"0"> 
```

我可以在这封奇怪的电子邮件的几乎任何一行上看到这一点 -> 在任何行上总是以“=”结尾，尽管它位于标签或参数字的中间……而且它工作得很好！怎么样？在我看来，这个换行符是在电子邮件客户端之前生成的，但这只是我的猜测......

我可以找到非常好的文章如何创建正确的 HTML 电子邮件，如下所示：

[http://24ways.org/2009/rock-solid-html-emails](http://24ways.org/2009/rock-solid-html-emails)

但是没有人写关于这个烦人的换行问题的东西，但我不敢相信我是唯一有这个问题的人......：/

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T13:26:01.830

简单的解决方法

```
$body = str_replace("<","\r\n<", $body); 
```

每个 HTML 标记都将从新行开始，为您提供：

```
m
</strong>
<br/>Passwort: 
<strong>20o3a7 
```

* * *

另一件事是，我`PHPMailer`在许多项目中使用过，向所有邮件客户端发送数千封电子邮件，但我从未遇到过这个问题。确保您的代码正常。（也许你的文本编辑器正在换行？）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T20:59:43.233

> `<table width=3D"100%" cellspacing=3D"0" border=3D"0" cellpadding=`

它被称为[引用的可打印](http://en.wikipedia.org/wiki/Quoted-printable)编码，这在 html 电子邮件中很常见。例如，“=3D”代表“=”。

关于您的问题：我从未想过。不看源码就很难调试。但无论如何，你似乎有一个解决方案。:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-07-19T19:20:48.313

```
$message = imap_fetchbody($inbox,$id,2);
$message = quoted_printable_decode($message); // magic 
```

# c - 为什么未设置元素时sizeof会返回值？

> ID：12216229
> 
> 赞同：1
> 
> 时间：2012-08-31T13:21:45.047
> 
> 标签：c

```
#include <stdio.h>

int main(void) {

int TEST_HB[10]; 
memset(TEST_HB,'9', sizeof( TEST_HB));

printf("%c\n",TEST_HB[9]);

printf ("TEST_HB[10]=%d\n",sizeof( TEST_HB[40]));   // shows 4
printf ("Arraysize=%d\n",(sizeof(int)*10));     // gets the expectected results
return 0;

} 
```

我相信 sizeof (myArray) 应该以字节为单位返回数组的总大小。但是为什么`sizeof( TEST_HB[40])`在没有定义的时候返回 4 呢？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T13:23:38.900

`TEST_HB[40]`是一个具有类型的表达式`int`（如果评估，则行为未定义，因为`40`对于数组来说太大了）。你的实现`sizeof(TEST_HB[40])`的大小也是如此`int`：4 是典型的。

重要的是，`sizeof`除非它是 VLA，否则不会评估其操作数——它只使用类型。因此，即使没有`TEST_HB[40]`.

实际上，我说它已经定义了行为，但`sizeof`评估为 type `size_t`，它没有打印`%d`. 在可用的地方使用`%zu`或查阅您的编译器文档。您在这里侥幸逃脱，因为您很幸运地使用了 varargs 调用约定，再加上与您的实现中`size_t`的大小相同`int`，或者您的实现是 little-endian，或两者兼而有之。

`sizeof`不计算操作数的一个相当常见的用法是编写如下内容：

```
struct Foo *foo = malloc(sizeof(*foo) * number_of_foos_required); 
```

`sizeof(*foo)`与 相同`sizeof(struct Foo)`，但对某些人来说，它更“明显”是使用合适的尺寸。`foo`在分配内存之前未初始化，因此`sizeof`实际上不使用`foo`.

一个不太常见的用法，它演示了 的行为`sizeof`：

```
int i = 0;
printf("%d\n", i);
printf("%d\n", (int)(sizeof(i++))); // i++ is not executed
printf("%d\n", i); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:24:46.670

```
sizeof( TEST_HB) 
```

是数组的大小（的大小`int[10]`）

```
sizeof(TEST_HB[40]) 
```

是数组元素的大小（的大小`int`）。

请注意，该元素`TEST_HB[40]`在您的数组中不存在（您的数组只有 10 个元素），但由于`sizeof`不评估其操作数，它仍然有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:24:12.100

`sizeof`运算符产生其操作数的大小。如果要获取数组的大小，则应`sizeof TEST_HB`改为使用（不需要括号）。 `TEST_HB[40]`确实是类型`int`，而是`TEST_HB`类型`int[10]`。请注意，除了可变长度数组，运算符的操作数`sizeof`不会被计算，因此它不会导致未定义的行为。

> **C11 § 6.5.3.4 sizeof 和 _Alignof 运算符**
> 
> 运算符产生其`sizeof`操作数的大小（以字节为单位），它可以是表达式或带括号的类型名称。

此外，使用非常量大写标识符被认为是糟糕的 C 编程风格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:25:36.330

返回 int 数组第`sizeof( TEST_HB[40])`40 位的 int 大小，因此大小为 4 个字节。

# c# - 在假脱机文件中打印更改文本

> ID：12216233
> 
> 赞同：1
> 
> 时间：2012-08-31T13:22:05.250
> 
> 标签：c#, windows, spooler

我想在 c# 中创建一个 Windows 服务，它可以更改一些要打印的内容。

为此，我尝试修改在 system32 的 spool 文件夹中生成的 .SPL 文件。

我从 [http://www.codeproject.com/Articles/10586/EMF-Printer-Spool-File-Viewer下载了一个样本](http://www.codeproject.com/Articles/10586/EMF-Printer-Spool-File-Viewer)

它将 SPL 文件转换为图像，但我需要不可能的文本。

如何在制作 .SPL 文件或任何建议之前更改内容。

## 例子

这是原文

* * *

印刷中

这是重复的文字

* * *

## 编辑为没有回应

有没有办法直接从 c# 应用程序中的打印机端口读取？

请注意，我使用的是共享 USB 打印机...

串口编程没用。。

所以任何人都知道从USB端口读取..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-09-13T05:00:55.983

您必须编写一个虚拟打印机驱动程序来拦截打印作业并在将最终打印发送到实际打印机之前对其进行修改。

[https://www.leadtools.com/sdk/print/virtual-printer](https://www.leadtools.com/sdk/print/virtual-printer)

# c# - 创建泛型实例

> ID：12216235
> 
> 赞同：4
> 
> 时间：2012-08-31T13:22:12.487
> 
> 标签：c#, generics

我有一个实现命令模式的 WCF 服务。使用反射，我创建了一个字典，其中键是命令类型，值是 CommandHandler。这个想法是从 WCF 接收命令，使用字典获取处理程序类型，然后使用激活器创建处理程序的实例。

```
 public CommandResponse RunCommand(Command command)
    {
        _logger.Trace("Running Command");
        var handlerType = HandlerMap[command.GetType()];

        var handler = (AbstractCommandHandler<>)Activator.CreateInstance(handlerType);

        handler.HandleCommand(command);
        return new PostStatCommandResponse();

    }

public class StatCommandHandler : AbstractCommandHandler<PostStatCommand>
{

    public override void HandleCommand(PostStatCommand command)
    {

    }
} 
```

问题是 Activator.CreateInstance 返回一个对象，而不是强类型命令处理程序。我需要能够调用 HandleCommand，但不知道如何将其转换为基本 AbstractCommandHandler<>

```
// Syntax error.  Gotta provide type to generic
(AbstractCommandHandler<>)Activator.CreateInstance(handlerType);

// Casting error at run time
(AbstractCommandHandler<Command>)Activator.CreateInstance(handlerType);

// This is dumb and defeats the purpose.
(AbstractCommandHandler<PostStatCommand>)Activator.CreateInstance(handlerType); 
```

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:55:16.357

OR Mapper 对我正在实现的接口说了什么，他击败了我，您可以将泛型类型转换为此然后调用该方法。

```
 Command c = new PostStatCommand();
  var genericType = typeof(AbstractCommandHandler<>).MakeGenericType(c.GetType());
  ICommandHandler handler = (ICommandHandler)Activator.CreateInstance(genericType);
  handler.HandleCommand(c); 
```

使 AbstractCommandHandler 实现 ICommandHandler

```
 public class AbstractCommandHandler<T> : ICommandHandler
  {
    public void HandleCommand(Command c)
    {
    }
  } 
```

现在应该工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:37:58.483

为什么不直接`HandleCommand`通过反射调用？

```
var handler = Activator.CreateInstance(handlerType);
handlerType.GetMethod("HandleCommand").Invoke(handler, new [] {command}); 
```

* * *

或者，创建一个非泛型基类（接口也可以）：

```
public abstract class AbstractCommandHandler
{
    public abstract void HandleCommand(Command command);
}

public abstract class AbstractCommandHandler<T> : AbstractCommandHandler
{
    public override void HandleCommand(Command command)
    {
        HandleCommand((T) command);
    }

    public abstract void HandleCommand(T command);
}

public class StatCommandHandler : AbstractCommandHandler<PostStatCommand>
{

    public override void HandleCommand(PostStatCommand command)
    {

    }
} 
```

并在您的`RunCommand`方法中：

```
var handler = Activator.CreateInstance(handlerType);
((AbstractCommandHandler)handler).HandleCommand(command); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:44:25.590

最好的可能性是提供一个使用`Command`并让您的`AbstractCommandHandler<>`类实现该接口的接口。像这样的东西：

```
public interface ICommandHandler
{
    void HandleCommand(Command command);
} 
```

为什么？因为传递一个`Command`to`HandleCommand`是你唯一可以保证的事情。如果在设计时命令类型未知，则无法根据它检查参数值。因此，编译器不会让您将任何内容转换为`AbstractCommandHandler<>`.

换句话说，类型的参数`T`不会`Command`因为你省略了类型的实际类型参数而神奇地变成。它只是未指定。另请注意，`AbstractCommandHandler<PostStatCommand>`它*不是*该类型的`AbstractCommandHandler<>`变量，因此无法分配给该类型的变量。

# sql - 如何结合聚合 SQL 查询和普通查询？

> ID：12216240
> 
> 赞同：0
> 
> 时间：2012-08-31T13:22:27.307
> 
> 标签：sql, sql-server-2005, join, aggregate

我在 SQL 2005 中有一个要从中聚合数据的表，这是一个示例。

```
JobName       ProductionCounter       StartDate             EndDate               CounterName        Stage
----------------------------------------------------------------------------------------------------------

200           23                      2012-08-30 13:45:00                          Kilograms          Final
200           2                       2012-08-30 13:45:00                          Bars               Final
    [...]
200           46                      2012-08-30 13:45:00   2012-08-30 17:23:00    Kilograms          Final
200           4                       2012-08-30 13:45:00   2012-08-30 17:23:00    Bars               Final
300           20                      2012-08-30 13:45:00                          Kilograms          1st
300           10                      2012-08-30 18:12:00                          Bars               1st
    [...]
300           40                      2012-08-30 18:12:00   2012-08-30 19:17:00    Kilograms          1st
300           20                      2012-08-30 18:12:00   2012-08-30 19:17:00    Bars               1st

I want to format this into the following

JobName      TotalKilos       TotalBars       StartDate             EndDate               Stage
-----------------------------------------------------------------------------------------------

200          69               6               2012-08-30 13:45:00   2012-08-30 17:23:00   Final
300          60               30              2012-08-30 18:12:00   2012-08-30 19:17:00   1st 
```

这让我意识到我对 SQL 一无所知。我已经尝试以下作为开始

```
SELECT JobName, SUM(KiloCounter)
FROM vwOeeInterval
GROUP BY JobName

SELECT JobName, SUM(BarCounter)
FROM vwOeeInterval
GROUP BY JobName 
```

我的问题是：

1.  如何将这些组合到一个查询中？

2.  如何查询 StartDate 和 Stage 等列？特别是在工作完成之前没有填写结束日期？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:26:52.043

这是一个简单的聚合查询。您只需要添加所需的字段：

```
SELECT JobName, SUM(KiloCounter) as TotalKilos,
       sum(BarCounts) as TotalBars,
       min(StartDate) as StartDate,
       max(EndDate) as EndDate,
       max(Stage) as Stage 
FROM vwOeeInterval
GROUP BY JobName 
```

我假设您知道 StartDate、EndDate 和 Stage 对于具有相同作业的所有行都是相同的或为 NULL。聚合将忽略 NULL 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:50:06.867

当您尝试先根据**Jobname**然后根据**countername**获得总和时，您应该根据这 2 列进行分组。

**不要忘记选择要分组的两列**

样本看起来像这样 -
`Select column1, column2, sum(column3) from tablename`
`where blah blah blah...`
`group by column1, column2`

# java - JFreeChart 链接轴

> ID：12216242
> 
> 赞同：2
> 
> 时间：2012-08-31T13:22:33.783
> 
> 标签：java, jfreechart, time-series, zooming, axes

我创建了一个带有两个独立的独立 JFree 图表的框架（以 2x1 网格布局保存）。顶部图表显示 Canlestick 图表，底部显示时间序列图。我想做的是链接两个图表显示的 X 轴，这样当我放大一个图表时，另一个图表会放大到相应的时间段。

这可能吗？如果可以，你能给我举个例子吗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-30T01:16:49.120

你需要的叫做`CombinedDomainXYPlot`. 您需要创建一个组合图并将所有需要链接的图放在那里，而不是创建独立的 JFreeChart 对象。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:50:26.977

`JFreeChart#addChangeListener()`使用和同步`DomainAxis`内部的两个图表添加一个侦听器，`ChartChangeListener#chartChanged()`您将需要某种方法来防止无限循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-03T09:58:57.223

我在正在编写的应用程序中对多个图表做了类似的事情...我只是将一个图表的 DomainAxis 设置为另一个图表的 DomainAxis，即它们都引用单个 DomainAxis。

```
JFreeChart chart1 = ChartFactory.createXYLineChart();
JFreeChart chart2 = ChartFactory.createXYLineChart();
XYPlot plot1 = chart1.getXYPlot();
XYPlot plot2 = chart2.getXYPlot();

plot2.setDomainAxis(plot1.getDomainAxis()); 
```

现在，当我放大 chart1 时，两个图表都显示相同的缩放域。

请注意，我通过在图表之外进行数据修改来确保域在我的图表中的大小/长度相同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-08-06T21:45:12.630

使用[JFreeChartCombinedXYPlotDemo1](http://www.java2s.com/Code/Java/Chart/JFreeChartCombinedXYPlotDemo1.htm)演示的 CombinedDomainXYPlot 是可行的方法。

如果您使用此页面上的替代解决方案（“只需将一个图表的 DomainAxis 设置为另一个图表的 DomainAxis”），这仅适用于两个图表上的点具有相同的开始和结束 xAxis 值（可能还有其他问题） .

# excel - 如果范围满足条件，则查找

> ID：12216244
> 
> 赞同：1
> 
> 时间：2012-08-31T13:22:36.963
> 
> 标签：excel, excel-formula

这就是我想要做的我有两个表......第一列在两个表中都是相同的并且包含 id。第 2 个表中的第 2 列是 id 的精度（例如：-1、+3）。第一个表中的第 2 列带有公差（例如 -1+2、-5-2）...所以我想搜索第一个表中与第二个选定行具有相同 ID 的所有值表，然后如果精度在公差范围内，从表 1 中的第 3 列获取值....换句话说，我想要某种 vlookup，只有当精度的值在范围内时才进行 vlookup。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:25:14.293

这是 vlookup 的一个非常基本的用法：

```
=IF(AND(VLOOKUP(A2,$E$2:$H$32,2,FALSE)<=B2,VLOOKUP(A2,$E$2:$H$32,3,FALSE)>=B2),VLOOKUP(A2,$E$2:$H$32,4,FALSE),"") 
```

然后你只需要在你的列中自动填充它：

![VLOOKUP 演示](../Images/f50237a16e7bc6185ee90e2c71ad02ed.png)

祝你好运。

（当然取决于你的数据是如何按列组织的——你可以制作这个逻辑的索引/匹配版本——就像 Doug 说的那样。）

# objective-c - UITableView 在我旋转设备之前不会正确调整大小

> ID：12216245
> 
> 赞同：0
> 
> 时间：2012-08-31T13:22:40.260
> 
> 标签：objective-c, xcode, uitableview

我在 viewDidLoad 中设置 UITableView 的框架，也是在设备旋转以确保它保持在正确位置之后。这是我的代码：

```
- (void)viewDidLoad
{
    [self setItemBoundaries];
}

- (void) setItemBoundaries {
    if (UIInterfaceOrientationIsPortrait([UIApplication sharedApplication].statusBarOrientation)) {
        self.raceTable.frame = CGRectMake(20,502,728,472);
    }
    else {
        self.raceTable.frame = CGRectMake(20,20,492,708);
    }
}

- (void) didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation {
    [self setItemBoundaries];
} 
```

但是，当应用程序加载时，表格的大小不正确（仅在横向模式下）：![在此处输入图像描述](../Images/705e1c891d93081faa9fd0907825a984.png)

从纵向旋转回横向后，它看起来很好：![在此处输入图像描述](../Images/b43c7f56e7010987ecf4b0a63235e664.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:25:51.860

放入方法`-setItemBoundaries`中`-viewWillAppear:`

```
- (void)viewDidLoad
{
    // [self setItemBoundaries];
} 
```

和：

```
- (void)viewWillAppear:(BOOL)animated {
    [self setItemBoundaries];
} 
```

和*中提琴*...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:25:29.613

```
did... 
```

...在旋转发生后调用，因此可能在绘制表格后调用。

尝试，

```
willRotateFromInterfaceOrientation 
```

...在重绘表格之前设置新的边界。

# xml - 如何锁定/密码保护 XML 文件？

> ID：12216247
> 
> 赞同：2
> 
> 时间：2012-08-31T13:22:53.420
> 
> 标签：xml

我在 XML 文件中读取和写入数据。我不希望其他人阅读该文件。所以我想为我的文件创建密码或锁定文件。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:35:24.487

如果不使用加密软件，您将无法对 XML 文件进行密码保护。XML 文件只是文本，但是像 PGP（Google away）这样的程序应该可以很好地用于强加密。也有很多基于 Java 的加密库，大部分是开源的，只要用谷歌搜索它们

# php - Doctrine2 - 如何更改拥有方，如何设置不为空

> ID：12216251
> 
> 赞同：0
> 
> 时间：2012-08-31T13:23:03.440
> 
> 标签：php, doctrine-orm

我有这样的关系：

```
class TaskSet
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var \Doctrine\Common\Collections\ArrayCollection $tasks
     *
     * @ORM\OneToMany (targetEntity="Task", mappedBy="taskset", cascade={"ALL"})
     */
    private $tasks; 
```

和

```
class Task
{
    /**
     * @var integer $id
     *
     * @ORM\Column(name="id", type="integer")
     * @ORM\Id
     * @ORM\GeneratedValue(strategy="AUTO")
     */
    private $id;

    /**
     * @var TaskSet $taskset
     *
     * @ORM\ManyToOne(targetEntity="TaskSet", inversedBy="tasks")
     */
    private $taskset; 
```

生成的 SQL 如下所示：

```
CREATE TABLE task (
    id INT AUTO_INCREMENT NOT NULL, 
    taskset_id INT DEFAULT NULL, 
    INDEX IDX_527EDB255D67FAA4 (taskset_id), PRIMARY KEY(id)
) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = InnoDB;

CREATE TABLE task_set (
    id INT AUTO_INCREMENT NOT NULL, 
    PRIMARY KEY(id)
) DEFAULT CHARACTER SET utf8 COLLATE utf8_general_ci ENGINE = InnoDB;   

ALTER TABLE task ADD CONSTRAINT FK_527EDB255D67FAA4 FOREIGN KEY (taskset_id) REFERENCES task_set (id) 
```

由于现在一切都很好，我得到了一个（测试集）到多个（测试）的双向关系。

不幸的是，Doctrine2 选择 Task 实体作为拥有方，因此此代码不会保持实体之间的关系：

```
$em = $this->getDoctrine()->getEntityManager();

$taskset = new TaskSet();
$taskset->setName('task 1');
$taskset->setDescription('desc 1');

$task =  new Task();
$task->setName('task 1');
$task->setClassName('class name 1');
$taskset->addTask($task);

$em->persist($taskset);
$em->flush(); 
```

上面代码的输出是：

```
INSERT INTO `task_set` (`id`, `name`, `description`) VALUES (1, 'task 1', 'desc 1');
INSERT INTO `task` (`id`, `taskset_id`, `name`, `className`) VALUES (1, NULL, 'task 1', 'class name 1'); 
```

所以最后的问题：

1.  有没有办法改变拥有方（当然我不能恢复关系）？
2.  如何标记`taskset_id`为 NOT NULL？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:34:26.597

1.  在 TaskSet 类中，编辑 addTask($task) 函数并在末尾添加：

    $task->setTaskset($this);

2.  正如卡洛斯在评论中所说，我最初的帖子并没有真正回答这个问题。您必须在 JoinColumn 定义上使用可为空的属性：

    class Task { /** * @var integer $id * * @ORM\Column(name="id", type="integer") * @ORM\Id * @ORM\GeneratedValue(strategy="AUTO") */私人 $id;

    ```
    /**
     * @var TaskSet $taskset
     * 
     * @ORM\JoinColumn(nullable=false)
     * @ORM\ManyToOne(targetEntity="TaskSet", inversedBy="tasks")
     */
    private $taskset; 
    ```

* * *

初步答案：

1.  在 Task 类的 $taskset 属性上使用[Validator](http://symfony.com/doc/current/book/validation.html)，在您的情况下是[NotNull验证器。](http://symfony.com/doc/current/reference/constraints/NotNull.html)

Symfony2 文档中的示例：

```
// src/Acme/BlogBundle/Entity/Author.php
use Symfony\Component\Validator\Constraints as Assert;

class Author
{
    /**
     * @Assert\NotNull()
     */
    protected $firstName;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:27:25.917

为 1

添加

```
$task->setTaskSet($taskset); 
```

它不会改变拥有方，但关系将被保存

# vb.net - 如何避免 ?

> ID：12216260
> 
> 赞同：8
> 
> 时间：2012-08-31T13:23:44.783
> 
> 标签：vb.net, json, web-services, serialization

我使用 VB.NET“WCF Rest Service Application”项目模板构建了一个非常简单的 Web 服务（这是一个不错的选择吗？）。我工作得很好，除了有

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
...
</string> 
```

添加到我的答案中。

我已将返回值声明为 String ：

```
<WebInvoke(UriTemplate:="member/login", Method:="POST",
            responseformat:=WebMessageFormat.Json, 
            BodyStyle:=WebMessageBodyStyle.Bare)>
Public Function Create(data As IO.Stream) As String

        Dim strData As String = New IO.StreamReader(data).ReadToEnd()
        Dim UserAccessForm As LoginAccess = Me.getAnswer(strData)
        Dim jsonAnswer As String
        jsonAnswer = Newtonsoft.Json.JsonConvert.SerializeObject(UserAccessForm, Newtonsoft.Json.Formatting.None)
        Return jsonAnswer
End Function 
```

因此，不要将其作为答案：

```
{"logged":false,"userID":"0","message":"Empty body"} 
```

我得到：

```
<string xmlns="http://schemas.microsoft.com/2003/10/Serialization/">
{"logged":false,"userID":"0","message":"Empty body"}
</string> 
```

**有什么办法可以避免我的字符串答案的这种不需要的序列化？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-21T03:53:57.967

我刚刚遇到了这个问题，并通过将`XmlSerializerFormat`属性应用于服务合同来解决它。

这是 ac# 片段 - 希望它对您有所帮助。

```
[ServiceContract(Namespace = "")]
[XmlSerializerFormat]
interface IHuggies
{
    [OperationContract]
    [WebInvoke(
        Method = "POST",
        UriTemplate = "/CheckIfConsumerExists")]
    bool CheckIfConsumerExists(string parameters);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-12T23:27:30.370

我认为这会起作用，请注意`Stream`as return 参数。

```
<WebInvoke(UriTemplate:="member/login", Method:="POST",
            responseformat:=WebMessageFormat.Json, 
            BodyStyle:=WebMessageBodyStyle.Bare)>
Public Function Create(data As IO.Stream) As Stream

        Dim strData As String = New IO.StreamReader(data).ReadToEnd()
        Dim UserAccessForm As LoginAccess = Me.getAnswer(strData)
        Dim jsonAnswer As String
        jsonAnswer = Newtonsoft.Json.JsonConvert.SerializeObject(UserAccessForm, Newtonsoft.Json.Formatting.None)
        Return New  MemoryStream(ASCIIEncoding.Default.GetBytes(jsonAnswer));
End Function 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-04T20:13:24.570

我对此做了很多阅读，看起来 XML 是 C# 中的标准响应。我最终得到了这个：

```
 private void MakeCall()
    {
         RestClient rc = new RestClient();
         ...
         var jsonData = returnJson( rc.MakeRequest());
         ...
    }

    private string returnJson(string response)
    {
        XmlDocument doc = new XmlDocument();
        doc.LoadXml(response);
        return doc.DocumentElement.FirstChild.InnerText;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-07-10T05:33:41.137

这似乎有效（responseformat.Json 是魔术词）：

```
 [WebGet(UriTemplate = "/json")]
    [ScriptMethod(ResponseFormat = ResponseFormat.Json)]
    public string json()
    {
        return "{\"test\":\"ok\"}";
    } 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2014-07-30T11:53:03.177

```
public String cleanOUTPUT(String OUTPUT) {
    OUTPUT = OUTPUT.replaceAll("<string xmlns=\"http://schemas.microsoft.com/2003/10/Serialization/\">","");
    OUTPUT = OUTPUT.replaceAll("</string>", "");    
return OUTPUT;
} 
```

# android - Android 字符串从代码工作，但从 string.xml 崩溃

> ID：12216261
> 
> 赞同：0
> 
> 时间：2012-08-31T13:23:50.270
> 
> 标签：android, listview, arrays

我有以下代码：

```
String personalinfos[] = {"Age", "Gender", "Height", "Weight"};
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myLayout);

setListAdapter(new ArrayAdapter<String>(Screening.this, android.R.layout.simple_list_item_1, personalinfos)); 
```

它有效，它完成了它的工作。但由于我需要做国际化/本地化项目，我将其移至 strings.xml，因此我已将其添加到 strings.xml

```
<string-array name="my_keys">
    <item>Age</item>
    <item>Gender</item>
    <item>Height</item>
    <item>Weight</item>
</string-array> 
```

并试图将代码更改为：

```
String personalinfos[] = getResources().getStringArray(R.array.my_keys); 
```

假设我会得到相同的结果，但我没有，我的应用程序崩溃了。

所以在这里提问：

从 strings.xml 读取字符串数组的正确方法是什么？

我不明白为什么它会崩溃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:29:10.090

试试这样 -

```
String personalinfos[];
@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    setContentView(R.layout.myLayout);

    personalinfos = getResources().getStringArray(R.array.my_keys);

setListAdapter(new ArrayAdapter<String>(Screening.this, android.R.layout.simple_list_item_1, personalinfos)); 
```

阅读您的相关内容 - [帮助从 arrays.xml 文件获取字符串数组](https://stackoverflow.com/q/2453989/940096)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:28:57.773

你有没有尝试过：

```
Resources res = getResources();
String[] personalinfos = res.getStringArray(R.array.my_keys);  // no [] 
```

此处的文档：http: [//developer.android.com/guide/topics/resources/string-resource.html](http://developer.android.com/guide/topics/resources/string-resource.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:30:21.610

尝试在 strings.xml 中一一定义您的字符串，然后在数组中定义您的项目，例如：

`<item>@string/string_identifier</item>`

它在工作吗？

有关字符串和字符串数组的更多信息[在这里](http://mobile.tutsplus.com/tutorials/android/android-string/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:38:03.383

**1) 发布 LOGCAT。这就是它崩溃的原因。**

2) 用你的数组创建一个array.xml 文件并直接从你的xml 调用它们怎么样？

因此，创建您的`array.xml`并将其定义为：

```
<resources>
    <string-array name="array">
        <item>A</item>
        <item>B</item>
    </string-array>
</resources> 
```

然后在您的布局中使用条目属性：

```
<ListView
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:entries="@array/array"/> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-12-18T09:59:44.837

您不能`getResources()`在任何活动/片段生命周期方法之外使用。当您尝试在课堂上访问这些资源时，这些资源尚未准备就绪。要做到这一点，请在您想要的任何地方正确定义您的变量并在`onCreate()`或`onCreateView()`方法中对其进行初始化。有关简单示例，请参阅[Praveenkumar 答案](https://stackoverflow.com/a/12216368/5273427)。

# sql - SQL SELECT 查询语法问答

> ID：12216263
> 
> 赞同：1
> 
> 时间：2012-08-31T13:23:55.323
> 
> 标签：sql, select, syntax

我对 SQL SELECT 查询使用以下语法从多个表中提取数据（使用 Sequel Pro）：

```
select Study_Results.CASNumber, Study_Results.Dose, Study_Results.Units, Study_Results.Effects, Studies.Species, Studies.Route, Studies.Result, ToxData_References.BriefReference, Studies.Study, Studies.Summary
from Study_Results, Studies, ToxData_References
where Study_Results.ProtocolID = Studies.ProtocolID
AND Studies.Location = ToxData_References.Location
AND Studies.Study = "Local Lymph Node Assay"
order by Study_Results.CASNumber 
```

查询运行并没有错误地完成，但是当我查看结果时，存在数据不匹配的记录副本——即，不同的记录似乎在查询结果中被错误地组合。

问题：我的语法是否有问题导致数据不匹配？

这是一些示例输出（实际和预期）

一行是正确的： 103694-68-4 10.0000 % NOE mouse skin Symrise,2002c Local Lymph Node Assay 在研究条件下，测试材料不太可能是皮肤致敏剂。49523 45957

但是我得到的第二行将相同的 Study_Results.CASNumber 应用于来自不同 Study_Results.CASNumber 的数据：

103694-68-4 10.0000 % NOE 小鼠皮肤 Symrise,2002c 局部淋巴结检测 使用丙酮中浓度为 1%、3% 和 10% w/v 的测试材料导致同位素掺入量增加 3 倍以上在 3% 和 10% w/v 浓度下。因此，测试材料被证明是一种皮肤致敏剂，证实了用于研究的协议的有效性。49523 45957

上述数据实际上适用于不同的 CASNumber。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:33:47.157

人们普遍认为现代 ANSI 语法更好

```
select Study_Results.CASNumber, Study_Results.Dose, Study_Results.Units, Study_Results.Effects, Studies.Species, Studies.Route, Studies.Result, ToxData_References.BriefReference, Studies.Study, Studies.Summary 
from Study_Results
    inner join Studies on Study_Results.ProtocolID = Studies.ProtocolID 
    inner join ToxData_References on Studies.Location = ToxData_References.Location 
where Studies.Study = "Local Lymph Node Assay" 
order by Study_Results.CASNumber 
```

如果您发现重复项有效，则根据您的数据，您可以通过`distinct`在选择后添加 a 来删除它们。

IE：

```
 select distinct Study_Results.CASNumber, ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:39:18.877

重复的原因是您在表中有多个匹配的记录。这些倍数发生在以下一个或两个地方：

*   位置，在研究和 ToxDataReferences 之间
*   Protocol_id，在 Studies 和 Studies_Results 之间

如果每个表都有一个唯一的 id，您可以通过计算出现次数来了解正在发生的事情：

```
select Study_Results.CASNumber,
       count(distinct sr.StudyResultsId),
       count(distinct s.ProtocolId),
       count(distinct tdr.ToxDataReferencesId)
from Study_Results sr inner join
     Studies s
     on sr.ProtocolID = s.ProtocolID inner join
        ToxData_References tdr
     on s.Location = tdr.Location 
```

您可能期望在没有唯一性的表中具有唯一性。也许您缺少连接条件。也许数据与你理解的有点不同。

# ms-access - 列表框不显示标题

> ID：12216265
> 
> 赞同：0
> 
> 时间：2012-08-31T13:23:58.510
> 
> 标签：ms-access, vba, ms-access-2010, listbox-control

我有一个列表框（如图），这个列表框不与 RecordSource 绑定，而是由最终用户根据其他控件选择动态构建的。在过去，我对此并没有太大的问题，但是在当前的动态查询情况下，列并不是绝对不变的。由于正在使用的 RecordSet 是 CrossTab 查询，因此四分之一的 CrossTab 查询可能有 5 列，接下来的 8 列和接下来的 3 列。

我实现的大多数 ListBox 都有我可以预测的静态列数，但在这种情况下，我无法一致地预测列数。

我已将`ColumnHeads`属性设置为`Yes`，所以这不是问题，我什至在设置操作`ColumnHeads`之前在 VBA 中重置了属性`AddItem`。

我用来在相关列表框（lstCategoryPG）中/周围操作的逻辑：

```
If lstCatType.ListIndex >= 0 Then
'Application.Echo False    'Turn off Screen Updating

    Dim crt As String: crt = "crt_CategoryPG"   'Cross-Tab Query
    Dim cttbl As String: cttbl = CreateCTTable(crt) 'Create Table to store the Cross-Tab information
    Dim sql As String: sql = SQLSelect(cttbl)
    Dim flds As DAO.Recordset: Set flds = CurrentDb.OpenRecordset(sql)
    Dim fldwd As String     'Store the Field Width pattern
    fldwd = "0"";0"";2"""   'Handles `tid` and `cid` columns in the ListBox
    'Assign the number of columns based on the number of fields in CTtable
    lstCategoryPG.ColumnCount = flds.Fields.Count

    Dim fld As Long
    For fld = 3 To (flds.Fields.Count - 1)
        fldwd = fldwd & ";.75"""
    Next
    flds.Close: Set flds = Nothing

    lstCategoryPG.ColumnWidths = fldwd

    sql = SQLSelect(cttbl, , ("tid = " & lstCatType.Value))

    lstCategoryPG.Enabled = True
    lstCategoryPG.ColumnHeads = True
    RefreshControl CurrentDb, lstCategoryPG, sql, , False
'Application.Echo True     'Turn Screen Updating back on
End If 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:00:49.820

暂定的中断修复解决方案对我有用，直到我能够深入了解为什么没有从查询字段中提取列标题。

```
If lstCatType.ListIndex >= 0 Then
'Application.Echo False    'Turn off Screen Updating

    Dim crt As String: crt = "crt_CategoryPG"   'Cross-Tab Query
    Dim cttbl As String: cttbl = CreateCTTable(crt) 'Create Table to store the Cross-Tab information
    Dim sql As String: sql = SQLSelect(cttbl)
    Dim flds As DAO.Recordset: Set flds = CurrentDb.OpenRecordset(sql)
    Dim fldwd As String, fldhd As String      'Store the Field Width pattern and Field Header Row
--> fldhd = "-1;-1;Category"
    fldwd = "0"";0"";2.5"""   'Handles `tid` and `cid` columns in the ListBox
    'Assign the number of columns based on the number of fields in CTtable
    lstCategoryPG.ColumnCount = flds.Fields.Count

    Dim fld As Long
    For fld = 3 To (flds.Fields.Count - 1)
        fldwd = fldwd & ";.75"""
-->     fldhd = fldhd & ";" & flds.Fields(fld).Name
    Next
    flds.Close: Set flds = Nothing

    lstCategoryPG.ColumnHeads = True
    lstCategoryPG.ColumnWidths = fldwd

    sql = SQLSelect(cttbl, , ("tid = " & lstCatType.Value))

    lstCategoryPG.Enabled = True
    RefreshControl CurrentDb, lstCategoryPG, sql, , False
--> lstCategoryPG.AddItem fldhd, 0
'Application.Echo True     'Turn Screen Updating back on
End If 
```

# asp.net - 如何在 GridView 中删除

> ID：12216269
> 
> 赞同：1
> 
> 时间：2012-08-31T13:24:07.637
> 
> 标签：asp.net

如何将 GridView 中行的 id 链接到 deletecommand 以删除一行？

这是我的代码：

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
        AllowSorting="True" DataSourceID="SqlDataSource1" 
        AutoGenerateColumns="False">
    <Columns>
        <asp:CommandField ShowDeleteButton="True" />
        <asp:BoundField DataField="SDate" HeaderText="SDate" SortExpression="SDate" />
        <asp:BoundField DataField="STime" HeaderText="STime" SortExpression="STime" />
        <asp:BoundField DataField="SPrice" HeaderText="SPrice" 
                SortExpression="SPrice" />
        <asp:BoundField DataField="SDuration" HeaderText="SDuration" 
                SortExpression="SDuration" />
        <asp:BoundField DataField="SNoPlaces" HeaderText="SNoPlaces" 
                SortExpression="SNoPlaces" />
        <asp:BoundField DataField="ScheduleId" HeaderText="ScheduleId" 
                InsertVisible="False" ReadOnly="True" SortExpression="ScheduleId" />
    </Columns>
</asp:GridView>
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ChinatowndbConnString %>" 
        DeleteCommand="DELETE FROM Schedule WHERE (ScheduleId = @ScheduleId)" 
        SelectCommand="SELECT SDate, STime, SPrice, SDuration, SNoPlaces, ScheduleId FROM Schedule">
    <DeleteParameters>
        <asp:Parameter Name="ScheduleId" />
    </DeleteParameters>
</asp:SqlDataSource> 
```

我正在使用 Visual Studio 2010。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:28:53.723

您忘记在 GridView 控件上设置[DataKeyNames 属性。](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.gridview.datakeynames.aspx)

改变你的 GridView 像：

```
<asp:GridView ID="GridView1" runat="server" AllowPaging="True" 
    AllowSorting="True" DataSourceID="SqlDataSource1" 
    AutoGenerateColumns="False"
    DataKeyNames="ScheduleId" > 
```

再举一个例子：[SqlDataSource.DeleteCommand 属性](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.sqldatasource.deletecommand.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:30:14.557

`id`在 Gridview 属性中链接您的

```
DataKeyNames="your_id" 
```

您还可以定义多个`ids`，如下所示：

```
DataKeyNames="your_id1, your_id2" 
```

您可以访问以下值：

```
protected void GridView1_Deleting(object sender, ObjectDataSourceMethodEventArgs)  
{
    //e.Command.Parameters["your_id1"].Value;
} 
```

# javascript - 关于使用 .className 的建议，目前在我的循环中不起作用？

> ID：12216274
> 
> 赞同：0
> 
> 时间：2012-08-31T13:24:20.803
> 
> 标签：javascript

我创建了一个循环，将“last”类分配给每五个元素，但由于某种原因，.className 似乎不起作用。我最初使用 .class 但 ie7 和 ie8 错误。谁能告诉我如何解决这个问题？

**JS 片段**

```
success: function(response) {
                    var source = $("#calendar-template").html(),
                            template = Handlebars.compile(source),
                            gameHTML = '';

                    for (var i = 0, gameLength = response.data.games.length; i < gameLength; i++){
                        var thisGame = response.data.games[i];
                        console.log(thisGame);
                        thisGame.className = ((i+1) % 5 == 0) ? 'last' : '';

                        gameHTML += template(thisGame);
                    }

                    instance.selectors.dateWrapper.append(gameHTML);

                    deferredObject.resolve();

                    instance.displayGames();
                }, 
```

**回复**

```
data: Object
games: Array[18]
0: Object
1: Object
2: Object
3: Object
... 
```

干杯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:55:18.213

我可以理解您正在使用**车把**库。

`response.data.games`是一个包含现有 HTML 内容的上下文的对象。该调用`template(thisGame)`将替换`#calendar-template`元素的某些部分。可能您在`{{class}}`某处有一个 as 车把表达式。所以，你应该使用`thisGame.class`而不是`thisGame.className`.

请记住，您不是在处理 DOM 元素，而是在处理把手上下文对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:32:57.207

你可能需要做 var el = getElementById(thisGame); 如果您的数据来自 ajax 请求。它永远不会包含任何 DOM 元素，您可以在其上设置类之类的东西，只有一个 id。

# dojo - Dgrid 将焦点设置在单元格上

> ID：12216280
> 
> 赞同：4
> 
> 时间：2012-08-31T13:24:46.013
> 
> 标签：dojo, dgrid

我正在使用 dgrid 以网格格式显示数据，它有四列。都是可编辑的

我使用了以下方式来声明它。

```
<table id="grid" data-dojo-type="dgrid.CustomGrid" data-dojo-props="store: memoryStore">
<thead>
    <tr>
        <th data-dgrid-column="dgrid.editor({ field: 'id' }, dijit.form.TextBox, 'click')">ID</th>
        <th data-dgrid-column="dgrid.editor({ field: 'name' }, dijit.form.TextBox, 'click')">Name</th>
        <th data-dgrid-column="dgrid.editor({ field: 'description' }, dijit.form.TextBox, 'click')">Description</th>
    </tr>
</thead>
</table> 
```

我的问题是，当我编辑第一列时，编辑后应该将焦点放在第二列并在该单元格中显示光标，这样我就可以开始编辑第二列了；第三列也是如此。

我对 dojo 和 dgrid 非常陌生。我在 sitepen 上找到了一些 API，但无法解决我的问题

请帮助我

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T14:15:40.010

There is `dgrid/Grid::edit(cell)` method to start with.

I used `dojo/aspect::after` to add an event listener to an editor widget (e.g. `dijit/form/TextBox`), if it does not exist, to listen `keypress` event for a specific key, in my case *TAB*, and then call `grid.edit(cell)` with the cell that should be edited next.

See a working example at jsFiddle: [http://jsfiddle.net/phusick/2jU7R/](http://jsfiddle.net/phusick/2jU7R/)

It is far from finished, but at least it can provide a possible directon. Use *double click* to edit and press *TAB* when editing to jump to the following cell.

```
aspect.after(grid, "edit", function(promise, cellNode) {

    if(promise === null) return;

    promise.then(function(widget) {
        if (!widget._editorKeypressHandle) {
            widget._editorKeypressHandle = widget.on("keypress", function(e) {

                for (var rowId in grid.selection) { break;}            
                for (var columnId in grid.selection[rowId]) { break;}

                if(e.charOrCode == keys.TAB) {
                    e.preventDefault();
                    var cellEdited = grid.cell(rowId, columnId);
                    var cellToEdit = grid.right(cellEdited, 1);

                    if(cellEdited.row.id == cellToEdit.row.id
                       && cellEdited.column.id == cellToEdit.column.id
                      ) {
                          // go to next line
                          for(var firstColumnId in grid.columns) { break;}
                          var nextRow = grid.down(cellEdited.row, 1);
                          cellToEdit = grid.cell(nextRow, firstColumnId);
                    };

                    grid.deselect(cellEdited);
                    grid.select(cellToEdit);
                    grid.edit(cellToEdit);
                }
            })
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T23:19:41.370

这是另一种选择。还包括旧版本 dgrid 中文本选择错误的解决方法。

```
postCreate: function() {
    var that = this;
    this.inherited(arguments);

    // FIXME Workaround bug in dgrid that causes the grid to lose
    // focus after each save.
    this.on('dgrid-datachange', function(evt) {
        that._selectedCell = that.cell(evt);
    });

    aspect.after(this, 'save', function(dfd) {
        dfd.then(function() {
        var nextCell = that.right(that.cell(that._selectedCell.row.id, that._selectedCell.column.id));
            that.edit(nextCell);
        // FIXME Workaround dgrid bug that blocks field text to be selected on focus.
        nextCell.element.widget && nextCell.element.widget.textbox && nextCell.element.widget.textbox.select();
        });
    });
} 
```

# arrays - 如何在一个数组中搜索另一个数组中的术语，然后将结果放入第三个数组？

> ID：12216286
> 
> 赞同：1
> 
> 时间：2012-08-31T13:25:06.757
> 
> 标签：arrays, perl, while-loop

我有一个字符串数组@array，我想在@array2 中搜索@array 中的术语。@array2 每行数据包含两个元素。

例如@array = abcd

@array2 有两列包含行条目：

```
row1: a x,     
row2: y c,     
row3: d x,     
row4: d c,     
row5: x b,     
row6: x x,     
row7: y x 
```

如果@array 的任何$member 在任何行中，我想将@array2 的这些行放入@array3 中，理想情况下全部放在一个列中，所以@array3 = axycdxdcxb

即第 6 行和第 7 行不包含 a、b、c 或 d，因此它们被排除在外！任何帮助都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:52:02.217

使用`for`循环：

```
for my $member (@array) {
   ...
} 
```

如果要耗尽数组，可以`shift`在`while`循环中使用：

```
while (@array) {
    my $member = shift @array;
} 
```

您甚至可以将其缩短为

```
while (defined(my $member = shift @array)) { ... } 
```

但前提是您确定 @array 的所有成员都已定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T22:08:56.647

这是一个选项：

```
use Modern::Perl;

my @array  = qw/ a b c d /;
my @array2 = ( 'a x', 'y c', 'd x', 'd c', 'x b', 'x x', 'y x' );
my @array3;

for (@array2) {
    my @i = split;
    push @array3, @i if $i[0] ~~ @array or $i[1] ~~ @array;
}

say for @array3; 
```

输出：

```
a
x
y
c
d
x
d
c
x
b 
```

`for`循环遍历`@array2`'s 元素，将`split`字母放入`@i`. 'smart match' 操作符（Perl 5.10+）用于查看天气一个或另一个字母是否在包含的列表中`@array`，如果是，则将列表`@i`推到`@array3`中，最终打印出来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:06:40.657

使用数组，for[each] 构造可能更合适

```
@array=<FILE>;  # in array context <FILE> returns an array instead a line

while(@array>0) {  # in scalar context @array returns the size of the array
    my $line = shift @array;
    ...
} 
```

或保留数组

```
my $i=0;
while($i<@array) {
  my $line = $array[$i];
  ...
} continue {
  $i++
} 
```

# php - PHP 理论中的 Stomp / ActiveMQ - 如何模拟 Java 的 MDB？

> ID：12216288
> 
> 赞同：0
> 
> 时间：2012-08-31T13:25:14.733
> 
> 标签：php, jms, activemq

如何在 PHP 中创建等效的消息驱动 Bean？

所以，我知道可以通过 Stomp 协议向 ActiveMQ 发送（）消息，并且当 ActiveMQ 的队列中有可用消息时，可以先连接（）到 ActiveMQ，然后再到 readFrame（）。

我不明白的是如何解决从队列接收到的消息的异步处理问题。

如果您有一个线程一直在队列中等待（并阻塞）直到其中有东西，这是否意味着您在 PHP 中一次只能处理一条消息？

在 Java EE MDB 中，您不必担心线程，因为应用服务器会在需要时实例化 MDB，但我不明白如何在 PHP 中创建一个侦听 ActiveMQ 队列的高吞吐量应用程序。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-02T09:38:46.917

不清楚您在哪种意义上指的是 PHP，PHP 是指语言中的 PHP，还是运行时与 Web 服务器一起使用的 PHP？

但是，我会创建一个单独的 php 脚本，并与从 Web 应用程序调用的任何脚本分开启动它。例如，当服务器启动并有一个读取 STOMP 消息的循环时，就像您描述的那样。

那么你将如何让它与 Web 应用程序通信呢？只需以某种方式在 Web 应用程序数据库中处理和存储消息的内容。这本质上也是 JavaEE MDB 的工作方式，但是正如您所注意到的，有一个容器来处理 MDB 线程的启动。

关于线程：你可以在 PHP 中 fork 进程，尽管线程并不是一个真正的选择。看这个例子：[http ://us.php.net/pcntl_fork](http://us.php.net/pcntl_fork)

```
// fork a php script into two processes. Then make each process
if (pcntl_fork() == -1) {
 die('Forking failed');
} 
// This is run twice in different processes, one main process and one child.
run_message_listener_loop(); 
```

# javascript - 对象不支持 WebBrowser 控件的属性或方法

> ID：12216301
> 
> 赞同：14
> 
> 时间：2012-08-31T13:25:53.487
> 
> 标签：javascript, asp.net, winforms, internet-explorer-9

我已经开发了一个移动应用程序（在 asp.net 中），我正在使用带有 WebBrowser 控件的 WinForms 应用程序来演示它。

我的主页我正在使用脚本来隐藏地址栏：

```
<script type="text/javascript">
    window.addEventListener("load", function () {
        // Set a timeout...
        setTimeout(function () {
            // Hide the address bar!
            window.scrollTo(0, 1);
        }, 0);
    });
</script> 
```

这在几台机器上运行良好，但今天早上在一台新机器上，页面加载时我遇到了一个弹出窗口：

![在此处输入图像描述](../Images/0bb40e9ebc9eb72e5406af80461f5b6d.png)

有问题的机器安装了 IE9，我已经`Disable Script Debugging`检查了设置。

解决此问题的最佳方法是什么。我可以在 JS 中添加一些条件以在 IE 中运行时不执行吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2015-01-16T07:52:38.270

我知道这个问题是从 2012 年开始的，但有一个答案。

在添加脚本的文档顶部，`<head>`您需要编写

```
<meta http-equiv="X-UA-Compatible" content="IE=edge"> 
```

WinForms WebBrowser 控件正在使用 Internet Explorer，但您需要在那里强制使用最新版本。例如。如果您使用的是 jQuery 2+，则它需要 IE 9+，因此您至少需要使用版本 9 或更高版本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-02T08:29:56.933

Webbrowser 控件不支持 jquery v2。

使用 jquery 1.9.1。

```
<script src="http://code.jquery.com/jquery-1.9.1.js"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:33:54.963

Webbrowser 控件是 Internet Explorer 本身的一部分。并且 Internet Explorer 不支持该`window.addEventListener`方法。改用`window.attachEvent`方法。

因此，您页面中的脚本将如下所示

```
window.attachEvent("load", function () {
    // Set a timeout...
    setTimeout(function () {
        // Hide the address bar!
        window.scrollTo(0, 1);
    }, 0);
}); 
```

希望这会对你有所帮助！

# java - 文本视图Android中的对齐问题

> ID：12216306
> 
> 赞同：1
> 
> 时间：2012-08-31T13:26:10.023
> 
> 标签：java, android, android-layout

我有两个文本视图来显示另一个下方的文本。我面临的问题是，当上面的文本视图中的文本大小很长时，它会影响下面的文本视图，因为文本显示在另一个上面。我有图像，我使用的代码如下。任何人都可以找到解决方案..提前谢谢

**图片：**

![在此处输入图像描述](../Images/f673e3f873c799692303cec6c098adb3.png)

**代码：**

```
<?xml version="1.0" encoding="utf-8"?>
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
style="@android:style/Theme.Panel"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
>

<TextView
    android:id="@+id/title"
    android:layout_width="50dp"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="10dp"
    android:layout_marginTop="15dp"
    android:ellipsize="end"
    android:textColor="#000000"
    android:textSize="25sp"
    android:textStyle="normal" />

<TextView
    android:id="@+id/tamil"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_below="@+id/title"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="10dp"
    android:textColor="#000000"
    android:textSize="25px"
    android:textStyle="bold" />

<TextView
    android:id="@+id/english"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/tamil"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/tamil"
    android:layout_marginLeft="20dp"
    android:layout_marginTop="30dp"
    android:textColor="#000000"
    android:textSize="25px"
    android:textStyle="normal" />
   </RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:28:06.080

您可以在具有垂直方向的 LinearLayout 中重新组合它们两个。它应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:33:01.587

只需`android:layout_below="..."`在您的英文 TextView 中包含如下 -

```
<TextView
android:id="@+id/english"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:layout_alignLeft="@+id/tamil"
android:layout_alignParentLeft="true"
android:layout_alignParentRight="true"
android:layout_marginLeft="20dp"
android:layout_marginTop="30dp"
android:textColor="#000000"
android:layout_below="@+id/tamil" // this line
android:textSize="25px"
android:textStyle="normal" /> 
```

并删除`android:layout_alignTop="@+id/tamil"`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:34:03.553

在你的英文文本视图中添加这样的

```
<TextView    android:id="@+id/english"
android:layout_below="@id/tamil" 
```

//并删除此属性

```
 android:layout_alignLeft="@+id/tamil"
    android:layout_alignParentRight="true"
    android:layout_alignTop="@+id/tamil" 
```

不要将`@+id`其用于您已定义的参考。不要像标题那样`px`使用字体大小。`sp`

# php - 使用 jquery 将表单提交到 php

> ID：12216313
> 
> 赞同：0
> 
> 时间：2012-08-31T13:26:42.823
> 
> 标签：php, jquery, forms

我有一个联系表单，该表单提交到包含以下内容的 php 页面：

```
<?php 
$to = 'emailtosendto';
$subject = 'New message from contact form';
$name = $_POST['fullname'];
$mail = $_POST['email'];
$company = $_POST['company']; 
$phone = $_POST['phone']; 
$comment = $_POST['comment'];
$message = $_POST['message'];   
$body = 'Mr/Mrs '.$name.' wishes to contact us.
He\'s from a company called '.$company.'.
You can email him back at '.$mail.', or call him on '.$phone.'.
He was sneaky and found us through '.$comment.'.
He would like to say,
'.$message.'';
ini_set('sendmail_from', '$mail');
mail($to, $subject, $body);
header('location:./?sent');
?> 
```

我现在已经将表单更改为一个很好的实时验证的 jQuery 表单，你可以在下面看到它的小提琴。

[http://jsfiddle.net/swift29/6UC7m/](http://jsfiddle.net/swift29/6UC7m/)

我在想如何更改任何此代码以仍然执行相同的功能，但使其出现一个弹出窗口，确认消息已使用 jQuery 发送，然后淡出并重置表单

在此先感谢，斯威夫特

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:35:49.323

您可以使用 AJAX 而不是提交。这样你就可以在完成后得到一个弹出窗口。

例子：

```
$.ajax(
    url:  "urlofscript.php",
    data: {
              fullname: variableContainingFullname, // i.e. var variableContainingFullname = $("#fullname").var();
              email:    variableContainingEmail,
              // etc, all the php variables in POST
          },
    type: "POST",
    success: function(result)
    { 
        alert("DONE"); 
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:34:08.447

您正在寻找 jQuery 的[ajax()](http://api.jquery.com/jQuery.ajax/)函数。

AJAX 将通过 Javascript 发送 POST 查询。这意味着您不必刷新页面，它将自动发送，并且脚本（mailer.php）将在新实例（不是用户当前使用的浏览器窗口）中调用 - 它也被称为“异步”或“背景”，即它不会中断用户正在做的事情（简而言之）。

AJAX 很容易理解，基本上它就像 javascript 发送表单本身，而不是用户执行它。

在`ajax()`jquery 函数中有一些回调函数。

你想要的那个被调用`success:`，它看起来像这样：

`success: function(data){ alert("Your message has been sent!"); }`

这将在运行 php 脚本并且 javascript 回调时显示警报。

Hth

# git - 如何将一些文件推送到存储库（并非全部提交）

> ID：12216317
> 
> 赞同：0
> 
> 时间：2012-08-31T13:26:51.117
> 
> 标签：git, merge, intellij-idea

我发现这种情况很“常见”，但环顾四周没有任何帮助。我不是真正的 Git 专家，但这应该很简单。

让我们举个例子：

UserA 和 UserB 正在使用相同的版本 (A)。UserA 提交并推送到远程，所以现在它在版本 B 中。

我只提交了一些我希望推送的文件。

当我尝试拉取（因为由于版本不同而无法推送）时，Git 会告诉我“未提交的更改将被合并覆盖”。

```
UserA: A------B
        \      \<-not possible  
UserB:   \------C 
```

我希望拉出新版本，保留我的所有更改，包括未提交的更改。可能吗？

我正在使用 IntelliJ 和他的内置插件（我觉得它很友好），所以如果有人能解释我如何从那里做到这一点，那就太好了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:51:13.707

有可能的。

我认为最好的做法是像你已经做的那样提交你想要的更改（假设你在分支“dev”上工作）。然后，您创建一个未提交更改的新分支，假设您将其称为“mywork” `git checkout -b mywork`：。您在此分支上提交您的其他更改。

然后是合并。首先检查您是否在正确的分支上工作`git checkout dev`。那时我不太确定它会正常工作，所以一个想法是运行`git checkout -b tempdev commitIdWithChangedToBePushed`（即你从以前的提交分支）。

然后你会合并它。`git pull origin`像你一样运行（原点是你的遥控器）。现在它们都在本地正确合并，在 tempdev 上。将 tempdev 合并到 dev 并删除 tempdev。现在，推到原点。

结果，您现在有 2 个分支：`dev`干净的更改和`mywork`其他更改。如果您的想法是稍后集成您的其他更改，您可以合并它们。

顺便说一句，我不知道 IntelliJ 插件，所以试着在那里重现它。

也可以使用 stash，但我不喜欢它，就`git stash`在你合并之后，`git stash pop`（或者我认为这就是过程）。我不喜欢它，因为合并并不总是一个微不足道的过程，并且恢复您的更改会让您遇到麻烦。另外，您可能会忘记隐藏的更改，并隐藏在它们之上或忘记取消隐藏。也许那只是我。

# git - 如何压缩与远程提交交错的多个本地 git 提交

> ID：12216318
> 
> 赞同：1
> 
> 时间：2012-08-31T13:26:51.523
> 
> 标签：git

当我在处理一个需要几天时间才能实现的大型功能时，我会对本地 git 存储库进行许多小提交，并从远程主存储库中提取其他人的更改。功能完成后，我的本地 git repo 看起来像：

1.  本地提交：功能 X 的最后一步
2.  远程提交：B
3.  本地提交：功能 X 的一部分
4.  本地提交：功能 X 的一部分
5.  远程提交：A
6.  本地提交：功能 X 的第一步。
7.  ...

现在，我想将所有本地提交作为添加功能 X 的单个提交推送到远程仓库。在这种情况下，使用 'git rebase' 压缩提交将不起作用，因为远程提交不是由我完成的（2 和 5 ) 也需要被压扁，这不是一个选择。

我设法弄清楚的唯一方法是拥有一个只有远程提交的干净分支，针对我的本地开发分支发出“git diff”并将生成的补丁应用到干净的分支上。然后提交修补的更改并推送。有没有更好的办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:26:51.523

我找到了答案： git rebase -i 实际上允许重新排序提交，并且当所有本地提交重新排序为按顺序排列（不与远程提交交错）时，它们可以全部压缩为一个。

# web-services - Amazon REST 服务身份验证和安全性

> ID：12216321
> 
> 赞同：4
> 
> 时间：2012-08-31T13:26:55.860
> 
> 标签：web-services, security, authentication, amazon-s3, hmac

我正在阅读亚马逊的身份验证过程，他们使用自定义过程来签署每个请求。

*   我仍然不明白如何从中间人攻击中停止签署每个请求，因为看到请求并看到签名的每个人都可以再次发出相同的请求。

*   如果有人分享一些关于安全性或亚马逊网络服务或一般网络服务的参考书目，我也会感激不尽。

*   SSL 如何在这种情况下提供帮助？

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-04T16:09:21.843

这是[文档](http://docs.amazonwebservices.com/AWSMechTurk/latest/AWSMechanicalTurkRequester/MakingRequests_RequestAuthenticationArticle.html)必须说的。基本上它归结为时间戳，为了减轻重放攻击，他们建议[使用 SSL](http://aws.amazon.com/articles/1928)。

> **验证请求**
> 
> 通过验证请求中包含的信息来验证对 AWS 的请求。使用下表中的信息执行此验证。

**AWSAccessKeyId** 发件人的 AWS 账户由访问密钥 ID 标识。访问密钥 ID 用于查找秘密访问密钥。

**签名** 对需要经过身份验证的请求的 Web 服务的每个请求都必须包含有效的请求签名，否则请求将被拒绝。请求签名是使用 AWS 分配给开发人员账户的秘密访问密钥计算的，这是一个只有 AWS 和开发人员知道的共享密钥。

**时间戳** 创建请求的日期和时间，以 UTC 字符串表示。此参数值的格式必须与 XML Schema dateTime 数据类型的格式匹配。

第二个链接提供：

> 防御重放攻击的最佳机制是确保您的所有请求都是通过 SSL 连接发出的。如果您不能使用 SSL，那么可用于防止重放攻击的机制是签名版本 2 中的 Expires 参数。这需要您的客户端同步到原子时间（使用 NTP 或类似的同步协议）。如果您不使用 Expires 参数，而仅依赖时间戳参数，则您的请求会受到请求过期期限的影响，该期限因服务而异，但最长可达 15 分钟。

# embed - spotify trackset 链接不起作用

> ID：12216324
> 
> 赞同：0
> 
> 时间：2012-08-31T13:27:09.880
> 
> 标签：embed, spotify, playlist

当您嵌入 Spotify 曲目列表时，可以选择复制链接。这个链接失效了。有谁知道如何让它工作或为什么它不工作？

这是播放器的示例：http: [//static.echonest.com/playlist/SpotifyTrackList.html](http://static.echonest.com/playlist/SpotifyTrackList.html)

在播放器悬停时，您可以选择复制链接或嵌入代码。Here is the link I want to get working: [http://open.spotify.com/trackset/abba_playlist/12TwKFjedaPfO6a5p9mo6D,6Zur808QieVQAdXbgwMzMN,1fQyiulxuPu8ywfIrOM3ft,2PTJh1Yt9Z2g4AifpJ8Gs0,6gFhejgj1XAP86XuA2DAG4,6HyYUvLLHlvBcAho2fgBvd,0AWpG6NUEaRZvS3eMvXkBg,56BSwBKWHYldQOgYLHiehs,4jfSPSlCyS1ywRbN4iod8D,6aOMyKSl8bnayyILufaaVa,2ZItUHJBx3kn3QupNexzS5,1lJ219Hvtp5kDe3RqGYqto](http://open.spotify.com/trackset/abba_playlist/12TwKFjedaPfO6a5p9mo6D,6Zur808QieVQAdXbgwMzMN,1fQyiulxuPu8ywfIrOM3ft,2PTJh1Yt9Z2g4AifpJ8Gs0,6gFhejgj1XAP86XuA2DAG4,6HyYUvLLHlvBcAho2fgBvd,0AWpG6NUEaRZvS3eMvXkBg,56BSwBKWHYldQOgYLHiehs,4jfSPSlCyS1ywRbN4iod8D,6aOMyKSl8bnayyILufaaVa,2ZItUHJBx3kn3QupNexzS5,1lJ219Hvtp5kDe3RqGYqto)

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:57:16.687

原来这是解决方案：

```
<a href="spotify:trackset:Playlist:49MsPNQCOmxvIYi9AdoPzY,6fUlrsHaz4QfCNF31rk2dU,5KiTsR2h8jnzkvTeucxoAn,6kidUwWb8tB9ktfy7U76iX,6mlUEdb90RqwUisnp65lG7,6KOEK6SeCEZOQkLj5M1PxH,3psrcZoGRaWh6FMGael1NX,3EHLii6bnZxJxsCfLlIb83,0xJtHBdhpdLuClaSQYddI4,6fsdOFwa9lTG7WKL9sEWRU,">Play in Spotify</a> 
```

# java - 列表和列表有什么区别 和列表？

> ID：12216326
> 
> 赞同：9
> 
> 时间：2012-08-31T13:27:17.127
> 
> 标签：java, generics

**我有一个关于Java 泛型**的非常基本的问题。我以为两者`List<Number>`都是`List<? extends Number>`同质的。我是对的还是我缺少一些基本的东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T13:29:49.210

泛型类型更加迂腐。

`<? extends Number>`表示数字或未知的子类。如果您获得这样的值，它将是 a `Number`，但您不能给出这种类型的值，因为您不知道哪个是有效的。

区别在于参数和返回值。

```
List<Number> numbers = new ArrayList<Number>();
Number n = 1;
numbers.add(n); // ok.
n = numbers.get(0); // ok
numbers.add(1); // ok.

List<? extends Number> numbers2 = new ArrayList<Double>();
numbers2.add(n); // not ok
n = numbers2.get(0); // ok

List<? super Number> numbers3 = new ArrayList<Serializable>();
numbers3.add(n); // ok
n = numbers3.get(0); // not ok. 
```

* * *

`super`在一些地方使用来表示该类型可以是超类型。例如

在 Collections 中，此方法表示 Comparator 需要能够比较相同类型或任何超类型。

```
public static <T> void sort(List<T> list, Comparator<? super T> c) 
```

这意味着您可以拥有

```
Comparator<Number> comparesAnyNumbers = ...
List<Integer> ints = ...
Collections.sort(ints, comparesAnyNumbers); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T13:33:45.710

泛型是编译时语言特性，意味着它们不存在于运行时。在泛型机制中，对于编译时检查，它们不是同质的，即如果您想在泛型类型中使用多态性。

以下为您提供编译时错误，尽管它似乎是一个有效的定义：

```
 List<Number> list = new ArrayList <Integer>(); 
```

然而

```
 List<? extends Number> list = new ArrayList <Integer>(); 
```

已验证。此外，您不能在右侧使用通配符类型：

```
 List list = new ArrayList <? extends Integer>(); 
```

不会被编译。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:35:07.437

`List<Number>` --> `Number`s 列表（或 s 的实例`Number`）

`List<? extends Number>`--> 列出任何扩展的类型`Number`

# android - 在 Android 中进行单例延迟初始化的正确方法？

> ID：12216327
> 
> 赞同：0
> 
> 时间：2012-08-31T13:27:19.303
> 
> 标签：android

在工作中的 Sonar 报告中，我们对 Android 项目有一些警告：

多线程正确性 - 静态字段 findbugs 的不正确延迟初始化：LI_LAZY_INIT_STATIC

为了纠正这些问题，我被引导到关于双重检查锁定的维基百科条目

[http://en.wikipedia.org/wiki/Double_checked_locking_pattern#Usage_in_Java](http://en.wikipedia.org/wiki/Double_checked_locking_pattern#Usage_in_Java)

当我查看 android 框架代码时，我没有看到使用双重检查锁定，例如，WebViewDatabase 类只是使其 getInstance(Context) 方法同步：

```
public static synchronized WebViewDatabase getInstance(Context context) {
    if (mInstance == null) {
        mInstance = new WebViewDatabase(context);
    }
    return mInstance;
} 
```

Android中的正确方法是什么？

提前致谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:32:36.723

`public static synchronized WebViewDatabase getInstance`没有使用双重检查锁定，所以它没有这个问题。对于双重检查锁定，如果实例存在，则在锁之外检查，如果是这种情况，则跳过锁。这导致执行比总是锁定更快，因为您只需要在一开始就锁定一次。

如果它使用双重检查锁定，它看起来像

```
public static WebViewDatabase getInstance(Context context) {
    if (mInstance == null) {
        synchronized (WebViewDatabase.class) {
            if (mInstance == null)
                mInstance = new WebViewDatabase(context);
        }
    }
    return mInstance;
} 
```

并且`mInstance`需要定义`volatile`

Android与桌面Java的同步/单例/双重检查锁定没有变化

# php - 一次在数据库中插入多个数据

> ID：12216328
> 
> 赞同：4
> 
> 时间：2012-08-31T13:27:20.590
> 
> 标签：php, mysql

我有这段代码，它允许我插入一些我在数据库中选择的日期，现在这个只插入一个值，而不是全部，就像它停在第一个值..

你能告诉我我做错了什么吗？

谢谢！

```
$job_id=$_REQUEST['job_id'];

$dates = explode(",", $_POST['altField']);
foreach($dates as $date){
$sql="INSERT INTO date (job_id,date) VALUES('$job_id','$date')";
mysql_query($sql);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:39:38.340

```
$job_id=$_REQUEST['job_id'];

$dates = explode(",", $_POST['altField']);
$values_arr = array();    
foreach ($dates as $date) {
    $values_arr[] = "('" . $job_id . "','" . $date . "')";
}
$values = implode(", ", $values_arr);

$sql="INSERT INTO date (job_id,date) VALUES $values";
mysql_query($sql); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:29:03.593

```
$job_id=$_REQUEST['job_id'];

$dates = explode(",", $_POST['altField']);
foreach($dates as $date){
    $values .= '("'.$job_id.'","'.$date.'"),';
}
$sql="INSERT INTO date (job_id,date) VALUES " . substr($values, 0, -1);
mysql_query($sql); 
```

插入可以有多个值集，因此您只需要在 foreach 中设置值，然后在它之外进行查询。您也可以这样做并获得相同的结果，

```
$job_id=$_REQUEST['job_id'];

$dates = explode(",", $_POST['altField']);
foreach($dates as $date){
    $values[] = '("'.$job_id.'","'.$date.'")';
}
$sql="INSERT INTO date (job_id,date) VALUES " . implode(',',$values);
mysql_query($sql); 
```

**提醒**

始终清理您的输入。不这样做可能会导致 SQL 注入并给您带来重大问题。看[这个](http://php.net/manual/en/function.mysql-real-escape-string.php) 还有mysql没有维护，建议改用MySqli或者PDO。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T13:29:55.747

尝试：

```
$sql = "INSERT INTO date SET job_id='".$job_id."', date='".$date."'";
mysql_query($sql); 
```

# ios - 无论如何将 Junos 应用程序与 iOS 应用程序集成以连接到 VPN？

> ID：12216330
> 
> 赞同：3
> 
> 时间：2012-08-31T13:27:25.577
> 
> 标签：ios, vpn

我正在制作一个 iOS 应用程序，它将通过 VPN 隧道与在专用网络中运行的 Web 服务通信，我需要一种将我的应用程序与 Junos Pulse 应用程序集成的方法。

是否有带有文档、教程或任何资源的 SDK 可以帮助我与 Junos 应用程序进行通信。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-03-04T12:10:21.293

我已经在[这篇文章](https://stackoverflow.com/questions/15300840/getting-user-credentials-from-junos-pulse-inside-a-ios-app)上回答了，但也在这里回答，以防有人找到这个：

Junos Pulse（或现在的 Pulse Secure）有一个 AppConnect SDK，这直接来自他们的[指南](http://www.juniper.net/techpubs/software/pulse/guides/Junos_Pulse_AppConnect_Deployment_Guide.pdf)：

> AppConnect SDK 是由瞻博网络提供的一组 API 和库，允许移动应用程序开发人员直接打开与 Connect 安全网关的基于套接字的 SSL VPN 连接。从 Connect Secure Gateway 的角度来看，这些隧道反映了所有其他形式的 AppConnect 隧道。集成是在代码级别完成的。任何与 AppConnect SDK 集成的应用程序都需要重新编译并手动部署到最终用户。AppConnect SDK 最适合在不使用 MDM 解决方案的情况下部署的容器解决方案或内部应用程序。API 包括身份验证和连接管理功能。连接可以在单个设备上的多个应用程序之间共享。有关 AppConnect SDK 的更多详细信息，请联系您的瞻博网络销售代表。

不幸的是，正如您在最后一段中所读到的，它只能通过您所在组织的瞻博网络销售代表获得。

# python - OpenCV - imread（），imwrite（）增加png的大小？

> ID：12216333
> 
> 赞同：16
> 
> 时间：2012-08-31T13:27:35.480
> 
> 标签：python, image, opencv, image-size

我想尝试对文件进行一些简单的操作，我从打开和保存文件开始（我使用 Python）

```
image = cv2.imread("image.png")
cv2.imwrite("image_processed.png", image) 
```

在这个操作之后，我原来`image`的 33kB 转换成相同的 144kB 图像。

我试过做这样的事情： http://opencv.itseez.com/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight= [imwrite#imwrite](http://opencv.itseez.com/modules/highgui/doc/reading_and_writing_images_and_video.html?highlight=imwrite#imwrite)

```
 params = list()
    params.append(cv.CV_IMWRITE_PNG_COMPRESSION)
    params.append(8)

    image = cv2.imread("image.png")
    cv2.imwrite("image_processed.png",image,params) 
```

但这并没有太大变化（大小减少到 132kB）

这是我正在使用的图像：

![在此处输入图像描述](../Images/7413123f7a02980501452af9bb73a5a1.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T13:57:15.530

像 GIMP 这样的一些 png 编写器编写的压缩 PNG 比 opencv 使用的标准 libpng 要好得多。您还可以使用 Imagemagick 再次打开和保存图像，看看有什么不同（与 OpenCV 相比）。

甚至还有专门的软件可以尝试更好地重新压缩 PNG，例如 pngcrush。

你能提供有问题的图像吗？关于文件大小优化，我想玩它。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-05-26T09:42:28.630

正如 ypnos 所暗示的，您的源文件是 jpg（即使它具有 png 扩展名）。这就是为什么当您将其保存为 png 格式时，它将使用更多空间，因为您正在更改格式（jpg 到 png）。

尝试将最后一行替换为：

```
cv2.imwrite("image_processed.jpg",image,params) 
```

你会看到大小没有太大变化。

或者，保持代码不变，但使用不同的图像，例如[http://upload.wikimedia.org/wikipedia/commons/4/47/PNG_transparency_demonstration_1.png](http://upload.wikimedia.org/wikipedia/commons/4/47/PNG_transparency_demonstration_1.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-08-06T04:35:47.450

半相关，但我有同样的问题`matplotlib.image.imsave`- 它会将 8 位灰度图像保存为 16 位，这会使大小膨胀，即使在使用`scipy.misc.bytescale`以确保它是 8 位数组之后也是如此。但是，`scipy.misc.imsave`将其正确保存为 8 位图像。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-07T07:17:53.603

您可以使用第三方命令行工具 optipng 重新压缩和缩小 png 文件大小而不会丢失任何内容。

参考：

[http://optipng.sourceforge.net/pngtech/optipng.html](http://optipng.sourceforge.net/pngtech/optipng.html)

[https://github.com/johnpaulada/optipng](https://github.com/johnpaulada/optipng)

# php - 获取具有属性最大值的数组的多个成员

> ID：12216338
> 
> 赞同：1
> 
> 时间：2012-08-31T13:27:48.850
> 
> 标签：php, arrays, max

这是我的问题：我需要获取具有属性最大值的数组的四个成员。我已经看过 max() 函数了，但是那个函数只能给我一个成员，而我需要四个。例如，我可以有一个这样的数组：

```
array( 
    array(
        "1", 
        "10"
    ), 
    array(
        "9", 
        "10"
    ), 
    array(
        "3", 
        "10"
    ), 
    array(
        "4", 
        "10"
    ), 
    array(
        "10", 
        "10"
    ), 
    array(
        "8", 
        "10"
    ), 
    array(
        "7", 
        "10"
    ), 
    array(
        "6", 
        "10"
    ), 
    array(
        "5", 
        "10"
    ), 
    array(
        "9", 
        "10"
    ) 
) 
```

我需要一个函数来获得这四个成员：

> 数组（“10”，“10”），数组（“9”，“10”），数组（“8”，“10”），数组（“7”，“10”）

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:36:16.440

[通过usort()](http://docs.php.net/usort)对数组进行降序排序。[通过array_slice](http://docs.php.net/array_slice)
选择前四个项目

```
<?php
$ar = getData();
usort( $ar, function($a,$b) { return -strnatcmp($a[0], $b[0]); });
$result = array_slice($ar, 0, 4);
var_dump($result);

function getData() {
    return array(
        array("1", "10"),
        array("9", "10"),
        array("3", "10"),
        array("4", "10"),
        array("10", "10"),
        array("8", "10"),
        array("7", "10"),
        array("6", "10"),
        array("5", "10"),
    );
} 
```

印刷

```
array(4) {
  [0]=>
  array(2) {
    [0]=>
    string(2) "10"
    [1]=>
    string(2) "10"
  }
  [1]=>
  array(2) {
    [0]=>
    string(1) "9"
    [1]=>
    string(2) "10"
  }
  [2]=>
  array(2) {
    [0]=>
    string(1) "8"
    [1]=>
    string(2) "10"
  }
  [3]=>
  array(2) {
    [0]=>
    string(1) "7"
    [1]=>
    string(2) "10"
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:55:13.870

或者你可以使用一个简单的算法（我认为存在的最简单的算法），快速：

```
$nbrItems = 0;
$greaters = array();
$lessthan = null;
while ($nbrItems < 4 && count($myArray) >= 4) {
    $tmp = reset($myArray);
    foreach($myArray as $item) {
        if ($item[0] > $tmp[0] && ($item[0] < $lessthan || $lessthan === null)) {
            $tmp = $item;
        }
    }
    if ($tmp[0] < $lessthan || $lessthan === null) {
        $greaters[] = $tmp;
        $nbrItems++;
        $lessthan = $tmp[0];
    }
}
print_r($greaters); 
```

不使用现有功能并看看我们如何使其工作总是很有趣...... :)

# ios - iOS 和 Organizer：无法读取下载的文件

> ID：12216340
> 
> 赞同：1
> 
> 时间：2012-08-31T13:27:49.963
> 
> 标签：ios, file

我想在我的桌面上下载我在 iOS 测试应用程序上创建的文件 data.txt。

一旦我访问应用程序并浏览 Documents 文件夹，选择文件并单击下载，唯一可能的文件格式是 XCode boudle 数据。

然后，一旦我尝试使用 XCode 打开文件，它会显示一个沉闷的“应用程序数据”，我看不到内容。我尝试用 TextEdit 打开它，但没有运气..

有什么帮助吗？

这是我看到的：

![下载后的数据](../Images/a13775f70a68cfff5b75e2d7663ff1d8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:54:16.970

你知道这个[iexplorere](http://www.macroplant.com/iexplorer/)吗？有了，您可以从您的设备复制所有文件

# salesforce - Salesforce 生产服务器显示的代码覆盖率比沙盒 (100%) 少 (50%)？

> ID：12216341
> 
> 赞同：0
> 
> 时间：2012-08-31T13:27:52.073
> 
> 标签：salesforce, apex-code

我在沙盒中创建了触发器并运行了测试，它覆盖了 100%。但是在部署到生产服务器时，它会抛出一条消息**部署错误：所有 Apex 类和触发器的平均测试覆盖率为 50%，至少需要 75% 的测试覆盖率。**

帮我解决这个问题......？

```
trigger TestTrigger on Case (before insert,before update,after insert) 
{
    Case ca =  Trigger.new[0]; 
    String sub = ca.Subject;

    if(sub.toUpperCase().startsWith('POP') || sub.toUpperCase().startsWith('POI'))
    {    

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:43:40.697

这可能有几个原因：

*   您的测试类是否依赖于仅存在于您的沙盒中的数据或自定义设置？
*   您在生产中是否有额外的课程或代码？这甚至可以是已安装的软件包等形式。

测试覆盖率是根据测试的 Apex 语句（或行）总数除以组织中 Apex 语句的总数计算得出的。

# c# - 从 Gridview 项目模板字段导出 CSV

> ID：12216354
> 
> 赞同：0
> 
> 时间：2012-08-31T13:28:40.403
> 
> 标签：c#, asp.net, gridview

我有一个要导出到 .csv 文件的 gridview。我将 gridview 绑定到数据表并使用 aspx 文件中的 and 标记。当我将 Gridview 设置为自动生成字段时，它会毫无问题地创建 csv 文件。但是，由于我需要编辑功能，我必须删除自动生成字段并使用 and 和我的代码，它只在 .csv 文件中创建列标题。代码：

```
StreamWriter sw = new StreamWriter(@"C:\Web_Order\Order_W" + custordernum.ToString() + ".csv");
// Write columns 
sw.Write(griditems.Columns[0].HeaderText);
for (int i = 1; i < griditems.Columns.Count; i++)
    sw.Write("," + griditems.Columns[i].HeaderText);
sw.Write("\n");

// Write values 
for (int x = 0; x < griditems.Rows.Count; x++)
{
    sw.Write(griditems.Rows[x].Cells[0].Text);
    for (int i = 1; i < griditems.Rows[x].Cells.Count; i++)
        sw.Write("," + griditems.Rows[x].Cells[i].Text);
    sw.Write("\n");
 }
 sw.Close(); 
 sw.Dispose(); 
```

网格视图的 aspx 文件：

```
<asp:GridView ID="griditems" runat="server" 
        onrowdeleting="griditems_RowDeleting" onrowediting="griditems_RowEditing" onrowupdating="griditems_RowUpdating"
                  AllowPaging="True" 
        onpageindexchanging="griditems_PageIndexChanging" Onrowcancelingedit="griditems_RowCancelingEdit" 
                  Caption="Order Details" AutoGenerateDeleteButton="True" 
        AutoGenerateEditButton="True" 
        AutoGenerateColumns="False" >            
        <EditRowStyle BackColor="#FF9900" BorderStyle="Double"/> 
        <HeaderStyle Font-Bold="True" Font-Italic="False" />
        <RowStyle HorizontalAlign="Center"/>
        <Columns> 
          <asp:TemplateField HeaderText="Part Number">
            <ItemTemplate>
              <asp:Label ID = "partlbl" runat="server" Text='<%#Eval("Part Number") %>'></asp:Label> 
            </ItemTemplate>
            <EditItemTemplate>
               <asp:TextBox ID="partedit" runat="server" Text='<%# Eval("Part Number")%>'  ></asp:TextBox>
            </EditItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="Quantity">
            <ItemTemplate>
              <asp:Label ID = "qtylbl" runat="server" Text='<%#Eval("Quantity") %>'></asp:Label> 
            </ItemTemplate>
            <EditItemTemplate>
               <asp:TextBox ID="qtyedit" runat="server" Text='<%# Eval("Quantity")%>'  ></asp:TextBox>
            </EditItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="Ship-To">
            <ItemTemplate>
              <asp:Label ID = "shiptolbl" runat="server" Text='<%#Eval("Ship-To") %>'></asp:Label> 
            </ItemTemplate>
            <EditItemTemplate>
               <asp:TextBox ID="shiptoedit" runat="server" Text='<%# Eval("Ship-To")%>'  ></asp:TextBox>
            </EditItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="Requested Date">
            <ItemTemplate>
              <asp:Label ID = "reqdatelbl" runat="server" Text='<%#Eval("Requested Date") %>'></asp:Label> 
            </ItemTemplate>
            <EditItemTemplate>
                <asp:Calendar ID="reqdatecaledit" runat="server" BackColor="White" BorderColor="#3366CC" BorderWidth="1px" CellPadding="1" 
                              DayNameFormat="Shortest" Font-Names="Verdana" Font-Size="8pt" ForeColor="#003399" Height="200px" Width="220px" 
                              ondayrender="reqdatecal_DayRender" ShowGridLines="True">
                              <DayHeaderStyle BackColor="#99CCCC" ForeColor="#336666" Height="1px" />
                              <DayStyle BackColor="White" />
                              <NextPrevStyle Font-Size="8pt" ForeColor="#CCCCFF" />
                              <OtherMonthDayStyle ForeColor="#999999" />
                              <SelectedDayStyle BackColor="#FF9900" Font-Bold="True" ForeColor="#CCFF99" />
                              <SelectorStyle BackColor="#99CCCC" ForeColor="#336666" />
                              <TitleStyle BackColor="#003399" BorderColor="#3366CC" BorderWidth="1px" Font-Bold="True" Font-Size="10pt" ForeColor="#CCCCFF" 
                                          Height="25px" />
                              <TodayDayStyle BackColor="#99CCCC" ForeColor="White" />
                              <WeekendDayStyle BackColor="#CCCCFF" /></asp:Calendar>
            </EditItemTemplate>
          </asp:TemplateField>
          <asp:TemplateField HeaderText="Shipping Method">  
            <ItemTemplate><asp:Label ID="shipmthdlbl" runat="server" Text='<%#Eval("Shipping Method") %>'></asp:Label>   
            </ItemTemplate>              
              <EditItemTemplate>            
                <asp:DropDownList ID="shipmthdedit" runat="server">                
                  <asp:ListItem>FedEx Ground (1-5 Business Days)</asp:ListItem>
                  <asp:ListItem>FedEx 3 Business Days</asp:ListItem>
                  <asp:ListItem>FedEx 2 Business Days</asp:ListItem>
                  <asp:ListItem>FedEx Overnight</asp:ListItem>   
                </asp:DropDownList>    
              </EditItemTemplate>  
            </asp:TemplateField>    
        </Columns>    
    </asp:GridView> 
```

任何想法如何让它在gridview中实际写入行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:46:49.663

我找到了一个解决方案......对于任何对此感兴趣的人来说都是工作代码：

```
DataTable dt = (DataTable)Session["table"]; 
                int iColCount = dt.Columns.Count; 
                for (int i = 0; i < iColCount; i++) 
                { 
                    sw.Write(dt.Columns[i]); 
                    if (i < iColCount - 1) 
                    { 
                        sw.Write(","); 
                    } 
                } 
                sw.Write(sw.NewLine);
                // Now write all the rows.
                foreach (DataRow dr in dt.Rows)        
                {            
                    for (int i = 0; i < iColCount; i++) 
                    {               
                        if (!Convert.IsDBNull(dr[i]))         
                        {      
                            sw.Write(dr[i].ToString());   
                        }            
                        if (i < iColCount - 1)    
                        {                 
                            sw.Write(",");    
                        }           
                    }        
                    sw.Write(sw.NewLine);   
                }       
                sw.Close(); 
```

# tfs - TFS 2012 积压优先级

> ID：12216357
> 
> 赞同：6
> 
> 时间：2012-08-31T13:28:43.813
> 
> 标签：tfs, backlog

我是 TFS 2012 的新手，我想知道是否有人可以提供帮助，这可能是一个愚蠢的问题，但是：

开箱即用的 TFS 中的积压优先级是如何确定的？我可以看到我可以通过拖放来更改优先级，并且值不断变化，但我不确定它们如何或为什么会改变它们的方式。我希望 Business Value 和 Effort 字段值能够推动积压优先级，但这些似乎完全没有关联。有没有办法让这些字段值来驱动积压优先级？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T21:13:05.640

产品待办事项由动态创建的查询支持，该查询过滤状态、工作项类型和区域路径。工作项的顺序是由“顺序字段”。

哪个字段用作“订单字段”，存储在通用配置中。如果您在本地，您可以更改正在使用的字段：http: [//msdn.microsoft.com/en-us/library/tfs/hh739073](http://msdn.microsoft.com/en-us/library/tfs/hh739073(v=vs.110).aspx) (v=vs.110).aspx 。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-08T18:50:22.150

另一种选择是简单地创建您自己的按业务价值和工作量字段排序的查询：

1.  选择查询类型
2.  指定顶级查询过滤条件删除、分组或取消分组查询子句
3.  选择列选项列选项以添加或删除字段。
4.  选择排序选项卡以选择用于对结果进行排序的字段顺序。
5.  运行查询并检查结果
6.  调整您的查询过滤条件

# objective-c - Xcode ！从带有按钮的主视图转到选项卡栏控制器中的特定视图

> ID：12216358
> 
> 赞同：0
> 
> 时间：2012-08-31T13:28:48.340
> 
> 标签：objective-c, xcode, tabbar

我有一个带有 3 个按钮的视图和一个包含 3 个视图的标签栏控制器。我正在使用故事板。我想从我的视图转到标签栏控制器的特定视图。例如，我想按下主视图中的第二个按钮，我想直接转到我的标签栏控制器的第二个选项卡。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:15:08.933

You can programmatically change tabs by inserting the following into you void/IBAction.

```
[self.tabBarController setSelectedIndex:1]; 
```

# windows-server-2008 - 我可以在不安装 .Net Framework 4.5 的情况下安装 MVC4

> ID：12216359
> 
> 赞同：2
> 
> 时间：2012-08-31T13:28:51.570
> 
> 标签：windows-server-2008, asp.net-mvc-4, .net-4.5

如果 DEV 服务器包含 .Net Framework 4.5，我们的服务器团队不想在 DEV 服务器上安装 MVC4。是否安装了 4.5 中没有的 MVC4？

我用谷歌搜索，但没有找到任何确定的结果。

注意：MVC4 Beta 现在在 DEV 服务器上。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:34:29.463

从[MVC 4 的下载页面](http://www.microsoft.com/en-us/download/details.aspx?id=30683)（重点是我的）

> 需要PowerShell 2.0、**.NET 4、ASP.NET 4**和 Visual Studio 2010 SP1 或 Visual Web Developer 2010 SP1 才能使用此功能。

即只需要.Net Framework 4.0 版，而不是4.5。

# c - 为什么我的 pthread 函数没有打印出我所期望的？

> ID：12216367
> 
> 赞同：2
> 
> 时间：2012-08-31T13:29:05.907
> 
> 标签：c, pthreads, printf

我是线程编程的新手，并且正处于学习 C 线程编程的阶段。

这个简单的代码编译并运行，但我认为它会打印出“hello world”和数字 8，但事实并非如此。有人知道这是什么原因吗？

```
void *threadfunc(void *input_data){  
    printf("Hello World");  
    long tid;  
    tid=(long)input_data;  
    printf("thread ID: &d", tid);  
    return NULL;  
    sleep(1);  
}  
int main(){  

    long t = 8;  
    int t1;  
    pthread_t thread_obj;  
    t1= pthread_create(&thread_obj, NULL,threadfunc, (void*)t);  
}* 
```

提前致谢！:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T13:30:51.887

首先，您可能想[`pthread_join`](http://pubs.opengroup.org/onlinepubs/9699919799/functions/pthread_join.html)在某个地方之后打电话`pthread_create`。如果你不这样做并且主线程退出，那么新线程很有可能**没有机会运行**。

换句话说，一旦一个线程`exit`s，它们都会这样做 - 进程不会“等待”其他线程。

* * *

您可能还想在`printf`通话中添加换行符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T13:31:35.907

`main`程序在函数结束时终止。在您调用`pthread_create`. 因此线程没有机会运行。

为了让线程有机会运行，您需要让主函数等待线程完成。通过调用`pthread_join`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:38:49.333

您应该传递局部变量的地址 t t1= pthread_create(&thread_obj, NULL,threadfunc, (void*)&t);

你的线程函数应该是这样的

```
void *threadfunc(void *input_data){  
printf("Hello World");  
long tid;  
tid=*(long *)input_data;  
printf("thread ID: %ld", tid);  
sleep(1);  
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T14:03:03.800

除了其他人所说的（给它一个在终止之前打印一些东西的机会）之外，您正在使用错误的格式说明符进行打印，并且基本上将变量传输到线程错误。尝试

```
tid = *(long*)input_data;  
printf("thread ID: %ld\n", tid); 
```

`&t`并使用而不是调用线程函数`(void*)t`。（`long`不会总是正确地转换为指针。）

# jquery - 跨多个 ajax 调用存储数据

> ID：12216370
> 
> 赞同：0
> 
> 时间：2012-08-31T13:29:17.290
> 
> 标签：jquery, ajax, get

我正在进行 ajax 调用以获取数据库中的所有图像。对于返回的每个图像 id，我调用一个 ajax 函数来获取图像的缩略图。

我有两个数组*img_arr,src_arr*。*img_arr*存储第一次ajax 调用返回的数据，*src_arr*存储第二次ajax 调用的数据。

```
var img_arr=[],src_arr=[];
function get_all_images(){
    $.ajax({
        type: 'GET',
        url: 'get_all_images/',
        success: function(data){
            parsedData = jQuery.parseJSON(data);
            if(parsedData.length!=0){
                for(var i =0;i<parsedData.length;++i){
                    img_arr.push(parsedData[i]);
                    // console.log(img_arr.length);
                    $.ajax({
                        type: 'GET',
                        url: 'get_thumb/'+parsedData[i],
                        success: function(data){
                            src_arr.push(data);
                            //console.log(src_arr.length);
                        }
                    });
                }
            }
        }
    }); 
    console.log(img_arr.length);
    console.log(src_arr.length);
} 
```

但是最后，当我得到两个数组长度的 0 时。但是当我在 ajax 的成功回调中打印长度时，我得到了正确的数组长度。成功回调后有没有办法存储和使用数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:36:07.600

这将是很多服务器端调用，

只是一个想法：您为什么不直接在服务器上获取所有图像及其相关缩略图，然后进行一次 ajax 调用来获取您的图像+拇指？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:50:35.647

当您使用 console.log 访问代码的最后一行时，这些 ajax 调用都没有返回。这就是为什么数组的长度都为零的原因。您的成功函数是一个回调，这意味着代码不会运行，直到 ajax 调用发送到服务器，然后服务器将其响应发送回浏览器。同时，您的代码不会等待，它会继续。所以它发出了一堆请求，但几乎可以肯定的是，它在任何一个请求返回之前就到达了 console.log 行（除非有成百上千个请求）。

无论如何，我同意之前的发帖者，您应该尝试将这些捆绑在一起，而不是提出一堆小请求。当您开始加载它时，您的服务器会感谢您。

# php - 不确定我使用 PHP AJAX 的开发模式

> ID：12216377
> 
> 赞同：3
> 
> 时间：2012-08-31T13:29:44.183
> 
> 标签：php, javascript, model-view-controller, design-patterns

我一直很难理解 MVC、MVP、MVVM 等的完整概念。我什至不确定我是否遵循这些模型中的任何一个，所以我希望你们中的一些人能有所了解。我的应用程序使用 PHP、JS、HTML、CSS、AJAX、MySQL 作为其核心。

**看法**

我知道 HTML/CSS 显然是 View，但有时，我让 PHP 生成 HTML 元素。另外，有时我让 JS 操作 HTML 元素来修改它的 CSS。我的意思是，PHP 在技术上是一种服务器端语言，对吧？那么 PHP 可以生成“视图”元素这一事实是否改变了它在编程模式中的角色？

**处理 AJAX 请求的专用文件**

我有一个 PHP 文件来处理从 JS 发送的所有 AJAX 请求。我传递了一个唯一的 POST 或 GET 参数来区分 AJAX 请求的用途，并且 PHP 文件有一堆 If 语句来处理这些。

```
$req = $_REQUEST['type'];
if($req == 'get_users'){
// do stuff
} 
```

大多数功能是数据库写入和读取。我是否正确地认为这是控制器？

**模型**

我假设模型是我定期调用的一组函数和类？

**概括**

我的主要问题是，一种编程模式是否可以应用于不止一种编程语言，即使一种是客户端，另一种是服务器端。我什至遵循编程模式吗？如果我不是或有点接近一个，如果我没有完全遵循一个模式，这有关系吗？我认为这就是阻碍我的原因，希望大家能帮助我理解。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:54:01.167

> 我知道 HTML/CSS 显然是 View，但有时，我让 PHP 生成 HTML 元素。

视图实际上应该是包含表示逻辑的实例。他们从模型层获取信息，并根据这些信息决定向用户发送什么响应。响应可以只是一个 HTTP 标头，也可以是一个 HTML 文档，该视图由多个模板组合而成。

> 那么 PHP 可以生成“视图”元素这一事实是否改变了它在编程模式中的角色？

这有点涉及到您不能实现经典 MVC（[为 smalltalk](http://www.ics.uci.edu/~redmiles/ics227-SQ04/papers/KrasnerPope88.pdf)定义）的主题，因为视图应该观察模型的变化。这对于网络来说是非常难以实现的，非常不切实际并且根本无法扩展。而对于 web，我们倾向于使用 Model 2 MVC、MVP 和 MVVM 模式，这些模式是受原始 MVC 启发的。还有 HMVC 模式，它实际上与 MVC 无关，但试图解决相同的问题。

所有这些受 MVC 启发的模式在实现表示层的方式上有所不同，这也是视图。在 Model2 MVC 模式中，您有一个*活动视图*，它从模型层请求信息。在 MVP 和 MVVM 中，视图是被动的，通过类似控制器的结构接收数据。

> 大多数功能是数据库写入和读取。我是否正确地认为这是控制器？

如果我明白你的意思，那么：不，不是。

在所有受 MVC 启发的模式中，控制器或类似控制器的结构主要负责更改模型层和视图的状态。在 MVP 和 MVVM 中，它还从模型层请求数据，在 MVVM 中它甚至可以操作它。

但是与存储（可能是也可能不是 SQL 数据库）的交互深埋在模型层中。有一个更长[的帖子](https://stackoverflow.com/a/5864000/727208)，我写的关于这个主题。

> 我假设模型是我定期调用的一组函数和类？

不完全正确。请参阅上面的链接。

> 我什至遵循编程模式吗？

没有代码很难说，但我很有信心，你没有严格遵循任何受 MVC 启发的设计模式。您正在做的是实现某种形式的[SoC](http://en.wikipedia.org/wiki/Separation_of_concerns)，这是 MVC 的核心原则。我会说您正处于 PHP 开发人员真正开始研究 OOP 原则和模式以进一步改进的阶段。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:34:12.273

> 大多数功能是数据库写入和读取。我是否正确地认为这是控制器？

如果是：

1.  根据 URL 决定如何处理请求，然后它就完成了控制器的角色
2.  与数据库交互，应用业务逻辑并返回一些数据，然后它就完成了模型的角色
3.  使用该数据生成 HTML / JSON / XML / 发送给客户端的任何其他内容，然后它正在履行视图的角色

如果它正在执行上述多个操作，那么它就是不同角色的大杂烩，您应该考虑将您的关注点分开。

> 我假设模型是我定期调用的一组函数和类？

模型是与您的数据交互并执行业务逻辑的代码。

> 我的主要问题是，一种编程模式是否可以应用于不止一种编程语言，即使一种是客户端，另一种是服务器端。

是的。

您可以让客户端 JavaScript 编辑 DOM（视图），根据用户输入（控制器）决定做什么，并使用 XMLHttpRequest 从服务器（模型）获取数据。

然后，您可以让 PHP 为该 JS（视图）生成 JSON，根据来自 JS（控制器）的请求中的数据来决定要做什么，并与数据库交互以获取响应的数据（模型）。

> 我什至遵循编程模式吗？

听起来您可能正在遵循[上帝的反模式](http://en.wikipedia.org/wiki/God_object)，但您只是简要概述了您在做什么。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:51:24.337

`I mean, PHP is technically a server-side language right?`

是的，没错。（虽然它可以在本地使用，但它甚至可以编译生成桌面应用程序二进制文件等。）

`So does the fact that PHP can generate "View" elements change its role in the programming pattern?`

不，核心“视图”概念是它与应用程序其他部分的**分离。**理想情况下，“视图”层中不会有任何业务逻辑、数据库查询等。例如：首先，你做所有的计算和操作。作为最后一步，您将结果转换为“视图”以供输出（如 HTML、XML 或 JSON...） 您没有将“echo”语句与 SQL 查询混合在一起。

`Do I have it right that this is the controller?`

在您的描述中，我们有两个不同的东西：一个可以称为“路由器” - 您可以在其中根据 HTTP 请求确定要调用的函数/方法。

在这种情况下，“控制器”就是那些函数，它们依次调用数据库读/写函数和视图构建函数。控制器与模型交互，并传递输出。它是应该与数据库交互的模型。

`I am assuming that the model is the set of functions and classes I call periodically?`

模型通常是读取和写入数据库的一组函数。这是主要的现实世界用法。但这**不是**“模型”的定义——它只是最常见的形式。

例如：如果您有一家销售产品的虚拟商店。然后，您将拥有一个“产品”模型，即处理将新产品插入数据库、更新产品信息、计算其价格以及您可能想要在“产品”中执行的所有其他操作的类”。这些方法必须在任何控制器、任何路由、任何视图中工作——这是模式分离/责任组织的一个目标。您应该能够使用相同的商店模型创建一个全新的前端网站。

`whether or not a programming pattern can apply to more than one programming language even though one is client-side and another is server-side.`

是的。我们在一个应用程序中使用许多不同的语言：HTML、JavaScript、PHP、SQL 等等。整个应用程序可以遵循一组模式。每种语言都可用于在模式中执行一个或多个角色。

`Am I even following a programming pattern? If I am not or am somewhat close to one, does it matter if I am not following a pattern exactly?`

**是**的，你是。我认为，即使你没有它的名字，即使你遵循“你自己的模式”，你肯定会遵循一些模式，否则你将无法构建你的应用程序。这种模式可以是 MVC、ABC、XYZ、CSM 或其他。当然，如果您学习了这些概念，您就可以使用这些概念与其他开发人员讨论您的应用程序代码。学习当然是一件好事，但是...

**不**，如果您没有完全遵循模式，那“没关系”。您最终可能会创建一个新的、增强的、更好的模式！有时担心适应某种模式可能会破坏你的创造力。不要过度担心它。

说了这么多，我认为你做对了，想知道、理解甚至掌握这些模式及其概念。MVC 是程序员理解的重要内容。一位好老师可以提供帮助。阅读好书和文章。SO的问题和答案。一些谷歌研究......而且，最重要的是，编码经验。如果你有一个实际的**目标**要达到，一个可以编写代码的应用程序，并在实践中应用你学到的东西，你就会逐渐理解它们。

# java - Eclipse中的动态Spring AOP？

> ID：12216379
> 
> 赞同：3
> 
> 时间：2012-08-31T13:29:50.010
> 
> 标签：java, spring, aop, aspectj, spring-aop

我正在使用 Eclipse Juno IDE。

我有一个java应用程序。

在程序中我有这些类： Team.java Player.java 现在我允许用户向球队添加一个新球员，用户给我球员数据。每个玩家都有一个日志文件。

现在，当玩家被添加到团队中时，会发生“玩家被添加到团队中”的事件，我想要做的是记录这个事件并将发生的事情写入玩家的日志文件中。

我想用 Spring AOP 处理那些日志记录问题。那么怎么做呢？

我看到的所有示例都与 applicationContext.xml 文件一起使用。如果玩家是动态创建的，我需要在这个文件中写什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:55:16.260

虽然有些教程让您相信 Spring 用于定义值对象之间的依赖关系，例如`House`bean 具有依赖关系`Door`和`Heating`bean 等 - 典型的 Spring 应用程序不是这样构建的。Beans 通常用于声明无状态的单例服务，一劳永逸。引导后没有太多动态的东西。

但是，您*可以*在示例中使用 Spring。只需将 player 定义为原型，惰性初始化 bean：

```
<bean class="Player" scope="prototype" lazy-init="true"/> 
```

每次你需要一个新的`Player`时，向容器询问它：

```
applicationContext.getBean(Player.class); 
```

返回的 bean 将是功能齐全的 Spring bean，除了 Spring 不会调用`@PreDestroy`回调。但是 AOP 会起作用。

# c++ - 将派生类对象传递给模板类的构造函数

> ID：12216381
> 
> 赞同：1
> 
> 时间：2012-08-31T13:29:56.687
> 
> 标签：c++

大家好！

我的问题如下：

我有一个模板类，它存储指向其他类的方法的指针（当然模板类最初不知道要传递给它的类的类型）。我使模板类的构造函数获取一个指向传入类的指针，另一个参数是我要存储的传入类的方法的地址，如下所示：

```
 template <typename MyClass>
    TemplateClass
    {
    typedef void (MyClass::*MethodPointer)();
    MyClass* theClass;
    MethodPointer methodPointer;
public:
    TemplateClass(MyClass* cl, MethodPointer func) : theClass(cl), methodPointer(func){}

    void Excute()
    {
        return (theClass->*methodPointer)();
    }
    }; 
```

然后，我创建了一个基类，并从中派生了一个子类。

```
 class BaseClass
    {
        // other details are omitted...
        virtual void DoSomething();
    };

    class DerivedClass : public BaseClass
    {
        // other details are omitted...
        void DoSomething();
    };

    // the definitions of the methods is omitted because it had no relevance to the issue 
```

然后，我做了一个模板类的typedef，以基类为参数，例如：

```
 typedef TemplateClass<BaseClass> TypedTemplateClass; 
```

然后，当我尝试将派生类的指针传递给 TypedTemplateClass 的构造函数时，编译器说它无法将派生类的参数转换为基类，如下所示：

```
 DerivedClass* myDerivedObject = new DerivedClass();
    TypedTemplateClass* myTemplateObject = new TypedTemplateClass(myDerivedObject, &DerivedClass::DoSomething); 
```

但是，如果我传递基类本身的对象，一切正常！如下：

```
 BaseClass* baseObject = new BaseClass();
    TypedTemplateClass* myTemplateObject2 = new TypedTemplateClass(baseObject, &BaseClass::DoSomething); 
```

那么，有人可以启发我解决这个问题吗？我知道问题在于类型化的模板类需要一个基类对象，但我需要传递派生类对象 - 因为我打算制作不同的派生类并能够将它们的方法多态地传递给模板类. 我也知道我可以忽略 TypedTemplateClass 定义，只创建模板类对象，每个对象都具有不同的派生类类型。但是，上述提议是我的意图。

我正在使用 Visual Studio IDE

提前感谢您的关注和帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:47:28.080

问题是您不能将指向方法的指针从派生类型的指向方法的指针转换为基类型的指向方法的指针，因为指向方法的*指针*与对象类型。

考虑：

```
Base instance;
void (Base::*pmethod)();
pmethod = &Base::doSomething;
(instance.*pmethod)();    // OK 
```

如果你被允许写作

```
pmethod = &Derived::doSomethingElse; 
```

然后你可以使用`pmethod`来调用`Derived::doSomethingElse`一个`instance`类型`Base`。

在[Liskov 的替换原则](http://en.wikipedia.org/wiki/Liskov_substitution_principle)下，Derived 对象（引用）是 Base 对象（引用），因为您可以对 Base 做的任何事情都可以对 Derived 做，但指向方法的指针不是-一个指向基方法的指针；事实上，它是相反的（指向方法的指针是指向方法的指针），这就是为什么我们说指向方法的指针是逆变的：

```
void (Derived::*pmethod)() = &Base::doSomething; 
```

在您的情况下，最好的选择可能是编写模板构造函数并使用类型擦除来隐藏 Derived 方法指针的类型；在下面的

```
template<typename T>
TemplateClass(T *instance, void (T::*pmethod)()); 
```

构造函数类型中的两个`T`s可以相互抵消，给出函数签名`void ()`。您可以与`std::function<void ()>`成员一起执行此操作：

```
Base *instance;
std::function<void ()> type_erased_method;

template<typename T>
TemplateClass(T *instance, void (T::*pmethod)()):
    instance(instance),
    type_erased_method(std::bind(pmethod, instance))
{
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:11:30.630

这是什么意思：`TemplateClass(MyClass* class, &MyClass::SomeMethod);`它不是有效的 C++ 代码。为什么不坚持使用 C++ 标准库？如果您需要存储可调用对象，请使用`std::function`从 lambda 构造的。编译器和库将负责所有必要的转换......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T15:10:39.560

嗯，我从事的项目是一个试验，试图在 C++ 中创建一种类似的事件处理机制——或多或少类似于 C# 事件和事件处理程序的方式。于是，在网上查阅了一些资料，找到了合适的方法后，我写了两个模板类：一个是为成员方法存储一个指针，并称之为'EventHandler'。另一种是存储事件处理程序的映射并在需要时调用它们；这是“事件”类。然后我写了两个“普通”类：一个是事件触发类，另一个是响应类或监听类。Event 和 EventHandler 类的初始版本如下：

```
#include <functional>

namespace eventhandling
{
#ifndef __BASIC_EVENT_HANDLER__
#define __BASIC_EVENT_HANDLER__

////////////////////////////////////////////////////////////////////////////
// the root event handler class
////////////////////////////////////////////////////////////////////////////
template <typename empty = int, empty = 0>
class BaseEventHandler
{
public:
    virtual void Excute() = 0;
};

///////////////////////////////////////////////////////////////////////////
// the basic derived event handler class; the class which will wrap the
// methods of other classes which want to respond to specific event(s)..
///////////////////////////////////////////////////////////////////////////
template <typename ResponderType>
class EventHandler : public BaseEventHandler < >
{
    typedef void (ResponderType::*MethodPointer());

    ResponderType* responder;
    MethodPointer methodPointer;

public:
    EventHandler(ResponderType* resp, MethodPointer func) : responder(resp), methodPointer(func)
    {}

    void Excute()
    {
        return methodPointer();
    }
};

#endif
}

#include "BasicEventHandler.h"
#include <map>

namespace eventhandling
{
#ifndef __BASIC_EVENT__
#define __BASIC_EVENT__

////////////////////////////////////////////////////////////////////////////////////////////////
// the event class which will receive these event handlers, stores them in a map object,
// and call them squentially when invoked from within the event firing method...
////////////////////////////////////////////////////////////////////////////////////////////////

// the template takes no parameters, so I added an empty parameter, just because
//it cannot ignore the parameter list, otherwise it will be considered template specialization
template <typename empty = int, empty = 0>
class BasicEvent
{
    //store the eventhandlers in a map so that I can track them from outside the class by id
    typedef std::map<int, BaseEventHandler<empty>* > Responders;
    Responders responders;
    int respondersCount;

public:
    BasicEvent() : respondersCount(0)
    {}

    // classical add method templatized so that it accepts any object
    template <typename Responder>
    int Add(Responder* sender, void (Responder::*memberFunc)())
    {
        responders[respondersCount] = (new EventHandler<Responder>(sender, memberFunc));
        respondersCount++;
        return respondersCount - 1;
    }

    // simple method to clean up the map memory after done with the eventhandlers
    void Remove(int responderID)
    {
        Responders::iterator it = responders.find(responderID);
        if (it == responders.end())
            return;
        delete it->second;
        responders.erase(it);
    }

    // method which invokes all the eventhandlers alltogether without control from the outside
    void Invoke()
    {
        Responders::iterator it = responders.begin();
        for (; it != responders.end(); ++it)
        {
            it->second->Excute();
        }
    }

    // method which invokes only the eventhandler whose id has been passed to it
    void Invoke(int id)
    {
        Responders::iterator it = responders.find(id);
        if (it != responders.end())
            it->second->Excute();
    }

    // overloaded operator+= to replace the functionality of method Add()
    template <typename Responder>
    void operator+=(EventHandler<Responder>* eventhandler)
    {
        responders[respondersCount] = eventhandler;
        respondersCount++;
    }

    // overloaded operator -= to replace the functionality of method Remove()
    void operator-=(int id)
    {
        Responders::iterator it = responders.find(id);
        if (it == responders.end())
            return;
        delete it->second;
        responders.erase(it);
    }

    //simple method which gives the size of the map object
    int Size()
    {
        return respondersCount;
    }
};
#endif
} 
```

然后，我想在创建一个新的 EventHandler 对象时摆脱显式的 '<…..>' 模板语法，这显然是 C# 中的情况，所以，我将其简单如下：

```
 typedef EventHandler<MyClass> SomeEventFired_EventHandler; 
```

这样当我需要创建这个模板的新对象时，我只需要编写：

```
 MyClass* myObject = new MyClass();
    MyEventFiringClass* firingObject = new MyEventFiringClass();
    firingObject->OnFired += new SomeEventFired_EventHandler(myObject, &MyClass::SomeMethod); 
```

当然，后面的完整代码示例会更清楚！我的问题来了，我希望能够传递 MyClass 的派生类的对象。问题是如上所示的 EventHandler 的模板不接受这样的派生对象，因为它只期望基类的对象，编译器抱怨它无法从派生类转换为基类。当他向我展示了使 EventHandler 类的构造函数模板化的正确方法时，ecatmur 提供了宝贵的帮助。这样，当我使用 MyClass 作为基类键入定义的 SomeEventFired_EventHandler 时，我就能够将任何对象及其方法传递给它的构造函数，只要该对象来自从 MyClass 派生的类。这是我实现 EventHandler 多态特性的最终目标。我想要这个特性，因为如果你检查 C# 中的 EventHandlers，你会看到 System::EventHandler 是多态的，它接受来自类的不同对象，这些对象基本上是从类 Object 派生的，我猜。所以，这里是完整的例子，带有基于 ecatmur 解决方案的整改 EventHandler 类，供大家查看，希望对您有所帮助。最终，您可以从 BaseEventHandler 类派生，以便派生的 EventHandler 可以存储具有不同返回类型和不同参数参数的方法，因为这里显示的基本方法接受返回 void 和取 void 的方法（我相信您可以这样做更改 std::function<> 的声明

```
std::function<int(int)> 
```

，等等）。

事件类同上……</p>

```
#include <functional>

namespace eventhandling
{
#ifndef __BASIC_EVENT_HANDLER__
#define __BASIC_EVENT_HANDLER__

////////////////////////////////////////////////////////////////////////////
// the root event handler class
////////////////////////////////////////////////////////////////////////////
template <typename empty = int, empty = 0>
class BaseEventHandler
{
public:
    virtual void Excute() = 0;
};

///////////////////////////////////////////////////////////////////////////
// the basic derived event handler class; the class which will wrap the
// methods of other classes which want to respond to specific event(s)..
///////////////////////////////////////////////////////////////////////////
template <typename ResponderType>
class EventHandler : public BaseEventHandler < >
{
    std::function<void ()> type_erased_method;
    ResponderType* responder;

public:

    template<typename T>
    EventHandler(T* resp, void (T::*MethodPointer)()) : responder(resp), type_erased_method(std::bind(MethodPointer, resp))
    {}

    void Excute()
    {
        return type_erased_method();
    }
};

#endif
} 
```

事件触发类头文件……</p>

```
#include <iostream>
#include <string>
#include "BasicEvent.h"

namespace eventhandling
{
#ifndef __FONT_SIMULATOR__
#define __FONT_SIMULATOR__

typedef BasicEvent<> FontEvent;
typedef std::string s;

class FontSimulator
{

private:
    s fontName;
    s fontSize;
    s fontStyle;
public:
    FontSimulator();
    FontSimulator(s name, s size, s style);
    ~FontSimulator();

    FontEvent OnDraw;

    void DrawText();

    // the setting methods
    void SetFontName(s n) {fontName = n;}
    void SetFontSize(s si) {fontSize = si;}
    void SetFontStyle(s st) {fontStyle = st;}

    // the getting methods
    s GetFontName() {return fontName;}
    s GetFontSize() {return fontSize;}
    s GetFontStyle() {return fontStyle;}
};
#endif
} 
```

它的源文件，.cpp

```
#include "FontSimulator.h"

using namespace eventhandling;

FontSimulator::FontSimulator() : fontName("Default Name"), fontSize ("Default Size"), fontStyle("Default Style")
{
}

FontSimulator::FontSimulator(s fName, s fSize, s fStyle) : fontName(fName), fontSize(fSize), fontStyle(fStyle)
{
}

FontSimulator::~FontSimulator()
{
delete this;
}

void FontSimulator::DrawText()
{
std::cout << "Initialization of font done!" << std::endl << std::endl;
std::cout << fontName << std::endl;
std::cout << fontSize << std::endl;
std::cout << fontStyle << std::endl << std::endl;

for (int i = 0; i < OnDraw.Size(); ++i)
{
    OnDraw.Invoke(i);
    std::cout << "the #" << i + 1 << " responder method called!" << std::endl << std::endl;
    std::cout << fontName << std::endl;
    std::cout << fontSize << std::endl;
    std::cout << fontStyle << std::endl << std::endl;
}
for (int j = 0; j < OnDraw.Size(); j++)
{
    //OnDraw.Remove(j);
    OnDraw -= j;
}

        std::cout << "The finishing font work after all the event handler are called!" << std::endl <<std::endl;
   } 
```

处理字体类事件的抽象基类……</p>

```
#include "BasicEventHandler.h"

namespace eventhandling
{
#ifndef __IFONT_CLIENT__
#define __IFONT_CLIENT__

class IFontClient
{
public:
    IFontClient(){};
    ~IFontClient(){delete this;}
    virtual void SetupFont() = 0;
};

typedef EventHandler<IFontClient> FontEventHandler;

#endif
} 
```

先从 IFontClient... 头文件派生的类

```
#include "BasicEventHandler.h"
#include "BasicEvent.h"
#include "FontSimulator.h"
#include "IFontClient.h"

namespace eventhandling
{
#ifndef __CONTROL_SIMULATOR__
#define __CONTROL_SIMULATOR__

class ControlSimulator : public IFontClient
{
protected:
    std::string caption;
    FontSimulator* font;

public:
    ControlSimulator();
    ControlSimulator(std::string theCaption, FontSimulator* theFont);
    ~ControlSimulator();

    virtual void Draw();
    virtual void SetupFont();

    void SetCaption(std::string c) {caption = c;}
    std::string GetCaption() {return caption;}
};

#endif
} 
```

它的源文件 .cpp

```
#include "ControlSimulator.h"

namespace eventhandling
{
ControlSimulator::ControlSimulator() : caption("Default Caption"), font(new FontSimulator())
{
}

ControlSimulator::ControlSimulator(std::string c, FontSimulator* f) : caption(c), font(f)
{
}

ControlSimulator::~ControlSimulator()
{
    delete this;
}

void ControlSimulator::Draw()
{
    std::cout << "Drawing " << caption << " is done!" << std::endl << std::endl;
}

void ControlSimulator::SetupFont()
{
    std::string costumProperty = caption;
    font->SetFontName(costumProperty.append(", Costumized Font Name"));

    costumProperty = caption;
    font->SetFontSize(costumProperty.append(", Costumized Font Size"));

    costumProperty = caption;
    font->SetFontStyle(costumProperty.append(", Costumized Font Style"));
}
} 
```

测试应用程序的主要入口

```
#include "ControlSimulator.h"

using namespace eventhandling;

int main(int argc, char** argv)
{
char c;

FontSimulator* font = new FontSimulator();
ControlSimulator* control1 = new ControlSimulator("Control one", font);
ControlSimulator* control2 = new ControlSimulator("Control two", font);

control1->Draw();
control2->Draw();

font->OnDraw += new FontEventHandler(control1, &ControlSimulator::SetupFont);
font->OnDraw += new FontEventHandler(control2, &ControlSimulator::SetupFont);

font->DrawText();

std::cout << "Enter any character to exit!" << std::endl;
std::cin >> c;

return 0;
} 
```

# android - 如何避免 googlemap api Javascript-phonegap 的运行时加载？

> ID：12216382
> 
> 赞同：0
> 
> 时间：2012-08-31T13:29:56.227
> 
> 标签：android, ios, google-maps, cordova, google-maps-api-3

我正在创建一个 phonegap 应用程序，它使用谷歌地图来显示方向和用户位置。我通过添加使用了默认的 google api

```
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script> 
```

我观察到这会导致应用程序初始化速度变慢，如果移动设备上的连接速度很慢，有时甚至会崩溃。我知道除非加载所有脚本，否则该应用程序将无法启动。

我尝试从网址[http://maps.google.com/maps/api/js?sensor=false](http://maps.google.com/maps/api/js?sensor=false)下载 JavaScript并在本地存储，但这有时会导致地图加载失败。

是否有可以存储在应用程序本身中的等效脚本？或者我们可以在加载应用程序后延迟加载脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:31:42.510

您可以异步加载 API，就像在[**此示例**](https://google-developers.appspot.com/maps/documentation/javascript/examples/map-simple-async)中所做的那样。像这样，您可以在您的 javascript 中决定何时加载它（调用 loadScript()），然后初始化地图。

请注意，该示例使用回调参数，它是 API 加载完成时要调用的函数的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-28T11:56:19.240

您可以使用java script 异步处理。此方法基于回调响应。

谷歌地图 javascript api 提供异步加载[链接](https://developers.google.com/maps/documentation/javascript/examples/map-simple-async)

```
function initialize() {
  var mapOptions = {
    zoom: 8,
    center: new google.maps.LatLng(-34.397, 150.644)
  };

  var map = new google.maps.Map(document.getElementById('map-canvas'),
      mapOptions);
}

function loadScript() {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src = 'http://maps.google.com/maps/api/js?sensor=true&callback=initialize';
  document.body.appendChild(script);
}

window.onload = loadScript; 
```

# javascript - 是否可以在 JavaScript 中包含 HTML 代码？

> ID：12216391
> 
> 赞同：9
> 
> 时间：2012-08-31T13:30:36.143
> 
> 标签：javascript, html

我有一个基本问题，我可以在 JS 中包含 HTML 代码吗？（与`document.write`）

这是我的 HTML 代码：

```
<li><a href="#" class="menulink">text</a></li>
<li><a href="#" class="menulink">text</a></li>
<li>
  <a href="#" class="menulink">text</a>
  <ul>
    <li>
      <a href="#" class="sub">text</a>
      <ul>
        <li class="topline"><a href="#">text</a></li>
        <li><a href="#">text</a></li>
        <li><a href="#">text</a></li>
        <li><a href="#">text</a></li>
        <li><a href="#">text</a></li>
        <li><a href="#">text</a></li>
        <li><a href="#">text</a></li>
      </ul>
    </li>
    <li>
      <a href="#" class="sub">text</a>
      <ul>
        <li class="topline"><a href="#">text</a></li>
        <li><a href="#">text</a></li>
      </ul>
    </li>

    <li>
      <a href="#" class="sub">text</a>
    </li>
    <li>
      <a href="#" class="sub">text</a>
    </li>
  </ul>
</li>

<li>
  <a href="#" class="menulink">text</a>
</li>
<li><a href="#" class="menulink">text</a></li> 
```

我想将它包含在这个 JS 代码中：

```
window.onload = function () {
  document.getElementById("menu").innerHTML="";
} 
```

通过以下代码连接它：

```
<p id="dropdown_menu"></p> 
```

我该怎么做？

*完整的代码在这里* [http://jsfiddle.net/tsnave/eSgWj/4/](http://jsfiddle.net/tsnave/eSgWj/4/) 谢谢..

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T13:37:35.610

另一种方法是将 HTML 放入脚本标记中：

```
<script type="text/template" id="myHtml">
    <li class="topline"><a href="#">some text</a></li>
    <li><a href="#">some text </a></li>
    <li><a href="#">some text</a></li>
    <li><a href="#">some text</a></li>
    <li><a href="#"some text</a></li>
    <li><a href="#">some text</a></li>
    <li><a href="#">some text</a></li>
</script> 
```

然后你可以把它变成 Javascript 使用

```
var myHtml = document.getElementById('myHtml').innerHTML; 
```

或使用可以帮助您解决此问题的几个库之一。`type="text/template"`浏览器不会解释或显示脚本标记内的代码。与将其直接放入 Javascript 中的字符串相比，这种方法的优势在于它允许您在编辑器中继续将其视为普通 HTML，并保持 Javascript 干净。另请参阅[John Resig 的这篇文章](http://ejohn.org/blog/javascript-micro-templating/)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-31T13:32:25.860

> 我可以在 JS 中包含 HTML 代码吗？

如果你的意思是你可以通过javascript输出HTML，那么答案是肯定的，例如

```
window.onload = function() {
    document.getElementById("menu").innerHTML = '<li class="topline"><a href="#">some text</a></li>  
                <li><a href="#">some text </a></li>  
                <li><a href="#">some text</a></li>  
                <li><a href="#">some text</a></li>  
                <li><a href="#"some text</a></li>  
                <li><a href="#">some text</a></li>  
                <li><a href="#">some text</a></li>';
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T13:31:43.483

```
document.getElementById("menu").innerHTML='
    <li class="topline"><a href="#">some text</a></li>
    <li><a href="#">some text </a></li>
    <li><a href="#">some text</a></li>
    <li><a href="#">some text</a></li>
    <li><a href="#"some text</a></li>
    <li><a href="#">some text</a></li>
    <li><a href="#">some text</a></li>
'; 
```

我所做的只是将引号切换为单引号，这样 HTML 属性就不会弄乱字符串。如果您确实需要在`innerHtml`字符串中添加单引号，则可以使用反斜杠对其进行转义，即：`innerHtml = ' Don\'t break me'`;

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T13:32:03.007

你可以做：

```
document.getElementById("menu").innerHTML="<div>hello</div>" 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T13:33:04.973

```
window.onload = function(){
    document.getElementById("menu").innerHTML='<li class="topline"><a href="#">some text</a></li><li><a href="#">some text </a></li><li><a href="#">some text</a></li><li><a href="#">some text</a></li><li><a href="#"some text</a></li><li><a href="#">some text</a></li><li><a href="#">some text</a></li>';
} 
```

编辑：

它应该工作。

```
<script type="text/javascript">
window.onload = function(){
    document.body.innerHTML = 
        '<li><a href="#" class="menulink">text</a></li>'
        +'<li><a href="#" class="menulink">text</a></li>'
        +'<li><a href="#" class="menulink">text</a><ul>'
        +'<li><a href="#" class="sub">text</a><ul>'
        +'<li class="topline"><a href="#">text</a></li>'
        +'<li><a href="#">text </a></li><li><a href="#">text</a></li>'
        +'<li><a href="#">text</a></li><li><a href="#">text</a></li>'
        +'<li><a href="#"text</a></li><li><a href="#">text</a></li></ul>'
        +'</li><li><a href="#" class="sub">text </a><ul>'
        +'<li class="topline"><a href="#">text</a></li>'
        +'<li><a href="#">text</a></li></ul></li>'
        +'<li><a href="#" class="sub">text</a></li>'
        +'<li><a href="#" class="sub">text</a></li>'
        +'</ul></li><li><a href="#" class="menulink">text</a></li>'
        +'<li><a href="#" class="menulink">text</a>';

} 
```

# php - .htaccess 匹配任何内容并发送到 PHP 文件

> ID：12216398
> 
> 赞同：3
> 
> 时间：2012-08-31T13:31:09.473
> 
> 标签：php, .htaccess

我的正则表达式尝试匹配所有结果并重定向到页面。我想将请求的地址发送到页面：

```
RewriteRule ^/[\w\W]*$ processor.php [R,NC,L] 
```

例如，我的地址是：

```
www.mywebsite.com/mySecretCode123 
```

我希望我的 php 文件能够读取它：

```
<?php echo $mySecretCode123; /* outputs 'mySecretCode123' */ ?> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:33:49.047

.htaccees

```
# RewriteCond is condition - make rewrite only if file doesn't exists
# (.+) means "any character, one or more"
RewriteCond  %{REQUEST_FILENAME} !-f 
RewriteRule ^(.+)$ processor.php?mySecretCode=$1 
```

PHP

```
<?php echo $_GET['mySecretCode']; ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:48:32.507

通过启用 mod_rewrite 和 .htaccess `httpd.conf`，然后将此代码放在您`.htaccess`的`DOCUMENT_ROOT`目录下：

```
Options +FollowSymLinks -MultiViews
# Turn mod_rewrite on
RewriteEngine On
RewriteBase /

# If the request is not for a valid directory
RewriteCond %{REQUEST_FILENAME} !-d
# If the request is not for a valid file
RewriteCond %{REQUEST_FILENAME} !-f
# If the request is not for a valid link
RewriteCond %{REQUEST_FILENAME} !-l

RewriteRule ^(.+)$ processor.php?$1=$1 [L,QSA] 
```

# visual-studio-2010 - 使用 cmake nmake 生成器编译，但不使用 cmake Visual Studio 生成器编译。模板实例化链接错误

> ID：12216407
> 
> 赞同：0
> 
> 时间：2012-08-31T13:31:36.203
> 
> 标签：visual-studio-2010, templates, visual-c++, cmake, nmake

我致力于将 Linux C++ 项目移植到 Windows。构建系统是 cmake (2.8)。我使用 nmake 生成器（Visual C++ 10）成功构建了它，但它的调试版本没有启动（参见问题 12215163），然后我想在 Visual Studio 下尝试它，但这里构建在链接时失败，没有找到模板实例化从一个DLL。

您会在下面找到 nmake 和 Visual Studio 构建的输出 请注意，我尝试了显式模板实例化，但没有任何区别。

CMake 和 nmake 生成器 (Visual C++ 10, x64, build type = Debug)：它编译

```
c:\PROGRA~2\MICROS~2.0\VC\bin\amd64\cl.exe    /Zc:wchar_t- /EHsc /GR /D_DEBUG /MDd /Zi /Ob0 /Od /RTC1 -IE:\Projets\Amose\Sources\lima_linguisticprocessing\src -IC:\Qt\v4.8.2\include -IC:\Qt\v4.8.2\include\QtXmlPatterns -IC:\Qt\v4.8.2\include\QtXml -IC:\Qt\v4.8.2\include\QtCore -IC:\PROGRA~1\boost\BOOST_~1\include -Ic:\amose-debug\include    -D WIN32 -Dlima_lp_analysisdict_EXPORTS -DQT_DLL -DQT_XMLPATTERNS_LIB -DQT_XML_LIB -DQT_CORE_LIB -DBOOST_ALL_DYN_LINK -DLIMA_ANALYSISDICT_EXPORTING -DQT_DEBUG /TP /FoCMakeFiles\lima-lp-analysisdict.dir\FsaAccessResource.cpp.obj /FdC:\amose-vcbuild\lima-lp-debug\src\linguisticProcessing\core\AnalysisDict\lima-lp-analysisdictd.pdb -c E:\Projets\Amose\Sources\lima_linguisticprocessing\src\linguisticProcessing\core\AnalysisDict\FsaAccessResource.cpp

"C:\Program Files (x86)\CMake 2.8\bin\cmake.exe" -E vs_link_dll c:\PROGRA~2\MICROS~2.0\VC\bin\amd64\link.exe  @CMakeFiles\lima-lp-analysisdict.dir\objects1.rsp  /out:lima-lp-analysisdictd.dll /implib:lima-lp-analysisdictd.lib /pdb:C:\amose-vcbuild\lima-lp-debug\src\linguisticProcessing\core\AnalysisDict\lima-lp-analysisdictd.pdb /dll /version:1.0  /STACK:10000000 /machine:x64  /debug /INCREMENTAL -LIBPATH:C:\PROGRA~1\boost\BOOST_~1\lib -LIBPATH:c:\amose-debug\lib lima-common-factory.lib lima-common-misc.lib lima-common-data.lib lima-common-fsaaccess.lib lima-common-mediaticdata.lib lima-common-time.lib lima-common-xmlconfigurationfiles.lib lima-common-processunitframework.lib lima-common-mediaprocessors.lib ..\LinguisticProcessors\lima-lp-linguisticprocessorsd.lib ..\LinguisticResources\lima-lp-linguisticresourcesd.lib "C:\Program Files\boost\boost_1_50\lib\boost_regex-vc100-mt-gd-1_50.lib" "C:\Program Files\boost\boost_1_50\lib\boost_filesystem-vc100-mt-gd-1_50.lib" "C:\Program Files\boost\boost_1_50\lib\boost_program_options-vc100-mt-gd-1_50.lib" "C:\Program Files\boost\boost_1_50\lib\boost_system-vc100-mt-gd-1_50.lib" "C:\Program Files\boost\boost_1_50\lib\boost_thread-vc100-mt-gd-1_50.lib" "C:\Program Files\boost\boost_1_50\lib\boost_unit_test_framework-vc100-mt-gd-1_50.lib" C:\Qt\v4.8.2\lib\QtXmlPatternsd4.lib C:\Qt\v4.8.2\lib\QtXmld4.lib C:\Qt\v4.8.2\lib\QtNetworkd4.lib C:\Qt\v4.8.2\lib\QtCored4.lib lima-common-misc.lib lima-common-data.lib lima-common-mediaticdata.lib ..\LinguisticProcessors\lima-lp-linguisticprocessorsd.lib lima-common-factory.lib lima-common-time.lib lima-common-xmlconfigurationfiles.lib lima-common-processunitframework.lib lima-common-mediaprocessors.lib lima-common-qslog.lib "C:\Program Files\boost\boost_1_50\lib\boost_regex-vc100-mt-gd-1_50.lib" "C:\Program Files\boost\boost_1_50\lib\boost_filesystem-vc100-mt-gd-1_50.lib" "C:\Program Files\boost\boost_1_50\lib\boost_program_options-vc100-mt-gd-1_50.lib" "C:\Program Files\boost\boost_1_50\lib\boost_system-vc100-mt-gd-1_50.lib" "C:\Program Files\boost\boost_1_50\lib\boost_thread-vc100-mt-gd-1_50.lib" "C:\Program Files\boost\boost_1_50\lib\boost_unit_test_framework-vc100-mt-gd-1_50.lib" C:\Qt\v4.8.2\lib\QtXmlPatternsd4.lib C:\Qt\v4.8.2\lib\QtXmld4.lib C:\Qt\v4.8.2\lib\QtNetworkd4.lib C:\Qt\v4.8.2\lib\QtCored4.lib kernel32.lib user32.lib gdi32.lib winspool.lib shell32.lib ole32.lib oleaut32.lib uuid.lib comdlg32.lib advapi32.lib 
```

CMake 和 Visual Studio 生成器（Visual C++ 10、x64、调试）：链接失败

```
 cl /c /IE:/Projets/Amose/Sources/lima_linguisticprocessing/src /IC:/Qt/v4.8.2/include /IC:/Qt/v4.8.2/include/QtXmlPatterns /IC:/Qt/v4.8.2/include/QtXml /IC:/Qt/v4.8.2/include/QtCore /I"C:/Program Files/boost/boost_1_50/include" /IC:/Program /IE:/Projets/Amose/Sources/lima_linguisticprocessing/Files/amosecommon/include /I"C:/amose-vc/include" /Zi /W1 /WX- /Od /Ob0 /D _DEBUG /D WIN32 /D QT_DLL /D QT_XMLPATTERNS_LIB /D QT_XML_LIB /D QT_CORE_LIB /D BOOST_ALL_DYN_LINK /D LIMA_ANALYSISDICT_EXPORTING /D QT_DEBUG /D "CMAKE_INTDIR=\"Debug\"" /D lima_lp_analysisdict_EXPORTS /D _WINDLL /D _MBCS /Gm- /EHsc /RTC1 /MDd /GS /fp:precise /Zc:wchar_t- /Zc:forScope /GR /Fo"lima-lp-analysisdict.dir\Debug\\" /Fd"C:/amose-vcbuild/lima-lp-vc/src/linguisticProcessing/core/AnalysisDict/Debug/lima-lp-analysisdictd.pdb" /Gd /TP /errorReport:prompt E:\Projets\Amose\Sources\lima_linguisticprocessing\src\linguisticProcessing\core\AnalysisDict\FsaAccessResource.cpp 
```

（Visual Studio 中不显示链接命令行）

```
Création de la bibliothèque C:/amose-vcbuild/lima-lp-vc/src/linguisticProcessing/core/AnalysisDict/Debug/lima-lp-analysisdictd.lib et de l'objet C:/amose-vcbuild/lima-lp-vc/src/linguisticProcessing/core/AnalysisDict/Debug/lima-lp-analysisdictd.exp
2>FsaAccessResource.obj : error LNK2019: symbole externe non résolu "__declspec(dllimport) public: void __cdecl Lima::Common::FsaAccess::FsaAccessReader16<class boost::adjacency_list<struct boost::vecS,struct boost::vecS,struct boost::bidirectionalS,struct boost::property<enum vertex_count_t,class std::vector<int,class std::allocator<int> >,struct boost::property<enum boost::vertex_name_t,unsigned long,struct boost::property<enum vertex_text_t,class QString,struct boost::no_property> > >,struct boost::no_property,struct boost::no_property,struct boost::listS> >::read(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> > const &)" (__imp_?read@?$FsaAccessReader16@V?$adjacency_list@UvecS@boost@@U12@UbidirectionalS@2@U?$property@W4vertex_count_t@@V?$vector@HV?$allocator@H@std@@@std@@U?$property@W4vertex_name_t@boost@@KU?$property@W4vertex_text_t@@VQString@@Uno_property@boost@@@2@@boost@@@2@Uno_property@2@U52@UlistS@2@@boost@@@FsaAccess@Common@Lima@@QEAAXAEBV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) référencé dans la fonction "public: virtual void __cdecl Lima::LinguisticProcessing::AnalysisDict::FsaAccessResource::init(class Lima::Common::XMLConfigurationFiles::GroupConfigurationStructure &,class Lima::InitializableObjectManager<class Lima::LinguisticProcessing::AbstractResource,struct Lima::LinguisticProcessing::ResourceInitializationParameters> *)" (?init@FsaAccessResource@AnalysisDict@LinguisticProcessing@Lima@@UEAAXAEAVGroupConfigurationStructure@XMLConfigurationFiles@Common@4@PEAV?$InitializableObjectManager@VAbstractResource@LinguisticProcessing@Lima@@UResourceInitializationParameters@23@@4@@Z) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-24T15:41:36.550

（在评论中回答。请参阅[没有答案的问题，但在评论中解决了问题（或在聊天中扩展）](https://meta.stackoverflow.com/questions/251597/question-with-no-answers-but-issue-solved-in-the-comments)）

OP写道：

> 我不知道为什么，但我终于能够在 Visual Studio 中编译。我不确定当我问的时候已经是这种情况了，但是今天早上我看到 cmake 选择的是 cygwin 链接器而不是 Visual C++ 链接器。我纠正并建立了。如果这是答案，那就奇怪了，因为其他几个项目和子项目链接起来都没有错误。

# c - C程序输出原因

> ID：12216414
> 
> 赞同：0
> 
> 时间：2012-08-31T13:32:04.177
> 
> 标签：c

```
#include<stdio.h>

#define MAX(a,b) (a>b?a:b);

main()
{
 int x;
 x=MAX(3+2,2+7)
 printf("%d",x);
} 
```

我检查了这个程序的输出会来9。为什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T13:32:53.023

因为一切正常。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:36:39.623

...因为 9 大于 5？我猜你真的在问它是如何工作的。（可能要查找三元运算）所以...

```
#define MAX(a,b) (a>b?a:b); 
```

是一个宏，名字是MAX，它有两个值“a”和“b”。它的工作原理是如果 a 大于 b，则返回 a，否则返回 b。

在这种情况下，3+2=5=a 和 2+7=9=b。所以宏归结为：

```
if (5 > 9)
  return 5
else
  return 9 
```

然后，当您的代码运行时，您可以考虑将宏调用替换为该代码：

```
void main()
{
    int x;
    if (5 > 9)
        x = 5;
    else
        x = 9;
    printf("%d", x);
} 
```

显然我们将返回 9，它存储为 'x' 然后打印。

这有帮助吗？

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T13:38:15.143

```
#define MAX(a,b) (a>b?a:b); 
```

在宏定义中，三元 if espression`?:`以这种方式工作

健康）状况 ？[条件为真时的值]：[条件不满足时的值]

条件是 C 中有效的任何表达式（因此 0 为假，其他一切为真）

如果满足条件，则表达式评估为第一个值（紧跟在 之后的那个`?`），或者如果不满足条件，则评估为第二个值（紧跟在 之后的那个`:`）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:34:35.397

因为 2+7=9 大于 3+2=5。

尽管如此，通常在编写这种宏时，您应该小心地将参数括在替换宏的表达式中的括号中，以避免有人传递带有比您正在使用的运算符优先级低的运算符的表达式的风险，从而弄乱你的表情。

所以，通常你会写：

```
#define MAX(a,b) ((a)>(b)?(a):(b)); 
```

# php - 在composer中删除依赖项后，目录仍然存在

> ID：12216415
> 
> 赞同：1
> 
> 时间：2012-08-31T13:32:10.640
> 
> 标签：php, composer-php

当我运行`composer.phar`更新更改时，一切正常。但是当我再次运行它以删除不需要的依赖项时，依赖项被删除但它们的目录结构仍然存在，例如`mopa/bootstrap-bundle`.

有没有办法使用 Composer 正确地做到这一点？

# iphone - iphone上的通用应用程序视网膜图像性能

> ID：12216417
> 
> 赞同：0
> 
> 时间：2012-08-31T13:32:18.313
> 
> 标签：iphone, ios, performance, retina-display, ios-universal-app

对于通用应用，如果只使用 ipad 视网膜图像，那么对于 iphone 是否会降低性能？由于 iphone 将使用相同的图像，因此 UIImageview 将根据屏幕大小对其进行缩放。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:35:46.843

性能不应大幅下降（甚至在大多数情况下明显下降）。但是，图像质量可能。

假设一个 100px 的方形 Retina iPad 图像，这将在非视网膜 iPad（50px 方形）上缩放到 50%，它可能看起来不错。但是，除非您将 iPhone 界面设计为使用具有类似简单缩放比例的图像，否则您可能会发现`UIImageView`'s 缩放比例（或`UIButton`'s 或...）不像您想要的那样优雅。

[您可以使用技巧来最小化这种情况（Thomas Fuchs 的书在http://retinafy.me/](http://retinafy.me/)中涵盖的那种东西）但是如果您为每个设备和分辨率提供优化的图像，图像质量*将不会*那么好.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:51:58.170

当您为通用应用程序创建图像时，假设您创建了一个名为“示例”的图像。

您应该保存以下内容：

*   example~iphone.png -> 这是针对非视网膜 iPhone
*   示例~iphone@2x.png -> 这是针对视网膜 iPhone
*   example~ipad.png -> 这是针对非视网膜 iPad
*   示例~ipad@2x.png -> 这是针对 Retina iPad 的

所以，不管你从哪里调用它，你只要这样调用它，假设 myImageView 是一个 UIImageView 对象：

`[myImageView setImage:[UIImage imageNamed:@"example"]];`

操作系统负责为所需设备找到正确的映像。

# java - urlrewrite.xml 配置文件中的语法错误

> ID：12216419
> 
> 赞同：1
> 
> 时间：2012-08-31T13:32:27.643
> 
> 标签：java, tuckey-urlrewrite-filter, dtd, xml

我有一个错误，我似乎无法用 Eclipse 中的 Tuckey urlrewrite 配置文件解决。我已将违规规则缩小到以下条目：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE urlrewrite PUBLIC "-//tuckey.org//DTD UrlRewrite 3.1//EN"
    "http://tuckey.org/res/dtds/urlrewrite3.1.dtd">

<urlrewrite>

    <rule>
        <from>/admin/**</from>
        <to>/app/admin/$1</to>
    </rule>
    <outbound-rule>
        <from>/app/admin/**</from>
        <to>/admin/$1</to>
    </outbound-rule>

    <rule>
        <from>/**</from>
        <to>/app/static/$1</to>
    </rule>

</urlrewrite> 
```

此文件在 Eclipse XML 编辑器中报告验证错误：

> 元素类型“urlrewrite”的内容必须匹配“((rule|class-rule) *,outbound-rule* ,catch*)”。

如果我删除了第一个`<outbound-rule>`或第二个`<rule>`（路由“/**”），错误就会消失。

据我所知，我遵守了 DTD，我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:37:50.337

你只需要制作`outbound-rule`最后一个元素。

```
<urlrewrite>

    <rule>
        <from>/admin/**</from>
        <to>/app/admin/$1</to>
    </rule>

    <rule>
        <from>/**</from>
        <to>/app/static/$1</to>
    </rule>

    <outbound-rule>
        <from>/app/admin/**</from>
        <to>/admin/$1</to>
    </outbound-rule>

</urlrewrite> 
```

# c# - Android 服务器在主机的 http://localhost:8080/wd/hub 不可用

> ID：12216421
> 
> 赞同：0
> 
> 时间：2012-08-31T13:32:32.150
> 
> 标签：c#, selenium, android-emulator

我正在设置 android 驱动程序，并按照 url 中提到的相同步骤进行操作：[http ://code.google.com/p/selenium/wiki/AndroidDriver](http://code.google.com/p/selenium/wiki/AndroidDriver)

1) 下载适用于 windows 的 android SDK 并解压并放置在 selenium 存储库的路径中 2) 设置模拟器并创建新的 AVD (android 虚拟设备) 3) 安装 webdriver apk 4) 端口转发以转发来自的流量主机到模拟器。在终端类型中：

$./adb -s 转发 tcp:8080 tcp:8080

5) 这将使 android 服务器在主机的 //localhost:8080/wd/hub 可用。

但是当我去 localhost:8080/wd/hub 它显示错误 404 : not found

让我知道为什么会这样？我错过了什么？

当在 android 模拟器中点击 webdriver 时，它说 webdriver 已准备好，但在 Jetty 启动时没有显示消息。你能告诉我为什么 Jetty 没有启动吗？

我得到了一些 Selenium C# 测试并从 firefox 更改为 android 驱动程序，当我编译并运行它时得到相同的 webdriver 异常：404 not found

你能帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:07:25.923

我遇到了同样的问题，这就是我设法解决的方法。

*   我从 macupdate 获得了 SDK。也可以从官网下载
*   将其解压缩到我的仓库并符号链接到我的主文件夹。所以它看起来像：

    ```
    /Volumes/repo/android_sdk
    ~/android_sdk -> /Volumes/repo/android_sdk
    /Volumes/repo/selenium 
    ```

注意 - 硒源[http://code.google.com/p/selenium/source/checkout](http://code.google.com/p/selenium/source/checkout)

*   为了方便起见，我将 android-server-2.21.0.apk 移动到 ~/android_sdk，下面是我设置模拟器的方法：

    ```
    ~/android_sdk/tools/android update sdk --no-ui
    ~/android_sdk/tools/android create avd -n my_android -t 12 -c 100M
    ~/android_sdk/tools/emulator -avd my_android &
    ~/android_sdk/platform-tools/adb -s emulator-5554 -e install -r  ~/android_sdk/android-server-2.21.0.apk
    ~/android_sdk/platform-tools/adb -s emulator-5554 shell am start -a android.intent.action.MAIN -n org.openqa.selenium.android.app/.MainActivity
    ~/android_sdk/platform-tools/adb -s emulator-5554 forward tcp:8080 tcp:8080 
    ```

*   我没有看到“Jetty Started”
*   您的问题提到了 C#，但它与问题无关。我用蟒蛇；所以：

    ```
    from selenium import webdriver
    android = webdriver.Remote(command_executor='http://localhost:8080/wd/hub', desired_capabilities=webdriver.DesiredCapabilities.ANDROID)
    android.get("http://google.com") 
    ```

瞧！

# php - 相互了解的对象

> ID：12216423
> 
> 赞同：7
> 
> 时间：2012-08-31T13:32:41.880
> 
> 标签：php, zend-framework

在 Zend Framework 中，Zend_Application 对象有一个 bootstrap 对象来引导或配置组件。Bootstrap 类又可以访问 zend_application 对象来访问配置参数。
我的问题是，这是一种什么样的模式，或者是因为循环依赖而产生的代码味道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T20:48:13.643

**Zend Framework 1 很臃肿，这是肯定的。**

该`$_application`属性表示双向关系的原因是由于模块的独立引导文件。

我认为这很奇怪，因为在处理模块时，`Zend_Aplication`您将拥有主引导程序而不是设置：

```
/**
 * Set application/parent bootstrap
 *
 * @param  Zend_Application|Zend_Application_Bootstrap_Bootstrapper $application
 * @return Zend_Application_Bootstrap_BootstrapAbstract
 */
public function setApplication($application)
{
    if (($application instanceof Zend_Application)
        || ($application instanceof Zend_Application_Bootstrap_Bootstrapper)
    ) {
        if ($application === $this) {
            throw new Zend_Application_Bootstrap_Exception('Cannot set application to same object; creates recursion');
        }
        $this->_application = $application;
    } else {
        throw new Zend_Application_Bootstrap_Exception('Invalid application provided to bootstrap constructor (received "' . get_class($application) . '" instance)');
    }
    return $this;
} 
```

还有很多代码气味：

```
/**
 * Constructor
 *
 * Sets application object, initializes options, and prepares list of
 * initializer methods.
 *
 * @param  Zend_Application|Zend_Application_Bootstrap_Bootstrapper $application
 * @return void
 * @throws Zend_Application_Bootstrap_Exception When invalid application is provided
 */
public function __construct($application)
{
    $this->setApplication($application);
    $options = $application->getOptions();
    $this->setOptions($options);
} 
```

boostrap 文件需要选项，因此它不[要求选项](http://www.youtube.com/watch?v=RlfLCWKxHJ0)，而是希望 Zend_Application 获得选项：

```
$options = $application->getOptions();
$this->setOptions($options); 
```

似乎他们只是忽略了 setApplication() 方法所期望的接口类型，它可以是以下之一：

*   Zend_Application
*   Zend_Application_Bootstrap_Bootstrap
*   Zend_Application_Bootstrap_ResourceBootstrap

**不过，我会放弃尝试理解这种混乱并切换到 ZF 2 ;)**

# django - Django project name

> ID：12216426
> 
> 赞同：1
> 
> 时间：2012-08-31T13:32:51.453
> 
> 标签：django, structure

My question is rather difficult to wrap in words, but let's try:

I reckon it's easier to explain my problem with a chart demonstrating my django project structure:

Project1 -------- /Project1

```
 settings.py
                        urls.py
                        models.py
                        views.py
            manage.py

            /App1
                        urls.py
                        models.py
                        views.py 
```

Now, in my views.py in App1, how could I do "project1.models import *" without hard coding "project1"? Instead, I would need to have a dynamic name of the main project (project1 in this case).

My goal is that I could use this same structure also in my next project with as little changes in the code as possible. In this case, at the moment I would need to change that one line in my App1 views to whatever is the name of my project.

Thanks!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:37:39.777

You can use [relative imports](http://docs.python.org/tutorial/modules.html#intra-package-references):

```
from ..models import * 
```

# ios - AVAudioPlayer 暂停后恢复背景音频

> ID：12216428
> 
> 赞同：3
> 
> 时间：2012-08-31T13:32:52.220
> 
> 标签：ios, ios5, avaudioplayer, avaudiosession

我开发了一个 iPhone 应用程序，它允许其他应用程序在后台播放音频。为此，我像这样初始化我的音频会话：

```
[[AVAudioSession sharedInstance] setCategory:AVAudioSessionCategoryPlayback error:nil]; 
```

在我的应用程序的某个时刻，我提供了一个音频播放器来播放存储在 CoreData 中的一些文件，其中包含 AVAudioPlayer。当用户点击播放按钮时，背景音频应该暂停。当播放器完成或暂停时，背景音频应恢复播放。

在播放器完成播放后恢复时

```
-(void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag
{
    [[AVAudioSession sharedInstance] setActive:NO withFlags:AVAudioSessionSetActiveFlags_NotifyOthersOnDeactivation error:nil];
} 
```

就像一个魅力，我在暂停后卡住了简历。它应该在按钮的 IBAction 中以相同的方式工作

```
-(IBAction)pausePlayer
{
    if (self.player.isPlaying) {
        [self.player pause];
        [[AVAudioSession sharedInstance] setActive:NO withFlags:AVAudioSessionSetActiveFlags_NotifyOthersOnDeactivation error:nil];
    }
} 
```

但我总是遇到同样的错误：

```
Unable to deactivate audio session. Error: Error Domain=NSOSStatusErrorDomain Code=560030580 "The operation couldn’t be completed. (OSStatus error 560030580.)" 
```

有什么建议为什么在这种情况下无法停用 AudioSession？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-02-19T08:47:52.367

我试了 3 个小时终于明白了，这就是我所做的

```
#import "ViewController.h"
#import <AVFoundation/AVFoundation.h>

@interface ViewController ()

    @property(strong, nonatomic)AVAudioPlayer *player;
    @property(strong)AVAudioSession *session;
@end

@implementation ViewController

- (IBAction)playsound:(id)sender

{

   NSURL *url=[[NSURL alloc]initWithString:[[NSBundle mainBundle]       pathForResource:@"sound" ofType:@"mp3"]];
    NSError *err;

    self.player=[[AVAudioPlayer alloc]initWithContentsOfURL:url error:&err];
    [self.player setDelegate:self];
    [self.player setVolume:2.5];

    self.session=[AVAudioSession sharedInstance];

    [self.player prepareToPlay];
    [self.player play];

}

- (void)audioPlayerDidFinishPlaying:(AVAudioPlayer *)player successfully:(BOOL)flag

{

    NSError *err;
    [self.session setActive:NO withOptions:AVAudioSessionSetActiveOptionNotifyOthersOnDeactivation error:&err];

}

@end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-23T21:43:53.920

看来停用太早了。根据 AVAudioSession 类参考“如果任何关联的音频对象（例如队列、转换器、播放器或录音机）当前正在运行，则停用会话将失败。”

似乎有几个解决方案：

1.  在循环中运行停用直到它成功。

    [这是在http://iknowsomething.com/ios-sdk-spritekit-sound/](http://iknowsomething.com/ios-sdk-spritekit-sound/)中提倡的

2.  推迟停用，例如直到确实有必要。

3.  当使用例如音频队列服务时，您可以考虑立即停止。（未测试）

    在可以收听录音的录音应用程序中，我只在使用顺序更改类别之前停用：激活 NO，setCategory 并激活 YES。

    请参阅 Apple 的音频会话编程指南中的“当您的应用程序正在运行时，Apple 建议您在更改任何设置值之前停用您的音频会话”

# joomla - joomla：如何做子菜单

> ID：12216434
> 
> 赞同：2
> 
> 时间：2012-08-31T13:33:00.493
> 
> 标签：joomla, menu, submenu

我想要一个带有子菜单的菜单。

**1** - 我想避免手风琴

**2** - 主要类别不需要可点击

**3** - 似乎一旦我创建了一篇文章并以某种方式将其分配给菜单系统，菜单系统应该能够自动将文章标题和链接包含在菜单中的适当位置。

![只有文章链接（蓝色）需要可点击](../Images/bc35a9248d0f012a016480f6ac46ca6b.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:39:04.627

对于红色菜单项，转到“类型”并选择“文本分隔符”。这将确保它们不可点击。

至于蓝色菜单项，像创建任何其他菜单项一样创建它们，但是根据您希望它们出现在哪个菜单项下选择“父级”。

我认为这是您正在寻找的，但如果不是，请更详细地解释您的需求。

问候

# python - 排序字典的值

> ID：12216436
> 
> 赞同：-2
> 
> 时间：2012-08-31T13:33:07.153
> 
> 标签：python, sorting, dictionary

```
for y in item:
    print '%s %s %s' % (item[y]['light'], item[y]['time'], item[y]['name']) 
```

产量：

```
10.38002 2.95000 earth
10.38000 12.04000 earth
10.28865 0.09789 earth
9.90000 12.50000 earth
9.77063 3.51299 earth
9.77000 13.40000 earth
10.38000000 1.26523000 moon
10.36000000 65.80305000 moon
10.31000000 1.72639000 moon
10.30000000 2.00000000 moon
10.33726 0.09833000 jupiter
10.30938 0.16622000 jupiter
10.24001 0.34554000 jupiter
10.24000 11.82214802 jupiter
10.23389 0.10840000 jupiter
10.20629 0.17732000 jupiter 
```

我想根据第一个键对项目进行排序：'light'。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:36:58.113

我认为您应该将其转换为列表，然后：

```
 item.sort(key=lambda x: x['light']) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:43:50.903

```
res = sorted(item.values(), key = lambda x: x['light'] )
for x in res: 
    print '%s %s %s' % (x['light'], x['time'], x['name']) 
```

# apache - svn：服务器响应 PROPFIND 发送了意外的返回值（405 Method Not Allowed）

> ID：12216437
> 
> 赞同：1
> 
> 时间：2012-08-31T13:33:20.070
> 
> 标签：apache, svn

我们需要通过代理使用一些 SVN 存储库。

> 直接网址：[http](http://host.com.ua/app)
> ://host.com.ua/app 通过代理的网址：http: [//proxy.com.ua/svn/app](http://proxy.com.ua/svn/app)

我们在 Apache 中添加了以下几行：

```
ProxyPass        /svn/app http://host.com.ua/app
ProxyPassReverse /svn/app http://host.com.ua/app 
```

现在我可以通过浏览器访问[http://host.com.ua/app 。](http://host.com.ua/app)
我可以使用直接 URL [http://host.com.ua/app](http://host.com.ua/app)签出工作副本。

但是我无法使用 svn 命令行工具或 TortoiseSVN 通过我们的代理访问存储库。
**有以下错误：**

> svn co [http://proxy.com.ua/svn/app/trunk/workshop/dev](http://proxy.com.ua/svn/app/trunk/workshop/dev) svn：服务器发送了意外的返回值（405 方法不允许）以响应 PROPFIND 请求 '/app/!svn/vcc/default '

这个错误是什么意思，修复它很热？

**更新：**
我只能看到以下配置有效：

```
ProxyPass        /app http://host.com.ua/app
ProxyPassReverse /app http://host.com.ua/app 
```

但它不适合我们。
我们需要在 URL 中有单词“svn”。

# sas - 向 SAS 添加序列号

> ID：12216439
> 
> 赞同：1
> 
> 时间：2012-08-31T12:51:48.190
> 
> 标签：sas

我正在将 Access 数据库中的表导入 SAS，其中序列列已损坏。我需要在 SAS 中创建一个新的序列列。我不想在 Access 中重新创建序列号，因为源表会定期补充。是否有可以添加到 SAS 的自动编号列之类的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:36:34.737

你可以这样做：

```
data want;
set have;
autonumber+1;
run; 
```

还有`_N_`一个是通过数据步循环的迭代计数，在正常的数据步中，它等于行号。它不会写入数据集，但始终可以作为普通变量访问。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T13:35:35.127

当您在 SAS 中读取数据集时，`_n_`指的是观察数。这应该适合你：

```
data new;
 set old;
 seqno = _n_;
run; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T14:42:30.440

一个与观察数不同的经典示例`_N_`- DoW 循环用于将变量的总和附加到类变量的每个值的每一行。注意最后`_N_`不返回行号，而是迭代号 - 在这种情况下，数据步骤循环为 的每个值迭代一次`x`，而不是每行一次，因为行是通过 do..until 拉入的环形。

```
data have;
do x = 1 to 5;
  do y = 1 to 3; 
    z=floor(7*ranuni(7));
    rownum+1;
    output;
  end;
end;
run;

data test;
 do t=1 by 1 until (last.x);
    set have;
    by x;
    sum_z+z;
 end;
 do t=1 by 1 until (last.x);
    set have;
    by x;
    output;
    put x= z= sum_z= _N_= rownum=;
 end;
 sum_z=0;
run; 
```

日志：

```
x=1 z=2 sum_z=12 _N_=1 rownum=1
x=1 z=5 sum_z=12 _N_=1 rownum=2
x=1 z=5 sum_z=12 _N_=1 rownum=3
x=2 z=5 sum_z=13 _N_=2 rownum=4
x=2 z=3 sum_z=13 _N_=2 rownum=5
x=2 z=5 sum_z=13 _N_=2 rownum=6
x=3 z=5 sum_z=12 _N_=3 rownum=7
x=3 z=5 sum_z=12 _N_=3 rownum=8
x=3 z=2 sum_z=12 _N_=3 rownum=9
x=4 z=3 sum_z=12 _N_=4 rownum=10
x=4 z=5 sum_z=12 _N_=4 rownum=11
x=4 z=4 sum_z=12 _N_=4 rownum=12
x=5 z=6 sum_z=13 _N_=5 rownum=13
x=5 z=3 sum_z=13 _N_=5 rownum=14
x=5 z=4 sum_z=13 _N_=5 rownum=15 
```

# c# - 具有本地设置的 Git：更改分支冲突

> ID：12216442
> 
> 赞同：2
> 
> 时间：2012-08-31T13:33:27.577
> 
> 标签：c#, visual-studio, git

我使用 Git Extensions 作为 git GUI。

在处理 vs c# 项目时，我需要保留许多设置文件。我想创建本地分支来保存它们。

所以现在我的工作流程看起来像：

1.  做出真正的改变
2.  从本地设置分支结帐
3.  提交，推动
4.  结帐回本地设置分支
5.  变基本地分支

除非我对在本地设置提交中更改的文件进行了更改，否则它工作正常。如果我从本地分支进行结帐，则会因该文件的冲突而中止。

我需要存储更改、结帐、应用存储、弹出存储。

有没有更好的方法呢？我所需要的只是在几个文件中保留一些更改。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:00:05.717

你为什么以这种方式使用分支？分支旨在保持功能分离，直到它们准备好被拉回一个单一的“主”分支。如果您的项目有一堆与项目相关的设置文件，那很好，您可以将它们保存在`master`. 如果您的设置是实验性的，那么您可以将它们复制到另一个分支，但整个项目也应该在该分支中。

你的工作流程应该是这样的。

1.  做出真正的改变。
2.  提交更改。
3.  重复。

当您准备好从本地存储库中发布您的更改时，您可以

1.  `git pull`
2.  如果存在任何冲突，请修复它们。
3.  `git push`

* * *

编辑：也许另一个工作流程是`master`在其他分支上使用各种设置更改来开发主项目，但在主项目更改时定期拉入主项目。

1.  `git commit` // 当在主人身上时。
2.  `git checkout debug`
3.  `git merge master`//将master拉入调试
4.  测试更改并根据需要提交
5.  `git checkout master`

在这种情况下，master 永远不会改变，也不会受到其他分支更改的影响，但是各个分支可以随着 master 的更改而保持最新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-30T11:36:09.903

您可以决定只通过[git-cherry-pick](https://www.kernel.org/pub/software/scm/git/docs/git-cherry-pick.html)合并特定的提交。如果您始终为您的设置更改单独提交（意思是，提交只更改设置，没有其他内容），那么您可以使用cherry-pick 合并所有提交，除了更改设置的提交。

# facebook-apps - 应用程序的使用受到限制

> ID：12216461
> 
> 赞同：2
> 
> 时间：2012-08-31T13:34:14.347
> 
> 标签：facebook-apps, restrictions

我创建了一个应用程序，它对我来说很好用（大概是因为我是开发人员），但是当其他人尝试加载它时，他们会收到这个错误 -

> 应用程序“Dyne Drewett 的英国新闻”的使用受到限制

我在帮助中心查看了这个常见问题 - [http://www.facebook.com/help/?faq=155308851202619](http://www.facebook.com/help/?faq=155308851202619) - 但点击“上诉页面”链接只会将我带到一个页面，上面写着“目前，没有你的应用程序受到限制。

我在应用程序设置中找不到任何信息，在尝试将应用程序视为另一个人来告诉我可能导致此问题的原因时，也没有看到任何有用的提示。

有人对我可以解决这个问题有什么想法吗？

应用程序位置 - [http://apps.facebook.com/dyne_drewett_news/](http://apps.facebook.com/dyne_drewett_news/)（还没有 SSL，因此如果您启用了安全模式，则无法使用）。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:24:32.327

该消息意味着该应用程序已受到开发人员（即您）的限制，并且某些人口统计数据中的用户无法看到该应用程序。

这通常由 API 通过[应用程序对象的“限制”连接](https://developers.facebook.com/docs/reference/api/application/#restrictions)或通过应用程序仪表板中的“高级”选项卡下的限制设置来完成

![在此处输入图像描述](../Images/c84c99adcb68e5bd34237ea2eb078140.png)

如果您确定您没有设置此类限制，并且您的用户在尝试访问该应用程序时肯定已登录，那么您是否有任何机会忘记禁用沙盒模式？

![在此处输入图像描述](../Images/a34e67c00f519537728fd826267b0171.png)

如果用户使用 HTTPS 而您忘记输入 HTTPS 设置，或者他们使用的是 HTTP 而您只输入 HTTPS 设置，但我认为错误消息更清楚为什么应用程序无法访问

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T14:40:39.597

如果您进入高级选项下的APP Dashboard有限制设置，或者进入API->Attivity and Error下的Insights查看限制

# xml - 使用 XSLT 合并 2 个具有匹配“id”属性的 XML 文件

> ID：12216464
> 
> 赞同：2
> 
> 时间：2012-08-31T13:34:21.047
> 
> 标签：xml, xslt, merge

当存在匹配的“id”属性时，我想使用 XSLT 合并 2 个 XML 文件。

myFile1.xml（这是第一个输入文件）

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <test>
      <node>
        <type id="a">
          <name>joe</name>
          <name>kill</name>
        </type>
      </node>
      <node>
        <type id="b">
          <name>sam</name>
        </type>
      </node>
    </test> 
```

myFile2.xml（这是第二个输入文件）

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <test>
      <node>
        <type id="a">
        <name>jill</name>
        <name>kill</name>
        </type>
      </node>
    </test> 
```

mergeOutput.xml（这是 id 匹配并合并 2 个文件的预期输出）

```
 <?xml version="1.0" encoding="ISO-8859-1"?>
    <test>
      <node>
        <type id="a">
          <name>joe</name>
         <name>jill</name> 
          <name>Kill</name>
        </type>
      </node>
      <node>
        <type id="b">
          <name>sam</name>
        </type>
      </node>
    </test> 
```

任何 XSLT 代码或代码链接都会有所帮助。我没有 XSLT 知识，也没有使用这种合并来使事情正常进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:58:51.520

XSLT 2.0 解决方案：

```
<xsl:template name="main">
  <test>
    <node>
      <xsl:for-each-group select="(doc('myFile1.xml'), doc('myFile2.xml'))/test/node/type"
                          group-by="@id">
        <type id="{@id}">
          <xsl:copy-of select="current-group()/*"/>
        </type>
      </xsl:for-each-group>
    </node>
  </test>
</xsl:template> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:36:08.533

你可以这样做`LINQ2XML`

```
XElement doc1=XElement.Load("myFile1.xml");
XElement doc2=XElement.Load("myFile2.xml");
XElement doc3=XElement.Load("myFile1.xml");//will contain mergeOutput

var dec=doc3.Descendants().Elements("type").ToList();
int i=0;
foreach(XElement elm1 in doc1.Descendants().Elements("type"))
foreach(XElement elm2 in doc2.Descendants().Elements("type"))
if(elm1.Attribute("id").Value==elm2.Attribute("id").Value)
dec[i++].Add(elm2.Elements());

doc3;//your mergeOutput 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T21:42:40.143

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<xsl:transform version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" version="1.0" encoding="ISO-8859-1" indent="yes" />
  <xsl:variable name="with" select="'myFile2.xml'" />
  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="//type">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()" />
      <xsl:variable name="info" select="document($with)/test/node/type[@id=current()/@id]/." />
     <xsl:for-each select="$info/*">
          <xsl:copy-of select="." />
      </xsl:for-each>
    </xsl:copy>
  </xsl:template>
</xsl:transform> 
```

这个变换的输出是（见 kill is duplicated） -

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<test>
    <node>
        <type id="a">
            <name>joe</name>
            <name>kill</name>
            <name>jill</name>
            <name>kill</name>
        </type>
    </node>
    <node>
        <type id="b">
            <name>sam</name>
        </type>
    </node>
</test> 
```

# jquery - 无限滚动桌面，无限/连续滚动jQuery

> ID：12216471
> 
> 赞同：0
> 
> 时间：2012-08-31T13:34:34.687
> 
> 标签：jquery, facebook, jquery-ui, twitter, scroll

我有一个包含很多记录的表格，而不是分页到不同的页面，我希望能够向下滚动页面并且表格上出现更多行，滚动的次数越多，看到的记录就越多。

类似于 Twitter 和 Facebook 的工作方式，但用于表行。滚动条是浏览器上的默认滚动条吗？我认为它称为无限滚动？

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:37:49.670

这是滚动调用加载

几个可以让你开始的链接

[http://www.9lessons.info/2009/07/load-data-while-scroll-with-jquery-php.html](http://www.9lessons.info/2009/07/load-data-while-scroll-with-jquery-php.html)

[http://www.webresourcesdepot.com/load-content-while-scrolling-with-jquery/](http://www.webresourcesdepot.com/load-content-while-scrolling-with-jquery/)

[http://thewebthought.blogspot.com/2012/01/jquery-loading-content-while-user.html](http://thewebthought.blogspot.com/2012/01/jquery-loading-content-while-user.html)

[http://designbeep.com/2011/08/12/12-jquery-infinite-scrollingscroll-read-plugins-for-content-navigation/](http://designbeep.com/2011/08/12/12-jquery-infinite-scrollingscroll-read-plugins-for-content-navigation/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:46:08.853

```
 var scroll = 0;
           $(window).scroll(function () {

               if (scroll > 0) {
                   if ($(window).height() + $(window).scrollTop() >= ($(document).height() - 50)) {
                       getTableItems();   /*call this function for getting table items from database*/
                    }
               }
               scroll++;
           }); 
```

上面的脚本将在滚动时加载更多项目

# python - 如何搜索、统计和保存单词？

> ID：12216474
> 
> 赞同：0
> 
> 时间：2012-08-31T13:34:36.540
> 
> 标签：python

我正在尝试识别一个特定的单词，然后计算它。我需要保存每个标识符的计数。

例如，

> 风险风险无风险利率
> 
> 星号风险风险
> 
> 市场风险风险[风险

*一份文件包含上面的文字，我需要计算“风险”而不是星号。我还需要将 [风险视为“风险”。这是我到目前为止所拥有的。但是，它返回星号和 [风险以及风险的计数。我不需要计算星号，只需要计算风险，包括 [risk. 我尝试使用正则表达式，但不断出错。另外，我是 Python 的初学者。如果有人有任何想法，请帮助我！^^谢谢。

```
from collections import defaultdict
word_dict = defaultdict(int)

for line in mylist:
words = line.lower().split()
for word in words:
    word_dict[word]+=1

for word in word_dict:
if 'risk' in word:
    word, word_dict[word] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:47:59.350

再给一个正则表达式。匹配`'risk'`由单词边界包围的字符串

```
import re
re.findall(r'\brisk\b', 'risk risk') ## 2 matches
re.findall(r'\brisk\b', 'risk risk riskrisk') ## 2 matches
re.findall(r'\brisk\b', 'risk risk riskrisk [risk') ## 3 matches
re.findall(r'\brisk\b', 'risk risk riskrisk [risk asterisk') ## 3 matches 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:43:46.103

采用流水线方法。我的意思是，在将单词添加到字典之前，对文本执行任何转换，以便计数正确。

```
word_dict = {} # empty dictionary

for line in mylist:
    words = line.strip().lower().split() # the strip gets rid of new lines
    for word in words:
        # the strip here will strip away any surrounding punctuation.
        # add any other symbols to the string that you need
        # the key insight here, is you get rid of extra stuff BEFORE inserting
        # into the dictionary
        word_dict[word.strip('[/@#$%')]+=1 

for word in word_dict:
    print word, word_dict[word]

# to just see the count for risk:
print word_dict['risk'] 
```

它计算“星号”这个词的事实很好，只要你计算你的“风险”这个词。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:48:26.570

你可以试试这个片段：

```
import shlex

words = shlex.split("risk risk risk free interest rate")
word_count = len([word for word in words if word == "risk" or word =="[risk"])
print word_count 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:53:31.517

我认为您需要更严格地定义哪些标准重要`risk`，哪些不重要。但是，我会使用`Counter`：

```
from collections import Counter
c = Counter()
with open(yourfile) as f:
    for line in f:
        c += Counter(line.split()) 
```

现在，您需要创建一个函数来确定它是否应该算作“风险”：

```
def is_risk(word):
    w = word.lower()
    return 'risk' in w and w!='asterisk' 
```

现在只需添加与这些键对应的元素：

```
sum( c[k] for k in c if is_risk(k) ) 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-31T13:39:20.650

所以你数

```
'\n' + risk + '\n'
'\n' + risk + ' '
' ' + risk + '\n'
' ' + risk + ' ' 
```

# objective-c - 是否可以检查 UI 元素是否具有某个参考出口？

> ID：12216476
> 
> 赞同：5
> 
> 时间：2012-08-31T13:34:45.730
> 
> 标签：objective-c, xcode, cocoa, iboutlet

我正在编写单元测试以查找某个笔尖上是否存在元素。例如，我想遍历一个 nibs 视图并检查是否存在一个引用插座“commentTextView”，以检查该文本视图是否存在。

现在，我只看到检查目标是否存在的方法（例如检查按钮是否会在单击时调用某个选择器），而不是检查我需要什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T20:59:52.143

与其检查他们是否有出口，不如为他们分配一个唯一的标签。选择 Interface Builder 中的按钮，然后转到右侧的 Attributes Inspector。朝向底部应该是一个框来设置对象的标签属性。然后，当您逐步浏览 nib 的视图时，您可以检查每个标签并使用它来确定它是什么视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T07:34:38.210

我在这里做了几个假设，所以如果我是基地，请告诉我。

1）您有一个将连接插座的对象列表，以及这些插座的列表。（例如，File 的所有者是一个`MyViewController`类并且有 outlets `view`、`label`、`button`等；有一个`UITableView`带有 outlets`delegate`和`dataSource`等）

2) 您的 nib 旨在使查找 1 中的所有对象变得切实可行。例如，如果某些`UIControl`对象没有被顶级对象或代理对象引用，则它已被赋予标签值以使其容易找到`viewWithTag:`

假设这些都是真的，那么您可以通过基本上执行以下操作来测试笔尖是否被加载（在伪代码中）

```
for each referencingObject in nibObjects
{
    for each outletName in referencingObject.outletNames
    {
        assertExistence(/* is an object referenced by this outlet? */)
        assertProperties(/* does the object conform to the properties expected for this referencing object / outlet pairing? */)
    }
} 
```

我开始尝试实现这一点。由于 iOS nib 很大程度上基于键值编码，我认为在测试 nib 方面有很多潜力值得探索。我没有处理从笔尖中的对象发送的动作，因为我必须下车学习，但我会分享我到目前为止所做的。

这是我在`SenTestCase`子类中编写的测试方法代码：

```
ViewController *vc = [[ViewController alloc] init];
UINib *nib1 = [UINib nibWithNibName:@"ViewController1" bundle:nil];
NSArray *topLevelObjects = [nib1 instantiateWithOwner:vc options:nil];

ReferencingObject *filesOwnerReferencingObject = [[ReferencingObject alloc] init];
filesOwnerReferencingObject.object = vc;

//Make a referenced object outlet for the view
ReferencedOutlet *viewOutlet = [[ReferencedOutlet alloc] init];
viewOutlet.name = @"view";
viewOutlet.propertyAssertionBlock = ^(id object) {
    UIView *theView = (UIView *)object;
    STAssertEquals(1.0f, theView.alpha, @"shouldn't have any transparency");
};

//Make a referenced object outlet for the label
ReferencedOutlet *labelOutlet = [[ReferencedOutlet alloc] init];
labelOutlet.name = @"label";
labelOutlet.propertyAssertionBlock = ^(id object) {
    UILabel *theLabel = (UILabel *)object;
    NSString *expectedLabelText = @"ViewController1.xib";
    STAssertTrue([expectedLabelText isEqualToString:theLabel.text], nil);

};

filesOwnerReferencingObject.outlets = @[ viewOutlet, labelOutlet ];

NSArray *referencingObjects = @[ filesOwnerReferencingObject ];
for (ReferencingObject *referencingObject in referencingObjects)
{
    for (ReferencedOutlet *outlet in referencingObject.outlets)
    {
        id object = [filesOwnerReferencingObject.object valueForKey:outlet.name];
        STAssertNotNil(object, nil);
        outlet.propertyAssertionBlock(object);
    }
} 
```

这是我的`ReferencingObject`和`ReferencedOutlet`类的接口/实现。

```
@interface ReferencingObject : NSObject

@property (nonatomic, strong) id object;
@property (nonatomic, strong) NSArray *outlets;

@end

@implementation ReferencingObject
@end

typedef void (^ReferencedOutletPropertyAssertionBlock)(id);

@interface ReferencedOutlet : NSObject

@property (nonatomic, copy) NSString *name;
@property (nonatomic, copy) ReferencedOutletPropertyAssertionBlock propertyAssertionBlock;

@end

@implementation ReferencedOutlet
@end 
```

希望这个答案会对您或其他人有所帮助。如果您有任何问题，请告诉我。

# spring - Spring组件扫描中base-package属性中的通配符

> ID：12216479
> 
> 赞同：5
> 
> 时间：2012-08-31T13:35:16.267
> 
> 标签：spring

有人可以解释一下 ** 在 spring 配置的上下文中代表什么吗？

```
<context:component-scan base-package="a.b.**" /> 
```

以及这与

```
<context:component-scan base-package="a.b" /> 
```

我找不到任何关于在组件扫描元素的基本包属性中使用通配符/ant 样式路径的信息。

您能否还指出任何可以解释在组件扫描属性中使用通配符的文档/源代码？我的 google-fu 没用

**编辑：** 我根据接受的答案做了更多的实验，现在知道 base-package 属性的值是如何“转换”为资源字符串的，这一切都说得通了。

所以，我创建了两个 Spring 托管组件

```
a.b.SpringBean2
a.b.c.d.SpringBean1 
```

SpringBean1 使用 @Autowired 注入了 SpringBean2

所以不仅如此：

```
<context:component-scan base-package="a.b"/> 
```

还有这个：

```
<context:component-scan base-package="a.b.**"/> 
```

从某种意义上说，可以正确解析 SpringBean2 以将其注入 SpringBean1 中，但这些也可以正常工作：

```
<context:component-scan base-package="a.b.**.**.**"/> <!-- as many .** as you want-->
<context:component-scan base-package="a.b**"/>
<context:component-scan base-package="a.b*"/> 
```

但是，由于未解析的 SpringBean2 类型，这将失败并出现 NoSuchBeanDefinitionException：

```
<context:component-scan base-package="a.b.*"/> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T13:47:48.220

两者的意思是一样的，最终像这样的基本包名称`a.b`被转换为具有这种资源名称的资源查找 -`classpath*:/a/b/**/*.class`你的第一个基本包名称将是这种资源类型：`classpath*:/a/b/**/**/*.class`，两者最终都会做同样的事情，获取 ab 包名下的所有类文件。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T14:50:25.823

spring 框架参考文档中描述了一种更强大的定义扫描和包含/排除内容的方法。例如，您可以这样做：

```
<context:component-scan base-package="org.example">
    <context:include-filter type="regex" expression=".*Stub.*Repository"/>
    <context:exclude-filter type="annotation" expression="org.springframework.stereotype.Repository"/>
</context:component-scan> 
```

[请参阅spring 3.0 参考文档的](http://static.springsource.org/spring/docs/3.0.x/spring-framework-reference/html/beans.html)第 3.10.3 节。

你也可以这样做：

```
<context:component-scan base-package="org.*.example"/> 
```

# java - 接口的静态和最终字段的含义

> ID：12216480
> 
> 赞同：0
> 
> 时间：2012-08-31T13:35:22.287
> 
> 标签：java, interface, static, final

受问题[Interface vs Abstract Classes](https://stackoverflow.com/questions/5953851/interface-vs-abstract-classes)和接受的答案的刺激，我想有一个更详细和澄清的答案。特别是我无法理解“接口中的字段是隐式静态和最终的”语句。这是否意味着实现包含方法 foo() 的接口的类 A 可以调用该方法`A.foo()`？

关于final：只要接口只包含方法，给定一个抽象类A，它实现一个带有方法的接口和一个扩展的`foo()`普通类，不能覆盖foo方法吗？就我而言， final 方法是不可能被覆盖的。最后什么是真的？ `class B``abstract class A``class B`

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T13:39:32.217

> “接口中的字段是隐式静态和最终的”。

在一个界面写作中

```
int N = 1;
public int N = 1;
static int N = 1;
public static int N = 1;
// also
final int N = 1;
public final int N = 1;
static final int N = 1;
public static final int N = 1; 
```

都是一样的。

> 这是否意味着实现包含方法 foo() 的接口的类 A 可以调用该方法作为 A.foo()

字段和方法都是成员，但方法和字段不是一回事。

接口中的方法不能是`static`or `final`，而是隐式公共和抽象的

```
int foo();
public int foo();
abstract int foo();
public abstract int foo(); 
```

对于一个接口来说都是一样的。

> 就我而言，最终方法不可能被覆盖

最终实例方法不能被覆盖，最终静态方法不能被隐藏。

类似的嵌套接口、类和注解是公共的和静态的。嵌套接口和注解也是隐式抽象的。

```
interface A {
    public static class C { }
    public static /* final */ enum E {; }
    public static abstract interface I { }
    public static abstract @interface A { }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:39:01.570

> > “接口中的字段是......”

它正在谈论*领域*。字段不是方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:40:39.330

> 这是否意味着实现包含方法 foo() 的接口的类 A 可以调用该方法作为 A.foo()？

不，您需要创建一个 with 的实例`A`，`new`然后`foo`在该实例上实现。

```
 As long as interfaces contain only methods, given an abstract class A which implements an interface with a method foo() and an ordinary class B which extends the abstract class A, cannot the class B override the foo method? As far as I am concerned, final methods are impossible to be overridden. What is true finally? 
```

接口方法不能是最终的，所以这个问题没有意义。实现接口的抽象类的子类可以为接口方法提供自己的实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:42:32.853

试试看这个。

```
public interface A {
    int x = 4;
    public void printVal();
}

public class B implements A {

    public void printVal() {
        System.out.println(A.x);
    }

    public static void main(String [] args) {
        System.out.println(A.x);

        (new B()).printVal();
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T13:46:00.947

```
Interface can only contain abstract methods, properties but we don’t
need to put abstract and public keyword. All the methods and properties
defined in Interface are by default public and abstract. 
```

接口中的每个字段都是公共的、静态的和最终的，因为...

```
Interface variables are static because Java interfaces cannot be instantiated 
in their own right; the value of the variable must be assigned in a static 
context in which no instance exists. The final modifier ensures the value
assigned to the interface variable is a true constant that cannot be 
re-assigned by program code. 
```

前任：

```
public interface Test
  {
    int value = 3; //it should be same as public static final int value = 3;
  } 
```

在接口的成员函数的情况下。

```
A method declaration within an interface is followed by a semicolon,
but no braces, because an interface does not provide implementations
for the methods declared within it. All methods declared in an interface 
are implicitly public, so the public modifier can be omitted. 
```

**意味着**方法在接口中不是最终的。

有关更多详细信息，请参阅本[教程](http://docs.oracle.com/javase/tutorial/java/IandI/createinterface.html)

# objective-c - iPhone - 旋转不起作用

> ID：12216484
> 
> 赞同：1
> 
> 时间：2012-08-31T13:35:42.967
> 
> 标签：objective-c, xcode, rotation

我已经实施

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
return YES;
} 
```

在我所有的控制器中。我在 info.plist 中有 4 个方向，但我的应用程序不想旋转。唯一旋转的是顶部栏。我的表格视图不旋转...但我可以在表格视图后面看到它正在按应有的方式旋转，但我无法访问它，因为我的原始表格视图（不旋转的那个）就在它上面并需要95% 的屏幕。

![这是关于它的样子](../Images/22a4b6372d1de91a1e0ab29d0f90633d.png)

感谢您能给我的任何支持！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:09:06.283

在您的 ViewController.m 类中，您可能想要做的是复制并粘贴我显示的代码，在 viewDidDisapear 方法下方，如下所示：

```
/*
- (void)viewDidDisappear:(BOOL)animated {
    [super viewDidDisappear:animated];
}
*/

 // Override to allow orientations other than the default portrait orientation.
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation {
    // Return YES for supported orientations.
    return (interfaceOrientation == UIInterfaceOrientationPortrait || UIInterfaceOrientationLandscapeLeft || UIInterfaceOrientationLandscapeRight);
} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-03T09:26:15.717

我有一个类似的[问题](https://stackoverflow.com/questions/12157049/landscape-xib-appears-as-portrait)，视图没有自动旋转。我没有解决方案，但我有一个解决方法。在视图控制器的 willRotateToInterfaceOrientation 中，显式旋转视图：

```
 switch (toInterfaceOrientation) {
        case UIInterfaceOrientationLandscapeLeft:
            self.view.transform = CGAffineTransformMakeRotation(M_PI * 0.5);
            break;
        case UIInterfaceOrientationLandscapeRight:
            self.view.transform = CGAffineTransformMakeRotation(M_PI * -0.5);
            break;
        case UIInterfaceOrientationPortrait:
            self.view.transform = CGAffineTransformMakeRotation(0);
            break;
        case UIInterfaceOrientationPortraitUpsideDown:
            self.view.transform = CGAffineTransformMakeRotation(M_PI * 1);
            break;
        default:
            break;
    } 
```

我称这是一种解决方法，因为我认为视图应该在没有显式 CGAffineTransformMakeRotation 调用的情况下自动旋转。就我而言，我正在为风景实例化一个不同的视图，我需要以这种方式旋转。我还有其他项目，其中单独的视图会自动旋转。我不知道为什么在这种情况下它不这样做。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:52:43.583

这可能对你有帮助

```
 if(interfaceOrientation==UIInterfaceOrientationLandscapeLeft||interfaceOrientation==   UIInterfaceOrientationLandscapeRight||interfaceOrientation==UIInterfaceOrientationPortrait||interfaceOrientation ==UIInterfaceOrientationPortraitUpsideDown)
   {

           return YES;
   } 
```

# c# - 基本通用接口上的扩展方法

> ID：12216488
> 
> 赞同：5
> 
> 时间：2012-08-31T13:35:49.323
> 
> 标签：c#, .net, generics, extension-methods, ienumerable

我正在实现一个流畅的构建器模式，该模式需要在静态扩展方法中接受可枚举并迭代其内容，同时将仿函数应用于可枚举的内容。如（不是实际代码，只是一个说明）：

```
public static IValidator<IEnumerable<T>> Each<T>(
    this IValidator<IEnumerable<T>> enumerable, 
    Func<T, bool> action)
{
    foreach (T value in enumerable)
        action(value);

    return validator;
} 
```

这对于可枚举对象非常有效，但对于继承的类型/接口却失败了。比方说：

```
IValidator<IEnumerable<Guid>> validator = ...;

IEnumerable<Guid> guids = ...;
validator.Each(guids, guid => guid != Guid.Empty);   // ok

IList<Guid> guids = ...;
validator.Each(guids, guid => guid != Guid.Empty);   // doesn't compile (see below) 
```

例外是：

> `IValidator<IList<Guid>>`不包含“Each”的定义，并且找不到接受第一个类型参数的扩展方法“Each” `IValidator<IList<Guid>>`（您是否缺少 using 指令或程序集引用？

我的问题是关于继承链`IValidator<T>`，更具体地说，是关于它的泛型类型 arguments `T`。为什么 type`IValidator<IEnumerable<T>>`不能分配 from `IValidator<IList<T>>`？我想不出哪种`IList<T>`情况不是`IEnumerable<T>`（给定相同的`T`）。

将泛型参数约束为`T : IEnumerable<R>`确实有效，但这需要两个类型参数（`T`和`R`），如果可能的话，我想避免。

有什么想法吗？更好的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T14:06:27.713

这是由于您的`IValidator<T>`接口的定义。我打赌它是这样的：

```
public interface IValidator<T> 
```

你真正想要的是：

```
public interface IValidator<out T> 
```

这将使您的接口[协变](http://msdn.microsoft.com/en-us/library/ee207183.aspx)，这意味着您可以分配 to 的实现`IValidator<T2>`，`IValidator<T>`假设`T2`派生自`T`.

在这种情况下，[`IList<T>`](http://msdn.microsoft.com/en-us/library/5y536ey6.aspx)派生自[`IEnumerable<T>`](http://msdn.microsoft.com/en-us/library/9eekhta0.aspx)，因此您*应该*能够声明`T`为协变。但是，这取决于方法`IValidator<T>`及其暴露方式。

也就是说，如果您有将 in 的`IValidator<T>`实例`T`作为接口上任何方法的参数的方法，那么您将无法将接口声明为协变的。

如果是这种情况，那么您应该能够摆脱以下定义`Each`：

```
public static IValidator<T> Each<T, TValue>(
    this IValidator<T> enumerable, 
    Func<TValue, bool> action) where T : IEnumerable<TValue>
{
    foreach (TValue value in enumerable)
        action(value);

    return validator;
} 
```

这将表明`T`应该从`IEnumerable<TValue>`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T14:07:22.207

两个答案：

1.  `where T: IEnumerable<T>`说哪个可以解决您的问题并且不需要第二种泛型类型是完全合法的。

2.  `IValidator<IEnumerable<T>>`不可分配，`IValidator<IList<T>>`因为您的界面不是变体。从 v4 开始，C# 确实支持接口变化，但您必须在接口定义中明确要求它。为此，请参阅[`out Generic Modifier`](http://msdn.microsoft.com/en-us/library/dd469487.aspx)

协变允许您用派生更多的类型替换泛型参数，而泛型参数在进行赋值等时需要派生较少的类型。

请注意，确保您的界面确实是变体安全的，这取决于您。这就是为什么在 C# 4 之前它是不可能的，因为它并不*总是*有效的；有些接口是安全协变的，有些是安全逆变的（您只能用*较少*派生的类型替换预期的类型）。这完全取决于你在做什么。

# java - 如何将文本添加到 textArea 而不是替换它

> ID：12216494
> 
> 赞同：14
> 
> 时间：2012-08-31T13:36:13.460
> 
> 标签：java, string, swing, jtextarea

如何将文本添加到 a`JTextArea`而不是全部替换？

我知道，`setText(String)`但除此之外，我有点迷茫。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-31T13:37:39.310

您可以使用[这样的`append`方法](https://docs.oracle.com/javase/8/docs/api/javax/swing/JTextArea.html#append-java.lang.String-)：

```
textArea.append(additionalText); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T13:45:14.700

要在任何位置插入字符串，您可以使用组件的 Document。

```
public static void main(String[] args) throws BadLocationException {
    JTextField f = new JTextField("foo bar");
    int offset = 7;
    String str = " baz";
    f.getDocument().insertString(offset, str, SimpleAttributeSet.EMPTY);
    System.out.println(f.getText());
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-31T13:54:10.480

```
void append(JTextArea area, String newText){
        area.setText(area.getText() + newText)
} 
```

# python - Python 3：以二进制模式处理剥离线

> ID：12216496
> 
> 赞同：0
> 
> 时间：2012-08-31T13:36:21.043
> 
> 标签：python, file-io, python-3.x, traceback, python-unicode

在 SO 成员的帮助下，我能够达到以下目标，以下是示例代码，目的只是合并来自给文件夹及其子文件夹的文本文件并将输出存储为 master.txt。但我偶尔会得到回溯，看起来在读取文件时会引发错误。

考虑到建议、输入和一些研究，最好用统一的 unicode 清理文本文件或使用一些逐行函数，因此读取每一行应该修剪垃圾字符和空行。

```
import shutil
import os.path

root = 'C:\\Dropbox\\test\\'
files = [(path,f) for path,_,file_list in os.walk(root) for f in file_list]

with open('C:\\Dropbox\\Python\\master.txt','wb') as output:
    for path, f_name in files:
        with open(os.path.join(path, f_name), 'rb') as input:
            shutil.copyfileobj(input, output)
        output.write(b'\n') # insert extra newline 

with open('master.txt', 'r') as f:
  lines = f.readlines()
with open('master.txt', 'w') as f:
  f.write("".join(L for L in lines if L.strip())) 
```

回溯我得到：

```
Traceback (most recent call last):
  File "C:\Dropbox\Python\master1.py", line 14, in <module>
    lines = f.readlines()
  File "C:\PYTHON32\LIB\encodings\cp1252.py", line 23, in decode
    return codecs.charmap_decode(input,self.errors,decoding_table)[0]
UnicodeDecodeError: 'charmap' codec can't decode byte 0x81 in position 8159: character maps to <undefined> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:21:18.203

您已经以文本模式打开了 master.txt。然后，当您从中 readlines() 时，它将使用系统的默认编码对它们进行解码。显然，当您收到 UnicodeDecodeError 时，该文件正在另一个解码中。

以二进制模式打开文件，或指定正确的编码。

# assembly - x86 ASM 使用 * 运算符处理 eax

> ID：12216497
> 
> 赞同：2
> 
> 时间：2012-08-31T13:36:24.120
> 
> 标签：assembly, operators, ida

如何解释`*`汇编中的操作？它是否涉及某种数组操作？

来自 IDA 的示例片段，涉及程序参数的使用：

```
mov     eax, [ebp+arg_0]
mov     ecx, [ebp+arg_4]
mov     edx, [ecx+eax*4-4] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:18:29.480

这是一个乘法。

在 x86 中，您可以在单个指令中使用以下表达式访问内存。

```
*(base + offset*multiplier + displacement) 
```

其中基数和偏移量是寄存器，乘数是 1、2、4 或 8，位移是常数。

通常，当您看到这个时，您正在查看一个数组操作，例如`ecx - 4`（它只是`arg_4 - 4`，`arg_4`指针在哪里）可能是 4 字节整数数组的开始，并且`eax`（这只是`arg_1`，`arg_1`a在哪里`size_t`）会是数组的偏移量。然而，它绝对可以是任何东西。当使用优化编译程序时，编译器将使用这些结构来提取各种巧妙的技巧。

# asp.net - 在退出子例程之前删除对象的多个实例

> ID：12216503
> 
> 赞同：0
> 
> 时间：2012-08-31T13:36:44.147
> 
> 标签：asp.net, vb.net, object, code-behind, multiple-instances

关于“New”关键字的使用和删除对象的多个实例，我有几个问题。

如果像这样的代码隐藏 ASP.Net 语句中的子例程在每次执行子例程时都执行，会不会有很多employeeDetails.DataKeyNames 的实例？该对象是子例程的本地对象。

```
employeeDetails.DataKeyNames = New String() {"EmployeeID"} 
```

如果答案是肯定的，当包含此代码的子例程完成时，我是否应该使用代码删除employeeDetails.DataKeyNames 的所有副本？在这种情况下，请说明删除所有的employeeDetails.DataKeyNames 副本需要什么编码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:56:41.523

您在应用程序中创建的对象引用遵循您所期望的正常范围规则。例如，如果您在方法内创建一个对象引用，那么它只会存在，直到该方法将控制权返回给它的调用者。如果您在循环内创建引用`For`，则该引用仅在该循环的范围内。但是，这并不意味着引用指向的对象会立即消失。在 .NET 等托管环境中，垃圾收集器仅在对象不再有任何指向它的引用后才处理销毁内存中的对象。即使这样，GC 也会在后台安排适当的时间来处理这个问题，并且不一定会在对象的引用数达到 0 时立即执行垃圾回收。

有关 .NET 中垃圾收集概念的介绍，请参阅[本文](http://msdn.microsoft.com/en-us/library/ee787088.aspx)。

当您的应用程序引用使用非托管资源或不由 CLR 直接控制的资源创建的对象时，此规则存在例外情况。一个典型的例子可能是数据库连接或网络套接字。在这些情况下，您可能需要实际调用`Dispose`对象以确保释放其资源。

有关[为什么](https://stackoverflow.com/questions/538060/proper-use-of-the-idisposable-interface)以及何时使用`IDisposable`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:46:49.270

在这种情况下，New 将用新值替换 .DataKeyNames 属性中存在的任何内容。在这种情况下，您不会向该属性添加更多值，但会看到重复创建和销毁字符串数组的性能损失。最好检查该值是否已设置，然后不要用简单的 if 子句替换它：

```
If employeeDetails.DataKeyNames Is Nothing Then
  employeeDetails.DataKeyNames = New String() {"EmployeeID"}
End If 
```

话虽如此，您可能需要检查代码中的其他逻辑以确定您重复调用此方法的原因，并查看是否有减少这些调用的方法。

# java - Android facebook 哈希键错误 - 'c:\Program' 未被识别为内部或外部命令，

> ID：12216511
> 
> 赞同：0
> 
> 时间：2012-08-31T13:37:35.673
> 
> 标签：java, android, facebook

我无法生成密钥。我收到一个错误

> 'c:\Program' 未被识别为内部或外部命令，

我有这个命令

```
c:\Program Files\Java\jdk1.7.0_05\bin\keytool.exe -exportcert -alias androidfacebook -keystore C:\Users\Jo\Desktop\facebookkey.keystore | c:\OpenSSL-Win32\bin\openssl.exe sha1 -binary | openssl enc -a -e 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:44:40.857

如果你想让你现有的命令工作，你很可能用 Progra~1 替换“程序文件”部分，以获得底层的短目录名称，不带空格。假设命令的其余部分是正确的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:46:44.097

尽管这被标记为 Java 和 Android，但我假设您正在执行的命令以及该命令正在您的 Windows 开发机器上执行的错误消息。

`Program`命令行解释器将和之间的空格`Files`视为分隔符。将路径括在引号中是处理此问题的正常方法：

```
"c:\Program Files\Java\jdk1.7.0_05\bin\keytool.exe" -exportcert ...... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:49:55.867

传递你的命令`double quotes("")`

```
 "c:\Program Files\Java\jdk1.7.0_05\bin\keytool.exe" -exportcert -alias androidfacebook -keystore C:\Users\Jo\Desktop\facebookkey.keystore | c:\OpenSSL-Win32\bin\openssl.exe sha1 -binary | openssl enc -a -e 
```

它会起作用的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:39:20.947

让您轻松设置您的 java 路径，[如下所示](http://www.java.com/en/download/help/path.xml)

然后只尝试这个

```
keytool.exe -exportcert -alias androidfacebook -keystore C:\Users\Jo\Desktop\facebookkey.keystore | c:\OpenSSL-Win32\bin\openssl.exe sha1 -binary | openssl enc -a -e 
```

# linux - 在 Firefox 中打开具有特定扩展名的文件

> ID：12216517
> 
> 赞同：1
> 
> 时间：2012-08-31T13:37:51.573
> 
> 标签：linux, apache, firefox

我有一个扩展名为 .hede 的文件要下载。如何强制 Firefox 使用位于的脚本打开它`/usr/bin`？此 *.hede 文件包含文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:56:18.537

从 apache 中，您无法告诉浏览器如何处理某种类型的文件，除非它是一些常用的 mime 类型/应用程序映射。您最好的选择可能是使用 为自己创建一个 mime 类型[`AddType`](http://httpd.apache.org/docs/2.2/mod/mod_mime.html#addtype)，例如：

```
AddType application/hede  .hede 
```

当有人使用 Firefox 之类的工具打开带有 hede 扩展名的文件时，他们会得到一个窗口，询问他们应该如何处理`application/hede`mime 类型，然后他们可以浏览并选择位于 /usr/bin 中的脚本。

# php - 图像/jpeg 内容类型 php 文件的错误检查

> ID：12216518
> 
> 赞同：-1
> 
> 时间：2012-08-31T13:37:54.970
> 
> 标签：php, image, jpeg

我有一个内容类型的 php 文件：

```
header('Content-Type: image/jpeg'); 
```

该文件适用于我的本地主机，但是当我将它上传到我的服务器时它拒绝工作，所以我试图对其启用错误检查，但没有错误显示，我猜是内容类型的原因，是否有解决方法：年代？

谢谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:44:10.520

而不是像这样的脚本

```
<?php
header('Content-Type: image/jpeg');
func1();
func2();
func3();
imagejpeg(....) 
```

像这样写你的脚本

```
<?php   
func1();
func2();
func3();
if ( noErrorCondition ) {
  header('Content-Type: image/jpeg');
  imagejpeg(....)
} 
```

然后根据需要添加调试输出 - 甚至可能`ini_set('display_errors', true); error_reporting(E_ALL);`（或密切关注 php 的[error.log](http://docs.php.net/manual/en/errorfunc.configuration.php#ini.error-log)）

# c# - 向 ASP.net 表添加和维护表行和单元格

> ID：12216528
> 
> 赞同：4
> 
> 时间：2012-08-31T13:38:22.723
> 
> 标签：c#, asp.net, viewstate, asp.net-4.0

我有一个 ASP.net 表，我在运行时动态添加表行和单元格，并向这些单元格添加控件（文本框和标签）。我在 OnInit 事件中创建和填充这些控件，希望它们会自动保存到视图状态。但他们不是！在每次回发时，表都会重置并显示为空。

我阅读了许多解决方案，例如将控件保存在 Cache 或 Session 中，或者手动添加它们以查看状态并手动保存它们的值以查看状态，但我想要一个直截了当的解决方案。就像当你拖放任何 asp.net 组件时，你忘记了维护它的状态。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T16:06:01.320

您每次都必须重建表。尝试在 Page_Load 事件上创建行和单元格。我假设您有一个 asp:table 服务器端控件，例如：

```
<asp:Table ID="table" runat="server" /> 
```

在这种情况下，您可以在 Page_Load 上向其添加控件并为其设置值，例如：

```
 protected void Page_Load(object sender, EventArgs e)
    {
        TableRow row = new TableRow();
        TableCell cell = new TableCell();
        cell.Controls.Add(new TextBox());
        row.Cells.Add(cell);
        table.Rows.Add(row);
    } 
```

你可以试试它是否有效？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:13:10.330

正如 tranceporter 所建议的，您每次都必须添加表格控件。但是，如果您想在回发之间保持视图状态，那么您需要在 PreInit 事件中重建表，例如

```
protected void Page_PreInit(object sender, EventArgs e)
{
    TableRow row = new TableRow();
    TableCell cell = new TableCell();
    cell.Controls.Add(new TextBox());
    row.Cells.Add(cell);
    table.Rows.Add(row);
} 
```

如果控件是在 PreInit 事件中创建的，那么 ASP.NET 框架将在页面 Init 和 Load 事件触发之前为您将视图状态应用于控件。有关 ASP.NET 页面生命周期的更多详细信息，请参见此处：

[http://msdn.microsoft.com/en-us/library/ms178472(v=VS.100).aspx](http://msdn.microsoft.com/en-us/library/ms178472(v=VS.100).aspx)

# qt - VTK 的构建错误

> ID：12216529
> 
> 赞同：0
> 
> 时间：2012-08-31T13:38:22.917
> 
> 标签：qt, vtk

我在 Ubuntu 10.04 上使用 Qt。在程序安装过程之后，我尝试按照此处 [http://www.vtk.org/Wiki/VTK/Examples/Instructions/ForUsers] 中的说明使用 vtk 示例对其进行测试。

但它给出了一个错误，如：

```
Starting /home/taha/Downloads/VTK/Examples/Tutorial/Step1/Cxx/Cone...
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
Xlib:  extension "GLX" missing on display ":0.0".
ERROR: In /home/taha/Downloads/VTK/Rendering/vtkXOpenGLRenderWindow.cxx, line 398
vtkXOpenGLRenderWindow (0x9812928): Could not find a decent visual

The program has unexpectedly finished.
/home/taha/Downloads/VTK/Examples/Tutorial/Step1/Cxx/Cone exited with code 0 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-11-11T02:13:47.437

我个人的经验是您编写自己的 Makefile 并进行测试...供您参考，附上一个示例：

```
# paths 
bindir = ./
objdir = ./obj
vtkdir = /home/tool/vtk

# dependencies
object = main.o

obj = $(addprefix $(objdir)/,$(object))

# targets
exec = $(bindir)/exec

all: makedir $(exec)

# options
cxx = icpc

inc = -I. -I$vtkdir/vtk/Testing/Core -I$vtkdir/vtk/ExternalData/Objects -I$vtkdir/vtk/Views/Core -I$vtkdir/vtk/Views/Geovis -I$vtkdir/vtk/Views/Qt -I$vtkdir/vtk/Views/Infovis -I$vtkdir/vtk/Views/Context2D -I$vtkdir/vtk/Charts/Core -I$vtkdir/vtk/GUISupport/QtOpenGL -I$vtkdir/vtk/GUISupport/MFC -I$vtkdir/vtk/GUISupport/QtWebkit -I$vtkdir/vtk/GUISupport/Qt -I$vtkdir/vtk/GUISupport/QtSQL -I$vtkdir/vtk/Utilities/PythonInterpreter -I$vtkdir/vtk/Utilities/Benchmarks -I$vtkdir/vtk/Utilities/octree -I$vtkdir/vtk/Utilities/KWIML -I$vtkdir/vtk/Utilities/Maintenance -I$vtkdir/vtk/Utilities/DICOMParser -I$vtkdir/vtk/Utilities/vtkTclTest2Py -I$vtkdir/vtk/Utilities/OutputWindowProcess -I$vtkdir/vtk/Utilities/Rpm -I$vtkdir/vtk/Utilities/MetaIO -I$vtkdir/vtk/Utilities/Scripts -I$vtkdir/vtk/Utilities/Doxygen -I$vtkdir/vtk/Utilities/EncodeString -I$vtkdir/vtk/Utilities/KWSys -I$vtkdir/vtk/Utilities/HashSource -I$vtkdir/vtk/Utilities/ParseOGLExt -I$vtkdir/vtk/Utilities/Upgrading -I$vtkdir/vtk/Utilities/Python -I$vtkdir/vtk/Web/WebGLExporter -I$vtkdir/vtk/Web/Core -I$vtkdir/vtk/Web/Python -I$vtkdir/vtk/Accelerators/Vtkm -I$vtkdir/vtk/Rendering/LIC -I$vtkdir/vtk/Rendering/Tk -I$vtkdir/vtk/Rendering/VolumeAMR -I$vtkdir/vtk/Rendering/LICOpenGL2 -I$vtkdir/vtk/Rendering/Oculus -I$vtkdir/vtk/Rendering/Core -I$vtkdir/vtk/Rendering/ContextOpenGL2 -I$vtkdir/vtk/Rendering/Annotation -I$vtkdir/vtk/Rendering/VolumeOpenGL2 -I$vtkdir/vtk/Rendering/Label -I$vtkdir/vtk/Rendering/OptiX -I$vtkdir/vtk/Rendering/FreeType -I$vtkdir/vtk/Rendering/GL2PS -I$vtkdir/vtk/Rendering/OpenGL2 -I$vtkdir/vtk/Rendering/OpenVR -I$vtkdir/vtk/Rendering/SceneGraph -I$vtkdir/vtk/Rendering/External -I$vtkdir/vtk/Rendering/ParallelLIC -I$vtkdir/vtk/Rendering/Volume -I$vtkdir/vtk/Rendering/Image -I$vtkdir/vtk/Rendering/OSPRay -I$vtkdir/vtk/Rendering/Qt -I$vtkdir/vtk/Rendering/FreeTypeFontConfig -I$vtkdir/vtk/Rendering/GL2PSOpenGL2 -I$vtkdir/vtk/Rendering/Parallel -I$vtkdir/vtk/Rendering/LOD -I$vtkdir/vtk/Rendering/Context2D -I$vtkdir/vtk/Geovis/Core -I$vtkdir/vtk/Filters/Selection -I$vtkdir/vtk/Filters/ParallelStatistics -I$vtkdir/vtk/Filters/AMR -I$vtkdir/vtk/Filters/Verdict -I$vtkdir/vtk/Filters/Programmable -I$vtkdir/vtk/Filters/Sources -I$vtkdir/vtk/Filters/HyperTree -I$vtkdir/vtk/Filters/General -I$vtkdir/vtk/Filters/Core -I$vtkdir/vtk/Filters/Extraction -I$vtkdir/vtk/Filters/Geometry -I$vtkdir/vtk/Filters/Texture -I$vtkdir/vtk/Filters/OpenTurns -I$vtkdir/vtk/Filters/Statistics -I$vtkdir/vtk/Filters/ParallelVerdict -I$vtkdir/vtk/Filters/Points -I$vtkdir/vtk/Filters/ReebGraph -I$vtkdir/vtk/Filters/FlowPaths -I$vtkdir/vtk/Filters/Hybrid -I$vtkdir/vtk/Filters/Imaging -I$vtkdir/vtk/Filters/SMP -I$vtkdir/vtk/Filters/ParallelDIY2 -I$vtkdir/vtk/Filters/Modeling -I$vtkdir/vtk/Filters/Topology -I$vtkdir/vtk/Filters/Generic -I$vtkdir/vtk/Filters/ParallelGeometry -I$vtkdir/vtk/Filters/ParallelImaging -I$vtkdir/vtk/Filters/ParallelFlowPaths -I$vtkdir/vtk/Filters/ParallelMPI -I$vtkdir/vtk/Filters/Parallel -I$vtkdir/vtk/Filters/Python -I$vtkdir/vtk/ThirdParty/incremental -I$vtkdir/vtk/ThirdParty/freerange -I$vtkdir/vtk/ThirdParty/utf8 -I$vtkdir/vtk/ThirdParty/mpi4py -I$vtkdir/vtk/ThirdParty/sqlite -I$vtkdir/vtk/ThirdParty/gl2ps -I$vtkdir/vtk/ThirdParty/png -I$vtkdir/vtk/ThirdParty/ZopeInterface -I$vtkdir/vtk/ThirdParty/expat -I$vtkdir/vtk/ThirdParty/tiff -I$vtkdir/vtk/ThirdParty/jpeg -I$vtkdir/vtk/ThirdParty/TclTk -I$vtkdir/vtk/ThirdParty/VPIC -I$vtkdir/vtk/ThirdParty/netcdf -I$vtkdir/vtk/ThirdParty/SixPython -I$vtkdir/vtk/ThirdParty/constantly -I$vtkdir/vtk/ThirdParty/vtkm -I$vtkdir/vtk/ThirdParty/diy2 -I$vtkdir/vtk/ThirdParty/exodusII -I$vtkdir/vtk/ThirdParty/AutobahnPython -I$vtkdir/vtk/ThirdParty/xdmf2 -I$vtkdir/vtk/ThirdParty/wslink -I$vtkdir/vtk/ThirdParty/Twisted -I$vtkdir/vtk/ThirdParty/hdf5 -I$vtkdir/vtk/ThirdParty/verdict -I$vtkdir/vtk/ThirdParty/txaio -I$vtkdir/vtk/ThirdParty/xdmf3 -I$vtkdir/vtk/ThirdParty/lz4 -I$vtkdir/vtk/ThirdParty/glew -I$vtkdir/vtk/ThirdParty/freetype -I$vtkdir/vtk/ThirdParty/zfp -I$vtkdir/vtk/ThirdParty/jsoncpp -I$vtkdir/vtk/ThirdParty/hyperlink -I$vtkdir/vtk/ThirdParty/netcdfcpp -I$vtkdir/vtk/ThirdParty/oggtheora -I$vtkdir/vtk/Domains/ChemistryOpenGL2 -I$vtkdir/vtk/Domains/Chemistry -I$vtkdir/vtk/Domains/Microscopy -I$vtkdir/vtk/Imaging/Sources -I$vtkdir/vtk/Imaging/Morphological -I$vtkdir/vtk/Imaging/General -I$vtkdir/vtk/Imaging/Core -I$vtkdir/vtk/Imaging/Statistics -I$vtkdir/vtk/Imaging/OpenGL2 -I$vtkdir/vtk/Imaging/Stencil -I$vtkdir/vtk/Imaging/Color -I$vtkdir/vtk/Imaging/Fourier -I$vtkdir/vtk/Imaging/Hybrid -I$vtkdir/vtk/Imaging/Math -I$vtkdir/vtk/IO/XMLParser -I$vtkdir/vtk/IO/ADIOS -I$vtkdir/vtk/IO/EnSight -I$vtkdir/vtk/IO/AMR -I$vtkdir/vtk/IO/NetCDF -I$vtkdir/vtk/IO/LAS -I$vtkdir/vtk/IO/ParallelXML -I$vtkdir/vtk/IO/FFMPEG -I$vtkdir/vtk/IO/PLY -I$vtkdir/vtk/IO/GDAL -I$vtkdir/vtk/IO/LSDyna -I$vtkdir/vtk/IO/VPIC -I$vtkdir/vtk/IO/PDAL -I$vtkdir/vtk/IO/Core -I$vtkdir/vtk/IO/Geometry -I$vtkdir/vtk/IO/ParallelNetCDF -I$vtkdir/vtk/IO/Xdmf3 -I$vtkdir/vtk/IO/PostgreSQL -I$vtkdir/vtk/IO/MySQL -I$vtkdir/vtk/IO/XML -I$vtkdir/vtk/IO/SQL -I$vtkdir/vtk/IO/MINC -I$vtkdir/vtk/IO/MPIImage -I$vtkdir/vtk/IO/GeoJSON -I$vtkdir/vtk/IO/Video -I$vtkdir/vtk/IO/ParallelXdmf3 -I$vtkdir/vtk/IO/SegY -I$vtkdir/vtk/IO/TecplotTable -I$vtkdir/vtk/IO/Image -I$vtkdir/vtk/IO/ParallelExodus -I$vtkdir/vtk/IO/Legacy -I$vtkdir/vtk/IO/Infovis -I$vtkdir/vtk/IO/Import -I$vtkdir/vtk/IO/ParallelLSDyna -I$vtkdir/vtk/IO/MPIParallel -I$vtkdir/vtk/IO/Xdmf2 -I$vtkdir/vtk/IO/ODBC -I$vtkdir/vtk/IO/Exodus -I$vtkdir/vtk/IO/Export -I$vtkdir/vtk/IO/ExportOpenGL -I$vtkdir/vtk/IO/TRUCHAS -I$vtkdir/vtk/IO/ExportOpenGL2 -I$vtkdir/vtk/IO/Movie -I$vtkdir/vtk/IO/Parallel -I$vtkdir/vtk/Infovis/BoostGraphAlgorithms -I$vtkdir/vtk/Infovis/Core -I$vtkdir/vtk/Infovis/Boost -I$vtkdir/vtk/Infovis/Layout -I$vtkdir/vtk/Interaction/Style -I$vtkdir/vtk/Interaction/Widgets -I$vtkdir/vtk/Interaction/Image -I$vtkdir/vtk/Common/Transforms -I$vtkdir/vtk/Common/Core -I$vtkdir/vtk/Common/ComputationalGeometry -I$vtkdir/vtk/Common/System -I$vtkdir/vtk/Common/Color -I$vtkdir/vtk/Common/DataModel -I$vtkdir/vtk/Common/Misc -I$vtkdir/vtk/Common/Math -I$vtkdir/vtk/Common/ExecutionModel -I$vtkdir/vtk/Wrapping/Java -I$vtkdir/vtk/Wrapping/Tcl -I$vtkdir/vtk/Wrapping/Tools -I$vtkdir/vtk/Wrapping/PythonCore -I$vtkdir/vtk/Wrapping/Python -I$vtkdir/vtk/Parallel/MPI -I$vtkdir/vtk/Parallel/Core -I$vtkdir/vtk/Parallel/MPI4Py -I$vtkdir/paraview/ParaViewCore/Animation -I$vtkdir/paraview/ParaViewCore/CinemaReader -I$vtkdir/paraview/ParaViewCore/VTKExtensions -I$vtkdir/paraview/ParaViewCore/ClientServerCore -I$vtkdir/paraview/ParaViewCore/ClientServerStream -I$vtkdir/paraview/ParaViewCore/Common -I$vtkdir/paraview/ParaViewCore/ServerImplementation -I$vtkdir/paraview/ParaViewCore/ServerManager -I$vtkdir/paraview/Wrapping/ClientServer -I$vtkdir/qt5/5.10.1/gcc_64/include -I$vtkdir/qt5/5.10.1/gcc_64/include/QtWidgets -I$vtkdir/qt5/5.10.1/gcc_64/include/QtGui -I$vtkdir/qt5/5.10.1/gcc_64/include/QtCore -I. -isystem /usr/include/libdrm -I. -I$vtkdir/qt5/5.10.1/gcc_64/mkspecs/linux-g++

lflags = \
    -mkl \
    -qopenmp \
    -lstdc++ \
    -L$vtkdir/vtk/lib -lvtkIOLegacy-8.1 -lvtkInteractionWidgets-8.1 -lvtkRenderingQt-8.1 -lvtkImagingColor-8.1 -lvtkInteractionImage-8.1 -lvtkproj4-8.1 -lvtkoggtheora-8.1 -lvtkhdf5-8.1 -lvtkImagingSources-8.1 -lvtkParallelCore-8.1 -lvtkIOExport-8.1 -lvtkIOGeometry-8.1 -lvtkRenderingFreeType-8.1 -lvtkIOVideo-8.1 -lvtkInfovisCore-8.1 -lvtkGUISupportQt-8.1 -lvtkFiltersTexture-8.1 -lvtkRenderingGL2PSOpenGL2-8.1 -lvtkImagingStencil-8.1 -lvtkDICOMParser-8.1 -lvtkFiltersCore-8.1 -lvtkIOPLY-8.1 -lvtkImagingGeneral-8.1 -lvtkRenderingVolumeOpenGL2-8.1 -lvtktiff-8.1 -lvtkCommonSystem-8.1 -lvtkCommonMath-8.1 -lvtkInteractionStyle-8.1 -lvtkImagingFourier-8.1 -lvtkIOAMR-8.1 -lvtkCommonComputationalGeometry-8.1 -lvtkglew-8.1 -lvtkFiltersSources-8.1 -lvtkmetaio-8.1 -lvtkRenderingCore-8.1 -lvtkjsoncpp-8.1 -lvtkGeovisCore-8.1 -lvtkIOImport-8.1 -lvtkCommonMisc-8.1 -lvtkRenderingAnnotation-8.1 -lvtkImagingMorphological-8.1 -lvtkFiltersSMP-8.1 -lvtkRenderingOpenGL2-8.1 -lvtksqlite-8.1 -lvtkFiltersHyperTree-8.1 -lvtkFiltersTopology-8.1 -lvtkNetCDF-8.1 -lvtkFiltersImaging-8.1 -lvtkIOMINC-8.1 -lvtkIOXML-8.1 -lvtkFiltersParallelImaging-8.1 -lvtkFiltersSelection-8.1 -lvtkImagingMath-8.1 -lvtkFiltersGeometry-8.1 -lvtkFiltersVerdict-8.1 -lvtkRenderingLabel-8.1 -lvtknetcdfcpp-8.1 -lvtkViewsQt-8.1 -lvtkImagingCore-8.1 -lvtkFiltersStatistics-8.1 -lvtkImagingStatistics-8.1 -lvtkFiltersGeneral-8.1 -lvtklibharu-8.1 -lvtklibxml2-8.1 -lvtkInfovisLayout-8.1 -lvtkpng-8.1 -lvtkFiltersFlowPaths-8.1 -lvtkCommonTransforms-8.1 -lvtkCommonExecutionModel-8.1 -lvtkViewsInfovis-8.1 -lvtkexoIIc-8.1 -lvtkIOSQL-8.1 -lvtkFiltersPoints-8.1 -lvtkDomainsChemistryOpenGL2-8.1 -lvtkIOXMLParser-8.1 -lvtkfreetype-8.1 -lvtkalglib-8.1 -lvtkFiltersParallel-8.1 -lvtkIOEnSight-8.1 -lvtkFiltersGeneric-8.1 -lvtkRenderingContextOpenGL2-8.1 -lvtkRenderingContext2D-8.1 -lvtkFiltersHybrid-8.1 -lvtkIONetCDF-8.1 -lvtkGUISupportQtSQL-8.1 -lvtkjpeg-8.1 -lvtkIOTecplotTable-8.1 -lvtkgl2ps-8.1 -lvtkViewsContext2D-8.1 -lvtkRenderingLOD-8.1 -lvtkIOParallelXML-8.1 -lvtkIOImage-8.1 -lvtkverdict-8.1 -lvtklz4-8.1 -lvtkFiltersProgrammable-8.1 -lvtkDomainsChemistry-8.1 -lvtkChartsCore-8.1 -lvtkzlib-8.1 -lvtkImagingHybrid-8.1 -lvtkViewsCore-8.1 -lvtkFiltersExtraction-8.1 -lvtkCommonDataModel-8.1 -lvtkIOInfovis-8.1 -lvtkFiltersAMR-8.1 -lvtkIOExodus-8.1 -lvtkIOLSDyna-8.1 -lvtkCommonCore-8.1 -lvtkRenderingVolume-8.1 -lvtkCommonColor-8.1 -lvtkIOParallel-8.1 -lvtkexpat-8.1 -lvtkFiltersModeling-8.1 -lvtkIOMovie-8.1 -lvtksys-8.1 -lvtkhdf5_hl-8.1 -lvtkIOCore-8.1 -lvtkIOExportOpenGL2-8.1 -lvtkRenderingImage-8.1 -L$vtkdir/qt5/5.10.1/gcc_64/lib -lGL -lpthread 

ccflags = -O3 -w -qopenmp 

# compile
$(objdir)/%.o : ./%.cpp
    $(cxx) -o $@ -c $(ccflags) $(inc) $<

# link
$(exec) : $(obj)
    $(cxx) -o $@ $^ $(lflags) $(inc)

# make directory
makedir:
    -@mkdir -p $(bindir)
    -@mkdir -p $(objdir)

# clean
clean:
    -@rm -rf $(objdir)/*.o 
```

# c# - DataGridViewCombobox 列中的自动完成有什么奇怪的行为？

> ID：12216530
> 
> 赞同：6
> 
> 时间：2012-08-31T13:38:23.043
> 
> 标签：c#, datagridview, combobox, datagridviewcombobox, datagridviewcomboboxcell

我正在使用 ( `EditingControlShowing`) 事件在 DataGridViewComboBox 列中启用自动完成功能。

```
private void dataGridView1_EditingControlShowing(object sender,  DataGridViewEditingControlShowingEventArgs e)
{
    if (e.Control is DataGridViewComboBoxEditingControl)
    {
        ComboBox combo = (ComboBox)e.Control;
        ((ComboBox)e.Control).DropDownStyle = ComboBoxStyle.DropDown;
        ((ComboBox)e.Control).AutoCompleteSource = AutoCompleteSource.ListItems;
        ((ComboBox)e.Control).AutoCompleteMode =  System.Windows.Forms.AutoCompleteMode.SuggestAppend;
    }
} 
```

但它有一个奇怪的行为，当我输入一些字符然后我离开单元格（Tab 或右键）时，值没有改变。
但如果我重复这一点，价值就会改变。从[这里](http://www.c-sharpcorner.com/Forums/UploadFile/houssam11350/08312012091630AM/autocompleteproblem.zip)，您可以下载解释问题的源代码和 (EXE) 视频。

你能帮我让它正常工作吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T20:53:21.927

似乎对于第一个进入组合框的条目，选项卡不再触发值的提交。不知道为什么会这样，但似乎处理`CurrentCellDirtyStateChanged`和提交编辑可以修复它。

```
void dataGridView1_CurrentCellDirtyStateChanged(object sender, EventArgs e)
{
    // You could also check here to see if the cell in question is the combobox
    if (dataGridView1.IsCurrentCellDirty)
    {
        dataGridView1.CommitEdit(DataGridViewDataErrorContexts.Commit);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:43:14.643

我这样解决了：

```
private void dataGridView1_EditingControlShowing(object sender, DataGridViewEditingControlShowingEventArgs e)
{
    if (e.Control is DataGridViewComboBoxEditingControl)
    {
        ComboBox combo = (ComboBox)e.Control;
        ((ComboBox)e.Control).DropDownStyle = ComboBoxStyle.DropDown;
        ((ComboBox)e.Control).AutoCompleteMode = System.Windows.Forms.AutoCompleteMode.SuggestAppend;
        ((ComboBox)e.Control).AutoCompleteSource = AutoCompleteSource.ListItems;
        combo.Validated -= new EventHandler(combo_Validated);
        combo.Validated += new EventHandler(combo_Validated);

    }
}

public static object GetPropValue(object src, string propName)
{
    if (src == null)
        return null;
    return src.GetType().GetProperty(propName).GetValue(src, null);
}

void combo_Validated(object sender, EventArgs e)
{
    Object selectedItem = ((ComboBox)sender).SelectedItem;
    DataGridViewComboBoxColumn col = (DataGridViewComboBoxColumn)dataGridView1.Columns[dataGridView1.CurrentCell.ColumnIndex];
    if (!String.IsNullOrEmpty(col.ValueMember))
        dataGridView1.CurrentCell.Value = GetPropValue(selectedItem, col.ValueMember);
    else
       dataGridView1.CurrentCell.Value = selectedItem;

} 
```

# java - 通过反射调用方法时包含参数

> ID：12216532
> 
> 赞同：2
> 
> 时间：2012-08-31T13:38:32.060
> 
> 标签：java, android, reflection

我找到了以下代码：

```
try{ 
   Object service  = getSystemService("statusbar");
   Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
   Method expand = statusbarManager.getMethod("expand");
   expand.invoke(service);
 }
 catch(Exception ex){           

 } 
```

它适用于扩展状态栏，但我想要访问的方法不是扩展，它的“禁用”和禁用将 int 作为参数。有人可以告诉我在以这种方式调用方法时如何包含参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:57:07.147

`invoke`需要额外的参数作为参数，所以你可以这样调用它：

```
Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
Method disable = statusbarManager.getMethod("disable", Integer.TYPE); //takes an int
disable.invoke(service, 2); //calls disable(2) 
```

注意：正如评论中指出的那样，这是一个坏主意。

# javascript - 如何在 Javascript 中测试函数的相等性

> ID：12216540
> 
> 赞同：28
> 
> 时间：2012-08-31T13:39:15.500
> 
> 标签：javascript, function, equality

我如何才能对 bar 和 foo 的相等性进行阳性测试？

```
 foo = function() {
    a = 1;
 }; 

 bar = function() {
    a = 1;
 }; 

 if (foo === bar) alert('baz');
 if (foo == bar) alert('qux'); 
```

以上两个条件都是假的。

**更新 - 根据要求，我需要测试功能相等的原因**

我正在构建一个发布/订阅框架，需要传递回调才能取消订阅主题。

请看小提琴：http: [//jsfiddle.net/jamiefearon/hecMS/47/](http://jsfiddle.net/jamiefearon/hecMS/47/)

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-08-31T13:44:26.853

您可以通过比较调用它们的结果来检查两个函数的内容是否*完全相同*`toString`

```
 var foo = function() {
    a = 1;
 }; 

 var bar = function() {
    a = 1;
 }; 

alert(foo.toString() == bar.toString());​ 
```

但是，如果只有一个不同的角色，那将失败。另一方面，检查两个函数是否*做同样的事情几乎是不可能的。*

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2014-02-10T14:38:22.670

问题是函数有不同的相等概念。

*   引用相等。函数存储在内存中的某个位置，并从某个地址开始。对于两个函数名称（本质上是内部地址），`true`如果两个名称都指向同一个地址，则引用相等性会给您。当你分配一个时，这是一个问题`bar = foo`。JavaScript 中使用了引用相等。
*   另一个答案中提出的源代码平等。如果您更改函数体中的任何字符，它将不起作用。此外，`toSource`目前（截至 2014 年）仅在 Firefox 中可用，因为它不是 W3C 标准化的。
*   源代码的句法等式。可以使用抽象语法树来抵制对空格和注释的修改。可以使用 lambda 演算中定义的 alpha 等价（即函数的等价，其中变量始终被重命名），但也有
*   [扩展相等](http://en.wikipedia.org/wiki/Extensionality)，当函数以相同方式工作时相等。有[一个定理](http://en.wikipedia.org/wiki/Rice%27s_theorem)表明没有算法来检查函数的外延相等，所以它肯定不是你要寻找的那个。虽然，在一些比 JS 更高级的语言中
*   内涵相等（您可以手动证明函数相等，或者您的程序无法编译）和
*   观察平等（[这个太高级了，无法解释](http://lambda-the-ultimate.org/node/3547)）。

所以，请注意你认为的平等是什么。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T13:41:07.923

您可以测试两个变量是否*引用*完全相同的函数对象，您可以将函数转换为字符串并查看它们是否真的完全相同，但是尝试确定两个函数是否*执行完全相同的事情*会有点麻烦更难，或者更难。

通过 minifier 运行一对函数会很有趣，因为 minifier 会进行大量的静态分析。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-02-26T22:05:40.653

如果您查看事件的 Node.js 源

[https://github.com/nodejs/node/blob/master/lib/events.js](https://github.com/nodejs/node/blob/master/lib/events.js)

你可以看到核心团队`===`用来比较函数是否相等。

我不确定`===`函数是如何实现的，但我当然希望不是`toString()`，因为两个不同的函数可能具有相同的`toString()`结果。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T13:43:24.950

似乎如果您需要此功能，最好稍微重组您的程序。像这样的东西可以工作：

```
function baz(myInt) { return 3 + myInt; }
function asd(a) { return 3 + a; }

var foo = baz;
foo(1); //returns 4

var bar = baz;
bar(3); //returns 6

foo === bar; //true

bar = asd;
bar(3); //returns 6

foo === bar; //false 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T13:43:13.420

基本上，一般情况下是不可能的。无法在 javascript 中测试功能相等性。您可以获得的最接近的是将它们的代码作为字符串比较是否相等。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-12-29T21:13:41.123

简单的方法：如果您实现您的订阅 API 以在每次调用它时返回一个唯一的 ID，那么它将像使用该 ID 调用取消订阅 API 一样简单。在内部，在简单的场景中，您将使用一个简单的数组来存储所有订阅者，但使用这种方法，您将不得不存储。ID 可以是一个简单的计数器，您可以在每次订阅调用时递增。

{ID：订阅者的回调函数}

因此，当您要发布给所有订阅者时，请遍历所有订阅者。

高级方法：不要在订阅 API 中接受简单的函数名称，而是接受应该具有 onMessage 函数的类的对象（或您想给此方法提供的任何名称）。然后，您可以简单地将相同的对象实例传递给取消订阅 API 以取消注册。当您需要通知订阅者时，您可以调用所有订阅者的 instance.onMessage 函数。比较两个对象引用很容易。

# c# - MVC Api Action & System.Web.Http.AuthorizeAttribute - 如何获取发布参数？

> ID：12216545
> 
> 赞同：5
> 
> 时间：2012-08-31T13:39:22.863
> 
> 标签：c#, asp.net-mvc, post, controller

我有以下 API 控制器：

```
public class TestController : ApiController
{
    [HttpPost]
    [APIAuthorizeAttribute]
    public IQueryable<Computers> ListOfComputersInFolder(Guid folderId)
    {
        return GetListOfComputersForFolder(folderId);
    } // End of ListOfComputersInFolder
} // End of TestController 
```

以下是我的基本`APIAuthorizeAttribute`。

```
public class APIAuthorizeAttribute : System.Web.Http.AuthorizeAttribute
{
    public override void OnAuthorization(System.Web.Http.Controllers.HttpActionContext actionContext)
    {
        var Request = System.Web.HttpContext.Current.Request;
        var folderId = Request.RequestContext.RouteData.Values["folderId"] ?? Request.Params["folderId] as string;
        if(null == folderId)
        {
            folderId = actionContext.ControllerContext.RouteData.Values["folderId"];
        }

        base.OnAuthorization(actionContext);
    }
} 
```

我遇到的问题是`folderId`在 onAuthorize 方法中出现 null 。（我基于[此](https://stackoverflow.com/questions/5225551/reference-generic-url-parameter-in-authorizeattribute)代码获取器）。

在我看来，这应该可行，但我似乎无法做到。关于我做错了什么以及我应该如何获取发布的参数的任何想法？

编辑：我尝试使用以下内容直接读取帖子数据：

```
using (StreamReader inputStream = new StreamReader(request.InputStream))
{
    output = inputStream.ReadToEnd();
}
request.InputStream.Position = 0; 
```

这让我得到了 JSON 格式的帖子数据，然后我可以解析这些数据，但是我的电话从来没有成功过。我在响应中得到以下异常：

```
 <h2>500 - Internal server error.</h2>
  <h3>There is a problem with the resource you are looking for, and it cannot be displayed.

at System.Json.JXmlToJsonValueConverter.JXMLToJsonValue(Stream jsonStream, Byte[] jsonBytes)\u000d\u000a   at System.Net.Http.Formatting.JsonMediaTypeFormatter.<>c__DisplayClass7.<OnReadFromStreamAsync>b__6()\u000d\u000a   at System.Net.Http.Internal.TaskHelpers.RunSynchronously[TResult](Func`1 func, CancellationToken cancellationToken)"} 
```

编辑：最后，这似乎可能是`ApiController`,`System.Web.Http.AuthorizeAttribute`和`HttpPost`（它在使用时确实有效`HttpGet`）组合的错误。已提交错误报告。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T13:44:30.773

[AuthorizeAttribute](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.onauthorization%28v=vs.98%29.aspx)应该有一个[AuthorizationContext](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizationcontext%28v=vs.98%29.aspx)参数而不是一个`HttpActionContext`，您应该可以从中访问`RouteData`例如

```
public override void OnAuthorization(AuthorizationContext filterContext)
{
    var folderId = filterContext.RouteData.Values["folderId"];
    ...
} 
```

**更新**

注意到您正在使用`ApiController`并因此使用`Http.AuthorizeAttribute`（解释为什么您没有`AuthorizationContext`）。在这种情况下，您可以`RouteData`通过操作上下文获取

```
var folderId = actionContext.Request.GetRouteData().Values["folderId"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-20T18:11:34.733

我也遇到过这个问题。

为了解决这个问题，我编写了以下方法，我从 OnAuthorization 方法中调用它：

```
private static object GetValueFromActionContext(HttpActionContext actionContext, string key)
{
    var queryNameValuePairs = actionContext.Request.GetQueryNameValuePairs();

    var value = queryNameValuePairs
        .Where(pair => pair.Key.Equals(key, StringComparison.OrdinalIgnoreCase))
        .Select(pair => pair.Value)
        .FirstOrDefault();

    var methodInfo = ((ReflectedHttpActionDescriptor) (actionContext.ActionDescriptor)).MethodInfo;
    var parameters = methodInfo.GetParameters();
    var parameterType =
        parameters.Single(p => p.Name.Equals(key, StringComparison.OrdinalIgnoreCase)).ParameterType;

    var converter = TypeDescriptor.GetConverter(parameterType);

    return converter.ConvertFromString(value);
} 
```

这段代码做了以下假设：

*   您提取的键与操作方法上的参数名称匹配。

*   您获得的参数类型将具有对该类型有效的转换器。

*   您没有在参数上使用任何自定义绑定或格式。

在我使用代码的场景中，我只期望简单的类型，例如 Guid、Boolean、String 等，并且可以根据您的要求进行自定义。

扩展方法 GetQueryNameValuePairs 是 System.Net.Http.HttpRequestMessageExtensions 类的一部分，将读取查询字符串/表单数据。

示例使用：

```
object folderId = GetValueFromActionContext(actionContext, "folderId"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-10-27T08:46:21.927

如果请求的内容类型是`application/json;charset=utf-8`

API 操作可以检索 Post 数据，如下所示：

```
Stream stream = actionContext.Request.Content.ReadAsStreamAsync().Result;
Encoding encoding = Encoding.UTF8;
stream.Position = 0;
string responseData = "";

using (StreamReader reader = new StreamReader(stream, encoding))
{
    responseData = reader.ReadToEnd().ToString();
}

var dic = JsonConvert.DeserializeObject<IDictionary<string, string>>(responseData); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:47:44.127

你可以试试这个扩展方法：（这是工作代码的摘录）

```
public static string GetParameter(this RequestContext requestContext, string key)
{
    if (key == null) throw new ArgumentNullException("key");

    var lowKey = key.ToLower();

    return requestContext.RouteData.Values.ContainsKey(lowKey) &&
           requestContext.RouteData.Values[lowKey] != null
               ? requestContext.RouteData.Values[lowKey].ToString()
               : requestContext.HttpContext.Request.Params[lowKey];
} 
```

我同意 James 的回答，在这种情况下，您必须通过 actionContext 访问请求上下文。

# java - 使用 entitymanager 急切地加载集合

> ID：12216546
> 
> 赞同：3
> 
> 时间：2012-08-31T13:39:27.967
> 
> 标签：java, ejb, entitymanager

我有一个实体（联系人），它有一个延迟加载的集合。我不知道要更改它，但是当我执行 em.find(Contact.class, myID) 时需要加载集合，这可以在不更改实体且不使用 jpql 语句和 fetch 的情况下完成。?

```
public class Contact implements Serializable{

    private static final long serialVersionUID = 1L;

    @Id 
    @Column(name="contactId", nullable=false)
    public String contactId;    

    @OneToMany(cascade = CascadeType.ALL, mappedBy = "contact", orphanRemoval = true, fetch=FetchType.LAZY)
    private List<ContactTaskRelation> taskRelations = new ArrayList<ContactTaskRelation>();

} 
```

从我的无状态 bean

```
@PersistenceContext(unitName="myContext")
private EntityManager em;

@TransactionAttribute(TransactionAttributeType.REQUIRES_NEW)
private Contact getContact(ContactMapping mappedContact){
    //force em to load the collection of taskRelations
    return em.find(Contact .class, mappedContact.getContact());
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T13:45:54.000

```
Contact entity = em.find(Contact.class, mappedContact.getContact());
entity.getTaskRelations().size(); // this will fetch the TaskRelations
return entity; 
```

缺点是这会对数据库进行两次查询：一次获取联系人，另一次获取任务关系。

另一种选择是进行查询，如下所示：

```
String queryString = "SELECT model FORM Contact model JOIN FETCH model.taskRelations WHERE model.id = :id";
Query query = em.createQuery(queryString);
query.setParameter("id", mappedContact.getContact());
return query.getSingleResult(); // or getResultList(); 
```

此选项仅进行一次查询。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T14:26:56.757

您可以结合@arthuro 的解决方案和反射来调用所有getter。像这样的东西：

```
public static <T> T findEager(EntityManager em, Class<T> type, Object id) {
    T entity = em.find(type, id);
    for (Field field: type.getDeclaredFields()) {
        OneToMany annotation = field.getAnnotation(OneToMany.class);
        if (annotation != null) {
            if (annotation.fetch().equals(FetchType.LAZY)) {
                try {
                    new PropertyDescriptor(field.getName(), type).getReadMethod().invoke(entity);
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        }
    }
    return entity;
} 
```

然后像这样调用它：

```
Contact entity = findEager(em, Contact.class, mappedContact.getContact()); 
```

# javascript - 检测用户是否具有打印功能？

> ID：12216551
> 
> 赞同：9
> 
> 时间：2012-08-31T13:39:53.767
> 
> 标签：javascript, html, css, printing

客户要求将打印按钮添加到他们的站点，并希望对没有打印能力的用户（例如大多数移动设备）隐藏该按钮。

有什么方法可以通过 JavaScript 来检测客户端是否具有打印功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:45:05.953

该要求是有缺陷的，因为大多数用户代理都可以“打印”，而 UA 是否可以打印的知识并不是网站业务。

许多移动浏览器可以打印，即使没有连接打印机（打印到 pdf、云打印等），大多数 Web 浏览器也可以打印。对于任何用户代理来说，在用户不知情的情况下明确说明其打印功能的任何内容都是一个安全问题。这就是打印样式表的用途（因此网站根本不必知道它是否正在打印）。

您可以做的是隐藏小屏幕用户代理上的按钮，这些用户仍然可以使用用户代理本身打印他们的文档。您还可以检测特定的用户代理并为其隐藏按钮。

链接

[http://www.alistapart.com/articles/return-of-the-mobile-stylesheet](http://www.alistapart.com/articles/return-of-the-mobile-stylesheet)：讨论移动样式表和相关问题。

[http://mobile.smashingmagazine.com/2010/11/03/how-to-build-a-mobile-website/#mobile-stylesheets](http://mobile.smashingmagazine.com/2010/11/03/how-to-build-a-mobile-website/#mobile-stylesheets)：有关移动样式表的更多信息。

基本的移动样式表附件：

`<link rel="stylesheet" href="mobile.css" media="handheld" />`

按屏幕尺寸检测：

`<link rel="stylesheet" href="mobile.css" media="only screen and (max-device width:480px)"/>`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T15:52:19.403

如果 WURFL 正则表达式对您的应用程序来说太慢，或者您正在使用 varnish、squid 或其他任何不允许您使用 WURFL 的东西，您可能只是尝试使用 JS (navigator.userAgent) 分析用户代理字符串和找出诸如“iOS 4+”之类的内容，因为至少这些设备具有打印功能（只要它们位于带有网络打印机的网络范围内）。这是一个简单的解决方案（但永远不会涵盖所有 iOS 设备，因为它们有太多不同的用户代理字符串）。

您可以在此处找到大量用户代理字符串示例：http: [//deviceatlas.com/](http://deviceatlas.com/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-08T00:10:51.927

几个澄清。WURFL 不使用正则表达式，或者至少不以评论似乎暗示的方式使用。RegExps 可能涉及一些特别难以分析的 UA，但对于每个 UA，这只发生一次，之后匹配被缓存。

此外，ScientiaMobile 最近宣布推出适用于 Varnish Cache、Apache 和 NGINX 的 WURFL 模块，因此现在可以在“网络”级别使用 WURFL。

此页面有更多详细信息：[http ://www.scientiamobile.com/blog/post/view/id/25/title/HTTP-and-Mobile%3A-The-Missing-Header-](http://www.scientiamobile.com/blog/post/view/id/25/title/HTTP-and-Mobile%3A-The-Missing-Header-)

最后声明：我知道这些事情是因为我是 WURFL 的创建者和 ScientiaMobile 的 CTO。

# ssas - 超出的尺寸值显示在浏览器中

> ID：12216554
> 
> 赞同：1
> 
> 时间：2012-08-31T13:40:04.767
> 
> 标签：ssas, cube

我有一个具有下一个结构的立方体： ![在此处输入图像描述](../Images/485e8f44c9dd1df9824bd4a39b4dfb84.png)

问题是：当我使用 DimRetailStore 维度中的任何属性浏览多维数据集时，浏览器会显示不属于 FactStore 度量的值。当我从 FactStore 添加指标时，维度的多余值会消失。如果我删除 FactRegion 度量，所有数据都会正确显示。

是否可以只显示属于 FactStore Measure 的数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T14:59:50.867

**解决方案：**`FactRegion`在`FactStore`措施列表中移动就足够了。

# scala - 如何在 FreeBSD 9 上设置 Typesafe 堆栈？

> ID：12216555
> 
> 赞同：4
> 
> 时间：2012-08-31T13:40:04.767
> 
> 标签：scala, freebsd, typesafe-stack

我渴望通过 Typesafe 堆栈进入 Scala，但无法在 FreeBSD 9.0 stable 上启动并运行它。具体来说，我在使用 giter8 时遇到问题（无法通过征兵安装）。

你知道怎么做吗？（我正在使用来自 typesafe.com 的“通用”tar 安装）和 FreeBSD 上的 linux-sun-jdk17 软件包。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-19T15:51:51.083

我不熟悉 Scala，但一般来说，在 FreeBSD 上安装任何软件最好通过端口完成。对于 Scala，已经有一个端口[lang/scala](http://www.freshports.org/lang/scala)，这应该是您的第一步：

```
% cd /usr/ports/lang/scala
% make install clean 
```

祝你好运！

# testing - 自动测试总是赢？

> ID：12216558
> 
> 赞同：1
> 
> 时间：2012-08-31T13:40:23.527
> 
> 标签：testing, automation

我正在阅读此页面：

[http://support.smartbear.com/articles/testcomplete/manager-overview/](http://support.smartbear.com/articles/testcomplete/manager-overview/)

和其他几个页面，就有用性而言，与手动测试相比，自动测试似乎是赢家。我想知道是不是这样？测试专家可以分享他们的想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:36:25.027

简短的回答是肯定的，自动化不是手动测试的替代品。自动化与手动不是非此即彼的，你需要两者。如果我必须选择其中一个，我会选择手动测试。

通过手动测试，聪明的探索性测试人员可以非常快速地覆盖许多不同的测试用例和排列，查看错误发生在哪里，然后利用他们的聪明才智找到更多同类错误。自动化测试通常每次都做同样的事情，因此它们只涵盖了通过您的软件的一条路径。

考虑它的方法是探索性测试是发现错误的最佳方法，自动化测试是防止回归的一种方法。自动化的隐性成本是长期维护成本，远远大于构建自动化的初始成本。

我有几篇关于自动化的文章，在这里：http: [//blogs.msdn.com/b/edglas/archive/2008/08/15/so-you-want-to-automate-your-test-cases.aspx](http://blogs.msdn.com/b/edglas/archive/2008/08/15/so-you-want-to-automate-your-test-cases.aspx) 在这里：http: [//blogs.msdn.com/b/edglas/archive/2009/06/13/increasing-the-roi-of-our-automation.aspx](http://blogs.msdn.com/b/edglas/archive/2009/06/13/increasing-the-roi-of-our-automation.aspx)

埃德。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T14:24:06.827

我会说这是完全错误的。自动化测试永远无法像摇滚明星黑拳击手那样进行探索性测试。此外，手动测试仪不存在维护难题，误报率也低得多。自动化很棒，不要误会我的意思。但我想要自动化的原因是处理简单、一致的任务，这些任务是基本检查，让我的黑匣子可以自由地尝试以我从未想象过的方式破坏应用程序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:57:00.743

是和不是。自动测试是良好软件开发的重要组成部分。每个开发人员都应该使用它。单元测试、集成测试、功能测试……使用它们！他们将使您的软件更好！这是肯定的！

另一方面，人工手动测试会让你的软件变得更糟吗？不！所以如果合适的话，让用户测试你的软件。什么是用户体验？你的软件好用吗？它符合用户的期望吗？

两者（自动测试和手动测试）都将帮助您改进代码。为您的项目找到合适的组合。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T14:11:17.573

在您的链接中为自动化测试提供的所有优点都足够准确，尽管我会在每个优点中添加“......如果做得好”。设计或实施不当的自动化测试可能会导致完全相反的结果（我已经看到了以下所有内容！）：

*   **由于准确性差而花费时间和金钱进行故障排除或维护**- 例如，如果测试经常由于时间变化或测试环境中的变化而失败，或者如果测试依赖于后来的一些未记录的行为变了
*   **减少测试覆盖率**——如果开发人员过于依赖自动化测试并且没有花时间考虑如何最好地运用他们正在处理的特定代码（“我正在修复一个涉及 X 和 Y 之间交互的错误，因此，如果我为 X 运行单元测试并为 Y 运行单元测试，那将涵盖所有内容！")
*   **错过手动测试可以做**的事情——例如，自动化测试的好处和坏处是它每次都做同样的事情。手动测试中的人为因素（时间变化、意外的鼠标点击或拼写错误、更改执行操作的顺序、注意可用性）可以发现自动化测试会遗漏的问题。
*   **损害团队士气**——如果不惜一切代价让脆弱的自动化测试通过，这会使我们无法真正确保系统按预期工作。

也就是说，合理设计和实施的自动化测试绝对是一个好处。我会争辩说，自动化和手动测试的合理混合通常比“始终自动化”要好。一些特别复杂的一次性测试可能无法证明将它们自动化以稍后重新运行所涉及的额外时间和成本是合理的。除非你的自动化是非常全面的，否则手动测试中固有的变化总是提供一些额外的信心和发现自动化测试过程可能没有遇到的事情的可能性。

# email - 是什么取代了 2.0.3 中的 play.mvc.Mailer playframewrok？

> ID：12216563
> 
> 赞同：0
> 
> 时间：2012-08-31T13:40:48.577
> 
> 标签：email, playframework-2.0

在 Play Framework 1.1 版的文档中，引用了*play.mvc.Mailer*，我觉得这很有趣： [http](http://www.playframework.org/documentation/1.1/emails#mvc) ://www.playframework.org/documentation/1.1/emails#mvc 但我使用的是 2.0 版。 3和想用同样的方法，但是没有找到*play.mvc.Mailer*这个类。有谁知道为什么它被删除并被替换了？拥抱！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:47:28.600

在 Play 2.x 中，它已被[Typesafe Email 插件](https://github.com/typesafehub/play-plugins/tree/master/mailer)取代。

# python - 如何在 linux 的 cron 作业中安排 bash 文件

> ID：12216566
> 
> 赞同：1
> 
> 时间：2012-08-31T13:40:56.707
> 
> 标签：python, cron

我正在尝试`(cron.sh)`在 cron 作业中安排一个 bash 脚本 下面是我的 bash 脚本代码

**cron.sh** : (如有错误请更正)

```
#!/bin/bash 
#chmod +x cron.sh

cd ~/main_file/folders/douys
python -u cron.py 
```

请让我知道如何使 bash 文件可执行

这里 cron.sh 文件运行一些 python 文件，当我`(cron.sh)`使用以下命令运行 bash 脚本时，它工作正常并且 python 文件正在执行

```
sh cron.sh 
```

但我想在 crons 作业中安排上述`cron.sh`文件每两分钟运行一次

谁能告诉我上面该怎么做

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:06:42.983

值得一提的是，如果您的 .sh 只是 .py 的“包装器”，您可以将以下行添加到 Python 文件的开头：

```
#!/usr/bin/python 
```

然后使其可执行：

```
$> chmod a+x code.py 
```

然后，您可以按照 m4573r 解释的说明直接将您的 Python 文件添加为 cronjob。（当然，'~/cron.sh' 变成了 'path/to/cron.py'）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:46:45.723

您可以通过运行`crontab -e`并在最后添加以下行来安排作业： `*/2 * * * * /path/to/cron.sh`.

您应该阅读`man cron`以获取更多信息。

# ms-access - 在 VBS 中使用 Access DoCmd.TransferText acExportDelim 将 txt 导出为 csv

> ID：12216568
> 
> 赞同：2
> 
> 时间：2012-08-31T13:41:00.607
> 
> 标签：ms-access, vbscript, export, export-to-csv

我有大量 .txt 文件 (>60k) 需要转换为以分号分隔的 .csv （因为某些字段是带有逗号的列表），以便我可以将它们上传到我们的 SQL 服务器。

我已经成功编写了一个 .vbs 文件，即使没有表存在，该文件也会将数据加载到 Access db 中，但我无法让 acExportDelim 覆盖/创建一个新文件。当 FileName.csv 不存在时，它也会出错。

必须有一些我错过的东西，但我不知道我需要从哪里开始寻找。

指令输入

```
C:\Afolder\TxtToCsv.vbs \\DataOnaServer\FileName.txt \\DataOnaServer\FileName.csv 
```

.vbs 文件

```
Dim oAccess
Set oAccess = CreateObject("Access.Application")
oAccess.OpenCurrentDatabase("C:\Afolder\WDS.accdb")
oAccess.DoCmd.TransferText acImportDelim,"FileTxtImportSpec","FileName",WScript.Arguments.Item(0),1
oAccess.DoCmd.TransferText acExportDelim,"FileCsvExportSpec","FileName",WScript.Arguments.Item(1)
oAccess.Quit 
```

文件丢失时收到错误消息。（好像还不能发图）

“Microsoft Access 数据库引擎无法处理对象 'lp4137.csv'。确保对象存在并且正确拼写其名称和路径。如果 'lp4137.csv' 不是本地对象，请检查您的网络连接或请联系服务器管理员。” 代码：800A0BC3

[Blue Claw Database Design](http://www.blueclaw-db.com/download/transfertext_outputto_examples.htm)链接到可下载文件演示，单击按钮 VBA 运行类似脚本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:53:59.197

使用您的 vbscript，您将需要专门定义“AcTextTransferType”枚举。在 MS Access 中，这些枚举是在访问库中定义的，并且会被找到。但是，vbscript 将无法识别枚举值并会引发错误。

```
acExportDelim = 2
acImportDelim = 0 
```

您可以在这篇 msdn 文章中找到枚举：http: [//msdn.microsoft.com/en-us/library/office/ff194227.aspx](http://msdn.microsoft.com/en-us/library/office/ff194227.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T17:51:39.963

这个问题是一个很好的例子，说明为什么始终包含`Option Explicit`在您的 VBScript 中很重要，就像您应该为 VBA 代码做的一样。

考虑这个 VBScript。

```
WScript.Echo "TypeName(acImportDelim): " & TypeName(acImportDelim)
WScript.Echo "TypeName(acExportDelim): " & TypeName(acExportDelim) 
```

在命令窗口中运行该脚本会返回此...

```
C:\share\Access>cscript //NoLogo AccessNamedConstants.vbs
TypeName(acImportDelim): Empty
TypeName(acExportDelim): Empty 
```

但是包含`Option Explicit`在该脚本的第一行会引发错误，因为脚本引擎不知道 Access 命名常量，因此它假定它们必须是未声明的变量。并且由于`Option Explicit`将未声明的变量视为错误，因此可以提前警告那些命名常量出现问题。

```
C:\share\Access>cscript //NoLogo AccessNamedConstants.vbs
C:\share\Access\AccessNamedConstants.vbs(2, 1) Microsoft VBScript runtime error:
 Variable is undefined: 'acImportDelim' 
```

# class - 根据安装在一台机器上的类选择 puppet 模板

> ID：12216570
> 
> 赞同：1
> 
> 时间：2012-08-31T13:41:12.663
> 
> 标签：class, templates, tomcat, configuration, puppet

我们正在使用 Puppet 将 Tomcat7 资源配置到 web 存档的 context.xml 文件。

我们有三个档案，每个档案都需要 context.xml 中的一组不同的资源条目。只要我们每个 tomcat 实例有一个工件，使用模板并通过工件填充正确的模板就很容易。

但是我们也有将所有三个工件都安装到一个 tomcat 实例中的场景（用于测试阶段）。在这种情况下，我们同时需要三个工件的*所有*资源条目。

我想到了两个解决方案，这两个解决方案对我来说都不是很满意：

1.  停止使用模板并使用 augeas 镜头编辑文件。缺点：context.xml 是 XML，并且 augeas 的使用容易出错并且在很大程度上不可读。

2.  从工件的类中删除模板复制部分，并将因子放入子类中，例如 artifact::supply-context （它为单个工件提供正确的配置）。还提供一个类 all_artifacts::supply-context（它为所有上下文提供配置）。
    缺点：类的使用不再透明。一个工件：“包括 artifactA, artifactA::supply-context”。所有工件：“包括 artifactA、artifactB、artifactC、all_artifacts::supply-context。

有没有人有更好的解决方案或建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-09T10:44:39.207

看到这个问题后，我首先想到的是“concat”模块[1]。您可以将其与模板组合，然后将相关部分连接在一起是一个订单。除此之外，您可以编写自定义文件汇编功能。

1.  [https://github.com/ripienaar/puppet-concat](https://github.com/ripienaar/puppet-concat)

# css - 将 Alpha 通道添加到给定的颜色

> ID：12216572
> 
> 赞同：23
> 
> 时间：2012-08-31T13:41:17.793
> 
> 标签：css

我有几个彼此相邻的，我想用 CSS 设置样式。我想为背景应用各种各样的颜色，但我希望较低的颜色是相同的颜色并降低不透明度，所以我想到了这个：

```
span.foo{
    background-color: rgba(0,0,0,1); /*or whatever*/
    color:white;
}

span.foo:last-child{
    background-color: rgba(*,*,*,0.5); /*just an example*/
} 
```

所以我想改变已经定义的背景的不透明度，而不影响文本的不透明度，只需使用 CSS3。

这可能吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T13:48:41.377

我相信没有办法做到这一点。

Css 本身是非常有限的，你可以用它做很多事情。

添加不透明度的唯一方法是：

```
opacity: 0.5 
```

但上述内容也会影响文本本身，而不仅仅是背景。

但是，您可以将其包装成将背景块与文本分开的方式，这样可以保持文本的颜色不变。

**编辑：**见小提琴：http: [//jsfiddle.net/YfSn7/30/](http://jsfiddle.net/YfSn7/30/)

但这可能看起来有些荒谬，所以我不建议使用它。

如果您确实想让事情变得更简单而不是过度复杂化，那么您猜想您将不得不接受这是不可能的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2018-04-27T10:04:27.780

如果你有 Sass：

```
background-color: rgba(white, 0.5); 
```

* * *

## 回答 #3

> 赞同：12
> 
> 时间：2018-05-12T14:03:25.100

如果你想使用现代 CSS：

```
--color_rgb: 0, 0, 0;
background-color: rgba(var(--color_rgb), 0.5)); 
```

但是仍然不可能将 alpha 添加到*给定*的颜色，如“其他一些样式表在 RGB、Hex 或其他东西中应用了这种颜色”。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2019-08-20T15:41:10.557

您可以使用 CSS 变量：

```
span.foo {
    --background-color: 0, 0, 0;
    background-color: rgba(var(--background-color), 1);
    color: white;
}

span.foo:last-child {
    background-color: rgba(var(--background-color), 0.5);
} 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2016-10-12T20:49:22.367

可以使用 JavaScript 完成，如下所示：

```
adjustHexOpacity (color, opacity) {
  const r = parseInt(color.slice(1, 3), 16);
  const g = parseInt(color.slice(3, 5), 16);
  const b = parseInt(color.slice(5, 7), 16);

  return 'rgba(' + r + ', ' + g + ', ' + b + ', ' + opacity + ')'; 
```

}

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-31T13:56:04.840

没有任何方法可以做到这一点，值的过度重复是 CSS 的失败之一。

因此，如果您的标准颜色是，`rgba(0,0,0,1);`那么您将需要`rgba(0,0,0,0.5);`透明版本。

你也许可以用一点 javascript 来做类似这个客户端的事情，但这并不完全干净。

# themes - OpenCart：在默认页面上添加左列（包含类别等）

> ID：12216573
> 
> 赞同：10
> 
> 时间：2012-08-31T13:41:17.910
> 
> 标签：themes, opencart

我想在默认页面中添加“左栏”（类别等）。我看到左侧面板存在于产品页面上，但在默认页面中缺失。请看屏幕截图。请建议。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-01T03:28:27.780

1 - 在模板文件夹中打开所需的页面，例如内容/信息页面：

```
catalog\view\theme\default\template\information.tpl 
```

2 - 在所需位置添加此行：

```
<?php echo $column_left; ?> 
```

如果失败，打开该代码的相关MVC控制器模型，例如：

```
catalog\controller\information.php 
```

寻找`$this->children = array(`

确保数组包含左侧面板，例如：

```
$this->children = array(
    'common/column_left',
    'common/column_right',
    'common/content_top',
    'common/content_bottom',
    'common/footer',
    'common/header'
); 
```

我希望您的意思是默认情况下的信息等，也就是主页，已经有这个：（`\catalog\view\theme\default\template\common\home.tpl`）

```
<?php echo $header; ?><?php echo $column_left; ?><?php echo $column_right; ?>
<div id="content"><?php echo $content_top; ?>
<h1 style="display: none;"><?php echo $heading_title; ?></h1>
<?php echo $content_bottom; ?></div>
<?php echo $footer; ?> 
```

# php - PHPDocumentor、Netbeans 和 GraphViz

> ID：12216580
> 
> 赞同：2
> 
> 时间：2012-08-31T13:41:42.237
> 
> 标签：php, netbeans, phpdoc

我在 netbeans 中将 phpdpc.bat 配置为以下内容：

```
C:\xampp\php\phpdoc.bat --sourcecode -o HTML:Smarty:default 
```

我找到了我可以使用 phpdocumentor 构建一些如何使用 graphviz grafics 的信息，但直到现在我才让它运行。

使用 phpdocumentor 构建 graphviz 图表需要哪些参数/配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T13:14:50.293

从您的命令语法来看，您使用的是 1.x 版本的 phpDocumentor。GraphViz 的使用在 2.x 版本中是新的。仔细检查您使用的版本，如果您特别想要图表，请升级到 2.x。另请注意，1.x 的旧输出模板（例如 HTML:Smarty:default）在 2.x 中不可用。2.x 模板的示例可以在 [1] 中看到。

此外，如果您确实想升级到 2.x，请注意它需要 PHP 5.3+，而 1.x 需要 5.2-。

[1] -- [http://phpdoc.org/templates](http://phpdoc.org/templates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T23:15:02.363

我从未将 GraphViz 与 PHPDoc 一起使用（仅单独使用），所以我不确定。[但是，从这篇博客文章](http://www.haydnwilliams.com/blog/php-development-in-eclipse-on-mac-osx-lion)来看，您实际上并不需要任何特殊参数。只要在您的系统上安装了 GraphViz（确保 'dot' 命令正在运行），您就应该能够使用它。

此[博客文章](http://albertech.net/2012/06/phpdocumentor-graphviz-package-install-on-mac-osx/)还提到，一旦安装了 GraphViz，您应该能够在文档中看到类继承。

HTH。

# c# - 带有 MVC4 的实体框架 5

> ID：12216581
> 
> 赞同：0
> 
> 时间：2012-08-31T13:41:44.317
> 
> 标签：c#, asp.net-mvc-4, entity-framework-5

我正在建立一个具有相当复杂`SQL`数据库的网站。
我创建了一个`Query`类，它包含多个原始字段（都可以正常工作）以及多个`List<SomeType>`. 也在我的解决方案`SomeType`的文件夹下定义。`Models`它还包含`SomeType`. 然后，我创建了一个`QueryDBContext`继承`DbContext`.

我有一个`Generate`函数，它接收一个字符串并创建一个完整的`Query`实例。如果我立即将它发送到我的`View`- 它工作正常。但是，如果我将它存储在 my `DB`- 中，则只保留原始值，并且引用类型（`Lists<SomeType>`和`SomeType`）都是`null`.

我相信问题在于 EF 不支持引用类型 - 或者我可能需要一些特殊的东西来处理这种情况？
这里是`Query`

```
public class Query
{
    [Key]
    public int id { get; set; }

    public SomeType Base { get; set; }
    public List<SomeType> Derived { get; set; }
    //more of these

    public string SmallGraphImage { get; set; }
    public string MediumGraphImage { get; set; }
    public string LargeGraphImage { get; set; }
}
public class QueriesDBContext : DbContext
{
    public DbSet<Query> Queries { get; set; }
} 
```

这里是`SomeType`

```
public class SomeType
{
    [Key]
    public int id { get; set; }
    public string ExpandedOutForm { get; set; }
    public string ExpandedInForm { get; set; }
    //more strings
} 
```

注意：数据库适用于原语。出于开发目的，我做了一个`Controller`删除和重建每次修改的数据库。我也尝试`List`用`IList`.

如果 EF 不支持引用类型，我该怎么办？它会起作用`structs`吗？如何存储`Lists`在数据库条目中？（是的，我可以用它的 ID 将它存储在另一个表中 - 但我相信 EF 对此有更优雅的解决方案）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:03:23.733

> 我认为问题在于 EF 不支持引用类型

实体框架确实支持引用类型。使用默认配置，这些将映射到单独的数据库表。在您的情况下，Query_id 列将添加到表“SomeTypes”中。实体框架将在加载数据时使用它们来创建 SQL 连接。

您的属性显示为的原因`NULL`与此无关。它与实体框架如何加载数据有关。默认情况下，EF 不会从一开始就加载整个对象图。这意味着如果您`SomeType`引用另一个引用另一个类的类......并且您将在一次调用中加载整个数据库。

你有两个选择：

*   [显式加载引用](http://msdn.microsoft.com/en-us/library/gg671236%28v=vs.103%29.aspx)。您提前告诉实体框架您要使用哪些属性，它会在一次调用中从数据库中加载它们。

    查询 c = ctx.Queries .Include(x => x.Derived) .Include(x => x.Base).First();

在这里，您使用该`Include`方法告诉 Entity Framework 将您的`Derived`集合加载为您的`Base`属性。

*   使用延迟加载。这意味着实体框架将在需要时加载您的属性。为此，EF 创建了一个代理类来包装您的类并将及时执行数据库调用。

    为此，您需要将您的声明`public SomeType Base { get; set; }`为虚拟，以便 EF 可以创建代理并拦截这些调用。

您看不到数据的唯一原因是它不是从数据库中加载的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:49:28.707

> 我认为问题在于 EF 不支持引用类型

EF 支持引用类型——它们本质上映射到其他表。

> （是的，我可以用它的 ID 将它存储在另一个表中 - 但我相信 EF 对此有更优雅的解决方案）

实际上，这*正是*EF 默认处理一对多关系的方式。您打算如何将它们存储在一个表中？

# c# - 如何使用 C# 加载和保存 PVR 图像

> ID：12216582
> 
> 赞同：1
> 
> 时间：2012-08-31T13:41:44.033
> 
> 标签：c#, pvrtc

我正在制作一个能够使用 C# 加载和保存 .PVR 图像的工具。搜索了互联网，但一无所获。你有什么想法？或者有什么格式规范吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:09:07.233

某处有可用的 C/C++ 代码（但我不记得它的位置 - 抱歉），但 PVR 文件格式似乎记录在 Imagination Technologies 的“PVRTexLib 库”包（[链接自此处](http://www.imgtec.com/powervr/insider/powervr-utilities.asp)）中，可以获取免费注册。

# java - 我需要知道 java 如何实现函数 Color.RGBtoHSB(r, g, b, hsb) 的细节。他们是否标准化 r,g,b

> ID：12216583
> 
> 赞同：0
> 
> 时间：2012-08-31T13:41:54.300
> 
> 标签：java, image-processing, colors, rgb, hsb

我不知道 Color.RGBtoHSB(r, g, b, hsb) 函数是否在将 r,g,b 转换为 H,S,B 之前对其进行规范化，或者我在哪里可以获得它们内置函数的 java 实现。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:46:29.543

这是实现，直接来自 Color 类源代码：

```
public static float[] RGBtoHSB(int r, int g, int b, float[] hsbvals) {
float hue, saturation, brightness;
if (hsbvals == null) {
    hsbvals = new float[3];
}
    int cmax = (r > g) ? r : g;
if (b > cmax) cmax = b;
int cmin = (r < g) ? r : g;
if (b < cmin) cmin = b;

brightness = ((float) cmax) / 255.0f;
if (cmax != 0)
    saturation = ((float) (cmax - cmin)) / ((float) cmax);
else
    saturation = 0;
if (saturation == 0)
    hue = 0;
else {
    float redc = ((float) (cmax - r)) / ((float) (cmax - cmin));
    float greenc = ((float) (cmax - g)) / ((float) (cmax - cmin));
    float bluec = ((float) (cmax - b)) / ((float) (cmax - cmin));
    if (r == cmax)
    hue = bluec - greenc;
    else if (g == cmax)
        hue = 2.0f + redc - bluec;
        else
    hue = 4.0f + greenc - redc;
    hue = hue / 6.0f;
    if (hue < 0)
    hue = hue + 1.0f;
}
hsbvals[0] = hue;
hsbvals[1] = saturation;
hsbvals[2] = brightness;
return hsbvals;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:47:32.723

只需打开 Eclipse - Ctrl+Shift+T（打开类型），输入 Color，在 java.awt 中找到一个 - 瞧。适用于大多数内置类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T09:24:44.687

RGB 不是首先归一化的。它在期间正常化，通常只是在正确的范围内。所以亮度是最大的分量，亮度从 0-255 范围归一化到 0-1 范围。饱和度也是这样，它是从最大分量到最小分量的距离，被压缩到 0-1 的范围内。色调是色轮中的角度。但是，不，它直接转换为 HSV，而不是通过 sRGB 之类的东西进行归一化（sRGB 是 RGB/255 并归一化为 0-1 范围）。

但是，您根本不需要知道这一点。它转换为 HSB。如果你来回转换一堆，你会得到舍入错误吗？你当然可以。除此之外，将 RGB 缩放到 1 或 1,000,000 并不重要，它会转换为完全不同的方式来表示 0-1 之间的颜色。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-03-11T17:17:49.943

注意：从返回的色调`Color.RGBtoHSB`在 0.0 和 1.0 之间进行归一化，*而不是*在 0 和 255 之间：```

```
public static void main(String[] args) {
        float[] hsbvals = new float[3];
        Random random = new Random();
        for(int i=0;i<20;i++) {
            Color.RGBtoHSB(random.nextInt(256),random.nextInt(256),random.nextInt(256),hsbvals);
            System.out.println(Arrays.toString(hsbvals));
        }
    } 
```

```

# android - 如何在 Android 中保存音乐播放器应用程序的“正在播放”列表？

> ID：12216587
> 
> 赞同：1
> 
> 时间：2012-08-31T13:42:16.577
> 
> 标签：android, audio-player, android-music-player

我将使用 Service 为 Android 创建一个简单的 Musicplayer。

但我不知道保存正在播放列表的最佳方式。

我使用数据库来存储列表，但是这样，每次我开始主玩家活动时，我都必须读取数据库并存储到数组列表中，并且每次更新 nowplaying 时，我都必须更新数据库。

这种方式浪费时间，有时数据库和 Arraylist 之间的数据很难同步。

解决这个问题的最佳方法是什么？- 存储正在播放的音乐播放器应用程序列表，并且应用程序必须运行得足够快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:27:38.820

您可以使用对象数组列表来存储音乐播放器列表，并且您需要使用**意图 PUT 方法通过活动传递它。**

这是一个例子

> intent.putStringArrayListExtra（“数据”，数据）

这是您需要的代码框架：

> // 创建列表 private List test;
> 
> 测试 = 新的 ArrayList(); //将一些项目添加到列表中。
> 
> // 调用 PUT 方法 Intent intent = getIntent(); intent.putStringArrayListExtra("test", (ArrayList) test);

您将像下面的代码一样检索。

> ArrayList 测试 = data.getStringArrayListExtra("test");

希望有帮助。

# extjs - Extjs 4远程过滤器存储小于（<）大于（>）比

> ID：12216588
> 
> 赞同：1
> 
> 时间：2012-08-31T13:42:21.057
> 
> 标签：extjs, extjs4

是否可以远程过滤小于和大于？我知道如何在 php 和 mysql 中处理这个问题，但我不知道如何在 extjs 4 商店中设置这样的过滤器。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:50:18.687

开箱即用 4.1，没有。

您将需要为此原因覆盖负责的~~提供者~~代理，目前只有属性-值对被提交（[负责函数](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.proxy.Server-method-encodeFilters)）。另一点是[Ext.util.Filter](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Filter)根本不支持远程排序的任何比较器。所以你必须自己实现并确保商店不支持本地过滤（因为那不起作用）。

作为一种解决方法，您可以将较小/较大的值连同作为编码字符串的值一起提交，然后在服务器端减去它。这只会导致本地过滤器没有结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-09T12:00:00.597

我通常会覆盖 Ext.data.proxy.Server，如下所示：

```
// ext store remote filter missing operator fix
Ext.override(Ext.data.proxy.Server, {encodeFilters: function(filters) {
    var min = [],
        length = filters.length,
        i = 0;

    for (; i < length; i++) {
        if(filters[i].property && filters[i].value){
            min[i] = {
                operator: filters[i].operator,
                property: filters[i].property,
                value   : filters[i].value
            };
        }
    }
    return this.applyEncoding(min);
}});
```

# c# - 在 Visual Studio 中获取选定的代码图像

> ID：12216591
> 
> 赞同：1
> 
> 时间：2012-08-31T13:42:31.630
> 
> 标签：c#, .net, visual-studio-2010, visual-studio-2012

如何使用代码实现在 Visual Studio 编辑器中获取所选代码的图像？有可能的？原谅我英语不好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:47:19.030

我认为 Visual Studio 本身不可能做到这一点。如果您使用的是 Windows Vista 及更高版本，则可以使用非常简单快捷的[Snipping 工具。](http://windows.microsoft.com/en-US/windows-vista/Use-Snipping-Tool-to-capture-screen-shots)

如果您使用的是较旧的操作系统，那么您可能需要在不同的第三方应用程序中解析来为您处理屏幕截图，或者只需使用键盘上的打印屏幕按钮。

# objective-c - Cocoa 调整 WebView 的大小

> ID：12216593
> 
> 赞同：2
> 
> 时间：2012-08-31T13:42:38.373
> 
> 标签：objective-c, cocoa, webview, interface-builder

对 Mac 编程来说还是新手，WebViews 有问题

我的视图控制器声明了两个 Outlets

```
@property IBOutlet NSView *mainView;
@property IBOutlet WebView *webView; 
```

它们被合成并分别链接到一个 NSView 和一个 WebView 。webView 位于 NSView 内部（而后者又位于 ScrollView 内部）。我已经导入了 WebKit 标头。

当我实例化我的视图控制器并执行此操作时

```
[viewController.mainView setFrameSize:NSMakeSize(1000, 1000)]; 
```

我的 NSView 放大到 1000x1000，太棒了。但是，当我这样做时：

```
[viewController.webView setFrameSize:NSMakeSize(1000,1000)]; 
```

我看完全没有变化。它也不会引发错误。是什么赋予了？

# php - Joomla JDatabase Query插入空行

> ID：12216594
> 
> 赞同：0
> 
> 时间：2012-08-31T13:42:43.260
> 
> 标签：php, mysql, joomla

我正在为 Joomla 1.7 开发一个简单的留言簿。

如果我尝试插入一条新消息，JDatabase 会插入一个空行，我不知道为什么。

这里的表结构

```
 DROP TABLE IF EXISTS `#__agb_messages`;

  CREATE TABLE `#__agb_messages` (
  `id` INT(11) NOT NULL AUTO_INCREMENT,
  `name` VARCHAR(50) NOT NULL,
  `message` TEXT NOT NULL,
  PRIMARY KEY (`id`)
  ); 
```

这是我用来插入新行并加载现有行的代码

```
 public function getMessages() {

    $db = JFactory::getDBO();

    echo "<pre>";
    print_r(JRequest::get('post'));
    echo "</pre>";

    $post = JRequest::get('post');

    if (
            !empty($post['name'])
         && !empty($post['message'])
            )
    {
        $query = 'INSERT INTO #__agb_messages SET name="'.(string)$post['name'].'" AND message="'.(string)$post['message'].'"';
        $db->setQuery($query);
        echo $db->getQuery();
        $db->query();
        echo $db->getErrorMsg();
    }

    $query = 'SELECT * FROM #__agb_messages ORDER BY id DESC';
    $db->setQuery($query);
    $messages = $db->loadObjectList();

    return $messages;
} 
```

这就是我得到的

```
 Array
  (
  [0] => stdClass Object
    (
        [id] => 1
        [name] => 0
        [message] => 
    )
  ) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:56:48.353

嗨检查插入查询格式...

```
INSERT INTO table_name (column1, column2, column3,...)
VALUES (value1, value2, value3,...) 
```

这是`INSERT`查询的正确语法。

*   不要与更新查询格式混淆:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:15:04.970

还可以考虑使用`JDatabase`Joomla 中的类进行插入；）

```
public function insertObject (
        $table
        &$object
        $keyName=NULL
) 
```

[http://docs.joomla.org/JDatabase::insertObject/1.6](http://docs.joomla.org/JDatabase::insertObject/1.6)

我猜它也适用于 Joomla 1.7

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T01:55:23.180

扩展 Jtable 并使用 Joomla API 中的内置方法，

# git - 如何在 git 中显示“新”提交

> ID：12216595
> 
> 赞同：8
> 
> 时间：2012-08-31T13:42:42.750
> 
> 标签：git, version-control

我愿意

```
git pull 
```

从远程获取新提交并将它们与我的本地分支合并。

如何列出“刚进来”的提交？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T15:40:39.797

你可以使用这个：

```
git log @{1}.. 
```

这与

```
git log currentbranch@{1}..currentbranch 
```

其中`@{1}`符号表示“分支在上次更新之前指向的提交”。

这会准确地向您显示合并的提交。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T13:48:39.287

如果你这样做`git pull`，它会自动合并提交；你不能只看新的，而是`git log`会给你一个所有提交的列表。

如果您只是`fetch`编辑提交，您可能会在合并之前列出它们，但我认为这可能有点毫无意义。

**编辑**：快速浏览一下 Internet 似乎告诉我`git log -p ..FETCH_HEAD`会列出已获取但未合并的提交，这是一个有趣的事实，以防您发现自己只需要查看已获取的提交。

**另一个**： ellotheth 在他们的评论中的[链接](https://stackoverflow.com/questions/6535150/git-pull-change-log)似乎有一个解决方案，甚至可以与拉动一起使用。它似乎可以使用`git diff`，但也许`git log ORIG_HEAD..`或类似的也可以吗？

...尽管如此，使用`fetch`and`merge`而不是`pull`实际上可能是明智的做法，特别是如果您假设您不一定要立即或根本不合并所有提交。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T17:03:30.077

我认为

```
git log --topo-order 
```

应该管用。

它应该按照它们到达当前分支的顺序显示日志条目——而不是时间顺序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T13:50:08.733

我会推迟你

> `git help log`

查看可能对您的案件有帮助的选项。也许你想要这个`--first-parent`选项？

我个人经常这样做：

> `git log -n 5 --oneline`

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-05-01T14:50:46.013

如果您只对特定分支感兴趣（例如，`master`），您可以在输出中`git fetch`使用具有该分支名称的行：

```
6ec1a9c..91f6e69  master     -> origin/master 
```

并用它来构造一个`git log`命令

```
git log --graph --decorate 6ec1a9c..91f6e69 
```

这两个句点的意思是“在第二个提交（原点/主）中但不在第一个（主）中的所有提交”，这就是您要查找的内容。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-15T07:36:27.057

首先调用`git fetch` 然后：

```
git log --graph --pretty=format:'%Cred%h%Creset -%C(yellow)%d%Creset %s %Cgreen(%cr)%Creset' --abbrev-commit --date=relative master..origin/master 
```

这将显示如下内容：

```
* d3e3a17 - (origin/master, origin/HEAD) Fix test (3 minutes ago)
* a065a9c - Fix exec count (4 minutes ago) 
```

相关：[如何查看 git 中分支之间的提交差异？](https://stackoverflow.com/questions/13965391/how-do-i-see-the-commit-differences-between-branches-in-git/48258629#48258629)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-31T13:46:59.120

它是

```
git log 
```

你正在寻找

[关于 git log 的文档](http://git-scm.com/book/en/Git-Basics-Viewing-the-Commit-History)

# sql - 一个 SQL 查询，显示具有最大员工数的区域名称

> ID：12216596
> 
> 赞同：-6
> 
> 时间：2012-08-31T13:42:50.410
> 
> 标签：sql

我有一张桌子

`Employee (EmpId, EmpName,AreaId)`

和表

`Area (AreaId,AreaName)`

AreaId 将是 Employee 表中的外键。

我想要一个 SQL 查询，它显示正在工作的员工人数最多的区域名称。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:44:42.823

```
select top 1 areaname
from area
    inner join employee 
    on area.areaid=employee.areaid
group by areaname
order by count(*) desc 
```

或根据您的各种 sql（例如：LIMIT for mySQL）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:46:06.883

尝试这个：

您只需要使用带有 MAX() 函数的 GroupBY 语句

```
SELECT   TOP 1 AreaName
FROM     area a join Employee e
ON       a.AreaId=e.AreaId
GROUP BY AreaName
ORDER BY count(*) desc 
```

# asp.net-mvc - MVC 3 一个视图中的两个模型和动作方法重载

> ID：12216597
> 
> 赞同：1
> 
> 时间：2012-08-31T13:42:52.237
> 
> 标签：asp.net-mvc, asp.net-mvc-3, razor

我在一个视图上有“重置密码”和“用户个人资料信息更新”部分。

我有一个带有两个子模型的父模型：ResetPwdModel 和 UserInfoModel。

对于重置密码提交和保存配置文件信息提交，我希望结果 URL 看起来相同（与当前 URL 相同），这样用户就不会感到困惑。

为了实现这一点，我重载了动作方法，一个接受 ResetPwdModel，另一个接受 UserInfoModel。但是，我收到错误消息`The current request for action 'profile' on controller type 'XXController' is ambiguous...`

有没有优雅的方法来解决这个问题？我的目标是能够在 1 个视图中使用两个模型，并使帖子 URL 看起来与当前 URL 相同。

**模型**

```
public class ProfileParentModel
{
    public ProfileResetPwdModel ResetPwd { get; set; }
    public ProfileUserInfoModel UserInfo { get; set; }
}

public class ProfileResetPwdModel
{
    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Profile_lbl_OldPassword", ResourceType = typeof(Resource))]
    public string OldPassword { get; set; }

    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Profile_lbl_NewPassword", ResourceType = typeof(Resource))]
    public string NewPassword { get; set; }

    [Compare("NewPassword", ErrorMessageResourceName = "Profile_Error_NotMatch", ErrorMessageResourceType = typeof(Resource))]
    [Required]
    [DataType(DataType.Password)]
    [Display(Name = "Profile_lbl_ConfirmNewPassword", ResourceType = typeof(Resource))]
    public string ConfirmNewPassword { get; set; }
}

public class ProfileUserInfoModel
{
    [Display(Name = "Profile_lbl_FirstName", ResourceType = typeof(Resource))]
    public string FirstName { get; set; }

    [Display(Name = "Profile_lbl_LastName", ResourceType = typeof(Resource))]
    public string LastName { get; set; }

    [Display(Name = "Profile_lbl_WorkTitle", ResourceType = typeof(Resource))]
    public string WorkTitle { get; set; }

    [Display(Name = "Profile_lbl_CompanyName", ResourceType = typeof(Resource))]
    public string CompanyName { get; set; }

    [Display(Name = "Profile_lbl_CompanyAddress", ResourceType = typeof(Resource))]
    public string CompanyAddress { get; set; }
} 
```

**看法**

```
@{
    var passwordHtml = Html.HtmlHelperFor(Model.ResetPwd);
    var profileHtml = Html.HtmlHelperFor(Model.UserInfo);
}
@using (passwordHtml.BeginForm())
{
    //HTML goes here...
}
@using (profileHtml.BeginForm())
{
   //HTML goes here...
} 
```

**控制器**

```
 [ActionName("Profile")]
    [HttpPost]
    [Authorize]
    public ActionResult ResetPassword(ProfileResetPwdModel model)
    {

        return View("Profile", parentModel);
    }

    [ActionName("Profile")]
    [HttpPost]
    [Authorize]
    public ActionResult SaveUserInfo(ProfileUserInfoModel model)
    {
        return View("Profile", parentModel);
    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:52:19.830

您的操作方法名称与您想要的响应 URL 无关。

首先，您是否使用两个单独的 Html 表单提交数据？我会说这是最好的方法，并指出每个不同的行动。然后，您的操作可以重定向到您想要的任何操作。

接下来，您将无法将子模型指定为操作的参数，因为框架将无法自动计算属性（因为您使用父模型开始）但这实际上取决于您如何定义名称您的表单字段。

例如，如果您使用这些`Html.TextBoxFor`方法。那么这将给出一个“parent.childproperty”的字段名称。在这种情况下，您应该使用父模型作为两个操作的参数：

```
public ActionResult ResetPassword(ParentModel model)...
public ActionResult UpdateInfo(ParentModel model)... 
```

如果您愿意自己手动设置字段名称，以匹配子类属性，那么您可以使用子模型作为参数：

```
public ActionResult ResetPassword(ResetPwdModel model)...
public ActionResult UpdateInfo(UserInfoModel model)... 
```

字段设置如下：

```
@Html.TextBox("NewPassword", Model.ResetPwdModel.NewPassword) 
```

他们会正确映射。

处理完每个动作后，只需在最后添加以下内容：

```
return RedirectToAction("Profile"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:56:27.277

我建议您在每个操作结束时进行重定向。

```
public ViewResult Profile()
{
   ...get the profile info of the user from db
   return View(profile);
}

[HttpPost]
public ActionResult ResetPassword(ProfileResetPwdModel model)
{
   ...reset the password
   return RedirectToAction("Profile");
}

public ActionResult SaveUserInfo(ProfileUserInfoModel model)
{
   ...update the profile
   return RedirectToAction("Profile");
} 
```

通过这种方式，用户不会感到困惑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:00:26.353

Controller 的 View() 方法[有重载](http://msdn.microsoft.com/en-us/library/dd460310%28v=vs.98%29.aspx)，重载接受视图名称作为参数。因此，您可以在不同的操作中使用相同的视图。

# maps - 如何在谷歌地图中获取郊区的经纬度边界点

> ID：12216598
> 
> 赞同：1
> 
> 时间：2012-08-31T13:42:59.640
> 
> 标签：maps

当我们在谷歌地图中输入郊区时，它会以特定颜色给出 subrubs 区域的边界和区域。我想做这件事。但我需要一种获取郊区边界纬度和经度坐标的方法来绘制我的多边形。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-28T07:05:06.677

我相信谷歌不会公开有关郊区边界的信息。您可以自己将点存储在边界中，并用多边形显示它们。

对于美国，人口普查局有关于大都市边界的信息，请参阅[http://www.census.gov/geo/www/cob/](http://www.census.gov/geo/www/cob/)

对于加拿大，请看这里： http: [//geodepot.statcan.gc.ca/2006/180506051805140305/06180505162102/92-160-072305/2006001/200102120519/20010212055_4_1-eng.htm](http://geodepot.statcan.gc.ca/2006/180506051805140305/06180505162102/92-160-072305/2006001/200102120519/20010212055_4_1-eng.htm)

祝你好运！

# regex - Powershell - 用以美元符号结尾的变量替换字符串

> ID：12216604
> 
> 赞同：3
> 
> 时间：2012-08-31T13:43:14.360
> 
> 标签：regex, string, powershell, replace

我对这个有点迷茫。无论出于何种原因，powershell 中的替换函数都不能很好地处理以 $ 符号结尾的变量。

命令：

```
$var='A#$A#$'
$line=('$var='+"'"+"'")
$line -replace '^.+$',('$line='+"'"+$var+"'") 
```

预期输出：

```
$line='A#$A#$' 
```

实际输出：

```
$line='A#$A# 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T15:52:06.917

看起来您遇到了不想要的正则表达式替换。正则表达式特殊变量`$'`表示匹配后的所有内容。由于您的正则表达式匹配整个字符串，`$'`因此实际上是空的。在替换操作期间，.Net 正则表达式引擎`$'`会在您的预期输出中看到并替换该空字符串。

避免这种情况的一种方法是将`$`字符串中的`$var`所有实例替换为`$$`：

```
$line -replace '^.+$',('$line='+"'"+($var.Replace('$','$$'))+"'") 
```

您可以在此处查看有关 .Net 中正则表达式替换的更多信息：

**[换人](http://msdn.microsoft.com/en-us/library/ewy2t5e0%28v=vs.90%29)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:52:34.087

通过将 $ 替换为特殊字符，然后在更改后将其恢复回来，我能够找到某种创可贴。最好选择一个键盘上没有键的字符。对我来说，我选择了“¤”。

```
$var='A#$A#$'
$var=$var -replace '\$','¤'
$line=("`$var=''")
$line -replace '^.+$',("`$line='$var'") -replace '¤','$' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T17:39:07.780

我不太了解您发布的行的目的，在我看来这样做更有意义`$line='$line='''+$var+"'"`，但是如果您坚持自己的方式，只需进行**两次**替换调用，如下所示：

`$line -replace '^.+$',('$line=''LOL''') -replace 'LOL',$var`

# vb.net - 以编程方式管理 Outlook？

> ID：12216614
> 
> 赞同：0
> 
> 时间：2012-08-31T13:43:44.507
> 
> 标签：vb.net, outlook

我需要对 Outlook 2007 的“任务”部分中的所有项目执行相同的任务。

在使用 AutoIT 进行此操作之前，我想检查 Microsoft.Office.Interop.Outlook（COM DLL？）是否适合 VB.Net，或者是否有更好的选择？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:47:44.083

您可能需要查看 Microsoft 的 Visual Studio Tools for Office。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:47:52.353

你是对的，如果你想使用 VB.NET 与 Outlook 集成， [**Office PIA是必经之路。**](http://www.microsoft.com/en-us/download/details.aspx?id=3508)另一种选择是使用[**EWS**](http://msdn.microsoft.com/en-us/library/exchange/dd877045%28v=exchg.140%29.aspx)。

# php - 获取解析错误：语法错误，php 中的意外 T_LNUMBER？

> ID：12216618
> 
> 赞同：0
> 
> 时间：2012-08-31T13:44:01.583
> 
> 标签：php, database, phpmyadmin, parse-error

我正在尝试将**序列化**值插入`ac_services`表中但出现错误：

> 语法错误，第 559 行 C:\wamp\www\db-setup\steps\db-install-script.php 中的意外 T_LNUMBER

```
$insert_ac_services = "

INSERT INTO `ac_services` 
( `id` , `name` , `desc` , `duration` , `unit` , `paddingtime` , `cost` , `capacity` , `availability` , `business_id` , `category_id` , `staff_id` ) 
VALUES 
( 1, 'Default', 'this is default service.', 30, 'minute', 10, 15, 1, 'yes', 0, 0, 'a:1:{i:0;s:2:"1";}' ) ;
";

mysql_query($insert_ac_services); 
```

我通过 phpmyadmin 生成了这个 php 查询。但不起作用，有什么建议吗？谢谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T13:45:22.047

你应该逃避“。

`'a:1:{i:0;s:2:\"1\";}' ) ;`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:47:30.710

使用[heredoc](http://php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)，这样您就不需要转义任何引号。

```
$insert_ac_services = <<<SQL

INSERT INTO `ac_services` 
( `id` , `name` , `desc` , `duration` , `unit` , `paddingtime` , `cost` , `capacity` , `availability` , `business_id` , `category_id` , `staff_id` ) 
VALUES 
( 1, 'Default', 'this is default service.', 30, 'minute', 10, 15, 1, 'yes', 0, 0, 'a:1:{i:0;s:2:"1";}' ) ;
SQL; 
```

这样，您可以从 php_my_admin 粘贴任何查询，而不必担心转义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:46:19.027

在最后一个字段中，插入`a:1:{i:0;s:2:"1";}`. `"`已经打开，你在这里关闭它。

你应该逃避`"`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-23T14:54:55.867

我得到了同样的错误，就我而言，这是一个愚蠢的拼写错误

```
retun 0; //r is missing in return 
```

得到同样的错误

> 解析错误：语法错误，意外的 '0' (T_LNUMBER)

# java - jsf 一次又一次地导航到同一页面

> ID：12216619
> 
> 赞同：0
> 
> 时间：2012-08-31T13:44:06.670
> 
> 标签：java, jsf-1.2

我的观点：

```
<h:commandLink  action="#{Test.action}" target="_self">test</h:commandLink>  
<h:commandLink  action="#{Test1.action}" target="_self">test1</h:commandLink> 
```

我的课程：

```
class Test
{
    // ...

    public String action()
    {
        return "outcome-1";
    }
}

class Test1
{
    // ...

    public String action()
    {
        return "outcome-2";
    }
} 
```

**第 1 步：**从 导航 `1.jsp`到`2.jsp`

> 18:36:14,371 信息 [STDOUT] 开始阶段 UPDATE_MODEL_VALUES 4
> 18:36:14,371 信息 [STDOUT] /pages/1.jsp
> 18:36:14,371 信息 [STDOUT] 结束阶段 UPDATE_MODEL_VALUES 4
> 18:36:14,371 信息 [STDOUT] /pages/1.jsp
> 18:36:14,371 信息 [STDOUT] 开始阶段 INVOKE_APPLICATION 5
> 18:36:14,371 信息 [STDOUT] /pages/1.jsp
> 18:36:14,371 信息 [STDOUT] 结束阶段 INVOKE_APPLICATION 5
> 18:36 :14,371 INFO [STDOUT] /pages/2.jsp
> 18:36:14,371 INFO [STDOUT] 开始阶段 RENDER_RESPONSE 6
> 18:36:14,371 INFO [STDOUT] /pages/2.jsp
> 18:36:14,464 INFO [STDOUT] END PHASE RENDER_RESPONSE 6
> 18:36:14,464 信息 [标准输出] /pages/2.jsp

**第 2 步：**从 导航 `2.jsp`到`3.jsp`

> 18:36:55,368 INFO [STDOUT] 开始阶段 UPDATE_MODEL_VALUES 4
> 18:36:55,368 INFO [STDOUT] /pages/2.jsp
> 18:36:55,368 INFO [STDOUT] 结束阶段 UPDATE_MODEL_VALUES 4
> 18:36:55,368 INFO [STDOUT] /pages/2.jsp
> 18:36:55,368 信息 [STDOUT] 开始阶段 INVOKE_APPLICATION 5
> 18:36:55,368 信息 [STDOUT] /pages/2.jsp
> 18:36:55,368 信息 [STDOUT] 结束阶段 INVOKE_APPLICATION 5
> 18:36 :55,368 INFO [STDOUT] /pages/3.jsp
> 18:36:55,368 INFO [STDOUT] 开始阶段 RENDER_RESPONSE 6
> 18:36:55,368 INFO [STDOUT] /pages/3.jsp
> 18:36:56,164 INFO [STDOUT] END PHASE RENDER_RESPONSE 6
> 18:36:56,164 信息 [标准输出] /pages/3.jsp

**第 3 步：**从 导航`3.jsp`到`2.jsp`

> 18:39:09,575 INFO [STDOUT] 结束阶段 UPDATE_MODEL_VALUES 4
> 18:39:09,575 INFO [STDOUT] /pages/3.jsp
> 18:39:09,575 INFO [STDOUT] 开始阶段 INVOKE_APPLICATION 5
> 18:39:09,575 INFO [STDOUT] /pages/3.jsp
> 18:39:09,575 信息 [STDOUT] 结束阶段 INVOKE_APPLICATION 5
> 18:39:09,575 信息 [STDOUT] /pages/3.jsp
> 18:39:09,575 信息 [STDOUT] 开始阶段 RENDER_RESPONSE 6
> 18:39 :09,575 INFO [STDOUT] /pages/3.jsp
> 18:39:09,716 INFO [STDOUT] END PHASE RENDER_RESPONSE 6
> 18:39:09,716 INFO [STDOUT] /pages/3.jsp

在第 3 步中，从导航`3.jsp`到`2.jsp`呈现`3.jsp`自身，但相同的导航在上述第 1 步和第 2 步中有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:59:34.047

您需要在 faces-config.xml 中配置您的导航案例。例如，如果要从 1.jsp 导航到 2.jsp，则必须配置导航规则：

```
<navigation-rule>
    <from-view-id>/1.jsp</from-view-id>
    <navigation-case>
        <from-outcome>outcome-2</from-outcome>
        <to-view-id>/2.jsp</to-view-id>
    </navigation-case>
</navigation-rule> 
```

# error-handling - 正确的库行为与错误的用户输入

> ID：12216620
> 
> 赞同：1
> 
> 时间：2012-08-31T13:44:07.587
> 
> 标签：error-handling, user-input, validation

假设我正在编写一个库，它将一系列双精度数据以某种格式存储到文件中。该格式要求双打单调递增。

现在，一些用户不会仔细阅读手册或编写错误的前端来执行类似的操作

```
store(3.0)
store(3.1)
store(0.3)
store(7.8) 
```

图书馆能做的是

1.  `store(0.3)`调用时出错。
2.  尝试通过正确的猜测来纠正错误，例如，实际上`store(3.3)`。
3.  更正错误并将消息写入`stderr`。
4.  [...]

(1) 的优点是用户不会错过它。但是，如果代码运行了很长时间（在我的上下文中这是常规情况），用户不会对程序中止感到太高兴。(2) 会取消这一点，但可能会鼓励滥用图书馆。

是否有任何语言的政策提倡一种方法而不是另一种方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:48:16.797

不管使用什么语言，我的一般建议是总是**快速失败**。这会将错误定位到问题的实际根源——即，抛出错误或异常并退出（可能允许程序员捕获异常，具体取决于语言）。类似地，一些带有检查异常的语言可能会迫使程序员添加对格式错误的输入的检查。

原因很简单——离错误所表现的问题的实际来源越远，程序就越难调试。假设程序员不是故意的`3.3`（而不是`0.3`），而您为他纠正了它 - 好吧，程序将继续运行，但在某些时候该值`3.3`会表现出来并可能导致其他问题。也可能是这些值的来源是某种带有错误的排序算法 - 在这种情况下您的库不会失败的事实只会使调试排序算法和识别失败的真正原因变得更加困难。

它还会对任何对代码进行单元测试的尝试进行尝试——**应该**失败的代码不一定会在正确的地方失败。这只会使代码变得神奇，并且作为开发过程的一部分更难以管理。

除了简单地失败并强制用户或客户端程序重新开始交互之外，还有一种替代方法 - 您可以以事务方式执行操作，以便库在失败后保持一致状态，允许用户从最后一个有效输入（例如）。不过，这应该使用适当的回滚语义来实现，以确保数据一致性。

总而言之：快速失败，早点失败。

# performance - AS3 中的快速 RSA 加密

> ID：12216622
> 
> 赞同：3
> 
> 时间：2012-08-31T13:44:23.267
> 
> 标签：performance, actionscript-3, apache-flex, cryptography, rsa

我有一个 Flex 4 应用程序，它使用 2048 位私有 RSA 密钥来加密/签署一些大约 30 个字符长的字符串值。

我目前正在使用 com.hurlant.crypto.RSAKey 实现来执行此操作，但我面临以下限制：

*   花费的时间太长（签署 30 个字符的字符串大约需要 4 秒）
*   UI 在类处理时冻结（实现显然不使用事件或块处理）

我一直在寻找其他库，但到目前为止我还没有找到任何其他具有相同功能级别的库（从 PEM 字符串中读取 RSA 密钥，允许 RSA.sign()、RSA.encrypt 和解密），可以免费使用在商业应用中，这比我目前使用的要快。

所以我的问题是：

*   有谁知道一个很棒/快速的 AS3 库可以做到这一点？
*   如果没有，而我决定自己从头开始编写一个，我是否会面临同样的问题，因为闪存平台以某种方式引起了低性能？

**EDIT2**：下面的代码使用存储在文件中的 PEM 编码私钥。如果您没有，您可以使用以下代码创建一个：

```
var exp:String = "10001";
var bits:int = 2048;
rsa = RSAKey.generate(bits, exp); 
```

不要忘记坐下来喝杯咖啡，因为它需要将近一分钟才能生成。

**编辑**：这是一段显示限制的代码。只需单击开始按钮，即可查看进度条和应用程序是如何完全冻结的。

```
<?xml version="1.0" encoding="utf-8"?>
<s:WindowedApplication xmlns:fx="http://ns.adobe.com/mxml/2009" 
                       xmlns:s="library://ns.adobe.com/flex/spark" 
                       xmlns:mx="library://ns.adobe.com/flex/mx">

    <fx:Script>
        <![CDATA[
            import com.hurlant.crypto.rsa.RSAKey;
            import com.hurlant.util.der.PEM;

            import mx.utils.Base64Encoder;

            var pkfilePath:String = "/Users/david/Desktop/private_key.pem"; 
            var stringToSign:String = "Hello this is a string to be signed by an efficient AS3 library";

            private function readPKContent():String {
                var f:File = new File(pkfilePath);
                var fs:FileStream = new FileStream();
                fs.open(f,FileMode.READ);
                var rawKey:String = fs.readUTFBytes(fs.bytesAvailable);
                fs.close();
                return rawKey;
            }

            private function logTime(msg:String, start:Date, end:Date):void {
                resultTA.text = msg + " " + (end.time-start.time) + " ms\n" + resultTA.text; 
            }

            protected function button1_clickHandler(event:MouseEvent):void
            {
                cryptWithHurlant();
            }

            private function cryptWithHurlant():void {
                var start:Date = new Date();

                //Load key and use it to sign something
                var rawPK:String = readPKContent();
                var time:Date = new Date();
                var rsa:RSAKey = PEM.readRSAPrivateKey(rawPK);
                logTime("Hurlant:ReadRSA", time, new Date());

                //Compute a signature of the string
                var srcBA:ByteArray = new ByteArray();
                srcBA.writeUTFBytes(stringToSign);

                //Now sign inside the second BA
                var desBA:ByteArray = new ByteArray();
                time = new Date();
                rsa.sign(srcBA, desBA, srcBA.length);
                logTime("Hurlant:Encrypt", time, new Date());

                //desBA.position = 0;
                //Recover as a Base64 response
                //var b64encoder:Base64Encoder = new Base64Encoder();
                //time = new Date();
                //b64encoder.encodeBytes(desBA);
                //logTime("Base64:Encoded "+b64encoder.toString(),time, new Date());

                logTime("Hurlant:Total",start,new Date());
            }

        ]]>
    </fx:Script>

    <s:VGroup width="100%" height="100%" horizontalAlign="center">
        <s:Button click="button1_clickHandler(event)" label="Start"/>
        <mx:ProgressBar indeterminate="true"/>
        <s:TextArea width="100%" height="100%" editable="false" id="resultTA"/>
    </s:VGroup>

</s:WindowedApplication> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-20T01:28:16.713

如上所述：

> 您可能想研究这个基于计时器的“线程”实现。这不会加快任何速度，但它会摆脱 UI 锁定。我有使用这个在移动设备上工作的代码。
> 
> 基于评论中所说的所有内容以及没有答案，我认为我现在最好的选择是编辑 RSA 实现，使其能够使用 fa 提出的伪线程模型运行。一旦他们得到移动平台的支持，我将转向工人。

**参考**

*   [ActionScript 3 中的线程](http://bitsofinfo.wordpress.com/2008/09/22/threads-in-as3-flex-actionscript/)

*   [flash.system.Worker](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/system/Worker.html)

# c# - 将复杂数据类型从纯 c 插件传递到 Unity C# 脚本

> ID：12216625
> 
> 赞同：4
> 
> 时间：2012-08-31T13:44:28.533
> 
> 标签：c#, objective-c, c, plugins, unity3d

我目前正在使用纯 C 作为统一和目标 c 代码之间的 API，在 Objective-C 中为 Unity 编写应用内购买插件。

**我面临的问题简介**

基本功能已经可以使用。也就是说，我的插件中已经有一个非常基本的函数调用来启动对 Apple App Store 的产品请求，该请求可以从 Unity 调用。在统一脚本中，您只需像这样调用此方法：

```
[DllImport ("__Internal")]
private static extern void RequestProducts(string[] productIdentifiers, int arrayCount);                          

public static void RequestProductData( string[] productIdentifiers )
{
    RequestProducts(productIdentifiers, productIdentifiers.Length);
} 
```

这会调用如下所示的 C 函数：

```
void RequestProducts(char* productIdentifiers[], int arrayCount)
{
    // Call the In-App purchase manager to initialize the product request
    [[InAppPurchaseManager sharedInAppPurchaseManager] RequestProductData:productIdentifierCollection];
} 
```

现在我省略了 C 函数的一部分，该部分采用 productIdentifiers 数组并将其转换为 NSArray 只是为了保持简单并解释我要解决的问题。

现在 InAppPurchaseManager 类是一个单例类。RequestProductData 方法向应用商店发起产品请求。

**问题**

当 StoreKit 给我所有产品的回复时，这对我来说开始变得棘手。我想将检索到的每个产品的所有相关数据传递回统一 C# 脚本，以便您可以在游戏中处理数据。这意味着存储：

- 每个产品的名称

- 每个产品的描述

- 每种产品的价格

一个明显的解决方案是创建一个包含此信息的结构或类，然后为每个产品创建一个实例并将它们全部放入一个数组中。

**问题**

现在的问题是，我将如何将这组复杂的数据结构发送回 Unity 脚本？Unity的官方文档提到你可以使用这个方法调用将消息发送回Unity： ***UnitySendMessage("GameObjectName1", "MethodName1", "Message to send");***

我接到了工作的电话，但明显的问题是它只允许您发送字符串。

所以：

**我将如何将复杂数据结构的数组发送回 Unity 脚本？这甚至可能吗？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:23:10.883

跟进我的评论和您的评论：如果您想要一个强大的解决方案，我建议您查看[此答案](https://stackoverflow.com/questions/726410/serialize-in-c-then-deserialize-in-c)。如果这对性能至关重要，那么您将不得不通过序列化获得更多“手动”。那么，这种数据传输对性能有多重要？

# iphone - 增加帧的自动调整蒙版问题 - iOS

> ID：12216631
> 
> 赞同：2
> 
> 时间：2012-08-31T13:45:00.343
> 
> 标签：iphone, objective-c, ios, uiview, autoresizingmask

我创建了一个对角线 UIView，在所有四个边缘的所有角落和中心都有八个子视图。

所有红点都可以拖动以调整菱形的大小。

所有子视图在对角线 UIView 中添加一次，请参见图像 Screen1.. ![在此处输入图像描述](../Images/437fab1df335049834e30b802f15a0cd.png)

现在我不想通过 Diamond View 的框架，所以它可以管理中心和红点的框架。我需要使用 Autoresizemask 进行管理，所以我不需要在增加或减少时通过每个时间帧。

这是为菱形创建红点的代码..

```
 view4 = [[CustomDotRD alloc] initWithFrame:CGRectMake(self.frame.size.width - self.frame.size.width/4 - RED_W_H_RD/2, self.frame.size.height - self.frame.size.height/4 - RED_W_H_RD/2, RED_W_H_RD, RED_W_H_RD)];
        view4.backgroundColor = [UIColor clearColor];
        UIPanGestureRecognizer *panGestureDiamond = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(singleFingerTapsDiamond:)];
        [view4 addGestureRecognizer:panGestureDiamond];
        [panGestureDiamond release];
        [view4 setContextPropertyColor:RGB_RED contextFrame:CGRectMake(RED_W_H/2, RED_W_H/2, RED_W_H, RED_W_H) index:4 tag:kTAG_D4];
        view4.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
        view4.center = CGPointMake(self.frame.size.width - self.frame.size.width/4, self.frame.size.height - self.frame.size.height/4);
        [self addSubview:view4];
        [self.boundDiamondArray addObject:view4]; 
```

在这里，我发布了一些图片，同时增加了菱形形状，一些红点有奇怪的行为..

这是在 Screen2 中显示的所有红点的所有 Autoresize 蒙版列表。

```
1 - BottomMargin , LeftMargin , RightMargin
2 - TopMargin , BottomMargin , LeftMargin , RightMargin
3 - TopMargin , BottomMargin , LeftMargin 
4 - TopMargin , BottomMargin , LeftMargin , RightMargin
5 - TopMargin , LeftMargin , RightMargin
6 - TopMargin , BottomMargin , LeftMargin , RightMargin
7 - TopMargin , BottomMargin , RightMargin
8 - TopMargin , BottomMargin , LeftMargin , RightMargin 
```

![在此处输入图像描述](../Images/a67e999b4679308c946a042a5612b38f.png)

四个角红点工作正常..但四个中心边缘红点工作不完美..让我展示一些屏幕..

![在此处输入图像描述](../Images/5d9fafc5443d9fcaed9272b905fb450e.png) ![在此处输入图像描述](../Images/7d43202fd01be9e5a747ab9ff2477469.png)

让我知道你解决这个问题的想法..

请记住，我不想通过任何框架或中心，只需使用 Autoresize Mask 进行管理。.

了解 AutoresizeMask 链接的有用[链接](https://stackoverflow.com/questions/5169517/autoresizing-mask-flexible-width-of-an-image-with-fixed-height)。

问候，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:27:55.850

自动调整大小不适用于您，因为由于红点的高度，边缘中心的点的 topMargin/bottomMargin 比率不完全为 3。如果您的点的宽度和高度为零，它将被正确定位。

我认为实施`layoutSubviews`方法将是您任务的更好解决方案。

如果您真的想仅使用`autoresizingMask`. 您需要将每个红点放在大小为零的视图中，并将零大小的视图添加到菱形视图中。使用下面的代码而不是您提供的代码。您可能需要对其他部分进行一些更改，因为这些点不再是钻石的直接子视图。

```
view4 = [[CustomDotRD alloc] initWithFrame:CGRectMake(-RED_W_H_RD/2, -RED_W_H_RD/2, RED_W_H_RD, RED_W_H_RD)];
view4.backgroundColor = [UIColor clearColor];
UIPanGestureRecognizer *panGestureDiamond = [[UIPanGestureRecognizer alloc] initWithTarget:self action:@selector(singleFingerTapsDiamond:)];
[view4 addGestureRecognizer:panGestureDiamond];
[panGestureDiamond release];
[view4 setContextPropertyColor:RGB_RED contextFrame:CGRectMake(RED_W_H/2, RED_W_H/2, RED_W_H, RED_W_H) index:4 tag:kTAG_D4];
UIView* dotView4 = [[CustomView alloc] initWithFrame:CGRectZero];
dotView4.autoresizingMask = UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleTopMargin | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin;
dotView4.center = CGPointMake(self.frame.size.width - self.frame.size.width/4, self.frame.size.height - self.frame.size.height/4);
[dotView4 addSubview:view4];
[self addSubview:dotView4];
[dotView4 release];
[self.boundDiamondArray addObject:view4]; 
```

要解决触摸事件的问题，您应该覆盖类中`pointInside:withEvent:`的方法。以下代码将确保触摸事件到达子视图，即使触摸点位于视图边界之外。`UIView``CustomView`

```
- (BOOL)pointInside:(CGPoint)point withEvent:(UIEvent *)event{
  for(UIView* aView in self.subviews){
    CGPoint localPoint = [self convertPoint:point toView:aView];
    if([aView pointInside:localPoint withEvent:event]){
      return YES;
    }
  }
  return NO;
} 
```

# nhibernate - 自托管应用程序中的 ServiceStack NHibernate 和 Ninject（请求上下文）

> ID：12216635
> 
> 赞同：1
> 
> 时间：2012-08-31T13:45:09.133
> 
> 标签：nhibernate, request, ninject, servicestack

我有一个自托管的 ServiceStack 应用程序，我尝试根据请求构建 ISession。我想以下方法会起作用：

```
Bind<ISession>()
  .ToMethod(NapraviSesiju)
  .InNamedScope(ControllerScope)
  .InScope(s => ReuseScope.Request)
  .OnActivation(s => s.BeginTransaction())
  .OnDeactivation(s =>
{
  if (!s.Transaction.IsActive) return;
  try
  {
    s.Transaction.Commit();
  }
    catch (Exception e)
  {
    s.Transaction.Rollback();
  }
});

private ISession NapraviSesiju(IContext kontekst)
{
  var sesija = kontekst.Kernel.Get<ISessionFactory>().OpenSession();
  return sesija;
} 
```

这可行，但请求停用不是即时的（它会在 30 秒或 1 分钟后发生，并且某些请求根本不会停用）。

有人可以告诉我以这种方式处理 NHibernate 会话的正确方法吗？

**更新**

那我可以用这个吗：

```
public class AppHost : AppHostHttpListenerBase
{
    private IKernel _jezgro;

    public override void Configure(Container container)
    {
        _jezgro = new StandardKernel(new NHibernateModul());
        container.Adapter = new NinjectIocAdapter(_jezgro);
    }

    public override void Release(object instance)
    {
        _jezgro.Release(((IHasSession)instance).Sesija);    //Release Sesija from SomeServis object below
    }
}

public class SomeServis : RestServiceBase<Some>, IHasSession    //implements NHibernate Session
{
    public ISession Sesija { get; set; }    //IHasSession implementation. Injected by Ninject.
}

Bind<ISession>()
.ToMethod(NapraviSesiju)
.InScope(s => ReuseScope.Request)   //reuse per request scope. Is this really needed, since release is happening at Release in AppHost?
.OnActivation(s => s.BeginTransaction())
.OnDeactivation(s =>
{
    if (!s.Transaction.IsActive) return;
    try
    {
        s.Transaction.Commit();
    }
    catch (Exception)
    {
        s.Transaction.Rollback();
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T19:45:53.197

[IOC Container wiki 页面](https://github.com/ServiceStack/ServiceStack/wiki/The-IoC-container)的底部解释了`Release`IOC 资源的行为。处理已释放资源的最简单方法是实现该`IRelease`方法并将 Released 实例委托回 Ninject，例如：

```
public class NinjectIocAdapter : IContainerAdapter, IRelease
{
    private readonly IKernel kernel;

    //...

    public void Release(object instance)
    {
        this.kernel.Release(instance);
    }
} 
```

# objective-c - 关闭模式窗口时的 EXC_BAD_ACCESS ([NSWindow _restoreLevelAfterRunningModal]: 消息发送到释放的实例)

> ID：12216637
> 
> 赞同：2
> 
> 时间：2012-08-31T13:45:14.257
> 
> 标签：objective-c, automatic-ref-counting, modal-dialog, exc-bad-access

在我的主 ViewController 中，我有以下代码：

```
- (IBAction)listFunctions:(id)sender //button clicked
{
    FunctionListController *functionListController = [[FunctionListController alloc] initWithWindowNibName:@"FunctionList"];

    NSWindow *functionListWindow = [functionListController window];

    [NSApp runModalForWindow: functionListWindow];

    NSLog(@"done");
} 
```

`FunctionListController`是文件的所有者`FunctionList.nib`和子类，`NSWindowController`并实现了协议`NSWindowDelegate`。

这里是实现`FunctionListController`：

```
@implementation FunctionListController

- (id)initWithWindow:(NSWindow *)window
{
    self = [super initWithWindow:window];
    if(self)
    {
        // Initialization code here.
    }

    return self;
}

- (void)windowDidLoad
{
    [super windowDidLoad];

    // Implement this method to handle any initialization after your window controller's window has been loaded from its nib file.
    self.window.delegate = self;
}

- (void)windowWillClose:(NSNotification *)notification
{
    [NSApp stopModal];
}

@end 
```

当模态窗口关闭时，`NSLog(@"done");`运行并显示，但是`listFunctions`完成后，我得到一个 EXC_BAD_ACCESS 错误。

随着`NSZombiesEnabled`我得到错误`[NSWindow _restoreLevelAfterRunningModal]: message sent to deallocated instance`。

**编辑：**

我正在使用 ARC。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-07-08T05:35:50.373

尝试`[functionListWindow setReleasedWhenClosed:NO]`并强烈引用您的窗口，直到关闭。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-02T19:21:38.013

在您的`listFunctions`方法中，您首先创建一个`FunctionListController`对象：

```
- (IBAction)listFunctions:(id)sender //button clicked
{
    FunctionListController *functionListController = [[FunctionListController alloc] initWithWindowNibName:@"FunctionList"]; 
```

通过局部变量引用；它将在范围结束时释放（方法本身）；

然后，您将获得对 的引用`functionListController window`并将其作为模态运行：

```
 NSWindow *functionListWindow = [functionListController window];

   [NSApp runModalForWindow: functionListWindow]; 
```

此对象将由`NSApp`.

但是，该方法退出（`runModalForWindow`不会阻塞您的线程）并被`functionListController`释放：

```
 NSLog(@"done");
} 
```

所以你得到一个悬空引用和一个不再存在的对象拥有的模态窗口。因此，然后崩溃。

简单地说，为你的类创建`functionListController`一个属性，它就会起作用。`strong`

您的新`listFunctions`产品看起来像：

```
- (IBAction)listFunctions:(id)sender //button clicked
{
    self.functionListController = [[FunctionListController alloc] initWithWindowNibName:@"FunctionList"];
    ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-02T19:18:25.037

你`functionListWindow`是你`listFunctions:`方法中的一个局部变量。当该方法完成执行时，您将失去对该对象的任何强引用，因此没有任何东西会拥有它并且它将被释放。当您的模态窗口实际关闭时，它会尝试向其委托发送适当的消息，但是这不再存在。

您是否尝试过`functionListWindow`在主视图控制器上创建实例变量？

# ios - 目标c中的正则表达式正负十进制值

> ID：12216640
> 
> 赞同：1
> 
> 时间：2012-08-31T13:45:25.460
> 
> 标签：ios, regex

任何人都可以帮助我在目标 c 中使用正则表达式和负十进制值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:54:33.893

```
[NSRegularExpression regularExpressionWithPattern:@"(?:-|+)?\\d+(\\.\d+)?" options:0 error:NULL] 
```

这就是人类认为的小数。但是编译器是不同的。

**编辑：**

```
- (BOOL)checkForSpecialChar:(NSString *) string
{
    static NSRegularExpression *regex = nil;
    if (regex == nil)
        regex = [[NSRegularExpression alloc] initWithPattern:@"(?:-|+)?\\d+(\\.\d+)?" options:0 error:NULL];
    NSRange fullRange = {0, [string length]};
    NSRange range = [regex rangeOfFirstMatchInString:string options:0 range:fullRange];
    return NSEqualRanges(fullRange, range);
} 
```

# ajax - IE中的ajax jquery缓存问题

> ID：12216642
> 
> 赞同：0
> 
> 时间：2012-08-31T13:45:30.333
> 
> 标签：ajax, jquery

我有一个函数可以连接并获取 sql 查询作为结果。下面的功能是我所拥有的，它在除 IE 之外的所有其他浏览器中都能正常工作。经过一番阅读，我发现了缓存问题，因此我将`cache: false,`. 那没有用。然后我补充说，

> `$.ajaxSetup({ cache: false });`

脚本的顶部，仍然没有做到这一点。这是完整的功能。任何帮助将不胜感激，因为我不知道我做错了什么~~，而且我*将*用户重定向到远离 IE~~的位置。

```
Check_MiceToCage = function(vGetSex,vDoWhat){
  $.ajax({
      type: 'POST',
      url: 'MiceDB.cfc?method=TempTableDateToRealData&getSex='+vGetSex+'&doWhat='+vDoWhat+'&ReturnFormat=json',
      dataType: 'json',
      cache: false,
      success: function(response) {     
        if(response.DATA.length == 0){
          //$("#ResponseID").html('No Male mice' + response.DATA.length);
          alert('No Mice' +vGetSex);
        }
        else{
          //$("#ResponseID").html('Yes we have male mice' + response.DATA.length);
          alert('Yes Mice' +vGetSex);
        }
      },
      error: function(ErrorMsg) {
         console.log('Error!');
      }
  });
} 
```

更新：我正在执行上述函数 onSubmit。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:52:22.590

尝试向您的 URL 添加一个唯一参数，例如

```
url: 'MiceDB.cfc?method=TempTableDateToRealData&getSex='+vGetSex+'&doWhat='+vDoWhat+'&ReturnFormat=json&t=' + new Date().getTime() + '&r=' + Math.random() * 999999, 
```

# ruby-on-rails-3 - 部分未访问局部变量

> ID：12216643
> 
> 赞同：6
> 
> 时间：2012-08-31T13:45:31.920
> 
> 标签：ruby-on-rails-3, erb

我正在渲染一个像这样的部分：

```
 <% @pages.each do |page| %>
     <%= render 'layouts/pagewithchildren', :locals => { :page => page } %>
 <% end %> 
```

但是当我尝试访问页面中的变量时，我收到了错误：

```
undefined local variable or method `page' 
```

我正在访问变量，例如：

```
<%= page.title %> 
```

那我还需要做什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-02-17T19:25:31.587

您必须明确指定 partial，否则 Rails 会将 locals 视为参数哈希，您可以访问 locals[:page] 但不能直接在您的 partial 中访问 page 变量。

将您的代码更改为：

```
<%= render partial:'layouts/pagewithchildren', locals: {page: page} %> 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T13:47:42.117

我不是 100% 确定，但也不是

```
<%= render 'layouts/pagewithchildren', :page => page %> 
```

或者

```
<%= render :partial => 'layouts/pagewithchildren', :locals => { :page => page } %> 
```

?

# .net - EF 5.0 外键关系

> ID：12216644
> 
> 赞同：0
> 
> 时间：2012-08-31T13:45:32.523
> 
> 标签：.net, entity-framework, foreign-key-relationship

我有 TableA 以下列

id、
orgid、
client id、
......
等10列

我有表 B 和下面的列 tableAid，（是表 A 的外键） orgresponseA ........ 16 列

简单的表 B 是表 A 的扩展。

我正在尝试添加关系，`TableBConfiguration`但我没有看到foregin Key 属性。

```
HasRequired(p => p.TableA);
            .HasForeignKey????? 
            ToTable("dbo.TableB"); 
```

如何设置表A和表B的**外键**关系。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:28:39.837

您可以将外键属性添加到您的实体类：

```
public class TableBClass
{
    // ...
    public int TableAId { get; set; }
    public TableA TableA { get; set; }
    // ...
} 
```

然后使用映射：

```
HasRequired(b => b.TableA).WithMany().HasForeignKey(b => b.TableAId); 
```

如果你不想在你的类中使用 FK 属性，你可以使用：

```
HasRequired(b => b.TableA).WithMany().Map(m => m.MapKey("TableAId")); 
```

# list - 释放 Fortran 链表时的内存问题，

> ID：12216646
> 
> 赞同：1
> 
> 时间：2012-08-31T13:45:46.427
> 
> 标签：list, memory, linked-list, fortran

我已经实现了一个用 Fortran 编写的通用链表 (genII.f90)，可在 [http://fortranwiki.org/fortran/show/Linked+list](http://fortranwiki.org/fortran/show/Linked+list)中找到 。

我对其进行了测试，一切正常，除了 LI_Remove_Head 函数似乎没有释放内存。

我将函数 LI_Destruct（见下文）添加到原始模块中，结果相同，它不会释放内存。

```
SUBROUTINE LI_Destruct(List)  
implicit none
TYPE(List_Type),INTENT(INOUT),TARGET :: List
TYPE(Link_Ptr_Type) :: Link_current, Link_next

Link_next%P =>List%Head%next

do while (associated(Link_next%P))
    Link_current%P => Link_next%P

    Link_next%P => Link_next%P%next
    deallocate(Link_current%P)
end do
end subroutine LI_destruct 
```

我当然错过了一些东西，所以我的问题有两个：1-代码中是否有错误？为什么内存没有被“deallocate”清空？

2-fortran 是否存在更好且几乎标准的通用链表？

我添加了下面用于进行测试的简单代码：

```
PROGRAM test_list

! Defines data and other list(s) and arrays for particles. 

USE Generic_List, ONLY : Link_Ptr_Type,Link_Type,List_Type
USE Generic_List, ONLY : LI_Init_List,LI_Add_To_Head,LI_Add_To_Tail,LI_Get_Head,&
     LI_Remove_Head,LI_Get_Next,LI_Associated,LI_Get_Len, LI_destruct

IMPLICIT NONE

TYPE:: Particle_data
    REAL, dimension(2)   :: pos       !! Coordinate dimensionali 
END TYPE Particle_data 

! Definition of the types necessary for the list
TYPE Particle_Node
  TYPE(Link_Type) :: Link
  TYPE(Particle_data), pointer :: Data  
END TYPE Particle_Node

TYPE Particle_Node_ptr
  TYPE(Particle_Node), pointer :: P
END TYPE Particle_Node_ptr

! Create array of lists in order to allow classify the particles
TYPE(List_Type), allocatable      :: ao_Particle_List(:)
TYPE(Link_Ptr_Type)  :: Link
TYPE(Particle_Node_ptr)  :: Particle_elem

!-------------------------------------------------------------!
!-------------------------------------------------------------!

INTEGER, parameter :: Npart_test = 1000000  ! , nPart
INTEGER :: i,iter,j,item,nBuffer
REAL :: pos(2)

    nBuffer = 5

    IF (ALLOCATED(ao_Particle_List)) DEALLOCATE(ao_Particle_List)
    ALLOCATE(ao_Particle_List(0:nBuffer))  

    ! Init list used for temporary construction
    DO iter=0,nBuffer
        CALL LI_Init_List(ao_Particle_List(iter))
    ENDDO

    DO j=1,NBuffer
        DO i=1,Npart_test
            pos(1)=i*1.0;  pos(2)=j*i

            ALLOCATE(Particle_elem%P); ALLOCATE(Particle_elem%P%Data)   ! Allocate data before store
            Particle_elem%P%Data%pos = pos

            ! Elem is treated and should be put at head of the list ao_Particle_List(item)
            item=j
            Link = TRANSFER(Particle_elem,Link); CALL LI_Add_To_Head(Link,ao_Particle_List(item)) ! STORAGE
        END DO
    END DO

    WRITE(*,*) "List is full, see RAM"; READ(*,*)

    ! Write(*,*) "Destruct list"
    DO iter=0,nBuffer
        CALL LI_Destruct(ao_Particle_List(iter))  
    ENDDO

    IF (ALLOCATED(ao_Particle_List)) DEALLOCATE(ao_Particle_List)
    WRITE(*,*) "List is empty, see RAM";     READ(*,*)

END PROGRAM 
```

谢谢大家，约翰

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T14:08:25.053

OK，问题解决了。由于存在传输操作，似乎无法在`LI_DESTRUCT`完成的功能中访问数据。

解除分配链表的正确方法是（与 fortran wiki 中的示例略有不同）是：

```
DO
    Link = LI_Remove_Head(ao_Particle_List)
    IF(.NOT.LI_Associated(Link))EXIT
    User = TRANSFER(Link,User)
!~                 WRITE(6,*)User%P%Data%Index,User%P%Data%User_Stuff
    DEALLOCATE(User%P%Data)
    DEALLOCATE(User%P)
ENDDO 
```

# linux-kernel - 如何在目标依赖于多个 linux 构建的地方布局 Makefile

> ID：12216652
> 
> 赞同：1
> 
> 时间：2012-08-31T13:46:06.230
> 
> 标签：linux-kernel, makefile, multiple-makefiles

我有一个基于 Make 的项目，其中顶级目标需要多个 vmlinux 二进制文件（linux 内核）作为先决条件，所以它看起来像：

```
all: bigfile
bigfile: bigfile.cfg a/vmlinux b/vmlinux c/vmlinux foo bar baz
    sometool -obigfile -ibigfile.cfg # other inputs referenced from within the config 
```

每个 linux 规则看起来或多或少像：

```
a/vmlinux: a/.config
    $(MAKE) -C $(A_LINUX_SRC) O=$(PWD)/a vmlinux
a/.config
    mkdir -p a
    $(MAKE) -C $(A_LINUX_SRC) O=$(PWD)/a $(A_LINUX_DEFCONFIG) 
```

对于 b 和 c linux 内核也是如此。请注意，每个源代码树可能相同或不同，并且几乎可以肯定会有不同的 defconfigs。

这适用于干净的构建，但我真的不喜欢递归调用。根据我如何调整上述几行，我似乎最终得到以下任何一种：

*   即使没有任何变化（什么都不做需要 7 秒），不必要的递归也会进入 linux 树
*   如果我编辑 linux 源代码，除非我明确触摸 .config 或其他东西，否则不会重新生成内核。

理想情况下，我希望我的顶级 Makefile 能够了解每个 linux 内核的内部依赖关系图，并在所有情况下“做正确的事”。（即recursive-make-considered-harmful 论点）。

尽管我希望顶级 Linux Makefile 不会被其他人包含在内，尤其是多次使用不同的配置和 src 树！（我可以控制 baz/makefile.inc bar/makefile.inc，因此可以将它们编写为在顶层包含时播放得很好）

还是我运气不好，只需要记住触摸 .configs 以触发每个 linux 构建目录的体面？

谢谢，戴夫

**编辑**：在我的机器上，进入 linux 树的 7 秒无用体面看起来像这样：

```
$ time make
make -C /home/davidm/md/tests/linux O=/home/davidm/md/tests/linux_a vmlinux 
make[1]: Entering directory `/home/davidm/linux-2.6.38'
  Using /home/davidm/linux-2.6.38 as source for kernel
  GEN     /home/davidm/md/tests/linux_a/Makefile
  CHK     include/linux/version.h
  CHK     include/generated/utsrelease.h
make[3]: `include/generated/mach-types.h' is up to date.
  CALL    /home/davidm/md/linux-2.6.38/scripts/checksyscalls.sh
  CHK     include/generated/compile.h
make[1]: Leaving directory `/home/davidm/md/linux-2.6.38'

real    0m6.577s
user    0m2.930s
sys 0m1.360s 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:10:57.107

为了使其正常工作，您确实必须在每次构建时递归到内核源目录。7 秒对于检查大量内核树中的任何文件是否已更改确实还不错...

在你的构建中包含内核makefile实际上并没有帮助，因为内核构建本身使用递归make。

也许是这样的：

```
a/.config
        mkdir -p a
        $(MAKE) -C $(A_LINUX_SRC) O=$(PWD)/a $(A_LINUX_DEFCONFIG)

.PHONY: kernel-a-build
kernel-a-build: a/.config
        $(MAKE) -C $(A_LINUX_SRC) O=$(PWD)/a vmlinux

bigfile: kernel-a-build 
```

由于`kernel-a-build`是一个“假”目标（它不对应于物理文件），它将在每个构建中运行，从而允许内核 makefile 注意到源文件的更改。

# html - 居中对齐未定义宽度的 div

> ID：12216654
> 
> 赞同：1
> 
> 时间：2012-08-31T13:46:08.633
> 
> 标签：html, css

非常简单的问题：居中对齐没有设置宽度的 div 的正确方法是什么？为 div 执行此操作：

```
.class div{
    margin: 0 auto; 
    width: 300px;
} 
```

将 div 水平居中对齐，但如果删除设置的宽度则不会。

但是，这确实有效，但它是正确的方法吗？

```
.class div{
    margin: 0 auto; 
    display: table;
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T13:47:47.063

像这样写：

**HTML**

```
<div class="parent">
 <div class="class"></div>
</div> 
```

**CSS**

```
.parent{
 text-align:center;
}
.class{
    display:inline-block;
    text-align:left;
} 
```

# c - 接受两个矩阵的元素后的分段错误

> ID：12216659
> 
> 赞同：0
> 
> 时间：2012-08-31T13:46:23.837
> 
> 标签：c, segmentation-fault

如果我运行程序，它可以让我输入 3 个整数 n、m、p 和矩阵元素。n 是行，m 和 p 是列。但是，它在我输入最终元素后不久就出现了分段错误，就像这样；

```
4
3
2

输入元素矩阵 1[0][0]: 3
输入元素矩阵 1[0][1]: 9
输入元素矩阵 1[0][2]: 3

输入元素矩阵 1[1][0]: 2
输入元素矩阵 1[1][1]: 7
输入元素矩阵 1[1][2]: 9

输入元素矩阵 1[2][0]: 0
输入元素矩阵 1[2][1]: 5
输入元素矩阵 1[2][2]: 8

输入元素矩阵 1[3][0]: 5
输入元素矩阵 1[3][1]: 4
输入元素矩阵 1[3][2]: 3

输入元素矩阵 2[0][0]: 8
输入元素矩阵 2[0][1]: 3

输入元素矩阵 2[1][0]: 9
输入元素矩阵 2[1][1]: 7

输入元素矩阵 2[2][0]: 8
输入元素矩阵 2[2][1]: 5

分段故障

```

```
 matrix1 = (int**) malloc(row1 * sizeof(int*));

//read elements of 1st matrix
for (i = 0; i < row1; i++) {
    matrix1[i] = (int*) malloc(col1 * sizeof (int));
    for (j = 0; j < col1; j++) {
      printf("\nEnter element matrix 1[%d][%d]: ", i, j);
        scanf("%d", &matrix1[i][j]);
    }
}

matrix2 = (int**) malloc(row2 * sizeof (int*));

//read elements of 2nd matrix
for (i = 0; i < row2; i++) {
    matrix2[i] = (int*) malloc(col2 * sizeof (int));
    for (j = 0; j < col2; j++) {
      printf("\nEnter element matrix 2[%d][%d]: ", i, j);
        scanf("%d", &matrix2[i][j]);
    }
}
//memory allocation of no. of cols in matrix
mtxProduct = (int**) malloc(row1 * sizeof (int*));

//memory allocation of no. of cols in matrix
for (i = 0; i < col2; i++) {
    mtxProduct[i] = (int*) malloc(col2 * sizeof (int));
}
//multiplication
for (i = 0; i < row1; i++) {
    for (j = 0; j < col2; j++) {
        mtxProduct[i][j] = 0;
        for (e = 0; e < row2; e++) {
            mtxProduct[i][j] +=(matrix1[i][e] * matrix2[e][j]);
        }
    }
}
//print matrix product
for (i = 0; i < row1; i++) {
    for (j = 0; j < col2; j++) {
        printf("%d ", mtxProduct[i][j]);
    }
    printf("\n");
}
return 0; 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:51:34.790

```
for (i = 0; i < col2; i++) {
   mtxProduct[i] = (int*) malloc(col2 * sizeof (int));
} 
```

应该是 for 循环头部中的 row1 而不是 col2。分段错误意味着您尝试访问内存中不应尝试访问的位置。因此，您应该查找访问未初始化指针或超出范围的数组元素的代码行。

# android - 视频裁剪或缩放与特定坐标？

> ID：12216662
> 
> 赞同：4
> 
> 时间：2012-08-31T13:46:34.793
> 
> 标签：android, video, crop, zooming

有没有办法从触摸的任何特定坐标缩放视频。我已经尝试了从 mediaplayer 和 surfaceview 到自定义和访问窗口管理器的所有方式。如果有人有想法，请解释一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-01-17T22:01:13.627

您可以使用*SurfaceView*执行此操作。查看我的文章[Surface View - Video Cropping](https://github.com/dmytrodanylyk/dmytrodanylyk/blob/gh-pages/articles/surface-view-video-cropping.md)。

裁剪 SurfaceView 的代码。

```
private void updateTextureViewSize(int viewWidth, int viewHeight) {
    float scaleX = 1.0f;
    float scaleY = 1.0f;

    if (mVideoWidth > viewWidth && mVideoHeight > viewHeight) {
        scaleX = mVideoWidth / viewWidth;
        scaleY = mVideoHeight / viewHeight;
    } else if (mVideoWidth < viewWidth && mVideoHeight < viewHeight) {
        scaleY = viewWidth / mVideoWidth;
        scaleX = viewHeight / mVideoHeight;
    } else if (viewWidth > mVideoWidth) {
        scaleY = (viewWidth / mVideoWidth) / (viewHeight / mVideoHeight);
    } else if (viewHeight > mVideoHeight) {
        scaleX = (viewHeight / mVideoHeight) / (viewWidth / mVideoWidth);
    }

    // Calculate pivot points, in our case crop from center
    int pivotPointX = viewWidth / 2;
    int pivotPointY = viewHeight / 2;

    Matrix matrix = new Matrix();
    matrix.setScale(scaleX, scaleY, pivotPointX, pivotPointY);

    mTextureView.setTransform(matrix);
    mTextureView.setLayoutParams(new FrameLayout.LayoutParams(viewWidth, viewHeight));
} 
```

# c# - .NET 窗体上的 COM 控件？

> ID：12216666
> 
> 赞同：0
> 
> 时间：2012-08-31T13:46:47.050
> 
> 标签：c#, .net, com, com-interop

如果我在 .NET 表单上使用 COM 控件（例如按钮），是否有任何风险？

我不希望表单将来在某个随机点崩溃。

将 COM 控件添加到 .NET 表单有哪些风险和后果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:48:58.237

没有特别的风险，但是如果您尝试在与生成对象的线程不同的线程上访问 COM 对象的方法（与 Winforms 相同），那么 COM 对象对跨线程问题会更加敏感

要记住的另一件事是，如果您的应用程序是作为 AnyCPU 构建的并且您使用 32 位 COM 组件，它可能会在 64 位系统上失败。因此，请确保构建目标与您正在使用的任何 COM 组件匹配（并非在所有情况下都是如此，因为 .Net 为 COM 组件生成托管包装器，但需要注意这一点）

# javascript - jquery/javascript字符串中的撇号

> ID：12216669
> 
> 赞同：1
> 
> 时间：2012-08-31T13:46:57.830
> 
> 标签：javascript, jquery

我有以下代码在标签后附加一个带有警报的图标`<a>`：

```
$j("li[name='"+node_name+"'] > a").after('<a onmouseover="alert(\' expnote_from_db[n][0] \');" ><ins class="' + selected_class + '">&nbsp;</ins></a>'); 
```

上面的代码工作正常，只是它`exp_from_db[n][0]`在警告框中显示为字符串。

所以我把它改成了下面的代码，但现在什么都没有显示

```
 $j("li[name='"+node_name+"'] > a").after('<a onmouseover="alert(\'"'+ expnote_from_db[n][0] + '"\');" ><ins class="' + selected_class + '">&nbsp;</ins></a>'); 
```

我不明白撇号在哪里出错了。

我将感谢您对此提供的帮助。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:48:28.430

这些`"`字符用于分隔 HTML 属性。您正在过早地终止该属性。

```
<a onmouseover="alert(\'" 
```

在 HTML 属性中嵌套 JavaScript 是一件很痛苦的事情。

将 JavaScript 嵌套在 JavaScript 字符串中的 HTML 属性中是一个更大的痛苦。

不要这样做。使用和朋友应用事件处理程序`addEventListener`（因为您使用的是 jQuery，这意味着使用[`on`](http://api.jquery.com/on/)抽象它们的方法）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T13:56:13.720

这应该工作

```
$j('li[name="'+node_name+'"] > a')
    .after('<a onmouseover="alert(\''+ expnote_from_db[n][0] + '\')" ><ins class="' + selected_class + '">&nbsp;</ins></a>'); 
```

# c# - 为什么 DotNetNuke 在发布 ajax 请求时让我退出？

> ID：12216670
> 
> 赞同：5
> 
> 时间：2012-08-31T13:46:57.827
> 
> 标签：c#, dotnetnuke

以前，当我尝试以非超级用户帐户（即作为特定于门户的用户）对 ashx 进行 ajax 调用时，我的 Web 服务器将返回 cookie 以清除我的授权。我[发布了一个关于此的问题](https://stackoverflow.com/questions/10503890/why-is-dnn-killing-my-authentication-cookies-when-i-access-an-ashx-from-a-child)，似乎答案是确保`portalid=xx`在我的 GET 参数中指定了 。

但是，我刚刚发现，如果我添加`portalid=xx`POST 请求，DotNetNuke 似乎会忽略并注销任何非超级用户帐户。

如何在 DNN POST ajax 请求期间保持授权？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T11:54:08.340

我认为我对整个情况都有很好的处理，不幸的是，唯一真正的解决方案似乎是确保每个子门户都有自己的子域而不是子 URL（例如`portal.domain.com`，而不是`domain.com/portal`）。

问题是，当您的门户 0 是`domain.com`门户 1时，`domain.com/portal`一切正常，直到您需要`.ashx`通过 ajax 访问文件。然后发生的情况是请求的 URL 是`domain.com/DesktopModules/MyModule/Handler.ashx`，其中不包含`/portal/`，从而导致 DNN 认为您正在门户 0 上执行请求并将您注销。

虽然 GET 请求可以通过参数克服这个问题`portal=1`，但这似乎不适用于 POST 请求。

因此，似乎最好的解决方案是将您的门户网站放在一个不同的子域 ( `portal.domain.com`) 上，这样您就不会冒险错过这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-11T02:24:53.877

我找到了一些东西供您检查，看看它们是否能解决您的问题。

*   确保您使用的是 ScriptManagerProxy。这允许 ascx 页面使用 AJAX，而父页面也使用 AJAX。
*   如果 Page State Persistence 设置为“Memory”，有很多人无法使用 DNN 运行 AJAX。遇到这种情况的人可以通过将 Page State Persistence 切换为“Page”来修复它。最简单的方法是运行这个查询：

    更新 HostSettings 设置 SettingValue='P' where SettingName='PageStatePersister'

运行后，您需要回收应用程序。如果您无权访问服务器，只需在 web.config 文件中添加空格或回车（这将强制应用程序回收）。

*   最后，您可能会查看您的 web.config 中是否有此行。有时删除它会有所帮助：

    <system.web> <xhtmlConformance mode="Legacy" /> </system.web>

# jquery - 带有gridview的jquery table dnd插件 - 放置事件永远不会起作用

> ID：12216673
> 
> 赞同：4
> 
> 时间：2012-08-31T13:47:05.543
> 
> 标签：jquery, .net

我正在使用 asp.net (3.5)。我有 GridView，我需要使用 Drag&Drop 来重新排序项目（表行）并将新订单保存到数据库。

我发现我可以为此目的使用 jquery.tablednd 插件。

DnD 功能确实对我有用，但我无法重新排序项目并保存在数据库中，因为 ON DROP 对我永远不起作用。

我试图复制我在网络上找到的不同示例，但 ondrop 对我不起作用。我创建了新文件来进行测试（我的原始页面使用母版页）。我已经包含了 ajaxToolkit:ToolkitScriptManager，但我也尝试过使用 asp:ScriptManager。DropAndDrag 正在工作，但永远不会调用 ON DROP 事件。OnDragStart 事件被成功调用。请看一下我的代码：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeBehind="News.aspx.cs" Inherits="Tutelaconnect.News" %>

<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="ajaxToolkit" %>

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.5.js" type="text/javascript"></script>
<script src="http://www.isocra.com/articles/jquery.tablednd.js" type="text/javascript">  
</script>
<script type="text/javascript">
    $(document).ready(function () {
        $("#<%= GridViewSample.ClientID %>").tableDnD({
            onDrop: function (table, row) {
                alert('1');                    ///// THIS NEVER HAPPEN
            },
            onDragStart: function (table, row) {
                // alert('2');  //// THIS HAPPENS
            }
        });
    });        
</script>
</head>
<body>
<form id="form1" runat="server">
 <ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
</ajaxToolkit:ToolkitScriptManager>
<div id="debugArea">
</div>
<div class="tableDemo">
    <asp:GridView ID="GridViewSample" runat="server" AutoGenerateSelectButton="false"
        AutoGenerateColumns="false" Width="800px">
        <Columns>
            <asp:TemplateField HeaderText="C">
                <ItemTemplate>
                    <asp:TextBox ID="TextBoxC" runat="server" Text='<%# Eval("C") %>' Width="50px" />
                </ItemTemplate>
                <HeaderStyle HorizontalAlign="Center" />
                <ItemStyle HorizontalAlign="Center" Width="10em" />
            </asp:TemplateField>
            <asp:TemplateField HeaderText="A">
                <ItemTemplate>
                    <asp:Label ID="LabelA" runat="server" Text='<%# Eval("A") %>' />
                </ItemTemplate>
                <HeaderStyle HorizontalAlign="Center" />
                <ItemStyle HorizontalAlign="Left" Width="30em" />
            </asp:TemplateField>
        </Columns>
    </asp:GridView>
</div>
</form>
</body>
</html> 
```

我真的被困住了。不知道怎么继续。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-16T07:31:21.090

我在这里找到了解决方案：[http ://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/comment-page-15/#comment-3460](http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/comment-page-15/#comment-3460)

基本上，表中的每一行都需要一个 ID，您可以使用这样的代码给它们一个：

```
var i = 0;
$("#<%= GridViewSample.ClientID %>").find('tr').each(function() {
    $(this).attr('id', i++);
}); 
```

我之前放置了这段代码：并且每次删除一行时`$("#<%= GridViewSample.ClientID %>").tableDnD`都能显示该框。`alert(1);`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-16T07:37:16.353

`on drop`在**js文件**中查找是否定义了触发函数，然后就可以找到错误所在。

# jquery - 基于 textarea 焦点对选择列表执行所需的验证

> ID：12216674
> 
> 赞同：1
> 
> 时间：2012-08-31T13:47:11.933
> 
> 标签：jquery, html, validation

我需要对下面提到的 HTML 进行一些验证，其中存在三行记录。在这三个表格行中有两个可输入字段 - 一个选择列表（“原因”字段）以及一个文本区域项（“评论”字段）。

对于此表中的所有记录，我需要通过使用 jQuery 添加一些验证，这将检查用户是否首先决定将光标放在三个表行之一的 textarea 字段中，而无需先进行选择从选择列表中（即选项值不能为 0），然后显示警告，指示“需要选择原因”并将焦点放在此“原因”字段中。

```
<table summary="Contacts" class="uReport uReportStandard">
    <thead>
        <tr>
            <th id="CONTCT_NM">Contact Name</th>
            <th id="TEL_NO">Telephone
                <br/>No.</th>
            <th id="STATE">State</th>
            <th id="REAS">Reason</th>
            <th id="DATE_CALLED">Date
                <br/>Contacted</th>
            <th id="MPA_COMMENT">Comments</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td headers="CONTCT_NM">Contact A</td>
            <td headers="TEL_NO">123456</td>
            <td headers="STATE">VIC</td>
            <td headers="REAS">
                <input type="hidden" name="f01" value="16919" />
                <input type="hidden" name="f02" value="100319" />
                <select name="f10" id="selectLOV1" class="lov_select">
                    <option value="0">--- Please select a reason ---</option>
                    <option value="1" selected="selected">Contacted / Spoken</option>
                    <option value="2">Contacted / Unavailable</option>
                    <option value="3">Other</option>
                </select>
            </td>
            <td headers="DATE_CALLED">
                <input type="text" name="f20" size="14" maxlength="2000" value="30/08/2012 09:42"
                class="date_val" readonly="readonly" style="background-color:#B0C4DE;border:1px solid #999999;"
                />
            </td>
            <td headers="COMMENT">
                <textarea name="f30" rows="2" cols="30" wrap="VIRTUAL">Contact A</textarea>
            </td>
        </tr>
        <tr>
            <td headers="CONTCT_NM">Contact B</td>
            <td headers="TEL_NO">123456</td>
            <td headers="STATE">VIC</td>
            <td headers="REAS">
                <input type="hidden" name="f01" value="16919" />
                <input type="hidden" name="f02" value="100314" />
                <select name="f10" id="selectLOV2" class="lov_select">
                    <option value="0">--- Please select a reason ---</option>
                    <option value="1" selected="selected">Contacted / Spoken</option>
                    <option value="2">Contacted / Unavailable</option>
                    <option value="3">Other</option>
                </select>
            </td>
            <td headers="DATE_CALLED">
                <input type="text" name="f20" size="14" maxlength="2000" value="30/08/2012 09:42"
                class="date_val" readonly="readonly" style="background-color:#B0C4DE;border:1px solid #999999;"
                />
            </td>
            <td headers="COMMENT">
                <textarea name="f30" rows="2" cols="30" wrap="VIRTUAL">Contact B</textarea>
            </td>
        </tr>
        <tr>
            <td headers="CONTCT_NM">Contact C</td>
            <td headers="TEL_NO">123456</td>
            <td headers="STATE">VIC</td>
            <td headers="REAS">
                <input type="hidden" name="f01" value="16919" />
                <input type="hidden" name="f02" value="100312" />
                <select name="f10" id="selectLOV3" class="lov_select">
                    <option value="0">--- Please select a reason ---</option>
                    <option value="1" selected="selected">Contacted / Spoken</option>
                    <option value="2">Contacted / Unavailable</option>
                    <option value="3">Other</option>
                </select>
            </td>
            <td headers="DATE_CALLED">
                <input type="text" name="f20" size="14" maxlength="2000" value="30/08/2012 09:42"
                class="date_val" readonly="readonly" style="background-color:#B0C4DE;border:1px solid #999999;"
                />
            </td>
            <td headers="COMMENT">
                <textarea name="f30" rows="2" cols="30" wrap="VIRTUAL">Contact C</textarea>
            </td>
        </tr>
    </tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:58:30.320

我希望我对您的理解正确：

编辑：对不起，我忘记了警报：http: [//jsfiddle.net/HuVUL/1/](http://jsfiddle.net/HuVUL/1/)

# android - android检查联系人是否安装了应用程序android（如whatsapp）

> ID：12216683
> 
> 赞同：5
> 
> 时间：2012-08-31T13:47:35.120
> 
> 标签：android, android-contacts

我想让我的应用程序扫描用户联系人列表，并显示也安装了该应用程序的联系人的姓名。

我不知道从哪里开始。因此，如果有人可以帮助我入门，那将不胜感激。

格兹

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T14:23:45.860

您将需要研究[**ContentResolver**](http://developer.android.com/reference/android/content/ContentResolver.html)，因为您必须查询包含联系人的数据库。要执行这些查询，您将需要联系人数据库的 URI 和列/标题名称，这些名称可以在[**Contacts**](http://developer.android.com/reference/android/provider/Contacts.html)类中找到。

您还**需要用户注册他们**在您自己的服务器上拥有您的应用程序，并且**注册将需要其他用户在其联系人中拥有的有关用户的信息**（用户电话号码、电子邮件地址等）。

然后，您需要**一次从用户联系人中查询一些用户以获取此信息（使用 ContentResolver 和 Contacts 类）**，将其传递到您的服务器（作为文本），它将检查他们是否已注册，然后发送一条消息返回给您找到匹配项的初始用户（可能还有匹配项）。

这就是你应该开始和结束的地方:)

**请注意，您将需要 Manifest 文件中的这些权限：**

```
android.permission.INTERNET
android.permission.READ_CONTACTS 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:12:14.827

首先，欢迎来到 StackOverflow。StackOverflow 用于编程问题。因此，寻求帮助的帖子应**始终**提供您**已经尝试过**的内容的描述。如果您还没有尝试过任何东西，我强烈建议您尝试一些东西，并在遇到问题时发布。

就你现在的问题而言，我们不知道问题是什么。您在扫描联系人列表时遇到问题吗？或者您在尝试确定其他用户是否安装了该应用程序时遇到问题？

话虽如此，您将必须为您的应用程序维护一个数据库，其中包含已安装您的应用程序的人员列表。当你的应用在一台设备上启动时，做任何你需要做的事情来在你的数据库中注册用户。由于“联系人”的性质，一个人的电话可能只有他们的电话号码、电子邮件地址，甚至只有一个名字。这当然是您在实施中必须处理的事情。

# c++ - Windows 已触发断点

> ID：12216694
> 
> 赞同：0
> 
> 时间：2012-08-31T13:47:54.230
> 
> 标签：c++, dll

我在尝试使用从我的 DLL 导出的函数时遇到问题。

我收到一条消息（抱歉，我无法上传图片）：

> Windows 已在 LibTester.exe 中触发断点。
> 
> 这可能是由于堆损坏，这表明 LibTester.exe 或其已加载的任何 DLL 中存在错误。
> 
> 这也可能是由于用户在 LibTester.exe 获得焦点时按 F12。
> 
> 输出窗口可能有更多诊断信息。

我有一个 Vector 类，具有重载的赋值运算符和一些构造函数：

```
Vector::Vector() : X(0.0f), Y(0.0f), Z(0.0f) { }
Vector::Vector(const Vector& vector) : X(vector.X), Y(vector.Y), Z(vector.Z) { }
Vector::Vector(float x, float y, float z) : X(x), Y(y), Z(z) { }
.
.
.
Vector& Vector::operator=(const Vector& rhs)
{
    this->X = rhs.X;
    this->Y = rhs.Y;
    this->Z = rhs.Z;

    return *this;
} 
```

仅当我尝试将现有向量分配给构造函数生成的新向量时才会出现问题：

```
Vector v1 = Vector();                  //Works
Vector v2 = Vector(1.0f, 1.0f, 1.0f);  //Works
v1 = v2;                               //Works
v1 = Vector();                         //Fails
v1 = Vector(1.0f, 1.0f, 1.0f);         //Fails 
```

如果这是相关的，Vector*结构*派生自IPrintable*类：*

```
class IPrintable
{
public: 
    ~IPrintable() 
    {
        if (this->m_pStr != NULL)
            delete[] this->m_pStr;
    }

    virtual char* ToString() = 0;   

protected:
    char* m_pStr;
}; 
```

任何人都知道什么可能导致这种行为？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:04:41.833

如果这是`IPrintable`问题的完整定义，那`m_pStr`就是统一化，这意味着将不正确地调用`delete[]`.

这失败了：

```
v1 = Vector(); 
```

因为创建了一个临时`Vector`的并且立即执行了错误的析构函数。要更正初始化`m_pStr`或更好的解决方案是使用`std::string`. 如果您必须使用 a`char*`那么您还必须实现复制构造函数和赋值运算符或防止复制（请参阅[什么是三法则？](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)）。

# c# - 在 c# DataGridView 中填充大文件列表的最佳方法

> ID：12216695
> 
> 赞同：1
> 
> 时间：2012-08-31T13:47:57.920
> 
> 标签：c#, datagridview

我有一个程序，它用文件详细信息（如名称、日期等）填充 DGV，还有一些额外的自定义列提供有关文件的信息。这工作正常，直到有大量文件，在这种情况下，DGV 似乎在填充时变慢。

从阅读有关 DGV 的信息来看，用大量数据填充这些数据的最佳方法似乎是将内容绑定到数据库源。

所以，问题是，对我来说最有效的方法是解析文件（并填写我自己的自定义数据）然后将它们写入临时数据库，然后用它来填充 DGV？还是我在做一些更简单的繁重工作？

感谢您的任何建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-12T15:22:12.527

如果你有大量的行，比如 10 000 甚至更多，

为避免性能泄漏 - 在数据绑定之前执行以下操作：

dataGridView1.RowHeadersWidthSizeMode = DataGridViewRowHeadersWidthSizeMode.EnableResizing; // 甚至更好的 .DisableResizing。最耗时的枚举是 DataGridViewRowHeadersWidthSizeMode.AutoSizeToAllHeaders

dataGridView1.RowHeadersVisible = false; // 如果不需要，将其设置为 false

数据绑定后，您可以启用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:34:04.913

您可以使用 VirutalMode 加快 DGV 的响应速度

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.virtualmode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.virtualmode.aspx)

# php - Zend Routing：路由到路由 ID

> ID：12216699
> 
> 赞同：1
> 
> 时间：2012-08-31T13:48:02.897
> 
> 标签：php, zend-framework, zend-route

是否可以使用 Routes ID 重定向到控制器内？

例如，我使用登录和注销的 id 预定义登录和注销 URL。在我的控制器中，我确定用户需要注销，我可以使用路由 ID 将他们重定向到该路由吗？

**引导程序**

```
$router->addRoute('logout',new Zend_Controller_Router_Route('logout', array('module' => 'user', 'controller' => 'index', 'action' => 'logout')));
$router->addRoute('login', new Zend_Controller_Router_Route('login', array('module' => 'user', 'controller' => 'index', 'action' => 'login'))); 
```

**控制器**

```
return $this->_redirect('login'); 
```

目前上述方法不起作用，我必须使用 /login （也就是路由的基本 URL）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T21:04:22.737

我最近也有类似的需求，我解决的方法是使用路由器组装url，然后执行重定向。

```
$redirectUrl = Zend_Controller_Front::getInstance()->getRouter()->assemble($userParams, $routeName);
$this->_redirect($redirectUrl); 
```

见[Zend_Controller_Router_Interface](http://framework.zend.com/apidoc/1.12/db_Zend_Controller_Router_Interface.html#%5CZend_Controller_Router_Interface) ::assemble

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:10:44.470

从 Zend 框架 1.8

```
$route = new Zend_Controller_Router_Route(
                                           'index/:ident',
                                            array(
                                                     'module' => 'user'
                                                     'controller' => 'index',
                                                     'action' => 'login'
                                                  ),
                                             array(
                                            // match only digits
                                                    'ident' => '\d+'
                                                   )
                                            ); 
```

# javascript - XMLHTTPRequest 脚本中没有互联网连接和超时

> ID：12216701
> 
> 赞同：1
> 
> 时间：2012-08-31T13:48:06.173
> 
> 标签：javascript, xmlhttprequest

我的网络应用程序的许多功能上都有此代码

```
function ui_editlocation(id){

var hr   = new XMLHttpRequest();

var url  = "scripts/ui_processing.php";

var ui   = "editlocation";

var vars = "ui="+ui+"&id="+id;

hr.open("POST", url, true);

hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

hr.onreadystatechange = function() {

    if(hr.readyState == 4 && hr.status == 200) {

        var return_data = hr.responseText;

        document.getElementById("ui_content").innerHTML = return_data;

    }

}

hr.send(vars);

document.getElementById("ui_content").innerHTML = "Loading...";

} 
```

我想添加一些代码，如果 Internet 连接断开，您会收到一条消息“请检查您的 Internet 连接，单击此处重试”

此外，如果有互联网连接，我希望它在 30 秒后超时并说“我们目前对网络的需求很高，请单击此处重试”

我需要“单击此处重试”以重新发送请求

我知道这是一个很大的问题，但任何帮助将不胜感激。

谢谢卡尔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:54:54.470

```
function ui_editlocation(id){
var hr   = new XMLHttpRequest();
var timeout=setTimeout(function(){
    hr.abort();
    timeout=null;
    if(confirm("Do you want to try again?")){ui_editlocation(id);}
},30000);

var url  = "scripts/ui_processing.php";

var ui   = "editlocation";

var vars = "ui="+ui+"&id="+id;

hr.open("POST", url, true);

hr.setRequestHeader("Content-type", "application/x-www-form-urlencoded");

hr.onreadystatechange = function() {

    if(hr.readyState == 4 && hr.status == 200) {
        if(timeout){cancelTimeout(timeout);timeout=null;}

        var return_data = hr.responseText;

        document.getElementById("ui_content").innerHTML = return_data;

    }

}

hr.send(vars);

document.getElementById("ui_content").innerHTML = "Loading...";

} 
```

# javascript - 在 onClick 上内联 encodeURIComponent

> ID：12216703
> 
> 赞同：1
> 
> 时间：2012-08-31T13:48:11.230
> 
> 标签：javascript, jsp

我的页面上有一个链接，单击该链接时会调用带有 2 个参数的方法。这些参数之一可能有特殊字符（即 ' 或 é 等）。当我尝试传递此类变量时出现页面错误，因此我尝试在传递它们之前对其进行编码。如何调用 encodeURIComponent 内联？

我正在尝试这样做：

```
<a  title="${facet.toolTipDisplay}" onclick="submitFacet('Company', '${encodeURIComponent(facet.javaScriptVar)}')"> 
```

我似乎得到了错误：

`SEVERE: Servlet.service() for servlet jsp threw exception org.apache.jasper.JasperException: /WEB-INF/pages/SearchForm.jsp(831,126) The function encodeURIComponent must be used with a prefix when a default namespace is not specified`

免责声明：我是网络新手，只能访问 JSP 页面，而不是 facet.javaScriptVar 来自的 java 类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:13:17.227

您好，您正在尝试使用 Java 或 JS 对您的 UI 组件进行编码？我认为最简单的方法是使用 JS 函数。编码方法将取决于要编码的字符，从不太专有到大多数您有[转义](http://www.w3schools.com/jsref/jsref_escape.asp)（不适合 uris）、[encodeUri](http://www.w3schools.com/jsref/jsref_encodeuri.asp)和[encodeUriComponent](http://www.w3schools.com/jsref/jsref_encodeuricomponent.asp)

```
<a  title="${facet.toolTipDisplay}" onclick="submitFacet('Company', 
    'encodeURIComponent(${facet.javaScriptVar})'"> 
```

为了更有礼貌，您可以在 submitFacet 函数中应用编码，只需传递 Company 和您的 JSTL var。

阅读您的评论，我建议在使用 JS 处理之前转义 va 内容，否则不可能。

尝试以下两种方法之一：

```
onclick="submitFacet('<c:out value="${facet.javaScriptVar}"/>')"  

onclick="submitFacet('${fn:escapeJava(facet.javaScriptVar)}')" 
```

假设您导入[Apache](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringEscapeUtils.html#escapeJavaScript%28java.lang.String%29) taglib。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T13:59:24.230

我决定用“\'”（转义的撇号）替换撇号。当我的函数被调用时，转义的撇号被正常的撇号替换。

这是它在 HTML 中的样子：

```
// arguments = Company, L\'Oréal (4)
onclick="submitFacet('Company', '${fn:replace(facet.toolTipDisplay, "'", "\\'")}')" 
```

那么 submitFacet 函数被调用时的样子：

```
"Company", "L'Oréal (4)" 
```

# python - 从 Z3 中的现有表达式生成新表达式

> ID：12216705
> 
> 赞同：2
> 
> 时间：2012-08-31T13:48:18.053
> 
> 标签：python, z3

给定一个表达式 f ，我想用（是一个数字）之类`v`的`f`东西替换所有变量。目前我必须通过以下步骤来实现这一点`v_d``d`

1.  获取所有变量`f`
2.  对于 中的每个变量`v`，`f`确定其排序，然后生成适当的`v_d`var。
3.  做替换

由于我仍在尝试学习 Z3 python，所以可能有更好的方法来完成上述操作？

谢谢。

我的完整代码如下：

```
def get_vars(f,rs=[]):
    """obtain variables from f"""

    if is_const(f):
        try:
            f.as_string()   #to differentiate btw Int('x') and IntVal('3')
            return rs
        except AttributeError:
            return vset(rs + [f],str)

    else:
        for f_ in f.children():
            rs = get_vars(f_,rs)

        return vset(rs,str)

def gen_vars(vs,i):
    """
    Generates a new set of variables
    E.g.   v =>  v_i   ,  v_next =>  v_(i+1)

    """

    assert i>=0

    def mk_name(i,v):
        next_kw = '_next'
        if str(v).endswith(next_kw):
            astr = str(v)[:-len(next_kw)] + '_' + str(i+1)
        else:
            astr = str(v) + '_' + str(i)
        return astr

    def mk_var(name,vsort):
        if vsort.kind() == Z3_INT_SORT:
            v = Int(name)
        elif vsort.kind() == Z3_REAL_SORT:
            v = Real(name)
        elif vsort.kind() == Z3_BOOL_SORT:
            v = Bool(name)
        elif vsort.kind() == Z3_DATATYPE_SORT:
            v = Const(name,vsort)

        else:
            assert False, 'Cannot handle this sort yet (id: %d)'%vsort.kind()

        return v

    #so that the longest one is replaced first
    vs = sorted(vs,key=str,reverse=True) 

    names = [mk_name(i,v) for v in vs] 
    vs_ = [mk_var(ns,v.sort()) for ns,v in zip(names,vs)]

    vss = zip(vs,vs_)

    return vss

def substitute_f(f,i,vs=None):
    """
    Replaces all variables v in f with v_(i*_)
    vs: variables in f (could be automatically obtained from f)
    """

    assert is_expr(f)
    assert isinstance(vs,list) or vs is None

    if vs is None:
        vs = get_vars(f)

    vss = gen_vars(vs,i)

    f_ = f
    for pvs in vss:
        f_ = substitute(f_,pvs)

    return f_ 
```

# android - 带有不寻常符号的 Android 自定义键盘

> ID：12216707
> 
> 赞同：0
> 
> 时间：2012-08-31T13:48:23.543
> 
> 标签：android, keyboard

大家好，我想知道是否可以在 Android 中创建自定义键盘，例如曾经附有这个问题的键盘。任何想法和线索将不胜感激。希望得到更好的回应。提前致谢。

![在此处输入图像描述](../Images/96fdbd4609d80ab53d8b35c131e4d316.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:05:32.067

过去我一直想知道这一点，最终我使用了自定义视图，将活动`EditText`元素分配给它，隐藏系统键盘并在按下按钮时更改内容。

# casting - localSettings 强制转换异常

> ID：12216710
> 
> 赞同：0
> 
> 时间：2012-08-31T13:48:29.763
> 
> 标签：casting, windows-runtime, c++-cx

我尝试检查设置“锦标赛”是否已设置，如果没有设置默认值，则设置为 4。但是当我运行它时，它会崩溃并出现异常：Platform::InvalidCastException ^

无效演员表在哪里？

```
ApplicationDataCompositeValue^ tournament_composite = safe_cast<ApplicationDataCompositeValue^>(localSettings->Values->Lookup("tournament"));

if (tournament_composite == nullptr)
{
    values->Insert("tournament", dynamic_cast<PropertyValue^>(PropertyValue::CreateInt32(4)));
}
else
{
    int tournament = safe_cast<IPropertyValue^>(tournament_composite->Lookup("tournament"))->GetInt32();
    switch (tournament)
    {
    case 0:
        lb_tournament->SelectedIndex = 4;
        break;
    case 3:
        lb_tournament->SelectedIndex = 0;
        break;
    case 5:
        lb_tournament->SelectedIndex = 1;
        break;
    case 7:
        lb_tournament->SelectedIndex = 2;
        break;
    case 11:
        lb_tournament->SelectedIndex = 3;
        break;
    default:
        lb_tournament->SelectedIndex = 4;
        break;
    }
} 
```

# reporting-services - SSRS 向下钻取报告：如何仅显示前 n 行并隐藏其余要切换的行？

> ID：12216711
> 
> 赞同：2
> 
> 时间：2012-08-31T13:48:30.517
> 
> 标签：reporting-services

首先，提前致谢。

我正在尝试在 ssrs 中制作一个向下钻取样式的报告，并且想知道是否可以只显示前 n 行并隐藏表格中的剩余行，以便在需要时打开。

例如，对于带有主键 id 的下表，如果我要根据 isopen 对结果进行分组？布尔值，我应该首先得到所有营业的商店，然后是所有关闭的商店。

我只想显示前 n 个打开的商店，其余的隐藏起来，以便在需要时打开。关闭的商店也是如此。

```
store,  isopen, name,  id

first,   no,    NULL,   1    
second,  yes,   Julie,  2
second,  yes,   Mary,   3
first,   yes,   Katie,  4
third,   no,    NULL,   5
fourth,  yes,   Mark,   6
first,   yes,   Tony,   7
third,   no,    NULL,   8 
```

我的第一个想法是在行组属性的可见性下尝试“根据表达式显示或隐藏”选项（按 isopen 分组的结果）。我尝试在表达式中使用 rownumber() 来确定 rownumber 是否小于 n，然后显示，否则隐藏。它起作用了，它只显示了前 n 行，但是当我打开其余行时，前 n 行被隐藏了。我希望在打开剩余行时显示所有行。

非常感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T02:45:51.220

创建四个分组，不嵌套；即，当您单击 tablix 时，指示行分组的括号不会以任何方式相交：

（第 1 组

（第 2 组

（第 3 组

（第 4 组

在第一组中，您对其进行过滤以仅保留前 N 个开放商店。

在第二组中，您过滤掉前 N 个打开的商店，并将其设置为隐藏，由您选择的第一组中的文本框切换。

在第三组中，您将其过滤到前 N 个关闭的商店。

在第四组中，您过滤掉前 N 个关闭的商店，并将其设置为隐藏，由第三组中的文本框切换。

您可以使用参数驱动所有四个组的过滤，并且所有四个组都在同一个 tablix 中，因此它具有一个表的外观。

# sql - 如何结合聚合 sql 查询和普通查询？

> ID：12216716
> 
> 赞同：0
> 
> 时间：2012-08-31T13:48:44.100
> 
> 标签：sql, sql-server-2005

我在 SQL Server 2005 中有一个要从中聚合数据的表，这是一个示例。

```
JobName       ProductionCounter       StartDate             EndDate               CounterName        Stage
----------------------------------------------------------------------------------------------------------

200           23                      2012-08-30 13:45:00                          Kilograms          Final
200           2                       2012-08-30 13:45:00                          Bars               Final
    [...]
200           46                      2012-08-30 13:45:00   2012-08-30 17:23:00    Kilograms          Final
200           4                       2012-08-30 13:45:00   2012-08-30 17:23:00    Bars               Final
300           20                      2012-08-30 13:45:00                          Kilograms          1st
300           10                      2012-08-30 18:12:00                          Bars               1st
    [...]
300           40                      2012-08-30 18:12:00   2012-08-30 19:17:00    Kilograms          1st
300           20                      2012-08-30 18:12:00   2012-08-30 19:17:00    Bars               1st 
```

我想将其格式化为以下

```
JobName      TotalKilos       TotalBars       StartDate             EndDate               Stage
-----------------------------------------------------------------------------------------------
200          69               6               2012-08-30 13:45:00   2012-08-30 17:23:00   Final
300          60               30              2012-08-30 18:12:00   2012-08-30 19:17:00   1st 
```

这让我意识到我对 SQL 一无所知。我已经尝试以下作为开始

```
SELECT JobName, SUM(ProductionCounter)
FROM vwOeeInterval
WHERE (CounterName = 'Kilos')
GROUP BY JobName

SELECT JobName, SUM(ProductionCounter)
FROM vwOeeInterval
WHERE (CounterName = 'Bars')
GROUP BY JobName 
```

我的问题是：

1.  如何将这些组合到一个查询中？

2.  我将如何查询诸如`StartDate`和之类的列`Stage`？特别是`EndDate`在工作完成之前没有填写的地方？

任何指针将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:59:50.503

干得好：

```
SELECT 
JobName, 
SUM(CASE CounterName WHEN 'Kilos' THEN ProductionCounter ELSE 0 END) AS SumKilos,
SUM(CASE CounterName WHEN 'Bars' THEN ProductionCounter ELSE 0 END) AS SumBars,
MIN(StartDate), 
MAX(COALESCE(EndDate, 'undefined date')), 
MAX(Stage)
FROM vwOeeInterval
WHERE CounterName IN ('Kilos', 'Bars')
GROUP BY JobName; 
```

不确定这是否`MAX(COALESCE(EndDate, 'undefined date'))`适用于 SQL Server，因为数据类型可能会发生冲突。当您想要替换 NULL 值时，您只需要 COALESCE()。如果它不起作用，只需执行 MAX(EndDate) 就可以了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:50:30.997

你可以把它们结合起来

```
SELECT 
    JobName, CounterName, SUM(ProductionCounter),
    MIN(StartDate), MAX(EndDate), MAX(Stage)
FROM vwOeeInterval  
GROUP BY JobName , CounterName 
```

并过滤它们

```
HAVING MAX(EndDate) > SomeDate OR MAX(EndDate) is Null 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:53:58.537

试试这个，也许这就是你需要的：

```
 SELECT JobName, SUM(TotalKilos),  SUM(ProductionCounter), MAX(StartDate) , MAX(EndDate), MAX(Stage)
    GROUP BY JobName , CounterName, StartDate, EndDate
    --Optional:
    WHERE EndDate IS NOT NULL 
```

注意：Stage 仅按字母顺序工作，如果您有一个更大的起始字母，那么“F”可能无法正常工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:55:05.860

要结合您的查询：

```
SELECT JobName,
       SUM(CASE WHEN CounterName = 'Kilos' THEN ProductionCounter ELSE 0 END) AS TotalKilos,
       SUM(CASE WHEN CounterName = 'Bars' THEN ProductionCounter ELSE 0 END) AS TotalBars
    FROM vwOeeInterval
    GROUP BY JobName; 
```

然后，总结其余部分，也许：

```
SELECT JobName,
       SUM(CASE WHEN CounterName = 'Kilos' THEN ProductionCounter ELSE 0 END) AS TotalKilos,
       SUM(CASE WHEN CounterName = 'Bars' THEN ProductionCounter ELSE 0 END) AS TotalBars,
       MIN(StartDate) AS StartDate,
       MAX(EndDate) AS EndDate,
       MAX(Stage) AS Stage
    FROM vwOeeInterval
    GROUP BY JobName; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T14:13:29.317

```
select jobname, max(bars) as "TotalBars", max(kg) as "Total Kilos", sd as "Start date", ed as "End date" from(
SELECT JobName, if(countername="bars",SUM(ProductionCounter),null) as "bars" , if(countername="kilograms",SUM(ProductionCounter),null) as "kg" , min(startdate) as sd, max(enddate) as ed
FROM vwOeeInterval
GROUP BY JobName , CounterName) t
group by jobname 
```

# python - 从 MongoDB 读取腌制 NumPy 数组的子集

> ID：12216717
> 
> 赞同：3
> 
> 时间：2012-08-31T13:48:49.707
> 
> 标签：python, mongodb, numpy

我有一些 NumPy 数组被腌制并使用`bson`模块存储在 MongoDB 中。例如，如果`x`是一个 NumPy 数组，那么我将 MongoDB 记录的一个字段设置为：

```
bson.binary.Binary(x.dumps()) 
```

我的问题是是否可以在`x`不重新加载整个数组的情况下通过`np.loads()`. 所以，首先，我怎样才能让 MongoDB 只给我一个二进制数组的块，其次，我怎样才能把那个块变成一个 NumPy 数组。我应该在这里提一下，我还拥有关于数组的所有 NumPy 元数据，例如它的维度和数据类型。

一个具体的例子可能是我有一个数据类型为 (100000,10) 的二维数组，`np.float64`我只想检索`x[50,10]`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:02:01.533

我不能肯定地说，但是检查BSON C++[的 api 文档](http://api.mongodb.org/cplusplus/current/classmongo_1_1_b_s_o_n_element.html#a8f4902eacf15f5069f4bb752bfd0aef4)我知道它不是为部分检索而设计的......

如果可以的话，请考虑使用[pytables](http://www.pytables.org/moin)，它专为大数据而设计，并且可以与 numpy 很好地互操作。不过，Mongo 非常适合某些分布式应用程序，而 pytables 则不然。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:08:51.583

如果您将数组直接存储在 MongoDB 内部，您还可以尝试使用`$slice`运算符来获取数组的连续子集。您可以将二维数组线性化为一维数组，`$slice`运算符将为您提供矩阵行，但如果您想选择列或通常选择不连续的索引，那么您就不走运了。

上的背景[`$slice`](http://docs.mongodb.org/manual/reference/projection/slice/)。

# c++ - DUnit 与 C++ Builder 的替代品是什么？

> ID：12216718
> 
> 赞同：1
> 
> 时间：2012-08-31T13:48:54.020
> 
> 标签：c++, unit-testing, c++builder, xunit, dunit

我有一些使用**C++ builder XE**开发的项目。
我想添加一些单元测试，但是安装的**DUnit**框架对 Delphi 来说很好，但是与 C++ builder 的集成不是很好（而且非常有限）。

我可以轻松使用其他哪些 xUnit 框架？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T17:09:14.773

在你的情况下，我会首先向 Embarcadero 寻求帮助。他们希望全力支持使用他们的东西的开发人员，而自动化单元测试对于让他们满意是非常关键的。

在那之前，CppUnit 适用于任何 C++ 代码，但并没有真正与 IDE 很好地集成。我们使用的方法是创建一个包含测试的新项目，并让其链接器包含现有生产项目的 .OBJ 文件的路径。我们设置了一个项目依赖，所以测试项目依赖于生产项目。

在测试项目中，我们将使用不同的 main.cpp 文件，每个文件用于调试和发布，并使用条件在调试和发布版本中包含/排除适当的文件。

对于一些“假”集成，至少就运行测试而言，在 DebugMain.cpp 中我们将加载 MFC TestRunner GUI，因此开发人员可以单击以选择他们想要执行的测试。在 ReleaseMain.cpp 中，我们将使用命令行测试运行程序，使用 CompilerOutputter 对象让构建过程知道成功或失败。输出还与解释类似内容的 IDE 兼容，因此您可以在“输出”窗口中单击失败的测试报告，IDE 会将您带到失败的测试断言。

# wcf - WCF 返回类型是对象

> ID：12216720
> 
> 赞同：0
> 
> 时间：2012-08-31T13:49:02.630
> 
> 标签：wcf, entity-framework-4

我有一个 WCF 方法：

```
public IQueryable<AmenitySummary> GetAmenities(string searchTerm) 
```

现在，`AmenitySummary`这样定义

```
[DataContract]
public class AmenitySummary
{
    [DataMember]
    public int AmenityId { get; set; }
    [DataMember]
    public string Amenity { get; set; }
    [DataMember]
    public string LowerCaseAmenity { get; set; }
} 
```

在我的客户端解决方案中，我有一个项目，我在其中调用此方法。问题是 Reference.cs 文件中的签名是这样的

```
public object GetAmenities(string searchTerm) {
   return base.Channel.GetAmenities(searchTerm);
} 
```

怎么会？为什么不是返回类型`IQueryable<AmenitySummary>`？我错过了什么？

不仅如此，当我尝试`AmenitySummary`在客户端使用时，由于无法识别，我无法做到这一点。我认为这是有联系的。

谢谢，

小号

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:53:56.580

我想是因为`IQueryable`。你可能也需要暴露它。

请参阅这篇文章： [通过 WCF 服务公开 IQueryable](https://stackoverflow.com/questions/4291370/expose-iqueryable-over-wcf-service)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:56:21.147

如果没有特定的引用，IQueryable 是不可序列化的（请参阅 svcutil.exe /references）。

否则，使用 WCF DataService (OData) 或从服务返回 AmenitySummary 数组。在后一种情况下，您可以将数组转换为 IQuaryable 实例。

# c# - 使用异步加速 PI 计算？

> ID：12216723
> 
> 赞同：1
> 
> 时间：2012-08-31T13:49:22.227
> 
> 标签：c#, asynchronous, async-await, c#-5.0, pi

我有计算 pi 的方法。我只是想知道是否可以使用 C#5 的 async/await 功能来加快速度？

```
public decimal CalculatePi(int measure)
        {
            var target = measure;
            decimal current = 3;
            var incrementing = false;
            var inner = (decimal)1.0;
            while (current < target)
            {
                if (!incrementing)
                {
                    inner = inner - (1/current);
                    current += 2;
                    incrementing = true;
                }
                if (incrementing)
                {
                    inner = inner + (1/current);
                    current += 2;
                    incrementing = false;
                }

            }
            return 4*inner;
        } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:54:27.927

Async 和 await 最适合用于访问其他资源（如网络或硬盘驱动器），其中速度可能比您想要的慢。在像这样的纯处理器代码上使用它只会使您的代码与其余代码（启动此方法的原始调用代码）共享处理器，就像启动线程一样。要么是因为你的其他代码继续做事而减慢了速度，或者其他代码命中等待并继续，就好像它是同步的一样。使用 async/await 不会有太大的好处。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:56:49.587

我不知道 PI 本身的计算是否正确，但你的算法不是多线程的好人选。

实际上，您的算法是顺序的并且代码非常小。上下文切换会增加很多开销，并且您将失去任何好处。

# c# - 如何列出省略属性访问器的接口方法

> ID：12216726
> 
> 赞同：7
> 
> 时间：2012-08-31T13:49:32.380
> 
> 标签：c#, .net, reflection, properties, interface

我想使用反射来显示接口中的方法列表。

```
public interface IRoadVehicle
{
  int WheelCount { get; }
  bool IsEmergency();
} 
```

我使用以下代码：

```
foreach (var m in typeof(IRoadVehicle).GetMethods())
{
  Console.WriteLine(m.Name);
} 
```

但是，如果接口具有属性，我也会列出编译器生成的属性访问器。我想区分显式定义的方法和属性访问器以省略后者。

```
//output:
//get_WheelCount
//IsEmergency

//desired output:
//IsEmergency 
```

如何过滤掉与属性相关的方法？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-31T13:53:13.370

您可以使用该[`IsSpecialName`](http://msdn.microsoft.com/en-us/library/system.reflection.methodbase.isspecialname.aspx)属性：

```
foreach (var m in typeof(IRoadVehicle).GetMethods().Where(x => !x.IsSpecialName))
{
    // ...
} 
```

这将删除所有名称被编译器以某种方式特殊对待的方法。文档是这样说的：

> SpecialName 位设置为标记某些编译器以特殊方式处理的成员（例如属性访问器和运算符重载方法）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-31T13:55:22.847

怎么样：

```
var type = typeof(IRoadVehicle);

var accessors = type.GetProperties().SelectMany(property => property.GetAccessors());
var methods = type.GetMethods()
                  .Except(accessors); 
```

您也可以`IsSpecialName`像 Daniel Hilgarth 提到的那样使用，但请注意，这也将排除其他“特殊”方法，如运算符（不是接口的问题）和事件访问器。取决于你想要什么，真的。

# jquery - jQuery插件获取元素ID以在AJAX成功中使用

> ID：12216730
> 
> 赞同：1
> 
> 时间：2012-08-31T13:49:56.733
> 
> 标签：jquery, jquery-plugins

我正在构建一个 jQuery 插件。

**调用插件**

```
$('#box').jQueryPlugin({user:'user123'}); 
```

**查询插件**

```
(function($){  
    $.fn.jQueryPlugin= function(options) {  

        var  
          defaults = {  
            user: ''
          }

            var options = $.extend(defaults, options);
            var o = options; 

             $.ajax({
               type: "get",
               url: "http://api.domain.com/user/"+o.user,
               data: "",
               dataType: "jsonp",
               success: function(data){
                    var p = data;
                    console.log(p.location);
                    $(this).html(p.location);
               }
            });

          // returns the jQuery object to allow for chainability.  
          return this;  
    }  
})(jQuery); 
```

如果我使用上面的方法，console.log 会显示一个错误，它无法在 id="box" 的 div 中写入 p.location

我怎样才能得到它，以便它可以写入调用插件时指定的任何 div？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:59:48.150

`this`在回调中不会有您期望的上下文`success`，因此您只需将您的分配`div`给一个 var 以便您以后可以使用它。

```
(function($){  
    $.fn.jQueryPlugin= function(options) {  

        var  
          defaults = {  
            user: ''
          }

            var options = $.extend(defaults, options);
            var o = options; 

            var $div = $(this);

             $.ajax({
               type: "get",
               url: "http://api.domain.com/user/"+o.user,
               data: "",
               dataType: "jsonp",
               success: function(data){
                    var p = data;
                    console.log(p.location);
                    $div.html(p.location); // now we have the original div;
               }
            });

          // returns the jQuery object to allow for chainability.  
          return this;  
    }  
})(jQuery); 
```

另一种方法是在调用中设置`context`选项，[请参阅 jQuery 文档中的 context 选项](http://api.jquery.com/jQuery.ajax/)。`$.ajax`

# regex - 正则表达式原子分组不够贪婪

> ID：12216735
> 
> 赞同：0
> 
> 时间：2012-08-31T13:50:10.283
> 
> 标签：regex, regex-greedy, regex-group

我正在尝试构建一个匹配转义字符串的正则表达式，例如`@"hello""world"`. 到目前为止，我有（忽略空格）：

```
@(?=")"   #at sign if followed by double quote then double quote          
(?>       #atomic
    ""              
  |
    [^"]                             
)*
" 
```

问题是无效的（因为它没有关闭）字符串`@"""`匹配为`@""`. 我认为当我使用原子分组又名非回溯子表达式时，`(?>""|[^"])*`将匹配的最后两个双引号`@"""`（因为左替代可以匹配两个双引号）然后导致整体匹配失败（因为最后一个`"`正则表达式不是存在）但该组似乎不够贪婪（尽管具有贪婪的量词`*`和原子分组）并且`"`一旦注意到正则表达式失败，它仍然会回溯到正则表达式的第一个之后的点。一种解决方法是放在`(?!")`正则表达式的末尾，但我想知道为什么它不适用于原子分组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:13:14.890

## 问题

**[原子分组](http://www.regular-expressions.info/atomic.html)**与最后两个引号**不匹配！**匹配总是从左边开始。当需要回溯时（由于令牌不匹配），默认情况下会弹出最后一个令牌。但是，当使用原子组时，整个组会弹出而不是组的最后一个标记。这用于避免[**灾难性的回溯**](http://www.regular-expressions.info/catastrophic.html)。

## 解决方案

在末尾加上一个*字符串*的结尾：

```
@(?=")"(?>""|[^"])*"$ 
```

# android - 在android中使用URL链接传递两个参数

> ID：12216736
> 
> 赞同：0
> 
> 时间：2012-08-31T13:50:26.740
> 
> 标签：android, url, parameter-passing

我对通过 URL 链接传递的两个参数有疑问。谁能帮我？

```
private void FillDetails(String _userid,int _sporttype) {
    al_TeamName=new ArrayList<String>();

    try{
        spf=SAXParserFactory.newInstance();
        sp=spf.newSAXParser();
        xr=sp.getXMLReader();
        URL sourceUrl = new URL(
        "http://10.0.2.2:2291/acd.asmx/Get_Teams?_userid ="+_userid & "_sporttype="+ _sporttype);
        MyHandler mh=new MyHandler();
        xr.setContentHandler(mh);

        xr.parse(new InputSource(sourceUrl.openStream()));
        setListAdapter(new MyAdapter());

    }
    catch(Exception ex)
    {

    }
} 
```

当我使用此代码时，我得到空值。如果我发送单个参数，那么它工作正常。这是 URL 传递两个参数的正确过程吗？

提前致谢..........

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T13:53:29.683

**更新答案：**

现在您的 URL 中有多个错误：

```
URL sourceUrl = new URL("http://10.0.2.2:2291/acd.asmx/Get_Teams?_userid =" + 
    _userid & "_sporttype="+ _sporttype); 
```

1.  `=`你在第一个标志之前还有一个空格
2.  变量和字符串的其余部分`+`之间没有。`_userid`
3.  `&`符号在第二个字符串之外

它应该是这样的：

```
URL sourceUrl = new URL("http://10.0.2.2:2291/acd.asmx/Get_Teams?_userid=" 
    + _userid + "&_sporttype=" + _sporttype); 
```

* * *

**原始答案：**

您当前在第一个参数后有一个空格而不是`=`符号：

```
?_userid "+_userid 
```

应该

```
?_userid="+_userid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:18:54.710

解决了。

```
URL sourceUrl = new URL("http://0.0.0.0/acd.asmx/GetList?Value1="+Value1+"&ID="+ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:06:41.557

```
"http://10.0.2.2:2291/acd.asmx/Get_Teams?_userid ="+_userid & "_sporttype="+ _sporttype); 
```

你在 _userid 之后有一个 &，它可能知道 _userid 上有什么。通常单个 & 进行二进制操作，因此您可能正在转换来自 _userid 的内容。另外，如果您还没有这样做，我建议您对 REST 标签进行 URLEncoding

我建议在开发过程中记录 REST 参数，以仔细检查它是否正确形成

更新： & 在引号之外，您需要使用 +

```
 "http://10.0.2.2:2291/acd.asmx/Get_Teams?_userid ="+_userid + "&_sporttype="+ _sporttype); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-04-02T21:29:57.267

如果你来这里是因为你搜索了一个在**Kotlin**中工作的版本（比如我），你可以使用这个函数来构建你的 URL：

```
import java.net.URL

// Your URL you want to append the query on
val url: String = "http://10.0.2.2:2291/acd.asmx/Get_Teams"

// The parameters you want to pass
val params: Map<String, String> = mapOf(
        "_userid"      to _user_id
        , "_sporttype" to _sporttype
)

// The final build url. Standard encoding for URL is already utf-8
val final_url: URL = URL(
        "$url?" // Don't forget the question-mark!
        + params.map {
            "${it.key}=${it.value}"
        }.joinToString("&")
) 
```

# android - 将新的小部件控件动态添加到现有布局

> ID：12216738
> 
> 赞同：1
> 
> 时间：2012-08-31T13:50:31.593
> 
> 标签：android, android-layout, widget

我已经看到堆栈中添加了这个问题，但信息还没有帮助或成功，所以我仍然不确定。

我正在尝试做的事情的要点：
我在 xml 中定义了一个布局，例如 some_details_view.xml。

```
setContentView(R.layout.some_details_view); 
```

它有一堆文本视图，使用父相对布局、线性标题布局、线性页脚布局、中间滚动布局，其中包含包含一些标签值类型的文本视图的相对布局。并且在滚动视图相对布局的底部，我目前放置了一个框架布局作为占位符。

在创建相应的活动时，我在各自的文本视图中设置了文本，其中的数据是从以前的活动中传递过来的；基本的东西。

```
<RelativeLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@color/white" >

    <LinearLayout
        android:id="@+id/header"

        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentTop="true" >

                        ...some header content

    </LinearLayout>         

    <LinearLayout
        android:id="@+id/footer"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignParentBottom="true"
        android:orientation="vertical" >

        ..some footer content

    </LinearLayout>

    <ScrollView
        android:id="@+id/scroll"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_above="@+id/footer"
        android:layout_below="@+id/header"
        android:layout_margin="5dip" >

        <RelativeLayout
            android:layout_width="fill_parent"
            android:id="@+id/relativeScroll"
            android:layout_height="wrap_content" >

            ...text views in relative layout

            <FrameLayout
                android:id="@+id/placeholder"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_below="@+id/moreInfoValue" />

        </RelativeLayout>

    </ScrollView>

</RelativeLayout> 
```

在为给定数据设置文本视图后，我使用异步任务来获取一些附加数据，这些数据我想在静态表单布局的底部显示为历史列表类型的事物。可能有 0 个或更多项目，所以我要么添加 1 个或多个文本视图，要么根本不添加。

在我理解在主 UI 线程上运行的帖子执行中，我尝试找到一个现有的容器布局/视图组，并添加一个新的线性布局，我向其中添加新的文本视图，或者直接添加新的文本视图到现有的容器布局。

这是我尝试的最新方法：

```
ViewGroup mContainer = null; //defined as member variable of activity class and instatiated in on create
mContainer = (ViewGroup)findViewById(R.id.placeholder); //set in on create
LinearLayout ll = new LinearLayout(context); //on post execute of async task
ll.setOrientation(LinearLayout.VERTICAL);
mContainer.addView(ll); //add a new linear layout to an existing container layout
//add some new text view widgets items dynamically
for(NewDisplayItem item : items)
{
    TextView tv = new TextView(context);
    tv.setWidth(ViewGroup.LayoutParams.MATCH_PARENT);
    tv.setHeight(ViewGroup.LayoutParams.WRAP_CONTENT);
    tv.setText(item.getSomeText());
    ll.addView(tv); //add text view to new linear layout
} 
```

当 UI 加载时，在单步执行并观察使用上面的代码添加控件后，我看不到新项目添加到我的布局中。

不确定它是什么，但除了它不起作用之外，这种方法似乎有些不对劲。当活动加载时，所有静态视图都已设置并显示在视图中。我弹出一个加载对话框，逐步完成异步任务内容，我想希望看到动态控件一一添加到布局中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:16:57.233

首先以像素[`textView.setWidth(int)`](http://developer.android.com/reference/android/widget/TextView.html#setWidth%28int%29)为参数`width`。

其次，您还应该在`LinearLayout`要添加的内容上设置布局参数。

您应该设置的方式`LayoutParams`如下：

```
ll.setLayoutParams(new LinearLayout.LayoutParams(
       LayoutParams.FILL_PARENT,LayoutParams.FILL_PARENT)); 
```

你也一样`TextViews`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:22:36.170

Ovidiu Latcu 有一个很好的答案。一个很好的问题是：你不使用 ListView 是否有原因（顺便说一句，有些情况下他的工作效果更好）？ListView 有很多机制可以帮助您避免内存不足

# google-maps - 同时拖放对象

> ID：12216741
> 
> 赞同：0
> 
> 时间：2012-08-31T13:50:37.800
> 
> 标签：google-maps, google-maps-api-3

我面临一个问题......并且正在寻找解决方案或想法。我想同时拖放几个对象（标记，折线，......），但我不知道这是否可能......

有人有想法吗？

提前致谢 ！问候，塞巴斯蒂安

* * *

谢谢尼尔斯！！！你给我好办法！在这里，您了解了我如何使它成为可能：

```
google.maps.event.addListener(window["Overlay" + i] , 'click', function(event) {
var path = this.getPath();
google.maps.event.addListener(path, 'set_at', function(indEdited,newLatLng){
        var oo = this.getAt(indEdited);
        diffLat = (newLatLng.lat() - oo.lat());
        diffLng = (newLatLng.lng() - oo.lng());
        moveOverlay(this,indEdited,diffLat,diffLng);
       var temp = "Do you want to me the others overlays ?"
        if (fromPath == lastPath )
        {
            if ( confirm(temp) ){
                moveOthersOverlays(diffLat,diffLng);
            }
        }
    }); 
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:11:40.703

问题是它只是您可以拖放的标记，因此您必须考虑到这一点来设计功能。

首先我们需要现在的起始位置，这是通过 dragstart 事件完成的。请注意，您必须在所有标记上都这样做。

```
var startLatLng;
google.maps.event.addListener(marker, 'dragstart', function(){
  marker.getPosition()
}); 
```

您将利用拖动事件的功能，并循环所有对象。我将在这里使用伪代码，如果不清楚，请告诉我。假设您将标记保存在数组中

```
google.maps.event.addListener(dragmarker, 'drag', function(){
   end = dragmarker.getPosition();
   for (marker in markers){
      // Don't care about marker being dragged
      if (dragmarker == marker)
          continue;
      current = marker.getPossition();
      // Bellow we create a new position for the marker by calculating the difference 
      // and add it to the current possition of the marker
      marker.setPosition(new google.maps.LatLng(
                    current.lat() + (end.lat() - start.lat()), 
                    current.lng() + (end.lng() + start.lng()));
   }

   // Same same for the polylines but you will have to loop over the path
}); 
```

请注意，如果您要移动很多物体，这将非常慢。但这在移动几个标记和一条小折线时对我很有用。另外，请注意代码有点粗糙，我只是想展示它是如何完成的。在我的解决方案中，我将我的标记和折线存储在可以自我更新的对象中。

[你可以在这个 github repo](https://github.com/otm/otm/blob/master/app/libraries/js/otm/class.gate.js)查看我的代码

# php - PEAR::Mail Notice Strict Standards error

> ID：12216742
> 
> 赞同：0
> 
> 时间：2012-08-31T13:50:41.793
> 
> 标签：php, email, pear, runtime-error

安装了 PEAR Mail 库，非常喜欢它的工作方式，比 PHP mail() 函数好得多。但是，每发送一封邮件，我都会在 error_log 中看到严格的标准通知。它们不是致命的，但会使日志一团糟。

这是控制代码：

```
$body = $_POST['message'];
 //using sendmail on backend
 $params['sendmail_path'] = '/usr/sbin/sendmail';

 //using factory method
 $mail_object =& Mail::factory('sendmail',$params);

 //loop through selected users to send
 for ($i=0;$i<count($recipients);$i++){
  if (!empty($recipients[$i]['email'])&&($recipients[$i]['alt_email'])){
    //concatinate email and alt_email
    $address = $recipients[$i]['email'].",".$recipients[$i]['alt_email'];
 }
 else {
    //only one user address
    $address = $recipients[$i]['email'];    
 }

//send the mail instance    
$mail_object->send($address,$headers,$body); 
if (PEAR::isError($mail_object)) {print($mail_object->getMessage());}
} //close the for loop 
```

然后记录了错误通知：

> PHP 严格标准：非静态方法 Mail::factory() 不应在第 48 行的 emailSend.php、referer: 等中静态调用。
> 
> PHP 严格标准：不应静态调用非静态方法 Mail_RFC822::parseAddressList()，假设 $this 来自第 253 行 /opt/local/lib/php/Mail.php 中不兼容的上下文，referer: 等。
> 
> PHP 严格标准：非静态方法 PEAR::isError() 不应在第 65 行的 emailSend.php 中静态调用，referer: 等。

我可以忽略这些，但如果有人对此有一些建议/经验，我宁愿解决问题。一直在谷歌上搜索它，但一切都是旧的。

梨 1.9.0
PHP 5.3.2

# sql - 在 SQL Server 中成功使用 Nvarchar(50) 进行 SQL 匹配浮点数

> ID：12216743
> 
> 赞同：0
> 
> 时间：2012-08-31T13:50:44.190
> 
> 标签：sql, sql-server, types

我在**TABLEA中有一个****nVarchar(50)**类型的字段，我想在表连接关系中匹配另一个表中的另一个字段，即**float**类型的**TABLEB 。**如何在我的联接中成功匹配这两个字段？

 ******```
left join UPS u on  RTRIM( LTRIM(Str(u.Float_Field,10, 10)))  = e.NVarchar_Field 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:00:56.400

我同意这是一个坏主意，但如果您需要这样做，这里有一个主意：

你可以试试`CAST(... as nchar(10))`漂浮物。

[像这儿](http://www.sqlfiddle.com/#!3/dc546/3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:07:44.370

你需要考虑两件事：

1.  浮点数的内部表示可能会导致最初看起来相等的两个数字之间的“微小”差异（除了可能将零与零进行比较）。以 1.9999999999 和 2.0 为例。

2.  浮点数的字符串表示也可以不同，因为`14.55`在数学上等于`1.455E2`但字符串的呈现方式完全不同（包含不同的字符）。

因此，您唯一可以实际比较的是**范围**。您可以比较浮点数的范围（恕我直言更好）或字符串的范围（前提是您确保浮点数两边的格式相同：小数点后的位数相同，没有指数符号等）。

我的意思是，您需要让 SQL 将您的字符串解析为浮点数（`CONVERT`例如使用），然后检查数字之间的**差异**是否足够小，以至于您可以认为它们相等。例如`ABS(a - b) < 0.0000001`.******

# mysql - 识别一个字段是否属于组类型：字符串（字符）类型

> ID：12216744
> 
> 赞同：0
> 
> 时间：2012-08-31T13:50:49.393
> 
> 标签：mysql, sql

信息模式或其他方法中是否有一些东西可以告诉我一个字段是否是文本的。即在不针对每种可能的类型检查 DATA_TYPE 的情况下，我想确定该字段是否属于该组：字符串（字符）类型。

这样我就可以在我的 c++ 代码中创建适当类型的对象。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T10:29:22.483

要将问题标记为已回答，GordonLinoff 说：试试 COLLATION_NAME。MySQL 文档含糊不清，但 SQL Server 将其记录为仅用于字符和文本类型。（并且它记录了 CHARACTER_MAXIMUM_LENGTH 也用于图像和二进制类型。）

# django - 在 Django 中扩展 Babel 日期格式标签

> ID：12216745
> 
> 赞同：0
> 
> 时间：2012-08-31T13:50:51.373
> 
> 标签：django, django-templates, django-template-filters, python-babel

我正在使用 BabelDjango 来格式化模板中的日期和时间。Babel 带有一些预定义的格式，称为“short”、“long”和“full”。我知道您也可以只传递您的自定义格式，例如“DDD mmm”等，但我想创建更多命名格式。这会更容易在我的应用程序中传播一些不同的标准格式。

这可能吗？我可以向 Babel 添加更多内容，还是最好在 django 中创建自己的标签过滤器？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T07:39:33.953

不幸的是，在 Babel 中（还）不可能为日期格式定义自定义别名。现有的格式名称取自 CLDR 数据库，因此它们目前非常静态。

我建议您编写一个包装函数，将您的别名转换为 Babel 日期模式。

顺便说一句：您需要哪种日期格式？

顺便说一句：[Babel 用户邮件列表](http://groups.google.com/group/python-babel/)是提出此类问题的好地方（并且您可能会得到更快的答案）。

# c# - 在 Fill-Property 中叠加两个画笔

> ID：12216748
> 
> 赞同：0
> 
> 时间：2012-08-31T13:50:54.923
> 
> 标签：c#, .net, wpf, xaml, drawingbrush

我想要一个填充有棋盘的矩形，它被 LinearGradientBrush 覆盖。只有 GradientBrush 或只有 Checkerboard-DrawingBrush 没有问题。但是如何在 Fill-Property 中覆盖两者？我不能将 Gradient 放在 DrawingGroup 中，因为 Gradient 也会平铺。

这是棋盘画笔：

```
<Rectangle.Fill>
    <DrawingBrush Viewport="0,0,0.5,0.05" TileMode="Tile">
        <DrawingBrush.Drawing>
            <DrawingGroup>
                <GeometryDrawing Brush="White">
                    <GeometryDrawing.Geometry>
                        <RectangleGeometry Rect="0,0,100,100"  />
                    </GeometryDrawing.Geometry>
                </GeometryDrawing>
                <GeometryDrawing >
                    <GeometryDrawing.Geometry>
                        <GeometryGroup>
                            <RectangleGeometry Rect="0,0,50,50" />
                            <RectangleGeometry Rect="50,50,50,50" />
                        </GeometryGroup>
                    </GeometryDrawing.Geometry>
                    <GeometryDrawing.Brush >
                        <LinearGradientBrush>
                            <GradientStop Offset="0.0" Color="Black" />
                            <GradientStop Offset="1.0" Color="Gray" />
                        </LinearGradientBrush>
                    </GeometryDrawing.Brush>
                </GeometryDrawing>
            </DrawingGroup>
        </DrawingBrush.Drawing>
    </DrawingBrush>
</Rectangle.Fill> 
```

那么如何在整个矩形上应用我的渐变呢？

```
<LinearGradientBrush>
     <GradientStop Color="White" Offset="0" />
     <GradientStop Color="Transparent" Offset="1" />
</LinearGradientBrush> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:59:31.617

我会这样做：

```
<Grid>
    <Rectangle … checkerboard
    <Rectangle … gradient
</Grid> 
```

# javascript - 单击链接时停止运行javascript

> ID：12216750
> 
> 赞同：0
> 
> 时间：2012-08-31T13:51:04.403
> 
> 标签：javascript, html

我想知道单击链接时是否可以停止在页面上运行的 javascript。我遇到的问题是页面每 30 秒刷新一次（网站上的列表需要是最新的）但是如果用户单击列表中的链接并且在此之前完成加载 30 秒刷新开始，它会停止链接从打开，而是刷新页面。

这是正在运行的脚本，

```
 <script type="text/javascript">
        window.name = "NewRegistration";
        setTimeout("location.reload(true);",30000);
    </script> 
```

该链接指向网站上的另一个页面。

如果有什么不清楚的请询问。

谢谢，

杰克。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T13:53:38.033

```
<script type="text/javascript">
  var id;

  function stopRefresh()
  {
    window.clearTimeout(id);
  }

  window.name = "NewRegistration";
  id = window.setTimeout("location.reload(true);",30000);
</script>

<a href="somelike.html" onclick="stopRefresh();">Some Link</a> 
```

如果您使用的是 jQuery，这更容易应用于页面上的所有链接：

```
<script type="text/javascript">
  $(document).ready(function() {
    $('a').click(function() {
      stopRefresh();
    });
  });
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:54:36.863

您不必停止页面上的所有 javascript。

您必须处理刷新页面功能。例如，您可以在单击链接时将标志设置为 false。

30 秒后 if (flag == false) 不刷新页面 否则刷新页面

就这样 ：）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T13:56:12.413

这些天来，最常见的做法是在后台更新而不重新加载整个页面，尽管这需要更多的设置工作。阅读 Ajax 以了解更多信息。

一个更易于实施的解决方案是......好吧，Sean Bright 已经击败了我，我刚才看到了；）

# html - 里面的元素 失去显示：内联属性

> ID：12216753
> 
> 赞同：0
> 
> 时间：2012-08-31T13:51:13.957
> 
> 标签：html, css, inline

没有`<p>`这样的一切都很好。

```
<footer>
  <a href="#">Text Here</a>
  <address style="display: inline"><a href="#">Text Here</a><address>
  <p>
    Text Here
  </p>
</footer> 
```

但是，如果添加`<p>`则`<address>`元素将显示为非内联。我需要使`<address>`行为内联。如何强迫它成为这样？

[http://fiddle.jshell.net/xKhYj/](http://fiddle.jshell.net/xKhYj/)

```
<footer>
  <p>
    <a href="#">Text Here</a>
    <address style="display: inline"><a href="#">Text Here</a></address>
  </p>
  <p>
    Text Here
  </p>
</footer> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:57:49.417

你可以添加`display:inline-block`或`display:block`

检查网址

[http://fiddle.jshell.net/PteZC/2/](http://fiddle.jshell.net/PteZC/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T13:58:51.723

如果您也将内联到您的`<p>`标签中，它也可以工作：

```
<p style="display:inline"> 
```

[小提琴](http://fiddle.jshell.net/PteZC/)

# r - 动态为函数分配属性

> ID：12216755
> 
> 赞同：1
> 
> 时间：2012-08-31T13:51:21.013
> 
> 标签：r

我正在尝试在函数 B 中使用函数 A。我想根据函数 B 的输入来修复函数 A 的属性。举个简单的例子：

```
somfun<-function(x,atra){

   functionA(x,atra$subset)

} 
```

对不起，如果它是模糊的。但是我需要`atra`像`paste(x,sep='sss')`等一样使用参数进行操作，但是使用任意数量的参数。例如，`atra 将是一个命名向量或任何合适的向量。

例子

```
atra<-list(a=1:2,b=3:4,c=5:6,1:2,sep='')

x<-'data'
somfun<-function(x,atra){

   c(atra[[1]],atra[[2]],atra[[3]],paste(x,atra[[5]]))

} 
```

但我希望所有名称都保留并粘贴以意识到这`atra[[5]]`是在说`sep=''`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:44:13.957

您需要该`do.call`函数，该函数可以使用列表（包括命名参数）调用函数。例如：

```
do.call(paste, list("hello", "world", sep="/"))
# [1] "hello/world" 
```

# jquery - 如何忽略css类

> ID：12216757
> 
> 赞同：5
> 
> 时间：2012-08-31T13:51:23.043
> 
> 标签：jquery, css

可以忽略 css 值吗？

我有两个 div：

```
<div id="div1" class="class1 class2">
</div>

<div id="div2" class="class1">
</div> 
```

css 类是否可以仅应用于样式为 class1 的 div，如果它们包含 class2 则其被忽略？所以在上面的 div 中，只有 div2 使用 class1 样式，因为 div1 也使用 class2 样式。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T13:58:24.183

您可以使用`:not`选择器。这是一个例子：

CSS

```
.red:not(.yellow) {
    color: red;
}
.yellow {
    background-color: yellow;
} 
```

HTML：

```
<div class = "red yellow">
   Glee's awesome!
</div>
<div class = "red">
   Glee's awesome!
</div> 
```

**[演示](http://jsfiddle.net/glee/djMx4/)**。

我希望这有帮助！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T13:54:33.660

像这样写：

```
.class1{
  background:red;
}
.class1.class2{
  background:none;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T13:57:26.523

您可以使用`:not`选择器：

```
$('.class1:not(.class2)') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T13:54:44.457

是的，

在 css 属性之后使用 !important

例如`height:30px !important`

如果你的 class1`height:30px` 和 class2`height:40px`那么用户 !important 在 class2 高度

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T13:54:45.000

我用jquery处理这个问题的方式（因为它是你标记它的方式，如果你只想要类class1的div）是做一个检查，比如

```
if($('div').class() == 'class1') {

} 
```

这将只选择 class 等于的 div`class1`而不是 class 的那个`class1 class2`

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T14:23:24.333

这里有很好的答案，我只想在这里添加一点：您必须在选择器之间做出决定，这些选择器似乎做的相同但略有不同：

*   “在存在时覆盖`class1`样式。” `class2`或“当两个班级都存在时，我想要特殊的风格。”
*   `class1`“在存在和`class2`不存在时应用特殊样式。”
*   “我真的很想在存在时禁止`class1`选择器的所有规则`class2`。”

你必须决定你的要求到底是什么。这些句子之间是有区别的。

在第一种情况下，请使用 @sandeep 之类的 CSS 选择器，因为这些选择器是这样工作的。选择器`.class1.class2`比`.class1`选择器更具体，当两个类都存在时选择它。因此，只有在两个类都存在时，您才能在此处设置要应用的规则。更具体的选择器中的冲突规则具有比其他选择器更高的优先级，并且能够覆盖它。

在第二种情况下，使用`:not`选择器。这些使得只有当一个类存在而其他一些不存在时才可以应用某些样式。

对于第三种情况：您的问题指向忽略 css 类。这是不可能的。您可以在更具体的选择器中覆盖其规则，或者将其规则放在不再匹配某些标签的选择器中。但只要它在那里，你就不能忽视它。因此，您必须`class1`从标签的 class 属性中删除 。不过，您可以使用 jQuery 来实现这一点。

```
 $(".class2").removeClass("class1"); 
```

# javascript - 从句子中找出最长的单词 - Javascript

> ID：12216758
> 
> 赞同：3
> 
> 时间：2012-08-31T13:51:23.380
> 
> 标签：javascript, html

有没有办法找出 Javascript 中最长的单词？它也应该忽略标点符号！

我理解逻辑，但代码......*叹息*

这就是我们所做的 -

1.  计算在一起的字母数字字符的数量，而不是用空格或任何符号分隔。

2.  得到他们的长度。

3.  找到最大的长度。
4.  返回长度最大的单词。

希望我说清楚...

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T13:52:36.350

拆分字符串，遍历各个部分并跟踪最长的部分。

像这样的东西：

```
var parts = sentence.split();
var longestIndex = -1;
var longestWord = 0;

for(var i=0; i < parts.length; i++){
    if(parts[i].length > longestWord){
        longestWord = parts[i].length;
        longestIndex = i;
    }
}

alert("longest word is " + parts[longestIndex] + ": " + longestWord + " characters"); 
```

如果您需要拆分非字母字符以及空格，则需要使用正则表达式。您可以更改此行：

```
var parts = sentence.split(); 
```

为此（感谢 Kooilnc 的正则表达式）：

```
var parts = sentence.match(/\w[a-z]{0,}/gi); 
```

[工作jsfiddle](http://jsfiddle.net/pQa6N/1/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T13:54:56.430

```
var longest_word = arr.reduce(function (x, y) { return x.length > y.length ? x : y; }); 
```

你去吧。

使用它：

```
var arr = [ 'lol', 'loll', 'lollll', 'lo', 'l' ];
var longest_word = arr.reduce(function (x, y) { return x.length > y.length ? x : y; }); 
```

所以把你的句子变成一个数组，那么变量longest_word将是该数组中最长的单词。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-31T13:56:48.790

尝试这个：

```
sentence_array = sentence.split(' ');
var longest = sentence_array.sort(function (a, b) { return b.length - a.length; })[0]; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T14:10:24.593

您可以使用该方法将字符串拆分为仅由单词​​组成的数组（无分隔符、数字等）`match`，然后按每个元素的长度降序排序，之后元素 0 是最长的单词。

它可能是一个`String.prototype`扩展

```
String.prototype.longestWord = function(){
  return (this.match(/\w[a-z]{0,}/gi) || [''])
          .sort(function(a,b){return b.length-a.length;})[0];
}
//usage
'We saw it ...! A lazy cat walking - or did we?'.longestWord(); //=> walking
'------------'.longestWord();                                   //=> ''
'---aa--b----'.longestWord();                                   //=> 'aa' 
```

与函数相同，使用`Array.reduce`

```
function longestWord(str){
   return (str.match(/\w[a-z]{0,}/gi) || [''])
           .reduce( function(a,b){return a.length>b.length ? a : b;} );
} 
```

[在这里提琴](http://jsfiddle.net/KooiInc/qcA2n/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-03T17:19:57.023

这就是我试图解决问题的方式：

```
function LongestWord(sen) { 
    var wordArray = sen.match(/\w+/gi);
    var longest = 0; 
    var word = undefined; 
  for(var i = 0; i < wordArray.length; i++){
    if(wordArray[i].length > longest){
       word = wordArray[i];
      longest = word.length;
    }
  }

  return word; 

} 
```

# c# - 在滚动查看器中填充 Measure/ArrangeOverride

> ID：12216762
> 
> 赞同：1
> 
> 时间：2012-08-31T13:51:33.020
> 
> 标签：c#, wpf, scrollviewer, measureoverride

我有一个包含一些图的自定义绘制控件。我把它放在一个滚动查看器中，因为后来我希望能够缩放控件的内容。我希望这个控件有一个特定的最小高度，如果可用的可见空间大于它应该填充空间。然而，使用 MeasureOverride 我只是得到了可用高度的无穷大（因为滚动查看器）。如何在 MeasureOverride 期间获得实际可用的可见空间以将控件拉伸到此高度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:00:25.140

您不需要为此做任何布局覆盖，只需将对齐设置为`Stretch`和 a `MinHeight`。

# java - 为什么我们需要提供两次通用信息？

> ID：12216764
> 
> 赞同：3
> 
> 时间：2012-08-31T13:51:35.657
> 
> 标签：java, generics, language-design

关于 Java 中的泛型的另一个非常基本的问题，直接来自[我的上一个问题](https://stackoverflow.com/questions/12216326/what-is-the-difference-between-listnumber-and-list-extends-number)。我们不是通过编写下面的代码两次向编译器提供相同的信息吗？为什么我们需要在左侧和右侧都提供？

```
List<Number> numbers = new ArrayList<Number>(); 
```

**编辑**：正如我在一些答案中看到的那样，它在 java 7 以后不再需要。但我想知道在 java 7 之前它不可能的原因是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:53:25.720

引入了菱形运算符来删除这些冗余信息。

也请参阅此 SO 链接[Java 7 中的菱形运算符有什么意义？](https://stackoverflow.com/questions/4166966/what-is-the-point-of-the-diamond-operator-in-java-7)

从我的阅读/理解来看，我认为泛型在 java 中做得不好。这 ？最后介绍的操作员是一个痛苦的工作。有擦除的事实表明，在我看来它是硬生生的。它可以完成工作，但我认为它可能会更好

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T13:53:15.993

因为 pre java 7 不支持构造函数的泛型类型推断。这在 java 7 中由菱形运算符解决。
您还可以编写通用工厂方法作为解决方法，例如：

```
 public static <T> List<T> createArrayList() {
      return new ArrayList<T>();
 } 
```

然后

```
List<Integer> list = createArrayList(); 
```

这是有问题的，但有效。并且对于 Maps 和其他多参数泛型类型来说可能会得到很好的回报。

* * *

编辑：也许语言设计者决定不支持泛型类型推断，因为他们实现了具有类型擦除的泛型。我认为另一个值得商榷的决定......否则，不要认为在早期的 Java 版本中反对这个特性有任何严重的理由。（根据彼得劳里的附录，它仍然不存在。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:54:09.433

因为一个是参考，一个是实现。该行的左侧是设置存储实例化变量的引用。由于 Java 使用“运行时类型擦除”来实现泛型，因此除了引用分配之外的任何代码都无法知道泛型参数是什么分配的。

编辑-我不知道J7的变化（我有点过时了:)）-看起来他们解决了这个问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:54:59.747

As well as the reasons described in the other answers, the argument on the right side in this example does not need to be exactly the same as the left one. Example:

```
List<? extends Calendar> cals = new ArrayList<GregorianCalendar>(); 
```

# mysql - 使用光标在循环中选择

> ID：12216765
> 
> 赞同：0
> 
> 时间：2012-08-31T13:51:43.370
> 
> 标签：mysql

我有这个存储过程：

```
 DELIMITER //
DROP PROCEDURE IF EXISTS cursor_example//
CREATE PROCEDURE cursor_example()
BEGIN
    DECLARE niche_id INT;
    DECLARE niche_name VARCHAR(100);

    DECLARE curl CURSOR FOR SELECT * FROM `niche`;
    DECLARE CONTINUE HANDLER FOR NOT FOUND SET done=1;

    OPEN curl;
      my_loop:LOOP
        FETCH curl INTO niche_id,niche_name;
        IF done=1 THEN
           LEAVE my_loop;
        END IF;      
      END LOOP my_loop;
    CLOSE curl;
END//

DELIMITER ; 
```

我想输出 curl 获取的所有内容。所以我想将 SELECT 语句放在循环内部或外部......但这不会给我想要的结果。如何从该游标中取回所有 sql 结果。

与其他简单的未绑定 - SELECT 语句相比，使用游标有什么优势。我的意思是我可以通过简单地使用 select 语句而不编写所有游标代码来获得我想要的结果？

# django - Django - 工作时间的对象

> ID：12216771
> 
> 赞同：12
> 
> 时间：2012-08-31T13:52:03.990
> 
> 标签：django, django-models, django-forms

我正在尝试为公司一周的工作时间建模。这是我的尝试：

```
class Company(models.Model):
    name = models.CharField(max_length=100)
    logo = models.FileField(upload_to='company_logos')
    mon_start = models.TimeField()
    mon_end = models.TimeField()
    tue_start = models.TimeField()
    tue_end = models.TimeField()
    wed_start = models.TimeField()
    wed_end = models.TimeField()
    thu_start = models.TimeField()
    thu_end = models.TimeField()
    fri_start = models.TimeField()
    fri_end = models.TimeField()
    sat_start = models.TimeField()
    sat_end = models.TimeField()
    sun_start = models.TimeField(blank=True)
    sun_end = models.TimeField(blank=True) 
```

这看起来正确吗？

没有更动态的方式来定义它吗？

我可以轻松地验证每一天（在表格上）吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-31T14:14:14.217

根据@lyapun 的建议，我可以接受的解决方案是：

```
WEEKDAYS = [
  (1, _("Monday")),
  (2, _("Tuesday")),
  (3, _("Wednesday")),
  (4, _("Thursday")),
  (5, _("Friday")),
  (6, _("Saturday")),
  (7, _("Sunday")),
]

class Company(models.Model):
    name = models.CharField(
        max_length=100
    )
    logo = models.FileField(
        upload_to='company_logos'
    )

class OpeningHours(models.Model):
    store = models.ForeignKey(
        Company
    )
    weekday = models.IntegerField(
        choices=WEEKDAYS,
        unique=True
    )
    from_hour = models.TimeField()
    to_hour = models.TimeField() 
```

# hadoop - 可扩展的基于实时项目的 mahout 推荐器，使用项目相似性 hadoop 作业预先计算项目相似性？

> ID：12216781
> 
> 赞同：3
> 
> 时间：2012-08-31T13:52:36.430
> 
> 标签：hadoop, machine-learning, mahout

我有以下设置：

布尔数据：（用户 ID，项目 ID）

基于 hadoop 的 mahout itemSimilarityJob 具有以下论点：--similarityClassname Similarity_Loglikelihood --maxSimilaritiesPerItem 50 & others (input, output..)

基于项目的布尔推荐器：-model MySqlBooleanPrefJDBCDataModel -similarity MySQLJDBCInMemoryItemSimilarity -candidatestrategy AllSimilarItemsCandidateItemsStrategy -mostSimilarItemsCandidateStrategy AllSimilarItemsCandidateItemsStrategy

1.  有没有办法在我的设置中使用相似性共现来获得最终推荐？如果我在作业中插入 SIMILARITY_COOCCURENCE，MySqlJDBCInMemorySimilarity 前置条件检查将失败，因为计数变得大于 1。我知道我可以通过在预先计算的相似性上运行推荐器作业来获得最终推荐。在使用 MysqlInMemorySimilarity 的相似性对数似然（以及其他相似性值在 -1 和 1 之间的相似性度量）的情况下，有没有办法使用 api 实时执行此操作？

2.  我们如何限制最大数量。项目相似性作业中每个项目的相似项目数。我的意思是 allsimilaritemscandidatestrategy 调用 .allsimilaritems(item) 来获取所有可能的候选人。有没有一种方法可以让我使用 API 获得前 10/20/50 个类似项目。我知道我们可以将 --maxSimilaritiesPerItem 传递给项目相似性工作，但我不完全确定它代表什么以及它是如何工作的。如果我将其设置为 10/20/50，我是否能够实现上述目标。还有没有办法通过api来完成这个？

3.  我正在使用 rescorer 来过滤和重新评分最终建议。使用 rescorer，与 (30-70ms) 相比，对 /recommend/userid?howMany=10&rescore={..} 和 /similar/itemid?howMany=10&rescore{..} 的调用时间更长 (300ms-400ms)没有记分员。我正在使用 redis 作为内存存储来获取重新评分数据。rescorer 还接收一些运行时数据，如上所示。rescorer 中只进行了一些检查。问题是，没有。特定用户的项目偏好增加（> 100），没有。对 isFiltered() 和 rescore() 的调用大大增加。这主要是因为对于每个用户偏好，对 CandidateStrategy.getCandidatItems(item) 的调用会为每个返回大约 (100+) 个相似的项目，并且为每个这些项目调用 rescorer。因此，需要限制工作中每个项目的最大相似项目数。这是正确的还是我在这里遗漏了什么？在这种情况下，优化 rescorer 的最佳方法是什么？

MysqlJdbcInMemorySimilarity 使用 GenericItemSimilarity 加载 memeory 中的项目相似性，其 .allsimilaritems(item) 从 mysql 中预先计算的项目相似性中返回给定项目的所有可能相似项目。我是否需要实现我自己的项目相似性类来返回前 10/20/50 个相似项目。如果用户的号码呢？的喜好继续增长？

如果有人能告诉我如何实现上述目标，那就太好了？多谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T15:50:00.547

您指的是什么前提条件检查？我没有看到它们；我不确定是否实际上禁止相似性大于 1。但是您似乎在问是否可以创建一个仅返回共现的相似性函数，因为`ItemSimilarity`它不与 Hadoop 一起使用。是的你可以; 它在项目中不存在。我不建议这样做；`LogLikelihoodSimilarity`会变得更聪明。

您需要一个不同的`CandidateItemStrategy`，特别是查看`SamplingCandidateItemsStrategy`它的 javadoc。但这与 Hadoop 无关，而与运行时元素无关，并且您提到了 Hadoop 作业的标志。那不是一回事。

如果重新评分很慢，这意味着，嗯，`IDRescorer`很慢。它被调用了很多次，以至于您肯定需要在内存中缓存任何查找数据。但是，减少上述每个候选者的数量也会减少调用的次数。

不，不要实现自己的相似性。您的问题不是相似性度量，而是有多少项目被视为候选项目。

我是您所谈论的大部分代码的作者。我认为您正在努力解决大多数人在尝试大规模进行基于项目的工作时遇到的各种问题。你可以，只要有足够的采样和调整。

然而，我正在将新的开发投入到另一个名为[Myrrix](http://myrrix.com)的项目和公司中，该公司正在开发一种基于相同 API 的“下一代”推荐器，但由于它基于矩阵分解，因此应该在没有这些复杂性的情况下进行扩展。如果你有时间和兴趣，我强烈建议你看看 Myrrix。相同的 API，实时服务层是免费/开放的，并且支持的基于 Hadoop 的计算层也可用于测试。

# php - FPDF背景颜色不变

> ID：12216786
> 
> 赞同：2
> 
> 时间：2012-08-31T13:52:52.703
> 
> 标签：php, fpdf

嗨，我正在使用 FPDF，我在设置背景颜色方面遇到了一些问题。

目前我正在使用

```
 $this->_FpdfGenerator->SetFillColor('239', 0, 0); 
```

我也试过这个

```
 $this->_FpdfGenerator->SetFillColor(239, 0, 0); 
```

但背景颜色没有改变。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:32:52.937

如果您查看文档，您必须提供绿色和蓝色分量值才能拥有您的颜色。

否则你会有一个灰度级。

[设置填充颜色](http://www.fpdf.org/en/doc/setfillcolor.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T09:47:21.527

```
mpdf->SetFillColor('RED');
// Just Make the 7th Parameter Equal to TRUE 
$mpdf->WriteCell(38, 10, 'HeLLOO', 1, 0, 'C', TRUE); 
```

# php - Socket.IO 上的 PHP 应用程序 + 基于 WebSocket 的通知

> ID：12216787
> 
> 赞同：16
> 
> 时间：2012-08-31T13:52:54.937
> 
> 标签：php, apache, node.js, websocket, socket.io

我有一个使用 laravel 用 PHP 编写的 Web 应用程序。

现在，我必须添加从服务器-> 客户端推送消息的实时通知系统，并且可以检索从客户端-> 服务器推送的消息。

由于 Socket.IO 向后兼容并且可以优雅地降级，我想将它用于 WebSocket / AJAX 轮询部分。

问题是 Socket.IO 默认使用 Node.JS 后端。

我对服务器具有 root 访问权限，并行运行（Apache 和 Node）或添加任何额外内容都没有问题。

问题是，**如何从 PHP 向 Node + Sockets.IO 发送消息？**

然后，**如何将消息从 Sockets.IO + Node 传输到 PHP？**

我已经将 Node + Sockets to Browser 部分排除在外，因为这非常简单。

我已经看到了使用[Express.js + CURL 和/或 POST 请求](https://stackoverflow.com/questions/11550103/push-notifications-using-socket-io-and-php)的示例，但是，没有较低级别的方法吗？

我知道[DNode + PHP](http://bergie.iki.fi/blog/dnode-make_php_and_node-js_talk_to_each_other/)，但我无法想象如何组装所有东西 - Apache、PHP、Node、Socket.IO、DNode，这样它就可以无缝地协同工作。

[另外，我已经将这个PHP WebSockets 服务器](https://github.com/lemmingzshadow/php-websocket)实现转换为 laravel 库。然而，这个库的问题在于它在客户端使用了干净的 WebSockets。而且，我找不到与[Socket.IO client](https://github.com/LearnBoost/socket.io-client)一起破解它的方法。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T20:56:15.370

本教程[使用 PHP 和 Socket.IO](http://webandphp.com/IntegratingNode.jswithPHP)回答了您问题的主要部分。

socket.io 不是您唯一的选择。查看[实时网络技术指南](http://www.leggetter.co.uk/real-time-web-technologies-guide)。从外观上看，目前最好的基于 PHP 的解决方案是[Ratchet](https://github.com/cboden/Ratchet)。这需要作为一个单独的进程运行，因此您仍然会遇到跨进程通信问题。

常见的跨进程通信问题是使用消息队列。当您希望在 Apache 上运行的 PHP 应用程序能够获知来自实时 Web 技术的事件时，问题就出现了。您可能必须通过网络调用来完成此操作，即使它是从实时网络技术进程到 apache 服务器的调用。

另一种选择是将实时通信卸载到我工作的[Pusher等托管服务。](http://pusher.com)

这个最近的问题也很相关，并且有一些有用的链接：[Web Sockets 的原生 PHP 支持是否可用？](https://stackoverflow.com/questions/12203443/web-sockets-is-native-php-support-available/#12204603)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-28T08:33:17.380

[Elephant.IO](http://elephant.io/)支持带有**Socket.IO的****PHP** ，所以看看吧！

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T14:03:28.097

在 node 和 apache/php 之间没有一种简单的通信方式。因此，您要么必须在节点中再次编写所有功能（连接到 mysql 数据库等），要么创建一个 API 以从节点调用并传递给套接字。

但是，您可以使用 jquery 插件（如[Jquery graceful websockets](http://code.google.com/p/jquery-graceful-websocket/)和[这个 php 类](http://code.google.com/p/phpwebsocket/)）来使用 jquery 和 php 获得自己的 websockets 功能，而不是使用 sockets.io。**

# wcf - WCF ASP.NET 路由集成功能需要 ASP.NET 兼容性

> ID：12216791
> 
> 赞同：3
> 
> 时间：2012-08-31T13:53:09.623
> 
> 标签：wcf, rest, web-config

尝试从我的服务器访问我的 Web 服务时遇到此问题。

> ASP.NET 路由集成功能需要 ASP.NET 兼容性。请参阅“http://msdn.microsoft.com/en-us/library/ms731336.aspx”了解如何执行此操作。

就像许多文章建议的那样，我已将此行添加到我的 web.config 中，但我仍然遇到相同的错误。

```
<serviceHostingEnvironment aspNetCompatibilityEnabled="true" /> 
```

可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T10:22:27.947

当我有一个没有配置物理路径的网站时，我遇到了同样的问题。为网站配置物理路径修复了它。

```
# (PowerShell)
# Give it a physical path.    
mkdir C:\inetpub\wwwroot2
Set-ItemProperty "IIS:\Sites\$WebSiteName" `
    -Name physicalPath -value C:\inetpub\wwwroot2 
```

# java - 表达式类中的 execute()

> ID：12216792
> 
> 赞同：1
> 
> 时间：2012-08-31T13:53:09.967
> 
> 标签：java, reflection, applet

Java7 中最新的安全漏洞，小程序可以在用户机器上执行不受信任的代码。如需更多信息，请访问[http://www.h-online.com/security/features/The-new-Java-0day-examined-1677789.html](http://www.h-online.com/security/features/The-new-Java-0day-examined-1677789.html)。

但我的问题是：有人提到这一切都是可能的，因为 Expression 类中引入了 execute() 方法。但它并没有什么特别之处，这在以前的版本中是不可能的。这是来源：

```
 @Override
public void execute() throws Exception {
    setValue(invoke());
} 
```

对于自 java1.4 以来存在的 getValue() ：

```
 public Object getValue() throws Exception {
    if (value == unbound) {
        setValue(invoke());
    }
    return value;
} 
```

getValue() 完成了 execute() 所做的一切。那为什么对execute方法这么大惊小怪？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:58:29.760

如果仔细观察，漏洞利用代码还会调用`.getValue()`. 显然，漏洞位于`invoke`. `execute`本质上是一个调用私有的公共接口`invoke`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T01:24:05.497

几年前我报告了一个错误，其中表达式中的访问检查与编译器的不同。这可能是另一个例子。

# c++ - 如果 'foo' 是引用变量， [&foo]{ ... } 捕获和 [foo]{ ... } 捕获之间有区别吗？

> ID：12216793
> 
> 赞同：13
> 
> 时间：2012-08-31T13:53:10.557
> 
> 标签：c++, lambda, c++11

对于`foo`声明为`Foo& foo = ...;`，lambdas 的按值捕获和按引用捕获语义之间有什么区别吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-31T14:13:29.927

我认为你已经陷入了一个常见的误解......引用是真实对象的*别名。*初始化之后，对引用的任何使用都完全等同于对原始对象的使用。如果你考虑到这一点，这个问题就没有什么意义了。如果引用**是**对象，那么无论是对象还是对对象的引用，其行为都`[foo](){}`将完全相同。`foo`

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-08-31T14:00:32.100

是，有一点不同。

`§5.1.2 [expr.prim.lambda] p14`

> 如果实体被*隐*式捕获并且*默认捕获*是`=`，或者如果使用不包含`&`. 对于复制捕获的每个实体，在闭包类型中声明了一个未命名的非静态数据成员。这些成员的声明顺序是未指定的。如果实体不是对对象的引用，则**此类数据成员的类型是相应捕获实体的类型，否则****为引用类型**。

因此，如果您捕获按值命名引用的标识符，您将获得被引用对象的副本。

# postgresql - now() 默认值都显示相同的时间戳

> ID：12216802
> 
> 赞同：31
> 
> 时间：2012-08-31T13:53:31.927
> 
> 标签：postgresql, transactions, timestamp, postgresql-9.1

我用一列（类型：带时区的时间戳）创建了我的表，并将其默认值设置为`now()`（`current_timestamp()`）。

我在单个函数的单独语句中运行了一系列插入，我注意到所有时间戳都等于（ms），函数值是否以某种方式缓存并为整个函数调用或事务共享？

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-08-31T14:05:36.137

这是[预期和记录](http://www.postgresql.org/docs/current/static/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)的行为：

从手册：

> *由于这些函数返回当前事务的开始时间，因此它们的值在事务期间不会改变。这被认为是一个特性：目的是允许单个事务具有一致的“当前”时间概念，以便同一事务中的多个修改具有相同的时间戳。*

如果您希望每次运行语句时都会更改某些内容，则需要使用`statement_timestamp()`or 甚至`clock_timestamp()`（再次参见手册中的描述）

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-31T14:05:12.987

`now()`并且`current_timestamp`是[`STABLE`](https://www.postgresql.org/docs/current/xfunc-volatility.html)返回*事务开始*时的时间点的函数`timestamptz`。

尤其考虑[PostgreSQL 提供的其他选项](https://www.postgresql.org/docs/current/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)**`statement_timestamp()`**之一。[手册：](https://www.postgresql.org/docs/current/functions-datetime.html#FUNCTIONS-DATETIME-CURRENT)

> `statement_timestamp()`返回当前语句的开始时间（更具体地说，是从客户端收到最新命令消息的时间）

# php - 数据循环出错

> ID：12216806
> 
> 赞同：0
> 
> 时间：2012-08-31T13:53:50.757
> 
> 标签：php, loops

我已经正确显示了此循环的第一轮。我想要的是 5 行 8 列。我得到的是第一组正确显示，第二组显示为 10 列。

我哪里错了？

```
echo '<table align="center" width="70%"><tr>'; 
$count = 0; 
$rowCount = 0;
while ( $row = mysql_fetch_array($result)) 
{ 
  $count++;    
  echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "' width='120' h     eight='160'/></a></td>"; 

if ($count % 8 === 0) 
{ 

    echo '</tr>';
$rowCount++;

if($rowCount % 8 === 0)
 {
    echo '</tr></table><br><br>Adds here<br><br><tablealign="center" width="70%"><tr>';
 }else{
    echo '<tr>';
 }
  } 
}     
echo ' </tr></table>'; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:02:52.347

你试图让它变得有点太复杂了。

将列数与行数的功能分开：

```
<?php

echo '<table align="center" width="70%"><tr>'; 
$count = 0; 
$rowCount = 0;
while($row = mysql_fetch_array($result)) 
{ 
    $count++;
    echo "<td><a href='" . $row['URL'] . "'><img src='" . $row['IMG'] . "' width='120' h     eight='160'/></a></td>"; 
    if($count%8===0)
    {
        $rowCount++;
        echo '</tr>';

        if($rowCount%5===0)
        {
            echo '</table><br/><br/>Adds Here<br/><br/><table align="center" width="70%"><tr>';
            $rowCount = 0;
        }
    }
}
echo ' </tr></table>'; 
```

# c# - 如何在 c# 文件中获取 asp Dropdownlist 选定值？

> ID：12216811
> 
> 赞同：0
> 
> 时间：2012-08-31T13:54:06.550
> 
> 标签：c#, asp.net

我的`aspx`页面中有一个关注下拉列表：

```
 <asp:DropDownList ID="OrderPeriodStatus" runat="server" AutoPostBack="true"
    CssClass="ddlb" Width="100px" Height="30px" DataSourceID="SqlDataSource5" 
    DataTextField="OrderPeriod" DataValueField="OrderPeriodID" onselectedindexchanged="OrderPeriodStatus_SelectedIndexChanged">
     </asp:DropDownList>

<asp:SqlDataSource ID="SqlDataSource5" runat="server" ConnectionString="<%$ ConnectionStrings:ProdDB %> # blah blah query
    </asp:SqlDataSource> 
```

我尝试通过以下代码访问 C# 中选定值的值：

```
protected void Page_Load(object sender, EventArgs e)
    {

        if (!IsPostBack)
        {
            ProcessEligibleScenarios();
            LoadOptions();
            ddlbPeriod.DataBind();
            GridView1.DataBind();
            gvActiveLogs.DataBind();
        }
    }

protected void OrderPeriodStatus_SelectedIndexChanged(object sender, EventArgs e)
    {
        if (OrderPeriodStatus.SelectedValue != null)
        {
            SqlConnection myConn = default(SqlConnection);
            SqlCommand myComm = default(SqlCommand);
            myConn = new SqlConnection(ConfigurationManager.ConnectionStrings["ProdDB"].ConnectionString);
            myConn.Open();
            myComm = new SqlCommand("SELECT OrderPeriodDate, OrderPeriodStatus, Notes FROM OrderPeriod WHERE OrderPeriod ='" + OrderPeriodStatus.SelectedValue + "'");
            try
            {
                myComm.Connection = myConn;
                SqlDataReader Dr = myComm.ExecuteReader();
                while (Dr.Read())
                {
                    System.Diagnostics.Debug.Write("While reading the data");
                    TextBox1.Text = Dr["OrderPeriodDate"].ToString();
                    TextBox2.Text = Dr["OrderPeriodStatus"].ToString();
                    NotesArea.Value = (string)Dr["Notes"];
                    System.Diagnostics.Debug.WriteLine(OrderPeriodStatus.SelectedValue);
                }
                Dr.Close();
                myConn.Close();
            }
            catch (SqlException sqx)
            {
            }
            GridView1.DataBind();
        }
        else {  }
    } 
```

但是当我打印`value`. 它显示选定的索引而不是值。为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:56:35.733

您在 sqdatasource 上有不匹配错误，替换为`SqlDataSource4`

```
DataSourceID="SqlDataSource5"  <---

<asp:SqlDataSource ID="SqlDataSource4" runat="server" ConnectionString="<%$ ConnectionStrings:ProdDB %> # blah blah query
 </asp:SqlDataSource> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:22:21.207

您可以尝试从`Request.Form`对象获取值并获取文本使用`ddl.Items.FindByValue`方法

```
 var value = Request.Form[DropDownListnew.UniqeID];
    var text = DropDownListnew.Items.FindByValue(value); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:04:20.987

如果您将下拉列表上的 AutoPostback 属性设置为 true，并将 ViewStateMode 设置为继承，您应该获得您选择的值。我在我身边尝试过，它奏效了。由于您已经拥有 SqlDataSource，并且下拉列表的 DataSourceId 设置为 SqlDataSource，因此应该自动填充它。

- -编辑

对不起，我想我可能误读了你的问题。如果您改为使用

```
DropDownListnew.SelectedItem.Text 
```

你应该得到你想要的文本值。

-- 另一个编辑：

@Amit，您将从 SelectedValue 获得索引，因为在您的下拉列表代码中，您已设置

```
DataValueField="OrderPeriodID" 
```

这基本上是您的主键或索引。要获取文本值而不是索引，您必须使用

```
SelectedItem.Text 
```

同样在您的查询中：

```
myComm = new SqlCommand("SELECT OrderPeriodDate, OrderPeriodStatus, Notes FROM OrderPeriod WHERE OrderPeriod ='" + OrderPeriodStatus.SelectedValue + "'"); 
```

我认为你应该使用

```
WHERE OrderPeriodID ='" + OrderPeriodStatus.SelectedValue + "'"); 
```

您在 OrderPeriod 之后缺少 ID 位。

# objective-c - NSString 到固定长度字符数组的转换

> ID：12216815
> 
> 赞同：1
> 
> 时间：2012-08-31T13:54:24.847
> 
> 标签：objective-c, cocoa, nsstring, arrays

我有一个包含这样的 char 数组的结构：

```
char name[10]; 
```

现在我需要一种将 NSString 转换为这种类型的字符串的方法。

我已经可以将此字符串转换为 NSString：

```
NSString *string = [[NSString alloc] initWithBytes:name length:10      
encoding:NSASCIIStringEncoding]; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:59:58.543

您可以使用以下`getCString:maxLength:encoding:`方法执行此操作`NSString`：

```
char name[10];
NSString *s = @"Hello";
[s getCString:name maxLength:10 encoding:NSASCIIStringEncoding]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:17:56.600

**来回**的完整转换过程：****

 **```
// from NSString through char* to NSString again
NSString *text = @"long text or short";
const char *constName = [text UTF8String];

char *name = malloc(sizeof(unichar) * text.length + 1);
memcpy(name, constName, sizeof(unichar) * text.length);

NSString *fromChar = [NSString stringWithUTF8String:name];

NSLog(@"%@", fromChar);

free(name); 
```**

# python - Django查看嵌套元组计算

> ID：12216821
> 
> 赞同：0
> 
> 时间：2012-08-31T13:54:40.803
> 
> 标签：python, django

我正在尝试在通用视图中计算时间增量，但我不明白如何通过元组并进行我正在寻找的计算。

我正在运行的查询是

```
sla_list = self.object_list.filter(types__name="Unplanned").filter(service__sla=True).values_list('service__name', 'end_out', 'start_out') 
```

回报的一个例子是。

```
(u'Peoplesoft', datetime.datetime(2012, 7, 12, 1, 57, tzinfo=(UTC)), datetime.datetime(2012, 7, 11, 19, 25, tzinfo=(UTC))) 
```

我在模型方法中进行了计算并且它正在工作，但是对于我想要在 timedelta 上进行的计算，我认为它应该被移到视图中。

我使用的模型方法是

```
timedelta = self.end_out - self.start_out
timedelta = timedelta.total_seconds()
timedelta = time.strftime('%H:%M', time.gmtime(timedelta)) 
```

任何想法都会很棒。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:05:09.787

`sla_list`包含您要求的 3 个值，`sla_list[1]`end_out 值也是如此，而`start_out`is `sla_list[2]`。

只需将您的计算应用于这两个值：

```
timedelta = sla_list[1] - sla_list[2]
timedelta = '%02d:%02d' % divmod(timedelta.total_seconds(), 60) 
```

我用一个更简单的方法替换了你[的](http://docs.python.org/library/functions.html#divmod)`time.gmtime(timedelta)`and dance ; 毕竟，您需要做的就是将总秒数转换为小时（秒除以 60）和剩余秒数（秒模 60）。`strftime`[`divmod()`](http://docs.python.org/library/functions.html#divmod)

如果您需要对每个条目的时间增量求和，请`service__name`按该条目排序并使用[`itertools.groupby`可调用](http://docs.python.org/library/itertools.html#itertools.groupby)函数快速有效地计算总和：

```
from itertools import groupby
from operator import itemgetter

sla_list = self.object_list.filter(types__name="Unplanned").filter(service__sla=True).order_by('service__name').values_list('service__name', 'end_out', 'start_out')
sla_deltas = {}
for name, entries in groupby(sla_list, itemgetter(0)):
    sla_deltas[name] = sum(end - start for name, end, start in entries) 
```

该`groupby`函数为您提供具有匹配值的子列表`sla__name`，我们只需计算`datetime.timedelta`每个条目的值并用于`sum()`计算总时间增量。

# sql - SQL：聚合函数或 GROUP BY

> ID：12216825
> 
> 赞同：1
> 
> 时间：2012-08-31T13:54:51.210
> 
> 标签：sql, sql-server

下面是一个 sql 语句和我收到的错误。我已经包含了两个表中所有可能的字段，有什么问题？我想按 prodID 对所有返回的项目进行分组

列 'orders.adminStatus' 在选择列表中无效，因为它不包含在聚合函数或 GROUP BY 子句中

```
 SELECT TOP 20 
         ADMINSTATUS,   CURRENCY,   CUSTOMERID,     CUSTOMERMESSAGE,    DELTIME,    DELTOTAL,   DISCOUNT,   DISCOUNTCODE,   
         IP,    ITEMDES,    OPTIONS,    ORDEREDID,  ORDERTOTAL,
         oi.ORDER_ID,   o.ORDER_ID,     PAYMENTTYPE,    PPRICE,     PRODID,     QTY,    REASON,     SECURITYKEY,    SHIPADDRESS1,   
         SHIPADDRESS2,  SHIPADDRESS3,   SHIPCITY,   SHIPCOMPANY,    
         SHIPCOUNTRY,   SHIPCOUNTY,     SHIPMETHOD,
         SHIPNAME,  SHIPPOSTCODE,   STATUS,     STOCKCODE,  SUBTOTAL,   TAX,    TAXABLE,    TIMEDATE,   TXAUTHNO,   VENDORTXCODE,   VPSTXID
         FROM orderedItems oi
         left join orders o on  oi.order_id = o.order_id

    Group by PRODID 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:57:02.353

因为，正如它所说，如果您使用的是 GROUP BY，您要么需要按要返回的字段进行分组，要么对其应用聚合函数；例如：最大值、最小值等

```
SELECT TOP 20  
         ADMINSTATUS,   CURRENCY,   CUSTOMERID,     CUSTOMERMESSAGE,    DELTIME,    DELTOTAL,   DISCOUNT,   DISCOUNTCODE,    
         IP,    ITEMDES,    OPTIONS,    ORDEREDID,  ORDERTOTAL, 
         oi.ORDER_ID,   o.ORDER_ID,     PAYMENTTYPE,    PPRICE,     PRODID,     QTY,    REASON,     SECURITYKEY,    SHIPADDRESS1,    
         SHIPADDRESS2,  SHIPADDRESS3,   SHIPCITY,   SHIPCOMPANY,     
         SHIPCOUNTRY,   SHIPCOUNTY,     SHIPMETHOD, 
         SHIPNAME,  SHIPPOSTCODE,   STATUS,     STOCKCODE,  SUBTOTAL,   TAX,    TAXABLE,    TIMEDATE,   TXAUTHNO,   VENDORTXCODE,   VPSTXID 
         FROM orderedItems oi 
         left join orders o on  oi.order_id = o.order_id 

Group by          ADMINSTATUS,   CURRENCY,   CUSTOMERID,     CUSTOMERMESSAGE,    DELTIME,    DELTOTAL,   DISCOUNT,   DISCOUNTCODE,    
     IP,    ITEMDES,    OPTIONS,    ORDEREDID,  ORDERTOTAL, 
     oi.ORDER_ID,   o.ORDER_ID,     PAYMENTTYPE,    PPRICE,     PRODID,     QTY,    REASON,     SECURITYKEY,    SHIPADDRESS1,    
     SHIPADDRESS2,  SHIPADDRESS3,   SHIPCITY,   SHIPCOMPANY,     
     SHIPCOUNTRY,   SHIPCOUNTY,     SHIPMETHOD, 
     SHIPNAME,  SHIPPOSTCODE,   STATUS,     STOCKCODE,  SUBTOTAL,   TAX,    TAXABLE,    TIMEDATE,   TXAUTHNO,   VENDORTXCODE,   VPSTXID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T13:58:27.593

如果您选择单独的列，则它们都需要出现在 GROUP BY 子句中，除非它们是聚合函数。

见这里：http: [//msdn.microsoft.com/en-us/library/ms177673.aspx](http://msdn.microsoft.com/en-us/library/ms177673.aspx)

例如

```
SELECT TOP 20 
         ADMINSTATUS,   CURRENCY,   CUSTOMERID,     CUSTOMERMESSAGE,    DELTIME,    DELTOTAL,   DISCOUNT,   DISCOUNTCODE,   
         IP,    ITEMDES,    OPTIONS,    ORDEREDID,  ORDERTOTAL,
         oi.ORDER_ID,   o.ORDER_ID,     PAYMENTTYPE,    PPRICE,     PRODID,     QTY,    REASON,     SECURITYKEY,    SHIPADDRESS1,   
         SHIPADDRESS2,  SHIPADDRESS3,   SHIPCITY,   SHIPCOMPANY,    
         SHIPCOUNTRY,   SHIPCOUNTY,     SHIPMETHOD,
         SHIPNAME,  SHIPPOSTCODE,   STATUS,     STOCKCODE,  SUBTOTAL,   TAX,    TAXABLE,    TIMEDATE,   TXAUTHNO,   VENDORTXCODE,   VPSTXID
         FROM orderedItems oi
         left join orders o on  oi.order_id = o.order_id

    Group by ADMINSTATUS,   CURRENCY,   CUSTOMERID,     CUSTOMERMESSAGE,    DELTIME,    DELTOTAL,   DISCOUNT,   DISCOUNTCODE,   
         IP,    ITEMDES,    OPTIONS,    ORDEREDID,  ORDERTOTAL,
         oi.ORDER_ID,   o.ORDER_ID,     PAYMENTTYPE,    PPRICE,     PRODID,     QTY,    REASON,     SECURITYKEY,    SHIPADDRESS1,   
         SHIPADDRESS2,  SHIPADDRESS3,   SHIPCITY,   SHIPCOMPANY,    
         SHIPCOUNTRY,   SHIPCOUNTY,     SHIPMETHOD,
         SHIPNAME,  SHIPPOSTCODE,   STATUS,     STOCKCODE,  SUBTOTAL,   TAX,    TAXABLE,    TIMEDATE,   TXAUTHNO,   VENDORTXCODE,   VPSTXID 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:58:59.323

由于您是按 PRODID 分组的，因此在选择列表中应该只存在 PRODID，如果您想要选择列表中的任何其他列，则应该使用聚合函数，如 AVG()、MIN() MAX() 等。

如果按表中所有可用列分组，则等于

```
select distinct * from table 
```

通常 GROUP BY 与聚合函数一起使用以获取表中每个组的 MIN、MAX 等

[分组示例](http://www.w3schools.com/sql/sql_groupby.asp)

# c++ - C++ 记录器运行时阈值

> ID：12216835
> 
> 赞同：0
> 
> 时间：2012-08-31T13:55:26.687
> 
> 标签：c++

```
namespace Log {
#include <ctime>
#include <string>
#include <boost\scoped_ptr.hpp>

#ifndef LOG_PREPEND_TIMESTAMP_DEFAULT
    #define LOG_PREPEND_TIMESTAMP_DEFAULT false
#endif

enum LogLevel_t { logFatal = 0, logError = 1, logWarning = 2, logVerbose = 3, logDebug = 4 };

std::string LogLevelToString( const LogLevel_t level ) {
    static const char* const buffer[] = { "Fatal", "Error", "Warning", "Verbose", "Debug" };
    return buffer[level];
}
class Log: public boost::noncopyable {
protected:
    boost::scoped_ptr< std::ostringstream > Output_String;
    bool m_Prepending_Timestamp;
    size_t m_LinesOutputted;
public:
    Log():
          Output_String( new std::ostringstream ),
          m_Prepending_Timestamp( LOG_PREPEND_TIMESTAMP_DEFAULT ),
          m_LinesOutputted( 0 ) {}

    void UsingTimestamp( bool Prepending_Timestamp = true ) {
        m_Prepending_Timestamp = Prepending_Timestamp;
    }

    std::ostringstream& Get( const LogLevel_t level ) {
        // Write line number
        ++m_LinesOutputted;
        *Output_String << m_LinesOutputted << " | ";

        if( m_Prepending_Timestamp == true ) {
            //prepare a timestamp
            time_t now = time( NULL );
            std::string formatted_time( asctime( localtime( &now ) ) ); /* &now can be replaced with the above call when r-value references work (maybe) saving a stack var */
            formatted_time.erase(( formatted_time.length( ) - 1 ), 1 );  /* Removes the \n(newline) that asctime adds for better formatting */
            // Write timestamp to stream
            *Output_String << formatted_time << " || ";
        }

        // Write Logging level(severity) to stream
        *Output_String << LogLevelToString( level ) << " || ";
        return *Output_String;
    }

    void Flush() {
        *Output_String << std::endl;
        fprintf( stdout, "%s", Output_String->str( ).c_str( ) );
        fflush( stdout );

        Output_String.reset( new std::ostringstream ); /* streams have lots of internal state clean streams are good */
    }

    ~Log() {
        *Output_String << std::endl;
        fprintf( stdout, "%s", Output_String->str( ).c_str( ) );
        fflush( stdout );
    }
}; 
```

如果没有宏，我将如何实现阈值？

如果我用支票包裹 get 的主体，我仍然必须返回字符串流。

我可以将返回类型更改为指针而不是引用，然后返回 NULL 但是每个记录器语句都必须对返回的字符串流进行空检查

# php - PHP如何在闰年时找到一年零一天前的日期和时间

> ID：12216836
> 
> 赞同：0
> 
> 时间：2012-08-31T13:55:34.067
> 
> 标签：php, date

我试图让 php 计算一年零一天前的日期。我有这个：

```
$date = date(strtotime('-366 days'));
$oneyear_oneday = date("Y-m-d H:i:s", $date); 

$date = date(strtotime('-1 year'));
$oneyear = date("Y-m-d H:i:s", $date); 
```

但是，由于它是闰年，$oneyear 和 $oneyear_oneday 都提供相同的输出。有谁知道我如何正确计算这个？

即如果是 2012 年 8 月 15 日下午 3 点，我希望输出是 2011 年 8 月 15 日下午 3 点

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:02:07.167

使用 PHP5.3，

```
 $date = new DateTime();
   $interval = new DateInterval("P1Y");
   $newdate = $date->sub($interval); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:59:05.703

您可以尝试使用[mktime()](http://php.net/manual/en/function.mktime.php) ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:00:15.557

两种计算都是正确的。但是，如果您想获得相同的日期，但一年前，您应该简单地使用“-1 年”。字符串 '-366 days' 仅在闰年是正确的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T14:03:38.340

```
$date = strtotime('2010-01-01 -1 year');
echo date('Y-m-d', $date); 
```

输出流看起来像，

```
2009-01-01 
```

[转到此链接以获取更多参考](https://stackoverflow.com/questions/1990321/date-minus-1-year)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T14:10:53.963

首先，减去一年。然后，从结果中减去一天：

```
$date = strtotime('-1 day', strtotime('-1 year'));
$oneyear_oneday = date("Y-m-d H:i:s", $date); 
```

# vb.net - Office 加载项安装 VSTO 下载失败

> ID：12216839
> 
> 赞同：4
> 
> 时间：2012-08-31T13:55:54.800
> 
> 标签：vb.net, outlook, vsto, clickonce

我有一个从 Web 服务器安装的 Outlook 加载项。此加载项的工作方式与我在 Office 中使用的所有其他加载项相同。

1.  setup.exe 已下载并执行
2.  所有先决条件（.Net 框架等）都经过验证
3.  vsto 文件已下载

到目前为止，安装这个插件的每个人都没有遇到任何问题（这个插件已经使用了大约一年）。我们有一个新客户在 Windows 7 上安装它，我们看到了我们的第一个问题。这是错误：

```
There was an error during installation:
Downloading http://<path and filename>.vsto did not succeed

***************** Exception Text******************
System.Deployment.Application.DeploymentDownloadException: Downloading http://<path and filename>.vsto did not succeed
System.Net.WebException: The remote server returned an error: (407) Proxy Authentication Required. ---> System.ComponentModel.Win32Exception: The token supplied to the function is invalid
at System.Net.NTAuthentication.GetOutgoingBlob(Byte[] incomingBlob, Boolean throwOnError, SecurityStatus& statusCode)
at System.Net.NTAuthentication.GetOutgoingBlob(String incomingBlob)
at System.Net.NtlmClient.DoAuthenticate(String challenge, WebRequest webRequest, ICredentials credentials, Boolean preAuthenticate)
at System.Net.NtlmClient.Authenticate(String challenge, WebRequest webrequest, ICredentials credentials)
at System.Net.AuthenticationManager.Authenticate(String challenge, WebRequest request, ICredentials credentials)
at System.Net.AuthenticationState.AttemptAuthenticate(HttpWebRequest httpWebRequest, ICredentials authInfo)
at System.Net.HttpWebRequest.CheckResubmitForAuth()
at System.Net.HttpWebRequest.CheckSubmit(Exception& e)
--- End of inner exception stack trace ---
at Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInDeploymentManager.InstallAddIn() 
```

显然，我不能从我的位置复制。我的直觉告诉我这个客户的网络安全引起了问题（我的理解是他们有一系列防火墙等），但他们的 Windows XP 机器安装没有问题。

有人看到我缺少的东西吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T19:13:32.620

最后，答案并不难。发生的事情是，显然，用户位于阻止下载 VSTO 文件的代理服务器后面，因为它没有代理凭据。

因此，我不得不为这些用户破例，将所有文件以 zip 格式发送给他们，他们可以从中进行安装。

请注意，遇到此问题的用户必须在继续之前运行命令以清除 ClickOnce 应用程序缓存；看起来仅仅尝试安装它就会留下一些导致问题的残留物。如果您还不知道，您可以通过从命令提示符运行此命令（或创建包含以下内容的 .bat 文件）来清除应用缓存：

```
 rundll32 dfshim CleanOnlineAppCache 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:01:11.940

有一个[MS KB ( **KB917952**](http://support.microsoft.com/kb/917952) ) 可以更正使用**代理身份验证时**[的 ClickOnce 部署问题](http://support.microsoft.com/kb/917952)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-08T23:40:27.650

最终用户或 IT 可以修改 machine.config 以使用其 NTLM 登录启用代理身份验证。这将允许他们在需要身份验证的代理后面安装 ClickOnce 或 VSTO 应用程序。

**如何：**更改您的默认代理以始终使用您的默认凭据（NTLM 登录）。

1.  编辑 %windir%\Microsoft.NET\Framework\v4.0.30319\config\machine.config

2.  添加如下所示的 defaultProxy 元素。当一个已经存在时，记得添加到现有的 system.net 部分。

```
<configuration>
..

  <system.net>
    <defaultProxy enabled="true" useDefaultCredentials="true"/>
  </system.net>

...
</configuration> 
```

[元素（网络设置）](https://msdn.microsoft.com/en-us/library/kd3cf2ex.aspx)

> **useDefaultCredentials** 指定此主机的默认凭据是否用于访问 Web 代理。默认值为**false**。

# ruby-on-rails-3 - 在 Tomcat 中运行的我的 Jruby on Rails 应用程序中，使用 java servlet 存储不起作用

> ID：12216842
> 
> 赞同：4
> 
> 时间：2012-08-31T13:56:10.510
> 
> 标签：ruby-on-rails-3, cookies, jrubyonrails

在 Tomcat 中运行时，我尝试使用 java servlet 存储而不是 :cookie_store。我的应用程序使用 :cookie_store 运行良好，但是当使用 :java_servlet_store 时，不再存储任何内容......

这似乎可行，但是，当我在 servlet_request.session 中存储一些东西时，稍后，我似乎无法再次获得该值......它似乎消失了......

在我的 session_store.rb 中：

```
require 'action_controller/session/java_servlet_store'
NameApplication::Application.config.session_store :java_servlet_store 
```

在我的 application_controller.rb 中：

```
servlet_request.session.putValue(PROXYBRIDGEKEY, proxy_bridge) 
```

似乎在工作

但后来我试图获得价值，但我得到了零……

```
servlet_request.session.getValue(PROXYBRIDGEKEY) 
```

有什么想法可能是这里的问题吗？

需要明确的是，将值放入会话中确实有效（经过测试）。使用新的 html 请求，获取值不再起作用。所以，我猜想获取cookie肯定有问题......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-26T18:21:16.873

如果这对您不起作用，还请确保将 java_servlet_store 键设置为“JSESSIONID”以使用标准 JVM 会话。

在 Ruby 中，您需要做的就是读取和写入会话（这将访问 JVM 会话对象）：

session.id
会话[:yoursessionvariable]

注意：如果您还没有初始化会话（分配会话变量值），会话将为零（使 session.id 未定义），直到您这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-12T18:47:33.303

您可以尝试的一件事是将您的商店定义为：

需要'action_controller/session/java_servlet_store'

NameApplication::Application.config.session_store :java_servlet_store, :key => "MyKey"

我不确定它是否相关，但对于 :cookie_store 是必要的。您还需要在 java_servlet_store 中标识您的 servlet 密钥是有道理的。该密钥将是发送给浏览器以供后续请求的 cookie 的密钥。

希望这可以帮助。

# java - EntityManager 没有名为 testPU 的持久性提供程序

> ID：12216843
> 
> 赞同：1
> 
> 时间：2012-08-31T13:56:11.520
> 
> 标签：java, hibernate, jpa, junit, entitymanager

我正在使用 Guice 作为 DI 框架在 JBoss 7.1.0 上开发一个小型应用程序，并且我正在使用 maven 构建它。我所有的 DAO 都将 EntityManager 作为构造函数注入注入：

```
public class MyDao{
...
@Inject
public MyDao(EntityManager em){}
...
} 
```

为了测试这些类，我需要在我的测试中创建一个 EntityManager。

为了创建 EntityManager，我将 persistence.xml 添加到 src/test/resources/META-INF/persistence.xml

我的 persistence.xml 看起来像这样：

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
    <persistence xmlns="http://java.sun.com/xml/ns/persistence"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="testPU" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>com.foo.Foo</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <properties>
            <property name="hibernate.connection.url" value="jdbc:hsqldb:mem:unit-testing-jpa" />
            <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect" />
            <property name="hibernate.hbm2ddl.auto" value="create-drop" />
            <property name="hibernate.connection.username" value="sa" />
            <property name="hibernate.connection.password" value="" />
        </properties>
    </persistence-unit>
</persistence> 
```

在我的测试设置方法中，我执行以下操作：

```
private EntityManager em;

@Before
public void setup() {
    em = Persistence.createEntityManagerFactory("testPU")
            .createEntityManager();
} 
```

但我总是收到错误“没有名为 testPU 的 EntityManager 的持久性提供程序”。（在eclipse中运行测试并使用maven）

我无法弄清楚我做错了什么。你能帮我么？

提前谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T18:45:56.713

添加`hibernate-entitymanager`具有范围的依赖项`provided`或`test`（我需要有关项目的更多信息来确定范围）

```
 <dependency>
     <groupId>org.hibernate</groupId>
     <artifactId>hibernate-entitymanager</artifactId>
     <version>...</version>
     <scope>provided</scope>
  </dependency> 
```

PS。它仅适用于 JBoss。例如，对于 WebLogic 范围应该是`compile`

# mongodb - MongoDB 2.2 聚合框架按字段名分组

> ID：12216848
> 
> 赞同：2
> 
> 时间：2012-08-31T13:56:14.800
> 
> 标签：mongodb

是否可以按字段名称分组？还是我需要一个不同的结构，以便我可以按值分组？

我知道我们可以在值上使用 group by 并且我们可以展开数组，但是是否可以在这里的三个房子中获得 John 拥有的苹果、梨和橙子的总数，*而无需*明确指定“apples”、“pears”和“oranges”为查询的一部分？（所以不喜欢这样）；

```
// total all the fruit John has at each house
db.houses.aggregate([
    {
        $group: {
            _id: null,

            "apples":  { $sum: "$people.John.items.apples" },
            "pears":   { $sum: "$people.John.items.pears" }, 
            "oranges": { $sum: "$people.John.items.oranges" }, 
        }
    },
]) 
```

换句话说，我可以按“项目”下的第一个字段名称进行分组，得到苹果：104、梨：202 和橙子：306 的总和，还有香蕉、甜瓜和其他可能存在的东西？或者我是否需要将数据重组为一个键/值对数组，如类别？

```
db.createCollection("houses");
db.houses.remove();
db.houses.insert(
[
    {
        House: "birmingham",
        categories : [
            {
                k : "location",
                v : { d : "central" }
            }
        ],
        people: {
            John: {
                items: {
                    apples: 2,
                    pears: 1,
                    oranges: 3,
                }
            },
            Dave: {
                items: {
                    apples: 30,
                    pears: 20,
                    oranges: 10,
                },
            },
        },
    },
    {
        House: "London", categories: [{ k: "location", v: { d: "central" } }, { k: "type", v: { d: "rented" } }],
        people: {
            John: { items: { apples: 2, pears: 1, oranges: 3, } },
            Dave: { items: { apples: 30, pears: 20, oranges: 10, }, },
        },
    },
    {
        House: "Cambridge", categories: [{ k: "type", v: { d: "rented" } }],
        people: {
            John: { items: { apples: 100, pears: 200, oranges: 300, } },
            Dave: { items: { apples: 0.3, pears: 0.2, oranges: 0.1, }, },
        },
    },
]
); 
```

其次，更重要的是，我是否也可以按 "house.categories.k" 分组？换句话说，是否有可能找出“租用”与“拥有”或“朋友”房屋中有多少“苹果”“约翰”（因此按“categories.k.type”分组）？

最后 - 如果这是可能的，这是否明智？起初我认为使用对象的实际字段名称创建嵌套对象的字典非常有用，因为它似乎是文档数据库的逻辑使用，并且它似乎使 MR 查询更容易编写 vs 数组，但现在我'我开始怀疑这是否都是一个坏主意，并且具有可变字段名称会使编写聚合查询变得非常棘手/效率低下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-02T21:31:33.243

好的，所以我想我已经部​​分解决了。至少对于最初问题中的数据形状。

```
// How many of each type of fruit does John have at each location
db.houses.aggregate([
    {
        $unwind: "$categories"
    },
    {
        $match: { "categories.k": "location" }
    },
    {
        $group: {
            _id: "$categories.v.d",
            "numberOf": { $sum: 1 },
            "Total Apples": { $sum: "$people.John.items.apples" },
            "Total  Pears": { $sum: "$people.John.items.pears" },
        }
    },
]) 
```

产生；

```
{
        "result" : [
                {
                        "_id" : "central",
                        "numberOf" : 2,
                        "Total Apples" : 4,
                        "Total  Pears" : 2
                }
        ],
        "ok" : 1
} 
```

请注意，只有“中央”，但如果我的数据库中有其他“位置”，我会得到每个位置的总计范围。如果我为“类别”命名属性而不是数组，则不需要 $unwind 步骤，但这是我发现结构与自身不一致的地方。“类别”下可能有几个关键字。样本数据显示了“类型”和“位置”，但其中可能有大约 10 个这些分类，它们都具有不同的值。因此，如果我使用命名字段；

```
"categories": {
  location: "london",
  type: "owned",
} 
```

...然后我遇到的问题是索引。我不能简单地索引“位置”，因为这些是用户定义的类别，如果 10,000 个用户选择 10,000 种不同的房屋分类方式，我需要 10,000 个索引，每个字段一个。但是通过使它成为一个数组，我只需要一个数组字段本身。缺点是 $unwind 步骤。我之前用 MapReduce 遇到过这个问题。如果可以的话，您最不想做的是 JavaScript 中的 ForEach 循环来循环数组。您真正想要的是按名称过滤掉字段，因为它更快。

现在这一切都很好，我已经知道我在寻找什么水果，但如果我不知道，那就更难了。我不能（据我所见）在这里 $unwind 或 ForEach "people.John.items" 。如果可以，我会非常高兴。因此，由于水果的名称再次是用户定义的，看起来我也需要将它们转换为数组，就像这样；

```
{
    "people" : {
        "John" : {
            "items" : [
                { k:"apples", v:100 },
                { k:"pears", v:200 },
                { k:"oranges", v:300 },
            ]
        },
    }
} 
```

因此，现在我可以再次按位置汇总水果（我不知道要寻找哪种水果）；

```
db.houses.aggregate([
    {
        $unwind: "$categories"
    },
    {
        $match: { "categories.k": "location" }
    },
    {
        $unwind: "$people.John.items" 
    },
    {
        $group: { // compound key - thanks to Jenna
            _id: { fruit:"$people.John.items.k", location:"$categories.v.v" },
            "numberOf": { $sum: 1 },
            "Total Fruit": { $sum: "$people.John.items.v" },
        }
    },
]) 
```

所以现在我正在做两个 $unwinds。如果您认为这看起来非常低效，那您是对的。如果我只有 10,000 条房屋记录，每条记录有 10 个类别和 10 种水果，则此查询需要半分钟才能运行。好的，所以我可以看到在 $unwind 之前移动 $match 可以显着改善事情，但这是错误的输出。我不希望*每个*类别都有一个条目，我只想过滤掉“位置”类别。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T18:14:07.050

我会发表此评论，但在响应文本框中格式化更容易。

```
{ _id: 1,
  house: "New York",
  people: {
      John: {
          items: {apples: 1, oranges:2}
      }
      Dave: {
          items: {apples: 2, oranges: 1}
      }
  }
}

{ _id: 2,
      house: "London",
      people: {
          John: {
              items: {apples: 3, oranges:2}
          }
          Dave: {
              items: {apples: 1, oranges:3}
          }
      }
} 
```

只是为了确保我理解你的问题，这是你想要完成的吗？

```
{location: "New York", johnFruit:3}
{location: "London", johnFruit: 5} 
```

由于类别没有嵌套在 house 下，因此您不能按“house.categories.k”分组，但您可以使用 $group 的 _id 的复合键来获得此结果：

```
{ $group: _id: {house: "$House", category: "$categories.k"} 
```

尽管“k”不包含您可能试图分组的信息。而对于“categories.k.type”，type是k的值，所以不能使用这个语法。您必须按“categories.vd”进行分组。

您当前的模式可能会使用 $unwind、$project、可能的 $match 和最后的 $group 来完成此聚合，但命令不会很漂亮。如果可能的话，我强烈建议重组您的数据以使这种聚合更简单。如果您需要有关架构的帮助，请告诉我们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-04T17:34:12.830

我不确定这是否是一个可能的解决方案，但是如果您通过使用 distinct() 确定不同位置的数量来开始聚合过程，并为每个位置运行单独的聚合命令，该怎么办？distinct() 可能效率不高，但每个后续聚合都可以使用 $match，因此可以使用类别索引。您可以使用相同的逻辑来计算“categories.type”的水果。

```
{
    "_id" : 1,
    "house" : "New York",
    "people" : {
        "John" : [{"k" : "apples","v" : 1},{"k" : "oranges","v" : 2}],
        "Dave" : [{"k" : "apples","v" : 2},{"k" : "oranges","v" : 1}]
    },
    "categories" : [{"location" : "central"},{"type" : "rented"}]
}
{
    "_id" : 2,
    "house" : "London",
    "people" : {
        "John" : [{"k" : "apples","v" : 3},{"k" : "oranges","v" : 2}],
        "Dave" : [{"k" : "apples","v" : 3},{"k" : "oranges","v" : 1}]
    },
    "categories" : [{"location" : "suburb"},{"type" : "rented"}]
}
{
    "_id" : 3,
    "house" : "London",
    "people" : {
        "John" : [{"k" : "apples","v" : 0},{"k" : "oranges","v" : 1}],
        "Dave" : [{"k" : "apples","v" : 2},{"k" : "oranges","v" : 4}]
    },
    "categories" : [{"location" : "central"},{"type" : "rented"}]
} 
```

运行 distinct() 并通过对“categories.location”的每个唯一值运行 aggregate() 命令来遍历结果：

```
db.agg.distinct("categories.location")
[ "central", "suburb" ]

db.agg.aggregate(
    {$match: {categories: {location:"central"}}}, //the index entry is on the entire 
    {$unwind: "$people.John"},                    //document {location:"central"}, so 
    {$group:{                                     //use this syntax to use the index
         _id:"$people.John.k", 
         "numberOf": { $sum: 1 },
         "Total Fruit": { $sum: "$people.John.v"}
        }
     }
 )

{
    "result" : [
        {
            "_id" : "oranges",
            "numberOf" : 2,
            "Total Fruit" : 3
        },
        {
            "_id" : "apples",
            "numberOf" : 2,
            "Total Fruit" : 1
        }
    ],
    "ok" : 1
} 
```

# java - 多核/多处理器系统上 Thread.currentThread() 的语义？

> ID：12216853
> 
> 赞同：3
> 
> 时间：2012-08-31T13:56:23.803
> 
> 标签：java, multithreading, multicore

如果在多核或多处理器机器上运行 jvm 有可能绝对同时运行多个线程（不仅仅是同时运行），那么 api 方法会`java.lang.Thread.currentThread()`返回什么？......在上述情况下，它是否只是返回随机当前线程之一？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T13:58:21.390

它返回您当前正在其中运行的线程。如果你有两个核心和两个线程`A`并且`B`完全并发运行，同时调用这个方法，它会`A`适当地返回`B`。

您的理解是正确的 - 此方法返回的线程始终在运行 - 因为它必须从某个线程调用并且为了返回，它必须正在运行。不要从“*所有当前正在运行的、非暂停的、非阻塞的线程*”的角度来考虑这种方法。相反，它的意思是：“*给我一个运行我的线程的参考*”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T13:57:45.907

这很有意义。它返回对正在执行调用代码的线程的引用。

因此，假设您有两个线程，`threadA`并且`threadB`. 如果代码在`threadA`调用中运行`currentThread()`，`threadA`则将被返回。同样，如果代码在`threadB`调用中运行`currentThread()`，则`threadB`返回。

在我看来，[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html#currentThread%28%29)非常薄弱。它指出：

> 返回对当前正在执行的线程对象的引用。

“当前”在这里的使用很差。当前通常被解释为“此时此刻”。这让你感到困惑。

颇具讽刺意味的是，[MSDN](http://msdn.microsoft.com/en-us/library/aa989170.aspx) (!) 文档对此进行了更好的尝试：

> 获取`Thread`正在调用当前代码块的对象。

但他们还是落入了使用“电流”的陷阱。哦，编写技术文档的陷阱！

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T14:00:46.820

`jvm has the potential to run more than one thread absolutely simultaneously`

是的，它是真实的。在多核/多处理器系统中，可能有多个当前正在运行的线程。JVM 中运行着一些后台线程，您在每个系统上都拥有这些线程，甚至在`single processor`系统中也是如此。

该方法的目的`java.lang.Thread.currentThread()` 是返回正在运行调用该方法的当前代码的 Thread 对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T13:58:15.810

`java.lang.Thread.currentThread()`返回执行包含您的代码的方法的线程。

这并不意味着没有其他线程同时运行。

如果您想查看差异，您可以使用这段代码迭代所有当前正在运行的线程：

```
for (Thread t : Thread.getAllStackTraces().keySet()) {
    if (t.getState()==Thread.State.RUNNABLE) {
          // see !
    }
} 
```

 （或简单地[计算它们](https://stackoverflow.com/questions/11536938/how-to-check-the-number-of-currently-running-threads-in-java/11537026#11537026)）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T13:58:27.163

它返回对当前正在执行的线程对象的引用。

请参阅：[http ://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html](http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T13:59:46.840

> 仅返回一个线程的 api 方法 java.lang.Thread.currentThread() 是否不再有意义

*仅*当您有多个线程时才有意义。它返回当前运行代码的线程。你无法通过任何其他方式获得的东西。

# xslt - 使用 XSLT 将非编号列表转换为编号列表

> ID：12216854
> 
> 赞同：3
> 
> 时间：2012-08-31T13:56:28.200
> 
> 标签：xslt

我正在努力转变

```
<Address>
    <Line>Some street1</Line>
    <Line>Some street2</Line>
    <Line>Some street3</Line>
    ...
</Address> 
```

进入

```
<Address1>Some street1</Address1>
<Address2>Some street2</Address2>
<Address3>Some street3</Address3>
<Address4></Address4>
<Address5></Address5> 
```

第一个 xml 具有延展性，并且可以在必要时重新定义，但是第二个 xml 是我无法更改的遗留系统的一部分。我正确地找到的大部分内容都指向我使用属性，但不幸的是，它是我希望编辑的元素本身。

任何人都可以提供帮助，或者如果没有，请指出我正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:21:05.173

**就这么简单，可能是最短的解决方案**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="Line">
     <xsl:element name="Address{position()}"><xsl:apply-templates/></xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<Address>
    <Line>Some street1</Line>
    <Line>Some street2</Line>
    <Line>Some street3</Line>
</Address> 
```

**产生了想要的正确结果：**

```
<Address1>Some street1</Address1>
<Address2>Some street2</Address2>
<Address3>Some street3</Address3> 
```

**说明**：

正确使用**[`xsl:element`](http://www.w3.org/TR/1999/REC-xslt-19991116#section-Creating-Elements-with-xsl%3aelement)**和 AVT（**[属性值模板](http://www.w3.org/TR/1999/REC-xslt-19991116#attribute-value-templates)**）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:07:32.223

看看`<xsl:element>`元素。在其`name`属性中，您还可以提供在运行 XSLT 时计算的表达式：

```
<xsl:template match="Line">
    <xsl:element name="{concat('Address', position())}"><xsl:value-of select="text()"/></xsl:element>
</xsl:template> 
```

**更新：** `position()`是基于一的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T14:07:36.247

可以通过使用当前的修改新元素来完成`position()`：

```
<xsl:template match="/Address">
    <Addresses>
        <xsl:for-each select="Line">
            <xsl:variable name="elename" select="concat('Address', string(position()))"></xsl:variable>
            <xsl:element name="{$elename}">
                <xsl:value-of select="text()"/>
            </xsl:element>
        </xsl:for-each >
    </Addresses>
</xsl:template> 
```

# extjs - Extjs item.el 未定义！如何确保我的组件已经渲染，以便其他人可以调用它的元素？

> ID：12216855
> 
> 赞同：2
> 
> 时间：2012-08-31T13:56:31.333
> 
> 标签：extjs, extjs4

我有一个组件，它从 Ext.button.Button 扩展而来，还有另一个组件 wrappanel，它负责布置自定义按钮组件。

我的问题是，wrappanel 组件计算传递给它的项目的宽度并且需要`item.el`可用。`item.el`在组件渲染之前不可用，但是渲染会延迟到所有组件都准备好之后。

如何确保我的子组件的 .el 可供父组件使用？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T22:06:42.560

计算子项的宽度是布局管理器的责任，而不是容器。但是，根据您的 Ext JS 版本，如果您对代码库不满意，编写自定义布局可能是一项艰巨的任务。

如果您使用的是 4.1.0 或更高版本，请查看[Ext.layout.Context](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.layout.Context)以获得布局过程的最终参考指南。4.1 版本标志着布局系统的巨大变化，以解决性能问题的报告，因此如果您使用的是 4.0.7 或更早版本，那里的信息将无法帮助您。

4.1 的布局*更难*让你理解（在我看来），所以我建议在尝试定制之前尝试哄骗现有的布局来满足你的要求。如果你是 4.0.7 或更早版本，它会更容易一些，所以你可能会有更多的灵活性。

# sql - 无法终止 SPID“正在进行的事务回滚”

> ID：12216866
> 
> 赞同：7
> 
> 时间：2012-08-31T13:56:51.603
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我的数据库中有一个处于永久回滚模式的未提交语句。当我尝试终止与此语句关联的 SPID 时，我收到以下错误：

> 事务回滚正在进行中。预计回滚完成：0%。预计剩余时间：0 秒。

这个未提交的语句导致用户无法查看数据库的表、视图和过程树。如何停止此 SPID？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:10:11.800

我找到了这个线程，看来，如果它启动了，你就不能用命令杀死它。仅当您使数据库脱机时。

[MSDN 论坛链接](http://social.msdn.microsoft.com/Forums/en/transactsql/thread/4a15077f-415a-4ccf-8d05-fe5e4d4f45f9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:45:54.943

未提交的事务是数据库备份。有一个已知的错误（与 MS 修补程序一起），备份有时会挂起。重启集群解决了这个问题

# iphone - 使用 API O MAT 保存数据模型

> ID：12216867
> 
> 赞同：1
> 
> 时间：2012-08-31T13:56:55.047
> 
> 标签：iphone, mobile, backend, apiomat

我正在使用[https://www.apiomat.org](https://www.apiomat.org)的后端服务构建我的应用程序，下载了 SDK 并保存了一些模型。一切都很好，但我不明白为什么在保存模型后 SDK 会加载。这打开了另一个连接，我认为这是不必要的。有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:07:38.230

除了客户端发送的这些值之外，服务器还会计算一些值。例如，创建时间戳、创建者和引用对象的链接。

第一次保存后，apiomat SDK 使用返回的链接并再次从服务器加载完整的对象以获取这些值。如果没有 load 方法，您将无法访问例如您的引用对象。

# asp.net - HTTP 会话超时后保留状态

> ID：12216868
> 
> 赞同：1
> 
> 时间：2012-08-31T13:56:59.027
> 
> 标签：asp.net, asp.net-mvc, session-state

在我的 asp.net 应用程序中，`HTTP`会话在用户被重定向到登录页面的 30 分钟后超时。这是一个场景：

1.  用户单击要编辑的项目，其 URL 如下所示：

    `http://localhost/app/edit?id=1`

2.  用户在页面上进行某些更改以编辑 id=1 的项目，但不会“保存”它们 30 分钟。

3.  在第 31 分钟，他点击保存，然后他被重定向到登录页面，如果他输入正确的凭据，我有一个返回 URL 可以重定向到该页面。

保留用户离开页面的状态的正确方法是什么？我所拥有的只是登录请求的返回 URL，它看起来像： `http://localhost/app/edit`.

单击保存会发出`POST`请求，但不会在查询字符串中传递任何内容。

我希望能够重定向到`http://localhost/app/edit?id=1`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:13:52.957

除非您专门构建了一种机制来在基于 ASP.NET 会话的状态机制*之外*保留状态，否则会话在超时时会丢失。从理论上讲，您可以构建一个状态系统，该系统在每个用户 ID 的基础上存储来自选定页面/输入的数据中间草稿，其中可以检索包含可能以这种方式“孤立”的数据的页面，但这也需要在那些被认为足够重要以保留更改否则由于超时而丢失的页面上，定期将数据后台保存回数据库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:13:41.693

当 POST 发生时，您拥有原始 URL，以及带有所有表单值的请求对象。

该请求将被拦截，并重定向到登录屏幕。此时，您需要保存原始 URL 和请求值，处理登录，然后使用原始值重定向到原始 URL。

您的 POST 请求是什么样的？是否有可以放入临时存储（会话等）的对象，或者您是否处理表单集合？

# c# - 使用添加/删除项目功能为两个列表框实现编辑器模板

> ID：12216876
> 
> 赞同：0
> 
> 时间：2012-08-31T13:57:21.917
> 
> 标签：c#, jquery, asp.net-mvc

我的应用程序中有很多页面，其中有两个带有添加/删除项目选项的列表框。如果 list1 是源，list2 是目标，我只需要 list2 中的项目（新添加/删除的项目）。所以想知道如何设计编辑器模板。以下是我最初的想法，任何人都可以看到问题（或）提供建议以使其变得更好。

1.  在包含所有 list2 id 的 viewmodel 中创建一个 int[] 属性。
2.  为该属性创建一个编辑器模板，并创建一个包含指定 id 项的列表框。由于 list1 源可以是任何东西，也可以通过 AJAX 等各种方法填充，因此最好在编辑器模板中仅包含 list2。
3.  在编辑器模板中编写一个 javascript 函数，将 newitem 添加到其中，如果删除，则将项目提供给源。为了在提交时提供修改，add 函数在 DOM 中创建隐藏字段，并在删除项目时删除它们。

注意：它们不是列表框，它们是 Telerik 网格控件，为简单起见，我提到了列表框，但我只需要 listbox2 的 id。所以，我认为列表框或网格视图没有区别。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:34:42.733

我有一个行为几乎相同的应用程序并选择了相同的技术。但是，我的 ViewModel 同时包含 List1 和 List2。

调用我的编辑器模板是这样完成的：

```
 <div id="SoftwarePanel" class="collapsiblePanel">
        <h2>Request Software</h2>
        @Html.EditorFor(m => m.Software)
    </div> 
```

在这种情况下，“软件”是“RequestableList”类的一个实例，其中包含“AvailableItems”和“RequestedItems”的属性。编辑器模板使两个列表彼此相邻，放置适当的按钮用于在列表框之间来回移动项目并连接 javascript。

```
<table>
    <tr>
        <td>
            <input type="text" id="avail@{@name}Filter" />
            <button type="button" id="avail@{@name}Clear" class="DualList_availClear dualListButton"">
                X</button><br />
            @Html.ListBoxFor(m => m.AvailableItems, new MultiSelectList((from i in Model.AvailableItems where !Model.RequestedItems.Contains(i.Key) select i), "Key", "Value"), new { @class = "dualList" })
            <br />
            <span id="avail@{@name}Counter" class="countLabel"></span>
            <select id="avail@{@name}Storage">
            </select>
        </td>
        <td>
            <button id="to2@{@name}" type="button" class="dualListButton">
                &gt;</button><br />
            <button id="allTo2@{@name}" type="button" class="dualListButton">
                &gt;&gt;</button><br />
            <button id="allTo1@{@name}" type="button" class="DualList_Allto1 dualListButton">
                &lt;&lt;</button><br />
            <button id="to1@{@name}" type="button" class="dualListButton">
                &lt;</button><br />
        </td>
        <td>
            <input type="text" id="@{@name}RequestedFilter" />
            <button type="button" id="@{@name}RequestedClear" class="DualList_requestClear dualListButton">
                X</button><br />
            @Html.ListBoxFor(m => m.RequestedItems, new MultiSelectList((from i in Model.RequestedItems select new { key = i, value = Model.AvailableItems[i] }).AsEnumerable(), "key", "value"), new { @class = "dualList" })
            <br />
            <span id="@{@name}RequestedCounter" class="countLabel"></span>
            <select id="@{@name}RequestedStorage">
            </select>
        </td>
    </tr>
</table> 
```

更新：我使用了 Justin Mead 开发的 DualListBox 插件。 [http://www.meadmiracle.com/dlb/DLBDocumentation.aspx](http://www.meadmiracle.com/dlb/DLBDocumentation.aspx)

```
<script type="text/javascript">
        $(function () {
            $.configureBoxes({
                box1View: '@ViewData.TemplateInfo.GetFullHtmlFieldId("AvailableItems")',
                box1Storage: 'avail@{@name}Storage',
                box1Filter: 'avail@{@name}Filter',
                box1Clear: 'avail@{@name}Clear',
                box1Counter: 'avail@{@name}Counter',
                box2View: '@ViewData.TemplateInfo.GetFullHtmlFieldId("RequestedItems")',
                box2Storage: '@{@name}RequestedStorage',
                box2Filter: '@{@name}RequestedFilter',
                box2Clear: '@{@name}RequestedClear',
                box2Counter: '@{@name}RequestedCounter',
                to1: 'to1@{@name}',
                to2: 'to2@{@name}',
                allTo1: 'allTo1@{@name}',
                allTo2: 'allTo2@{@name}',
                onItemsChanged: function () {
                    var opts = $('#@ViewData.TemplateInfo.GetFullHtmlFieldId("RequestedItems") option');
                    var optIds = $.map(opts, function(e) { return $(e).val(); });
                }
            });
        });
</script> 
```

# jenkins - 在 Jenkins 中暂停和重启项目

> ID：12216880
> 
> 赞同：0
> 
> 时间：2012-08-31T13:57:30.210
> 
> 标签：jenkins, build-process, build-automation, jenkins-plugins, buildforge

有没有办法可以在不同的构建步骤之间手动暂停 Jenkins 中正在运行的项目，然后稍后重新启动它？（我要问的功能类似于我们在 buildforge 中的功能。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:40:10.707

不。不是当前版本，Jenkins 1.479。

# google-chrome - 第一个动画的 chrome 19-21 中的 CSS 3 Card-Flip Animation 错误

> ID：12216885
> 
> 赞同：0
> 
> 时间：2012-08-31T13:58:02.847
> 
> 标签：google-chrome, css, css-transitions

我有一个非常奇怪的问题。我为我的作品集制作了一个 css 3 卡片翻转动画。在 Firefox 中一切正常，但在 chrome 中，由于某种原因，第一张卡片的动画方向错误。如您所见，左图显示错误的动画，拉伸错误，而右图则完美。所有卡片都是由脚本创建的，因此 html 标记或 css 不会有任何区别。

有任何想法吗？我可以提供什么样的信息来帮助解决这个问题？

干杯卢卡斯

![动画片](../Images/05b9e3af1d0176dc41979e2387b15aef.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T09:40:19.643

更新

```
.card flip
     {
      text-decoration: none;
      text-align: center;
       float: left;
       position: relative;
       display: block;
       z-index: 30;
   } 
```

删除它们`perspective`会`webkit-perspective`导致错误

# haskell - 模式匹配中的 Monoid mempty

> ID：12216886
> 
> 赞同：7
> 
> 时间：2012-08-31T13:58:04.877
> 
> 标签：haskell, pattern-matching, monoids

我尝试编写一个`maximum`类似于`Prelude`. 我的第一个天真的方法是这样的：
`maximum' :: (F.Foldable a, Ord b) => a b -> Maybe b`
`maximum' mempty = Nothing`
`maximum' xs = Just $ F.foldl1 max xs`

但是，当我测试它时，`Nothing`无论输入如何，它都会返回：
`> maximum' [1,2,3]`
`> Nothing`

现在我想知道是否可以获取 Monoid 类型实例的空值。我写的一个测试函数可以正常工作：
`getMempty :: (Monoid a) => a -> a`
`getMempty _ = mempty`

`> getMempty [1,2,3]`
`> []`

我已经看过这两个问题，但我不知道答案如何解决我的问题：
[Write a Maximum Monoid using Maybe in Haskell](https://stackoverflow.com/questions/5344164/write-a-maximum-monoid-using-maybe-in-haskell)
[Haskell Pattern Matching on the Empty Set](https://stackoverflow.com/questions/3327532/haskell-pattern-matching-on-the-empty-set)

我将如何重写`maximum'`函数以使其工作？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T14:17:20.033

正如 CA McCann 在他的评论中指出的那样，您不能对值进行模式匹配，只能对模式进行匹配。

这个方程`maximum' mempty = Nothing`实际上等价于方程`maximum' x = Nothing`。该参数被绑定到一个名称并被`Nothing`返回。

这是使您的代码工作的一种方法：

```
maximum' :: (F.Foldable a, Ord b, Eq (a b), Monoid (a b)) => a b -> Maybe b
maximum' xs
  | xs == mempty = Nothing
  | otherwise    = Just $ F.foldl1 max xs 
```

即您可以*将*值`xs`与`mempty`. 请注意，我们需要一个`Monoid`能够获取值的约束`mempty :: a b`和一个`Eq`能够进行比较的约束。

另一个更优雅的解决方案是使用折叠来区分空和非空情况：

```
maximum'' :: (F.Foldable a, Ord b) => a b -> Maybe b
maximum'' xs = F.foldl max' Nothing xs
  where max' Nothing x = Just x
        max' (Just y) x = Just $ max x y 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T14:23:30.147

有几种方法可以做到这一点（@opqdonut 演示的方法很好）。也可以在 周围制作一个“最大”幺半群`Maybe`，然后使用`foldMap`.

```
newtype Maximum a = Max { unMaximum :: Maybe a }

instance (Ord a) => Monoid (Maximum a) where
  mempty = Max Nothing
  mappend (Max Nothing) b = b
  mappend a (Max Nothing) = a
  mappend (Max (Just a)) (Max (Just b)) = Max . Just $ (max a b)

maximum' = unMaximum . F.foldMap (Max . Just) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T14:22:58.930

有很多方法，一种是（正如你提到的）创建一个`Monoid`. 但是，我们需要将它包装起来`Maybe`以区分我们没有值时的情况。实现可能如下所示：

```
import Data.Monoid (Monoid, mempty, mappend)
import qualified Data.Foldable as F

-- Either we have a maximum value, or Nothing, if the
-- set of values is empty.
newtype Maximum a = Maximum { getMaximum :: Maybe a }
    deriving (Eq, Ord, Read, Show)

instance Ord a => Monoid (Maximum a) where
    mempty                      = Maximum Nothing

    -- If one part is Nothing, just take the other one.
    -- If both have a value, take their maximum.
    (Maximum Nothing) `mappend` y    = y
    x `mappend` (Maximum Nothing)    = x
    (Maximum (Just x)) `mappend` (Maximum (Just y))
                                     = Maximum (Just $ x `max` y)

maximum' :: (F.Foldable t, Ord a) => t a -> Maximum a
maximum' = F.foldMap (Maximum . Just) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T17:22:46.850

正如许多人已经告诉你的那样，你不能对一个值进行模式匹配。

正如很少人告诉你的那样，模式匹配可以说是 Java 等语言中对象字段的 Haskell 等价物：它对紧密耦合代码的内部使用很有价值，但可能不是您希望向外部客户端代码公开的东西。基本上，如果您让一段代码知道您的类型的构造函数，那么您将永远无法在不更改另一段代码的情况下更改这些构造函数——即使您的类型的语义并没有真正改变。

这里最好的解决方案是真的只使用`Foldable.foldr`：

```
maximum' :: (F.Foldable a, Ord b) => a b -> Maybe b
maximum' = F.foldr step Nothing
    where step x Nothing = Just x
          step x (Just y) = Just (max x y) 
```

Note that `foldr` is a generalized *destructor* or *eliminator* for `Foldable` instances: its two arguments are "what to do with a non-empty `Foldable`" and "what to do with `mempty`. This is more abstract and reusable than pattern matching.

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-31T14:17:23.697

怎么样

```
maximum' :: (Monoid (t a), F.Foldable t, Ord a, Eq (t a)) => t a -> Maybe a
maximum' xs
   | xs == mempty = Nothing
   | otherwise    = Just $ F.foldl1 max xs 
```

你少了一个守卫。

在`getEmpty`功能上，您不需要它。只需使用`mempty`, 并允许推断其类型。

# plugins - Skillbuilders 在退出前使用 Skillbuilders 模式页面保存

> ID：12216889
> 
> 赞同：1
> 
> 时间：2012-08-31T13:58:20.423
> 
> 标签：plugins, oracle-apex

我在尝试了解如何将“退出前保存”插件与 Oracle ApEx v4.1.1 中的模态页面插件一起使用时遇到了麻烦。

我基本上想知道当用户对页面上的选择列表或文本区域字段进行更改时，如何将“X”关闭按钮附加到“退出前保存”插件（我也有与这些字段关联的类） ，在模态页面中使用？

以下是我试图链接在一起的两个插件的链接：

[http://apex.oracle.com/pls/apex/f?p=46685:MODAL_PAGE:0](http://apex.oracle.com/pls/apex/f?p=46685:MODAL_PAGE:0)

[http://apex.oracle.com/pls/apex/f?p=46685:SAVE_BEFORE_EXIT:0](http://apex.oracle.com/pls/apex/f?p=46685:SAVE_BEFORE_EXIT:0) :::::

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T13:36:28.867

**重要提示：**我使用可用的最新版本测试了这个插件：3.0.2。有变化检测例程`modificationDetected`，它在 3.0.0 中`changeDetected`！检查您使用的版本！

* * *

当我必须集成这些东西时，我想避免更改提供的代码，例如插件代码。如果您将来不记得并安装新版本，这样做会破坏您的东西（除非您实际上正在修复某些东西）。

在调用模态对话框的页面上创建一个动态操作，加载时触发：

```
var default_colorbox_close = $.colorbox.close;
$.colorbox.close = function(){
   iframejQ = $("iframe").get(0).contentWindow.apex.jQuery;
   iframeDoc = iframejQ($("iframe").get(0).contentWindow.document);

   apex.debug("Colorbox close attempt - check changes");
   var hasChange = iframeDoc.apex_save_before_exit("modificationDetected");
   apex.debug('Modal contains changes: '+hasChange);

   if(hasChange){
      $( "<div title='Unsaved changes!'>There are unsaved changes. Close the popup anyway?</div>" ).dialog({
         resizable: false,
         height:140,
         modal: true,
         stack: true,
         zIndex: 9999,
         buttons: {
            "Don't close": function() {
               $(this).dialog( "close" );               
            },
            "Close": function() {               
               iframeDoc.apex_save_before_exit("disableWarning")
               default_colorbox_close();
               $(this).dialog( "close" );
            }
         }
      });
   } else {
      apex.debug('Close modal with default colorbox close');
      default_colorbox_close();
   };
}; 
```

退出前保存插件通过使用浏览器`window.onbeforeunload`事件工作。它确实在弹出窗口关闭时触发（至少在 FF 中确实如此），但到那时为时已晚：弹出窗口消失了，标记也消失了。
我的第一个想法是通过将页面重定向到一个通用页面来简单地点击该 onbeforeunload 事件，该页面将保存 onload 代码以关闭弹出窗口。一旦尝试重定向，onbeforeunload 就会立即生效。不会有动态操作或插件更改。但是，哦，好吧，我决定不这样做。（但请注意：此代码段中的大部分代码也必须在这种情况下重用，保存更改检测和对话框）。
相反，我选择在发生关闭事件时检查 iframe 文档中的更改，并显示一个也可以修改的对话框，并清楚地表明您正在弹出窗口而不是“页面”上执行操作（这可能被解释为模态的父页面）。

所以需要的是捕捉模态弹出关闭事件。请注意，该插件基于 jQuery Colorbox 插件。Skillbuilder 模式不提供预关闭事件，并且不能不更改颜色框插件。
Colorbox 以“X”和 ESC 键的形式提供关闭选项。我想抓住两者（/全部）。
我没有选择取消绑定 X 上的点击并绑定新的点击。

*   我首先做的是保存默认的彩盒关闭事件，然后覆盖默认值。

    ```
     var default_colorbox_close = $.colorbox.close;
     $.colorbox.close = function(){ 
    ```

*   接下来：这段代码将获取模态页面的 jQuery 实例。然后我使用这个 jquery 实例获取页面的文档元素

    ```
     iframejQ = $("iframe").get(0).contentWindow.apex.jQuery;
     iframeDoc = iframejQ($("iframe").get(0).contentWindow.document); 
    ```

*   接下来是检查 iframe（模式弹出窗口）的更改

    ```
     var hasChange = iframeDoc.apex_save_before_exit("modificationDetected"); 
    ```

*   因此，如果页面发生更改，则必须显示警告。我通过使用 jQuery-UI 对话框来做到这一点。它将具有“未保存的更改！” 作为标题和 2 个按钮（“不要关闭”和“关闭”）。关闭时，退出前保存插件必须禁用其默认警告！如果没有，您仍然会收到 onbeforeunload 消息的提示！然后必须关闭颜色框（这将删除 iframe）。最后必须关闭对话框（提示）。

    ```
     if(hasChange){
         $( "<div title='Unsaved changes!'>There are unsaved changes. Close the popup anyway?</div>" ).dialog({
            resizable: false,
            height:140,
            modal: true,
            stack: true,
            zIndex: 9999,
            buttons: {
               "Don't close": function() {
                  $(this).dialog( "close" );               
               },
               "Close": function() {               
                  iframeDoc.apex_save_before_exit("disableWarning")
                  default_colorbox_close();
                  $(this).dialog( "close" );
               }
            }
         }); 
    ```

*   如果没有更改，则可以简单地关闭模式。

    ```
     } else {
         apex.debug('Close modal with default colorbox close');
         default_colorbox_close();
      }; 
    ```

希望其中一些坚持;）

**[http://apex.oracle.com/pls/apex/f?p=11128:1](http://apex.oracle.com/pls/apex/f?p=11128:1)上的示例**

* * *

**编辑：**
非常感谢 Dan McGhan 在 OTN 线程中的帮助 :)
[https://forums.oracle.com/forums/thread.jspa?threadID=2434115&tstart=0](https://forums.oracle.com/forums/thread.jspa?threadID=2434115&tstart=0)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-30T15:18:59.150

我想在答案中添加一些内容。我注意到更改的项目没有突出显示。所以我在关闭对话框之前将此行添加到“不要关闭”中。

```
iframeDoc.apex_save_before_exit('modifiedItems', {highlight:true}); 
```

它会突出显示应有的项目！

# android - Wonderground API。按键设置问题

> ID：12216895
> 
> 赞同：0
> 
> 时间：2012-08-31T13:58:28.507
> 
> 标签：android, weather

我正在使用 Wondergroud API 来获取我的 Android 应用程序的天气信息。

我在 Key Settings 中设置了开发者服务，但我不知道发布应用程序时会发生什么，因为限制设置为 10 个“每分钟调用次数”。

我的应用程序每分钟下载此信息 1 次，但如果我发布它们，我必须更改我的密钥设置吗？

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:09:11.083

每分钟一次？你所在的地方一定有一些瞬息万变的天气。

我不会发布包含您的开发人员密钥的应用程序。每天也有 500 次呼叫的速率限制，因此一个人使用您的应用程序将在 8 多小时内达到您的限制。

您可以获得wunderground api[的商业许可证，但您的每分钟 1 次呼叫费率将需要更昂贵的选项之一。](http://www.wunderground.com/weather/api/d/pricing.html)

# python - Django 中 urls.py 中的语法错误

> ID：12216902
> 
> 赞同：0
> 
> 时间：2012-08-31T13:58:53.857
> 
> 标签：python

我正在尝试在我的 urls.py 中添加一些 url。

网址.py

```
urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'Permissions.views.home', name='home'),
    # url(r'^Permissions/', include('Permissions.foo.urls')),
     #url(r'^Permissions$', include('Permissions.Authenication.urls')),
     url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
     url(r'^admin/', include(admin.site.urls)),
     url(r'^$',RedirectView.as_view(url='/welcome/'),
)

urlpatterns += patterns('',
     url(r'^register/$', 'drinker.views.DrinkerRegistration',name='DrinkerRegistration'),
     url(r'^welcome/$','drinker.views.DrinkerWelcome',name='DrinkerWelcome'),
     url(r'^home/(?P<userpk>[^/]+)/$','drinker.views.DrinkerHome',  name='DrinkerHome'),     
) 
```

错误：

```
Traceback:
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  101\.                             request.path_info)
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/urlresolvers.py" in resolve
  298\.             for pattern in self.url_patterns:
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/urlresolvers.py" in url_patterns
  328\.         patterns = getattr(self.urlconf_module, "urlpatterns", self.urlconf_module)
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/core/urlresolvers.py" in urlconf_module
  323\.             self._urlconf_module = import_module(self.urlconf_name)
File "/Users/cnnlakshmen_2000/Projects/env/lib/python2.7/site-packages/django/utils/importlib.py" in import_module
  35\.     __import__(name)

Exception Type: SyntaxError at /
Exception Value: invalid syntax (urls.py, line 17) 
```

不知道错误在哪里......需要一些帮助......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T14:00:35.687

您缺少括号并有一个额外的逗号：

```
urlpatterns = patterns('',
    # Examples:
    # url(r'^$', 'Permissions.views.home', name='home'),
    # url(r'^Permissions/', include('Permissions.foo.urls')),
    # url(r'^Permissions$', include('Permissions.Authenication.urls')),

    url(r'^admin/doc/', include('django.contrib.admindocs.urls')),
    url(r'^admin/', include(admin.site.urls)),
    url(r'^$', RedirectView.as_view(url='/welcome/')) #Error was here
) 
```

你的后半部分还有一个逗号：

```
urlpatterns += patterns('',
    url(r'^register/$', 'drinker.views.DrinkerRegistration',name='DrinkerRegistration'),
    url(r'^welcome/$','drinker.views.DrinkerWelcome',name='DrinkerWelcome'),
    url(r'^home/(?P<userpk>[^/]+)/$','drinker.views.DrinkerHome', name='DrinkerHome') # Comma was here     
) 
```

# mono - Fedora mscorlib 上的 Mono 无法安装 gtk-sharp-2.12.11

> ID：12216905
> 
> 赞同：0
> 
> 时间：2012-08-31T13:59:07.307
> 
> 标签：mono, gtk, redhat

当我在我的机器上编译一个简单的 Web 应用程序时，它可以正常工作。但是，当我发布到服务器时，总是给我以下错误：无法从程序集'mscorlib，版本 = 4.0.0.0 加载类型'System.Collections.Generic.Dictionary'2'，

在我的本地计算机中，我有以下服务器上不存在的目录：/usr/lib/mono/4.0/

我尝试安装 gtk-sharp-2.12.11 但最后给出以下错误： Requested 'gtk + -2.0> = 2.12.0' but version of GTK + is 2.10.4

请帮助我谢谢保罗桑托斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T13:31:01.777

gtk# 绑定在其 2.12 版中仅依赖于 gtk+ 2.12 版。

如果你想使用那个版本，你需要升级你的 Fedora。

但是，考虑到 gtk 平台只对桌面开发有用，而不是 Web 开发，所以我认为你把事情搞混了。

尝试在 Fedora 中安装“dmcs”编译器。（您可能有一个非常旧的 Mono 版本，它不包含这个 4.0-profile 编译器，您安装了哪个版本的 Mono？）

# xamarin.ios - 单触。推送通知，aps 环境

> ID：12216906
> 
> 赞同：1
> 
> 时间：2012-08-31T13:59:07.607
> 
> 标签：xamarin.ios, push

我正在尝试在我的应用程序中实现推送通知，但它告诉我“没有为应用程序找到有效的 aps 环境权利”</p>

我正确设置了标识符，甚至在我的 Info.plist 中添加了一个“aps-environment”条目，但它仍然给了我这个错误消息。

捆绑标识符设置正确，我从供应门户安装了证书。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:07:01.583

在“正常”环境（macosx + xcode）中，我正在选择项目，并且在目标中我需要启用权利，如下所示： ![截屏](../Images/32c7a4d45e7684142b1a9d3c2ce8788b.png) 并且需要成为添加了我的设备 UDID 的配置文件

# java - Java中接口和类之间的契约

> ID：12216909
> 
> 赞同：3
> 
> 时间：2012-08-31T13:59:29.287
> 
> 标签：java, class, interface, contract

这在 Java 中究竟意味着什么？

> 接口定义了实现类的契约

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T14:00:09.180

这意味着通过实现接口，类同意实现接口指定的所有功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:19:00.547

In interface you simply declare the members(say methods). For example

```
public Interface Product{

protected void getProduct();
protected void getProductId();
} 
```

Whereas in a class you can implement the above interface and can define these methods...

```
public class ProductClass implements Product{

protected void getProduct()
{
    System.out.println("Product is: ");
}
protected void getProductId()
{
    System.out.println("Product Id is: ");
}
} 
```

So you can see the methods declared in interface are defined in the class. Basically, you can say that interface just provides the blueprint but class actually does the whole work.

# css - 调整窗口大小时，div 移动到另一个 div 下方

> ID：12216922
> 
> 赞同：2
> 
> 时间：2012-08-31T13:59:58.073
> 
> 标签：css, html, window-resize

当我调整浏览器窗口的大小时，我的导航栏 div 低于搜索框 div。如何停止导航栏移动并将其保持在同一位置？页脚的行为本身及其结构是否相同？

这是一个链接...

[http://www.signport.co.uk/test/asg_template3.html](http://www.signport.co.uk/test/asg_template3.html)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:05:13.453

发生这种情况是因为您的菜单没有指定宽度。而您的页脚行为是因为它具有指定的宽度（带有 id 的 div `footerleft`）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:15:27.027

替换你的 CSS

```
#mainmenu3 {
    height: 150px;
    line-height: 20px;
    list-style-type: none;
    overflow: hidden;
    width: 100%;
} 
```

你会得到想要的输出

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T14:07:34.173

我现在正在 Chrome 上进行测试，删除您在导航栏 div （wrapper_menu_full 类）上设置的 width:100% 似乎可以解决问题。这个 100% 是指它的大小与包含的 div (#mainmenu3) 相比。

如果这在 IE7 上仍然不起作用，请尝试将 #mainmenu3 中的两个 div 设置为 display:inline，尽管现在我正在 Chrome 上进行测试，但它似乎没有任何区别。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T14:08:18.463

您在两个 div（搜索过滤器和菜单）上都使用了浮动元素。当您使用浮动元素时，最后一个浮动元素的宽度超过了父元素的宽度，它会移动到下一行（belov）。

将其放入您的 css 以使其按您的意愿工作：

```
#mainmenu3{position:relative;}
#search4{position:absolute;top:0;left:0;}
.wrapper_menu{position:relative;top:0;left:310px;} 
```

# javascript - asp.net ajax 属性值时间戳未定义

> ID：12216925
> 
> 赞同：0
> 
> 时间：2012-08-31T14:00:08.053
> 
> 标签：javascript, asp.net, asp.net-ajax

我在 asp.net ajax 中的值分配和检索有问题。时间戳的值未定义

代码：

```
 /// <reference name="MicrosoftAjax.js"/>

 Type.registerNamespace("LabelTimeExtender1");

 LabelTimeExtender1.ClientBehavior1 = function(element) {
 LabelTimeExtender1.ClientBehavior1.initializeBase(this, [element]);
 this._testelement=this.get_element();
 this._timestamp= this.get_element().attributes['TimeStamp'].value;
 alert(_timestamp);

},

 LabelTimeExtender1.ClientBehavior1.prototype = {
initialize: function() {
    LabelTimeExtender1.ClientBehavior1.callBaseMethod(this, 'initialize');
    setInterval (this.timer,1000);
    alert("after");

},
dispose: function() {        
    //Add custom dispose actions here
    LabelTimeExtender1.ClientBehavior1.callBaseMethod(this, 'dispose');
},
timer: function(){

   alert(this.timestamp);
            var splitdate=this._timestamp.split(/[:]+/);
            alert(splitdate);
            var date= new Date(this._timestamp);
            alert( date.toString());
            var datenow= new Date ();
            alert(datenow.toString());
            this._element.innerText=" ";
            alert(this._element);
              if(date.getUTCFullYear<datenow.getUTCFullYear)
            {
            alert("year");
             var myelement= this.get_element();
             myelement .innerHTML= date.getUTCFullYear.toString();
            }
            if(date.getUTCMonth<datenow.getUTCMonth)
            {
            alert("month");
            this.get_element().innerHTML=date.getUTCMonth.toString();
            }
            if(date.getUTCDay<datenow.getUTCDay)
            {
            this.get_element().innerHTML=date.getUTCDay.toString();
            }
            if(date.getUTCHours <datenow.getUTCHours )
            {
             this.get_element().innerHTML=date.getUTCHours .toString();
            }
            if(date.getUTCMinutes<datenow.getUTCMinutes)
            {
            this.get_element().innerHTML=date.getUTCMinutes.toString();
            }

},
   set_timestamp: function(value)
  {
  this._timestamp=value;
  },

    get_timestamp: function()
   {
   return this._timestamp;
   }

}
 LabelTimeExtender1.ClientBehavior1.registerClass('LabelTimeExtender1.ClientBehavior1',  Sys.UI.Behavior);

if (typeof(Sys) !== 'undefined') Sys.Application.notifyScriptLoaded(); 
```

为什么`_timestamp`未定义的值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:21:42.177

我建议将设置`this._timestamp`到您的`initialize`函数中的代码移动。

我的另一个建议是即使在您自己的代码中也使用 getter 和 setter 以确保封装。因此，警报实际上是`alert(this.get_timestamp())`. 而且，在你的`initialize`函数中，你会调用`this.set_timestamp(this.get_element().attributes['TimeStamp'].value)`.

感谢评论，我看到问题实际上出在 setInterval 调用中。当您调用`window.setInterval(this.timer, 1000);`时，调用`timer`函数时`this`引用的是`window`，而不是您的对象。因此，请执行以下操作：

```
var self = this;
window.setInterval(function () { 
    self.timer(); 
}, 1000); 
```

这将使`this`inside of`timer()`引用正确的对象。

# c# - 背景上的 CubeMapTexture (Windows Phone)

> ID：12216927
> 
> 赞同：1
> 
> 时间：2012-08-31T14:00:11.190
> 
> 标签：c#, windows-phone-7, xna

Windows phone 不支持自定义效果。天空盒效果不起作用。

那么有没有办法在 3D 空间中使用立方体贴图（*.dds 文件）作为背景纹理？

# javascript - 如何在 node + express 中重新运行请求处理程序？

> ID：12216930
> 
> 赞同：1
> 
> 时间：2012-08-31T14:00:23.110
> 
> 标签：javascript, node.js, mongodb, express, node-mongodb-native

我正在运行节点 + express + mongojs。这是一个示例代码：

```
function mongoCallback(req, res) {
  "use strict";
  return function (err, o) {
    if (err) {
      res.send(500, err.message);
    } else if (!o) {
      res.send(404);
    } else {
      res.send(o);
    }
  };
}

var express, app, params, mongo, db;

express = require('express');
params = require('express-params');
app = express();
params.extend(app);

app.use("/", express.static('web'));

mongo = require('mongojs');

db = mongo.connect('mydb', ['inventory']);

app.get('/api/inventory', function (req, res) {
  db.inventory.find(mongoCallback(req, res));
});

app.listen(8000);
console.log('Listening on port 8000'); 
```

有时我忘记运行 mongod 并且尝试与数据库通信失败并出现“无法连接到 ...”错误。问题是启动 mongod 是不够的，已经存在的`db`对象似乎记得无法建立连接，因此服务器继续失败，即使 mongod 已经在运行。

所以，我想出了以下解决方案：

```
var express, app, params, mongo, db, api;

if (!String.prototype.startsWith) {
  String.prototype.startsWith = function (str) {
    "use strict";
    return this.lastIndexOf(str, 0) === 0;
  };
}

function setDB() {
  db = mongo.connect('IF', ['invoices', 'const', 'inventory']);
}

function mongoCallback(req, res, next, caller, secondTry) {
  return function (err, o) {
    if (err) {
      if (!secondTry && err.message && err.message.startsWith("failed to connect to")) {
        setDB();
        caller(req, res, next, true);
      } else {
        res.send(500, err.message);
      }
    } else if (!o) {
      res.send(404);
    } else {
      res.send(o);
    }
  };
}

express = require('express');
params = require('express-params');
app = express();
params.extend(app);

app.use("/", express["static"]('web'));

mongo = require('mongojs');

setDB();

api = {
  getInventory: function (req, res, next, secondTry) {
    db.inventory.find(mongoCallback(req, res, next, api.getInventory, secondTry));
  }
};

app.get('/api/inventory', api.getInventory);

app.listen(8000);
console.log('Listening on port 8000'); 
```

基本上，`db`如果请求因“连接失败”错误而失败，它会重新创建对象并重新运行请求。这仅适用于第一次失败。随后的失败将返回错误。

我根本不喜欢我的解决方案。一定有更好的方法。有什么建议么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:34:45.073

“已经存在的 db 对象似乎记得无法建立连接”是什么意思？您的意思是如果您在运行 mongod 之前启动 express 应用程序，数据库上的查询会失败？由于您在 express 应用程序启动时连接到数据库，因此您应该首先运行 mongod。

如果您担心在初始连接后数据库出现故障并导致您的 CRUD 操作失败，您可以检查操作中的错误

```
db.inventory.find(function(err, docs) {
    // check err to see if there was a connection issue
}); 
```

然后如果有错误重新连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:49:56.940

据我所知 mongodb 本机驱动程序允许设置`{ auto_reconnect:true }`，您是否尝试过设置？

如果数据库根本没有运行，我不确定这会如何表现，`mongoose.js`例如缓存所有请求，直到数据库准备好并在成功连接后发出它们。

# build - TFS2008是否可以按标签构建

> ID：12216941
> 
> 赞同：0
> 
> 时间：2012-08-31T14:00:49.507
> 
> 标签：build, tfs, label

我有一个问题，TFS2008 是否可以通过从特定标签中提取文件来创建构建？假设一个分支中有三个标签，我想只构建从 L2 到最新的修改文件，所以构建输出放置文件夹只包含在 L2 和最新标签之间修改的项目，这可能吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:06:38.100

不，我很确定你不能那样做。也许您可以构建一个自定义构建过程模板来完成它或其他什么。

# routing - 带有通配符的 Laravel 路由总是 404

> ID：12216942
> 
> 赞同：2
> 
> 时间：2012-08-31T14:00:51.613
> 
> 标签：routing, wildcard, laravel

我刚开始使用 Laravel，我非常喜欢路由的想法，但是我创建的任何带有通配符的路由都会退回到 Laravel 404 路由。

这是我的路线文件：

```
# This loads fine
Route::get('hello', function(){
   return 'Hello!';
});

# This gives me a 404
Route::get('hello/(:any)', function ($name) {
    return "Welcome, $name.";
});

Route::get( array('/'), function()
{
    return View::make('home.index');
});

Event::listen('404', function()
{
    return Response::error('404');
});

Event::listen('500', function()
{
    return Response::error('500');
}); 
```

我也试过`any`无济于事。

```
Route::any('hello/(:any)', function ($name) {
    return "Sup, $name?";
}); 
```

关于为什么我得到 404 的任何想法？

**编辑：** 我猜我的 PHP 配置有问题，并且没有正确处理类的别名或其他东西。大多数情况下，添加一个将别名映射到类的辅助类都可以。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T00:09:12.930

对于 Laravel 的任何其他新人，这就是您使用可选参数设置路由的方式。

```
Route::get('hello/(:any?)', function ($name = 'default') {
    return "Welcome, $name.";
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T20:19:11.170

您的 Apache 重写模块是否启用？
我已经在我的 Laravel 安装上尝试了你的第一条路线，它工作正常。

# c - GCC 4.7 字符串文字的源字符编码和执行字符编码？

> ID：12216946
> 
> 赞同：11
> 
> 时间：2012-08-31T14:01:09.167
> 
> 标签：c, linux, gcc, character-encoding, string-literals

Linux/x86_64 上的 GCC 4.7 是否具有默认字符编码，通过它可以验证和解码 C 源文件中字符串文字的内容？这是可配置的吗？

此外，当将字符串数据从字符串文字链接到输出的数据部分时，它是否具有默认的执行字符编码？这是可配置的吗？

在任何配置中，是否有可能具有与执行字符编码不同的源字符编码？（也就是说 gcc 会在字符编码之间进行转码吗？）

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-31T14:07:25.560

我不知道这些选项的实际效果如何（不使用它们 atm；我仍然更喜欢将字符串文字视为“仅 ASCII”，因为本地化字符串无论如何都来自外部文件，所以它主要是格式字符串或文件名之类的东西），但它们添加了选项，例如

```
-fexec-charset=charset
Set the execution character set, used for string and character constants. The default
is UTF-8\. charset can be any encoding supported by the system's iconv library routine. 

-fwide-exec-charset=charset
Set the wide execution character set, used for wide string and character constants.
The default is UTF-32 or UTF-16, whichever corresponds to the width of wchar_t. As
with -fexec-charset, charset can be any encoding supported by the system's iconv
library routine; however, you will have problems with encodings that do not fit
exactly in wchar_t.

-finput-charset=charset
Set the input character set, used for translation from the character set of the
input file to the source character set used by GCC. If the locale does not specify,
or GCC cannot get this information from the locale, the default is UTF-8\. This can
be overridden by either the locale or this command line option. Currently the command
line option takes precedence if there's a conflict. charset can be any encoding
supported by the system's iconv library routine. 
```

# mongoose - Mongoose 3.1.0：为什么从不调用 connection.db.dropDatabase(callback) 中的回调并且数据库没有被删除？

> ID：12216949
> 
> 赞同：5
> 
> 时间：2012-08-31T14:01:18.883
> 
> 标签：mongoose

代码：

```
var connection = mongoose.createConnection('mongodb://localhost:9000/' + databaseName);
connection.db.dropDatabase(function(err){
    // never reach this point!
    debugger;
    console.log(err);
    console.log('-------------->Dropped database: ' + databaseName);
}); 
```

如果我做 connection.open 它表示它已经打开，并且同一连接不支持多次调用“打开”。

即使这样也行不通

```
var conn = mongoose.createConnection('mongodb://localhost',databaseName, 9000, {}, function(){
    console.log('created'); // is reached
    conn.db.dropDatabase(callback); // but the callback is not called anyway
}); 
```

问题是什么？("mongoose": "3.1.0") 数据库甚至没有被删除...谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T13:03:22.303

```
 var connection = mongoose.createConnection('mongodb://localhost:9000/' + databaseName, function(err){
        connection.db.dropDatabase(function(err){
                         // now it works!
                    })
    }); 
```

问题是 dropDatabase 命令在连接打开时没有排队并且没有运行。因此，如果我在 createConnection 上使用了回调，那么它就可以工作并在此之后删除数据库，它就可以工作了！

# mercurial - 如何只推送/拉取对许多 mercurial 分支的更改？

> ID：12216950
> 
> 赞同：0
> 
> 时间：2012-08-31T14:01:24.577
> 
> 标签：mercurial

我有以下 mercurial 设置，带有 3 个或更多存储库（所有存储库都是远程的）

*   树干
*   branch_a - 从主干克隆
*   branch_a_me - 从 branch_a 克隆
*   本地 - 从 branch_a_me 克隆

在里面`branch_a_me`我提交并推送了几个变更集，但现在我必须确保它们将到达所有其他分支。

我不得不提一下，即使 local 也与 branch_a_me 同步，对所有其他存储库进行了更改，我必须确保只有我的更改集被推送/拉到其他存储库。

我怎样才能用 mercurial 实现这一点，最好是以以后容易复制该过程的方式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T09:25:57.523

回购中没有这样的命令。

它应该完成的方式是您将您的代码合并到必要的地方。所以基本上你要做的是，选择要合并的分支，以及要合并到的分支。单击合并，并解决所有冲突。

这可以通过一些批处理脚本自动执行，并通过将您的代码置于更改被合并到的分支上来告诉 repo 解决所有冲突。不是要走的路。

要走的路是将您的更改合并到 MASTER 分支，所有的都继承自。当人们尝试将他们的更改与 MASTER 合并时，他们将获得您的更改。

# c# - 如何根据文本或标签在 Microsoft CRM 2011 中设置 OptionSet 值？

> ID：12216953
> 
> 赞同：1
> 
> 时间：2012-08-31T14:01:38.960
> 
> 标签：c#, crm, microsoft-dynamics

我正在实施一个接收信息并需要将它们映射到 MS Dynamics CRM 的 Web 服务。

因此，在设置 OptionSet 值时，由于我不是实施 CRM 的人，所以我不知道设置了哪些索引。我只知道标签。使用我服务的人自然也是如此。例如，我将 Opportunity 称为 Warm 或 Cold，而不是 10033004 和 10033005。但我仍然需要在 Opportunity 实体上设置此值。

我找到[了这个链接](http://worldofdynamics.blogspot.ro/2011/05/microosft-dynamics-crm-2011-plugins-how.html)- 但我认为这真的有点矫枉过正，如果这是我可以访问 OptionSet 的唯一方法，那就太遗憾了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T10:44:29.153

这里有几个选项。

1.  使用元数据服务，例如您的链接，我同意这感觉有点矫枉过正，但您可以添加缓存以减少多个服务调用的开销。如果您真的不知道运行时的值是多少，那么这可能是最好的方法。
2.  只需对其进行硬编码，如果您在编译时知道值是什么，那么这可能是最快的选择。我以前做过，通常都很好。但是，如果有人更改 CRM，这显然会中断。
3.  使用强类型类，这实际上是硬编码，只是系统为您完成。但是，如果 CRM 发生变化，您将重新生成它们。

因此，恐怕这些都不是一个完美的选择，但它们都能完成工作。

* * *

编辑

回复：选项 3；我的意思是这里描述的早期绑定实体：http: [//msdn.microsoft.com/en-us/library/gg328210.aspx](http://msdn.microsoft.com/en-us/library/gg328210.aspx)。我不确定他们在这种情况下会有多大帮助。它们是强类型类，用于代替实体类。例如contact.firstname 而不是entity["firstname"]。我想您也许可以将它们用作元数据的一种形式-尽管我自己从未尝试过。它也有与选项 2 相同的问题，当 CRM 更改时，它们需要更新然后编译。

在这种情况下，我转向选项 1 并查询元数据服务，如果您这样做一次并在流程开始时缓存结果，您将始终拥有最新的信息。此示例说明如何获取系统[http://msdn.microsoft.com/en-us/library/jj603008](http://msdn.microsoft.com/en-us/library/jj603008)中的所有元数据。

# android - 安卓位置选择器

> ID：12216957
> 
> 赞同：2
> 
> 时间：2012-08-31T14:01:52.373
> 
> 标签：android, location

我希望用户让他们选择自定义位置、纬度和经度。它应该离线工作。

最好的用户友好（图片）方法是什么？

（我不想简单地给出一个文本框来提供纬度和经度。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:24:48.150

早在手机变得智能之前，我就这样做过一次……我采用了一个很好的尺寸和漂亮的[墨卡托投影](https://www.google.com/search?q=mercator%20projection)，使用一些基本的代数方程大致映射了坐标。例如。{127, 578} 处的像素 -> Lat/Lon... 然后只允许他们单击（在您的情况下点击）图像并在他们选择的像素上放置一个“图钉”，在两个文本框中显示 Lat/Lon ...

如果互联网可用，你可以得到一个相关的纬度/经度的一般“区域”（例如最近的城市/州）......

这个概念应该非常适合您...希望对您有所帮助-ck

# c# - 嵌套对象的模型绑定

> ID：12216963
> 
> 赞同：0
> 
> 时间：2012-08-31T14:02:13.823
> 
> 标签：c#, asp.net-mvc, linq, entity-framework, linq-to-entities

我有一堂课

```
 public class Offer
{
    public Int32 OfferId { get; set; }
    public string OfferTitle { get; set; }
    public string OfferDescription { get; set; }

} 
```

和另一个班级

```
 public class OfferLocationViewModel
{
    public Offer Offer { get; set; }
    public Int32 InTotalBranch { get; set; }
    public Int32 BusinessTotalLocation { get; set; }
} 
```

现在在我的控制器中，我有以下内容

```
 public ActionResult PresentOffers(Guid id)
    {
        DateTime todaysDate=Utility.getCurrentDateTime();

        var rOffers=(from k in dc.GetPresentOffers(id,todaysDate)
                     select new OfferLocationViewModel()
                     {
                        Offer.  //I dont get anything here..

                     }).ToList();

        return PartialView();
    } 
```

现在问题出在我的控制器中，我无法访问“Offer”类的任何属性！我想，因为我正在创建一个新的 OfferLocationViewModel() 并且它具有“Offer”类型的属性，所以我将能够访问这些属性..但我不能。

谁能给我一些关于如何做到这一点的想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:06:58.740

在像你这样的类初始化器中，`new OfferLocationViewModel { ... }`你只能设置直接属性，即'Offer = new Offer()'。

您无法通过初始化程序访问包含类型的属性。

尽管您可以使用给定的属性将视图模型初始化`Offer`为新的报价，如下所示：

```
var rOffers = (from k in dc.GetPresentOffers(id,todaysDate)
               select new OfferLocationViewModel {
                   Offer = new Offer {
                       OfferId = ...,
                       OfferTitle = ...,
                       OfferDescription = ...
                   }
               }).ToList(); 
```

# javascript - AJAX 成功回调 - 执行 javascript 的问题

> ID：12216968
> 
> 赞同：0
> 
> 时间：2012-08-31T14:02:38.023
> 
> 标签：javascript, ajax, google-app-engine

当使用 AJAX 在加载时触发 python 处理程序（在 GAE 中）时，它会正确加载 HTML 模板页面，但由于某种原因，它不会执行模板页面中的 Javascript。它也不会在成功回调函数中返回该 javascript。

这是 index.html 文件中在加载时触发处理程序的代码：

```
<div id="daily_emails"></div>

<script>
  $.ajax({
     url: "/gviz",
     cache: false,
     success: function(data){
       $("#daily_emails").html(data);
     }
  }); 
</script> 
```

gviz 处理程序生成一个 html 模板，其中包含一个自定义的 Google 图表工具表。它自己创建它没有任何问题，但是一旦我从另一个 html 文件（如上）调用它，它会剥离 javascript 内容并因此返回纯的、未更改的 html。由于 javascript 代码本身使用模板标签（用于 Google 图表工具中的数据），我不能只从上面的 index.html 文件中运行它。

如果有帮助，我可以发布 gviz 处理程序正在呈现的模板的完整代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:04:56.527

您需要确保在页面准备就绪时拨打电话

```
<script>
$(document).ready(function() {
  $.ajax({
     url: "/gviz",
     cache: false,
     success: function(data){
       $("#daily_emails").html(data);
     }
  });
}); 
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T18:26:38.177

您使用的是哪个浏览器？浏览器会解析返回的 HTML，并可能去除非法的 HTML。如果返回的 HTML 中有错误，则可能会发生这种情况。如果包含“/gviz”的结果会很有帮助。

由于听起来您返回的模板可能不包含纯有效的 HTML，因此您可能需要返回内容类型设置为 'text/plain' 的结果，这样浏览器就不会尝试解析它。

# svn - SVN 结帐和 Subclipse 都不起作用

> ID：12216970
> 
> 赞同：2
> 
> 时间：2012-08-31T14:02:48.113
> 
> 标签：svn, tortoisesvn, subclipse

我对 svn 的这个概念非常陌生，因此这对你来说可能是一个微不足道的问题。但是我真的需要帮助，因为即使在网上搜索了一个多小时后，我也无法找到出路。

我想得到[这个项目](http://code.google.com/p/android-launcher-plus/source/checkout)的源代码。

正如您在**[浏览](http://code.google.com/p/android-launcher-plus/source/browse/)**部分看到的，所有源代码都可用。

我安装了***tortoiseSVN***并通过右键单击文件夹来使用**SVN Checkout选项。**

但是我在 tortoiseSVN 中得到了这个错误：

```
Command: Checkout from http://android-launcher-plus.googlecode.com/svn/trunk/android-launcher-plus-read-only, revision HEAD, Fully recursive, Externals included  
Error: URL  
Error:  'http://android-launcher-plus.googlecode.com/svn/trunk/android-launcher-plus-read-only'  
Error:  doesn't exist  
Completed! 
```

我什至安装了[subclipse](http://subclipse.tigris.org/)并尝试通过签出***在 Eclipse 中导入项目，***但我得到了同样的错误。

有没有其他方法可以从我提到的网站获取代码？（问题是我需要为 andorid 制作一个启动器应用程序，如果我能以某种方式获得这些代码，那真的会非常有帮助）

提前致谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T14:06:48.450

存储库的 URL 是`http://android-launcher-plus.googlecode.com/svn/trunk/`

该`android-launcher-plus-read-only`位是您要放入的本地文件夹。您错过了它们之间的空间。

尝试使用网址`http://android-launcher-plus.googlecode.com/svn/trunk/`

编辑：使用上面的 URL，我成功地从 Mac OSX 终端的 SVN 存储库中结帐

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:07:05.290

网址很简单`http://android-launcher-plus.googlecode.com/svn/trunk/`，你读错了说明。

正如 Thomas（比我更有帮助）指出的那样，示例 checkout 命令行包含项目的名称，因此它将被检出到名为 的目录`android-launcher-plus-read-only`，而不是因为它是命令的组成部分。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T14:07:57.153

尝试签出

```
svn checkout http://android-launcher-plus.googlecode.com/svn/trunk/ Your_folder_path 
```

你应该完成了。

# sql - SQL：无法比较或排序 Grouptext、ntext 和 image 数据类型

> ID：12216971
> 
> 赞同：5
> 
> 时间：2012-08-31T14:02:51.223
> 
> 标签：sql, sql-server

下面是一个 sql 语句和我收到的错误。我想按`prodID`.

错误：

> text、ntext 和 image 数据类型不能进行比较或排序，除非使用 IS NULL 或 LIKE 运算符。

陈述：

```
 SELECT TOP 20 
         PRODID, ITEMDES
         FROM orderedItems oi
         left join orders o on  oi.order_id = o.order_id
    Group by PRODID, ITEMDES 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T14:22:28.093

不，他们不能。此外，不推荐使用它们以支持`(n)varchar(max)`类型。

如果您需要对它们进行分组，请将您的数据结构从`(n)text`to更改为`(n)varchar(max)`或在您的 group 子句中进行转换

```
 GROUP BY ProdID, CONVERT(nvarchar(max), ItemDes) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:24:22.753

如果 ITEMDES 是 TEXT 或 blob，则可以使用[ROW_NUMBER()](http://msdn.microsoft.com/en-us/library/ms186734.aspx)避免 GROUP BY ：

```
select TOP 20 * from 
(

SELECT 
         PRODID,ITEMDES,
         ROW_NUMBER() over (partition by PRODID order by o.order_id) rn
         FROM orderedItems oi
         left join orders o on  oi.order_id = o.order_id
) as t 
where rn=1
order by PRODID; -- any order here you wish 
```

# jquery - 循环 jCoverflip

> ID：12216980
> 
> 赞同：-1
> 
> 时间：2012-08-31T14:03:52.963
> 
> 标签：jquery, html, loops

我在使用[jCoverflip](http://mikedemar.com/stromasys/jcoverflip/)循环图像时遇到问题。如果有人对如何添加此功能有任何建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T17:02:27.967

@Mike 你可以使用 setInterval：http: [//jsfiddle.net/QmVFR/1](http://jsfiddle.net/QmVFR/1) – @Oriol

```
jQuery( document ).ready( function(){
    jQuery( '#flip' ).jcoverflip({
      current: 2,
      beforeCss: function( el, container, offset ){
        return [
          $.jcoverflip.animationElement( el, { left: ( container.width( )/2 - 210 - 110*offset -10*offset )+'px', bottom: '20px' }, { } ),
          $.jcoverflip.animationElement( el.find( 'img' ), { width: Math.max(20,100-20*offset*offset) + 'px' }, {} )
        ];
      },
      afterCss: function( el, container, offset ){
        return [
          $.jcoverflip.animationElement( el, { left: ( container.width( )/2 + 110 + 110*offset + 10*offset)+'px', bottom: '20px' }, { } ),
          $.jcoverflip.animationElement( el.find( 'img' ), { width: Math.max(20,100-20*offset*offset) + 'px' }, {} )
        ];
      },
      currentCss: function( el, container ){
        jQuery('#flip>li.selected').removeClass('selected');
        el.addClass('selected');
        return [
          $.jcoverflip.animationElement( el, { left: ( container.width( )/2 - 75 )+'px', bottom: 0 }, { } ),
          $.jcoverflip.animationElement( el.find( 'img' ), { width: '150px' }, { } )
        ];
      },
      change: function(event, ui){
        jQuery('#scrollbar').slider('value', ui.to*25);
      }
    });

    jQuery('#scrollbar').slider({
      value: 50,
      stop: function(event, ui) {
        if(event.originalEvent) {
          var newVal = Math.round(ui.value/25);
          jQuery( '#flip' ).jcoverflip( 'current', newVal );
          jQuery('#scrollbar').slider('value', newVal*25);
        }
      }
    });
});

var timer=setInterval(next,3000);

function next(){
    var $next=$('#flip>li.selected').next('li');
    if(!$next.length){$next=$('#flip>li:first-child');}
    $next.click();
} 
```

# html - 表单文本颜色

> ID：12216983
> 
> 赞同：0
> 
> 时间：2012-08-31T14:03:56.340
> 
> 标签：html, forms

在表单中，在输入“文本”中，如何在用户输入任何内容之前为文本值设置一种颜色，并为用户输入的文本设置另一种颜色？

（我不是说输入：焦点，这只是用户写的时候。我也在寻找不同的颜色，当他离开这个领域时）

我在这里有一个例子：http: [//jsfiddle.net/JQSZE/](http://jsfiddle.net/JQSZE/)

```
<form>
    <input type="text" value="nom" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:15:06.860

离开焦点后，使用 jQuery 更改元素的类。您可以通过在应用类等之前检查他们是否已输入内容来轻松添加一些复杂性级别。

给你，这是一个基本的例子：

[http://jsfiddle.net/erinfreeman/q348G/](http://jsfiddle.net/erinfreeman/q348G/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:29:13.580

使用 JavaScript 焦点和模糊事件。

```
jQuery(function(){
    jQuery("input").focus(function(){
         jQuery(this).css("color", "red");
    }).blur(function(){
         jQuery(this).css("color", "green");
    });
});​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T09:43:12.660

你也可以试试

```
$(document).ready(function(){
    $("input").focus(function(){       
        (this).css("color", "green");
}); 
```

});​</p>

或简单地尝试

```
$('input').css("color","green"); 
```

就是这样

# orm - 存储库模式、POCO、ORM 和中间实体

> ID：12216984
> 
> 赞同：4
> 
> 时间：2012-08-31T14:03:59.177
> 
> 标签：orm, domain-driven-design, repository-pattern, ddd-repositories

我试图弄清楚如何解决这个问题：

我有 3 个具有多对多关系的表。

```
Users *-* Roles *-* Permissions 
```

我使用 ORM 从他们那里获取数据。

我的业务层的一个方法必须返回每个权限的用户，所以我用这个类返回对象：

```
public class UsersPerPermission
{
    public User[] {get;set;}
    public Permission {get;set;}
} 
```

但是这个类没有映射到存储库中的任何表，它是我从现有表中生成的。这个班级应该住在哪里？

换句话说：

*   我应该有一个`IRepository.GetUsersPerPermission()`吗？然后该类应该存在于存储库中。

*   或者我应该有一个`IBusinessLayer.GetUsersPerPermission()`？然后我必须调用存储库中的 CRUD 方法？

只将它放在业务层是有意义的，因为存储库应该只将 CRUD 操作暴露给表......但是，为了从业务层执行此操作，我必须执行几个独立的查询来获取数据并创建“UserPerPermission”类。另一方面，如果我将它放在存储库中，我可以使用分组一次性获取该信息。

谢谢！

PS：这个中间对象叫什么名字？“转变”？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-02T08:28:29.540

在 DDD 中，大多数实体和值对象应该对应于作为[通用语言](http://martinfowler.com/bliki/UbiquitousLanguage.html)一部分的已识别领域概念。我通常会尽量限制多对多关系和人为关联对象。Eric Evans 在他的书中描述了一些允许这样做的技术。当我必须创建一个关联对象时，它必须有一个关于域的有意义的名称，基本上我从不命名它`Class1ToClass2`。在您的场景中，由于您的 object ，它更加人为：

*   对原始模型中已经存在（间接）的关联进行冗余建模。
*   有一个不反映任何特定业务概念的名称。

请注意，如果我们在表示层或应用程序层中，这种对象不会毫无用处，因为它可以派上用场，以便拥有一个包含屏幕上显示内容的结构 (DTO)。但是我这里说的是*领域*层，应该没有这样的复合对象。

所以我不会`UsersPerPermission`首先创建一个类。如果您想要的是用户列表并且 User 是聚合根，只需`GetUsersByPermission()`在`UserRepository`. 这并不意味着您不能在*应用程序*`GetUsersByPermission()`服务中拥有一个方法，如果它与您的应用程序的用例相匹配（显示一个权限的详细信息和具有该权限的用户列表的屏幕）。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-08T22:13:52.020

我同意 guillaume31 的观点，即无需引入域对象“UsersPerPermission”来支持单个用例。

有两种方法可以使用现有的域类“用户”、“角色”和“权限”来实现您的用例。

* * *

解决方案一：

假设您有：权限 --> 角色 --> 用户

箭头表示可导航性。权限与角色列表相关联，角色与用户列表相关联。

我会`GetPermittedUsers() : List<User>`在 Permission 类中添加一个方法，这很容易实现。

UI 逻辑将调用 PermissionRepository 的 GetPermissions()，然后在每个 Permission 上调用 GetPermittedUsers()。

我假设您使用像 hibernate(Nhibernate) 这样的 ORM 框架并正确定义了多对多关系。如果您从权限定义角色和用户的预加载，ORM 将生成一个查询，将权限、角色和用户表连接在一起并一次性加载所有内容。如果您为角色和用户定义延迟加载，您将在调用 PermissionRepository 时在一个查询中加载权限列表，然后在另一个查询中加载所有关联的角色和用户。一切都从数据库加载，最多三个查询。这被称为大多数 ORM 正确处理的 1+n 问题。

* * *

解决方案二：

假设您有：用户 --> 角色 --> 权限

箭头表示可导航性。用户有一个角色列表。一个角色有一个权限列表。

我将添加`getUsersByPermissions(List<long> permissionIds) : List<Users>`到 UserRepository，并添加`getPermissions() : List<Permission>`到 User 类。

UserRepository 的实现需要在一个查询中将 User、Role 和 Permission 表连接在一起，并一次性加载所有内容。同样，大多数 ORM 都会正确处理它。

一旦你有了一个用户列表，你就可以`Map<Permission, List<User>>`很容易地创建一个方法来构建一个用户。

* * *

老实说，我很喜欢解决方案之一。我避免编写一个复杂的方法来将用户列表转换为权限和用户的映射，因此我不需要担心将这个方法放在哪里。但是，如果您已经具有另一个方向的导航能力，则解决方案可能会在 User、Role 和 Permission 类之间创建循环关系。有些人不喜欢循环关系。如果您的用户案例需要，我认为循环关系有时是可以接受的，甚至是必要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-09T11:03:18.600

在类似的上下文中，我在域服务中使用了一个查询方法，该方法返回类似

```
IEnumerable<KeyValuePair<PermissionName, IEnumerable<Username>>> 
```

通过使用 KeyValuePair<>，我避免了用人为概念（如 UsersPerPermition）污染域模型。此外，这样的结构是不可变的。我没有在存储库上使用查询方法，因为在我的上下文中，没有实体与另一个实体耦合。因此，任何存储库都无关紧要。

但是，此解决方案对您的 GUI 有用，当且仅当您正确地建模了实体的标识符（在您的示例中，权限和用户都是实体）。实际上，如果它们是属于您的用户理解的通用语言的[共享标识符，那么它们就足够了，无需进一步描述。](http://epic.tesio.it/doc/manual/shared_identifiers.html "共享标识符建模模式")

否则，您只是在为您的 GUI 构建一个有用的 DTO。它不属于域，因此您应该使用最简单的可行方法（ADO.NET 查询？更简单的东西？）。实际上，在我自己的场景中，GUI 和域都使用了这样的服务（GUI 显示了详细说明的预览）。

一般来说，领域模型必须反映领域专家的语言，捕获与有界上下文相关的知识。其他一切都必须在域之外（但大部分时间可以用域的值对象来表示）。*

# c++ - VS2010代码分析奇怪的数组限制错误

> ID：12216985
> 
> 赞同：0
> 
> 时间：2012-08-31T14:03:58.853
> 
> 标签：c++, arrays, visual-studio-2010, code-analysis

我有一个这样定义的类：

```
#include <cassert>

class Vector
{
     double v[2];

     double operator()(int i) const
     {
         assert(i>=0 && i<2);
         return this->v[i];
     }
}; 
```

运行VS2010代码分析工具时，数组访问时抛出警告：

```
warning C6385: Invalid data: accessing 'this->v', the readable size is '16' bytes, but '-16' bytes might be read 
```

但这对我来说似乎完全有效，因为断言应该防止任何负值。怎么了？

* * *

编辑：似乎代码分析没有正确处理断言：

```
assert(i<2) 
```

生成

```
warning C6385: Invalid data: accessing 'this->v', the readable size is '16' bytes, but '24' bytes might be read 
```

尽管

```
assert(i>=0) 
```

生成

```
warning C6385: Invalid data: accessing 'this->v', the readable size is '16' bytes, but '-16' bytes might be read 
```

用 ifs 替换断言可以解决问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:13:32.610

分析器`assert`在查看`return this->v[i];`.

要修复它，请使用类型而不是断言来强制执行正索引：

```
class Vector { 
    double v[2];
public:
    double operator()(size_t i) const { 
        assert(i<2);
        return v[i];
    }
}; 
```

顺便说一句，使用`this->whatever`（除非真的有必要，这种情况*很少见*，而且只在模板中使用）会让你看起来毫无头绪。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-17T10:57:11.813

这是相当古老的一个，但我想在上面发布我的发现：

用 size_t 替换 int 可以修复它，因为 int 可以 < 0，因此您理所当然地得到了分析错误。

要修复它，请将其更改为 size_t 或 unsigned int。

静态分析不考虑断言，这就是 if 有效但 assert 无效的原因。如果你想抑制警告，你可以添加：

`_analysis_assume(i>0 && i < MY_MAX_VALUE)`

这将告诉分析器 i 期望哪些值。

# c# - 如何使用另一个表的值创建一个表而不导致 SQL 注入

> ID：12216988
> 
> 赞同：0
> 
> 时间：2012-08-31T14:04:17.710
> 
> 标签：c#, asp.net, sql, sql-server

![在此处输入图像描述](../Images/b929fbbb3da7b298e2697f7cc4123777.png)我在数据库中有一个表，其中包含列`Profile_Name`和`Profile_Tip`.

我的应用程序中有一个文本框，可以在其中输入表名的文本。我想用这个名字在数据库中创建一个表。我想使用`Profile_Name`值作为新创建的表的列名，而不会导致 SQL 注入。请帮忙。我是使用这些语言的新手。先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:08:35.857

[一种方法是从参数化查询](http://www.codinghorror.com/blog/2005/04/give-me-parameterized-sql-or-give-me-death.html)中获取您需要使用的数据`Profile_Name`并`Profile_Tip`在其中使用它们——这应该可以解决大多数可能的 SQL 注入情况。

但是，您描述的数据库/解决方案（根据用户输入创建表）听起来像是一个糟糕的设计。在不了解更多需求的情况下很难说，但是考虑一种无需根据用户输入生成表格的方法来实现它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:14:57.767

You can create dynamicaly

You can use execute with `EXEC sp_executesql`

Sample :

```
DECLARE @string NVARCHAR(100) 
SELECT @string = ".."
EXEC sp_executesql @string 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:13:51.893

使用 SqlParameter！例如，

```
SqlConnection connection;
        // initializes connection to your DB
        using (SqlCommand command = connection.CreateCommand())
        {
            command.CommandText = @"ALTER TABLE @TABLE_NAME ADD @COLUMN_NAME varchar(50)";
            command.CommandType = System.Data.CommandType.Text;
            command.Parameters.AddWithValue("@TABLE_NAME", tableName);
            command.Parameters.AddWithValue("@COLUMN_NAME", columnName);

            command.ExecuteNonQuery();
        } 
```

希望你明白了。

# c# - 通用文件属性，用于识别没有路径甚至名称的文件

> ID：12216990
> 
> 赞同：0
> 
> 时间：2012-08-31T14:04:20.203
> 
> 标签：c#, .net, windows, ntfs

我正在开发一个跟踪和使用存储在文件系统上的文件的应用程序。允许用户打开、创建、删除和移动文件系统中的文件。同时，我的应用程序并非一直在运行，因此我无法实时跟踪所有更改。之后我的应用程序必须找出哪个文件是谁（在我的应用程序中标识的 ic）。

用户最喜欢的解决方案是应用程序自己解决每一个变化。每个用户交互都不太受欢迎。

我的一个想法是使用文件的属性并为其分配一个键值，这样当它被识别一次时，以后总是可以识别它。但不知道有没有这样的属性。这篇文章没有给予太大希望：[在 Windows 文件系统中，每个文件都有一个预先计算的哈希值吗？](https://stackoverflow.com/questions/1490384/there-is-in-windows-file-systems-a-pre-computed-hash-for-each-file).

有人知道我是否可以使用这样的属性吗？以及如何在 C# 中使用它？

有没有人遇到这个问题？你是怎么解决的？

我想听听好的建议。

问候，雅普

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T21:17:50.683

如果您的文件不离开 NTFS，这很容易通过替代数据流实现，您可以在其中将数据与文件一起存储。这是关于 ADS 或多或少的好文章：http: [//www.flexhex.com/docs/articles/alternate-streams.phtml](http://www.flexhex.com/docs/articles/alternate-streams.phtml)

还有另一种合适的方法——效率很高，但使用起来也很复杂，它需要对 NTFS 内部有很好的了解——USN Change Journal；请参阅[http://msdn.microsoft.com/en-us/library/windows/desktop/aa363798.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa363798.aspx)。使用 USN 更改日志，您可以非常有效地“获取”在指定时间段内更改的所有文件（甚至所有更改事件）。

然而，如果您的文件离开 NTFS 领域，例如，如果它被复制到 FAT32，ADS 的内容就会丢失。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:12:16.887

依赖文件属性是“危险的”，因为某些用户可能会在您的程序未运行时更改该属性。这可能会让您相信某个文件已（或未）被程序跟踪，而实际上并没有。

我建议跟踪数据库、XML 或其他文件中的文件。当您的应用程序启动时，您读取文件/db 并检查新的/删除的/编辑的文件。

您可以存储文件的哈希，以查明文件是否已被移动/编辑。跟踪移动和编辑的文件将非常困难。（我不知道你如何实现它）

PS：您是否考虑过让您的应用程序成为 Windows 服务？无论您的应用程序的 GUI 部分是否正在运行，都让文件管理在后台运行？

# regex - 使用 RegEx 解析 DNS 服务器的 IP 地址

> ID：12216992
> 
> 赞同：-2
> 
> 时间：2012-08-31T14:04:39.333
> 
> 标签：regex

我有以下字符串：

```
DNS Servers . . . . . . . . . . . : 10.204.127.11
                                    10.207.2.50
                                    10.200.10.6 
```

我正在尝试构建一个正则表达式来解析 N 个 IP 地址。

**[我知道这里](https://stackoverflow.com/questions/106179/regular-expression-to-match-hostname-or-ip-address)有一个据称重复的帖子，但它不适用于以下正则表达式：**
**[http: //regexr.com?321nu](http://regexr.com?321nu)**

`^(([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])\.){3}([0-9]|[1-9][0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])$`

ps 抱歉，我的一位同事在我不在时在我的帐户上为我创建了这篇文章。我想我在这里添加了更多信息。随意拆开我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T15:13:49.330

怎么样`([0-9]+\.[0-9]+\.[0-9]+\.[0-9]+)`？

由于不应允许某些数字，因此更好但不完美的模式是：

```
(1[0-9]{0,2}|2[0-9]{0,1}|2[0-4][0-9]|25[0-5]|[3-9][0-9]?)(\.(0|1[0-9]{0,2}|2[0-9]{0,1}|2[0-4][0-9]|25[0-5]|[3-9][0-9]?)){3} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T14:44:20.093

如果您**恰好有三个**IP 地址（请参阅[Regexr](http://regexr.com?320p6)），请使用`\1`,`\2`并`\3`从此正则表达式：

```
^\D*(.*)\s*(.*)\s*(.*)$ 
```

如果您有**1 到 3 个**IP 地址（请参阅[Regexr](http://regexr.com?320p6)），请使用`\1`,`\2`并`\3`从此正则表达式中（使用前检查是否`\2`存在`\3`）：

```
^\D*(?:(.*)(?:\s*(.*)(?:\s*(.*))?)?)$ 
```

# android - Android NoteList 示例程序

> ID：12216995
> 
> 赞同：0
> 
> 时间：2012-08-31T14:04:44.700
> 
> 标签：android, android-intent, android-activity

在 Android 的示例 NoteList 应用程序中，在 onCreate 方法的 NotesList Activity 中，创建了一个名为 Intent 的新 Intent，该 Intent 被分配了来自方法调用“getIntent()”的返回 Intent 据我了解，这允许这个特定的 Activity 已被激活除了单击应用程序列表中的图标之外的其他内容。那么我的问题是，我该如何检验这个理论？除了通过主启动器之外，如何启动 NotesList 应用程序？我如何知道哪些其他应用程序可以启动此 Activity？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T14:10:09.303

关于`Intents`：

[http://developer.android.com/guide/components/intents-filters.html](http://developer.android.com/guide/components/intents-filters.html)

对于初学者，请阅读 android 教程：

[http://developer.android.com/training/index.html](http://developer.android.com/training/index.html)

# javascript - 如何在 java 脚本中从 LinkedIn 获取详细信息？

> ID：12216997
> 
> 赞同：0
> 
> 时间：2012-08-31T14:04:55.223
> 
> 标签：javascript, fetch, linkedin

我正在用 java 脚本创建一个应用程序，它从 LinkedIn 获取我们需要的信息。
我的问题是......我需要LinkedIn个人资料中的公司名称，经验，城市，国家。
我会尝试，但我只能获取姓名、姓氏、行业和标题。
这是我获取上述详细信息的代码。

```
function loadData() {
IN.API.Profile("me")
.fields(["id", "firstName", "lastName", "pictureUrl","headline","industry"])
.params({"company-name": "Adobe", "sortCriteria" : "R", "current-company": "true"})
.result(function(result) {
  profile = result.values[0];
  profHTML = "<p><a href=\"" + profile.publicProfileUrl + "\">";
  profHTML += "<img class=img_border align=\"left\" src=\"" + profile.pictureUrl + "\"></a>";      
  profHTML += "<a href=\"" + profile.publicProfileUrl + "\">";
  profHTML += "<h2 class=myname>" + profile.firstName + " " + profile.lastName + "</a> </h2>";
  profHTML += "<span class=myheadline>" + profile.headline + "</span>";
  profHTML += "<h3>" + profile.industry + "</h3>";

  $("#profiles").html(profHTML);
}); 
```

但我需要获取公司名称、位置和经验。我尝试了很多标签但没有成功。
请给我任何提示或指导我在哪里需要哪个标签。
提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T21:40:12.107

借用上面的代码，您将拥有以下内容：

```
function loadData() {
  IN.API.Profile("me")
    .fields(["id","firstName","lastName","pictureUrl","headline","industry","threeCurrentPositions"])
    .params({"company-name": "Adobe", "sortCriteria" : "R", "current-company": "true"})
    .result(function(result) {
      profile = result.values[0];
      positions = profile.threeCurrentPositions;

      // call to company api to get company-specific location data?
    });
} 
```

Just parse out the returned JSON data from the `threeCurrentPositions` as needed to get the position data, which includes the company name and company id. The company id can be used to pull company location data from the [Company API](https://developer.linkedin.com/documents/company-lookup-api-and-fields), if you need that as well.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-05T11:56:19.627

```
 function onLinkedInLogin() {
            IN.API.Profile("me")
            .fields(["id", "firstName", "lastName", "pictureUrl", "publicProfileUrl", "industry", "location", "headline"])
            .result(function (result) {
                var firstName = result.values[0].firstName;
                var lastName = result.values[0].lastName;
                IN.parse(document.getElementById("profile"))
            })
         } 
```

# java - 我从 java 程序中得到奇怪的输出

> ID：12216999
> 
> 赞同：0
> 
> 时间：2012-08-31T14:04:57.167
> 
> 标签：java, random

我这里有一些奇怪的情况，我想你可以帮助我。我有一个 int 数组，其中填充了从 1 到 10 的数字。我想从这个数组中生成随机数并将其保存到另一个 int 数组中。我使用 Random 类来选择任何数字，因为随机抛出 0 我也像这样修改它（所以它抛出从 1 到 10 的数字）

```
randNum = rand.nextInt(numbers.length-min+1)+min; 
```

以下代码确保如果它生成相同的随机数，它会跳过它。程序实际上正在运行，我正在另一个数组中随机放置从 1 到 10 的数字。这就是我想要的。但有时我会错过 1 - 10 之间的一个数字，而我会得到零。为什么？？

```
int[] numbers = {1,2,3,4,5,6,7,8,9,10};
int[] usednum = new int[10];
Random rand = new Random();
int randNum;
int min = 1;

for (int x = 0; x<numbers.length; x++) {        
  for (int i = 0; i<usednum.length; i++) { 
    randNum = rand.nextInt(numbers.length-min+1) + min;
    for (int f = 0; f<usednum.length; f++) {
      if (usednum[f] == randNum) {
        break;
      } else if (usednum[f] == 0) { 
        usednum[x] = randNum;   
      }
    }
  } 
}

for (int c = 0; c<usednum.length; c++) {
  System.out.println(usednum[c]);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:19:21.930

如果您的目标只是打乱一组数字，请尝试以下操作：

```
Integer[] numbers = {1,2,3,4,5,6,7,8,9,10};
Collections.shuffle(Arrays.asList(numbers)); 
```

它会产生同样的效果。除非您完成的家庭作业迫使您以更手动的方式解决问题，否则请使用标准 Java 库。

由于返回的特殊类型，该`shuffle`方法将更改写入底层`Integer`数组。请注意，您必须使用not数组（请参阅[为什么 Collections.shuffle() 对我的数组失败？](https://stackoverflow.com/questions/3981420/collections-shuffle)）。`List``Arrays.asList(...)``Integer``int`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T14:22:52.693

您是最内层的`for`循环仅检查当前随机数是否在`usednum[]`数组中。并且`for`紧接其外的循环仅检查**10 次 total**。它放弃得太快了，因为它只尝试 10 个随机数。如果所有 10 个都已使用，则不会将任何内容存储在该插槽中`usednum[]`（因此它将是**0**），尝试`while`在其周围添加一个循环并摆脱无关的最外层`for`循环：

```
 for(int i = 0; i<usednum.length; i++) {
           while(usednum[i]==0) {
              randNum = rand.nextInt(numbers.length-min+1)+min;
              for(int f = 0; f<usednum.length; f++) {
                 if(usednum[f] == randNum) {
                    break;
                 } //if                                                                                                                                        
                 else if (usednum[f] == 0) {
                    usednum[i] = randNum;
                 }
              }
           }
        } 
```

另请注意，分配是针对`usednum[i] = randNum;`.

这实质上是用 while 循环替换中间`for`循环（从 i=0 到 9 的循环）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T14:13:38.160

编辑 - 跟随它并重写它：

```
List<Integer> numbers = new LinkedList<Integer>(Arrays.asList(new Integer[]{ 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 }));
        int[] usednum = new int[10];
        Random rand = new Random();
        int n = numbers.size();
        for (int i = 0; i < n; i++) {
            int randNum = rand.nextInt(numbers.size());
            usednum[i]=numbers.get(randNum);
            numbers.remove(randNum);
        }
        for (int c:usednum) {
            System.out.println(c); 
        } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T14:17:52.177

您正在通过整个过程生成使用的数字，因此它不会生成零，只是无法生成应有的值。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T14:23:13.487

你有一个 for 循环太多。

用 i 迭代器删除循环，程序应该做你想做的事。

哦，从随机生成器中删除 -min+1，-1+1=0

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T14:25:26.697

您的数组`usednum`在开头由零组成。在某些情况下，您的程序不会更改该初始值，但会在该行之前中断：

```
if(usednum[f] == randNum) 
```

并在具有相同值的所有迭代中做到这一点`x`。`X`增量，您就有机会更改零值。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T14:29:05.827

实际上，您从不使用数组的内容`numbers`。尝试将数组更改为`int[] numbers = { 10, 22, 23, 42, 53, 18, 7, 8, 93, 10 };`. 你会得到类似的输出。

[Jon Lin 的回答](https://stackoverflow.com/a/12217339/887149)描述了为什么您的代码不起作用但没有解决这个问题。我认为您会希望将代码更改为：

```
 int[] numbers = { 1, 2, 3, 4, 5, 6, 7, 8, 9, 10 };
    int[] usednum = new int[10];
    Random rand = new Random();

    int selectedCount = 0;

    while (selectedCount < numbers.length) {
        int randNum = numbers[rand.nextInt(numbers.length)];
        boolean contains = false;
        for (int x = 0; x < selectedCount; x++) {
            if (usednum[x] == randNum) {
                contains = true;
                break;
            }
        }

        if (!contains) {
            usednum[selectedCount] = randNum;
            selectedCount++;
        }
    }

    for (int c = 0; c < usednum.length; c++) {
        System.out.println(usednum[c]);
    } 
```