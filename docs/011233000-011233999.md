# StackOverflow 问答 11233000-11233999

# asp.net-mvc-3 - 在发送到模型之前将下拉列表值转换为 int

> ID：11233004
> 
> 赞同：0
> 
> 时间：2012-06-27T18:44:32.243
> 
> 标签：asp.net-mvc-3, entity-framework-4, linq-to-entities

我有一个表单和该表单中的下拉列表，其项目的值是字符串类型。我需要将所选列表项的值存储到 Book.PublisherId，它是 int。我如何编辑下面的代码，假设 PublisherId 是字符串？

```
@Html.DropDownListFor(model => model.Book.PublisherId, Model.items); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T07:29:12.437

你不必改变任何东西。如果 Model.items 中的值可以转换为 int，则在提交表单后，您将在 Book.PublisherId 属性中获得正确的 int 值。

# linq - 为什么 Linq2EF 加入生成完整的外部联接？

> ID：11233008
> 
> 赞同：1
> 
> 时间：2012-06-27T18:44:42.287
> 
> 标签：linq, entity-framework, linq-to-entities, odp.net

我在我的 EF 4.3.1 中使用了一些简单的 LINQ：

```
Dim Results = (
    From T1 In Context.Table1
    Where T1.IDColumn = 1568
    Join T2 In Context.Table2 On T1.IDColumn Equals T2.IDColumn
    Select New With {
        .Quantity = T1.Quantity
    }) 
```

不幸的是，当我运行它时，它需要永远。我已经将问题追溯到生成的 SQL 中似乎完全不必要的部分。生成的 SQL 如下所示：

```
SELECT   1 AS "C1"
        ,CAST( "Extent2"."Quantity" AS number(19,0)) AS "C2"  
FROM  [table1] "Extent1"  
INNER JOIN [table2] "Extent2" ON 
(
  ( 
    CAST( "Extent1"."IDColumn" AS number(19,0))
  ) = (
    CAST( "Extent2"."IDColumn" AS number(19,0))
  )
) 
OR 
(
  ( 
    CAST( "Extent1"."IDColumn" AS number(19,0)) IS NULL
  ) 
  AND 
  ( 
    CAST( "Extent2"."IDColumn" AS number(19,0)) IS NULL
  )
)  
WHERE 
(
  1568 = ( 
    CAST( "Extent1"."ForeginKey" AS number(19,0))
  )
) 
```

此查询大约需要 13 秒才能执行。如果我删除 OR / NULL 块，它会下降到 0.122 秒：

```
 SELECT   1 AS "C1"
            ,CAST( "Extent2"."Quantity" AS number(19,0)) AS "C2"  
    FROM  [table1] "Extent1"  
    INNER JOIN [table2] "Extent2" ON 
    (
      ( 
        CAST( "Extent1"."IDColumn" AS number(19,0))
      ) = (
        CAST( "Extent2"."IDColumn" AS number(19,0))
      )
    ) 
    WHERE 
    (
      1568 = ( 
        CAST( "Extent1"."ForeginKey" AS number(19,0))
      )
    ) 
```

有人对我如何让 linq 查询不生成（不需要的）空检查有建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:56:10.210

[根据 Microsoft 的Data Type map](http://msdn.microsoft.com/en-us/library/yk72thhd%28v=vs.80%29.aspx)将被比较列的数据类型从 Int64 更改为 Decimal，查询和性能显着提高。感谢 Jon Skeet 让我走上了正确的道路。

# sql - SQL 从一列中选择不同的值并将 SQL 输出到多列

> ID：11233014
> 
> 赞同：0
> 
> 时间：2012-06-27T18:44:59.047
> 
> 标签：sql, select

PROFESSIONAL 表有很多列 FIRST_NAME,MIDDLE_NAME, LAST_NAME, TITLE_CODE, COMMUNICATION_TYPE_CODE, COMMUNICATION_VALUE

```
PROFESSIONAL Table

COMMUNICATION_TYPE_CODE column                  
Telephone                                                              
Telephone                                                              
Fax                                                    
Fax                                                   
E-mail                                                 
E-mail                                                
Cellular                                               
Cellular                                              

COMMUNICATION_VALUE column
224-256-5689 
547-568-5642 
254-565-4526
524-465-6542
jones@gmail.com
james@yahoo.com
562-564-7854
654-452-6897 
```

这只是一个示例。COMMUNICATION_TYPE_CODE 和 COMMUNICATION_VALUE 列有 500,00 条这样的记录

```
Telephone = PHONE1
 Cellular =  PHONE2
 E-mail = EMAIL1
 Fax = FAX1

SELECT 'IMD Data Source' as DATA_SOURCE,
FIRST_NAME as FIRST_NM,
MIDDLE_NAME as MIDDLE_NM,
LAST_NAME as LAST_NM,
TITLE_CODE as CREDENTIALS,
PHONE1,
PHONE2,
EMAIL1,
FAX1,
FROM DLA_PROFESSIONAL_A

I already mapped the FIRST_NAME,MIDDLE_NAME, LAST_NAME, TITLE_CODE to target columns   in my select statement so dont worry about that. I am having problems mapping   PHONE1,PHONE2,EMAIL1,FAX1 
```

当通信类型代码为（电话、传真、电子邮件、蜂窝）时，我必须选择通信值列数据（电话号码、电子邮件、传真、蜂窝）

这必须转到 4 个单独的列（当 COMMUNICATION_TYPE_CODE='Telephone' 我需要从列中提取 COMMUNICATION_VALUE 数据并将其映射到输出中的 PHONE1 列，当 COMMUNICATION_TYPE_CODE='Cellular' 我需要从列中提取 COMMUNICATION_VALUE 数据并映射到输出中的 PHONE2 列，当 COMMUNICATION_TYPE_CODE='E-mail' 我需要从列中提取 COMMUNICATION_VALUE 数据并将其映射到输出中的 EMAIL1 列，当 COMMUNICATION_TYPE_CODE='Fax' 我需要从列中提取 COMMUNICATION_VALUE 数据并映射到输出中的 EMAIL1 列）

```
I have the separate sequels I dont know how to put it in to the original select statement.

SELECT DISTINCT COMMUNICATION_VALUE FROM DG_SP_NP.DLA_PROFESSIONAL_A WHERE COMMUNICATION_TYPE_CODE='Telephone'

SELECT DISTINCT COMMUNICATION_VALUE FROM DG_SP_NP.DLA_PROFESSIONAL_A WHERE COMMUNICATION_TYPE_CODE='Cellular'

SELECT DISTINCT COMMUNICATION_VALUE FROM DG_SP_NP.DLA_PROFESSIONAL_A WHERE COMMUNICATION_TYPE_CODE='E-mail'

SELECT DISTINCT COMMUNICATION_VALUE FROM DG_SP_NP.DLA_PROFESSIONAL_A WHERE COMMUNICATION_TYPE_CODE='Fax' 
```

我想做这样的事情。这不是 4 个输出的正确 sql，但您明白了。

```
SELECT 'IMD Data Source' DATA_SOURCE,
FIRST_NAME as FIRST_NM,
MIDDLE_NAME as MIDDLE_NM,
LAST_NAME as LAST_NM,
TITLE_CODE as CREDENTIALS,
SELECT DISTINCT COMMUNICATION_VALUE FROM PROFESSIONAL WHERE  COMMUNICATION_TYPE_CODE='Telephone' as PHONE1,
SELECT DISTINCT COMMUNICATION_VALUE FROM PROFESSIONAL WHERE COMMUNICATION_TYPE_CODE='Cellular' as PHONE2,
SELECT DISTINCT COMMUNICATION_VALUE FROM PROFESSIONAL WHERE COMMUNICATION_TYPE_CODE='E-mail' as EMAIL1,
SELECT DISTINCT COMMUNICATION_VALUE FROM PROFESSIONAL WHERE   COMMUNICATION_TYPE_CODE='Fax' as FAX1,
FROM PROFESSIONAL 
```

所有数据都在一张表中（专业）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:02:02.320

你正在做的事情相当复杂。您正在尝试单独订购联系信息。SQL 并不完全支持这一点。

相反，您需要添加一个“行号”列，在下面的代码中称为 seqnum。查询使用此信息将联系信息组合到适当的行中。我发现联合和组方法更容易做到这一点（替代方法是完全外连接）。

```
select p.<whatever>, phone1, phone2, EmailContacts, fax
from Professional p left outer join
     (select ProfessionalId, seqnum,
             MAX(Phone1) as Phone1, MAX(Phone2) as Phone2, MAX(Email) as Email, MAX(Fax) as fax
      from ((select ProfessionalId, COMMUNICATION_VALUE as Phone1,
                    NULL as Phone2, NULL as Email, NULL as Fax
                    row_number() over (partition by ProfessionalId order by ProfessionalId) as seqnum
             from (select distinct ProfessionalId, COMMUNICATION_VALUE,
                   from Professional p
                   where COMMUNICATION_TYPE_CODE = 'Telephone'
                  )
            ) union all
            (select ProfessionalId, NULL, COMMUNICATION_VALUE, NULL, NULL
                    row_number() over (partition by ProfessionalId order by ProfessionalId) as seqnum
             from (select distinct ProfessionalId, COMMUNICATION_VALUE,
                   from Professional p
                   where COMMUNICATION_TYPE_CODE = 'Cellular'
                  )
            ) union all
            (select ProfessionalId, NULL, NULL, COMMUNICATION_VALUE, NULL
                    row_number() over (partition by ProfessionalId order by ProfessionalId) as seqnum
             from (select distinct ProfessionalId, COMMUNICATION_VALUE,
                   from Professional p
                   where COMMUNICATION_TYPE_CODE = 'E-mail'
                  )
            ) union all
            (select ProfessionalId, NULL, NULL, NULL, COMMUNICATION_VALUE,
                    row_number() over (partition by ProfessionalId order by ProfessionalId) as seqnum
             from (select distinct ProfessionalId, COMMUNICATION_VALUE,
                   from Professional p
                   where COMMUNICATION_TYPE_CODE = 'Fax'
                  )
            )
           )
     group by ProfessionalId, seqnum
    ) c
    on c.ProfessionalId = p.ProfessionalId 
```

此查询假定每一行都有一个 ProfessionalId，以识别每个人。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:58:51.207

那是不可能的。

我假设你有类似的东西：

```
JIM | SMITH | TELEPHONE | 224-256-5689 
JIM | SMITH | TELEPHONE | 547-568-5642 
```

当有多个通信值时，单个（不同的）JIM SMITH 行如何知道要返回哪个通信值？

您要么获得 >1 行，要么需要选择 TOP 1 或其他一些条件来返回所需的单个值。

也许你想要这样的东西作为你的嵌套选择：

```
(SELECT TOP 1 COMMUNICATION_VALUE FROM PROFESSIONAL P_INNER WHERE  COMMUNICATION_TYPE_CODE='Telephone' AND P_INNER.<field/s> = P_OUTER.<field/s> ORDER BY <some_field>) 
```

**编辑**

像这样的东西？

```
CASE WHEN COMMUNICATION_TYPE_CODE='Telephone' THEN COMMUNICATION_VALUE END as PHONE1,
CASE WHEN COMMUNICATION_TYPE_CODE='Cellular' THEN COMMUNICATION_VALUE END as PHONE2,
CASE WHEN COMMUNICATION_TYPE_CODE='E-mail' THEN COMMUNICATION_VALUE END as EMAIL1,
CASE WHEN COMMUNICATION_TYPE_CODE='Fax' THEN COMMUNICATION_VALUE END as FAX1, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:13:39.133

关系表中的一列只能包含一个值。这意味着根据您提供的模式（列名），PROFESSIONAL 表的每个条目只能有一个 COMMUNICATION_CODE 值和一个 COMMUNICATION_VALUE 值。在关系数据库术语中，这被称为[第一范式](http://en.wikipedia.org/wiki/First_normal_form)。

也就是说，您可以在 PROFESSIONAL 表中有多个条目，每个条目都具有相同的名称信息，但具有唯一的 COMMUNICATION_VALUE 和 COMMUNICAITON_CODE 数据。然而，这违反了另一个关系设计考虑，即最小化数据重复。

我的建议是将 COMMUNICATION_VALUE 和 COMMUNICATION_CODE 放在单独的表中，然后使用 PROFESSIONAL 表的主键作为这个新 COMMUNICATION 表的辅助键，以便能够为 PROFESSIONAL 表的每个条目选择所有 COMMUNICATION TABLE 值。

那有意义吗？

# javascript - 使用 node.js 开发完整且安全的动态 Web 应用程序需要使用哪些框架？

> ID：11233018
> 
> 赞同：0
> 
> 时间：2012-06-27T18:45:11.340
> 
> 标签：javascript, node.js

使用 node.js 开发动态 Web 应用程序的框架以及阅读哪些书籍或文章？你能推荐全栈吗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:48:14.830

express.js 是 node.js 更流行的框架之一，所以我会研究一下：[http ://expressjs.com/](http://expressjs.com/)

nodetuts 将有一些关于 express.js 的教程，一般来说只有 node：http: [//nodetuts.com/](http://nodetuts.com/)

# iphone - 如何将数据从 UITableViewCell 子类传递到 iOS 中的 RootViewController？

> ID：11233022
> 
> 赞同：1
> 
> 时间：2012-06-27T18:45:23.317
> 
> 标签：iphone, ios, design-patterns, user-interface

我创建了 UITableViewCell 的自定义子类。在那里，我允许用户在 UITextView 中编辑一些文本。单元格属于弹出视图中的表，该表是根视图的子视图。现在，我需要将表格单元格中编辑的文本以及单元格中的其他数据传递给根视图。这是因为，这个编辑过的数据必须被发送到一个 web 视图，它也是根视图的一个子视图。

我考虑了以下方法。一种是将弹出视图作为自定义单元格视图的委托，将根视图作为弹出视图的委托，并通过委托方法调用传递数据。这可能会使设计过于复杂。第二种方法是在创建时将对 webview 的引用存储在单例类中，并直接从单元格中更新它。但这会使所有这些类试图实现的封装完全没有意义。

最好的方法是什么？除了我建议的两种方法之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T18:48:53.173

使用`NSNotificationCenter`，请参阅[**类参考**](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsnotificationcenter_Class/Reference/Reference.html)

## 创建通知

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(doSomething:) name:@"doSomething" object:nil]; 
```

## 发布通知

```
NSString * testString = @"Testing NSNotificationCenter";
[[NSNotificationCenter defaultCenter] postNotificationName: @"doSomething" object: testString]; 
```

## 处理通知

```
- (void)doSomething:(NSNotification *)notification
{
    NSString * someString = [notification object];
    NSLog(@"String Passed from NSNotificationCenter: %@", someString);
} 
```

# jquery - 手动触发jqxGrid加载图标

> ID：11233024
> 
> 赞同：1
> 
> 时间：2012-06-27T18:45:28.327
> 
> 标签：jquery, loading, jqxgrid

我正在使用 jqxGrid 并且加载覆盖仅在页面首次加载时出现 - 而不是在排序/过滤/分页时出现。

这个线程（[jqGrid trigger "Loading..." overlay](https://stackoverflow.com/questions/2705719/jqgrid-trigger-loading-overlay)）有一些很好的建议，但没有奏效。如果有人有更多最新信息，我将不胜感激。

我熟悉 jQuery BlockUI 插件，但如果可能的话，我更喜欢直接在网格中执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-07T11:21:15.903

您似乎在 JQGrid 和 JQXGrid 之间混淆了

# java - 根据输入参数有选择地复制maven中的资源？

> ID：11233038
> 
> 赞同：0
> 
> 时间：2012-06-27T18:46:31.403
> 
> 标签：java, maven, maven-plugin

我正在将应用程序从 Ant 迁移到 Maven。有两种环境，这个应用程序可以部署到。一种配置称为 Local，另一种称为 dev，因此自然有两个 ant 目标。每个 ant 目标，从两个不同的文件夹复制资源，并使其成为最终战争文件的一部分。

我如何在 Maven 中模仿这种行为？我正在考虑在构建时传递一个参数，并基于这个参数，我们可以使用 maven 资源插件来复制相应的文件夹。像这样的东西。

```
<resources>
          <resource>
                <directory>src/main/resources</directory>
                <filtering>true</filtering>
                <excludes>
                    <exclude>${local}/**</exclude>
                </excludes>
            </resource>
        </resources> 
```

我在正确的道路上吗？如果是，我如何在运行时替换“本地”？另外，我正在做一个补充操作，如果我们想为 Dev 构建，那么我排除本地，反之亦然。有没有更好的方法来处理这个？

此外，如果我使用此方法，目标战争会将整个文件夹复制到其中。如何将 Maven 配置为仅复制文件夹内容而不是整个文件夹。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:43:52.717

复制资源时，Maven 会将包含/排除模式应用于`<directory>`定义的值，并维护从该目录向下的路径结构。我找不到任何与蚂蚁相同的东西`flattenmapper`。

其余的，请考虑[Maven 构建配置文件](http://maven.apache.org/guides/introduction/introduction-to-profiles.html)。您定义包含要在构建时更改的配置的配置文件，然后从命令行激活正确的配置文件。使用如下所示的配置，命令

`mvn -Dtarget.env=local process-resources`

会将文件从复制`/src/main/resources/local`到`target/classes`. 由于 'local' 包含在资源的`directory`元素中，因此它不会出现在复制资源的路径中。

```
<profiles>
    <profile>
        <id>local</id>
        <activation>
            <property>
                <name>target.env</name>
                <value>local</value>
            </property>
        </activation>
        <properties>
            <resource.dir>local</resource.dir>
        </properties>
    </profile>

    <!-- add a similar profile for dev -->
</profiles>

<resources>
    <resource>
        <directory>src/main/resources/${resource.dir}</directory>
        <filtering>true</filtering>
    </resource>
</resources> 
```

您可以使用我在此处显示的配置文件做更多事情。我希望这能让你开始，即使它不能解决你的整个用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:43:04.303

我可以推荐的最好的事情是创建如下结构（仅使用属性文件）：

```
.
|-- pom.xml
`-- src
    |-- main
    |   |-- java
    |   |-- resources
    |   |-- environment
    |   |   |-- test
    |   |   |   `-- database.properties
    |   |   `-- production
    |   |       `-- database.properties
    |   `-- webapp 
```

创建一个如下所示的程序集描述符，以与每个环境的 maven-assembly-plugin 结合使用：

```
<assembly xmlns="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://maven.apache.org/plugins/maven-assembly-plugin/assembly/1.1.0 http://maven.apache.org/xsd/assembly-1.1.0.xsd">

  <id>test</id>
  <formats>
    <format>war</format>
  </formats>
  <includeBaseDirectory>false</includeBaseDirectory>
  <dependencySets>
    <dependencySet>
      <unpack>true</unpack>
      <useProjectArtifact>true</useProjectArtifact>
    </dependencySet>
  </dependencySets>
  <fileSets>
    <fileSet>
      <outputDirectory>WEB-INF</outputDirectory>
      <directory>${basedir}/src/main/environment/test/</directory>
      <includes>
        <include>**</include>
      </includes>
    </fileSet>
  </fileSets>
</assembly> 
```

最后，您需要为每个环境执行一次：

```
 <plugin>
    <groupId>org.apache.maven.plugins</groupId>
    <artifactId>maven-assembly-plugin</artifactId>
    <executions>
      <execution>
        <id>test</id>
        <phase>package</phase>
        <goals>
          <goal>single</goal>
        </goals>
        <configuration>
          <descriptors>
            <descriptor>${project.basedir}/src/main/assembly/test.xml</descriptor>
          </descriptors>
        </configuration>
      </execution>
      <execution>
        <id>production</id>
        <phase>package</phase>
        <goals>
          <goal>single</goal>
        </goals>
        <configuration>
          <descriptors>
            <descriptor>${project.basedir}/src/main/assembly/production.xml</descriptor>
          </descriptors>
        </configuration>
      </execution>
    </executions>
  </plugin> 
```

结果将是通过单个构建获得两个已配置用于生产和另一个用于开发的战争文件。

# php - xpath返回simplexmlelement对象不是值

> ID：11233041
> 
> 赞同：0
> 
> 时间：2012-06-27T18:47:14.033
> 
> 标签：php, xpath, simplexml

我有一个 xml 文档，我正在尝试使用 xpath 访问某个子元素的值。

```
$xml = new SimpleXMLElement($url,null,true);
$value = $xml->xpath("/xxx/yyy/zzz"); 
```

当我使用：

```
print_r($value); 
```

输出以下内容：

```
Array
(
    [0] => SimpleXMLElement Object
        (
            [0] => 1003.39
        )

) 
```

我可以通过执行以下操作来访问 SimpleXMLElement 对象的值：

```
echo $value[0] 
```

但是我不想将 SimpleXMLElement 对象存储在 $value 中。我想将对象值存储在 $value 中。

例如我想使用：

```
echo $value 
```

返回

```
1003.39 
```

我需要改变什么

```
$value = $xml->xpath("/xxx/yyy/zzz"); 
```

为了返回值，而不是对象？

ps 如果我使用 (string) 转换为字符串，那么我的 print_r 或 echo $value 会打印“Array”而不是值！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:51:04.880

`->xpath()`根据定义返回一个数组，因此：

```
$result = $xml->xpath("/xxx/yyy/zzz");
$value = $result[0]; 
```

然后要么：

```
$value = (string)$value; 
```

或者：

```
$value = strval($value); 
```

如果要将*整个*数组转换为字符串：

```
$result = $xml->xpath("/xxx/yyy/zzz");
$result = array_map('strval',$result); 
```

# javascript - 如何使用 event.stopPropagation 将选择器作为数据参数传递给 .on()？

> ID：11233042
> 
> 赞同：0
> 
> 时间：2012-06-27T18:47:23.413
> 
> 标签：javascript, jquery

我目前有 event.stopPropagation() 可以处理一些选择器，但现在我需要将这些选择器作为参数传递给 .on()，因为这些元素在 ajax 请求之后被替换。

![在此处输入图像描述](../Images/89b39b04789dcfcc99124e6629c8534c.png)

这就是我所拥有和工作的（但是当 ajax 替换选择器元素时会中断）：

```
$('.addSetMenu input, .addSetMenu select, .addSetMenu').on('click', function(event) {
    return event.stopPropagation();
}); 
```

我试图将选择器作为参数传递给 .on() 作为数据，因为 ajax 请求替换了所有这些元素，但它似乎无法正常工作：

```
 $(document).on('click', '.addSetMenu input, .addSetMenu select, .addSetMenu', function(event) {
     return event.stopPropagation();
  }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:52:00.793

您不能`stopPropagation()`在第二个代码示例中与委托事件处理结合使用。这是因为委托事件处理使用事件传播才能工作。因此，当您的事件冒泡到文档对象（它将由您的事件处理程序处理）时，它已经传播，因此您无法停止已经发生的传播。

这里真正的解决方案可能是了解您真正想要阻止的内容。如果您确实需要停止事件传播，那么每次用 ajax 替换内容时都必须重新绑定第一种类型的事件处理程序（注意不要得到任何重复的事件处理程序）。但是，如果我们知道您在`stopPropagation()`通话中真正想阻止什么，我们也许可以提供一个更简单的解决方案。

从您的 pasteBin 示例来看，我看到了三种可能性：

1.  更改您的代码以处理单击和 stopPropagation 到关闭处理程序之前的公共父级。这可能是更好的解决方案，但我必须更多地了解您的 HTML 结构以及您使用 ajax 动态加载的内容，才能知道这是否可行以及哪些代码可以正常工作。
2.  `resetMenu()`在您的关闭处理程序（您的 pasteBin 示例中的代码）中，检查实际的单击目标，如果目标是选择器中的项目之一，则不要调用。您可以使用`.is()`事件目标上的方法来确定。
3.  每次通过 ajax 重新加载内容时，使用`.on()`（您的第一个代码示例）的静态版本重新安装事件处理程序。

# winrt-xaml - 是否可以在 winRT 中创建简单的 UI 效果，例如投影？

> ID：11233053
> 
> 赞同：1
> 
> 时间：2012-06-27T18:48:15.240
> 
> 标签：winrt-xaml

一般来说，我是 .net 的菜鸟，正在开发我的第一个 Metro 风格应用程序，但找不到向我的一些 UI 元素添加简单阴影的方法。我听说用 winRT 可能无法制作像这样的简单 UI 效果，我想知道这些传言是否属实。如果是这样，有没有人可以解决这种效果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T07:22:01.297

如果您在 xaml 中构建 Metro 应用程序，则没有内置的位图效果（如投影、模糊、发光和反射）。您可能能够创建投影的位图图像并将其用作[9 网格](http://blog.xyzzer.me/2011/09/21/image-ninegrid-in-winrt/)，但这仅在某些情况下有效。

如果你使用 html+css+js，你可以使用 CSS3 位图效果在一个盒子上创建一个投影。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-01-14T06:17:41.123

这是创建 4 像素宽阴影的解决方案，从 Silverlight 中 ChildWindow 的默认模板复制而来——

```
<Grid>
    <Border BorderBrush="#14000000" BorderThickness="1" Background="#14000000" CornerRadius="2" Margin="1,1,-1,-1"/>
    <Border BorderBrush="#0F000000" BorderThickness="1" Background="#0F000000" CornerRadius="2.25" Margin="2,2,-2,-2"/>
    <Border BorderBrush="#0C000000" BorderThickness="1" Background="#0C000000" CornerRadius="2.5" Margin="3,3,-3,-3"/>
    <Border BorderBrush="#0A000000" BorderThickness="1" Background="#0A000000" CornerRadius="2.75"  Margin="4,4,-4,-4" />
    <Border BorderBrush="Black" BorderThickness="1" Background="#FFFFFFFF" CornerRadius="2">
        ...Actual content...
    </Border>
</Grid> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-06T20:50:15.347

对于 XAML Metro/Modern 应用程序， [此 XAML 投影示例完美运行](http://www.java2s.com/Tutorial/CSharp/0470__Windows-Presentation-Foundation/TextDropShadow.htm)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-15T10:39:42.423

BCL 不支持 shadow，但 win2d( [https://github.com/Microsoft/win2d](https://github.com/Microsoft/win2d) ) 支持。

你可以使用 win2d 的 CanvasControl 或者尝试这个基于 win2d 的库[https://github.com/brookshi/XPShadow](https://github.com/brookshi/XPShadow)

# python - python中datetime.date的不稳定行为

> ID：11233058
> 
> 赞同：0
> 
> 时间：2012-06-27T18:48:37.123
> 
> 标签：python, debugging, datetime

在调试来自 datetime.date 的看似不稳定的行为时，我得到了这个完全荒谬的会话

这是成绩单（添加了一些#comments）。不幸的是，我没有设法找到我如何达到我的“d”值的重现（它是通过随机生成的日期/数字的大量聚合获得的）

```
>>> d
[datetime.date(2027, 1, 1), datetime.date(2013, 3, 26)]
>>> d2 = [datetime.date(2027, 1, 1), datetime.date(2013, 3, 26)]
>>> d == d2                      # ok so no misunderstanding
True
>>> min(d)
datetime.date(2027, 1, 1)        # ???
>>> min(d2)
datetime.date(2013, 3, 26)       # fine
>>> max(d)
datetime.date(2013, 3, 26)       # ?!?
>>> max(d2)
datetime.date(2027, 1, 1)        # fine 
```

我知道我问了很多，但任何人都可以阐明这种荒谬情况的可能来源吗？我尝试重新启动我的编辑器（Eric），它可能与调试器有关，但是当我在没有调试器的情况下运行时，我通常遇到的问题（即一些奇怪的数字）也会发生。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:00:04.907

嗯……我傻了。问题是我对 datetime.date 进行了子类化，因此 d 中的对象实际上就是那个子类。现在我需要弄清楚为什么比较仍然会产生平等。

这里的要点是，我认为如果没有复制，我可以使用“pickle”并导出我的变量供其他人检查。当我这样做时，我发现我的子类正在被使用。

这就是我所做的：

```
>>> import pickle
>>> pickle dumps([d,d2])
>>> # some stuff showing the library/subclass 
```

很抱歉给您带来麻烦-希望您不会为此投票反对我！

# c# - 使用实体框架更新集合时出错

> ID：11233059
> 
> 赞同：1
> 
> 时间：2012-06-27T18:48:42.073
> 
> 标签：c#, entity-framework

当我尝试更新具有与其关联的集合的实体时，我收到以下消息。

> “ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象。”

我通过参数接收具有新属性的实体。Eventos 有一个 Clientes 集合，它是 Eventos 自带的。

这是代码：

```
public int Modificar(Eventos eventos)
{
    try
    {
         DBEntities DB = new DBEntities();
         Eventos objEvento = 
             DB.Eventos.Where(x => x.Id_evento == eventos.Id_evento)
                       .SingleOrDefault();

         eventos.Porcentaje_Pagado = objEvento.Porcentaje_Pagado;

         DB.Eventos.Attach(eventos);
         DB.Eventos.ApplyCurrentValues(eventos);

         DB.ObjectStateManager
             .ChangeObjectState(eventos, System.Data.EntityState.Modified);
         DB.SaveChanges();
         return eventos.Id_evento;
    }
    catch (Exception )
    {
         throw;
    }

} 
```

问题出在“附件”中。

问题是什么？

*** 编辑 ****

它部分工作，它保存了“Eventos”的新数据，但是当我尝试更新与 Eventos 关联的“Clientes”列表时出现以下错误。

> “无法设置类型 'Eventos_...' 上的属性 'Clientes'，因为集合 > 已设置为 EntityCollection。”

错误在行：objEvento.Clientes = eventos.Clientes;

编码：

```
DBEntities DB = new DBEntities(); 
Eventos objEvento = DB.Eventos.Where(x => x.Id_evento == eventos.Id_evento).SingleOrDefault(); 
objEvento.Porcentaje_Pagado = eventos.Porcentaje_Pagado; 
objEvento.Clientes = eventos.Clientes; 
DB.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:52:47.950

您已经使用以下代码加载了实体：

```
 Eventos objEvento = 
         DB.Eventos.Where(x => x.Id_evento == eventos.Id_evento)
                   .SingleOrDefault(); 
```

您将需要更新已加载到对象上下文中的实体。

更新`objEvento`然后应用并保存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:55:45.727

试试这个：

```
public int Modificar(Eventos eventos) 
{ 
     DBEntities DB = new DBEntities(); 
     Eventos objEvento =  
         DB.Eventos.Where(x => x.Id_evento == eventos.Id_evento) 
                   .SingleOrDefault(); 

     objEvento.Porcentaje_Pagado =  eventos.Porcentaje_Pagado;

     DB.SaveChanges(); 

     return objEvento.Id_evento; 

} 
```

# actionscript-3 - 使用 AS3 停止 Flash 移动对象

> ID：11233060
> 
> 赞同：0
> 
> 时间：2012-06-27T18:48:42.260
> 
> 标签：actionscript-3, flash-cs5

我使用 AS3 来编程一个对象以一定的速度从屏幕中的某个点移动到另一个点。我尝试了不同的代码，但我无法真正实现我想要的......现在我正在使用以下代码：

```
var xVelocity:Number = 8;

addEventListener (Event.ENTER_FRAME, onVelocity);

function onVelocity (eventObject:Event):void
{
    animal0.x +=  xVelocity;
    animal0.y +=  yVelocity;
} 
```

物体移动完美，但我不能让它停在我想要的位置 x...它继续移动直到它到达屏幕的末端...我怎样才能让它停在我想要的点？或者如果你有更好的方法来做到这一点......

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:56:29.330

假设动物在屏幕上从左到右移动，下面的代码将在它到达 xDest 后停止移动。

```
var xVelocity:Number = 8;
var xDest = 300;//Destination point along X axis

addEventListener (Event.ENTER_FRAME, onVelocity);

function onVelocity (eventObject:Event):void
{
    if(animal0.x < xDest)
    {
        //only move animal0 so long as it has not reached the destination
        animal0.x +=  xVelocity;
        animal0.y +=  yVelocity;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:48:10.640

您可以尝试补间引擎，我认为 greensock 包是您的最佳选择。 [http://www.greensock.com/tweenmax/](http://www.greensock.com/tweenmax/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:48:15.893

使用距离公式计算对象与目的地的距离，然后如果足够近，将其锁定到您的确切坐标。

```
var dist:Number; // The distance between the object and its destination
var threshold:int = 3; //How close it has to be to snap into place
function onVelocity (eventObject:Event):void
{
    animal0.x +=  xVelocity;
    animal0.y +=  yVelocity;
    dist = Math.sqrt(Math.pow(xDest - animal0.x,2) + Math.pow(yDest - animal0.y,2));
    if(dist < threshold)
    {
        removeEventListener(Event.ENTER_FRAME, onVelocity);
        animal0.x=xDest; // Locks the object into the exact coordinates
        animal0.y=yDest;
    }

} 
```

我正在创建的游戏遇到了完全相同的问题，这就是我解决它的方法。

# php - 根据jquery中的已知id返回一些数据

> ID：11233077
> 
> 赞同：0
> 
> 时间：2012-06-27T18:49:46.907
> 
> 标签：php, jquery

我正在 jquery 中创建一个 CRUD 应用程序，我的应用程序中有这个问题。要编辑记录，我成功地获取了记录的 id。

```
<a href="#" id="<?php echo $msg_id; ?>"  class="update_btn">Edit</a> 
```

我想检索 id 并且有效。

```
$('.update_btn').live("click",function() 
{
var ID = $(this).attr("id");
var dataString = 'msg_id='+ ID;
//alert(dataString);

$.ajax({
type: "POST",
 url: "get-data.php",
 dataType: 'json',
 cache: false,
 success: function(data){
 //getData()
 }
});
return false;
}); 
```

但是，我如何使用检索到的 id

```
//get-data.php
include('db.php');
if($_POST['msg_id'])
{
$id=$_POST['msg_id'];
$id = mysql_escape_String($id);
$sql_in= mysql_query("SELECT msg FROM messages where msg_id='$id'");
$r=mysql_fetch_array($sql_in);
$msg=$r['msg'];
echo json_encode($msg);
} 
```

从选择查询返回数据。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:52:26.090

您需要`data`在您的 ajax 请求中使用选项来首先发送您的 id：

```
$.ajax({
   type: "POST",
   url: "get-data.php",
   dataType: 'json',
   data: dataString , // <--------- added this line
   cache: false,
   success: function(data){
     //getData()
 }
}); 
```

现在您将能够通过您正在做的事情在 PHP 中获得它，例如`$_POST['msg_id']`

# c - 未定义的参考 gcc

> ID：11233078
> 
> 赞同：5
> 
> 时间：2012-06-27T18:49:54.017
> 
> 标签：c, gcc, ubuntu, compilation

当我尝试使用 gcc 在 ubuntu 上编译我的程序时，出现以下错误：

> main.c:(.text+0x162): undefined reference to `json_parse' main.c:(.text+0x182): undefined reference to`json_value_free'

但是，这些函数包含在一个名为 json.h 的文件中，我将其导入 main.c 并包含在我的 gcc 命令中。

有人有线索吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T18:51:39.693

您不应该编译“json.h”标头。未定义的引用*不是*编译器错误，而是*链接器错误*。这意味着您没有将包含 json_value_free 的文件编译到您的代码中，或者没有链接到包含它的库。您应该执行任一操作，而不是尝试编译头文件本身。

所以，如果你有一个单独的 json.c 文件，你必须编译并将它也链接到你的 main.c 文件。尝试（我假设 GCC）：

```
gcc -o myprog main.c json.c 
```

# ruby-on-rails - 需要打开哪些端口才能在 EC2 上使用 Murder？

> ID：11233079
> 
> 赞同：1
> 
> 时间：2012-06-27T18:50:02.960
> 
> 标签：ruby-on-rails, ruby, amazon-ec2, capistrano, bittorrent

我正在尝试使用 Twitter 的 Murder [https://github.com/lg/murder/](https://github.com/lg/murder/)将 Rails 应用程序本地部署到 EC2 机器集群。我通过 Capistrano 将其推送到一组服务器，这些服务器的安全组打开了以下 TCP 端口：

```
22 (SSH)    0.0.0.0/0
25 (SMTP)   0.0.0.0/0
80 (HTTP)   0.0.0.0/0
143 (IMAP)  0.0.0.0/0
8998        0.0.0.0/0
6881-6889   0.0.0.0/0 
```

最后一个端口是 Murder 应该运行跟踪器的端口，而 6881-6889 是 BitTornado 默认使用的下载端口。

当 Capistrano 脚本运行时，它会进入“Peering...”阶段并停止运行。我通过 SSH 连接到要向其推送代码的服务器，他们确实获得了代码（显示在 /tmp 中），但 Murder 脚本并没有超出此范围。

如果我打开所有 TCP 端口（0-65535），它工作得很好。我很好奇应该打开哪些其他端口才能使其按预期工作......而不必打开所有东西。

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T01:39:28.077

因此，默认情况下，BitTornado 会选择一个介于 10000 和 60000 之间的随机端口来监听。这些默认值可以在 BitTornado 库的 download_bt1.py 文件中更改。查找以下行：

```
('minport', 10000, 'minimum port to listen on, counts up if unavailable'),
('maxport', 60000, 'maximum port to listen on'),
('random_port', 1, 'whether to choose randomly inside the port range ' +
    'instead of counting up linearly'), 
```

它们非常不言自明。希望这可以帮助。

# c - C 编程：如何在这个程序中使用 realloc？

> ID：11233080
> 
> 赞同：0
> 
> 时间：2012-06-27T18:50:11.947
> 
> 标签：c, malloc, realloc

我必须编写一个程序来存储和打印内存中的整数。我必须使用重新分配。基本上，该程序为 2 个整数分配大小。当输入给出 2 个 int 时，它应该为 1 个 int 重新分配空间并打印出 double。接下来，当输入给定 3 个 int 时，它应该为 int 再分配 2 个空间并打印出 double.. 等等..

```
Test cases:

input file in.0:
------
4
------

expected output:
------
4
------

=================================================

input file in.1:
------
4 5
------

expected output:
------
4
5
double
------

==================================================

input file in.2:
------
4 5 3
------

expected output:
------
4
5
double
3
double
------

===================================================

input file in.3:
------
4 5 3 2 9
------

expected output:
------
4
5
double
3
double
2
9
double 
```

我写了这个程序，但它没有正确分配内存。有人可以指导我的写作方向吗？

```
int main(void)
{
    int c;

    int digit;
    int count = 0;
    int d_size = 1;
    int init_size = 2;
    int *p = (int *) malloc(sizeof(int) * init_size);

    while((c = scanf("%i", &digit)) != EOF)
    {
        if (c == 1)
        {
            *(p+count) = digit;
            count++;
        }
        else
        {
            printf("not valid");
        }

        printf("%i\n", digit);

        if (count >= 2)
        {
            printf("double\n");
            p = (int *) realloc(p, sizeof(int) * d_size);
            d_size = d_size * 2;
        }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T18:58:17.737

你`init_size`是 2，但你`d_size`是 1。首先，使`d_size`等于`init_size`。其次，您需要`d_size = d_size * 2`在 the 之前执行此操作，`realloc`这样您实际上会增加大小。

* * *

旁注：`realloc`如果内存不足，将失败。如果你写：

```
p = realloc(p, ...); 
```

如果失败，您将丢失之前分配的内存。你应该总是这样使用`realloc`：

```
enlarged = realloc(p, ...);
if (enlarged == NULL)
    // handle error
else
    p = enlarged; 
```

* * *

旁注 2：您最终可能会更改指针的类型。最好不要重复。代替

```
int *p;
p = (int *)malloc(sizeof(int) * count); 
```

写：

```
int *p;
p = malloc(sizeof(*p) * count); 
```

# php - MYSQL 使用 GROUP BY 和 ORDER BY 返回奇怪的结果

> ID：11233082
> 
> 赞同：0
> 
> 时间：2012-06-27T18:50:14.237
> 
> 标签：php, mysql

尝试做一个论坛系统优化，在一个查询中选择所有最后的海报并将它们存储在一个数组中。事情是数据库正在返回意外的结果

PHP 版本 5.3.13

MySQL 版本 5.1.63

```
$getPosts = $dB->fetch('
  SELECT
    post_id, post_poster_id, post_topic_id, post_time,
    COUNT(post_id) as count
  FROM forum_posts
  WHERE post_topic_id IN (
    SELECT topic_id
    FROM forum_topics
    WHERE topic_forum_id = ' . $forum_id . '
  )
  GROUP BY post_topic_id
  ORDER BY post_time DESC
');
foreach($getPosts as $lastPoster)
{
    $lastPosts[$lastPoster['post_topic_id']] = $lastPoster;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:21:33.770

```
SELECT
   p.post_id, p.post_poster_id, p.post_topic_id, p.post_time, l.count

FROM forum_posts AS p

-- joining with list of latests in a derived table
INNER JOIN

-- getting latest time and count
(SELECT p.post_topic_id, MAX(post_time) AS post_time, COUNT(post_id) AS count
FROM forum_posts AS p
-- filtering forum_id with join, join is usually preferrable than subquery
INNER JOIN forum_topics AS t ON t.topic_id = p.post_topic_id AND t.topic_forum_id = '$forum_id'
GROUP BY post_topic_id)

AS l USING(post_topic_id, post_time)

-- grouping to strip possible post_time-in-one-topic-duplicates
GROUP BY p.post_topic_id 
```

# php - 无法获取表单发布

> ID：11233083
> 
> 赞同：0
> 
> 时间：2012-06-27T18:50:17.870
> 
> 标签：php, html

我有这个简单的表格，点击时会显示一个弹出日历

```
<form action = "test2.php" method = "post" onsubmit="jValidate(this);">
<input type="text" name="inputField" size="12" id="inputField"/>
</form> 
```

下面提到的是我的`test2.php`代码

```
<?php
$d = $_POST["inputField"];
echo($d);
?> 
```

然而，我得到的只是一个空白屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:57:20.500

将这些行放在页面顶部，您*应该*会看到错误/问题而不是空白页面（致命错误）：

```
ini_set('display_errors', true);
error_reporting(E_ALL);

// etc
$d = $_POST["inputField"];
echo($d); 
```

* * *

# 更新

这应该让您的通知消息消失：

```
if (isset($_POST["inputField"]))
{
  $d = $_POST["inputField"];
  echo($d);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:22:29.380

抱歉，但有时我们会跳过明显的：您的表单是否应该如下所示：

```
<form action = "test2.php" method = "post" onsubmit="jValidate(this);">
<input type="text" name="inputField" size="12" id="inputField" />
<input type="submit" name="submit" value="Post It!" />
</form> 
```

也许你可以用 PHP 做@Blaster 所说的。

# ios - 将状态注入 UITabBarController 子控制器

> ID：11233089
> 
> 赞同：7
> 
> 时间：2012-06-27T18:50:51.370
> 
> 标签：ios, dependency-injection, tabs, uitabbarcontroller

如何将状态注入显示为 UITabBarController 子级的视图控制器？我有两个同级选项卡，它们都显示选定日期的信息。可以更改在 TextView 选项卡或 GraphView 选项卡中选择的日期，并且我希望两个选项卡保持同步，以免混淆用户。

一种相当简单的方法是声明一个全局状态变量来保存 currentDate，并让每个选项卡视图控制器检查 -viewWillAppear: 中的 currentDate。

但是所有建议都说不要做全局变量（或等效项，如共享单例或应用程序委托上的属性等）。相反，您应该进行依赖注入，以便每个控制器都获得对共享状态对象的引用。但是你什么时候/如何做到这一点？UITabBarController 通常在用户请求查看它们之前不会加载其选项卡视图。我不认为我想在 -application:didFinishLaunchingWithOptions: 中预加载所有内容，从而减慢应用程序的启动速度。但是 UITabBarController 似乎没有提供任何类型的 -tabWillAppear 事件来挂钩，所以我似乎坚持将 currentDate 保持在全局范围内。

我错过了什么吗？谢谢。

# javascript - View 中的 Backbone.js 渲染集合

> ID：11233095
> 
> 赞同：0
> 
> 时间：2012-06-27T18:51:16.517
> 
> 标签：javascript, backbone.js, underscore.js

我有一个要在视图中呈现的主干集合。JSON 数据似乎是正确的，但是我无法从视图中访问这些值。

这是基本集合：

```
define(['backbone', 'BaseModel'], function(Backbone, BaseModel) {

    var BaseCollection = Backbone.Collection.extend({

         model: BaseModel,
         url: "/collection/get?json=true",

         initialize: function() {}
    });

    return BaseCollection;

}); 
```

这是视图：

```
define(['backbone', 'BaseCollection'], function(Backbone, BaseCollection) {

    var BaseView = Backbone.View.extend({

        el: $('#baseContainer'),
        template: _.template($('#baseTemplate').html()),

        initialize: function() {
            _.bindAll(this);
            this.collection = new BaseCollection();
            this.collection.bind('all', this.render, this);
            this.collection.fetch();
        },
        render: function() {   

            //This returns 3 objects which is correct based on the JSON data being returned from the server
            console.log(this.collection.toJSON());

            var html = this.template(this.collection.toJSON());
            this.$el.html(html);
            return this;
        },

    });

    return BaseView;

}); 
```

我想我需要遍历`this.render`集合中的每个模型。但是，我不确定，因为在完成所有迭代之前它不应该“渲染”。

任何建议都会很棒！谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:24:23.067

您需要通过名称授予模板访问模型的权限。当你这样做时：

```
var html = this.template(this.collection.toJSON()); 
```

您最终将数组传递给`template`函数，该函数通常需要一个上下文对象（名称/值对）。试试这个：

```
var html = this.template({collection: this.collection}); 
```

然后在您的模板中，您可以使用`collection.each`迭代器函数或任何用于迭代/过滤/映射/等的下划线实用程序方法来迭代它们。我还建议在让您的模板访问集合时不要使用 toJSON，因为它会使您的数据更笨拙且更难处理。`toJSON`最好在您发出 HTTP 请求时使用。

# javascript - 带有嵌套模板的 KnockoutJS 绑定

> ID：11233097
> 
> 赞同：1
> 
> 时间：2012-06-27T18:51:25.623
> 
> 标签：javascript, knockout.js, knockout-2.0

我在使用 Knockout.JS 的嵌套绑定时遇到问题

例如，如果我在 app.js 文件中有以下内容：

```
var UserModel = function() {
    this.writeups = ko.observableArray([]);
}

var WriteupModel = function() {
    this.type = 'some type';
}

var MyViewModel = function() {
    this.newUser = new UserModel();
    this.selectedUser = ko.observable(this.newUser);

    this.selectedUser().writeups().push(new WriteupModel());
}

ko.applyBindings(new MyViewModel()); 
```

以及以下视图：

```
<div id="empReportView" data-bind="template: { name: 'empTmpl', data: selectedUser }"></div>

<script type="text/html" id="empTmpl">
    <table>
        <tbody data-bind="template: { name: 'empWuItem', foreach: $data.writeups } ">
        </tbody>
    </table>
</script>

<script type="text/html" id="empWuItem">
    <tr>
        <td data-bind="text: type"></td>
    </tr>
</script> 
```

每当另一个 WriteupModel 被推送到属于 selectedUser 的 writeups 数组时，表就不会更新。这是我试图完成的简化版本，但可以假设当他们创建一个 writeup 时，它应该根据新信息更新 write-ups 表。

我是 Knockout 的新手，因此我们将不胜感激！

谢谢。

-=-= 编辑 1 =-=-

需要注意的一件事是，如果您重新加载 selectedUser 的绑定，它将为添加的 writeup 吐出 empWuItem 模板。这似乎效率低下，因为绑定应该在将 WriteUp 添加到 UserModel 中的 writeups 可观察数组时触发，而不必“重新分配”视图模型中的 selectedUser 属性。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:57:40.333

Push 是 observable 数组的一个属性：

```
this.selectedUser().writeups().push(new WriteupModel()) 
```

应该

```
this.selectedUser().writeups.push(new WriteupModel()); 
```

# python - 如何检测最大值。Python中的递归深度超出异常？

> ID：11233100
> 
> 赞同：7
> 
> 时间：2012-06-27T18:51:32.253
> 
> 标签：python

```
try:
    recursive_function()
except RuntimeError e:
    # is this a max. recursion depth exceeded exception? 
```

如何判断何时达到最大递归深度？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T18:55:29.957

您可以查看异常本身：

```
>>> def f():
...     f()
... 
>>> try:
...     f()
... except RuntimeError as re:
...     print re.args, re.message
... 
('maximum recursion depth exceeded',) maximum recursion depth exceeded 
```

不过，我认为您无法区分这与仅仅假装是超出递归深度（运行时）异常的东西。 `message`已弃用，因此`args`可能是最好的选择，并且与 Python-3 兼容。

* * *

更新：在 Python 3.5 中，您可以使用特定的`RecursionError`方法来代替。

# php - 如何对 PHP MySQL JOIN 结果进行分组？

> ID：11233105
> 
> 赞同：2
> 
> 时间：2012-06-27T18:51:45.190
> 
> 标签：php, mysql, join, group-by, group-concat

**预期结果：**

```
Berries: blueberry, raspberry, strawberry
Citrus: grapefruit, lime
Pear 
```

* * *

SQL：

```
CREATE TABLE IF NOT EXISTS `fruits` (
  `id` varchar(8) NOT NULL,
  `group` varchar(8) NOT NULL,
  `name` varchar(250) NOT NULL,
  PRIMARY KEY (`id`)
) ENGINE=MyISAM DEFAULT CHARSET=utf8;

INSERT INTO `fruits` (`id`, `group`, `name`) VALUES
('03E7', '', 'Berries'),
('0618', '03E7', 'blueberry'),
('051B', '03E7', 'raspberry'),
('02AA', '03E7', 'strawberry'),
('035F', '', 'Citrus'),
('07A5', '035F', 'grapefruit'),
('0633', '035F', 'lime'),
('05E1', '', 'Pear'); 
```

当前的PHP：

```
<?php

header("Content-Type: text/plain");

mysql_connect("localhost", "root", "");
mysql_select_db("test");

$query = mysql_query("SELECT a.name as `group`, b.name as name FROM fruits a LEFT JOIN fruits b ON b.`group` = a.id WHERE a.`group` = ''");

if ($query) {
    while ($row = mysql_fetch_array($query)) {
        echo $row['group'] . ': ' . $row['name'] . "\n";        
    }
    mysql_free_result($query);
}

?> 
```

当前结果：

```
Berries: blueberry
Berries: raspberry
Berries: strawberry
Citrus: grapefruit
Citrus: lime
Pear: 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:56:23.750

```
SELECT a.name, GROUP_CONCAT(b.name) ... WHERE a.group = '' GROUP BY a.name 
```

总之，你需要一个`GROUP BY`子句，并且分组列需要以某种方式聚合（否则你只会得到一个值）。如果这不起作用，您可以轻松地在 PHP 代码中使用您得到的结果：

```
$fruits = array();
while ($row = fetch($query)) {
   //Can be skipped, but you will get notices
   if (!isset($fruits[$row['group']]) {
      $fruits[$row['group']] = array();
   }
   $fruits[$row['group']] = $row['name'];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T08:44:17.690

感谢@ExplosionPills 发现我关于 MySQL`GROUP_CONCAT`我已经更新了返回预期结果的代码段：

```
<?php

$query = mysql_query("SELECT a.name as `group`, GROUP_CONCAT(b.name ORDER BY b.name SEPARATOR ', ') as name FROM fruits a LEFT JOIN fruits b ON b.`group` = a.id WHERE a.`group` = '' GROUP BY a.name");

if ($query) {
    while ($row = mysql_fetch_array($query)) {
        $group = $row['group'];
        $name  = $row['name'];

        if (isset($name)) {
            echo $group . ': ' . $name . "\n";
        } else  {
            echo $group . "\n";
        }
    }
    mysql_free_result($query);
}

?> 
```

SQL结果：

> 显示第 0 - 2 行（总共 3 行，查询耗时 0.0004 秒）。

```
group   | name
--------+--------
Berries | blueberry, raspberry, strawberry
Citrus  | grapefruit, lime
Pear    | NULL 
```

PHP结果：

```
Berries: blueberry, raspberry, strawberry
Citrus: grapefruit, lime
Pear 
```

欢迎大家提出更好的改进措施？

# java - 如何使用 Java 查看网页并将数据保存到数据库？

> ID：11233106
> 
> 赞同：0
> 
> 时间：2012-06-27T18:51:51.710
> 
> 标签：java, database, string, image

我正在从网站收集数据并尝试将其保存到数据库（或非常易于访问的类似数据库），而不是在我的桌面或文件夹中存放一堆文件。

我需要查看很多页面（准确地说是 1900 年）。我想节省获取这些数据的时间，并决定制作一个 Java 程序来执行此操作。

这基本上就是我想要做的。

1.  访问网页：www.TestWebsite.com/items/0
2.  将（名称，描述，图像（png））保存到一个数组/类到数据库中。
3.  重复直到我起床：www.TestWebsite.com/items/1899

我希望能够离线访问这些数据，而无需上网查看。

关于我应该如何开始的任何想法。我已经制作了一个基本的网页查看器，我只是错过了将字符串和图像保存到数据库之间的步骤。

我很感激任何帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T18:58:41.647

它相当简单，但如果您还没有学习一点 SQL，则需要学习一些 SQL。

您还必须选择一个数据库平台——我建议 SQLite 用于此目的，因为数据供个人使用，而且它轻量级且易于设置。

这是一个关于使用 JDBC（Java 数据库连接）与 SQLite 数据库对话的教程： [http](http://en.wikibooks.org/wiki/Java_JDBC_using_SQLite) ://en.wikibooks.org/wiki/Java_JDBC_using_SQLite 。它从设置到插入数据，所以一旦你完成了修改你的网页查看代码以获取你需要的数据并将其推入数据库应该很简单。

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:54:45.767

实际上，前几天才这样做。我使用[jsoup](http://jsoup.org/)来废弃我需要的网页并写入我的本地数据库。非常简单的网页解析框架。

# ruby - 如何记录 Ruby 1.9 中分配的总内存？

> ID：11233107
> 
> 赞同：1
> 
> 时间：2012-06-27T18:51:57.967
> 
> 标签：ruby, memory-management

我看到[malloc_allocated_size](http://www.ruby-doc.org/core-1.9.3/GC.html#method-c-malloc_allocated_size)可能是内存总量。然而：

```
$ ruby -v
ruby 1.9.3p125 (2012-02-16 revision 34643) [x86_64-darwin11.4.0]
$ ruby -e 'puts GC::malloc_allocated_size'
-e:1:in `<main>': undefined method `malloc_allocated_size'
  for GC:Module (NoMethodError) 
```

malloc_allocated_size 是获得分配总内存的正确方法吗？我怎么称呼它？

# ruby-on-rails - Gmaps4Rails - 自动调整地图到不考虑隐藏标记的边界

> ID：11233109
> 
> 赞同：0
> 
> 时间：2012-06-27T18:52:05.970
> 
> 标签：ruby-on-rails, gmaps4rails

使用 Gmaps4Rails，我可以根据属性显示/隐藏一些标记。这很好用。但是，我试图让地图自动调整到当前的标记集，并`Gmaps.map.adjustMapToBounds()`在设置当前可见标记后调用。

每当我过滤项目时，整个地图都会显示，就好像它正在显示所有标记一样，即使它实际上只显示过滤后的标记。我*认为*这是因为它在设置边界时考虑了隐藏标记，但我可能错了！

这是我的过滤代码：

```
$("select").change(->
    currentFilters = $('select').val()
    hideAllMarkers()
    visibleMarkers()
    Gmaps.map.adjustMapToBounds()
  )

  visibleMarkers = ->
    filtered = Gmaps.map.markers
    filtered = _.filter(filtered, (marker) ->
      _.include(currentFilters, marker.market)
    )

    _.each filtered, (marker) ->
      Gmaps.map.showMarker marker

  hideAllMarkers = ->
    _.each Gmaps.map.markers, (marker) ->
      Gmaps.map.hideMarker marker 
```

以下是我初始化地图的选项：

```
@gmap_options = {"map_options" => {
  "auto_zoom" => true,
  "auto_adjust" => true,
  "mapTypeControl" => true,
  "detect_location" => true,
  "center_on_user" => true},
  "markers" => {"data" => @map}
} 
```

# jquery - 使用 jQuery 一次性添加和翻转元素，实现无限轮播

> ID：11233112
> 
> 赞同：1
> 
> 时间：2012-06-27T18:52:16.560
> 
> 标签：jquery

好的，所以我有一个左右动画的旋转木马。

有说... 1000px 宽的视口 div 和里面的一系列 div 总可以说 5000px。它们都向左浮动，所以在任何时候，我只看到视口 div 中的 4 个项目。使它无限的最佳方法是什么。如何检测到用户已到达轮播中的最后一个 div（向左或向右）。您会删除所有元素并反转顺序并将它们附加到同一个 div 吗？还是别的什么方法？我正在使用 jQuery ...

这只是目前的概念（无限部分），因此代码实际上不可能发布。我只是在寻找潜在的解决方案......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:23:30.633

我想这就是你为制作“普通”轮播所做的事情。假设 HTML 是这样的：

```
<div class="viewport">
    <div class="container">
        <div class="group"> <!-- Without this div probably --!>
            <div class="item"></div>
            <div class="item"></div>
        </div>
    </div>
</div> 
```

要使其成为“旋转木马”，您将固定视口的宽度，并将容器扩展为包含其所有子项（带有`overflow: hidden`）。向右滚动时，减少它的左偏移量，当向左滚动时，增加它的左偏移量。如果左偏移 >= 0，则您位于第一项。如果左偏移 <= -（容器宽度），则您位于最后一项。

您应该在每次向左/向右滚动时检查这些条件，因此，您将在“组”之前/之后附加容器的副本，一旦旧组不可见，您可以将其删除。这使得滚动平滑，并且位置不会从末尾对齐到开头。但是，如果有很多项目，这可能会很慢。因此，最初，您可以将您的项目分成多个“组”，例如 5 个，一旦到达终点，附加第一个/最后一个组的副本，并删除第一个/最后一个组。

另一种选择是快速向相反方向滚动。无需捕捉到不会向用户提供视觉反馈的另一端，您可以更快地设置滚动到另一端的动画。在这种情况下，一旦用户到达末尾，滚动停止，如果他再次滚动，它会滚动回到开头，因此他不会对正在发生的事情感到惊讶。

那只是我的两分钱。我曾经做过一个轮播，但没有这个功能。我已经考虑过了，但没有实施。

希望能帮助到你。

# javascript - 自定义函数中的 Dojo 功能

> ID：11233114
> 
> 赞同：0
> 
> 时间：2012-06-27T18:52:27.477
> 
> 标签：javascript, asynchronous, dojo

使用 dojo 时出现错误：无法读取 null 的属性“样式”。并非总是如此，但经常如此。我试图弄清楚会发生什么。在我的应用程序中，我需要在我的函数中使用 dojo 功能，例如：

```
function updateModifySettings() {
    require(["dijit/registry"], function(registry){
          var drag = registry.byId("toolbar.modify.drag").checked,
              rotate = registry.byId("toolbar.modify.rotate").checked,
              resize = registry.byId("toolbar.modify.resize").checked,
              ...
    }
} 
```

我是 dojo 的新手，不知道如何以正确的方式编写上面的代码。我认为这段代码会导致错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:50:13.333

“要求”部分应该在函数之外。如果您希望 updateModifySettings 成为全局函数，请尝试以下操作：

```
require(["dijit/registry"], function(registry){
    window.updateModifySettings = function () {
        var drag = registry.byId("toolbar.modify.drag").checked,
          rotate = registry.byId("toolbar.modify.rotate").checked,
          resize = registry.byId("toolbar.modify.resize").checked,
          ...

    }
}); 
```

Dojo 在 1.7 中切换到使用[异步模块定义 (AMD)](https://github.com/amdjs/amdjs-api/wiki/AMD)格式，这需要一种新的方式来加载它的模块。[您可以在此处](http://dojotoolkit.org/documentation/tutorials/1.7/modules/)阅读有关如何在 AMD 中构建和引用 Dojo 模块的信息。

该[`window`对象](http://www.w3schools.com/jsref/obj_window.asp)是 JavaScript 中的顶级对象。通过将函数添加到`window`对象，它们可以全局使用。

# orbeon - 如何将请求参数传递给“persistence-model.xml”中的“fr-workflow-send-submission”？

> ID：11233116
> 
> 赞同：0
> 
> 时间：2012-06-27T18:52:32.600
> 
> 标签：orbeon

如何将请求参数传递给“persistence-model.xml”中的“fr-workflow-send-submission”？例如，如果我打开一个表单：

.../orbeon..?myRequestParameter=myRequestParameterValue

然后将 myRequestParameter 传递给“oxf.fr.detail.send.success.uri *...* ”

我尝试执行以下操作：

```
 <xforms:model id="fr-persistence-model"....

                                  ....

            <xxforms:variable name="parameters" value="xxforms:instance('fr-parameters- instance')" as="element()"/>
            <xxforms:variable name="app" value="$parameters/app" as="xs:string"/>
            <xxforms:variable name="form" value="$parameters/form" as="xs:string"/>
            <xxforms:variable name="document" select="$parameters/document"/>
            <xxforms:variable name="mode" select="$parameters/mode"/>

                                  ....

            <xxforms:variable name="myVariable"/>

                                  ....

            <xforms:action ev:event="xforms-model-construct-done" if="$app != '*' and $form != '*'">

                                  ....

                    <xforms:setvalue ref="$myVariable" value="xxforms:get-request-parameter('myRequestParameter')">

                                  ....

           <xforms:submission id="fr-workflow-send-submission"
                  resource="{$workflow-success-uri}?myRequestParameter={$myVariable}"
                  relevant="{xxforms:property(string-join(('oxf.fr.detail.send.success.prune', $app, $form), '.'))}"
                  validate="false" method="{$workflow-success-method}"
                  serialization="{if ($workflow-success-method = 'get') then 'none' else 'application/xml'}"
                  ref="if (instance('fr-workflow-send-instance') != '') then instance('fr-workflow-send-instance') else xxforms:instance('fr-form-instance')"
                  replace="all"/>

                                  .... 
```

并且变量“myVariable”始终为空。

我还尝试对“xforms-model-construct-done”事件进行插入：

```
 ....
                  <xxforms:variable name="parameters" value="xxforms:instance('fr-parameters- instance')" as="element()"/>
                  <xxforms:variable name="myVariable" select="$parameters/myRequestParameter"/> 

                                      ....
//on xforms-model-construct-done
        <xforms:action>
            <xxforms:variable name="myRequestParameter-name" select="'myRequestParameter'"/>
            <xxforms:variable name="myRequestParameter-value" select="xxforms:get-request-parameter($myRequestParameter-name)"/>
            <xforms:insert context="instance('fr-parameters- instance')" origin="xxforms:element($myRequestParameter-name, $myRequestParameter-value)"/>
        </xforms:action>

                                      .... 
```

但“myVariable”仍然是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T21:42:19.310

你不能`<xforms:setvalue>`在变量上使用，当你定义一个变量时，你还需要说明它的值是什么`<xxforms:variable name="myVariable" value="xpath"/>`，或者如果使用最近的构建（以及即将推出的 Orbeon Forms 4.0）：，`<xforms:var name="myVariable" value="xpath"/>`因为[变量](http://www.w3.org/MarkUp/Forms/wiki/XForms_2.0#The_var_element)正在进入XForms 2.0。

这里你想要的是一个实例。尝试替换：

1.  `<xxforms:variable name="myVariable"/>`和`<xforms:instance id="myInstance"><instance></xforms:instance>`
2.  `$myVariable`和`instance('myInstance')`

# c# - Entity Framework 5 rc Code First 指定架构以在下创建表？

> ID：11233119
> 
> 赞同：0
> 
> 时间：2012-06-27T18:52:38.197
> 
> 标签：c#, ef-code-first, entity-framework-5

使用 EF 5 RC 在使用 Code First 过程时指定在哪些架构表下创建的正确方法是什么？我试过了：

```
 protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {

        modelBuilder.Entity<Metric>().ToTable("Metrics", "Dashboard");
    } 
```

但创建的 SQL 脚本无法识别架构，并将所有表都置于 dbo 架构下。

TIA

Ĵ

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-06-27T20:05:46.480

如果您右键单击 EDMX 设计器界面并转到属性，您可以设置该图表的架构。因此，如果您想将不同的实体/表放在不同的模式中，则必须将它们保持在单独的设计表面上。

# sql - 使用带有 MAX() 的 GROUP BY 作为聚合与 ROW_NUMBER 在分区上是否存在性能差异？

> ID：11233125
> 
> 赞同：11
> 
> 时间：2012-06-27T18:53:06.140
> 
> 标签：sql, sql-server-2008, group-by, database-partitioning

以下2个查询之间是否存在性能差异，如果是，那么哪个更好？：

```
 select 
    q.id, 
    q.name 
    from(
        select id, name, row_number over (partition by name order by id desc) as row_num
from table
    ) q
        where q.row_num = 1 
```

相对

```
select
max(id) ,
name
from table
group by name 
```

（结果集应该是一样的）

这是假设没有设置索引。

更新：我对此进行了测试，并且`group by`速度更快。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-11-16T21:08:13.083

我有一个大约 450 万行的表，我用 GROUP BY 编写了一个 MAX 以及一个 ROW_NUMBER 解决方案，并对它们进行了测试。MAX 需要对表进行两次集群扫描，一次进行聚合，另一次连接到其余列，而 ROW_NUMBER 只需要一次。（显然可以对其中一个或两个进行索引以最小化 IO，但关键是 GROUP BY 需要两次索引扫描。）

根据优化器的说法，在我的例子中，根据子树成本，ROW_NUMBER 的效率提高了大约 60%。而且据统计IO，CPU时间减少了约20%。但是，在实际经过的时间内，ROW_NUMBER 解决方案需要多出大约 80% 的实时时间。所以 GROUP BY 在我的情况下获胜。

这似乎与此处的其他答案相匹配。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T19:05:29.120

group by 应该更快。行号必须为表中的所有行分配一行。它会在过滤掉它不想要的之前执行此操作。

到目前为止，第二个查询是更好的构造。首先，您必须确保分区子句中的列与您想要的列相匹配。更重要的是，“group by”在 SQL 中是一个很好理解的结构。我还推测 group by 可能会更好地利用索引，但这是推测。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T19:03:30.910

我会使用`group by name`.

`name, id DESC`当索引为（[计划1](http://i.stack.imgur.com/VieCD.png)）时，它的内容不多

但是如果索引被声明为`name, id ASC`（[计划 2](http://i.stack.imgur.com/DfGa6.png)），那么在 2008 年我看到该`ROW_NUMBER`版本无法使用该索引并进行排序操作，而`GROUP BY`能够使用向后索引扫描来避免这种情况。

您需要检查您的 SQL Server 版本以及您的数据和索引上的计划以确定。

# python - 如何清理数据库，使用 sqlalchemy 删除所有记录？

> ID：11233128
> 
> 赞同：32
> 
> 时间：2012-06-27T18:53:22.583
> 
> 标签：python, sqlalchemy

我正在使用 SQLAlchemy。我想有效地删除数据库中存在的所有记录，但我不想删除表/数据库。

我尝试使用以下代码。

```
con = engine.connect()
trans = con.begin()

con.execute(table.delete())
trans.commit() 
```

看起来，这不是一个非常有效的方法，因为我正在迭代数据库中存在的所有表。有人可以建议我这样做更好更有效的方法吗？

任何形式的帮助都非常感谢这里。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-06-27T20:16:03.910

如果您的模型依赖于现有的数据库模式（通常使用`autoload=True`），则无法避免删除每个表中的数据。[`MetaData.sorted_tables`](http://docs.sqlalchemy.org/en/latest/core/metadata.html#accessing-tables-and-columns)派上用场：

```
for tbl in reversed(meta.sorted_tables):
    engine.execute(tbl.delete()) 
```

如果您的模型确实定义了完整的模式，那么没有比[`drop_all`](http://docs.sqlalchemy.org/en/latest/core/metadata.html#sqlalchemy.schema.MetaData.drop_all)/更简单的了[`create_all`](http://docs.sqlalchemy.org/en/latest/core/metadata.html#sqlalchemy.schema.MetaData.create_all)（正如 @jadkik94 已经指出的那样）。

*此外，`TRUNCATE`无论如何都不能在 引用的表上工作[`ForeignKeys`](http://docs.sqlalchemy.org/en/latest/core/constraints.html#sqlalchemy.schema.ForeignKey)，这显着限制了使用。*

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-02-25T23:35:03.447

对我来说，投入`tbl.drop(engine)`工作，但不是`engine.execute(tbl.delete())`

SQLAlchemy 0.8.0b2 和 Python 2.7.3

# ruby-on-rails - Rails 重构 - 计算属性名称

> ID：11233129
> 
> 赞同：0
> 
> 时间：2012-06-27T18:53:27.507
> 
> 标签：ruby-on-rails, refactoring

我有一行代码计算所有以 结尾的属性名称`_cui_id`：

```
cuis_count = self.attribute_names.map { |x| x.include?("_cui_id") }.count(true) 
```

重构它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:02:55.393

Count 可以将块作为参数：

```
cuis_count = self.attribue_names.count{|x|x.include?("_cui_id")} 
```

这样可以节省您的地图调用

# node.js - 使用 NPM 安装包时，你能告诉它使用其依赖项之一的不同版本吗？

> ID：11233133
> 
> 赞同：68
> 
> 时间：2012-06-27T18:53:41.150
> 
> 标签：node.js, dependencies, npm

假设您要安装一个`lib-a`具有依赖项的库，`dep-1`并且`dep-2`. 如果`lib-a`已在其 package.json 中声明使用`dep-2`已过期的版本（例如它不适用于刚刚发布的节点 0.8.0），但有一个分支`dep-2`适用于节点 0.8.0 -分支名称`node0.8.0`。

所以等式中的包是：

```
git://github.com/user-a/lib-a
git://github.com/user-b/dep-1
git://github.com/user-c/dep-2
git://github.com/user-c/dep-2#node0.8.0 
```

有没有办法告诉 NPM 安装`lib-a`，但使用`dep-2#node0.8.0`而不是`dep-2`？

使用 NPM，您可以安装项目的特定分支，如下所示：

```
npm install git://github.com/user-c/dep-2#node0.8.0 
```

如果我要自定义 package.json 的`lib-a`，你可以告诉它`dep-2#node0.8.0`像这样使用：

```
{
  "name": "lib-a",
  "dependencies": {
    "dep-1": ">= 1.5.0",
    "dep-2": "git://github.com/user-c/dep-2#node0.8.0"
  }
} 
```

通过修改 package.json 你可以运行

```
npm install lib-a 
```

它将安装节点 0.8.0 兼容`dep-2`分支。但是，这要求我可以访问 modifying `lib-a`，而对于我的具体情况，我没有。从技术上讲，我可以分叉`lib-a`并对 package.json 进行上述更改。但在我的具体情况下，`lib-a`是*另一个*库的依赖项，所以我必须分叉它所引用的项目，等等......

所以问题是，有没有办法告诉 NPM 安装`lib-a`，并告诉它使用的`node0.8.0`分支`dep-2`？像这样的东西：

```
npm install lib-a --overrides dep-2:git://github.com/user-c/dep-2#node0.8.0 
```

那将是真棒。如果这是不可能的，那会很高兴知道这样我就可以准备好分叉/自定义项目链。

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2012-06-27T19:10:56.010

**NPM 安装语法：**

```
npm install (with no args in a package dir)
npm install <tarball file>
npm install <tarball url>
npm install <folder>
npm install [@<scope>/]<name> [--save|--save-dev|--save-optional] [--save-exact]
npm install [@<scope>/]<name>@<tag>
npm install [@<scope>/]<name>@<version>
npm install [@<scope>/]<name>@<version range>
npm i (with any of the previous argument usage) 
```

因此您可以选择其中一种方法来安装您的模块。

安装特定版本的最简单方法是这种情况：

```
npm install module@0.0.2 
```

更多信息： [https ://docs.npmjs.com/cli/install](https://docs.npmjs.com/cli/install)

# mysql - 当所有日期都采用时间戳格式时，获取 mysql 日期提前 3 天

> ID：11233134
> 
> 赞同：0
> 
> 时间：2012-06-27T18:53:41.900
> 
> 标签：mysql

我将所有日期作为时间戳（int）存储在数据库中。

我怎样才能得到恰好提前 3 天的日期？

我试过

```
SELECT date from user WHERE  DATE_ADD(DATE( FROM_UNIXTIME( `created` ) ), INTERVAL 3 DAY) = CURDATE() 
```

这是最好/最有效的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T18:58:18.010

我认为数据库更喜欢只将日期添加 2 次来定义范围，例如：

```
SELECT date FROM user
WHERE UNIX_TIMESTAMP(DATE_ADD(CURDATE(), INTERVAL -3 DAY)) <= `created`
AND `created` < UNIX_TIMESTAMP(DATE_ADD(CURDATE(), INTERVAL -2 DAY)); 
```

测试在这两种情况下都将 DESCRIBE 关键字放在 SELECT 之前，并且数据库会响应它将如何执行查询

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:05:25.563

```
SELECT date
FROM user
WHERE created = UNIX_TIMESTAMP(CURRENT_DATE - INTERVAL 3 DAY) 
```

注意：`created`where 子句中的列上没有使用函数。这个查询应该可以使用索引。

# r - 使变量在R中保留尺寸

> ID：11233137
> 
> 赞同：1
> 
> 时间：2012-06-27T18:53:48.260
> 
> 标签：r

我正在尝试调整一些（对我而言）非常复杂的代码来处理我的数据。

我认为我的问题的症结在于，当我从二维矩阵开始时，我的一些变量会丢失维度，我需要知道如何让变量保留它们的维度。

我从两个变量`e`（data.frame）开始，其中一部分看起来像这样：

```
e <- 
structure(list(X2hr = c(0.106, 0, 0, 0, 0.01, 0.042), X6hr = c(1, 
0.083, 0.006, 0, 1, 0.967), X12hr = c(0.049, 0.057, 0.098, 0.405, 
0.046, 0.029), X24hr = c(0.264, 0.301, 0.025, 0.15, 0.58, 0.487
), X36hr = c(0.284, 1, 0.114, 1, 0.671, 1), X48hr = c(0.274, 
0.235, 0.299, 0.253, 0.617, 0.636), X72hr = c(0.098, 0.021, 1, 
0.325, 0.283, 0.35)), .Names = c("X2hr", "X6hr", "X12hr", "X24hr", 
"X36hr", "X48hr", "X72hr"), row.names = c("cgd1_10", "cgd1_100", 
"cgd1_1000", "cgd1_1010", "cgd1_1020", "cgd1_1030"), class = "data.frame") 
```

和`m`（一个二维矩阵，一列 2913 行），其中一部分如下所示：

```
m <- 
structure(c(0, 0, 1.174805088, 1.174805088, 0, 0), .Dim = c(6L, 
1L), .Dimnames = list(c("cgd1_10", "cgd1_100", "cgd1_1000", "cgd1_1010", 
"cgd1_1020", "cgd1_1030"), "X4_1110_2.motif2")) 
```

我加载 glmnet 包定义了两个函数，`IDC.glmnet`并且`PBM.glmnet.getCoefs`：

```
library(glmnet)
IDC.glmnet <- function(e, m, mode="coef", randomize=F, alpha=0.5) {
  nona  <- !is.na(e)
  enona <- e[nona]
  mnona <- m[nona,]
  if(ncol(m)==1)
    dim(mnona) <- c(sum(nona),ncol=1)
  e.cv <- cv.glmnet( mnona, enona, nfolds=10)
  l <- e.cv$lambda.min
  #print(l)
  if (randomize == TRUE) {
    enona <- sample(enona)
  }
  e.fits <- glmnet( mnona, enona, family="gaussian", alpha=alpha, nlambda=100)
  if (mode == "predict") {
    cor.test(predict(e.fits, mnona, type="response", s=l), enona)$estimate
  } else {
    as.matrix(predict(e.fits, s=l, type="coefficients")[-1,])
  }
}

PBM.glmnet.getCoefs <- function(e, m, alpha=0.05, randomize=F, center=FALSE) {
  e.coef <<- apply(e, 2, IDC.glmnet, m, mode="coefficients",
                   alpha=alpha, randomize=randomize)
  if (dim(e)[2] > 1) { 
    e.coef.s <- t(apply(e.coef, 1, scale, center=center))
  } else {
    e.coef.s <- e.coef
  } 
  rownames(e.coef.s) <- colnames(m)
  colnames(e.coef.s) <- colnames(e)
  e.coef.s
} 
```

然后我尝试`PBM.glmnet.getCoefs`对我的变量执行：

```
coefs <- PBM.glmnet.getCoefs(e, m) 
```

我收到以下错误消息：

```
Error in t(apply(e.coef, 1, scale, center = center)) : 
  error in evaluating the argument 'x' in selecting a method for function 't':
  Error in apply(e.coef, 1, scale, center = center) : 
    dim(X) must have a positive length 
```

当我将单列矩阵用于`m`. 如果我有多个列，它工作正常。但我不能使用多列，因为它会扭曲结果，我真的需要能够使用单列`m`。从我有限的故障排除能力来看，我认为`PBM.glmnet.getCoefs`函数中的这一行是问题开始的地方：

```
e.coef <<- apply(e, 2, IDC.glmnet, m, mode="coefficients",
                 alpha=alpha, randomize=randomize) 
```

`e.coef`当我使用单列时是一个向量`m`。然后由于`e.coef`是无量纲的，我得到了`t(apply)`上面列出的错误。

`e.coef`看起来像这样：

```
> e.coef   
        X2hr         X6hr        X12hr        X24hr        X36hr        X48hr 
 0.025701875  0.004066947  0.043836383  0.020151361  0.003512643 -0.035211133 
       X72hr 
-0.034503722 
```

如何确保`e.coef`保留正确的尺寸（1 行和 7 列，从 的顶行获取的列标题，`e`在函数中某处确定的行值`IDC.glmnet`）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T22:24:03.833

您正确识别了导致问题的线路。该问题在“*值*”部分中描述`?apply`：“如果 'MARGIN' 的长度为 1，'apply' 返回一个向量”。

因此，请进行此小改动以确保尺寸正确：

```
PBM.glmnet.getCoefs <-
function(e, m, alpha=0.05, randomize=F, center=FALSE ) {
   e.coef <<- apply(e, 2, IDC.glmnet, m, mode="coefficients",
                    alpha=alpha, randomize=randomize)
   dim(e.coef) <<- c(ncol(m), ncol(e))
   if (dim(e)[2] > 1) { 
     e.coef.s <- t(apply(e.coef, 1, scale, center=center))
   } else {
     e.coef.s <- e.coef
   }    
   rownames(e.coef.s) <- colnames(m)
   colnames(e.coef.s) <- colnames(e)
   e.coef.s
} 
```

# python - 有没有办法在 openpyxl 中获取工作簿的名称

> ID：11233140
> 
> 赞同：2
> 
> 时间：2012-06-27T18:54:13.380
> 
> 标签：python, excel, openpyxl

有一个 worksheet.title 方法，但没有 workbook.title 方法。查看文档没有明确的方法可以找到它，我不确定是否有人知道解决方法或技巧来获得它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:10:41.877

工作簿并没有真正的名称 - 通常你只会认为它是它保存为的文件的基本名称......*轻微更新*- 是的，即使在 VB WorkBook.Name 只是返回“disk.xls 上的文件”

# javascript - jquery加载页面片段加载双div ids

> ID：11233142
> 
> 赞同：2
> 
> 时间：2012-06-27T18:54:22.550
> 
> 标签：javascript, jquery

```
$('#cart').load('shop.php/ #cart'); 
```

所以我想重新加载我页面的购物车部分，但它正在将其加载到原始 div id 中，如下所示：

```
<div id="cart">
    <div id="cart">
       // everything loaded fine here
    </div>
</div> 
```

我只想让它显示一个 div，我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T19:05:45.230

你做的一切都是正确的。但是，在 jQuery 中[加载页面片段](http://api.jquery.com/load/)的工作方式如下：

> ```
> $('#result').load('ajax/test.html #container'); 
> ```
> 
> 当这个方法执行时，它会检索*ajax/test.html*的内容，然后 jQuery 会解析返回的文档以找到 ID 为 container 的元素。该元素及其内容被插入到 ID 为 result 的元素中，其余检索到的文档将被丢弃。

所以它也*将*包括容器。要包含内部内容，请仅使用以下内容：

```
$("#cart").load("shop.php/ #cart > *");​​​​​​​​​​​ 
```

# ruby-on-rails - 将用户发送到他们当前的 url 位置？如何？

> ID：11233145
> 
> 赞同：0
> 
> 时间：2012-06-27T18:54:27.053
> 
> 标签：ruby-on-rails, navigation, twitter-bootstrap, action, modal-dialog

我正在使用 twitter bootstrap 并有一个固定的导航栏。导航栏有一个按钮，用于启动模式提示用户输入。完成后，用户按“发送 btn”。由于我的模式是如何编写的，它会将用户发送到我网站上的另一个位置。

```
<%= form_tag(:controller => "home", :action => "send_maill") do %> 
```

一旦用户按下“发送”，我希望用户回到他们当前的位置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:00:07.297

您可以尝试将 AJAX 添加到您的表单中。您可以通过添加`:remote => true`到您的 form_tag 来做到这一点。然后该动作将被 AJAX 击中。然后，您也许可以将通知添加到控制器中。

`flash.now[:notice] = 'Congratulations, your mail has been sent`

在 send_mail.js.erb 中，可以通过以下 javascript 显示 flash 通知。您可能必须根据您的实现更改 id 和类。

```
$("#notice").html("<%= escape_javascript(flash.now[:notice]) %>");
$(".flashes").fadeIn(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:00:06.317

这应该工作

```
def send_mail
  # do your stuff
  redirect_to :back
end 
```

# php - php 获取基于字符串的数组的键

> ID：11233152
> 
> 赞同：0
> 
> 时间：2012-06-27T18:54:51.163
> 
> 标签：php, arrays

> **可能重复：**
> [如何在 PHP 中的多维数组中按 key=>value 搜索 PHP 在多维数组中](https://stackoverflow.com/questions/1019076/how-to-search-by-key-value-in-a-multidimensional-array-in-php)
> [搜索 Key](https://stackoverflow.com/questions/4388967/php-search-for-key-in-multidimensional-array)

如何在数组值中搜索并获取密钥？

示例：搜索 id 1 = key 0 或搜索 name Frank = key 1

```
Array
(
    [0] => Array
    (
        [id] => 1
        [name] => Bob
        [url] => http://www.bob.com.br
    )

[1] => Array
    (
        [id] => 2
        [name] => Frank
        [url] => http://www.frank.com.br
    )
) 
```

谢谢。阿德里亚诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:00:26.200

使用[array_search](http://us2.php.net/manual/en/function.array-search.php)

```
foreach($array as $value) {
    $result = array_search('Frank', $value);
    if($result !== false) break;
}
echo $result 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:05:47.790

如果您不知道深度，可以执行以下操作，其中使用了 RecursiveIteratorIterator 和 RecursiveArrayIterator：

```
<?php
/*******************************
*   array_multi_search
*
*   @array  array to be searched
*   @input  search string
*
*   @return array(s) that match
******************************/
function array_multi_search($array, $input){
    $iterator = new RecursiveIteratorIterator(new RecursiveArrayIterator($array));  

    foreach($iterator as $id => $sub){
        $subArray = $iterator->getSubIterator();  

        if(@strstr(strtolower($sub), strtolower($input))){
    $subArray = iterator_to_array($subArray);
            $outputArray[] = array_merge($subArray, array('Matched' => $id));
        }
    }  

    return $outputArray;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:20:24.390

不要认为有一个预定义的功能，但这里有一个：

```
function sub_array_search($array, $sub_key, $value, $strict = FALSE)
{
   foreach($array as $key => $sub_array)
   {
      if($sub_array[$sub_key] == $value)
      {
         if(!$strict OR $sub_array[$sub_key] === $value)
         {
            return $key;
         }
      }
   }

   return FALSE;
} 
```

# wpf - 设置 Image 的 ToolTip 的前景色

> ID：11233153
> 
> 赞同：1
> 
> 时间：2012-06-27T18:54:54.003
> 
> 标签：wpf

如何为单个图像的工具提示设置前景色？（页面上有多个图像控件，但我只想将样式应用于一个）

安德鲁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:57:42.120

对于要设置前景的图像，添加以下 xaml 代码：

```
<Image Name="image1" Source="Untitled.png">
        <Image.ToolTip>
            <ToolTip Foreground="Red">
                <StackPanel>
                    <TextBlock FontWeight="Bold">Submit Request</TextBlock>
                    <TextBlock>Submits the request to the server.</TextBlock>
                </StackPanel>
            </ToolTip>
        </Image.ToolTip>
</Image> 
```

**Foreground="Red"**设置该特定工具提示的前景颜色。

**输出：**

![一张图片的工具提示上的红色前景](../Images/d69b69db73065b8fef9c3b677125011d.png)

**来源：** [http ://wpftutorial.net/ToolTip.html](http://wpftutorial.net/ToolTip.html)

# asp.net-mvc-3 - 使用 MSDeploy 部署 DevArt 实体框架

> ID：11233154
> 
> 赞同：2
> 
> 时间：2012-06-27T18:54:57.583
> 
> 标签：asp.net-mvc-3, entity-framework, devart

场景第一：-

我正在使用 Entity Framework 进行一些查询，以构建我的模型我正在 MVC3 项目中尝试 DevArt Entity Developer。我构建应用程序上传到 SVN，然后持续集成服务器将其拾取（Bamboo）构建并使用 MSDeploy 部署。

但是由于某种原因，部署似乎存在问题，因为 MSDeploy 需要在部署文件之前提前了解文件，这意味着`'.csdl', '.ssdl', or '.msl'`文件没有部署到远程计算机上。

```
System.Data.MetadataException: Unable to load the specified metadata resource. 
```

现在，如果我将 DevArt 从 EmbedInOutputAssembly 设置为 CopyToOutputDirectory，web.config 文件将更改表单

`<add name="jcps01EntitiesConnectionString" connectionString="metadata=res://*/Models.jcps01.csdl|res://*/Models.jcps01.ssdl|res://*/Models.jcps01.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=XXXXX;Initial Catalog=jcps01;Integrated Security=False;Persist Security Info=True;User ID=XXXXX;Password=XXXXX&quot;"`

到

`<add name="jcps01EntitiesConnectionString" connectionString="metadata=~/bin/Models/jcps01.csdl|~/bin/Models/jcps01.ssdl|~/bin/Models/jcps01.msl;provider=System.Data.SqlClient;provider connection string=&quot;Data Source=XXXXX;Initial Catalog=jcps01;Integrated Security=False;Persist Security Info=True;User ID=XXXXX;Password=XXXXX&quot;" providerName="System.Data.EntityClient" />`

然而，这有它自己的一系列问题，首先是应用程序没有创建模型文件夹，它只是创建文件`/bin/Models.jcps01.msl`，当然，由于文件不包含在项目/解决方案中，MSDeploy 没有部署它:|

有没有人在使用 MSDeploy 和 DevArt 之前取得过任何成功，如果是这样，您是否必须对文件的解决方案进行任何更改以复制到输出目录等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-02T15:44:35.373

这是由于构建服务器没有安装 DevArt Entity Developer，通常部署 .cs 文件就足够了，但对于 DevArt，我们也需要在构建服务器上安装他们的工具。

一旦安装了它，事情就开始工作了（即生成映射文件并自动添加到程序集文件中）。

令人惊讶的是，MSBuild 从未抛出关于没有此应用程序或无法读取外部文件格式的错误。

# jquery - 防止单击复选框时自定义 Knockout/jQuery 扩展器的展开/折叠

> ID：11233157
> 
> 赞同：0
> 
> 时间：2012-06-27T18:55:03.350
> 
> 标签：jquery, knockout.js, knockout-2.0

*这是一个参考这个问题的小提琴：http: [//jsfiddle.net/CJRDQ/3/](http://jsfiddle.net/CJRDQ/3/)*

我创建了一个简单的自定义扩展器，如下所示：

```
<div class="ui-expander">
  <h3 class="ui-expander-head">...</h3>
  <div class="ui-expander-content">...</div>
</div> 
```

扩展器的功能是通过自定义 Knockout.js 绑定和一些 jQuery 实现的（[使用自定义绑定是为了解决由`with`绑定](https://stackoverflow.com/questions/9209468/knockout-js-the-with-binding-breaks-the-jquery-ui)创建的问题）。

```
ko.bindingHandlers.expand = {
    init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
        if ($(element).hasClass('ui-expander')) {
            var expander = element;
            var head = $(expander).find('.ui-expander-head');
            var content = $(expander).find('.ui-expander-content');

            $(head).click(function () {
                $(head).toggleClass('ui-expander-head-collapsed')
                $(content).toggle();
            });
        }
    }
}; 
```

除非扩展器头中有可点击的控件，否则这将按预期工作。在我当前的场景中，我需要在扩展头中提供一个复选框来过滤视图模型中的结果：

```
<div class="ui-expander" data-bind="expand: true">
    <h3 class="ui-expander-head">
        <span class="ui-expander-toggle">[-]</span> Expander Title
        <input id="cbx" type="checkbox" data-bind="checked: showAll" /> <label for="cbx">Show All</label>
    </h3>
    <div class="ui-expander-content">
        Expander Content
    </div>
</div> 
```

如果我单击标签，则不会触发展开/折叠行为，并且选中/取消选中相应的复选框（需要）。但是，如果我直接单击复选框，**则会触发**展开/折叠并选中/取消选中相应的复选框（不需要）。

我需要能够在不触发展开/折叠的情况下单击复选框和/或标签，但如果单击扩展器头的任何其他部分，则保持展开/折叠。需要做些什么来满足这些要求？

同样，我提供了一个小提琴供参考：http: [//jsfiddle.net/CJRDQ/3/](http://jsfiddle.net/CJRDQ/3/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:58:37.447

您可以添加一个单击处理程序并在事件上调用 stopPropagation() 以防止它传播到标题并返回 true，因此它仍将由复选框处理以更改状态。如果您希望它能够更改复选框的状态并且不触发展开或折叠，您还需要将处理程序添加到标签：

```
<input id="cbx" type="checkbox" data-bind="checked: showAll, click: preventClick" />
<label for="cbx" data-bind="click: preventClick"> 
```

查看型号：

```
this.preventClick = function(data, event) {
    event.stopPropagation();
    return true;
}; 
```

[http://jsfiddle.net/HGxc6/](http://jsfiddle.net/HGxc6/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:19:25.340

您的要求对我来说似乎有点令人困惑。这个更新的小提琴是你要找的吗：http: [//jsfiddle.net/photo_tom/CJRDQ/6/](http://jsfiddle.net/photo_tom/CJRDQ/6/)

# javascript - chrome 扩展上的 $.getJSON 无法正常工作

> ID：11233161
> 
> 赞同：0
> 
> 时间：2012-06-27T18:55:35.153
> 
> 标签：javascript, jquery, ajax, google-chrome, google-chrome-extension

我正在创建一个 chrome 扩展，并希望能够从用户名中获取个人资料图片。不幸的是，该网站没有 api，并且配置文件 URL 和配置文件名称之间没有关联。我想我可以劫持搜索 ajax 并使用它来实现我的目标。不幸的是，它似乎不起作用。我已经添加了权限，但它没有在内容脚本中运行，但它仍然无法正常工作。

```
$.getJSON("http://www.website.com/user/search",{user:name},function(a){
    alert(1);
    alert(a.data);
}); 
```

它默默地失败，因为没有发生任何事情。然而，我不知道为什么。我应该从调用中收到的 json（手动浏览到站点）是： {"error":false,"action":null,"one":true,"data":143217} 不幸的是，它不起作用。JSONP 不是一个选项，因为该站点显然不需要支持它，所以请帮助我。我看不出我做错了什么。

编辑：我看到了问题。当我尝试执行请求时，我被重定向到失败的用户/搜索（没有？用户）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:34:08.133

您尝试访问的站点需要进行身份验证才能进行搜索。您不会从您的 ajax 请求中得到响应，因为服务器正在寻找具有登录凭据的会话以允许搜索发生。因为您的 ajax 没有经过身份验证，并且没有建立会话，所以您的请求不会“失败”，它只是获取服务器的 302 重定向响应。

您需要“登录”到您尝试查询的页面，以便建立会话和任何必要的变量，然后才能继续进行用户搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T18:59:10.443

网站的搜索 API 完全有可能没有将`Content-type`标头返回为`text/json`，这是`$.getJSON`正常运行所必需的。

尝试简单地使用`$.get`和调用`JSON.parse`返回的数据。

# android - 没有找到我的消息来源

> ID：11233163
> 
> 赞同：0
> 
> 时间：2012-06-27T18:55:43.667
> 
> 标签：android, eclipse

好的，所以我正在尝试让我的应用程序在我的手机上运行，​​看看它是否有效。我注意到我想打电话的按钮没有做任何事情。这是代码：

```
public boolean onStart(Bundle savedInstanceState) {
View callButton2 = null;
callButton2.setOnClickListener(new OnClickListener() {

     public void onClick(View v) {
         try {
             Intent i = new Intent(Intent.ACTION_CALL);
             String p = "tel:" + getString(R.string.phoneNumber);
             i.setData(Uri.parse(p));
             startActivity(i);
         } catch (ActivityNotFoundException activityException) {
             Log.e("Calling a Phone Number", "Call failed", activityException);}
         finally{}
     } 
```

我将权限放在 Manifest 文件中，但它仍然不起作用。因此，我进行了调查，发现实际上没有找到我的消息来源。这会严重破坏我的应用程序，还是无关紧要？另外，我如何让他们回来？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:58:08.840

从您调用此函数的位置“onStart（Bundle savedInstanceState）”

```
public boolean onStart(Bundle savedInstanceState) {

 View callButton2 = null;
 callButton2.setOnClickListener(new OnClickListener() { // <--- 
```

此行将引发 NPE 错误。

因此，当您的应用程序正在运行时，我们不会调用此函数`public boolean onStart(Bundle savedInstanceState)`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:09:51.040

方法`onStart()`应该是

```
public void onStart()
{
    super.onStart();
    ...
} 
```

因为方法不正确，Android在`Activity Lifecycle`. 尝试修复它，然后把你的`OnClickListener`里面。

编辑：另外，初始化你的`Views`in`onCreate()`而不是`onStart()`.

就像 Dheeresh Singh 说的那样，你也会`NullPointerException`因为你将你的分配`Button`为空而崩溃。您首先需要通过调用或在代码中创建它来将其分配给`Button`布局中的 a。`findViewById()`现在你基本上是在打电话`null.setOnClickListener()`，这没有任何意义。

# iphone - 从 php 身份验证目标 c 获取 JSON 对象

> ID：11233164
> 
> 赞同：1
> 
> 时间：2012-06-27T18:55:45.033
> 
> 标签：iphone, ios, xcode, json, web-services

我正在尝试使用以下代码进行身份验证

```
NSString *urlAsString =[NSString stringWithFormat:@"http://www.myurl.com/abc/authenticate.php"];

    NSURL *url = [NSURL URLWithString:urlAsString];

    NSMutableURLRequest *urlRequest = [NSMutableURLRequest requestWithURL:url]; 

    [urlRequest setTimeoutInterval:30.0f];

    [urlRequest setHTTPMethod:@"POST"];

    [urlRequest addValue:@"test" forHTTPHeaderField:@"m_username" ];

    [urlRequest addValue:@"123" forHTTPHeaderField:@"m_password" ];

    [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];

    NSOperationQueue *queue = [[NSOperationQueue alloc] init];

    [NSURLConnection sendAsynchronousRequest:urlRequest queue:queue completionHandler:^(NSURLResponse *response,NSData *data, NSError *error) {

        if ([data length] >0 && error == nil){

            html = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

            NSLog(@"HTML = %@", html);

            receivedData = [NSMutableData data];

        }
        else if ([data length] == 0 && error == nil){

            NSLog(@"Nothing was downloaded."); 

        }

        else if (error != nil){

            NSLog(@"Error happened = %@", error);
        } 
    }];

    // Start loading data
    NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:urlRequest delegate:self];
    if (theConnection) 
    {
        // Create the NSMutableData to hold the received data
        receivedData = [NSMutableData data];

    } 
    else {
        // Inform the user the connection failed.

    } 
```

我的用户名密码是正确的，我认为我没有进行正确的调用，这就是为什么我没有得到想要的结果并且 Web 服务正在接收空参数。

可能是什么问题？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:12:22.817

调试的第一步是尝试在浏览器中查看所需的响应或使用类似 fiddler 的东西。查看您正在使用的 url 是什么，并查看实际的 POST 值是什么。提交的用户名/密码在哪里？通常身份验证使用服务器端身份验证，但有时它在 url 本身中。它在您的浏览器中是如何工作的？

根据描述和您的代码，我有点认为您可能包含的字段

```
 [urlRequest addValue:@"test" forHTTPHeaderField:@"m_username" ];
 [urlRequest addValue:@"123" forHTTPHeaderField:@"m_password" ]; 
```

也许应该添加到您发布到的网址中？也许是这样的：

```
NSString *urlAsString =[NSString stringWithFormat:@"http://www.myurl.com/abc/authenticate.php?username/password"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:15:13.637

如果您期待身份验证挑战，您应该使用`connection:didReceiveAuthenticationChallenge:`NSURLConnection 方法

通过添加该方法并包含一个断点，您至少可以看到您的挑战是否正在发生，并且实际上是否得到了正确处理。下面是我如何为项目使用身份验证质询方法的示例

```
 - (void)connection:(NSURLConnection *)connection didReceiveAuthenticationChallenge:(NSURLAuthenticationChallenge *)challenge
 {
     NSURLCredential *credential = [NSURLCredential credentialWithUser:@"username" password:@"passwordvalue" persistence:NSURLCredentialPersistenceForSession];
     [[challenge sender] useCredential:credential forAuthenticationChallenge:challenge];
 } 
```

[https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/AuthenticationChallenges.html#//apple_ref/doc/uid/TP40009507-SW1](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/Articles/AuthenticationChallenges.html#//apple_ref/doc/uid/TP40009507-SW1)

# javascript - Jquery中的多行和多列

> ID：11233166
> 
> 赞同：-1
> 
> 时间：2012-06-27T18:55:48.183
> 
> 标签：javascript, jquery, ajax, jquery-ui

我有一个 jquery 代码，它在一行和多列中显示结果，如下所示

```
function () {
    var i = noDays;
    var days = 30;
    while (i < days) {
        $('tr').append('<td> ' + i + ' </td>');
        i++;
    },
} 
```

当我有超过 10 个结果（10 列）时，行延伸到页面之外

例如，如何将行分成多行？

如果我在 1 行中有 30 列，我想改为 6 列和 5 行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:22:53.430

最好创建一个元素并使用对它的引用，而不是让 jquery 在每次传递中触发一个选择器。

这是一个可行的解决方案及其[jsfiddle](http://jsfiddle.net/styson/Kt4GV/1/)：

```
var $table = $("#myTable");
var i = 1;
var days = 30;
var $tr = $("<tr>");
while (i <= days) {
    $tr.append('<td>' + i++ + '</td>');
    if (i %6 == 1) {
        $table.append($tr);
        $tr = $("<tr>");
    }
};
$("#myTable").append($tr); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:12:20.727

不确定您将数据添加到何处，但请查看此处的代码：http: [//jsfiddle.net/kdst5/1/](http://jsfiddle.net/kdst5/1/) - 在“i”上使用模数运算符可以告诉您何时移动到新行; 此外，`$("tr")`您应该使用特定的选择器，而不是使用 ，不一定是我使用的变量，而是比一般的“每个 TR”选择器更具体的东西。

# mysql - 如何在接受条目的特定时间后锁定数据库？

> ID：11233175
> 
> 赞同：0
> 
> 时间：2012-06-27T18:56:48.490
> 
> 标签：mysql, database

好的..

我正在制作一个 web 基础应用程序，它将连接到一个 sms 网关。它基本上是大学的考勤应用程序。

老师将使用短信更新出勤率。

现在，主要部分-我要做的是，在发送第一条消息10分钟后，老师应该无法更正出勤。即，数据库应该接受同一班级和同一老师的更正或新消息仅在数据库中收到第一次出席后 10 分钟。

因此，仅应阻止从特定号码接收，并且仅当它是针对同一班级时...

我希望问题很清楚：o

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:14:36.303

这不是您应该在数据库级别强制执行的事情，它属于您的应用程序代码。如果您无法在数据库中将时间、数字和班级联系在一起，那么是时候更改您的架构了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:22:57.173

正如 Sean McSomething 所提到的，这不是在数据库级别完成的，这是应该在与数据库交互之前检查的业务逻辑。最佳实践实际上是简单地添加一列，然后在更新之前简单地`time_created`检查间隔是否小于 10 分钟。这是一项非常微不足道的工作，但不要费心尝试在数据库中使用一些存储过程或其他东西来执行此操作，因为它会使您的应用程序几乎无法调试并且非常草率。`NOW()``time_created`

检查是否有活动编号和活动类的行，如果没有-插入，如果有-检查该行的time_created是否大于10分钟前，如果没有-更新，否则忽略。

# mysql - 计算给定月份表中的所有行，而不仅仅是当月添加的行

> ID：11233176
> 
> 赞同：0
> 
> 时间：2012-06-27T18:56:52.473
> 
> 标签：mysql, count

很容易计算所有添加的行，比如说 2011 年 6 月，只需使用

```
GROUP BY YEAR(record_date), MONTH(record_date) 
```

但我想知道如何在给定日期计算表中所有行数的同时做到这一点 - 这还需要计算之前添加的行数。

例如，每月添加 5 行：我希望结果如下所示：一个月内的 5、10、15 等等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:06:45.810

```
SET @total = 0;
SELECT
  Year,
  Month,
  new,
  @total := @total + new AS Total 
FROM (
  SELECT
    YEAR(record_date) AS Year,
    MONTH(record_date) AS Month,
    COUNT(*) AS new
  FROM worktimes
  GROUP BY YEAR(record_date), MONTH(record_date)
 ) AS tmp; 
```

# linux - 在 fd 上实现的计时器

> ID：11233178
> 
> 赞同：1
> 
> 时间：2012-06-27T18:57:01.947
> 
> 标签：linux, timer

为了实现计时器，我目前正在分叉一个使用 SIGALRM 定期唤醒它并将一个字节写入管道的进程。我知道`signalfd`在文件描述符上接收信号，我想对计时器做同样的事情，但我知道的所有计时器机制都使用信号。Linux 是否提供了一种机制来通过文件描述符提供计时器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T18:59:05.903

您可以使用[timerfd_create](http://www.kernel.org/doc/man-pages/online/pages/man2/timerfd_create.2.html)和朋友。这是一个特定于 linux 的系统调用。

# matlab - 从 Matlab 绘图中检索 X 和 Y 值

> ID：11233180
> 
> 赞同：3
> 
> 时间：2012-06-27T18:57:14.393
> 
> 标签：matlab, plot, mouse, datapoint

我有一个绘图图，当我们使用鼠标从绘图图中选择特定数据点时，我想检索 x 和 y 坐标。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T14:32:48.887

另一种选择是使用按钮向下功能：

```
function mouseExample()
    h = plot(rand(10,1), 'o-');
    set(h, 'ButtonDownFcn',@buttonDownCallback)

    function buttonDownCallback(o,e)
        p = get(gca,'CurrentPoint');
        p = p(1,1:2);
        title( sprintf('(%g,%g)',p) )
    end
end 
```

请注意，这不仅适用于“数据点”，而且适用于您单击线条的插值 (x,y) 位置。您可以通过搜索最近的实际点来处理结果，并测试点击是否在合理的半径内以接受它。

显然，正如其他人所指出的那样，仅使用数据游标模式要容易得多......

![截屏](../Images/614de12428ec5f87f6e5147a2927b3d0.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-28T10:18:58.873

即使您没有数据按钮，您也可以通过命令激活数据光标模式[`datacursormode`](http://www.mathworks.de/help/techdoc/ref/datacursormode.html)。如果要存储数据点而不是显示它们，可以使用修改后的更新函数（基于[matlab 文档](http://www.mathworks.de/help/techdoc/ref/datacursormode.html)中给出的示例）：

```
function getDataFromFigure()
% Plots graph and sets up a custom data tip update function
fig = figure;
a = -16; t = 0:60;
plot(t,sin(a*t))

% variable to store data points
myData = [];

% enable data cursor mode
dcm_obj = datacursormode(fig);
set(dcm_obj,'UpdateFcn',@myUpdateFcn)
set(dcm_obj, 'enable', 'on')

% do disable data cursor mode use
% set(dcm_obj, 'enable', 'off')

    function txt = myUpdateFcn(dummy, event_obj)
        % Customizes text of data tips

        % read out data point
        pos = get(event_obj,'Position');

        % store data point
        myData(end+1,:) = pos;

        % no data shown on figure
        txt = {''};

        % or
        % data also shown on figure:
        % txt = {['Time: ',num2str(pos(1))],...
        %         ['Amplitude: ',num2str(pos(2))]};
    end
end 
```

**~edit~**
确保函数`myUpdateFcn`嵌套在主函数中（注意`end`我示例底部的两个），以确保 myData 在函数中是已知的。如果无法嵌套，请将 myData 设为全局变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T19:03:37.223

您的图形顶部有一个名为数据光标的小按钮。点击它，然后双击你的图，你应该得到你想要的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-24T00:13:25.483

您可以使用[Plotly MATLAB API](https://plot.ly/api/matlab)在基于 Web 的图形的悬停上获取文本。

当您将鼠标悬停在某个点上或单击并拖动以进行缩放时，数据会显示出来。[这是](https://plot.ly/MATLAB/script-demos/log-normal-distribution-boxplot-example/)下图的在线版本。下图显示了悬停文本；您还可以单击“数据和图表”链接以在网格中访问图表背后的数据。

注意：我在 Plotly 团队。

```
api_path = '/path/to/plotly';
addpath(api_path);
api_key = 'key';
username = 'username';
signin(username, api_key);

x=ones(3000,1); x(1:1000) = 1; x(1001:2000) = 2; x(2001:3000) = 3;
y=ones(3000,1); y(1:1000) = lognrnd(0,1,1000,1); y(1001:2000) = lognrnd(0,2,1000,1); y(2001:3000) = lognrnd(0,3,1000,1);
s=struct('type','box','jitter',0.5);
layout = struct('title', 'Fun with the Lognormal distribution','yaxis',struct('type','log'));

plotly(x,y, struct('style', s));
response = plotlylayout(layout);
url = response.url
filename = response.filename 
```

![MATLAB 悬停](../Images/eb696481631616e7285ddf005b512eb7.png)

# mysql - Maven 休眠与 Guice-Persist

> ID：11233181
> 
> 赞同：0
> 
> 时间：2012-06-27T18:57:18.480
> 
> 标签：mysql, hibernate, maven, guice, guice-persist

我正在尝试使用 Maven 组织一个 GWT（准确地说是 GWT 平台）项目，该项目使用 Guice-persist 将我的数据对象从 Eclipse 映射回 MySQL。我没有运气。

我的代码基于 GWTP 基本示例的 Maven 配置，我能够开始工作。现在我将 Hibernate 依赖项添加到`pom.xml`文件中，我似乎无法让它再次成功运行。目前，我收到以下错误：

```
1) Error injecting constructor, javax.persistence.PersistenceException: No Persistence provider for EntityManager named myappdb
  at com.gwtplatform.samples.basic.server.ApplicationInitializer.<init>(ApplicationInitializer.java:8)
  while locating com.gwtplatform.samples.basic.server.ApplicationInitializer 
```

我在设置注入器时创建了我的 PersistModule，如下所示：

```
Injector inject = Guice.createInjector(new ServerModule(),
            new DispatchServletModule(), new JpaPersistModule("myappdb"));
inject.getInstance(ApplicationInitializer.class); 
```

我的持久文件如下所示：

```
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
        xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
        xsi:schemaLocation="http://java.sun.com/xml/ns/persistence
        http://java.sun.com/xml/ns/persistence/persistence_1_0.xsd" version="1.0">

    <persistence-unit name="myappdb" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>

        <class>com.gwtplatform.samples.basic.shared.Bird</class>
        <exclude-unlisted-classes>true</exclude-unlisted-classes>
        <properties>
            <property name="hibernate.connection.driver_class" value="com.mysql.jdbc.Driver"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://mydbserver.com/mydbname"/>
            <property name="hibernate.connection.username" value="test123" />
            <property name="hibernate.connection.password" value ="password123" />

            <property name="show_sql" value="true" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.MySQLDialect" />

            <!-- Default is false for backwards compatibility. Should be used on all
                new projects -->
            <property name="hibernate.id.new_generator_mappings" value="true" />

        </properties>
    </persistence-unit>
</persistence> 
```

我的`pom.xml`文件如下：

```
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>

    <parent>
        <groupId>com.gwtplatform</groupId>
        <artifactId>gwtp-samples</artifactId>
        <version>0.7</version>
    </parent>

    <artifactId>gwtp-sample-basic</artifactId>
    <packaging>war</packaging>
    <name>GWTP Samples - basic</name>

    <build>
        <plugins>
            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>gwt-maven-plugin</artifactId>
                <configuration>
                    <logLevel>INFO</logLevel>
                    <style>${gwt.style}</style>
                    <server>com.google.appengine.tools.development.gwt.AppEngineLauncher</server>
                    <hostedWebapp>${webappDirectory}</hostedWebapp>
                    <copyWebapp>true</copyWebapp>
                    <appEngineVersion>${gae.version}</appEngineVersion>
                    <appEngineHome>${gae.home}</appEngineHome>
                    <runTarget>Gwtpsample.html</runTarget>
                    <module>com.gwtplatform.samples.basic.Gwtpsample</module>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-eclipse-plugin</artifactId>
                <configuration>
                    <useProjectReferences>false</useProjectReferences>
            <warSourceDirectory>war</warSourceDirectory>
                <webXml>src/main/webapp/WEB-INF/web.xml</webXml>
                    <additionalBuildcommands>
                        <buildcommand>com.google.gwt.eclipse.core.gwtProjectValidator</buildcommand>
                    </additionalBuildcommands>
                    <additionalProjectnatures>
                        <projectnature>com.google.appengine.eclipse.core.gaeNature</projectnature>
                        <projectnature>com.google.gwt.eclipse.core.gwtNature</projectnature>
                    </additionalProjectnatures>
                </configuration>
                <dependencies>
                    <dependency>
                        <groupId>com.gwtplatform</groupId>
                        <artifactId>gwtp-build-tools</artifactId>
                        <version>${project.version}</version>
                    </dependency>
                </dependencies>
            </plugin>

        </plugins>
    </build>

    <dependencies>
        <!-- Google Web Toolkit dependencies -->
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-user</artifactId>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-servlet</artifactId>
        </dependency>
        <dependency>
            <groupId>com.google.gwt</groupId>
            <artifactId>gwt-dev</artifactId>
        </dependency>

        <!-- AppEngine dependencies
        <dependency>
            <groupId>com.google.appengine</groupId>
            <artifactId>appengine-api-1.0-sdk</artifactId>
        </dependency> -->

        <!-- DI dependencies -->
        <dependency>
            <groupId>com.google.inject</groupId>
            <artifactId>guice</artifactId>
            <version>3.0</version>
        </dependency>
        <dependency>
          <groupId>com.google.inject.extensions</groupId>
          <artifactId>guice-persist</artifactId>
          <version>3.0</version>
        </dependency>
        <dependency>
            <groupId>com.google.inject.extensions</groupId>
            <artifactId>guice-servlet</artifactId>
        </dependency>
        <dependency>
            <groupId>com.google.inject.extensions</groupId>
            <artifactId>guice-assistedinject</artifactId>
        </dependency>
        <dependency>
            <groupId>com.google.gwt.inject</groupId>
            <artifactId>gin</artifactId>
        </dependency>

        <dependency>
            <groupId>mysql</groupId>
            <artifactId>mysql-connector-java</artifactId>
            <version>5.1.10</version>
        </dependency>

        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-core</artifactId>
            <version>3.5.6-Final</version>
        </dependency>
        <dependency>
          <groupId>org.hibernate</groupId>
          <artifactId>hibernate-entitymanager</artifactId>
          <version>3.5.6-Final</version>
        </dependency>
        <dependency>
          <groupId>org.hibernate</groupId>
          <artifactId>hibernate-c3p0</artifactId>
          <version>3.5.6-Final</version>
        </dependency>
        <dependency>
            <groupId>org.hibernate</groupId>
            <artifactId>hibernate-annotations</artifactId>
            <version>3.5.6-final</version>
        </dependency>       
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-api</artifactId>
            <version>1.5.6</version>
        </dependency>
        <!-- concrete Log4J Implementation for SLF4J API-->
        <dependency>
            <groupId>org.slf4j</groupId>
            <artifactId>slf4j-log4j12</artifactId>
            <version>1.5.6</version>
        </dependency>

    </dependencies>

    <profiles>
        <profile>
            <!-- Activate this profile to compile the sample
            including just the adequate GWTP dependencies -->
            <id>default-samples</id>
            <activation>
                <property><name>!gwtp-all</name></property>
            </activation>
            <dependencies>
                <dependency>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>gwtp-mvp-client</artifactId>
                </dependency>
                <dependency>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>gwtp-dispatch-client</artifactId>
                </dependency>
                <dependency>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>gwtp-dispatch-server-guice</artifactId>
                </dependency>
            </dependencies>
        </profile>

        <profile>
            <!-- Activate this profile to compile the sample
            using the compound GWTP dependency (gwtp-all) -->
            <id>gwtp-all-samples</id>
            <activation>
                <property><name>gwtp-all</name></property>
            </activation>
            <dependencies>
                <dependency>
                    <groupId>${project.groupId}</groupId>
                    <artifactId>gwtp-all</artifactId>
                </dependency>
            </dependencies>
        </profile>
    </profiles>
</project> 
```

如您所见，单位名称匹配。此外，我将`persistance.xml`文件保存在`src/main/webapp/META-INF`项目目录中。我尝试使用该`/src/main/webapp/`目录作为war文件的基础以及其中的匹配目录来运行项目`/target/`，但都无法克服此错误。

任何指针将不胜感激！我已经盯着这个看了2天了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T18:34:09.167

将您的 persistence.xml 文件放在 src/main/resources/META-INF 中。

# r - 在 data.table 中分组：如何获得超过 1 列的结果？

> ID：11233183
> 
> 赞同：6
> 
> 时间：2012-06-27T18:57:25.953
> 
> 标签：r, data.table

我有一个`data.table`像这样的对象

```
library(data.table)

a <- structure(list(PERMNO = c(10006L, 10006L, 10015L, 10015L, 20000L, 20000L), 
                    SHROUT = c(1427L, 1427L, 1000L, 1001L, 200L, 200L), 
                    PRC = c(6.5, 6.125, 0.75, 0.5, 3, 4), 
                    RET = c(0.005, -0.005, -0.001, 0.05, -0.002, 0.0031)),
                   .Names = c("PERMNO", "SHROUT", "PRC", "RET"), 
               class = c("data.table", "data.frame"), row.names = c(NA, -6L))

setkey(a,PERMNO) 
```

我需要执行一些计算`PERMNO`，但在这个例子中，我们假设它们只有 2：

```
mktcap <- a[ , tail(SHROUT,n=1)*tail(PRC,n=1),by=PERMNO]
sqret <- a[, sum(RET^2),by=PERMNO] 
```

产生

```
> mktcap
     PERMNO       V1
[1,]  10006 8740.375
[2,]  10015  500.500
[3,]  20000  800.000

> sqret
     PERMNO        V1
[1,]  10006 5.000e-05
[2,]  10015 2.501e-03
[3,]  20000 1.361e-05 
```

我想将这两个函数合二为一，生成一个包含 3 列的矩阵（或 data.table、data.frame 等），第一列与`PERMNO`s，第二个与`mktcap`第三列`sqrt`。

问题是这个分组函数（即`variable[ , function(), by= ]`）似乎只产生两列的结果，一列有键，一列有结果。

这是我尝试（其中之一）来产生我想要的东西：

```
comb.fun <- function(datai) {
     mktcap <- as.matrix(tail(datai[,1],n=1)*tail(datai[,2],n=1),ncol=1)
     sqret <- as.matrix(sum(datai[,3]^2),ncol=1)
     return(c(mktcap,sqret))
}   

myresults <- a[, comb.fun(cbind(SHROUT,PRC,RET)), by=PERMNO] 
```

产生

```
 PERMNO           V1
[1,]  10006 8.740375e+03
[2,]  10006 5.000000e-05
[3,]  10015 5.005000e+02
[4,]  10015 2.501000e-03
[5,]  20000 8.000000e+02
[6,]  20000 1.361000e-05 
```

（结果都在那里，但它们被强制放入一列）。无论我尝试什么，我都无法通过分组来返回一个包含两列以上（或一列以上结果）的矩阵。

是否可以通过分组获得两列或更多列结果`data.table`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:03:57.133

答案（`list()`用于收集几个所需的汇总统计信息）位于`?data.table`帮助文件的优秀示例部分。（从底部向上大约有 20 行）。

```
out <- a[ , list(mktcap = tail(SHROUT,n=1)*tail(PRC,n=1),
                 sqret  = sum(RET^2)),
         by=PERMNO]

out
#    PERMNO   mktcap     sqret
# 1:  10006 8740.375 5.000e-05
# 2:  10015  500.500 2.501e-03
# 3:  20000  800.000 1.361e-05 
```

* * *

**编辑：**

在下面的评论中，Matthew Dowle 描述了一种清理代码的简单方法，其中`j`调用 like`x[i,j,by]`中的参数变得非常长。

在上面的电话中实施他的建议，您可以改为：

```
## 1) Use quote() to make an expression object out of the statement passed to j
mm <- quote(list(mktcap = tail(SHROUT,n=1)*tail(PRC,n=1),
                 sqret  = sum(RET^2)))

## 2) Use eval() to evaluate it as if it had been typed directly in the call
a[ , eval(mm), by=PERMNO]
#    PERMNO   mktcap     sqret
# 1:  10006 8740.375 5.000e-05
# 2:  10015  500.500 2.501e-03
# 3:  20000  800.000 1.361e-05 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:15:40.250

怎么样

```
comb.fun <- function(a) {
 mktcap <- a[ , tail(SHROUT,n=1)*tail(PRC,n=1),by=PERMNO]
 sqret <- a[, sum(RET^2),by=PERMNO]

 return(merge(mktcap,sqret))
} 
```

# sql - 什么是取货台？

> ID：11233184
> 
> 赞同：1
> 
> 时间：2012-06-27T18:57:31.100
> 
> 标签：sql, database

我正在使用 Clarizen API 开发一个小型应用程序。该文档多次引用“拾取表”，但描述

> “拾取表类似于常规实体类型。拾取表通常包含有限的字段集和有限数量的实体，并从其他类型的类中引用。”

对我来说毫无意义。我一直在试图从上下文中弄清楚皮卡表是什么，但我也被困在那里。

文档中的一些示例字段：

> 国家 | 实体 | 代表国家。| 参考拾取表“国家”。
> 
> 状态 | 实体 | 表示实体的生命周期状态。例如，工作项对象的可能状态可以是草稿、活动、已取消、已完成、暂停。值是对 Statepickup 表的引用。

这些例子让我觉得它只是一个静态列表（不符合他们给定的拾取表定义），但如果是这样，列表/表没有提供给用户，所以我不确定我将如何使用它。如果它确实指的是静态列表，我将不得不尝试诱使他们给我表格。

我在网上找不到提货表的定义，所以如果这里有人知道这将有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-09T21:01:25.137

取件表是选项列表。选择列表的值存储在迷你表中（不确定为什么，但似乎并不那么重要）。

工作项状态示例是选择列表的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T22:22:59.400

我的猜测是它是联结表或关联表的另一个名称。只有外键引用其他表中的主键。

# php - 用户和密码不匹配数据库

> ID：11233189
> 
> 赞同：0
> 
> 时间：2012-06-27T18:57:47.600
> 
> 标签：php, mysql, sql

我正在测试一个 sql 查询，并且我正在正确输入用户名和密码，但它并没有给我匹配。

这是查询的输出：

```
SELECT * FROM wp_users where user_login='User' and user_pass='pass' 
```

我可以看到我输入正确但仍然返回错误。

我知道密码在数据库中的 md5 中。

我需要解码查询中的变量吗？如果有怎么办？

我已经尝试过了，但没有奏效：

```
$SQL =   "SELECT * FROM wp_users where user_login='".$username."' and user_pass='".md5($password)."'"; 
```

更新：

这是 md5($password) - 3fc0a7acf087f549ac2b266baf94b8b1 的内容

这就是数据库中的内容：$P$BfzHHqBF88q4RHJsAiVf4m7.ulbgCZ1

它们都应该是相同的：o/

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:32:51.940

最简单的方法是调用 Wordpress 函数 wp_hash_password(password)。在这种情况下，您的查询将如下所示：

```
require_once '/path/to/wp-config.php';  //will load up wordpress, such as if you're doing this from a script
$SQL =   "SELECT * FROM wp_users where user_login='".$username."' and user_pass='".wp_hash_password($password)."'"; 
```

Wordpress 不使用标准 MD5，而是使用[phpass](http://www.openwall.com/phpass/)库来散列用户密码。因此，如果您尝试从 Wordpress 之外执行此操作，那么您将需要查看该库。这是使用 phpass 实现 wp_hash_password() 方法的代码：

```
if ( !function_exists('wp_hash_password') ) :
/**
 * Create a hash (encrypt) of a plain text password.
 *
 * For integration with other applications, this function can be overwritten to
 * instead use the other package password checking algorithm.
 *
 * @since 2.5
 * @global object $wp_hasher PHPass object
 * @uses PasswordHash::HashPassword
 *
 * @param string $password Plain text user password to hash
 * @return string The hash string of the password
 */
function wp_hash_password($password) {
    global $wp_hasher;

    if ( empty($wp_hasher) ) {
            require_once( ABSPATH . 'wp-includes/class-phpass.php');
            // By default, use the portable hash from phpass
            $wp_hasher = new PasswordHash(8, TRUE);
    }

    return $wp_hasher->HashPassword($password);
}
endif; 
```

您可能可以通过遵循相同的模式获得相同的内容：

```
require_once '/path/to/wp-includes/class-phpass.php';
$my_hasher = new PasswordHash(8, TRUE);
$SQL =   "SELECT * FROM wp_users where user_login='".$username."' and user_pass='". $my_hasher->HashPassword($password)."'"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:08:13.287

您确定密码在存储到数据库之前没有加盐吗？如果是，您将需要执行以下操作：

```
$SQL =   sprintf("SELECT * FROM wp_users where user_login='%s' and user_pass='%s'", $username, md5($salt.$password)); 
```

我还会研究 mysql_real_escape_string 和 PDO 准备好的语句，而不是直接的 mysql

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:58:27.693

检查 INSERT/UPDATE wp_users 命令中使用的加密功能。在 MySQL 中有一堆加密函数。看看[这里](https://dev.mysql.com/doc/refman/5.6/en/encryption-functions.html)。

用于登录目的，`Password(string)`经常使用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T19:32:43.530

看起来数据库中的密码是用[Crypt](http://php.net/manual/en/function.crypt.php)函数存储的。看：

```
$pw="thisismypassword";
echo crypt($pw);    // $1$lmJBSDCp$AcU45N45sUhdglYn28T4X/
echo md5($pw);  //31435008693ce6976f45dedc5532e2c1 
```

尝试在查询中使用 crypt。Crypt 还使用我相信 wp_config.php 文件中的“盐”。

# java - 试图了解硒及其各种成分

> ID：11233205
> 
> 赞同：0
> 
> 时间：2012-06-27T18:58:55.643
> 
> 标签：java, ruby-on-rails, selenium

对于集成测试，我想使用 selenium，也用于我的 TDD/BDD 工作流程，也用于我的远程构建服务器以运行测试等。

为此我需要哪些组件？

我知道有一个浏览器插件，但那是为了帮助引导代码（您可以导出代码，然后根据需要进行调整）。

我发现在启动浏览器时在本地运行测试很慢，有没有办法在不打开浏览器的情况下做到这一点？

这在构建服务器上如何工作，是否有无头模式？

有人可以概述各种 selenium 工具以及它们如何组合在一起以及它们在开发周期中的使用位置。

例如，我看到了 selenium 驱动程序、selenium rc、浏览器插件等。

我想将它用于rails和java。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:20:18.983

我从来没有用 Java 尝试过 Selenium，只用过 Ruby，但你的交互应该是相似的。我不认为 Selenium 有无头模式，你必须为此使用不同的驱动程序。例如，对于 ruby​​，有[capybara-webkit](https://github.com/thoughtbot/capybara-webkit)，它运行基于无头 webkit 的浏览器。

我可以根据我自己的经验告诉你，我们在使用无头浏览器的 CI（构建服务器）上遇到了很多问题，所以我们最终切换回了 Selenium 和运行在[Xvfb](http://en.wikipedia.org/wiki/Xvfb)之上的 Google Chrome ，这是一种虚拟屏幕管理器适用于 unix，可让您在无头环境中运行图形应用程序。大多数问题与 webkit 无头浏览器和实际驱动程序之间的不一致行为有关。但是，根据您的应用程序的外观以及您将如何驱动它，它可能对您有用，您应该尝试一下。

因此，您需要的唯一组件是 Selenium 服务器（驱动浏览器）和客户端，它将命令发送到服务器。他们有 java 和 ruby​​ 客户端，所以你可以选择你喜欢的任何语言。

这确实是一个缓慢的过程，而且非常不稳定，因为有时由于超时、第 3 方 API 关闭等原因，您的测试可能会无缘无故地失败。有很多事情可能会出错并导致您的集成测试失败.

无论如何，它仍然是一个非常宝贵的工具，你绝对应该使用它。请注意，您不应该完全依赖这些类型的测试来确保您的应用程序的质量，但是，这些应该只测试您系统的较小表面。单元和组件测试应该构成测试套件的大部分。

希望这有助于澄清您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:19:31.443

我自己对 Selenium 进行了一些评估，据我了解，您应该使用 Firefox 插件来记录您的测试。然后导出到您想要的任何代码。然后，当您想测试系统时，启动 Selenium RC，它充当服务器，然后您可以使用它来运行测试。Selenium WebDrivers 是其中的一部分，它允许服务器使用您记录的测试打开和“驱动”浏览器。

请注意，在 Firefox 以外的浏览器中记录测试更加困难，因为没有方便的插件可供使用。相反，您必须从头开始构建自己的测试，这非常耗时。

Fabasoft 的 app.test ( [http://www.apptest.com/en/](http://www.apptest.com/en/) ) 是另一个免费的替代品，它做同样的工作但以不同的方式，也许在你过度参与 Selenium 之前先看看它。

# javascript - jqplot 线 - 工具提示

> ID：11233212
> 
> 赞同：0
> 
> 时间：2012-06-27T18:59:13.643
> 
> 标签：javascript, tooltip, line, jqplot

我想添加一条垂直线，当悬停在它上面时会显示一个工具提示。我想以这种方式标记公司活动，但是我真的找不到使用 JqPlot 的方法。

在此先感谢，拉舒斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T15:05:55.897

我认为对于这个，您可以使用我用来提供行高亮选项的方法`jqPlot`，[详细信息在这个答案中。](https://stackoverflow.com/a/11468833/613495)当鼠标悬停在一条线上时，您就有了检测算法。

当您检测到鼠标刚刚进入一行并且工具提示不可见时，然后构建并显示它。也不要忘记在鼠标移出线时隐藏工具提示。[在实现这部分时，您肯定会发现此答案中的代码很有用。](https://stackoverflow.com/a/10688315/613495) 它展示了如何在堆叠条形图上添加自定义工具提示，但代码可以很容易地满足您的需求。

***PS：****我假设垂直线将由您（您的代码）在某个画布上绘制。如果您有其他想法，`vertical line`请解释一下。否则祝你好运。:)*

# build - Automake：设置数据文件权限模式

> ID：11233214
> 
> 赞同：2
> 
> 时间：2012-06-27T18:59:16.510
> 
> 标签：build, permissions, installation, gnu, automake

我知道`install-data-hook`在我的数据文件被复制后我可以用来做任何我想做的事情，这样我就可以按照我想要的方式调整文件权限。

不过，我的问题摆在它之前。

有什么方法可以告诉我在复制任何数据组*之前*`automake`为其设置标准权限掩码吗？

 *我的意思是我希望结果`install`使用正确的掩码来完成它的任务，而不是让它使用标准`0644`并在它更正所有文件权限之后。

换句话说，我希望一开始就可以正确完成任务，而不必稍后再修复它。

有可能吗？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T06:21:14.587

Automake 实现了[GNU 标准](http://www.gnu.org/prep/standards/standards.html)。这些声明应使用命令安装数据文件`$(INSTALL_DATA)`， 该命令[应默认为`$(INSTALL) -m 644`](http://www.gnu.org/prep/standards/standards.html#Command-Variables).

您可以做的是覆盖`INSTALL_DATA`in some的值`Makefile.am`，然后由此安装的*所有*数据文件`Makefile.am`都将使用该定义。如果您有两组需要不同模式的数据文件，则必须将它们移动到两个不同的目录中，以便它们拥有自己的`Makefile`.*

# gwt - GWT：如何将 SimplePager 嵌入 DataGrid

> ID：11233222
> 
> 赞同：0
> 
> 时间：2012-06-27T19:00:07.903
> 
> 标签：gwt

目前，DataGrid 不包含 SimplePager。必须创建一个组合并将一个网格和一个寻呼机包装到 FlowPanel 中。有没有一种方法可以创建包含 SimplePager 的包装器 CDataGrid（扩展 DataGrid）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T16:15:37.217

我认为您可以使用[UiBinder](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)来实现这一点，您可以在[此处](http://gwt.google.com/samples/Showcase/Showcase.html#!CwDataGrid)查看展示示例：

```
<!DOCTYPE ui:UiBinder SYSTEM "http://dl.google.com/gwt/DTD/xhtml.ent">
<ui:UiBinder
  xmlns:ui="urn:ui:com.google.gwt.uibinder"
  xmlns:g="urn:import:com.google.gwt.user.client.ui"
  xmlns:c="urn:import:com.google.gwt.user.cellview.client">

  <g:DockLayoutPanel
    unit="EM">
    <!-- DataGrid. -->
    <g:center>
      <c:DataGrid
        ui:field='dataGrid' />
    </g:center>

    <!-- Pager. -->
    <g:south
      size="3">
      <g:HTMLPanel>
        <table
          style="width:100%">
          <tr>
            <td
              align='center'>
              <c:SimplePager
                ui:field='pager' />
            </td>
          </tr>
        </table>
      </g:HTMLPanel>
    </g:south>
  </g:DockLayoutPanel>
</ui:UiBinder> 
```

您可以使用 SimplePager 或您希望的任何内容包装 DataGrid，并制作一个名为“CDataGrid”的新“小部件”（如您所说），它不扩展 DataGrid，但可以扩展 Composite。

我希望我能在这方面给你一点帮助。

最好的祝福，

iVieL.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-21T13:07:15.330

它确实与 DateGrid 集成。以展示为例： [http ://gwt.google.com/samples/Showcase/Showcase.html#!CwDataGrid](http://gwt.google.com/samples/Showcase/Showcase.html#!CwDataGrid)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-29T05:44:30.780

添加寻呼机作为网格的一部分，消除了复合视图中的额外标记和步骤。我的解决方案是创建一个新的组合并提供回调。

# google-maps - 在 Google Street View 上添加叠加图像

> ID：11233223
> 
> 赞同：3
> 
> 时间：2012-06-27T19:00:14.887
> 
> 标签：google-maps, overlay, google-street-view

我正在尝试在街景中显示叠加图像。我使用了谷歌文档上关于自定义叠加层的代码： [https ://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays](https://developers.google.com/maps/documentation/javascript/overlays#CustomOverlays)

它说如果我想在街景中显示我的叠加层，我必须传递全景图而不是地图，这就是我所做的：

```
panorama = map.getStreetView();
panorama.setPosition(astorPlace);
panorama.setPov({
  heading: 120,
  zoom:1,
  pitch:0}
);

var swBound = new google.maps.LatLng(40.725882, -74.000986);
var neBound = new google.maps.LatLng(40.734886, -73.980990);
var bounds = new google.maps.LatLngBounds(swBound, neBound);

var srcImage = 'overlay.jpeg';
overlay = new USGSOverlay(bounds, srcImage, panorama); 
```

什么都没有显示（如果我将“地图”而不是“全景”传递给 USGOverlay 一切都很好）。我究竟做错了什么？

谢谢

# python - 如何通过 Selenium-Python 恢复浏览器会话或使用现有浏览器窗口？

> ID：11233225
> 
> 赞同：1
> 
> 时间：2012-06-27T19:00:18.820
> 
> 标签：python, selenium, webdriver

我有一些看起来像这样的代码：

```
print 'Starting browser'
browser = webdriver.Firefox()

print 'Loading %s' % base_url
browser.get(base_url)

try:
    username_el = browser.find_element_by_css_selector('#username')
    username_el.send_keys(credentials['username'])
    password_el = browser.find_element_by_css_selector('#password')
    password_el.send_keys(credentials['password'])
    password_el.send_keys(Keys.RETURN)
    print 'Logging in'
    browser.get(base_url)
except NoSuchElementException:
    print 'Already logged in'
    pass 
```

问题是它每次都必须登录（从不触发异常）。这有两个问题：

1.  它使我的测试花费更长的时间，因为我每次都必须等待它登录
2.  它对服务器的影响超过了它的需要

所以，我想保存并恢复我的浏览器会话，或者让浏览器保持打开状态并让 Selenium 控制它。

这可能吗？如果是这样，怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:37:18.073

我会尝试使用 get_cookies() 来获取任何会话 cookie，将其保存在浏览器会话（磁盘或其他）之间持久存在的某个位置，并在您启动新的浏览器会话时使用 add_cookie() 重新添加 cookie。

虽然没有测试过这个......

# objective-c - 保留或复制 UIKit 元素

> ID：11233226
> 
> 赞同：-1
> 
> 时间：2012-06-27T19:00:19.660
> 
> 标签：objective-c, cocoa-touch, memory-management, properties, uikit

**第一个问题**

当Objective-C中保留一个对象的属性时，为什么同一个类的第二个实例指向同一个对象？如果您实例化一个新类，那么从逻辑上讲，您会想要一个具有单独属性的单独类。`retain`我知道只增加保留计数并且`copy`会浅拷贝。

我创建了一个具有保留的类`NSURLRequest`。我初始化了该类的两个实例。更改任何已创建类的属性将更改所有类。当我在该物业上使用副本时，它停止了这样做。然而，在线阅读，它说不`copy`可变对象本质上是一个浅拷贝，因为你真的不想要一个单独的实体，因为它永远不能改变。在这种情况下，`NSURLRequest`它是不可变的，那么我的示例是如何通过调用`copy`不可变对象来工作的呢？这是我复制它的方式：

```
- (id)initWithRequest:(NSURLRequest *)request {

    self = [super initWithNibName:nil bundle:nil];
    if (self) {
        _request = [request copy];
    }

    return self;
} 
```

**第二个问题**

我一直在阅读，基本上对于所有不可变对象，我需要使用`copy`和对于可变对象使用`retain`（或现在在 ARC 中`strong`）。如果 IBOutlets 是`weak`指针，如果我在没有 Interface Builder 的情况下绘制视图怎么办？`UIKit`元素是`copy`or `retain`/吗`strong`？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:06:59.963

保留告诉 iOS 不要释放该内存，即使原始属性或指针将自身设置为 nil 也会减少保留计数。因此，如果您进行浅拷贝，将一个指针分配给现有对象，它将保留它。如果你需要做一个深拷贝，那么你应该指定拷贝或创建一个拷贝构造函数。

弱引用类似于在一块您不想增加保留计数的内存上使用“分配”的旧方法。在某些情况下，您可能会有循环引用并且可能永远不会释放内存。如果你不使用 IB 创建 UIKit 对象，假设你有一个指向该对象的有效指针，ARC 肯定会为你保留内存。例如，如果您有一个 UIButton 指针作为视图控制器的成员，并且您动态创建一个按钮，只要该指针有效，它将保留该内存，并在指针设置为 nil 时释放它。

# sql-server - sql查询在一行中返回结果

> ID：11233230
> 
> 赞同：2
> 
> 时间：2012-06-27T19:00:52.097
> 
> 标签：sql-server, tsql

我正在尝试为现有表数据编写查询。TABLE_A 和 TABLE_B 有 1 条记录，但 TABLE_C 有 2 条记录。一个用于家庭地址，另一个用于工作地址。

因此，以下查询返回 2 条记录。我试图从 2 条记录中只获得 1 条记录。

如果 CITY 为 NULL，则 address_type = 1(Home) 的 state_id 为 null 然后获取 Work(address_type = 2) 地址。如果两者都为空，则获取“家庭”地址。实现此功能的最佳方法是什么。

谢谢你的任何建议。

```
select a.A_ID, a.B_ID, a.A_DESC, b.first_name, b.last_name, c.address_type,  c.city, c.state
from table_A a
left join table_B b on b.B_ID = a.B_ID
left join table_C c on c.B_id = b.B_id
where a.A_ID = 10 
```

## 表_A

```
A_ID int
B_ID int 
A_Desc  varchar(20) 
```

## 表_B

```
B_ID int
first_name  varchar(30)
last_name   varchar(30) 
```

## 表_C

```
C_ID    int
B_ID    int 
address_type    int 
city      varchar(50)
state  int 
```

结果：

```
 A_ID     B_ID   A_DESC   first_name  last_name  address_type   city       state
 --------------------------------------------------------------------------------
 10       200    test_     name1        name_last    1            NULL       NULL 
 10       200    test_     name1        name_last    2           City_test    2 
```

我想要这个最终结果

```
 A_ID     B_ID   A_DESC   first_name  last_name  address_type   city       state
 --------------------------------------------------------------------------------
 10       200    test_     name1        name_last    2           City_test    2 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:03:22.750

您可以使用`outer apply`查找最高类型的地址：

```
select  *
from    table_A a
left join 
        table_B b 
on      b.B_ID = a.B_ID
outer apply
        (
        select  top 1 *
        from    table_C c 
        where   c.B_id = b.B_id
        order by
                case
                when c.address_type = 2 and c.city is not null then 1
                else c.address_type = 1 and c.city is not null then 2
                end
        ) c
where   a.A_ID = 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:09:03.337

只需将此逻辑构建到表 b 和 c 的左连接的连接条件中。

> 如果 CITY 为 NULL，则 address_type = 1(Home) 的 state_id 为 null 然后获取 Work(address_type = 2) 地址。如果两者都为空，则获取“家庭”地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:12:50.990

```
select a.A_ID, a.B_ID, a.A_DESC, b.first_name, b.last_name,
       coalesce(c1.address_type,c2.address_type) address_type, 
       coalesce(c1.city,c2.city) city, 
       coalesce(c1.state,c2.state) state
from table_A a
left join table_B b on b.B_ID = a.B_ID
left join table_C c1 on c.B_id = b.B_id and c.Address_Type = 1
left join table_C c2 on c.B_id = b.B_id and c.Address_Type = 2

where a.A_ID = 10 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T19:23:56.463

一般技术：

```
select distinct a.A_ID
, a.B_ID
, a.A_DESC
, b.first_name
, b.last_name
, coalesce(home.address_type, work.address_type)
, coalesce(home.city,work.city)
, coalesce(home.state, work.state) 
from table_A a 
left join table_B b on b.B_ID = a.B_ID 
left join table_C home on home.B_id = b.B_id and home.address_type = 1
left join table_C work on work.B_id = b.B_id and home.address_type = 2
where a.A_ID = 10 
```

# sql - 如果为空，则向上移动列单元格

> ID：11233233
> 
> 赞同：2
> 
> 时间：2012-06-27T19:01:13.903
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我正在尝试从 sql 语句格式化结果集以放入水晶报告的命令中。如果行单元格为空，我需要它向上移动。我知道这不是 sql 的用途，而是客户端规范。我这里有一个例子，[http://sqlfiddle.com/#!3/76999/11](http://sqlfiddle.com/#!3/76999/11)

这就是我现在所拥有的

[1 http://img259.imageshack.us/img259/7186/have.jpg](http://img259.imageshack.us/img259/7186/have.jpg)

这就是我需要的

[1 http://img59.imageshack.us/img59/465/needd.jpg](http://img59.imageshack.us/img59/465/needd.jpg)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:27:33.353

试试这个，让我知道它是如何为你工作的：

```
WITH DATA1 (ID, TaxCode)
AS
(SELECT ROW_NUMBER() OVER (ORDER BY TaxCode desc) AS ID, A.TaxCode FROM Table A)

, DATA2 (ID, OwnerTax)
AS
(SELECT ROW_NUMBER() OVER (ORDER BY Ownertax desc) AS ID, A.OwnerTax FROM Table A)

, DATA3 (ID, OwnerOther)
AS
(SELECT ROW_NUMBER() OVER (ORDER BY OwnerOther desc) AS ID, A.OwnerOther FROM Table A)

, DATA4 (ID, DEDCode)
AS
(SELECT ROW_NUMBER() OVER (ORDER BY DEDCode desc) AS ID, A.DEDCode FROM Table A)

SELECT DATA1.TaxCode, DATA2.OwnerTax, DATA3.OwnerOther, DATA4.DEDCode
FROM DATA1 
LEFT JOIN DATA2 ON DATA1.ID = DATA2.ID
LEFT JOIN Data3 ON DATA1.ID = DATA3.ID
LEFT JOIN Data4 ON DATA1.ID = DATA4.ID 
```

如果您将以下 SQL 直接复制并粘贴到右侧窗口中，则以下 SQL 将在链接[http://sqlfiddle.com/#!3/76999/11上运行：](http://sqlfiddle.com/#!3/76999/11)

```
With Source1 (TaxCode, OwnerTax, OwnerOther, dedCode)
As(
SELECT 
CASE WHEN [Adjdesc] = 'TAX' THEN [TaxCode] ELSE null END AS TaxCode,
CASE WHEN [Adjdesc] = 'TAX' THEN [adj] END AS OwnerTax, 
CASE WHEN [Adjdesc] <> 'TAX' THEN [adj] END AS OwnerOther,
CASE WHEN [Adjdesc] <> 'TAX' THEN [TaxCode] ELSE null END AS dedCode

FROM test4 AS A
WHERE adj IS NOT NULL)

, DATA1 (ID, TaxCode)
AS
(SELECT ROW_NUMBER() OVER (ORDER BY TaxCode desc) AS ID, A.TaxCode FROM Source1 A)

, DATA2 (ID, OwnerTax)
AS
(SELECT ROW_NUMBER() OVER (ORDER BY Ownertax desc) AS ID, A.OwnerTax FROM Source1 A)

, DATA3 (ID, OwnerOther)
AS
(SELECT ROW_NUMBER() OVER (ORDER BY OwnerOther desc) AS ID, A.OwnerOther FROM Source1 A)

, DATA4 (ID, DEDCode)
AS
(SELECT ROW_NUMBER() OVER (ORDER BY DEDCode desc) AS ID, A.DEDCode FROM Source1 A)

SELECT DATA1.TaxCode, DATA2.OwnerTax, DATA3.OwnerOther, DATA4.DEDCode
FROM DATA1 
LEFT JOIN DATA2 ON DATA1.ID = DATA2.ID
LEFT JOIN Data3 ON DATA1.ID = DATA3.ID
LEFT JOIN Data4 ON DATA1.ID = DATA4.ID 
```

# objective-c - GCC_NO_COMMON_BLOCKS 是做什么用的？

> ID：11233235
> 
> 赞同：32
> 
> 时间：2012-06-27T19:01:19.013
> 
> 标签：objective-c, ios, xcode, llvm

我发现我的项目集

```
GCC_NO_COMMON_BLOCKS = NO 
```

在 Apple LLVM Compiler 3.1 - Code Generation 设置下，为“No Common Blocks”

![在此处输入图像描述](../Images/6fba8ee9cb9ca9441b57c6c64e41fc05.png)

我想知道：**那个标志是用来做什么的？**

非常感谢

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-06-27T19:06:35.560

来自 Xcode 的快速帮助：

> 在 C 语言中，甚至在目标文件的数据部分中分配未初始化的全局变量，而不是将它们生成为公共块。这样做的效果是，如果在两个不同的编译中声明了相同的变量（没有 extern ），则在链接它们时会出现错误。这可能有用的唯一原因是，如果您希望验证该程序是否可以在始终以这种方式工作的其他系统上工作。

您可以在右侧窗格中的“显示快速帮助检查器”选项卡下找到快速帮助： ![Xcode 快速帮助检查器](../Images/a302369ba5e655cfe91e6b80e268459a.png)

# cruisecontrol.net - 即使使用 RoboCopy 的 CCNET Exec 也会失败

> ID：11233236
> 
> 赞同：3
> 
> 时间：2012-06-27T19:01:30.847
> 
> 标签：cruisecontrol.net, robocopy

所以我有一个成功构建的 CCNET 项目，直到我包含一个 RoboCopy exec 任务来进行部署：

```
<exec>
  <executable>C:\Windows\System32\robocopy.exe</executable>
  <buildArgs>D:\CCNETProjects\$(projectname)\Builds\Latest_Build\_PublishedWebsites\$(projectname) D:\TEST_$(projectname) *.* /E /NP /XF *.config /XD config</buildArgs>
  <buildTimeoutSeconds>60</buildTimeoutSeconds>
  <successExitCodes>0,1,2,4,8,16</successExitCodes>
</exec> 
```

如您所见，我已包含此处列出的所有可能的退出代码；[http://ss64.com/nt/robocopy-exit.html](http://ss64.com/nt/robocopy-exit.html)

任务成功执行（文件复制正常），构建结果显示此任务没有错误，但我的构建仍然失败！

```
<buildresults>
  <message>-------------------------------------------------------------------------------</message>
  <message>   ROBOCOPY     ::     Robust File Copy for Windows                              </message>
  <message>-------------------------------------------------------------------------------</message>
  <message>  Started : Wed Jun 27 19:50:45 2012</message>
  <message>   Source : D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\</message>
  <message>     Dest : D:\TEST_FieldworkReportGenerator\</message>
  <message>    Files : *.*</message>
  <message>     </message>
  <message>Exc Files : *.config</message>
  <message>     </message>
  <message> Exc Dirs : config</message>
  <message>     </message>
  <message>  Options : *.* /S /E /COPY:DAT /NP /R:1000000 /W:30 </message>
  <message>------------------------------------------------------------------------------</message>
  <message>                    5    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\</message>
  <message> *EXTRA Dir        -1    D:\TEST_FieldworkReportGenerator\App_Data\</message>
  <message> *EXTRA Dir        -1    D:\TEST_FieldworkReportGenerator\downloads\</message>
  <message> *EXTRA Dir        -1    D:\TEST_FieldworkReportGenerator\uploads\</message>
  <message>                   18    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\bin\</message>
  <message>     Newer              22528    ExcelHelpers.dll</message>
  <message>     Newer              48640    ExcelHelpers.pdb</message>
  <message>     Newer              33280    FieldworkReportGenerator.dll</message>
  <message>     Newer              54784    FieldworkReportGenerator.pdb</message>
  <message>                    1    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\Content\</message>
  <message>                    0    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\Content\themes\</message>
  <message>                   14    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\Content\themes\base\</message>
  <message>                   13    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\Content\themes\base\images\</message>
  <message>                   20    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\Scripts\</message>
  <message>                    6    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\uploadify\</message>
  <message>                    2    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\Views\</message>
  <message>                    4    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\Views\Account\</message>
  <message>                    3    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\Views\Home\</message>
  <message>                    3    D:\CCNETProjects\FieldworkReportGenerator\Builds\Latest_Build\_PublishedWebsites\FieldworkReportGenerator\Views\Shared\</message>
  <message>------------------------------------------------------------------------------</message>
  <message>               Total    Copied   Skipped  Mismatch    FAILED    Extras</message>
  <message>    Dirs :        13         0        13         0         0         3</message>
  <message>   Files :        89         4        85         0         0         0</message>
  <message>   Bytes :    9.61 m   155.5 k    9.46 m         0         0         0</message>
  <message>   Times :   0:00:00   0:00:00                       0:00:00   0:00:00</message>
  <message>   Speed :              462883 Bytes/sec.</message>
  <message>   Speed :              26.486 MegaBytes/min.</message>
  <message>   Ended : Wed Jun 27 19:50:45 2012</message>
</buildresults> 
```

ccnet.log 信息也不显示任何内容；

```
2012-06-27 19:44:02,507 [4:DEBUG] [FieldworkReportGenerator C:\Windows\System32\robocopy.exe]    Ended : Wed Jun 27 19:44:02 2012
2012-06-27 19:44:02,538 [4:DEBUG] [FieldworkReportGenerator C:\Windows\System32\robocopy.exe] standard-output stream closed -- null received in event
2012-06-27 19:44:02,538 [11:DEBUG] [FieldworkReportGenerator C:\Windows\System32\robocopy.exe] standard-error stream closed -- null received in event
2012-06-27 19:44:02,538 [5:DEBUG] [FieldworkReportGenerator C:\Windows\System32\robocopy.exe] process exited event received
2012-06-27 19:44:02,632 [FieldworkReportGenerator:INFO] Delete merged file 'D:\CCNETProjects\FieldworkReportGenerator\Artifacts\msbuild-results-7d2f394c-2b07-4131-9cfc-4d3f05968758.xml'.
2012-06-27 19:44:02,632 [FieldworkReportGenerator:INFO] Integration complete: Failure - 27/06/2012 19:44:02 
```

我完全没主意了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-28T03:03:05.220

退出代码是位掩码。如果将 1（复制的一些文件）和 2（检测到额外目录）的代码组合在一起，您可以获得退出代码 3。从您的输出来看，情况似乎就是这样。

# mysql - 使用 MySQL 从同一个表中以不同的顺序和数量提取信息

> ID：11233241
> 
> 赞同：1
> 
> 时间：2012-06-27T19:01:58.187
> 
> 标签：mysql, count, group-by, nested, cumulative-sum

第一次发帖。例如，假设我有一个包含 12 个条目的表；

```
+--------+------------+
| 姓名 | 日期 |
+--------+------------+
| P1 | 2011-12-01 |
| P2 | 2012-01-01 |
| P3 | 2012-02-01 |
| P4 | 2012-02-01 |
| P5 | 2012-02-01 |
| P6 | 2012-05-01 |
| P7 | 2012-04-01 |
| P8 | 2012-05-01 |
| P9 | 2012-05-01 |
| P10 | 2012-06-01 |
| P11 | 2012-06-01 |
| P12 | 2012-03-01 |
+--------+------------+

```

我已经**按**日期对表中的信息进行了分组，记录了所有 id 的**计数（未显示）并创建了一个运行总计。**我已经这样做了；

```
(SELECT date, c as count, (@s := @s + c) as run_total
从
(SELECT D1.date, Count(D1.person_id) as c, @s := 0
从表 D1
按月分组（D1.日期）
ORDER BY D1.date) 作为 T1);

```

输出;

```
+------------+-------+------------+
| 日期 | 计数 | 运行总计 |
+------------+-------+------------+
| 2011-12-20 | 1 | 1 |
| 2012-01-31 | 1 | 2 |
| 2012-02-20 | 3 | 5 |
| 2012-03-05 | 1 | 6 |
| 2012-04-20 | 1 | 7 |
| 2012-05-20 | 3 | 10 |
| 2012-06-01 | 2 | 12 |
+------------+-------+------------+

```

目前很好。这是我松开它的地方。我怎样才能提取最近的 4 个条目并得到像这样的东西？？？其中日期保持升序，更重要的是 run_total 保持不变；

**-----我想要达到的目标-----**

```
----------------------------------
| 2012-03-05 | 1 | 6 |
| 2012-04-20 | 1 | 7 |
| 2012-05-20 | 3 | 10 |
| 2012-06-01 | 2 | 12 |
+------------+-------+------------+

```

**-------------------------------------**

为了解决这个问题，我创造了这个；

```
(SELECT date, c as count, (@s := @s + c) as run_total
从
(SELECT D1.date, Count(D1.person_id) as c, @s := 0
从表 D1
按月分组（D1.日期）
ORDER BY D1.date desc 限制 4) 作为 T1)
按日期订购；

```

但是我没有得到想要的结果；

```
+------------+-------+------------+
| 日期 | 计数 | 运行总计 |
+------------+-------+------------+
| 2012-03-05 | 1 | 1 |
| 2012-04-20 | 1 | 2 |
| 2012-05-20 | 3 | 5 |
| 2012-06-01 | 2 | 7 |
+------------+-------+------------+

```

日期是有序的，但 run_totals 都搞砸了。1 应该是 6、2 -> 7、5 -> 10 和 7 -> 12，如前所示。

同样，我想要实现的是；

```
----------------------------------
| 2012-03-05 | 1 | 6 |
| 2012-04-20 | 1 | 7 |
| 2012-05-20 | 3 | 10 |
| 2012-06-01 | 2 | 12 |
+------------+-------+------------+

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:06:43.173

```
SELECT * FROM
(SELECT *
FROM (SELECT date, count, (@s := @s + c) as run_total 
FROM
(SELECT D1.date, Count(D1.person_id) as c, @s := 0
FROM table D1
GROUP BY month(D1.date)
ORDER BY D1.date) as T1) tmp
ORDER BY `date` DESC
LIMIT 4) tmp2
ORDER BY `date` ASC 
```

它获取您查询的 4 条最新记录，然后按日期对它们重新排序。
总数保持不变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:07:17.387

```
(SELECT date, c as count, (@s := @s + c) as run_total 
FROM
(SELECT D1.date, Count(D1.person_id) as c, @s := 0
FROM table D1
GROUP BY month(D1.date)
ORDER BY D1.date ASC) as T1) LIMIT 4; 
```

# c++ - 如何将 IPv4 映射的 IPv6 地址转换为 IPv4（字符串格式）？

> ID：11233246
> 
> 赞同：4
> 
> 时间：2012-06-27T19:02:29.273
> 
> 标签：c++, c, linux, ipv6, ipv4

我有一个`struct sockaddr`包含 IPv4 映射 IPv6 地址的结构，例如`::ffff:10.0.0.1`. 我只想`10.0.0.1`在 C 编程语言的字符串（在本例中为 ）中获取它的 IPv4 版本。我该如何去实现它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:36:48.617

由于您的结构包含 IPV6 地址，我假设您有一个指向结构的`struct sockaddr *`指针（让我们命名它`addrPtr`）`struct sockaddr_in6`。

您可以轻松获取地址字节。

```
const uint8_t *bytes = ((const struct sockaddr_in6 *)addrPtr)->sin6_addr.s6_addr; 
```

然后将 12 添加到指针，因为前 12 个字节不感兴趣（10 `0x00`，然后 2 `0xff`）。只有最后 4 个重要。

```
bytes += 12; 
```

现在，我们可以使用这四个字节来做任何我们想做的事情。例如，我们可能会将它们存储到 IPv4`struct in_addr`地址中。

```
struct in_addr addr = { *(const in_addr_t *)bytes }; 
```

然后我们可以使用`inet_ntop`(declared in `<arpa/inet.h>`) 得到一个字符串。

```
char buffer[16]; // 16 characters at max: "xxx.xxx.xxx.xxx" + NULL terminator
const char *string = inet_ntop(AF_INET, &addr, buffer, sizeof(buffer)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:52:29.347

如果您想与其他类型的地址兼容，请使用 getnameinfo。

```
char hostbuf[NI_MAXHOST];
char *host;

if (getnameinfo(addr, addrlen, hostbuf, sizeof(hostbuf), NULL, 0, NI_NUMERICHOST))
    ;//error

if (strncmp(hostbuf, "::ffff:", sizeof("::ffff:") - 1) == 0)
    host = hostbuf + sizeof("::ffff:") - 1;
else
    host = hostbuf; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:41:35.787

一旦您识别出 IPv4 映射地址，IPv4 部分就是地址的最低有效四个字节。我相信这可以通过以下方式完成：

```
struct sockaddr *address;  // this is the address
struct sockaddr_in6 *addrv6 = (struct sockaddr_in6 *)address;
unsigned long address;
memcpy(&address, addrv6->sin6_addr.s6_addr + 11, 4); 
```

该文档指出该地址以网络顺序出现（最高有效字节在前）。如果这与您的机器架构不同，您需要调用 htonl() 以反转字节顺序。

# c# - edmx 计算列

> ID：11233248
> 
> 赞同：2
> 
> 时间：2012-06-27T19:02:41.547
> 
> 标签：c#, .net, entity-framework, entity, edmx

我在 Visual Studio 2010 SP1 中创建了一个 EDMX。它是根据现有数据库构建的。

有许多数据库生成的列（即，不可为空，GETDATE() 作为默认值）。

EDMX 虽然似乎没有检测到这些列，也没有将“StoreGeneratedPattern”设置为“Computed”。我将不得不手动设置这些东西才能正常工作！

数据库非常大，所以这并不理想。

这是 EDMX 生成的错误还是我可能做错了什么？

非常感谢卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T08:48:21.787

这不是错误。它只是以这种方式工作，因为当前日期的默认约束设置列不是计算列。每次保存记录时，计算列都会更改其值 - 例如时间戳。此外，使用`StoreGeneratedPattern`set to`Identity`或`Computed`无法从您的应用程序中设置属性。您的列接受其他值，因此 EF 无法使其存储默认生成 - 由您决定。

如果要对所有记录使用数据库中的默认值，请将其设置`StoreGeneratedPattern`为`Identity`. 它将确保在插入期间设置和查询该值。将模式设置为`Computed`将在每次更新后创建不必要的查询。

# google-maps - Google Maps V3 中的 GDirections 等效对象

> ID：11233255
> 
> 赞同：1
> 
> 时间：2012-06-27T19:03:22.877
> 
> 标签：google-maps, google-maps-api-3, google-maps-api-2

我一直在 Google 文档中搜索 GDirections Api V2 的等效对象。我找到了 DirectionsRenderer 但它没有我需要的方法，即 `GDirections.Load("from:some Lat, some Lng to: some Lat, some Lng")`.

有人知道 Api V3 中的等效对象或方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:31:25.860

请参阅文档中的此示例： [https ://google-developers.appspot.com/maps/documentation/javascript/examples/directions-simple](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-simple)

用您想要的坐标（或包含这些坐标的 google.maps.LatLng）替换 start 和 end。

带有航点的路线： [https ://google-developers.appspot.com/maps/documentation/javascript/examples/directions-waypoints](https://google-developers.appspot.com/maps/documentation/javascript/examples/directions-waypoints)

# c# - 用 C# 编写一个 15 题

> ID：11233257
> 
> 赞同：1
> 
> 时间：2012-06-27T19:03:29.163
> 
> 标签：c#, events, button, click

我是 C# 的半新手，我决定尝试编写一个 15 谜题。这是我过去在 Delphi (Paschal) 中使用 16 个按钮、16 个按钮单击事件和大量 if 语句完成的练习。这一次，我以编程方式创建了按钮，我使用了一个所有按钮都使用的 buttonClick 方法，它被设置为检查相邻按钮并在有空白按钮时更改按钮的文本。这个我没有问题。然而，当试图创建一个加扰器按钮时，我们在 Delphi 中的做法是创建一个循环 10,000 次的 for 外观。在循环中，我们随机选择一个数字 (0-15) 并为该按钮调用 Click 方法。显然，并非所有点击都会注册，但这样做 10,00 次足以打乱拼图。这在 Delphi 中大约需要 1 秒才能完成。在 C# 中，我很难让代码快速执行。Button.PerformClick 操作的运行速度似乎比我预期的要慢得多。有什么我做错了吗？我很感激任何帮助。谢谢！

这是争夺按钮的代码。

```
void scramble_Click(object sender, MouseEventArgs e)
{
    for (int i = 0; i < 1000; i++)
    {
        int temp = rand.Next(16);
        int div = temp % 4;
        int rem = temp / 4;
        buttonClick(puzzle[div, rem], new EventArgs());
        Refresh();
    }
} 
```

这些按钮位于 4x4 网格中，并通过随机数 mod 4 访问，作为 x 坐标和随机数 intDiv 4 用于 y 坐标。如果您想了解其他信息，请告诉我！再次感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:11:49.090

试试这个，可能会有所帮助：

```
void scramble_Click(object sender, MouseEventArgs e)
{
    EventArgs ea = new EventArgs();
    for (int i = 0; i < 1000; i++)
    {
        int temp = rand.Next(16);
        int div = temp % 4;
        int rem = temp / 4;
        buttonClick(puzzle[div, rem], ea);
    }
    Refresh();
} 
```

您不需要为每次点击创建一个新的 EventArgs 对象，当然也不需要刷新 1000 次。正如 Ed S. 在评论中指出的那样，这是很多毫无意义的重绘。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:14:45.940

我认为大部分“失去的时间”都是试图移动不可移动的部分。

也许您可以跟踪拼图中的空白空间，并使用`rand.Next(4)`它来决定要移动哪个相邻的块（如果空白空间位于一侧或角落，甚至可以将其细化为使用 3 或 2）

另外，我猜如果该`refresh`功能用于“重新绘制”您的电路板，那么一定是因为您希望看到拼图被打乱。如果是这样，如果您只移动可移动的部件而不是因为程序试图移动不可移动的部件而在移动之间有延迟，它可能看起来更流畅。否则，如果您不关心实际看到它在移动，您可以在完成拼块后简单地“重新绘制”整个电路板。

# wix - 如何使用 WiX 将 CustomActionData 传递给 CustomAction？

> ID：11233267
> 
> 赞同：67
> 
> 时间：2012-06-27T19:04:23.233
> 
> 标签：wix, windows-installer, wix3.5, custom-action

延迟的自定义操作如何检索[CustomActionData](http://msdn.microsoft.com/en-us/library/2w2fhwzz%28v=vs.80%29.aspx)上的属性设置？

* * *

## 回答 #1

> 赞同：148
> 
> 时间：2012-06-27T19:04:23.860

延迟的自定义操作不能直接访问安装程序属性（[参考](http://www.installsite.org/pages/en/isnews/200108/index.htm)）。其实只有`CustomActionData`财产

```
session.CustomActionData 
```

[此处](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370543%28v=vs.85%29.aspx)列出的其他方法和属性可用于会话对象。

因此，对于一个延迟自定义操作来检索诸如 之类的属性`INSTALLLOCATION`，您必须使用类型 51 自定义操作（即 set-property 自定义操作）来传递该信息，并且您将使用来自 CustomAction 的 C# 代码的数据通过`session.CustomActionData`. （见[参考](http://wix.tramontana.co.hu/tutorial/events-and-actions/extra-actions)和[参考](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370543%28v=vs.85%29.aspx)）

下面是类型 51 自定义操作 ( `CustomAction1`) 的示例，它将设置可以在 中检索的属性`CustomAction2`。

```
<CustomAction Id="CustomAction1"
              Property="CustomAction2"
              Value="SomeCustomActionDataKey=[INSTALLLOCATION]"
/> 
```

请注意，`Property`属性名称是`CustomAction2`. 这个很重要。**类型 51 操作的 Property 属性值必须与正在使用的自定义操作的名称相同/相同`CustomActionData`。**（见[参考](https://stackoverflow.com/questions/9564090/wix-customactiondata-is-empty-in-called-customaction)）

注意属性键/值对`SomeCustomActionDataKey`中的名称？`Value`在消费自定义操作 ( ) 中的 C# 代码中，您将使用以下表达式`CustomAction2`查找该属性：`CustomActionData`

```
string somedata = session.CustomActionData["SomeCustomActionDataKey"]; 
```

用于从中检索值的键不是类型 51 自定义操作`CustomActionData`的属性中的值，而是来自属性对的键。（*重要提示：**通过设置与消费自定义操作的 Id 同名的安装程序属性来填充，但**键不是安装程序属性。*）（请参阅[参考资料](https://stackoverflow.com/questions/9564090/wix-customactiondata-is-empty-in-called-customaction)）`Property``key=value``Value`*`CustomActionData``CustomActionData`*

在我们的场景中，消费自定义操作是一个延迟自定义操作，定义如下：

```
<Binary Id="SomeIdForYourBinary" SourceFile="SomePathToYourDll" />
<CustomAction Id="CustomAction2"
              BinaryKey="SomeIdForYourBinary"
              DllEntry="YourCustomActionMethodName"
              Execute="deferred"
              Return="check"
              HideTarget="no"
/> 
```

**配置 InstallExecuteSequence**

当然，消费自定义操作 ( `CustomAction2`) 必须在类型 51 自定义操作 ( `CustomAction1`) 之后运行。所以你必须像这样安排它们：

```
<InstallExecuteSequence>
  <!--Schedule the execution of the custom actions in the install sequence.-->
  <Custom Action="CustomAction1" Before="CustomAction2" />
  <Custom Action="CustomAction2" After="[SomeInstallerAction]" />      
</InstallExecuteSequence> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-07-25T21:13:24.753

对于我们 C++ schlubs，您检索属性如下：

```
MsiGetProperty(hInstall, "CustomActionData", buf, &buflen); 
```

然后你解析'buf'。感谢[邦德拜](https://bondbhai4u.wordpress.com/2008/04/28/wix-custom-actions-and-msigetproperty/)。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-02-18T06:30:15.290

如果传递给自定义操作的值不是键/对集...

IE

```
<SetProperty Id="CustomAction1" Before="CustomAction1" Value="data" Sequence="execute"/>
<CustomAction Id="CustomAction1" BinaryKey="BinaryId" DllEntry="MethodName" Execute="deferred"/> 
```

...然后可以使用以下方法检索整个 blob：

```
string data = session["CustomActionData"]; 
```

# jquery - 使用带有摘要身份验证、jquery ajax 调用的 RestFul PHP Web 服务

> ID：11233269
> 
> 赞同：1
> 
> 时间：2012-06-27T19:04:36.187
> 
> 标签：jquery, ajax, web-services, rest, digest-authentication

我想知道如何使用摘要身份验证调用 RestFul PHP webservice ？

当我创建我的基本请求时，服务器需要身份验证，但我不知道如何发送用户名和密码。我需要这个用于phonegap应用程序。

```
$.ajax({
    type: "GET",
    url: "http://webservice",
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        alert(msg);
    } 
```

});

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:33:58.127

`data`调用时使用参数`$.ajax`

```
$.ajax({
    type: "GET",
    url: "http://webservice",
    data: {username:'Your Username', password:'Your Password'},
    contentType: "application/json; charset=utf-8",
    dataType: "json",
    success: function (msg) {
        alert(msg);
    }
}); 
```

# android - 'display: table' 使 Android 设备上的 div 显示更小

> ID：11233271
> 
> 赞同：2
> 
> 时间：2012-06-27T19:04:41.197
> 
> 标签：android, html, css, mobile

我正在做一个项目，我有一个固定栏（成为导航栏），然后在它的正下方是一个设置的矩形，以便当您单击它时，它会翻转。nav和flipping div的宽度应该是完全相同的，在FF、Chrome、Safari、IE中查看时它们是一样的……但是当我刚刚在Android浏览器中查看时，flipping div大约是宽度比导航栏小 10 像素。我将其范围缩小到我在 div 'outerContainer' 中使用 'display: table' 来垂直和水平居中 'innerContainer' 的内容（设置为 display: table-cell）。这是我当前如何设置的示例，它在所有浏览器中都能正确显示，但在 Android 浏览器中翻转框的宽度较小： [http：](http://jsfiddle.net/adRP4/9/)

一旦我从 .outerContainer 中删除“显示：表”，它就会以适当的宽度显示在 Android 浏览器中，但是内容不再像我想要的那样居中。此示例显示了显示：删除的表格将显示正确的宽度，但内容未按我的意愿居中：http: [//jsfiddle.net/adRP4/10/](http://jsfiddle.net/adRP4/10/)

我使用的垂直/水平居中方法基于：[http](http://www.andy-howard.com/verticalAndHorizontalAlignment/index.html) ://www.andy-howard.com/verticalAndHorizo​​ntalAlignment/index.html （类似于[http://css-tricks.com/vertically-center-multi-lined- text/](http://css-tricks.com/vertically-center-multi-lined-text/) ) ...当我尝试将其更改为她概述的方法时： http: [//css-tricks.com/centering-in-the-unknown/](http://css-tricks.com/centering-in-the-unknown/)我遇到了各种问题...

对于如何解决这个问题，有任何的建议吗？

**更新（6/28）** ——我发现当我检查 iPhone 时，我的宽度不匹配与 Android 浏览器中的完全相同。

谢谢，马克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-04T05:05:00.047

我建议使用 DIV 进行翻转，然后添加一个填充翻转的 div 并设置为 TABLE。

或者我建议在这里使用方法 3 中的浮动：http: [//blog.themeforest.net/tutorials/vertical-centering-with-css/](http://blog.themeforest.net/tutorials/vertical-centering-with-css/)

# ios - iOS应用程序-实体日期属性达到截止日期时推送通知警报

> ID：11233272
> 
> 赞同：0
> 
> 时间：2012-06-27T19:04:43.203
> 
> 标签：ios, nsdate, push-notification, uialertview, uievent

我正在尝试制作一个应用程序，它会在当前事件即将结束时向我发出警告。我有一个实体（事件），带有一个日期属性 - 这是事件的结束日期。如何设置通知提醒以在活动结束前两天弹出？任何指向其他教程或任何提示的链接将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:17:54.867

您可以为此使用本地通知。

[http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194](http://developer.apple.com/library/ios/#DOCUMENTATION/NetworkingInternet/Conceptual/RemoteNotificationsPG/Introduction/Introduction.html#//apple_ref/doc/uid/TP40008194)

# python - 当我进行重定向时，Django 将我的 get 参数加倍，但仅在我们的服务器上

> ID：11233275
> 
> 赞同：1
> 
> 时间：2012-06-27T19:04:46.360
> 
> 标签：python, django, nginx

在我的本地测试机器上它工作正常，但在服务器上它会加倍 GET 参数。

例如，使用以下代码：

```
return redirect('/add?c='+str(rm.id)) 
```

例如，我以 /add?c=3423?c=3423 结尾。

和

```
return redirect('/add?success') 
```

让我加入 /add?success?success

有谁知道怎么回事？

**编辑：**这是我的相关行 urls.py 和我的 nginx 配置

```
url(r'^add/$', 'rumors.views.add'),

server{
    listen 0.0.0.0:443 ssl;
    server_name www.****.com ****.com;
    ssl_certificate     /opt/etc/***;
    ssl_certificate_key /opt/etc/***;

    keepalive_timeout 70;
    access_log /var/log/nginx/access.log;
    error_log /var/log/nginx/error.log;

    location / {
        auth_basic "Restricted";
        auth_basic_user_file /opt/etc/.htpasswd;
        uwsgi_pass   unix:///tmp/uwsgi_***.sock;
        include        uwsgi_params;
    }

    location /static {
            # Point this wherever the static files for your django app are stored (i.e. MEDIA_ROOT)
            alias /opt/apps/****/static;
    }

}
server {
listen 80 default_server;
server_name "";

location / {
    rewrite ^ https://****.com$request_uri permanent;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:18:08.117

一个随机的刺，还没有知道足够的信息......

可能发生的事情是第一个请求通过 Web 服务器并到达 django。Django 使用查询字符串重定向到一个新的 url，然后请求再次通过网络服务器返回。那时，我认为 Web 服务器不正确地拆分模式。通常，当我看到这个时，网络服务器希望看到模式上的尾部斜杠，以通知它应该将整个 url 模式原始处理：

所以试试这个也许（添加斜杠）：

```
return redirect('/add/?c='+str(rm.id))

return redirect('/add/?success') 
```

除此之外，您可能需要更详细地了解您的生产 Web 服务器。

如果您的生产服务器确实在执行重定向，而不是 django，那么您绝对应该考虑确保规则中存在尾部斜杠。

**更新：基于添加的 nginx conf**

我认为您的问题可能是您对 https 的重写规则。由于单个缺失，它很可能重新附加查询字符串`?`

[http://wiki.nginx.org/HttpRewriteModule](http://wiki.nginx.org/HttpRewriteModule)

> 如果在替换参数行中指示，则将请求参数的其余部分附加到它们。为避免附加它们，请将问号作为最后一个字符：
> 
> `rewrite ^/users/(.*)$ /show?user=$1? last;`

尝试在您的 nginx conf 中进行此更改：

```
location / {
    rewrite ^ https://****.com$request_uri? permanent;
} 
```

最后，为了解决您对 https 重定向行为的评论，我认为您可能也需要调整它。我实际上在我的一台服务器上做了几乎完全相同的事情。但是我将 ssl 服务器设为默认值，并且我不在端口 80 服务器中使用 location 指令：

```
server {
        server_name www.foo.com foo.com;
        rewrite ^ https://$host$request_uri? permanent; 
}

server {
        listen 443 default_server ssl;
        ...
} 
```

# mysql - 在 MySQL 5.5 的“查询结束”中运行更长时间的微小插入查询，过去在 5.0 中什么都没有

> ID：11233276
> 
> 赞同：0
> 
> 时间：2012-06-27T19:04:46.407
> 
> 标签：mysql, performance

我真的很困惑。我们有一个流程 - 诚然效率低下，我正在修复它 - 运行大约 25 万次微小的更新查询。这些在 MySQL 5.0 上的主服务器上在半小时内完成；新升级的 MySQL 5.5 slave 已经在它们上面工作了六个小时。关键似乎是“查询结束”——每个人在这种状态下在从属服务器上花费超过十分之一秒，这确实拖累了事情，因为每秒 10 个查询意味着，嗯......六个小时。master 在整个查询中花费的时间不到 0.06 秒，而这一次在“查询结束”中花费了 0.13 秒（查询的 89%）。

5.5 是否改变了我的 5.0 配置干扰的东西？我束手无策，因为这真的开始减慢我们拥有的一些像这样低效的报告。我会更改报告，但我也想找出问题所在。

在你问之前：5.5 从站仍然在 MyISAM 中做所有事情，所以这没有改变。其实配置和其他的一样，还是5.0，slave有的，那个slave也是半个小时就搞定了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T16:08:55.017

禁用从属服务器上的二进制日志修复了它。这让我担心我们何时将 master 升级到 5.5，但现在情况要好得多。

# iphone - 如何对相机胶卷中的照片进行方形切割？

> ID：11233277
> 
> 赞同：8
> 
> 时间：2012-06-27T19:04:47.780
> 
> 标签：iphone, camera

我想像 instagram 一样在 iPhone 上尝试一些图像过滤器功能。我使用 imagePickerController 从相机胶卷中获取照片。我了解 imagePickerController 返回的图像已减少以节省内存。将原始图像加载到 UIImage 是不明智的。但是如何处理图像然后将其保存为原始像素？我使用 iPhone 4S 作为我的开发设备。

相机胶卷中的原始照片为 3264 * 2448。

UIImagePickerControllerOriginalImage 返回的图片是 1920 * 1440

UIImagePickerControllerEditedImage 返回的图片是 640 * 640

imageViewOld(使用 UIImagePickerControllerCropRect [80,216,1280,1280] 裁剪 UIImagePickerControllerOriginalImage 返回的图像) 为 1280 * 1224

imageViewNew（使用双倍大小的 UIImagePickerControllerCropRect [80,216,2560,2560] 裁剪 UIImagePickerControllerOriginalImage 返回的图像）为 1840 * 1224。

我通过instagram检查同一张照片是1280 * 1280

我的问题是：

1.  为什么 UIImagePickerControllerOriginalImage 不返回“原始”照片？为什么要缩小到 1920 * 1440？
2.  为什么 UIImagePickerControllerEditedImage 不返回 1280 * 1280 的图像？正如
    UIImagePickerControllerCropRect 显示的那样，它被 1280 * 1280 正方形切割？

3.  如何对原始照片进行方形切割以成为 2448 * 2448 图像？

提前致谢。下面是我的代码：

```
 - (void)imagePickerController:(UIImagePickerController *)picker  didFinishPickingMediaWithInfo:(NSDictionary *)info
  {

   NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
   if ([mediaType isEqualToString:@"public.image"])
   {

    UIImage *imageEdited = [info objectForKey:UIImagePickerControllerEditedImage];
    UIImage *imagePicked = [info objectForKey:UIImagePickerControllerOriginalImage];

    CGRect cropRect;
    cropRect = [[info valueForKey:@"UIImagePickerControllerCropRect"] CGRectValue];

    NSLog(@"Original width = %f height= %f ",imagePicked.size.width, imagePicked.size.height);
    //Original width = 1440.000000 height= 1920.000000

    NSLog(@"imageEdited width = %f height = %f",imageEdited.size.width, imageEdited.size.height);
    //imageEdited width = 640.000000 height = 640.000000

    NSLog(@"corpRect %f %f %f %f", cropRect.origin.x, cropRect.origin.y , cropRect.size.width, cropRect.size.height);
    //corpRect 80.000000 216.000000 1280.000000 1280.000000

    CGRect rectNew = CGRectMake(cropRect.origin.x, cropRect.origin.y , cropRect.size.width*2, cropRect.size.height*2);

    CGRect rectOld = CGRectMake(cropRect.origin.x, cropRect.origin.y , cropRect.size.width, cropRect.size.height);

    CGImageRef imageRefNew = CGImageCreateWithImageInRect([imagePicked CGImage], rectNew);
    CGImageRef imageRefOld = CGImageCreateWithImageInRect([imagePicked CGImage], rectOld);

    UIImageView *imageViewNew = [[UIImageView alloc] initWithImage:[UIImage imageWithCGImage:imageRefNew]];
    CGImageRelease(imageRefNew);

    UIImageView *imageViewOld = [[UIImageView alloc] initWithImage:[UIImage imageWithCGImage:imageRefOld]];
    CGImageRelease(imageRefOld);

    NSLog(@"imageViewNew width = %f height = %f",imageViewNew.image.size.width, imageViewNew.image.size.height);
    //imageViewNew width = 1840.000000 height = 1224.000000

    NSLog(@"imageViewOld width = %f height = %f",imageViewOld.image.size.width, imageViewOld.image.size.height);
    //imageViewOld width = 1280.000000 height = 1224.000000

     UIImageWriteToSavedPhotosAlbum(imageEdited, nil, nil, NULL);

     UIImageWriteToSavedPhotosAlbum([imageViewNew.image imageRotatedByDegrees:90.0], nil, nil, NULL);
     UIImageWriteToSavedPhotosAlbum([imageViewOld.image imageRotatedByDegrees:90.0], nil, nil, NULL);

    //assign the image to an UIImage Control
    self.imageV.contentMode = UIViewContentModeScaleAspectFit;
    self.imageV.frame = CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.width);
    self.imageV.image = imageEdited;

  }

  [self dismissModalViewControllerAnimated:YES];

 } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-28T02:40:42.477

As you have observed the UIImagePickerController will return a scaled down edited image sometimes 640x640 sometimes 320x320 (device dependent).

Your question:

> How can I do a square cut to original photo to be a 2448 * 2448 image?

To do this you need to first use the `UIImagePickerControllerCropRect` to create a new image from the original image obtained using the `UIImagePickerControllerOriginalImage` key of the info dictionary. Using the Quartz Core method, `CGImageCreateWithImageInRect` you can create a new image that only contains the pixels bounded by the passed rect; in this case the crop rect. You will need to take into account orientation in order for this to work properly. Then you need only scale the image to your desired size. It's important to note that the crop rect is relative to the original image when after it has been oriented correctly, not as it comes out of the camera or photo library. This is why we need to transform the crop rect to match the orientation when we start using Quartz methods to create new images, etc.

I took your code above and set it up to create a 1280x1280 image from the original image based on the crop rect. There are still some edge cases here, i.e. taking into account that the crop rect can sometimes have negative values, (the code assumes a square cropping rect) that have not been addressed.

1.  First transform the crop rect to take into account the orientation of the incoming image and size. This `transformCGRectForUIImageOrientation` function is from [NiftyBean](http://www.niftybean.com/2009/10/selecting-regions-from-rotated-exif-images-on-iphone/)
2.  Create an image that is cropped to the transformed cropping rect.
3.  Scale (and rotate) the image to the desired size. i.e. 1280x1280\.
4.  Create a UIImage from the CGImage with correct scale and orientation.

Here is your code with the changes: **UPDATE** New code has been added below this that should take care of the missing cases.

```
- (void)imagePickerController:(UIImagePickerController *)picker didFinishPickingMediaWithInfo:(NSDictionary *)info {
NSString *mediaType = [info objectForKey:UIImagePickerControllerMediaType];
if ([mediaType isEqualToString:@"public.image"])
{

    UIImage *imageEdited = [info objectForKey:UIImagePickerControllerEditedImage];
    UIImage *imagePicked = [info objectForKey:UIImagePickerControllerOriginalImage];

    CGRect cropRect;
    cropRect = [[info valueForKey:@"UIImagePickerControllerCropRect"] CGRectValue];

    NSLog(@"Original width = %f height= %f ",imagePicked.size.width, imagePicked.size.height);
    //Original width = 1440.000000 height= 1920.000000

    NSLog(@"imageEdited width = %f height = %f",imageEdited.size.width, imageEdited.size.height);
    //imageEdited width = 640.000000 height = 640.000000

    NSLog(@"corpRect %@", NSStringFromCGRect(cropRect));
    //corpRect 80.000000 216.000000 1280.000000 1280.000000

    CGSize finalSize = CGSizeMake(1280,1280); 
    CGImageRef imagePickedRef = imagePicked.CGImage;

    CGRect transformedRect = transformCGRectForUIImageOrientation(cropRect, imagePicked.imageOrientation, imagePicked.size);
    CGImageRef cropRectImage = CGImageCreateWithImageInRect(imagePickedRef, transformedRect);
    CGColorSpaceRef colorspace = CGImageGetColorSpace(imagePickedRef);
    CGContextRef context = CGBitmapContextCreate(NULL, 
                                                 finalSize.width, 
                                                 finalSize.height,
                                                 CGImageGetBitsPerComponent(imagePickedRef),
                                                 CGImageGetBytesPerRow(imagePickedRef),
                                                 colorspace,
                                                 CGImageGetAlphaInfo(imagePickedRef));
    CGContextSetInterpolationQuality(context, kCGInterpolationHigh); //Give the context a hint that we want high quality during the scale
    CGContextDrawImage(context, CGRectMake(0, 0, finalSize.width, finalSize.height), cropRectImage);
    CGImageRelease(cropRectImage);

    CGImageRef instaImage = CGBitmapContextCreateImage(context);
    CGContextRelease(context);

    //assign the image to an UIImage Control
    UIImage *image = [UIImage imageWithCGImage:instaImage scale:imagePicked.scale orientation:imagePicked.imageOrientation];
    self.imageView.contentMode = UIViewContentModeScaleAspectFit;
    self.imageView.image = image;
    CGImageRelease(instaImage);

    UIImageWriteToSavedPhotosAlbum(image, nil, nil, nil);
}

[self dismissModalViewControllerAnimated:YES]; 
```

}

```
CGRect transformCGRectForUIImageOrientation(CGRect source, UIImageOrientation orientation, CGSize imageSize) {
switch (orientation) {
    case UIImageOrientationLeft: { // EXIF #8
        CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
        CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI_2);
        return CGRectApplyAffineTransform(source, txCompound);
    }
    case UIImageOrientationDown: { // EXIF #3
        CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
        CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI);
        return CGRectApplyAffineTransform(source, txCompound);
    }
    case UIImageOrientationRight: { // EXIF #6
        CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(0.0, imageSize.width);
        CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI + M_PI_2);
        return CGRectApplyAffineTransform(source, txCompound);
    }
    case UIImageOrientationUp: // EXIF #1 - do nothing
    default: // EXIF 2,4,5,7 - ignore
        return source;
}
} 
```

**UPDATE** I have made a couple of methods that will take care of the rest of the cases. The steps are basically the same, with a couple of modifications.

1.  First modification is to correctly transform and scale the context to handle the orientation of the incoming image,
2.  and the second is to support the non square crops you can get from the `UIImagePickerController`. In these cases the square image is filled with a color of your choosing.

**New Code**

```
// CropRect is assumed to be in UIImageOrientationUp, as it is delivered this way from the UIImagePickerController when using AllowsImageEditing is on.
// The sourceImage can be in any orientation, the crop will be transformed to match
// The output image bounds define the final size of the image, the image will be scaled to fit,(AspectFit) the bounds, the fill color will be
// used for areas that are not covered by the scaled image. 
-(UIImage *)cropImage:(UIImage *)sourceImage cropRect:(CGRect)cropRect aspectFitBounds:(CGSize)finalImageSize fillColor:(UIColor *)fillColor {

CGImageRef sourceImageRef = sourceImage.CGImage;

//Since the crop rect is in UIImageOrientationUp we need to transform it to match the source image.
CGAffineTransform rectTransform = [self transformSize:sourceImage.size orientation:sourceImage.imageOrientation];
CGRect transformedRect = CGRectApplyAffineTransform(cropRect, rectTransform);

//Now we get just the region of the source image that we are interested in.
CGImageRef cropRectImage = CGImageCreateWithImageInRect(sourceImageRef, transformedRect);

//Figure out which dimension fits within our final size and calculate the aspect correct rect that will fit in our new bounds
CGFloat horizontalRatio = finalImageSize.width / CGImageGetWidth(cropRectImage);
CGFloat verticalRatio = finalImageSize.height / CGImageGetHeight(cropRectImage);
CGFloat ratio = MIN(horizontalRatio, verticalRatio); //Aspect Fit
CGSize aspectFitSize = CGSizeMake(CGImageGetWidth(cropRectImage) * ratio, CGImageGetHeight(cropRectImage) * ratio);

CGContextRef context = CGBitmapContextCreate(NULL,
                                             finalImageSize.width,
                                             finalImageSize.height,
                                             CGImageGetBitsPerComponent(cropRectImage),
                                             0,
                                             CGImageGetColorSpace(cropRectImage),
                                             CGImageGetBitmapInfo(cropRectImage));

if (context == NULL) {
    NSLog(@"NULL CONTEXT!");
}

//Fill with our background color
CGContextSetFillColorWithColor(context, fillColor.CGColor);
CGContextFillRect(context, CGRectMake(0, 0, finalImageSize.width, finalImageSize.height));

//We need to rotate and transform the context based on the orientation of the source image.
CGAffineTransform contextTransform = [self transformSize:finalImageSize orientation:sourceImage.imageOrientation];
CGContextConcatCTM(context, contextTransform);

//Give the context a hint that we want high quality during the scale
CGContextSetInterpolationQuality(context, kCGInterpolationHigh); 

//Draw our image centered vertically and horizontally in our context.
CGContextDrawImage(context, CGRectMake((finalImageSize.width-aspectFitSize.width)/2, (finalImageSize.height-aspectFitSize.height)/2, aspectFitSize.width, aspectFitSize.height), cropRectImage);

//Start cleaning up..
CGImageRelease(cropRectImage);

CGImageRef finalImageRef = CGBitmapContextCreateImage(context);
UIImage *finalImage = [UIImage imageWithCGImage:finalImageRef];

CGContextRelease(context);
CGImageRelease(finalImageRef);
return finalImage;
}

//Creates a transform that will correctly rotate and translate for the passed orientation.
//Based on code from niftyBean.com
- (CGAffineTransform) transformSize:(CGSize)imageSize orientation:(UIImageOrientation)orientation {

CGAffineTransform transform = CGAffineTransformIdentity;
switch (orientation) {
    case UIImageOrientationLeft: { // EXIF #8
        CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(imageSize.height, 0.0);
        CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI_2);
        transform = txCompound;
        break;
    }
    case UIImageOrientationDown: { // EXIF #3
        CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(imageSize.width, imageSize.height);
        CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,M_PI);
        transform = txCompound;
        break;
    }
    case UIImageOrientationRight: { // EXIF #6
        CGAffineTransform txTranslate = CGAffineTransformMakeTranslation(0.0, imageSize.width);
        CGAffineTransform txCompound = CGAffineTransformRotate(txTranslate,-M_PI_2);
        transform = txCompound;
        break;
    }
    case UIImageOrientationUp: // EXIF #1 - do nothing
    default: // EXIF 2,4,5,7 - ignore
        break;
}
return transform;

} 
```

# jquery - 不缓存复选框选择

> ID：11233278
> 
> 赞同：0
> 
> 时间：2012-06-27T19:04:53.927
> 
> 标签：jquery, caching, dom

是否有某种方法可以防止浏览器在刷新后缓存复选框选择？

**用例：**

*   用户选择页面上的一些复选框。同时一些内部服务器状态发生变化。
*   用户刷新页面。服务器使用与以前不同的复选框呈现页面，但用户浏览器在大多数情况下会显示旧的选择集

在这些情况下，我通常需要运行一些 js 来设置正确的选择，但是有更好的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-18T03:30:22.390

添加`autocomplete='off'`到复选框的父表单标签

# css - 仅使用 CSS 将元素拉伸到其容器的高度

> ID：11233281
> 
> 赞同：1
> 
> 时间：2012-06-27T19:05:05.543
> 
> 标签：css

考虑以下小提琴：http: [//jsfiddle.net/dts2T/](http://jsfiddle.net/dts2T/)

这已经困扰了我很长一段时间了。这个小提琴中的 Javascript 应该是多余的。但是我在谷歌上搜索了一下我的头发：我怎样才能只使用 CSS 做同样的事情？

问题在于三列中的任何一列都可能包含多个子级。首先，我需要将每个 .column 容器拉伸到 #bottom div 的高度。然后我需要拉伸每个 .column 中最后一个元素的高度，以便它填充其容器的剩余空间。但是如何？

在你们中的任何人建议假列或任何其他蹩脚的假列拉伸解决方案之前，谢谢，但这样的解决方案根本不适用于这个问题。我正在实施的设计建议在柱子和圆角上使用渐变，这将使人造柱子不适用。水平拉伸是世界上最简单的事情，为什么垂直拉伸也同样容易？！啊！！

我真的很感谢你们这些聪明人的帮助。任何建议都可以。如果有建设性的话，我什至会很感激关于假装垂直拉伸的好讨论。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-13T02:21:21.140

这是很多人不时遇到的一个令人头疼的问题。

您可以将部分设置为`display: table;`，将列设置为`display: table-cell;`。甚至边界半径和任何花哨的东西都可以在上面工作。

这是一个工作演示：http: [//jsfiddle.net/MadLittleMods/QykYu/](http://jsfiddle.net/MadLittleMods/QykYu/)

这里还有 HTML 和 CSS：

CSS：

```
.container
{
    display: table;
    width: 100%;
    border: 2px solid #000000;
}
.column
{
    display: table-cell;   
    border: 1px solid #ff0000;  

    border-radius: 10px;        
} 
```

HTML：

```
<section class="container">
    <div class="column">
        <ul>
            <li>Item 1</li>
            <li>Item 2</li>
            <li>Item 3</li>
            <li>Item 4</li>
        </ul>
    </div>
    <div class="column">
        <ul>
            <li>Item 1</li>
            <li>Item 2</li>
            <li>Item 3</li>
            <li>Item 4</li>
            <li>Item 5</li>
            <li>Item 6</li>
            <li>Item 7</li>
        </ul>
    </div>
    <div class="column">
        <ul>
            <li>Item 1</li>
            <li>Item 2</li>
            <li>Item 3</li>
            <li>Item 4</li>
            <li>Item 5</li>
            <li>Item 6</li>
            <li>Item 7</li> 
            <li>Item 8</li>
            <li>Item 9</li>
            <li>Item 10</li>
            <li>Item 11</li>
            <li>Item 12</li>
            <li>Item 13</li>
            <li>Item 14</li>
        </ul>
    </div>
</section> 
```

​</p>

​</p>

# c# - 通过 IoC 减少依赖

> ID：11233282
> 
> 赞同：3
> 
> 时间：2012-06-27T19:05:06.873
> 
> 标签：c#, visual-studio-2010, inversion-of-control

为了减少项目中的依赖关系，我现在拥有所有依赖和实现接口的东西，它们通过 IoC 容器粘合在一起。这意味着项目只需要直接引用此类接口库。

但是，如果您没有将项目指定为对实现的引用（即使您在编译时不需要它），则实现库不包含在可执行文件或安装项目中。

Visual Studio 在某种程度上是否通过在不需要时要求显式引用来促进不良做法？是否可以仅依赖于所需的接口，在这种情况下，获得实现库的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:07:25.070

> Visual Studio 在某种程度上是否通过在不需要时要求显式引用来促进不良做法？

并不真地。您的问题是部署之一，而不是构建。

部署应用程序和构建它是分开的事情——如果你有一个好的部署策略，你就会在它们所属的地方部署实现。

> 是否可以仅依赖于所需的接口，在这种情况下，获得实现库的最佳方法是什么？

最*简单*的方法确实是引用实现程序集。这肯定会让在本地构建和运行变得像 一样容易`F5`，但是你真的想要吗？老实说，如果您和您的团队有只对接口进行编码的纪律，那就是您所需要的（并且有诸如 nDepend 之类的静态分析工具可以帮助确保保持这种情况）。

一种前进的方法是创建一个部署脚本，该脚本将部署所有依赖项，无论是本地还是其他地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:10:28.093

不。这只是他们需要做的最低限度的工作，以便让开发人员无需做任何额外的事情（除了点击`F5`）或默认添加所有引用（这可能会是一团糟并且在旧版本上很慢）硬盘。

对于本地开发构建，您只需在相关项目上执行构建后步骤，即可将 DLL 复制到主工作目录。只需确保将项目添加到要构建的活动配置中，否则您将在构建后经历整个烦人的调试会话，然后才意识到没有构建......哈哈

[VS 2010。后期构建。将文件复制到多个目录/多个输出路径](https://stackoverflow.com/questions/4324347/vs-2010-post-build-copy-files-in-to-multiple-directories-miltiple-output-path)

[在 VS2010 中的 Post Build 事件中将 bin 文件复制到物理文件位置](https://stackoverflow.com/questions/4664386/copy-bin-files-on-to-physical-file-location-on-post-build-event-in-vs2010)

对于全面的应用程序部署，您可能会至少查看 Visual Studio 设置项目*，*但更理想的是[WiX](http://sourceforge.net/projects/wix/)或其他部署工具集。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T19:11:51.377

Visual Studio 不需要这些引用，但您的 IoC 容器需要。添加对项目的引用时，其二进制文件会自动包含在输出文件夹中，这是 IoC 容器将代码粘合在一起所必需的。除了在 Visual Studio 中引用它们的项目之外，还有其他方法可以将这些二进制文件放入输出文件夹 - 也许是[构建后步骤](http://msdn.microsoft.com/en-us/library/e85wte0k%28v=vs.80%29.aspx)？

# hadoop - 为什么 Hadoop map reduce 作业中允许的计数器数量有限制？

> ID：11233283
> 
> 赞同：5
> 
> 时间：2012-06-27T19:05:16.063
> 
> 标签：hadoop, mapreduce, counter

当我尝试以编程方式创建许多作业计数器时，我正在使用 Hadoop map-reduce 并得到了 CountersExceededException。我知道我可以通过配置文件增加允许的计数器数量，但有谁知道：

a) 为什么 map-reduce 计数器有限制

和

b) 增加 map-reduce 计数器的最大数量是好还是坏？

我正在使用 hadoop 0.20.2

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:24:36.563

[请参阅这篇文章](https://developer.yahoo.com/blogs/hadoop/apache-hadoop-best-practices-anti-patterns-465.html)中关于计数器的部分。

> ## 计数器
> 
> 计数器代表全局计数器，由 Map/Reduce 框架或应用程序定义。应用程序可以定义任意计数器并在 map 和/或 reduce 方法中更新它们。这些计数器然后由框架全局聚合。
> 
> 计数器适用于跟踪少数重要的全局信息。它们绝对不是为了聚合应用程序的非常细粒度的统计信息。计数器非常昂贵，因为 JobTracker 必须在整个应用程序期间维护每个 map/reduce 任务的每个计数器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-28T01:19:25.480

> 以防万一你想增加计数器的最大数量。

最后我看到了代码，最大数量的计数器已经被硬编码在代码中并且不可配置。请查看我一段时间前写的[博客条目以获取更多详细信息，并查看](http://www.thecloudavenue.com/2011/12/limiting-usage-counters-in-hadoop.html)[最新代码](http://svn.apache.org/repos/asf/hadoop/)以检查是否已对其进行修改以使其可配置。

# google-apps-script - 我可以测试一个脚本是否被授权，如果没有，我可以调用谷歌授权对话框吗？

> ID：11233285
> 
> 赞同：0
> 
> 时间：2012-06-27T19:05:28.457
> 
> 标签：google-apps-script

我的用户将不得不每 4 周授权一次新电子表格中的脚本。我想在他们第一次打开电子表格时立即调用授权对话框，如果脚本已经被授权，则不要调用它。

目前，我发现的最简单的方法是让他们单击空白纸上的“转到主工作表”按钮（即带有附加脚本的绘图）。如果他们已经授权，他们会被直接带到 Main，如果没有，则会触发授权通知 - 在这种情况下，他们最终不得不在授权后再次单击“转到 Main Sheet”按钮。

我不喜欢它，它很笨重。有没有办法测试脚本是否需要授权并直接调用对话框，例如从 onOpen 事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T10:20:24.423

这是单个用户使授权过程简单明了的一种可能的解决方案。我知道它不会满足您的用例，因为您在同一个电子表格上有多个用户，但它可能包含您可能感兴趣的部分。

这是代码和[示例 SS](https://docs.google.com/spreadsheet/ccc?key=0AnqSFd3iikE3dGV3ejdXbXQzeEpxRnpTbkx2dzdpeWc)（复制它以获得编辑权限，不要忘记它只工作一次！（至少就授权而言，您始终可以撤消工作表删除！！） )

```
function onOpen(){
    if(SpreadsheetApp.getActiveSpreadsheet().getNumSheets()==1){  
var ss = SpreadsheetApp.getActiveSpreadsheet();
  var menuEntries = [{name: "test", functionName: "test"},
                     ];
  ss.addMenu("Recherche",menuEntries);// custom menu
                     }
} // menu appears only if authorization has been processed

function test(){
  if(SpreadsheetApp.getActiveSpreadsheet().getNumSheets()==2){
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  SpreadsheetApp.setActiveSheet(ss.getSheets()[0]);// make first sheet active to be sure
  var del = ss.deleteActiveSheet();
  onOpen;
  }
  Logger.log(findThelastRow('d',0))
    }
//
//
    function findThelastRow(column,index){
              var doc = SpreadsheetApp.getActiveSpreadsheet();
              var lastRow = doc.getSheets()[index].getLastRow()+1;// check last row on the appropriate sheet
              var coldata = doc.getSheets()[index].getRange(column+2+':'+column+lastRow).getValues();// I begin on Row 2 just as you did
          for(i=coldata.length-1;i>=0;i--){
             if(coldata[i][0]!=''){return i+2;break}
          }
          return 0;
        } 
```

注意我在这个例子中的函数只是例子！

重要的是授权完成后删除第一张表的部分。希望这会足够清楚;-)

# python - 哪种形式的 unicode 规范化适合文本挖掘？

> ID：11233286
> 
> 赞同：6
> 
> 时间：2012-06-27T19:05:29.110
> 
> 标签：python, unicode, normalization, unicode-normalization, text-normalization

我已经阅读了很多关于 Unicode 的内容，但我仍然对规范化及其不同形式感到非常困惑。简而言之，我正在从事一个项目，该项目涉及从 PDF 文件中提取文本并执行一些语义文本分析。

我已经设法使用一个简单的 python 脚本令人满意地提取文本，但现在我需要确保所有等效的正交字符串都有一个（并且只有一个）表示。例如，“fi”印刷连字应分解为“f”和“i”。

我看到 python 的`unicodedata.normalize`函数提供了几种用于规范化 unicode 代码点的算法。有人可以解释一下：

*   NFC
*   NFKC
*   NFD
*   NFKD

我阅读了[相关的维基百科文章](http://en.wikipedia.org/wiki/Unicode_equivalence#Normalization)，但对于我微弱的大脑来说，它太不透明了，无法理解。有人可以用简单的英语向我解释一下吗？

另外，您能否推荐一下最适合自然语言处理项目的规范化方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T23:28:23.617

像 é 这样的字符既可以写成单个字符，也可以写成两个字符的序列，一个正`e`则加重音符号（变音符号）。规范化在这些备选方案中始终如一地选择，并将以一致的方式对多个变音符号进行排序。

由于您需要处理连字，因此您应该使用“兼容性（分解）组合”、NFKD 或 NFKC，它们可以使连字标准化。使用组合形式或分解形式可能都可以，但如果您还想进行有损匹配（例如，匹配*é*即使用户键入普通*e*），您可以使用兼容性分解 NFKD 并丢弃变音符号以进行松散匹配。

# visual-studio-2008 - Visual Studio 2008 中的 Npgsql 设计时支持

> ID：11233289
> 
> 赞同：0
> 
> 时间：2012-06-27T19:05:36.130
> 
> 标签：visual-studio-2008, postgresql, design-time, npgsql, gacutil

如何在 Visual Studio 2008 中启用 Npgsql 设计时支持？我完全按照[手册](http://npgsql.projects.postgresql.org/docs/manual/UserManual.html)所说的做了：
1）我在 c:\Program Files (x86)\PostgreSQL\Npgsql\ms.net3.5sp1\ 中安装了 Npgsql.dll
2) cd 进入该目录并运行

```
gacutil -i Npgsql.dll 
```

3) 在“HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft.NETFramework\AssemblyFolders”下添加了一个名为“Npgsql”的新注册表项，并将其默认值设置为我的 Npgsql.dll 的路径，第 1 点。

但是在数据连接/服务器资源管理器中仍然看不到 PostgreSQL 提供程序。我错过了什么或做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T13:58:17.837

Unfortunately the current design time support of Npgsql only works on VS.net 2010 :(

And it is in a very alpha shape.

We are working to get it working on other versions.

This Npgsql.VisualStudio.dll is a very early attempt to create a design time support but it doesn't work.

Sorry for that :(

# html - ID 的 CSS 不影响 img 标签

> ID：11233290
> 
> 赞同：1
> 
> 时间：2012-06-27T19:05:36.247
> 
> 标签：html, css, special-characters, image

昨晚我遇到了这个问题，我的 CSS 不会影响以下 HTML 的 img 标签：

```
<div class='container'>
   <div id="grid"><img src='test.jpg' /></div>
</div> 
```

CSS如下：

```
#grid img { position:relative; top:75px; border:5px solid white; } 
```

一切都应该正常工作，但是当我查看上传的 CSS 文档的源代码时，我发现在上一行的末尾输入了一个特殊字符：

```
#grid p { float:right; font-size:34px; }â€‹
#grid img { position:relative; top:75px; border:5px solid white; } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:07:07.777

在我的 IDE 中突出显示该区域并单击退格键解决了该问题。即将在这里发布问题，所以我想我会添加知识以节省其他人的麻烦。

# iphone - cocos2d 高分搞砸了

> ID：11233295
> 
> 赞同：0
> 
> 时间：2012-06-27T19:05:45.377
> 
> 标签：iphone, xcode4, cocos2d-iphone

我尝试设置我的高分，如果超过高分，它将显示在高分中，我已经知道了一些东西，但是现在一旦超过高分，它将获得相同数量的高分上升一点。例如，每次击杀获得一分，如果高分是 7 分，则需要再击杀 7 次才能在高分板上达到 8 分。一旦您获得高分，分数就会再次重置，并在高分中获得相同数量的分数以上升一次。希望这是有道理的。

这是代码

.h 文件

```
 int _score;
    int _oldScore;
   CCLabelTTF *_scoreLabel;
    @property (nonatomic, assign) CCLabelTTF *scoreLabel; 
```

.m 文件

```
 _score = [[NSUserDefaults standardUserDefaults] integerForKey:@"score"];           

     _oldScore = -1;
     self.scoreLabel = [CCLabelTTF labelWithString:@"" dimensions:CGSizeMake(100, 50) alignment:UITextAlignmentRight fontName:@"Marker Felt" fontSize:32];
     _scoreLabel.position = ccp(winSize.width - _scoreLabel.contentSize.width, _scoreLabel.contentSize.height);
     _scoreLabel.color = ccc3(255,0,0);
     [self addChild:_scoreLabel z:1];     

    if (_score > _oldScore) {

   _oldScore = _score;

    [_scoreLabel setString:[NSString stringWithFormat:@"score%d", _score]];

    [[NSUserDefaults standardUserDefaults] setInteger:_oldScore forKey:@"score"];

   [[NSUserDefaults standardUserDefaults] synchronize];          

      _score = 0;         

}

  } 
```

现在我知道 _score = 0; 休息了董事会，但一旦获得高分，它就会继续重置。另一个例子是，如果你在高分板上有 12 分，则需要 24 分的杀戮才能在高分上达到 13 分。

如果我取出 _score=0; 还有一件事 分数将继续堆积，但不会重新开始。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:12:45.817

我不明白这些行：

```
 _score = [[NSUserDefaults standardUserDefaults] integerForKey:@"score"];           
 _oldScore = -1; 
```

不`[[NSUserDefaults standardUserDefaults] integerForKey:@"score"]`应该是旧分数吗？为什么将_oldScore 设置为-1？

也许我错过了一些东西......

# coupling - 是否应该/是否也应该在同一类的方法之间应用松散耦合？

> ID：11233298
> 
> 赞同：0
> 
> 时间：2012-06-27T19:05:53.983
> 
> 标签：coupling

假设类`A`有方法`M1`，`M2`与其他类耦合度低

a) 我们是否还应该确保类中的每个单独方法`A`不与同一类中的任何其他方法紧密耦合？因此，我们是否应该确保更改 in 的代码`A.M1`并不需要我们更改 in 的代码`A.M2`？

b）我假设如果`A.M1`正在执行两个密切相关的任务**T1**和**T2**而不仅仅是一个任务，那么**T1**和**T2**是紧密耦合的，因为更改`T1`可能还需要更改`T2`？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:23:04.770

编写遵循单点维护的代码。如果你改变了一些东西，只在一个地方改变它。这将减少整个代码中的错误。话虽如此，避免代码重复并将类、方法、命名空间等拆分为具有单一职责的部分。

更改方法 A() 中的某些内容不应强迫您更改方法 B()。也许在两者中使用一个共享通用功能的辅助函数。

编辑：SOLID 首字母缩略词对于软件设计/工程来说是一个很好的缩略词：[http://en.wikipedia.org/wiki/SOLID_(object-oriented_design)](http://en.wikipedia.org/wiki/SOLID_%28object-oriented_design%29)

# php - 如何使用此代码防止随机帖子/条目出现两次？

> ID：11233304
> 
> 赞同：2
> 
> 时间：2012-06-27T19:06:14.033
> 
> 标签：php, wordpress

我正在使用此功能重定向到随机帖子。我试图找到一种机制来防止相同的随机帖子连续出现两次。谁能给个提示？

```
function sofa_view_random_post() {

    // make array of all posts IDs
    $q = get_posts('numberposts=-1');
    $array = array();
    foreach($q as $p) {
        $array[] = $p->ID;
    }

    // randomize array to get random post
    $k = array_rand($array);
    $v = $array[$k];
    wp_redirect( get_permalink( $v ) ); exit;

} 
```

我首先获取所有帖子 ID 并将它们放入数组中。我随机化数组以获得一个值。但不确定如何防止触发相同的值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:11:11.327

将先前的结果存储在会话中，并确保您不再选择该结果：

```
if( !isset( $_SESSION['last_random_post'])) {
    $_SESSION['last_random_post'] = -1;
}

do {
    $k = array_rand( $array);
} while( $k == $_SESSION['last_random_post']);

$_SESSION['last_random_post'] = $k; 
```

我不确定这如何特别适用于 wordpress，但它应该很容易适应：

为了完整起见，这里是包含上述代码的函数：

```
function sofa_view_random_post() {

    if( !isset( $_SESSION['last_random_post'])) {
        $_SESSION['last_random_post'] = -1; // Or null, as long as its an invalid ID
    }

    // make array of all posts IDs
    $q = get_posts('numberposts=-1');
    $array = array();
    foreach($q as $p) {
        $array[] = $p->ID;
    }

    // randomize array to get random post
    do {
        $k = array_rand( $array);
    } while( $k == $_SESSION['last_random_post']);

    $_SESSION['last_random_post'] = $k;

    $v = $array[$k];
    wp_redirect( get_permalink( $v ) ); exit;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:13:15.640

使用[会话](http://php.net/manual/en/book.session.php)。将上次使用的 ID 存储在会话数据中，并在构建可能的帖子列表时，从列表中省略该帖子。

像这样：

```
function sofa_view_random_post() {

    // Initialise last post value as NULL if missing    
    if (!isset($_SESSION['last_post'])) {
        $_SESSION['last_post'] = NULL;
    }

    // Make array of all posts IDs except last viewed
    $q = get_posts('numberposts=-1');
    $array = array();
    foreach ($q as $p) {
        if ($p->ID !== $_SESSION['last_post']) {
            // Only add this ID if it's not the last viewed post
            $array[] = $p->ID;
        }
    }

    // Get random post ID and store it in the session
    $k = array_rand($array);
    $_SESSION['last_post'] = $v = $array[$k];

    // Redirect user
    wp_redirect( get_permalink( $v ) );
    exit;

} 
```

# jquery - jQuery关闭按钮在IE中不起作用

> ID：11233305
> 
> 赞同：0
> 
> 时间：2012-06-27T19:06:20.607
> 
> 标签：jquery

我现在绝对无法访问带有 IE 的机器 - 我想知道是否有人可以查看我的 jQuery 以获取以下 URL 并帮助我诊断正在发生的“问题” - “关闭”按钮应该淡出父级它位于任何地方，但显然似乎存在问题

（单击菜单项之一查看大图）：

[http://eatatcarlos.com/en/menu](http://eatatcarlos.com/en/menu)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:09:13.720

您的 JavaScript 代码中有`console.log`语句。IE 让他们窒息。

# ios - 像 Yell.com 这样的公司在他们的应用程序中使用什么数据系统？

> ID：11233306
> 
> 赞同：0
> 
> 时间：2012-06-27T19:06:20.817
> 
> 标签：ios, sqlite

我目前为本地业务目录开发 iOS 应用程序，并且使用 SQLite。可悲的是，这意味着当添加新业务并将更新的数据库推出时，我必须输入几个小时的数据，因为桌面站点使用 Joomla CMS。

显然，提供目录服务的公司不必担心这些事情。他们是怎么做到的呢？核心数据伴随着屏幕刮板？

PS。如果这个问题不适合在 StackOverflow 上提出，我深表歉意，我不知道还能在哪里问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:12:27.827

通常，这些公司具有客户端/服务器架构，其中数据位于中央服务器上，移动应用程序通过互联网上的公开 API 提取数据。

要自己复制此内容，您将拥有一个包含所有数据的服务器，并通过 API/Web 服务公开它（因此您需要考虑身份验证和安全性），当您的移动应用程序需要更新数据库或只需将查询发送到 Web 服务并返回适当的结果，这样数据库就不会存在于 iOS 设备本身上。第一种方法（更新数据库）的缺点是您需要等待数据库完全更新，然后用户才能使用应用程序，第二种方法的缺点是进行查询，客户端需要一个活跃的互联网联系。

您首先要查看的是是否/如何通过 API（XML/JSON？）公开存储在 Joomla CMS 中的数据

# pyqt4 - 为 QTreeView 中的多个项目设置选择

> ID：11233308
> 
> 赞同：1
> 
> 时间：2012-06-27T19:06:28.020
> 
> 标签：pyqt4

所以我一直在使用：

```
treeView.setCurrentIndex( index ) 
```

在我的 treeView 中设置活动项目。但是，如果我有一个想要选择的项目索引数组，我该如何添加到我当前选择的项目中？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:26:41.870

QTreeView没有 QTreeWidget 那么多的捆绑方法，因此您必须下拉到其他组件才能获得某些功能[。](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qtreeview.html)在这种情况下，您可能想要使用[SelectionModel](http://www.riverbankcomputing.co.uk/static/Docs/PyQt4/html/qitemselectionmodel.html#select)。

```
selModel = treeView.selectionModel()
for idx in indexList:
    selModel.select(idx, selModel.Select) 
```

# java - 如何让一个类成为一个bean？

> ID：11233311
> 
> 赞同：2
> 
> 时间：2012-06-27T19:06:34.310
> 
> 标签：java, spring

我有一个 MongoService 课程

```
public class MongoService {

    private final Mongo mongo;
    private final String database;
    private static final Logger LOGGER = LoggerFactory.getLogger(MongoService.class);

    public MongoService(@Nonnull final String host, final int port, @Nonnull final String db) throws UnknownHostException {
        mongo = new Mongo(host, port);
        database = db;
    }

    public void putDocument(@Nonnull final DBObject document) {
        LOGGER.info("inserting document - " + document.toString());
        mongo.getDB(database).getCollection(getCollectionName(document)).insert(document, WriteConcern.SAFE);
    }

    public void putDocuments(@Nonnull final List<DBObject> documents) {
        for (final DBObject document : documents) {
            putDocument(document);
        }
    }

    @Nullable
    public <T extends DBObject> T getDocument(@Nonnull final T document) {
        final DBCollection collection = mongo.getDB(database).getCollection(getCollectionName(document));
        collection.setObjectClass(document.getClass());
        //noinspection unchecked
        return (T) collection.findOne(document);
    }

    @Nonnull
    public <T extends DBObject> List<T> getDocuments(@Nonnull final T document) {
        final List<DBObject> documents = new ArrayList<DBObject>();
        final DBCollection collection = mongo.getDB(database).getCollection(getCollectionName(document));
        collection.setObjectClass(document.getClass());
        final DBCursor dbCursor = collection.find();
        if (dbCursor != null) {
            documents.add(dbCursor.next());
        }
        //noinspection unchecked
        return (List<T>) documents;
    }
} 
```

我想创建一个此类的单例 bean，它从文件中读取主机、int、端口、数据库

**问题**

我将如何实现这一目标？

*   从文件中提供配置参数的最佳方法是什么
*   我如何使它成为单例豆？

我是 Spring 新手，真的不知道如何实现这一点

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:10:49.537

Spring bean 默认情况下是单例的，所以..

```
@Service
public class MongoService 
```

查看[如何将属性值注入使用注释配置的 Spring Bean？](https://stackoverflow.com/questions/317687/inject-property-value-into-spring-bean)对于注入属性，它非常漂亮。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:20:45.033

您可以将值传递给构造函数，如下所示

```
<bean id="mongoService" class="MongoService">
  <constructor-arg name="host" type="java.lang.String" value="localhost"/>
  <constructor-arg name="port" type="long" value="1234"/>
  <constructor-arg name="db" type="java.lang.String" value="dbname"/>
</bean> 
```

注意：这是 Spring 3 语法，旧版本不支持`name`参数，只需将其删除。

如果你想进一步外化属性，你可以这样做。

```
<bean class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
  <property name="locations" value="jdbc.properties"/>
</bean>

<bean id="mongoService" class="MongoService">
  <constructor-arg name="host" type="java.lang.String" value="${host}"/>
  <constructor-arg name="port" type="long" value="${port}"/>
  <constructor-arg name="db" type="java.lang.String" value="${db}"/>
</bean> 
```

确保 jdbc.properties 在您的类路径中。

jdbc.properties 中的条目

```
host=localhost
port=1234
db=dbname 
```

编辑：对于你的第二个问题，这个`mongoService`bean 默认是单例的。

# scala - 如何设置 Play 的 POST 标头！2.0 网络服务查询？

> ID：11233317
> 
> 赞同：2
> 
> 时间：2012-06-27T19:06:49.070
> 
> 标签：scala, playframework-2.0

我正在构建一个 Web 服务请求，该请求将一些数据提交给我们使用的第 3 方服务：

```
val promise = WS.url("http://example.com/api/xxx/testers?api_key=%s" format(prefineryAPIKey)).post(requestBody)
val data = promise.value.get.body 
```

变量`requestBody`是 XML 内容，我需要用`"Content-Type: text/xml"`. 如何在网络服务中设置它？它是否像 Play! 通过链接的结果一样工作`.as("text/xml")`？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T19:19:41.520

找到了！我不得不挖掘 API 文档并解密一些编译器错误，但基本上上面看起来像：

```
val promise = WS
  .url("http://example.com/api/xxx/testers?api_key=%s" format(prefineryAPIKey))
  .withHeaders("Content-Type" -> "text/xml")
  .post(requestBody) 
```

当您调用 WS 时，您正在组合一个`WSRequestHolder`. WSRequest 的文档在这里：

[http://www.playframework.org/documentation/api/2.0/scala/index.html#play.api.libs.ws.WS$$WSRequestHolder](http://www.playframework.org/documentation/api/2.0/scala/index.html#play.api.libs.ws.WS$$WSRequestHolder)

# javascript - 如何保持动画之间的时间间隔？

> ID：11233328
> 
> 赞同：0
> 
> 时间：2012-06-27T19:07:37.480
> 
> 标签：javascript, jquery, animation

为了解释我的问题，我在这里创建了这个[http://jsfiddle.net/Jams/XNVB2/](http://jsfiddle.net/Jams/XNVB2/)我希望在`div1`完成其 25% 动画`div2`时开始其动画，并在`div1`完成其 50% 动画时`div3`开始其动画。

这是jquery代码

```
$("#div1").animate({width:400},2000);
$("#div2").animate({width:400},2000);
$("#div3").animate({width:400},2000); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:12:01.307

这应该工作：http: [//jsfiddle.net/XNVB2/1/](http://jsfiddle.net/XNVB2/1/)

```
$("#div1").animate({
    width: 400
}, 2000);
setTimeout(function () {
    $("#div2").animate({
        width: 400
    }, 2000);
}, 500);
setTimeout(function () {
    $("#div3").animate({
        width: 400
    }, 2000);
}, 1000); 
```

或者，您也可以这样做：http `queue`: [//jsfiddle.net/XNVB2/2/](http://jsfiddle.net/XNVB2/2/)

```
var animLength = 2000;
$("#div1").animate({width:400},animLength);
$("#div2").delay(animLength * 0.25).queue(function(n){
    $(this).animate({width:400},animLength);
    n();
});
$("#div3").delay(animLength * 0.5).queue(function(n){
    $(this).animate({width:400},animLength);
    n();
}); 
```

​</p>

# javascript - 使用 jQuery 的 SPAN 内容的条件

> ID：11233329
> 
> 赞同：0
> 
> 时间：2012-06-27T19:07:37.683
> 
> 标签：javascript, jquery, html

我正在尝试设置一个条件，如果 SPAN 的“total-items”CLASS = 12 的内容，则会弹出一个警报。

这是我的 HTML 代码：

```
<span class="total-items">12</span>​ 
```

这是我的 jQuery 代码：

```
if($('.total-items').html == 12){
    alert("Test");
}    ​​ 
```

我想也许我应该使用 parseInt 函数？不知道怎么做。任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:09:12.687

```
if ( $('.total-items' ).text() === '12' ) 
```

如果 SPAN 的内容可能包含前导或尾随空格，则必须在将其与所需值进行比较之前将其删除：

```
if ( $.trim( $('.total-items' ).text() ) === '12' ) 
```

* * *

此外，请考虑缓存对该 SPAN 的引用，这样您就不必重复查询它。（如果您需要多次检查，请执行此操作。）

```
var $totalItems = $('.total-items' ); 
```

接着

```
if ( $totalItems.text() === '12' ) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:13:50.890

像这样做：

```
if( +$('.total-items').text() === 12){
    alert("Test");
} 
```

当文本为 12 时，这将创建一个弹出窗口。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T19:18:41.737

我将建议不要像那样`12`从`span`'s 文本中进行解析。您这样做的方式使您看起来好像要在页面上显示数字十二。依赖这样的演示项目中的数据是一个坏主意。如果您决定要跨度的内容是`Total items: 12`什么？您将很难从中解析出 12 个，或者您必须引入一个新元素。

这是我的建议：

```
<span id="total-items" data-count="12">12</span> 
```

和：

```
if ($('#total-items').data('count') === '12') {
    // do whatever
} 
```

另外，请注意我`total-items`从 a更改`class`为a `id`。这提醒您，您应该只从一个元素中获取此数据。

# neo4j - 基于 Neo4j 中的相互关系查找不同的节点分组

> ID：11233330
> 
> 赞同：2
> 
> 时间：2012-06-27T19:07:41.020
> 
> 标签：neo4j

是否有一个 Neo4J 图的查询可以遍历所述图并根据相互关系查找节点？例如，如果节点 A 与节点 B 相关（双向），则 B 与 C 相关，C 与 D 相关，D 与 A 相关，A 与 C 相关，B 与 D 相关，这样有每个节点都连接到每个其他节点的子图，是否有一种有效的方法来返回该子图或节点组？

我意识到我的解释很糟糕，所以我在控制台中提供了一个示例图：http: [//console.neo4j.org/r/qb2xmp](http://console.neo4j.org/r/qb2xmp)

在这里，我创建了一个图表，我想返回 3 个或更多相互关联的组 - 因此，在这种情况下，我希望返回 Scott、Josh、Frank 和 Ben 的组，如以及弗兰克、本和埃里克的小组。如果可能的话，我希望能够确定谁组成了这些单独的组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:19:14.580

这是 的一个实例，`Clique Problem`并且是 NP 完全的。
[这是一个关于 SO 的相关问题，有一个很好的解释！](https://stackoverflow.com/questions/2801138/find-all-complete-sub-graphs-within-a-graph)

抱歉，我太早按了 Enter。所以没有“有效”的方法来做到这一点。但在某些情况下，这并非不可尝试，如果您能找到一种算法来解决这个一般问题并在 Neo4J 中实现它，那么您将获得最大的运气。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-13T19:10:43.190

你有没有找到任何解决方案？

我在我[的文本网络可视化](http://textexture.com)项目中实现了类似的东西，但它启动了[Gephi](http://gephi.org) Toolkit（在 Java 上）以在图上执行一些度量计算，检测社区等。但这太重了......

不过，您可能有兴趣研究 Gephi 的算法，尤其是在[Sigma.Js](http://sigmajs.org)中实现的 Force Atlas 布局，尤其是 Gephi 本身使用的模块化算法。这可能会给你一些关于如何进行的线索......

# java - 对使用 Spring WS、HttpClient 和 Exchange WS 的 SoapFaultClientException 感到困惑

> ID：11233331
> 
> 赞同：2
> 
> 时间：2012-06-27T19:07:44.640
> 
> 标签：java, httpclient, spring-ws, exchangewebservices

我正在尝试使用 Spring WS + HttpClient 调用 Exchange WS 2010 API。我收到以下错误...

```
Jun/27 11:39:06,825 controller.AjaxCalendarController.[] - Unknown Error
org.springframework.ws.soap.client.SoapFaultClientException: The request is invalid.
    at org.springframework.ws.soap.client.core.SoapFaultMessageResolver.resolveFault(SoapFaultMessageResolver.java:37)
    at org.springframework.ws.client.core.WebServiceTemplate.handleFault(WebServiceTemplate.java:774)
    at org.springframework.ws.client.core.WebServiceTemplate.doSendAndReceive(WebServiceTemplate.java:600)
    at org.springframework.ws.client.core.WebServiceTemplate.sendAndReceive(WebServiceTemplate.java:537)
    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:384)
    at org.springframework.ws.client.core.WebServiceTemplate.marshalSendAndReceive(WebServiceTemplate.java:378)
    at org.jasig.portlet.calendar.adapter.ExchangeCalendarAdapter.retrieveExchangeEvents(ExchangeCalendarAdapter.java:171)
    at org.jasig.portlet.calendar.adapter.ExchangeCalendarAdapter.getEvents(ExchangeCalendarAdapter.java:132)
    at org.jasig.portlet.calendar.adapter.CalendarEventsDao.getEvents(CalendarEventsDao.java:74)
    at org.jasig.portlet.calendar.mvc.controller.AjaxCalendarController.getEventList(AjaxCalendarController.java:127)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.bind.annotation.support.HandlerMethodInvoker.invokeHandlerMethod(HandlerMethodInvoker.java:176)
    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.invokeHandlerMethod(AnnotationMethodHandlerAdapter.java:358)
    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.doHandle(AnnotationMethodHandlerAdapter.java:345)
    at org.springframework.web.portlet.mvc.annotation.AnnotationMethodHandlerAdapter.handleResource(AnnotationMethodHandlerAdapter.java:293)
    at org.springframework.web.portlet.DispatcherPortlet.doResourceService(DispatcherPortlet.java:825)
    at org.springframework.web.portlet.FrameworkPortlet.processRequest(FrameworkPortlet.java:525)
    at org.springframework.web.portlet.FrameworkPortlet.serveResource(FrameworkPortlet.java:477)
    at org.jasig.portal.portlet.container.FilterChainImpl.doFilter(FilterChainImpl.java:212)
    at org.jasig.portal.portlet.container.FilterChainImpl.processFilter(FilterChainImpl.java:84)
    at org.jasig.portal.portlet.container.FilterManagerImpl.processFilter(FilterManagerImpl.java:103)
    at org.apache.pluto.container.driver.PortletServlet.dispatch(PortletServlet.java:350)
    at org.apache.pluto.container.driver.PortletServlet.doGet(PortletServlet.java:261)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:690)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:803)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.ApplicationDispatcher.invoke(ApplicationDispatcher.java:630)
    at org.apache.catalina.core.ApplicationDispatcher.processRequest(ApplicationDispatcher.java:436)
    at org.apache.catalina.core.ApplicationDispatcher.doForward(ApplicationDispatcher.java:374)
    at org.apache.catalina.core.ApplicationDispatcher.forward(ApplicationDispatcher.java:302)
    at org.apache.pluto.driver.container.DefaultPortletInvokerService.invoke(DefaultPortletInvokerService.java:229)
    at org.apache.pluto.driver.container.DefaultPortletInvokerService.serveResource(DefaultPortletInvokerService.java:149)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:318)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:90)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.aspectj.MethodInvocationProceedingJoinPoint.proceed(MethodInvocationProceedingJoinPoint.java:80)
    at org.jasig.portal.portlet.dao.jpa.ThreadContextClassLoaderAspect.doThreadContextClassLoaderUpdate(ThreadContextClassLoaderAspect.java:63)
    at sun.reflect.GeneratedMethodAccessor101.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethodWithGivenArgs(AbstractAspectJAdvice.java:621)
    at org.springframework.aop.aspectj.AbstractAspectJAdvice.invokeAdviceMethod(AbstractAspectJAdvice.java:610)
    at org.springframework.aop.aspectj.AspectJAroundAdvice.invoke(AspectJAroundAdvice.java:65)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
    at $Proxy210.serveResource(Unknown Source)
    at org.apache.pluto.container.impl.PortletContainerImpl.doServeResource(PortletContainerImpl.java:203)
    at org.jasig.portal.portlet.rendering.PortletRendererImpl.doServeResource(PortletRendererImpl.java:598)
    at org.jasig.portal.portlet.rendering.worker.PortletResourceExecutionWorker.callInternal(PortletResourceExecutionWorker.java:54)
    at org.jasig.portal.portlet.rendering.worker.PortletResourceExecutionWorker.callInternal(PortletResourceExecutionWorker.java:32)
    at org.jasig.portal.portlet.rendering.worker.PortletExecutionWorker$1.call(PortletExecutionWorker.java:165)
    at org.jasig.portal.portlet.rendering.worker.PortletExecutionCallable.call(PortletExecutionCallable.java:119)
    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303)
    at java.util.concurrent.FutureTask.run(FutureTask.java:138)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

它没有告诉我它认为请求有什么问题。:( 在服务器端，IIS 和 Exchange 都只是声明来自我的请求并返回了 HTTP 500。

这是 SOAP 信封（从日志中捕获）：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
    <SOAP-ENV:Header/>
    <SOAP-ENV:Body>
        <ns2:GetUserAvailabilityRequest xmlns:ns2="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:ns3="http://schemas.microsoft.com/exchange/services/2006/types">
            <ns3:TimeZone>
                <ns3:Bias>0</ns3:Bias>
                <ns3:StandardTime>
                    <ns3:Bias>0</ns3:Bias>
                    <ns3:Time>02:00:00</ns3:Time>
                    <ns3:DayOrder>1</ns3:DayOrder>
                    <ns3:Month>11</ns3:Month>
                    <ns3:DayOfWeek>Sunday</ns3:DayOfWeek>
                </ns3:StandardTime>
                <ns3:DaylightTime>
                    <ns3:Bias>0</ns3:Bias>
                    <ns3:Time>02:00:00</ns3:Time>
                    <ns3:DayOrder>1</ns3:DayOrder>
                    <ns3:Month>3</ns3:Month>
                    <ns3:DayOfWeek>Sunday</ns3:DayOfWeek>
                </ns3:DaylightTime>
            </ns3:TimeZone>
            <ns2:MailboxDataArray>
                <ns3:MailboxData>
                    <ns3:Email>
                        <ns3:Name>Drew Wills</ns3:Name>
                        <ns3:Address>unicon@stcloudstate.edu</ns3:Address>
                    </ns3:Email>
                    <ns3:AttendeeType>Required</ns3:AttendeeType>
                    <ns3:ExcludeConflicts>false</ns3:ExcludeConflicts>
                </ns3:MailboxData>
            </ns2:MailboxDataArray>
            <ns3:FreeBusyViewOptions>
                <ns3:TimeWindow>
                    <ns3:StartTime>2012-06-27T00:00:00.000</ns3:StartTime>
                    <ns3:EndTime>2012-07-04T00:00:00.000</ns3:EndTime>
                </ns3:TimeWindow>
                <ns3:MergedFreeBusyIntervalInMinutes>60</ns3:MergedFreeBusyIntervalInMinutes>
                <ns3:RequestedView>DetailedMerged</ns3:RequestedView>
            </ns3:FreeBusyViewOptions>
        </ns2:GetUserAvailabilityRequest>
    </SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

这里还有一些显示 HTTP 标头等的跟踪日志记录......

```
Jun/27 11:39:06,773 conn.DefaultClientConnection.[] - Sending request: POST /EWS/exchange.asmx HTTP/1.1
Jun/27 11:39:06,773 http.wire.[] - >> "POST /EWS/exchange.asmx HTTP/1.1[\r][\n]"
Jun/27 11:39:06,773 http.wire.[] - >> "Accept-Encoding: gzip[\r][\n]"
Jun/27 11:39:06,773 http.wire.[] - >> "Accept: text/xml, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2[\r][\n]"
Jun/27 11:39:06,773 http.wire.[] - >> "SOAPAction: "http://schemas.microsoft.com/exchange/services/2006/messages/GetUserAvailability"[\r][\n]"
Jun/27 11:39:06,773 http.wire.[] - >> "Content-Type: text/xml; charset=utf-8[\r][\n]"
Jun/27 11:39:06,773 http.wire.[] - >> "Content-Length: 1362[\r][\n]"
Jun/27 11:39:06,773 http.wire.[] - >> "Host: mail.stcloudstate.edu[\r][\n]"
Jun/27 11:39:06,774 http.wire.[] - >> "Connection: Keep-Alive[\r][\n]"
Jun/27 11:39:06,774 http.wire.[] - >> "User-Agent: Apache-HttpClient/4.1.1 (java 1.5)[\r][\n]"
Jun/27 11:39:06,774 http.wire.[] - >> "Cookie: exchangecookie=49398e25ac5b4b84a19f93d170b3eefa[\r][\n]"
Jun/27 11:39:06,774 http.wire.[] - >> "Cookie2: $Version=1[\r][\n]"
Jun/27 11:39:06,774 http.wire.[] - >> "Authorization: NTLM xxx[\r][\n]"
Jun/27 11:39:06,774 http.wire.[] - >> "[\r][\n]"
Jun/27 11:39:06,774 http.headers.[] - >> POST /EWS/exchange.asmx HTTP/1.1
Jun/27 11:39:06,774 http.headers.[] - >> Accept-Encoding: gzip
Jun/27 11:39:06,774 http.headers.[] - >> Accept: text/xml, text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2
Jun/27 11:39:06,774 http.headers.[] - >> SOAPAction: "http://schemas.microsoft.com/exchange/services/2006/messages/GetUserAvailability"
Jun/27 11:39:06,774 http.headers.[] - >> Content-Type: text/xml; charset=utf-8
Jun/27 11:39:06,774 http.headers.[] - >> Content-Length: 1362
Jun/27 11:39:06,774 http.headers.[] - >> Host: mail.stcloudstate.edu
Jun/27 11:39:06,774 http.headers.[] - >> Connection: Keep-Alive
Jun/27 11:39:06,774 http.headers.[] - >> User-Agent: Apache-HttpClient/4.1.1 (java 1.5)
Jun/27 11:39:06,774 http.headers.[] - >> Cookie: exchangecookie=49398e25ac5b4b84a19f93d170b3eefa
Jun/27 11:39:06,775 http.headers.[] - >> Cookie2: $Version=1
Jun/27 11:39:06,775 http.headers.[] - >> Authorization: NTLM xxx
Jun/27 11:39:06,776 http.wire.[] - >> "<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/"><SOAP-ENV:Header/><SOAP-ENV:Body><ns2:GetUserAvailabilityRequest xmlns:ns2="http://schemas.microsoft.com/exchange/services/2006/messages" xmlns:ns3="http://schemas.microsoft.com/exchange/services/2006/types"><ns3:TimeZone><ns3:Bias>0</ns3:Bias><ns3:StandardTime><ns3:Bias>0</ns3:Bias><ns3:Time>02:00:00</ns3:Time><ns3:DayOrder>1</ns3:DayOrder><ns3:Month>11</ns3:Month><ns3:DayOfWeek>Sunday</ns3:DayOfWeek></ns3:StandardTime><ns3:DaylightTime><ns3:Bias>0</ns3:Bias><ns3:Time>02:00:00</ns3:Time><ns3:DayOrder>1</ns3:DayOrder><ns3:Month>3</ns3:Month><ns3:DayOfWeek>Sunday</ns3:DayOfWeek></ns3:DaylightTime></ns3:TimeZone><ns2:MailboxDataArray><ns3:MailboxData><ns3:Email><ns3:Name>Drew Wills</ns3:Name><ns3:Address>unicon@stcloudstate.edu</ns3:Address></ns3:Email><ns3:AttendeeType>Required</ns3:AttendeeType><ns3:ExcludeConflicts>false</ns3:ExcludeConflicts></ns3:MailboxData></ns2:MailboxDataArray><ns3:FreeBusyViewOptions><ns3:TimeWindow><ns3:StartTime>2012-06-27T00:00:00.000</ns3:StartTime><ns3:EndTime>2012-07-04T00:00:00.000</ns3:EndTime></ns3:TimeWindow><ns3:MergedFreeBusyIntervalInMinutes>60</ns3:MergedFreeBusyIntervalInMinutes><ns3:RequestedView>DetailedMerged</ns3:RequestedView></ns3:FreeBusyViewOptions></ns2:GetUserAvailabilityRequest></SOAP-ENV:Body></SOAP-ENV:Envelope>"
Jun/27 11:39:06,801 http.wire.[] - << "HTTP/1.1 500 Internal Server Error[\r][\n]"
Jun/27 11:39:06,801 http.wire.[] - << "Cache-Control: private[\r][\n]"
Jun/27 11:39:06,801 http.wire.[] - << "Transfer-Encoding: chunked[\r][\n]"
Jun/27 11:39:06,801 http.wire.[] - << "Content-Type: text/xml; charset=utf-8[\r][\n]"
Jun/27 11:39:06,802 http.wire.[] - << "Server: Microsoft-IIS/7.5[\r][\n]"
Jun/27 11:39:06,802 http.wire.[] - << "X-AspNet-Version: 2.0.50727[\r][\n]"
Jun/27 11:39:06,802 http.wire.[] - << "Persistent-Auth: true[\r][\n]"
Jun/27 11:39:06,802 http.wire.[] - << "X-Powered-By: ASP.NET[\r][\n]"
Jun/27 11:39:06,802 http.wire.[] - << "Date: Wed, 27 Jun 2012 18:39:05 GMT[\r][\n]"
Jun/27 11:39:06,802 http.wire.[] - << "[\r][\n]"
Jun/27 11:39:06,802 conn.DefaultClientConnection.[] - Receiving response: HTTP/1.1 500 Internal Server Error
Jun/27 11:39:06,802 http.headers.[] - << HTTP/1.1 500 Internal Server Error
Jun/27 11:39:06,802 http.headers.[] - << Cache-Control: private
Jun/27 11:39:06,802 http.headers.[] - << Transfer-Encoding: chunked
Jun/27 11:39:06,802 http.headers.[] - << Content-Type: text/xml; charset=utf-8
Jun/27 11:39:06,802 http.headers.[] - << Server: Microsoft-IIS/7.5
Jun/27 11:39:06,802 http.headers.[] - << X-AspNet-Version: 2.0.50727
Jun/27 11:39:06,802 http.headers.[] - << Persistent-Auth: true
Jun/27 11:39:06,802 http.headers.[] - << X-Powered-By: ASP.NET
Jun/27 11:39:06,802 http.headers.[] - << Date: Wed, 27 Jun 2012 18:39:05 GMT
Jun/27 11:39:06,804 exchange.NtlmAuthHttpClient.[] - Connection can be kept alive indefinitely
Jun/27 11:39:06,808 http.wire.[] - << "247[\r][\n]"
Jun/27 11:39:06,808 http.wire.[] - << "<?xml version="1.0" encoding="utf-8"?><s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/"><s:Body><s:Fault><faultcode xmlns:a="http://schemas.microsoft.com/exchange/services/2006/types">a:ErrorInvalidRequest</faultcode><faultstring xml:lang="en-US">The request is invalid.</faultstring><detail><e:ResponseCode xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors">ErrorInvalidRequest</e:ResponseCode><e:Message xmlns:e="http://schemas.microsoft.com/exchange/services/2006/errors">The request is invalid.</e:Message></detail></s:Fault></s:Body></s:Envelope>"
Jun/27 11:39:06,808 http.wire.[] - << "[\r][\n]"
Jun/27 11:39:06,808 http.wire.[] - << "0[\r][\n]"
Jun/27 11:39:06,808 http.wire.[] - << "[\r][\n]"
Jun/27 11:39:06,809 tsccm.ThreadSafeClientConnManager.[] - Released connection is reusable. 
```

非常感谢您对这个棘手问题的任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T20:12:12.680

我遇到了同样的问题——本地 Exchange 2010 安装的 EWS 服务拒绝包含空的“soap-env:header”元素的请求。我使用带有以下 SOAP XML 的 cURL 验证了该问题：

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Header/>
<SOAP-ENV:Body>
    <ns2:GetFolder xmlns:ns2="http://schemas.microsoft.com/exchange/services/2006/messages"
                   xmlns:ns3="http://schemas.microsoft.com/exchange/services/2006/types">
        <ns2:FolderShape>
            <ns3:BaseShape>Default</ns3:BaseShape>
        </ns2:FolderShape>
        <ns2:FolderIds>
            <ns3:DistinguishedFolderId Id="inbox"/>
        </ns2:FolderIds>
    </ns2:GetFolder>
</SOAP-ENV:Body> 
```

奇怪的是，我可以通过对请求中的“SOAP-ENV:Header”元素进行以下*任何*更改来让 EWS 服务接受请求：

1.  如上所述将 RequestServerVersion 添加到标头
2.  完全删除“SOAP-ENV:Header”元素
3.  将单标签空元素替换为“双标签”空元素：

在我看来，这就像 Exchange 2010 EWS 中的一个错误。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T19:37:13.647

因此，如果您将客户端从图片中取出，并简单地使用 curl 模拟请求，您能否验证您仍然得到 500 响应？

这至少会将问题隔离到服务器端。

通过使用 HTTP 标头值或 soap 实体的内容，您可以更轻松地使用 curl 调试问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T13:01:24.743

我得到它的工作 - 这是细节......

我使用 SoapUI 获得了一些见解。我想测试我的 SOAP 信封（由我的代码生成）但是...“soapUI 当前不支持 NTLMv2，因此如果您的服务器需要这个，您将需要重新配置服务器以接受NTLMv1（见...）或使用（...）之类的产品来克服这个问题。”

我并不感到惊讶。NTLM AuthN 是前两天的噩梦，在 Java 中工作是一个怪物。 [这篇文章](http://www.vodori.com/blog/ntlmv2-authentication-from-java-a-developers-odyssey.html)很有帮助，但在我的情况下，我还不得不强制我的代码为“协商”（SPNEGO）方案发送 NTLM 凭据。（它会选择 kerberos，但放弃了，因为它没有 kerberos 凭据......啊！）

SoapUI 还可以生成一个示例请求，我对此进行了审查。它看起来很像我的，但还有一些可选的（看似）位。大多数是可选的，但显然不是。

Web 服务需要这个肥皂头：

```
<SOAP-ENV:Header><ns3:RequestServerVersion xmlns:ns3="http://schemas.microsoft.com/exchange/services/2006/types" Version="Exchange2010_SP2"/></SOAP-ENV:Header> 
```

MSDN API 文档*说*soap header 是可选的，但是当我发送它时它就开始工作了。

# javascript - Express + socket.io：socket.io 客户端脚本为 404

> ID：11233339
> 
> 赞同：5
> 
> 时间：2012-06-27T19:08:47.687
> 
> 标签：javascript, node.js, express, socket.io

这让我发疯......虽然我有一个 Express + Socket.io 的工作版本，但我似乎无法通过在新项目文件夹中安装开箱即用的 NPM 来重现它。谁能指出我错过了什么......？这是我的过程：

`node_modules`我在我的项目目录 ( ) 中创建一个文件夹`pwd`，然后执行以下操作：

```
npm install express
npm install socket.io 
```

运行这两个命令会将包`node_modules`按预期放入我的项目文件夹中。现在我使用以下内容设置我的服务器：

```
var express = require('express'),
    server = express.createServer().use( express.static(__dirname+'./public') ).listen( 8080 ),
    io = require('socket.io').listen(server); 
```

我的`public`文件夹包含我的应用程序的静态资产。我的公共索引 HTML 页面包含一个脚本标记，用于：

```
<script src="/socket.io/socket.io.js"></script> 
```

最后，我运行我的服务器脚本并在 Web 浏览器中访问应用程序。我的静态公共文件都得到了正确的服务，但是我得到了 404 的`/socket.io/socket.io.js`. 现在，我可以从另一个旧项目中换入一个`express`包并让整个系统正常工作。不知何故，该包实例的配置不同，但我不知道如何重现它。Express 网站提到了一些关于安装依赖项的内容，尽管运行`npm install -d`似乎没有帮助（`pwd`在运行时我是否需要特定的东西`npm install -d`？）。我想在使用 NPM 安装新的 Express 实例后，我一定遗漏了一些重要的东西。

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T20:14:57.337

好的，所以我的示例实际上是我的代码的缩写，并且该示例代码确实有效。我有问题的真实代码有点混乱，如下所示：

```
var server = express.createServer();

server
    .use( server.router )
    .use( express.static(__dirname+'/../public') )
    .get('/api', function(req, res) {
        res.write('API');
    });

server.listen(8080);

var io = require('socket.io').listen(server); 
```

我通过执行以下操作修复了上述代码：

```
server = server.listen(8080); 
```

显然，该`listen`命令用一些附加功能包装了服务器对象。我最初发布的速记示例实际上确实有效，因为`listen`它链接到最终返回到服务器变量中。有趣的细微差别。

# command-line - 从特定 OU 导出 AD 结构，然后在新域中重新创建结构

> ID：11233340
> 
> 赞同：2
> 
> 时间：2012-06-27T19:08:49.183
> 
> 标签：command-line, active-directory, ldif, csvde

我研究并发现为我们的应用程序导出我们的活动目录信息的方法是这样的：

```
csvde -d OU=MyAppsOU,DC=dot,DC=testdmz,DC=lan
      -f C:\temp\addump_ou.csv -r (objectClass=organizationalUnit) 
```

现在，我已经读过要从该文件导入，您只需将 -i 选项添加到如下行：

```
csvde -i -d OU=MyAppsOU-New,DC=dot,DC=newdmz,DC=lan 
      -f C:\temp\addump_ou.csv -r (objectClass=organizationalUnit) 
```

显然，我很害怕尝试这个，因为我不想吹走任何东西。我的问题是：

1.  是否指定`OU=MyAppsOU-New`使用该特定名称创建新的 OU 结构？（我只是想 100% 积极）

2.  指定不同的域名 (newdmz) 是否只是更新文件中的所有数据以包含新域名？

    或者

3.  我是否需要修改导出的 csv 文件以将域名 (testdmz) 更改为新域名 (newdmz)？

4.  我应该这样做有不同的方式吗？

我只想重新创建没有组、角色（即组）和用户的 OU 结构。我可能会在不同的过程中做这些，因为我们有不同的用户名用于测试和生产。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T04:06:40.353

哇 ！在这里失去了问题，但据我说还不够。

从末开始。`CSVE.EXE`真的不是我会使用的确切工具。作为一个 Directorie 开发者，我更喜欢`LDIFDE.EXE`它，因为它生成的 LDIF（LDAP 数据交换格式）更标准、更易读。您还可以查看 ADAMSync.EXE 之类的工具，这些工具允许同步 AD 世界中的两个目录（但对于您想要在这里做的事情来说，这是一个大锤子）

现在选择`LDIFDE.EXE`您将看到 LDIF 格式几乎可以按原样导入，但您需要从文件中删除操作属性（系统属性）。最好的方法是在 rxport 期间服用它们。因此，您将使用`-L`仅导出您需要的属性或`-O`省略操作属性的选项。

要在另一个域中导入，您将使用`-C`选项将原始域部分 (DC=dot,DC=testdmz,DC=lan) 更改为新域部分。

之前在虚拟机中尝试过。

# c# - 从 Windows 可执行文件中识别编译器版本

> ID：11233346
> 
> 赞同：3
> 
> 时间：2012-06-27T19:09:11.567
> 
> 标签：c#, c++, c, windows, compiler-construction

是否有可靠的方法来检测使用哪个编译器来编译和构建给定的 Windows 可执行文件？

单独这个话题太宽泛了，所以我缩小了范围：

*   我只对 C 家族的语言（C、C++、C#）感兴趣
*   让我们假设可执行文件未被篡改以隐藏此信息。
*   Visual Studio 和最著名的 gnu 编译器就足够了，因此无需处理非常旧的或未广泛使用的编译器。

在 C# 的情况下，很明显它使用了 Visual Studio 附带的编译器，所以在这种情况下，是否可以获得 Studio 的版本（年份）和类型（express 等）？

**编辑：**

从答案看来，确定起来很困难而且并不总是可靠的，因为必须使用启发式方法。那么，是否有任何编译器故意在可执行文件中插入某种“水印”？我在猜测是否有，Visual Studio 可能是这样的编译器（如果没有别的，我可以想象他们这样做只是为了知道是否有人使用免费快递版，或者只是他们正式购买的另一个版本）。但是，我在谷歌上找不到任何明确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:30:54.000

IDA 反汇编器能够识别静态编译的编译器标准库：

[http://www.hex-rays.com/products/ida/index.shtml](http://www.hex-rays.com/products/ida/index.shtml)

[http://www.hex-rays.com/products/ida/tech/flirt/in_depth.shtml](http://www.hex-rays.com/products/ida/tech/flirt/in_depth.shtml)

如果只讨论 MSVC，它会在 ECX 寄存器中传递*这个*指针，所以如果你看到这个，代码可能是 C++（不是 C）并使用对象。更多信息：[http ://en.wikipedia.org/wiki/X86_calling_conventions](http://en.wikipedia.org/wiki/X86_calling_conventions)

C# 代码是如此不同，以至于您甚至不需要反汇编程序来识别它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:17:14.733

对于本机代码，您使用“库指纹”。见[ftp://ftp.cs.wisc.edu/paradyn/papers/Jacobson11Unstrip.pdf](ftp://ftp.cs.wisc.edu/paradyn/papers/Jacobson11Unstrip.pdf)

这里有很多签名：[http ://code.google.com/p/flairdatabase/](http://code.google.com/p/flairdatabase/)

并查看[http://www.hex-rays.com/products/ida/tech/flirt/in_depth.shtml](http://www.hex-rays.com/products/ida/tech/flirt/in_depth.shtml)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T19:25:31.050

这实际上是两个问题，因为 C/C++ 和 C# 完全不同。我将尝试回答 C# 问题。

AC# 程序集始终是为特定的 .NET Framework 版本构建的。通过检查程序集的版本，您可以确定使用了哪个版本的编译器。每个版本的框架都有自己的编译器。

无法从已编译的程序集中找到有关 Visual Studio 的详细信息，因为编译器不是 VS 的一部分。您可以假设 .NET 4 程序集是使用 VS 2010 构建的，但仅此而已。据我们所知，它可能是用记事本编写的。

也有可能使用了除 csc 之外的编译器，但这种情况并不经常发生，除了 Mono，所以我会忽略它。

至于母语：

没有可靠的方法可以知道使用了哪个编译器。甚至没有办法确定使用了哪种语言。您所需要处理的只是机器代码和二进制数据，因此您必须根据已知的编译器模式做出有根据的猜测。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:22:05.970

您可以尝试使用 dumpbin 工具（将其称为 dumpbin /HEADERS）。它将在 OPTIONAL HEADERS 中列出链接器版本，从中您可以找出可能使用的编译器版本。请参阅[垃圾箱帮助页面](http://support.microsoft.com/kb/177429)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T19:18:16.573

没有官方或标准的方法来识别用于制作二进制或可执行对象的工具。Windows 可执行格式不需要有关工具的信息；也不是使用的语言。

人们可能能够通过识别代码模式来区分工具，但这非常困难。人们使用不同的工具重写软件非常困难和耗时。

顺便说一句，除了 Visual Studio 和 GNU 之外，还有其他工具。

# jquery - CSS 变换旋转 - Chrome 中的渲染问题

> ID：11233349
> 
> 赞同：0
> 
> 时间：2012-06-27T19:09:21.937
> 
> 标签：jquery, google-chrome, css, webkit, webkit-transform

我正在尝试使用以下代码通过 jQuery 旋转 div （标签）：

```
$(this).addClass("rotate1");

.rotate1{
-webkit-transform: rotate(1deg);
-webkit-transform-origin: 0% 0%;
-moz-transform:  rotate(1deg);
-moz-transform-origin: 0% 0%;
-o-transform: rotate(1deg);
-o-transform-origin: 0% 0%;
-ms-transform: rotate(1deg);
-ms-transform-origin: 0% 0%;
transform: rotate(1deg);
transform-origin: 0% 0%;
} 
```

但是我遇到了显示问题，没有完全显示。这是 jsfiddle 上的代码：http: [//jsfiddle.net/4CgPD/](http://jsfiddle.net/4CgPD/)

仅当我尝试通过 jQuery 旋转文章时才会出现此问题。如果我为它分配一个带有 -webkit-transform..rotate... 的 css 类，那么它可以正常工作。

问题出现在 chrome 中，它在 Firefox 中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T23:54:03.833

我一直注意到 Chrome 在供应商前缀方面经常存在双重继承问题，我最近在渐变方面遇到了这个问题。我不得不删除多余的 -webkit 属性。我不认为这是这里的问题，但我认为值得提出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T11:00:11.413

不确定这是否会解决您的问题，因为今天似乎无法访问 jsfiddle（504）。

我不会添加类，而是在 javascript 中分配转换，例如：

```
document.querySelector(this).style.webkitTransformOrigin = "0% 0%"
document.querySelector(this).style.webkitTransform = "rotate(1deg)" 
```

我发现直接在 javascript 中执行变换和过渡可以使移动设备上的动画更流畅。

# php - 刚刚使用 PHP 将加密切换为“crypt”，但现在任何密码都可以使用

> ID：11233351
> 
> 赞同：1
> 
> 时间：2012-06-27T19:09:26.010
> 
> 标签：php, mysql, crypt

我正在尝试在 PHP 中使用 crypt() 对用户进行身份验证。这是我在登录页面中的代码：

```
$valid = MemberDB::isValidMember($email_address, $password);
if ($valid == TRUE) {
    $_SESSION['is_valid_member'] = TRUE;
    header("Location: ../welcome/");
    } else {
    $login_message = 'log in';
    include('./view/login.php');
    } 
```

这是应该带回 True 或 False 的函数：

```
public static function isValidMember($email_address, $password) {
    $db = Database::getDB();
    $query = "SELECT member_ID, password
              FROM members
              WHERE email_address = :email_address";
    $statement = $db->prepare($query);
    $statement->bindValue(':email_address', $email_address);
    $statement->execute();
    $row = $statement->fetch();
    $statement->closeCursor();
    return $row ? crypt($password, $row['password']) : FALSE;
} 
```

目前，无论我输入什么密码，它都会让我进入。当我对 $valid 执行 var_dump 时，它会返回加密密码的 98 个字符字符串，因此我知道 $valid 不等于 TRUE。请帮忙！

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:11:39.927

代替

```
return $row ? crypt($password, $row['password']) : FALSE; 
```

和

```
return $row ? ($row['password'] == crypt($password, $row['password'])) : FALSE; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:13:41.480

Crypt 返回一个散列字符串，而不是一个布尔值。您需要将该散列字符串与已知散列进行比较，如果它们相同则返回：

```
return $row ? crypt($password, $row['password']) == $row['password'] : FALSE; 
```

# visual-studio-2010 - 在 Windows 8 上的 Visual Studio 2010 中启用异步 CTP

> ID：11233352
> 
> 赞同：2
> 
> 时间：2012-06-27T19:09:31.010
> 
> 标签：visual-studio-2010, windows-8, async-ctp

一段时间以来，我一直在使用 VS2010 在我的 Windows 8 机器上开发我的所有应用程序，没有什么大问题，一切都很好。

但是，今天我打开了一个使用 Async CTP 库的 windows phone 7 项目，当然注意到“async”关键字无效。

不用担心，开始安装 CTP。

我安装了 CTP，然后重新启动 VS 并打开了项目。没有骰子。对 AsyncCtpLibrary 的引用正在工作（实际上我使用 nu get ），但我似乎没有做任何事情来解决这个问题。据我所知，这意味着 Async CTP 没有成功修改 C# 编译器（或其他东西）。

有人在 Windows 8 中工作吗？我在任何地方都找不到任何东西，所以我想问问 SO 大师 :)

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-19T12:34:13.900

您可以同时使用 Windows 8 + Visual Studio 2010 + Windows Phone 7 SDK + [AsyncCTP](http://www.microsoft.com/en-us/download/details.aspx?id=9983)，虽然在安装过程中有一个小问题。

首先，您需要安装 Visual Studio 2010，然后为 Visual Studio 2010 安装 SP1，然后是 Windows Phone SDK，然后立即为 Visual Studio 2010 安装 AsyncCTP v3，然后运行 ​​Windows 更新。

如果在安装 AsyncCTP 之前安装 Visual Studio 2010 SP1 的更新，AsyncCTP 的安装会因为与某些 Visual Studio 修补程序冲突而失败。

我在[这里找到了解决方案](http://mikaelkoskinen.net/post/async-ctp-fix-installation-problem.aspx)以及一些尝试和错误安装和卸载:)

**更新：**对于 Visual Studio 2012，其他项目类型中异步/等待的唯一解决方案是[Microsoft.Bcl.Async](http://blogs.msdn.com/b/bclteam/archive/2012/10/19/using-async-await-without-net-framework-4-5.aspx)库，可在 NuGet 上使用。

# batch-file - 批处理文件：停止进程

> ID：11233353
> 
> 赞同：1
> 
> 时间：2012-06-27T19:09:38.673
> 
> 标签：batch-file

我有一个调用程序的批处理文件，但我想在小时后停止该程序，例如我的批处理将包含此代码

```
@echo off
........
.......
............
call myprogram.exe 
```

有没有办法在小时后停止 myprogram.exe ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:54:22.270

```
REM delay for 36000 seconds (10 hours)
FOR /l %%a in (36000,-1,1) do (Echo closing in %%as&ping -n 2 -w 1 127.0.0.1>NUL)
REM delete the program using it's PID
FOR /f "tokens=2" %a in ('tasklist ^| find "notepad.exe"') do tskill %a 
```

使用 ping 意味着它可以在 XP、Vista 和 7 中运行*（我假设是 Win 8）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-29T15:43:37.390

这会容易得多，假设您使用的是 Vista 或更高版本

```
start myprogram.exe
timeout /t 3600
taskkill /im myprogram.exe /f 
```

只需`3600`用您的时间延迟（以秒为单位）替换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:58:10.930

尝试在批处理文件中使用[taskkill ：](http://technet.microsoft.com/en-us/library/bb491009)

```
taskkill /IM myprogram.exe 
```

至于在程序运行小时后停止程序，我不知道如何调用它。如果您想在某个特定时间停止它，您可以使用像 Windows 计划任务这样简单的东西。

否则，您可以尝试使用[FireDaemon 之](http://www.firedaemon.com/)类的服务管理应用程序将 myprogram.exe 设置为 Windows 服务，并将其安排为在小时后关闭。不幸的是，FireDaemon 不是免费的，但它肯定能胜任这项任务。

# python - 在 Python 中生成偶数列表

> ID：11233355
> 
> 赞同：10
> 
> 时间：2012-06-27T19:09:53.510
> 
> 标签：python, numbers, fibonacci

基本上，我需要帮助从我在 Python 中创建的列表中生成偶数：

```
[1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181, 6765, 10946, 17711, 28657, 46368, ...] 
```

我尝试了几种不同的方法，但每次打印时，都会有奇数和偶数混合在一起！

如果我要在 0-100 的范围内进行计算，我知道如何生成偶数/奇数，但是，仅从前面提到的列表中获取偶数让我很难过！

PS我只使用python几天，如果这非常简单，提前谢谢！

编辑：感谢所有回复，在您的帮助下，我已经解决了这个小问题。这是我最后完成的一个小练习，要求对斐波那契数列的偶数求和：

```
F = [1, 2]
while F[-1] < 4000000
    F.append(F[-1] + F[-2])

sum(F[1::3])
4613732 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-27T19:14:46.310

使用列表推导（请参阅：[在 Python 中搜索对象列表](https://stackoverflow.com/questions/598398/searching-a-list-of-objects-in-python)）

```
myList = [<your list>]
evensList = [x for x in myList if x % 2 == 0] 
```

这很好，因为它使列表保持不变，并且您可以将 evensList 作为普通列表对象使用。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T19:12:29.533

以下示例应该可以解决您的问题。

```
Newlist = []
for x in numList:
   if x % 2 == 0:
      print x          
      Newlist.append(x) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-27T19:17:59.990

您可以通过[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)来做到这一点：

```
evens = [n for n in numbers if n % 2 == 0] 
```

您也可以使用[该`filter`功能](http://docs.python.org/library/functions.html#filter)。

```
evens = filter(lambda x: x % 2 == 0,numbers) 
```

如果列表很长，可能需要创建一些东西来迭代列表，而不是使用[`ifilter`from`itertools`](http://docs.python.org/library/itertools.html#itertools.ifilter)创建其中一半的副本：

```
from itertools import ifilter
evens = ifilter(lambda x: x % 2 == 0,numbers) 
```

或者通过使用[生成器表达式](http://docs.python.org/reference/expressions.html#generator-expressions)：

```
evens = (n for n in numbers if n % 2 == 0) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-27T19:15:53.900

在您的特定情况下`my_list[1::3]`将起作用。斐波那契的偶数之间总有两个奇数：偶数、奇数、奇数、偶数、奇数、奇数......

```
>>> my_list = [1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181, 6765, 10946, 17711, 28657, 46368]
>>>         
... 
>>> my_list[1::3]
[2, 8, 34, 144, 610, 2584, 10946, 46368] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-24T07:30:51.047

只需检查一下

```
A = [i for i in range(101)]
B = [x for x in A if x%2 == 0]
print B 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-27T19:12:46.933

遍历列表并使用模运算符检查偶数

```
for number in list:
    if (number % 2) == 0: 
        ##EVEN 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-28T02:01:40.843

与其生成所有斐波那契数然后过滤偶数，为什么不只生成偶数呢？

```
def even_fibs():
    a,b = 1,2
    while True:
        yield b
        a,b = a+2*b, 2*a+3*b 
```

生成 [2, 8, 34, 144, 610, 2584, 10946 ...]

那么你的总和代码变为：

```
total = 0
for f in even_fibs():
    if f >= 4000000:
        break
    else:
        total += f 
```

或者

```
from itertools import takewhile
total = sum(takewhile(lambda n: n<4000000, even_fibs())) 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-27T19:16:19.053

您可以使用[列表推导](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)生成一个新列表，其中仅包含原始列表中的偶数成员。

```
data = [1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144] 
```

然后：

```
new_data = [i for i in data if not i%2] 
```

产量

```
[2, 8, 34, 144] 
```

或者，如果您一次不需要所有数字，也可以使用生成器表达式：

```
new_data = (i for i in data if not i%2) 
```

然后可以根据需要使用这些值，例如，如果您使用了 for 循环：

例如，

```
for val in new_data:
   print val 
```

生成器表达式的优点是整个列表不会立即生成并存储在内存中，而是根据需要生成值，从而减少对内存的需求。如果您有兴趣，您可能需要在某个时候阅读其他重要的差异。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-06-27T19:18:52.260

只是为了好玩，检查是否`number%2 != 1`也有效；）

```
evens=[x for x in evens_and_odds if number%2 != 1 ] 
```

请注意，您可以做一些聪明的事情来在一个循环中分离偶数和赔率：

```
evens=[]
odds=[]
numbers=[ evens, odds ]
for x in evens_and_odds:
    numbers[x%2 == 1].append(x)

print evens
print odds 
```

上述技巧之所以有效，是因为逻辑表达式 ( `==`、`>`等) 对数字 `True`(1) 和/或`False`(0) 进行操作。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-07-31T09:20:55.183

```
a = range(0,1000)
b = []
for c in a:
    if c%2==0:
        b.append(c)
print b 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2019-09-25T12:55:03.557

以下是**获得偶数的一些不同方法**：

**CASE 1** 在这种情况下，您必须提供一个范围

```
lst = []
for x in range(100):
    if x%2==0:
    lst.append(x)
print(lst) 
```

**CASE 2** 这是一个函数，你必须传递一个参数来检查它是否是偶数 no 或不是 def even(rangeno): for x in range(rangeno): if rangeno%2 == 0: return rangeno else: return '没有甚至没有'

```
 even(2) 
```

**案例 3** 检查 100 范围内的值以通过具有列表理解的函数获得偶数

```
def even(no):
return [x for x in range(no) if x%2==0]

even(100) 
```

**案例4** 这个案例检查列表中的值并通过lambda函数打印偶数。而这个案例就适合上面的问题

```
lst = [2,3,5,6,7,345,67,4,6,8,9,43,6,78,45,45]
no = list(filter(lambda x: (x % 2 == 0), lst))
print(no) 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-01-30T20:16:06.793

基本上，您应该创建一个变量并将列表放入，然后通过仅添加偶数来对偶数列表进行排序

`numbers = [1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144, 233, 377, 610, 987, 1597, 2584, 4181, 6765, 10946, 17711, 28657, 46368, ...] even = [e for e in numbers if e%2==0]`

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-02-09T06:50:08.610

您可以使用 filter 函数执行此操作，如下所示：

```
F = [1, 2]
while F[-1] < 4000000:
    F.append(F[-1] + F[-2])
print(F)
print('\n')
#create the variable that could store the sorted values from the list you have created.
sorted_number=list(filter(lambda x:x%2==0,F))
print(sorted_number) 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2018-12-27T20:21:09.447

您可以使用长度函数使用 for 和 if 循环，如下所示：

```
for x in range(len(numList)):
    if x%2 == 0:
        print(x)
        NewList.append(x) 
```

# c++ - 如何让这个音频延迟工作？

> ID：11233357
> 
> 赞同：3
> 
> 时间：2012-06-27T19:10:09.830
> 
> 标签：c++, arrays, debugging, audio, pointers

我想实现一个基本的音频延迟 - 但我得到的只是垃圾，可能是非常明显的东西 - 但我似乎无法发现它......

音频通过在运行时确定的缓冲区进行处理。

我认为我对指针做了一些可怕的错误，尝试查看其他一些代码 - 但它们似乎都“不完整”，总是缺少一些基本的东西 - 可能我的代码中也缺少什么。

```
// Process audio
// 1
void Gain::subProcessSimpleDelay( int bufferOffset, int sampleFrames )
{
    // Assign pointers to your in/output buffers. 
    // Each buffer is an array of float samples.
    float* in1  = bufferOffset + pinInput1.getBuffer();
    float* in2  = bufferOffset + pinInput2.getBuffer();
    float* out1 = bufferOffset + pinOutput1.getBuffer();

    // SampleFrames = how many samples to process (can vary). 
    // Repeat (loop) that many times
    for( int s = sampleFrames; s > 0; --s ) 
    {
        // get the sample 'POINTED TO' by in1.
        float input1 = *in1;    

        float feedback = *in2;
        float output;
        unsigned short int p, r;
        unsigned short int len;
        len =  600;

        // check at delay length calculation
        if (len > 65535) 
            len = 65535; 
        // otherwise, a length of 0 will output the input from 
        // 65536 samples ago
        else if (len < 1) 
            len = 1; 

        r = p - len; // loop
        output = buffer[r];
        buffer[p] = input1 + output * feedback;
        p++;

        *out1 = output;

        // store the result in the output buffer.
        // increment the pointers (move to next sample in buffers).
        in1++;
        in2++;
        out1++;
    }
} 
```

谁能告诉我怎么了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:26:40.630

你还没有初始化`p`。此代码中需要注意的其他事项：-

*   您确定 sampleFrames + bufferOffset 小于输入和输出缓冲区的大小吗？你真的可以用一种方法来检查它。
*   目前尚不清楚`buffer`来自哪里，或者还有什么可能写给它。如果在您的代码运行之前它是垃圾，那么您将到处都是垃圾，因为您要做的第一件事就是从中读取。
*   你没有说什么类型`pinInput1.getBuffer()`等返回。如果它们返回 a `char*`，而您只知道它恰好指向浮点数组，则需要在执行任何指针运算`float*` *之前*将结果转换为，以确保您前进到数组中的下一个浮点数，而不是数组的下一个字节。

# perl - 如何将值存储在数组的每个数组元素中？

> ID：11233363
> 
> 赞同：0
> 
> 时间：2012-06-27T19:10:47.620
> 
> 标签：perl

```
my @someones;
my $xpath = q(//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]/div/div/table/tbody/tr/td/div/div);   
for my $i (0,2..20)  
{      
my @nodes = split qr'/', $xpath;      
$nodes[16] .= "[$i]" unless 0 == $i;      
#say join '/', @nodes; } 
@somenames = join('/',@nodes); 
print "\n"; 
print @somenames ; 
} 
```

输出：

```
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[2]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[3]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[4]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[5]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[6]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[7]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[8]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[9]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[10]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[11]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[12]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[13]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[14]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[15]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[16]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[17]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[18]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[19]/table/tbody/tr/td/div/div
//body[@id='ext-gen3']/div[14]/div[2]/div/div/div/div/div/div/div/div/div/div[2]
/div/div[20]/table/tbody/tr/td/div/div 
```

执行上述代码片段后，所有 20 个值都存储在单个元素中（即 $somenames[0]）。但我想存储在每个数组元素中，`for i=0,$somenames[0];` `for i=2,$somenames[2];`直到`for i=20,$somenames[20]`。我该怎么做 ？而且如果我在for循环之外打印@somenames，它只会打印第20个元素。如何将每个值存储在数组的每个元素中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:53:57.497

你的问题令人困惑。我不确定你想要完成什么。也许这就是你想要的：

```
# Assign the right side to the $i'th element of @somenames
$somenames[$i] = join('/',@nodes); 
```

或者

```
# Add an element to the end of @somenames
push @somenames, join('/',@nodes); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:17:20.867

请参阅此代码以向您展示如何将数组存储到数组 >>

***脚本：***

```
use Data::Dumper;

my @a;

@{$a[0]} = (1, 2, 3);
@{$a[1]} = (5, 6, 7);

print Dumper(@a); 
```

***输出：***

```
$VAR1 = [
          1,
          2,
          3
        ];
$VAR2 = [
          5,
          6,
          7
        ]; 
```

[在这里](http://ideone.com/7dZUy)测试上面的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:34:06.667

[push](http://perldoc.perl.org/functions/push.html)填充一个数组。例如：

```
perl -le '$str="1 2 3 4 5";push @vals,split / /,$str;print join ":",@vals'
1:2:3:4:5 
```

# jquery - 无法 POST 到 IHTTPHandler 类，Access-Control-Allow-Origin 不允许来源

> ID：11233367
> 
> 赞同：5
> 
> 时间：2012-06-27T19:11:08.360
> 
> 标签：jquery, .net, ajax, ssl, cors

我有一个 C# SOAP Web 服务以及一些`IHTTPHandler`部署到`https://localhost:123`. 我有一个关于`http://localhost`尝试使用 jQuery 向其中一个处理程序发送 AJAX POST 请求的 HTML 页面。我每次都得到以下信息：

> XMLHttpRequest 无法加载`https://localhost:123/(S(the_session_id))/MyHandler.ashx`。Access-Control-Allow- Origin`http://localhost`不允许 Origin。

我已经尝试像在[这个问题](https://stackoverflow.com/questions/6588447/support-options-request-header-in-aspx-page)`CrossOriginModule`中那样创建一个模块和处理程序，按照他们的建议更新我的 web.config。我已经尝试添加到我的处理程序中，正如[这个问题](https://stackoverflow.com/questions/5750696/how-to-get-a-cross-origin-resource-sharing-cors-post-request-working)中所建议的那样。我尝试按照[此博客文章](http://www.chrisweldon.net/blog/2012/04/13/jquery-file-uploader/)中有关在web.config 中添加到/的步骤进行操作。没有什么帮助。`CrossOriginHandler``context.Response.AppendHeader("Access-Control-Allow-Headers", "x-requested-with");``ProcessRequest``OPTIONS``SimpleHandlerFactory-Integrated-4.0``system.webServer``handlers`

这是我的处理程序`ProcessRequest`：

```
 public void ProcessRequest(HttpContext context)
    {
        context.Response.ContentType = "application/json";
        context.Response.AppendHeader("Access-Control-Allow-Origin", "*");
        context.Response.AppendHeader("Access-Control-Allow-Headers", "x-requested-with");
        context.Response.Write( /* some JSON string */ );
    } 
```

这是我的 web.config 的相关部分：

```
<system.webServer>
  <httpProtocol>
    <customHeaders>
      <add name="Access-Control-Allow-Origin" value="*" />
    </customHeaders>
  </httpProtocol>
  <modules runAllManagedModulesForAllRequests="true">
    <add name="CrossOriginModule" preCondition="managedHandler" type="MyNamespace.CrossOriginModule, MyNamespace, Version=1.0.0.0, Culture=neutral" />
  </modules>
  <handlers>
    <add name="CrossOrigin" verb="OPTIONS" path="*" type="MyNamespace.CrossOriginHandler, MyNamespace, Version=1.0.0.0, Culture=neutral" />
    <remove name="SimpleHandlerFactory-Integrated-4.0" />
    <add name="SimpleHandlerFactory-Integrated-4.0" path="*.ashx" verb="GET,HEAD,POST,DEBUG,OPTIONS" type="System.Web.UI.SimpleHandlerFactory" resourceType="Unspecified" requireAccess="Script" preCondition="integratedMode,runtimeVersionv4.0" />
    <add name="MyHandler" verb="*" path="MyHandler.ashx" type="MyNamespace.MyHandler, MyNamespace, Version=1.0.0.0, Culture=neutral" />
  </handlers>
</system.webServer> 
```

使用 jQuery 1.7.2，这是我向我的处理程序发出请求的方式：

```
$.ajax({
    url: url,
    data: {user: userName, pass: password},
    type: 'POST',
    dataType: 'json',
    success: function(data, textStatus, jqXHR) {
        ...
    }
}); 
```

我也没有在服务器上的会话中使用 cookie，所以`<sessionState cookieless="true" />`在我的 web.config 中，如果这很重要的话。我的服务器是 IIS 7.5。

我可以对大多数请求使用 JSONP，因为我没有在 URL 中传递敏感数据。但是，对于这个处理程序，我需要进行常规 POST，因为它涉及发送纯文本密码。它通过 SSL，但[这篇文章](https://stackoverflow.com/questions/2629222/is-querystring-parameters-secure-in-https-http-ssl)建议即使通过 SSL，也不要在 URL 中传递敏感数据。所以我需要通过 AJAX 向 https URL 发出 POST 请求并返回 JSON，并且请求页面不会与服务器位于同一主机上。

**编辑：**我尝试过的其他一些事情：

更改我的 web.config`httpProtocol`部分：

```
<httpProtocol>
  <customHeaders>
    <add name="Access-Control-Allow-Methods" value="OPTIONS,POST,GET"/>
    <add name="Access-Control-Allow-Headers" value="x-requested-with"/>
    <add name="Access-Control-Allow-Origin" value="*" /><!-- Also tried http://localhost -->
  </customHeaders>
</httpProtocol> 
```

我添加`context.Response.AppendHeader("Access-Control-Allow-Methods", "POST");`到`ProcessRequest`. 我还尝试`context.Response.AppendHeader("Access-Control-Allow-Methods", "POST,OPTIONS");`将我的 jQuery`ajax`选项更改为 include `contentType: 'application/json'`，这导致它发出 OPTIONS 请求而不是 POST ——这仍然失败。

我应该`IHTTPHandler`在 web.config 中列出我的所有自定义类`<handlers>`吗？我`MyHandler`现在有它`verb="*"`，但它似乎没有帮助。

**编辑：**所以有些奇怪。根据我的日志输出，当我发布到服务器端时，看起来我的请求实际上是在服务器端进行的，但是浏览器的行为就像它被拒绝了一样，仍然告诉我“不允许原始本地主机”。因此，我向服务器发送的 AJAX POST 像我希望的那样对我进行了身份验证，但是浏览器取消了请求，并且 Chrome 控制台中显示了一个错误，因此我的`success`事件处理程序不会触发。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T12:55:59.270

您的处理程序的 ProcessRequest 还应设置以下标头：

```
Access-Control-Allow-Methods: POST 
```

（基本上，此标头应与 Access-Control-Allow-Headers 响应标头一起设置在 OPTIONS 响应中）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T16:08:29.423

这很愚蠢，我不确定发生了什么，但我的 POST 正在通过，我的身份验证正在服务器上进行，但浏览器认为它是不允许的，所以它失败了。我已经有一个支持 JSONP 的处理程序，它将判断会话是否仍处于活动状态并且用户已通过身份验证，因此我将 AJAX 调用更改为以下内容：

```
$.ajax({
    url: url,
    data: {user: userName, pass: password},
    type: 'POST',
    dataType: 'json',
    complete: function(jqXHR, textStatus) {
        checkIfAuthenticated(
            function() { // authenticated
                onComplete(true, null)
            },
            function() { // not authenticated
                onComplete(false, textStatus);
            }
        );
    }
}); 
```

所以我的Chrome 控制台中仍然显示“XMLHttpRequest cannot load `https://.../AuthHandler.ashx`. Origin is not allowed by Access-Control-Allow-Origin”错误，Chrome 中的“网络”选项卡仍将 POST 请求显示为已取消。`http://localhost`我最终不得不在这里通过该`checkIfAuthenticated`函数发出一个额外的请求，以查看身份验证是否失败，但它确实有效。

我`ProcessRequest`在服务器上的`MyHandler`样子是这样的：

```
public void ProcessRequest(HttpContext context)
{
    context.Response.ClearHeaders();
    string origin = context.Request.Headers["Origin"];
    context.Response.AppendHeader("Access-Control-Allow-Origin",
        string.IsNullOrEmpty(origin) ? "*" : origin);
    string requestHeaders = context.Request.Headers["Access-Control-Request-Headers"];
    context.Response.AppendHeader("Access-Control-Allow-Headers",
        string.IsNullOrEmpty(requestHeaders) ? "*" : requestHeaders);
    context.Response.AppendHeader("Access-Control-Allow-Methods", "POST, OPTIONS");
    context.Response.ContentType = "application/json";
    context.Response.Write(/* JSON response */);
    context.Response.Flush();
} 
```

这是我的 web.config 的相关部分最终的样子：

```
 <system.webServer>
    <httpProtocol>
      <customHeaders>
        <add name="Access-Control-Allow-Methods" value="OPTIONS,POST,GET"/>
        <add name="Access-Control-Allow-Headers" value="x-requested-with"/>
        <add name="Access-Control-Allow-Origin" value="*" />
      </customHeaders>
    </httpProtocol>
    <handlers>
      <add name="MyHandler" verb="*" path="MyHandler.ashx" type="MyNamespace.MyHandler, MyNamespace, Version=1.0.0.0, Culture=neutral" />
    </handlers>
  </system.webServer> 
```

我更喜欢让我的浏览器相信该请求确实被允许的解决方案，因为这是一个愚蠢的解决方法。

# jquery - 无法在按钮上使用 .click() 事件

> ID：11233368
> 
> 赞同：1
> 
> 时间：2012-06-27T19:11:10.820
> 
> 标签：jquery

我无法在通过加载的按钮上使用 click() 事件

```
html().
$.post('includes/addconnectordetails.php',{connnumb: connno},function(data){
    $('#divgeneratecheck').html(data);    
}); 
```

我正在从 div#divgeneratecheck 上的 addconnectordetails.php 页面加载表单，正在加载表单，但我无法在表单中显示的按钮上使用 .click() 事件。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:13:04.590

您将不得不使用`on()`动态元素：

```
$('selector').on('click', function() {
   // your code
}); 
```

[http://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T19:17:33.983

您需要使用`.on`，您必须将其附加到您想要拥有该事件的项目的父级。我使用身体，但在你的情况下可能是**#divgeneratecheck**

```
$('body').on('click','SELECTOR',function() {
  /* Code here  */
}); 
```

只需将选择器替换为要附加事件的 dom 部分即可。（如 #btn1 或 .button）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-27T19:27:10.973

您遇到的问题是由于事件委派造成的。当您尝试通过 click() 事件处理程序附加事件侦听器时，它只会引用最初创建的元素，而不是动态加载的元素。

考虑创建一张地图，然后尝试将该地图用于以前不在其上的位置。由于它最初不存在，因此您不会知道它存在，因此无法正常引用它。然而，委托事件本质上允许该位置在创建后添加到地图中，然后被引用，即使它最初并不存在。

> .on() 方法将事件处理程序附加到 jQuery 对象中当前选定的元素集。从 jQuery 1.7 开始，.on() 方法提供了附加事件处理程序所需的所有功能。有关从旧 jQuery 事件方法转换的帮助，请参阅 .bind()、.delegate() 和 .live()。要删除与 .on() 绑定的事件，请参阅 .off()。要附加仅运行一次然后自行删除的事件，请参阅 .one()

此外：

> 事件处理程序仅绑定到当前选定的元素；当您的代码调用 .on() 时，它们必须存在于页面上。为确保元素存在并且可以被选择，请在页面 HTML 标记中的元素的文档就绪处理程序内执行事件绑定。如果将新 HTML 注入页面，请在将新 HTML 放入页面后选择元素并附加事件处理程序。或者，使用委托事件来附加事件处理程序，如下所述。
> 
> 委托事件的优点是它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。例如，该元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档的头部是可用的，因此在此处附加事件是安全的，而无需等待文档准备好。
> 
> 除了能够处理尚未创建的后代元素上的事件之外，委托事件的另一个优点是当必须监视许多元素时，它们的开销可能会大大降低。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T19:13:16.483

jquery 无法在没有帮助的情况下挂钩动态加载的 html，请查看 jquery 网站中的 live()、on() 或 delegate()。

# matlab - Matlab中的逻辑掩码

> ID：11233370
> 
> 赞同：4
> 
> 时间：2012-06-27T19:11:16.780
> 
> 标签：matlab

我正在尝试使用逻辑数组掩码来对该数组 a = [1:1:2000} 的所有值求平方。逻辑数组掩码定义为 b = a <500。我将如何使用掩码对这些值进行平方？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T19:36:37.817

```
a = 1:2000; %# 1 by 2000 double
b = a<500;  %# 1 by 2000 logical    
a_squared     = a(b).^2; %# 1 by 499 double
%# logical index--^ ^-- 'dot' means element-wise operation 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T21:28:06.740

如果您需要结果与`a`（保持`a >= 500`原样）大小相同，则：

```
a_sq = (a .^ 2) .* (a < 500) + a .* (a >= 500); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-25T00:10:46.473

另一个，更棘手。在这里，我们将逻辑掩码应用于幂，它的值是 1 或 2。

```
a_sq = a .^ (2 - (a >= 500)); 
```

# dependency-injection - 寻找更好的依赖注入/控制反转工具。从 StructureMap 迁移

> ID：11233378
> 
> 赞同：1
> 
> 时间：2012-06-27T19:11:53.523
> 
> 标签：dependency-injection, inversion-of-control, ninject, structuremap, autofac

***为什么要离开 StructureMap？***

正如**Jeremy Miller**（StructureMap 背后的人）所说：[不支持 Silverlight](http://jeremydmiller.com/2012/01/11/kicking-off-structuremap-3/ "不支持 Silverlight。")

***为什么我需要 Silverlight 支持？***

我开始编写**WindowsPhone**应用程序，所以看起来我需要这个。

***这个问题的目的？***

我喜欢**StructureMap**。它**功能**齐全，我在许多项目中都使用过它。**但我必须选择一个新的**。我应该选择哪一个？

[**AutoFac?**](http://code.google.com/p/autofac/)

[**忍者？**](http://www.ninject.org/)

其他工具？

***我想从新框架中得到什么？***

**支持 Windows 电话。**

现在我正在使用**StructureMap**注册我的单例依赖项，如下所示：

```
ObjectFactory.Configure(Function(config)
config.For(Of TPlugin).Singleton.Use(Of TConcrete)()) 
```

或者这个（对于泛型类型）：

```
ObjectFactory.Configure(Function(config)
config.For(Of GetType(IRepository(Of ))).Use(Of GetType(Repository(Of )))()) 
```

或转发类型：

```
ObjectFactory.Configure(Sub(config) config.Forward(Of TResolveBy, TRequested)()) 
```

我想用接近 StructureMap 的语法（**或更好的语法**）做同样的事情

***我想从你这里得到什么？***

你对他们有什么经验吗？

你更倾向哪个？

您建议在 Windows Phone 应用程序中使用哪一个？

还有其他建议吗？

***更新：***

具体类型的**生命周期**和**初始化**（使用函数而不是仅仅定义类型）呢？在结构图中：

```
config.For(pluginType).Singleton.Use(concreteType) 
```

或者

```
config.For(Of TPlugin).HybridHttpOrThreadLocalScoped.Use(SomeFunction) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:21:29.510

当我前一段时间做了一些研究来决定使用什么 DI 框架时，我发现很多人似乎更喜欢 Ninject。从那以后我一直在使用它，并且喜欢它。Remo Gloor 使用它及其各种扩展做了一些非常棒的工作，几天前我们刚刚升级到 Ninject 3。

绑定语法非常简单。我通常使用`NinjectModule`子类并说（在 C# 中）：

```
Bind<TPlugin>().To<TConcrete>() 
```

...我相信这与您现在正在做的事情非常相似。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:23:43.253

我推荐 Ninject。我将它用于我的所有项目主要是因为它的自动绑定功能，它允许您自动组合接口及其实现而无需显式配置（如您的示例中） - 示例可以在[这里](http://frankmao.com/2011/03/22/ninject-auto-binding/)找到。

您仍然可以像在代码示例中一样使用手动配置 - 查看 Ninject 文档以获取示例。

它似乎也[支持 Silverlight](http://www.timmykokke.com/2010/12/dependency-injection-mvvm-ninject-and-silverlight/)，所以它应该对你有用。

编辑：

根据 StriplingWarrior 的评论，自动绑定语法的工作方式在最新版本的 Ninject 中发生了变化——查看[这个 SO question](https://stackoverflow.com/a/9868159/120955)了解详细信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-28T03:04:56.290

我正在使用与 Caliburn Micro 一起打包的 SimpleContainer。 [国际奥委会之战——重温](http://buksbaum.us/2012/05/22/ioc-battlerevisited/)

更新：SimpleContainer 还有一个单独的[nuget](http://nuget.org/packages/Caliburn.Micro.Container)包。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T03:23:47.473

谁需要 IoC 工具？工厂和抽象工厂模式很简单，很棒，而且您永远不必怀疑它们是否支持 XYZ 技术。

# java - 多个页面上的相似内容——Jasper 报告

> ID：11233380
> 
> 赞同：0
> 
> 时间：2012-06-27T19:11:57.613
> 
> 标签：java, spring, jasper-reports, ireport

我的老板用生成 Jasper 报告的“真棒”想法杀死了我。只要我还活着，我就必须向这里的专家询问如何实现它。

最初的要求是在一页中生成包含文本和表格（表格）的 pdf 报告。我做到了。

但新要求要求新报告包含四页，每页包含前一页的内容，只有一个更改（在每一页上插入不同的文本）。

我做了一些研究，并没有找到一个简单的方法来做到这一点。所以希望SO上的每个人都可以给我一个提示。非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:24:58.213

如果它是相同的文本，则在字符串对象中添加文本，那么您可以使用相同的报告，具有不同的数据对象，用于存储文本的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-29T11:40:46.313

你能根据表达式隐藏和显示列吗？例如，将字段映射到模板中的字段以考虑所有 4 个页面，并且对于给定字段，仅当 PAGE_NUMBER = x 或 COLUMN_NUMBER = x 时才显示数据。

在您的查询中，您可以创建一个常量来标识应打印每行数据的页面并在该常量上进行分组。

或者 -- 4 个细节带，每个带都设置为仅在适当的页面上打印。

# vb.net - 棱镜多次组成同一个模块

> ID：11233383
> 
> 赞同：1
> 
> 时间：2012-06-27T19:12:12.200
> 
> 标签：vb.net, silverlight, prism

我正在开发一个具有多个模块（用户、项目、付款、发票等）的应用程序。这些模块中的每一个都有一个对包含名为 App.Controls 的共享控件的公共模块的引用。App.Controls 包含一个名为 OKSaveDialogView 的视图，它只是一个带有确定/保存按钮和一些常用功能的外壳视图。OKSaveDialogView 动态加载适当的内容以实现可重复性。不幸的是，App.Controls 部分被多次加载到目录中，导致错误：

1) 找到多个与约束匹配的导出 '((exportDefinition.ContractName == "App.Controls.ViewModels.OkCancelDialogViewModel")

我什至不确定从哪里开始调试这是如何发生的。谁能指出我正确的方向？

以下是该项目的一些代码片段：

OKCaneclDialogView.Xaml.VB

```
<Export("OkCancelDialogView")> _
<PartCreationPolicy(CreationPolicy.NonShared)> _
Partial Public Class OkCancelDialogView
    Inherits UserControl

    Public Sub New()
        InitializeComponent()
    End Sub

    <Import()> _
    Public Property ViewModel() As OkCancelDialogViewModel
        Get
            Return Me.DataContext
        End Get
        Set(value As OkCancelDialogViewModel)
            Me.DataContext = value
        End Set
    End Property
End Class 
```

OkCancelDialoViewModel.vb

```
<Export()> _
<PartCreationPolicy(CreationPolicy.NonShared)> _
Public Class OkCancelDialogViewModel
    Inherits ViewModelBase
    Implements INavigationAware
    Implements IPartImportsSatisfiedNotification
    'Implements IOkCancelDialogViewModel

    'Services
    'Private ReadOnly regionManager As IRegionManager
    Private WithEvents userService As IUserDataService

    Private navigationJournal As IRegionNavigationJournal

    Private Const UserIdKey As String = "PrimaryId"
    Private Const SecondaryIdKey As String = "SecondaryId"
    Private Const DialogContentKey As String = "DialogContent"

    'DialogViewModelDictionary
    Private DialogViewModelDictionary As DialogViewModelDictionaries

    Public Sub New()
        Me.New(New RegionManager)
    End Sub

    <ImportingConstructor()> _
    Public Sub New(regionManager As IRegionManager)
        'Setup the global region manager
        Me.RegionManager = regionManager

        'Setup the locally scoped region manager
        Me.LocalRegionManager = regionManager.CreateRegionManager

        Me.synchronizationContext = If(synchronizationContext.Current, New SynchronizationContext())

        'Setup commands
        Me._closeCommand = New DelegateCommand(AddressOf OnClose)

        Me._okSaveCommand = New DelegateCommand(AddressOf Me.OnOkSave, AddressOf Me.CanClickOkSave)
        Me._CancelCommand = New DelegateCommand(AddressOf Me.OnCancel, AddressOf Me.CanClickCancel)

        DialogViewModelDictionary = New DialogViewModelDictionaries
        DialogViewModelDictionary.AddDialogViewModel("EditAddressDialogView", New EditAddressDialogViewModel())
    End Sub 
```

# .net - .Net SHA1CryptoServiceProvider 不匹配 SQL Hashbytes

> ID：11233394
> 
> 赞同：4
> 
> 时间：2012-06-27T19:13:17.007
> 
> 标签：.net, sql, vb.net, cryptography, sha1

在使用 Hashbytes 转换存储在 SQL 中的一些明文密码后，似乎无法让 .Net 生成适当的匹配哈希。

用于转换密码的 SQL：

```
UPDATE Users
SET UserPassword = HASHBYTES('SHA1', UserPassword + CAST(Salt AS VARCHAR(36))) 
```

现在用于生成哈希的 .Net 代码：

```
Dim oSHA1 As New System.Security.Cryptography.SHA1CryptoServiceProvider
Dim bValue() As Byte
Dim bHash() As Byte

bValue = System.Text.Encoding.UTF8.GetBytes(sPlainTextPass)
bHash = oSHA1.ComputeHash(bValue)
oSHA1.Clear()

Dim sEncryptPass As String = String.Empty
For i As Integer = 0 To bHash.Length - 1
    sEncryptPass = sEncryptPass + bHash(i).ToString("x2").ToLower()
Next 
```

一些补充说明：盐存储在数据库中。sPlainTextPass 包含纯文本的密码+盐。我尝试了几种不同的编码，包括 ASCII、UTF7 和 UTF8。数据库字段是一个 varchar，据我了解，它应该与 UTF8 匹配。

帮助？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T13:11:13.067

**你不能散列一个字符串，你只能散列字节。**因此 SQL Server 并且您必须使用编码将字符串转换为字节。

SQL Server 不支持 UTF8。您需要找出它使用什么并在您的应用程序中匹配该编码。对于 nvarchar，我会尝试`Encoding.Unicode`使用稀有和特殊字符进行测试。

网上似乎有一些关于这个主题的信息，我发现谷歌搜索“哈希字节编码”：[http ://weblogs.sqlteam.com/mladenp/archive/2009/04/28/Comparing-SQL-Server-HASHBYTES- function-and-.Net-hashing.aspx](http://weblogs.sqlteam.com/mladenp/archive/2009/04/28/Comparing-SQL-Server-HASHBYTES-function-and-.Net-hashing.aspx)虽然我必须说这篇博文包含明显的错误，不能被信任。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:18:35.377

我曾在 Sybase SQLAnywhere 中看到过这种情况。根据您使用的 SQL 数据库，它可能会自行对哈希进行加盐，在这种情况下，您永远不会得到匹配的哈希（即不知道数据库的内部工作原理）

编辑：

如果您要比较密码，考虑到任何内部加盐，您可以将 .NET 散列密码发送到数据库，在那里再次对其进行散列，并检查与存储值是否相等。这当然假设您以类似的方式存储了密码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-07T19:05:14.233

在 T-SQL 中使用 nvarchar 类型而不是 varchar 并且结果也将匹配

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-28T16:45:54.763

我经历过同样的事情......我认为它与更新语句有关，以便将您的哈希填充到用户表中。

我发现问题出在数据类型上。如果在表达式中

```
UserPassword + CAST(Salt AS VARCHAR(36)) 
```

UserPassword 列是 nvarchar，结果将是 nvarchar 和不同的哈希值。

我通过将表达式转换为将密码和盐连接到 varchar 来解决我的问题。

一个很好的测试，看看这是否真的是同一个问题是通过运行这个......

```
SELECT HASHBYTES('SHA1', UserPassword + CAST(Salt AS VARCHAR(36))),
HASHBYTES('SHA1', CAST( UserPassword + CAST(Salt AS VARCHAR(36))as varchar)) 
FROM Users 
```

# javascript - mvc3中的javascript代码洞察标头

> ID：11233396
> 
> 赞同：0
> 
> 时间：2012-06-27T19:13:29.533
> 
> 标签：javascript, asp.net-mvc-3

嘿朋友任何人请帮我解决这个问题。在这个javascript代码中我从控制器获取2个数组ID数组和百分比数组并将它们转换为javascript数组现在我想要动态更改元素的css属性但我需要成功。如果有人找到此代码中的错误请告诉我

```
@section javascript{
        <script  type="text/javascript">
         $(document).ready(function() {
                @{
                    string data = "";
                    int length = ViewBag.length;
            }

              var percent = new Array();
            @for (int j = 0; j < length; j++)
            {
                data += "percent[" + j + "]=\"" + ViewBag.percentage[j] + "\";";
            }         
             @MvcHtmlString.Create(data);  
              var ids = new Array();
            @for (int i = 0; i < length; i++)
            {   
                data += "ids[" + i + "]=\"" + ViewBag.IDs[i] + "\";";
            }   
              @MvcHtmlString.Create(data);
             //get current date day for javascript
            var date  = new Date();
            var day = date.getDay();
            var dayper = (day/30)*100;
            //**************************************************************//
            //Remaining amount in percentage variable as percent[i] is spend//
            //amount percentage so subtracting spend percentage from 100 wil//
            // return remaing amount percentage                             //
            //**************************************************************//
            var rA;
            var per;
            var id;
             for(var k = 0;k<ids.length;k++)
             {
                per = percent[k];
                id  = ids[k];
                document.getElementById(id).style.width = parseInt(per)+"%";
                rA = 100 - parseInt(percent[k]);
                if(rA - dayper > 40)
                {
                    document.getElementById(id).style.background = "red";
                }
                else if((rA - dayper)>20 && (rA - dayper) < 40)
                {
                    document.getElementById(id).style.background = "yellow";
                }           
                else
                document.getElementById(id).style.background = "green";
             }            
          });

        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T07:35:15.390

您所展示的是服务器端和客户端代码的绝对可怕的混合。很抱歉这么说，但那是可恶的代码。请把这些问题分开。此外，由于您似乎已经在使用 jQuery，我找不到任何合理的解释来解释您为什么不利用它，而是编写一些 90 年代的 javascript 代码。

那么让我们看看如何改进这一点：

```
@section javascript {
    <script type="text/javascript">
        $(document).ready(function() {
            var percents = @Html.Raw(Json.Encode(ViewBag.percentage));
            var ids = @Html.Raw(Json.Encode(ViewBag.IDs));

            var date  = new Date();
            var day = date.getDay();
            var dayper = (day / 30) * 100;

            $.each(ids, function(index, id) {
                var percent = parseInt(percents[index], 10);
                var element = $('#' + id);
                element.css('width', percent + '%');
                var rA = 100 - percent;
                var color = 'green';

                if (rA - dayper > 40) {
                    color = 'red';
                } else if (rA - dayper > 20 && rA - dayper < 40) {
                    color = 'yellow';
                }

                element.css('background-color', color);
            });
        });
    </script>
} 
```

# ios - iPad Web App 启动画面在横向模式下不起作用

> ID：11233403
> 
> 赞同：0
> 
> 时间：2012-06-27T19:13:54.693
> 
> 标签：ios, ipad, ios5, web-applications

我已经阅读了无数关于此的主题、博客文章和其他在线文档，但我无法让它发挥作用。我花了几个小时研究这个并尝试不同的东西。

我正在尝试为 iPad 2 上的网络应用程序显示初始屏幕图像。我什至不关心 iPad 3 的分辨率。

这些是我拥有的标签：

```
<link href="images/splash_748.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape)" rel="apple-touch-startup_image">
<link href="images/splash_768.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait)" rel="apple-touch-startup-image"> 
```

splash_748.png 为 748x1024

splash_768.png 为 768x1004

纵向模式启动画面工作得很好。横向版本不会显示。有没有人有任何想法？我已经尝试了十几种不同的方法来做到这一点。他们都没有工作。

每次进行更新时，我一直在删除应用程序并清除 Safari 的缓存。然后我返回网页并将其发送到主屏幕。这似乎发现了图像的变化，所以我无法想象它正在缓存其他任何东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T15:17:10.353

您的代码有错误。看第一行的结尾

```
rel="apple-touch-startup_image" 
```

它应该是

```
rel="apple-touch-startup-image" 
```

注意 _ 应该是 -

编辑：这是我的 iOS Web 应用程序代码 - 涵盖了大多数可能性，似乎适用于大多数设备，但不要让我坚持 :)

```
<!-- iOS Device Startup Images -->
<!-- iPhone/iPod Touch Portrait – 320 x 460 (standard resolution) -->
<link rel="apple-touch-startup-image" href="images/ios/iphone-startup-320-460.png" media="screen and (max-device-width: 320px) and (-webkit-min-device-pixel-ratio: 1)" />

<!-- iPhone/iPod Touch (high-resolution) Portrait – 640 x 920 pixels -->
<link rel="apple-touch-startup-image" href="images/ios/iphone-startup-640-920.png" media="screen and (max-device-width: 320px) and (-webkit-min-device-pixel-ratio: 2)" />

<!-- iPad Landscape 1024x748 -->
<link rel="apple-touch-startup-image" sizes="1024x748" href="images/ios/ipad-startup-1024-748.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape) and (-webkit-min-device-pixel-ratio: 1)" />

<!-- iPad Portrait 768x1004 -->
<link rel="apple-touch-startup-image" sizes="768x1004" href="images/ios/ipad-startup-768-1004.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:portrait) and (-webkit-min-device-pixel-ratio: 1)"/>

<!-- iPad (high-resolution Landscape – 2048 x 1496 pixels ) -->
<link rel="apple-touch-startup-image" sizes="2048x1496" href="images/ios/ipad-startup-2048-1496.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape) and (-webkit-min-device-pixel-ratio: 2)" />

<!-- iPad (high-resolution) Portrait – 1536 x 2008 pixels -->
<link rel="apple-touch-startup-image" sizes="1536x2008" href="images/ios/ipad-startup-1536-2008.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape) and (-webkit-min-device-pixel-ratio: 2)" />

<!-- iOS Icons -->
<link rel="apple-touch-icon" href="images/ios/icon-57.png" />
<link rel="apple-touch-icon" sizes="72x72" href="images/ios/icon-72.png" />
<link rel="apple-touch-icon" sizes="114x114" href="images/ios/icon-114.png" />
<link rel="apple-touch-icon" sizes="144x144" href="images/ios/icon-144.png" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:16:11.817

我就是这样做的：

```
<link rel="apple-touch-startup-image" sizes="1024x748" href="Default-Landscape.png" media="screen and (min-device-width: 481px) and (max-device-width: 1024px) and (orientation:landscape)" /> 
```

# c++ - C++ 中的简单曲线拟合实现（SVD 最小二乘拟合或类似）

> ID：11233404
> 
> 赞同：6
> 
> 时间：2012-06-27T19:14:00.843
> 
> 标签：c++, curve

我已经在互联网上搜索了很长一段时间，试图找到一种简单、直观、快速的方法来使用 5 个数据点逼近 2 次多项式。

我正在使用 VC++ 2008。

我遇到过很多库，例如 cminipack、cmpfit、lmfit 等……但它们看起来都不是很直观，而且我很难实现代码。

最终，我将一组离散值放入一维数组中，我试图通过曲线拟合数据来找到“虚拟最大点”，然后在非整数值处找到该数据的最大点（其中一个整数值将是仅查看数组的最高精度）。

无论如何，如果有人做过类似的事情，并且可以指出他们使用的包，也许是包的简单实现，那就太好了！

我很高兴提供一些测试数据和图表来向您展示我正在使用什么样的东西，但我觉得我的要求非常简单。非常感谢。

编辑：这是我写的有效的代码！ [http://pastebin.com/tUvKmGPn](http://pastebin.com/tUvKmGPn)

更改大小以更改使用的输入数量

0 0 1 1 2 4 4 16 7 49

a:1 b:0 c:0 按任意键继续。. .

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:49:44.220

假设您要拟合形式的标准抛物线

```
 y = ax^2 + bx + c 
```

到您的 5 个数据点，那么您只需要求解一个 3 x 3 矩阵方程。看看这个例子[http://www.personal.psu.edu/jhm/f90/lectures/lsq2.html](http://www.personal.psu.edu/jhm/f90/lectures/lsq2.html) - 它可以解决您似乎描述的相同问题（仅使用更多数据点）。如果您对微积分有基本的了解，并且能够反转 3x3 矩阵（或者在数字上更好的东西 - 我猜你会这样做，因为你在问题标题中专门提到了 SVD），那么这个例子将阐明你需要做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:36:49.397

看看这个[关于多项式回归的维基百科页面](http://en.wikipedia.org/wiki/Polynomial_regression)

# python - Yapsy 查看整个文件系统的插件

> ID：11233406
> 
> 赞同：0
> 
> 时间：2012-06-27T19:14:05.500
> 
> 标签：python, chilkat-xml

我有一个将[YAPSY](http://yapsy.sourceforge.net/)用于我们的插件框架的应用程序。该程序指定了一个默认插件目录，还允许用户指定一个目录（保存在 XML 文件中）：

```
 # Get the default plugin directory, using XML
    path = os.path.expanduser('~')
    xml = xml_controller.Controller(path + '\.cxvrc.xml')
    xml.load_file()
    xml.get_plugin_directory()
    directory = ["plugins", xml.get_plugin_directory()]

    # Load the plugins from the default plugin directory.
    manager = PluginManager()
    manager.setPluginPlaces(directory)
    manager.setPluginInfoExtension('plugin')
    manager.collectPlugins() 
```

这样做的问题是它正在加载用户的插件，无论它们在文件系统上的什么位置。本质上，它忽略了 XML 文件查询的结果字符串。为什么会这样？一个例子

```
 xml.get_plugin_directory() 
```

返回是一个字符串：“C:\Documents and Settings\achilds”。我认为 collectPlugins() 方法应该检查我在 setPluginPlaces(directory) 中提供的目录列表。

任何想法为什么会在用户的文件系统上找到所有插件（无论他们指定了什么插件目录）？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:21:32.167

嗯，我已经找出了罪魁祸首。[在仔细检查了YAPSY PluginManager](http://yapsy.sourceforge.net/PluginManager.html)的工作原理之后，这似乎是我的目标。[PluginManager.locatePlugin()](http://yapsy.sourceforge.net/PluginManager.html#yapsy.PluginManager.PluginManager.locatePlugins)查看给定的目录，然后使用 os.walk(given paths) 检查给定路径下的每个文件夹。

在不知不觉中，我将目录设置为查看“C:\Documents and Settings\achilds”，然后将我的插件放在桌面上，恰好位于：“C:\Documents and Settings\achilds\Desktop”。因此，PluginManager.locatePlugin() 完成了它的设计，并搜索了“C:\Documents and Settings\achilds”中的所有目录，找到了我放在桌面上的目录。

# python - 如何使用 matplotlib 为符号编写同时下标和上标

> ID：11233407
> 
> 赞同：6
> 
> 时间：2012-06-27T19:14:06.117
> 
> 标签：python, matplotlib

我想得到类似的东西：$E^{\alpha}_{\beta}$，其中符号 E 有同时下标 \beta 和上标 \alpha。我输入 matplotlib (1.2.x with python 2.7.1) 以下代码：

```
ax.text(0.,0.,r'E$^{\alpha}_{\beta}$') 
```

我收到一条错误消息：

```
Subscript/superscript sequence is too long. Use braces { } to remove ambiguity. 
```

当我添加额外的大括号来分隔上标和下标时

```
ax.text(0.,0.,r'E${^{\alpha}}_{\beta}$') 
```

matplotlib 这次可以处理了，但结果不是同时上标和下标，似乎符号 E$^{\alpha}$ 带有下标 \beta，其中 \alpha 和 \beta 没有垂直对齐。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T19:20:39.247

将您`E`移到 TeX 中，以便处理器知道什么`alpha`并`beta`挂断：

```
text(0.25, 0.5, r'$E^{\alpha}_{\beta}$', size=200) 
```

生产

![在此处输入图像描述](../Images/cebcc6b0e4f4d654302f9c7a9b02e332.png)

# mysql - MYSQL 使用 count(*) 连接子查询来查找用户拥有的关系数

> ID：11233415
> 
> 赞同：1
> 
> 时间：2012-06-27T19:14:59.287
> 
> 标签：mysql, sql, database, join

我有一个名为 users 的表，其中包含字段 id、电子邮件、用户名、名字和姓氏。

我有另一个名为 friends 的表，其中包含字段 id、user1、user2 和关系。

我在这个不应该那么难的连接查询上遇到了很大的困难:(。

我想找到尚未与您相关的最受欢迎的用户。例如，我已经生成了一个关系数组，我想查找用户信息以及他们拥有的与您不相关的用户的关系数量。

到目前为止，这是我的查询，但由于某种原因我无法让它工作。

```
select id, email,username,firstname,lastname
from users as userInformation
     left join (select count(*)
                from friends
                where friends.user1 = userInformation.id or friends.user2 = userInformation.id
               ) as x
where users.id NOT IN (2,44,26,33,1) 
```

部分中的“2,44,26,33,1”`not in`是任意的，具体取决于登录的用户。
我无法正常工作的部分是左连接，它增加了关系计数。

只是为了提供帮助，这里有两个有效的查询。我只需要加入第二个作为每个用户第一个查询的列

```
 select id, email,username,firstname,lastname from users where id NOT IN (2,44,26,33,1)

 select count(*) from friends where user1 =2 or user2 = 2 
```

但是第二个查询应该针对第一个查询中的每个 id。希望清除它。

这越来越近了

```
select id, email,username,firstname,lastname 
  from users as help
  left join (
      select count(*) 
        from friends 
       where user1 = help.id or user2 = help.id) as friendCounter
 where help.id NOT IN (2,44,26,33,1) 
```

出于某种原因，它最终无法识别 where 子句中的 help.id。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:21:21.540

这个怎么样？

```
select userinformation.id, email,username,firstname,lastname,count(*)
from users as userInformation
     left join  friends on friends.user1 = userInformation.id or friends.user2 = userInformation.id

where userInformation.id NOT IN (2,44,26,33,1)
group by email,username,firstname,lastname 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:24:22.847

```
select * from (
    select id, email,username,firstname,lastname,count(*) N
        from users as userInformation
             left join  friends on friends.user1 = userInformation.id 
                                   or friends.user2 = userInformation.id

        where userInformation.id NOT IN (2,44,26,33,1)
        group by id,email,username,firstname,lastname) Aliased
order by N desc 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:40:52.587

我将按照我的理解重新表述您的问题陈述。让我知道它是否错了。

对于给定的用户，找到最受欢迎的不相关用户：

```
declare @GivenUser as varchar(20)
set @GivenUser = '1'  --replace '1' here with the user id you want

select id, email, username, firstname, lastname, Connections
from userInformation u1
inner join (
    select TheUser, count(*) as Connections
    from (
        select user1 as TheUser
        from friends
        where user1 <> @GivenUser
        and user2 <> @GivenUser

        union all

        select user2 as TheUser
        from friends
        where user1 <> @GivenUser
        and user2 <> @GivenUser
        ) u
    group by User
    order by sum(Connections) desc
    ) u2
on u1.id = u2.TheUser 
```

# c# - 沙盒装视觉 webpart

> ID：11233418
> 
> 赞同：0
> 
> 时间：2012-06-27T19:15:09.087
> 
> 标签：c#, visual-studio-2010, sharepoint-2010, user-controls, web-parts

我正在尝试借助我们拥有的电动工具创建 Visual Webpart（沙盒）。但它没有创建设计器文件（ascx.g.cs），也没有编译。

最初，我曾经使用 Visual Studio 2010，其中 ascx 文件的字符数限制为 8256。然后我升级到 Visual Studio 2010 SP1，现在设计器文件完全消失了。

我看到了很多基于此的线程，但没有一个有完美的解决方案。

我尝试再次安装 Visual Studio 2010 sp1，也尝试了不同的机器/服务器，但没有帮助。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T19:19:45.990

最后我解决了...

这是所有问题的解决方案

1.  当前上下文中不存在 InitializeControl()
2.  设计器文件 ascx.g.cs 未生成

使用 Sandbox webpart 的第一件事是，您需要拥有 Visual Studio 2010 SP1，并且以 Visual Studio 身份登录的用户应该对您正在部署的 Web 应用程序的 3 个数据库 Sharepoint_Admin_Guid、Sharepoint_Config、内容数据库具有 db_owner 权限。

在 Visual Studio 2010 中，您的字符限制为 8256（在 SP1 中修复）。 [http://blog.mastykarz.nl/the-name-initializecontrol-does-not-exist-in-the-current-context-visual-web-part-sandboxed-bug-fix/](http://blog.mastykarz.nl/the-name-initializecontrol-does-not-exist-in-the-current-context-visual-web-part-sandboxed-bug-fix/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T13:11:21.250

我以前也有过这种情况。我发现的一种解决方案是确保您在 ascx 文件的顶部拥有所有必要的程序集引用和注册指令。我发现你需要经常添加的一个寄存器是

```
<%@ Register 
    Tagprefix="asp" 
    Namespace="System.Web.UI" 
    Assembly="System.Web.Extensions, Version=3.5.0.0, ... %> 
```

它位于“常规”可视 Web 部件的模板中，但不适用于沙盒版本。

# mysql - Play framework 2.0.1 不断尝试进化错误的数据库类型

> ID：11233423
> 
> 赞同：3
> 
> 时间：2012-06-27T19:15:20.017
> 
> 标签：mysql, database, playframework, h2, openshift

我正在开发部署在 openshift DIY 应用程序上的 play 2.0.1 应用程序。我在使用数据库时遇到了麻烦，因为 play 一直在尝试改进错误的数据库。我有一个 mysql 数据库，并且 play 创建了一个 H2 数据库进化脚本。这是脚本。

他试图创造的东西

```
create table gif (
id                        bigint not null,
title                     varchar(255),
add_date                  timestamp,
gif_url                   varchar(255),
img_source                varchar(5000),
web_id                    varchar(255),
found_on                  varchar(255),
thumbnail                 varchar(255),
version                   integer not null,
constraint pk_gif primary key (id))
;

create table task (
id                        bigint not null,
action                    varchar(255),
queue                     integer,
type                      varchar(255),
object_id                 bigint,
params                    varchar(255),
working_on                boolean,
version                   integer not null,
constraint pk_task primary key (id))
;

create sequence gif_seq;

create sequence task_seq; 
```

它应该创造什么

```
# --- Created by Ebean DDL
# To stop Ebean DDL generation, remove this comment and start using Evolutions

# --- !Ups

create table gif (
  id                        bigint auto_increment not null,
  title                     varchar(255),
  add_date                  datetime,
  gif_url                   varchar(255),
  img_source                varchar(5000),
  web_id                    varchar(255),
  found_on                  varchar(255),
  thumbnail                 varchar(255),
  version                   integer not null,
  constraint pk_gif primary key (id))
;

create table task (
  id                        bigint auto_increment not null,
  action                    varchar(255),
  queue                     integer,
  type                      varchar(255),
  object_id                 bigint,
  params                    varchar(255),
  working_on                tinyint(1) default 0,
  version                   integer not null,
  constraint pk_task primary key (id))
; 
```

我的应用程序.conf

```
# This is the main configuration file for the application running on openshift.
# ~~~~~

include "application"

# Secret key
# ~~~~~
# The secret key is used to secure cryptographics functions.
# If you deploy your application to several instances be sure to use the same key!
application.secret="TsLWj4[^1N<7lkdhfaiusjdpoifnsaodfEkyPDTO[dnh<7_R[j;cN0:lGK6Mm`0048C@3PK]4KR6HobL"

# Openshift database configuration
# ~~~~~
# You can declare as many datasources as you want.
# By convention, the default datasource is named `default`
#
db.default.driver=com.mysql.jdbc.Driver
db.default.url="jdbc:mysql://"${OPENSHIFT_DB_HOST}":"${OPENSHIFT_DB_PORT}/${OPENSHIFT_APP_NAME}
db.default.user=${OPENSHIFT_DB_USERNAME}
db.default.password=${OPENSHIFT_DB_PASSWORD}

#db.default.driver=org.h2.Driver
#db.default.url="jdbc:h2:mem:play"
#db.default.user=sa
#db.default.password=""
#
# You can expose this datasource via JNDI if needed (Useful for JPA)
# db.default.jndiName=DefaultDS

ebean.default= "models.*"

#Akka
akka.default-dispatcher.fork-join-executor.pool-size-max = 64
akka.actor.debug.receive = on
# Logger
# ~~~~~
# You can also configure logback (http://logback.qos.ch/), by providing a logger.xml file in the conf directory .

# Root logger:
logger.root=ERROR

# Logger used by the framework:
logger.play=INFO

# Logger provided to your application:
logger.application=DEBUG

# openshift action_hooks scripts configuration
# ~~~~~
openshift.play.params="-DapplyEvolutions.default=true" 
```

我用这段代码执行它：

```
目标/开始\
    -Dhttp.port=8080\
    -Dhttp.address=${OPENSHIFT_INTERNAL_IP} \
    -Dconfig.resource=openshift.conf

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-21T12:49:11.210

我注意到您的 MySQL 环境变量`application.conf`不正确。正确的 MySQL 环境变量名称是：

```
OPENSHIFT_MYSQL_DB_HOST
OPENSHIFT_MYSQL_DB_PORT
OPENSHIFT_MYSQL_DB_USERNAME
OPENSHIFT_MYSQL_DB_PASSWORD 
```

虽然我无法测试您的配置以查看此更改是否解决了您的问题，但错误的变量名称似乎值得指出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-25T11:28:12.763

我刚刚在自己的项目中遇到了同样的问题，我想我知道发生了什么。我正在使用 ANT 来构建我的项目。仅当我在“播放开始”之前运行单元测试时才会出现此问题。

在我的单元测试代码中，我正在使用 H2DB 对其进行测试。结果，play 吐出了 H2 语法的 1.sql，它替换了为 mysql 数据库创建的原始 1.sql。运行测试后，play看到1.sql已经存在，所以它不会费心生成另一个并使用为H2DB生成的那个并且出现错误。我的解决方案是在我的 Ant 脚本中运行单元测试后删除 1.sql。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-31T05:35:35.897

我打开了这个问题 - 因为这似乎只有在“生产”模式下尝试使用进化运行时才会发生（例如，通过播放开始）：

[https://github.com/playframework/playframework/issues/1410](https://github.com/playframework/playframework/issues/1410)

我从我的桌面上看到了这一点 - 与任何云提供商无关。

# swing - Powermock, Mockito nullpointerexception 调用 super() JDialog 时

> ID：11233428
> 
> 赞同：11
> 
> 时间：2012-06-27T19:15:41.700
> 
> 标签：swing, junit, nullpointerexception, mockito, powermock

当我尝试对 JDialog 对象中的某些方法进行单元测试时，我收到了 NullPointerException。我必须初始化对话框父级的模拟版本以及将使用的另一个类（除了调用静态方法。代码如下：

```
@RunWith( PowerMockRunner.class )
@PrepareForTest( ControlFileUtilities.class )
public class StructCompDlgTest 
{
  @Before
  public void setUp() throws Exception
  {
    controlFrame    = org.mockito.Mockito.mock( ControlFrame.class );
    structCmpDlg    = new StructureCompareDialog( controlFrame );
    serverPipeline  = org.mockito.Mockito.mock( ServerPipeline.class );
  }
...
} 
```

用于构建对话框的代码在这里：

```
StructureCompareDialog( IControlFrame controlFrame )
{
 super( (Frame) controlFrame, "title", true );
 ...
} 
```

当调用超级构造函数时，我最终会在 java.awt.Window.addOwnerWindow(Window.java:2525) 处得到 NullPointerError"

```
void addOwnedWindow(WeakReference weakWindow) {
  if (weakWindow != null) {
    synchronized(ownedWindowList) {  ***<<------ offending line***
      // this if statement should really be an assert, but we don't
      // have asserts...
      if (!ownedWindowList.contains(weakWindow)) {
        ownedWindowList.addElement(weakWindow);
      }
    }
  }
} 
```

我知道我正在将静态和摇摆 gui 混合在一个有毒的漩涡中，但我别无选择。我被指示将一些单元测试与现有代码组合在一起。我不知道出了什么问题。

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T14:53:29.623

看起来很棘手！本质上，您将不得不找到`controlFrame`作为构造函数的一部分被调用的所有方法，然后撒上一些调用

```
when(controlFrame.methodCalled()).thenReturn(somethingSensible); 
```

如果这看起来像是一项艰巨的工作，那么尝试创建一个`IControlFrame`您在测试 setUp() 中创建的默认实现并使用模拟的替代品怎么样。

前段时间我有一个类似的问题，我试图对 Spring JMS 侦听器进行单元测试。无论对错，我通过创建自己的默认实现得到了一个可行的解决方案，`DefaultMessageListenerContainer`它给了我与你所描述的类似的问题。我的解决方案涉及使用我自己的测试特定版本扩展实际实现，看起来像这样

```
/**
 * Empty mocked class to allow unit testing with spring references to a
 * DefaultMessageListenerContainer. The functionality on this class should never be
 * called so just override and do nothing.  
 */
public class MockDefaultMessageListenerContainer extends DefaultMessageListenerContainer {

    public MockDefaultMessageListenerContainer() {
    }

    public void afterPropertiesSet() {
    }

    @Override
    protected Connection createConnection() throws JMSException {
        return null;
    }
} 
```

在我的示例中，我能够通过传回有`null`问题的 createConnection() 方法的值来运行我的测试。也许同样的方法可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T22:39:09.350

`ownedWIndowList`是在课堂上`transient`。`java.awt.Window`您的实例是否`JDialog`被序列化？如果是这样，您可能需要使用`readObject(java.io.ObjectStream)`Serializable 接口中的方法重新初始化`ownedWIndowList`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-27T22:51:15.033

我不知道您的 IControlFrame 是什么样的，但是将模拟传递`Frame`给 super() 不起作用。我必须实例化我自己的版本：

```
private class EmptyControlFrame extends JFrame implements IControlFrame {

    @Override
    public JFrame getFrame() {
        return null;
    }

    // return null for any other overrides from IControlFrame
} 
```

然后在你的 setUp() 中：

```
controlFrame = new EmptyControlFrame(); 
```

# facebook - 通过用户定义设备发布

> ID：11233429
> 
> 赞同：0
> 
> 时间：2012-06-27T19:15:42.213
> 
> 标签：facebook

当用户通过应用发帖时，该帖子作为标识符，例如“通过 UpdateStatus”。有一些有趣的应用程序允许自定义此字段，您可以通过 Potato、Hogwarts Letters 等发送帖子。

我发现要做到这一点，您必须创建一个具有您想要的每个不同名称的应用程序。

我的问题是你能以编程方式定义这个字段吗？在 Facebook 墙上发帖时，只需创建一个应用程序并仅屏蔽此字段。

我发现帖子中有一个现场应用程序，您可以在其中定义应用程序名称和 ID。我不想更改 id，只更改名称。

[https://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

这有可能实现吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:35:40.607

> 我的问题是你能以编程方式定义这个字段吗？

不，你不能。它*始终*是您的应用程序的名称。

> 我发现帖子中有一个现场应用程序，您可以在其中定义应用程序名称和 ID。

这是您在*阅读*帖子对象时获得的信息。这并不意味着您可以在发布时*设置它。*

# java - iText PDF writer 中有没有办法动态检查 PDF 大小？

> ID：11233433
> 
> 赞同：1
> 
> 时间：2012-06-27T19:15:59.943
> 
> 标签：java, pdf, pdf-generation, itext

我知道这里有一个*类似*的问题，来自一个想将单个文件分成多个文件的人。遗憾的是，由于创建新文件会产生一定的开销，因此该解决方案不适用于我。

## 背景（无需阅读）：

我想要做的是生成任意大小的 PDF 文件来播种数据库（即调用具有所需文件大小的方法，以千字节或兆字节为单位，应该生成所需大小的文件）。

目前，我通过使其随机并将其以 1KB 块（以段落形式）放入文件中来确保输入数据不可压缩。在将输出字节数绘制为所需字节数的函数后，我更改了算法以解释这种（令人愉快和预期的）线性关系。

然而，由于输入数据的随机性，这种方法存在一定的不确定性，其绝对值会随着所需大小的增加而增加（因此，尽管它减少了百分之一，但百分之一在 20 MB 的文件中，一个百分比的绝对值变得非常重要）。

理想情况下，我将能够生成任意大小的文件，大小在千字节以内，但为了做到这一点，我需要知道任何给定操作后的文件大小，为了知道这一点，我需要知道什么时候PDFWriter 写入其缓冲区。或者至少该缓冲区有多大（即，如果缓冲区小于一千字节，则写入时间无关紧要，因为我只关心准确到该边距内）。

## 问题：

有没有办法在不关闭文档的情况下使用文本检查实际要在 PDF 中写入磁盘的数据字节数？

还是“关闭文档”仅仅意味着它刷新缓冲区并关闭流（即它不需要在文件关闭时将任何额外的非用户输入数据量写入文件）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T08:14:50.230

当你构建你的**PdfWriter 时**，你必须指定一个**OutputStream**，它不一定是一个 FileOutputStream。因此，如果您以这种方式构建它

```
 ByteArrayOutputStream baos = new ByteArrayOutputStream();
      PdfWriter writer = PdfWriter.getInstance(document, baos);
       . . . 
```

您可以随时检查缓冲区大小：

```
 System.out.println("Current size: " + baos.size()); 
```

希望这会帮助你。

# php - “渲染视图”是什么意思？这是什么手续？

> ID：11233442
> 
> 赞同：2
> 
> 时间：2012-06-27T19:16:30.793
> 
> 标签：php, zend-framework, rendering

我不明白什么是“渲染视图”。我正在阅读 Zend Framework 手册，这个术语有很多用法。

自动渲染视图：

> 这个助手负责将视图对象注入控制器，以及自动渲染视图。

禁用视图的渲染：

> 您还可以简单地禁用单个视图的渲染

`render()`呈现视图脚本。

> render() 渲染视图脚本。

在子目录中呈现该模板

> 为 $action 传递一个值将在 /[controller]/ 子目录中呈现该模板。

等等。

我找到了`render()`方法。我实际上有许多组件类的`Zend_Controller`方法`render()`。但无论如何，他们最后都只打电话给`Zend_View_Abstract`班上的那个。在它的实现中我唯一能看到的是，它似乎只是将 html-script 放入输出缓冲区：

```
public function render($name) {

        // find the script file name using the parent private method
        $this->_file = $this->_script($name);
        unset($name); // remove $name from local scope

        ob_start();
        $this->_run($this->_file);

        return $this->_filter(ob_get_clean()); // filter output
    } 
```

不幸的是，没有实现该`_run()`方法，我不知道它必须做什么，如何在范围中包含脚本。这就是包含 - 的意思`include_once("/myScritp.php")`吗？

```
/**
 * Use to include the view script in a scope that only allows public
 * members.
 *
 * @return mixed
 */
 abstract protected function _run(); 
```

那么“渲染视图”是什么意思呢？只是为了包含脚本并将其放入输出缓冲区并在某个变量（`return ob_get_clean()`）中获取它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:22:22.287

View 是 MVC 框架的一部分，这就是 Zend。将视图视为用户的输出。从某种意义上说，控制器处理动作和路由，而模型主要处理数据库交互。视图设置变量并在页面呈现时将它们发送到 HTML 输出。

因此`rendering a view`，MVC框架已经处理了控制器中的数据并在模型中完成了后端工作，然后将这些数据发送到视图以输出给用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:20:52.383

Zend 框架基于 MVC 设计模式，代表模型视图控制器。视图是表示部分，包括 html、javascript、css 或任何其他美学。

**渲染视图**意味着向用户或浏览器显示视图，例如 html 部分。假设您有一个用于站点“关于”页面的控制器，现在从您的控制器中，您将呈现“关于”视图，这意味着**在浏览器中显示该页面以供用户查看，**否则如果您不这样做，用户将只看到空白页面:)

把它想象成`echo`html/css/js 到浏览器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:21:17.477

`render`只是意味着发射。打印。回响。写入某个源（可能是标准输出）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-28T14:31:38.810

比如说，我们正在谈论 HTML：

渲染是使用应用程序中的实时数据填充模板、替换占位符和简单逻辑（如 if-else 语句或循环）生成有效 html 文件的过程。

# c++ - 参数语法

> ID：11233447
> 
> 赞同：3
> 
> 时间：2012-06-27T19:17:25.360
> 
> 标签：c++, syntax

我遇到了这个示例类[http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/sp_techniques.html#as_lock](http://www.boost.org/doc/libs/1_49_0/libs/smart_ptr/sp_techniques.html#as_lock)并且我在语法上苦苦挣扎。

```
class shared_lock
{

private:

    shared_ptr<void> pv;

public:

    template<class Mutex> explicit shared_lock(Mutex & m): pv((m.lock(), &m), mem_fn(&Mutex::unlock)) {}
}; 
```

我（相信我）理解除了这部分“（m.lock（），＆m）”之外的所有内容。整个事情似乎是初始化智能指针的第一个参数。该复合语句的评估结果是什么？仅仅是m的地址吗？为什么将锁作为参数列表的一部分放置在那里（以及它是如何合法的）？相反，我会期待这样的声明：

```
template<class Mutex> explicit shared_lock(Mutex & m): pv(&m, mem_fn(&Mutex::unlock)) {m.lock();} 
```

我的替代语句会改变功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:28:23.453

> 该复合语句的评估结果是什么？仅仅是m的地址吗？

是的

> 为什么将锁作为参数列表的一部分放置在那里（以及它是如何合法的）？

构造函数需要获取锁，这是一个方便的放置它的地方。否则必须在构造函数的主体中设置共享指针。

这是合法的，因为表达式，包括逗号运算符，在初始化程序中使用。需要额外的括号来区分逗号运算符与逗号分隔参数，但除此之外，大多数表达式都是允许的。

# macos - Visual svn 与 ssh 远程服务器的差异

> ID：11233448
> 
> 赞同：0
> 
> 时间：2012-06-27T19:17:26.170
> 
> 标签：macos, svn, diff, command-line-interface

我在一家小公司工作，我们通过 SSH 连接到我们的开发环境进行提交，并通过 SMB 来查看文件结构。

在我提交我的代码之前，我希望能够看到我正在提交的文件的一个很好的 GUI Diff。我使用 Coda 2 进行编程，不幸的是它的源代码控制支持很糟糕，并且不会检测到我的开发目录所在的 SMB 安装驱动器也是一个 SVN 工作副本，所以它所有的 SCM 工具在工作中完全没用。

无论如何，因为我是 SSH，所以我不能使用 opendiff 或 diffmerge 命令（因为它们安装在我的本地计算机上而不是远程服务器上）。

我想知道是否有人可以给我一个关于如何从命令行调用 svn diff 的提示，然后在一个漂亮的 GUI 显示中查看它，而不是 SVN 在命令行上为您提供的文本 -/+ 符号.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:28:42.250

如果您在服务器中安装了首选的 GUI 工具，只需通过 ssh 隧道 X，如下所示：

```
ssh -X yourworkserver 
```

然后只需在服务器中启动您选择的工具，就好像它是支持 X 的终端一样。

如果您的服务器没有（拥有）这些工具，您可以随时同步即将提交到本地计算机的内容。例如

```
rsync -a --delete --partial --progress --rsh=ssh  username@yourserver:/path/to/code/about/to/be/committed /path/to/the/snapshot/in/your/machine 
```

然后在本地运行您最喜欢的 GUI 工具。您可以添加 -az 通过压缩流量来加快进程。

如果你的服务器有 Ubuntu，让有权限的人运行“sudo apt-get install meld”，并在隧道 X 上使用 Meld。

大多数体面的文本编辑器（例如 Emacs、Vim、...）在默认配置中包含差异语法突出显示，并且它们也具有文本模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-28T12:48:05.577

我不确定为什么您不能直接在您的 SMB 共享上使用 svn - .svn 文件夹在客户端计算机上根本不可见吗？

无论如何，使用[SSHFS](http://fuse.sourceforge.net/sshfs.html)而不是 SMB 安装工作目录可能会更好。另请参阅[此链接](http://blog.philippklaus.de/2011/07/sshfs-on-mac-os-x-10-6-8-with-fuse4x/)以获取有关 OS X 的特定信息。

# javascript - Bootstrap Carousel 不会自动滑动

> ID：11233449
> 
> 赞同：14
> 
> 时间：2012-06-27T19:17:31.147
> 
> 标签：javascript, twitter-bootstrap

我正在使用 Twitter 的轮播（最新版本）的引导程序，并且我已经让它工作了 - 除了它不会开始自动滑动。单击其中一个导航按钮后，它运行良好。不知道它为什么这样做。

这是我在标题中的 JS 设置：

```
 <script type="text/javascript" src="<?php echo tz_JS . '/bootstrap/jquery.js'; ?>"></script>

<script type="text/javascript" src="<?php echo tz_JS . '/bootstrap/bootstrap-carousel.js'; ?>"></script>
<script type="text/javascript" src="<?php echo tz_JS . '/bootstrap/bootstrap-transition.js'; ?>"></script> 
```

和 HTML：

```
<div id="myCarousel" class="carousel slide">
<div class="carousel-inner">

    <div class="active item">
    <div class="image-position-right">
        <a href="#"><img src="validimagelink.jpg" width="920" height="550" alt=""></a>
    </div>
    </div>

    <div class="item">
    <div class="image-position-right">
        <a href="#"><img src="validimagelink.jpg" width="920" height="550" alt=""></a>
    </div>
    </div>

</div>

<a class="left carousel-control" href="#myCarousel" data-slide="prev">‹&lt;/a>
<a class="right carousel-control" href="#myCarousel" data-slide="next">›&lt;/a> 
```

也只是添加了这个无济于事：

```
<script>
$('#myCarousel').carousel({
    interval: 1200
});
</script> 
```

进行上述更改后，javascript 控制台显示：

Uncaught TypeError: Object # has no method 'carousel' (anonymous function) b.extend.ready jquery.min.js:29 u

关于为什么这不起作用的任何想法？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-06-27T19:37:29.227

```
<script type="text/javascript">
  $(document).ready(function() {
    $('.carousel').carousel({
      interval: 1200
    })
  });
</script> 
```

如果仍然无法正常工作，请在浏览器的 (firebug/chrome..) 控制台中查找潜在错误。

* * *

为了

```
Uncaught TypeError: Object # has no method 'carousel' (anonymous function) b.extend.ready jquery.min.js:29 u 
```

确保：

仅包含一个 jQuery

仅包含一个 bootstrap-carousel.js 或 bootstrap.js。

首先包含 jQuery，然后是 bootstrap-carousel.js 或 bootstrap.js，然后是 $(document).ready( ...

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T19:37:58.900

有时使用错误版本的 JQuery 会影响 Twitters Boostrap 轮播的操作。他们目前正在运行 v1.7.1，如果您使用不同的版本，可能会导致错误。

如果您没有运行 v1.7.1，您可以从这里下载：

[http://code.jquery.com/jquery-1.7.1.min.js](http://code.jquery.com/jquery-1.7.1.min.js)

还要确保您的代码已包装在准备好的文档中：

```
 $(document).ready(function () {
      // code here
  }); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-03T17:28:21.020

我遇到了同样的问题并找到了解决方案；由于我们都将 javascripts 放在页面末尾，因此必须将函数的调用放在它们之后：

```
<script src="js/jquery.min.js"></script>
<script src="js/bootstrap.js"></script>

<script type="text/javascript">
var $ = jQuery.noConflict();
$(document).ready(function() { 
  $('#myCarousel').carousel({ interval: 3000, cycle: true });
}); 
```

有时您需要将 JavaScript 文件放在轮播之后。实际上在页面结束之前。

参考：http: [//twitterbootstrap.org/twitter-bootstrap-3-carousel-not-automatically-starting/](http://twitterbootstrap.org/twitter-bootstrap-3-carousel-not-automatically-starting/)

快乐编码。谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-17T21:23:36.550

```
 <script language="javascript" type="text/javascript">
 $(window).load(function() 
 {       
     $("#slideshow > div:gt(0)").hide();
     setInterval(function() { 
       $('#slideshow > div:first')
       .fadeOut(750)
       .next()
       .fadeIn(1000)
       .end()
       .appendTo('#slideshow');
                            },  11000);
  });
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-01-31T06:50:13.010

如果您正在使用`NgRoute`并且上述解决方案对您不起作用，请务必在模板`NgRoute`注入的最顶部包含以下 javascript 代码`<ng-view></ng-view>`：

```
 <script type="text/javascript"> $(document).ready(function() { $('#Carousel').carousel({ interval: 2500 }) }); 
```

还要确保在包含 bootstrap.js 之前首先包含 jQuery。当我在项目中遇到这个问题时，这对我有帮助。

# jquery - Jquery 可调整大小和可拖动在一起不起作用

> ID：11233450
> 
> 赞同：2
> 
> 时间：2012-06-27T19:17:32.863
> 
> 标签：jquery, jquery-ui

现在我知道有很多关于这个的问题，但我没有发现有人和我有同样的问题，所以让我们开始吧。

所以 jquery ui resizable 函数将我的`<img />`元素设置`dimensions`为`0px`我什至尝试设置我自己的`width`和`height`. 我已经尝试删除它，之后一切看起来都很好，甚至`draggable`可以正常工作。

那么可能是什么原因造成的呢？

这是 Jsfiddle 示例：http: [//jsfiddle.net/SY9yq/3/](http://jsfiddle.net/SY9yq/3/)

和代码本身：

```
#test{
    width:90%;
    height:500px;
}
.container{
    display:inline-block;
    left:20px;
    top:20px;
    border:1px solid black;
}​
$(document).ready(function(){
    callFunctionOne();

    function callFunctionOne(){
        elements = buildElements();
        $("#test").append(elements);
    }

    function buildElements(){
        return $("<div>")
            .addClass("container")
            .draggable()
            .append(
                $("<img />")
                    .addClass("image")
                    .attr("src", "http://blog.stackoverflow.com/audio/stackoverflow-300.png")
                    //if i delete this everything will work
                    .resizable()
                    //but if i keep it it sets image dimensions to 0px                
            );                      

    }
}); 
```

顺便说一句，这是我实际脚本的快速示例，所以有点混乱：P 所以不要怪我哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-06T06:15:15.217

您需要确保在调用图像之前已加载图像`.resizable()`。

固定 jsFiddle：http: [//jsfiddle.net/VKe5h/](http://jsfiddle.net/VKe5h/)

```
$(document).ready(function() {
    callFunctionOne();

    function callFunctionOne() {
        elements = buildElements();
        $("#test").append(elements);
    }

    function buildElements() {
        return $("<div>")
            .addClass("container")
            .draggable().append(
                $('<img class="resizable" />')
                .addClass("image")
                .attr("src", "http://blog.stackoverflow.com/audio/stackoverflow-300.png")
                .load(function() {
                    $(this).resizable();
                })
            );
    }
});​ 
```

# mysql - MySQL 多个 if 块与插入语句失败

> ID：11233455
> 
> 赞同：1
> 
> 时间：2012-06-27T19:17:43.300
> 
> 标签：mysql

我正在 MySQL 中编写一个从视图中读取条目并根据各种条件将行插入另一个表的过程。在这种情况下，我有多达 4 个可能的`size_id`变量，命名`my_size_1, my_size_2, my_size_3`和`my_size_4`. 如果它们没有值，它们是`NULL`。在我的存储过程中编写以下表达式会导致 SQL 错误：

```
-- Insert recommendation options --
INSERT INTO `size_recommendation_options`
VALUES (my_size_recommendation_id, my_size_1);

IF my_size_2 IS NOT NULL THEN
    INSERT INTO `size_recommendation_options`
    VALUES (my_size_recommendation_id, my_size_2);
END;

IF my_size_3 IS NOT NULL THEN
    INSERT INTO `size_recommendation_options`
    VALUES (my_size_recommendation_id, my_size_3);
END;

IF my_size_4 IS NOT NULL THEN
    INSERT INTO `size_recommendation_options`
    VALUES (my_size_recommendation_id, my_size_4);
END; 
```

...但是，删除`IF`语句可以修复错误。也就是说，以下将运行得很好：

```
-- Insert recommendation options --
INSERT INTO `size_recommendation_options`
VALUES (my_size_recommendation_id, my_size_1);

INSERT INTO `size_recommendation_options`
VALUES (my_size_recommendation_id, my_size_2);

INSERT INTO `size_recommendation_options`
VALUES (my_size_recommendation_id, my_size_3);

INSERT INTO `size_recommendation_options`
VALUES (my_size_recommendation_id, my_size_4); 
```

这是为什么？这不是世界末日——我可以在`DELETE FROM size_recommendation_options WHERE size_id IS NULL`之后添加一个，但是所有不必要的插入都会大大减慢存储过程。为什么第一块无效的SQL？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-13T17:33:22.250

`IF`块必须关闭`END IF`：

[http://dev.mysql.com/doc/refman/5.6/en/if-statement.html](http://dev.mysql.com/doc/refman/5.6/en/if-statement.html)

```
13.6.5.2\. IF Syntax

IF search_condition THEN statement_list
    [ELSEIF search_condition THEN statement_list] ...
    [ELSE statement_list]
END IF 
```

在你的情况下：

```
IF my_size_2 IS NOT NULL THEN
    INSERT INTO `size_recommendation_options`
    VALUES (my_size_recommendation_id, my_size_2);
END IF; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:23:27.897

您是否尝试过存储过程？，如下所示：

```
CREATE PROCEDURE insert_val
     (
        IN  a_id                    INT(11)       , 
        IN  a_first                     VARCHAR(15)       
     )
BEGIN 
if 
    INSERT INTO t1(actor_id, first_name )
    VALUES (a_id, a_first) ; 
END 

mysql> call insert_val(10,'a');
Query OK, 1 row affected, 0 warning (0.00 sec)

mysql> call insert_val(null,'a');
ERROR 1048 (23000): Column 'actor_id' cannot be null 
```

输入值不能为空，所以不用担心空插入。

# tsql - 渐进式sql更新语句

> ID：11233462
> 
> 赞同：0
> 
> 时间：2012-06-27T19:18:12.063
> 
> 标签：tsql, progressive

6我有两个表如下，TABLEA：

```
MEMBER_ID   CLIENT_ID   TENTATIVE_ID    TENTATIVE_START_DATE
1   65239   26  6/15/2012
2   63693   NULL    NULL
3   5549    NULL    NULL
4   85452   NULL    NULL
5   77898   11  6/15/2012
6   93119   21  6/15/2012
7   7876    26  6/20/2012
8   27572   26  6/21/2012
9   15524   26  6/21/2012
10  39465   8   6/21/2012
11  10143   26  6/23/2012
12  72828   NULL    NULL 
```

表 B：

```
TENTATIVE_ID    LAST_AUTO_ASSIGNED_ON
26  6/15/2012
11  6/16/2012
21  6/13/2012
27  6/20/2012
28  6/22/2012
29  6/25/2012
8   6/26/2012
21  6/24/2012 
```

情况是，我需要根据最小 LAST_AUTO_ASSIGNED_ON 值使用表 B 中的 TENTATIVE_ID 更新表 A 中的空值，并且每次分配 id 时，都会使用表 B 中该 id 的当前日期时间更新 LAST_AUTO_ASSIGNED_ON。

通过这种方式，我们循环遍历表 B 中的所有暂定 ID，并将它们分配给表 A。

我不允许使用光标。我怎么能做到这一点？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:02:23.710

更新 Tablea set tablea.tentative_id = (select top 1 tableb.tentative_id from tableb order by Last_auto_assigned_on, tentative_id), Tentative_start_date = getdate() from tablea where tablea.tentative_id 为空

更新tableb set last_auto_assigned_on = getdate() where tentative_id = (select top 1 tableb.tentative_id from tableb order by Last_auto_assigned_on, tentative_id)

# php - 在客户端重用 Yii 框架 CValidator 规则

> ID：11233466
> 
> 赞同：1
> 
> 时间：2012-06-27T19:18:23.517
> 
> 标签：php, javascript, yii, validation

我试图找出一种方法来重用 Yii 的 CValidator 类的验证规则，例如 CStringValidator ( [http://www.yiiframework.com/doc/api/1.1/CStringValidator](http://www.yiiframework.com/doc/api/1.1/CStringValidator) )。

我在想如果我能得到 JSON 格式的规则，我可以将 json 传递给 javascript 并构建一个验证器函数来执行它们（或者在 PHP 端构建 javascript 并将脚本发送到客户端）。

Yii 是否提供了序列化类型的方法来获取诸如 CString 之类的验证器并转储它用于进行验证的“规则”？（类似 /[\d\w]+/，只是举一个简单的例子）？

由于这个项目的性质，我们不能使用 CActiveForm（它提供内置的客户端表单验证）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:33:16.603

您可以编写一个非常容易地以 JSON 格式返回规则的操作。

```
public function actionGetRules()
{
    echo CJSON::encode(Model::rules());
} 
```

# c# - Javascript 序列化程序额外的逗号

> ID：11233475
> 
> 赞同：2
> 
> 时间：2012-06-27T19:19:26.370
> 
> 标签：c#

我正在使用 Javascript 序列化程序来解析 JSON 文件。当文件采用有效的 json 格式但失败时，它运行良好，例如最后一个字段中有一个额外的逗号。我怎么能绕过它，我只是从这个文件中检索replicatedid：

```
{
    "Orders": 
    [
       {
            "Rack": "0014",
            "SampleType": "Calibrator",
            "Replicate": 3,
            "Track": 1,
            "Lane": 2,
            "ReagentMasterLot": "06100AA02",
            "ReagentSerialNumber": "60002",
            "Comment": "HTLV Cal T1L2",
        }
   ]      
}

public static KeyValuePair<bool, int> CyclesCompleted(string fileName)
{
    int cyclesCompleted = 0;
    JavaScriptSerializer ser = jss();
    bool isValid = true;
    try
    {
        CategoryTypeColl ctl = ser.Deserialize<CategoryTypeColl>(LoadTextFromFile(fileName));

        if (ctl != null)
        {
            List<CategoryType> collection = (from item in ctl.orders
                                             select item).ToList();

            foreach (var replicates in collection)
            {
                cyclesCompleted = cyclesCompleted + replicates.Replicate;
            }
        }
    }
    catch
    {
        isValid = false;
    }
    return new KeyValuePair<bool, int>(isValid, cyclesCompleted);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:26:16.593

您应该使用[JSON.NET](http://james.newtonking.com/projects/json-net.aspx)。它是一个开源库，用于将 .net 对象序列化和反序列化为 json 字符串，反之亦然。它几乎解决了 .net json 序列化不能解决的这类问题。

```
string json = @"{
  ""Name"": ""Apple"",
  ""Expiry"": new Date(1230422400000),
  ""Price"": 3.99,
  ""Sizes"": [
    ""Small"",
    ""Medium"",
    ""Large""
  ]
}";

JObject o = JObject.Parse(json);

string name = (string)o["Name"];
// Apple

JArray sizes = (JArray)o["Sizes"];

string smallest = (string)sizes[0]; 
```

# math - javascript - 标准化一个数字，使其介于 0 和 1 之间的范围内

> ID：11233482
> 
> 赞同：3
> 
> 时间：2012-06-27T19:20:09.790
> 
> 标签：math, unity3d, range, unityscript, normalize

我有一个实验，我的程序从我的扬声器中拾取音频（以分贝为单位......有点）。范围通常在 0 到 20 之间。我想取该值并将其映射到 0 到 1 之间的范围，以便我可以根据扬声器的音量按比例缩放项目。因此，如果音频为 20 分贝，则刻度为 1。如果音频为 0 分贝，则刻度为 0。我该怎么做？我正在使用 Unity3D，如果这让任何人对辅助功能有所了解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:22:36.423

将它除以 20，如果这确实是最大值。

```
var scale = function(db) {
   return db/20;
} 
```

或者

```
 var scale = function(db) {
     if (db > 0)
         {

         return db/20;

         }
     else if (db < 0)
        {

        return "db is out of range"; # or do something

        }
     else 
        {
      return "something else";

        }

  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T17:11:15.757

如果您不想通过除法统一压缩分布，则可以使用适当的对数或指数。要使用对数，请移动数据以使最小值为 1，然后取对数（任何底数）并使用除法将其缩小。这将赋予较低端的价值更多的权重，并减少更大价值的回报。

使用指数可能更适合分贝，因为它们已经是对数刻度。只需为每个值增加一些常数，然后除以最大的结果。这将与对数缩放相反；大的数字会扩大彼此之间的差距，而较小的数字会更接近。

# ios - 自动引用计数需要 CGPathRelease 吗？

> ID：11233489
> 
> 赞同：2
> 
> 时间：2012-06-27T19:20:53.520
> 
> 标签：ios, automatic-ref-counting

CGPathRelease 是否必须与具有自动引用计数的 CGPathCreate... 函数一起使用？我使用了分析，但无论哪种方式都没有区别。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:00:08.137

据我所知，CF 功能尚未由 ARC 管理。因为你在打电话`create`，所以我建议你也发布一个适当的版本。希望将来一切（包括 CF 调用）都将由 ARC 管理。

# facebook - Facebook“Like Button”链接到错误页面

> ID：11233490
> 
> 赞同：0
> 
> 时间：2012-06-27T19:20:55.577
> 
> 标签：facebook, facebook-like

我知道我在 facebook 上落后了。我正在尝试创建登录后但链接到可公开查看的页面的“喜欢”按钮。问题是大多数时候按钮不是直接链接到页面而是到登录页面。该页面是动态的，所以我不确定这是否是问题的一部分，但有时链接是正确的，有时不是。

下面是两个链接到同一页面，但会显示不同的“喜欢”链接。第二个似乎链接到 www.domain.com 而不是实际页面。

```
<div class="fb-like" data-href="http://www.domain.com/facebook/index.cfm/show_shareRecap/eventGuid_a563d56d-de24-4219-9da7-78a46c4ab43a/" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false" data-font="verdana"></div>
<div class="fb-like" data-href="http://www.domain.com/facebook/index.cfm/show_shareRecap/eventGuid_8d354988-ad44-4608-8d4f-54be7dacdeb9/" data-send="false" data-layout="button_count" data-width="100" data-show-faces="false" data-font="verdana"></div> 
```

我在页面上仅有的其他 FB 脚本是：

```
<div id="fb-root"></div>
<script>(function(d, s, id) { 
var js, fjs = d.getElementsByTagName(s)[0];
if (d.getElementById(id)) return;
js = d.createElement(s); js.id = id;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

如果有人能指出我做错了什么，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T17:21:45.267

您是否有网站的 OG 标签和 Like 按钮对象的 OG 标签？如果是这样，这可能是您的问题。

# ios - iOS：如何创建 3D 倾斜视图

> ID：11233491
> 
> 赞同：0
> 
> 时间：2012-06-27T19:21:07.360
> 
> 标签：ios, uiview, catransform3d

> **可能重复：**
> [如何将透视变换应用于 UIView？](https://stackoverflow.com/questions/347721/how-do-i-apply-a-perspective-transform-to-a-uiview)

嗨，我正在尝试`UIView`像这样倾斜：![在此处输入图像描述](../Images/0bf5716a32c730141a441316116f531b.png)

我想使用`CATransform3DRotate`其他核心功能来做到这一点。可能吗？

到目前为止我所做的：我有一个方法可以创建一个名为 LowerTable 的橙色视图。

```
-(void)createShelf
{
    CGRect parentFrame=parent.frame;
    float width=200;
    float height=200;
    lowerTable=[[UIView alloc] init];
    lowerTable.backgroundColor=[UIColor orangeColor];
    lowerTable.frame=CGRectMake(60, parentFrame.size.height/2, width, height);
    [self setAnchorPoint:CGPointMake(0.5, 0) forLayer:lowerTable.layer];
    [parent addSubview:lowerTable];

} 
```

setAnchorPoint 方法如下：

```
//sets the anchor point of the layer in proper place.
-(void)setAnchorPoint:(CGPoint)anchorPoint forLayer:(CALayer *)layer
{
    CGPoint newPoint = CGPointMake(layer.bounds.size.width * anchorPoint.x, layer.bounds.size.height * anchorPoint.y);
    CGPoint oldPoint = CGPointMake(layer.bounds.size.width * layer.anchorPoint.x, layer.bounds.size.height * layer.anchorPoint.y);

    newPoint = CGPointApplyAffineTransform(newPoint,CATransform3DGetAffineTransform(layer.transform));
    oldPoint = CGPointApplyAffineTransform(oldPoint,CATransform3DGetAffineTransform(layer.transform));

    CGPoint position = layer.position;

    position.x -= oldPoint.x;
    position.x += newPoint.x;

    position.y -= oldPoint.y;
    position.y += newPoint.y;

    layer.position = position;
    layer.anchorPoint = anchorPoint;
} 
```

设置锚点和视图后，我将在点击按钮时调用以下方法以应用变换：

```
-(void)animateLayer:(CALayer *)layer
{
    [UIView animateWithDuration:2 delay:0.0 options:UIViewAnimationOptionAllowAnimatedContent animations:^{
        CATransform3D _3Dt = layer.transform;
        _3Dt = CATransform3DRotate(_3Dt, 30*M_PI/180, 1, 0, 0.0);
        layer.zPosition=2000;
        layer.transform=_3Dt;

    } completion:^(BOOL finished) {
    }];

} 
```

它所做的是简单地降低 的高度`UIView`，这很明显，通过角度变换，视图需要被塑造成我给定的图片。但是我做不到，我尝试了很多方法。请帮助我提供一些示例和清晰的解释。

提前致谢。

# jquery - jQuery手电筒效果

> ID：11233493
> 
> 赞同：0
> 
> 时间：2012-06-27T19:21:10.063
> 
> 标签：jquery, hover, jquery-hover

我正在寻找可以让我创建一种手电筒效果的 jQuery 插件或代码。为了澄清，我希望网站上有一些深色部分，当用光标悬停在上面时，会出现一种褪色的浅色区域，允许用户查看底层图像。就像将手电筒照到黑暗中并移动它一样。如果有人能指出我正确的方向，那就太棒了！谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:51:26.013

我遇到的大多数资源只适用于纯背景上的文本元素。既然你提到你想要对图像的效果，这可能就是你正在寻找的：[http ://www.dynamicdrive.com/forums/showthread.php?t=62822](http://www.dynamicdrive.com/forums/showthread.php?t=62822)

请注意，此插件`<canvas>`在 IE 上确实使用并且表现不佳。

# javascript - JSON.stringify 不带引号的属性？

> ID：11233498
> 
> 赞同：117
> 
> 时间：2012-06-27T19:21:36.847
> 
> 标签：javascript, json

我正在使用使用不正确 JSON 格式的服务（属性周围没有双引号）。所以我需要发送

`{ name: "John Smith" }`代替`{ "name": "John Smith" }`

此格式无法更改，因为这不是我的服务。

任何人都知道字符串化路由来格式化上面的 JavaScript 对象吗？

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-06-27T19:22:32.880

在大多数情况下，这个简单的正则表达式解决方案可以取消引用 JSON 属性名称：

```
const object = { name: 'John Smith' };
const json = JSON.stringify(object);  // {"name":"John Smith"}
console.log(json);
const unquoted = json.replace(/"([^"]+)":/g, '$1:');
console.log(unquoted);  // {name:"John Smith"}
```

极端情况：

```
var json = '{ "name": "J\\":ohn Smith" }'
json.replace(/\\"/g,"\uFFFF");  // U+ FFFF
json = json.replace(/"([^"]+)":/g, '$1:').replace(/\uFFFF/g, '\\\"');
// '{ name: "J\":ohn Smith" }' 
```

特别感谢 Rob W 修复它。

# 限制

在正常情况下，上述正则表达式会起作用，但从数学上讲，用正则表达式描述 JSON 格式是不可能的，这样它就可以在每种情况下都起作用（用正则表达式计算相同数量的花括号是不可能的。）因此，我有创建一个新函数以通过原生函数正式解析 JSON 字符串并重新序列化它来删除引号：

```
function stringify(obj_from_json) {
    if (typeof obj_from_json !== "object" || Array.isArray(obj_from_json)){
        // not an object, stringify using native function
        return JSON.stringify(obj_from_json);
    }
    // Implements recursive object serialization according to JSON spec
    // but without quotes around the keys.
    let props = Object
        .keys(obj_from_json)
        .map(key => `${key}:${stringify(obj_from_json[key])}`)
        .join(",");
    return `{${props}}`;
} 
```

示例：[https ://jsfiddle.net/DerekL/mssybp3k/](https://jsfiddle.net/DerekL/mssybp3k/)

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2013-11-01T23:58:10.767

看起来这是您正在寻找的一个简单的 Object toString 方法。

在 Node.js 中，这是通过使用 util 对象并调用 util.inspect(yourObject) 来解决的。这会给你你想要的一切。点击此链接以获取更多选项，包括方法应用的深度。[http://nodejs.org/api/util.html#util_util_inspect_object_options](http://nodejs.org/api/util.html#util_util_inspect_object_options)

因此，您要寻找的基本上是对象检查器，而不是 JSON 转换器。JSON 格式指定所有属性必须用双引号引起来。因此，不会有 JSON 转换器来执行您想要的操作，因为这根本不是 JSON 格式。此处的规格： [https ://developer.mozilla.org/en-US/docs/Using_native_JSON](https://developer.mozilla.org/en-US/docs/Using_native_JSON)

对象到字符串或检查是您需要的，具体取决于服务器的语言。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2020-12-24T21:02:15.697

## TL;DR——代码

下面有一个关于浏览器中的后向支持的警告，在这里你可以：

```
function cleanIt(obj) {
    var cleaned = JSON.stringify(obj, null, 2);

    return cleaned.replace(/^[\t ]*"[^:\n\r]+(?<!\\)":/gm, function (match) {
        return match.replace(/"/g, "");
    });
} 
```

> **注意：** IE 不支持 Lookbehinds，奇怪的是，截至 2021 年 6 月 18 日的[***任何***版本的 Safari](https://caniuse.com/js-regexp-lookbehind)都不支持 Lookbehinds 。要在那里使用，`(?<!\\)`请从正则表达式中删除并注意下面提到的“陷阱”条件。

它以漂亮的方式进行字符串化，使用我们的正则表达式查找键，然后通过替换函数替换每个键匹配，该替换[函数](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/replace#Using_an_inline_function_that_modifies_the_matched_characters)显示“这是您的匹配项，已删除所有双引号”。由于我们只将键匹配到它们的冒号，这正是我们想要的。

下面详细说明。

* * *

### 为什么接受的答案不正确

不幸的是，正如[Adel 指出的那样，](https://stackoverflow.com/a/55579862/1028230) [Derek 的无正则表达式解决方案](https://stackoverflow.com/a/11233515/1028230)存在一个非常严重的问题。**它不处理对象数组**。您看到它是如何短路并说“如果它是一个数组，让我们`JSON.stringify`处理它”？这对于简单的值类型很好，但不适用于对象。

```
//                                        \/\/\/ OH NOES!!! \/\/\/
if (typeof obj_from_json !== "object" || Array.isArray(obj_from_json)){
    // not an object, stringify using native function

    return JSON.stringify(obj_from_json);
//         ^^^^^^^^^^^^^^ No! Don't do that! 
} 
```

我用一个失败的案例编辑了他的[小提琴](https://jsfiddle.net/r423b5wj/)。这是有效载荷：

```
var obj = {
  name: "John Smith",
  favoriteObjects: [
    { b: "there's", c: "always", d: "something" },
    [1, 2, "spam", { f: "hello" }],
    { vowels: "are missing" },
  ],
  favoriteFruits: ["Apple", "Banana"],
}; 
```

这是空白输出：

```
{
  name:"John Smith",
  favoriteObjects:[
    {
      "b":"there's",    <<< Major
      "c":"always",     <<< fails
      "d":"something"   <<< here
    },
    [
      1,2,"spam",
      {
        "f":"hello"     <<< and here.
      }
    ],
    {
      "vowels":"are missing" <<< again.
    }
  ],
  favoriteFruits:["Apple","Banana"] <<< that worked!
} 
```

看？尽管字符串`favoriteFruits`数组`favoriteObjects`（坏的。

* * *

## 一个简单的解决方案

在想出一个巧妙的技巧来显着降低问题的复杂性之前，我花了太多时间来尝试清理该函数，我认为这会将正则表达式重新融入其中。

## 让我们`stringify`用空格

本着[麦奎尔先生](https://www.youtube.com/watch?v=PSxihhBzCjk)的精神，我只想对你说一句话，就一个字：

空白。

让我们`JSON.stringify`用一些空格。这使得正则表达式从键中删除引号更容易。

以此开始您的解决方案：

```
var cleaned = JSON.stringify(x, null, 2); 
```

调用[`stringify`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/JSON/stringify)说“字符串化`x`（第一个参数）没有花哨的替换函数（由 的第二个参数表示`null`），序列化中的每个深度级别都有两个（第三个参数`2`）空格。” 这`2`也为我们购买了每个属性的单独行。

```
{
  "name": "John Smith",
  "favoriteObjects": [
    {
      "b": "there's",
      "c": "always",
// etc... 
```

**现在，每个键都很好地位于一行的开头。*我们*可以处理的。**

* * *

## *现在*清除键的引号

让我们创建一个正则表达式来查找键，并且只查找键，然后将其周围的`"`. 由于我们知道现在所有键都在自己的线路上，所以事情要简单*得多*。

唯一真正的问题是属性的值是否包含`":`中途。那可能会把事情搞砸。

```
"a": [
    "This could \": be bad",
    "QQ"
] 
```

### 后视警告

我想通过[对旧版浏览器的花哨的负](https://stackoverflow.com/questions/641407/javascript-negative-lookbehind-equivalent#comment112147752_27213663)前瞻来解决这个问题，但放弃了并使用了负后瞻。**Negative lookbehind 仅在 2018 年之后被部分浏览器支持**（此处描述了[2ality 的lookbehind 提案](https://2ality.com/2017/05/regexp-lookbehind-assertions.html)的历史，浏览器兼容性可在[此处找到](https://caniuse.com/js-regexp-lookbehind)）。

* * *

### 正则表达式解释：

```
/^[\t ]*"[^:\n\r]+(?<!\\)":/gm 
```

那个正则表达式...

*   是一个正则表达式
    *   以。。开始`/`
*   查找以（0 到无穷大的空格或制表符）开头的任何行
    *   `^[\t ]*`
*   然后一个`"`
    *   `"`
*   然后是一个或多个*不是**ISN*`:` 's 或换行符的字符
    *   `[^:\n\r]+`
*   然后以两个字符结尾`":`（**负后向警告**）*前面没有反斜杠*
    *   `(?<!\\)":`
    *   [更多关于 JavaScript 的lookbehind here](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Guide/Regular_Expressions/Assertions#Other_assertions)
*   全局和多行（逐行）
    *   `/gm`

* * *

### [合理成功的小提琴](https://jsfiddle.net/r423b5wj/1/)。

结果：

```
{
  name: "John Smith",
  favoriteObjects: [
    {
      b: "there's",
      c: "always",
      d: "something"
    },
    [
      1,
      2,
      "spam",
      {
        f: "hello"
      }
    ],
    {
      vowels: "are missing"
    }
  ],
  favoriteFruits: [
    "Apple",
    "Banana"
  ]
} 
```

在jadent 问之后短短八年半的时间里，QED。现在是服务！

* * *

**快速更新：**如果你不一定需要在代码中发生这种情况（尽管在某些用例中，你也可以直接调用这个库），一个更好的答案可能是使用[prettier](https://prettier.io/)，它可以很好地清理东西。

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-06-27T19:31:15.437

您可以查看^(由定义 JSON 格式的人创建的解析器)的源代码。寻找函数调用：这些用引号包围一个值。[密钥在第326](https://github.com/douglascrockford/JSON-js/blob/master/json2.js#L326)和[338](https://github.com/douglascrockford/JSON-js/blob/master/json2.js#L338)行引用。[`json2.js`](https://github.com/douglascrockford/JSON-js/blob/master/json2.js) ^(`quote`)

修改后不要包含库。取而代之的是只取相关的 ( `stringify`) 部分，或者至少`JSON`用其他东西替换，例如。`FAKEJSON`.

例如，`FAKEJSON`仅定义的对象：http `stringify`: [//jsfiddle.net/PYudw/](http://jsfiddle.net/PYudw/)

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2018-12-31T17:37:57.660

找到了一个很好的 NPM 包来做到这一点：

[https://www.npmjs.com/package/stringify-object](https://www.npmjs.com/package/stringify-object)

```
const stringify = require('stringify-object')

let prettyOutput = stringify(json); 
```

效果很好。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2020-05-04T19:09:10.470

### 利用`JSON5.stringify`

[JSON5](https://json5.org)是 JSON 的超集，它允许 ES5 语法，包括不带*引号*的属性键。JSON5 参考实现（[`json5`npm 包](https://www.npmjs.com/package/json5)）提供了一个`JSON5`对象，该对象具有与内置`JSON`对象相同的方法和相同的参数和语义。

您正在使用的服务很可能正在使用此库。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-06-27T19:33:18.177

尝试将服务与 JSONP 一起使用，我猜他们在使用这种格式时会提供它。

否则，向他们提交一份详细的错误报告，包括一个很好的论证为什么应该符合标准。除了消除源问题之外的任何其他解决方案都不是真正的解决方案。

一个快速n-dirty修复可能是在解析字符串之前通过正则表达式传递字符串：

```
var obj = JSON.parse(str.replace(/(\{|,)\s*(.+?)\s*:/g, '$1 "$2":')); 
```

或者，如果您想要更语法的解析，您可以尝试调整现有的 javascript JSON 解析器（例如[这个）。](https://github.com/douglascrockford/JSON-js)

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2013-08-26T00:58:06.483

你继承的语法应该很容易被 YAML 吃掉，它是 JSON 的超集。

试试 JavaScript YAML 解析器和转储器：http: [//nodeca.github.com/js-yaml/](http://nodeca.github.com/js-yaml/)

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-04-08T18:43:15.483

@Derek朕会功夫感谢分享这个方法，我想分享我的代码，它也支持对对象数组进行字符串化。

```
export const stringifyObjectWithNoQuotesOnKeys = (obj_from_json) => {
    // In case of an array we'll stringify all objects.
    if (Array.isArray(obj_from_json)) {
        return `[${
                    obj_from_json
                        .map(obj => `${stringifyObjectWithNoQuotesOnKeys(obj)}`)
                        .join(",")
                }]` ;
    }
    // not an object, stringify using native function
    if(typeof obj_from_json !== "object" || obj_from_json instanceof Date || obj_from_json === null){
        return JSON.stringify(obj_from_json);
    }
    // Implements recursive object serialization according to JSON spec
    // but without quotes around the keys.
    return `{${
            Object
                .keys(obj_from_json)
                .map(key => `${key}:${stringifyObjectWithNoQuotesOnKeys(obj_from_json[key])}`)
                .join(",")
            }}`;
}; 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-10-06T22:39:53.870

[CSVJSON 的 JSON Beautifier](http://www.csvjson.com/json_beautifier)有一个选项可以在键上去掉引号。如果您只需要代码，可以从 GitHub 存储库复制它。我[修改了 Douglas Crockford 的 JSON2](https://github.com/martindrapeau/csvjson-app/blob/master/js/csvjson/json2-mod.js)来增加对它的支持。

# asp.net-mvc-3 - CKEDITOR.replace(); 不管用

> ID：11233499
> 
> 赞同：0
> 
> 时间：2012-06-27T19:21:38.203
> 
> 标签：asp.net-mvc-3, ckeditor

好吧，我正在使用 VS2010 将 CKeditor 集成到 MVC 3 中。我已经成功地集成了它，但我遇到了自定义工具栏的问题。我在 Scripts/ckeditor 文件夹下有 config.js。我创建了 config.js 的副本并将其放在根目录下（即 testmvc）并将其重命名为“myconfig.js”。现在我的 config.js 看起来像这样：

> CKEDITOR.editorConfig = 功能（配置）{
> 
> // 在此处定义对默认配置的更改。例如：
> 
> // config.language = 'fr';
> 
> // config.uiColor = '#AADC6E';
> 
> CKEDITOR.replace('editor1',
> 
> {
> 
> ```
> customConfig :  'testmvc1/myconfig.js' 
> ```
> 
> });
> 
> };

我的“myconfig.js”看起来像这样：

> CKEDITOR.editorConfig = 函数（配置）
> 
> { // 在此处定义对默认配置的更改。例如：
> 
> // config.language = 'fr';
> 
> // config.uiColor = '#AADC6E';
> 
> config.toolbar = '完整';
> 
> config.toolbar_Full =
> 
> [
> 
> > { name: 'document', items: ['Source', '-', 'Save', 'NewPage', 'DocProps', 'Preview', 'Print', '-', 'Templates'] }, ];
> 
> };

现在我希望默认的 config.js 应该将它重定向到我的自定义“myconfig.js”，以便我可以使用我的自定义工具栏，但是替换命令不起作用。当我启动网站时，它给我一个错误。请给我一些建议，因为我在网上尝试了一切

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T22:21:30.463

为什么会有 config.js 和 myconfig.js？您需要其中一个（可能是后者）。然后在你的 HTML 中添加`<script>`标签：

```
CKEDITOR.replace('editor1', {
    customConfig:  'testmvc1/myconfig.js'
}); 
```

顺便说一句，如果您在控制台上出现错误，请下次附上。我们不是魔术师。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-07T03:18:26.387

加载编辑器的调用需要在带有 textarea 的文件中。在 onload 事件的头部或调用 textarea 之后。

```
<script type="text/javascript">
    CKEDITOR.replace('editor1',
    {
        customConfig :  'testmvc1/myconfig.js'    
    } );
</script> 
```

这是开发人员指南中的页面：[Developers_Guide：集成](http://docs.cksource.com/CKEditor_3.x/Developers_Guide/Integration)

* * *

要在默认配置文件中调用您的自定义配置，请尝试以下操作：

```
config.customConfig = 'testmvc1/myconfig.js'; 
```

* * *

可能的错误原因：

尝试颠倒工具栏配置分配的顺序：

```
config.toolbar_Full =
[
    { name: 'document', items: ['Source', '-', 'Save', 'NewPage', 'DocProps', 'Preview', 'Print', '-', 'Templates'] }
];

config.toolbar = 'Full'; 
```

您需要在分配之前定义工具栏。

* * *

此外，可能导致错误的是右括号和右括号之间的逗号`'Templates'] }, ];`

# python - 熊猫 OLS 中的 R^2 调整值不一致

> ID：11233502
> 
> 赞同：1
> 
> 时间：2012-06-27T19:21:52.430
> 
> 标签：python, pandas

我正在使用`pandas.ols`版本 0.7.3 中的功能。当使用简单回归与窗口回归时，我似乎得到了调整后的 $R^2$ 的不一致值。例如，如果`realizedData`并且`pastData`有 600 个条目，那么

```
model = pandas.ols(y = realizedData, x = pastData, intercept = 0, window = 600) 
```

产生以下输出：-

```
-------------------------Summary of Regression Analysis-------------------------

Formula: Y ~ <1> + <10> + <90000>

Number of Observations:         596
Number of Degrees of Freedom:   3

R-squared:         0.6914
Adj R-squared:     0.6904

Rmse:            699.4880

F-stat (3, 593):   664.3691, p-value:     0.0000

Degrees of Freedom: model 2, resid 593

-----------------------Summary of Estimated Coefficients------------------------
      Variable       Coef    Std Err     t-stat    p-value    CI 2.5%   CI 97.5%
--------------------------------------------------------------------------------
             1     0.4171     0.0428       9.75     0.0000     0.3333     0.5010
            10     0.4362     0.0688       6.34     0.0000     0.3014     0.5709
         90000     0.0623     0.0319       1.95     0.0517    -0.0003     0.1249
---------------------------------End of Summary--------------------------------- 
```

而只是使用

```
model = pandas.ols(y = realizedData, x = pastData, intercept = 0) 
```

给出：-

```
-------------------------Summary of Regression Analysis-------------------------

Formula: Y ~ <1> + <10> + <90000>

Number of Observations:         596
Number of Degrees of Freedom:   3

R-squared:         0.6914
Adj R-squared:     0.3053

Rmse:            699.4880

F-stat (3, 593):     1.7909, p-value:     0.1477

Degrees of Freedom: model 2, resid 593

-----------------------Summary of Estimated Coefficients------------------------
      Variable       Coef    Std Err     t-stat    p-value    CI 2.5%   CI 97.5%
--------------------------------------------------------------------------------
             1     0.4171     0.0428       9.75     0.0000     0.3333     0.5010
            10     0.4362     0.0688       6.34     0.0000     0.3014     0.5709
         90000     0.0623     0.0319       1.95     0.0517    -0.0003     0.1249
---------------------------------End of Summary--------------------------------- 
```

请注意，除了调整后的 $R^2$ 值之外，输出是相同的。

这是一个错误还是我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T23:09:44.640

我认为这与缺乏拦截有关。你能在 GitHub 上报告问题吗？

# javascript - 最佳编码实践 JavaScript

> ID：11233503
> 
> 赞同：2
> 
> 时间：2012-06-27T19:21:55.247
> 
> 标签：javascript, jquery

我正在做一个 JQuery 插件来显示像咆哮这样的消息。管理这些消息已经创建了一个类。因为是插件，所以创建一个全局变量来存储这个类的实例有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T19:28:05.480

有两种解决方案：

*   使类成为闭包范围内的私有/局部变量（标准）：

```
(function($) {
    function MyClass() {...};
    $.fn.myPlugin = function(opts) {
        var instance = new MyClass();
        ...
        return this;
    };
})(jQuery); 
```

*   使用类的 jQuery 命名空间（注意现在每个人都可以实例化它，只有在它应该是公共的时候才这样做）：

```
jQuery.MyPluginClass = function() {...};
jQuery.fn.myPlugin = function(opts) {
    var instance = new jQuery.MyPluginClass();
    ...
    return this;
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T19:26:04.797

全局变量通常是禁忌。看这里：

[http://dev.opera.com/articles/view/javascript-best-practices/#avoidglobals](http://dev.opera.com/articles/view/javascript-best-practices/#avoidglobals)

从本质上讲，它们使命名空间变得混乱，并让您可以在其他地方覆盖全局，因为您的变量最终可能会落入与其他脚本相同的范围内。该网站还提供了一些很好的例子来说明如何处理这个问题。

所以总而言之，最佳实践是不使用全局变量，而是将它们放在自己的命名空间中。希望这会有所帮助，很确定这就是您所要求的/关于的。

# javascript - 如何使用javascript获取实体属性的值？

> ID：11233504
> 
> 赞同：0
> 
> 时间：2012-06-27T19:21:57.580
> 
> 标签：javascript, attributes, entity, field, dynamics-crm-2011

例如，如果我有一个联系人查找字段，并且每个联系人记录都有许多属性，例如 id、姓名、公司等。我如何获取公司属性的值？

提前致谢。

更新：

我现在可以使用 crm 服务提供的检索方法获取值 id ({55FCBC5D-xxxx-xxxx-xxxx-005056A63DAF})，但我还需要值的文本名称。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:00:33.153

联系人查找字段的类型为[`EntityReference`](http://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.entityreference.aspx)。因此，它只包含唯一标识记录所需的基本要素：它`Id`（在本例中为“ContactId”），`LogicalName`（引用所属实体的名称 - 在本例中为“联系人”），以及，如果你很幸运，`Name`（在这种情况下，可能`FullName`）。

因此，要获取有关联系人的任何其他信息，您将不得不`Contact`通过使用`EntityReference`. `Id`. @StackOverflow 和网络上有很多这样的示例 - 请参阅[CRM 2011：Getting entity with Javascript](https://stackoverflow.com/questions/7874562/crm-2011-getting-entity-with-javascript)以了解这里的流行方式。

还有一个名为“ [CRM 2011 Lookup Preview](http://crm2011lookuppreview.codeplex.com/) ”的 CodePlex 项目似乎可以巧妙地预览表单上的此类信息，但这可能/可能不是您要查找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T15:13:01.840

通过使用两个查询（crmService 提供的检索方法）解决了问题。

# java - 相互影响 JComboBoxes

> ID：11233505
> 
> 赞同：0
> 
> 时间：2012-06-27T19:21:57.607
> 
> 标签：java, eclipse, swing, jcombobox, itemlistener

我正在开发一个程序，其中 2 个 JComboBoxes 必须设置彼此的选定项。让我们将它们的对象名称称为wheelTypeCombo 和carBrandCombo。他们的两个模型都包含从数据库中检索到的对象列表（第一个列表中的类型为 1 的对象，第二个列表中的类型为 2 的对象）以及相应类型的特殊 wheelTypeShowAll 和 carBrandShowAll。When either of the last 2 items are selected then all the containing items in both JComboBoxes are shown including themselves(the 2 special items).

JComboBoxes倒数关系的规则如下：

1.  当我们从wheelTypeCombo 中选择一个项目时，carBrandCombo 会重新加载所有使用该类型轮胎的汽车品牌和 carBrandShowAll 项目
2.  当从 carBrandCombo 的第一种情况状态中选择 carBrandShowAll 项目时，carBrandCombo 会重新加载数据库中的所有相应项目，而且 WheelsTypeCombo 具有选定的项目 wheelTypeShowAll 。
3.  当我们从 carBrandCombo 中选择一个项目时，然后在 wheelTypeCombo 中选择相应的车轮类型项目
4.  如果选择了已经处于对应关系中的项目，则任何一个 JComboBoxes 都不需要 setSelectedItem 操作

暂时我尝试使用匿名 ItemListener 类，当我将 JComboBoxes 添加到接口时，但发现自己与堆栈和空指针异常溢出作斗争可能是由内部调用方法调用引起的。

我将不胜感激任何级别的任何合理改进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:59:21.893

如果我要这样做，我将创建两个自定义类 carBrand 和 WheelType，然后让它们中的每一个实现一个 getUsers 调用，该调用返回它们自己的相关项目的内部列表：

```
public carBrand
    public static Enum allWheels
    List<wheelsType> myWheels;
    getWheels() {
        return myWheels;
    }
    setWheels();

public wheelsType
    public static Enum allBrands
    List<carBrands> myBrands;
    getBrands();
    setBrands(); 
```

然后在您的组合框代码中，保存您的车轮和品牌列表，然后使用以下结果更新 Listmodel

```
getSelected().getBrands() 
```

或者

```
getSelected().getWheels(). 
```

然后，您还可以在他们选择“全部”选项时对 getAllBrands() 或其他任何内容进行静态调用。

可能有“更简单”的方法，例如为每个方法制作地图，但我认为这将是最“清晰”的方法。

# java - 如何获取显示下的元素：使用 htmlunit 的无 div

> ID：11233507
> 
> 赞同：1
> 
> 时间：2012-06-27T19:22:10.813
> 
> 标签：java, xpath, htmlunit

使用 HtmlUnit，我应该如何抓取隐藏 div 下的元素（样式 =“显示：无”）？

在这种情况下，我试图获取表中显示的字段的值。第一个单元格是字段名称，第二个单元格是值。我正在使用“for”属性来查找关联的值。

**HTML：**

```
<div style="display: none;" id="tab-doc-div">
<div class="tab-container" align="center">
    <table class="datatable">
        <tbody>
            <tr>
                <th rowspan="1" colspan="1">
                    &nbsp;<label for="doc.change.stat">
                    <font color="">*&nbsp;</font>Action</label>
                </th>
                <td colspan="2">
                    Data Change (DTA)
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

**我正在使用的 Java/HtmlUnit 代码：**

```
public static String getTextForProperty(HtmlPage page, String property) throws Exception {
    List<HtmlLabel> labels = (List<HtmlLabel>)page.getByXPath("//label[@for='" + property + "']");

    if (labels.isEmpty()) {
        return null;
    } else {
        return labels.get(0).getParentNode().getNextSibling().asText();
    }
}
String myValue = getTextForProperty(myPageObject, "doc.change.stat"); //returns null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:46:47.553

我会使用 getAttribute(String attributeName) [http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/html/DomElement.html#getAttribute(java.lang.String](http://htmlunit.sourceforge.net/apidocs/com/gargoylesoftware/htmlunit/html/DomElement.html#getAttribute(java.lang.String) )

例子 ：

```
for (HtmlLabel label : labels) {
if (!label.getAttribute("for").isEmpty()) {
myValue = label.getAttribute("for");
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:19:03.813

鉴于您的示例 HTML 文件和您对另一个答案的评论：

> 在我的示例中，我想获得“数据更改（DTA）”作为结果

这就是你所需要的：

```
HtmlTableCell td = page.<HtmlTableCell>
                     getFirstByXPath("//label[@for='doc.change.stat']/../../td");
System.out.println(td.getTextContent().trim()); 
```

# c# - 如何以快速安全的方式从应用程序代码中检查本地数据库实例的存在？

> ID：11233508
> 
> 赞同：0
> 
> 时间：2012-06-27T19:22:12.880
> 
> 标签：c#, ado.net, sqlconnection

有什么方法可以查出是否，

*   有一个本地运行的 SQL Server 实例
*   如果是，数据库 X 是否存在？
*   如果是这样，可以使用集成安全性连接数据库 X 吗？

我想以最干净的方式在应用程序启动时完成上述操作。具体来说，我担心会在各种开发工具的连接向导中单击下拉菜单以浏览数据库时经常看到的那种延迟。

我可以假设实例名称是`.`or `.\sqlexpress`。

最终用户大多运行 Windows XP。

实际情况是我想让我的应用程序自动感知开发人员可以安装的本地数据库。

如果它像使用连接字符串中的适当值创建 SqlConnection 一样简单，这是安全且推荐的方式，那么我对此很满意。我问这个是因为我试图确保不会引入糟糕的最终用户体验。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:27:04.967

如果您知道查看`.`或`.\sqlexpress`只是尝试连接 a`try-catch`并执行 select from `master.sysdatabases`。

如果您不知道服务器，那么您可以使用[SQL Server 管理对象](http://msdn.microsoft.com/en-us/library/ms162169.aspx)库来列出所有可发现的实例/数据库。这个问题详细说明了如何：

[如何在 C# 中使用 SMO 列出可用的 SQL Server 实例？](https://stackoverflow.com/questions/1130580/how-to-list-available-instances-of-sql-servers-using-smo-in-c)

然后，SMO`Server`类具有[`Databases`](http://msdn.microsoft.com/en-us/library/microsoft.sqlserver.management.smo.server.databases)要迭代的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:28:12.127

连接到`(local)`服务器。如果好，则切换到`master`数据库。然后运行这个 SQL 语句：

```
SELECT * FROM sysdatabases WHERE name = 'YOUR DB NAME HERE' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:56:59.090

使用属性 SqlConnection.ConnectionString 并设置连接超时的值。默认值是 15 秒，这是一个很长的时间。因此，如果您按照 Adam 的想法枚举所有 DB 服务器，并减少超时值，那么用户体验可能不会那么糟糕。

更多细节在[SqlConnection Class](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlconnection.connectionstring.aspx)。

我不想进行 SQL 查询，因为这可能需要很长时间才能失败。

@Aaron，让我们知道您的决定。

# xslt - 为每个第 n 个元素在 div 中包装一个 for-each

> ID：11233509
> 
> 赞同：0
> 
> 时间：2012-06-27T19:22:13.580
> 
> 标签：xslt

我无法弄清楚如何将 for-each 的内容包装在 div 中，其中每个 div 包含 4 个元素。

下面，您会发现我的 XSLT 的简化版本：

```
 <xsl:template match="/">
        <div class="container"><!-- have to be repeated for every 4 elements from the for-each -->
          <xsl:for-each select="$currentPage/GalleriListe/descendant::* [@isDoc] [not(self::GalleriListe)]">
              <div>...</div>
          </xsl:for-each>
        </div>
  </xsl:template> 
```

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:38:23.423

您没有发布您的 XML，因此我使用了简化的 XML 来回答这个问题。这有点hacky，可能有更优雅的方式。您可以在[此 XMLPlayground 会话中对其进行测试](http://www.xmlplayground.com/118oIS)

```
<!-- declare how many items per container -->
<xsl:variable name='num_per_div' select='4' />

<!-- root - kick things off -->
<xsl:template match="/">
    <xsl:apply-templates select='root/node' mode='container' />
</xsl:template>

<!-- iteration content - containers -->
<xsl:template match='node' mode='container'>
    <xsl:if test='position() = 1 or not((position()-1) mod $num_per_div)'>
        <div>
            <xsl:variable name='pos' select='position()' />
            <xsl:apply-templates select='. | following-sibling::*[count(preceding-sibling::node) &lt; $pos+(number($num_per_div)-1)]' />
        </div>
    </xsl:if>
</xsl:template>

<!-- iteration content - individual items -->
<xsl:template match='node'>
    <p><xsl:value-of select='.' /></p>
</xsl:template> 
```

# c++ - 需要一个支持 16 位整数 (c++) 的免费线程安全矩阵数学库

> ID：11233511
> 
> 赞同：0
> 
> 时间：2012-06-27T19:22:25.827
> 
> 标签：c++, matrix, 16-bit, thread-safety

我需要 std 库的矩阵函数的替代方法，最好是快速且非常便携的。它需要是线程安全的，能够进行矩阵乘法之类的操作，并且需要支持 16 位整数。我查看了“基本线性代数子程序”维基百科页面，找不到我需要的东西。谷歌也没有多大帮助。我遇到了一些像 Eigen 和 dlib 这样的热门歌曲，但没有什么能完全符合我的需求。有谁知道对我来说有一个好的替代图书馆？

先感谢您！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:35:15.133

我不确定这样的事情是否存在，因为在不知道使用模式的情况下使其线程安全会使其不太并行。这是您唯一可以对矩阵库做的使其线程安全的事情就是在使用它时锁定整个库 - 本质上使其不并行。

编写或找到您自己的互斥锁类，然后使用互斥锁保护您的矩阵数学运算。

这是从基本矩阵类派生以添加互斥锁，然后在对任何矩阵对象进行操作之前锁定其互斥锁。如果对您的使用模式有一点了解，您可以使这种方式比在库中发生锁定时更并行。

# asp.net - 添加 IIS 模块后 ASP Classic Request.Form 为空

> ID：11233512
> 
> 赞同：3
> 
> 时间：2012-06-27T19:22:28.090
> 
> 标签：asp.net, asp.net-mvc-3, asp-classic, iis-7.5

这真让我抓狂。我有一个混合了 ASP.NET MVC 3 和 Classic ASP 的 Web 应用程序。经典的 ASP 代码非常陈旧，在防止跨站点脚本或任何其他漏洞方面并没有起到多大作用。为了给 Classic ASP 页面增加一点安全性，我创建了一个 IIS 模块，该模块将在 HTTP 请求被 Classic ASP 处理之前拦截它并触发请求的 ASP.NET 验证。这里是：

```
public class RequestValidationModule : IHttpModule
{
    public void Dispose()
    {

    }

    public void Init(HttpApplication context)
    {
        context.PreRequestHandlerExecute += new EventHandler(context_PreRequestHandlerExecute);
    }

    void context_PreRequestHandlerExecute(object sender, EventArgs e)
    {
        var context = HttpContext.Current;
        if (context != null)
        {
            var request = context.Request;
            if (request != null)
            {
                string path = request.CurrentExecutionFilePathExtension;
                if(string.Equals(path, ".asp", StringComparison.OrdinalIgnoreCase))
                {
                    //access request collections to trigger request validation
                    var form = request.Form;
                    var qs = request.QueryString;
                    var c = request.Cookies;
                    var h = request.Headers;
                }
            }
        }
    }
} 
```

这个模块工作得很漂亮。但是，如果发送了一个有效的请求，那么经典 ASP 代码中的对象**Request.Form**始终为空！我无法获取表单（或查询字符串）中提交的任何值。一旦我从 web.config 中删除模块，request.form 就会再次填充。

这是一个在 IIS 7.5 集成模式下运行的 ASP.NET MVC 3 应用程序。所有的 asp 页面都在 MVC 3 应用程序内的一个目录中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-06-28T02:06:02.633

我也遇到过这个问题。对于 Classic ASP，它应该放在另一个应用程序池中。否则，Request.form 不起作用

# python - 以特定格式编写和阅读字典（Python）

> ID：11233514
> 
> 赞同：1
> 
> 时间：2012-06-27T19:22:30.120
> 
> 标签：python, file, loops, dictionary

对不起另一个新手查询：| 根据此处给出的建议， [优化](https://stackoverflow.com/questions/11221573/how-to-optimize-the-memory-and-time-usage-of-the-following-algorithm-in-python "优化")

我需要能够逐步构建字典，即一个键：在 for 循环内一次取值。具体来说，字典看起来像（N 个键，每个值是一个列表列表。较小的内部列表有 3 个元素）：

```
dic_score ={key1:[ [,,], [,,], [,,] ...[,,] ], key2:[ [,,], [,,], [,,] ..[,,] ] ..keyN:[[,,], [,,], [,,] ..[,,]]} 
```

此 dic 是从以下范例生成的，即嵌套的 for 循环。

```
for Gnodes in G.nodes()       # Gnodes iterates over 10000 values 
    Gvalue = someoperation(Gnodes)
    for Hnodes in H.nodes()   # Hnodes iterates over 10000 values 
        Hvalue =someoperation(Hnodes)
        score = SomeOperation on (Gvalue,Hvalue)
        dic_score.setdefault(Gnodes,[]).append([Hnodes, score, -1 ]) 
```

然后我需要对这些列表进行排序，但这里给出了答案， [优化](https://stackoverflow.com/questions/11221573/how-to-optimize-the-memory-and-time-usage-of-the-following-algorithm-in-python "优化")（使用生成器表达式代替内部循环是一个选项）
[注意，dic 将包含 10000 个键，每个键与 10000 个元素相关联较小的列表]

由于循环计数器很大，生成的字典很大，我的内存不足。

我如何在生成文件后立即将**写入**键：值（列表列表）写入文件，这样我就不需要将整个字典保存在内存中。然后我希望能够以相同的格式**读**回字典，例如 dic_score_after_reading[key]，返回我正在寻找的列表列表。

我希望按键进行写入和读取：值将大大减轻内存需求。有没有更好的数据结构来做到这一点？我是否应该考虑一个可能像 Buzhug 这样的数据库，它可以让我灵活地访问和迭代与每个键关联的列表？

我目前正在使用**cPickle**转储整个字典，然后通过 load() 将其读回，但是 cPickle 在一次转储如此大的数据时崩溃。

抱歉，但我不知道做这类事情的最佳实践。谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:26:12.453

您可以考虑将[ZODB](http://www.zodb.org/)与包含的[`BTrees`](http://www.zodb.org/documentation/guide/modules.html#btrees-package)实现结合使用。

给出的是一个类似映射的结构，它将单独的条目分别写入对象存储。您需要使用[保存点](http://www.zodb.org/documentation/guide/transactions.html#subtransactions)或普通[事务](http://www.zodb.org/documentation/guide/transactions.html#transactions-and-versioning)将数据刷新到存储中，但您可以通过这种方式处理大量数据。

# asp.net - 我可以使用根 web.config 对某些目录进行全局重定向吗？

> ID：11233518
> 
> 赞同：2
> 
> 时间：2012-06-27T19:22:52.210
> 
> 标签：asp.net, redirect, iis-7, web, iis-7.5

我正在尝试使用根 IIS 7.5 web.config 来重定向某些 URL。

例如，我想要实现的一个完美示例是重定向到 WebMail。

因此，如果有人浏览到[http://www.clientwebsite1.com/webmail](http://www.clientwebsite1.com/webmail)，他们将被重定向到[http://www.ownerwebsite.com/webmail](http://www.ownerwebsite.com/webmail)。

我目前有这个：

```
<location allowOverride="true">
  <system.webServer>
    <rewrite>
      <rules>
        <rule name="MEWebMail">
          <match url="^webmail/([^/]*)$" />
          <action type="Redirect" url="http://www.ownerwebsite.com/MEWebMail/" />
        </rule>
      </rules>
    </rewrite>
  </system.webServer>
</location> 
```

虽然到目前为止它似乎不起作用，但有什么想法或者我什至可以这样做吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:57:19.673

是的，您可以添加匹配的规则并为 HTTP_HOST URL 部分添加条件。我相信以下重写规则应该适用于您的情况。

```
<rewrite>
    <rules>
        <rule name="MEWebMail" stopProcessing="true">
            <match url="^webmail/([^/]*)$" />
            <conditions>
                <add input="{HTTP_HOST}" pattern="^www\.clientwebsite1\.com$" />
            </conditions>
            <action type="Redirect" url="http://www.ownerwebsite.com/MEWebMail/" redirectType="Permanent" />
        </rule>
    </rules>
</rewrite> 
```

有关详细信息，请参阅以下重写配置 learn.iis.com 文章。

[从重写规则访问 URL 部分](http://learn.iis.net/page.aspx/465/url-rewrite-module-configuration-reference/#Accessing_URL_Parts_from_a_Rewrite_Rule)

[规则条件](http://learn.iis.net/page.aspx/465/url-rewrite-module-configuration-reference/#Rule_conditions)

# ruby-on-rails - 在 Rails 中制作条件 link_to 语句？

> ID：11233532
> 
> 赞同：6
> 
> 时间：2012-06-27T19:23:46.543
> 
> 标签：ruby-on-rails, link-to

在下面的代码中，我试图做到这一点，如果用户接受了邀请，他们将能够点击“不参加”的 div 来拒绝邀请。

这一点逻辑工作正常，但我试图得到它，所以无论用户是否接受了邀请，“不参加”的 div 都会出现。

现在，只有当用户接受了邀请时，div 才会出现。

有没有办法使 link_to 语句有条件，但无论如何都保留 div？（也就是说，让 div 始终存在，但如果用户接受了邀请，它只是一个链接？）

```
<% if invite.accepted %>
    <%= link_to(:controller => "invites", :action => "not_attending") do %>                             
        <div class="not_attending_div">
             not attending
        </div>
    <% end %>
<% end %> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T19:26:01.300

```
<%= link_to_if invite.accepted ... %> 
```

[http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to_if](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to_if)

**编辑：**

`link_to_if`uses `link_to_unless`which uses`link_to`的代码，它应该与相同的选项工作相同

```
 def link_to_unless(condition, name, options = {}, html_options = {}, &block)
    if condition
      if block_given?
        block.arity <= 1 ? capture(name, &block) : capture(name, options, html_options, &block)
      else
        name
      end
    else
      link_to(name, options, html_options)
    end
  end 
```

例子

```
<%=
   link_to_if(@current_user.nil?, "Login", { :controller => "sessions", :action => "new" }) do
     link_to(@current_user.login, { :controller => "accounts", :action => "show", :id => @current_user })
   end
%> 
```

在这里查看[http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to_unless](http://apidock.com/rails/ActionView/Helpers/UrlHelper/link_to_unless)

**编辑：**

这是否达到了你所需要的。对不起，没有更好地阅读这个问题。

```
<div class="not_attending_div">
   <%= link_to_if invite.accepted, "not attending", (:controller => "invites", :action => "not_attending") %>
</div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-11T11:19:19.107

刚刚在这里回答：[如何仅在满足条件时才使用块创建 link_to_if？](https://stackoverflow.com/questions/48868207/how-to-create-a-link-to-if-with-block-only-if-condition-is-met/66581460#66581460)

如果您仍然想显示该块，但仅在满足特定条件时才添加链接，您可以完全捕获该块并在简单的条件下使用它：

```
<% block_content = capture do %>
  <div class="not_attending_div">
    not attending
  </div>
<% end %>

<% if invite.accepted %>
  <%= link_to block_content, controller: :invites, action: :not_attending %>
<% else %>
  <%= block_content %>
<% end %> 
```

# asp.net - web.config 文件何时“执行”？

> ID：11233540
> 
> 赞同：5
> 
> 时间：2012-06-27T19:24:45.437
> 
> 标签：asp.net, web-config

每次加载网站上的页面时，它是否被服务器执行/读取？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T19:28:28.700

web.config 在创建应用程序时加载到内存中。这通常是对应用程序中页面/资源的第一个请求。IIS (ASP.NET) 监视 web.config 的更改，并在进行更改时重新启动您的应用程序。

如果您的问题实际上是“文件更改时 web.config 设置会自动更新吗？” 答案是肯定的，但是您的应用程序将重新启动，这可能导致意外行为，包括会话和数据丢失。

上述某些陈述并不总是正确的，我建议阅读以下内容：http: [//msdn.microsoft.com/en-us/library/ms178685.aspx](http://msdn.microsoft.com/en-us/library/ms178685.aspx)

# android - 使用实时摄像头的 AR 手游

> ID：11233541
> 
> 赞同：-5
> 
> 时间：2012-06-27T19:24:49.773
> 
> 标签：android, ios, html, sdk, augmented-reality

我想开始开发像这样的游戏：

1.  蚊子 AR 游戏： http: [//www.makayama.com/mosquitoes.html](http://www.makayama.com/mosquitoes.html)
2.  DriodShooting：[http ://www.youtube.com/watch?v=kU9qsUJWzgI](http://www.youtube.com/watch?v=kU9qsUJWzgI)

该应用程序使用相机和雷达来发现对象并使用触摸击中它 什么是执行针对 android 和 ios 的类似游戏的最佳 SDK 或平台或编程模型

非常感谢您的帮助和建议

提前感谢大家

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:12:40.810

我同意 Ivan 的观点，即这个问题太宽泛，无法在这里处理。但无论如何，以下是 Android 平台需要考虑的一些事项：

如果您想使用 3D 图形 (OpenGL)，那么您可能会遇到瓶颈，因为目前您无法在同一屏幕上同时拥有实时相机预览和 OpenGL 表面视图。问题是所谓的 SurfaceView（用于 OpenGL 渲染和相机实时预览）并非设计为相互叠加。因此，当涉及到显示顺序（在视频预览*后面*渲染的 3D 图形）时，您可以获得意想不到的结果。

这个问题有两种解决方案：

1.  您不使用 3D 图形，而是在相机预览上渲染 2D 对象

2.  您确实使用 3D 图形，但您必须捕获相机预览，将 YUV 编码数据转换为 RGB（这在某些设备上会出现问题，因为编码的一些非标准兼容自定义）并将该数据加载到 OpenGL 纹理中以显示在一个矩形图元上。这种方法的问题是：由于额外的处理开销而缺乏速度，并且由于与 OpenGL 相关的限制，您很可能需要按比例缩小相机预览纹理。

此外，您需要熟悉[捕获运动传感器数据](http://developer.android.com/guide/topics/sensors/sensors_motion.html)以计算可用于转换覆盖图形/虚拟对象的设备旋转矩阵。

如果您的 AR 应用程序应该与捕获的实时视频流“交互”，您就会遇到下一个瓶颈问题。这完全取决于您要实现的目标。你想识别人脸、某些形状、条形码等...无论要求是什么，Java 实现可能太慢，你需要求助于使用 NDK 编写 C 代码（你没有使用不同手机的经验在图像处理方面获得更快的速度）。这就是您需要涵盖的下一个主题。您还需要熟悉图像处理。但首先：创建一个规范。你需要知道你的 AR 应用真正需要什么。

一些现代 AR 应用程序还诉诸将捕获的视频数据实时流式传输到具有更多处理能力的服务器，可用于形状/图像识别。

您可以阅读有关该主题的[硕士论文](http://www.vision.ee.ethz.ch/teaching/sada/sadalink/reports/biwi_00339.pdf)以获取更多信息。

所以底线是 AR 应用程序可以成为真正雄心勃勃的项目，涉及大量不同的技术和学科。

# c# - 先调用派生类中的静态构造函数，然后调用基类

> ID：11233544
> 
> 赞同：7
> 
> 时间：2012-06-27T19:25:01.627
> 
> 标签：c#, .net

我想知道，通常在 C# 中，构造函数的概念是，基类 cons 应该首先执行，但为什么我看到派生类静态构造函数被调用，然后是基类 cons。有人可以解释一下吗？:(

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T19:31:50.347

静态构造函数初始化*类本身*，也就是说，必须在访问任何其他静态成员之前以及在创建类的任何实例之前调用它们。

至于在类层次结构中调用静态构造函数的顺序，您应该考虑未定义。从[静态构造函数的 MSDN 页面](http://msdn.microsoft.com/en-us/library/k9x6w0hc.aspx)：

> 用户无法控制何时在程序中执行静态构造函数。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T19:32:08.493

好吧，这就是静态构造函数的全部意义所在；它与继承无关。

引用[MSDN](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)

> 在创建第一个实例或引用任何静态成员之前，会自动调用静态构造函数来初始化类。

您可以声明它们的主体，但不必担心何时调用它们（框架在这方面也没有给您任何保证，除非它*会*在创建手头的任何类实例之前运行）。

**编辑**

哦，还有一些你应该注意的事情，它与泛型有关，尽管它可能很明显。

考虑这个片段：

```
class Foo<T> {
    static Foo() {
        Console.WriteLine("Danger, Will Robinson!");
    }
} 
```

在这里，静态构造函数将被执行`T`，因为：

```
typeof(Foo<Bar>) != typeof(Foo<Baz>) 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2014-02-02T17:52:04.793

Derived 类的静态构造函数首先被调用，因为它是在 Base 类之前加载的。当类加载到内存中时调用构造函数。

# .htaccess - 网络解决方案主机上的 URL 重定向

> ID：11233546
> 
> 赞同：0
> 
> 时间：2012-06-27T19:25:06.373
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

我正在尝试解决没有 .php 扩展名的 PHP 页面请求。我实际上更喜欢没有文件扩展名的 URL，但这不是现在最大的问题。问题是当前配置破坏了外部链接：

www.[domainname].com/abc/forms 返回自定义 404 页面。

www.[domainname].com/abc/forms.php 正确完成。

www.[domainname].com/service 解析为 www.[domainname].com。

对 www.[domainname].com/abc 的请求会解析为正确的 index.php，并且不会将 URL 重写为 www.[domainname].com/abc/index.php。

目录结构大致是这样的：

*   [域名]
    *   索引.php
    *   美国广播公司
        *   索引.php
        *   表格.php
        *   其他.php
    *   定义
        *   索引.php
        *   废话.php

这是我的 htaccess 文件。第二个块应该接受对一个文件的任何请求，如果它是一个 .php 文件，它将是一个有效文件，并附加“.php”扩展名。它不这样做。第三个块是我尝试强制请求 forms.php 页面来解决最常见的错误。这不起作用，但以下行确实起作用（如上所述）。最后，自定义 404 页面正在起作用。

```
Options -Indexes
Options +FollowSymlinks
RewriteEngine on
RewriteCond %{HTTP_HOST} ^[domainname].com [NC]
RewriteRule ^(.*)$ http://www.[domainname].com/$1 [L,R=301]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME}\.php -f
RewriteRule ^(.*)$ $1.php

RewriteRule ^abc/forms$ /abc/forms.php [L,R=301]

RewriteRule ^service(.*)$ / [L,R=301]
ErrorDocument 404 /404.php 
```

我在这里错过了什么吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T16:37:21.420

我认为这`RewriteBase`是必要的，如下所示：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase / 
```

# c# - 使用 Microsoft Kinect SDK 幻灯片示例的网格中的多个图像

> ID：11233548
> 
> 赞同：0
> 
> 时间：2012-06-27T19:25:18.323
> 
> 标签：c#, image-processing, sdk, grid

我正在尝试使用 Microsoft Kinect SDK SlideShow 示例作为新项目的基础，在该项目中，我可以在网格中显示 8 个图像，这些图像可以使用 Storyboard 进行动画处理。但是，当我运行应用程序时，没有图像显示。我意识到考虑到每个图像的绑定，所有图像现在都将是相同的，但我无法显示任何图像。我得到的只是一个显示网格线的空白屏幕（用于调试）。我可以使用手势在面板中从一组 8 张图像轻弹到另一张，但没有图像显示。

你能帮我看看我做错了什么吗？

```
<Window x:Name="window" x:Class="Microsoft.Samples.Kinect.Slideshow.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="Slide Show" Height="735" Width="800" >
<Window.Resources>
    <SolidColorBrush x:Key="MediumGreyBrush" Color="#ff6e6e6e"/>
    <BooleanToVisibilityConverter x:Key="BooleanToVisibilityConverter"/>
    <Storyboard x:Key="LeftAnimate">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="previous">
            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="next">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="current">
            <EasingThicknessKeyFrame KeyTime="0" Value="2000,0,-2000,0"/>
            <EasingThicknessKeyFrame KeyTime="0:0:0.5" Value="0"/>
        </ThicknessAnimationUsingKeyFrames>
    </Storyboard>
    <Storyboard x:Key="RightAnimate">
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="previous">
            <EasingDoubleKeyFrame KeyTime="0" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <DoubleAnimationUsingKeyFrames Storyboard.TargetProperty="(UIElement.Opacity)" Storyboard.TargetName="next">
            <EasingDoubleKeyFrame KeyTime="0" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.4" Value="1"/>
            <EasingDoubleKeyFrame KeyTime="0:0:0.5" Value="0"/>
        </DoubleAnimationUsingKeyFrames>
        <ThicknessAnimationUsingKeyFrames Storyboard.TargetProperty="(FrameworkElement.Margin)" Storyboard.TargetName="current">
            <EasingThicknessKeyFrame KeyTime="0" Value="-2000,0,2000,0"/>
            <EasingThicknessKeyFrame KeyTime="0:0:0.5" Value="0"/>
        </ThicknessAnimationUsingKeyFrames>
    </Storyboard>
</Window.Resources>
<Grid DataContext="{Binding ElementName=window}" Margin="10 0 10 0">
    <Grid.RowDefinitions>
        <RowDefinition />
    </Grid.RowDefinitions>
    <Grid.ColumnDefinitions>
        <ColumnDefinition />
    </Grid.ColumnDefinitions>
    <Grid>

        <Grid x:Name="next" ShowGridLines="True">
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <!-- Change the binding to the correct picture or video -->
            <Image Grid.Column="0" Grid.Row="0" Source="{Binding NextPicture}" Opacity="0"/>
            <Image Grid.Column="1" Grid.Row="0" Source="{Binding NextPicture}" Opacity="0"/>
            <Image Grid.Column="2" Grid.Row="0" Source="{Binding NextPicture}" Opacity="0"/>
            <Image Grid.Column="3" Grid.Row="0" Source="{Binding NextPicture}" Opacity="0"/>
            <Image Grid.Column="0" Grid.Row="1" Source="{Binding NextPicture}" Opacity="0"/>
            <Image Grid.Column="1" Grid.Row="1" Source="{Binding NextPicture}" Opacity="0"/>
            <Image Grid.Column="2" Grid.Row="1" Source="{Binding NextPicture}" Opacity="0"/>
            <Image Grid.Column="3" Grid.Row="1" Source="{Binding NextPicture}" Opacity="0"/> 
```

```
 <Grid x:Name="previous" ShowGridLines="True">
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <!-- Change the binding to the correct picture or video -->
            <Image Grid.Column="0" Grid.Row="0" Source="{Binding PreviousPicture}" Opacity="0"/>
            <Image Grid.Column="1" Grid.Row="0" Source="{Binding PreviousPicture}" Opacity="0"/>
            <Image Grid.Column="2" Grid.Row="0" Source="{Binding PreviousPicture}" Opacity="0"/>
            <Image Grid.Column="3" Grid.Row="0" Source="{Binding PreviousPicture}" Opacity="0"/>
            <Image Grid.Column="0" Grid.Row="1" Source="{Binding PreviousPicture}" Opacity="0"/>
            <Image Grid.Column="1" Grid.Row="1" Source="{Binding PreviousPicture}" Opacity="0"/>
            <Image Grid.Column="2" Grid.Row="1" Source="{Binding PreviousPicture}" Opacity="0"/>
            <Image Grid.Column="3" Grid.Row="1" Source="{Binding PreviousPicture}" Opacity="0"/> 
```

```
 <Grid x:Name="current" ShowGridLines="True">
            <Grid.RowDefinitions>
                <RowDefinition />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>
            <!-- Change the binding to the correct picture or video -->
            <Image Grid.Column="0" Grid.Row="0" Source="{Binding Picture}" Opacity="0"/>
            <Image Grid.Column="1" Grid.Row="0" Source="{Binding Picture}" Opacity="0"/>
            <Image Grid.Column="2" Grid.Row="0" Source="{Binding Picture}" Opacity="0"/>
            <Image Grid.Column="3" Grid.Row="0" Source="{Binding Picture}" Opacity="0"/>
            <Image Grid.Column="0" Grid.Row="1" Source="{Binding Picture}" Opacity="0"/>
            <Image Grid.Column="1" Grid.Row="1" Source="{Binding Picture}" Opacity="0"/>
            <Image Grid.Column="2" Grid.Row="1" Source="{Binding Picture}" Opacity="0"/>
            <Image Grid.Column="3" Grid.Row="1" Source="{Binding Picture}" Opacity="0"/> 
```

```
 </Grid>

</Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T15:33:22.523

经过大量研究，我发现制作这组图像的最佳方法是使用 StackPanel 和常规 Storyboard。对 Stackpanel 的附加属性进行动画处理比为 Grid 设置动画要容易得多。

[有关附加属性的更多信息](http://msdn.microsoft.com/en-us/library/ms749011.aspx)

[这个页面](https://stackoverflow.com/questions/1083449/wpf-credits-effect-problem-storyboard-to-animate-a-stackpanel-that-extends-the)真的帮助我完成了我想要的。MSDN 上的 system.windows.uielement 页面帮助我了解可以更改哪些属性来操作 Stackpanel。

我的代码现在可以工作了。我希望这有帮助。

这是我的 XAML：

```
<Window.Resources>
    <Storyboard x:Key="SwipeRight">
        <DoubleAnimationUsingKeyFrames 
                    BeginTime="00:00:00" 
                    Storyboard.TargetName="StackPanel1"
                    Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)">
            <SplineDoubleKeyFrame KeyTime="00:00:02" Value="-800"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>

    <Storyboard x:Key="SwipeLeft">
        <DoubleAnimationUsingKeyFrames 
                    BeginTime="00:00:00" 
                    Storyboard.TargetName="StackPanel1"
                    Storyboard.TargetProperty="(UIElement.RenderTransform).(TransformGroup.Children)[3].(TranslateTransform.X)">
            <SplineDoubleKeyFrame KeyTime="00:00:02" Value="+400"/>
        </DoubleAnimationUsingKeyFrames>
    </Storyboard>

</Window.Resources>

<Grid x:Name="LayoutRoot">
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="1024" />
    </Grid.ColumnDefinitions>
    <StackPanel   Name="StackPanel1" Margin="0,0,0,0" RenderTransformOrigin="0.5,0.5">
        <StackPanel.RenderTransform>
            <TransformGroup>
                <ScaleTransform ScaleX="1" ScaleY="1"/>
                <SkewTransform AngleX="0" AngleY="0"/>
                <RotateTransform Angle="0"/>
                <TranslateTransform X="0" Y="0"/>
            </TransformGroup>
        </StackPanel.RenderTransform>
        <Image Margin="0,50,0,0" Source="{Binding NextPicture}"  x:Name="title" Height="150" VerticalAlignment="Top" Stretch="Uniform"></Image> 
```

# c# - 不同数据库类型上数据库表的一致性哈希

> ID：11233550
> 
> 赞同：3
> 
> 时间：2012-06-27T19:25:30.443
> 
> 标签：c#, mysql, sql-server, database, oracle

我在各种不同的数据库类型（Microsoft SQL2005、MySql 和 IBM Informix、Oracle）上有相同的数据表，我需要对表中的数据生成一个 SHA-1 哈希结果，该结果在不同的数据库类型中是相同的。

我正在尝试确定完成此任务的最佳方法，到目前为止，这就是我想出的：

*   使用 .NET SqlDataAdapter，从所需的表中选择 * 到 DataTable。
*   通过 List.Sort() 对列名进行排序，以确保数据库类型之间的顺序一致
*   对于每一行，按如下方式执行哈希：
    *   按照上面确定的顺序将每个列值转换为字符串并附加到 rowString
    *   散列整个 rowString 以获得 rowHash 并将其添加到列表中。
*   接下来，将所有 rowHash 值按它们的 SHA-1 值排序，并对结果进行散列以获得最终的表散列。这应该解决在不同数据库类型之间以不同顺序返回行的问题。

我会遇到此实施的任何问题吗？例如来自不同数据库的数据类型导致不同的字符串结果？

另外，有必要分拣吗？我假设除非在查询中定义，否则不能保证列和行的顺序，我希望它尽可能动态。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:07:01.377

注意数值，尤其是舍入和精度。

# ruby-on-rails - 我很难从heroku拉出来

> ID：11233558
> 
> 赞同：0
> 
> 时间：2012-06-27T19:26:03.520
> 
> 标签：ruby-on-rails, ruby, git, heroku, github

我刚刚被 Heroku 邀请参与一个 Web 应用程序。当我输入 git clone 命令时，我不断收到此错误消息。

```
The authenticity of host 'heroku.com (50.19.85.154)' can't be established.
RSA key fingerprint is 8b:48:5e:67:0e:c9:16:47:32:f2:87:0c:1f:c8:60:ad.
Are you sure you want to continue connecting (yes/no)? yes
Warning: Permanently added 'heroku.com,50.19.85.154' (RSA) to the list of known hosts.
Permission denied (publickey).
fatal: The remote end hung up unexpectedly 
```

输入指令：

```
git clone git@heroku.com:stormy-stone-5088.git -o heroku 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:15:30.493

如果没有为其他项目完成，您可能需要设置您的私钥（作者经常假设）

类型

`cd ~; ssh-keygen -t dsa
#(changes directory to home and generate the keys.)`

按回车四次，然后点击你的脚后跟三下，你的钥匙就会进入`~/.ssh`

`~/.ssh/id_rsa.pub`是你的公钥，你给别人的那个。

# iphone - 想让网站上的谷歌地图在 Iphone 上看起来更大

> ID：11233564
> 
> 赞同：0
> 
> 时间：2012-06-27T19:26:26.380
> 
> 标签：iphone, google-maps-api-3, mobile-safari, font-size

我的网站上有一个使用 google-maps-APIv3 的谷歌地图。但地图在 Iphone safari 浏览器上似乎非常小且不可读。我希望字体更大，字体更大，以便我们阅读。有什么建议或解决方案吗？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T23:23:30.610

我想你正在寻找[这个](https://developers.google.com/maps/documentation/javascript/basics)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:38:10.527

好吧，您将要检查它是否是移动浏览器，这是一个 php 片段

```
<?php
if(strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'mobile') || strstr(strtolower($_SERVER['HTTP_USER_AGENT']), 'android')) {
 //Style Google Maps Javascript here
} ?> 
```

但是，我认为您不能更改标签的字体大小。

# c# - 线程和垃圾收集

> ID：11233570
> 
> 赞同：1
> 
> 时间：2012-06-27T19:26:43.287
> 
> 标签：c#, multithreading, garbage-collection, weak-references

我有一个 Windows 服务，它连续运行并创建一些线程来做一些工作。我想确保正确处理这些线程（完成后收集垃圾。

但是，我还希望能够定期检查它们是否还活着，如果存在则终止它们。不过，我知道我不能保留对它们的任何引用，因为那样它们就不会被垃圾收集。

是否有另一种方法来检查用户定义线程的存在/状态？我在想也许像下面这样使用`WeakReference`：（我现在不能完全测试，或者我自己测试一下）

```
List<WeakReference> weakReferences;
Thread myThread = new Thread(() => Foo());
WeakReference wr = new WeakReference(myThread);
weakReferences.Add(wr);  //adds a reference to the thread but still allows it to be garbage collected
myThread.Start();
myThread = null;  //get rid of reference so thread can be garbage collected 
```

然后在我的 onTimeElapsed 事件开始时（每 5 分钟运行一次）：

```
foreach(WeakReference wr in weakReferences)
{
    Thread target = wr.Target as Thread;  //not sure if this cast is really possible
    if(target.IsAlive && otherLogic)
    {
         target.Abort();
    {
} 
```

但我不确定 WeakReference 究竟是如何工作的。关于如何正确执行此操作的任何想法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T19:32:23.643

`myThread`方法变量？或者...？

在大多数情况下，线程*只会*在可能的情况下被垃圾收集。没有必要设置`myThread`if`null`是`myThread`一个方法变量，因为当时*不存在*。

但是，我会注意到线程实际上是非常昂贵的对象（仅堆栈是分配的痛苦）。如果可能，我建议使用`ThreadPool`（如果每个项目都是短暂的）或定制的工作队列（如果更长），可能有多个工作人员为单个队列服务。

至于终止/中止线程……这**绝不**是一个好主意；你*不知道*那个线程在做什么。在那之后，你的整个过程有*可能注定要失败。*如果可能*的*话，考虑让工人偶尔检查一个“中止”标志。如果不可能，请考虑在单独的*过程*中进行工作。一个进程比一个线程还要昂贵，但它的优点是它是隔离的；你可以在不影响自己的情况下杀死它。当然，你仍然可以破坏它正在处理的任何文件，等等......

坦率地说，我考虑中止线程的主要时间是如果我的进程已经死亡，我正试图尽快让它摆脱痛苦。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T19:31:55.010

使用线程池。不要自己产生线程，也不要发明轮子。

# android - Android，可扩展列表中随机选中/取消选中的复选框

> ID：11233578
> 
> 赞同：2
> 
> 时间：2012-06-27T19:27:34.437
> 
> 标签：android, checkbox, android-listview, expandablelistview, android-ui

使用[此可扩展列表复选框示例代码](http://mylifewithandroid.blogspot.com/2010/12/expandable-list-and-checkboxes.html)作为基线，我正在尝试保存和维护复选框状态。`OnCheckedChangeListener`但是，当我将它们滚动到视线之外，最小化它们的组，甚至最小化/最大化附近的组时，随机复选框会被选中和取消选中（触发我的新值）！

```
public Object getChild(int groupPosition, int childPosition) {
    return colors.get( groupPosition ).get( childPosition );
}

public long getChildId(int groupPosition, int childPosition) {
    return (long)( groupPosition*1024+childPosition );  // Max 1024 children per group
}

public View getChildView(final int groupPosition, final int childPosition, 
        boolean isLastChild, View convertView, ViewGroup parent) {

    View v = null;
    if( convertView != null ) {
        v = convertView;
    } else {
        v = inflater.inflate(R.layout.child_row, parent, false); 
    }

    Color c = (Color)getChild( groupPosition, childPosition );

    TextView color = (TextView)v.findViewById( R.id.childname );
    if( color != null ) {
        color.setText( c.getColor() );
    }

    TextView rgb = (TextView)v.findViewById( R.id.rgb );
    if( rgb != null ) {
        rgb.setText( c.getRgb() );
    }

    CheckBox cb = (CheckBox)v.findViewById( R.id.check1 );
    cb.setChecked( c.getState() );
    cb.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            colors.get(groupPosition).get(childPosition).setState(isChecked);
            context.setColorBool(groupPosition, childPosition, isChecked);
            Log.d("ElistCBox2", "listitem position: " +groupPosition+"/"+childPosition+" "+isChecked);
        }
    });

    return v;
} 
```

我不知道哪段代码可能对此负责，因此欢迎就此处包含的内容提出任何建议。我的代码仅在尝试保存值时与原始代码不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T12:22:19.287

这是一个非常古老的问题，但我遇到了同样的问题，所以这是我对任何人的回答：

最简单的方法是使用 CheckBox.onClickListener 而不是 onCheckedChangeListener。

就重新安排逻辑而言，这只是有点烦人，但会确保当随机取消选中框（例如通过扩展相邻组）时，不会触发事件。

老实说，我认为这应该被视为一个错误，即使我确信可以从 Android 源代码中解释该行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:41:21.833

我的猜测是，当您的适配器正在创建视图时，会在初始化复选框视图时调用检查侦听器。android 中的很多小部件都是这样工作的……在初始化视图时调用侦听器。

我不知道为什么事情会这样，但它可能是允许客户端代码以一致的方式初始化自己。例如，复选框是否被用户选中或者是否初始化为选中，运行相同的代码。

为了解决这个问题，您可以尝试在您的侦听器类 impl 中设置一个标志，以允许您忽略第一次点击，例如，

```
cb.setOnCheckedChangeListener(new OnCheckedChangeListener()
    {
        private void first = true;

        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
        {
            if (first) {
              first = false;
              return;
            }

            colors.get(groupPosition).get(childPosition).setState(isChecked);
            context.setColorBool(groupPosition, childPosition, isChecked);
            Log.d("ElistCBox2", "listitem position: " +groupPosition+"/"+childPosition+" "+isChecked);
        }
    }); 
```

另外，请确保您在适配器`convertView`中的实现中正确重用。`getView()`例如，

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View view = convertView;
    if (view == null) {
        view = inflater.inflate(R.layout.applications_item, null);
    } 
```

# jquery - 将 JQuery 选择器分配给变量一次

> ID：11233581
> 
> 赞同：0
> 
> 时间：2012-06-27T19:28:06.470
> 
> 标签：jquery

我有一个 JQuery 插件功能，我想从 iframe 分配选择器一次，然后在整个插件中使用它们。

在下面的基本示例中，如果我在插件中有一个函数，它将不适用于 $modal 选择器，除非我在函数中明确设置它。

有没有办法做到这一点，以便我可以将选择器分配给一个变量一次，并在整个插件函数中访问它？

```
jQuery.customPlugin = function() {

    var $modal = $('#modal', frames['admin-bar'].document);

    $('#hide-modal').click(function(){

        hide_modal();

    });

    // doesn't work - but I want it to somehow
    function hide_modal(){

        $modal.hide();

    }

    // works, but requires lots of re-querying if I have lots of selectors/functions
    function hide_modal(){

        var $modal = $('#modal', frames['admin-bar'].document);
        $modal.hide();
    }

}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:32:48.460

jQuery 选择器在实例化它们时会查询 DOM。换句话说，如果你这样做`var $foo = $('.bar')`了，然后在页面中添加一个带有“bar”类的新元素，你的 $foo 变量将不会包含它。这就是 jQuery 的工作原理。

您可以做的是编写一个方法 get$Modal，每次运行时都会重新查询。例如：

```
function get$Modal() {
    return $('#modal', frames['admin-bar'].document);
}
// Should work
function hide_modal(){
    get$Modal().hide();
} 
```

或者，您还可以做的是在创建模式时“注册”它们，避免重新查询。就像是：

```
var $modals = $('.modal');// start with any existing modals
function createModal() {
    var $modal = generateModal();
    modals.add($modal); // add any newly created modals
}

// Should work
function hide_modal(){
    $modals.hide();
} 
```

如果您有一个创建所有模态的公共位置，那应该会很好用。如果您在许多不同的地方创建模式，您可能希望使用自定义事件来组织事物：

```
var $modals = $('.modal');// start with any existing modals
$(document.body).on('newModal', function(e, $newModal) {
    $modals.add($newModal);
})

function createModalPlace1() {
    var $modal = generateModal();
    $(document.body).trigger('newModal', $modal)
}

function createModalPlace2() {
    var $modal = generateModalSomeOtherWay();
    $(document.body).trigger('newModal', $modal)
}

function createModalPlace3() { // etc. 
```

# javascript - 滚动时是否可以执行“对齐”效果？

> ID：11233586
> 
> 赞同：11
> 
> 时间：2012-06-27T19:28:26.807
> 
> 标签：javascript, jquery, html, jquery-plugins

我正在建立一个这样的网站（几乎是垂直幻灯片）：

[http://mikelegacywebdesign.com/scrollpage_test/index.html](http://mikelegacywebdesign.com/scrollpage_test/index.html)

我想做但不知道的一件事是如何使滚动 SNAP 达到滚动时颜色变化的程度。

例如，当滚动时，您会在您滚动到的下一个颜色的顶部附近达到大约 50-100 像素，如果它能够捕捉到该点会很好，而不是继续滚动，因为很难让那个“框架”完美对齐。这取决于用户滚动完美的数量，以便他们查看完整的帧，而不是序列中前一帧或下一帧的片段。

任何知道是否有 jQuery 插件或其他东西的人都会是我的英雄。

这是到目前为止的整个页面。获得当前效果的简单编码：

```
<!DOCTYPE HTML>
<html lang="en-US">
<head>
<meta charset="UTF-8">
<title>Scrollpage Test</title>

<style type="text/css">

    html, body { margin: 0; padding: 0; height: 100%; width: 100%; }
    .container { height: 400%; width: 100%; }
    .section { height: 35%; width: 100%; }

    #section1 { background-color: #1d9ad7; }
    #section2 { background-color: #c83e3d; }
    #section3 { background-color: #75b946; }
    #section4 { background-color: #f4be2f; }

</style>
</head>
<body>
<div class="container">
    <div class="section" id="section1"></div>
    <div class="section" id="section2"></div>
    <div class="section" id="section3"></div>
    <div class="section" id="section4"></div>
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T19:40:33.673

是的，有[可能](http://community.saucony.com/kinvara3/)。他们的代码虽然很糟糕。在制作动画`scrollTop`时，您需要确保忽略通常会导致滚动的其他用户输入。看看这个[测试用例](http://jsfiddle.net/rodneyrehm/aPvFL/)，了解如何防止用户滚动。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T19:40:44.367

您可以使用

```
scroll() jumpScroll() scrollBy() 
```

和一点你自己的代码。

例如，

```
function jumpScroll() {
    window.scroll(0,250);
} 
```

会滚动到页面上的那个点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:35:00.737

我也在追求同样的事情，所以几周前[问了一个类似的问题。](https://stackoverflow.com/questions/11051650/stellar-js-configuring-offsets-aligning-elements-for-a-vertical-scrolling-we)我发现了一个名为[stellar.js](http://markdalgleish.com/projects/stellar.js/)的插件，它具有该功能，但演示是水平的，我一生都无法将其更改为垂直的。无论如何，有人发布了一个解决方案，我为 mousescroll 而不是单击进行了编辑：http: [//jsfiddle.net/djsbaker/dxzk4/](http://jsfiddle.net/djsbaker/dxzk4/)

在网站说明中，我遇到了一个问题，即它在巨大的固定背景图像上相当滞后。事实上非常滞后，但我使用的视差混合得不好。

# java - Google App Engine 创建新的 Google 帐户

> ID：11233588
> 
> 赞同：0
> 
> 时间：2012-06-27T19:28:34.317
> 
> 标签：java, google-app-engine, single-sign-on

我正在研究一个要求，我必须创建新的注册模块以在谷歌上创建一个新帐户。我计划在 Java 环境中使用谷歌应用引擎。

现在我不知道满足这个要求。

你能建议我创建这个模块吗？

还有一个问题，Google APP（免费版）是否使用SSO？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T06:41:06.623

据我了解，Gae 确实使用正弦符号

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:56:24.427

我建议您在[此处查看有关 GAE 的文档](https://developers.google.com/appengine/docs/java/users/overview)

以及我为验证而写的一篇小文章[here](http://cloudspring.com/google-app-engine-gae-java-api-part-3-getting-started-with-apis/)

当用户被重定向到谷歌登录屏幕并且他没有 ID 时，他可以创建一个（我首先建议您在用户被转发到登录屏幕并被要求登录的部分工作，您会明白我的意思)

就 SSO 而言，[这里](https://stackoverflow.com/questions/3591434/single-sign-on-with-google-apps-app-engine)和[这里](https://stackoverflow.com/questions/5163753/single-sign-on-on-google-app-engine-apps)的讨论确实表明它可以在适当的配置下工作。希望这可以帮助

# git - 为什么 Git 使用 SHA-1 作为版本号？

> ID：11233591
> 
> 赞同：40
> 
> 时间：2012-06-27T19:28:37.090
> 
> 标签：git

Git 使用 SHA-1 供用户参考提交。

[Subversion](http://en.wikipedia.org/wiki/Apache_Subversion) (SVN) 和[Mercurial](http://en.wikipedia.org/wiki/Mercurial) (hg) 使用增量编号。

为什么 Git 团队做出使用 SHA-1 而不是更具描述性的设计决策？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-06-27T19:35:38.180

Mercurial (hg) 也使用 SHA1 哈希。它也只是试图从提交历史中获取修订号。但是，这些修订仅在一个存储库中有效。如果您观看另一个 repo，则不能保证这些修订是匹配的。

至于为什么 git 和 mercurial 使用哈希：两者都有非线性提交历史。因为两者都是分布式的，所以人们可以在他们的本地存储库中使用相同的代码基础，而无需同步到中央机构（如 SVN 和 CVS 所要求的那样）。现在，如果人们在本地提交他们的东西并稍后合并它们，您将很难提出一致的模式来形成线性增加的整数修订。即使可以，您仍然会在不同的存储库之间得到不同的结果。

归根结底，这都是因为分布式特性。这是一种为提交提供相当独特的标识符的简单方法。作为副产品，您还可以将完整的历史记录编码为单个提交到哈希中。这意味着，即使您在提交中有相同的差异，您也可能会得到不同的 SHA1 哈希值。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-27T19:33:29.600

它既用作提交识别的方法，也用作验证的方法。SHA1 编号是提交中所做的所有更改的校验和加上作者的姓名加上父提交的 SHA1。（并且 IIRC 它还包括提交消息，但不确定）。

当您从远程提取/获取时，git 将根据您收到的文件检查校验和，以确保您没有收到损坏或修改的代码版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T19:37:17.490

Git 和 HG 都使用 SHA1 来识别提交。SVN 运行一个顺序变化模型，因此能够支持增量版本号，而 Git 和 HG 更复杂，支持有向无环图开发模型，更适合频繁的分支和合并。

The HG incremental number is different from the SVN incremental number and is [not suitable](http://mercurial.selenic.com/wiki/RevisionNumber) for refering to a particular revision across different copies of a repository, so cannot be used in the same way as the SVN revision number.

# c - GNU C 预处理器：字符串化宏评估的结果

> ID：11233596
> 
> 赞同：1
> 
> 时间：2012-06-27T19:29:02.770
> 
> 标签：c, gcc, c-preprocessor, stringification

我有一个通用的字符串宏，我想将它转换为长度值字符串，如果可能的话，全部在宏中，所以一切都以`.rodata`.

```
#define PAYLOAD "xyz"
#define PAYLOAD_LEN (sizeof(PAYLOAD)-1) 
```

我想在另一个字符串的一部分中使用 PAYLOAD_LEN 作为字符串，例如

```
const char lv_macro[]  = "<preamble>" PAYLOAD_LEN ":" PAYLOAD;
const char lv_wanted[] = "<preamble>3:xyz"` 
```

我怀疑这是不可能的，我应该将 PAYLOAD_LEN 定义为文字，例如`#define PAYLOAD_LEN 3`然后[stringify](http://gcc.gnu.org/onlinedocs/cpp/Stringification.html)。

我可以但不想忘记`.rodata`并在运行时生成它，例如

```
char lv[64];
snprintf(lv, sizeof lv, "<preamble>%zu:" PAYLOAD, PAYLOAD_LEN); 
```

*[请注意，这不是这里](https://stackoverflow.com/questions/3419332/c-preprocessor-stringify-the-result-of-a-macro)已经提出和回答的问题，例如，在许多其他问题中。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:40:10.447

`sizeof`由编译器处理，而不是预处理器，所以你不能采用这种方法。其他两个选项将起作用，哪一个更适合取决于您的情况。

# sql-server-2008 - SQL Server 2008 触发器插入纬度和经度并更新地理字段

> ID：11233600
> 
> 赞同：1
> 
> 时间：2012-06-27T19:29:16.353
> 
> 标签：sql-server-2008, triggers, insert, geography

嗨伙计们：我正在尝试编写一个触发器，该触发器在插入到 SQL Server 2008 中的点表后触发。我第一次尝试似乎正在工作，但无论我如何更改纬度和经度的值随后的插入地理字段保持完全相同

```
USE GIS

IF EXISTS(SELECT name FROM SYSOBJECTS WHERE name = 'PointCreationTrigger' and type = 'TR')
DROP TRIGGER [dbo].[PointCreationTrigger]
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE TRIGGER [dbo].[PointCreationTrigger] 
   ON  [dbo].[Points] 
   AFTER INSERT
AS 
BEGIN
        SET NOCOUNT ON;

    DECLARE @Point AS GEOGRAPHY
    DECLARE @Longitude AS FLOAT
    DECLARE @Latitude AS FLOAT
    DECLARE @WKT AS VARCHAR(256) -- well known text representation of a point

    SET @Longitude = (SELECT i.Longitude FROM inserted i)
    SET @Latitude = (SELECT i.Latitude FROM inserted i)

   IF @Latitude IS NOT NULL AND @Longitude IS NOT NULL
   BEGIN
        IF @Latitude > -90 AND @Latitude < 90 AND @Longitude > -180 AND @Longitude < 180
        BEGIN
            SET @WKT = (SELECT 'POINT(' + CONVERT(VARCHAR(16),@Longitude) + ' ' + CONVERT(VARCHAR(16), @Latitude) + ')')
            SET @Point = geography::STGeomFromText(@WKT, 4326);
            UPDATE [dbo].[Points] SET Point = @Point
        END
    END
END
GO 
```

有什么建议么...？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T23:22:47.780

您可以将当前拥有的 SQL 重写为单个更新语句，该语句会影响触发触发器的语句中包含的所有行。

请参阅@HLGEM 的评论，并注意。每个 SQL 语句触发器只触发一次，并且需要考虑受该语句影响的所有行。

```
update
    p
set
    Point = geography::STGeomFromText('POINT(' + CONVERT(VARCHAR(16), i.Longitude) + ' ' + CONVERT(VARCHAR(16), i.Latitude) + ')', 4326)
from
    inserted i
inner join
    dbo.Points p
        on p.PointsID = i.PointsID
        and i.Latitude > -90
        and i.Latitude < 90
        and i.Longitude > -180
        and i.Longitude < 180 
```

**假设：**您有一个或多个 PK 字段可以加入。

**建议：**为了使它更健壮，您可能应该有条件地将`Point`值设置为`NULL`if `Latitude`or`Longitude`不是有效值。

**另一种可能性：**这可能不符合您的需求，但您可以将点数据的字符串版本交替存储在表中的持久计算列中，从而无需触发器。这样做的缺点是它必须是 varchar 列而不是 geography 数据类型，所以如果您正在积极使用 geography 数据类型，这种方法意味着更多的转换。触发器只会执行一次转换。

# asp.net - 从 asp 到 asp.net

> ID：11233601
> 
> 赞同：0
> 
> 时间：2012-06-27T19:29:16.357
> 
> 标签：asp.net, asp-classic

是否可以将 ASP 应用程序转换为 ASP.NET？我更喜欢在 ASP.NET 中使用 Visual Studio，而不仅仅是 ASP。我需要这样做，因为我一直在尝试观看 ASP 页面，因为我不知道如何使用 ASP，我正在尝试在 Visual Studio 中查看 ASP（经典 ASP）的代码，也许我需要进行一些更改，但我不知道更改是什么。我在我的应用程序中进行了一些更改，例如放置一个按钮来选择和取消选择复选框，但我看不到任何更改或图像，这种工作方式与我习惯的方式不同，嗯，它应该是这个代码有效，（问题是我看不到任何变化）：

```
<td align="center" colspan="3">
  <input type="button" name="btn_seleccionar_todo" value="Seleccionar todo" onclick="javascript:marcar(this.form);">
</td>
<td align="center" colspan="3">
  <input type="button" name="btn_desseleccionar_todo" value="Seleccionar todo" onclick="javascript:desmarcar(this.form);">
</td>

function marcar()
{
  for (i=0;i<form.usuarios.options.length;i++)
  {
    form.usuarios.options[i].checked=true;
  } 
}

function desmarcar()
{
  for(i=0;i<form.usuarios.options.length;i++)
  {
      form.usuarios.options[i].checked=false;
  } 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:34:07.273

转换基础技术是一项艰巨的任务，不能掉以轻心。您绝对不应该将其视为将 VBScript 简单地翻译为 C#...您需要使用新选择的技术习惯性地重写整个内容。就像使用谷歌翻译通过电子邮件交流或与说不同语言的人聊天一样——它可以工作，但不是很好。

# c - 未初始化变量的值是多少？

> ID：11233602
> 
> 赞同：6
> 
> 时间：2012-06-27T19:29:17.153
> 
> 标签：c, initialization, garbage

> **可能重复：**
> [未初始化的数据行为是否明确指定？](https://stackoverflow.com/questions/6824488/is-uninitialized-data-behavior-well-specified)

我尝试了以下代码

```
#include<stdio.h>
void main()
{
int i; \
printf('%d',i);
} 
```

结果在 VC++ 中给出了垃圾值，而在 tc 中相同为零。正确的值是多少？默认情况下，未初始化的变量的值是否为零？或者它会包含垃圾值？

接下来是同一个

```
#include<stdio.h> 
void main()
{
int i,j,num;
j=(num>0?0:num*num);
printf("\n%d",j);
} 
```

上面代码的输出是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-27T19:31:02.660

从技术上讲，未初始化的非静态局部变量的值是**Indeterminate** ^([Ref 1])。
简而言之，它可以是任何东西。访问这样一个未初始化的变量会导致一个**未定义的行为**。^([参考 2])

^([参考 1])
**C99 第 6.7.8 节初始化：**

> 如果具有自动存储持续时间的对象未显式初始化，则其值是不确定的。

^([参考 2])

**C99 第 3.18 节未定义的行为：**

> **在使用**不可移植或错误程序结构、错误数据或**不确定值对象**时的行为，本国际标准对此没有任何要求。

注意：强调我的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T19:30:52.507

访问一个未初始化的变量在 C 和 C++ 中都是未定义的行为，因此可以读取任何值。

你的程序也有可能崩溃：一旦你进入未定义的行为领域，所有的赌注都没有¹。

* * *

¹我从未见过程序因访问未初始化的变量而崩溃，除非它是指针。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T19:30:44.097

这是不确定的。编译器可以为所欲为。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-27T19:31:27.760

该值是不确定的；在初始化之前使用变量会导致未定义的行为。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-27T19:32:18.600

它是*未定义*的。不同的编译器，不同的操作系统，不同的程序运行，任何东西之间可能会有所不同。它甚至可能不是一个特定的值：允许编译器对这段代码做任何它喜欢的事情，因为没有定义效果。它可能会选择优化你的整个程序。它甚至可能选择用安装键盘记录器并窃取您所有网上银行登录详细信息的程序替换您的程序。

如果您想知道该值，唯一的方法就是设置它。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-06-27T19:32:51.193

正如其他人所指出的，价值*可以*是任何东西。

这有时会导致难以发现的错误，例如因为您*碰巧*在调试版本中获得了一个值，而在发布版本中获得了不同的值，或者您获得的初始值取决于之前的程序执行。

教训：总是初始化变量。C# 为字段定义值并要求对局部变量进行初始化是有原因的。

# java - finalize 方法中的异常

> ID：11233605
> 
> 赞同：9
> 
> 时间：2012-06-27T19:29:30.227
> 
> 标签：java, garbage-collection

> **可能的重复：**
> [方法完成和异常](https://stackoverflow.com/questions/6276289/method-finalize-and-exceptions)

`finalize()`当对象即将从内存中释放时，垃圾收集器调用方法。当方法中引发异常时会发生什么`finalize()`？

GC 会继续进行并释放内存，还是 GC 会停止该对象的进程？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-06-27T19:51:09.957

如果在 try-catch 语句中引发异常并且被正确捕获，那么是的，“GC 将继续进行”，就像在常规程序中一样。

但是如果抛出的异常没有被处理，那么根据[JSL](http://docs.oracle.com/javase/specs/jls/se7/html/jls-12.html#jls-12.6)，

> 如果在终结期间抛出未捕获的异常，则忽略该异常并终止该对象的终结。

因此，在这种情况下，“GC 将停止该对象的进程”，在这种情况下，可能是它的某些资源没有被正确释放。

顺便说一句，终结器有两个缺点：

*   你不能确定 finalize 方法是否会被执行（来自[这个博客](http://weblogs.java.net/blog/jfalkner/archive/2007/07/blarg27_dont_us.html)）

    > 如果垃圾收集器总是在释放与对象关联的内存之前调用 finalize，为什么要执行上述操作？原因是垃圾收集器并不总是有机会在 JVM 终止之前清理对象。

*   终结器强制将对象提升到旧空间（收集时间更长），并将 GC 推迟到终结器运行，从而为 GC 算法增加更多开销。（参见 Java 性能调优第 2 版，Jack Shirazi 的版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:32:16.633

“finalize 方法抛出的任何异常都会导致该对象的终结被暂停，否则会被忽略。” [http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#finalize()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Object.html#finalize%28%29)

# regex - 正则表达式在字符串中查找日期

> ID：11233606
> 
> 赞同：0
> 
> 时间：2012-06-27T19:29:33.063
> 
> 标签：regex

我正在寻找一个正则表达式，它可以找到一个月的 alpha 表示，以及它后面的数字年份。

例子：

*   今天的月份是 2012 年 6 月

*   这是一个包含 2012 年 5 月日期的语句，仅此而已。

*   2012 年 12 月

*   2012 年 6 月是今年的日期

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:32:56.543

对于您的具体示例，您可以更改月份名称和`\d{4}`年份名称：

```
/\b(?:January|February|March|...|December)\s+\d{4}\b/i 
```

`i`用于不区分大小写。

是`\b`单词边界。

我假设年份是任意四位数，但您当然可能希望扩展（或限制）此范围，具体取决于您的应用程序的需要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:33:28.807

它应该是：

```
/\b(?:January|February|March|April|August|September|October|November|December)\s+\d{4}\b/i 
```

# jquery - 带有文件上传的 JQuery Ajax 表单在 IE 中不起作用

> ID：11233610
> 
> 赞同：4
> 
> 时间：2012-06-27T19:30:40.570
> 
> 标签：jquery, asp.net-mvc-3, internet-explorer, file-upload, ajaxform

我正在使用 Jquery Ajax Form 上传文件，在 Chrome 和 Firefox 中运行良好，但在 IE 中不起作用。它会弹出一个窗口，告诉我保存我要上传的文件。

如有必要，我的代码的一些示例在这里是：HTML：

```
<div class="addNewDocumentContent">
<form id="AddNewDocForm" action="@Url.Action("AddNewDocument", "BidForm")" enctype="multipart/form-data" method="post">
<div>
    <input name="File" type="file" style="width: 80%;" />
</div>
<div>
    <label>
        @Labels.Name</label>
    <input type="text" name="Name" style="width: 80%;" />
</div>
<div style="text-align: right;">
    <button type="button" name="Back" value="Back">
       @Buttons.GoBack
    </button>
    <button type="submit" name="Add" value="Back">
        @Buttons.Add
    </button>
</div>
</form> 
```

JS：

```
//Document Ready=============================================================================
$(function () { 

    $('#AddNewDocForm').ajaxForm({
        type: 'POST',
        beforeSubmit: function () {
            return $("#AddNewDocForm").valid();
        },
        success: function (documents) {
            FillDocuments(documents);
            $('#dialogAddNewDocument').dialog('close');
        }
    });
});
//Validate====================================================================================
//Validation=====================================================================================
$(function () {
    $("#AddNewDocForm").validate({
        ignore: ":not(:visible)",
        rules: {
            File: "required",
            Name: "required"
        }
    });
});
//========================================================================================= 
```

行动

```
[HttpPost]
    public JsonResult AddNewDocument(DocumentModel document)
    {
        if (ModelState.IsValid)
        {
            List<DocumentModel> documents = null;
            if (Session["Documents"] != null)
            {
                documents = (List<DocumentModel>)Session["Documents"];
                var doc = documents.OrderByDescending(x => x.Number).Take(1).FirstOrDefault();

                document.Number = doc != null ? doc.Number + 1 : 1;
                document.FileName = document.File != null ? document.File.FileName : document.FileName;
                documents.Add(document);
            }
            else
            {
                documents = new List<DocumentModel>();
                document.Number = 1;
                document.FileName = document.File != null ? document.File.FileName : document.FileName;
                documents.Add(document);
                Session["Documents"] = documents;
            }

            var displaydocs = documents.Select(x => new
            {
                Name = x.Name,
                Number = x.Number,
                File = x.File != null ? x.File.FileName : x.FileName,
                Route = x.Route != null ? x.Route : "#",
            });

            return Json(displaydocs, JsonRequestBehavior.AllowGet);
        }
        else
        {
            return null;
        }
    } 
```

最后是模型：

```
 public class DocumentModel
{
    public int Number { get; set; }
    [Required]
    public string Name { get; set; }
    [Required]
    public HttpPostedFileBase File { get; set; }

    public string FileName { get; set; }
    public string Route { get; set; }
} 
```

同样，它适用于除 IE8 之外的所有浏览器。我可能不是唯一一个，但我还没有找到答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-28T07:19:49.073

这个问题[已经被](https://stackoverflow.com/questions/6635927/jquery-form-upload-error)问过[很多次了](https://stackoverflow.com/questions/9417977/how-do-i-prevent-ie-save-file-dialog-when-using-fileupload-in-asp-net-mvc)。发帖前请先搜索。[文档](http://jquery.malsup.com/form/#file-upload)清楚地说明了这一点：

> 支持 XMLHttpRequest Level 2 的浏览器将能够无缝上传文件，甚至在上传过程中获得进度更新。对于较旧的浏览器，使用涉及 iframe 的后备技术，因为无法使用 XMLHttpRequest 对象的 1 级实现来上传文件。这是一种常见的后备技术，但它具有固有的局限性。iframe 元素用作表单提交操作的目标，这意味着将服务器响应写入 iframe。如果响应类型是 HTML 或 XML，这很好，但如果响应类型是脚本或 JSON，则效果不佳，这两种类型通常都包含在 HTML 标记中找到时需要使用实体引用来表示的字符。
> 
> 为了解决使用 iframe 模式时脚本和 JSON 响应的挑战，Form Plugin 允许将这些响应嵌入到 textarea 元素中，建议您在与文件上传和旧版本结合使用时对这些响应类型这样做浏览器。但是请注意，如果表单中没有文件输入，则请求使用普通 XHR 提交表单（不是 iframe）。这给你的服务器代码增加了知道什么时候使用 textarea 什么时候不使用的负担。

由于您从控制器操作返回 JSON，因此您需要尊重文档中所说的 => 包装在`<textarea>`元素中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-28T21:30:25.263

我还没有尝试过使用 textarea，但如果我将内容类型定义为在操作中返回为 text/html，它就可以正常工作：

```
 return new JsonResult() { ContentType = "text/html", Data = result }; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:36:10.923

尝试在您的 AJAX 调用中添加 cache:'false' ......类似于：

```
 $.ajax({
 type:"POST", 
 url:'process.php',
 cache:'false',   //IE FIX
 data: data, 
 success: function(){ //on success do something...

 } 
 }); 
```

# c - fread() 返回读取字节数 + 1

> ID：11233619
> 
> 赞同：0
> 
> 时间：2012-06-27T19:31:21.037
> 
> 标签：c, file, io

我使用 fread 读入一个字符缓冲区。

```
char buffer[50];
int nbytes = fread(buffer, 1, 50, fp); 
```

我从中读取的文件恰好包含单词*Hello*，即 5 个字节。在上面的例子中，`nbytes`等于 6。为什么？

此外，从零字节文件（即它是空的）读取返回 0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:35:00.237

我的猜测是，无论写入到您正在阅读的文件中的任何内容，都包含换行符（如果它是文本文件）或字符串后的 0 字节。如果您使用的是 unix，请运行以下命令：

```
od -c filename 
```

这将打印文件的全部内容，包括不可打印的内容。

您还可以运行：

```
wc --bytes filename 
```

它将以字节为单位打印文件的长度（连同文件名）。

# c# - 将多个图像转换为单个图像 asp.net

> ID：11233624
> 
> 赞同：0
> 
> 时间：2012-06-27T19:31:35.667
> 
> 标签：c#, asp.net, html, image

有没有办法拍摄 3 张图像并将它们组合成一张图像。我想这样做并在 facebook 和其他社交网站上分享。感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:47:18.307

您可以通过将图像放置在具有另外三个 div 的 div 中来做到这一点。并使子 div 样式块：内联。为每个 div 分配边框。你的任务完成了！

设置你喜欢的宽度和高度。这应该与图像的高度和宽度相同

```
<style>
.image{
 display:inline
}
</style>

<div id="threeImages">
<div id="imageOne" class="image"><img src="img1.jpg" /></div>
<div id="imageTwo" class="image"><img src="img2.jpg" /></div>
<div id="imageThree" class="image"><img src="img3.jpg" /></div>
</div> 
```

# c# - 如何使布尔值表现得像“闩锁”？

> ID：11233628
> 
> 赞同：4
> 
> 时间：2012-06-27T19:31:57.210
> 
> 标签：c#, boolean

我最初有以下代码：

```
 Boolean successCheckPoint = false;
        Boolean failureCheckPoint = false;
        Boolean timeFound = false;

        foreach (var row in auditRows)
        {
            timeFound = row.Text.Contains(sCurrentTime) || row.Text.Contains(sLenientTime) || row.Text.Contains(sLenientTime2) ? true : false;

            if (timeFound)
            {
                successCheckPoint = row.Text.Contains("Web User Login Success") && !successCheckPoint ? true : false;
                failureCheckPoint = row.Text.Contains("Web User Login Failure") && !failureCheckPoint ? true : false;
            }                                

        } 
```

但我发现，在 foreach 的后续迭代中，即使 successCheckPoint 或 failureCheckPoint 布尔值设置为 true，由于我设置分配的方式，它们最终也会设置为 false。

* * *

示例问题

第一次迭代

1.  timeFound 是真的
2.  成功检查点为假
3.  row.Text 确实包含我想要的文本
4.  successCheckPoint 确实是假的
5.  成功检查点设置为真

第二次迭代

1.  timeFound 是真的
2.  成功检查点为真
3.  row.Text 不包含我想要的文本
4.  successCheckPoint 不为假
5.  成功检查点设置为假

* * *

所以为了解决这个问题，我将代码更改为：

```
 Boolean successCheckPoint = false;
        Boolean failureCheckPoint = false;
        Boolean timeFound = false;

        foreach (var row in auditRows)
        {
            timeFound = row.Text.Contains(sCurrentTime) || row.Text.Contains(sLenientTime) || row.Text.Contains(sLenientTime2) ? true : false;

            if (timeFound)
            {
                if (!successCheckPoint)
                {
                    successCheckPoint = row.Text.Contains("Web User Login Success") ? true : false;
                }

                if (!failureCheckPoint)
                {
                    failureCheckPoint = row.Text.Contains("Web User Login Failure") ? true : false;
                }
            }                                

        } 
```

这可以满足我的要求，但感觉应该有更好的方法来完成这种行为。有什么方法可以设置，一旦布尔值设置为真，它就不会在未来的迭代中变回假？

* * *

正确的行为

第一次迭代

1.  timeFound 是真的
2.  成功检查点为假
3.  row.Text 确实包含我想要的文本
4.  successCheckPoint 确实是假的
5.  成功检查点设置为真

第二次迭代

1.  timeFound 是真的
2.  successCheckPoint 为真，因此跳过重新评估

* * *

抱歉，如果这仍然令人困惑。如有必要，我可以多解释一点。

* * *

编辑：现在我考虑一下，我真的不需要'？此代码的 true : false' 部分。

新代码：

```
 Boolean successCheckPoint = false;
        Boolean failureCheckPoint = false;
        Boolean timeFound = false;

        foreach (var row in auditRows)
        {
            timeFound = row.Text.Contains(sCurrentTime) || row.Text.Contains(sLenientTime) || row.Text.Contains(sLenientTime2);

            if (timeFound)
            {
                if (!successCheckPoint)
                {
                    successCheckPoint = row.Text.Contains("Web User Login Success");
                }

                if (!failureCheckPoint)
                {
                    failureCheckPoint = row.Text.Contains("Web User Login Failure");
                }
            }                                

        } 
```

* * *

感谢大家的帮助！这是我确定的代码版本：

```
 Boolean successCheckPoint = false;
        Boolean failureCheckPoint = false;
        Boolean timeFound = false;

        foreach (var row in auditRows)
        {                            
            if (row.Text.Contains(sCurrentTime) || row.Text.Contains(sLenientTime) || row.Text.Contains(sLenientTime2))
            {
                successCheckPoint |= row.Text.Contains("Web User Login Success");
                failureCheckPoint |= row.Text.Contains("Web User Login Failure");
            }

            if (successCheckPoint && failureCheckPoint)
            {
                break;
            }

        } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T19:34:06.790

您可以使用[OR 赋值运算符`|=`](http://msdn.microsoft.com/en-us/library/h5f1zzaw.aspx)：

```
bool successCheckPoint = false;
bool failureCheckPoint = false;

foreach (var row in auditRows)
{
    if (row.Text.Contains(sCurrentTime) ||
        row.Text.Contains(sLenientTime) ||
        row.Text.Contains(sLenientTime2))
    {
        successCheckPoint |= row.Text.Contains("Web User Login Success");
        failureCheckPoint |= row.Text.Contains("Web User Login Failure");
    }                                
} 
```

`a |= b;`是 的缩写`a = a | b;`。因此，如果`a`已经为真，则它保持为真。如果`a`为假且`b`为真，则为`a`真。否则，`a`仍然为假。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T19:33:56.810

只需使用 OR 运算符，如下所示：

```
bool failed = false;

failed |= CheckOne();
failed |= CheckTwo(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T19:49:24.587

我不太喜欢其他答案，因为它们过于复杂了这段代码。我觉得 linq 将有助于使您的代码更具可读性：

```
var rows = auditRows.Where(TimeIsFound);
var successCheckPoint = rows.Any(RowContainsSuccess);
var failureCheckPoint = rows.Any(RowContainsFailure);

...elsewhere...

static bool TimeIsFound(SomeType row)
{
    return row.Text.Contains(sCurrentTime) ||
           row.Text.Contains(sLenientTime) ||
           row.Text.Contains(sLenientTime2);
}
static bool RowContainsSuccess(SomeType row)
{
    return row.Text.Contains("Web User Login Success");
}
static bool RowContainsFailure(SomeType row)
{
    return row.Text.Contains("Web User Login Failure");
} 
```

我觉得这会让代码更容易理解，它几乎变成了一个段落：

> 获取找到某些特定时间的行。`successCheckPoint`如果任何行包含成功消息，则为真。`failureCheckPoint`如果任何行包含失败消息，则为真。

使其易于阅读有助于以后更容易调试。此外，这将功能拆分为小块。

不用担心循环多次。如果您在 100 个项目上循环一次并执行 3 个操作，则与在 100 个项目上循环 3 次并每次执行 1 个操作所花费的时间大致相同（`1 * 100 * 3 == 3 * 100 * 1`，看图）

# c# - 如何从 C# 4.0 中的匿名表达式集中获取最小值

> ID：11233630
> 
> 赞同：0
> 
> 时间：2012-06-27T19:31:59.930
> 
> 标签：c#, c#-4.0

我有一组三个`double`值作为 LINQ 查询中匿名表达式的一部分。它看起来像这样：

```
from item in collection where
     Min(val1-val2, item.Property1, somethingElse) > item.Property2
     select item; 
```

如何获得括号中表达式的最小值？Math.Min 只接受两个参数。我应该只使用匿名 List.Min() 吗？有更好的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:35:11.923

```
var items = collection
    .Where(i => new[] { val1 - val2, item.Property1, somethingElse }.Min() > i.Property2) 
```

或者，您可以只使用`Min`两次 ie `Min(val1 - val2, Min(item.Property1, somethingElse))`。如果`val1 - val2`and`somethingElse`是常量，那么您可以将它移到`Where`子句之外，这也会使事情变得更简单。

```
double min = Min(val1 - val2, somethingElse);
var items = collection.Where(i => Min(min, item.Property1) > i.Property2) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:41:57.127

如果`val1 - val2`并且`somethingElse`不依赖于`item`，您可以做一个简单的技巧：

```
var tempMin = Math.Min(val1-val2, somethingElse);
from item in collection where
     Math.Min(item.Property1, tempMin) > item.Property2
     select item; 
```

否则，你可以去

```
from item in collection where
     Math.Min(item.Property1, Math.Min(val1-val2, somethingElse)) > item.Property2
     select item; 
```

如果要比较的项目数量可能很大或事先不知道，您可以使用 Lee 的版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:39:26.033

您当然可以通过`Min`以下方式使用扩展方法：

```
from item in collection where
(new[] { val1-val2, item.Property1, somethingElse }.Min()) > item.Property2
select item; 
```

但是，这将导致为 a 中的每个实例化一个新`item`数组`collection`。就性能而言，这可能不是最好的方法。最好编写一个简单的方法来获得三个值中的最小值：

```
public double Min(double a, double b, double c)
{
    double result = a;

    if (result < b)
    {
       result = b;
    }

    if (result < c)
    {
       result = c;
    }

    return result;
} 
```

然后，您可以编写以下查询：

```
from item in collection where
Min(val1-val2, item.Property1, somethingElse) > item.Property2
select item; 
```

# javascript - 通俗地理解异步代码

> ID：11233633
> 
> 赞同：21
> 
> 时间：2012-06-27T19:32:04.403
> 
> 标签：javascript, node.js, asynchronous

我了解异步性的基本知识：事情不会按顺序执行。我知道这有一些非常强大的东西……据说。但是对于我的生活，我无法将我的头包裹在代码上。让我们看一下我已经编写的异步 Node.JS 代码......但并没有真正得到。

```
function newuser(response, postData) {
    console.log("Request handler 'newuser' was called.");
    var body = '<html>' + 
        '<head>' +
        '<meta http-equiv="Content-Type" content="text/html; ' +
        'charset=UTF-8" />' +
        '</head>' +
        '<body>' +
        '<form action=" /thanks" method="post">' +
        '<h1> First Name </h1>' +
        '<textarea name="text" rows="1" cols="20"></textarea>' +
        '<h1> Last Name </h1>' +
        '<textarea name="text" rows="1" cols="20"></textarea>' +
        '<h1> Email </h1>' +
        '<textarea name="text" rows="1" cols="20"></textarea>' +
        '<input type="submit" value="Submit text" />' +
        '</body>' +
        '</html>';
    response.writeHead(200, { "Content-Type": "text/html" });
    response.write(body);
    response.end();
} 
```

又是从哪里来的回应？发布数据？为什么我不能在这个“回调”中定义一个变量，然后在回调之外使用它？有没有办法让一些事情是顺序的，然后程序的其余部分是异步的？

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-06-27T19:48:03.380

我不确定这个函数在哪里使用，但回调的重点是你将它们传递给一些异步运行的函数；它将你的回调存储起来，当该函数完成它需要做的任何事情时，它会使用必要的参数*调用*你的回调。从前到后的例子可能是最好的。

想象一下，我们有一个框架，其中有一个运行很长时间的操作，从数据库中获取一些数据。

```
function getStuffFromDatabase() {
  // this takes a long time
}; 
```

由于我们不希望它同步运行，我们将允许用户传入回调。

```
function getStuffFromDatabase(callback) {
  // this takes a long time
}; 
```

我们将通过调用来模拟花费很长时间`setTimeout`；我们也会假装我们从数据库中得到了一些数据，但我们只是硬编码一个字符串值。

```
function getStuffFromDatabase(callback) {
  setTimeout(function() {
    var results = "database data";
  }, 5000);
}; 
```

最后，一旦我们有了数据，我们就会*调用*框架函数的用户给我们的回调。

```
function getStuffFromDatabase(callback) {
  setTimeout(function() {
    var results = "database data";
    callback(results);
  }, 5000);
}; 
```

作为框架的用户，您可以执行以下操作来使用该功能：

```
getStuffFromDatabase(function(data) {
  console.log("The database data is " + data);
}); 
```

因此，正如您所看到`data`的（与您的示例相同`response`）`postData`来自您将回调传递给的*函数*；当它知道该数据应该是什么时，它会将该数据提供给您。

您无法在回调中设置值并在回调之外使用它的原因是回调本身直到稍后才会发生。

```
//  executed immediately  executed sometime in the future
//      |                  |       by getStuffFromDatabase
//      v                  v
getStuffFromDatabase(function(data) {
  var results = data; // <- this isn't available until sometime in the future!
});

console.log(results); // <- executed immediately 
```

运行时`console.log`，任务`var results`尚未发生！

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-27T19:51:59.290

您在这里有几个不相关的问题：

1) async 的强大之处在于能够在不锁定主线程的情况下同时执行多项操作。在一般的 node 和 js 中，这尤其适用于 ajax 文件请求。这意味着我可以触发多个异步调用来检索文件，并且在呈现内容时不会锁定主线程。我首选的框架是 jQuery，它有方便的 $.Deferred 包装和标准化 jQuery 使用的异步调用。

2) response 和 postData 来自父方法。这里没有什么神奇的，它是一个普通的函数调用，所以这些值在别处创建并传递给这个调用。根据您拥有的节点框架，您的方法的确切签名将发生变化。

3）如果范围正确，您可以在回调中定义一个全局变量。尽管您似乎需要帮助来了解范围是什么。这里有一些链接

[http://www.digital-web.com/articles/scope_in_javascript/](http://www.digital-web.com/articles/scope_in_javascript/)

[http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/](http://robertnyman.com/2008/10/09/explaining-javascript-scope-and-closures/)

4) 一旦你进入异步，你就永远无法返回，然而，通过利用承诺和延迟对象，如 jQuery Deferreds，你可以等待几个异步完成，然后再继续执行另一个异步。延期者是你的朋友。

[http://api.jquery.com/category/deferred-object/](http://api.jquery.com/category/deferred-object/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-27T19:57:54.560

看起来您正在阅读[Node Beginner Book](http://www.nodebeginner.org/)。我鼓励你通读整本书，这确实是一个很好的介绍。如果您想更好地理解 Javascript，Douglas Crockford 在 YouTube 上的视频是一个很好的[概述](http://youtu.be/hQVTIJBZook)：[1、2](http://www.youtube.com/watch?v=v2ifWcnQs6M)。

您发布的那段代码没有足够的上下文让我真正帮助您。`response`是您传递给函数的参数，它不是来自 postData。如果您按照 Node Beginner Book 建议的方式使用代码，您可能会将响应从 createServer 函数一直向下传递给 newuser 函数，该函数是 Node 附带的 http 模块的一部分。

您不能在回调中定义变量然后在回调中使用它，因为 Javascript 是词法范围的。这是关于 Javascript 范围主题的[Stack Overflow 帖子](https://stackoverflow.com/questions/500431/javascript-variable-scope)。我发布的 Doug Crockford 的第一个视频也很好地解释了 Javascript 的范围规则。

Javascript 不一定是异步的。它只是提供匿名函数，它们是闭包，这是一个用于轻松实现异步逻辑的有用工具。同样，Node Beginner Book 展示了使用 Node 编写同步代码（不是您想要的），然后重写它以使其异步的一个很好的示例。

# database - 自动添加产品规格！有办法吗？

> ID：11233639
> 
> 赞同：1
> 
> 时间：2012-06-27T19:32:27.497
> 
> 标签：database, product

我正在创建一个网站，我希望有一种方式让我的部分帖子有关于产品的规格。有没有办法从某个地方自动提取规格，或者我必须自己添加它们。有点像 eBay，当我输入名称时，它会给我添加到列表中的规格。任何有关他们如何做到这一点的帮助都将非常感谢！

# html - 每个表格行的锚点

> ID：11233642
> 
> 赞同：1
> 
> 时间：2012-06-27T19:32:32.137
> 
> 标签：html, css, html-table

![在此处输入图像描述](../Images/bf501a0b6bbe3a97d3c6b8c5d2e28741.png)

我正在尝试构建此布局。我这个时候有这个：http: [//jsfiddle.net/Gh6mB/12/](http://jsfiddle.net/Gh6mB/12/)

使用什么结构最好？我已经在使用 html 表并且只使用 ul、li 和 div 时遇到了一些问题。对于表格，我有这个：http: [//jsfiddle.net/Gh6mB/21/](http://jsfiddle.net/Gh6mB/21/)这个解决方案的问题是我的 a:hover 效果不适用于#detalhes。

使用 html 表，我有这个：http: [//jsfiddle.net/KMjm6/8/](http://jsfiddle.net/KMjm6/8/)这个版本的问题是我不能把我的锚元素作为 tr 的子元素。但我想让每一行作为其他页面的锚点。

我非常感谢任何帮助，因为我不知道开发这种网站的最佳方式是什么。我使用的每一个策略，我都有一些问题。

 `* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-07-03T23:28:39.580

因为它是一个事件表，每行一个事件，所以我决定将 div 与显示表、表行和表单元格一起使用。`

# python - 在 Python 中压缩图像（无存档）

> ID：11233645
> 
> 赞同：3
> 
> 时间：2012-06-27T19:32:49.067
> 
> 标签：python, image, archive, compression

我正在编写一个处理图像的 Python 脚本。是否有一个模块可以压缩图像*而不*将其放入存档中，然后将其解压缩回来？（例如，压缩后 1MB 的图像现在是 0.8MB，解压后是 1MB）。

我可以在不使用存档的情况下查看在 Python 中压缩和解压缩图像的示例代码吗？

我已经看过一些模块，但是那些压缩字符串。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T19:40:00.740

您可能想看看[Python Image Library (PIL)](http://www.pythonware.com/products/pil/)以及[PNG](http://en.wikipedia.org/wiki/Portable_Network_Graphics)和[JPEG](http://en.wikipedia.org/wiki/JPEG)格式。

PIL [Image.save()](http://www.pythonware.com/library/pil/handbook/image.htm#Image.save)方法可让您保存 PNG 或 JPEG 图像。

PNG - 无损，适用于纯色或少量颜色的“卡通”/徽标图像。

JPEG - 有损，适合照片，有很多“正在进行”的图像。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T19:45:05.560

现代图像格式（例如 PNG 和 JPEG）已经被压缩，我的一般建议是采纳 Brendan Long 的建议并使用这些格式并利用所有已投入其中的工作。

也就是说，如果你想在 Python 中压缩任意文件的内容，这里有一个非常简单的例子：

```
import zlib

with open("MyImage.jpg", "rb") as in_file:
    compressed = zlib.compress(in_file.read(), 9)

with open("MyCompressedFile", "wb") as out_file:
    out_file.write(compressed) 
```

# shell - Shell：算术表达式是否可能不设置变量？里面的例子，请帮助:)

> ID：11233651
> 
> 赞同：0
> 
> 时间：2012-06-27T19:33:05.700
> 
> 标签：shell, syntax

感谢 tldp 提供的 Bash-Beginners-Guide，我目前正在学习 shell。

目前我正在做一些练习来提高我的 Shell 脚本技能，在这种情况下，我正在学习如何使用 if 和 case 语句。

我已经编写了一些代码，想知道是否可以直接在 case 表达式中使用算术表达式，而无需像我在代码中那样事先设置变量。

请注意，我不想为自己分配的“作业”提供解决方案，而是希望获得有关 Shell 语法基础的启发。

代码，免费使用：

```
echo "Starting exercise 2..."
day=`date +%e`
year=`date +%Y`
echo "Number of days in this month: $day days"
echo "Calculating leap years:"
calc1=$[$year % 400]
case $calc1 in
0) echo "$leap";;
*) 
    calc2=$[$year % 100]
    case $calc2 in
        0) echo "$noleap" ;;
        *) 
            calc3=$[$year % 4]
            case $calc3 in
            0) echo "$leap" ;;
            *) echo "$noleap" ;;
        esac
esac 
```

jump 和 noleap 只是一些字符串，它们对我的问题无关紧要。

我想摆脱那些 calc* 变量并执行以下操作：

```
case $[$year % 400] in
    0) echo "$noleap";;
    ... 
```

这可能吗？

**请注意，我是一个绝对的初学者，我 2 天前开始学习 Shell。**

编辑：我想我回答了我自己的问题。好像

```
case $[arithmetic expression] in 
```

作品。然而，还需要验证。

Edit2：修复了不相关的错误 noleap -> year%400 情况下的跳跃。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:02:13.800

尝试算术扩展：`case $(($year%400)) in ...`. 这种语法几乎可以在变量扩展可以使用的任何地方使用，包括双引号。

# c# - 您如何部署自己的 Authenticode 时间戳服务？

> ID：11233659
> 
> 赞同：7
> 
> 时间：2012-06-27T19:33:35.340
> 
> 标签：c#, dll, code-signing, trusted-timestamp

我想用我自己的 Authenticode 时间戳服务给我的 DLL 文件加上时间戳。这可能吗？我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-22T15:45:34.533

您可以开发自己的时间戳服务。您可以编写 TSP (RFC 3161) 服务器，但 Authenticode 不使用 RFC 3161，而是使用[MSDN 文章](http://msdn.microsoft.com/en-us/library/windows/desktop/bb931395%28v=vs.85%29.aspx)中描述的 PKCS#7/PKCS#9 格式（您也可以实现）。我们的[SecureBlackbox](http://www.eldos.com/sbb/net-pki.php)组件包括支持这两种格式的时间戳服务器组件。更新：最近对 Authenticode 的更新使用标准 RFC 3161 时间戳。

但问题是要获得用于签署时间戳的证书。该证书必须由其中一个 CA 颁发，据我了解，对于运行时间戳服务器的管理和基础架构方面存在严格的要求。特别是您需要有一个安全的时间戳硬件。我没有深入研究这个问题，但是这些方面比编写一段代码要复杂得多。

尽管如此，如果您运行自己的 PKI 基础设施（拥有自己的可信根证书和 CA 证书），那么拥有可信时间戳证书的问题就会自动解决——您可以生成自己的证书。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-03T13:46:04.957

您需要编写一个自定义 HTTP 时间戳服务器。它应该遵循[RFC 3161](http://www.ietf.org/rfc/rfc3161.txt)时间戳协议 (TSP) 规则。

当您使用Windows SDK 中的[Signtool.exe](http://msdn.microsoft.com/en-us/library/windows/desktop/aa387764%28v=vs.85%29.aspx)等工具对 DLL 进行身份验证时，您可以指定时间戳服务器的 url（使用 /t 开关。另请参见 /tr 和 /td）。然后，您将指向您的服务器。

有关相关问题，请参见此处的 SO：[Trusted Timestamps - Understanding the format (rfc3161)](https://stackoverflow.com/questions/5045416/trusted-timestamps-understanding-the-format-rfc3161)

以及：[Authenticode 的替代时间戳服务](https://stackoverflow.com/questions/2872105/alternative-timestamping-services-for-authenticode)

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2016-04-15T15:11:04.427

您可以使用 SignServer 设置您自己的支持 Authenticode 时间戳（和/或 RFC#3161）的时间戳授权 (TSA)。

有关下载和安装说明，请参见[https://www.signserver.org](https://www.signserver.org)。总之，重要的步骤是：

1.  确保您具有先决条件：

    *   爪哇
    *   应用服务器（即 WildFly）
    *   用于部署的 Apache Ant
2.  [从https://signserver.org](https://signserver.org)或[https://sourceforge.net/projects/signserver/files/signserver/4.0/](https://sourceforge.net/projects/signserver/files/signserver/4.0/)下载 4.0 版本。

3.  配置应用服务器

    *   对于 HTTPS（可选）
    *   使 Web 服务正常工作
    *   使用最新的安全修复补丁
4.  配置 SignServer 部署

    *   在 conf/signserver_deploy.properties 中设置 database.name=nodb 和 database.nodb.location=/an/empty/folder/as/db
5.  部署 SignServer

    *   导出 APPSRV_HOME=/opt/wildfly-9/
    *   bin/ant 部署
    *   启动应用服务器 /opt/wildfly-9/bin/standalone.sh
6.  检查服务器是否已启动

    *   bin/signserver getstatus 简介
7.  设置加密令牌

    *   bin/signserver setproperties doc/sample-configs/keystore-crypto-configuration.properties
    *   bin/signserver 重新加载 1
    *   bin/signserver getstatus 简介
8.  设置示例时间戳签名者

    *   bin/signserver setproperties doc/sample-configs/qs_timestamp_configuration.properties
    *   bin/signserver 重新加载 2
    *   bin/signserver getstatus 简介
9.  测试时间戳签名者

    *   bin/signclient 时间戳[http://localhost:8080/signserver/process?workerName=TimeStampSigner](http://localhost:8080/signserver/process?workerName=TimeStampSigner)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-13T11:30:48.753

假设您希望将其用于测试，如果您乐于使用带有 /tr 开关的 signtool.exe，则不必查看 RFC，因为 openssl 为您实现了足够多的功能。只需用您喜欢的语言编写一个 HTTP POST 处理程序，将发布的数据逐字传递到“openssl ts -reply”中，然后发回 openssl TS 响应数据。这足以欺骗“signtool.exe verify /pa”，即使它没有严格遵循 RFC。

编辑：似乎开源 Java Signserver 项目为您提供了一个处理 MSauthenticode (/t) 和 rfc3161 (/tr) 时间戳的服务器。对我来说，Signserver 的配置涉及太多依赖项，因此我改用了它的 MSAuthenticode 时间戳单元测试，将一个小型 HTTP 服务器固定在测试用例上，并且几乎没有工作 - 我的 Java 技能充其量是平庸的 - 有一个正在运行的验证码时间戳服务器供开发使用，并已验证由此创建的时间戳不受[此问题](https://stackoverflow.com/questions/21930249)的影响。我不能发布源代码，但是按照这个技巧应该可以让你很快地工作。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-09T16:42:13.180

[https://PKIaaS.io](https://PKIaaS.io)提供符合 RFC 3161 和 Microsoft Authenticode 的时间戳服务器。在站点上创建证书颁发机构后，它将在“CA 服务 URL”列表中显示一个时间戳 URL，时间戳请求可以发送到该 URL 以进行签名。

# outlook - 带有 Office365 的 Outlook.Application.CreateItem 说：操作失败

> ID：11233666
> 
> 赞同：3
> 
> 时间：2012-06-27T19:34:03.983
> 
> 标签：outlook, office365

我们使用 Add-in-Express 编写了一个 Outlook 插件。代码：

```
private void CreateShowMessageUsingCreateItem(Outlook._Application OutlookApp) 
{ 
    Outlook.MailItem mail = null; 
    try 
    { 
        mail = OutlookApp.CreateItem(Outlook.OlItemType.olMailItem) as Outlook.MailItem; 
        mail.Save(); 
        mail.Display(false); 
    } 
    catch (Exception ex) 
    { 
        System.Windows.Forms.MessageBox.Show(ex.Message); 
    } 
    finally 
    { 
        if (mail != null) Marshal.ReleaseComObject(mail); 
    } 
} 
```

当 Outlook 连接到 Exchange 时工作。Outlook 连接到 Office365 时失败。错误：

```
Exception: System.Runtime.InteropServices.COMException (0x80004005): The operation failed.
   at Microsoft.Office.Interop.Outlook.ApplicationClass.CreateItem(OlItemType ItemType)
   at DocuSignInk.DSToolbox.ShowResponse(MailItem senderEmail) in C:\docusign_source\Ink_Outlook\DocuSignInk\DSToolbox.cs:line 540 
```

一些研究表明，在循环中进行这些调用时，您需要释放您的对象。但我不在一个循环中。我什至不能接到一个工作电话，所以我没有达到可以释放任何东西的地步。

使用 Wireshark 和 Charles 进行的测试表明问题出在客户端。我试图查看是否有来自服务器的更详细的错误，但根本没有到服务器的流量。

一个快速的 Python 脚本可以从命令行运行。

```
import win32com.client

outlook = win32com.client.Dispatch('Outlook.Application')
mail = outlook.CreateItem(win32com.client.constants.olMailItem)
mail.Save()
mail.Display(False) 
```

所以它必须是客户端的东西。我猜可能与线程有关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-03T18:09:42.810

如果您尚未激活 Microsoft Office（包括 Outlook），则可能会发生这种情况。

简而言之，如果测试加载项在激活检查发生之前立即运行，它们就可以工作。一旦激活检查发生，API 调用将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T16:01:00.147

首先，代码是正确的，不需要额外的发布。最明显的原因是您的 Outlook 在连接到 Exchange Online 时无法创建邮件项目。您可以使用以下 VBA 宏进行检查：

```
Public Sub CreateEmailItem()

  Dim mail As Outlook.MailItem

  Set mail = Application.CreateItem(olMailItem)
  mail.Save
  mail.Display (False)

  Set mail = Nothing

End Sub 
```

问候， Dmitry Kostochko（插件快速团队）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-02T10:33:24.960

我有与 HResult 相同的异常，即 -2147467259。
直接原因是 Outlook 弹出窗口通知其试用版或 Outlook 关闭过程，该过程在您关闭 Outlook 中的先前活动（包括通过执行上述代码显示的电子邮件）后等待处理（此过程由相应的托盘指示图标在任务栏中，直到它消失）。

您需要先关闭窗口或等待托盘图标消失，然后再执行创建新电子邮件。

# jquery - jquery ui可拖动div在动态内容更改时跳转

> ID：11233671
> 
> 赞同：0
> 
> 时间：2012-06-27T19:34:09.380
> 
> 标签：jquery, ajax, jquery-ui

我想在内容动态变化的页面中使用 jquery UI 的可拖动对象。不幸的是，当一个 div 的内容发生变化时，其他 div 也会经常移动。有没有办法防止这种行为？

理想情况下，我希望任何快照关系在内容更改后继续保持。如果做不到这一点，如果 div 位置简单地忽略其他 div 大小的变化，那就太好了。

这是一个[jsfiddle](http://jsfiddle.net/z73Nb/)，您可以在其中看到我的意思。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:58:32.720

您需要定位：绝对的 div，而不是相对的。然后，您需要将容器相对定位，以使其中的 div 具有相对于容器的位置。

CSS更新：

```
#container{
    width:600px;
    margin:auto;
    padding:20px;
    position: relative;
}
.box{
    width:50%;
    padding:20px;
    border:2px solid black;
    position:absolute;
}​ 
```

还有其他问题需要您弄清楚。在第一次渲染时，两个框将重叠。您需要预定义顶部/左侧 css 值以阻止它们最初重叠。这将通过 html（您必须事先知道高度）或 javascript（如果一次加载所有内容需要一点时间，您可能会遇到捕捉）来完成。

**警告。**我不认为绝对定位的 div 通常被认为是一种好习惯。您可能想解释您正在尝试做什么，如果适用，可以找到更好的解决方案。这个答案可能会做你想做的事，但取决于你如何使用它会决定你是否应该这样做。如果它用于布局，它可能会变得非常繁重，因为您必须重新定位所有东西以再次适应。容器内的每个 div 框都将被绝对定位并相互忽略。相对于父项定位子项（例如 div 后面的自定义按钮或菜单）是绝对定位项的一个很好的用途。

# javascript - d3.js 堆叠图

> ID：11233672
> 
> 赞同：0
> 
> 时间：2012-06-27T19:34:13.310
> 
> 标签：javascript, d3.js

我已经实现了一个 JSON 回调函数，它检索数据以基于此模板创建以下图表：http: [//mbostock.github.com/d3/ex/stack.html](http://mbostock.github.com/d3/ex/stack.html)。我认为问题在于我正在切断浏览器的某些必要信息，以便当它调用函数 transitionGroup(); 时。此代码产生的错误是它基本上找不到每个条的宽度，也找不到它们应沿轴放置的 x 值。任何帮助将非常感激！

谢谢

```
var numCases,

 arrayOfUserData,
    data,
    numLayers,
    width = 960
    margin = 20
    height = 500 - .5 - margin; 
     /*   x,
    y0,
    y1,
    y2; */

       d3.json("dataURL.com", function(json){

    arrayOfUserData = json.test_funfData;
    console.log("User Funf Data: ", arrayOfUserData);
    console.log("Phone_calls", arrayOfUserData[0].Phone_Calls);

    var numLayers = arrayOfUserData.length - 1, // number of layers
    numCases = arrayOfUserData.length, // number of users
    data = create_funf_layers(numLayers,numCases,arrayOfUserData),//d3.layout.stack()       (stream_layers(numLayers, numCases, .1)),
    color = d3.interpolateRgb("#aad", "#556");

    console.log(create_funf_layers(numLayers, numCases, arrayOfUserData));

    console.log(arrayOfUserData);
    console.log("working data: ",data);

    var margin = 20,
    width = 960,
    height = 500 - .5 - margin,
    mx = numCases,
    my = d3.max(data, function(d) {
      return d3.max(d, function(d) {
        return d.y0 + d.y;
      });
    }),
    mz = d3.max(data, function(d) {
      return d3.max(d, function(d) {
        return d.y;
      });
    });

    x = function(d) { return d.x * width / mx; },
    y0 = function(d) { return height - d.y0 * height / my; },
    y1 = function(d) { return height - (d.y + d.y0) * height / my; },
    y2 = function(d) { return d.y * height / mz; }; // or `my` to not rescale

    var vis = d3.select("#chart")
  .append("svg")
    .attr("width", width)
    .attr("height", height + margin);

    var layers = vis.selectAll("g.layer")
    .data(data)
  .enter().append("g")
    .style("fill", function(d, i) { return color(i / (numLayers - 1)); })
    .attr("class", "layer");

    var bars = layers.selectAll("g.bar")
    .data(function(d) { return d; })
  .enter().append("g")
    .attr("class", "bar")
    .attr("transform", function(d) { return "translate(" + x(d) + ",0)"; });

    bars.append("rect")
    .attr("width", x({x: .9}))
    .attr("x", 0)
    .attr("y", height)
    .attr("height", 0)
  .transition()
    .delay(function(d, i) { return i * 10; })
    .attr("y", y1)
    .attr("height", function(d) { return y0(d) - y1(d); });

    var labels = vis.selectAll("text.label")
    .data(data[0])
  .enter().append("text")
    .attr("class", "label")
    .attr("x", x)
    .attr("y", height + 6)
    .attr("dx", x({x: .45}))
    .attr("dy", ".71em")
    .attr("text-anchor", "middle")
    .text(function(d, i) { return arrayOfUserData[i].Username });

    vis.append("line")
    .attr("x1", 0)
    .attr("x2", width - x({x: .1}))
    .attr("y1", height)
    .attr("y2", height);

    });

    function transitionGroup() {
    var group = d3.selectAll("#chart");

      group.select("#group")
      .attr("class", "first active");

     group.select("#stack")
      .attr("class", "last");

     group.selectAll("g.layer rect")
    .transition()
      .duration(500)
      .delay(function(d, i) { return (i % numCases) * 10; })
      .attr("x", function(d, i) { return x({x: .9 * ~~(i / numCases) / numLayers}); })
      .attr("width", x({x: .9 / numLayers}))
      .each("end", transitionEnd);

      console.log("group",group);

      function transitionEnd() {
      d3.select(this)
      .transition()
        .duration(500)
        .attr("y", function(d) { return height - y2(d); })
        .attr("height", y2);
      }
    }  

    function transitionStack() {
    var stack = d3.select("#chart");

     stack.select("#group")
      .attr("class", "first");

     stack.select("#stack")
      .attr("class", "last active");

     stack.selectAll("g.layer rect")
    .transition()
      .duration(500)
      .delay(function(d, i) { return (i % numCases) * 10; })
      .attr("y", y1)
      .attr("height", function(d) { return y0(d) - y1(d); }) //return y0(d) - y1(d)
      .each("end", transitionEnd);

      function transitionEnd() {
     d3.select(this)
      .transition()
        .duration(500)
        .attr("x", 0)
        .attr("width", x({x: .9}));
      }  
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-09T16:47:37.383

您确定使用“create_funf_layers(...)”生成的数据格式正确吗？

它需要看起来像这样：

```
 var barArray = [
                        [
                          { "x": 0, "y": 9},
                          { "x": 1, "y": 29},
                          { "x": 2, "y": 29},
                          { "x": 3, "y": 29},
                          { "x": 4, "y": 29}
                        ], 
                        [
                          { "x": 0, "y": 19},
                          { "x": 1, "y": 49},
                          { "x": 2, "y": 29},
                          { "x": 3, "y": 29},
                          { "x": 4, "y": 29}
                        ], 
                        [
                          { "x": 0, "y": 19},
                          { "x": 1, "y": 49},
                          { "x": 2, "y": 29},
                          { "x": 3, "y": 29},
                          { "x": 4, "y": 29}
                        ],
                        [
                          { "x": 0, "y": 19},
                          { "x": 1, "y": 49},
                          { "x": 2, "y": 29},
                          { "x": 3, "y": 29},
                          { "x": 4, "y": 29}
                        ],
                        [
                          { "x": 0, "y": 19},
                          { "x": 1, "y": 49},
                          { "x": 2, "y": 29},
                          { "x": 3, "y": 29},
                          { "x": 4, "y": 29}
                        ]
                     ]; 
```

然后像这样分配数据：

```
 data = d3.layout.stack()(barArray) 
```

# vba - 如何规范化范围内列出的文件名

> ID：11233674
> 
> 赞同：10
> 
> 时间：2012-06-27T19:34:47.760
> 
> 标签：vba, excel, format, excel-2010

我在电子表格中有一个文件名列表，格式为“Smith, J. 010112.pdf”。但是，它们采用“010112.pdf”、“01.01.12.pdf”和“1.01.2012.pdf”等不同格式。我怎样才能将这些更改为“010112.pdf”的一种格式？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-28T15:33:59.087

就我个人而言，我讨厌在工作表函数可以工作的地方使用 VBA，所以我想出了一种用工作表函数来做到这一点的方法。尽管您可以将所有这些都塞进一个单元格中，但我已将其分解为单独列中的许多独立步骤，以便您可以逐步了解它是如何工作的。

为简单起见，我假设您的文件名在 A1 中

**B1** =LEN(A1)
*确定文件名的长度*

**C1** =SUBSTITUTE(A1," ","")
*将空格替换为空*

**D1** =LEN(C1)
*如果你用空替换空格，看看字符串有多长*

**E1** =B1-D1
*确定有多少个空格*

**F1** =SUBSTITUTE(A1," ",CHAR(8),E1)
*用文件名中不能出现的特殊字符替换最后一个空格*

**G1** =SEARCH(CHAR(8), F1)
*查找特殊字符。现在我们知道最后一个空格在哪里*

**H1** =LEFT(A1,G1-1)
*剥离最后一个空格之前的所有内容*

**I1** =MID(A1,G1+1,255)
*剥离最后一个空格后的所有内容*

**J1** =FIND(".",I1)
*找到第一个点*

**K1** =FIND(".",I1,J1+1)
*找到第二个点*

**L1** =FIND(".",I1,K1+1)
*找到第三个点*

**M1** =MID(I1,1,J1-1)
*求第一个数*

**N1** =MID(I1,J1+1,K1-J1-1)
*求第二个数*

**O1** =MID(I1,K1+1,L1-K1-1)
*求第三个数*

**P1** =TEXT(M1,"00")
*填充第一个数字*

**Q1** =TEXT(N1,"00")
*填充第二个数字*

**R1** =TEXT(O1,"00")
*填充第三个数字*

**S1** =IF(ISERR(K1),M1,P1&Q1&R1)
*将数字放在一起*

**T1** =H1&" "&S1&".pdf"
*放在一起*

这有点乱，因为 Excel 20 多年来没有添加一个新的字符串操作函数，所以应该很容易的事情（比如“找到最后一个空格”）需要严重的诡计。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-29T14:50:52.020

这是基于 Excel 命令和公式的简单四步方法的屏幕截图，正如对已回答帖子的评论中所建议的那样（有一些更改）...

![在此处输入图像描述](../Images/bf2689d5b5b4678bac0bcc34a9600a0e.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-06-28T08:30:00.597

下面的这个功能有效。我假设日期是`ddmmyy`格式的，但如果是，请酌情调整`mmddyy`——我无法从你的例子中看出。

```
Function FormatThis(str As String) As String

    Dim strDate As String
    Dim iDateStart As Long
    Dim iDateEnd As Long
    Dim temp As Variant

    ' Pick out the date part
    iDateStart = GetFirstNumPosition(str, False)
    iDateEnd = GetFirstNumPosition(str, True)
    strDate = Mid(str, iDateStart, iDateEnd - iDateStart + 1)

    If InStr(strDate, ".") <> 0 Then
        ' Deal with the dot delimiters in the date
        temp = Split(strDate, ".")
        strDate = Format(DateSerial( _
            CInt(temp(2)), CInt(temp(1)), CInt(temp(0))), "ddmmyy")
    Else
        ' No dot delimiters... assume date is already formatted as ddmmyy
        ' Do nothing
    End If

    ' Piece it together
    FormatThis = Left(str, iDateStart - 1) _
        & strDate & Right(str, Len(str) - iDateEnd)
End Function 
```

这使用以下辅助函数：

```
Function GetFirstNumPosition(str As String, startFromRight As Boolean) As Long
    Dim i As Long
    Dim startIndex As Long
    Dim endIndex As Long
    Dim indexStep As Integer

    If startFromRight Then
        startIndex = Len(str)
        endIndex = 1
        indexStep = -1
    Else
        startIndex = 1
        endIndex = Len(str)
        indexStep = 1
    End If

    For i = startIndex To endIndex Step indexStep
        If Mid(str, i, 1) Like "[0-9]" Then
            GetFirstNumPosition = i
            Exit For
        End If
    Next i
End Function 
```

去测试：

```
Sub tester()

    MsgBox FormatThis("Smith, J. 01.03.12.pdf")
    MsgBox FormatThis("Smith, J. 010312.pdf")
    MsgBox FormatThis("Smith, J. 1.03.12.pdf")
    MsgBox FormatThis("Smith, J. 1.3.12.pdf")

End Sub 
```

他们都回来了`"Smith, J. 010312.pdf"`。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T20:35:09.673

你不需要VBA。首先将“.”替换为空：

```
 =SUBSTITUTE(A1,".","") 
```

这会将“.PDF”更改为“PDF”，所以让我们把它放回去：

```
 =SUBSTITUTE(SUBSTITUTE(A1,".",""),"pdf",".pdf") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-27T20:33:31.120

## 免责声明：

**正如@Jean-FrançoisCorbett 所提到的，这不适用于`"Smith, J. 1.01.12.pdf"`. 我建议不要完全修改这个，而是推荐他的解决方案！**

```
Option Explicit

Function ExtractNumerals(Original As String) As String
'Pass everything up to and including ".pdf", then concatenate the result of this function with ".pdf". 
'This will not return the ".pdf" if passed, which is generally not my ideal solution, but it's a simpler form that still should get the job done. 
'If you have varying extensions, then look at the code of the test sub as a guide for how to compensate for the truncation this function creates.
Dim i As Integer
Dim bFoundFirstNum As Boolean

    For i = 1 To Len(Original)
        If IsNumeric(Mid(Original, i, 1)) Then
            bFoundFirstNum = True
            ExtractNumerals = ExtractNumerals & Mid(Original, i, 1)
        ElseIf Not bFoundFirstNum Then
            ExtractNumerals = ExtractNumerals & Mid(Original, i, 1)
        End If
    Next i

End Function 
```

我用它作为一个测试用例，它没有正确涵盖你所有的例子：

```
Sub test()

MsgBox ExtractNumerals("Smith, J. 010112.pdf") & ".pdf"

End Sub 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-28T17:47:46.540

有吗？将数据放入文本文件中，然后

```
awk -F'.' '{ if(/[0-9]+\.[0-9]+\.[0-9]+/) printf("%s., %02d%02d%02d.pdf\n", $1, $2, $3, length($4) > 2 ? substr($4,3,2) : $4); else print $0; }' your_text_file 
```

假设数据与您描述的完全一样，例如，

Smith, J. 010112.pdf
Mit, H. 01.02.12.pdf
Excel, M. 8.1.1989.pdf
Lec, X. 06.28.2012.pdf

# ios - iPhone 表格视图下拉菜单

> ID：11233675
> 
> 赞同：0
> 
> 时间：2012-06-27T19:34:51.693
> 
> 标签：ios, uitableview, uiviewcontroller

我有一个视图控制器，里面有一个表格视图和几个按钮。我想在这样的视图之上添加一个额外的表格视图（或者至少如果有人想成为我的朋友的话它会是什么样子:-)）：

![TableViewPopdown](../Images/01341923bdbce05e00200b3625ccad16.png)

我不想将其添加为子视图（如此[处](https://stackoverflow.com/questions/8060681/uitextfield-with-a-dropdown-menu-for-iphone)或[此处](https://stackoverflow.com/questions/4714138/how-to-create-iphone-toolbar-dropdown-expanded-menu)）在此处输入链接描述，因为我不想检查在我的 tableview 委托和数据源方法中使用了哪个表视图。我宁愿使用单独的视图控制器。

我不想使用选择器，因为我需要在列表中的项目中显示一些信息。

我用相应的控制器创建视图没有问题，但是如何将它添加到当前视图之上，只是隐藏它的一部分？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T16:32:01.723

Apple 有一个处理此问题的 TableView 示例代码。[https://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html%23//apple_ref/doc/uid/DTS40010139](https://developer.apple.com/library/ios/#samplecode/TableViewUpdates/Introduction/Intro.html%23//apple_ref/doc/uid/DTS40010139) 上面的 URL 是从 Apple 开发者库下载示例代码的链接。希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:43:39.097

这对于您的应用程序可能过于简单，但我发现当我不得不做类似的事情时它是有效的。

您可以将此“下拉菜单”视图控制器的视图添加到整个应用程序的主 UIWindow。您也可以在窗口上添加 UIGestureRecognizer。如果点击在视图之外，则使其消失并将其从视图层次结构中删除。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-04T13:21:07.460

最初，我只是在我的 tableview 数据源和委托方法中添加了逻辑以在两个 tableviews 之间进行 destingwish （正如上面 Scott Bossak 所建议的那样。但我已经切换到在情节提要中构建我的两个视图并像往常一样添加它们的视图控制器。但是，要呈现第二个表格视图我像这样实例化它：

```
SecondTableViewContriller *secondTVC = [self.storyboard instanciateViewControllerWithIdentifier:@"secondTVC"]; 
```

然后将其添加为子视图控制器：

```
[self addChildViewController: secondVC];
[secondVC didMoveToParentViewController:self]; 
```

然后我实现了一个协议，一旦选择了一行，就将信息传递回父视图控制器。

# html - 如何停止将单元格的高度拉伸到超出限制的图像

> ID：11233681
> 
> 赞同：0
> 
> 时间：2012-06-27T19:35:08.710
> 
> 标签：html, css

我有一个表格行，我想保持在某个高度（50px），但是当我将图像放入其中时，它会将其拉伸到完全不是我想要的高度。插入图像时，我希望它的底线与单元格的底部对齐，而图像的其余部分则漂浮在其上方。

有没有人有任何想法？

这是我的意思的一个例子

[http://jsfiddle.net/CH7Dq/](http://jsfiddle.net/CH7Dq/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:40:08.430

您的 jsfiddle 似乎无法正常工作（图像无效），但您可以尝试为表格行设置一个类，例如：

```
max-height: 50px;
overflow: hidden; 
```

这将防止内容使行大于 50px 高。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:38:31.800

如果您希望调整图像大小以使其适合在图像上设置高度；否则，你想`overflow:hidden;`在你的行上设置。

```
.nyanRow, .nyanRow img
{
    max-height: 50px;
}​ 
```

[现场演示](http://jsfiddle.net/CH7Dq/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:40:13.027

在您的 CSS 中：

```
.nyanRow, .nyanRow img
{
    max-height: 50px;
}​ 
```

那是你要找的吗？

# macos - 打开一个中间有 & 的文件 --- Mac 终端

> ID：11233682
> 
> 赞同：0
> 
> 时间：2012-06-27T19:35:09.973
> 
> 标签：macos, terminal

这简直令人抓狂——我有一个文件，中间有一个 & 符号。当我的 python 脚本打开它时，& 符号充当命令字符的结尾或其他东西......

谁能告诉我如何解决这个问题？或者更好的是，我很想知道在哪里可以找到终端的所有这些特殊字符的列表。

提前致谢

——一个麦克菜鸟

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:45:19.563

Bash 命令`&`意味着在后台执行，它将 & 解释为命令而不是命令的参数，要么将其从文件名中删除，这无论如何都很好，要么将其转义为`\&`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T19:53:03.557

您还可以用单引号将整个名称括起来。单引号可以保护文件名免受几乎所有类型的解释 - 和号、尖括号、空格等。它们通常比反斜杠更容易使用，因为您不需要专门将它们应用于每个麻烦的字符，您只需引用整个文件名。

现在，为什么这是*Python*脚本中的问题？你在做什么，shell 对文件名的处理是相关的？这听起来一点也不对。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T14:22:34.197

您可以使用转义字符 \。因此，您所要做的就是在其中添加反斜杠：
`open file&with&an&ampersand.txt`
要做到这一点：
`open file\&with\&an\&ampersand.txt`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-11T03:36:51.063

除了@Tom 的回答，我认为你必须在文件名中转义单引号，因为文件名中可以​​有单引号，你可以通过替换单引号来做到这一点，`'"'"'`请检查这个答案：[https ://stackoverflow.com/a /1250279/427622](https://stackoverflow.com/a/1250279/427622)

# php - Zend View Helper Navigation 删除活动分支，因此面包屑不显示

> ID：11233691
> 
> 赞同：3
> 
> 时间：2012-06-27T19:35:46.870
> 
> 标签：php, zend-framework, zend-view, zend-navigation

嘿，我想在我的标题中进行布局，其中有全局菜单，然后是页面菜单，然后是面包屑。为此，我主要从这个答案中拿走了：[Rendering Active Branch of Zend Navigation without Top Level](https://stackoverflow.com/questions/3496763/rendering-active-branch-of-zend-navigation-without-top-level)

这很好用，除了活动分支从注册的 Zend_Navigation_Container 中删除。

我就是这样做的：

```
<nav>
<?php 
//Create top level menu
echo $this->navigation()->menu()
        ->setUlClass('main')
        ->setMaxDepth(0)
        ->setIndent(4) 
        . PHP_EOL;

//Set to get the whole active branch
$this->navigation()
        ->setMinDepth(0)
        ->setMaxDepth(0);

//Retrive the active branch
$activeBranchTopLvl = 
    $this->navigation()->findActive(
        $this->navigation()->getContainer());

//Get the 2nd level pages for the active page
$activeBranch = $activeBranchTopLvl['page']->getPages();

$subMenu = new Zend_Navigation();

//This is the line that removes the active branch
$subMenu->setPages($activeBranch);

//Render 2nd level menu
echo $this->navigation()->menu($subMenu)
        ->setUlClass('sub')
        . PHP_EOL;

//Set up for breadcrumbs
$this->navigation()->breadcrumbs()->setMinDepth(0);
$this->navigation()->setMaxDepth(null);
$this->navigation()->breadcrumbs()->setRenderInvisible(true);

?>
</nav>
<p id="breadcrumbs"><?php echo $this->navigation()->breadcrumbs()->render(); ?></p> 
```

结果是面包屑不存在：

```
<nav>
    <ul class="main">
        <li class="active">
            <a href="/auth">Auth</a>
        </li>
    </ul>
    <ul class="sub">
        <li class="active">
            <a href="/auth/login">Log In</a>
        </li>
        <li>
            <a href="/auth/logout">Log Out</a>
        </li>
    </ul>
</nav>
<p id="breadcrumbs"></p> 
```

活动分支已被切断到顶层，这里是切断前的 Zend_Navigation_Container：

```
...
$subMenu = new Zend_Navigation();

print_r($this->navigation()->getContainer()->toArray());

//This is the line that removes the active branch
$subMenu->setPages($activeBranch);

//Render 2nd level menu
... 
```

这将输出整个容器：

```
...
Array
(
    [0] => Array
        (
            [label] => Auth
            [fragment] => 
            [id] => 
            [class] => 
            [title] => 
            [target] => 
            [accesskey] => 
            [rel] => Array
                (
                )

            [rev] => Array
                (
                )

            [order] => 
            [resource] => 
            [privilege] => 
            [active] => 
            [visible] => 1
            [type] => Zend_Navigation_Page_Mvc
            [pages] => Array
                (
                    [0] => Array
                        (
                            [label] => Log In
                            [fragment] => 
                            [id] => 
                            [class] => 
                            [title] => 
                            [target] => 
                            [accesskey] => 
                            [rel] => Array
                                (
                                )

                            [rev] => Array
                                (
                                )

                            [order] => 
                            [resource] => 
                            [privilege] => 
                            [active] => 1
                            [visible] => 1
                            [type] => Zend_Navigation_Page_Mvc
                            [pages] => Array
                                (
                                )

                            [action] => login
                            [controller] => auth
                            [module] => 
                            [params] => Array
                                (
                                )

                            [route] => 
                            [reset_params] => 1
                            [encodeUrl] => 1
                        )

                    [1] => Array
                        (
                            [label] => Log Out
                            [fragment] => 
                            [id] => 
                            [class] => 
                            [title] => 
                            [target] => 
                            [accesskey] => 
                            [rel] => Array
                                (
                                )

                            [rev] => Array
                                (
                                )

                            [order] => 
                            [resource] => 
                            [privilege] => 
                            [active] => 
                            [visible] => 1
                            [type] => Zend_Navigation_Page_Mvc
                            [pages] => Array
                                (
                                )

                            [action] => logout
                            [controller] => auth
                            [module] => 
                            [params] => Array
                                (
                                )

                            [route] => 
                            [reset_params] => 1
                            [encodeUrl] => 1
                        )

                )

            [action] => 
            [controller] => auth
            [module] => 
            [params] => Array
                (
                )

            [route] => 
            [reset_params] => 1
            [encodeUrl] => 1
        )

)
... 
```

这是在我将页面添加到新容器之后：

```
...
$subMenu = new Zend_Navigation();

//This is the line that removes the active branch
$subMenu->setPages($activeBranch);

print_r($this->navigation()->getContainer()->toArray());

//Render 2nd level menu
... 
```

输出：

```
...
Array
(
    [0] => Array
        (
            [label] => Auth
            [fragment] => 
            [id] => 
            [class] => 
            [title] => 
            [target] => 
            [accesskey] => 
            [rel] => Array
                (
                )

            [rev] => Array
                (
                )

            [order] => 
            [resource] => 
            [privilege] => 
            [active] => 
            [visible] => 1
            [type] => Zend_Navigation_Page_Mvc
            [pages] => Array
                (
                )

            [action] => 
            [controller] => auth
            [module] => 
            [params] => Array
                (
                )

            [route] => 
            [reset_params] => 1
            [encodeUrl] => 1
        )

)
... 
```

我不知道为什么在我创建新容器并将页面添加到其中时会发生这种情况，似乎它们已从我在 Zend_Registry 中的 Zend_Navigation 键下的容器中删除。

很快，如果我注释掉该行，面包屑会再次起作用并且容器保持不变，但我当然会丢失第二级菜单：

```
...
$subMenu = new Zend_Navigation();

//This is the line that removes the active branch
//$subMenu->setPages($activeBranch);

//Render 2nd level menu
... 
```

输出：

```
...
<nav>
    <ul class="main">
        <li class="active">
            <a href="/auth">Auth</a>
        </li>
    </ul>

</nav>
<p id="breadcrumbs"><a href="/auth">Auth</a> &gt; Log In</p>
... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-01T20:41:13.360

虽然不是很漂亮，但我使用了一个自定义函数来获取 Zend_Navigation_Page 对象数组，该数组返回到数组数组中，然后保持主导航容器完好无损，因此菜单级别和面包屑都可以工作。

header.phtml:

```
<nav id="global">
<?php 
//Create top level menu
echo $this->navigation()->menu()
        ->setUlClass('main navigation')
        ->setMaxDepth(0)
        ->setIndent(4)
        . PHP_EOL;

//Set to get the top level active branch
$this->navigation()
        ->setMinDepth(0)
        ->setMaxDepth(0)
        ->setRenderInvisible(true)
        ;

//Retrive the active branch
$activeBranchTopLvl = 
    $this->navigation()->findActive(
        $this->navigation()->getContainer());

//Get the 2nd level pages for the active page
$activeBranch = $activeBranchTopLvl['page']->getPages();

//create a function to make the array of page objects
//into an array of arrays, accomplished by modifying it as a reference
$arrayify = create_function(
        '&$value, $key',
        '$value = $value->toArray();'    
    );

//go through the array with the custom function
array_walk($activeBranch, $arrayify);

$subMenu = new Zend_Navigation();

//This is the line that removes the active branch
$subMenu->setPages($activeBranch);

//Render 2nd level menu
echo $this->navigation()->menu($subMenu)
        ->setUlClass('sub navigation')
        ->setRenderInvisible(false)
        . PHP_EOL;

//Set up for breadcrumbs
$this->navigation()->breadcrumbs()->setMinDepth(0);
$this->navigation()->setMaxDepth(null);
$this->navigation()->breadcrumbs()->setRenderInvisible(true);

?>
</nav>
<p id="breadcrumbs"><?php echo $this->navigation()->breadcrumbs()->render(); ?></p> 
```

# macos - safari 有缩放功能吗

> ID：11233695
> 
> 赞同：-2
> 
> 时间：2012-06-27T19:36:23.733
> 
> 标签：macos

我是 Mac 的新手（来自微软世界）。我不想在 Safari 中放大/缩小网页，但找不到方法（在 Windows 中我只需按 ctrl + 鼠标滚轮），但这似乎不起作用。我不想放大整个桌面，只是放大网页以使字体等变大一点。我缺少一些组合键吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:44:11.590

如果您使用的是 Macbook，则可以使用一些触控板动作。否则，您也可以使用 control+向上/向下滚动来放大/缩小（通过使用触控板上的两根手指或使用鼠标上的滚动按钮滚动（如果您使用的是 Mighty Mouse，那么您可以使用一个动作）用于滚动））。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:45:59.087

命令和+同时。命令和 - 将缩小。

# pointers - 派生数据类型指针？

> ID：11233696
> 
> 赞同：0
> 
> 时间：2012-06-27T19:36:23.993
> 
> 标签：pointers, types, fortran

我正在尝试将一些 C 代码转换为 Fortran 90。Fortran 中有没有办法定义派生数据类型，即指针？下面的代码是我所说的一个例子。

```
typedef struct _rkmatrix rkmatrix;
typedef rkmatrix *prkmatrix; 
```

该结构`_rkmatrix`是在这段代码之外定义的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:53:30.007

链表的示例声明：

```
type MyCustom_type
   real :: value
   type (MyCustom_type), pointer :: next => null ()
end type MyCustom_type

type (MyCustom_type), pointer :: Head_of_List 
```

# javascript - jQuery load() 替换整个页面而不是将内容加载到 div

> ID：11233697
> 
> 赞同：0
> 
> 时间：2012-06-27T19:36:30.580
> 
> 标签：javascript, jquery, ajax

当用户单击按钮时，我正在尝试加载输入网页的缩略图。缩略图本身在页面上正确生成，但是当我尝试将其加载到 div 元素中时，它会替换整个页面。目前，这只是一个概念证明。如果可以正常工作，我将切换到用户输入的 url。

这是我的点击事件代码：

```
$('#check_url').click(function() {
    $('#thumb_loader').load('load_thumb.html');
}); 
```

thumb_loader 只是一个 div。我也试过这样：

```
$('#check_url').click(function() {
    $('#thumb_loader').html($('<div>').load('load_thumb.html'));
}); 
```

这是load_thumb.html：

```
<div>
    <script type="text/javascript">
        wsr_snapshot('http://google.com', 'xxxxxxxxxxxxxx', 'Small');
    </script>
</div> 
```

wsr_snashot 是 WebSnapr。图像是在他们的服务器上生成的，并出现在此代码所在的位置。

首先，我什至可以像这样加载 javascript 吗？我以前使用 load 来放入包含 javascript 的内容，所以我怀疑是这种情况。

有人在这里看到任何问题吗？

编辑：

这是我希望加载的 div 所在的表以及用户单击以触发 AJAX 的按钮。

```
<table>
    <tr>
        <td colspan="2">
                    <div id="thumb_loader"></div>
                </td>
            </tr>
            <tr>
                <td>
                    <label>Link Title:</label>
                </td>
                <td>
                    <label>Link Description:</label>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="text" name="link_title" />
                </td>
                <td rowspan="3">
                    <textarea name="link_description"></textarea>
                </td>
            </tr>
            <tr>
                <td>
                    <label>Link URL:</label>
                </td>
                <td>

                </td>
            </tr>
            <tr>
                <td>
                    <input type="text" name="link_url" />
                </td>
                <td>

                </td>
            </tr>
            <tr>
                <td>
                    <input id="check_url" type="button" value="Check URL" />
                </td>
                <td align="right">
                    <input type="button" value="Cancel" /><input disabled="disabled" type="submit" value="Add Link" />
                </td>
            </tr>
        </table> 
```

我在代码中看不到任何其他可能相关的内容。希望这已经足够了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:49:53.013

将 JS 代码从`load_thumb`文件中取出并保存在一个新的 js 文件中，`image.js`并用于`$.getScript`在您的主页面中动态添加它：

```
$.getScript('path/image.js', function(){
   // file loaded
}); 
```

您应该将上述代码放在要运行拇指图像的主文件中。

更多的：

[http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:49:51.347

> [jQuery#load()](http://api.jquery.com/load/)：当使用没有后缀选择器表达式的 URL 调用 .load() 时，内容会在脚本被删除之前传递给 .html() 。这会在脚本块被丢弃之前执行它们。但是，如果调用 .load() 时将选择器表达式附加到 URL，则脚本会在 DOM 更新之前被剥离，因此不会执行。

如果`wsr_snapshot('http://google.com', 'xxxxxxxxxxxxxx', 'Small');`包含任何`document.write`调用，您的整个文档都会被覆盖。确保您知道该功能的作用。

* * *

更新：

根据问题的评论，这确实是问题所在。您需要弄清楚如何`wsr_snapshot()`以异步方式使用。无论如何，那是什么API？

# xml - Flex 中 XML 中的特殊字符 <、>、" 和 &

> ID：11233703
> 
> 赞同：0
> 
> 时间：2012-06-27T19:36:57.917
> 
> 标签：xml, apache-flex, character

如何在 Flex 的 XML 中使用 <、>、、& 等特殊字符？

示例：我有

```
xmlList = <permission id="1" label="true"/>; 
```

和

```
xml = <item id="1" permission="" /> 
```

我这样做：

```
xml.@permission = xmlList.toString(); 
```

但毕竟这是结果=

```
<item id="1" permission="&lt;permission id=&quot;1&quot; label=&quot;true&quot;/&gt;" /> 
```

我需要特殊字符保持原始格式。一些帮助？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T13:41:53.833

`xml.@permission = xmlList.toString()`你可以做而不是做`xml.appendChild(xmlList)`，这会导致：

```
<item id="1">
    <permission id="1" label="true"/>
</item> 
```

然后，您可以使用访问权限 xml 元素`xml.permission`

# c# - 将委托编写为 Func

> ID：11233704
> 
> 赞同：0
> 
> 时间：2012-06-27T19:37:01.020
> 
> 标签：c#, delegates, lambda

这有效：

```
 //delegate
    Parallel.For(1023456789, 1033456789, delegate(long i)
            {
                if (i % 10000000 == 0) Console.WriteLine("{0:N0}", i);
                if (IsPanDigital(i))
                {
                    list.Add(i);
                }
            }
        );

    //lambda expression
    Parallel.For(1023456789, 1033456789, i =>
            {
                if (i%10000000 == 0) Console.WriteLine("{0:N0}", i);
                if (IsPanDigital(i))
                {
                    list.Add(i);
                }
            }
        ); 
```

是否可以使用 Func 重写此逻辑？我在这里试过..不编译。

```
 var list = new List<long>();
    Parallel.For(1023456789, 1033456789, Blah(i, ref list));

public static Func<long> Blah(long i, ref List<long> list)
{
    if (i % 10000000 == 0) Console.WriteLine("{0:N0}", i);
    if (IsPanDigital(i))
    {
        list.Add(i);
    }
} 
```

我正在尝试看看它是否可以完成。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T19:43:23.777

你几乎拥有它：

```
public static void Blah(long i, ref List<long> list)
{
    if (i % 10000000 == 0) Console.WriteLine("{0:N0}", i);
    if (IsPanDigital(i))
    {
        list.Add(i);
    }
}

var list = new List<long>();
Parallel.For(1023456789, 1033456789, i => Blah(i, ref list)); 
```

（我将`Blah`' 的返回类型更改为`void`，并添加`i =>`以将其包装在 lambda 中以便它可以匹配`Action<long>`）

编辑：或更改`Blah`为`Action<long>`并进行其他一些小的重构：

```
public static Action<long> Blah(List<long> list)
{
    return i =>
    {
        if (i % 10000000 == 0) Console.WriteLine("{0:N0}", i);
        if (IsPanDigital(i))
        {
            list.Add(i);
        }
    };
}

var list = new List<long>();
Parallel.For(1023456789, 1033456789, Blah(list)); 
```

我认为第二个示例更接近您想要实现的目标。

正如@lee 指出的那样，`ref`至少在您显示的代码中，不需要该参数。 `ref`参数也不能在 lambdas 中使用，导致编译器错误，所以我将其删除。如果您确实需要使用`ref`，请使用第一个示例。

您不能使用的原因`Func`是因为 a`Func<T>`是返回`T`值的东西，并且`Parallel`正在寻找`Action<T>`返回 void 的 。

@dtb 指出了一些非常重要的事情：“请注意，从多个线程并行添加到列表中不是线程安全的。” 您可以通过在您的`list.Add`方法周围加一个锁来解决这个问题，锁定到`private static object`. 我猜你的大部分工作都是在计算`IsPanDigital`，所以我认为这是有道理的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:54:05.940

我不知道你想用它做什么，但你的功能帽子是

*   静止的
*   无效名称（int i）

这是一些编译的代码

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication1
{
    class Program
    {

        static List<long> list = new List<long>();

        static void Main(string[] args)
        {

            //delegate
            Parallel.For(1023456789, 1033456789, delegate(long i)
            {
                if (i % 10000000 == 0) Console.WriteLine("{0:N0}", i);
                if (IsPanDigital(i))
                {
                    list.Add(i);
                }
            });

            //lambda expression
            Parallel.For(1023456789, 1033456789, i =>
            {
                if (i % 10000000 == 0) Console.WriteLine("{0:N0}", i);
                if (IsPanDigital(i))
                {
                    list.Add(i);
                }
            });

            Parallel.For(1023456789, 1033456789, Blah); //other overloads do accept other Actions

        }

        private static bool IsPanDigital(long i)
        {
            return false;
        }

        public static void Blah(int i) // = Action<int i>
        {
            if (i % 10000000 == 0) Console.WriteLine("{0:N0}", i);
            if (IsPanDigital(i))
            {
                list.Add(i);
            }
        }
    }
} 
```

# mysql - 特殊字符和简单的选择查询

> ID：11233705
> 
> 赞同：1
> 
> 时间：2012-06-27T19:37:03.853
> 
> 标签：mysql, unicode, utf-8, special-characters

我遇到了一个简单的选择查询和特殊字符的问题。我想选择名字Änne。

```
SELECT *  FROM `names` WHERE `name` = 'Änne' 
```

**utf8_general_ci**

*   安妮
*   安妮

好的， ...

> utf8 通用 ci 是一个非常简单的排序规则。它所做的只是删除所有重音然后转换为大写并使用这种“基本字母”结果字母的代码进行比较。 [http://forums.mysql.com/read.php?103,187048,188748](http://forums.mysql.com/read.php?103,187048,188748)

**utf8_unicode_ci**

*   安妮
*   安妮

为什么？

**utf8_bin**

*   安妮

utf8_bin 在这一点上似乎是正确的选择，但我必须不区分大小写。

```
SELECT *  FROM `names` WHERE `name` = 'änne' 
```

**utf8_bin**

*   没有任何

有没有办法这样做？

我可以使用 php ucwords() 将第一个字母大写，但我更愿意找到一个数据库解决方案。编辑：ucwords('änne') = änne，所以我也不能使用它

* * *

```
SELECT *  FROM `names` WHERE lower(`name`) = 'änne' 
```

正在为我工​​作，因为我的数据库中的“Änne”和“änne”之间没有区别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:41:35.630

关于什么：

```
SELECT * FROM `names` WHERE upper(`name`) = upper("änne") 
```

[引用文档](http://dev.mysql.com/doc/refman/5.0/en/case-sensitivity.html)：

> 默认字符集和排序规则是 latin1 和 latin1_swedish_ci，因此默认情况下非二进制字符串比较不区分大小写。这意味着如果您使用 col_name LIKE 'a%' 进行搜索，您将获得所有以 A 或 a 开头的列值。要使此搜索区分大小写，请确保其中一个操作数具有区分大小写或二进制排序规则

这意味着区分大小写的结果是因为您设置了二进制排序规则。您可以将排序规则列设置为 utf8_general_ci 并在搜索时更改它：

```
col_name COLLATE latin1_general_cs LIKE 'a%' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:42:47.340

您的 MySQL 代码中存在错误：

```
SELECT * FROM names WHERE name = "Änne" 
```

删除表名称和字段名称周围的引号。

# xslt - 数据结构未知时排除某些子节点

> ID：11233708
> 
> 赞同：5
> 
> 时间：2012-06-27T19:37:18.567
> 
> 标签：xslt, xpath, xml-parsing

**编辑 -我已经找到了解决问题的方法，并在**[此处](https://stackoverflow.com/questions/11439072/xslt-to-process-xml-with-very-loose-standards-ead) 发布了问答。

我正在寻求处理符合美国国会图书馆 EAD 标准（在[此处](http://www.loc.gov/ead/)找到）的 XML。不幸的是，该标准在 XML 的结构方面非常松散。

例如，`<bioghist>`标签可以存在于标签内，也可以存在于`<archdesc>`标签内`<descgrp>`，或者嵌套在另一个`<bioghist>`标签内，或者是上述的组合，或者可以完全省略。我发现只选择我正在寻找的传记标签而不选择其他标签是非常困难的。

下面是我的 XSLT 可能必须处理的几种不同的 EAD XML 文档：

*第一个例子*

```
<ead>
<eadheader>
    <archdesc>
        <bioghist>one</bioghist>
        <dsc>
            <c01>
                <descgrp>
                    <bioghist>two</bioghist>
                </descgrp>
                <c02>
                    <descgrp>
                        <bioghist>
                            <bioghist>three</bioghist>
                        </bioghist>
                    </descgrp>
                </c02>
            </c01>
        </dsc>
    </archdesc>
</eadheader>
</ead> 
```

*第二个例子*

```
<ead>
<eadheader>
    <archdesc>
        <descgrp>
            <bioghist>
                <bioghist>one</bioghist>
            </bioghist>
        </descgrp>
        <dsc>
            <c01>
                <c02>
                    <descgrp>
                        <bioghist>three</bioghist>
                    </descgrp>
                </c02>
                <bioghist>two</bioghist>
            </c01>
        </dsc>
    </archdesc>
</eadheader>
</ead> 
```

*第三个例子*

```
<ead>
<eadheader>
    <archdesc>
        <descgrp>
            <bioghist>one</bioghist>
        </descgrp>
        <dsc>
            <c01>
                <c02>
                    <bioghist>three</bioghist>
                </c02>
            </c01>
        </dsc>
    </archdesc>
</eadheader>
</ead> 
```

如您所见，EAD XML 文件可能`<bioghist>`几乎在任何地方都有标签。我想产生的实际输出太复杂，无法在此处发布。上述三个 EAD 示例的输出的简化示例可能如下：

*第一个示例的输出*

```
<records>
<primary_record>
    <biography_history>first</biography_history>
</primary_record>
<child_record>
    <biography_history>second</biography_history>
</child_record>
<granchild_record>
    <biography_history>third</biography_history>
</granchild_record>
</records> 
```

*第二个示例的输出*

```
<records>
<primary_record>
    <biography_history>first</biography_history>
</primary_record>
<child_record>
    <biography_history>second</biography_history>
</child_record>
<granchild_record>
    <biography_history>third</biography_history>
</granchild_record>
</records> 
```

*第三个示例的输出*

```
<records>
<primary_record>
    <biography_history>first</biography_history>
</primary_record>
<child_record>
    <biography_history></biography_history>
</child_record>
<granchild_record>
    <biography_history>third</biography_history>
</granchild_record>
</records> 
```

如果我想提取“第一个”传记值并将其放入`<primary_record>`，我不能简单地`<xsl:apply-templates select="/ead/eadheader/archdesc/bioghist"`，因为该标签可能不是该标签的直接后代`<archdesc>`。它可能被 a`<descgrp>`或 a`<bioghist>`或其组合包裹。我不能`select="//bioghist"`，因为那会拉出所有*标签*`<bioghist>`。我什至不能，`select="//bioghist[1]"`因为那里实际上可能没有`<bioghist>`标签，然后我将拉下面的值`<c01>`，这是“第二”，应该稍后处理。

这已经是一篇很长的文章，但另一个问题是`<cxx>`节点的数量可以不受限制，最多嵌套十二层。我目前正在递归处理它们。我尝试将我当前正在处理的节点（`<c01>`例如）保存为一个名为“RN”的变量，然后运行`<xsl:apply-templates select=".//bioghist [name(..)=name($RN) or name(../..)=name($RN)]">`​​. 这适用于某些形式的 EAD，其中`<bioghist>`标签嵌套得不太深，但如果它必须处理由喜欢将标签包装在其他标签中的人创建的 EAD 文件，它将失败（根据 EAD，这完全没问题标准）。

我喜欢说什么

*   获取`<bioghist>`当前节点下方任意位置的任何标签，但
*   `<c??>`如果您点击标签，请不要深入挖掘

我希望我已经把情况说清楚了。如果我留下任何模棱两可的地方，请告诉我。您能提供的任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T03:39:44.127

**由于要求相当模糊，任何答案都只能反映其作者所做的猜测。**

这是我的：

```
<xsl:stylesheet version="1.0"
 xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:my="my:my" exclude-result-prefixes="my">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <my:names>
  <n>primary_record</n>
  <n>child_record</n>
  <n>grandchild_record</n>
 </my:names>

 <xsl:variable name="vNames" select="document('')/*/my:names/*"/>

 <xsl:template match="/">
  <xsl:apply-templates select=
   "//bioghist[following-sibling::node()[1]
                                [self::descgrp]
              ]"/>
 </xsl:template>

 <xsl:template match="bioghist">
  <xsl:variable name="vPos" select="position()"/>

  <xsl:element name="{$vNames[position() = $vPos]}">
   <xsl:value-of select="."/>
  </xsl:element>
 </xsl:template>

 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时：**

```
<ead>
    <eadheader>
        <archdesc>
            <bioghist>first</bioghist>
            <descgrp>
                <bioghist>first</bioghist>
                <bioghist>
                    <bioghist>first</bioghist></bioghist>
            </descgrp>
            <dsc>
                <c01>
                    <bioghist>second</bioghist>
                    <descgrp>
                        <bioghist>second</bioghist>
                        <bioghist>
                            <bioghist>second</bioghist></bioghist>
                    </descgrp>
                    <c02>
                        <bioghist>third</bioghist>
                        <descgrp>
                            <bioghist>third</bioghist>
                            <bioghist>
                                <bioghist>third</bioghist></bioghist>
                        </descgrp>
                    </c02>
                </c01>
            </dsc>
        </archdesc>
    </eadheader>
</ead> 
```

**产生了想要的结果**：

```
<primary_record>first</primary_record>
<child_record>second</child_record>
<grandchild_record>third</grandchild_record> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T18:38:08.697

我自己制定了一个解决方案并将其发布在此[问答中，](https://stackoverflow.com/questions/11439072/xslt-to-process-xml-with-very-loose-standards-ead)因为该解决方案非常特定于某个 XML 标准，并且似乎超出了此问题的范围。如果人们认为最好也将其发布在这里，我可以使用副本更新此答案。

# c++ - 具有“激进”易失语义的 C 和 C++ 编译器

> ID：11233709
> 
> 赞同：11
> 
> 时间：2012-06-27T19:37:20.903
> 
> 标签：c++, c, x86, volatile, smp

是否有任何 C 或 C++ 编译器为`volatile`变量实现“积极的”内存一致性模型？通过“积极的”一致性模型，我的意思是`volatile`在生成的代码中伴随所有对具有内存屏障的变量的写入。

AFAIK，这是 IA64 (Itanium) 平台上 C 或 C++ 编译器的习惯行为。x86呢？是否有一个编译器可以实现（或可以配置为实现）类似 Itanium 的方法来处理`volatile`x86 平台上的变量？

**编辑：**我正在查看 VS 2005 生成的代码（在阅读了评论之后），并且在访问`volatile`变量时我看不到任何类似于任何类型的内存屏障的东西。由于 MESIF (Intel) 和 MOESI (AMD) 缓存协议，这非常适合确保单 CPU 多核 x86 平台上的内存一致性。

但是，这在多 CPU SMP x86 平台上似乎是不够的。SMP 平台在生成的代码中需要内存屏障，以确保 CPU 之间的内存一致性。我错过了什么？当微软声称他们已经在`volatile`变量上具有获取-释放语义时，究竟是什么意思？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:33:02.163

应该注意的是，x86 CPU 既不会将加载与其他加载一起重新排序，也不会将存储与其他存储一起重新排序。因此，不需要明确的障碍。

MSVC 编译器将确保加载不会使用 volatile 加载重新排序，并且存储不会使用 volatile 存储重新排序（当然，我现在谈论的是重新排序加载和存储指令），从而保证了 volatile 加载和存储的获取和释放语义分别.

# jquery - jQuery 克隆、表单值和清空

> ID：11233711
> 
> 赞同：0
> 
> 时间：2012-06-27T19:37:24.453
> 
> 标签：jquery

我有这个 jquery tat 我正在使用小提琴（使用它与我的网站一起进行测试）。

```
$(document).ready( function() {
    var regex = /^(.*)(\d)+$/i;
    var cloneIndex = $(".clonedInput").length;

    $("button.clone").click(function(e){
        $(this).parents(".clonedInput").clone()
            .insertBefore(copy)
            .attr("id", "clonedInput" +  cloneIndex)
            .find("*").each(function() {
                var id = this.id || "";
                var match = id.match(regex) || [];
                if (match.length == 3) {
                    this.id = match[1] + (cloneIndex);
                }
        });
        cloneIndex++;
        return false;
    });

    $("button.remove").click(function(){
        $(this).children(".clonedInput").remove();
    });
}); 
```

我遇到的两个问题（可能是由一个问题引起的）是当我删除一个“克隆”字段时，它会删除除父字段之外的所有其他字段，而当我克隆一个字段时，它仅适用于父母并保留原始值...

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:40:03.940

正如我在评论中所说，我使用该[`on`](http://api.jquery.com/on/)方法来实现您想要做的事情。
该`click`方法是该方法的别名[`bind`](http://api.jquery.com/bind/)。该`bind`方法不是*动态*的，您将一个事件绑定到一个节点，仅此而已。[`live`](http://api.jquery.com/live/)和 方法是动态的，[`delegate`](http://api.jquery.com/delegate/)它们不仅将事件绑定到节点，而且检查事件和节点是否匹配（我会解释）。
最后，`on`这里的方法是为了协调这三种方法。这是我所做的：

```
// On all the <form>s
$('form')
.on(
    // When we click inside the <forms>
    'click',
    // If the clicked element match the selector, so if it has the clone class
    '.clone',
    // We do stuff
    function(){
        // Do stuff
    }); 
```

[小提琴](http://jsfiddle.net/Calou/N3FGW/3/)。_

# php - 如何在文本字段中插入逗号

> ID：11233718
> 
> 赞同：0
> 
> 时间：2012-06-27T19:38:02.907
> 
> 标签：php, mysql

```
<? echo $rows['general']; ?><? echo $rows['comment']; ?> 
```

'general' 是一个文本字段，但 'comment' 是一个复选标记项。如果我在文本字段中输入或选择复选标记，它工作正常；但是如果我填写文本表格并检查复选标记，那么我希望它们用逗号和空格分隔。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:42:06.770

```
$separation = "";
if(!empty($rows['general']) && !empty($rows['comment'])) {
     $separation = ", ";
}

echo $rows['general'] . $separation . $rows['comment']; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:41:20.987

如果你是唯一的 2 个字段：

```
echo implode(',', array_filter($rows)); 
```

否则，如果不需要，您可以使用 trim 删除 ：

```
echo trim("{$rows['general']},{$rows['comment']}", ', '); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:41:21.100

像这样的东西？

```
if (($rows['general'] != "") && ($rows['comment'] != "")) {
    echo $rows['general'] + ", "+ $rows['comment'];
} else {
    echo $rows['general'] + $rows['comment'];
} 
```

# c# - ExcelDna 支持的任何事件？

> ID：11233719
> 
> 赞同：4
> 
> 时间：2012-06-27T19:38:03.030
> 
> 标签：c#, excel, excel-dna

我想在 Excel 上初始化几个变量 Dna .dll 被加载到 Excel 中了吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T23:02:55.953

[Excel-DNA](http://exceldna.codeplex.com)将检查您的插件是否具有实现该接口的公共类，`ExcelDna.Integration.IExcelAddIn`如果有，则在加载插件时运行 AutoOpen 方法，如果用户从插件中删除插件，则运行 AutoClose 方法列表。

所以你会有类似的东西：

```
public class MyAddIn : IExcelAddIn
{
    public void AutoOpen()
    {
        // Do your initialization here...
    }

    public void AutoClose()
    {
    }
} 
```

# ruby - 在 ruby 哈希中使用正则表达式作为关键字

> ID：11233721
> 
> 赞同：3
> 
> 时间：2012-06-27T19:38:18.300
> 
> 标签：ruby, regex, hash

我有哈希映射

```
H = {
    "alc" => "AL",
    "alco" => "AL",
    "alcoh" => "AL",
    "alcohol" => "AL",
    "alcoholic" => "AL",
} 
```

现在我想用一个正则表达式来表示所有的键，比如 H={ /^alc/ => "AL" }

稍后我想使用 H["alc"] 或 H["alco"] 来检索值。但如果我使用正则表达式，我无法正确获取值。我应该怎么办？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T19:52:16.817

```
class MyHash < Hash
  def [](a)
    self.select {|k| k =~ a}.shift[1]
  end
end

result = MyHash.new

result[/^alc/] = "AL"

puts result['alcohol'] #=> 'AL' 
```

我会创建一个哈希的子类，然后重写这个方法。这样，您仍然可以将常规散列功能保留在其他地方。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T19:45:30.263

创建一个子类，继承`Hash`类并覆盖`[]`行为，以便检查它是否匹配散列中的每个正则表达式并返回相应的值。

# sublimetext2 - 如何漫游 Sublime Text 设置但不能漫游打开的文件？

> ID：11233726
> 
> 赞同：0
> 
> 时间：2012-06-27T19:38:33.543
> 
> 标签：sublimetext2

我有一个便携式安装的 sublime text 2，我使用 skydrive 在机器之间同步。通过云漫游设置很棒，但是当它漫游我打开的文件时，它会破坏事情。（因为文件不存在于机器上）我绝对希望它记住我打开的文件，但我希望它只在每台机器上执行，而不是保存在云中。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-03T17:25:08.543

排除 .sublime_session 文件`/Data/Settings`可能对你有用。事实上，我认为您可以继续排除整个`/Data/Settings`文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:47:10.630

我通过从 sublime 配置文件夹到我的 Dropbox 文件夹的硬链接来进行设置。

我有一个 powershell 脚本，除其他外，它链接各种文件：

```
# initialize the sublime preferences
md "$env:appdata/Sublime Text 2/Settings/" -ea SilentlyContinue
ln "$env:appdata/Sublime Text 2/Settings/License.sublime_license" "$HOME/Dropbox/profile/st2/Settings/License.sublime_license"
md "$env:appdata/Sublime Text 2/Installed Packages/" -ea SilentlyContinue
ln "$env:appdata/Sublime Text 2/Installed Packages/Package Control.sublime-package" "$HOME/Dropbox/profile/st2/Installed Packages/Package Control.sublime-package"
new-junction "$env:appdata/Sublime Text 2/Packages/User" "$HOME/Dropbox/profile/st2/User"

foreach ($subfolder in (gci "$HOME/Dropbox/profile/st2/Packages"))
{
    new-junction "$env:appdata/Sublime Text 2/Packages/$subfolder" "$HOME/Dropbox/profile/st2/Packages/$subfolder"
} 
```

（我认为`new-junction`是 PSCX 添加的。）

# iphone - Iphone App Release with possible Patent or Licence issues

> ID：11233728
> 
> 赞同：3
> 
> 时间：2012-06-27T19:38:46.293
> 
> 标签：iphone, ios, app-store

Me and My friend had an app idea. I have been working on the app for a while, now it is finished and we want to release it on App Store. I have never published/released an app before.

Few weeks ago another app has been released by an enterprise company and their app is too similar to our app. The way their app works is almost identical to our app. Also incredible similarities on interface.

My question is if I try to release my app, what is the possibility of rejection of the app by App store with the reason of Possible duplicate of another app. Or rejection with any reason because two apps are almost identical.

Has anyone experience that kind of situation before?

Enterprise company's App has been stated **Patent Pending** on company website.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T19:49:11.937

First and foremost, ask a lawyer if you want to be sure.

Secondly, you can submit your app and find out what Apple says. There are thousands of duplicate apps on the App store. If the app looks eerily similar to your app, just make sure whoever designed your app didn't "borrow" from their app, or work on the project, etc.

Also, patent pending means very little in the real world, as is. It just means the company applied for a patent (stating that and not having applied is illegal). When, and only when a patent is approved, can legal action be taken. And it also can't be enforced retroactively.

Lastly, be prepared. If it's a big enterprise that put the app out and they think you're copying, etc, just get your ducks in a row. Find the date you registered you app name, created documentation, all that fun stuff. And good luck.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T19:46:10.577

This probably isn't the legal advice you are looking for, but you should just submit your app even if it bares a striking resemblance to another app. If people didn't release products that are similar to another where would be no Facebook and no Android. Become successful with your product, then fight any legal battles that will follow because others are jealous of your success.

If Apple rejects it, then address the reason why it was rejected and try again.

# python - 从静态方法访问静态变量

> ID：11233729
> 
> 赞同：21
> 
> 时间：2012-06-27T19:38:48.023
> 
> 标签：python, oop, static-methods, static-variables

我想从静态方法访问静态变量：

```
#!/usr/bin/env python
class Messenger:
    name = "world"
    @staticmethod
    def get_msg(grrrr):
        return "hello " + grrrr.name

print Messenger.get_msg(Messenger) 
```

如何在不传递`grrrr`给方法的情况下做到这一点？这是真正的OOP吗？...

任何类似`name`或`self.name`似乎不起作用的东西：

```
NameError: global name 'name' is not defined 
```

和

```
NameError: global name 'self' is not defined 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-27T19:38:48.663

使用`@classmethod`而不是`@staticmethod`. 刚写完问题就找到了。

在许多语言（C++、Java 等）中，“静态”和“类”方法是同义词。[不是在 Python 中。](https://stackoverflow.com/questions/136097/what-is-the-difference-between-staticmethod-and-classmethod-in-python)

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-27T19:46:30.370

```
def get_msg():
    return "hello " + Messenger.name 
```

你不能使用 self.name 因为 self 没有定义。self 是非静态或非类方法方法的第一个参数的命名约定。它指向您调用该方法的对象。由于您的方法是静态的，因此您不需要对象来调用它。

# svn - 为单个存储库打开 SVNAutoversioning

> ID：11233736
> 
> 赞同：0
> 
> 时间：2012-06-27T19:39:41.420
> 
> 标签：svn, apache, auto-versioning

我只想为一个存储库启用 SVNAutoversioning。这行得通吗？

```
<Location /repos/>
  DAV svn
  SVNParentPath /path/to/repositories
</Location>

<Location /repos/specific_repo/>
  SVNAutoversioning on
</Location> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T09:55:01.310

不，**SVNAutoversioning**指令是对整个**Location**指令有效的 apache 指令在您的（错误的）示例中，您将拥有一个新的“Location”，其中没有任何 SVN 配置。没有从一个位置到另一个位置的参数继承。另外：apache 应该选择哪个位置来访问 SVN？`两者都是有效的。

您必须将带有自动版本控制的存储库移动到另一个位置：

```
<Location /repos/>
  DAV svn
  SVNParentPath /path/to/repositories
</Location>

<Location /repos_auto/>
  DAV svn
  SVNAutoversioning on
  SVNParentPath /path/to/auto_versioning_repositories
</Location> 
```

显然，这会破坏一些您必须修复的结帐 URL

```
svn switch --relocate 
```

对于前 SVN 1.7，分别。

```
svn relocate 
```

对于 svn 1.7 客户端

# ruby - 更新对分数没有影响（预测 API）

> ID：11233740
> 
> 赞同：23
> 
> 时间：2012-06-27T19:39:57.097
> 
> 标签：ruby, google-prediction

我正在试验`language_id.txt`Google Prediction 示例中的数据集。现在我正在尝试使用以下方法更新模型：

```
def update(label, data)
  input = @prediction.trainedmodels.update.request_schema.new
  input.label = label
  input.csv_instance = [data]
  result = @client.execute(
    :api_method => @prediction.trainedmodels.update,
    :parameters => {'id' => MODEL_ID},
    :headers => {'Content-Type' => 'application/json'},
    :body_object => input
  )
  assemble_json_body(result)
end 
```

（此方法基于一些[Google 示例代码](http://code.google.com/p/google-api-ruby-client/source/browse/prediction/prediction.rb?repo=samples)。）

我的问题是这些更新没有效果。以下是`This is a test sentence.`无论我运行多少更新的分数：

```
{
   "response":{
      "kind":"prediction#output",
      "id":"mymodel",
      "selfLink":"https://www.googleapis.com/prediction/v1.5/trainedmodels/mymodel/predict",
      "outputLabel":"English",
      "outputMulti":[
         {
            "label":"English",
            "score":0.420937
         },
         {
            "label":"French",
            "score":0.273789
         },
         {
            "label":"Spanish",
            "score":0.305274
         }
      ]
   },
   "status":"success"
} 
```

[根据“创建情绪分析模型](https://developers.google.com/prediction/docs/sentiment_analysis)”底部的免责声明，我已确保至少更新 100 次，然后再期待任何更改。首先，我尝试使用一个句子并将其更新 1000 次。其次，我尝试使用从 Simple Wikipedia 中提取的大约 150 个独特的句子，并且每个句子都更新一次。每次更新都是“成功的”：

```
{"response":{"kind":"prediction#training","id":"mymodel","selfLink":"https://www.googleapis.com/prediction/v1.5/trainedmodels/mymodel"},"status":"success"} 
```

但两种方法都没有改变我的结果。

我也尝试过使用 APIs Explorer（Prediction，v1.5）并以这种方式更新约 300 次。我的结果仍然没有区别。这些更新也是“成功的”。

```
200 OK
{
"kind": "prediction#training",
"id": "mymodel",
"selfLink": "https://www.googleapis.com/prediction/v1.5/trainedmodels/mymodel"
} 
```

我很确定模型正在接收这些更新。`get`并且`analyze`都表明该模型具有`numberInstances": "2024"`. 但奇怪的是，`list`表明该模型具有`"numberInstances": "406"`.

在这一点上，我不知道是什么导致了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-01T21:58:51.017

2019 更新

根据 Jochem Schulenklopper 的评论，该 API 已于 2018 年 4 月关闭。

> 选择迁移到谷歌云机器学习引擎的开发人员将不得不重新创建他们现有的预测 API 模型。

机器学习 API 示例： [https ://github.com/GoogleCloudPlatform/cloudml-samples](https://github.com/GoogleCloudPlatform/cloudml-samples)

# ruby-on-rails - Rails：update_attribute 调用多个控制器/模型？

> ID：11233746
> 
> 赞同：0
> 
> 时间：2012-06-27T19:40:17.317
> 
> 标签：ruby-on-rails, activerecord

在我的代码中，管理员可以添加用户并为他们分配工作。如果管理员决定删除用户，我想检查用户可能被分配到的任何工作并将其分配给管理员。由于用户删除发生在我的 user_controller 并调用 Jobs，这是最好的方法吗？如果没有，您能否建议最有效的方法是，特别是如果用户被分配到 1-N 个工作？提前致谢。

users_controller.rb

```
 def destroy
     if admin?
       jobs = Job.where("user_id = ?", params[:id]) #find jobs where user is that being deleted
       jobs.each do |job|         
        job.update_attribute(:user_id, current_user.id)  #for each job set the user_id to the admin_id
       end     
    end
    redirect_to users_url
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:07:42.973

您可以使用[#update_all](http://apidock.com/rails/ActiveRecord/Relation/update_all)方法只执行一个 SQL 查询：

在这里，我们将使用@user.id 的 user_id 更新所有作业，将 user_id 设置为 current_user.id

```
 def destroy
    @user = User.find(params[:id])
    if admin?
      Job.update_all {user_id: current_user.id}, {user_id: @user.id} 
    end
    @user.destroy
    redirect_to users_url
  end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:10:58.987

我建议`update_all`在`ActiveRecord::Relation`

在您的情况下，实现它的一种简单方法是：

`Job.where(user_id: params[:id]).update_all(user_id: current_user.id)`

请注意，在较新版本的 Rails 中（至少在尚未发布的 4 中），这将被阻止，因为批量分配是危险的。因此，您需要将该`user_id`属性“列入白名单”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:48:17.037

我将首先在实例变量中为该用户选择作业，然后循环遍历它们，将相关外键更新为管理员 user_id。然后销毁原始记录。

# r - R中逐行列出的平均值

> ID：11233750
> 
> 赞同：-1
> 
> 时间：2012-06-27T19:40:55.117
> 
> 标签：r, list, dataframe

我有一个数据框，其测量值按行存储为列表。

```
 Subject                 Measurements
1      s1  -0.4, -0.9, -1.1, -0.1,  0.1
2      s2  -1.4, -1.7, -1.7, -0.6, -1.7
3      s3  -1.0, -0.1, -0.6, -0.5, -0.1
4      s4  -0.2, -0.5, -0.2,  0.1, -0.7
5      s5   0.7,  0.2,  0.4,  0.7,  0.2
6      s6  -0.3, -0.1,  0.1, -0.2, -0.1 
```

如何平均/查找标准偏差/其他列表操作并将输出添加到数据框中的新列（例如“平均值”）

**编辑**

这是我正在使用的数据结构：

```
structure(list(Subject = structure(1:6, .Label = c("s1", "s2", 
"s3", "s4", "s5", "s6"), class = "factor"), Measurements = list(
c(-0.4, -0.9, -1.1, -0.1, 0.1), c(-1.4, -1.7, -1.7, -0.6, 
-1.7), c(-1, -0.1, -0.6, -0.5, -0.1), c(-0.2, -0.5, -0.2, 
0.1, -0.7), c(0.7, 0.2, 0.4, 0.7, 0.2), c(-0.3, -0.1, 0.1, 
-0.2, -0.1))), .Names = c("Subject", "Measurements"), row.names = c(NA, 
6L), class = "data.frame") 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:54:43.280

它看起来像是你的（df）`Measurements`中的一个矩阵。`data.frame`

```
df$means <- rowMeans(df$Measurements) 
```

对于更通用的解决方案，您可以将应用与 Margin = 1 一起用于给定函数。

```
df$SDs <- apply(df$Measurements, 1, sd) 
```

如果`Measurements`是真的`list`你会用

```
df$SDs <- lapply(df$Measurements, sd) 
```

这提供了最大的性能，但现在你的`SDs`专栏很`list`适合让它成为`vector`我想要的......

```
df$SDs <- sapply(df$Measurements, sd) 
```

（当我制作一个包含列表的 data.frame 时，它​​看起来并不像那样，所以我一开始并不认为它真的是一个列表）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-27T21:42:24.287

如果您更有效地存储数据，这将变得更加容易：

```
dat<- structure(list(Subject = structure(1:6, .Label = c("s1", "s2", 
"s3", "s4", "s5", "s6"), class = "factor"), Measurements = list(
c(-0.4, -0.9, -1.1, -0.1, 0.1), c(-1.4, -1.7, -1.7, -0.6, 
-1.7), c(-1, -0.1, -0.6, -0.5, -0.1), c(-0.2, -0.5, -0.2, 
0.1, -0.7), c(0.7, 0.2, 0.4, 0.7, 0.2), c(-0.3, -0.1, 0.1, 
-0.2, -0.1))), .Names = c("Subject", "Measurements"), row.names = c(NA, 
6L), class = "data.frame")

> dat <- data.frame(subject = dat$Subject,do.call(rbind,dat$Meas))
> dat$means <- apply(dat[,-1],1,mean)
> dat
  subject   X1   X2   X3   X4   X5 means
1      s1 -0.4 -0.9 -1.1 -0.1  0.1 -0.48
2      s2 -1.4 -1.7 -1.7 -0.6 -1.7 -1.42
3      s3 -1.0 -0.1 -0.6 -0.5 -0.1 -0.46
4      s4 -0.2 -0.5 -0.2  0.1 -0.7 -0.30
5      s5  0.7  0.2  0.4  0.7  0.2  0.44
6      s6 -0.3 -0.1  0.1 -0.2 -0.1 -0.12 
```

一旦您在自己的列中进行了每个测量，您就可以简单地使用`apply`（或`rowMeans`）os 一些类似的功能。

# sql-server - 前 10 名的 SQL 中的 While 循环

> ID：11233753
> 
> 赞同：0
> 
> 时间：2012-06-27T19:41:09.703
> 
> 标签：sql-server, sql-server-2008

现在，我正在尝试通过循环从表中获取前 10 个数据。

```
 Select ClientUserName, DestHost, count(DestHost) counts  from  #ProxyLog_record  
 where ClientUserName =(Select top 1 ClientUserName from #ProxyLog_count_2) 
 Group by ClientUserName, DestHost order by counts desc 
```

这仅从 clientusername 获取顶级数据我如何将它循环到它将获得第一个、第二个第三个、....第十个数据的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:43:50.617

```
 Group by ClientUserName, DestHost order by counts desc LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T19:47:26.260

您不能循环，但您可以执行以下操作并更改要在子查询中选择的记录数：

```
 Select ClientUserName, DestHost, count(DestHost) counts  from  #ProxyLog_record  
     where ClientUserName  in (Select top 10 ClientUserName from #ProxyLog_count_2) 
     Group by ClientUserName, DestHost order by counts desc 
```

# c++ - 合并头文件和cpp文件

> ID：11233756
> 
> 赞同：1
> 
> 时间：2012-06-27T19:41:16.557
> 
> 标签：c++, header-files

我正在开发一个 C++ 项目，在该项目中，我将每个类都实现为单独的 .h 文件和 .cpp 文件。我发现这不值得麻烦。- 我在两个文件之间来回编辑 - 它给我带来了很多意想不到的头痛（必须添加预声明，显式导出模板类） - 我没有看到直接的好处，我的代码库肯定会保持相对较小（比如 < 10,000 行代码）并且编译时间并不长。

我的问题有两个

a) 将实现和原型分开是否有我可能错过的好处？

b) 如果没有，是否有任何免费工具或 ide 能够将 cpp 文件合并回头文件？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T19:45:38.640

不要这样做。对于大多数简单的类，如果您想公开该类以在其他地方使用，您应该始终* 在`.h`头文件中包含类的声明，并在文件中包含定义（代码）`.cpp`。

`.h`然后，您可以在要使用该类的任何位置包含该文件（即实例化它）。但是，链接器负责在每个`.cpp`单独编译后“链接”代码。

我对你的问题是，“否则你会怎么做？” 我看到许多 n00b 犯的一个错误是`#include "foo.c`. 然后发生的事情是，您不仅失去了独立编译，而且在链接时遇到了问题，因为*同一个类*有多个定义。请记住，当您`#include`创建一个文件时，它实际上会在您所说的那个文件的正文中扑通一声。

[*] 这个规则当然有例外：

一个例外是*模板类*。这些必须全部在头文件中。原因是在使用类型参数实例化类之前不会生成实际代码。然后，编译器本质上是在需要的地方用指定的类型“填充”类的主体。由于直到那时才知道类型，因此*无法*独立编译并在以后链接起来。

# gcc - 如何使用特定版本的 python 编译 python 库？

> ID：11233761
> 
> 赞同：0
> 
> 时间：2012-06-27T19:41:28.970
> 
> 标签：gcc, python-3.x

我正在尝试使用 python 3.2 绑定构建cwiid 以**利用**[Blender](https://github.com/abstrakraft/cwiid) 2.63**中**的**Wiimote**。我的操作系统是 ubuntu 12.04。我设置了**virtualenv**来为构建提供正确的 python 版本。这是我到目前为止所做的（bash-shell 记录）：

 ******```
# Set up virtualenv with python3.2
sudo apt-get install python-setuptools  
sudo easy_install virtualenv  
virtualenv -p python3.2 --no-site-packages ~/env/cwiid_for_blender  
# to activate, type this:  
source ~/env/cwiid_for_blender/bin/activate  
python --version # returns "Python 3.2.3"  

# Build cwiid
# prerequisites  
sudo apt-get install bison bluez libbluetooth3 libbluetooth-dev libgtk2.0-0 libgtk2.0-dev  
# download and compile sources of cwiid  
mkdir -p ~/Downloads/cwiid  
cd ~/Downloads/cwiid  
git clone https://github.com/abstrakraft/cwiid.git  
cd cwiid  
source ~/env/cwiid_for_blender/bin/activate  
aclocal  
autoconf  
./configure  
make 
```

这失败了，因为[cwiid](https://github.com/abstrakraft/cwiid)通常是针对 python 2.7 构建的。在配置脚本中有这一行：

```
PYTHON_VERSION=`$PYTHON -c 'import sys; print sys.version[:3]'` 
```

将其更改为 3.2 语​​法后，如下所示：

```
PYTHON_VERSION=`$PYTHON -c 'import sys; print( sys.version[:3] )'` 
```

make 脚本开始编译，但在遇到以下行时失败：

```
gcc -L../libcwiid -rdynamic -o wminput main.o conf.o c_plugin.o uinput.o action_enum.o util.o py_plugin.o parser.o lexer.o -lcwiid -lbluetooth -ldl -lpthread -lpython3.2
/usr/bin/ld: cannot find -lpython3.2 
```

`mu`有趣的是，如果我附加到该行，脚本能够继续到下一个错误：

```
gcc -L../libcwiid -rdynamic -o wminput main.o conf.o c_plugin.o uinput.o action_enum.o util.o py_plugin.o parser.o lexer.o -lcwiid -lbluetooth -ldl -lpthread -lpython3.2mu 
```

我不明白 gcc 在哪里搜索 3.2 库以及如何指定它。具体来说，我不明白是否`configure`必须修复脚本，或者我是否必须改变我的环境来解决这个问题。到目前为止其他人的建议：

*   从`python3.2->python3.2mu`. （但在哪里？尝试了几个位置，没有一个工作）
*   添加带有要查找的目录的文件`/etd/ld.so.conf.d/`

那么，**gcc 是如何找到构建 libcwiid 所需的 python3.2 库的呢？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T10:17:25.723

首先，确保您已经安装了 Python 开发库。

```
sudo apt-get install python3.2-dev 
```

其次，我不明白为什么它首先需要 Python 库来构建它。libcwiid 似乎不包含任何 Python 或包含 Python 库。我建议你删除 -lpython3.2 看看会发生什么。包装 libcwiid 的 Python 模块当然需要 Python，但这是另一个问题。

另请注意，cwiid 显然不支持 Python 3。但这只是一个问题，如果你想要 cwiid Python 模块，即如果你想从 Python 3 使用它。但是，你在编译 libcwiid 时遇到的错误是，这是一个 C 库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-08T17:40:56.027

过了一会儿，很明显`configure`脚本没有正确解释 python 版本。这出现在 Makefile 中，因为它们包含指向 2.7 版的直接链接。在更正 make 文件后，编译继续解决真正的问题。所以现在，我正在尝试移植真正的代码。******

# linux - 将虚拟接口的ip地址绑定到ftp客户端

> ID：11233764
> 
> 赞同：1
> 
> 时间：2012-06-27T19:41:46.957
> 
> 标签：linux, ftp, ip, debian

我在我的 debian 盒子的接口文件中添加了 eth0:1 和一个 ip。现在的问题是我希望我的 ftp 客户端（即 lftp）使用新的 IP 地址进行连接。使用特定接口进行通信的指令是什么？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T22:27:17.420

在`lftp`将`net:socket-bind-ipv4`选项设置为您希望客户端使用的本地 IP 地址：

```
 set net:socket-bind-ipv4 a.b.c.d 
```

您可以将其直接输入到客户端，但如果您要定期执行此操作，那么将其添加到您的`$HOME/.lftprc`或`$HOME/.lftp/rc`文件中会更有意义。

如果您使用的是 IPv6，那么还有一个`net:socket-bind-ipv6`选项。

# javascript - 协议不匹配的最佳方法/解决方法 - http/https 之间的通信

> ID：11233769
> 
> 赞同：5
> 
> 时间：2012-06-27T19:42:23.410
> 
> 标签：javascript, https, same-origin-policy, postmessage

我看过几种方法，但我不确定哪种方法最好。

我有 2 个域 - 完全相同，只是协议不同。

父页面开启`http`，子 iframe 开启`https`。

我需要将 3 个变量从孩子发送给父母。

什么以最简单的方式实现这一点？`postMessage`与 IE7 后备？如：[http ://benalman.com/projects/jquery-postmessage-plugin/](http://benalman.com/projects/jquery-postmessage-plugin/)

或者`jsonp`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T15:10:49.157

我肯定会去`postMessage`。

看看这个[包装器](http://postmessage.freebaseapps.com/)。该页面上的第五个示例将向您展示如何将数据从 iframe 传递到父窗口。

# mysql - 如何使用 WHERE id IN(1,2,3,4) 获得均匀分布

> ID：11233770
> 
> 赞同：3
> 
> 时间：2012-06-27T19:42:23.993
> 
> 标签：mysql, sql

`users`我有一个查询正在从表中提取喜欢特定对象的用户。评级存储在`ratings`表格中。到目前为止，我提出的查询如下所示：

```
SELECT user.id, user.name, user.image
  FROM users
LEFT JOIN ratings ON ratings.userid = user.id
WHERE rating.rating > 0
  AND rating.objectId IN (1,2,3,4) 
```

`LIMIT`当每个 ID 只需要 3 个左右的结果时，我希望能够在此查询上添加一个，以避免返回所有结果。如果我只是举个`LIMIT 12`例子，我可能会得到 8 条带有一个 id 的记录，而其他的则各有 1 条或 2 条——即，ID 之间的分布不均匀。

有没有办法编写这个查询以保证（假设一个对象至少被“喜欢”了三次），我得到列表中每个 id 的三个结果？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:54:32.497

通过设置行号 whit 变量，然后过滤该结果以仅显示第 1-3 行应该有效

```
SET @last_objectId = 0;
SET @count_objectId = 0;
SELECT id, name, image FROM (
SELECT
 user.id,
 user.name,
 user.image,
 @count_objectId := IF(@last_objectId = rating.objectId, @count_objectId, 0) + 1 AS rating_row_number,
 @last_objectId := rating.objectId
FROM users
LEFT JOIN ratings ON (ratings.userid = user.id)
WHERE
 rating.rating > 0 AND
 rating.objectId IN (1,2,3,4)
ORDER BY rating.objectId
) AS subquery WHERE rating_row_number <= 3; 
```

# android - Activity结果的返回涉及哪些变量？

> ID：11233771
> 
> 赞同：0
> 
> 时间：2012-06-27T19:42:33.040
> 
> 标签：android, android-intent, android-activity

在使用 startActivityForResult() 启动的某些活动上调用 setResult() 和 finish() 时，我看到不一致的行为。从这里的其他问题来看，似乎有多种可能导致意外行为的原因。鉴于活动可能会为结果本身启动活动，我在调试时需要查看哪些变量以全面了解在为结果启动活动并将其发回的过程中发生的情况？

具体来说，我想知道如何查看：

*   当结果返回到起始活动时将如何处理
*   调用完成（）时将发送结果的位置（以及是否）
*   当前设置的结果是什么

我已经在看：

```
mResultCode
mResultData
mParent 
```

但他们自己没有提供足够的信息。我想要我的应用程序结果机制的整个状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:48:59.143

**请求代码 ...**

当您调用[startActivityForResult()](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)时，您会提供一个请求代码。请求代码允许您将特定活动结果与特定启动请求相匹配。具体来说，在[onActivityResult()](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)中，您将收到一个允许您进行比较的请求代码。

**结果代码...**

结果代码只是从启动的活动到启动活动的粗粒度消息传递的一种方式。也就是说，启动的活动可以通过调用[setResult(int)设置结果代码，该代码在](http://developer.android.com/reference/android/app/Activity.html#setResult%28int%29)[onActivityResult()](http://developer.android.com/reference/android/app/Activity.html#onActivityResult%28int,%20int,%20android.content.Intent%29)中返回给启动活动。同样，这通常用于执行粗粒度的消息传递，如成功或失败。

**结果数据...**

最后，要传回更细粒度的数据，请使用[setResult(int, Intent) 的变体](http://developer.android.com/reference/android/app/Activity.html#setResult%28int,%20android.content.Intent%29)，它同时接受结果代码和意图。当您构建意图时，添加您希望传递回起始活动的任何额外内容。

# android - 为什么客户会遇到我们的 Android 应用程序连接问题，而不是其他应用程序？

> ID：11233774
> 
> 赞同：0
> 
> 时间：2012-06-27T19:42:39.617
> 
> 标签：android, permissions, connection

我们在 Google Play 上有一些 Android 应用程序，在 Apple App Store 上有一些 iPhone 应用程序。

我们收到一些零星的报告，称我们的 Android 应用程序存在连接问题（在所有版本中，您要做的第一件事就是使用用户名/密码登录）。对我们系统的调用是使用 SOAP Web 服务进行的。

至少有一次我们被告知，对 Android 应用程序有问题的同一个人可以从 iPhone 上正常登录。此人（和其他人）还报告说，他们的 Android 手机上的其他 Android 应用程序可以正常访问互联网。

我们没有在我们的日志中看到失败的尝试，因此似乎连接尝试甚至没有对我们进行。

但是，假设没有一些用户错误并且这些报告是准确的，那么 Android 手机是否有任何理由阻止我们的应用访问互联网，而不是其他应用？如果发生某种授予权限的事情（我们`android.permission.INTERNET`在清单中有，就像我说的，它对大多数人都有效）为什么它不会影响用户手机上的更多应用程序？

# database - 如何检查现有文件的条目，以免重写数据

> ID：11233780
> 
> 赞同：0
> 
> 时间：2012-06-27T19:43:03.410
> 
> 标签：database, vbscript

我创建的是一个脚本，它从计算机中提取戴尔服务代码、用户名和计算机名，并将该信息编译成 .csv 文件。该脚本将通过 Active Directory 登录脚本实现，因此最终用户无需执行任何操作。

我遇到的问题是，每次有人登录时，它都会收集他们的信息，并将其添加到列表中。这意味着我的名单可能只有两个人一遍又一遍地登录他们的电脑。

我希望脚本在 .csv 文件中搜索收集的特定数据，如果存在此数据，则不要输入它。

我到目前为止的代码是这样的：

```
dim goFS, tsUsers, bFound
set goFS = createObject("Scripting.FileSystemObject")
set tsUsers = goFS.OpenTextFile("\\xxx\Gathering\DataLog.txt", 2, True)
bFound = False
Do Until tsUsers.AtEndOfStream
   If 1 = Instr(tsUsers.ReadLine(), sUser) Then
     bFound = True
     WScript.Quit (0)
      Exit Do
   End If
Loop
tsUsers.Close
If Not bFound Then
   Set tsUsers = goFS.OpenTextFile("\\xxx\Gathering\DataLog.txt", 8, True)
   tsUsers.WriteLine sUser
   tsUsers.Close
End If

'Get Dell Service Tag Info
set ProSet = GetObject("winmgmts:").InstancesOf("Win32_BIOS")
Set ProSet1 = GetObject("winmgmts:").InstancesOf("Win32_SystemEnclosure")
For each Pro in ProSet
  For each Pro1 in ProSet1
    ServiceTag=Pro.SerialNumber
    exit for
  Next
  exit for
Next

'get username and computername, could also be asked in a batch
Set oShell     = WScript.CreateObject("WScript.Shell")
Set oShellEnv  = oShell.Environment("Process")
sComputerName  = oShellEnv("ComputerName")
sUsername      = oShellEnv("username")

dim filesys, filetxt, getname, path
Set filesys = CreateObject("Scripting.FileSystemObject")
Set filetxt = filesys.OpenTextFile("\\xx\Gathering\DataLog.csv", 8, True, -2)
path = filesys.GetAbsolutePathName("\\xx\Gathering\DataLog.csv")
getname = filesys.GetFileName(path)
filetxt.WriteLine sUsername & ", " & sComputerName & ", " & ServiceTag
filetxt.Close 
```

我遇到的问题是运行时错误：位置（第 5 行，字符 1）中的 800A0036（错误文件模式）。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:59:14.357

您的

```
set tsUsers = goFS.OpenTextFile("\\xxx\Gathering\DataLog.txt", 2, True) 
```

打开文件 ForWriting。

参照。[上周也一样](https://stackoverflow.com/a/11141008/603855)

# iphone - 如何使用 Accelerate 框架从矩阵中找到特征值和特征向量？

> ID：11233782
> 
> 赞同：2
> 
> 时间：2012-06-27T19:43:22.467
> 
> 标签：iphone, ios, linear-algebra, accelerate-framework

我有一个用 C 语言编写的函数来计算特征值和特征向量，但它需要大量的 CPU 时间，因为我多次调用这个函数作为另一个算法的一部分。根据 Apple 的说法，[Accelerate 框架](https://developer.apple.com/performance/accelerateframework.html)可用于使用 BLAS 和 LAPACK 非常快速地从矩阵中找到特征值。

由于我是 Accelerate 框架的新手，所以我应该使用哪些函数来查找方阵的特征值和特征向量？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T16:48:41.890

这在一定程度上取决于您希望分解的矩阵的特征。Lapack 对于对称/厄米特矩阵、带状对角矩阵或一般矩阵有不同的例程。如果您有一个通用矩阵（没有特定结构），您将需要使用广义 Schur 分解例程。例程分为单精度和双精度以及具有实数或复数元素的矩阵 - 就像所有 Lapack 一样。

通用特征问题求解器例程命名为：***SGEEV CGEEV DGEEV ZGEEV***其中 S = 单精度实数，C = 单精度复数，D = 双精度实数，Z = 双精度复数。

IBM 有一个很好的 lapack 在线参考资料，[这里](http://publib.boulder.ibm.com/infocenter/clresctr/vxrx/index.jsp?topic=/com.ibm.cluster.essl.v5r1.essl100.doc/am501_hsgeev.html)有一个描述上述例程的链接。

祝你好运！

保罗

# javascript - See if a server port is open using JavaScript

> ID：11233787
> 
> 赞同：1
> 
> 时间：2012-06-27T19:43:39.040
> 
> 标签：javascript, web, minecraft

I can't find any information on this and I was wondering if this was even possible? I have a Minecraft server that I want to ping to find out if it is on at a specific port. I want to do this in Javascript but from what I can see that you cant really do that or it hasn't been done before. Are there any plugins or 3rd party Javascript vendors that can accomplish this?

For example:

```
mc.mydomain.net:25565 
```

Javascript pings the server and it changes the text from online to offline, depending on if it can connect.

```
Server is: Online 
```

Or

```
Server is: Offline 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:46:11.400

If it happened that the Minecraft server actually speak plains HTTP on that port (which is unlikely), then it could work.

Otherwise, no, it can't be done, at least not with current specifications.

Browsers can only talk HTTP (i.e. to web servers) and WebSockets, and the SSL variants thereof. I don't know whether the upcoming WebRTC protocol would help.

The alternative is to use Flash - AIUI that has a plain TCP socket capability that can be exposed to JS code that might help in these circumstances.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T20:13:25.103

First of all you can't ping ports, as Ping is using ICMP which doesn't have the concept of ports. Ports belong to the transport layer protocols like TCP and UDP.

So, a solution can be the use of a server side language like PHP to perform the query and then you can make an AJAX request to this page in order to retrieve the result. Here is an example in PHP:

```
<?php                                                                                                                                       
  error_reporting(E_ERROR);                                                                                                                   
  $fp = fsockopen('mc.mydomain.net', 25565, $errno, $errstr, 1);                                                                                
  if (!$fp) {                                                                                                                                 
    echo 'no';                                                                                                                                
  } else {                                                                                                                                    
    echo 'yes';                                                                                                                               
    fclose($fp);                                                                                                                              
  }                                                                                                                                           
?> 
```

Moreover, to keep your requests fast, you can imagine to cache the result of the above query into a file or a database and refresh its value every couple of minutes (for example by using a cron job) and then serve the cached result to the AJAX request.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T20:19:25.893

From [http://www.gnucitizen.org/static/blog/2006/08/jsportscanner.js](http://www.gnucitizen.org/static/blog/2006/08/jsportscanner.js) , the first hit when you search for "javascript portscan":

```
var AttackAPI = {
    version: '0.1',
    author: 'Petko Petkov (architect)',
    homepage: 'http://www.gnucitizen.org'};

AttackAPI.PortScanner = {};
AttackAPI.PortScanner.scanPort = function (callback, target, port, timeout) {
    var timeout = (timeout == null)?100:timeout;
    var img = new Image();

    img.onerror = function () {
        if (!img) return;
        img = undefined;
        callback(target, port, 'open');
    };

    img.onload = img.onerror;
    img.src = 'http://' + target + ':' + port;

    setTimeout(function () {
        if (!img) return;
        img = undefined;
        callback(target, port, 'closed');
    }, timeout);
};
AttackAPI.PortScanner.scanTarget = function (callback, target, ports, timeout)
{
    for (index = 0; index < ports.length; index++)
        AttackAPI.PortScanner.scanPort(callback, target, ports[index], timeout);
}; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T19:47:38.390

You can only send HTTP(S) or WS(S) request to the domain you are on with JavaScript. A [Ping](http://en.wikipedia.org/wiki/Ping) is much too low-level.

If the minecraft server supports HTTP, you can try to use that.

# vb.net - VB.Net - 使用“以管理员身份运行”的进程执行 vbscript

> ID：11233788
> 
> 赞同：0
> 
> 时间：2012-06-27T19:43:40.127
> 
> 标签：vb.net, process, vbscript

我有一个要在我的 vb.net 应用程序中运行的 vbscript 文件。在应用程序中，脚本“必须”使用进程。原因是它实际上是从 Windows 进程中调用的。为了让我手动执行 vbscript，我必须右键单击快捷方式并选择“以管理员身份运行”。

如何使用 vb.net 模拟这个？目前执行有效，因为我只用它创建了一个文本文件对其进行了测试。另外，我想假设用户在管理员组中，并且不希望他们每次都必须登录，因为它将每分钟执行一次。

我的代码：

```
Dim foo As New System.Diagnostics.Process
foo.StartInfo.WorkingDirectory = "c:\"
foo.StartInfo.RedirectStandardOutput = True
foo.StartInfo.FileName = "cmd.exe"
foo.StartInfo.Arguments = "%comspec% /C cscript.exe //B //Nologo C:\aaa\test.vbs"
foo.StartInfo.UseShellExecute = False
foo.StartInfo.CreateNoWindow = True
foo.Start()
foo.WaitForExit()
foo.Dispose() 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:15:41.060

ProcessStartInfo 类有两个属性，可用于定义将运行脚本的用户名

[ProcessStartInfo.UserName](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.username.aspx)
[ProcessStartInfo.Password](http://msdn.microsoft.com/en-us/library/system.diagnostics.processstartinfo.password)

请注意来自 MSDN： `The WorkingDirectory property must be set if UserName and Password are provided. If the property is not set, the default working directory is %SYSTEMROOT%\system32.`

Password 属性的类型为 SecureString。这个类需要一个特殊的初始化代码，如下所示：

```
 ' Of course doing this will render the secure string totally 'insecure'
  Dim pass As String = "Password"
  Dim passString As SecureString = New SecureString()
  For Each c As Char In pass
     passString.AppendChar(ch)
  Next 
```

所以你的代码可以这样改变

```
Dim foo As New System.Diagnostics.Process   
foo.StartInfo.WorkingDirectory = "c:\"   
foo.StartInfo.RedirectStandardOutput = True   
foo.StartInfo.FileName = "cmd.exe"   
foo.StartInfo.Arguments = "%comspec% /C cscript.exe //B //Nologo C:\aaa\test.vbs"   
foo.StartInfo.UseShellExecute = False   
foo.StartInfo.CreateNoWindow = True   
foo.StartInfo.UserName = "administrator"
foo.StartInfo.Password = passString
foo.Start()   
foo.WaitForExit()   
foo.Dispose() 
```

# xcode - 避免 Core Data fetch 的重复结果

> ID：11233789
> 
> 赞同：2
> 
> 时间：2012-06-27T19:43:40.467
> 
> 标签：xcode, core-data, nspredicate, nsmanagedobject, nsfetchrequest

我有一个 CoreDataTableViewController 的子类（斯坦福大学的 UITableViewController 圆顶的子类，用于链接 CoreData 和 TableViews）。在这个类上，我想执行一个 fecth，按一个名为“定义”的属性进行排序，执行它的代码如下：

```
- (void)setupFetchedResultsController{

    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:self.entity];

    request.propertiesToFetch=[NSArray arrayWithObject:@"definition"];
    request.returnsDistinctResults=YES;

    NSPredicate *predicate1 = [NSPredicate predicateWithFormat:@"%K != nil", @"definition"]; 
    NSPredicate *predicate2 = [NSPredicate predicateWithFormat:@"%K != ''", @"definition"];
    NSPredicate *predicate3=  [NSPredicate predicateWithFormat:@"%K contains[cd] %@", @"definition", self.seachBar.text];

    NSArray *prepredicateArray;

    if ([self.seachBar.text length]) {
         prepredicateArray = [NSArray arrayWithObjects:predicate1, predicate2, predicate3,nil];

    }else {
         prepredicateArray = [NSArray arrayWithObjects:predicate1, predicate2,nil];

    }

    request.predicate=[NSCompoundPredicate andPredicateWithSubpredicates:prepredicateArray];
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"definition" ascending:YES ]];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];

    [self performFetch];

} 
```

如果我理解正确，设置 request.returnsDistinctResults=YES; 应避免获取重复项。但是它不起作用，我看到此属性值的重复项。

那里有我想念的东西吗？我会很感激那里的一些指示。先感谢您。

**编辑**：如果有人在这里遇到同样的问题，在应用大卫的回答后，生成的 fetchedResultsController 只是一个 NSDIctionary ，它的对象只有请求的值，仅用于显示目的就很好了。为了在单元格标签上显示结果，我在 cellForRowAtIndexPath 中完成的一件事是：

**之前**：

```
HNMR *hnmr = [self.fetchedResultsController objectAtIndexPath:indexPath];
cell.textLabel.text=hnmr.definition; 
```

**之后**：

```
cell.textLabel.text=[[self.fetchedResultsController objectAtIndexPath:indexPath] valueForKey:@"definition"]; 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-27T20:04:45.107

从以下[文档`returnsDistinctResults`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html#//apple_ref/occ/instm/NSFetchRequest/returnsDistinctResults)：

> 仅当为 设置了值时才使用此值`propertiesToFetch`。

从以下[文档`propertiesToFetch`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html#//apple_ref/occ/instm/NSFetchRequest/setPropertiesToFetch:)：

> 此值仅在`resultType`设置为 时使用`NSDictionaryResultType`。

从以下[文档`resultType`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CoreDataFramework/Classes/NSFetchRequest_Class/NSFetchRequest.html#//apple_ref/occ/instm/NSFetchRequest/resultType)：

> 默认值为`NSManagedObjectResultType`。

* * *

这一切都告诉我`propertiesToFetch`被忽略了，因为你没有设置`resultType`自己和默认它来返回托管对象而不是字典。由于`propertiesToFetch`被忽略`returnsDistinctResults`，因此也被忽略，因此您仍然会得到重复。

尝试将结果类型设置为返回字典而不是托管对象。

```
request.resultType = NSDictionaryResultType; 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-27T20:08:44.890

除了**David Rönnqvist**的回答之外，我还建议了一个有用的链接（带有示例），用于使用 Core Data 选择不同的值：

[核心数据如何做一个选择不同](http://felipecypriano.com/2011/09/21/core-data-how-to-do-a-select-distinct/)

希望有帮助。

# html - html5 应用程序和客户端协商输入功能的标准？

> ID：11233791
> 
> 赞同：0
> 
> 时间：2012-06-27T19:43:43.623
> 
> 标签：html, standards, w3c, web-standards, multi-touch

实际示例：假设您编写了[这个 html“应用程序”](http://openlayers.org/dev/examples/mobile-jq.html#mappage)并想知道客户端是否支持多点触控输入。如果是这样，按钮就会变成消耗品，因此可能会被隐藏——这在小屏幕上是非常可取的。当然，在安装后让用户通过多点触控功能测试是一种选择，但这是一个古怪的解决方案。

了解当前关于触摸事件的[w3c 候选推荐](http://www.w3.org/TR/touch-events/)以及应用清单（仅处理缓存要求）之类的内容，我想问一下：

*   是否有任何标准（=非专有），甚至作为允许在应用程序和客户端之间协商触摸输入功能的机制的草案或建议？
*   如果不是 - 这将是适当的“树吠”，以便引发与正确的组织/人员的讨论（或者它可能已经被讨论过并且有充分的理由被拒绝）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T19:37:10.807

设备 API 工作组将是本次讨论的最合适场所。以下是他们的工作清单：

```
2016-10-18 振动API（第二版）推荐
每晚草稿

2015-02-10 振动API推荐
每晚草稿

2012-10-02 Web API Design Cookbook Group Note

2012-07-03 Web 应用程序隐私最佳实践小组说明

2011-12-01 家庭组网场景组注意事项要求

2011-03-17 设备 API 访问控制用例和需求组说明

2010-06-29 设备 API 隐私要求组说明

2009-10-15 设备 API 要求组说明
草稿

2016-12-12 MediaStream 图像采集工作草案
每晚草稿

2016-12-06 MediaStream录制工作草案
每晚草稿

2016-11-02 音频输出设备API工作草案
每晚草稿

2016-09-13 加速度传感器工作草案
每晚草稿

2016-09-13 陀螺仪传感器工作草案
每晚草稿

2016-09-13 磁力计传感器工作草案
每晚草稿

2016-08-30 环境光传感器工作草案
每晚草稿

2016-08-30 DOM 元素工作草案中的媒体捕获
每晚草稿

2016-08-30 通用传感器 API 工作草案
每晚草稿

2016-08-03 唤醒锁API工作草案
每晚草稿

2016-07-19 接近传感器工作草案
每晚草稿

2016-07-14 截屏工作草案
每晚草稿

2016-07-12 媒体捕获深度流扩展工作草案
每晚草稿

2016-07-07 电池状态API候选推荐
每晚草稿

2016-05-19 媒体捕获和流候选推荐
每晚草稿

2014-09-09 HTML 媒体捕获候选推荐

每晚草稿
2014-02-20 网络服务发现工作草案

每晚草稿
2012-03-06 MediaStream 捕获场景工作草案

```

**参考**

*   [所有文档（按组排序）：设备和传感器工作组 - W3C](https://www.w3.org/TR/tr-groups-all#tr_Device_and_Sensors_Working_Group)
*   [设备 API 主页](http://www.w3.org/2009/dap/)
*   [设备 API 邮件列表](http://lists.w3.org/Archives/Public/public-device-apis/)
*   [互操作性研讨会立场文件的规则语言：简单通用逻辑](https://www.w3.org/2004/12/rules-ws/paper/103/)

# php - Magento - 空白的白屏搜索结果。很多东西坏了

> ID：11233798
> 
> 赞同：1
> 
> 时间：2012-06-27T19:44:01.937
> 
> 标签：php, mysql, database, magento

每当用户搜索时，我都会收到此错误：

```
2012-06-26 11:05:21.671 [NOTICE] [208.69.120.120:48175-0#hostname] [STDERR] PHP Fatal error: Call to undefined method Mage_Catalog_Model_Resource_Product_Flat::getEntityTablePrefix() in /chroot/home/SITENAME/DOMAIN.COM/html/app/code/core/Mage/Eav/Model/Entity/Attribute/Abstract.php on line 505 
```

而不是用户的结果出现，他们得到一个空白的白色页面——他们没有错误，没有 UI，只有白色。这是我注意到的第一个问题，但在同一天开始出现以下问题：

1.  白色搜索结果
2.  分层导航中所有子类别的子类别产品计数显示为 0。
3.  一些客户在登录时无法从他们的前端 UI 中查看订单。
4.  我们的订单导出脚本返回空白字段（1.7mb 而不是 4.3）。
5.  我们的“美国制造”和“畅销书”页面返回的产品数量超过了应有的数量。

现在，我知道这些都是不正确的，因为如果我重新索引整个站点，在它处理索引的一段时间内，上述所有操作都有效。但是，当索引完成时，它会再次中断。发生这种情况的同一天，我们出现了一个错误页面，指出其中一张桌子坏了，应该修理。我们在所有表上运行了 PHPMyAdmin 的修复和优化功能，它修复了该错误——但所有这些仍然被破坏。

有什么想法吗？关于可以尝试解决此问题的任何想法？我在任何地方都找不到这个错误——而且 Nexcess 的人也找不到任何东西。

感谢您的时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T20:32:21.707

根据上面的评论，Magento 告诉您它正在尝试在`getEntityTablePrefix`其类没有定义该方法的对象上调用该方法。具体在这个方法

```
#File: app/code/core/Mage/Eav/Model/Entity/Attribute/Abstract.php
public function getBackendTable()
{
    if ($this->_dataTable === null) {
        if ($this->isStatic()) {
            $this->_dataTable = $this->getEntityType()->getValueTablePrefix();
        } else {
            $backendTable = trim($this->_getData('backend_table'));
            if (empty($backendTable)) {
                $entityTable  = array($this->getEntity()->getEntityTablePrefix(), $this->getBackendType());
                $backendTable = $this->getResource()->getTable($entityTable);
            }
            $this->_dataTable = $backendTable;
        }
    }
    return $this->_dataTable;
} 
```

鉴于这种情况发生在以下课程中

```
Mage_Catalog_Model_Resource_Product_Flat 
```

它对我说，您已完成扩展和/或自定义，假设您**没有**使用平面目录数据表并且没有编码以使用平面表。

像这样进行调试调用

```
if(!is_callable(array($this->getEntity()),'getEntityTablePrefix'))
{
    mageDebugBacktrace();
    //debug_print_backtrace();
    exit;
} 
```

在有问题的调用之前（当然是在本地代码池覆盖中），将打印出一个应该指向有问题的代码的调用堆栈。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-02T13:34:45.767

似乎问题在于`Mage_CatalogSearch_Model_Resource_Search_Collection::_getSearchEntityIdsSql`与使用产品平面索引不兼容。

您可以重写类`Mage_CatalogSearch_Model_Resource_Search_Collection`并进行两次小修改。

`_getSearchEntityIdsSqlUsingFlatIndex`1）向重写的类添加新功能。这个新功能（我希望）与 original 的功能完全相同`_getSearchEntityIdsSql`，但使用的是产品平面索引。

2) 修改函数`_getSearchEntityIdsSql`，以便`_getSearchEntityIdsSqlUsingFlatIndex`在启用和构建目录产品平面索引时调用 new。

见源代码：

```
 class VENDOR_MODULE_Model_PATHTOREWRITECLASS extends Mage_CatalogSearch_Model_Resource_Search_Collection {
    /**
     *  Retrieve SQL for search entities using product flat index.
     *
     * @param $query
     * @return Varien_Db_Select
     */
    protected function _getSearchEntityIdsSqlUsingFlatIndex($query)
    {
        /* @var $coreHelper Mage_Core_Model_Resource_Helper_Abstract */
        $coreHelper = Mage::getResourceHelper('core');
        $likeOptions = array('position' => 'any');

        $flatTableName = $this->getTable('catalog/product_flat').'_'.$this->getStoreId();

        /** @var Varien_Db_Select $select */
        $select = $this->getConnection()
            ->select()
            ->from($flatTableName, array('entity_id'));

        foreach ($this->_getAttributesCollection() as $attribute) {
            /** @var Mage_Catalog_Model_Entity_Attribute $attribute */

            if ($this->_isAttributeTextAndSearchable($attribute)) {

                $attributeCode = $attribute->getAttributeCode();

                $dbFieldName = in_array($attribute->getFrontendInput(), array('select', 'multiselect'))
                    ? $attributeCode.'_value'
                    : $attributeCode;

                if ($this->getConnection()->tableColumnExists($flatTableName, $dbFieldName)) {
                    $select->where($coreHelper->getCILike($dbFieldName, $this->_searchQuery, $likeOptions));
                } else {
                    Mage::log(__METHOD__.": Attribute '$attributeCode' is missing in flat index.", Zend_Log::NOTICE);
                }
            }
        }

        return $select;
    }

    /**
     * Retrieve SQL for search entities
     *
     * @param unknown_type $query
     * @return string
     */
    protected function _getSearchEntityIdsSql($query)
    {
        // HACK - make compatibility with flat index
        /** @var Mage_Catalog_Helper_Product_Flat $flatHelper */
        $flatHelper = Mage::helper('catalog/product_flat');
        if ($this->getStoreId() > 0
            && $flatHelper->isEnabled($this->getStoreId())
            && $flatHelper->isBuilt($this->getStoreId())
        ) {
            return $this->_getSearchEntityIdsSqlUsingFlatIndex($query);
        }
        // END HACK

        return parent::_getSearchEntityIdsSql($query);
    }
} 
```

# database - 为什么实体框架类需要不相关类的虚拟成员

> ID：11233802
> 
> 赞同：4
> 
> 时间：2012-06-27T19:44:35.857
> 
> 标签：database, asp.net-mvc-3, entity-framework, ef-code-first

通过示例更容易展示——我使用代码优先来构建数据库。我有以下课程：

```
public class Blog
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public string AuthorName { get; set; }
        public List<Post> Posts { get; set; }
        public string BlogCode
        {
            get
            {
                return Title.Substring(0, 1) + ":" + AuthorName.Substring(0, 1);
            }
        }
    }

    public class Post
    {
        public int Id { get; set; }
        public string Title { get; set; }
        public string Content { get; set; }
        public virtual Blog Blog { get; set; }
    } 
```

我不明白为什么 Post 需要一个公共的虚拟博客博客。它是否充当数据库中的外键以链接回博客？如果是这种情况，您似乎会使用博客 ID。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T19:47:02.747

`Post`它确实允许两个表相关，并在相关上放置一个外键`Blog`。

拥有`public virtual Blog Blog { get; set; }`允许您`Blog`从一个`Post`对象引用该对象，然后访问`Blog`. 例如，`myPost.Blog.Id` 如果它使用了`public virtual int BlogId { get; set; }`，您将无法执行此操作，因为`BlogId`它只是一个`int`值。

如果您的域对象是[延迟加载](http://techblog.treenodes.com/index.php/2012/06/26/understanding-lazy-loading-eager-loading-and-explicit-loading-with-entity-framework-implementation/)的，那么在使用该属性之前，`myPost.Blog`实际上不会使用数据库中的数据进行水合（即不调用表）。`Blog`一旦使用它，Entity Framework 就会为您调用数据库并使用`Blog`表中的数据对对象进行水合。这是使用 ORM 的一部分……它允许您在处理数据库操作的同时专注于代码。

# php - 在 html 模板中搜索的正则表达式

> ID：11233804
> 
> 赞同：0
> 
> 时间：2012-06-27T19:44:58.447
> 
> 标签：php, html, regex

我试图在很多文件（cc. 2000 个文件）中找到某些字符串。

我基本上需要的是在 html 文件中找到除某些特定 ID 之外的任何 ID 属性。

例如我想找到：

```
<a id="certain_id">sdfsdf</a> 
```

但我想排除：

```
<a id="manage">Manage</a> 
```

我只需要一个正则表达式，因为我想在 Eclipse Search 中使用它。但如果我不能，我也可以制作一个 php 文件来完成它。

像：id="(?!manage)" 或类似的东西。我不想替换任何我只想要每个文件中的元素列表的东西。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:50:35.427

这[对我有用](http://regexr.com?31co4)：

```
id="(?!(manage|something)").*?"
^   ^                      ^  
|   |                      Any character (not greedy), followed by a quote
|   Negative lookahead to make sure there isn't manage|something and a quote
Match the id=" characters literally 
```

您不想匹配的两个 ID在哪里`manage`和是。`something`

您也可以使用它来使其不贪婪：

```
id="(?!(manage|something)")[^"]+" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:55:28.967

正则表达式不包含自然的“非”运算符。

我相信存在一种解决方法，例如，您可以执行以下操作： id="(?!(undesirable1|undesirable2|undesirable3))"

自从我对正则表达式做任何事情以来已经有一段时间了，但我认为这应该可行。

编辑：我认为尼克的回答更好

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-06T08:57:17.727

[http://txt2re.com/ 有史以来](http://txt2re.com/)最好的工具

# jquery - 从 dom 中删除元素时删除 qtip

> ID：11233815
> 
> 赞同：2
> 
> 时间：2012-06-27T19:45:41.870
> 
> 标签：jquery, qtip2

我通过鼠标悬停、img 和 div 元素上的 jquery .on 事件应用带有 qtip2 的工具提示。这些元素有时需要在 qtip 仍在显示时从 DOM 中删除，而这种删除不在我的控制之下。结果是 qtip 永远留在那里。删除相关元素后如何删除 qtip？

使用 jquery 的 .remove() 不会删除 EDIT 基础元素，但使用 innerHTML=.. 所以 qtip2 自动删除在这里不起作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-28T10:06:34.333

当您要求 QTip2 方式时，就是这样。在您的 QTip2-initialization 中，添加以下内容：

```
events: {
    //this hide event will remove the qtip element from body and all assiciated events, leaving no dirt behind.
    hide: function(event, api) {
        api.destroy(true); // Destroy it immediately
    }
} 
```

使用 QTip 2.2.0 测试。[资源](https://github.com/qTip2/qTip2/issues/458)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:51:03.917

如果您可以将您的 qTip 更新为最新的夜间版本。然后尝试将其添加到您的 qTip 创建中：

```
$('#element').qtip({
   content : {stuff},
   style : {stuff},
   position: {stuff},
   show: 'mouseover',
   hide: 'click',
   onHide: function() { $(this).qtip('destroy'); }
}); 
```

你也可以看看这里：

[[已解决] 删除原始元素时如何销毁qtip](http://craigsworks.com/projects/forums/thread-solved-how-to-destroy-a-qtip-when-the-original-element-is-removed)

[[已解决] 重建 DOM 时清除 qtips](http://craigsworks.com/projects/forums/thread-solved-how-to-destroy-a-qtip-when-the-original-element-is-removed)

# maven-2 - Maven：权威指南 - 'asm:asm-commons:pom:3.2:runtime' 的 POM 无效

> ID：11233817
> 
> 赞同：1
> 
> 时间：2012-06-27T19:45:46.537
> 
> 标签：maven-2

我正在尝试浏览 Maven: The Definitive Guide 中的示例。在'4.3\. 创建简单天气项目'它让我运行以下命令。

```
mvn archetype:create -DgroupId=org.sonatype.mavenbook.ch04 -DartifactId=simple-weather -DpackageName=org.sonatype.mavenbook -Dversion=1.0 
```

我认为这些错误是一个问题。

```
[WARNING] POM for 'asm:asm-commons:pom:3.2:runtime' is invalid. It will be ignored for artifact resolution. Reason: Failed to validate POM for project asm:asm-commons at Artifact [asm:asm-commons:pom:3.2:runtime]
[WARNING] POM for 'asm:asm-util:pom:3.2:runtime' is invalid. It will be ignored for artifact resolution. Reason: Failed to validate POM for project asm:asm-util at Artifact [asm:asm-util:pom:3.2:runtime]
[WARNING] POM for 'asm:asm-analysis:pom:3.2:runtime' is invalid. It will be ignored for artifact resolution. Reason: Failed to validate POM for project asm:asm-analysis at Artifact [asm:asm-analysis:pom:3.2:runtime]
[WARNING] POM for 'asm:asm-tree:pom:3.2:runtime' is invalid. It will be ignored for artifact resolution. Reason: Failed to validate POM for project asm:asm-tree at Artifact [asm:asm-tree:pom:3.2:runtime] 
```

因为后来我收到了这个消息

```
[INFO] Failed to resolve artifact.

Missing
--------
org.apache.maven.archetype:archetype-catalog:jar:1.0
org.apache.maven.archetype:archetype-common:jar:1.0
org.apache.maven.archetype:archetype-registry:jar:1.0
org.apache.maven.archetype:archetype-descriptor:jar:1.0 
```

我再次打开调试运行命令，并将输出包含在 pastebin 链接中

```
mvn archetype:create -DgroupId=org.sonatype.mavenbook.ch04 -DartifactId=simple-weather -DpackageName=org.sonatype.mavenbook -Dversion=1.0 --debug > mvnoutput.txt 
```

[http://pastebin.me/e50a3e5fa84cd8e8ff9336b3c3062d7f](http://pastebin.me/e50a3e5fa84cd8e8ff9336b3c3062d7f)

我真的不知道为什么会失败。我尝试使用手动导航到 POM

[http://search.maven.org/remotecontent?filepath=asm/asm-commons/3.2/asm-commons-3.2.pom](http://search.maven.org/remotecontent?filepath=asm/asm-commons/3.2/asm-commons-3.2.pom)以及其他 POM 对我来说看起来不错（但我正在尝试学习 Maven。 )

这是我的 mvn 有效设置。我在一开始就省略了模式的东西。我在代理后面，但其他一切似乎都可以下载。任何帮助将非常感激。如果您将问题留作评论，我会回答问题或发布更多信息。

```
<localRepository>C:\Documents and Settings\~removed~\.m2\repository</localRepository>
<proxies>
<proxy>
  <active>true</active>
  <username>~removed~</username>
  <password>~removed~</password>
  <host>~removed~</host>
  <nonProxyHosts>~removed~</nonProxyHosts>
  <id>optional</id>
</proxy> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:58:02.253

最重要的是从 Maven 3.0.4 而不是 Maven 2.0.8 开始。此外，您需要使用：

```
mvn archetype:generate 
```

代替

```
mvn archetype:create 
```

[查看原型插件](http://maven.apache.org/archetype/maven-archetype-plugin/usage.html)的文档。

我认识到的一件事是您正在使用一本旧书：查看[“Maven by Example”书](http://www.sonatype.com/books/mvnex-book/reference/multimodule-sect-simple-weather.html)和[“Maven：完整参考”](http://www.sonatype.com/books/mvnref-book/reference/public-book.html)。

# javascript - Batman.js：使用 jQuery datepicker，选择和类似的 jQuery 插件

> ID：11233818
> 
> 赞同：0
> 
> 时间：2012-06-27T19:45:56.507
> 
> 标签：javascript, jquery, ajax, jquery-ui, batman.js

在 batman.js 中使用 , 等`datepicker`jQuery插件的最佳方式是什么？`chosen`我找到了`data-mixin`助手，但没有关于如何使用它的文档和示例。我也发现了这个问题：[https](https://github.com/Shopify/batman/issues/199) ://github.com/Shopify/batman/issues/199 ，但我又无法让它工作，因为它也没有记录。

理想情况下，我想做这样的事情：

```
#helpers/application_helper.js.coffee
datePicker: (field) ->
  $(field).datepicker()

#some_view.html
<input data-helper="datePicker" ... > 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-30T10:11:25.747

最后我得出了结论：在特定操作结束时调用插件。例如：

```
#controllers action
new: (params) ->
  #some logic here
  @view = @render()
  @view.on 'ready', =>
    $('#project_due_date').datepicker() 
```

取自：[https ://groups.google.com/forum/?fromgroups#!topic/batmanjs/dkYg7ijpaQI](https://groups.google.com/forum/?fromgroups#!topic/batmanjs/dkYg7ijpaQI)

但它看起来不像 DRY 解决方案。我仍在寻找更优化的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-02T03:57:12.283

我还没有使用它们。但是，我认为您应该能够使用“AfterFilters 之后的真正” [afterFilters](https://github.com/Shopify/batman/pull/470/files)。哪些是 afterFiler，但它们最近已被修改，因此它们会在 DOM 渲染后触发。

通过查看测试，您应该能够为操作指定它们。这应该使您成为 DRY 并且仅在 afterFilter 中包含特定操作的代码。

```
test 'afterFilters on outer actions should fire after afterFilters on inner actions', 1, ->
  order = []
  class TestController extends Batman.Controller
    @afterFilter 'show', -> order.push 1
    @afterFilter 'test', -> order.push 2
    show: -> @render false
    test: ->
      @render false
      @executeAction 'show'

  @controller = new TestController
  @controller.dispatch 'test'
  deepEqual order, [1, 2] 
```

# php - .zip 的 XAMPP PHP MIME 类型错误

> ID：11233821
> 
> 赞同：0
> 
> 时间：2012-06-27T19:46:09.163
> 
> 标签：php, mime

我在 Windows XP 上使用 XAMPP 1.7.7 并上传 .zip 文件。

```
$_FILES shows:
array(1) {
["P24_File"]=>
array(5) {
["name"]=>
string(12) "File.zip"
["type"]=>
string(15) "unknown/unknown"
["tmp_name"]=>
string(22) "...\php1B.tmp"
["error"]=>
int(0)
["size"]=>
int(12927)
}
} 
```

令人惊讶的是 finfo_file() 显示“application/zip; charset=binary”...

$_FILES 有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:17:24.427

此信息由*浏览器*提供，与服务器无关。可能客户端的计算机没有安装 ZIP 实用程序，或者浏览器由于某些其他原因不知道 ZIP 文件类型。

因为它可能是伪造的（或不正确的，如您的示例），所以无论如何您都不能信任该信息。

`finfo_file()`是这里值得信赖的来源。

# php - Symfony2：处理多个 ORM 关系

> ID：11233824
> 
> 赞同：0
> 
> 时间：2012-06-27T19:46:15.083
> 
> 标签：php, symfony, doctrine-orm

我需要为我的实体创建关系，我有以下场景：

实体 A - 与实体 B 的
OneToMany 关系 实体 B - 与实体 C 的 OneToMany 关系

在实体 A 上进行“查找”时，ORM 会自动查询所有匹配的实体 B 行。我不清楚的是 ORM 是否会自动查询所有匹配的实体 C 行。

```
$em = $this->getDoctrine()->getEntityManager();
$project = $em->getRepository('MyAppMainBundle:Project')->find($id);
$client = $project->getClient();
$clientProjects = $client->getClientProjects(); 
```

如果这种情况是可能的，那么实施它的最佳实践是什么？

谢谢，

JB

* * *

**更新**

我实际上想出了如何使用映射关系来做到这一点。关键是在实体中设置映射，以便实体 B 正确映射到实体 C。请参阅答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T23:17:46.277

只需正确映射关系，您就可以设置。看起来你想要一个 OneToMany/ManyToOne。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T23:18:16.643

这是我解决问题的方法：

```
Parent Entity 'Client':

/**
 * @ORM\OneToMany(targetEntity="ClientProject", mappedBy="client")
 */
private $clientProjects; 
```

子实体“ClientProject”：

```
/**
 * @ORM\ManyToOne(targetEntity="Client", inversedBy="ClientProject")
 * @ORM\JoinColumn(name="client_id", referencedColumnName="id")
 */
private $client; 
```

然后控制器可以使用以下代码：

```
$em = $this->getDoctrine()->getEntityManager();
$project = $em->getRepository('MyAppMainBundle:Project')->find($id);
$client = $project->getClient();
$clientProjects = $client->getClientProjects();

foreach ($clientProjects as $clientProject) {
    echo $clientProject->getSomeProperty();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:54:37.510

如果您希望在单个请求中获取所有实体，最好创建自定义存储库类并使用 QueryBuilder 在 A 连接 B 连接 C 的位置进行查询。在其他情况下，结果将取决于 LAZY_FETCH 选项，AFAIR

# arrays - Bash 中的多维数组

> ID：11233825
> 
> 赞同：62
> 
> 时间：2012-06-27T19:46:17.057
> 
> 标签：bash, python, arrays, bash, shell, multidimensional-array

我正在计划一个脚本来管理我的一些 Linux 系统，并且正在决定是否要使用[bash](/questions/tagged/bash "显示标记为“bash”的问题")或[python](/questions/tagged/python "显示标记为“python”的问题")。

我更愿意将其作为 Bash 脚本执行，因为命令更简单，但真正的决定因素是配置。我需要能够在配置文件中存储一个多维数组来告诉脚本如何处理自己。使用 bash 在配置文件中存储简单的 key=value 对很容易，但我能想到的唯一方法是做一个多维数组是一个两层解析引擎，比如

```
array=&d1|v1;v2;v3&d2|v1;v2;v3 
```

但是 marshall/unmarshall 代码可能会变成熊，对于下一个必须管理它的可怜的 sap 来说，它远非用户友好。如果我不能在 bash 中轻松做到这一点，我只需将配置写入 xml 文件并在 python 中编写脚本。

有没有一种简单的方法可以在 bash 中做到这一点？

感谢大家。

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-06-27T20:13:37.773

Bash 不支持多维数组，也不支持散列，而且您似乎想要一个值是数组的散列。这个解决方案不是很漂亮，带有xml文件的解决方案应该更好：

```
array=('d1=(v1 v2 v3)' 'd2=(v1 v2 v3)')
for elt in "${array[@]}";do eval $elt;done
echo "d1 ${#d1[@]} ${d1[@]}"
echo "d2 ${#d2[@]} ${d2[@]}" 
```

编辑：这个答案很老，因为 bash 4 支持哈希表，另请参阅[这个答案](https://stackoverflow.com/questions/44828958/how-do-format-and-traverse-an-array-that-contains-arrays-and-each-array-contain/44831174#44831174)以获得没有 eval 的解决方案。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2015-07-17T05:27:46.077

Bash 没有多维数组。但是您可以使用关联数组来模拟类似的效果。下面是一个伪装成多维数组的关联数组的例子：

```
declare -A arr
arr[0,0]=0
arr[0,1]=1
arr[1,0]=2
arr[1,1]=3
echo "${arr[0,0]} ${arr[0,1]}" # will print 0 1 
```

如果您不将数组声明为关联数组（使用`-A`），则上述方法将不起作用。例如，如果您省略该`declare -A arr`行，`echo`将打印`2 3`而不是`0 1`, 因为`0,0`,`1,0`并且这样将被视为算术表达式并计算为`0`（逗号运算符右侧的值）。

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2015-02-03T20:32:39.437

这要归功于 1\. “间接扩展” ！它增加了一层间接性，以及 2.“子字符串扩展”，它与数组的行为不同，可用于“切片”它们，如[https://stackoverflow.com/a/1336245/317623所述](https://stackoverflow.com/a/1336245/317623)

```
# Define each array and then add it to the main one
SUB_0=("name0" "value 0")
SUB_1=("name1" "value;1")
MAIN_ARRAY=(
  SUB_0[@]
  SUB_1[@]
)

# Loop and print it.  Using offset and length to extract values
COUNT=${#MAIN_ARRAY[@]}
for ((i=0; i<$COUNT; i++))
do
  NAME=${!MAIN_ARRAY[i]:0:1}
  VALUE=${!MAIN_ARRAY[i]:1:1}
  echo "NAME ${NAME}"
  echo "VALUE ${VALUE}"
done 
```

它基于[这里的答案](https://unix.stackexchange.com/a/179474/30901)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2019-06-15T22:28:47.247

如果您想使用 bash 脚本并使其易于阅读，建议将数据放在结构化 JSON 中，然后在 bash 命令中使用[轻量级工具 jq](https://stedolan.github.io/jq/)来遍历数组。例如，使用以下数据集：

```
[

    {"specialId":"123",
    "specialName":"First"},

    {"specialId":"456",
    "specialName":"Second"},

    {"specialId":"789",
    "specialName":"Third"}
] 
```

您可以使用 bash 脚本和 jq 遍历这些数据，如下所示：

```
function loopOverArray(){

    jq -c '.[]' testing.json | while read i; do
        # Do stuff here
        echo "$i"
    done
}

loopOverArray 
```

输出：

```
{"specialId":"123","specialName":"First"}
{"specialId":"456","specialName":"Second"}
{"specialId":"789","specialName":"Third"} 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2013-10-05T00:42:45.917

Independent of the shell being used (sh, ksh, bash, ...) the following approach works pretty well for n-dimensional arrays (the sample covers a 2-dimensional array).

In the sample the line-separator (1st dimension) is the space character. For introducing a field separator (2nd dimension) the standard unix tool `tr` is used. Additional separators for additional dimensions can be used in the same way.

Of course the performance of this approach is not very well, but if performance is not a criteria this approach is quite generic and can solve many problems:

```
array2d="1.1:1.2:1.3 2.1:2.2 3.1:3.2:3.3:3.4"

function process2ndDimension {
    for dimension2 in $*
    do
        echo -n $dimension2 "   "
    done
    echo
}

function process1stDimension {
    for dimension1 in $array2d
    do
        process2ndDimension `echo $dimension1 | tr : " "`
    done
}

process1stDimension 
```

The output of that sample looks like this:

```
1.1     1.2     1.3     
2.1     2.2     
3.1     3.2     3.3     3.4 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-04-25T12:42:31.870

经过大量的反复试验，我实际上发现 bash 上最好、最清晰和最简单的多维数组是使用常规 var。是的。

优点：您不必循环遍历一个大数组，您只需 echo "$var" 并使用 grep/awk/sed。它简单明了，您可以拥有任意数量的列。

例子：

```
$ var=$(echo -e 'kris hansen oslo\nthomas jonson peru\nbibi abu johnsonville\njohnny lipp peru')

$ echo "$var"
kris hansen oslo
thomas johnson peru
bibi abu johnsonville
johnny lipp peru 
```

# 如果你想在秘鲁找到每个人

```
$ echo "$var" | grep peru
thomas johnson peru
johnny lipp peru 
```

# 第三个字段中只有 grep(sed)

```
$ echo "$var" | sed -n -E '/(.+) (.+) peru/p'
thomas johnson peru
johnny lipp peru 
```

# 如果你只想要 x 字段

```
$ echo "$var" | awk '{print $2}'
hansen
johnson
abu
johnny 
```

# 秘鲁每个叫 thomas 的人都返回他的姓氏

```
$ echo "$var" |grep peru|grep thomas|awk '{print $2}'
johnson 
```

您能想到的任何查询...超级简单。

# 要更改项目：

```
$ var=$(echo "$var"|sed "s/thomas/pete/") 
```

# 删除包含“x”的行

```
$ var=$(echo "$var"|sed "/thomas/d") 
```

# 根据另一个项目的值更改同一行中的另一个字段

```
$ var=$(echo "$var"|sed -E "s/(thomas) (.+) (.+)/\1 test \3/")
$ echo "$var"
kris hansen oslo                                                                                                                                             
thomas test peru                                                                                                                                          
bibi abu johnsonville
johnny lipp peru 
```

# 当然，如果您想这样做，循环也可以

```
$ for i in "$var"; do echo "$i"; done
kris hansen oslo
thomas jonson peru
bibi abu johnsonville
johnny lipp peru 
```

发现的唯一问题是您*必须*始终引用 var（在示例中；var 和 i），否则事情将如下所示

```
$ for i in "$var"; do echo $i; done
kris hansen oslo thomas jonson peru bibi abu johnsonville johnny lipp peru 
```

毫无疑问，有人会说如果您的输入中有空格，它将无法正常工作，但是可以通过在输入中使用另一个分隔符来解决此问题，例如（现在使用 utf8 字符来强调您可以选择输入不会选择的内容包含，但你可以选择任何ofc）：

```
$ var=$(echo -e 'field one☥field two hello☥field three yes moin\nfield 1☥field 2☥field 3 dsdds aq')

$ for i in "$var"; do echo "$i"; done
field one☥field two hello☥field three yes moin
field 1☥field 2☥field 3 dsdds aq

$ echo "$var" | awk -F '☥' '{print $3}'
field three yes moin
field 3 dsdds aq

$ var=$(echo "$var"|sed -E "s/(field one)☥(.+)☥(.+)/\1☥test☥\3/")
$ echo "$var"
field one☥test☥field three yes moin
field 1☥field 2☥field 3 dsdds aq 
```

如果您想在输入中存储换行符，您可以在输入之前将换行符转换为其他内容，然后在输出中再次将其转换回（或不使用 bash ...）。享受！

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2017-09-27T12:19:36.467

我发布以下内容是因为它是一种非常简单明了的方式来模拟（至少在某种程度上）Bash 中二维数组的行为。它使用一个 here-file（参见 Bash 手册）和`read`（一个 Bash 内置命令）：

```
## Store the "two-dimensional data" in a file ($$ is just the process ID of the shell, to make sure the filename is unique)
cat > physicists.$$ <<EOF
Wolfgang Pauli 1900
Werner Heisenberg 1901
Albert Einstein 1879
Niels Bohr 1885
EOF
nbPhysicists=$(wc -l physicists.$$ | cut -sf 1 -d ' ')     # Number of lines of the here-file specifying the physicists.

## Extract the needed data
declare -a person     # Create an indexed array (necessary for the read command).                                                                                 
while read -ra person; do
    firstName=${person[0]}
    familyName=${person[1]}
    birthYear=${person[2]}
    echo "Physicist ${firstName} ${familyName} was born in ${birthYear}"
    # Do whatever you need with data
done < physicists.$$

## Remove the temporary file
rm physicists.$$ 
```

输出： `Physicist Wolfgang Pauli was born in 1900 Physicist Werner Heisenberg was born in 1901 Physicist Albert Einstein was born in 1879 Physicist Niels Bohr was born in 1885`

**它的工作方式：**

*   创建的临时文件中的行扮演一维向量的角色，其中空格（或您选择的任何分隔字符；请参阅`read`Bash 手册中的命令描述）分隔这些向量的元素。
*   然后，使用`read`带有`-a`选项的命令，我们遍历文件的每一行（直到我们到达文件末尾）。对于每一行，我们可以将所需的字段（= 单词）分配给我们在循环之前声明的数组。该命令的`-r`选项`read`可防止反斜杠充当转义字符，以防我们在 here-document 中键入反斜杠`physicists.$$`。

总之，一个文件被创建为一个二维数组，它的元素是使用每行循环提取的，并使用`read`命令的能力将单词分配给（索引）数组的元素。

**轻微改进：**

在上面的代码中，文件`physicists.$$`作为循环的输入给出`while`，因此它实际上是传递给`read`命令的。`while`但是，我发现当我在循环中有另一个命令要求输入时，这会导致问题。例如，`select`命令等待标准输入，如果放在`while`循环中，它将从 中获取输入`physicists.$$`，而不是在命令行中提示用户输入。为了纠正这个问题，我使用了允许从文件描述符中读取的`-u`选项。`read`我们只需要创建一个对应的文件描述符（使用`exec`命令）`physicists.$$`并将其提供给`-u`read 选项，如下面的代码所示：

```
## Store the "two-dimensional data" in a file ($$ is just the process ID of the shell, to make sure the filename is unique)
cat > physicists.$$ <<EOF
Wolfgang Pauli 1900
Werner Heisenberg 1901
Albert Einstein 1879
Niels Bohr 1885
EOF
nbPhysicists=$(wc -l physicists.$$ | cut -sf 1 -d ' ')     # Number of lines of the here-file specifying the physicists.
exec {id_file}<./physicists.$$     # Create a file descriptor stored in 'id_file'.

## Extract the needed data
declare -a person     # Create an indexed array (necessary for the read command).                                                                                 
while read -ra person -u "${id_file}"; do
firstName=${person[0]}
familyName=${person[1]}
birthYear=${person[2]}
echo "Physicist ${firstName} ${familyName} was born in ${birthYear}"
# Do whatever you need with data
done

## Close the file descriptor
exec {id_file}<&-
## Remove the temporary file
rm physicists.$$ 
```

请注意，文件描述符在最后关闭。

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2015-02-12T10:45:44.410

扩展保罗的答案 - 这是我在 bash 中使用关联子数组的版本：

```
declare -A SUB_1=(["name1key"]="name1val" ["name2key"]="name2val")
declare -A SUB_2=(["name3key"]="name3val" ["name4key"]="name4val")
STRING_1="string1val"
STRING_2="string2val"
MAIN_ARRAY=(
  "${SUB_1[*]}"
  "${SUB_2[*]}"
  "${STRING_1}"
  "${STRING_2}"
)
echo "COUNT: " ${#MAIN_ARRAY[@]}
for key in ${!MAIN_ARRAY[@]}; do
    IFS=' ' read -a val <<< ${MAIN_ARRAY[$key]}
    echo "VALUE: " ${val[@]}
    if [[ ${#val[@]} -gt 1 ]]; then
        for subkey in ${!val[@]}; do
            subval=${val[$subkey]}
            echo "SUBVALUE: " ${subval}
        done
    fi
done 
```

它适用于主数组中的混合值 - 字符串/数组/关联。数组

这里的关键是将子数组用单引号括起来，`*`而不是`@`在将子数组存储在主数组中时使用，以便将其存储为单个空格分隔的字符串：`"${SUB_1[*]}"`

然后，在使用`IFS=' ' read -a val <<< ${MAIN_ARRAY[$key]}`

上面的代码输出：

```
COUNT:  4
VALUE:  name1val name2val
SUBVALUE:  name1val
SUBVALUE:  name2val
VALUE:  name4val name3val
SUBVALUE:  name4val
SUBVALUE:  name3val
VALUE:  string1val
VALUE:  string2val 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2019-09-03T20:45:14.533

在这里找到了很多在 bash 中创建多维数组的答案。

无一例外，都是钝的，难用的。

如果 MD 数组是必需的标准，那么是时候做出决定了：

**使用支持 MD 数组的语言**

我的首选是 Perl。大多数人可能会选择 Python。要么工作。

**将数据存储在别处**

JSON 和 jq 已经被推荐了。还建议使用 XML，但对于您的使用 JSON 和 jq 可能会更简单。

尽管 Bash 似乎不是您需要做的事情的最佳选择。

有时正确的问题不是“我如何在工具 Y 中做 X？”，而是“哪种工具最适合做 X？”

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-06-30T18:00:56.687

我从**bash 4开始使用****关联数组**并设置为可以手动定义的值来执行此操作。****`IFS`****

 **这种方法的目的是将数组作为关联数组键的值。

为了将 IFS 设置回默认值，只需取消设置即可。

*   `unset IFS`

* * *

这是一个例子：

```
#!/bin/bash

set -euo pipefail

# used as value in asscciative array
test=(
  "x3:x4:x5"
)
# associative array
declare -A wow=(
  ["1"]=$test
  ["2"]=$test
)
echo "default IFS"
for w in ${wow[@]}; do
  echo "  $w"
done

IFS=:
echo "IFS=:"
for w in ${wow[@]}; do
  for t in $w; do
    echo "  $t"
  done
done
echo -e "\n or\n"
for w in ${!wow[@]}
do
  echo "  $w"
  for t in ${wow[$w]}
  do
    echo "    $t"
  done
done

unset IFS
unset w
unset t
unset wow
unset test 
```

下面脚本的输出是：

```
default IFS
  x3:x4:x5
  x3:x4:x5
IFS=:
  x3
  x4
  x5
  x3
  x4
  x5

 or

  1
    x3
    x4
    x5
  2
    x3
    x4
    x5 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2018-04-23T07:54:32.753

Bash 不支持多维数组，但是我们可以使用 Associate 数组来实现。这里的索引是检索值的关键。关联数组在`bash`版本 4 中可用。

```
#!/bin/bash

declare -A arr2d
rows=3
columns=2

for ((i=0;i<rows;i++)) do
    for ((j=0;j<columns;j++)) do
        arr2d[$i,$j]=$i
    done
done

for ((i=0;i<rows;i++)) do
    for ((j=0;j<columns;j++)) do
        echo ${arr2d[$i,$j]}
    done
done 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-01-18T17:14:42.357

我有一个非常简单但聪明的解决方法：只需使用名称中的变量定义数组即可。例如：

```
for (( i=0 ; i<$(($maxvalue + 1)) ; i++ ))
  do
  for (( j=0 ; j<$(($maxargument + 1)) ; j++ ))
    do
    declare -a array$i[$j]=((Your rule))
  done
done 
```

不知道这是否有帮助，因为它不完全符合您的要求，但它对我有用。（同样可以使用没有数组的变量来实现）

* * *

## 回答 #13

> 赞同：-3
> 
> 时间：2014-01-19T16:44:50.810

```
echo "Enter no of terms"
read count
for i in $(seq 1 $count)
do
  t=` expr $i - 1 `
  for j in $(seq $t -1 0)
  do
    echo -n " "
  done
  j=` expr $count + 1 `
  x=` expr $j - $i `
  for k in $(seq 1 $x)
  do
    echo -n "* "
  done
  echo ""
done 
```**

# linq - Linq to XML - 获取具有特定值的兄弟元素的下一个元素

> ID：11233828
> 
> 赞同：1
> 
> 时间：2012-06-27T19:46:32.500
> 
> 标签：linq, linq-to-xml

我有一个类似于这样的 xml 结构：

```
<cars>
  <car>
    <make>Ford</make>
    <model>F-150</model>
    <year>2011</year>
    <customs>
      <customAttribute>Color</customAttribute>
      <customValue>Black</customValue>
      <customAttribute>Doors</customAttribute>
      <customValue>2</customValue>
    </customs>
  </car>
</cars> 
```

我想以如下所示的方法返回汽车列表：

```
return (from car in cars.Descendants("car")
       select new Car {
           Make = car.Element("make").Value,
           Model = car.Element("model").Value,
           Year = car.Element("year").Value
           Color = ?????,
           Doors = ?????
       }); 
```

如何填充颜色和门字段？我需要为适当的 customValue 节点获取 customAttribute 值。

不太清楚如何做到这一点。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:02:21.517

您的 xml @line 中有错字`<year>`，但是...

这个应该可以解决问题，当然，很少有空检查会更好。

顺便说一句，如果颜色（和门）是属性而不是节点，那也不会更糟……

```
var result = cars.Descendants("car")
              .Select(car => new Car
                     {
                        Make = car.Element("make").Value,
                        Model = car.Element("model").Value,
                        Year = car.Element("year").Value,
                        Color = (car.Element("customs").Elements("customAttribute").First(m => m.Value == "Color").NextNode as XElement).Value,
                        Doors = (car.Element("customs").Elements("customAttribute").First(m => m.Value == "Doors").NextNode as XElement).Value
                     })
              .ToList(); 
```

# android - SQLite 在启动时插入错误

> ID：11233831
> 
> 赞同：0
> 
> 时间：2012-06-27T19:46:53.693
> 
> 标签：android, sqlite, insert-into

我创建了一个数据库并在其上创建了一些表。但在某些时候我做错了，所以应用程序在启动时崩溃。这是我的代码的一部分：

```
private SQLiteStatement insertUserInfos;
private static final String TN_INFO = "UserInfos";

private static final String CREATE_TABLE_INFO = "CREATE TABLE "
        + TN_INFO
        + " ( \"name\" TEXT, \"surname\" TEXT, \"mail\" TEXT, \"password\" TEXT, \"birthyear\" TEXT, \"currentcity\" TEXT, \"futurecity\" TEXT, \"check\" TEXT ) ";

private static final String INSERT_INFOS = "INSERT INTO "
        + TN_INFO
        + " ( name, surname, mail, password, birthyear, currentcity, futurecity, check ) Values (?,?,?,?,?,?,?,?) ";

public DBHelper(Context context) {
    this.ctx = context;

    DBOpenHelper db = new DBOpenHelper(ctx);
    database = db.getWritableDatabase();

    insertUserInfos = database.compileStatement(INSERT_INFOS);
}

private class DBOpenHelper extends SQLiteOpenHelper {

    public DBOpenHelper(Context context) {
        super(ctx, DATABASE_NAME, null, DATABASE_VERSION);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(CREATE_TABLE_INFO);
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    }

} 
```

我收到了这个错误：

06-27 22:42:01.870: E/AndroidRuntime(16550): 引起: android.database.sqlite.SQLiteException: 在“检查”附近: 语法错误: , 编译时: INSERT INTO UserInfos (name, surname, mail, password ,birthyear,currentcity,futurecity,check ) 值 (?,?,?,?,?,?,?,?)

我检查了很多次，但我在这条线上看不到任何错误。任何帮助都会很好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:59:29.797

check 是一个保留字，你必须引用它。当您在 create 语句中执行此操作时，您在 insert 语句中忘记了它。

# c# - 使用 Json.NET 进行反序列化

> ID：11233836
> 
> 赞同：0
> 
> 时间：2012-06-27T19:47:07.193
> 
> 标签：c#, json.net

如何将以下 JSON 反序列化为可以绑定到转发器的引用元素集合？

```
    {
       “询问”：{
          “计数”：3，
          “创建”：“2012-06-27T19：44：47Z”，
          "lang":"en-US",
          “结果”：{
             “引用”：[
                {
                   “符号”：“UAM”，
                   “问”：空，
                   "AverageDailyVolume":"262683",
                   “出价”：空，
                   "AskRealtime":"10.07",
                   "BidRealtime":"10.06",
                   "账面价值":"12.468",
                   "Change_PercentChange":"-0.24 - -2.33%",
                   "变化":"-0.24",
                   “佣金”：空，
                   "ChangeRealtime":"-0.24",
                   "AfterHoursChangeRealtime":"N/A - N/A",
                   "分红":"0.00",
                   "最后交易日期":"2012 年 6 月 27 日",
                   "交易日期":null,
                   "EarningsShare":"0.096",
                   "ErrorIndicationreturnedforsymbolchangedinvalid":null,
                   "EPSEstimateCurrentYear":"0.68",
                   "EPSEstimateNextYear":"0.77",
                   "EPSEstimateNextQuarter":"0.16",
                   "DaysLow":"10.06",
                   "DaysHigh":"10.33",
                   "YearLow":"8.79",
                   "年高":"13.62",
                   "HoldingsGainPercent":"- - -",
                   "年化增益":null,
                   "HoldingsGain":null,
                   "HoldingsGainPercentRealtime":"N/A - N/A",
                   "HoldingsGainRealtime":null,
                   "MoreInfo":"cnpriIed",
                   "OrderBookRealtime":null,
                   "市值":"860.4M",
                   "MarketCapRealtime":null,
                   "EBITDA":"105.7M",
                   "ChangeFromYearLow":"+1.27",
                   "PercentChangeFromYearLow":"+14.45%",
                   "LastTradeRealtimeWithTime":"N/A - 10.06 ",
                   "ChangePercentRealtime":"N/A - -2.33%",
                   "ChangeFromYearHigh":"-3.56",
                   "PercebtChangeFromYearHigh":"-26.14%",
                   "LastTradeWithTime":"3:29pm - 10.06 ",
                   "LastTradePriceOnly":"10.06",
                   “高限”：空，
                   "下限":null,
                   "DaysRange":"10.06 - 10.33",
                   "DaysRangeRealtime":"N/A - N/A",
                   "FiftydayMovingAverage":"10.0519",
                   "TwoHundreddayMovingAverage":"10.8884",
                   "ChangeFromTwoHundreddayMovingAverage":"-0.8284",
                   "PercentChangeFromTwoHundreddayMovingAverage":"-7.61%",
                   "ChangeFromFiftydayMovingAverage":"+0.0081",
                   "PercentChangeFromFiftydayMovingAverage":"+0.08%",
                   "名称":"美国环球",
                   “注释”：空，
                   "开":"10.32",
                   "PreviousClose":"10.30",
                   “支付价格”：空，
                   "变化百分比":"-2.33%",
                   "PriceSales":"0.40",
                   "PriceBook":"0.83",
                   "ExDividendDate":null,
                   "PERatio":"107.29",
                   "股息支付日期":"10 年 8 月 19 日",
                   "PERatioRealtime":null,
                   "PEGRatio":"1.01",
                   "PriceEPSEstimateCurrentYear":"15.15",
                   "PriceEPSEstimateNextYear":"13.38",
                   "符号":"UAM",
                   "SharesOwned":null,
                   "空头比率":"4.80",
                   "最后交易时间":"下午 3:29",
                   “TickerTrend”：“-==++-”，
                   "OneyrTargetPrice":"12.00",
                   “卷”：“491440”，
                   "HoldingsValue":null,
                   "HoldingsValueRealtime":null,
                   "年份范围":"8.79 - 13.62",
                   "DaysValueChange":"- - -2.33%",
                   "DaysValueChangeRealtime":"N/A - N/A",
                   “证券交易所”：“纽约证券交易所”，
                   "股息率":null,
                   “百分比变化”：“-2.33%”
                },
                {
                   "符号":"WCG",
                   “问”：空，
                   "AverageDailyVolume":"898853",
                   “出价”：空，
                   "AskRealtime":"49.72",
                   "BidRealtime":"49.68",
                   "账面价值":"27.418",
                   "Change_PercentChange":"-0.25 - -0.50%",
                   "变化":"-0.25",
                   “佣金”：空，
                   "ChangeRealtime":"-0.25",
                   "AfterHoursChangeRealtime":"N/A - N/A",
                   "分红":"0.00",
                   "最后交易日期":"2012 年 6 月 27 日",
                   "交易日期":null,
                   "EarningsShare":"6.77",
                   "ErrorIndicationreturnedforsymbolchangedinvalid":null,
                   "EPSEstimateCurrentYear":"5.42",
                   "EPSEstimateNextYear":"5.20",
                   "EPSEstimateNextQuarter":"1.51",
                   "DaysLow":"49.64",
                   "DaysHigh":"50.765",
                   "YearLow":"33.29",
                   "年高":"74.41",
                   "HoldingsGainPercent":"- - -",
                   "年化增益":null,
                   "HoldingsGain":null,
                   "HoldingsGainPercentRealtime":"N/A - N/A",
                   "HoldingsGainRealtime":null,
                   "MoreInfo":"cnprmiIed",
                   "OrderBookRealtime":null,
                   "市值":"2.141B",
                   "MarketCapRealtime":null,
                   "EBITDA":"475.0M",
                   "ChangeFromYearLow":"+16.39",
                   "PercentChangeFromYearLow":"+49.23%",
                   "LastTradeRealtimeWithTime":"N/A - 49.68 ",
                   "ChangePercentRealtime":"N/A - -0.50%",
                   "ChangeFromYearHigh":"-24.73",
                   "PercebtChangeFromYearHigh":"-33.23%",
                   "LastTradeWithTime":"3:29pm - 49.68 ",
                   "LastTradePriceOnly":"49.68",
                   “高限”：空，
                   "下限":null,
                   "DaysRange":"49.64 - 50.765",
                   "DaysRangeRealtime":"N/A - N/A",
                   "FiftydayMovingAverage":"55.0451",
                   "TwoHundreddayMovingAverage":"60.745",
                   "ChangeFromTwoHundreddayMovingAverage":"-11.065",
                   "PercentChangeFromTwoHundreddayMovingAverage":"-18.22%",
                   "ChangeFromFiftydayMovingAverage":"-5.3651",
                   "PercentChangeFromFiftydayMovingAverage":"-9.75%",
                   "名称":"Wellcare Health P",
                   “注释”：空，
                   "打开":"49.75",
                   "上一个关闭":"49.93",
                   “支付价格”：空，
                   "变化百分比":"-0.50%",
                   "价格销售":"0.33",
                   "PriceBook":"1.82",
                   "ExDividendDate":null,
                   "PERatio":"7.38",
                   "股息支付日期":null,
                   "PERatioRealtime":null,
                   "PEGRatio":"0.58",
                   "PriceEPSEstimateCurrentYear":"9.21",
                   "PriceEPSEstimateNextYear":"9.60",
                   "符号":"WCG",
                   "SharesOwned":null,
                   "空头比率":"1.70",
                   "最后交易时间":"下午 3:29",
                   "TickerTrend":" =--==- ",
                   "OneyrTargetPrice":"73.10",
                   “卷”：“517119”，
                   "HoldingsValue":null,
                   "HoldingsValueRealtime":null,
                   "年份范围":"33.29 - 74.41",
                   "DaysValueChange":"- - -0.50%",
                   "DaysValueChangeRealtime":"N/A - N/A",
                   “证券交易所”：“纽约证券交易所”，
                   "股息率":null,
                   "百分比变化":"-0.50%"
                },
                {
                   “符号”：“WLP”，
                   “问”：空，
                   "AverageDailyVolume":"2976430",
                   “出价”：空，
                   "AskRealtime":"69.70",
                   "BidRealtime":"69.67",
                   "账面价值":"70.91",
                   "Change_PercentChange":"+0.58 - +0.84%",
                   "变化":"+0.58",
                   “佣金”：空，
                   "变化实时":"+0.58",
                   "AfterHoursChangeRealtime":"N/A - N/A",
                   "股息份额":"1.076",
                   "最后交易日期":"2012 年 6 月 27 日",
                   "交易日期":null,
                   "EarningsShare":"7.265",
                   "ErrorIndicationreturnedforsymbolchangedinvalid":null,
                   "EPSEstimateCurrentYear":"7.78",
                   "EPSEstimateNextYear":"8.54",
                   "EPSEstimateNextQuarter":"2.02",
                   "DaysLow":"69.22",
                   "DaysHigh":"70.65",
                   "YearLow":"56.61",
                   "年高":"80.90",
                   "HoldingsGainPercent":"- - -",
                   "年化增益":null,
                   "HoldingsGain":null,
                   "HoldingsGainPercentRealtime":"N/A - N/A",
                   "HoldingsGainRealtime":null,
                   "MoreInfo":"cnprmiIed",
                   "OrderBookRealtime":null,
                   "市值":"23.052B",
                   "MarketCapRealtime":null,
                   "EBITDA":"4.991B",
                   "ChangeFromYearLow":"+13.07",
                   "PercentChangeFromYearLow":"+23.09%",
                   "LastTradeRealtimeWithTime":"N/A - 69.68 ",
                   "ChangePercentRealtime":"N/A - +0.84%",
                   "ChangeFromYearHigh":"-11.22",
                   "PercebtChangeFromYearHigh":"-13.87%",
                   "LastTradeWithTime":"3:29pm - 69.68 ",
                   "LastTradePriceOnly":"69.68",
                   “高限”：空，
                   "下限":null,
                   "DaysRange":"69.22 - 70.65",
                   "DaysRangeRealtime":"N/A - N/A",
                   "FiftydayMovingAverage":"67.8471",
                   "TwoHundreddayMovingAverage":"67.6942",
                   "ChangeFromTwoHundreddayMovingAverage":"+1.9858",
                   "PercentChangeFromTwoHundreddayMovingAverage":"+2.93%",
                   "ChangeFromFiftydayMovingAverage":"+1.8329",
                   "PercentChangeFromFiftydayMovingAverage":"+2.70%",
                   "名称":"WellPoint, Inc. C",
                   “注释”：空，
                   "打开":"69.40",
                   "上一个关闭":"69.10",
                   “支付价格”：空，
                   "变化百分比":"+0.84%",
                   "价格销售":"0.37",
                   "PriceBook":"0.97",
                   "ExDividendDate":"6 月 6 日",
                   "PERatio":"9.51",
                   "DividendPayDate":"6 月 25 日",
                   "PERatioRealtime":null,
                   "PEGRatio":"0.88",
                   "PriceEPSEstimateCurrentYear":"8.88",
                   "PriceEPSEstimateNextYear":"8.09",
                   "符号":"WLP",
                   "SharesOwned":null,
                   "空头比率":"2.90",
                   "最后交易时间":"下午 3:29",
                   "TickerTrend":" ==-=== ",
                   "OneyrTargetPrice":"82.89",
                   “卷”：“3187310”，
                   "HoldingsValue":null,
                   "HoldingsValueRealtime":null,
                   "年份范围":"56.61 - 80.90",
                   "DaysValueChange":"- - +0.84%",
                   "DaysValueChangeRealtime":"N/A - N/A",
                   “证券交易所”：“纽约证券交易所”，
                   "股息率":"1.56",
                   “百分比变化”：“+0.84%”
                }
             ]
          }
       }
    }

```

我正在使用 C#，但无法弄清楚如何构造类结构以获取提取的 Quote 对象列表。这是我尝试过的：

```
    公共类容器
    {
        [JsonProperty("查询")]
        公共查询数据{get; 放; }
    }

    公开课查询
    {
        [JsonProperty("count")]
        公共 int 计数 { 获取；放; }
        [JsonProperty("创建")]
        公共日期时间创建{获取；放; }
        [JsonProperty("lang")]
        公共字符串 Lang { 获取；放; }
        [JsonProperty("结果")]
        公开列表结果 { 获取；放; }
    }

    公开课报价
    {
        [JsonProperty("符号")]
        公共字符串符号 { 获取；放; }
        [JsonProperty("问")]
        公共字符串询问{获取；放; }
        [JsonProperty("AverageDailyVolume")]
        公共字符串 AverageDailyVolume { 获取；放; }
    }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-12T08:51:40.807

Don't know if this will help you now but your problem is your json doesn't conform to you object model. To deserialise back to a Container object with a Query object that contains a List of results your results json should look like the following:

```
 "results": [
  {
    "symbol": "UAM",
    "Ask": null,
    "AverageDailyVolume": "262683"
  },
  {
    "symbol": "WCG",
    "Ask": null,
    "AverageDailyVolume": "898853"
  },
  {
    "symbol": "WLP",
    "Ask": null,
    "AverageDailyVolume": "2976430"
  }
] 
```

But your json looks like this:

```
"results":{
         "quote":[
            {
               "symbol":"UAM",
               "Ask":null,
               "AverageDailyVolume":"262683",
            }
          ]
 } 
```

The *"quote"* property is what is messing it up. So in order to map this you either have to change the source json or implement some kind of custom list that has a property "quote"....OR you deserialise it manually. But natively json will expext an object as

```
{
   ...Some object
} 
```

and not:

```
"myobject" : {
    ...Some object.
} 
```

when inside a collection.

# python - 单击按钮（在网页上）运行客户端 python 脚本

> ID：11233837
> 
> 赞同：4
> 
> 时间：2012-06-27T19:47:12.350
> 
> 标签：python, html, frameworks

所以我试图修改一些 HTML 以具有一个按钮，该按钮启动一个 python 脚本，该脚本作用于自己系统中的一些文件。

更具体地说，我有一个 python 脚本，它可以读取 snort 日志并生成一个指向新网站的链接（实际上，一个 IP 地址，它采用数据包捕获流搜索的参数）我正在尝试将此脚本实现为一个按钮一个网站。-注意：如果单击按钮的人需要在他们自己的机器上拥有 script.py，那没关系

我*试图*在这个主题上做我的功课，但似乎有无限的选择——其中大部分都没有得到任何两方的同意。我需要一个框架吗？我可以不只是使用我的 HTML 代码中的一些 < script /> 或某些东西从其目录中调用我的 python 脚本吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:54:41.020

简短的回答：你不能。

您不能从浏览器访问用户机器上的文件，更不能执行它们。想象一下会有多大的安全漏洞。

但是，您可以在许多 GUI 工具包（Qt 或 wx 具有 Web 视图或类似工具）中实现自己的简单 Web 浏览器（例如，显示单个页面）。或者，您需要为您正在使用的浏览器开发（或查找）一个插件/插件，并与之通信。这将取决于每个浏览器等。我不知道这是否可行。或者，用户将下载一个他将选择运行而不是保存的文件，该文件将执行您的脚本。

实际上，我刚刚看到[这个](http://www.ironpython.net/browser/)和[这个](http://blog.jimmy.schementi.com/2010/03/pycon-2010-python-in-browser.html)基本上是您安装的插件（基于 IronPython 和 Silverlight），但我不确定您是否可以执行用户系统上的脚本。它可以执行嵌入在页面中的代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-16T17:34:17.200

OPs 问题的替代解决方案：

解决方案概要：

1.  通过带有“GET”的 HTML 表单发送用户输入
2.  处理来自发送到 shell 脚本的 url 编码值“GET”中的值
3.  Shell 脚本解析值并保存它们，将参数传递给 Python 脚本，同时调用它运行。

Javascript 和 php 可以很好地与此设置配合使用，并允许从那里使用 mysql 等。

使用“GET”，我们使用 shell 脚本将用户的输入从客户端发送到服务器端来处理我们的数据。

示例 Index.php

```
<!DOCTYPE html>
<html>
    <head>
    <title>Google Email Search</title>  
    </head>
<body>
    <h1>Script Options</h1>
<form action="/cgi-bin/call.sh" method="get">       
    <TABLE BORDER="1">
        <TR>
            <TD>Keyword:</TD>
            <TD><input type="text" name="query" value="Query"></TD>
        </TR>
        <TR>
            <TD># of Pages:</TD>
            <TD><input type="text" name="pages" value="1"></TD>
        </TR>
        <TR>
            <TD>Output File Name:</TD>
            <TD><input type="text" name="output_name" value="results"></TD>
        </TR>
        <TR>
            <TD>E-mail Address:</TD>
            <TD><input type="text" name="email_address" value="example@gmail.com">         
            </TD>
        </TR>
        <TR>
            <TD><input type="submit" value="Submit"></TD>
        </TR>
    </TABLE>
</form>
</body>
</html> 
```

用于调用 python 脚本的示例 shell 脚本，该脚本将位于您的 cgi-bin 或其他指定的“可执行”允许目录中。

```
#!/bin/bash
# Runs the cgi-script, using the shell, using 'get' results from the index html form we parse it to the options in the python script.

echo "Content-type: text/html"
echo ""

echo '<html>'
echo '<head>'
echo '<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">'

echo '<title></title>'
echo '</head>'
echo '<body>'
query=`echo "$QUERY_STRING" | sed -n 's/^.*query=\([^&]*\).*$/\1/p' | sed "s/%20/ /g"`
pages=`echo "$QUERY_STRING" | sed -n 's/^.*pages=\([^&]*\).*$/\1/p' | sed "s/%20/ /g"`
output_name=`echo "$QUERY_STRING" | sed -n 's/^.*output_name=\([^&]*\).*$/\1/p' | sed "s/%20/ /g"`
email_address=`echo "$QUERY_STRING" | sed -n 's/^.*email_address=\([^&]*\).*$/\1/p' | sed "s/%20/ /g"`
echo '<h1>'
echo 'Running...'
echo '</h1>'
DIR=$( cd "$( dirname "${BASH_SOURCE[0]}" )" && pwd )
cd "$DIR"
python main.py -query $query -pages $pages -o $output_name
echo ''

echo '</body>'
echo '</html>' 
```

示例 Python 脚本。

从 shell 脚本调用：

```
#!/usr/bin/env python
from xgoogle.search import GoogleSearch
import urllib2, re, csv, os
import argparse

class ScrapeProcess(object):
emails = []  # for duplication prevention

def __init__(self, filename):
    self.filename  = filename
    self.csvfile   = open(filename, 'wb+')
    self.csvwriter = csv.writer(self.csvfile)

def go(self, query, pages):
    search = GoogleSearch(query)
    search.results_per_page = 10

    for i in range(pages):
        search.page = i
        results = search.get_results()
        for page in results:
            self.scrape(page)

def scrape(self, page):
    try:
        request = urllib2.Request(page.url.encode("utf8"))
        html    = urllib2.urlopen(request).read()
    except Exception, e:
        return

    emails = re.findall(r'([A-Za-z0-9\.\+_-]+@[A-Za-z0-9\._-]+\.[a-zA-Z]*)', html)

    for email in emails:
        if email not in self.emails:  # if not a duplicate
            self.csvwriter.writerow([page.title.encode('utf8'), page.url.encode("utf8"), email])
            self.emails.append(email)

parser = argparse.ArgumentParser(description='Scrape Google results for emails')
parser.add_argument('-query', type=str, default='test', help='a query to use for the Google search')
parser.add_argument('-pages', type=int, default=10, help='number of Google results pages to scrape')
parser.add_argument('-o', type=str, default='emails.csv', help='output filename')    

args   = parser.parse_args()
args.o = args.o+'.csv' if '.csv' not in args.o else args.o  # make sure filename has .csv extension

s = ScrapeProcess(args.o)
s.go(args.query, args.pages) 
```

完整的工作示例位于此处： [https ://github.com/mhenes/Google-EmailScraper](https://github.com/mhenes/Google-EmailScraper)

免责声明这是我的 git - 使用分叉项目来展示此功能。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2015-11-18T19:47:34.987

IronPython 可能是您正在寻找的解决方案：http: [//ironpython.net/](http://ironpython.net/)

通过以下链接中提供的教程和代码，您应该能够创建响应事件的 html 元素，例如您提到的 html“按钮”。

我一直在使用 IronPython，并且在对脚本的内部和外部调用方面取得了成功。下面的教程很可能包含您可能遇到的任何其他问题。

**helloworld.html** -

> IronPython 警报示例，文档中的内部 python 脚本。
> 
> 要在浏览器中开发 Python 应用程序，您只需要您喜欢的文本编辑器；所以打开它，创建一个 HTML 文件，引用 dlr.js，然后你可以使用 script-tags 来运行 Python 代码：

```
<html>
<head>
<script src="http://gestalt.ironpython.net/dlr-latest.js"
        type="text/javascript"></script>
</head>
<body>
<script type="text/python">
  window.Alert("Hello from Python")
</script>
</body>
</html> 
```

**复制文件**

> 在 REPL 窗口中执行此操作，所以让我们在浏览器中打开一个；只需在页面中放置以下脚本标签：

```
from Microsoft.Scripting.Silverlight import Repl

if 'document' not in globals():
  import System
  document = System.Windows.Browser.HtmlPage.Document
if 'window' not in globals():
  import System
  window = System.Windows.Browser.HtmlPage.Window

class PythonRepl(object):
  __ironpython__ = 'silverlightDlrRepl1'
  __minimize__ = 'silverlightDlrWindowLink'
  __container__ = 'silverlightDlrWindowContainer'

  def __init__(self):
    self.repl = Repl.Show('python')

  def hide_all_panels(self):
    window.Eval("sdlrw.hideAllPanels(document.getElementById(\"%s\"))" % self.__minimize__)

  def show_panel(self, id):
    window.Eval("sdlrw.showPanel(\"%s\")" % id)

  def show_ironpython(self):
    self.show_panel(self.__ironpython__)

  def remove(self):
    document.Body.RemoveChild(document.silverlightDlrWindowContainer)

def show():
  prepl = PythonRepl()
  repl = prepl.repl
  import sys
  sys.stdout = repl.OutputBuffer
  sys.stderr = repl.OutputBuffer
  return prepl

if document.QueryString.ContainsKey('console'): 
  prepl = show()
  if document.QueryString['console'] == 'hide':
    prepl.hide_all_panels()
  else:
    prepl.show_ironpython() 
```

**dom.py**

> IronPython 示例：用于添加 DOM 元素并将其 HTML 内容更改为“哎呀！” 点击时：

```
dir(document) 
div = document.CreateElement("div")
div.innerHTML = "Hello from Python!"
document.Body.AppendChild(div)
div.id = "message"
div.SetStyleAttribute("font-size", "24px")
def say_ouch(o, e):
    o.innerHTML = "Ouch!"

document.message.events.onclick += say_ouch 
```

注意事项：IronPython 需要 SilverLight，因此它只能与 FireFox 或 Safari 一起使用。

与您的问题相关的优秀教程：http: [//jimmy.schementi.com/2010/03/pycon-2010-python-in-browser.html](http://jimmy.schementi.com/2010/03/pycon-2010-python-in-browser.html)

# java - javafuse可以工作吗？

> ID：11233838
> 
> 赞同：5
> 
> 时间：2012-06-27T19:47:14.733
> 
> 标签：java, fuse

我想用 Java 构建一个基于[FUSE](http://fuse.sourceforge.net/)的地下文件系统应用程序。网上有一些绑定库，[Fuse-J](http://sourceforge.net/projects/fuse-j/)、[jnetfs](https://launchpad.net/jnetfs/)、[Fuseforjava](http://sourceforge.net/projects/fuseforjava/)、[javafuse](http://code.google.com/p/javafuse/)。

到目前为止，他们似乎都还没有真正活着，所以我第一次尝试`JavaFuse`。

我们必须实现的接口在那里： [http ://code.google.com/p/javafuse/source/browse/fs/JavaFS.java](http://code.google.com/p/javafuse/source/browse/fs/JavaFS.java)

我想重现这个[fuse helloworld 示例](http://fuse.sourceforge.net/helloworld.html)。

* * *

**问题：**这有没有可能：

```
static int hello_readdir(const char *path, void *buf, fuse_fill_dir_t filler,
                     off_t offset, struct fuse_file_info *fi)
{
(void) offset;
(void) fi;

if(strcmp(path, "/") != 0)
    return -ENOENT;

filler(buf, ".", NULL, 0);
filler(buf, "..", NULL, 0);
filler(buf, hello_path + 1, NULL, 0);

return 0;
} 
```

可以通过这个java函数实现：

```
public int readdir_pre(String path, long buf, long filler, int offset, Fuse_file_info info);
public int readdir_post(String path, long buf, long filler, int offset, Fuse_file_info info, int result); 
```

*   [fuse_file_info](http://code.google.com/p/javafuse/source/browse/src/java/Fuse_file_info.java)

也许我错过了一些东西，但我看不到如何使用`filler`来填充目录内容......

对于这个 helloworld 示例，还有其他一些奇怪的地方，例如：

```
public int read_post(String path, String buf, int size, int offset, Fuse_file_info info, int result); 
```

它应该*填充* `buf`字节数据，`size`而 Java`String`应该是不可变的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-06-09T22:55:23.710

你可以试试[jnr-fuse](https://github.com/SerCeMan/jnr-fuse)项目。

该项目使用 JNR，因此您可以实现完整的 JNI 性能和易于实施。

实现[hello-world 文件系统](https://github.com/SerCeMan/jnr-fuse/blob/master/src/main/java/ru/serce/jnrfuse/examples/HelloFuse.java#L43)过滤器的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T18:25:31.250

我不太确定，你想用双重函数`read_pre`&做什么`read_post`。

虽然我猜，它们代表工作前和工作后。也许您可以声明正常`readdir()`并从内部称您为 pre & post？来回传递相同的论点？因为你必须`readdir()`向`fuse_main()`.

关于缓冲区的第二件事，它只需要一个字节保存存储。您可以将字符数组或其中包含字节的任何内容传递给它，用它`size_t size`表示缓冲区的大小。在`helloworld.c`中，字符串字符通过 复制到缓冲区`memcpy()`。您可以从文件中读取字节并将它们作为缓冲区以及适当的长度传递。

我是 FUSE 的新手，想知道使用 Java 与标准 C 相比如何工作。

# loops - 质数列表程序

> ID：11233839
> 
> 赞同：-3
> 
> 时间：2012-06-27T19:47:16.470
> 
> 标签：loops, assembly, hardware, primes

首先我想证明这不是作业[http://computer.atlas4e.com/](http://computer.atlas4e.com/)

我真的需要通过解释来理解这一点，因为我正在尝试自己了解计算机的基本知识，感谢您的帮助

```
`Prime Number List Program 
Write a main program that generates a list of prime numbers. The program should use the PrimeTest subroutine to test whether each of the numbers 2, 3, 4, 5, 6…, 255 & 256 is a prime. Each number that is found to be a prime should be added to a list in memory. The list of primes should be stored in consecutive memory locations.  Use a location named StartPrimeList to point to the start address of the prime number list. Use a pointer called PrimeListPtr to point to the (current) end of the list, PrimeListPtr will be incremented every time a prime number is appended to the list.
Use a location named PrN to store the number that you are checking. Start by storing a 2 in PrN. In a loop, you should call PrimeTest to determine whether PrN is a prime. If PrN is a prime, then append it to the list. Then add 1 to PrN and jump back to the start of the loop to test the next value of PrN.`
The output of the program should appear starting at location StartPrimeList as follows:-
Address Contents
 [StartPrimeList]   2
[StartPrimeList+1]  3
[StartPrimeList+2]  5
[StartPrimeList+3]  7
    …
    …
[StartPrimeList+?]  Largest Prime <= 256

(251 - 54th prime number starting from 2 <=256)
(257 - 55th prime number >256)

`

Mark Allocations for Program 2

•   A program header in the program listing explaining how the program works.   
•   Sensible/Relevant program comments on sections of assembler language.       
•   Relevant labelling of loops and data items.                         [4]
•   Program runs successfully on xComputer and produces correct output for given input. 
` 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-29T21:42:48.520

“编写一个生成素数列表的主程序。” 这是你的基本问题。稍后将提供更多详细信息以帮助您回答。

“程序应该使用 PrimeTest 子程序来测试数字 2、3、4、5、6……、255 和 256 中的每一个是否是素数。” 你能做这部分吗？如果没有，那么编写你能做到的最好的代码，并在这里再次提出一个具体的问题。

“每个被发现是素数的数字都应该添加到内存中的列表中。” 你能做这部分吗？如果没有，那么编写你能做到的最好的代码，并在这里再次提出一个具体的问题。

“素数列表应该存储在连续的内存位置。” 你能做这部分吗？如果没有，那么编写你能做到的最好的代码，并在这里再次提出一个具体的问题。

“使用名为 StartPrimeList 的位置指向素数列表的起始地址。” 你现在应该已经收到消息了。使用问题本身给出的优秀建议来帮助你。编写你的代码。如果它有效，那么很好。如果没有，请在此处发布，解释它应该做什么以及您认为问题可能是什么。告诉我们您尝试了哪些方法，以及哪些方法没有解决问题。这将有助于我们不得不重复您的工作。

我们不会为您编写程序。你必须写它；我们会*帮*你写的。

# facebook - 应用标签粉丝页中的滚动条

> ID：11233845
> 
> 赞同：1
> 
> 时间：2012-06-27T19:47:44.360
> 
> 标签：facebook, scrollbar, fluid-layout, scrollbars

我的应用程序中的标签滚动条有问题。

这些措施是正确的。

> 宽度：810 像素高度：“博客”流体。

细节是该网站是作为一个 Wordpress 风格的博客制作的，其中一些页面特别是这个带有滚动条的博客的页面非常大。我一直在研究“流体”。

developer.facebook.com/blog/post/549/

如何在 wordpress 制作的网站上应用本教程？

链接是这个应用程序——注意选项卡“博客”并查看滚动条。

[http://www.facebook.com/pages/Teste-Pagina/302897009754706?sk=app_314182471998939](http://www.facebook.com/pages/Teste-Pagina/302897009754706?sk=app_314182471998939)

我注意到只有当页面高度非常大时才会发生这种情况。你能帮助我将不胜感激。

以下是应用程序的一些设置：

[http://impactum.com.br/images/config_developers2.png](http://impactum.com.br/images/config_developers2.png)

ps：做同样的程序放HTML也没用。

如果你能帮助我，我将不胜感激

# javascript - jQuery - onclick：为什么它在添加处理程序时执行单击右键？

> ID：11233847
> 
> 赞同：2
> 
> 时间：2012-06-27T19:47:55.143
> 
> 标签：javascript, jquery, html, xhtml, onclick

问题：

我在使用 jQuery 时遇到了一点问题：考虑一下这个 HTML，我想在其中左键单击“https”，更改它的值，然后单击确定。确定后，它应该删除文本框，并重新附加 onclick 处理程序。确实如此，但当前单击已发出 onclick ...

为什么 ？以及如何正确地做到这一点？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Tabelle editieren</title>
    <!--
    <script src="jquery-1.4.4.min.js" type="text/javascript"></script>
    -->
    <script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.1.js"></script>  

    <style type="text/css" media="all">
        html {margin: 0px; padding: 0px; height: 100%;}
        body {margin: 0px; padding: 0px; height: 100%;}
        input{margin: 0px; padding: 0px; }

        tr:nth-child(2n+1) {background-color: #F0F0F0;}
        tr:nth-child(2n)   {background-color: #FEFEFE;}

        td
        {
            margin: 0px; padding: 0.5cm; padding: 0px; text-align: left; 
        }

    </style>

    <script type="text/javascript" language="javascript">

        function hello(me) {
            //alert("hello");
            var str = $(me).text();
            //alert(str);
            $(me).html("<input id=\"my1\" type=\"text\" style=\"width: 198px; height: 100%;\" value=\"" + str + "\" /><input id=\"my1confirm\" type=\"button\" onclick=\"bye(this);\"style=\"width: 35px;\" value=\"" + "OK" + "\" />");
            $(me).attr('onclick', '').unbind('click');

            return false;
        }

        function bye(me) {
            var objTR = $(me).parent();

            //var tb = $(me).closest('table');
            var tb = objTR.find('input');
            var str = tb.val();
            tb.remove();

            objTR.text(str);
            alert("TODO: sending change event with { id : \"" + objTR.attr('id') + "\", str : \"" + str + "\" } to server");

            /*
            objTR.click(function () {
                alert("hi");
                return false;
            });
            */

            objTR.attr('onclick', '').bind("click", function (e) {
                e.preventDefault();
                alert("it shouldn't  execute this in this click, but it does... ");
                //hello(this);
                //event.stopImmediatePropagation();
            });

            return false;
        }

        $(document).ready(function () {
            //$('#myDataTable').dataTable().makeEditable();

        });
    </script>

</head>
<body style="margin: 0.5cm;">
    <h1>Application configuration</h1>
    <!--

    -->
    <table border="1" style="border-collapse: collapse;" >
      <thead>
        <tr style="background-color: Black; color:White; font-weight: bold; text-transform: capitalize;">
          <th style="width: 235px; text-align: left;">key</th>
          <th style="width: 235px; text-align: left;">value</th>
        </tr>
      </thead>
      <tfoot>
        <tr style="background-color: Black; color:White; font-weight: bold; text-transform: capitalize;">
          <th style="text-align: left;">key</th>
          <th style="text-align: left;">value</th>
        </tr>
      </tfoot>
      <tbody>
        <tr>
          <td>Environment</td>
          <td id="server">testing</td>
        </tr>

        <tr>
          <td>Protocol</td>
          <td id="Protocol" onclick="hello(this);">https</td>
        </tr>

        <tr>
          <td>UserHashMode</td>
          <td id="UserHashMode">true</td>
        </tr>

        <tr>
          <td>Logo</td>
          <td id="Logo">LogoFileCustomerN.png</td>
        </tr>

      </tbody>
    </table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:11:55.613

jQuery 似乎无法解除内联事件处理程序的绑定：[Unbinding inline onClick not working in jQuery?](https://stackoverflow.com/questions/2768109/unbinding-inline-onclick-not-working-in-jquery)

所以我不确定它是否会起作用，但不要使用：

```
.attr("onclick", "") 
```

尝试：

```
.removeAttr("onclick") 
```

让我们知道这是否会改变任何事情。

**更新：**

我制作了一个 jsFiddle 来向您展示它如何“更轻松”地运行：http: [//jsfiddle.net/S2ARR/3/](http://jsfiddle.net/S2ARR/3/)

其中很多取决于某些事情，例如使用我的结构 - 在列内放置一个跨度而不是对所有内容使用该列。我没有使用元素的 id 进行 jQuery 选择，因为我不确定您为什么不使用 - 如果您设置了元素的 id 并且需要访问它们，那么您不妨在 jQuery 中使用 id 选择器。因此，如果您只使用 id，则在我的示例中不需要使用 .parent() 或 .find() 。希望这就是你要找的。我认为重要的是 .stopPropagation() 调用，否则它似乎不起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:39:59.550

我将您的事件更改为委托，从表中删除 onclick 并使用 jquery 调用它。但是我不确定我得到的是你的欲望行为。

[jsfiddle](http://jsfiddle.net/3s6vn/11/)

**更新**

嗨，我更新了所需的行为。

[解决方案](http://jsfiddle.net/3s6vn/45/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T19:59:01.593

您可以使用 jquery 将其绑定到表格单元格，而不是通过 onclick 属性绑定事件。

```
$(function(){
    $("#Protocol").click(function(){ 
       // your content
    });
}); 
```

然后，您可以保证以后可以使用 unbind 取消绑定事件。

# c# - 如何将自定义控件添加到工具箱？

> ID：11233848
> 
> 赞同：5
> 
> 时间：2012-06-27T19:47:57.930
> 
> 标签：c#, visual-c++, toolbox, visual-studio-2010

我创建了一个基于 Picturebox 的自定义控件：

```
public class Timebar : System.Windows.Forms.PictureBox 
```

如果我在表单的初始化方法中手动创建控件/设置所有值等，这将正常工作。

现在我也在工具箱的顶部找到了这个：http: [//i.imgur.com/4KUc0.png](http://i.imgur.com/4KUc0.png)

当我尝试通过 msvc 插入它时，我得到一个错误。

```
Failed to create component 'Timebar'.  The error message follows: 
'System.MissingMethodException: Constructor on type 'SC.Timebar' not found. 
```

这并不是我的组件 Timebar 的一个大问题（因为我将手动添加该组件），但它与我想要制作的自定义 Button 类有关（比默认值更花哨的东西）。

类中有一个构造函数：

```
public Timebar(Data refr)
{
    this._refr = refr;
} 
```

如何解决上述错误？

谢谢，

〜Tgys

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T19:52:34.453

设计器中使用的控件必须具有无参数构造函数。设计者需要创建一个控件来显示并允许您操作它，但它不知道它应该如何调用需要参数的构造函数。

所以，我要做的是创建一个无参数构造函数，它使用默认值链接另一个构造函数，即

```
class Foo
{
    public Foo() : this(SomeType.Value) { }
    public Foo(SomeType whatever) : { /* do stuff /* }
} 
```

# asp.net - 具有 2.0 应用程序池的子应用程序在具有 4.0 应用程序池的站点下运行

> ID：11233852
> 
> 赞同：4
> 
> 时间：2012-06-27T19:48:12.480
> 
> 标签：asp.net, .net, iis, application-pool, .net-framework-version

### 设想

我有一个使用 ASP.Net 4.0 构建的 IIS 站点应用程序，使用它自己的应用程序 v4.0 应用程序池运行。该站点托管的是一个使用 ASP.Net 2.0 构建的子应用程序，具有自己的应用程序池。

```
<site name="Intranet" id="1" serverAutoStart="true">
    <application path="/" applicationPool="Site-Intranet">
        <virtualDirectory path="/" physicalPath="D:\sites\intranet" />
    </application>
    <application path="/ChildApp" applicationPool="App-ChildApp">
        <virtualDirectory path="/" physicalPath="D:\apps\childapp" />
    </application>
</site> 
```

我的第一个想法是 2.0 应用程序应该使用 v2.0 应用程序池运行。这样做时访问 URL 会导致服务器错误——它无法识别父站点的 web.config 编译设置中的“targetFramework”属性。

我理解为什么，并找到了两种解决方案/解决方法，但我并不完全理解每一种的含义。

### 修复

*1.设置应用程序的应用程序池为`v4.0`。*

*2\. 将应用程序的应用程序池保留为`v2.0`，但更改父站点的 web.config 以中断该`<compilation>`部分的继承：*

```
<location path="." inheritInChildApplications="false">
    <system.web>
        <compilation targetFramework="4.0" debug="true" />
    </system.web>
</location> 
```

### 问题）：

这些修复/解决方案到底发生了什么？

在场景 #1 中，2.0 应用程序是否由 4.0 CLR 编译/运行？假设是这样，CLR 是否试图将其作为 2.0 应用程序运行（即向后兼容）？还是只是假设它是一个 4.0 网络应用程序（似乎很危险）？

在场景 #2 中，我知道我们已经阻止子应用程序查看`targetFramework`属性，但是 2.0 CLR 真的在编译/运行应用程序吗？如果是这样，这就是在 ASP.Net 4.0 站点下安全运行 ASP.Net 2.0 应用程序所需的全部内容吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2015-05-10T20:44:14.910

我已经多次使用场景 #2 并且从未遇到任何问题。所以**是**的，这就是在 ASP.Net 4.0 站点下安全运行 ASP.Net 2.0 应用程序所需的全部内容。

尽管没有人可以回答您的两个应用程序肯定会以这种方式协同工作。可能最好进行完整的系统测试，如果您确实发现任何特定问题，请发布新问题。

# php - 在具有严格连接设置的服务器上使用 php oauth

> ID：11233855
> 
> 赞同：0
> 
> 时间：2012-06-27T19:48:24.573
> 
> 标签：php, oauth, proxy

我的服务器正在阻止与处理我传递给 oauth 的身份验证的服务器的连接。所以我想知道是否有办法让 OAuth fetch 方法以某种方式通过代理？

如果需要，我可以提供更多信息。

# android - 安卓子活动

> ID：11233856
> 
> 赞同：0
> 
> 时间：2012-06-27T19:48:25.050
> 
> 标签：android

我是安卓新手。

我关于子活动的问题。

带有子活动 1 和 2 的主要活动。

我有一个带有这些按钮的 3 个按钮的主要活动，我将值传递给我的孩子 2 号活动，在孩子 2 中我用这些值做一些事情。

当我按下孩子 2 中的按钮时，我会将值返回给孩子 1 并将值放入 TextViews。

现在我的问题是当我完成孩子 2 时，值会自动返回到主要活动。

这不是我想要的，有解决方案。

我可以放置 startActivityForResult 吗？我不想把它放在主要活动中。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T19:54:27.890

我会将这些值作为附加值添加到用于启动子 1 的 Intent 中，就像您将值传递给子 2 时所做的那样。

# .net - WebServiceSecurity 参考。它是什么？

> ID：11233857
> 
> 赞同：-1
> 
> 时间：2012-06-27T19:48:31.187
> 
> 标签：.net, visual-studio-2010, web-services

我继承了一个包含对“WebServiceSecurity”引用的项目。这个dll是什么？它是 .NET 程序集吗？

此外，我的系统位于何处？

这是来自 VS 的解决方案资源管理器相关部分的屏幕截图。

![在此处输入图像描述](../Images/13d2780fa8935128866f74427e05353c.png)

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:52:08.653

它最终不是 .NET 程序集，而是第三方 CRM 供应商 (Pivotal) 的一部分。

# php - html 输出格式化 php

> ID：11233861
> 
> 赞同：-3
> 
> 时间：2012-06-27T19:48:54.813
> 
> 标签：php, html, arrays

我正在尝试使用 php 格式化我的数据库中的一些 html 输出，这是我的问题：

应该如何形成：

```
...
<li>
    <div class="row-wrapper">
       <div class="some-class-1">ARRAY-ELEMENT-1</div>
       <div class="some-class-1">ARRAY-ELEMENT-2</div>
       <div class="some-class-1">ARRAY-ELEMENT-3</div>
       <div class="some-class-2">ARRAY-ELEMENT-4</div>
    </div>
    <div class="row-wrapper">
      <div class="some-class-1">ARRAY-ELEMENT-5</div>
      <div class="some-class-1">ARRAY-ELEMENT-6</div>
      <div class="some-class-1">ARRAY-ELEMENT-7</div>
      <div class="some-class-2">ARRAY-ELEMENT-8</div>
    </div>
    <div class="row-wrapper">
      <div class="some-class-1">ARRAY-ELEMENT-9</div>
      <div class="some-class-1">ARRAY-ELEMENT-10</div>
      <div class="some-class-1">ARRAY-ELEMENT-11</div>
      <div class="some-class-2">ARRAY-ELEMENT-12</div>
    </div>
</li>
<li>
  <div class="row-wrapper">
    <div class="some-class-1">ARRAY-ELEMENT-13</div>
    <div class="some-class-1">ARRAY-ELEMENT-14</div>
    <div class="some-class-1">ARRAY-ELEMENT-15</div>
    <div class="some-class-2">ARRAY-ELEMENT-16</div>
  </div>
  <div class="row-wrapper">
    <div class="some-class-1">ARRAY-ELEMENT-17</div>
    <div class="some-class-1">ARRAY-ELEMENT-18</div>
    <div class="some-class-1">ARRAY-ELEMENT-19</div>
    <div class="some-class-2">ARRAY-ELEMENT-20</div>
  </div>
  <div class="row-wrapper">
    <div class="some-class-1">ARRAY-ELEMENT-21</div>
    <div class="some-class-1">ARRAY-ELEMENT-22</div>
    <div class="some-class-1">ARRAY-ELEMENT-23</div>
    <div class="some-class-2">ARRAY-ELEMENT-24</div>
  </div>
</li>
... etc. 
```

数据保存在从 mysql db 收集的数组中，到目前为止我得到了这个：

```
$num_thumbs = 4; //Number od elemets in a row
$result = myQueryFunction("SELECT * FROM table_name ORDER BY Id ASC"); 
$num_rows = mysql_num_rows($result); 
if (!empty($num_rows)) {
  while ($row = mysql_fetch_array($result)) {
    $thumbs_array[] = "<a href=\"" . $row[0] . "\"><img src=\"" . $row[1] . "\"";
  }
  $thumb_p = "<div>\n";
  mysql_free_result($result);
  $i = 1;
  foreach ($thumbs_array as &$thumb_link) {
    if ($i == $num_thumbs) {
        $i = 1;
        $thumb_p .= "<div class=\"some-class-2\">" . $thumb_link . "</div>";
        $thumb_p .= "</div>\n<div class=\"row-wrapper\">\n";
    } else {
            $thumb_p .= "\t\n<div class=\"some-class-1\">" . $thumb_link . "</div>";
        $i++;
    }

  }
  $thumb_p .= "\n</div>\n";
}

print($thumb_p); 
```

这仅涵盖代码格式的这一部分：

```
 <div class="row-wrapper">
    <div class="some-class-1">ARRAY-ELEMENT-13</div>
    <div class="some-class-1">ARRAY-ELEMENT-14</div>
    <div class="some-class-1">ARRAY-ELEMENT-15</div>
    <div class="some-class-2">ARRAY-ELEMENT-16</div>
  </div>
  <div class="row-wrapper">
    <div class="some-class-1">ARRAY-ELEMENT-17</div>
    <div class="some-class-1">ARRAY-ELEMENT-18</div>
    <div class="some-class-1">ARRAY-ELEMENT-19</div>
    <div class="some-class-2">ARRAY-ELEMENT-20</div>
  </div>
  <div class="row-wrapper">
    <div class="some-class-1">ARRAY-ELEMENT-21</div>
    <div class="some-class-1">ARRAY-ELEMENT-22</div>
    <div class="some-class-1">ARRAY-ELEMENT-23</div>
    <div class="some-class-2">ARRAY-ELEMENT-24</div>
  </div> 
```

我一直在考虑使用一些变量 $newList = null; 这将在每一行更新，所以我可以检查它是否改变了下一个。有任何想法吗？提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:39:25.800

看来您正试图每三个 div 放一个 li 。在这种情况下，您可以这样做：

```
$thumb_p = "<li>\n<div class=\"row-wrapper\">\n";
mysql_free_result($result);
$i = 1;
$j = 0;
foreach ($thumbs_array as &$thumb_link) {
  if ($i == $num_thumbs) {
      $i = 1;
      $thumb_p .= "<div class=\"some-class-2\">" . $thumb_link . "</div>";
      $thumb_p .= "</div>\n";
      if($j == 3)
      {
          $thumb_p .= "</li>\n<li>";
          $j = 0;
      }
      $thumb_p .= "<div class=\"row-wrapper\">\n";
      $j++;
  } else {
      $thumb_p .= "\t\n<div class=\"some-class-1\">" . $thumb_link . "</div>";
      $i++;
  }
}
$thumb_p .= "\n</div>\n</li>\n"; 
```

我实际上无法尝试，但我认为没关系。每打印三个行包装器就会添加一个 li 。

# python - 在 Python 的默认字典中访问最后输入的键的最佳方法是什么？

> ID：11233863
> 
> 赞同：2
> 
> 时间：2012-06-27T19:49:11.353
> 
> 标签：python, python-2.7

我有一个默认的字典，其主键是字符串形式的时间戳 'YYYYMMDD HH:MM:SS'。键是按顺序输入的。如何访问最后输入的密钥或具有最新时间戳的密钥？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T19:53:42.377

如果您只需要访问最后输入的项目，请使用模块`OrderedDict`中的 an 。`collections`但是，如果您需要保持连续排序，则需要完全使用不同的数据结构，或者至少使用一种辅助数据结构来进行索引。

编辑：我要补充一点，如果访问最后一个元素是您很少要做的操作，那么简单地对字典的键进行排序并选择最大值可能就足够了。但是，如果您必须经常这样做，重复排序将变得非常昂贵。根据您的代码的工作方式，最简单的方法可能是简单地维护一个变量，该变量在任何给定点都包含添加的最后一个键和/或添加的最大值（即，随着每个后续添加到 dict ）。但是，如果您想要维护超出最后一项的添加记录，并且不需要连续排序，那么 an`OrderedDict`是理想的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:53:31.880

使用[OrderedDict](http://docs.python.org/library/collections.html#collections.OrderedDict)而不是内置的 dict

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:04:59.903

你可以尝试这样的事情：

```
>>> import time
>>> data ={'20120627 21:20:23':'first','20120627 21:20:40':'last'}
>>> latest = lambda d: time.strftime('%Y%m%d %H:%M:%S',max(map(lambda x: time.strptime(x,'%Y%m%d %H:%M:%S'),d.keys())))
>>> data[latest(data)]
'last' 
```

但在大型数据集上可能会很慢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:44:57.363

如果您想知道最后进入的人（根据进入时间），请参见以下示例：

```
import datetime

format='%Y%m%d %H:%M'

Dict={'20010203 12:00':'Dave',
      '20000504 03:00':'Pete',
      '20020825 23:00':'kathy',
      '20030102 01:00':'Ray'}

myDict={}

for key,val in Dict.iteritems():

    TIME= str(datetime.datetime.strptime(key,format))

    myDict[TIME]= val

myDict=sorted(myDict.iteritems(), key=lambda (TIME,v): (TIME))

print myDict[-1] 
```

# java - 如何清空文件内容然后多次附加文本

> ID：11233866
> 
> 赞同：2
> 
> 时间：2012-06-27T19:49:28.490
> 
> 标签：java, file-io

我有一个文件（file.txt），我需要清空他当前的内容，然后多次追加一些文本。

示例：file.txt 当前内容为：

> 啊啊啊
> 
> bbb
> 
> ccc

我想删除这个内容，然后第一次追加：

> ddd

第二次：

> eee

等等...

我试过这个：

```
// empty the current content
fileOut = new FileWriter("file.txt");
fileOut.write("");
fileOut.close();

// append
fileOut = new FileWriter("file.txt", true);

// when I want to write something I just do this multiple times:
fileOut.write("text");
fileOut.flush(); 
```

这工作正常，但它似乎效率低下，因为我打开文件 2 次只是为了删除当前内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-27T19:55:49.613

当您打开文件以使用新文本写入时，它将覆盖文件中已有的任何内容。

一个很好的方法是

```
// empty the current content
fileOut = new FileWriter("file.txt");
fileOut.write("");
fileOut.append("all your text");
fileOut.close(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T19:58:14.790

第一个答案不正确。如果您为第二个参数创建一个带有 true 标志的新文件写入器，它将以附加模式打开。这将导致任何 write(string) 命令将文本“附加”到文件末尾，而不是清除已经存在的任何文本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T20:00:11.863

我只是愚蠢。

我只需要这样做：

```
// empty the current content
fileOut = new FileWriter("file.txt");

// when I want to write something I just do this multiple times:
fileOut.write("text");
fileOut.flush(); 
```

最后关闭流。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-07T19:55:43.617

我看到这个问题在很多 Java 版本之前都得到了回答......从 Java 1.7 开始并使用新的 FileWriter + BufferWriter + PrintWriter 进行附加（如[this SO answer](https://stackoverflow.com/questions/1625234/how-to-append-text-to-an-existing-file-in-java)中所推荐），我对文件擦除然后附加的建议：

```
FileWriter fw = new FileWriter(myFilePath); //this erases previous content
fw = new FileWriter(myFilePath, true); //this reopens file for appending 
BufferedWriter bw = new BufferedWriter(fw);
PrintWriter pw = new PrintWriter(bw);
pw.println("text"); 
//some code ...
pw.println("more text"); //appends more text 
pw.flush();
pw.close(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-16T19:06:52.333

我能想到的最好的是：

```
Files.newBufferedWriter(pathObject , StandardOpenOption.TRUNCATE_EXISTING); 
```

和

```
Files.newInputStream(pathObject , StandardOpenOption.TRUNCATE_EXISTING); 
```

在这两种情况下，如果 pathObject 中指定的文件是可写的，那么该文件将被截断。无需调用 write() 函数。上面的代码足以清空/截断文件。这是 java 8 中的新功能。

希望能帮助到你

# c# - 您可以在 C# 中使用 Revit API 创建主题演讲吗

> ID：11233867
> 
> 赞同：1
> 
> 时间：2012-06-27T19:49:39.267
> 
> 标签：c#, revit, revit-api

我正在尝试通过 Revit 2012 API 创建主题标签。但是，我现在发现在 Internet 或示例中的任何位置创建 Keynote Tag 的参考。我看到 BuiltInCategory.OST_KeynoteTags 是 IndependentTag 类的一部分，根据[http://thebuildingcoder.typepad.com/files/guide-to-placing-family-instances-with-the-api.doc](http://thebuildingcoder.typepad.com/files/guide-to-placing-family-instances-with-the-api.doc)你需要使用TM_ADDBY_CATEGORY TagMode 创建主题演讲。但是，当您尝试通过 ChangeTypeId 更改新标签时，您会收到错误消息。

有没有人弄清楚这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-29T00:48:31.867

我还没有机会尝试，但我认为你不走运。在大多数情况下，您无法使用 API 执行在 Revit 中无法以交互方式执行的操作。我确实快速测试了您不能将多类别标签的类型更改为主题标签。虽然它们都是`IndependentTag`元素，但它们是不同的类别，根据我的经验，您可以切换放置元素的类别非常罕见。

# jquery - 选择框发布到 jquery ajax 将 [] 附加到字段名称

> ID：11233869
> 
> 赞同：0
> 
> 时间：2012-06-27T19:49:44.780
> 
> 标签：jquery, ajax

I have a select box on a page that does a post with jQuery using .ajax and it works great when the select box can only select one value, but when I change it to "multiple" it appends [] to the end of the field姓名。例如，没有多个的 listID 很好，但使用“multiple”作为属性会将名称更改为 listID[]。知道发生了什么吗？

```
<select multiple size="5" name="frmRecipientList" id="listID">

$.ajax({
            url: '/app/components/MailingsReport.cfc',
            //POST method is used
            type: "POST",
            complete: function(){
                $("#loader").hide();
            },
            //pass the data 
            data: {
                method: "createEmailing",
                title: $('#title').val(),
                campaignID: $('#campaignID').val(),
                brandID: $('#brandID').val(),
                listID: $('#listID').val(),
                maxRecipients: $('#maxRecipients').val(),
                subject: $('#subject').val(),
                fromName: $('#viewFrom').val(),
                testToEmail: $('#testToEmail').val(),
                htmlCode:  $('#htmlCode').val()
                 },
            dataType: "html", 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:53:56.207

`listID`是`<select multiple>`。这意味着可以有多个值。`[]`使它成为一个数组，因此在服务器上，它可以读取所有值。

# encryption - 使用 erlang + RSA 解密字符串

> ID：11233872
> 
> 赞同：2
> 
> 时间：2012-06-27T19:49:57.470
> 
> 标签：encryption, erlang, rsa

我有两个独立的应用程序，一个用 Java 编写，另一个用 Erlang 编写。两个应用程序以 String 格式相互发送消息，这些消息在 Java 应用程序中加密，需要在 Erlang 应用程序中解密。

问题是这样的：我正在使用 RSA 公钥/私钥来进行加密/解密。

如果我加密数据并在我的 Erlang 代码中全部解密，一切都很好。但是，我无法解密来自我的 java 端点的字符串。

这是我正在做的一个简单测试：

```
PrivKey = "-----BEGIN RSA PRIVATE KEY----- ...",
% Data is the string I receive from Java
Data = "s013aA/SGN2iGYEbEIXXKvJiipqisRVfVEDneL8npRgThTHxTnYZESzVfCF463phPZyo5aOozisU7pwDdGKXgY8aqYZC+a3uES5muTb2RrzJ17yYku+g4S44vgIwZ9EyustZafNVGEYfgbWOYaPP/q5k683uR+MRHVqp6UbqMok=",
[PrivEntry] = public_key:pem_decode(list_to_binary(PrivKey)),
Priv = public_key:pem_entry_decode(PrivEntry),
BinData = iolist_to_binary(Data),
public_key:decrypt_private(Data, Priv). 
```

执行此代码会产生如下错误：

```
** exception error: decrypt_failed 
```

我认为问题出在 BinData 的格式上，但我找不到任何地方说明我如何对字符串进行编码以传递给 decrypt_private 函数。

有谁知道该怎么做？这看起来很简单，但我花了很多时间来弄清楚。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T20:03:54.250

再挖一点之后，我找到了答案！我需要将我的字符串解码为 base64 二进制文件。

```
PrivKey = "-----BEGIN RSA PRIVATE KEY----- ...",
% Data is the string I receive from Java
Data = "s013aA/SGN2iGYEbEIXXKvJiipqisRVfVEDneL8npRgThTHxTnYZESzVfCF463phPZyo5aOozisU7pwDdGKXgY8aqYZC+a3uES5muTb2RrzJ17yYku+g4S44vgIwZ9EyustZafNVGEYfgbWOYaPP/q5k683uR+MRHVqp6UbqMok=",
[PrivEntry] = public_key:pem_decode(list_to_binary(PrivKey)),
Priv = public_key:pem_entry_decode(PrivEntry),

BinData = base64:decode(Data), %<-- THIS IS THE MAGIC

public_key:decrypt_private(BinData, Priv). 
```

希望这对其他人有所帮助。

# r - 编译最小 knitr 示例失败

> ID：11233875
> 
> 赞同：11
> 
> 时间：2012-06-27T19:50:05.867
> 
> 标签：r, rstudio, knitr, lyx

我正在着手进行 knitr 设置。我在 Windows 7 Enterprise 机器上安装了最新版本的 R (2.15.1)、Lyx 2.0（包括 MiKTex 2.9 发行版）和 RStudio 0.96.304。如果我打开 Lyx 并简单地查看教程，我可以获得 pdflatex 输出，因此基本系统正在运行。然后我下载了[最小的 Rnw 示例](https://github.com/yihui/knitr/blob/master/inst/examples/knitr-minimal.Rnw)，将其作为 testknitr.Snw 保存在我的工作目录中，在 RStudio 中打开该文件，然后按下编译 PDF 按钮。knitr 输出以关于解析器包的单个警告完成，并生成文件 testknitr.tex。pdflatex.exe 然后运行，但失败，日志文件中的特定错误似乎是

```
 ! LaTeX Error: Environment alltt undefined. 
```

尝试使用 TexWorks 编译 testknitr.tex 时，我收到了同样的错误。我使用 knit("testknitr.Rnw") 从 R 内部创建了该文件 - 由于 RStudio 中的默认设置，扩展名不同。我确实告诉 MikTek 在编译时自动更新包。对[CTAN](http://www.ctan.org/pkg/alltt)的一些研究表明 alltt 环境是 ltxbase 包的一部分，当我查看包管理器时会安装该包。事实上，它似乎是整个事情的核心部分！

好的 - 我正在阅读最小示例页面上的评论，并发现了解决该问题的方法，并且它是 19 小时前的一个已知错误。是的，我仔细检查了 RStudio 设置为使用 knitr，而不是 sweave。我现在收到一个新错误：

```
! LaTeX Error: Command \textquotesingle unavailable in encoding T1\. 
```

**编辑：**好的！事实证明，这个错误并不是致命的——如果花时间看的话，工作目录中有一个可爱的 pdf 最小示例。RStudio 认为编译失败而实际上却失败了，这有点令人担忧？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-28T01:05:19.240

解决方法，对于体验 LaTex-ie 来说可能很明显，是添加

```
\usepackage{alltt} 
```

到文件。根据[Yihui 的评论](http://yihui.name/knitr/demo/minimal/)，这将在未来的版本中修复，或者现在如果您想从 github 获取开发版本。我还测试了@Yihui 上面那行的评论

```
\usepackage[T1]{fontenc} 
```

可以被注释掉。这解决了问题中的第二个问题，RStudio 现在将编译视为成功，清理（一些？）中间文件并立即预览 pdf。

# cassandra - 尝试更新列族时 Cassandra CLI 中的管道损坏

> ID：11233876
> 
> 赞同：1
> 
> 时间：2012-06-27T19:50:08.860
> 
> 标签：cassandra, thrift

当我在 Cassandra CLI 中尝试对列族进行架构更改时，出现异常：

使用 column_metadata = [{column_name: serverip, validation_class: UTF8Type, index_type:KEYS}, {column_name: streamconnectioncount, validation_class: IntegerType}] 更新列族 Stream

“org.apache.thrift.transport.TTransportException：java.net.SocketException：断管”

在 Cassandra 上进行模式更改的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-30T12:40:23.753

这才是正道。其他东西是否对您的专栏家族不利？

损坏的管道通常表示无法访问 Cassandra，尽管我自己没有从 CLI 体验过这种情况。

# java - Java - 在 JEditorPane 中设置选择的字体大小？

> ID：11233882
> 
> 赞同：2
> 
> 时间：2012-06-27T19:50:40.000
> 
> 标签：java, swing, document, font-size, jeditorpane

[感谢devsundar，](https://stackoverflow.com/a/11231204/714968)我发现了如何使选定的文本以`JEditorPane`粗体/下划线/斜体/任何形式显示。如何`Font Size`在 a 中设置所选文本的`JEditorPane`？

我当前更改粗体/斜体/等的方法：

```
 AttributeSet aset = sc.addAttribute(SimpleAttributeSet.EMPTY,
    StyleConstants.StrikeThrough, true);

 pane.getStyledDocument().setCharacterAttributes(pane.getSelectionStart(),
    pane.getSelectionEnd(), aset, true); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-27T20:09:59.693

[这里](https://stackoverflow.com/a/8534162/230513)有一个工作示例`StyledEditorKit.FontSizeAction`，它使用[`StyledEditorKit`](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/StyledEditorKit.html).

![图片](../Images/fa8a498d20ce649a263ceb938c777103.png)

# php - 索引和变量错误

> ID：11233883
> 
> 赞同：0
> 
> 时间：2012-06-27T19:50:44.197
> 
> 标签：php, mysql, sql

我是 php/mysql 编程的菜鸟，我有这个表格可以工作，但是当我有一台新电脑时它就不能工作了。HTML 是一种将结果发送到 php 页面的表单，该页面将其踢入 WAMP mysql 数据库。就像我说的那样，我让这一切工作得很好，我得到了一台新机器，重新安装了 WAMP，复制了数据库和信息，现在它只给我通知，如果我添加 die(mysql_error()) 到最后$sql - ("SELECT .....就像以前一样，它给了我一个无法连接的错误。

```
<?php
$q=$_GET["q"];

$con = mysql_connect("localhost","root","password");

if (!$con)
{
    die('Could not connect: ' . mysql_error());
}

mysql_select_db("kalen_qc", $con);

$sql = ("SELECT `id` FROM `users` WHERE `username` = ' " . $root . " ' and `password` = ' " . $password . " ' limit 1");

//Retrieve data from the sql Query String
$cname = $_GET["cname"];
$job = $_GET["job"];
$apptype = $_GET["apptype"];
$priority = $_GET["priority"];
$daterec = $_GET["daterec"];
$datereq = $_GET["datereq"];
$po = $_GET["po"];
$authby = $_GET["authby"];
$phone = $_GET["phone"];
$fax = $_GET["fax"];
$motorplantnumber = $_GET["motorplantnumber"];
$quoted = $_GET["quoted"];
$incomphoto = $_GET["incomphoto"];
$repvalue = $_GET["repvalue"];
$eyebolt = $_GET["eyebolt"];
$motorassem = $_GET["motorassem"];
$conduitbox = $_GET["conduitbox"];
$conboxpos = $_GET["conboxpos"];
$coupler = $_GET["coupler"];
$couplexten = $_GET["couplexten"];
$couplrecess = $_GET["couplrecess"];
$couplflush = $_GET["couplflush"];
$motorweight = $_GET["motorweight"];
$motorfreq = $_GET["motorfreq"];
$application = $_GET["application"];
$appdesc = $_GET["appdesc"];
$specinstruc = $_GET["specinstruc"];
$reasonserv = $_GET["reasonserv"];
$obviousdamage = $_GET["obviousdamage"];
$cussupplyprod = $_GET["cussupplyprod"];

// Escape User Input to help prevent SQL Injection
$cname = mysql_real_escape_string($cname);
$job = mysql_real_escape_string($job);
$apptype = mysql_real_escape_string($apptype);
$priority = mysql_real_escape_string($priority);
$daterec = mysql_real_escape_string($daterec);
$datereq = mysql_real_escape_string($datereq);
$po = mysql_real_escape_string($po);
$authby = mysql_real_escape_string($authby);
$phone = mysql_real_escape_string($phone);
$fax = mysql_real_escape_string($fax);
$motorplantnumber = mysql_real_escape_string($motorplantnumber);
$incomphoto = mysql_real_escape_string($incomphoto);
$repvalue = mysql_real_escape_string($repvalue);
$motorassem = mysql_real_escape_string($motorassem);
$conduitbox = mysql_real_escape_string($conduitbox);
$conboxpos = mysql_real_escape_string($conboxpos);
$coupler = mysql_real_escape_string($coupler);
$couplexten = mysql_real_escape_string($couplexten);
$couplrecess = mysql_real_escape_string($couplrecess);
$couplflush = mysql_real_escape_string($couplflush);
$motorweight = mysql_real_escape_string($motorweight);
$motorfreq = mysql_real_escape_string($motorfreq);
$application = mysql_real_escape_string($application);
$appdesc = mysql_real_escape_string($appdesc);
$specinstruc = mysql_real_escape_string($specinstruc);
$reasonserv = mysql_real_escape_string($reasonserv);
$obviousdamage = mysql_real_escape_string($obviousdamage);
$cussupplyprod = mysql_real_escape_string($cussupplyprod);

$sql="INSERT INTO motor_checkin (cname, job, apptype, priority, daterec, datereq, po, authby, phone, fax, motorplantnumber, quoted, incomphoto, repvalue, eyebolt, motorassem,  conduitbox, conboxpos, coupler, couplexten, couplrecess, couplflush, motorweight, motorfreq, application, appdesc, specinstruc, reasonserv, obviousdamage, cussupplyprod)
VALUES
('$_GET[cname]','$_GET[job]','$_GET[apptype]','$_GET[priority]','$_GET[daterec]', '$_GET[datereq]','$_GET[po]','$_GET[authby]','$_GET[phone]','$_GET[fax]','$_GET[motorplantnumber]', '$_GET[quoted]','$_GET[incomphoto]','$_GET[repvalue]','$_GET[eyebolt]','$_GET[motorassem]','$_GET[conduitbox]','$_GET[conboxpos]','$_GET[coupler]','$_GET[couplexten]','$_GET[couplrecess]', '$_GET[couplflush]','$_GET[motorweight]','$_GET[motorfreq]','$_GET[application]','$_GET[appdesc]', '$_GET[specinstruc]','$_GET[reasonserv]','$_GET[obviousdamage]','$_GET[cussupplyprod]')";

if (!mysql_query($sql,$con));
  {
  die('Error: ' . mysql_error());
  }
header("Location: /");

mysql_close($con);
?> 
```

HTML

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html>
<head>
    <META http-equiv="Content-Typetext/html; charset=iso-8859-1">
<title>Kalen Electric Repair Packet</title>
<link rel="stylesheet" type="text/css" href="qcstyle.css" />
<link rel="icon" href="images/favicon.ico" />
<!-- This conditional is for IE8 and IE6 and earlier- 8 needs that display:table     -->
<!--[if !IE 7]>
<style type="text/css">
    #wrap {display:table;height:100%}
</style>
<![endif]-->
<script type="text/javascript">
    function showUser(str)
        {
            if (str=="")
                {
                    document.getElementById("txtHint").innerHTML="";
                    return;
                }
            if (window.XMLHttpRequest)
                {// code for IE7+, Firefox, Chrome, Opera, Safari
                    xmlhttp=new XMLHttpRequest();
                }
            else
                {// code for IE6, IE5
                     xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
                }
                    xmlhttp.onreadystatechange=function()
                {
            if 
                    (xmlhttp.readyState==4 && xmlhttp.status==200)
                {
                    document.getElementById("txtHint").innerHTML=xmlhttp.responseText;
                }
                }
                    xmlhttp.open("GET","insert.php?q="+str,true);
                    xmlhttp.send();
                }
    function loadXMLDoc()
        {

        }
</script>
</head>
<body>
<div id="wrap">  <!-- This wrap div needs to encompass everything except the footer div at bottom -->

<div id="header">
        <div id="logo"> <!-- this extra div is just centering the fixed width area of the header content -->

            <a href="../index.html"><img src="images/logo.png" alt="Kalen Electric and Machinery Inc Quality Control" class="logo"/></a>

        </div>
    </div>

    <div id="main"> 

    <!-- Inside this main div we are floating the content to the left and the sidebar to the right  -->

        <div id="content">

            <h1>Motor Check&#45;In&#58;</h1>
            <form action="insert.php" method="post" id="horizontalForm">
                <div class="box">
                    <fieldset>
                        <label>
                            <span>Customer&#58;</span>
                         <select class="cname" name="cname"><option value="">Select One</option> <option value="GP Wauna">GP Wauna</option> <option value="GP Toledo">GP Toledo</option> <option value="GP Camas">Gp Camas</option></select>
                        </label>
                        <label>
                        <span>Job Number&#58;</span>
                            <input class="job" type="integer" name="job" onClick="this.value=''"/>
                        </label>
                        <label>
                            <button type="button" onclick="loadXMLDoc()">New Job</button>
                        </label>
                    </fieldset>
                    <fieldset>
                        <label>
                                <span>Apparatus Type&#58 </span>
                            <select class="apptype" name="apptype"> <option value="AC Motor">AC Motor</option> <option value="AC Motor 1ph">AC Motor 1ph</option> <option value="AC Motor/Gearhead">AC Motor/Gearhead</option> 
                                <option value="AC Welder">AC Welder</option> <option value="AC Submersible">AC Submersible</option> <option value="Stator Only">Stator Only</option> 
                                <option value="Service Call">Service Call</option> <option value="AC Generator">AC Generator</option></select>
                        </label>
                        <label>
                        <span>Priority&#58;</span>
                        <select class="priority" name="priority"> <option value="P1">P1</option> <option value="P2">P2</option> <option value="P3">P3</option></select>
                    </label>
                </fieldset>
                <fieldset>
                    <label> 
                        <span>Date Received&#58;</span>
                        <input class="daterec" type="date" size="12" maxlength="10" name="daterec" onClick="this.value=''"/>
                    </label>
                    <label>
                        <span>Date Required&#58;</span>
                        <input class="datereq" type="date" size="12" maxlength="10" name="datereq" onClick="this.value=''"/>
                    </label>
                    <label>
                        <span>PO&#35;&#58;</span>
                        <input class="po" type="text" size="12" maxlength="20" name="po" onClick="this.value=''"/>
                    </label>
                    <label>
                        <span>Authorized By&#58;</span>
                        <input class="authby" type="text" size="12" maxlength="30" name="authby" onClick="this.value=''"/>
                    </label>
                </fieldset>
                <fieldset>
                    <label>
                        <span>Phone&#35;&#58;</span>
                        <input class="phone" type="text" size="12" maxlength="12" name="phone" onClick="this.value=''"/>
                    </label>
                    <label>
                        <span>Fax&#35;&#58;</span>
                        <input class="fax" type="text" size="12" maxlength="12" name="fax" onClick="this.value=''"/>
                    </label>
                    <label>
                        <span>Motor Plant&#35;&#58;</span>
                        <input class="motorplantnumber" type="text" size="12" maxlength="20" name="motorplantnumber" onClick="this.value=''"/>
                    </label>
                    <label>
                        <span>Quoted&#58;</span>
                        <select class="quoted" name="quoted"> <option value="No">No</option> <option value="Yes">Yes</option></select>
                    </label>
                </fieldset>
                <fieldset>
                    <label>                 
                        <span>Incoming Photo As Received&#58;</span>
                        <select class="incomphoto" name="incomphoto"> <option value="No">No</option> <option value="Yes">Yes</option></select>
                    </label>
                    <label>
                        <span>Replacement Value&#58;</span>
                        <input class="repvalue" type="text" size="12" maxlength="7" name="repvalue" onClick="this.value=''"/>
                    </label>
                    <label>
                        <span>Eye&#45;Bolt&#58</span>
                        <select class="eyebolt" name="eyebolt"> <option value="Good">Good</option> <option value="Bad">Bad</option> <option value="None">None</option></select>
                    </label>
                </fieldset>
                <fieldset>
                    <label>
                        <span>Motor Assembly&#58;</span>
                        <select class="motorassem" name="motorassem"> <option value="F1">F1</option> <option value="F2">F2</option> <option value="Vertical">Vertical</option></select>
                    </label>
                    <label>
                        <span>Conduit Box&#58;</span>
                    <select class="conduitbox" name="conduitbox"> <option value="Full">Full</option> <option value="Half">Half</option> <option value="None">None</option></select>
                    </label>
                    <label>
                        <span>Conduit Box Position&#58;</span>
                        <select class="conboxpos" name="conboxpos"> <option value="3:00">3:00</option> <option value="6:00">6:00</option> <option value="9:00">9:00</option> <option value="12:00">12:00</option> </select>
                    </label>
                </fieldset>
                <fieldset>
                    <label>     
                        <span>Coupler&#47;Pulley&#58;</span>
                        <select class="coupler" name="coupler"> <option value="Coupler">Coupler</option> <option value="Pulley">Pulley</option> <option value="None">None</option> </select>
                    </label>
                    <label>
                        <span>Extended&#58;</span>
                        <input class="couplexten" type="text" size="12" maxlength="10" name="couplexten" onClick="this.value=''"/>
                    </label>
                    <label>
                        <span>Recessed&#58;</span>
                        <input class="couplerecess" type="text" size="12" maxlength="10" name="couplrecess" onClick="this.value=''"/>
                    </label>
                    <label>
                        <span>Flush&#58;</span>
                        <input class="couplflush" type="text" size="12" maxlength="10" name="couplflush" onClick="this.value=''"/>
                    </label>
                </fieldset>
                <fieldset>
                    <label>
                        <span>Motor Weight&#58;</span>
                        <input class="motorweight" type="text" size="12" maxlength="10" name="motorweight" onClick="this.value=''"/>
                    </label>
                    <label>
                        <span>Motor On Frequency Drive&#58;</span>
                        <select class="motorfreq" name="motorfreq"> <option value="Yes">Yes</option> <option value="No">No</option> </select>
                    </label>
                </fieldset>
                <fieldset>
                    <label>
                        <span>Application&#58;</span>
                        <select class="application" name="application"> <option value="Direct Coupled">Direct Coupled</option> <option value="Belted">Belted</option> </select>
                    </label>
                    <label>
                        <span>Application Description&#58;</span>
                        <input class="appdesc" type="text" size="12" maxlength="100" name="appdesc" onClick="this.value=''"/>
                    </label>
                </fieldset>
                <fieldset>
                    <label>
                        <span>Special Instructions&#58;</span>
                        <input class="specinstruc" type="text" size="12" maxlength="255" name="specinstruc" onClick="this.value=''"/>
                    </label>
                </fieldset>
                <fieldset>
                    <label> 
                        <span>Reason For Service&#58;</span>
                        <input class="reasonserv" type="text" size="12" maxlength="255" name="reasonserv" onClick="this.value=''"/>
                    </label>
                </fieldset>
                <fieldset>
                    <label>
                        <span>Obvious Damaged or Missing Parts&#58;</span>
                        <input class="obviousdamage" type="text" size="12" maxlength="255" name="obviousdamage" onClick="this.value=''"/>
                    </label>
                </fieldset>
                <fieldset>
                    <label>
                        <span>Customer Supplied Product&#58;</span>
                        <input class="cussupplyprod" type="text" size="12" maxlength="255" name="cussupplyprod" onClick="this.value=''"/>
                    </label>
                </fieldset>
            <label>
            <input  type="submit" /><br />
            </label>
            </div>
        </form> 
    </div>
</div>
</div> <!-- close the wrap div here -->

<div id="footer">
    <div id="foot"> <!-- this extra div is just centering the fixed width area of the footer content -->
        <div id="left">
        <p>Kalen Electric and Machinery Inc.</p>
    </div>
    <div id="right">
        <p>AC Induction - Version 1.0</p>
    </div>
</div>
</div>

</body>
</html> 
```

它返回的错误：

```
( ! ) Notice: Undefined index: q in C:\wamp\www\insert.php on line 2
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined variable: root in C:\wamp\www\insert.php on line 13
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined variable: sprocket in C:\wamp\www\insert.php on line 13
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: cname in C:\wamp\www\insert.php on line 16
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: job in C:\wamp\www\insert.php on line 17
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: apptype in C:\wamp\www\insert.php on line 18
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: priority in C:\wamp\www\insert.php on line 19
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: daterec in C:\wamp\www\insert.php on line 20
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: datereq in C:\wamp\www\insert.php on line 21
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: po in C:\wamp\www\insert.php on line 22
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: authby in C:\wamp\www\insert.php on line 23
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: phone in C:\wamp\www\insert.php on line 24
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: fax in C:\wamp\www\insert.php on line 25
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: motorplantnumber in C:\wamp\www\insert.php on line 26
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: quoted in C:\wamp\www\insert.php on line 27
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: incomphoto in C:\wamp\www\insert.php on line 28
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: repvalue in C:\wamp\www\insert.php on line 29
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: eyebolt in C:\wamp\www\insert.php on line 30
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: motorassem in C:\wamp\www\insert.php on line 31
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: conduitbox in C:\wamp\www\insert.php on line 32
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: conboxpos in C:\wamp\www\insert.php on line 33
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: coupler in C:\wamp\www\insert.php on line 34
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: couplexten in C:\wamp\www\insert.php on line 35
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: couplrecess in C:\wamp\www\insert.php on line 36
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: couplflush in C:\wamp\www\insert.php on line 37
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: motorweight in C:\wamp\www\insert.php on line 38
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: motorfreq in C:\wamp\www\insert.php on line 39
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: application in C:\wamp\www\insert.php on line 40
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: appdesc in C:\wamp\www\insert.php on line 41
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: specinstruc in C:\wamp\www\insert.php on line 42
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: reasonserv in C:\wamp\www\insert.php on line 43
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: obviousdamage in C:\wamp\www\insert.php on line 44
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: cussupplyprod in C:\wamp\www\insert.php on line 45
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: cname in C:\wamp\www\insert.php on line 85
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: job in C:\wamp\www\insert.php on line 85
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: apptype in C:\wamp\www\insert.php on line 85
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: priority in C:\wamp\www\insert.php on line 85
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: daterec in C:\wamp\www\insert.php on line 85
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: datereq in C:\wamp\www\insert.php on line 86
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: po in C:\wamp\www\insert.php on line 86
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: authby in C:\wamp\www\insert.php on line 86
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: phone in C:\wamp\www\insert.php on line 86
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: fax in C:\wamp\www\insert.php on line 86
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: motorplantnumber in C:\wamp\www\insert.php on line 86
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: quoted in C:\wamp\www\insert.php on line 87
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: incomphoto in C:\wamp\www\insert.php on line 87
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: repvalue in C:\wamp\www\insert.php on line 87
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: eyebolt in C:\wamp\www\insert.php on line 87
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: motorassem in C:\wamp\www\insert.php on line 87
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: conduitbox in C:\wamp\www\insert.php on line 88
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: conboxpos in C:\wamp\www\insert.php on line 88
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: coupler in C:\wamp\www\insert.php on line 88
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: couplexten in C:\wamp\www\insert.php on line 88
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: couplrecess in C:\wamp\www\insert.php on line 88
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: couplflush in C:\wamp\www\insert.php on line 89
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: motorweight in C:\wamp\www\insert.php on line 89
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: motorfreq in C:\wamp\www\insert.php on line 89
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: application in C:\wamp\www\insert.php on line 89
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: appdesc in C:\wamp\www\insert.php on line 89
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: specinstruc in C:\wamp\www\insert.php on line 90
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: reasonserv in C:\wamp\www\insert.php on line 90
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: obviousdamage in C:\wamp\www\insert.php on line 90
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0

( ! ) Notice: Undefined index: cussupplyprod in C:\wamp\www\insert.php on line 90
Call Stack
#   Time    Memory  Function    Location
1   0.0006  744072  {main}( )   ..\insert.php:0 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:56:50.493

答案就在通知本身。`q`您的查询字符串中不存在for 的条目。

最好构建错误处理和输入验证以确保存在适当的变量。

```
$q = (isset($_GET['q']) ? $_GET['q'] : null); 
```

由于您正在设置和引用多个变量，我建议您创建一个可以传递相应变量的函数。这不仅检查是否存在相应的变量，而且还转义变量以在查询中使用。

```
<?php 
function varExist($var){    
     return (isset($_GET[$var]) ? mysql_real_escape_string($_GET[$var]) : null);     
} 
$q = varExist('q'); 
...    
?> 
```

请注意，根据[文档](http://us3.php.net/manual/en/function.mysql-real-escape-string.php)：

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：
> 
> ■mysqli_real_escape_string() ■PDO::quote()

您可以查看与建议的替代方案[mysqli_real_escape_string()相关的其他文档。](http://us3.php.net/manual/en/mysqli.real-escape-string.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T19:57:47.740

基本上你所有的变量都是空的。确保在代码开始时初始化它们。这样您就不会收到未定义的索引警告。

```
$q = '';
$cname = '';
...etc 
```

**边注**

这真的很危险。运行 sql 时切勿使用 $_Get。用户可以通过这种方式执行 sql 注入攻击。

```
INSERT ... Values ('$_GET[cname]','$_GET[job]' 
```

好多了

```
$cname = mysql_real_escape_string($cname);
$job = mysql_real_escape_string($job);
Insert ... Values (' . $cname . ', ' . $job . ' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T19:55:56.080

这些都是通知，而不是错误。很可能新的 PHP 安装具有更严格的错误报告级别，而以前的计算机只是抑制了相同的通知。

通知本身意味着表单尚未提交，或者还有其他相关问题导致表单数据未发送。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T19:59:34.940

在您的情况下，这可能是要走的路：在脚本的第一行设置它：

```
// Report all errors except E_NOTICE
error_reporting(E_ALL ^ E_NOTICE); 
```

这将根本不会给出那些“错误”消息。这不是一个好的编码方式，但在这种情况下，它是最好的快速和肮脏的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-27T19:56:42.427

您的变量（“q”、“root”、“sprocket”等）应该来自另一个页面，因此 $_GET 调用。您是否尝试过先运行表单？如果您只是在此页面上加载此页面，则不会填充变量。

# javascript - 仅当 .aspx 表单上存在某些条件时才引发 jQuery-UI 确认对话框

> ID：11233886
> 
> 赞同：0
> 
> 时间：2012-06-27T19:51:13.743
> 
> 标签：javascript, asp.net, jquery-ui

我在让我的 jQuery-UI 确认对话框按我需要的方式工作时遇到问题。我在 Visual Studio 中有一个 .aspx 表单，后面带有 C# 代码。我想要求用户确认提交按钮，但前提是在 RadioButtonList 控件中选择了特定单选按钮并且整数值（来自后面代码的公共 int 属性）> 0。

这是我的确认对话框的代码：

```
//Confirm Replace Bill Info dialog
var replConfirmed = false;
function ConfirmReplaceDialog(obj, title, dialogText) {
    var rbl = document.getElementsByName("<%= rbReplaceAppend.ClientID %>");
    var infoID = parseInt("<%= infoID %>");
    //Raise this dialog only if "Replace" is selected and there is existing info
    if (rbl[0].checked && infoID > 0) {
        if (!replConfirmed) {
            //add the dialog div to the page
            $('body').append(String.Format("<div id='confirmReplaceDialog' title='{0}'><p>{1}</p></div>", title, dialogText));
            //create the dialog
            $('#confirmReplaceDialog').dialog({
                modal: true,
                resizable: false,
                draggable: false,
                close: function(event, ui) { 
                    $('body').find('#confirmReplaceDialog').remove();
                },
                buttons: {
                    'Yes, replace info': function() {
                        $(this).dialog('close');
                        replConfirmed = true;
                        if (obj) obj.click();
                    },
                    'No, cancel': function() {
                        $(this).dialog('close');
                    }
                }
            });
        }

        return replConfirmed;
    }

    //if "Replace" is not selected (i.e. "Append" is selected), always return true
    return true;
} 
```

这是 .aspx 页面的部分（发布整个内容太长）应该调用对话框：

```
<table border="0" cellpadding="0" cellspacing="0">
    <tr>
        <td>
            <asp:RadioButtonList ID="rbReplaceAppend" runat="server" Font-Size="X-Small" RepeatDirection="Horizontal">
                <asp:ListItem Selected="True">Replace</asp:ListItem>
                <asp:ListItem>Append</asp:ListItem>
            </asp:RadioButtonList>
        </td>
        <td rowspan="2">
            <asp:Label ID="lblReplaceAppend" runat="server" CssClass="instructions" Text="(select 'Replace' to replace the information here with the Bill Request info, or 'Append' to add the Bill Request info to information already present)"></asp:Label>
        </td>
    </tr>
    <tr>
        <td>
            <asp:Button ID="btnGetReqInfo" runat="server" Text="Get Request Info" OnClick="btnGetReqInfo_Click" OnClientClick="return ConfirmReplaceDialog(this, 'Please confirm information replacement', 'Warning: you are replacing existing information. Are you sure you wish to do this (cannot be undone)?');" />
        </td>
    </tr>
</table> 
```

发生的事情是我的对话框永远不会被引发—— OnClick 事件总是会触发并提交表单。

有任何想法吗？

**更新**（根据要求）：以下是浏览器看到的相同代码部分：

Javascript：

```
//Confirm Replace Bill Info dialog
var replConfirmed = false;
function ConfirmReplaceDialog(obj, title, dialogText) {
    var rbl = document.getElementsByName('ctl00_mainContent_rblReplaceAppend');
    var infoID = parseInt('10');
    //Raise this dialog only if "Replace" is selected and there is existing info
    if (rbl[0].checked && infoID > 0) {
        alert('conditions exist for confirmation');
        if (!replConfirmed) {
            //add the dialog div to the page
            $('body').append(String.Format("<div id='confirmReplaceDialog' title='{0}'><p>{1}</p></div>", title, dialogText));

            //create the dialog
            $('#confirmReplaceDialog').dialog({
                modal: true,
                resizable: false,
                draggable: false,
                close: function(event, ui) { 
                    $('body').find('#confirmReplaceDialog').remove();
                },
                buttons: {
                    'Yes, replace info': function() {
                        $(this).dialog('close');
                        replConfirmed = true;
                        if (obj) obj.click();
                    },
                    'No, cancel': function() {
                        $(this).dialog('close');
                    }
                }
            });
        }

        return replConfirmed;
    }

    //if "Replace" is not selected (i.e. "Append" is selected), always return true
    return true;
} 
```

.aspx：

```
<table border="0" cellpadding="0" cellspacing="0">
  <tr>
    <td>
      <table id="ctl00_mainContent_rblReplaceAppend" border="0" style="font-size:X-Small;">
        <tr>
          <td><input id="ctl00_mainContent_rblReplaceAppend_0" type="radio" name="ctl00$mainContent$rblReplaceAppend" value="Replace" checked="checked" /><label for="ctl00_mainContent_rblReplaceAppend_0">Replace</label></td>
          <td><input id="ctl00_mainContent_rblReplaceAppend_1" type="radio" name="ctl00$mainContent$rblReplaceAppend" value="Append" /><label for="ctl00_mainContent_rblReplaceAppend_1">Append</label></td>
        </tr>
      </table>
    </td>
    <td rowspan="2">
      <span id="ctl00_mainContent_lblReplaceAppend" class="instructions">(select 'Replace' to replace the information here with the Bill Request info, or 'Append' to add the Bill Request info to information already present)</span>
    </td>
  </tr>
  <tr>
    <td>
      <input type="submit" name="ctl00$mainContent$btnGetReqInfo" value="Get Request Info" onclick="return ConfirmReplaceDialog(this, 'Please confirm information replacement', 'Warning: you are replacing existing information. Are you sure you wish to do this (cannot be undone)?');WebForm_DoPostBackWithOptions(new WebForm_PostBackOptions(&quot;ctl00$mainContent$btnGetReqInfo&quot;, &quot;&quot;, true, &quot;valGetRequest&quot;, &quot;&quot;, false, false))" id="ctl00_mainContent_btnGetReqInfo" />
    </td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T21:00:37.443

我刚刚找到了答案——无论出于何种原因，我都必须在这里使用 UniqueID 而不是 ClientID（我需要了解区别是什么，以及何时适合使用它们）。更换后`document.getElementsByName('<%= rblReplaceAppend.ClientID %>')`正常`document.getElementsByName('<%= rblReplaceAppend.UniqueID %>')`工作。

# ruby - 使用 RMagick 从图像中切出圆圈

> ID：11233887
> 
> 赞同：6
> 
> 时间：2012-06-27T19:51:17.707
> 
> 标签：ruby, image-processing, imagemagick, rmagick

我想使用 rmagick 从图像中切出一个圆圈。

这是我希望能够完成的示例：

[![http://img375.imageshack.us/img375/1153/walterf.jpg](../Images/18d3776f812df861bf2085406ec5d25c.png)](https://i.stack.imgur.com/BP20V.jpg) -->![http://img15.imageshack.us/img15/8129/circlethumb.png](../Images/a644c9af2f605c31588371b4ef147351.png)

似乎我想使用[http://studio.imagemagick.org/RMagick/doc/draw.html#circle](http://studio.imagemagick.org/RMagick/doc/draw.html#circle)来切割一个圆圈，然后使用 clip_path 来掩盖它，但文档不是很清楚。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-11T09:33:47.053

```
require 'rmagick'

im = Magick::Image.read('walter.jpg').first

circle = Magick::Image.new 200, 200
gc = Magick::Draw.new
gc.fill 'black'
gc.circle 100, 100, 100, 1
gc.draw circle

mask = circle.blur_image(0,1).negate

mask.matte = false
im.matte = true
im.composite!(mask, Magick::CenterGravity, Magick::CopyOpacityCompositeOp)

im.write 'walter_circle.png' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T21:07:01.873

这就是我使用 Imagemagick 和 php 的方式：

```
// Canvas the same size as the final image
exec("convert -size 800x533 xc:white white.jpg");
// The mask 
exec("convert -size 800x533 xc:none -draw \"fill black circle 400,265 400,50\"  write_mask.png");
// Cut the whole out of the canvas  
exec("composite -compose Dst_Out write_mask.png white.jpg -matte step.png");
// Put the canvas over the image and trim off excess white background   
exec("convert IMG_5745.jpg  step.png -composite -trim final.jpg"); 
```

您应该能够按照流程进行操作吗？

之后清理临时图像 - 我倾向于将临时图像保存为 .miff 格式，然后编写一个循环来删除所有 .miff 图像。或者只留下它们，如果您对临时图像使用相同的名称，则每次运行代码时它们都会被覆盖。

# python - 从 Python 调用 rsync 与 bash 脚本

> ID：11233892
> 
> 赞同：0
> 
> 时间：2012-06-27T19:51:52.730
> 
> 标签：python, bash, rsync

我有一个 rsync 调用，我已经从 bash 脚本转移到了 python 脚本。奇怪的是，从 python 调用 rsync 时出现问题：

这是 bash 调用：

```
 rsync --delete --exclude .svn -avz /home/app/resources/$RESOURCES_TO_UPDATE /home/elc/app/omap3/$RESOURCES_TO_UPDATE/resources 
```

这是 Python 调用：

```
 os.system("rsync --delete --exclude .svn -avz /home/app/resources/$RESOURCES_TO_UPDATE /home/elc/app/omap3/$RESOURCES_TO_UPDATE/resources") 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-27T19:58:05.783

我的第一个怀疑是您引用的环境变量未在为`os.system`调用生成的 shell 中设置。您可以尝试通过让 Python 生成一个`echo`命令来进行调试，以验证结果是否符合您的预期。

```
os.system("echo $RESOURCES_TO_UPDATE") 
```

如果环境变量存在，您应该会看到打印的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:17:13.153

您可以像这样重写调用：

```
resources_to_update = os.environ["RESOURCES_TO_UPDATE"]
os.system("rsync --delete --exclude .svn -avz /home/app/resources/%s /home/elc/app/omap3/%s/resources" % (resources_to_update, resources_to_update)) 
```

或 2.7+

```
os.system("rsync --delete --exclude .svn -avz /home/app/resources/{0} /home/elc/app/omap3/{0}/resources".format(os.environ["RESOURCES_TO_UPDATE"])) 
```

# wcf - 防止意外复制 X509 证书以验证其他计算机

> ID：11233899
> 
> 赞同：2
> 
> 时间：2012-06-27T19:52:23.687
> 
> 标签：wcf, certificate, wcf-security, wcf-client, x509certificate

我问这个问题是因为我已经阅读了这里发布的教程：

[防止 WCF 客户端上使用的 x509 证书重复？](https://stackoverflow.com/questions/3411398/preventing-duplication-of-the-x509-certificate-used-on-a-wcf-client)

而且我不明白为什么客户端不能直接转到另一台计算机并安装根 CA 并安装公共 CA 以从另一台计算机连接？

我希望能够在客户端计算机上安装仅授权该计算机连接到 WCF 服务的证书。如果他们“购买”另一个证书，我将在根 CA 上创建它并将其安装在他们想要的另一台计算机上，这台计算机现在将授权该计算机（两台计算机现在只能连接到此服务）。

如果客户端只是复制根 CA 和公共 CA 并将其安装到另一台计算机上，那么发布的方法如何防止另一台计算机通过身份验证？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-28T06:11:22.817

您可以将最终用户证书安装到 Windows 证书存储中，并在安装证书时指定私钥应该是不可导出的。这样的密钥不能被导出并因此被复制（至少在理论上）。接下来，您可以为用户提供带有密钥的硬件——USB 加密令牌或智能卡。此类硬件也不允许从设备中导出私钥，但您需要注意[这种攻击](http://hal.inria.fr/docs/00/70/47/90/PDF/RR-7944.pdf)。

# asp.net - 系列在 ASP 图表上向左“移动”

> ID：11233904
> 
> 赞同：0
> 
> 时间：2012-06-27T19:53:05.627
> 
> 标签：asp.net, asp.net-ajax

我有一个 ASP 图表，它使用计时器刷新更新面板，模拟“实时”图表（基本上是[http://www.4guysfromrolla.com/articles/121609-1.aspx](http://www.4guysfromrolla.com/articles/121609-1.aspx)下“创建实时图表”下的指南） . 我添加了允许您向图表动态添加系列的功能，但新系列始终从 x 轴上的 0 点开始。当图表上的数据已经“滴答”了一段时间时，这是一个问题，因为新系列从 0 开始并出现“移动”到左侧。如何将该系列向右移动以使其 x 轴时间与其他“较旧”系列的时间对齐？

这是一个示例的图片——首先添加了蓝线，几秒钟后添加了黄线。

[http://content.screencast.com/users/johnkemnetz/folders/Jing/media/c3c954fc-66c1-4d4d-a272-3e4b4f211e5a/ex.png](http://content.screencast.com/users/johnkemnetz/folders/Jing/media/c3c954fc-66c1-4d4d-a272-3e4b4f211e5a/ex.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-05T14:37:33.443

我自己想出了这个问题。这是我所做的：

```
if(chart.Series.Count > 0)
{
    /*Get the most recent Y-val to fill in empty spaces (if you fill with 0,
     *you'll end up with a "leap" on the first visible data point)*/
    double hiddenData = getMostRecentValue(newSeriesName);
    foreach (DataPoint dp in chart.Series[0].Points)
    {
        newSeries.AddXY(dp.XValue, hiddenData);
        newSeries.Last().Color = Color.Transparent;
    }
}
//etc. add newSeries to chart 
```

基本上，我为新系列中不存在的所有数据点添加“虚拟值”，然后使用 Color.Transparent 隐藏它们。
希望这对其他人有帮助！

# f# - 如何在 F# 中组合状态和延续单子

> ID：11233910
> 
> 赞同：3
> 
> 时间：2012-06-27T19:53:20.943
> 
> 标签：f#, state, monads, monad-transformers, continuation

我正在尝试使用任务并行库对树求和，其中子任务仅在遍历树直到一定深度之前才产生，否则它使用连续传递样式对剩余的子节点求和，以避免堆栈溢出。

然而，代码看起来很丑 - 使用状态单子来携带当前深度会很好，但状态单子不是尾递归的。或者，我将如何修改延续单子以携带状态？或者创建状态和延续单子的组合？

```
let sumTreeParallelDepthCont tree cont = 
  let rec sumRec tree depth cont =
    let newDepth = depth - 1
    match tree with
    | Leaf(num) -> cont num
    | Branch(left, right) ->
      if depth <= 0 then
        sumTreeContMonad left (fun leftM ->
          sumTreeContMonad right (fun rightM ->
            cont (leftM + rightM )))
      else 
        let leftTask = Task.Factory.StartNew(fun () -> 
              let leftResult = ref 0
              sumRec left newDepth (fun leftM -> 
                leftResult := leftM)
              !leftResult
              )
        let rightTask = Task.Factory.StartNew(fun () -> 
              let rightResult = ref 0
              sumRec right newDepth (fun rightM ->
                rightResult := rightM)
              !rightResult
              )
        cont (leftTask.Result + rightTask.Result)
  sumRec tree 4 cont // 4 levels deep 
```

我在这篇博文中有更多细节：http: [//taumuon-jabuka.blogspot.co.uk/2012/06/more-playing-with-monads.html](http://taumuon-jabuka.blogspot.co.uk/2012/06/more-playing-with-monads.html)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-27T20:47:48.020

我认为首先了解您的要求很重要。

*   算法的顺序版本不需要保留`depth`（因为它总是处理树的其余部分）。但是，它需要使用延续，因为树可能很大。

*   另一方面，并​​行版本需要保留`depth`（因为您只想进行有限数量的递归调用），但不需要使用延续（因为深度非常有限并且当您开始一个新任务时，它无论如何都不会保留堆栈）。

这意味着您根本不需要将这两个方面结合起来。然后你可以用一种非常直接的方式重写并行版本：

```
let sumTreeParallelDepthCont tree =  
  let rec sumRec tree depth = 
    match tree with 
    | Leaf(num) -> num 
    | tree when depth <= 0 -> 
        sumTreeContMonad tree id
    | Branch(left, right) ->
        let leftTask = Task.Factory.StartNew(fun () -> sumRec left (depth + 1))
        let rightResult = sumRec right (depth + 1)
        leftTask.Result + rightResult
  sumRec tree 4 // 4 levels deep 
```

无需复制代码，`sumTreeContMonad`因为您可以在 case 的当前树上调用它`tree when depth <= 0`。

`Task<int>`这也通过创建而不是避免使用参考单元格，`Task`并且我修改了算法以仅生成一个后台任务并在当前线程上执行第二部分工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T20:08:04.563

在我看来，深度看起来不错，丑陋的一点是参考单元格和分配。我不清楚你为什么需要它们；我认为只是将`id`(identity function) 作为`cont`参数传递意味着`sumRec`将返回该值，然后您将不需要参考单元格。（我可能错了，这是一目了然的分析。）

（作为风格问题，我也将摆脱`newDepth`并在递归调用站点内联。）`(depth-1)`

最后，我不知道是什么`sumTreeContMonad`，但看起来你可以只使用`sumRec t -1 k`而不是，`sumTreeContMonad t k`它的工作原理是一样的。

（如果你的博客有代码，而不是代码图片，我可能会发布我自己的代码进行这些改进，但我不想转录数据类型等。为什么要发布图片？）

# android - 从自定义 ExpandableListView OnChildClick 中的组布局中获取值

> ID：11233925
> 
> 赞同：0
> 
> 时间：2012-06-27T19:54:27.407
> 
> 标签：android, xamarin.android

所以如果在

```
void ChildClick(object o, ExpandableListView.ChildClickEventArgs e) 
```

o 是被点击的 ExpandableListView 并且 e.Parent 也是被点击的 ExpandableListView 并试图在发生 ChildClick 的 Group 中创建 LinearLayout 的实例

```
ExpandableListView view = o;
LinearLayout group = (LinearLayout) view.GetChildAt(e.GroupPosition); 
```

返回第 n 个位置的 LinearLayout 而不是第 n 个位置的 GROUP 布局，如何在单击子项的 Group 中获取 LinearLayout 的实例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T19:57:48.537

我也不确定您要在视图树中的哪个位置。但是一旦你有一个handel进入那棵树，你总是可以打电话

```
view.getParent(); 
```

上一个层次。和

```
view.findViewById(R.id.yourlayoutname); 
```

去做几层

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:42:31.487

所以这似乎是绕过我的手肘来接近我的屁股，而不是让子组的父组实际上是父组而不是列表视图本身，但是我已经能够得到我需要的东西：

```
ExpandableListView view = (ExpandableListView) o;
IExpandableListAdapter mAdapter = view.ExpandableListAdapter;
string s = mAdapter.GetGroup(e.GroupPosition).ToString(); //returns comma separated string with all my values from the group layout in the clicked item group position.
string[] items = s.Split(new [] {","}, StringSplitOptions.None); 
```

如果有一种方法可以获得实际组布局的实例，而不是仅仅希望 mAdapter 中的字符串始终具有相同数量的逗号分隔字符串并且我所追求的字符串始终在同一个位置，那么仍然可以提出建议。我想在组位置 n 中获得实际的 LinearLayout，这样我就可以在其中通过 ID 找到 TextView。

# android - 构造函数之后的对象为空

> ID：11233932
> 
> 赞同：1
> 
> 时间：2012-06-27T19:54:40.377
> 
> 标签：android, eclipse

我正在 Eclipse 3.7.2 中开发一个 Android（API 级别 7）应用程序。我有一个最奇怪的问题：

有一个类`LoginData`用于保存登录信息：

```
public class LoginData {
  private final String login;
  private final String password;

  public LoginData(final String login, final String password) {
    this.login = login;                                      // breakpoint 2 here
    this.password = password;
  }

  public String getLogin() {
    return login;
  }
  public String getPassword() {
    return password;
  }
} 
```

然后有一个方法来检索它（在另一个类中）：

```
public static LoginData getLoginData(final Context context) {
  final SharedPreferences prefs = getPrefs(context);
  final String login = prefs.getString(LOGIN, null);
  final String pass = prefs.getString(PASS, null);
  if (Utils.isEmpty(login) || Utils.isEmpty(pass)) {        // breakpoint 1 here
    return null;
  }
  return new LoginData(login, pass);
} 
```

方法 isEmpty() 如下所示：

```
public static boolean isEmpty(final String s) {
  return s == null || "".equals(s);
} 
```

`getLoginData()`和一个在内部调用的方法`AsyncTask`：

```
@Override
protected WSResult doInBackground(final Params... params) {
  final LoginData loginData = Prefs.getLoginData(context);
  ... 
```

`context`是异步任务所在的活动。

现在，当我运行此代码时，`loginData`是`null`. 跟踪问题，我在指定位置放了一个断点1。我看到两者`login`都不`pass`是空的，我看到程序流程转到最后一行，`return new LoginData(...);`. 从那里它返回... a `null`。

进一步跟踪问题，我添加了断点 2，却发现构造函数`LoginData(...)`没有被调用。

所以我的第一个问题是：我在这里遗漏了一些非常明显的东西吗？如果不是，那么编译和运行的代码就会出现一些奇怪的问题。

一些备注：

*   `LoginData`在程序的另一个位置使用，并且可以工作 - 断点 2 接上来。
*   我尝试重命名`LoginData`为其他名称，以防它缓存在某处或出现奇怪的名称冲突。
*   我尝试在 Eclipse 的 Android 2.1 模拟器以及 Galaxy Tab 上运行它。
*   我再次尝试清理和构建项目。
*   我尝试再次关闭和打开项目。
*   我尝试从工作区中删除项目并再次导入。

我想避免创建一个新的 Eclipse 工作区的必要性（这是我最后的机会，它在处理 Java EE 时帮助了我类似的情况）。

该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:19:28.583

```
if (Utils.isEmpty(login) || Utils.isEmpty(pass)) 
```

尝试将此检查替换为

```
if (login==null || pass==null) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:14:12.500

我可能在这里遗漏了一些东西，但为什么“LoginData”类的构造函数在一个不同命名的类（“Login”）中？

为什么不让你的班级成为 LoginData：

```
public class LoginData
{
    private final String login;
    private final String password;

    public LoginData(final String login, final String password)
    {
        this.login = login;                                      // breakpoint 2 here
        this.password = password;
    }

    //Other Methods
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:32:18.270

好的，这是我的问题。`Utils.isEmpty()`是从另一个`Utils`类导入的，该类的实现很糟糕`isEmpty()`（基本上是对条件的否定）。

然而，导致这需要这么长时间的问题是，在达到断点 1 后，我没有看到流程转到`return null;`，而是`return new LoginData(login, pass);`- 这误导了我......

感谢任何人的帮助，毕竟这*是*一个问题。`isEmpty()`

# php - 将 cfloop 索引到 php for 循环

> ID：11233933
> 
> 赞同：1
> 
> 时间：2012-06-27T19:54:40.713
> 
> 标签：php, coldfusion, cfloop

我正在用 PHP 重写一个coldfusion页面。我有一个索引 cfloop，其中有一个 cfoutput 查询。它看起来像这样：

```
 <h2>Choose up to Five Counties:</h2>
<cfif results.recordcount gt 0>
<cfloop from="1" to="5" step="1" index="i">
<!--- Looping Data --->
    <cfoutput>
    <select name="counties" style="width:150px; font-family:Arial,Helvetica; font-size:11px;">
        <option value="">- select county -
    </cfoutput> 
        <cfoutput query="results">
            <option value="#County_Name#" style="font-family:Arial,Helvetica; font-size:12px;">#County_Name#</option>
        </cfoutput> 
    </select>
</cfloop>
</cfif> 
```

此代码循环选择标记代码 5 次，并循环遍历 MSSQL 查询选项标记输出。我已经编写了 PHP 端，它看起来像这样：

```
<h2>Choose up to Five Counties:</h2>

 <?php if(count($results) > 0) { 
    for ($i=0; $i<count($results); $i++) {
                 if ($i == 5) {
                    break;
                   } ?>

    <select name="counties" style="width:150px; font-family:Arial,Helvetica; font-size:11px;">
        <option value="">- select county -

            <?php for ($i=0; $i < count($results); $i++) { ?>

            <option value="<?php echo $results[$i]['County_Name']; ?>" style="font-family:Arial,Helvetica; font-size:12px;"><?php echo $results[$i]['County_Name']; ?></option>

            <?php } ?>

    </select>
     <?php } ?>
  <?php }; ?> 
```

循环的内部索引工作得很好，但我只能让外部循环显示选择标记代码一次而不是五次（这是我需要的）。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T19:59:31.630

问题是您`$i`在两个循环中都使用。所以第一次循环通过第二个循环时，它每次都重置为 0。

将您的第二个循环变量更改为如下所示：

```
<?php for ($x=0; $x < count($results); $x++) { ?>
<option value="<?php echo $results[$x]['County_Name']; ?>" style="font-family:Arial,Helvetica; font-size:12px;"><?php echo $results[$x]['County_Name']; ?></option>
<?php } ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:02:08.420

如果您希望它显示五次，则第一个循环应该是`for ($i=0; $i<5; $i++)`而不是。`for ($i=0; $i<count($results); $i++)`

另外，不要同时使用`$i`两个循环，正如 TNC 在他的回答中提到的那样。这就是循环在第一次选择后退出的原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:11:41.347

尽管您可以逐行翻译上述内容，但以下内容可能效率更高。假设您使用的是 mssql_* 函数集：

```
<?php
$query = myssql_query('SELECT * ....');
?>

<h2>Choose up to Five Counties:</h2>
<select name="counties" style="width:150px; font-family:Arial,Helvetica; font-size:11px;">

<?php
while($results = mssql_fetch_assoc($query)){
    echo "<option value=\"{$results['County_Name']}\" style=\"font-family:Arial,Helvetica; font-size:12px;\">{$results['County_Name']}</option>";
}
?>

</select> 
```

# haskell - Text.ParserCombinators.Parsec 或 Text.Parsec。有什么区别？

> ID：11233937
> 
> 赞同：1
> 
> 时间：2012-06-27T19:54:52.447
> 
> 标签：haskell, parsec

> **可能重复：**
> [Text.ParserCombinators.Parsec 和 Text.Parsec 之间有什么不同](https://stackoverflow.com/questions/6029371/whats-the-different-between-text-parsercombinators-parsec-and-text-parsec)

两者有什么区别吗？我应该使用哪一个？

# ef-code-first - 用户“\medicallexicon_web”登录失败。代码优先

> ID：11233942
> 
> 赞同：0
> 
> 时间：2012-06-27T19:55:33.117
> 
> 标签：ef-code-first

我收到此错误无法打开登录请求的数据库“DataLayer.Context.MedicallexiconContext”。登录失败。用户 'CL-xcsd-\medicallexicon_web' 登录失败。这是我的背景

```
public class MedicallexiconContext : MyDbContextBase, IUnitOfWork
    {
        public DbSet<Word> Word { get; set; }
        public DbSet<Category> Category { get; set; }
        public DbSet<Language> Language { get; set; }
        public DbSet<Picture> Picture { get; set; }
        public DbSet<RelationshipBetweenWords> RelationshipBetweenWords { get; set; }

        #region IUnitOfWork Members

        #region IUnitOfWork Members
        public new IDbSet<TEntity> Set<TEntity>() where TEntity : class
        {
            return base.Set<TEntity>();
        }

        #endregion

        #endregion

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Configurations.Add(new CategoryConfig());
            modelBuilder.Configurations.Add(new WordConfig());
            modelBuilder.Configurations.Add(new PictureConfig());
            modelBuilder.Configurations.Add(new LanguageConfig());
            modelBuilder.Configurations.Add(new RelationshipBetweenWordsConfig());
            base.OnModelCreating(modelBuilder);
            }
} 
```

这是我的连接字符串

```
 <add name="MedicallexiconContext" connectionString="Data Source=.\SQLEXPRESS;Initial Catalog=aspnet-MedicallexiconProject-2012615153521;Integrated Security=True" providerName="System.Data.SqlClient"/> 
```

这是我的数据库名称 DataLayer.Context.MedicallexiconContext

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:02:13.960

看起来 ASP.Net 应用程序正在使用此代码？

看起来应用程序池用户是`CL-xcsd-\medicallexicon_web`. 确保用户对数据库具有适当的权限。

[http://technet.microsoft.com/en-us/library/cc771170(WS.10).aspx](http://technet.microsoft.com/en-us/library/cc771170(WS.10).aspx)

对于可能会发现这一点的其他人... IIS 7 的默认应用程序池用户是网络服务。如果您没有更改默认应用程序池用户，则这是需要 SQL 权限的帐户。

**将用户添加到 SQL Server**

1.  打开 SQL Server 管理工作室
2.  查找您的数据库
3.  打开数据库下的安全文件夹
4.  右键单击用户文件夹（在安全文件夹内）
5.  选择新用户...
6.  单击登录名旁边的 (...) 按钮
7.  单击浏览按钮
8.  选择您的用户并按 OK
9.  在 Select Login 对话框上再次按 OK
10.  给你的用户一个用户名（例如medicallexicon_web）
11.  检查适用的数据库角色成员资格复选框（可能是 db_datareader 和 db_datawriter）
12.  点击确定

# url - Wicket Datatable 排序链接更改 WebResources 的 URL

> ID：11233943
> 
> 赞同：0
> 
> 时间：2012-06-27T19:55:35.550
> 
> 标签：url, datatable, wicket, webresource

所以我遇到了一个有趣的问题。我有一个检票口页面，其中包含一个数据表和一个使用 web 资源检索它的 xml 数据文件的 fusionchart（闪存图表）。我遇到的问题是，当您在数据表中使用页码或排序链接时，它会重新加载页面并更改 URL，以使图表无法再获取其数据。

例如，在使用排序链接之前（此数据 url 适用于图表） vreports/wicket:interface/:5:tabs:panel:prodGraph::IResourceListener:: （这是基本页面的 url：/vreports.5）

使用排序链接后（此数据 url 不起作用） vreports/wicket:interface/:5:tabs:panel:prodGraph:1:IResourceListener:: (base page url: /verports.5.1)

我的问题是如何将图表使用的网络资源 URL 与数据表链接隔离开来？我看到问题在于添加的 .1，如果您多次单击它，它会增加 1 并且 Web 资源 URL 中的更改匹配。特别奇怪的是，如果我在使用排序功能后刷新页面，排序仍然有效，但图表（和正确的 URL）又回来了。我是 wicket 的新手，我真的找不到太多关于它的 URL 结构如何工作的信息……有什么想法吗？

提前致谢！

山姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-28T07:47:13.837

我认为您正在使用 OrederBYBorder 进行排序。

试试这个

this.add(new AjaxFallbackOrderByBorder(id,fieldName, issueSortable) {

```
 private static final long serialVersionUID = 1L;
                @Override
                protected void onSortChanged() {
                    dataView.setCurrentPage(0);
                }
                protected void onAjaxClick(AjaxRequestTarget target) {
                    target.addComponent(componentName);
                }
   }); 
```

也使用 BookmarkablePageLink 进入此页面或 StatelessLink 意味着使用这些链接进入 fusionchart 页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-03T03:02:01.153

我最终将我的数据表转换为 AjaxDefaultFallbackDataTable，并且我在 Ajax 中完成了所有的分页和排序，因此 URL 不会因为页面没有刷新而改变。AjaxDefaultFallbackDataTable 使用与 DataTable 相同的 DataProvider，它只处理 AJAX 中的所有内容，因此对于遇到相同问题的任何人来说，它可能是一个简单/首选的替代方案。从字面上看，我必须改变的只是我有 DataTable 的所有地方，我将它切换到 AjaxDefaultFallbackDataTable 并且效果很好！

感谢大家观看！山姆

# java - 如何从 DBpedia Spotlight Web 服务获得完整的结果

> ID：11233944
> 
> 赞同：1
> 
> 时间：2012-06-27T19:55:36.627
> 
> 标签：java, web-services, semantic-web, dbpedia

我正在尝试编写一个小程序，它将读取 txt 文件的上下文并将其发送到 Spotlight Web 服务，以获取语义注释（以 text\html 输出格式）。不幸的是，与 Spotlight Demo 相比，只有一小部分实体被“识别”。例如，使用我的程序，对于像“Ridley Scott 导演了包括外星人、终结者和银翼杀手在内的许多电影”这样的文本，我得到的回应是“电影”和“外星人”在演示中的位置没有注释。较大的文本也会发生同样的情况。我在使用 OpenCalais WebService 时遇到了类似的问题，但这是因为我试图使用命令对输入文本进行编码

```
 input = URLEncoder.encode(input, "UTF-8"); 
```

一旦我将其注释掉，问题就解决了。不幸的是，这里不是这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T07:42:07.563

如果您发布通过演示和程序获得的结果以及演示界面中使用的参数，这将有所帮助，这样我们就可以尝试了解正在发生的事情。如果没有更多信息，我不确定我能否提供帮助。

但让我们做一些猜测。我认为这是其中之一：

1.  您没有设置参数置信度和支持，因此可能是您的 Web 服务调用的结果被比演示界面更高的值过滤掉了。尝试添加参数“&confidence=0.0”和“&support=0”。这应该显示所有内容（甚至是一些明显不正确的注释）。您可以将这些参数设置得更高以获得更高的精度（以降低召回为代价）。有关添加帖子参数的帮助，请参阅此其他答案：[如何使用 POST 将参数添加到 HttpURLConnection](https://stackoverflow.com/questions/9767952/how-to-add-parameters-to-httpurlconnection-using-post)
2.  您也没有明确设置要使用的检测器，因此 Web 服务可能使用与您的 Web 服务不同的检测器。有关在 DBpedia Spotlight 上发现的更多信息：[https](https://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Spotting) ://github.com/dbpedia-spotlight/dbpedia-spotlight/wiki/Spotting （相同的参数适用于 /annotate）

# ios - 在容器视图控制器中调整视图大小

> ID：11233951
> 
> 赞同：1
> 
> 时间：2012-06-27T19:56:10.090
> 
> 标签：ios, xcode, ios5, uiviewcontroller

我正在创建类似于 SplitFrameViewController 的东西，但有足够的差异，我正在制作自定义实现。当我试图将“主”视图的大小设置为可用屏幕的 25% 并将“详细信息”视图设置为剩余的 75% 时，我的问题就出现了。

不管我怎么尝试，尺寸都不正确。MasterView 太宽了，Detail 重叠了一点。我想我可能在我的 nib 文件中做错了什么，但我不太确定。在 iPad 模拟器上，主视图的尺寸约为 35%，细节视图的尺寸约为 80%。

另外，如果有人对我的项目结构有任何批评/意见/建议，请随时发表评论，因为这是我的第一次尝试。

**应用委托**

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{

    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];

    self.containerViewController = [[ContainerViewController alloc] init];
    self.window.rootViewController = self.containerViewController;

    self.window.backgroundColor = [UIColor whiteColor];
    [self.window makeKeyAndVisible];

    return YES;
} 
```

**容器视图控制器**

我检查了 中生成的矩形的宽度`viewWillAppear`，它们是正确的。

```
- (id)init
{
    self = [super init];
    if (self) {
        self.masterViewController = [[MasterViewController alloc] initWithNibName:@"MasterViewController" bundle:nil];
        self.detailViewController = [[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil];
        [self addChildViewController:self.masterViewController];
        [self addChildViewController:self.detailViewController];
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    [self.view addSubview:self.masterViewController.view];
    [self.masterViewController didMoveToParentViewController:self];
    [self.view addSubview:self.detailViewController.view];
    [self.detailViewController didMoveToParentViewController:self];
}

- (void)viewDidUnload
{
    self.masterViewController = nil;
    self.detailViewController = nil;
    [super viewDidUnload];
}

- (void)viewWillAppear:(BOOL)animated
{
    [super viewWillAppear:animated];

    CGRect containerBounds = self.view.bounds;
    CGRect masterBounds, detailBounds;
    CGRectDivide(containerBounds, &masterBounds, &detailBounds, CGRectGetWidth(containerBounds) * 0.25, CGRectMinXEdge);

    self.masterViewController.view.frame = masterBounds;
    self.detailViewController.view.frame = detailBounds;
} 
```

**编辑**

我在末尾添加了以下几行`viewWillAppear`并得到了注释结果。

```
NSLog(@"container bounds: %@", NSStringFromCGRect(containerBounds));
NSLog(@"master bounds: %@", NSStringFromCGRect(masterBounds));
NSLog(@"detail bounds: %@", NSStringFromCGRect(detailBounds));

// container bounds: {{0, 0}, {768, 1004}}
// master bounds: {{0, 0}, {192, 1004}}
// detail bounds: {{0, 0}, {576, 1004}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-28T18:59:22.433

哦，我的天哪，我想通了。所以我只在横向运行我的应用程序。但是我在人像模式下获得了帧测量。显然，即使它只启动、运行和支持横向模式，它也会先以纵向模式创建视图，然后切换到横向模式。ViewWillAppear 在切换之前运行（尽管我读过的所有内容都说它应该在之后运行）。我将代码`ViewWillAppear`块中的代码移动到`(void)viewWillLayoutSubviews`它工作正常。

可能存在问题的另一个原因是，从技术上讲，我的 RootViewController 的 view 属性不应该存在，尽管它是从类内返回值，而不是在类外。老实说，一般来说只是奇怪的行为。无论如何，如果其他人有这个问题，那就是答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:59:11.013

给这只猫换皮的另一种方法是简单地设置视图的宽度/高度，如下所示：

```
if (orientation == UIDeviceOrientationPortrait) {
    self.masterViewController.view.frame = CGRectMake(0,0,192,1004);
    self.detailViewController.view.frame = CGRectMake(0,0,576,1004);
} else {
   [...]
} 
```

如果事实证明这个位置很糟糕，你可以玩这些数字，直到你喜欢它们。不像您尝试做的那样即时计算边界那么优雅，但可能更简单且错误更少。祝你好运！

# matlab - 在矩阵中找到最小的非零值

> ID：11233954
> 
> 赞同：9
> 
> 时间：2012-06-27T19:56:19.677
> 
> 标签：matlab, multidimensional-array

我试图找到一个 2d 数组，它表示 3d 数组中第 3 维的最小值。例如

```
a = floor(rand(10,10,3).*100); % representative structure
b = min(a,[],3); % this finds the minimum but also includes 0 
```

我尝试使用：

```
min(a(a>0),3) 
```

但这不正确？我想我可以对 a 的第三维进行排序，然后在 1:depth-1 内找到最小值 - 但这似乎不是最有效的方法？

有什么想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T20:51:06.653

问题是它`a(a>0)`返回一个线性数组，所以你最终会得到一个最小值，而不是一个具有最小值的二维数组。

获取非零值最小值的最安全方法是用 屏蔽它们`Inf`，这样零值就不会干扰最小值的计算。

```
tmp = a;
tmp(tmp==0) = Inf;

b = min(tmp,[],3); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-27T20:21:20.463

一种可能性是简单地使所有零值都很大。

例如，如果您知道没有任何元素会大于 1000，您可以使用

```
b = min(a+1000*(a==0),[],3) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T15:45:07.023

只需将值为零的那些点分配为无穷大，因此最小答案始终不会计数为零.....就像 a(a==0)=inf; % 然后计算最小的一个 minelement=min(a);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-19T11:20:46.800

从矩阵中删除零元素，如下所示：

```
 a = [10 2 0 4 5; 156 1.7 45 23 0 ];
    a(a == 0) = NaN;% not a number
    min(a(:))
    >> ans = 1.7 
```

# c# - 选择第一个 ddl 后，如何使第二个下拉列表可见？

> ID：11233957
> 
> 赞同：0
> 
> 时间：2012-06-27T19:56:46.167
> 
> 标签：c#, asp.net

我正在为我的网站制作评论/请求表，为了让我的用户尽可能具体，我有一个下拉列表，列出了我网站上的所有 8 个类别。一旦选择了下拉列表的第一个类别，我就会尝试使与所选类别对应的 ddl 可见。在选择正确的类别之前，如何保持第二个 ddls 不可见？

这是我到目前为止的html代码：

```
 Select a Category:

    <asp:DropDownList ID="ddlMaintab" runat="server" AutoPostBack="true"
    onselectedindexchanged="ddlMaintab_SelectedIndexChanged">

    <asp:ListItem Text="- Select - " Value=""></asp:ListItem>
    <asp:ListItem Text="U" Value="1"></asp:ListItem>
    <asp:ListItem Text="Re" Value="2"></asp:ListItem>
    <asp:ListItem Text="Merc" Value="3"></asp:ListItem>
    <asp:ListItem Text="Rep" Value="4"></asp:ListItem>
    <asp:ListItem Text="A" Value="5"></asp:ListItem>
    <asp:ListItem Text="Refi" Value="6"></asp:ListItem>
    <asp:ListItem Text="Rete" Value="7"></asp:ListItem>
    </asp:DropDownList>

    <br /><br />

    Sub Category:
    <asp:DropDownList ID="ddlSub" runat="server" Visible="false" >
    <asp:ListItem Text="app" Value="1"></asp:ListItem>
    <asp:ListItem Text="CS" Value="2"></asp:ListItem>
    <asp:ListItem Text="Saved" Value="3"></asp:ListItem>
    <asp:ListItem Text="JLB" Value="4"></asp:ListItem>
    <asp:ListItem Text="Completed" Value="5"></asp:ListItem>
    <asp:ListItem Text="Search" Value="6"></asp:ListItem>
    <asp:ListItem Text="Pre-approved" Value="7"></asp:ListItem>
    <asp:ListItem Text="Notes" Value="8"></asp:ListItem>
    <asp:ListItem Text="Document" Value="9"></asp:ListItem>
    <asp:ListItem Text="Deal" Value="10"></asp:ListItem>
</asp:DropDownList>

<asp:DropDownList ID="ddl1" runat="server" Visible="false" >
    <asp:ListItem Text="app" Value="1"></asp:ListItem>
    <asp:ListItem Text="CS" Value="2"></asp:ListItem>
</asp:DropDownList>

<asp:DropDownList ID="ddl2" runat="server" Visible="false" >
    <asp:ListItem Text="app" Value="1"></asp:ListItem>
    <asp:ListItem Text="CS" Value="2"></asp:ListItem>
</asp:DropDownList>

<asp:DropDownList ID="ddl3" runat="server" Visible="false" >
    <asp:ListItem Text="app" Value="1"></asp:ListItem>
    <asp:ListItem Text="CS" Value="2"></asp:ListItem>
</asp:DropDownList>

<asp:DropDownList ID="ddl4" runat="server" Visible="false" >
    <asp:ListItem Text="app" Value="1"></asp:ListItem>
    <asp:ListItem Text="CS" Value="2"></asp:ListItem>
</asp:DropDownList>

<asp:DropDownList ID="ddl5" runat="server" Visible="false" >
    <asp:ListItem Text="app" Value="1"></asp:ListItem>
    <asp:ListItem Text="CS" Value="2"></asp:ListItem>
</asp:DropDownList>

<asp:DropDownList ID="ddl6" runat="server" Visible="false" >
    <asp:ListItem Text="app" Value="1"></asp:ListItem>
    <asp:ListItem Text="CS" Value="2"></asp:ListItem>
</asp:DropDownList> 
```

非常感谢，顺便说一句，这个网站很棒

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:00:46.463

有几种方法可以做到这一点。首先，您可以将所有后续控件设置为可见=不可见，并有一个触发 onchange 的事件......或者您可以只下拉一个并创建一个新的“onchange”。

您还可以使用 ajax 仅部分回发并根据需要呈现新的下拉菜单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:36:53.903

您需要实现级联下拉列表。有关如何执行此操作的更多详细信息，请参见此处（警告：自己的博客文章）：

[代码片段：级联 DropDownLists](http://codersbarn.com/post/2007/07/21/Code-Snippet-Cascading-DropDownLists.aspx)

# python - 如何从蓝图模板扩展基本 Flask Jinja 模板？

> ID：11233959
> 
> 赞同：14
> 
> 时间：2012-06-27T19:56:52.053
> 
> 标签：python, flask, jinja2

我正在使用 Flask 和 Jinja 创建一个相当大的应用程序。Flask 建议使用蓝图将大型应用程序分成更小的单元。如果我的整个应用程序/网站有一个基本布局，我如何从我的蓝图中的模板扩展它？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-06-27T20:23:18.650

您只需编写基本模板布局的名称，如果它存在于应用程序的模板文件夹中，Flask 就会找到它，然后在蓝图的模板文件夹中。

```
 {% extends 'template_name.html' %} 
```

如果它存在于模板文件夹中的文件夹中，则

```
 {% extends 'folder_name/template_name.html' %} 
```

如果应用的模板文件夹和蓝图的模板文件夹中有两个同名模板，则应用模板文件夹中的模板优先。

有关更多信息，请参阅此问题[烧瓶蓝图模板文件夹](https://stackoverflow.com/q/7974771/679047)

如果模板放置在正确的位置，Flask 会自动为您查找模板。

# r - 在 R 中从 UTC 转换为日期格式

> ID：11233960
> 
> 赞同：2
> 
> 时间：2012-06-27T19:57:01.743
> 
> 标签：r, timezone

我有一个 UTC 时间戳。我想把它转换成 YYYY/MM/DD 格式`R`。

例如，`1318394558766`。我尝试`format`命令失败。

任何帮助表示赞赏。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-27T20:12:20.547

您可以使用`as.POSIXct`或`as.POSIXlt`。但是，您必须知道您的毫秒数开始的原始日期。

```
as.POSIXct(1318394558766/1000, origin='1970-01-01')

> unlist(as.POSIXlt(1318394558766/1000, origin='1970-01-01'))
    sec     min    hour    mday     mon    year    wday    yday   isdst 
 38.766  42.000  21.000  11.000   9.000 111.000   2.000 283.000   1.000 
> 
```

然后您可以使用`format`获取所需的 YYYY/MM/DD：

```
format(as.POSIXct(1318394558766/1000, origin='1970-01-01'), format='%Y/%m/%d') 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-28T03:47:03.490

除了贾斯汀的回答（并且因为我无法发表评论）之外，您可能还想将 tz 添加到转换中。

```
as.POSIXct(1318394558766/1000, origin='1970-01-01')
[1] "2011-10-12 05:42:38 EST"
as.POSIXct(1318394558766/1000, origin='1970-01-01', tz="UTC")
[1] "2011-10-12 04:42:38 UTC" 
```

有关更多信息，请参阅；

```
?timezone 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-28T22:07:12.707

另一种解决方案是使用`.POSIXct`：

```
utc <- .POSIXct(1318394558766/1000, tz="UTC") 
```

然后您可以轻松转换`utc`为日期或字符向量：

```
as.Date(utc)            # Date vector
format(utc, "%Y-%m-d")  # character vector 
```

# java - 需要匹配具有以下正则表达式格式的字符串

> ID：11233961
> 
> 赞同：-1
> 
> 时间：2012-06-27T19:57:04.753
> 
> 标签：java, regex

字符串将是格式`[( 1.0N)-195( 1.0E)-195(28)-769.7(NESW)-1080.8(U)-617.9(43-047-30127)]`

我需要一个正则表达式来匹配以查看字符串是否包含`-XXX-XXX`（`X`数字在哪里）

```
 Pattern p = Pattern.compile("(?=.*?(?:-[0-9][0-9][0-9]-[0-9][0-9][0-9]))");

    if(p.matcher(a).matches())

    {
        System.out.println("Matched");
    } 
```

我也试过了`-[0-9][0-9][0-9]-[0-9][0-9][0-9]`，`(?=.*?-[0-9][0-9][0-9]-[0-9][0-9][0-9])` 没有任何效果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:05:37.053

子字符串会容易得多，但`(?:\\d{2})(-\\d{3}-\\d{5})`会匹配 -XXX-XXXXX 作为 1 组。

我假设最后一个数字中的 3 位数字是错误的。如果不只是将 5 更改为 3。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:07:09.333

如果要检查字符串是否包含 -3digits-3digits

```
 String a = "43-037-30149";
 Pattern p = Pattern.compile(".*(-[0-9]{3}-[0-9]{3})");
  if(p.matcher(a).matches())      
  {
     System.out.println("Matched");
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:01:48.960

你为什么不使用子字符串？

```
String b = a.substring(2,9); 
```

或者这个：

```
String c = a.substring(a.indexOf('-'), a.indexOf('-') + 8); 
```

使“仅”成为子字符串也会更有效率！;)

# python - 在 Python 中读入并比较两个文件

> ID：11233967
> 
> 赞同：0
> 
> 时间：2012-06-27T19:57:44.247
> 
> 标签：python

嗨，我有两个文本文件，每个文件都包含有关某些结构的不同信息。两个文件中的结构都由一个 ID 号标识。我想做的是在第一个文件中读取并跳过不满足条件的数据行。然后在第二个文件中跳过没有相同 ID 号的行并处理其他行。我尝试使用嵌套的 for 循环来做到这一点，我也尝试将它作为两个单独的函数，但都没有成功。我现在正在尝试使用如下循环来完成它，但是会出现此错误

```
UnboundLocalError: local variable 'linel' referenced before assignment 
```

这是代码。一世

```
F = 'file1.txt'
Fl = 'file2.txt'

 X = []               # Creats Data Lists
 M = []
 Id1 = []
 Id2 = []
 LC = 10
 N = 11

 fl = open(Fl)
 fl.readline()
 nlinesl = islice(fl,N)
 f = open(F)           #Opens file
 f.readline()          # Strips Header
 nlines = islice(f, N) #slices file to only read N lines

 for line in nlines and linel in nlinesl:             
    if line !='':
     linel = linel.strip()
     linel = linel.replace('\t','')
     columnsl = linel.split()
     lum = float(columnsl[1])
     if lum != LC:
      continue
     id1 = int(columnsl[0])
     Id1.append(id1)
     if line !='':
       line = line.strip()
       line = line.replace('\t','')
       columns = line.split()
       id2 = int(columns[1])
       Id2.append(id2)
       if Id !=  Id2:
        continue  
       x = columns[2]             # assigns variable to columns
       X.append(x)

  print(X) 
```

这是我想要发生的一个例子两个文件

```
file1= 1 1 1 1     file2 =  1 1 1 1
       2 5 1 1              1 2 1 1
       2 3 4 4              1 1 1 1
Lc = 5
Xa = 1 
```

所以只有 file1 的第二行会存活，这意味着只有 file2 的第二行会被处理，因为它们具有相同的 id。在我的文件中，ID 是

```
 id = columns[0] for file1 
```

和

```
 id = columns[1] for file2 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:07:49.823

我不认为这是合法的语法：

```
 for line in nlines and linel in nlinesl: 
```

试试这个：

```
 for line, line1 in zip(nlines, nlines1): 
```

此外，这些很棘手/容易得到错误的变量名:)

例如，

```
a = range(20, 26)
b = range(200, 226)

#for i in a and j in b:  # causes 
#   print i, j           # error

for i, j in zip(a, b):
   print i, j 
```

按预期生成输出

```
20 200
21 201
22 202
23 203
24 204
25 205 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:13:20.950

这些方面的东西：

```
ids = set()
for line in nlines:
    if line != '':
        cols = line.strip().replace('\t','').split()
        lum = float(cols[1])
        lid = int(cols[0])
        if lum != LC:
            ids.add(lid)

for line in nlinesl:
    if line != '':
        cols = line.strip().replace('\t','').split()
        lid = int(cols[1])
        if lid in ids:
            x = cols[2]
            X.append(x) 
```

# ssh - Paramiko SSH 输出未捕获命令输出

> ID：11233972
> 
> 赞同：0
> 
> 时间：2012-06-27T19:58:00.443
> 
> 标签：ssh, paramiko

我有一个小脚本可以在设备中执行命令。我没有在标准输出中获取命令的输出，而是在登录设备后在命令提示符之前打印所有这些输出。

```
import paramiko, 
client = paramiko.SSHClient()
client.load_system_host_keys()
client.connect('10.88.124.88', username='admin',password='testing',timeout=15.0)
print "Connected...\n"
print "Executing show version...\n"
stdin, stdout, stderr = client.exec_command("show version")
print "AFTER Executing show version...\n"
stdin.channel.shutdown_write()
print "BEFORE Reading output...\n"
output = stdout.read()
print "AFTER Reading output...\n"
print "OUTPUT:: '", output, "'"
print "Execting quit...\n"
stdin, stdout, stderr = client.exec_command("quit\n") 
```

我从脚本中得到的输出如下所示。我期待在输出中输出“显示版本”。不知道我在哪里失踪。设备的响应有点慢。

```
[root@dev-s2-3m7-aio-139-44 ~]# ./ssh-bana.py
Connected...
...
OUTPUT:: ' Command Line Interface is starting up, please wait ...
verifying connection to main (admin@192.168.0.2)... success
verifying connection to secondary (admin@192.168.1.2)... success

   Welcome to the TelePresence Command Line Interface (version 1.1)

Last login: Wed Jun 27 14:45:21 CDT 2012 from 10.88.139.44

admin: '
Execting quit... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-02T10:27:36.430

执行 show version 命令后立即添加：

```
 print "".join(stdout.readlines()) 
```

# java - 如何访问上一个活动中的数据？

> ID：11233973
> 
> 赞同：0
> 
> 时间：2012-06-27T19:58:04.670
> 
> 标签：java, android

使用`StartActivity`我从 FirstActivity 到达 SecondActivity..现在我想访问在前一个活动中声明的对象。

有没有我遗漏的明显机制。我不能在我想传递的对象（DropboxAPI）上使用 Parceable，因为我没有它的源（我不能使它成为 parceable）。

我可以通过`FirstActivity.this`，因为我可以使用意图使其 Parceable 吗？或喜欢

```
 Intent intent=new Intent(FirstActivity.this,SecondActivity.class);
    intent.putExtra("MyClass",FirstActivity.this);
    startActivity (intent);

import com.dropbox.client2.DropboxAPI;
import com.dropbox.client2.android.AndroidAuthSession;

import android.app.Application;
import android.hardware.Camera.Parameters;
import android.os.Parcel;
import android.os.Parcelable;
public class temp extends Application {

    DropboxAPI<AndroidAuthSession> mApi;
    public void onCreate() {  
        super.onCreate();  
    }

    temp(DropboxAPI<AndroidAuthSession> Api)
    {
        mApi=Api;
    }
    public DropboxAPI<AndroidAuthSession> getName() {    
        return mApi;  
} 
    public void setName(DropboxAPI<AndroidAuthSession> dropboxclient) {  
        this.mApi = dropboxclient;  
}
} 
```

一级代码：

```
t = (temp)getApplication();
                t.setName(mApi);
                //basket.putParcelable("key", MCActivity.this);
                Intent intent=new Intent(MCActivity.this,DownActivity.class);
                //intent.putExtra("MyClass",t);
                startActivity (intent); 
```

二级代码：

```
public void onCreate(Bundle bun) {

    // TODO Auto-generated method stub
    super.onCreate(bun);
    setContentView(R.layout.download);
    mImage = (ImageView)findViewById(R.id.image_view);
    //Bundle gotit=getIntent().getExtras();
    t = (temp)getApplication();
    int i=2;
    i=5;
    dApi=t.getName();
} 
```

日志猫：

```
06-28 02:24:31.979: I/System.out(729): debugger has settled (1308)
06-28 02:25:08.387: D/AndroidRuntime(729): Shutting down VM
06-28 02:25:08.387: W/dalvikvm(729): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
06-28 02:25:08.705: E/AndroidRuntime(729): FATAL EXCEPTION: main
06-28 02:25:08.705: E/AndroidRuntime(729): java.lang.ClassCastException: android.app.Application
06-28 02:25:08.705: E/AndroidRuntime(729):  at cloud.mobile.MCActivity$3.onClick(MCActivity.java:164)
06-28 02:25:08.705: E/AndroidRuntime(729):  at android.view.View.performClick(View.java:2408)
06-28 02:25:08.705: E/AndroidRuntime(729):  at android.view.View$PerformClick.run(View.java:8816)
06-28 02:25:08.705: E/AndroidRuntime(729):  at android.os.Handler.handleCallback(Handler.java:587)
06-28 02:25:08.705: E/AndroidRuntime(729):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-28 02:25:08.705: E/AndroidRuntime(729):  at android.os.Looper.loop(Looper.java:123)
06-28 02:25:08.705: E/AndroidRuntime(729):  at android.app.ActivityThread.main(ActivityThread.java:4627)
06-28 02:25:08.705: E/AndroidRuntime(729):  at java.lang.reflect.Method.invokeNative(Native Method)
06-28 02:25:08.705: E/AndroidRuntime(729):  at java.lang.reflect.Method.invoke(Method.java:521)
06-28 02:25:08.705: E/AndroidRuntime(729):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
06-28 02:25:08.705: E/AndroidRuntime(729):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
06-28 02:25:08.705: E/AndroidRuntime(729):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T20:12:05.730

尝试使用应用程序类：

```
public class MyApplication extends Application {
    //Variable we want to share to All Activities in Application

    private DropboxClient dropboxclient;  

    @Override 
    public void onCreate() {  
            super.onCreate();  

    }  
    //Getter Method
    public DropboxClient getName() {    
            return dropboxclient;  
    }  
    //Setter Method
    public void setName(DropboxClient dropboxclient) {  
            this.dropboxclient = dropboxclient;  
    }  
} 
```

在 MyFirstActivity 活动中：

```
private MyApplication app;
@Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        app = (MyApplication)getApplication();  //Get  Application
        app.setName(dropboxclient);
        Intent intent = new Intent(); 
        intent.setClass(this, MySecondActivity.class);  
        startActivity(intent); 
```

在 MySecondActivity 活动中：

```
private MyApplication app;  
    @Override 
    protected void onCreate(Bundle savedInstanceState) {  
            super.onCreate(savedInstanceState);   
            app = (MyApplication)getApplication();  //Get  Application
            DropboxClient dropboxclient=app.getName();//Access global value 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-27T20:06:12.750

请执行下列操作，

开始活动`startActivityForResult()`

```
startActivityForResult(0, MyActivity.class); 
```

在您开始的活动完成之前，在开始的活动中，创建一个意图，并将您想要传回的任何数据作为额外的数据放入意图中。现在打电话`setResult(..., intent)`；

```
Intent resultIntent = new Intent();
resultIntent.putExtra("myKey", myVal);
setResult(0, resultIntent); 
```

在您的启动活动中，实施`onActivityResult()`并处理启动活动的结果。您将收到一个`Intent`，这是您在开始的活动中添加额外内容的意图。

```
@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    //TODO handle here. 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-27T20:14:01.207

扩展`Application`类并在该类中声明和初始化您的交叉活动对象，并为这些对象编写 getter。

现在在活动中使用以下代码，您可以访问这些对象。

```
getApplication().getMyObject().doSomeAction(); 
```

请记住，您必须修改您的 androidManifest.xml 以告知 android 您的扩展应用程序类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:03:42.937

解决方案：使用 StartActivityforResult 将数据移回第二个活动到第一个活动

一个例子有数据移动到第二个活动到第一个活动 [-http://micropilot.tistory.com/1577](http://micropilot.tistory.com/1577)

# android - 与 Android 的间歇性连接

> ID：11233978
> 
> 赞同：0
> 
> 时间：2012-06-27T19:58:29.940
> 
> 标签：android, arduino, connectivity, adk

在将我的 Mega ADK 连接到 Galaxy Nexus 4.0.4 时，我发现了一些非常有趣的事情。

如果我有这样的循环，它工作得很好

```
void loop() {

    if(acc.isConnected()){   
        Serial.println("Accessory Connected");
        delay(1000);
    }
    else
        Serial.println("Accessory Not Connected");

} 
```

但是，如果我对它进行这样的小改动，它就无法连接到手机。

```
void loop() {

    if(acc.isConnected())
        Serial.println("Accessory Connected");
    else
        Serial.println("Accessory Not Connected");

    delay(1000);

} 
```

我的设置如下所示：

```
void setup() {

    Serial.begin(115200);

    pinMode(led, OUTPUT);

    pinMode(HabilitaMotores, OUTPUT);
    pinMode(Motor0FW, OUTPUT);
    pinMode(Motor0RW, OUTPUT);
    pinMode(Motor1FW, OUTPUT);
    pinMode(Motor1RW, OUTPUT);

    acc.powerOn();
} 
```

你以前见过这个吗？我犯了一个我看不到的可怕错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-28T06:00:03.393

当 ADK 板尝试连接到 Android 时，它会不断轮询。Android 只等待几秒钟，之后就不允许建立连接。

在代码的第一个版本中，delay() 调用仅在连接后发生。所以在板子连接之前，板子会一直轮询，不会错过Android时间窗口。

但在第二个版本中，每次执行 loop() 函数时都会调用 delay()。所以民意调查每秒只发生一次。

# java - Java - 多个装饰器不起作用

> ID：11233982
> 
> 赞同：2
> 
> 时间：2012-06-27T19:58:36.803
> 
> 标签：java, virtual, decorator

我目前正在尝试使用装饰器。我创建了一个 Tank 类和两个装饰器：DoubleGunTank（射击更强大）和 FasterTank（开得更快）。他们来了：

```
public class Tank {
    public int shoot() {
        return 100;
    }

    public int drive() {
        return 10;
    }
}
public class FasterTank extends Tank {

    protected Tank fTank;

    public FasterTank(Tank tank) {
        fTank = tank;
    }

    public int drive() {
        return fTank.drive() * 2;
    }
}

public class DoubleGunTank extends Tank {

    protected Tank fTank;

    public DoubleGunTank(Tank tank) {
        fTank = tank;
    }
    public int shoot() {
        return fTank.shoot() * 2;
    }   
} 
```

我想做的是用双枪和超高速装饰一辆坦克。所以我这样做：

```
Tank czolg = new Tank();
czolg = new FasterTank(czolg);
czolg = new DoubleGunTank(czolg);
System.out.println("Shoot: "+czolg.shoot());
System.out.println("Drive: "+czolg.drive()); 
```

但结果是：

```
Shoot: 200
Drive: 10 
```

似乎只有一个装饰器激活了 DoubleGunTank 类的两种方法。所以我的问题是：我怎样才能让坦克的射击更有力，同时开得更快？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-27T20:04:55.747

您所有的装饰器都需要覆盖所有装饰对象的方法：

```
class FasterTank extends Tank {

    protected Tank fTank;

    public FasterTank(Tank tank) {
        fTank = tank;
    }

    public int drive() {
        return fTank.drive() * 2;
    }

    //crucial!  
    public int shoot() {
        return fTank.shoot();
    }
}

class DoubleGunTank extends Tank {

    protected Tank fTank;

    public DoubleGunTank(Tank tank) {
        fTank = tank;
    }
    public int shoot() {
        return fTank.shoot() * 2;
    }

    //crucial!  
    public int drive() {
        return fTank.drive();
    }

} 
```

原因如下：当您拥有：

```
Tank czolg = new DoubleGunTank(new FasterTank(new Tank())); 
```

而你调用`czolg.drive()`它实际上调用了一个`DoubleGunTank`类的方法——它是从`Tank`. 因此，不是使用修饰的目标方法，`fTank`而是调用`DoubleGunTank`.

请注意，您可以通过使用`Tank`接口来避免此类问题 - 这将迫使您始终装饰所有方法。此外，如果您的目标`Tank`类具有某些状态或在构造函数中执行某些操作，则每个装饰器（从它继承）将复制此状态并在构造函数中调用相同的代码。

更新（由 OP 本人建议）：

或者，您可以使用`abstract TankDecorator`如下类：

```
abstract class TankDecorator extends Tank {
    protected final Tank fTank;

    protected TankDecorator(Tank fTank) {
        this.fTank = fTank;
    }

    @Override
    public int shoot() {
        return fTank.shoot();
    }

    @Override
    public int drive() {
        return fTank.drive();
    }
}

class FasterTank extends TankDecorator {

    public FasterTank(Tank tank) {
        super(tank);
    }

    public int drive() {
        return fTank.drive() * 2;
    }

}

class DoubleGunTank extends TankDecorator {

    public DoubleGunTank(Tank tank) {
        super(tank);
    }
    public int shoot() {
        return fTank.shoot() * 2;
    }

} 
```

* * *

[我在spring中使用](/questions/tagged/spring "show questions tagged 'spring'")[cglib](/questions/tagged/cglib "显示标记为“cglib”的问题")代理时遇到了这个问题——也通过从我的类继承来利用装饰器模式。基类构造函数被调用两次。请参阅：[CGLIB 代理方法调用构造函数两次？](http://forum.springsource.org/showthread.php?81524)和[Spring AOP 创建额外的 bean](https://stackoverflow.com/questions/7968248)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-27T20:03:38.973

不太确定装饰器模式，但`czlog.drive()`调用`Tank.drive()`因为`DoubleGunTank`没有覆盖它。

您需要覆盖超类中的每个方法并将其委托给包含`fTank`的方法，以便它像您希望的那样工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T22:47:44.160

我发现当您将装饰器模式与具体类一起使用时，这是一个常见问题。这就是为什么我倾向于装饰接口，然而，如果你需要装饰具体的类，通常有一个基类来做这个：

```
public class DecoratedTank extends Tank {
   private Tank delegate;

   public DecoratedTank(Tank delegate) {
       this.delegate = delegate;
   }

   @Override
   public int shoot() {
       return delegate.shoot();
   }

   @Override
   public int drive() {
       return delegate.drive();
   }
} 
```

然后做你的双枪坦克：

```
public class DoubleGunTank extends DecoratedTank {
    public DoubleGunTank(Tank delegate) {
        super(delegate);
    }

    @Override
    public int shoot() {
        return 2 * super.shoot();
    }
} 
```

# wpf - 带有 Linq to SQL 的 WPF，带有超时的过程

> ID：11233984
> 
> 赞同：1
> 
> 时间：2012-06-27T19:58:46.110
> 
> 标签：wpf, linq-to-sql, c#-4.0

我有一个带有 Linq to SQL 模型的 WPF 应用程序。在 .dbml 文件中，我有一个返回地址坐标的存储过程。该程序使用活动的互联网连接调用谷歌地图“服务”并获取坐标。

问题是，当互联网连接很慢或很忙时，该过程需要很长时间才能返回坐标，并且我在 C# 中得到一个 TimeOut 异常。

我想知道是否有办法控制如果该过程需要超过 x 秒才能返回，则跳过它并继续该过程，因为坐标不是强制性信息。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-27T20:08:52.653

您可以做到这一点的唯一方法是异步运行 SP 并使用计时器，在 X 秒过去后取消异步进程。

要做到这一点，您可以采取简单的方法并使用[`Task`](http://msdn.microsoft.com/en-us/library/system.threading.tasks.task.aspx).

接下来，您可以创建一个`CancellationToken`并将其传递给任务的 start 方法。当计时器超时（您的计时器，而不是 SP），只需取消任务。有关如何执行此操作的快速方法，我将要求您阅读有关[此问题](https://stackoverflow.com/questions/4036198/does-task-waitint-stop-the-task-if-the-timeout-elapses-without-the-task-finish)的答案。

# javascript - $('input[type=checkbox]').change(function()

> ID：11233985
> 
> 赞同：0
> 
> 时间：2012-06-27T19:58:51.180
> 
> 标签：javascript, jquery

目前我有以下脚本检查复选框值是否已更改，但当我尝试使用它时它不起作用！

```
<script>
    $('input[type=checkbox]').change(function () {
        if ($(this).is(':checked')) {
            if ($(this).prev().attr('checked') && $(this).val() != $(this).prev().val()) {
                alert("previous checkbox has same value");
            }
        }
    });​
 </script>

 <input name="" type="checkbox" value="here"/>(if this was checked)
 <input name="" type="checkbox" value="here"/>(then this)
 <input name="" type="checkbox" value="there"/>(would not allow prompt alert) 
 <input name="" type="checkbox" value="here"/>(would allow)​ 
```

你可以看到它在这里工作但是当我尝试使用它时它不起作用 [http://jsfiddle.net/rajaadil/LgxPn/7](http://jsfiddle.net/rajaadil/LgxPn/7)

这个想法是在选中的复选框值与先前选中的复选框值不同时发出警报！

目前我的复选框看起来像

```
<input type="checkbox" name="checkbox[]" onClick="getVal();setChecks(this)" value="`key`=<?php echo $rspatient['key']?>" class="chk" id="chk<?php echo $a++?>"/> 
```

我认为该功能`('input[type=checkbox]').change(function()`会得到这些但我在某个地方错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:43:12.290

要选择上一个选中的同级复选框，请使用以下命令：

```
$(this).prevAll(":checked:first") 
```

我希望使用`:last`，但`:first`它是有效的。这对我来说是违反直觉的，并且`:first`与通常的工作方式和工作方式不一致`:last`，但是我在几个浏览器中对其进行了测试，结果是一致的。

```
$(':checkbox').change(function() {
    if (this.checked) {
        var lastChecked = $(this).prevAll(":checked:first");
        if (this.value == lastChecked.val()) {
            alert("previous checked box has same value");
        }
    }
}); 
```

**演示：http:** [//jsfiddle.net/LgxPn/15/](http://jsfiddle.net/LgxPn/15/)

* * *

**编辑：**如果“以前选中的复选框”是指用户单击的最后一个框，那么您需要自己跟踪它。没有内置的 jQuery 方法可以告诉您有关点击历史的任何信息。

当用户首先选中几个框，然后选中并立即取消选中一个框时会发生什么？是否应该使用下一个最近选中的复选框？如果是这样，那么您需要跟踪所有选中的框，以及它们被单击的顺序。以下是跟踪复选框的方法：

```
var lastChecked = [];
$(':checkbox').change(function() {
    if (this.checked) {
        if (lastChecked.length && this.value == lastChecked[0].value) {
            alert("the last box you checked has the same value");
        }
        lastChecked.unshift(this);
    }
    else {
        lastChecked.splice(lastChecked.indexOf(this), 1);
    }
});​ 
```

**演示：http:** [//jsfiddle.net/LgxPn/21/](http://jsfiddle.net/LgxPn/21/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-27T20:06:07.203

只是一个猜测（使用更好的语法），试试这个：

```
<script type="text/javascript">
$(function() {
  $('input:checkbox').change(function() {
    if($(this).is(':checked'))
    {
       if ($(this).prev().prop('checked') && $(this).val() != $(this).prev().val()) { 
         alert("previous checkbox has same value");
       }
    }
  });​
});

</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T20:14:52.310

您的警报消息和您的`if`声明不匹配。您检查这些值`!=`是否相等，但警报说它们相等。我假设警报是您要检查的情况。尝试：

```
$(':checkbox').change(function() {
  var $this = $(this);
  var $prev = $this.prev();
  if($this.is(':checked')) {
    if($prev.is(':checked') && $this.val() === $prev.val()) {
      alert('Previous checkbox has same value');
    }
  }
});​ 
```

正如其他人提到的，确保这一切都在一个`$(document).ready()`街区内

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-27T20:22:12.653

这在 Chrome 中似乎对我有用：

```
$(function() {
    $('input[type=checkbox]').click(function() {
        if ($(this).is(':checked')) {
            if ($(this).prev().prop('checked')) {
                if ($(this).val() != $(this).prev('input[type=checkbox]').val()) {
                    alert("previous checkbox has same value");
                }
            }
        }
    });
});​ 
```

**这是一个 JSFiddle：http: [//jsfiddle.net/gy8EQ/](http://jsfiddle.net/gy8EQ/)**

# ruby-on-rails - Rails 在同一个视图上创建和编辑

> ID：11233986
> 
> 赞同：0
> 
> 时间：2012-06-27T19:58:56.017
> 
> 标签：ruby-on-rails, model-view-controller, crud

我正在尝试在 Rails 3.2 和 Ruby 1.9.2 上的同一视图（和同一控制器）上完成创建和编辑。我有一个部分，我正在使用`form_for`标准表单助手。

我使用 Ajax 提交，所以我的页面（表单）没有刷新或重定向。当用户尝试编辑表单时，Rails 自然会创建一个条目而不是更新它。我正在考虑修改**Controller**的`create`方法来检测现有条目，但我不确定这是否是正确的方法。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T20:05:11.297

您可以很容易地在创建和编辑页面中包含相同的表单，方法是将其存储在部分（通常`_form.html.erb`）中并在创建和编辑中呈现表单。

这也是`rails generate scaffold MODEL FIELD:TYPE FIELD1:TYPE1`会给你的。

# c# - C#中的抽象类，没有任何抽象方法

> ID：11233995
> 
> 赞同：1
> 
> 时间：2012-06-27T19:59:24.853
> 
> 标签：c#, .net

乡亲

我很惊讶地看到我的代码正常工作，我在抽象类中没有任何抽象方法。但是按照规则，我们应该至少有一个抽象方法，对吧？:S

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-27T20:00:21.283

不，您不需要抽象类中的抽象方法。

限制是：

*   如果一个类具有抽象方法、属性、索引或事件，那么该类也必须是抽象的。
*   您不能实例化抽象类。

不要求抽象类必须具有抽象方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-27T20:01:43.057

不，这是完全有效的。事实上，`static`C# 中的每个类实际上都是 .NET 中的抽象*和密封*类。（但是，您不能声明要使用 C# 源代码密封的抽象类。）

C# 4 规范在第 10.1.1.1 节（抽象类）中明确指出了这一点：

> 允许（但不是必需）抽象类包含抽象成员。

没有抽象成员的抽象类当然*很少见*，但并非闻所未闻。（不要忘记，不仅仅是方法可以是抽象的——你也可以有抽象的事件和属性。）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-27T20:01:47.713

来自[MSDN - 摘要](http://msdn.microsoft.com/en-us/library/sf985hc5)（已添加重点）：

> 抽象类**可能**包含抽象方法和访问器。

您的抽象类只能包含非抽象方法，或者如果您愿意，它可以是空类。它为您提供了一个无法实例化的基类，这可能对多态有用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-27T20:01:15.667

您不需要抽象方法来拥有抽象类。有时仅限制类被实例化并将其指定为某些继承层次结构的基础很有用。所有方法都可以定义在一个抽象类中。