# StackOverflow 问答 12140000-12140999

# wix - WIX FileSearch Name purpose when used inside RegistrySearch

> ID：12140000
> 
> 赞同：1
> 
> 时间：2012-08-27T10:11:46.377
> 
> 标签：wix, file-search

Let's suppose we need to file if a dll is installed on machine. WE can use code

```
<Property Id="IS_DLL_PRESENT" Secure="yes">
  <RegistrySearch Id="ManDMSRegistrySearch" Root="HKCR" Key="CLSID\{***}\InprocServer32" Type="file">
    <FileSearch Id="DllFileSearch" Name="appName.dll" MinVersion="1.0.0" />
  </RegistrySearch>
</Property> 
```

I'm wondering what is the purpose of Name attribute of FileSearch element? According to [WIX documentation](http://wix.sourceforge.net/manual-wix3/wix_xsd_registrysearch.htm) (see Remarks section) since FileSearch is inside RegistrySearch it just make RegistrySearch to init full file path instead of parent folder path to IS_DLL_PRESENT property.

Documentation says we need to know the fileName to search for it. But logically we can get fileName from parent RegistrySearch element and just verify it exists. And it looks like it works this way because nothing changes *if I change the name in the code above to anything unexisting, like "123.dll", or even the property name "[SomeUndefinedPrivateProperty]" - it simply works in any case* (log file proves that property is initialized always to the same correct file path) and that is strange =).

Can anybody explain this odd behavior?

# haxe - How to find out if an interface is implemented?

> ID：12140002
> 
> 赞同：4
> 
> 时间：2012-08-27T10:11:53.927
> 
> 标签：haxe

How can I find out if an object implements an interface? In other words I need a possibility to check if an object can be cast to a specific type (e.g. a specific interface).

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T10:26:57.393

[`Std.is()`](https://api.haxe.org/Std.html?#is). 或者使用[安全强制](https://haxe.org/manual/expression-cast-safe.html)转换，如果失败会抛出错误。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-27T10:20:49.757

我猜你可以尝试创建对象并捕获类未找到异常。

# html - Ascii code for less than or equal to

> ID：12140003
> 
> 赞同：23
> 
> 时间：2012-08-27T10:11:58.343
> 
> 标签：html, ascii, asciiencoding

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-27T10:56:49.770

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-27T10:21:45.747

您可以使用`&le;`( ≤ ) 或`&ge;`( ≥ )

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-08-27T10:26:29.090

根据本[文档](http://www.fileformat.info/info/unicode/char/2264/index.htm)。

```
HTML Entity (decimal)   &#8804;
HTML Entity (hex)   &#x2264;
HTML Entity (named) &le; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-04-19T15:45:39.777

ALT-243 = ≤<br> ALT-242 = ≥</p>

ASCII 非常方便。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-11T19:02:48.480

我总是在 < 和 > 下划线，它们是标准键盘字符。它可能有点笨拙，但它有效，并且可以节省记忆数字。
坦率

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-27T10:15:05.177

该字符不在 ASCII 表中。您可能想查看[Unicode](http://www.fileformat.info/info/unicode/char/2264/index.htm)。

# f# - F# 元编程：是否可以使 IF X = 1 OR 2 语法？

> ID：12140007
> 
> 赞同：2
> 
> 时间：2012-08-27T10:12:01.563
> 
> 标签：f#, programming-languages, metaprogramming, nemerle

我想简化表达`if(x == 1 || x == 2)`。
我希望我能写`if(x == 1 or 2)`，但没有语法。
其他可能性是使用 Contains 或 Any 方法，例如：`if([1,2].Contains(x))`但这涉及不必要的调用。

我可以创建一些允许我这样做的操作员吗？

在 Nemerle 语言中，我可以编写宏：

```
macro @|||(left, right)
  match (left)
    | <[ $x == $y ]> => <[ $x == $y || $x == $right ]>
    | _ => Message.Error("Error"); <[ ]> 
```

然后用法：

```
if (x == 1 ||| 2) { .. } 
```

我可以在 F# 中以这种方式创建运算符吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T15:39:07.700

我同意 Brian 的评论，即构建一个宏来保存三个字符可能不是一个好主意。这只会使程序更难阅读（对于那些不知道您的自定义宏或更改运算符含义的人）。

此外，您很可能可以使用标准 F# 构造（如模式匹配）以更简洁的方式编写相同的逻辑。例如：

```
match x with
| 1 | 2 -> printfn "yes"
| _     -> printfn "no" 
```

惯用的解决方案将取决于具体案例，从您给出的示例中很难判断。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T13:48:27.097

您可以使用`|>`其中一个 haskell monoid 实例的常见用法来完成此操作。

```
let appendResults f g = (fun x -> f(x) || g(x))
let f x = x=1
let g x = x=2
let inline (>>||) x y = (appendResults f g) x y
let x = 1
if(x |> (1 >>|| 2)) then printfn "true" else printfn "false" 
```

对于任意数量的参数，只需模仿`mconcat`haskell 中的相关方法即可获得相同的效果，可能像这样：

```
let rec concatResults = function
| [] -> (fun x -> false)
| (x:xs) -> appendResults x (concatResults xs) 
```

不过老实说，您也可以只使用 Contains。如果有任何特殊的开销，我怀疑它真的很重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-28T06:28:58.410

我同意布赖恩和托马斯的观点；发明自己可能只使用几次的宏有点**实际意义。**
但是，从研究函数式语言的内部结构来看，我*确实觉得这很有趣。*
考虑一下：

```
// Generic
let inline mOp1<'a> op sample x = op sample x, sample
let inline mOp2<'a> op1 op2 (b, sample) x = op1 b (op2 sample x), sample

// Implementation for (=) and (||)
let (==) = mOp1 (=)
let (|=) = mOp2 (||) (=)

// Use
let ret1 = x == 1 |= 2 |> fst 
```

您可以在此处找到更多详细信息、其他运算符和性能测量：[https ://stackoverflow.com/a/11552429/974789](https://stackoverflow.com/a/11552429/974789)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:54:36.880

这有点骇人听闻，但确实有效

```
let x = 1
let inline (|||) a b = [a;b]
let inline (==) a b = b |> List.exists (fun t -> t=a)

if x == (1 ||| 2) then printfn "true" else printfn "false" 
```

它需要用于或和等于的自定义运算符。修改它以支持任意或链并不难

当然，如果您只需要 2 个数字，您可以这样做

```
let x = 1
let inline (|||) a b = (a,b)
let inline (==) a (c,d) = a=c ||a=d

if x == (1 ||| 2) then printfn "true" else printfn "false" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T11:22:04.747

这是通过将元组转换为数组来实现的，因此不要期望获得最佳性能。

```
let inline (==) a b = 
    Microsoft.FSharp.Reflection.FSharpValue.GetTupleFields(b) 
        |> Array.exists((=) a) 
```

例子：

```
3 == (1,2)      // false
3 == (1,2,3)    // true 
```

# asp.net - 如何在 ASP.NET 和 C# 的回发中从 DropDownlist 中删除附加项目

> ID：12140011
> 
> 赞同：1
> 
> 时间：2012-08-27T10:12:18.967
> 
> 标签：asp.net, drop-down-menu, postback, cascade

我有两个`DropDownList`级联控件（第二个控件是根据第一个控件的选择填充的）：

```
<asp:DropDownList ID="ddlProduct" runat="server" AppendDataBoundItems="true" 
    AutoPostBack="true" onselectedindexchanged="ddlProduct_SelectedIndexChanged">
    <asp:ListItem Value="" Selected="True"> - Product - </asp:ListItem>
</asp:DropDownList>

<asp:DropDownList ID="ddlCategory" runat="server" AutoPostBack="true" 
    OnSelectedIndexChanged="ddlCategory_SelectedIndexChanged" AppendDataBoundItems="true">
    <asp:ListItem Value="" Selected="True"> - Category - </asp:ListItem>
</asp:DropDownList> 
```

在`ddlProduct.SelectedIndexChanged`事件处理程序中，我有以下代码：

```
ddlCategory.DataSource = _productService.GetCategoryByProductId(ddlProduct.SelectedValue);
ddlCategory.DataTextField = "CategoryName";
ddlCategory.DataValueField = "CategoryId";
ddlCategory.DataBind(); 
```

用户第一次从中选择产品时`ddlProduct`已`ddlCategory`正确填充。接下来的时间，类别中`ddlCategory`的附加到第一次选择的类别，依此类推。我试着输入`ddlProduct.SelectedIndexChanged`：

```
ddlCategory.Items.Clear(); 
```

但该方法也删除了硬编码的项目

```
<asp:ListItem Value="" Selected="True"> - Category - </asp:ListItem> 
```

我怎样才能从 ddlCategory 中删除附加的项目？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:19:15.423

您可以`AppendDataboundItems="false"`手动设置和插入默认项，例如在[`DropDownList.DataBound`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basedataboundcontrol.databound)事件中：

```
protected void ddlCategory_DataBound(object sender, EventArgs e)
{
    if (ddlCategory.Items.Count > 0)
    {
            ddlCategory.Items.Insert(0, " - Category - ");
            ddlCategory.Items[0].Value = "";
            ddlCategory.SelectedIndex = 0;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:17:13.737

方法调用`AppendDataBoundItems="true"`后手动删除和附加空项`DataBind`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:17:18.497

删除类别项目后，您可以使用代码添加默认类别...

```
ddlCategory.Items.Add(new ListItem("- Category -", "0", true)); 
```

# php - php表单不发布给自己

> ID：12140013
> 
> 赞同：-1
> 
> 时间：2012-08-27T10:12:25.620
> 
> 标签：php, html

我有一个简单的下拉菜单，可以将结果发布给自己，但是当我在下拉菜单中选择一个选项时，它不会按预期回显结果。

我确定我只是错过了一些简单但无法发现的东西。有任何想法吗？表单发布但不回显 $user_settings。

```
<?php
include "functions.php";
connect();

$sql="SELECT user_id, user_realname FROM users ORDER BY user_realname ASC";
    $result=mysql_query($sql);

    while ($row = mysql_fetch_array($result)) {
        $name=$row['user_realname'];
        $options.="<OPTION VALUE=>".$name.'</option>';
        }

if(isset($_POST['submit'])){
    $user_realname = $_POST['username_select'];
    $user_select = mysql_query("SELECT user_id, user_realname FROM users WHERE user_realname = '$user_realname'")
    or die ("Could not get user data");

    while($row = mysql_fetch_array($user_select)){

        $user_settings = $row['user_id'];
        echo $user_settings;
    }
}
?>

<html>
    <head>
        <body>
            <form action="<?php echo $PHP_SELF;?>" method="POST">
                <tr><label>Choose User to Edit</tr>
                <tr><SELECT NAME="username_select"><OPTION VALUE=""></option>User's Name<?php echo $options;?></SELECT></label></tr>
                <tr><input type="submit" value="submit" name="submit"></tr>
            </form>
            <?php echo $user_settings;?>
            <br/>
            <a href="admin.php">Go Back</a>
        </body>
    </head>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:13:23.147

用户`$_SERVER['PHP_SELF']`而不是 $PHP_SELF

# java - 如何在 JTextPane 中的组件周围环绕文本？

> ID：12140026
> 
> 赞同：5
> 
> 时间：2012-08-27T10:13:04.630
> 
> 标签：java, swing, insert, jtextpane, jcomponent

我不明白 JTextPane 中的包装行为。如果我插入一个短文本，然后是一个 JComponent，然后再插入一个短文本，如果框架足够大，我可以在一行中看到插入的内容。但是，如果文本更长以至于需要多行，则组件总是被放置在新行中。

我已经认识到，在将组件插入 JTextPane 后，它的文本会变长一个字符。因此，如果一个组件被 JTextPane 视为一个字符，为什么它的行为不像一个字符？可能取决于java版本吗？我使用**Java(TM) SE 运行时环境（构建 1.7.0-b147）**

下面是我的代码（用 shortText/longText 实例化变量 currentText 以重现上述行为）：

```
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JScrollPane;
import javax.swing.JTextPane;
import javax.swing.text.BadLocationException;
import javax.swing.text.SimpleAttributeSet;

public class Test {
    public static void main(String[] args) {
        JFrame frame = new JFrame();
        JTextPane textPane = new JTextPane();
        textPane.setContentType("text/html");

        String shortText = "one two three four five six seven";
        String longText = "A text component that can be marked up with attributes that are represented graphically. You can find how-to information and examples of using text panes in Using Text Components, a section in The Java Tutorial. This component models paragraphs that are composed of runs of character level attributes. Each paragraph may have a logical style attached to it which contains the default attributes to use if not overridden by attributes set on the paragraph or character run. Components and images may be embedded in the flow of text.";
        String currentText = shortText;

        try {
            // insert text before the component
            textPane.getDocument().insertString(textPane.getDocument().getLength(), currentText,
                    new SimpleAttributeSet());

            textPane.setSelectionStart(textPane.getDocument().getLength());
            textPane.setSelectionEnd(textPane.getDocument().getLength());

            JComboBox component = new JComboBox();
            component.setMaximumSize(component.getPreferredSize());
            textPane.insertComponent(component);

            // insert text after the component
            textPane.getDocument().insertString(textPane.getDocument().getLength(), currentText,
                    new SimpleAttributeSet());

        } catch (BadLocationException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        textPane.setEditable(false);

        frame.add(new JScrollPane(textPane));
        frame.setExtendedState(JFrame.MAXIMIZED_BOTH);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:20:30.373

由于您设置的内容类型，这种奇怪的行为似乎发生了。尝试删除此行：

```
textPane.setContentType ( "text/html" ); 
```

之后你会发现一切正常。我不确定它为什么会发生 - 可能是一些渲染错误或只是预期的行为。

PS 我不认为在文本窗格中使用 Swing 组件（无论原因是什么）是一个不错的选择。但这只是我的观点...

# android - 布局编辑器中的 ListFragment 或 ListView 预览

> ID：12140027
> 
> 赞同：3
> 
> 时间：2012-08-27T10:13:10.340
> 
> 标签：android, graphical-layout-editor

我正在尝试`ListFragment`在图形布局编辑器中预览 a。由于它没有要预览的片段布局，我只是创建了一个带有`ListView`内部的 xml，只是为了查看项目的外观，并使用默认项目布局之一设置*预览列表内容*，只是为了尝试。

问题是：

1.  ~~无论我选择什么*预览列表内容，预览中的列表都是空的；*~~（我不知道我做错了什么，现在可以了）
2.  我想预览我自己的自定义列表项*View*，而不仅仅是一个布局，因为当`isInEditMode()`它是真的时我会做一些事情。

任何的想法？

**编辑**：片段是 a `ListFragment`，但我可以使用“临时” listview.xml 布局。我想要的是一种在我的`CustomListItemView`内部查看列表视图的方法。在片段中，我将使用自定义适配器将它们放在那里；在布局编辑器中，我希望我可以`CustomListItemView`从*预览列表内容*菜单中进行选择。

我不能只使用自定义项的布局作为预览列表内容，因为它的根是`<merge>`（我的自定义项扩展`RelativeLayout`）。这可以通过更改`<merge>`为`<RelativeLayout>`. 但是，此自定义项目视图会根据数据而变化，因此我很想通过使用该`isInEditMode()`工具查看各种状态的预览。

如果没有临时的 listview.xml 布局，这一切都可以工作，那么最好的情况是，但这正在成为一个功能请求。

现在我正在诉诸使用垂直`LinearLayout`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-29T23:56:29.420

我看了看，看起来答案是今天不可能，因为有两个错误。

1.  出于某种原因，如果 ListView 是布局的根元素，而不是嵌入到布局中，则 ListView 预览不起作用。解决方法很简单；只需用其他一些布局（如 LinearLayout）围绕 ListView，将 ListView 的 layout_width 和 layout_height 设置为 match_parent。

2.  出于某种原因，当具有 ListView 和自定义视图的布局包含到另一个布局中时，自定义列表项布局不起作用。我知道这曾经有效，所以它一定在某个时候坏了，可能是当我们从使用注释样式元数据切换到工具命名空间元数据来记录要使用的布局时。

我已提交此问题以跟踪工作：
[http ://code.google.com/p/android/issues/detail?id=36838](http://code.google.com/p/android/issues/detail?id=36838)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-29T14:32:14.630

你可以在我的帖子中找到有用的关于使用 listfragment 的布局，它不会解决你所有的问题，但至少你可以直接使用你将要使用的有效布局：

[来自 xml 的 ListFragment 布局](https://stackoverflow.com/questions/11770773/listfragment-layout-from-xml)

# c# - push_back 到 c++ 中的向量与添加到 c# 中的列表

> ID：12140034
> 
> 赞同：-1
> 
> 时间：2012-08-27T10:13:24.550
> 
> 标签：c#, c++, list, vector

我在 C++ 中有 1 个代码，在 C# 中有 1 个代码

我应该强调，我只是测量了一个 .push-back 和一个 .add 的时间，对于它们的 10000 次出现，我写了花费的时间。所以其余的代码并不重要。我只是为了澄清而写了它们。

c++代码

```
void pv(int depth, m1* prevM1)
{
    if (depth == 0)
        return;
    vector <m1> *mList;
    if (prevM1->childM1 != 0)
        mList = prevMove->childM1;
    else 
    {
        mList = new vector<m1>;   
        f1 (mList);
    }
    for(vector<m1>::iterator it=mList.begin(); it !=m1.end(); ++it)
    {
         pv(depth - 1 ,it.chilM1);
    }
    prevM1->childM1 = mList;
}

void f1(vector<m1>* Moves)
{ 
```

//我有一个计数器和一个围绕这个 push_back 的时间。当它达到 10000 次时，我打印时间

```
 m1 obj;
    Moves->push_back(obj); 
```

// 和这里

```
 m1 obj2;
    Moves->push_back(obj2);
    m1 obj3;
    Moves->push_back(obj3);
    m1 obj4;
    Moves->push_back(obj4);
    m1 obj5;
    Moves->push_back(obj5);
    m1 obj6;
    Moves->push_back(obj6);
    m1 obj7;
    Moves->push_back(obj7);
    m1 obj8;
    Moves->push_back(obj8);
    m1 obj9;
    Moves->push_back(obj9);
    m1 obj10;
    Moves->push_back(obj10);
} 
```

--------> 我在 main 中执行这个

```
m1 move;
PV(10, &Moves); 
```

c#代码

```
m1 f1()
{
    List<m1> Moves = new List<m1>(); 
```

//我有一个计数器和一个围绕这个 Add 的时间。当它达到 10000 次时，我打印时间

```
 m1 obj = new m1();
    Moves.Add(obj); 
```

//和这里

```
 m1 obj2 = new m1();
    Moves.Add(obj2);        
    m1 obj3 = new m1();
    Moves.Add(obj3);        
    m1 obj4 = new m1();
    Moves.Add(obj4);        
    m1 obj5 = new m1();
    Moves.Add(obj5);        
    m1 obj6 = new m1();
    Moves.Add(obj6);        
    m1 obj7 = new m1();
    Moves.Add(obj7);        
    m1 obj8 = new m1();
    Moves.Add(obj8);        
    m1 obj9 = new m1();
    Moves.Add(obj9);        
    m1 obj10 = new m1();
    Moves.Add(obj10);
    return Moves;    
}

void PV(int depth,m1 prevM1)
{
    List<m1> mList;
    if (depth == 0)
    {
        return;
    }
    if (prevMove.childM1 != null)
    {
        mList = prevMove.childM1;
    }
    else
    {
        mList = f1();
    }
    foreach(m1 move in mList)
    {
        pv(depth - 1, move);
    } 
```

--------> 我在 main 中执行这个

```
m1 move;
PV(10, move); 
```

并且 m1 类在 C# 中的 c++ 和 c# 中是相同的

```
class m1
{
    public String ms;
    public List<m1> childM1;
    public double d;
} 
```

在 C++ 中

```
class m1
{
    public:
        string ms;
        m1* childM1;
        double d;
} 
```

c# 中的代码在 12 毫秒内执行，而 c++ 中的代码在 143 毫秒内执行。我运行了很多时间来确定差异。c++ 中的代码至少比 c# 中的代码慢 10 倍。因为 c++ 中的向量与 c# 中的 List 相同，所以我似乎遗漏了一些东西，所以我发现了这种差异。

任何帮助都将受到高度欢迎。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:37:57.800

最大的区别是 C++ 代码`vector`在每次循环迭代后破坏本地，释放由`push_back`. C# 代码只是放弃了对 local 的引用`List`，让垃圾收集器来处理它。尽管程序完成的工作总量可能非常相似，但这可能会使该循环更快。

可能还有许多其他差异；您正在比较具有不同性能特征的两种不同语言。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T10:35:48.733

C++ 是基于值的，即您创建`m1`对象的副本。C# 是基于引用的，即，您存储对对象的引用。

也就是说，我认为您创建的性能测试并不能真正衡量任何东西！我可以想象任何一个编译器都可以检测到循环内部没有真正做任何事情并将其优化掉。更合理的测试是将元素添加到通过引用传递的容器（C# 默认情况下会传递指针）到函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:44:50.813

您的“等效”代码存在几个问题。

1) C++ 必须`vector`在块的末尾解除分配。C# 可以继续滚动并在程序生命周期结束时删除对象和列表

2) C++ string and C# string are completely different things. The `std::string` in C++ is a array of chars which can store arbitrary length stings and has to allocate/deallocate memory. the C# `string` is a pointer which is most likely `null`.

# android - 两个视图之间的 Android 多维数据集转换

> ID：12140038
> 
> 赞同：1
> 
> 时间：2012-08-27T10:13:32.913
> 
> 标签：android, view, 3d, android-animation

是否可以在两个视图之间实现像 3D 转换的立方体？

我得到了两个`FrameLayouts`，在动画布局 1 之前是可见的，在动画布局 2 应该变得可见并且布局 2 消失之后。之间的过渡应该看起来像 GO Launcher 中的立方体过渡。

我发现没有办法实现这一点。是否有任何库或其他有用的方法来解决这个问题？

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:18:12.620

Google 的 ApiDemos 中有一个 3D 翻转示例。我认为您可以将此作为一个很好的起点...

[http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:18:06.483

[android 的简单导航动画](https://stackoverflow.com/questions/3659403/simple-navigation-animation-with-android)这个线程有你需要的开始。

ViewFlipper 和 ViewSwitcher 会有所帮助。

# c# - 显示从数据库读取 ToUniversalTime() 的 IST 时间

> ID：12140039
> 
> 赞同：0
> 
> 时间：2012-08-27T10:13:34.823
> 
> 标签：c#, asp.net, .net, datetime, timezone

我通过使用 C# 语言在数据库 MYSQL 中转换为**ToUniversalTime()来存储用户提交的帖子。**

```
 BLLContext bll=new BLLContext();
 bll.DatePosted = DateTime.Now.ToUniversalTime();
 BLLContextRepo repo=new BLLContextReop();
 repo.SubmitContext(bll); 
```

当我尝试使用**ToLocalTime()**检索它时，它显示服务器的本地时间（它在美国）。但我想显示印度标准时间 (IST)。未显示印度标准时间的实际代码

```
<asp:Label ID="Label1" runat="server" Text='<%# string.Format("{0: MMM d, yyyy "+"@"+" hh:mm tt}",((DateTime)DataBinder.Eval(Container.DataItem,"DateUpdated")).ToLocalTime()) %>' /> 
```

有没有类似的东西

```
<asp:Label ID="Label1" runat="server" Text='<%# string.Format("{0: MMM d, yyyy "+"@"+" hh:mm tt}",((DateTime)DataBinder.Eval(Container.DataItem,"DateUpdated")).ToLocalTime("Indian Standard Time")) %>' /> 
```

我怎样才能实现它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T18:13:14.953

您需要`DateTime`使用相关的`TimeZoneInfo`. 例如：

```
TimeZoneInfo zone = TimeZoneInfo.FindSystemTimeZoneById("Indian Standard Time");
DateTime indian = TimeZoneInfo.ConvertTimeFromUtc(originalDateTime, zone); 
```

或者，您可能想查看我正在编写的日期/时间 API，[Noda Time](http://noda-time.googlecode.com)，我想通过分离“本地”日期/时间的概念（不时区）从您知道时区的地方，从您只知道与 UTC 的偏移量的地方开始。

# jakarta-ee - 多对多删除不同步到数据库

> ID：12140042
> 
> 赞同：2
> 
> 时间：2012-08-27T10:13:49.277
> 
> 标签：jakarta-ee, jpa, glassfish, many-to-many

我在实体“Car”和“Pakete”之间有多对多的关系，我尝试通过从两端删除来删除它们之间的链接：

```
public Pakete removeAllLinksFromPacket(int packetId) {
    Pakete p = em.find(Pakete.class, packetId);
    if ( null != p ) {
        for(Car c : p.getCars() )  {
            c.getPakets().remove(p);
            // em.merge(c);
        }
        p.getCars().clear();
        // em.merge(p);
        // em.flush();
    }
    return p;
} 
```

当我执行上面的代码时，链接会在当前会话的持久性上下文中被删除，但是更改不会同步到数据库。如果我然后停止并重新启动会话，链接会再次出现:-(。注释掉的 em.merge() 和 em.flush()es 只是一次绝望的尝试。

服务器是 glassfish 3.1.2

实体如下所示：

```
@Table(name="cars")
public class Car implements Serializable {

@EmbeddedId
private CarPK id;

//bi-directional many-to-many association to Pakete
    @ManyToMany
    @JoinTable(
    name="cars_pakete"
    , joinColumns={
        @JoinColumn(name="uid", referencedColumnName="uid"),
        @JoinColumn(name="car_name", referencedColumnName="name"),  
        }
    , inverseJoinColumns={
        @JoinColumn(name="paket_id")
        }
    )
    private Set<Pakete> paketes;
        public Car() {
        }

    public CarPK getId() {
        return this.id;
    }

    public void setId(CarPK id) {
       this.id = id;
    }

        // ... other members getter/setter removed
} 
```

和

```
@Table(name="pakete")
public class Pakete implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private int id;

    // ... some member variables removed

    //bi-directional many-to-many association to Car
    @ManyToMany(mappedBy="paketes")
    private Set<Car> cars;

    public Pakete() {
    }

    public int getId() {
        return this.id;
    }

    public void setId(int id) {
        this.id = id;
    }

    public Set<Car> getCars() {
        return this.cars;
    }

    public void setCars(Set<Car> cars) {
        this.cars = cars;
    }

    // ... some getter/setter removed
} 
```

有一个现有的数据库，我使用 eclipse jpa 工具生成了上述实体。

我错过了什么。作为一种变通方法，我当然可以在连接表上执行本机查询。但是我并没有放弃希望有人可以向我解释这里发生了什么。

提前致谢。

我将代码更改为：

```
public Pakete removeAllLinksFromPacket(int packetId) {
    Pakete p = em.find(Pakete.class, packetId);
    if ( null != p ) {
        List<Car> lc = new ArrayList<Car>();
        lc.addAll(p.getCars());
        if ( lc.isEmpty() )
            throw new NullPointerException("no links");             
        for(Car c : lc ) {
            if ( !c.getPaketes().contains(p) )
                throw new NullPointerException("no packet");
            c.getPaketes().remove(p);

            if ( !p.getCars().contains(c) )
                throw new NullPointerException("no car");
            p.getCars().remove(c);
        }
    } else
        throw new NullPointerException("No packet found");

    return p;
} 
```

并添加了一些类似断言的异常以确保。它没有给出任何线索。

在一个用例中，该函数本身由另一个函数调用，该函数首先删除所有链接，然后添加新链接。它看起来像这样：

```
@Override
public void mapCarsToPacket(int packetId,
    List<String> carNames) {
    // 1\. remove all existing links
    Pakete p = eao.removeAllLinksFromPacket(packetId);

    // 2\. add the new links
    for (String cn : carNames ) {
        List<Car> cars = eao.getCarsWithName(cn);
        for(Car c : cars ) {
            p.getCars().add(c);
            c.getPaketes().add(p);
        }
    }
} 
```

所以这个函数在一个事务中运行，当我执行它时，旧的数据包仍然没有从数据库中删除，**但是新的链接被插入了**。然后数据库包含新的和旧的列表。当列表重叠时，例如新列表包含已经链接的汽车，由于违反唯一约束，我得到一个 DBException。

但是，如果数据包本身像这样被删除：

```
public void deletePacketAndAllItsLinks(int id) {
    Pakete p = removeAllLinksFromPacket(id);
    if ( null != p ) {
        em.remove(p);
    }
} 
```

哦，奇怪，连接表中的数据包及其所有链接都被删除了。

目瞪口呆...

暂时：**我放弃！**这真的很糟糕，但它有效：

```
public Pakete removeAllLinksFromPacket(int packetId) {
    em.flush();
    em.clear();
    em.createNativeQuery("DELETE FROM cars_pakete WHERE paket_id=?").setParameter(1, packetId).executeUpdate();
    Pakete p = em.find(Pakete.class, packetId);
    if ( null != p ) {
        List<Car> lc = new ArrayList<Car>();
        lc.addAll(p.getCars());
        for(Car c : lc ) {
            c.getPaketes().remove(p);               
            p.getCars().remove(c);
        }
    }
    return p;
} 
```

我自己保持持久性上下文同步。这肯定不是 JPA 的精神，我真的很讨厌它。但是，我可以继续我的项目。感谢任何试图提供帮助的人。欢迎任何未来导致 JPA 符合解决方案的建议。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T08:01:39.297

我想我有同样的问题。

我有几乎相同的情况，我在多对多关系中有两个连接列，但只有一个是由 JPA 容器设置的。另一个填充了空值（但仅当删除 -> 导致数据库上没有任何内容被删除时，因为 where 子句中具有空值的查询不匹配任何行）。插入工作正常，没有任何问题...

也许您可以将语句记录到您的 DBMS 并确认？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:41:58.137

确保在活动事务中进行更改，并提交事务。还要确保集合开始时不是空的。

尝试启用最好的登录，并包含日志。

# mysql - 如果我将 mysql 引擎从 Myisam 更改为 innodb，它会影响我的数据吗

> ID：12140046
> 
> 赞同：7
> 
> 时间：2012-08-27T10:13:54.800
> 
> 标签：mysql

我是 Mysql 的新手。如果我将mysql引擎从Myisam更改为innodb，它会影响我在服务器上的数据吗？

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T10:25:55.017

将引擎从 更改`MyISAM`为`INNODB`不应该影响您的数据，但从安全的角度来看，您可以在更改引擎之前轻松备份您的表。

1.  进行备份：

    ```
    CREATE TABLE backup_table LIKE your_table;

    INSERT INTO backup_table SELECT * FROM your_table; 
    ```

2.  它可能会影响查询的性能。您需要配置 Innodb 特定的[系统变量](http://dev.mysql.com/doc/refman/5.5/en/innodb-parameters.html)。例如

    ```
    innodb_buffer_pool_size = 16G
    innodb_additional_mem_pool_size = 2G
    innodb_log_file_size = 1G
    innodb_log_buffer_size = 8M 
    ```

3.  将引擎更改为`INNODB`：

    ```
    ALTER TABLE table_name ENGINE=INNODB; 
    ```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-25T14:20:41.147

在将 MyISAM 表转换为 InnoDB 时，我发现了两个警告：行大小和对全文索引的支持

由于最大记录大小，我遇到了将一些表从 MyISAM 的现成应用程序转换为 InnoDB 的问题。MyISAM 支持比 InnoDB 更长的行。默认 InnoDB 安装中的最大值约为 8000 字节。您可以通过 TRUNCATE'ing 失败的表来解决此问题，但这会在稍后的 INSERT 中咬住您。您可能必须将数据分解为多个表或使用可变长度列类型（例如 TEXT 可能会更慢）对其进行重组。

库存的 Innodb 安装不支持 FULLTEXT 索引。这可能会或可能不会影响您的申请。对于我正在转换的一个应用程序表，我们决定在其他字段中查找我们需要的数据，而不是进行全文扫描。（在转换为 InnoDB 之前，我对其进行了“ALTER TABLE DROP INDEX...”以删除 FULLTEXT 索引。）无论如何，我不建议为写入量大的表使用全文索引。

如果第一次尝试使用“ALTER TABLE...”转换一个充满数据的大表，你可能没问题。

[http://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html](http://dev.mysql.com/doc/refman/5.5/en/innodb-restrictions.html)

最后，如果你想在一个读取繁重的运行系统上从 MyISAM 转换到 InnoDB（其中 UPDATE 和 INSERT 很少见），你可以在不中断用户的情况下运行它。（RENAME 以原子方式运行。如果其中任何一个不起作用，它将退出所有更改。）

```
CREATE TABLE mytable_ind AS SELECT * FROM mytable;
ALTER TABLE mytable_ind ENGINE=InnoDB;
RENAME TABLE mytable TO mytable_myi, mytable_ind TO mytable;
DROP TABLE mytable_myi; 
```

# xcode - NSDictionary 对象到 NSDate

> ID：12140050
> 
> 赞同：0
> 
> 时间：2012-08-27T10:14:08.673
> 
> 标签：xcode, nsstring, nsdate, nsdictionary

我需要有关此问题的帮助。

我会将`NSString`通过键获得的对象从 a`NSMutableDictionary`转换为 a`NSDate`

这是字典中的对象

```
[elemento objectForKey:@"data"] 
```

这是整个代码：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
    // Time format for the string value
[dateFormatter setDateFormat:@"EEE, dd MMM yyyy HH:mm:ss +0000"];

NSDate *date = [dateFormatter dateFromString:[elemento objectForKey:@"data"]];
NSLog(@"date => %@", date);

[dateFormatter setDateFormat:@"d MMM yyyy HH:mm:ss Z"];
NSString *dateStr = [dateFormatter stringFromDate:date];

NSLog(@"date modded => %@", dateStr); 
```

` 但是从控制台我得到了这个消息：

```
2012-08-27 11:51:31.961 iRSSReader[2319:c07] date from dictionary => Thu, 03 May 2012 16:55:02 +0000

2012-08-27 11:51:31.962 iRSSReader[2319:c07] date => (null)
2012-08-27 11:51:31.962 iRSSReader[2319:c07] date modded => (null) 
```

例如，如果我尝试使用`NSString`值而不是`NSDictionary`值

```
NSString *dateStr = @"Thu, 03 May 2012 16:55:02 +0000" 
```

它工作正常。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-15T09:02:40.307

可能**的 elemento**不包含键“data”-> [elemento objectForKey:@"data"] 为**nil**

# c++ - 我可以将字符串文字变成标识符吗

> ID：12140051
> 
> 赞同：0
> 
> 时间：2012-08-27T10:14:27.800
> 
> 标签：c++, visual-c++

在 Visual C++ 中，给定这个函数声明：

```
int main(); 
```

在函数体中，我想定义一个类型与函数（返回）类型相同的变量，但假设我不想使用 int 或 main，所以我尝试了这样的事情：

```
int main() {
    decltype(__identifier(__FUNCTION__)) x;
} 
```

这不起作用，因为 __identifier 不接受字符串文字。我可以使用某种方法将字符串文字变成标识符吗？或者，有没有一种方法可以在函数体内定义 int 类型的 x，而不使用返回类型 (int) 或函数名 (main)？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-25T05:42:24.147

实际上，它确实接受字符串文字，但您必须取消警告才能使其正常工作。你可以这样做：

```
#define SYMBOL_FROM_STRING(S) (__pragma(warning(suppress: 4483)) __identifier(S))

decltype(SYMBOL_FROM_STRING(__FUNCTION__)) x; 
```

# web-services - Apache CXF Wsdl2Java compiler error: Fault message has multiple parts

> ID：12140062
> 
> 赞同：1
> 
> 时间：2012-08-27T10:15:04.363
> 
> 标签：web-services, wsdl, cxf

Ok. So I am looking at the [MTOSI](http://www.tmforum.org/BestPracticesStandards/MTOSI/2319/Home.html "MTOSI") standards from the TMForum Group and found a [reference implementation](http://sourceforge.net/projects/mtosi-ri/ "reference implementation") for the standard on sourceforge. Now this implementation contains a lot of WSDL files and I wanted to see what kind of operations are supported by the standards. I am not good at reading WSDL files, so I thought of using Apache CXF to compile some WSDL files to Java files, hoping to make it easier for me to read.
Unfortunately, the Wsdl2Java compiler is throwing an error that I am unable to fathom. So I was hoping to get some insight here on the error.
Below I have posted the Wsdl files contents. The error that I get is:
**Fault Message ProcessingFailureException has multiple parts which is disallowed by the WSDL specification.**
As far I could understand, there are 3 WSDL files and 2 XSD files as follows:
**FaultServiceSOAP_HTTP.wsdl**

```
 <wsdl:operation name="getActiveAlarmsCount">
        <wsdl:input>
            <soap12:header message="tmf854WS:getActiveAlarmsCount" part="mtosiHeader" use="literal" />
            <soap12:body parts="mtosiBody" use="literal" />
        </wsdl:input>
        <wsdl:output>
            <soap12:header message="tmf854WS:getActiveAlarmsCountResponse" part="mtosiHeader" use="literal" />
            <soap12:body parts="mtosiBody" use="literal" />
        </wsdl:output>
        <soap12:fault name="ProcessingFailureException">
            <soap12:fault name="ProcessingFailureException" use="literal" />
        </soap12:fault>
    </wsdl:operation>

    <wsdl:operation name="getActiveAlarms">
        <wsdl:input>
            <soap12:header message="tmf854WS:getActiveAlarms" part="mtosiHeader" use="literal" />
            <soap12:body parts="mtosiBody" use="literal" />
        </wsdl:input>
        <wsdl:output>
            <soap12:header message="tmf854WS:getActiveAlarmsResponse" part="mtosiHeader" use="literal" />
            <soap12:body parts="mtosiBody" use="literal" />
        </wsdl:output>
        <soap12:fault name="ProcessingFailureException">
            <soap12:fault name="ProcessingFailureException" use="literal" />
        </soap12:fault>
    </wsdl:operation>

</wsdl:binding>

<wsdl:service name="AlarmRetrieval">
    <wsdl:port name="AlarmRetrieval" binding="tmf854WS:AlarmRetrievalSoapHTTPBinding">
        <soap12:address location="http://aserver/mtosi/v1/AlarmRetrieval" />
    </wsdl:port>
</wsdl:service> 
```

**FaultService.wsdl**

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- TMF854 Version 1.0 - Copyright TeleManagement Forum 2005 -->
<wsdl:definitions name="TMF854-FaultService" xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="tmf854.v1.ws" xmlns:tmf854XSD="tmf854.v1" xmlns:tmf854WS="tmf854.v1.ws" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/">
  <!-- ===================== Import Type Definitions ============= -->
  <wsdl:types>
    <xsd:schema targetNamespace="tmf854.v1.ws">
      <xsd:import namespace="tmf854.v1" schemaLocation="../../xsd/interfaces/AlarmRetrieval.xsd"/>
    </xsd:schema>
  </wsdl:types>
  <!-- ===================== Import Exception Definitions ============= -->
  <wsdl:import location="Exceptions.wsdl" namespace="tmf854.v1.ws"/>
  <!-- ===================== Definition of getActiveAlarmsCount Request/Response Messages ========= -->
  <wsdl:message name="getActiveAlarmsCount">
    <wsdl:documentation>
    The getActiveAlarmsCount request message.
    </wsdl:documentation>
    <wsdl:part name="mtosiHeader" element="tmf854XSD:header"/>
    <wsdl:part name="mtosiBody" element="tmf854XSD:getActiveAlarmsCount"/>
  </wsdl:message>
  <wsdl:message name="getActiveAlarmsCountResponse">
    <wsdl:documentation>
    The getActiveAlarmsCount response message.
    </wsdl:documentation>
    <wsdl:part name="mtosiHeader" element="tmf854XSD:header"/>
    <wsdl:part name="mtosiBody" element="tmf854XSD:getActiveAlarmsCountResponse"/>
  </wsdl:message>
  <!-- ===================== Definition of getActiveAlarms Request/Response Messages ========= -->
  <wsdl:message name="getActiveAlarms">
    <wsdl:documentation>
    The getActiveAlarms request message.
    </wsdl:documentation>
    <wsdl:part name="mtosiHeader" element="tmf854XSD:header"/>
    <wsdl:part name="mtosiBody" element="tmf854XSD:getActiveAlarms"/>
  </wsdl:message>
  <wsdl:message name="getActiveAlarmsResponse">
    <wsdl:documentation>
    The getActiveAlarms response message.
    </wsdl:documentation>
    <wsdl:part name="mtosiHeader" element="tmf854XSD:header"/>
    <wsdl:part name="mtosiBody" element="tmf854XSD:getActiveAlarmsResponse"/>
  </wsdl:message>
  <!-- ===================== Port Type Definitions ====================== -->
  <!-- ===================== AlarmRetrieval Port Type  ===================== -->
  <wsdl:portType name="AlarmRetrieval">
    <wsdl:documentation>
    The MTOSI AlarmRetrievalServer porttype
    </wsdl:documentation>
    <wsdl:operation name="getActiveAlarmsCount">
      <wsdl:documentation>
        This is the getActiveAlarmsCount request/response operation
      </wsdl:documentation>
      <wsdl:input message="tmf854WS:getActiveAlarmsCount"/>
      <wsdl:output message="tmf854WS:getActiveAlarmsCountResponse"/>
      <wsdl:fault name="ProcessingFailureException" message="tmf854WS:ProcessingFailureException"/>
    </wsdl:operation>
    <wsdl:operation name="getActiveAlarms">
      <wsdl:documentation>
        This is the getActiveAlarms request/response operation
      </wsdl:documentation>
      <wsdl:input message="tmf854WS:getActiveAlarms"/>
      <wsdl:output message="tmf854WS:getActiveAlarmsResponse"/>
      <wsdl:fault name="ProcessingFailureException" message="tmf854WS:ProcessingFailureException"/>
    </wsdl:operation>
  </wsdl:portType>
</wsdl:definitions> 
```

**Exceptions.wsdl**

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- TMF854 Version 1.0 - Copyright TeleManagement Forum 2005 -->
<wsdl:definitions name="TMF854-Exceptions" xmlns:xsd="http://www.w3.org/2001/XMLSchema" targetNamespace="tmf854.v1.ws" xmlns:tmf854XSD="tmf854.v1" xmlns:tmf854WS="tmf854.v1.ws" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/">
  <!-- ===================== Include (same namespace) Type Definitions ============= -->
  <wsdl:types>
    <xsd:schema targetNamespace="tmf854.v1.ws">
      <xsd:import namespace="tmf854.v1" schemaLocation="../../xsd/interfaces/Exceptions.xsd"/>
    </xsd:schema>
  </wsdl:types>
  <!-- ===================== Definition of Exception Message ====================== -->
  <wsdl:message name="ProcessingFailureException">
    <wsdl:documentation>
    The generic exception message.
    </wsdl:documentation>
    <wsdl:part name="mtosiHeader" element="tmf854XSD:header"/>
    <wsdl:part name="ProcessingFailureException" element="tmf854XSD:ProcessingFailureException"/>
  </wsdl:message>
</wsdl:definitions> 
```

**AlarmRetrieval.xsd**

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- TMF854 Version 1.0 - Copyright TeleManagement Forum 2005 -->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="tmf854.v1" targetNamespace="tmf854.v1" attributeFormDefault="unqualified" elementFormDefault="qualified">
  <!-- ===================== Includes ========= -->
  <xsd:include schemaLocation="../common/header.xsd"/>
  <xsd:include schemaLocation="../networkResources/notifications.xsd"/>
  <!-- ===================== Element Declarations ========= -->
  <xsd:element name="getActiveAlarmsCount" type="getActiveAlarmsCount_T"/>
  <xsd:element name="getActiveAlarmsCountResponse" type="getActiveAlarmsCountResponse_T"/>
  <xsd:element name="getActiveAlarms" type="getActiveAlarms_T"/>
  <xsd:element name="getActiveAlarmsResponse" type="getActiveAlarmsResponse_T"/>
  <!-- ===================== Type Definitions ========= -->
  <xsd:simpleType name="AlarmSource_T">
    <xsd:annotation>
      <xsd:documentation>
      The source of the alarm with respect to the OS receiving this request. This is one of  the active alarm filter criteria.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:restriction base="xsd:string">
      <xsd:enumeration value="INTERNAL"/>
      <xsd:enumeration value="EXTERNAL"/>
    </xsd:restriction>
  </xsd:simpleType>
  <!-- ================= -->
  <xsd:complexType name="ActiveAlarmFilter_T">
    <xsd:annotation>
      <xsd:documentation>
      The active alarm filter data structure.
      Default interpretation (filter criteria is missing or is an empty list) indicates that it is not relevant to the query. All the filter criteria possible enumerations are applicable.
      Examples:
      #1: All filter criteria missing -> Retrieve all alarms associated with all MEs and this OS
      #2: source=internal, all other criteria missing -> Retrieve all alarms associated with this OS only
      #3: source=external, all other criteria missing -> Retrieve all alarms associated with the MEs only
      </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="source" type="AlarmSource_T" minOccurs="0">
        <xsd:annotation>
          <xsd:documentation>
          This attribute filters the alarms based on their source (with respect to the OS receiving this request). Possible values are INTERNAL, EXTERNAL, NOT_APPLICABLE. The value NOT_APPLICABLE means there is no filtering on the alarm source; i.e., internal and external alarms are in the scope.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <xsd:element name="scope" type="NamingAttributesList_T" minOccurs="0">
        <xsd:annotation>
          <xsd:documentation>
          This attribute filters the alarms based on a list of managed elements. The listed managed elements are in the scope. 
If no managed element is provided, alarms from all managed elements are in scope.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <xsd:element name="perceivedSeverityList" type="PerceivedSeverityList_T" minOccurs="0">
        <xsd:annotation>
          <xsd:documentation>
          This attribute filters the alarms based on a list of severities (see ITU-T X.733 definitions). The listed severities are in the scope. 
If no severity is provided, alarms with any severity are in scope.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <xsd:element name="probableCauseList" type="ProbableCauseList_T" minOccurs="0">
        <xsd:annotation>
          <xsd:documentation>
          This attribute filters the alarms based on a list of probable causes (for details refer to the supporting document: ProbableCauses). The listed probable causes are in the scope. If no probable cause is provided, alarms with any probable cause are in scope.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <xsd:element name="acknowledgeIndication" type="AcknowledgeIndication_T" minOccurs="0">
        <xsd:annotation>
          <xsd:documentation>
          This attribute filters the alarms based on its acknowledge indication. Possible values are EVENT_ACKNOWLEDGED, EVENT_UNACKNOWLEDGED, and NOT_APPLICABLE. The value NOT_APPLICABLE indicates that alarms with any acknowledge indication are in scope.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="extVersion" type="xsd:string" use="optional"/>
    <xsd:attribute name="extAuthor" type="xsd:string" use="optional"/>
    <xsd:attribute name="tmf854Version" type="TMF854_Version_T" use="optional"/>
  </xsd:complexType>
  <!-- ===================== getActiveAlarmsCount Request/Response Messages ========= -->
  <xsd:complexType name="getActiveAlarmsCount_T">
    <xsd:annotation>
      <xsd:documentation>
            This operation asks the target top-level OS to count the number of active alarms as restricted by the provided filter. The target OS sends the result to the requesting OS.
            The operation can only be directed to a top-level OS and not to a subordinate OS.

            Raises ProcessingFailureException 
EXCPT_NOT_IMPLEMENTED - Raised when the OS does not support this operation
EXCPT_INTERNAL_ERROR - Raised in case of non-specific OS internal failure
EXCPT_INVALID_INPUT - Raised when an invalid input parameter is provided 
EXCPT_COMM_FAILURE - Raised when communication to an entity (needed to help fulfill the request) is lost
        </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="filter" type="ActiveAlarmFilter_T">
        <xsd:annotation>
          <xsd:documentation>
          Defines the subset of the set of active alarms known to the target OS that are to be counted
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="extVersion" type="xsd:string" use="optional"/>
    <xsd:attribute name="extAuthor" type="xsd:string" use="optional"/>
    <xsd:attribute name="tmf854Version" type="TMF854_Version_T" use="optional"/>
  </xsd:complexType>
  <xsd:complexType name="getActiveAlarmsCountResponse_T">
    <xsd:annotation>
      <xsd:documentation>
            This is the response of the getActiveAlarmsCount operation. See also getActiveAlarmsCount_T.
        </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="activeAlarmCount" type="xsd:unsignedInt">
        <xsd:annotation>
          <xsd:documentation>
              The number of active alarms that pass the filter conditions.
            </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="extVersion" type="xsd:string" use="optional"/>
    <xsd:attribute name="extAuthor" type="xsd:string" use="optional"/>
    <xsd:attribute name="tmf854Version" type="TMF854_Version_T" use="optional"/>
  </xsd:complexType>
  <!-- ===================== getActiveAlarms Request/Response Messages ========= -->
  <xsd:complexType name="getActiveAlarms_T">
    <xsd:annotation>
      <xsd:documentation>
            This operation returns (to the requesting OS) a specified subset of the active alarms known to the target OS. The target OS returns all alarms satisfying the filter constraints of the requesting OS.
            This operation can only be directed to a top-level OS and not to a subordinate OS.
          Refer to the TMF 854 XML Solution Set document for details on the Message Exchange Pattern controls (multiple batch response).

            Raises ProcessingFailureException 
EXCPT_UNSUPPORTED_COMPRESSION_FORMAT - Raised when the specified file compression format is not supported
EXCPT_UNSUPPORTED_PACKING_FORMAT - Raised when the specified file packing format is not supported
EXCPT_NOT_IMPLEMENTED - Raised when the OS does not support this operation
EXCPT_INTERNAL_ERROR - Raised in case of non-specific OS internal failure
EXCPT_INVALID_INPUT - Raised when an invalid input parameter is provided 
EXCPT_COMM_FAILURE - Raised when communication to an entity (needed to help fulfill the request) is lost
        </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="filter" type="ActiveAlarmFilter_T" minOccurs="0">
        <xsd:annotation>
          <xsd:documentation>
          Defines the subset of the set of active alarms known to the target OS that are to be returned to the requesting OS
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="extVersion" type="xsd:string" use="optional"/>
    <xsd:attribute name="extAuthor" type="xsd:string" use="optional"/>
    <xsd:attribute name="tmf854Version" type="TMF854_Version_T" use="optional"/>
  </xsd:complexType>
  <xsd:complexType name="getActiveAlarmsResponse_T">
    <xsd:annotation>
      <xsd:documentation>
            This is the response of the getActiveAlarms operation. See also getActiveAlarms_T.
        </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="activeAlarmList" minOccurs="0">
        <xsd:annotation>
          <xsd:documentation>List of active alarms based on the provided filter.</xsd:documentation>
        </xsd:annotation>
        <xsd:complexType>
          <xsd:sequence>
            <xsd:element name="activeAlarm" type="Alarm_T" maxOccurs="unbounded">
              <xsd:annotation>
                <xsd:documentation>An Active alarm</xsd:documentation>
              </xsd:annotation>
            </xsd:element>
          </xsd:sequence>
        </xsd:complexType>
      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="extVersion" type="xsd:string" use="optional"/>
    <xsd:attribute name="extAuthor" type="xsd:string" use="optional"/>
    <xsd:attribute name="tmf854Version" type="TMF854_Version_T" use="optional"/>
  </xsd:complexType>
</xsd:schema> 
```

**Exceptions.xsd**

```
<?xml version="1.0" encoding="UTF-8"?>
<!-- TMF854 Version 1.0 - Copyright TeleManagement Forum 2005 -->
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="tmf854.v1" targetNamespace="tmf854.v1" attributeFormDefault="unqualified" elementFormDefault="qualified">
  <!-- =========== Includes ========= -->
  <xsd:include schemaLocation="../common/header.xsd"/>
  <xsd:include schemaLocation="vendorExtensions.xsd"/>
  <!-- =========== Element Declarations ========= -->
  <xsd:element name="ProcessingFailureException" type="ProcessingFailureException_T"/>
  <!-- =========== Type Definitions ========= -->
  <xsd:simpleType name="ExceptionType_T">
    <xsd:annotation>
      <xsd:documentation>
      The type of exception returned by failed invokation of an MTOSI message request.
      </xsd:documentation>
    </xsd:annotation>
        <xsd:restriction base="xsd:string">
          <xsd:enumeration value="EXCPT_NOT_IMPLEMENTED"/>
          <xsd:enumeration value="EXCPT_INTERNAL_ERROR"/>
          <xsd:enumeration value="EXCPT_INVALID_INPUT"/>
          <xsd:enumeration value="EXCPT_OBJECT_IN_USE"/>
          <xsd:enumeration value="EXCPT_TP_INVALID_ENDPOINT"/>
          <xsd:enumeration value="EXCPT_ENTITY_NOT_FOUND"/>
          <xsd:enumeration value="EXCPT_TIMESLOT_IN_USE"/>
          <xsd:enumeration value="EXCPT_PROTECTION_EFFORT_NOT_MET"/>
          <xsd:enumeration value="EXCPT_NOT_IN_VALID_STATE"/>
          <xsd:enumeration value="EXCPT_UNABLE_TO_COMPLY"/>
          <xsd:enumeration value="EXCPT_CAPACITY_EXCEEDED"/>
          <xsd:enumeration value="EXCPT_ACCESS_DENIED"/>
          <xsd:enumeration value="EXCPT_UNSUPPORTED_ROUTING_CONSTRAINTS"/>
          <xsd:enumeration value="EXCPT_USERLABEL_IN_USE"/>
          <xsd:enumeration value="EXCPT_COMM_FAILURE"/>
          <xsd:enumeration value="EXCPT_UNSUPPORTED_COMPRESSION_FORMAT"/>
          <xsd:enumeration value="EXCPT_UNSUPPORTED_PACKING_FORMAT"/>
          <xsd:enumeration value="EXCPT_INVALID_FILTER_DEFINITION"/>
          <xsd:enumeration value="EXCPT_INVALID_TOPIC"/>
          <xsd:enumeration value="EXCPT_NOTIFICATION_SERVICE_PROBLEM"/>
        </xsd:restriction>
  </xsd:simpleType>
  <xsd:complexType name="ProcessingFailureException_T">
    <xsd:annotation>
      <xsd:documentation>
      A coarse grain approach is adopted for capturing exceptions as well. This has the advantage of making the catching of exceptions fairly generic. This is similar to the TMF 814 Corba interface. In the future, each interface operation could implement a specific set of the exceptions.
      </xsd:documentation>
    </xsd:annotation>
    <xsd:sequence>
      <xsd:element name="exception" type="ExceptionType_T">
        <xsd:annotation>
          <xsd:documentation>The exception type based on the enumeration
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <xsd:element name="reason" type="xsd:string" minOccurs="0">
        <xsd:annotation>
          <xsd:documentation>A string indicating further details about the exception. It is a free format string filled by the OS.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
      <xsd:element name="vendorExtensions" type="ExceptionVendorExtensions_T" minOccurs="0">
        <xsd:annotation>
          <xsd:documentation>A string indicating further details about the exception. It is a free format string filled by the OS.
          </xsd:documentation>
        </xsd:annotation>
      </xsd:element>
    </xsd:sequence>
    <xsd:attribute name="extVersion" type="xsd:string" use="optional"/>
    <xsd:attribute name="extAuthor" type="xsd:string" use="optional"/>
    <xsd:attribute name="tmf854Version" type="TMF854_Version_T" use="optional"/>
  </xsd:complexType>
</xsd:schema> 
```

I tried to find a detailed reason for the error on the net, but have been unsuccessful till now. Would appreciate it if somebody here could help. Thanks to all in advance.
*P.S.:Do let me know if more information is required.*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:10:48.603

The wsdl2java tool simply states that the files supplied in the MTOSI reference implementation do not conform to the WSDL 1.1 specification. The error lies in `Exception.wsdl` in the following message definition:

```
<wsdl:message name="ProcessingFailureException">
  <wsdl:documentation>
    The generic exception message.
   </wsdl:documentation>
  <wsdl:part name="mtosiHeader" element="tmf854XSD:header"/>
  <wsdl:part name="ProcessingFailureException" element="tmf854XSD:ProcessingFailureException"/>
</wsdl:message> 
```

As you can see here, the message has two parts: `mtosiHeader` and `ProcessingFailureException`. This however, is forbidden in the [WSDL 1.1 Specification, Sec. 3.6](http://www.w3.org/TR/wsdl#_soap%3afault): "*The fault message MUST have a single part.*".

This is actually not your fault, but the fault of the MTOSI reference implementation. The reference implementation seems to be rather old ([their web site](http://mtosi-ri.sourceforge.net/) is last updated 2006) and works with an outdated WS-Stack (Axis 1.3). I guess this stack did not check for all invariants of the WSDL 1.1 spec. Thankfully, wsdl2java does (although I would recommend to use the wsimport tool, standard jdk functionality, instead).

There is not much you can do except for using Axis 1.3 or changing the reference implementation (i.e. remove the `mtosiHeader` part or integrate it into the `ProcessingFailureException` element definition, or something else)

# php - 简单的 UPDATE SQL 查询

> ID：12140065
> 
> 赞同：0
> 
> 时间：2012-08-27T10:15:13.647
> 
> 标签：php, mysql

我正在为客户做一项工作，但由于我有一段时间没有使用 PHP/MySQL，所以我忘记了一些简单的事情，希望你能帮助我。

我有以下 SQL 表：

```
ID (non-null, autoincrement) | credit (int) 
```

我的查询应该将整个“信用”列设置为 0，但 ID 较高的行除外。

所以我会这样做：

```
UPDATE $table SET credit = 0 WHERE... ? 
```

在此先感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:16:55.753

```
UPDATE $table SET credit = 0 WHERE ID > $ID 
```

将更新 ID 大于变量的任何行`$ID`

如果您只想更新具有最大 ID 的行，请使用：

```
UPDATE $table SET credit = 0 WHERE ID = (select max(id) from $table) 
```

编辑：正如 Eggyal 正确指出的那样，MySQL 不喜欢同一张表上的子查询作为更新 - 但你可以很好地解决它：

```
UPDATE $table 
    SET credit = 0 
    WHERE 
        credit='$credit' 
        AND statid='$statid' 
        AND userid='$userid' 
        AND ID = (select ID from (SELECT MAX(ID)as ID from $table) a) 
```

以及来自我的控制台的示例：

```
mysql> select * from first;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    6 | eeee  |
+------+-------+
5 rows in set (0.00 sec)

mysql> update first set title='ffff' where id=(select max(id) from first);
ERROR 1093 (HY000): You can't specify target table 'first' for update in FROM clause

mysql> update first set title='ffff' where id=(select ID from (select max(id) as ID from first) a);
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from first;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    6 | ffff  |
+------+-------+
5 rows in set (0.00 sec) 
```

注意：由于子查询技巧中的子查询会解锁原始表，因此最好在事务中运行它 - 如果表从查询中解锁，它可能在更新时已更改 - 所以它将是在事务中使用这种类型的查询是个好主意。

# android - Facebook 链接在安卓系统中不起作用

> ID：12140069
> 
> 赞同：0
> 
> 时间：2012-08-27T10:15:22.130
> 
> 标签：android, facebook

您好，我只想通过以下链接（在我的 android 项目上）调用 Facebook 应用程序：

```
String url_facebook_prixo = "https://www.facebook.com/pages/Prixo/468580313168290"; 
```

我试过这个：

```
Uri uri = Uri.parse("facebook://facebook.com/page{468580313168290}");
                            Intent viewIntent = new Intent(Intent.ACTION_VIEW, uri);
startActivity(viewIntent); 
```

我尝试使用其他链接，但它只显示我的墙..

有人吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:23:04.823

您应该使用 id 打开页面。

```
Intent facebookIntent = new Intent(
            Intent.ACTION_VIEW,
            Uri.parse("fb://profile/468580313168290"));
startActivity(facebookIntent); 
```

我建议您将其封装在 try catch 中。在catch里面打开一个普通的浏览器意图

# c# - 在自己的地图密钥过期后，我可以将 mapcontrol 用于 Silverlight 吗？

> ID：12140072
> 
> 赞同：1
> 
> 时间：2012-08-27T10:15:33.340
> 
> 标签：c#, silverlight, map, bing-maps

我在 silverlight 应用程序中使用 Microsoft 的 mapcontrol（主要用于 Bing 地图）。我有试用密钥。是否可以在我自己的地图的过期密钥后使用 mapcontrol？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T06:19:16.987

答案在这里：[http ://social.msdn.microsoft.com/Forums/en-US/bingmapssilverlightwpfcontrols/thread/f235f835-c2a4-4eef-8d34-dae633bfb7c6](http://social.msdn.microsoft.com/Forums/en-US/bingmapssilverlightwpfcontrols/thread/f235f835-c2a4-4eef-8d34-dae633bfb7c6)

“不，您需要一个新的 Bing Maps 密钥。试用和开发者帐户只能有一个密钥，因此您需要获得企业许可证或创建一个新帐户。如果此应用程序用于内部使用、资产跟踪或一个大容量网站，您将需要企业许可证。您可以通过 maplic@microsoft.com 联系许可团队“

# java - 将 JComboBox 放入 JTable 并从列表中获取元素而不是编辑单元格

> ID：12140076
> 
> 赞同：0
> 
> 时间：2012-08-27T10:16:23.273
> 
> 标签：java, swing, jtable, jcombobox, renderer

我想让 JTable 中的一个单元格成为 JComboBox 对象并能够使用它。它必须只有一个单元格，而不是整列。表格可以包含特定的单元格，但并非总是如此，它的位置不是静态的。我的问题在于把 JComboBox 放在可以使用的 JTable 中。我附上了到目前为止我能够做到的代码。表包含 JComboBox 但当我单击它时没有列表并打开单元格的编辑器。我想让列表显示出来。我应该做什么或应该在代码中添加/修改什么来实现我的目标？

```
import java.awt.Component;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JRootPane;
import javax.swing.JScrollPane;
import javax.swing.JTable;
import javax.swing.table.DefaultTableCellRenderer;
import javax.swing.table.DefaultTableModel;
import javax.swing.table.JTableHeader;
import javax.swing.table.TableColumn;

public class CustomCellRenderer {
    JTable table;
    TableColumn tcol;

    public static void main(String[] args) {
        new CustomCellRenderer();
    }

    public CustomCellRenderer() {
        JFrame frame = new JFrame();
        JPanel panel = new JPanel();
        Object data[][] = { { "Vinod", "Computer", "3" },
                { "Rahul", "History", "2" }, { "Manoj", "Biology", "4" },
                { "Sanjay", "PSD", "5" } };
        String col[] = { "Name", "Course", "Year" };
        DefaultTableModel model = new DefaultTableModel(data, col);
        table = new JTable(model);
        tcol = table.getColumnModel().getColumn(0);
        tcol.setCellRenderer(new CustomTableCellRenderer());
        tcol = table.getColumnModel().getColumn(1);
        tcol.setCellRenderer(new CustomTableCellRenderer());
        tcol = table.getColumnModel().getColumn(2);
        tcol.setCellRenderer(new CustomTableCellRenderer());
        JTableHeader header = table.getTableHeader();
        JScrollPane pane = new JScrollPane(table);
        panel.add(pane);
        frame.add(panel);
        frame.setSize(500, 150);
        frame.setUndecorated(true);
        frame.getRootPane().setWindowDecorationStyle(JRootPane.PLAIN_DIALOG);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.setVisible(true);
    }

    public class CustomTableCellRenderer extends DefaultTableCellRenderer implements ActionListener {
        public Component getTableCellRendererComponent(JTable table,
                Object obj, boolean isSelected, boolean hasFocus, int row,
                int column) {
            Component cell = super.getTableCellRendererComponent(table, obj,
                    isSelected, hasFocus, row, column);

            if (((String) obj).equals("History")) {
                JComboBox comboBox = new JComboBox();
                comboBox.addItem("History");
                comboBox.addItem("English");
                comboBox.addItem("Biology");
                comboBox.addItem("PE");
                comboBox.addItem("None of the above");
                comboBox.addActionListener(this);

                return comboBox;
            }
            return cell;
        }

        public void actionPerformed(ActionEvent e) {
            System.out.println("Perform some action");
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:13:48.133

您必须实现`TableCellEditor`not a TableCellRenderer 并使用[JTable.setCellEditor(TableCellEditor)](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTable.html#setCellEditor%28javax.swing.table.TableCellEditor%29)进行设置。

看看[这个例子](http://www.exampledepot.com/egs/javax.swing.table/combobox.html)。

# solr - 全文搜索意味着将所有内容都转换为文本？

> ID：12140077
> 
> 赞同：1
> 
> 时间：2012-08-27T10:16:23.643
> 
> 标签：solr

Solr 使用 Lucene 的全文搜索。这是否意味着我必须将所有内容都转换为文本？例如，我有如下文件：

```
 <field name="rollno" type="int" indexed="true" stored="true"/>
   <field name="name" type="string" indexed="true" stored="true"/> 
```

以及基于这些文件的文件，

```
 <doc>
      <field name="id">1</field>
      <field name="rollno">32</field>
      <field name="name">John Milton</field>
 </doc> 
```

我必须将它们全部转换为这样的文本？

```
<copyField source="name" dest="text"/>
<copyField source="rollno" dest="text"/> 
```

和我的搜索处理程序一样，

```
<requestHandler name="/select" class="solr.SearchHandler">
     <lst name="defaults">
       <str name="echoParams">explicit</str>
       <int name="rows">100</int>
       <str name="df">text</str>
     </lst>
</requestHandler> 
```

请澄清我的疑问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:41:31.430

您无需将所有内容都转换为文本。

这取决于字段的内容。
您通常会将文本字段类型用于其中包含更多内容的字段。
[使用文本字段，您可以进行大量处理以使内容可搜索](http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters)。
例如
- 可以应用小写过滤器以使您的搜索不区分大小写 - 可以应用同义词来标记同义词，如车辆、汽车等
- 可以应用词干提取使单词可以按词根搜索，例如银行银行等
- 以及更多用于 At&t 和 Att 等的单词分隔符...

您通常不希望将相同的分析应用于所有字段。
例如，您不希望将词干分析器应用于人名或作者姓名，因为它可能匹配不正确。

对于整数和字符串字段，如果字段已编入索引，您仍然可以在不将它们标记为文本的情况下搜索它们。

复制字段需要将所有内容复制到具有单一字段类型的字段。
如果您不想使用复制字段，可以使用[edismax](http://lucidworks.lucidimagination.com/display/solr/The+Extended+DisMax+Query+Parser)解析器并仍然搜索多个字段。

```
<requestHandler name="standard" class="solr.SearchHandler" default="true">
    <lst name="defaults">
        <str name="defType">edismax</str>
        <str name="echoParams">explicit</str>
        <str name="qf">rollno name</str>
        <str name="q.alt">*:*</str>
    </lst> 
</requestHandler> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:38:05.210

在 schema.xml 文件中，如果未设置 fieldName，则默认设置用于搜索查询的[defaultSearchField 。](http://wiki.apache.org/solr/SchemaXml#The_Default_Search_Field)

```
<defaultSearchField>text</defaultSearchField> 
```

requestHandler 中的[df](http://wiki.apache.org/solr/SearchHandler#df)参数用于类似目的。它会覆盖 schema.xml 文件中定义的默认字段。

如果您使用[copyField](http://wiki.apache.org/solr/SchemaXml#Copy_Fields)向此参数添加多个字段，则您可以搜索所有字段，无论其类型如何。

因此，当您按如下方式创建查询时，它会搜索默认字段。

```
http://localhost:8080/solr/select/?q=searchText 
```

如果要在特定字段中搜索，则应按如下方式创建查询。以下查询将搜索 rollno 字段。

```
http://localhost:8080/solr/select/?q=rollno:32 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:45:59.457

你搞错了。copyField 不会将其转换为文本。它将值从名为 name 的字段复制到名为 text 的字段。这通常用于有一个包含所有值的字段。此字段通常是您的默认搜索字段。让我解释一下为什么这样做：

如果您在上面发布了 2 字段，则必须声明哪一个是您的默认搜索字段。让我们说名字。如果您现在使用没有任何查询语法的普通表达式查询服务器，则将仅搜索字段名称。但通常您也希望搜索字段 rollno。要在没有任何查询语法的情况下执行此操作，您需要声明另一个字段，在本例中名为 text。现在，您将字段名称和字段 rollno 中的值复制到字段文本并将其定义为默认搜索字段。如果您现在搜索 John Milton 或 42，将找到该文档。希望这可以帮助你一点。

# date - uWSGI - 以毫秒为单位的日志日期

> ID：12140080
> 
> 赞同：1
> 
> 时间：2012-08-27T10:16:30.497
> 
> 标签：date, logging, uwsgi

我想记录文件以将日期显示为`%a %b %d %H:%M:%S.%3N`.

```
$ date '+%a %b %d %H:%M:%S.%3N'
Mon Aug 27 12:15:36.954 
```

我已经发现由于碰撞我需要设置`log-date = %%a %%b %%d %%H:%%M:%%S`.

但不能让毫秒或纳秒的工作......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T14:50:58.590

`strftime()`不支持毫秒或纳秒。

您必须依赖较低级别的系统：

[uWSGI 日志格式](https://uwsgi-docs.readthedocs.io/en/latest/LogFormat.html)

不幸的是，这需要**uWSGI v1.3+**。

# jquery - 从文本框中获取值并设置下拉框

> ID：12140083
> 
> 赞同：0
> 
> 时间：2012-08-27T10:16:40.117
> 
> 标签：jquery, jquery-ui

我想将文本框的值设置为我的下拉框第一次尝试.....我希望每当我的文本框值发生更改时，它应该获取下拉框的值并显示在下拉框中。

我希望我的文本框中来自 tablelist 的任何值都应该作为默认值显示在我的下拉框中...

请帮忙。

我试过这个：

```
 $("#editdevicetype").wijcombobox({
    data : datasources,
    showTrigger : true,
    changed:function(e, data) {
        dtype =data.selectedItem.value;
        $('#deviceType1').val(dtype);   

        //document.getElementById("editdevicetype").value=dtype;
        dttype =data.selectedItem.value;
        $('#editdevicetype').val(dttype);
        $('#editdevicetype').val($('#deviceType1').val());
    }
}); 
```

我的表代码：currentCellChanging：函数（e，args）{

```
$("#devicelist").wijgrid(
{
  allowSorting: true,
 allowColSizing: true,

 dtype=data[selRow].DeviceType;
                                              document.getElementById("deviceType1").value=dtype;
                                            //dttype=data.label;
                                            document.getElementById("editdevicetype").value=dtype.replaceByValue(/[^>]+$/, dtype); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:50:29.323

**编辑1：**

什么是表列表？表格列表中的值如何设置为您的文本框？如果您自己的 js 代码正在这样做，那么您可以在设置值后简单地触发更改事件。

```
// code from below to bind to the change event. 
// ...
// some code to set textbox value from tablelist. 
// ...
$('#deviceType1').change(); // this will trigger the change event. 
                            // ensure you have already bound to the change event. 
```

* * *

您需要订阅将在文本框中的文本发生更改时通知您的事件。理想情况下，该事件应该是[更改](http://api.jquery.com/change/)事件。您将编写如下代码：

```
$('#deviceType1').change(function() {
    // value changed. write code to update the combox box.
}); 
```

但是，更改事件似乎仅在文本框失去焦点时触发。如果这个限制没问题，那么你的问题就解决了。但是，如果您想捕捉发生的变化，那么您将需要订阅各种事件来处理键盘输入和鼠标输入以及用户可能将某些内容粘贴到文本框中的情况。

这是@mdmullinax 的答案，它建议您可以绑定到的所有可能事件，以处理您需要支持的情况。

[https://stackoverflow.com/a/6140270/30007](https://stackoverflow.com/a/6140270/30007)。请参阅他评论中更新的小提琴：http: [//jsfiddle.net/pxfunc/zJ7Lf/1/](http://jsfiddle.net/pxfunc/zJ7Lf/1/)

# applescript - Applescript 在 QuickTime 中修剪电影

> ID：12140089
> 
> 赞同：1
> 
> 时间：2012-08-27T10:16:59.947
> 
> 标签：applescript, quicktime

我想按帧数而不是秒数修剪视频文件。到目前为止，我已经尝试了几个选项，这是迄今为止最成功的一个：

```
set start_trim to 5
set end_trim to 6

tell application "QuickTime Player"
    activate
    try
        set movieFile to (the POSIX path of ("PathToMovieFolder")) & "MyMovie.mov"
    on error errorMsg number errorNum
        display alert errorMsg & space & errorNum message ¬
            "An error occured trying to find the file " & movieFile & "." & return & ¬
            "Check the file path exists, and the file spelling." as warning giving up after 60
    end try
    try
        open movieFile with presenting
        delay (0.25)
        present document 1
        delay (0.25)
        trim document 1 from start_trim to end_trim
        display alert errorMsg & space & errorNum message ¬
            "An error occured trying to open & play the file " & movieFile & "." & return & ¬
            "Check the file path exists, and the set delay time" as warning giving up after 60
    end try
end tell 
```

它的作用是将其修剪到秒而不是精确的帧。关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:24:50.717

帧不在 QuickTime Player 字典中。但是，它在 QuickTime Player 7 字典中。如果您需要使用帧而不是秒来修剪，我建议您找一份 QuickTime Player 7 的副本。

或者你可以做这样的事情：

```
set FPS to 29.97
set start_trim to 5
set end_trim to 7

set startFrame to start_trim / FPS
set endFrame to end_trim / FPS

tell application "QuickTime Player"
    activate
    trim document 1 from startFrame to endFrame
end tell 
```

# service - 添加新服务时遇到问题

> ID：12140096
> 
> 赞同：1
> 
> 时间：2012-08-27T10:17:26.250
> 
> 标签：service, cloud-foundry

我已按照[https://github.com/cloudfoundry/oss-docs/tree/master/vcap/adding_a_system_service](https://github.com/cloudfoundry/oss-docs/tree/master/vcap/adding_a_system_service)上的说明复制了 echo 服务并创建了我的新服务。（该文档有些过时，因为“排除的组件”不再存在。

无论如何，当我查看服务器上的“vcap 状态”时，我的服务显示为使用网关和节点运行。但是，当我从客户端查看“vmc 服务”时，我的服务不在列表中。此列表在哪里维护，为什么我的服务不在列表中？

各种服务，包括 blob、文件系统、mongodb 等，都显示在“vcm 服务”列表中，即使它们从未包含在我的配置中。这是在哪里维护的，为什么此列表中还有其他服务？

cloud_controller.log 文件每分钟显示一个“创建服务请求：”用于回显。该服务不在我的配置文件中（它曾经存在，但已被删除，我重复了部署）。是什么提示此请求未在配置中定义？

我的服务的 _gateway.log 显示以下内容：

*   INFO -- 向云控制器发送信息： ...api.vcap.me/services/v1/offerings
*   INFO -- 从云控制器获取句柄 .../offerings/.../handles
*   错误——注册云控制器失败，状态=400
*   调试 -- [GaaS-Provisioner] 连接到节点 mbus..
*   错误——获取句柄失败，状态=404

为什么我的网关无法注册到云控制器？我发现一些报告表明问题出在域名映射上。我已经验证服务器可以找到自己：

*   `$curl api.vcap.me`
*   `Welcome to VMware's Cloud Application Platform`

我可以做些什么来注册我的服务？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:31:14.667

您也可以尝试在 vcap_dev 谷歌群组上提问。

[https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev](https://groups.google.com/a/cloudfoundry.org/forum/?fromgroups#!forum/vcap-dev)

他们专注于回答和讨论 Cloud Foundry 的 OSS 主题！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-21T15:47:55.357

您应该遵循本[指南](http://corneliadavis.com/blog/2013/01/04/learning-how-to-add-services-to-cloud-foundry/)

它对我有用。

问候。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-28T06:43:10.147

如果您正确地遵循文档，事情应该可以正常工作。我知道维护排除的组件列表的机制已经改变，并且在遵循文章中提到的步骤时可能会引起混淆（完全忽略该步骤）。

> **错误——注册云控制器失败，状态=400**

好吧，这是一个令人担忧的问题。我最近一步一步地按照文章进行操作，并且能够添加一项新服务。

*   echo 服务是否出现在 vmc 服务中？
*   您是否在 **./cloudfoundry/.deployments/devbox/config**复制了节点和网关的 yml 文件？
*   您的网关的令牌是唯一的吗？并在两个文件中匹配？**./cloudfoundry/.deployments/devbox/config/cloud_controller.yml**和 **./cloudfoundry/.deployments/devbox/config/**** _gateway.yml**

我建议您首先集中精力将 echo 服务列在 vmc 服务输出中。完成此操作后，您应该复制这些步骤（绝对注意修改令牌等内容）以使您的自定义服务正常工作。

干杯，

Ankit

# android - BitmapFactory.decodeStream 问题

> ID：12140104
> 
> 赞同：1
> 
> 时间：2012-08-27T10:18:03.430
> 
> 标签：android, android-animation, bitmapfactory

我正在使用近 150 个图像帧创建一个逐帧动画的应用程序。通过使用 Handler 更改 Image 视图的背景图像来播放动画。在处理程序中，我从文件夹 /mnt/sdcard/Android/data/ApplicationPackage 中检索图像，并通过以下方式将其动态更改为图像视图背景：

```
FileInputStream in;                       
in = new FileInputStream(mFrames.get(imgpos));                              
bitmap  = BitmapFactory.decodeStream(in); 
if (in != null)
{   
    in.close();
} 
```

这会在解码文件输入流时产生一些问题，因为某些图像需要很长时间才能创建位图。每个图像的图像文件大小几乎小于 40 KB，但是对于相同大小的文件，从外部目录解码图像所需的时间不同。我试图对文件大小和加载进行采样，但它直接影响图像清晰度。谁能建议我将图像从外部文件夹加载到位图并且所有图像的持续时间相同的更好方法是什么？

谢谢，蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:22:48.123

我认为您必须在显示它们之前预加载位图......使用位图数组和一个后台任务，在进入您的活动时加载所有图像。您的处理程序绝对不允许执行耗时的任务，例如加载位图！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:42:56.330

您可以在为它们创建位图之前缩小图像。

```
public Bitmap decodeSampledBitmapFromPath(String path) 
{
    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, requiredWidth, requiredHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    Bitmap newBmap = BitmapFactory.decodeFile(path, options);

    return newBmap;
}

public int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) 
{
    int inSampleSize = 1;

    if (imageHeight > reqHeight || imageWidth > reqWidth) 
    {
        if (imageWidth > imageHeight) 
        {
            inSampleSize = Math.round((float)imageHeight / (float)reqHeight);
        } 
        else 
        {
            inSampleSize = Math.round((float)imageWidth / (float)reqWidth);
        }
    }
    return inSampleSize;
} 
```

如果图像比加载它们的视图大很多，那么这种缩小确实有助于更快地创建位图。此外，与直接创建位图相比，缩放`Bitmap`占用的内存要少得多。
`inJustDecodeBounds`在`BitmapFactory.Options`设置`true`为时，您可以在为其创建之前获取高度和宽度`Bitmap`。因此，您可以检查图像是否大于要求。如果是，则将它们缩放到所需的高度和宽度，然后创建其`Bitmap`.

希望这可以帮助！

# javascript - 如何在 IE8 中启用 JavaScript 文件 API

> ID：12140105
> 
> 赞同：6
> 
> 时间：2012-08-27T10:18:03.190
> 
> 标签：javascript, asp.net, browser, internet-explorer-8

我在 asp.net 中开发了一个 Web 应用程序，该项目中有一个页面，用户应该选择图片格式（jpeg、jpg、bmp...）的文件，我想在页面中预览图像但我没有'不想将文件发布到服务器我想在客户端处理它我已经通过文件 API 使用 java 脚本函数完成了它但它只适用于 IE9 但大多数客户使用 IE8 原因是 IE8 不支持文件 API有什么方法可以让IE8升级或后面的代码中的一些补丁我的意思是检查浏览器是否是IE并且不支持文件API调用一个自动将IE8升级到IE9的函数。

我不想让用户在我想以编程方式执行的消息中执行此操作！
即使可以安装文件 API 所需的特殊补丁，因为客户认为这是我的应用程序中的错误并且他们的计算机知识很低，我应该怎么做？
我也使用 Async File Upload Ajax Control 但它使用 ajax 解决方案和 HTTP 处理程序以任何方式将文件发布到服务器，但 java 脚本在客户端浏览器中完成所有操作！！！

以下脚本检查浏览器是否支持 API

```
<script>
if (window.File && window.FileReader && window.FileList && window.Blob) 
  document.write("<b>File API supported.</b>");
else
  document.write('<i>File API not supported by this browser.</i>');
</script> 
```

以下脚本执行读取和加载图像

```
function readfile(e1)
{
  var filename = e1.target.files[0]; 
  var fr = new FileReader();
   fr.onload = readerHandler;  
  fr.readAsText(filename); 
} 
```

HTML 代码：

```
<input type="file" id="getimage">

<fieldset><legend>Your image here</legend>
    <div  id="imgstore"></div>
</fieldset> 
```

JavaScript 代码：

```
<script>
function imageHandler(e2) 
{ 
  var store = document.getElementById('imgstore');
  store.innerHTML='<img src="' + e2.target.result +'">';
}

function loadimage(e1)
{
  var filename = e1.target.files[0]; 
  var fr = new FileReader();
  fr.onload = imageHandler;  
  fr.readAsDataURL(filename); 
}

window.onload=function()
{
  var x = document.getElementById("filebrowsed");
  x.addEventListener('change', readfile, false);
  var y = document.getElementById("getimage");
  y.addEventListener('change', loadimage, false);
}
</script> 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T10:33:55.420

您不能*安装*任何特殊的东西来在 IE8 中添加对文件 API 的支持。您可以做的是使用**polyfill**来在本身不支持它的浏览器中实现此功能。看看这个[HTML5 Cross Browser Polyfills列表（你应该在](https://github.com/Modernizr/Modernizr/wiki/HTML5-Cross-Browser-Polyfills)*File API / Drag and Drop*部分找到适合你的东西）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:41:15.077

经过一些研究，我发现没有办法在 IE8 中启用文件 API，但是，我有一些东西想与你分享......
不是直接的，IE8 不支持 HTML 5。有 Canvas 插件，还有 Google Chrome Frame，这是一个将 HTML 5 添加到 9 之前的 IE 的插件。
据我了解，Google Chrome Frame 是使用 HTML5 的完美方式。
它将 IE 速度提高了 10 倍，而且它的使用非常简单，我为大家描述一下...
Google Chrome Frame

一个添加到微软浏览器的 Internet Explorer 插件、完整的 HTML 5 支持和 Chrome 的 JavaScript 编译器！稳定版本于 2010 年 9 月 22 日发布，许多网站在其页面中添加了代码。

此插件适用于 Internet Explorer 6、7 和更高版本。谷歌希望打破阻碍 Web 发展的障碍：最常见的浏览器及其与新标准的不兼容性。

当它被识别后，Internet Explorer 将在 Chrome 和 Safari 的渲染引擎 WebKit 下运行，如果 IE 解释器将使用超快的 JavaScript 编译器代替。

这个插件的优点是对 Web 应用程序的兼容性非常好，并且在 Webkit 中集成的 WebGL 将变得更加有用，它让我们在浏览器上拥有 3D 应用程序：一个非常不同的 Web！自 3.7 版起，Firefox 也支持 WebGL。

自2011年5月起，该插件无需管理员权限即可安装，因此旧版IE已合并到服务器，无法更新。

网页代码中的标签将显示一条消息，提示用户下载插件。安装后，IE 将作为 Chrome 运行并支持 HTML 5。

框架的特点

离线模式。和标签。微软还计划在 IE 中实现它们。帆布。WebGL。CSS 3\. JavaScript 编译器。酸 3 级的兼容性。见视频。

微软的反应

我们原以为 Microsoft 并没有真正欣赏这种促进 HTML 5 以损害他们自己的解决方案 Silverlight 的举措。该公司强调了一个安全问题：

考虑到插件普遍存在的安全问题，尤其是 Google Chrome，作为插件运行的 Google Chrome Frame 使恶意软件和恶意脚本的攻击区域增加了一倍。

**

> 镀铬框架。自动安装。-> [http://www.google.com/chromeframe/?quickenable=true](http://www.google.com/chromeframe/?quickenable=true)
> Google Chrome 框架代码。-> [https://developers.google.com/chrome/chrome-frame/](https://developers.google.com/chrome/chrome-frame/)
> Chrome 框架：开发者指南。-> [http://www.chromium.org/developers/how-tos/chrome-frame-getting-started](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started)

**

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-03-20T12:22:02.777

这在 IE10 之前对我有用，我对其他所有浏览器都使用[https://github.com/eligrey/FileSaver.js](https://github.com/eligrey/FileSaver.js)，请注意，虽然这并不完美，因为它是 IE，你知道我的意思

希望这可以帮助

```
/**
 * saves File, pops up a built in javascript file as a download
 * @param {String} filename, eg doc.csv
 * @param {String} filecontent eg "this","is","csv"
 * @param {String} mimetype eg "text/plain"
 */
function saveAs (filename, filecontent, mimetype) {
    var w = window.open();
    var doc = w.document;
    doc.open( mimetype,'replace');
    doc.charset = "utf-8";
    doc.write(filecontent);
    doc.close();
    doc.execCommand("SaveAs", null, filename);
} 
```

# windows - SmartScreen 使用哪些字段？

> ID：12140114
> 
> 赞同：2
> 
> 时间：2012-08-27T10:18:53.037
> 
> 标签：windows, code-signing, smartscreen

有谁知道 SmartScreen 用于索引应用程序“声誉”的所有字段？它只是公钥吗？通用名称，还是...？

就声誉连续性而言，我最感兴趣的是——我是否应该找到一个 CA 让我在续订时重用相同的公钥等。

谢谢

詹姆士

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-14T19:11:08.820

[这篇 MSDN 博客文章](https://blogs.msdn.microsoft.com/ieinternals/2011/03/22/everything-you-need-to-know-about-authenticode-code-signing/)没有直接回答这个问题，但暗示不存在声誉连续性之类的东西：

> “当您的旧证书过期并且您开始使用新的替换证书签署您的代码时，就会发生证书翻转；您的所有声誉都是针对旧证书累积的，因此您的新证书可能需要一段时间才能获得良好的声誉。 "

也许他们正在使用证书指纹本身？如果他们使用公钥来识别发布者，这将不是问题。

# css - 如何使边框跟随图像上的圆角

> ID：12140117
> 
> 赞同：0
> 
> 时间：2012-08-27T10:19:02.430
> 
> 标签：css, border, rounded-corners

我想要一个带边框的圆形图像，所以我使用了这个：

```
img {
    border: solid 10px #141313;
    border-radius: 50%;
} 
```

但边框出现为边框的原始形状，正方形。是否也可以让边框变圆

我想使用`img`标签，而不是`background-image`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:29:37.717

看：IE9+、Firefox 4+、Chrome、Safari 5+和Opera只支持border-radius属性。

```
img {
    -moz-border-radius: 35px; // Mozilla
    -webkit-border-radius: 35px; // Chrome and Safari
    -o-border-radius: 35px; // Opera
    border-radius: 35px; // CSS 3
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:23:19.430

你读过这篇文章吗？

[http://answers.oreilly.com/topic/1002-how-to-set-a-rounded-border-around-an-image-using-css/](http://answers.oreilly.com/topic/1002-how-to-set-a-rounded-border-around-an-image-using-css/)

似乎您至少缺少一些跨浏览器一致性的属性；-)

# opengl - 如何计算三角带中的NORMAL

> ID：12140122
> 
> 赞同：1
> 
> 时间：2012-08-27T10:19:27.950
> 
> 标签：opengl, light, normalize, normals, gl-triangle-strip

我的 OPENGL 项目的照明有问题。我使用 ECLIPSE 在 c++ 上编程。我有一个由三角形带构成的地形。我的渲染代码如下：

```
HeightMap::~HeightMap(void) {
}

float HeightMap::getScaledGrayColor(double height) {
float fColor = NULL;
if (height == this->NODATA_value) {
    return 0.0f;
}
fColor = ((255.00f / max) * height) / 255.00f;

return fColor;
}
double* HeightMap::getHeights(int rowNumber) {
rowNumber = rowNumber + 6;

ifstream fin(this->filename);
string s;
long length;

fin.seekg(0, ios::beg); // go to the first line

for (int i = 0; i < rowNumber; i++) { // loop 'till the desired line
    getline(fin, s);
}

string nextToken;
getline(fin, nextToken);
StringUtils stringUtils;
vector<string> tempVec = stringUtils.split(nextToken, " ");
double* heights = new double[this->ncols];
for (int i = 0; i < tempVec.size() - 1; i++) {
    heights[i] = strtod(tempVec[i].c_str(), NULL);
}
return heights;
}

void HeightMap::Render(void)
{
int x = 0;
int i = 0;
for (int i = 0, j = 0; j < nrows; i--, j++) {
    //cout<<"valore di i è: "<<i<<endl;
    //cout<<"valore di j è: "<<j<<endl;
    double * rowHeights = this->getHeights(j);//
    for (int x = 0; x < ncols; x++) {

        float color = getScaledGrayColor(rowHeights[x]);
        double * Quote = this->getHeights(x);
        glBegin(GL_TRIANGLE_STRIP);
        glColor3f(color, color, color);

        //triangolo ABC
        //glNormal3f((x * cellsize), (i * cellsize), 0);
        glVertex3f((x * cellsize), (i * cellsize), 0); //vertice base
        //glNormal3f((x * cellsize), ((i * cellsize) + cellsize), 0);
        glVertex3f((x * cellsize), ((i * cellsize) + cellsize), 
0);//vertice base
        //glNormal3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+ 
(cellsize / 2)), *Quote);//vertice altezza
        glVertex3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)
                + (cellsize / 2)), *Quote);//vertice altezza

        //triangolo DEF
        //glNormal3f((x * cellsize), (i * cellsize) + cellsize, 0);
        glVertex3f((x * cellsize), (i * cellsize) + cellsize, 0); 
//vertice base
        //glNormal3f((x * cellsize) + cellsize, (i * cellsize) + cellsize, 
0);//vertice base
        glVertex3f((x * cellsize) + cellsize, (i * cellsize) + cellsize, 
0);//vertice base
        //glNormal3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+ 
(cellsize / 2)), *Quote);//vertice altezza
        glVertex3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)
                            + (cellsize / 2)), 
*Quote);//vertice altezza

        //triangolo GHI
        //glNormal3f((x * cellsize) + cellsize, (i * cellsize) + cellsize, 
0); //vertice base
        glVertex3f((x * cellsize) + cellsize, (i * cellsize) + cellsize, 
0); //vertice base
        //glNormal3f((x * cellsize) + cellsize, i * cellsize, 0);//vertice 
base
        glVertex3f((x * cellsize) + cellsize, i * cellsize, 0);//vertice 
base
        //glNormal3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+ 
(cellsize / 2)), *Quote);//vertice altezza
        glVertex3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)
                            + (cellsize / 2)), 
*Quote);//vertice altezza

        //triangolo LMN
        //glNormal3f((x * cellsize), (i * cellsize), 0); //vertice base
        glVertex3f((x * cellsize), (i * cellsize), 0); //vertice base
        //glNormal3f((x * cellsize) + cellsize, (i * cellsize), 
0);//vertice base
        glVertex3f((x * cellsize) + cellsize, (i * cellsize), 0);//vertice 
base
        //glNormal3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+ 
(cellsize / 2)), *Quote);//vertice altezza
        glVertex3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)
                            + (cellsize / 2)), 
*Quote);//vertice altezza
        glEnd();
        }
    //}
}

} 
```

我尝试对顶点使用法线，但我不知道如何计算 glnormal 函数的参数。然后我必须使用正常的脸。你能帮我解决这个问题吗？

* * *

是的，我需要按面法线，之后我必须按顶点法线：对于按面法线，我这样做 void HeightMap::Render(void) { int x = 0; 诠释 i = 0; glPushMatrix(); glRotatef(angle, xrot, yrot, zrot);//旋转对象 cout<<"valore di nrows è: "<getHeights(j); 浮动向量ba[3]={0.0,0.0,0.0}; 浮动向量cb[3]={0.0,0.0,0.0}; 浮动 xnormal = 0.0; 浮动正常 = 0.0; 浮动 znormal = 0.0; 浮动长度=0.0；

```
 for (int x = 0; x < ncols; x++) {
        //if (rowHeights[x] != this->NODATA_value) {
        float color = getScaledGrayColor(rowHeights[x]);
        double * Quote = this->getHeights(x);
        glBegin(GL_TRIANGLE_STRIP);
        glColor3f(color, color, color);
        //triangolo ABC

        //inizio normal
        vectorba[0]={(x * cellsize)-(x * cellsize)};
        vectorba[1]={((i * cellsize) + cellsize)-(i * cellsize)};
        vectorcb[0]={((x * cellsize) + (cellsize / 2))-(x * cellsize)};
        vectorcb[1]={((i * cellsize) + (cellsize / 2))-((i * cellsize)     +cellsize)};
        vectorcb[2]=*Quote;
        // calculate the cross product and place the resulting vector
        // into the variable xnormal,ynormal e znormal
        xnormal = (vectorba[1] * vectorcb[2]) - (vectorba[2] *     vectorcb[1]);
        ynormal = (vectorba[2] * vectorcb[0]) - (vectorba[0] * vectorcb[2]);
        znormal = (vectorba[0] * vectorcb[1]) - (vectorba[1] * vectorcb[0]);
        //fine normal

        //inizio normalize
        // calculate the length of the vector
            len = (float)(sqrt((xnormal * xnormal) + (ynormal * ynormal) + (znormal * znormal)));

            // avoid division by 0
            if (len == 0.0f)
                len = 1.0f;

            // reduce to unit size
            xnormal /= len;
            ynormal /= len;
            znormal /= len;
            //fine normalize

        //glNormal3f((x * cellsize), (i * cellsize), 0); //normal per vertex. controllare la formula
        glVertex3f((x * cellsize), (i * cellsize), 0); //vertice base A
        //glNormal3f((x * cellsize), ((i * cellsize) + cellsize), 0);
        glVertex3f((x * cellsize), ((i * cellsize) + cellsize), 0);//vertice base B

        glNormal3f(xnormal, ynormal, znormal); //normal per face

        //glNormal3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+ (cellsize / 2)), *Quote);//vertice altezza
        glVertex3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)
                + (cellsize / 2)), *Quote);//vertice altezza C

        //triangolo DEF

        //inizio normal
        vectorba[0]={(x * cellsize) + cellsize-(x * cellsize)};
        vectorba[1]={((i * cellsize) + cellsize)-((i * cellsize) + cellsize)};
        vectorcb[0]={((x * cellsize) + (cellsize / 2))-(x * cellsize) + cellsize};
        vectorcb[1]={((i * cellsize)+ (cellsize / 2))-((i * cellsize) + cellsize)};
        vectorcb[2]=*Quote;
        // calculate the cross product and place the resulting vector
        // into the variable xnormal,ynormal e znormal
        xnormal = (vectorba[1] * vectorcb[2]) - (vectorba[2] * vectorcb[1]);
        ynormal = (vectorba[2] * vectorcb[0]) - (vectorba[0] * vectorcb[2]);
        znormal = (vectorba[0] * vectorcb[1]) - (vectorba[1] * vectorcb[0]);
        //fine normal

        //inizio normalize
        // calculate the length of the vector
        len = (float)(sqrt((xnormal * xnormal) + (ynormal * ynormal) + (znormal * znormal)));

        // avoid division by 0
        if (len == 0.0f)
             len = 1.0f;

        // reduce to unit size
        xnormal /= len;
        ynormal /= len;
        znormal /= len;
        //fine normalize

        //glNormal3f((x * cellsize), (i * cellsize) + cellsize, 0);
        glVertex3f((x * cellsize), (i * cellsize) + cellsize, 0); //vertice base D
        //glNormal3f((x * cellsize) + cellsize, (i * cellsize) + cellsize, 0);//vertice base
        glVertex3f((x * cellsize) + cellsize, (i * cellsize) + cellsize, 0);//vertice base E

        glNormal3f(xnormal, ynormal, znormal); //normal per face

        //glNormal3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+ (cellsize / 2)), *Quote);//vertice altezza
        glVertex3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+ (cellsize / 2)), *Quote);//vertice altezza F

        //triangolo GHI

        //inizio normal
        vectorba[0]={(x * cellsize) + cellsize-(x * cellsize) + cellsize};
        vectorba[1]={i * cellsize-(i * cellsize) + cellsize};
        vectorcb[0]={((x * cellsize) + (cellsize / 2))-(x * cellsize) + cellsize};
        vectorcb[1]={((i * cellsize)+ (cellsize / 2))-(i * cellsize)};
        vectorcb[2]=*Quote;
        // calculate the cross product and place the resulting vector
        // into the variable xnormal,ynormal e znormal
        xnormal = (vectorba[1] * vectorcb[2]) - (vectorba[2] * vectorcb[1]);
        ynormal = (vectorba[2] * vectorcb[0]) - (vectorba[0] * vectorcb[2]);
        znormal = (vectorba[0] * vectorcb[1]) - (vectorba[1] * vectorcb[0]);
        //fine normal

        //inizio normalize
        // calculate the length of the vector
        len = (float)(sqrt((xnormal * xnormal) + (ynormal * ynormal) + (znormal * znormal)));
        // avoid division by 0
        if (len == 0.0f)
             len = 1.0f;

        // reduce to unit size
        xnormal /= len;
        ynormal /= len;
        znormal /= len;
        //fine normalize

        //glNormal3f((x * cellsize) + cellsize, (i * cellsize) + cellsize, 0); //vertice base
        glVertex3f((x * cellsize) + cellsize, (i * cellsize) + cellsize, 0); //vertice base G
        //glNormal3f((x * cellsize) + cellsize, i * cellsize, 0);//vertice base
        glVertex3f((x * cellsize) + cellsize, i * cellsize, 0);//vertice base H

        glNormal3f(xnormal, ynormal, znormal); //normal per face

        //glNormal3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+ (cellsize / 2)), *Quote);//vertice altezza
        glVertex3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+ (cellsize / 2)), *Quote);//vertice altezza I

        //triangolo LMN

        //inizio normal
        vectorba[0]={(x * cellsize) + cellsize-(x * cellsize)};
        vectorba[1]={(i * cellsize)-(i * cellsize)};
        vectorcb[0]={((x * cellsize) + (cellsize / 2))-(x * cellsize) + cellsize};
        vectorcb[1]={((i * cellsize)+ (cellsize / 2))-(i * cellsize)};
        vectorcb[2]=*Quote;
        // calculate the cross product and place the resulting vector
        // into the variable xnormal,ynormal e znormal
        xnormal = (vectorba[1] * vectorcb[2]) - (vectorba[2] * vectorcb[1]);
        ynormal = (vectorba[2] * vectorcb[0]) - (vectorba[0] * vectorcb[2]);
        znormal = (vectorba[0] * vectorcb[1]) - (vectorba[1] * vectorcb[0]);
        //fine normal

        //inizio normalize
        // calculate the length of the vector
        len = (float)(sqrt((xnormal * xnormal) + (ynormal * ynormal) + (znormal * znormal)));
        // avoid division by 0
        if (len == 0.0f)
             len = 1.0f;
        // reduce to unit size
        xnormal /= len;
        ynormal /= len;
        znormal /= len;
        //fine normalize

        //glNormal3f((x * cellsize), (i * cellsize), 0); //vertice base
        glVertex3f((x * cellsize), (i * cellsize), 0); //vertice base L
        //glNormal3f((x * cellsize) + cellsize, (i * cellsize), 0);//vertice base
        glVertex3f((x * cellsize) + cellsize, (i * cellsize), 0);//vertice base M

        glNormal3f(xnormal, ynormal, znormal); //normal per face

        //glNormal3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+ (cellsize / 2)), *Quote);//vertice altezza
        glVertex3f(((x * cellsize) + (cellsize / 2)), ((i * cellsize)+     (cellsize / 2)), *Quote);//vertice altezza N
        glEnd();
        }
    //}
}
glPopMatrix();
} 
```

配方对吗？如何使用 normal 和 normalize 函数转换渲染？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T15:09:44.510

如果我明白了，你要正常的靠脸吗？

如果你有三角形点，你可以计算每个面的法线。

看看这个：

[http://www.opengl.org/wiki/Calculating_a_Surface_Normal](http://www.opengl.org/wiki/Calculating_a_Surface_Normal)

顶点法线可以通过面之间的平均法线来计算。

# java - 为什么 VisualVM 中的 CPU 时间不加起来？

> ID：12140126
> 
> 赞同：3
> 
> 时间：2012-08-27T10:19:59.337
> 
> 标签：java, profiling, visualvm

我正在 VisualVM 中进行 CPU 分析并查看调用树中的结果。

我有一些方法，总时间 X 花费在方法本身（自时间）和从方法调用的子例程中。

当我将子程序花费的时间加上 Self 时间时，为什么结果不等于方法花费的总时间？请注意，我不是在谈论毫秒，而是在余额中缺少 50% 或几分钟。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:14:37.137

除了在调用树非常浅的小程序中，使用“自学时间”来学习任何有意义的东西是非常困难的。

CPU-only time 在任何类型的复杂程序中也不是很有用，它们很容易将大部分时间花在隐藏的 I/O 上。

最好看看

*   包括时间，而不是自我时间
*   挂钟，不是cpu时间
*   作为百分比，而不是绝对秒数或毫秒数

获得行级分辨率会更好，而不仅仅是函数或方法。

[*下面是*](https://stackoverflow.com/a/378024/23771)我用来找出为什么要花费时间以及如何改进它[*的方法，下面是一个使用它的示例*](https://stackoverflow.com/a/927773/23771)。 [*这是对这些问题的更广泛*](https://stackoverflow.com/a/1779343/23771)讨论。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-30T18:03:57.537

您需要总时间和固有（自身）时间...您还应该避免调用树，而是从命名空间层次结构的角度（包、类、方法，甚至动​​态标签和标记）查看时钟时序

这是一系列文章，详细介绍了彻底的性能调查是什么样子，尤其是在处理超过 +2000 的巨大堆栈深度和在很短的时间内进行十亿次方法调用时：

[http://www.jinspired.com/solutions/case-studies/scala-compiler](http://www.jinspired.com/solutions/case-studies/scala-compiler)

请注意，每种方法都旨在验证所使用的其他方法的结果……更重要的是，没有单一的正确性能模型……有许多正确的性能模型取决于所询问的内容和可以更改的内容……我所知道的唯一糟糕的性能模型是在这种情况下基于样本的模型，尽管当您无事可做并且匆忙时，任何一点信息都会有所帮助

# c# - 如何在不使用 INotifyPropertyChanged 的 情况下更新视图和视图模型

> ID：12140127
> 
> 赞同：2
> 
> 时间：2012-08-27T10:20:04.350
> 
> 标签：c#, wpf, mvvm

当我们在 View 和 View-Model 之间进行双向绑定时，我们实现了 INotifyPropertyChanged 接口，该接口具有以下事件：

```
// Summary:
//     Occurs when a property value changes.
event PropertyChangedEventHandler PropertyChanged; 
```

但是我可以在不实现 INotifyPropertyChanged 的​​情况下做同样的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T16:00:26.083

If you can't implement `INotifyPropertyChanged` (INPC) (or don't have the source to what you want to bind to) then you should wrap whatever it is you want to bind to in your View Model and the View Model would implement INPC for the binding and have to to get/set data to, presumably, that other class.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T15:46:42.427

你当然可以。当视图模型更改时，您只需放松更新视图的简单方法。现在有办法克服这一点。

1.  重新应用`DataContext`，这样所有绑定都会再次被评估，但这非常昂贵。
2.  在 ui 中，获取所需属性的绑定并调用 [UpdateTarget](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingexpression.updatetarget.aspx)。

但显然这些都是非常奇怪的解决方法。还值得一提的是，绑定到未实现 INotifyPropertyChanged 的​​对象通常较慢。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:26:37.270

如果您想避免`INotifyPropertyChanged`显式实现，可以使用 PostSharp 之类的代码编织工具。然后，实现`INotifyPropertyChanged`变得如此简单

```
[NotifyPropertyChanged]
public class Shape
{
    public double X { get; set; }
    public double Y { get; set; }
} 
```

您可以在此处找到更多详细信息：http: [//www.sharpcrafters.com/solutions/notifypropertychanged#](http://www.sharpcrafters.com/solutions/notifypropertychanged#)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T13:28:53.057

我会说不。您必须以任何方式实现 INotifyPropertyChanged，否则与 twoway 绑定将不起作用。

# php - 用逗号分解 CSV 数据的正则表达式

> ID：12140130
> 
> 赞同：1
> 
> 时间：2012-08-27T10:20:07.563
> 
> 标签：php, regex, fgetcsv

我的CSV 文件中有以下**行**

```
,1,193,23 Video,,"Slotsgade 2, 2.th",,,,,,Copenhagen N,,DK-2200,Denmark,,,,,,,,
,,,Europe,+45 31450980,,info@23company.com,www.23video.com,,,,,,,,Cabsat Online
 Video Industry Sourcebook 12,Mr.,Kristoffer,,Schou,,M,,,,,,,,,,,,,,,,,,,,,,,,,
,,,schou@23company.com,,,,,,, 
```

如你看到的

```
"Slotsgade 2, 2.th" 
```

中间有一个逗号，现在我用`preg_split`它来分解列中的行。

谁能建议我一个在双引号之间跳过逗号的正则表达式

我已经尝试过了：

```
/,|".*(?=")/ 
```

`preg_split`我可以用来正确获取数据的正则表达式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:22:05.297

使用[fgetcsv](http://php.net/manual/en/function.fgetcsv.php)函数，它会为您处理。

而且你还有[str_getcsv](http://www.php.net/manual/en/function.str-getcsv.php)，它将一个 CSV 字符串解析成一个数组。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:36:09.967

来自[**RegexBuddy**](http://www.regexbuddy.com/)的图书馆：

> ### CSV：任何字段
> 
> 匹配 CSV 文件中的任何单个字段。使用此正则表达式遍历所有字段。
> 
> ```
> "[^"\r\n]*"|[^,\r\n]* 
> ```
> 
> ### CSV：任何带有额外空格的字段
> 
> 匹配 CSV 文件中的任何单个字段。使用此正则表达式遍历所有字段。在正则表达式匹配中的双引号字段之前和之后包括额外的空格。
> 
> ```
> [ \t]*+"[^"\r\n]*+"[ \t]*+|[^,\r\n]*+ 
> ```
> 
> ### CSV：完整行，所有字段
> 
> 匹配每行有 3 个字段的逗号分隔文件中的完整行，将每个字段捕获到反向引用中。要将 CSV 行与更多或更少的字段匹配，只需复制或删除捕获组。
> 
> ```
> ^("[^"\r\n]*"|[^,\r\n]*),("[^"\r\n]*"|[^,\r\n]*),("[^"\r\n]*"|[^,\r\n]*)$ 
> ```

# android - 用于从外部 USB 设备读取数据的 Android 应用程序

> ID：12140131
> 
> 赞同：2
> 
> 时间：2012-08-27T10:20:13.550
> 
> 标签：android, usb, communication

好的，我知道有很多关于这个话题的话题。但大多数人都像 2 岁。由于这一点以及谷歌方面的新发展，如 ADK 和其他东西，我再次开始这个问题。

我想知道的是，现在是否可以与 USB 设备建立 USB 连接。喜欢打开一个流来接收来自传感器的数据。考虑一个可以作为 USB 主机并永久发送数据的设备。我想做的就是获取这些数据。

我使用的是 Android 2.3.6 的智能手机。

这个版本现在有 API 吗？或者我必须采取一种方法，包括修改 linux 内核或使用 arduino 或类似接口？因为我想避免这种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:10:14.873

大多数 USB 的东西开始使用 3.0 > 但我相信它的背面移植到 2.3（不确定）但基本上是的，现在是可能的。如果您可以让您的设备成为 USB 主机设备，那么您应该没有问题，我使用 acer iconia a500，运行 ics，我有一个连接到 ftdi 芯片的 picaxe，为我提供传感器数据，一旦您对基础知识进行了排序很简单，如果你浏览我的问题并找到与 USB 相关的问题，你应该会得到很多信息，如果你想问问题，我会链接你吗？

简而言之，使用较新版本的 Android 完全有可能，但是向后移植该功能可能会花费您与购买新平板电脑或手机相同的时间。

这是我在这里用 USB 讨论过的所有内容......我认为这些东西应该可以为你节省几个小时[https://stackoverflow.com/search?q=user:1174869+[usb]](https://stackoverflow.com/search?q=user:1174869%20%5Busb%5D)

# android - 如何通过蓝牙 LE 以编程方式将 iPhone 4s 连接到任何其他智能手机？

> ID：12140133
> 
> 赞同：0
> 
> 时间：2012-08-27T10:20:23.603
> 
> 标签：android, ios

我正在使用示例代码通过蓝牙 LE 将 iPhone 4S 连接到 Android 设备。但 iPhone 无法发现它。可能的原因是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-21T05:27:10.260

Android 4.3 尚不支持广告，您必须将其设为中心设备，将 iOS 设为外围设备。

# actionscript-3 - 如果我们可以通过使用“outerdocument”对象从渲染项目访问外部函数，那么我们不能从外部访问内部函数。？

> ID：12140137
> 
> 赞同：0
> 
> 时间：2012-08-27T10:20:36.653
> 
> 标签：actionscript-3, apache-flex, flex3, flex4.5, flexbuilder

这些是同一应用程序下的脚本，第一个在应用程序下，第二个在 dataGrid 下。从第一个脚本到 outerClick() 我正在访问 itemrenderer 中的 inner() 函数。好吧，我可以通过 outerDocument 对象轻松地从 innerClick() 访问函数 outer()，但是 what_to_use 可以从 outerClick() 函数访问 itemrenderer 中的 inner() 函数。我尝试使用 mx:component id"" 和 class="" 但它无法识别 itemrenderer 下的函数。

```
 <mx:Script>
    <![CDATA[

        public function outer():void{
            Alert.show("Hi i am outer object");
            }
        public function outerClick():void{
            what_to_use.inner();
        }
    ]]>
</mx:Script> 
```

下面的项目在数据网格下呈现。

```
<s:itemRenderer>
        <mx:Component>
            <s:GridItemRenderer>
                <fx:Script>
                    <![CDATA[
                            public function innerClick():void{
                                outerDocument.outer();
                            }
                            public function inner():void{
                                Alert.show("Hi i am inner");
                            }
                    ]]>
                </fx:Script>
                    <s:CheckBox id="sel" selected="{data.checked=sel.selected}" change="{data.checked}" click="innerClick()"/>                                  
            </s:GridItemRenderer>
        </mx:Component>
    </s:itemRenderer> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:56:48.997

> 如果我们可以通过使用“outerdocument”对象从渲染项目访问外部函数，那么我们不能从外部访问内部函数。？

您似乎对什么是 itemRenderers 有明显的误解。itemRenderer 是一个组件定义，有点像创建自己的类。由于您使用的是“outerDocument”引用，因此您正在创建自己的内联/嵌入在另一个类中的类。

为基于 List 的类中的每个可见项目创建自定义 itemRenderer 类的实例；所以你自己的类被创建了多次，这意味着你的 itemRenderer 函数有多个实例。Flex 如何知道您要在哪些 itemRenderer 实例上调用该函数？事实上它不能。

这就是为什么你可以打电话，但你不能打电话。

如果您需要在 itemRenderer 内部进行更改，您应该通过更改 dataProvider 的数据元素来实现。

出于所有意图和目的，我也建议不要使用 outerDocument。这是封装的一个突破。组件永远不应该尝试访问其父级；因为这通常会给您的组件带来不必要的依赖，从而限制重用。“向上沟通”的正确方法是从 itemRenderer 分派一个事件并在父类中侦听它。

[在回答您之前的一个问题](https://stackoverflow.com/questions/10910030/how-to-access-function-from-one-script-to-another-script-in-same-mxml)时简要介绍了这个概念。

# magento - 产品视图页面中未显示用户消息

> ID：12140142
> 
> 赞同：0
> 
> 时间：2012-08-27T10:20:54.797
> 
> 标签：magento

在其中一家 Magento 商店中，我不得不限制客户一次性添加更多产品。我检查了购物车并将错误传递给客户。但是 Magento 没有在产品视图页面中显示任何消息。

```
Mage::getSingleton('core/session')->addNotice('You have already added this product in your cart'); 
```

检查上面的代码，我把它放在控制器文件中。我认为这是正确的。让我知道我错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:26:53.693

我稍后会添加一个解释，试试这个：

`Mage::getSingleton('catalog/session')->addNotice('You have already added this product in your cart');`

# wcf - Windows 7 中的 kerberos 身份验证

> ID：12140143
> 
> 赞同：4
> 
> 时间：2012-08-27T10:20:58.803
> 
> 标签：wcf, windows-7

我必须在 WCF 中实现基于 Kerberos 的 Windows 身份验证。我正在使用 Windows 7 专业版。我搜索了很多，但没有得到任何关于这个主题的相关文章。

如何在 Windows 7 Professional 上的 WCF 中实现基于 Kerberos 的 Windows 身份验证？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T12:42:35.750

我在 Windows 端用 C# .NET 编写的一个项目中完成了此操作（也适用于 Windows 7），以使用 Kerberos 身份验证连接到 UNIX 服务器以执行所需任务。您最好的选择是使用支持 Kerberos 身份验证的[Plink/Putty SSL 客户端。](http://www.chiark.greenend.org.uk/~sgtatham/putty/)您将需要设置您的服务器基础架构以生成密钥领域（Ticket Granting Server）并被 AS Authentication Server 等识别。

# oracle - sfWidgetFormInputCheckbox 不能正常工作

> ID：12140144
> 
> 赞同：0
> 
> 时间：2012-08-27T10:21:01.107
> 
> 标签：oracle, symfony1, widget

我对 sfWidgetFormInputCheckbox 有疑问。未选中复选框时，它不会在数据库中保存 false。

在我的计划中，我的字段是一个布尔值，并且我在显示的值中没有错误。

像这样设置默认值：`$this->setDefault('status', false);`也不行。

我的小部件：

```
$this->widgetSchema['SUSPENSION_TEMP'] = new sfWidgetFormInputCheckbox();
$this->validatorSchema['SUSPENSION_TEMP'] = new sfValidatorBoolean(array('required' => false)); 
```

默认：

```
$this->setDefault('SUSPENSION_TEMP', false); 
```

有任何想法吗 ？

**编辑：**

选中复选框时保存 1。并且在取消选中并保存时不要更改数据库值。因此，一旦您检查过一次，数据库中的值始终为 1（我的代码为 true）。

**编辑2：**

我有两个线索要补充。如果该字段是 schema.xml 中的整数，则两个值都有效，但是我们在显示的值上遇到了问题（复选框选中了 qih 值）。在这里，he 字段是一个布尔值。

setter 接收两种值，复选框被选中时为“on”，未选中时为 true。我试图在表单中将默认值设置为 false，并覆盖他的设置器。两者都不起作用。

我的意思是 setter 的工作，但是由于未知的原因，基本的 seer 会在错误的值之后被调用。

**编辑3：**

好的，我理解部分问题。未选中复选框时，不会调用 setter。我以为是因为，m 代码显示了一个 var_dump()。这是因为后来我出于存档目的复制了该对象的旧版本。

但是 symfony 应该检测到该字段已经被渲染，但它没有。我不知道为什么。我知道为什么在 html 中，但显然 symfony 应该能够告诉自己“嘿，我在这里添加了一个复选框”。

有没有一种优雅的方式来做到这一点，还是我应该手动检查？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-23T15:00:03.790

问题来自我的表单处理。我的旧代码没有呈现所有字段（例如：某些标记字段，由行为更新）。它正在使用 fromArray，然后保存。这仅更新渲染的字段。

传统的 symfony 形式，为所有未渲染的字段赋予 null 以便 chcuk 进行所需的验证。

所以你需要自己检查并设置为0，当你使用fromArray然后保存。不过，我发现 form->save 真的很愚蠢，因为您需要向您的客户发送无用（在这种情况下）或机密数据才能使用它。

# android - 在 create() 和 show() 调用之间应该做哪些处理？

> ID：12140145
> 
> 赞同：0
> 
> 时间：2012-08-27T10:21:04.327
> 
> 标签：android, dialog, android-widget

在android[文档](http://developer.android.com/reference/android/app/AlertDialog.Builder.html#create%28%29)中据说可以在类的调用`create()`和`show()`方法之间进行一些处理`AlertDialog.Builder`应该进行什么样的处理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:43:23.877

调用 create 后，您将获得一个对象`AlertDialog`。所以你可以使用任何方法`AlertDialog`。
`Builder`没有提供的更精细的控制`AlertDialog`。例如，您可以使用`setCancelMessage(Message msg)`构建器中未提供的，或者您可以设置`setOnShowListener`构建器也未提供的

# javascript - 从 .change() 调用 window.open 时避免弹出阻塞

> ID：12140147
> 
> 赞同：0
> 
> 时间：2012-08-27T10:21:17.327
> 
> 标签：javascript, jquery

我有一个选择菜单，我有以下代码：

```
$('#sister-site-menu').change(function(){
  if ($(this).val()) {
    window.open($(this).val(), '_blank');
  }
}); 
```

然而，这会导致在 Chrome 中调用弹出窗口阻止程序。我确定我以前见过网站这样做，有什么想法吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:32:54.143

您可以安全地删除“空白”部分。尝试这个：

```
$('#sister-site-menu').on('change',function(){
  if ($(this).val()) {
    window.open($(this).val());
  }
}); 
```

如果这不起作用，我认为没有其他方法可以解决这个问题。

# ruby-on-rails - 如何将操作绑定到谷歌日历提醒？

> ID：12140148
> 
> 赞同：2
> 
> 时间：2012-08-27T10:21:26.557
> 
> 标签：ruby-on-rails, api, triggers, google-calendar-api, caldav

我在rails上使用红宝石：

使用 gdata 宝石。

我正在使用 Google 日历为我的 Web 应用程序保存事件。我还想接收已保存事件的通知/提醒，我注意到 Google 日历通知仅限于电子邮件、短信和弹出窗口，我想阅读通知。

我现在唯一的线索是收听从@calendar.google.com 发送的电子邮件并在收到电子邮件时触发操作。

还有其他线索吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-27T07:39:46.213

我知道现在回答您的问题为时已晚。我有类似的要求，我看到以下选项

谷歌日历没有直接选项。

我可以看到两种方法

1）通过谷歌脚本引入定时器脚本来监听下一个事件 15 分钟并调用您的应用程序的 POST 以进一步操作参考 [https://developers.google.com/apps-script/execution_time_triggers](https://developers.google.com/apps-script/execution_time_triggers) [https://developers.google.com/应用程序脚本/参考/日历/日历应用程序#getEvents（日期，日期）](https://developers.google.com/apps-script/reference/calendar/calendar-app#getEvents%28Date,Date%29)

2) 引入 Cron Job Local Server 用于通过 gdata 拉取日历、邮件中的事件

# android - 如何使用数据库显示包含图片和文本的列表视图

> ID：12140149
> 
> 赞同：0
> 
> 时间：2012-08-27T10:21:35.713
> 
> 标签：android, android-layout

我有一个应用程序将显示一个简单的列表视图。列表视图将显示 SQLite 数据库的特定表的内容。

在数据库表中，我有 3 个字段。`ID, Name and Picture`.

一个示例行是：

```
ID : 1
Name : Glass
Picture : @drawable/glass 
```

是否可以使用列表视图或任何其他方式查看此信息。如果有意义的话，我需要 ListView 来显示 ID，然后是图片，然后是 ListView 部分中的名称。

谢谢

//编辑另外，数据库在应用程序的资产文件夹中，这是正确的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:31:22.363

此代码加载带有图像的列表视图，文本视图引用它并编辑以供您使用（来自惰性适配器的示例代码）

```
public class abcdadapter extends BaseAdapter {

private Activity activity;
private String[] data;
private ArrayList<HashMap<String, String>> dat;

private static LayoutInflater inflater=null;
public ImageLoader imageLoader; 

public abcdadapter(Activity a, ArrayList<HashMap<String, String>> save,String[] images) {
    activity = a;

    dat=save;
    data=images;
    inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    imageLoader=new ImageLoader(activity.getApplicationContext());
}

public int getCount() {
    return data.length;
}

public Object getItem(int position) {
    return position;
}

public long getItemId(int position) {
    return position;
}

public static class ViewHolder{
    public TextView text;
    public ImageView image;
}

public View getView(int position, View convertView, ViewGroup parent) {
    return parent;
    View vi=convertView;
    ViewHolder holder;
    if(convertView==null){
        vi = inflater.inflate(R.layout.item, null);
        holder=new ViewHolder();
        holder.text=(TextView)vi.findViewById(R.id.text);
        holder.image=(ImageView)vi.findViewById(R.id.image);
        vi.setTag(holder);
    }
    else
        holder=(ViewHolder)vi.getTag();

    holder.text.setText(dat.get(position).get("NAME"));
 //   holder.image.setTag(data[position]);     // set your image from drawable
  //  imageLoader.DisplayImage(data[position], activity, holder.image);

    return vi;

} 
```

# vb.net - 在两个表上使用过滤器的基本 Linq 连接 - CRM 2011

> ID：12140150
> 
> 赞同：1
> 
> 时间：2012-08-27T10:21:38.730
> 
> 标签：vb.net, linq, dynamics-crm, dynamics-crm-2011

> **可能重复：**
> [LINQ 中的 Where 语句中的错误](https://stackoverflow.com/questions/10820663/error-within-where-statement-in-linq)

我需要获取自某个 DateTime 以来已更改的所有报价的列表（出于导出原因）。

当然，如果报价细节发生变化，即使报价本身没有改变，也应该导出报价。

我会在*T-SQL*中很容易地解决这个问题：

```
Select q.QuoteNumber from quote q inner join quotedetails qd on q.quoteid = qs.quoteid
where ((q.lastmodified > ?1) or (qd.lastmodified > ?1)) and (qd.SomeField = 'OK') 
```

但是，使用 Linq to CRM 2011，我偶然发现了一个限制。

```
var quotelist = from q in xrm.quoteSet
join qd in xrm.quoteDetailSet
on q.QuoteId equals qd.QuoteId.Id
where (q.lastmodified > ?1 | qd.lastmodified > ?1) & qd.Somefield == "OK"

select q.QuoteNumber 
```

它表示 Quote 实体没有 SomeField 属性。

仅供参考，这只是显示问题的示例查询。我无法在现实生活中的查询中切换 Quote 和 QuoteDetail。

将我的*T-SQL*查询（原样）转换为*CRM 2011的**Linq*查询的最简洁方法是什么？

 ** * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:22:46.837

您看过[MSDN 示例](http://msdn.microsoft.com/en-us/library/gg509017.aspx#JoinUsingEntityFields)吗？**当您的前缀引用 QouteDetail （ qd** .Somefield ）时，我很困惑为什么您在 Quote 实体上收到错误“无属性”

唯一看起来可疑的另一件事是你的单身 & 和 | 在 where 子句中。我相信你应该把它们加倍： && 和 ||

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:04:54.717

您是否有机会使用 SomeField 属性创建早期绑定对象，然后有人删除了该字段？*

# terminology - 声明性规范和基于模型的规范之间的区别

> ID：12140151
> 
> 赞同：1
> 
> 时间：2012-08-27T10:21:39.507
> 
> 标签：terminology, specifications, alloy, z-notation

我已经在 wiki 上阅读了这两个概念的定义，但区别仍然不清楚。有人可以举一些例子和一些简单的解释吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T13:43:54.160

声明性规范描述了具有将输出与输入相关联的*约束*的操作或函数。它不是为您提供计算输出的方法，而是为您提供检查输出是否正确的规则。例如，考虑一个函数，它接受一个数组 a 和一个值 e，并返回匹配 e 的数组元素的索引。声明性规范会准确地说：

```
 function index (a, e)
      returns i such that a[i] = e 
```

相比之下，操作规范看起来像代码，例如通过索引循环查找 i。请注意，声明性规范通常是不确定的；在这种情况下，如果 e 匹配 e 的多个元素，则 i 的多个值是有效的（并且规范没有说明要返回哪个值）。这是一个强大的功能。此外，声明性规范通常不是完整的：例如，这里的规范假设存在这样的 i （并且在某些语言中，您会添加一个前提条件以使其明确）。

为了支持声明式规范，语言通常必须提供逻辑运算符（尤其是合取）和量词。

基于模型的语言是一种使用标准数学结构（例如集合和关系）来描述状态的语言。合金和 Z 都是基于模型的。相比之下，代数语言（如 OBJ 和 Larch）使用方程来隐式描述状态。例如，要指定在集合中插入元素的操作，在代数语言中，您可以编写类似

```
 member(insert(s,e),x) = (e = x) or member(s,x) 
```

这表示在将 e 插入 s 后，如果您刚刚插入该元素（e 等于 x）或者如果它之前存在（x 是 s 的成员），则元素 x 将成为集合的成员。相反，在像 Z 或 Alloy 这样的语言中，你会写出类似的东西

```
 insert (s, e)
      s' = s U {e} 
```

具有将集合（s'）的新值与旧值（s）相关联的约束。

有关声明性、基于模型的规范的许多示例，请参阅[http://alloy.mit.edu](http://alloy.mit.edu)上有关 Alloy 的材料，或我的《软件抽象》一书。您还可以通过本书附录中的示例查看基于模型的声明性语言之间的比较，该附录可在本书的网站[http://softwareabstractions.org](http://softwareabstractions.org)上找到。

# oop - matlab getter/setter 方法。为什么他们让我的程序超级慢？

> ID：12140152
> 
> 赞同：3
> 
> 时间：2012-08-27T10:21:42.867
> 
> 标签：oop, matlab, setter, getter

只需在我的程序上添加 getter/setter 方法就会让我的程序超级慢。对此有什么解释吗？

```
function set.x(obj,newx)
    obj.x = newx;
end

function x = get.x(obj)
    x = obj.x;             
end 
```

这就是我在我的句柄类下定义它们的方式。还是我没有正确实施它们？

**编辑**

类定义...

```
classdef sensorlocest < handle

    properties(GetAcess = 'public', SetAccess = 'private')
        sensorId; % sensor id
        X; % true x-coordainate
        Y; % true y-coordinate

        x; % estimate of X
        y; % estimate of Y
    end

    methods
        function sesnors = sensorlocest(x,y)
            if nargin ~= 0
               sesnors(49,1) =  sensorlocest;
               for k = 1:length(sensors)
                   sensors(k).sesnorId = k;
                   sensors(k).X = x.*rand;
                   sensors(k).Y = y.*rand;
               end
        end

        function init(sensors,x,y)
            N = length(sensors);
            for i = 1:N
                sensors(i).x = x.*rand;
                sensors(i).y = y.*rand;
            end
        end

        function set.x(sensors,newx) 
            sensors.x = newx; 
        end 

        function set.y(sensors,newy) 
            sensors.y = newy;              
        end 
    end
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:24:55.157

不，你是对的。他们确实有开销，看看这个线程： [是 MATLAB OOP 慢还是我做错了什么？](https://stackoverflow.com/questions/1693429/is-matlab-oop-slow-or-am-i-doing-something-wrong/1745686#1745686)

# symfony - 为什么 Symfony 会忽略浏览器的区域设置（HTTP-Request Accept-Language Header）？

> ID：12140162
> 
> 赞同：18
> 
> 时间：2012-08-27T10:22:33.960
> 
> 标签：symfony, locale, http-accept-language

我目前正在尝试在 Symfony 2.0 中启用翻译器。Symfony 忽略 Accept-Language Header 变量并使用 default_locale（当未定义回退时）。

我的请求如下所示：

```
Accept-Language de-DE,de;q=0.8,en-us;q=0.5,en;q=0.3 
```

但`$this->getRequest()->getLocale();`让我`en`提出同样的要求。

有人可以告诉我可能出了什么问题吗？

是的，我已尝试清除缓存并删除我的 cookie (omnomnom) :)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-27T10:36:50.460

这是预期的行为。Symfony 默认不使用 Accept Language 标头，而是依赖 symfony 配置进行区域设置。实际上，建议不要对不同语言环境的内容使用相同的 URL，请参阅此文档：

[Symfony 2 本书 - 翻译 - 语言环境和 URL](http://symfony.com/doc/current/book/translation.html#the-locale-and-the-url)

但是，如果您想忽略此建议并使用 Accept 语言标头，则可以在控制器中使用以下代码：

```
$request = $this->getRequest();
$session = $this->get('session');

$session->setLocale($request->getPreferredLanguage(array('de', 'en'))); 
```

# objective-c - 从Objective-C中的其他类访问方法

> ID：12140163
> 
> 赞同：-1
> 
> 时间：2012-08-27T10:22:33.833
> 
> 标签：objective-c, xcode, macos, class, methods

我有`Class1`,`Class2`和`SubclassOfClass2`. 我想调用`SubclassOfClass2`from中的方法`Class1`。我愿意：

```
Class2 *class = [[Class2 alloc] init];
[class someMethod]; 
```

但是，正如我猜测的那样，由于`alloc`，之后所有变量值都将丢失。因为：

在运行时`Class2`正在执行。它设置例如变量`float x = image.size.width`。它返回正确的值。稍后，例如用户按下按钮后，`Class1`正在执行。`someMethod`从`Class1`变量调用后`x`返回`0.00000`。如何使其工作以使变量值不会丢失？

正如我被问到的，这是我的`someMethod`代码：

```
-(void)someMethod {
NSLog(@"%f", x);
} 
```

在运行时，该方法返回`3200.00000`，当它被调用`Class1`时返回`0.00000`。变量`x`声明在`Class2`，方法`someMethod`在`SubclassOfClass2`

* * *

Class1.h

```
@interface Class1

@end 
```

Class1.m

```
#import "Class1.h"
#import "Class2.h"

@implementation Class1
-(IBAction)buttonPressed:(id)sender {
Class2 *class = [[Class2 alloc] init];
[class someMethod];
}
@end 
```

类2.h

```
@interface Class2 {
 float x;
}
@end 
```

Class2.m

```
#import "Class2.h"
#import "SubclassOfClass2.h"

@implementation Class2
- (id)initWithCoder:(NSCoder *)coder {
    x = 3200;
    [self someMethod];
    return self;
}
@end 
```

SubclassOfClass2.h

```
#import "Class2.h"

@interface Class2 (subclass) {
}
-(void)someMethod;
@end 
```

SubclassOfClass2.m

```
#import "SubclassOfClass2.h"
@implementation Class2 (subclass)
 -(void)someMethod {
   NSLog(@"%f", x);
 }
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:24:09.993

它返回 0.00000 因为您正在调用`init`. `initWithCoder:`这是与设置不同的方法`x`。

（其他问题：让您的类作为基类继承自 NSObject 并且不用`class`作变量名......尤其是当它不是类对象时。）

# xcode - 使用 git 子模块在 Xcode 中进行项目会导致冲突

> ID：12140166
> 
> 赞同：1
> 
> 时间：2012-08-27T10:22:54.013
> 
> 标签：xcode, git, xcode4, git-submodules

我有一个正在处理的大项目，它使用 git 子模块来分离我编写的大量代码。问题是由于同一个子模块的两个不同版本，我最终在 Xcode 中遇到了冲突。

例如，假设我有一个存储库项目，它有一个子模块 SubA 和一个子模块 SubB。问题是我的 SubA 也有一个子模块 SubB。如果两个不同的 SubB 在同一个修订版中，这可能不是问题，但如果不是，则会导致冲突。

将所有文件导入 Xcode 时没有问题，因为它们位于两个不同的文件夹中，但我使用

```
#import "FileInSubB.h" 
```

在 SubB 中导入源代码，因此 Xcode 将只编译该文件的一个版本，因为它们具有相同的名称。有一个简单的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T13:56:42.770

首先，如果它们不一样，为什么会有两个子模块 subB ？我的意思是命名的目的是让事物有所不同：你用它们的名字来称呼苹果和梨，如果它们都被称为苹果，你怎么知道该取哪个？

如果子模块 subB 相同，为什么有两个？或者不可能有两个模块共享同一个子模块？（不过我对此表示怀疑，因为这是使用子模块的重点）

其次，在 Xcode 中，您是否有依赖或类似的东西来定位一个路径（即在编译器设置中对 path/to/subB_v1 有依赖）。

# java - Spring 3 & JPA 使用 JTATransactionManager，但事务管理器无法提交

> ID：12140168
> 
> 赞同：1
> 
> 时间：2012-08-27T10:22:59.780
> 
> 标签：java, spring, jakarta-ee, java-ee-6, jta

我正在使用 Spring 并与 hibernate 4 集成作为持久性提供程序，这里我正在尝试对学生实体进行 crud 操作，

我所有的选择操作都工作正常，但添加和更新操作不起作用，

我的persistence.xml，

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence xmlns="http://java.sun.com/xml/ns/persistence"
             xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
             xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd"
             version="2.0">          
       <persistence-unit name="forSpring" transaction-type="JTA">
        <class>com.entity.Student</class>
       </persistence-unit>
</persistence> 
```

我的 Spring-bean.xml，

```
<?xml version="1.0" encoding="UTF-8"?>
<beans  xmlns="http://www.springframework.org/schema/beans" 
xmlns:p="http://www.springframework.org/schema/p"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xmlns:context="http://www.springframework.org/schema/context"       
xmlns:util="http://www.springframework.org/schema/util"     
xmlns:aop="http://www.springframework.org/schema/aop"   
xmlns:jee="http://www.springframework.org/schema/jee"
xmlns:tx="http://www.springframework.org/schema/tx"
xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
http://www.springframework.org/schema/context 
http://www.springframework.org/schema/context/spring-context-3.0.xsd
http://www.springframework.org/schema/util 
http://www.springframework.org/schema/util/spring-util-3.0.xsd
http://www.springframework.org/schema/aop 
http://www.springframework.org/schema/aop/spring-aop-3.0.xsd
http://www.springframework.org/schema/jee 
http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
http://www.springframework.org/schema/tx 
http://www.springframework.org/schema/tx/spring-tx-3.0.xsd">

<context:annotation-config />               
<context:component-scan base-package="com.*" />

<jee:jndi-lookup id="datasourceId" jndi-name="jdbc/myPrac" resource-ref="true" />
<bean id="txManager" class="org.springframework.transaction.jta.JtaTransactionManager" />

    <!-- Spring integration with JPA -->
<bean id="vendorAdaptor-inj" class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
    <property name="database"  value="DERBY"  />
            <property name="showSql" value="true" />
            <property name="generateDdl" value="true" />                    
</bean> 

<bean id="entityMgrFactory-inj" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">         
    <property name="dataSource" ref="datasourceId" />       
    <property name="persistenceUnitName" value="forSpring" />           
    <property name="jpaVendorAdapter" ref="vendorAdaptor-inj" />
</bean>     

</beans> 
```

这是我的StudentDAO，

```
package com.dao;

import java.util.List;
import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.TypedQuery;
import org.springframework.stereotype.Repository;
import org.springframework.transaction.annotation.Propagation;
import org.springframework.transaction.annotation.Transactional;

import com.entity.Student;

@Repository("studentSpringDao-inj")
@Transactional(value="txManager",readOnly=true)
public class StudentSpringDAO {

    @PersistenceContext(unitName="forSpring")
    private EntityManager em;

    public EntityManager getEm() {
        return em;
    }

    public void setEm(EntityManager em) {
        this.em = em;
    }

    public List<Student> getStudentList()  throws Exception{
        System.out.println(" \n\n\n LOADING... \n\n\n ");
        String query = "select s from Student s order by s.studentId desc";
        TypedQuery<Student> studentQuery =  em.createQuery(query,Student.class);
        return  studentQuery.getResultList();
    }

    public Integer latestStudent()  throws Exception{
        String query = "select max(s.studentId) from Student s";
        TypedQuery<Integer> studentQuery =  em.createQuery(query,Integer.class);        
        return  studentQuery.getResultList().get(0);
    }

    @Transactional(value="txManager",readOnly=false,propagation=Propagation.REQUIRES_NEW)
    public Student saveStudent(Student student) throws Exception{           
        return em.merge(student);
    }
} 
```

仅供参考，我使用 jndi 查找名称“jdbc/myPrac”来查找数据源，

你能帮我解决这个问题吗，我是否缺少 spring-bean.xml 中的任何配置

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:38:05.387

```
@Transactional(value="txManager",readOnly=true) 
```

你认为是什么`readOnly=true`意思，你试过了`readOnly=false`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T02:59:20.193

替换类`org.springframework.transaction.jta.JtaTransactionManager` 并`org.springframework.orm.jpa.JpaTransactionManager`添加`tx:annotation-driven`

# java - 当按钮可见时如何剪切部分TextView

> ID：12140171
> 
> 赞同：1
> 
> 时间：2012-08-27T10:23:12.327
> 
> 标签：java, android, android-layout, user-interface

在这个项目中，我正在解决一个问题。我可以这样做吗？附加到 centerInParent 的顶部面板中心的名称。文字左侧我有图像。名称可以显示在区域的整个宽度上（当按钮在右侧不可见时）。如果按钮可见，则在右侧切割名称，左侧保持原样。

[image][blaaaaaaaaaaaaaaaaaaaaaaaaaaaa] - 当按钮不可见时

[image][blaaaaaaaaaaaaaaaaaaaaaa...][button] - 当按钮可见时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:27:14.237

//在你的textivew中添加以下属性

```
android:ellipsize="end"
android:maxLength="50"
android:lines="1"
android:maxEms="9" //you can choose max length or max ems
android:singleLine="true" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:28:56.220

您可以通过将按钮设置为`Visibility.Hidden`在您希望它不可见时设置按钮`android:ellipsize="end"`并`.setEllipsize`在`TextView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:26:57.810

使用相对布局。

```
image alignparent topleft. 
button aligntparent right. 
text right of image && left of button. 
```

使用按钮 Gone 和按钮可见而不可见。

# c# - 获取 WeifenLuo 2.5.0.0 中某个面板的子面板

> ID：12140173
> 
> 赞同：1
> 
> 时间：2012-08-27T10:23:28.520
> 
> 标签：c#, .net, winforms, dockpanel-suite

我想在运行时为我的窗口创建几个 DockContent 。此外，所有内容都应该同时对用户可见。我只想在顶部和底部添加内容。那么如何添加所有内容几乎相同大小的内容呢？

我现在遇到的问题是每个内容的大小。每次我添加内容时，它都会变得越来越小，但以前的内容保持不变。这意味着它只是在每次相同内容时拆分以添加另一个内容。

为了解决这个问题，我首先尝试检查 DockPanel 是否包含 DockPanel.Contents，其中 DockState 是 DockState.Document。如果不是，我将其添加为第一个内容。如果它存在，我想检查内容子窗格是否有一个停靠在顶部。要访问子窗格，我尝试使用 IDockContent.DockHandler.Pane.NestedPanesContainer.NestedPanes。不幸的是，这似乎不仅仅返回此窗格的子窗格，而是返回所有现有窗格。

我希望很清楚我想要做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T08:09:00.687

我能够解决我的问题。为此，我使用“Pane.NestedPanesContainer.NestedPanes”来获取树中的所有元素。然后使用属性“Pane.NestedDockingStatus.PreviousPane”构建树以获取它们的父节点。这工作正常，但需要每次计算。就我而言，它足够快。

小心“NestedPanes”包含的元素。“DockPanel”可以包含不止一棵树。属性“DockContentHandler.DockState”确定它在哪棵树中。

# ruby-on-rails - 删除模型对象后如何删除关联

> ID：12140176
> 
> 赞同：2
> 
> 时间：2012-08-27T10:23:40.773
> 
> 标签：ruby-on-rails

我的两个模型之间有一个简单的 has_many/belongs_to 关联。我的问题是，当我（从父模型中）删除不再需要的对象时，子模型对象中的外键仍然存在。例如：

**森林**

`has_many :trees, :inverse_of => :forest`

**树**

`belongs_to :forest`

当我删除一个`Forest`对象时，所有关联的`Tree`对象仍然包含一个值`forest_id`，这会导致前端出现错误。`before_destroy`我可以使用某种类似的钩子吗？虽然我认为这可能有一个非常简单的解决方案。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T10:29:58.480

我认为你想要这个`:dependent`选项。

```
has_many :trees, :inverse_of => :forest, :dependent => :nullify 
```

这会将外键设置为`nil`关联模型被销毁的时间。你也可以`:dependent => :destroy`用来破坏模型。

[这里的文档](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#label-Dependent+associations)可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:40:25.887

您已添加 :dependent 选项与关联，例如

has_many :trees, :dependent => :destroy

它将删除特定 Forest 对象的所有树。

# hadoop - hadoop 中超过 120 个计数器

> ID：12140177
> 
> 赞同：8
> 
> 时间：2012-08-27T10:23:42.363
> 
> 标签：hadoop, limit, counter

Hadoop 计数器大小有限制。默认为 120。我尝试使用配置“mapreduce.job.counters.limit”来改变它，但它不起作用。我看过源代码。这就像“org.apache.hadoop.mapred.Counters”类中的 JobConf 实例是私有的。以前有人见过吗？你的解决方案是什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-28T09:51:53.287

您可以在您的 JT、TT、客户端节点上覆盖该属性，`mapred-site.xml`但请确保这将是系统范围的修改：

```
<configuration>
  ...
  <property>
    <name>mapreduce.job.counters.limit</name>
    <value>500</value>
  </property>
  ...
</configuration> 
```

然后重新启动集群上的 mapreduce 服务。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-11-13T20:20:11.607

在 Hadoop 2 中，这个配置参数被称为

```
mapreduce.job.counters.max 
```

但是，在命令行或配置对象中设置它是不够的。您需要调用静态方法

`org.apache.hadoop.mapreduce.counters.Limits.init()`

在 mapper 或 reducer 的 setup() 方法中使设置生效。

用 2.6.0 和 2.7.1 测试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-03-01T06:43:45.353

para 由配置文件设置，下面的 paras 将生效

```
mapreduce.job.counters.max=1000 
mapreduce.job.counters.groups.max=500 
mapreduce.job.counters.group.name.max=1000 
mapreduce.job.counters.counter.name.max=500 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-21T13:42:50.187

只需添加这个以防其他人面临与我们相同的问题：使用[MRJob](https://pythonhosted.org/mrjob/)增加计数器。

要增加计数器的数量，请添加`emr_configurations`到您的`mrjob.conf`（或将其作为配置参数传递给 MRJob）：

```
runners:
  emr:
    emr_configurations:
      - Classification: mapred-site
        Properties:
          mapreduce.job.counters.max: 1024
          mapreduce.job.counters.counter.name.max: 256
          mapreduce.job.counters.groups.max: 256
          mapreduce.job.counters.group.name.max: 256 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-10-13T14:09:21.640

我们可以将限制自定义为仅针对特定作业的命令行选项，而不是在`mapred-site.xml`.

```
-Dmapreduce.job.counters.limit=x
-Dmapreduce.job.counters.groups.max=y 
```

注意：`x`并且`y`是基于您的环境/要求的自定义值。

# php - 正确加盐和使用 PHPass

> ID：12140178
> 
> 赞同：6
> 
> 时间：2012-08-27T10:23:52.837
> 
> 标签：php, security, phpass

很长一段时间以来，我一直在使用 PHPass 对我的密码进行哈希处理。我承认仍有一些我不完全理解（或忽略）正确散列密码的事情，所以今天我正在审查我能找到的所有信息。

回顾 PHPass 文档，我已经进入了这个：

> 除了实际的散列，phpass 在新密码或密码被散列时透明地生成随机盐，并将散列类型、盐和密码拉伸迭代计数编码到它返回的“散列编码字符串”中。当 phpass 针对存储的散列验证密码或密码短语时，它同样透明地提取并使用散列类型标识符、盐和“散列编码字符串”中的迭代计数。**因此，您无需自己费心腌制和拉伸**- phpass 会为您处理这些。

我把困扰我的句子加粗了。
我一直认为盐应该是秘密的，因为攻击者不应该知道它。因此，如果理解正确，PHPass 会将使用的盐存储在相同的哈希中，以便在比较密码并检查是否有效时能够使用它。
我的问题是

1.  这安全吗？如果散列被泄露，攻击者拥有用于散列密码的盐......这里有一些我想念的东西。
2.  我在这里真的可以免费为密码加盐吗？我真的可以依赖 PHPass 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:30:08.543

**一点背景**
盐并不意味着是秘密的，相反，盐通过确保每个使用的实例的哈希结果唯一来“起作用”。这是通过为每个计算的哈希选择不同的随机盐值来完成的。

当人们知道盐的意图时，它不会受到损害；攻击者仍然需要分别攻击每个哈希。因此，您可以简单地将盐与密码一起存储。

**那么，PHPass 安全吗？**
是的！PHPass（根据最佳实践）为您生成强随机盐。这是一个经过良好审查且质量上乘的图书馆。

**感兴趣的链接**：
[如何安全地散列密码？](https://security.stackexchange.com/questions/211/how-to-securely-hash-passwords)
[如何储存盐？](https://security.stackexchange.com/a/17435/2113)
[密码散列加盐+胡椒还是盐就够了？](https://security.stackexchange.com/questions/3272/password-hashing-add-salt-pepper-or-is-salt-enough)
[Salt Generation 和开源软件](https://stackoverflow.com/questions/1645161/salt-generation-and-open-source-software/1645190#1645190)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:28:58.857

盐的目的*不是*秘密。目的是为每个散列输入添加一个唯一组件，因此相同的密码不会散列到相同的散列，从而使暴力破解过程更加困难和耗时，因为必须单独尝试每个散列。

是的，如果盐是秘密的，它会稍微安全一些，但这在实践中很难实现，因为*你的*应用程序也需要盐，所以它也需要存储在可以访问密码的地方。因此，在实践中，当攻击者获得密码哈希时，他通常也能够获得盐。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:27:22.507

如果我理解正确，盐主要用于阻止预先计算的哈希/彩虹表攻击。只要生成使用的散列，使其在全球范围内具有合理的唯一性（例如，在 PHPass 中没有硬编码），就可以了。

# jquery - 带有可变变量的 jQuery 选择器循环

> ID：12140179
> 
> 赞同：2
> 
> 时间：2012-08-27T10:23:56.447
> 
> 标签：jquery, variables, selector

我有一个 jSON ajax 响应，如下例所示：

```
['PostA1'] =>1
['PostA2'] =>1
['PostA3'] =>2
['PostB1'] =>1
['PostB2'] =>3
['PostB3'] =>0
['PostB4'] =>2
['Pre1'] =>1
['Pre2'] =>2
['Pre3'] =>1
['Pre4'] =>3
['Pre4'] =>3 
```

PostA-x、PostB-x 和 Pre 数据是指需要根据其值设置的单选按钮集。我可以通过编写一行代码来处理每个单独的代码来做到这一点，例如：

```
$("input[id='Pre1-" + data.Pre1 + "']").attr('checked','checked');
$("input[id='Pre1-" + data.Pre2 + "']").attr('checked','checked');
$("input[id='PostA1-" + data.PostA1+ "']").attr('checked','checked');
$("input[id='PostA2-" + data.PostA2 + "']").attr('checked','checked'); 
```

...等...，但理想情况下，我希望能够遍历数据集，例如...

```
 i = 1;
        $.each("--Aray which starts with PostA--" + i){
              $("input:radio[id='PostA-" + data.PostA -- incrementer variable -- + "'].attr('checked',checked');
i++;
    } 
```

然后对三个数据集中的每一个重复这个循环......但我真的被困住了，因为首先我不擅长 jQuery 选择器，其次我不知道如何在选择器中创建可变变量。

希望这是有道理的！如果你们对如何做到这一点有任何建议（也许我的做法完全错误？！？！？）那么将不胜感激。

担

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:27:38.563

您可以使用`for..in`循环对象。

```
for (var key in data) {
  // $("input[id='" + key + "-" + data[key]+ "']").prop('checked', true);
  // below is better if select by id
  $('#'+key+'-'+data[key]).prop('checked', true);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:27:06.890

为什么不迭代`data`呢？您可以使用[$.each()](http://api.jquery.com/jQuery.each/)来执行此操作，并从每个键/值对构建当前元素的 id：

```
$.each(data, function(key, value) {
    $("#" + key + "-" + value).prop("checked", true);
}); 
```

# c# - 即使有足够的行，SQL-Query 也找不到行

> ID：12140182
> 
> 赞同：2
> 
> 时间：2012-08-27T10:24:09.633
> 
> 标签：c#, sql, mysql-connector

我正在为我自己的网站编写一个小的网络爬虫。它似乎工作正常。我浏览了每个链接并检查它是否属于我的主页。如果找到链接，它会使用“addSite()”添加站点。这首先尝试获取 URl 相同的条目，如果没有任何条目，则添加 URl。否则，如果内容哈希更改，它会更新它。问题是它会添加 URl，即使它存在。

这是我的方法：

```
private bool addSite(string url, string title, string content)
{
    string hash = md5Hash(content);
    List<object[]> res = sql.executeReader(string.Format("SELECT `hash` FROM `sites` WHERE `url` = '{0}'", MySqlHelper.EscapeString(url)));
    if (res.Count > 0)
    {
        if (res[0][0].ToString() != hash)
        {
            sql.executeQuery(string.Format("UPDATE `sites` SET title = '{0}', content = '{1}', hash = '{2}' WHERE url = '{3}'", MySqlHelper.EscapeString(title), MySqlHelper.EscapeString(content), hash, MySqlHelper.EscapeString(url)));
            return true;
        }
        return false;
    }
    sql.executeQuery(string.Format("INSERT INTO `sites`(url, title, hash, content) VALUES('{0}', '{1}', '{2}', '{3}')", MySqlHelper.EscapeString(url), MySqlHelper.EscapeString(title), hash, MySqlHelper.EscapeString(content)));
    Console.WriteLine("Added: " + url);
    return true;
} 
```

我希望任何人都能找到失败。非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:33:28.900

如果有你不想重复的字段。为什么不将数据库字段设置为唯一的。并在您的程序中捕获错误，或者在存在时按照您的意愿进行操作。如果数据库允许它进入。那么字符串会因大写字母或空格等而有所不同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:47:03.437

我不确定，但也许你必须添加其他内容：

```
 private bool addSite(string url, string title, string content)
    {
        string hash = md5Hash(content);
        List<object[]> res = sql.executeReader(string.Format("SELECT `hash` FROM `sites` WHERE `url` = '{0}'", MySqlHelper.EscapeString(url)));
        if (res.Count > 0)
        {
            if (res[0][0].ToString() != hash)
            {
                sql.executeQuery(string.Format("UPDATE `sites` SET title = '{0}', content = '{1}', hash = '{2}' WHERE url = '{3}'", MySqlHelper.EscapeString(title), MySqlHelper.EscapeString(content), hash, MySqlHelper.EscapeString(url)));
                return true;
            }
            return false;
        }
        else
        {
            sql.executeQuery(string.Format("INSERT INTO `sites`(url, title, hash, content) VALUES('{0}', '{1}', '{2}', '{3}')", MySqlHelper.EscapeString(url), MySqlHelper.EscapeString(title), hash, MySqlHelper.EscapeString(content)));
            Console.WriteLine("Added: " + url);    
        }
    return true;
} 
```

# python - 在 if-else 语句中使用 in range(..)

> ID：12140185
> 
> 赞同：2
> 
> 时间：2012-08-27T10:24:24.090
> 
> 标签：python

蟒蛇2.7

是否有可能做到这一点：

```
print "Enter a number between 1 and 10:"
number = raw_input("> ")

if number in range(1, 5):
    print "You entered a number in the range of 1 to 5"
elif number in range(6, 10):
    print "You entered a number in the range of 6 to 10"
else:
    print "Your number wasn't in the correct range" 
```

我发现如果我把一个数字放在 1 到 10 之间，它总是属于 else 语句。

这是 if-else 语句中对 in range 的错误使用吗？

提前谢谢了，

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-27T10:40:56.557

这是因为输入数据是字符串。所以它流向了其他地方。将其转换为整数，然后一切都会好起来的。

```
>>> number = raw_input("> ")
>>> type(number)
<type 'str'>
int(number) converts to <type 'int'> 
```

请用：

```
if int(number) in range(1, 6):
    print "You entered a number in the range of 1 to 5"
elif int(number) in range(6, 11):
    print "You entered a number in the range of 6 to 10"
else:
    print "Your number wasn't in the correct range" 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T10:26:46.443

```
>>> number = raw_input()
3
>>> type(number)
<type 'str'>
>>> "3" in range(1,5)
False

number = int(raw_input()) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T10:27:58.963

在检查之前，您应该先将输入（这是一个字符串）转换为一个数字。您还应该使用`if 1 < number <= 5:`, 不需要创建一个列表来检查一个数字是否在一个范围内。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T11:29:40.093

为了完整起见，该`in`运算符可以用作布尔运算符来测试属性成员资格。因此它可以在 `if..else`声明中使用（请参阅下面的完整文档摘录）。

使用`in`运算符时，（例如`obj in container`）解释器首先查看是否`container`有 `__contains__`方法。如果没有，但如果`container`定义了`__iter__`方法，python 将迭代对象中包含的所有值并测试是否相等，即它基本上会执行类似的操作

```
for value in container:
    if value == obj:
        return True
return False 
```

最后，如果两个方法都没有定义，解释器会寻找`__getitem__`迭代容器的方法，并且仍然会测试任何值是否与`obj`. 您还可以查看[比较运算符文档](http://docs.python.org/reference/datamodel.html#object.__lt__ "文档")。

现在，在您的情况下，`range([start], stop[, step])`函数[[documentation]](http://docs.python.org/library/functions.html#range "[文档]")实际上返回一个列表（请注意，此列表不**包含**最后一个元素 so `range(1, 5) == [1, 2, 3, 4]`），它定义了`__contains__`方法：

```
>>> type(range(1, 10))
list
>>> hasattr(list, '__contains__')
True
>>> 4 in range(1, 10)
True 
```

所以这是完全授权写`x in range(1, 10)`的。正如其他答案所指出的那样，您的问题实际上是通过将输入数据转换为整数来解决的类型问题（如`"3" == 3`False 一样）。但是，如果您只打算测试输入值是否正确有界，我强烈建议您使用比较运算符

```
>>> if 1 <= x < 10:
...     print 'ok'
... else:
...     print 'ko' 
```

因为它看起来更具可读性*，并且*您没有构建过时的列表，因此您可以最大限度地减少内存占用。

请注意，为了避免列表的隐式构造，您可以使用`xrange`返回迭代器而不是列表的函数，并且在这种情况下，由于值是惰性求值的，`xrange`它没有定义`__contains__`方法，但它定义了`__iter__`方法，所以一切仍然工作正常！

```
>>> type(xrange(1, 10))
xrange
>>> hasattr(xrange, '__contains__')
False
>>> hasattr(xrange, '__iter__')
True
>>> 4 in xrange(1, 10)
True 
```

[最后，这里是关于操作符](http://docs.python.org/reference/expressions.html#in "蟒蛇文档")的 python 文档的摘录[`in`](http://docs.python.org/reference/expressions.html#in "蟒蛇文档")

> 运算符 in 和 not in 测试集合成员资格。如果 x 是集合 s 的成员，则 x in s 评估为 true，否则为 false。x not in s 返回 x in s 的否定。集合成员资格测试传统上与序列绑定。如果集合是一个序列并且包含与该对象相等的元素，则该对象是该集合的成员。但是，对于许多其他对象类型来说，支持成员资格测试而不是序列是有意义的。特别是，字典（用于键）和集合支持成员资格测试。
> 
> 对于列表和元组类型，当且仅当存在索引 i 使得 x == y[i] 为真时，x in y 为真。
> 
> 对于 Unicode 和字符串类型，当且仅当 x 是 y 的子字符串时，x in y 为真。等效测试是 y.find(x) != -1。注意，x 和 y 不必是同一类型；因此，'abc' 中的 u'ab' 将返回 True。空字符串总是被认为是任何其他字符串的子字符串，因此 "abc" 中的 "" 将返回 True。
> 
> 在 2.3 版更改: 以前，x 必须是长度为 1 的字符串。
> 
> 对于定义了`__contains__`() 方法的用户定义类，x in y 当且仅当 y 为真。`__contains__`(x) 是真的。
> 
> 对于未定义`__contains__`() 但定义`__iter__`() 的用户定义类，如果在迭代 y 时产生具有 x == z 的某个值 z，则 x in y 为真。如果在迭代过程中引发异常，就好像引发了该异常。
> 
> 最后，尝试旧式迭代协议：如果一个类定义了`__getitem__`()，x in y 为真当且仅当存在一个非负整数索引 i 使得 x == y[i]，并且所有小整数索引不会引发 IndexError 异常。（如果引发任何其他异常，就好像引发了该异常）。
> 
> 运算符 not in 被定义为具有 in 的反真值。
> 
> 运算符 is 和 is not 测试对象身份：当且仅当 x 和 y 是同一个对象时，x is y 为真。x is not y 产生逆真值。[7]

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-17T23:51:50.540

另一种可能的解决方案是在开始时使用 int ：

```
number = int(raw_input("> ")) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2021-09-01T03:54:00.527

[在线尝试](https://onlinegdb.com/9q_cdU37V)

在python3中

```
print ("Enter a number between 1 and 10:")
number = int(input( ))

if int(number) in range(1, 6):
   print ("You entered a number in the range of 1 to 5")
elif int(number) in range(6, 11):
    print ("You entered a number in the range of 6 to 10")
else:
    print ("Your number wasn't in the correct range") 
```

结果：

```
Enter a number between 1 and 10:
4
You entered a number in the range of 1 to 5 
```

# iphone - 你如何创建一个 .bundle 来存储图像？

> ID：12140186
> 
> 赞同：5
> 
> 时间：2012-08-27T10:24:26.363
> 
> 标签：iphone, ios, xcode, bundle

实际上，我在某处读到，将图像保留为捆绑包是防止它从 .ipa 文件中复制的正确方法。所以，我想知道如何为图像制作捆绑包。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:02:30.867

[在这个问题](https://stackoverflow.com/questions/4888208/how-to-make-an-ios-asset-bundle)的答案中有一些关于创建和访问资产包的好建议。

# c# - 如何在实体框架中使用 BETWEEN 关键字？

> ID：12140190
> 
> 赞同：10
> 
> 时间：2012-08-27T10:24:41.243
> 
> 标签：c#, entity-framework, between

如何在实体框架中使用 BETWEEN 关键字？

这是我的 SQL 查询

```
 SELECT *
  FROM [HRM].[dbo].[meals]
  WHERE SHIFTCODE = 'Normal'
  AND 12.59 BETWEEN [STAR TIME] AND [STAR TIME]+DURATION/10; 
```

这是我的实体框架代码。

```
HRMEntities HRM = new HRMEntities();
            meal ml = HRM.meals.SingleOrDefault(p => p.SHIFTCODE == "Normal"); 
```

值 12.59 可以是变量

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T10:26:29.177

您可以使用`>=`and `<=`with`DateTime`来获取范围。

```
HRMEntities HRM = new HRMEntities();
meal ml = HRM.meals.SingleOrDefault(p => p.SHIFTCODE == "Normal" 
                                    && p.StartTime <= yourTime 
                                    && (p.StartTime + duration) >= yourtime); 
```

# iphone - 将字符串拆分为数组对象

> ID：12140193
> 
> 赞同：2
> 
> 时间：2012-08-27T10:24:55.633
> 
> 标签：iphone, objective-c, nsstring, nsmutablearray, nsarray

我从这样的网络服务中得到响应

```
Result =     (
            (
        "Test1",
        "Test2",
        "Test3",
        "Test4",
        Test5
    )
); 
```

通过，[dict objectForKey:@"Result"]; 我得到了价值

```
(
        "Test1",
        "Test2",
        "Test3",
        "Test4",
        Test5
    ) 
```

那么，如何从 NSSting 格式获取数组格式的值。

例如。数组：- Test1、Test2、Test3、Test4、Test5

请问有人可以回复吗。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:31:20.977

试试这个代码：

```
NSMutableArray* arrCountryName = (NSMutableArray *)[yourString componentsSeparatedByString: @","]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:00:56.927

在这里，您可以使用您的 inputString 并生成 Array 输出，如下所示：

```
NSString *inputString = @"Test1,Test2,Test3,Test4";
NSMutableArray* outputArray = [[NSMutableArray alloc] init];
outputArray = [inputString componentsSeparatedByString: @","]; 
```

如果您需要更多帮助，请告诉我。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:45:24.677

如果您完全按照格式复制打印输出，则该`@"Result"`键似乎包含一个数组数组，其中一个元素已经是您想要的数组，因此这应该适合您：

```
NSArray *res = [[dict objectForKey:@"Result"] objectAtIndex:0]; 
```

我认为这是数组中的数组的原因是它在列表周围显示了两级嵌套括号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:51:10.250

```
NSString *separatorString = @",";
NSScanner *aScanner = [NSScanner scannerWithString:yourString];
NSString *thingsScanned;
[aScanner scanUpToString:separatorString intoString:&thingsScanned];
NSLog(@"container: %@", thingsScanned); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T10:32:42.397

尝试这个：

```
if([dict objectForKey:@"Result"] isKindofClass:[NSArray class]])
{

   NSArray *arrValues = [dict objectForKey:@"Result"];
  //u have your array 
  for(NSString *value in arrValues)
  {
    NSLog(@"%@",values);
  }
} 
```

# symfony1 - 推进或学说；对于 Symfony 1.4，哪个更好的 ORM

> ID：12140194
> 
> 赞同：2
> 
> 时间：2012-08-27T10:25:03.257
> 
> 标签：symfony1, doctrine, symfony-1.4, propel

我有 CodeIgniter 和 Cake PHP 的现场项目经验。但是现在我需要处理一个两者都不适合的大型项目。我几乎决定使用 symfony 1.4（根据我客户的要求，2.0 不是一个选项）。

在 Symfony 1.4 中，我也对 ORM 选择感到困惑：Doctrine 还是 Propel？我浏览了几个链接。迄今为止最好的发现是 [PHP ORMs: Doctrine vs. Propel](https://stackoverflow.com/questions/2062473/php-orms-doctrine-vs-propel)。

然而，所有这些比较似乎至少有两年的历史，而且从那以后世界肯定会发生很大变化。我对编码风格没有任何问题；我对所有 Active Record、Criteria、DQL 或其他什么都很好。对我来说，性能比编码风格最重要。我主要关心处理大量数据时的性能，可能是集群数据库下多个表中的数百万行。不幸的是，目前我的经验不足以就此事做出独立决定。

谁能解释一下 Symfony 1.4 下 Propel/Doctrine 的性能？除了性能之外，在选择 PHP ORM 时还有其他值得注意的因素（编码风格除外）吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-27T11:57:13.290

***tl;dr****：我使用 Doctrine 很长时间了，如果我必须开始新的东西，我会选择 Propel。*

这是一个常见的问题，几乎没有好的答案。但我只是给你我的观点。

我从第一个 alpha 开始就使用 Doctrine（以及旧的 symfony 0.63）。我们选择 Doctrine 而不是 Propel，因为 Doctrine 支持 PDO（PHP 原生）并且 Propel 仍在[Creole](http://web.archive.org/web/20090227084922/http://creole.phpdb.org/trac/)（非原生）上运行。与 PDO 相比，克里奥尔语非常慢（当然）。

最近，Doctrine 增加了一个迷失的魔法。我的意思是，你可以打电话给`getField`,`findOneByField`一切，它会返回你想要的。这真的很棒，而不是必须构建自己的 getter 和 setter。*魔术*在那个时候真的很流行。

使用 Doctrine 编写查询真的很容易，而不是来自 Propel 的痛苦的 Criteria 和 Criterion，这真的很冗长。我真的是 Doctrine 的粉丝，并建议大家开始使用它而不是 Propel。

然后，Propel 从 1.3 开始切换到 PDO，并开始有一个很好的 API 来编写查询，几乎与 Doctrine 相同的方法。主要区别在于 Propel 会生成所有*魔法*物品，而 Doctrine 则是动态构建的。这是我认为最大的不同。

Propel 在这段代码中没有任何魔力。它会在您构建模型时生成所有 getter/setter、join 等。Doctrine 在运行查询时会执行所有操作。这对于中小型项目来说是可以的，但它开始变得更大，它将成为一个缓慢的解决方案。而且它也非常适合调试，因为您可以在生成的类中找到代码，您不必从一个类跳到另一个类来查找处理这种情况的全局方法。

两个 ORM 都使用行为。我喜欢行为。它们在 Doctrine 和 Propel 中以不同的方式处理。Doctrine 仍然使用它的*魔法*来处理它们，其中 Propel 从类内部的行为生成所有内容（从生成的类中多一点而不是魔法一点）。

到目前为止，由于 1.2.x 分支几乎死了（[最后一个版本是2010](http://www.doctrine-project.org/jira/browse/DC/fixforversion/10051)年 8 月 24 日）。[正如你在github](https://github.com/propelorm/Propel)上看到的那样，Propel 仍然很活跃，非常活跃。

我仍然在 Doctrine 工作，但几年以来我从 Propel 学到了很多东西。我在 Doctrine 上建立了一些个人项目。到今天为止，我改变了主意，如果我必须开始一个新项目，我会使用 Propel 来完成。

几个链接：

*   [我应该选择 Doctrine 2 还是 Propel 1.5/1.6，为什么？](https://softwareengineering.stackexchange.com/questions/48760/should-i-choose-doctrine-2-or-propel-1-5-1-6-and-why)（在programmers.se上）
*   [Propel 首席开发](https://stackoverflow.com/a/7979987/569101)人员对此选择的 POV（当然，赞成 Propel）

# java - 有没有办法从 NSS 中提取密钥

> ID：12140199
> 
> 赞同：0
> 
> 时间：2012-08-27T10:25:25.470
> 
> 标签：java, cryptography, fips, nss

我使用 NSS 作为我的密钥库。我已经生成了一个密钥，用于加密/解密敏感数据（使用 AES）并且一切正常。

为了可移植性，有没有一种方法可以提取此密钥并将其插入回不同的 NSS DB？

我将 jre6 与 SunPKCS11 提供程序一起使用。我正在生成密钥如下

```
KeyStore ks = //get NSS keystore
    KeyGenerator kg = KeyGenerator.getInstance("AES");
    kg.init(128);
    SecretKey skey = kg.generateKey();
    ks.setEntry(SECREY_KEY, new KeyStore.SecretKeyEntry(skey), 
            new KeyStore.PasswordProtection(pw.toCharArray())); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T19:49:46.427

试试 NSS 工具包，它有一个从 NSS 密钥库中提取 PKCS#12 密钥[的实用程序：](http://www.mozilla.org/projects/security/pki/nss/tools/pk12util.html)

[http://www.mozilla.org/projects/security/pki/nss/tools/](http://www.mozilla.org/projects/security/pki/nss/tools/)

# c# - 任务并行库 - 单核并行

> ID：12140201
> 
> 赞同：2
> 
> 时间：2012-08-27T10:25:41.317
> 
> 标签：c#, .net, task-parallel-library

我正在开发一个 WPF 应用程序。
在屏幕/视图中，我必须对 WCF 服务进行 6 次调用。这些调用没有一个是相关的，因为它们不共享数据，也不相互依赖。我打算使用 TPL 并将这 6 个 WCF 服务调用作为 6 个任务。现在应用程序可能部署在单核机器或多核机器上。

有人告诉我，在单核机器上使用 TPL 实际上会增加任务完成所需的时间，因为在 cpu 调度程序上安排时间拼接不同任务的开销。这是真的。如果是，我应该继续我的设计还是应该寻找替代方案。

如果我必须看看替代品，那些替代品是什么:)？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:42:18.580

当做一些 CPU 密集型的事情时，你会通过在单核机器上运行并行线程来增加开销。

在您的情况下，任务不是 CPU 密集型的，它们正在等待服务调用响应，因此您可以很好地在单核机器上运行并行线程。

根据服务器处理呼叫的方式，可能不会有任何时间增加。如果呼叫在服务器上排队，无论如何运行所有呼叫将花费大约相同的时间。在这种情况下，最好按顺序运行调用，因为它更简单。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-17T05:54:59.250

您最好的选择是使用多核和单核进行分析。大多数bios可以设置活动核心的数量，所以这应该不是什么大问题。你可以做一些模拟测试，看看它是否适合你。

显然，使用任务切换有开销问题，但只要每个任务的时间比设置时间长得多，你就不会注意到它。

实现多任务行为的方法有很多，如果您不知道哪种方法最好，那么您可能需要实际编写一些测试用例并进行一些分析。这并不难做到。如果您只是尝试使用多核系统，那么使用最新版本的 .NET 通常很容易，您甚至可以将其设置为多核，但通过使用适当的构造恢复为单核。

例如，异步/等待模式可以通过使用`#ifdef`或删除所有等待关键字（使用搜索和替换工具）轻松同步运行。`Parallel.For`循环很容易`for`直接或通过更改转换为普通循环`MaxDegreeOfParallelism`。任务可以很容易地同步运行。

如果你想让它更透明，你可以使用一些预处理脚本，比如 T4。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T10:57:19.397

一般来说，当在单核上运行多线程时，它会更慢，因为它在线程之间有上下文切换。

我认为下图将解释您的区别：

![上下文切换](../Images/c76aab9f0813e964d05078b9df57e6d9.png)

如您所见，该图指的是在单核上运行的 4 个线程，第一次是多任务处理，第二次是顺序处理。

您可以看到，在多任务处理中，所有线程都将在比顺序任务处理更晚的时间完成。

在您的具体情况下可能不会相同，我认为@Guffa 在他的回答中是正确的，因为它涉及 WCF 调用

# jquery - jquery .on 不加载

> ID：12140212
> 
> 赞同：1
> 
> 时间：2012-08-27T10:26:27.857
> 
> 标签：jquery, mouseenter, mouseleave

> **可能重复：**
> [无限滚动 javascript 已经触发](https://stackoverflow.com/questions/12139508/infinite-scroll-javascript-already-fired)

当用户将鼠标悬停在具有类 .item_list_image 的 div 上时，我希望显示其他 div，我正在尝试以下操作，但根本不起作用。

```
<script type="text/javascript">
   $("body").on("mouseenter", ".list_item_image", function () {
        {
                $(this).children(".gl_view2").show();
                $(this).children(".gl_relist").show();
        });

   $("body").on("mouseleave", ".list_item_image", function () {
       {
                $(this).children(".gl_view2").hide();
                $(this).children(".gl_relist").hide();
       });
</script> 
```

有人建议我使用 .on 方法，因为我正在使用 jquery 无限滚动，因此在显示的页面上附加了 html，并添加了包含类 list_item_image 的 div 的新项目

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:39:00.873

你错过了`$(document).ready`，只需用

```
$(document).ready(function(){
    $("body").on("mouseenter", ".list_item_image", function (){
        $(this).children(".gl_view2").show();
        $(this).children(".gl_relist").show();
    })
    .on("mouseleave", ".list_item_image", function (){
       $(this).children(".gl_view2").hide();
       $(this).children(".gl_relist").hide(); 
    });
});​ 
```

另请注意`{`，您的两个函数中的额外内容位于`$("body")`.

[**只是一个例子**](http://jsfiddle.net/8weGV/1/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:34:19.857

检查代码的括号。试试这个

```
 $("body").on("mouseenter", ".list_item_image", function() {
     {
         //alert('dsfs');
         $(this).children(".gl_view2").show();
         $(this).children(".gl_relist").show();
     }});

 $("body").on("mouseleave", ".list_item_image", function() {
     {
         $(this).children(".gl_view2").hide();
         $(this).children(".gl_relist").hide();
     }}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:39:54.190

你需要把你的代码放在 dom 中准备好。

```
<script type="text/javascript">
$(function(){
                    $("body").on("mouseenter", ".list_item_image", function () {
                    {
                        $(this).children(".gl_view2").show();
                        $(this).children(".gl_relist").show();
                    });

                    $("body").on("mouseleave", ".list_item_image", function () {
                    {
                        $(this).children(".gl_view2").hide();
                        $(this).children(".gl_relist").hide();
                    });
})
            </script> 
```

您也可以通过此代码实现相同的目的。

```
<script type="text/javascript">
    $(function(){
                        $(".list_item_image").hover(function () {
                        {
                            $(this).children(".gl_view2").show();
                            $(this).children(".gl_relist").show();
                        },

                        function () {
                        {
                            $(this).children(".gl_view2").hide();
                            $(this).children(".gl_relist").hide();
                        });
    })
                </script> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:40:02.153

每个处理函数都有两个`{{`左括号，这是一个 sintax 错误。

只用一个`{`

# php - 如何在数组值+ foreach中调用数组

> ID：12140215
> 
> 赞同：0
> 
> 时间：2012-08-27T10:26:27.623
> 
> 标签：php, arrays, loops, foreach

我有一个联系人，假设将电子邮件作为下拉选项发送给不同的人。

选项值在带有数组的数组中定义，我正在努力调用数组值，以便电子邮件可以发送给指定的人。

**数组在这里定义：**

```
if((isset($_GET['enquiry']) && $_GET['enquiry']=='Locate a dealer/distributor')||(isset($_POST['enquiry']) && $_POST['enquiry']=='Locate a dealer/distributor')){
    $chk_Locate=TRUE;
}

if(isset($_GET['enquiry']) && $_GET['enquiry'] == 'CC'){
    $query_recipients = array(array('Complaint', 'csm@examplecompany.co.za'),
                            array('Suggestion', 'csm@examplecompany.co.za'),
                            array('Compliment', 'csm@examplecompany.co.za'));
    $enquiry = '<input type="hidden" name="enquiry" id="enquiry" value="CC">';
}

else{
    $query_recipients = array(array('Locate a dealer/distributor', 'sales@examplecompany.co.za'),
                            array('Technical support', 'technical@examplecompany.co.za'),
                            array('Back orders', 'backorders@examplecompany.co.za'),
                            array('Product enquiry', 'sales@examplecompany.co.za'),
                            array('Catalog request', 'sales@examplecompany.co.za'),
                            array('New customer enquiry', 'sales@examplecompany.co.za'),
                            array('Existing customers - logon', 'dealers@examplecompany.co.za'),
                            array('Existing customers - orders', 'weborder@examplecompany.co.za'),
                            array('Report web problems', 'webmaster@examplecompany.co.za'));
} 
```

**环形**

```
foreach($query_recipients as $key => $val){ 
    if((isset($_POST['enquiry']) && $_POST['enquiry'] == $val[0])||(isset($_GET['enquiry']) && $_GET['enquiry'] == $val[0])){
        $selected = $val[0].' : '.$item;
        if($val[0]=='Existing customers - logon'||$val[0]=='Technical support'||$val[0]=='Catalog request'||$val[0]=='Product enquiry'||$val[0]=='New customer enquiry'||$val[0]=='Existing customers - orders'||$val[0]=='Catalog request') 
```

**调用它们的代码是：**

```
$_POST['recipient_email'] = $contact_email.','.$recpt_email;
    if(isset($ref_number)){
        $_POST['subject'] = 'Examplecompany Group: '.$ref_number.': '.$_POST['enquiry'];
    }else{
        $_POST['subject'] = 'Examplecompany Group: '.$_POST['enquiry'];
    }
    $_POST['sender_email'] = $_POST['email'];
    $_POST['cc'] = $_POST['email'].', Examplecompany Group <Examplecompany.orders@gmail.com>';
    $_POST['body'] = '<p>Name: ' . $_POST['name'] . '</p>'
                        . '<p>Surname: ' . $_POST['surname'] . '</p>'
                        . '<p>Company: ' . $_POST['company'] . '</p>'
                        . '<p>Examplecompany Account No.: ' . $_POST['accnr'] . '</p>'
                        . '<p>Account No. verification: ' . $cust_verify . '</p>'
                        . '<p>Email: ' . $_POST['email'] . '</p>'
                        . '<p>Tel/cell: ' . $_POST['tel'] . '</p>'
                        . $_POST['enquiry'] . ': ' . $_POST['message'];

    if(Email::Send($_POST, NULL)){
        $message = 'Your feedback has been sent'.$cont_ref;
    } else {
        $message = 'There was an error sending your feedback';
    }
} 
```

这是我想用来调用它们的行 `$_POST['recipient_email'] = $contact_email.','.$recpt_email;`，现在它可以工作，但它调用最后一个数组`array('Report web problems', 'webmaster@examplecompany.co.za')`，而与选择的选项无关。

请帮忙，如果我能找到一种方法来调用数组值，我相信我的表格可以按计划工作。

有一条线我不明白

```
$enquiry_options .= '<option>'.$val[0].'</option>';
    $recpt_email = $val[1]; 
```

如果将 val 设置为`$Val[1]`表单，则将电子邮件发送到数组上的最后一个电子邮件地址，但如果设置为`$Val[0]`它则不会。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T20:37:05.230

考虑将您的数组切换为使用键值对而不是嵌套数组。（请参阅[阵列](http://php.net/manual/en/language.types.array.php)文档。）

```
$enquiry_choices = array(
    'Complaint' => 'csm@examplecompany.co.za',
    'Suggestion' => 'csm@examplecompany.co.za',
    'Compliment' => 'csm@examplecompany.co.za',
    'Locate a dealer/distributor' => 'sales@examplecompany.co.za',
    'Technical support' => 'technical@examplecompany.co.za',
    'Back orders' => 'backorders@examplecompany.co.za',
    'Product enquiry' => 'sales@examplecompany.co.za',
    'Catalog request' => 'sales@examplecompany.co.za',
    'New customer enquiry' => 'sales@examplecompany.co.za',
    'Existing customers - logon' => 'dealers@examplecompany.co.za',
    'Existing customers - orders' => 'weborder@examplecompany.co.za',
    'Web site problems' => 'webmaster@examplecompany.co.za',
);

// Optional: Sort the choices by name
ksort($enquiry_choices); 
```

这使得获取与用户选择相关联的电子邮件地址变得容易。

```
$enquiry = $_GET['enquiry'];
$enquiry_email = (array_key_exists($enquiry, $enquiry_choices) ? $enquiry_choices[$enquiry] : false); 
```

为下拉列表生成 HTML 也很简单。（请参阅[foreach](http://php.net/manual/en/control-structures.foreach.php)文档。）请注意，上面定义`$enquiry`的代码必须在下面的代码之前。

```
echo <<<HTML
<div>
    <label for="enquiry">Enquiry:</label>
</div>
<select name="enquiry" id="enquiry" class="select">
HTML;

foreach($enquiry_choices as $key => $value) {
    $selected = ($enquiry == $key ? ' selected="selected"' : '');
    echo "<option$selected>$key</option>";
}

echo '</select>'; 
```

# android - Activity destroy() 是否会自动取消 CountDownTimer？

> ID：12140220
> 
> 赞同：7
> 
> 时间：2012-08-27T10:26:51.933
> 
> 标签：android, android-activity, countdowntimer, ondestroy

一个问题，也许有点幼稚……

如果我在 Activity onCreate() 中启动 2 分钟 CountDownTimer 并在用户单击按钮时使用 finish() 关闭它，Android 会自动取消它吗？

还是我需要在 onDestroy() 中显式调用 cancel()？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:37:25.267

您将必须显式调用`cancel`. 但更好的`Ondestroy`做法是调用`cancel`. 因为如果您暂停了活动并更新倒数计时器内的任何 Ui 元素，则可能会引发错误。`Onpause`
`OnFinish`

# java - Eclipse Java 代码模板 -> 方法主体：如何插入回车符？

> ID：12140225
> 
> 赞同：3
> 
> 时间：2012-08-27T10:27:08.997
> 
> 标签：java, eclipse, templates, methods

基本上，我想编辑方法主体模板，这样每当我点击工具提示中的“添加未实现的方法...”时，我都会使用我想要的模板创建我喜欢的方法。

***例如（以及我将来使用的所有其他通用方法）：***

当我点击“添加未实现的方法...”时，我通常会得到（不想要）：

```
@Override
public void render(Canvas c, float canvasX, float canvasY) {} 
```

我想要的是**使用这种模式**自动添加未实现的方法（DO WANT）：

```
@Override
public void render(Canvas c, float canvasX, float canvasY) {
} 
```

以下是代码模板当前的样子：

![图表。](../Images/95003e0663c6c9efafdea6bb549d8521.png)

我应该如何编辑它，这样我才能得到上面标记为“DO WANT”的模式？

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:47:07.567

试试这个

去

```
 Preferences
 >Java
  >Code Style
   >Formatter 
     > Edit
      > Braces Tab
         >Method Declaration
          > Change Option to Next Line
      > Line Wrapping 
          > Method Declarations
          > Declaration
           > Do Not Wrap 
```

另外请在`Method Body`设置中添加以下内容

```
 // ${todo} Auto-generated method stub
  ${body_statement} 
```

这将添加一个`**TODO**`提醒您已自动生成该方法并且您需要添加一些代码的内容。

```
 Preferences
 >Java
  >Code Style
   >Code Template
    >Code
     >Method Body
      >Edit
       >Paste the value in pattern 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:37:42.357

好的，这似乎是[Eclipse 中的一个错误](https://bugs.eclipse.org/bugs/show_bug.cgi?id=32122)，尽管这可以追溯到 2003 年。但是，我发现在其中插入换行符的最迟钝的方法。您从文本文件中复制粘贴换行符（sheesh）

# magento - 在 Magento 的主页左侧显示价格范围

> ID：12140231
> 
> 赞同：1
> 
> 时间：2012-08-27T10:27:28.217
> 
> 标签：magento, magento-1.6, magento-1.7

我需要在 Magento 的主页左侧显示价格范围（版本 1.7.0.2）

**价格范围喜欢。**

10 美元以下的所有商品

所有项目 $10 至 $20

所有商品 $20 至 $50

所有商品 $50 至 $100

所有超过 100 美元的商品

价格范围必须是动态创建的，而不是静态的。

**请尽快给我解决方案。我真的需要它。**

# java - Zest Graph - 可编辑还是不可编辑？一个人如何开始上课？

> ID：12140232
> 
> 赞同：1
> 
> 时间：2012-08-27T10:27:30.837
> 
> 标签：java, eclipse, zest

我正在做一个项目，我打算在 JAVA 中创建一个类，使用它可以创建一个图形。详细地说，我想创建 2 个接口 - VERTEX 和 EDGE，每个接口都有 addVertex()、addEdge()、neighborVertex()、numOfNeighbors() 等方法，以及我的类（称为 Graph）将实现上述接口。

我现在是 JAVA 的真正新手，想知道如何继续使用 ZEST？另外，如果我使用 ZEST，图表是否可以编辑？

[Lars Vogel](http://www.vogella.com/articles/EclipseZest/article.html)的教程帮助了我，但我仍然无法让它工作。如何解决以下错误？

```
 !SESSION 2012-08-30 13:00:20.498 -----------------------------------------------
eclipse.buildId=unknown
java.version=1.6.0_24
java.vendor=Sun Microsystems Inc.
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_US
Framework arguments:  -application first.prog.zest.jface.application
Command-line arguments:  -application first.prog.zest.jface.application -data D:\Workspace/../runtime-first.prog.zest.jface.application -dev file:D:/Workspace/.metadata/.plugins/org.eclipse.pde.core/first.prog.zest.jface.application/dev.properties -os win32 -ws win32 -arch x86 -consoleLog

!ENTRY org.eclipse.osgi 2 0 2012-08-30 13:01:06.592
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-30 13:01:06.592
!MESSAGE Bundle reference:file:/D:/Workspace/first.prog.zest.jface/ was not resolved.
!SUBENTRY 2 first.prog.zest.jface 2 0 2012-08-30 13:01:06.592
!MESSAGE Missing required bundle org.eclipse.zest.layouts.source_1.1.0.
!SUBENTRY 2 first.prog.zest.jface 2 0 2012-08-30 13:01:06.592
!MESSAGE Missing required bundle org.eclipse.zest.core.source_1.3.0.

!ENTRY org.eclipse.osgi 2 0 2012-08-30 13:01:06.608
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-30 13:01:06.608
!MESSAGE Bundle first.prog.zest.jface_1.0.0.qualifier [93] was not resolved.
!SUBENTRY 2 first.prog.zest.jface 2 0 2012-08-30 13:01:06.608
!MESSAGE Missing required bundle org.eclipse.zest.core.source_1.3.0.
!SUBENTRY 2 first.prog.zest.jface 2 0 2012-08-30 13:01:06.608
!MESSAGE Missing required bundle org.eclipse.zest.layouts.source_1.1.0.

!ENTRY org.eclipse.osgi 2 0 2012-08-30 13:01:06.749
!MESSAGE One or more bundles are not resolved because the following root constraints are not resolved:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-30 13:01:06.749
!MESSAGE Bundle reference:file:/D:/Workspace/first.prog.zest.jface/ was not resolved.
!SUBENTRY 2 first.prog.zest.jface 2 0 2012-08-30 13:01:06.749
!MESSAGE Missing required bundle org.eclipse.zest.layouts.source_1.1.0.
!SUBENTRY 2 first.prog.zest.jface 2 0 2012-08-30 13:01:06.749
!MESSAGE Missing required bundle org.eclipse.zest.core.source_1.3.0.

!ENTRY org.eclipse.osgi 2 0 2012-08-30 13:01:06.749
!MESSAGE The following is a complete list of bundles which are not resolved, see the prior log entry for the root cause if it exists:
!SUBENTRY 1 org.eclipse.osgi 2 0 2012-08-30 13:01:06.749
!MESSAGE Bundle first.prog.zest.jface_1.0.0.qualifier [93] was not resolved.
!SUBENTRY 2 first.prog.zest.jface 2 0 2012-08-30 13:01:06.749
!MESSAGE Missing required bundle org.eclipse.zest.core.source_1.3.0.
!SUBENTRY 2 first.prog.zest.jface 2 0 2012-08-30 13:01:06.749
!MESSAGE Missing required bundle org.eclipse.zest.layouts.source_1.1.0.

!ENTRY org.eclipse.osgi 4 0 2012-08-30 13:01:06.764
!MESSAGE Application error
!STACK 1
java.lang.RuntimeException: Application "first.prog.zest.jface.application" could not be found in the registry. The applications available are: org.eclipse.ant.core.antRunner, org.eclipse.ant.ui.antRunner, org.eclipse.cdt.codan.core.application, org.eclipse.cdt.core.GeneratePDOM, org.eclipse.cdt.managedbuilder.core.headlessbuild, org.eclipse.e4.ui.workbench.swt.E4Application, org.eclipse.e4.ui.workbench.swt.GenTopic, org.eclipse.emf.codegen.CodeGen, org.eclipse.emf.codegen.JMerger, org.eclipse.emf.codegen.ecore.Generator, org.eclipse.emf.importer.ecore.Ecore2GenModel, org.eclipse.emf.importer.java.Java2GenModel, org.eclipse.emf.importer.rose.Rose2GenModel, org.eclipse.equinox.app.error, org.eclipse.equinox.p2.director, org.eclipse.equinox.p2.garbagecollector.application, org.eclipse.equinox.p2.publisher.InstallPublisher, org.eclipse.equinox.p2.publisher.EclipseGenerator, org.eclipse.equinox.p2.publisher.ProductPublisher, org.eclipse.equinox.p2.publisher.FeaturesAndBundlesPublisher, org.eclipse.equinox.p2.reconciler.application, org.eclipse.equinox.p2.repository.repo2runnable, org.eclipse.equinox.p2.repository.metadataverifier, org.eclipse.equinox.p2.artifact.repository.mirrorApplication, org.eclipse.equinox.p2.metadata.repository.mirrorApplication, org.eclipse.equinox.p2.updatesite.UpdateSitePublisher, org.eclipse.equinox.p2.publisher.UpdateSitePublisher, org.eclipse.equinox.p2.publisher.CategoryPublisher, org.eclipse.help.base.infocenterApplication, org.eclipse.help.base.helpApplication, org.eclipse.help.base.indexTool, org.eclipse.jdt.apt.core.aptBuild, org.eclipse.jdt.core.JavaCodeFormatter, org.eclipse.jdt.core.JavaIndexer, org.eclipse.pde.build.Build, org.eclipse.pde.junit.runtime.uitestapplication, org.eclipse.pde.junit.runtime.legacytestapplication, org.eclipse.pde.junit.runtime.coretestapplication, org.eclipse.pde.junit.runtime.coretestapplicationnonmain, org.eclipse.pde.junit.runtime.nonuithreadtestapplication, org.eclipse.ui.ide.workbench.
    at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:248)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

***错误日志如下：***

```
java.lang.RuntimeException: Application "first.prog.zest.jface.application" could not be found in the registry. The applications available are: org.eclipse.ant.core.antRunner, org.eclipse.ant.ui.antRunner, org.eclipse.cdt.codan.core.application, org.eclipse.cdt.core.GeneratePDOM, org.eclipse.cdt.managedbuilder.core.headlessbuild, org.eclipse.e4.ui.workbench.swt.E4Application, org.eclipse.e4.ui.workbench.swt.GenTopic, org.eclipse.emf.codegen.CodeGen, org.eclipse.emf.codegen.JMerger, org.eclipse.emf.codegen.ecore.Generator, org.eclipse.emf.importer.ecore.Ecore2GenModel, org.eclipse.emf.importer.java.Java2GenModel, org.eclipse.emf.importer.rose.Rose2GenModel, org.eclipse.equinox.app.error, org.eclipse.equinox.p2.director, org.eclipse.equinox.p2.garbagecollector.application, org.eclipse.equinox.p2.publisher.InstallPublisher, org.eclipse.equinox.p2.publisher.EclipseGenerator, org.eclipse.equinox.p2.publisher.ProductPublisher, org.eclipse.equinox.p2.publisher.FeaturesAndBundlesPublisher, org.eclipse.equinox.p2.reconciler.application, org.eclipse.equinox.p2.repository.repo2runnable, org.eclipse.equinox.p2.repository.metadataverifier, org.eclipse.equinox.p2.artifact.repository.mirrorApplication, org.eclipse.equinox.p2.metadata.repository.mirrorApplication, org.eclipse.equinox.p2.updatesite.UpdateSitePublisher, org.eclipse.equinox.p2.publisher.UpdateSitePublisher, org.eclipse.equinox.p2.publisher.CategoryPublisher, org.eclipse.help.base.infocenterApplication, org.eclipse.help.base.helpApplication, org.eclipse.help.base.indexTool, org.eclipse.jdt.apt.core.aptBuild, org.eclipse.jdt.core.JavaCodeFormatter, org.eclipse.jdt.core.JavaIndexer, org.eclipse.pde.build.Build, org.eclipse.pde.junit.runtime.uitestapplication, org.eclipse.pde.junit.runtime.legacytestapplication, org.eclipse.pde.junit.runtime.coretestapplication, org.eclipse.pde.junit.runtime.coretestapplicationnonmain, org.eclipse.pde.junit.runtime.nonuithreadtestapplication, org.eclipse.ui.ide.workbench.
    at org.eclipse.equinox.internal.app.EclipseAppContainer.startDefaultApp(EclipseAppContainer.java:248)
    at org.eclipse.equinox.internal.app.MainApplicationLauncher.run(MainApplicationLauncher.java:29)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
    at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:353)
    at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:180)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
    at java.lang.reflect.Method.invoke(Unknown Source)
    at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:629)
    at org.eclipse.equinox.launcher.Main.basicRun(Main.java:584)
    at org.eclipse.equinox.launcher.Main.run(Main.java:1438)
    at org.eclipse.equinox.launcher.Main.main(Main.java:1414) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T22:45:57.420

如果您想使用 Zest 可视化您的图表，您必须将您自己的图表对象转换为 Zest 图表，或者首先使用 Zest 对象。[查看Eclipse wiki](http://wiki.eclipse.org/GEF_Zest_Visualization#Getting_Started)和[本教程](http://www.vogella.com/articles/EclipseZest/article.html)中的一些示例。

该图无法使用 Zest（专注于可视化）进行编辑，但是基于 SWT，您可以使您的图具有交互性（向节点添加侦听器等）。如果您想编辑图形，请查看[Graphiti](http://www.eclipse.org/graphiti/)或[JUNG 之](http://jung.sourceforge.net/)类的东西。

# c# - 带有 2 个表的 WPF TreeView (hierarchicaldatatemplate)

> ID：12140233
> 
> 赞同：2
> 
> 时间：2012-08-27T10:27:33.883
> 
> 标签：c#, .net, wpf, entity-framework

我有 2 个数据库表：

*   ProductGroup(GroupID, GroupName, ...)
*   产品（产品 ID、产品名称、组 ID、...）

现在我想在 TreeView 中显示 ProductGroup 和 Product Table。

我正在使用实体模型，我现在不知道如何将 2 个表绑定到 1 个 TreeView。

我期待着一些答案！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:16:52.503

```
public partial class Form1 : Form
{
    private string TextFields=string.Empty;
    private string TagFields=string.Empty;
    public Form1()
        {
            InitializeComponent();
        }
private void Form1_Load(object sender, EventArgs e)
{
FillTree();
}

void FillTree()
{
DataSet mds = new DataSet();
DataSet dds = new DataSet();
string ssql;
TextFields = "GroupName"; 
TagFields = "GroupID"; 
this.treeView1.Nodes.Clear();
ssql = "select GroupID, GroupName from productgroups ";
mds =  DB.GetInstance.GetDataSet( ssql);
if(mds!=null)
   insert1LevelNodes(null,mds.Tables[0]);
ssql="select ProductID, ProductName, GroupID from products";
dds =  GetDataSet(ssql);
if(dds!=null)
{
    for(short i = 0;i<this.treeView1.Nodes.Count;i++)
    {   
        TextFields = "ProductName";
        TagFields = "ProductID";
        insert1LevelNodes(this.treeView1.Nodes[i],dds.Tables[0] );

    }
}
dds.Clear();
dds.Dispose();
}

void insert1LevelNodes(TreeNode parentNode, DataTable dt)
{
    string sNodeText = "";
    string sNodeTag = "";
    string[] aTexts = this.TextFields.Split(',');
    string[] aTags = this.TagFields.Split(',');
    for(int i=0; i< dt.Rows.Count; i++ )
    {
        sNodeText = "";
        sNodeTag = "";
        for(int k=0;k<dt.Columns.Count;k++)
        {
            for(short j=0;j<aTexts.Length;j++)
                if(aTexts[j].Equals(dt.Columns[k].ColumnName))
                    sNodeText+=dt.Rows[i][k].ToString() + ":";
            for(short j=0;j<aTags.Length;j++)
                if(aTags[j].Equals(dt.Columns[k].ColumnName))
                    sNodeTag+=dt.Rows[i][k].ToString() + ",";
        }
        if(sNodeText.Length>0) sNodeText = sNodeText.TrimEnd(':');
        if(sNodeTag.Length>0) sNodeTag = sNodeTag.TrimEnd(',');

        if(sNodeText==string.Empty) return;
        TreeNode newNode=new TreeNode(sNodeText);
        newNode.Tag = sNodeTag;
        if(parentNode==null)
            treeView1.Nodes.Add(newNode);
        else
            parentNode.Nodes.Add(newNode);
    }
}

DataSet GetDataSet(string ssql)
{
/// Your function to get Dataset from your Database
}
} 
```

# hibernate - 为什么无法实例化配置类？

> ID：12140236
> 
> 赞同：1
> 
> 时间：2012-08-27T10:27:45.940
> 
> 标签：hibernate, jakarta-ee, db2

我在开发中使用 DB2、Tomcat 7、Hibernate 3、JAVA 1.6、Dynamic web module 3.0 和 JSF 2.0。当我的程序尝试加载 HibernateUtil 类时，代码在实例化配置类时失败。我真的不明白为什么？任何人都可以对这个问题有所了解吗？

HibernateUtil 类如下所示：

```
static {
  try {
    if (cacheFactory.get("Factory") == null) {
      Configuration cfg = new Configuration().configure(); // failed here
      sessionFactory = cfg.buildSessionFactory();
      cacheFactory.put("Factory", sessionFactory);
    } else {
      sessionFactory = (SessionFactory) cacheFactory.get("Factory");
    }
  ... 
```

hibernate.cfg.xml 是这样的：

```
<hibernate-configuration>
  <session-factory>
  <property name="hibernate.connection.url">jdbc:db2://192.168.1.3:51001/THEDB</property>
  <property name="hibernate.connection.username">usera</property>
  <property name="hibernate.connection.password">usera</property>

  <property name="hibernate.connection.driver_class">com.ibm.db2.jcc.DB2Driver</property>
  <property name="hibernate.dialect">org.hibernate.dialect.DB2Dialect</property>
  <property name="hibernate.query.factory_class">org.hibernate.hql.classic.ClassicQueryTranslatorFactory</property>
  <property name="hibernate.jdbc.batch_size">100</property>
  <property name="hibernate.show_sql">false</property>

  <property name="hibernate.connection.release_mode">auto</property>
  <property name="current_session_context_class">thread</property>
  <property name="hibernate.connection.autocommit">true</property>
  <property name="hibernate.transaction.flush_before_completion">true</property>
  <property name="hibernate.transaction.auto_close_session">false</property>
  <property name="hibernate.cglib.use_reflection_optimizer">true</property>

  </session-factory>
</hibernate-configuration> 
```

当我执行这样的代码时`getSession()`：

```
try {
  Session session = HibernateUtil.getSession();
  ...
} catch (Exception e) {
  HibernateUtil.close();
} 
```

该代码将执行位于 HibernateUtil 类的静态部分中的代码，由于静态部分中的代码失败，`getSession()`因此不会被调用。我在控制台输出中看到了这一点：

```
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.huahsin.HibernateUtil 
```

提到HibernateUtil类的编译器没有加载，我想这一定是实例化Configuration类失败造成的。

这是完整的堆栈跟踪：

```
Aug 29, 2012 6:21:39 PM com.sun.faces.application.view.FaceletViewHandlingStrategy handleRenderException
SEVERE: Error Rendering View[/pages/Start.xhtml]
javax.el.ELException: /pages/Start.xhtml: Error reading 'init' on type org.huahsin.StartBean
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:81)
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:75)
    at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:176)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:379)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:126)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:273)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:127)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:311)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.SessionFixationProtectionFilter.doFilterHttp(SessionFixationProtectionFilter.java:52)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.providers.anonymous.AnonymousProcessingFilter.doFilterHttp(AnonymousProcessingFilter.java:105)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.rememberme.RememberMeProcessingFilter.doFilterHttp(RememberMeProcessingFilter.java:109)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter.doFilterHttp(SecurityContextHolderAwareRequestFilter.java:91)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.basicauth.BasicProcessingFilter.doFilterHttp(BasicProcessingFilter.java:174)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:277)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:175)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662)
Caused by: java.lang.NoClassDefFoundError: Could not initialize class org.huahsin.HibernateUtil
    at org.huahsin.dao.impl.StartDaoImpl.searchAgencyByAdviserKey(StartDaoImpl.java:75)
    at org.huahsin.bo.impl.StartBoImpl.retrieveAgentProfile(StartBoImpl.java:49)
    at org.huahsin.StartBean.getInit(StartBean.java:92)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
    at com.sun.faces.el.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:72)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.ELText$ELTextVariable.writeText(ELText.java:217)
    at com.sun.faces.facelets.el.ELText$ELTextComposite.writeText(ELText.java:141)
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:78)
    ... 64 more
Aug 29, 2012 6:21:39 PM org.apache.catalina.core.StandardWrapperValve invoke
SEVERE: Servlet.service() for servlet [Faces Servlet] in context with path [/MYWEB] threw exception [Could not initialize class org.huahsin.HibernateUtil] with root cause
java.lang.NoClassDefFoundError: Could not initialize class org.huahsin.HibernateUtil
    at org.huahsin.dao.impl.StartDaoImpl.searchAgencyByAdviserKey(StartDaoImpl.java:75)
    at org.huahsin.bo.impl.StartBoImpl.retrieveAgentProfile(StartBoImpl.java:49)
    at org.huahsin.StartBean.getInit(StartBean.java:92)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at javax.el.BeanELResolver.getValue(BeanELResolver.java:87)
    at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:67)
    at com.sun.faces.el.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:72)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:169)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.ELText$ELTextVariable.writeText(ELText.java:217)
    at com.sun.faces.facelets.el.ELText$ELTextComposite.writeText(ELText.java:141)
    at com.sun.faces.facelets.compiler.TextInstruction.write(TextInstruction.java:78)
    at com.sun.faces.facelets.compiler.UIInstructions.encodeBegin(UIInstructions.java:75)
    at com.sun.faces.facelets.compiler.UILeaf.encodeAll(UILeaf.java:176)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1613)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:379)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:126)
    at javax.faces.application.ViewHandlerWrapper.renderView(ViewHandlerWrapper.java:273)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:127)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:101)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:139)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:311)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:304)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:378)
    at org.springframework.security.intercept.web.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:109)
    at org.springframework.security.intercept.web.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.SessionFixationProtectionFilter.doFilterHttp(SessionFixationProtectionFilter.java:52)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.ExceptionTranslationFilter.doFilterHttp(ExceptionTranslationFilter.java:101)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.providers.anonymous.AnonymousProcessingFilter.doFilterHttp(AnonymousProcessingFilter.java:105)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.rememberme.RememberMeProcessingFilter.doFilterHttp(RememberMeProcessingFilter.java:109)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.wrapper.SecurityContextHolderAwareRequestFilter.doFilterHttp(SecurityContextHolderAwareRequestFilter.java:91)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.basicauth.BasicProcessingFilter.doFilterHttp(BasicProcessingFilter.java:174)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.AbstractProcessingFilter.doFilterHttp(AbstractProcessingFilter.java:277)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.ui.logout.LogoutFilter.doFilterHttp(LogoutFilter.java:89)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.context.HttpSessionContextIntegrationFilter.doFilterHttp(HttpSessionContextIntegrationFilter.java:235)
    at org.springframework.security.ui.SpringSecurityFilter.doFilter(SpringSecurityFilter.java:53)
    at org.springframework.security.util.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:390)
    at org.springframework.security.util.FilterChainProxy.doFilter(FilterChainProxy.java:175)
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:236)
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:167)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:395)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:250)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:188)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:166)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:302)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

# python - 程序的通用公式？

> ID：12140238
> 
> 赞同：-5
> 
> 时间：2012-08-27T10:28:04.263
> 
> 标签：python, math

任何人都可以帮助获得通用公式，当 i=1 时，其他数字（2,3,4....5）应该为零（'0'），它应该是一（'1'）。'i' 从 1 开始。请有人帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:35:42.517

尝试这个

```
 result = (i != 1) ? 1 : 0 
```

似乎对于您使用的语言存在一些歧义，但任何支持三元运算符的东西都将以这种方式工作，您可能只需要调整语法。

如果您无法访问三元运算符，则伪代码是

```
 result = 1;
 if (i == 1) {
     result = 0;
 } 
```

在 python 中，这将是

```
result = 1
if i == 1:
    result = 0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:31:54.627

如果是mathematica，那就`sgn(i-1)`足够了。另见[维基百科](http://en.wikipedia.org/wiki/Sign_function "维基百科标志功能")。

# python - 浮点数转换

> ID：12140239
> 
> 赞同：1
> 
> 时间：2012-08-27T10:28:18.873
> 
> 标签：python

如何从两个整数变量创建浮点小数

```
i=1
j=9 
```

无论如何将这两者结合并获得浮点十进制1.9？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:32:59.197

也许这有帮助

```
floatingpoint=float(str(i)+'.'+str(j)) 
```

**编辑**：

```
>>> float('%d.%d' % (i,j))
1.9 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:31:38.230

像这样的东西怎么样

```
>>> i = 1
>>> j = 9
>>> i + j / 10.0
1.8999999999999999 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:35:57.540

不[完全是](http://docs.python.org/tutorial/floatingpoint.html#tut-fp-issues)。

```
>>> float(1+9*0.11)
1.99
>>> 1+9 * 0.1
1.8999999999999999 
```

# ios - 未找到 dwarfdump 命令

> ID：12140241
> 
> 赞同：4
> 
> 时间：2012-08-27T10:28:42.523
> 
> 标签：ios, xcode4, command

Mac OS 10.8，xcode 4.4

当我想执行命令时： dwarfdump --lookup 0x30f425e8 --arch armv7 XyzDemo.app.dSYM

我收到错误：**dwarfdump：找不到命令**

有谁能够帮助我 ？提前致谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-28T08:56:29.427

![在此处输入图像描述](../Images/b2c9d3de8dd5fe62b87db84b0bc46ec7.png)

使用 dwarfdump 命令，你需要通过 Xcodes 设置安装命令行工具

谢谢菲茨！

# linux-kernel - 通过 kexec 引导内核时如何禁用 x2apic 模式

> ID：12140242
> 
> 赞同：1
> 
> 时间：2012-08-27T10:28:45.397
> 
> 标签：linux-kernel

当我通过 kexec 启动内核时，它会启用 x2apic 模式并导致我的主板无法从外部硬件 NMI 重新启动。从 BIOS 引导内核不会启用此模式，我的主板上也没有发生任何问题。

我不确定在 x2apic 模式下内核是否可以成功处理 NMI。

如果有人了解 x2apic 模式，您能帮我解释一下吗？以及如何在通过 kexec 启动内核时禁用 x2apic 模式。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T19:04:07.750

我现在对 x2apic 的作用还不足以告诉您它的作用，但要回答您的第二个问题，将 nox2apic 添加为内核引导选项之一会禁用它。

另见[http://en.wikipedia.org/wiki/X2APIC](http://en.wikipedia.org/wiki/X2APIC)

# javascript - 如何查找包含特定选择器的父元素

> ID：12140246
> 
> 赞同：4
> 
> 时间：2012-08-27T10:29:01.843
> 
> 标签：javascript, jquery, jquery-selectors

假设有以下html结构（1）。
从`$('.child') element`我可以访问`$('.gran-parent') element`制作之类的东西`$('.child').parent().parent();`。

无论如何，我认为这不是一个好方法，因为它不是通用的。
假设在 $('.gran-parent') 和 $('.child') 之间还有其他 div。
什么是最通用的方法来指代哪个类的第一个父级`gran-parent`，从哪里开始`$('.child')`？

```
<div class='gran-parent'>
    <div class='parent'>
        <div class='child'>
        </div>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:30:49.790

你要：

```
$('.child').closest(".grand-parent"); 
```

`.closest`将继续向上遍历，直到找到一个`.grand-parent`. 您也可以这样做`.parents(".grand-parent")`，但这可能会返回多个结果，具体取决于您的 DOM 层次结构，因此您必须这样做：

```
.parents(".grand-parent").eq(0) 
```

或者：

```
.parents(".grand-parent").slice(0) 
```

或者：

```
.parents(".grand-parent:first") 
```

所有这些都不如`.closest()`.

看：

*   [http://api.jquery.com/closest/](http://api.jquery.com/closest/)
*   [http://api.jquery.com/parents/](http://api.jquery.com/parents/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:32:48.120

您正在寻找[.parents()](http://api.jquery.com/parents/)运算符。

例子：

```
$('.child').parents('.gran-parent'); 
```

# php - 设置 php 和 apache 时出错 - 找不到 .dll 文件

> ID：12140248
> 
> 赞同：0
> 
> 时间：2012-08-27T10:29:04.570
> 
> 标签：php, apache, dll

我在我的电脑上设置 php 和 apache。我已经修改了我的 httpd.conf 文件，就像我的书说的那样（所以添加这些行：

```
LoadModule php5_module C:/WebSite/PHP//php5apache2.dll
AddType application/x-httpd-php .phtml .php 
```

)

但是当我尝试启动 apache 时，我得到了这个错误： httpd.conf 第 129 行的语法错误无法将 C:/WebSite/PHP/php5apache2.dll 加载到服务器上。指定的模块无法找到。

该文件肯定在指定目录中。我是新手，我做错了吗？帮助表示赞赏:)

编辑：我实际上得到了这个问题的“风滚草”徽章。有人会费心去看吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-23T21:56:48.400

我刚刚在使用 PHP 5.5 (5.5.0) VC11 和 Apache 2.2.22 的 Windows 7 上遇到了同样的错误。有问题的线是

LoadModule php5_module "C:/php/php5apache2_4.dll"

错误是“……第 129 行……找不到指定的模块。” （是的 - 我检查了这个文件存在并且所有用户都可以访问它！）

我将 PHP 降级到 PHP 5.4 (5.4.16) VC9 - 只进行了一次更改 [见下文 - 他们似乎更改了文件的名称 - 在版本之间] - 效果很好！

LoadModule php5_module "C:/php/php5apache2_2.dll"

这是一个非常简单的修复。

我不确定为什么会这样，但我确实注意到[http://windows.php.net/download/#php-5.5](http://windows.php.net/download/#php-5.5)有一些提到......“VC11 构建需要具有 Visual C++ Redistributable适用于已安装的 Visual Studio 2012 x86 或 x64。” 我只安装了 Visual Studio 2008 - 这似乎与 VC9 兼容（根据同一站点） - 这可能是问题和修复的原因？

# php - APC optcode 缓存如何识别一个类？

> ID：12140249
> 
> 赞同：1
> 
> 时间：2012-08-27T10:29:04.347
> 
> 标签：php, caching, apc

我正在运行具有多个虚拟主机的单实例 Apache 设置，这些主机运行相同代码库的不同版本。

我的意思是一个虚拟主机可以为一个类的一个版本提供服务，而另一个可以为同一个类的第二个版本提供服务（相同的命名空间，相同的名称）。

```
/file/path/host-a/MyClass.php
/file/path/host-b/MyClass.php 
```

有时我会收到一个异常，显示其中一个虚拟主机使用了“错误”版本的类。例如，在主机 b 上，我得到一个脚本的文件路径异常`/file/path/host-a/MyClass.php`

我认为 APC optcode 缓存使用了文件路径，至少作为密钥的一部分，但我担心它只使用一个合格的类名，例如：

```
My\Namespace\MyClass 
```

是这样吗？如果可能，请指出有关此主题的任何文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T10:25:04.627

# 回答

虽然无法找到有关此问题答案的任何文档[php - APC opcode caching on different file versions](https://stackoverflow.com/questions/10549493/apc-opcode-caching-on-different-file-versions)解释说 APC optcode 缓存实际上确实使用定义类的文件路径来区分具有相同名称的类。

# 调试

在@hakra 向我指出 APC 的行为之后，我能够将精力集中在**类加载器**上。我的类加载器`memcached`用作存储类路径的缓存。事实证明，构建缓存键的代码是问题的原因——而不是它看起来的 APC。

因此，如果您遇到类似的情况，您看到加载了不正确的类“版本”，请确保您的类加载器按预期工作。一个明显的线索当然是问题类的文件路径。

# python - 在 Pythonscript 中获取 Netcat 的输出

> ID：12140250
> 
> 赞同：1
> 
> 时间：2012-08-27T10:29:08.947
> 
> 标签：python, shell, netcat

我需要在 python 脚本中从 netcat 获取输出。我目前的代码是

```
 response = subprocess.Popen(["netcat","smtp.myserver.net", "25"], stdout=subprocess.PIPE).stdout.read()
  x = response.find("220 ***") 
```

我希望它检查 200 ***状态并使用它，但它似乎每次循环运行时都在等待我的输入。如何打开 netcat，获取结果，关闭它并继续？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T10:42:10.127

# 不要那样做。

Python 有一个内置的[smtp 客户端库](http://docs.python.org/library/smtplib.html)，可以轻松做到这一点。真的。没有理由*不*使用它。

```
from smtplib import SMTP
SMTP('smtp.myserver.net') 
```

就是这么简单。捕获您关心的异常。

### 如果你*真的*想知道你做错了什么，

您的程序正在等待您输入`quit`。

解决方案？先关闭写端：

```
child = subprocess.Popen(["netcat","smtp.myserver.net", "25"],
    stdout=subprocess.PIPE,
    stdin=subprocess.PIPE)
child.stdin.close()
response = child.stdout.read()
x = response.find("220 ***") 
```

您需要这样做的原因是因为*默认情况下*标准输入仍连接`netcat`到您的终端。

# php - 页面在输入用户 ID 时加载文本/csv 文件

> ID：12140253
> 
> 赞同：1
> 
> 时间：2012-08-27T10:29:26.717
> 
> 标签：php

嗨，我有一个关于 cookie 的问题。

我有一个附属网站，用户在网址中输入他们的 ID，它会重定向到他们自己的网站......

www.mydomain.com/userID ...

我在`XAMPP`..进行开发，现在我需要把它放在使用windows server 2008的服务器中，并使用`WAMP`......问题是，当用户在url中输入他们的ID时，浏览器会提示下载页。

例如，当用户在 url (www.mydomain.com/bejoi) 中输入“Bejoi”时，它会提示一个下载框下载“Bejoi”文件。它会将文件识别为 text/csv ..

但任何其他链接，不会提示下载框..所有其他 php 链接工作正常..

在我的本地主机和我的 LINUX 测试服务器中都可以。有人可以帮忙吗？我会非常感激...

# python - 如何将 2 个具有公共列值的 csv 文件组合在一起，但两个文件的行数不同

> ID：12140259
> 
> 赞同：1
> 
> 时间：2012-08-27T10:29:39.107
> 
> 标签：python, csv

```
file1.csv contains 2 columns: c11;c12
file2.csv contains 2 columns: c21;c22
Common column: c11, c21 
```

例子：

f1.csv

```
a;text_a            
b;text_b            
f;text_f            
x;text_x 
```

f2.csv

```
a;path_a
c;path_c
d;path_d
k;path_k
l;path_l
m:path_m 
```

输出 f1+f2：

```
a;text_a;path_a
b;text_b,''
c;'';path_c
d;'';path_d
f;text_f;''
k;'';path_k
l;'';path_l
m;'';path_m
x;text_x;'' 
```

如何使用python实现它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:15:41.223

使用 csv 模块很容易做到这一点：

```
import csv

with open('file1.csv') as f:
    r = csv.reader(f, delimiter=';')
    dict1 = {row[0]: row[1] for row in r}

with open('file2.csv') as f:
    r = csv.reader(f, delimiter=';')
    dict2 = {row[0]: row[1] for row in r}

keys = set(dict1.keys() + dict2.keys())
with open('output.csv', 'wb') as f:
    w = csv.writer(f, delimiter=';')
    w.writerows([[key, dict1.get(key, "''"), dict2.get(key, "''")]
                 for key in keys]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-22T00:46:46.833

对于基于一个或多个公共列合并多个文件（甚至 > 2），python 中最好和最有效的方法之一是使用“brewery”。您甚至可以指定需要考虑合并哪些字段以及需要保存哪些字段。

```
import brewery
from brewery
import ds
import sys

sources = [
    {"file": "grants_2008.csv",
     "fields": ["receiver", "amount", "date"]},
    {"file": "grants_2009.csv",
     "fields": ["id", "receiver", "amount", "contract_number", "date"]},
    {"file": "grants_2010.csv",
     "fields": ["receiver", "subject", "requested_amount", "amount", "date"]}
] 
```

创建所有字段的列表并添加文件名以存储有关数据记录来源的信息。通过源定义并收集字段：

```
for source in sources:
    for field in source["fields"]:
        if field not in all_fields:

out = ds.CSVDataTarget("merged.csv")
out.fields = brewery.FieldList(all_fields)
out.initialize()

for source in sources:

    path = source["file"]

# Initialize data source: skip reading of headers
# use XLSDataSource for XLS files
# We ignore the fields in the header, because we have set-up fields
# previously. We need to skip the header row.

    src = ds.CSVDataSource(path,read_header=False,skip_rows=1)

    src.fields = ds.FieldList(source["fields"])

    src.initialize()

    for record in src.records():

   # Add file reference into ouput - to know where the row comes from
    record["file"] = path

        out.append(record)

# Close the source stream

    src.finalize()

cat merged.csv | brewery pipe pretty_printer 
```

# javascript - 通过 AJAX/PHP 将数据发送到点击的 url

> ID：12140260
> 
> 赞同：-2
> 
> 时间：2012-08-27T10:29:42.397
> 
> 标签：javascript, php, ajax, url

我似乎无法将数据发送到我点击的链接。我得到的只是我的 php 文件中未定义的索引。

```
<a href="output.php"> Click me </a>

('a').click(function(){

    href = "output.php";

    $.post( 'output.php', { output: "hello"},
         function( data ) {

     window.location = href;
     }
     );

     return false;
  }); 
```

ajax 成功发送，但页面重定向到 output.php 页面，错误提示索引“输出”不存在。

```
<?php

$content = $_POST['output'];
echo $content;

?> 
```

帮助任何人？这太令人困惑了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:21:34.907

好的。我仍然不确定您要做什么，或者您发布的代码与它有何关系。但是，如果您想通过 Ajax 向服务器发送数据，然后让浏览器加载 output.php 并显示该数据，您可以执行以下操作：

在您的 PHP 中：

```
if(isset($_POST["output"])){
    $output = $_POST["output"];
    echo $output;
} elseif (isset($_GET["output"])){
    $output = $_GET["output"];
    echo $output;
} 
```

在您的成功回调中： `window.location = href + "?output="+data`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:36:05.400

这是因为 output.php 被加载了两次：一次是在您的 Ajax 请求中，一次是在您更改 window.location 时。

第二次，$_POST 中没有任何内容，因为此时浏览器没有发出 post 请求。

为清楚起见添加：

如果您使用 Firebug，并取出 window.location 行，您应该会看到 Ajax 请求发出以及来自服务器的响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:37:16.600

尝试这个 ：

演示.php

```
<html>
    <head>
            <title>Demo</title>
    </head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript" ></script>
    <script type="text/javascript">
     $(document).ready(function(){
            $("a").click(function(){

                    $.post( 'output.php', { output: "hello"},function( data ) {
                            $("div").append(data);
        }
        );

            });
          });
    </script>
    <body>
            <a href="#">Click Me</a>       
            <div></div>
    </body>
</html> 
```

输出.php

```
<?php
 echo "<pre>";
 print_r($_POST);
 echo "</pre>";
 exit;  
?> 
```

# java - java jersey静态字段初始化

> ID：12140261
> 
> 赞同：0
> 
> 时间：2012-08-27T10:29:56.747
> 
> 标签：java, static, initialization, jersey

我正在使用 Jersey 创建一个 REST 服务。一些资源（比如一些全局地图、文件）应该在第一个请求到达之前加载（因为加载这些资源需要 20 秒）。所以我创建了一些静态字段（属性）来保存这些资源，因为我相信当我启动这个 REST 服务时它们应该被初始化。

但是，我发现了一个奇怪的问题，即只有在我发送第一个请求时才会加载静态资源。所以对于第一个请求，总是需要 20 多秒才能得到响应，而后面的请求要快得多（因为已经加载了资源）。

谁能解释一下为什么 Java 在任何请求之前都不初始化这些静态字段？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:39:05.823

在 Java 中，类在第一次加载时被初始化。这是您的第一个请求导致类加载。

也许[这](https://stackoverflow.com/questions/7424465/jersey-app-run-initialization-code-on-startup-to-initialize-application)会有所帮助。

# java - 从 java swing 导出和导入数据库 mysql

> ID：12140267
> 
> 赞同：2
> 
> 时间：2012-08-27T10:30:04.923
> 
> 标签：java, mysql, jdbc, export

我想从我的 Swing 应用程序中导出数据库 tp 进行备份，我正在谷歌上搜索，与我合作的唯一方法是这样的：

```
FileWriter fw = null;                   

String path="C:/Users/mypc/Desktop/tesst/back.sql";
String dumpCommand ="mysqldump -u root --password= gestiondestock > "+path;
// Runtime.getRuntime().exec("mysqldump -u root --password= gestiondestock > "+path);
File data = new File(path);

try{
    fw = new FileWriter(data);
    fw.close();
}catch(IOException ex){
    ex.printStackTrace();
}

Runtime rt = Runtime.getRuntime();

try {
    Process proc = rt.exec(dumpCommand);
    InputStream in = proc.getInputStream();
    InputStreamReader read = new InputStreamReader(in,"latin1");
    BufferedReader br = new BufferedReader(read);
    BufferedWriter bw = new BufferedWriter(new FileWriter(data,true));
    String line=null;
    StringBuffer buffer = new StringBuffer();

    while ((line=br.readLine())!=null){
        buffer.append(line+"\n");
    }
    String toWrite = buffer.toString();
    bw.write(toWrite);
    bw.close();
    br.close();
} catch (IOException e) {
    e.printStackTrace();
} 
```

但我只得到日期基础信息而不是 creat 表并插入到....

我只得到这些信息：

## -- MySQL 转储 10.10

-- 主机：localhost 数据库：gestiondestock

* * *

-- 服务器版本 5.1.36-community-log

```
/*!40101 SET @OLD_CHARACTER_SET_CLIENT=@@CHARACTER_SET_CLIENT */;
/*!40101 SET @OLD_CHARACTER_SET_RESULTS=@@CHARACTER_SET_RESULTS */;
/*!40101 SET @OLD_COLLATION_CONNECTION=@@COLLATION_CONNECTION */;
/*!40101 SET NAMES utf8 */;
/*!40103 SET @OLD_TIME_ZONE=@@TIME_ZONE */;
/*!40103 SET TIME_ZONE='+00:00' */;
/*!40014 SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0 */;
/*!40014 SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS,    FOREIGN_KEY_CHECKS=0 */;
  /*!40101 SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='NO_AUTO_VALUE_ON_ZERO' */;
   /*!40111 SET @OLD_SQL_NOTES=@@SQL_NOTES, SQL_NOTES=0 */; 
```

如何解决这个问题并获取有关 sql 文件的所有信息？？，当我尝试在 phpmyadmin 上导出时，我得到了所有信息

dumpCommand 从 cmd 框中手动工作正常

以及导入它的最佳方式！

* * *

### 解决方案

我不能在不运行 shell 的情况下进行重定向，而我在上面没有这样做。所以我必须这样做：

```
 String path="C:/Users/mypc/Desktop/tesst/back.sql";
 String dumpCommand = "mysqldump -u root gestiondestock --result-file="+path; 
```

--result-file="+路径

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:46:16.207

似乎是`mysqldump`命令的问题。而不是这个

```
mysqldump -u root --password= gestiondestock > path 
```

尝试这个，

```
mysqldump -u root -p[root_password] [database_name] > dumpfilename.sql 
```

另请参阅此链接，

[http://www.thegeekstuff.com/2008/09/backup-and-restore-mysql-database-using-mysqldump/](http://www.thegeekstuff.com/2008/09/backup-and-restore-mysql-database-using-mysqldump/)

# sublimetext2 - Sublime Text 2：在文件本身内设置文件语法（作为 Vim 模式行）

> ID：12140270
> 
> 赞同：7
> 
> 时间：2012-08-27T10:30:16.377
> 
> 标签：sublimetext2

在 VIM 中，可以通过编写这样的模式行来强制文件类型

```
# vim:syntax=html filetype=html 
```

我想为 Sublime Text 获得同样的东西。例如，我希望 Sublime Text 2 对我拥有的某些扩展名为 .txt 的文件使用 MarkDown 语法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-04T15:43:51.577

Sublime Text 有一个 Modellines 插件：[https ://github.com/SublimeText/Modelines](https://github.com/SublimeText/Modelines)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-29T13:24:10.307

要对具有特定扩展名的每个文件执行此操作，请在打开文件的情况下转到菜单`View`, `Syntax`，`Open all with current extension as...`然后在此处设置您的首选项。

似乎不可能在本地为每个文件或项目设置它，但你应该看看这个包：[https ://github.com/phillipkoebbe/DetectSyntax](https://github.com/phillipkoebbe/DetectSyntax)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-04-07T16:07:40.940

ST2/3 的包控制中可用的另一个是[https://github.com/kvs/STEmacsModelines](https://github.com/kvs/STEmacsModelines)

使用它非常简单，来自文档：

在文件的前五行中的某处，添加与以下内容匹配的行：

```
-*- key: value; key2: value2 -*- 
```

或者

```
-*- syntax -*- 
```

# iphone - 如何在iOS中绘制如下这样的项目？

> ID：12140271
> 
> 赞同：0
> 
> 时间：2012-08-27T10:30:19.433
> 
> 标签：iphone, ios, xcode

我的目的是我想绘制一个如下图所示的项目：

![在此处输入图像描述](../Images/589f093eb3adbb87f2b34301a209345d.png)

但是要在另一个视图上绘制像下面这样的图像真的很困难。它不是图像，例如值为“off”，如果我们设置 long 值，该值将取决于 string 的值，它会扩展。

![在此处输入图像描述](../Images/6f8dfb6c92705301807e4140b7d9eafb.png)

您能告诉我解决方案，如何解决吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:37:46.083

我想你想在视图上放一个徽章，对吧？

查看[http://www.cocoacontrols.com/platforms/ios/controls/jsbadgeview](http://www.cocoacontrols.com/platforms/ios/controls/jsbadgeview)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:34:17.780

欢迎来到 Stackoverflow

您正在寻找的方法如下：

```
- (UIImage *)resizableImageWithCapInsets:(UIEdgeInsets)capInsets (iOS5 or later) 
```

对于早期的 iO​​S 版本，您拥有：

```
- (UIImage *)stretchableImageWithLeftCapWidth:(NSInteger)leftCapWidth topCapHeight:(NSInteger)topCapHeight 
```

# c# - Metro 应用程序 - 如何滚动到 StackPanel 中的特定控件

> ID：12140273
> 
> 赞同：1
> 
> 时间：2012-08-27T10:30:29.183
> 
> 标签：c#, windows-phone-7, windows-8, microsoft-metro, windows-runtime

在我的 C# windows 8 Metro 应用程序中，我在 ScrollViewer 之上添加了一个 StackPanel。我在 StackPanel 上水平添加了一些控件。在 StackPanel 上添加所有控件后，我想滚动到特定控件并显示该控件（将焦点设置到特定控件）。

请告诉我这样做是否可行。我查看了 ScrollViewer 类参考，有一个名为 ScrollToHorizo​​ntalOffset 的方法，但我不知道如何获取添加到 StackPanel 上的特定控件的偏移量。

StackPanel 中没有这样的方法返回它的孩子的偏移量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:22:40.700

如果可能，我建议您查看类似 ListView 的内容，因为它允许您滚动到列表中的特定项目。但是，如果这不可行，你可以做这样的事情......

```
function scrollTo(int childIndex)
{
            double offset = 0;
            for (int i = 0; i < childIndex; i++)
            {
                var element = stack.Children[1] as FrameworkElement;
                offset += element.ActualWidth + element.Margin.Left + element.Margin.Right;
            }

            if (offset > scroll.ActualWidth)
                scroll.ScrollToHorizontalOffset(offset - scroll.ActualWidth);
            else
                scroll.ScrollToHorizonalOffset(0);
} 
```

scroll 是您的滚动查看器，而 stack 是您的堆栈面板。假设水平布局。这只会将项目带入滚动窗口，它不会将其滚动到最左边缘，因为这并不总是可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:52:52.580

堆栈面板根据他们请求的空间量来布置控件，因此您可以通过在控件之前遍历所有子项并计算每个子项占用多少空间来计算偏移量。

# php - 检查上传的文件是否真的是正确的文件（php）

> ID：12140276
> 
> 赞同：-1
> 
> 时间：2012-08-27T10:30:47.730
> 
> 标签：php, image, file, upload

执行以下步骤以清楚地了解问题：

1.  打开记事本。
2.  输入内容并将其保存为“.png”（或任何其他图像格式）。
3.  尝试将其作为带有扩展验证的图像文件上传。
4.  现在尝试显示它。

预期：上传时显示错误

实际：文件很容易上传，没有任何问题，只有在访问它时才会出现错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:46:57.123

mime_content_type() 是不推荐使用的函数。相反，您可以使用

```
<?php
print_r(getimagesize("listing.png"));
?> 
```

如果这显示错误，则该文件是无效的 png 文件。如果文件有效，则返回一个信息数组。

编辑：如果您仅使用图像，则此方法有效。

# javascript - JavaScript：getElementsByTagName 返回空节点列表

> ID：12140280
> 
> 赞同：0
> 
> 时间：2012-08-27T10:30:58.870
> 
> 标签：javascript, iframe, gmail

我正在 gmail 主页上尝试以下代码：

```
var iFrame = document.getElementById('canvas_frame');

var innerDoc = (iFrame.contentDocument) ? iFrame.contentDocument : iFrame.contentWindow.document;

var tag = innerDoc.getElementsByClassName('vI8oZc cS'); 
```

tag 总是作为一个空的 nodeList 出现。我在调试器中检查这个，我可以看到第一个 div 是此类类型“vI8oZc cS”。如何获取节点元素而不是空列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:19:30.447

如果 iframe 的来源不在父页面所在的同一站点上，则浏览器安全策略不允许此类操作。

# android - java.lang.RuntimeException：无法启动活动 ComponentInfo{com.test.cal/com.test.cal.CalculatorActivity}：java.lang.NullPointerException

> ID：12140282
> 
> 赞同：0
> 
> 时间：2012-08-27T10:31:11.797
> 
> 标签：android

你好。我试图为 Android 创建一个计算器应用程序。尝试编写代码以显示两个按钮，以便单击其中一个按钮将其显示在文本框中。

代码是：

```
package com.test.cal;

android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class CalculatorActivity extends Activity implements OnClickListener {
    EditText ans;
    Button b1,b2;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {

        ans = (EditText) findViewById(R.id.ans);
        b1=(Button) findViewById(R.id.one);
        b2=(Button) findViewById(R.id.two);
        b1.setOnClickListener(this);
        b2.setOnClickListener(this);

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
    }

    public void onClick(View arg0) {
        // TODO Auto-generated method stub
        switch(arg0.getId())
        {
        case R.id.one:
                ans.setText(1);
            break;
        case R.id.two:
                ans.setText(2);
            break;
        default:Toast.makeText(this, "fuckoff", 1000);
            break;  
        }
     }
   } 
```

单击空点异常转到：

```
b2=(Button) findViewById(R.id.two); 
```

线。请帮忙。我是初学者。搜索堆栈溢出，但不明白与之相关的几个答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:32:22.880

实际上，您的所有视图都是**空**的，因为您之前试图定义（访问）视图`setContentView(R.layout.main);`

只需更改代码行，

```
@Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ans = (EditText) findViewById(R.id.ans);
        b1=(Button) findViewById(R.id.one);
        b2=(Button) findViewById(R.id.two);
        b1.setOnClickListener(this);
        b2.setOnClickListener(this);

    } 
```

放

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main); 
```

在访问**main.xml**文件中定义的视图之前..

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:35:41.930

请更改 oncreate。像这样写

```
@Override
    public void onCreate(Bundle savedInstanceState) {
       super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ans = (EditText) findViewById(R.id.ans);
        b1=(Button) findViewById(R.id.one);
        b2=(Button) findViewById(R.id.two);
        b1.setOnClickListener(this);
        b2.setOnClickListener(this);

    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:33:46.713

把下面的代码

```
super.onCreate(savedInstanceState);
setContentView(R.layout.main); 
```

**在访问定义的视图之前（按钮和编辑文本的初始化）。**

**在 setContentView(R.layout.main); 之后添加以下代码很重要 否则你会得到一个异常并且你的应用程序会崩溃。这样做的原因是，您不能在拥有视图之前使用 findViewById()，因为在此调用之前 UI 不存在。**

```
ans = (EditText) findViewById(R.id.ans);
b1=(Button) findViewById(R.id.one);
b2=(Button) findViewById(R.id.two);
b1.setOnClickListener(this);
b2.setOnClickListener(this); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T10:34:43.600

称呼

```
setContentView(R.layout.main); 
```

在尝试访问您的按钮和编辑文本之前

```
public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ans = (EditText) findViewById(R.id.ans);
        b1=(Button) findViewById(R.id.one);
        b2=(Button) findViewById(R.id.two);
        b1.setOnClickListener(this);
        b2.setOnClickListener(this);
    } 
```

# jquery - 模拟破坏后重新初始化 NivoSlider

> ID：12140284
> 
> 赞同：0
> 
> 时间：2012-08-27T10:31:21.087
> 
> 标签：jquery, initialization, nivo-slider

nivoslider 不包含销毁或初始化方法。使用以下代码模拟破坏后：

```
$('#slider').data('nivo:vars').stop = true;
$('#slider').find('div.nivo-slice').remove();
$('#slider').find('div.nivo-caption').remove();
$('#slider').find('div.nivo-controlNav').remove();
$('#slider').removeAttr("style");
$('#slider').empty();                               
$(window).unbind('keypress'); 
```

并`$('#silder').nivoSlider()`再次使用它卡在第一张图像上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:28:03.473

好的，最好的方法是忘记所有破坏性的东西，并用它的初始状态替换 silder。假设silder的初始状态是：

```
<div id="silder" class="nivoSlider"></div> 
```

然后，一步完成销毁和初始化的最佳方法是执行以下操作：

```
$('#silder').replaceWith('<div id="slider" class="nivoSlider"></div>'); 
```

# mysql - 按从存储过程 MYSQL 中调用的函数返回的值排序

> ID：12140287
> 
> 赞同：1
> 
> 时间：2012-08-27T10:31:31.200
> 
> 标签：mysql, stored-procedures, stored-functions

我想按 dist 排序：**dist**是从名为**isNeighbour**的函数返回的双精度值它会抛出错误，因为 dist 未定义：字段列表中的未知列“dist”

```
DELIMITER $$

DROP PROCEDURE IF EXISTS `connectarabs`.`maxEdges` $$
CREATE DEFINER=`root`@`localhost` PROCEDURE `maxEdges`(id int,lat double,lon double,rad double)
BEGIN

if lat is null then

set lat=(select a.latitude from account a where a.id=id);
end if;
if lon is null then
set lon=(select a.longitude from account a where a.id=id);
end if;
 SELECT friends.* FROM account friends left  join account_friendTest me on (friends.id=me.second_account)
  or (friends.id=me.first_account) where (me.first_account=id OR me.second_account=id) AND friends.id <> id AND
     (   ((select isNeighbour(lat,lon,friends.latitude,friends.longitude,rad) as dist )<rad)   ) order by dist;
END $$
DELIMITER ; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:36:37.813

这是因为您不能在子句中使用别名列并在`WHERE`子句中使用该列`ORDER BY`。相反，您需要`SELECT`该列并使用`HAVING`子句来过滤它：

```
SELECT friends.*,
       isNeighbour(lat,lon,friends.latitude,friends.longitude,rad) AS dist
FROM account friends
     LEFT JOIN account_friendTest me
        ON (friends.id=me.second_account)
           OR (friends.id=me.first_account)
WHERE (me.first_account=id OR me.second_account=id) AND
      friends.id <> id
HAVING dist < rad
ORDER BY dist; 
```

# libgdx - Libgdx 瓷砖地图绘制错误的瓷砖

> ID：12140289
> 
> 赞同：1
> 
> 时间：2012-08-27T10:31:43.567
> 
> 标签：libgdx

我正在尝试在 libgdx 中制作平铺地图。我已经制作了所有的平铺图像并使用 TexturePacker2 来打包它们。当我加载游戏时，它正在渲染地图但使用了错误的图块。它似乎使用列优先索引，而平铺地图编辑器首先使用行。

例如，我打包的平铺图像是 5x5 网格。我在编辑器中使用了第 3 行第 5 列（另存为 15）的图块，然后 libgdx 使用了第 5 行第 3 列的图块。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:54:04.867

打包文件中的索引我们都错了。我不确定它们为什么错了，但我手动更正了它们，以便左上角的图块是 index: 0 并且右边是 1 等等，直到右下角的 24。

我的地图现在可以正确绘制。

# html - 自动更新发布文章页面中富文本字段的标记

> ID：12140295
> 
> 赞同：0
> 
> 时间：2012-08-27T10:32:16.217
> 
> 标签：html, sharepoint, sharepoint-2010

我有一个 Sharepoint 2010 网站，里面有一本手册，我想用 RichHtmlField 编写。我希望每个 h1 标题都被一个锚点包围，这样我就会得到类似的东西

```
<a name="_section_1"><h1>This is my heading for section 1</h1></a> 
```

我希望办公室用户可以简单地做到这一点。最简单的方法是什么？我尝试在用户更新后使用 ItemUpdated 事件接收器来修改标记，但这似乎是一种非常狡猾且有问题的方法。有没有更简单的方法来完成这一切？也许通过向功能区添加自定义标记或样式？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:09:14.940

我建议在页面呈现后使用 javascript (jQuery) 来更改元素。它看起来像这样（[参考](http://api.jquery.com/wrap/)）：

```
<script type="text/javascript">
$(document).ready(function(){
    var counter = 1;
    $(h1).wrap(function(){
        var name = "_section_" + counter;
        return "<a name='" + name + "' /a>"
    });
});
</script> 
```

# usb - 包含输入和输出使用情况的 USB HID 报告如何工作？

> ID：12140297
> 
> 赞同：4
> 
> 时间：2012-08-27T10:32:31.837
> 
> 标签：usb, hid

USB HID 报告描述符可以描述同一报告中的输入和输出使用。这到底是什么意思？

是否在轮询设备时发送整个报告，包括（未使用的）输出使用位？还是由设备来构建没有输出使用位的输入报告，尽管报告描述符中描述了这些？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-08-20T23:15:43.823

报告描述符由 OS @ 枚举请求。这是操作系统必须知道使用情况及其相关报告 ID 和位/字节位置的唯一方法。还有比这更多的细节，但所有信息都在那里使用设备使用情况，以及它们是输入、输出还是功能。输入是定向到设备的使用/数据。输出是设备的使用/数据输出。特征是可以读取和设置的特征；setFeature 和 getFeature。

报告描述符可以并且经常包含混合在单个报告描述符中的输入、输出和特性。

查看“人机接口设备 (HID) 的设备类定义”@usb.org 中的“6.2.2 报告描述符”部分，并查看同一文档中的示例报告描述符以了解其工作原理。

编辑：我所说的是正确的，关于“报告描述符可以并且经常确实包含混合在单个报告描述符中的输入、输出和功能。” 奥列格·马祖罗夫（Oleg Mazurov）表示这不是真的。我认为他将“报告描述符”与“报告 ID”混淆了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-18T17:19:34.107

这是不正确的。您不能在单个报告描述符中混合输入、输出和功能。Usb.org 有一个免费的报告检查工具，您可能想看看它。

# php - Zend 框架中的 PEAR 配置

> ID：12140300
> 
> 赞同：1
> 
> 时间：2012-08-27T10:32:41.290
> 
> 标签：php, zend-framework

有谁知道如何在 Zend 框架中配置 PEAR。我通过终端安装了 pear。我在 zend 库中调用它 require_once 'PEAR/Exception.php'; 它不起作用。请帮忙

# ruby-on-rails-3 - Rails Rspec & FactoryGirl 测试协会

> ID：12140302
> 
> 赞同：2
> 
> 时间：2012-08-27T10:32:46.997
> 
> 标签：ruby-on-rails-3, rspec, tdd

我必须在接受嵌套属性的地方建模。我想构建一个测试以确保嵌套属性不能为空白等。我真的不明白如何进行测试。

我的两个简单模型：

```
# SeoMapping Model
class SeoMapping < ActiveRecord::Base
  belongs_to :mappingtable, :polymorphic => true
  attr_accessible :seo_url
  validates :seo_url, :presence => true, :uniqueness => true   
end

# Page Model
class Page < ActiveRecord::Base
  has_one :seo_mappings, :as => :mappingtable, :dependent => :destroy
  accepts_nested_attributes_for :seo_mappings 
  attr_accessible :content, :h1, :meta_description, :title, :seo_mappings_attributes
  .........
end 
```

这是我的 Page 和 Seo 工厂：

```
FactoryGirl.define do
  factory :page do |f|
    seo_mapping
    f.title { Faker::Name.name }
    f.h1 { Faker::Lorem.words(5) }
    f.meta_description { Faker::Lorem.words(10) }
    f.content { Faker::Lorem.words(30) }
  end
end

FactoryGirl.define do
  factory :seo_mapping do |f|
    f.seo_url { Faker::Internet.domain_word }
  end
end 
```

我的测试：

```
require 'spec_helper'

describe Page do
  it "has a valid factory" do
    expect(create(:page)).to be_valid
  end

  # Cant get this spec to work?
  it "it is invalid without a seo_url" do
    page = build(:page)
    seo_mapping = build(:seo_mapping, seo_url: nil)
    page.seo_mapping.should_not be_valid
    # expect(build(:page, :seo_mapping_attributes[:seo_url] => nil)).to_not be_valid
  end

  it "is invalid without a title" do
    expect(build(:page, title: nil)).to_not be_valid
  end
  ...............
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:45:19.533

通常对于这类事情，我会使用一个名为[shoulda_matchers](https://github.com/thoughtbot/shoulda-matchers)的 gem 。它使您可以简单地断言您的模型验证特定属性的存在。

```
it { should validate_presence_of(:seo_url) }
it { should validate_uniqueness_of(:seo_url) } 
```

如果您不想使用 gem，请尝试以下操作：

```
seo_mapping = build(:seo_mapping, seo_url: nil)
page = build(:page, seo_mapping: seo_mapping)
page.should_not be_valid 
```

# javascript - 带或不带 /g 的正则表达式（CoffeeScript/JavaScript）

> ID：12140303
> 
> 赞同：2
> 
> 时间：2012-08-27T10:32:47.290
> 
> 标签：javascript, regex, coffeescript

为什么如果我添加`/g`到`lineRoute` `parseRoute`函数只返回一次？

```
pkt = "Record-Route: <sip:10.1.20.40;lr;r2=on>\r\nRecord-Route: <sip:10.1.20.40:80;transport=ws;r2=on;lr=on>\r\n"

parseRoute = (pkt) ->
        lineRoute = /Route\:/
        route = ""
        for line in pkt.split '\r\n'
            if lineRoute.test line
                tmp = line.split ': '
                route += tmp[1] + ", \r\n"
        return route 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:01:20.547

当您重用 RegEx 对象时，每次调用`test`都将从上一个匹配项的索引开始。因此，在每次调用测试之间，您必须重置此索引：

```
lineRoute.lastIndex = 0 
```

你的功能：

```
parseRoute = (pkt) ->
    lineRoute = /Route\:/
    route = ""
    for line in abc
        lineRoute.lastIndex = 0;
        if lineRoute.test line
            tmp = line.split ': '
            route += tmp[1] + ", \r\n"
    return route 
```

此属性仅在设置了全局标志时使用`/g`。这就解释了为什么当您不使用全局标志时它会起作用。

在此处阅读有关它的更多信息[https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Regular_Expressions)（搜索`lastIndex`）

# drupal - 如何将表单提交的数据发送到 Drupal 中的贝宝？

> ID：12140312
> 
> 赞同：1
> 
> 时间：2012-08-27T10:33:12.053
> 
> 标签：drupal, paypal, integration, paypal-sandbox

我需要实现与 webform 的贝宝集成

所以我已经安装了 webform 和 webform_paypal 模块

但我的问题是填写所有表单信息，通过单击按钮我应该重定向到贝宝并输入表单详细信息

我已经从后端按钮设置按钮 - “贝宝按钮”和类型“Buynow”

但我得到一个错误

```
 "Some required information is missing or incomplete. Please correct your entries and try again." 
```

那么如何从贝宝模块设置表单数据和商家详细信息？

提前致谢

# facebook-fql - 为什么 Insights 数据有 7 天的延迟？

> ID：12140323
> 
> 赞同：1
> 
> 时间：2012-08-27T10:34:09.247
> 
> 标签：facebook-fql, delay, facebook-insights

我注意到我从 FQL 洞察表或我的应用管理站点的“洞察”选项卡中获得的数据有 7 天的延迟。几天前的延迟大约是 2 天。

例如：
假设今天是 2012-8-27，

```
SELECT metric, value 
FROM insights 
WHERE object_id=297730130255615 
AND metric='application_active_users' 
AND end_time=end_time_date('2012-08-21') 
AND period=period('day') 
```

我没有数据。我可以从 8-20 及之前获取数据。

有什么方法可以获得更新的 Insights 数据？我的项目无法承受如此缓慢的周转时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T21:04:32.180

这仍然是一个问题吗？我能够运行您粘贴的查询并返回结果。

# mysql - 预期的 Mysql 查询

> ID：12140328
> 
> 赞同：0
> 
> 时间：2012-08-27T10:34:27.557
> 
> 标签：mysql

我想从下表中得到这样的结果......，

预期结果 ：

```
Fldempployee           flddept       Date          Day          Week off 
00625267-Karthick S    Corporate     04-25-2012    Wednesday
                             (or)
00625267-Karthick S    Corporate     04-28-2012    Saturday     Week end
                             (or)
00625267-Karthick S    Corporate     04-29-2012    sunday    Week end
                             (or)
00625267-Karthick S    Corporate     04-27-2012    Friday 
```

我的表结构是这样的。

```
F_id    flddept     fldemployee         fldintime   fldouttime  fldlateafter    fldearlybefore  fldweekoff  fldshiftname        fldassigndate   fldfromdate fldtodate   fldrefid
1       Corporate   00625267-Karthick S 09:30 am    06:15 pm    09:30 am        06:15 pm        Sat,Sun,    COR-General Shift      04-25-2012   04-01-2012  05-31-2012 
```

在 fldweekoff 列中有两个值 sat 和 sunday。可能是星期一和星期三。我想搜索特定日期的记录意味着上面的一条记录显示为与 week off 字段一样。特定日期不在 week off 意味着它应该显示空值..'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:20:45.990

试试这个

SELECT Fldempployee,flddept,fldassigndate AS date,DAYNAME(fldassigndate) as day, if(SUBSTRING(DAYNAME(date),1,1)='S','weekend','weekdays') as week-off from your_tableName;

此处：根据“fldassigndate”列显示天/休列。如果您提供 fldassigndate(04-25-2012)，则意味着它会给您这样的结果。

Fldempployee-----flddept-------日期--------日期--------
周休 00625267-Karthick S Corporate 04-25-2012 周三工作日，
否则请发布您的查询
干杯

# mysql - 请求批准数据库模型

> ID：12140331
> 
> 赞同：1
> 
> 时间：2012-08-27T10:34:43.380
> 
> 标签：mysql, database, database-design, normalization

我对以下场景建模的有效方法有疑问：

我们有一个“请求”，它可以有以下状态：

*   待办的
*   得到正式认可的
*   被拒绝
*   取消

请求由用户发出，并且可以由一个或多个用户（具有更高角色）批准/拒绝。有一些规则可以决定应将请求分配给哪个用户进行批准，并且只有在相应列表中的所有用户都批准时，才能真正获得批准。

我现在有一个包含必要信息的请求表和一个用户表。我必须保存以下信息：需要批准请求的用户以及他们如何“投票”。

我怎样才能以有效的方式设计这个？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:40:42.210

我会使用`votes`带有列的表`request_id`，`user_id`和`vote`。

创建新请求时，为每个必须批准它的用户插入一行`votes`（new_request_id，approver_id，0）。

当用户批准时，设置`vote`为 1。如果用户拒绝，则设置为 -1。这样 0 表示“还没有投票”。

您还可以使用两张表，一张用于投票，一张用于需要的批准者。但我没有看到很大的优势。当然，如果需要，您可以为投票的时间戳添加一列。

# php - 当用户单击窗口时，java脚本会发出一条消息

> ID：12140332
> 
> 赞同：1
> 
> 时间：2012-08-27T10:34:50.817
> 
> 标签：php, javascript

我正在开发一个 php 站点。我想在用户单击窗口中的任何位置时使用 java 脚本代码来获取警报消息。我正在使用 window.onclick=function name()

```
function function name()
{
alert('message');

} 
```

但它不工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:37:37.027

您分配的点击处理程序错误，请尝试

```
window.onclick = name; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:37:20.927

`function function name()`这条线制作问题。您将函数声明为两次。因为这个 javascript 正在破坏。

像这样使用

```
function name()
{
 alert('sds');
} 
```

然后像这样将函数分配给单击处理程序。

```
window.onclick = name; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:37:23.973

它一定要是

```
function name()
{
alert('message');

} 
```

然后你需要使用`window.onclick='name()';`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T10:42:14.713

```
document.onclick = clickMe;    
function clickMe()
    {
        alert("clickMe");
    } 
```

window.onclick 在 IE8 中测试时不起作用。所以显然底线是 document.onclick 是首选。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T10:37:49.740

采用`document.onclick = yourfunction() {}`

# objective-c - 计算器应用程序中的 +/- 和根按钮

> ID：12140337
> 
> 赞同：-2
> 
> 时间：2012-08-27T10:35:24.547
> 
> 标签：objective-c, ios, cocoa-touch, calculator

我正在尝试制作一个计算器应用程序，有人建议使用以下代码进行基本操作（加法，减法......）；

```
 if ([operand isEqualToString:@"+"])
           lastKnownValue += currentValue;

    else if ([operand isEqualToString:@"-"])
           lastKnownValue -= currentValue;

    else if ([operand isEqualToString:@"X"])
           lastKnownValue *= currentValue;

    else if ([operand isEqualToString:@"/"]) 
```

在哪里

```
 lastKnownValue 
```

用于在使用操作数之前保存输入数字，并且

```
 currentValue 
```

在屏幕上显示 lastKnownValue。
（操作是单独的按钮。）

它确实有效，但我将如何制作不需要输入第二个数字或点击“EQUALS”按钮的操作按钮，例如 +/-、根、平方等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:40:04.483

您对 currentvalue 执行操作，然后用结果更新 currentValue，并刷新显示。将 lastknownValue 设置为 nil。

编辑：

```
self.currentvalue = sqrt(current value);
self.lastknownValue = nil
[self.view setNeedsDisplay]; 
```

# javascript - 是否可以配置 eclipse ee 以在 java 项目的 js 文件中的 javascript 代码中自动完成？

> ID：12140343
> 
> 赞同：0
> 
> 时间：2012-08-27T10:35:52.883
> 
> 标签：javascript, eclipse

我正在Java上开发一个Web应用程序，并且那里有许多js文件。是否可以配置 eclipse ee 以在 java 项目的 js 文件中的 javascript 代码中自动完成？

如果可能，怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:28:31.400

右键单击项目（在项目或包资源管理器中），然后从配置菜单中，将其设为 JavaScript 项目。这不会从项目中删除任何 Java 功能，它只会使其能够同时具有 JavaScript 项目的功能。

# selenium - 使用 PageFactory (Selenium-WebDriver) 编写测试用例。好处？

> ID：12140344
> 
> 赞同：0
> 
> 时间：2012-08-27T10:35:54.927
> 
> 标签：selenium, selenium-webdriver, browser-automation, test-framework

在 Selenium2 中编写测试用例时采用 PageFactory 方式是一种好习惯吗？如果是，为什么？

坦率地说，我在编写测试用例时从未使用过它们，也没有错过它。但我想知道使用 PageFactory 比不使用它有什么优势。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T13:08:24.380

从我的角度来看，优势一方面在于，所有 id 和 xpaths 只在代码中的一个位置，另一方面是实现和测试本身之间的抽象层。

这将允许非程序员测试对我有用的网站，因为有些人确切地知道工作流是什么以及哪些功能是最重要的，但根本不属于开发团队或工程师。

最后但同样重要的是，[PageFactory](http://code.google.com/p/selenium/wiki/PageFactory)术语非常有用。

基于这些原因，我们决定从 500 多个 Selenium 1 测试用例切换到带有 PageObjects 的 Selenium 2。并尝试通过提高可维护性、可用性和可扩展性来补偿创建 PO 的工作量，这肯定会超过标准测试执行的工作量

# sql - 两个表之间的连接查询，第一个表有几个字段引用另一个表中的相同字段

> ID：12140345
> 
> 赞同：0
> 
> 时间：2012-08-27T10:35:56.120
> 
> 标签：sql, join, foreign-keys

我必须在现有的 SQL 数据库上构建一个应用程序，我遇到了这种情况。

有一个表（称为它`T1`），其中几个字段引用另一个表（`T2`）中的值，该表基本上仅由 2 个字段组成，`Id`并且`Name`. 因此，`T2`拥有不同性质和意义的数据，因为`T1`与之相关的领域是非常不同的类型。（在我看来，这是一个不寻常的设计。）

我的问题：鉴于这种设计，我如何构建一个连接查询以获得`T2.Name`与每个`T1`字段相关的值。

**编辑**

我可以通过对每个字段进行一次查询来得到我想要的：

```
SELECT t2.name AS name1
FROM t1
INNER JOIN t2
ON t1.field1 = t2.id;

SELECT t2.name AS name2
FROM t1
INNER JOIN t2
ON t1.field2 = t2.id;

SELECT t2.name AS name3
FROM t1
INNER JOIN t2
ON t1.field3 = t2.id; 
```

但这是无稽之谈。那么如何将所有这些打包在一个查询中呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:34:08.873

您需要对t2 的引用进行[别名](http://en.wikipedia.org/wiki/Alias_%28SQL%29)化以获取相应的名称：

```
SELECT alias1.name AS name1,
       alias2.name AS name2,
       alias3.name AS name3
  FROM t1
 INNER JOIN t2 alias1
    ON t1.field1 = alias1.id
 INNER JOIN t2 alias2
    ON t1.field2 = alias2.id
 INNER JOIN t2 alias3
    ON t1.field3 = alias3.id; 
```

如果外键可以为空，您可能希望用左连接替换内部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:43:59.393

在没有看到表结构的情况下，您可以执行以下操作：

```
SELECT t1.col1, 
    t1.col2, 
    t1.id as t1_id, 
    t2.id as t2_id, 
    t2.name as t2_name
FROM t1
INNER JOIN t2
    ON t1.id = t2.id 
```

由于您要连接表，因此您只需为出现在两个表中的列提供不同的别名。

根据您的更新，您应该能够将这 3 个查询合并为一个：

```
SELECT t2.name AS name1
FROM t1
INNER JOIN t2
    ON t1.field1 = t2.id
    OR t1.field2 = t2.id
    OR t1.field3 = t2.id 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:05:39.820

您有什么理由不能在您的联接中使用 OR 吗？所以：

```
SELECT t2.name AS name3
FROM t1, t2
WHERE t1.field1 = t2.id
OR t1.field2 = t2.id
OR t1.field3 = t2.id; 
```

如果由于某种原因您不能，那么您可以使用`UNION`将所有查询的结果组合在一个查询中。我不知道您使用的是哪个 RDBMS，但对于 postgres，您可以在此处找到信息： [http ://www.postgresql.org/docs/8.3/static/queries-union.html](http://www.postgresql.org/docs/8.3/static/queries-union.html)

对于任何其他的 DBMS 名称和“UNION”的快速谷歌应该给你你所需要的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:29:39.090

尝试这样的事情，

> SELECT t2.name AS name1，
> （当 t1.field1 = t2.id 然后 'Type1' 当 t1.field2=t2.id 然后 'Type2' 否则 'Type3' 结束）作为 Type
> FROM t1
> INNER JOIN t2 ON t1.field1 = t2.id
> 或 t1.field2=t2.id
> 或 t1.field3=t2.id

# facebook - Facebook 应用程序类型

> ID：12140356
> 
> 赞同：0
> 
> 时间：2012-08-27T10:36:33.957
> 
> 标签：facebook, mobile, canvas, web

我们计划实施 Facebook 应用程序，以便更轻松地访问我们的一项服务。

我们的主要要求是 - 支持桌面和移动平台。- 使用 Facebook 凭据注册/登录。- 能够通知用户某些事件。

似乎 Canvas 应用程序无法在移动平台上运行。移动网络应用程序无法向用户发送“应用程序”请求/通知。什么是适合我们解决方案的 Facebook 应用程序类型？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:50:57.997

Facebook 在开发者应用程序中提供了一个移动 Web URL，当他们点击您的 Canvas URL 时，他们也会自动引导移动用户。因此，如果您有一个响应式设计的页面，您可以为 Canvas URL 和 Mobile Web URL 使用相同的 URL。

至于通知 - 这取决于您的需求 - 您可以使用[Requests](http://developers.facebook.com/docs/channels/#requests)

因此，在回答您的问题时 - 您可以使用不止一种应用程序类型，听起来您需要 Canvas 和 Mobile Web。

# ruby-on-rails - 验证仅添加一个人的传记

> ID：12140361
> 
> 赞同：0
> 
> 时间：2012-08-27T10:36:53.050
> 
> 标签：ruby-on-rails

我有两个模型用户和传记，两者都有一对一的关联，我想用户只添加一个传记..这是模型：-

```
 class Biography < ActiveRecord::Base
  attr_accessible :biography, :date, :title, :individual_id  
  belongs_to :user
 end

 class User < ActiveRecord::Base
  has_one :biography
 end 
```

我如何验证用户以便他只能添加一份传记。请帮忙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:44:19.567

您已经查看了此[链接。（资源）](http://guides.rubyonrails.org/association_basics.html)

> belongs_to 关联建立了与另一个模型的一对一连接，这样声明模型的每个实例“属于”另一个模型的一个实例。
> 
> has_one 关联还建立了与另一个模型的一对一连接，但语义（和结果）有所不同。这种关联表明模型的每个实例都包含或拥有另一个模型的一个实例。

但是如果你愿意，你可以添加一个 :before_save 方法来检查 user.biography 不会返回意外的东西，但我认为这不是必需的。

评论后编辑：

尝试类似 before_filter 的东西...

```
before_filter :check_user, :only => [:new] 
```

这将在调用控制器操作之前调用该方法。然后，您可以创建方法来检查 current_user 是否有传记并将其引导至该传记。这是一个起点。。

```
def check_user
 current_user.nil? ? redirect_to(new_biography_path) : redirect_to(edit_biography_path) 
end 
```

希望能帮助到你。

# grails - 部署在 Tomcat6 上时的 Grails 1.3.7 UTF-8 问题

> ID：12140362
> 
> 赞同：1
> 
> 时间：2012-08-27T10:37:02.920
> 
> 标签：grails, utf-8, tomcat6

我正在尝试部署一个在 1.3.7 中创建的应用程序，该应用程序从桌面应用程序接收通知，并且根据用户的语言，将发送特定语言的“谢谢”电子邮件。电子邮件是使用 javamail MimeMessageHelper 从模板创建的，如下所示：

```
 MimeMessageHelper helper = new MimeMessageHelper(message, true, "UTF-8");
 helper.setFrom(new InternetAddress(config.td.mail.from.email,config.td.mail.from.text))
 helper.setTo((mailDetails.to) as String)
 helper.setSubject(config.td.mail.from.regSubject)
 helper.setText(buildRegBody(mailTemplate, mailDetails), true) 
```

实际的 mailTemplate 文件都以 UTF-8 编码。在本地运行应用程序时，发送的电子邮件没有任何错误，但在部署到 Tomcat 时，电子邮件文本中的任何国际字符都将替换为：������。在使用正确的 UTF-8 排序规则将国际字符写入 MySQL 数据库时，我遇到了类似的问题。

我的配置文件包括以下行：

```
grails.views.default.codec = "none"
grails.views.gsp.encoding = "UTF-8"
grails.converters.encoding = "UTF-8" 
```

我尝试了以下方法无济于事：

*   向 Tomcat 服务器 xml 中的连接器元素添加了 UTF-8 编码语句
*   确保 charEncodingFilter 在 web.xml 的链中排在第一位
*   使用参数创建了我的生产战争：'-Dfile.encoding=UTF-8 war'

这些似乎解决了大多数其他用户的问题，现在我已经没有想法了 - 任何帮助或建议将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T09:11:17.553

*“buildRegBody 是做什么的？你能发布代码吗？”* Sergio，这是一种从模板构建电子邮件正文的小方法。

Loteq，谢谢你的建议。我确实对所有文件进行了正确编码，并且将 Tomcat 设置为将文件编码为 UTF-8。问题在于运行 Tomcat 的 JAVA。通过添加解决：

-Dfile.encoding=UTF-8

到 Catalina.sh 的“JAVA OPTS”或 /etc/init.d/Tomcat 脚本（取决于您的环境）以及在 Tomcat 服务器 xml 的连接器元素中设置编码语句（见上文）。我希望这可以避免其他人引起我的头痛！

# azure - 如何将 dotnetnuke 网站发布到 azure？

> ID：12140371
> 
> 赞同：1
> 
> 时间：2012-08-27T10:37:30.833
> 
> 标签：azure, web, dotnetnuke, publish

我正在考虑将 dotnetnuke 网站迁移到 Azure。我需要运行该站点的暂存版本和生产版本。

我看过使用 Azure 网站，但目前自定义域不支持 SSL，因此不能用于生产网站。我已将暂存站点迁移到 Azure 网站，现在有许多用于发布更新的选项（ftp、git、使用 Web 矩阵）。

由于 Azure 网站的限制，我使用 DNN 加速器为生产环境创建了一个云服务。这种设置将允许我控制 IIS 并因此管理 SSL 证书（我认为）。

我遇到的问题是似乎没有任何发布选项。我可以发布的唯一方法是通过 RDP 连接到 Azure 实例，然后将网站文件复制到文件系统上。

还有其他发布方式吗？我已经考虑将网站转换为 WAP，但我相信这在更新到新的 DNN 版本时会产生影响。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:45:46.870

您永远不应该通过 RDP 发布您的应用程序，因为这些更改是非持久性的（这意味着您发布的内容可能会在硬件故障/...后消失）。添加新实例也意味着这些实例没有您之前发布的文件。

我建议您首先查看[DotNetNuke Azure 加速器](http://dnnazureaccelerator.codeplex.com/)。如果这不符合您的需求，您可能总是尝试自己构建一些东西，但如果您想使用常规网站而不是 Web 应用程序，我不会指望 Visual Studio 支持。在这种情况下，您可能希望查看[从命令行创建包](http://blog.smarx.com/posts/building-running-and-packaging-windows-azure-applications-from-the-command-line)并使用启动脚本在 IIS 中添加您的网站。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:47:12.010

听起来您需要使用启动任务将文件安装在正确的位置以获取 Web 角色（云服务） Smarx 在这里有一个很好的概述，MSDN 也有丰富的信息[http://blog.smarx.com /posts/windows-azure-startup-tasks 简介](http://blog.smarx.com/posts/introduction-to-windows-azure-startup-tasks)

另一种选择是带有持久 VM 的 Azure 的 IAAS，请注意更多工作，云服务将是最有效和最正确的解决方案......

# eclipse-juno - 如何在 Eclipse Juno 中打开串行终端？

> ID：12140381
> 
> 赞同：3
> 
> 时间：2012-08-27T10:38:01.797
> 
> 标签：eclipse-juno

在以前的 Eclipse 版本中，我已经能够打开一个显示串行终端/控制台的视图。

如何在 Eclipse Juno 中执行此操作？

我打开了一个“终端”视图，其中包含以下文字：

`To open a terminal, right-click the Terminal subsystem under the target. Then select 'Launch Terminal' from the context menu.`

我真的不知道这是在说什么，而且我已经使用 Eclipse 好几年了！

有人可以对此有所了解吗？

**编辑：** 我发现“目标下的终端子系统”指的是“远程系统”视图。我找不到串行终端的任何选项。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T11:19:16.807

在 Eclipse Juno 中使用串行终端。

**1：安装串口终端软件：**

导航至：*帮助*->*安装新软件...*

工作的下拉列表*：*说`Juno - http://download.eclipse.org/releases/juno`

选择：*移动和设备开发*，尤其是*目标管理终端*，它是“一个 ANSI (vt102) 兼容终端，包括用于串行、SSH 和 Telnet 连接的插件”。

单击*下一步*和其他任何内容以完成安装...

**2：打开视图**

导航到：*Window* -> *Show View* -> *Other ...* -> *Terminal* -> *Terminal* （注意：单数*Terminal*，而不是复数*Terminals*）

**3：打开终端**

其余的应该是相当明显的，因为视图包含与串行、SSH 和 Telnet 连接相关的连接、断开连接、设置等图标。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-11T13:52:53.257

在远程系统下，有“本地”和远程连接，在我的例子中是 192.168.1.12。单击“+”打开子文件夹。您应该看到您正在处理的项目。右键单击它。选择“启动终端”，倒数第三个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-15T16:30:32.193

加载 Remote Systems 透视图以连接到服务器。在那里，您将能够打开一个 SSH 终端。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-15T08:34:46.620

有一个名为 Local Terminal 的孵化器项目。您可以从 Eclipse 更新站点安装它：[http://download.eclipse.org/releases/indigo/](http://download.eclipse.org/releases/indigo/)在*General Purpose Tools->Local Terminal下*

# ios - 将 ipad 界面添加到 iphone 应用程序

> ID：12140387
> 
> 赞同：0
> 
> 时间：2012-08-27T10:38:17.380
> 
> 标签：ios

我一直在关注这个问题的一些解决方案。有没有不意味着更改代码的解决方案？每次加载 ViewController 时，我都会看到诸如在设备类型中添加 if/else 之类的解决方案。xcode没有办法自动完成此步骤吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:52:03.697

如果您在 info.plist 中使用情节提要，您可以通过配置来选择每个情节提要，一个用于 iPad，另一个用于 iPhone/iPod touch

如果您正在使用`xibs`，则需要使用 ifs 和 elses 以编程方式更改它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T14:57:38.077

我找到了一种更好的方法来将我的 iPad Xib 包含在我的项目中。我只需要在我的 xib 名称的末尾添加 ~iPad。如果我有 myxib.xib，我会创建一个名为 myxib~iPad.xib 的新 xib，当我在 ipad 上运行它时，它会自动获取正确的文件！

# c# - 如何从 MessageQueue 接收消息

> ID：12140388
> 
> 赞同：1
> 
> 时间：2012-08-27T10:38:19.890
> 
> 标签：c#, .net, message-queue

我从 MessageQueue 接收我的类型的消息时遇到问题。这是代码：

```
MyClass myClassObject = null;
 var msmq = new MessageQueue(@".\private$\myqueuename")
                       {Formatter = new XmlMessageFormatter(new Type[] {typeof (MyClass)})};
 var receive = msmq.Receive(new TimeSpan(20000000000));

            if (receive != null)
            {
                 myClassObject = (MyClass)receive.Body;

            } 
```

我希望最终在 myClassObject 中拥有数据。

```
 [DataContract]
    public class 
            MyClass
    {

        [DataMember]
        public long? Id
        {
            get;
            set;
        }
.....
    } 
```

我错过了什么？非常感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:52:32.170

我认为您需要验证客户端和服务器上的 App.config 文件。您编写的异常表明此消息序列化格式可能与您的绑定无关。

# android - 在对话框中设置高度和宽度？

> ID：12140389
> 
> 赞同：0
> 
> 时间：2012-08-27T10:38:20.333
> 
> 标签：android, android-layout, android-dialog, dialog

我正在使用作为对话框提示的 XML 布局。XML布局的设计格式很好，具有足够的所需高度和宽度。但是当我将它作为对话框打开时，它的宽度会受到干扰，所以如何通过编码设置对话框的高度和宽度。

我什至提到了这个以前的[堆栈溢出问题](https://stackoverflow.com/questions/5576991/how-to-set-alert-dialog-height-and-width-in-android)

这是代码：

```
// Layout Inflater Code..
    editDialog = new Dialog(this);
        layoutEdit = LayoutInflater.from(this).inflate(R.layout.createlayout, null);

    //layoutEdit.setLayoutParams(new LayoutParams(LayoutParams.MATCH_PARENT,LayoutParams.MATCH_PARENT));
    editDialog.setContentView(layoutEdit);

// Called the Dialogbox to inflate

updateButton.setOnClickListener(new View.OnClickListener() {

                public void onClick(View v) {
                    // TODO Auto-generated method stub
                editDialog.show();  
                }
            }); 
```

* * *

// XML 文件代码：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@color/bd"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:freezesText="false"
        android:text="Enter Name"

        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textColor="@color/whtie"
        android:typeface="monospace" />

    <EditText
        android:id="@+id/txtname"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:inputType="textPersonName" >

    </EditText>

</LinearLayout>    
</ScrollView> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-09-08T14:30:54.197

试试这个...

1.**对话片段：**

```
private void CustomDialog(String msg) {
    final Dialog dialog = new Dialog(YourActivity.this);
    dialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
    LinearLayout.LayoutParams dialogParams = new LinearLayout.LayoutParams(
            LayoutParams.MATCH_PARENT, 300);//set height(300) and width(match_parent) here, ie (width,height)

    LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    View dislogView = inflater
            .inflate(R.layout.my_custom_popup, null);

    dialog.setContentView(dislogView, dialogParams);
    TextView popupMsg = (TextView) dialog.findViewById(R.id.popupMsg);
    Button popupOk = (Button) dialog.findViewById(R.id.popupOk);
    popupMsg.setText(msg);
    popupOk.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            dialog.dismiss();
        }
    });

    dialog.show();
} 
```

2.然后在您想在活动中提示的地方调用 CustomDialog(Str)。

```
CustomDialog("This is customized popup dialog!"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:49:47.317

您最好使用看起来像对话框的活动（我觉得在您的情况下会更好）。这是一个示例代码：

```
 public class DialogActivity extends Activity {
/**
 * Initialization of the Activity after it is first created.  Must at least
 * call {@link android.app.Activity#setContentView setContentView()} to
 * describe what is to be displayed in the screen.
 */
@Override
protected void onCreate(Bundle savedInstanceState) {
    // Be sure to call the super class.
    super.onCreate(savedInstanceState);

    requestWindowFeature(Window.FEATURE_LEFT_ICON);

    // See assets/res/any/layout/dialog_activity.xml for this
    // view layout definition, which is being set here as
    // the content of our screen.
    setContentView(R.layout.dialog_activity);

    getWindow().setFeatureDrawableResource(Window.FEATURE_LEFT_ICON, 
            android.R.drawable.ic_dialog_alert);
}
} 
```

此代码来自 api 演示

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-14T17:06:05.240

尝试

```
dialog.getWindow().setLayout(height, width); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-11T11:59:46.343

```
View layout = inflater.inflate(R.layout.view, NULL);
layout.setMinimumWidth(200);
layout.setMinimumHeight(200);
dialog.setContentView(layout); 
```

# java - eclipse中的tomcat - 无法启动

> ID：12140393
> 
> 赞同：0
> 
> 时间：2012-08-27T10:38:36.443
> 
> 标签：java, web-applications, tomcat7

以前，我的 webapp 运行良好，但我尝试从 eclipse 导出 .war 文件。导出后，我从 eclipse 启动了 tomcat7 服务器，但出现了这个异常：

```
2012-08-27 12:29:16 org.apache.catalina.core.AprLifecycleListener init
INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386/server:/usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386:/usr/lib/jvm/java-6-openjdk-i386/jre/../lib/i386:/usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386/client:/usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386::/usr/java/packages/lib/i386:/usr/lib/i386-linux-gnu/jni:/lib/i386-linux-gnu:/usr/lib/i386-linux-gnu:/usr/lib/jni:/lib:/usr/lib
2012-08-27 12:29:16 org.apache.tomcat.util.digester.SetPropertiesRule begin
WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Applish' did not find a matching property.
2012-08-27 12:29:18 org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["http-bio-8080"]
2012-08-27 12:29:18 org.apache.coyote.AbstractProtocolHandler init
INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
2012-08-27 12:29:18 org.apache.catalina.startup.Catalina load
INFO: Initialization processed in 3470 ms
2012-08-27 12:29:18 org.apache.catalina.core.StandardService startInternal
INFO: Starting service Catalina
2012-08-27 12:29:18 org.apache.catalina.core.StandardEngine startInternal
INFO: Starting Servlet Engine: Apache Tomcat/7.0.12
java.lang.IllegalArgumentException: avalon-framework-api,xml-apis,junit,classworlds,log4j,servletapi-Extension-Name
    at java.util.jar.Attributes$Name.<init>(Attributes.java:464)
    at java.util.jar.Attributes.getValue(Attributes.java:116)
    at org.apache.catalina.util.ManifestResource.getRequiredExtensions(ManifestResource.java:187)
    at org.apache.catalina.util.ManifestResource.processManifest(ManifestResource.java:156)
    at org.apache.catalina.util.ManifestResource.<init>(ManifestResource.java:52)
    at org.apache.catalina.util.ExtensionValidator.validateApplication(ExtensionValidator.java:197)
    at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5015)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:774)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1033)
    at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:291)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:727)
    at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:145)
    at org.apache.catalina.startup.Catalina.start(Catalina.java:620)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:303)
    at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:431) 
```

我不知道是什么问题，所以我创建了新服务器并启动了。我还有其他例外：

```
2012-08-27 12:23:22 org.apache.catalina.core.AprLifecycleListener init
    INFO: The APR based Apache Tomcat Native library which allows optimal performance in production environments was not found on the java.library.path: /usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386/server:/usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386:/usr/lib/jvm/java-6-openjdk-i386/jre/../lib/i386:/usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386/client:/usr/lib/jvm/java-6-openjdk-i386/jre/lib/i386::/usr/java/packages/lib/i386:/usr/lib/i386-linux-gnu/jni:/lib/i386-linux-gnu:/usr/lib/i386-linux-gnu:/usr/lib/jni:/lib:/usr/lib
    2012-08-27 12:23:23 org.apache.tomcat.util.digester.SetPropertiesRule begin
    WARNING: [SetPropertiesRule]{Server/Service/Engine/Host/Context} Setting property 'source' to 'org.eclipse.jst.jee.server:Applish' did not find a matching property.
    2012-08-27 12:23:23 org.apache.coyote.AbstractProtocol init
    INFO: Initializing ProtocolHandler ["http-bio-8080"]
    2012-08-27 12:23:23 org.apache.coyote.AbstractProtocol init
    INFO: Initializing ProtocolHandler ["ajp-bio-8009"]
    2012-08-27 12:23:23 org.apache.catalina.startup.Catalina load
    INFO: Initialization processed in 1568 ms
    2012-08-27 12:23:23 org.apache.catalina.core.StandardService startInternal
    INFO: Starting service Catalina
    2012-08-27 12:23:23 org.apache.catalina.core.StandardEngine startInternal
    INFO: Starting Servlet Engine: Apache Tomcat/7.0.29
    2012-08-27 12:23:24 org.apache.catalina.core.ContainerBase startInternal
    SEVERE: A child container failed during start
    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Aplisz]]
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
        at java.util.concurrent.FutureTask.get(FutureTask.java:111)
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679)
    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/Aplisz]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        ... 7 more
    Caused by: java.lang.IllegalArgumentException: avalon-framework-api,xml-apis,junit,classworlds,log4j,servletapi-Extension-Name
        at java.util.jar.Attributes$Name.<init>(Attributes.java:464)
        at java.util.jar.Attributes.getValue(Attributes.java:116)
        at org.apache.catalina.util.ManifestResource.getRequiredExtensions(ManifestResource.java:187)
        at org.apache.catalina.util.ManifestResource.processManifest(ManifestResource.java:156)
        at org.apache.catalina.util.ManifestResource.<init>(ManifestResource.java:52)
        at org.apache.catalina.util.ExtensionValidator.validateApplication(ExtensionValidator.java:195)
        at org.apache.catalina.core.StandardContext.startInternal(StandardContext.java:5107)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 7 more
    2012-08-27 12:23:24 org.apache.catalina.core.ContainerBase startInternal
    SEVERE: A child container failed during start
    java.util.concurrent.ExecutionException: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
        at java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:252)
        at java.util.concurrent.FutureTask.get(FutureTask.java:111)
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1123)
        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1559)
        at org.apache.catalina.core.ContainerBase$StartChild.call(ContainerBase.java:1549)
        at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:334)
        at java.util.concurrent.FutureTask.run(FutureTask.java:166)
        at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
        at java.lang.Thread.run(Thread.java:679)
    Caused by: org.apache.catalina.LifecycleException: A child container failed during start
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
        at org.apache.catalina.core.StandardHost.startInternal(StandardHost.java:785)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 7 more
    2012-08-27 12:23:24 org.apache.catalina.startup.Catalina start
    SEVERE: Catalina.start: 
    org.apache.catalina.LifecycleException: Failed to start component [StandardServer[8005]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:675)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:322)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:451)
    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardService[Catalina]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        at org.apache.catalina.core.StandardServer.startInternal(StandardServer.java:732)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 7 more
    Caused by: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina]]
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154)
        at org.apache.catalina.core.StandardService.startInternal(StandardService.java:443)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 9 more
    Caused by: org.apache.catalina.LifecycleException: A child container failed during start
        at org.apache.catalina.core.ContainerBase.startInternal(ContainerBase.java:1131)
        at org.apache.catalina.core.StandardEngine.startInternal(StandardEngine.java:302)
        at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:150)
        ... 11 more
    2012-08-27 12:23:24 org.apache.catalina.startup.Catalina start
    INFO: Server startup in 1186 ms 
```

我在源代码中没有任何更改，在 pom.xml 中没有任何更改。我使用 mvn compile war:war 生成了 .war 文件，并尝试将其部署在我从命令行启动的 tomcat7 上。Tomcat 启动成功但部署失败，原因是：

```
2012-08-27 11:20:31 org.apache.catalina.startup.HostConfig deployWAR
SEVERE: Error deploying web application archive /home/ontia/apache-tomcat-7.0.29/webapps/apliszBuilder.war
java.lang.IllegalStateException: ContainerBase.addChild: start: org.apache.catalina.LifecycleException: Failed to start component [StandardEngine[Catalina].StandardHost[localhost].StandardContext[/apliszBuilder]]
    at org.apache.catalina.core.ContainerBase.addChildInternal(ContainerBase.java:904)
    at org.apache.catalina.core.ContainerBase.addChild(ContainerBase.java:877)
    at org.apache.catalina.core.StandardHost.addChild(StandardHost.java:618)
    at org.apache.catalina.startup.HostConfig.deployWAR(HostConfig.java:963)
    at org.apache.catalina.startup.HostConfig.deployApps(HostConfig.java:537)
    at org.apache.catalina.startup.HostConfig.check(HostConfig.java:1468)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at org.apache.tomcat.util.modeler.BaseModelMBean.invoke(BaseModelMBean.java:301)
    at com.sun.jmx.interceptor.DefaultMBeanServerInterceptor.invoke(DefaultMBeanServerInterceptor.java:857)
    at com.sun.jmx.mbeanserver.JmxMBeanServer.invoke(JmxMBeanServer.java:795)
    at org.apache.catalina.manager.ManagerServlet.check(ManagerServlet.java:1436)
    at org.apache.catalina.manager.HTMLManagerServlet.upload(HTMLManagerServlet.java:301)
    at org.apache.catalina.manager.HTMLManagerServlet.doPost(HTMLManagerServlet.java:208)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.CsrfPreventionFilter.doFilter(CsrfPreventionFilter.java:186)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.filters.SetCharacterEncodingFilter.doFilter(SetCharacterEncodingFilter.java:108)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:581)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

有人能弄清楚发生了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T09:31:04.800

Eclipse 在我背后用罐子做了一些事情。我刚刚从 /WEB-INF/lib 中删除了所有 jar，并输入了 mvn compile。之后，一切正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-30T06:15:04.560

我遇到了同样的问题......有趣的是，web.xml 文件中有一个小错误......你可能已经在任何项目的某个地方做了声明或包含而没有斜线'/'......还检查斜线......

# iphone - iOS 以编程方式更改选项卡

> ID：12140395
> 
> 赞同：1
> 
> 时间：2012-08-27T10:38:47.930
> 
> 标签：iphone, ios, ios4

我正在开发一个带有标签栏和导航的 iOS 应用程序。当我在第一个选项卡中按下一个按钮时，我希望它使用导航控制器加载第二个选项卡并推送下一个视图。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:41:52.183

您可以通过编程方式选择选项卡

```
self.tabBarController.selectedIndex=1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:41:40.530

设置 selectedViewController：

```
self.tabBarController.selectedViewController = viewControllerYouWant; 
```

例如，

```
self.tabBarController.selectedViewController 
    = [self.tabBarController.viewControllers objectAtIndex:2]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:43:33.923

第一个选项卡中的按钮向选项卡控制器发送一条消息，告诉它选择第二个选项卡。然后你向第二个选项卡的 rootView 发送一条消息，它是一个导航控制器，并告诉它推送你使用第一个按钮在类中创建的某个对象。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-04T03:22:53.740

这是`Swift`任何需要它的人的解决方案。我必须做同样的事情，只是从选项卡 2 中的嵌套视图控制器转到选项卡 4 中的另一个嵌套视图控制器。这是我如何实现的：

```
func goToHelpViewController(){
    dispatch_async(dispatch_get_main_queue(), { () -> Void in
        let desiredIndex:Int = 3
        self.tabBarController?.selectedIndex = desiredIndex
        let settingsStoryBoard = UIStoryboard(name: "SettingsSection", bundle: nil)
        let helpViewController = settingsStoryBoard.instantiateViewControllerWithIdentifier("HelpViewController") as! HelpViewController
        let settingsRootNavigationController = self.tabBarController?.viewControllers![desiredIndex] as! UINavigationController

        settingsRootNavigationController.popToRootViewControllerAnimated(false)
        settingsRootNavigationController.pushViewController(helpViewController, animated: true)
    })
} 
```

**斯威夫特 3.0**

```
func goToHelpViewController(){
    DispatchQueue.main.async(execute: { () -> Void in
        let desiredIndex:Int = 1
        self.tabBarController?.selectedIndex = desiredIndex
        let settingsStoryBoard = UIStoryboard(name: "SettingsSection", bundle: nil)
        let helpViewController = settingsStoryBoard.instantiateViewController(withIdentifier: "HelpViewController") as! HelpViewController
        let settingsRootNavigationController = self.tabBarController?.viewControllers![desiredIndex] as! UINavigationController

        settingsRootNavigationController.popToRootViewController(animated: false)
        settingsRootNavigationController.pushViewController(helpViewController, animated: true)
    })
} 
```

# java - maven JSF api 工件的区别

> ID：12140401
> 
> 赞同：0
> 
> 时间：2012-08-27T10:39:12.063
> 
> 标签：java, jsf, jakarta-ee, maven

您知道以下工件之间的区别吗？
在什么情况下我应该使用哪一个？

```
<dependency>
    <groupId>org.jboss.spec.javax.faces</groupId>
    <artifactId>jboss-jsf-api_2.1_spec</artifactId>
    <scope>provided</scope>
</dependency> 
```

和

```
<dependency>
    <groupId>javax.faces</groupId>
    <artifactId>javax.faces-api</artifactId>
    <version>2.1</version>
    <scope>provided</scope>
</dependency> 
```

或者更具体地说，我计划将第一个依赖项替换为我的 webapp 的第二个依赖项，它将部署到 JBoss 7.1.1 和 Glassfish 3.1.2.1。我应该期待任何副作用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:53:04.553

第一个由 jboss.org 提供，第二个是通过[JSR-314](http://www.jcp.org/en/jsr/detail?id=314)下的 Java 社区进程开发的。您可以将第一个依赖项替换为第二个依赖项。没有副作用。

# c# - Outlook 在尝试运行创建 shell 脚本对象以调用 Windows 应用程序的 jscript 时抛出错误

> ID：12140403
> 
> 赞同：1
> 
> 时间：2012-08-27T10:39:25.387
> 
> 标签：c#, c#-4.0, dynamics-crm, crm, outlook-2010

下面是我的 jscript 代码，我使用它在 crm 2011 功能区中单击按钮时调用我的 Windows 应用程序。它在ie中工作正常。

```
function resume()
{
var _Object=new ActiveXObject( "WScript.Shell" ) ;
_Object.Run("\\\\192.168.0.100\\BackBone_Profile\\winapp\\winapp.exe" );
} 
```

当我尝试在与 crm 同步的 Outlook 中运行相同时，它给出的错误为

![脚本错误](../Images/eacee1e72ad0c812194710532258ada9.png)

如何使应用程序在 Outlook 中运行而不会出现任何错误。

# java - 与 gwt-visualization 并排绘制图表

> ID：12140404
> 
> 赞同：1
> 
> 时间：2012-08-27T10:39:27.067
> 
> 标签：java, gwt, google-visualization

我在verison 1.1.2 中使用java gwt-visualization API。我尝试将多个图表添加到 Flowpanel 以并排显示它们，但它们始终显示在彼此下方。

你知道并排显示它们的方法吗？非常感谢提前

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:36:04.367

好的，我通过用以下内容覆盖css类找到了解决方案`.gwt-viz-container`：

```
 .gwt-viz-container {
       float: left;
       position: relative;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:51:14.947

区域是否足够大，可以在没有滚动条的情况下显示两个图表？否则，流程面板将在每个 otehr 下显示它们。

您可以为 Flowpanel 分配一个 with，witch 与两个 Flow Panel 的宽度一样大。但是，在这种情况下，您可以使用 [Horizo​​ntal Panel](http://gwt.google.com/samples/Showcase/Showcase.html#!CwHorizontalPanel)。这样你的图表是并排的，但可能会溢出。

# wpf - VirtualizingStackPanel.IsVirtualizing="true" 时如何在文本框和数据网格中查找匹配的单词？

> ID：12140405
> 
> 赞同：0
> 
> 时间：2012-08-27T10:39:29.363
> 
> 标签：wpf, wpfdatagrid

我的表单中有数据网格和文本框。Datagrid 正在向我显示我的库存中的现有项目。我使用文本框搜索并将焦点设置到与我的文本框匹配的那一行。现在它在 VirtualizingStackPanel.IsVirtualizing="false" 时工作正常，但它非常慢并且需要大量 RAM 资源。这是我的代码。

```
public IEnumerable<Microsoft.Windows.Controls.DataGridRow> GetDataGridRows(Microsoft.Windows.Controls.DataGrid grid)
        {
            var itemsSource = grid.ItemsSource as IEnumerable;
            if (null == itemsSource) yield return null;
            foreach (var item in itemsSource)
            {
                var row = grid.ItemContainerGenerator.ContainerFromItem(item) as Microsoft.Windows.Controls.DataGridRow;
                if (null != row) yield return row;
            }
        }

        private void SearchBoxDataGrid_TextChanged(object sender, TextChangedEventArgs e)
        {
            var row = GetDataGridRows(AssortDataGrid);
            /// go through each row in the datagrid
            foreach (Microsoft.Windows.Controls.DataGridRow r in row)
            {
                DataRowView rv = (DataRowView)r.Item;
                // Get the state of what's in column 1 of the current row (in my case a string)
                string t = rv.Row["Ассортимент"].ToString().ToLower();
                if (t.StartsWith(SearchBoxDataGrid.Text.ToLower()))
                {
                    AssortDataGrid.SelectedIndex = r.GetIndex();
                    AssortDataGrid.ScrollIntoView(AssortDataGrid.SelectedItem);
                    break;
                }

            }
        } 
```

我想要的是让它 VirtualizingStackPanel.IsVirtualizing="true" 但在这种情况下我的方法不起作用。我知道为什么它不起作用，我的代码仅适用于显示 Datagrid 的一部分。你有什么建议吗？如何解决这个问题？任何想法将不胜感激。如果您提供任何工作代码，那就太棒了。我希望我能解释我的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:47:20.143

虚拟化意味着 WPF 将重用 UI 组件，并简单地替换掉`DataContext`后面的组件。

例如，如果您的 Grid 有 1000 个项目并且只有 10 个是可见的，它只会渲染大约 14 个 UI 项目（滚动缓冲区的额外项目），并且滚动只是替换`DataContext`这些 UI 项目后面，而不是为每个项目创建新的 UI 元素。如果您不使用`Virtualization`，它将创建所有 1000 个 UI 项。

为了`Search`使用虚拟化，您需要循环通过`DataContext`( `DataGrid.Items`) 而不是通过 UI 组件。这可以在代码隐藏中完成，或者如果您使用 MVVM，您可以`SeachCommand`在`ViewModel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T12:14:01.513

我做了一些编码并使它工作。如果有人将来需要它，请使用它。首先，我正在创建产品列表

```
List<string> ProductList; 
```

然后在加载方法上，我将所有产品都列在我的产品列表中。

```
 SqlCommand commProc2 = new SqlCommand("SELECT dbo.fGetProductNameFromId(ProductID) as ProductName from Assortment order by ProductName desc", MainWindow.conn);
    string str2;
    SqlDataReader dr2 = commProc2.ExecuteReader();
    ProductList = new List<string>();
    try
    {
        if (dr2.HasRows)
        {
            while (dr2.Read())
            {
                str2 = (string)dr2["ProductName"];
                ProductList.Insert(0, str2.ToLower ());
            }
        }
    }
    catch (Exception ex)
    {
        MessageBox.Show("An error occured while trying to fetch data\n" + ex.Message);
    }

    dr2.Close();
    dr2.Dispose(); 
```

之后我在 SearchBoxDataGrid_TextChanged 中做了一些更改

```
 private void SearchBoxDataGrid_TextChanged(object sender, TextChangedEventArgs e)
    {

        int pos = 0;
        string typedString = SearchBoxDataGrid.Text.ToLower();
        foreach (string item in ProductList)
        {
            if (!string.IsNullOrEmpty(SearchBoxDataGrid.Text))
            {
                if (item.StartsWith(typedString))
                {
                    pos = ProductList.IndexOf(item);
                    AssortDataGrid.SelectedIndex = pos;
                    AssortDataGrid.ScrollIntoView(AssortDataGrid.SelectedItem);
                    break;
                }
            }
        }

    } 
```

现在它在 VirtualizingStackPanel.IsVirtualizing="true" 时工作。就这些。

# sql-server-2008 - 如何获取sql中的记录数？

> ID：12140408
> 
> 赞同：0
> 
> 时间：2012-08-27T10:39:42.613
> 
> 标签：sql-server-2008, count

大家好，我有两张桌子

```
 Projects
  ----------
  ProjectID|ProjectNAme
    1      |asdasd
    2      |adas
    3      |asdfdf 
```

和

```
 Bugs
-------
BugID|Title|ProjectID
  1  |asda |1
  2  |asdfs|1
  3  |sdfsdf|2
  4  |asfsd|2 
```

现在我想要的是，得到项目的错误数量......如果项目没有任何错误，那么我应该得到计数为 0..我一直在尝试这个查询......我没有得到如果 Bug 表中不存在 projectID 则计数为 0 任何人都可以在这里帮助我

```
 Select 
    P.projectName
    , Count(B.BugID) As BugCount  
 from bugs B inner join projects P 
 on P.ProjectId = B.ProjectId
 group by P.projectName 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:41:43.830

```
 Select P.projectName, Count(B.BugID) As BugCount  
 from projects P 
      left join bugs B 
          on P.ProjectId = B.ProjectId 
 group by P.projectName 
```

# python - pandas：规范化 DataFrame

> ID：12140417
> 
> 赞同：9
> 
> 时间：2012-08-27T10:40:17.600
> 
> 标签：python, pandas, database-normalization

我在扁平文件中输入了数据。我想通过将其拆分为表格来规范化这些数据。我可以巧妙地做到这一点`pandas`- 即通过将扁平数据读入一个`DataFrame`实例，然后应用一些函数来获取结果`DataFrame`实例？

例子：

数据以 CSV 文件的形式在磁盘上提供给我，如下所示：

```
ItemId   ClientId   PriceQuoted  ItemDescription
1        1          10           scroll of Sneak
1        2          12           scroll of Sneak
1        3          13           scroll of Sneak
2        2          2500         scroll of Invisible
2        4          2200         scroll of Invisible 
```

我想创建两个数据框：

```
ItemId   ItemDescription
1        scroll of Sneak
2        scroll of Invisibile 
```

和

```
ItemId   ClientId   PriceQuoted
1        1          10
1        2          12
1        3          13
2        2          2500
2        4          2200 
```

如果`pandas`仅对最简单的情况有一个好的解决方案（规范化导致 2 个具有多对一关系的表 - 就像上面的示例一样），它可能足以满足我当前的需求。但是，我将来可能需要一个更通用的解决方案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-27T11:07:30.987

```
In [30]: df = pandas.read_csv('foo1.csv', sep='[\s]{2,}')

In [30]: df
Out[30]:
   ItemId  ClientId  PriceQuoted      ItemDescription
0       1         1           10      scroll of Sneak
1       1         2           12      scroll of Sneak
2       1         3           13      scroll of Sneak
3       2         2         2500  scroll of Invisible
4       2         4         2200  scroll of Invisible

In [31]: df1 = df[['ItemId', 'ItemDescription']].drop_duplicates().set_index('ItemId')

In [32]: df1
Out[32]:
            ItemDescription
ItemId
1           scroll of Sneak
2       scroll of Invisible

In [33]: df2 = df[['ItemId', 'ClientId', 'PriceQuoted']]

In [34]: df2
Out[34]:
   ItemId  ClientId  PriceQuoted
0       1         1           10
1       1         2           12
2       1         3           13
3       2         2         2500
4       2         4         2200 
```

# jquery - Jquery：使用 addClass 突出显示“喜欢”菜单项

> ID：12140419
> 
> 赞同：1
> 
> 时间：2012-08-27T10:40:27.227
> 
> 标签：jquery, class, addclass, removeclass

我的大脑一定是彻底崩溃了，因为我不明白为什么这不简单。

我有两个列表——一个类别，一个属于这些类别的项目。我需要使用共享类根据第一个列表中选择的项目突出显示第二个列表中的项目。

据我所知，对于初学者，我在第二个列表中缺少一个循环，但还有其他问题。我只是想不出一起使用 addClass 和 hasClass 的正确方法，也许。

这是一个小提琴：

[http://jsfiddle.net/dilettante/9Ux27/4/](http://jsfiddle.net/dilettante/9Ux27/4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:52:25.600

你让它太难了，它会像这样工作：

```
$('.firstlevel li a').click(function() {
    var categoryID = $(this).attr("class");

    $('.firstlevel li a').removeClass("current-menu-item")
    $(this).addClass("current-menu-item")

    $('.secondlevel li a').removeClass('clicked');
    $('.secondlevel li a.' + categoryID).addClass('clicked');

}); 
```

[这是一个工作小提琴](http://jsfiddle.net/9Ux27/5/) </p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:52:12.807

代码中有一些错误试试这个：http: [//jsfiddle.net/9Ux27/6/](http://jsfiddle.net/9Ux27/6/)

# c# - 从 Datatable 中删除 N 行而不使用迭代

> ID：12140420
> 
> 赞同：1
> 
> 时间：2012-08-27T10:40:29.167
> 
> 标签：c#, datatable, rowdeleting

我正在使用一组 DataTables 来连续存储值，我必须从中删除 n 行。

我的问题是，

*   当行数达到限制时，我必须删除 n 行。
*   删除不应影响数据表中的其他写入过程。

请帮我解决这个问题/或提出建议

**从标题编辑**

我想使用一种没有迭代的方法。

# c# - 以编程方式生成 sql 代码

> ID：12140422
> 
> 赞同：11
> 
> 时间：2012-08-27T10:40:41.777
> 
> 标签：c#, sql, .net, sql-server, tsql

我通过**右键单击数据库通过****任务菜单**中的生成脚本手动**生成了脚本。**

 ****现在我的问题是通过 c# 代码生成该脚本...

我的问题是

1.  是否可以通过 c# 代码生成？

2.  给我一些提示以完成？

等待您的宝贵建议和命令。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-27T11:51:55.273

正如已经提到的，您可以使用 SMO 来执行此操作，这是一个使用 C# 编写数据库脚本的示例，我提到了几个选项，但正如 @David Brabant 的帖子中那样，您可以指定许多选项的值.

```
public string ScriptDatabase()
{
      var sb = new StringBuilder();

      var server = new Server(@"ServerName");
      var databse = server.Databases["DatabaseName"];

      var scripter = new Scripter(server);
      scripter.Options.ScriptDrops = false;
      scripter.Options.WithDependencies = true;
      scripter.Options.IncludeHeaders = true;
      //And so on ....

      var smoObjects = new Urn[1];
      foreach (Table t in databse.Tables)
      {
          smoObjects[0] = t.Urn;
          if (t.IsSystemObject == false)
          {
              StringCollection sc = scripter.Script(smoObjects);

              foreach (var st in sc)
              {
                  sb.Append(st);
              }
           }
       }
            return sb.ToString();
 } 
```

此[链接](http://www.sqlteam.com/article/scripting-database-objects-using-smo-updated)可以帮助您获取和编写存储过程脚本

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T10:45:11.583

您可以使用[sql smo](http://msdn.microsoft.com/en-us/library/ms162169.aspx)基本上实现 SQL Server Enterprise 管理器中可用的所有功能。[这里](http://www.mssqltips.com/sqlservertip/1833/generate-scripts-for-database-objects-with-smo-for-sql-server/)有一个很好的教程。

**编辑**：在 PowerShell 中使用[SMO](http://msdn.microsoft.com/en-us/library/ms162552%28v=sql.105%29.aspx)的示例

```
function SQL-Script-Database
{
    <#
    .SYNOPSIS
    Script all database objects for the given database.

    .DESCRIPTION
    This  function scripts all database objects  (i.e.: tables,  views, stored
    procedures,  and user defined functions) for the specified database on the
    the given server\instance. It creates a subdirectory per object type under 
    the path specified.

    .PARAMETER savePath
    The root path where to save object definitions.

    .PARAMETER database
    The database to script (default = $global:DatabaseName)

    .PARAMETER DatabaseServer 
    The database server to be used (default: $global:DatabaseServer).

    .PARAMETER InstanceName 
    The instance name to be used (default: $global:InstanceName).

    .EXAMPLE
    SQL-Script-Database c:\temp AOIDB
    #>

    param (
        [parameter(Mandatory = $true)][string] $savePath,
        [parameter(Mandatory = $false)][string] $database = $global:DatabaseName,
        [parameter(Mandatory = $false)][string] $DatabaseServer = $global:DatabaseServer,
        [parameter(Mandatory = $false)][string] $InstanceName = $global:InstanceName
    )

    try
    {
        if (!$DatabaseServer -or !$InstanceName)
            { throw "`$DatabaseServer or `$InstanceName variable is not properly initialized" }

        $ServerInstance = SQL-Get-Server-Instance $DatabaseServer $InstanceName

        [System.Reflection.Assembly]::LoadWithPartialName("Microsoft.SqlServer.SMO") | Out-Null

        $s = New-Object Microsoft.SqlServer.Management.Smo.Server($ServerInstance)
        $db = $s.databases[$database]

        $objects = $db.Tables
        $objects += $db.Views
        $objects += $db.StoredProcedures
        $objects += $db.UserDefinedFunctions

        $scripter = New-Object ('Microsoft.SqlServer.Management.Smo.Scripter') ($s)

        $scripter.Options.AnsiFile = $true
        $scripter.Options.IncludeHeaders = $false
        $scripter.Options.ScriptOwner = $false
        $scripter.Options.AppendToFile = $false
        $scripter.Options.AllowSystemobjects = $false
        $scripter.Options.ScriptDrops = $false
        $scripter.Options.WithDependencies = $false
        $scripter.Options.SchemaQualify = $false
        $scripter.Options.SchemaQualifyForeignKeysReferences = $false
        $scripter.Options.ScriptBatchTerminator = $false

        $scripter.Options.Indexes = $true
        $scripter.Options.ClusteredIndexes = $true
        $scripter.Options.NonClusteredIndexes = $true
        $scripter.Options.NoCollation = $true

        $scripter.Options.DriAll = $true
        $scripter.Options.DriIncludeSystemNames = $false

        $scripter.Options.ToFileOnly = $true
        $scripter.Options.Permissions = $true

        foreach ($o in $objects | where {!($_.IsSystemObject)}) 
        {
            $typeFolder=$o.GetType().Name 

            if (!(Test-Path -Path "$savepath\$typeFolder")) 
                { New-Item -Type Directory -name "$typeFolder"-path "$savePath" | Out-Null }

            $file = $o -replace "\[|\]"
            $file = $file.Replace("dbo.", "")

            $scripter.Options.FileName = "$savePath\$typeFolder\$file.sql"
            $scripter.Script($o)
        }
    }

    catch
    {
        Util-Log-Error "`t`t$($MyInvocation.InvocationName): $_"
    }
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2015-09-06T06:41:56.753

基于@Sami 答案

我已经创建了这个简单的函数，它将为您的数据库生成所有脚本（表、视图、存储过程、用户和 UserDefinedFunctions）

**第一：[获取所需的程序集](https://stackoverflow.com/a/6453450/1929951)**

> C:\Program Files\Microsoft SQL Server\100\SDK\Assemblies 是正确的文件夹位置（或在 64 位系统上为 C:\Program Files (x86)\Microsoft SQL Server\100\SDK\Assemblies）。

您需要添加对以下内容的引用：

Microsoft.SqlServer.ConnectionInfo.dll

Microsoft.SqlServer.Smo.dll

Microsoft.SqlServer.Management.Sdk.Sfc.dll

Microsoft.SqlServer.SqlEnum.dll

**二：使用这个函数**

```
 public static string ScriptDatabase() 
{
    // For Me Server is ".\SQLExpress" You may have changed
    Server myServer = new Server(@".\SQLExpress");
    Scripter scripter = new Scripter(myServer);

    //Databas1 is your database Name Thats Changable

    Database myAdventureWorks = myServer.Databases["MyDBName"];
    /* With ScriptingOptions you can specify different scripting  
    * options, for example to include IF NOT EXISTS, DROP  
    * statements, output location etc*/
    ScriptingOptions scriptOptions = new ScriptingOptions();
    scriptOptions.ScriptDrops = true;
   // scriptOptions.ScriptData = true;
    scriptOptions.ScriptSchema = true;

    scriptOptions.IncludeIfNotExists = true;
    string scrs = "";
    string tbScr = "";
    foreach (Table myTable in myAdventureWorks.Tables)
    {
        /* Generating IF EXISTS and DROP command for tables */
        StringCollection tableScripts = myTable.Script(scriptOptions);
        foreach (string script in tableScripts)
            scrs += script + "\n\n";

        /* Generating CREATE TABLE command */
        tableScripts = myTable.Script();
        foreach (string script in tableScripts)
            tbScr += script + "\n\n";
    }

    foreach (StoredProcedure mySP in myAdventureWorks.StoredProcedures)
    {
        /* Generating IF EXISTS and DROP command for StoredProcedures */
        StringCollection tableScripts = mySP.Script(scriptOptions);
        foreach (string script in tableScripts)
            scrs += script + "\n\n";

        /* Generating CREATE StoredProcedure command */
        tableScripts = mySP.Script(scriptOptions);
        foreach (string script in tableScripts)
            tbScr += script + "\n\n";
    }

    foreach (View myView in myAdventureWorks.Views)
    {
        /* Generating IF EXISTS and DROP command for Views */
        StringCollection tableScripts = myView.Script(scriptOptions);
        foreach (string script in tableScripts)
            scrs += script + "\n\n";

        /* Generating CREATE Views command */
        tableScripts = myView.Script(scriptOptions);
        foreach (string script in tableScripts)
            tbScr += script+"\n\n";
    }

    foreach (Microsoft.SqlServer.Management.Smo.User user in myAdventureWorks.Users)
    {
        /* Generating IF EXISTS and DROP command for Users */
        StringCollection tableScripts = user.Script(scriptOptions);
        foreach (string script in tableScripts)
            scrs += script+"\n\n";

        /* Generating CREATE Users command */
        tableScripts = user.Script(scriptOptions);
        foreach (string script in tableScripts)
            scrs += script + "\n\n";
    }

    foreach (Microsoft.SqlServer.Management.Smo.UserDefinedFunction userF in myAdventureWorks.UserDefinedFunctions)
    {
        /* Generating IF EXISTS and DROP command for UserDefinedFunctions */
        StringCollection tableScripts = userF.Script(scriptOptions);
        foreach (string script in tableScripts)
            scrs += script + "\n\n";

        /* Generating CREATE UserDefinedFunction command */
        tableScripts = userF.Script(scriptOptions);
        foreach (string script in tableScripts)
            scrs += script + "\n\n";
    } 

    // For WinForms
    return (scrs + "\n\n" + tbScr);
    //For Console
    //Console.WriteLine(scrs + "\n\n" + tbScr);
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-05-23T09:20:58.910

我刚刚使用上面的答案编写了一个命令行程序来在 c# 中执行此操作，并认为我会在上面的答案上进行一些扩展。

如果你想输出数据以及你需要使用的模式：

```
scripter.EnumScript(something);
//instead of 
scripter.Script(something); 
```

脚本方法只是检查 IncludeData 选项，如果设置了它就会抛出异常，但你必须上谷歌才能找到正确的方法！有趣的 API 设计！

数据库中的相关列表如下：

```
 database.Tables
        database.Schemas
        database.Views
        database.StoredProcedures
        database.UserDefinedFunctions
        database.Users
        database.Roles
        database.Sequences 
```

尽管这可能并不详尽。

**摆脱系统对象**

这些对象中的列表都是自定义类型，`IEnumerable but not IEnumerable<T>`因此您无法对它们执行 linq。这也意味着您必须找出其中的类型并使用 foreach 的隐式强制转换将它们取出。我以前从未在 c# 中使用过它，但我猜这些东西可能是针对框架 2 的。

它们中的许多也具有称为 IsSystemObject 的属性，但这并没有实现接口。起初看起来**摆脱所有系统对象会很痛苦，但是您可以****通过设置以下选项**一举将它们全部剔除：

```
options.AllowSystemObjects = false; 
```

这适用于除角色之外的所有内容，您必须手动执行系统角色：

```
 foreach (DatabaseRole role in database.Roles)
        {
            if(role.IsFixedRole)
                continue;

            list.Add(role);
        } 
```

**为输出添加对象**

我使用的过程是创建一个**UrnCollection**，然后将不同的列表添加到集合中。像这样：

```
 var list = new UrnCollection();

        foreach (Schema schema in database.Schemas)
            list.Add(schema.Urn);
        //... more of these

        scripter.EnumScript(list); 
```

**选项**

从那里你需要弄清楚要设置哪些选项来重新创建你需要的输出。需要记住的几件事：

*   索引、触发器、约束等由选项设置，不被视为第一类对象。
*   在 SSMS 的 UI 中，您根本无法生成序列，因此如果您使用这些序列，您的输出中至少会出现一些差异

有关如何获取外键等的更多信息，请参阅[这篇文章。](https://stackoverflow.com/questions/18992878/cant-get-enumscript-to-generate-constraints/19070280#19070280)

**健康警告**

我开始将其视为复制数据库的一种方式，因为我认为备份和恢复不会达到我想要的效果。在沿着 smo 路径走了很长一段路并遇到了很多问题之后，我进行了一些重新评估，发现[备份和恢复对于那个用例来说要简单得多](https://stackoverflow.com/questions/23811049/copying-databases-in-sql-server)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T14:49:17.490

希望它会指导你和即将到来的人。

您必须在项目中添加以下四个引用以包含以下必需的命名空间

添加参考

1.  在解决方案资源管理器中右键单击您的项目并选择添加参考
2.  单击上方菜单中的浏览
3.  并按照以下说明选择 4 个 dll 文件

[参考 Microsoft.SqlServer.Smo.dll](https://stackoverflow.com/questions/6453415/reference-microsoft-sqlserver-smo-dll)

命名空间

```
using System.Data.SqlClient;
using System.Collections.Specialized;
using Microsoft.SqlServer.Management.Smo; 
```

现在在任何函数或按钮单击事件中使用以下代码

```
 // For Me Server is ".\SQLExpress" You may have changed
        Server myServer = new Server(@".\SQLExpress");
        Scripter scripter = new Scripter(myServer);

        //Databas1 is your database Name Thats Changable

        Database myAdventureWorks = myServer.Databases["Database1"];
        /* With ScriptingOptions you can specify different scripting  
        * options, for example to include IF NOT EXISTS, DROP  
        * statements, output location etc*/
        ScriptingOptions scriptOptions = new ScriptingOptions();
        scriptOptions.ScriptDrops = true;
        scriptOptions.IncludeIfNotExists = true;
        string scrs = "";
        string tbScr = "";
        foreach (Table myTable in myAdventureWorks.Tables)
        {
            /* Generating IF EXISTS and DROP command for tables */
            StringCollection tableScripts = myTable.Script(scriptOptions);
            foreach (string script in tableScripts)
                scrs += script;

            /* Generating CREATE TABLE command */
            tableScripts = myTable.Script();
            foreach (string script in tableScripts)
                tbScr += script;
        }
        // For WinForms
        MessageBox.Show(scrs + "\n\n" + tbScr);
        //For Console
        //Console.WriteLine(scrs + "\n\n" + tbScr); 
```

它涉及[http://www.mssqltips.com/sqlservertip/1833/generate-scripts-for-database-objects-with-smo-for-sql-server/](http://www.mssqltips.com/sqlservertip/1833/generate-scripts-for-database-objects-with-smo-for-sql-server/) David Brabant 的回答（上）和上面的 SO 链接

使用代码块 2。现在你也可以使用其他人了

我在那里找不到 myserver 但在上面的代码中也解决了。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-10-01T23:19:21.480

获取存储过程脚本的示例。注意：我通过字符串操作添加“GO”和“ALTER”。我花了 6 个小时试图弄清楚为什么它不生成 GO。Microsoft Strikes Back：库 SMO（服务器管理对象）很糟糕，它有缺陷且难以使用！

```
var dbObj = database.StoredProcedures[name, schema];
if (dbObj != null)
{
    Console.WriteLine(dbObj);

    var script = new StringBuilder();
    script.AppendLine("USE LifelongLearning");
    script.AppendLine("GO");
    script.AppendLine();

    StringCollection scripts = dbObj.Script(scriptOptionsCreate);
    foreach (string s in scripts)
    {
        if (s.Contains("CREATE ", StringComparison.OrdinalIgnoreCase))
        {
            string s2 = s.Replace("CREATE ", "ALTER ", StringComparison.OrdinalIgnoreCase);
            script.AppendLine(s2);
        }
        else
        {
            script.AppendLine(s);
        }

        // it's a hack because scripting of the "GO" not working well
        if (s == "SET ANSI_NULLS ON" || s == "SET QUOTED_IDENTIFIER ON")
            script.AppendLine("GO");
    }

    script.AppendLine("GO");

    string fileName = schema + "." + name + ".sql";
    await File.WriteAllTextAsync(folder + "\\" + fileName, script.ToString());
}

readonly static ScriptingOptions scriptOptionsCreate = new ScriptingOptions()
{
    //WithDependencies = true,  // will add create table before create view
    IncludeHeaders = false,  /****** Object:  View [dbo].[v_people]    Script Date: 9/30/2021 6:03:10 PM ******/
    ScriptSchema = true,
    ScriptData = false,
    Indexes = true,
    ClusteredIndexes = true,
    FullTextIndexes = true,

    // GO attempt
    FileName = "test.sql",
    ScriptBatchTerminator = true,
    NoCommandTerminator = false,
    //ToFileOnly = true,  // it makes script empty
    AppendToFile = true,
    EnforceScriptingOptions = true,
    AllowSystemObjects = true,
    Permissions = true,
    DriAllConstraints = true,
    SchemaQualify = true,
    AnsiFile = true,
    //AnsiPadding = false,
}; 
```

完整的工作应用程序在这里： [https ://github.com/sam-klok/CreateSQLScriptsFromDB/blob/main/CreateSQLScriptsFromDB/Program.cs](https://github.com/sam-klok/CreateSQLScriptsFromDB/blob/main/CreateSQLScriptsFromDB/Program.cs)****

# c# - 方法覆盖和方法隐藏的执行流程

> ID：12140423
> 
> 赞同：4
> 
> 时间：2012-08-27T10:40:49.787
> 
> 标签：c#, overloading, method-hiding

我对以下场景感到困惑，我们有一组这样的类

```
public class A
{
    public virtual string SomeMethod()
    {
        return "A";
    }
}

public class B : A
{
    public override string SomeMethod()
    {
        return "B";
    }
}

public class C : B
{
    public new virtual string SomeMethod()
    {
        return "C";
    }
}

public class D : C
{
    public override string SomeMethod()
    {
        return "D";
    }
} 
```

当我调用以下方法时

```
private void Test()
{
    A a = new D();
    B b = new D();
    C c = new D();
    D d = new D();
    Console.WriteLine(a.SomeMethod()); //The method in class B is being called
    Console.WriteLine(b.SomeMethod()); //The method in class B is being called
    Console.WriteLine(c.SomeMethod()); //The method in class D is being called
    Console.WriteLine(d.SomeMethod()); //The method in class D is being called
} 
```

我得到这样的输出

> BBDD

为什么调用的是继承的方法，而不是声明类型中的方法，为什么不是`D`每次都调用类中的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-30T06:41:13.673

当您调用(ie )`SomeMethod`的实例时，您期望获得可用的最衍生版本。这就是继承的全部意义。您的代码只需要处理基类的实例，但如果这些实例恰好是派生类，则会调用特殊的派生实现。这是您在**覆盖**方法时得到的行为。`A``A foo = new <A or derived>()``SomeMethod`

 **这解释了常见的场景，如

```
A b = new B();
b.SomeMethod();  // B's implementation invoked 
```

使用`new`，您并没有覆盖该方法，**而是声明了一个具有相同名称的全新方法。** 此方法仅存在于声明它的类及其子类中，它不是基类及其继承链的一部分。

那么做`A a = new D(); a.SomeMethod();`什么呢？该变量被声明为`A`，因此对其调用的任何方法/属性/等都必须在 上定义`A`。 `C`定义了一个**新**方法`SomeMethod`（并`D`覆盖它），但是这个方法在 上不存在`A`，所以不能在这里调用。`SomeMethod`（在 type 上声明的）最派生的实现`A`是 in `B`，所以这是被调用的实现。

同样的故事`B b = new D(); b.SomeMethod();`

只有当我们到达时`C c = new D(); c.SomeMethod()`，**新**方法才有机会执行。这是因为变量是 a `C`，因此**新**方法`SomeMethod`是第一次在变量类型上声明。并且如上所述，将调用最可能派生的版本，在这种情况下，这意味着版本被`D`.

我希望我们都在同一个页面上`D d = new D(); d.SomeMethod()`:)

其他人发布了很好的链接。这是另一个可能有帮助的线程：[C# and method hide](https://stackoverflow.com/questions/1170158/c-sharp-and-method-hiding)

这里的最后一个示例显示了一个更奇怪的场景，其中“新”方法被声明为私有，因此进一步派生的类型实际上继承了该方法的基本版本，而不是继承“新”版本。[http://msdn.microsoft.com/en-us/library/aa691135](http://msdn.microsoft.com/en-us/library/aa691135)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-30T05:20:06.083

我试图用不同的方式来解释它。

`virtual`/`override`表示您实现/更改同一方法的行为。它是[多态性](http://en.wikipedia.org/wiki/Polymorphism_in_object-oriented_programming)的一种实现。使用`new`，您可以创建一个全新的方法。它恰好与另一种方法具有相同的签名，但与它没有任何关系。

调用此方法时，取决于引用的类型（编译时类型），来选择您实际调用的方法。

您的代码相当于：

```
public class A
{
    public virtual string SomeMethod()
    {
        return "A";
    }
}

public class B : A
{
    public override string SomeMethod()
    {
        return "B";
    }
}

public class C : B
{
    public virtual string AnotherMethod()
    {
        return "C";
    }
}

public class D : C
{
    public override string AnotherMethod()
    {
        return "D";
    }
}

private void Test()
{
    A a = new D();
    B b = new D();
    C c = new D();
    D d = new D();
    Console.WriteLine(a.SomeMethod()); //The method in class B is being called
    Console.WriteLine(b.SomeMethod()); //The method in class B is being called
    Console.WriteLine(c.AnotherMethod()); //The method in class D is being called
    Console.WriteLine(d.AnotherMethod()); //The method in class D is being called
} 
```

编译器选择调用 AnotherMethod 来引用类型 C（和 D）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T10:46:49.220

这是一个众所周知的行为：当您*隐藏*方法（使用`new`）时，仅当您通过隐藏类型的实例访问它时才会调用它；当您使用基类的实例时，将使用原始方法。

*隐藏*不是*压倒一切*的。**

# java - 无法在 IntelliJ 中调试 Web 服务代码

> ID：12140428
> 
> 赞同：7
> 
> 时间：2012-08-27T10:41:02.103
> 
> 标签：java, debugging, windows-services, intellij-idea

我已经安装了一个窗口服务。我在 Intelli J 中打开了应用程序的源代码。

我将 IntelliJ 配置如下 ![在此处输入图像描述](../Images/7a1c80b6f93f5e93f8cf801fa51f5cbb.png)

我检查了它正在使用的服务和端口的 PID。

在 Intelli J 中运行远程配置时出现以下错误

```
4:09:18 PM Error running Remote: Unable to open debugger port : java.net.ConnectException "Connection refused: connect" 
```

有人可以说明如何在 IntelliJ 中调试窗口服务。这是一个工作计划应用程序。

installService.cmd 如下

```
set HOME_DIR=%~dp0
set SERVICE="Service_Name"
SET JAVA_OPTIONS=-Xms256m -Xmx256m
@echo Service name is Service_Name
"pathname\Service_Name.exe" -install %SERVICE% %JVM% %JAVA_OPTIONS% -Djava.class.path="pathname\Service_Name.jar" -Dorg.quartz.properties="pathname/Service_NameScheduler.properties" -start com.org.st.Service_Name -stop com.org.st.Service_Name -out "D:/core_log\Service_Name_service_out.log" -err "D:/core_log\Service_Name_service_error.log" -current "pathname\apps"
set JVM="C:/Program Files/Java/jdk1.6.0_29/jre/bin/server/jvm.dll" 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T21:51:08.497

检查端口号。它应该与端口号下的 JAVA_OPTIONS & Intellij Idea Debugger 远程配置相同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T12:28:54.637

请将 IntelliJ 调试配置中的命令行参数附加到该`SET JAVA_OPTIONS`行，它将类似于

```
SET JAVA_OPTIONS=-Xms256m -Xmx256m -Xdebug -Xrunjdwp:transport=dt_socket,server=y,suspend=n,address=51211 
```

并重新安装服务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T12:44:24.250

确保您正在侦听的任何端口都没有被防火墙阻止。

# android - 我可以有 3 个 sharedpreferences 文件以及如何阅读每个文件

> ID：12140429
> 
> 赞同：1
> 
> 时间：2012-08-27T10:41:03.913
> 
> 标签：android

我在 xml 文件夹中有三个文件

```
beginning_text.xml
preferences.xml
caller.xml 
```

所有三个文件都用作 SharedPreferences 文件

我可以使用所有三个文件作为

```
PreferenceManager.setDefaultValues(this, R.xml.sms_beginning_text, false);
       addPreferencesFromResource(R.xml.sms_beginning_text);

PreferenceManager.setDefaultValues(this, R.xml.preferences, false);
       addPreferencesFromResource(R.xml.preferences);

PreferenceManager.setDefaultValues(this, R.xml.caller, false);
       addPreferencesFromResource(R.xml.caller); 
```

然后像这样阅读它：

```
SharedPreferences sharedPreferences = PreferenceManager.getDefaultSharedPreferences(this); 
```

或者我怎样才能读取和保存 3 个不同的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:44:08.260

声明您的首选项文件的名称，并在检索首选项时，提及您要在 getSharedPreferences() 中访问的文件的名称。

这里我声明了两个文件名：PrefFile 和 PrefFileNEW；然后我在检索首选项时将各自的名称传递给 getSharedPreference()。

```
public static final String PREF_FILE_NAME = "PrefFile";
public static final String PREF_FILE_NAME_NEW = "PrefFileNEW";
SharedPreferences preferences = getSharedPreferences(PREF_FILE_NAME, MODE_PRIVATE);
{
//access your preferences here
}

SharedPreferences preferences_new = getSharedPreferences(PREF_FILE_NAME_NEW, MODE_PRIVATE);

{
//access your preferences_new here
} 
```

希望能帮助到你。

# css - 如何CSS居中一个div，它是表单元素的子元素？

> ID：12140432
> 
> 赞同：0
> 
> 时间：2012-08-27T10:41:26.903
> 
> 标签：css, forms, html, center, alignment

我不确定我做错了什么，但我一直在努力让这个 div 居中：

```
<form>
    <div class="submitter">
        <div data-role="controlgroup" data-type="horizontal">
            <input type="submit" value="submit" data-theme="e" />
            <input type="reset" value="reset" />
        </div>
    </div>
</form> 
```

表格中有更多内容，但我只是对控制组的中心感兴趣。

我已经尝试了我所知道的一切`text-align`，`margin: 0 auto`但我无法让它发挥作用。在我绝望中，我为表单设置了一个固定宽度并添加了提交者元素，我正在扩展它`100%`，然后将控制组设置为`display:inline-block`但我无法让它工作......

**问题**：
如何将控制组放置在表单的中心？

谢谢！

**编辑：**
这是我的表格 ![在此处输入图像描述](../Images/c97a4960249dd62367055d3f4d257863.png)

两列都是`ul`元素，`width:49%;display:inline;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:47:20.060

[http://jsfiddle.net/Kyle_Sevenoaks/fNYb4/](http://jsfiddle.net/Kyle_Sevenoaks/fNYb4/)

使用`margin: 0 auto;`属性选择器在内部 div 上使用似乎有效。

```
div[data-role="controlgroup"]
{
    width: 50%;
    margin: 0 auto;
} 
```

请记住，父元素需要设置宽度以及要居中的元素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:46:00.530

保证金：0自动；对我有用（你应该使用 margin:0 auto 为你的块设置宽度；）

CSS：

```
<style>
.one {
border:1px solid;
width:300px;
margin:0 auto;
}
</style> 
```

HTML：

```
<form>
    <div class="submitter">
        <div data-role="controlgroup" data-type="horizontal" class="one">
            <input type="submit" value="submit" data-theme="e" />
            <input type="reset" value="reset" />
        </div>
    </div>
</form> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T10:53:56.547

我认为您应该首先针对父div ...

这是我在 jsFiddle 上的[解决方案](http://jsfiddle.net/5ghVM/)

# php - 如何在 Ubuntu 12.04 系统上的 PHP 5.3.10 中启用 Socket

> ID：12140433
> 
> 赞同：3
> 
> 时间：2012-08-27T10:41:26.727
> 
> 标签：php, php-socket

我正在尝试在 linux 上的 PHP 中启用 Socket。我检查了 php.ini 但在该文件中没有得到以下行。

```
;extension=php_sockets.so 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-28T06:01:24.530

根据它，您已经安装了[php5 libapache2-mod-php5](http://packages.debian.org/sid/libapache2-mod-php5)。

> 内置以下扩展： bcmath bz2 calendar Core ctype date dba dom ereg exif fileinfo filter ftp gettext hash iconv json libxml mbstring mhash openssl pcre Phar posix Reflection session shmop SimpleXML soap **sockets** SPL 标准 sysvmsg sysvsem sysvshm tokenizer wddx xml xmlreader xmlwriter zip zlib。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:10:13.583

它不需要外部模块。检查 phpinfo() 结果以查看 PHP 是否使用 --enable-sockets 编译！（如果你是用apt-get或者Ubuntu的软件中心安装的，应该还可以吧！）

# javascript - 如何在构建html标签时忽略“测试 - 文本”等单词中未使用的空格

> ID：12140434
> 
> 赞同：1
> 
> 时间：2012-08-27T10:41:27.727
> 
> 标签：javascript, html, html-entities

我正在形成这样的标签 `"<a href=instruction=name,value=" + sParameter +">"</a>"`

但我期待一些由空格分隔的文本，如“测试 - 文本”代替 sParameter。当这样的词代替 sParameter 时，它显示的第一部分意味着在“-”（连字符）之前。但是当我得到一个像“Test-Text”这样的词时，它会正确显示完整的词。任何人都可以帮助我显示这种类型的单词（“测试 - 文本”）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:45:36.983

将空间更改为 URLEncoded 等效项（即 %20）。

含义，sParameter =`Test%20-%20Text`

# javascript - 函数未在准备好的 jquery 文档上执行

> ID：12140435
> 
> 赞同：0
> 
> 时间：2012-08-27T10:41:30.563
> 
> 标签：javascript, jquery

我有一个 javascript 函数，可以根据周围的容器大小（这又取决于窗口大小）调整图像大小和居中图像。我使用 jquery 作为 js 框架。该函数需要在文档加载后执行（在文档准备就绪时），但也需要在用户更改浏览器大小时执行，即我在 html-document 中运行以下内容：

```
$(document).ready(function(){
   fixImageSizes();
});

$(window).resize(function() {
   fixImageSizes();
}); 
```

但由于某些未知原因，该功能仅在用户调整浏览器大小时执行，而不是在加载后执行。有人可以帮忙吗？

（我的功能如下知识...）

```
function fixImageSizes()
{
var cw = $('#imagecontainer').width();
var ch = $('#imagecontainer').height();
$('#imagecontainer img').each(function()
{
    var iw = $(this).css('width');
    var ih = $(this).css('height');
    if (parseInt(iw) < parseInt(cw)) // image width < viewport
    {
        var newih = Math.ceil(parseInt(ih) * parseInt(cw) / parseInt(iw)) + 'px';
        var newimargint = '-' + Math.ceil(parseInt(newih)/2) + 'px';
        var newimarginl = '-' + Math.ceil(parseInt(cw)/2) + 'px';
        $(this).css({'width':cw,'height':newih,'margin-left':newimarginl,'margin-top':newimargint});
    }
    if (parseInt(ih) < parseInt(ch)) // image height < viewport
    {
        var newiw = Math.ceil(parseInt(iw) * parseInt(ch) / parseInt(ih)) + 'px';
        var newimargint = '-' + Math.ceil(parseInt(ch)/2) + 'px';
        var newimarginl = '-' + Math.ceil(parseInt(newiw)/2) + 'px';
        $(this).css({'width':newiw,'height':ch,'margin-left':newimarginl,'margin-top':newimargint});
    }
    if (parseInt(ih) > parseInt(ch) && parseInt(iw) > parseInt(cw)) // viewport smaller than image, shrink image
    {
        if (parseInt(ch) - parseInt(ih) > parseInt(cw) - parseInt(iw)) // difference is less on height
        {
            var newiw = Math.ceil(parseInt(iw) * parseInt(ch) / parseInt(ih)) + 'px';
            var newimargint = '-' + Math.ceil(parseInt(ch)/2) + 'px';
            var newimarginl = '-' + Math.ceil(parseInt(newiw)/2) + 'px';
            $(this).css({'width':newiw,'height':ch,'margin-left':newimarginl,'margin-top':newimargint});
        } 
        else // difference less on width
        {
            var newih = Math.ceil(parseInt(ih) * parseInt(cw) / parseInt(iw)) + 'px';
            var newimargint = '-' + Math.ceil(parseInt(newih)/2) + 'px';
            var newimarginl = '-' + Math.ceil(parseInt(cw)/2) + 'px';
            $(this).css({'width':cw,'height':newih,'margin-left':newimarginl,'margin-top':newimargint});
        }
    }

}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:44:42.480

您应该使用`load`事件而不是`ready`事件。

该`ready`事件在文档加载之后但在图像加载之前运行，因此您不会拥有所有元素的正确大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:51:03.190

该功能可能正在执行（您可以使用简单的警报进行仔细检查），但您正在“修复”的图像可能尚未加载。您可以`window.onload`像这样使用该事件或监听图像加载事件：

```
var scale = function() {
    // rescale
};

$('#imagecontainer img').each(function() {
    this.complete ? scale.call(this) : $(this).load(scale);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:46:12.833

尝试这个：

```
$(window).load(function (){
    fixImageSizes();
}); 
```

# iphone - 在低内存设备中播放动画时性能变慢

> ID：12140437
> 
> 赞同：0
> 
> 时间：2012-08-27T10:41:32.163
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我是 iPhone 开发的新手。我正在开发像会说话的汤姆这样的应用程序。我在这里使用计时器来为图像设置动画。对于每个动画我都使用单独的计时器。拥有超过 5GB 可用空间的设备没有问题。但是我在低内存设备上玩时遇到了问题。动画在这些设备中变慢。请帮助我。提前致谢。请以正确的方式指导我...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:25:37.087

尝试在不同的线程中运行您的计时器。

# c# - 禁用 C# 内部方法的下载源，例如 object.ToString()

> ID：12140440
> 
> 赞同：0
> 
> 时间：2012-08-27T10:41:40.023
> 
> 标签：c#, resharper, resharper-6.0

有什么方法可以禁用像 ToString() 这样的 C# 内部方法的反编译？每次我不小心 ctrl+click 方法，它会花费一些时间来下载库源。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:13:10.387

您可以在选项 -> 外部源（底部的工具部分）上更改 resharper 的行为。选择“默认 Visual Studio 导航”。

# c++ - 如何将 XML 文件拆分为多个 XML，以便每个新文件仅包含原始文件中的一个文本节点？

> ID：12140443
> 
> 赞同：1
> 
> 时间：2012-08-27T10:41:50.507
> 
> 标签：c++, xml, xslt, libxml2

我有一个看起来像这样的 XML（任意 XML 输入）

```
<NodeLevel1>
    <NodeLevel2>
        <NodeLevel3>
            Sample text 1
        </NodeLevel3>
    </NodeLevel2>

    <NodeLevel2>
        .
        .
        .
        ... <NodeLevelN>
                Some deep thought
            </NodeLevelN>
    </NodeLevel2>

    <NodeLevel2>
        Sample text 2
    </NodeLevel2>
    Sample text 3
</NodeLevel1> 
```

XSLT 转换后我想要的是 4 个新的 XML，只包含一个文本节点，如以下 4 个 XML：

1.

```
 <NodeLevel1>
        <NodeLevel2>
            <NodeLevel3>
                Sample text 1
            </NodeLevel3>
        </NodeLevel2>
    </NodeLevel1> 
```

2.

```
 <NodeLevel1>    
        <NodeLevel2>
            .
            .
            .
            ... <NodeLevelN>
                    Some deep thought
                </NodeLevelN>
        </NodeLevel2>
    </NodeLevel1> 
```

3.

```
 <NodeLevel1>
        <NodeLevel2>
            Sample text 2
        </NodeLevel2>
    </NodeLevel1> 
```

4.

```
 <NodeLevel1>
        Sample text 3
    </NodeLevel1> 
```

最好的方法是什么？我正在使用 C++（我可以使用 libxml2 和 libxslt）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:04:27.627

我会将 XSLT 2.0 与libxslt 一起使用，`xsl:result-document`或者在您的情况下与 libxslt 一起使用，您也可以使用`exsl:document`扩展元素：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0"
  xmlns:exsl="http://exslt.org/common"
  extension-element-prefixes="exsl"
  exclude-result-prefixes="exsl">

<xsl:template match="/">
  <xsl:apply-templates select="NodeLevel1/node()[self::* or self::text()[normalize-space()]]" mode="new-doc"/>
</xsl:template>

<xsl:template match="NodeLevel1/node()" mode="new-doc">
  <exsl:document href="result{position()}.xml">
    <NodeLevel1>
      <xsl:copy-of select="."/>
    </NodeLevel1>
  </exsl:document>
</xsl:template>

</xsl:stylesheet> 
```

再考虑一下这个问题，我改进了样式表以使用任何类型的根元素：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0"
  xmlns:exsl="http://exslt.org/common"
  extension-element-prefixes="exsl"
  exclude-result-prefixes="exsl">

<xsl:template match="/">
  <xsl:apply-templates select="*/node()[self::* or self::text()[normalize-space()]]" mode="new-doc"/>
</xsl:template>

<xsl:template match="/*/node()" mode="new-doc">
  <exsl:document href="result{position()}.xml">
    <xsl:element name="{name(..)}" namespace="{namespace-uri(..)}">
      <xsl:copy-of select="."/>
    </xsl:element>
  </exsl:document>
</xsl:template>

</xsl:stylesheet> 
```

[编辑] 如果你想使用像 Saxon、AltovaXML 或 XmlPrime 这样的 XSLT 2.0 处理器，这里有一个 XSLT 2.0 样式表：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="2.0">

<xsl:template match="/">
  <xsl:apply-templates select="*/(* | text()[normalize-space()])" mode="new-doc"/>
</xsl:template>

<xsl:template match="/*/node()" mode="new-doc">
  <xsl:result-document href="result{position()}.xml">
    <xsl:element name="{name(..)}" namespace="{namespace-uri(..)}">
      <xsl:copy-of select="."/>
    </xsl:element>
  </xsl:result-document>
</xsl:template>

</xsl:stylesheet> 
```

# video - 提交带有 curl 的按钮

> ID：12140444
> 
> 赞同：1
> 
> 时间：2012-08-27T10:41:54.453
> 
> 标签：video, curl, hyperlink

我会得到隐藏在 POST 请求后面的网页的来源。该网站是 Putlocker（与 Sockshare 相同），这是一个示例链接[http://www.putlocker.com/file/09B928FA1007844E](http://www.putlocker.com/file/09B928FA1007844E)

我需要单击`Continue as free user`按钮，然后获取 HTTP 源以获取视频链接。

# asp.net-mvc - 在生产环境中批量创建用户帐户到 asp.net mvc3 成员表

> ID：12140449
> 
> 赞同：1
> 
> 时间：2012-08-27T10:42:24.593
> 
> 标签：asp.net-mvc, membership, import-from-csv

在开发环境中，我使用 Visual Studio 中的 ASP.NET 配置工具来创建一些用户进行测试。随着我更接近 QA 和生产，我想知道在应用程序部署后自动化创建大量（1000 个）用户的最佳方式是什么。

我有一个包含所有用户名和密码、角色等的 csv，我不想利用内置的加密和密码加盐安全性。我不想手动“注册”所有这些用户。我只是不确定这是否是我能做的（或指示数据库管理员为我执行）。

有谁知道实现这一目标的方法？

任何帮助将不胜感激。

问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:47:26.030

The simplest solution would be to set up a "CSV Upload" form. The CSV would be processed by an MVC action calling `Membership.CreateUser` in a loop.

Probably, the performance of this will be good enough.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:24:17.947

我知道有几种方法可以解决 ASP.NET 站点上的批处理问题。

由于 ASP.NET 站点的应用程序池可以被回收的方式很奇怪，批处理通常在外部进程上完成。

**视窗服务**

一种方法是单独的 Windows 服务，它获取新的 excel 并将数据输入，并有一个持续运行的计时器。我经常看到它被使用，这很痛苦，因为它需要额外的工作才能使其易于部署。 [从 Windows 服务更新 ASP.Net 成员资格](https://stackoverflow.com/questions/727123/update-asp-net-membership-from-windows-service)

**缓存项**

第二种方法是使用 CacheItems 及其过期计时器进行批处理，您所做的是定义一个带有长计时器的缓存对象，当该对象过期并调用 Removed-callback 时，您就可以完成数据库工作。这很好，因为它与您的 ASP.NET 站点一起部署，并且您将代码放在一个合乎逻辑的位置。 [https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/](https://blog.stackoverflow.com/2008/07/easy-background-tasks-in-aspnet/)

**工作流基础**

第三种方式，是做一个工作流基础服务。该服务从您的 ASP.NET 站点收到一个调用，该站点实例化一个 WF 服务，该服务对您的 excel 文件执行一些 db 工作，然后它进入一个延迟一个月的 while 循环。这很好，因为它与 ASP.NET 应用程序池的生命周期无关——您可以获得更多控制权，并且此逻辑可以分离到不同的 IIS 托管 WCF 服务中。 [http://msdn.microsoft.com/en-us/library/dd489452.aspx](http://msdn.microsoft.com/en-us/library/dd489452.aspx)

但是，与数据集成总是很痛苦，请记住，在部署时为您提供最少工作和最少失败机会的解决方案是最佳解决方案。

# c# - 服务器端库，用于将办公文件转换为带有添加印章/水印的 pdf

> ID：12140452
> 
> 赞同：1
> 
> 时间：2012-08-27T10:42:28.057
> 
> 标签：c#, pdf, ms-office, watermark, aspose

我需要获取 Word、Excel、PowerPoint 和 Visio 文件，并使用 C# 在服务器端将它们转换为 PDF。

在 PDF 转换之前或之后的某个时间点，客户希望将印章/水印添加到文档的角落（假设现在在每一页上）。

我无法在此过程中使用 Office 产品，因为使用“互操作”服务器端涉及许可和稳定性问题。另外，出于类似的原因，我宁愿不依赖服务器上安装的任何其他软件；此功能将被多个客户端同时使用。

我花了几天时间搜索， [Aspose](http://www.aspose.com/)似乎是唯一合适的库，但它似乎过于昂贵。我欢迎任何可以完成所有要求的建议，或者单独的库来分别处理水印和转换为 PDF

更新：到目前为止，我有一个原型，可以将上述所有文件类型转换为 pdf，并使用 Aspose 添加水印。比较简单，在挑剔的时候论坛可以帮上大忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:05:43.907

我认为 AbcPDF 将以大约一半的价格做到这一点：[http ://www.websupergoo.com/abcpdf-office-docs.htm](http://www.websupergoo.com/abcpdf-office-docs.htm)

您可能必须自己滚动水印部分，但这对编码来说非常简单。

这里还有很多库列表：[.NET server based PDF generation](https://stackoverflow.com/questions/450833/net-server-based-pdf-generation)

# c# - 将正则表达式中的文本更改为大写

> ID：12140456
> 
> 赞同：3
> 
> 时间：2012-08-27T10:42:52.093
> 
> 标签：c#, .net

我有个问题。如何将“<”和“>”（HTML 标记）之间的文本更改为大写字母？部分代码：

```
string a= @"<html><b>hello world!</b>
<table>test</table></html>";
a = Regex.Replace(a, @"<(.|\n)*?>", String.Empty); 
```

现在，输出是：

```
hello world!
test 
```

我想拥有：

```
<HTML><B>hello world!</B>
<TABLE>test</TABLE></HTML> 
```

我知道 String.Empty 删除 < > 之间的代码，但是如何将此文本更改为大写字母？只是给我一些建议，如何做到这一点。

问候！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T10:47:40.230

```
a = Regex.Replace(a, @"<(.|\n)*?>", m=>m.Value.ToUpper()); 
```

# java - 通过 Java 在 Matlab 中计算 MD5 哈希（符合 RFC 1321）

> ID：12140458
> 
> 赞同：5
> 
> 时间：2012-08-27T10:43:02.980
> 
> 标签：java, matlab, hash, md5, rfc

我想使用 Java-Security-Implementations 在 MATLAB 中计算 MD5（或其他）文件哈希（符合[RFC 1321 ）。](http://www.ietf.org/rfc/rfc1321.txt)因此我编码

```
mddigest=java.security.MessageDigest.getInstance('MD5');
filestream=java.io.FileInputStream(java.io.File(filename));
digestream=java.security.DigestInputStream(filestream,mddigest);
md5hash=reshape(dec2hex(typecast(mddigest.digest,'uint8')),1,[]) 
```

并且例程工作正常。不知何故，结果与给定的工具不同。
也许文件编码有问题？MATLAB 不应该在内部解决这个问题吗？
我想重现结果，一个是 md5sum （在 linux 上），它等于 HashCalc （Windows）的结果。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-31T12:18:30.443

有两个问题：

1.  你不读文件。
2.  您必须先转置矩阵，然后再对其进行整形。

此代码有效：

```
mddigest   = java.security.MessageDigest.getInstance('MD5'); 
filestream = java.io.FileInputStream(java.io.File(filename)); 
digestream = java.security.DigestInputStream(filestream,mddigest);

while(digestream.read() ~= -1) end

md5hash=reshape(dec2hex(typecast(mddigest.digest(),'uint8'))',1,[]); 
```

**/!\**编辑：[p.vitzliputzli](https://stackoverflow.com/users/1260721/p-vitzliputzli)回答了一个[更快的解决方案](https://stackoverflow.com/a/40483925/1753493)，应该使用它来代替这个解决方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-11-08T10:00:11.103

Stephane 的解决方案有效，但由于 MATLAB 的限制，无法向 DigestInputStream（或任何其他 InputStream）的读取方法提供 JAVA byte[] 数组，因此速度很慢。

但是，我们可以调整 Thomas Pornin 的[解决方案](https://stackoverflow.com/a/6350731/1260721)（丢弃 FileInputStream）以达到：

```
mddigest   = java.security.MessageDigest.getInstance('MD5'); 

bufsize = 8192;

fid = fopen(filename);

while ~feof(fid)
    [currData,len] = fread(fid, bufsize, '*uint8');       
    if ~isempty(currData)
        mddigest.update(currData, 0, len);
    end
end

fclose(fid);

hash = reshape(dec2hex(typecast(mddigest.digest(),'uint8'))',1,[]); 
```

这个解决方案大约需要 0.018 秒来计算一个 713kB 文件的哈希值，而另一个解决方案大约需要 31 秒。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T10:54:48.183

你从来没有[从`DigestInputStream`](http://docs.oracle.com/javase/7/docs/api/java/security/DigestInputStream.html#read%28byte%5B%5D,%20int,%20int%29).

这意味着不会消化任何字节。

您必须读取整个文件（通过`DigestInputStream`），*然后*调用`digest`以获取摘要值。

# mime - 使用scrapy爬行时如何跳过某些文件类型？

> ID：12140460
> 
> 赞同：6
> 
> 时间：2012-08-27T10:43:12.577
> 
> 标签：mime, scrapy

我想在使用scrapy爬行时跳过一些文件类型链接.exe .zip .pdf，但不想使用带有特定url常规的规则。如何？

更新：

因此，当正文尚未下载时，很难决定是否仅通过 Content-Type 响应此链接。我更改为在下载器中间件中删除 url。谢谢彼得和利奥。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-29T03:53:17.777

如果你转到 Scrapy 根目录中的 linkextractor.py，你会看到以下内容：

```
"""
Common code and definitions used by Link extractors (located in
scrapy.contrib.linkextractor).
"""

# common file extensions that are not followed if they occur in links
IGNORED_EXTENSIONS = [
    # images
    'mng', 'pct', 'bmp', 'gif', 'jpg', 'jpeg', 'png', 'pst', 'psp', 'tif',
    'tiff', 'ai', 'drw', 'dxf', 'eps', 'ps', 'svg',

    # audio
    'mp3', 'wma', 'ogg', 'wav', 'ra', 'aac', 'mid', 'au', 'aiff',

    # video
    '3gp', 'asf', 'asx', 'avi', 'mov', 'mp4', 'mpg', 'qt', 'rm', 'swf', 'wmv',
    'm4a',

    # other
    'css', 'pdf', 'doc', 'exe', 'bin', 'rss', 'zip', 'rar',
] 
```

但是，由于这适用于链接提取器（并且您不想使用规则），我不确定这是否会解决您的问题（我刚刚意识到您指定您不想使用规则。我以为您有询问如何更改文件扩展名限制而不需要直接在规则中指定）。

好消息是，您还可以构建自己的下载器中间件，并将任何/所有请求丢弃到具有不良扩展名的 url。请参阅[下载器中间件](http://scrapy.readthedocs.org/en/latest/topics/downloader-middleware.html)

您可以通过访问对象的 url 属性来获取请求`request`的 url，如下所示：`request.url`

基本上，在字符串末尾搜索“.exe”或您要删除的任何扩展名，如果它包含所述扩展名，则返回`IgnoreRequest`异常，请求将立即被删除。

**更新**

为了在下载请求之前处理请求，您需要确保在自定义下载器中间件中定义“process_request”方法。

根据 Scrapy 文档

`process_request`

> 每个通过下载中间件的请求都会调用此方法。
> 
> process_request() 应该返回 None、Response 对象或 Request 对象。
> 
> 如果它返回 None，Scrapy 将继续处理这个请求，执行所有其他中间件，直到最后，适当的下载器处理程序被称为执行的请求（并下载它的响应）。
> 
> 如果它返回一个 Response 对象，Scrapy 不会费心调用任何其他请求或异常中间件，或适当的下载函数；它会返回那个响应。响应中间件总是在每个响应上被调用。
> 
> 如果它返回一个 Request 对象，则返回的请求将被重新调度（在调度程序中）以供将来下载。将始终调用原始请求的回调。如果新请求有回调，它将在下载响应时调用，然后该回调的输出将传递给原始回调。如果新请求没有回调，则下载的响应将仅传递给原始请求回调。
> 
> 如果它返回一个 IgnoreRequest 异常，整个请求将被完全丢弃，并且它的回调永远不会被调用。

所以本质上，只需创建一个下载器类，添加一个方法类process_request，它以请求对象和蜘蛛对象为参数。如果 url 包含不需要的扩展名，则返回 IgnoreRequest 异常。

这一切都应该在页面被下载之前发生。但是，如果您想要处理响应标头，则必须向网页发出请求。

您始终可以在下载器中同时实现 process_request 和 process_response 方法，其想法是立即删除明显的扩展名，并且如果由于某种原因 url 不包含文件扩展名，则请求将被处理并被捕获process_request 方法（因为您可以在标题中验证）？

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-28T06:33:09.913

.zip and .pdf are [ignored by scrapy by default](https://github.com/scrapy/scrapy/blob/master/scrapy/linkextractor.py).

As a general rule you can either configure a rule to include only urls that match your regexp (.htm* in this case):

```
rules = (Rule(SgmlLinkExtractor(allow=('\.htm')), callback='parse_page', follow=True, ), ) 
```

or exclude the ones that match a regexp:

```
rules = (Rule(SgmlLinkExtractor(allow=('.*'), deny=('\.pdf', '\.zip')), callback='parse_page', follow=True, ), ) 
```

Read [the documentation](http://doc.scrapy.org/en/latest/topics/link-extractors.html) for more information.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-05-12T20:02:00.573

我构建了这个中间件来排除任何不在正则表达式白名单中的响应类型：

```
from scrapy.http.response.html import HtmlResponse
from scrapy.exceptions import IgnoreRequest
from scrapy import log
import re

class FilterResponses(object):
    """Limit the HTTP response types that Scrapy dowloads."""

    @staticmethod
    def is_valid_response(type_whitelist, content_type_header):
        for type_regex in type_whitelist:
            if re.search(type_regex, content_type_header):
                return True
        return False

    def process_response(self, request, response, spider):
        """
        Only allow HTTP response types that that match the given list of 
        filtering regexs
        """
        # to specify on a per-spider basis
        # type_whitelist = getattr(spider, "response_type_whitelist", None)
        type_whitelist = (r'text', )
        content_type_header = response.headers.get('content-type', None)
        if not content_type_header or not type_whitelist:
            return response

        if self.is_valid_response(type_whitelist, content_type_header):
            return response
        else:
            msg = "Ignoring request {}, content-type was not in whitelist".format(response.url)
            log.msg(msg, level=log.INFO)
            raise IgnoreRequest() 
```

要使用它，请将其添加到 settings.py：

```
DOWNLOADER_MIDDLEWARES = {
    '[project_name].middlewares.FilterResponses': 999,
} 
```

# hibernate - JPA/Hibernate @SequenceGenerator：负序列支持

> ID：12140461
> 
> 赞同：1
> 
> 时间：2012-08-27T10:43:17.180
> 
> 标签：hibernate, jpa, generator, sequence

我在 DB 中有一个负序列（-1、-2、-3 等），我想用它来为我的实体生成 ID：

```
@Entity
@Table(name="FOO")
@SequenceGenerator(name="foo_seq", sequenceName="negative_seq", allocationSize=1)
public class Foo {
    @Id
    @Column(name="id")
    @GeneratedValue(strategy=GenerationType.SEQUENCE, generator="foo_seq")
    private Long id;
} 
```

问题是使用它并在以下代码`SequenceHiLoGenerator`中的方法中进入无限循环：`generate`

```
while ( value == null || value.lt( 0 ) ) {
    value = super.generateHolder( session );
} 
```

这是否意味着Hibernate不支持负序列？还是我做错了什么？我在 Hibernate 文档中没有找到关于使用负序列的任何提及。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:22:02.087

不支持递减序列生成器，不。但是很容易添加你自己的`org.hibernate.id.IdentifierGenerator`实现来做到这一点。让我们称之为`org.my.DecreasingSequenceGenerator`：

```
@Entity
@Table(name="FOO")
@GenericGenerator(
    name="my_seq",
    strategy="org.my.DecreasingSequenceGenerator",
    parameters = {
        @Parameter( name="sequence", value="negative_seq" ),
        ...
    }
)
public class Foo {
    @Id
    @Column(name="id")
    @GeneratedValue(generator="my_seq")
    private Long id;
} 
```

传入您希望`DecreasingSequenceGenerator`实现具有的任何参数化。

# git-submodules - Symfony2/Git/CloudControl 从 Composer 切换到子模块

> ID：12140462
> 
> 赞同：0
> 
> 时间：2012-08-27T10:43:21.970
> 
> 标签：git-submodules, composer-php, cloudcontrol

我需要从 Composer（Symfony2 默认使用）切换到 Git 子模块。我以为我可以将所需的子模块添加到所需的位置，从而覆盖 Composer 安装的当前版本。

但是当我使用时`git submodule add`，它说：

```
'vendor/twig/twig' already exists in the index 
```

所以我尝试了：

```
git rm vendor/twig/twig 
```

并尝试再次添加子模块，同样的错误。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T19:21:37.680

我是 cloudControl 的创始人兼 CEO。目前 composer 确实破坏了我们的图像构建过程，因为它以某种方式干扰了我们必须检测子模块的逻辑。团队已意识到此问题并正在努力解决根本问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-29T11:04:13.850

我正在为 cloudControl 工作，我们最近一直在调查这个问题。关于最初的问题，您已经提出了一个用 git 子模块替换作曲家包的正确解决方案，这只是一个 git 命令问题。但是这样做并没有多大意义，只要这些 git 子模块与 Composer 包相同，并且您的 php 代码仍然挂在 Composer 提供的 autoload.php 上。

我们还没有在内部处理 Composer，它们的文件只是添加到存储库中，其余的由 php 代码要求完成。但是我们确实处理 git 子模块，所以如果你想真正从 Composer 切换到 Git 子模块，最好的选择是摆脱 Composer 文件（`vendor`文件夹和`composer.*`文件），在任何你想要的地方添加 git 子模块并再次处理 php 依赖项。因此，一切都应该正常工作，您将完全切换到 git 子模块。

对 Composer 的原生支持是我们未来的计划。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-28T14:31:22.373

问题是我必须首先实际删除和 git-remove 存储库。

即对于树枝，我最终所做的是：

```
git rm -r vendor/twig/*
rm -r vendor/twig/*
git add vendor/.
git submodule add git://github.com/fabpot/Twig.git vendor/twig/twig
git submodule add https://github.com/fabpot/Twig-extensions.git vendor/twig/extensions 
```

现在我有 twig 和 twig 扩展作为 git 子模块，可以在我的云应用程序中使用它。

# ios - 启动图像和启动画面之间的区别

> ID：12140464
> 
> 赞同：26
> 
> 时间：2012-08-27T10:43:23.417
> 
> 标签：ios, iphone, ipad, splash-screen, human-interface

我正在阅读 iOS 人机界面指南。

它被称为

1.  **显示与应用程序的第一个屏幕非常相似的**启动图像。**这种做法减少了应用程序的感知启动时间。**

***   **避免显示关于窗口或闪屏**。一般来说，尽量避免提供任何类型的启动体验，阻止人们立即使用您的应用程序。** 

 **启动图像和启动画面有什么区别？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-27T10:55:35.843

启动图像是您启动应用程序时出现的图像，您放入 xcode 中的图像（iphone、iphone 视网膜、ipad 横向、ipad 横向视网膜、ipad 纵向和 ipad 纵向视网膜）Apple 建议使用您的应用程序主窗口的屏幕截图，因此您的应用启动速度似乎更快（我使用没有按钮的屏幕截图）

Splass screen，比如游戏使用的屏幕，可以看到公司logo和其他一些信息，其中一些甚至使用2或3个splas屏幕。您必须以编程方式包含它们

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2018-01-25T21:38:43.417

^(哇，没有接受或高度赞成的答案的老问题，由于编辑而冒泡到首页。猜猜我也可以试着清理一下？)

## 启动图像（或启动屏幕）

这*由操作系统本身*显示，并且仅*在*操作系统加载您的应用程序时出现（即，*在*您的进程运行并且您自己的任何代码都有机会执行之前）。

因为您的应用程序没有运行代码来处理启动图像的显示，所以您提供的方式是 Xcode 项目构建时配置的一部分：您提供一个`LaunchScreen.storyboard`或一组静态启动图像 - 每个设备屏幕尺寸都有一个你支持。

Apple 的[人机界面指南建议](https://developer.apple.com/ios/human-interface-guidelines/icons-and-images/launch-screen/)您的启动图像是您应用程序初始 UI 的粗略复制品。有几个原因：

*   启动屏幕仅在您的应用接管之前短暂显示，并且可以显示其自己的 UI，因此让启动图像看起来像实际的 UI 会让用户感觉更像是直接进入您的应用，而不必等待某些东西别的。

*   启动屏幕只是短暂地显示，所以如果你显示的东西看起来不像你的初始 UI，用户可能会看到它闪烁并在他们能够得到体面的外观之前就消失了。

（因为您的启动屏幕应该看起来像实际的 UI，并且由于要支持许多屏幕尺寸，所以最好使用情节提要方法 - 您可以使用自动布局来确保您的假 UI 像您的真实 UI 一样适应不同的屏幕尺寸。然后 Xcode 在构建时生成必要的图像。）

## 启动画面或关于窗口

这是您在许多*不*遵循 Apple 指导的应用程序中看到的，它有两种形式（单独使用或一起使用）：

*   使用启动屏幕系统显示看起来不像应用程序初始 UI 的内容——例如，它可能是徽标或其他品牌元素，或者可能包含静态文本，如版权声明、致谢或版本信息。

*   应用程序启动后（因此可以控制屏幕以显示它想要的任何内容），继续显示徽标或品牌或其他被动内容，而不是可用的 UI。

建议不要使用第二种情况，但有时是不可避免的——尤其是游戏引擎往往需要一段时间才能启动，所以有一个“加载”屏幕可能没问题。（如果是这样，您的启动图像应该看起来像您的加载屏幕，这样用户就不会觉得他们在单独等待您的应用程序启动然后加载。）

最严重的违规者是那些实际上并没有任何额外的“加载”工作要做的应用程序，而是使用启动画面作为其启动图像，然后以编程方式继续显示该图像任意时间，以便用户获得更多有机会看到它。（在实际使用该应用程序之前，必须等待它让开，或手动关闭它。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-27T10:45:25.780

启动图像在应用加载时显示。

启动画面意味着，您显示一个包含有关信息的视图作为您的开始屏幕。您的用户应立即使用您的应用程序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T10:52:30.150

**启动图像**旨在通过显示类似于将尽快加载的界面的内容来使您的应用程序的感知启动时间感觉更快。显示徽标只会引起人们对应用程序加载速度的关注，并且不会增加用户体验。

如果您的捆绑包有 default.png，则应用程序将作为启动图像并在屏幕上保持 3 秒

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T10:51:27.720

在 iOS 初始屏幕中，当您在包中提供任何名为 Default.png 的图像时，并且在执行 mainWindow 之前，它只是将该图像加载到 iPhone 屏幕中。因此，Default.png 图像被视为 iPhone 中的启动画面。

当您在 iPhone 应用程序中加载 mainWindow 时，您可以指定任何可以在屏幕上以特定尺寸查看的图像，称为启动图像。

因此，启动映像是我们在应用程序启动和启动主窗口时提供运行时间的映像。并且这里的启动图像可以根据编写的程序动态更改，而 Default.png / 启动屏幕将为应用程序固定。

如果您还有任何问题，请告诉我？

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T11:04:52.347

启动映像可能需要一点时间。它显示应用程序何时开始加载到 iphone 易失性内存中。它显示的时间很短。

启动画面意味着，您显示一个图像，直到您的必要信息加载未完成。就像，你可以在开始任何重度游戏之前看到任何加载图像。当所有数据加载完成后，此屏幕将被移除并开始游戏。它可能会显示很长时间。！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-05T06:02:52.207

启动图像在应用加载时显示。它旨在通过显示类似于将尽快加载的界面的内容来使您的应用程序感觉更快。

启动画面意味着，您显示一个包含有关信息的视图作为您的开始屏幕。您的用户应立即使用您的应用程序。**

# php - 解析错误：语法错误，if() 中出现意外的“{”

> ID：12140465
> 
> 赞同：-1
> 
> 时间：2012-08-27T10:43:31.413
> 
> 标签：php, syntax

我收到解析错误：语法错误，意外的“{”

这是我的代码（在 wordpress 评论循环中使用）

```
<?php 
if (current_user_can('edit_comment',$comment->comment_ID)) { ?>
    <a href="<?php echo get_edit_comment_link(); ?>" title="Edit Comment">
        <img src="<?php echo get_template_directory_uri();?>/images/edit-link.png"/>
    </a>
<?php } ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:45:55.413

尝试：

```
<?php if (current_user_can('edit_comment',$comment->comment_ID)) : ?>
    <a href="<?php echo get_edit_comment_link(); ?>" title="Edit Comment">
        <img src="<?php echo get_template_directory_uri();?>/images/edit-link.png"/>
    </a>
<?php endif;?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:05:39.093

我非常喜欢一次只使用一种语言。上下文切换令人困惑。

```
<?php

if (current_user_can('edit_comment',$comment->comment_ID)) {
    printf( "<a href='%s' title='Edit Comment'><img src='%s/images/edit-link.php'/></a>",
      get_edit_comment_link(),
      get_template_directory_uri()
    );
}

?> 
```

尽管这是个人喜好，但我认为您问题中的代码在技术上没有任何问题。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T11:01:55.307

尝试这个

```
<?php 
if (current_user_can('edit_comment',$comment->comment_ID)) { 
   echo "<a href=\"get_edit_comment_link()\" title=\"Edit Comment\">
        <img src=\"get_template_directory_uri()/images/edit-link.png\"/>
    </a>";
 } ?> 
```

还有为什么不

```
<?php $a=get_edit_comment_link(); $b=get_template_directory_uri();
if (current_user_can('edit_comment',$comment->comment_ID)) {
   echo "<a href=\"$a\" title=\"Edit Comment\">
        <img src=\"$b/images/edit-link.png\"/>
    </a>";
 } ?> 
```

# windows - 使用 INF 在 Windows 中安装自定义 sAPO 交换示例

> ID：12140468
> 
> 赞同：1
> 
> 时间：2012-08-27T10:43:36.867
> 
> 标签：windows, audio

我正在尝试在最终用户系统中安装 Swap 示例。这是 Microsoft 在此[[链接]](http://msdn.microsoft.com/en-us/library/windows/hardware/gg463044.aspx)上提供的“音频系统效果”示例之一。

我想使用位于 C:\WinDDK\7600.16385.1\src\audio\sysfx\Inf 的 sysfx.inf 文件进行此安装。但是这些示例的自述文件只提到了在没有 INF 的情况下进行测试所需的步骤。对于最终用户系统，我不能采用这种手动方法。

请告知我有关使用 INF 安装此示例的过程或任何文档。

另外，请告诉我如何将 PUMASecure-Off.reg 应用于这些样本。

# cordova - sencha touch 中的文本区域字段在设备中不可滚动

> ID：12140470
> 
> 赞同：1
> 
> 时间：2012-08-27T10:43:49.353
> 
> 标签：cordova, sencha-touch, extjs, sencha-touch-2

设备上的 TextArea 滚动不起作用

**在任何设备上，当使用文本区域时，无法滚动它......**

但**在浏览器中它工作正常..**

**`Any way to scoll the text area / atleast to auto resize.`**在设备中

```
{
            xtype: 'fieldset',
            title: 'TExt aRea',

            defaults: {
                labelWidth: '36%'
            },
            items: [{
                xtype: 'textareafield',
                label: 'textareafield',

                clearIcon: true
            },
            ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T05:21:20.483

我处理它的方式是在 textareafield 上监听 keyup 事件，并在事件处理程序中，为 textarea 设置足够的高度以显示所有内容。然后滚动由容器的滚动条处理。

这是一个例子：

```
Ext.define('ExamplePanel', {
    extend: 'Ext.Panel',
    config: {
        fullscreen: true,
        scrollable: true,
        items: {
            xtype: 'textareafield',
            itemId: 'textarea',
            clearIcon: false
        }
    },

    initialize: function() {
        this.down('#textarea').on('keyup', this.grow, this);
        this.textarea = this.element.down('textarea');
        this.textarea.dom.style['overflow'] = 'hidden';
    },

    grow: function() {
        this.textarea.setHeight(this.textarea.dom.scrollHeight); // scrollHeight is height of all the content
        this.getScrollable().getScroller().scrollToEnd();
    }
}); 
```

[在Sencha Fiddle](http://www.senchafiddle.com/#Q9gjN)上试试。

我的解决方案基于这篇文章[Gmail for Mobile HTML5 Series: Autogrowth Textareas](http://googlecode.blogspot.ca/2009/07/gmail-for-mobile-html5-series.html)。您可以在文章中找到更深入的解释和裸 JavaScript 解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T06:54:12.093

so i have tried auto expand code using the following logic.

```
 {
                    xtype: 'textareafield',

                     id:'NotesTextArea',

                     maxRows: 4,
                    styleHtmlContent: true,
                    label: '',
                    clearIcon: true
                }, 
```

**the logic for auto expand text area field:**

```
initComponent: function(component, options) {

           var textarea = Ext.getCmp('NotesTextArea');
           textarea.on("keyup", function(field, event) {
                       var numOfRows=field.getValue().split("\n").length;

                       if( numOfRows>=4)
                       {
                          numOfRows= numOfRows++;
                          textarea.setMaxRows( numOfRows );
                       }

                       });
} 
```

it expands the text area field for each new line perfectly ,

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-24T17:12:50.733

```
 textarea.on("keyup",

                   function(field, event) {

                   var numOfRows=field.getValue().split("\n").length;

                   if( numOfRows>=4)
                   {
                      numOfRows= numOfRows++;
                      textarea.setMaxRows( numOfRows );
                   }

                   }); 
```

}

是正确的，但在文本清晰时它不会最小化高度所以，需要删除 if loop then ans 将是

```
 textarea.on("keyup", 
                    function(field, event) {
                   var numOfRows=field.getValue().split("\n").length;

                      numOfRows= numOfRows++;
                      textarea.setMaxRows( numOfRows );

                   }); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-02-25T11:23:02.260

```
 Ext.define('MyApp.util.TextArea', {
override: 'Ext.form.TextArea',
adjustHeight: Ext.Function.createBuffered(function (textarea) {
    var textAreaEl = textarea.getComponent().input;
    if (textAreaEl) {
        textAreaEl.dom.style.height = 'auto';
        textAreaEl.dom.style.height = textAreaEl.dom.scrollHeight + "px";
    }
}, 200, this),

constructor: function () {
    this.callParent(arguments);
    this.on({
        scope: this,
        keyup: function (textarea) {
            textarea.adjustHeight(textarea);
        },
        change: function (textarea, newValue) {
            textarea.adjustHeight(textarea);
        }
    });
}}); 
```

# service - Cloud Foundry 中的新服务有哪些错误代码范围？

> ID：12140476
> 
> 赞同：1
> 
> 时间：2012-08-27T10:44:11.157
> 
> 标签：service, numbers, cloud-foundry

.../cloudfoundry/vcap/services/ */lib/* _service/*_error.rb 中的各种服务定义了各种错误并使用唯一编号。这些数字是否有中央分配机构，还是我们只是选择随机数字并等待冲突？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T16:47:14.187

错误代码没有中央权威；此时选择随机数并注意潜在的冲突。

仅供参考，询问有关 Cloud Foundry 开源项目问题的最佳地点是 vcap-dev Google Group：[http ://groups.google.com/a/cloudfoundry.org/group/vcap-dev/](http://groups.google.com/a/cloudfoundry.org/group/vcap-dev/)

# python - 从 Python 中的代码启动终端

> ID：12140477
> 
> 赞同：-4
> 
> 时间：2012-08-27T10:44:18.397
> 
> 标签：python, console, terminal, wxpython

按下按钮时，我需要从一个 wxpython 应用程序的代码中启动一个 python 终端。是否可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T13:38:54.333

在 wxPython 领域，您可以加载一个包含 PyShell 的窗口，这是一个用 wxPython 编写的 Python shell。wxPython 演示有一个示例。还有 PyCrust（也在演示中），它为 PyShell 添加了更多功能。

否则，您可以通过使用 subprocess 模块打开一个包含 Python 的控制台来实现。

# javascript - 缩略图图像滑块

> ID：12140479
> 
> 赞同：0
> 
> 时间：2012-08-27T10:44:22.230
> 
> 标签：javascript, jquery

这就是我正在尝试的。单击每个缩略图时，我必须显示更大的图像。我需要一些帮助，以便我知道为什么单击方法对我不起作用的问题。

**拇指部分 HTML**

```
<div class="ScreenShot" id="__control0" data--ui="__control0">
<div id="thumbs" data--ui="thumbs" class="UiHLayout UiHLayoutNoWrap">
<div class="UiHLayoutChildWrapper">
<div id="__set0" data--ui="__set0" class="UiUx3DS">
<div id="__set0-items">
<div id="__view0" data--ui="__view0" class="UiUx3DSSV">
<div class="UiUx3DSSVFlow UiUx3DSSVItem UiUx3DSSVSelected" id="__item0-__set0-0" data--ui="__item0-__set0-0">
<div id="__layout0-0" data--ui="__layout0-0" class="uiVlt">
<div class="uiVltCell">
<img id="__image0-0" data--ui="__image0-0" src="images/image_01_thumb.jpg" class="UiImg" role="presentation" alt="" tabindex="-1">
</div>
</div>
</div>
<div class="UiUx3DSSVFlow UiUx3DSSVItem" id="__item0-__set0-1" data--ui="__item0-__set0-1">
<div id="__layout0-1" data--ui="__layout0-1" class="uiVlt">
<div class="uiVltCell">
<img id="__image0-1" data--ui="__image0-1" src="images/image_02_thumb.jpg" class="UiImg" role="presentation" alt="" tabindex="-1">
</div>
</div>
</div>
<div class="UiUx3DSSVFlow UiUx3DSSVItem" id="__item0-__set0-2" data--ui="__item0-__set0-2">
<div id="__layout0-2" data--ui="__layout0-2" class="uiVlt">
<div class="uiVltCell">
<img id="__image0-2" data--ui="__image0-2" src="images/image_03_thumb.jpg" class="UiImg" role="presentation" alt="" tabindex="-1">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div> 
```

**更大的图像 HTML**

```
<div id="panel" data--ui="panel" class="UiHLayout UiHLayoutNoWrap">
<div class="UiHLayoutChildWrapper">
<div id="__set1" data--ui="__set1" class="UiUx3DS">
<div id="__set1-items">
<div id="__view1" data--ui="__view1" class="UiUx3DSSV">
<div class="UiUx3DSSVFlow UiUx3DSSVItem UiUx3DSSVSelected" id="__item1-__set1-0" data--ui="__item1-__set1-0">
<div id="__layout1-0" data--ui="__layout1-0" class="uiVlt">
<div class="uiVltCell">
<img id="__image1-0" data--ui="__image1-0" src="images/image_01_large.jpg" class="UiImg" role="presentation" alt="" tabindex="-1">
</div>
</div>
</div>
<div class="UiUx3DSSVFlow UiUx3DSSVItem" id="__item1-__set1-1" data--ui="__item1-__set1-1">
<div id="__layout1-1" data--ui="__layout1-1" class="uiVlt">
<div class="uiVltCell">
<img id="__image1-1" data--ui="__image1-1" src="images/image_02_large.jpg" class="UiImg" role="presentation" alt="" tabindex="-1">
</div>
</div>
</div>
<div class="UiUx3DSSVFlow UiUx3DSSVItem" id="__item1-__set1-2" data--ui="__item1-__set1-2">
<div id="__layout1-2" data--ui="__layout1-2" class="uiVlt">
<div class="uiVltCell">
<img id="__image1-2" data--ui="__image1-2" src="images/image_03_large.jpg" class="UiImg" role="presentation" alt="" tabindex="-1">
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div> 
```

**jQuery**

```
$("#thumbs img").click(function(){
    $("#thumbs img.clicked").removeClass('clicked');
    $("#panel img").hide();
    $("#panel img:nth-child("+Number($(this).index()+1)+")").fadeIn();
    $(this).addClass('clicked');
}); 
```

这是演示：http: [//jsfiddle.net/L7yKp/5/](http://jsfiddle.net/L7yKp/5/)

单击每个缩略图时，相应的图像应为淡入。但是这里每一个更大的图像都在淡入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:14:47.073

这是一个满足您需求的简单工作演示：http: [//jsfiddle.net/D6XHt/1/](http://jsfiddle.net/D6XHt/1/)

注意：它与您的html不同，但您应该朝着正确的方向前进。我正在使用的技术有一个缺点。如果没有启用 JS，您的用户将只能在大图像上看到。

**但**一个真正的优势是，如果您有很多图像，您将节省带宽和页面加载时间。这是因为每个大图像只有在用户单击缩略图时才会加载。

这是另一个工作解决方案，其中包含文档中的所有图像。

[http://jsfiddle.net/D6XHt/2/](http://jsfiddle.net/D6XHt/2/)

如果您想在精美的灯箱弹出窗口中显示您的图像，请尝试

*   [http://fancybox.net/home](http://fancybox.net/home)或
*   [http://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

# objective-c - 无法在应用程序启动时隐藏 NSFontPanel

> ID：12140480
> 
> 赞同：1
> 
> 时间：2012-08-27T10:44:23.667
> 
> 标签：objective-c, cocoa, nswindow, nspanel

我正在为我想使用 NSFontPanel 的应用程序创建一个功能。我不想在我的应用程序中有“字体”菜单。

单击菜单项时打开和关闭字体面板是这样完成的

```
- (IBAction) showOverlayControls:(id)sender
{
    if ( [[NSFontPanel sharedFontPanel] isVisible])
    {
        NSLog(@"Test");
        [[NSFontPanel sharedFontPanel] orderOut:self];
    }
    else
    {
        NSFontManager* fontMgr = [NSFontManager sharedFontManager];
        [fontMgr setTarget:self];

        NSFontPanel* fontPanel = [NSFontPanel sharedFontPanel];
        [fontPanel orderFront:self];
    }
} 
```

它工作正常。当我尝试在应用程序启动时关闭字体面板以防显示时出现问题。我试过了

```
if ( [[NSFontPanel sharedFontPanel] isVisible] )
    [[NSFontPanel sharedFontPanel] close]; 
```

或者

```
if ( [[NSFontPanel sharedFontPanel] isVisible] )
    [[NSFontPanel sharedFontPanel] orderOut:self]; 
```

我也尝试过没有 if 语句，仍然没有运气。如果在应用程序关闭时显示面板，则在应用程序打开时它总是会再次弹出。我还尝试在我的应用委托的 appWillTerminate 方法中关闭字体面板。相同的行为。

将不胜感激任何提示。提前致谢，

弗洛

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T20:18:29.933

你在哪里调用这些方法？它必须工作。

您可以像这样在 AppDelegate`-applicationDidFinishLaunching:`通知中调用它：

```
- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    if ([[NSFontPanel sharedFontPanel] isVisible])
        [[NSFontPanel sharedFontPanel] orderOut:self];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-26T01:11:16.223

如果应用程序在 NSFontPanel 或 NSColorPanel 仍然可见时关闭，此解决方案可能会有所帮助。将以下代码添加到您的 AppDelegate 类，以避免在启动应用程序时恢复 NSFontPanel 或 NSColorPanel 窗口。感谢[https://christiantietze.de/posts/2019/06/observe-nswindow-changes/](https://christiantietze.de/posts/2019/06/observe-nswindow-changes/)提供了一种检测何时添加窗口的方法。

```
func applicationDidUpdate(_ notification: Notification) {
    NSApp.windows
        .filter { ["NSFontPanel", "NSColorPanel"].contains($0.className) }
        .filter { $0.isVisible }
        .forEach { $0.isRestorable = false }
} 
```

# iphone - 在 PhoneGap 应用程序中以编程方式在 iPhone 上显示软键盘？

> ID：12140484
> 
> 赞同：27
> 
> 时间：2012-08-27T10:44:33.807
> 
> 标签：iphone, cordova, iphone-softkeyboard

我一直在寻找很长时间，到目前为止，我还没有遇到一个可以以编程方式显示软键盘的 PhoneGap / Cordova 应用程序的**工作解决方案。**

**设想：**

我们有一个PhoneGap 应用程序——一个用jQuery Mobile 创建的网站——它在某一时刻向用户显示一个对话框。此对话框也是一个网页，并且有一个单一的 INPUT 文本框，用户应在其中输入代码。

**问题：**

当显示代码对话框时，***输入框使用 JavaScript 聚焦***。然而，由于 iPhone 内部浏览器的限制，软键盘直到用户真正点击输入文本框后才会出现。

**我们尝试了什么：**

*   创建一个***[隐藏的文本框](https://stackoverflow.com/questions/467601/display-the-iphone-keyboard)***并使其成为***第一响应者***
*   一旦输入通过 JavaScript 获得焦点，使实际的***webview 成为第一响应者***
*   使用***sendActionsForControlEvents***尝试将 Touch 事件传递给 webview（尽管如果有人有 PhoneGap 应用程序的工作代码，如果他们能分享它，我将不胜感激，因为我不是 iOS 编码方面的专业人士）

有任何想法吗？

* * *

**编辑：**这个问题中提到的限制仅适用于***内置浏览器***......如果您的目标是 Opera，您将通过使用以下代码获得成功：

```
var e = jQuery.Event("keydown", { keyCode: 37 });
$('#element').focus().trigger(e); 
```

* * *

**EDIT2：**这是可以在插件中使用的最终工作PhoneGap代码：

*键盘助手.h*

```
//
//  keyboardHelper.h
//  soft keyboard displaying plugin for PhoneGap
//
//  Copyright 2012 Martin Ambrus.
//

#import <Foundation/Foundation.h>
#ifdef CORDOVA_FRAMEWORK
#import <Cordova/CDVPlugin.h>
#else
#import "CDVPlugin.h"
#endif

@interface keyboardHelper : CDVPlugin {
    NSString *callbackID;
}

@property (nonatomic, copy) NSString *callbackID;

- (void)showKeyboard:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options;

@end 
```

*键盘助手.m*

```
//
//  keyboardHelper.m
//  soft keyboard displaying plugin for PhoneGap
//
//  Copyright 2012 Martin Ambrus.
//

#import "keyboardHelper.h"
#import "AppDelegate.h"

@implementation keyboardHelper
@synthesize callbackID;

-(void)showKeyboard:(NSMutableArray*)arguments withDict:(NSMutableDictionary*)options {
    self.callbackID = [arguments pop];

    //Get text field coordinate from webview. - You should do this after the webview gets loaded
    //myCustomDiv is a div in the html that contains the textField.
    int textFieldContainerHeightOutput = [[((AppDelegate *)[[UIApplication sharedApplication] delegate]).viewController.webView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"myCustomDiv\").offsetHeight;"] intValue];

    int textFieldContainerWidthOutput = [[((AppDelegate *)[[UIApplication sharedApplication] delegate]).viewController.webView  stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"myCustomDiv\").offsetWidth;"] intValue];

    int textFieldContainerYOffset = [[((AppDelegate *)[[UIApplication sharedApplication] delegate]).viewController.webView  stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"myCustomDiv\").offsetTop;"] intValue];

    int textFieldContainerXOffset = [[((AppDelegate *)[[UIApplication sharedApplication] delegate]).viewController.webView  stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"myCustomDiv\").offsetLeft;"] intValue];

    UITextField *myTextField = [[UITextField alloc] initWithFrame: CGRectMake(textFieldContainerXOffset, textFieldContainerYOffset, textFieldContainerWidthOutput, textFieldContainerHeightOutput)];

    [((AppDelegate *)[[UIApplication sharedApplication] delegate]).viewController.webView addSubview:myTextField];
    myTextField.delegate = self;

    CDVPluginResult* pluginResult = [CDVPluginResult resultWithStatus:CDVCommandStatus_OK messageAsString: @"ok"];

    [self writeJavascript:[pluginResult toSuccessCallbackString:self.callbackID]];
}

-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
//here you create your request to the server
return NO;
}

-(BOOL)textFieldDidEndEditing:(UITextField *)textField
{
//here you create your request to the server
return NO;
}

@end 
```

*javascript*

```
var keyboardHelper = {
    showKeyboard: function(types, success, fail) {
        return Cordova.exec(success, fail, "keyboardHelper", "showKeyboard", types);
    }
}; 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-03-26T20:10:12.197

`config.xml`这些天您可以通过条目解决问题，添加：

```
<preference name="keyboardDisplayRequiresUserAction" value="false" /> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-05T10:12:08.020

您可以在 webView 上使用 javascript 获取输入字段的坐标。然后，将您自己的 textField 放在它上面，并在它的委托方法 textFieldShouldReturn 中使用用户输入的代码向服务器发送请求。

```
 //Get text field coordinate from webview. - You should do this after the webview gets loaded
    //myCustomDiv is a div in the html that contains the textField.
int textFieldContainerHeightOutput = [[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"myCustomDiv\").offsetHeight;"] intValue];

int textFieldContainerWidthOutput = [[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"myCustomDiv\").offsetWidth;"] intValue];

int textFieldContainerYOffset = [[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"myCustomDiv\").offsetTop;"] intValue];

int textFieldContainerXOffset = [[webView stringByEvaluatingJavaScriptFromString:@"document.getElementById(\"myCustomDiv\").offsetLeft;"] intValue];

myTextField.frame = CGRectMake(textFieldContainerXOffset, textFieldContainerYOffset, textFieldContainerWidthOutput, textFieldContainerHeightOutput);
[webView addSubview:myTextField];
myTextField.delegate = self; 
```

然后你实现 textFieldShouldReturn 并在那里创建你对服务器的请求。

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField
{
//here you create your request to the server
return NO;
} 
```

这是在现有项目中完成的，但不使用 PhoneGap。我希望你可以调整它以适应你的需要。

要删除文本字段，您可以将其隐藏

```
myTextField.hidden = YES; 
```

或者

```
myTextField = nil; 
```

或者

```
[myTextField removeFromSuperView]; 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-22T16:44:59.727

在 iOS 6 之前，Apple 只允许在用户交互后调出键盘。在 iOS 6 中，他们为 UIWebView 引入了以下属性，您只需将其设置为 NO。

```
 "yourWebView".keyboardDisplayRequiresUserAction = NO; 
```

Apple 默认将此设置为“是”。现在你可以调用`focus()`你的 JS，然后键盘就会出现。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-29T12:31:25.453

您是否尝试过使用 Native Controls 并从 Javascript 调用它们？

这里有一些代码显示了在 Phonegap Cordova 应用程序（Phonegap 1.5）上使用本机控件

[https://gist.github.com/1384250](https://gist.github.com/1384250)

希望它有助于解决问题:)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-29T12:38:38.477

我承认这是私人的，但它可能会帮助你：

```
@class UIKeyboard;

void showKeyboard()
{
    static UIKeyboard *kb = nil;
    if ([[UIKeyboard class] respondsToSelector:@selector(automaticKeyboard)])
        kb = [UIKeyboard automaticKeyboard];
    else
        kb = [UIKeyboard activeKeyboard];

    if (kb == nil) {
        kb = [[[UIKeyboard alloc] initWithDefaultSize] autorelease];
        [[[UIApplication sharedApplication] keyWindow] addSubview:kb];
    }

    if ([kb respondsToSelector:@selector(orderInWithAnimation:)]) {
        [kb orderInWithAnimation:YES];
    } else {
        [kb activate];
        [kb minimize];
        [kb maximize];
    }
} 
```

并这样称呼它：

```
showKeyboard(); 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2012-12-10T21:26:32.363

我实际上只是找到了**解决方案**。就像 horak 说的和[本文中描述的那样](http://shazronatadobe.wordpress.com/2012/10/27/whats-new-in-cordova-ios-2-2-0/)，无论有没有软键盘，现在都可以使用 iOS 6.0 来实现这一点：**KeyboardDisplayRequiresUserAction = NO;**

从 Cordova 2.2 开始，可以简单地将上面提到的 iOS 属性添加到**Cordova.plist**文件中：

```
KeyboardDisplayRequiresUserAction, boolean, NO 
```

这为使用 Cordova 2.2 的每个人解决了所有问题。现在只需像之前讨论的那样调用**input.focus()**，键盘就会自动出现。对于我们这些尚未将我们的 Cordova 更新到当前最新版本 (2.2) 的人来说，幸运的**是仍然可以**。

## 使用 cordova v. < 2.2 以编程方式在 iPhone 上显示键盘

**第 1 步**： *向 Cordova.plist 添加属性*

转到您的项目 > 资源 > Cordova.plist。添加：KeyboardDisplayRequiresUserAction，布尔值，否

**第 2 步**： *将以下代码片段添加到 CDVViewController.m*

**搜索**“@interface CDVViewController”（或类似于找到上述文件）。对于 Cordova 2.1，转到**第 240 行**（其他所有人都转到“ *IsAtLeastiOSVersion* ” if 语句之后的一行，抱歉不能比这更精确。）**将此代码段添加**到上述行的 CDVViewController.m 中：

```
if (IsAtLeastiOSVersion(@"6.0")) {
    BOOL keyboardDisplayRequiresUserAction = YES; // KeyboardDisplayRequiresUserAction - defaults to YES
    if ([self.settings objectForKey:@"KeyboardDisplayRequiresUserAction"] != nil) {
        if ([self.settings objectForKey:@"KeyboardDisplayRequiresUserAction"]) {
            keyboardDisplayRequiresUserAction = [(NSNumber*)[self.settings objectForKey:@"KeyboardDisplayRequiresUserAction"] boolValue]; //JB-VAL121212
        }
    }

    // property check for compiling under iOS < 6
    if ([self.webView respondsToSelector:@selector(setKeyboardDisplayRequiresUserAction:)]) {
        [self.webView setValue:[NSNumber numberWithBool:keyboardDisplayRequiresUserAction] forKey:@"keyboardDisplayRequiresUserAction"];
    }

} 
```

**免责声明**：*这仅在 Cordova 2.1 上进行了测试，但是，它很可能仍然适用于 2.0 或 CDVViewController.m 文件附带的任何其他早期版本）*

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-16T02:33:49.847

您可以在输入字段上使用 FocusOut 事件，这将在按下 Done 键时触发。我可以在 IOS 6 及更高版本上使用它。我相信它也适用于以前的版本。

# design-patterns - 感觉只坚持一种设计模式

> ID：12140485
> 
> 赞同：0
> 
> 时间：2012-08-27T10:44:34.883
> 
> 标签：design-patterns

我是设计模式的新手。在尝试解决设计模式的问题时，我[发现](https://stackoverflow.com/questions/12088711/game-of-life-with-facade-design-pattern)Facade 方法是合适的。它对我来说效果很好。

现在我正在尝试将设计应用于其他问题，我继续尝试应用相同的外观模式！有没有其他人经历过这种情况？

应用模式时的拇指规则？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:28:29.080

我建议您购买这本很棒的书：[Head First Design Patterns](http://shop.oreilly.com/product/9780596007126.do)。如果您仅查看本书的源代码，您还将了解何时以及如何使用哪种模式来解决特定问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T10:32:07.343

我觉得（并且仍然觉得）喜欢使用 Facade 模式的原因是因为它很熟悉并且“有效”。

我目前采用的方法是，我将为每种模式至少实施一个问题（现在我在纪念品）。虽然这需要很长时间，但我感觉它变得更容易——我尝试的新模式越多。

# c# - 使用 C# 从扫描图像中去除黑色区域

> ID：12140486
> 
> 赞同：2
> 
> 时间：2012-08-27T10:44:39.657
> 
> 标签：c#, image, image-processing

我有一堆图像，看起来像![这个](../Images/9435aba0a243175f70963c76c3a6f6da.png)。

处理后，我希望它们像![这个](../Images/74471b98bcaf2e278d9c7857c6fdbeae.png).
我知道我可以使用 Flood Fill 算法轻松地将那些黑色区域变为白色。但首先我需要确保黑色区域不是文本的一部分。我怎样才能做到这一点？与字母相比，这些区域是巨大的。所以也许我可以找出每个黑色区域的大小，并将大于*n*的区域变成白色？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T11:04:43.993

这就是机器视觉的全部内容。您可以为“Connected-Component-Labeling”之类的内容编写自己的代码，这只是一种可能的方法。因此，您可以从左上角开始收集所有具有几乎相同灰度值的像素。如果数组包含的像素多于某个阈值，则保存坐标并填充该区域。

但我认为你会有一些中间有黑色“线”的问题。

# javascript - 页面翻转过渡到 JQuery 中的自定义 url？

> ID：12140489
> 
> 赞同：0
> 
> 时间：2012-08-27T10:44:42.480
> 
> 标签：javascript, jquery, html, animation, transition

好的，所以我的问题是我想将页面翻转转换为我通过 javascript 创建的自定义 url。

```
$("#btnSave").click(function(e){
    e.preventDefault();
    window.location = "mypage_with_params.html?" + selectedParams; //selectedParams is a list
    return false;
    }); 
```

我可以调用什么函数来使窗口通过翻页动画触发到这个 url？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T13:57:53.093

这实际上是一件相当困难的事情。页面之间的转换并没有真正起作用，尽管可以转换到同一页面上的内容，也许使用 AJAX。

我在这里写了一些关于如何进行基本翻转的文章：http: [//css3.bradshawenterprises.com/flip/](http://css3.bradshawenterprises.com/flip/)，虽然浏览器支持不是很好。

为了模拟页面转换，您需要通过 AJAX 将新页面加载到当前页面后面的 div 中，然后从一个页面翻转到另一个页面，然后可能使用 JS 重置所有内容。

# ajax - 带有 knockout.js 的引导弹出窗口

> ID：12140491
> 
> 赞同：12
> 
> 时间：2012-08-27T10:44:49.557
> 
> 标签：ajax, twitter-bootstrap, knockout.js

我有一个应用程序通过 AJAX 调用接收一些数据。之后，接收到的数据使用*knockout.js*库绑定到 DOM 元素。我想使用 boostrap 的不显眼的标记来创建这样的弹出框：

```
<table class="table table-condensed" data-bind="foreach: items">
    <tr>
        <td><b data-bind="text: $data.id"></b></td>
        <td data-bind="text: $data.title"></td>
        <td><a href="#" rel="popover" data-bind="attr: {title: $data.info}" data-placement="top">Info</a></td>
    </tr>
</table> 
```

根据最新的*引导*文档，不需要隐式调用类似的东西`$('.popover').popover()`，但是，它不起作用。

我想，*boostrap.js*对 document.ready 执行一些 DOM 分析，并执行所有需要的工作以使 popover 工作。还有问题：有没有办法告诉*bootstrap.js*在收到 AJAX 响应后对数据执行类似的工作？或者怎样才能达到这样的要求？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-08-27T15:21:21.200

您可以创建自定义 dataBinding 以使该元素弹出。检查这个[jsfiddle 演示](http://jsfiddle.net/gurkavcu/dyXT7/)

```
ko.bindingHandlers.bootstrapPopover = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel) {
        var options = ko.utils.unwrapObservable(valueAccessor());
        var defaultOptions = {};        
        options = $.extend(true, {}, defaultOptions, options);
        $(element).popover(options);
    }
};

var viewModel = {

    items: ko.observableArray([{
        "id": 1,
        "title": "title-1",
        "info": "info-1"},
    {
        "id": 2,
        "title": "title-2",
        "info": "info-2"},
    {
        "id": 3,
        "title": "title-3",
        "info": "info-3"}])

}

ko.applyBindings(viewModel);​ 
```

和 html

```
<div class="container">
    <div class="hero-unit">     
        <table class="table table-condensed" data-bind="foreach: items">
            <tr>
                <td><b data-bind="text: $data.id"></b></td>
                <td data-bind="text: $data.title"></td>
                <td><a href="#" data-bind="bootstrapPopover : {content : $data.info  }">Info</a></td>
            </tr>
        </table>
    </div>
</div>​ 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-27T15:03:50.893

> “根据最新的引导文档，不需要隐式调用 $('.popover').popover() 之类的东西，但是它不起作用。”

我在说明这一点的文档中找不到任何地方。事实上，他们的说法恰恰相反。也就是说，Twitter Bootstrap 不会**自动**初始化页面上的弹出框或工具提示。 [从文档](http://twitter.github.com/bootstrap/javascript.html#popovers)：

> 出于性能原因，选择加入 Tooltip 和 Popover data-apis。如果您想使用它们，只需指定一个选择器选项。

正如他们所说，为了“选择加入”，您可以将 Popover 对象附加到一个元素，该元素包含可能出现在页面上的所有弹出框。这是一种方法：

```
$('body').popover({selector: '[rel="popover"]'}); 
```

我相信最初考虑的性能考虑来自于在 2.1 之前，Popover 插件默认由 mouseenter 和 mouseleave 事件触发**，**这**当然**不是您希望为整个页面不断处理的事情。

从 2.1 开始，现在默认为**click**，这不会造成任何性能问题。然而，如果您可以确定一个比 DOM 更远的元素，而不是`body`将 Popover 对象附加到该元素，那始终是首选。但是，根据您显示 AJAX 内容的位置，`body`可能是您最好的选择。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T15:18:49.840

这是一个包含对象数组的完整工作示例，我将其更改`ko.applyBindings()`为`ko.applyBindingsToDescendants`包含绑定上下文 $root 和 $parent 当我们希望将按钮关联到例如根视图模型中的函数时。

```
$(element).click(function() {
            $(this).popover('toggle');
            var thePopover = document.getElementById(attribute.id+"-popover");
            childBindingContext = bindingContext.createChildContext(viewModel);
            ko.applyBindingsToDescendants(childBindingContext, thePopover);
    }); 
```

看看[@http://jsfiddle.net/mounir/Mv3nP/6/](http://jsfiddle.net/mounir/Mv3nP/6/)

# c# - 当我们有不同的回报类型时实现策略模式

> ID：12140498
> 
> 赞同：5
> 
> 时间：2012-08-27T10:45:22.683
> 
> 标签：c#, wcf, oop, design-patterns, ooad

我有 SaveManager 抽象类和我的具体类 TVSaveManager、DataSaveManager 和 VoiceSaveManager 实现 SaveManager 抽象类。

```
List<SaveManager> lstPrdSaveManager;

        public SaveResponseModel SaveProducts(SaveProductsRequest objSaveProductsRequest)
        {
            SaveResponseModel saveResponseModel = new SaveResponseModel();

            lstPrdSaveManager = SaveManagerFactory.GetSaveManagers(objSaveProductsRequest, saveResponseModel);

            lstPrdSaveManager.ForEach(saveManager =>
                {
                    saveResponseModel = saveManager.MapAndSaveProduct();
                });

            return saveResponseModel;
        } 
```

工厂类将决定创建哪个经理并将列表发送给我们。我将遍历列表并调用每个具体类都将遵循的公共接口“MapAndSaveProduct”。我想更像是一种策略模式。

但问题是所有具体的 savemanage 的 MapAndSaveProduct 方法的返回类型都不同。TvSaveManager 的 TVResponse 和 DataSaveManager 的 DataResponse 等等。因此，我创建了 SaveResponseModel 类来组合所有返回类型（我将 SaveResponseModel 传递给工厂，以便它将传递给所有具体的 savemanager 类的构造函数。各个类将设置所需的属性。例如 TvSaveManager -> saveResponseModel.TvResponse）。我得到了想要的结果，代码看起来很干净。

问题是，1）当我们有不同的类型时，使用这种模式是否正确？2）如果具体类有不同的类型，我们不应该使用策略模式吗？3）在这种情况下，我是否应该采用不同的设计模式。如果是，是哪一个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T10:56:11.263

您在一组方法中结合了[*Strategy*](http://en.wikipedia.org/wiki/Strategy_pattern)和[*Visitor ；*](http://en.wikipedia.org/wiki/Visitor_pattern)这绝对没问题。您可以通过为响应提供一个通用界面并将它们分开，并向其添加访问者以获取正确的响应。这将按顺序应用两种模式，而不是同时应用两种模式。

```
interface IResponseVisitor {
    void VisitTvResponse(TvResponse r);
    void VisitDataResponse(DataResponse r);
}
interface IResponse {
    void Accept(IResponseVisitor v);
}
class TvResponse : IResponse {
    public void Accept(IResponseVisitor v) {
        v.VisitTvResponse(this);
    }
}
class DataResponse : IResponse {
    public void Accept(IResponseVisitor v) {
        v.VisitDataResponse(this);
    }
} 
```

现在您`MapAndSaveProduct`的所有实现都可以返回 common `IResponse`。您可以将它们全部收集起来，然后通过 的实现来遍历它们`IResponseVisitor`，并在相应的`Accept`方法中为每种类型执行所需的操作。

# machine-learning - SVM 中 QP 的用途和高内存使用问题

> ID：12140503
> 
> 赞同：1
> 
> 时间：2012-08-27T10:45:44.423
> 
> 标签：machine-learning, svm

           我正在学习用于文本分类的**顺序最小优化（SMO） 。**大多数与 SMO 相关的参考资料都说 General SVM 在使用**QP**问题训练样本时会导致大量内存使用。然后我开始学习**QP**。但我无法理解**QP**如何在使用 SVM 训练样本时导致大量内存使用，以及***QP 在 SVM 中的目的是什么***。**任何人都可以通过一些实时示例**来消除我的疑问吗？..提前谢谢...

# c# - 如何用 C# 连接 sql server？

> ID：12140505
> 
> 赞同：-5
> 
> 时间：2012-08-27T10:45:49.547
> 
> 标签：c#, database, connection-string

我在连接到我的数据库时遇到问题有人知道导致此问题的原因吗？

谢谢

代码是：

```
private void button1_Click(object sender, System.EventArgs e)
{
    string connetionString = null;

    SqlConnection cnn;

    connetionString = "Data Source=UMAIR;Initial Catalog=Air.dbo;User ID=;Password=";
    cnn = new SqlConnection(connetionString);

    try
    {
        cnn.Open();
        MessageBox.Show ("Connection Open ! ");
        cnn.Close();
    }
    catch (Exception ex)
    {
        MessageBox.Show("Can not open connection ! ");
    }
} 
```

它总是向我显示“无法打开连接错误！”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T10:54:30.373

我真的怀疑你有一个名为

```
Air.dbo 
```

可能，如果您使用 Sql 身份验证，您的连接字符串应该是

```
Data Source=UMAIR;Initial Catalog=Air;User ID=yourusername;Password=yourpassword"; 
```

相反，如果您使用 Windows 身份验证（意味着您的登录名和密码用于连接到数据库），那么您的连接字符串应该更改为

```
Data Source=UMAIR;Initial Catalog=Air;Trusted_Connection=True;"; 
```

此外，您应该确保您的 SqlServer 安装在名为 UMAIR 的服务器上，但没有实例名称。

[请在此链接](http://www.connectionstrings.com)查看对 SqlServer 有效的多种形式的连接字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:54:05.453

ConnectionString 看起来不对？您使用的是 SQL Server 身份验证还是 Windows 身份验证？如果是 SQL 身份验证，则需要在连接字符串中传递正确的用户名和密码。如果是 windows 身份验证，删除用户 ID 和密码，将集成安全设置为 true。

另外，您是否可以访问名为 UMAIR 的机器？

# javascript - Mongo - JS - 如何将 BSON/JSON 对象转换为 XML

> ID：12140515
> 
> 赞同：0
> 
> 时间：2012-08-27T10:46:20.883
> 
> 标签：javascript, xml, json, mongodb, bson

在使用带有 mongo-shell API 的 JS 脚本时，如何将 JSON/BSON 对象转换为 XML 字符串。

我可能会将 XML 字符串写入文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:04:21.733

我从这里抓取了 json2xml.js：

[http://goessner.net/download/prj/jsonxml/json2xml.js](http://goessner.net/download/prj/jsonxml/json2xml.js)

然后为了方便起见，我将它保存到与我的 mongo shell 二进制文件相同的文件夹中（所以我不必指定完整路径。以下是结果：

```
> load("json2xml.js")
> db.bar.insert({"_id" : 123, foo : 1, x : "example"})
> db.bar.findOne()
{ "_id" : 123, "foo" : 1, "x" : "example" }
> json2xml(db.bar.findOne())
<_id>123</_id><foo>1</foo><x>example</x> 
```

现在，您可能需要扩展它以处理 MongoDB 中的非 JSON 类型（有关详细信息，请参阅[BSON 规范](http://bsonspec.org/#/specification)页面），但基础知识已经存在。

# xml - xslt - 将重复的节点排序到不同的 div 中

> ID：12140518
> 
> 赞同：1
> 
> 时间：2012-08-27T10:46:34.437
> 
> 标签：xml, xslt, xslt-1.0

这是我的 xml 输入

```
<issues>
  <issue status="open" type="Bug">
    <fix_versions>
      <fix_version>6.14.0</fix_version>
      <fix_version>6.13.0</fix_version>
      <fix_version>6.12.0</fix_version>
    </fix_versions>
    <title>issue1</title>
    <description>Description</description>
  </issue>
  <issue status="open" type="Feature">
    <fix_versions>
      <fix_version>6.13.0</fix_version>
    </fix_versions>
    <title>issue2</title>
    <description>Description</description>
  </issue>
  <issue status="open" type="Improvement">
    <fix_versions>
      <fix_version>6.14.0</fix_version>
    </fix_versions>
    <title>issue3</title>
    <description>Description</description>
  </issue>
</issues> 
```

这是我的 xsl 代码

```
<?xml version="1.0" encoding="iso-8859-1"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:key name="versions" match="issue" use="fix_versions"/>
<xsl:key name="type" match="issue" use="concat(fix_versions, '+', @type)"/>

<xsl:template match="issues">

  <xsl:for-each select="//issue[generate-id(.)=generate-id(key('versions', fix_versions)[1])]">

    <xsl:sort select="fix_versions" order="descending"/> 

        <xsl:variable name="version"><xsl:value-of select="fix_versions"/></xsl:variable>

                <xsl:if test="//release[@version = \$version]">
                    <div class="release">
                    <a href="" class="version"><xsl:value-of select="\$version"/></a>
                    <div class="version" style="display:none;">
                        <xsl:for-each select="key('versions', fix_versions)[generate-id() = generate-id(key('type', concat(fix_versions, '+', @type))[1])]">
                            <div class="types">
                                <a href="" class="type"><xsl:value-of select="@type"/>s</a>
                                <div class="type" style="display:none">
                    <xsl:for-each select="key('type', concat(fix_versions, '+', @type))">
                        <div style="border-bottom:1px solid grey;">
                        <a href="" class="title"><xsl:value-of select="title"/></a>
                        <div class="toggle" style="display:none;">
                            <xsl:value-of select="description"/>
                        </div>
                        </div>
                                </xsl:for-each>
                                </div>
                            </div>                      
                </xsl:for-each>

            </div>
            </div>
                </xsl:if>

  </xsl:for-each>
</xsl:template> 
```

这就是我得到的

```
<div class="version">
  <a>6.14.0</a>
  <div class="issues">
    <div class="Bugs">
      <a href="issue1">issue1</a>
      <a href="issue7">issue7</a>
      <a href="issue2">issue12</a>
      <a href="issue17">issue17</a>
    </div>
    <div class="Improvements">
      <a href="issue3">issue3</a>
      <a href="issue9">issue9</a>
    </div>
  </div>
</div>
<div class="version">
  <a>6.13.0</a>
  <div class="issues">
    <div class="Bug">
      <a href="issue1">issue1</a>
      <a href="issue11">issue11</a>
    </div>
    <div class="Feature">
      <a href="issue2">issue2</a>
    </div>
  </div>
 </div>
 <div class="version">
   <a>6.12.0</a>
   <div class="issues">
     <div class="Bug">
       <a href="issue1">issue1</a>
     </div>
   </div>
</div> 
```

一切都好 - 唯一的问题是我只生成一个密钥，`fix_versions`但我有结构`fix_versions/fix_version`。因此，如果有类似的节点`<fix_versions> <fix_version>6.14.0</fix_version> <fix_version>6.13.0</fix_version> <fix_version>6.12.0</fix_version> </fix_versions>`，他将创建密钥`6.14.06.13.06.12.0`并为此版本创建一个容器 - 但我想要将此问题放入三个容器中`6.14.0`，`6.13.0`并且`6.12.0`。一般可以复制一个问题吗？

我尝试了类似`<xsl:key name="versions" match="issue" use="fix_versions"/>`然后使用的方法`<xsl:for-each select="//issue[generate-id(.)=generate-id(key('versions', fix_versions)[1])]">`，但他只是创建了一个大组，而不是将这个问题分类到所有这些组中。

任何的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:47:16.083

**根据我对想要的结果的*猜测***：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:key name="kVersByVal" match="fix_version" use="."/>
 <xsl:key name="kBugTypeByVers" match="@type" use="../*/fix_version"/>

 <xsl:template match=
  "fix_version[generate-id()=generate-id(key('kVersByVal',.)[1])]">
  <div class="version">
   <a><xsl:value-of select="."/></a>
   <div class="issues">
     <xsl:for-each select="key('kBugTypeByVers',.)">
       <div class="{.}">
         <a href="{../title}"><xsl:value-of select="../title"/></a>
       </div>
     </xsl:for-each>
   </div>
  </div>
 </xsl:template>
 <xsl:template match="text()"/>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML 文档时**：

```
<issues>
  <issue status="open" type="Bug">
    <fix_versions>
      <fix_version>6.14.0</fix_version>
      <fix_version>6.13.0</fix_version>
      <fix_version>6.12.0</fix_version>
    </fix_versions>
    <title>issue1</title>
    <description>Description</description>
  </issue>
  <issue status="open" type="Feature">
    <fix_versions>
      <fix_version>6.13.0</fix_version>
    </fix_versions>
    <title>issue2</title>
    <description>Description</description>
  </issue>
  <issue status="open" type="Improvement">
    <fix_versions>
      <fix_version>6.14.0</fix_version>
    </fix_versions>
    <title>issue3</title>
    <description>Description</description>
  </issue>
</issues> 
```

**产生了假定的正确结果**：

```
<div class="version">
   <a>6.14.0</a>
   <div class="issues">
      <div class="Bug">
         <a href="issue1">issue1</a>
      </div>
      <div class="Improvement">
         <a href="issue3">issue3</a>
      </div>
   </div>
</div>
<div class="version">
   <a>6.13.0</a>
   <div class="issues">
      <div class="Bug">
         <a href="issue1">issue1</a>
      </div>
      <div class="Feature">
         <a href="issue2">issue2</a>
      </div>
   </div>
</div>
<div class="version">
   <a>6.12.0</a>
   <div class="issues">
      <div class="Bug">
         <a href="issue1">issue1</a>
      </div>
   </div>
</div> 
```

# spring-mvc - 用于谷歌的带有 openid 的 Spring 安全性在生产环境中不起作用

> ID：12140519
> 
> 赞同：2
> 
> 时间：2012-08-27T10:46:34.873
> 
> 标签：spring-mvc, spring-security, openid

我正在使用 spring mvc 和 spring security（版本 3.1）。该网络应用程序为用户提供了使用 google/gmail 帐户进行登录的选项。这在我的开发环境中运行良好，但是当部署到生产服务器时，注册过程失败，因为在提供正确的谷歌凭据时显示错误凭据异常事件。这是我的 spring-security.xml 配置中的 openid 配置：

```
<openid-login   
    login-processing-url="/j_spring_openid_security_check"
    default-target-url="/home"
    user-service-ref="userOpenIdDetailsService" 
    authentication-failure-handler-ref="openIdAuthFailureHandler"/>
<logout logout-success-url="/login?rc=2" />

<beans:bean id="userOpenIdDetailsService" class="com.xxx.service.OpenIdUserDetailsServiceImpl"/>

<beans:bean id="openIdAuthFailureHandler" class="com.xxx.controllers.OpenIDAuthenticationFailureHandler">
    <beans:property name="defaultFailureUrl" value="/login?rc=6"/>
</beans:bean> 
```

当返回一个 openid 身份但未在我的数据库中注册时，我实现了一个身份验证失败处理程序来处理注册过程：

```
public class OpenIDAuthenticationFailureHandler extends
    SimpleUrlAuthenticationFailureHandler {

    private static Logger logger = Logger.getLogger(OpenIDAuthenticationFailureHandler.class);

    @Override
    public void onAuthenticationFailure(HttpServletRequest request,
        HttpServletResponse response,              org.springframework.security.core.AuthenticationException exception)
        throws IOException, ServletException {      
            if(exception instanceof UsernameNotFoundException
                && exception.getAuthentication() instanceof OpenIDAuthenticationToken
                && ((OpenIDAuthenticationToken)exception.getAuthentication()).
                getStatus().equals(OpenIDAuthenticationStatus.SUCCESS)) {
                    DefaultRedirectStrategy redirectStrategy = new          DefaultRedirectStrategy();

                    OpenIDAuthenticationToken token = (OpenIDAuthenticationToken)exception.getAuthentication();
                    String url = token.getIdentityUrl();

                    request.getSession(true).setAttribute("USER_OPENID_CREDENTIAL", url);
                    String inviteId = (String)request.getSession().getAttribute("INVITE_ID");
                    if (inviteId != null) {
                        redirectStrategy.sendRedirect(request, response, "/setup/invite/" + inviteId + "/complete");
                    } else {            
                        //redirect to create account page
                        redirectStrategy.sendRedirect(request, response, "/setup/openid/complete");
                    }
                } else {
                    OpenIDAuthenticationToken token = (OpenIDAuthenticationToken)exception.getAuthentication();
                    logger.debug("Token Identity: " + token.getIdentityUrl());
                    logger.debug("Open ID authentication failure: " + exception.getMessage());
                    logger.debug("Auth Exception: " + exception.toString());
                    super.onAuthenticationFailure(request, response, exception);
                }
        }
} 
```

所以我期待一个 UsernameNotFoundException，它在上面的注册处理程序中处理，但我得到一个 org.springframework.security.authentication.BadCredentialsException。从日志中：

```
Log --> 10:19:17 DEBUG org.springframework.security.openid.OpenIDAuthenticationFilter - Supplied OpenID identity is https://www.google.com/accounts/o8/id?id=open-id-token-here
Log --> 10:19:17 DEBUG org.springframework.security.openid.OpenIDAuthenticationFilter - Authentication request failed: org.springframework.security.authentication.BadCredentialsException: Log in failed - identity could not be verified
Log --> 10:19:17 DEBUG org.springframework.security.openid.OpenIDAuthenticationFilter - Updated SecurityContextHolder to contain null Authentication
Log --> 10:19:17 DEBUG org.springframework.security.openid.OpenIDAuthenticationFilter - Delegating to authentication failure handlercom.xxx.controllers.OpenIDAuthenticationFailureHandler@435fef7d
Log --> 10:19:17 DEBUG com.xxx.controllers.OpenIDAuthenticationFailureHandler - Token Identity: Unknown
Log --> 10:19:17 DEBUG com.xxx.controllers.OpenIDAuthenticationFailureHandler - Open ID authentication failure: Log in failed - identity could not be verified
Log --> 10:19:17 DEBUG com.xxx.controllers.OpenIDAuthenticationFailureHandler - Auth Exception: org.springframework.security.authentication.BadCredentialsException: Log in failed - identity could not be verified 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-10T16:00:44.883

事实证明，生产服务器上的时钟可能与用于验证 OpenId 请求的互联网时间不同步。就我而言，我的服务器已经运行了 177 天而没有重新启动。服务器时钟差了一分钟。重新启动即可解决问题。否则，将服务器时钟与互联网时间服务器同步也可以解决问题。

# android - Android Gyroscope verse Accelerometer

> ID：12140521
> 
> 赞同：3
> 
> 时间：2012-08-27T10:46:37.210
> 
> 标签：android, accelerometer, gyroscope, motion-detection

我正在构建一个 Android 游戏，我想弄清楚用户是向左还是向右倾斜设备（类似于 Temple Run 的工作原理，当你从一侧移动到另一侧时）。

我已经阅读了许多教程和示例，并制作了示例应用程序，但是我从陀螺仪和加速度计返回的数据量是压倒性的。我是否需要两组硬件来确定用户是否倾斜设备以及朝哪个方向倾斜？

我当前的应用程序正在检测每一个轻微的动作，这显然是不正确的。

```
public class Main extends Activity {

  private SensorManager mSensorManager;
  private float mAccel; // acceleration apart from gravity
  private float mAccelCurrent; // current acceleration including gravity
  private float mAccelLast; // last acceleration including gravity
  private RelativeLayout background;
  private Boolean isleft = true;
/** Called when the activity is first created. */

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    this.background = (RelativeLayout) findViewById(R.id.RelativeLayout1);
    mSensorManager = (SensorManager) getSystemService(Context.SENSOR_SERVICE);
    mSensorManager.registerListener(mSensorListener, mSensorManager.getDefaultSensor(Sensor.TYPE_ACCELEROMETER), SensorManager.SENSOR_DELAY_NORMAL);
    mAccel = 0.00f;
    mAccelCurrent = SensorManager.GRAVITY_EARTH;
    mAccelLast = SensorManager.GRAVITY_EARTH;

   /* float x1, x2, y1, y2;
    String direction;
    switch(event.getAction()) {
            case(MotionEvent.ACTION_DOWN):
                x1 = event.getX();
                y1 = event.getY();
                break;
            case(MotionEvent.ACTION_UP) {
                x2 = event.getX();
                y2 = event.getY();
                float dx = x2-x1;
                float dy = y2-y1;

                    // Use dx and dy to determine the direction
                if(Math.abs(dx) > Math.abs(dy)) {
                    if(dx>0) directiion = "right";
                    else direction = "left";
                } else {
                    if(dy>0) direction = "down";
                    else direction = "up";
                }
            }
            }*/
}

private final SensorEventListener mSensorListener = new SensorEventListener() {

    public void onSensorChanged(SensorEvent se) {

      float x = se.values[0];
      float y = se.values[1];
      float z = se.values[2];

      if((mAccelLast<mAccelCurrent)&&(isleft == true)){
          background.setBackgroundResource(R.drawable.bg_right);
          isleft = false;
      }
      if((mAccelLast>mAccelCurrent)&&(isleft == false)){
          background.setBackgroundResource(R.drawable.bg_left);
          isleft = true;
      } 
      mAccelLast = mAccelCurrent;
      mAccelCurrent = (float) Math.sqrt((double) (x*x + y*y + z*z));
      float delta = mAccelCurrent - mAccelLast;
      Log.d("FB", "delta : "+delta);
      mAccel = mAccel * 0.9f + delta; // perform low-cut filter
     // Log.d("FB", "mAccel : "+mAccel);

    } 
```

我最好只使用加速度计，只使用陀螺仪还是两者都需要？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:01:26.810

这篇文章链接了两者之间的区别：[Android加速计和陀螺仪](https://stackoverflow.com/questions/7383012/android-accelerometer-and-gyroscope)

[http://diydrones.com/profiles/blogs/faq-whats-the-difference](http://diydrones.com/profiles/blogs/faq-whats-the-difference)

[http://answers.oreilly.com/topic/1751-mobile-accelerometers-and-gyroscopes-explained/](http://answers.oreilly.com/topic/1751-mobile-accelerometers-and-gyroscopes-explained/)

该文档也将有所帮助：http: [//developer.android.com/guide/topics/sensors/sensors_motion.html](http://developer.android.com/guide/topics/sensors/sensors_motion.html)

根据我非常有限的经验，陀螺仪不断测量 x、y、z 旋转并不断更新。用于在游戏中驾驶汽车/飞机/角色。加速度计有点像wii-mote，用于摆动或拾取摇晃手势。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-06T10:21:04.317

根据我使用重力法使用加速度计的经验，您可以将其用于 x、y 和 z 旋转。只需输入谷歌“矢量法加速度计”。我已经将此方法与指南针一起使用，以校正由于倾斜引起的坐标。

# php - 在数据库 phpmyadmin 中存储多个下拉列表

> ID：12140523
> 
> 赞同：1
> 
> 时间：2012-08-27T10:46:45.927
> 
> 标签：php, html, database, phpmyadmin, connect

我想问一下php连接...我有两个选择（列表/菜单）和两个提交按钮...用户将选择第一个选择（列表/菜单）并单击第一个选择值（列表/菜单）将存储在我的数据库中...与第二个选择（列表/菜单）和第二个按钮相同...每个按钮代表不同的选择（列表/菜单）...

这是我的代码

订单.php

```
<form id="form1" name="form1" method="post" action="connect.php">
    <label for="milk">Milk</label>
    <select name="milk">
        <option value="0" selected="selected">Total</option>
        <option value="1">1</option>
         <option value="2">2</option>
    </select>
    <input type="submit" name="addmilk" id="addmilk" value="add" /> 
    <br />
    <label for="tea">tea</label>
    <select name="tea">
        <option value="0" selected="selected">Total</option>
        <option value="1">1</option>
         <option value="2">2</option>
    </select>
    <input type="submit" name="addtea" id="addtea" value="add" />
</form> 
```

连接.php

```
<?php
$con = mysql_connect("localhost","root");
if (!$con)
  {
  die('Could not connect: ' . mysql_error());
  }
mysql_select_db("restaurantDB", $con);

if(isset($_POST['milk'] as $milk))
{
$insert1="INSERT INTO orders(total) VALUES ('$milk')";
mysql_query($insert1);
echo $insert1;
}

if(isset($_POST['tea'] as $tea))
{
$insert2="INSERT INTO orders(total) VALUES ('$tea')";
mysql_query($insert2);
echo $insert2;
}

if (!mysql_query($insert1, $con))
{ echo "Order Succesfull";
die('Error: ' . mysql_error());
}

if (!mysql_query($insert2, $con))
{ echo "Order Succesfull";
die('Error: ' . mysql_error());
}
mysql_close($con) 

?> 
```

我得到错误是

```
 Parse error: syntax error, unexpected T_AS, expecting ',' or ')' in C:\xampp\htdocs\order\connect.php on line 9 
```

第 9 行是

```
 if(isset($_POST['milk'] as $milk)) 
```

我想知道如何将标签存储在我的数据库中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:55:41.910

改变：

```
if(isset($_POST['milk'] as $milk)) 
```

到

```
if(isset($_POST['milk'])) 
```

您在整个代码中重复了此错误，因此您还必须为 tea 等重写 if 语句。

完成修复后，更改：

```
$insert1="INSERT INTO orders(total) VALUES ('$milk')"; 
```

到：

```
$milk = mysql_real_escape_string($_POST['milk']);
$insert1="INSERT INTO orders(total) VALUES ('$milk')"; 
```

请注意，mysql 函数并不安全，您应该在不久的将来考虑使用 mysqli 或 PDO。

来自 PHP 手册：

> 不鼓励使用此扩展程序。相反，应该使用 MySQLi 或 PDO_MySQL 扩展。另请参阅 MySQL：选择 API 指南和相关的常见问题解答以获取更多信息。此功能的替代方案包括：

编辑：

连接.php

```
<?php
$con = mysql_connect("localhost","root") or die('Could not connect: ' . mysql_error());
mysql_select_db("restaurantDB", $con);

if(isset($_POST['milk']))
{
    $milk = mysql_real_escape_string($_POST['milk']);
    $insert1="INSERT INTO orders(total) VALUES ('$milk')";
    $insert = mysql_query($insert1) or die('INSERT FAILED: ' . mysql_error());
    if($insert){
        echo 'ORDER SUCCESSFUL<br />';
    }
    echo 'SQL: ' . $insert1;
}

if(isset($_POST['tea']))
{
    $tea = mysql_real_escape_string($_POST['tea']);
    $insert2="INSERT INTO orders(total) VALUES ('$tea')";
    $insert = mysql_query($insert2) or die('INSERT FAILED: ' . mysql_error());
    if($insert){
        echo 'ORDER SUCCESSFUL<br />';
    }
    echo 'SQL: ' . $insert2;
}

mysql_close($con) 

?> 
```

# iphone - 开源 iPhone 应用程序 UI 控件？

> ID：12140527
> 
> 赞同：0
> 
> 时间：2012-08-27T10:46:51.590
> 
> 标签：iphone, ios, open-source

我对 iPhone 开发不熟悉，正在开发一个**需要控制的东西，如下图所示**。我几乎在每个具有开源控件的新网络中都搜索了这个，但没有运气。所以这里有3个问题：

1.  **下图中使用的这些控件的任何开源库？**

2.  如果不知道像这样的任何开源控件，那么我如何通过编写硬代码来开始开发这些控件？他的工作有什么帮助图书馆吗？

    这是网址：http: [//itunes.apple.com/us/app/circle-whos-around-you/id488720081 ?mt=8](http://itunes.apple.com/us/app/circle-whos-around-you/id488720081?mt=8)

    每一条线索都会有所帮助，请分享您认为有用的任何信息。

![在此处输入图像描述](../Images/31df57beb6babbe9af9dba38bd759354.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:49:14.317

您可以从下面的链接中找到很多适用于 iOS 的自定义控件

查看[http://www.cocoacontrols.com/platforms/ios/controls](http://www.cocoacontrols.com/platforms/ios/controls)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:51:21.667

看看[AwesomeMenu](https://github.com/levey/AwesomeMenu)。我相信这将帮助您创建相同的自定义控件。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T10:52:52.277

您想创建动画，例如当用户单击朋友按钮时，它会在动画中打开朋友列表。如果你想要这样，请查看此示例[https://github.com/levey/AwesomeMenu](https://github.com/levey/AwesomeMenu)和[http://www.cocoacontrols.com/platforms/ios/controls/aurosetteview](http://www.cocoacontrols.com/platforms/ios/controls/aurosetteview)和[http://www.cocoacontrols.com /platforms/ios/controls/quadcurvemenu](http://www.cocoacontrols.com/platforms/ios/controls/quadcurvemenu)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-20T04:15:09.343

你可以在这里查看，希望对你有帮助

[http://code4app.net](http://code4app.net)

另一个

[http://code4app.com](http://code4app.com)

# android - 如何从输入流中读取图像到android

> ID：12140529
> 
> 赞同：0
> 
> 时间：2012-08-27T10:46:57.563
> 
> 标签：android, image

我有 2 个应用程序。一个应用程序充当服务器，它是用java创建的，并使用以下代码连续发送桌面屏幕截图。

```
public void screenCap() throws IOException, AWTException{

        Rectangle captureSize = new Rectangle(lastXpos, lastYpos, 500, 500);
        img = robot.createScreenCapture(captureSize);
        Robot robot=new Robot();
        OutputStream os = null;
        BufferedImage image = robot.createScreenCapture(new Rectangle(Toolkit.getDefaultToolkit().getScreenSize()));
        ImageIO.write(image, "jpg", os);
    } 
```

第二个应用程序是Android应用程序，它充当客户端应用程序，必须从输入流中连续读取上述图像流。

请帮我从客户端应用程序的输入流中读取图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T10:49:18.910

[BitmapFactory](http://developer.android.com/reference/android/graphics/BitmapFactory.html#decodeStream%28java.io.InputStream%29)类的使用`Bitmap decodeStream()`方法。

```
public static Bitmap decodeStream (InputStream is)
Since: API Level 1 
```

将输入流解码为位图。如果输入流为 null，或者不能用于解码位图，则该函数返回 null。流的位置将是读取编码数据后的位置。

**例子：**

```
 String urlOfBitmap = ""; // Url of inputstream
    Bitmap bitmap = null;
    try {
        InputStream in = new java.net.URL(urlOfBitmap).openStream();
        bitmap = BitmapFactory.decodeStream(in);
    } catch (Exception e) {
        Log.e("Error", e.getMessage());
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:50:13.820

```
FileInputStream in;                       
in = ...;
bitmap  = BitmapFactory.decodeStream(in); 
```

# ms-access - 满足特定条件时锁定记录

> ID：12140537
> 
> 赞同：1
> 
> 时间：2012-08-27T10:47:16.100
> 
> 标签：ms-access, vba

我正在创建一个记录工作时间的数据库。
人们可以介绍工作日的开始时间、午休时间和时间，以及工作日的结束时间。
一切都很好，我已经创建了一些可以赶上时间的表格。

但是我的经理希望防止人们在第二天更改工作时间（当然，除非该字段因为用户忘记而为空）。只有当管理员（经理）通过密码授予访问权限时，用户才应更改其工作时间。

请注意，由于需要密码保护，我为每个用户创建了一个单独的数据库（在用户注册时自动创建）。

我将如何最好地处理这个问题？我不知道锁定记录是否有效（？）。
锁定控件没有任何目的，因为用户显然可以手动访问他自己的个性化密码保护数据库。

我可以提供代码，但我提供的代码对于这个特定问题毫无用处......（我现在已经有数百行了，所有这些都与这个特定问题无关）。

感谢您的建议

# sql - 使用 postgreSQL 到 CLOB 的字符串

> ID：12140538
> 
> 赞同：10
> 
> 时间：2012-08-27T10:47:17.837
> 
> 标签：sql, postgresql, clob

我正在尝试从 postgreSQL DB 中读取一个 clob，对其进行更改，然后将其写回。

我能够使用以下代码成功读取 clob：

```
PreparedStatement statement = connection.prepareStatement("SELECT clob_column from data where id = 1");
ResultSet executeQuery = statement.executeQuery();
executeQuery.next()
Clob fetchedClob = executeQuery.getClob("clob_column"); 
```

但是当我尝试使用新数据创建一个新的 clob 时：

```
Clob newClob = connection.createClob(); 
```

我收到以下错误：

```
java.lang.AbstractMethodError: com.mchange.v2.c3p0.impl.NewProxyConnection.createClob()Ljava/sql/Clob; 
```

此外，如果我尝试仅编辑获取的 clob，请使用：

```
fetchedClob.setString(0, "new string"); 
```

我收到以下错误：

```
Method org.postgresql.jdbc4.Jdbc4Clob.setString(long,str) is not yet implemented. 
```

任何想法？

**更新：这是表定义**

> CREATE TABLE 数据 ( id bigint NOT NULL, clob_column text, );

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T12:31:45.207

无需使用`getClob()`.

`ResultSet.getString()`并且`setString()`在列上工作得很好`text`（PostgreSQL没有`clob`数据类型，所以我假设你正在使用`text`）

# javascript - 用户单击“开始”按钮时类似 Codeacademy 的效果

> ID：12140543
> 
> 赞同：-2
> 
> 时间：2012-08-27T10:48:07.467
> 
> 标签：javascript, html, css

当用户单击开始按钮时，我想实现与 codeacademy (http://www.codecademy.com/) 上的效果类似的效果。所以基本上专注于单个 div 并遮蔽页面的其余部分。

我不是要代码，而是要方法。我试图改变页面其余部分的不透明度，除了我想要关注的 div 但没有成功。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:52:26.407

这是CSS

```
.dimmer {
   background-color: #000;
   opacity: 0.4;
   z-index: 999;
   width: 100%;
   height: 100%;
   position: absolute;
   top: 0;
   left: 0;
   display: block;

}

#frame-that-does-not-dim {
   z-index: 99999;
} 
```

# php - 文件上传的 PHP 服务器配置

> ID：12140545
> 
> 赞同：2
> 
> 时间：2012-08-27T10:48:08.917
> 
> 标签：php, upload

我在我的一个项目中做了一个多文件上传功能。为此，我使用了[uploadify](http://www.uploadify.com/)的 flash 版本。

它在我的本地开发机器和我用于测试的另一台服务器上运行良好，但它在生产机器上不起作用（当然）。

在对问题进行故障排除后，我发现处理上传过程的脚本没有收到问题服务器上 $_FILES 中的所有参数。

`var_dump($_FILES)`在工作机器上：

```
["Filedata"]=>
   array(5) {
     ["name"]=>
     string(10) "simple.pdf"
     ["type"]=>
     string(24) "application/octet-stream"
     ["tmp_name"]=>
     string(14) "/tmp/phpTnNROo"
     ["error"]=>
     int(0)
     ["size"]=>
     int(60911)
   }
 } 
```

`var_dump($_FILES)`在故障机器上：

```
["Filedata"]=>
   array(1) {
     ["name"]=>
     string(10) "simple.pdf"
   }
 } 
```

我不知道为什么，但甚至没有错误号。

我怎么能解决这个问题？

我使用这些 PHP 版本：

```
Dev Machine: PHP 5.3.15
Working Remote Machine: PHP 5.3.3
Failing Remote Machine: PHP 5.3.8 
```

php.ini 配置（更改它以消除一些配置限制作为错误源）：

```
file_uploads = On
max_file_uploads = 200
upload_max_filesize = 1G
post_max_size = 1G
memory_limit = 256M
max_execution_time = 14000
max_input_time = 14000 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T10:58:20.270

检查表单的 HTML 代码，您是否更改了生产服务器中表单的方法？似乎在生产服务器上，浏览器根本不上传文件，例如表单代码必须如下：

```
<form method="POST"  enctype="multipart/form-data">
  <input type="file" name="file[]"><br />
  <input type="file" name="file[]"><br />
</form> 
```

# json - 解析 JSON 时“传递了无效的数组”

> ID：12140546
> 
> 赞同：17
> 
> 时间：2012-08-27T10:48:11.870
> 
> 标签：json, powershell, powershell-3.0

我有这个文件，我想用 PowerShell 读取：

```
var myMap =
[
  {
    "name": "JSON Example",
    "attr": "Another attribute"
  }
] 
```

我的 PowerShell v3 代码：

```
$str = Get-Content $file | Select -Skip 1;
$str | ConvertFrom-Json; 
```

但我总是收到这个错误：

```
ConvertFrom-Json : Invalid array passed in, ']' expected. (1): [
At S:\ome\Path\script.ps1:60 char:8
+ $str | ConvertFrom-Json;
+        ~~~~~~~~~~~~~~~~
    + CategoryInfo          : NotSpecified: (:) [ConvertFrom-Json], ArgumentException
    + FullyQualifiedErrorId : System.ArgumentException,Microsoft.PowerShell.Commands.ConvertFromJsonCommand 
```

如果我将 JSON 代码手动复制并粘贴到代码中，一切正常：

```
'[
  {
    "name": "JSON Example",
    "attr": "Another attribute"
  }
]' | ConvertFrom-Json; 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-27T10:55:42.720

`Out-String`在管道到之前尝试管道到`ConvertFrom-Json`：

```
Get-Content $file | Select -Skip 1 | Out-String | ConvertFrom-Json 
```

在您的工作示例中，JSON 代码是一个字符串，而非工作示例返回一组行。管道`Out-String`将集合转换为单个字符串，这是 InputObject 参数接受的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-07-06T12:43:30.597

或者，您可以使用`Get-Content -Raw`它将 JSON 作为单个字符串检索。

有关更多信息，请参阅此帖子：http: [//blogs.technet.com/b/heyscriptingguy/archive/2014/04/23/json-is-the-new-xml.aspx](http://blogs.technet.com/b/heyscriptingguy/archive/2014/04/23/json-is-the-new-xml.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-01-08T19:03:03.573

`var myMap =`不是json，它是javascript 。删除第一行就可以了。

编辑：

哦，你跳过了第一行。可能是文件最后一行少了回车，Powershell 3对它比较敏感。即使最后没有回车，它在 Powershell 5.1 中也能正常工作。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-07-13T14:32:22.943

另一个也有效的答案： use `GC -raw <FILE>`which will pass in as string

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2020-01-08T17:36:08.987

我的 JSON 文件看起来像这样（test.json）：

```
{

    "Environments":
      [ 
        "Env1":
            {
                "websiteName"  : "",
                "websiteUrl"   : ""
            },

        "Env2":
            {
                "websiteName"  : "",
                "websiteUrl"   : ""
            }
      ]
} 
```

当我使用这个命令时，我得到了 Invalid array passed 错误：**Get-Content test.json | ConvertFrom-Json**

正如许多评论指出的那样，我尝试使用 Out-String 和 -Raw，但没有运气。所以我修改了文件如下（删除了“环境”部分），它现在工作正常（**Get-Content test.json | ConvertFrom-Json**）：

```
{

        "Env1":
            {
                "websiteName"  : "",
                "websiteUrl"   : ""
            },

        "Env2":
            {
                "websiteName"  : "",
                "websiteUrl"   : ""
            }
} 
```

# image-processing - imresize（指定插值内核的二元元胞数组）

> ID：12140549
> 
> 赞同：0
> 
> 时间：2012-08-27T10:48:17.730
> 
> 标签：image-processing, matlab

我花了一个月的时间尝试和搜索这个问题。我想要的是使用双线性插值来控制蒙版的宽度。我试过这个

`M = @(x) 1./x;`

`I = imresize(im,10,{M,10});`

`im`是灰度图像

这段代码会正确运行吗？如果不是，那是什么更正？甚至指定插值内核的概念是什么？

非常感谢您。

注意：我阅读了 stackoverflow 中与该主题相关的主题。不是那么清楚。我什么都没有。

# jquery - Jquery中的字符串匹配

> ID：12140556
> 
> 赞同：0
> 
> 时间：2012-08-27T10:48:48.123
> 
> 标签：jquery, list

我的页面有一个文本框。用户将在其中输入一个字符。该字符我必须与列表项值匹配，如果匹配发生，所有值都将被打印。假设用户输入“T”，那么所有以“开头的列表项” T”将被打印。

这是 HTML 代码。

```
<ul>
  <li>Coffee</li>
  <li>Tea</li>
  <li>Milk</li>
</ul>
<input type="text" id="text1"  class="cal" />
<input type="button" value="calculate" id="Button2" /> 
```

这是 jQuery 代码。

```
$(document).ready(function() {
    $("#calculate").click(function() {
        var getsValue = $("#textbox1").val();
        $("ul > li").each(function() {
            if (getsValue == $(this).text()) {
                "print here"
            }
            else {
                alert("no")
            }
        });
    });
}); 
```

如果我输入整个字符串，它就可以工作，但我只需要输入一个字符。请帮忙。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:54:05.007

```
$(document).ready(function() {
    $("#textbox1").on("keyup", function() {
        var getsValue = $(this).val().toUpperCase();

        $("ul > li").each(function() {
            if (getsValue == $(this).text().charAt(0)) {
                document.write( $(this).text() );
            }
            else {
                alert("no")
            }
        });
    });
});​ 
```

[**演示**](http://jsfiddle.net/HNc9Q/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:55:26.817

更改此行

```
 if (getsValue == $(this).text()) {
                "print here"
    } 
```

作为

```
 if ($(this).text().indexOf(getsValue)==0) {
            "print here"
     } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:00:27.590

这是您的更正代码..

```
$(document).ready(function() {

    $("#Button2").click(function() {
       var Arr=[];
        $('li').each(function(){Arr.push($(this).html());});
        var textValue=$('#text1').val();
        Arr=$.grep(Arr,function(n){return (n.substring(0,1))==textValue;});
        alert(Arr);
    });

}); 
```

[工作演示](http://jsfiddle.net/nw7xk/)

​</p>

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:20:06.510

```
$(document).ready(function () {

    $("#text1").keyup(function () {

         $("ul > li").each(function () {             
                if($("#text1").val() == $(this).text().charAt(0)) {
                    $("#text1").val($(this).text());
                }

         });
        });

}); 
```

您可以添加大写小写转换

# iphone - 将 .jpg 照片放入应用的 App 文件夹以使用 DBRoulette

> ID：12140557
> 
> 赞同：1
> 
> 时间：2012-08-27T10:48:48.973
> 
> 标签：iphone, ios, xcode, dropbox

我从 www.dropbox.com/developer 下载了示例项目。在该示例投递箱已连接但随机照片未加载到投递箱中。它显示警报消息，例如“将 .jpg 照片放入您的应用程序的 App 文件夹以使用 DBRoulette “。我把照片放在哪个文件夹里。请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:43:08.820

这意味着您需要将一些照片保存在您的 Dropbox 帐户中的示例项目试图获取的 pothos 文件夹下。

试试这个，看看是否有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-26T12:32:41.877

/Users/XXX/Dropbox/Apps/YorAppName/kick.jpg - “示例代码”的正确路径。

# android - 如何在android中获得9x9网格的显示？

> ID：12140558
> 
> 赞同：2
> 
> 时间：2012-08-27T10:48:52.727
> 
> 标签：android, user-interface, grid, cell

现在是时候为我探索 Android 了。我设计了一个如下所示的 ui，问题是我对在第一帧中应该做什么以获得 9x9 网格感到困惑。实际上，我通过使用 for 循环在每个单元格中放置 81 个 JTextFields 并在 gridbaglayout 的帮助下在核心 java 中开发了同样的东西，并且我的应用程序完美运行。但是在 android 中，我如何在 xml 中定义我的 9x9 单元格，以便它应该接受数字并且也应该检索输入的数字以验证数独规则。以下是我的代码和图表。谁能建议如何使框架 1 具有 9x9 单元？如果我在我的xml文件中使用TextEdit，它将是81个文本字段，如果我使用Canvas（我在想，不知道是否可能），在我看来，让它接受数字并从那个画布板上检索是不可能的。如果有人能提供帮助，我真的很感激。请放轻松，如果这看起来很愚蠢的问题（我希望不是，因为我尝试了 2 天），因为我是 android 新手。提前致谢。

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
        xmlns:android="http://schemas.android.com/apk/res/android"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical">
        <FrameLayout
                android:id="@+id/fLayout1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="2"
                android:background="#0f0"
        />
        <FrameLayout
                android:id="@+id/fLayout2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:layout_weight="3"
                android:background="#00f">

        <TableLayout
xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/keypad"
android:orientation="vertical"
android:layout_width="wrap_content"
android:layout_height="wrap_content"
android:stretchColumns="*">

<TableRow >
    <Button android:id="@+id/cancel"
        android:text="cancel"
        android:layout_span="3"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >
</TableRow>
<TableRow>
    <Button android:id="@+id/submit"
        android:text="validate"
        android:layout_span="3"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        >

    </Button>
</TableRow>
</TableLayout>

        </FrameLayout>
</LinearLayout> 
```

这是用户界面

![在此处输入图像描述](../Images/855bd4346d8946d1d8a0fdb94205e196.png).

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:56:19.993

看看这个来自[Git Hub](https://github.com/romario333/opensudoku/tree/master/OpenSudoku)的 Open Sudoku 项目。在这里您可以找到数独的布局和源代码。

检查 数独视图的**res/layout/sudoku_edit.xml**。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T10:57:37.713

我建议你使用[网格视图](http://developer.android.com/guide/topics/ui/layout/gridview.html)

> **GridView**是一个 ViewGroup，它在二维、可滚动的网格中显示项目。网格项目使用 ListAdapter 自动插入到布局中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-27T10:57:23.890

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<GridView
    android:id="@+id/gridView1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:numColumns="9" 

>
</GridView>

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" />
  <Button
    android:id="@+id/button2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="Button" /> 
```

# php - .htaccess 和 mod_rewrite 出错

> ID：12140559
> 
> 赞同：21
> 
> 时间：2012-08-27T10:48:53.773
> 
> 标签：php, .htaccess, mod-rewrite

我正在尝试使用以下 .htaccess 值托管基于 php 的应用程序。

```
Options +FollowSymLinks
Options -Indexes
DirectoryIndex index.php

RewriteEngine On
RewriteBase /easydeposit
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

但是，我一直面临以下两个错误，

```
[access_compat:error] [pid 25330:tid 27] AH01797: client denied by server configuration: /home/abc/opt/apache/htdocs/xyz/system/
[access_compat:error] [pid 25330:tid 27]  AH01797: client denied by server configuration: /home/abc/opt/apache/htdocs/xyz/private/
[access_compat:error] [pid 25330:tid 27] AH01797: client denied by server configuration: /home/abc/opt/apache/htdocs/xyz/application/
[authz_core:error] [pid 25330:tid 27]  AH01630: client denied by server configuration: /home/abc/opt/apache/htdocs/xyz/.htaccess 
```

我不确定为什么会这样。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-11-06T19:32:23.507

如果您最近升级到高于 2.2 版的 Apache 版本，则 authz_core 错误错误可能来自`<Document>`标签中的 httpd.conf 或 httpd-vhosts.conf 文件。mod_authz_core 是在 Apache 2.3 中引入的，并改变了声明访问控制的方式。

因此，例如，而不是 2.2 的配置方式`<Directory>`...

```
 <Directory "C:/wamp">
        Options Indexes FollowSymLinks
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory> 
```

**Order**和**Allow**指令已替换为**Require**指令：

```
 <Directory "C:/wamp">
        Options Indexes FollowSymLinks
        AllowOverride All
        Require all granted
    </Directory> 
```

来源 [http://www.andrejfarkas.com/2012/06/fun-with-wamp-server-and-apache-2-4-2/](http://www.andrejfarkas.com/2012/06/fun-with-wamp-server-and-apache-2-4-2/) [http://httpd.apache.org/docs/2.4/upgrading.html](http://httpd.apache.org/docs/2.4/upgrading.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-12-08T16:52:24.563

这个问题/答案让我得到了我很感激的[文档](http://httpd.apache.org/docs/2.4/upgrading.html)，以下是为我解决的问题。

**上一个`.htaccess`文件：**

```
# password protection allowing multiple resources
AuthType Basic
AuthName "Restricted Area"
AuthUserFile C:\path\to\.htpasswd
AuthGroupFile /dev/null
Require valid-user

# allow public access to the following resources
SetEnvIf Request_URI "(path/to/public_files/.*)$" allow

# these lines must be updated

Order allow,deny
# Allowing an ip range:
Allow from 69.69.69
# Allowing another range:
Allow from 71.71.71

Satisfy any 
```

此配置产生如下错误：

> [Thu Dec 08 10:29:20.347782 2016] [access_compat:error] [pid 2244:tid 15876] [client 93.93.93.93:49340] AH01797：客户端被服务器配置拒绝：C:/path/to/index.php

**为 2.4 配置更新**

```
# 7 lines unchanged...shown again for clarification 
AuthType Basic
AuthName "Restricted Area"
AuthUserFile C:\path\to\.htpasswd
AuthGroupFile /dev/null
Require valid-user
SetEnvIf Request_URI "(path/to/public_files/.*)$" allow

# these are the changes replacing:

# Order allow,deny
# Allow from <range>
# Satisfy any

Require ip 69.69.69
Require ip 71.71.71
Require all granted 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T17:16:43.533

我怀疑这与您的 htaccess 文件有关。错误由[mod_access_compat](https://httpd.apache.org/docs/2.4/mod/mod_access_compat.html)引发，它提供`Allow`、`Deny`、`Order`和`Satisfy`指令。在某个地方，您可能将允许和拒绝配置错误。至于最后的 .htaccess 错误，它来自[mod_authz_core](https://httpd.apache.org/docs/2.4/mod/mod_authz_core.html)，因此上游可能有一些东西完全阻止了对 .htaccess 文件的访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:53:50.977

您确定允许您覆盖 .htaccess 文件中的选项吗？检查主apache配置文件

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-18T05:51:21.453

另一个例子，改写自：

```
www.yoursite.com/script.php?product=123 
```

至

```
www.yoursite.com/cat/product/123/ 
```

使用

```
RewriteRule cat/(.*)/(.*)/$ /script.php?$1=$2 
```

[http://w3webtutorial.blogspot.com/2013/11/htaccess-and-modrewrite-in-your-php.html](http://w3webtutorial.blogspot.com/2013/11/htaccess-and-modrewrite-in-your-php.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T11:08:46.203

And you are absolutely sure that the apache user (probably _www) has access to the directory (`/home/abc/opt/apache/htdocs/xyz/`)?

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-27T11:02:14.563

```
Options +FollowSymLinks
Options -Indexes 
```

在许多共享主机上，上面的代码通常是主要问题

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-02-24T19:40:37.620

对我来说，wp-config 文件夹中有一个 .htaccess 文件，其中包含这些条目

```
Order deny,allow
Deny from all
<Files ~ ".(xml|css|jpe?g|png|gif|js)$">
Allow from all
</Files> 
```

这导致界面中的图标显示为正方形。

# java - 重用超类静态字段

> ID：12140562
> 
> 赞同：3
> 
> 时间：2012-08-27T10:49:21.273
> 
> 标签：java, inheritance, static

我有这个类声明

```
abstract class  A {
    protected static String message = "Hello";
} 
```

我希望这个字段传播到子类，以避免`protected static String message = "Whatever";`在所有子类中输入（每个子类中这个静态字段的值不同）。

我知道这行不通：

```
class B extends A {

    static {
        message = "Blablabla";
    }
} 
```

因为它实际上会修改`A`'s`message`因为静态字段/方法没有被继承。我想知道是否有其他方法可以做到这一点，或者我是否必须重写每个子类的静态字段。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T10:54:38.887

我建议使用被每个子类覆盖的受保护方法 getMessage() 而不是静态字段。

```
class B extends A {
    @Override
    protected String getMessage() {
        return "Blablabla";
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:52:48.370

在这种情况下，我通常会创建一个 get 方法：

```
abstract class  A {
    private static final String DEFAULT_MESSAGE = "Hello";
    protected String getMessage() {
        return DEFAULT_MESSAGE;
    }
} 
```

这使得在我想要的子类中覆盖消息变得很容易。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:40:29.583

没有直接的方法可以做到这一点。

您可以考虑使用一些将 Class 对象映射到消息的实用程序类。这将帮助您使用通用方法处理基于`this.getClass()`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:56:25.840

静态字段和方法*是*继承的——作为 C 程序员，我被告知将它们视为类似于“全局”变量，命名为类（并具有私有/受保护的限制）。

从您的第一个片段中，`B.message`将是“Hello”。

你必须做到

```
public class A {
  protected String message = "Hello";
} 
```

或者

```
public class A {
  private static String message = "Hello";
}

public class B {
  private static String message = "Howdy";
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T22:55:15.430

一个方面会让你实现你想做的事情吗？您可以从一个地方逐个类地配置/管理具有特定名称的方法的返回值。...这仍然比在每个子类中复制相同的样板“私有静态 ...”要多。

# java - 访问动作类中的会话变量

> ID：12140565
> 
> 赞同：0
> 
> 时间：2012-08-27T10:49:35.647
> 
> 标签：java, struts2

我的项目中有struts2.0，我通过实现SessionAware将用户名存储在会话中，如下所示

```
public class NewProduct extends ActionSupport implements SessionAware{
 private Map session;
 public String execute() {
 session.put("username", "Rangappa");
 return "success"
}

public void setSession(Map session) {
    this.session = session;

}
public Map getSession() {
    return session;
  } 
```

在这里我在这里设置会话变量，我没有得到如何在其他类中获取这个会话变量，我如下完成但它不起作用

```
public class NewProduct extends ActionSupport implements SessionAware{
 public String execute() throws Exception {
 String username = (String) session.get("username");
 System.out.println("username: "+username );
  return "success"
 }
} 
```

两个课程都在同一个包中，请告诉我解决方案，谢谢我提前

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-04T11:02:14.093

导入适当的包后使用此代码

```
Map session = ActionContext.getContext().get("session");
String userName = (String)(session.get("username")); 
```

# c# - 在 ServiceStack 中使用 ICacheClient 和 protobuf 时的编码/序列化问题

> ID：12140571
> 
> 赞同：4
> 
> 时间：2012-08-27T10:50:01.087
> 
> 标签：c#, serialization, character-encoding, protobuf-net, servicestack

我正在使用带有 protobuf 序列化的当前 ServiceStack。

添加 ICacheClient 以缓存我的响应时，从缓存客户端发送的二进制答案与没有任何缓存客户端的原始响应具有不同的编码/二进制序列化。

这会导致客户端出现反序列化问题，我使用的是预编译的反序列化器。

例如，在 ServiceStack 服务器端使用 ICacheClient 时，客户端会出现此 protobuf 异常：

```
OverflowException: Number overflow.
ProtoBuf.ProtoReader.TryReadUInt32VariantWithoutMoving (Boolean trimNegative, System.UInt32& value)
ProtoBuf.ProtoReader.ReadUInt32Variant (Boolean trimNegative)
ProtoBuf.ProtoReader.ReadUInt32 () MyModelSerializer.Read (My.Models.MyDataModel , ProtoBuf.ProtoReader ) 
```

（我相信这是一个随机异常，很确定也可能发生其他异常。以此为例。）

此行为与 MemoryCacheClient 和 Redis 缓存客户端相同。

这就是我初始化 protobuf 的方式：

```
ContentTypeFilters.Register(ContentType.ProtoBuf,
                        (reqCtx, res, stream) => ProtoBuf.Serializer.NonGeneric.Serialize(stream, res),
                         ProtoBuf.Serializer.NonGeneric.Deserialize); 
```

缓存客户端初始化如下：

```
container.Register<ICacheClient>(new MemoryCacheClient()); 
```

[（或遵循本指南](https://github.com/ServiceStack/ServiceStack/wiki/Caching)的Redis ）。

这就是通过网络传输的缓存的 protobuf 序列化数据的外观，并且与未缓存的数据不同： ![二进制差异](../Images/ff42303a7233a9a171fc33965d9c3719.png) [Big Image](https://i.stack.imgur.com/GGc38.png)

未缓存的响应似乎以不同的方式编码/序列化。

对于这个编码问题，我可以做些什么来使 Redis 或 Memory-ICacheClient 与 protobuf 兼容？

* * *

**更新：我调查了一下，这些是我的发现：**

*   要存储在缓存提供程序中（无论是 Redis os 内存），protobuf 二进制流通过 HttpResponseFilter->SerializeToString 中的 StreamReader 使用“UTF8 without BOM”-Encoding“转换”为字符串，该编码本身通过 CacheClientExtensions 调用->缓存（）。

*   **第一个问题**：CacheClientExtensions->Cache() 然后返回到字符串序列化的 DTO，使得 protobuf 已经不可能反序列化。**第一个解决方案**：在 CacheClientExtensions->Cache() 中返回原始 DTO。但这仅适用于第一个非缓存响应，因为缓存的响应尚未正确反序列化。这将我们带到

*   **第二个问题**：再次从缓存中取出数据需要对 protobuf 的二进制数据进行正确的字符串序列化，以便首先将其放入缓存中。我知道它将通过 base64 工作。

*   **第三个问题**：目前似乎没有办法在运行时通过 HttpResponseFilter->SerializeToString 中的 StreamReader 替换当前的流到字符串转换，对吗？

*   **第四个问题**：从缓存中取回数据时，必须再次进行base64解码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-28T15:42:54.117

我正在挖掘 ServiceStack 代码，但发现没有实现我的要求的可能性（我真的希望我没有忽略某些东西）。

因此，我对 ServiceStack 进行了一些更改，这些更改允许使用自定义 TextSerializer，然后将这些 TextSerializer 用于将 DTO 推入缓存客户端之前将其序列化为字符串。

在这里查看我的差异： [https ://github.com/derFunk/ServiceStack/commit/93f62c7d7e44a303c88a81c3096b9757daba4c7c](https://github.com/derFunk/ServiceStack/commit/93f62c7d7e44a303c88a81c3096b9757daba4c7c)

它适用于我的目的，尽管它可能尚未经过全面测试并且非常专注于 protobuf。

如果一些 ServiceStack 忍者可以审查我正在做的事情，我将不胜感激，也许它最终会出现在拉取请求中。

# facebook - FB Open Graph：对不同的对象使用相同的动作

> ID：12140575
> 
> 赞同：1
> 
> 时间：2012-08-27T10:50:25.710
> 
> 标签：facebook, facebook-opengraph

我的应用程序有 2 个完全不同的对象，它们在语义上需要相同的打开图形操作：“完成一个场景”和“完成一个任务”。

Facebook 在其“Open Graph Checklist”中有以下句子：

> 多个对象：不要提交重复或同义的操作。例如，不要提交 action:run 和 object:race，以及 action:run 和 object:marathon。相反，提交一个包含两个对象（比赛和马拉松）的动作（跑步）。

当我现在在 Open Graph 应用程序设置中将 2 个不同的对象添加到我的操作“完成”时，这两个对象都是“必需的”，没有更改此选项的选项。我想要的是能够发布“完整的任务”**或**“完整的场景”，而不是一个帖子中的两个对象。

**是否可以遵守 Open Graph Checklist 并对完全不同的对象使用一种操作？**

我知道有一些问题听起来很相似，但它们都有不同的问题：有些人希望在一个 Post to Open Graph 中使用多个对象，有些人希望将对象连接到其他对象。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:44:58.297

> 当我现在在 Open Graph 应用程序设置中将 2 个不同的对象添加到我的操作“完成”时，这两个对象都是“必需的”，没有更改此选项的选项。

您的操作的 Open Graph 概述说这两个对象都是“必需的”，是的 - 但您仍然可以发布一个仅给出*其中一个*对象的操作。

# mysql - 如何更改curtime？

> ID：12140578
> 
> 赞同：2
> 
> 时间：2012-08-27T10:50:32.013
> 
> 标签：mysql, time

如何更改 MySQL 中的 curtime 值，我运行查询`SELECT CURTIME()`，结果为`18:49:12`.

我想将值更改为`17:49:12`

如果有人知道这样做的好方法，我将非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T10:56:28.700

CURTIME() 值是基于服务器时区的值。您可以更改服务器时区：

```
SET time_zone = 'America/New_York'; 
```

或者使用 MySQL 函数 ADD_DATE() 执行此操作：

```
SELECT SELECT DATE_SUB(CURDATE(), INTERVAL 1 HOUR) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:56:55.440

You could be set the `time-zone` manually, like so:

```
SET GLOBAL time_zone = '-1:00'; 
```

or to set to your system time:

```
SET GLOBAL time_zone = SYSTEM; 
```

See the [documentation](http://dev.mysql.com/doc/refman/5.5/en/time-zone-support.html) for more information.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T10:56:51.190

If you are trying to get a different time zone, you could apply timezone **OR** if u always want to get 1 hour before current time you could reduce the current time by 1 hour

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T10:53:53.617

哼，我觉得你做不到。这意味着mysql可以改变系统时间！

# ios5 - 异步 NSURLConnection 泄漏

> ID：12140579
> 
> 赞同：2
> 
> 时间：2012-08-27T10:50:33.720
> 
> 标签：ios5, memory-leaks, automatic-ref-counting, nsurlconnection, nsurlconnectiondelegate

我知道这个问题已经被报告了很多次，但几乎所有的答案都与非 ARC 项目有关，而且我已经被困了好几天了。我看过很多论坛和文章。我希望我能在这里找到一些帮助。

我使用异步 NSURLConnection 请求来下载图片，使用 IOS 5，使用 ARC，如下（代码灵感来自《学习 IPAd 编程》一书）：

```
-(void) dowloadImageAtURL:(NSURL *)URL
{
    if (URL)
    {        
        self.image = nil;
        self.receivedData = [[NSMutableData alloc] init];
        NSURLRequest *request = [NSURLRequest requestWithURL:URL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:60.0];
        [[NSURLCache sharedURLCache] setMemoryCapacity:0];
        [[NSURLCache sharedURLCache] setDiskCapacity:0];
        NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request              // Building asynchronous connection
                                                               delegate:self
                                                              startImmediately:NO];                 // This is the key to not run the connection synchronous
        [connection scheduleInRunLoop:[NSRunLoop currentRunLoop] forMode:NSRunLoopCommonModes];     // We use the current loop but it will still be asynchronous
                                                                                                    // because of the mode added to the current loop
        [connection start];
        request = nil;
    }
}

#pragma marks - NSURLConnection delegate Methods

/*
 Called when the web server responds to the request.
 When the method is called, the receivedData property is reset with a length of zero, clearing any previously stored data.
 This ensures that only the data received from the final request is captured (see NSURLConnectionDelegate reference).
 */
- (void) connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response
{
    [self.receivedData setLength:0];
    NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil];
    [NSURLCache setSharedURLCache:sharedCache];
    sharedCache = nil;
    connection = nil;
}

/*
 Called when data is received from the network. The method can be called a multiple times during a single request.
 The data is appended to the data already stored in the receivedData property.
 */
- (void) connection:(NSURLConnection *)connection didReceiveData:(NSData *)data
{
    [self.receivedData appendData:data];

}

/*
 Called after the request has completed all data and all data has been received. This method converts
 the data stored to a UIImage object. 
 */
- (void) connectionDidFinishLoading:(NSURLConnection *)connection
{
    self.image = [UIImage imageWithData:self.receivedData];
    self.receivedData = nil;
    connection = nil;
    NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil];
    [NSURLCache setSharedURLCache:sharedCache];
    sharedCache = nil;

    // Here we post a notification to the observer
    [[NSNotificationCenter defaultCenter] postNotificationName:@"com.perfectmemory.famille.imageupdated" object:self];
}

/*
 Called if an error is detected at any time during the download process.
 */
- (void) connection:(NSURLConnection *)connection didFailWithError:(NSError *)error
{
    self.receivedData = nil;
    connection = nil;
    NSURLCache *sharedCache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil];
    [NSURLCache setSharedURLCache:sharedCache];
    sharedCache = nil;

    // Here we post a notification to the observer
    [[NSNotificationCenter defaultCenter] postNotificationName:@"com.perfectmemory.famille.imageupdated" object:self];

} 
```

运行此代码时，下载运行良好，但我可以在 XCode 工具中看到泄漏

*   URLConnectionLoader::LoaderConnectionEventQueue
*   URLConnection::scheduleWithRunLoop
*   CFURL响应
*   URLConnectionInstanceData

    我已使用以下帮助尝试解决问题，例如清除缓存，但没有成功：

*   [NSURLConnection 泄漏——为什么？](https://stackoverflow.com/questions/1697748/nsurlconnection-leaks-why)
*   [http://www.friendlydeveloper.com/2010/04/successfully-working-around-the-infamous-nsurlconnection-leak/](http://www.friendlydeveloper.com/2010/04/successfully-working-around-the-infamous-nsurlconnection-leak/)
*   [NSURLConnection 泄漏？](https://stackoverflow.com/questions/1345663/nsurlconnection-leak)

我还尝试使用以下方法释放每个相关委托方法中的连接：

```
connection = nil 
```

但仍然没有成功。我真的不明白发生了什么。我找不到未发布的对象。请你帮助我好吗 ？这很令人沮丧，因为我猜这个异步下载请求很常见。

提前非常感谢。

# python - BeautifulSoup new_tag 插入两次

> ID：12140580
> 
> 赞同：0
> 
> 时间：2012-08-27T10:50:43.557
> 
> 标签：python, beautifulsoup

我正在尝试在 BeautifulSoup 中一次向 div[id='head'] 添加几个标签

```
soup.find_all('div', id='head',limit=1)[0].insert(1, soup.new_tag(u'<div id="menu_top_right" class="menu_top"><div class="menu_inner"><a class="" target="_blank" href="./local/zkratky/index.html">Zkratky</a><span>|</span><a class="" target="_blank" href="./local/slovnik/index.html">Slovník</a><span>|</span><a class="" target="blank" href="./local/dokumenty/index.html">Dokumenty</a></div></div><div class="clear"></div>')) 
```

结果，我插入了两次代码（带有一些额外的 < 和 >），但不知道为什么。

```
<<div id="menu_top_right" class="menu_top">
    <div class="menu_inner">
        <a class="" target="_blank" href="./local/zkratky/index.html">Zkratky</a><span>|</span>
        <a class="" target="_blank" href="./local/slovnik/index.html">Slovník</a><span>|</span>
        <a class="" target="blank" href="./local/dokumenty/index.html">Dokumenty</a>
   </div>
</div>
<div class="clear"></div>>
</<div id="menu_top_right" class="menu_top">
    <div class="menu_inner">
        <a class="" target="_blank" href="./local/zkratky/index.html">Zkratky</a><span>|</span>
        <a class="" target="_blank" href="./local/slovnik/index.html">Slovník</a><span>|</span>
        <a class="" target="blank" href="./local/dokumenty/index.html">Dokumenty</a>
    </div>
</div>
<div class="clear"></div>> 
```

我在文档中没有发现任何内容说您不能用一个soup.new_tag() 创建多个新标签。可能是什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:20:44.843

我假设你正在使用你正在使用 BeautifulSoup4？如果你这样做了，问题是你不能用一个创建多个标签`new_tag()`，更不用说插入 HTML：

```
>>> soup.new_tag('<div myattr="foo"></div>')
<<div myattr="foo"></div>></<div myattr="foo"></div>> 
```

您必须单独创建每个子项并手动分配属性：

```
>>> parent = soup.find('div')
>>> parent
<div></div>
>>> new_tag = soup.new_tag('div')
>>> new_tag['id'] = 'menu_top_right'
>>> new_tag['class'] = 'menu_top'
>>> new_tag
<div class="menu_top" id="menu_top_right"></div>
>>> parent.insert(1, new_tag)
>>> soup
<div><div class="menu_top" id="menu_top_right"></div></div> 
```

编辑：语法突出显示使这看起来很奇怪。

# node.js - 使用 node.js 的 NTLM 身份验证

> ID：12140589
> 
> 赞同：12
> 
> 时间：2012-08-27T10:51:31.553
> 
> 标签：node.js, ntlm

我需要使用 node.js 与使用 NTLM 代理身份验证的服务器进行通信。

我使用了 2 个模块：

1.  节点卷曲[https://github.com/jiangmiao/node-curl](https://github.com/jiangmiao/node-curl)
2.  请求，强烈推荐 [htps://github.com/mikeal/request](https://github.com/mikeal/request)

我没有找到关于 ntlm 请求模块的文档，虽然 node-curl 支持 curl 简单选项，但我没有找到关于如何为 CURLOPT_HTTPAUTH 指定 CURLAUTH_NTLM 的文档。

我想知道如何处理 NTLM 代理身份验证。我很想继续使用请求模块。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-14T01:14:37.163

编写了一个 Node.js 库来进行 HTTP NTLM 握手：[https ://github.com/SamDecrock/node-http-ntlm](https://github.com/SamDecrock/node-http-ntlm)

它是从 python-ntlm 库移植的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-15T12:51:37.487

如果您使用的是 Express，则可以使用 express-ntlm 它使 NTLM 总体上不那么令人沮丧

[https://www.npmjs.com/package/express-ntlm](https://www.npmjs.com/package/express-ntlm)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T14:44:30.303

Is it important for you to use NTLM directly in node.js code?

Instead you can try to install some intermediate NTLM proxies that will give you a chance to use simple HTTP proxy in node.js. There are at least two solutions for it:

1.  Cntlm - written in C
2.  Ntlmaps - written in Python

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T16:53:54.377

不幸的是，我只制作了或多或少简单的 NTLM 版本。

这有点完整：[https ://gist.github.com/Piot/3063016](https://gist.github.com/Piot/3063016)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-20T19:44:26.247

这是 Node.js 中 NTLM 服务器端的部分实现。它可能有助于开发客户端请求：[https ://gist.github.com/3049352](https://gist.github.com/3049352)

这是一些似乎生成类型 1 消息并接收类型 2 响应的代码。类型 3 消息尚未实现，是最后一步：github.com/kevinswiber/node-ntlm-client

以下是有关 NTLM 协议的一些文档，可以帮助完成它： http: [//www.innovation.ch/personal/ronald/ntlm.html](http://www.innovation.ch/personal/ronald/ntlm.html)

这是一个开始。

# git - 如何修复 GIT 错误：切换分支时目标文件为空

> ID：12140593
> 
> 赞同：2
> 
> 时间：2012-08-27T10:51:52.247
> 
> 标签：git

我在分行`master`。当结帐到`zc`分行时，我被告知`object file is empty`。

```
$ git branch 
  demo
  develop
* master
  zc

$ git checkout zc
error: unable to find 00d2a5741d54116a156e477093c3fcf30b24c6b3
error: unable to read sha1 file of doc/build/html/_sources/props/buyhp.txt (00d2a5741d54116a156e477093c3fcf30b24c6b3)
error: object file .git/objects/ee/4fc9118d213089e959b1625405c4b835cd4af7 is empty
error: unable to find ee4fc9118d213089e959b1625405c4b835cd4af7
error: object file .git/objects/ee/4fc9118d213089e959b1625405c4b835cd4af7 is empty
fatal: loose object ee4fc9118d213089e959b1625405c4b835cd4af7 (stored in .git/objects/ee/4fc9118d213089e959b1625405c4b835cd4af7) is corrupt 
```

# android - 通过流程节省电池 - GCM

> ID：12140594
> 
> 赞同：0
> 
> 时间：2012-08-27T10:52:00.920
> 
> 标签：android, google-cloud-messaging

如果我有 3 个都使用 GCM 的应用程序，它们是否都使用相同的统一流程？我的意思是 3 个应用程序使用 3 个进程在没有 GCM 的情况下连接服务器，但是通过使用 GCM 3 个应用程序只使用 1 个进程，因此它可以节省电池电量。这是真的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:38:20.853

> 我的意思是 3 个应用程序使用 3 个进程在没有 GCM 的情况下连接服务器，但是通过使用 GCM 3 个应用程序仅使用 1 个进程，因此它可以节省电池电量。这是真的吗？

并不真地。通过“使用 GCM 3 应用程序使用”3 个进程，但仅在它们运行时。他们在不运行时使用零进程。然而，它们仍然能够接收 GCM 消息，因为操作系统提供了另一个进程，它正在响应传入的 GCM 消息（除其他外）。“省电”与其说是拥有更少的进程，不如说是拥有一个经过微调的进程来管理套接字状态，并且即使设备故障转移到移动数据（关闭 WiFi）也能够接收消息。

# javascript - 如何限制文本框中的字符？

> ID：12140604
> 
> 赞同：0
> 
> 时间：2012-08-27T10:52:31.200
> 
> 标签：javascript, asp.net, vb.net, visual-studio

我有一个按钮1，其文本为0，单击按钮时，按钮文本将出现在文本框中，代码如下：

```
Protected Sub Button2_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button2.Click
        TextBox8.Text = TextBox8.Text + "0"
        End Sub 
```

**我的问题 ：**

单击button1后，我想限制文本框中的字符打印。

我想如果我的文本框最大长度为 2，然后在 2 个字符后单击按钮，它不会在两个字符后打印 button1 的文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:00:04.433

您可以尝试**设置 MaxLength**并使用它来检查当前文本长度是否已达到最大值

```
' code behind
Protected Sub Button1_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button1.Click
    If TextBox8.Text.Length < TextBox8.MaxLength Then
        TextBox8.Text = TextBox8.Text & "0"
    End If
End Sub

' aspx page
<form id="form1" runat="server">
   <asp:TextBox ID="TextBox8" MaxLength="2" runat="server"></asp:TextBox>
   <asp:Button ID="Button1" runat="server" Text="Button" onclick="Button1_Click" />
</form> 
```

如果您可以更精确地尝试实现的目标，我可以调整我的答案！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T10:56:15.750

您的问题有点难以理解，但是您是否在寻找 TextBox.MaxLength 属性？

[http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.maxlength.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.textbox.maxlength.aspx)

或者，您可以只检查代码中的长度：

```
Protected Sub Button2_Click(ByVal sender As Object, ByVal e As System.EventArgs) Handles Button2.Click
    If TextBox8.Text.Length < 3 Then TextBox8.Text = TextBox8.Text + "0"
End Sub 
```

# python - 从 python 与 bash 脚本通信

> ID：12140608
> 
> 赞同：0
> 
> 时间：2012-08-27T10:52:55.907
> 
> 标签：python, windows, bash, mingw

我正在 Windows 下从 python 脚本运行一些 shell 测试脚本。shell 脚本正在测试各种模块的功能。

我面临的问题是某些脚本可能会挂起。为此，我为每个脚本添加了超时。此超时具有默认值。但是这个超时值可以通过 bash 脚本来改变——从一个 bash 函数（SetMaxTime）——我可以修改 SetMaxTime。

当使用默认值时，我在 python 中等待那段时间，如果 bash 脚本没有完成，我会认为该测试由于超时而失败。

问题是当超时的默认值从 bash 更改时。有没有办法从 python 与 bash 脚本（使用 mingw 运行）进行通信？

注意：脚本在 Windows 下运行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:31:30.300

当然，您可以在它们之间进行通信，只需从一个文件或一对文件中读取/写入（一个用于 Python 写入，一个用于读取 bash 脚本，另一个用于反之亦然）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:45:47.053

设置超时值时，让您的脚本在 stdout 上输出信息。例如。当超时发生变化时，脚本可以输出：

```
TIMEOUT_SECONDS=2 
```

在调用脚本的 Python 代码中，在调用脚本的输出中查找此标记并相应地调整测试超时。

为此，您可能需要使用[subprocess.Popen](http://docs.python.org/library/subprocess.html#popen-objects)方法调用您的脚本，并指定`PIPE`stdout 的选项。然后，您需要在测试运行时读取 subprocess [stdout](http://docs.python.org/library/subprocess.html#subprocess.Popen.stdout)属性，查找`TIMEOUT_SECONDS=xxx`脚本的输出并调整超时时间。

# clearcase - clearcase 特定分支上文件的最新版本

> ID：12140611
> 
> 赞同：2
> 
> 时间：2012-08-27T10:53:00.170
> 
> 标签：clearcase

我知道明文版本文件的文件名。如何在特定分支上找到此文件的最新版本？它不应该选择任何子分支。此外，可能并不总是知道父分支名称。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T11:13:32.860

如果您使用的是动态视图，则可以使用**[扩展路径](https://stackoverflow.com/questions/987427/why-cant-perl-find-my-file-that-is-in-clearcase/988904#988904)**`LATEST`直接访问给定分支的版本：

```
cat file@@/main/branch/subbranch/LATEST 
```

如果您不知道此版本存储的确切分支路径（父分支），您可以修改您的动态视图并首先添加选择规则

```
element /path/to/file .../subbranch/LATEST 
```

这将`LATEST`在动态视图中选择子分支的版本。

或者**您可以执行`cleartool find`, 以查看该文件的完整扩展路径**：

```
cleartool find . -name "yourFile" -ver "version(.../subbranch/LATEST) 
```

您将能够`cat`（或`type`在 Windows 中）直接得到结果（这将是*完整*的扩展路径）

`cat`the或 the后面的 diea`cleartool find`是为了能够使用语法`.../subbranch/LATEST`。
带有三个点的语法意味着： ' `.../subbranch`' 后面跟着的任何分支`/subbranch`。

# java - 使用 Child 进行 XML 解析而不是值解析

> ID：12140614
> 
> 赞同：0
> 
> 时间：2012-08-27T10:53:11.133
> 
> 标签：java, dom, xpath, xml-parsing

使用 Child 进行 XML 解析而不是值解析

```
 import java.io.File;
   import java.io.FileInputStream;

   import javax.xml.xpath.XPath;
   import javax.xml.xpath.XPathConstants;
   import javax.xml.xpath.XPathFactory;

   import org.w3c.dom.Node;
   import org.w3c.dom.NodeList;
   import org.xml.sax.InputSource;

   import com.sun.org.apache.xml.internal.dtm.ref.DTMNodeList;

    public class XPathEvaluator {
    /*
   * ServiceGroup serviceGroup = new ServiceGroup(); List<Service>
    * requiredServices = new ArrayList<Service>(); List<Service>
  * recommandedServices = new ArrayList<Service>(); Service service = new
  * Service();
  */

public void evaluateDocument(File xmlDocument) {

    try {
        XPathFactory factory = XPathFactory.newInstance();
        XPath xPath = factory.newXPath();
        String requiredServicesExpression = "/Envelope/Header";
        InputSource requiredServicesInputSource = new InputSource(
                new FileInputStream(xmlDocument));
        DTMNodeList requiredServicesNodes = (DTMNodeList) xPath.evaluate(
                requiredServicesExpression, requiredServicesInputSource,
                XPathConstants.NODESET);
        System.out.println(requiredServicesNodes.getLength());
        NodeList requiredNodeList = (NodeList) requiredServicesNodes;

        for (int i = 0; i < requiredNodeList.getLength(); i++) {
            Node node = requiredNodeList.item(i);
            System.out.println(node.getChildNodes());

        }

    } catch (Exception e) {
        e.printStackTrace();
    }
}

public static void main(String[] argv) {
    XPathEvaluator evaluator = new XPathEvaluator();
    File xmlDocument = new File("d://eva.xml");
    evaluator.evaluateDocument(xmlDocument);

 }

} 
```

我的 xml 在此我正在尝试解析标头信息

```
 <?xml version="1.0" encoding="UTF-8"?>
   <Envelope>
       <Header>
            <User id="MAKRISH"/>
            <Request-Id id="1"/>
            <Type name="Response"/>
            <Application-Source name="vss" version="1.0"/>
            <Application-Destination name="test" />
            <Outgo-Timestamp date="2012-08-24" time="14:50:00"/>
            <DealerCode>08301</DealerCode>
            <Market>00000</Market>
        </Header>
   </Envelope> 
```

我无法获得 Header child 我如何才能获得它们它在 getchildNodes 方法上给了我 null 。我检查了很多解决方案，但得到了任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:38:22.593

以下解析是根据标记使用 DOM 完成的，我希望这可以帮助您解决

```
{

  try{

            File file = new File("xmlfile");
            DocumentBuilderFactory factory =
            DocumentBuilderFactory.newInstance();
            DocumentBuilder builder = factory.newDocumentBuilder();
            Document document = builder.parse(file);
            Element root = document.getDocumentElement();
            root.normalize();
            printNode(root, 0);
             } catch (Exception e) {
                  }
            }
            public static void printNode(Node node, int depth) {
            if (node.getNodeType() == Node.TEXT_NODE) {
            System.out.printf("%s%n",  node.getNodeValue());
            } else {
            NamedNodeMap attributes = node.getAttributes();
            if ((attributes == null) || (attributes.getLength() == 0)) {
            System.out.printf("%s%n", node.getNodeName());
            } else {

            System.out.printf("%s ", node.getNodeName());
        printAttributes(attributes);
        }
       }
        NodeList children = node.getChildNodes();

        for(int i=0; i<children.getLength(); i++) {

        Node childNode = children.item(i);

        printNode(childNode, depth+1);

        }
           }
       private static void printAttributes(NamedNodeMap attributes) {
       for(int i=0; i<attributes.getLength(); i++) 
    {
       Node attribute = attributes.item(i);
       System.out.printf(" %s=\"%s\"", attribute.getNodeName(),
       attribute.getNodeValue());       
   }                                                                                     

 }                                                                                          
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:19:09.237

[这个相关问题](https://stackoverflow.com/questions/4082690/parsing-xml-using-xpath-in-java?rq=1)的公认答案是使用 xpath 解析 xml 的一个很好的例子。

我已经调试了你的代码，getChildNodes 调用实际上没有返回 null，但它有一个令人困惑的`toString()`.

# delphi - 为什么 TEdit 中的文本剪辑在第一次创建时没有改变

> ID：12140621
> 
> 赞同：3
> 
> 时间：2012-08-27T10:53:48.047
> 
> 标签：delphi

嗨，我正在尝试使用 TButton 构建一个 TEdit 控件以进行 Buttoned Edit，但问题是文本剪辑位于 Button 下方，而后者没有出现，因为按钮位于其上方。如何解决？请注意，当我调用 UpdateEditMargins 时（这是调整文本剪辑的过程）

这是我的代码：

```
unit YazButtonedEdit;

interface

uses
  SysUtils, Classes, Controls, StdCtrls, Buttons, Messages, Windows, Forms;

type
  TYazButtonedEdit = class(TCustomEdit)
  private
    FEditButton: TBitBtn;
    FButtonWidth: Integer;
    FButtonVisible: Boolean;
    procedure WMSize(var Message: TMessage); message WM_SIZE;
    procedure SetButtonVisible(const Value: Boolean);
    procedure GetEditButtonClick(const Value: TNotifyEvent);
    function SetEditButtonClick: TNotifyEvent;
    procedure SetButtonWidth(const Value: Integer);
  protected
    procedure RefreshButton;
    procedure CreateParams(var Params: TCreateParams); override;
    procedure WndProc(var Message: TMessage); override;
  public
    procedure Notification(AComponent: TComponent; Operation: TOperation); override;
    constructor Create(AOwner: TComponent); override;
    destructor Destroy; override;
    procedure UpdateEditMargins;
  published
    property ButtonWidth: Integer read FButtonWidth write SetButtonWidth;
    property ButtonVisible: Boolean read FButtonVisible write SetButtonVisible;
    property OnEditButtonClick: TNotifyEvent read SetEditButtonClick write GetEditButtonClick;
  end;

procedure Register;

implementation

procedure Register;
begin
  RegisterComponents('KH-Controls', [TYazButtonedEdit]);
end;

{ TYazButtonedEdit }

constructor TYazButtonedEdit.Create(AOwner: TComponent);
begin
  inherited Create(AOwner);
  ControlStyle := ControlStyle - [csSetCaption];

  FEditButton := TBitBtn.Create(self);
  with FEditButton do begin
     Parent := self;
     TabStop := false;
     Visible := true;
     OnClick := OnEditButtonClick;
  end;
end;

procedure TYazButtonedEdit.CreateParams(var Params: TCreateParams);
begin
  inherited CreateParams(Params);
  Params.Style := Params.Style or WS_CLIPCHILDREN;
end;

destructor TYazButtonedEdit.Destroy;
begin
  FEditButton.Free;
  inherited;
end;

procedure TYazButtonedEdit.GetEditButtonClick(const Value: TNotifyEvent);
begin
  FEditButton.OnClick := Value;
end;

procedure TYazButtonedEdit.RefreshButton;
begin
  FEditButton.Width := ButtonWidth;
  FEditButton.Height := Height - 4;
  FEditButton.Visible := ButtonVisible;
  UpdateEditMargins;
end;

procedure TYazButtonedEdit.SetButtonVisible(const Value: Boolean);
begin
  if FButtonVisible <> Value then
  begin
    FButtonVisible := Value;
    RefreshButton;
  end;
end;

procedure TYazButtonedEdit.SetButtonWidth(const Value: Integer);
begin
  if FButtonWidth <> Value then
  begin
    FButtonWidth := Value;
    RefreshButton;
  end;
end;

function TYazButtonedEdit.SetEditButtonClick: TNotifyEvent;
begin
  Result := FEditButton.OnClick;
end;

procedure TYazButtonedEdit.WMSize(var Message: TMessage);
begin
  RefreshButton;
end;

procedure TYazButtonedEdit.WndProc(var Message: TMessage);
var
  LLeft, LTop: Integer;
begin
  case Message.Msg of
    CN_CTLCOLORSTATIC,
    CN_CTLCOLOREDIT:
        if FEditButton.Visible then
        begin
          LLeft := FEditButton.Left;
          LTop := FEditButton.Top;
          ExcludeClipRect(Message.WParam, LLeft + 1, LTop + 1,
            FEditButton.Width + FEditButton.Left - 1, FEditButton.Height - 1);
        end;
  end;
  inherited;
end;

procedure TYazButtonedEdit.UpdateEditMargins;
var
  LMargin, RMargin: Integer;
begin
  if HandleAllocated then
  begin
    LMargin := 0;
    RMargin := 0;
    if FEditButton.Visible then
        LMargin := FEditButton.Width + 2;
    SendMessage(Handle, EM_SETMARGINS, EC_LEFTMARGIN or EC_RIGHTMARGIN, MakeLong(LMargin, RMargin));
    Invalidate;
  end;
end;

procedure TYazButtonedEdit.Notification(AComponent: TComponent; Operation: TOperation);
begin
  inherited Notification(AComponent, Operation);
  if Operation = opRemove then
  begin
    if AComponent = FEditButton then
    begin
      RefreshButton;
    end;
  end;
end;

end. 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T11:29:43.580

在创建编辑窗口后调用它，最好是在[`CreateWnd`](http://docwiki.embarcadero.com/Libraries/en/Vcl.StdCtrls.TCustomEdit.CreateWnd)方法中。因此，添加以下内容：

```
type
  TYazButtonedEdit = class(TCustomEdit)
  ...
  protected
    procedure CreateWnd; override;
  ...
  end;

implementation

procedure TYazButtonedEdit.CreateWnd;
begin
  inherited;
  UpdateEditMargins;
end; 
```

# iphone - 使用 MPMediaPickerController 从 Genius 播放列表中选择歌曲时，歌曲标题与选择器标题重叠

> ID：12140624
> 
> 赞同：1
> 
> 时间：2012-08-27T10:53:50.077
> 
> 标签：iphone, ios, playlist, mpmediapickercontroller

我正在使用一个

`MPMediaPickerController`

选择歌曲添加到我的应用程序的播放列表中。使用以下代码，为了从 Genius 播放列表中选择歌曲，歌曲标题与选择器标题重叠，如图 1 所示。对于任何其他情况，文本不重叠。有人可以帮我解决这个问题。

```
- (void)addToPlaylist: (id)sender {
MPMediaPickerController* picker = [[MPMediaPickerController alloc] initWithMediaTypes: MPMediaTypeAnyVideo]; 

picker.delegate = self; 
picker.allowsPickingMultipleItems = YES; 
picker.prompt = NSLocalizedString (@"AddSongsToPlaylist", nil);

[self presentModalViewController: picker animated: YES]; 
[picker release];
} 
```

------图片1-----------------------------正常歌曲选择

![天才播放列表重叠标题](../Images/169a1aee4b76df4e4747f7b790c7d5f1.png) ![正常选择图像](../Images/ec05abfeab428aa155c0003d4df84006.png) ![在此处输入图像描述](../Images/dfcdba5f6dde2b6a39472a1413cba907.png)

# python - 龙卷风哨兵集成

> ID：12140634
> 
> 赞同：2
> 
> 时间：2012-08-27T10:54:25.110
> 
> 标签：python, django, tornado, sentry

是否有任何解决方案可以将错误报告从 发送[`tornado`](http://www.tornadoweb.org/)到[`sentry`](https://github.com/getsentry/sentry)？或任何类似的龙卷风错误记录系统？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:00:26.513

标准的[Sentry 客户端](https://www.getsentry.com/docs/python/)——Raven[**确实**](https://github.com/getsentry/raven-python)支持 Tornado。

[Sentry DSN](http://raven.readthedocs.org/en/latest/config/index.html#the-sentry-dsn)匹配：
`{PROTOCOL}://{PUBLIC_KEY}:{SECRET_KEY}@{HOST}/{PATH}{PROJECT_ID}`

> 注意：协议还可能包含传输器类型：gevent+http、gevent+https、twisted+http、**tornado+http**

这基本上意味着它将使用标准的 Sentry HTTP 协议，但使用 Tornado 的[AsyncHTTPClient](http://www.tornadoweb.org/documentation/httpclient.html#tornado.httpclient.AsyncHTTPClient)来执行请求。

但是请注意，它（截至目前）不支持 HTTPS，仅支持未加密的 HTTP。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T12:54:29.773

对龙卷风的支持已在[https://github.com/openlabs/raven的一个分支中添加到 Raven](https://github.com/openlabs/raven)

有关如何进行相同操作的详细文档，请参见[https://github.com/openlabs/raven/blob/master/docs/config/tornado.rst](https://github.com/openlabs/raven/blob/master/docs/config/tornado.rst)

# c++ - std::multiset 并找到中间元素

> ID：12140635
> 
> 赞同：7
> 
> 时间：2012-08-27T10:54:26.350
> 
> 标签：c++, stl

我有which 如果我从to`std::multiset`迭代，我将得到排序的元素。除了从到迭代之外，我如何获得中间元素`std::multiset::begin()``std::multiset::end()``std::multiset``std::multiset::begin()``std::multiset::begin() + size() / 2`

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2015-06-05T15:37:50.507

这是获得 std::multiset 中值的解决方案：

```
template<class T>
double GetMedian(const std::multiset<T>& data)
{
    if (data.empty())
        throw std::length_error("Cannot calculate median value for empty dataset");

    const size_t n = data.size();
    double median = 0;

    auto iter = data.cbegin();
    std::advance(iter, n / 2);

    // Middle or average of two middle values
    if (n % 2 == 0)
    {
        const auto iter2 = iter--;
        median = double(*iter + *iter2) / 2;    // data[n/2 - 1] AND data[n/2]
    }
    else
    {
        median = *iter;
    }

    return median;
} 
```

如果您需要中值绝对偏差 (mdev)，例如：

```
template<class T>
double GetMedianAbsoluteDeviation(const std::multiset<T>& data)
{
    const double fMedian = GetMedian(data);
    std::multiset<double> diff;
    for (const auto& x : data)
    {
        diff.insert(std::abs(fMedian - x));
    }
    return GetMedian(diff);
} 
```

# perl - 访问 Perl 2x2 数组的单个元素

> ID：12140636
> 
> 赞同：1
> 
> 时间：2012-08-27T10:54:29.433
> 
> 标签：perl

我可以使用此代码创建矩阵

```
#!/usr/bin/perl -w

@arr1 = (10,20,30);
@arr2 = (10,20,30);
@arr3 = (10,20,30);
@ref_arr = (\@arr1, \@arr2, \@arr3);

print"Prog starts\n";          

foreach $ref (@ref_arr) {
  #print @$ref->[0];
  foreach $val (@$ref) { 
    print "$val ";
  }
  print"\n";
} 
```

使用该`map`函数，我可以像这样修改矩阵中的每个值

示例：将每个值增加 1

```
foreach $ref (@ref_arr) {
  map($_++, @$ref);
} 
```

但我想修改某一行或特定值，即在第二行的所有值或第二行的第一列加 1

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:11:06.937

你是用`row x column`还是`column x row`？我将假设第一个。

要修改 处的值`$x, $y`：

```
$ref_arr[$x][$y] = $new_value; 
```

要将 1 添加到 column `$x`：

```
$_++ for @{ $ref_arr[$x] }; 
```

要将 1 添加到 row `$y`：

```
$_->[$y]++ for @ref_arr; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T14:39:01.953

您必须*始终* `use strict`并在您编写的*每个*程序`use warnings`的顶部。这尤其适用于您在代码方面寻求帮助的情况，因为这些措施将揭示您可能会忽略的简单错误

 *该`map`函数*不是*用于迭代列表：它是通过将函数应用于源列表的每个元素来将一个列表“映射”到另一个列表

当你写

```
map($_++,@$ref) 
```

您正在构建和丢弃`@list`. 你应该写的是

```
$_++ for @$ref 
```

至于如何修改数组中的单个值，您的数组初始化可以简化为

```
my @data = (
    [10, 20, 30], 
    [10, 20, 30], 
    [10, 20, 30]
) 
```

我希望由此更容易看出`10`结构中的第一个是可以访问的`$data[0][0]`，比如说，最后一个`20`是`$data[2][1]`（记住 Perl 数组是从零开始索引的）。您可以像任何普通标量一样访问和修改这些值

至于您的特定示例，第二行是`@{$data[1]}`这样您可以通过编写来增加该行的每个元素`$_++ for @{$data[1]}`。第二行的第一列递增`$data[1][0]++`*

# c++ - 如何在 Googletest 中运行两个不同的测试

> ID：12140641
> 
> 赞同：4
> 
> 时间：2012-08-27T10:54:45.467
> 
> 标签：c++, visual-studio-2010, visual-c++, googletest

假设我有两个/许多不同的测试需要在两次迭代中在 gtest 中进行。那么，如何进行相同的操作呢？我尝试了我的方法，但失败了。我写，

```
::testing::GTEST_FLAG(repeat) = 2; //may be 2 or 3 or so on...
switch(i) //int i = 1;
{
case 1:
::testing::GTEST_FLAG(filter) = "*first*:*second*";
i++; break;
case 2:
::testing::GTEST_FLAG(filter) = "*third*:*fourth*";
i++; break;
and so on............ 
```

但是谷歌测试只进行了`"*first*:*second*"`两次。请帮我。我的要求是 Gtest 应该一个一个地运行所有的测试用例。例如首先它将执行`case 1:`然后`case 2:`等等......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-28T02:33:23.113

我不认为你可以使用`::testing::GTEST_FLAG(repeat)`

但是，您可以通过以下方式实现目标：

```
#include "gtest/gtest.h"

int RunTests(int iteration) {
  switch(iteration) {
    case 1:  ::testing::GTEST_FLAG(filter) = "*first*:*second*"; break;
    case 2:  ::testing::GTEST_FLAG(filter) = "*third*:*fourth*"; break;
    default: ::testing::GTEST_FLAG(filter) = "*";
  }
  return RUN_ALL_TESTS();
}

int main(int argc, char **argv) {
  ::testing::InitGoogleTest(&argc, argv);
  int final_result(0);
  for (int i(0); i < 3; ++i) {
    int result(RunTests(i));
    if (result != 0)
      final_result = result;
  }
  return final_result;
} 
```

我不确定 gtest 如何计算使用`RUN_ALL_TESTS()`时的返回值`GTEST_FLAG(repeat)`，但是如果所有测试都通过，这里`main`将返回，否则它将返回调用`0`的最后一个非零值。`RUN_ALL_TESTS()`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-29T06:55:29.637

```
int main(int argc, char **argv) {
    int i = 1;
        vector<string> str;
        str.push_back("*first*:*second*");
        str.push_back("*third*:*fourth*");
        str.push_back("*fifth.fifthtestname*");
        for(i = 0; i != str.size(); i++)
        {
            ::testing::GTEST_FLAG(filter) = str.at(i);
             InitGoogleTest(&argc, argv);
             RUN_ALL_TESTS();
            // getchar();
        }
        getchar();
} 
```

# .net - 无法在 Windows XP 下运行 Lightswitch 2012 程序

> ID：12140643
> 
> 赞同：5
> 
> 时间：2012-08-27T10:55:00.773
> 
> 标签：.net, windows-xp, visual-studio-lightswitch

我已将 Lightswitch 2011 项目迁移到 LS 2012。我通过运行“vslshost.exe”启动已编译的应用程序。这在使用 Windows 7（32 位和 64 位）时效果很好，但是当我使用 Windows XP 时，启动应用程序失败（vslshost.exe 不是有效的 Win32 应用程序）。在切换到 LS 2012 之前一切正常。

该应用程序被编译为桌面应用程序，它依赖于可用的 SQL 数据库，并且不使用内部 ApplicationData 数据库。我可以在 2 台 PC 上重现这一点，它们都安装了最新的 Windows XP。

[在用ildasm](http://msdn.microsoft.com/en-us/library/f7dy01k1.aspx)查看 vslshosts.exe 之后，我确信该项目是针对 .NET 4.0 编译的。因此，将项目迁移到 LS 2012 时，框架并没有改变。

我无法找到有关此问题的任何信息。我只遇到了一些关于使用 VS 2012 的 Windows XP 和 C++ 的问题。

你有这方面的任何信息吗？

提前致谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T20:41:35.347

我遇到了同样的问题，通过执行以下操作设法使其工作。我启动了一个 Visual Studio 命令提示符并在可执行文件上运行了 dumpbin：

```
dumpbin  /headers vslshost.exe 
```

dumpbin 显示子系统版本设置为 6（Vista）。奇怪的是，操作系统版本设置为 4。按照此页面[http://supportxp.com/2012/03/30/editbins-dirty-little-secret/](http://supportxp.com/2012/03/30/editbins-dirty-little-secret/)上的说明，我使用 editbin 将版本号设置为 5.1 (XP)

```
editbin vslshost.exe /SUBSYSTEM:WINDOWS,5.01 /OSVERSION:5.1 
```

测试了它，我的应用程序到目前为止在 XP 上运行良好。我也尝试让生成的安装程序工作，但它在对 XP 中不存在的 InitializeCriticalSectionEx 的函数调用上失败。

或者，您可以将其部署为桌面应用程序，并将服务部署到 IIS。该方法似乎支持XP就好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T15:39:02.180

.NET Framework 4.5 至少需要 Windows Vista。请参阅[官方系统要求](http://msdn.microsoft.com/en-us/library/8z6watww.aspx)。

使用 Visual Studio 2012 时，如果您希望应用程序在 Windows XP 上运行，则必须小心以 .NET 4.0 为目标，并且某些功能将不可用（例如，C# 5.0 `await`/`async`要求运行时支持仅在 .NET 4.5 中可用）。

# java - 事务中的 Spring DAO 异常翻译

> ID：12140644
> 
> 赞同：3
> 
> 时间：2012-08-27T10:55:12.273
> 
> 标签：java, spring, exception, dao

我正在`Spring 3.1.2`使用`Hibernate 4`.

我有一个`MyDaoImpl`带有注释的 DAO 实现类，`@Repository`以便启用异常翻译。我有一个`MyService`注释`@Transactional`如下的服务类：

```
public class MyService implements IMyService {

    private MyDao myDao;

    @Autowired
    public void setMyDao(MyDao dao) {
       this.myDao = dao;
    }

    @Override
    @Transactional
    public void createA(String name)
    {
        A newA = new A(name);
        this.myDao.saveA(newA);
    }
} 
```

我编写了一个单元测试类`MyServiceTest`，如下所示：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = { "classpath:beans.xml" })
@Transactional
@TransactionConfiguration(defaultRollback = true)
public class MyServiceTest implements IMyServiceTest {

    private IMyService myService;

    private SessionFactory sessionFactory;

    @Autowired
    public void setMyService(IMyService myService)
    {
        this.myService = myService;
    }

    @Autowired
    public void setSessionFactory(SessionFactory sessionFactory)
    {
        this.sessionFactory = sessionFactory;
    }

    @Test
    @Override
    public void testCreateA()
    {
       //Assume that there is already a row of table A with the name "A1"
       //so I expect to get a Spring DataAccessException (or subtypes) 
       //when the session is flushed
       this.myService.createA("A1");

       this.sessionFactory.getCurrentSession().flush();

       //asserts
    }
} 
```

当我运行测试时，我得到一个 Hibernate specific exception `ConstraintViolationException`。我在论坛上发现这是因为翻译系统发生在事务之外，所以在这种情况下是在`testCreateA()`返回之后。我不知道这是否是真正的原因，但如果是，则意味着我无法测试翻译是否适用于我的 DAO。一种解决方案是从我的单元测试中删除`@Transactional`注释，但我不会从回滚功能中受益。

你有什么建议？

* * *

**编辑：**我已将`SessionFactory`上下文中的声明添加到测试类中，以便我可以访问当前会话以进行刷新。

一些额外的解释：在这种情况下，当会话被刷新（在事务内部）时，我得到了异常。我刷新会话以避免误报，正如文档中所解释的那样。此外，由于默认传播是必需的，因此`testCreateA()`事务也用于调用`createA()`，因此更改不会刷新（通常）直到`testCreateA()`返回。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:25:55.543

您是否添加了`PersistenceExceptionTranslationPostProcessor`bean 定义？喜欢

```
 <!--
        Post-processor to perform exception translation on @Repository classes
        (from native exceptions such as JPA PersistenceExceptions to
        Spring's DataAccessException hierarchy).
    -->
    <bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor" /> 
```

来自[Spring 文档](http://static.springsource.org/spring/docs/2.0.x/api/org/springframework/dao/annotation/PersistenceExceptionTranslationPostProcessor.html)。

> Bean 后处理器，它自动将持久性异常转换应用于任何带有`@Repository`注释的 bean，添加一个对应`PersistenceExceptionTranslationAdvisor`于暴露的代理（现有的 AOP 代理或新生成的实现所有目标接口的代理）。
> 
> 将本机资源异常转换为 Spring 的`DataAccessException` 层次结构。自动检测实现接口的 bean， `PersistenceExceptionTranslator`随后要求这些 bean 转换候选异常

# iphone - 无法更新 uitableview 行

> ID：12140646
> 
> 赞同：0
> 
> 时间：2012-08-27T10:55:20.943
> 
> 标签：iphone, objective-c, ios, uitableview, uialertview

我正在尝试`UITableView`从`UIAlertView`内部更新选定的行`didSelectRowAtIndexPath`。但我面临一个问题。每次我尝试更新任何行时，它只会更新第一行，而与行的选择无关。
我的代码是：

```
 - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {

NSString *selectedrow = nil;

if (searching) {
    slCell=indexPath.row;
    selectedrow = [copyListOfItems objectAtIndex:indexPath.row];

UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Enter the Number of Quantity" message:@""
                                               delegate:self cancelButtonTitle:nil  otherButtonTitles:@"OK", nil];

[alert addTextFieldWithValue:@"" label:@"Number of Item"];  
textfieldQty = [alert textFieldAtIndex:0];
textfieldQty.keyboardType = UIKeyboardTypeNumberPad;
textfieldQty.keyboardAppearance = UIKeyboardAppearanceAlert;
textfieldQty.autocorrectionType = UITextAutocorrectionTypeNo;
[alert show];
[alert release];
}
else {

    UIAlertView *alert = [[UIAlertView alloc] initWithTitle:@"Enter the Number of Quantity" message:@""
                                                   delegate:self cancelButtonTitle:nil  otherButtonTitles:@"OK", nil];

    [alert addTextFieldWithValue:@"" label:@"Number of Item"];  
    textfieldQty = [alert textFieldAtIndex:0];
    textfieldQty.keyboardType = UIKeyboardTypeNumberPad;
    textfieldQty.keyboardAppearance = UIKeyboardAppearanceAlert;
    textfieldQty.autocorrectionType = UITextAutocorrectionTypeNo;
    [alert show];
    [alert release];
        }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex {
NSString *b=nil;
if (buttonIndex == 0) {
    if (searching) {
        if([textfieldQty.text isEqualToString:b]) {
            UIAlertView *alert2 = [[UIAlertView alloc] initWithTitle:@"Enter plz" message:@""
                                                           delegate:self cancelButtonTitle:nil otherButtonTitles:@"OK"];
            [alert2 show];
            [alert2 release];
        }

    NSString *newqty = [[NSString alloc] initWithFormat:@"%@",textfieldQty.text];
    DMSAppDelegate *d= (DMSAppDelegate *)[[UIApplication sharedApplication] delegate];

    [d->tableDataQt replaceObjectAtIndex:slCell withObject:(id)newqty];

    NSLog(@"tb%@",copyListOfQty);

    }
    else {

        NSString *newqty = [[NSString alloc] initWithFormat:@"%@",textfieldQty.text];
        DMSAppDelegate *d= (DMSAppDelegate *)[[UIApplication sharedApplication] delegate];
        [d->tableDataQt replaceObjectAtIndex:slCell withObject:(id)newqty];
        [self.tablevieww reloadData];
    }

}   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:15:55.243

请按照以下步骤来实现您想要的。

1.  `UIAlertview`在方法中创建时`(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`，将alerview 的标签设置为indexpath 的行。
2.  在委托方法 `-(void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex`中，您尝试访问 alertView 的标签并将该标签传递给方法调用`[d->tableDataQt replaceObjectAtIndex:[alertView tag] withObject:(id)newqty];`
3.  在 AppDelegate 类中，您再创建一个名为`-(void)replaceObjectAtIndex:(NSInteger>inIndex withObject:(id)inObject`
4.  在上面新创建的方法中，尝试通过方法调用`UITableViewCell`从对象访问`UITableView``UITableViewCell *myCell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:inIndex inSection:0];`
5.  这样，您将获得对象`UITableViewCell`并更改其值并重新加载表。

我希望这能帮到您。如果这解决了您的问题，请不要忘记正确标记。:)

谢谢。

# jquery - 使用jquery隐藏点击功能

> ID：12140649
> 
> 赞同：0
> 
> 时间：2012-08-27T10:55:28.417
> 
> 标签：jquery

嗨，我想了解函数如何返回值。我有两个功能，一是工作，二是不工作。我想知道为什么第二个功能不起作用。 [http://jsfiddle.net/95vXQ/5/](http://jsfiddle.net/95vXQ/5/)

![在此处输入图像描述](../Images/af96a202b36f8a20f91491a16edd360a.png)

这是第二个不起作用的功能。我想知道为什么它没有改变 isVisible 值

![在此处输入图像描述](../Images/c44db997b1706b17260e52b45348f96e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-07T11:47:46.240

jQuery点击功能在[这个链接](http://api.jquery.com/click/)中解释得很清楚。click 函数可用于在单击对象时触发单个或一系列 jQuery 事件。函数中声明的变量仅在该单击函数中有效。点击函数不能返回值，只能触发事件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:48:31.983

这是变量范围问题。[在此处](http://en.wikipedia.org/wiki/Scope_%28computer_science%29)查找更多信息。为简单起见，您在函数内部定义的任何变量在函数外部都是未定义的。

第二个屏幕截图中的函数失败，因为每次有点击事件时都会执行该函数，即，即使您正在重置 isVisible 值，它也不会被带到下一次调用，因为您再次初始化 isVisible 并将 true 值设置为它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T11:00:49.817

第二个屏幕截图不起作用，因为`isVisible`在 click 函数中定义。一旦该功能完成`isVisible`，就会取消设置。当您再次调用 click 函数时，`isVisible`它会被重置并且它的值恢复为 true。这就是所谓的**变量作用域**。

而这个问题与返回值无关。要返回一个值，您必须使用`return [varname]`，这在 click 函数中无济于事。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T15:57:32.787

您的第二个示例没有按预期工作，因为在函数内部您正在将值重新分配给 true `isVisible`; 并注意`isVisible`，如果您在 click 函数中声明它，则范围将仅在函数内部。

*如果您只想了解上述示例的工作*原理，并且对在函数外部声明变量不感兴趣，请[尝试使用这个 jsfiddle](http://jsfiddle.net/95vXQ/52/)。

如果你想做一个显示/隐藏功能，那么[试试这个切换 jsfiddle](http://jsfiddle.net/95vXQ/54/)。代码如下。

```
$(function(){
    $("#btnShow").toggle(
        function(){
            $(this).val("Show");
            $("#divContent").hide();
        },
        function(){
            $(this).val("Hide");
            $("#divContent").show();
        }
    );    
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-10T14:24:51.990

很简单..阿米特。

1.  按钮 = 隐藏；显示 div 内容
2.  点击隐藏；现在 IsVisible 为真；它会隐藏起来；按钮 = 显示；div 被隐藏
3.  现在，单击显示。Click 处理程序再次执行代码并创建一个变量 IsVisible 作为新变量，并将其设置为 true。它隐藏了 div（已经隐藏）并且按钮仍然显示 Show。

在您的第一种情况下，它是一个全局变量，因此，一旦它在 hidden 之后更新为 False ，它就会再次显示 div 。

还是不清楚？

# android - android：使用opengl es绘制像素

> ID：12140651
> 
> 赞同：1
> 
> 时间：2012-08-27T10:55:34.470
> 
> 标签：android, opengl-es, pixel

我正在尝试用 opengl 绘制许多像素。但是没有这样的像素方法......（我错过了吗？）

确切地说，我想在渲染器中绘制颜色数据数组（如 [0xff0000, 0xff00ff, ...]，大约 480*800）。（也刷新每一帧）

如果这是不可能的，我该如何绘制像素？....画布可以做到吗？但我认为画布太慢了......有什么方法可以绘制很多像素？

我确实使用`glDrawElements()`过，但只画了一个像素……（在屏幕中央）

```
 int[] bitmapData = new int[480 * 800];

   public void onDrawFrame(GL10 gl) {
      ...
      // some processing of pixels
      ...

      buffer = IntBuffer.wrap(bitmapData);
      gl.glDrawElements(gl.GL_POINTS, L, gl.GL_UNSIGNED_SHORT, buffer);
   } 
```

我想，纹理可以包含位图（使用 GLUtils.texImage2D），所以在纹理处绘制并在 gl 处绘制 textrue？但不是开销吗？

（对不起，英语不好）

# database - 划分关系以实现 BCNF

> ID：12140656
> 
> 赞同：0
> 
> 时间：2012-08-27T10:55:50.937
> 
> 标签：database, database-normalization

下面的关系是否正确划分为 BCNF 中的关系：
R( **a,b** ,c,d,e) - a 和 b 是主键，并且存在依赖关系，例如：

a → c
a → e
c → e

我将上述关系拆分为：

AC( **a** ,c)
CE( **c** ,e)
AB( **a,b** ,d)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-06T03:56:05.827

是**a**是主键而**b**是主键的情况，还是**{a,b}**是（复合）主键的情况？如果列是单独的主键，那么您有许多附加但未明确说明的功能依赖关系：**a → bd**和**b → acde**。如果列**{a,b}**是复合 PK，那么您有一个额外的函数依赖**ab → cde**。无论哪种方式，AC 和 CE 关系都很好，而 ABD 关系是另一个必要的关系。唯一的问题是“ABD 的候选键是什么”？答案是'要么**{a,b}**作为复合 PK，要么**a**和**b**作为两个单独的候选键'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-06T02:06:50.823

你确定那个主键吗？通常，确定所有候选键是这类练习的一部分。

表达我们对候选键的了解的一种非正式方式是，不在任何函数依赖的右侧（RHS）的每个属性都必须是*每个*候选键的一部分。

由于我不知道您如何确定 {ab} 是候选键，我倾向于这样说，因为 {abd} 不在任何 RHS 上，{abd} 必须是每个候选键的一部分。

简而言之，您的 FD 说 {abd} 是主键，而不是 {ab}。

为了使您的密钥和分解正确，您需要有额外的 FD ab->d。

# c++ - C ++未定义对函数的引用？

> ID：12140657
> 
> 赞同：-1
> 
> 时间：2012-08-27T10:55:56.473
> 
> 标签：c++, templates, linker-errors, undefined-reference

我在一个名为的类中定义了一个公共模板函数`EventDispatcher`：

```
public:
    template <class className> void AddEventListener ( className* ); 
```

该函数实现如下：

```
template <class className>
void EventDispatcher::AddEventListener ( className* ptr )
{

}; 
```

然后在某个班级中，我创建了`Timer`一个孩子的实例`EventDispatcher`并调用`AddEventListener`：

```
timer->AddEventListener ( this ); 
```

在我得到一个错误之后

```
/tmp/ccjRF7sK.o: In function `AirHockeyServer::AirHockeyServer()':
AirHockeyServer.cpp:(.text+0xa5): undefined reference to `void EventDispatcher::AddEventListener<AirHockeyServer>(AirHockeyServer*)'
/tmp/ccjRF7sK.o: In function `AirHockeyServer::AirHockeyServer()':
AirHockeyServer.cpp:(.text+0x187): undefined reference to `void EventDispatcher::AddEventListener<AirHockeyServer>(AirHockeyServer*)'
collect2: ld returned 1 exit status 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:00:31.670

你说你已经定义了函数，但你只向我们展示了一个声明。您还需要一个定义：

```
template <class className> void AirHockeyServer::AddEventListener ( className* )
{
    // code goes here
} 
```

**注意**这个问题现在已经更新，表明某处有一个定义。

因为它是一个模板，所以它需要放在一个标题中，包含在每个使用该函数的源文件中。模板在使用时被实例化，并且需要它们的完整定义来实例化它们。

等效地，您可以在类定义中定义它：

```
public:
    template <class className> void AddEventListener ( className* )
    {
        // code goes here
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T10:58:36.833

这是一个链接器错误，告诉您链接器看不到`AddEventListener`成员函数的实现。对于模板，通常将函数的实现放在头文件中，因此可以为任何模板参数参数实例化它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T11:00:36.650

链接器找不到`template<class className> AddEventListener<className*>`. 对于模板，实现必须与声明在同一个文件中。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T11:02:24.340

当您有模板时，您不能真正将类拆分为单独的头文件和源文件。您还需要将定义放在头文件中。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-27T11:03:29.987

模板函数需要针对特定​​类型进行实例化。将实现放在 .cpp 文件中不会这样做。

最简单的方法是将它放在类定义本身中，或者放在头文件中。

另一种方法是将其保存在 .cpp 文件中，然后为您需要的类型进行显式实例化：

```
template void EventDispatcher::AddEventListener(AirHockeyServer*); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T11:40:19.447

（这个问题是[“未定义的引用”模板类构造函数](https://stackoverflow.com/questions/8752837/undefined-reference-to-template-class-constructor/8752879#8752879)的副本）并且那里的答案已经足够了。

总结一下，有两种方法可以解决这个问题：

*   正如@LuboAntonov 所说，您可以放在`template void EventDispatcher::AddEventListener(AirHockeyServer*);`函数模板的定义之后。
*   如许多其他人所述，将实现移动到标题中。

有关完整详细信息，请参阅另一个问题。

# iphone - 目标 - C：从 URL 加载图像？

> ID：12140662
> 
> 赞同：2
> 
> 时间：2012-08-27T10:56:23.093
> 
> 标签：iphone, objective-c, uitableview, uiimageview

对不起问题标题。我找不到合适的标题。

当我打开视图时，我有`UITableView`来自 url 的内容图像，`UITableView`直到图像加载后才显示，这需要时间。

我通过 php 从 JSON 获取图像。

我想显示表格，然后显示图像加载过程。

这是我的应用程序中的代码：

```
NSDictionary *info = [json objectAtIndex:indexPath.row];
cell.lbl.text = [info objectForKey:@"title"];
NSString *imageUrl = [info objectForKey:@"image"];
cell.img.image = [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:imageUrl]]];
[cell.img.layer setBorderColor: [[UIColor blackColor] CGColor]];
[cell.img.layer setBorderWidth: 1.0];

return cell; 
```

对不起，我的英语很弱。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T12:52:05.387

在单独的线程上执行 Web 请求，以免阻塞 UI。这是一个使用`NSOperation`. 请记住仅在主线程上更新 UI，如`performSelectorOnMainThread:`.

```
- (void)loadImage:(NSURL *)imageURL
{
    NSOperationQueue *queue = [NSOperationQueue new];
    NSInvocationOperation *operation = [[NSInvocationOperation alloc]
                                        initWithTarget:self
                                        selector:@selector(requestRemoteImage:)
                                        object:imageURL];
    [queue addOperation:operation];
}

- (void)requestRemoteImage:(NSURL *)imageURL
{
    NSData *imageData = [[NSData alloc] initWithContentsOfURL:imageURL];
    UIImage *image = [[UIImage alloc] initWithData:imageData];

    [self performSelectorOnMainThread:@selector(placeImageInUI:) withObject:image waitUntilDone:YES];
}

- (void)placeImageInUI:(UIImage *)image
{
    [_image setImage:image];
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T10:59:16.013

您必须使用[`NSURLConnection`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)和[`NSURLRequest`](http://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/NSURLRequest_Class/Reference/Reference.html)。首先创建并显示您的空表视图（可能使用本地存储在应用程序中的占位符图像）。然后你开始发送请求。这些请求将在后台运行，并且您（代理人）将在请求完成时收到通知。之后，您可以向用户显示图像。如果您有很多图像，请尽量不要一次加载所有图像。并且不要加载用户不可见的那些，只有在他向下滚动时才加载那些。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-27T12:45:59.533

苹果提供了一个`UITableView lazy image loading`例子：[https ://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

希望这是您正在寻找的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:54:26.447

这是我们在应用程序中所做的非常常见的事情。

您只需将 URL 存储在持久存储中，例如数组或数据库，并可以使用操作队列获取图像以更快地下载。您可以设置优先级，随时取消操作等。此外，应用程序响应时间会更快。

# android - Android 猴子在 android.widget.HeaderViewListAdapter 中导致适配器通知异常

> ID：12140665
> 
> 赞同：5
> 
> 时间：2012-08-27T10:56:28.353
> 
> 标签：android, android-monkey

我有一个常见的问题：

```
java.lang.IllegalStateException: The content of the adapter has changed but List
View did not receive a notification. Make sure the content of your adapter is no
t modified from a background thread, but only from the UI thread. [in ListView(2
131427573, class android.widget.ListView) with Adapter(class android.widget.Head
erViewListAdapter)] 
```

但是适配器不是我的代码，而是在`android.widget.HeaderViewListAdapter` This is using Jellybean。

我通读了 和 的`HeaderViewListAdapter`源`ListAdapter`代码`ListView`。当项目计数不等于 提供的计数`IllegalStateException`时抛出。在这种情况下，是。s 计数是客户端代码传递的原始计数，加上页眉和页脚的大小。`ListView``ListAdapter``ListAdapter``HeaderViewListAdapter``HeaderViewListAdapter``ListAdapter`

我跟踪了我的代码。所有对 的访问`ListView`都在 UI 线程上，并且始终紧随其后的`notifyDataSetChanged()`是适配器。我正在使用一个页脚。

这在正常使用中不会发生。是猴子的原因吗？但是 Monkey 怎么能从其他线程修改我的变量呢？

*   更多猴子测试后更新

我通过删除对`addFooterView()`. Monkey 不再触发异常。我应该`addFooterView()`在某个时候删除对的调用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-08T08:17:20.790

您可以尝试将这样的内容添加到您的 ListView：

```
 @Override
protected void layoutChildren() {
    try {
        super.layoutChildren();
    } catch (IllegalStateException e) {
        ZLog.e(LOG, "This is not realy dangerous problem");
    }
} 
```

如果你添加了一个headerview或者一个footerview ListView，当你notifyDataSetChanged()时，它会将mItemCount更改为真实适配器的itemcount，但是右侧会返回添加了headercount和footercount的假itemcount。

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ListView.java?av=f#1538](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/widget/ListView.java?av=f#1538)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T15:29:38.840

我将解释我的实际问题。如果需要，我还会附上一些代码。

场景是这样的：我创建了一个 EndlessList，将列表附加到 OnScrollListener。当我到达列表的末尾时，我启动了一个 AsyncTask（如果有数据要加载）。

在 preExecute 中，我向页脚添加了一个视图（微调器）。在 doInBackground 中，我从 Internet 获取数据，在 onPostExecute 中，我将数据添加到适配器并删除页脚视图（加载微调器）。您必须将其删除，因为您无法访问该视图并将其置于 GONE 上。

在我的代码中，我从不执行 notifyDataSetChange 因为在适配器（我从 JB 源代码克隆的 ArrayAdapter）中，当您执行 addAll 时，它会自动执行

```
/**
 * Adds the specified Collection at the end of the array.
 *
 * @param collection The Collection to add at the end of the array.
 */
public void addAll(Collection<? extends T> collection) {
    synchronized (mLock) {
        if (mOriginalValues != null) {
            mOriginalValues.addAll(collection);
        } else {
            mObjects.addAll(collection);
        }
    }
    if (mNotifyOnChange) notifyDataSetChanged();
} 
```

它运行良好，但有时它会因这个该死的错误而崩溃，我不知道如何解决它：

```
 java.lang.IllegalStateException: The content of the adapter has changed but ListView did not receive a notification. Make sure the content of your adapter is not modified from a background thread, but only from the UI thread. [in ListView(16908298, class android.widget.ListView) with Adapter(class android.widget.HeaderViewListAdapter)]
    at android.widget.ListView.layoutChildren(ListView.java:1545)
    at android.widget.AbsListView.onTouchModeChanged(AbsListView.java:2239)
    at android.view.ViewTreeObserver.dispatchOnTouchModeChanged(ViewTreeObserver.java:591)
    at android.view.ViewRoot.ensureTouchModeLocally(ViewRoot.java:2122)
    at android.view.ViewRoot.ensureTouchMode(ViewRoot.java:2106)
    at android.view.ViewRoot.deliverPointerEvent(ViewRoot.java:2216)
    at android.view.ViewRoot.handleMessage(ViewRoot.java:1886)
    at android.os.Handler.dispatchMessage(Handler.java:99)
    at android.os.Looper.loop(Looper.java:130)
    at android.app.ActivityThread.main(ActivityThread.java:3687)
    at java.lang.reflect.Method.invokeNative(Native Method)
    at java.lang.reflect.Method.invoke(Method.java:507)
    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-25T12:10:55.410

我知道它的回复迟了....但我最近才收到这个错误....我正在使用[android-amazing-listview](https://code.google.com/p/android-amazing-listview/source/checkout)。我得到同样的错误结束

```
(class android.widget.HeaderViewListAdapter)]). 
```

**对我有用的解决方案是->**

我认为这个问题源于这样一个事实，`getAdapter`即返回`AmazingAdapter`而不是包装`HeaderListViewAdapter`有时会导致计数差异。我只是从 AmazingListView 中删除了 getAdapter 方法，此后没有出现异常。

# jquery - 在 timepicker.js 的扩展方法中出现错误“'datepicker._defaults' is null or not an object”

> ID：12140666
> 
> 赞同：1
> 
> 时间：2012-08-27T10:56:30.723
> 
> 标签：jquery, datetimepicker

我正在使用 Jquery datetimepicker(js/timepicker.js) 并在以下 javascript 文件的扩展方法中收到错误“datepicker._defaults' is null or not an object”

加载 timepicker.js 文件时出现错误。javascript 文件中未定义“datepicker”对象。

```
===================timepicker.js===============
    /**
     * Extending default values
     */
    $.extend($.datepicker._defaults, {
        'stepMinutes': 1, // Number of minutes to step up/down
        'stepHours': 1, // Number of hours to step up/down
        'time24h': false, // True if 24h time
        'showTime': false, // Show timepicker with datepicker
        'altTimeField': '' // Selector for an alternate field to store time into
    }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T11:34:52.267

you need to include first "jquery-ui-1.7.2.custom.min.js" after that include "timepicker.js" file

# image - 如何解压 PVRTC 压缩图像格式以在 PC 上查看

> ID：12140668
> 
> 赞同：3
> 
> 时间：2012-08-27T10:56:33.693
> 
> 标签：image, compression, pvrtc

我需要一个以 PVRTC 图像格式压缩的 iphone 游戏纹理。我试过 PVRTexTool 来解压缩它，但图像没有在其中打开。该程序只打开文件扩展名为 .PVR 的文件...我发现了一个显然解压缩它的代码。'（下面的链接）问题是它使用 Microsoft Visual C++（Express）打开，我不知道该程序是如何工作的足够了，调试按钮总是灰显的。PLS 有人可以帮忙吗？我不知道 Visual C++ 是如何工作的......

[https://bitbucket.org/stopiccot/lobster/src/b1c7b9e19424/code/windows/pvrtc/PVRTDecompress.cpp](https://bitbucket.org/stopiccot/lobster/src/b1c7b9e19424/code/windows/pvrtc/PVRTDecompress.cpp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T08:37:30.507

这是相当通用的 C/C++ 代码，似乎是从[Imagination Technologies 开发人员页面](http://www.imgtec.com/developers.asp)中提取的。您应该能够使用您喜欢的任何开发环境编译并将其链接到您自己的 C/C++ 程序。您*不必*使用 MS Visual Studio....

...或者你是说你不懂C语言？如果是后者，那么你可能上错了论坛。

# c++ - 模棱两可的符号

> ID：12140669
> 
> 赞同：3
> 
> 时间：2012-08-27T10:56:36.893
> 
> 标签：c++, visual-studio-2008

我在自定义命名空间中声明了一个 Integer 类：

```
namespace MyNameSpace
{
  class Integer {};
} 
```

我正在以这样的方法使用它：

```
void someMethod()
{
  using namespace MyNameSpace;
  SomeClass x(Integer("some text", 4));
} 
```

这给

```
10> error C2872: 'Integer' : ambiguous symbol
10>        could be 'g:\lib\boost\boost_1_47_0\boost/concept_check.hpp(66) : boost::Integer'
10>        or       '[my file] : MyNameSpace::Integer' 
```

我已经通过全文搜索在我的代码库中搜索了“命名空间提升”和“使用提升”，但没有找到像“使用命名空间提升；”这样的行。这得到了测试的支持

```
void someMethod()
{
  shared_ptr<int> x;
  using namespace MyNameSpace;
  //SomeClass x(Integer("some text", 4));
} 
```

给

```
error C2065: 'shared_ptr' : undeclared identifier 
```

然而

```
void someMethod()
{
  boost::shared_ptr<int> x;
  using namespace MyNameSpace;
  //SomeClass x(Integer("some text", 4));
} 
```

编译。

是否有任何其他原因导致“歧义符号”错误发生？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:45:10.317

编译器只是阻止你混合这些类。即使您不使用命名空间“boost”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:59:18.780

命名空间本质上是其中内容的“姓氏”或“姓氏”。在您的情况下，Integer() 的全名是 MyNameSpace::Integer()。您的具体错误是使用命名空间的第一条规则的一个极好的例子。不要使用“使用”语句！如果你完全忽略它们，是的，你必须输入一些额外的东西来安抚编译器。但是您永远不会发生碰撞或询问“boost 在某处是否有整数”之类的问题。

其次， someMethod() 在任何类和任何命名空间之外。它真的应该看起来更像**MyNameSpace::Integer::someMethod(** ) 或更合理地位于

```
namespace MyNameSpace
{
   Integer::someMethod(
} 
```

一旦你这样做了，编译器将帮助你找到东西在哪里或不在哪里。

祝你好运！

# android - 从 PHP 站点在线创建 Android APK 文件

> ID：12140670
> 
> 赞同：4
> 
> 时间：2012-08-27T10:56:43.470
> 
> 标签：android, command-line, build-process, apk

我正在开发 android application builder 网站，我在从 json 分配 APPS ICON 和应用程序名称 Dynamic 时遇到问题，你有什么想法吗？我可以在讨论中提供更多信息。这里是[http://mbdbtechnology.com/projects/softlab/](http://mbdbtechnology.com/projects/softlab/) 会员可以注册并构建自己的简单应用程序、简单的 TABS 等。我正在使用具有不同站点 ID 的查询字符串创建 JSON 对象并编译为 APK 文件我有两个问题那一刻我如何将应用程序图标分配给新重命名的 APK 文件？你有任何其他的选择来实现这一点，请先帮助我，你参考[http://www.appsgeyser.com](http://www.appsgeyser.com)和[http://beta.appinventor.mit.edu](http://beta.appinventor.mit.edu)我和这个网站有同样的概念。我想根据用户要求在线创建 APK。

# javascript - Insert div within div

> ID：12140674
> 
> 赞同：-3
> 
> 时间：2012-08-27T10:56:55.450
> 
> 标签：javascript

I'm trying to create and insert a div **within** an already dynamically created div:

```
var parentDiv = document.createElement('div');
var inner = "stuff";
parentDiv.innerHTML = inner;
someRootDiv.appendChild(parentDiv);

var childDiv = document.createElement('div');
inner = "more stuff";
childDiv.innerHTML = inner;
parentDiv.appendChild(childDiv); 
```

But the child div isn't displayed within the parent div, it's displayed below it as if it's just a following div. Where am I going wrong?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:01:22.903

您发布的代码确实将一个 div 放在另一个 div 中（[您的代码演示](http://jsfiddle.net/Ft8AE/)）。您是指它们不会并排对齐的事实，[跨度会这样](http://jsfiddle.net/svAWU/)吗？

这是因为 div 是块元素，而 span 是内联的。你可以通过改变它们在 CSS 中的显示模式来改变它：

```
display: inline; 
```

或者只是切换到使用跨度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:00:54.167

尝试这个

```
var parentDiv = document.createElement('div');
var inner = "stuff";
parentDiv.innerHTML = inner;
someRootDiv.appendChild(parentDiv);

var childDiv = document.createElement('div');
inner2 = "more stuff";
childDiv.innerHTML = inner2;
parentDiv.appendChild(childDiv);​ 
```

[**演示**](http://jsfiddle.net/U2hSS/)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-27T11:15:51.080

几乎不需要更改。

尝试这个 ：

```
<script>
function fun(){
var parentDiv = document.createElement('div');
var inner = "stuff data";
parentDiv.innerHTML = inner;
document.getElementById("maindiv").appendChild(parentDiv);

var childDiv = document.createElement('div');
inner = "more stuff inside parent Div";
childDiv.innerHTML = stuff;
parentDiv.appendChild(childDiv);

}
</script> 
```

体内标签：-

```
<body onload="fun()">
<div id="maindiv">

</div>
</body> 
```

它工作正常。希望它会帮助你。

# jmeter - 将元素的注释添加到示例结果保存配置

> ID：12140677
> 
> 赞同：2
> 
> 时间：2012-08-27T10:57:18.203
> 
> 标签：jmeter

我有一个 HTTP 请求示例，想知道在`write results to file`选择`View Results Tree`.
是否可以添加选项`Sample Result Save Configuration`？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T21:17:33.753

从 JMeter 2.7 版开始，这是不可能的，我怀疑它会被实现，因为这样做似乎很奇怪。

您的另一个选择是使用 Beanshell Sampler 添加一个 Jmeter 变量：

*   ${__BeanShell(vars.put("name"\,"value"))}

并配置 saveservice 以便它使用 sample_variables 字段保存它：

*   [http://jmeter.apache.org/usermanual/listeners.html](http://jmeter.apache.org/usermanual/listeners.html)

# java - Stanford POS Tagger: How to preserve newlines in the output?

> ID：12140683
> 
> 赞同：0
> 
> 时间：2012-08-27T10:57:35.233
> 
> 标签：java, text, nlp, stanford-nlp, pos-tagger

My input.txt file contains the following sample text:

you have to let's
come and see me.

Now if I invoke the Stanford POS tagger with the default command:

```
java -classpath stanford-postagger.jar edu.stanford.nlp.tagger.maxent.MaxentTagger -model models/wsj-0-18-bidirectional-distsim.tagger -textFile input.txt > output.txt 
```

I get the following in my output.txt file:

```
you_PRP have_VBP to_TO let_VB 's_POS come_VB and_CC see_VB me_PRP ._. 
```

The problem with the above output is that I have lost my original newline delimiter used in the input file.

Now, if I use the following command to preserve my newline sentence delimiter in the output file I have to set -tokenize option to false:

```
java -classpath stanford-postagger.jar edu.stanford.nlp.tagger.maxent.MaxentTagger -model models/wsj-0-18-bidirectional-distsim.tagger -sentenceDelimiter newline -tokenize false -textFile input.txt > output.txt 
```

The problem with this code is that it totally messed up the output:

```
you_PRP have_VBP to_TO let's_NNS  
come_VB and_CC see_VB me._NN 
```

Here let's and me. are tagged inappropriately.

My question is how can I preserve the newline delimiters in the output file without messing up the tokenization?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:16:41.473

答案应该是使用命令：

```
java -classpath stanford-postagger.jar edu.stanford.nlp.tagger.maxent.MaxentTagger -model models/wsj-0-18-bidirectional-distsim.tagger -sentenceDelimiter newline -textFile input.txt > output.txt 
```

但是在 3.1.3 版本（可能还有所有早期版本）中存在一个错误并且它不起作用（忽略换行符）。它将在 3.1.4+ 版本中运行。

同时，如果文本量很小，您可以尝试使用斯坦福解析器（其中相应标志的名称不同，因此它是`-sentences newline`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T17:42:56.953

您可以做的一件事是使用 xml 输入而不是纯文本。在这种情况下，您的输入将是：

```
<xml version="1.0" encoding="UTF-8">
<text>
    <line>you have to let's</line>
    <line>come and see me.</line>
</text> 
```

在这里，每一行都包含在一个*行*标记中。您现在可以发出以下命令：

```
java -classpath stanford-postagger.jar edu.stanford.nlp.tagger.maxent.MaxentTagger -model models/wsj-0-18-bidirectional-distsim.tagger -xmlInput line -textFile sample.xml > ouput.xml 
```

请注意，参数“-xmlInput”指定用于 POS 标记的标记。在我们的例子中，这个标签是*line*。当您运行上述命令时，输出将是：

```
<?xml version="1.0" encoding="UTF-8"?>
<text>
    <line>
        you_PRP have_VBP to_TO let_VB &apos;s_POS 
    </line>
    <line>
        come_VB and_CC see_VB me_PRP ._. 
    </line>
</text> 
```

因此，您可以通过阅读包含*在行*标签中的内容来分离您的行。

# java - 如何使用java关闭外部应用程序

> ID：12140685
> 
> 赞同：2
> 
> 时间：2012-08-27T10:57:38.563
> 
> 标签：java

> **可能重复：**
> [知道在 Windows 机器上要杀死哪个 java.exe 进程](https://stackoverflow.com/questions/62418/knowing-which-java-exe-process-to-kill-on-a-windows-machine)
> [如何在给定特定 PID 的情况下杀死 Java 中的进程](https://stackoverflow.com/questions/4633678/how-to-kill-a-process-in-java-given-a-specific-pid)

我试图找出如何关闭特定的外部 exe，即 cwserv5.exe。我已成功启动一个新的外部 exe 并关闭它。但不是现有进程。你能帮我吗？下面是我正在修补的东西，但说实话真的迷路了

```
package com.TestCase;

import java.io.BufferedReader;
import java.io.InputStreamReader;

public class ReStartEXE {

    static Process pr; 

    public static void open() {

        //ProcessBuilder

         try {
             Runtime rt = Runtime.getRuntime();
             //Process pr = rt.exec("cmd /c dir");
              pr = rt.exec("C:\\APPLEGREEN\\webserv\\cwserv5rost.exe");         

             Thread.sleep(10000);
             //pr.wait(10000);
            //pr.waitFor();

             BufferedReader input = new BufferedReader(new InputStreamReader(pr.getInputStream()));

            // String line=null;

             /*while((line=input.readLine()) != null) {
                 System.out.println(line);
             }*/

             //int exitVal = pr.waitFor();
             //pr.destroy();
           // Process.kill(pr);
            // Runtime.getRuntime().exec("taskkill /F /IM cwserv5rost.exe");

             //System.out.println("Exited with error code "+exitVal);

         } catch(Exception e) {
             System.out.println(e.toString());
             e.printStackTrace();
         }
     }

    public static void Close() {

        pr.destroy();

    }

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T11:02:38.270

您可以通过执行一个进程来关闭要关闭的进程来做到这一点。

在您的评论中我可以看到`taskkill`，这意味着您可能正在使用 Windows。

```
Runtime rt = Runtime.getRuntime();

rt.exec("taskkill /F /IM cwserv5.exe"); 
```

这将强制使用图像名称的过程`cwserv5.exe`结束。

如果您不想强制它结束，请不要使用`/f`标签。

有关 的更多信息`taskkill`，请转到`cmd`（命令提示符）并键入`taskkill /?`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:03:41.753

尝试这个，

```
 Process proc = rt.exec("taskkill /F /IM cwserv5.exe");
    BufferedReader input = new BufferedReader(new InputStreamReader(proc.getInputStream()));
    while ((line = input.readLine()) != null){
         //do something
     }
    input.close();
    code = proc.exitValue();
    if(code==0){
        //success
    }
    else{
        //failure
    } 
```

# parsing - ANTLR 重写规则中的替代方案

> ID：12140688
> 
> 赞同：3
> 
> 时间：2012-08-27T10:58:11.610
> 
> 标签：parsing, antlr

我正在编写一个支持任意布尔表达式的语法。文法用来表示一个程序，稍后通过静态分析工具传递。静态分析工具有一定的局限性，所以我想应用以下重写规则：

严格不等式用 epsilon 近似：

```
expression_a > expression_b -> expression_a >= expression_b + EPSILON 
```

不等式使用“或”语句近似：

```
expression_a != expression_b -> expression_a > expression_b || expression_a < expression_b 
```

有没有使用 ANTLR 的简单方法？目前我的语法看起来像这样：

```
comparison          : expression ('=='^|'<='^|'>='^|'!='^|'>'^|'<'^) expression; 
```

我不确定如何根据运算符应用不同的重写规则。如果运算符是 ("==", "<=" 或 ">=")，我想保持原样，否则根据上面定义的规则递归转换它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T18:51:38.883

> [...] 并以其他方式递归转换它，[...]

你可以部分做。

你不能告诉 ANTLR 重写`a > b`，`^('>=' a ^('+' b epsilon))`然后定义`a != b`成为，`^('||' ^('>' a b) ^('<' a b))`然后让 ANTLR 分别自动重写`^('>' a b)`和。`^('<' a b)``^('>=' a ^('+' b epsilon))``^('<=' a ^('-' b epsilon))`

这里需要一些手工工作。诀窍是你不能只使用一个令牌，就像`>=`这个令牌实际上没有被解析一样。对此的解决方案是使用[虚构的标记](http://www.antlr.org/wiki/display/ANTLR3/Tree+construction)。

快速演示：

```
grammar T;

options {
  output=AST;
}

tokens {
  AND;
  OR;
  GTEQ;
  LTEQ;
  SUB;
  ADD;
  EPSILON;
}

parse
 : expr
 ;

expr
 : logical_expr
 ;

logical_expr
 : comp_expr ((And | Or)^ comp_expr)*
 ;

comp_expr
 : (e1=mult_expr -> $e1) ( Eq   e2=mult_expr -> ^(AND ^(GTEQ $e1 $e2) ^(LTEQ $e1 $e2))
                         | LtEq e2=mult_expr -> ^(LTEQ $e1 $e2)
                         | GtEq e2=mult_expr -> ^(GTEQ $e1 $e2)
                         | NEq  e2=mult_expr -> ^(OR ^(GTEQ $e1 ^(ADD $e2 EPSILON)) ^(LTEQ $e1 ^(SUB $e2 EPSILON)))
                         | Gt   e2=mult_expr -> ^(GTEQ $e1 ^(ADD $e2 EPSILON))
                         | Lt   e2=mult_expr -> ^(LTEQ $e1 ^(SUB $e2 EPSILON))
                         )?
 ;

add_expr
 : mult_expr ((Add | Sub)^ mult_expr)*
 ;

mult_expr
 : atom ((Mult | Div)^ atom)*
 ;

atom
 : Num
 | Id
 | '(' expr ')'
 ;

Eq    : '==';
LtEq  : '<=';
GtEq  : '>=';
NEq   : '!=';
Gt    : '>';
Lt    : '<';
Or    : '||';
And   : '&&';
Mult  : '*';
Div   : '/';
Add   : '+';
Sub   : '-';
Num   : '0'..'9'+ ('.' '0'..'9'+)?;
Id    : ('a'..'z' | 'A'..'Z')+;
Space : ' ' {skip();}; 
```

从上面的语法生成的解析器将产生以下内容：

* * *

`a == b`

![在此处输入图像描述](../Images/860df78cb5d8b08c132880b5df74cdda.png)

* * *

`a != b`

![在此处输入图像描述](../Images/8bb935850f006361a8ea2402eeba7155.png)

* * *

`a > b`

![在此处输入图像描述](../Images/5d921cf1ed54a9190d29ab307bae4e8a.png)

* * *

`a < b`

![在此处输入图像描述](../Images/f40e8aa309c29aa997a583b09cab7594.png)

* * *

# c# - 如何将 SubSonic 3.0.4 与 ASP.NET Web 表单网站一起使用？

> ID：12140689
> 
> 赞同：1
> 
> 时间：2012-08-27T10:58:16.560
> 
> 标签：c#, asp.net, vb.net, subsonic, subsonic3

如何`SubSonic 3.0.4`与 ASP.NET Web Forms 网站一起使用？

我正在使用 Visual Web Developer Express Edition 2008，我想生成一个`Data Access Layer`using `SubSonic 3.0.4`for `ASP.NET Website`. 那可能吗？？

如果没有，那么使用它是否明智`SubSonic 2`？有什么缺点？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T04:50:11.413

Subsonic 3 需要 t4 模板，这些模板仅在 VS 完整版中受支持 - 而不是 Web 开发人员。

是的，您可以将任一版本与 Web 表单一起使用。我在一些共享服务器提供商和 SS3 上遇到了中等信任问题，我目前正在研究这个问题。

实际的 SubSonic 官方网站位于：[subsonic.wekeroad.com](http://subsonic.wekeroad.com)。Subsonicproject.com 是一个不再维护且大部分损坏的辅助站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:01:55.297

我不太记得亚音速是否可以作为扩展使用-如果是这样，您将需要专业版的视觉工作室。但是，您将能够通过 Web Developer 开箱即用地使用 Microsoft 的 ORM 实体框架 - 查看代码优先选项，它使用起来非常愉快，并且比一些更成熟的 ORM （如 NHibernate 和 LLBLGen）更容易学习。

实体框架资源[http://msdn.microsoft.com/en-us/data/ee712907](http://msdn.microsoft.com/en-us/data/ee712907)

顺便说一句，我建议升级到 Visual Studio 2012 - 它比 2008 加载了更多有用的功能，您仍然可以使用它来将目标框架版本降至 2.0！

# jprofiler - 未找到未配置的 JVM

> ID：12140696
> 
> 赞同：3
> 
> 时间：2012-08-27T10:58:59.147
> 
> 标签：jprofiler

我有`WebSphere 7`应用服务器。有`Java VM 1.6`安装。`Linux`.

Java 版本“1.6.0”Java(TM) SE 运行时环境（构建 pxa6460sr10fp1-20120321_01(SR10 FP1)）IBM J9 VM（构建 2.4，JRE 1.6.0 IBM J9 2.4 Linux amd64-64 jvmxa6460sr10fp1-20120202_101568（启用 JIT，AOT）启用）J9VM - 20120202_101568 JIT - r9_20111107_21307ifx1 GC - 20120202_AA）JCL - 20120320_01

我尝试使用`jProfiler`，使用试用许可证。但是这次不想更改服务器上的某些内容。

所以我将`jprofiler`linux 下载到我的服务器。

然后我跑`bin/jpenable`，它说：

```
No unprofiled JVM found 
```

现在我不知道该怎么做，谷歌搜索没有给出任何有用的结果。你能告诉我我必须以什么方式搜索问题吗？可能是不正确的路径或其他东西。我希望你能理解我的英语（不太好）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:14:33.763

看看这个[帮助 pdf](http://resources.ej-technologies.com/jprofiler/help/doc/help.pdf)，特别是检查出来`Attach to local JVM session`。

另外，看看[这个答案](https://stackoverflow.com/questions/9160368/jprofiler-cant-find-jvm#9176742)和[这个问题](https://stackoverflow.com/questions/8053484/how-to-connect-jprofiler-to-an-application-running-on-localhost)。

希望它会有所帮助..

# javascript - IE8 复选框和收音机

> ID：12140697
> 
> 赞同：-1
> 
> 时间：2012-08-27T10:59:02.383
> 
> 标签：javascript, jquery, html, css

如何设置复选框和单选输入的样式，以便在所有浏览器（IE8、firefox、webkit 等）上看起来统一。我尝试了各种方法，但直到现在什么都没有。我只想设置复选框和单选的样式，而不是我在其他网络示例中看到的标签或跨度。这里的一点帮助将非常棒。这是一个小提琴示例：http: [//jsfiddle.net/FKRaX/11/](http://jsfiddle.net/FKRaX/11/)

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:01:56.303

您将需要 3d 方 JS 库，例如此处列出的库：http: [//line25.com/articles/jquery-plugins-for-styling-checkbox-radio-buttons](http://line25.com/articles/jquery-plugins-for-styling-checkbox-radio-buttons)

纯 CSS 解决方案仅适用于 webkit 浏览器，并且可能适用于最新的 Firefox。但是对于 IE8，你肯定需要使用一些 JS/jQuery 插件来实现这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:06:48.977

你试过：

文件.css：

```
.checkbox {
margin:15px;
/*opacity:0;
-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=0)";
filter: alpha(opacity=0);*/
} 
```

文件.html

```
<input id="pushon" type="checkbox" checked="checked" class="checkbox" />
<input id="pushon" type="checkbox" disabled="disabled" class="checkbox" />
<input id="pushon" type="checkbox" checked="checked" disabled="disabled" class="checkbox" />
<input id="roundon" type="radio" value="Valoare" checked="checked"/>
<input id="roundon" type="radio" value="Valoare" disabled="disabled"/>
<input id="roundon" type="radio" checked="checked" disabled="disabled" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-12T18:25:00.237

For older IEs 8, 7, etc you may need to get creative:

E.g.

```
input[type="checkbox"],
#checkboxFieldsID,
.checkboxFieldsClass {
display:inline-block;
-ms-transform: scale(3); /* IE */
-moz-transform: scale(3); /* FF */
-webkit-transform: scale(3); /* Safari and Chrome */
-o-transform: scale(3); /* Opera */
padding: 10px; 
```

/* tricks for older IEs */

```
background:#40668C; /* trick for older IEs */
width:50px; /* trick for older IEs */
height:50px; /* trick for older IEs */****
} 
```

# javascript - 检查用户是否正在访问纯根 url

> ID：12140701
> 
> 赞同：3
> 
> 时间：2012-08-27T10:59:10.860
> 
> 标签：javascript, jquery

如果用户正在访问我网站的根 url，我想运行一个 js 脚本。我正在使用这段代码：

```
<script type="text/javascript">
    if(location.pathname == "/") {
        window.open ('#107','_self',false);
    }
</script> 
```

但是[http://example.com/?foo=bar#hash](http://example.com/?foo=bar#hash)也会运行脚本，因为路径名不包括查询字符串和位置哈希。

它目前的行为如下：

```
http://example/                  Root
              /?querystring      Root
              /#hash             Root
              /page              Not root 
```

我希望它表现得像这样：

```
http://example/                  Root
              /?querystring      Not root
              /#hash             Not root
              /page              Not root 
```

有什么建议么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:00:39.317

`window.location.href`改为使用

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T11:02:51.787

您可以连接路径名、location.search 和 location.hash。

```
var fullPath = location.pathname + location.search + location.hash;
if(fullPath == "/") { /* whatever */ } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T11:45:16.407

您可以测试所有三个组件：

```
<script type="text/javascript">
    if(location.pathname == "/" && 
        location.hash.length <= 1 && 
        location.search.length <= 1) {
        window.open ('#107','_self',false);
    }
</script> 
```

# iphone - 即使我有一个 navigationController，pushViewController 也不起作用

> ID：12140702
> 
> 赞同：1
> 
> 时间：2012-08-27T10:59:12.783
> 
> 标签：iphone, objective-c, ios, xcode, cocoa

我有一个 UIViewController，里面有两个 UITableView。当我在第一个 UITableView 中选择一行时，它必须推送不会发生的相同 UIViewController。

在 UIViewController.hi 中有，

```
FirstTableViewController *firstController;
SecondTableViewController *secondController; 
```

在 UIViewController.mi 中有，

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
    if (firstController == nil) {
        firstController = [[FirstTableViewController alloc] init];
    }
    if (secondController == nil) {
        secondController = [[SecondTableViewController alloc] init];
    }
    UINavigationController *firstNavigationController = [[UINavigationController alloc] initWithRootViewController:firstController];
    firstController.product = self.product;
    [firstTable setDataSource:firstController];
    [firstTable setDelegate:firstController];
    firstNavigationController.view = firstController.tableView;
} 
```

在 FirstTableViewController.m 中，我有 didSelectRowAtIndexPath，

```
[self.searchDisplayController setActive:YES animated:YES];
UIViewController *controller = [[UIViewController alloc]initWithNibName:@"UIViewController" bundle:nil];
UINavigationController *navController = [[UINavigationController alloc] initWithRootViewController:controller];
navController.modalTransitionStyle = UIModalTransitionStyleCoverVertical;
controller.product = prod;
NSLog(@"Navigation controller is %@",self.navigationController); //not null
[[self navigationController]pushViewController:controller animated:YES]; 
```

请帮忙。

编辑#1：从 UtilityApp 的 FlipsideViewController 调用 UIViewController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:27:07.513

向您的 AppDelegate 添加一个属性`UINavigationController *nav` 在应用程序 didFinishLaunching 方法中将此行添加到 AppDelegate.m

```
navigationControl = [[UINavigationController alloc] initWithRootViewController:yourFirst ViewController]; 
```

转到 yourFirstViewController，添加一个`UINavigationController *nav`属性并将这些行添加到 viewDidLoad 方法

```
AppDelegate *app = [[UIApplication sharedApplication] delegate];
self.nav = app.nav; 
```

使用此行推送任何 viewController

```
[self.nav pushViewController:controller animated:YES]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:47:04.467

LoginViewSimpleController *loginViewSimple = [[LoginViewSimpleController alloc]init];

```
UINavigationController *navController = [[UINavigationController alloc]initWithRootViewController:loginViewSimple];

[self setNavigationController:navController]; 
```

Have you identify both tableviews ? Can you Post log status here ?

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:08:06.717

在“didSelectRowAtIndexPath”中使用此代码

```
UIViewController *controller = [[UIViewController alloc]initWithNibName:@"UIViewController" bundle:nil];

     [self.navigationController pushViewController:controller animated:YES];

     [viewController release]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:03:16.863

如果你想以模态方式显示视图控制器，你应该使用`presentViewController:animated:completion:`and not `pushViewController:animated:`。

```
[self presentViewController:controller animated:YES completion:nil]; 
```

# javascript - 在javascript中将参数从一个函数传递到另一个函数

> ID：12140707
> 
> 赞同：0
> 
> 时间：2012-08-27T10:59:37.463
> 
> 标签：javascript

我有日期值

```
 for(i=0;i<data['before'].length;i++) {
        var day = data['before'][i];               
        var dte = new Date(day); 
```

我正在尝试将日期显示为从 java 脚本动态显示为 div 中的链接。单击链接时，我将 dte 作为对象传递给`date_click`函数。

```
$('#before_dates').append('<tr><td><a onclick="date_click('+dte+');" href="javascript:void(0)">'+dte.toDateString()+'</a></td></tr>'); 
```

在点击链接时

```
function date_click(date){
    alert("Hi..."+dte);
} 
```

我收到以下错误：

**错误：SyntaxError: missing ) after argument list
Source Code: date_click(Fri Aug 31 2012 00:00:00 GMT+0100 (IST));**

我知道它的小错误，但我想不出办法做到这一点。任何帮助都会很棒。

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:04:07.643

当你写：

```
'...date_click('+dte+')'; 
```

你实际得到的是：

```
'...date_click(' + dte.toString() + ')'; 
```

IE：

```
date_click(Fri Aug 31 2012 00:00:00 GMT+0100 (IST)) 
```

这显然不是有效的 JS，因此报告了错误。

您似乎正在尝试传递实际`dte`变量，而不是其字符串表示形式。为此，您只需编写`date_click(dte)`不带任何引号的内容，但这仅适用`dte`于全局变量（而且这些变量很糟糕！）。

但是，您有 jQuery，所以当您可以使用正确的 DOM3 事件处理程序时，不要使用 DOM0“内联”事件处理程序。它们会导致引用问题（正如您在此处遇到的那样）并且除非指定的函数在“全局”范围内，否则它们也不起作用。

根据更新的问题，使用`data()`将当前对象绑定到事件处理程序。

```
function date_click(ev) {
    ev.preventDefault();
    var date = $(this).data('date');
    alert("Hi..." + date);
}

for (i = 0; i < data['before'].length; ++i) {
    var day = data['before'][i];  
    var dte = new Date(day);
    var $a = $('<a>', { text: dte.toDateString() }).data('date', dte);
    var $tr = $('<tr>').appendTo('#before_dates');
    var $td = $('<td>').appendTo($tr).append($a);
}

$('#before_dates').on('click', 'a', date_click);  // use event delegation 
```

请注意，现在这非常冗长，但它是构建所需 DOM 元素的一种简洁方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:04:55.990

您缺少引号（因此出现语法错误）

```
append('<tr><td><a onclick="date_click(\''+dte+'\');" href="javascript:void(0)">' ...) 
```

请遵循@Alnitak 所说的，这是一种干净的做事方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:04:53.323

使用 jQuery 动态附加事件：

```
var row = $('<tr><td><a href="#">' + dte.toDateString() + '</a></td><td>');

$('#before_dates').append( row );

row.find("a").click( function(e) {
    e.preventDefault();
    alert('Hi...' + dte);

}); 
```

这样你就不必弄乱你的字符串的不同层次的解释，这种方式要简单得多。

# crash - 移动 vo,ao 指令崩溃

> ID：12140709
> 
> 赞同：0
> 
> 时间：2012-08-27T10:59:54.277
> 
> 标签：crash, mips

我遇到了奇怪的系统崩溃。崩溃发生在`MIPS processor`. 该指令没有内存访问 - 用于注册移动的寄存器。我假设崩溃发生在移动指令处，因为它`epc`保存了下一条指令的地址。

```
jr ra;  
move v0,a0;  
lw a0,16(a0); 
```

什么会导致这种情况？

`ePC`即使在指令之后仍然保持第三条指令，这`jr`是由于流水线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:38:07.143

鉴于 EPC 持有 JR 之后的第三条指令的地址，则崩溃发生在该指令处。MOVE 指令在 JR 的[分支延迟槽中](http://en.wikipedia.org/wiki/Branch_delay_slot)，因此在 JR 之前执行。JR 返回到 LW 指令，这是 EPC 告诉您崩溃正在发生的地方。

顺便说一下，MOVE 指令不会导致 MIPS 体系结构中的任何异常（取指时的页面错误除外）。

# ipad - 如何以编程方式从 iPad3 访问和显示文档？

> ID：12140710
> 
> 赞同：0
> 
> 时间：2012-08-27T10:59:53.893
> 
> 标签：ipad, ios5, nsfilemanager

我正在实现一个允许用户添加和共享不同文档的应用程序。通过在 plist 中启用“应用程序支持 iTunes 文件共享”，我完成了添加文档。因此，用户可以在 iTunes 的帮助下将他/她的文档直接添加到应用程序中。现在我的问题是我需要访问并在表格视图中显示我的应用程序下的所有文档及其标题。根据用户选择，我需要以 pdf 或任何其他格式显示它。

如何访问我的应用程序下的所有文件？

除了使用 iTues 之外，还有其他方法可以将文档转储到我的应用程序中吗？请提出更好的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:34:46.417

我找到了解决方案。通过使用以下代码片段，我们可以轻松访问所有文件。

```
NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentsDirectory = [paths objectAtIndex:0];
NSFileManager *manager = [NSFileManager defaultManager];
NSArray *fileList = [manager contentsOfDirectoryAtPath:documentsDirectory error:nil];

for (NSString *s in fileList)
{

    if ([s hasSuffix:@".pdf"])
    {
        //do stuff
    }
    else
    {
       // do stuff
    }

} 
```

# r - R中函数内部的对象重新分配

> ID：12140712
> 
> 赞同：0
> 
> 时间：2012-08-27T11:00:14.820
> 
> 标签：r

问这么简单的问题有点尴尬，但我现在浪费了一个小时，想出了一个 30 秒的解决方案。问题是如何编辑作为函数输入提供的现有对象。我也玩过超级任务`<<-`但没有成功。

示例函数使用 2 个输入（一个用于对象，一个用于其名称）。我只需要一个这样的形式，它消除了对“n”输入的需要。

```
m <- c(2,5,3,7,1,3,9,3,5)
dim(m) <- c(3,3)
m

f <- function(x, n) { # where 'n' is the object name of 'x'
  x[1,] <- c(1,2,3)
  assign(n, x, envir = .GlobalEnv)
}

f(m, 'm')
m 
```

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T11:22:36.997

好的解决了。谢谢@Andrie，抱歉我误解了你的回复。

菜鸟错误:(

```
f <- function(x) {
  x[1,] <- c(1,2,3)
  return(x)
}

m <- f(m)
m 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-27T11:34:15.500

You don't need to provide the name as an extra argument; `substitute` will get that for you. To do things in the scope of the calling function you use `eval` with `parent.frame`.

```
f <- function(x) {
  eval(substitute( x[1,] <- c(1,2,3) ), parent.frame())
} 
```

Then,

```
m <- c(2,5,3,7,1,3,9,3,5)
> dim(m) <- c(3,3)
> m
     [,1] [,2] [,3]
[1,]    2    7    9
[2,]    5    1    3
[3,]    3    3    5
> f(m)
> m
     [,1] [,2] [,3]
[1,]    1    2    3
[2,]    5    1    3
[3,]    3    3    5 
```

That said, modifying the caller's environment is generally a bad idea and it will usually lead to less confusing/fragile code if you just return the value and re-assign it to `m` instead. This is generally preferable.:

```
f <- function (x) {
    x[1,] <- c(1,2,3)
    x
}

m <- f(m) 
```

However, I have occasionally found `eval` shenanigans to come in handy when I really needed to change an array in place and avoid an array copy.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-27T11:38:19.443

我可能错过了您为什么要这样做的重点，但是我认为这完全可以满足您的要求：

```
m[1,] = c(1,2,3) 
```

m 的值在全局环境中发生了变化。

我只是在这里猜测，但通常编写函数来获取对象“名称”的人会发现 R 列表很有用。如果您发现自己想根据名称操作变量，请考虑改用 R 列表。请记住，如果需要，列表的每个成员都可以具有不同的数据类型。

# c - 如何“快速”获取标准结构信息？

> ID：12140719
> 
> 赞同：2
> 
> 时间：2012-08-27T11:00:39.127
> 
> 标签：c, linux, linux-kernel, manpage

开始为 Linux 平台编写 C 代码，我正在使用`man`工具来获取有关标准库函数的信息。现在我想知道有什么解决方案可以轻松获取有关这些函数使用的结构的信息。

在这里举个例子是（部分）输出`man sched_setaffinity`

```
SCHED_SETAFFINITY(2)                                                                                                  Linux Programmer's Manual                                                                                                  SCHED_SETAFFINITY(2)

NAME
       sched_setaffinity, sched_getaffinity - set and get a process's CPU affinity mask

SYNOPSIS
       #define _GNU_SOURCE             /* See feature_test_macros(7) */
       #include <sched.h>

       int sched_setaffinity(pid_t pid, size_t cpusetsize,
                             cpu_set_t *mask); 
```

我现在想在概念上做一个“ `man cpu_set_t`”到现在这个结构的样子。

如何做到这一点？现在我正在浏览网页或包含结构声明的头文件，但它并不像我希望的那样“快速”。有没有更好的解决方案？

*编辑*：我怀疑这种类型是整数或长类型，但我选择这个例子是为了简洁，当然我的问题是复杂的结构

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:17:10.223

运行`man -k cpu_set`（相当于`apropos cpu_set`, 通过描述搜索）会引导您进入[CPU_SET](http://www.kernel.org/doc/man-pages/online/pages/man3/CPU_SET.3.html)宏的手册页，该手册页也引用了这些宏`sched_setaffinity`。（我希望您更多地指的是一般情况，但您应该注意`cpu_set_t`应该将其视为不透明并通过这些宏访问）

在大多数情况下，相关的手册页要么直接描述他们需要的类型，要么参考其他相关页面。

# silverstripe - 数据对象和页面关系

> ID：12140724
> 
> 赞同：0
> 
> 时间：2012-08-27T11:00:52.520
> 
> 标签：silverstripe

[http://www.silverstripe.org/archive/show/1638](http://www.silverstripe.org/archive/show/1638)

上面的帖子似乎是我应该做的，但我只需要一些帮助来解决这个问题。

首先，我需要在页面（例如所有者）和数据对象（汽车）之间创建关系。一个车主可以创建许多与该车主相关联的汽车。但是，我有另一个页面（车库），它可以创建链接到每个车主的汽车。如果车主不想要其中一辆汽车，他们就会拒绝它。我在想 manymanydataobjectmanager 对那一点有好处。

每个车主应该只能在 CMS 中看到与他们直接相关的汽车，而不是其他人的汽车，所以我使用 dataobjectmanager 并使用组为页面分配权限。

真正让这件事变得尴尬的是，当一切都设置好后，我需要输出 JSON，其中将包含车主创建的汽车和他们从车库接受的汽车，而不是他们拒绝的汽车。我在想我需要另一个像链接表一样的表，但可能有一个状态列？

为了澄清，我的问题是如何以建设性的 SilverStripe 方式制造这种混乱？我采取的方法是正确的还是有更好的方法？

非常感谢，如果我不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T17:47:24.940

你用的是银条3吗？您能否澄清后端发生的操作以及前端用户可能执行的操作？

也许对于您的关系，最好使用 ModelAdmin： [http](http://doc.silverstripe.org/framework/en/reference/modeladmin) ://doc.silverstripe.org/framework/en/reference/modeladmin 它使您有机会在没有 Sitetree/Pages Overhead 的情况下管理关系。例如，创建一个 Sitetree 元素只是为了拥有一个所有者并不是最好的方法——除非你真的需要一个表示为真实页面的所有者。所有者也可以只是一个数据对象。

特别是如果你想最后只输出 JSON，你可能完全独立于 Sitetree/Pages... 那么你可以编写一个带有路由规则的自定义控制器，它只返回你需要的数据： [http:// doc.silverstripe.org/framework/en/topics/controller](http://doc.silverstripe.org/framework/en/topics/controller)

问候，弗洛里安

# c++ - 如何在 C++ 服务器应用程序和 django web 应用程序之间进行通信

> ID：12140732
> 
> 赞同：4
> 
> 时间：2012-08-27T11:01:16.290
> 
> 标签：c++, python, django, json

我有一些框架在 C++ 和一个基于 django 的网络应用程序中执行特定任务。这个想法是启动这个框架，从它接收一些数据，发送一些数据或请求并检查它在某个时期的状态。

我正在寻找最好的沟通方式。两个应用程序都在同一台服务器上运行。我想知道 C++ 中的 json 服务器是否是个好主意。Django 会向这个服务器发送一个请求，服务器会解析它，并委托一个工作线程来完成任务。几乎所有需要发送的数据都是类似字符串的。其他数据将存储在数据库中，因此没有问题。

JSON 是个好主意吗？也许你知道 C++ 和 django 之间本地通信的一些更好的机制？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T13:54:28.397

如果您的要求保证始终将应用程序与Web 应用`C++`程序放在同一台机器上，请通过将代码转换为共享库并在其周围包装 python 来包含代码。就像[从 python 调用 C/C++ 一样？](https://stackoverflow.com/questions/145270/calling-c-c-from-python)`Django``C++`

如果您要进行远程调用并且代码需要跨机器通信，那么 JSON 和其他序列化是有意义的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-27T12:00:38.583

JSON 似乎是数据序列化的一个足够公平的选择——它擅长处理字符串，并且在 python 和 C++ 中都有用于编码/解码 JSON 的现有库。

但是，我认为您更大的问题可能是您用于在客户端和服务器之间传输 JSON 的传输协议。这里有一些选项：

您可以在您的 C++ 应用程序中构建一个 HTTP 服务器（我认为这可能是您在问题中所说的“JSON 服务器”的意思），它可以正常工作，但实现起来可能有点痛苦，除非您掌握为您处理繁重工作的图书馆。

另一种选择可能是使用[0MQ](http://www.zeromq.org/)库在客户端和服务器之间发送 JSON（或其他）消息。我认为这可能比实现一个完整的 HTTP 服务器要容易得多，而且 0MQ 有一些进程间通信代码，可能比通过网络发送信息要快得多。

第三种选择只是将 C++ 作为独立应用程序运行，并通过标准输入或命令行参数将数据传递给它。这可能是最简单的做事方式，虽然可能不是最灵活的。如果你要这样做，你最好按照 ablm 的建议构建一个 Python/C++ 绑定。

[或者，您可以尝试基于redis](http://redis.io/)或其他数据库系统构建某种作业队列。这个想法是您的 django 应用程序将一些描述作业的 JSON 放入作业队列中，然后 C++ 应用程序可以定期轮询队列，并使用单独的 redis 条目将结果传递回客户端。这样做的好处是，您可以轻松地让几个“工作人员”从作业队列中读取，而无需付出任何努力。

几乎肯定还有其他一些方法可以解决它，但那些是立即浮现在脑海中的那些。

# git - 如何将项目添加到已启动的分支？

> ID：12140738
> 
> 赞同：1
> 
> 时间：2012-08-27T11:01:37.060
> 
> 标签：git, branching-and-merging, repository

我正在使用 repo 和 git (http://source.android.com/source/version-control.html)。我已经为 2 个项目启动了一个新的 repo 分支：

```
repo start some_new_branch proj1 proj2 
```

我已经上传了一些更改到这个分支。但是现在我需要对这个 repo 分支应用另一个更改，它位于 proj3 中。如何将项目 proj3 添加到“some_new_branch”？

ps 我真的不想为 3 个项目创建一个新分支并使用“git merge --squash”将我的旧提交合并到其中

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:48:12.703

简单地运行`repo start some_new_branch proj3`

# ios - 短信和通话的 openUrl 的替代品

> ID：12140740
> 
> 赞同：0
> 
> 时间：2012-08-27T11:01:41.250
> 
> 标签：ios, sms, phone-call, openurl

这是打开拨号器进行呼叫或发送消息的唯一方法吗？

```
 [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:+%@",phoneNumber]]]; 
```

如果是。那么这个支持会从 ios3 到 ios6（beta）。

如果不。那么任何人都可以提供一些示例代码。（如果有任何私有api可以做到这一点，请提及）

如果有单独的功能可用于发送短信和拨打电话，请也告诉我。

在带有 ios 4.2.6 的 ipad 1 中，以下代码不起作用 `[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"sms:9190432097420"]]];` 并且 `[[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel:9190432097420"]]]`

wr 问题出在哪里

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:19:09.957

根据[`UIApplication`'s Class Reference](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UIApplication_Class/Reference/Reference.html)，该`openUrl:`方法在 iOS 2.0 及更高版本中可用。因此，您应该安全地使用该方法。

关于您的示例，如果您首先检查是否有可以处理提供的 url 的应用程序，它会“更安全”。例如：

```
NSURL *url = [NSURL URLWithString:@"tel:9190432097420"];

if([[UIApplication sharedApplication] canOpenURL:url]) {
    [[UIApplication sharedApplication] openURL:url];
}
else {
    NSLog(@"No application for url '%@'", url);
} 
```

您是在实际设备上还是在模拟器中进行测试？据我所知，模拟器不支持这一点。

# grails - Grails Bootstrap XmlSlurper 服务没有结果

> ID：12140741
> 
> 赞同：0
> 
> 时间：2012-08-27T11:01:47.420
> 
> 标签：grails, service

我是 Grails 的新手，正在做我的小项目。我遇到的问题是我的 XML 阅读服务-ReadService-有一个`read()`返回的函数`XmlSlurper()`。函数读取 xml 文件，因为它在控制台中使用`println`. 但是当我尝试`XmlSlurper`在 Bootstrap 中打印结果时，我什么也得不到。

```
class BootStrap {
  def ReadService

  def init = { 
     servletContext ->
     def xml = ReadService.read()
     println xml
  }
} 
```

有人可以告诉我我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:27:55.630

看起来您只是拼错了您的服务。您`ReadService`必须保存在`grails-app/services`.

要使用该服务，您必须像这样声明它们

```
def readService 
```

并且`init`您可以按如下方式使用它们：

```
def xml = readService.read() 
```

如您所见，第一个字母必须小写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:59:02.033

好的，我现在看到问题不在于读取 xml 本身，而在于引导它，因为将服务名称更改为 lovercase 会有所帮助。我使用 ReaderService 读取带有地址的 xml 文件并构建地址对象。这是我的引导代码：`

```
class BootStrap {
     def readService 

      def init = { 
         servletContext ->
         def xml = readService.read()
         println xml
       def adress = new mobilmed.Adres(ulica:xml.adress.street, dom:xml.adress.house, miejscowość:xml.adress.residance, kodPocztowy:xml.adress.postCode, poczta:xml.adress.post).save()
        if(adres.hasErrors()){
       println adres.errors}
      }
} 
```

当我运行它时，我得到了经典的“没有这样的属性”错误。

```
| Error 2012-08-28 06:42:36,784 [pool-7-thread-1] ERROR context.GrailsContextLoader  - Error executing bootstraps: No such property: adres for class: BootStrap
Message: No such property: adres for class: BootStrap
   Line | Method
->>  10 | doCall                           in BootStrap$_closure1
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|   301 | evaluateEnvironmentSpecificBlock in grails.util.Environment
|   294 | executeForEnvironment . . . . .  in     ''
|   270 | executeForCurrentEnvironment     in     ''
|   303 | innerRun . . . . . . . . . . . . in java.util.concurrent.FutureTask$Sync
|   138 | run                              in java.util.concurrent.FutureTask
|   886 | runTask . . . . . . . . . . . .  in java.util.concurrent.ThreadPoolExecutor$Worker
|   908 | run                              in     ''
^   662 | run . . . . . . . . . . . . . .  in java.lang.Thread 
```

当然，我检查过，定义变量的 Boostraping 工作得很好，如下所示：

```
def karolzam = new mobilmed.Adres(ulica:"Turkusowa", dom:"8/22", miejscowość:"Lublin", kodPocztowy:"20-572", poczta:"Lublin").save()
        if(karolzam.hasErrors()){
       println karolzam.errors} 
```

看起来 Bootstrap 没有“看到”可以在控制台上打印的变量。：/

# matlab - Matlab TreeBagger Cost 参数不起作用，因为它与类似的函数 fitensemble 一起使用

> ID：12140742
> 
> 赞同：1
> 
> 时间：2012-08-27T11:01:48.443
> 
> 标签：matlab, classification, random-forest

我的 TreeBagger 类和 fitensemble（Bag 方法）的成本矩阵都`[0 8;1 0]`用于二元分类。fitensemble 上的混淆矩阵表明，分类倾向于有利于代价高的类（比如`[100 0; 20 80]`有利于假阴性。混淆就像`[100 10; 10 80]`没有成本参数）但在 TreeBagger 上同样不成立。我已经阅读了 TreeBagger 代码，它直接将成本传递给每棵树（在本例中为 classregtree）。我已经在 3 个数据集上尝试过，TreeBagger 似乎忽略了成本。我省略了成本参数，混淆矩阵就像你根本不给出成本一样。我的代码有问题还是 TreeBagger 有问题？（顺便说一句，问题不是对混淆矩阵的误解，它只是不起作用）。还有任何替代 TreeBagger 的方法可以给我可变的重要性、数据和异常值集群以及成本有效吗？

## 我的代码

**不工作的树人**

```
RF=TreeBagger(150,Xtrain,Ytrain,'oobpred','on','cost',[0 8;1 0]) 
```

**适合的工作**

```
Bag=(Xtrain,Ytrain,'Bag',150,'type','classification','cost',[0 8;1 0]); 
```

谢谢您的帮助。

# javascript - 使用 Javascript 的 Ajax 请求

> ID：12140743
> 
> 赞同：1
> 
> 时间：2012-08-27T11:01:50.580
> 
> 标签：javascript, ajax

我必须为移动网络应用程序发出 ajax 请求，我使用了以下代码

```
$.ajax({
        type: type, //GET or POST or PUT or DELETE verb
        url: requestURL, // Location of the service        
        //  contentType: "application/x-www-form-urlencoded", // content type sent to server

        dataType: "xml", //Expected data format from server
        processData: false, //True or False
        success: successCallback, //On Successfull service call
        error: serviceFailed// When Service call fails
    }); 
```

但它失败并出现错误“错误：访问被拒绝。我正在从 javascript 调用 .aspx 服务

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:09:16.747

您不能向提供网页的域以外的域提交 AJAX 请求。如果它是导致问题的子域，您可以使用此代码来解决它。

```
document.domain = location.host.replace(/^.*?([^.]+\.[^.]+)$/g,'$1'); 
```

# .net - 使用 Mchart、Rgraph、Telirk Chart 的单击事件启用/禁用图例

> ID：12140747
> 
> 赞同：0
> 
> 时间：2012-08-27T11:01:57.553
> 
> 标签：.net, mschart, fusioncharts, rgraph

使用 Fusion Charts，有一个单击事件可以切换图例的可见性。MSchart、Rgraph 和 Telrik 是否可以使用相同的功能？我一直无法弄清楚如何做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T16:20:12.517

我只能回答 MS Chart。

如果您使用的是 .NET 4 框架中内置的 Windows 窗体版本，则可以通过清除`Chart.Legends`集合以编程方式删除图例：

```
_chart.Legends.Clear(); 
```

这将从图表中删除任何`Legend`对象，因此如果要在显示和不显示图例之间切换，则需要将`Legend`对象保存在本地，并`Add`在要再次显示时将其保存到集合中。
（或者，也可以直接在设计器中`Legend`从集合中删除对象。）`Legends`

如果您使用的是 WPF 工具包中提供的 WPF 版本，隐藏图例的最方便的方法可能是将*XAML*中的`Width`和设置为零：`Height``Chart.LegendStyle`

 *```
<chartingToolkit:Chart.LegendStyle>
    <Style TargetType="Control">
        <Setter Property="Width" Value="0"/>
        <Setter Property="Height" Value="0"/>
    </Style>
</chartingToolkit:Chart.LegendStyle> 
```

为了重新显示，`Width`和`Height`需要设置为非零值。与 Windows 窗体图表相比，您无需`Legend`使用此方法重新定义对象。*

# php - 如何在类中输出/打印带有参数的方法？

> ID：12140748
> 
> 赞同：2
> 
> 时间：2012-08-27T11:02:01.937
> 
> 标签：php

如何在类中输出方法？

```
class Test {
    function wee($param1, $param2){
        return $param1.$param2;
    }
} 
```

我想输出方法`wee`及其所有内容。我还需要知道方法的名称和需要多少参数

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-27T11:07:20.433

使用[反射类](http://www.php.net/reflectionclass)

```
$class = new ReflectionClass('Test');
$methods = $class->getMethods();
$parameters = $class->getMethod('wee')->getParameters();
var_dump($methods);
var_dump($parameters); 
```

或更程式化的输出

```
echo "<pre>";
$class = new ReflectionClass('Test');
$methods = $class->getMethods();
foreach($methods as $name){
    echo $name;
}
echo "</pre>"; 
```

# javascript - foreach 对象循环添加到堆栈顶部

> ID：12140750
> 
> 赞同：2
> 
> 时间：2012-08-27T11:02:03.713
> 
> 标签：javascript, object, loops, add

我有一个 js，对象是这样的：

```
function test{
this.variable = {};
this.populate = function(){
  // do some crap....
  // and i populate the object like this
  this.variable{xyz..} = new object();
}
this.outputThecrap(){
for (var key in data) {
    if (data.hasOwnProperty(key)) {
     if(data[key].idParent != '0'){
            //do some stuff
     } 
     }
  }
}
this.addSomeOnBeginigQQ(){
  // how do i do that!!!!Q_Q
  this.variable{blabla...} = new blabla();
}
} 
```

现在在我填充对象之后

```
var t = new test();
t.populate();
t.addSomeOnBegining();
t.outputThecrap(); 
```

我得到的问题是添加的属性在循环结束时结束......我需要它们在顶部

任何人都知道如何解决这个问题？

更新：

对象的结构不可更改。我也不能将数组用作容器，这是不可能的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:07:53.627

如果你想要一个堆栈，你将需要使用一个`Array`- 一个具有定义顺序的列表。JavaScript 中没有对象属性，没有像“关联数组”这样的东西。此外，你应该原型。

您可以像设置对象一样设置数组的属性，但属性名称必须是数字（即整数）。然后你用`for`-loop 循环它们。[`Array`对象](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array)还有一些额外的方法，例如在开头或结尾添加项目（我在下面使用过）：

```
function Test() {
    this.data = []; // an array
}
Test.prototype.populate = function(){
    // populate the array like this
    this.data.push({…});
};
Test.prototype.outputThecrap = function(){
    for (var i=0; i<this.data.length; i++) {
        var item = this.data[i];
        if (item /* has the right properties*/)
             //do some stuff
    } 
};
Test.prototype.addSomeOnBeginning(){
    this.data.unshift({…});
}; 
```

然后像这样使用它：

```
var t = new Test();
t.populate();
t.addSomeOnBeginning();
t.outputThecrap(); 
```

* * *

“有序键数组”如下所示：

```
function Test() {
    this.data = {}; // the object
    this.order = []; // an array
}
Test.prototype.populate = function(){
    this.data["something"] = {…}
    this.order.push("something");
};
Test.prototype.addSomeOnBeginning(){
    this.data["other"] = {…};
    this.order.unshift("other");
};
Test.prototype.outputThecrap = function(){
    for (var i=0; i<this.order.length; i++) {
        var key = this.order[i],
            item = this.data[key];
        if (item && key /* fulfill your requirements */)
             // do some stuff
    } 
}; 
```

# java - 使用 Hibernate 3.0 的 JPA persistence.xml 刷新模式

> ID：12140753
> 
> 赞同：0
> 
> 时间：2012-08-27T11:02:08.833
> 
> 标签：java, hibernate, jpa

我知道 Hibernate 默认使用透明写入来提交事务。

但是，我希望我的实体管理器在事务提交后立即在数据库上提交我的事务。无论如何我可以在 JPA 的 persistence.xml 中配置它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:24:13.547

Hibernate 在提交事务时必须在数据库中提交。您还会发现有两个附加选项很有帮助：

*   定义会话和自动提交（在连接的属性中输入属性“hibernate.connection.autocommit”）

*   在事务中间强制hibernate事务与数据库事务同步（通过session.flush()）

问候，

# php - 将 LAMP 应用程序转换为 Windows MSI 分发

> ID：12140757
> 
> 赞同：0
> 
> 时间：2012-08-27T11:02:26.623
> 
> 标签：php, mysql, windows, linux, windows-installer

我最近为在 LAMP 系统上运行的客户端完成了一个基于 Web 的应用程序 - Linux、Apache、MySQL、PHP。然而，规范已经改变，而不是应用程序可以在网络上使用，客户端现在希望它只能通过他们的 windows 网络在内部使用。是否可以在 Windows 上设置 apache、php、mysql，安装我的 Web 应用程序，包括 mysql 数据库和 PHP 代码，然后创建一个可以在 CD ROM 等上分发并安装在 Windows 网络上的 MSI？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:07:08.233

最简单的方法是 XAMPP ( [http://www.apachefriends.org/de/xampp.html](http://www.apachefriends.org/de/xampp.html) )。

但我想编程/生成 MSI（例如 WiX）比使用另一种方法（如安装 xampp，然后将 php/mysql 文件正确放置在其中）更难。

您还可以在您的 PC 上安装 XAMPP，设置一切正常，然后将其压缩备份。然后客户需要安装 XAMPP 并用您的 zip 内容覆盖文件。

# ios - 从另一个视图控制器检索 sqlite 数据

> ID：12140761
> 
> 赞同：2
> 
> 时间：2012-08-27T11:02:31.640
> 
> 标签：ios, sqlite

我有一个名为 VegQuantity 的视图控制器，它执行 totalcost=(quantity*cost of the dish) 并将 itemname、quantity、totalcost 插入名为 FINALORDER 且数据库名称为 FinalOrder 的表中

```
sqlite3_stmt    *statement;

const char *dbpath = [databasePath UTF8String];

if (sqlite3_open(dbpath, &FinalOrder) == SQLITE_OK)
{
    NSString *insertSQL = [NSString stringWithFormat: @"INSERT INTO FINALORDER (itemname, quantity, totalcost) VALUES (\"%@\", \"%@\", \"%@\")", itemName.text, input.text, output.text];

    const char *insert_stmt = [insertSQL UTF8String];

    sqlite3_prepare_v2(FinalOrder, insert_stmt, -1, &statement, NULL);
    if (sqlite3_step(statement) == SQLITE_DONE)
    {
        //  status.text = @"Contact added";
        //  name.text = @"";
        //  address.text = @"";
        //  phone.text = @"";
        NSLog(@"added");
    } else {
        NSLog(@"Couldnt add");
    }
    sqlite3_finalize(statement);
    sqlite3_close(FinalOrder);
} 
```

最终视图控制器 viewdidload 方法

```
const char *dbpath = [databasePath UTF8String];
sqlite3_stmt    *statement;

if (sqlite3_open(dbpath, &FinalOrder) == SQLITE_OK)
{
    NSString *querySQL = [NSString stringWithFormat: @"SELECT * FROM FINALORDER"];

    const char *query_stmt = [querySQL UTF8String];

    if (sqlite3_prepare_v2(FinalOrder, query_stmt, -1, &statement, NULL) == SQLITE_OK)
    {
        if (sqlite3_step(statement) == SQLITE_ROW)
        {
            NSString *itemname = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 0)];
            item.text = itemname;

            NSString *qua = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 1)];
            quantity.text = qua;

            NSString *total = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 2)];
            totalcost.text=total;
        }
        sqlite3_finalize(statement);
    }
    sqlite3_close(FinalOrder);
} 
```

但是我在 FinalOrder 之前一直收到这个错误，称为预期表达式，我在 viewdidload 中编写这段代码是否正确？我在最终视图控制器中没有任何按钮 我在名为 Restaurant 的视图控制器中有一个名为 order 的按钮，它实际上向我显示最终视图控制器..我应该在最终视图控制器中再次搜索 db 文件，我很抱歉问题似乎有点含糊，但简而言之，我只想知道如何检索我在 VegQuantity 视图控制器中插入的数据并将其显示到最终视图控制器中，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T17:35:26.070

我相信问题一定出在定义`FinalOrder`里面，根据错误信息，看起来好像已经被定义为一个类，而不是一个`sqlite3 *`变量。鉴于您使用数据库的范围仅限于这两种方法，我建议`sqlite3 *`在该范围内定义 a 并使用它，例如：

```
- (void)saveRecord
{
    sqlite3      *database;
    sqlite3_stmt *statement;
    const char   *dbpath = [databasePath UTF8String];

    if (sqlite3_open(dbpath, &database) == SQLITE_OK)
    {
        [self purgeTable:database];

        NSString *insertSQL = @"INSERT INTO FINALORDER (itemname, quantity, totalcost) VALUES (?, ?, ?)";

        if (sqlite3_prepare_v2(database, [insertSQL UTF8String], -1, &statement, NULL) == SQLITE_OK)
        {
            sqlite3_bind_text(statement, 1, [itemName.text UTF8String], -1, NULL);
            sqlite3_bind_int(statement, 2, [input.text intValue]);
            sqlite3_bind_double(statement, 3, [output.text doubleValue]);

            if (sqlite3_step(statement) == SQLITE_DONE)
            {
                //  status.text = @"Contact added";
                //  name.text = @"";
                //  address.text = @"";
                //  phone.text = @"";
                NSLog(@"added");
            } else {
                NSLog(@"%s Couldn't add; errmsg='%s'", __FUNCTION__, sqlite3_errmsg(database));
            }
            sqlite3_finalize(statement);
        } else {
            NSLog(@"%s Couldn't prepare; errmsg='%s'", __FUNCTION__, sqlite3_errmsg(database));
        }

        sqlite3_close(database);
    }
} 
```

请注意，除了`sqlite3 *`为数据库使用变量之外，为了使它更健壮一点：

1.  我已将`stringWithFormat`构建 SQL 插入语句的语句替换为`INSERT`使用`?`占位符的语句，然后用于`sqlite3_bind_text`将值绑定到该语句。这样，如果有人输入了一个包含引号的值，插入语句仍然可以工作（您的原始实现会崩溃和/或容易受到 SQL 注入攻击）。

2.  我还添加了这些`sqlite3_errmsg`语句，所以如果出现问题，我知道问题出在哪里。

3.  我没有将这三个字段视为文本字段，而是假设您的表被定义为`CREATE TABLE IF NOT EXISTS FINALORDER (itemname TEXT, quantity INT, totalcost REAL);`并因此使用 text、int 和 double bind 语句。

顺便说一句，这会调用一个`purgeTable`方法，因此如果您运行它两次，它将删除其中的旧记录：

```
- (void)purgeTable:(sqlite3 *)database
{
    if (sqlite3_exec(database, "DELETE FROM FINALORDER;", NULL, NULL, NULL) != SQLITE_OK)
        NSLog(@"%s Couldn't purge table %s", __FUNCTION__, sqlite3_errmsg(database));
} 
```

无论如何，您可以通过以下方式读取此数据：

```
- (void)loadRecord
{
    sqlite3      *database;
    const char   *dbpath = [databasePath UTF8String];
    sqlite3_stmt *statement;

    if (sqlite3_open(dbpath, &database) == SQLITE_OK)
    {
        NSString *querySQL = @"SELECT * FROM FINALORDER";

        if (sqlite3_prepare_v2(database, [querySQL UTF8String], -1, &statement, NULL) == SQLITE_OK)
        {
            if (sqlite3_step(statement) == SQLITE_ROW)
            {
                NSString *itemname = [[NSString alloc] initWithUTF8String:(const char *) sqlite3_column_text(statement, 0)];
                item.text = itemname;
                //[itemname release]; // if not ARC, uncomment this line

                int qua = sqlite3_column_int(statement, 1);
                quantity.text = [NSString stringWithFormat:@"%1d", qua];

                double total = sqlite3_column_double(statement, 2);
                totalcost.text = [NSString stringWithFormat:@"%1.2f", total];
            }
            sqlite3_finalize(statement);
        } else {
            NSLog(@"%s Couldn't prepare; errmsg='%s'", __FUNCTION__, sqlite3_errmsg(database));
        }
        sqlite3_close(database);
    }
} 
```

笔记，

1.  如果失败，我已经添加了一个`sqlite3_errmsg`日志语句`sqlite3_prepare`，并且我已经退休了`stringWithFormat`（因为你没有格式化任何东西）。

2.  鉴于`quantity`was`INT`和`total`was `REAL`，我将酌情使用 , 或 的适当变体来`sqlite3_column_text`检索`sqlite3_column_int`值`sqlite3_column_double`。

3.  我推断您没有使用 ARC，因此，`[NSString alloc]`必须有一个关联的`release`or `autorelease`。

最后，在我们的聊天中，您说您收到了一条错误消息（可能是“未定义符号”消息），内容如下：

```
OBJC_CLASS_$"_FinalOrder" 
```

这意味着您正在尝试使用 的对象类`FinalOrder`，但您尚未在任何地方定义该类。查看它报告此错误的 .o 文件并查看相应的 .m 文件，并在其中查找您对`FinalOrder`类的使用。您显然在`FinalOrder`某处定义了一个类接口，但从未定义类实现，或者，如果您有一个，由于某种原因它不包含在目标的“编译源”列表中，因此请仔细检查它是否在这里：

![添加编译源](../Images/34fe3dc98dff31874554bc093a72f27c.png)

最后，顺便说一句，确保您的数据库在`Documents`文件夹中，而不是试图打开项目包中的数据库副本（因为这是只读的）。如果您的包中有数据库的副本，只需检查`Documents`文件夹中是否已经有它，如果没有，请将其从包中复制到`Documents`文件夹中。

# ios - 音频播放器在后台在 iOS 模拟器上工作，但在 iOS 设备上不工作（相同版本）

> ID：12140763
> 
> 赞同：0
> 
> 时间：2012-08-27T11:02:47.863
> 
> 标签：ios, service, background, titanium

我正在尝试播放音频流，直到应用程序处于后台。

这是代码：

```
var service;

if(isiOS4Plus()){
    Ti.App.addEventListener('resumed',function(e){
        if(service!=null){
                    if(winPlayer.controlStreamer)// if my controller (containing the audio player object) exists
                    {
                            //function that redeclare intervals and event listeners
                            winPlayer.controlStreamer.foregroundStreamer();
                    }
                    service.stop();
                    service.unregister();
            }
     });

    Ti.App.addEventListener('pause',function(e){
        if(winPlayer.controlStreamer)// if my controller (containing the audio player object) exists
            {
                    //function that stop and remove intervals and event listeners
                    winPlayer.controlStreamer.backgroundStreamer();
            }
            service = Titanium.App.iOS.registerBackgroundService({url:'/player/sound.js'});
            Ti.API.info("registered background service = "+service);
    });

} 
```

音频播放器对象在此方法之前被初始化：

```
this.streamer=Titanium.Media.createAudioPlayer({url:this.url_stream_stetienne,bufferSize:1000000}); 
```

这是我的问题：当我在 iOS 模拟器（iOS 5.0）上运行应用程序时，流播放器继续播放（我想要它做的），但是当我在 iOS 设备（iOS 5.0）上测试它时，音量减小并且播放器停止。

注意：文件 info.plist 包含以下几行：

```
<key>UIBackgroundModes</key>
    <array>
        <string>audio</string>
    </array> 
```

我现在使用警报框，表明事件已正确触发和处理。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-30T09:53:05.510

好的，这不是错误：如果您想在 iOS 上播放音频流（如网络广播流），您必须将“audioSessionMode”参数设置为“Titanium.Media.AUDIO_SESSION_MODE_PLAYBACK”（也许其他值是正确的？）在您的 audioPlayer 实例中。

如果您不这样做，流媒体将在后台模式下正常工作，但前提是使用 iPhone 模拟器而不是设备进行测试。

希望这对其他人有帮助。

# iphone - 如何在 iphone/ipad 中制作组合框？

> ID：12140765
> 
> 赞同：2
> 
> 时间：2012-08-27T11:02:48.597
> 
> 标签：iphone, ios, ipad

这可能是一个简单的问题，但我不知道我必须搜索的关键字......

我想创建一个简单的选择器（我在 Android 中称之为微调器）。这就是我想要实现的![在此处输入图像描述](../Images/2c869623d480f8762f567fb514d5a69b.png)

或者，如果它在 ipod touch / iphone 中，它将占用整个屏幕。

所以，我有 3 个按钮代表 ListView 的过滤器（类别、国家、排序）......如果我按下其中一个按钮，应该会出现一个弹出框/对话框来选择每个按钮的过滤器。

谢谢...

如果我需要添加一些信息以明确问题，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:20:59.890

它看起来并不典型。

使用 xib 创建一个新的 UIViewController 类，并调整要为组合框或 popviewController 显示的视图大小。然后把导航控制器和tableviewController放在上面。

并使用其控制器类自定义您的 UIViewController。控制器类将负责显示和选择数据。

现在在您的 MainViewController 中，您要从中显示 ComboBox 或 popviewcontroller。

声明 popViewController 实例变量，合成它。在此处实现一个用户定义的方法，分配您的 popviewcontroller 类并将其分配给您的类的 popviewController 实例变量。

然后将其称为 didSelectRowAtIndexPath。

当 popover 关闭时，您将 popViewController 结果设置为此类的实例变量，以便它可以在 MainViewController 类中轻松访问。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:11:30.383

`UItableView`您可以通过在 a 中添加 a并实现该自定义视图中`UIView`的所有委托来实现类似组合框的功能。`UITableView`

`UIView`现在，您可以在任何您想要该组合的地方添加该自定义的对象。只是你必须在一些`Frame`设置下锻炼。

# sql - 转置没有聚合的行和列

> ID：12140768
> 
> 赞同：2
> 
> 时间：2012-08-27T11:03:10.937
> 
> 标签：sql, sql-server, tsql, pivot, unpivot

我有以下数据集

```
Date            Field1        Col1  Col2    Col3
2012/07/02      Customer1      CL   DS      RT
2012/07/03      Customer1      DS   RT      700
2012/07/04      Customer1      DS   RT      700
2012/07/02      Customer2      CL   DS      RT
2012/07/03      Customer2      DS   RT      1500
2012/07/04      Customer2      DS   RT      1500
2012/07/02      Customer3      CL   DS      RT
2012/07/03      Customer3      DS   RT      6000
2012/07/04      Customer3      DS   RT      6000
2012/07/02      Customer4      CL   RC      RT
2012/07/03      Customer4      RC   RT      4900
2012/07/04      Customer4      RC   RT      4900 
```

我想输出如下：

```
Field1  2012/07/02  2012/07/03  2012/07/04
Col1    Customer1   CL  DS  DS
Col2    Customer1   DS  RT  RT
Col3    Customer1   RT  700 700
Col1    Customer2   CL  DS  DS
Col2    Customer2   DS  RT  RT
Col3    Customer2   RT  1500    1500
Col1    Customer3   CL  DS  DS
Col2    Customer3   DS  RT  RT
Col3    Customer3   RT  6000    6000
Col1    Customer4   CL  RC  RC
Col2    Customer4   RC  RT  RT
Col3    Customer4   RT  4900    4900 
```

问题还在于我有不固定数量的客户（Field1）和不固定数量的日期。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:50:54.797

您正在尝试做的事情被称为[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx). 有两种方法可以完成这些操作，一种是使用静态枢轴，您可以硬编码所有要转换的值，另一种是动态枢轴，其中值是在执行时确定的。

静态版本（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6b93c/7)）：

```
select *
from 
(
  select dt, field1, col, value
  from yourTable
  unpivot
  (
    value for col in (col1, col2, col3)
  ) u
)x1
pivot
(
  min(value)
  for dt in ([2012-07-02], [2012-07-03], [2012-07-04])
) p 
```

Dynamic Pivot（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6b93c/21)）：

```
DECLARE @colsUnpivot AS NVARCHAR(MAX),
    @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsUnpivot = stuff((select ','+quotename(C.name)
         from sys.columns as C
         where C.object_id = object_id('yourTable') and
               C.name like 'col%'
         for xml path('')), 1, 1, '')

select @colsPivot = STUFF((SELECT distinct ', ' + QUOTENAME(convert(char(10), dt, 120))
                    from yourTable
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query = 
          'SELECT col, field1, ' + +@colsPivot+ '
           FROM
           (
              select dt, field1, col, value
              from yourTable
              unpivot
              (
                value for col in ('+ @colsUnpivot+')
              ) u
           )x1
           pivot
           (
             min(value)
             for dt in ('+@colsPivot+')
           ) p '

exec(@query) 
```

当您不知道需要转换为列的项目数时，动态数据透视是一个很好的选择。两者都会产生相同的结果。

编辑 #1，如果您希望日期列按特定顺序 - desc 等，那么您将使用以下内容获取日期（参见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/6b93c/28)）：

```
select @colsPivot = STUFF((SELECT ', ' + QUOTENAME(convert(char(10), dt, 120))
                    from yourTable
                    group by dt
                    ORDER by dt desc
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:51:23.650

您必须对您的问题使用[SQL Server Pivot 查询](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)。

您可以使用以下查询：

```
CREATE TABLE mytable(date DATE, Field1 NVARCHAR(50), col1 NVARCHAR(30), col2 NVARCHAR(30),col3 NVARCHAR(30))
INSERT INTO mytable(date,Field1,col1,col2,col3)
VALUES('2012/07/02','Customer1','CL','DS','RT')
...

SELECT Col, Field1, [2012/07/02],[2012/07/03],[2012/07/04]
FROM (SELECT Field1, 'Col1' AS Col, Date, Col1 AS ColVal
      FROM MyTable

      UNION ALL

      SELECT Field1, 'Col2' , Date, Col2 AS ColVal
      FROM MyTable

      UNION ALL 

      SELECT Field1, 'Col3' , Date, Col3 AS Col
      FROM MyTable
      )AS P
PIVOT (MIN(Colval) FOR Date IN ([2012/07/02],[2012/07/03],[2012/07/04])) AS Pvt
ORDER BY Field1, Col 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:06:11.660

您不需要在没有聚合的情况下执行此操作，但您确实需要使用动态 SQL 来执行此操作。搜索“SQL Dynamic Pivot”，你会发现很多关于它的帖子。喜欢：[SQL Server 动态 PIVOT 查询？](https://stackoverflow.com/questions/10404348/sql-server-dynamic-pivot-query)

但更好的是在客户端中执行此操作，因为 SQL 的客户端更愿意提前知道正在生成哪些列。

# iphone - IOS 是否支持所有 Unicode 表情符号？

> ID：12140770
> 
> 赞同：4
> 
> 时间：2012-08-27T11:03:18.383
> 
> 标签：iphone, objective-c, ios, unicode, emoji

**大家好，**

我有一个关于`Unicode characters`. 我可以将 Apple Art Work 附加`Unicode Characters`到`UITextView`. 像这样 ： -

```
self.textView.text = @"\ue00A"; 
```

没关系。但现在我有很多`Unicodes Characters`不在 Apple 艺术作品中。
其中之一是`U+1F3C7`
现在我正在尝试在`UITextView`.

```
self.textView.text = @"\u1f3c7"; 
```

然后它向我展示了一个**特殊字符**而不是**表情符号。**
![Unicode 表情符号](../Images/19f843ae0dcb41f2081ff41c6888c231.png)

这是这个 Unicode 的 Emoji Icon 但它正在向我展示`Ἴ7`。

`Apple doesn't support all Unicode Characters ?`
`How can I add my own emojies in my application ?`

如果您不清楚我的问题，请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-27T11:18:15.307

Objective-C 内部不是像 Java 和 C# 那样使用 UTF-16 吗？

如果是这样，那么 U+1F3C7 将不是“\u1f3c7”，而是代理对“\uD83C\uDFC7”。

否则，必须有某种方式来表示更高的字符，因为`"\u1f3c7"`它与 相同`"\u1f3c" + "7"`，即`Ἴ7`（带有 psili 和 oxia 的大写 iota，然后是 7）。

编辑：在 OP 和我自己之间进行了一些讨论之后，我们发现在 Objective C 中执行此操作的方法是我所知道的 C++ 方法：

```
"\U0001F3C7" 
```

（如果它适合 4 个十六进制数字，`\uXXXX`小写`u`和 4 个十六进制数字有效，`\UXXXXXXXX`大写字母`U`和 8 个十六进制数字适用于所有内容，但输入时间更长）。

现在我们的朋友只需要处理字体支持的问题，这是让这个看起来像他想要的那样的另一个问题。

# c# - 如何使用 TextBlock 创建自定义文本框？

> ID：12140773
> 
> 赞同：1
> 
> 时间：2012-08-27T11:03:29.330
> 
> 标签：c#, wpf, custom-controls

我想创建一个自定义控件（或用户控件），它有一个文本块和一个文本框，如下图所示：

![在此处输入图像描述](../Images/bd0e2a97bd5474b47a240ccc4c12bca2.png)

textblock 和 Textbox 文本属性都将绑定到数据库字段并能够应用样式等。哪个是最好的方法？

我想出了一个解决方案如下：

用于用户控制的 XAML：

```
<UserControl x:Class="TestDependency.TextBlox"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
         x:Name="abc"
         DataContext="{Binding RelativeSource={RelativeSource Self}}" >
<Grid Width="170">
    <TextBlock Height="23" HorizontalAlignment="Left" Margin="0,1,0,0" 
               Text="{Binding Path=Caption}"
               VerticalAlignment="Top" Width="52" />
    <TextBox Height="25" HorizontalAlignment="Left" Margin="53,-2,0,0" 
             x:Name="TextBox1"
             Text="{Binding Path=Value}"
             VerticalAlignment="Top" Width="120" />
</Grid> 
```

用户控件背后的代码：

```
public  partial class TextBlox : UserControl
{
    public  TextBlox()
    {
        InitializeComponent();
    }

    public static DependencyProperty CaptionProperty = DependencyProperty.Register("Caption", typeof(string), typeof(TextBlox));
    public static DependencyProperty ValueProperty = DependencyProperty.Register("Value", typeof(string), typeof(TextBlox));

    public string Caption
    {
        get
        {
            return (string)GetValue(CaptionProperty);
        }
        set
        {
            SetValue(CaptionProperty, value);
        }
    }

    public string Value
    {
        get
        {
            return (string)GetValue(ValueProperty);
        }
        set
        {
            SetValue(ValueProperty, value);
        }
    }

    static void ValueChangedCallBack(DependencyObject property, DependencyPropertyChangedEventArgs args)
    {
        TextBlox inst = (TextBlox)property;
        inst.TextBox1.Text = (string)args.NewValue;
    }
} 
```

XAML 用于使用 Usercontrol 的实际表单：

```
 <Grid x:Name="grdmain">
    <my:TextBlox Caption="{Binding XValue, Mode=TwoWay}" Value="{Binding WindowName, Mode=TwoWay}" 
        HorizontalAlignment="Left" Margin="246,197,0,0"  x:Name="textBlox1" VerticalAlignment="Top" />
</Grid> 
```

后面的代码：

```
 public partial class MainWindow : Window
{
    DataEntities dt = new DataEntities();
    CoOrdinate oCord;
    public MainWindow()
    {
        InitializeComponent();
        Loaded += new RoutedEventHandler(MainWindow_Loaded);
    }

    void MainWindow_Loaded(object sender, RoutedEventArgs e)
    {
        oCord = dt.CoOrdinates.First();
        grdmain.DataContext = oCord;
    }
} 
```

绑定仍然不起作用。但是代码：

```
textBlox1.Caption = "test"; 
```

工作正常。我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:09:07.900

创建一个带有文本块和文本框的用户控件，并将值绑定到该控件。

```
<YourUserControl TextBlockText="{Binding TextBlockText}" TextBoxText="{Binding TextBoxText, Mode=TwoWay}"/> 
```

# php - PHP 生成 CSV 单元格未显示在 Windows 上

> ID：12140775
> 
> 赞同：1
> 
> 时间：2012-08-27T11:03:35.977
> 
> 标签：php, csv, cakephp-2.1, export-to-csv

我正在使用 Cakephp 2.0。我需要生成一份 Excel 格式的日常基础报告。所以我写了一个函数来生成一个CSV文件。当我在 OpenOffice 中下载文件时，它在 Linux 机器上工作正常，但如果我尝试在 Windows Microsoft 中打开相同的文件，则没有单元格，但数据显示正确。有了这个，我列出了我的编码

```
 $model.= "-".date('d M,Y');
    header ("Expires: Mon, ".date('d M,Y')." GMT");
    header ("Last-Modified: " . gmdate("D,d M YH:i:s") . " GMT");
    header ("Cache-Control: no-cache, must-revalidate");
    header ("Pragma: no-cache");
    header ("Content-type: application/vnd.ms-excel");
    header ("Content-Disposition: attachment; filename=\"$model.xls" );
    header ("Content-Description: Generated Report" ); 
```

任何人都可以帮助thanx

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:44:31.913

我认为您可能在这里做错了什么请检查您的标题。您在问题中提到了 csv 并且您正在编写 excel 标头。这可能令人困惑`MS Excel`

```
header ("Content-type: application/vnd.ms-excel");
header ("Content-Disposition: attachment; filename=\"$model.xls" );
header ("Content-Description: Generated Report" ); 
```

我正在使用这种标题格式，它在 Windows 和 Open Office 中都非常适合我。请尝试一下。

```
header("Pragma: public");
header("Expires: 0");
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Content-type: octet/stream");
header("Content-Type: application/force-download");
header("Content-Type: application/download");
header("Content-disposition: attachment; filename=" . basename($filename.".csv"));
header("refresh: 0; url= ".$redirect_url); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:12:37.853

Excel CSV 文件应命名为 SSV 文件，因为数据列需要用分号而不是逗号分隔。此外，数据应括在引号中，任何内引号都需要转义为双引号；例如`1;"Some ""string"" with escapes"`。

# gtk - 如何访问 GtkFileChooser 中的文本条目

> ID：12140776
> 
> 赞同：0
> 
> 时间：2012-08-27T11:03:37.257
> 
> 标签：gtk

在 GTK+ 中，是否可以访问 GtkWidget -- 文件名的文本条目`GtkFileChooser`？我想使用禁用文本条目的可编辑属性`gtk_entry_set_editable`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:35:01.477

据我所知，没有。

你最终想要达到什么目标？也许还有另一种方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-20T09:54:01.197

如果有正当理由获取指向 GtkEntry 的指针，则从 GtkFileChooserDialog 派生，它可能会变异为 GtkFileChooserDefault。GObject 在检查类型实例时会抱怨非法转换，即使它可以工作并且派生对象的数据可以无错误地访问，使用 GTK_FILE_CHOOSER 而不是 MY_FILE_CHOOSER 以避免警告消息和入口指针的本地静态。在构建过程中无法访问入口小部件。以下是相关代码：

```
static GtkEntry *chooser_entry;

static void my_file_chooser_finalize (GObject *object)
{
  chooser_entry = NULL;
  (G_OBJECT_CLASS (my_file_chooser_parent_class))->finalize (object);
}

static void my_file_chooser_init (MyFileChooser *self)
{
  chooser_entry = NULL;
}

static void look_for_entry(GtkWidget *widget, void *self)
{
  if (GTK_IS_ENTRY(widget)) {
    chooser_entry = (GtkEntry*)widget;
  }
  else if (GTK_IS_CONTAINER(widget)) {
    gtk_container_forall ( GTK_CONTAINER (widget), look_for_entry, self);
  }
}

static void file_chooser_find_entry (GtkWidget *chooser)
{
  GList *children, *iter;

  /* Get all objects inside the dialog */
  children = gtk_container_get_children (GTK_CONTAINER (chooser));

  for (iter = children; iter; iter = iter->next) {

    if (GTK_IS_CONTAINER(iter->data)) {

      gtk_container_forall ( GTK_CONTAINER (iter->data), look_for_entry, chooser);

      if (chooser_entry != NULL) {
        break;
      }
    }
  }
  g_list_free (children);
}

GtkEntry *my_file_chooser_get_entry (GtkWidget *widget)
{
  if (chooser_entry == NULL) {
    file_chooser_find_entry (widget);
  }
  return chooser_entry;
}

char *my_file_chooser_get_entry_text(GtkWidget *widget)
{
  char       *text;
  GtkEntry   *entry;

  text = NULL;

  if (GTK_IS_FILE_CHOOSER(widget)) {

    entry = my_file_chooser_get_entry(widget);

    if (GTK_IS_ENTRY(entry)) {

      if (gtk_entry_get_text_length (entry)) {
        text = g_strdup (gtk_entry_get_text(entry));
      }
    }
  }
  return text;
} 
```

也许不理想，但有效。

# php - 蛋糕PHP。更改数组中的元素

> ID：12140778
> 
> 赞同：0
> 
> 时间：2012-08-27T11:03:56.787
> 
> 标签：php, cakephp

```
$this->paginate = array(
     'limit' => 5,
     'conditions' => ''
);

$this->paginate['conditions'] = array(
     'name LIKE' => '%a'
); 
```

他们注意到：

```
Notice (8): Indirect modification of overloaded property EmployeeCvsController::$paginate has no effect [APP\Controller\EmployeeCvsController.php, line 137] 
```

有人可以解释一下为什么我不能从数组中更改订单元素吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T12:41:18.267

根据这[本书](http://book.cakephp.org/2.0/en/core-libraries/components/pagination.html)，你可以

1）`$paginate`在控制器中指定变量（而不是在动作中）：

```
public $paginate = array(); 
```

或 2) 只需将其放入一个数组而不是两个数组中：

```
 $this->paginate = array(
         'limit' => 5,
         'conditions' => array(
            'name LIKE' => '%a'
         )
    ); 
```

或 3)在第二个参考上使用`$paginate`而不是：`$this->paginate`

```
$paginate['conditions'] = array(
   'name LIKE' => '%a'
); 
```

# vb.net - E.cancel Visual basic 中的循环

> ID：12140780
> 
> 赞同：3
> 
> 时间：2012-08-27T11:03:59.243
> 
> 标签：vb.net

我正在制作一个服务器控制应用程序（简单的一些按钮来启动/停止服务器）当用户想要关闭应用程序时，会提示一个确认框。

```
Private Sub Form1_FormClosing(sender As Object, e As FormClosingEventArgs) Handles Me.FormClosing

    Dim response As Integer
    response = MsgBox("Are you sure you want to stop the server", vbYesNo, "Stop Server ?")
    If response = vbYes Then
        Shell("cscript ""stop.vbs""", 1)
        Close()
    Else
        e.Cancel = True
    End If
End Sub 
```

这就是我现在拥有的代码。但是，当我启动应用程序并使用 X 按钮或“关闭窗口”将其关闭时，系统会提示我提出问题，直到我单击“否”，然后它将关闭。这是一个循环，当您第一次单击“是”然后单击“否”时它会停止。

有人可以帮我解决这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T11:05:42.760

只需删除`Close()`呼叫，因为`Form`已经关闭。没必要那样做。

# security - 在 Firefox 14 中禁用“虽然此页面已加密......”

> ID：12140781
> 
> 赞同：4
> 
> 时间：2012-08-27T11:04:02.513
> 
> 标签：security, firefox, selenium, popup

我一直在使用 Selenium RC 来自动化我的测试用例。我遇到了一个出现安全弹出窗口并且我无法使用代码/ Firefox 浏览器设置覆盖的情况。

弹出消息 - “虽然此页面已加密，但您输入的信息将通过未加密的连接发送，并且很容易被第三方读取。您确定要继续发送此信息吗？”

我浏览了这个论坛和谷歌上发布的很多解决方案。似乎没有任何工作。我的浏览器版本是 14.0.1。大多数可用于 FF 设置的解决方案都是 FF 3.0 及更早版本，不适用。

我什至尝试过**about:config**并禁用了以下一组键。也无济于事。

```
security.warn_entering_secure
security.warn_entering_secure.show_once
security.warn_entering_weak
security.warn_entering_weak.show_once
security.warn_leaving_secure
security.warn_leaving_secure.show_once
security.warn_submit_insecure
security.warn_submit_insecure.show_once
security.warn_viewing_mixed
security.warn_viewing_mixed.show_once 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-09T22:48:46.903

如果您想禁用警告消息：“虽然此页面已加密，但您输入的信息将通过未加密的连接发送，并且很容易被第三方读取。您确定要继续发送此信息吗？信息？”

在浏览器的地址框中输入“about:config”。警告框将打开，请同意小心。当页面打开时，向下滚动到：“security disable_button.OpenCertManager”并双击它并将其从 True 更改为 False。对下面的那个做同样的事情：“security disable_button.OpenDeviceManager”。关闭页面，不再弹出烦人且不必要的警告。我刚做了，所以我知道它有效。

# java - 3D阴影实现思路

> ID：12140784
> 
> 赞同：11
> 
> 时间：2012-08-27T11:04:14.047
> 
> 标签：java, 3d, shadow, java-3d

假设您的眼睛位于对象 A 上的表面点 P1 上，并且有一个目标对象 B，并且对象 B 后面有一个点光源。

**问题：**如果我看着光源并说“我在阴影中”，如果我因为物体 B 而看不到光，我是对的吗？然后我将对象 A 的那个点标记为“A 上 B 的阴影点之一”。

![在此处输入图像描述](../Images/ea73b694e64a57b180053491f07baea7.png)

如果这是真的，那么我们是否可以在 A 的表面上构建一个“阴影几何”（黑色）对象，然后由于光、B、A 等**的实时**运动而不断改变它？假设一个球体（A）有 1000 个顶点，而其他球体（B）也有 1000 个顶点，那么这是否意味着 100 万个比较？（是阴影，O（N ^ 2）（时间）复杂度？）。我不确定复杂性，因为改变 P1（眼睛）也会改变 B 的可见点（在 P1 和光源点之间）。二阶或更高级别的阴影（例如灯光在两个物体之间多次反射）呢？

我现在正在使用 java-3D，但它没有影子功能，所以我想转移到其他与 java 兼容的库。

谢谢。

**编辑：**移动相机以构建阴影时，我需要禁用“相机”。我怎样才能做到这一点？这会严重降低性能吗？

**新想法：** java3D 有内置的碰撞检测。我将创建从光到目标多边形顶点的线（不可见），然后检查来自另一个对象的碰撞。如果发生碰撞，请添加该顶点corrd。到阴影列表，但这仅适用于点灯:(。

**任何为 java3d 提供真正的阴影库的人都会很有帮助。**

**java3D 中非常小的样本 Geomlib 阴影/光线跟踪可能是最好的** 光线跟踪示例？

我知道这有点难，但至少有一百人尝试过。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-05T20:04:57.813

阴影可能是 3D 图形编程中最复杂的主题，并且有很多方法，但应根据任务要求确定最佳选项。您正在谈论的算法是实现从点光源到平面的阴影的最简单方法。它不应该在 CPU 上完成，因为您已经使用 GPU 进行 3D 渲染。

基本上，该方法是两次渲染同一个对象：一次从相机视点，一次从光源点。您需要准备模型视图矩阵以在这两个视图之间进行转换。从光点渲染对象后，您将获得深度图，其中每个点最靠近光源。然后，对于正常渲染的每个像素，您应该将其 3D 坐标转换为前一个视图，并检查相应的深度值。这实质上为您提供了一种方法来判断哪些像素被阴影覆盖。

性能影响来自两次渲染同一个对象。如果您的任务不假设阴影投射解决方案的高可扩展性，那么它可能是一种可行的方法。

一些相关的问题：

[如何在 OpenGL 中创建廉价的阴影？](https://stackoverflow.com/questions/1114742/how-do-i-create-cheap-shadows-in-opengl)

[有没有一种简单的方法可以在 OpenGL 中获得阴影？](https://stackoverflow.com/questions/3849052/is-there-an-easy-way-to-get-shadows-in-opengl)

[在 OpenGL 的场景中渲染阴影的最简单方法是什么？](https://stackoverflow.com/questions/11287023/what-is-the-simplest-method-for-rendering-shadows-on-a-scene-in-opengl)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-10T14:11:00.877

您的方法可以总结如下：

```
foreach (point p to be shaded) {
    foreach (light) {
        if (light is visible from p)
            // p is lit by that light
        else
            // p is in shadow
    }
} 
```

有趣的事实是**，这就是今天在 GPU 上实时阴影的处理方式**。

但是，要有效地工作并非易事。渲染场景是一个逐个三角形的简化过程。如果对于每个三角形中的每个点（像素、片段）都需要考虑其他所有其他三角形来检查光线相交，那将非常麻烦。

那么如何有效地做到这一点呢？答：颠倒过程。

通常，场景中的灯光比像素少得多。让我们利用这一事实并进行一些预处理：

```
// preprocess
foreach (light) {
    // find all pixels p on the scene reachable from the light
}
// then render the whole scene...
foreach (point p to be shaded) {
    foreach (light) {
        // simply look up into what was calculated before...
        if (p is visible by the light)
            // p is lit
        else
            // p is in shadow
    }
 } 
```

这似乎快了很多......但仍然存在两个问题：

1.  如何找到光线可见的所有像素？
2.  如何使它们在渲染过程中快速访问以进行查找？

有一个棘手的部分：

*   为了找到灯光可见的所有点，将相机放置在那里并渲染整个场景！深度测试将拒绝不可见的点。
*   为了让这个结果以后可以访问，请将其保存为纹理并在实际渲染阶段使用该纹理进行查找。

* * *

这种技术称为**阴影贴图**，具有从灯光可见的像素的纹理称为阴影贴图。有关更详细的解释，请参见例如[Wikipedia 文章](http://en.wikipedia.org/wiki/Shadow_mapping)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T15:26:24.543

基本上是的，你的方法会产生阴影。但是逐点执行（对于实时）在性能方面是不可行的，除非它是在 GPU 上完成的。我不熟悉 API 今天提供的内容，但我确信任何最近的引擎都会提供一些开箱即用的影子。

您的“新想法”是在仍然使用 CPU 完成渲染的日子里，阴影是如何实现的*。*如果多边形的数量不是太大（或者你可以通过对体积进行分组等来有效地拒绝整个束），它可以用相当少的 CPU 能力来完成。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-10T13:53:50.850

vanilla Java 上的 3D 阴影渲染永远不会高效。您最好使用为利用图形卡的全部功能而编写的图形库，例如 OpenGL 或 DirectX。当您使用 Canvas（来自您提供的屏幕截图）时，您甚至可以使用 JNI 从本机代码绘制该 Canvas。因此，您可以使用图形库中的所有技术，只需稍作改动，直接从本机代码绘制您的 Canvas。与编写您自己的 3D 引擎相比，使其工作所需的工作量很少。

关于 AWT 本地访问的 Wiki 链接：[http](http://en.wikipedia.org/wiki/Java_AWT_Native_Interface) ://en.wikipedia.org/wiki/Java_AWT_Native_Interface 文档：[http ://docs.oracle.com/javase/7/docs/technotes/guides/awt/AWT_Native_Interface.html](http://docs.oracle.com/javase/7/docs/technotes/guides/awt/AWT_Native_Interface.html)

# apache - Apache 2，ubuntu - VHost 不起作用

> ID：12140787
> 
> 赞同：1
> 
> 时间：2012-08-27T11:04:29.390
> 
> 标签：apache, ubuntu-12.04, mod-vhost-alias

我想在我的机器上创建 VHost。

我的配置：

/etc/hosts

```
127.0.0.1 mysite.dev 
```

/etc/apache2/sites-available/mysite.dev

```
<VirtualHost *:80>
    SetEnv APPLICATION_ENV "development"
    ServerName mysite.dev
    DocumentRoot /home/michal/Public/mysite/public/frontend

    <Directory /home/michal/Public/mysite/public/frontend>
        Options Indexes FollowSymLinks Includes
        AllowOverride All
        Order allow,deny
        Allow from all
    </Directory>
</VirtualHost> 
```

我跑之后

```
sudo a2ensite mysite.dev
sudo /etc/init.d/apache2 restart 
```

现在，当我在浏览器中键入 mysite.dev 时，我看到了标准的 Apache index.html（“它可以工作了！”）。为什么？我应该在哪里找到我的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-05T14:02:28.770

好的，这是在一年前提出的，但今天我遇到了同样的问题，可能我找到的解决方案对其他人非常有帮助，所以就在这里。

对我有用的是重命名 /etc/apache2/sites-enabled 中的软链接，将扩展名 .conf 附加到该文件夹​​中的每个链接。

因此，如果我们有以下链接：

```
/etc/apache2/sites-enabled$ ls -l
lrwxrwxrwx 1 root root 23 Nov 30  2012 site1 -> ../sites-available/site1   
lrwxrwxrwx 1 root root 23 Nov 30  2012 site2 -> ../sites-available/site2 
```

我们应该重命名为 site1.conf 和 site2.conf

```
/etc/apache2/sites-enabled$ sudo mv site1 site1.conf
/etc/apache2/sites-enabled$ sudo mv site2 site2.conf 
```

然后当然，重新启动apache

```
/etc/apache2/sites-enabled$ sudo /etc/init.d/apache2 restart 
```

这样做的原因是 Apache 在最近的某个时候改变了这些文件的命名方式，以便正确加载它们，如 apache2.conf 文件的最后几行所述。

```
# Include the virtual host configurations:
IncludeOptional sites-enabled/*.conf 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:10:39.683

从您的问题中不太清楚您想要实现的目标。如果您想转发到特定的 URL，比如 HTTPS URL，那么可以使用以下几行来实现：

```
 <VirtualHost *:80>
     ServerName localhost:80
     RedirectMatch permanent ^(.*)$ https://localhost:8443$1
</VirtualHost> 
```

如果您尝试配置 apache 服务器、jboss 服务器和 mod_jk，那么您可以参考此[链接](http://rupeshit.wordpress.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-19T22:05:51.597

您看到的是默认 index.html 页面，因为您没有禁用 Apache 默认虚拟主机，请使用以下命令禁用默认 Apache 虚拟主机：

`sudo a2dissite 000-default.conf`

# mysql - SQL 数据类型 SET() 或替代方案？

> ID：12140797
> 
> 赞同：0
> 
> 时间：2012-08-27T11:04:56.390
> 
> 标签：mysql, sql, database-design, database-schema, sqldatatypes

我想这个问题很基本，但 imo 这些是最难的。

所以假设我想创建一个关于汽车可以拥有的额外物品的表格，假设它们是 5，所以汽车可以有，没有，所有，一个或一些额外的东西。

是否推荐使用`set()`具有 5 个选项的字段？似乎是这样做的逻辑方式，但我读过该`set()`字段对大型数据库中的搜索不友好。

我想到的其他选择是：

1.  拥有一个带有汽车 ID 和每个附加功能的表的外键（如果汽车有所有附加功能，那么这将是 5 行）

2.  原始表中的每个额外都有 5 个额外的布尔列。

考虑到数据库/表会很大，哪种方法是最好的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:07:31.033

对我来说这听起来不合逻辑。`SET()`将 a用于大洲而不是汽车附加功能可能是有意义的。Extras 会随着时间的推移而改变，您不希望每次发生这种情况时都改变您的应用程序和数据库设计。显而易见的设计是为 extras 创建一个表并通过外键链接它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T04:24:24.993

第二个绝对不是一个选择。我强烈建议不要这样做，因为当引入第六个选项时会发生什么？然后是第七，第八等？第一是更传统和明显的方法。高级索引结构可以为您提供良好的结果 1

# android - 使用 Android 2.x 进行实时音频流式传输

> ID：12140801
> 
> 赞同：7
> 
> 时间：2012-08-27T11:05:20.757
> 
> 标签：android

我需要在 2.x 及更高版本的设备上播放直播。[这](http://developer.android.com/guide/appendix/media-formats.html)表明不可能在装有 Android 2.x 的设备上播放直播流。

我在这里有什么选择？特别是我对流式音频感兴趣——我应该选择什么格式以及与哪个协议结合使用？

PS 我试过 Vitamio - 不想让客户下载第三方库。

**UPD**

*   我怎么能播放这个流“ [http://188.138.112.71:9018/](http://188.138.112.71:9018/) ”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:55:57.037

试试这个 RTSP 流的例子（url 应该支持 RTSP）视频更改代码以仅支持音频

```
public class MultimediaActivity extends Activity {
private static final String RTSP = "rtsp://url here";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.multimedia);

         //***VideoView to video element inside Multimedia.xml file
  VideoView videoView = (VideoView) findViewById(R.id.video);
  Log.v("Video", "***Video to Play:: " + RTSP);
  MediaController mc = new MediaController(this);
  mc.setAnchorView(videoView);
  Uri video = Uri.parse(RTSP);
  videoView.setMediaController(mc);
  videoView.setVideoURI(video);
  videoView.start();

}
} 
```

编辑：

在 Android 中使用 MediaPlayer 进行实时音频流式传输 android 中的实时音频流式传输，从 1.6 sdk 开始变得如此简单。在 setDataSource() API 中直接传递 url，音频将毫无问题地播放。

完整的代码片段是，

```
 public class AudioStream extends Activity {

 @Override
public void onCreate(Bundle savedInstanceState) {
 super.onCreate(savedInstanceState);
String url = "http://www.songblasts.com/songs/hindi/t/three-idiots/01-Aal_Izz_Well-(SongsBlasts.Com).mp3";
 MediaPlayer mp = new MediaPlayer();
try {
 mp.setDataSource(url);
 mp.setAudioStreamType(AudioManager.STREAM_MUSIC);
 mp.prepare();
 mp.start();
} catch (Exception e) {
 Log.i("Exception", "Exception in streaming mediaplayer e = " + e);
}
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:24:49.460

您可以使用 Android 原生媒体播放器支持的 RTSP 协议。

```
 player = new MediaPlayer();
                    player.reset();
                    player.setDataSource(intent.getStringExtra("Path"));
                    player.prepare();
                    player.setOnPreparedListener(new OnPreparedListener() {

                        public void onPrepared(MediaPlayer mp) {
                            player.start();
                        }
                    }); 
```

路径将是您的 rtsp 音频流 url。

# opencv - 图像中简单基准的位置识别

> ID：12140802
> 
> 赞同：6
> 
> 时间：2012-08-27T11:05:25.140
> 
> 标签：opencv, positioning, pattern-recognition

我不需要一个可行的解决方案，但我正在寻找可以通过一些有用的提示/链接将我推向正确方向的人：

我有一个带有基准的图像（可以是例如十字或点或任何简单的几何形状）。图像源本身的照明方式使人不会喜欢生成的图像，但基准的对比度非常好。接下来，我对该基准（矢量数据格式）及其标称位置进行了清晰的几何描述。

现在我希望 OpenCV 找到图像中的基准并返回它的真实当前位置（以及可能的基准旋转）。

如何用 OpenCV 做到这一点？我发现的教程总是使用复杂的模式，如面部和图片，这些模式并未针对基准检测本身进行优化，因此它们都使用非常复杂的学习/描述方法。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-28T07:55:18.727

根据您的基准，您可以使用不同的方法。已经在 OpenCV 中实现的一种非常常见的方法是 SIFT，它在图像中找到尺度不变的鲁棒点。进行的方法是：

*   在您的基准离线上运行**SIFT 。**这会生成要跟踪的关键点。

*   实时运行**SIFT （或****FAST**，也可以生成**SIFT 描述符**）以查找场景中的关键点。

*   使用匹配器（例如**FLANN 匹配器**）来查找在图像中找到的哪些关键点与基准点相对应。

*   运行`findhomography()`匹配点。从找到的单应性 H 矩阵 3x3 中，可以[得到相机位姿](https://stackoverflow.com/a/10781165/744859)。

还有更多的方法，这是我喜欢的方法，它非常最新且快速。

# ruby - Travis-CI 上的 RSpec 测试失败，但在本地机器上成功通过

> ID：12140808
> 
> 赞同：0
> 
> 时间：2012-08-27T11:05:40.710
> 
> 标签：ruby, rspec, sinatra, travis-ci

我正在编写一些规范来涵盖我的 HTML 助手

```
describe Sinatra::Helpers::HTML do
  describe 'tag' do
    it 'should retun selfclosed tag' do
      Helpers.tag(:br, {}, true).should == '<br />'
    end

    it 'should have valid attributes' do
      Helpers.tag(:div, :class => 'test').should include("class='test'")
    end

    it 'should contain value returned from block' do
      tag = Helpers.tag(:div) { 'Block value' }
      tag.should include('Block value')
    end
  end

  describe 'stylesheet_tag' do
    it 'should return link tag' do
      Helpers.stylesheet_tag('test').should include('link')
    end

    it 'should contain path to asset' do

    end
  end
end 
```

当我在本地机器上运行它时一切都很好，一切都通过了。但是在推送到 GitHub 存储库之后，Travis 失败并写入`Object::Sinatra`未初始化（[链接](http://travis-ci.org/#!/orodruin/orodruin/jobs/2248831)），我不知道为什么。

`spec_helper.rb`看起来：

```
ENV['RACK_ENV'] = "test"

require 'simplecov'
SimpleCov.start
require File.join(File.dirname(__FILE__), '..', 'boot')

require 'rspec'
require 'capybara/rspec'
require 'rack/test'
require 'factory_girl'

FactoryGirl.find_definitions

Capybara.app = Orodruin.rack

RSpec.configure do |config|
  config.include Rack::Test::Methods

  config.after(:each) do
    MongoMapper.database.collections.each do |collection|
      collection.remove unless collection.name.match(/^system\./)
    end
  end
end

class Helpers
  extend(*Sinatra::Base.included_modules.map(&:to_s).grep(/Helpers/).map(&:constantize))
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:21:12.450

因为[http://travis-ci.org/#!/orodruin/orodruin/jobs/2248831/L73](http://travis-ci.org/#!/orodruin/orodruin/jobs/2248831/L73)没有使用 bundle exec。

它上面的“bundle exec rake”行似乎没有做任何事情。

您需要在该行前面加上 bundle exec。

我在您的代码中看不到该行，但它可能在您的一个 gem 或 Travis 服务中硬编码。

真正的问题是当 Travis 运行规范时找不到 sinatra gem。这是因为 travis 正在使用 RVM gemset，而您可能正在使用“全局”gemset。

结果是`ruby -s rspec ...`没有在 gem bundle 环境中运行，也没有加载 Sinatra。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T13:06:35.407

我忘了`require 'spec_helper'`在我的规范文件上添加。

# java - php的array_multisort函数在java中等效

> ID：12140813
> 
> 赞同：1
> 
> 时间：2012-08-27T11:05:52.633
> 
> 标签：java, php, arrays

我在 java中寻找与[***php 的 array_multisort*等效的东西。**](http://www.php.net/manual/en/function.array-multisort.php)

```
//array 1
ar1 = array(10, 100, 100, 0);
//array 2
ar2 = array(1, 3, 2, 4);
//calling the function
//this will sort the array at first based one the first array and then based on the    
//second array so these two array are related
array_multisort(ar1, ar2);

//resultant 1st array
array(4) {
[0]=> int(0)
[1]=> int(10)
[2]=> int(100)
[3]=> int(100)  
}

//resultant 2nd array
//this array has been sorted based on the first array at first

array(4) {
[0]=> int(4) // this is associative element of 0 in the first array 
[1]=> int(1) //this is associative element of 10 in the first array 
[2]=> int(2) //this is associative element of  1st 100 from the last in the first array 
             //as there are two 100's , and last one's associative value in the second
             //array is smaller it will come first   
[3]=> int(3)
} 
```

***我如何使用内置的东西***来实现这个结果，我知道如何使用***自定义代码***来实现它。

注意***请访问**[*这个链接*](http://www.php.net/manual/en/function.array-multisort.php)****在回答问题之前，因为这解释了该功能应该如何工作*****

 *** * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T13:31:23.610

这有点复杂，没有 Java 标准 API 就无法完成。因此，我回收了一个快速排序实现并使其适用于多个数组。基本上，当元素被快速排序的分区交换时，它会交换元素。

干得好：

```
 /**
   * Multi-sorts the given arrays with the quicksort algorithm. It assumes that
   * all arrays have the same sizes and it sorts on the first dimension of these
   * arrays. If the given arrays are null or empty, it will do nothing, if just
   * a single array was passed it will sort it via {@link Arrays} sort;
   */
  public static void multiQuickSort(int[]... arrays) {
    multiQuickSort(0, arrays);
  }

  /**
   * Multi-sorts the given arrays with the quicksort algorithm. It assumes that
   * all arrays have the same sizes and it sorts on the given dimension index
   * (starts with 0) of these arrays. If the given arrays are null or empty, it
   * will do nothing, if just a single array was passed it will sort it via
   * {@link Arrays} sort;
   */
  public static void multiQuickSort(int sortDimension, int[]... arrays) {
    // check if the lengths are equal, break if everything is empty
    if (arrays == null || arrays.length == 0) {
      return;
    }
    // if the array only has a single dimension, sort it and return
    if (arrays.length == 1) {
      Arrays.sort(arrays[0]);
      return;
    }
    // also return if the sort dimension is not in our array range
    if (sortDimension < 0 || sortDimension >= arrays.length) {
      return;
    }
    // check sizes
    int firstArrayLength = arrays[0].length;
    for (int i = 1; i < arrays.length; i++) {
      if (arrays[i] == null || firstArrayLength != arrays[i].length)
        return;
    }

    multiQuickSort(arrays, 0, firstArrayLength, sortDimension);
  }

  /**
   * Internal multi quicksort, doing the real algorithm.
   */
  private static void multiQuickSort(int[][] a, int offset, int length,
      int indexToSort) {
    if (offset < length) {
      int pivot = multiPartition(a, offset, length, indexToSort);
      multiQuickSort(a, offset, pivot, indexToSort);
      multiQuickSort(a, pivot + 1, length, indexToSort);
    }
  }

  /**
   * Partitions the given array in-place and uses the end element as pivot,
   * everything less than the pivot will be placed left and everything greater
   * will be placed right of the pivot. It returns the index of the pivot
   * element after partitioning. This is a multi way partitioning algorithm, you
   * have to provide a partition array index to know which is the array that
   * needs to be partitioned. The swap operations are applied on the other
   * elements as well.
   */
  private static int multiPartition(int[][] array, int start, int end,
      int partitionArrayIndex) {
    final int ending = end - 1;
    final int x = array[partitionArrayIndex][ending];
    int i = start - 1;
    for (int j = start; j < ending; j++) {
      if (array[partitionArrayIndex][j] <= x) {
        i++;
        for (int arrayIndex = 0; arrayIndex < array.length; arrayIndex++) {
          swap(array[arrayIndex], i, j);
        }
      }
    }
    i++;
    for (int arrayIndex = 0; arrayIndex < array.length; arrayIndex++) {
      swap(array[arrayIndex], i, ending);
    }

    return i;
  }
 /**
   * Swaps the given indices x with y in the array.
   */
  public static void swap(int[] array, int x, int y) {
    int tmpIndex = array[x];
    array[x] = array[y];
    array[y] = tmpIndex;
  } 
```

做了一个小测试用例来测试你对问题的输入：

```
@Test
  public void testMultiQuickSort() {
    int[] first = new int[] { 10, 100, 100, 0 };
    int[] second = new int[] { 1, 3, 2, 4 };
    int[] resFirst = new int[] { 0, 10, 100, 100 };
    int[] resSecond = new int[] { 4, 1, 2, 3 };

    ArrayUtils.multiQuickSort(first, second);

    for (int i = 0; i < first.length; i++) {
      assertEquals(resFirst[i], first[i]);
      assertEquals(resSecond[i], second[i]);
    }
  } 
```

似乎工作;）

顺便说一句，如果您需要它用于任意对象类型，请发表评论。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:55:35.073

~~多维数组只是数组的数组，因此遍历各个数组并对它们进行排序：~~

 ~~```
int[][] marr = // your multi-dimensional array here
for (int[] arr : marr) {
    Arrays.sort(arr);
} 
```~~ 

而且，如果出于任何可能的原因，您只想对第二维中的第一个数组进行排序，则可以这样做：

```
Arrays.sort(marr[0]); 
```

 ~~啊，现在我明白你想要什么了。如果您的元素（至少是第一个数组的元素）是唯一的，则可以通过 SortedMap 进行操作：

```
if(arr1.length!=arr2.length)throw new IllegalArgumentException();
SortedMap<Integer,Integer> map = new TreeMap<Integer, Integer>();
for (int i = 0; i < arr1.length; i++) {
    map.put(arr1[i],arr2[i]);
}
int ct = 0;
for (Entry<Integer, Integer> entry : map.entrySet()) {
    arr1[ct]=entry.getKey();arr2[ct]=entry.getValue();
    ct++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T15:09:58.433

看起来 Java 中没有为此目的的任何内置库函数/类。如果您也像我一样面临这个问题，那么到目前为止，[Thomas](https://stackoverflow.com/a/12142998/1426743)关于自定义代码的回答可以帮助您。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-27T11:13:12.240

实现比较器或使用算法冒泡排序

```
Arrays.sort(stringArray); it will sort only one array 
```

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2012-08-27T11:28:04.007

也许下面的代码会对你有所帮助。

你应该使用`Arrays.sort()`

### 例子：

```
import java.util.Arrays;

String [] stringArray = {"ab", "aB", "c", "0", "2", "1Ad", "a10"};

//order Ascending
Arrays.sort(stringArray);

//Descending
Arrays.sort(stringArray, Collections.reverseOrder()); 
```~~**

# fullcalendar - 在 Fullcalendar 中自定义时间段

> ID：12140814
> 
> 赞同：10
> 
> 时间：2012-08-27T11:05:56.420
> 
> 标签：fullcalendar

是否可以在 Fullcalendar 插件的日视图和周视图中自定义时间段，使其看起来像学校使用的时间表。

具体要求是：一个时段可以是 08:00 到 08:45，下一个时段可以是 08:45 到 09:00。甚至跳过 5 分钟：一个时段从 08:00 到 08:45，然后下一个时段从 08:50 开始。

最好在初始化日历时设置时间段，如事件。

我还没有找到任何方法来做到这一点。这里有人可以帮我解决这个问题，或者只是确认这是不可能的吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2015-12-20T15:24:15.493

对于那些仍在寻找它的人：

FullCalendar 项目有一个[拉取请求。](https://github.com/fullcalendar/fullcalendar/pull/238)它完全符合这个问题中描述的内容，并具有更多功能。（例如显示或隐藏结束时隙时间、时隙上的自定义 HTML 类、时隙上拖动事件的捕捉策略等）

由于组织原因，拉取请求已关闭，但在处理 GitHub[问题 #472](https://github.com/fullcalendar/fullcalendar/issues/472)时将利用它。

时隙拉取请求的屏幕截图：

[![截屏](../Images/58851ef4a31fb045c780b8c5672a28cb.png)](https://i.stack.imgur.com/zFxyX.png)

我希望这可以进一步帮助某人。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T13:37:09.033

我认为这对于 FullCalendar 的默认版本是不可能的。有一些选项`slotMinutes`可以让您自定义插槽的显示方式，但默认情况下 timeSlots 每小时显示一次。没有选项可以让您自定义该显示。

但是，您可以自定义代码 - 在[github](https://github.com/arshaw/fullcalendar)上 fork并更改您需要的内容。

# ruby-on-rails - 从 3.1.1 降级到 rails 2.3 [如何]

> ID：12140816
> 
> 赞同：0
> 
> 时间：2012-08-27T11:05:58.640
> 
> 标签：ruby-on-rails, ruby

我需要安装 redmine1.4 因为需要我的 rails version2.3，但我有 rails3 。如何降级我的 rails 版本 -> **Rails 2.3.14**。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:16:58.533

我不确定我得到这个问题。据我了解，您想安装需要 rails 2.3.x 但您安装了 rails 3 gem 的 Redmine。我不熟悉 redmine，但我认为它应该使用 bundler 并且简单`bundle install`应该可以解决问题。

如果没有，最简单的解决方案是卸载 rails 3 gem 并安装 rails 2.3.x gem。为此，您需要：

```
$ gem uninstall rails
$ gem install rails --version "2.3.14" 
```

但是，这可能会破坏您使用 rails 3.x 版本的其他应用程序。因此，我建议使用以下工具之一来管理 ruby​​ 版本并使用名为**gemsets**的功能：

*   [虚拟机](https://rvm.io/)
*   [rbenv](http://rbenv.org/)

# mysql - 查找表格中的所有起始字母

> ID：12140818
> 
> 赞同：1
> 
> 时间：2012-08-27T11:06:12.993
> 
> 标签：mysql, sql, database, postgresql

如何查找表行名称中的所有起始字母。

```
names
allan
brain
chris
chap
charlie
rosy
ram
dude

output
a
b
c
r
d 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T11:07:37.417

使用内置`SUBSTRING`函数和`DISTINCT`返回不同的结果（*不重复*）

```
SELECT DISTINCT LOWER(SUBSTRING(names, 1,1)) x
FROM t
ORDER BY x; 
```

**[MySQL：子串](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring)**

# [*SQLFiddle 演示*](http://sqlfiddle.com/#!1/f0e30/7)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-27T11:09:20.790

你可以这样做[`LEFT()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_left)

```
SELECT DISTINCT LOWER(LEFT(names,1)) tt
FROM myTable
ORDER BY tt; 
```

或者你也可以这样做[`SUBSTRING()`](http://dev.mysql.com/doc/refman/5.0/en/string-functions.html#function_substring)

```
SELECT DISTINCT LOWER(SUBSTRING(names, 1,1)) tt
FROM myTable
ORDER BY tt; 
```

# [*看到这个小提琴*](http://sqlfiddle.com/#!1/84bd0/7)

# c++ - 两个文件中同一函数/全局变量的不同声明

> ID：12140820
> 
> 赞同：6
> 
> 时间：2012-08-27T11:06:17.867
> 
> 标签：c++, c, function, global-variables, forward-declaration

在 C 和 C++ 的情况下，我对两个文件中相同函数和全局变量的不同声明有 2 个问题。

1.  **不同的函数声明**

    考虑以下代码片段：

    **文件_1.c**

    ```
    void foo(int a);

    int main(void)
    {
        foo('A');
    } 
    ```

    **文件_2.c**

    ```
    #include <stdio.h>

    void foo(char a)
    {
        printf("%c", a); //prints 'A' (gcc)
    } 
    ```

    正如我们所看到的，原型与位于 **file_2.c**中的定义不同，但是，该函数会打印预期值。

    如果涉及到 C++，由于`foo(int)`链接时未定义引用，上述程序无效。它可能是由其他函数签名的存在引起的 - 与 C 相比，其中函数名称不包含任何指示函数参数类型的额外字符。

    但是当涉及到 C 时，那又如何呢？由于具有相同名称的原型具有相同的签名，无论参数的数量及其类型如何，链接器都不会发出错误。但是这里执行了哪些类型转换？它看起来像这样：`'A'`-> `int`-> 回到`char`? 或者这种行为可能是未定义/实现定义的？

2.  **全局变量的不同声明**

    我们有两个文件和同一个全局变量的两个不同声明：

    **文件_1.c**

    ```
    #include <stdio.h>

    extern int a;

    int main(void)
    {
        printf("%d", a); //prints 65 (g++ and gcc)
    } 
    ```

    **文件_2.c**

    ```
    char a = 'A'; 
    ```

    在 C 和 C++ 中，输出都是 65。

    虽然我想知道这两个标准对这种情况的看法。

    在 C11 标准中，我发现了以下片段：

    > **J.5.11 多个外部定义** *（附件 J.5 通用扩展）*
    > 一个对象的标识符可能有多个外部定义，无论是否显式使用关键字 extern；如果定义不一致，或者不止一个被初始化，则行为未定义（6.9.2）。

    请注意，它指的是存在两个或多个定义，在我的代码中只有一个，所以我不确定这篇文章在这种情况下是否是一个很好的参考点......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-27T11:17:15.980

Q1。根据 C99 规范，第 6.5.2.2.9 节，这是 C 中未定义的行为：

> 如果函数定义的类型与表示被调用函数的表达式所指向的（表达式的）类型不兼容，则行为未定义。

表达式“指向”一个采用 的函数`int`，而该函数被定义为采用`char`。

Q2。变量的情况也是未定义的行为，因为您正在读取或分配`int`to/from `char`。假设 4 字节整数，这将访问超过有效内存位置的三个字节。您可以通过声明更多变量来测试它，如下所示：

```
char a = 'A';
char b = 'B';
char c = 'C';
char d = 'D'; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:21:08.363

这就是为什么您将声明放入标头中的原因，因此即使是 C 编译器也能发现问题。

1)

结果几乎是随机的。在您的情况下，“char”参数可能作为 int 传递（例如在寄存器中，甚至在堆栈上以保持对齐，或其他）。或者你很幸运因为字节顺序，它首先保持最低字节。

2)

由于字节顺序和一些添加的“0”字节来填充该段，这可能是一个幸运的结果。再次，不要依赖它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-30T06:07:36.510

正如你所知道的，我无意中在 C11 标准中找到了涵盖这两个问题的段落——它是 6.2.7.2：

> 所有引用相同对象或函数的声明都应具有兼容的类型；否则，行为未定义。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-27T12:09:35.580

C++ 中的重载函数之所以起作用，是因为编译器将每个唯一方法和参数列表组合编码为链接器的唯一名称。这种编码过程称为重整，逆过程称为反重整。

但是C中没有这样的东西。当编译器遇到当前模块中没有定义的符号（变量或函数名）时，它假定它是在其他模块中定义的，生成链接器符号表条目，并将其留给链接器处理。在这里我们没有参数检查。

如果这里没有类型转换。在 main 中，您向 foo 发送一个值。这是汇编代码：

```
movl    $65, (%esp)
call    foo 
```

并且 foo 通过将其从堆栈中取出来读取它。由于它的输入值定义为char，它将输入值存储在`al`寄存器中（一个字节）：

```
movb    %al, -4(%ebp) 
```

因此，对于大于 256 的给定输入，您将`a`在 foo 中看到变量，循环超过 256。

关于你的第二个问题，在 C 中初始化变量和函数的符号被定义为强符号，不允许使用多个强符号，但我不确定 C++ 是否属于这种情况。

# google-chrome - 使用 Watir-Webdriver 时 Chrome 中的默认配置文件名称？

> ID：12140822
> 
> 赞同：3
> 
> 时间：2012-08-27T11:06:34.943
> 
> 标签：google-chrome, watir, profile, watir-webdriver, selenium-chromedriver

我下载了 Chromedriver，然后将其解压缩到正确的位置 (usr/bin)，但我不知道 Chrome (Chromium) 浏览器的默认配置文件名称是什么，因此此行会引发错误消息：

```
browser = Watir::Browser.new :chrome, :profile => "default" 
```

我尝试了“当前”或我的用户名而不是“默认”，但它们都不起作用。如何使用我的默认配置文件启动 Chrome？因为我不想在没有通常的偏好和保存的密码、cookie 等的情况下开始新的配置文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T17:45:17.210

我使用 chrome 配置文件选项来处理下载文件

```
download_directory = "/path/youwant/files/dowloaded/to"
profile = Selenium::WebDriver::Chrome::Profile.new 
profile['download.prompt_for_download'] = false
profile['download.default_directory'] = download_directory
profile['browser.helperApps.neverAsk.saveToDisk'] = "text/csv,application/pdf"
b = Watir::Browser.new :chrome,  :profile => profile 
```

有关 chromedriver 配置文件选项的更多信息，请参见此处 [http://src.chromium.org/svn/trunk/src/chrome/common/pref_names.cc](http://src.chromium.org/svn/trunk/src/chrome/common/pref_names.cc)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-26T20:02:16.410

`chrome://version/`您可以在url看到您的默认路径

就我而言，它是`/Users/mikhail/Library/Application Support/Google/Chrome/Default`

由于某种原因，正确的路径将是这个字符串，没有路径的最后一个“/默认”部分：

```
require 'watir-webdriver'

username = 'mikhail'
switches = %W[--user-data-dir=/Users/#{username}/Library/Application\ Support/Google/Chrome/]

browser = Watir::Browser.new :chrome, switches: switches
browser.goto 'google.com' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:23:34.757

我不确定 Chrome 是否有该选项（就像 Firefox 一样）。[我在http://watirwebdriver.com/chrome/](http://watirwebdriver.com/chrome/)上找不到它

# android - 手机唤醒时未送达的AlarmManager重复闹钟怎么办？

> ID：12140824
> 
> 赞同：5
> 
> 时间：2012-08-27T11:06:35.873
> 
> 标签：android, alarmmanager

例如，如果我们安排一个不精确的重复警报`AlarmManager.setInexactRepeating`每隔一小时触发一次，如果手机待机 4 小时然后被唤醒，会发生什么情况？系统是连续发出 4 个警报`PendingIntent`还是只发出一个警报？

**编辑：**更加注意阅读文档，`set(int, long, android.app.PendingIntent)`方法文档说：*警报意图交付时带有一个称为 int 类型的额外数据，该数据`Intent.EXTRA_ALARM_COUNT`表明有多少过去的警报事件已累积到此意图广播中。由于手机处于睡眠状态而导致未发送的重复警报在发送时的计数可能大于 1。* 因此，当手机退出待机状态时，只会发送一个警报，其中包含未接警报的数量的额外意图。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T14:03:39.973

仔细阅读文档，`set(int, long, android.app.PendingIntent)`方法文档说：*警报意图交付时带有一个称为 int 类型的额外数据，该数据`Intent.EXTRA_ALARM_COUNT`表明有多少过去的警报事件已累积到此意图广播中。由于手机处于睡眠状态而导致未发送的重复警报在发送时的计数可能大于 1。* 因此，当手机脱离待机状态时，只会发送一个警报，其中包含未接警报的数量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:11:09.927

这取决于您是否使用这样的待处理意图

```
 PendingIntent pending = PendingIntent.getBroadcast(context, 0, i,
            PendingIntent.FLAG_CANCEL_CURRENT); 
```

它不会触发 4 次，因为它取消了先前的待处理意图

# html - CSS Line-height，我应该需要 100%（小横幅结构）

> ID：12140832
> 
> 赞同：0
> 
> 时间：2012-08-27T11:07:27.110
> 
> 标签：html, css

我想得到以下信息：

```
 BANNER IMAGE
                  BANNER IMAGE
Menu left         BANNER IMAGE             Menu right 
```

过去用桌子很容易到达。

```
<div>
 <div style="float: left; width: 20%;">menu left</div>
 <div style="float: left; width: 60%;">picture</div>
 <div style="float: left; width: 20%;">menu right</div>
</div> 
```

中间的图片设置了实际高度。我试图使用 line-height 属性，当我给 px 时，它工作正常，但这次我需要 100%。设置高度：100% 不会让我对齐文本中间、底部等。无论如何，我需要这些宽度吗？有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:18:10.690

我在这里创建了一个小提琴：http: [//jsfiddle.net/jjqS5/1/](http://jsfiddle.net/jjqS5/1/)

你想要那样的东西吗？

# c# - 下载大文件，保存在数据库中

> ID：12140836
> 
> 赞同：2
> 
> 时间：2012-08-27T11:07:37.180
> 
> 标签：c#, asp.net, exception-handling, download, ashx

我们有很多文件，在我们的 SQL Server 数据库中保存为二进制文件。我制作了一个 .ashx 文件，将这些文件传递给用户。不幸的是，当文件变得相当大时，它会失败，并出现以下错误：

> 算术运算中的上溢或下溢

我假设它内存不足，因为我将二进制文件加载到字节 [] 中。

所以，我的问题是，当它来自数据库表时，我怎样才能制作这个功能，分块读取（也许？）？似乎 Response.TransmitFile() 也是一个不错的选择，但同样，这将如何与数据库一起使用？

下面代码中的 DB.GetReposFile() 从数据库中获取文件。条目有多个字段：文件名、内容类型、日期戳和作为 varbinary 的文件内容。

这是我的功能，交付文件：

```
context.Response.Clear();
try
{
    if (!String.IsNullOrEmpty(context.Request.QueryString["id"]))
    {
        int id = Int32.Parse(context.Request.QueryString["id"]);
        DataTable dtbl = DB.GetReposFile(id);
        string FileName = dtbl.Rows[0]["FileName"].ToString();
        string Extension = FileName.Substring(FileName.LastIndexOf('.')).ToLower();
        context.Response.ContentType = ReturnExtension(Extension);
        context.Response.AddHeader("Content-Disposition", "attachment; filename=" + FileName);

        byte[] buffer = (byte[])dtbl.Rows[0]["FileContent"];
        context.Response.OutputStream.Write(buffer, 0, buffer.Length);
    }
    else
    {
        context.Response.ContentType = "text/html";
        context.Response.Write("<p>Need a valid id</p>");
    }
}
catch (Exception ex)
{
    context.Response.ContentType = "text/html";
    context.Response.Write("<p>" + ex.ToString() + "</p>");
} 
```

**更新：** 我最终得到的功能是下面列出的功能。正如 Tim 所提到的，DB.GetReposFileSize() 只是获取内容 Datalength。我在原始代码中调用了这个函数，而不是这两行：

```
byte[] buffer = (byte[])dtbl.Rows[0]["FileContent"];
context.Response.OutputStream.Write(buffer, 0, buffer.Length); 
```

新的下载功能：

```
private void GetFileInChunks(HttpContext context, int ID)
    {
        //string path = @"c:\somefile.txt";
        //FileInfo file = new FileInfo(path);
        int len = DB.GetReposFileSize(ID);
        context.Response.AppendHeader("content-length", len.ToString());
        context.Response.Buffer = false;

        //Stream outStream = (Stream)context.Response.OutputStream;

        SqlConnection conn = null;
        string strSQL = "select FileContent from LM_FileUploads where ID=@ID";
        try
        {
            DB.OpenDB(ref conn, DB.DatabaseConnection.PDM);
            SqlCommand cmd = new SqlCommand(strSQL, conn);
            cmd.Parameters.AddWithValue("@ID", ID);

            SqlDataReader reader = cmd.ExecuteReader(CommandBehavior.SequentialAccess);
            reader.Read();
            byte[] buffer = new byte[1024];
            int bytes;
            long offset = 0;

            while ((bytes = (int)reader.GetBytes(0, offset, buffer, 0, buffer.Length)) > 0)
            {
                // TODO: do something with `bytes` bytes from `buffer`
                context.Response.OutputStream.Write(buffer, 0, buffer.Length);

                offset += bytes;
            }
        }

        catch (Exception ex)
        {
            throw ex;
        }
        finally
        {
            DB.CloseDB(ref conn);
        }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:23:38.300

您可以使用它[`DATALENGTH`](http://msdn.microsoft.com/en-us/library/ms173486.aspx)来获取大小`VARBINARY`并将其流式传输，例如使用 a`SqldataReader`和它的[`Read`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.read.aspx)- 或 -[`ReadBytes`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqldatareader.getbytes)方法。

查看此答案以查看实现：[Best way to stream files in ASP.NET](https://stackoverflow.com/questions/608480/best-way-to-stream-files-in-asp-net/609151#609151)

# matrix - 计算矩阵的行列式

> ID：12140837
> 
> 赞同：0
> 
> 时间：2012-08-27T11:07:44.967
> 
> 标签：matrix, determinants

我很惊讶为什么下面的算法告诉我，那个矩阵是不可逆的，我有输入单位矩阵，这是我的计算行列式的代码

```
float determinant(float a[5][5],float k)
{
float s=1,det=0,b[5][5];
    int i,j,m,n,c;
    if(k==1){
        return (a[0][0]);
    }
    else
    {
        det=0;
        for(c=0;c<k;c++)

            m=0;
            n=0;
            for(i=0;i<k;i++)
            {
                for(j=0;j<k;j++){
                    b[i][j]=0;
                    if(i!=0 && j!=c)
                    {
                        b[m][n]=a[i][j];
                        if(n<(k-2))
                            n=n+1;

                        else{
n=0;
                        m++;

                    }

        }
    }

            }
            det=det+s*(a[0][c])*determinant(b,k-1);
            s=-1*s;
        }

   return det;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:17:44.497

在尝试修复您可怕的格式时，我意识到您可能缺少第一个`for`循环的大括号（带有`c`）。Protip：正确格式化您的代码，并且您不会犯如此简单的错误。

# facebook - Facebook Like 按钮：统一 URL 和 Facebook 页面

> ID：12140842
> 
> 赞同：0
> 
> 时间：2012-08-27T11:08:31.160
> 
> 标签：facebook, facebook-graph-api, facebook-like

在[Facebook 文档](http://developers.facebook.com/docs/reference/plugins/like/)中它说：

```
Can I link the Like button to my Facebook page?
Yes. Simply specify the URL of your Facebook page in
the href parameter of the button. 
```

我的问题是我不希望 Facebook 页面成为“喜欢”的目标。所以目前，我网站上的点赞按钮将点赞归因于根域“http://example.com/”，这正是我想要的。

这比 facebook 页面“http://facebook.com/examplecompage”获得了更多的赞

有没有办法让我的 facebook 页面上的点赞有助于根域点赞？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T00:24:18.243

这是不可能的，因为它们被视为 2 个不同的对象。
为了澄清起见，Facebook 开发人员网站上的文档指的是您创建的要在您的网站上显示的“赞”按钮，而不是您在创建页面时自动在 Facebook 上获得的“赞”按钮。

# php - 如何使用 CMake 构建共享库，从这个（非工作）Makefile 示例开始

> ID：12140843
> 
> 赞同：0
> 
> 时间：2012-08-27T11:08:41.567
> 
> 标签：php, c++, makefile, cmake, swig

我正在手动编写一个 Makefile 以使用 SWIG 创建一个 PHP 扩展库。我有以下目录结构：

```
wrappers/   # SWIG generated C++ wrappers and header
objects/    # I want to place my object files here
bin/        # I want to place my executable (shared lib) here 
```

这就是我的 Makefile 的样子：

```
CC=g++
CFLAGS=-fPIC -c -Wall
INCLUDES=`php-config --includes` -Iwrappers
LDFLAGS=-shared
SOURCES=foo_wrap.cpp \
        foobar_wrap.cpp  \
        foofoobar_wrap.cpp   \
        foobarbar_wrap.cpp

OBJECTS=$(SOURCES:.cpp=.o)
EXECUTABLE=php_foobarlib.so

all: wrappers/$(SOURCES) bin/$(EXECUTABLE)

$(EXECUTABLE): $(OBJECTS) 
        $(CC) $(LDFLAGS) $(OBJECTS) -o objects/$(input)

.cpp.o:
        $(CC) $(CFLAGS) $< -o objects/$(input)

clean:
    rm -rf *o $(EXECUTABLE) 
```

当我在命令行运行 make 时，出现以下错误：

> make: ***没有规则将目标`foobar_wrap.cpp', needed by`全部设为“。停止。

我想改用 CMake 构建共享库。考虑到项目的目录结构，有人可以发布我需要创建的 CMakeLists 文件的大纲来构建共享库 - 即我希望构建的对象和二进制文件去哪里。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:14:25.200

`wrappers/$(SOURCES)`扩展为废话，仅在第一个文件名前加上路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:54:03.277

您可以在`Makefile`以下内容中指定：

```
SOURCES=wrappers/foo_wrap.cpp wrappers/fo. .... and so on, 
```

然后`wrappers/`从`all:`

正如您所观察到的，这将在`wrappers`目录中创建目标文件。为了避免这种情况，请查看[gcc/g++ 选项将所有对象文件放入单独的目录](https://stackoverflow.com/questions/1814270/gcc-g-option-to-place-all-object-files-into-separate-directory)中，以解决此问题。

# android - java.lang.RuntimeException：WakeLock 未锁定 C2DM_LIB

> ID：12140844
> 
> 赞同：60
> 
> 时间：2012-08-27T11:08:44.910
> 
> 标签：android, android-service, android-c2dm, google-cloud-messaging

我已在 google play 上上传了我的应用程序，但用户报告了以下异常

**java.lang.RuntimeException: WakeLock under-locked C2DM_LIB**. This exception occurs when I try to release the `WakeLock`. Can anyone tell what could be the problem.

* * *

## 回答 #1

> 赞同：188
> 
> 时间：2013-02-19T03:32:01.280

你没有发布你的代码，所以我不知道你是否已经完成了我在这里建议的操作，但我也有这个异常，我添加的所有修复它都是一个简单的“如果”以**确保 WakeLock在试图释放它之前实际上是被持有的**。

我在 onPause 中添加的只是这个“if”语句（在“release()”之前）：

```
if (mWakeLock.isHeld())
    mWakeLock.release(); 
```

异常消失了。

* * *

## 回答 #2

> 赞同：64
> 
> 时间：2012-08-27T12:30:57.190

我也在新的 GCM 库中发现了同样的异常。实际上旧的 C2DM Android 库有同样的错误，同样的崩溃，谷歌还没有修复它。从我们的统计数据中可以看出，大约 0.1% 的用户经历了这次崩溃。

我的调查表明问题在于`WakeLock`GCM 库中网络的错误释放，当库尝试释放`WakeLock`不包含任何内容时（内部锁计数器变为负数）。

我对简单的解决方案很满意——只要捕获这个异常，什么都不做，因为我们不需要做任何额外的工作，然后我们的唤醒锁就什么也不做。

为此，您需要在项目中导入 GCM 库源，而不是已经编译的`.jar`文件。*您可以在“ $Android_SDK_Home$/extras/google/gcm/gcm-client/src* ”文件夹下找到 GCM 库源（您需要先使用 Android SDK Manager 下载它）。

下一节公开`GCMBaseIntentService`课，找线

```
sWakeLock.release(); 
```

并用try-catch包围它。

它应该如下所示：

```
 synchronized (LOCK) {
        // sanity check for null as this is a public method
        if (sWakeLock != null) {
            Log.v(TAG, "Releasing wakelock");
            try {
                sWakeLock.release();
            } catch (Throwable th) {
                // ignoring this exception, probably wakeLock was already released
            }
        } else {
            // should never happen during normal workflow
            Log.e(TAG, "Wakelock reference is null");
        }
    } 
```

**更新：** 或者，正如@fasti 在[他的回答](https://stackoverflow.com/a/14949367/810368)中所建议的那样，您可以使用`mWakeLock.isHeld()`方法来检查唤醒锁是否实际持有此锁。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-05T10:39:06.470

尽管 isHeld() 解决方案看起来更好，但它实际上可能会失败——因为它不是原子的（即不是线程安全的）。如果您有多个线程可能会释放锁，那么在检查 (isHeld) 和调用释放另一个线程之间可能会释放锁......然后您就会失败。

通过使用 try/catch，您可以伪装错误，但以线程安全的方式。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-07-12T17:33:30.927

只要我不重新初始化唤醒锁并在新对象上调用获取，我就没有这个问题。您应该只保留一个 wakeLock 实例（因此将其设为字段变量）。然后你知道你总是释放那个唤醒锁。

所以....

```
 if (mWakeLock == null) {
        PowerManager pm = (PowerManager) getSystemService(Context.POWER_SERVICE);
        mWakeLock = pm.newWakeLock(PowerManager.FULL_WAKE_LOCK | PowerManager.ACQUIRE_CAUSES_WAKEUP
                | PowerManager.ON_AFTER_RELEASE, "MyWakeLock");
    }

try{
        mWakeLock.release();//always release before acquiring for safety just in case
    }
    catch(Exception e){
        //probably already released
        Log.e(TAG, e.getMessage());
    }
    mWakeLock.acquire(); 
```

# oracle - 为什么 Grails 使用 H2 而不是 Oracle？

> ID：12140858
> 
> 赞同：0
> 
> 时间：2012-08-27T11:09:24.907
> 
> 标签：oracle, grails, controller, h2

我花了很多时间来解决这个问题。我是 GRAILS 和 GROOVY 的初学者。我有名为“tms_dev”的旧版 Oracle 数据库架构。此模式有一些表（例如 checktypes 表）。我也有域类 Checktype 和 ChecktypesController 类 - 由 GRAILS 生成的控制器。

这个类有列表方法：

def列表（整数最大值）{

```
params.max = Math.min(max ?: 10, 100)
[checktypesInstanceList: Checktypes.list(params), checktypesInstanceTotal: Checktypes.count()] 
```

}

我还配置了 Datasource.groovy 文件以使用具有此类内容的 oracle

```
dataSource {
    pooled = true
    driverClassName = "oracle.jdbc.OracleDriver"
    dialect = "org.hibernate.dialect.Oracle10gDialect"
    username = "TMS_DEV"
    password = "password"
}
hibernate {
    cache.use_second_level_cache = true
    cache.use_query_cache = false
    cache.region.factory_class = 'net.sf.ehcache.hibernate.EhCacheRegionFactory'
}
development {
        dataSource {
            dbCreate = "update" // one of 'create', 'create-drop','update'
            url = "jdbc:oracle:thin:@server_name:1522:sid_name"
        }
    }
production {
        dataSource {
            dbCreate = "update" // one of 'create', 'create-drop','update'
            url = "jdbc:oracle:thin:@server_name:1522:sid_name"
        }
    } 
```

我运行我的应用程序。然后单击主页上的“tst7.ChecktypesController”参考。

结果我有例外：

```
| Error 2012-08-27 14:41:03,469 [http-bio-8080-exec-9] ERROR util.JDBCExceptionReporter  - Table "CHECKTYPES" not found; SQL statement:
select * from ( select this_.CHECKTYPECODE as CHECKTYP1_21_0_, this_.active as active21_0_, this_.availabilitychecktype as availabi3_21_0_, this_.checktypecode as checktyp1_21_0_, this_.checktypedescr as checktyp4_21_0_, this_.TARGETTYPECODE as TARGETTY5_21_0_ from CHECKTYPES this_ ) where rownum <= ? [42102-164]
| Error 2012-08-27 14:41:03,547 [http-bio-8080-exec-9] ERROR errors.GrailsExceptionResolver  - JdbcSQLException occurred when processing request: [GET] /Tst7/checktypes/list
Table "CHECKTYPES" not found; SQL statement:
select * from ( select this_.CHECKTYPECODE as CHECKTYP1_21_0_, this_.active as active21_0_, this_.availabilitychecktype as availabi3_21_0_, this_.checktypecode as checktyp1_21_0_, this_.checktypedescr as checktyp4_21_0_, this_.TARGETTYPECODE as TARGETTY5_21_0_ from CHECKTYPES this_ ) where rownum <= ? [42102-164]. Stacktrace follows:
Message: Table "CHECKTYPES" not found; SQL statement:
select * from ( select this_.CHECKTYPECODE as CHECKTYP1_21_0_, this_.active as active21_0_, this_.availabilitychecktype as availabi3_21_0_, this_.checktypecode as checktyp1_21_0_, this_.checktypedescr as checktyp4_21_0_, this_.TARGETTYPECODE as TARGETTY5_21_0_ from CHECKTYPES this_ ) where rownum <= ? [42102-164]
    Line | Method
->>  329 | getJdbcSQLException       in org.h2.message.DbException
- - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - - 
|    169 | get                       in     ''
|    146 | get . . . . . . . . . . . in     ''
|   4753 | readTableOrView           in org.h2.command.Parser
|   1080 | readTableFilter . . . . . in     ''
|   1686 | parseSelectSimpleFromPart in     ''
|   1793 | parseSelectSimple . . . . in     ''
|   1680 | parseSelectSub            in     ''
|   1523 | parseSelectUnion . . . .  in     ''
|   1022 | readTableFilter           in     ''
|   1686 | parseSelectSimpleFromPart in     ''
|   1793 | parseSelectSimple         in     ''
|   1680 | parseSelectSub . . . . .  in     ''
|   1523 | parseSelectUnion          in     ''
|   1511 | parseSelect . . . . . . . in     ''
|    405 | parsePrepared             in     ''
|    279 | parse . . . . . . . . . . in     ''
|    251 | parse                     in     ''
|    217 | prepareCommand . . . . .  in     ''
|    415 | prepareLocal              in org.h2.engine.Session
|    364 | prepareCommand . . . . .  in     ''
|   1121 | prepareCommand            in org.h2.jdbc.JdbcConnection
|     71 | <init> . . . . . . . . .  in org.h2.jdbc.JdbcPreparedStatement
|    267 | prepareStatement          in org.h2.jdbc.JdbcConnection
|    281 | prepareStatement . . . .  in org.apache.commons.dbcp.DelegatingConnection
|    313 | prepareStatement          in org.apache.commons.dbcp.PoolingDataSource$PoolGuardConnectionWrapper
|     55 | <init> . . . . . . . . .  in grails.orm.PagedResultList
|     45 | list                      in tst7.ChecktypesController
|    195 | doFilter . . . . . . . .  in grails.plugin.cache.web.filter.PageFragmentCachingFilter
|     63 | doFilter                  in grails.plugin.cache.web.filter.AbstractFilter
|   1110 | runWorker . . . . . . . . in java.util.concurrent.ThreadPoolExecutor
|    603 | run                       in java.util.concurrent.ThreadPoolExecutor$Worker
^    722 | run . . . . . . . . . . . in java.lang.Thread 
```

然后我尝试在列表方法中创建直接 Oracle 连接

```
def list(Integer max) {

        def sql = Sql.newInstance("jdbc:oracle:thin:@server_name:1522:instance_name", "TMS_DEV",
            "password", "oracle.jdbc.driver.OracleDriver")
        sql.eachRow("select * from Dbdrivers"){
            println it.dbdrivercode
        }
} 
```

比我运行应用程序。结果 println it.dbdrivercode - 工作正常（连接工作！！！）。

这个问题最奇怪的是异常是由h2（内存数据库中的H2）类（org.h2.jdbc.JdbcConnection，org.h2.jdbc.JdbcConnection等）产生的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-28T23:28:28.213

您默认使用 H2 驱动程序，因为在*环境块之外时，您的**生产*和*开发*块被忽略。

 ** * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T17:47:43.210

听起来像应用程序缓存问题。在运行应用程序之前尝试运行 grails clean。*

# python - 在 python 中导入 hid 导致错误“hid.so：未定义符号：libusb_open”

> ID：12140859
> 
> 赞同：1
> 
> 时间：2012-08-27T11:10:12.257
> 
> 标签：python, usb, cython, libusb

我正在尝试安装 cython-hidapi 以在我的 Ubuntu 12.04 上读取 USB。我已按照[https://github.com/gbishop/cython-hidapi](https://github.com/gbishop/cython-hidapi)的说明安装了以下版本：

*   lib-usb == 1.0.9
*   hidapi == 0.7.0
*   赛通 == 0.16
*   蟒蛇== 2.7
*   cython-hidapi == 最新结帐

当我从安装中执行测试部分（python > import hid）时，我收到以下错误：

```
Python 2.7.3 (default, Aug  1 2012, 05:14:39) 
[GCC 4.6.3] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import hid
Traceback (most recent call last):
File "<stdin>", line 1, in <module>
ImportError: /usr/local/lib/python2.7/dist-packages/hid.so: undefined symbol: libusb_open 
```

有谁知道我为什么会收到此错误以及如何检查/处理它？

谢谢！伍特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-26T06:37:08.103

在过去的一周里，我一直在努力解决这个完全相同的问题。幸运的是，我的一位非常了解 Cython 世界的朋友能够提供帮助。您需要更改 setup.py 中的 setup(...) 函数，如下所示：

```
setup(
    cmdclass = {'build_ext': build_ext},
    ext_modules = [Extension("hid", ["hid.pyx", "hid-libusb.c"],
                  libraries=["usb-1.0", "udev", "rt"])]
) 
```

我不知道其他发行版是否会有细微的差异，但这已经在 Ubuntu 12.04 和 Debian 0.1.12 上进行了测试。使用回复原始帖子的建议来确定正确的链接器标志 (LDFLAGS) 和`libraries=`行。

[拉取请求](https://github.com/gbishop/cython-hidapi/pull/4)已提交给维护者。你也可以从我的[叉子](https://github.com/parautenbach/cython-hidapi)上找零钱。

# jquery - 第二部分元素移动到第二行

> ID：12140868
> 
> 赞同：0
> 
> 时间：2012-08-27T11:10:54.950
> 
> 标签：jquery, html, css

我有两个`section`元素，例如`<section class="first"></section><section class="rightarrow"></section>`. 在第一个部分元素中，我有菜单，在第二个部分中，有一个指向右侧的箭头。该箭头位于第一个截面元素的右上角，并且第一个截面元素显示设置为无。当我单击箭头时，菜单出现并滑向右侧（有效），但问题是当第一部分元素显示设置为阻止时，箭头转到下一行。

有人可以给我一些例子，我怎样才能将箭头保留在第一个元素的右侧？

这是我的CSS

```
.first {
position: relative;
border-right: 1px solid #666;
display: none;
left: -370px;
float: left;
}

.rightarrow {
float: left;
display: inline-block;
position: relative;
margin-right: 1%;
margin-top: 2%;
figure {
    width: 31px; height: 80px;
    background: url(../../images/rightarrow.png) no-repeat;
    cursor: pointer;
    //left: 0;
}
} 
```

这是我的html

```
<section class="column three first">
        <section class="row top topfirst">
            <span class="user">Helsinki, Suomi</span>
            <span class="comments user">Vaihda sijaintia</span>
            <section class="clear"></section>
        </section>
        <section class="row top topsecond">
            <figure>
                <img src="assets/images/user.png" />
            </figure>
            <span class="user">Matti Meikalainen</span>
            <span class="comments user">Kirjaudu ulos</span>
            <p><input type="text" class="searchbox" placeholder="Hae" /></p>
        </section>
        <section class="row topthird">
            Etusivu
        </section>
        <nav class="row accordion">
            <ul class="menu">
                <li>
                    <a href="#">Uutiset</a>
                    <figure class="down"></figure>
                    <section class="clear"></section>
                    <ul class="inside">
                        <li><a href="">Fringilla Condimentum</a></li>
                        <li><a href="">Lorem</a></li>
                        <li><a href="">Fringillau</a></li>
                        <li><a href="">Curabitur</a></li>
                        <li><a href="">Mollis</a></li>
                        <li><a href="">Ipsum</a></li>
                        <li><a href="">Lorem</a></li>
                        <li><a href="">Fringillau</a></li>
                        <li><a href="">Curabitur</a></li>
                        <li><a href="">Mollis</a></li>
                        <li><a href="">Ipsum</a></li>
                    </ul>
                </li>
                <li><a href="">Foorumi</a></li>
                <li><a href="">Kauppa</a></li>
                <li><a href="">Messut</a></li>
                <li>
                    <a href="">Asiakaspalvelu</a>
                    <figure class="down"></figure>
                    <ul class="inside">
                        <li><a href="">Tilaa lehti</a></li>
                        <li><a href="">Muutos tilaukseen</a></li>
                        <li><a href="">Lähetä uutisvinkki</a></li>
                        <li><a href="">Anna palautetta</a></li>
                    </ul>
                </li>
                <li><a href="">Nakoislehti</a></li>
                <li><a href="">Nae meidat</a></li>
            </ul>
        </nav>
    </section>
    <section class="rightarrow">
        <figure>
        </figure>
    </section> 
```

这是我的js

```
$('.rightarrow').on('click', function () {

    $('.rightarrow').animate({'margin-left': '366px'}, 1000);
    /*
    $('.first').animate({'left': '0px'}, 100, function () {

    });*/
    $('.second').animate({'margin-left': '10px'}, 1000, function () {

    });

    $('.first').css('display', 'block').animate({'left': '0px'}, 1000); 
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T12:20:08.800

改变你的

```
$('.rightarrow').animate({'margin-left': '366px'}, 1000); 
```

至

```
$('.rightarrow').css({'margin-left': '366px','position':'absolute','top':'20px';}); 
```

将帮助您实现您的目标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:29:19.340

`display: block`意思是“除了我在同一行”，所以你不能使用它。

将箭头元素创建为子元素`.first`（即在 DIV 内部）。而不是完全隐藏它，只显示最右边的部分（包含箭头）。单击按钮时，您可以将元素移动到视图中。

# windows-phone-7 - 用作 ItemsControl ItemsPanel 时绑定 Canvas X,Y

> ID：12140869
> 
> 赞同：0
> 
> 时间：2012-08-27T11:10:57.930
> 
> 标签：windows-phone-7, canvas

我有一个画布，我很想在指定的 XY 位置绑定一些点。但是，我无法使用 ItemsControl 实现这一点。我找到了一些解决方案，但我猜它们不适用于 Windows Phone。

我使用的 XAML 是：

```
<ItemsControl ItemsSource="{Binding Path=Nodes}">
    <ItemsControl.ItemsPanel>
        <ItemsPanelTemplate>
            <Canvas />
        </ItemsPanelTemplate>
    </ItemsControl.ItemsPanel>
    <ItemsControl.ItemContainerStyle>
        <Style TargetType="ContentPresenter">
            <Setter Property="Canvas.Left" Value="{Binding Path=XPos}" />
            <Setter Property="Canvas.Top" Value="{Binding Path=YPos}" />
        </Style>
    </ItemsControl.ItemContainerStyle>
</ItemsControl> 
```

我得到：“成员“ItemContainerStyle”无法识别或无法访问”

如何以其他方式进行这种绑定？我有对象的名称和 X/Y 值，我想绑定的是某种图钉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-30T11:45:10.760

我遇到了同样的问题，但使用 TriggerAction 解决了它。`System.Windows.Interactivity`如果您有[Blend SDK](http://www.microsoft.com/en-us/download/details.aspx?id=3062)，您可以使用。该dll位于

```
c:\Program Files\Microsoft SDKs\Expression\Blend\Silverlight\v4.0\Libraries\
System.Windows.Interactivity.dll` 
```

然后，通过使用您以前的 xaml 代码，我可以这样设置数据模板：

```
<ItemsControl.ItemTemplate>
    <DataTemplate>
        <Ellipse Stroke="Red" Width="2" Height="2">
            <ia:Interaction.Triggers>
                <ia:EventTrigger EventName="Loaded">
                    <tr:SetCanvasPropertiesAction Left="{Binding X}" Top="{Binding Y}" />
                </ia:EventTrigger>
            </ia:Interaction.Triggers>
        </Ellipse>
    </DataTemplate>
</ItemsControl.ItemTemplate> 
```

请注意`ia:Interaction`前面提到的交互 dll 中的前缀。你加载它

```
xmlns:ia="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" 
```

在您的 xaml 文件的顶部。

tr 前缀用于包含我自己的类，如下所示：

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Interactivity;
using System.Windows.Media;

namespace Presentation.Triggers {
    public class SetCanvasPropertiesAction : TriggerAction<DependencyObject> {
        public static readonly DependencyProperty LeftProperty =
            DependencyProperty.Register("Left", typeof(double), typeof(SetCanvasPropertiesAction), new PropertyMetadata(default(double)));

        public static readonly DependencyProperty TopProperty =
            DependencyProperty.Register("Top", typeof(double), typeof(SetCanvasPropertiesAction), new PropertyMetadata(default(double)));

        public double Top {
            get { return (double)GetValue(TopProperty); }
            set { SetValue(TopProperty, value); }
        }

        public double Left {
            get { return (double)GetValue(LeftProperty); }
            set { SetValue(LeftProperty, value); }
        }

        protected override void Invoke(object parameter) {
            UIElement presenter = (UIElement)VisualTreeHelper.GetParent(AssociatedObject);
            Canvas.SetLeft(presenter, Left);
            Canvas.SetTop(presenter, Top);
        }
    }
} 
```

Invoke 方法需要注意两点。第一个是`AssociatedObject`，它被解析为 Ellipse，因为触发器在 xaml 中嵌套在它下面。第二件事是 VisualTreeHelper，它将父级获取到椭圆。这是我们要设置画布附加属性的 ContentPresenter。

它可能看起来更复杂，但与 mvvm 中的所有其他内容一样，您可以在 xaml 中重用它，而不必到处复制和粘贴代码隐藏代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-28T11:24:11.740

最后，我只使用 foreach 在 C# 中完成了它。

```
foreach (var InsidePoints in _inside)
            {
                double left = InsidePoints.xaxis * Layer_3.Width;
                double top = InsidePoints.yaxis * Layer_3.Height;
                Image pinImage = new Image();
                pinImage.Name = InsidePoints.id.ToString();
                pinImage.Source = (ImageSource)new ImageSourceConverter().ConvertFromString("icons/inside_pin.png");
                pinImage.Tap += new EventHandler<System.Windows.Input.GestureEventArgs>(pinImage_Tap);
                //pinImage.Hold += new EventHandler<System.Windows.Input.GestureEventArgs>(pinImage_Hold);
                Layer_3.Children.Add(pinImage);
                Canvas.SetLeft(pinImage, left);
                Canvas.SetTop(pinImage, top);
            } 
```

# ruby-on-rails - 了解渲染：rails 3 中的部分？

> ID：12140872
> 
> 赞同：0
> 
> 时间：2012-08-27T11:11:03.673
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

当我更改应用程序的内容状态时，数据库更新的背景工作正常。但该`link_to :loading`操作不起作用。

查看：页面中元素的 _feedback_question_status.html.erb

```
<% if feedback_question.status == 1 %>
    <span id="feedback_question">enabled -- <%= link_to "change", {:action=>"feedback_question_status",:status => 0,:feedback_question=>feedback_question.id}, :remote=>true, :loading => "$('#feedback_question_disable_#{feedback_question.id}').replaceWith('<p>Loading..</p>')", :update =>"feedback_question"%></span>
<% else %>
    <span id="feedback_question">disabled -- <%= link_to "change",{:action=>"feedback_question_status",:status => 1, :feedback_question=>feedback_question.id }, :remote=>true, :loading => "$('#feedback_question_enable_#{feedback_question.id}').replaceWith('<p>Loading..</p>')", :update =>"feedback_question"%></span>
<% end %> 
```

控制器：

有`update_attributes`和`render :partial=>'feedback_question_status'`

在服务器上：

```
Started GET "feedback/feedback_question_status?feedback_question=6&status=1" for 127.0.0.1 at 2012-08-27 16:25:47 +0530
... Snippet
   (0.2ms)  BEGIN
...
   (30.7ms)  COMMIT
  Rendered _feedback_question_status.html.erb (2.7ms) 
```

最后一行显示部分已渲染。但意见没有变化。这意味着页面上的元素没有任何反应。

为feedback_question 搜索路由：

```
 feedback_feedback_question_status        /feedback/feedback_question_status(.:format)                       feedback#feedback_question_status
                 feedback_questions        feedback/new_feedback_question(.:format)                          feedback#new_feedback_question
             edit_feedback_question        /feedback/:id/edit_feedback_question(.:format)                     feedback#edit_feedback_question
           update_feedback_question        /update_feedback_question/:id(.:format)                            feedback#update_feedback_question
           feedback_question_status        /feedback_question_status(.:format)                                feedback#feedback_question_status 
```

刷新页面后显示更改。但我不想再次加载页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:55:46.243

您没有将局部变量“feedback_question”从控制器传递到部分文件 _feedback_question_status.html.erb。

所以你需要像下面一样传递局部变量“feedback_question”

渲染 :partial => "feedback_question_status", :localts => { :feedback_question => @feedback_question }

其中@feedback_question 是需要在控制器中创建的实例变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:48:37.803

请更换这个

```
<% if feedback_question.status == 1 %>
  <span id="feedback_question">enabled -- <%= link_to "change", {:action=>"feedback_question_status",:status => 0,:feedback_question=>feedback_question.id}, :remote=>true, :loading => "$('#feedback_question_disable_#{feedback_question.id}').replaceWith('<p>Loading..</p>')", :update =>"feedback_question"%></span>
<% else %>
  <span id="feedback_question">disabled -- <%= link_to "change",{:action=>"feedback_question_status",:status => 1, :feedback_question=>feedback_question.id }, :remote=>true, :loading => "$('#feedback_question_enable_#{feedback_question.id}').replaceWith('<p>Loading..</p>')", :update =>"feedback_question"%></span>
<% end %> 
```

这样

```
<span id="feedback_question"><%= feedback_question.status == 1 ? "enabled" : "disabled" %> -- <%= link_to "change", {:action=>"feedback_question_status",:status => (feedback_question.status == 1 ? 0 : 1),:feedback_question=>feedback_question.id}, :remote=>true, :loading => "$('#feedback_question_disable_#{feedback_question.id}').replaceWith('<p>Loading..</p>')", :update =>"feedback_question"%></span> 
```

不要重复你的代码。

# php - 保存不同的表产品 Prestashop 1.5

> ID：12140875
> 
> 赞同：1
> 
> 时间：2012-08-27T11:11:13.843
> 
> 标签：php, prestashop, prestashop-1.5

在 Prestashop 1.5 上

如何将信息保存到另一个表？

我有一个名为“ps_product_temp”的辅助表产品，我有兴趣保存我创建的“Product.php”类对象的一些变量。

在 Product.php 我有：

```
 public example = 0;

    'example' =>        array('type' => self::TYPE_INT, 'temp' => true, 'validate' => 'isUnsignedInt'), 
```

在 SQL 上，我创建了“ps_product_temp”，并且这些字段都有“示例”字段。

在 AdminProductController.php 我有核心功能“CopyFromPost”，我把它放在：

> $product->example = (int)Tools::getValue('example'); // 从 tpl 上的表单中获取值

该值正确加载，但我无法将其放在我的 sql 表中，因为在“CopyFromPost”上将字段放入“ps_product_SHOP”。并让我犯了这个错误：

> 更新对象时出错。产品 （）

我可以把这些保存到另一张桌子上吗？

对不起我的英语不好：P

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:13:46.853

像以前的 Prestashop 一样，您必须按照您的表名创建模型。然后使用对象模型自动保存。或者您可以在模型中创建手动保存并由您的班级或 admintab 调用

# android - 将 ImageView 添加到 MasterDetailFlow 示例

> ID：12140882
> 
> 赞同：0
> 
> 时间：2012-08-27T11:11:53.003
> 
> 标签：android, android-fragments

我是 Android 的新手，我正在构建一个 MasterDetailFlow 应用程序，问题是我无法更改布局文件（只有默认的 TextView）。我想添加一个 ImageView 和一个 MapView。

请不要忘记我是初学者 :D ！

谢谢。

```
public static final String ARG_ITEM_ID = "item_id";

DummyContent.DummyItem mItem;

public StationDetailFragment() {
}

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    if (getArguments().containsKey(ARG_ITEM_ID)) {
        mItem = DummyContent.ITEM_MAP.get(getArguments().getString(ARG_ITEM_ID));
    }

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,Bundle savedInstanceState) {
    View rootView = inflater.inflate(R.layout.fragment_station_detail, container, false);
    if (mItem != null) {
        ((TextView) rootView.findViewById(R.id.station_detail)).setText(mItem.title);
    }
    return rootView;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-30T13:42:36.637

自动生成的布局文件将仅包含一个文本视图，因此您无法从调色板添加任何新的 stull。

例如

```
<TextView xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    style="?android:attr/textAppearanceLarge"
    android:id="@+id/game_detail"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="16dp"
    tools:context=".GameDetailFragment" /> 
```

如果您在生成的存根周围添加任何其他布局，您将能够在该 layout.xml 中修改和添加新内容

例子：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:src="@drawable/ic_launcher" />

<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/game_detail"
    style="?android:attr/textAppearanceLarge"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:padding="16dp"
    app:context=".GameDetailFragment" />

</LinearLayout> 
```

# c++ - 用于多线程 linux 应用程序的信号样式 IPC

> ID：12140883
> 
> 赞同：1
> 
> 时间：2012-08-27T11:11:59.370
> 
> 标签：c++, c, unix, ipc, rtos

我有为实时操作系统 (RTOS) 编写的遗留应用程序代码。大多数代码使用特定于操作系统的进程间通信 (IPC) 调用，它看起来与信号非常相似。

它有两个 IPC 调用：

*   `status_code signal_push(connector, event)`
*   `event signal_wait(connector)`

我想慢慢将该应用程序移植到 Linux 以改进测试和调试。

我想创建一个任务描述文件，它涵盖了任务与事件和处理程序相关的 IPC 原语。

一个示例如下所示：

```
SignalHandler(connector=crypto_connector, 
              events = [(cyrpto_init, crypto_init_handler),
                        (crypto_run, crypto_run_handler),
                        (crypto_done, crypto_done_handler]) 

Task(name=crypto, priority=1, stack_size=256, connector=crypto_connector) 
```

从这个描述文件中，它应该为每个调用相应处理程序的任务生成一个线程，该处理程序由工程师编写。它还应生成类似于`emit_crypto_init()`

我很清楚我将从这个描述中为 RTOS 生成什么样的代码，但我仍然不确定，我应该为 Linux 使用什么样的 IPC。对于第一个版本，任何保持行为的东西都可以。对于未来的版本，在目标上使用 Linux 可能是合理的，因此 IPC 的开销应该很小。

我发现了以下 IPC 机制：

*   Unix信号（似乎不是一个选项）
*   Unix 套接字（不仅仅是发送信号）
*   信号量（少做，但我们可以使用全局整数将事件传递给对方）

是否有更合适的 IPC 解决方案可以满足这一要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:51:00.793

有几种可能性：

*   Boost Signals（不要与 Boost Interprocess 混淆）- [http://www.boost.org/doc/libs/1_51_0/doc/html/signals.html](http://www.boost.org/doc/libs/1_51_0/doc/html/signals.html)，其他的是
*   cpp 事件[http://code.google.com/p/cpp-events/](http://code.google.com/p/cpp-events/)
*   libsigc++
*   Qt 信号和槽

# java - SWT FileDialog：选择目录而不是文件

> ID：12140884
> 
> 赞同：13
> 
> 时间：2012-08-27T11:12:10.677
> 
> 标签：java, swt

我可以使用 SWT[`FileDialog`](http://help.eclipse.org/indigo/topic/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/widgets/FileDialog.html)来选择文件夹而不是文件吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-27T11:14:40.787

你可以[`DirectoryDialog`](http://help.eclipse.org/mars/index.jsp?topic=%2Forg.eclipse.platform.doc.isv%2Freference%2Fapi%2Forg%2Feclipse%2Fswt%2Fwidgets%2FDirectoryDialog.html)改用。[这](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/DirectoryDialogpromptforadirectory.htm)是一些示例代码：

```
public static void main(String[] args) {
    Display display = new Display();
    Shell shell = new Shell(display);
    shell.open();
    DirectoryDialog dialog = new DirectoryDialog(shell);
    dialog.setFilterPath("c:\\"); // Windows specific
    System.out.println("RESULT=" + dialog.open());
    while (!shell.isDisposed()) {
        if (!display.readAndDispatch())
            display.sleep();
    }
    display.dispose();
} 
```

[这](http://www.java2s.com/Code/Java/SWT-JFace-Eclipse/DemonstratestheDirectoryDialogclass.htm)是一个稍微大一点的例子。

# listview - 在 Windows 8 上滚动 ListView 的问题

> ID：12140885
> 
> 赞同：1
> 
> 时间：2012-08-27T11:12:33.903
> 
> 标签：listview, windows-8, windows-runtime, scrollviewer

我使用 C# 和 XAML 为 Windows 8 制作了某种聊天应用程序。

对于聊天列表，我使用与 ObservableCollection 绑定的 ListView。对于我使用自定义控件的消息项，包含 RichTextBlock。

我想将 ListView 滚动到底部，以使新消息可见。我遇到的问题： **ScrollIntoView**方法不会使整个消息项可见，它仅使消息项的顶部可见。

所以，我也尝试了[WinRT XAML Toolkit](http://winrtxamltoolkit.codeplex.com/)的解决方案：Get ListView's ScrollViewer and use ScrollViewer's methods

```
public static void ScrollToBottom(this ListView listView)
{
   var scrollViewer = listView.GetFirstDescendantOfType<ScrollViewer>();
   scrollViewer.ScrollToVerticalOffset(scrollViewer.ScrollableHeight);
} 
```

和

```
public static void ScrollToBottom(this ListView listView)
{
   var scrollViewer = listView.GetFirstDescendantOfType<ScrollViewer>();
   scrollViewer.ScrollToVerticalOffset(scrollViewer.ExtentHeight);
} 
```

具有相同的效果。某些消息项未完全滚动。

我还尝试在滚动之前进行延迟： new ManualResetEvent(false).WaitOne(2000);

我没有更多的想法如何制作可自动滚动的聊天列表。我怎么能做到这一点？

看来，什么 Windows 消息应用程序不使用 ListView (StackPanel??)： ![Windows 聊天示例](../Images/9ea198ab7b632d76432705a59a5e2011.png)

使用 StackPanel 会更容易吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T18:13:36.593

我假设您的代码如下所示，您正在向 observablecollection 添加新的聊天消息

```
var newChatMsg = new ChatMsg("foo foo bar bar");
messageObservableColllection.Add(newChatMsg); 
```

您需要做的就是将以下代码行添加到 Add() 之后

```
this.Dispatcher.RunAsync(Windows.UI.Core.CoreDispatcherPriority.Normal, () =>
            {
                listbox1.ScrollIntoView(newChatMsg);
            }); 
```

这将调用将 ListView 滚动到调度程序队列上最近添加的聊天消息，这将在 INofityProperty 触发并使用新消息更新 ListView 后的某个时间点触发。如果在添加或删除项目时需要运行任何动画，这很重要。

最后，如果项目没有完全滚动到视图中，您可能会遇到项目高度问题。ScrollIntoView 有一个替代项，可让您指定要对齐内容的框架边缘。如果您希望显示特定的子元素，您还可以手动指定额外的滚动量。有关详细信息，请参阅此 MSDN 论坛帖子：

[http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/24e91a3e-6cd3-468b-97eb-c90f39532aba](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/24e91a3e-6cd3-468b-97eb-c90f39532aba)

# oauth - 获取 Vimeo 上私人视频的视频缩略图

> ID：12140886
> 
> 赞同：6
> 
> 时间：2012-08-27T11:12:34.283
> 
> 标签：oauth, vimeo

这是来自 vimeo 论坛的转贴，但由于那里没有人回答，我在这里试试运气：

我已经尝试了几个小时来了解整个 oAuth 的事情，但我似乎没有让它工作。我想使用[高级 vimeo api](https://developer.vimeo.com/apis/advanced)检索私人视频的缩略图。这就是我现在所拥有的：

```
$vimeo = new phpVimeo($consumer_key, $consumer_secret, $access_token, $access_token_secret);
$result = $vimeo->call('vimeo.videos.getThumbnailUrls', array('video_id ' => $video_id)); 
```

当我这样尝试时，我不断收到错误消息

```
"Fatal error: Uncaught exception 'VimeoAPIException' with message 'Invalid signature' ". 
```

我绝对肯定密钥和秘密是正确的。我需要做更多的事情才能让这件事发挥作用吗？当然，如果有一个例子，我只需要输入我所有的关键数据就可以了，这将是惊人的。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T16:55:23.960

有几种方法可以帮助您解决签名错误。首先我想解释一些术语。

*   **Api Endpoint** - 您请求的 api url。
*   **Client ID / Client Secret** - 创建 Api 应用程序时提供给您的一对令牌
*   **请求令牌**- 授权用户时生成的令牌。此令牌不能用于进行 api 调用。
*   **OAuth 令牌/令牌秘密**- 当您通过授权工作流发送用户时给您的一对令牌
*   **基本字符串**- 一个特殊格式的字符串，包含与您的 API 请求相关的所有信息。
*   **OAuth 签名**- 表示您正在发出的请求的散列令牌。这是使用基本字符串、您的客户端 ID 和密码以及可选的 oauth 令牌和密码生成的。

**故障排除**

1.  尝试使用官方 PHP 库的最新版本：[https](https://github.com/vimeo/vimeo-php-lib) ://github.com/vimeo/vimeo-php-lib 。

*   如果这有效，则您的代码中存在问题。继续第 2 步。
*   如果这不起作用，请告诉 Vimeo。您无需继续这些步骤。

2.  使用 Hueniverse 互动指南：[http ://hueniverse.com/oauth/guide/authentication/](http://hueniverse.com/oauth/guide/authentication/)

*   发出请求并记录每个 URL、标头和参数。还包括基本字符串。
*   单击所有加号以展开输入表单，然后填写所有适当的数据。

3.  确保 Hueniverse 基本字符串与您自己生成的基本字符串匹配

*   如果这匹配，并且签名仍然不正确，则您可能错误地执行了 hmac 签名。检查您的所有代币，随时联系 Vimeo。
*   如果基本字符串不匹配，请确保您遵循规范：[https ://www.rfc-editor.org/rfc/rfc5849#section-3.4.1](https://www.rfc-editor.org/rfc/rfc5849#section-3.4.1)

4.  如果一切都失败了，您最好的选择是直接联系 Vimeo。他们可以查找您的身份验证令牌和预期签名。

# asp.net - 两个 asp 验证合二为一

> ID：12140887
> 
> 赞同：-3
> 
> 时间：2012-08-27T11:12:35.220
> 
> 标签：asp.net, regex, validation

如何检查正则表达式（电子邮件）并确保表单中的字段同时非空？如果我只将它留给正则表达式，如果我放置两个验证器，它会接受空字符串，它会占用两个标签的空间，有时两个错误会相邻显示，我只想要一个标签来表示错误谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:20:11.753

使用 a`RequiredFieldValidator`和`RegularExpressionValidator`and 设置[`Display`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.basevalidator.display.aspx)为`Dynamic`，则不会占用两个空格。

> **动态**：如果验证失败，验证消息的空间会动态添加到页面。

一般来说，使用两个验证器是个好主意，因为您可以提供两个有意义的错误消息（“请输入电子邮件”或“...必须是有效的电子邮件”）。

# java - 为什么 CLASSPATH 在 java 中很重要？

> ID：12140889
> 
> 赞同：-2
> 
> 时间：2012-08-27T11:12:40.690
> 
> 标签：java, classpath

许多 Java 开发人员面临 CLASSPATH 问题。让我知道为什么 CLASSPATH 在包括桌面、Web 和移动设备在内的 Java 应用程序中很重要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:23:21.760

在 Java 中，类是在程序运行时根据需要加载的。类路径是 JVM 将在其中查找要加载的类的位置列表（目录或 JAR 文件）。如果找不到要加载的类，就会出错，程序可能会中止。

因此，类路径的内容非常重要，并且由于它可以通过多种方式进行配置（现在不建议使用环境变量 CLASSPATH），其中一些相当复杂，经常会出现缺少或不完整的类路径的问题，特别是在服务器应用程序中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:15:49.910

无论何时使用第三方库，都需要将它们放入程序的类路径中。否则，您的代码将无法从第三方库中找到所需的类。有几种方法可以指定类路径，但这不是问题的重点。

# android - Android 使用自己的布局编辑文本首选项，onPreferenceChange 上没有 newValue

> ID：12140890
> 
> 赞同：0
> 
> 时间：2012-08-27T11:12:41.210
> 
> 标签：android, android-edittext, android-preferences

我有我自己的布局。

单击布局上的肯定按钮后，我想从 editText 接收文本。但是在 onPreferenceChange 中，我总是只得到默认值。

似乎我需要以某种方式将自己的 EditText 绑定到首选项，但我不知道如何以及在哪里执行此操作。

有谁能够帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T10:46:00.223

回答我自己的问题：

首先，在 PreferenceScreen 中，您需要声明：<full.path.to.your.OwnLayoutClass android:name="whatever" android:dialogLayout="@layout/your_own_layout" />

your_own_layout 可以是任何你想要的东西，带有按钮的线性布局，editTexts，根据你的意愿。

Essential 是代表您自己的偏好对话框的类。下面是一个简单的例子来说明如何做到这一点：

```
public class YourOwnLayoutClass extends DialogPreference {

    private LinearLayout mView;

    public YourOwnLayoutClass(Context context, AttributeSet attrs) {
        super(context, attrs);
        setPersistent(false);
        setDialogLayoutResource(R.layout.your_own_layout);
    }

    @Override
    protected void onBindDialogView(View view) {
        super.onBindDialogView(view);
        mView = (LinearLayout) view;
    }

    @Override
    protected void onDialogClosed(boolean positiveResult) {
        super.onDialogClosed(positiveResult);

        if (positiveResult) {
            // get value from editFields, do whatever you want here :)
            // you can acces them through mView variable very easily
        }
    }
} 
```

重要参考： [我需要在首选项中有一个自定义对话框](https://stackoverflow.com/questions/7456629/i-need-to-have-a-custom-dialog-in-preferences)

[编写新 DialogPreference 类的简洁方法？](https://stackoverflow.com/questions/4505845/concise-way-of-writing-new-dialogpreference-classes)

[Android：从 PreferenceActivity 启动自定义首选项](https://stackoverflow.com/questions/5516022/android-launch-a-custom-preference-from-a-preferenceactivity)

# java - 应用程序重新启动后重新打开 JTree 并保存其状态

> ID：12140891
> 
> 赞同：1
> 
> 时间：2012-08-27T11:12:59.380
> 
> 标签：java, swing, persistence, jtree

如何在 JTree 中保存选定和打开的节点并在用户重新启动我的应用程序后重新打开它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T17:35:09.673

我们可以存储 JTree 的扩展状态，并在以后需要时保留它。检查此代码示例。[http://www.javalobby.org/java/forums/t19857.html](http://www.javalobby.org/java/forums/t19857.html)

# glassfish-3 - 请求的视图无法恢复

> ID：12140893
> 
> 赞同：0
> 
> 时间：2012-08-27T11:13:09.787
> 
> 标签：glassfish-3

我使用（JSF 和 JPA）制作了一个 Web 应用程序，然后将其部署到 Glassfish 应用程序服务器。

它工作正常，但是当我让应用程序空闲一段时间，可能是一小时，然后尝试使用应用程序时，它会抛出异常说（请求的视图无法恢复）。

在 Glassfish 中重新加载我的应用程序时，它又可以正常工作了，我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-28T18:10:28.603

这是一个 ViewExpiredException，当状态保存方法设置为 server(default) 并且您向会话中不再可用的视图发出 post 请求时会触发该异常。

解决此问题的一种方法是在引发此类异常时将用户重定向到特定页面。您可以在 web.xml 中为此配置错误页面。

```
<error-page>
<exception-type>javax.faces.application.ViewExpiredException</exception-type>
<location>/errorpage.xhtml</location>
</error-page> 
```

# symfony - 创建属性和其他日期范围的过滤器

> ID：12140895
> 
> 赞同：0
> 
> 时间：2012-08-27T11:13:13.577
> 
> 标签：symfony, filter, twig

我有我的实体的项目列表。我想像 SonataAdminBundle 或其他管理生成器一样按属性过滤它。

例如，如果我有一个属性“颜色”，那么在我的视图中应该有一个包含颜色类型的选择字段，当用户选择其中一个时，我的视图应该只显示按“颜色”过滤的项目列表

我该怎么做？

**编辑：**

我几乎已经解决了创建表单的第一个过滤器，并在控制器操作中使用请求获取属性。然后我使用 findBy 过滤查询。

现在是日期范围过滤器的时间，并将其与上面的过滤器合并。我想通过两到三个过滤器过滤我的项目列表。

如何从控制器中获取仅返回属于日期范围的项目？

使用三个可选过滤器的 DQL 语句是什么？我可以过滤掉任何过滤器、一个过滤器或所有过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T14:17:46.230

您已经提到了解决方案：[Doctrine Filters](http://docs.doctrine-project.org/en/latest/reference/filters.html)

如果我只想获取相关实体的一个子集，这就是我使用的方法。我认为文档是直截了当的。

# windows - 从 Windows 命令行启动 mercurial hg Web 服务器

> ID：12140896
> 
> 赞同：2
> 
> 时间：2012-08-27T11:13:16.247
> 
> 标签：windows, mercurial

有人知道我如何从 Windows 命令行启动 hgweb（mercurial hg Web 服务器）吗？

目前要运行它，我在存储库文件夹中的资源管理器窗口上单击鼠标右键。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-27T11:17:26.007

```
D:\>hg serve
listening at http://my.host.name:8888/ (bound to *:8888) 
```

`CTRL`+`C`杀死它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-13T15:25:08.827

*您可以使用'hg serve'*启动 q web 服务器，它将在默认端口上侦听：8000。或者您可以指定端口*'hg serve -p XXXX'*

我在批处理文件上使用它并自动启动它。

# node.js - 使用backbone.js node.js 和express 上传AJAX 图像

> ID：12140901
> 
> 赞同：4
> 
> 时间：2012-08-27T11:13:53.313
> 
> 标签：node.js, file-upload, backbone.js, express

因此，我已经在网上搜索了一天，试图找到一个完整的示例，说明如何上传图像以及来自骨干模型的正常 POST（创建）请求。所以经过一些初步的挖掘后，我发现了`FileReader`HTML5 中的 api - 经过一些测试后，我通过创建一个 `XMLHttpRequest()`

我现在试图解决的问题是如何让 bacbone 发送 FILES 数据以及 POST 请求，就像您在正常的多部分表单工作流程中遇到的那样。我对骨干很陌生，所以请原谅任何明显的错误。这是我到目前为止所拥有的。

# 模型

```
define(                                                                                                                                                
    [                                                                                                                                                  
        'backbone'                                                                                                                                     
    ],                                                                                                                                                 

    function (Backbone) {                                                                                                                              
        var Mock = Backbone.Model.extend({                                                                                                             
            url: '/api/v1/mocks',                                                                                                                      
            idAttribute: '_id',                                                                                                                        

            readFile: function(file){                                                                                                                  
                var reader = new FileReader();                                                                                                         
                self = this;                                                                                                                           

                reader.onload = (function(mockFile){                                                                                                   
                    return function(e){                                                                                                                
                        self.set({filename: mockFile.name, data: e.target.result});                                                                    
                    };                                                                                                                                 
                })(file);                                                                                                                              

                reader.readAsDataURL(file);                                                                                                            
            }                                                                                                                                          
        });                                                                                                                                            

        return Mock;                                                                                                                                   
    }                                                                                                                                                  
); 
```

# 看法

```
define(
    [
        'jquery',
        'backbone',
        'underscore',
        'text!../templates/create_mock-template.html',
        'models/mock',
        'collections/mocks'
    ],

    function ($, Backbone, _, createMockTemplate, Mock, mocksCollection) {
        var CreateMockView = Backbone.View.extend({
            template: _.template(createMockTemplate),

            events: {
                'submit form': 'onFormSubmit',
                'click #upload-link': 'process',
                'change #upload': 'displayUploads'
            },

            initialize: function () {
                this.render();
                return this;
            },

            render: function () {
                this.$el.html(this.template);
            },

                        process: function(e){
                                var input = $('#upload');
                                if(input){
                                        input.click();
                                }
                                e.preventDefault();
                        },

                        displayUploads: function(e){
                                // Once a user selects some files the 'change' event is triggered (and this listener function is executed)
                                // We can access selected files via 'this.files' property object.

                                var formdata = new FormData();
                                var img, reader, file;
                                var self = this;

                                for (var i = 0, len = e.target.files.length; i < len; i++) {
                                        file = e.target.files[i];

                                        if (!!file.type.match(/image.*/)) {
                                                if (window.FileReader) {
                                                        reader = new FileReader();
                                                        reader.onloadend = function (e) { 
                                                                self.createImage(e.target.result, e);
                                                        };
                                                        self.file = file;
                                                        reader.readAsDataURL(file);
                                                }
                                        }   
                                }
                        },

                        createImage: function(source, fileobj) {
                                var image = '<img src="'+source+'" class="thumbnail" width="200" height="200" />'
                                this.$el.append(image);
                        },

            onFormSubmit: function (e) {
                e.preventDefault();

                // loop through form elements
                var fields = $(e.target).find('input[type=text], textarea');
                var data = {};

                // add names and vlaues to data object
                $(fields).each(function(i, f) {
                    data[$(f).attr('name')] = $(f).attr('value');
                }); 

                // create new model from data
                var mock = new Mock(data);

                // this should set the filename and data attributes on the model???
                mock.readFile(this.file);

                // save to the server
                mock.save(null, {
                    wait: true,
                    error: function(model, response) {
                        console.log(model)
                    },
                    success: function(model, response) {
                        mocksCollection.add(model);
                        console.log(model, response);
                    }
                });
            },
        });

        return CreateMockView;
    }
); 
```

我完全理解这可能有点摇摆不定，它比其他任何东西都更像是概念证明，也是学习骨干的好机会。所以我的问题的症结在于

*   当请求由主干发送到 api 时，为什么我没有在对节点/快速服务器的请求中看到数据和文件名 attrs
*   我想做什么甚至可能吗，我基本上认为我能够读取数据 attr 并在服务器上创建和映像？
*   有没有办法覆盖 Mock 模型上的同步方法并创建正确设置的 POST 和 FILES 请求。

我确定这是可能的，但我似乎无法找到我需要耕耘并让它发挥作用的信息。！

希望有人能帮忙！

干杯

# 编辑

只是想根据我的理解提供更多信息，并在文档云 irc 频道上进行一些简短的聊天，这应该可以。所以当我打电话时

```
mock.readFile(this.file) 
```

文件名和数据属性似乎没有设置。事实上，这里的控制台日志甚至似乎都被触发了，所以我猜这可能是问题所在。我会很高兴这种方法基本上基于数据和文件名的值在节点端构建图像。那么为什么不设置这些属性并在发布请求中传递给 api 呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T12:28:19.117

我已经解决了这种情况，将模型创建分为两个步骤：

1.  基本信息
2.  资产

例如，如果我的*Model*是*Film*，我会展示一个只包含*title*和*synopsis的**create-form*。该信息被发送到服务器并创建模型。在下一步中，我可以显示*更新表单，现在使用**文件上传*插件非常容易，例如：

 ****   [jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)非常专业和稳定
*   [BBAssetsUpload](http://fguillen.github.com/BBAssetsUpload/)非常beta，但是基于Backbone，你可以说你认识这个程序员；P

您还可以查看他们的源代码以获取参考，以尝试*通过文件创建解决方案实现一步主干模型*。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-12T20:44:29.183

[用于 express的 jquery-file-upload-middleware](https://github.com/aguidrevitch/jquery-file-upload-middleware)可能值得一提。***

# ios - “尝试注册的过滤专辑超过 5 个。这将失败。” 使用资产库

> ID：12140903
> 
> 赞同：6
> 
> 时间：2012-08-27T11:13:58.430
> 
> 标签：ios, alassetslibrary, assetslibrary

我有时会收到“尝试注册的过滤专辑超过 5 个。这将失败。” 当我在 ALAssetsGroup 上调用 setAssetsFilter 时。

有谁知道为什么？我见过类似的问题，但都与 UIImagePickerController 有关。

这里的代码：

```
ALAssetsLibrary *lib = [[ALAssetsLibrary alloc] init];

    [lib enumerateGroupsWithTypes:ALAssetsGroupSavedPhotos usingBlock:^(ALAssetsGroup *group, BOOL *stop) {

        [group setAssetsFilter:[ALAssetsFilter allPhotos]];
        [group enumerateAssetsWithOptions:NSEnumerationReverse usingBlock:^(ALAsset *result, NSUInteger index, BOOL *stop) {....}]; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-19T14:14:43.727

大多数人都看到过这个问题：[iOS 5 GM: : More than maximum 5 个过滤专辑列表试图注册。这将失败](https://stackoverflow.com/questions/7689119/ios-5-gm-error-more-than-maximum-5-filtered-album-lists-trying-to-register)。而这个：[iPhone，“超过 5 个过滤的专辑列表试图注册。这将失败。” 错误](https://stackoverflow.com/questions/7167373/iphone-more-than-maximum-5-filtered-album-lists-trying-to-register-this-will)。所以我们可以相信这是一个已知的问题错误。没什么大问题。

我也看到这个评论：

> 在 iOS 5.1.1 上，我确实检查了源类型的可用性，当我第 5 次调用图像选择器时仍然收到警告。我在 iOS 6.0 上看不到这一点，所以 Apple 似乎已经修复了一些问题。—— [理查德·阿尔滕伯格——Brainchild](https://stackoverflow.com/users/1690497/richard-altenburg-brainchild)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-19T12:43:00.730

我想这是一个 Apple Bug！..即使是 Apple 示例也给出了相同的错误。最好忽略它！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-21T10:20:33.777

即使我遇到了这个问题，但已经解决了。您只需要更改 UIImagePickerController 的源类型。

UIImagePickerController *imagePicker = [[UIImagePickerController alloc] init];

/* 这在 IOS6 中可以正常工作，但在 IOS5 中有一些问题 */ // imagePicker.sourceType = UIImagePickerControllerSourceTypePhotoLibrary;

imagePicker.sourceType = UIImagePickerControllerSourceTypeSavedPhotosAlbum; // 这样就可以解决问题了。

# asp.net-mvc-3 - 如何在 mvc3 的单个视图中从两个表或两个类中获取数据

> ID：12140910
> 
> 赞同：0
> 
> 时间：2012-08-27T11:14:43.500
> 
> 标签：asp.net-mvc-3

如何在 mvc3 的单个视图中从两个表或两个类中获取数据。我想显示两个表中的数据。我有一个父类和两个子类。即 public class GetDocumentParent { `enter code here` public List getDocument { get; 放; } 公共列表 getDocumentRevision { 获取；放; } }

看法：

" %>

```
<% foreach (var item in Model.getDocument)
   { %>

        <tr>
            <td>

             <%:Html.DisplayFor(ModelState => item.DOCUMENT_NAME)%>
            </td>
            <td>
              <%:Html.DisplayFor(ModelState => item.ActiveDate)%>
            </td>    
            <td>
                <%:Html.DisplayFor(ModelState => item.Revision)%>
            </td>
             <td>
      </tr>

<% } %> 
```

==>item.DOCUMENT_NAME 和 item.ActiveDate 来自文档类。

来自 Document_Revision 类的 item.Revision。

如何在视图中同时显示两个类的值。

控制器：

```
var model = new GetDocumentParent
             {
                 getDocument = db.Document.ToList(),
                 getDocumentRevision = db.DocumentRevisions.ToList()

             };
             return View(model); 
```

型号：1。

公共类文档{

```
 public string DOCUMENT_NAME
      {
        get;
        set;
      }
    public Nullable<System.DateTime> ActiveDate
      {
        get;
        set;
      }
} 
```

2.

公共类 DOCUMENT_REVISIONS { 公共字符串 REVISION { 获取；放; } }

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:44:35.033

永远记住，最好有一个视图模型来表示发送到视图的数据。该视图将执行您的视图模型所需的操作。下面的代码可以指导您，您必须更改它以适应您的场景。

假设我有一个客户，每个客户只有一个地址。我会创建一个视图模型`CustomerDetailsViewModel`来表示这些数据：

```
public class CustomerDetailsViewModel
{
     public string FirstName { get; set; }

     public string Lastname { get; set; }

     public int Age { get; set; }

     public string AddressLine1 { get; set; }

     public string AddressLine2 { get; set; }

     public string City { get; set; }
} 
```

您显示客户和客户地址详细信息的操作方法：

```
public class CustomerController : Controller
{
     private readonly ICustomerRepository customerRepository;

     public CustomerController(ICustomerRepository customerRepository)
     {
          // Check customerRepository for nulls

          this.customerRepository = customerRepository;
     }

     public ActionResult Details(int id)
     {
          // Check that id is not zero or negative

          Customer customer = customerRepository.GetById(id);

          // Get the customer's address
          Address address = customerRepository.GetCustomerAddress(id);

          CustomerDetailsViewModel viewModel = new CustomerDetailsViewModel()
          {
               FirstName = customer.Firstname,
               LastName = customer.LastName,
               Age = customer.Age,
               AddressLine1 = address.AddressLine1,
               AddressLine2 = address.AddressLine2,
               City = address.City
          }

          return View(viewModel);
     }
} 
```

`id`以上代表您客户的唯一标识符。它用于返回客户：

```
Customer customer = customerRepository.GetById(id); 
```

并且还用于返回特定客户的地址：

```
Address address = customerRepository.GetCustomerAddress(id); 
```

一个`ICustomerRepository`实例由`IoC container`例如[Autofac](http://code.google.com/p/autofac/)注入。

在您的视图中，您可以这样传递此视图模型，并且可以随意显示数据：

```
@model MyProject.DomainModel.ViewModels.Customers.CustomerDetailsViewModel

<div class="content">

     <div class="display-label">First Name: </div>
     <div class="display-content">@Model.FirstName</div>

     <div class="display-label">Last Name: </div>
     <div class="display-content">@Model.LastName</div>

     <div class="display-label">Age: </div>
     <div class="display-content">@Model.Age</div>

     <div class="display-label">Address Line 1: </div>
     <div class="display-content">@Model.AddressLine1</div>

     <div class="display-label">Address Line 2: </div>
     <div class="display-content">@Model.AddressLine2</div>

     <div class="display-label">City: </div>
     <div class="display-content">@Model.City</div>

</div> 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:24:28.377

问题是什么？在控制器中使用：

```
var model = new GetDocumentParent();
model.getDocument = ...//Code that initialize getDocument
model.getDocumentRevision =...//Code that initialize getDocumentRevision 
```

在视图中：

```
@Html.EditorFor(m=>m.getDocument);
@Html.EditorFor(m=>m.getDocumentRevision); 
```

# c++ - 如果我向 QTreeWidget 添加一个项目，它总是被插入第一行

> ID：12140913
> 
> 赞同：3
> 
> 时间：2012-08-27T11:15:00.367
> 
> 标签：c++, qt

我希望在最后一行而不是第一行之后插入新项目。

```
for(i=0;i<10;i++)
{
    QTreeWidgetItem* tempItem = new QTreeWidgetItem();
    tempItem->setText(0,QString::number(i));
    ui->treeWidget->insertTopLevelItem(tempItem,i);
} 
```

它将项目插入顶部，而不是底部。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-27T11:25:41.567

试试这个方法：

如果要添加带有子项的顶级项目：

```
//you could also create it dinamically
QTreeWidget * tree = ui->treeWidget;

QTreeWidgetItem * topLevel = new QTreeWidgetItem();
topLevel->setText(0, "This is top level");

for(int i=0; i<5; i++)
{
    QTreeWidgetItem * item = new QTreeWidgetItem();
    item->setText(0,"item " + QString::number(i+1));
    topLevel->addChild(item);
}

tree->addTopLevelItem(topLevel); 
```

或者，如果您想添加更多顶级：

```
for(int i=0; i<5; i++)
{
    QTreeWidgetItem * item = new QTreeWidgetItem();
    item->setText(0,"top-level " + QString::number(i+1));
    tree->addTopLevelItem(item);
} 
```

请注意，它们是按顺序排列的，它们被添加了！

# java - 由于 SVNAuthenticationException，Hudson 构建失败

> ID：12140923
> 
> 赞同：3
> 
> 时间：2012-08-27T11:16:04.403
> 
> 标签：java, svn, build, continuous-integration, hudson

尝试使用 Hudson 构建项目时遇到意外错误。我有一个有效的帐户，我可以用它结帐到安装了 Hudson 的机器。我已从 Hudson UI 更新了此帐户的身份验证参数。

有人遇到过这种情况么？

```
hudson.util.IOException2: revision check failed on https://SVN Location
        at hudson.scm.SubversionChangeLogBuilder.buildModule(SubversionChangeLogBuilder.java:157)
        at hudson.scm.SubversionChangeLogBuilder.run(SubversionChangeLogBuilder.java:99)
        at hudson.scm.SubversionSCM.calcChangeLog(SubversionSCM.java:504)
        at hudson.scm.SubversionSCM.checkout(SubversionSCM.java:621)
        at hudson.model.AbstractProject.checkout(AbstractProject.java:1095)
        at hudson.model.AbstractBuild$AbstractRunner.checkout(AbstractBuild.java:479)
        at hudson.model.AbstractBuild$AbstractRunner.run(AbstractBuild.java:411)
        at hudson.model.Run.run(Run.java:1280)
        at hudson.model.FreeStyleBuild.run(FreeStyleBuild.java:46)
        at hudson.model.ResourceController.execute(ResourceController.java:88)
        at hudson.model.Executor.run(Executor.java:139)
    Caused by: org.tmatesoft.svn.core.SVNAuthenticationException: svn: OPTIONS of '/SVN Location': 403 Forbidden (https://SVN)
        at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:62)
        at org.tmatesoft.svn.core.internal.wc.SVNErrorManager.error(SVNErrorManager.java:51)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:610)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:273)
        at org.tmatesoft.svn.core.internal.io.dav.http.HTTPConnection.request(HTTPConnection.java:261)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.exchangeCapabilities(DAVConnection.java:516)
        at org.tmatesoft.svn.core.internal.io.dav.DAVConnection.open(DAVConnection.java:98)
        at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.openConnection(DAVRepository.java:1001)
        at org.tmatesoft.svn.core.internal.io.dav.DAVRepository.getLatestRevision(DAVRepository.java:178)
        at org.tmatesoft.svn.core.wc.SVNBasicClient.getRevisionNumber(SVNBasicClient.java:482)
        at org.tmatesoft.svn.core.wc.SVNBasicClient.getLocations(SVNBasicClient.java:851)
        at org.tmatesoft.svn.core.wc.SVNBasicClient.createRepository(SVNBasicClient.java:534)
        at org.tmatesoft.svn.core.wc.SVNLogClient.doLog(SVNLogClient.java:1016)
        at org.tmatesoft.svn.core.wc.SVNLogClient.doLog(SVNLogClient.java:891)
        at org.tmatesoft.svn.core.wc.SVNLogClient.doLog(SVNLogClient.java:823)
        at hudson.scm.SubversionChangeLogBuilder.buildModule(SubversionChangeLogBuilder.java:145)
        ... 10 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-05-06T07:59:09.560

我有这个问题。在花了一天时间研究 ssl 和 http 交互之后，我发现这实际上是一个身份验证问题。

在 jenkins v1.534 中的（加密）凭据

```
/opt/jenkins/jobs/JOBNAME/subversion.credentials 
```

和

```
/opt/jenkins/hudson.scm.SubversionSCM.xml 
```

已过时且不同步。为了使诊断更加困难，它们被缓存起来，并在我每次运行工作时被覆盖。因此，每次更改这些文件时，我都必须重新启动 jenkins 服务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:01:14.667

您是否为 SVN 使用了正确的 URL。这是大小写不正确时的常见错误。也许 URL 不是 SVN_Location 而是 Svn_location

# c# - 如何使用 C# 从 XML 中选择多个具有相同名称的元素？

> ID：12140929
> 
> 赞同：0
> 
> 时间：2012-08-27T11:16:33.360
> 
> 标签：c#, xml, asp.net-mvc, linq-to-xml

我真的坚持这个，所以所有的帮助都是非常受欢迎的。我有一个这样的 XML 文档：

```
</root>
 <person>
  <name>John</name>
  <lastname>Doe</lastname>
  <laguage>NL</language>
  <laguage>EN</language>
  <laguage>DK</language>
 </person>
<person>
 <name>Samantha</name>
 <lastname>Doe</lastname>
 <laguage>NL</language>
 <laguage>EN</language>
 <laguage>DK</language>
</person>
</root> 
```

所以我想在我的一个模型中的一个地方阅读它，所以我在下面这样做。

```
XDocument xDoc = XDocument.Load("c:\\users\\acount\\documents\\visual studio 2010\\Projects\\XmlTest\\XmlTest\\XmlTest\\Sample.xml");

var data = from feed in xDoc.Descendants("person")
           select new XmlModel
           {
             name = feed.Element("name").Value,
             lastname = feed.Element("lastname").Value,
             language = feed.Element("language").Value,
           }; 
```

因此，就像您期望的那样，这只会读取一种语言，而不会超过一种。我需要什么我阅读所有语言但仍然存在问题，因为有些人确实比其他人知道更多的语言。有人能帮我吗，因为我生病了，累了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:18:21.517

```
languages = feed.Descendants("language").Select(x=>x.Value).ToList(), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:25:56.033

```
var data = from feed in xDoc.Descendants("person")
               select new XmlModel
                   {
                       name = feed.Element("name").Value,
                       lastname = feed.Element("lastname").Value,
                       language = feed.Elements("language").Select(x=>x.Value)
                   }; 
```

您需要将 XmlModel 的语言制作为一种`IEnumerable<string>`，以便它可以存储多种语言。

# javascript - jQuery-1.7.2 中的递归错误太多，是 jquery 错误吗？

> ID：12140930
> 
> 赞同：0
> 
> 时间：2012-08-27T11:16:40.707
> 
> 标签：javascript, jquery

**今天执行 autocomplete.js 时发生了太多递归**错误。在今天之前，当我执行 autocomplete.js 时，我从来没有在 jquery 中看到过这样的错误。我正在使用 jQuery 1.7.2

```
$(function(){
    $("#search_text").keyup(function(e){

      var sVal = $(this).val();

      if(e.which == 27) {
        $('#sresult_container').remove();
        return;
      }
      if(e.which != 40 && e.which != 38) {      
        $("#search").removeAttr('disabled');
        $.post('http://localhost/website/index.php/search/ajaxResults',{Search:sVal},function(data){
            if(data != "$$$" && data.length != 0) { 
                var sData = data;
                var flag1 = 0;
                var flag2 = 0;
                var tabindex = -1;
                var aFarray = sData.split('$$$');
                $('#sresult_container').remove();
                var $sresult_container = $('<div id="sresult_container"></div>')
                           .css({'position':'absolute','border':'1px solid','background-color':'white','z-index':'10000000','width':'309px'});
                for(var i=0;i<aFarray.length;i++) {   
                    var a = aFarray[i].split('|||');

                    if(i == 0 && a[0] != "") {
                         flag1 = 1;
                         $pages = $('<div id="pages"></div>');
                         $text1 = $('<p></p>').css({'background-color':'silver','text-align':'center','padding':'3px'}).text("Pages");
                        $pages.append($text1);
                        if(a.length > 5) {
                            a = a.slice(0,5);
                        }
                        for(var j=1;j<a.length+1;j++) {
                             tabindex++;
                            $('<div>/div>').css({'padding':'5px','text-align':'center'}).text(a[j-1]).attr({'tabindex':tabindex,'class':'result'}).appendTo($pages);                    
                                }

                            }
                        if(i == 1 && a[0] != "") {
                             flag2 = 1;
                             $articles = $('<div id="articles"></div>');
                             $text2 = $("<p></p>").css({'background-color':'silver','text-align':'center','padding':'3px'}).text("Articles");
                             $articles.append($text2);

                                if(a.length > 5) {
                                    a = a.slice(0,5);
                                }

                                for(var j=0;j<a.length;j++) {
                                        tabindex++;
                                        $('<div></div>').css({'padding':'5px','text-align':'center'}).text(a[j]).attr({'tabindex':tabindex,'class':'result'}).appendTo($articles);                                  
                                }

                        }

                    }
                    if(flag1 == 0)
                    {
                        $articles.children().first().remove();
                        $div = $sresult_container.append($articles);
                    }else if(flag2 == 0)
                    {
                        $pages.children().first().remove();
                        $div = $sresult_container.append($pages);
                    }else
                    {
                        $div = $sresult_container.append($pages,$articles);
                    }

                    tabindex++;
                 $allresluts = $('<div id="allresults"></div>').css({'padding':'5px','text-align':'center','background-color':'#FBEE92','color':'#CC3333'}).text("See All Results").attr('tabindex',tabindex).appendTo($div);

                    var bottom = $('#search_text').offset();
                    var height = $('#search_text').outerHeight();           
                    var left = bottom.left;
                    var top = bottom.top+height;
                    $div.offset({'top':top,'left':left});

                    $('body').append($div);

                }
                else
                {
                    $('#sresult_container').remove();
                    $("#search").attr('disabled','true');
                }
            });

        }
        else
        {
         $con_div = $('#sresult_container').children().children('div').add($('#sresult_container').children().last());

            var tabindex = $con_div.length - 1;

                    if(e.which == 40)
                    {

                        $con_div.first().addClass("selected").focus();

                        var index = $con_div.first().index(this)+1;
                        $con_div.bind({
                            keydown: function(e) {
                                e.preventDefault();
                                var key = e.keyCode;
                                var target = $(e.target);
                                switch(key) {
                                    case 38: // arrow up
                                        if(index == 0)
                                        {
                                            index = tabindex+1;
                                        }
                                        $con_div[--index].focus();
                                        break;
                                    case 40: // arrow down
                                        if(index > tabindex-1)
                                        {
                                            index = -1;
                                        }
                                        $con_div[++index].focus();
                                        break;
                                    case 13: //Enter 
                                        if(target.hasClass('result') == true)
                                        {
                                            $("#search_text").val(target.text());
                                            $("#search").focus();
                                        }
                                        else
                                        {
                                            $('#search').click();
                                        }
                                        $div.remove();
                                        break;
                                    case 27://Esc
                                        $div.remove();
                                        $("#search_text").focus();  
                                        break;
                                }
                            },

                            focusin: function(e) {
                                $(e.currentTarget).addClass("selected");
                            },

                            focusout: function(e) {
                                $con_div.removeClass("selected");
                                $(e.currentTarget).removeClass("selected");
                            }
                        });

                    }

        }

        setTimeout(function()
        {
        $con_div = $('#sresult_container').children().children('div').add($('#sresult_container').children().last());

        $con_div.live({

                        click : function(e){

                            var $target = $(e.target);
                            if($target.hasClass('result') == true)
                            {
                                $("#search_text").val($target.text());
                                $("#search").focus();
                            }
                            else
                            {
                                $('#search').click();
                            }
                            $('#sresult_container').remove();
                        },
                        mouseover : function(e){

                            var $target = $(e.target);
                            if($target.hasClass('result') == true || $target.is('#allresults'))
                            {
                                $(e.target).css('cursor','pointer');
                                $con_div.removeClass("selected");
                                $(e.target).addClass("selected");
                            }
                        },
                        mouseout : function(){
                            $con_div.removeClass("selected");   
                        }
                });                 
        }, 200 );
    });

    $("#search_text").blur(function(e){
        $con_div = $('#sresult_container').children().children('div').add($('#sresult_container').children().last());

        if($con_div.hasClass('selected') != true)
        {
            $("#sresult_container").remove();   
        }
    });

}); 
```

我在 $('#search').click(); 中遇到错误 代码里面。

# javascript - How to give last class to other element with jquery?

> ID：12140932
> 
> 赞同：0
> 
> 时间：2012-08-27T11:16:59.877
> 
> 标签：javascript, jquery, class, callback

I have some list elements with dynamically id changing. Next i give this id's to other element, as a class one by one. So, this is my code:

```
$('#rounded_items li').one({click: function(){
    $('#back_button').addClass(this.id);
}}); 
```

and `#back_button` receives classes 1, 2, 3, 4 from `#rounded_items li`. How can i grab the last class from `back_button` and give it to `#rounded_items` by click.

Is there any possible to give back the last class from element who receives this class?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:23:55.950

maybe you can store it as data

```
$('#rounded_items li').one('click', function(){
    var classes = $('#back_button').attr('class').split(/\s+/);
    var last = classes[classes.length-1];
    $.data($('#back_button')[0],'lastclass',last);
    $('#back_button').addClass(this.id);
});

$('#back_button').click(function(){
    var lastclass = $.data($('#back_button')[0],'lastclass');
    $('#rounded_items').addClass(lastclass);
    var classes = $('#back_button').attr('class').split(/\s+/);
    $.data($('#back_button')[0],'lastclass',classes[classes.length-3]);
    $('#back_button').removeClass(classes[classes.length-1]);
}); 
```

you can also try this:

```
 $('#back_button').click(function(){
        var classes = $('#back_button').attr('class').split(/\s+/);
        $('#rounded_items').addClass(classes[classes.length-2]);
        $('#back_button').removeClass(classes[classes.length-1]);
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:25:11.153

Use an array to store the ids, not a class attribute!

```
var stack = [];
$('#rounded_items li').one('click',function(){
    stack.push(this.id);
});
$('#back_button').click(function(){
    $('#rounded_items').setClass(stack.pop());
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:32:13.720

I'm assuming that your classes aren't really being used to style anything, as they're not legal CSS identifiers. If the intent is just to store some state, use `.data`:

```
var $back = $('#back_button');

$back.data('state', []);                   // empty array to store state

$('#rounded_items li').one({click: function() {
    $back.data('state').push(this);        // store clicked element
});

$back.on('click', function() {
    var elem = $back.date('state').pop();  // retrieve last clicked element
    if (elem) {
        // do something with elem...
    }
}); 
```

If the code is all in the same lexical scope you can just use a local array to store the state without using `.data()`.

# c# - 如何按名称查询包含文档集的文档库

> ID：12140939
> 
> 赞同：0
> 
> 时间：2012-08-27T11:17:25.730
> 
> 标签：c#, sharepoint, sharepoint-2010

我有一个文档库，其中文档实际上是每个文档集。

区分每个项目的唯一方法是使用名为 name 的列，它实际上是一个 guid。

我需要使用该列进行查询，但在 UI 中，它告诉我它是一个文件。

下一个代码，我也尝试了 type = Text。但它没有用。

```
SPList agendaPoints = subSite.GetSafeListByName(MeetingsCommon.Constants
                      .LISTS_X);
SPQuery query = new SPQuery();
query.Query = string.Concat(" <Where>", "<Eq>", "<FieldRef Name='Name' />", 
                            "<Value Type='File'>" + name + "</Value>","</Eq>",
                            "</Where>"); 
```

例外情况是：Microsoft.SharePoint.SPException：一种或多种字段类型未正确安装

![在此处输入图像描述](../Images/73f7849f2eda3092923eca878582cc00.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:59:28.673

我可以使用“文档集 ID”查询文档集。

看到这个链接可能对你有帮助。

[http://blogs.devhorizo​​n.com/reza/2010/09/26/querying-document-sets-using-spsitedataquery/](http://blogs.devhorizon.com/reza/2010/09/26/querying-document-sets-using-spsitedataquery/)

# python - Python，从列表中删除重复项并转换为 one2many

> ID：12140946
> 
> 赞同：2
> 
> 时间：2012-08-27T11:18:11.563
> 
> 标签：python, list-comprehension

作为一个 python 新手，我需要解决这个非常简单的事情。假设我有一堂课：

```
class Event():
  eid = 0
  events = []

  def __repr__(self):
    return "id:"+str(self.eid) + "=>" + str(self.events)

  def __str__(self):
    return self.__repr__() 
```

让我们创建一些实例并将它们保存到列表中

```
eventset = list()
e1 = Event()
e1.eid = 0
e1.events = [('1','2','3','A')]

e3 = Event()
e3.eid = 1
e3.events = [('4','5','6','A')]

e2 = Event()
e2.eid = 0
e2.events = [('7','8','9','A')]

e4 = Event()
e4.eid = 1
e4.events = [('10','11','12','A')]

eventset.append(e1,e2,e3,e4) 
```

打印事件集给出：

```
[id:0=>[('1', '2', '3', 'A')], id:0=>[('7', '8', '9', 'A')], id:1=>[('4', '5', '6',   'A')], id:1=>[('10', '11', '12', 'A')]] 
```

我想创建一个新列表，如下所示：

```
[id:0=>[('1', '2', '3', 'A'),('7', '8', '9', 'A')], id:1=>[('4', '5', '6','A'),('10', '11', '12', 'A')]] 
```

如何以优雅的“Pythonic 方式”做到这一点？

编辑：

1.  需要保留列表中 Event 元素的顺序

2.  不想创建新的 Event 实例副本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:22:37.083

您真正需要的是一个字典，其中键是 the`eid`并且项目是您的所有事件。我使用[`defaultdict`](http://docs.python.org/library/collections.html#collections.defaultdict)from collections 给字典一个默认项——在本例中是一个列表。

```
from collections import defaultdict

d = defaultdict(list)

for i in [e1,e2,e3,e4]:
   d[i.eid].append(i.events[0]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:36:58.893

我建议您“升级”`Event`课程：

```
class Event(object):  # <-- one change
    eid = 0
    events = []

    def __init__(self, eid=0, events=None): # <-- second change
        self.eid = eid
        if events is not None: self.events = list(events)

    def __repr__(self):
        return "id:"+str(self.eid) + "=>" + str(self.events)

    def __str__(self):
        return self.__repr__() 
```

下一个：

```
from operator import add, attrgetter
from itertools import starmap, groupby

merge_event = lambda e, events: Event(e, reduce(add, map(attrgetter("events"), events), []))
list(starmap(merge_event, groupby([e1,e2,e3,e4], attrgetter("eid")))) 
```

**这是怎么回事**：

`groupby`返回带有元组列表的迭代器： ( `key`, `values`):

```
>>> list(groupby([e1,e2,e3,e4], attrgetter("eid")))
[(0, <itertools._grouper object at 0x105d96bd0>), (1, <itertools._grouper object at 0x105d96f10>)] 
```

where`key`是您的分组标准，并且`values`是匹配项的迭代器。在此代码中`key`=`eid`属性 ( `attrgetter("eid")`) 和`values`= 具有相同`eid`值的所有项目。

`starmap`作用与泛型相同，`map`但：a) 返回迭代器而不是列表，b) 使用分隔参数 ( `f(*(key,value)) = f(key, values)`) 调用给定的回调函数。我们创建了特殊的函数`merge_event`来操作`groupby`输出。

`merge_event`将 ( `key`, `values`) 元组作为参数并生成一个`Event`对象。有了`key`（实际上是`eid`）一切都清楚了。要创建事件列表，我使用`reduce`带有运算符的函数（来自模块的`add`函数表示）。`operator`它以这种方式工作：

```
>>> reduce(add, [[1,2,3], ["A","B","C"]], [])
[1, 2, 3, 'A', 'B', 'C'] 
```

最后，仅`map(attrgetter("events"), events)`收集`Event`对象列表的属性值`events`（即事件列表）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T20:34:41.813

所以我认为我找到了非常好的和非常优雅的解决方案。请看一下并评论/简化。

我创建了一个迭代器，仅当尚未返回此 eid 时才会返回带有 eid 的元素。

```
class first_unique_iter(object):
  def __init__(self, mylist):
    self.eventset = mylist
    self.i = iter(mylist)
    self.used = []

  def __iter__(self):
    return self

  def next(self):
    element = self.i.next()
    if element.eid not in self.used:
        self.used.append(element.eid)
        return element
    else:
        return self.next() 
```

然后是逻辑：

```
def slice_by_id(event, eventset):
   return [e for e in eventset if e.eid == event.eid]

def reduce_2one(x,y):
   x.events.extend(y.events)
   return x

final = [reduce(reduce_2one, slice_by_id(event,eventset)) for event in  first_unique_iter(eventset)] 
```

因此，对于每一个具有唯一 eid 的第一个事件，我们使用这个新的迭代器运行 list comp。拥有每个事件的列表，我们需要从具有相同 eid 的事件中附加事件列表。这是在由 eid 列表切片调用的 reduce() 函数中完成的。

```
print final
>>> [id:0=>[('1', '2', '3', 'A'), ('7', '8', '9', 'A')], id:1=>[('4', '5', '6', 'A'), ('10', '11', '12', 'A')]] 
```

你认为可以进一步简化吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:30:40.587

@Burkan Khalid 的解决方案是最简单的。

想象一下，您可以将输出字典`d`转换为另一个事件列表：

```
grouped_events = []
for (i, v) in d:
    e = Event()
    e.eid = i
    e.events = v
    grouped_events.append(e) 
```

当然，如果你的`Event`班级有适当`__init__`的 a`eid`和`events`作为参数，那可以简化......

```
grouped_events = [Event(i,v) for (i,v) in d.items()] 
```

# sql - 使用 bcp 实用程序将 SQL 查询导出到文本文件

> ID：12140947
> 
> 赞同：8
> 
> 时间：2012-08-27T11:18:13.247
> 
> 标签：sql, sql-server, debugging, sql-server-2005, bcp

我调试了一个存储过程（SQL Server 2005），我需要在数据表中找出一些值。

该过程由应用程序的一个事件运行，我只观察调试输出。

我执行以下存储过程（SQL Server 2005），以系统表（master.dbo.spt_values）为例：

```
set @logtext = 'select name, type from master.dbo.spt_values where number=6'
--set @logtext = 'master.dbo.spt_values'
SET @cmd = 'bcp ' + @logtext + ' out "c:\spt_values.dat" -U uId -P uPass -c'
EXEC master..XP_CMDSHELL @cmd 
```

因此，当我像一切正常一样取消注释第二个时，C：\ 驱动器上会出现一个文件...但是如果我将其注释回来，只留下第一行，则会生成任何输出。

如何解决这个问题？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-27T11:20:32.970

`bcp out`导出表。

要导出查询`queryout`，请改为使用 - 您需要将查询用“双引号”括起来

```
set @logtext = '"select name, type from master.dbo.spt_values where number=6"' 
--set @logtext = 'master.dbo.spt_values' 
SET @cmd = 'bcp ' + @logtext + ' queryout "c:\spt_values.dat" -U uId -P uPass -c' 
EXEC master..XP_CMDSHELL @cmd 
```

[http://msdn.microsoft.com/en-us/library/ms162802.aspx](http://msdn.microsoft.com/en-us/library/ms162802.aspx)

# objective-c - 在 Objective-C 中触发异步回调的更好方法

> ID：12140954
> 
> 赞同：1
> 
> 时间：2012-08-27T11:18:52.067
> 
> 标签：objective-c, ios5, grand-central-dispatch, nsnotifications

如果可能的话，我正在寻找一种更好的方法来做到这一点。

我有一个更新本地 sqlite 数据库的异步回调。更新完成时，我在单例变量 (archiveUpdateComplete) 中设置了一个标志。我睡一会儿，直到标志设置为真，然后我为我的表格视图补充水分。想删除 sleep()！感谢您的任何建议。

```
#define kBgQueue dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT,0)

- (void)viewDidLoad
{

  dispatch_async(kBgQueue, ^{

    //Hydrate word archive table view

       do {
             sleep(1.0);

           } while ([sharedManager archiveUpdateComplete]==NO);

      [self performSelectorOnMainThread:@selector(hydrateWordArchive) withObject:nil waitUntilDone:YES];

      //Run custom activity indicator
      dispatch_async(dispatch_get_main_queue(), ^{
        [MBProgressHUD hideHUDForView:self.view animated:YES];

      });

  });

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:24:11.263

**如果您需要投票**

轮询/睡眠很少是必要的或好的。作为备选：

*   您可以将一个附加`NSTimer`到主线程的运行循环。
*   计时器调用可以测试的选择器`[sharedManager archiveUpdateComplete]`
*   如果`YES`返回，则
*   *   使计时器无效
*   *   称呼`[MBProgressHUD hideHUDForView:self.view animated:YES];`

**如果您不需要投票**

有一些直接的选择。你选择哪一个取决于什么知道什么：

*   如果您的经理知道在完成后向谁发送消息，则经理可以简单地向其发送消息。如果这必须发生在主线程上，您可以使用`-[NSObject performSelectorOnMainThread:withObject:waitUntilDone:]`它转发到主线程。您也可以在代表中看到这种方法。在单例的情况下，走这条路线没有多大意义。

*   如果您的经理不知道谁对更改/完成感兴趣，您的经理可以`NSNotification`在任务完成后（在当前线程或从主线程）发布。

*   [键值观察](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/KeyValueObserving/KeyValueObserving.html)(KVO) 是另一种选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T20:46:19.003

也许我错过了一些东西，但你为什么不为此使用完成回调呢？

换句话说，您将计算更改为根据嵌套块“思考”。第一个异步块（在某个并发队列上）执行更新数据库的工作，当它完成后，它会分派另一个异步块（到同一个并发队列）来补充 tableview。最后，从*该*块中，您 dispatch_async 主队列上的另一个块会更新 UI，因为这是唯一需要在主队列上执行的位。

换句话说，您想要链接异步操作，而不是轮询。请参阅 dispatch_async() 手册页的 COMPLETION CALLBACKS 部分。

# ruby-on-rails - 获取 Populator 中的当前索引值

> ID：12140956
> 
> 赞同：1
> 
> 时间：2012-08-27T11:18:54.027
> 
> 标签：ruby-on-rails, rubygems, rake-task

我创建了一个 rake 任务来使用[populator](http://populator.rubyforge.org/)创建测试数据。我需要读取当前迭代的索引并设置模型的属性之一。谁能告诉如何在填充方法中读取当前索引值？

```
namespace :db do
  desc "Erase and fill database"
  task :populate => :environment do
    require 'populator'

    Category.delete_all

    Category.populate 50 do |category|
      category.name = Populator.words(1..3).titleize
      category.index = {CURRENT_INDEX}
    end
  end
end 
```

where`{CURRENT_INDEX}`应该是当前迭代的索引值。

我尝试在块变量中添加索引，`Category.populate 50 do |category, index|`假设每个循环 sysntax 都是 ruby​​，但没有奏效。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-29T13:15:52.983

看起来 ruby​​gem.org 在[更改](https://github.com/ryanb/populator/issues/19)后没有更新 gem 。这是我修复它的方法。

我将 gem 的来源直接指向 master 分支。

所以更换

```
gem 'populator' 
```

和

```
gem 'populator', git: "https://github.com/ryanb/populator.git" 
```

在**Gemfile**

在我的耙子任务中

```
...
Category.populate 50 do |category, index|
      category.name = Populator.words(1..3).titleize
      category.index = index
    end
... 
```

# php - Magento 自定义搜索扩展（外部来源） - 按相关性排序

> ID：12140957
> 
> 赞同：0
> 
> 时间：2012-08-27T11:19:06.787
> 
> 标签：php, magento, magento-1.7

我目前正在为 magento 构建一个模糊搜索扩展，它从外部服务器获取结果。

我遇到的问题是，在将外部搜索结果与 Magento 数据库选择的结果相结合后，我找不到基于 xml 文件中的相关值对集合对象中的产品进行排序/排序的解决方案。如果有人能帮我解决这个问题，我会很高兴 =)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T14:42:50.437

> 我目前正在为 magento 构建一个模糊搜索扩展，它从外部服务器获取结果。

你可以多看一点，因为 Magento 搜索使用**Solr**或**Elasticsearch**做同样的事情......

Magento 搜索的工作原理：

*   用户输入搜索查询
*   magento 查看是否有该查询的存储搜索结果（数据库表：`catalogsearch_query`和`catalogsearch_result`）
*   如果没有找到，它会根据配置执行搜索查询（如全文、solr、为此设置的任何内容）
*   将结果 ID 和排序顺序存储在适当的表中（提示：）`catalogsearch_result`；在这里您可以找到相关性字段
*   获取保存的结果并显示在搜索结果页面中

您的问题没有显示任何关于 Magento 标准搜索扩展的研究。

# php - 在mysql数据库中插入数据不起作用

> ID：12140958
> 
> 赞同：-5
> 
> 时间：2012-08-27T11:19:08.503
> 
> 标签：php, mysql

我正在使用以下代码在 mysql 数据库中插入数据

```
<?php

   $con = mysql_connect("surveyipad.db.6420177.hostedresource.com","test","test");
  if (!$con)
   {
  die('Could not connect: ' . mysql_error());
   }

  mysql_select_db("surveyipad", $con);

  $response_id=$_POST['response_id'];

  $participant_id=$_POST['participant_id']

  $question_id=$_POST['question_id'];

 $answer_text=$_POST['answer_text'];

 echo($response_id);

   $query=("INSERT INTO survey_question_responses 

  (response_id,participant_id,question_id,answer_option)
   VALUES ('$response_id', '$participant_id','$question_id','$answer_option')");

   mysql_query($query,$con);
  printf("Records inserted: %d\n", mysql_affected_rows());
  echo($response_id)
  ?> 
```

我在mysql中的表就像

response_id,participant_id,question_id,answer_option_answer_text

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:24:12.680

**response_id,participant_id,question_id,answer_option_answer_text** vs

**（response_id、participant_id、question_id、answer_option）**

并且您的行“ $participant_id=$_POST['participant_id'] ”缺少**分号（;）**

也请使用

```
if( !mysql_query( $query, $con ) ) { 
echo("Failure: " . mysql_error()  ); 
} 
```

插入数据。

# css - 输入框的插入框阴影

> ID：12140961
> 
> 赞同：15
> 
> 时间：2012-08-27T11:19:14.810
> 
> 标签：css

插入框阴影可以在输入字段上工作吗？

JsFiddle：http: [//jsfiddle.net/hKTq2/](http://jsfiddle.net/hKTq2/)

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-27T11:22:29.953

是的，这是我前几天正在做的事情，这确实是可能的。

```
input
{
  box-shadow:inset 0 0 5px 5px #888;
  background: #fff;
} 
```

您只需要为阴影设置一个背景即可:)

[http://jsfiddle.net/Kyle_/ZCq6w/](http://jsfiddle.net/Kyle_/ZCq6w/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-09-22T14:30:53.177

与此同时，这已经成为一种普遍现象，尽管这是我的“完美插入输入”。

```
input {
  background: #fff;
  color: #525865;
  border-radius: 4px;
  border: 1px solid #d1d1d1;
  box-shadow: inset 1px 2px 8px rgba(0, 0, 0, 0.07);
  font-family: inherit;
  font-size: 1em;
  line-height: 1.45;
  outline: none;
  padding: 0.6em 1.45em 0.7em;
  -webkit-transition: .18s ease-out;
  -moz-transition: .18s ease-out;
  -o-transition: .18s ease-out;
  transition: .18s ease-out;
}
input:hover {
  box-shadow: inset 1px 2px 8px rgba(0, 0, 0, 0.02);
}
input:focus {
  color: #4b515d;
  border: 1px solid #B8B6B6;
  box-shadow: inset 1px 2px 4px rgba(0, 0, 0, 0.01), 0px 0px 8px rgba(0, 0, 0, 0.2);
}
body {
  background: #fff;
  margin: 20px;
}
```

```
<input type="text" />
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:21:02.840

是的，您需要添加：

```
background-color:transparent; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-27T11:21:47.837

嗨添加这个css然后你就可以插入阴影

```
.innershadow{ -moz-box-shadow: inset 0 0 5px 5px #888; -webkit-box-shadow: inset 0 0 5px 5px#888; box-shadow: inset 0 0 5px 5px #888; height:15px; background-color:transparent; height:50px} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-27T11:24:15.560

只需添加`background:none;`类`.innershadow`

[http://jsfiddle.net/jack_fiddle/hKTq2/6/](http://jsfiddle.net/jack_fiddle/hKTq2/6/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-27T11:27:18.940

你可以做这样的事情来实现文本输入内的插入阴影：

```
.innershadow {  
    font-size: 16px;
    color: #999;
    padding: 6px;
    -moz-box-shadow:inset 2px 2px 5px #888;
    box-shadow:inset 2px 2px 5px #888;
    border: 1px solid #b8b8b8;
} 
```

高温下，

——汉森

# gwt - GWT+ JPA 的最佳 ID 数据类型

> ID：12140964
> 
> 赞同：0
> 
> 时间：2012-08-27T11:19:25.550
> 
> 标签：gwt, jpa

我知道，周围有类似的问题。但就我而言：我使用 GWT 2.4 + JPA 2.0 + (MySQL)：

我的表 ID 的最佳数据类型是什么？

我想避免在我的 GWT 项目中进行任何类型转换。

我的愿望是轻松，而不是性能。

你建议我使用包装类，即长与长吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:49:06.883

一个简单直接的选择是`Long`。更喜欢使用包装类，因此您可以在将对象插入数据库之前将 id 设置为 null（另请参阅[Always use original object wrappers for JPA @Id instead of original type?](https://stackoverflow.com/questions/11283709/always-use-primitive-object-wrappers-for-jpa-id-instead-of-primitive-type)）

如果性能不是高优先级，您可以考虑使用 UUID：这使得将对象放入集合和映射中变得容易得多 - 在它们存储在服务器端之前。为方便起见，您可以使用字符串来存储 UUID（GWT 不支持 UUID 数据类型），尽管在数据库中使用特定于 UUID 的数据类型会更有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:56:42.703

当然，包装器类比原语更好。使用对象有很多优点。但在我看来，在这种情况下最好的类型选择是 class `String`。`Long`不希望在 GWT 开发中使用，因为 JavaScript 没有`long`. 所以建议尽可能避免使用 long 。它在 GWT 上模拟它会影响性能。

# php - 我可以在任何文件中访问 $_SESSION 吗？

> ID：12140970
> 
> 赞同：1
> 
> 时间：2012-08-27T11:19:38.723
> 
> 标签：php

我想知道在我存储一个值之后`$_SESSION`，我可以在不同的文件中多次访问它吗？例如我存储了一个值：`$_SESSION['login']="Fred"`

我可以在不同时间访问不同文件中的该值吗？

例如：b.php

```
<?php
session_start();
$uname=$_SESSION['login'];
?> 
```

c.php

```
<?php
session_start();
$uname=$_SESSION['login'];
?> 
```

d.php

```
<?php
session_start();
$uname=$_SESSION['login'];
?> 
```

这可能吗？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:26:38.120

**是**的，这是可能的。

[有关详细信息，请参阅 PHP 会话](http://php.net/manual/en/function.session-start.php)。

注意：*PHP Session 就是这样的，除非您对它进行破坏或它们已过期。*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-27T11:27:53.250

是的。$_SESSION 变量将在 PHP 文件之间持续存在，除非它过期或您销毁会话。在最常见的服务器配置中，这需要一个 cookie 来保存会话 ID，因此请确保已启用这些配置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T11:44:23.100

是的，您的会话将可用于来自同一浏览器实例的每个请求。如果某些您没有得到它的地方可能存在这些文件的会话存储路径不同

# php - 如何将带有参数的方法作为 sfWidgetFormPropelChoice(Symfony) 选项传递？

> ID：12140972
> 
> 赞同：0
> 
> 时间：2012-08-27T11:20:00.423
> 
> 标签：php, symfony-1.4

我用小部件构建了一个表单。其中之一是我使用 sfWidgetFormPropelChoice 构建的 Multichoices**表单**。进入我的 customForm.class.php 我有这个：

**customForm.class.php：**

```
class customForm extends BaseCustomForm{
  public function configure(){
   ....
   $this->setWidgets(array(
    ...
    'myMultiChoice'=>new sfWidgetFormPropelChoice(array('model'=>'custom', 'method'=>'getLotsOfThings'));
    ...
  ));
 }
} 
```

选项`'method'`是获取一个`'getLotsOfThings'`没有任何参数的方法。我怎样才能通过参数传递这个方法？

我尝试`'method'=>'getLotsOfThings('.$value.')'`了，但这不起作用！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T12:02:22.367

您应该改用该`criteria`选项（[请参阅代码](http://trac.symfony-project.org/browser/branches/1.4/lib/plugins/sfPropelPlugin/lib/widget/sfWidgetFormPropelChoice.class.php#L28)），它使您能够进行复杂的查询来检索项目。

例如：

```
$c= new Criteria();
$c->add(CountryPeer::idcontinent, 1);

$this->widgetSchema['departement_id'] = new sfWidgetFormPropelChoice(array(
  'model'     => 'Country', 
  'add_empty' => true, 
  'criteria'  => $c
)); 
```

在创建表单时将条件作为选项提供给表单。

# c# - 如何使用 C# 十进制计算子数组总和的百分比，使其总和严格为 100

> ID：12140975
> 
> 赞同：4
> 
> 时间：2012-08-27T11:20:16.637
> 
> 标签：c#, .net, floating-point, decimal, percentage

假设我有一个整数数组。为了简化，让我们在逻辑上将其分为两部分。

假设`total sum`数组的所有元素是`2860800`.

假设 is 的所有元素的`left half`总和`2834387`。

假设 is 的所有元素的`right half`总和`26413`。

`100m * leftHalfSum / totalSum`现在通过给计算左半部分的百分比`99.07672678970917225950782998`。

同样，右半部分的百分比`100m * rightHalfSum / totalSum`为`0.9232732102908277404921700224`。

现在，如果我在 Visual Studio 的 Watch 中添加这两个百分比，它会显示`100`. 但是如果我`Calculator`在 Windows 的应用程序中添加这些，它会给我`100.0000000000000000000000000024`，这是正确的。

基本上，我想`100-leftHalfPercentage`严格等于，`rightHalfPercentage`反之亦然。如果我`100-leftHalfPercentage`在 Watch 中这样做，它会给我`0.92327321029082774049217002`. 请注意，它与 完全相同，但缺少`rightHalfPercentage`最后两位数字。`24`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:27:55.633

小数的最大精度为 28-29 位有效数字（[来源](http://msdn.microsoft.com/en-us/library/364x0z75%28v=vs.100%29.aspx)）。您计算的完整结果将是 30 位长，对于小数来说太多了！这就是为什么最后两位数字被省略的原因。

如果您的结果更大（例如总和为 10.000 而不是 100），则将省略更多数字。

差异可能是由内部原因引起的，可能需要比我更有知识的人对编译的代码进行一些检查。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-27T11:31:09.850

您计算的数字是正确的，即它们以相同的精度表示它们的百分比。

如果您希望它们的总和恰好为 100，那么您必须选择其中一个不太精确的值。您选择牺牲的值将简单地通过从 100 中减去所有其他值来计算。

例如，用一个小数计算三个相等的组会给你`33.3%`每个，给你一个总和`99.9%`。要得出总和`100%`，您将牺牲一组的正确性并将其计算为`100 - 33.3 - 33.3 = 33.4`。

# html - HTML 5 视频搜索/章节

> ID：12140976
> 
> 赞同：1
> 
> 时间：2012-08-27T11:20:18.037
> 
> 标签：html, video, html5-video

我的服务器上有一个很长的 .m4v 视频文件（约 1 小时），但我想在我的网站上显示一个视频（HTML-5），它只显示它的子部分（例如，分钟 3 -> 5，然后是分钟19 -> 20）。所以我的用户看到的视频只有 5 分钟长。

是否有人知道任何当前的 HTML-5 视频播放器或支持此用例的巧妙技巧？我想我想要的功能就像 quicktime 参考文件，但是在 HTML5 -video 中，所以如果我的用户通过播放视频，他们只会看到“子部分”，中间什么也看不到。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:39:49.910

您可以使用[媒体片段 URI](http://www.w3.org/TR/media-frags/)告诉浏览器仅从服务器请求视频文件的一部分。

例如，要从 10 秒到 20 秒检索此视频，请使用如下 url 设置您的视频源：

```
<video src="myvideo.webm#t=10,20"></video> 
```

像往常一样，这在 Internet Explorer 中不起作用。

您仍然需要按顺序将多个视频片段拼接在一起。您可以在每个事件上放置一个“结束”事件侦听器来排队下一个视频，或者您可以使用像[popcorn.sequence这样的库](https://github.com/rwldrn/popcorn.sequence)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-11T10:16:20.693

我同意brinchirls。媒体片段工作得很好，而且代码太少了！

另一种选择是为 HTML5 视频标签使用很棒的内置侦听器。

您可以执行以下操作：

```
video = document.getElementByTagName('video')[0];
insAndOuts = [{in: 3, out: 5}, {in: 19, out: 20}];

video.addEventListener('loadeddata', function(){
  video.currentTime = insAndOuts[0].in;
});

var nextTime = function(time){
  var ends = _.map(insAndOuts, function(x){ return x.out});
  return ends.indexOf(time) + 1;
};

video.addEventListener('timeupdate', function(){
  var nextIndex = nextTime(video.currentTime)
  if(nextIndex > 0) {
    video.currentTime = insAndOuts[nextIndex].in;
  }
}); 
```

据我所知，这基本上就是 brinchirls 帖子中爆米花序列的内容。这适用于所有浏览器，但需要管理大量代码。

# java - 在 Gridview 上绘制文本

> ID：12140980
> 
> 赞同：0
> 
> 时间：2012-08-27T11:20:42.330
> 
> 标签：java, android, android-layout

我正在为我的应用程序创建一个演练，当用户单击网格项目时，应该在其上绘制一个文本，描述该项目，我该怎么做。有没有更好的方法来显示演练？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-27T11:25:40.747

由于您必须为单击的每个项目显示不同的解释，而不是在 gridView 项目上绘制文本，我认为最好在`dialog`. 完成阅读后，您可以删除该对话框并显示下一个项目，依此类推。

# php - 在 div 长度的末尾制作可编辑的 div 断线

> ID：12140981
> 
> 赞同：0
> 
> 时间：2012-08-27T11:20:44.073
> 
> 标签：php, javascript, html

我使用以下方法制作了可编辑的 div：

```
<div style="width:100px;" contenteditable="true"></div> 
```

现在，我将 div 的内容放入我的数据库中，并将其提取到另一个页面中，放入一个较小的 div 中：

```
<div style="width:80px;"></div> 
```

如果我在输入时使用“输入”键 - 文本在输出中换行就好了，

但如果我只是在输出中写一个长文本，它会留下 80px div 边框。

如何让 contenteditable div 按其宽度识别换行符？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T11:48:49.243

尝试：

```
<div style="max-width:80px; word-wrap:break-word;"></div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T11:24:56.457

尝试这个

```
<div style="width:80px;word-wrap:break-word;"></div> 
```

# java - 使用 FFMPEG 从图像创建视频

> ID：12140994
> 
> 赞同：0
> 
> 时间：2012-08-27T11:21:43.067
> 
> 标签：java, javascript, video, ffmpeg

我正在使用 JavaScript、ffmpeg 和 java 创建视频编辑应用程序。使用 FFMPEG 我创建了提取 n 帧视频，而不是使用 canvas.toDataUrl 我正在用现有图像帧速率替换新图像并且一切都已经处理好了，但是当我使用这些图像创建视频时，FFMPEG 永远不会包含新创建的 PNG 图像。

从 HTML5 画布保存 png 图像的代码

```
Base64 decoder = new Base64();
    byte[] pic = decoder.decodeBase64(request.getParameter("pic"));
    String frameCount = request.getParameter("frame");
    InputStream in = new ByteArrayInputStream(pic);
    BufferedImage bImageFromConvert = ImageIO.read(in);
    String outdir = "output\\"+frameCount;
    //Random rand = new Random();
    File file = new File(outdir);
    if(file.isFile()){
        if(file.delete()){
            File writefile = new File(outdir);
            ImageIO.write(bImageFromConvert, "png", file);
        }
    } 
```

从视频创建图像的代码

```
String filePath = "D:\\temp\\some.mpg";
    String outdir = "output";
    File file = new File(outdir);
    file.mkdirs();
    Map<String, String> m = System.getenv();

    /*
     * String command[] =
     * {"D:\\ffmpeg-win32-static\\bin\\ffmpeg","-i",filePath
     * ,"-r 30","-f","image2",outdir,"\\user%03d.jpg"};
     * 
     * ProcessBuilder pb = new ProcessBuilder(command); pb.start();
     */
    String commands = "D:\\ffmpeg-win32-static\\bin\\ffmpeg -i " + filePath
            + " -r 30  -f image2 " + outdir + "\\image%05d.png";
    Process p = Runtime.getRuntime().exec(commands); 
```

从图像创建视频的代码

```
String filePath = "output";
    File fileP = new File(filePath);
    String commands = "D:\\ffmpeg-win32-static\\bin\\ffmpeg -f image2 -i "
            + fileP + "\\image%5d.png " + fileP + "\\video.mp4";
    System.out.println(commands);
    Runtime.getRuntime().exec(commands);
    System.out.println(fileP.getAbsolutePath()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-27T13:25:34.813

您已将创建声明为 image%05d.png 并使用它作为 image%5d.png。所以名字少了一个零。就是这样！

# android - SharedPreferences 保存用户配置文件

> ID：12140996
> 
> 赞同：1
> 
> 时间：2012-08-27T11:21:48.947
> 
> 标签：android

我是 SharedPreferences 的新手。我想使用 sharedpreferences 保存用户个人资料，并且用户第二次进入个人资料活动时，他应该会看到他之前填写的详细信息。我怎么能做到这一点？你能给我一些代码吗？

这是我尝试过的，但我不知道在 if else 语句中放什么：

```
import android.app.Activity;
import android.content.SharedPreferences;
import android.os.Bundle;

public class A extends Activity
{
   private static final String MY_KEY = "myprefs";
   private SharedPreferences myPrefs;
   private boolean loggedIn;

  protected void onCreate(Bundle savedInstanceState) 
  {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.iprofile);

   myPrefs = getSharedPreferences(MY_KEY, MODE_PRIVATE);

   loggedIn = myPrefs.getBoolean("loggedIn", false);  //default to false if the value has not been set

   if(loggedIn)
   {
      //do stuff

   }
  else
   {
       //do other stuff
    }
}
} 
```

这是我的 xml 文件： http: [//pastebin.com/gXCHpk0E](http://pastebin.com/gXCHpk0E)和我的 java 类： http: [//pastebin.com/NZJ0CR8H](http://pastebin.com/NZJ0CR8H)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-27T11:38:57.720

让我们假设，你有一个用户类，看起来像这样：

```
class User
{
    private String name;
    private String pass;
    private int age;

    public User(String name, String pass, int age)
    {
        this.name = name;
        ...
    }

    //getters and setters
} 
```

如果需要，您可以在手机的 SharedPreferences 中创建一个静态实用程序函数来读取或写入用户：

```
public class UserCreator
{
    public static User getUser(Context context)
    {
        SharedPreferences prefs = context.getSharedPreferences("Name", Context.MODE_PRIVATE);

        //Check if the user is already stored, if is, then simply get the data from
        //your SharedPreference object.

        boolean isValid = prefs.getBoolean("valid", false);

        if(isValid)
        {
            String user = prefs.getString("user", "");
            String pass = prefs.getString("pass", "");
            int age = prefs.getInt("age", 0); 
            ...
            return new User(user, pass, age); 
        }
        //If not, then store data
        else
        {
            //for example show a dialog here, where the user can log in.
            //when you have the data, then:

            if(...login successful...)
            {
                SharedPreferences.Editor editor = prefs.edit();
                editor.putString("user", "someusername");
                editor.putString("pass", "somepassword");
                editor.putInt("age", 20);
                editor.putBoolean("valid", true);
                ...
                editor.commit();
            }

            return getUser(context);
        }
    }
} 
```

如果你有，那么你可以简单地在你的活动中这样做（实际上是你所有的活动）：

```
User user = UserCreator.getUser(this); 
```

如果存储了用户数据，那么它将返回一个有效的用户对象。如果不是，它会询问用户，直到他/她输入可接受的数据，然后返回一个有效的用户对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T13:14:45.783

检查以下代码段：

```
 SharedPreferences myPrefs = getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
                SharedPreferences.Editor prefsEditor = myPrefs.edit();
                prefsEditor.putString("user", edtsample.getEditableText().toString());
                prefsEditor.commit(); 
```

并检索相同的用户和密码：

```
 SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", Context.MODE_PRIVATE);
    String prefName = myPrefs.getString("SRATE", "srate"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-09T07:10:22.760

您可以使用 sharedpreferences 和文本文件来执行此操作。将配置文件的名称保存在文本文件中，并将其余数据保存在该配置文件名称的 sharedpreference 文件中。这是如何保存它的示例代码：

```
File f = new File("/data/data/<package name>/shared_prefs/"
            + profileName + ".xml");
if (f.exists()) {
    Toast.makeText(this, "Profile with that name already exists", Toast.LENGTH_SHORT).show();
} else {
    try {
        SharedPreferences sharedPreferences = this
            .getSharedPreferences(profileName,
                        Context.MODE_MULTI_PROCESS);
        Editor editor = sharedPreferences.edit();
        editor.putString("phn", phone_det.getText().toString()
                .trim());
        editor.putString("message", message_det.getText()
                    .toString());
        editor.putInt("Year", yrs);
        editor.putInt("Month", mon);
        editor.putInt("Day", da);
        editor.putInt("Hour", hr);
        editor.putInt("Minute", min);
        editor.commit();
        OutputStream outstream = this.openFileOutput(
                "Profiles.txt", Context.MODE_APPEND);
        // if file the available for reading
        OutputStreamWriter outputwriter = new OutputStreamWriter(
                    outstream);
        outputwriter.write(profileName);
        outputwriter.write('\r');
        outputwriter.write('\n');
        outputwriter.close();
    } catch (IOException e) {
        Toast.makeText(this,
        "Saving profile failed," + e.toString(),
        Toast.LENGTH_SHORT).show();
        }
    } 
```

并打开它：

```
 try {
        // open the file for reading
        InputStream instream = openFileInput(
                "Profiles.txt");
        // if file the available for reading
        InputStreamReader inputreader = new InputStreamReader(instream);
        BufferedReader buffreader = new BufferedReader(inputreader);

        String profileName;

        // read every line of the file into the line-variable, on line at
        // the time
        while ((profileName = buffreader.readLine()) != null) {
            Profile objContact = new Profile();
            SharedPreferences sharedPreferences = getActivity()
                    .getSharedPreferences(profileName,
                            Context.MODE_MULTI_PROCESS);
            String phnno = sharedPreferences.getString("phn", "");
            String message = sharedPreferences.getString("message", "");
            String year = String.valueOf((sharedPreferences.getInt("Year",
                    0)));
            int month = (sharedPreferences.getInt("Month", 0));
            String day = String
                    .valueOf((sharedPreferences.getInt("Day", 0)));
            String hour = String.valueOf((sharedPreferences.getInt("Hour",
                    0)));
            String minute = String.valueOf((sharedPreferences.getInt(
                    "Minute", 0)));
            objContact.setName(line);
            objContact.setMessage(message);
            objContact.setDate(DateTime);
            objContact.setPhone(phnno);
            title.add(objContact);
        }
    } catch (java.io.FileNotFoundException e) {
        // do something if the myfilename.txt does not exits
    } 
```

# objective-c - UIImageView/UILabel 属性在直接分配和赋值时始终为 nil

> ID：12140998
> 
> 赞同：2
> 
> 时间：2012-08-27T11:22:01.817
> 
> 标签：objective-c, ios, xcode

我的自定义 UIButton 类中有一个 UIImageView 和一个 UILabel 。

但是，如果我有如下代码

```
self.productImage = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
self.productName = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 20)]; 
```

赋值后 self.productImage 和 self.productName 将始终为 nil。

如果我使用临时变量然后分配给属性，它工作得很好：

```
UIImageView *imgView = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 200, 200)];
self.productImage = imgView;
UILabel *name = [[UILabel alloc] initWithFrame:CGRectMake(0, 0, 200, 20)];
self.productName = name; 
```

我是 Objective-C 的新手，我不知道第一次使用有什么问题。任何建议，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-27T11:44:15.800

根据您的描述，听起来您正在使用 ARC，并且两个属性/实例变量都被声明为`weak`（或`__weak`）。这就是为什么强的局部变量隐式地阻止对象被提前释放。

由于您的自定义按钮计划保留图像和标签，因此您应该通过从它们的声明中`strong`删除来创建属性/实例变量。`weak`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-27T12:03:14.853

尝试一下 ：

```
NSURL *imageurl = [NSURL URLWithString:@"http://www.chakrainteractive.com/mob/ImageUpoad/pic2-2.png"];

NSData *imagedata = [[NSData alloc]initWithContentsOfURL:imageurl];

UIImage *image = [UIImage imageWithData: imagedata];

[logoImg setImage: image]; 
```