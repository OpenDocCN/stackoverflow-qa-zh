# StackOverflow 问答 11107000-11107999

# windows - 关于Windows中网卡如何工作的问题

> ID：11107007
> 
> 赞同：0
> 
> 时间：2012-06-19T18:22:36.793
> 
> 标签：windows, operating-system

我试图弄清楚网卡在 Windows 中是如何工作的，以及数据是如何被中继的。

我有两个假设。

1.

1.  数据由网卡接收。
2.  然后卡将数据放入内部缓冲区，可能是双缓冲区或环形缓冲区。
3.  卡累积数据直到达到一定数量，然后发送中断。
4.  Windows 将数据从卡复制到 RAM 并通知适当的处理程序。

2.

1.  接收数据。
2.  该卡使用 DMA 将数据放入 RAM。（**DMA保证数据不会丢失，还是卡还需要自己的buffer？**）
3.  卡在将足够的数据放入 RAM 时触发中断。
4.  Windows 接收中断并将数据复制或公开给适当的处理程序。

**我的任何一个假设都是正确的吗？**

**如果缓冲区已满，卡或 Windows 是否有任何消息？**

在我的以太网控制器的 Windows 系统属性中，我可以看到名为“接收缓冲区”和“传输缓冲区”的属性，两者都设置为 256。 **这是什么意思？**

**有没有关于这个主题的好文献？**（我有 Tanenbaum 的现代操作系统，但它与 Windows 没有特别的关系。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:29:58.760

您的问题包含（至少！）三个非常非常广泛的主题：

1）[第 2 层（数据链路）](http://en.wikipedia.org/wiki/Data_link_layer)硬件设备如何工作？

2）它与操作系统的[网络堆栈有什么关系](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756985.aspx)

... 和 ...

3）它与操作系统的内核级[设备驱动程序](http://msdn.microsoft.com/en-us/library/windows/hardware/gg490655.aspx)有什么关系？

下一个链接实际上与您的原始问题成 180 度（API 级别相对较高，您的问题与最低软件级别有关），但是查看 .Net API 以了解“事情如何工作”的观点并没有什么坏处：

*   [http://msdn.microsoft.com/en-us/library/4as0wz7t.aspx](http://msdn.microsoft.com/en-us/library/4as0wz7t.aspx)

'希望这会有所帮助......至少有一点......

PS：

Linux 是关于实现网络堆栈的大量信息：所有内核源代码和所有设备驱动程序都是完全可用的，并且有很好的文档记录。

# jquery - 如何删除 ASP.NET ImageButton 的边框

> ID：11107009
> 
> 赞同：3
> 
> 时间：2012-06-19T18:22:39.743
> 
> 标签：jquery, asp.net, css

我有以下 C# 标记：

```
<asp:ImageButton ID="imgBtn" runat="server" CssClass="accordion-icon-close" value="" 
     CommandName="Edit" /> 
```

css类定义如下：

```
.accordion-icon-close
{
    background-image: url("../Images/ui-icons_888888_256x240.png");
    background-repeat: no-repeat;
    background-position: -32px -16px;
    display: block;
    height: 16px;
    width: 16px;
} 
```

这真的很简单，但不知何故，IE 设法干预了图像周围的边框（因为它实际上是 HTML 中的输入标签），因此它们总是可见的。HTML 标记是：

```
<input type="image" name="ctl00$MainContent$gvByPriorityCount$ctl02$imgBtn" id="MainContent_gvByPriorityCount_imgBtn_0" class="accordion-icon-close" value="" src="" /> 
```

**我的问题：** 如何删除 IE 在输入标签周围放置的边框？Firefox 没有显示边界，所以我确信这只是一些糟糕的 IE 行为。

我尝试使用 jQuery 以某种方式覆盖 CSS，但无济于事。

```
$("input[type='image']").css('border-style', 'none !important;'); 
```

此外，我正在使用 IE 8 进行此测试。

谢谢您的帮助！

**HTML**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
<head><title>

</title><link href="Styles/Test.css" rel="stylesheet" type="text/css" />
    <script src="../Scripts/jquery-1.7.2.min.js" type="text/javascript"></script>

    <script type="text/javascript" language="javascript">
        if ($) {
            $(document).ready(function () {
                $("input[type='image']").css('outline', 'none !important;');
            });
        }
    </script>
</head>
<body>
    <form method="post" action="Test.aspx" id="form1">

<div class="aspNetHidden">

    <input type="hidden" name="__EVENTVALIDATION" id="__EVENTVALIDATION" value="/wEWBAKdjqv1AgKv/aZYAq/9uh0Cr/3+9QEioIHaMuCcNMLO+7F1bdAtcLLool6O9sR4U9mtwrnrYQ==" />
</div>
    <div>
    <div>
    <table cellspacing="0" rules="all" border="1" id="gvTest" style="width:100%;border-collapse:collapse;">
        <tr>
            <th scope="col">&nbsp;</th><th scope="col">ID</th>
        </tr><tr>
            <td valign="top">
                    <input type="image" name="gvTest$ctl02$imgBtn" id="gvTest_imgBtn_0" class="accordion-icon-close" value="" src="" style="border-width:0px;border-style:None;" />
                </td><td>1</td>
        </tr><tr>
            <td valign="top">
                    <input type="image" name="gvTest$ctl03$imgBtn" id="gvTest_imgBtn_1" class="accordion-icon-close" value="" src="" style="border-width:0px;border-style:None;" />
                </td><td>2</td>
        </tr><tr>
            <td valign="top">
                    <input type="image" name="gvTest$ctl04$imgBtn" id="gvTest_imgBtn_2" class="accordion-icon-close" value="" src="" style="border-width:0px;border-style:None;" />
                </td><td>3</td>
        </tr>
    </table>
</div>
    </div>
    </form>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T09:35:00.237

我所做的只是在按钮中添加额外的样式：

```
<asp:ImageButton ID="but_qt_status" style="border-width:0px"... 
```

我们在这里使用 IE 8 & 9

# css - 编辑用户注册表 xml

> ID：11107015
> 
> 赞同：0
> 
> 时间：2012-06-19T18:23:05.607
> 
> 标签：css, xml, joomla2.5

在用户注册表中将名称更改为公司名称。这是一种外观变化。请指教xml

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-24T15:22:01.220

假设您使用的是 GB 英语，我相信您要更改的标签`language\en-GB\en-GB.com_users.ini`位于第 64 行/附近的文件中

```
COM_USERS_PROFILE_NAME_DESC="Enter your full name"
COM_USERS_PROFILE_NAME_LABEL="Name:" 
```

# javascript - 在烧瓶下运行 Qunit 测试的最佳方法

> ID：11107017
> 
> 赞同：0
> 
> 时间：2012-06-19T18:23:10.883
> 
> 标签：javascript, python, flask, qunit

我在需要运行的 html 页面上有一组 QUnit 测试。由于此测试涉及使用 AJAX 请求访问服务器的 javascript 函数，因此我无法直接从文件系统运行测试 Html 文件而不会出现此错误：

```
XMLHttpRequest cannot load http://localhost:5000/_get_stats. Origin null is not allowed by Access-Control-Allow-Origin. 
```

在服务器上，我有一个 Flask 应用程序。我想写一个视图来服务我的测试 html，从而绕过访问控制，但我想知道这是否是解决这个问题的推荐方法。任何其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T10:54:53.340

我采用的解决方案是创建一个像这样的视图：

```
@app.route("/_test")
def test():
    return render_template('test.html') 
```

它需要服务器正在运行，但这就是我的重点。

# ruby-on-rails - Ruby on Rails：从单个视图/控制器更新多个模型

> ID：11107019
> 
> 赞同：1
> 
> 时间：2012-06-19T18:23:17.763
> 
> 标签：ruby-on-rails

使用 Ruby 1.8.6 和 Rails 1.2。

型号：`Job`, `JobExtraStop`:

```
class JobExtraStop < ActiveRecord::Base  
  belongs_to :job 
end 

class Job < ActiveRecord::Base 
  belongs_to :lead, :foreign_key => :id 
  has_one :quote, :foreign_key => :id 
  has_many :credit_card 
  has_many :job_extra_stops 
end 
```

查看代码：

主视图

```
<%= render_partial 'jobs/job_address_stop_fields', "stop" => stop, "index"=> index %> 
```

部分称为：

```
 <span class="jasf" id="lead_form_adrr_fields">

 <% fields_for "job_extra_stop[#{index}]", stop do |extra_stop_form| %>
<tr>
         <td><%= extra_stop_form.text_field :st_num, :size => 2%></td>
          <td><%= extra_stop_form.text_field :st_name,  :size => 15%></td>
          <td><%= extra_stop_form.text_field :apt_num,  :size => 2%></td>
          <td><%= extra_stop_form.text_field :city,  :size => 9%></td>
          <td><%= extra_stop_form.text_field :zip,  :size => 5%></td>
          <td><%= extra_stop_form.select(:state,( [[ "Select State", "" ]] + State::NAMES)) %>

          </td>
          <td><%= extra_stop_form.text_field :floor,  :size => 2%></td>
          <td>&nbsp;&nbsp;<%= extra_stop_form.text_field :elevator, :size => 1%></td>
          <td>&nbsp;&nbsp;<%= extra_stop_form.text_field :action_type,  :size => 5%></td>
          <td>&nbsp;&nbsp;<%= extra_stop_form.select(:location_type, ([["pick-up"],["drop-off"],["extra_stop"]] )) %></td>
          <td>&nbsp;&nbsp;<%= extra_stop_form.text_field :note,  :size => 10%></td>
          <td>^ / v</td>
          <td>&nbsp;&nbsp;<%= link_to_function "Remove", "$(this).up('.jasf').remove()" %></td>
</tr> 
<% end %> 
</span> 
```

错误：

> 未定义的局部变量或方法索引

不知道我做错了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:45:40.413

您没有使用正确的语法将局部变量传递给您的局部变量，请在此处检查正确的语法[http://api.rubyonrails.org/classes/ActionView/PartialRenderer.html](http://api.rubyonrails.org/classes/ActionView/PartialRenderer.html)

# c++ - 在 Windows 7 x64 上安装 OpenCV2.4.1 - Mingw 和代码块

> ID：11107022
> 
> 赞同：1
> 
> 时间：2012-06-19T18:23:29.013
> 
> 标签：c++, opencv, mingw, codeblocks

在 Windows 7 x64 上安装 OpenCV2.4.1 - Mingw 和代码块

嗨，我按照这个教程

[在 Windows 7 上开始使用 OpenCV 2.4 和 MinGW](https://stackoverflow.com/questions/10860352/getting-started-with-opencv-2-4-and-mingw-on-windows-7)

我配置了相同的配置，除了 x86，我放的是 x64。

这是示例

```
#include "opencv2/highgui/highgui.hpp"
#include <iostream>

using namespace cv;
using namespace std;

int main(int argc, char** argv)
{
Mat im = imread(argc == 2 ? argv[1] : "lena.jpg", 1);
if (im.empty())
{
cout << "Cannot open image!" << endl;
return -1;
}

imshow("image", im);
waitKey(0);

return 0;
} 
```

当我编译 main.cpp

**C:\Users\rgap\Desktop>g++ -I"C:\opencv\build\include" -L"C:\opencv\build\x64\mingw\lib" main.cpp -lope ncv_core241 -lopencv_highgui241 -o main**

我收到以下错误

```
C:\Users\rgap\AppData\Local\Temp\ccDgmPAT.o:main.cpp:(.text+0x62): undefined reference to `cv::imread(
std::string const&, int)'
C:\Users\rgap\AppData\Local\Temp\ccDgmPAT.o:main.cpp:(.text+0xc7): undefined reference to `cv::_InputA
rray::_InputArray(cv::Mat const&)'
C:\Users\rgap\AppData\Local\Temp\ccDgmPAT.o:main.cpp:(.text+0xfe): undefined reference to `cv::imshow(
std::string const&, cv::_InputArray const&)'
C:\Users\rgap\AppData\Local\Temp\ccDgmPAT.o:main.cpp:(.text+0x120): undefined reference to `cv::waitKe
y(int)'
C:\Users\rgap\AppData\Local\Temp\ccDgmPAT.o:main.cpp:(.text$_ZN2cv3MatD1Ev[cv::Mat::~Mat()]+0x2b): und
efined reference to `cv::fastFree(void*)'
C:\Users\rgap\AppData\Local\Temp\ccDgmPAT.o:main.cpp:(.text$_ZN2cv3Mat7releaseEv[cv::Mat::release()]+0
x3c): undefined reference to `cv::Mat::deallocate()'
collect2: ld devolvió el estado de salida 1 
```

这是一个错误吗？:(

谢谢 ：）

# c# - .exe 程序文件

> ID：11107025
> 
> 赞同：0
> 
> 时间：2012-06-19T18:23:49.320
> 
> 标签：c#, winforms, installation

我已经完成了我的程序，并想将该程序**以其编译状态**发送到其他电脑。

我知道在 Debug 文件夹中有 programName.exe 文件，当我在 PC 上打开它时，我用它创建了它 - 它打开了。但是，如果我将该 .exe 文件发送到其他电脑，它会崩溃或根本无法运行！

有没有办法让其他人在不安装 Visual Studio 的情况下查看和使用我的程序？

我之前在另一个编程网站上问过这个问题，但没有太多帮助，这是他们向我展示的链接，然后我遵循了这个链接：

[http://www.dreamincode.net/forums/topic/58021-deploying-ac%23-application-visual-studio-setup-project/#-application-visual-studio-setup-project/](http://www.dreamincode.net/forums/topic/58021-deploying-a-c%23-application-visual-studio-setup-project/#-application-visual-studio-setup-project/)

安装程序会安装程序，但没有可打开的文件！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:25:24.737

其他机器不需要安装 Visual Studio - 但它们*需要*适当版本的 .NET，具体取决于您构建的对象。如果您以“客户端”配置文件为目标，则 .NET 分发版相当小。

如果需要，您可以构建一个启动 .NET 框架安装的安装项目，但这可能需要大量工作 - 在许多情况下，告诉人们他们需要首先安装什么可能更简单，特别是如果这是为了个人使用或朋友/家人。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:30:10.737

您的项目所依赖的其他 DLL 很可能在仅传输该 .exe 文件时不会被复制。你也可以把它们复制过来。

但是，最佳做法是在安装程序的设置下添加一个新项目。它应该检测这些依赖关系。然后其他用户只需运行创建的 setup.exe（但您必须包含其他生成的文件夹和文件）。打开安装程序项目的文件系统编辑器选项卡。然后在应用程序文件夹中，我右键单击“[主项目]（活动）的主要输出”，然后选择“创建快捷方式...”并将快捷方式放入左侧的程序文件和用户桌面文件夹中。

对于简单的事情，其他 DLL 应该没问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:02:14.997

1.  为您的应用程序创建 MSI 安装程序项目。
2.  复制您的项目输出作为 MSI 安装程序的输入。
3.  .exe 依赖于 .msi 文件，所以当你点击 .exe 时必须验证 msi 文件是否存在于同一目录中。
4.  在运行 .exe 或 .Msi 文件之前验证 .Net 框架和安装 3.0。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-10T20:10:48.717

最简单的方法是：

1：右键单击您的解决方案资源管理器并添加一个新项目。新项目将是一个安装项目，位于其他项目 -> 安装和部署 -> Visual Studio 安装程序下，然后从右侧选择安装项目。2：将所有 bin 文件夹文件添加到 Application 文件夹，然后构建您的解决方案。3：它将创建一个扩展名为 .msi 的文件。您可以将其分发给您想要的任何人，他们不需要任何 VS。

# django - django 模板 - 如果 True 返回 false？

> ID：11107028
> 
> 赞同：2
> 
> 时间：2012-06-19T18:24:01.753
> 
> 标签：django, django-templates

我有这个代码：

```
{% if True %}
    yo!
{% else %}
    what?
{% endif %} 
```

当然，输出是`what?`（当然，因为否则我不会问这个问题，对吗？）

模板世界中不`True`存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:29:41.010

这很有趣，可能被认为是一个错误，但我想这与模板标签的处理方式有关。to 的第一个参数`if`很可能被视为上下文变量，因此它`True`在上下文字典中查找，当然，因为没有`True`键，所以什么也得不到。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T19:18:48.330

发生这种情况是因为您的上下文中没有该`True`对象，因此它解析为虚假。Django 模板不是简单的 Python 包装器。你不会有通常的`globals()`对象，`True`包括在内。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:29:39.200

相关`ifequal`标签的文档说：

> 只能将参数与模板变量或字符串进行比较。您无法检查 Python 对象是否相等，例如 True 或 False。如果您需要测试某事是真还是假，请改用 if 标记。

这可能表明 Django 模板中确实不存在 True 和 False ，除非您使用自定义上下文处理器创建它们。

# c++ - 这个文本颜色有什么问题？

> ID：11107030
> 
> 赞同：0
> 
> 时间：2012-06-19T18:24:05.107
> 
> 标签：c++, openframeworks

我正在使用 xPango 插件的 openFrameworks 使用以下代码呈现文本：

```
ofxPango* pango;
ofxPCContext* context;
ofxPCPangoLayout* layout;
ofImage text_image;

pango = new ofxPango();
context = pango->createContextWithSurface(width, height);
context->color4f(1,1,1, 0.0f);
context->paint();

layout = context->createPangoLayout();
layout->setText(text);
layout->setTextColor(186,34,29, 1.0f);
layout->setWidth(width);
layout->setJustify(true);
//context->paint();

ofxPCPangoFontDescription* fd = new ofxPCPangoFontDescription();
fd->createFromString(font);
    layout->setFontDescription(*fd);
    layout->show();

text_image.allocate(context->getSurface()->getWidth(), context->getSurface()->getHeight(), OF_IMAGE_COLOR_ALPHA);
text_image.setFromPixels(context->getSurface()->getPixels(), text_image.width, text_image.height, OF_IMAGE_COLOR_ALPHA, true); 
```

我很难理解它是如何`layout->setTextColor(r,g,b,a)`工作的。如果我运行：

*   **0,0,0,1** - 文本应为黑色
*   **255,0,0** - 文本应为红色
*   **186,34,29,1** - 文本应该是红色时显示为非常浅的灰色（可能是白色）
*   **186,34,0,1** - 文本是黄色的，虽然它应该是红色的

为什么这些颜色出现错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:45:30.603

我认为颜色值应该在 0.0f 和 1.0f 的范围内，其中：

*   0.0f = 无颜色
*   0.5f = 半色
*   1.0f = 全彩

以下是[开罗图书馆](http://opensource.apple.com/source/WebCore/WebCore-1C25/platform/cairo/cairo/src/cairo-color.c)的一些删节示例，ofxPango 呼吁：

```
color_white
    1.0, 1.0, 1.0, 1.0

color_black
    0.0, 0.0, 0.0, 1.0

color_transparent
    0.0, 0.0, 0.0, 0.0

color_magenta
    1.0, 0.0, 1.0, 1.0 
```

# php - Solaris 10 服务器不会自动执行 php 文件

> ID：11107034
> 
> 赞同：0
> 
> 时间：2012-06-19T18:24:46.157
> 
> 标签：php, unix

我有一台在 Solaris 10 上运行的服务器，每当我访问该地址时，它都会显示为包含所有文件和文件夹的目录，而不是执行 index.php 文件。

有什么方法可以阻止它显示目录并自动执行 php 文件？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:27:32.903

如果您正在谈论 Web 服务器，例如 Apache，您应该使用 PHP 特定模块（例如 mod_php ... PHP 文件，而不仅仅是显示它们。

通常，index.php 文件配置有单独的指令，以允许它们作为目录中的默认文档，例如 index.html

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:32:37.067

```
LoadModule php5_module modules/libphp5.so
AddHandler php5-script .php
AddType text/html .php
DirectoryIndex index.php 
```

# iphone - 向下滑动搜索栏并同时调整同级视图的大小

> ID：11107039
> 
> 赞同：0
> 
> 时间：2012-06-19T18:24:58.680
> 
> 标签：iphone, ios, uitableview, uiedgeinsets

我有一个`UIView`- 叫它`HomeView`包含 a`UITableView`和 a `UISearchBar`。也就是说，它们是子视图。这些被添加到`viewDidLoad`for 中`HomeView`。一张图片胜过千言万语：

![在此处输入图像描述](../Images/a5f6f903d696396d6ec9aca175adfa1f.png)

![在此处输入图像描述](../Images/254e7642fc814a33f30db935879f3db8.png)

从这些屏幕截图中可以看出，`UITableView`一旦显示 ，就会隐藏中的第一项`UISearchBar`。以下是相关代码：

```
- (void) viewDidLoad
  self.table_view = [UITableView.alloc.initWithFrame: self.view.bounds style:UITableViewStylePlain];
  self.table_view.bounds.origin.y += 44;
  self.table_view.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
  // ^^^ This is the code I believe is one source of my problem

// Triggered when search button in nav bar is pressed

// code to calculate delta here

// Here's how the view is animated. The search bar frame
// is dropped down (works), and ideally, the tableview
// drops down exactly the same amount at the same time.
// If the action is to hide, then the inverse happens
// because +delta+ will have been calculated as a
// negative number above.
[UIView animateWithDuration: 0.7
  delay: 0.0
  options: UIViewAnimationOptionCurveEaseIn
  animations:^ {
    self.searchBar.frame = CGRectOffset(@searchBar.frame, 0.0, delta);
  }
  completion:^(BOOL finished){
    self.searchBarVisible = !self.searchBarVisible
    self.searchBar.hidden = !self.searchBarVisible
    edgeInsets = UIEdgeInsetsMake(0.0f, self.searchBarVisible ? delta : 0.0f, 0.0f, 0.0f)
    [tableView setContentInset: edgeInsets]
  }
]; 
```

实际发生的情况是搜索栏按预期向下滑动以响应按下搜索按钮，然后在按下下一个按钮时向上滑动。但是，表格视图永远不会调整。

据我所知，问题在于，在 中，尚未渲染`viewDidLoad`封闭，因此大小尚不清楚。`HomeView`我可以获取屏幕尺寸并使用它，但我认为自动调整大小蒙版是更好的做法，对吧？

这是否有明显的缺陷，有没有办法让表格视图在搜索栏的同时向下动画？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:46:29.997

好吧，让我们再试一次！

在您的动画块中，将您制作 edgeInsets 的行更改为：

```
edgeInsets = UIEdgeInsetsMake(self.searchBarVisible ? delta : 0.0f, 0.0f, 0.0f, 0.0f); 
```

据我所知，第一个参数是顶部，而您设置的参数是左侧插图。

# c# - 连接的 SQL 列返回空值，有解决方法吗？

> ID：11107042
> 
> 赞同：2
> 
> 时间：2012-06-19T18:25:24.300
> 
> 标签：c#, asp.net, sql, listbox

我有一个 sql 语句，它将两列 ItemNumber 和 Name 连接到一个变量中。我将此变量用作列表框的 DataTextField。一切似乎都很好。不过我确实发现了一个问题。某些行在 Name 字段中有一个空值，当它返回变量时，该变量为空。

所以我问是否有任何方法可以检查该空值，而是只将项目编号放在它的位置？

这是我的 SQL 语句

```
SELECT ProductID, Name, CustItemNum, CustItemNum + ' - ' + Name AS itemNumName
FROM Item it inner join JITVendors jit on it.Catalog_code = jit.Catalog_code 
WHERE jit.VendorName = 'Vendor' 
ORDER BY Name 
```

如果有任何其他可能有用的代码，请告诉我，我将能够提供。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:27:02.143

您可以使用空字符串[`coalesce`](http://msdn.microsoft.com/en-us/library/ms190349.aspx)替换名称：`null`

```
CustItemNum + coalesce(' - ' + Name,'') AS itemNumName 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:30:09.367

正如评论中建议的@ashes999，您可以使用`ISNULL`：

```
SELECT ProductID, Name, CustItemNum, ISNULL(CustItemNum,'') + ' - ' + ISNULL(Name,'') AS itemNumName
FROM Item it inner join JITVendors jit on it.Catalog_code = jit.Catalog_code 
WHERE jit.VendorName = 'Vendor' 
ORDER BY Name 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:31:25.017

另一个尚未提及的选项，如果您想在任何地方都这样做，而无需每次都手动合并空字符串：

```
SET CONCAT_NULL_YIELDS_NULL OFF 
```

（默认开启）。启用时，将 NULL 连接到字符串会产生 NULL。关闭时，此服务器选项在将字符串连接在一起时将其视为空字符串（例如，在关闭时连接到 NULL 的任何字符串都将产生原始字符串）。

[http://msdn.microsoft.com/en-us/library/ms176056.aspx](http://msdn.microsoft.com/en-us/library/ms176056.aspx)

# windows - 奇怪的 Windows DIR 命令行为

> ID：11107044
> 
> 赞同：18
> 
> 时间：2012-06-19T18:25:29.257
> 
> 标签：windows, command-line, batch-file, cmd, dir

我在查找名称中带有数字的文件时偶然发现了这一点。当我输入：

**`dir`** `*`*数字*`*`

（其中 number 表示从 0 到 9 的任何数字，星号和数字之间没有空格）

在 cmd.exe 命令提示符下，它会返回各种文件中未出现的任何文件以符合搜索条件。奇怪的是，根据目录，一些数字会起作用，而其他数字则不起作用。例如，在与网站关联的目录中，我键入以下内容：

```
dir *4* 
```

返回的是：

```
C:\Ampps\www\includes\pages 目录

2012 年 4 月 30 日下午 03:55 153 inventory_list_retrieve.php
2012 年 6 月 18 日上午 11:17 6,756 ix.html
2012 年 6 月 19 日下午 1:47 257,501 jquery.1.7.1.js
               3 个文件 264,410 字节
               0 Dir(s) 362,280,906,752 字节空闲

```

这对我来说没有任何意义。有什么线索吗？

这个问题是在 stackOverflow 上提出的，因为 DIR 命令在批处理程序中经常与 FOR 结合使用。如果使用 DIR 命令，奇怪的 DIR 行为似乎会使批处理程序可能不可靠。

编辑：（附加说明）。虽然已经过去了很长时间，但我发现了另一个怪癖，这几乎让我付出了很多工作。我想删除`.htm`特定目录树中的所有文件。我在做之前意识到它也`*.htm`匹配`.html`文件。此外，`*.man`matches `.manifest`，可能还有其他。至少可以说，删除`.html`该特定目录中的所有文件会令人不快。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-19T19:08:34.603

命令提示符处的通配符与长文件名和短“8.3”名称（如果存在）匹配。这会产生惊喜。

要查看短名称，请使用该命令的`/X`选项。`DIR`

请注意，此行为不以任何方式特定于`DIR`命令，并且当通配符与任何命令（例如`DEL`.

与 *nix shell 不同，用匹配名称列表替换文件模式是在每个命令中实现的，而不是由 shell 本身实现的。这可能意味着不同的命令可以实现不同的通配符模式规则，但实际上这种情况很少见，因为 Windows 提供 API 调用来搜索目录中与模式匹配的文件，并且大多数程序以明显的方式使用这些调用。对于使用“常用”工具以 C 或 C++ 编写的程序，该扩展由 C 运行时库使用 Windows API “免费”提供。

有问题的 Windows API 是[`FindFirstFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364418%28v=vs.85%29.aspx)及其近亲[`FindFirstFileEx()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364419%28v=vs.85%29.aspx),[`FindNextFile()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364428(v=vs.85).aspx)和[`FindClose()`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364413(v=vs.85).aspx).

奇怪的是，尽管文档`FindFirstFile()`将其 lpFileName 参数描述为“目录或路径，以及可以包含通配符的文件名，例如星号 ( `*`) 或问号 ( `?`)”，但它从未真正定义`*`和`?`字符的含义.

文件模式的确切含义在 1970 年代早期的[CP/M](http://en.wikipedia.org/wiki/CP/M)操作系统中已有历史，它强烈影响了 MSDOS 的设计（有些人可能会说“直接复制”而不是“影响”）。这导致了许多“有趣的”工件和行为。[在 2007 年的这篇博客文章](http://blogs.msdn.com/b/oldnewthing/archive/2007/12/17/6785519.aspx)中描述了 DOS 端的一些内容，其中 Raymond 准确地描述了文件模式是如何在 DOS 中实现的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-19T19:00:06.527

是的。如果您尝试以下操作，您会看到它还会搜索短名称：

```
dir /x *4* 
```

（/x 开关用于短名称）

过滤文件名使用：

```
dir /b | find "4" 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-06-19T19:34:19.100

引用RBerteig的回答：

> 请注意，此行为并非特定于 DIR 命令，并且当通配符与任何命令（例如 DEL）的匹配程度超出预期时，可能会导致其他（通常是令人不快的）意外。

即使对于非常讨厌的 FOR 命令，上述情况也是如此。

```
for %A in (*4*) do @echo %A contains a 4 
```

还将搜索短名称。解决方案再次是使用 FIND 或 FINDSTR 以更可靠的方式过滤掉名称。

```
for %A in (*) do @echo %A | >nul findstr 4 && echo %A contains a 4 
```

*注意 - 如果在批处理文件中使用命令，请将 %A 更改为 %%A。*

将 FOR 与 FINDSTR 结合使用是一种通用方法，可以安全地使用遇到短文件名问题的任何命令。只需将 ECHO 替换为问题命令，例如 COPY 或 DEL。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-19T19:08:18.287

似乎 dir 命令搜索引擎盖下的短（8.3 方式）文件名。

当我调用`dir *1*`这就是我得到的：

```
 Volume in drive C is System
 Volume Serial Number is F061-0B78

 Directory of C:\Users\Piotrek\Desktop\Downloads
2012-05-20  17:33        23 639 040 gDEBugger-5_8.msi
2012-05-20  17:30           761 942 glew-1.7.0.zip
2012-05-20  17:11         9 330 176 irfanview_plugins_433_setup.exe
2012-05-24  20:17         4 419 192 SumatraPDF-2.1.1-install.exe
2012-05-15  22:55         3 466 248 TrueCrypt Setup 7.1a.exe
               5 File(s)  1 127 302 494 bytes 
```

列出的文件中有一个`gDEBugger-5_8.msi`文件，其中显然没有任何`1`字符。

`/X`当我将switch 与 dir 命令一起使用时，一切都变得清晰起来，这使得 dir 使用 8.3 文件名。命令的输出`dir /X *1*`：

```
 Volume in drive C is System
 Volume Serial Number is F061-0B78

 Directory of C:\Users\Piotrek\Desktop\Downloads

2012-05-20  17:33        23 639 040 GDEBUG~1.MSI gDEBugger-5_8.msi
2012-05-20  17:30           761 942 GLEW-1~1.ZIP glew-1.7.0.zip
2012-05-20  17:11         9 330 176 IRFANV~1.EXE irfanview_plugins_433_setup.exe
2012-05-24  20:17         4 419 192 SUMATR~1.EXE SumatraPDF-2.1.1-install.exe
2012-05-15  22:55         3 466 248 TRUECR~1.EXE TrueCrypt Setup 7.1a.exe
               5 File(s)  1 127 302 494 bytes 
```

引用 dir 的帮助：

```
/X          This displays the short names generated for non-8dot3 file
            names.  The format is that of /N with the short name inserted
            before the long name. If no short name is present, blanks are
            displayed in its place. 
```

# ruby-on-rails - 防止在rails 3中具有嵌套形式的重复模型对象

> ID：11107045
> 
> 赞同：2
> 
> 时间：2012-06-19T18:25:32.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, has-many-through

我为接受_nested_attributes_for 成分的食谱模型设置了一个表单。表单和保存工作正常，但是，我想检查数据库中每个成分的存在。该表单似乎正在为成分创建新记录，即使它们已经存在于数据库中。

食谱和配料使用“has_many :through”关系关联。是否有一种干净的方法可以确保在提交表单时重复成分，但仍然建立关系？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:28:03.903

类似的问题可能会对您有所帮助，尽管解决方案不是那么优雅

[Rails 在多对多上嵌套表单：如何防止重复？](https://stackoverflow.com/questions/10717797/rails-nested-form-on-many-to-many-how-to-prevent-duplicates)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T01:28:49.247

这是关于您如何从用户那里获取输入 - 您的表单是。如果您在配方的新/编辑形式中对成分有多项选择输入，并且在那里显示所有现有成分，则用户可以选择现有成分，并且这些表单中的 POST/PUT 将现有成分的 ID 作为表单的一部分数据。这不会产生新的成分。

# vb.net-2010 - 如何替换 vb.net 中数组中的特定值

> ID：11107047
> 
> 赞同：1
> 
> 时间：2012-06-19T18:25:37.683
> 
> 标签：vb.net-2010

任何人都可以给我任何指示。我有一个文本文件，其中包含已读入数组并显示在`ListBox`. 我需要能够向数组中添加新的日期和值，以及检查数组中的现有日期，以便我可以提示用户覆盖或取消。

我正在努力解决的部分（请原谅我是新手）是如果用户选择覆盖，如何替换数组中的值。下面的代码是我用来检查数组中是否存在日期的代码，我需要做的是替换与日期相关的现有值并`ListBox`用新数据更新。

有 2 个数组`Dates`，`Values`显示在`ListBox`

```
If Dates.Contains(Format(DateTimePicker2.Value, "dd/MM/yyyy")) Then
    MsgBox("Do You Wish To Overwrite Record?", MsgBoxStyle.YesNo, "Data already exists")
    If MsgBoxResult.No Then
       Exit Sub
    ElseIf MsgBoxResult.Yes Then
        Don't know what to do here !!!!!
End If 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:38:10.090

您需要在 Else 块中添加类似的内容（如果 ListBox 索引与 Dates 数组相同）

```
Dates(ListBox.SelectedIndex) = (your new value) 
```

通常就是这么简单。当然我跳过了推荐的验证，但我想它会给你一个关于如何编码你的东西的提示。

# yii - yii 框架：如何给单选按钮添加标签？

> ID：11107054
> 
> 赞同：1
> 
> 时间：2012-06-19T18:26:16.197
> 
> 标签：yii

> **可能重复：**
> [Yii CHtml::radioButtonList - CSS 水平对齐](https://stackoverflow.com/questions/7128803/yii-chtmlradiobuttonlist-css-to-align-horizontally)

我是 yii 框架的新手，怀疑可能很愚蠢！

我想写一个带有标签的单选按钮代码！

我的代码如下

```
<div class="column">
<?php echo $form->radioButton($model,'radio',false); ?>
<?php echo $form->error($model,'radio'); ?>
</div>

<div class="row">
<?php echo $form->labelEx($model,'I need a room'); ?>
</div> 
```

但是不好看！有没有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:44:39.597

我在网上找到了代码！分享它，它可能对将来的某人有用

```
<?php echo  $form->radioButtonList($model,'radio',array('m'=>'male','f'=>'female'),array('separator'=>'', 'labelOptions'=>array('style'=>'display:inline'))); ?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:00:08.367

以下代码将为使用“radio”属性创建的单选按钮创建一个标签。将此代码放在'echo $form->radiob.....'之后

```
<?php echo CHtml::activeLabel($model, 'radio', array('label' => 'My Label', 'style'=>'display:inline')); ?> 
```

使用 display:inline 或添加一个 css 类来获取您想要的标签。

# codeigniter - CodeIgniter 配置文件找不到数据库信息？

> ID：11107056
> 
> 赞同：0
> 
> 时间：2012-06-19T18:26:17.883
> 
> 标签：codeigniter

我遇到数据库连接问题。这是我得到的错误：

```
Unable to connect to your database server using the provided settings.

Filename: core/Loader.php

Line Number: 338 
```

这是我的 database.php 文件设置：

```
$db['default']['hostname'] = 'localhost';
$db['default']['username'] = 'user';
$db['default']['password'] = 'password';
$db['default']['database'] = 'dvp';
$db['default']['dbdriver'] = 'mysql';
$db['default']['dbprefix'] = '';
$db['default']['pconnect'] = TRUE;
$db['default']['db_debug'] = TRUE;
$db['default']['cache_on'] = FALSE;
$db['default']['cachedir'] = '';
$db['default']['char_set'] = 'utf8';
$db['default']['dbcollat'] = 'utf8_general_ci';
$db['default']['swap_pre'] = '';
$db['default']['autoinit'] = TRUE;
$db['default']['stricton'] = FALSE; 
```

我已将此代码放在我的 database.php 文件的底部：

```
echo '<pre>';
     print_r($db['default']);
  echo '</pre>';

  echo 'Trying to connect to database: ' .$db['default']['database'];
  $dbh=mysql_connect
  (
    $db['default']['hostname'],
    $db['default']['username'],
    $db['default']['password'])
    or die('Cannot connect to the database because: ' . mysql_error());
    mysql_select_db ($db['default']['database']);

    echo '<br />   Connected OK:'  ;
    die( 'file: ' .__FILE__ . '--> Line: ' .__LINE__); 
```

并显示以下信息：

```
Array
(
    [hostname] => localhost
    [username] => user
    [password] => password
    [database] => dvp
    [dbdriver] => mysql
    [dbprefix] => 
    [pconnect] => 1
    [db_debug] => 1
    [cache_on] => 
    [cachedir] => 
    [char_set] => utf8
    [dbcollat] => utf8_general_ci
    [swap_pre] => 
    [autoinit] => 1
    [stricton] => 
)

Trying to connect to database: dvp
Connected OK 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:42:29.810

呃，发现问题了。有人在另一个文件中手动添加了第二组数据库设置，并从那里调用它们。真是一团糟！

# c# - Math .NET 中矩阵索引的表示法

> ID：11107057
> 
> 赞同：0
> 
> 时间：2012-06-19T18:26:21.783
> 
> 标签：c#, .net, math, math.net

当使用 Math .NET 中的 DenseMatrix 并且我想访问第二列第三行时，我是否写`matrix[1,2]`或者`matrix[2,1]`换句话说，第一个索引确定行还是列？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:29:01.500

快速搜索会产生以下文档：

[http://api.mathdotnet.com/Numerics/MathNet.Numerics.LinearAlgebra.Double/DenseMatrix.htm](http://api.mathdotnet.com/Numerics/MathNet.Numerics.LinearAlgebra.Double/DenseMatrix.htm)

虽然它缺少您要问的内容，但它确实具有 RowCount 属性，您可以查询以找到答案。

*现在运行测试*

* * *

是`[row, column]`。

```
public virtual T this[int row, int column]
{
    get
    {
        RangeCheck(row, column);
        return At(row, column);
    }

    set
    {
        RangeCheck(row, column);
        At(row, column, value);
    }
} 
```

# git - 如何使用 git grep 命令默认显示行号？

> ID：11107059
> 
> 赞同：45
> 
> 时间：2012-06-19T18:26:32.623
> 
> 标签：git

我知道我可以使用`-n`标志`git grep`来显示结果的行号，即

```
git grep -n "some string" 
```

但是我怎么能在不创建别名的情况下默认包含这个标志呢？我找到`git config --global grep.lineNumber true`了，但它似乎对我不起作用。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-11-24T18:49:04.673

从 git grep 手册：

```
Options:

   -n, --line-number
       Prefix the line number to matching lines. 
```

* * *

```
Configuration:

   grep.lineNumber
       If set to true, enable -n option by default. 
```

全局开启：`git config --global grep.lineNumber true`

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-06-19T18:34:45.783

我`grep.lineNumber`使用你的命令设置了我，它对我有用。

你考虑过使用[`ack`](http://betterthangrep.com)吗？它对程序员更加友好，并且出现在大多数主要 Linux 发行版的存储库中。

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2013-06-21T01:53:40.180

在 .gitconfig 文件下

添加此部分

```
[grep]                                                                                                                           
  linenumber = true 
```

如果您使用 git grep 将显示行号

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-12-21T19:59:33.510

您使用的命令

```
git config --global grep.lineNumber true 
```

是默认启用 -n 选项的正确方法。

但是这个功能直到 v1.7.5-rc1 才可用。查看您当地的文件以获取更多信息。

```
git grep --help 
```

另外，如果您有兴趣，这里是介绍此功能的提交：

[grep：允许通过配置默认开启 -E 和 -n](https://github.com/git/git/commit/b22520a37c8472751f2c4b3da9b5bc4e5aa5a0a3)

# ios - 日历中缺少“在我的 iPhone 上”（本地）选项？

> ID：11107062
> 
> 赞同：2
> 
> 时间：2012-06-19T18:26:34.643
> 
> 标签：ios, cocoa-touch, ios5

我在网络上的其他地方发现了这个问题，但没有答案。我只是在开发日历应用程序时注意到了同样的事情，这对我来说似乎是个问题：

> 我一直在我的 iPhone 上*本地*保存我的联系人和日历，我的手机曾经将此组称为“在我的 iPhone 上”......在 iOS5 和 iCloud 更新之后，唯一的选择是 iCloud。不再有“在我的 iPhone 上”选项，当我在国外旅行并且没有数据连接来更新 iCloud 的在线联系人时，我需要它，我在网上查看，他们说导入 SIM 联系人会带回来，然后再次给我在我的 iPhone 上的选项，唯一的选项是 iCloud。如何恢复“在我的 iPhone 上”或*离线*联系人。？

当我从我的程序中检查事件存储 (EKEventStore) 时，我可以看到 calendars 数组包含本地日历，包括我的应用程序创建的自定义日历。但我在我的设备上看不到这些本地日历。另外，我看不到如何在设备上启用它们。

这可能是在升级到 iOS 5.0、5.1 或 5.1.1 之后发生的，但我不能确定。我有可能一次在设备上同时看到一组本地日历和一组 iCloud 日历。现在我只看到 iCloud 日历。

# mysql - 从 MySQL 表中删除部分重复项

> ID：11107077
> 
> 赞同：1
> 
> 时间：2012-06-19T18:27:23.827
> 
> 标签：mysql, sql

我有一张看起来像这样的桌子

```
Id  FirstName
5   Adam
6   Bob
8   Bob
5   Carl
5   Dewie
8   Ernest 
```

当两行具有相同的 Id 时，我只想保留其中一个。在这个例子中，我会得到

```
Id  FirstName
5   Adam
6   Bob
8   Bob 
```

有简洁的命令吗？我在想

```
SELECT * FROM Persons HAVING(COUNT(Id)=1) 
```

或者

```
SELECT DISTINCT(Id), FirstName FROM Persons 
```

但我的语法不正确。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:30:54.937

希望你正在寻找这个::

```
SELECT * from Persons GROUP BY Id 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:31:15.983

```
SELECT Id, MIN(FirstName)
FROM Persons
GROUP By Id 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:52:46.997

您的`DISTINCT`查询也将起作用，您只需要添加`GROUP BY id`

```
SELECT DISTINCT(Id), FirstName
FROM Persons 
GROUP BY id; 
```

## [演示](http://sqlfiddle.com/#!2/5ee84/4)

# css - 紫色和白色混合渐变

> ID：11107080
> 
> 赞同：0
> 
> 时间：2012-06-19T18:27:26.867
> 
> 标签：css

对于使用 CSS 的按钮渐变，我怎么可能将#fff 与紫色结合起来以实现稍微接近此图像边缘的白色/紫色背景？

![在此处输入图像描述](../Images/78144374a75841c1da68aa9861086ebe.png)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:16:43.537

使用链接的工具@Diodeus，我创建了一个可以调整的设置：

[http://www.colorzilla.com/gradient-editor/#a8a8a8+0,2300b2+100;自定义](http://www.colorzilla.com/gradient-editor/#a8a8a8+0,2300b2+100;Custom)

这是在行动：

[http://jsfiddle.net/vCYUX/1/](http://jsfiddle.net/vCYUX/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:35:28.870

使用[ColorZilla 渐变生成器](http://www.colorzilla.com/gradient-editor/)。

# java - 如何在 Oracle 中全局（或按会话）限制结果集？

> ID：11107088
> 
> 赞同：4
> 
> 时间：2012-06-19T18:27:45.963
> 
> 标签：java, sql, oracle, jakarta-ee, oracle11g

我尝试限制结果集的大小，而不必更改应用程序中的每个 SQL 语句（至少例如）。因此，向每个查询添加`ROWNUM`子句不是一种选择。

我或多或少地在寻找一些全局参数，或者至少是一个会话参数（如`SET ROWCOUNT`在 SQLServer 中）。

该应用程序使用 JDBC 资源池连接到 Oracle，因此我可以在 SQL 初始化 JDBC 池中设置会话范围的参数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:20:36.543

您是否尝试过使用[Statement.setMaxRows 方法](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/Statement.html#setMaxRows%28int%29)？这是一种标准的 JDBC 方法，它会在获取指定的最大数量后静默删除行。

但是，从性能的角度来看，实际修改发送到数据库的查询可能会更好地为您服务。如果您按照@MK 的建议进行操作，您将告诉优化器您只会获取 N 行。这可能允许优化器选择更有效的计划。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:32:38.147

我怀疑没有办法做到这一点。您可以创建一个 AOP 建议，该建议将通过将查询包装为来修改每个 executeQuery() 调用

```
"select * from ( " + origQuery + " ) where ROWNUM <= 5" 
```

但我希望这是我们正在谈论的临时或测试的事情。

# jquery - Qtip2 在 IE8 中运行缓慢

> ID：11107089
> 
> 赞同：1
> 
> 时间：2012-06-19T18:27:48.617
> 
> 标签：jquery, qtip2

我使用 qtip2 通过这种方式在我的图像上方显示消息框：

```
$('#july').qtip({
   content: {text: $('div#messages_box div.message_july')}, 
   show: {event: 'click', delay: 0},
   hide: {event: 'unfocus'},
   position: {my: 'left center', at: 'right center', target: '#july'},
   style: {classes: 'ui-tooltip-rounded ui-tooltip-mine ui-tooltip-shadow', width: '350px', tip: {width: 20, height: 15}}
}); 
```

在 Firefox、IE7、IE9 中它工作正常但 IE8 我必须等待大约 5-6 秒才能在点击后显示它。

有人对此有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:46:39.313

我找到了一个解决方案：在 jQuery 元素中，只需添加 .html()。通过这种方式，我们将所有节点内容作为消息获取并丢失了节点，但显示速度确实更快。

```
$('#july').qtip({
   content: {text: $('div#messages_box div.message_july').html()}, 
   show: {event: 'click', delay: 0},
   hide: {event: 'unfocus'},
   position: {my: 'left center', at: 'right center', target: '#july'},
   style: {classes: 'ui-tooltip-rounded ui-tooltip-mine ui-tooltip-shadow', width: '350px', tip: {width: 20, height: 15}}
}); 
```

谢谢

# php - 这个类会启动第二个mysql连接吗？

> ID：11107090
> 
> 赞同：0
> 
> 时间：2012-06-19T18:27:51.037
> 
> 标签：php, class, inheritance

在从 MySQL 迁移到 MySQLi 和 OO 代码之后，我开始制作我的第一个 DB 类。在阅读了许多教程之后，我留下了一个简单的谜题：我的代码会打开两个到 MySQL 的连接，如果是，我该如何阻止它？我目前使用一个表 (azgoth_en) 用于一般用户数据，另一个表 sess 用于会话数据（为其构建第二个类）。我的代码如下：

```
class db {
        protected $connection, $lang;

        [...]

        function __construct($db='azgoth_en',$lang='en',$host='localhost',$uz='root',$pw='') {
            $this->lang=$lang;
            $mysqli=mysqli_connect($host,$uz,$pw,$db);
            if ($mysqli) {
                $this->connection=$mysqli;
                unset($mysqli);
            }
            else die('Mysql failed ('.mysqli_errno($mysqli).'): '.mysqli_error($mysqli));
        }       
    }

    class sessions extends db {
        var $connection;

        function open() {return true;}
        function close() {return true;}

        function read($id){
        $foo=$this->connection;
        var_dump($foo);
        #echo '_read var dump: ',var_dump(parent::query("SELECT * FROM sess")),'<hr>';
        #$id=parent::connection->real_escape_string($id);
        /*$result=mysqli_query($langCon,"SELECT `data` FROM `sess` WHERE `id`='{$id}' LIMIT 1");
        if ($result && mysqli_num_rows($result)) {
            echo '_read result found<hr>';
            $record = mysql_fetch_assoc($result);
            return $record['data'];
        } */
        return null;
        }
    }
    $db=new db;
    $sessions=new sessions; 
```

如果这对你们大多数人来说似乎是常识，请原谅我，但我读过的每一个教程都只提到了静态方法/变量继承，而没有提到我在这里实际遇到的内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:30:18.637

每次实例化对象时它都会打开一个连接，例如

```
$db1 = new db;
$db2 = new db;
$db3 = new db; 
```

将为您提供 3 个具有 3 个单独连接的 db 对象。如果您只想要一个 SINGLE db 连接，无论 db 对象被实例化多少次，那么您都需要考虑使用[singleton](http://en.wikipedia.org/wiki/Singleton_pattern)。

# java - 使用 Java 的堆栈 GUI

> ID：11107093
> 
> 赞同：3
> 
> 时间：2012-06-19T18:28:15.513
> 
> 标签：java, swing, user-interface

我正在使用 Java 制作 Stack 的 GUI。这是我的代码

```
 private void StackActionPerformed(java.awt.event.ActionEvent evt) 
    {

      b1=new JButton("Push");
      b2=new JButton("Pop");
      b3=new JButton("Peek");
      b4=new JButton("Clear");
      b1.addActionListener(new java.awt.event.ActionListener() {
        public void actionPerformed(java.awt.event.ActionEvent evt) {
            pushButtonActionPerformed(evt);
        }
      });
      tb.add(b1);
      tb.add(b2);
      tb.add(b3);
      tb.add(b4);
      frame_st.add(tb);
      frame_st.setExtendedState(Frame.MAXIMIZED_BOTH);

  } 
```

在这里，我正在向我的工具栏 (tb) 添加按钮，一切正常。我没有收到任何错误。但是编译后没有得到想要的结果。toolBar(tb) 无法添加按钮（b1、b2 等）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:51:16.673

如果您在渲染 GUI 之后添加组件，请不要忘记在更改容器所包含的组件后重新验证和重新绘制容器。

```
private void StackActionPerformed(java.awt.event.ActionEvent evt) 
{
   b1=new JButton("Push");
   b2=new JButton("Pop");
   b3=new JButton("Peek");
   b4=new JButton("Clear");
   b1.addActionListener(new java.awt.event.ActionListener() {
      public void actionPerformed(java.awt.event.ActionEvent evt) {
         pushButtonActionPerformed(evt);
      }
   });
   tb.add(b1);
   tb.add(b2);
   tb.add(b3);
   tb.add(b4);    
   frame_st.add(tb);
   frame_st.setExtendedState(Frame.MAXIMIZED_BOTH);
   JPanel contentPane = (JPanel)frame.getContentPane();
   contentPane.revalidate();
   contentPane.repaint();
} 
```

这里的关键是您的 tb JPanel 和 JFrame contentPane 使用什么布局管理器？

# regex - .htaccess 301 使用正则表达式重定向

> ID：11107094
> 
> 赞同：1
> 
> 时间：2012-06-19T18:28:23.143
> 
> 标签：regex, .htaccess, mod-rewrite, redirect, apache2

我需要更新我的 .htaccess 文件以将所有 URL 永久重定向`http://example.com/pages/5604/article/something/?page=299`到`http://example.com/pages/5604/article/`. 这是我的实现（遗憾的是它不起作用）：

`RewriteRule ^pages/(.*)/(.*)/something/\?page=(.*) /pages/$1/$2 [R=301,L]`

提前感谢您的帮助和建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:33:51.223

`QUERY_STRING`不在匹配的 url 中，您必须在`RewriteCond`. 类似（未经测试）：

```
RewriteCond %{QUERY_STRING} ^page=(.*) 
# Apache >=  2.4
RewriteRule ^pages/(.*)/(.*)/something/ /pages/$1/$2 [R=301,L,QSD]
# Apache <  2.4 
RewriteRule ^pages/(.*)/(.*)/something/ /pages/$1/$2? [R=301,L] 
```

如果您需要`page=`在 your之后的值`RewriteRule`，您可以`%1`按照您使用的相同方式使用`$1`（匹配`RewriteCond`'s 是`%N`, in `RewriteRule` `$N`）

# c++ - 导出的 DLL 函数没有按词法排序？

> ID：11107095
> 
> 赞同：4
> 
> 时间：2012-06-19T18:28:24.263
> 
> 标签：c++, windows, portable-executable

好吧，今天我遇到了一个奇怪的问题。不久前，我编写了自己的 GetProcAddress 版本，以从远程进程获取函数地址。我显然花了很多时间阅读 PE 架构来找出解决这个问题的最佳方法。

从 PECOFF v8 规范（我认为它是最新的官方规范）中，有以下关于 的符号`Export Name Pointer Table`：

> 导出名称指针表是导出名称表中的地址数组 (RVA)。每个指针都是 32 位，并且相对于图像库。指针按词法排序以允许二进制搜索。

所以我在编写我的 GetProcAddress 版本时考虑到了这一点。显然，使用二进制搜索而不是线性搜索，在 say...KERNEL32.dll（1300 多个导出函数）中遍历导出表会大大提高效率。

这工作了一段时间，直到今天我遇到了一个奇怪的问题。看来 Kernel32 中的一些导出函数实际上并没有按词法排序，这使我的二进制搜索失败了。以下是使用我将在下面发布的函数的导出 Dll 转储的摘录：

```
Ordinal: 810    Name: K32QueryWorkingSetEx
Ordinal: 811    Name: LCIDToLocaleName
Ordinal: 812    Name: LCMapStringA
Ordinal: 813    Name: LCMapStringEx
Ordinal: 814    Name: LCMapStringW
Ordinal: 815    Name: LZClose
Ordinal: 816    Name: LZCloseFile
Ordinal: 817    Name: LZCopy
Ordinal: 818    Name: LZCreateFileW
Ordinal: 819    Name: LZDone
Ordinal: 820    Name: LZInit
Ordinal: 821    Name: LZOpenFileA
Ordinal: 822    Name: LZOpenFileW
Ordinal: 823    Name: LZRead
Ordinal: 824    Name: LZSeek
Ordinal: 825    Name: LZStart
Ordinal: 826    Name: LeaveCriticalSection
Ordinal: 827    Name: LeaveCriticalSectionWhenCallbackReturns
Ordinal: 828    Name: LoadAppInitDlls
Ordinal: 829    Name: LoadLibraryA
Ordinal: 830    Name: LoadLibraryExA 
```

有人发现这里的问题吗？尽管文档声称导出表是按词法排序的，但 LZRead 列在 LeaveCriticalSection 之前。

在处理字符串时，我总是将词汇排序与字母排序同义，我在这里错了还是 Kernel32 的导出表存在一些奇怪的问题？

**用于转储导出的函数：**

```
void DumpExports(PBYTE pBase)
{
    freopen("B:\\PeDump.txt", "wb", stdout);
    IMAGE_DOS_HEADER *pDosHd = (IMAGE_DOS_HEADER*)pBase;
    IMAGE_NT_HEADERS *pNtHd = (IMAGE_NT_HEADERS*)(pBase + pDosHd->e_lfanew);
    IMAGE_DATA_DIRECTORY expDir = pNtHd->OptionalHeader.DataDirectory[IMAGE_DIRECTORY_ENTRY_EXPORT];
    if (expDir.Size)
    {
        IMAGE_EXPORT_DIRECTORY *pExpDir = (IMAGE_EXPORT_DIRECTORY*)(pBase + expDir.VirtualAddress);
        WORD *pOrds = (WORD*)(pBase + pExpDir->AddressOfNameOrdinals);
        DWORD *pNames = (DWORD*)(pBase + pExpDir->AddressOfNames);

        for(unsigned long i = 0; i < pExpDir->NumberOfNames; i++, pOrds++, pNames++)
            printf("Ordinal: %d\tName: %s\n", *pOrds, (char*)(pBase + *pNames));
    }
    else
    {
        printf("No functions are exported from this image.\n");
    }
    fflush(stdout);
    freopen("CON", "w", stdout);
} 
```

编辑：我是个白痴。当然，“Z”在“o”之前，现在是凌晨 3 点，我的大脑无法正常工作。很抱歉。

编辑编辑：好的，我并不完全疯了。问题的一半显然是 C# 的 string.CompareTo 扩展不进行词法比较。

例如

```
"LoadLibraryW".CompareTo("LZRead"); 
```

返回“-1”。这是我困惑的根源。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T18:31:10.703

`LZRead``LeaveCriticalSection`在使用 ascii之前按字典顺序排列。不要使用不区分大小写，它看起来会起作用。

* * *

关于文档的有趣观察。

> *每个指针都是 32 位...按词法排序以允许二进制搜索*。

很难理解为什么要对指针（而不是符号名称）进行二进制搜索，但这就是所说的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:31:01.740

大写的字符序号在小写的序号之前。

# iphone - “iOS 线程编程指南”中的条件示例

> ID：11107096
> 
> 赞同：0
> 
> 时间：2012-06-19T18:28:26.167
> 
> 标签：iphone, objective-c, ios, multithreading, conditional-statements

在阅读“iOS 线程编程指南”时，我对“使用条件”部分中的示例代码感到困惑。

请看示例**4-3**和示例**4-4**，它们用于演示 NSCondition 类的使用。如果一个线程开始使用 4-3 等待条件，然后第二个线程尝试使用 4-4 发出条件信号。由于条件被第一个线程锁定，第二个线程是否有机会发出条件信号？如果不是，那不是死锁吗？

如果这是一个愚蠢的问题，请原谅我:-)

这是 Apple 提供的关于如何使用 Cocoa 条件的示例：

**清单 4-3**使用 Cocoa 条件

```
[cocoaCondition lock];
while (timeToDoWork <= 0)
    [cocoaCondition wait];
timeToDoWork--;
// Do real work here.

[cocoaCondition unlock]; 
```

**清单 4-4**发出 Cocoa 条件的信号

```
[cocoaCondition lock];
timeToDoWork++;
[cocoaCondition signal];
[cocoaCondition unlock]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:41:08.070

当第一个线程调用 wait 时，它会放弃锁的同步。当第二个线程调用信号时，第一个线程可以唤醒并在第二个线程解锁其锁时恢复。那时，第一个线程重新获得了锁的同步，可以安全地继续进行。

# r - stringMatch 函数如何使用 apply 而不是 for 循环？

> ID：11107097
> 
> 赞同：2
> 
> 时间：2012-06-19T18:28:28.333
> 
> 标签：r, for-loop, string-matching, apply

我正在尝试计算一长串序列之间的成对差异的数量，并将其放回矩阵形式。这是我想做的一个玩具示例。

```
library(MiscPsycho)
b <- c("-BC", "ACB", "---") # Toy example of sequences
workb <- expand.grid(b,b)
new <- c(1:9)

# Need to get rid of this for loop somehow
for (i in 1:9) {
new[i] <- stringMatch(workb[i,1], workb[i,2], normalize="NO")
}

workb <- cbind(workb, new)
newmat <- reShape(workb$new, id=workb$Var1, colvar=workb$Var2)

a <- c("Subject1", "Subject2", "Subject3") #Relating it back to the subject ID
colnames(newmat) <- a
rownames(newmat) <- a
newmat 
```

我对使用 apply 函数不是很熟悉，但我想用它来替换 for 循环，考虑到我有大量序列，这可能会变慢。（stringMatch 函数来自 MiscPsycho）。请让我知道如何提高效率！

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:38:51.393

为了获得那些“成对距离”，我会做类似的事情：

```
 Vm <- Vectorize(stringMatch)
  nex <- outer(b,b, FUN=Vm, normalize = "NO")
 nex
     [,1] [,2] [,3]
[1,]    0    3    2
[2,]    3    0    3
[3,]    2    3    0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:44:50.387

更换循环

```
new <- apply(workb, 1, function(x) stringMatch(x[[1]],x[[2]], normalize="NO")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:45:15.910

我会做一个函数来获取你的索引`i`，和返回`new[i]`。

```
myfun <- function(i) {
  stringMatch(workb[i, 1], workb[i, 2], normalize='NO')
} 
```

然后你可以`apply`沿着你的新向量：

```
workb$new <- unlist(lapply(new, myfun)) 
```

通常，您`for loop`在 R 中正确使用了 a 。您已经预先分配了向量`new`并且正在填充它而不是增长它。

# xpath - 使用 Xpath 从 html 获取 href

> ID：11107099
> 
> 赞同：1
> 
> 时间：2012-06-19T18:28:32.583
> 
> 标签：xpath, google-apps-script

第一次在这里发帖，也是谷歌应用程序的新手。我正在为linkedin公司的电子表格中整理一个网址。例如：[http ://www.linkedin.com/company/National-Renewable-Energy-Laboratory](http://www.linkedin.com/company/National-Renewable-Energy-Laboratory)

我可以使用谷歌电子表格中的 =importXML 和 Xpath 来获取每个公司页面上列出的网站 url。

我已经到了可以从页面中提取所有href的地步，我需要的链接就在其中，但我只想要网站网址。

这是我目前使用的：

```
=importXML(R2, "//*[@href]") 
```

这是我的电子表格的链接：[https ://docs.google.com/spreadsheet/ccc?key=0AheVK6uxf6AvdHhILTFrR1k4Wl9tWW5OVWpRRUJKMlE](https://docs.google.com/spreadsheet/ccc?key=0AheVK6uxf6AvdHhILTFrR1k4Wl9tWW5OVWpRRUJKMlE)

代码在 S2

感谢您的回复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T00:27:56.283

`//*[@href]`匹配具有 href 的元素，而不是 href 属性本身。试试`//@href`吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T23:59:45.943

它更复杂，但一个好的解决方案是使用[LinkedIn API](http://developer.linkedin.com/rest)，您可以使用[UrlFetchApp](https://developers.google.com/apps-script/class_urlfetchapp)访问它。

# javascript - $.each 后的回调，带有动画

> ID：11107100
> 
> 赞同：1
> 
> 时间：2012-06-19T18:28:35.603
> 
> 标签：javascript, jquery, css-transitions

所以我正在运行一些动画来在我的第一个 jQuery 插件中引入一些 div：

```
$.fn.turnstile = function (options, callback) {

if (!this.length) {
    return this;
}
count = this.length;
var opts = $.extend(true, {}, $.fn.turnstile.defaults, options)
var delayIt = 100;
if (opts.direction == "in") {
    opts.deg = '0deg';
    opts.trans = '0,0';
    opts.opacity = 1;
} else if (opts.direction == "out") {
    opts.deg = '-90deg';
    opts.trans = "-100px, 200px";
    opts.opacity = 0;
} else if (opts.direction == "back") {
    opts.deg = '0deg';
    opts.trans = '-2000px,0px';
    opts.opacity = 0;
} else {
    opts.deg = direction;
}
this.each(function (index) {
    delayIt += opts.delayer;
    $(this).show().delay(delayIt).transition({
        perspective: '0px',
        rotateY: opts.deg,
        opacity: opts.opacity,
        translate: opts.trans
    }, 400, 'cubic-bezier(0.33,0.66,0.66,1)', function () {
        if (opts.direction == "back" || opts.direction == "out") {
            $(this).hide();
        }
        if (!--count && callback && typeof (callback) === "function") {
            if ($(":animated").length === 0) {
                callback.call(this);
            }
        }
    });
});
return this;
}; 
```

现在，我想在所有动画完成后调用我的回调，这在数学上应该是`(delayIt+400)*count`- 但是当所有动画都完成时我无法让回调运行。正如您可能能够从其当前状态中看出的那样，我尝试检查`:animated`，使用`!--count`条件，甚至尝试将超时设置为等于动画的持续时间，但所有这些似乎都是异步触发的。为这些设置动画并在完成后调用某些内容的最佳方法是什么？

[这是](http://ricostacruz.com/jquery.transit/)插件`.transition()`的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:33:23.980

没有用你的代码测试（我不熟悉`.transition`），但试试这个：

```
 ...
    this.promise().done(function(){
        alert('all done');
    });
    return this;
}; 
```

# c# - 尝试模拟用户时出现 UnauthorizedException

> ID：11107101
> 
> 赞同：1
> 
> 时间：2012-06-19T18:28:36.230
> 
> 标签：c#, impersonation, remote-access, remote-registry

我正在使用以下代码模拟某些操作：

```
private void button1_Click(object sender, EventArgs e)
{
    MessageBox.Show(Environment.UserName);
    ImpersonateUser iu = new ImpersonateUser();
    if (iu.impersonateValidUser("user1", "domaine1", "user1password"))
    {
        MessageBox.Show(Environment.UserName);
        RegistryKey regKey = RegistryKey.OpenRemoteBaseKey(RegistryHive.LocalMachine, "PC1", RegistryView.Registry64).OpenSubKey("SOFTWARE\\ODBC\\ODBC.INI\\NetworkTP_DB");
        MessageBox.Show(regKey.GetValue("Description").ToString());
        iu.undoImpersonation();
    }
} 
```

当我以 User1 身份登录时，这些操作完美运行，当我以 user2 身份登录时，我得到一个我不明白的 UnauthorizedException，因为 user1 有权执行这些操作。

有任何想法吗 ？

# javascript - 在 bootstrap-datepicker 中将日期设置为最初为空

> ID：11107102
> 
> 赞同：20
> 
> 时间：2012-06-19T18:28:36.603
> 
> 标签：javascript, jquery, twitter-bootstrap, datepicker, bootstrap-datepicker

我在我的网站中使用[bootstrap-datepicker](https://github.com/eternicode/bootstrap-datepicker)。日期选择器将用于定义搜索过滤器。我需要 datepicker 输入元素的初始值为空，所以它不会为搜索结果引入日期过滤器。当用户单击链接到 Datepicker 的文本输入时，Datepicker 弹出框应选择下个月的第一天。

**问题：**如果我要设置一个初始日期*（如下所示）*，文本输入将填充今天的日期，这不是我想要的。但是，如果我没有设置初始日期，日期选择器将显示 1970 年代。我应该怎么办？

类似于：[jQueryUI Datepicker的演示](http://jqueryui.com/demos/datepicker/)

**JS代码**

```
var now = new Date();
var nextMonth = new Date();
nextMonth.setDate(1);
nextMonth.setMonth(now.getMonth() + 1);
var prettyDate =  nextMonth.getMonth() + '/' + nextMonth.getDate() + '/' + nextMonth.getFullYear();
$('#listing_filter_available').val(prettyDate);
$('#listing_filter_available').datepicker(); 
```

**HTML 代码**

```
<input type="text" id="listing_filter_available" class="input-small" placeholder="Date Available" /> 
```

**尝试失败**

*单击文本输入 el 时不会弹出日期选择器*

```
$(function() {

    var now = new Date();
    var nextMonth = new Date();
    nextMonth.setDate(1);
    nextMonth.setMonth(now.getMonth() + 1);
    var prettyDate =  nextMonth.getMonth() + '/' + nextMonth.getDate() + '/' + nextMonth.getFullYear();
    $('#listing_filter_available').val('');  // clear the date filter
    $('#listing_filter_available').click( function() {
        $('#listing_filter_available').val(prettyDate);
        $('#listing_filter_available').datepicker();
    });

}); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-11-06T17:00:09.800

有一种更简单的方法可以做到这一点！设置值

```
$('#listing_filter_available').datepicker();
$('#listing_filter_available').datepicker('setValue', nextMonth); 
```

设置空白值

```
$('#listing_filter_available').datepicker();
$('#listing_filter_available').val(''); 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-10T18:02:31.397

我刚刚遇到了一个非常相似的用例。通过对 bootstrap-datepicker.js 进行一些调整，我相信我已经成功了。

您需要在两个地方编辑脚本。

对于日期字段，我正在检查日期（this.date）是否设置为 Unix 开始日期（例如空白日期）。如果是这样，请退出并将该字段留空。

（线：95 - 大约）

```
 setValue: function () {
        // EDIT - Don't setValue if date = unix date start
        if (DPGlobal.formatDate(this.date, this.format) == DPGlobal.formatDate(new Date(1970, 1, 1, 0, 0, 0), this.format)) return false;
        // END EDIT 
```

对于下拉日历，我还要检查日期（this.date）是否设置为 Unix 开始日期。如果是这样，请将日期设置为今天。我这样做是为了当用户点击日期字段时，它会显示当前月份，而不是 1970 年 2 月。

（线：144 - 大约）

填充：函数（）{

```
 //  EDIT - Set date in fill to today if date is "blank" (eg Unix start date)
            var d = ((DPGlobal.formatDate(this.date, this.format) == DPGlobal.formatDate(new Date(1970, 1, 1, 0, 0, 0), this.format))) ? new Date() : new Date(this.viewDate),
      //  original code
            //    var d = new Date(this.viewDate),
      //  END EDIT 
```

我相信这就是你需要做的。我刚刚在我的解决方案中实现了这一点，所以如果有人发现任何问题或有任何更好的建议，我很乐意听到。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-10-31T22:14:55.670

我遇到了类似的问题，这对我有用。

```
$(".date-picker").datepicker("setDate", ""); 
```

所以现在当我的页面加载它默认为空时，该字段不是必需的，因此他们不必选择日期，我的控制器会处理它，或者他们可以选择一个日期，控制器会处理它也是。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-06T12:33:14.290

**在最近版本的 bootstrap**中，我使用的是 Bootstrap V3.3.6 和 Boostrap-timepicker V0.5.2，以下工作很好，很简单：

```
$('#txtTimepicker').timepicker().val(''); 
```

对于我的个人情况，我使用 MVC razor 语法在 val 集中进行条件检查，以区分“添加”和“编辑”，如下所示：

```
$('#txtTimepicker').timepicker().val('@(Model.Created_Date == null ? "" : Model.Created_Date.ToString("H:mm tt"))'); 
```

为了使我的工作按要求 100%，我明确设置了输入值和以下选项：

```
.timepicker({ format: 'HH:mm:ss', 'defaultTime' : 'value', 'showMeridian': false, 'showSeconds': true, 'disableFocus' : false}) 
```

有关更多选项，请查看源代码文件或[此](http://ssharunas.github.io/bootstrap-timepicker/)链接

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-19T21:22:25.920

不编辑 bootstrap-datepicker.js 是不可能的

默认日期来自 value= 如果您将其留空，则它对应于 01-01-1970（unix 日期开始）。

即使你在这个问题上投入了大量的赏金，也有太多的工作。

我建议你找一个不同的插件。

我不太确定 jQuery UI datePicker 因为与 twitter boostrap 不兼容[https://github.com/twitter/bootstrap/issues/156](https://github.com/twitter/bootstrap/issues/156)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2014-07-03T04:37:36.197

我正在使用 bootstrap v3.1.1 和

```
$('#listing_filter_available').datepicker('setValue', nextMonth); 
```

对我不起作用。

你必须使用

```
$('#listing_filter_available').datepicker('setDate', nextMonth); 
```

填充日期选择器控件

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2016-11-09T10:44:53.523

对于最新版本

```
$("input[type=date]").datepicker({ defaultViewDate: {} }); 
```

来源：[http ://bootstrap-datepicker.readthedocs.io/en/latest/options.html#defaultviewdate](http://bootstrap-datepicker.readthedocs.io/en/latest/options.html#defaultviewdate)

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2015-01-25T18:56:33.370

如果找不到此类功能，请不要编辑源代码。放聪明点。查找 CSS 类“活动”并将其动态删除或覆盖样式表中的规则。

例如，覆盖此规则（为您的日期选择器使用更强的选择器）：

```
datepicker td.active, .datepicker td.active:hover {
    background-color: #006dcc;
    background-image: linear-gradient(to bottom, #0088cc, #0044cc);
    background-repeat: repeat-x;
    border-color: rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.1) rgba(0, 0, 0, 0.25);
    color: #fff;
    text-shadow: 0 -1px 0 rgba(0, 0, 0, 0.25);
} 
```

或使用js动态删除此类。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-04-29T14:30:11.110

我有同样的问题，我想出了这个解决方法，我做了一个函数来检索日期：

```
getDate: function (input) {
  if ($(input).val() == '') {
    return '';
  }

  return $(input).data('datepicker').date;
} 
```

注意：我正在尝试标准化每个 getter 和 setter，以便将来有可能更改 datepicker 插件

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2019-02-12T13:00:04.753

这个是我最喜欢的

```
$('#datetimepicker').datetimepicker({
   defaultDate:'',     
}); 
```

# sql - 带有不可打印字符的 SQL Server 排序顺序

> ID：11107104
> 
> 赞同：1
> 
> 时间：2012-06-19T18:28:51.473
> 
> 标签：sql, sql-server, tsql, ascii

我有一个标量值函数，它返回一个包含 ASCII 单位分隔符 Char(31) 的数据的 varchar。我将此结果用作 Order By 子句的一部分，并尝试按升序排序。

我的标量值函数返回如下结果（拼写出不可打印的字符以供参考）

*   美国广播公司
*   ABC (CHAR(31)) 定义
*   ABC (CHAR(31)) DEF (CHAR(31)) HIJ

我希望当我通过升序排序时，结果如下：

*   美国广播公司
*   ABCDEF
*   ABCDEFHIJ

相反，我看到的结果完全相反：

*   ABCDEFHIJ
*   ABCDEF
*   美国广播公司

现在我相当肯定这与不可打印的字符有关，但我不知道为什么。知道为什么会这样吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T18:52:44.907

排序顺序可能受您的[COLLATION](http://msdn.microsoft.com/en-us/library/ms144250%28v=sql.105%29.aspx)设置的影响。按照脚本，显式使用`Latin1_General_CI_AS`as collat​​ion 按您的预期对项目进行排序。

```
;WITH q (Col) AS (
    SELECT 'ABC' UNION ALL
    SELECT 'ABC' + CHAR(31) + 'DEF' UNION ALL
    SELECT 'ABC' + CHAR(31) + 'DEF' + CHAR(31) + 'HIJ'
)
SELECT  *
FROM    q   
ORDER BY
        Col COLLATE Latin1_General_CI_AS 
```

你使用什么排序规则？您可以使用验证您当前的数据库排序规则设置

```
SELECT DATABASEPROPERTYEX('master', 'Collation') SQLCollation; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:56:27.010

我可以在 SQL Server 2008 R2 中复制此行为，并将排序规则设置为`SQL_Latin1_General_CP1_CI_AS`.

如果您无法更改排序规则设置，请将字段设置为`nvarchar`而不是`varchar`。这为我解决了这个问题。

# javascript - 如何使用 javascript 或 jquery 更改画布元素的 fillStyle？

> ID：11107112
> 
> 赞同：0
> 
> 时间：2012-06-19T18:29:33.220
> 
> 标签：javascript, jquery, css, html, canvas

我有一些 html5 画布代码来制作图像，当前的填充样式为绿色，但是当我单击链接时，它应该变为红色，但它不起作用。我该如何解决？谢谢

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
   "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html>  
 <head>  
    <script>
        window.onload = function() {

            var canvas = document.getElementById('myCanvas');
            var context  = canvas.getContext('2d');  

            context.fillStyle = "rgb(0,200,0)";  
            context.fillRect (0, 0, 608, 105);  

            var img = new Image();  
            img.src = 'Round Borders.png';  
            context.drawImage(img,0,0);  

            var dataURL = canvas.toDataURL();
            document.getElementById("canvasImg").src = dataURL;

        };

  </script>  

  <script type="text/javascript">
        function change_bg_color(val) {
            document.getElementById('myCanvas').getContext('2d').fillStyle = val;
        }
  </script>

 </head>  
 <body onmousedown="return false;">
   <canvas id="myCanvas" width="608" height="105" style="display:none;"></canvas>  
   <img id="canvasImg" title="Right click to save me!">
   <br/>
   <a href="#" onclick="change_bg_color('rgb(200,0,0)');">change to red</a>
 </body>  
</html> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:37:25.297

## [工作演示](http://jsfiddle.net/loktar/W6nnZ/2/)

想像`fillStyle`为真正的画家画布选择颜料。你必须先选择你的油漆，然后开始绘画。如果你想改变你的颜色，你必须蘸上你的刷子并重新油漆。

所以基本上你需要用新的`fillStyle`像下面这样重绘画布上的所有东西。

```
var link = document.getElementsByTagName("a")[0],
    canvas = document.getElementById('myCanvas'),
    context  = canvas.getContext('2d'); 

link.onclick = function(){
    draw('rgb(200,0,0)');
}

function draw(val){
        context.fillStyle = val;
        context.fillRect (0, 0, 608, 105);  
        var img = new Image();  
        img.src = 'Round Borders.png';  
        context.drawImage(img,0,0);  
        var dataURL = canvas.toDataURL();
        document.getElementById("canvasImg").src = dataURL;
}

draw("rgb(0,200,0)"); 
```

只需将颜色传递给`draw`它，它就会用选择的颜色重新绘制。

​</p>

# fonts - JPgraph字体错误

> ID：11107113
> 
> 赞同：1
> 
> 时间：2012-06-19T18:29:35.213
> 
> 标签：fonts, jpgraph

我正在使用 000webhost.com 并尝试绘制图表，但出现此错误，JpGraph 错误：25049 字体文件“../src/font/verdanab.ttf”不可读或不存在。我下载了所有字体并上传到我的主机上，但我仍然收到此错误，可能是我的 root 错误。我真的需要帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-11T00:47:41.940

如果您仍然需要帮助或其他人觉得这很有用...

1.  你的主机可能已经有一些 ttf 字体，所以你应该从找到它们的路径开始。就我而言，它类似于 /usr/share/fonts/dejavu。环顾四周，应该很容易找到你要找的那个。如果您找不到或不想使用您的主机字体，您可以安装新字体。Jpgraph 有最流行的包的常量。

2.  确定正确路径后，转到源目录中的文件 jpg-config.inc.php 并将定义 ttf 目录的行更改为您在步骤 1 中找到的路径：

    ```
    define('TTF_DIR','/usr/share/fonts/dejavu/'); 
    ```

    注意最后一个'/'，确保你不要忘记它。

3.  现在您必须知道如何在代码中引用您的字体，例如 FF_DV_SERIF 表示似曾相识的衬线字体。转到文件 jpgraph_ttf.inc.php。在那里你会找到每个包的常量。该代码有据可查，因此您应该没有问题。

干杯。

编辑：对于 MacOS10（例如 MAMP），它可能类似于：

```
define('TTF_DIR','/Library/Fonts/');
define('MBTTF_DIR','/Library/Fonts/'); 
```

# jquery - jQuery滑块-第二次单击在宽度动画之前将显示更改为无

> ID：11107115
> 
> 赞同：0
> 
> 时间：2012-06-19T18:29:39.840
> 
> 标签：jquery, css

我有这个代码

```
$(".guitar").toggle(function() {
    $(".guitar_content").click().animate({width: "500"}, 1000).css({display: "block"});
    $(".guitar_text").delay(1200).animate({ opacity: "1"}, 600);
}, function() {
    $(".guitar_content").click().animate({ width: "0" }, 1000);
    $(".guitar_content").delay(1000).css({ display: "none"});
});
​ 
```

我的问题是，当我第二次单击时，即使添加了延迟，它也会在运行宽度动画之前将显示更改为无。

在更改 css 之前，我怎样才能让它做宽度动画。

这是我的项目[http://jsfiddle.net/TvLMQ/](http://jsfiddle.net/TvLMQ/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:31:14.687

使用回调而不是`.delay`：

```
$(".guitar_content").click().animate({width: "0"},1000, function(){
    $(this).css({display: "none"});
}); 
```

# sql-server-2008 - SSIS 转换级别日志记录

> ID：11107123
> 
> 赞同：2
> 
> 时间：2012-06-19T18:29:56.480
> 
> 标签：sql-server-2008, ssis

是否可以在 SSIS 中记录所有转换？我有一个自定义日志记录解决方案，它记录每个控制流元素的数据。但如果可能的话，我想在转型层面这样做。如果没有，那没关系......但我仍然想知道它是否可能。

例如，如果包在查找时失败了，我能知道它失败的确切原因以及失败的数据吗？此外，Source、Derived 列等的输出。 ![在此处输入图像描述](../Images/673c6df5a5a3948239760010c8565b5f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T15:46:31.463

我找到了答案。在预设日志记录（随 SSIS 一起提供）上，您可以选择一个名为“PipeLineComponentTime”的属性。这以毫秒为单位提供了组件明智的执行时间。唯一的问题是，您将不得不从表中过滤掉信息，因为这会生成大量日志。![在此处输入图像描述](../Images/1b05f976cd0748a80b11fd7bf609120e.png)

# java - 如何制作 Java 类的 JSON 表示？

> ID：11107125
> 
> 赞同：6
> 
> 时间：2012-06-19T18:29:59.830
> 
> 标签：java, json, class

我想将 Class 对象表示为 JSON。例如，如果我的类定义如下：

```
public class MyClass {
    String myName;
    int myAge;
    MyOtherClass other;
}

public class MyOtherClass {
    double myDouble;
} 
```

我想从 MyClass 类型的 Class 对象中获取以下嵌套 JSON：

```
{
   myName: String,
   myAge: int,
   other: {
      myDouble: double;
   }
} 
```

编辑：

我不想序列化这些类的实例，我了解如何使用 GSON 做到这一点。我想序列化类本身的结构，以便给定一个专有类 Object，我可以生成 JSON，将类的字段递归地分解为标准对象，如 String、Double 等。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:35:58.067

使用[Jettison](http://jettison.codehaus.org/)，您可以将自己的映射从 Java 滚动到 JSON。因此在这种情况下，您可以获取所需类的 Class 对象，然后使用 Jettison 将 getFields、getConstructors、getMethods 等方法返回的 Java 映射到 JSON。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:51:36.437

我会推荐使用杰克逊。您还可以查看基于 Jackson 的 JSonObjectSerializer 类，该类可以在[oVirt](http://www.ovirt.org)的 engine/backend/manager/module/utils 下找到（您可以 git clone 代码）并了解我们如何在那里使用 Jackson。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-22T15:08:08.390

想做同样的事情，最后我写了自己的方法，这并不能处理所有情况，例如，如果声明的字段之一是 Map 这将中断，但这对于大多数常见对象来说似乎没问题：

```
@Override
public Map reflectModelAsMap(Class classType) {
    List<Class> mappedTracker = new LinkedList<Class>();

    return reflectModelAsMap(classType, mappedTracker);
}

private Map reflectModelAsMap(Class classType, List mappedTracker) {
    Map<String, Object> mapModel = new LinkedHashMap<String, Object>();

    mappedTracker.add(classType);

    Field[] fields = classType.getDeclaredFields();

    for (Field field : fields) {
        if (mappedTracker.contains(field.getType()))
            continue;

        if (BeanUtils.isSimpleValueType(field.getType())) {
            mapModel.put(field.getName(), field.getType().toString());
        } else if (Collection.class.isAssignableFrom(field.getType())) {
            Class actualType = (Class) ((ParameterizedType) field.getGenericType()).getActualTypeArguments()[0];
            mapModel.put("Collection", reflectModelAsMap(actualType, mappedTracker));
        } else {
            mapModel.put(field.getName(), reflectModelAsMap(field.getType(), mappedTracker));
        }
    }

    return mapModel;
} 
```

那里的映射跟踪器是因为我在 Hibernate 中处理关系的方式；没有它，父母和孩子之间就会有无限的递归关系，例如`child.getFather().getFirstChild().getFather().getFirstChild().getFather()...`

# javascript - 谷歌注释的时间线未在应用程序启动时显示

> ID：11107129
> 
> 赞同：0
> 
> 时间：2012-06-19T18:30:17.277
> 
> 标签：javascript, jquery, google-visualization

我在使用 Google 注释的时间线时遇到问题。我有这个在 jQuery 就绪函数中调用的函数（如下所示）：

```
//creates an annotated timeline
function graphAnnotatedTimeLine(url) {
    jQuery.get(url, function(returned_data) {
        //parse returned_data ...

        //build data table
        var dataTable = new google.visualization.DataTable();
        dataTable.addColumn('datetime', columnHeadings[0]);
        dataTable.addColumn('number', columnHeadings[1]);

        //populate table
        for(var i = 0; i < rawData.length; i++) {
            var parsedData = data[i].split(",");
            dataTable.addRow([new Date(parsedData[0]), parseFloat(parsedData[1])]);
        }

        //draw graph
        var options = {displayAnnotations: false,
                       allowRedraw: true,
                       legendPosition: 'newRow',
                       displayZoomButtons: false,
                       wmode: 'transparent'};

        var chart = new google.visualization.AnnotatedTimeLine(document.getElementById('chart-div'));
        chart.draw(dataTable, options);
    });
} 
```

在就绪函数中调用如下：

```
$.ready(function() {
    //generate url string
    google.setOnLoadCallback(graphAnnotatedTimeline(url));
    self.setInterval('updateGraph', 60000);
    //more stuff
}); 
```

所以在准备好的时候，我调用它来绘制第一组数据，然后设置一个更新函数，每分钟调用一次。update 函数所做的一切与 ready 函数基本相同：构建一个 url 字符串并使用该 url 调用图形函数。我遇到的问题是它在启动时不显示图表。但是，一旦调用了更新，之后它就会显示正常。有没有人可以给我一些关于为什么会发生这种情况的现场信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:03:44.307

This is because your jquery ready function is called before the google visualization script is loaded. **google.setOnLoadCallback** must be called like this...

```
 <script type="text/javascript" src='http://www.google.com/jsapi?autoload={"modules":[{"name":"visualization","version":"1","packages":["annotatedtimeline"]}]}'></script>
    <script type="text/javascript">
      google.setOnLoadCallback(graphAnnotatedTimeline(url));
</script> 
```

# drupal - 可以添加到 Drupal 网络表单的项目数量是否有限制？

> ID：11107132
> 
> 赞同：3
> 
> 时间：2012-06-19T18:30:27.090
> 
> 标签：drupal, drupal-modules, drupal-webform

**Drupal：7.14
网络表单：7.x-3.18+4-dev**

目前我在一个 Webform 中共有 469 个组件：

*   选择选项 = 158
*   文本字段 = 115
*   数字 = 73
*   字段集 = 64
*   文本区域 = 30
*   标记 = 28
*   日期 = 1

我的问题是我现在无法再添加了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:23:43.437

查看 webform 的文档和问题队列，并没有明确的限制，但听起来您对 webform 的了解超出了您的预期。您是否考虑过创建匿名用户可以为其创建节点的内容类型？即使这样，这也是大量的领域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-03-24T12:30:42.927

我找到了解决这个问题的方法。编辑您的 php.ini，并取消注释 max_input_vars = 1000。根据需要增加此值。这对我有用。

# javascript - jQuery幻灯片区域

> ID：11107133
> 
> 赞同：0
> 
> 时间：2012-06-19T18:30:28.150
> 
> 标签：javascript, jquery, asp.net, jquery-ui, jquery-plugins

JQuery 有能力创建一个可以滚动的区域吗？就像我有一个小盒子，我需要显示一些复选框，但它们并不都适合，所以我需要一种向下滑动列表的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:33:16.977

你不需要 jquery 来做到这一点。只需`overflow:scroll`在固定大小的 div 中使用 css 即可。

示例：http: [//jsfiddle.net/dystroy/a4PHU/](http://jsfiddle.net/dystroy/a4PHU/)

如果你想用jquery来设置，当然可以用

```
$('#a').css('overflow', 'scroll'); 
```

# java - 使用 SpringData 创建只读存储库

> ID：11107136
> 
> 赞同：36
> 
> 时间：2012-06-19T18:30:41.583
> 
> 标签：java, spring, jpa, spring-data, spring-data-jpa

是否可以使用 Spring Data 创建只读存储库？

我有一些实体链接到视图和一些子实体，我想为它们提供一个带有一些方法的存储库，比如`findAll()`，`findOne()`以及一些带有`@Query`注释的方法。我想避免提供像`save(…)`and这样的方法，`delete(…)`因为它们没有意义并且可能会产生错误。

```
public interface ContactRepository extends JpaRepository<ContactModel, Integer>, JpaSpecificationExecutor<ContactModel> {
    List<ContactModel> findContactByAddress_CityModel_Id(Integer cityId);

    List<ContactModel> findContactByAddress_CityModel_Region_Id(Integer regionId);

    // ... methods using @Query

    // no need to save/flush/delete
} 
```

谢谢！

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-20T13:04:11.790

是的，要走的路是添加一个手工制作的基础存储库。你通常使用这样的东西：

```
public interface ReadOnlyRepository<T, ID extends Serializable> extends Repository<T, ID> {

  T findOne(ID id);

  Iterable<T> findAll();
} 
```

你现在可以让你具体的 repos 扩展刚刚定义的一个：

```
public interface PersonRepository extends ReadOnlyRepository<Person, Long> {

  T findByEmailAddress(String emailAddress);
} 
```

定义基本 repo 的关键部分是方法声明带有与声明的方法*相同的签名*，`CrudRepository`如果在这种情况下我们仍然可以将调用路由到支持存储库代理的实现 bean。我在 SpringSource 博客中写了一篇关于该主题的更详细的[博客文章。](http://blog.springsource.org/2011/07/27/fine-tuning-spring-data-repositories/)

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2016-05-18T10:54:29.390

为了扩展 Oliver Gierke 的回答，在 Spring Data 的更新版本中，您需要在 ReadOnlyRepository（父接口）上添加 @NoRepositoryBean 注释以防止应用程序启动错误：

```
import org.springframework.data.repository.NoRepositoryBean;
import org.springframework.data.repository.Repository;

@NoRepositoryBean
public interface ReadOnlyRepository<T, ID extends Serializable> extends Repository<T, ID> {

    T findOne(ID id);

    List<T> findAll();

} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-19T18:42:14.517

正如我们在文档中看到的，这可以通过实现[org.springframework.data.repository.Repository](http://static.springsource.org/spring-data/data-commons/docs/1.1.0.RELEASE/api/org/springframework/data/repository/Repository.html)来实现。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2020-05-15T17:41:58.627

这是只读的[PagingAndSortingRepository](https://docs.spring.io/spring-data/data-commons/docs/current/api/org/springframework/data/repository/PagingAndSortingRepository.html)

```
package com.oracle.odc.data.catalog.service.core.repository;

import org.springframework.data.domain.Page;
import org.springframework.data.domain.Pageable;
import org.springframework.data.domain.Sort;
import org.springframework.data.repository.NoRepositoryBean;
import org.springframework.data.repository.PagingAndSortingRepository;
import org.springframework.data.rest.core.annotation.RestResource;

/**
 * Extension of {@link PagingAndSortingRepository} but without modification capabilities
 *
 * @author XYZ
 * @see Sort
 * @see Pageable
 * @see Page
 */
@NoRepositoryBean
public interface ReadOnlyPagingAndSortingRepository<T, ID> extends PagingAndSortingRepository<T, ID> {

    @Override
    @RestResource(exported=false)
    <S extends T> S save(S entity);

    @Override
    @RestResource(exported=false)
    <S extends T> Iterable<S> saveAll(Iterable<S> entities);

    @Override
    @RestResource(exported=false)
    void deleteById(ID id);

    @Override
    @RestResource(exported=false)
    void delete(T entity);

    @Override
    @RestResource(exported=false)
    void deleteAll(Iterable<? extends T> entities);

    @Override
    @RestResource(exported=false)
    void deleteAll();

} 
```

如果您尝试 POST 或 DELETE，您将得到 405（不允许的方法）。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-05-15T10:19:54.893

对我来说，以下工作。使用 Oliver 的解决方案，我`Invocation of init method failed; nested exception is org.springframework.data.mapping.PropertyReferenceException: No property findOne found for type`在启动时遇到了错误。

```
@NoRepositoryBean
public interface ReadOnlyRepository<T,ID> extends Repository<T, ID> {
    Optional<T> findById(ID var1);
    boolean existsById(ID var1);
    Iterable<T> findAll();
    Iterable<T> findAllById(Iterable<ID> var1);
    long count();
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-07-01T11:49:02.897

或者，如果您想自己实现或阻止此操作 - 您可以执行以下操作（适用于 Java 8 及更高版本）：

```
import org.springframework.data.jpa.repository.JpaRepository;
import org.springframework.data.repository.NoRepositoryBean;
import org.springframework.lang.NonNull;

import java.util.List;

@NoRepositoryBean
public interface ReadOnlyRepository<T, ID> extends JpaRepository<T, ID> {

    @Override
    @NonNull
    default <S extends T> S save(@NonNull S entity) {
        throw new RuntimeException("Action not allowed");
    }

    @Override
    @NonNull
    default <S extends T> List<S> saveAll(@NonNull Iterable<S> iterable) {
        throw new RuntimeException("Action not allowed.");
    }

    @Override
    @NonNull
    default <S extends T> S saveAndFlush(@NonNull S s) {
        throw new RuntimeException("Action not allowed.");
    }

    @Override
    default void delete(@NonNull T entity) {
        throw new RuntimeException("Action not allowed.");
    }

    @Override
    default void deleteAll() {
        throw new RuntimeException("Action not allowed.");
    }

    @Override
    default void deleteAll(@NonNull Iterable<? extends T> entities) {
        throw new RuntimeException("Action not allowed.");
    }

    @Override
    default void deleteAllInBatch() {
       throw new RuntimeException("Action not allowed.");
    }

    @Override
    default void deleteById(@NonNull ID id) {
       throw new RuntimeException("Action not allowed.");
    }

    @Override
    default void deleteInBatch(@NonNull Iterable<T> iterable) {
        throw new RuntimeException("Action not allowed.");
    }
} 
```

希望我能帮助别人（ノ^∇^）

# python - 使用 django 渲染发送电子邮件不会在 gmail 中按预期呈现它们

> ID：11107139
> 
> 赞同：0
> 
> 时间：2012-06-19T18:30:59.430
> 
> 标签：python, django, email, gmail

我正在使用 Django 向我的 gmail 帐户发送一些带有嵌入图像的电子邮件。问题是当我收到电子邮件时，所有图像都显示为附件，我必须单击“在下面显示图像”才能使它们出现在模板中，即使这样它们仍然显示在它下面。

我不想看到模板下方的附加图像，仅此而已。

在 Thunderburd 和其他一些电子邮件客户端中，模板可以完美呈现，但在 gmail 中却失败了。

我正在关注本教程：[在 iPhone、iPad 上显示内联图像](https://stackoverflow.com/questions/10103210/displaying-inline-images-on-iphone-ipad)

这是我正在使用的模板：http: [//pastebin.com/tUen272b](http://pastebin.com/tUen272b)

所有附加的图像都在其中使用。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:35:36.790

gmail 最近在默认情况下隐藏图像变得更加激进，您可能必须选择“始终显示图像”才能让图像在没有干预的情况下显示。至于为什么它们没有出现在正确的位置，不知道，如果，正如你所说，它们在其他客户端中正确显示。

你有模板HTML吗？

# gps - 如何制作gps的图片程序

> ID：11107142
> 
> 赞同：-1
> 
> 时间：2012-06-19T18:31:03.923
> 
> 标签：gps

如何使用自己的软件重新编程 GPS？我是新手，但我认为我必须先将所有 0 写入硬盘才能将其擦除干净。然后从那里我可以下载或使用什么程序来构建我自己的软件来制作图片/音频以放在设备上。基本上将其从gps转换为数码相框..我需要帮助，所以有人可以建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:35:37.170

You're going to need to flash custom firmware to the device - a process that requires a lot of expertise, as well as information about the specifics of the hardware - which is likely not to be publicly disclosed. It's highly unlikely you're going to be able to pull this off.

# c# - 主键重复异常

> ID：11107148
> 
> 赞同：0
> 
> 时间：2012-06-19T18:31:16.753
> 
> 标签：c#, sql, sql-server, c#-4.0, exception-handling

我正在使用 sql server 作为数据库的 C# 项目。所以问题是我的项目中有一个算法每次都返回一个值；保存到数据库中（作为我的项目要求）。如果算法重复一个值，那也会保存到不需要的数据库（重复）并导致一些问题。我需要帮助来克服唯一值在发生时只保存一次的问题；数据库中没有重复。我试图使该列成为主键，但后来我发现主键违规异常。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:39:59.500

只需在线或在存储过程中使用 EXISTS 查询

您的查询过程可以检查该行是否已存在

编辑：啊哈抱歉忘了NOT，那太愚蠢了：D

```
IF NOT EXISTS(SELECT UniqueValue FROM UniqueValuesTable WHERE UniqueValue = @NewValue)
  INSERT INTO UniqueValuesTable VALUES (@NewValue) 
```

编辑：这是一个 SQL 小提琴来展示它的工作原理

[http://sqlfiddle.com/#!3/b87f9/3](http://sqlfiddle.com/#!3/b87f9/3)

正如 dems 指出的那样，该操作不是原子的，因此在多会话情况下仍然可能存在 PK 违规

替代方案是：

```
INSERT INTO UniqueValuesTable SELECT @NewValue WHERE NOT EXISTS (SELECT UniqueValue FROM UniqueValuesTable WHERE UniqueValue = @NewValue) 
```

# jquery-ui - Mac Retina 的 jQuery UI 图标

> ID：11107149
> 
> 赞同：3
> 
> 时间：2012-06-19T18:31:23.207
> 
> 标签：jquery-ui, retina-display

有没有人遇到过修复带有 Retina 显示屏的新 MacBook Pro 上像素化的 jQuery UI 图标的方法？我一直在寻找@2x 解决方案，但到目前为止还没有找到。

想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-23T12:47:12.380

有一个项目旨在使 jQueryUI 与 Twitter Bootstrap（以及因此与 FontAwesome）兼容，请参阅：[https ://github.com/jquery-ui-bootstrap/jquery-ui-bootstrap/](https://github.com/jquery-ui-bootstrap/jquery-ui-bootstrap/)

应该可以在不使用 TBS 的情况下提取 FontAwesome UI 部分。

# c# - DataBinding：“DatePickerControl.DatePicker”不包含名为“Text”的属性

> ID：11107152
> 
> 赞同：1
> 
> 时间：2012-06-19T18:31:34.167
> 
> 标签：c#

我尝试使用日期/时间、时间，但没有帮助。

异常详细信息：System.Web.HttpException：DataBinding：“DatePickerControl.DatePicker”不包含名为“Text”的属性。

```
Source Error: 

Line 31:         DataSource.InsertParameters.Add("UserId", UserGUID.ToString());
Line 32: 
Line 33:         DataSource.Insert();//here is the error
Line 34:         
Line 35:     } 
```

这是html代码：

```
<asp:SqlDataSource ID="InsertExtraInfo" runat="server" ConnectionString="<%$ ConnectionStrings:ASPNETDBConnectionString1 %>"
    InsertCommand="INSERT INTO [UserDetails] ([UserId], [CustName], [CustNum], [CustRole], [CustStatus], [PName], [PEmail], [PRole], [WedDate]) VALUES (@UserId, @CustName, @CustNum, @CustRole, @CustStatus, @PName, @PEmail, @PRole, @WedDate)"
    ProviderName="<%$ ConnectionStrings:ASPNETDBConnectionString1.ProviderName %>">
    <InsertParameters>
        <asp:ControlParameter Name="CustName" Type="String" ControlID="CustName" PropertyName="Text" />
        <asp:ControlParameter Name="CustNum" Type="String" ControlID="CustNum" PropertyName="Text" />
        <asp:ControlParameter Name="CustRole" Type="String" ControlID="CustRole" PropertyName="Text" />
        <asp:ControlParameter Name="CustStatus" Type="String" ControlID="CustStatus" PropertyName="Text" />
        <asp:ControlParameter Name="PName" Type="String" ControlID="PName" PropertyName="Text" />
        <asp:ControlParameter Name="PEmail" Type="String" ControlID="PEmail" PropertyName="Text" />
        <asp:ControlParameter Name="PRole" Type="String" ControlID="PRole" PropertyName="Text" />
        <asp:ControlParameter Name="WedDate" Type="String" ControlID="WedDate" PropertyName="Text"/>
    </InsertParameters>

</asp:SqlDataSource> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:36:35.780

设置`PropertyName="SelectedValue"`和`Type="DateTime"`

```
<asp:ControlParameter Name="WedDate" Type="DateTime" ControlID="WedDate" PropertyName="SelectedValue"/> 
```

## 编辑：

尝试

```
<asp:ControlParameter Name="WedDate" Type="DateTime" ControlID="WedDate" PropertyName="SelectedDate"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:42:03.833

改变

`Type="String"`to`Type="DateTime"` 和
`PropertyName="Text"`to`PropertyName="SelectedDate"` 在这条线上

```
<asp:ControlParameter Name="WedDate" Type="DateTime" ControlID="WedDate" PropertyName="SelectedDate" /> 
```

# installation - 在 Windows Mobile 上安装后，SDF 文件始终被创建为只读

> ID：11107154
> 
> 赞同：1
> 
> 时间：2012-06-19T18:31:44.730
> 
> 标签：installation, windows-mobile, sql-server-ce, windows-ce

我的 Windows 移动应用程序有一个本地数据库文件 ( `database.sdf`)。用户在其设备中安装 CAB 文件时创建的文件。安装工作正常，但是当我尝试使用查询分析器打开 SDF 或应用程序尝试访问数据库时，我收到一条消息。

> “不允许访问数据库文件”(25039)

当我使用 Windows 资源管理器（设备已对接）检查权限时，该文件被标记为只读。如果删除只读复选框一切正常，我可以打开、编辑并将记录添加到数据库。

默认情况下如何使文件不是只读的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T12:47:55.300

除了 yms 提供的答案之外，我还会尝试弄清楚为什么首先将文件创建为仅就绪文件。

它是通过您添加到安装过程中的一些自定义安装程序 dll 创建的吗？还是通过 cabwiz 或 VS 中的安装程序项目将其打包到 .CAB 文件中？

如果是前者，请检查该安装程序库的源代码。如果是后者，请检查源文件。如果您在 Visual Studio 项目中包含 SDF 并将该项目签入某种类型的源代码管理，那么当它被签入源存储库时，它很可能在打包到 .CAB 时在磁盘上是只读的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:34:19.643

您可以在应用程序启动期间以编程方式验证该属性。在 C#/.netcf 中它将是：

```
if (File.GetAttributes(path) & FileAttributes.ReadOnly == FileAttributes.ReadOnly)
    File.SetAttributes(path, File.GetAttributes(path) & ~FileAttributes.ReadOnly); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-06T12:19:10.953

我知道这是旧的，但如果 Andrew 实际上使用的是 .netcf，它没有 File.GetAttributes。相反，他应该使用

```
 FileInfo info = new FileInfo(pathToFile)
        if ((info.Attributes & FileAttributes.ReadOnly) == FileAttributes.ReadOnly)
            info.Attributes &=~ FileAttributes.ReadOnly; 
```

# git - 如何修复获取/提交时的“地址空间已被占用”错误？

> ID：11107155
> 
> 赞同：30
> 
> 时间：2012-06-19T18:31:50.350
> 
> 标签：git, cygwin

最近开始，基本上每次我尝试获取或提交它都会给我这个奇怪的错误。它会不断尝试“重新获取/重新提交”，直到我放弃 and `Ctrl``C`.

```
C:\cygwin\home\git\new_trunk>git sf
      1 [main] perl 760 child_info_fork::abort: address space needed by 'cygreadline7.dll' (0x960000) is already occupied

C:\cygwin\home\git\new_trunk>git svn dcommit
      1 [main] perl 2672 child_info_fork::abort: address space needed by 'cygreadline7.dll' (0x980000) is already occupied 
```

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2014-06-25T17:16:02.457

重新安装我的 Cygwin 安装为我解决了这个问题。我遵循文档[Rebaseall](http://cygwin.wikia.com/wiki/Rebaseall)，从 Windows 资源管理器以管理员身份运行 dash ，然后发出以下命令：

```
/usr/bin/rebaseall -v 
```

PS：不应该运行 Cygwin 服务才能使其正常工作。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-06-21T04:52:54.323

看看[这个 Cygwin FAQ 部分](http://cygwin.com/faq-nochunks.html#faq.using.fixing-fork-failures)和[这个](http://cygwin.com/faq-nochunks.html#faq.using.bloda)。在我的情况下，禁用 Avast 的行为和文件系统实时防护，然后重新启动 Cygwin 就是答案。

因此，您可能正在运行 Windows 程序，这些程序将它们的 DLL 挂接到分叉的进程中，从而破坏了地址，从而导致分叉出现故障。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2013-11-24T22:04:24.043

当我的病毒扫描程序 Symantec Endpoint Protection 升级到 64 位时，我遇到了同样的 fork() 问题，但我仍在运行 32 位版本的 Cygwin。'Rebaseall' 没有帮助。升级到 64 位版本的 Cygwin 为我解决了这个问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-10-07T05:32:51.853

正如[Tarc 所述](https://stackoverflow.com/a/24414798/2707864)，不应运行任何 Cygwin 服务`rebaseall`。否则你会得到

[https://superuser.com/questions/231590/running-rebaseall-on-cygwin](https://superuser.com/questions/231590/running-rebaseall-on-cygwin)

即使在看似关闭所有 Cygwin/Msys2 实例之后，您也可能会像[我一样](https://superuser.com/a/1364535/245595)发现问题。使用来自 PortableApps 的 Win 10 和 Msys2，我转到任务管理器，按“命令行”列对列表进行排序。在那里我发现我的 Msys2 的 ssh-agent 仍在运行。我杀了它，然后我可以`rebaseall`。

# html - 已弃用的标签和属性？

> ID：11107157
> 
> 赞同：2
> 
> 时间：2012-06-19T18:32:02.763
> 
> 标签：html, css

在访问较旧的站点时，通常会发现已弃用的标签和属性。然而，由于已[弃用](http://www.codehelp.co.uk/html/deprecated.html)且未过时，它们仍然有效且受支持。如果可能的话，一个“好”的程序员往往会远离这些，但使用这些到底有多糟糕？

在查找有关已弃用元素的信息时，我发现提供的最常见信息是：

> 浏览器应继续支持已弃用的标签和属性，但最终这些标签**可能**会过时，因此无法保证未来的支持。

显然，如果有什么东西坏了，你应该改变它。然而，我们是否应该积极更改我们之前处理过的代码中已弃用元素的实例？无论是个人网站，还是浏览率高的大型网站，在接受的元素上保持最新状态有多重要？

当一个标签或属性被废弃时，它会给出多少警告？任何？其他网络格式呢？

在任何网站上，无论是大修，还是仅仅注意到一行已弃用的代码，都应该主动删除吗？或者是否值得节省时间和精力等到真正删除并立即更改所有内容？

你应该懒惰（就像我希望的那样），还是值得努力保持最新状态？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T18:35:52.777

> 你应该只是懒惰（就像我希望我可以那样），还是值得努力保持最新状态？

懒惰总是很重要，这就是为什么我们将标签标记为已弃用而不是仅仅删除。

我总是告诉开发人员要偷懒，但要偷懒到不能阻止自己阻止自己做好事的程度。有懒惰之类的，也有不够懒惰之类的。DRY 是一个很好的懒惰的例子。依赖已弃用的标签是坏懒惰的一个例子。使用 div 进行表格布局是低效过度工作的一个例子。

> 在任何网站上，无论是大修，还是仅仅注意到一行已弃用的代码，都应该主动删除吗？或者是否值得节省时间和精力等到真正删除并立即更改所有内容？

如果您正在进行维护，并且这是一个错误报告，那么修复它总是很重要，显然，但是在积极主动的情况下，问题就变成了，您现在最重要的事情是什么。如果你有大约[20% 的时间](http://googleblog.blogspot.com/2006/05/googles-20-percent-time-in-action.html)并且想要修复它，那就修复它。如果您有需要完成的任务，那么您需要首先专注于这些任务。

> 无论是个人网站，还是浏览率高的大型网站，保持最新的公认价值观有多重要？

这真的是你要问的。在您自己的个人网站上，这绝对是 20% 的时间，所以随心所欲。

在具有大量吞吐量的大型站点上，您需要尝试使其保持最新状态，以便它继续为用户提供良好的利益。如果该网站突然停止为大量用户工作，他们将停止访问。然后，一个具有大量吞吐量的大型站点变成了一个占用 Internet 空间的死站点。

# c++ - 独立于平台的表示涉及哪些方法和权衡？

> ID：11107162
> 
> 赞同：2
> 
> 时间：2012-06-19T18:32:25.870
> 
> 标签：c++, c, performance, compatibility

在说任何话之前，我不得不说，尽管我是一名经验丰富的 Java 程序员，但我对 C/C++ 编程还是比较陌生。

我必须以一种可以从不同操作系统和平台访问的格式保存二进制文件。它应该非常有效，因为我必须处理大量数据。我应该为此调查什么方法？主要优点和缺点是什么？

目前我正在考虑使用网络符号（类似的东西在[unix](http://pubs.opengroup.org/onlinepubs/7908799/xns/htonl.html)和[windows](http://msdn.microsoft.com/en-us/library/windows/desktop/ms738556%28v=vs.85%29.aspx)`htonl`下都可用）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:34:09.837

[网络顺序](http://en.wikipedia.org/wiki/Network_order#Endianness_in_networking)（big-endian）是一种事实上的标准。但是，如果您的程序主要用于[x86](http://en.wikipedia.org/wiki/X86)（小端），出于性能原因，您可能希望坚持使用该协议（该协议仍可在大端机器上使用，但它们反而会对性能产生影响）。

除了[htonl](http://pubs.opengroup.org/onlinepubs/009695399/functions/htonl.html)（转换 32 位值）之外，还有 htons（16 位）和 bswap_64（64 位非标准）。

如果您想要二进制格式，但又想抽象出一些细节以简化序列化和反序列化，请考虑使用[Protocol Buffers](http://code.google.com/p/protobuf/)或[Thrift](http://thrift.apache.org/)。协议缓冲区是可更新的（您可以在不破坏现有代码的情况下向模式添加可选或重复（0 或更多）字段）；不确定节俭。

但是，在过早优化之前，请考虑解析是否真的是瓶颈。如果读取文件的每一行都需要数据库查询或计算，那么您可以使用更具可读性的格式，而不会产生任何明显的性能影响。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:06:00.190

我认为这种任务有几个不错的选择。

在大多数情况下，我的首选可能是 Sun（现在是 Oracle）的 XDR。它在 Sun 的 RPC 实现中使用，因此经过相当长一段时间的大量测试。它在[RFC 1832](http://www.ietf.org/rfc/rfc1832.txt)中定义，因此文档广泛可用。还有一些[库](http://xstream.sourceforge.net/)（便携式和[其他](http://linux.die.net/man/3/xdr)）知道如何转换为/从这种格式转换。在线表示相当紧凑，转换相当有效。

XDR 最大的潜在问题是您确实需要知道数据代表什么才能对其进行解码 - 即，您必须（通过某些外部手段）确保发送者和接收者就（例如）结构的定义达成一致在接收者可以（轻松）了解正在发送的内容之前，他们将通过电线发送。

如果您需要创建一个完全自描述的流，那么有人可以仅根据流本身的内容来判断它包含的内容，那么您可以考虑使用 ASN.1。它在某些方面很粗鲁和讨厌，但它确实产生了自我描述的流，被公开记录，并且被广泛使用（尽管主要在相当有限的领域中）。有相当多的库可以实现编码和解码。我怀疑是否有人真的很喜欢它，但如果你需要它的功能，它可能是第一选择，如果只是因为它已经为人所知并在某种程度上被接受。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T15:50:22.597

对于这种情况，我的第一选择是 ASN.1，因为它使您可以灵活地在任一端使用所需的任何编程语言，并且独立于平台。它向您隐藏了字节序问题，因此您不必担心它们。一端可以使用 Java，而另一端使用 C 或 C++ 或 C#。它还支持多种编码规则，您可以根据需要从中选择。如果目标是使编码尽可能小，则有 PER（打包编码规则）；如果您更喜欢使用 XML 交换信息，则有 E-XER（扩展 XML 编码规则），或者有 DER（区分编码规则）如果您的应用程序涉及数字签名或证书。ASN.1 广泛应用于电话领域，也应用于银行、汽车、航空、医疗设备等多个领域。

您可以免费试用 ASN.1 的一个极好的资源是[http://asn1-playground.oss.com](http://asn1-playground.oss.com)，您可以在其中使用一些现有的 ASN.1 规范，或者尝试创建自己的规范，看看各种编码规则会产生什么。

有一些优秀的书籍可从[http://www.oss.com/asn1/resources/books-whitepapers-pubs/asn1-books.html](http://www.oss.com/asn1/resources/books-whitepapers-pubs/asn1-books.html)免费下载，其中第一本名为“ASN.1 — 异构之间的通信”系统”。

# javascript - __doPostBack 在 safari 或 firefox 中不起作用，在 IE 中起作用

> ID：11107163
> 
> 赞同：0
> 
> 时间：2012-06-19T18:32:36.523
> 
> 标签：javascript, asp.net, vb.net, postback, dopostback

在我的asp.net 应用程序中，两个按钮调用了一个名为refreshView 的javascript 函数，下面是函数refreshView。

```
function RefreshView() {
                        __doPostBack('ButtonApply', '')
                        window.parent.location.href = "dashboardtree.aspx"
                    } 
```

在 IE 中，这工作正常，但在 firefox 和 safari 中，页面刷新（由于 window.parent.location） - 但从不调用 doPostBack （我能够使用跟踪点告诉这一点，并且调用的子将值存储到数据库，值也没有被存储， sub 永远不会被命中）。下面是 sub 的第一行。

```
 Private Sub ButtonApply_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles ButtonApply.Click 
```

谁能明白为什么这行不通？我想我总是可以用 pageMethods 替换 doPostBack 并创建一个新的子/函数 - 但我想以目前的方式完成它。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:43:11.940

不要在 JavaScript 例程中同时执行重定向和回发。你应该做的是在你的回发逻辑完成后重定向。您只会知道它何时在 Codebehind 中完成，或者您的 Javascript 是否收到某种异步回调。在当前状态下，您的 JavaScript 例程不知道您的回发何时完成。

你正在制造冲突。您实际上在做的是告诉页面发布并同时重定向到其他地方。由于这个事实，FireFox 和 Safari 很可能忽略了`__doPostBack()`这一点。

这就是我会做的事情：

```
public void Page_Load(object sender, EventArgs e)
{
  string target = Request["__EVENTTARGET"];
  //if parameter equals "ButtonApply"
  //{       
  //    Do whatever, Then...
  //    Response.Redirect("dashboardtree.aspx"); <- you may need to modify the url depending on your structure
  //}
} 
```

**编辑**

```
...about the response.redirect - this will not work for me because the page that contains the post back, is an iframe inside another page... 
```

抱歉，我错过了 window.parent。

那么我推荐的是使用ajax。简而言之，您将使用 ajax 调用服务器端方法，该方法将执行您的逻辑（您当前在回发中执行的操作）。完成后，当进程完成（以及是否成功）时，将在回调中通知客户端。成功完成后，您将执行重定向。

网上有很多这样的例子，我给大家举几个：

*   [使用jQuery直接调用ASP.NET AJAX页面方法](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)
*   [使用 jQuery 调用 ASP.NET AJAX 页面方法——通过示例](http://weblogs.asp.net/craigshoemaker/archive/2008/11/07/using-jquery-to-call-asp-net-ajax-page-methods-by-example.aspx)
*   [使用脚本管理器从客户端调用服务器端方法](http://wiki.asp.net/page.aspx/1276/call-server-side-method-from-client-side-using-script-manager/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:12:21.370

为了在每次回发完成后执行一个方法，您可以通过 PageRequestManager 将该方法添加到处理程序列表中。（参见： http: [//msdn.microsoft.com/en-us/library/bb311028](http://msdn.microsoft.com/en-us/library/bb311028)）方法执行后，如有必要，您可以将其从处理程序列表中删除。

```
function Reload() {
    Sys.WebForms.PageRequestManager.getInstance().remove_pageLoaded(Reload);
    window.parent.location.href = "dashboardtree.aspx";
}

function RefreshView() {
    Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(Reload);
    __doPostBack('ButtonApply', '');
} 
```

# python - 使用python将数字字符串转换为MD5

> ID：11107169
> 
> 赞同：2
> 
> 时间：2012-06-19T18:32:59.040
> 
> 标签：python, md5, geohashing

受 XKCD geohashing 漫画 (http://imgs.xkcd.com/comics/geohashing.png) 的启发，我想我应该尝试用 Python 编写生成器。不过，我已经用它的主要部分打了一个块：转换为 MD5，然后转换为十进制。

有可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T18:35:07.397

**编辑：**看完漫画后，这里有一个更完整的[XKCD geohashing](http://imgs.xkcd.com/comics/geohashing.png)解决方案：

```
>>> md5 = hashlib.md5('2005-05-26-10458.68').hexdigest()     # get MD5 as hex string
>>> float.fromhex('0.' + md5[:16])                           # first half as float
0.85771326770700229
>>> float.fromhex('0.' + md5[16:])                           # second half as float
0.54454306955928211 
```

这是“转换为 MD5 然后转换为十进制”的更一般的答案：

假设您想要 string 的十进制 MD5 `'hello world'`，您可以使用以下内容：

```
>>> int(hashlib.md5('hello world').hexdigest(), 16)
125893641179230474042701625388361764291L 
```

该[`hash.hexdigest()`](http://docs.python.org/library/hashlib.html#hashlib.hash.hexdigest)函数返回一个十六进制字符串，`int(hex_str, 16)`您可以[将十六进制字符串转换为十进制](https://stackoverflow.com/a/209550/505154)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:39:28.870

用于`int('db931', 16)`将十六进制（base-16）字符串`db931`转换为十进制。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:43:23.177

这是一条线索 - 它对[示例图像](http://imgs.xkcd.com/comics/geohashing.png)进行编码并生成您将在那里找到的数字。

```
>>> from hashlib import md5
>>> hash = md5("2005-05-26-10458.68").hexdigest()
>>> hash
'db9318c2259923d08b672cb305440f97'
>>> int(hash[:16],16)/16.**16
0.8577132677070023
>>> int(hash[16:],16)/16.**16
0.5445430695592821
>>> 
```

# c# - 属性类型作为通用参数

> ID：11107170
> 
> 赞同：1
> 
> 时间：2012-06-19T18:33:04.293
> 
> 标签：c#, generics

我试图弄清楚如何让泛型调用为类型调用一个变量。在下面的调用中，它采用“DAL.Account”类型并且工作正常。

```
var tst = ctx.GetTable<DAL.Account>().Where(t => t.Sbank == "000134"); 
```

我想改变它，以便我可以传递一个变量来代替“DAL.Account”。像这样的东西，但我知道这是行不通的，因为你不能将属性作为类型传递。

```
ctx.GetTable<Criteria.EntityType>().Where(LinqToSQLHelper.BuildWhereStatement(Criteria.StateBag), Criteria.StateBag.Values.ToArray()) 
```

下面是我认为解释我正在尝试做的外壳代码片段。泛型不是我的强项，所以我正在寻求帮助。无论如何，我可以做到这一点吗？

```
//Stores a "Type" that indicates what Object is a Criteria for.
public class AccountCriteria : IGeneratedCriteria
{
    ...

    public Type EntityType
    {
        get {return typeof(DAL.Account);}
    }
}

//I have added a function to the DataContext called "GetTable"
// And then used it as an example in a Console App to test its functionality.
public class ADRPDataContext : NHibernateDataContext
{
    ...

    public CodeSmith.Data.NHibernate.ITable<T> GetTable<T>() where T : EntityBase
    {
         var tb = new CodeSmith.Data.NHibernate.Table<T>(this);
         return tb;
    }
}

// console application that uses DataContext.GetTable
class Program
{
    static void Main(string[] args)
    {
        using (var ctx = new ADRPDataContext())
        {
            var tst = ctx.GetTable<DAL.Account>().Where(t => t.Sbank == "000134");
        }
    }
}

//ExistsCommand class that uses the EntityType property of the Critera to generate the data.
public class ExistsCommand
{
    private IGeneratedCriteria Criteria { get; set; }

    protected override void DataPortal_Execute()
    {
        using (var ctx = new DC.ADRPDataContext())
        {
            //This was my first attempt but doesn't work becuase you can't pass a property in for a Type.
            //But I can figure out how to write this so that it will work.
            Result = ctx.GetTable<Criteria.EntityType>().Where(LinqToSQLHelper.BuildWhereStatement(Criteria.StateBag), Criteria.StateBag.Values.ToArray()).Count() > 0;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T15:47:34.203

您正在寻找实例化泛型类型。一些信息可以在[这里找到](http://msdn.microsoft.com/en-us/library/b8ytshk6.aspx)

这是一个简单的示例，演示如何实例化容量为 3 的 List。这是一个方法，当您不知道类型时可以调用该方法来创建泛型：

```
public static Object CreateGenericListOfType(Type typeGenericWillBe)
    {
        //alternative to the followin:
        //List<String> myList = new List<String>(3);

        //build parameters for the generic's constructor (obviously this code wouldn't work if you had different constructors for each potential type)
        object[] constructorArgs = new Object[1];
        constructorArgs[0] = 3;

        //instantiate the generic.  Same as calling the one line example (commented out) above. Results in a List<String> with 3 list items
        Type genericListType = typeof(List<>);
        Type[] typeArgs = { typeGenericWillBe };
        Type myNewGeneric = genericListType.MakeGenericType(typeArgs);
        object GenericOfType = Activator.CreateInstance(myNewGeneric, constructorArgs);

        return GenericOfType;
    } 
```

下面是一些示例代码，将向您展示示例方法的工作原理：

```
List<String> Strings = (List<String>)InstantiateGenericTypeWithReflection.CreateGenericListOfType(typeof(String));

        //demonstrate the object is actually a List<String> and we can do stuff like use linq extensions (isn't a good use of linq but serves as example)
        Strings.Add("frist");
        Strings.Add("2nd");
        Strings.Add("tird");
        Console.WriteLine("item index 2 value: " + Strings.Where(strings => strings == "2").First()); 
```

在您的示例中，将您的替换`GetTable<Criteria.EntityType>()`为`CreateGenericTableOfType(Criteria.EntityType)`. 这将返回您传入的任何类型的通用表。您当然需要正确实现该方法（处理构造函数参数，将列表更改为表等）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:22:04.093

我认为你需要稍微改变你这样做的方式，而是使用泛型而不是 EntityType 属性。可能类似于以下内容：

```
// Create an abstract class to be used as the base for classes that are supported by
// ExistsCommand and any other classes where you need a similar pattern
public abstract class ExtendedCriteria<T> : IGeneratedCriteria
{
    public ExistsCommand GetExistsCommand()
    {
        return new ExistsCommand<T>(this);
    }
}

// Make the non-generic ExistsCommand abstract
public abstract class ExistsCommand
{
    protected abstract void DataPortal_Execute();
}

// Create a generic sub-class of ExistsCommand with the type parameter used in the GetTable call
// where you were previously trying to use the EntityType property
public class ExistsCommand<T> : ExistsCommand
{
    protected override void DataPortal_Execute()
    {
        using (var ctx = new DC.ADRPDataContext())
        {
            Result = ctx.GetTable<T>().Where(LinqToSQLHelper.BuildWhereStatement(Criteria.StateBag), Criteria.StateBag.Values.ToArray()).Count() > 0;
        }
    }

}

// Derive the AccountCriteria from ExtendedCriteria<T> with T the entity type
public class AccountCriteria : ExtendedCriteria<DAL.Account>
{
    ...
} 
```

# git - 如何最好地解析和显示 Git 补丁（差异）信息？

> ID：11107171
> 
> 赞同：5
> 
> 时间：2012-06-19T18:33:08.317
> 
> 标签：git, github, github-api

我想显示 Github 补丁，不想编写自己的解析器。[具体来说，我们正在解析来自 Github API 文档的示例](http://developer.github.com/v3/repos/commits/#compare-two-commits)中的 files.patch 。

我希望有类似[Google-Code-Prettify](http://code.google.com/p/google-code-prettify/)的东西，但广泛的谷歌搜索并没有出现任何结果。有什么可以做的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-04-13T10:47:55.333

[parse-diff](https://github.com/sergeyt/parse-diff)（CoffeeScript 也是如此，但没关系，因为它可以在任何 JS 上下文中使用）听起来更好（更广泛使用、维护）的选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-18T12:53:16.057

[node-diff-parser 会有](https://github.com/agate/node-diff-parser)帮助吗？诚然，它似乎是在 CoffeeScript 而不是直接的 JavaScript 中。

或者，您可以尝试[jonjonsonjr 的 diff-parse](https://github.com/jonjonsonjr/diff-parse)，它看起来是直接的 JavaScript。

# php - CodeIgniter 的自定义库中的 CI 实例

> ID：11107173
> 
> 赞同：0
> 
> 时间：2012-06-19T18:33:14.290
> 
> 标签：php, codeigniter

我正在尝试在 CodeIgniter 中创建一个自定义用户库。在这个库中，我想使用其他 CodeIgniter 库和助手，但我遇到了错误。以下是我采取的步骤：

1.  我在 User.php 文件中创建了 User 类并将其上传到应用程序/库/。

2.  在 application/config/autoload.php 中，我正在自动加载用户库。

这是我的用户库中的代码：

```
<?php 

    class User {

    private $CI;

        public function __construct()
        {
            $this->CI =& get_instance();
            $this->CI->load->helper('form');
        }

        public function create_login_form()
        {
            echo 'hello';
            echo $this->CI->form->form_open();
        }

    }

/* End of file User.php */ 
```

然后在我的一个观点中，我用来调用 create_login_form 方法：

```
$this->user->create_login_form() 
```

似乎正在调用该方法，因为正在回显 hello 但是当它使用表单帮助器`form_open`方法时，我收到以下错误：

> 遇到 PHP 错误 严重性：通知消息：未定义属性：Home::$form 文件名：libraries/User.php 行号：46
> 
> 致命错误：在第 46 行的 .../application/libraries/User.php 中调用非对象的成员函数 form_open()

任何想法我做错了什么？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:39:15.350

助手提供功能而不是某些对象的方法。`form_open()`您可以在加载表单助手后直接使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-12T05:38:12.540

```
class User {

    public function __construct()
    {
        $CI =& get_instance();
        $CI->load->helper('form');
    }

    public function create_login_form()
    {
        echo 'Title';
        echo form_open(); // Form open is helper. Not library
        echo 'Write something';
        echo form_close(); // Produces a closing </form> tag.
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:50:22.347

```
class User {

    private $CI;

    public function __construct()
    {
        $this->CI =& get_instance();
        $this->CI->load->helper('form');
    }

    public function create_login_form()
    {
        echo 'Title';
        echo form_open(); // Form open is helper. Not library
        echo 'Write something';
        echo form_close(); // Produces a closing </form> tag.
    }

} 
```

# ruby-on-rails - 有没有办法在连接表中设置额外的值

> ID：11107176
> 
> 赞同：1
> 
> 时间：2012-06-19T18:33:22.837
> 
> 标签：ruby-on-rails, ruby-on-rails-3

好的，所以我在 Rails 中有这种关系：

```
class Position < ActiveRecord::Base
  belongs_to :company
  belongs_to :user
end

class User < ActiveRecord::Base
  has_many :companies, :through => :positions
  has_many :positions

class Company < ActiveRecord::Base
  has_many :positions
  has_many :users, :through => :positions 
```

这是职位的架构：

```
create_table "positions", :force => true do |t|
  t.integer  "company_id"
  t.integer  "user_id"
  t.datetime "created_at",                     :null => false
  t.datetime "updated_at",                     :null => false
  t.boolean  "regular_user", :default => true
end 
```

这`regular_user`是向管理员和员工发出信号，所以我的问题是如何设置`regular_user`这些`0`数据`false`：

```
@user = User.find(params[:user_id])
@company = Company.find(params[:company_id])
@user.companies << @company 
```

有一个更好的方法吗？我刚在想：

```
Position.create(user_id: params[:user_id], company_id: params[:company_id], regular_user: 0) 
```

但是有建立协会的标准吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:46:53.173

尝试这个：

```
class User < ActiveRecord::Base
  has_many :positions
  has_many :companies, :through => :positions
  has_many :companies_as_non_regular_user, :through => :positions, 
           :conditions => {:"positions.regular_user" => false}
  ...
end

@user = User.find(params[:user_id])
@company = Company.find(params[:company_id])
@user.companies_as_non_regular_user << @company 
```

# sql-server - 外键与.net DataAdapter 相同的表约束

> ID：11107178
> 
> 赞同：0
> 
> 时间：2012-06-19T18:33:26.190
> 
> 标签：sql-server, ado.net, dataadapter

我正在尝试向 DataTable 添加一些行并使用 DataAdapter 将表写入数据库。有问题的数据库表有一个带有外键的自引用 (ParentId)。我试图插入的行集包含父母和他们的孩子。我以正确的顺序添加行，以便首先添加父行。不过，在 DataAdapter 上调用更新时，我得到一个“外键同表约束违规”。我猜适配器只是不关心将行插入数据库的顺序。除了在更新之前禁用约束之外，还有其他解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:50:15.063

插入父行，调用更新，然后插入子行。

# entity-framework - EF CodeFirst - 与不可为空的列的一对一关系 - 对于专家

> ID：11107179
> 
> 赞同：0
> 
> 时间：2012-06-19T18:33:27.727
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我的数据库有一个来自第三方公司的约定，即“数据库中的所有列都必须是'not null'”。

现在我正在使用 EFCodefirst 映射所有表，但遇到了问题。

例如，我有一个与实体`SA1`具有一对一关系的`SA3`实体，我想添加一个新`SA1`的，其`a1_vend`属性为空字符串。

我为解决这个问题所做的就是`SA3`在 PK 中添加一个带有空字符串的实体，但我不喜欢这种方法。我想要一个更好的解决方案来解决我的问题。

我的 EFCodefirst 课程：

```
[ComplexType]
public class Endereco
{
    public string Logradouro { get; set; }
    public string Numero { get; set; }
    public string CEP { get; set; }
}

public class SA3
{
    public string Codigo { get; set; }
    public string Nome { get; set; }
}

public class SA1
{
    public string Codigo { get; set; }
    public string Nome { get; set; }
    public Endereco Endereco { get; set; }
    public Endereco EnderecoCobranca { get; set; }
    public bool IsDeleted { get { return false; } }

    public string a1_vend { get; set; }
    public SA3 Vendedor { get; set; }

    public SA1()
    {
        Endereco = new Endereco();
        EnderecoCobranca = new Endereco();
    }
}

public class SA3Map : EntityTypeConfiguration<SA3>
{
    public SA3Map()
    {

        ToTable("sa3010");

        HasKey(x => x.Codigo);

        Property(x => x.Codigo)
            .HasColumnName("a3_cod");

        Property(x => x.Nome)
            .HasColumnName("a3_nome");
    }
}

public class SA1Map : EntityTypeConfiguration<SA1>
{
    public SA1Map()
    {
        ToTable("sa1010");

        HasKey(x => x.Codigo);

        Property(x => x.Codigo)
            .HasColumnName("a1_cod")
            .IsRequired();
        Property(x => x.Nome)
            .HasColumnName("a1_nome")
            .IsRequired();
        Property(x => x.Endereco.Logradouro)
            .HasColumnName("a1_end")
            .IsRequired();
        Property(x => x.Endereco.Numero)
            .HasColumnName("a1_num")
            .IsRequired();
        Property(x => x.Endereco.CEP)
            .HasColumnName("a1_cep")
            .IsRequired();
        Property(x => x.EnderecoCobranca.Logradouro)
            .HasColumnName("a1_endcob")
            .IsRequired();
        Property(x => x.EnderecoCobranca.CEP)
            .HasColumnName("a1_cepcob")
            .IsRequired();
        Property(x => x.EnderecoCobranca.Numero)
            .HasColumnName("a1_numcob")
            .IsRequired();
        Property(x => x.a1_vend)
            .IsRequired();

        HasRequired(x => x.Vendedor)
            .WithMany()
            .HasForeignKey(x => new { x.a1_vend })
            .WillCascadeOnDelete(false);
    }
} 
```

我的示例程序：

```
class Program
{
   static void Main(string[] args)
    {
        MyContext ctx = new MyContext();
        var novoVendedor = new SA3()
        {
            Codigo = "",
            Nome = "Empty, don´t remove this row"
        };
        ctx.Vendedores.Add(novoVendedor);

        var novoCliente = new SA1()
        {
            Codigo = "000001",
            a1_vend = "", //I can´t use null here because my database convention
            Endereco = new Endereco() { Numero = "99", CEP = "13280000", Logradouro = "Rua Teste" },
            Nome = "Cliente S/A",
            EnderecoCobranca = new Endereco { CEP = "13444999", Numero = "S/N", Logradouro = "Rua Cobranca" }
        };
        ctx.Clientes.Add(novoCliente);
        ctx.SaveChanges();

    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:38:28.570

如果以下情况属实：

1.  `SA1`->`SA3`是一对一的关系。
2.  该`a1_vend`列在您的`sa1010`表中。
3.  您不能使`a1_vend`列可以为空

如果没有首先引用的对象，您将无法创建`SA1`对象。`SA3`

如果您不能使该`a1_vend`列可以为空，您的另一个选择是从表中删除该`a1_vend`列并创建一个将对象映射到对象`sa1010`的映射表（只需要两列：我猜这与相同）`SA1``SA3``SA1.Codigo``a1_vend``SA3.Codigo`

然后你会改变你`SA1Map`如下：

```
 ...
        Property(x => x.EnderecoCobranca.Numero)
            .HasColumnName("a1_numcob")
            .IsRequired();
        //Property(x => x.a1_vend) // removing this
            //.IsRequired();

        HasRequired(x => x.Vendedor)
            .WithMany()
            .Map(m =>
                    {
                        m.ToTable("sa1010sa3010Map");
                        m.MapLeftKey("sa1_Codigo");
                        m.MapRightKey("sa3_Codigo");
                    });
    } 
```

# c# - ASP.NET 进程删除目录上的文件所需的权限

> ID：11107181
> 
> 赞同：1
> 
> 时间：2012-06-19T18:33:32.370
> 
> 标签：c#, asp.net, iis

我有一个托管在 IIS 7.5 上的 Web 应用程序“MyAPP”。它使用用户名“MyAPP”作为 ApplicationPoolIdentity 运行。我已授予这些用户对目录的完全控制权

*   IIS_IUSRS
*   IUSR
*   ASPNET\MyAPP

当我尝试从应用程序中删除该目录中的任何文件时，我收到错误访问被拒绝。我尝试授予所有权限，但无法解决此问题。我错过了什么吗？

# jquery - 当 div 与 jquery 一起出现时滚动页面

> ID：11107196
> 
> 赞同：0
> 
> 时间：2012-06-19T18:34:34.720
> 
> 标签：jquery, scroll

现在我有一个链接，当你点击它时会出现一个隐藏的 div。但是，当隐藏的 div 出现时，页面本身不会滚动 - 因此，除非用户*知道*向下滚动，否则他们不会看到隐藏的 div。

这是我的 HTML 代码：

```
<p class="telephone2"><a href="#">Disclaimer</a></p>
    <div class="disclaimer">
      <p>Hidden div!</p>
   </div><!--end disclaimer --> 
```

这是我的 Javascript，它只调用 Jquery：

// 下拉免责声明

```
$(".telephone2").click(function () {
    if ($(".disclaimer").is(":hidden")) {
        $(".disclaimer").slideDown("slow");
    }
    return false;
}); 
```

有没有人有任何想法？

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:37:33.423

try this:

```
$(".telephone2").click(function () {
    if ($(".disclaimer").is(":hidden")) {
        $(".disclaimer").slideDown("slow");
        $(window).scrollTop($(".disclaimer").offset().top)
    }
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:47:15.360

给你：工作演示：http: [//jsfiddle.net/epinapala/xy2Ua/](http://jsfiddle.net/epinapala/xy2Ua/)

```
<p class="telephone2"><a href="#">Disclaimer</a></p>
<p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p><p>&nbsp;</p>
    <div class="disclaimer">
      <p>Hidden div!</p>
   </div><!--end disclaimer -->

<script type='text/javascript'>
    $(".disclaimer").hide();
    $(".telephone2").click(function () {
        if ($(".disclaimer").is(":hidden")) {
            $(".disclaimer").slideDown("slow",function(){
                var elem = $('.disclaimer');
        $(window).scrollTop(elem.offset().top);
            });

        }
        return false;
    });

​&lt;/script> 
```

# python - 谷歌应用引擎自动制作许多页面

> ID：11107197
> 
> 赞同：-2
> 
> 时间：2012-06-19T18:34:36.350
> 
> 标签：python, html, css, google-app-engine

我正在使用带有 python 以及 HTML 和 CSS 的谷歌应用程序引擎构建一个网络应用程序，我有一堆页面（大约 15 个），我想制作它们都会有些不同，但会有类似的目的。有没有办法只有几个可以创建一堆页面的处理程序，或者我是否需要在 python 中为每个页面使用不同的类？

我知道这个问题在没有页面上下文的情况下有点模糊，但实际上任何关于如何创建多个页面而不为它们编写全新的处理程序和 HTML 的信息都会有很大的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:48:11.130

不，您不需要为每个页面设置不同的类。

您可以将每个请求重定向到单个脚本`app.yaml`

```
handlers:
- url: /.*
  script: dispatcher.app 
```

然后，`dispatcher.py`您可以将每个请求重定向到单个 RequestHandler 并在那里编写所有逻辑，例如`jinja2`动态地为不同的 URL 提供不同的模板。

[URL 映射文档](https://developers.google.com/appengine/docs/python/tools/webapp/running#URL_Mappings)解释了如何将多个 URL 重定向到一个 RequestHandler 。例如：

```
class BrowseHandler(webapp.RequestHandler):

    def get(self, category, product_id):
        # Display product with given ID in the given category.

# Map URLs like /browse/(category)/(product_id) to BrowseHandler.
application = webapp.WSGIApplication([(r'/browse/(.*)/(.*)', BrowseHandler)
                                     ],
                                     debug=True)

def main():
    run_wsgi_app(application)

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:44:05.187

这实际上取决于您使用的框架（如果有的话），但您正在寻找的是模板系统。[这](http://www.untilnil.com/2010/08/appenginetemplates2/)是一个很好的框架和模板系统列表。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:46:29.400

这实际上取决于您要做什么，但是如果您使用的是 webapp 或 webapp2，则可以使用一个处理程序。检查请求参数的 url 字段以找出用户正在请求的页面。

# wordpress - 使用来自同一服务器上另一个安装的 Wordpress 主题

> ID：11107198
> 
> 赞同：0
> 
> 时间：2012-06-19T18:34:38.247
> 
> 标签：wordpress, wordpress-theming

我在同一台服务器上有两个安装，我需要安装 B 才能使用安装 A 中的主题，我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:38:47.373

You can [Create a Network](http://codex.wordpress.org/Create_A_Network) of sites (synonyms: **multisite**, WPMU).

BTW you should ask this on [http://wordpress.stackexchange.com](http://wordpress.stackexchange.com)

EDIT: the documentation specific to themes in a multisite WP is here: [http://codex.wordpress.org/Multisite_Network_Administration#Themes](http://codex.wordpress.org/Multisite_Network_Administration#Themes)

> All themes are installed for the entire network. If you edit the code of one theme, you edit it for all sites using that theme. You can install the plugin WordPress.com Custom CSS to allow each site to tweak their own CSS without affecting anyone else. You can activate themes for the entire network, or edit sites and activate them individually.

# asp.net - 使用 SQL Server Compact Edition 的文件共享冲突

> ID：11107199
> 
> 赞同：0
> 
> 时间：2012-06-19T18:34:41.733
> 
> 标签：asp.net, sql-server, sql-server-ce

我有一个用 ASP.NET 网页编写的个人网站，带有一个小型 SQL Server Compact Edition 数据库。这对我来说很方便，因为数据库存储为文件 (.sdf)，当我添加、修改或删除任何记录并在本地测试时，我可以在 WebMatrix 中使用 Publish... 并复制 .sdf 文件超过。

这很好用，除了我在访问 .sdf 文件时收到的随机错误消息。

我得到... `There is a file sharing violation. A different process might be using the file.`

有时页面刷新会解决它，有时我必须刷新页面几次。我想将数据库迁移到 SQL Server 数据库会修复它，但我真的不想这样做。这是最好的选择吗？

这是该网站的链接，也许您会遇到错误：[http ://www.garethlewisweb.com](http://www.garethlewisweb.com)

有什么我必须在代码中更改的地方，还是我需要要求我的托管公司更改某些内容。我在这方面真的没有太多经验。

谢谢！

**更新**

这是我的代码

**_AppStart.cshtml**

```
@{
     WebSecurity.InitializeDatabaseConnection("GarethLewisWeb", "UserProfile", "UserId", "Email", true);
     // WebMail.SmtpServer = "mailserver.example.com";
     // WebMail.EnableSsl = true;
     // WebMail.UserName = "username@example.com";
     // WebMail.Password = "your-password";
     // WebMail.From = "your-name-here@example.com";
} 
```

**默认.cshtml**

```
@{  
    Layout = "~/Shared/_SiteLayout.cshtml";
    Page.Title = "Home";

    var db = Database.Open("GarethLewisWeb");

    var featuredPhotoSQL = "    SELECT  col " +
                           "      FROM  tablename ";

    var featuredPhoto = db.QuerySingle(featuredPhotoSQL);
}

[Lots of HTML and C# code here...] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:38:27.830

Well, you know- that is like trying to wash dishes in an oven. It won't work.

Basically - most likely you try to create multiple instances of SQL Server CE and then use the same DB and guess what - the old one still has the exclusive lock.

In general, you CAN NOT USE SQL CE ON A WEBSITE. It is not made for concurrent access, and even if you are one of the few, that is like asking for trouble. Google comes around, a fiend comes around, and occaionally your browser comes around with 2 requests that overlap and boom - dead.

You do not show any code, so I can only guess what causes the problem, but the documentation for CE is QUITE strict - it is NOT for multi threaded scenarios.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-05T08:29:24.767

不是这个特定问题的真正答案，但迁移到 SQL Server 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-17T18:55:59.017

当我们添加 Mode=Read Only; 连接字符串中的 Temp Path=c:/Temp 然后修复。

```
 <connectionStrings>
      <add name="XYZ" providerName="System.Data.SqlServerCe.4.0" connectionString="Data Source=|DataDirectory|\XYZ.sdf;Max Database Size = 4091;Enlist=false;encryption mode=engine default;password=!secret!;Mode = Read Only;Temp Path=c:/temp" />
  </connectionStrings> 
```

它对我们有用！

# ffmpeg - 如何限制 ffmpeg 仅使用我的 CPU 的 50%？

> ID：11107206
> 
> 赞同：17
> 
> 时间：2012-06-19T18:35:04.493
> 
> 标签：ffmpeg

我使用 ffmpeg 通过 UDP 流式传输我的桌面，但我的问题是 ffmpeg 的进程在整个运行期间总是占用 100% cpu，没有其他应用程序的空间，我的问题是如何限制 ffmpeg 的进程只占用 50-60%的CPU？

我的 cpu 有单核 2 gb 内存

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-07-13T08:17:51.977

FFMpeg 有一个选项 `-threads`。您可以在那里定义，如果它是`auto`（默认），或者您可以限制使用的线程数（CPU 内核）。建议您根据可用线程数减 1 或 2 来设置数量。因此，如果您有 8 个线程，设置为`-threads 6`会很棒。但是如果你只有一个内核和 2 GB 的 RAM，我不确定是不是这样！FFMpeg 需要大量资源。

# hibernate - EntityManager Hibernate 没有持久性提供程序

> ID：11107208
> 
> 赞同：2
> 
> 时间：2012-06-19T18:35:10.487
> 
> 标签：hibernate, jpa

我有一个`No Persistence provider for EntityManager`异常，无法弄清楚是什么原因造成的。这是我的配置文件：

**Persistence.xml**（存储在`src/META-INF`）

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="HatifimJPA" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>entities.HatUser</class>
        <properties>
            <property name="hibernate.connection.driver_class" value="oracle.jdbc.driver.OracleDriver" />
            <property name="hibernate.connection.username" value="Benny" />
            <property name="hibernate.connection.password" value="oracle" />
            <property name="hibernate.connection.url" value="jdbc:oracle:thin:@localhost:1521:xe" />
            <property name="hibernate.dialect" value="org.hibernate.dialect.OracleDialect" />
        </properties>
    </persistence-unit>
</persistence> 
```

例外：

> 线程“主”javax.persistence.PersistenceException 中的异常：在 javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:69) 在 javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:47) 中没有名为 HatifimJPA 的 EntityManager 的持久性提供程序testing.TestClass.main(TestClass.java:16)

唯一的区别是我试图`EntityManager`进入一个`public void main(...) { ... }`街区，但是，我不记得过去这样做有问题。

谁能帮忙指出我的问题可能出在哪里？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T14:21:38.933

尝试将 persistence.xml 放入 src/main/resources/META-INF/ 并将此代码放入 main 方法：

```
EntityManagerFactory emf = Persistence.createEntityManagerFactory("HatifimJPA");
EntityManager em = emf.createEntityManager(); 
```

# sql-server - 共享 Powerpivot 报告

> ID：11107210
> 
> 赞同：0
> 
> 时间：2012-06-19T18:35:15.587
> 
> 标签：sql-server, sharepoint, sharepoint-2010, powerpivot

我在 Powerpivot for excel 中生成了一份报告，并希望与我团队的其他成员分享。我不希望所有人都下载和安装 Powerpivot 附加组件。

我发现该报告可以通过 SharePoint 2010 共享。为此，我需要将用于 SharePoint 的 Powerpivot 附加组件安装为 SQL Server 的一部分。我是对的还是有什么方法可以让 Powerpivot 与 SharePoint 一起工作？仅为 Powerpivot 附加组件购买 SQL Server 是不值得的，因为我们不会使用 SQL Server。有没有其他方法可以分享报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-04T19:15:29.967

我需要与 5 个用户共享我的 Powerpivot 生成的报告。一种选择是让他们都安装免费插件和 40 美元的 SQL Server 2012 开发人员版（在亚马逊上）。您可以在您的计算机上运行该实例，并让它们通过 odbc 连接器或 Excel 的内置连接向导连接到数据源。另一种选择，虽然不是最好的，但每个人都可以在 SQL Server 上运行一个廉价的开发实例，让您通过网络或记忆棒来 BCP 输入和输出数据以共享它。

最便宜和最简单的方法是将数据集放在 Azure 或 Azure Marketplace 中，让他们直接通过 PowerPivot 插件查询数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:22:30.350

Lynn 的回答是正确的 - 您应该考虑获取 SharePoint，或者更好地将 PowerPivot 多维数据集提升到 SQL Server 2012。

如果您一心想在包含 PowerPivot 多维数据集的 Excel 电子表格中查询数据，那么您将需要求助于一些核心宏。我强烈建议不要这样做。

有关如何通过代码连接 PowerPivot 多维数据集的高峰，您可以尝试查看 codeplex 上的[Excel Refresh Service](https://excelrefresher.codeplex.com/)的源代码- 它包含打开和发送查询到 Excel 嵌入式 PowerPivot 多维数据集的代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-11T02:26:44.957

通常，您会购买、安装和使用集成了 PowerPivot 服务的 SharePoint 2010 Enterprise，以在网站上托管 PowerPivot 工作簿。但是，还有其他选择。一个有趣的事情是为 PowerPivot 购买主机。这是一家托管公司的[示例](http://www.pivotstream.com/cloud-powerpivot/cloud-powerpivot-plan-comparison)。请务必仔细查看其按用户数量和数据刷新需求定价。

# javascript - Google Plus One Button - How to add a callback?

> ID：11107221
> 
> 赞同：9
> 
> 时间：2012-06-19T18:35:48.423
> 
> 标签：javascript, jquery, api, google-plus

I have the google+ button being rendered on my site as follows:

In the JS:

```
 var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s); 
```

In the html:

```
<g:plusone size="medium" href="https://site.com"></g:plusone> 
```

How can I add a callback to this to detect when the user has clicked? I see the docs here: [https://developers.google.com/+/plugins/+1button/#jsapi](https://developers.google.com/+/plugins/+1button/#jsapi) not seeing how to implement with the current render. Thanks

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-26T20:03:57.593

您可以使用回调属性向您的 +1 按钮标记添加 JavaScript 回调。提供驻留在全局命名空间中的函数的名称。当用户点击 +1 按钮时，它将被调用。

您的代码可能如下所示：

```
<script>

   function myCallback(jsonParam) {

      alert("URL: " + jsonParam.href + " state: " + jsonParam.state);

   }

</script>

<g:plusone size="medium" href="https://site.com" callback="myCallback"></g:plusone> 
```

[您可以在文档的标签参数部分](https://developers.google.com/+/plugins/+1button/#plusonetag-parameters)了解有关此属性的更多信息。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-03T22:33:52.353

除了 Jenny 的回答之外，您还可以通过将 class 属性设置为 g-plusone 并在任何按钮属性前面加上数据（例如回调）来使用**HTML5 有效的+1 标记**

```
<div class="g-plusone" data-callback="myCallback" ></div> 
```

来自[https://developers.google.com/+/web/+1button/](https://developers.google.com/+/web/+1button/)

# algorithm - 如何从范围中获取百分比

> ID：11107227
> 
> 赞同：6
> 
> 时间：2012-06-19T18:36:14.393
> 
> 标签：algorithm, math

我有一个基本的数学问题。我试图从一系列数字中获得一个百分比，而算法让我感到不安。

假设我有一个范围，`-5`我`+5`想知道给定值之间的百分比。我知道这`-5`将等同于`0%`并且`5`将会是`100%`，与`0`存在`50%`。

我尝试添加 5 来提高比例，但感觉就像是 hack。我希望它感觉充满活力，这样我就可以给它任何范围并成功地工作。

前任。

```
percent = (5 + value) * 100 / 10 
```

我如何确定`value`一般情况应该是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T18:38:22.520

```
range = top_value - bottom_value
percent = (value - bottom_value) / range 
```

# .htaccess - CakePHP nice urls - how to prevent normal urls from working

> ID：11107229
> 
> 赞同：0
> 
> 时间：2012-06-19T18:36:31.770
> 
> 标签：.htaccess, cakephp, url-rewriting, google-index

I have a website that's written using CakePHP. I've added some rewrite rules in the .htacces file to change the default urls to different ones (instead of /controller1/action1/parameter I have /some-string-about-controller-and-action/parameter, for example).

The problem is that now both the normal url and the nice one are available, and google seems to be indexing both, which is a problem. I'd like to only keep the nice one, which is the proper way to handle this so that it affects the google results as little as possible?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:06:14.950

我不知道你为什么不想使用 cakes 自己的路由（如果你在做你想做的事时遇到困难，你可以使用自定义路由类来完成你想要的），然后确保你重定向所有相关的 URL您的 .htaccess 文件使用 MOVED PERMANENTLY 重定向到所需的 URL。

这样，谷歌将索引目标网址而不是不受欢迎的网址。您对此感到冒犯是对的，双重索引是损害您的 SEO 排名的好方法。

# billing - Google Bigquery says "Billing has not been enabled for this project."

> ID：11107234
> 
> 赞同：2
> 
> 时间：2012-06-19T18:36:54.827
> 
> 标签：billing, google-bigquery

I'm trying to load data in a new BigQuery table, but when I run the following in the 'bq shell'

> load ct.ads /tmp/data.csv id:integer,source:string,clicks:integer

I get

Waiting on job_7e1d39b261d041da8674a769e8275b91 ... (0s) Current status: DONE
BigQuery error in load operation: Billing has not been enabled for this project.

I've enabled billing and the tab in Google Api Console says:

* * *

Your billing information may take a few minutes to update. Please refresh this page for updates.

Authorized by: martin@foo.com - you Unbilled usage (estimate, updated daily) Start date May 2, 2012 Total (before taxes) 0.00 USD Statements None

* * *

Any hints?

* * *

Ok, it seems when I entered the CC information it was refused; I tried with another CC and it seems to be fine...

Now it says:

* * *

## Billing is enabled for all active, billable services

tnx

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:03:51.933

BigQuery 会缓存结算状态，可能需要几个小时才能更新。你什么时候修的CC号码？如果是今天，它可能只是没有在缓存中更新。如果需要超过 8 小时左右，请告知我们，我们将进行调查。

# hadoop - 选择与 Hadoop 用户列表匹配的记录

> ID：11107235
> 
> 赞同：0
> 
> 时间：2012-06-19T18:36:55.007
> 
> 标签：hadoop

作为尝试学习 hadoop 的一部分，我正在使用来自 twitter 流 API 的大量推文开展一个项目。在大约 2000 万条推文中，我生成了 N 个最活跃用户的列表，我想尝试根据他们所有推文的文本对其进行聚类。

所以我有一个几千个用户名的列表，我想做的是将每个用户的所有推文的内容连接在一起，最终为每个用户生成一个字数向量。

我不知道如何完成连接。我希望能够编写一些映射器来接收每条推文行，并说“如果这条推文来自我感兴趣的用户，则将其与关键用户名和值 tweetText 进行映射，否则忽略它。” 然后，reducer 可以很简单地像我想要的那样连接推文。

我的问题是，我如何告诉映射器我感兴趣的这一大用户列表？如果映射器可以拥有一个包含所有用户的 Hashtable 似乎会很好，但我不知道这是否可能。

有没有一个好的方法来完成这个，或者这个问题不适合 Map/Reduce？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:47:45.970

哦，没关系。我一直在考虑这个问题，但是一旦我把它写在这里，我意识到我认为我应该怎么做。我无需列出所有拥有 X 条推文的用户，然后再次查看数据并尝试找到他们的推文，我可以一次完成所有操作。

目前我正在映射 [username,1] 然后让 reducer 将所有 1 加在一起以生成推文计数。然后我试图找到所有用户的推文超过 X 条的推文。

要一次完成所有操作，我应该映射 [username,completeTweet] 然后让 reducer 仅连接并输出拥有超过 X 条推文的用户的数据，而忽略其他用户。

# php - 解释这个 jquery ajax 如何传递数据

> ID：11107238
> 
> 赞同：0
> 
> 时间：2012-06-19T18:36:56.833
> 
> 标签：php, jquery, ajax

我在 php 文件中有以下类：

```
function calcTotal(){
        var productID = <?php echo $product_info['products_id'];?>;
    var sizeID = 0; 

    $(".mine_sizes").each(function() {
          if ($(this).is(':checked'))  sizeID = $(this).val();                         
     });
    //alert(sizeID);
    var colorID = 0;

    $(".mine_color").each(function() {
          if ($(this).is(':checked'))  colorID = $(this).val();                        
     });

     $.ajax({
              type: "POST",
              url: 'get_product_price.php',
              data: "product_id="+ productID +"&color_id="+ colorID +"&size_id="+ sizeID,
              success: function( response ) {       
                    $("#price_container").html(response);
                    ;

              } 

     });

} 
```

和 php 文件 get_product_price.php：

```
if($_POST){

     $product_info_query = tep_db_query("select products_price, products_tax_class_id from " . TABLE_PRODUCTS . "  where products_id = '" . (int)$_POST['product_id']."'");
     $pricePrice = tep_db_fetch_array($product_info_query);
     $productPrice = $pricePrice['products_price'];

    $sizesPrices = tep_db_query("select options_values_price from products_attributes   where products_id='".$_POST['product_id']."' and options_values_id='".$_POST['size_id']."'");
 //  echo "select options_values_price from products_attributes   where products_id='".$_POST['product_id']."' and options_values_id='".$_POST['size_id']."'";
  // exit;
    if(mysql_num_rows($sizesPrices)>0){
        $priceRow = tep_db_fetch_array($sizesPrices);
        $productPrice = $productPrice + $priceRow['options_values_price'];
    }

    $sizesPrices2 = tep_db_query("select price from product_attributes_color_relation   where product_id='".$_POST['product_id']."' and color_id='".$_POST['color_id']."' and color_size_option_id='".$_POST['size_id']."'");

    if(mysql_num_rows($sizesPrices2)>0){
        $priceRow2 = tep_db_fetch_array($sizesPrices2);
        $productPrice = $productPrice + $priceRow2['price'];
    }
    //echo $productPrice; exit;
    echo $currencies->display_price($productPrice, tep_get_tax_rate($product_info['products_tax_class_id']));
    //echo $productPrice;
} 
```

该函数在单选按钮单击时调用并且当前正在工作，但我试图了解它是如何为自己工作的（并可能重新创建类似的函数）

我不太了解的是来自 ajax api 的数据参数。该数据参数如何使用？

我的另一个问题是成功参数。“响应”参数是标准还是可以称为任何参数？

感谢您向我解释这一点的任何帮助。我认为不需要任何其他信息，有一个类 id 为 #price_container 的 div 是价格回显的地方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:42:25.810

data 参数以与 HTML 表单相同的方式传递信息。至少这是最容易想到的方法。因此，“数据”将以 $_POST 或 $_GET 数组的形式出现。我总是将我的数据设置为 JSON 格式：

```
data: { "product_id": productID,"color_id": colorID, "size_id": sizeID }, 
```

将您的类型设置为“POST”，这将通过：

```
$_POST['product_id']
$_POST['color_id']
$_POST['size_id'] 
```

您可以为响应指定任何变量名称 - 但“响应”很好且易于记忆和使用。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:49:48.183

来自 ajax[文档](http://api.jquery.com/jQuery.ajax/)

`data`

> [Object, String] 要发送到服务器的数据。如果还不是字符串，则将其转换为查询字符串。它附加到 GET 请求的 url。请参阅 processData 选项以防止此自动处理。对象必须是键/值对。如果 value 是一个数组，jQuery 会根据传统设置的值（如下所述）序列化具有相同键的多个值。

基本上，如果您将`data`变量设置为查询字符串，它会按原样将其发送到服务器，否则它将根据您设置的键值对生成查询字符串。一旦 php 服务器接收到查询字符串，它就会被解析，您可以使用 `$_POST['key']`

# c# - 有没有办法强制所有属性名称映射在 EF 4.3 Code-First 中使用全部大写？

> ID：11107239
> 
> 赞同：1
> 
> 时间：2012-06-19T18:37:01.507
> 
> 标签：c#, oracle, ef-code-first, entity-framework-4.3

我在 Oracle 数据库中使用 EF 4.3 代码优先。关于数据库的一件奇怪的事情是它会自动将表名和列名全部大写。我的域属性在 PascalCase 中。不幸的是，EF 不知道将列名大写，所以我的查询不起作用。我在几个应该映射到 oracle 列的类上有数百个属性。我真的不想手动编码所有这些映射。有没有办法使用约定来大写列名？

**概括：**

我需要实体框架对所有列名使用全部大写。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:25:50.300

没有尝试过，但是像这样的东西呢：

```
public class SomeEntities : DbContext
{
    public DbSet<Entity> Entities { get; set; }

    protected override void OnModelCreating(DbModelBuilder modelBuilder)
    {
        // Configure Code First to ignore ColumnTypeCasing convention
        modelBuilder.Conventions.Remove<ColumnTypeCasingConvention>();
    }
} 
```

# java - Rendering HTML (w/ javascript) and Converting to an Image

> ID：11107241
> 
> 赞同：4
> 
> 时间：2012-06-19T18:37:05.997
> 
> 标签：java, javascript, html

I have an HTML page that has Javascript code. It needs to be rendered first before it can be converted into an image.

I am aware of projects like wkhtmltoimage, PhantomJS, khtmltopng, webkit2png, PrinceXML and html2image. I have implemented a few of those but I am trying to find a pure Java solution that does not have to use Process to execute a command. Any help would be great, thanks!

edit: I looked into Cobra however it seems that the JS support is still in dev and it does not parse my html file properly.

Or if there are any other ways of doing this, please let me know. I am just trying to find the best solution possible.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-09T18:31:55.590

我找到了使用[WebRenderer](http://www.webrenderer.com)的解决方案。WebRenderer 是一个付费解决方案，有 Swing、服务器和桌面版。自 2012 年 7 月 9 日起，swing 版本是唯一支持 HTML5 的版本。但是，可以在服务器上使用 swing 版本通过实例化浏览器而不是创建 JFrame 来转换图像。看到[这个问题](https://stackoverflow.com/questions/11362300/webrenderer-swing-and-server-edition/11400904#11400904)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:52:15.917

没有纯 Java 解决方案 - 没有人用 Java 编写过支持 HTML 5 的浏览器。

我会尝试以下任何一种方法：

1.  使用`env.js`+ [rhino](http://www.mozilla.org/rhino/)模拟可以运行 JavaScript 的浏览器。例如，这应该会给你一个 DOM，你可以使用[FlyingSaucer](http://code.google.com/p/flying-saucer/)来渲染它。

2.  将 SWT 添加到您的类路径（加上您平台的二进制文件）。它包含一个`Browser`使用系统浏览器[呈现 URL 或 HTML 字符串](http://www.eclipse.org/articles/Article-SWT-browser-widget/browser.html)的组件。

您可能需要[SWTBot](http://www.eclipse.org/swtbot/)以无头模式运行浏览器。

如果这不起作用并且您在 Linux 上，那么您可以启动一个内存 X 服务器`Xvfb`来打开您的浏览器。或者您可以使用`vncserver`在您的服务器上启动一个桌面。

**[编辑]** phantomjs[项目](http://code.google.com/p/phantomjs/)可能会做你想做的事：

> PhantomJS (www.phantomjs.org) 是一个可使用 JavaScript 或 CoffeeScript 编写脚本的无头 WebKit。
> [...]
> 用例：无头 Web 测试、站点抓取、页面渲染
> 多平台，可在主要操作系统上使用：Windows、Mac OS X、Linux、其他 Unices
> Web 标准的快速本地实现：DOM、CSS、JavaScript、Canvas , SVG。没有仿真！
> Linux 上的纯无头 (X11)，非常适合持续集成系统。也在 Amazon EC2 上运行。

[快速入门页面](http://code.google.com/p/phantomjs/wiki/QuickStart)解释了如何加载网页并将其呈现为图像。

# iphone - Receiving Data from Web iPhone

> ID：11107242
> 
> 赞同：0
> 
> 时间：2012-06-19T18:37:20.950
> 
> 标签：iphone, objective-c, ipad

It's the first time I have done anything like this but wondered what the best way to approach this would be.

I need a web interface which I could enter text, photos and videos, once submitted this can then be seen by users using the app through different feeds and things.

I know its a common thing but what techniques and things should I be learning? I'm not sure where to start.

Any help would be much appreciated as any information would be helpful, thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:31:58.997

有关文档的一些链接：

> 1.  [URL 加载系统编程指南](https://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html)
> 2.  [UIWebView 类参考](https://developer.apple.com/library/ios/#documentation/UIKit/Reference/UIWebView_Class/Reference/Reference.html)
> 3.  [NSURLConnectionDelegate 协议参考](https://developer.apple.com/library/ios/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html)

`NSURLConnectionDataDelegate` 我还向您推荐Vandad Nahavandipoor 的[好书](http://shop.oreilly.com/product/0636920021728.do)。[iOS 5 Programming Pushing the Limits](http://iosptl.com/)这本书对我来说似乎很棒。祝你好运。

# jquery - Regarding the calling mechanism of jquery function

> ID：11107244
> 
> 赞同：0
> 
> 时间：2012-06-19T18:37:29.603
> 
> 标签：jquery

Suppose I have created one jQuery function to check if elements exist or not like:

```
jQuery.fn.exists = function () { 
    return this.length > 0; 
} 
```

Then I call:

```
if ($("#MyDiv").exists() == false)
   alert('not exist');
else
   alert('exist'); 
```

If I call jQuery function above it works. But can't we call the jquery function like this way `exists('#MyDiv')` ? If I try to call this way then I am not getting result...why?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:40:09.593

ARRG，请不要使用这个无用的`exist`功能！

它可以简单地使用：

```
if ($('#MyDiv').length)
    // Exist
else
    // Doesn't exist. 
```

不需要插件，每个人都知道这段代码的作用，**不要使用`exist`**.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:40:33.790

尝试如下，

```
$.exists = function (selector) {
    return $(selector).length > 0;
} 
```

并用作，

```
$.exists('#test') 
```

**演示：http:** [//jsfiddle.net/skram/hgaPt/1/](http://jsfiddle.net/skram/hgaPt/1/)

请在更大的范围内使用它，将它用于现有的简单事物只是一种矫枉过正。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:47:46.973

`$.fn`等于`$.prototype`，因此间接使用`$.fn`您将函数挂钩到 jQuery 对象原型，因此需要将选择器传递给 jQuery 对象而不是链式函数名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T18:46:22.343

```
exists('#MyDiv') 
```

这不起作用，因为您没有创建一个名为`exists`. 您创建了一个名为`jQuery.fn.exists`(`jQuery.fn`是`prototype`jQuery 对象的函数)。

为了`exists('#MyDiv')`工作，您需要创建一个名为`exists`.

```
function exists(sel){
    return $(sel).length;
} 
```

# javascript - 在 getJSON 回调函数中检索变量集

> ID：11107248
> 
> 赞同：0
> 
> 时间：2012-06-19T18:37:52.060
> 
> 标签：javascript, jquery, ajax, json

我被迫使用该函数之外的 getJSON 回调函数中的数据。看一看：

```
$('#stars').raty({
        score: function() {
            var $value = 0;
            var $id = <?=$id?>;
            $.getJSON("getuserrating.php?id=" + $id, function(data) {
                $.each(data, function(key, val) {
                    $value = val;
                });
            });
            return $value;
        },
    }); 
```

这是我尝试过的，但失败了，$value 仍然设置为 0，尽管在回调中它肯定设置为实际值。我知道它为什么会失败，因为 AJAX 请求是异步发送的。问题是，在回调中做所有事情的正确方法是不可能的。如您所见，我需要在比率（插件）设置中检索 JSON 对象。我只会使用 $.ajax() 并将其设置为同步，但文档将其标记为 1.8 已弃用。我宁愿不介绍我知道将来会弃用的解决方案。

有没有办法做到这一点？也许我只是只见树木不见森林，摆在我面前的是一个简单的解决方案。提前致谢 ：）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:49:19.700

如果您需要使用 ajax 来获取分数，则方法是倒退的。

首先进行ajax调用，然后将值传递给`score`ajax成功

```
$.getJSON("getuserrating.php?id=" + $id, function(data) {
          /* pseudo code here since I don't know the plugin and it's data requirments*/
         var score= data.score;
         $('#stars').raty({
             score: score
         });      
}); 
```

编辑：您仍然可以通过这种方式将数据传递给分数函数

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:45:47.047

也许这（取自 jquery getJSON api doc [http://api.jquery.com/jQuery.getJSON/](http://api.jquery.com/jQuery.getJSON/)）可以工作：

```
// Assign handlers immediately after making the request,
// and remember the jqxhr object for this request
var jqxhr = $.getJSON("example.json", function() {
  alert("success");
})
.success(function() { alert("second success"); })
.error(function() { alert("error"); })
.complete(function() { alert("complete"); });

// perform other work here ...

// Set another completion function for the request above
jqxhr.complete(function(){ alert("second complete"); }); 
```

只需分配另一个比率属性而不是返回。

# asp.net-mvc - MVC 3 Domain Routing

> ID：11107250
> 
> 赞同：0
> 
> 时间：2012-06-19T18:37:58.487
> 
> 标签：asp.net-mvc, asp.net-mvc-3, dns, asp.net-mvc-routing

I would like to know if the following is possible. I have a website called www.myweb.com. This website could be a directory of say football teams. The list of teams could be found here

```
www.myweb.com/home/teamlist 
```

On selecting a team one would be take to

```
www.myweb.com/teams/teama or
www.myweb.com/teams/teamb etc 
```

the content under the teams area would be related to them e.g.

```
www.myweb.com/teams/teama/fixtures
www.myweb.com/teams/teama/news 
```

i have the above working but would like to know if it is even remotely possible to have a separate website for each team which still uses the current models, views and controllers e.g.

```
www.teama.com 
```

would go to display the data from

```
www.myweb.com/teams/teama 
```

where 'teams' is the controller and 'teama' is a parameter for a 'details' action. Also doing

```
www.teama.com/fixtures 
www.teama.com/news 
```

would display the same stuff as

```
www.myweb.com/teams/teama/fixtures
www.myweb.com/teams/teama/news 
```

many thanks and hope i have worded it ok.

Rudy

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T23:51:45.040

看看 MVC 域路由，我自己还在研究它，因为我有类似的要求，但我认为这应该满足你的需要。

以下链接可能很方便：

[ASP.Net MVC 域路由](http://blog.maartenballiauw.be/post/2009/05/20/aspnet-mvc-domain-routing.aspx)

[Bolt on multi-tenancy in ASP.Net MVC Part I（第 II 部分的链接在页面上）](http://www.agileatwork.com/bolt-on-multi-tenancy-in-asp-net-mvc-with-unity-and-nhibernate/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:31:53.197

在这种情况下，我会考虑使用[IIS URL 重写](http://learn.iis.net/page.aspx/461/creating-rewrite-rules-for-the-url-rewrite-module/)。

# android - android中的非法参数异常：列_id不存在

> ID：11107251
> 
> 赞同：0
> 
> 时间：2012-06-19T18:38:02.823
> 
> 标签：android, exception-handling, sqlite, android-listview, android-cursor

这是我尝试运行我的应用程序时遇到的错误

android中的非法参数异常：列_id不存在

```
 public static final String OBJ_ID="_id"; 
```

数据库的创建如下：

```
 private static final String CREATE_TAB1= "create table " + TABLE_1 + " (" + OBJ_ID + " integer primary key                                     
    autoincrement, " + OBJ_NAME + " text not null, " + DESC1 + " text not null, " + DESC2 + " text not null);"; 
```

尝试使用 databasehandler 中的以下函数检索数据：

```
 public Cursor getAllTable1() {
                return db.query(TABLE_1, 
                                new String[] { OBJ_NAME }, 
                                null, null, null, null, null);
              } 
```

这是我与数据库通信的功能

```
 public class List_View extends ListActivity {

public void onCreate(Bundle icicle)
{
    super.onCreate(icicle); 
    setContentView(R.layout.displayitems); 

     Databasehelp db = new Databasehelp(this);
    db.open();

    Cursor cursor = db.getAllTable1();

     startManagingCursor(cursor); 

    SimpleCursorAdapter adapter = new SimpleCursorAdapter(this, 
           R.layout.list_example_entry, cursor, 
           new String[] {"name"}, 
           new int[] {R.id.name_entry }); 
    setListAdapter(adapter);
}
} 
```

虽然我的数据库架构由名为 _id 的列组成。我把它改成了 _ID 但似乎没有用。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:42:06.157

将 Cursor 绑定到 ListView（Spinner 等）时**必须**选择列。`_id`

所以添加这样的`_id`列：

```
public Cursor getAllTable1() {
    return db.query(TABLE_1, 
            new String[] { OBJ_ID, OBJ_NAME }, 
            null, null, null, null, null);
} 
```

# android - 服务器套接字 Android

> ID：11107258
> 
> 赞同：0
> 
> 时间：2012-06-19T18:38:37.067
> 
> 标签：android, sockets, serversocket

嘿社区我有以下 ServerSocket 应该侦听端口 53000 并记录任何接收到的数据。但是，我似乎无法通过 server.accept() 阻塞调用。

```
public void run() {

        SocketServer server = new ServerSocket(53000);

        //---buffer store for the stream---
        byte[] buffer = new byte[1024];
        //---bytes returned from read()---
        int bytes;

        //---keep listening to the InputStream until an
        // exception occurs---
        while (true) {
            try {

                socket = server.accept();
                BufferedReader in = new BufferedReader(new InputStreamReader(socket.getInputStream()));

                String str = in.readLine();

                Log.i("received response from server", str);

                in.close();
                socket.close();

            } catch (IOException e) {
                Log.e(TAG, e.getMessage());
            } catch (Exception e){
                server.close();
                Log.e(TAG, e.getMessage());
            }
        }

    } 
```

我还在 Manifest 文件中为应用程序授予了 INTERNET 权限。()

为了增加谜团，我还验证了客户端响应已发送到该端口。

我需要做些什么来完成这项工作吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T19:22:03.610

您的代码非常混乱，甚至无法编译。我做了一些调整，以便我可以测试你的代码，它工作正常。这是我使用的测试应用程序：

```
package com.test.stackoverflow

import java.io.BufferedReader;

public class ServerSocketTestActivity extends Activity {
    /** Called when the activity is first created. */
    private static String TAG = "ServerSocketTest";

    private ServerSocket server;

    Runnable conn = new Runnable() {
        public void run() {
            try {
                server = new ServerSocket(53000);

                while (true) {
                    Socket socket = server.accept();
                    BufferedReader in = new BufferedReader(
                            new InputStreamReader(socket.getInputStream()));

                    String str = in.readLine();

                    Log.i("received response from server", str);

                    in.close();
                    socket.close();
                }
            } catch (IOException e) {
                Log.e(TAG, e.getMessage());
            } catch (Exception e) {             
                Log.e(TAG, e.getMessage());
            }
        }
    };

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        new Thread(conn).start();
    }

    @Override
    protected void onPause() {      
        super.onPause();
        if (server != null) {
            try {
                server.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
    }   
} 
```

使用此代码和通过运行的 netcat，`adb shell`我能够连接并与应用程序通信。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-21T05:19:14.253

与客户端一起工作时声明这些方法来访问流

```
// gets the input stream // ObjectInputStream input; 
// gets the output stream // ObjectOutputStream output;
// ServerSocket server;
// Socket connection; 
```

也许你有另一个类来访问套接字；

```
server = new ServerSocket(5001, 100); 
```

// 第一步创建套接字连接 server = new ServerSocket(5001, 100); while(条件为真)
//第2步等待连接

// 第 3 步获取流

// 第 4 步：处理连接

// 第五步：关闭连接

# button - dynamically change the size of text in button jquerymobile

> ID：11107260
> 
> 赞同：0
> 
> 时间：2012-06-19T18:38:45.453
> 
> 标签：button, text, jquery-mobile

I have the following piece of code that generate a jquerymobile-style button

```
<a href="#" data-role="button"  
        data-theme="b" id="svbutton" style="position: absolute; top: 30%; margin-left: 0%;margin-right: 0%;  width: 80%; height: 20%; text-align: center;  font-size: 2.50em">Load Time...</a> 
```

It is true that when the screen get re-scaled, the size of the button will change. However the size of the text does not change. Is there a way to change the size according to the size of the device-screen?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:52:05.547

您可以读取文档的宽度或按钮的宽度，然后使按钮的字体大小相对于该宽度，例如：

```
var buttonWidth = $('#svbutton').width();
var fontSize = buttonWidth / 10;
$('#svbutton').css('font-size', fontSize + 'px'); 
```

**JSFiddle**
[http://jsfiddle.net/VFube/1](http://jsfiddle.net/VFube/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T01:11:15.760

现场示例：

*   [http://jsfiddle.net/Pjvvx/](http://jsfiddle.net/Pjvvx/)（宽度）
*   [http://jsfiddle.net/3DSGT/](http://jsfiddle.net/3DSGT/)（高度）

JS：

```
// For all buttons use something like this
$('.ui-btn').css('width','50%');

// For individual buttons use something like this
$('#theButton1').parent().css('width', '75%');

// Or this for HREF data-role buttons
$('#hrefButton4').css('width', '45%'); 
```

我想这就是你要找的

```
// this changes the height for all buttons
$('.ui-btn-text').css('font-size','50px');

// This changes the height for a single element 
$('#hrefButton3').children().children().css('font-size','30px'); 
```

HTML：

```
<div data-role="page" id="home"> 
    <div data-role="content">
        <input type="button" id="theButton1" value="Press Me 1" />
        <input type="button" id="theButton2" value="Press Me 2" />
        <input type="button" id="theButton3" value="Press Me 3" />
        <input type="button" id="theButton4" value="Press Me 4" />
        <br />
        <a href="#" data-role="button" id="hrefButton1">HREF Me 1</a>
        <a href="#" data-role="button" id="hrefButton2">HREF Me 2</a>
        <a href="#" data-role="button" id="hrefButton3">HREF Me 3</a>
        <a href="#" data-role="button" id="hrefButton4">HREF Me 4</a>
    </div>
</div> 
```

有关的：

*   [通过 CSS 调整按钮的大小](https://stackoverflow.com/questions/7303035/resizing-a-button-through-css)

# installation - 不同版本的 glibc 的兼容性如何？

> ID：11107263
> 
> 赞同：31
> 
> 时间：2012-06-19T18:38:48.620
> 
> 标签：installation, shared-libraries, glibc, binary-compatibility

具体来说：

1.  是否以某种方式确保所有版本的 glibc 2.x 都是二进制兼容的？

2.  如果没有，我如何在我的系统上运行已针对不同版本编译的二进制文件（游戏）？我可以在不同的文件夹中安装 glibc 吗？

我的具体问题是 glibc 2.14（我拥有的）和 2.15（游戏想要的）之间的兼容性。

我可能还会获得 glibc 2.13 的版本，但我不确定它是否会在 2.14 上运行。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-06-19T19:51:04.823

通常，运行为较旧 glibc 版本（例如 2.13）编译的二进制文件将在具有较新 glibc（例如 2.14，如您的系统）的系统上运行良好。

在具有较旧 glibc 的系统上运行为较新 glibc 构建的二进制文件（例如 2.15，就像失败的那个）可能无法正常工作。

简而言之，glibc 是向后兼容的，而不是向前兼容的。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-09-12T07:21:15.103

根据Linux 上游跟踪器[的报告](https://abi-laboratory.pro/?view=timeline&l=glibc)，glibc 2.14 和 glibc 2.15 之间只有轻微的二进制兼容性问题。

该报告由*[abi-compliance-checker](https://github.com/lvc/abi-compliance-checker)*和*[abi-tracker](https://github.com/lvc/abi-tracker)*工具生成。

[![在此处输入图像描述](../Images/a4cf812484052fc03793f73326a4b458.png)](https://i.stack.imgur.com/Ipfep.jpg)

另请参阅[https://sourceware.org/glibc/wiki/Testing/ABI_checker](https://sourceware.org/glibc/wiki/Testing/ABI_checker)。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-05-17T09:46:05.560

请使用[ABI 合规性检查器](http://lvc.github.io/abi-compliance-checker/)检查库的兼容性。

# c#-4.0 - 如何确定A类是否直接从C#中的B类继承？

> ID：11107274
> 
> 赞同：0
> 
> 时间：2012-06-19T18:39:31.997
> 
> 标签：c#-4.0, reflection

假设 A 类继承自 B 类，B 类继承自 C 类。B 类直接从 C 类继承，但 A 类不直接从 C 类继承。我想使用一些方法，例如：

```
ClassA.DirectlyInheritsFrom(ClassC) //returns false
ClassB.DirectlyInheritsFrom(ClassC) //returns true 
```

有人可以指出我实际上在 C# 反射库中实现这一点的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:40:21.663

怎么样：

```
return childType.BaseType == parentType; 
```

（详情请参阅[`Type.BaseType`](http://msdn.microsoft.com/en-us/library/system.type.basetype.aspx)。）

那是假设我已经正确阅读了您的问题-如果我误解了，请告诉我。

# python - 视图中返回的自定义模型

> ID：11107277
> 
> 赞同：1
> 
> 时间：2012-06-19T18:39:55.010
> 
> 标签：python, django, django-models, django-views

通常在 django 视图中，您会执行类似的操作

```
queryset = MyModel.objects.something() 
```

如何更好地控制返回对象的形状。很抱歉异端，但在 ASP.Net MVC 中（我只引用它是因为我更熟悉它），我会做类似的事情。

```
from e in MyModel
  select new {
    e.Field1,
    e.Field2
  } 
```

我正在寻找在 Django 中做类似的事情。我正在使用主干，因此需要重新塑造我通常在模板中使用标签的模型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:12:36.380

您正在寻找这样一个名为`Managers`. [官方文档](https://docs.djangoproject.com/en/dev/topics/db/managers/#custom-managers-and-model-inheritance)有很好的描述。我建议您阅读 Apress 的“Pro Django”一书。

# android - android：尝试启动phonegap活动时出现ClassNotFoundException

> ID：11107281
> 
> 赞同：1
> 
> 时间：2012-06-19T18:40:20.617
> 
> 标签：android, cordova

我有一个 phonegap 活动，我想通过按下按钮开始：

```
shareButton.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                Intent activity = new Intent(context, GalleryActivity.class);
                context.startActivity(activity);
            }
        }); 
```

问题是：每次我想开始活动时，我都会收到以下错误：

> java.lang.NoClassDefFoundError：net.myns.lib.cutoutcam.GalleryActivity

活动如下所示：

```
package net.myns.lib.cutoutcam;
import org.apache.cordova.DroidGap;

import android.os.Bundle;
import android.util.Log;

public class GalleryActivity extends DroidGap {

    private static final String TAG = "GalleryActivity";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.loadUrl("file:///android_asset/www/index.html");
        Log.v(TAG, TAG+" initialised");
    }

} 
```

清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="net.myns.cutoutcamPro"
    android:versionCode="32"
    android:versionName="3.2" >

    <application
        android:icon="@drawable/icon"
        android:label="@string/app_name" 
        android:hardwareAccelerated="true">
        <activity
            android:name=".CutoutCamProActivity"
            android:configChanges="keyboard|orientation|keyboardHidden"
            android:label="@string/app_name"
            android:windowSoftInputMode="adjustPan" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
            <intent-filter>
                <action android:name="android.media.action.IMAGE_CAPTURE" />
                <category android:name="android.intent.category.DEFAULT" />
            </intent-filter>
        </activity>
        <activity
            android:name="net.myns.lib.cutoutcam.PreferenceActivity"
            android:label="@string/set_preferences" >
        </activity>
        <activity
            android:name="net.myns.lib.cutoutcam.LoginActivity"
            android:label="Share image" >
        </activity>
        <activity
            android:name="net.myns.lib.cutoutcam.RegisterActivity"
            android:label="Share image" >
        </activity>
        <activity
            android:name="net.myns.lib.cutoutcam.GalleryActivity"
            android:label="All images" >
        </activity>
    </application>

    <supports-screens 
           android:largeScreens="true" 
           android:normalScreens="true" 
           android:smallScreens="true" 
           android:resizeable="true" 
           android:anyDensity="true" />

    <uses-sdk
        android:minSdkVersion="7"
        android:targetSdkVersion="8" />

    <uses-permission android:name="android.permission.CAMERA" />
    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />

    <uses-feature android:name="android.hardware.camera.autofocus" android:required="false" />

</manifest> 
```

GalleryActivity 存储在 LibraryProject 中，不知道这是否有什么不同。

一旦我将“extends DroidGap”替换为“extends Activity”，活动就可以开始了。

有人知道这里出了什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T20:27:46.147

找到了答案！

我没有将cordova-1.8.1.jar直接复制到libs目录而是复制到libs/phonegap-phonegap-ce32a3f/lib/android/cordova-1.8.1.jar

所以请记住：总是将 jars 复制到 libs 文件夹的根目录中！

谢谢你们的帮助...

# objective-c - 使用委托将数据从控制器A传递到控制器B

> ID：11107283
> 
> 赞同：0
> 
> 时间：2012-06-19T18:40:29.623
> 
> 标签：objective-c, delegates, protocols

我正在尝试使用委托将简单数据从 viewControllerA 发送到 viewControllerB 但找不到我的代码中的问题。这里是代码

在`ViewControllerA.h`

```
#import <UIKit/UIKit.h>

@class ViewControllerA;

@protocol viewControllerADelegate <NSObject>
-(void) addItem: (ViewControllerA *)controller data:(NSString *)item;
@end

@interface ViewControllerA : UIViewController
- (IBAction)buttonPressed:(id)sender;

@property (assign) id<viewControllerADelegate> delegate;
@end 
```

在`ViewControllerA.m`

```
#import "ViewControllerA.h"

@interface ViewControllerA ()

@end

@implementation ViewControllerA
@synthesize delegate;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
 {
 [super viewDidLoad];
// Do any additional setup after loading the view.

 }

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}
 - (BOOL)shouldAutorotateToInterfaceOrientation:        (UIInterfaceOrientation)interfaceOrientation
{
return (interfaceOrientation == UIInterfaceOrientationPortrait);
 }

- (IBAction)buttonPressed:(id)sender {
[self.delegate addItem:self data:@"this is data"];

  }
 @end 
```

这是`ViewControllerB.h`

```
#import <UIKit/UIKit.h>
#import "ViewControllerA.h"

@interface ViewControllerB : UIViewController<viewControllerADelegate>

 @end 
```

和`ViewControllerB.m`

```
#import "ViewControllerB.h"
 #import "ViewControllerA.h"

@interface ViewControllerB ()

@end

@implementation ViewControllerB

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view.
ViewControllerA *vba = [[ViewControllerA alloc]init];
[vba setDelegate:self];

}

- (void)viewDidUnload
{
[super viewDidUnload];
// Release any retained subviews of the main view.
}

- (BOOL)shouldAutorotateToInterfaceOrientation: (UIInterfaceOrientation)interfaceOrientation
 {
return (interfaceOrientation == UIInterfaceOrientationPortrait); 
 }
-(void) addItem: (ViewControllerA *)controller data:(NSString *)item{
NSLog(@"delegate function called");
}

@end 
```

实现的功能`-(void) addItem: (ViewControllerA *)controller data:(NSString *)item`永远不会被调用。我错过了什么吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:05:20.440

你在使用故事板吗？如果是，你只是按错了按钮：故事板自己初始化视图控制器，所以你的代码：

```
ViewControllerA *vba = [[ViewControllerA alloc]init];
[vba setDelegate:self]; 
```

只是在一些未使用的视图控制器上设置委托。使用segues，不要试图重新发明轮子。

# android - Android 用 ant 构建的 apk

> ID：11107288
> 
> 赞同：1
> 
> 时间：2012-06-19T18:40:43.243
> 
> 标签：android, windows, ant, cyanogenmod

我想用 ant 编译一个 cm9 主题，所以我在示例主题中给出了这段代码：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="TemplateTheme" default="help">

    <!-- ADD YOUR ANDROID SDK PATH TO THIS FILE -->
    <loadproperties srcFile="local.properties" />

    <!-- The ant.properties file can be created by you. It is only edited by the
         'android' tool to add properties to it.
         This is the place to change some Ant specific build properties.
         Here are some properties you may want to change/update:

         source.dir
             The name of the source directory. Default is 'src'.
         out.dir
             The name of the output directory. Default is 'bin'.

         For other overridable properties, look at the beginning of the rules
         files in the SDK, at tools/ant/build.xml

         Properties related to the SDK location or the project target should
         be updated using the 'android' tool with the 'update' action.

         This file is an integral part of the build system for your
         application and should be checked into Version Control Systems.

         -->
    <property file="ant.properties" />

    <!-- DON'T TOUCH THIS ONE -->
    <loadproperties srcFile="default.properties" />
    <!-- ADD YOUR KEYSTORE PROPERTIES HERE -->
    <loadproperties srcFile="key.properties" />

    <!-- quick check on sdk.dir -->
    <fail
            message="sdk.dir is missing. Make sure to generate local.properties using 'android update project'"
            unless="sdk.dir"
    />

    <!-- Import the actual build file.

         To customize existing targets, there are two options:
         - Customize only one target:
             - copy/paste the target into this file, *before* the
               <import> task.
             - customize it to your needs.
         - Customize the whole content of build.xml
             - copy/paste the content of the rules files (minus the top node)
               into this file, replacing the <import> task.
             - customize to your needs.

         ***********************
         ****** IMPORTANT ******
         ***********************
         In all cases you must update the value of version-tag below to read 'custom' instead of an integer,
         in order to avoid having your file be overridden by tools such as "android update project"
    -->
    <!-- version-tag: 1 -->
    <import file="${sdk.dir}/tools/ant/build.xml" />

    <target name="-package-resources">
        <echo>Optimizing theme resources</echo>
        <exec executable="./prepare-resources" failonerror="true" /> 
        <echo>Packaging theme resources</echo>
        <exec executable="./aapt" failonerror="true">
          <arg value="package" />
          <arg value="-f" />
          <arg value="-M" />
          <arg path="AndroidManifest.xml" />
          <arg value="-I" />
          <arg path="${android.jar}" />
          <arg value="-F" />
          <arg path="${out.absolute.dir}/${resource.package.file.name}" />
          <arg value="-S" />
          <arg path="res-final" />
          <arg value="-x" />
          <arg value="10" />
        </exec>
        <echo>Cleaning up resources</echo>
        <exec executable="./prepare-resources" failonerror="true">
          <arg value="clean" />
        </exec>
    </target>

</project> 
```

但是当我执行时出现错误：

无法运行程序“.\prepare-resources”：创建进程错误=193，%1 不是有效的 win32 应用程序

准备资源：

```
#!/bin/sh

if [ "$*" == "clean" ]; then
  rm -rf res-final/
else
  rm -rf res-final/
  rsync -a res/ res-final/
  echo "Themeing quasi-clone packages..."
  rsync res-final/xml/com_cyanogenmod_trebuchet.xml res-final/xml/com_anddoes_launcher.xml
  rsync res-final/xml/com_cyanogenmod_trebuchet.xml res-final/xml/com_teslacoilsw_launcher.xml
  echo "Running pngcrush..."
  for png in `find res-final/ -type f -name \*.png`; do
      pngcrush -q $png $png.out 2>/dev/null >/dev/null && mv $png.out $png
  done
fi 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:24:00.903

`prepare-resources"`是一个 shell 脚本，而不是一个可执行文件。为了能够执行它，请安装 cygwin，这是一个类似 UNIX 的环境，其中包含许多软件，包括能够执行脚本的 shell。

[此](http://pielot.org/2010/12/09/using-cygwin-with-the-android-ndk-on-windows/)页面描述了您需要哪些软件包以及如何自行设置。

# ajax - Struts2-jquery 插件的替代品，用于使用 Ajax 在 Struts2 中上传文件

> ID：11107289
> 
> 赞同：0
> 
> 时间：2012-06-19T18:40:45.863
> 
> 标签：ajax, struts2

我想使用 < s:file > 标记上传文件，但据我所知，Struts2 不支持 Ajax 的此功能。我尝试使用 Struts2 jquery 插件来做到这一点，但它覆盖了一些我现在无法更改的 jquery 函数（如 .dialog()）。

有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T07:34:01.323

这就是我的做法（我没有使用 JQuery）：

1.  我在我的页面中隐藏了一个 iframe。我给它一个 id（例如 iframe）和一个名称（与 id 相同）。
2.  我将表单上的属性“target”设置为隐藏 iframe 的 id（然后，来自服务器的响应加载到 iframe 中。
3.  我在 iframe 上注册了一个事件处理程序以对 onload 事件做出反应。处理程序分析来自服务器的响应。或者，有时我只是在`<script>`标签中从服务器返回 javascript 代码。此代码在预期操作成功或失败时对客户端执行操作。

如果你喜欢这个想法，你可能想阅读这篇[文章](http://www.openjs.com/articles/ajax/ajax_file_upload/)或[这篇](http://viralpatel.net/blogs/ajax-style-file-uploading-using-hidden-iframe/)文章：

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T05:46:08.243

为此目的，有许多基于 jquery 的插件。我正在使用[这个库](http://pixelcone.com/jquery/ajax-file-upload-script/)。它是最简单和优雅的插件，最低要求和很多选项。

这是我考虑过的其他一些插件（我的偏好是不使用 Flash 的插件）

*   [这个](http://blueimp.github.com/jQuery-File-Upload/)显示上传前的缩略图以及整体进度
*   [这个](http://exposureroom.biz/upload.aspx)显示剩余时间，上传速度和剩余大小

# mysql - 所有类路径变量不显示命令行

> ID：11107295
> 
> 赞同：0
> 
> 时间：2012-06-19T18:41:07.080
> 
> 标签：mysql, svn, classpath, collabnet

我知道如何在 Windows 中设置类路径**（***开始 ==> 控制面板 ==> 管理工具 ==> 计算机管理 ==> 右键单击​​计算机管理（本地）==> 选择属性 ==> 单击高级选项卡 == > 点击环境变量设置按钮***）**。我已经完成了，但是当我运行**echo %path%**时，**MySql**和**CollabNet Subversion**不会显示在返回的变量中。帮帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:17:23.367

问题在于使用`classpath`较低的大写字母，应该是`CLASSPATH`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:47:58.370

再次启动命令窗口。对环境变量的更改仅适用于*新*进程，不适用于现有进程。

# android - 我自己的自定义 SeekBar Android

> ID：11107298
> 
> 赞同：2
> 
> 时间：2012-06-19T18:41:15.363
> 
> 标签：android, seekbar

我想创建自己的 SeekBar，因为我找不到任何我需要的东西。我想要一个带有 3 个波段的搜索栏，如下所示：

（我不能发图，所以...）

```
_____________________________________________________
（蓝色 | 红色 X | 蓝色）
 ～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～～ ～～～

```

X = 拇指

我不想要进度条，只需要拇指和 3 种背景颜色.. 明白了吗？

有谁知道我该怎么做？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:23:25.177

这是一个非常棒的例子，可以帮助你开始行动

[http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/](http://www.mokasocial.com/2011/02/create-a-custom-styled-ui-slider-seekbar-in-android/)

但是，这并不能解决背景中三色带的问题，因为此示例使用可重复的可绘制对象。对于这个问题，我会看这篇文章 [如何在 SeekBar 中制作颜色渐变？](https://stackoverflow.com/questions/4342757/how-to-make-a-color-gradient-in-a-seekbar) 您将需要创建自己的渐变。这应该会给出您正在寻找的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-16T12:04:04.587

**XML 代码**

```
 <SeekBar
    android:id="@+id/seekBar1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" 
    android:progressDrawable="@drawable/seek_bar"
    android:paddingLeft="15dp"
    android:paddingRight="15dp"
    android:thumb="@drawable/thumbler_small"
    android:indeterminate="false" /> 
```

**seek_bar.xml**

```
 <?xml version="1.0" encoding="UTF-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
    <item
        android:id="@+android:id/SecondaryProgress"
        android:drawable="@drawable/first"/>
    <item
        android:id="@+android:id/progress"
        android:drawable="@drawable/second"/>
</layer-list> 
```

**第一个可绘制对象为空或未显示完整区域。**

**第二个drawable是填充或着色整个区域。**

[此](http://custom-android-dn.blogspot.in/2012/12/how-to-use-and-custom-seekbar-in-android.html)链接对您有更多帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-06-22T04:27:11.093

这个例子可能会有所帮助：

[Android SeekBar 和自定义 SeekBar 示例](https://www.zoftino.com/android-seekbar-and-custom-seekbar-examples)

搜索“Seekbar 自定义拇指输出”。

# jquery - Rails 3.2：jquery文件上传文件上传后不刷新页面

> ID：11107300
> 
> 赞同：1
> 
> 时间：2012-06-19T18:41:21.363
> 
> 标签：jquery, ruby-on-rails-3, jquery-plugins, file-upload

所以我有一个应用程序，我在其中使用带有回形针的 jquery 文件上传来动态地将文件添加到我的数据库中。一切正常，除了当我添加一个新文件时（单击“开始上传”按钮后），页面没有刷新（但文件已正确插入数据库并发送到 amazon s3）。

我检查了控制台并注意到当我上传文件时只有一个 PUT 请求，没有应该有的 GET 请求。

顺便说一句，我还有一个演示应用程序，它的代码与我的真实应用程序相同，它正在运行。我注意到在演示应用程序中，当您上传文件时，会出现一个 PUT 请求，然后是一个 GET 请求。

所以我在不同的回调中加入了警报，发现“完成”函数存在问题。以下是“完成”的相关代码：

```
// Callback for successful uploads:
            done: function (e, data) { alert('done');
                var that = $(this).data('fileupload'),
                    template;
                if (data.context) { alert('done: if');
                    data.context.each(function (index) {
                        var file = ($.isArray(data.result) &&
                                data.result[index]) || {error: 'emptyResult'};
                        if (file.error) { alert('done: file.error');
                            that._adjustMaxNumberOfFiles(1);
                        }
                        that._transition($(this)).done(
                            function () { alert('done: function');
                                var node = $(this);
                                template = that._renderDownload([file])
                                    .css('height', node.height())
                                    .replaceAll(node);
                                that._forceReflow(template);
                                that._transition(template).done(
                                    function () { alert('done: function2');
                                        data.context = $(this);
                                        that._trigger('completed', e, data);
                                    }
                                );
                            }
                        );
                    }); 
```

在演示应用程序中，上述代码中的所有警报消息都被命中。但是，在我的真实应用程序中，只有 alert('done: if') 被击中。这意味着 _renderDownload 和 _forceReflow 没有被调用，这导致文件列表在我重新加载页面之前不会被刷新。

此外，如果这有帮助，我在演示应用程序和真实应用程序中的所有相关回调中添加了警报，以确定是否没有调用某些内容，我将按顺序列出每个调用的警报（注意：这些在我点击“开始上传”按钮后会调用警报）：

**演示应用：**

```
_startHandler
start
send
done
done: if statement
done: function 
_renderDownload
_forceReflow
done: function2
stop
stop2 
```

**真实应用：**

```
_startHandler
start
send
done
done: if
stop
stop2 
```

# sql - 如何配置 SQL Server 事务性 Web 同步/复制？

> ID：11107301
> 
> 赞同：1
> 
> 时间：2012-06-19T18:41:22.583
> 
> 标签：sql, sql-server, database, iis, replication

我必须配置一个（事务性）复制，其中将有一个分发者（也有发布者）和更多 6 台服务器作为订阅者。

问题是：我从来没有配置过这样的东西，在找了整整一周的教程之后，我决定在这里问，因为这是一项比我想象的更难的任务。我已经尝试过 MSDN 教程，但没有成功。我知道如何创建并订阅它，但我不知道如何将它与 IIS（Internet 信息服务）同步。目的是：将其与 IIS 同步到订阅者通过 Web 更新数据库。注意：我已经尝试过所有的 MSDN 教程。他们都没有工作。所以，我要求任何其他方式来做到这一点。提前致谢。

（我在 Windows Server 2003 上使用 Sql Server 2005）:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:49:23.127

似乎 SQL Server 中的 Web 同步仅可用于合并复制，而不是事务性的。来自 MSDN：

> 使用 Web 同步向导为 Web 同步配置 Microsoft Internet 信息服务 (IIS) 服务器，这允许您同步订阅以通过 Internet 或 Intranet 连接合并发布。有关详细信息，请参阅[合并复制的 Web 同步](http://msdn.microsoft.com/en-us/library/ms151763%28v=sql.90%29.aspx)和[如何：为 Web 同步配置 IIS](http://msdn.microsoft.com/en-us/library/ms152511%28v=sql.90%29.aspx)。

**很久以后编辑，在阅读评论后。**

Web 同步确实只支持合并复制。

如果订阅者的更改不应传播回发布者（设计决策等），则可以将合并复制配置为将已发布的文章标记为只读。这意味着更改不会被推回，类似于事务复制。

更重要的是，合并复制支持称为只读文章（表格等）的功能，[在此处](http://msdn.microsoft.com/en-us/library/ms151733.aspx)进行了描述。它说：

> 指定订阅服务器上的更改是否上传到发布服务器。对于订阅服务器上的部分或全部数据应为只读的应用程序，仅下载文章提供了性能优势。

# php - trigger_error() 上的自定义错误级别

> ID：11107303
> 
> 赞同：0
> 
> 时间：2012-06-19T18:41:31.090
> 
> 标签：php, error-handling

在 上使用自定义错误级别是一种好习惯`trigger_error()`吗？

例如，我可以这样做：

```
define('E_MY_LEVEL', 3);
...
trigger_error('Hey this error occurs every time!', E_MY_LEVEL); 
```

? 考虑到 3 不是[PHP 错误级别值](http://www.php.net/manual/en/errorfunc.constants.php)，因此它不会与其他级别发生冲突。

*（我想这样做，这样我就不必创建另一个需要其他代码的函数，而不是我已经在`error_handler`我关联的函数中编写的那个`set_error_handler()`。）*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:40:46.303

很难说这是否是好的做法，但 3 确实作为 PHP 错误级别值存在 -

```
error_reporting( E_ERROR | E_WARNING ); // E_ERROR | E_WARNING = 3 
```

也不知道您的 trigger() 函数是什么，trigger_error 需要 E_USER 范围内的错误级别......也许最好使用 E_USER_NOTICE？(1024)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-19T09:51:26.523

基本的 E_XXX 错误代码标志通常基于 2 的幂，例如 1 2 4 8 16 32 等。

如果您发现未使用的 2 次方，则可以使用该次方。

因为 3 = 1 + 2 是 2 的两个幂的和，所以它算作使用两个标志 E_ERROR | E_WARNING。

# c# - 从字符串转换日期和/或时间时转换失败

> ID：11107305
> 
> 赞同：0
> 
> 时间：2012-06-19T18:41:46.560
> 
> 标签：c#, asp.net, sql

我有一个gridview 和sqldatasource。在我的 cp 区域设置中，日期格式设置为 dd.MM.yyyy 。

我的网格视图中有一个日期类型的列。在网格视图中，如果我以 dd.MM.yyyy 格式为单元格设置值

```
 `I get Conversion failed when converting date and/or time from character string`. 
```

但是，如果我以 MM.dd.yyyy 格式输入日期，它可以工作，但我真的不明白为什么会这样？如果我在表格中手动设置 dd.MM.yyyy 日期格式，它也可以工作。

该列是 itemtemplate 并且该列的控件未编辑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:54:01.053

mm 指分钟 MM 指天。这是关于可用不同格式的一个参考：[http ://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm](http://www.geekzilla.co.uk/View00FF7904-B510-468C-A2C8-F859AA20581F.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:50:46.517

您需要在 GridView 中指定日期的格式。

```
 <asp:BoundField DataField="fieldname" HeaderText="Header text" ReadOnly="True"
                                                        SortExpression="fieldname" HtmlEncode="False" DataFormatString="{0:d}" / > 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:51:55.487

```
myDate.ToString("dd-MM-yyyy") 
```

参考这里：[如何在 C# 中将日期格式转换为 DD-MM-YYYY](https://stackoverflow.com/questions/4649639/how-to-convert-date-format-to-dd-mm-yyyy-in-c-sharp)

# class - 在哪里放置我的类/对象 - 通用项目设计

> ID：11107309
> 
> 赞同：0
> 
> 时间：2012-06-19T18:41:57.730
> 
> 标签：class, object

最近我似乎在努力组织我正在使用的所有不同的类/对象。就我而言，我为一家拥有 3 种不同核心产品但共享一些核心功能的公司工作。所以，他们也会分享课程。为了使水域更加混乱，我正在编写 ASP.NET MVC 应用程序 - 它具有类的隐式位置（模型文件夹）。

所以 - 这就是我们目前的工作方式。我将把产品称为`NewProduct`. `xxx`是公司名称：

*   `xxx.Core`- 所有产品中使用的类。这些可能是辅助函数、具有逻辑的实际类等。
*   `xxx.NewProduct.Web`- NewProduct 的 MVC Web 应用程序。模型文件夹是空的。
*   `xxx.NewProduct.WindowsService`- Windows 服务 - NewProduct 的一部分。
*   `xxx.NewProduct.Models`- 基本上，这将替换 MVC Web 应用程序中的 Models 文件夹。它们在自己的项目中，因此**DomainLogic**可以填充它们并将它们传递回 MVC 应用程序。
*   `xxx.NewProduct.Objects`**- 在Web**和**WindowsService**之间共享的具有逻辑的类（不仅仅是像**Models**这样的骨架） 。
*****   `xxx.NewProduct.DataAccess`- 这是 DAL，对我的问题来说并不是那么重要。*   `xxx.NewProduct.DomainLogic`- 这是业务逻辑层（调用 DAL）。此外，如果我们将来要编写一些其他应用程序（移动、桌面等），它们也可以被它重用。****

 ****我的主要问题是当我试图决定将一个对象放在哪里时，有时我不确定将它放在哪里。这是正常的吗？其他人有这个问题吗？有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:42:17.687

当然是正常的！没有一种正确的方法来划分你的模块。但不要在这上面花太多时间。我们生活在 IDE 时代——你总是可以重构的。对我来说，最重要的是可读性。当您团队中的其他程序员寻找某些类/功能时，他们不应该感到惊讶——仅此而已。例如，我不知道在名为 Objects 的模块中可以找到什么（但我不知道 .net 也不知道您的应用程序的具体情况）。****

# c# - 在 WP7 上使用流

> ID：11107313
> 
> 赞同：0
> 
> 时间：2012-06-19T18:42:06.700
> 
> 标签：c#, silverlight, windows-phone-7

如何快速开始`Windows Phone 7`使用`streams`?

我需要能够从磁盘加载，保存到磁盘，从内存加载，将文件保存到内存`wp7`，但是每次我尝试保存时都会发生这种情况：

```
Silverlight is in a sandboxed mode where it has restricted access. You can write to "Isolated Storage", but you cannot create files on their hard drive. 
```

您能否提供一些使用流的工作示例？还有一些教程/视频会很好

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T18:53:29.193

在 WP7 上，您只能使用独立存储来保存/读取文件。你可以找到很多关于它的教程，比如 MSDN[的 Windows Phone 隔离存储概述](http://msdn.microsoft.com/en-us/library/ff402541%28v=vs.92%29.aspx)或这个：[关于 WP7 隔离存储 - 隔离存储简介](http://www.windowsphonegeek.com/tips/all-about-wp7-isolated-storage--intro-to-isolated-storage)。检查其他部分以阅读有关使用流从独立存储中保存/读取数据的信息。

# objective-c - 为什么 SFHFKeychainUtils 在 Cocoa 应用程序中因错误 errSecAuthFailed 而失败？

> ID：11107315
> 
> 赞同：1
> 
> 时间：2012-06-19T18:42:15.457
> 
> 标签：objective-c, cocoa, sfhfkeychainutils

使用 SFHFKeychainUtils 的一些代码的调试构建在我正在开发的 mac 上正常工作，在另一台 mac 上触发错误：

该代码使用了 SFHFKeychainUtils 提供的以下方法：

```
+[SFHFKeychainUtils getPasswordForUsername:andServiceName:accessGroup:error:]

+[SFHFKeychainUtils storeUsername:andPassword:forServiceName:accessGroup:updateExisting:updateExisting:error:] 
```

使用 为用户名添加密码`+[SFHFKeychainUtils storeUsername:andPassword:forServiceName:accessGroup:updateExisting:updateExisting:error:]`。一段时间后，尝试使用 检索密码`+[SFHFKeychainUtils getPasswordForUsername:andServiceName:accessGroup:error:]`。但是，此方法返回错误；它的域是`SFHFKeychainUtilsErrorDomain`，它的代码是`-25293`（所以它是`errSecAuthFailed`）。仅当密码实际上存储在钥匙串中时（或至少在钥匙串访问中可见时）才会返回此错误。

为什么会这样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:19:55.597

问题是缺少代码签名。为了让第二台机器访问钥匙串，需要进行代码签名。修复是为调试版本启用代码签名。

# javascript - 从没有循环的对象中删除某些属性

> ID：11107317
> 
> 赞同：0
> 
> 时间：2012-06-19T18:42:21.473
> 
> 标签：javascript, jquery, object

我试图找到从`commentCount`和的属性`likeCount`都等于 0 的对象中删除属性的最有效方法。在下面的示例中，`Activity.3`将被删除。我不想用 a 循环它们，`$.each()`因为这似乎需要更多的时间。

```
Activity = {
    0 : {
    'commentCount' : 10,
    'likeCount' : 20    
    },
    1 : {
    'commentCount' : 0,
    'likeCount' : 20    
    },
    2 : {
    'commentCount' : 10,
    'likeCount' : 0    
    },
    3 : {
    'commentCount' : 0,
    'likeCount' : 0    
    }
} 
```

**更新**

该对象的创建情况受到质疑。澄清一下，该`Activity`对象内部最多可以有 300 万个属性。它在服务器端生成为 AJAX JSON 响应，并保存到内存中。它不仅仅包括在其他地方使用的`commentCount`，`likeCount`所以我不能让服务器不响应那些和 0 都为 0 的`commentCount`东西`likeCount`。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:46:26.497

啊，过早优化的味道^_^

你有多少这样的物品？您需要清洁多少？如果答案是“少于 100 万”和“一次或很少”，则可能不值得费心。

如果您需要一种快速且最佳的方法，这里有一个想法：为属性创建一个新的数据结构和设置器。每次设置它们时，检查它们是否都是`0`并将它们放入“杀死”列表中。

这样，您只需要遍历杀死列表。

**[编辑]**有几百万个对象并且需要快速清理，杀死列表是要走的路，特别是当条件很少时（只有几个对象匹配）。

只需编写一个更新这些属性的函数，并确保所有代码都通过它来更新它们。然后，您可以在那里管理杀戮列表。

或者，您可以在调用该函数后立即删除该对象，将两者或第二个属性都设置为 0。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:13:01.143

这只是一个起点，但是这样的事情怎么样？基本上，它根据它们`likeCount`和的总和将活动放入桶中`commentCount`。它可以很容易地杀死所有没有喜欢或评论的活动，但我认为这是一个权衡。我不确定你是如何插入这些东西并阅读它们的。所以，你必须决定这是否值得。

```
var ActivityMgr = function(){
    if(!(this instanceof ActivityMgr)){
        return new ActivityMgr();
    }

    this.activities = {};
};

ActivityMgr.prototype.add = function(activity){
    var bucket = parseInt(activity.commentCount, 10) + parseInt(activity.likeCount, 10);

    if (this.activities[bucket] === undefined) {
        this.activities[bucket] = [activity];
    }
    else {
        this.activities[bucket].push(activity);
    }

    this.cleanse();
};

ActivityMgr.prototype.cleanse = function(){
    this.activities[0] = [];
};

//Usage:
var activityMgr = new ActivityMgr();
activityMgr.add({
    likeCount: 0,
    commentCount: 10
}); 
```

**编辑：** 发布后，很明显，如果您以这种方式添加项目，如果他们没有喜欢或评论，您就*不能添加它们。*我的猜测是事情并没有那么简单，所以请提供一些关于如何添加和更新内容的详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T23:06:06.803

我要添加第二个答案，因为这个解决方案来自一个完全不同的角度。在这个解决方案中，我试图找到删除不需要的条目的最快方法。我不知道没有循环的任何方法，但我可以想到几种方法来使用 jQuery 以及原始 javascript 的循环来做到这一点。

[这个 jsperf 并排](http://jsperf.com/test-huge-object)显示了所有的测试用例。

我将解释每个测试以及与每个测试相关的注意事项。

1.  **Raw JS：**最慢的选项。看起来 jQuery 知道他们在用他们的`$.each`and`$.map`循环做什么。

    ```
    var obj;
    for (var field in Activity) {
        if (Activity.hasOwnProperty(field)) {
            obj = Activity[field];
            if (obj.commentCount === 0 && obj.likeCount === 0) {
                delete Activity[field];
            }
        }
    } 
    ```

2.  `$.each`: 并列第二名。比上面的原始 js 循环更简洁的语法和更快的速度。

    ```
    $.each(Activity, function(key, val){
        if (val.commentCount === 0 && val.likeCount === 0) {
            delete Activity[key];
        }
    }); 
    ```

3.  `$.map`（对象版本）：并列第二名。*警告：仅在 jQuery >= 1.6 中支持。*

    ```
    Activity = $.map(Activity, function(val, key){
        if (val.commentCount === 0 && val.likeCount === 0) {
            return null;
        }
    }); 
    ```

4.  `$.map`（阵列版本）：最快的选项。*警告：您必须使用该`$.makeArray`函数将对象转换为数组。我不确定这是否适合您的需求。*

    ```
    var arrActivity = $.makeArray(Activity);
    Activity = $.map(arrActivity, function(val, key){
        if (val.commentCount === 0 && val.likeCount === 0) {
            return null;
        }
    }); 
    ```

**结论**`$.map`如果您首先使用将对象转换为数组， 它看起来是最快的`$.makeArray`。

# mysql - 如何从同一列中具有 2 个变量的查询中生成结果

> ID：11107320
> 
> 赞同：1
> 
> 时间：2012-06-19T18:42:37.027
> 
> 标签：mysql

这是我的查询

```
SELECT * FROM wp_postmeta WHERE meta_value LIKE '".$_POST['username']."' AND meta_value LIKE '".$_POST['password']."' 
```

问题是 meta_value 用户名和 meta_value 密码位于 2 个不同的行中。我需要进行一个查询来查找两者并告诉我我要查找的变量是否在这些行中。所以我希望结果用一个简单的返回 1

```
mysql_num_rows(); 
```

我知道这很愚蠢，应该在具有不同列的同一行上，但我需要使用那些按照自己的意愿进行操作的愚蠢的 wordpress 插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:52:59.417

您可以`HAVING`结合使用该子句`GROUP BY`来检索满足跨多行而不是列发生的**所有条件的行：**

```
SELECT
    *
FROM
    wp_postmeta
WHERE
    meta_value IN ('$filtered_username','$filtered_password')
GROUP BY
    meta_id
HAVING
    COUNT(*) = 2 
```

不要将 $_POST 值直接插入到查询中，这是对 SQL 注入攻击的公开调用。因为您使用的是已弃用的`mysql_*`函数：至少，通过`mysql_real_escape_string()`. 但最好使用[PDO](http://us.php.net/manual/en/book.pdo.php)及其对[prepared statements](http://us.php.net/manual/en/pdo.prepared-statements.php)的支持。

# homebrew - 你如何更新你的“HOMEBREW_TEMP”环境变量？

> ID：11107322
> 
> 赞同：0
> 
> 时间：2012-06-19T18:43:06.730
> 
> 标签：homebrew

运行“brew doctor”时出现以下错误：

```
Error: Your Cellar and TEMP directories are on different volumes.
OS X won't move relative symlinks across volumes unless the target file already
exists. Brews known to be affected by this are Git and Narwhal.

You should set the "HOMEBREW_TEMP" environmental variable to a suitable
directory on the same volume as your Cellar 
```

如何设置这个变量？我应该把它设置成什么？谷歌搜索时，我似乎找不到任何关于此的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-22T15:06:49.917

您可以`HOMEBREW_TEMP`通过编辑您的`~/.bash_profile`并执行以下操作来设置您的：

`export HOMEBREW_TEMP=/new/path`

然后启动一个新的shell。

或者将其输入到任何已经打开的 shell 中。

谷歌*设置 shell 环境变量*以获取更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-16T14:01:10.303

我通过手动设置临时文件夹的路径解决了这个问题。
首先我在其中创建了一个文件夹`temp`，`/usr/local/`
然后将以下内容添加到我的 zsh 文件中`nano ~/.zshrc`

```
export HOMEBREW_TEMP=/usr/local/temp 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-03T05:54:40.793

我也遇到了同样的问题。我实际上已经在内存中为 /private/tmp 配置了单独的磁盘。希望这就是发生此错误的原因。

要解决此问题，请在某处创建一个目录，例如 /usr/local/brew_temp

然后将以下行添加到文件 ~/.profile。如果文件不存在，则创建该文件

```
export HOMEBREW_TEMP=/usr/local/brew_temp 
```

在每次重新启动时，它会将 HOMEBREW_TEMP 环境变量设置为该路径。设置这些选项后，您可以重新启动 OS X 或在命令行中运行以下命令（如果您不想重新启动）

```
. ~/.profile 
```

* * *

## 回答 #4

> 赞同：-11
> 
> 时间：2012-06-20T15:28:12.287

对于将来遇到此问题的任何人，请尝试重新启动计算机，然后`brew doctor`再次运行。那为我修好了。

# ruby - 如何在 Ruby 中定义复合运算符（例如 +=）？

> ID：11107330
> 
> 赞同：1
> 
> 时间：2012-06-19T18:43:41.753
> 
> 标签：ruby, operators

所以，我正在尝试定义运算符`+`和`+=`一个 Ruby 类，我尝试：

```
class A
    def +(x)
    end

    def +=(x)
    end
end 
```

Ruby 喜欢`+`但不喜欢`+=`，给我这个错误：

> 语法错误，意外 '='，期待 ';' 或'\n'

我做错什么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:48:40.063

您`a += b`被解释为`a = a + b`并且仅`+`使用运算符。您也不必定义`+=`运算符

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:50:03.510

您不能在 ruby​​ 中重载赋值运算符

[重载运算符 - Ruby](http://ruby.about.com/od/oo/ss/Overloading-Operators.htm)

# javascript - 使用 phantomjs 和 Jquery 登录网页

> ID：11107331
> 
> 赞同：5
> 
> 时间：2012-06-19T18:43:45.380
> 
> 标签：javascript, jquery, web-scraping, phantomjs

我是 phantomjs、Java 脚本和 WebScraping 的新手。我想做的是基本的 http 身份验证，然后访问另一个 URL 以获取一些信息。这是我到目前为止所拥有的。请告诉我我做错了什么。

```
var page = require('webpage').create();
var system = require('system');

page.onConsoleMessage = function(msg) {
   console.log(msg);
};

page.onAlert = function(msg) {
   console.log('alert!!>' + msg);
};

page.settings.userName = "foo";
page.settings.password = "bar";

page.open("http://localhost/login", function(status) {
    console.log(status);
    var retval = page.evaluate(function() {
       return "test";
    });
    console.log(retval);

    page.open("http://localhost/ticket/" + system.args[1], function(status) {
        if ( status === "success" ) {
            page.injectJs("jquery.min.js");
            var k = page.evaluate(function () {
                var a = $("div.description > h3 + p");

                if (a.length == 2) {
                    console.log(a.slice(-1).text())
                } 
                else {
                    console.log(a.slice(-2).text())
                }
            //return document.getElementById('addfiles');
            });

        }
    });
    phantom.exit();
}); 
```

我正在向该文件传递一个参数：附加到第二个 URL 的票号。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-07T17:24:10.367

为此，我强烈推荐[CasperJS](http://casperjs.org/api.html)。

> CasperJS 是一个开源导航脚本和测试实用程序，用 Javascript 编写，基于 PhantomJS——可编写脚本的无头 WebKit 引擎。它简化了定义完整导航场景的过程，并为执行常见任务提供了有用的高级功能、方法和语法糖，例如：
> 
> *   定义和订购浏览导航步骤
> *   填写和提交表格
> *   点击并关注链接
> *   捕获页面（或其一部分）的屏幕截图
> *   测试远程 DOM
> *   记录事件
> *   下载资源，包括二进制资源
> *   编写功能测试套件，将结果保存为 JUnit XML
> *   **抓取网页内容**

（来自 CasperJS 网站）

我最近花了一天时间尝试让 PhantomJS 自己来做一些事情，比如填写登录表单并导航到下一页。

CasperJS 也为表单构建了一个很好的 API 用途：

[http://docs.casperjs.org/en/latest/modules/casper.html#fill](http://docs.casperjs.org/en/latest/modules/casper.html#fill)

```
var casper = require('casper').create();

casper.start('http://some.tld/contact.form', function() {
    this.fill('form#contact-form', {
        'subject':    'I am watching you',
        'content':    'So be careful.',
        'civility':   'Mr',
        'name':       'Chuck Norris',
        'email':      'chuck@norris.com',
        'cc':         true,
        'attachment': '/Users/chuck/roundhousekick.doc'
    }, true);
});

casper.then(function() {
    this.evaluateOrDie(function() {
        return /message sent/.test(document.body.innerText);
    }, 'sending message failed');
});

casper.run(function() {
    this.echo('message sent').exit();
}); 
```

# php - PHP：使用 sudo 列出 root 的 crontab

> ID：11107332
> 
> 赞同：1
> 
> 时间：2012-06-19T18:43:49.530
> 
> 标签：php, cron, exec, crontab, sudo

使用 PHP 我希望能够列出 root 的 crontab。我能够从命令行以 Apache 用户身份运行以下命令并获得所需的结果：

```
sudo crontab -l 
```

但是，在我的 PHP 中，我有以下命令不起作用并返回一个空集：

```
exec('sudo crontab -l', $out);
print_r($out); 
```

是环保的吗？还是权限？

我也尝试`shell_exec()` `system()`过`passthru()`

另外，请注意，我已禁用 SELinux 并将 Apache 添加到 sudoers 文件中，因此不需要提示输入密码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T20:42:07.380

已解决：即使我设置了错误报告，您也必须像这样重定向命令的输出：

```
exec('sudo crontab -l 2>&1', $out);
var_dump($out); 
```

设置好之后，发现如下错误：

```
sudo: sorry, you must have a tty to run sudo 
```

经过对该问题的研究，解决方案是编辑 sudoers 文件并注释掉：#Default requiretty。

[http://www.zimbra.com/forums/installation/10553-solved-sudo-sorry-you-must-have-tty-run-sudo.html](http://www.zimbra.com/forums/installation/10553-solved-sudo-sorry-you-must-have-tty-run-sudo.html)

我很抱歉，当我进一步研究这个问题时，它不再是 PHP 问题，而是更多的是 unix 系统问题。

# postgresql - 如何从有权访问 NEW 和 OLD 的 postgresql 规则调用函数？

> ID：11107334
> 
> 赞同：0
> 
> 时间：2012-06-19T18:43:56.953
> 
> 标签：postgresql, rules

我是 postgresql 的新手（因此是规则），我环顾四周，但找不到调用“全局”函数的示例。

我正在使用规范化数据库，其中行将被标记为已删除而不是已删除。但是，我想保留`DELETE FROM...`最终用户的功能，方法是使用而不是删除规则来更新表的`deleted_time`列。因此，每个表都应该能够使用一个通用函数，但我不确定在这种情况下如何调用它，或者它如何访问`NEW`and `OLD`？

```
CREATE OR REPLACE RULE rule_tablename_delete AS ON DELETE
TO tablename DO INSTEAD (
   /// call function here to update the table's delete_time column
); 
```

这甚至是正确的方法吗？（我注意到 INSTEAD OF 触发器仅限于视图）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:39:15.010

只需使用 UPDATE 语句：

```
create rule rule_tablename_delete as
  on delete to tablename
do instead
   update tablename 
      set delete_time = current_timestamp
    where id = old.id
      and delete_time is null; 
```

假设该`id`列是该表的主键。

手册中有更多示例：[http ://www.postgresql.org/docs/9.1/static/rules-update.html](http://www.postgresql.org/docs/9.1/static/rules-update.html)

# python - 错误是：尝试在 Django 中设置服务器时没有名为 sqlite3.db.base 的模块

> ID：11107335
> 
> 赞同：0
> 
> 时间：2012-06-19T18:44:01.860
> 
> 标签：python, django

嗨，提前感谢您的帮助。我刚刚开始学习 Python 和 Django，并且一直在尝试在 djangoproject.com 中设置教程。我一直在尝试设置服务器，但不断收到此错误：

```
Unhandled exception in thread started by <bound method Command.inner_run of <django.contrib.staticfiles.management.commands.runserver.Command object at 0x108826090>>
Traceback (most recent call last):
File "/Library/Python/2.7/site-packages/django/core/management/commands/runserver.py", line 91, in inner_run
self.validate(display_num_errors=True)
File "/Library/Python/2.7/site-packages/django/core/management/base.py", line 266, in validate
num_errors = get_validation_errors(s, app)
File "/Library/Python/2.7/site-packages/django/core/management/validation.py", line 23, in get_validation_errors
from django.db import models, connection
File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 40, in <module>
backend = load_backend(connection.settings_dict['ENGINE'])
File "/Library/Python/2.7/site-packages/django/db/__init__.py", line 34, in __getattr__
return getattr(connections[DEFAULT_DB_ALIAS], item)
File "/Library/Python/2.7/site-packages/django/db/utils.py", line 92, in __getitem__
backend = load_backend(db['ENGINE'])
File "/Library/Python/2.7/site-packages/django/db/utils.py", line 44, in load_backend
raise ImproperlyConfigured(error_msg)
django.core.exceptions.ImproperlyConfigured: 'django.db.sqlite3.db' isn't an available database backend.
Try using django.db.backends.XXX, where XXX is one of:
'dummy', 'mysql', 'oracle', 'postgresql_psycopg2', 'sqlite3'
Error was: No module named sqlite3.db.base 
```

我尝试使用聚光灯定位 sqlite3.db.base，但找不到该模块。当我转到终端并导入 sys 并导入 sqlite3 时，我没有收到任何错误。终端中的 Sys.path 给了我：

```
['', 
'/Library/Python/2.7/site-packages/pip-1.1-py2.7.egg', 
'/Library/Python/2.7/site- packages/distribute-0.6.27-py2.7.egg',   
'/Library/Python/2.7/site-packages/nose-1.1.2-py2.7.egg', 
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python27.zip', 
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-darwin', 
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac', 
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/plat-mac/lib-scriptpackages', 
'/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python', 
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-tk', 
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-old',
'/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/lib-dynload',
'/System/Library/Frameworks/Python.framework/Versions/2.7/Extras/lib/python/PyObjC', 
'/Library/Python/2.7/site-packages', 
'/Library/Python/2.7/site-packages/setuptools-0.6c11-py2.7.egg-info'] 
```

目前我的 settings.py 设置为：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.sqlite3.db', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.
        'NAME': '/System/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7',      # Or path to database file if using sqlite3.
        'USER': '',                      # Not used with sqlite3.
        'PASSWORD': '',                  # Not used with sqlite3.
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3.
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3.
    }
} 
```

再次感谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T18:48:47.860

你破坏了`ENGINE`设置。应该是`django.db.backends.sqlite3`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:51:14.363

那不是关于进口的。您在 ENGINE 设置中输入错误。它必须是这样的：

```
DATABASES = {
    'default': {
        'ENGINE': 'django.db.backends.sqlite3', # Add 'postgresql_psycopg2', 'mysql', 'sqlite3' or 'oracle'.                                                              
        'NAME': join(CURRENT_DIR, 'db/cms.db'), # Or path to database file if using sqlite3\.                                                                              
        'USER': '',                      # Not used with sqlite3\.                                                                                                         
        'PASSWORD': '',                  # Not used with sqlite3\.                                                                                                         
        'HOST': '',                      # Set to empty string for localhost. Not used with sqlite3\.                                                                      
        'PORT': '',                      # Set to empty string for default. Not used with sqlite3\.                                                                        
    }
} 
```

# c# - 如果属性在单例实例中，将两个 UIElement 绑定到同一个属性将无法正常工作

> ID：11107338
> 
> 赞同：2
> 
> 时间：2012-06-19T18:44:09.433
> 
> 标签：c#, xaml, binding, uielement

我从来没有遇到过这个问题，但最近我注意到如果属性驻留在 Singleton 中，则两种方式绑定到属性不起作用。

我的意思是“其他”`CheckBox`永远不会更新它的价值。

关于如何使其工作的任何想法？提前致谢！

单例.cs

```
public class Singleton : INotifyPropertyChanged
{
    private bool panelClosed;

    static Singleton()
    {
        Instance = new Singleton();
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public static Singleton Instance { get; private set; }

    public bool PanelClosed
    {
        get
        {
            return this.panelClosed;
        }

        set
        {
            this.panelClosed = value;
            this.NotifyPropertyChanged("PanelClosed");
        }
    }

    private void NotifyPropertyChanged(string info)
    {
        if (this.PropertyChanged != null)
        {
            this.PropertyChanged(null, new PropertyChangedEventArgs(info));
        }
    }
} 
```

XAML：

```
<CheckBox 
    Content="Check/Uncheck me" 
    Height="16" Name="checkBox1" 
    IsChecked="{Binding Source={x:Static local:Singleton.Instance}, Path=PanelClosed, 
                UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}"/>

<CheckBox 
    Content="Sanity Check" 
    Height="16" Name="checkBox2" 
    IsChecked="{Binding Source={x:Static local:Singleton.Instance}, Path=PanelClosed, 
                UpdateSourceTrigger=PropertyChanged, Mode=TwoWay}" /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:25:05.800

这让我有点困惑，但这是一个简单的解决方法。使用单例没有问题。

改变

```
this.PropertyChanged(null, new PropertyChangedEventArgs(info)); 
```

至

```
this.PropertyChanged(this, new PropertyChangedEventArgs(info)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-02T15:04:57.743

我查看了您的代码并将其实现到我自己的项目中，但不幸的是它没有按预期工作。PropertyChangedEventHandler 始终为 null，并且从未在任何地方设置。

你有你的代码的副本，这样我就可以看一下它，看看我哪里出错了？

# android - 使用 Android API 将 SMS 消息发送到电子邮件

> ID：11107340
> 
> 赞同：1
> 
> 时间：2012-06-19T18:44:16.140
> 
> 标签：android

我一直在寻找解决方案，但一直找不到。

是否可以向电子邮件地址发送短信 (SMS)？如果是这样，您如何使用 Android API 来做到这一点？

# spring - 在 SPRING 中从文件系统加载文件

> ID：11107341
> 
> 赞同：1
> 
> 时间：2012-06-19T18:44:16.407
> 
> 标签：spring, filepath

我已经为此苦苦挣扎了很长时间。

我正在使用外部 API，我需要直接传递文件的路径。我无法修改它。

我看起来像：函数方法（字符串路径）；

所以我不能使用资源，因为我只需要传递路径。

春天可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:07:13.393

也许你可以使用：

`(new File("")).getAbsolutePath()`为您提供当前路径（应用程序）。

或（我认为这个更适合你）

`getResource("fileName").getFile()`

# c# - 应用程序尝试随机连接到 Internet。为什么？

> ID：11107349
> 
> 赞同：3
> 
> 时间：2012-06-19T18:45:03.210
> 
> 标签：c#, .net

我正在 VS2010 中使用 .NET Framework 4.0 开发 C# 应用程序。它已获得许可。因为我是学生，所以我从 DreamSpark 下载了 VS2010。但是，在调试我的应用程序时，myapp.vshost.exe 会尝试连接到各种远程 IP 地址。他们之中有一些是：

```
194.7.155.82, 199.7.59.190 
```

此外，当我在发布模式下编译我的应用程序并使用它时，我的防火墙会弹出，我的应用程序试图连接到不同的 IP 地址。我的应用程序不需要任何互联网连接。但是，它会尝试连接。

**请告诉我如何阻止这种行为？**

这些是我项目中的参考资料：

```
Interop.IWshRuntimeLibrary 
Interop.NetFwTypeLib 
System.dll 
System.Management.dll 
System.ServiceModel.dll 
System.ServiceProcess.dll 
```

他们都来自微软并签名。我不使用任何 3rd 方库。我还将它添加到我的 app.config 文件中：

```
<?xml version="1.0"?>
<configuration>
  <runtime>
    <generatePublisherEvidence enabled="false"/>
  </runtime>  
</configuration> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:50:17.433

其中第一个归 Cyber​​trust 所有，第二个归 Thawte 所有。它们似乎都包含 CRL（证书撤销列表）文件。所以我的猜测是你正在使用一个使用证书的库，并检查一个库以查看它们是否被撤销。

如果不知道您正在使用什么库或应用程序在做什么，就很难再说什么了。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T18:48:36.343

如果您不是自己做的，那么它很可能是您正在使用的库之一。尝试将它们一一删除。

这些是 Verisign 域，因此也有可能正在检查某些签名。

# knockout.js - 在 knockout.js 中，当我的 items 数组已被替换时，如何删除分离的 ko.observables？

> ID：11107350
> 
> 赞同：2
> 
> 时间：2012-06-19T18:45:05.120
> 
> 标签：knockout.js

我有一个半复杂的用户界面，除其他外，它保持用户输入的某些值的运行总数，以确保它们加起来达到 100%。由于每个数据项本身不知道所有其他数据项，因此我在主模型中使用计算的 observable 来处理此计算，而不是实际数据项本身的 observable。

我注意到，即使用户过滤列表（通过 ajax 调用），即使我用单个项目替换列表，似乎还有与所有现在丢失的项目相关的计算出的 observables，我猜这是因为我使用函数生成“动态”可观察值。

我试图在我的主“表”上使用 ko.cleanNode ，但这完全阻止了它的刷新。在这种情况下，处理计算的 observables 的正确方法是什么？

风景：

```
<span class="remainderText" data-bind="text:$root.getFieldTotal($data,'Customer')"></span> 
```

该模型：

```
self.getFieldTotal = function (record, field) {
    return ko.computed(function () { 
                 .. some code here ...
            });
 } 
```

当我去替换驱动 foreach 的 item 数组时，计算出的 observable 会触发，就好像所有旧的 item 仍然挂着一样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T19:23:15.763

我对 knockoutjs 很陌生，所以我无法准确解释为什么会这样，但是如果你让你的 getFieldTotal 方法只是一个普通函数，而不是 ko.computed，那么你就会得到你需要的行为。看到这个小提琴...

[http://jsfiddle.net/PggQJ/1/](http://jsfiddle.net/PggQJ/1/)

# c#-4.0 - Asp.Net 中的数据访问层

> ID：11107354
> 
> 赞同：0
> 
> 时间：2012-06-19T18:45:20.053
> 
> 标签：c#-4.0, architecture, ado.net, data-access-layer

我害怕如果我在这里做太多事情。

我们最近启动了一个 .Net 项目，其中包含用于 DAl、服务和 DTO 的不同类库。

问题是关于我们的 DAL 层，我们想要一个干净且易于维护的数据访问层，我们想要使用 Entity Framework 4.1。

所以仍然不清楚使用 DAO 和 DAOImpl 方法或实体框架选择普通 ADO.Net。任何人都可以建议最好的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T21:14:15.713

这取决于您要投入多少工作来创建自己的自定义 DAL。使用 ADO.NET 和您自己的实现总是更好，但这也包括维护和优化它以及处理复杂的情况，例如并发、缓存以及您的 BO、DAL 和数据库的映射。

如果您想更多地关注业务价值和功能，您可能会决定使用 Entity Framework（现已发布 4.3 和 5.0）。好处是您使用经过仔细测试并且已经包含并发、缓存和映射解决方案的 DAL。

但是我几乎不建议在它之上使用存储库和工作单元模式来将实体框架的使用从其他层中抽象出来。然后，您可以稍后完全更改底层技术，而不会对其他层产生任何影响（例如，如果您发现性能不如预期的那么好，您可以用您自己的 ADO.NET 实现替换 EF）。

这取决于您需要构建的应用程序类型及其性能要求。使用 EF 确实可以减少您的工作量并更快地获得结果。它还取决于开发团队的能力。如果您只有高级开发人员和架构师从事该项目，那么您将轻松创建自己的 DAL。但是对于初学者来说，很难实现一个好的、优化的和健壮的 DAL。

我希望这会有所帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:55:52.037

自从我记得以来，我一直在 DAL 中使用 ADO.NET 和 DTO 组合，我喜欢我控制创建实体和方法的整个过程的事实。然而，随之而来的代价是必须为每个实体编写类，为每个存储过程编写方法。我不介意，但最近我发现[了用于 LINQ to SQL 的 PLINQO](http://www.codesmithtools.com/product/frameworks#plinqo)，我很喜欢它。它使您可以轻松地根据您的数据库模式创建/更新类，同时允许进行高级别的自定义。它基本上是类固醇上的 LINQ2SQL。我也喜欢[nHibernate](https://community.jboss.org/wiki/NHibernateForNET?_sscc=t)，但我认为它的学习曲线比 PLINQO 更陡峭。

如果我是你，我会试试 PLINQO

# sql - 从多个未关联的列中获取唯一/不同的值

> ID：11107359
> 
> 赞同：0
> 
> 时间：2012-06-19T18:45:45.480
> 
> 标签：sql, postgresql, postgresql-9.1

我在 postgresql-9.1.x 数据库中有一个表，定义如下：

```
# \d cms
                                      Table "public.cms"
   Column    |            Type             |                    Modifiers                     
-------------+-----------------------------+--------------------------------------------------
 id          | integer                     | not null default nextval('cms_id_seq'::regclass)
 last_update | timestamp without time zone | not null default now()
 system      | text                        | not null
 owner       | text                        | not null
 action      | text                        | not null
 notes       | text 
```

以下是表中数据的示例：

```
 id  |        last_update         |        system        |   owner   |               action                | 
     notes
 ----+----------------------------+----------------------+-----------+-------------------------------------    +-
----------------
 584 | 2012-05-04 14:20:53.487282 | linux32-test5   | rfell     | replaced MoBo/CPU                   | 
  34 | 2011-03-21 17:37:44.301984 | linux-gputest13 | apeyrovan | System deployed with production GPU | 
 636 | 2012-05-23 12:51:39.313209 | mac64-cvs11     | kbhatt    | replaced HD                         | 
 211 | 2011-09-12 16:58:16.166901 | linux64-test12  | rfell     | HD swap                             | 
drive too small 
```

而忽略了它们之间的关联。所以是这样的：

```
 system          |    owner
-----------------+------------------
 linux32-test5   |   apeyrovan
 linux-gputest13 |   kbhatt 
 linux64-test12  |   rfell
 mac64-cvs11     | 
```

我能弄清楚获取这些数据的唯一方法是使用两个单独的 SQL 查询：SELECT system FROM cms GROUP BY system；从 cms GROUP BY 所有者中选择所有者；

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:58:56.497

我绝不会问你为什么要做这样的事情。以下查询通过使用 row_number() 函数对计算列进行连接来完成此操作：

```
select ts.system, town.owner
from (select system, row_number() over (order by system) as seqnum
      from (select distinct system
            from t
           ) ts
     ) ts full outer join
     (select owner, row_number() over (order by owner) as seqnum
      from (select distinct owner
            from t
           ) town
     ) town
     on ts.seqnum = town.seqnum 
```

全外连接确保两个列表中较长的一个完整返回。

# google-app-engine - webapp2中的线程安全是如何实现的？

> ID：11107367
> 
> 赞同：3
> 
> 时间：2012-06-19T18:46:11.167
> 
> 标签：google-app-engine, webapp2

从[webapp2 文档](https://webapp-improved.appspot.com/guide/app.html#thread-safe-application)：

> 默认情况下，当模块 webapp2_extras.local 可用时，webapp2 是线程安全的。

如果我查看[源代码](https://code.google.com/p/webapp-improved/source/browse/webapp2.py#1498)，我会发现 local 用于存储应用程序和请求。然而，我的印象是所有线程（我在主模块中创建的那个）之间只有一个应用程序（WSGIApplication）实例共享，所以当应用程序实例存储在线程局部变量中时，它实际上是同一个实例，这意味着以下代码（取自[webapp2_extras](https://code.google.com/p/webapp-improved/source/browse/webapp2_extras/mako.py#116)）实际上不是线程安全的（来自 get_app 的应用程序实际上在所有线程之间共享，即使它是从线程本地存储中提取的）：

```
app = app or webapp2.get_app()
mako = app.registry.get(key)
if not mako:
    mako = app.registry[key] = factory(app) 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:08:51.263

返回的应用程序`get_app()`由不同的线程共享，但不一定相同。如果您有两个模块创建一个`WSGIApplication`， get_app() 将为它们返回不同的实例。Mako 实例绑定到特定的应用程序，它获取当前应用程序的方式是线程安全的。

# javascript - 在输入字段中启用占位符，以便在用户输入之后清空，而不是 onfocus

> ID：11107368
> 
> 赞同：-1
> 
> 时间：2012-06-19T18:46:12.283
> 
> 标签：javascript, jquery, html

我想为 HTML input[type=text] 元素使用占位符属性，以便占位符文本在用户开始输入“之后”消失，而不是“onfocus”。类似于关键跟踪器上的登录页面：[https ://www.pivotaltracker.com/signin](https://www.pivotaltracker.com/signin)

到目前为止，我还没有使用 placeholder 属性。相反，我在输入字段上使用了一个“onkeyup”事件，这样一旦用户键入第一个字符，它就会清空输入字段的内容。为此，我在 input 元素上设置了一个名为“data-received”的自定义属性，默认情况下为 false，并且在用户键入第一个字符后立即设置为 true。（这样它就不会继续清空该字段）。我可以通过在输入字段上“取消绑定”“keyup”方法来做类似的事情。

我对这种方法不太满意，我想知道是否有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T21:26:58.953

好的，我想通了。我也从 zendesk 网站获得了一些线索。首先，不使用占位符属性。标签与带有位置的输入字段一起使用：绝对。它与与其关联的输入字段重叠的位置。Javascript 用于跟踪 onkeyup 事件，一旦它看到输入字段的值不为空，它就会简单地隐藏关联的标签。如果您删除输入的任何内容，它会再次显示标签:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:49:12.887

查看：

*   [跨浏览器 HTML5 占位符文本](http://webdesignerwall.com/tutorials/cross-browser-html5-placeholder-text)（[演示](http://webdesignerwall.com/demo/html5-placeholder-text/)）

使用该`placeholder`属性（如果不使用 JS），但请参阅上面的链接以跨浏览器方式执行此操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T18:49:54.397

HTML5 有一个`placeholder`属性，但它可能不适用于所有浏览器。

[使用 jQuery 修复的 HTML5 占位符输入字段](http://www.hagenburger.net/BLOG/HTML5-Input-Placeholder-Fix-With-jQuery.html)有一个修复程序，可以在所有浏览器中使用。

执行此操作的 jQuery 插件

*   [http://webcloud.se/code/jQuery-Placeholder/](http://webcloud.se/code/jQuery-Placeholder/)
*   [http://www.iliadraznin.com/2011/02/jquery-placeholder-plugin/](http://www.iliadraznin.com/2011/02/jquery-placeholder-plugin/)

# c# - 删除 DataGridView(table) 中的多行

> ID：11107369
> 
> 赞同：4
> 
> 时间：2012-06-19T18:46:17.220
> 
> 标签：c#, winforms, datagridview

我有一个可数据的“myTable”，它与 DataGridView“dgv”绑定。DataGridView“dgv”有一个复选框列。我的目标是删除在按钮事件中检查的行。数据表当然会更新。现在我的代码只适用于删除一行而不是多行。

感谢帮助。

```
 private void btnDel_Click(object sender, EventArgs e)
    {
        try
        {
            if (dgv.RowCount>0)
            {
                foreach (DataGridViewRow row in dgv.Rows)
                {
                    DataGridViewCheckBoxCell check = row.Cells[0] as DataGridViewCheckBoxCell;
                    if (check.Value != null)
                    {
                        if ((bool)check.Value)
                        {
                            DataRowView currentDataRowView = (DataRowView)dgv.CurrentRow.DataBoundItem;
                            DataRow dataRow = currentDataRowView.Row;

                            int n = dgv.CurrentRow.Index;
                            int intID = Convert.ToInt32(dgv.Rows[n].Cells[0].Value);
                            myTable.Rows.Remove(dataRow);
                            dgv.DataSource = myTable;

                            Int32 intVal = Convert.ToInt32(row.Cells[1].Value);
                            if (intVal == intID)
                            {
                                check.Value = null;
                            }
                        }
                    }
                }
            }
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:39:50.977

我找到了解决方案。该错误是由

```
 DataRowView currentDataRowView = (DataRowView)dgv.CurrentRow.DataBoundItem; 
```

currentDataRowView 不是选中的行。正确的代码是：

```
 List<DataRow> toDelete = new List<DataRow>(); 
                for (int i = 0; i < dgv.Rows.Count; i++)
                {
                    {
                        DataGridViewRow row = dgv.Rows[i];
                        DataGridViewCheckBoxCell check = row.Cells[0] as DataGridViewCheckBoxCell;
                        if (check.Value != null && (bool)check.Value)
                        {
                            DataRow dataRow = (row.DataBoundItem as DataRowView).Row;
                            toDelete.Add(dataRow);
                        }
                    }
                }
                toDelete.ForEach(row => row.Delete()); 
```

谢谢大家的帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-22T06:40:26.987

```
ASPXPAGE:
<strong>Asp.Net : Delete Multiple Records form datagridview in one time<br />
        </strong>

        <asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="False"
            BackColor="White" BorderColor="#CCCCCC" BorderStyle="None" BorderWidth="1px"
            CellPadding="4" EnableModelValidation="True" ForeColor="Black">
            <Columns>
                <asp:TemplateField>
                    <EditItemTemplate>
                        <asp:CheckBox ID="CheckBox1" runat="server" />
                    </EditItemTemplate>
                    <ItemTemplate>
                        <asp:CheckBox ID="CheckBox1" runat="server" />
                    </ItemTemplate>
                </asp:TemplateField>
                <asp:BoundField DataField="id" HeaderText="Sr No" />
                <asp:BoundField DataField="doc_name" HeaderText="Name" />
                <asp:BoundField DataField="doc_add" HeaderText="Address" />
                <asp:BoundField DataField="doc_mob" HeaderText="Mobile No" />
                <asp:BoundField DataField="doc_email" HeaderText="Email" />
            </Columns>
            <FooterStyle BackColor="#CCCC99" ForeColor="Black" />
            <HeaderStyle BackColor="#333333" Font-Bold="True" ForeColor="White" />
            <PagerStyle BackColor="White" ForeColor="Black" HorizontalAlign="Right" />
            <SelectedRowStyle BackColor="#CC3333" Font-Bold="True" ForeColor="White" />
        </asp:GridView>
        <br />
        <asp:Button ID="Button1" runat="server" Font-Size="12pt"
            onclick="Button1_Click1" Text="Delete" />
        <br />

Code Behind Page:
SqlConnection conn = new SqlConnection(@"server=server-pc; database=HMS; integrated security=true");
    protected void Page_Load(object sender, EventArgs e)
    {
        if (IsPostBack == false)
        {
            load_data();
        }
    }

   public void load_data()
    {
        SqlDataAdapter adp = new SqlDataAdapter("select * from doc_master", conn);
        DataSet ds = new DataSet();
        adp.Fill(ds);
        GridView1.DataSource = ds.Tables[0];
        GridView1.DataBind();
    }
   protected void Button1_Click1(object sender, EventArgs e)
   {
       CheckBox ch;
       for (int i = 0; i < GridView1.Rows.Count; i++)
       {
           ch = (CheckBox)GridView1.Rows[i].Cells[0].Controls[1];
           if (ch.Checked == true)
           {
      int id = Convert.ToInt32(GridView1.Rows[i].Cells[1].Text);
      SqlCommand cmd = new SqlCommand("delete from doc_master where ID=" + id + " ", conn);
      conn.Open();
      cmd.ExecuteNonQuery();
      conn.Close();
           }
       }

       load_data();
   } 
```

详细代码请访问： [http ://www.gtuguide.com/2014/05/deleting-multiple-rows-in-gridview.html](http://www.gtuguide.com/2014/05/deleting-multiple-rows-in-gridview.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:59:28.597

您是否尝试过通过索引而不是 foreach 进行迭代？我认为 CurrentRow 可能不会在每次迭代时更新g：

```
try {
                if (dgv.RowCount > 0) {
                    for (int i = 0; i < dgv.Rows.Count;i++ ) {
                        DataGridViewRow row = dgv.Rows[i];
                        DataGridViewCheckBoxCell check = row.Cells[0] as DataGridViewCheckBoxCell;
                        if (check.Value != null) {
                            if ((bool)check.Value) {
                                dgv.Rows[i].Selected = true;
                                dgv.Rows[i].Cells[0].Selected = true;
                                DataRowView currentDataRowView = (DataRowView)dgv.CurrentRow.DataBoundItem;
                                DataRow dataRow = currentDataRowView.Row;

                                int n = dgv.CurrentRow.Index;
                                int intID = Convert.ToInt32(dgv.Rows[n].Cells[0].Value);
                                myTable.Rows.Remove(dataRow);
                                dgv.DataSource = myTable;

                                Int32 intVal = Convert.ToInt32(row.Cells[1].Value);
                                if (intVal == intID) {
                                    check.Value = null;
                                }
                            }
                        }
                    }
                }
            } catch (Exception ex) {
                MessageBox.Show(ex.Message);
            } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T20:04:15.653

看起来您只是从 DataGridView 中获取，而不是循环`CurrentRow`中的当前行。`foreach`此外，您正在修改您正在迭代的集合。这可能有效：

```
private void btnDel_Click(object sender, EventArgs e)
{
    try
    {
        List<DataRow> toDelete = new List<DataRow>();
        foreach (DataGridViewRow row in dgv.Rows)
        {
            DataGridViewCheckBoxCell check = row.Cells[0] as DataGridViewCheckBoxCell;
            if (check.Value != null && (bool)check.Value)
              toDelete.Add(((DataRowView)row.DataBoundItem).Row);
        }

        toDelete.ForEach(row => row.Delete());
    }
    catch (Exception ex)
    {
        MessageBox.Show(ex.Message);
    }
} 
```

# php - htaccess 重定向中的变音符号

> ID：11107375
> 
> 赞同：3
> 
> 时间：2012-06-19T18:46:35.007
> 
> 标签：php, apache, .htaccess, redirect

由于变音符号，以下 htaccess 规则不起作用。

```
Redirect 301 /xyz/händedruck.html  /new/händedruck.html 
```

如何修改此重定向以使其正常工作？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:59:03.577

尝试编码 URL：`/xyz/h%C3%A4ndedruck.html`

要在 PHP 中获取此字符串，您可以使用该`urlencode`函数。

也有许多网站可以为您进行 urlencoding。例如： http: [//meyerweb.com/eric/tools/dencoder/](http://meyerweb.com/eric/tools/dencoder/)

# facebook - 将 Heroku 中现有的托管 URL 用于 Facebook 应用程序

> ID：11107378
> 
> 赞同：0
> 
> 时间：2012-06-19T18:46:48.387
> 
> 标签：facebook, heroku

如果我已经拥有 Heroku 的托管 url 并且想将它用于我已经创建的应用程序之一，我该怎么办？

显然，“Get One”按钮为我创建了一个新的 Heroku 应用程序。如何让它允许我使用一个已经创建的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:55:41.207

**只需在Canvas URL** / **Secure Canvas URL** / **Site URL**的应用程序设置中使用现有URL 。

![应用程序设置](../Images/8d58c6555064e0e77436a1631320db3e.png)

# r - 如何在 R 中的绘图中添加一个改变两点之间颜色的透明箭头？

> ID：11107381
> 
> 赞同：-3
> 
> 时间：2012-06-19T18:46:56.073
> 
> 标签：r, plot, colors, transparent

我可以使用 R 中的 arrow() 函数在改变颜色的两点之间绘制透明箭头吗？例如，一个箭头在一个点开始为红色，然后在另一点逐渐变为蓝色（两个点在数据框中的同一行上）？如果是这样，怎么做？如果没有，是否有另一个函数可以在 R 中做到这一点？

这是我到目前为止的一段代码，它绘制点（蓝色和红色）并用透明的蓝色箭头将蓝色点与红色点连接起来：

```
par(xpd=NA, mfrow=c(1,1), mar=c(4.25,3.2,6.20,3.55))
plot(data$x1,data$y1,col="red",pch=20,cex=0.6,xlim=c(xmin,xmax),ylim=c(ymin,ymax),axes=FALSE,ann=FALSE,xaxt='n',yaxt='n')
par(new=T)
plot(data$x2,data$y2,col="blue",pch=20,cex=0.6,xlim=c(xmin,xmax),ylim=c(ymin,ymax),axes=FALSE,ann=FALSE,xaxt='n',yaxt='n')
par(new=T)
plot(grid.picture(NLmap[-1]),xlim=c(xmin,xmax),ylim=c(ymin,ymax),axes=FALSE,ann=FALSE,xaxt='n',yaxt='n')
par(new=T)

points(data$x1,data$y1,col="red",pch=20,cex=0.25)
par(new=T)
points(data$x2,data$y2,col="blue",pch=20,cex=0.25)
par(new=T)

arrows(data$x1,data$y1, data$x2, data$y2, length = 0.05, angle = 30, 
   code = 2, col = "#9AC0CD40", lty = par("lty"), lwd = par("lwd")) 
```

希望这可以帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-29T21:23:46.883

首先，我要提一下，我的答案直接来自评论中提供的信息和 DWin 的答案。我以前从未见过这些功能，所以我想我会试一试。

我最终创建了一个小功能，`arrows`除了添加了色标外，它的工作原理类似。我认为这基本上是你想要的。

```
require(plotrix)

color.scale.arrow = function(x1,y1,x2,y2,first.col,second.col,
lwd= par('lwd'),lty=par('lty'),angle=30,length=0.25) {
        x=mapply(seq,x1,x2,length.out=256) # Each column is one arrow
        y=mapply(seq,y1,y2,length.out=256) # Each column is one arrow

        arrows(x[255,],y[255,],x[256,],y[256,],
               col=ifelse(y[256,]<y[255,],first.col,second.col),
               lwd=lwd,lty=lty,angle=angle,length=length)

        rgb1=col2rgb(first.col)[,1] / 255
        rgb2=col2rgb(second.col)[,1] / 255
        cols=rbind(rgb1,(rgb1 + rgb2) / 2,rgb2)

        invisible(
              sapply(seq(ncol(x)),function(line) 
                  color.scale.lines(x[,line],y[,line],
                  cols[,'red'],cols[,'green'],cols[,'blue'],
                  lwd=lwd,lty=lty)
              )
       )
}

# Create sample data
set.seed(1)
x <- runif(12); y <- rnorm(12)
i <- order(x,y); x <- x[i]; y <- y[i]
x1=x[s]
x2=x[s+1]
y1=y[s]
y2=y[s+1]

# Plot sample data
plot(x,y, main='', type='n')
color.scale.arrow(x1,y1,x2,y2,'red','blue',lwd=2) 
```

![示例箭头图](../Images/99af985201af9a4f5245fee9ddd22d6c.png)

箭头的颜色与 中给出的“结束”颜色相匹配`color.scale.arrow`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:30:37.010

我意识到您已经查看了贾斯汀引用的其他页面，但相信如果您发布了一个使用段的可行示例，我们将能够对其进行修改以使用`plotrix::color.scale.lines function`. 毕竟`arrows`函数与调用非常相似`segments`。

# android - 如何取消注册从被破坏的活动中调用的意图？

> ID：11107382
> 
> 赞同：0
> 
> 时间：2012-06-19T18:47:00.697
> 
> 标签：android, android-intent

我的设计要求我在 second_activity 运行后终止 get_configuration 活动 (Activity1)。但是，当我从 second_activity (Activity2) 中点击 BACK 按钮时，我收到以下错误：

“E/ActivityThread(2156): Activity com.test.Test 泄露了最初在此处注册的 IntentReceiver。您是否错过了对 unregisterReceiver() 的调用？”

我是 Android 新手，我所有的研究都提到了取消注册意图接收器 - 但我没有使用意图接收器，只是将包传递给 second_activity 的意图。

如何从被破坏的活动中注销我的意图？这是我正在使用的代码：-

## 活动1类：

```
SetupActivity() {
   ...
     Intent intent = new Intent(getApplicationContext(), Activity2.class);
     intent.putExtra("width", intWidth);
     intent.putExtra("height", intHeight);
     finish(); // kill this activity
     startActivity(intent); // start Activity2 
```

}

## 活动2类：

```
OnCreate() {
 Bundle extras = getIntent().getExtras();
 if (extras != null) {
     width = extras.getInt("width");
     height = extras.getInt("height");
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:02:56.303

你有一个 Java 类。它被命名为`com.test.Test`。在那里，您已经调用了 ，但在它被销毁之前`registerReceiver()`未能调用。`unregisterReceiver()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:54:52.880

您是否在活动 2 中注册意向接收者？

如果您需要在 onResume 中注册 IntentReceiver 并在 onPause 中取消注册。

仅当您正在收听广播时才需要注册 IntentReceiver，而无需注册 IntentReceiver 即可从 activity1 启动 activity2。此外，您无需销毁从 Activity1 传递到 Activity2 的意图，因为它们仅在 Activity 的生命周期中保留。

# regex - Oracle 正则表达式寻找空格或字符串结尾

> ID：11107384
> 
> 赞同：3
> 
> 时间：2012-06-19T18:47:08.840
> 
> 标签：regex, oracle

我正在研究验证法律描述中的[季度数据的查询。](http://en.wikipedia.org/wiki/Section_%28United_States_land_surveying%29#Subdivision_of_a_section)我们的标准是输入像“SE/4”来标记东南角或“SE/4 NW/4”来标记西北角的东南角。我正在努力解决如何通过正则表达式来检查空格或字符串结尾的结构。

到目前为止，这是我的正则表达式的一些示例数据。

```
WITH test_data AS (
  SELECT 'NW/4' AS quarter_cd FROM dual UNION ALL --VALID
  SELECT 'E/2 SW/4' FROM dual UNION ALL           --VALID
  SELECT 'W/2' FROM dual UNION ALL                --VALID
  SELECT 'SW/4 NE/4' FROM dual UNION ALL          --VALID
  SELECT 'SW/4 NE/4 NW/4' FROM dual UNION ALL     --VALID, THEY CAN REPEAT AN UNKNOWN NUMBER OF TIMES
  SELECT 'E/2 N/2' FROM dual UNION ALL            --TECHNICALLY VALID BUT WOULD LIKE TO EXCLUDE (1/2 of 1/2 is a 1/4) -> NE/4
  SELECT 'E/2 SW/4, SE/4' FROM dual UNION ALL     --INVALID, HAS A COMMA (TWO QUARTER ENTRIES ON ONE ROW)
  SELECT 'E/2 SW/4 & SE/4' FROM dual UNION ALL    --INVALID, HAS AN AMPERSAND (TWO QUARTER ENTRIES ON ONE ROW)
  SELECT 'E/2 SW/' FROM dual UNION ALL            --INVALID, INCOMPLETE ENTRY
  SELECT 'SE/4SW/4' FROM dual UNION ALL           --INVALID, NO SPACE BETWEEN DEFINITIONS
  SELECT 'SE/2' FROM dual UNION ALL               --INVALID, SOUTHEAST HALF DOES NOT MAKE SENSE
  SELECT 'N/4' FROM dual UNION ALL                --INVALID, NORTH QUARTER DOES NOT MAKE SENSE
  SELECT 'LOT 1' FROM dual                        --INVALID, LOTS WILL BE DEALT WITH SEPARATELY
)
SELECT * FROM test_data 
WHERE regexp_like(quarter_cd, '^([NSEW]/[2]{1}|[NSEW]{2}/[4]{1})+', 'c'); 
```

我的代码中的正则表达式只是我的众多尝试之一。我已经在查询中标记了应该返回的结果。为了简单起见，我愿意允许返回“E/2 N/2”，尽管从技术上讲它是无效的，因为北半部的东半部最好简化为东北部。上面的所有示例都是从我的数据中的实际条目中提取的。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:51:41.430

这是我的低级尝试：

```
select *
  from test_data
 where regexp_like(quarter_cd
        , '^((([NSEW]{1}/2)|[NS]{1}[EW]{1}/4)([[:space:]]|$))+$'
        , 'c') 
```

`E/2 N/2`恐怕它确实会回来。

这个

*   允许 NSEW 之一后跟 2
*   *或*NS*和*EW 之一，后跟 4
*   后面必须跟一个空格或行尾
*   允许这个贪婪地匹配
*   必须在行尾结束

通过拆分你的`[NSEW]`它会排除在 NS 或 EW 等上的匹配。

这是一个要演示的[SQL Fiddle 。](http://www.sqlfiddle.com/#!4/702da/8)我在您自己的基础上添加了几个额外的案例。这样做的问题是它将允许所有四个部分。

我会认真考虑*不*使用正则表达式来验证这些数据。而是通过 PL/SQL 函数传递它。拆分空间并添加您必须检查的内容，以确保您没有超出限制。然后，您可以使用较小的正则表达式来验证空格分隔符之间的基础数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:47:09.237

我认为这样的事情会给你你想要的：

```
SELECT * FROM 
  test_data 
WHERE 
  regexp_like(quarter_cd, 
  '^([NSEW]/[2]{1}|[NSEW]{2}/[4]{1})( [NSEW]/[2]{1}| [NSEW]{2}/[4]{1})*$', 'c'); 
```

不过，它将匹配“E2 / N2”的情况。如果您改为这样做：

```
SELECT * FROM 
  test_data 
WHERE 
  regexp_like(quarter_cd, 
  '^([NSEW]/[2]{1}|[NSEW]{2}/[4]{1})( [NSEW]{2}/[4]{1})*$', 'c'); 
```

那么它不会匹配，但它也不会匹配在初始位置之后包含 [NSEW]/2 的任何大小写。因此，如果您需要匹配，例如“NW/4 E/2”...西北区的东半部，这将不是很好。

# php - php中的file_get_contents（） - 需要传递静态参数并且它不起作用

> ID：11107385
> 
> 赞同：0
> 
> 时间：2012-06-19T18:47:14.620
> 
> 标签：php, asp.net, include, file-get-contents

我创建了一个简单的文件：

```
<?php echo file_get_contents("http://occupancyadvantage.com/shortquiz.aspx?sid=234"); ?> 
```

当我删除参数时，我只能让文件正确呈现（好吧，当你说得对时，我怀疑你会考虑这一点（http://occupancyadvantage.com/processfree.php -- %@ 页面......正在出现）但我对此并不在意。

我只是想获取一个 php 文件来加载这个带有 ?sid=243 参数的 aspx 文件。

我无法访问 curl - 我有几个星期没有技术人员在这里，我不允许在没有他的情况下进行那种安装......我确实可以访问 ini 文件，这就是它确实有。如果没有打开，我不知道它是什么：http: [//occupancyadvantage.com/phpinfo.php](http://occupancyadvantage.com/phpinfo.php)

我一直在用这个杀死自己，我似乎无法弄清楚。除了打婴儿，我认为这个地方是最好的选择。

如果可以，请尽量详细说明您的回答，因为含糊不清最终可能会让我研究并提出更多问题。我很感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:56:26.010

您正在尝试打开`shortquiz.aspx?sid=234`在当前工作目录中命名的文件。我猜当前工作目录中没有这样的文件。

如果要获取*以 shortquiz.aspx?sid=234 结尾的**url*，可以试试这个：

 *```
file_get_contents('http://example.org/shortquiz.aspx?sid=234'); 
```

当然，将“example.org”替换为该 URL 的完整主机和路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:52:20.087

[PHP 文档中关于 file_get_contents() 的](http://us3.php.net/file_get_contents)注释可能会有所帮助：

> 如果您要打开带有特殊字符（例如空格）的 URI，则需要使用 urlencode() 对 URI 进行编码。

所以那将是：

```
<?php echo file_get_contents(urlencode("shortquiz.aspx?sid=234")); ?> 
```

如果这不起作用，也许使用完整的 URL？如：

```
<?php echo file_get_contents(urlencode("http://your-site-here/shortquiz.aspx?sid=234")); ?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:54:45.233

如果它是本地文件，则不能使用参数 file_get_contents。就像您实际上无法使用文本文件中的参数打开文件一样，这对 F_g_c 没有意义。

如果 aspx 支持 http，您可以使用 f_g_c(http:/...)。

否则，您将不得不使用 wget（有更糟糕的方法，例如 exec，但除非您根本不需要安全性，否则不要使用它们）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-11T18:14:57.470

我最终使用 iFrame 来执行此操作。我不知道我在想什么。谢谢你所有的时间。*

# java - 将数组作为参数传递：C 和 Java

> ID：11107388
> 
> 赞同：0
> 
> 时间：2012-06-19T18:47:22.160
> 
> 标签：java, c

在我问我的问题之前，我会指出我知道：

1.  在 C 中，我们可以按值调用方法，也可以按引用调用方法
2.  在Java中，我们只能按值调用方法（当我们传递一个对象时，我们传递的是对象引用的值而不是对象引用本身）
3.  在 C 和 Java 上下文中，指针和引用之间存在差异。

现在的问题：

考虑一个数组：

```
arr = {1,2,3,4,5} //len =5 
```

在 C 中，我可以做以下两件事：

```
foo(arr, len);
bar (arr+ 2, len -2); 
```

函数定义：

```
foo(int *a, int l) {
  ...
  printf("%d", &a[0];  //prints 1
  ...
}

bar (int *a, int l){
  printf("%d", &a[0];  //prints 3
  ...
} 
```

正如我们可以看到函数 bar 中的数组 a 以值 3 开头，因为它包含 arr[2] 的地址（原始数组）。如果我们想将子数组视为起始索引为 0 的新数组，这是在 C 中传递数组的一种巧妙方法。

我想知道是否可以在 Java 中实现相同的功能，尽管以下调用在 C 和 Java 中具有不同的含义：

```
foo(arr); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T18:56:51.850

是的，只需添加一个参数`int off`或使用`IntBuffer`该类。

```
void foo(int[] a,int off, int l) {
 ...
 System.out.printf("%d", a[off];  //prints 1
 ...
 ...
}

f(a,2,l);

void foo(IntBuffer a,int l){
   System.out.printf("%d",a.get(0));
}
IntBuffer buffer = IntBuffer.wrap(a,2,a.length-2);
foo(buffer,l); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T18:51:46.263

如果您的问题是关于是否可以通过像 in 这样的指针算术来处理数组的元素`arr + 2`，那么答案是否定的。

但是，您可以通过传入数组和要开始读取数组的位置来实现相同的效果。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T18:52:26.437

java中数组的底层结构在头部有一个额外的元素，表示它的长度。因此，您的原始数组将由`{len, 1, 2, 3, 4, 5}`JVM 存储。这样做是为了让 java 的“安全”免受数组上的索引操作的影响。这也使得几乎不可能在 java 中进行指针运算。

要在 java 中做这样的事情，你通常会使用某种`Buffer`类来包装你的数组。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T18:50:05.300

Java 缺少原生切片函数（如 C 中关于数组开头的隐式切片函数或在一些现代语言中的显式切片函数），但很容易构建自己的包含数组、索引和长度的类，如果你需要它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T18:50:21.823

当您在 C 和 Java 中传递数组时，这个想法是相同的。

在 Java 中，为对象传递的所有内容都是对它们的引用，即指针。在 Java 中，你永远不会说： A *a = new A(); 你只需写 A a = new A(); 缺少 * 就是区别。否则，A 的行为与指针完全相同。

原始变量按值传递。

# c# - 如何使文件只能由管理员访问？

> ID：11107390
> 
> 赞同：1
> 
> 时间：2012-06-19T18:47:30.063
> 
> 标签：c#, .net, security, file-io

> **可能重复：**
> [在 C# 中设置文件的 UAC 设置](https://stackoverflow.com/questions/2737196/setting-uac-settings-of-a-file-in-c-sharp)

我想设置文件权限，以便只有具有管理权限的人才能更改它。

谁能给我一个很好的例子来说明如何在 c# 中做到这一点？

**更新**

我已经尝试了各种方法`FileSecurity`，但我根本无法掌握它。

以下是我想对文件施加的权限：

![在此处输入图像描述](../Images/9bbf2fe4e7190e8929c49ec9a3229451.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:52:02.863

管理员可以访问任何东西（权限无关紧要，所以问题将出在其他用户身上。 . 的第四个参数`System.Io.File.Create`是一个`System.Security.AccessControl.FileSecurity`对象。这就是您所需要的。

# oracle - 创建 SQL 脚本

> ID：11107391
> 
> 赞同：0
> 
> 时间：2012-06-19T18:47:33.230
> 
> 标签：oracle, shell

我正在尝试创建一个 SQL 脚本来自动将值插入到表中。

我有一个表 table1 有 2 列：键，值。

我想插入几行：

```
INSERT INTO table1 (key, value) VALUES ("tomato1","random_value_1")
INSERT INTO table1 (key, value) VALUES ("tomato2","random_value_2")
INSERT INTO table1 (key, value) VALUES ("tomato3","random_value_3")
INSERT INTO table1 (key, value) VALUES ("tomato4","random_value_4") 
```

如何将其放入可以从命令行执行的 shell 脚本中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:49:02.600

另存为扩展名为 .sql 的文件。

然后使用 SQLPLus 之类的 sql 连接工具从命令行运行（您不指明您在哪个数据库上）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:51:05.827

您还应该将同一张表的插入合并为一个，因为它要快得多，如下所示：

```
INSERT INTO table1 
(key, value) VALUES 
("tomato1","$1"),
("tomato2","$2"),
("tomato3","$3"),
("tomato4","$4") 
```

# ruby-on-rails - 回形针功能测试给出 NoHandlerError

> ID：11107394
> 
> 赞同：1
> 
> 时间：2012-06-19T18:47:41.100
> 
> 标签：ruby-on-rails, ruby, paperclip, factory-bot

> **可能重复：**
> [回形针异常：回形针::AdapterRegistry::NoHandlerError](https://stackoverflow.com/questions/10033425/paperclip-exception-paperclipadapterregistrynohandlererror)

**********编辑**********

我对此进行了进一步调查，发现问题出在 FactoryGirl 传递附件的方式上。基本上，控制器接收的是一个字符串，而不是上传的文件对象。我创建了一个新问题（[使用 FactoryGirl 时 Paperclip::Attachment 作为字符串传递](https://stackoverflow.com/questions/11283318/paperclipattachment-passed-as-string-when-using-factorygirl)），其中包括我为可能有类似问题的任何人提供的解决方法。

在 rails 3.2.6 上测试回形针 3.1.2 并且在测试创建带有文件附件的模型时出现以下异常：

```
test_should_create_artist(ArtistsControllerTest):
Paperclip::AdapterRegistry::NoHandlerError: No handler found for "/system/artists/photos/000/000/001/original/rails.png?1340130452" 
```

我的模型是：

```
class Artist < ActiveRecord::Base
  has_attached_file :photo, :styles => {:medium => "300x300>", :thumb => "100x100>" }, :default_url => "image_missing.png"
  attr_accessible :photo, :photo_file_name

  validates_attachment :photo, :presence => true, :content_type => { :content_type => "image/jpg" }, :size => { :in => 0..10000.kilobytes }
end 
```

我的控制器是：

```
class ArtistsController < ApplicationController

  # POST /artists
  # POST /artists.json
  def create
    @artist = Artist.new(params[:artist])

    respond_to do |format|
      if @artist.save
        format.html { redirect_to @artist, notice: 'Artist was successfully created.' }
        format.json { render json: @artist, status: :created, location: @artist }
      else
        format.html { render action: "new" }
        format.json { render json: @artist.errors, status: :unprocessable_entity }
      end
    end
  end 
end 
```

我的测试是：

```
require 'test_helper'

class ArtistsControllerTest < ActionController::TestCase
  setup do
    @artist = FactoryGirl.build(:artist)
  end

  test "should create artist" do
    assert_difference('Artist.count') do
      post :create, :artist => { biography: @artist.biography, name: @artist.name, website: @artist.website, photo: @artist.photo }, :html => { :multipart => true }
    end

    assert_redirected_to artist_path(assigns(:artist))
  end 
end 
```

据我所知，工厂正在工作，但它是：

```
include ActionDispatch::TestProcess

FactoryGirl.define do
  factory :artist do
    id 1
    photo {fixture_file_upload(Rails.root.join('test','fixtures', 'files', 'rails.png'),'image/png')}
  end
end 
```

由于这是一个基本测试，我确信我刚刚遇到了一些可怕的错误。任何帮助将不胜感激！谢谢

# google-docs - 在列表中重复一个函数，而不重复代码

> ID：11107401
> 
> 赞同：0
> 
> 时间：2012-06-19T18:48:01.287
> 
> 标签：google-docs, google-apps-script, google-sheets

我在谷歌文档中编写了一个脚本来使用 =importXML 函数并自行返回值，而不是让函数在打开时加载并每小时减慢速度。基本上它使用 D 行（隐藏）中的数据，将公式粘贴在 B2 中，然后用公式的值覆盖 B2。然后我想在列表中重复这一点，但只是不知道如何 - 目前我只是重复了该功能并更改了单元 ID，我知道这是一个讽刺。有人可以指导菜鸟如何有效地做到这一点吗？

```
function pullValues() 
{
var ss = SpreadsheetApp.getActiveSpreadsheet();
var sheet = ss.getActiveSheet();
var cellref1 = sheet.getRange("D2");
var ID = cellref1.getValue();
var apistring = "http://api.eve-central.com/api/marketstat?usesystem=30000142&typeid=" + ID;
var command = "importxml(\"" + apistring + "\", \"/evec_api/marketstat/type/sell/min\")";
var cellref2 = sheet.getRange("B2");
cellref2.setFormula(command);
var val = cellref2.getValue();
cellref2.setValue(val);
} 
```

[https://docs.google.com/spreadsheet/ccc?key=0AjZlH_sGnj6vdDU4QWdyZTVTd2E4RUFXZnVEZlZJS3c#gid=0](https://docs.google.com/spreadsheet/ccc?key=0AjZlH_sGnj6vdDU4QWdyZTVTd2E4RUFXZnVEZlZJS3c#gid=0)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:22:48.847

您必须使用 for 循环遍历电子表格中的所有行。有很多方法可以做到，下面的代码就是其中之一：

```
function pullValues() 
{
  var ss = SpreadsheetApp.getActiveSpreadsheet();
  var sheet = ss.getActiveSheet();

  var startRow = 2;  // First row of data to process
  var lastRow = sheet.getLastRow();   // Last row of data to process

  for (var i = startRow; i <= lastRow; i++)
  {
    var cellref1 = sheet.getRange("D" + i);
    var ID = cellref1.getValue();
    var apistring = "http://api.eve-central.com/api/marketstat?usesystem=30000142&typeid=" + ID;
    var command = "=ImportXML(\"" + apistring + "\", \"/evec_api/marketstat/type/sell/min\")";
    var cellref2 = sheet.getRange("B" + i);
    cellref2.setFormula(command);
    var val = cellref2.getValue();
    cellref2.setValue(val);
  }
} 
```

# java - 块中的 Spring Batch 异常

> ID：11107409
> 
> 赞同：2
> 
> 时间：2012-06-19T18:48:28.603
> 
> 标签：java, spring-batch, chunks

我有一个包含多个步骤的春季批处理作业。

第 1 步：从数据库中加载 10 条记录。（Tasklet 完成这项工作）

第 2 步：在此处使用 ItemReader、ItemProcessor、ItemWriter 实现和 commit -interval =1 配置面向块的处理

现在据我了解，每张唱片都会发生这种情况

开始事务（读取 - 处理 - 写入）提交 Tx

1.  我的问题是想象它处理了六条记录，现在第 7 条记录在 ItemProcessor 实现中出现异常，它尝试回滚但由于事务处于未知状态而无法回滚

2.  即使它无法回滚第 7 条记录的 tx，它也不会处理第 8、9、10 条记录，并且作业已停止。

注意：ItemProcessor 实现正在调用服务（@Service 注释），这些服务使用 @Transactional(readOnly=false) 注释标记为事务性。

请提出解决方案。

ItemProcessor 代码如下

```
public Long process(LoanApplication loanApplication)throws Exception {
    Long createLoan = null;
    LoanStatus loanStatus = null;
    StaffUser user = staffUserService.getStaffUserByName(Constants.AUTO_USER);
    String notes = null;
    try{
        try{

            loanValidationService.validate(loanApplication);

            loanStatus=LoanStatus.U;

        }catch(LoanValidationException e){
            loanStatus=LoanStatus.UC;
            notes=e.getMessage();
        }

        dataLoadLoanManagementService.setText(notes);
        createLoan = dataLoadLoanManagementService.createLoan(loanApplication, user,loanStatus);
    }catch(Exception le){
        logger.error("Error creating the loan application ;  Parent Application Ref : " 
            + loanApplication
            + " with status as " +(loanStatus!=null ?loanStatus.getStatus():loanStatus)
            +"\n"
            +" School Ref :"
            + loanApplication.getSchoolRef()
            +"\n"
            +" Client Details :"
            +loanApplication.getClientDetails()
            + "Error Details: " + ExceptionUtils.getStackTrace(le));

    }   
    return createLoan;
} 
```

* * *

即使配置了可跳过的异常类，这也不起作用。
为了解释更多，我在项目处理器中得到持久性异常并且我抓住了它，因此 Spring 批处理执行编写器但在编写器执行后我得到下面的异常

```
INFO  06-21 11:38:00 Commit failed while step execution data was already updated. Reverting to old version.  (TaskletStep.java:342) 
ERROR 06-21 11:38:00 Rolling back with transaction in unknown state  (TaskletStep.java:351) 
ERROR 06-21 11:38:00 Encountered an error executing the step  (AbstractStep.java:212)
org.springframework.transaction.TransactionSystemException: Could not commit JPA   transaction; nested exception is javax.persistence.RollbackException: Transaction marked as rollbackOnly 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-07T03:00:35.017

在loanValidationService.validate 中检查交易传播选项

从“事务标记为rollbackOnly”猜测，“提交失败，而步骤执行数据已经更新”

当前事务已回滚，父事务应提交，但事务已结束。

如果块的事务在 LoanValidationService.validate 相同

将传播选项更改为 REQUIRES_NEW

以下文章可能有助于理解元数据的事务。 [http://blog.codecentric.de/en/2012/03/transactions-in-spring-batch-part-1-the-basics/](http://blog.codecentric.de/en/2012/03/transactions-in-spring-batch-part-1-the-basics/)

```
 class LoanValidationServiceImpl implements LoanValidationService {
        @Trasnactional(propagation=REQUIRES_NEW, rollbackFor=Exception.class)
        validate(LoanApplication loanApplication) {
             // business logic
        }
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-20T15:13:51.167

对于您的两个问题，跳过在 prosessor 阶段发生的异常将解决您的问题。

`skippable-exception-classes`如果您知道异常的根本原因，这可以由元素配置。例如，如果您在处理器阶段遇到被零除异常并且确实想忽略它，则示例配置可能是：

```
<chunk reader="reader" processor="processor" writer="writer" 
commit-interval="1" >
<skippable-exception-classes>
<include class="java.lang.ArithmeticException" />
</skippable-exception-classes>
</chunk> 
```

由于将跳过给定的异常类及其子类，您甚至可以尝试`java.lang.Exception`

# jquery - 在 ajax 调用中使用以前的数据

> ID：11107414
> 
> 赞同：0
> 
> 时间：2012-06-19T18:48:37.137
> 
> 标签：jquery

我有一个需要 POST 数据才能获得 ajax 响应的页面。依赖 POST 数据的信息显示正常。但是，在那之后，如果用户想要更新一些显示的数据，我想再进行一次 ajax 调用来即时更新它。然后问题来了，因为第一个脚本没有从用户请求更新信息的页面中获取任何 POST 数据。

现在我有这个，这显然给我带来了问题

```
$(document).ready(function(){

            var uid = <?php echo $_POST['user_id']; ?>;
            $.ajax({
                type: "POST",
                data : {user_id:uid},
                cache: false,
                url:"modules/user/showuserdata.php",                    
                success : function (data) {
                    $("#response").html(data);
                }
            })

        });

        $('#commit-changes').click(function(){

            $('#commit-user').submit();
            $.ajax({
                type: "POST",
                data: $("#commit-user").serialize(),
                cache: false,
                url:"modules/user/updateuser.php",
                success : function(data){
                    $("#response-update").html(data);
                }

            })
        }); 
```

chrome输出的javascript错误是

```
 $(document).ready(function(){

            var uid = <br />
Uncaught SyntaxError: Unexpected token <
<b>Notice</b>:  Undefined index: user_id in <b>C:\xampp\htdocs\inacesso\admin\edituser.php</b> on line <b>73</b><br />
; 
```

为了更好地阅读，我省略了 html，但如有必要，请注意我。

关于如何绕过这个的任何提示？我不想使用 SESSION 变量...

很高兴我能在这方面得到所有帮助。

编辑

showuserdata.php 的 HTML 响应

$user = 新用户（）；

```
 $id = $_POST['user_id'];

 $rcs_user = $user->getUserByID($id);

 $rcs_roles = $user->getRoles();
 $role ='';
 foreach($rcs_roles as $roles)
 {
    if($roles->role_number == $rcs_user->permissao) 
        $role .= '<option value="'.$roles->role_number.'" selected="selected">'.$roles->role.'</option>';
    else
        $role.= '<option value="'.$roles->role_number.'">'.$roles->role.'</option>';
 }

 if($rcs_user->activo == 0)
 {
     $activo = '<input type="checkbox" name="activo" class="on_off_checkbox"  value="1"   />';
 }
 else
 {
     $activo = '<input type="checkbox" name="activo" class="on_off_checkbox" checked="checked"  value="1"   />';
 }

 $response = '';

 $response.='<form id="validation commit-user" action="" method="post"> 
                                <fieldset >
                                <input type="hidden" name="user_id" value="'.$_POST['user_id'].'"/>
                                <legend>Actualizar Dados Utilizador</legend>
                                      <div class="section ">
                                      <label>Nome<small>Insira o seu nome</small></label>   
                                      <div> 
                                      <input type="text" class="validate[required,custom[onlyLetterSp]] large" name="nome" id="f_required" value="'.utf8_encode($rcs_user->nome).'">
                                      </div>                                      
                                      </div>';
 $response.='<div class="section ">
                                      <label> Email<small>Insira o seu email</small></label>   
                                      <div> 
                                      <input type="text" class="validate[required,custom[email]] large" name="email" id="e_required" value="'.  utf8_encode($rcs_user->email).'">
                                      </div>
                                      </div>';

 $response.= '<div class="section">
                                    <label>Permissões<small>Seleccione o tipo de utilizador </small></label>   
                                    <div>
                                        <select class="medium" name="role">

                                                   '.$role.'                                                 

                                        </select>       
                                  </div>
                                  </div>                                      
                                 <div class="section">
                                        <label>Activo<small>Activar utilizador</small></label>   
                                         <div>
                                            '.$activo.'
                                            <span class="f_help">ON / OFF  </span> 
                                        </div>
                                  </div>

                                  <div class="section last">
                                  <div>
                                      <a href="" id="commit-changes" class="uibutton submit_form" name="submit">Submeter</a><a class="uibutton special"   onClick="ResetForm()" title="Limpar Formulário"   >Limpar Formulário</a>
                                 </div>
                                 </div>

                                </fieldset></form>';

   echo $response; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:54:02.943

尝试以下操作：

```
var params = [];

<?php if($_POST['user_id']): ?>
    params.user_id = <?php echo $_POST['user_id']; ?>
<?php endif; ?>

$.ajax({
    type: "POST",
    data : params,
    cache: false,
    url:"modules/user/showuserdata.php",                    
    success : function (data) {
        $("#response").html(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-13T16:13:42.037

问题是数据是通过 ajax 调用加载的。

我已经使用 .live 或 .on jQuery 事件解决了这个问题。

感谢你付出的努力！

# mysql - 编写自定义 mysql 查询以通过自定义用户元字段对 wordpress 用户进行排序

> ID：11107417
> 
> 赞同：0
> 
> 时间：2012-06-19T18:48:42.247
> 
> 标签：mysql, wordpress

基本上，我需要按他们居住的城市订购 WordPress 用户列表。我有一个城市的自定义用户元字段，我的查询工作正常，但查询列出了所有没有填写的人开头的城市，因为它在订单的开头放置了空白字段。

我需要弄清楚如何只选择和显示在城市字段中给出非空白值的用户。不幸的是，我发现自己被难住了。

关于如何做到这一点的任何想法？此外，如果有人知道使用 wp_user_query 来订购自定义用户元字段的方法，而不是这种混乱，我会全神贯注。

```
$paged = (get_query_var('paged')) ? get_query_var('paged') : 1;
$limit = 10;
$offset = ($paged - 1) * $limit;
$key = 'city';

$sql = "SELECT SQL_CALC_FOUND_ROWS {$wpdb->users}.* FROM {$wpdb->users}

INNER JOIN {$wpdb->usermeta} wp_usermeta ON ({$wpdb->users}.ID = wp_usermeta.user_id)
INNER JOIN {$wpdb->usermeta} wp_usermeta2 ON ({$wpdb->users}.ID = wp_usermeta2.user_id)
WHERE 1=1
    AND wp_usermeta.meta_key = 'wp_capabilities'
    AND CAST(wp_usermeta.meta_value AS CHAR) LIKE '%\"subscriber\"%'
    AND wp_usermeta2.meta_key = '$key'
ORDER BY wp_usermeta2.meta_value ASC
LIMIT $offset, $limit";

$site_users = $wpdb->get_results($sql);

$found_rows = $wpdb->get_var("SELECT FOUND_ROWS();");

foreach ($site_users as $site_user) { 
    // user info here
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:59:31.970

尝试类似的东西

```
...
WHERE 1=1
    AND wp_whatever.name_of_city IS NOT NULL
    AND LENGTH(wp_whatever.name_of_city) > 0
    AND wp_usermeta.meta_key = 'wp_capabilities'
... 
```

# php - PHP OOP 路由

> ID：11107420
> 
> 赞同：0
> 
> 时间：2012-06-19T18:49:00.027
> 
> 标签：php, oop

我想制作一个非常简单的网站，但使用 OOP PHP。我在编程（c#、c++、php、js 等）方面有足够的经验，所以我知道如何制作类等，但我不明白的 php 是调用事物的正确方法。

互联网上有数百个 oop php 教程，但与此无关（或者它可能是一个奇怪的问题：P）。让我解释。

例如，我想要一个新闻网站，我得到了一个带有 create 函数的新闻类。如果我遵循 url mywebsite.com/news/create 或 mywebsite.com/news?action=create 我想执行 php 类新闻，动作创建。但我该怎么做。我需要在 index.php 中制作吗

> if(action == news) news->create();

对于每一个动作，另一个......我不这么认为：P。那么我怎样才能正确地做到这一点呢？还是采用简单的 mvc 框架更好？

谢谢，斯特凡。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:53:50.183

我会为此使用 CodeIgniter 框架，它非常易于安装，而且它使用 MVC 设计模式。

然后要使您的网址像这样：“mywebsite.com/news/create”，您可以在 htaccess 文件中更改一个简单的东西，如下所示：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /index.php/$1 [L] 
```

来源： [http ://codeigniter.com/user_guide/general/urls.html](http://codeigniter.com/user_guide/general/urls.html)

* * *

另一方面，如果您不想使用框架，则可以使用 Apache 的 mod_rewrite 删除脚本文件名，然后使用 php 的*explode*函数从 $_SERVER["REQUEST_URI"] 变量中获取函数和参数。

这里有一个很好的例子： [http ://www.phpaddiction.com/tags/axis/url-routing-with-php-part-one/](http://www.phpaddiction.com/tags/axial/url-routing-with-php-part-one/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T18:56:04.360

我知道很多框架，我使用过 codeigniter 和 yii。我更喜欢 yii，但对我来说最重要的问题是，是否可以在没有这样的框架和路由的情况下工作，还是采用框架更好。

# powershell - 当调用仅返回一个对象时，如何强制 Powershell 返回一个数组？

> ID：11107428
> 
> 赞同：160
> 
> 时间：2012-06-19T18:49:26.220
> 
> 标签：powershell

我正在使用 Powershell 在 Web 服务器上设置 IIS 绑定，并且遇到以下代码问题：

```
$serverIps = gwmi Win32_NetworkAdapterConfiguration 
    | Where { $_.IPAddress } 
    | Select -Expand IPAddress 
    | Where { $_ -like '*.*.*.*' } 
    | Sort

if ($serverIps.length -le 1) {
    Write-Host "You need at least 2 IP addresses for this to work!"
    exit
}

$primaryIp = $serverIps[0]
$secondaryIp = $serverIps[1] 
```

如果服务器上有 2 个以上的 IP，很好 - Powershell 返回一个数组，我可以查询数组长度并提取第一个和第二个地址就好了。

问题是 - 如果只有一个 IP，Powershell 不返回单元素数组，它返回 IP 地址（作为字符串，如“192.168.0.100”） - 字符串有一个`.length`属性，它大于 1，所以测试通过了，我最终得到了字符串中的前两个字符，而不是集合中的前两个 IP 地址。

如何强制 Powershell 返回单元素集合，或者确定返回的“事物”是否是对象而不是集合？

* * *

## 回答 #1

> 赞同：182
> 
> 时间：2012-06-19T18:52:10.070

**以两种方式之一将变量定义为数组...**

将您的管道命令包装在括号中，`@`并在开头使用 a：

```
$serverIps = @(gwmi Win32_NetworkAdapterConfiguration 
    | Where { $_.IPAddress } 
    | Select -Expand IPAddress 
    | Where { $_ -like '*.*.*.*' } 
    | Sort) 
```

将变量的数据类型指定为数组：

```
[array]$serverIps = gwmi Win32_NetworkAdapterConfiguration 
    | Where { $_.IPAddress } 
    | Select -Expand IPAddress 
    | Where { $_ -like '*.*.*.*' } 
    | Sort 
```

**或者，检查变量的数据类型...**

```
IF ($ServerIps -isnot [array])
{ <error message> }
ELSE
{ <proceed> } 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-06-19T18:51:58.540

将结果强制为 Array，以便您可以拥有 Count 属性。单个对象（标量）没有 Count 属性。字符串具有长度属性，因此您可能会得到错误的结果，请使用 Count 属性：

```
if (@($serverIps).Count -le 1)... 
```

顺便说一句，不要使用也可以匹配字符串的通配符，而是使用 -as 运算符：

```
[array]$serverIps = gwmi Win32_NetworkAdapterConfiguration -filter "IPEnabled=TRUE" | Select-Object -ExpandProperty IPAddress | Where-Object {($_ -as [ipaddress]).AddressFamily -eq 'InterNetwork'} 
```

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-06-19T18:53:24.123

如果您提前将变量声明为数组，则可以向其中添加元素 - 即使它只是一个...

这应该工作...

```
$serverIps = @()

gwmi Win32_NetworkAdapterConfiguration 
    | Where { $_.IPAddress } 
    | Select -Expand IPAddress 
    | Where { $_ -like '*.*.*.*' } 
    | Sort | ForEach-Object{$serverIps += $_} 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2019-07-10T19:05:28.890

您可以`,`在返回列表之前添加逗号（）`return ,$list`，`[Array]`或者`[YourType[]]`在您倾向于使用列表的位置添加逗号（）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-07-10T12:27:52.703

您可以使用`Measure-Object`来获取实际的对象计数，而无需借助对象的`Count`属性。

```
$serverIps = gwmi Win32_NetworkAdapterConfiguration 
    | Where { $_.IPAddress } 
    | Select -Expand IPAddress 
    | Where { $_ -like '*.*.*.*' } 
    | Sort

if (($serverIps | Measure).Count -le 1) {
    Write-Host "You need at least 2 IP addresses for this to work!"
    exit
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-02-21T00:24:32.070

作为引用对象返回，因此它在传递时永远不会转换。

```
return @{ Value = @("single data") } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-11-29T20:38:34.573

我在将数组传递给 Azure 部署模板时遇到了这个问题。如果有一个对象，PowerShell 会将其“转换”为字符串。在下面的示例中，`$a`从根据标记值获取 VM 对象的函数返回。我通过将`$a`其`New-AzureRmResourceGroupDeployment`包装在`@()`. 像这样：

```
$TemplateParameterObject=@{
     VMObject=@($a)
}

New-AzureRmResourceGroupDeployment -ResourceGroupName $RG -Name "TestVmByRole" -Mode Incremental -DeploymentDebugLogLevel All -TemplateFile $templatePath -TemplateParameterObject $TemplateParameterObject -verbose 
```

`VMObject`是模板的参数之一。

可能不是最技术/最强大的方法，但对于 Azure 来说已经足够了。

* * *

# 更新

好吧，上面确实有效。我已经尝试了上述所有方法和一些方法，但我设法`$vmObject`作为一个数组传递的唯一方法，与部署模板兼容，一个元素如下（我希望 MS 再次播放（这是一份报告并已修复2015年的错误））：

```
[void][System.Reflection.Assembly]::LoadWithPartialName("System.Web.Extensions")

    foreach($vmObject in $vmObjects)
    {
        #$vmTemplateObject = $vmObject 
        $asJson = (ConvertTo-Json -InputObject $vmObject -Depth 10 -Verbose) #-replace '\s',''
        $DeserializedJson = (New-Object -TypeName System.Web.Script.Serialization.JavaScriptSerializer -Property @{MaxJsonLength=67108864}).DeserializeObject($asJson)
    } 
```

`$vmObjects`是 Get-AzureRmVM 的输出。

我传递`$DeserializedJson`给部署模板的参数（数组类型）。

作为参考，可爱的错误`New-AzureRmResourceGroupDeployment`抛出是

```
"The template output '{output_name}' is not valid: The language expression property 'Microsoft.WindowsAzure.ResourceStack.Frontdoor.Expression.Expressions.JTokenExpression' 
can't be evaluated.." 
```

# mysql - 我对 WPDB 语法有疑问

> ID：11107429
> 
> 赞同：0
> 
> 时间：2012-06-19T18:49:31.537
> 
> 标签：mysql, database, wordpress

我对这段代码有疑问，似乎语法错误，但我不知道错误在哪里：

```
$wpdb->query($wpdb->prepare("
  INSERT INTO
    $wpdb->wp_consultte(Imagen,Paterno,Materno,Nombre,Lugar,Fecha,Genero,EstadoCivil,Domicilio,Colonia,Postal,Ciudad,TelCasa,Movil,Nextel,NextelKey,Email,Email2,Email3,Otro,Facebook,Twitter,Blackberry,Linkedin,Carrera,Universidad,Titulo,Egreso,UniLugar,Maximo,OtrosCursos,Idioma1,Hablado1,Escrito1,Idioma2,Hablado2,Escrito2,Idioma3,Hablado3,Escrito3,TipoE1,NombreE1,DomE1,SectorE1,JefeE1,TelE1,RespE1,ActE1,TipoE1,NombreE2,DomE2,SectorE2,JefeE2,TelE2,RespE2,ActE2,NombreE3,DomE3,SectorE3,JefeE3,TelE3,RespE3,ActE3,OPC,OPD,OSP,Comisiones,Regulaciones,Programas,Regimenes,Ordenamiento,Negociadores)
  VALUES
    ('%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s','%s')
  ",
  $destino,$paterno,$materno,$nombre,$estado,$datepicker,$genero,$civil,$domicilio,$colonia,$cp,$ciudad,$telefono,$movil,$nextel,$nextelkey,$email,$email2,$email3,$skype,$facebook,$twitter,$blackberry,$linkedin,$carrera,$universidad,$titulo,$egreso,$uniestado,$maximo,$seminarios,$idioma,$hablado,$escrito,$idioma2,$hablado2,$escrito2,$idioma3,$hablado3,$escrito3,$tipos,$empresa,$domempresa,$secempresa,$jefe,$contactos,$resposabilidades,$actividades,$tipos,$empresa2,$domempresa2,$secempresa2,$jefe2,$contactos2,$resposabilidades2,$actividades2,$empresa3,$domempresa3,$secempresa3,$jefe3,$contactos3,$resposabilidades3,$actividades3,$opc,$opd,$osp,$com,$rra,$pfe,$rea,$ole,$nin,$log
)); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T10:13:09.877

你试过这样的查询吗？values(%s,%s,%s...) 不使用引号？即：从这个：'%s'，到 %s,%s....

还尝试在将其包含在主查询中之前设置您的表名

```
$table_consultte = $wpdb->prefix."consultte"; //(I assume the prefix is 'wp_') 
```

你也可以尝试这样的事情：

```
$sql = "INSERT INTO ".$table_consultte." (Imagen,Paterno,Materno,Nombre,Lugar,Fecha,Genero,EstadoCivil,Domicilio,Colonia,Postal,Ciudad,TelCasa,Movil,Nextel,NextelKey,Email,Email2,Email3,Otro,Facebook,Twitter,Blackberry,Linkedin,Carrera,Universidad,Titulo,Egreso,UniLugar,Maximo,OtrosCursos,Idioma1,Hablado1,Escrito1,Idioma2,Hablado2,Escrito2,Idioma3,Hablado3,Escrito3,TipoE1,NombreE1,DomE1,SectorE1,JefeE1,TelE1,RespE1,ActE1,TipoE1,NombreE2,DomE2,SectorE2,JefeE2,TelE2,RespE2,ActE2,NombreE3,DomE3,SectorE3,JefeE3,TelE3,RespE3,ActE3,OPC,OPD,OSP,Comisiones,Regulaciones,Programas,Regimenes,Ordenamiento,Negociadores) VALUES (%s, %s, %s, %s - add the rest! )";

$wpdb->query( $wpdb->prepare( $strQuery, $destino,$paterno,$materno,$nombre,$estado,$datepicker,$genero,$civil,$domicilio,$colonia,$cp,$ciudad,$telefono,$movil,$nextel,$nextelkey,$email,$email2,$email3,$skype,$facebook,$twitter,$blackberry,$linkedin,$carrera,$universidad,$titulo,$egreso,$uniestado,$maximo,$seminarios,$idioma,$hablado,$escrito,$idioma2,$hablado2,$escrito2,$idioma3,$hablado3,$escrito3,$tipos,$empresa,$domempresa,$secempresa,$jefe,$contactos,$resposabilidades,$actividades,$tipos,$empresa2,$domempresa2,$secempresa2,$jefe2,$contactos2,$resposabilidades2,$actividades2,$empresa3,$domempresa3,$secempresa3,$jefe3,$contactos3,$resposabilidades3,$actividades3,$opc,$opd,$osp,$com,$rra,$pfe,$rea,$ole,$nin,$log)); 
```

然后使用：

```
<?php $wpdb->show_errors(); ?> 
```

看看它是否产生任何错误..

马蒂

# java - 是否可以为 HashMap 集创建队列？

> ID：11107433
> 
> 赞同：11
> 
> 时间：2012-06-19T18:49:40.743
> 
> 标签：java, data-structures, collections, queue, hashmap

现在我正在尝试创建一个生产者/消费者线程，生产者线程遍历所有可能的字母组合并创建它们各自的 MD5 哈希值。然后将每个组合及其哈希放入`HashMap<String,String>`. 现在在我的消费者线程中，我希望能够使用`Queue<>`哈希图上的集合，以便我的消费者线程可以调用`poll()`etc 从而像 a 一样删除值 atc`Queue`但仍然让我能够在调用时看到组合及其哈希我该`poll()`怎么办关于这样做？我有`HashMap`但不知道如何“制作”或将其转换为队列。谢谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T19:16:06.783

如果不处理代码的线程安全，则不应使用 HashMap。否则，您可能会以 Live-lock 结束。

为了能够按照插入键的顺序迭代您的 Map，您可以使用 LinkedHashMap。

```
Map m = Collections.synchronizedMap(new LinkedHashMap(...)); 
```

制作人会推送这样的条目（没什么特别的）：

```
m.put(key, object) 
```

消费者会像这样轮询条目：

```
while (someCondition) {
    Map.Entry nextEntry = null;

    // This block is equivalent to polling
    {
         synchronized(s) {
             Iterator i = s.iterator(); // Must be in the synchronized block
             if (i.hasNext()) {
                 nextEntry  = i.next();
                 i.remove();
             }
         }
    }

    if (nextEntry != null) {
         // Process the entry
         ...
    } else {
         // Sleep for some time
         ...
    }
    // process
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-19T18:53:24.287

该**[`LinkedHashMap`](http://docs.oracle.com/javase/7/docs/api/java/util/LinkedHashMap.html)**类型就像 a`HashMap`和 a的组合`Queue`——它存储键/值对，但也记住它们的插入顺序。这可能正是您正在寻找的类型。没有明确的`poll()`函数，但如果你得到一个迭代器，`LinkedHashMap`你将按照它们被添加的顺序访问元素。然后你可能会写一个这样的函数：

```
public <KeyType, ValueType> KeyType first(LinkedHashMap<KeyType, ValueType> map) {
    assert !map.isEmpty();
    return map.iterator().next();
} 
```

这将使您返回第一个元素。只要确保适当地同步即可。

或者，您可以考虑`Queue`通过定义一个帮助类`Pair`然后将`Pair`s 存储在队列中来将键/值对存储在 a 中。

希望这可以帮助！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-19T18:58:40.163

我建议你创建一个 EntrySet 队列 -

```
Queue<EntrySet<String,String>> queue = new SynchronousQueue<EntrySet<String,String>>();
for (EntrySet<String,String> entry:map.entrySet()) {
   queue.add(entry);
} 
```

您可以考虑使用另一种类型的队列，它可以让您放置元素，并且只有 prdocuer 在非空的情况下等待，例如[LinkedBlockingQueue](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/LinkedBlockingQueue.html)。
然后，如果需要，生产者将能够基于 EntrySet 对象重新组合地图。

# wpf - 使用鼠标右键单击时，Datagrid WPF 上的禁用行被选中

> ID：11107434
> 
> 赞同：3
> 
> 时间：2012-06-19T18:49:41.420
> 
> 标签：wpf, xaml, datagrid, right-click

我在 Datagrid WPF 中遇到了一些问题

我有一个数据网格，每当用户为数据网格 itemSource 的绑定项分配值时，我想将单行的 IsEnabled 属性设置为 false

所以我通过datagrid Style触发器做到了：

```
 <DataGrid AutoGenerateColumns="False" Margin="9,35,0,6" Name="dataGrid2" ItemsSource="{Binding}" SelectionChanged="dataGrid2_SelectionChanged" IsReadOnly="True" SelectionMode="Single">
                    <DataGrid.RowStyle>

                        <Style TargetType="{x:Type DataGridRow}">
                            <Style.Setters>
                                <Setter Property="IsEnabled" Value="False" />
                            </Style.Setters>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Path=Coluna}" Value="{x:Null}">
                                    <Setter Property="IsEnabled" Value="True"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>

                    </DataGrid.RowStyle>
                    <DataGrid.Columns>
                        <DataGridTextColumn Header="Campo" Binding="{Binding Path=Campo}" Width="1.4*" CanUserSort="False" />
                        <DataGridTextColumn Header="Coluna/Constante" Binding="{Binding Path=Coluna}" CanUserSort="False" Width="*" />
                    </DataGrid.Columns>
                </DataGrid> 
```

工作正常，当将值分配给该行的“Coluna”字段时，它会禁用整行（与 null 不同）

**问题是：我仍然可以使用鼠标右键单击并选择禁用的行...“IsEnabled”属性是否仅阻止鼠标左键单击数据网格行？我是否需要设置另一个属性来禁用鼠标右键单击该行？**

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:01:06.637

这是一个已知的错误，`DataGrid`它在 Connect here 上报告：[DatagridRow 在右键单击时被选中，即使数据网格被禁用](http://connect.microsoft.com/VisualStudio/feedback/details/680994/datagridrow-gets-selected-on-right-click-even-if-the-datagrid-is-disabled)。*看起来这将在 WPF 4.5 中修复。*

要解决它，您可以绑定`IsHitTestVisible`到`IsEnabled`

```
<DataGrid ...>
    <DataGrid.RowStyle>
        <Style TargetType="{x:Type DataGridRow}">
            <Setter Property="IsEnabled" Value="False" />
            <Setter Property="IsHitTestVisible"
                    Value="{Binding RelativeSource={RelativeSource Self},
                                    Path=IsEnabled}"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding Path=Coluna}" Value="{x:Null}">
                    <Setter Property="IsEnabled" Value="True"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </DataGrid.RowStyle>
    <!-- ... -->
</DataGrid> 
```

# php - 无法在 php 字符串中检测到 <3？

> ID：11107438
> 
> 赞同：-2
> 
> 时间：2012-06-19T18:50:03.477
> 
> 标签：php, text-processing

我基本上是在为我的一个项目处理推文。我正在尝试分离表情符号（如果有）并将它们存储在单独的数组中（将它们从推文中删除，这将进一步处理）。无论我尝试什么，我似乎都无法在字符串中检测到 <3。str_replace() 和 preg_replace() 似乎都不起作用。

我相信由于 '<' 符号有问题， substr_count($str, '<') 总是返回 0。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:00:56.810

出于安全目的，Twitter API 始终发送`<`as`&lt;`和`>`as 。`&gt;`（动机是让您可以安全地在网页上显示推文，而不必担心自己清理它们以避免 XSS 攻击）。

# css - 删除投资组合网站上的大页脚间距？

> ID：11107447
> 
> 赞同：0
> 
> 时间：2012-06-19T18:50:22.787
> 
> 标签：css

**如何在页脚的表单下方移动不必要的间距？**我什么都试过了。

屏幕分辨率越大，GAP/Spacing 越宽：**/**

我仍在学习如何更好地编码，所以不要笑！

代码：

```
 #form { margin-top: 80px; margin-left: 730px;}    

  #footer{ background: #311C68; width: 100%; height: 100%;} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T18:52:54.923

尝试`height: 100%`从`#footer`

```
#footer{ background: #311C68; width: 100%;} 
```

# php - Laravel 找不到一些文件

> ID：11107449
> 
> 赞同：0
> 
> 时间：2012-06-19T18:50:34.837
> 
> 标签：php, laravel

我正在做一些工作，突然间我明白了。

> 警告：需要（/opt/lampp/htdocs/ERP/laravel/÷5 ication）[function.require]：无法打开流：/opt/lampp/htdocs/ERP/public/index.php 中没有这样的文件或目录在第 34 行
> 
> 致命错误：require() [function.require]：在 /opt 中打开需要 '/opt/lampp/htdocs/ERP/laravel/÷5 ication' (include_path='.:/opt/lampp/lib/php') 失败/lampp/htdocs/ERP/public/index.php 在第 34 行

此错误显示在一些没有关系的请求上，因此它们没有问题。这个问题在几个小时前开始出现

我已经检查了消息中提到的文件，它们都可以，基于我刚刚确定的下载。

如果我不断刷新页面，文件名会更改。如果我坚持，它将最终加载我的页面。这个过程花费了我很多时间，我正在尝试进行一些测试，有时会出现此消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T11:47:45.890

嗯...您说它发生在发出请求的同一页面中，请仔细查看您的请求并尝试寻找错误的地方。

一个好的提示是在您的框架配置上使用 Profile。您将有一个底部栏，其中包含有关执行的查询和创建的日志的详细信息。

我认为这将帮助您找到问题所在。

# php - 使用 PHP 在 MySQL 中添加一个字段（如果它不存在）

> ID：11107450
> 
> 赞同：0
> 
> 时间：2012-06-19T18:50:35.507
> 
> 标签：php, mysql

我有一个用 PHP 编写的提交脚本。我们组织的多项调查都使用它。调查由其他用户创建。当他们提交到脚本时，PHP 将数据放入 MySQL 中的相应表中。我有时遇到的错误是用户更新了表单。他们添加了一个字段，或者重命名了一个输入，而脚本没有考虑到它，因为它希望一切都是一样的。因此，我正在尝试找到一种方法来使其适应添加新字段时的情况。这是我所拥有的：

```
 if( mysql_num_rows( mysql_query("SHOW TABLES LIKE '".$survey."'"))){

    echo "table exists";
    $sql = "SELECT * FROM " . $survey . ";";
    $result = mysql_query($sql)
        or die(mysql_error());
    $i=0;

    while($row = mysql_fetch_row($result));{
        echo $row[0];
        foreach($_POST as $k => $v){
            $i++;
            if($k != $row[$i]){
                $query = "ALTER TABLE " . $survey . " ADD " . $k . " VARCHAR(100);";
                mysql_query($query)
                    or die(mysql_error());
            }
        }
    }
} 
```

我习惯在JS中做while循环，所以我不知道在这里使用i是否有效（实际上，我知道它不起作用......因为它不起作用......）。我想说的是，如果键与当前字段名称不匹配，则将其添加到表中。如何正确返回 $row？

当我提交给脚本时，它说：重复的列名'V4'

我有 echo $row[0] 但它返回一个 1。这是第一条记录的主键中使用的 int。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T18:53:07.373

您`;`在 while 循环声明的末尾有一个不应该存在的。不确定这是否会导致问题，因为您没有说明上述代码的*作用*。如果`;`不是问题，请更新问题。

您的 while 循环声明应如下所示：`while($row = mysql_fetch_row($result)) {`

此外，正如 Marc B 如此外交地在对您的问题的评论中提出的那样，您应该转义直接进入查询的任何用户输入。

最简单的方法是`$survey = mysql_real_escape_string($survey)`在您第一次使用之前使用`$survey`，作为开始或切换到 PDO/MySQLi 并使用[输入绑定（准备好的语句）](http://php.net/manual/en/mysqli.quickstart.prepared-statements.php)。 [这是 PDO 的准备好的语句文档](http://php.net/manual/en/pdo.prepared-statements.php)。可以而且应该做更多的事情来保护自己，但以上是一个好的开始。

# asp.net-mvc-3 - 没有 Web.config 的 IIS 7 自定义错误页面

> ID：11107452
> 
> 赞同：0
> 
> 时间：2012-06-19T18:50:39.430
> 
> 标签：asp.net-mvc-3, iis-7, web-config, custom-error-handling

有没有办法在 IIS 7 中设置自定义错误页面而不创建 web.config？

不幸的是，研究这个特定主题非常困难，因为有很多关于如何使用 web.config 进行研究的文章。我正在寻找的东西要么隐藏在我不想要的 800 万个结果之下，要么是不可能的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-18T13:32:56.033

就在这里。它涉及订阅`Application_Error`事件`Global.asax`或通过编写 custom `ErrorHandlerAttribute`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-07-08T14:05:48.643

达林已经给出了正确的答案，但我想更深入一点。

在任何 ASP.NET 应用程序中，如果它是 Web 窗体、MVC 或原始 ASP.NET，您始终可以使用`Application_Error`Global.asax。如果您的 ASP.NET 应用程序没有 Global.asax，您只需在解决方案资源管理器中右键单击您的项目，添加新项，然后选择全局应用程序类。如果您还没有此选项，则应该只提供此选项。 [![添加新的全局应用程序类](../Images/4288ad5f34ae4c5ed8fdb71464433442.png)](https://i.stack.imgur.com/wWMVu.png)

在您的 Global.asax 中，如果您还没有看到它，您可以添加`Application_Error`如下所示：

```
protected void Application_Error(object sender, EventArgs e) {

} 
```

每当出现错误时，ASP.NET 都会自动调用它。但正如[这里](https://msdn.microsoft.com/en-us/library/24395wz3.aspx)所说，这并不完美。具体来说：

> Global.asax 文件中定义的错误处理程序将仅捕获**在 ASP.NET 运行时处理请求期间**发生的错误。例如，如果用户请求在您的应用程序中没有出现的 .aspx 文件，它将捕获错误。**但是，如果用户请求不存在的 .htm 文件，它不会捕获错误**。对于非 ASP.NET 错误，您可以在 Internet 信息服务 (IIS) 中创建自定义处理程序。**服务器级错误也不会调用自定义处理程序**。

在`Application_Error`您可以使用 处理未捕获的异常`Server.GetLastError()`。这将为您提供`Exception`被抛出的，或`null`. 我不确定如果没有发生异常，为什么会调用这个处理程序，但我相信这是可能的。

要重定向用户，请使用`Response.Redirect()`. 无论您传递什么，`url`都将直接发送到浏览器而无需任何进一步处理，因此您不能使用应用程序相对路径。为此，我会将此方法与`VirtualPathUtility.ToAbsolute()`. 例如：

```
Response.Redirect( VirtualPathUtility.ToAbsolute( "~/Error.aspx" ) ); 
```

此重定向将是 302（临时重定向）而不是 301（永久），这是您在处理错误时想要的。值得注意的是，这个重载`Response.Redirect`与调用重载是一样的`Response.Redirect(url, endResponse: true)`。此方法通过抛出异常来工作，这在性能方面并不理想。相反， call`Response.Redirect(url, false)`紧接着是`Response.Complete​Request()`.

如果您使用的是 ASP.NET MVC，`[HandleError]`也是一种选择。将此属性放置在您的控制器上或控制器内的操作上。当此属性存在时，MVC 将显示错误视图，该视图位于 ~/Views/Shared 文件夹中。

但是你可以让这对你自己更容易。`FilterConfig`您可以通过在您的项目中创建一个类来自动添加此属性以在您的项目中调用 Controllers 。例子：

```
public class FilterConfig {
        public static void RegisterGlobalFilters(GlobalFilterCollection filters) {
        filters.Add(new HandleErrorAttribute());
    }
} 
```

然后添加`FilterConfig.RegisterGlobalFilters( GlobalFilters.Filters );`到您`Application_Start()`的 Global.asax 中。

您可以`HandleErrorAttribute`在[https://msdn.microsoft.com/en-us/library/system.web.mvc.handleerrorattribute(v=vs.118).aspx](https://msdn.microsoft.com/en-us/library/system.web.mvc.handleerrorattribute(v=vs.118).aspx)了解更多信息。

但是如上所述，这两种方法都不会绝对涵盖在处理您的应用程序期间可能发生的所有错误。如果不使用 Web.config 或手动配置 IIS，就不可能为所有可能的错误提供最佳用户体验。

# javascript - mailto：未正确设置 GroupWise 8 消息中的字段

> ID：11107453
> 
> 赞同：1
> 
> 时间：2012-06-19T18:50:40.493
> 
> 标签：javascript, html, struts, mailto, groupwise

我整个下午都在苦苦挣扎，试图让一个简单的`mailto:`标签起作用。我已经搜索了互联网，但到目前为止，建议的修复都没有解决问题。

**问题**

我有一个网页，我希望用户能够从中发送电子邮件。此页面将用于内部网络，并要求在单击按钮时将收件人、主题和正文动态添加到消息中。

为了解决这个问题，我尝试使用 mailto 标签，当我只列出一个收件人时，Groupwise 8 会正确启动一条新消息。但是，当尝试设置 To: 字段以外的任何内容时，数据只是附加到 To: 字段。

例如，在我的 jsp 页面中，我有这个：

```
<script type="text/javascript">
    function sendMail() {
        alert('Trying to send mail!');
        var link = "mailto:myaddress@mydomain.org"
             + "?subject=Testing the automated email template"
             + "&body=Testing testing testing" 
        ;
        window.location.href = link;
    }
</script>

...

<input type="button" onclick="sendMail();" value="Send email" /> 
```

因此，当我单击该按钮时，我希望收到一封电子邮件至 myaddress@mydomain.org，主题为“测试自动电子邮件模板”，正文为“测试测试测试”。但是，整个链接字符串只是简单地放入电子邮件的 To: 字段中。

我尝试了许多 mailto 的变体，将 mailto 嵌入到`<a>`标签而不是 Javascript 中，并转义了字符串。当 Groupwise 创建新消息时，结果没有任何改变。

非常感谢任何有关如何解决此问题的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T14:48:08.677

我能够解决这个问题的唯一方法是使用 mailTo 报废。我最终不得不创建一个新的 sendEmail 操作和 bean，以处理应用程序逻辑部分中电子邮件的创建。

希望这可以阻止其他人浪费时间试图找到一种方法来使 GroupWise 与`<mailto:>`!

# python - 使用 sys.path.append() 指定 Tweepy API

> ID：11107454
> 
> 赞同：0
> 
> 时间：2012-06-19T18:50:48.953
> 
> 标签：python, tweepy

安装 OSX 10.7.4 Eclipse Indigo、Pydev、Tweepy-1.9

我认为这应该相对简单，但我不断收到错误消息。我希望使用 sys.path.append() 指定 Tweepy API 但是 PyDev 不断向我显示“未解决的导入：tweepy”错误

我的代码

```
import sys
sys.path.append('/Applications/tweepy-1.9')
import tweepy 
```

我看过几个类似的帖子，[但](https://stackoverflow.com/questions/2515686/django-sys-path-append-for-project-and-app-needed-under-wsgi)它们似乎就是否链接到顶级文件或目录中的特定文件给出了相互矛盾的建议。

**我的问题是**我应该像现在一样直接链接到顶级文件夹（/Applications/tweepy-1.9）还是链接到该文件夹​​中的特定文件？Machaku 向我提供了一些[相关问题](https://stackoverflow.com/a/11101619/1214163)的信息，说我可以同时做这两个，但我必须创建一个名为“<strong>init.py”的文件并链接到它。

我都试过了，但似乎都没有。

任何建议都非常受欢迎

* * *

错误

```
Traceback (most recent call last):
  File "/Users/brendan/Documents/workspace/Tweeter/src/rate_limit.py", line 13, in <module>
    print api.rate_limit_status()
  File "build/bdist.macosx-10.5-fat3/egg/tweepy/binder.py", line 185, in _call
    return method.execute()
  File "build/bdist.macosx-10.5-fat3/egg/tweepy/binder.py", line 149, in execute
    raise TweepError('Failed to send request: %s' % e)
tweepy.error.TweepError: Failed to send request: [Errno 61] Connection refused 
```

* * *

tweepy-1.9 文件结构

*   tweepy-1.9

    *   建造

        *   bdist.macosx-10.5-fat3
        *   库
            *   呸呸呸
                *   **init** .py *（“init”两边各有2个下划线）*
                *   api.py
                *   授权文件
                *   活页夹.py
                *   缓存.py
                *   游标.py
                *   错误.py
                *   模型.py
                *   oauth.py
                *   解析器.py
                *   流式传输.py
                *   实用程序.py
    *   距离

        *   tweepy-1.9-py2.7.egg
    *   PKG-信息
    *   自述文件
    *   设置.cfg
    *   呸呸呸
        *   **init** .py *（“init”两边各有2个下划线）*
        *   api.py
        *   授权文件
        *   活页夹.py
        *   缓存.py
        *   游标.py
        *   错误.py
        *   模型.py
        *   oauth.py
        *   解析器.py
        *   流式传输.py
        *   实用程序.py
    *   tweepy.egg 信息
        *   依赖链接.txt
        *   PKG-信息
        *   来源.txt
        *   顶层.txt
        *   zip_safe

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T17:03:33.113

给定堆栈跟踪，找到您的 Tweepy 库，因此您`sys.path.append`的工作正常。但是，如果您阅读最后一行，

`tweepy.error.TweepError: Failed to send request: [Errno 61] Connection refused`

错误似乎是该库无法连接到 twitter 服务。

关于放入什么`sys.path`，它应该是包含顶级包所在目录的文件夹。例如，如果我有以下结构

```
src
 | my_package
 |     | __init__.py
 |     | module_1.py
 |     | module_2.py 
```

并且我希望能够做到的`from my_package import module_1`话`sys.path`必须包含`src`. 此外，该`__init__.py`文件必须存在才能制作`my_package`Python 包。

但是，动态更新`sys.path`绝对不是让其他 Python 程序可以访问 Python 包和模块的推荐方法。

有很多更好的解决方案：

*   调用`python setup.py install`，如 Tweepy[安装指南](https://github.com/tweepy/tweepy/blob/master/INSTALL)中推荐的那样（最好使用[virtualenv](http://pypi.python.org/pypi/virtualenv)）

*   更新 PYTHONPATH 以包含 Tweety 库的根路径。

*   使用[站点模块](http://docs.python.org/library/site.html#module-site)`.pth`读取的文件

[您可以在有关安装 Python 模块](http://docs.python.org/install/index.html)的 Python 文档中找到更多详细信息，尤其是在[修改 Python 的搜索路径部分](http://docs.python.org/install/index.html#modifying-python-s-search-path)

# c# - 实体框架函数是否会自动转义输入以防止注入？

> ID：11107456
> 
> 赞同：4
> 
> 时间：2012-06-19T18:50:55.520
> 
> 标签：c#, .net, entity-framework, sql-injection, edmx

实体框架函数是否会自动转义输入以防止注入？

在我的 SQL DB 层中，我有一个 SPROC`nvarchar(max)`作为输入。在我的 EDMX 中，SPROC 映射到函数导入，因为`methodName(string input)` 我需要手动转义输入以防止注入还是实体框架自动执行此操作？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:06:43.973

要看...

[EF 确实为您转义输入](http://msdn.microsoft.com/en-us/library/yy6y35y8%28v=vs.110%29.aspx)，因此在大多数情况下您是安全的。

但是，如果您在带有输入的过程中创建动态 SQL 或使用输入调用另一个函数或过程，您仍然会受到 SQL 注入攻击。

为了防止 SQL 注入，必须遵循执行路径的最后一部分并确保输入经过验证。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T18:58:50.817

只需使用存储过程，您就不需要转义输入，除非您在存储过程中构建稍后将执行的动态 SQL。

# html - 哪些 DOM 元素不能接受 id？

> ID：11107463
> 
> 赞同：14
> 
> 时间：2012-06-19T18:51:24.237
> 
> 标签：html, dom

我正在阅读有关[元素的](https://developer.mozilla.org/en/Canvas_tutorial/Basic_usage)[基本教程`canvas`](https://developer.mozilla.org/en/Canvas_tutorial/Basic_usage)。下面`(almost)`这句话引起了我的注意：

> id 属性不是特定于元素的，而是可以应用于（几乎）每个 HTML 元素的默认 HTML 属性之一

哪些 html 元素不能接受 id？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T18:54:27.107

来自[w3schools](http://www.w3schools.com/tags/att_standard_id.asp)（是的，我知道......）：

> `<base>`注意： id 属性在、`<head>`、`<html>`、 `<meta>`、`<param>`、`<script>`、`<style>`和中无效`<title>`。

请注意，这仅对 HTML4 有效，但这解释了本教程的“几乎”。

正如其他人指出的那样，HTML5 接受所有元素的 id 。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-06-19T18:55:29.350

在**HTML5**中，`id`属性是一个[全局属性](http://www.whatwg.org/specs/web-apps/current-work/multipage/elements.html#global-attributes)，可以在**任何**元素上指定。

* * *

如果您查看[**HTML4**](http://www.w3.org/TR/html4/sgml/dtd.html)[的文档类型声明](http://www.w3.org/TR/html4/sgml/dtd.html)**，您会发现在其属性列表中未定义的元素`%attrs;`表明它们不支持该`id`属性。包括在“文档头”部分底部附近的那些：`HEAD`、`TITLE`、`BASE`、`META`、`STYLE`、`SCRIPT`和`HTML`。**

 **请注意，尽管该`PARAM`元素在其属性列表中不包含`%attrs;`声明，但它确实明确允许该`id`属性本身在该列表中。

```
<!ATTLIST PARAM
  id          ID             #IMPLIED  -- document-wide unique id --
  name        CDATA          #REQUIRED -- property name --
  value       CDATA          #IMPLIED  -- property value --
  valuetype   (DATA|REF|OBJECT) DATA   -- How to interpret value --
  type        %ContentType;  #IMPLIED  -- content type for value
                                      when valuetype=ref --
  > 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T18:57:56.140

他们在元素的上下文中这么说有点令人惊讶`canvas`，这是一个 HTML5 元素。在 HTML5 中，`id`任何元素都允许该属性，无一例外。早期版本的 HTML 施加了各种限制。HTML 4.01 排除了`base`, `head`, `html`, `meta`, `script`, `style`, 和`title`，但 XHTML 1.01 删除了这个限制。**

# c# - 仅获取日期时间的小时/分钟

> ID：11107465
> 
> 赞同：47
> 
> 时间：2012-06-19T18:51:32.457
> 
> 标签：c#

使用 C#，我有一个`datetime`对象，但我想要的只是 datetime 对象中的小时和分钟。

例如：如果我有一个我想要的`DateTime`对象在对象中（所以，没有秒）。`July 1 2012 12:01:02``July 1 2012 12:01:00``datetime`

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-19T18:52:37.620

尝试这个：

```
var src = DateTime.Now;
var hm = new DateTime(src.Year, src.Month, src.Day, src.Hour, src.Minute, 0); 
```

* * *

## 回答 #2

> 赞同：54
> 
> 时间：2016-03-09T09:09:38.080

尝试这个：

```
String hourMinute = DateTime.Now.ToString("HH:mm"); 
```

现在您将获得小时：分钟格式的时间。

* * *

## 回答 #3

> 赞同：38
> 
> 时间：2012-06-19T18:53:58.950

只需使用`Hour`和`Minute`属性

```
var date = DateTime.Now;
date.Hour;
date.Minute; 
```

或者您可以轻松地将秒数归零

```
var zeroSecondDate = date.AddSeconds(-date.Second); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T18:55:39.540

我建议保留您拥有的对象，并仅使用您想要的属性，而不是删除您已有的分辨率。

如果您想以某种格式打印它，您可能需要查看[这个](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)...这样您就可以进一步保留您的分辨率。

话虽如此，您可以`DateTime`只使用@romkyns 在他的回答中提供的属性创建一个新对象。

# video - FTP 可以流式传输当前正在使用的文件吗？

> ID：11107470
> 
> 赞同：0
> 
> 时间：2012-06-19T18:51:52.520
> 
> 标签：video, upload, ftp, streaming, vlc

我的计算机上有一个名为 video_2.m4v 的文件，另一个程序正在使用该文件在其中写入数据（视频），因此文件大小每秒都在增加。我想做的是制作类似流式上传的东西：在写入文件时，它会将其上传到服务器。我在 Windows 7 下使用这个 bash 脚本：

```
@echo off
echo user USER_NAME> ftpcmd.dat
echo PASSWORD>> ftpcmd.dat
echo bin>> ftpcmd.dat
echo cd ROOT_PATH>> ftpcmd.dat
echo put %1>> ftpcmd.dat

ftp -n -s:ftpcmd.dat ftp.example.com
del ftpcmd.dat 
```

这工作正常，但它捕获当前文件状态（大小）并上传它。请不要告诉我我需要使用 RTMP 服务器 :)。

VLC 实际上做了我想要的，但我不能切换到二进制模式。我正在使用以下代码：

```
set VLC_EXE=C:\Program Files (x86)\VideoLAN\VLC\vlc.exe
set SOUT_FTP_DOMAIN=ftp.example.com
set SOUT_FTP_PORT=21

set SOUT_FTP_USERNAME=user
set SOUT_FTP_PASSWORD=password
set SOUT_FTP_PATH=www/example.com
set SOUT_FILENAME=test

"%VLC_EXE%"  D:\video_1.m4v :sout=#std{access=ftp,mux=mp4,dst=ftp://%SOUT_FTP_USERNAME%:%SOUT_FTP_PASSWORD%@%SOUT_FTP_DOMAIN%:%SOUT_FTP_PORT%/%SOUT_FTP_PATH%/%SOUT_FILENAME%.mp4} :sout-keep vlc://quit 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T18:59:26.340

由于这是一个编程社区，我将从这个角度回答。从技术上讲，您可以实现一个 FTP 客户端，它可以执行您想要的操作（换句话说，协议允许这样做）但是您的客户端需要知道文件动态更改其大小的可能性。客户端的上传代码可以写成两种方式：（1）获取文件大小为 X 并上传 X 字节，（2）从文件中读取数据块并上传，直到出现文件结束。

在您的特定情况下，我几乎无法理解停止传输的命令是什么，因为数据是由另一个应用程序生成的。

如果你只是想通过一个批处理文件来做你需要的事情，那么你就在错误的社区中，并且以任何方式你想要的都是 ftp.exe 不可能的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:02:51.207

这将取决于您用于编写流的程序是否需要对文件的独占访问。一些转换器可能提供不需要独占访问的功能，而另一些可能不提供。您的上传应用程序可能有类似的限制，或者可能只检查一次大小，然后准确地上传该数量，在这种情况下，它似乎可以工作，但只会上传文件在您启动时完成转换的部分上传。

You can check if your converter requires exclusive access by attempting to play a file that is currently being converted. If it can play the file as the converter writes to it, it will only depend on the software you are using to upload. You are using FTP to transfer the file. The FTP protocol does not require the filesize to be sent before the file (I think? citation needed) so you may be able to accomplish this with the tools you are using.

# html - 在我的 JLabel 中使用 HTML

> ID：11107471
> 
> 赞同：0
> 
> 时间：2012-06-19T18:51:53.400
> 
> 标签：html, colors, append

好的，所以我使用 HTML 计算了整个颜色业务，但是现在当我将它放入我的 Jlabel 时它不起作用！这可能与我使用 TextArea 中的 getText() 来设置 Jlabel 的文本这一事实有关吗？这是我的代码：

```
String air = "<html>\n" +
            "<ul><font color=blue>blue</font>\n" +
            "</ul>\n"; 
```

...

```
JLabel jl = new JLabel();
jl.setSize(700,700);
frame.add(jl);
jl.setText(environment.getText()); 
```

我明白了……

```
<html><ul><font color=blue> text </font></ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-27T21:39:39.997

我试过你的代码，它工作正常。你能发布完整的代码吗？你在运行java小程序吗？我在这里发现了类似的问题：[HTML 不再在 JLabel (and other components)](https://stackoverflow.com/questions/4330602/html-no-longer-working-in-jlabel-and-other-components)中工作。希望它可以帮助你。

```
import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JTextArea;

public class JLabelSample extends JFrame {

/**
 * 
 */
private static final long serialVersionUID = 1L;

public static void main(String[] args) {

    JFrame frame = new JLabelSample();
    frame.setVisible(true);
    frame.setSize(400, 400);
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    String air = "<html>\n" + "<ul><font color=blue>blue</font>\n"
            + "</ul>\n";
    JTextArea area = new JTextArea(air);

    frame.add(area);

    JLabel jl = new JLabel();
    jl.setSize(100, 100);
    frame.add(jl);

    jl.setText(area.getText());

} 
```

}

# c# - 什么是正确的正则表达式来获取以“proc sql”开头的所有 SAS 代码块；并以'quit;'结尾？

> ID：11107483
> 
> 赞同：2
> 
> 时间：2012-06-19T18:52:19.883
> 
> 标签：c#, regex

我有这个：

```
 var blockRegEx = new Regex("(proc sql;)(.*?)(quit;)", RegexOptions.IgnoreCase | 
      RegexOptions.Multiline); 
```

但它仅在字符串位于单行时才有效。

例如：

```
proc sql;
create table xtr as
select
    midsu_client_id,
    prodt_cd,
    confmt_ind,
    maj_diag_categ,
    mbr_num,
    pay_amt format=comma16.2
from cr_data.rptng
where &acctnum
and gl_postg between "&date_1" and "&date_2"
;
quit; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:14:01.253

[RegexOptions.MultiLine](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)改变 '^' 和 '$' 字符的行为：

> 多行模式。更改 ^ 和 $ 的含义，使其分别匹配任何行的开头和结尾，而不仅仅是整个字符串的开头和结尾。

如果您一次将多行传递到您的正则表达式搜索中并且您希望将它们视为多行（即它们都以'^' 开头并以'$' 结尾），则多行非常有用。

**我想你想尝试使用[RegexOptions.SingleLine](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regexoptions.aspx)代替：**

> 指定单行模式。更改点 (.) 的含义，使其匹配每个字符（而不是除 \n 之外的每个字符）。

如果您一次将多行传递到正则表达式搜索中，并且您希望将它们视为实际上都是单行，则 SingleLine 很有用。

# android - 检测用户是否在 Android Activity 中的区域之外单击的最简单方法是什么

> ID：11107485
> 
> 赞同：0
> 
> 时间：2012-06-19T18:52:24.733
> 
> 标签：android

我有一个带有页眉、列表和页脚的活动。我想在用户触摸标题中的按钮时启用搜索选项，并在他们触摸除标题中的搜索 TextEdit 之外的任何其他位置以输入其搜索条件时立即禁用。我知道一种方法，但我正在寻找最简单和最简单的方法，因为搜索标题显示在几个活动中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:58:56.170

为您的元素（LinearLayout，RelativeLayout）制作一个合适的容器，并将您的所有视图添加到它并为其添加一个 onClickListener。如果按下搜索按钮，则按常规操作，如果按下容器，则隐藏搜索。如果按下 searchbutton 时两个 onclick 事件都被触发，您可能需要实现一些逻辑。

# java - 在 onCreate 中添加事件监听器

> ID：11107490
> 
> 赞同：1
> 
> 时间：2012-06-19T18:52:45.967
> 
> 标签：java, android

我想实现一个`LocationListener`. 检查了一些教程，发现了这个：

```
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

 // Acquire a reference to the system Location Manager
    LocationManager locationManager = (LocationManager) this.getSystemService(Context.LOCATION_SERVICE);

    // Define a listener that responds to location updates
    LocationListener locationListener = new LocationListener() {
        public void onLocationChanged(Location location) {
          // Called when a new location is found by the network location provider.
          makeUseOfNewLocation(location);
        }

        public void onStatusChanged(String provider, int status, Bundle extras) {}

        public void onProviderEnabled(String provider) {}

        public void onProviderDisabled(String provider) {}
      };

    // Register the listener with the Location Manager to receive location updates
    locationManager.requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener);

} 
```

但是事件监听器真的添加到`onCreate`方法中了吗？对我来说看起来很乱。将它们添加到单独的类并在其中创建类的实例是否更常见`onCreate`？我想知道这里的最佳做法。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T18:57:44.983

这实际上取决于您希望您的应用程序做什么。所以首先我同意在 onCreate() 中看起来很乱。假设您编写了一个小 init() 方法并从您的 onCreate() 中调用它，但还没有真正改变。唯一需要注意的是Activity LifeCycle。如果您注册接收位置更新，那么当您没有屏幕焦点时，您的 Activity 可能会获得更新。另一种选择是将寄存器移动到 onResume()，但是您需要在 onPause() 中取消注册。仅当您的应用当前在屏幕上时，才会获得更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:01:22.627

你的方法几乎是正确的，但一步一步，没有“好的”理由`LocationListener`在分离的类中实现，但你应该实现你`LocationListener`的`onCreate()`方法和

```
requestLocationUpdates(LocationManager.NETWORK_PROVIDER, 0, 0, locationListener); 
```

一般称为 in `onResume()`method 和`removeUpdates()`in `onDestroy()`method。

我建议您检查**CommonsWare**`WeatherPlus`的示例应用程序，我认为一切都会更清楚。

# mysql - 当用户在 mysql 中删除时通知

> ID：11107493
> 
> 赞同：0
> 
> 时间：2012-06-19T18:52:53.113
> 
> 标签：mysql

我需要弄清楚，如果有人在 mysql 中删除用户，我需要发送电子邮件。有没有办法做到这一点？绝对我不能在 mysql.user 表上添加触发器。考虑在其他数据库中创建一个与 mysql.user 复制的表（比如说 foo），并轮询该表并查看与 mysql.user 相比是否有任何变化。如果是，则发送电子邮件，更新副本(foo.user) 表。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:57:21.600

如果您在 PHP 中处理数据库，那么：

1.  触发删除用户事件
2.  检查成功
3.  触发电子邮件事件

无需克隆您的数据库

# php - Google Calendar API - 服务帐户错误

> ID：11107495
> 
> 赞同：-1
> 
> 时间：2012-06-19T18:52:59.387
> 
> 标签：php, google-calendar-api

我试图用“服务帐户”创建一个日历应用程序，我下载了最新版本的 google-api-php-client

当我访问 serviceAccount.php 时，我收到以下错误：

致命错误：在第 44 行的 /home/fmentert/public_html/reservations/google-api-php-client/examples/calendar/serviceAccount.php 中调用未定义的方法 apiClient::setAssertionCredentials()

这是我的 serviceAccount.php 文件。我添加了我的客户 ID、服务帐户名称和密钥文件。还。我将 const 更改为 define() 我的 php 版本是 5.2.17

```
define('CLIENT_ID', '896988357842.apps.googleusercontent.com');
define('SERVICE_ACCOUNT_NAME', '896988357842@developer.gserviceaccount.com');

// Make sure you keep your key.p12 file in a secure location, and isn't
// readable by others.
define('KEY_FILE', 'bqwe3287e42d1c2342349f4c9769asdas55-privatekey.p12');

$client = new apiClient();
$client->setApplicationName("Google Prediction Sample");

// Set your cached access token. Remember to replace $_SESSION with a
// real database or memcached.
session_start();
if (isset($_SESSION['token'])) {
 $client->setAccessToken($_SESSION['token']);
}

// Load the key in PKCS 12 format (you need to download this from the
// Google API Console when the service account was created.
$key = file_get_contents(KEY_FILE);
$client->setAssertionCredentials(new apiAssertionCredentials(    // THIS IS LINE 44
  SERVICE_ACCOUNT_NAME,
  array('https://www.googleapis.com/auth/prediction'),
  $key)
); .... 
```

有人知道出了什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T10:54:53.290

问题出在 las 版本上。您可以在那里获得解决方案： [https ://groups.google.com/forum/#!msg/google-api-php-client/vZysbW_XgiQ/-4kSFWP8UtEJ%5B1-25%5D](https://groups.google.com/forum/#!msg/google-api-php-client/vZysbW_XgiQ/-4kSFWP8UtEJ%5B1-25%5D)

我使用 475 版本修复它。有了它，这个例子就可以正常工作了。

致敬！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:19:05.417

看起来您没有包含包含`apiClient`该类定义的文件。为此，请使用`require_once`命令。

例如，如果`apiClient`该类定义在一个名为“apiClientFile.php”的文件中，那么您的 PHP 脚本将如下所示：

```
require_once 'apiClientFile.php';

define('CLIENT_ID', '896988357842.apps.googleusercontent.com');
... 
```

# c# - 检查一个字符串是否包含一个单词，然后检查它是否以该单词开头，如果不是？

> ID：11107505
> 
> 赞同：7
> 
> 时间：2012-06-19T18:53:45.733
> 
> 标签：c#, .net

这里有另一个棘手的家伙，基本上我想检查一个字符串是否包含单词“Foo”，如果它确实包含它，它是否以它开头？如果它确实以 Foo 开头，它应该是唯一以大写字母开头的 Foo，所有其他都应该是小写字母。

如果满足上述条件，则应返回 true。

如果字符串包含 Foo 但不以 Foo 开头，它应该立即返回 false，因为字符串中间不能有大写的 Foo。

如果所述字符串包含 foo，但不以 Foo 开头，则 foo 的所有实例都应为小写。如果满足此条件，则返回 true。

我应该提到我正在寻找 C# 代码，我尝试过但尚未成功，但由于我只编程了 2 周，我认为这对你们中的一些赛季专业人士来说不会有麻烦。

* * *

这是我按照要求尝试过的，我认为它很糟糕，但至少我试过了。

```
 if (Title.Contains("Foo") == true && Regex.IsMatch(Title, "^Foo") == true)
        {
            CheckAnd = true;
        }
        else if (Title.Contains("Foo") == true && Regex.IsMatch(Title, "^Foo") == false)
        {
            CheckAnd = false;
        }
        else if (Regex.IsMatch(Title, "^foo"))
        {
            CheckAnd = false;
        }
        else
        {
            CheckAnd = true;
        } 
```

* * *

好的，伙计们，快到了，这就是我从你所有的答案中得到的：

```
if (Title.IndexOf("Foo") == 0 && Title.LastIndexOf("Foo") == 0)
        {
            CheckAnd = true;
        }
        else if (Title.LastIndexOf("Foo") > 0)
        {
            CheckAnd = false;
        }
        else if(Title.Contains("foo") && Title.StartsWith("Foo") == false && PUT CHECK HERE) 
```

我需要检查最后一个 else if 语句中所有出现的 foo 是否都是小写的最后一件事？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-11-08T22:36:48.837

# 不想看我的书？这是答案：

*作为奖励，这是执行速度最快的解决方案。*

```
public void CheckValidFoo(String Title) {     
    return (Title.LastIndexOf("Foo") <= 0);
} 
```

# 继续阅读编码逻辑课程（幽默这位老人）

这个问题可能很老**了，但是为了那些*后来*发现这个问题的人对如何从逻辑上提炼单词问题*感到好奇***，这是我对这个极其简单的家庭作业的大量过度分析：

我进行了一组测试，看看哪些选项最快——这通常可以帮助我发现我的逻辑缺陷。我还将解释我的思维过程，因为，恕我直言，了解如何将问题提炼到其核心逻辑对于现实世界的使用来说是一件好事。

毕竟，这就是业务需求文档......需要提炼成功能规范（例如架构设计）的文字问题。

# 第1步

*消除无关信息*
根据给定的要求，小写的 foo 可能重要也可能不重要： 没有明确声明不包含 foo 且不包含 Foo 的字符串应返回 false；也没有明确的声明说一个不包含 Foo 和不包含 foo 的字符串应该返回 true。

在一个完美的世界里，你会回去澄清需求，但在某些情况下，没有时间。假设有一个截止日期，我会继续假设我们只关心 Foo 仅在句子的第一个位置是大写，在所有其他时间都是小写，所以我们将完全忽略 foo，如果 "客户”抱怨，指出缺失的清晰度并解释您做出判断的原因（以保持项目按时完成，并在预算内，如果适用）。

# 第2步

*将逻辑分解为 OR/AND 部分：*
将 Foo 分解为组件可以让我们查看单个部分，这比查看整体更容易。因此，如果我们将字符串分解为“Foo 之前的内容”（即使那是“无”）和“Foo 之后的内容”，或者如果 Foo 不存在来分解字符串，我们只有一个可以查看。（我们的大脑一直在这样做——这被称为模式识别）。

IF**由于未找到 Foo 无法拆分字符串，**
    或者
      **在 Foo 上拆分给我们的结果不超过两部分：之前什么都没有，**
       *AND*之后的所有内容（由前面的检查暗示只找到一个空的“之前”并且只有一个“节”在"after")        **Foo 在字符串的其他任何地方都找不到**

听起来不错？嗯，它是 100% 准确的，但我们可以减少一些垃圾并进一步提炼它——请记住，计算机不像人类那样思考，所以我们的心理处理对它们来说效率低下。

因为根本没有找到 Foo 被认为是有效的，并且开头的 Foo 是有效的，但是字符串后面的任何其他地方的 Foo 都是无效的，我们可以说：

IF **Foo is not found**
    OR
      **Foo 在字符串中第一个位置之后的任何位置都找不到**

看起来很紧，对吧？现在不要停下来。我们可以做得更好。

如果在一开始就找到了 Foo，我们可以接受它，对吧？所以“Foo is not Found”或“Foo is found in the beginning AND Foo is not found else else”可以从更纯粹的逻辑（布尔、真/假、黑白）的角度来看：

*   LET FNA = "在任何地方都找不到 Foo"
*   LET FN1 = "在位置 1 找不到 Foo"
*   LET FN2 = "在位置 1 之后找不到 Foo"
*   LET FF1 = "Foo 位于位置 1"
*   LET FF2 = "在位置 1 之后找到 Foo"

因此，现在仅将那些保证无效的情况定义为无效，并将其余情况标记为有效。我们将使用布尔数学来确定所有用例。

*   让 FNA = 有效
*   让 FN1 = 有效
*   让 FN2 = 有效
*   LET FF1 = 有效
*   LET FF2 = 无效

现在我们只标记了绝对强制返回 false 的情况，我们可以进行数学运算以查看我们得到无效/false 值的唯一情况。

FNA = FN1 和 FN2（所以如果 FNA & X = true，则 F1 & X 必须为 true，F2 & X 也必须为 true）；

FNA 和/或 FF1 = true，所以我们知道这 4 个变量和/或的所有组合 = true；这只剩下一个变量可以组合，我们可以很快看到FF2和任何东西都将永远是错误的。

所以翻译回人类逻辑......看看这个任务有多简单？

*****只有在位置 1 之后找到 Foo 时才为*****FALSE****

 ****或者，翻转布尔值（因为要求对有效情况返回 true）：

如果**在位置 1 之后没有找到 Foo，则字符串有效。**

或者，说得更像计算机的思维：

如果从字符串***末尾*****扫描到第 2 个到最后一个字符没有找到 Foo，则字符串有效**

 *在那里，现在我们不能再进一步提炼它了。所以让我们对这些不同的逻辑位进行编码，看看它们在实际代码中的表现：

```
using System;

public static class Test
{
public static bool CheckFooTestA(String SearchMe, String[] FindMe)
{
    //split the string like the human eye does and check the count of Foos 
    //and the position of the Foo or Foos to determine our logic:
    string[] v = SearchMe.Split(FindMe, StringSplitOptions.None);

         //Foo not found, OR foo found once and was at the beginning of the string
    return (v.Length == 0 || v.Length == 1 && v[0] == String.Empty);
}
public static bool CheckFooTestB(String SearchMe, String[] FindMe)
{
    //scan the way computers or non-speed readers do, and look for the first instance of Foo
    int i = SearchMe.IndexOf(FindMe[0]);

    //Foo not found OR 
    //    foo found at the start of the string 
    //    AND the last Foo found is also at the start of the string
    return (i == -1 || i == 0 && SearchMe.LastIndexOf(FindMe[0]) == 0 );
}
public static bool CheckFooTestC(String SearchMe, String[] FindMe)
{
    //Use the logic we distilled from the word problem to make this single check:
    return (SearchMe.LastIndexOf(FindMe[0]) <= 0);
}
public static void Main()
{
    String[] x = new String[]{
        "Foo foo Foo bar",
        "Foo foo foo bar",
        "foo foo Foo bar",
        "foo foo foo bar",
        "asfda asdfa asf" };

    var s = new []{"Foo"};
    var i = 0;
    bool f=false;
    long End = DateTime.Now.Ticks;
    long Start = DateTime.Now.Ticks;
    for (; i < 1000; i++) {
        f = CheckFooTestA(x[i%5],s);
    }
    End = DateTime.Now.Ticks;
    Console.WriteLine((End - Start).ToString() + " ticks (Test A)");

    i = 0;
    f = false;
    End = DateTime.Now.Ticks;
    Start = DateTime.Now.Ticks;
    for (; i < 1000; i++) {
        f = CheckFooTestB(x[i%5],s);
    }
    End = DateTime.Now.Ticks;
    Console.WriteLine((End - Start).ToString() + " ticks (Test B)");

    i = 0;
    f = false;
    End = DateTime.Now.Ticks;
    Start = DateTime.Now.Ticks;
    for (; i < 1000; i++) {
        f = CheckFooTestC(x[i%5],s);
    }
    End = DateTime.Now.Ticks;
    Console.WriteLine((End - Start).ToString() + " ticks (Test C)");
}
}
Test.Main(); 
```

## 输出：

```
260510 ticks (Test A)
117150 ticks (Test B)
76160 ticks (Test C) 
```

# 结果和结论

测试 A（对找到的单词进行视觉拆分/计数的人类逻辑）与测试 B（使用带有提炼逻辑的索引进行扫描）相比，测试 A 的运行时间延长了 220% 以上！

测试 C 是表现最好的——只需要对字符串进行一次扫描。所需处理时间不到 30%（测试 A 占用了测试 C 完成相同工作所需时间的 340%！）。

所以希望某个地方的某个学生已经读过这篇文章并且灯泡继续亮着。您总是可以想出一些方法来制作“有效”的东西，但是理解布尔逻辑以及如何将概念提炼到其核心可能会对您的工作质量产生重大影响。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T18:57:09.883

如果我正确地理解它，这应该做到！

```
 if (testString.IndexOf("Foo") == 0 && testString.LastIndexOf("Foo") == 0)
        // "Foo foo foo"
        return true;
    else if (testString.IndexOf("Foo") == 0 && testString.LastIndexOf("Foo") > 0)
        // "Foo foo Foo"
        return false;
    else if (testString.Contains("foo")  && testString.IndexOf("Foo") > 0)
        // "foo Foo foo" or "foo foo Foo"
        return false; 
    else if (testString.Contains("foo") && !testString.Contains("Foo"))
        // "foo foo foo"
        return true; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T18:58:09.350

这将返回`true`（因为它包含单词 Foo），然后`false`（因为 Foo 不在句子的开头）。

```
 string word = "I am a string i contain Foo, aint that nice?";
        bool conts = word.Contains("Foo");
        int pos = word.IndexOf("Foo");                 
        if (conts)
        {
            if (pos != 0)
            {
                // do something
            }

        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T19:05:16.443

请参考 String.IndexOf 方法：

[http://msdn.microsoft.com/en-us/library/k8b1470s.aspx](http://msdn.microsoft.com/en-us/library/k8b1470s.aspx)

搜索区分大小写，因此只需查找大写单词（例如：“Foo”）。如果 IndexOf 返回 0，则该单词位于第一个位置。

编辑：这就是我会做的事情（在看到你的代码之后）

```
//changed to check for lowercase foo
if ((Title.StartsWith("Foo") && Title.LastIndexOf("Foo") == 0) 
|| (Title.Contains("foo") && !Title.StartsWith("foo")))
{
    CheckAnd = true;
}
else
    CheckAnd = false; 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T19:19:44.450

如果我正确理解了这个问题，这个方法应该可以工作。

```
 public bool ContainsFoo(string s)
    {
        bool result = true;

        if (s.IndexOf("Foo") > 0)
        {
            result = false;
        }
        else if (s.LastIndexOf("Foo") > 0)
        {
            result = false;
        }
        return result;
    } 
```

如果我误解了什么，请告诉我。*****

# php - 是否可以重复使用故意留空的套接字？

> ID：11107510
> 
> 赞同：3
> 
> 时间：2012-06-19T18:54:09.290
> 
> 标签：php, linux, sockets, tcp, file-descriptor

我正在使用[PHP 套接字扩展](http://php.net/manual/en/book.sockets.php)（基本上是围绕`socket(2)`-related linux 系统调用的包装器），并且希望在为后续请求提供一个请求时重用我打开的套接字。性能是一个关键因素。

我打开的套接字都指向同一个 IP，这使得其他功能的使用`pfsockopen()`变得不可能（因为它每次都重用同一个套接字），我一次需要几个。

**问题**

如果我让我打开的套接字故意打开服务一个请求，（我不调用`socket_close()`or `socket_shutdown()`）并将具有完全相同参数的套接字连接到为下一个请求提供服务的同一 IP；linux 会重新使用之前打开的套接字/文件描述符吗？

我最终要做的是避免每次请求都进行 TCP 握手。

**附加信息**：

*   我使用 apache worker MPM - 这意味着不同的请求*可以*但不一定来自不同的进程。为了简单起见，我们假设所有请求都来自同一个进程。

*   我可以在 PHP 中获取打开和连接的套接字的文件描述符 ID。我可以打开和读写`/dev/fd/{$id}`，但没有任何目的 - 它没有与远程服务器通信（也许这是一种天真的方法）。如果有人知道如何完成这项工作，我也会认为这也是一个可以接受的答案。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T21:05:14.440

如果您想在同一进程中重用套接字，只需保持连接打开即可。这实际上是避免 TCP 握手的唯一选择。确保keepalives开启：

```
s.setsockopt( socket.SOL_SOCKET, socket.SO_KEEPALIVE, 1) 
```

如果您想生成新进程并将连接传递给它们，是的，它们将能够写入`/dev/fd/{$id}`，这将通过网络发送数据。只需确保在 exec 期间未关闭套接字（了解`SOCK_CLOEXEC`）。

将套接字传递给不相关的进程是不可能的。您必须使用某种形式的进程间通信来实现这一点，而且我不确定内部网或 Internet 条件下 TCP 握手的开销是否足以证明与此相关的复杂性和其他开销是合理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:43:52.940

> 如果我让我打开的套接字故意打开服务一个请求，（我不调用 socket_close() 或 socket_shutdown()）并将具有完全相同参数的套接字连接到为下一个请求提供服务的同一 IP；linux 会重新使用之前打开的套接字/文件描述符吗？

不，但是如果您处于相同的过程中，您可以始终继续使用原始版本。您所说的实际上是连接池。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T18:44:31.260

虽然[Jirka Hanika](https://stackoverflow.com/users/1235565/jirka-hanika)给出的答案对于大多数系统都是正确的，但我得出的结论是遗憾地不适用于 PHP；[使用 PHP套接字扩展](http://php.net/manual/en/book.sockets.php)重新使用套接字是不可能从用户空间实现的。

导致这个结论的代码是：

```
function statDescriptors() {
    foreach (glob('/proc/self/fd/*') as $sFile) {
        $r = realpath($sFile);
        // ignore local file descriptors
        if($r === false) {
            echo `stat {$sFile}`, "\n";
        }
    }       
}

header('Content-Type: text/plain');

statDescriptors();

$oSocket = socket_create(AF_INET, SOCK_STREAM, SOL_TCP);

socket_set_option($oSocket, SOL_SOCKET, SO_KEEPALIVE, 1);
socket_set_option($oSocket, SOL_SOCKET, SO_REUSEADDR, 1);

socket_connect($oSocket, '173.194.35.33', 80); // Google IP

socket_write($oSocket, 'GET / HTTP/1.0' . "\r\n");
socket_write($oSocket, 'Connection: Keep-Alive' . "\r\n\r\n");

socket_read($oSocket, 1024 * 8);

// socket_close($oSocket); // toggle this line comment during test

echo 'PID is: ', getmypid(), "\n";

statDescriptors(); 
```

此代码将`stat()`在当前进程的执行开始和结束时打开套接字文件描述符。在两者之间，它将打开一个带有`SO_KEEPALIVE`set 的套接字，向其写入请求并读取响应。然后它会选择性地关闭套接字（切换行注释）并回显当前进程的 PID（以确保您在同一个进程中）。

您将看到，无论您是否关闭套接字，为上一个请求创建的文件描述符在此循环执行开始时将不再存在，并且将创建并连接一个全新的套接字。

我无法测试`SOCK_CLOEXEC`，因为它（还没有？）在扩展中实现。

（这是使用 PHP 5.4.0 测试的）

# python - 第 1 行的“url”列的数据被截断 - 使用 Python Django 编程时出错

> ID：11107513
> 
> 赞同：8
> 
> 时间：2012-06-19T18:54:25.253
> 
> 标签：python, mysql, django

我得到的错误信息是

```
Traceback (most recent call last):
  File "./test.py", line 416, in <module>
    startup()
  File "./test.py", line 275, in startup
    writer.save(r,data) 
  File "/home/user/project/test/output.py", line 91, in save
    self.save_doc(r, data, pid)
  File "/home/user/project/test/output.py", line 130, in save_doc
    cursor.execute(dbquery)
  File "/usr/local/lib/python2.6/site-packages/django/db/backends/util.py", line 34, in execute
    return self.cursor.execute(sql, params)
  File "/usr/local/lib/python2.6/site-packages/django/db/backends/mysql/base.py", line 86, in execute
    return self.cursor.execute(query, args)
  File "/usr/local/lib/python2.6/site-packages/MySQL_python-1.2.3c1-py2.6-linux-x86_64.egg/MySQLdb/cursors.py", line 175, in execute
  File "/usr/local/lib/python2.6/site-packages/MySQL_python-1.2.3c1-py2.6-linux-x86_64.egg/MySQLdb/cursors.py", line 89, in _warning_check
_mysql_exceptions.Warning: Data truncated for column 'url' at row 1 
```

我要检查的第一件事是 URL 字符串是否比字段长度长，但实际上要短得多。数据库设计

```
+----------+-------------------------------------------------------------------+
| Database | Create Database                                                   |
+----------+-------------------------------------------------------------------+
| myurlcol | CREATE DATABASE `myurlcol` /*!40100 DEFAULT CHARACTER SET utf8 */ | 
+----------+-------------------------------------------------------------------+ 
```

表设计

```
 CREATE TABLE `document` (
  `id` int(11) NOT NULL auto_increment,
  `url` varchar(255) collate utf8_bin NOT NULL,
  `md5` varchar(32) collate utf8_bin NOT NULL,
  `host` varchar(255) collate utf8_bin default NULL,
  `content_sha1` varchar(40) collate utf8_bin NOT NULL,
  `add_date` datetime NOT NULL,
  PRIMARY KEY  (`id`),
  UNIQUE KEY `url` (`url`),
  UNIQUE KEY `md5` (`md5`),
  KEY `main_crawl_document_content_sha1` (`content_sha1`),
  KEY `main_crawl_document_discover_date` (`add_date`),
  KEY `main_crawl_document_host` (`host`),
  ) ENGINE=InnoDB AUTO_INCREMENT=1 DEFAULT CHARSET=utf8 COLLATE=utf8_bin; 
```

我打印出我试图插入表中的数据的长度（我只使用一个 URL 进行测试）：

```
len(url) =  89
len(md5) =  32
len(host) =  20
len(content_sha1) =  40
len(add_date) =  19 
```

我使用的是由 Django.db.connection 创建的游标。为了提供更多信息，我粘贴了我传递给的完整数据库查询命令`cursor.execute()`

```
INSERT INTO main_document SET url='ftp://ftp.ncbi.nlm.nih.gov/pub/pmc/0a/39/Arthritis_Res_2000_Jun_5_2%284%29_315-326.tar.gz',md5='b6ba3adde8de87e4dc255092b04d07ea',host='ftp.ncbi.nlm.nih.gov',content_sha1='9aeab4412cc9b1add84a6d2bca574664e193b56e',add_date='2012-05-15 00:00:00'; 
```

有趣的是，当我复制并粘贴到 MySQL 命令行时，上面的命令有效。没有错误消息，数据只是正确插入。

出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-11-25T07:40:00.267

`cursor.execute`如果您正确使用它，它会处理 MySQL 转义。[这里有一些例子](http://mysql-python.sourceforge.net/MySQLdb.html#some-examples)

基本思想是`%s`在您当前包含原始值的原始 SQL 字符串中使用，然后将第二个参数传递给`cursor.execute()`该参数，该参数是按顺序排列的值的元组（或数组）。在您的情况下，这看起来像：

```
url = 'ftp://ftp.ncbi.nlm.nih.gov/pub/pmc/0a/39/Arthritis_Res_2000_Jun_5_2%284%29_315-326.tar.gz'
md5 = 'b6ba3adde8de87e4dc255092b04d07ea'
host = 'ftp.ncbi.nlm.nih.gov'
content_sha1 = '9aeab4412cc9b1add84a6d2bca574664e193b56e'
add_date = '2012-05-15 00:00:00'
sql = "INSERT INTO main_document SET url = %s, md5 = %s, host = %s, content_sha1 = %s, add_date = %s"
cursor.execute(sql, (url, md5, host, content_sha1, add_date)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:54:05.247

您应该尝试`urllib.unquote(url)`在将其插入数据库之前取消引用 url 字符串[。](http://docs.python.org/library/urllib.html)出现在您的字符串中的引号字符标记 % 是MySQL的[特殊字符，可能会破坏您的事务。](http://dev.mysql.com/doc/refman/5.0/en/string-literals.html)

您的插入内容应为：

```
INSERT INTO main_document SET url='ftp://ftp.ncbi.nlm.nih.gov/pub/pmc/0a/39/Arthritis_Res_2000_Jun_5_2(4)_315-326.tar.gz',md5='b6ba3adde8de87e4dc255092b04d07ea',host='ftp.ncbi.nlm.nih.gov',content_sha1='9aeab4412cc9b1add84a6d2bca574664e193b56e',add_date='2012-05-15 00:00:00'; 
```

请注意，MySQL 仅在模式匹配上下文中将 % 视为特殊的。所以最后这里的 Django ORM 可能有问题。

# iphone - 如何使用 Windows 为 iPhone 构建原生应用程序？

> ID：11107517
> 
> 赞同：2
> 
> 时间：2012-06-19T18:54:44.177
> 
> 标签：iphone, ios

> **可能的重复：**
> [Windows 上的 iPhone 开发](https://stackoverflow.com/questions/113547/iphone-development-on-windows)

我想为 iPhone 构建应用程序，但我找不到合适的程序。我没有mac，所以xcode是不可能的。我使用了 MobiOne，但我必须付费，而且我更喜欢完全免费的程序。我想问你们中的一些人是否知道构建与 Windows 兼容且完全免费的原生 iPhone 应用程序的程序。

你的，Gromdroid

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T18:58:09.210

您需要一台配备 Intel CPU 和 MacOS X 10.6+ 的 Mac 计算机，以及 Xcode 软件的副本（它是免费的）来为 iPhone 构建应用程序。这就是苹果的政策。他们只是不将构建工具链许可给任何人。即使使用第三方 iOS 兼容 SDK，如 Mono 或 PhoneGap，您也必须在 Xcode 上生成最终构建。

VMWare 下的 Hackintosh 或 MacOS X 可能是您最好的选择，而不是购买您能找到的最便宜的 Mac Mini。

要将您的应用程序上传到 App Store 或实时设备（而不是模拟器），您也必须付费。基本账户每年 100 美元。

编辑：IIRC，在最新政策中，您**可以**在没有付费开发者帐户的设备上运行和调试。要上传到 App Store，仍然需要一个帐户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:09:09.547

我对此了解不多，以我有限的知识，您可以使用**电话差距**进行应用程序开发。它是免费的，您可以使用此 sdk 为 I-phone、android、windows mobile、black berry 等开发应用程序。 **Titanium sdk**是另一种。

但是您需要在 XCode 上创建 IPA 才能将其安装在 Apple 设备（Iphone、Ipad 等）上。

最好使用 Virtual box ( [Virtual box](https://www.virtualbox.org/) ) 在 Windows 机器上安装 Mac OS。请检查 sdk 链接。 [手机间隙](http://phonegap.com/) [钛](http://www.appcelerator.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T02:28:04.080

如果您擅长 java/lwuit 编程，您还可以查看 Codename One [http://codenameone.com](http://codenameone.com) 您使用他们的设计器和框架，然后发布到 iphone、android、j2me 等。您仍然需要开发证书。

# javascript - Dygraphs - 为丢失的数据留下空白？

> ID：11107519
> 
> 赞同：0
> 
> 时间：2012-06-19T18:54:45.187
> 
> 标签：javascript, dygraphs

我正在使用 Dygraphs 来显示数据。具体来说 - Dygraph.Gvizchart。我尝试使用 connectSeparatedPoint 选项但没有结果。这是我的格式：

```
 [new Date(2012, 5, 13), 0.9880,undefined,null ] ,

          [new Date(2012, 5, 14), 0.9911,undefined,null ] ,

          [new Date(2012, 5, 15), 0.9901,undefined,null ] ,

          [new Date(2012, 5, 16), 0.9920,undefined,null ] ,

          [new Date(2012, 5, 17), 0.9923,undefined,null ] ,

          [new Date(2012, 5, 18), 0.9926,undefined,null ] , 
```

但是，当我缺少日期时，我希望图表在下一个数据点之前留下一个空白，而不是像现在这样向下画一条垂直线。我试过使用'null'，'undefined'，只是把那个日期去掉，但无济于事。这种垂直线行为可能具有欺骗性。任何 Dygraph 大师都知道解决方案吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T15:26:04.623

您几乎肯定遇到了最近[修复](https://github.com/danvk/dygraphs/pull/155)的错误。拉入最新版本的 dygraphs 并再试一次。

# javascript - jquery手机gap怎么刷新

> ID：11107522
> 
> 赞同：0
> 
> 时间：2012-06-19T18:55:08.477
> 
> 标签：javascript, android, html, jquery-mobile, cordova

我正在尝试使用 phonegap 开发移动应用程序，但我遇到了问题。

```
 function onBodyLoad(){

$('#contentdining').load('http://localhost/m/contentdining.php',
{reloadPage:true});

var id = getUrlVars()["id"];
var product = serviceURL+'contentproduct.php?id='+id;
$('#contentproduct').load(product,{reloadPage:true});

}); 
```

在 index.html 中，我的问题是“**无法刷新**”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:51:07.787

该`reloadPage`选项对函数无效`.load()`，它对`$.mobile.changePage()`函数有效：

```
$.mobile.changePage('some-url.html', {
    reloadPage : true
}); 
```

文档：http: [//jquerymobile.com/demos/1.1.0/docs/api/methods.html](http://jquerymobile.com/demos/1.1.0/docs/api/methods.html)

请注意，这仅适用于外部页面。因此，如果您的应用程序在一个 HTML 文件中包含所有伪页面，则您无法使用此功能。但是，如果您只是将伪页面从单个 HTML 文档中拉出并制作它自己的一个，则可以。

否则，您可以使用`.load()`重新加载页面，但要确保从服务器返回的 HTML 创建了有效的 jQuery Mobile 页面结构：

```
<div data-role="page">
    <div data-role="content">
        ...
    </div>
</div> 
```

这是文档`.load()`：[http ://api.jquery.com/load/](http://api.jquery.com/load/)

请注意，您使用的方式`.load()`是传递一个数据对象，因此您正在加载的 URL 接收一个名为`reloadPage`set to的 GET 变量`true`。因此，要使您的页面可以使用`.load()`，只需删除`{ reloadPage : true }`.

您可能遇到缓存问题，在这种情况下，我建议您使用`$.ajax()`，以便您可以指定不允许缓存内容：

```
$.ajax({
    url     : serviceURL + 'contentproduct.php?id=' + getUrlVars()["id"],
    type    : 'get',
    cache   : false,
    success : function (response) {
        $('#contentproduct').html(response);
    },
    error   : function (a, b, c) { console.log(b); }
}); 
```

设置`cache : false`会在 AJAX 请求的 URL 的末尾放置一个时间戳，因此每次都会抓取一个新版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T13:54:43.967

完成...感谢所有+ @jasper ..我有其他解决方案...我上次使用刷新获取URL中的参数（使用GET）..但是1天发现他们仍然不能

现在我使用其他解决方案（POST）方法

这是我的代码

在php中

```
<a href="#product?id=<?php echo $row_getd['id_product']; ?>" style="text-decoration:none;color:#333;" onclick="onBodyLoad1(<?php echo $row_getd['id_product'];?>);"> 
```

在 .js 中

```
 var serviceURL = "http://localhost/m/";
    //var serviceURL = "http://kimpuler.com";

function onBodyLoad1(idku){

    var id = getUrlVars()["id"];
    var product = serviceURL+'contentproduct.php?id='+id;
    $("#contentproduct").load(product,{'id':idku}, function(){
    location.reload;
    }); 
```

希望能在像我一样的问题时对其他人有所帮助..

也感谢@jasper..你真的很棒的人......你的代码给了我灵感，并将在未来使用......

关注 jk

# google-analytics - 将 StumbleUpon 徽章与 GA Social Engagement 集成

> ID：11107525
> 
> 赞同：2
> 
> 时间：2012-06-19T18:55:27.547
> 
> 标签：google-analytics, stumbleupon

尝试使用一些社交分享按钮启用 GA 跟踪...

我们有以下内容： - Facebook - Twitter - LinkedIn - 偶然发现

除了偶然发现，我所有的工作都在工作！基本上，我只需要绑定到某人已完成交互的事件。他们的文档很糟糕。

有谁知道这是否可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T23:12:59.800

**简短的回答：**我不相信这是可能的。

**长答案：**我已经梳理了他们的文档和许多试图做同样事情的网站都无济于事。像 AddThis 这样的一些服务正在以某种形式或方式对其进行跟踪，但没有什么能让我相信他们是以非黑客的方式这样做的。可能可以通过他们在 firebug 中的 STMBLPN.Widget javascript 或某些开发人员工具来对解决方案进行逆向工程。我试过但没有成功。即使您是，由于它没有得到官方支持，如果他们决定更改您所依赖的内容，您的代码也会中断。

# javascript - Sencha Touch 2.0 基础应用程序未在 Google Chrome 中加载

> ID：11107530
> 
> 赞同：0
> 
> 时间：2012-06-19T18:55:36.527
> 
> 标签：javascript, json, google-chrome, sencha-touch

我正在尝试在 Sencha Touch 2.0 中创建一个应用程序，但是在从 Sencha 网站下载基本应用程序后，index.html 页面将不会加载到加载屏幕之外，并且 AppLoadIndicator 也不会消失。

在 Google Chrome 中打开 index.html 元素时，AppLoadingIndicator 永远不会离开以加载主页视图。这是我在 chrome 控制台中遇到的错误：

XMLHttpRequest 无法加载 file:///C:/Users/210078420/Desktop/proficyios/app.json。仅 HTTP 支持跨源请求。未捕获的错误：NETWORK_ERR：XMLHttpRequest 异常 101

我按照此视频创建了基础应用程序，并在我的计算机上安装了 SDK 和 SDK 工具。 [http://docs.sencha.com/touch/2-0/#!/guide/getting_started](http://docs.sencha.com/touch/2-0/#!/guide/getting_started)

有人知道为什么加载不正确吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T11:50:11.117

您有多种选择：

1.  将 chrome 与 --disable-web-security 一起使用（开发中）。
2.  配置跨域策略[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)。
3.  将位置从绝对更改为相对资源/数据/json.js。

此外，您应该尝试配置 Apache 或 http 服务以在那里部署应用程序，这不是必需的，但建议使用。

问候

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T20:53:54.860

在 IIS 中设置 mime 类型以传递 JSON 文件

```
<mimeMap fileExtension=".json" mimeType="application/json"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-20T01:59:00.887

要从 URL 上传文件是 http，请尝试安装 Tomcat 和应用程序负载，例如，

`http://localhost:8080/project_name/file.html`

我希望这有帮助。;)

# c# - 在 C# 中将字符串转换为类型

> ID：11107536
> 
> 赞同：212
> 
> 时间：2012-06-19T18:55:47.743
> 
> 标签：c#, .net, string, types

如果我收到一个包含类名称的字符串，并且我想将此字符串转换为真实类型（字符串中的类型），我该怎么做？

我试过

```
Type.GetType("System.Int32") 
```

例如，它似乎工作。

但是当我尝试使用自己的对象时，它总是返回 null ...

我事先不知道字符串中会包含什么，所以这是我将其转换为真实类型的唯一来源。

```
Type.GetType("NameSpace.MyClasse"); 
```

任何的想法？

* * *

## 回答 #1

> 赞同：437
> 
> 时间：2012-06-19T18:57:40.303

如果类型在其中或调用程序集，则只能使用类型*的*名称（当然还有其命名空间） 。`mscorlib`否则，您还必须包含程序集名称：

```
Type type = Type.GetType("Namespace.MyClass, MyAssembly"); 
```

如果程序集是强命名的，那么您也必须包含所有这些信息。[`Type.GetType(string)`](http://msdn.microsoft.com/en-us/library/w3f99sx1.aspx)有关更多信息，请参阅文档。

或者，如果您已经引用了程序集（例如通过众所周知的类型），您可以使用[`Assembly.GetType`](http://msdn.microsoft.com/en-us/library/y0cd10tb.aspx)：

```
Assembly asm = typeof(SomeKnownType).Assembly;
Type type = asm.GetType(namespaceQualifiedTypeName); 
```

* * *

## 回答 #2

> 赞同：38
> 
> 时间：2012-06-19T18:58:59.447

尝试：

```
Type type = Type.GetType(inputString); //target type
object o = Activator.CreateInstance(type); // an instance of target type
YourType your = (YourType)o; 
```

Jon Skeet 和往常一样是对的 :)

**更新：**您可以通过各种方式指定包含目标类型的程序集，如 Jon 所述，或者：

```
YourType your = (YourType)Activator.CreateInstance("AssemblyName", "NameSpace.MyClass"); 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2012-06-19T19:07:40.297

如果您真的想按名称获取类型，可以使用以下内容：

```
System.AppDomain.CurrentDomain.GetAssemblies().SelectMany(x => x.GetTypes()).First(x => x.Name == "theassembly"); 
```

请注意，您拥有的有关您尝试加载的类型的信息越多，就可以显着提高其性能。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-01-04T21:43:33.167

使用以下 LoadType 方法使用[System.Reflection](http://msdn.microsoft.com/en-us/library/system.reflection.aspx)加载所有已注册（[GAC](http://en.wikipedia.org/wiki/Global_Assembly_Cache)）和引用的程序集并检查 typeName

```
public Type[] LoadType(string typeName)
{
    return LoadType(typeName, true);
}

public Type[] LoadType(string typeName, bool referenced)
{
    return LoadType(typeName, referenced, true);
}

private Type[] LoadType(string typeName, bool referenced, bool gac)
{
    //check for problematic work
    if (string.IsNullOrEmpty(typeName) || !referenced && !gac)
        return new Type[] { };

    Assembly currentAssembly = Assembly.GetExecutingAssembly();

    List<string> assemblyFullnames = new List<string>();
    List<Type> types = new List<Type>();

    if (referenced)
    {            //Check refrenced assemblies
        foreach (AssemblyName assemblyName in currentAssembly.GetReferencedAssemblies())
        {
            //Load method resolve refrenced loaded assembly
            Assembly assembly = Assembly.Load(assemblyName.FullName);

            //Check if type is exists in assembly
            var type = assembly.GetType(typeName, false, true);

            if (type != null && !assemblyFullnames.Contains(assembly.FullName))
            {
                types.Add(type);
                assemblyFullnames.Add(assembly.FullName);
            }
        }
    }

    if (gac)
    {
        //GAC files
        string gacPath = Environment.GetFolderPath(System.Environment.SpecialFolder.Windows) + "\\assembly";
        var files = GetGlobalAssemblyCacheFiles(gacPath);
        foreach (string file in files)
        {
            try
            {
                //reflection only
                Assembly assembly = Assembly.ReflectionOnlyLoadFrom(file);

                //Check if type is exists in assembly
                var type = assembly.GetType(typeName, false, true);

                if (type != null && !assemblyFullnames.Contains(assembly.FullName))
                {
                    types.Add(type);
                    assemblyFullnames.Add(assembly.FullName);
                }
            }
            catch
            {
                //your custom handling
            }
        }
    }

    return types.ToArray();
}

public static string[] GetGlobalAssemblyCacheFiles(string path)
{
    List<string> files = new List<string>();

    DirectoryInfo di = new DirectoryInfo(path);

    foreach (FileInfo fi in di.GetFiles("*.dll"))
    {
        files.Add(fi.FullName);
    }

    foreach (DirectoryInfo diChild in di.GetDirectories())
    {
        var files2 = GetGlobalAssemblyCacheFiles(diChild.FullName);
        files.AddRange(files2);
    }

    return files.ToArray();
} 
```

# ios - 委托和数据源 iOS

> ID：11107542
> 
> 赞同：5
> 
> 时间：2012-06-19T18:56:05.500
> 
> 标签：ios, delegation

我一直在学习 iOS 编程的委托和数据源，我想问一下，当你制作数据源协议和委托协议时，你需要做哪些不同的事情？

另外，如何在一个委托中为许多相同的对象实现委托？示例一个具有许多独特自定义警报的对象。

- 编辑 -

第二部分的示例：

一个对象有四个不同的警报，每个警报都有不同的按钮。由于对象需要通过作为警报的代表来指定每个按钮的工作方式。我将如何设置委托方法来确定每个警报？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-19T19:04:07.947

两种类型的对象或多或少的行为方式相同，问题在于它们做什么。

委托类型对象响应另一个对象执行的操作。例如，该`UITableViewDelegate`协议具有诸如`didSelectRowAtIndexPath`在用户选择表中的特定行时执行动作的方法。

而数据源类型对象将数据提供给另一个对象。再次举例来说，该`UITableViewDataSource`协议具有诸如`cellForRowAtIndexPath`和`numberOfRowsInSection`规定应该在表格中显示什么的方法。

两者在编译方面没有硬性区别，只是一种编码风格，让代码的用户清楚地知道什么对象做什么。

编辑：

要回答您的第二个问题：如果您希望每个警报以不同的方式响应，您将需要为每个警报编写不同的委托。例如，如果您的警报之一是保存确认警报（也许您要覆盖一个文件，并且它会弹出以确认用户想要做什么），您将有一个对象，例如：

```
@interface SaveConfirmAlertDelegate : NSObject<UIAlertViewDelegate>
@end 
```

在`@implementation`for`SaveConfirmAlertDelegate`您将根据用户在警报中按下的按钮来实现正确的保存功能。

当您创建警报视图时，您指定委托对象应该是什么，这不必是`self`. 您可以将您的四个代理存储为不同的对象，并根据需要将它们设置为警报。

我希望这可以解决问题

# ios - 用户启用/禁用旋转

> ID：11107543
> 
> 赞同：1
> 
> 时间：2012-06-19T18:56:17.997
> 
> 标签：ios, xcode, orientation, uiinterfaceorientation

我只想在标志 enableRotation=1 时才允许界面更改。我一直在搞乱所有的旋转方法，但一无所获。

```
- (void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
{
enableRotation=0;
currentOrientation=fromInterfaceOrientation;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{

NSLog(@"enable rotation call %i\n",enableRotation);
if(enableRotation)
{  
if ((interfaceOrientation== UIInterfaceOrientationPortrait) ||
    (interfaceOrientation == UIInterfaceOrientationLandscapeLeft)
    ||(interfaceOrientation == UIInterfaceOrientationPortraitUpsideDown)||(interfaceOrientation == UIInterfaceOrientationLandscapeRight)
    )
{

    return YES;
}

        }
else if (interfaceOrientation==currentOrientation){

    return YES;
}
return NO;
} 
```

这就是我用来显示备用视图的内容....

```
 - (void)orientationChanged:(NSNotification *)notification
{

if (UIDeviceOrientationIsPortrait(deviceOrientation))
{
    [self performSegueWithIdentifier:@"DisplayAlternateView" sender:self];
    isShowingLandscapeView = NO;
  //  enableRotation=0;
    NSLog(@"Rotation disabled\n");

}
else if (UIDeviceOrientationIsLandscape(deviceOrientation) &&
         !isShowingLandscapeView)
{

    [self dismissViewControllerAnimated:YES completion:nil];
    isShowingLandscapeView = YES;
 //   enableRotation=0;
    NSLog(@"Rotation disabled Change to Landscape\n");

} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:37:53.933

你应该摆脱这种`!isShowingLandscapeView`状况。这可能会导致问题，因为您可能会多次收到该通知。实际上完全摆脱了布尔值。你不需要它。您始终可以使用`[UIDevice currentDevice].orientation`或获取方向`[UIApplication sharedApplication].statusBarOrientation`

事实上，您无需注册此通知期。您可以使用`-(void)willRotateToInterfaceOrientation: (UIInterfaceOrientation)orientation duration:(NSTimeInterval)duration`适当地更改视图。

此外，您还应该进行此更改：

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    if(enableRotation)
        return YES;
    else
        return NO;
} 
```

# python - 使用 Django 在 Html 表中替换行颜色

> ID：11107544
> 
> 赞同：2
> 
> 时间：2012-06-19T18:56:19.307
> 
> 标签：python, django, python-2.7

使用列表中的 for 循环生成的 django 表中的一个交替行颜色如何？在 asp.net 中，可以对视图进行数学运算以轻松计算，但据我了解，这种数学在 django 中是不可能的，所以我正在寻找另一种方法。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T18:59:52.190

我想你正在寻找[循环](https://docs.djangoproject.com/en/dev/ref/templates/builtins/?from=olddocs#cycle)。

```
{% for o in some_list %}
  <tr class="{% cycle 'red' 'green' %}">
    ...
  </tr>
{% endfor %} 
```

# mysql - SQL QUERY 结果排列问题

> ID：11107551
> 
> 赞同：6
> 
> 时间：2012-06-19T18:56:27.527
> 
> 标签：mysql, sql

这是我的 SQL 查询：

```
select name,description 
from wp_widget_custom 
where name in ('hemel-hempstead','maidenhead',
  'guildford','bromley','east-london','hertfordshire','billericay','surrey') 
```

我得到的结果是这种形式：

```
name            description
hemel-hempstead Loreum ipsim
east-london     Loreum ipsim
bromley         Loreum ipsim BROMLEY
billericay      Loreum ipsim
maidenhead      Loreum ipsim maidenhead
hertfordshire   Loreum ipsim HERTFORDSHIRE
guildford       loreum ipsum Guildford
surrey          loreum ipsum surrey 
```

我希望按照在查询中传递的方式排列结果：

```
hemel-hempstead ,maidenhead',guildford,bromley,east-london...... 
```

感谢您的帮助，谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T19:00:07.743

按字段排序：

```
select name, description
from wp_widget_custom
where name in ('hemel-hempstead','maidenhead','guildford','bromley','east-london','hertfordshire','billericay','surrey')
order by field(name, 'hemel-hempstead','maidenhead','guildford','bromley','east-london','hertfordshire','billericay','surrey') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:00:18.553

您可以使用过滤`inner join`而不是`where ... in`子句。这允许您指定一个顺序，然后您可以在`order by`子句中引用它：

```
select  wc.name
,       wc.description 
from    wp_widget_custom wc
join    (
        select 1 as nr, 'hemel-hempstead' as name
        union all select 2, 'maidenhead'
        union all select 3, 'guildford'
        union all select 4, 'bromley'
        union all select 5, 'east-london'
        union all select 6, 'hertfordshire'
        union all select 7, 'billericay'
        union all select 8, 'surrey'
        ) as filter
on      filter.name = wc.name
order by
        filter.nr 
```

# php - 为什么我无法连接到 NNTP 服务器？

> ID：11107553
> 
> 赞同：-1
> 
> 时间：2012-06-19T18:56:42.147
> 
> 标签：php, imap, nntp, newsgroup

我正在尝试使用 PHP 的 imap_open 函数连接到 NNTP 服务器，但到目前为止完全不成功。（PHP 文档指出这是可能的，尽管 IMAP 访问是该函数的主要目的。）在尝试对一些免费的 PHP 新闻阅读器进行故障排除后，我将代码简化为最简单的元素：

```
<?php
$nntp = imap_open("{news.mozilla.org:119/nntp}", "", "");
?> 
```

但是，您可以看到当我尝试在由不同组织配置的两台完全不同的服务器上运行它时会发生什么：

[http://tiszenkel.com/channelone/nntn/nntp.php](http://tiszenkel.com/channelone/nntn/nntp.php)

[http://video.channelone.com/newsreader/nntp.php](http://video.channelone.com/newsreader/nntp.php)

在这两种情况下我都缺少一些服务器设置吗？（我不是任一服务器的管理员，但我可以向其中一个服务器的管理员提出请求。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:21:12.797

```
$ref = '{news.mozilla.org:119/nntp}';
$imap = imap_open($ref,"","",OP_HALFOPEN);
var_dump(imap_list($imap,$ref,'*announce*')); 
```

* * *

```
array(4) {
  [0]=>
  string(57) "{news.mozilla.org:119/nntp}mozilla.announce.compatibility"
  [1]=>
  string(59) "{news.mozilla.org:119/nntp}netscape.public.mozilla.announce"
  [2]=>
  string(43) "{news.mozilla.org:119/nntp}mozilla.announce"
  [3]=>
  string(52) "{news.mozilla.org:119/nntp}mozilla.dev.l10n.announce"
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:17:24.247

看起来您可能需要`OP_ANONYMOUS`作为`imap_open`.

请参阅此链接中的信息和示例：

[imap_open 上的 PHP Cookbook 条目](http://docstore.mik.ua/orelly/webprog/pcook/ch17_06.htm)

# java - 如何从不是 JSF Bean 的类创建 FacesMessage？

> ID：11107570
> 
> 赞同：3
> 
> 时间：2012-06-19T18:58:12.440
> 
> 标签：java, jsf

我是 JSF 的新手，正在努力解决一个问题。我希望有人能帮助我。

问题：

*   不是 bean 的处理程序检测来自 TCP/IP 管道的消息。
*   处理程序需要创建一个新`FacesMessage`的以在消息框中显示消息。
*   由于处理程序不是 bean，因此`FacesContext`返回`null`，因此处理程序无法编写`FacesMessage`.

问题：

1.  有没有可能做我想做的事？
2.  将外部消息从不是 bean 的 Java 类传播到 a`FacesMessage`以使其显示在 UI 上的最佳方法是什么？

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:12:32.057

FacesContext.getCurrentInstance() 方法仅在您处于实际的人脸会话中时才返回有效的人脸上下文。我认为你应该考虑做的是构建这样的架构，以便你的类进行 TCP/IP 消息处理提供了一种方法，让 faces 托管 bean 获取有关前端消息的信息，然后从托管 bean。

根据您使用的应用程序服务器的类型，您可能希望将整个事情设置为通过 EJB 会话 bean 进行交互。但实际上任何 backing bean 或 faces 逻辑都应该绝对与与您的 UI 无关的逻辑分开。

如果您使用的是符合 JEE6 的应用程序服务器（如 Glassfish），您可以设置一个 @Singleton EJB 来保存一组消息（确保使用支持并发的数据结构）和 JCA-sockets 之类的东西（http:/ /code.google.com/p/jca-sockets/) 来处理套接字通信。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:07:29.737

不，这是不可能的，另一种方法是通过`@ManagedBean`注释或在 faces-config.xml 中输入类似的条目来创建支持 bean

```
 <managed-bean>
    <managed-bean-name>bean</managed-bean-name>
    <managed-bean-class>com.test.bean</managed-bean-class>
    <managed-bean-scope>session</managed-bean-scope>
</managed-bean> 
```

现在你可以得到`facesContext`并创建`FacesMessage`两者，希望这会有所帮助。

# java - Eclipse VM 不会运行 Java 1.6

> ID：11107571
> 
> 赞同：1
> 
> 时间：2012-06-19T18:58:20.333
> 
> 标签：java, android, eclipse

我正在运行 Mac OS 10.5.8 的 MacBook Pro 上使用 Eclipse Indigo。我正在尝试运行最新版本的 Google Android 插件（版本 18），但在尝试创建新的 Android 项目时收到以下错误：

> 无法启动选定的向导。
> 插件 com.android.ide.eclipse.adt 无法加载 `com.android.ide.eclipse.adt.internal.wizards.newproject.NewProjectWizard.`
> .class 文件中的类错误版本号

据我所知，问题在于 Eclipse 在 Java 版本 1.5 的 VM 下运行。无论我做什么，Eclipse 安装详细信息配置页面都会报告：

```
-vm
/System/Library/Frameworks/JavaVM.framework

java.class.version=49.0
java.endorsed.dirs=/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/endorsed
java.ext.dirs=/Library/Java/Extensions:/System/Library/Java/Extensions:/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home/lib/ext
java.home=/System/Library/Frameworks/JavaVM.framework/Versions/1.5.0/Home
java.io.tmpdir=/var/folders/N-/N-YaOpnxGXqmE8+CqS2VxE+++TI/-Tmp-/
java.library.path=.:/Library/Java/Extensions:/System/Library/Java/Extensions:/usr/lib/java
java.runtime.name=Java(TM) 2 Runtime Environment, Standard Edition
java.runtime.version=1.5.0_30-b03-389-9M3425
java.specification.name=Java Platform API Specification
java.specification.vendor=Sun Microsystems Inc.
java.specification.version=1.5 
```

我尝试在 eclipse.ini 文件和 Info.plist 中设置 -vm 我添加了：-vm/System/Library/Frameworks/JavaVM.framework/Versions/1.6.0/Commands/java

我究竟做错了什么？我在这里非常沮丧。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:12:23.197

确保您运行 Eclipse 3.5.1 的 64 位 Cocoa 版本，并确保您的 JAVA_HOME 设置为 1.6.0 而不是 1.5.0。此外，在 Eclipse 中将 Preferences->Java->Compiler 设置为 1.6。

# ruby-on-rails - 如何在 Rails 中将 2 个字符串变量计数相加？

> ID：11107574
> 
> 赞同：1
> 
> 时间：2012-06-19T18:58:45.963
> 
> 标签：ruby-on-rails, ruby, count

这是我在控制器中的当前代码。

```
@rating = (@approvals.count / @user.pages.count) + ( @awards.count / @user.stories.count ) 
```

当我分别调用这些变量中的每一个时，它们会以应有的数字出现。当我将它们加在一起时，总和似乎是 1 或 0。是否有某种方法可以将变量计数加在一起？

我查看了其他帖子，要么找不到我需要的东西，要么不理解它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:00:36.200

可能是您需要将它们转换为浮点数。尝试`to_f`方法。

```
@rating = (@approvals.count.to_f / @user.pages.count) + ( @awards.count.to_f / @user.stories.count ) 
```

# html - 第二个内联块 div 上方的空白

> ID：11107583
> 
> 赞同：22
> 
> 时间：2012-06-19T18:59:15.713
> 
> 标签：html, css

我确定我在这里忽略了一些东西，但无法解决。我的第二个内联块 div 上方有空白，只有当右侧 div 中的“文本此处”长度小于左侧时，才会出现这种情况。

jsFiddle： http: [//jsfiddle.net/B2S4r/2/](http://jsfiddle.net/B2S4r/2/)（您需要使 HTML 视图更宽才能看到它们并排显示）

```
<div style="border-top: 1px dashed black; display: inline-block; width: 250px; margin-bottom: 10px; margin-right: 10px; margin-top: 0;">

    <div style="height: 50px; padding-top: 2px; padding-bottom: 2px; text-align:right; font-size: 11px;">
        <div style="display: block; width: 80px; height: 50px; float: left; background-color: #cdcdcd; background-position: left center;">
        </div>

        <span class="main_header" style="font-size: 21px; margin: 0;">Title</span>
        <br />
        Subtitle

    </div>

    <div style="display:block; background-color: #efefef; height: 75px; padding: 5px; font-size: 12px;">
    Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here 
    </div>
</div>

<div style="border-top: 1px dashed black; display: inline-block; width: 250px; margin-bottom: 10px; margin-right: 10px; margin-top: 0;">

    <div style="height: 50px; padding-top: 2px; padding-bottom: 2px; text-align:right; font-size: 11px;">
        <div style="display: block; width: 80px; height: 50px; float: left; background-color: #cdcdcd; background-position: left center;">
        </div>

        <span class="main_header" style="font-size: 21px; margin: 0;">Title</span>
        <br />
        Subtitle

    </div>

    <div style="display:block; background-color: #efefef; height: 75px; padding: 5px; font-size: 12px;">
    Text here Text here Text here Text here Text here Text here Text here Text here Text 
    </div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-06-19T19:05:36.747

的默认值**`vertical-align`**是`baseline`，当应用于不同高度的块时，它通常是不需要的。

应用值**`top`**将解决您的问题。这是一个工作小提琴： http: [//jsfiddle.net/PhilippeVay/B2S4r/3/](http://jsfiddle.net/PhilippeVay/B2S4r/3/)（因为你的小提琴中没有样式表，但只有内联 CSS，我什至不会尝试找到如何瞄准右边的那个）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T19:17:53.497

这似乎是一个更好、更清洁的解决方案：（**[示例](http://jsfiddle.net/B2S4r/8/)**）

```
<div class="box">
    <hgroup>
        <h2>Title</h2>
        <h3>Subtitle</h3>
    </hgroup>
    <p>Pellentesque habitant morbi tristique senectus et netus et malesuada fames ac turpis egestas. Vestibulum tortor
        quam, feugiat vitae, ultricies eget, tempor sit amet, ante. Donec eu libero sit amet quam egestas semper.
        Aenean.</p>
</div>

<style type="text/css">
    .box {
        border-top:    1px dashed black;
        display:       inline-block;
        width:         250px;
        margin-bottom: 10px;
        margin-right:  10px;
        margin-top:    0;
    }

    .box hgroup {
        height:         50px;
        padding-top:    2px;
        padding-bottom: 2px;
        text-align:     right;
        font-size:      11px;
        border-left:    100px rgb(205, 205, 205) solid;
    }

    .box h2 {
        font-size:   21px;
        margin:      0;
        font-weight: normal;
    }

    .box h3 {
        font-weight: normal;
    }

    .box p {
        background-color: #efefef;
        height:           75px;
        padding:          5px;
        font-size:        12px;
    }
</style> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T19:15:57.890

如果您添加`float:left`到两个 div，您的问题将得到解决。

**HTML**：

```
<div class="article">
    <div class="header">
        <div class="grayBox"></div>

        <span class="main_header">Title</span><br />
        Subtitle
    </div>

    <div class="content">
        Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here 
    </div>
</div>

<div class="article">
    <div class="header">
        <div class="grayBox"></div>

        <span class="main_header">Title</span><br />
        Subtitle
    </div>

    <div class="content">
        Text here Text here Text here Text here Text here Text here Text here Text here Text 
    </div>
</div>​

<div class="clear"></div> 
```

**CSS**：

```
.article {
    border-top: 1px dashed black; 
    display: inline-block; 
    width: 250px; 
    margin-bottom: 10px; 
    margin-right: 10px; 
    margin-top: 0;
    float:left;        
}

.header {
    height: 50px; 
    padding-top: 2px; 
    padding-bottom: 2px; 
    text-align:right; 
    font-size: 11px;    
}

.main_header {
    font-size: 21px; 
    margin: 0;   
}

.grayBox {
    display: block; 
    width: 80px; 
    height: 50px; 
    float: left; 
    background-color: #cdcdcd; 
    background-position: left center;    
}

.content {
    display:block; 
    background-color: #efefef; 
    height: 75px; 
    padding: 5px; 
    font-size: 12px;
}​

.clear {
    clear:both;
}​ 
```

[现场演示](http://jsfiddle.net/B2S4r/7/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T19:11:57.850

一个快速的解决方案是`float:left`在两个 div 中添加一个 ...

```
<div style=" border-top: 1px dashed black; display: inline-block; width: 250px; margin-bottom: 10px; margin-right: 10px; margin-top: 0; float: left;">
...
</div> 
```

（请使用 css ;) ）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T19:15:19.743

我尝试在下一个块中粘贴 html 的第一个块，它没有问题。

```
<div style=" border-top: 1px dashed black; display: inline-block; width: 250px; margin-bottom: 10px; margin-right: 10px; margin-top: 0;">

    <div style="height: 50px; padding-top: 2px; padding-bottom: 2px; text-align:right; font-size: 11px;">
        <div style="display: block; width: 80px; height: 50px; float: left; background-color: #cdcdcd; background-position: left center;">
        </div>

        <span class="main_header" style="font-size: 21px; margin: 0;">Title</span>
        <br />
        Subtitle

    </div>

    <div style="display:block; background-color: #efefef; height: 75px; padding: 5px; font-size: 12px;">
    Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here
    </div>
</div>

<div style=" border-top: 1px dashed black; display: inline-block; width: 250px; margin-bottom: 10px; margin-right: 10px; margin-top: 0;">

    <div style="height: 50px; padding-top: 2px; padding-bottom: 2px; text-align:right; font-size: 11px;">
        <div style="display: block; width: 80px; height: 50px; float: left; background-color: #cdcdcd; background-position: left center;">
        </div>

        <span class="main_header" style="font-size: 21px; margin: 0;">Title</span>
        <br />
        Subtitle

    </div>

    <div style="display:block; background-color: #efefef; height: 75px; padding: 5px; font-size: 12px;">
    Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here Text here
    </div>
</div> 
```

你可以在这里看到更新的小提琴：http: [//jsfiddle.net/B2S4r/6/](http://jsfiddle.net/B2S4r/6/)

# java - 如何推进进度条

> ID：11107584
> 
> 赞同：1
> 
> 时间：2012-06-19T18:59:19.850
> 
> 标签：java, android, eclipse, progressdialog

我希望进度条在匹配字符串时增加。就像我点击是，是的栏会增加。但由于某种原因，我无法让它取得进展。

代码：

```
public class result extends VoteActivity{

        private ProgressBar mProgress;
     private int mProgressStatus = 0;

     private Handler mHandler = new Handler();

     public void onCreate(Bundle savedInstanceState) {
         super.onCreate(savedInstanceState);

         setContentView(R.layout.alert);
if(choice=="Yes")
{   
         mProgress = (ProgressBar) findViewById(R.id.p1);

         // Start lengthy operation in a background thread
         new Thread(new Runnable() {
             public void run() {

                     ++mProgressStatus;

                     // Update the progress bar
                     mHandler.post(new Runnable() {
                         public void run() {
                             mProgress.setProgress(mProgressStatus);
                         }
                     });

             }
         }).start();
} 
```

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:02:12.207

您不能将字符串与`==`. 您需要使用`equals()`：

```
if(choice.equals("Yes")) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:01:49.693

您是否尝试过`a.equals("Yes")`，而是比较了参考文献？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:08:14.117

除了@Floem，您可能还想看看使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)。如果在后台进程之前或之后您想要更新 UI 线程，这将派上用场。

另一件事完全符合您的要求并避免所有对 post 的调用是[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)。虽然您可能不会显示您的计数数字，但您当然可以将其用作超时。

# github - 我在我的 git bash 中不断收到权限被拒绝（公钥）错误

> ID：11107590
> 
> 赞同：2
> 
> 时间：2012-06-19T18:59:35.183
> 
> 标签：github, ssh

我收到消息

```
permission denied (public key) 
```

当我尝试推送到 git hub 或克隆时，起初我认为这是密钥所在的目标文件，但是当我使用时：

```
$SSH -T git@github.com -i(file path) 
```

我得到了同样的错误。奇怪的是，当我第一次设置 git 时，我克隆了我的存储库，但由于公钥错误而无法推送它。现在我无法克隆或推送任何存储库。

*   我已经在 git bash 中生成了 ssh 密钥并将其链接到 git hub
*   我已经配置了我的用户名和电子邮件
*   我正在使用 Windows 7。

# php - 解析 SOAP 有效负载的 XML 错误：保留的 XML 名称

> ID：11107592
> 
> 赞同：2
> 
> 时间：2012-06-19T18:59:41.007
> 
> 标签：php, web-services, soap

我有一个非常简单的 Web 服务，它返回一个字符串（在那里硬编码）。解析 SOAP 有效负载时不断收到错误消息：保留的 XML 名称。

我可以查看 WSDL 没问题（内部/防火墙后面，所以没有提供链接）。

这是调用我的方法后 NuSOAP 客户端的部分转储：

```
public 'request' => string 'POST myinternalhost.ca/ws.php HTTP/1.0
Host: myinternalhost.ca:443
User-Agent: NuSOAP/0.7.3 (1.114)
Content-Type: text/xml; charset=ISO-8859-1
SOAPAction: ""
Content-Length: 510

<?xml version="1.0" encoding="ISO-8859-1"?><SOAP-ENV:Envelope SOAP-ENV:encodingStyle="http://schemas.xmlsoap.org/soap/encoding/" xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="htt'... (length=716)

public 'response' => string 'HTTP/1.1 200 OK
Date: Tue, 19 Jun 2012 18:43:10 GMT
Server: Apache/2.0.59 (Win32) DAV/2 mod_ssl/2.0.59 OpenSSL/0.9.8e mod_auth_sspi/1.0.4 PHP/5.2.3
X-Powered-By: PHP/5.2.3
X-SOAP-Server: NuSOAP/0.7.3 (1.114)
Content-Length: 470
Connection: close
Content-Type: text/xml; charset=ISO-8859-1

     <?xml version="1.0" encoding="ISO-8859-1"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-i'... (length=769)

  public 'responseData' => string '  <?xml version="1.0" encoding="ISO-8859-1"?><SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/"><SOAP-ENV:Body><ns1:vms_ws_list_filesResponse xmlns:ns1="http://tempuri.org"><return xsi:type="xsd:string">SomeText</return></ns1:vms_ws_list_filesResponse></SOAP-ENV:Body></SOAP-ENV:Envelope>' (length=470)

public 'error_str' => string 'XML error parsing SOAP payload on line 1: Reserved XML Name' (length=59) 
```

在 SOAP 正文中，您可以看到“SomeText”，它是从我的 Web 服务返回的硬编码内容，仅包含一种方法：

```
$server->register('vms_ws_list_files',
  array('password' => 'xsd:string'),      // Password check
  array('return' => 'xsd:string'),     // Output parameters
    $ns,                                  // namespace
    $ns . '#vms_ws_list_files',                 // soapaction
    'rpc',                                // style
    'encoded',                            // use
    'Get list of files on disk'                       // documentation
  );

...

function vms_ws_list_files($password){
    global $site;
    // Check password
    if ($password != 'myHardCodedPwdForTesting') {
        return new soap_fault('Wrong password!', '', '');
    }
    $out = "SomeText";

    return $out;
} 
```

就我而言，端口 443 不受保护，因为它是内部/测试。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T19:05:31.707

删除之前的空格`<?xml`，[然后它就可以工作了](http://pastebin.com/1E638Mvx)。如果不能，也许您可​​以`trim`在解释之前将 nusoap 类更改/扩展为响应。额外的空格很可能来自`<?php`&`?>`标记之外的一些意外空格。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-24T21:29:08.097

在 nusoap.php 中添加以下行：

$this->responseData = trim($this->responseData);

在此行之前：

返回 $this->parseResponse($http->incoming_headers, trim($this->responseData));

解决了我同样的问题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-02-20T02:11:44.490

在我的代码中，它的 XML 格式很差，因为在葡萄牙语中，BR 有非常特殊的字符、引号，没有正确关闭标签。在代码的末尾显示返回，一个XML，在这个站点上进行了检查：[http](http://www.xmlvalidation.com/) ://www.xmlvalidation.com/ 然后他又回去工作了。

# git - git pull 后恢复文件

> ID：11107593
> 
> 赞同：2
> 
> 时间：2012-06-19T18:59:42.687
> 
> 标签：git

在没有任何本地提交的情况下拉取会删除暂存文件而不会发出警告。如何恢复这些文件？

这是一个显示该问题的示例：

```
~/git $ git --version 
git version 1.7.5.4

~/git $ uname -a
Darwin Joe-MacMini.local 10.8.0 Darwin Kernel Version 10.8.0: Tue Jun  7 16:33:36 PDT 2011; root:xnu-1504.15.3~1/RELEASE_I386 i386

~/git $ mkdir TESTDIR
~/git $ cd TESTDIR/

~/git/TESTDIR $ echo "hi" > file.txt

~/git/TESTDIR $ git init
Initialized empty Git repository in /Users/joe/workspace/git/TESTDIR/.git/

~/git/TESTDIR (master #%) $ git add file.txt

~/git/TESTDIR (master #) $ git status 
# On branch master
#
# Initial commit
#
# Changes to be committed:
#   (use "git rm --cached <file>..." to unstage)
#
#   new file:   file.txt
#

~/git/TESTDIR (master #) $ ls -al
total 8
drwxr-xr-x   4 joe  staff  136 Jun 19 14:52 .
drwxr-xr-x  19 joe  staff  646 Jun 19 14:52 ..
drwxr-xr-x  11 joe  staff  374 Jun 19 14:52 .git
-rw-r--r--   1 joe  staff    3 Jun 19 14:51 file.txt

~/git/TESTDIR (master #) $ git remote add origin git@github.com:joecabezas/GitLogGroupByDate.git

~/git/TESTDIR (master #) $ git reflog
fatal: bad default revision 'HEAD'

~/git/TESTDIR (master #) $ git pull origin master
remote: Counting objects: 3, done.
remote: Compressing objects: 100% (2/2), done.
remote: Total 3 (delta 0), reused 0 (delta 0)
Unpacking objects: 100% (3/3), done.
From github.com:joecabezas/GitLogGroupByDate
 * branch            master     -> FETCH_HEAD

~/git/TESTDIR (master) $ ls -al
total 8
drwxr-xr-x   4 joe  staff  136 Jun 19 14:53 .
drwxr-xr-x  19 joe  staff  646 Jun 19 14:52 ..
drwxr-xr-x  13 joe  staff  442 Jun 19 14:53 .git
-rw-r--r--   1 joe  staff  148 Jun 19 14:53 README.md

~/git/TESTDIR (master) $ git reflog
8583332 HEAD@{0}: initial pull 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:32:40.520

您可以使用 恢复丢失文件的内容`git fsck --lost-found`。

[已报告](http://thread.gmane.org/gmane.comp.version-control.git/196502/focus=196503)此问题，但我不认为已应用该补丁。在 git 邮件列表上发布后续内容可能会有所帮助。

# linux - Nodejs 更新将旧版本保留为当前版本

> ID：11107594
> 
> 赞同：1
> 
> 时间：2012-06-19T18:59:47.450
> 
> 标签：linux, shell, node.js, updates

所以我正在尝试更新 NodeJS 并遇到问题。首先我尝试使用`nvm`更新。我安装了一个新版本，我可以手动使用新版本，但`nvm ls`仍然显示

```
 v0.6.14
current: v0.4.12
default -> 0.6 (-> v0.6.14) 
```

`nvm use`在新版本上不会做任何事情来改变这个消息。`nvm uninstall`在旧版本上说我无法取消当前活动的节点版本（这不是`nvm use`应该做的吗？）。

[所以我尝试按照本指南](http://davestevens.us/articles/setting-up-nodejs-on-webfaction-revised)中的步骤手动安装新版本。

```
cd $HOME/src
wget http://nodejs.org/dist/node-v0.4.11.tar.gz
tar -xzf node-v0.4.11.tar.gz
cd node-v0.4.11
alias python=python2.6
./configure --jobs=8 --prefix=$HOME
make && make install 
```

这将安装它，但 shell 仍在使用旧的节点版本。

我需要做些什么来摆脱旧版本的节点，或者至少让它使用更新版本（从 nvm 或 shell，此时一切正常）。请原谅我一般的 linux noobishness，我仍在从 Windows 使用中恢复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:41:36.977

我能够通过删除`node`文件`$HOME/bin`并重新运行来解决这个问题`make install`。我仍然很好奇为什么`make install`不覆盖旧版本，这似乎是很自然的事情，但它现在可以工作了。在接受我自己的答案之前，我会坚持一个更好的答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-12T21:33:02.037

找出您正在使用的节点：

`where node`在你的 cli

```
/Users/Nomadme/.nvm/versions/node/v6.3.1/bin/node
/usr/local/bin/node 
```

并简单地删除旧目录，因为节点可以使用多个版本。

`rm -r /Users/Nomadme/.nvm/versions/node/v6.3.1/bin/node`

现在当你做

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-02-20T05:24:18.983

安装非虚拟机

1.  使用 nvm 列出 node.js 安装： **`nvm ls`**
2.  您尝试安装的版本很有可能也被列出
3.  使用 nvm 选择要使用的版本 **`nvm use`**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-07-20T17:39:40.903

使用以下命令删除节点：

```
rm /usr/local/bin/node 
```

如果您安装了其他版本，它将指向其他版本。

# ajax - php 图像文件上传和 html 5 演示使用 jquery / javascript 使用 $.ajax OR $.post OR xmlHttpRequest

> ID：11107607
> 
> 赞同：0
> 
> 时间：2012-06-19T19:00:48.927
> 
> 标签：ajax, jquery, cordova

关于类似主题的帖子很多，但我的情况完全不同。

我正在为一个项目使用 jquery 库并使用 phonegap 使其跨平台。我必须提供一个图像上传选项，该选项应按以下方式操作 - 当用户选择图像时，应在屏幕上为他提供图像演示。他应该能够改变形象。图像预览后，用户应该能够输入其他表单详细信息。填写完整的表格后，需要将整个数据（连同图像文件）发送到 php 后端文件。

到目前为止，我无法成功使用 AJAX 方法发送文件和数据。请建议有用的链接或资源，以创建与 phonegap 库一致的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:05:07.007

我不知道这是否有助于或适用于 PhoneGap，您可能已经在这样做，但这是我用于 AJAX 上传的方法，使用 iFrame 来回传输：

[http://www.openjs.com/articles/ajax/ajax_file_upload/](http://www.openjs.com/articles/ajax/ajax_file_upload/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:48:22.333

使用[FileTransfer.upload()](http://docs.phonegap.com/en/1.8.1/cordova_file_file.md.html#FileTransfer_upload)。这是一个很好的使用教程。

[http://zacvineyard.com/blog/2011/03/25/upload-a-file-to-a-remote-server-with-phonegap/](http://zacvineyard.com/blog/2011/03/25/upload-a-file-to-a-remote-server-with-phonegap/)

# c++ - C++ wchar_t 和 wstrings 有什么“错误”？宽字符有哪些替代方法？

> ID：11107608
> 
> 赞同：87
> 
> 时间：2012-06-19T19:00:50.673
> 
> 标签：c++, winapi, unicode, internationalization, wstring

我在 C++ 社区中看到很多人（尤其是 freenode 上的##c++）对`wstrings`and`wchar_t`的使用以及它们在 windows api 中的使用感到不满。和 到底有什么“错误” `wchar_t`，`wstring`如果我想支持国际化，宽字符有哪些替代方法？

* * *

## 回答 #1

> 赞同：115
> 
> 时间：2012-06-19T19:05:30.863

### wchar_t 是什么？

wchar_t 的定义使得任何语言环境的 char 编码都可以转换为 wchar_t 表示，其中每个 wchar_t 恰好代表一个代码点：

> wchar_t 类型是一种不同类型，其值可以表示支持的语言环境 (22.3.1) 中指定的最大扩展字符集的所有成员的不同代码。
> 
>                                                                                *— C++ [basic.fundamental] 3.9.1/5*

这*并不*要求 wchar_t 足够大以同时表示来自所有语言环境的任何字符。也就是说，用于 wchar_t 的编码可能因地区而异。这意味着您不一定要使用一种语言环境将字符串转换为 wchar_t，然后再使用另一种语言环境转换回 char。¹

由于使用 wchar_t 作为所有语言环境之间的通用表示似乎是 wchar_t 在实践中的主要用途，您可能想知道如果不是这样，它有什么用处。

wchar_t 的最初意图和目的是通过定义它来简化文本处理，以便它需要从字符串的代码单元到文本字符的一对一映射，从而允许使用与所使用的相同的简单算法与 ascii 字符串一起使用其他语言。

不幸的是，wchar_t 规范的措辞假设字符和代码点之间的一对一映射来实现这一点。Unicode 打破了假设²，因此您也不能安全地将 wchar_t 用于简单的文本算法。

这意味着可移植软件既不能使用 wchar_t 作为语言环境之间文本的通用表示，也不能使用简单的文本算法。

### wchar_t 今天有什么用？

不多，反正对于可移植的代码。如果`__STDC_ISO_10646__`已定义，则 wchar_t 的值直接表示在所有语言环境中具有相同值的 Unicode 代码点。这样就可以安全地进行前面提到的跨语言环境转换。但是，您不能仅依靠它来决定可以以这种方式使用 wchar_t，因为尽管大多数 unix 平台都定义了它，但即使 Windows 在所有语言环境中使用相同的 wchar_t 语言环境，Windows 也不会。

Windows 没有定义的原因`__STDC_ISO_10646__`是因为 Windows 使用 UTF-16 作为其 wchar_t 编码，并且因为 UTF-16 使用代理对来表示大于 U+FFFF 的代码点，这意味着 UTF-16 不满足`__STDC_ISO_10646__`.

对于特定于平台的代码 wchar_t 可能更有用。它在 Windows 上本质上是必需的（例如，某些文件根本无法在不使用 wchar_t 文件名的情况下打开），尽管据我所知，Windows 是唯一正确的平台（所以也许我们可以将 wchar_t 视为“Windows_char_t”）。

事后看来， wchar_t 显然对于简化文本处理或作为与区域设置无关的文本的存储没有用。可移植代码不应尝试将其用于这些目的。非可移植代码可能会发现它很有用，因为某些 API 需要它。

### 备择方案

我喜欢的替代方法是使用 UTF-8 编码的 C 字符串，即使在对 UTF-8 不是特别友好的平台上也是如此。

通过这种方式，人们可以使用跨平台的通用文本表示来编写可移植代码，将标准数据类型用于预期目的，获得语言对这些类型的支持（例如字符串文字，尽管需要一些技巧才能使其适用于某些编译器），一些标准库支持，调试器支持（可能需要更多技巧）等。对于宽字符，通常更难或不可能获得所有这些，并且您可能会在不同平台上获得不同的部分。

UTF-8 不提供的一件事是能够使用简单的文本算法，例如 ASCII 可能。在这种情况下，UTF-8 并不比任何其他 Unicode 编码差。事实上，它可能被认为更好，因为 UTF-8 中的多代码单元表示更为常见，因此与尝试坚持使用 UTF 相比，处理这种可变宽度字符表示的代码中的错误更容易被注意到和修复-32 带 NFC 或 NFKC。

许多平台使用 UTF-8 作为其原生字符编码，并且许多程序不需要任何重要的文本处理，因此在这些平台上编写国际化程序与不考虑国际化编写代码几乎没有区别。编写更广泛可移植的代码，或在其他平台上编写需要在使用其他编码的 API 的边界处插入转换。

某些软件使用的另一种替代方法是选择跨平台表示，例如保存 UTF-16 数据的无符号短数组，然后提供所有库支持并简单地承受语言支持的成本等。

C++11 添加了新类型的宽字符作为 wchar_t、char16_t 和 char32_t 的替代品，并具有伴随的语言/库功能。这些实际上并不能保证是 UTF-16 和 UTF-32，但我不认为任何主要的实现会使用其他任何东西。C++11 还改进了对 UTF-8 的支持，例如使用 UTF-8 字符串文字，因此没有必要欺骗 VC++ 生成 UTF-8 编码的字符串（尽管我可能会继续这样做而不是使用`u8`前缀） .

### 避免的替代方案

TCHAR：TCHAR 用于将采用传统编码的古老 Windows 程序从 char 迁移到 wchar_t，除非您的程序是在上个千年编写的，否则最好忘记它。它不是可移植的，并且在其编码甚至数据类型方面本质上是不确定的，这使得它无法与任何基于非 TCHAR 的 API 一起使用。由于它的目的是迁移到 wchar_t，我们在上面已经看到这不是一个好主意，所以使用 TCHAR 没有任何价值。

* * *

*[1\. 可以在 wchar_t 字符串中表示但在任何语言环境中不受支持的字符不需要用单个 wchar_t 值表示。这意味着 wchar_t 可以对某些字符使用可变宽度编码，这显然违反了 wchar_t 的意图。尽管有争议的是 wchar_t 可以表示的字符足以说明语言环境“支持”该字符，但在这种情况下，可变宽度编码是不合法的，并且 Window 对 UTF-16 的使用不符合标准。]*

*[2\. Unicode 允许用多个代码点表示许多字符，这对简单的文本算法产生了与可变宽度编码相同的问题。即使严格维护组合规范化，某些字符仍然需要多个代码点。见：[http ://www.unicode.org/standard/where/](http://www.unicode.org/standard/where/)]*

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-25T21:52:32.737

wchar_t 没有任何“错误”。问题在于，早在 NT 3.x 时代，Microsoft 就认为 Unicode 很好（确实如此），并将 Unicode 实现为 16 位 wchar_t 字符。因此，90 年代中期的大多数 Microsoft 文献几乎等同于 Unicode == utf16 == wchar_t。

可悲的是，事实并非如此。在所有平台上，在所有情况下，“宽字符”*不一定是 2 个字节。*

这是我见过的关于“Unicode”的最好的入门书之一（独立于这个问题，独立于 C++）：我*强烈*推荐它：

*   [http://www.joelonsoftware.com/articles/Unicode.html](http://www.joelonsoftware.com/articles/Unicode.html)

老实说，我相信处理“8 位 ASCII”、“Win32 宽字符”和“wchar_t-in-general”的最佳方法就是接受“Windows 与众不同”……并相应地编码。

恕我直言...

PS：

我完全同意上面的jamesdlin：

> 在 Windows 上，您真的别无选择。它的内部 API 是为 UCS-2 设计的，这在当时是合理的，因为它在可变长度 UTF-8 和 UTF-16 编码标准化之前。但是现在他们支持 UTF-16，他们最终得到了两全其美的结果。

# jquery - 我如何复制 从一个选择列表，到另一个？

> ID：11107613
> 
> 赞同：2
> 
> 时间：2012-06-19T19:01:08.740
> 
> 标签：jquery, jquery-selectors, options

我正在尝试将`<options>`HTML 代码从一个选择列表复制到另一个。我已经测试了下面的脚本，但它不起作用。

我已经使用“警报”功能进行了测试，但它似乎只显示先前选项中的值。

有人可以推荐我应该使用什么吗？谢谢！

```
$("select[name='NHIndexNo" + tablecounter + "_" + rowCount + "'] option").each(function(){
   $("select[name='NHIndexNo" + tablecounter + "_" + (rowCount+1) + "'] option").appendto($(this).val());
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:05:16.693

**jQuery：**

```
$().ready(function() {  
     $('#add').click(function() {  
        return !$('#select1 option:selected').remove().appendTo('#select2');  
     });  
     $('#remove').click(function() {  
        return !$('#select2 option:selected').remove().appendTo('#select1');  
     });  
 }); 
```

**HTML：**

```
<div>  
  <select multiple id="select1">  
   <option value="1">Option 1</option>  
   <option value="2">Option 2</option>  
   <option value="3">Option 3</option>  
   <option value="4">Option 4</option>  
  </select>  
  <a href="#" id="add">add &gt;&gt;</a>  
</div>  
<div>  
  <select multiple id="select2"></select>  
  <a href="#" id="remove">&lt;&lt; remove</a>  
</div> 
```

**演示：http:** [//jsfiddle.net/LbPAq/1](http://jsfiddle.net/LbPAq/1)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T19:06:31.473

只需尝试 - [http://jsfiddle.net/zDFdX/](http://jsfiddle.net/zDFdX/)

```
 $("#stwo").html( $("#sone").html() ); 
```

HTML

```
 <select id="sone">
        <option value="1">1</option>
        <option value="2">2</option>
        <option value="3">3</option>
        <option value="4">4</option>
    </select>

    <select id="stwo">

    </select> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:03:54.217

```
$("select[name='NHIndexNo" + tablecounter + "_" + rowCount + "'] option").each(function(){
   $("select[name='NHIndexNo" + tablecounter + "_" + (rowCount+1) + "']").append($(this).clone());
}); 
```

你几乎是对的

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T19:05:49.723

在将元素附加到其他选择元素之前克隆元素：

```
$("select[name='NHIndexNo" + tablecounter + "_" + rowCount + "'] option")
 .clone() // <-- creates a copy of each selected element
 .appendTo("select[name='NHIndexNo" + tablecounter + "_" + (rowCount+1) + "']"); 
```

由于您没有提供任何上下文信息或标记，我假设选择器是正确的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T19:06:20.657

在没有看到您的 HTML 的情况下，我只能*猜测*您的选择器工作正常，我建议：

```
$("select[name='NHIndexNo" + tablecounter + "_" + (rowCount+1) + "'] option").clone(true).appendTo($(this).val()); 
```

这个想法是您克隆元素（匹配选择器），然后将*克隆*附加到另一个`select`元素。

另请注意，我已将`true`（`withDataAndEvents`参数）传递给`clone()`方法；这是使用 jQuery 复制分配给这些元素的数据和事件。如果您不关心被克隆的那些，请忽略此参数。

参考：

*   [`clone()`](http://api.jquery.com/clone/).

# macos - 将文件夹添加到环境变量

> ID：11107615
> 
> 赞同：0
> 
> 时间：2012-06-19T19:01:09.197
> 
> 标签：macos, zend-framework, osx-lion, environment-variables

目前我正在尝试安装 Zend 框架。该框架带有一个命令行工具，`zf.sh`适用于 *nix 系统和`zf.bat`Windows 系统。要使用`zf.sh`，我尝试将其添加到我的环境路径中。不知何故，我无法让它工作。

我的`~/.profile`

```
export PATH=$PATH:/Applications/MAMP/bin/php/php5.3.6/bin/

export ZEND=/Applications/MAMP/bin/php/php5.3.6/bin/zf.sh

# 2012-06-05 make alias for zf
# Make an alias for the zf.sh so we can call it with zf instead of zf.sh
alias zf=/Applications/MAMP/bin/php/php5.3.6/bin/zf.sh

# Add the path to the Zend files so that the zf.sh can work with them
ZEND_TOOL_INCLUDE_PATH=/Applications/MAMP/bin/php/php5.3.6/lib/php/Zend 
```

我的`/etc/paths`

```
/usr/bin
/bin
/usr/sbin
/sbin
/usr/local/bin
~/Development/play-2.0
/Applications/Racket\ v5.2/bin/
/Applications/MAMP/bin/php/php5.3.6/bin/ 
```

但是当我这样做时`echo $PATH`

```
/usr/bin /bin /usr/sbin /sbin /usr/local/bin /usr/X11R6/bin 
```

或者`zf`

```
fish: Unknown command 'zf' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:57:09.713

添加`alias zf='/var/www/zf1_trunk/bin/zf.sh'`到`.bash_profile`应该让您访问 zf 命令行

```
at ~/.bash_profile
alias zf='/var/www/zf1_trunk/bin/zf.sh' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-16T03:51:05.213

如果您在 MAC OS X 中使用 MAMP

1.  打开终端
2.  在终端类型“vi .bash_profile”
3.  在编辑器中输入该行

别名 zf='/Applications/MAMP/bin/php/php5.3.6/bin/zf.sh'

更改位置符合。到您的软件安装

1.  出口终端
2.  打开终端，然后输入 zf

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:04:39.410

通常，OSX 上的 bash 使用 .bash_profile，而不是 .profile...查看它是否正确获取它。

# objective-c - 如何比较两个 CGSize 变量？

> ID：11107617
> 
> 赞同：35
> 
> 时间：2012-06-19T19:01:16.183
> 
> 标签：objective-c, cocoa-touch, core-graphics

我想确保 a`CGSize`小于或等于 another `CGSize`。像：

```
CGSize firstSize = CGSizeMake(1.0,1.0);
CGSize secondSize = CGSizeMake(5.0,3.0);
if(firstSize <= secondSize){
    Do Stuff . . .
} 
```

我将如何比较这个？

* * *

## 回答 #1

> 赞同：118
> 
> 时间：2012-12-05T13:35:04.443

要检查是否相等，您可以使用[Apple的](https://developer.apple.com/library/mac/#documentation/graphicsimaging/reference/CGGeometry/Reference/reference.html)**CGSizeEqualToSize**函数。

```
CGSize firstSize = CGSizeMake(1.0,1.0);
CGSize secondSize = CGSizeMake(5.0,3.0);

if(CGSizeEqualToSize(firstSize, secondSize)) {
    //they are equal
}else{
    //they aren't equal
} 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-06-19T19:05:37.090

确定是否`firstSize`适合`secondSize`不旋转：

```
if(firstSize.width <= secondSize.width && firstSize.height <= secondSize.height) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-12-03T08:38:08.257

以下函数确定第一个参数中 CGSize 的矩形是否完全适合第二个参数中 CGSize 的矩形范围内或范围内。

```
- (BOOL)size:(CGSize)smallerSize isSmallerThanOrEqualToSize:(CGSize)largerSize {

    return CGRectContainsRect(
        CGRectMake(0.0f, 0.0f, largerSize.width, largerSize.height),
        CGRectMake(0.0f, 0.0f, smallerSize.width, smallerSize.height)
    );
} 
```

与其用难以阅读的条件语句自己编写完整的逻辑，您可以使用名称具有描述性的内置内联辅助函数。

虽然我还没有进行研究，但这种方法的执行速度可能比公认的答案慢，因为它涉及将两个 CGSize 转换为两个 CGRects C 结构。虽然它确实具有读者更快理解的优点。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2019-03-06T10:21:03.333

这是使用运算符重载的好例子。

按面积比较（即一个`CGSize`比另一个大）：

```
func <=(left: CGSize, right: CGSize) -> Bool {
    return (left.width * left.height) <= (right.width * right.height)
} 
```

或者，按尺寸进行比较（即一个是否`CGSize`适合另一个）：

```
func <=(left: CGSize, right: CGSize) -> Bool {
    return (left.width <= right.width) && (left.height <= right.height)
} 
```

显然，您不能在项目中全局包含这两个版本，因此为了安全起见，您可能需要考虑将函数`private`添加到当前文件中。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-06-19T19:35:10.817

```
if(firstSize.width <= secondSize.width && firstSize.height <= secondSize.height &&
    firstSize.width*firstSize.height < secondSize.width*secondSize.height) 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-01-20T22:43:21.097

Swift **4.0**在`CGSize`. 正如 OP 所说，这假设您关心的是尺寸而不是面积。

```
import UIKit

extension CGSize {
    func isGreaterOrEqual(to size: CGSize) -> Bool {
        return width >= size.width &&
            height >= size.height
    }
} 
```

然后，您可以使用以下值对其进行测试：

```
let size = CGSize(width: 100, height: 100)
let smaller = CGSize(width: 80, height: 80)
let bigger = CGSize(width: 120, height: 120)

let small = size.isGreaterOrEqual(to: smaller) // true
let big = size.isGreaterOrEqual(to: bigger) // false
let same = size.isGreaterOrEqual(to: size) // true 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-02-17T19:02:10.683

受[乔纳森](https://stackoverflow.com/a/55020714/1836420)回答的启发。它应该更安全，因为有时值可以这样`667.0000000000001`。

```
extension CGSize {
    static func <= (left: CGSize, right: CGSize) -> Bool {
        let delta = 0.001
        return (left.width - right.width) < delta && (left.height - right.height) < delta
    }
} 
```

# c++ - 未调用虚拟方法

> ID：11107626
> 
> 赞同：5
> 
> 时间：2012-06-19T19:02:14.373
> 
> 标签：c++, class, inheritance, virtual

我有一个名为 Panel 的基类，其中存储了有关窗口的一些信息，然后，我有所有控件的子类：按钮、标签等。在基类中，我有在构造函数`virtual void ApplySchemeSettings(Scheme* scheme) { }`中调用的方法。`Panel(Panel* parent)`但不是子类，而是`ApplySchemeSettings`来自基类 ( `Panel`) 的调用。

```
class Panel
{
    [...]

public:
    virtual void ApplySchemeSettings(Scheme* scheme) { };

    Panel(Panel* parent)
    {
        [...]

        this->ApplySchemeSettings(scheme());
    };
}

class Frame : public Panel
{
    [...]

public:
    void ApplySchemeSettings(Scheme* scheme)
    {
        this->border = scheme->GetBorder("FrameBorder");
    }
} 
```

我不能声明`ApplySchemeSettings`为抽象，因为子类是由用户创建的。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T19:07:10.017

在构造函数内部，虚函数的行为并不像您预期​​的那样。特别是，在构造函数中对虚函数的任何调用都将始终解析对当前类中声明的函数版本的调用。原因是在对象构造过程中，首先构造一个基类，然后构造它的子类，然后构造它的子类，等等。因此，在对象构造过程中，派生类直到基类才被初始化。类构造函数完成运行。如果您能够调用虚函数并将其解析为基类构造函数内的最派生版本，那么您将调用一个尚未初始化的类的方法 - 甚至不是默认值数据成员的构造函数会被调用。

您将需要找到其他方法来解决此问题。例如，您可能有一个两步构造，其中`init()`在调用构造函数之后调用某个方法。但是，没有办法安全地从构造函数调用最派生版本的虚函数。

希望这可以帮助！

# foxpro - VFP 9.0 将状态窗口写入文件

> ID：11107628
> 
> 赞同：0
> 
> 时间：2012-06-19T19:02:15.230
> 
> 标签：foxpro, visual-foxpro

是否可以在 VisualFoxPro 9 中写出状态窗口？不是在谈论命令窗口，而是在使用时生成文本的程序的基本窗口：

```
? "SomeTextHere" 
```

![在此处输入图像描述](../Images/0fc2ee84fb9308724bb2565220279795.png)

我希望能够将所有文本写入 txt 文件。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:41:56.963

我认为没有任何方法可以将已经存在的内容作为文本捕获。（当然，您可以使用像 SnagIt 这样的实用程序来捕获图像。）

要在生成时捕获输出，请尝试 SET PRINT。

添马舰

# javascript - javascript RegExp 单词边界问题

> ID：11107632
> 
> 赞同：2
> 
> 时间：2012-06-19T19:02:32.427
> 
> 标签：javascript, regex

这是我的代码：

```
var boo = new RegExp("\\Bis\\B","gi");
var result = boo.exec("this AisA stackoverflow");
document.write(result);​ 
```

结果是：“是”，但我希望函数 exec 使用非单词边界 \B 返回整个匹配项，即 AisA。我知道我可以使用诸如 .+is.+ 之类的模式来返回 AisA，但我想知道如何用非单词边界做同样的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:06:10.220

试试这个：

```
/.\Bis\B./ 
```

这将检查非边界，并将该字符与`.`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:05:39.990

这可能是你所追求的？

```
\S*\Bis\B\S* 
```

由于边界不匹配字符，但只检查一个条件，你必须使用其他东西来获取字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:11:52.103

字边界是所谓的零宽度匹配，这意味着它们匹配一个条件，而不是一个字符。例如，在正则表达式“\bw”中，“\b”测试在表达式中的位置之前或之后是否有一些空格。它不捕获任何东西。

如果要捕获单词字符，请尝试使用 \w。

见：[http ://www.regexguru.com/2008/04/watch-out-for-zero-length-matches/](http://www.regexguru.com/2008/04/watch-out-for-zero-length-matches/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T19:22:59.887

要匹配包含“is”的单词：

```
/\b\w*is\w*/gi 
```

最后一个 \b 不是必需的，因为它是 LA(\w*) 的一部分。

# mysql - 如何提高 MySQL 中嵌套 SELECT 语句的性能

> ID：11107633
> 
> 赞同：0
> 
> 时间：2012-06-19T19:02:32.330
> 
> 标签：mysql

我有以下性能非常差的 SQL 语句：

```
SELECT  
frmInstLastModifiedDate AS last_modified 
, frmInstID AS proj_id 
, frmInstIsApproved 
, frmInstStatus AS proj_sts 
, (CASE 
    WHEN frmInstCreator = 294  THEN 'M' 
    WHEN status = 'f'  THEN 'F' 
    WHEN (frmInstID IN (SELECT shr.frmInstID from tbl_frm_share as shr WHERE shr.shrMember = 294 AND shr.shrType = 'LIKE'  AND shr.frmID = inst.frmID)) THEN 'L' 
    WHEN (frmInstID IN (SELECT shr.frmInstID from tbl_frm_share as shr WHERE shr.shrMember = 294 AND shr.shrType = 'SHARE' AND shr.frmID = inst.frmID)) THEN 'S' 
    ELSE 'O' END) as proj_grp 
, (SELECT lkpCode FROM tbl_frm_lookup WHERE lkpID = (SELECT ansValue FROM tbl_itm_answer WHERE frmInstID = proj_id AND itmID = (select itmID from tbl_frm_item where itmName = 'prjStatus' AND frmID = inst.frmID))) as prjStatus 
, (SELECT lkpCode FROM tbl_frm_lookup WHERE lkpID = (SELECT ansValue FROM tbl_itm_answer WHERE frmInstID = proj_id AND itmID = (select itmID from tbl_frm_item where itmName = 'ProjectType' AND frmID = inst.frmID))) as ProjectType 
, (SELECT itmID FROM tbl_itm_answer where itmID in (828,829,830,831) and frmInstID = proj_id AND SUBSTRING(ansValue,1,2) = 'on') as primIRWMObj 
, (SELECT lkpCode FROM tbl_frm_lookup WHERE lkpID = (SELECT ansValue FROM tbl_itm_answer WHERE frmInstID = proj_id AND itmID = (select itmID from tbl_frm_item where itmName = 'PrjPSubReg'))) as ProjectSubReg 
, frmInstCreator AS proj_creatorID 
, frmInstCode AS proj_code 
    FROM tbl_frm_instance inst 
WHERE status not like 'd'   
HAVING (proj_sts like 'c' AND ('PROJECT PROPONENT' = 'ADMIN' or proj_creatorID = 294 )) 
    or (proj_sts like 'a') 
    or (proj_sts like 't' AND proj_creatorID = 294)  
    OR (proj_grp = 'S')  
ORDER BY frmInstCreateDate DESC ; 
```

该语句是根据用户选择的选项动态创建的。我知道嵌套的 select 语句（如下所示）是问题所在，但我不知道如何替换它

```
 (SELECT lkpCode FROM tbl_frm_lookup WHERE lkpID = (SELECT ansValue FROM tbl_itm_answer WHERE frmInstID = proj_id AND itmID = (select itmID from tbl_frm_item where itmName = 'prjStatus' AND frmID = inst.frmID))) as prjStatus 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:08:02.673

不要使用`nested selects`，它最慢，而且数据库写得很脏。最好的方法是使用`JOIN`，`JOIN`尽可能使用。

如果您想以`IS`良好的性能进行创作（这是您的作品，您的名字），那么您必须始终决定最有效、最快速、最安全的方法，它就是`JOIN`。

我建议你`JOIN`到处使用。

我建议您阅读[了解查询执行计划](http://dev.mysql.com/doc/refman/5.5/en/execution-plan-information.html)。

**注意：**您必须有时认为“像数据库”而不是“像过程”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:08:20.393

试试这个：：

我能做的最少::

```
SELECT  
frmInstLastModifiedDate AS last_modified 
, frmInstID AS proj_id 
, frmInstIsApproved 
, frmInstStatus AS proj_sts 
, (CASE 
    WHEN frmInstCreator = 294  THEN 'M' 
    WHEN status = 'f'  THEN 'F' 
    WHEN (frmInstID IN (SELECT shr.frmInstID from tbl_frm_share as shr WHERE shr.shrMember = 294 AND shr.shrType = 'LIKE'  AND shr.frmID = inst.frmID)) THEN 'L' 
    WHEN (frmInstID IN (SELECT shr.frmInstID from tbl_frm_share as shr WHERE shr.shrMember = 294 AND shr.shrType = 'SHARE' AND shr.frmID = inst.frmID)) THEN 'S' 
    ELSE 'O' END) as proj_grp 
, 
(SELECT lkpCode 
FROM tbl_frm_lookup tfl
inner join tbl_itm_answer tia on (tfl.lkpID= tia.ansValue)
inner join tbl_frm_item tfi on (tia.itmID= tfi.itmID)
 WHERE frmInstID = proj_id and itmName = 'prjStatus' AND frmID = inst.frmID) as prjStatus 
, frmInstCreator AS proj_creatorID 
, frmInstCode AS proj_code 
```

# android - Android：如何将图像稍微定位在视图之外

> ID：11107636
> 
> 赞同：3
> 
> 时间：2012-06-19T19:02:38.353
> 
> 标签：android, android-layout, android-view, android-image

我希望在我的 android 应用程序中将图像稍微定位在线性布局之外。如果我使用图像来解释可能会更容易。 ![解释我的问题的示例图片](../Images/8eabff1904a96c040b07dd2d5580c8e9.png)

在上图中，我试图展示将涉及的三个视图。

1.  灰色背景 - 线性布局。
2.  白色“页面” - 线性布局。
3.  红色“剪辑” - 我希望定位的图像。

正如您从图像中看到的那样，我的目标是将剪辑定位为“回形针”，首先是否可以在 android xml 中创建上述布局。如果有可能有人可以指出我正确的方向（最好是解释代码示例）。

先感谢您。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:13:16.003

当然，只需使用`FrameLayout`.

就像是：

```
<FrameLayout>
    <View android:id="@+id/paper" android:marginLeft="10dp"/>
    <View android:id="@+id/paperclip"/>
</FrameLayout> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:11:36.067

是的，这是可能的，一种可能的方法是将布局覆盖在另一个之上。我建议将您现有的`LinearLayout`放在 a`RelativeLayout`中，并将您的“回形针”放在`ImageView`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:11:02.837

您可以使用 FrameLayout 执行此操作，使用边距和填充来根据需要定位回形针。理解 FrameLayouts 的关键是理解你添加到一个锚点的每个视图都位于左上角。假设您想任意定位剪辑，您将不得不削减一些代码来处理任何可能的分辨率 - 否则，您可以简单地使用固定数量的 DIP 边距来根据需要定位。

[http://mobiforge.com/designing/story/understanding-user-interface-android-part-1-layouts](http://mobiforge.com/designing/story/understanding-user-interface-android-part-1-layouts)

# c# - 公开我之前创建的依赖属性

> ID：11107641
> 
> 赞同：0
> 
> 时间：2012-06-19T19:02:57.057
> 
> 标签：c#, wpf, user-controls, dependency-properties

我在 WPF 中工作，我正在创建一些 userControl，其中一些在其他内部。

在我的一个 userControls 背后的代码中，我创建了一个依赖属性，如下所示：（MyInnerControl.xaml.cs）

```
public static DependencyProperty MyDependencyProperty = DependencyProperty.Register(
        "MyProperty",
        typeof(Object),
        typeof(MyInnerControl));

public Object MyProperty
    {
        get
        {
            return (Object)GetValue(MyDependencyProperty );
        }
        set
        {
            SetValue(MyDependencyProperty , value);
        }
    }
...
... 
```

而且这个属性工作得很好，但是我尝试在另一个 userControl 中公开这个依赖项，如下所示：

在我的容器 userControl 后面的代码中：（MyContainerControl.xaml.cs）

```
 public static DependencyProperty MyExternalDependencyProperty = DependencyProperty.Register(
        "MyExternalProperty",
        typeof(Object),
        typeof(MyContainerControl));

public Object MyExternalProperty
    {
        get
        {
            return (Object)GetValue(MyExternalDependencyProperty );
        }
        set
        {
            SetValue(MyExternalDependencyProperty , value);
        }
    }
...
... 
```

在我的 XAML 中：（MyContainerControl.xaml）

```
<UserControl x:Class="MyControls.MyContainerControl" Name="this"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
         xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
         xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
         mc:Ignorable="d" 
         d:DesignHeight="329" d:DesignWidth="535" xmlns:my="clr-namespace:MyInnerControls">
<Grid>
    <my:MyInnerControl Margin="6,25,6,35" MyProperty="{Binding ElementName=this, Path=MyExternalProperty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
...
... 
```

最后，我将 MyContainerControl 添加到网格并绑定到我的 viewModel，如下所示：（AnotherContainer.xaml）

```
...
<MyContainerControl MyExternalProperty="{Binding MyExternalProperty}"/>
... 
```

**我的问题是我的 ExternalProperty 没有获取或设置任何值。我究竟做错了什么？**

澄清一下，我的 DataContext 设置正确。

希望有人可以帮助我，在此先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:56:57.317

在我看来，问题是由于您没有遵循依赖属性命名约定，即将您的依赖属性名称设置为`<ProperyName>Property`(eg `MyExternalProperty`) 并使用具有相同名称的 CLR 属性包装器，但省略了“属性”后缀（在本例中为`MyExternal`）。遵循此约定应该可以解决您的问题。

来自[MSDN - 依赖属性概述](http://msdn.microsoft.com/en-us/library/ms752914.aspx)：

> 属性的命名约定及其支持的 DependencyProperty 字段很重要。字段的名称始终是属性的名称，并附加后缀 Property。有关此约定及其原因的更多信息，请参阅自定义依赖属性。

**编辑：还有一些事情：**

1.  您的依赖属性注册是错误的：您正在传递`"MyProperty"`而不是`"MyDependency"`和`"MyExternalProperty"`而不是`"MyExternalDependency"`
2.  您应该避免将`this`其用作任何控件的名称，因为它是保留关键字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:59:32.933

您应该给您的 UserControl 一个 x:Name 并将该值用于 ElementName

```
<UserControl x:Class="MyControls.MyContainerControl" Name="this"
     xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
     xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
     xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
     xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
     mc:Ignorable="d" 
     x:Name="ThisUserControl"
     d:DesignHeight="329" d:DesignWidth="535" xmlns:my="clr-namespace:MyInnerControls">
<Grid>
    <my:MyInnerControl Margin="6,25,6,35" MyProperty="{Binding ElementName=ThisUserControl, Path=MyExternalProperty, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/> 
```

……

# android - 在android的第二列中使用edittext实现listview的最佳方法

> ID：11107642
> 
> 赞同：-1
> 
> 时间：2012-06-19T19:02:59.020
> 
> 标签：android, list, listview

我想在一列中制作一个带有项目名称的列表视图，并在第二列中编辑文本（为其数量）。

最好的方法是什么，列表视图或表格布局。

你怎么能用 listview 实现这样的东西，任何参考都将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:14:35.100

我建议您继续使用 ListView 并实现自定义适配器。在 tableLayout 的情况下，您将一次创建整个视图，但在 ListView 的情况下，仅创建可见的 listItem 并且当我们滚动时，其他 listItem 视图是通过重新使用早期的 listItem 视图创建的。

作为参考，您可以查看以下链接，该链接实现了具有 2 个 textViews 的自定义列表适配器，您可以使用 textView 和 EditText 对其进行修改：

[http://www.codeproject.com/Articles/183608/Android-Lists-ListActivity-and-ListView-II-Custom](http://www.codeproject.com/Articles/183608/Android-Lists-ListActivity-and-ListView-II-Custom)

# iphone - 在应用程序关闭的情况下显示 UIAlertView

> ID：11107649
> 
> 赞同：0
> 
> 时间：2012-06-19T19:03:58.100
> 
> 标签：iphone, ios, uialertview, show

我想知道如何在应用程序关闭的情况下显示消息。O 适用于 iphone 的 Groupon 应用程序使用已关闭的应用程序向我发送消息。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:02:00.383

正如 Nicolas 所说，它被称为推送通知。

如果您是这个领域的新手，这里有一个很棒的教程：

[http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-tutorial-part-12)

# android - SpeechRecognizer - 时间限制

> ID：11107659
> 
> 赞同：3
> 
> 时间：2012-06-19T19:05:03.653
> 
> 标签：android, speech-recognition, voice-recognition

我正在将[SppechRecognizer](http://developer.android.com/reference/android/speech/SpeechRecognizer.html)用于语音识别器应用程序。它工作正常。我的要求是我想在 1 秒或 2 秒后停止语音收听。如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-19T19:28:53.637

1 或 2 秒似乎不是很多时间，但如果你想设置时间限制，你可能不得不把它穿线。Android有一些默认的附加功能来设置语音输入的最小长度和用户停止说话后的最大数量，但没有设置语音输入的最大时间长度。

您最好的选择是线程某种计时器，例如[CountDownTimer](http://developer.android.com/reference/android/os/CountDownTimer.html)：

```
 yourSpeechListener.startListening(yourRecognizerIntent);
 new CountDownTimer(2000, 1000) {

     public void onTick(long millisUntilFinished) {
         //do nothing, just let it tick
     }

     public void onFinish() {
         yourSpeechListener.stopListening();
     }
  }.start(); 
```

我还鼓励您查看可用于[RecognizerIntent](http://developer.android.com/reference/android/speech/RecognizerIntent.html#EXTRA_SPEECH_INPUT_COMPLETE_SILENCE_LENGTH_MILLIS)的附加功能，看看是否有更适合您需求的东西。

# c++ - 无论如何，有没有根据 C++ 中的参数成员专门化模板？

> ID：11107660
> 
> 赞同：6
> 
> 时间：2012-06-19T19:05:06.260
> 
> 标签：c++, templates, template-specialization, template-meta-programming

反正有没有专门化这样的模板，只在 T 有成员函数时才应用专门化`hash`？（请注意，这只是我正在尝试做的一个示例。我知道对于每个具有`hash`在成员函数中自行检查它的函数的类来说，这会更有意义`operator==`，但我只想知道这种的事情是可能的。）

```
template <class T>
bool equals(const T &x, const T &y)
{
    return x == y;
}

template <class T> // somehow check if T has a member function 'hash'
bool equals<T>(const T &x, const T &y)
{
    return x.hash() == y.hash() && x == y;
} 
```

如果可能的话，我更喜欢 C++11 之前的解决方案。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-19T19:14:52.167

这是我自己的代码中的一个示例。正如您可能从其中一个结构名称中猜到的那样，这是基于[Substitution Failure is Not an Error](http://en.wikipedia.org/wiki/Substitution_failure_is_not_an_error)的原则。该结构`has_member_setOrigin`定义了两个版本的`test`. `U`如果没有会员，第一个不能满足`setOrigin`。由于这*不是模板替换中的错误*，因此它就像它不存在一样。因此，多态函数的解析顺序`test(...)`会找到优先级较低的函数。然后`value`由 的返回类型确定`test`。

接下来是使用模板的`callSetOrigin`（相当于你的）的两个定义。如果您检查，您会发现如果第一个模板参数为真，则定义，否则不是。这再次在其中一个定义中产生了替换错误，使得只有一个存在。`equals``enable_if``enable_if``enable_if<...>::type``callSetOrigin`

```
template <typename V>
struct has_member_setOrigin
{
    template <typename U, void (U::*)(const Location &)> struct SFINAE {};
    template <typename U> static char test(SFINAE<U, &U::setOrigin>*);
    template <typename U> static int test(...);
    static const bool value = sizeof(test<V>(0)) == sizeof(char);
};

template<typename V>
void callSetOrigin(typename enable_if <has_member_setOrigin<V>::value, V>::type &p, const Location &loc) const
{
    p.setOrigin(loc);
}

template<typename V>
void callSetOrigin(typename enable_if <!has_member_setOrigin<V>::value, V>::type &p, const Location &loc) const
{
} 
```

忘了我也提供了一个定义`enable_if`：

```
#ifndef __ENABLE_IF_
#define __ENABLE_IF_

template<bool _Cond, typename _Tp>
struct enable_if
{ };

template<typename _Tp>
struct enable_if<true, _Tp>
{ typedef _Tp type; };

#endif /* __ENABLE_IF_ */ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-01T19:16:49.590

一个 C++11 解决方案。只需修改返回类型，使其只有具有`.hash`. 此外，我们使用*逗号操作符*，这样，当编译器检查它是否可以计算`declval<T>.hash()`时，它实际上会忽略它并使用 的类型`true`，这当然`bool`是你想要的类型。

```
template <class T>
auto equals(const T &x, const T &y) -> decltype(declval<T>.hash(), true)
{
    return x.hash() == y.hash() && x == y;
} 
```

我相信这被称为 Expression SFINAE。

更多细节：

`decltype(X,Y)`与`decltype(Y)`（感谢逗号运算符）相同。这意味着我在这里的返回类型基本上是`decltype(true)`, 即`bool`, 如所希望的。那我为什么有`declval<T>.hash()`？这不就是浪费空间吗？

答案是测试`T`有`hash`方法。如果此测试失败，则返回类型的计算失败，因此该函数不会被视为有效重载，编译器将寻找其他地方。

最后，如果您以前没有见过，这是在未评估的上下文（例如）`declval`中创建类型对象的一种非常有用的方法。您可能很想编写来构造 a ，因此使用来调用。但如果没有默认构造函数，这将不起作用。解决了这个问题。`T``decltype``T()``T``T().hash()``hash``T``declval`

# sql - 在 postgresql 中具有分组的嵌套聚合函数

> ID：11107666
> 
> 赞同：11
> 
> 时间：2012-06-19T19:05:30.050
> 
> 标签：sql, postgresql, grouping, aggregate

我正在尝试使用嵌套聚合函数和分组来获得总和的平均值。我想做的是：

```
SELECT AVG(SUM(x) GROUP BY y) WHERE ... GROUP BY ...; 
```

也就是说，对于返回的每一行，我希望其中一个字段是总和的平均值，其中每个总和都超过 y 相同的行。

如果可能，我想避免子选择。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-06-19T19:08:58.657

你需要一个子查询：

```
select z, avg(sumval)
from (select y, z, sum(x) as sumval
      from t
      group by y, z
     ) t
group by z 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-10-13T12:33:42.567

您还可以为此使用[公用表表达式 (CTE)](https://www.postgresql.org/docs/current/queries-with.html)：

```
WITH tmp AS (
    SELECT y, z, sum(x) as sumval
    FROM t
    GROUP BY y, z
)
SELECT z, avg(sumval)
FROM tmp
GROUP BY z 
```

# datetime - VBscript 用于使用日期戳重命名文件名

> ID：11107674
> 
> 赞同：-1
> 
> 时间：2012-06-19T19:05:43.250
> 
> 标签：datetime, date, vbscript, batch-file

我需要让文件夹中的所有文件都附加今天的日期和时间戳，格式如下：filename_mmddyyyy.fileextension。有人可以请帮忙，或者可以使用 bat 脚本来完成。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T22:17:58.303

当然可以在批处理文件中完成:-)

```
@echo off
setlocal
set "timestamp="
for /f "skip=1" %%A in ('wmic os get localdatetime') do (
  if not defined timestamp set "timestamp=%%A"
)
for /f "eol=: delims=" %%F in ('dir /b /a-d myFolder\*') do (
  if "%%~fF" neq "%~f0" ren "%%F" "%%~nF_%timestamp:~4,4%%timestamp:~0,4%%%~xF
) 
```

必须注意确保批处理文件不会自行重命名 - 如果在运行时重命名，它将失败。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:38:24.877

请发布您的代码，不管它是坏的还是少的，它确实有帮助，FormatDateTime 考虑到您的当地人，我在欧洲的法兰德斯，所以我的系统添加了 _19062012.ext 但在您的系统上它应该是 _06192012.ext

```
set oFso = createobject("scripting.filesystemobject")
sDirectorypath = "c:\testing"
rename_files(sDirectorypath)

sub rename_files(folder)
  set oFolder = oFso.getfolder(folder)
  for each oFile in oFolder.files
    new_name = oFile & "_" & replace(FormatDateTime(now,2),"/","") & "." & oFso.GetExtensionName(oFile)
    wscript.echo "renaming " & oFile & " => " & new_name
    errResult = oFso.MoveFile(oFile, new_name)
  next
  for each oSubFolder in oFolder.subfolders
    rename_files(oSubFolder)
  next
end sub 
```

# jquery - Jplayer 分享按钮 - 从 URL 中提取参数

> ID：11107678
> 
> 赞同：0
> 
> 时间：2012-06-19T19:06:00.050
> 
> 标签：jquery, jplayer, url-parameters

我有一个带有播放列表的 jplayer，它从 xml 文件加载并转换为 json。我正在尝试添加一个共享按钮（只是一个中央按钮，而不是在播放列表中的每首歌曲上），虽然我已经成功创建了将标题添加到 URL 以进行共享的代码，但我不知道如何提取参数关闭 URL 以确保当用户点击该站点的链接时播放共享歌曲。我正在修改播放列表文件，特别是选择功能。我的网站是本地的，所以我不能分享链接，但我可以发布播放列表代码的修改部分。

感谢你给与我的帮助！！斯蒂芬

[链接到原始播放列表文件](https://github.com/happyworm/jPlayer/blob/master/add-on/jplayer.playlist.js)

修改选择功能：

```
 select: function(index) {
    $.urlParam = function(homily) {
            var results = new RegExp('[\\?&]' + homily + '=([^&#]*)').exec(window.location.href);
            return results[1] || 0;
            console.log($.urlParam('homily'));
        index = (index < 0) ? this.original.length + index : index; // Negative index relates to end of array.
        if(encodeURIComponent($.urlParam('homily')) === this.playlist[index].title) {
        this.current = this.playlist[index].title;
        $(this.cssSelector.jPlayer).jPlayer("setMedia", this.playlist[this.current]);
        } else if (0 <= index && index < this.playlist.length) {
            this.current = index;
            this._highlight(index);
            $(this.cssSelector.jPlayer).jPlayer("setMedia", this.playlist[this.current]);
        var downloadBtn=this.cssSelector.cssSelectorAncestor+' [class^="download_btn"]';
            $(downloadBtn).attr('href', encodeURIComponent(this.playlist[this.current].mp3));
            var shareBtn=this.cssSelector.cssSelectorAncestor+' [class^="share_btn"]';
            $(shareBtn).attr('href', "?homily=" + decodeURIComponent(this.playlist[this.current].title));

        } else {
            this.current = 0;           
    }
    }
    }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T19:28:12.800

如果我理解正确，您需要根据当前媒体生成一个 URL，并且您还想知道当前正在播放的媒体（如果播放的话）。正确的？

好吧，这里有一些想法：

*   JPlayerPlaylist 插件有一个内部属性`this.current`（这里和进一步`this`用于播放列表对象的上下文中），它将存储当前选择/播放的媒体的索引。要获取该对象，您将访问`this.playlist[this.current]`. 您已经在您提供的代码中按照这一行做了一些事情。

*   如果您想知道某个特定时间的玩家状态。最简单的方法是访问，如果播放器暂停`$("#your_jPlayer_Id").data("jPlayer").status.paused`，它将返回。`true`

*   我还将添加一些语句`play`和`pause`方法，例如将按钮设置`href`为`#`on pause 并将其恢复为`play`.

# python - Python excel总和列表

> ID：11107683
> 
> 赞同：0
> 
> 时间：2012-06-19T19:06:19.880
> 
> 标签：python, excel

我列出了以下问题：

```
 http://stackoverflow.com/questions/11005335/python-sum-excel-file 
```

我得到了很大的帮助，现在我正在尝试以相同的格式转换另一个列表，并且使用相同的代码出现以下错误。

```
Traceback (most recent call last):
  File "C:/Python27/test2", line 37, in <module>
    checkList(name, symbol, amount)
  File "C:/Python27/test2", line 22, in checkList
    newObject = Object(name, symbol, int(amount)) #Create a new object with new name, produce, and amount
ValueError: invalid literal for int() with base 10: '' 
```

我还想知道是否可以转换两个 excel 文件，然后将两者相互比较以查看差异？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:12:58.593

您看到此错误是因为在该行`newObject = Object(name, symbol, int(amount))`中，变量`amount`是一个空字符串。

这里有两种可能性，一种是表示无效数据并且您不应该创建一个新`Object`实例来添加到您的列表中，或者它是可以的`amount`，`''`您只是想给它一个默认值（可能`0`）。这是执行此操作的一种方法：

```
newObject = Object(name, produce, int(amount) if amount else 0) 
```

# c++ - 实施格雷厄姆扫描以找到凸包

> ID：11107687
> 
> 赞同：5
> 
> 时间：2012-06-19T19:06:35.383
> 
> 标签：c++, algorithm, qt, math, computational-geometry

我正在尝试用 C++ 实现[格雷厄姆扫描](http://en.wikipedia.org/wiki/Graham_scan#Pseudocode)，但它不起作用，我找不到原因。任何线索将不胜感激。经过一些尝试，我似乎总是有`m_M = 2`，2分是最高的y分，如果有帮助的话。

交叉产品以了解它是右转还是左转。

```
qreal Interpolation::ccw(QPointF pt1, QPointF pt2, QPointF pt3)
{
    return (pt2.x()-pt1.x())*(pt3.y()-pt1.y()) - (pt2.y()-pt1.y())*(pt3.x()-pt1.x());
} 
```

点积除以范数得到 ，`cos`因为排序的角度与排序的 相同`cos in [0, Pi]`。

```
qreal Interpolation::dp(QPointF pt1, QPointF pt2)
{
    return (pt2.x()-pt1.x())/qSqrt((pt2.x()-pt1.x())*(pt2.x()-pt1.x()) + (pt2.y()-pt1.y())*(pt2.y()-pt1.y()));
} 
```

主要功能：

```
void Interpolation::ConvexHull()
{
    QPointF points[m_N+1]; // My number of points
    QPointF pt_temp(m_pt[0]);
    qreal angle_temp(0);
    int k_temp(0); 
```

`points[1]`用较低的 y 点填充数组点：

```
 for (int i(1); i < m_N; ++i)
    {
        if (m_pt[i].y() < pt_temp.y())
        {
            points[i+1] = pt_temp;
            pt_temp = m_pt[i];
        }
        else
        {
            points[i+1] = m_pt[i];
        }
    }
    points[1] = pt_temp; 
```

按角度对点数组进行排序并执行`points[m_N] = points[0]`

```
 for (int i(2); i <= m_N; ++i)
    {
        pt_temp = points[i];
        angle_temp = dp(points[1], pt_temp);
        k_temp = i;
        for (int j(1); j <= m_N-i; ++j)
        {
            if (dp(points[1], points[i+j]) < angle_temp)
            {
                pt_temp = points[i+j];
                angle_temp = dp(points[1], points[i+j]);
                k_temp = i+j;
            }
        }
        points[k_temp] = points[i];
        points[i] = pt_temp;
    }
    points[0] = points[m_N]; 
```

执行 Graham 扫描

```
 m_M = 1; // Number of points on the convex hull.

    for (int i(2); i <= m_N; ++i)
    {
        while (ccw(points[m_M-1], points[m_M], points[i]) <= 0)
        {
            if (m_M > 1)
            {
                m_M -= 1;
            }
            else if (i == m_N)
            {
                break;
            }
            else
            {
                i += 1;
            }
        }
        m_M += 1;
        pt_temp = points[m_M];
        points[m_M] = points[i];
        points[i] = points[m_M];
    } 
```

保存点`m_convexHull`应该是船体上的点列表`ConvexHull[m_M]=[ConvexHull[0]`

```
 for (int i(0); i < m_M; ++i)
    {
        m_convexHull.push_back(points[i+1]);
    }
    m_convexHull.push_back(points[1]);
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-19T19:37:54.093

我发现了问题。它与句子有关：

> 点积除以范数得到 cos，因为对角度进行排序与​​ [0, Pi] 中的 cos 排序相同。

角度越低，cos就越高，所以我只需要更改这行代码：

```
 if (dp(points[1], points[i+j]) < angle_temp) 
```

到：

```
 if (dp(points[1], points[i+j]) > angle_temp) 
```

现在它完美地工作了！

# c# - 可以在 C# 中缩短数学引用吗？

> ID：11107688
> 
> 赞同：7
> 
> 时间：2012-06-19T19:06:43.637
> 
> 标签：c#, syntax, using, import

在 VB.NET 中，我可以通过导入 System.Math 并直接引用它的方法来使我的数学代码更简洁：

```
Imports System.Math
[...]
Return New Vector3(Sin(az) * Cos(el), Cos(az) * Cos(el), Sin(el)) 
```

但我不认为 C# 可以使用类来隐式访问它们的方法，所以我必须这样做：

```
using System;
[...]
return new Vector3(Math.Sin(az) * Math.Cos(el), Math.Cos(az) * Math.Cos(el), Math.Sin(el)); 
```

但这很丑；它需要自己的滚动条！有什么方法可以用 C# 编写一些看起来像我的 VB.NET 代码的东西吗？我可以为 Sin 和 Cos 编写本地包装器方法，但这不会降低性能（因为函数调用的开销）？而且，这将需要为我在使用它们的每个类中使用的每个数学函数编写包装函数；这也不是那么理想。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T19:07:59.597

您可以`System.Math`使用 using 指令提供别名：

```
using M = System.Math;

return new Vector3(M.Sin(az) * M.Cos(el), M.Cos(az) * M.Cos(el), M.Sin(el)); 
```

这是我得到的最好的。

> 我可以为 Sin 和 Cos 编写本地包装器方法，但这不会降低性能（因为函数调用的开销）？

你可以，那时你可以使用泛型和其他细节来使它更方便，但是你仍然会引用这样的库，除非所有的数学都发生在这个代码作为方法出现的同一个类中。

“来自开销的性能”的问题是用“对于标准应用程序来说如此简单的东西的额外堆栈帧”来回答的。如果您处于紧密循环中，那么是的，那将是一个问题。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-06-19T19:08:19.850

`using static`从 C# 6.0 开始，您可以通过添加声明来缩短数学引用：

```
using static System.Math; 
```

这允许您使用类型的静态成员，而`Math`无需使用类型名称对其进行限定：

```
public void Foo()
{
     var bar = Sin(8);
} 
```

没有办法“全局”执行此操作，因为目前根本无法全局应用 using 声明。

对于那些不使用 C# 6 的人

> 但这不会降低性能（因为函数调用的开销）？

我不会担心的。首先编写代码以使其*易于阅读*。我们可以用几种不同的方式编写方法。首先，只是添加空格：

```
return new Vector3(
    Math.Sin(az) * Math.Cos(el),
    Math.Cos(az) * Math.Cos(el),
    Math.Sin(el)
); 
```

你也可以把它放在一个辅助方法中。

[jcolebrand 的回答](https://stackoverflow.com/a/11107704/492405)是这样做也很好，但它需要在`using m = System.Math;`任何地方添加一个。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-19T19:09:31.247

你可以加

```
using M = System.Math; 
```

然后就做

```
return new Vector3(M.Sin(az) * M.Cos(el), M.Cos(az) * M.Cos(el), M.Sin(el)); 
```

但是....我没有看到真正的价值

事实上，我认为应该存储这些变量中的每一个，并用更好的名称来表示它们是什么。看着这个，我看不出在做什么。

```
var sinAz = Math.Sin(az); //Could these be named better?  Perhaps with words in the correct domain 
var cosAz = Math.Cos(az);
var sinEl = Math.Sin(el);
var cosEl = Math.Cos(el);

return new Vector3(sinAz * cosEl, cosAz * cosEl, sinEl); 
```

或者更好的是，Vector3实际调用的三个参数是什么？

```
var parm1 = Math.Sin(Az) * Math.Cos(El);  //What should parm1, parm2, parm3 be called?
var parm2 = Math.Cos(Az) * Math.Cos(El);
var parm3 = Math.Sin(Az);

return new Vector3(parm1, parm2, parm3); 
```

这将大大提高可读性，因为下一个人会更好地理解公式是什么。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-06-19T19:11:16.073

> 但这很丑；它需要自己的滚动条！

是的，在 Stack Overflow 上，它的宽度很短。你必须把它放在多行上：

```
return new Vector3(Math.Sin(az) * Math.Cos(el),
                   Math.Cos(az) * Math.Cos(el),
                   Math.Sin(el)); 
```

我个人认为*无论如何*这更具可读性，因为现在这三个不同的值更加清晰地区分了。空行是比逗号更清晰的分隔符，IMO。当你有几个足够相似的论点可能会一起丢失时，为了清楚起见，使用多行。

是的，如果您可以只编写等，在*某些方面*`Sin(az)`会很好- 但 C# 中没有任何东西可以让您这样做，所以我会坚持重新格式化代码以提高可读性。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2012-06-19T19:12:39.177

您可以创建一个将调用包装为扩展方法的类：

```
public static class MathExtensions {
    public static double Sin(this double value) {
        return Math.Sin(value);
    }
    public static double Cos(this double value) {
        return Math.Cos(value);
    }
}

return new Vector3(az.Sin() * el.Cos(), az.Cos() * el.Cos(), el.Sin()); 
```

编译器应该内联这些调用，以便性能不会真正不同。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T19:13:54.523

您也可以使用扩展方法，但结果会看起来更不自然（潜在的额外函数调用，也可能被内联）：

```
static double Sin(this double value) { return Math.Sin(value);} 
```

并使用：

```
return new Vector3(az.Sin() * el.Cos(),.... 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T19:09:39.577

您不能在 C# 中为方法定义别名，而只能为类定义别名。

# php - 使用未定义的常量 db_selected - 假定为 'db_selected

> ID：11107695
> 
> 赞同：0
> 
> 时间：2012-06-19T19:07:18.567
> 
> 标签：php, mysql

```
<?php
//connecting to server
$dbc = mysql_connect('localhost','root','');
if(!$dbc){
    die('Not Connected : '.mysql_error());
    }
//connecting to database
$db_selected = mysql_selectdb("kalhan",$dbc);
if(!db_selected){
    die('Cannot Connect'.mysql_error());
    }
//testing database
$query = "UPDATE userinformation SET username = 'i am not working properly' where name = 'kalhan'";
$result = mysql_query($query);
?> 
```

代码显示了上面提到的错误。我只是在编码的连接部分之后测试我的数据库......帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:07:57.287

您需要在 db_selected 前面添加一个美元符号

```
$db_selected = mysql_selectdb("kalhan",$dbc);

if(!db_selected){
//  ^-- No dollar sign 
```

错误消息告诉您 PHP 假设您打算加`db_selected`引号，因此您的条件`if (!'db_selected')`可能不是您想要的，因为该字符串每次都评估为 true。

# tcl - 期望：如何登录到打开的文件？

> ID：11107700
> 
> 赞同：1
> 
> 时间：2012-06-19T19:07:55.137
> 
> 标签：tcl, expect

我正在尝试将期望的输入/输出记录到打开的文件中。手册页说这可以用`-open`标志来完成`exp_log_file`。我不断收到使用错误：

```
84 > expect
expect1.1> set f [open xxx.txt w]
file7
expect1.2> exp_log_file -open $f
usage: log_file [-info] [-noappend] [[-a] file] [-[leave]open [open ...]]
    while executing
"exp_log_file -open $f"
expect1.3> 
```

我究竟做错了什么？

如果它有所作为，我在 Mac OSX Snow Leopard 上使用期望版本 5.44.1.11

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T20:06:10.177

所以经过一番折腾，似乎期望版本 5.44.1.11 中存在错误。不幸的是，这是 Mac OSX 10.8.0 (Snow Leopard) 上开箱即用的版本。

我已经从[http://sourceforge.net/projects/expect/files/](http://sourceforge.net/projects/expect/files/)编译了 5.45 版本。 这个版本按预期工作（双关语）。

# apache - 乘客无法生成网页

> ID：11107701
> 
> 赞同：0
> 
> 时间：2012-06-19T19:07:55.353
> 
> 标签：apache, ubuntu, installation, passenger, bundler

我真的一直在努力让我的网络服务器在我的计算机上运行。

我正在运行：ruby 1.9.3 rvm 1.14.2（稳定）gem 1.8.24

在带有 apache 和乘客的 ubuntu 服务器上。

我能够访问我的网页，但我不断收到此错误消息：

Ruby (Rack) 应用程序无法启动 应用程序需要的源文件丢失。

```
It is possible that you didn't upload your application files correctly. Please check whether all your application files are uploaded.
A required library may not installed. Please install all libraries that this application requires. 
```

有关错误的更多信息可能已写入应用程序的日志文件。请检查它以便分析问题。

错误消息：无法加载此类文件 -- bundler/setup 异常类：LoadError 应用程序根目录：/srv/ftp/otto 回溯：# 文件行位置 0 /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194 /lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb 36 在`require' 1 /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb 36 in`需要'2 /srv/ftp/otto/config/setup_load_paths.rb 15 在`' 3 /usr/share/ruby-rvm/rubies/ruby-1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb 36 in`需要'4 /usr/share/ruby-rvm/rubies/ruby -1.9.3-p194/lib/ruby/site_ruby/1.9.1/rubygems/custom_require.rb 36 在`require' 5 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/utils.rb 301 in`prepare_app_process' 6 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger- 3.0.13/lib/phusion_passenger/rack/application_spawner.rb 156 在`block in initialize_server' 7 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/utils.rb 572 in`report_app_init_status' 8 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/rack /application_spawner.rb 154 在`initialize_server' 9 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/abstract_server.rb 204 in`start_synchronously' 10 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/abstract_server.rb 180 在`start' 11 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/rack/application_spawner.rb 129 in`开始' 12 /usr/share/ruby-rvm /gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/spawn_manager.rb 253 在`block (2 levels) in spawn_rack_application' 13 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/abstract_server_collection.rb 132 in`lookup_or_add' 14 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/ gems/passenger-3.0.13/lib/phusion_passenger/spawn_manager.rb 246 在`block in spawn_rack_application' 15 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/abstract_server_collection.rb 82 in`块中同步'16前奏> 10：在`synchronize' 17 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/abstract_server_collection.rb 79 in`同步'18 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems /passenger-3.0.13/lib/phusion_passenger/spawn_manager.rb 244 在`spawn_rack_application' 19 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/spawn_manager.rb 137 in`spawn_application' 20 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/ spawn_manager.rb 275 在`handle_spawn_application' 21 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/abstract_server.rb 357 in`server_main_loop' 22 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/lib/phusion_passenger/abstract_server.rb 206 在`start_synchronously' 23 /usr/share/ruby-rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.13/helper-scripts/passenger-spawn-server 99 in`'

* * *

我尝试过：重新安装 rvm 和 ruby​​ 安装 bundler ...以及其他一些我不太了解的东西！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:22:47.817

我必须指定我在 apache2.conf 文件中所做的 GEM_HOME ......

我遵循了本指南：

[https://github.com/instructure/canvas-lms/issues/123](https://github.com/instructure/canvas-lms/issues/123)

# c++ - 带有 Valgrind 的 Sqlite3 SIGSEGV

> ID：11107703
> 
> 赞同：1
> 
> 时间：2012-06-19T19:07:57.580
> 
> 标签：c++, sqlite, valgrind

我刚开始使用 Valgrind 检查 C++ 应用程序的内存泄漏。但是每次程序尝试打开 Sqlite3 数据库时，它都会以 SIGSEGV 终止。在没有 Valgrind 的情况下运行时不会发生这种情况。

最简单的演示程序如下

```
int main (int argc, char** argv) {
    sqlite3 *db = 0;
    sqlite3_open("/tmp/mydb.sqlite", &db);
    return 0;
} 
```

Valgrind 报告：

```
==29227== Jump to the invalid address stated on the next line
==29227==    at 0x0: ???
==29227==    by 0x48C606: mallocWithAlarm (in /opt/local/lib/libsqlite3.0.8.6.dylib)
==29227==    by 0x477F71: sqlite3Malloc (in /opt/local/lib/libsqlite3.0.8.6.dylib)
==29227==    by 0x4BD7F5: pthreadMutexAlloc (in /opt/local/lib/libsqlite3.0.8.6.dylib)
==29227==    by 0x47740F: sqlite3_initialize (in /opt/local/lib/libsqlite3.0.8.6.dylib)
==29227==    by 0x48929D: openDatabase (in /opt/local/lib/libsqlite3.0.8.6.dylib)
==29227==    by 0x10014B507: main (in /usr/local/bin/outbound)
==29227==  Address 0x0 is not stack'd, malloc'd or (recently) free'd
==29227== 
==29227== 
==29227== Process terminating with default action of signal 11 (SIGSEGV)
==29227==  Bad permissions for mapped region at address 0x0
==29227==    at 0x0: ???
==29227==    by 0x48C606: mallocWithAlarm (in /opt/local/lib/libsqlite3.0.8.6.dylib)
==29227==    by 0x477F71: sqlite3Malloc (in /opt/local/lib/libsqlite3.0.8.6.dylib)
==29227==    by 0x4BD7F5: pthreadMutexAlloc (in /opt/local/lib/libsqlite3.0.8.6.dylib)
==29227==    by 0x47740F: sqlite3_initialize (in /opt/local/lib/libsqlite3.0.8.6.dylib)
==29227==    by 0x48929D: openDatabase (in /opt/local/lib/libsqlite3.0.8.6.dylib)
==29227==    by 0x10014B507: main (in /usr/local/bin/outbound) 
```

什么可能导致 Valgrind 出现这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-15T17:42:19.337

尝试使用传入 sqlite3 的单个 HEAP 对象。

```
sqlite3_config (SQLITE_CONFIG_HEAP, malloc (1024*1024), 1024*1024, 64); 
```

这会从 valgrind 满意的单个“malloc”分配 1 MB 数据，最小分配大小为 64 字节。

# ruby-on-rails - 单击“保存”按钮时，Haml 无序列表未呈现

> ID：11107705
> 
> 赞同：0
> 
> 时间：2012-06-19T19:07:59.783
> 
> 标签：ruby-on-rails, haml

请原谅我。我绝对是 Haml 和 Ruby on Rails 的初学者。无论如何，我有一个 Web 应用程序，在页面顶部，我正在跟踪页面上的各种元素。呈现该页面的代码如下：

```
 - if @item_collection.is_a?(Feature)
    = render 'edit_fields', :f => f
  - else
    = render 'fields', :f => f 
```

对于我的页面，将执行 else 子句。我的页面背后的代码是：

```
.field.large
  = f.label      :name, nil, 'data-help-id' => 'page_name'
  = f.text_field :name, disabled_if_unauthorized(@item_collection, :maxlength => 255, :title => "Edit Page")
  = f.error_message_on(:name, :css_class => 'error_message')
.field
  = f.label      :path, nil, 'data-help-id' => 'page_path'
  = f.text_field :path, disabled_if_unauthorized(@item_collection, { :maxlength => 255, :class => 'extra_margin', :title => "Edit Page" })
  = f.error_message_on(:path, :css_class => 'error_message')
.field.info
  = f.label      'Info'
  %ul.elements_count
    %li.elements_in_use{ :id => 'elements_in_use'}
    %li.unused_elements{ :id => 'unused_elements'}
    %li.undefined_elements{ :id => 'undefined_elements'} 
```

单击“保存”按钮时，无序列表（elements_count）消失。我知道这是因为我没有“f”。在那些元素面前。问题是，再一次，原谅我，因为我只是一个初学者，输入“f”。由于 %ul 和 %li 不是 Rails 字段帮助器，因此在列表元素前面将不起作用。有谁知道我可以做些什么来让这些列表元素不再消失？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:50:32.820

您是正确的，因为您不需要在非导轨表单助手前面使用“f”。

尝试了与您类似的设置，我看到无序列表显示（没有内容），如果您查看源代码，您会看到列表吗？也许一个 CSS 文件隐藏了项目符号？

# python - 使用 pywin32 从 Excel 工作表中读取和分析数据

> ID：11107716
> 
> 赞同：0
> 
> 时间：2012-06-19T19:08:40.833
> 
> 标签：python, excel, pywin32

我已经看过很多关于如何写入 excel 的示例，而我的程序需要从现有数据中读取。我需要通读一列并从中挑选出数字（该列是空单元格，数字以任意间隔排列），然后在我到达数据末尾时中断。我现在拥有的代码如下，其中 xlsht 是工作表名称，x 和 y 是单元格索引，地址是所有数字的列表。

```
while y < xlsht.UsedRange:
    if str(xlsht.Cells(x,y).Value).isdigit:
        address.append(xlsht.Cells(x,y).Value)
        y += 1
        continue
    else:
        y += 1
return address 
```

就目前而言，它在第 2 行崩溃。我尝试使用

```
if xlsht.Cells(x,y).Value not None: 
```

但这没有用。我不知道该怎么做。另外，我想验证使用

```
xlsht.UsedRange 
```

是检测工作表最后一行的正确方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:01:15.587

错误消息没有提供任何有用的线索可能是什么问题。

解决方案：穷人的调试器。打印所有和任何变量，以便您查看发生了什么：

```
print 'xlsht=',xlsht
print 'x=',x
print 'usedRange=',xlsht.UsedRange
while y < xlsht.UsedRange:
    print 'y=',y
    print 'cell=',xlsht.Cells(x,y)
    print 'value=',xlsht.Cells(x,y).Value
    if str(xlsht.Cells(x,y).Value).isdigit:
        address.append(xlsht.Cells(x,y).Value)
        y += 1
        continue
    else:
        y += 1
return address 
```

你明白了。如果您使用的是 Python 3.x，则需要`print('x=',repr(x))`

# java - Java 如何为构造函数中声明的对象和变量命名的对象分配内存？

> ID：11107718
> 
> 赞同：2
> 
> 时间：2012-06-19T19:08:48.727
> 
> 标签：java

使用 Java IO 流，我们经常将对象仅用作其他对象的构造函数。我对这个前景的记忆含义很感兴趣。例如，在这两个做同样事情的语句中，内存分配有何不同？

```
FileInputStream inputFile = new FileInputStream("filepath");
Scanner inStream = new Scanner(inputFile); 
```

和

```
Scanner inStream = new Scanner(new FileInputStream("filepath")); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:12:05.187

第一个将在当前堆栈帧中分配一个命名变量。在堆上，没有区别 - 或者不应该有，但只要遵守规则，VM当然可以自由地以某种方式优化代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:09:45.153

没有区别。两者都是一样的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:08:59.023

在第一个示例中，JVM 保留了 FileInputStream 的引用，而第二种方式 JVM 创建了一个未引用的对象，该对象在执行语句后准备好进行垃圾回收。

# user-interface - 在 Matlab 2012b 中，如何跳转到特定的代码单元？

> ID：11107720
> 
> 赞同：3
> 
> 时间：2012-06-19T19:09:00.593
> 
> 标签：user-interface, matlab

在 Matlab 2012b 中，Mathworks 从菜单和工具栏切换到了功能区。到目前为止我找不到的一件事是代码单元的下拉列表。这是它过去在 Matlab 2012a 中的样子：

![在此处输入图像描述](../Images/e268892f59613c25960374187116760f.png)

有谁知道它现在在哪里？不幸的是，关于这个主题的 Matlab 文档仍然涵盖 Matlab 2012a。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:37:09.673

在功能区的“编辑器”选项卡中，有一个“转到”下拉菜单，可让您导航部分（单元格标题）或子功能。

![在此处输入图像描述](../Images/0b924c23bb28da740f6f800ca6e35434.png)

当您单击“转到”下拉菜单时，您可以在蓝色标题栏中选择是否要导航部分（标记为“第 1 部分”等，或带有它们的单元格标题）或子功能。

![在此处输入图像描述](../Images/c7783f34e60617e63d71fd1232a90f73.png)

# android - Android 配套桌面应用程序

> ID：11107721
> 
> 赞同：-2
> 
> 时间：2012-06-19T19:09:06.723
> 
> 标签：android, windows, desktop

我想为我的应用程序创建一个配套的 Windows 桌面程序。一种将手机上的数据库与桌面应用程序同步并具有用于操作数据的 UI。

问题是，我从未构建过桌面程序，也不知道如何构建。我需要一些关于编程语言的方向（是 C++ 吗？）。该应用程序将读取/写入数据库并具有定制的 UI。任何指导将不胜感激。

编辑：出于行业安全原因，正在运行的计算机无法安装 Java 或任何其他第三方软件。它需要开箱即用，安装 exe 并且应该在任何 Windows 版本上运行。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:13:54.397

用 Java 来做……它和 Android 是同一种语言，你拥有构建桌面应用程序所需的一切，而且它独立于平台。对于图形界面，您可以使用 Swing / AWT。

编辑：如果你不能使用 Java，c++ 将是一种方法。但是您也可以尝试 C#，它非常接近 Java 并且“托管”（例如，您不必关心垃圾收集）。Visual basic 也是一种替代方案，但有些受限。看到 C# [C# 桌面应用程序的这个线程？](https://stackoverflow.com/questions/209069/c-sharp-desktop-applications)

如果应用程序对速度有严格要求，我只会使用 c++。像游戏或类似的东西。或者其他一些你似乎没有的特定的、特殊的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:39:01.640

Windows 的“本机”语言是 C/C++，但它不是最容易掌握的语言。对于有 Java 经验的人，我可以推荐 Visual Basic。它像 Java 一样被垃圾收集。语法是相当不同的。

请注意，VB.NET 和 VB 本身是相当不同的。前者需要 .NET 环境的副本。

您必须安装一个 DLL 才能运行 VB 程序 - VBRUNxxx.DLL，其中 xxx 是版本。所以它根本就没有运行时要求。如果这仍然是一个交易破坏者，那么使用 C++，并确保在构建设置中指定运行时的非 DLL 版本（对于 VB，这不是一个选项）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-27T21:28:24.767

经过研究并感谢您的回复，解决方案是使用 Visual C++ 和 MFC（Microsoft Foundation Class）构建它。这将创建一个没有环境依赖关系的本机应用程序（如 .NET 或 JRE）。它需要将 MFC dll 文件包含在程序中，但是，这不是问题，因为它可以嵌入到应用程序中。

仅供参考，我确实认为不建议将 MFC dll 苍蝇（静态链接）用于典型应用程序，但是，这是一个非常专业的程序。

# html - 为什么周围的 div 不影响内部内容？

> ID：11107722
> 
> 赞同：1
> 
> 时间：2012-06-19T19:09:08.580
> 
> 标签：html, css

我有这样的设置：http: [//jsfiddle.net/zzjSC/3/](http://jsfiddle.net/zzjSC/3/)我想知道为什么带有 1px 黑色边框的周围 div 不会影响内容。
我的主要目标是集中整个混乱，这是我试图做的`div`，但它似乎没有做任何事情。有什么干净的方法可以让它居中吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:15:05.973

当你`margin:0 auto;`在像 div 这样的块级元素上使用居中技巧时，你还必须给它一个宽度。顺便说一句，将您的边距从 更改`auto 0px`为`0 auto`。你拥有它的方式是给 top 和 bottom 一个 auto 的值，给 left 和 right 一个 0px 的值。

以下 CSS（您可能需要更改宽度）应该可以做到。

```
.right-align {
    margin: 0px auto;
    border: 1px solid black;
    position: relative;
    width: 1036px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:13:29.233

试穿`position: absolute;`_`.right-align`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:23:11.347

如果要将内部文本设置为中心位置，请在 .head 类中使用此代码：

```
text-align:center; 
```

如果您想将内部元素设置为中心位置，请设置它们`margin-right:auto;margin-left:auto;`

# jquery - 日期输入限制 iPad

> ID：11107726
> 
> 赞同：0
> 
> 时间：2012-06-19T19:09:36.570
> 
> 标签：jquery, ios, ipad, html, mobile-safari

所以我正在制作一个需要与 iPad 互动的**WEBAPP 。**应用程序中有一个日期输入字段。在桌面浏览器上，我使用的是 jQuery UI Datepicker，但对于 iOS，我真的很喜欢使用日期输入字段时本机弹出的“轮子”：![在此处输入图像描述](../Images/b52defd63d4ce78d249e7609c02aa1c7.png)

问题是限制范围。我可以通过 minDate / maxDate 选项轻松地使用 jQuery UI Datepicker 限制范围。并且 html5 日期输入字段“应该”像这样在本机内置此功能`<input type="date" min="2000-01-02" />`。但是，这对 iOS 轮子没有影响。有没有办法可以在 iOS 轮子中进行日期范围限制？

**这是怎么回事？没有一条评论？没有一个答案？必须有办法做到这一点！**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-13T03:52:46.190

这是官方不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-12T05:43:20.787

我只是在 Opera（但不适用于 Opera for mobile ）和 PlayBook 浏览器上测试和 min 和 max 工作。

Opera 上只有一个问题：今天按钮覆盖范围。

如果您真的想添加一个范围，您可以使用 jquery + date.js(http://datejs.googlecode.com/files/date.js) 并在您不使用 js datepicker 时添加警报

```
$("#bday").change(function(e){
  var d = Date.parse($(e.target).val());
  if ($(e.target).val().trim().length > 0 && d){
   if ($(e.target).attr("min") && d.compareTo(Date.parse($(e.target).attr("min")))== -1 ){
      alert("the date should greater than " +$(e.target).attr("min"));
      $(e.target).focus();
   }

   if ($(e.target).attr("max") && d.compareTo(Date.parse($(e.target).attr("max")))==1  ){
      alert("the date should greater than " + $(e.target).attr("max"));
      $(e.target).focus();
   }
 }
});​ 
```

小心我没有时间完全测试它

# iphone - 为什么弱 NSString 属性没有在 iOS 中发布？

> ID：11107729
> 
> 赞同：5
> 
> 时间：2012-06-19T19:09:46.573
> 
> 标签：iphone, objective-c, ios, automatic-ref-counting

我写了下面的示例代码来看看 ARC 是如何工作的

```
@property (nonatomic, weak) NSString *myString;
@property (nonatomic, weak) NSObject *myObj;
@end

@implementation ViewController
@synthesize myString = _myString;
@synthesize myObj = _myObj;
- (void) viewDidAppear:(BOOL)animated
{
    NSLog(@"Appearing Obj: !%@!",self.myObj);
    NSLog(@"Appearing String: !%@!",self.myString);
}

- (void)viewDidLoad
{
    self.myObj = [[NSObject alloc] init];
    self.myString = [[NSString alloc] init];
    NSLog(@"Loading Obj %@",self.myObj);
    NSLog(@"Loading String: !%@!",self.myString);
} 
```

然而令人惊讶的是，我得到了这些结果：

```
2012-06-19 15:08:22.516 TESTER[4041:f803] Loading Obj (null)
2012-06-19 15:08:22.517 TESTER[4041:f803] Loading String: !!
2012-06-19 15:08:22.533 TESTER[4041:f803] Appearing Obj: !(null)!
2012-06-19 15:08:22.535 TESTER[4041:f803] Appearing String: !! 
```

如您所见，Obj 已正确释放，但我的字符串（这也是一个弱属性）没有打印出 null...为什么不呢？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T20:12:43.237

`NSString`使用各种内部技巧来重用对象并避免不必要的分配和复制。它可以做到这一点，因为`NSString`实例是不可变的。在这种情况下，可能有一个共享实例来表示一个由 正在返回的空字符串`[[NSString alloc] init]`，并且这个共享实例将作为单例保留在其他地方。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-06-19T21:35:42.377

`[[NSString alloc] init]`总是返回**相同**的值。您可以自行检查。

```
NSString *string1 = [[NSString alloc] init];
NSString *string2 = [[NSString alloc] init];
NSString *string3 = [[NSString alloc] init];
NSLog(@"string1 = %p, string2 = %p, string3 = %p", string1, string2, string3) 
```

此代码返回三个相同的地址。就我而言，输出是：

```
string1 = 0x3e8dd74c, string2 = 0x3e8dd74c, string3 = 0x3e8dd74c 
```

这意味着`[[NSString alloc] init]`返回**Singleton**。单身人士通常不能被释放。

使用其他方法（如 ）创建字符串`initWithFormat:`会生成通常的“非单例”对象，通常**可以释放**，但有一些例外。

**进一步：** 查看源代码（汇编程序）：

```
-[NSPlaceholderString init]:
00040ea4        f64b009c        movw    r0, 0xb89c
00040ea8        f2c00016        movt    r0, 0x16
00040eac            4478        add     r0, pc
00040eae            4770        bx      lr 
```

它会是这样的（在objectiveC中）

```
-(id)init
{
    return SOME_CONSTANT_VALUE;
} 
```

可能是`kCFEmptyString`，但我不确定。

# jquery - struts-jquery div 在 http 响应完全加载之前不会重绘

> ID：11107731
> 
> 赞同：0
> 
> 时间：2012-06-19T19:10:00.940
> 
> 标签：jquery, performance, jsp, struts

我在页面上有一个 struts-jquery 标签，尤其是这个标签。

```
 <%@ taglib uri="/struts-jquery-tags" prefix="sj"%>
     ...
    <sj:div id="someId" href="%{myUrl}">..</sj:div> 
```

myUrl 返回大量数据。问题是，直到所有数据（html）都加载到浏览器（可能需要 10-20 秒）之前，sj:div 不显示任何内容，留下空白，这给用户留下了页面被卡住的印象。

但是，如果我只使用简单，它对用户来说看起来会更好——虽然页面仍在加载，但屏幕会立即更新，对于用户来说，页面加载速度很快。

所以。我该如何解决？我想使用 Struts jquery 标签，但没有这个烦人的“错误”。

# javascript - 仅限 Firefox/IE - 在元素 show() jquery 之后冻结的 gif 动画

> ID：11107734
> 
> 赞同：2
> 
> 时间：2012-06-19T19:10:22.160
> 
> 标签：javascript, jquery, animation, gif

我有一个隐藏 div 中有 gif 动画的页面。单击 div show()s 但动画卡在第一帧上。我尝试了一些修复，但似乎没有任何效果。我尝试在单击、重新聚焦等时动态插入图像，但无济于事。

要查看示例，请访问[http://staging.trulioo.com](http://staging.trulioo.com)并使用顶部的语言选择器选择不同的语言。应出现“翻译”一词和动画图像。除了 IE 和 Firefox (wtf?) 之外，动画在所有其他浏览器中都有效......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-25T23:42:20.337

我无法让这个工作尝试几种解决方案。我的最终解决方案是在 spin.js 中从 gif 动画切换到 JavaScript 解决方案。效果很好！！

[http://fgnass.github.com/spin.js/](http://fgnass.github.com/spin.js/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:47:11.983

尝试在构建 DOM 时最初显示元素。也许使用 css 将其移出页面，然后在需要时将其放回应有的位置。或者也许使用不透明度来隐藏它，无论哪种方式都确保元素在页面加载时显示。

来源 - [http://www.norio.be/blog/2008/09/animated-gif-not-working-internet-explorer](http://www.norio.be/blog/2008/09/animated-gif-not-working-internet-explorer)

# java - 如何在android中的gridview布局中添加页脚

> ID：11107736
> 
> 赞同：3
> 
> 时间：2012-06-19T19:10:35.933
> 
> 标签：java, android, footer, android-gridview

我需要在 android 中的 gridview 布局中添加某种页脚视图，没有我能找到的官方文档，而且我无法找到在我的谷歌搜索中真正有效的方法，有没有人取得任何成就像这样？我需要制作一个按钮来显示网格视图的底部，以便我可以在点击时添加更多照片，有点像下面来自 instagram 的示例，任何帮助都会大有帮助，谢谢！

![在此处输入图像描述](../Images/34a6fe22ecc03cd2941397a37ed84eb6.png)

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:layout_margin="5dp" >

    <ImageView
        android:id="@+id/profile_user_avatar"
        android:layout_width="48px"
        android:layout_height="48px"
        android:adjustViewBounds="true"
        android:layout_marginTop="5dp" />

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:orientation="vertical" 
        android:paddingLeft="5dp">

        <TextView
            android:id="@+id/profile_realname"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:gravity="left"
            android:textSize="20dp"
            android:textStyle="bold"
             />

        <TextView
            android:id="@+id/profile_username"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_marginBottom="2dp"
            android:gravity="left" />
    </LinearLayout>
</LinearLayout>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/tweets_stat"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_light"
            android:gravity="center"
            android:padding="10dp"
            android:textSize="20dp"
            android:textStyle="bold"
            android:textColor="#FFFFFF" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_dark"
            android:gravity="center"
            android:padding="10dp"
            android:text="Tweets"
            android:textSize="15dp"
            android:textStyle="bold"
            android:textColor="#FFFFFF" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/followers_stat"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_light"
            android:gravity="center"
            android:padding="10dp"
            android:textSize="20dp"
            android:textStyle="bold"
            android:textColor="#FFFFFF" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_dark"
            android:gravity="center"
            android:padding="10dp"
            android:text="Followers"
            android:textSize="15dp"
            android:textStyle="bold"
            android:textColor="#FFFFFF" />
    </LinearLayout>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_margin="5dp"
        android:layout_weight="1"
        android:orientation="vertical" >

        <TextView
            android:id="@+id/following_stat"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_light"
            android:gravity="center"
            android:padding="10dp"
            android:textSize="20dp"
            android:textStyle="bold"
            android:textColor="#FFFFFF" />

        <TextView
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:background="@color/button_color_dark"
            android:gravity="center"
            android:padding="10dp"
            android:text="Following"
            android:textSize="15dp"
            android:textStyle="bold"
            android:textColor="#FFFFFF" />
    </LinearLayout>
</LinearLayout>

<GridView
    android:id="@+id/gridView1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:columnWidth="90dp"
    android:gravity="center"
    android:horizontalSpacing="10dp"
    android:numColumns="auto_fit"
    android:stretchMode="columnWidth"
    android:verticalSpacing="10dp" >
</GridView>

<Button
    android:id="@+id/profile_button"
    style="@style/TextAppearance.Button"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginBottom="30dp"
    android:layout_marginTop="30dp"
    android:background="@drawable/button_background"
    android:text="Load more photos" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:14:17.023

您可以使用以下内容有效地添加页脚网格项目： [https ://github.com/commonsguy/cwac-endless](https://github.com/commonsguy/cwac-endless)

这看起来不像您需要的，它看起来更像是最后一个网格项目是一个按钮。

另一个选项是有一个相对布局，将按钮与屏幕底部对齐，最初它的可见性设置为消失，并且仅在用户点击页面末尾时设置为可见。这更像是一种破解/解决方法。

# asp.net-mvc-3 - 从区域重定向到不在区域中的控制器/视图

> ID：11107738
> 
> 赞同：0
> 
> 时间：2012-06-19T19:10:50.577
> 
> 标签：asp.net-mvc-3, asp.net-mvc-routing, asp.net-mvc-areas

我正在尝试将错误重定向从我的管理区域内部到我的错误视图，该视图在所有区域之外共享。

我在我的 Lobby 控制器上创建了一个名为 error 的方法：

```
 public ViewResult Error()
    {
         return View("Views/Shared/Error");
    } 
```

该视图存在于 Views/Shared 目录中，称为 Error。

从管理区域中的用户控制器，我正在尝试执行以下操作：

```
 return RedirectToAction("Error", "Lobby", new {area = ""}); 
```

但是，尽管我在路由值中有 area=""，但应用程序仍试图重定向到“/Admin/Lobby/Error”。当我尝试单步执行代码时，在上一行和浏览器中的 404 错误之间没有执行任何行。

我在这里想念什么？

编辑添加：实际上我的路线可能有问题。我尝试在登录后更改默认行为以定向到不在区域中的控制器，并且它会自动尝试将我发送到我的管理区域。

我要完成的工作：我希望将具有区域的路线解释为需要前往该区域，而没有区域的路线则使用默认值。目前我只有一个区域（管理员），但还会有更多。

这是我的路线：

```
routes.MapRoute("ErrorPage", "Error", new { controller="Error", action="Error"  },    new[] { "WebUI.Controllers" }); //Error Route

        routes.MapRoute(
            "", // Route name
            "Admin/{controller}/{action}/{id}", // URL with parameters
            new { area ="Admin", controller = "Client", action = "ManageClients", id = UrlParameter.Optional } // Parameter defaults
            , new[] { "WebUI.Areas.Admin.Controllers" } //prioritize admin
        );

        routes.MapRoute(
            "Default", // Route name
            "{controller}/{action}/{id}", // URL with parameters
            new { controller = "Lobby", action = "Index", id = UrlParameter.Optional } // Parameter defaults
            , new[] {"WebUI.Controllers"} //prioritize main
        ); 
```

IIRC 当我尝试使用没有“硬编码”“Admin”作为区域名称的路由时，路由引擎试图将没有区域的路由填充到区域路由中，导致控制器被误认为是区域和控制器的动作。

但是我怀疑它现在正在做的是以某种方式将“/ Admin”附加到我的所有路线！例如，应用程序在启动时首先进入帐户/登录（而不是在区域中）。当我将登录行为更改为：

```
 return RedirectToAction("Summary", "Logging"); 
```

它正在形成一个 url /Admin/Logging/Summary 而不是 /Logging/Summary。即使我手动将其更改为

```
 return RedirectToAction("Summary", "Logging", new {area=""}); 
```

它必须从路由中获取“默认”管理区域。但是，如果我从路由中删除默认区域，那么我的管理员链接将全部中断。

这是我的区域注册的样子：

```
 public override void RegisterArea(AreaRegistrationContext context)
    {
        context.MapRoute(
            "Admin_default",
            "Admin/{controller}/{action}/{id}",
            new { action = "Index", id = UrlParameter.Optional },
         new [] { "WebUI.Areas.Admin.Controllers" }
        );
    } 
```

所以我想我需要将我的问题重新表述为：如何配置区域和路线，以便区域内外的路线和链接正常运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T22:44:17.037

我最终通过修改 Phil Haack 的 AreaRouteHelper 扩展解决了这个问题：

```
public static class AreaRouteHelper
{
    public static void MapAreas(this RouteCollection routes, string url, string rootNamespace, string[] areas)
    {
        Array.ForEach(areas, area =>
        {
            Route route = new Route("{area}/" + url, new MvcRouteHandler());
            route.Constraints = new RouteValueDictionary(new { area });
            string areaNamespace = rootNamespace + ".Areas." + area + ".Controllers";
            route.DataTokens = new RouteValueDictionary(new { namespaces = new string[] { areaNamespace } });
            route.Defaults = new RouteValueDictionary(new { action = "Index", controller = "Landing", id = "" });
            routes.Add(route);
        });
    }

    public static void MapRootArea(this RouteCollection routes, string url, string rootNamespace, object defaults)
    {
        Route route = new Route(url, new MvcRouteHandler());
        route.DataTokens = new RouteValueDictionary(new { namespaces = new string[] { rootNamespace + ".Controllers" } });
        route.Defaults = new RouteValueDictionary(new { area = "", action = "Index", controller = "Lobby", id = "" });
        routes.Add(route);
    }
} 
```

（基本上我必须从默认的 RootArea 默认值中删除“root”一词，并将默认值更改为“Lobby”和“Landing”，这是我们的标准而不是 Home。当我将他的默认“root”留在那里时，它添加了“ root”到不起作用的文件夹结构）

然后我从我的 RegisterRoutes 中删除了后两条路由并替换为：

```
 routes.MapAreas("{controller}/{action}/{id}", "WebUI", new[] { "Admin", "Analysis" });

        routes.MapRootArea("{controller}/{action}/{id}",
            "WebUI",
            new { controller = "Lobby", action = "Index", id = "" }); 
```

此修复需要区域感知视图引擎。Haack 项目中的一个是一个 1.0 的 webform 视图引擎，我已经有一个区域感知剃须刀视图引擎，我从某个地方的另一篇文章中抓取了这个引擎，这个引擎可以工作。老实说，我不记得我在哪个帖子中找到它，或者我会直接链接到它以归功于作者。但这就是它的样子（如果这里有人知道是谁写的，我会很高兴地将它归于那个人）。请注意，这里的映射与*我的*项目相匹配，如果不进行一些调整，可能不会与其他任何人匹配！

```
 public class RazorAreaAwareViewEngine :RazorViewEngine
{
    private static readonly string[] EmptyLocations = { };

    public RazorAreaAwareViewEngine()
    {
        MasterLocationFormats = new string[]
                                    {
                                        "~/Views/{1}/{0}.master",
                                        "~/Views/Shared/{0}.master"
                                    };
        ViewLocationFormats = new string[]
                                  {
                                      "~/Areas/{2}/Views/{1}/{0}.cshtml",
                                      "~/Areas/{2}/Views/Shared/{0}.cshtml",
                                      "~/{2}/{0}.cshtml",
                                      "~/Views/{1}/{0}.cshtml",
                                      "~/Views/Shared/{0}.cshtml",
                                  };
        PartialViewLocationFormats = ViewLocationFormats;
    }
    public override ViewEngineResult FindView(ControllerContext controllerContext, string viewName,string masterName, bool useCache)
    {
        if (controllerContext == null)
        {
            throw new ArgumentNullException("controllerContext");
        }
        if (string.IsNullOrEmpty(viewName))
        {
            throw new ArgumentNullException(viewName,
                "Value cannot be null or empty.");
        }
        string area = GetArea(controllerContext);

        return FindAreaView(controllerContext, area, viewName,
            masterName, useCache);
    }

    public override ViewEngineResult FindPartialView(ControllerContext controllerContext, string partialViewName,bool useCache)
    {
        if (controllerContext == null)
        {
            throw new ArgumentNullException("controllerContext");
        }
        if (string.IsNullOrEmpty(partialViewName))
        {
            throw new ArgumentNullException(partialViewName,
                "Value cannot be null or empty.");
        }
        string area = GetArea(controllerContext);

        return FindAreaPartialView(controllerContext, area,
            partialViewName, useCache);
    }

    protected string GetArea(ControllerContext controllerContext)
    {
        object area = null;
        if (controllerContext.RouteData.DataTokens.ContainsKey("area"))
        {
            area = controllerContext.RouteData.DataTokens["area"];
        }
        if (area == null)
        {
            controllerContext.RouteData.Values.TryGetValue("area", out area);
        }
        if(area !=null)
        {
            return area.ToString();
        }
        return null;
    }

    protected virtual ViewEngineResult FindAreaView(ControllerContext controllerContext, string areaName, string viewName,string masterName, bool useCache)
    {
        string controllerName =
            controllerContext.RouteData.GetRequiredString("controller");
        string[] searchedViewPaths;
        string viewPath = GetPath(controllerContext, ViewLocationFormats,
            "ViewLocationFormats", viewName, controllerName, areaName, "View",
            useCache, out searchedViewPaths);
        string[] searchedMasterPaths;
        string masterPath = GetPath(controllerContext, MasterLocationFormats,
            "MasterLocationFormats", masterName, controllerName, areaName,
            "Master", useCache, out searchedMasterPaths);
        if (!string.IsNullOrEmpty(viewPath) &&
            (!string.IsNullOrEmpty(masterPath) ||
              string.IsNullOrEmpty(masterName)))
        {
            return new ViewEngineResult(CreateView(controllerContext, viewPath,
                masterPath), this);
        }
        return new ViewEngineResult(
            searchedViewPaths.Union<string>(searchedMasterPaths));
    }

    protected virtual ViewEngineResult FindAreaPartialView(ControllerContext controllerContext, string areaName,string viewName, bool useCache)
    {
        string controllerName =
            controllerContext.RouteData.GetRequiredString("controller");
        string[] searchedViewPaths;
        string partialViewPath = GetPath(controllerContext,
            ViewLocationFormats, "PartialViewLocationFormats", viewName,
            controllerName, areaName, "Partial", useCache,
            out searchedViewPaths);
        if (!string.IsNullOrEmpty(partialViewPath))
        {
            return new ViewEngineResult(CreatePartialView(controllerContext,
                partialViewPath), this);
        }
        return new ViewEngineResult(searchedViewPaths);
    }

    protected string CreateCacheKey(string prefix, string name,
        string controller, string area)
    {
        return string.Format(CultureInfo.InvariantCulture,
            ":ViewCacheEntry:{0}:{1}:{2}:{3}:{4}:",
            base.GetType().AssemblyQualifiedName,
            prefix, name, controller, area);
    }

    protected string GetPath(ControllerContext controllerContext,string[] locations, string locationsPropertyName, string name,
        string controllerName, string areaName, string cacheKeyPrefix,bool useCache, out string[] searchedLocations)
    {
        searchedLocations = EmptyLocations;
        if (string.IsNullOrEmpty(name))
        {
            return string.Empty;
        }
        if ((locations == null) || (locations.Length == 0))
        {
            throw new InvalidOperationException(string.Format("The property " +
                "'{0}' cannot be null or empty.", locationsPropertyName));
        }
        bool isSpecificPath = IsSpecificPath(name);
        string key = CreateCacheKey(cacheKeyPrefix, name,
            isSpecificPath ? string.Empty : controllerName,
            isSpecificPath ? string.Empty : areaName);
        if (useCache)
        {
            string viewLocation = ViewLocationCache.GetViewLocation(
                controllerContext.HttpContext, key);
            if (viewLocation != null)
            {
                return viewLocation;
            }
        }
        if (!isSpecificPath)
        {
            return GetPathFromGeneralName(controllerContext, locations, name,
                controllerName, areaName, key, ref searchedLocations);
        }
        return GetPathFromSpecificName(controllerContext, name, key,
            ref searchedLocations);
    }

    protected string GetPathFromGeneralName(ControllerContext controllerContext,string[] locations, string name, string controllerName,
        string areaName, string cacheKey, ref string[] searchedLocations)
    {
        string virtualPath = string.Empty;
        searchedLocations = new string[locations.Length];
        for (int i = 0; i < locations.Length; i++)
        {
            if (string.IsNullOrEmpty(areaName) && locations[i].Contains("{2}"))
            {
                continue;
            }
            string testPath = string.Format(CultureInfo.InvariantCulture,
                locations[i], name, controllerName, areaName);
            if (FileExists(controllerContext, testPath))
            {
                searchedLocations = EmptyLocations;
                virtualPath = testPath;
                ViewLocationCache.InsertViewLocation(
                    controllerContext.HttpContext, cacheKey, virtualPath);
                return virtualPath;
            }
            searchedLocations[i] = testPath;
        }
        return virtualPath;
    }

    protected string GetPathFromSpecificName(ControllerContext controllerContext, string name, string cacheKey,ref string[] searchedLocations)
    {
        string virtualPath = name;
        if (!FileExists(controllerContext, name))
        {
            virtualPath = string.Empty;
            searchedLocations = new string[] { name };
        }
        ViewLocationCache.InsertViewLocation(controllerContext.HttpContext,
            cacheKey, virtualPath);
        return virtualPath;
    }

    protected static bool IsSpecificPath(string name)
    {
        char ch = name[0];
        if (ch != '~')
        {
            return (ch == '/');
        }
        return true;
    }

} 
```

进行这些更改后，内部和外部区域的操作链接都已正确生成，我可以在内部和外部区域进行路由。

# xpages - 如何在 xpages 中显示 TM 字符？

> ID：11107739
> 
> 赞同：1
> 
> 时间：2012-06-19T19:10:54.780
> 
> 标签：xpages

如何在 xPages 中显示 tm 字符？我更喜欢它在标签内（带有其他文本），但在标签外也可以。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:25:05.267

我会去这个页面 [http://www.ascii.cl/htmlcodes.htm](http://www.ascii.cl/htmlcodes.htm)

复制 tm 符号（位于页面底部）并将其粘贴到标签文本中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:22:04.783

你的意思是*©*？

```
&#169; 
```

或*™*？

```
&#8482; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:22:49.353

这个答案可以帮助您朝着正确的方向前进：[如何在 XPage 中显示版权符号？](https://stackoverflow.com/questions/10694587/how-do-i-display-the-copyright-symbol-in-an-xpage)

商标 (tm) 是 8482，所以`&#8482;`应该可以。

# c# - 使用 WCF 服务引用部署应用程序时未找到端点

> ID：11107740
> 
> 赞同：0
> 
> 时间：2012-06-19T19:10:55.850
> 
> 标签：c#, asp.net-mvc-3, wcf

我有一个带有 WCF 服务参考的 MVC3 应用程序。当然，当我在我的本地主机上调试时，它运行良好。我将我的 MVC3 应用程序发布到我的测试 Web 服务器，在 IIS 中配置它，我可以正常进入主屏幕。我将我的 WCF 应用程序发布到同一个 Web 服务器，在 IIS 中进行设置，但是当我单击调用 WCF 服务中的方法的登录按钮时，我收到此错误：

```
 [EndpointNotFoundException: There was no endpoint listening at 
 http://localhost:56266/RQServices.svc that could accept the message. 
```

在 IIS 中，我有一个名为 NewPCloser 的站点，它指向 C:\NewPcloser，而在 IIS 中，WCF 应用程序已设置并指向 C:\NewPcloser\services。文件 RQServices.svc 位于此目录中。除了应用程序指向的位置外，一切都在 IIS 中设置为所有默认值。我不确定我还需要说什么或展示什么，但请告诉我，我会做的。

我的测试站点是 (htp for stackoverflow)htp://devdb/newpcloser。这些服务位于 htp://devdb/newpcloserservices。我应该指出这两个地方之一吗？

底线为什么我会收到此错误？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:17:07.860

打开你的`Web.Config`文件，看看你有什么端点配置。确保它与您获取服务的 URL 相同。

假设您的服务在您的服务器中的此 url 可用

```
http://www.yourserver.com/someservice/something.svc 
```

那么你`endpoint`应该看起来像这样

```
<endpoint address="http://www.yourserver.com/someservice/something.svc"  

      other configuration attributes....  /> 
```

如果您将它托管在同一台服务器上，您可能可以使用类似的东西来访问它`http://localhost/..` ，而不是 url 中的域名

# mysql - Coldfusion 数据库存储行为不可靠

> ID：11107741
> 
> 赞同：0
> 
> 时间：2012-06-19T19:11:00.317
> 
> 标签：mysql, coldfusion, cfquery

所以Coldfusion今天表现得很不稳定。我似乎无法更新数据库。

例如，如果我尝试查询：

```
<CFQUERY DATASOURCE="tr3" NAME="qryData2">
    SELECT *
    FROM UsersExpDataTR2
    WHERE session_id = 2 AND p1_id = 2 AND round = 3
</CFQUERY> 
```

qryData2.recordcount 等于 1。

但是当我尝试运行这段代码时

```
<CFQUERY DATASOURCE="tr3" NAME="uMatch">
    UPDATE UsersExpDataTR2
    SET p1_total = 13 AND p1_fine = 1
    WHERE session_id = 2 AND p1_id = 2 AND round = 3
</CFQUERY> 
```

p1_total 的值被更改为 0，并且 p1_fine 不会从其原始值更改。

我打算迟到重新启动服务器，但我希望我不必这样做，如果有人能告诉我这些奇怪的答案吗？

注意：在代码本身中，我使用变量来存储和查询 [显然]。我只是用数字作为测试。

更新：它们都是整数数据类型。尽管在另一种情况下我也遇到了双重值的问题。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-19T19:24:09.477

你的语法对我来说看起来很奇怪:)试试这个：

```
<CFQUERY DATASOURCE="tr3" NAME="uMatch">
    UPDATE UsersExpDataTR2
    SET p1_total = 13,
        p1_fine = 1
    WHERE session_id = 2 AND p1_id = 2 AND round = 3
</CFQUERY> 
```

祝你好运 1 我们都指望你。

# ios - 如何让 SoundCloud App 将内容提交到特定的 SoundCloud Dropbox？

> ID：11107744
> 
> 赞同：3
> 
> 时间：2012-06-19T19:11:05.200
> 
> 标签：ios, soundcloud

我在我的网站上安装了 SoundCloud 组录音机，但它不适用于 iPhone 或 iPad。我可以在页面上放置一个指向 iTunes 应用商店中 SoundCloud 应用的链接，然后让人们将他们录制的音频提交到特定的保管箱吗？

在这里查看：[1]： http: [//www.cbc.ca/q/redesign/2012/06/19/record-button-redesigning-project/index.html](http://www.cbc.ca/q/redesign/2012/06/19/record-button-redesigning-project/index.html)

# jquery - 文件上传在 Internet Explorer 中不起作用

> ID：11107745
> 
> 赞同：1
> 
> 时间：2012-06-19T19:11:06.597
> 
> 标签：jquery, django, internet-explorer-8

我有一个适用于 Firefox 和 Chrome 的表单，但不适用于 Internet Explorer 8。它有一些文本输入和一个文件输入：它是文件输入不起作用。

问题似乎是服务器根本没有获取文件。服务器抛出`MultiValueDictKeyError`，因为我的视图正在尝试查找其中包含文件的元素，并且它不存在于`request.FILES`.

我检查了 IE 开发人员工具，`input`当表单提交时，该元素正在保存文件。其他事情正在发生。

表单中有一个曲线球：我正在使用样式输入按钮，使用[此线程的帮助](https://stackoverflow.com/questions/572768/styling-an-input-type-file-button)

我的 HTML，加上一些内联 js：

```
<form action="{{ order.get_absolute_url }}load/" method="post" enctype="multipart/form-data" class="med order" id="order_form" name="order_form">
    <div class="card form_wrapper float_left">
        <h2 class="section_header">{{ order.order_number }} - Add Homeowners<span class="status_label">{{ order.get_current_status_display }}</span></h2>
        <table id="certified_one_off_table" class="residents">
            <thead>
                <tr>
                    <th>Owner Name<span class="ho_required_note">*</span></th>
                    <th>Co-owner Name</th>
                    <th>Account #<span class="ho_required_note">*</span></th>
                    <th>Address<span class="ho_required_note">*</span></th>
                    <th>Address, Continued</th>
                    <th>City, State Zip<span class="ho_required_note">*</span></th>
                    <th>Letter file<span class="ho_required_note">*</span></th>
                </tr>
            </thead>
            <tbody>
                <tr class="ho_load_row">
                    <td>
                        <input type="text" name="ho_owner-1" value="" class="ho_owner ho_load_field ho_required" />
                    </td>
                    <td>
                        <input type="text" name="ho_co_owner-1" value="" class="ho_co_owner ho_load_field" />
                    </td>
                    <td>
                        <input type="text" name="ho_account_id-1" value="" class="ho_account_id ho_load_field ho_required" />
                    </td>
                    <td>
                        <input type="text" name="ho_mailing_address-1" value="" class="ho_mailing_address ho_load_field ho_required" />
                    </td>
                    <td>
                        <input type="text" name="ho_mailing_address_contd-1" value="" class="ho_mailing_address ho_load_field" />
                    </td>                    
                    <td>
                        <input type="text" name="ho_mailing_csz-1" value="" class="ho_mailing_csz ho_load_field ho_required" />
                    </td>
                    <td id="upload_button_cell">
                        <div id="certified_upload_button" class="new_button" onclick="getFile(this)">Upload</div>
                        <div style='height: 0px;width: 0px; overflow:hidden;'><input id="id_ho_document-1" name="ho_document-1" type="file" class="ho_file ho_load_field ho_required" /></div>
                    </td>
                    <td id="validate_cell">
                        <img id="id_ho_document_valid-1" src="/public/img/cross.png" alt="Invalid or no document selected" />
                    </td>
                </tr>
                <tr>
                    <td colspan="6">
                        <a id="certified_add_ho" href="#">Add Another Homeowner &rarr;</a>
                    </td>
                </tr>
            </tbody>
            <tfoot>
            <tr>
                <td colspan="6">
                    <br />
                        <center><input type="submit" id="certified_one_off_button" class="new_button_disabled" value="Approve Order for these Homeowners" disabled="disabled" /></center>
                    <br />
                </td>
            </tr>
            </tfoot>
        </table>
    </div>
</form>
<script type="text/javascript">
function getFile(obj) { $(obj).siblings('div').children('input').click(); }
</script> 
```

视图代码片段：

```
if request.method == 'POST': 
    order_quantity = 0
    for row_number in xrange(1, len(request.POST)):
        if 'ho_owner-{0!s}'.format(row_number) not in request.POST:
            break

        document = request.FILES['ho_document-{0!s}'.format(row_number)] 
```

编辑：忘记了验证表单并启用提交按钮的js

```
$(document).ready(function() {
  function update_certified_one_off_button() {
    var invalid_fields = 0
    $('.ho_load_field.ho_required').each(function() {
        if ($(this).val() === '') {
            invalid_fields += 1;
            $(this).css('background-color', '#fff2f2');
        } else {
            $(this).css('background-color', '#ffffff');
        }
    });
    $('input[name^="ho_document-"]').each(function() {
      var ext = $(this).val().split('.').pop().toLowerCase();
      if($.inArray(ext, ['pdf']) == -1) {
          invalid_fields += 1;
      }         
    });

    var submit_button = $('#certified_one_off_button');
    if (invalid_fields > 0) {
        submit_button.addClass('new_button_disabled');
        submit_button.removeClass('new_button');
        submit_button.attr('disabled', 'disabled');
    } else {
        submit_button.addClass('new_button');
        submit_button.removeClass('new_button_disabled');
        submit_button.removeAttr('disabled');
    }
  }

  function certified_validate(event) {
    var old_name_full = $(event.target).attr('id').split('-');
    var old_name = old_name_full[0];
    var old_num = parseInt(old_name_full[1]);

    var icon = $("#id_ho_document_valid-" + String(old_num));     
    var ext = $(event.target).val().split('.').pop().toLowerCase();
    if($.inArray(ext, ['pdf']) == -1) {
      icon.attr('src', '/public/img/cross.png');
      alert('Only PDF format documents will be accepted.');
    } else {
      icon.attr('src', '/public/img/tick.png');
    }
  }

  $('#certified_add_ho').click(function(e) {
      e.preventDefault();

      var last_row = $('.ho_load_row').last();
      last_row.after('<tr class="ho_load_row">' + last_row.html() + '</tr>');

      var last_row_img = $('.ho_load_row').last().find('img');
      var old_name_full = last_row_img.attr('id').split('-');
      var old_name = old_name_full[0];
      var old_num = parseInt(old_name_full[1]);
      last_row_img.attr('id', old_name + '-' + String(old_num + 1));
      last_row_img.attr('src', '/public/img/cross.png');         

      var last_row_inputs = $('.ho_load_row').last().find('input');
      last_row_inputs.each(function() {
        $(this).val('').find('.default').attr('selected', 'selected');  

        old_name = $(this).attr('name').split('-')[0];
        $(this).attr('name', old_name + '-' + String(old_num + 1));

        var old_id = $(this).attr('id'); 
        if (old_id) {
          old_id = old_id.split('-')[0];
          $(this).attr('id', old_id + '-' + String(old_num + 1));
        }
      });

      $("#id_ho_document-" + String(old_num + 1)).change(certified_validate);

      $('.ho_load_field.ho_required').bind('change keyup', update_certified_one_off_button);
      update_certified_one_off_button();
  });

$('#order_form .ho_load_field').bind('change keyup', update_certified_one_off_button);
$("#id_ho_document-1").change(certified_validate);  
}); 
```

编辑 2：我设法使用 3rd 方工具捕获了我的 http 请求，看起来我的文件永远不会离开机器：

```
POST /order/ndVKUeCRT1/load/ HTTP/1.1
Accept: application/x-ms-application, image/jpeg, application/xaml+xml, image/gif, image/pjpeg, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-powerpoint, application/msword, application/x-shockwave-flash, */*
Referer: http://eiger.optimaloutsource.com:8088/order/ndVKUeCRT1/load/
Accept-Language: en-US
User-Agent: Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 6.1; WOW64; Trident/4.0; SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E)
Content-Type: multipart/form-data; boundary=---------------------------7dc1bd1f60702
Accept-Encoding: gzip, deflate
Host: eiger.optimaloutsource.com:8088
Content-Length: 899
Connection: Keep-Alive
Cache-Control: no-cache
Cookie: sessionid=0a37e24c25c4b7716249c50eb52b523a; __utma=133342874.1270580592.1320187097.1340128445.1340141010.4; __utmz=133342874.1340055122.2.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none); __utmb=133342874.2.10.1340141010; __utmc=133342874

-----------------------------7dc1bd1f60702
Content-Disposition: form-data; name="ho_owner-1"

phasetwenty
-----------------------------7dc1bd1f60702
Content-Disposition: form-data; name="ho_co_owner-1"

-----------------------------7dc1bd1f60702
Content-Disposition: form-data; name="ho_account_id-1"

account
-----------------------------7dc1bd1f60702
Content-Disposition: form-data; name="ho_mailing_address-1"

address
-----------------------------7dc1bd1f60702
Content-Disposition: form-data; name="ho_mailing_address_contd-1"

-----------------------------7dc1bd1f60702
Content-Disposition: form-data; name="ho_mailing_csz-1"

city, CA 90000
-----------------------------7dc1bd1f60702
Content-Disposition: form-data; name="ho_document-1"; filename=""
Content-Type: application/octet-stream

-----------------------------7dc1bd1f60702--

HTTP/1.1 500 INTERNAL SERVER ERROR
Date: Tue, 19 Jun 2012 21:25:31 GMT
Server: Apache/2.2.14 (Ubuntu)
Vary: Cookie
Connection: close
Content-Type: text/html; charset=utf-8 
```

如何让 IE 正确提交此表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:38:39.233

IE（所有版本，甚至 IE9）对文件输入的所有“非平凡”操作都非常敏感。在您的代码中，我看到您人为地触发了对该输入的点击（就是`function getFile(obj)`这样做的），但这在 IE 中是不允许的。

而是尝试使用以下技术：保持文件输入尺寸不变，但使其透明 - 并在其“下方”放置更美观的东西。[例如，这里](http://www.quirksmode.org/dom/inputfile.html)已经很好地描述了它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:31:38.273

您需要删除`disabled`提交按钮的属性，以便脚本能够单击它。或者，直接使用 JavaScript 提交表单`document.order_form.submit()`。

# xslt - XB60 在 XSL 上涉及很多。任何人都可以分享除 w3schools 之外的高级 XSL 教程的链接吗？

> ID：11107746
> 
> 赞同：1
> 
> 时间：2012-06-19T19:11:13.717
> 
> 标签：xslt, xslt-2.0, middleware, ibm-datapower

XB60 在 XSL 上涉及很多。任何人都可以分享除 w3schools 之外的高级 XSL 教程的链接吗？XB60 教程的链接也将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-27T08:48:48.743

万一你还在观望

[http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp?topic=/com.ibm.iea.wdatapower/wdatapower/1.0/xb62.html](http://publib.boulder.ibm.com/infocenter/ieduasst/v1r1m0/index.jsp?topic=/com.ibm.iea.wdatapower/wdatapower/1.0/xb62.html)

您会注意到，该链接中还提供了许多其他 IBM 产品的视频

确保将 developerworks 论坛添加为书签，以获取与基于 DataPower 的解决方案有关的所有问答

[http://ibm.sitecelerate.com/developerworks/forums/forum.jspa?forumID=1198](http://ibm.sitecelerate.com/developerworks/forums/forum.jspa?forumID=1198)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T02:34:35.670

**“高级 XSL 教程”是辛勤工作的成果，通常不能在 Internet 上免费获得。**

我强烈建议阅读一本好的 XSLT/XPath 书籍或此答案中描述的任何其他资源：

[https://stackoverflow.com/a/341589/36305](https://stackoverflow.com/a/341589/36305)

# python - 在 matplotlib 中显示毫秒

> ID：11107748
> 
> 赞同：13
> 
> 时间：2012-06-19T19:11:26.247
> 
> 标签：python, matplotlib

我正在使用 matplotlib 以 hh:mm:ss.ms 格式将数据绘制为时间函数，其中 ms 是毫秒。但是，我看不到图中的毫秒数。是否也可以添加它们？

```
dates = matplotlib.dates.datestr2num(x_values) # convert string dates to numbers
plt.plot_date(dates, y_values)  # doesn't show milliseconds 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-29T22:14:43.153

* * *

这里的问题是有一个类来格式化刻度，而 plot_date 将该类设置为您不想要的东西：一个从不绘制毫秒的自动格式化程序。

为了改变这一点，您需要从更改`matplotlib.dates.AutoDateFormatter`为您自己的格式化程序。使用格式字符串`matplotlib.dates.DateFormatter(fmt)`创建格式化程序。`datetime.strftime`我不知道如何让它显示毫秒，但它会显示微秒，我希望这对你有用；毕竟，这只是一个额外的零。试试这个代码：

```
dates = matplotlib.dates.datestr2num(x_values) # convert string dates to numbers
plt.plot_date(dates, y_values)  # doesn't show milliseconds by default.

# This changes the formatter.
plt.gca().xaxis.set_major_formatter(matplotlib.dates.DateFormatter("%H:%M:%S.%f"))

# Redraw the plot.
plt.draw() 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-07-10T13:00:50.183

FWIW，我遇到了这个问题并做了一个解决方法，我从我的包的 util 模块导入。微秒的精度太高了，只是秒太少了——现在我可以选择我需要的精度（默认毫秒）：

```
import matplotlib.ticker as ticker

class PrecisionDateFormatter(ticker.Formatter):
    """
    Extend the `matplotlib.ticker.Formatter` class to allow for millisecond
    precision when formatting a tick (in days since the epoch) with a
    `~datetime.datetime.strftime` format string.

    """

    def __init__(self, fmt, precision=3, tz=None):
        """
        Parameters
        ----------
        fmt : str
            `~datetime.datetime.strftime` format string.
        """
        from matplotlib.dates import num2date
        if tz is None:
            from matplotlib.dates import _get_rc_timezone
            tz = _get_rc_timezone()
        self.num2date = num2date
        self.fmt = fmt
        self.tz = tz
        self.precision = precision

    def __call__(self, x, pos=0):
        if x == 0:
            raise ValueError("DateFormatter found a value of x=0, which is "
                             "an illegal date; this usually occurs because "
                             "you have not informed the axis that it is "
                             "plotting dates, e.g., with ax.xaxis_date()")

        dt = self.num2date(x, self.tz)
        ms = dt.strftime("%f")[:self.precision]

        return dt.strftime(self.fmt).format(ms=ms)

    def set_tzinfo(self, tz):
        self.tz = tz 
```

因此用作：

```
from my_util import PrecisionDateFormatter

ax.xaxis.set_major_formatter(PrecisionDateFormatter("%H:%M:%S.{ms}")) 
```

可能只修改一次导入的`__call__`方法`DateFormatter`而不是复制所有的绒毛（并且必须进行本地导入），但我尝试过，失败了，并认为这对我来说已经足够了！

# python - 在 python 中获取字典并将其写入 HDF5 文件

> ID：11107750
> 
> 赞同：3
> 
> 时间：2012-06-19T19:11:48.030
> 
> 标签：python, dictionary, hdf5

**背景：**

我正在处理大型几何图形，这些几何图形将被网格化或分解成更小的部分，然后重新组合。因此，例如，如果一个块被分成 16 块，它可能会被重新组织成 4 个“补丁”，每个“补丁”有 4 个块或元素。在这个过程之后，我仍然需要跟踪元素。我将 patchIndex（我有一个补丁数量列表）指定为“键”，它将返回补丁中的所有元素及其 1）本地索引（补丁中元素的索引）及其 2 ) 全局索引（元素在整个几何图形中的索引）。

**问题：**

我到底如何才能将这些信息放入 HDF5 文件中？

**我的代码：**

以下是我设置字典的方法，如果这有助于了解：

```
def readAscii(ElementsList,gpmetisfile): 
    f = open(gpmetisfile, 'r')
    indexer={}
    i=0     
    for line in gpmetisfile:
        patchIndex = eval(line)  

        if patchIndex in indexer:
            localIndex=indexer[patchIndex]

        else:
            indexer[patchIndex]=0

        test = ElementsList[i].setLocalIndex(patchIndex,localIndex) 
        if test:
            indexer[patchIndex] +=1 
```

*编辑*- gpmeisfile 是我用来将几何体分解成碎片的文件。它以第 n 行的格式出现，对应于仅具有单个值的第 n 个元素，即它所属的补丁。ElementsList 是几何中元素的列表。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-19T19:31:49.633

我不完全了解您的问题的详细信息，但使用 hdf5 文件的最简单方法是使用 nice h5py 库。[在这里](http://h5py.alfven.org/docs-2.0/)您可以找到文档。

# jquery - Highstocks - 如何更改默认缩放

> ID：11107752
> 
> 赞同：24
> 
> 时间：2012-06-19T19:11:57.143
> 
> 标签：jquery, highcharts, highstock

这个问题源于数小时的谷歌搜索 highstocks、zoom、extremes、ranges 和所有其他可能的单词变体，所有这些都导致了一些用于高*图表*答案的自定义函数的变体。

有没有办法在**HighStocks （不是 HighCharts）中简单地****将默认缩放更改为 1 个月而不是 3 个月**，而无需编写函数来计算它发生了什么？

 **![在此处输入图像描述](../Images/63a2df5c7329bb12313267288f461424.png)

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-06-19T19:34:02.953

您可以通过以下代码更改它：

```
new Highcharts.StockChart({
    .
    .
    .
    rangeSelector: {
        selected: 0
    }
}); 
```

您可以查看以下示例：http: [//jsfiddle.net/QnvrR/](http://jsfiddle.net/QnvrR/)。

默认按钮是：

```
buttons: [{
    type: 'month',
    count: 1,
    text: '1m'
}, {
    type: 'month',
    count: 3,
    text: '3m'
}, {
    type: 'month',
    count: 6,
    text: '6m'
}, {
    type: 'ytd',
    text: 'YTD'
}, {
    type: 'year',
    count: 1,
    text: '1y'
}, {
    type: 'all',
    text: 'All'
}] 
```

所以，你必须根据你想要的改变选择的数量。

参考

*   [http://api.highcharts.com/highstock#rangeSelector.buttons](http://api.highcharts.com/highstock#rangeSelector.buttons)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-22T23:51:51.983

缩放链接是数组的索引，因此如果要选择默认渲染，请设置此参数：rangeSelector: { selected: index_of_array }，在我的情况下，选择“全部”已设置为选中：5**

# c++ - 前向声明掩盖了嵌套模板中的祖先模板参数

> ID：11107756
> 
> 赞同：3
> 
> 时间：2012-06-19T19:12:16.887
> 
> 标签：c++, visual-studio-2010, templates, visual-c++

**编辑**：代码已被精简为仅包含重现错误所必需的内容。错误发生在`const V * Resolve(const Resource<T> *);`并且是`error C2923: 'Resource' : 'T' is not a valid template type argument for parameter 'T'`。

我正在使用 MSVC++ 2010 Express 编译本文末尾显示的代码，但出现以下错误：

```
1>test.cpp(119): error C4430: missing type specifier - int assumed. Note: C++ does not support default-int
1>          test.cpp(121) : see reference to class template instantiation 'Resource<T>::Api<U>::ContainerDerived<V>' being compiled
1>          test.cpp(136) : see reference to class template instantiation 'Resource<T>::Api<U>' being compiled
1>          test.cpp(143) : see reference to class template instantiation 'Resource<T>' being compiled
1>test.cpp(119): error C2143: syntax error : missing ',' before '&'
1>test.cpp(120): error C2923: 'Resource' : 'T' is not a valid template type argument for parameter 'T' 
```

（代码中的第 119 行是这样的`std::auto_ptr<Dependent<V> > Construct(const T &);`：）

似乎前向声明`template <typename V> class ContainerDerived;`导致定义`ContainerDerived`失去了祖先类中 T 参数的“可见性” `Resource<T>`。

这是我尝试过的：

*   `Dependent<V>`切换and的定义顺序`ContainerDerived<V>`（让后者先出现），将前向声明改为`template <typename V> class Dependent;`. 这修复了 ContainerDerived，但会导致 Dependent 出现相同的问题。
*   在任一定义之前添加`typedef T FooBar;`，并将 'T' 的所有实例切换到 Dependent/ContainerDerived 的任一/两者中的 'FooBar'。这可以编译，但不会出现“T”和“V”是相同类型时的预期特化。

基本上，似乎添加某事物的前向声明会从其定义中掩盖 T 参数。任何人都知道为什么会发生这种情况？

这是代码：

```
#include <memory>

template <typename TypeContainer, typename TypeContained>
class Proxy
{
public:
    class Container {};

    Proxy(TypeContainer * = NULL);
    Proxy(Proxy &);
    ~Proxy();
};

struct Dummy {};

template <typename T>
class Resource : public T, public Proxy<Resource<T>, Dummy>::Container
{
public:

    template <typename U>
    class Api
    {
    public:

        template <typename V> class ContainerDerived;

        template <typename V>
        class Dependent : public Proxy<ContainerDerived<V>, Dependent<V> > {};

        template <typename V>
        class ContainerDerived
        {
        public:
            const V * Resolve(const Resource<T> *);
        };

    };
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:33:26.327

这些关系相当复杂。在主要问题中，您必须使用`typename`前面的从属名称。

```
template <typename V>
class ContainerDerived : public ContainerBase<ContainerDerived<V>, Dependent<V> >
{
public:
        typedef typename Api::Dependant<V> DV;
        typedef typename Resource::T TX;
    std::auto_ptr<DV> Construct(const TX &);
        typedef Resource<typename Resource::T> TR;
    const V * Resolve(const TR *);
}; 
```

# php - 在 mail() 函数中指定端口

> ID：11107761
> 
> 赞同：2
> 
> 时间：2012-06-19T19:12:33.150
> 
> 标签：php, smtp

[我在这里没有找到对我的问题的连贯答案:(](http://www.php.net/manual/en/function.mail.php)

我的服务器的 ISP 已经阻止了默认的 SMTP 端口，所以我需要手动将其从 25 切换到 587。

```
mail("example@example.com","Hello","World"); //This uses the default value 
```

PS。我不知道为什么删除了答案-[该链接](http://email.about.com/od/emailprogrammingtips/qt/PHP_Email_SMTP_Authentication.htm)非常有用……但是，我想可以以更简单的方式完成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:33:17.233

您应该使用 ini_set 函数

```
ini_set("smtp_port", "587"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:36:32.110

在 Windows 上，[`mail`](http://php.net/manual/en/function.mail.php)函数使用的 SMTP 设置在 php.ini 文件（[smtp 部分](http://sk.php.net/manual/en/mail.configuration.php#ini.smtp)）中定义。编辑文件并进行必要的更改或使用[`ini_set`](http://php.net/manual/en/function.ini-set.php)功能。

# apache - cPanel 无法添加插件域说它已经配置

> ID：11107768
> 
> 赞同：0
> 
> 时间：2012-06-19T19:12:48.377
> 
> 标签：apache, web-hosting, cpanel, whm

我需要在 cPanel 中添加一个插件域。

当我尝试添加它时，我收到此通知：

**mydomain.com 已配置。**

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-27T21:27:34.893

确保域名不存在。（“Addon Domains”、“Parked Domains”或其他 cPanel）

如果它不再存在，则删除受影响域名的 DNS 区域。WHM >> 删除 DNS 区域 >> 受影响的域。

如果域名不存在，那么您可以尝试更新 cPanel 缓存。 `/usr/local/cpanel/scripts/update_db_cache`

上面的代码必须以 root 身份通过 SSH 运行，不能在共享主机上完成。

那应该可以解决问题。

# html - 如何从存储在数据库中的翻译中本地化静态网站文本？

> ID：11107773
> 
> 赞同：2
> 
> 时间：2012-06-19T19:13:01.357
> 
> 标签：html, localization, translation, client-side

我需要为我的（可扩展的）Web 应用程序中的静态文本设计一种翻译机制/策略——这些应用程序基于 ASP.NET 环境（但没有服务器端控件）中的 HTML、JQuery/JavaScript，并从异步 jQuery 加载动态数据调用 http 处理程序。

[我已经使用Globalize](https://github.com/jquery/globalize)成功本地化了数字、日期等，但是现在需要整理文本翻译。

翻译的文本被适当地存储在数据库中（由本地合作伙伴在另一个应用程序中维护），因此，我不想使用基于文件的[ResX](http://msdn.microsoft.com/en-us/library/ms227427.aspx)等价物，如[jQuery Localization](http://keith-wood.name/localisation.html) / [jQuery Localize](https://github.com/coderifous/jquery-localize) / [jQuery-i18n-properties](http://code.google.com/p/jquery-i18n-properties/)方法，而是我追求一种类似于扩展本地化 ASP.NET 控件（我没有）[的资源提供者模型的解决方案，以从数据库中获取翻译。](http://msdn.microsoft.com/en-us/library/aa905797.aspx)

**客户端方法**：我只是偶然发现了[i18next 的动态（非静态）资源路由](http://jamuhl.github.com/i18next/#n15)，并试图弄清楚我是否可以从 http 处理程序（并缓存在[JStorage](http://www.jstorage.info/) / [LawnChair](http://brian.io/lawnchair/)中）返回类似的东西来填写占位符/标签使用[jQuery 函数或对](http://jamuhl.github.com/i18next/#n4)[Mustache](http://mustache.github.com/)或[hogan.js](http://twitter.github.com/hogan.js/)模板采取类似的方法。

**服务器端方法：** 在提供 HTML 之前修改它，例如[这个答案](https://stackoverflow.com/a/1695021/198048)建议使用[HttpResponse.Filter](http://msdn.microsoft.com/en-us/library/system.web.httpresponse.filter.aspx#Y300)来修改响应服务器端（参见[这篇文章](http://www.4guysfromrolla.com/articles/120308-1.aspx)）。由于缓冲区被分块，我必须按照[此处](http://www.west-wind.com/weblog/posts/2009/Nov/13/Capturing-and-Transforming-ASPNET-Output-with-ResponseFilter)的建议捕获整个流，这确实会导致性能下降，但是，我希望我可以通过[缓存](http://msdn.microsoft.com/en-us/library/xadzbzd6.aspx)页面的每个（语言）版本来缓解这种情况。

[或者像这样](http://www.west-wind.com/weblog/posts/2009/Apr/02/A-Localization-Handler-to-serve-ASPNET-Resources-to-JavaScript)使用 HTTP 处理程序看起来更简单，尽管我不太确定如何在这种情况下缓存页面的多个版本。

是否有其他人对这些方法有经验，或者知道任何满足要求的类似或“最佳实践”，尤其是在性能、可伸缩性和可维护性方面？

*如果有任何不清楚的地方，请告诉我，我是 Web 开发的新手。:)*

注意：这适用于在平板电脑/手持设备上运行以获取数据的 Web 应用程序，它不是 CMS 或静态站点（之前的版本用于在 .Net Compact Framework 上运行大约 5 年，现在是时候更新，以便用户可以使用非 Windows 设备，例如 android 和 iPad）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T01:36:56.337

这就是我们在数据库中处理文本翻译的方式（听起来很明显，但至少这是高度可扩展的）：

1.  假设您有一个表 tbl_Content，其中只有一种语言的列 [id]、[title] 和 [description]。

2.  我们要做的是首先创建一个 tbl_Content_Translation 列：[id]、[languageId]、[title] 和 [description]

3.  将标题/描述列上的所有内容复制到翻译表中，以确保不会丢失任何内容

4.  删除原表中的title和description列

5.  更改查询此表的所有 SP 以添加 [languageId] 参数。

6.  我们将 SP 附加到 BLL 上。

7.  最后，无论是从网页还是网络方法，我们调用 BLL 来访问我们的数据。

同样，这似乎很明显，但由于它对我们有用（ajax 调用和英语、法语和越南语的普通网页），我认为这可能很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:22:55.167

服务器端翻译结果相当复杂。

我认为最简单的方法是使用[jQuery 本地化](http://keith-wood.name/localisation.html)来获取从数据库生成的语言脚本，但这并没有增加任何价值，所以我只是使用 ajax 请求手动从服务器获取脚本（每种语言都有不同的生成脚本）。

我从服务器获得的脚本包含用于翻译的变量（变量与控件 ID 同名），我将其作为对象数组传递`{id:'controlid', val:controlid}`给应用翻译的方法，因此当调用脚本时，页面被翻译。

很遗憾，似乎没有一个好的最佳实践，我所做的并不复杂，但如果有一个库或插件可以做到这一切，那就太好了。

[类似于这个答案](https://stackoverflow.com/a/1449545/198048)。

# ruby-on-rails - ActiveRecord::Relation 对象上的未定义方法

> ID：11107775
> 
> 赞同：1
> 
> 时间：2012-06-19T19:13:11.667
> 
> 标签：ruby-on-rails, activerecord, arel

以下代码

```
fieldvalue = Admin::FieldValue.where(:item_id => @admin_item.id, :field_id => key)
fieldvalue.update_attributes(:value => value) 
```

引发以下错误

```
NoMethodError (undefined method `update_attributes' for #<ActiveRecord::Relation:0x00000102dfc868>): 
```

为什么它是一个`Relation`对象而不是一个`FieldValue`对象，管理这个的正确方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:18:08.073

`fieldvalue`应该只返回一个值吗？

```
fieldvalue = Admin::FieldValue.where(:item_id => @admin_item.id, :field_id => key).first
fieldvalue.update_attributes(:value => value) 
```

或者，如果您期望多个项目：

```
fieldvalue = Admin::FieldValue.where(:item_id => @admin_item.id, :field_id => key)
fieldvalue.update_all(:value => value) 
```

# asp.net - 复选框和数组

> ID：11107776
> 
> 赞同：0
> 
> 时间：2012-06-19T19:13:13.110
> 
> 标签：asp.net, html, vb.net

```
<tr>
<td width=60%><asp:CheckBox ID="chk0" runat="server" /> ...</td>
<td width=40%><asp:CheckBox ID="chk1" runat="server" /> ...</td>
</tr>
...
...
... 
```

我有这样的价值观：

```
var lst = "18,6,0,7,0,4,0,1,5,0,2" 
```

如果有 18 则检查 chk18 等等... 0 只是意味着没有被检查。有没有一种理想的编码方式？whileloop 是理想的吗？

这些值来自数据库表，所有数据都采用该格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T20:22:33.070

请注意，这对您的控件“chk0”不起作用，并且如果您没有相关复选框（例如 = 18 在您的数据中，但您没有控件 chk18），则会爆炸。

```
 Dim strData As String = "18,6,0,7,0,4,0,1,5,0,2"

    Dim lstIDs As List(Of String) = strData.Split(",").ToList()

    For Each strID As Integer In lstIDs

        If CInt(strID) > 0 Then

            CType(Page.FindControl("chk" & strID), CheckBox).Checked = True

        End If

    Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:22:33.050

我不太确定“0”的值是什么意思，因为你有一个 id 为 0 的控件。无论如何，我有一段时间没有做过 ASP.NET WebForms，但这会让你顺利进行：

```
var lst = "18,6,0,7,0,4,0,1,5,0,2"
var checkboxIdsToBeSelected = lst.Split(',');

foreach (var id in checkboxIdsToBeSelected) {
    foreach (Control ctrl in Page.Controls) {
        if (ctrl is CheckBox && cntrl.ID == "chk" + id) {
          ((CheckBox)(ctrl)).Checked = true;
        }
    }
} 
```

# internet-explorer - IE 8 溢出/省略号

> ID：11107778
> 
> 赞同：2
> 
> 时间：2012-06-19T19:13:19.257
> 
> 标签：internet-explorer, text, internet-explorer-8, overflow, ellipsis

所以我正在努力让省略号类在某些页面上工作（这里有一个解释基本修复的页面：[http](http://www.electrictoolbox.com/ellipsis-html-css/) ://www.electrictoolbox.com/ellipsis-html-css/ ），它适用于 IE 6 和 7 ，但不适用于 IE 8。这是代码：

```
.ellipsis {
    overflow: hidden;
    display: block;
    overflow: hidden;
    text-overflow: ellipsis;
    -o-text-overflow: ellipsis;
    -ms-text-overflow: ellipsis;
    white-space: nowrap;
    _width: 100%;
} 
```

所发生的只是文本像往常一样换行。有什么建议么？

# php - 使用 JRedmine 从 PHP 访问 redmine

> ID：11107781
> 
> 赞同：0
> 
> 时间：2012-06-19T19:13:29.823
> 
> 标签：php, redmine

我需要通过使用 PHP 的 Rest API 将附件添加到 redmine 1.3 中的问题。我找到了插件 JRedmine [http://maven-site.nuiton.org/jredmine/](http://maven-site.nuiton.org/jredmine/)。我设法毫无问题地连接到正版 redmine API，但我不知道如何使用 JRedmine。任何帮助，将不胜感激。我在这里复制了 JRedmine 的文档：http: [//alden.pl/jredmine/](http://alden.pl/jredmine/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:17:16.183

似乎 JRedmine 是一个 java 程序。所以你将无法通过 php 使用它。尝试将 rest api 与 php 一起使用，如下所述： http://www.redmine.org/projects/redmine/wiki/Rest_api_with_php和此处： [http :](http://www.redmine.org/projects/redmine/wiki/Rest_api_with_php) [//www.redmine.org/projects/redmine/wiki/ Rest_api#Attaching-files](http://www.redmine.org/projects/redmine/wiki/Rest_api#Attaching-files)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-24T19:07:02.970

@tonymarschall 实际上你是不对的。我可以使用 PHP 访问 JRedmine。假设 redmine 在[http://redmine.myserver.com](http://redmine.myserver.com)上可用，我可以使用 curl 和 POST [http://redmine.myserver.com/jredmine/login](http://redmine.myserver.com/jredmine/login)和参数`username`并`password`获得答案。我必须为 curl 设置 cookie 以在身份验证后使用其他 JRedmine 功能。

此处描述了所有 API：[http](http://www.nuiton.org/embedded/jredmine/jredmine-client/rails_api.html) ://www.nuiton.org/embedded/jredmine/jredmine-client/rails_api.html （法语）。

# javascript - javascript 中的内联 webgl 着色器代码

> ID：11107784
> 
> 赞同：6
> 
> 时间：2012-06-19T19:13:45.303
> 
> 标签：javascript, shader, webgl, inline-code, multilinestring

我正在编写一个使用一些 WebGL 代码的简单 Javascript 库。我想在 .js 文件中包含内联着色器源，因为我的替代方法是将它们作为脚本标签包含在每个页面中，或者将它们作为单独的文件作为 AJAX 加载。这些选项都不是特别模块化。但是，由于 javascript 中缺少多行字符串，我对如何内联 WebGL 代码没有任何好的想法。有没有我没有想到的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:22:20.803

每行使用一个字符串，然后将它们连接在一起，例如

```
var shader = [
   "// line1 ",
   "// line2 ",
].join('\n'); 
```

PS 之前这里讨论过一般问题，见[Creating multiline strings in JavaScript](https://stackoverflow.com/questions/805107/how-to-create-multiline-strings)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-03-18T01:45:59.167

自 2009 年左右以来，JavaScript 在除 IE 之外的所有浏览器中都有多行字符串。

```
var shader = `
code
goes
here
`; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-20T16:44:25.200

我最终破解了这个：http: [//github.com/noteed/language-glsl/](http://github.com/noteed/language-glsl/)进入代码压缩器，通过替换 Language.GLSL.Pretty 中的所有`vcat`实例`hsep`。我得到了一个文件中的着色器代码的单行版本，然后我可以将其粘贴到一个字符串中。当我发布这个时，我希望找到一个类似的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-06T16:51:19.767

这是 NetBeans 处理这种情况的方式：

```
var shader = 
"firstLine\n\
secondLine\n\
thirdLine"; 
```

我发现这种编辑方式比为每一行创建一个数组项更有效。

# css - 使用 Selenium 2 WebDriver，如何使用 CSS WebElement 删除多选、自动完成字段中的选项？

> ID：11107790
> 
> 赞同：0
> 
> 时间：2012-06-19T19:13:57.283
> 
> 标签：css, selenium, webdriver, selenium-webdriver

我们只是在学习 Java/Selenium，因为我们的 QA 正在朝着自动化方向发展。我正在使用 Selenium 2 WebDriver 进行自动化。表单上有一些字段是多选、自动完成的字段。基本上，您可以键入内容的开头，该字段将提供匹配的选项，您选择这些选项并将其添加到该字段中。您可以根据需要添加任意数量的项目（基本上与提交此问题的“标签”字段相同）。我正在尝试从此字段中删除添加的项目，但无法确定 CSS 路径。Firebug 显示以下 HTML：

```
 <div class="c4i-fieldDiv rel" style="min-height: 36px">
 <div id="groupsDropdown" class="ui-autocomplete-multiple">
 <ul class="ui-autocomplete-multiple-container ui-widget ui-inputfield ui-state-default ui-corner-all">
<li class="ui-autocomplete-token ui-state-active ui-corner-all" data-token-value="testGroup">
<span class="ui-autocomplete-token-label">testGroup</span>
<span class="ui-autocomplete-token-icon ui-icon ui-icon-close"></span> 
```

我正在使用的代码是：

```
WebElement deleteGroup = findElementBySelector("//div[@id='groupsDropdown']/ul/li/span");    
deleteGroup.click(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T20:23:22.033

此代码用于删除添加的第三项：

```
WebElement delrole3 = findElementByXpath("//div[@id='groupsDropdown']/ul/li[3]/span");
delrole3.click(); 
```

将 [3] 更改为与该字段中的项目相对应的任何其他数字将有助于删除该项目。

由于某种原因，IDE 没有注册 [#] 部分。

# java - 我可以在java中的一个线程中运行一个线程吗？

> ID：11107792
> 
> 赞同：15
> 
> 时间：2012-06-19T19:14:06.120
> 
> 标签：java, multithreading

在 Java 中，我有必要在另一个类似的类中实现一个扩展 Thread 的类。那可能吗？

我正在尝试做的一个示例是以下（简化的）代码段：

```
// The first layer is a Thread
public class Consumer extends Thread {

    // Variables initialized correctly in the Creator
    private BufferManager BProducer = null;

    static class Mutex extends Object {}
    static private Mutex sharedMutex = null;

    public Consumer() {
        // Initialization of the thread
        sharedMutex = new Mutex();

        BProducer = new BProducer(sharedMutex);
        BProducer.start();
    }

    public void run() {

        int data = BProducer.getData();

        ///// .... other operations
    }

    ////// ...... some code

    // Also the second layer is a Thread
    private class BufferManager extends Thread {

        Mutex sharedMutex;
        int data;

        public BufferManager(Mutex sM) {
            sharedMutex = sM;
        }

        public int getData(Mutex sM) {
            int tempdata;
            synchronized(sharedMutex) {
                tempdata = data;
            }
            return tempdata;
        }

        public void run() {
            synchronized(sharedMutex) {
                data = getDataFromSource();
            }
            ///// .... other operations on the data
        }
    }
} 
```

第二个线程直接在第一个线程内部实现。此外，我想知道实现这样的互斥锁是否可行。如果没有，还有更好的（标准）方法吗？

先感谢您。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-19T19:15:23.727

不是在“内部”`Thread`运行，而是并排运行。

所以是的，您可以启动另一个`Thread`与其他两个并排运行`Thread`。事实上，任何人`Thread`都可以启动另一个`Thread`（只要操作系统允许）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-19T19:26:19.617

是的，这应该可以工作，并且共享的 Mutex 应该可以完成它的工作。出于偏执，我会同时声明互斥锁`final`以避免任何奇怪的“转义”问题。例如

```
final Mutex sharedMutex; 
```

一个建议：也许这是我的风格，但对于这样的代码我很少扩展`Thread`. 只需实施`Runnable`即可。IMO 它有点不那么令人困惑（这里是 YMMV）。另外，当您开始使用高级并发实用程序（如`Executor`）时，它们处理的是`Runnables`，而不是线程。

# php - PHP如何防止PHP转义html fopen fwrite

> ID：11107793
> 
> 赞同：0
> 
> 时间：2012-06-19T19:14:15.140
> 
> 标签：php, html, escaping

我正在尝试制作一个可以让我更轻松地创建 HTML 文档的应用程序。

它主要工作，除了当我写入文件时它添加反斜杠。

```
<a href=\"google.com\">google</a> 
```

知道如何阻止它这样做吗？

我让它工作了！如果我在将它写入文件之前使用 stripslashes()，它将保存/创建没有 \ 的文件，谢谢您的所有帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:31:44.660

这可能是因为*魔术引号*打开了，如果您不想每次都使用 stripslashes，您应该在 php.ini 文件中或使用类似的 htaccess 文件禁用它们：

在*php.ini*文件中：

```
magic_quotes_gpc = Off
magic_quotes_runtime = Off
magic_quotes_sybase = Off 
```

或在*.htaccess*文件中：

```
php_flag magic_quotes_gpc Off 
```

或直接在您的代码中禁用它们：

```
if (get_magic_quotes_gpc()) {
    $process = array(&$_GET, &$_POST, &$_COOKIE, &$_REQUEST);
    while (list($key, $val) = each($process)) {
        foreach ($val as $k => $v) {
            unset($process[$key][$k]);
            if (is_array($v)) {
                $process[$key][stripslashes($k)] = $v;
                $process[] = &$process[$key][stripslashes($k)];
            } else {
                $process[$key][stripslashes($k)] = stripslashes($v);
            }
        }
    }
    unset($process);
} 
```

来源： http: [//php.net/manual/en/security.magicquotes.disabling.php](http://php.net/manual/en/security.magicquotes.disabling.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:37:04.420

此行为是由 PHP 已弃用的[Magic Quotes](http://www.php.net/manual/en/security.magicquotes.php)指令引起的，您的仍处于激活状态，因为它在 5.4 之前的任何默认 PHP 安装中都是默认的。除非您指定长度参数，否则[fwrite](http://php.net/manual/en/function.fwrite.php)将查看[magic-quotes-runtime](http://www.php.net/manual/en/info.configuration.php#ini.magic-quotes-runtime)以查看它是否会转义。

把它关掉，你可以把它

```
php_flag magic_quotes_gpc Off 
```

在[.htaccess](http://en.wikipedia.org/wiki/Htaccess)文件中，您需要使用 apache DSO 来允许此选项

或者你可以[在 php.ini 中禁用它](http://www.php.net/manual/en/security.magicquotes.disabling.php)

如果由于您在共享主机上或出于其他原因而无法执行这些操作中的任何一项，请在代码中解决。

```
function write($resource,$string,$length)
    if (get_magic_quotes_gpc()) {
        $string = stripslashes($string);

    }
    return fwrite($resource, $string,$length);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T19:29:06.157

如果您使用的是单引号字符串，则不应使用带有反斜杠的转义双引号，因为它们是按字面解释的。

从[文档](http://php.net/manual/en/language.types.string.php)：

> 注意：与双引号和heredoc 语法不同，特殊字符的变量和转义序列在出现在单引号字符串中时不会被扩展。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-16T15:03:52.860

我有一个类似的问题，但有一个 $_POST['body'] 变量。这对我有用：

```
str_replace("\\", "", $_POST['body']); 
```

# php - 如何像这样strtotime日期格式

> ID：11107801
> 
> 赞同：1
> 
> 时间：2012-06-19T19:14:46.620
> 
> 标签：php

我想像这样 strtotime dateformat - Fri Jun 15 05:38:11 +1000 2012 我该怎么做？基本上我需要对其进行strtotime，然后执行以下操作-`$ago = time()-strtotime(Fri Jun 15 05:38:11 +1000 2012);`然后执行此操作-

```
$ago = $ago / (60*60*24);
echo $ago.' days ago'; 
```

所以我需要一件事 - strtotime(Fri Jun 15 05:38:11 +1000 2012) 它将根据需要工作。

如果这种类型的日期不能是strtotime，那么我该如何编辑它，所以它可能是strtotime？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:27:47.810

试试这个（OOP 风格，有一个等效的程序）：

```
<?php
$str = "Fri Jun 15 05:38:11 +1000 2012";

// From here: http://is2.php.net/manual/en/datetime.createfromformat.php
$datetime = DateTime::createFromFormat('D M d H:i:s T Y', $str);
$now = new DateTime();

// From here: http://is2.php.net/manual/en/datetime.diff.php
$interval = $now->diff($datetime);
echo $interval->format("%R%a days");
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:22:46.757

该`DateTime::createFromFormat()`方法允许您定义要解析的日期字符串的格式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:23:59.587

比较差异并使用 floor/ceil 进行舍入。

```
$now = time();
$then = strtotime($var);

echo floor(($now - $then) / 86400) . " days ago"; 
```

# xml - xsl:param 命名空间错误（不能在命名空间中使用）

> ID：11107804
> 
> 赞同：0
> 
> 时间：2012-06-19T19:14:56.097
> 
> 标签：xml, xslt, variables, namespaces, stylesheet

我不明白为什么 xsl:param 给我一个错误“关键字 xsl:param 可能无法在命名空间[http://www.w3.org/TR/WD-xsl](http://www.w3.org/TR/WD-xsl)中使用。” 在以下带有样式表声明的 xsl 代码中。

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="uri:xsl"> 
```

给定xml

```
<?xml version="1.0" encoding="ISO-8859-1"?>
<catalog>
    <cd n="a">
        <title>Empire Burlesque</title>
        <artist>Bob Dylan</artist>
        <country>USA</country>
        <company>Columbia</company>
        <price>10.90</price>
        <year>1985</year>
    </cd>
</catalog> 
```

和 xsl 代码

```
<?xml version="1.0"?>
<xsl:stylesheet xmlns:xsl="uri:xsl">

<xsl:param name="test" select="'a'"/>

<xsl:template match="/">
  <html>
  <body>
    <h2>My CD Collection</h2>
    <table border="1">
      <tr bgcolor="#9acd32">
        <th>Title</th>
        <th>Artist</th>
      </tr>
      <xsl:for-each select="catalog/cd">

<xsl:choose>
    <xsl:when match=".[@n = $test]">
      <tr>
        <td><xsl:value-of select="title" /></td>
        <td><xsl:value-of select="artist" /></td>
      </tr>
    </xsl:when>
    <xsl:otherwise>

    </xsl:otherwise>
</xsl:choose>

      </xsl:for-each>
    </table>
  </body>
  </html>
</xsl:template>
</xsl:stylesheet> 
```

我无法更改样式表声明。查看 w3c 文档，我可以将 param 声明为样式表的子项，并且不需要在模板中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T21:07:15.407

如果您的东西不在名称空间[http://www.w3.org/1999/XSL/Transform](http://www.w3.org/1999/XSL/Transform)中，那么它就不是 XSLT 样式表，我不知道还有什么。没有 XSLT 处理器可以用它做任何有用的事情。可能有某种命名空间为“uri.xsl”的语言，但如果有的话，我从来没有遇到过它，我也不知道它可能是什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:47:29.607

我在您的 xslt 中看到三个错误：

1）您在转换开始时有两个处理指令。如果有的话，你应该只使用一个。

2) 样式表元素的命名空间应该是`http://www.w3.org./1999/XSL/Transform`

3）您缺少样式表版本属性

除了这些点之外，您的样式表应该可以工作。

# xcode - 在 Xcode 的 Cocoa 项目中添加自定义库时出现问题

> ID：11107809
> 
> 赞同：0
> 
> 时间：2012-06-19T19:15:28.600
> 
> 标签：xcode, macos, cocoa, opencv, homebrew

我在 XCode 中将自定义库添加到我的 Cocoa 项目时遇到了一些问题。

我正在使用： • OSX Lion 10.7.4 (11E53) • XCode 4.3.3 (4E3002) • OpenCV 2.4.1

**这是我所做的：**

1.  使用以下命令在我的终端中通过 Homebrew 安装 OpenCV（耗时 12.6 分钟：P）：

    $酿造安装opencv

2.  在 XCode 中创建了一个新的 Cocoa 项目（~/Documents/Objective-C/MyProject）

3.  复制的 OpenCV 库：

    $ cp -R /usr/local/Cellar/opencv ~/Documents/MyProject/MyProject

4.  在我的 XCode 项目设置中，我去了：*Targets -> MyProject*

5.  单击链接框架和库部分中的 +

6.  在弹出屏幕中，我单击了添加其他...</p>

7.  作为我选择的路径：~/Documents/MyProject/MyProject/opencv

8.  单击选项卡：*构建设置*

9.  在搜索字段中输入：

    标题搜索

10.  将选项*始终搜索用户路径*切换为*是*

11.  双击*标题搜索路径*右侧的空白区域并添加（+）并检查条目：

    opencv/2.4.1/include

12.  清除搜索字段并输入：

    其他链接器标志

13.  双击*Other Linker Flags*右侧的空白处，插入：

    -lopencv_core -lopencv_flann -lopencv_legacy -lopencv_lapack -lopencv_contrib

好的，这是我在网上阅读一篇文章时所做的准备工作。现在我选择了 AppDelegate.h 并添加了以下包含（在 Cocoa/Cocoa.h 的#import 之前）：

```
#include <opencv2/opencv.hpp> 
```

现在问题来了。我从 XCode Code-sense 得到这个错误：

```
'opencv2/opencv.hpp' file not found 
```

在这一点上，我不知道为什么这不起作用。我希望一些有经验的 XCode 用户知道为什么这不起作用。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T08:48:09.030

我认为您不需要所有步骤都这样做，我在我的项目中将 opncv 设置为：

1.  将 opencv2.framework 添加到您的项目中

2.  将此代码添加到您的 .pch 文件中

    #ifndef __cplusplus

    #include <opencv2/opencv.hpp>

    ＃万一

3.  现在主要步骤被所有人忽略并得到问题：将要使用opencv的所有.m文件的扩展名更改为.mm

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T21:39:10.437

你写的听起来不错。我刚刚检查了我的一个 OpenCV Xcode 项目，一切看起来都差不多。我唯一没有做的是将库复制到我的项目文件夹中（我只是链接它们）并添加额外的链接器标志。相反，我将所有需要的框架添加到 Xcode 项目中。

我仍然无法找出原因，但只要我当前的构建架构设置为 32 位，我就会遇到与您描述的完全相同的问题！

尝试将您的方案更改为“我的 Mac 64 位”（这是默认名称，如果您更改了不知道）并尝试再次构建。

* * *

这是一个对我来说很好的“演示”Xcode项目的链接：

[http://www.rapidshare.com/files/1391580878/Xcode_OpenCV_example.zip](http://www.rapidshare.com/files/1391580878/Xcode_OpenCV_example.zip)

希望这可以帮助，

最好的，

弗洛

# java - 我如何在android中将字节数组转换为long

> ID：11107810
> 
> 赞同：3
> 
> 时间：2012-06-19T19:15:43.330
> 
> 标签：java, android

我需要将`byte[]`大小为 4 的 a 转换为我的 Android 应用程序的 long 类型。`byteArrayToLong(byte_array)`我在包中找到了一个函数`java.io.Bits`，但它在我的应用程序中不起作用。

还有其他替代功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:25:19.540

使用`java.nio.ByteBuffer`：

 ~~~~```
byte[] data = new byte[] {50, -106, 40, -22};
ByteBuffer buffer = ByteBuffer.wrap(data);
System.out.println(buffer.getLong()); 
```~~  ~~### 编辑

当然，@Kaito 是对的：您需要一个 8 字节的数组。此外，正如其他人提到的，您可以选择读取字节的顺序（`BIG_ENDIAN`默认情况下）：

```
 byte[] data = new byte[] {50, -106, 40, -22, 0, 0, 0, 0};
    ByteBuffer buffer = ByteBuffer.wrap(data);
    buffer.order(ByteOrder.BIG_ENDIAN);
    System.out.println(buffer.getLong()); // 3645145933890453504
    buffer = ByteBuffer.wrap(data);
    buffer.order(ByteOrder.LITTLE_ENDIAN);
    System.out.println(buffer.getLong()); // 3928528434 
```

另外，为什么更喜欢 API 方法？为了简单起见：您可以用简单的英语阅读这里发生的事情，而不是识别按位移位的字节到长转换。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T19:25:48.900

答案取决于您的第一个字节是最低有效字节还是最高有效字节。

**如果第一个字节是最重要的**：

```
long val = 0;

for (int i = 0; i < YourByte.length; i++)
{
   val = (val << 8) + (YourByte[i] & 0xff);
} 
```

**如果第一个字节是最低有效字节**：

```
long val = 0;

for (int i = 0; i < YourByte.length; i++)
{
   val += ((long) YourByte[i] & 0xffL) << (i*8);
} 
```

**编辑**：

在处理超过 8 个字节时使用`BigInteger`而不是。`long`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T19:30:57.790

医生的回答有效，但我会这样做*没有*循环。

对于小端（最可能的情况）：

```
long val = b[0] | ((int)(b[1]) << 8) | ((int)(b[2]) << 16) | ((int)(b[3]) << 24); 
```

对于大端：

```
long val = b[3] | ((int)(b[2]) << 8) | ((int)(b[1]) << 16) | ((int)(b[0]) << 24); 
```

另外，请记住 Java`long`的长度为 8 个字节。对于 4 个字节，一个`int`就足够了。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-19T19:28:18.130

想到三个选项：

1.  将数组传递给 BigInteger 构造函数，然后从 BigInteger 中获取 long 值
2.  用另外 4 个字节填充数组并使用 ByteBuffer.wrap 然后 getLong
3.  通过将每个字节移动到位来手动构建它。

根据字节顺序，您可能必须反转数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-06-30T05:02:54.710

将**大小小于 8 字节的****byte[ ]**转换为**long**类型时

 ****`public static ByteBuffer byteArraytoByteBuffer(int capacity,byte[] array) { ByteBuffer buffer = ByteBuffer.allocate(capacity).put(array).order(ByteOrder.LITTLE_ENDIAN); buffer.rewind(); return buffer; }`

然后

`byte[] input = new byte[]{1,0,0,0};
long value = byteArraytoByteBuffer(8,input).getLong();`

1\. **ByteBuffer.allocate(capacity)**为 long 类型分配 8 个字节。

缓冲区 = {0,0,0,0,0,0,0,0}

2\. **put(array)**将放置 4 个字节

缓冲区 = {1,0,0,0,0,0,0,0}

```
 ^
           | 
```

现在缓冲区的位置是 4

3.字节顺序可根据需要为**LITTLE_ENDIAN**或**BIG_ENDIAN 。**

4\. **buffer.rewind() 回退**缓冲区并将位置设置为零，

缓冲区 = {1,0,0,0,0,0,0,0}

```
 ^
       | 
```

如果没有执行 buffer.rewind() 操作，则会发生缓冲区下溢。因为位置在 4，所以当 getLong() 被调用时，它将开始索引为 4。

相同的代码可用于将 byte[ ] 转换为 int

`byte[] input = new byte[]{1,0,0,0};
long value = byteArraytoByteBuffer(4,input).getInt();`****~~~~

# java - 如何检查对象是否是某种类型的数组

> ID：11107812
> 
> 赞同：9
> 
> 时间：2012-06-19T19:15:47.933
> 
> 标签：java, reflection, field

我有一个对象`Field field`。

我想检查是否`field`是类型对象`Foo`或数组：`Foo[]`。

伪代码：

```
if field.getType() is Foo || field.getType is Foo[] 
```

这可能吗？

我试过了

```
if (field.getType().isArray())
    // do something 
```

但这只会让我检查是否`field`是一个数组。

相反，这样做只会检查它是否是`Foo`

```
if (Foo.class.isAssignableFrom(field.getType())
     // do something 
```

知道怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-19T19:27:56.133

这是我曾经用来处理 Java 中所有基本类型的数组的一些代码。由于它们没有扩展 Object 类，因此对 Object[] 的 instanceof 检查是不够的。

```
/* Check if the given object is an array. */
if (object.getClass().isArray()) {

    Class<?> componentType;
    componentType = object.getClass().getComponentType();

    if (componentType.isPrimitive()) {

        if (boolean.class.isAssignableFrom(componentType)) {
            for (boolean anElement : (boolean[]) object) {
                /* ... */
            }
        }

        else if (byte.class.isAssignableFrom(componentType)) {
            /* ... */
        }

        else if (char.class.isAssignableFrom(componentType)) {
            /* ... */
        }

        else if (double.class.isAssignableFrom(componentType)) {
            /* ... */
        }

        else if (float.class.isAssignableFrom(componentType)) {
            /* ... */
        }

        else if (int.class.isAssignableFrom(componentType)) {
            /* ... */
        }

        else if (long.class.isAssignableFrom(componentType)) {
            /* ... */
        }

        else if (short.class.isAssignableFrom(componentType)) {
            /* ... */
        }

        /* No else. No other primitive types exist. */
    }

    else {
        /* Do something with Object[] here. */
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-19T19:21:52.193

简单的比较应该可以

```
import java.lang.reflect.Field;

public class Main {

String[] myStringArray;
String[] myStringArray2;

Object[] myObjectArray;

String str;

public static void main(String... args) {
        Field[] flds = Main.class.getDeclaredFields();
        for (Field f : flds) {
            Class<?> c = f.getType();

            if (c == String[].class) {
                System.out.println("field" + f.getName() + " is String[]");
            } 
            if (c == String.class) {
                System.out.println("field" + f.getName() + " is String");
            }
            if (c == Object[].class) {
                System.out.println("field" + f.getName() + " is Object[]");
            } 
        }
} 
```

}

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T19:21:05.807

假设您提到的字段是 a `java.lang.reflect.Field`，您可以这样做

```
field.getType().equals(Foo.class) || field.getType().equals(Foo[].class) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-19T19:18:58.047

```
if (field instanceof Object[]) 
```

那应该这样做。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-19T19:20:23.460

由于数组类型已具体化，因此您可以使用

```
if ( field.getType() == Foo.class || field.getType() == Foo[].class ) {
} 
```

完整示例：

```
public class Scratchpad {
    String[] strings;

    public static void main(String[] args) throws NoSuchFieldException {
        if (Scratchpad.class.getDeclaredField("strings").getType() == String[].class) {
            System.out.println("They're Strings!");
        }

        if (Scratchpad.class.getDeclaredField("strings").getType() == Long[].class) {
            System.out.println("They're Longs!");
        }
    }
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-19T19:38:12.217

我会做这样的事情：

```
public static void main(String[] args) {
    Foo foo = new Foo();
    Foo[] other = new Foo[1];
    other[0] = new Foo();

    System.out.println(isFooOrArrayOfFoo(foo));
    System.out.println(isFooOrArrayOfFoo(other[0]));
    System.out.println(isFooOrArrayOfFoo(new Object()));
}

private static boolean isFooOrArrayOfFoo(Object o) {
    return (o instanceof Foo || o.getClass().equals(Foo.class) && o.getClass().isArray());
} 
```

# sql - 需要从 SQL 查询脚本中导出中间结果

> ID：11107813
> 
> 赞同：1
> 
> 时间：2012-06-19T19:15:53.033
> 
> 标签：sql, python-3.x, sql-server-2008-r2, pyodbc

我们需要创建几个 SQL 报表，每个报表都依赖于上一个报表的结果。所有查询都采用以下形式：Select 1, Report 1, Select 2 from Select 1, Report 2, Select 3 from Select 2, Report 3, ...依此类推到... Report N。

现在“N”个单独的 SQL 查询用于生成完整的报告集。每个查询都包含所有先前查询的 SQL 代码 - 这导致报告 1 被执行“N”次，报告 2 被执行“N - 1”次等。导致在多个报告中重复相同的选择语句导致性能问题。

我们如何导出中间报告，最好是 .csv 文件，因为它们是由报告“N”生成的，从而消除了对所有其他报告的需要？

* * *

一些特定于我们案例的复杂因素：

*   必须使用交钥匙方法，使任何使用任何形式的人工干预的方法都不可接受。需要纯文本输出。
*   OBDC（特别是 Python 的 pyobdc 包）用于将 SQL 查询传递给 SQL Server（作为游标）。Python 使用结果将报告创建为 .csv 文件。
*   存储 SQL 过程被禁止，但现有 SQL 代码确实使用临时表。
*   结果必须写入我的（客户端）机器。我们的 IM 部门*可能*允许我们使用他们服务器上的临时文件夹。
*   似乎 pyobdc 只能接受一个结果集（因此需要“N”个查询）。确保正确的结果集被传回要求 SQL 查询以“SET NOCOUNT ON”开头（如 pyobdc 邮件列表所建议的那样）。我知道没有其他方法可以从 SQL 返回的多个结果集中返回/选择正确的结果集。我尝试了一种 pyobdc 方法（cursor.nextset）来跳过结果集，但没有返回任何内容。
*   我考虑将报告“n - 1”的结果传递给报告“N”——但所涉及的数据量可能使这不切实际。
*   Python (3.2.2) 和 SQL 代码是经过充分验证的生产代码。更改语言不是一个实际的选择。更改 OBDC 包是可能的，但不太可能（必须提出一个非常有力的案例，并且其他 OBDC 包必须易于跨平台移植，并且还能够连接到 Microsoft SQL Server 2008 Management Studio）。
*   带有 pydev 插件的 Eclipse (Helios) 用于启动 Python 应用程序，该应用程序启动 SQL 查询。
*   客户端O/S是XP Pro Sp 3，服务器相信是一样的。该公司正计划“很快”将我们的机器迁移到 Windows 7/8，因此该操作系统的可移植性是一个因素。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-27T15:21:32.790

以下是我自己的问题的完整解决方案（最好将其命名为“需要从 SQL 查询脚本导出多个结果”）。

另请参阅使用相同通用方法的[这个问题](https://stackoverflow.com/questions/273203/access-second-result-set-of-stored-procedure-with-sql-or-other-work-around-pyth?rq=1)，除了它使用硬编码的 SQL 字符串 - 和 fetchall() 而不是 fetchone() - 也是[那个问题](http://stackoverflow.com/questions/7263781/pyodbc-return-multiple-cursors-from-stored-procedure-with-db2)

* * *

仔细查看多行（继承的）SQL 代码，发现中间报告没有被保存。只有最后一个 SQL 选择/报告的结果被返回（给 python）。

解决方案的 SQL 方面包括创建新表来保存结果集（报告），然后在 SQL 代码的最后返回所有结果集。
SQL 代码现在如下所示：

```
SET NOCOUNT ON    -- required by pyobdc (and other OBDC packages?) at start of code
SET @year  = ?    -- get OBDC (python) parameter 1
SET @month = ?    -- get parameter 2
SET @day   = ?    -- get parameter 3

DECLARE @ReportX TABLE  -- a new table, one of these for each report

--  Repeated for each report (1 to N):

INSERT INTO @ReportX    -- NEW LINE, it preserves the report
SELECT .....        -- the original report, uses the passed-in parameters

-- At the very bottom of the SQL code, add one of these lines for each report:

Select * from @ReportX   -- where X is 1 to N 
```

* * *

解决方案的 Python 3.x 端如下所示：

```
import pyodbc  # contains cursor.execute, the interface to SQL
import csv     # creates csv.writer, used to create the CSV file

    Textfile     = open( "FileContainingSqlCode", 'r' )  
    SQL_COMMANDS = Textfile.read();     #  Get SQL code for all reports

    cursor.execute( SQL_COMMANDS, Year, Month, Day )  # do all reports using 3 parameters 

    # Create first report from the first result set

    ReportID = 1

    filename = "D:\\Report" + str( ReportID ) + ".csv"
    OutFile  = open( filename, 'w', newline= '' ) 

    Results = csv.writer( OutFile, delimiter = ',', quotechar = '"', 
                          quoting = csv.QUOTE_MINIMAL )
    while True:            
        row = cursor.fetchone()
        if not row:
            break
        Results.writerow( row )
    OutFile.close()

    # Create the 2nd through Nth reports

    while ( cursor.nextset() ) :
        ReportID += 1

        filename = "D:\\Report" + str( ReportID ) + ".csv"
        OutFile =  open( filename, 'w', newline= '' ) 

        Results = csv.writer( OutFile, delimiter = ',', quotechar = '"', 
                          quoting   = csv.QUOTE_MINIMAL )
        while True:            
            row = cursor.fetchone()
            if not row:
                break
            Results.writerow( row )            
        OutFile.close() 

# end of Python 3.x code 
```

消除第一个报告部分应该可以通过在第二个 while 循环中使用以下内容来实现：while ( ?? in cursor.nextset() )。

# regex - Perl正则表达式，求SKU号

> ID：11107817
> 
> 赞同：1
> 
> 时间：2012-06-19T19:16:23.600
> 
> 标签：regex, perl, ack

[我正在尝试使用ack](http://betterthangrep.com/)解析一堆 PHP 代码。我对正则表达式非常缺乏经验，并试图弄清楚为什么我目前使用的不能按我预期的那样工作。

我正在尝试在 PHP 文件中查找与以下模式匹配的所有行：

字符串“SKU”，后跟任意数量的任意字符，后跟实际 SKU（长度不确定的数字序列）。

我的正则表达式目前是：

```
SKU.*[0-9]* 
```

但这匹配了很多不适合我正在寻找的模式的字符串，例如

`SKUs</h3>`和`SKU',`

我也试过：

```
SKU(.*)([0-9]*) 
```

无济于事。

有大佬有见解吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:20:10.923

全部（几乎）正确：

```
SKU.*[0-9]+ 
```

如果要在 re 的末尾至少有一个数字，则必须使用 + 而不是 *。

说实话，不完全清楚你对*任何字符*的意思是什么。如果您真的指的是任何字符，那么您必须使用`.*`，但如果不是，您必须更具体地说明您想要查找的内容。

此外，您可能需要非贪婪的搜索模式：

```
SKU.*?[0-9]+ 
```

这意味着：一旦你遇到第一个数字就停下来。

# javascript - 在数组中存储数字会混淆如何根据值而不是索引来操作这些项目

> ID：11107819
> 
> 赞同：0
> 
> 时间：2012-06-19T19:16:26.077
> 
> 标签：javascript, arrays, json

我在这件事上失去理智了。我的最后一个问题回答了一个语法问题，但没有解决使它正常运行的问题，所以这里......

我的对象：

```
 filter =  {
            "country": 1,
            "Age Group": [],
            "Gender": [],
            "NEWSEC": [],
            "Telco_Segment": []
    }; 
```

我的功能：

```
function buildFacets(key, val)
{
    if(key == 'country')
    {   
        filter.country = val;
    }
    else
    {
        if(val in filter[key])
        {
            delete filter[key][val];
        }
        else
        {
            filter[key].push(val);
        }
    }

    console.log(filter);
} 
```

我的问题是我的函数是将传入值与数组索引进行比较，而不是数组值。例如，如果我调用 buildFacets("Age Group",2) 我将在该数组中获得一个值 2。但是，如果我再次调用它，它只会将另一个值 '2' 添加到数组中，而不是删除'2' 已经存在，因为它与索引比较，即 0。

我希望我解释得对。如果需要澄清，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:28:33.423

```
var idx = filter[key].indexOf(value);

if(idx != -1)
{
    filter[key].splice(idx, 1);
}
else
{
    filter[key].push(val);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:27:18.203

jQuery 来拯救，但我很想知道非 jQuery 解决方案是什么：

```
function buildFacets(key, val)
{
    var pos = -1;

    if(key == 'country')
    {   
        filter.country = val;
    }
    else
    {
        pos = $.inArray(val, filter[key]);

        if(pos > -1)
        {
            filter[key].splice(pos,1);
        }
        else
        {
            filter[key].push(val);
        }
    }

    console.log(filter);
} 
```

* *EDIT/UPDAT* *E (非 jQuery 版本，感谢 xvatar

```
function buildFacets(key, val)
{
    var pos = -1;

    if(key == 'country')
    {   
        filter.country = val;
    }
    else
    {
        pos = filter[key].indexOf(val);

        if(pos > -1)
        {
            filter[key].splice(pos,1);
        }
        else
        {
            filter[key].push(val);
        }
    }

    console.log(filter);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:28:17.920

`in`运算符测试对象是否具有给定属性，它不检查成员资格。

# symfony - Symfony2 表单事件 - 下拉列表

> ID：11107821
> 
> 赞同：8
> 
> 时间：2012-06-19T19:16:32.400
> 
> 标签：symfony

在 Symfony2 网站中，我试图制作一个包含 2 个（或 3 个）下拉列表的表单，其依赖关系为 Country > Region > City。那个城市是我用表单编辑的元素的一个字段。这个想法是根据选择来填充列表。

我在这里遵循了带有表单事件的教程：http: [//aulatic.16mb.com/wordpress/2011/08/symfony2-dynamic-forms-an-event-driven-approach/](http://aulatic.16mb.com/wordpress/2011/08/symfony2-dynamic-forms-an-event-driven-approach/) （基于webb-on- the-web .com/?p=5)

我遇到的问题：一切正常，但是当我使用表单编辑元素时，正确选择了城市（来自 DB），但国家和地区下拉列表已预先填写并留在“选择值”上。我不知道它是否应该与本教程一起使用。

问题：如何选择这些列表？我正在尝试添加一个 POST_SET_DATA 事件，但我找不到在表单字段中选择值的方法。

这是表单类： http: [//pastebin.com/PpWkHxC3](http://pastebin.com/PpWkHxC3)（请注意，它不是城市：字段>主题和主题是表单编辑的课程的字段）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-24T12:04:13.297

我几乎拥有它。如果其他人需要此功能，则需要添加以下内容以使此解决方案在编辑现有项目时完美运行：

```
class ItemDetailForm extends AbstractType
{
   ...
        $builder->addEventListener(FormEvents::POST_SET_DATA, function (DataEvent $event) use ($refreshTopic) {
            $data = $event->getData();
            $form = $event->getForm();
            if (null === $data) {
                return;
            }

            $form->get('region')->setData($data->getCity()->getRegion());
        });
} 
```

编辑：从 symfony 2.1 开始，POST_SET_DATA 事件在子元素添加到表单之前被调用，导致所有 get('region') 引发异常。解决方案是在 POST_SET_DATA 而不是 buildForm() 中创建此字段：

```
 /** @var FormFactory $factory */
        $form->add($factory->createNamed('region', 'entity', null, array(
            'class'=>'AcmeBundle:Region',
            'property_path'=>false,
            'empty_value'=>'Choose a value',
            'required'=>true,
            'label'=>'Region'
        ))); 
```

请注意，您需要将 $factory 添加到处理事件的闭包的“使用”中：

```
$builder->addEventListener(FormEvents::POST_SET_DATA, function (DataEvent $event) use ($refreshTopic, $factory) { 
```

这是整个表单类：

```
<?php
namespace AAA\CoreBundle\Form;

use Symfony\Component\Form\AbstractType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\Form\FormFactory;
use Symfony\Component\Form\FormEvents;
use Symfony\Component\Form\FormEvent;
use Symfony\Component\Form\Form;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;
use Doctrine\ORM\EntityRepository;
use AAA\CoreBundle\Entity\ClassYear;
use AAA\CoreBundle\Entity\Field;
use AAA\CoreBundle\Entity\Lesson;
use AAA\CoreBundle\Form\LessonContentForm;

class LessonDetailForm extends AbstractType
{
    public $country;
    function __construct($country=null) {
        // Get country for classyear dropdown list
        $this->country = $country;
    }
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        $factory = $builder->getFormFactory();

        $builder->add('name', null, array('label'=>'Titre de la leçon'));
        $builder->add('description', 'textarea', array('label'=>'Description (définition conceptuelle) Qu\'est-ce que c\'est ? Et à quoi ça sert ? (importance, utilité)'));
        $builder->add('text', 'textarea', array('label'=>'Leçon', 'required'=>false)); // Can't set 'required' on textareas used by TinyMCE
        $builder->add('reperes', 'textarea', array('label'=>'Repères (détectionel) - Quels sont les éléments qui me permettent de repérer que je dois penser à ce concept ?', 'required'=>false));
        $builder->add('other_topic', null, array(
            'required'  =>  false,
            'mapped'     =>  false
        ));

        $refreshField = function ($form, $classyear) use ($factory) {
            /** @var FormFactory $factory */
            /** @var Form $form */
            $form->add($factory->createNamed('field','entity',null, array(
                'class'         => 'AAA\CoreBundle\Entity\Field',
                'mapped'        => false,
                'label'         => 'Matière',
                'empty_value'   => 'Sélectionne une valeur',
                'empty_data'    => null,
                'required'      => false,
                'query_builder' => function (EntityRepository $repository) use ($classyear) {
                    $qb = $repository->createQueryBuilder('field')
                        ->innerJoin('field.classyear', 'classyear');

                    if($classyear instanceof ClassYear) {
                        $qb = $qb->where('field.classyear = :classyear')
                            ->setParameter('classyear', $classyear);
                    } elseif(is_numeric($classyear)) {
                        $qb = $qb->where('classyear.id = :classyear_id')
                            ->setParameter('classyear_id', $classyear);
                    } else {
                        $qb = $qb->where('0 = 1');
                    }

                    return $qb;
                }
            )));
        };
        $refreshTopic = function ($form, $field) use ($factory) {
            /** @var FormFactory $factory */
            /** @var Form $form */
            $form->add($factory->createNamed('topic','entity',null, array(
                'class'         => 'AAA\CoreBundle\Entity\Topic',
                'property'      => 'name',
                'label'         => 'Sujet',
                'empty_value'   => 'Sélectionne une valeur',
                'empty_data'    => null,
                'required'      => false,
                'query_builder' => function (EntityRepository $repository) use ($field) {
                    $qb = $repository->createQueryBuilder('topic')
                        ->innerJoin('topic.field', 'field');

                    if($field instanceof Field) {
                        $qb = $qb->where('topic.field = :field')
                            ->setParameter('field', $field);
                    } elseif(is_numeric($field)) {
                        $qb = $qb->where('field.id = :field_id')
                            ->setParameter('field_id', $field);
                    } else {
                        $qb = $qb->where('0 = 1');
                    }

                    return $qb;
                }
            )));
        };

        // Populate ddl to show form
        $country = $this->country;
        $builder->addEventListener(FormEvents::PRE_SET_DATA, function (FormEvent $event) use ($refreshTopic, $refreshField, $factory, $country) {
            /** @var Lesson $data */
            $data = $event->getData();
            $form = $event->getForm();

            // Test if null because this event is called 2 times, only the second time with the actual Lesson object (which has null values in the creation case)
            if($data != null)
                // In case of creation
                if($data->getId()==null) {
                    // Creates empty fields
                    $refreshTopic($form, null);
                    $refreshField($form, null);
                }
                // In case of edition
                else {
                    if ($data->getTopic() != null) {
                        $refreshTopic($form, $data->getTopic()->getField());
                        if ($data->getTopic()->getField() != null) {
                            $refreshField($form, $data->getTopic()->getField()->getClassYear());
                        }
                    }
                    else {
                        $refreshField($form, null);
                        $refreshTopic($form, null);
                    }
                }

            /** @var FormFactory $factory */
            $form->add($factory->createNamed('classyear', 'entity', null, array(
                'class'         => 'AAACoreBundle:ClassYear',
                'property'      => 'name'.$country,
                'mapped'        => false,
                'label'         => 'Année',
                'empty_value'   => 'Sélectionne une valeur',
                'empty_data'    => null,
                'required'      => false,
                'query_builder' => function (EntityRepository $repository) {
                    return $repository->createQueryBuilder('classyear')
                        ->orderBy('classyear.sort');
                }
            )));
        });
        // Populate ddl when form was posted
        $builder->addEventListener(FormEvents::PRE_BIND, function (FormEvent $event) use ($refreshTopic, $refreshField) {
            $form = $event->getForm();
            $data = $event->getData();

            if(array_key_exists('classyear', $data)) {
                $refreshField($form, $data['classyear']);
            }
            if(array_key_exists('field', $data)) {
                $refreshTopic($form, $data['field']);
            }
        });

        // Select value in ddl when editing
        $builder->addEventListener(FormEvents::POST_SET_DATA, function (FormEvent $event) use ($refreshTopic) {
            /** @var Lesson $data */
            $data = $event->getData();
            $form = $event->getForm();
            if (null === $data || null === $data->getId() ) {
                return;
            }

            if ($data->getTopic() != null) {
                $form->get('field')->setData($data->getTopic()->getField());
                if ($data->getTopic()->getField() != null) {
                    $form->get('classyear')->setData($data->getTopic()->getField()->getClassYear());
                }
            }
        });
    }
    public function getName()
    {
        return 'LessonDetailForm';
    }
    /** @param OptionsResolverInterface $resolver */
    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array(
            'data_class' => 'AAA\CoreBundle\Entity\Lesson'
        ));
    }
}

?> 
```

# javascript - 用于 Google Fusion Table 图层的 Javascript 工作但试图整理代码

> ID：11107822
> 
> 赞同：0
> 
> 时间：2012-06-19T19:16:36.007
> 
> 标签：javascript, google-maps, checkbox, google-fusion-tables

我正在使用 Google Fusion Tables 创建地图。它有几个图层，根据选中的复选框显示或隐藏。

我创建了一些代码来打开/关闭图层，使用变量 (layer10on) 来跟踪每个图层 (layer10) 当前是否可见：

```
function toggleLayer10() { 
      if(layer10on) { layerl0.setOptions({map: null}); } 
      if(!layer10on) { layerl0.setOptions({map: map}); } 
      layer10on=!layer10on; 
} 
```

...

```
<input type="checkbox" checked onchange="toggleLayer10();" /> 
```

这可以正常工作，但我不想为每个复选框/图层复制此代码，因此我尝试传递选中哪个复选框以及与之相关的图层的参数，但它不起作用：

```
function toggleLayer(layerToChange,checkboxID) {
    if(!document.getElementById(checkboxID).checked) {
        layerToChange.setOptions({map: null});
    }
    if(document.getElementById(checkboxID).checked) {
        layerToChange.setOptions({map: map});
    }
} 
```

...

```
<input value="layer10" id="check10" type="checkbox" checked onchange="toggleLayer(this.value,this.id);" /> 
```

自从我进行任何编码以来已经有好几年了，所以任何帮助让我知道我哪里出错了，我们将不胜感激。

谢谢，

尼古拉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:51:36.097

[我在这个答案](https://stackoverflow.com/a/10759889/1211981)中展示了一个示例 toggleLayer ，但它不是那么简洁。this_layer 是实际的 FT 层，应该是全局的。这将检查图层是否可见。

```
function toggleLayer(this_layer)
{
   if( this_layer.getMap() ){
        this_layer.setMap(null);
   }else{
        this_layer.setMap(map);
   }
} 
```

您需要将地图作为全局地图以及图层。我认为，但尚未测试您的复选框应如下所示：

```
<input value="layer10" id="check10" type="checkbox" checked onchange="toggleLayer(layer10);" /> 
```

# javascript - 如果我不在 Javascript 函数中传递参数会怎样？

> ID：11107823
> 
> 赞同：105
> 
> 时间：2012-06-19T19:16:42.223
> 
> 标签：javascript, overloading

我是 Javascript 世界的新手，正在修改编写非常基本的函数，偶然发现了下面的示例，我不确定当函数需要它时我不传递参数时它为什么会起作用。

**示例函数**

```
function myfunction(x) {
    alert("This is a sample alert");
} 
```

现在，如果我调用该函数`myfunction();`，我会收到警报。为什么当我没有传递参数时，我能够调用函数而没有任何错误或警告？

**编辑**

我没想到会有这么多很棒的答案，而且我还无法说出哪个答案是最好的，所以我可以要求人们提出最佳答案，我会将接受权授予那个人。

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2012-06-19T19:19:18.267

什么都不会发生——这意味着您不会收到错误或警告，因为在 javascript 中传递参数是可选的。
所有未“提供”的参数都将具有[`undefined`value](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/undefined)。

```
function foo(x, y, z){
    //...
}

foo(1); 
```

现在在`foo`函数内部：

```
function foo(x, y, z){
    x === 1
    y === undefined
    z === undefined
} 
```

您甚至可以传递更多参数，例如：

```
foo(1,2,3,4,5,7); // Valid! 
```

您可以知道`arguments.length`函数内部提供的参数数量。

```
function foo(x, y, z) {
    console.log('x value: ' + x);
    console.log('y value: ' + y);
    console.log('z value: ' + z);
    console.log('Arguments length: ' + arguments.length);
}
console.log('Zero parameters');
foo();
console.log('Four parameters');
foo(1, 2, 3, 4);
```

处理任意数量参数的有用函数示例：

```
function max() {
    var maxValue = arguments[0];
    for (var i = 1; i < arguments.length; i++) {
        if (maxValue < arguments[i]) {
            maxValue = arguments[i];
        }
    }
    return maxValue;
}

alert(max(1, 5, 7, 2, 88, 32, 44));
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-06-19T19:19:01.183

JavaScript 函数中的所有参数都是可选的（阅读“松散类型”）。

> 可以使用任意数量的参数调用 JavaScript 函数，而不管函数定义中指定的参数数量如何。因为函数是松散类型的，所以它无法声明它期望的参数类型，并且将任何类型的值传递给任何函数都是合法的。当一个函数被调用的参数少于声明的参数时，额外的参数具有未定义的值。

您可以通过使用命名参数变量或参数对象在函数中引用函数的参数。该对象包含传递给函数的每个参数的条目，第一个条目的索引从 0 开始。例如，如果一个函数传递了三个参数，您可以按如下方式引用该参数：

```
arguments[0]
arguments[1]
arguments[2] 
```

*   JavaScript - 权威指南，第 5 版

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-06-19T19:19:00.053

这就是 JavaScript 的工作原理。参数是可选的，如果函数调用中缺少参数，它们将在函数中具有“未定义”的非真正值值。

“可选”的意思是：调用*任何*函数都涉及任意长的参数列表。*传递*给函数的参数数量与*声明*的数量之间不需要有任何关系。考虑这个声明的最佳方式是：

```
function x(a, b, c) {
  // ...
} 
```

是你声明一个函数并将名称“a”绑定到第一个参数，“b”到第二个，“c”到第三个。但是，绝不保证这些中的任何一个在以后的任何给定函数调用中*实际上都会绑定到一个值。*

同理，你可以定义一个完全不带任何参数的函数，然后通过`arguments`对象“找到”它们：

```
function noArgs() {
  var a = arguments[0], b = arguments[1], c = arguments[2];
  // ...
} 
```

所以这与第一个函数*不太*一样，但它在大多数实际计算的方面都很接近。

JavaScript 中的“未定义”值是一个值，但随着语言的发展，它的语义有点不寻常。特别是它与价值不完全相同`null`。此外，“未定义”本身不是关键字；它只是一个半特殊的变量名！

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-19T19:20:07.803

JavaScript 不像其他语言那样具有函数参数的默认值。因此，您可以根据需要传递尽可能多或尽可能少的参数。

如果不传递值，则参数为`undefined`.

```
function myfunction(x) {
    alert(x);
}

myfunction(); // alerts undefined
myfunction(1); // alerts 1
myfunction(1,2,3); // alerts 1 
```

如果您传递的参数多于签名中的参数，则可以使用[`arguments`](https://developer.mozilla.org/en/JavaScript/Reference/Functions_and_function_scope/arguments).

```
function myfunction(x) {
    alert(x);
    console.log(arguments);
}

myfunction(1,2,3); // alerts 1, logs [1,2,3] 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-19T19:21:54.323

您还可以提供比函数中提到的参数更多的参数

```
myFunction(1,2,3,4,5,6,7,'etc'); 
```

您可以使用`arguments`数组属性来查看提供的参数。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T19:19:08.867

因为在函数期望能够使用您应该传递的参数之前没有错误。

例如：

```
function myfunction(x) {
    return x*2;
} 
```

会抛出错误；尽管可能只有一个`NaN`（在这种情况下）或一个`variable is undefined`.

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T19:23:39.730

如果省略参数，则其值为`undefined`. 这使您可以很容易地创建可选参数。

另一个特点是能够定义一个不带参数的函数，并使用`arguments`对象成功调用它。这使您可以轻松地创建可变长度参数数组。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-12-23T07:28:47.517

在 javascript console.log 中，函数内部给出未定义作为未传递参数的输出，但在函数外部它给出未定义错误，因为函数内部浏览器显式声明了变量。例如

```
console.log(x) 
```

给出 VM1533:1 Uncaught ReferenceError: x is not defined 而

```
function test(x) {
console.log(x)
}
test(); 
```

给出未定义的。这是因为函数 test() 被浏览器重写为：

```
function test(x) {
    var x;
    console.log(x)
    } 
```

另一个例子 ： -

```
var x =5 ;
function test(x) {
console.log(x)
}
test(); 
```

随着函数变为未定义

```
function test(x) {
    var x;
    console.log(x)
    } 
```

以下示例中的警报将给出未定义的：-

```
 var x =5;
    function test() {
    alert(x);
    var x =10;
    }

test(); 
```

上述函数将变为：-

```
 function test() {
    var x;
    alert(x);
    x =10;
    } 
```

函数内 javascript 变量的范围是函数级范围，而不是块级。例如

```
function varScope() {

for(var i = 0; i < 10; i++){
    for(var j = 0; j < 5; j++){}
        console.log("j is "+j)
    }
    console.log("i is "+i);

}
varScope(); 
```

将输出为：

```
j is 5 
i is 10 
```

功能再次变为：-

```
 function varScope() {
    var i;
    var j;
    for(i = 0; i < 10; i++){
        for(j = 0; j < 5; j++){}
            console.log("j is "+j)
        }
        console.log("i is "+i);
    } 
```

# python - 使用 Google App Engine 的异步获取请求

> ID：11107825
> 
> 赞同：4
> 
> 时间：2012-06-19T19:16:47.917
> 
> 标签：python, google-app-engine

我正在阅读GAE中[异步获取请求的文档。](https://developers.google.com/appengine/docs/python/urlfetch/asynchronousrequests)Python 不是我的第一语言，所以我很难找出最适合我的情况的语言。我并不真正需要或关心请求的响应，我只需要它发送请求并忘记它并继续执行其他任务。

所以我尝试了文档中的代码：

```
from google.appengine.api import urlfetch

rpc = urlfetch.create_rpc()
urlfetch.make_fetch_call(rpc, "http://www.google.com/")

# ... do other things ...

try:
    result = rpc.get_result()
    if result.status_code == 200:
        text = result.content
        # ...
except urlfetch.DownloadError:
    # Request timed out or failed.
    # ... 
```

`try:`但是除非我包含and ，否则这段代码不起作用`except`，我真的不关心。省略该部分会使请求无法通过。

在我不关心响应的情况下创建获取请求的最佳选择是什么，以便它只是开始请求，然后继续执行任何其他任务，并且永不回头？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:25:53.920

只需在

```
# ... do other things ... 
```

评论是。当您完成其他操作时，请调用`rpc.wait()`. 请注意，它不是`try/except`使它起作用，而是`get_result()`调用。那可以换成`wait()`.

所以你的代码看起来像这样：

```
from google.appengine.api import urlfetch

rpc = urlfetch.create_rpc()
urlfetch.make_fetch_call(rpc, "http://www.google.com/")

# ... do other things ... << YOUR CODE HERE

rpc.wait() 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T19:33:33.640

如果您不关心响应，响应可能需要一段时间，并且您不希望处理程序在向用户返回响应之前等待它完成，您可能需要考虑触发[任务队列](https://developers.google.com/appengine/docs/python/taskqueue/)任务这会发出请求，而不是在面向用户的处理程序中进行。

# c# - C# XML 解析 - 搜索特定元素

> ID：11107826
> 
> 赞同：2
> 
> 时间：2012-06-19T19:16:48.203
> 
> 标签：c#, xml, .net-4.0

我正在使用`XMLReader`C# .net 4.0 来搜索一小段 XML。我想在 XML 中查找特定元素，我正在使用该`XMLReader.ReadToFollowing("name")`方法来查找元素。我不知道元素在 XML 文档中的顺序；它们处于不同的序列中或完全缺失。顺序对我来说无关紧要，但如果元素丢失，我会抛出异常。

XMLReader 只是转发的，所以如果我要查找的第一个元素是 XML 文档中的最后一个值，那么额外的读取将失败。

我正在考虑为每个搜索创建一个新的 XMLReader。我只有一小部分要查找的元素，而且 XML 不是很大，所以我认为不会有太多开销，但我可能是错的。

当您不知道元素的顺序时，是否有更好的库可用于搜索 XML？或者 XML 中缺少顺序是否违反了 XML 规范？

具体来说，假设我有一些简单的 XML。一个头和10个孩子。

```
<sometag>
     <element1>data</element1>
     <element2>data</element2>
     .
     .
     .
     <element10>data</element10>
</sometag> 
```

打开 5 个 XMLReader 来查找这些元素会不会效率低下？我也可以使用一个阅读器并逐步浏览每个元素，但是我需要跟踪我找到了哪些元素。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:26:06.977

您可以使用[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)（linq2xml）而不是 XMLReader，快速轻松地（通过[`Element`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xcontainer.element.aspx)方法）：

```
var doc = XDocument.Load(xmlFilePath);
var element1 = doc.Element(searchItemName);
if (element1 == null) throw ...
...
return ....; 
```

您可以根据需要多次调用它，而无需重新加载 xml 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:22:09.893

尝试使用 XPath。它要快得多，并且对元素的顺序（仅层次结构）不敏感。

MSDN 文档：http: [//msdn.microsoft.com/en-us/library/ms256086.aspx](http://msdn.microsoft.com/en-us/library/ms256086.aspx)

使用 XPath 编程确实需要一些学习。如果您的 XML 指定了一个名称空间，您需要确保将其包含在您的 XPath 查询中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T19:26:10.513

你有 .NET 4.0，所以使用 Linq to XML。

# c++ - C++ 中的友元函数

> ID：11107829
> 
> 赞同：14
> 
> 时间：2012-06-19T19:17:16.380
> 
> 标签：c++, friend-function

我对 C++ 中的友元函数有疑问。Friend 函数不是 claas 的成员函数，可以直接从 main 调用。那么，如果我们将函数`friend`保留`private`在`public`. `class`我通常注意到这些`friend`功能总是在公共部分。在什么情况下我们应该将`friend`函数保持在`private`.

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-19T19:18:52.430

编译器不会关注友元函数是在类的私有部分还是公共（或受保护）部分中。大多数人把它放在公共部分，但无论你把它放在哪里，它都是公开可见的。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T19:22:24.720

`public:`如果您在类的或`private:`部分中声明它并不重要。无论如何，它将发挥相同的作用。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-19T19:36:32.220

`friend`关键字只是在这里授予对**不**属于您的类的`private`另一个函数的访问权限。由于它不属于您的课程，因此不受说明符的影响。**`public/private`**

 *** * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T19:32:00.620

在本节中使用友元声明的一个原因`private`是它可以将它们与它们应该有权访问的成员函数或对象保持在一起。

除此之外，没有任何区别。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-01-26T17:30:53.693

你把友谊声明放在哪里都没关系。它可能存在于任何类部分（公共、私有或受保护）内，但必须放在任何函数或聚合之外。

这是来自 www.cprogramming.com 的一个很好的示例和解释：

> 一个类查看另一个类的私有变量通常很有用，即使这些变量可能不应该成为该类支持的公共接口的一部分。例如，如果您正在编写二叉树，您可能希望使用具有私有数据的 Node 类，但实际上将节点组合在一起的函数能够直接访问数据而无需工作，这仍然很方便通过节点接口。有时，访问器函数甚至可能不适合对数据进行间接访问。**

# qt - 在 QWidget 上画一条线

> ID：11107830
> 
> 赞同：9
> 
> 时间：2012-06-19T19:17:22.047
> 
> 标签：qt, qpainter

我正在尝试创建一个由一条水平黑线组成的小部件。这个小部件将被放置在 QGridLayout 中，这样它就占据了整行，从而充当分隔符。由于调整了安装布局的小部件的大小，我希望这条线改变它的大小以跟上。我检查了许多选项，包括 QLine、QGraphicsView 和 QImage，但我似乎无法画线，更不用说调整大小了。

我在它自己的类中实现它，所以我可以在需要时重用它。谁能帮我解决这个问题？

```
#include "startMenuSectionFooter.h"

#include <QtGui>

StartMenuSectionFooter::StartMenuSectionFooter( QWidget *parent )
  : QWidget( parent )
{
  layout = new QHBoxLayout( this );
}

void StartMenuSectionFooter::paintEvent( QPainEvent *e )
{
  QPointF p1 = QPointF( parentWidget()->height(), 0 );
  QPointF p2 = QPointF( parentWidget()->height(), parentWidget()->width() );

  QPainter painter( this );
  painter.setRenderHint( QPainter::Antialiasing, true );
  painter.setPen( QPen( Qt::black, 10 ) );

  painter.drawLine( p1, p2 );
} 
```

在这种情况下，是安装前面提到`parent`的父级。`QWidget``QGridLayout`

```
#ifndef START_MENU_SECTION_FOOTER_H
#define START_MENU_SECTION_FOOTER_H

#include <QWidget>

class QHBoxLayout;
class QPainEvent;

class StartMenuSectionFooter : public QWidget
{
  Q_OBJECT

  QBHoxLayout *layout;

  void paintEvent( QPainEvent *e );

public:
  StartMenuSectionFooter( QWidget *parent = NULL );
};

#endif 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-19T19:31:36.587

在 Qt 中创建水平线的最简单方法是使用 a`QFrame`并将`frameShape`属性设置为`QFrame::HLine`。然后，您可以将此框架放置在具有适当列跨度的网格布局中。这是一个简单的，人为的例子：

```
QFrame* myFrame = new QFrame();
myFrame->setFrameShape(QFrame::HLine);

const int NUMBER_OF_COLUMNS_IN_GRID = 4;
myGridLayout->addWidget(myFrame, 0, 0, 1, NUMBER_OF_COLUMNS_IN_GRID); 
```

这应该做你需要做的一切，包括在父布局调整大小时自动调整大小。您还可以使用框架的调色板以所需的颜色显示它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-01T03:53:47.313

您拼错了 QPain **t** Event。拼写错误意味着您的paintEvent() 函数不会覆盖基类的paintEvent()。

因为你从不使用“QPainEvent”的变量e，所以没有语法错误。

# excel - 编写与其他用户有冲突的 Excel 文件

> ID：11107831
> 
> 赞同：0
> 
> 时间：2012-06-19T19:17:23.960
> 
> 标签：excel, c#-4.0

我已经尝试了几种我在这里看到的解决方案，但在编写 Excel 文件时仍然遇到问题。

我有一个模板 xlsx 文件，我最初将其复制到工作文件中以开始使用。然后我有一个这样的块

```
 using (var connection = new OleDbConnection(string.Format(
        "Provider=Microsoft.ACE.OLEDB.12.0;Data Source={0};Mode=ReadWrite;Extended Properties=\"Excel 12.0;HDR=YES\";",
        outputfileName)))
    {
        connection.Open();
        var command = connection.CreateCommand(); 
```

紧随其后的是一系列

```
command.ExecuteNonQuery(); 
```

最终，在 using 块关闭之前，我有

```
 connection.Close( );
    } 
```

此时，我的应用程序似乎挂在 Excel 文件上。如果我尝试手动或通过打开它`System.Diagnostics.Process`，我会得到“文件被锁定以供'另一个用户'编辑”，即使我回答“确定”，我仍然只能看到空白模板。

当我真正退出我的应用程序时，Excel 文件似乎是完整且可访问的。显然，关闭连接不足以刷新缓冲区并释放文件。

我想了解的是如何释放我对文件的保留，以便我实际上可以让我的应用程序让用户有机会使用 Process 为他打开文件，或者如果他愿意，可以手动打开它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-25T12:52:54.990

我找到了EPPlus，它好用而且根本不打开Excel，这样就解决了锁定问题。这实际上并不能回答问题，但它是一种可接受的解决方法，尤其是因为写入 EPPlus 比通过 OLEDB 写入 Excel 容易得多。

# iphone - 根本无法 pushViewController

> ID：11107839
> 
> 赞同：2
> 
> 时间：2012-06-19T19:18:12.773
> 
> 标签：iphone, pushviewcontroller

我通过执行以下操作将按钮添加到 UITableView

```
 // Add checkOut button
    UIView      *viewHolder =   [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width, 165)];
    UIButton    *checkOut   =   [UIButton buttonWithType:UIButtonTypeRoundedRect];
    CGRect      buttonRect  =   CGRectMake((self.view.frame.size.width - 220.)/2, 30, 220., 44.);

    [checkOut setTitle:@"Check out" forState:UIControlStateNormal];
    [checkOut addTarget:self action:@selector(goToCheckOut) forControlEvents:UIControlEventTouchUpInside];
    [checkOut setFrame:buttonRect];
    [viewHolder addSubview:checkOut];
    self.shoppingListTable.tableFooterView  =   viewHolder; 
```

goToCheckOut 会：

```
#pragma mark - goToCheckOut
- (void)goToCheckOut {
    NSLog(@"goToCheckOut");
    AnotherViewController  *controller =   [[AnotherViewController alloc] initWithNibName:@"AnotherViewController" bundle:nil];
    [self.navigationController pushViewController:controller animated:YES];
} 
```

当我点击按钮时，日志显示

```
goToCheckOut 
```

但我没有被导航到另一个视图控制器。

有谁知道为什么？请帮忙。谢谢

* * *

@pgb：您对此很熟悉。标签栏中的 uiviewcontroller 是我自己的视图控制器...但是，我没有 uitabbarviewcontroller。相反，我有`uiviewcontroller`其中`uitabar`。要在单击每个 uitab bar 按钮时显示视图，我正在执行以下操作

```
#pragma mark - TabBarDelegate
- (void)tabBar:(UITabBar *)tabBar didSelectItem:(UITabBarItem *)item {
    // firstViewController section
    if ( item.tag == 0 ) {
        [self.firstViewController.view removeFromSuperview];
        [self.secondViewControoler.view   removeFromSuperview];
        self.title   =   @"First View Controller";
        [self.view insertSubview:self.firstViewController.view belowSubview:taBar];
    }
    // secondViewController section
    else if (item.tag == 1){
        [self.firstViewController.view removeFromSuperview];
        [self.secondViewControoler.view   removeFromSuperview];
        self.title    =   @"Second View Controller";
        frame.origin.x      =   [self horizontalCoordinateAt:item.tag + 2];
        [self.view insertSubview:self.secondViewControoler.view belowSubview:taBar];
    }

} 
```

我现在拥有的当前结构是

```
UIViewController0 ( it is also a navigationController)
  UIViewController1
  UIViewController2
    UITabBar
      FirstViewController
      SecondViewController 
```

如何更改以便我可以在 FirstViewController 和 SecondViewController 中执行 pushViewController。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:23:26.193

根据您的描述，我猜`UIViewController`您在选项卡视图控制器中设置的是您自己的视图控制器，而不是`UINavigationController`.

您的层次结构需要是：

```
UITabViewController
   UINavigationController
     YourCustomViewController
   UINavigationController
     OtherCustomViewController 
```

相反，我的猜测是您具有以下层次结构：

```
UITabViewController
   YourCustomViewController
   OtherCustomViewController 
```

`self.navigationController`可能不是`nil`，因为您可能正在创建一个`UINavigationController`，但您 - 再次，我的猜测 - 未能将 navigationController 设置为由选项卡视图控制器处理的视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T00:55:52.783

我为这个问题找到了自己的解决方案。我所做的是：

```
1\. Create a delegate with a callback method in each FirstViewController and SecondViewController
2\. Make UIViewController2 conform delegate of first and second view controller
3\. Implement the method in delegate ( a call back ) such as pushViewController.... 
```

# html - HTML5/CSS3 无类框架

> ID：11107842
> 
> 赞同：13
> 
> 时间：2012-06-19T19:18:44.037
> 
> 标签：html, css

有谁知道一个简单的 HTML5/CSS3 框架，它应用最少的格式而不需要自定义类名？理想情况下，它只需要正确布局的 HTML5，并以最小的灵活性定位元素，使用通用规则，比如侧边栏宽度等。

在 HTML5 中，对自定义类名的需求要少得多，比如`header`,`nav`或等元素`aside`，但我还没有看到一个框架充分利用了这一点。有任何想法吗？

**澄清：**我经历了所有常见的嫌疑人（Bootstrap、HTML% Boilerplate、Shim 等），但没有一个能引起我的注意。那个痒是一个简单的 HTML5 结构的简单组合，它对设计没有任何假设，而是在语义上定义了一切，用一个简单的 CSS3 样式表定义了实际的布局。我可以使用几个样式表来设想它，其中一个定义元素布局的基本样式表和用于实际设计的单独样式表。它将用作各种项目的简单起点，以后可以单独定制。

显然，我可能需要按照韦斯利建议的方式自己写一个……

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T19:26:19.417

听起来您想要的不是 CSS 框架，而只是一个简单的自定义样式表。

不要阻止你努力寻找已经存在的东西，但你最好自己写。也许从现有的众多`reset.css`. 无法通过类名挂钩（或挂钩）的默认样式不是很灵活。

你真的不应该逃避课程，你应该利用它们。没有框架会知道 HTML 元素的嵌套位置和方式，或者仅根据标签名称它们应该是什么样子，这就是我们通常使用类的原因之一。

如果您密切关注新 HTML5 元素的语义，您会发现它`header`并不总是意味着“带有徽标的页面顶部”，`footer`不仅仅是整个页面底部的元素，而且`aside`不并不总是等同于“侧边栏”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-05-01T17:40:19.087

我发现了一个非常相似的需求并最终制作了自己的项目：[https ://github.com/oxalorg/sakura](https://github.com/oxalorg/sakura)

你只需要加入`sakura.css`就可以了，不需要对 HTML 进行任何更改。

这是一个**演示**：[https ://oxal.org/projects/sakura/demo/](https://oxal.org/projects/sakura/demo/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T19:24:26.257

您可以使用 HTML5 Boilerplate 启动您的 HTML5 应用程序。

Dan Wahlin 发布了一篇关于设置它的好博文：

[http://weblogs.asp.net/dwahlin/archive/2011/06/05/getting-started-using-html5-boilerplate.aspx](http://weblogs.asp.net/dwahlin/archive/2011/06/05/getting-started-using-html5-boilerplate.aspx)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-10-01T20:44:37.543

[https://github.com/herrshuster/style.css](https://github.com/herrshuster/style.css)

这是我目前的项目。它还没有完全准备好部署，但它正是您正在寻找的。如果您有任何建议，或者您想谈论它，我会很高兴。 [这是一个测试页面，您可以在其中看到语义布局](http://herrshuster.github.io/style.css/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-06-15T21:58:32.200

在[https://github.com/dbohdan/classless-css](https://github.com/dbohdan/classless-css)上有一个很好的无类和 classlight CSS 主题列表，并附有屏幕截图！[此外，您可以使用https://dohliam.github.io/dropin-minimal-css/](https://dohliam.github.io/dropin-minimal-css/)上的下拉菜单预览几个不同的主题，很高兴看到每个主题的样子。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T19:27:42.953

我自己对此没有太多经验，但您可能会发现[Twitter Bootstrap](http://twitter.github.com/bootstrap/)很有帮助。它使用网格系统，使您可以轻松地在页面上定位元素。这对于在页面上为侧边栏和其他常见功能创建区域可能特别有用。

但是，它与您的建议有些相反，因为它大量使用类。不过，从我所看到的情况来看，这些课程以非常结构化的方式进行处理，因此可能与您正在寻找的内容很接近。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-04-03T15:19:44.823

对于任何对此主题感兴趣的人，我建议阅读[Heydon Pickering 的文章](http://www.smashingmagazine.com/author/heydon-pickering/)，他在没有使用任何类的情况下构建[了他的博客主题。](http://www.heydonworks.com/)

* * *

我还建议查看[我的项目](https://github.com/fiatjaf/unitemplate)，该项目旨在为博客和类似博客的网站（每个网站都有标题和作者，以及页面、帖子和部分）创建一个[基本的无类 HTML 模板，并在其上添加纯 CSS 主题。](https://github.com/fiatjaf/unitemplate/blob/gh-pages/unitemplate.html)该模板大量使用了 HTML5 分段、页眉和页脚，并略微假设您应该将每个网站内容放在哪个部分。[主题](https://github.com/fiatjaf/unitemplate/tree/gh-pages/themes)是互联网上其他特定于框架的主题的端口。

有一个[游乐场](http://fiatjaf.alhur.es/unitemplate/playground)，您可以在其中基于基本模板在各种 HTML 页面上测试主题（只需在框上写下主题名称，或粘贴 CSS url）。在尝试思考这个主题时，我还写了[一篇糟糕的旧文章。](http://fiatjaf.alhur.es/programming/reusable-pure-css-themes/)

# sql-server - 系统查询以确定数据库中权限的完整（包括从 AD ROLES 继承）视图？

> ID：11107853
> 
> 赞同：0
> 
> 时间：2012-06-19T19:19:16.153
> 
> 标签：sql-server

在（SQL 2005 或 2008）中，是否可以对系统表运行自定义查询，或运行一些 sp_help* proc，以显示数据库中给定用户的所有权限，**包括从 AD 组成员继承**的权限？

## 更新#1

我希望查看所有凭借 AD 组成员身份拥有权限的用户（已在数据库中授予权限）。[UserA] 也是**AD 组**[SuperUsers] 的成员，而 [SuperUsers] 属于 SQL 角色 db_datareader，那么我希望看到 [UserA] 具有 db_datareader 权限。（在这种情况下，[UserA]*没有*被明确地*直接*授予对数据库的任何权限，所有权限都继承自组 [SuperUsers]

为了测试到目前为止发布的示例，我在我的数据库中添加了一个新用户，将其登录名设置为已知的 AD 组，并将 db_datareader 授予 AD 组。我想看到的是，**该 AD 组中的所有 AD 用户都**将在此查询中看到。

我没有使用任何发布的示例看到此输出。他们是否提供了*不同*的东西，或者他们实际上做了我想要的，但我的测试配置是错误的？

**也许这实际上是不可能的，因为它需要 SQL Server 能够枚举 Active Directory 组，而这可能根本无法做到？**

## 更新#2

SQL Server 本身无法识别 AD 组中的 AD 用户，因此无法实现这一点。

注意：可以在此处找到与此相关的另一个问题（但处理 SQL Server 用户和角色，而不是 AD 用户和组）：

[SQL Server 查询以查找数据库中所有用户的所有权限/访问权限](https://stackoverflow.com/questions/7048839/sql-server-query-to-find-all-permissions-access-for-all-users-in-a-database/7059579#7059579)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T18:25:28.973

这是不可能的。

正如@JeremyPridemore 所指出的：如果不对 AD 服务进行 SQLCLR 调用，SQL Server 就无法访问 AD 信息。（或其他形式的 AD 调用）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:21:47.547

这可能是一个有用的开始：

```
-- Server Pricipals - Who has access to this server?
SELECT 
    'Server Principals'
    , ServerPrincipals.name AS ServerObject
    , ServerPrincipals.type_desc AS ServerObjectType
    , ServerPrincipals.is_disabled AS [Disabled]
FROM sys.server_principals ServerPrincipals
ORDER BY type_desc

-- Server Roles - What server roles do my server logins have?
SELECT 
    'Server Roles'
    , ServerMemberPrincipal.name
    , ServerMemberPrincipal.type_desc
    , ServerRolePrincipal.name
    , ServerRolePrincipal.type_desc
FROM sys.server_role_members ServerRoleMembers
INNER JOIN sys.server_principals ServerMemberPrincipal
    ON ServerRoleMembers.member_principal_id = ServerMemberPrincipal.principal_id
INNER JOIN sys.server_principals ServerRolePrincipal
    ON ServerRoleMembers.role_principal_id = ServerRolePrincipal.principal_id

-- Database Users - Who has access to this database?
SELECT
    'Database Users'
    , UserName = DatabasePrincipal.name
    , UserType = DatabasePrincipal.type_desc
    , LoginName = sp.name
    , LoginType = sp.type_desc
FROM sys.database_principals DatabasePrincipal
INNER JOIN sys.server_principals sp 
    ON DatabasePrincipal.principal_id = sp.principal_id
ORDER BY LoginType, UserName, UserType, LoginName

-- Database Roles - What database roles do the users in this database have?
SELECT
    'Database Roles'
    , DatabaseMemberPrincipal.name
    , DatabaseMemberPrincipal.type_desc
    , DatabaseRolePrincipal.name
    , DatabaseRolePrincipal.type_desc
    , DatabaseRolePrincipal.is_fixed_role
FROM sys.database_role_members DatabaseRoleMembers
INNER JOIN sys.database_principals DatabaseMemberPrincipal
    ON DatabaseRoleMembers.member_principal_id = DatabaseMemberPrincipal.principal_id
INNER JOIN sys.database_principals DatabaseRolePrincipal 
    ON DatabaseRoleMembers.role_principal_id = DatabaseRolePrincipal.principal_id

-- Database Permissions - What can my database users and roles do?  
SELECT
    'Database Permissions'
    , GranteeName = grantee.name
    , [State] = DatabasePermissions.state_desc
    , Granted = DatabasePermissions.permission_name
    , [For] = DatabasePermissions.class_desc
    , [On] = COALESCE(OBJECT_NAME(DatabasePermissions.major_id), XmlSchemaCollection.name, DbName.Name, SymmetricKeys.Name, CertificateName.Name)
    , [By] = grantor.name
FROM sys.database_permissions DatabasePermissions
INNER JOIN sys.database_principals Grantee 
    ON DatabasePermissions.grantee_principal_id = grantee.principal_id
INNER JOIN sys.database_principals Grantor 
    ON DatabasePermissions.grantor_principal_id = grantor.principal_id
LEFT JOIN sys.xml_schema_collections XmlSchemaCollection
    ON XmlSchemaCollection.xml_collection_id = DatabasePermissions.major_id
    AND DatabasePermissions.class_desc = 'XML_SCHEMA_COLLECTION'
OUTER APPLY (SELECT DB_NAME() AS Name WHERE DatabasePermissions.class_desc = 'DATABASE') DbName
LEFT JOIN sys.symmetric_keys SymmetricKeys
    ON SymmetricKeys.symmetric_key_id = DatabasePermissions.major_id
    AND DatabasePermissions.class_desc = 'SYMMETRIC_KEYS'
LEFT JOIN sys.certificates CertificateName
    ON CertificateName.certificate_id = DatabasePermissions.major_id
    AND DatabasePermissions.class_desc = 'CERTIFICATE'
ORDER BY GranteeName, Granted, [For], [On], [State], [By] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-12-30T22:18:37.280

当以这种方式调用时，系统存储过程 xp_logininfo 将传递 AD 组的成员：

`EXEC xp_logininfo @acctname= 'domain\group', @option = 'members';`

注意：这需要先将 AD 组设置为 SQL 登录名，否则无论 AD 中的实际成员身份如何，都将返回 0 行

参考链接：[https ://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/xp-logininfo-transact-sql?view=sql-server-ver15](https://docs.microsoft.com/en-us/sql/relational-databases/system-stored-procedures/xp-logininfo-transact-sql?view=sql-server-ver15)

# c# - 有没有办法让 DLL 注册到 HKLM？

> ID：11107855
> 
> 赞同：4
> 
> 时间：2012-06-19T19:19:20.020
> 
> 标签：c#, dll, com, registry, windows-installer

**情况：**

我在 C# 中创建了一个 DLL，它使用 COM 运行`Process.Start`以通过 Web 浏览器运行程序。我使用 VS2010 的内置部署项目创建了一个 MSI。我为此 DLL 中的对象指定 Guid 属性，但我从未指定位置。当我运行 MSI 并选择为“Just Me”安装时，注册表项会`HKCU`按预期在 (current_user) 中创建。我需要它为所有用户运行，所以当我运行 MSI 并选择为“Everyone”安装时，注册表项会在`HKLM`(local_machine) 中创建，也符合预期。无论哪种方式，一旦 MSI 安装了 DLL，使用 DLL 的 Intranet Web 应用程序分别对我作为管理员 (current_user) 和所有用户 (local_machine) 都可以正常工作。

然而，在我公司的主要 IT 分支内部，我们无法创建自己的 MSI。我们必须向其唯一功能是为供应商/内部开发人员创建 MSI 的人发送请求和我们的 DLL/TLB 文件。当我手动运行他的 MSI 并选择为“所有人”安装时，它再次按预期工作。

**问题**：

但是，MSI 需要作为已部署的软件自动运行，发生这种情况时，注册表项仅在 中创建`HKEY_CURRENT_USER`，因此在测试用户尝试使用该功能时找不到它们。他说该`ALLUSERS`属性设置为 1，所以这应该可以工作。此外，当我要求他将它们安装到正确的位置（local_machine）时，他坚持说我需要在我的 DLL 中进行这些更改，因为“MSI 文件不会创建注册表项，它来自 DLL安装”。根据我在网上阅读的各种文章，MSI 通常指定*在*注册表中创建这些键的位置。

**问题（也适用于 TL；DR）：**

他关于我需要在我的 DLL 中指定注册表位置的说法是否属实？如果是这样，我如何以编程方式指定`HKLM`默认情况下要使用的这些键？现在，我所做的只是指定 ComVisible、ClassInterface、Guid、ProgId 和 ComDefaultInterface……我从未指定位置，除了 MSI 中的“Everyone/Just Me”。我对 COM 对象比较陌生，并且在注册表中弄乱了我自己的创作，所以我不想跳下他的喉咙说我不能做他应该做的事情。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:28:42.110

如果我正确理解您的问题，您的意思是：

*   您不能使用自己的 MSI 在网络中部署 DLL，
*   您无法控制 IT 部门在他们提供的 MSI 中打包和部署 DLL 的方式，
*   您希望 IT 注册 DLL 的方式与您的完全相同。

在这种情况下，我建议创建一个合并模块 (MSM) 而不是安装包 (MSI)。将所有设置逻辑（文件、注册表项、自定义操作等）放在合并模块中。

然后围绕该合并模块编写一个简单的 MSI shell 供您自己使用，并将合并模块提供给您的 IT 部门，要求他们将其集成到自己的安装包构建过程中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:28:30.797

有一个名为“regsvr.exe”的实用程序。它在 System32 中，您应该能够在命令行上仅使用“regsvr”调用它。因此，调用是：

```
prompt> regsvr [dllname] 
```

其中 [dllname] 是 DLL 文件的名称（如果它在当前目录中，则相对名称很好）。

在 windows Vista 和 7 上，该命令必须显式以管理员权限运行（即您必须以管理员权限运行 cmd.exe），仅仅作为管理员是不够的。

要以管理员权限运行命令提示符，请打开开始栏，在搜索字段中键入“cmd”，然后按 [CTRL][SHIFT][ENTER] 启动，如果出现 UAC 提示符，请接受它。（您可以通过这种方式以管理员身份运行任何程序。）

# ruby-on-rails - 通知中看不到 put_connections 发送的 koala facebook apprequests

> ID：11107856
> 
> 赞同：0
> 
> 时间：2012-06-19T19:19:21.253
> 
> 标签：ruby-on-rails, facebook, notifications, apprequests, koala

当我使用 put_connections 通过 Koala API 发送应用请求时，它会发送给相关用户，并且应用程序的请求数增加 1。但我在用户 facebook 页面的主通知部分看不到它。有没有为此设置的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-11T13:44:13.670

根据 Facebook API 文档：

> “应用程序到用户请求不会创建通知，尽管它们确实出现在应用程序和游戏仪表板中并增加应用程序书签计数器，类似于用户到用户请求。”

如果要创建带有通知的请求，则必须使用用户到用户请求。

[https://developers.facebook.com/docs/requests/#app_to_user](https://developers.facebook.com/docs/requests/#app_to_user)

# orm - 在 Yii 的 ORM 中定义三列主键

> ID：11107857
> 
> 赞同：0
> 
> 时间：2012-06-19T19:19:23.943
> 
> 标签：orm, yii

对于这三个表，表XXX有两列复合PK：

```
Table XXX:
 - XXX_id_1
 - XXX_id_2
 - name

Table YYY:
 - YYY_id
 - name

Table XXX_has_YYY:
 - X_id
 - Y_id
 - A_id 
```

如何在 Yii 的 ORM 中定义这种关系？

```
public function relations() {
  return array(
      'YYY' => array(self::MANY_MANY, 'YYY',
          'XXX_has_YYY(XXX_id_1, XXX_id_2, YYY_id)'),
  );
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-20T08:01:33.210

[请阅读文档。](http://www.yiiframework.com/doc/api/1.1/CActiveRecord#relations-detail)

> 请注意，对于复合外键，它们可以一起列出，用逗号分隔或指定为 array('key1','key2') 格式的数组。如果您需要指定自定义 PK->FK 关联，您可以将其定义为 array('fk'=>'pk')。对于复合键，它将是数组（'fk_c1'=>'pk_с1','fk_c2'=>'pk_c2'）。

此外，第二个参数指的是相关对象所属的活动记录类的名称。因此，您的关系应如下所示：

```
'XXX_has_YYY_relation_name' => array(self::MANY_MANY, XXX_has_YYY, array(XXX_id_1, XXX_id_2, YYY_id) ), 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:55:07.160

您可以使用[CManyManyRelation](http://www.yiiframework.com/doc/api/1.1/CActiveRelation#on-detail)`ON`的属性

# dojo - 以声明方式设置 dijit.layout.ContentPane 的内容

> ID：11107861
> 
> 赞同：0
> 
> 时间：2012-06-19T19:19:37.663
> 
> 标签：dojo

以下以声明方式创建的 dijit 显示在 Firefox 中，但不显示在其他浏览器中。我是否错误地设置了它的内容？

```
<div id="main" data-dojo-type="dijit.layout.ContentPane" data-dojo-props="href:'dashboard.html'"></div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T01:09:57.863

问题是我试图从文件系统本地加载 href 内容，而不是通过 http。出现 ajax 错误，我通过使用真实的 Web 服务器解决了这个问题

# ruby-on-rails - Ruby on Rails 编辑/更新方法正在创建一个新对象而不是更新

> ID：11107871
> 
> 赞同：0
> 
> 时间：2012-06-19T19:20:15.643
> 
> 标签：ruby-on-rails, ruby-on-rails-3, networking, network-programming

我有一个与这篇文章非常相似的问题（不太确定是否完全相同）：

[Edit 方法是创建新记录，而不是仅仅更新现有记录](https://stackoverflow.com/questions/1350364/edit-method-is-creating-new-records-instead-of-just-updating-existing-ones)

^^您可能会注意到，没有发布解决方案。

我为我们大楼的网络设置了一张地图。它设置为地板=>开关，开关=>插孔。每个只嵌套一次。

问题出在我的切换编辑/更新方法中。当我单击开关的编辑按钮时，它会将我重定向到正确的 url (.../switch/1/edit)，但我立即注意到表单不正确。而不是按钮说“更新开关”，它说“创建开关”，这正是发生的事情。创建了一个新开关，而不是更新我要更新的开关。

这是相关代码。如果你还想看什么，请告诉我。

...app/views/switches/_form.html.erb：

```
<%= form_for([@floor, @switch]) do |f| %>
  <% if @switch.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@switch.errors.count, "error") %> prohibited this switch from being saved:</h2>

      <ul>
      <% @switch.errors.full_messages.each do |msg| %>
        <li><%= msg %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :title %><br />
    <%= f.text_field :title %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %> 
```

...应用程序/控制器/switches_controller.rb：

```
class SwitchesController < ApplicationController

  def create
    @floor = Floor.find(params[:floor_id])
    @switch = @floor.switches.create(params[:switch])
    redirect_to(@floor)
  end

  def destroy
    @floor = Floor.find(params[:floor_id])
    @switch = @floor.switches.find(params[:id])
    @switch.destroy
    redirect_to(@floor)
  end

  def show
    @floor = Floor.find(params[:floor_id])
    @switch = @floor.switches.find(params[:id])

    respond_to do |format|
      format.html # show.html.erb
      format.json { render :json => @switch }
    end
  end

  def edit
    @floor = Floor.find(params[:floor_id])
    @switch = @floor.switches.find(params[:id])
  end

  def update
    @floor = Floor.find(params[:id])
    @switch = @floor.switches.find(params[:id])

    respond_to do |format|
      if @switch.update_attributes(params[:switch])
        format.html { redirect_to @switch, :notice => 'Floor was successfully updated.' }
        format.json { head :no_content }
      else
        format.html { render :action => "edit" }
        format.json { render :json => @switch.errors, :status => :unprocessable_entity }
      end
    end
  end

end 
```

任何人都可以帮助弄清楚为什么它会使用 create 方法而不是 update 吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:37:25.760

错误就在这里，表格总是为新开关而建

```
<%= form_for([@floor, @floor.switches.build]) do |f| %>
  <% @switch = @floor.switches.find(params[:id]) %> 
```

将其更改为

```
<%= form_for([@floor, @switch]) do |f| %> 
```

（并删除线）

```
<% @switch = @floor.switches.find(params[:id]) %> 
```

我`new`在控制器中看不到动作，它看起来像

```
def new
  @floor = Floor.find(params[:floor_id])
  @switch = @floor.switches.build
end 
```

# jquery - Grep 返回整个对象而不是数组

> ID：11107872
> 
> 赞同：0
> 
> 时间：2012-06-19T19:20:18.443
> 
> 标签：jquery, json, javascript-objects

有什么办法可以强制 jquery 的 grep 函数返回带有反射新数组的新对象？例如，我有如下示例 JSON 和 javascript。

```
var myObject = {     "Apps" : [    
    {
        "Name" : "app1",
        "id" : "1",
        "groups" : [
            { "id" : "1", 
              "name" : "test group 1", 
              "desc" : "this is a test group"
             },
            { "id" : "2",
              "name" : "test group 2",
              "desc" : "this is another test group"
             },
              { "id" : "2",
              "name" : "test group 2",
              "desc" : "this is another test group"
             }
        ]              
    }
    ]
   }

 var b,a;
    $.each(myObject.Apps, function() {    
     b = $.grep(this.groups, function(el, i) {
    return el.id.toLowerCase() === "2"                
    });         

   }); 

 alert(JSON.stringify(b)); 
```

因此，一旦我运行它，我将按预期在警报中收到以下文本。

```
[{"id":"2","name":"test group 2","desc":"this is another test group"},{"id":"2","name":"test group 2","desc":"this is another test group"}] 
```

但我想要整个 javascript 对象与这个新的返回数组像这样。预期的 O/p::

```
 "Apps" : [    
    {
        "Name" : "app1",
        "id" : "1",
        "groups" : [
             { "id" : "2",
              "name" : "test group 2",
              "desc" : "this is another test group"
             },
              { "id" : "2",
              "name" : "test group 2",
              "desc" : "this is another test group"
             }
        ]              
    }
    ] 
```

任何想法都会有很大帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-19T21:52:47.757

如果理解正确，您希望从主对象中删除 $.grep 中未返回的任何组。

使用您的方法在循环`$.grep()`中添加一行之后`$.each``$.grep`

演示：http: [//jsfiddle.net/67Bbg/](http://jsfiddle.net/67Bbg/)

```
var b,a;
$.each(myObject.Apps, function() {    
   b = $.grep(this.groups, function(el, i) {
      return el.id.toLowerCase() === "2"                
   });

  /* replace group with new array from grep */         
   this.groups=b;
 }); 
```

编辑：缩写版本

```
$.each(myObject.Apps, function() {    
    this.groups= $.grep(this.groups, function(el, i) {
      return el.id.toLowerCase() === "2"                
   });
 }); 
```

# java - Jersey/JAXB：对 HTTP POST 和 GET 使用相同的 POJO，但在 JSON 响应中仅返回 GET 属性的子集。

> ID：11107874
> 
> 赞同：4
> 
> 时间：2012-06-19T19:20:34.503
> 
> 标签：java, json, jaxb, jersey, jax-rs

这似乎是另一件相当简单的事情，但我再次为如何做到这一点而苦苦挣扎。

我有一个 POJO，带有 Jersey/JAXB 注释，它具有与之关联的 HTTP POST 和 GET 方法。在 POJO 上执行 POST 时，请求正文作为 JSON 发送，本质上是对 POJO 进行建模。执行 GET 时，我想返回 POJO，但只返回 POJO 属性的子集。

我尝试在我不想要的 GET 属性上使用 @XmlTransient，但是在 HTTP POST 期间我无法使用这些属性。

首先，这是我的 POJO (User.java)

```
import javax.xml.bind.annotation.*
@XmlRootElement
public class User {
  private String userName;
  private String userEmail;
  private String userType;  // Do not return this property in GET
  private String userTmpPassword;  // Do not return this property in GET

  // User constructor
  public User(String userName,...) {
    this.userName = userName;
    //...etc...
  }

  // getters and setters with @XmlElement on each attribute 
  //...etc...
  @XmlElement(name="user_name")
  public String getUserName() {
    return userName;
  }
  public String setUserName() {
    return userName;
  }
  //...etc...
} 
```

这是我的 RESTful 服务类：

```
public class userService{
  @POST
  @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
  public Response getUser(User userInfoAsJSON) {
    User user = new User(userInfoAsJSON.getUserName(), ...);
    // pseudo-code for persisting User
    writeUserToDB(user);
    return Response.status(200);
  }

  @GET
  @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
  public Response getUser(String Id) {
    // Pseudo-code for retrieving user
    User user = retrieveUserFromDB(user);
    Response.status(200).entity(user);
  }
} 
```

正如预期的那样，我对 HTTP GET 的 JSON 响应返回了 User 的所有属性，如下所示：

```
{
  "user_name": "John Doe",
  "user_email": "john_doe@johndoe.com",
  "user_type": "Admin",
  "user_tmp_password": "abc_xyz"
} 
```

然而，我只想在 JSON 响应中返回几个属性：

```
{
  "user_name": "John Doe",
  "user_email": "john_doe@johndoe.com"
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T20:01:52.417

您始终可以返回部分填充的`User`对象，因为默认情况下不编组空值。您甚至可以在您的`retrieveUserFromDB`方法中实现这一点，以避免复制步骤。

```
 @GET
  @Produces({MediaType.APPLICATION_JSON, MediaType.APPLICATION_XML})
  public Response getUser(String Id) {
    // Pseudo-code for retrieving user
    User userFromDB = retrieveUserFromDB(user);
    User user = new User();
    user.setUserName(userFromDB.getUserName());
    user.setUserEmail(userFromDB.getUserEmail());
    Response.status(200).entity(user);
  } 
```

**了解更多信息**

*   [http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html](http://blog.bdoughan.com/2012/04/binding-to-json-xml-handling-null.html)

# jquery - JAX-WS：如何使 SOAP 响应返回 HashMap 对象

> ID：11107875
> 
> 赞同：6
> 
> 时间：2012-06-19T19:20:34.760
> 
> 标签：jquery, ajax, web-services, soap, jax-ws

所以我有一个简单的网络服务：

```
 @WebMethod(operationName="getBookList")
    public HashMap<Integer,Book> getBookList()
    {
        HashMap<Integer, Book> books = new HashMap<Integer,Book>();
         Book b1 = new Book(1,"title1");
         Book b2 = new Book(2, "title2");
         books.put(1, b1);
         books.put(2, b2);
        return books;
    } 
```

book 类也很简单：

```
public class Book
{
    private int id;
    private String title;

    public int getId()
    {
        return id;
    }

    public String getTitle()
    {
        return title;
    }
    public Book(int id, String title)
    {
        id = this.id;
        title = this.title;
    }
} 
```

现在，当您在浏览器的测试器中调用此 Web 服务时，我得到：

```
Method returned
my.ws.HashMap : "my.ws.HashMap@1f3cf5b"

SOAP Request
  ...
  ...

SOAP Response

<?xml version="1.0" encoding="UTF-8"?>
<S:Envelope xmlns:S="http://schemas.xmlsoap.org/soap/envelope/">
    <S:Body>
        <ns2:getBookListResponse xmlns:ns2="http://ws.my/">
            <return/>
        </ns2:getBookListResponse>
    </S:Body>
</S:Envelope> 
```

是否可以在标签中显示 返回的*HashMap*对象，例如`<return>`

```
<return>
     <Book1>
          id=1
          title=title1
     </Book1>
</return>
<return>
     <Book2>
          id=2
          title=title2
     </Book2>
</return> 
```

我想要返回标签中的值的原因是，从客户端，我在网页中使用 jQuery AJAX 来调用这个 Web 服务，而我得到的响应 XML 只是空`<return>`标签。我如何从 AJAX 客户端获得真正的账面价值？

这是我的 AJAX 网页代码：

```
 $.ajax({
        url: myUrl, //the web service url
        type: "POST",
        dataType: "xml",
        data: soapMessage, //the soap message. 
        complete: showMe,contentType: "text/xml; charset=\"utf-8\""         

    });
function showMe(xmlHttpRequest, status)
{  (xmlHttpRequest.responseXML).find('return').each(function()
   { // do something
   }
} 
```

我用简单的 hello world web 服务进行了测试，它工作正常。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-20T08:20:42.923

为了帮助 JAXB，您可以将您的“包装”`HashMap`在一个类中，并使用 将`@XmlJavaTypeAdapter`您的映射自定义序列化为 XML。

```
public class Response {

    @XmlJavaTypeAdapter(MapAdapter.class)    
    HashMap<Integer, Book> books;

    public HashMap<Integer, Book> getBooks() {
        return mapProperty;
    }

    public void setBooks(HashMap<Integer, Book> map) {
        this.mapProperty = map;
    }

} 
```

然后使用这个类作为你的返回值`WebMethod`

```
@WebMethod(operationName="getBookList")
    public Response getBookList()
    {
         HashMap<Integer, Book> books = new HashMap<Integer,Book>();
         Book b1 = new Book(1,"title1");
         Book b2 = new Book(2, "title2");
         books.put(1, b1);
         books.put(2, b2);
         Response resp = new Response();
         resp.setBooks(books);
         return resp;
    } 
```

毕竟，您需要实现您的适配器`MapAdapter`。有几种方法可以做到这一点，所以我建议你检查[一下](https://stackoverflow.com/questions/3941479/jaxb-how-to-marshall-map-into-keyvalue-key)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-19T21:02:46.313

> JAX-WS 如何使 SOAP 响应返回 Hashmap 对象

您不应**公开**任何 Java 特定的结构，例如`HashMap`通过 Web 服务。
Web 服务是关于*互操作性*的，像你这样的路径是错误的。
只需返回所需的信息，以便 Web 服务客户端可以构建哈希表，而不管它是用哪种编程语言编写的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-07-17T17:25:57.350

在 JBoss 论坛上，我找到了适用于 Glassfish 的解决方案。原始解决方案在[JBoss 论坛上，来自 Allesio Soldano 的主题](https://community.jboss.org/thread/102552?tstart=0)。它由一个辅助类组成，该类具有 HashMap 作为嵌套类型，即 `HashMap<String, String>`. 比在 Web 服务类中，这个辅助类被用作返回值。注释`@XmlAccessorType(XmlAccessType.FIELD)`确保 SOAP 响应中的 SOAP 正确处理该结构。

```
@XmlAccessorType(XmlAccessType.FIELD)
public class MyHash {
  protected HashMap<String,String> realMap;

  // constructor
  public MyHash() {
    realMap = new HashMap<String,String>();
  }

  /**
   * @return HashMap<String,String>
   */
  public HashMap<String,String> getRealMap() {  
    if (realMap==null) {  
      realMap = new HashMap<String,String>();  
    }
    return realMap;  
  }

  /**
   * @param key
   * @param value
   */
  public void put(String key, String value) {
    realMap.put(key, value);
  }
} 
```

在 Webservice 中直接使用该类作为返回对象，无需任何额外设置。当然，必须先创建对象，然后像在另一个 POJO 中一样填充映射。

如果 HashMap 由另一个非原始类型（对象）组成，我证明，可以在嵌套的复杂对象上递归地使用相同的方式。规则是，该类不是继承的，即它必须作为属性嵌套，并且最后一个类具有所有原始属性。

# hibernate - 两个模式之间的休眠级联

> ID：11107877
> 
> 赞同：2
> 
> 时间：2012-06-19T19:20:41.863
> 
> 标签：hibernate, schema, cascade, transient

我们有一个应用程序，其中包含不同模式上的实体之间的链接：

```
Entity A (from schema 1) --@OneToMany(cascade=MERGE)--> Entity B (from schema 2). 
```

在这种情况下合并 A 时，有时我们会遇到级联类型合并的问题：

```
A = getAbyId(id)
A.setB( new B() )
merge(A) 
```

这是错误：

```
object references an unsaved transient instance – 
save the transient instance before flushing 
```

此错误将对象 B 称为未保存的实体。

我认为使用 cascade TYPE = Merge，它应该以正确的顺序处理以保存 B 然后 A。

我们应该手动处理吗？

谢谢你

# ruby-on-rails - 在 cron 中运行的 rake 任务找不到数据库表

> ID：11107880
> 
> 赞同：4
> 
> 时间：2012-06-19T19:20:50.753
> 
> 标签：ruby-on-rails, rake, whenever

我已经创建了 cron 作业，无论何时（https://github.com/javan/whenever）：

```
every 1.hours do
   rake "scrape" 
end 
```

rake scrape 任务在我手动运行时运行良好，但是当 cron 运行时我得到：

```
rake aborted!
Could not find table 'beskeds' 
```

命令运行是：

```
/bin/bash -l -c 'cd /Users/klaus/Documents/src/Ruby/rails/fintra && RAILS_ENV=production bundle exec rake scrape --silent' 
```

顺便说一句，我正在使用 RVM

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T19:33:48.540

好的，我现在明白了。原来我只是在我自己的电脑上运行这个站点，没有生产环境，因此没有生产数据库......

每当配置应该是：

```
every 1.hours do
   rake "scrape", environment => "development"
end 
```

我还必须在环境中运行：

```
whenever -w --set environment=development 
```

# php - 如何抑制“不是有效的 MySQL 结果资源”错误

> ID：11107881
> 
> 赞同：1
> 
> 时间：2012-06-19T19:20:55.370
> 
> 标签：php, mysql, sql, suppress-warnings, error-suppression

我有一个简单的脚本来检查用户上传了多少文件：

```
$sql = "SELECT * from $username where file IS NOT NULL";
$result = mysql_query($sql);
$count=mysql_num_rows($result); 
```

如果表 $username 没有任何文件不为空的行，它会吐出：

“警告：mysql_num_rows()：提供的参数不是有效的 MySQL 结果资源...”

我能做些什么来避免这种情况？有没有一种简单的方法可以简单地禁止显示此错误消息？还是一个简单的“if”语句可以阻止 SQL 查询首先发生？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-19T19:23:50.000

你可以这样做：

```
<?php
 $sql = "SELECT * from $username where file IS NOT NULL";
 $result = mysql_query($sql);
 if($result) 
 {
     $count=mysql_num_rows($result);
 }
 else 
 {
     $count = 0;
  } 
```

或使用速记：

```
<?php 
 $count = ($result) ? mysql_num_rows($result) : 0; 
```

笔记：

就像您在其他评论中看到的那样，这只是对您的问题的回答，一次解决一个问题。此处 $username 的使用可能会很棘手，尤其是当它是动态或用户生成的内容时。最好看看您与数据库交互方式的一些长期改进，但这里是现在的修复；-)

PS。如果您不想学习所有新东西，也许像[Codeigniter](http://codeigniter.com/)这样的框架可以帮助您。使用它的[活动记录类](http://codeigniter.com/user_guide/database/active_record.html)很容易，而且它本身可以处理很多事情。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-19T19:24:38.050

抑制错误是您最不想做的事情。你应该处理它们。

```
$sql = 'SELECT * FROM ' . mysql_real_escape_string($username) . ' WHERE `file` IS NOT NULL';
$result = mysql_query($sql);

if ($result !== false) {
    $count=mysql_num_rows($result);
} else {
    // An error occurred, handle it here.
} 
```

此外，您使用动态表名也很可怕。不要这样做！

此外，您很可能对 SQL 注入持开放态度。学习在[PDO 中使用准备好的查询](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html)来避免这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-19T19:25:28.067

以最简单的方式，您可以执行`mysql_query($sql) or die("invalid sql");`或尝试尝试/捕获。

```
<?php
$link = mysql_connect('localhost', 'mysql_user', 'mysql_password');
if (!$link) {
    die('Could not connect: ' . mysql_error());
}
if (!mysql_select_db('database_name')) {
    die('Could not select database: ' . mysql_error());
}
$result = mysql_query('SELECT name FROM work.employee');
if (!$result) {
    die('Could not query:' . mysql_error());
}
echo mysql_result($result, 2); // outputs third employee's name

mysql_close($link);
?> 
```

我认为来自[http://www.php.net/manual/en/function.mysql-result.php](http://www.php.net/manual/en/function.mysql-result.php)的上述代码说明了您的需要。

这里，`if (!$result) {...}`是关键。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-19T19:24:15.077

抑制这个错误的一个简单方法是在mysql_query和mysql_num_rows之前加上一个@，但不建议这样做，你应该做一个适当的错误处理

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-19T19:24:05.323

`$result`如果您在运行查询时出错，则为假，因此在尝试使用它之前检查一下：

```
if $result === false)
{
     // stuff went boom!
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-06-19T19:24:06.593

你可以试试这个`@`符号。所以你对 mysql_query 的调用现在看起来像这样`$result = @mysql_query($sql);`：

### 更新

正如其他地方所述（特别是作为对此答案的评论），除非您知道自己在做什么，否则不应抑制错误。

### 更新 2

这是[错误控制运算符的文档](http://php.net/manual/en/language.operators.errorcontrol.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-19T19:24:38.630

```
if( !is_resource($result) ) 
```

参见[手册`is_resource()`](http://www.php.net/manual/en/function.is-resource.php)。

# android - Android：如何获取捆绑密钥

> ID：11107886
> 
> 赞同：0
> 
> 时间：2012-06-19T19:21:16.640
> 
> 标签：android, variables, arguments, bundle

我不知道如何获得条件方法的捆绑密钥和/下面的 Toast 消息。

对于我的学习经验，我们将不胜感激任何帮助。谢谢。

```
public class ListViewFragment extends ListFragment implements OnItemClickListener {
    private final String KEY_ADPTR_ID = "KEY_ADPTR_ID";
}

@Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState):

        Bundle args = this.getArguments();
        args.getString(KEY_ADPTR_ID);
        . . .
    }
. . .
    private void showData(String json) throws JSONException {

        String adptrID = this.getBundle(KEY_ADPTR_ID);//<-HOW DO I ACCOMPLISH THIS CORRECTLY!!??

        Toast.makeText(getActivity(), adptrID, Toast.LENGTH_SHORT).show();

        if (adptrID == "3") {
           . . .
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:27:28.963

如果您在片段的参数中传递 KEY_ADPTR_ID，那么您在 onActivityCreated 中编写的内容是正确的

```
Bundle args = this.getArguments();
String keyAdaptrId = args.getString(KEY_ADPTR_ID); 
```

# javascript - window.location.href 是否具有特定于服务器的行为？

> ID：11107888
> 
> 赞同：0
> 
> 时间：2012-06-19T19:21:21.443
> 
> 标签：javascript, android

我有一个相对简单的网站。用户在页面上执行一些操作，并且一些 javascript 运行......运行后，它调用：

> window.location.href = 窗口.location.href;

...刷新页面。

它似乎工作正常，在 android 模拟器的浏览器中进行了测试。

但是，当 QA 在他们的环境中部署时，它不是......页面不会重新加载。没有查询字符串或任何类似的东西，主要是静态 html 和 javascript/jquery。

我已经使用我的模拟器来测试我的和 qa 站点以及 qa 的模拟器来测试两者。在这两种情况下，只是 qa 服务器出现了这个问题……我还使用普通的桌面浏览器测试了两个站点（即 chrome、ff），并且行为是一致的。

所以，我想知道，服务器上是否有任何可能导致这种行为的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:24:02.983

为什么不这样：

```
window.location.reload(true); 
```

该`true`参数强制重新加载（不使用浏览器缓存）。 [https://developer.mozilla.org/en/DOM/window.location](https://developer.mozilla.org/en/DOM/window.location)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:26:11.630

改为使用`window.location.reload(true);`。这会强制从服务器重新加载页面。您的代码可能会导致浏览器缓存页面并且不再从服务器获取页面的行为。

# android - 如果我的应用程序从内存中删除，如何接收 ACTION_SCREEN_OFF？

> ID：11107896
> 
> 赞同：1
> 
> 时间：2012-06-19T19:22:03.590
> 
> 标签：android, broadcastreceiver, android-manifest

我可以在代码中为 ACTION_SCREEN_OFF 注册一个广播接收器，因为它在清单中不起作用。

但是，如果 android 从内存中删除我的应用程序（不再需要），我将不再收到代码注册的广播......

有没有办法确保我总是会收到它，就像清单注册的意图接收器一样？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:49:44.853

活动仅用于 UI 工作，因此一旦您的 Activity 被解除（不再可见并因 w/e 原因而被销毁），所有寄存器接收器也会被销毁（不应该让这种情况发生）。

如果您总是想接收广播，您需要实现一个服务并从该服务注册您的广播接收器。只有您可以判断这是否有必要，通常不建议提供 24/7 全天候运行的完整服务，但如果需要，则需要。

# sencha-touch - 如何在 Store 的代理中设置 URL？

> ID：11107898
> 
> 赞同：1
> 
> 时间：2012-06-19T19:22:05.200
> 
> 标签：sencha-touch, extjs, sencha-touch-2

我的代码有一个错误，但我不知道出了什么问题。当点击 NestedList 的叶项时，我尝试在 Store 中设置新的 url。这是我的商店：

```
Ext.define('Application.store.DetailStore', {
extend: 'Ext.data.Store',

config: {
    model: 'Application.model.DetailModel',
    autoLoad :true,
    sorters: 'title',
    grouper : function(record) {
        return record.get('title')[0];
        },

   proxy: {
    type: 'ajax',
    url : '/data/data1.php',
   reader: {
   type: 'json',
  rootProperty:'recipes'}
         } 
} 
```

});

这是我在 NestedList 中的leafitemtap 监听器：

```
onLeafItemTap: function(nestedList, list, index, node, record, e) {
    filter = record.get('text');
    var detailCard = nestedList.getDetailCard();       
    Ext.getStore('Application.store.DetailStore').getProxy().setUrl('/data/data2.php');
    Ext.getStore('Application.store.DetailStore').load()
} 
```

在此之后我无法点击叶子项目并且详细卡不显示。有谁知道可能出了什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T23:22:51.520

下面我使用 getMain 方法在点击叶子项目并加载商店时将 detailCard 推送到列表顶部。我还假设您正在使用 getMain 作为参考在控制器中定义leafitemtap 逻辑。

您还可以使用 storeId 代替“Application.store.DetailStore”

```
 Ext.getStore('Application.store.DetailStore').setProxy({
        type: 'ajax',
        url: '/data/data2.php'
    }).load({
        callback: function(records, operations, success) {
            if (success = true) {
                this.getMain().push({
                    xtype: 'detailsCard',
                    data: record.getData()
                })
            } else {
                Ext.Msg.alert('Error', 'Something went wrong!', Ext.emptyFn);
            }
        },
        scope: this
    }); 
```

# c# - DbLinq 的对象跟踪性能能提高吗？

> ID：11107910
> 
> 赞同：1
> 
> 时间：2012-06-19T19:22:49.737
> 
> 标签：c#, mysql, dblinq

我有一个通过 DbLinq 连接到 MySQL 数据库的 ASP.NET MVC2 站点。网站上会定期执行一组特定的操作，其中包括循环访问几个表中的一组特定记录并更新它们，以及在其他一些表中添加一些新记录。

我一直在用一组中等大小的数据进行测试。在我现在的特定测试集中，在更新时它最终会插入 44 个新行并更新 81 个其他行。但是我对 SubmitChanges() 的调用最终需要很长时间 - 大约 3-4 分钟，这似乎需要很长时间才能推动（我认为是）对数据库进行相对少量的更改。

我最终做了一些简单的分析，我发现问题似乎不在于在数据库上执行查询，甚至不在于构建查询。大多数时间似乎都被 UpdateEntity 内部对 AllTrackedEntities.ContainsReference() 的调用占用了。

为了给出一些实际数字，从最近的一次测试中我得到了：

*   SubmitChangesImpl 中的时间：204884 毫秒
    *   UpdateEntity 中的时间：200908 毫秒
        *   ContainsReference 中的时间：148173 毫秒
        *   QueryBuilder.GetUpdateQuery 中的时间：685 毫秒
        *   QueryRunner.Update 中的时间：28 毫秒
        *   UpdateReferencedObjects 中的时间：49958 毫秒

如您所见，构建和运行 SQL 查询与检查是否存在对我们正在更新的实体的引用相比相形见绌（如果没有引用，则插入实体，尽管在这种情况下所有的更新实体存在）。虽然我理解为什么会发生这种情况，为了维护数据完整性等等，但这正在扼杀这些定期更新操作的性能。

我查看了将 ObjectTrackingEnabled 设置为 false，但这使得 DataContext 是只读的，这对我没有用 - 我的问题特别是更新的性能。

有什么办法可以提高更新的性能吗？就尝试在一次提交中推送 40-50 次插入和 80 多次更新而言，我是否以不太理想的方式使用 DbLinq？如果是这样，有没有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:21:22.043

如果您使用长期存在的 DataContexts，您在其中读取数据、修改数据、提交更改，然后重复使用相同的 DataContext 对象，这可能会对性能产生负面影响。一旦 DataContext 实体化了一个实体，它就会在 DataContext 的整个生命周期内将其保留在内部，作为其对象跟踪的一部分。随着时间的推移，这个内部缓存会变得很大，在某些情况下，它实际上会成为数据库大部分的内存缓存。这会减慢速度，并在 SubmitChanges 期间为 DataContext 带来更多工作。

DataContext 是短暂的。它的生命周期应该是一个工作单元。创建它，将其用于某事，然后处置它。

这里有一些更详细的信息：

[为什么重用 DataContext 会对性能产生负面影响？](https://stackoverflow.com/questions/3233839/why-would-reusing-a-datacontext-have-a-negative-performance-impact)

这是由接近产品的人提出的：

[http://blogs.msdn.com/b/dinesh.kulkarni/archive/2008/04/27/lifetime-of-a-linq-to-sql-datacontext.aspx](http://blogs.msdn.com/b/dinesh.kulkarni/archive/2008/04/27/lifetime-of-a-linq-to-sql-datacontext.aspx)

> 长期使用：一旦您通过查询检索对象，DataContext 本身不会覆盖它们。因此，随着时间的流逝，如果经常更改检索到的对象，它们可能会变得陈旧。
> 
> SubmitChanges() 之后的生活：DataContext 可以在 SubmitChanges() 之后使用，但必须小心。SubmitChanges() 完成所有艰苦的工作，找出您对对象图所做的所有更改。它为您订购 CUD 操作，并在每个更改的对象的粒度上提供乐观并发检查。

# c# - .Net Framework 初始化错误 – 无法找到运行此应用程序的运行时版本 (TypeInitializationException)

> ID：11107911
> 
> 赞同：1
> 
> 时间：2012-06-19T19:22:54.200
> 
> 标签：c#, .net, winforms, deployment, .net-4.0

我在尝试部署应用程序时遇到了上述错误，但仅在某些情况下：

1.  在 VS IDE 中：没问题，我的应用运行良好
2.  在 Windows 资源管理器中双击我的 .exe：没问题，我的应用程序运行良好
3.  在 Windows 资源管理器中右键单击我的 .exe 并选择“运行方式”：我收到上面的错误，它不会运行
4.  在已部署 .exe 的远程计算机上的 Windows 资源管理器中右键单击我的 .exe，然后选择“运行方式”：我收到上述错误，它不会运行
5.  在已部署 .exe 的远程计算机上双击 .exe 的桌面链接/快捷方式：非常模糊的错误消息，我的应用程序将无法运行。

Windows 事件日志中的信息（在场景 3 失败后）是：

```
Type: Error
Source: .NET Runtime
Message: Application: duckbilledPlatypus.exe
Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.TypeInitializationException
Stack:   at duckbilledPlatypus.duckbilledPlatypusMainForm..ctor()
   at duckbilledPlatypus.Program.Main() 
```

我四处游荡，寻找和尝试不同的东西，抓住稻草。这是一个：

我的 App.config 文件（如下）的布局有问题吗？

注意：我刚刚添加了“supportedRuntime version="v4.0.30319" 但没有任何区别；我需要将“startup”添加到“configSections”部分吗？

```
<?xml version="1.0"?>
<configuration>
  <configSections>
    <section name="log4net"     
type="log4net.Config.Log4NetConfigurationSectionHandler,     
log4net"/>
  </configSections>
  <log4net>
    <appender name="ConsoleAppender"     
type="log4net.Appender.ConsoleAppender">
      <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date{ISO8601} [%thread]     
%-5level %-50.50logger | %message%newline"/>
      </layout>
    </appender>
    <appender name="DebugAppender"     
type="log4net.Appender.DebugAppender">
      <immediateFlush value="true"/>
      <layout type="log4net.Layout.SimpleLayout"/>
    </appender>
    <root>
      <level value="DEBUG"/>
      <appender-ref ref="ConsoleAppender"/>
    </root>
  </log4net>
  <startup>
    <supportedRuntime version="v4.0"    
sku=".NETFramework,Version=v4.0"/>
    <supportedRuntime version="v4.0.30319" />
  </startup>
</configuration> 
```

注意：我安装了以下 .NET 版本：1.0.3705；1.1.4322；2.0.50727；3.0；3.5；和 4.0.30319

我在其计算机上部署了我的应用程序的用户也是如此......

如果我将启动更改为：

```
 <startup>
    <supportedRuntime version="v4.0.30319" 
sku=".NETFramework,Version=v4.0.30319" />
  </startup> 
```

我得到（即使在 IDE 中），“*要运行此应用程序，您首先必须安装以下 .NET Framework 版本之一：.NETFramework,Version=4.0.30319 您想下载并安装 .NETFramework,Version- v4.0.30319 现在？* ”

但是，如果我只是使用它：

```
 <startup>
    <supportedRuntime version="v4.0.30319" />
  </startup> 
```

它在 IDE 中运行良好......但我仍然有所有有问题的其他场景（主要是它不会在部署位置运行）......？？？

## 更新

作为对 Charleh 的回答，主窗体的构造函数中唯一的内容是：

```
InitializeComponent();

foreach (string arg in Environment.GetCommandLineArgs()) {
    if (arg == "-DEBUG") {
        InDebugMode = true;
        break;
    }
}

tsch = new ToolStripControlHost(dateTimePickerDuckbilledPlatypus);
toolStripDuckbilledPlatypusMain.Items.Add(tsch); 
```

## 再次更新

我刚刚尝试从 App.config 中完全删除以下内容：

```
 <startup>
    <supportedRuntime version="v4.0.30319" />
  </startup> 
```

……但这没什么区别。

## 再次更新

似乎一旦我复制了一个它需要访问的文件（一个 .txt 文件），它就运行良好（它这样做了一次）。但是现在又回到了不想再打开的状态，事件日志数据是：

```
Source: .NET Runtime
Message: Application: duckbilledPlatypus.exe Framework Version: v4.0.30319
Description: The process was terminated due to an unhandled exception.
Exception Info: System.IO.FileLoadException
Stack:   at duckbilledPlatypus.duckbilledPlatypusMainForm.InitializeComponent()
   at duckbilledPlatypus.duckbilledPlatypusMainForm..ctor() at duckbilledPlatypus.Program.Main() 
```

如果不止一个人访问 .exe 或 .txt，会不会出现这个问题？

## 最后一次更新，我认为

结果是，首先我未能复制几个 .dll 和 .exe 所需的文本文件。一旦那些在那里，它运行良好。尽管如此，在我看来，右键单击该文件会给出关于 .NET 运行时版本缺失/错误的虚假 err msg 并且 err msg 具有误导性，这对我来说似乎很奇怪。为什么 err msg 不能告诉您未找到哪个 .DLL 或文件？这将使调试变得更简单/更快。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T20:38:24.403

由于它是一个表单应用程序，请添加它并查看是否从错误中获得更多信息；您可能需要使用 EventLog.CreateEventSource() 注册事件日志源

```
 /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        Application.Run(new Form1());

        Application.SetUnhandledExceptionMode(UnhandledExceptionMode.Automatic);
        Application.ThreadException += new System.Threading.ThreadExceptionEventHandler(Application_ThreadException);
    }

    static void Application_ThreadException(object sender, System.Threading.ThreadExceptionEventArgs e)
    {
        EventLog eLog = new EventLog("SomeLog", ".", "YourApp");

        eLog.WriteEntry(UnrollException(e.Exception), EventLogEntryType.Error);
    }

    static string UnrollException(Exception ex)
    {
        StringBuilder sb = new StringBuilder();

        sb.Append(ex.Message);

        while (ex.InnerException != null)
        {
            ex = ex.InnerException;
            sb.Append(Environment.NewLine);
            sb.Append(ex.Message);
        }

        return sb.ToString();
    } 
```

编辑：免责声明-我实际上并没有运行此代码，因此它可能会引发一些它自己的异常：D

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T20:51:41.230

根据您上面发布的错误描述，我认为这根本与 .NET 框架无关；相反，这看起来是您的表单的构造函数引发了错误。这得到了堆栈跟踪从 开始的事实的支持`duckbilledPlatypus.duckbilledPlatypusMainForm..ctor()`。

尝试在构造函数中注释掉代码并查看应用程序是否运行。如果它确实运行，您可以更仔细地调查哪些代码导致了未处理的异常。`InitializeComponent`我的怀疑是，当运行导致此异常时，您可以控制表单。

# iphone - 在iPhone上保存从0到3的数字长链（NSArray），有效的方式

> ID：11107913
> 
> 赞同：1
> 
> 时间：2012-06-19T19:23:02.670
> 
> 标签：iphone, ios, ipad, ios5, binary

我有一个介于 0 和 3 之间的很长的数字链。我想知道如何保存它，以便它使用尽可能少的磁盘空间。我一直在考虑它，我注意到从 0 到 3 的数字也可以是两个二进制数字，因此将其保存为二进制可能是个好主意。

我还想将其保存为自定义文件类型，以使我的应用程序成为读取它的唯一应用程序，但这不是必需的（但是，我们将不胜感激）。

我也发现了这个问题，这可能很有用，但我还没有找到方法：

*   [iPhone写入二进制数据](https://stackoverflow.com/questions/1526416/iphone-writing-binary-data)
*   [将文件类型关联到 iPhone 应用程序](https://stackoverflow.com/questions/2774343/how-do-i-associate-file-types-with-an-iphone-application)

但我找不到任何关于如何在 iOS 上创建自定义文件类型的问题或博客或其他内容，只有关于如何将其与应用程序关联的问题。

如果您需要更多信息，请问我！

提前致谢！！！

**编辑：**

链大概有几百，我想应该会小于1000。真的，我想要实现的是保存一个发明的DNA数据，DNA碱基是A，G，C和T，可以转换为 0、1、2、3；但如果我将其保存为文本文件，它会大得多。我唯一要做的就是计算互补碱基 (G > C, C > G, A > T, T > A)。

再次感谢您的关注！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T21:33:32.503

我在你的个人资料上看到你 15 岁，所以我假设你这样做是为了好玩和学习。如果您要专业地执行此操作，您可能希望使用标准的[csv 格式](http://en.wikipedia.org/wiki/Comma-separated_values)，因为它是最快和最容易实现的东西。由于您处理的值少于一千个，因此文件永远不会大于 2 KB，相比之下，这没什么。您的应用程序文件可能会大数千倍。

示例文件格式：

```
0,1,2,3,2,1,3,0 
```

甚至

```
A,G,C,T,C,G,T,A 
```

如果您只是为了好玩或学习而不收取 100 美元/小时的费用，我会选择 2 位值的二进制格式。这有点挑战，做起来可能很有趣。但是，对于付费客户来说，额外的时间永远不值得。它对应用程序性能和内存使用的影响极低，而且您每多花一小时就会为客户多花 100 美元。

当然，如果您要处理数十亿个值，那么这种优化是有意义的，但是对于数百个值，不值得付出额外的努力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T22:03:45.577

这应该让您了解如何将 4 个 2 位值打包到单个字符中。我宁愿阅读 CSV 数据而不是这个，但你应该知道如何打包它。

或者，使用您手头的压缩库（ZLib 等）来输出压缩流。或者压缩我们在这里创建的比特流以获得更小的占用空间。

```
 // Given sourceArray as an array of ASCII chars containing '0' through '3'
unsigned char accumulator = 0;

for(i=0; i<numBytesInSourceArray; i++)
{
    int value = sourceArray[i] - '0';
    assert(value >= 0 && value <= 3);

    int shift = (i & 0x03) * 2;
    accumulator |= (value  - '0') << shift;

    if(shift == 6)    
    {
        outputByte(accumulator);
        accumulator = 0;
    }
}

if(numBytesInSource & 0x03)
{
    outputByte(accumulator);
} 
```

# mongodb - 在 MongoDB Document 中获取文档的键

> ID：11107916
> 
> 赞同：5
> 
> 时间：2012-06-19T19:23:18.537
> 
> 标签：mongodb, mongoid

除了遍历文档之外，还有什么方法可以获取 MongoDB 中特定文档的键列表？

即我想获取返回的文档的密钥

```
db.users.find({username:'xyz@abc.com}) 
```

是否有任何内联命令。如果没有，任何人都可以给出如何做的想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-10-27T17:53:26.833

```
Object.keys(db.users.findOne({username:'xyz@abc.com'})) 
```

将返回特定文档的所有键的列表。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-12-09T20:45:24.360

我知道我在这里聚会有点晚了，但你可以在 mongo shell 中输入：

```
var entry = db["users"].findOne({username:'xyz@abc.com});
for (var key in entry) { print(key); } 
```

重要的是`findOne`，这样您可以获取第一个文档的字段，而不是匹配文档的列表。然后，您可以简单地循环并打印密钥。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-19T19:24:39.727

不，没有这样的命令。您必须获取文档并在应用程序中处理它。

# android - Android Camera Preview 在虚拟手机中不起作用

> ID：11107917
> 
> 赞同：1
> 
> 时间：2012-06-19T19:23:20.767
> 
> 标签：android, camera, surfaceview, preview

我制作了一个应该显示相机预览的表面视图。然而，当我用我的虚拟安卓手机打开它时，我得到一个黑白格子背景和一个大的移动绿色框，而不是实际的相机图像。

这是表面视图的代码：

```
public class CameraPreview extends SurfaceView implements SurfaceHolder.Callback{

private Camera camera;
private SurfaceHolder surfaceholder;

public CameraPreview(Context context) {
    super(context);
    surfaceholder= getHolder();
    surfaceholder.addCallback(this);
    surfaceholder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
}

@Override
public void surfaceChanged(SurfaceHolder holder, int format, int width, int height)   {
    Camera.Parameters parameters = camera.getParameters();
    parameters.setPreviewSize(width, height);
    parameters.setPictureFormat(PixelFormat.JPEG);
    camera.setParameters(parameters);
    camera.startPreview();      
}
@Override
public void surfaceCreated(SurfaceHolder holder) {
    camera = Camera.open();
    try {
        camera.setPreviewDisplay(surfaceholder);
    } catch (IOException e) {}
}
@Override
public void surfaceDestroyed(SurfaceHolder holder) {
    stopCam();
}
public void stopCam(){
    if (camera!=null){
        camera.stopPreview();
        camera.release();
    }
}
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:31:28.773

我将假设“虚拟安卓手机”是指模拟器。您的代码没有任何问题，因为模拟器不支持大部分相机（有一些特殊例外），并且当模拟器没有要加载的相机时，它会显示该动画来模拟相机预览.

AFAIK，在模拟器中获得实际主摄像头支持的唯一方法是在 Mac OS X 上使用 4.0.x 模拟器图像。在这种情况下，它可以检测并使用内置的 iSight 摄像头。否则，您将需要编写特殊代码来支持与模拟器的网络摄像头连接，如本文所述：[http ://www.tomgibara.com/android/camera-source](http://www.tomgibara.com/android/camera-source)

高温高压

# google-app-engine - 在 GAE、Java、JDO 等环境中，DAO 是什么？

> ID：11107918
> 
> 赞同：4
> 
> 时间：2012-06-19T19:23:28.490
> 
> 标签：google-app-engine, jdo, dao

我刚刚开始用 Java 编写 GAE Web 应用程序，所以我对所有这些东西都是新手。我使用 JDO 来存储数据。我正在阅读很多在线资料（论坛、教程......），我到处都能看到**DAO**，但我真的不明白它是什么。是的，*数据访问对象*，技术......但是当有人命名一个变量时`userDAO`，该变量将包含什么？

让我们考虑以下代码（来自 GAE 文档）：

```
PersistenceManager pm = PMF.get().getPersistenceManager();

Employee e = new Employee("Alfred", "Smith", new Date());

try {
    pm.makePersistent(e);
} finally {
    pm.close();
} 
```

这真的很简单，对我来说很有意义......但是在这个例子中你会称之为 DAO 吗？

这可能是一个愚蠢的问题，但它会帮助我很多。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T19:32:09.460

“DAO”代表**数据访问对象**。这是一种封装模型逻辑的方法，通过使用提供更直观访问器的类包装给定模型实体。

我不确定您提供的示例，但我愿意推测。看起来 PersistanceManager 是一个管理应用程序数据持久层的对象。您的对象很可能通过此实例`Employee`持久存储，并且您构建的对象可能是一个 DAO，它提供了一个接口来管理该员工的状态，这比直接管理状态更简单。`PersistanceManager``Employee``PersistanceManager`

在 App Engine 上，数据存储区的一大性能限制是反序列化协议缓冲区。如果向模型实体添加复杂的方法，则会增加对象大小，这会在必须反序列化对象时导致性能下降。这里的要点是，**除了基本属性之外，您不想将任何其他内容添加到数据存储实体规范**中。添加辅助方法将导致性能下降。

因此，App Engine 上的一个常见模式是使用 DAO 将模型实体与一个可以提供此更高级别逻辑而不影响序列化性能的类一起包装。

# google-chrome-extension - 与 Firefox 扩展中的内容脚本通信

> ID：11107921
> 
> 赞同：0
> 
> 时间：2012-06-19T19:23:33.403
> 
> 标签：google-chrome-extension, firefox-addon, firefox-addon-sdk

我有一个 Chrome 扩展程序，它执行以下操作：

```
chrome.extension.sendRequest({action: "store", working_tab: tab.id, 
                              store_text: text}); 
```

相应地，听众是：

```
chrome.extension.onRequest.addListener(function(request, sender, sendResponse) {
  if (request.action == "store") {
     storeObject.process();
     sendResponse({});
   }
} 
```

您能否指导我，Firefox 扩展的相应代码是什么？我遵循了[Firefox 扩展教程](https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/dev-guide/tutorials/index.html)，但这对我没有多大帮助。

感激，如果你能给我发一个代码片段，这样我就可以开始研究这个了。

我这样做的原因：我正在尝试将此 Chrome 扩展程序移植到 Firefox。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-20T00:49:51.257

Firefox Add-on SDK 的等效代码类似于以下代码：

在 main.js 脚本中，创建了一个 page-mod 对象，该对象将内容脚本注入页面，并向其发送消息：

```
// main add-on script
pageMod.PageMod({
  include: "*.org",
  contentScriptFile: self.data.url("my-script.js"),
  // Send the content script a message inside onAttach
  onAttach: function(worker) {
    worker.port.emit("replacePage", "Page matches ruleset");
  }
}); 
```

在内容脚本中，接收到事件：

```
// content script
self.port.on("replacePage", function(message) {
  document.body.innerHTML = "<h1>" + message + "</h1>";
}); 
```

可以在此处找到一个工作示例：

~~[https://builder.addons.mozilla.org/addon/1053578/latest/](https://builder.addons.mozilla.org/addon/1053578/latest/)~~

重要的是要注意，虽然上面的示例只显示了从插件到页面的通信，但反过来也是可能的 - 您可以使用相同的基本发送模式将消息从内容脚本发送回插件从工作人员到内容脚本的消息并再次返回。有关内容脚本通信如何工作的更多信息：

[https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/dev-guide/guides/content-scripts/index.html](https://addons.mozilla.org/en-US/developers/docs/sdk/1.7/dev-guide/guides/content-scripts/index.html)

# android - android sqlite fts3 如果不存在则创建表

> ID：11107922
> 
> 赞同：0
> 
> 时间：2012-06-19T19:23:36.687
> 
> 标签：android, sqlite, fts3

我看到我们不能在创建虚拟表语句中使用“如果不存在”

```
CREATE VIRTUAL TABLE WORLD_LIST IF NOT EXISTS USING FTS3(_ID INTEGER PRIMARY KEY AUTOINCREMENT, WORD TEXT) 
```

如果我删除`IF NOT EXISTS`它，它只能工作一次。有没有其他选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:36:08.290

您可以测试表的存在，然后相应地分支：

```
SELECT DISTINCT tablename from sqlite_master where tablename = ? 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-19T19:47:25.520

它只工作一次，因为该表已经存在第二次。由于名称冲突，您收到错误消息。它按预期工作。你期待不同的东西吗？

不执行该语句将是一个不错的选择。不建议将是否运行该语句的决定推送到存储逻辑中。

如果您正在测试并希望每次都重新创建，那么只需删除表。

```
DROP TABLE WORLD_LIST;
CREATE VIRTUAL TABLE WORLD_LIST USING FTS3... 
```

# actionscript-3 - 由于缺少字体，Flash 无法打开脚本

> ID：11107923
> 
> 赞同：1
> 
> 时间：2012-06-19T19:23:38.620
> 
> 标签：actionscript-3, flash, actionscript, fonts

我刚刚下载了一个开源 Flash 项目，但第二次打开它，函数名称和变量显示如下：“[][][][]”，因为我的系统似乎缺少创建它的字体。字体出现成为“Courier New TUR”，它可能是通过土耳其 Windows 许可证或其他东西交付的。我一直试图找到这种字体几个小时都没有成功。

有谁知道我的问题的任何解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T21:05:12.533

在另一个编辑器中运行它？说记事本++？

# python - 如何在 argparse 中添加带有子解析器的可选位置参数？

> ID：11107926
> 
> 赞同：5
> 
> 时间：2012-06-19T19:23:44.160
> 
> 标签：python, python-2.7, argparse

我正在尝试使用 argparse 模块将必需的输入文件名和可选的输出文件名添加到多个子解析器。

这是我的尝试：

```
# test_argparse.py

import argparse

def setup_parser():

    parser = argparse.ArgumentParser(prog='test_argparse.py',
                            formatter_class=argparse.RawDescriptionHelpFormatter,
                            description='Testing the argparse module.')

    parser.add_argument('--version', action='version', version='%(prog)s 1.0')

    subparsers = parser.add_subparsers()
    parser_actionA = subparsers.add_parser('actionA')
    parser_actionB = subparsers.add_parser('actionB')
    parser_actionC = subparsers.add_parser('actionC')

    parser.add_argument('infile', nargs=1, help='input mesh file name')
    parser.add_argument('outfile', nargs='?', help='output mesh file name')

    return parser

if __name__ == '__main__':
    parser = setup_parser()
    args = parser.parse_args()
    print args 
```

如果我执行这个：

```
python test_argparse.py actionA infile outfile 
```

它不起作用，我得到的是：

```
usage: test_argparse.py [-h] [--version]
                    {actionA,actionB,actionC} ... infile [outfile]
test_argparse.py: error: unrecognized arguments: infile 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-19T21:39:32.950

定义一个具有公共参数的新解析器并将其作为[父](http://docs.python.org/library/argparse.html#parents)级传递给子解析器：

```
files = argparse.ArgumentParser(add_help=False)
files.add_argument('infile', nargs=1, help='input mesh file name')
files.add_argument('outfile', nargs='?', help='output mesh file name')

subparsers = parser.add_subparsers()
parser_actionA = subparsers.add_parser('actionA', parents=[files])
parser_actionB = subparsers.add_parser('actionB', parents=[files])
etc.. 
```

# r - 使用更少的内存从最小二乘拟合中获取残差

> ID：11107937
> 
> 赞同：3
> 
> 时间：2012-06-19T19:24:22.253
> 
> 标签：r, least-squares

我正在拟合具有相同预测变量和大量响应的最小二乘模型，而我需要的只是残差。该`qr.resid`函数是我发现执行此操作的最简单的函数，但它占用的内存比必要的多，因为它内部的 Fortran 代码返回了一些不必要的东西，这些东西在`qr.resid`返回结果之前被丢弃。

这意味着当响应的数量足够大时，我的系统必须开始交换内存，并且需要很长时间才能得到答案。一个一个地做（在 R 中使用循环）更快，因为它不交换，但（大概）比以矢量化方式做整个事情要慢。

也就是说，当这个版本`y`足够小而不会导致交换时，这个版本会更快：

```
reslsfit1 <- function (x, y) {
  qr.resid(qr(x),y)
} 
```

但是这个版本对于大型来说更快，`y`因为它不交换：

```
reslsfit2 <- function (x, y) {
  x <- unname(x)
  y <- unname(y)
  out <- matrix(NA, ncol=ncol(y), nrow=nrow(y))
  qrx <- qr(x)
  for(i in 1:ncol(y)) {out[,i] <- qr.resid(qrx, y[,i])}
  out
} 
```

有什么建议么？我更喜欢使用现有的函数（或者至少是现有的算法）而不是自己滚动，因为可能会出现数值问题。

这是重现问题的代码；你必须`N`为你的系统制造足够大的空间。

```
set.seed(5)
n <- 1000
N <- 10000 # make this big enough for your system to swap
y <- matrix(rnorm(n*N), ncol=N)
x <- rnorm(n)
r1 <- reslsfit1(x,y)
r2 <- reslsfit2(x,y) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T04:25:46.090

有趣的是，似乎`qr.fitted`并`qr.coef`没有占用太多内存，所以这些都对我有用而不会耗尽内存。该`qr.coef`版本似乎稍快一些。

```
reslsfit3 <- function(x,y) { y - qr.fitted(qr(x), y) }
reslsfit4 <- function(x,y) { y - A %*% qr.coef(qr(x), y) } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T07:17:53.157

为什么你的 y 变量有很多列而你的 x 变量只有一个？你把他们弄混了吗？

lsfit 是否做得更好，比如通过 lsfit()$residuals？它仍然使用 qr 分解，因此可能无济于事。

# iphone - 改变物体行进的角度xcode iphone

> ID：11107946
> 
> 赞同：0
> 
> 时间：2012-06-19T19:24:47.450
> 
> 标签：iphone, ios, xcode

我有一个在屏幕上移动的物体，我只是想知道是否有任何方法可以改变它移动的角度。

我有这个自动取款机

```
enemy.center = CGPointMake(enemy.center.x+pos.x,enemy.center.y+pos.y);

    if (enemy.center.x > 328 || enemy.center.x < 0)
        pos.x = -pos.x;
    if (enemy.center.y > 480 || enemy.center.y < 0)
        pos.y = -pos.y; 
```

欢迎任何想法，是否可以改变它在侧面反弹的角度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:33:56.027

直线方程为

```
y = tan(angle)*x + b. 
```

给定一个角度和对象的当前位置，您可以找到下一个位置：

假设您的对象在 上`(6, 5)`，并且您希望它以`45`度角移动。 `tan(45) = 1`. 所以你有`5 = 6 + b -> b = -1`. 所以对象应该移动的线是 `y = x - 1`。

因此，下一点可能是`(7, 6)`或`(5, 4)`取决于移动的方向和数量。

# c# - 与 WCF 服务通信产生未实现的异常

> ID：11107956
> 
> 赞同：2
> 
> 时间：2012-06-19T19:25:22.660
> 
> 标签：c#, wcf

我有一个应用程序正在调用我在本地 IIS 服务器上托管的一些 WCF 服务。IIS 服务器运行 ASP.NET 4.0 经典版本，服务是使用 .NET 4.0 开发的。客户端正在运行 Windows Compact Framework 3.5，并使用该`NetCFSvcUtil`实用程序自动生成服务客户端。

当我尝试在我的应用程序中调用客户端可用的方法之一时，我收到以下异常：

`ProtoccolException: The remote server returned an unexpected response: (501) Not Implemented.`

谁能指出我*为什么*会收到此错误的方向？我调用的所有方法都提供了一个实现。

堆栈跟踪：

```
System.ServiceModel.ProtocolException was unhandled
  Message="The remote server returned an unexpected response: (501) Not Implemented."
  StackTrace:
       at System.ServiceModel.Channels.HttpChannelUtilities.ValidateRequestReplyResponse(HttpWebRequest request, HttpWebResponse response, HttpChannelFactory factory, WebException responseException)
       at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
       at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
       at System.ServiceModel.Channels.RequestChannel.Request(Message message)
       at ClientProject.Microsoft.Tools.ServiceModel.CFClientBase`1.getReply(Message msg)
       at ClientProject.Microsoft.Tools.ServiceModel.CFClientBase`1.Invoke[TREQUEST,TRESPONSE](CFInvokeInfo info, TestMethodRequest request)
       at ClientProject.TestService.MQClient.TestMethod(TestMethodRequest request)
       at ClientProject.TestService.MQClient.TestMethod(TestInfo testInfo)
       at ClientProject.Form.Button1_Click(Object sender, EventArgs e)
       at System.Windows.Forms.Control.OnClick(EventArgs e)
       at System.Windows.Forms.Button.OnClick(EventArgs e)
       at System.Windows.Forms.ButtonBase.WnProc(WM wm, Int32 wParam, Int32 lParam)
       at System.Windows.Forms.Control._InternalWnProc(WM wm, Int32 wParam, Int32 lParam)
       at Microsoft.AGL.Forms.EVL.EnterMainLoop(IntPtr hwnMain)
       at System.Windows.Forms.Application.Run(Form fm)
       at ClientProject.Form.Main()
  InnerException: System.Net.WebException
       Message="The remote server returned an error: (501) Not Implemented."
       StackTrace:
            at System.Net.HttpWebRequest.finishGetResponse()
            at System.Net.HttpWebRequest.GetResponse()
            at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
            at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
            at System.ServiceModel.Channels.RequestChannel.Request(Message message)
            at ClientProject.Microsoft.Tools.ServiceModel.CFClientBase`1.getReply(Message msg)
            at ClientProject.Microsoft.Tools.ServiceModel.CFClientBase`1.Invoke[TREQUEST,TRESPONSE](CFInvokeInfo info, TestMethodRequest request)
            at ClientProject.TestService.MQClient.TestMethod(TestMethodRequest request)
            at ClientProject.TestService.MQClient.TestMethod(TestInfo testInfo)
            at ClientProject.Form.Button1_Click(Object sender, EventArgs e)
            at System.Windows.Forms.Control.OnClick(EventArgs e)
            at System.Windows.Forms.Button.OnClick(EventArgs e)
            at System.Windows.Forms.ButtonBase.WnProc(WM wm, Int32 wParam, Int32 lParam)
            at System.Windows.Forms.Control._InternalWnProc(WM wm, Int32 wParam, Int32 lParam)
            at Microsoft.AGL.Forms.EVL.EnterMainLoop(IntPtr hwnMain)
            at System.Windows.Forms.Application.Run(Form fm)
            at ClientProject.Form.Main()
       InnerException: 
```

在我的服务上运行会`WCF Test Client`产生以下最内部的异常：

```
Failed to invoke the service. Possible causes: The service is offline or inaccessible; the client-side configuration does not match the proxy; the existing proxy is invalid. Refer to the stack trace for more detail. You can try to recover by starting a new proxy, restoring to default configuration, or refreshing the service.

An error occurred while receiving the HTTP response to http://wv113.domain.local/Development/TestService.svc. This could be due to the service endpoint binding not using the HTTP protocol. This could also be due to an HTTP request context being aborted by the server (possibly due to the service shutting down). See server logs for more details.

Server stack trace: 
   at System.ServiceModel.Channels.HttpChannelUtilities.ProcessGetResponseWebException(WebException webException, HttpWebRequest request, HttpAbortReason abortReason)
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)
   at System.ServiceModel.Channels.RequestChannel.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
   at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
   at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

Exception rethrown at [0]: 
   at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
   at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
   at IMQClient.TestMethod(TestInfo testInfo)
   at MQClient.TestMethod(TestInfo testInfo)

Inner Exception:
The underlying connection was closed: An unexpected error occurred on a receive.
   at System.Net.HttpWebRequest.GetResponse()
   at System.ServiceModel.Channels.HttpChannelFactory.HttpRequestChannel.HttpChannelRequest.WaitForReply(TimeSpan timeout)

Inner Exception:
Unable to read data from the transport connection: An existing connection was forcibly closed by the remote host.
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.PooledStream.Read(Byte[] buffer, Int32 offset, Int32 size)
   at System.Net.Connection.SyncRead(HttpWebRequest request, Boolean userRetrievedStream, Boolean probeRead)

Inner Exception:
An existing connection was forcibly closed by the remote host
   at System.Net.Sockets.Socket.Receive(Byte[] buffer, Int32 offset, Int32 size, SocketFlags socketFlags)
   at System.Net.Sockets.NetworkStream.Read(Byte[] buffer, Int32 offset, Int32 size) 
```

**更新**：一切都在我的服务器上正确配置。问题最终实际上是由于我的本地开发机器缺少其中一项服务的消息队列组件。另一个服务抛出异常，因为给我的一个配置文件中的设置有误。学过的知识？检查日志文件！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:28:29.963

这意味着您尝试执行的方法未在 WCF 服务器端实现。这是你写的吗？

抛出此异常的方法示例：

```
public void UnimplementedMethod()
{
    throw new NotImplementedException();
} 
```

这通常是通过实现类继承的接口自动生成的方法的默认标记。

编辑：

要确保在 Web 服务端实现该方法，请转到 Visual Studio 命令提示符并键入 wcftestclient。应用程序启动后，将服务引用添加到要测试的 wcf 并从那里执行该方法，以确保它按预期运行。

# wpf - 绑定到其他控件的选定值

> ID：11107959
> 
> 赞同：1
> 
> 时间：2012-06-19T19:25:28.423
> 
> 标签：wpf, caliburn.micro

我有一个使用 caliburn.micro 的 wpf 应用程序。它有一个数据网格和一个组合框。

这是数据网格：

```
<DataGrid x:Name="TriageMapRecords"
          Grid.Row="0" Grid.ColumnSpan="5"
          AutoGenerateColumns="False"
          BaseControls:DataGridExtension.Columns="{Binding TriageMapRecordColumns}"
          CanUserAddRows="False" IsReadOnly="True"
          SelectedItem="{Binding Path=SelectedTriageMapRecord, Mode=TwoWay}"> 
```

SelectedTriageMapRecord 对象包含一个字段 CounterpartyNameId。

我想将组合框中的选定值绑定到 SelectedTriageMapRecord 的 CounterpartyNameId。

我试过这个：

```
<ComboBox x:Name="RefCounterparties" 
          DisplayMemberPath="Name" SelectedValuePath="Id" 
          SelectedValue="{Binding Source=SelectedTriageMapRecord, 
                                  Path=CounterpartyNameId, Mode=TwoWay}"
          Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left" 
          Width="Auto" MinWidth="100" Margin="3,3,0,3"/> 
```

但这没有用。你能告诉我我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:31:14.420

看起来你可能想要这样做：

```
<ComboBox x:Name="RefCounterparties"  
          DisplayMemberPath="Name" SelectedValuePath="Id"  
          SelectedValue="{Binding SelectedTriageMapRecord.CounterpartyNameId,  
                                  Mode=TwoWay}" 
          Grid.Row="1" Grid.Column="1" HorizontalAlignment="Left"  
          Width="Auto" MinWidth="100" Margin="3,3,0,3"/> 
```

您不想设置来源，因为您的来源仍然是`DataContext`. `DataContext`然后，您指定要向下钻取的路径。在这种情况下，是 的`SelectedTriageMapRecord`属性`DataContext`，然后`CounterpartyNameId`是对象的属性`SelectedTriageMapRecord`。

# excel - 如何在 Excel 中指定变量

> ID：11107960
> 
> 赞同：0
> 
> 时间：2012-06-19T19:25:33.403
> 
> 标签：excel, excel-formula

我想选择 D 列中的每 6 行。我以为我可以做类似的事情

```
= D(E1 * 6) 
```

其中 E 是仅列出整数 1、2、3、....
Excel 不接受此语法的列。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:33:21.023

您将使用 INDIRECT 函数从字符串构建单元格引用。

```
=INDIRECT("D" & E1 * 6) 
```

# objective-c - 如何在登录屏幕继续 QTCaptureSession？

> ID：11107961
> 
> 赞同：2
> 
> 时间：2012-06-19T19:25:33.377
> 
> 标签：objective-c, cocoa, osx-lion, video-streaming, qtkit

我有一个我编写的程序，它创建一个 QTCaptureSession，并且能够接收和处理图像帧。问题是当我切换到登录屏幕时，iSight LED 熄灭并且我没有收到任何帧。一旦我重新登录，帧就会再次开始到达，并且我在程序中看不到任何错误迹象。

这是一个问题，因为出于安全目的，我想在我的 Mac 上使用内置的 iSight，显然离开无人看管的计算机而不进入登录屏幕本身就是一个安全问题。

无论用户会话的状态如何，如何继续捕获？

运行 OS X 10.7.4。

# oop - 孪生静态和实例方法

> ID：11107962
> 
> 赞同：0
> 
> 时间：2012-06-19T19:25:38.790
> 
> 标签：oop, class, static-methods, instance-methods

我有一个类，像这样，简化：

```
public class Bookmark
{
    public string Nav     { get; set; }
    public string Scroll  { get; set; }
    public string Comment { get; set; }

    public string guid()
    {
        return guid_static(this.Nav, this.Scroll);
    }

    public static string guid_static(string nav, string scroll)
    {
        // some complex equations on nav & scroll
        return result;
    }
    ...
} 
```

在课堂之外，我需要同时启动（实例和静态）方法。首先 - 获取现有书签的指南。其次 - 为某个不是书签（虽然没有实例）的“位置”（导航和滚动值）生成一个 guid，以便与另一个 guid 进行比较。

就 OOP 概念而言，这两种方法可以吗？或者我必须用唯一的 guid() 方法引入一个像“Position”这样的新类？没有“官方”的面向对象的解决方法吗？（我只是不想增加班级数量）

PS如果可以，孪生静态和实例方法的命名约定是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T19:44:42.167

如果您愿意，您实际上可以将它们都命名为“guid”。大多数语言会自动知道您调用 guid() 与 guid(nav, scroll) 之间的区别，因为方法签名不同。您当前对其进行编码的方式很好。

# php - 如何在 PHP/MySQL 中组织和构建图像的用户相册

> ID：11107971
> 
> 赞同：2
> 
> 时间：2012-06-19T19:26:24.810
> 
> 标签：php, mysql, image, filesystems, directory-structure

我的一个网站有很多用户。他们目前每个人都有一张个人资料照片。为了使事情保持快速和高效，我根据个人资料图像的独特性将其展开`UserID`，这样没有一个目录包含超过 1,000 个元素。

但是，现在我想让我的用户将更多图片上传到他们的个人资料中，但是当每个用户有多个图像时，我不知道如何组织和构建它。我显然会在他们当前唯一的文件夹下构建每个用户的相册，但是如何？

我是否使用数据库来跟踪每个用户拥有的图像数量？我是否确保每个文件从 1 到用户拥有的多个文件按顺序命名，并始终按该顺序显示它们（如果用户更改顺序，我只需按正确的顺序重命名它们）？还是我用其他方式来做？

我遇到的主要困难是了解和跟踪每个用户有多少图像（特别是如果他们删除了中间的一两个图像），它们的顺序（应该是可修改的），以及什么命名约定使用，同时保持快速、合乎逻辑和高效。

做这个的最好方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-19T19:38:19.720

是的，使用数据库表，除了确认文件存在于任何位置之外，始终使用数据表来查找和组织图像。

用户添加文件：

1.  上传文件
2.  创建 UserID 和 microtime 的哈希
3.  使用 hash.ext 写入磁盘
4.  确认文件存在。
5.  写入数据库、imageID (pk)、userID、path/to/image.jpg、时间戳

用户删除文件：

1.  确认文件存在于磁盘上（查找基于 imageID 传递的位置）
2.  使用从查询中选择的哈希删除文件（不要让他们传递文件名）
3.  从数据库中删除行

# makefile - 是否有一种规范的方法可以跨运行缓存扩展的 makefile 变量？

> ID：11107973
> 
> 赞同：1
> 
> 时间：2012-06-19T19:26:41.747
> 
> 标签：makefile, gnu-make

在我的 makefile 的开头，我为每个执行的 perl 脚本创建了一个依赖列表，如下所示：

```
deps_script_1 := $(shell perl $(src)/local_deps.pl $(src)/script_1.pl $(src))
deps_script_2 := $(shell perl $(src)/local_deps.pl $(src)/script_2.pl $(src))
...
deps_script_N := $(shell perl $(src)/local_deps.pl $(src)/script_N.pl $(src)) 
```

这些变量稍后会像这样使用：

```
output_1: $(src)/script_1.pl $(input_1) $(deps_script_1)
        $< $(input_1) > $@ 
```

我已经将 local_deps.pl 的每次调用从 5 秒减少到 <1 秒，但是随着我的脚本列表的增加，它仍然很乏味。

我*可以*教 local_deps.pl 缓存依赖项列表以及何时失效，但这涉及更多的 shell。仅供参考，当 $(src)/lib/perl 上的修改时间比相应的输出文件新时，会发生失效。

有没有办法在我的makefile中本地缓存和失效？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-19T21:03:35.047

您可以使用与 GCC 的依赖项自动生成相同的方法。

```
output_1: $(src)/script_1.pl $(input_1)
    $< $(input_1) > $@
    @perl $(src)/local_deps.pl $< $(<D) > $@.d

-include output_1.d 
```

另请参阅：[高级自动依赖生成](http://make.mad-scientist.net/autodep.html)文章。

## UPD。

该`output_1.d`文件应包含以下内容：

```
output_1 : dep_1 ... dep_N

dep_1 ... dep_N : 
```

第一行指示 Make 重建`output_1`如果某些`dep_X`文件比目标文件更新。第二行可避免 Make 在您删除其中一个先决条件时因错误而失败。

# mongodb - MongoDB C# 驱动程序在 First() 调用时崩溃

> ID：11107974
> 
> 赞同：0
> 
> 时间：2012-06-19T19:26:46.293
> 
> 标签：mongodb, mongodb-.net-driver, mongodb-query

我在查询此文档时遇到了最新的 MongoDB C# 驱动程序 (v1.4.2.4500) 崩溃的问题：

```
{
  "_id" : "4fdfe705b48c6b24dcab994a",
  "CreatedDate" : new Date("6/18/2012 19:42:13"),
  "UpdatedDate" : new Date("6/18/2012 19:42:13"),
  "SiteId" : "4fdfe705b48c6b24dcab9939",
  "ClientId" : "4fdfe705b48c6b24dcab9937",
  "Account" : {
    "UserName" : "blah",
    "Password" : null,
    "PasswordSalt" : null,
  },
  "FbAccount" : {
    "_id" : "838331911",
    "access_token" : "…..",
    "Pages" : []
  }
} 
```

询问：

```
var q1 = from u in this.Repository.All<User>()
         where u.FbAccount.Id == "832631911"
         select u;

var foo1 = q1.First(); 
```

存储库：

```
public IQueryable<T> All<T>() where T : class, new()
{
    return this.GetQuery<T>().FindAll().AsQueryable();
} 
```

例外：

> ```
> [NullReferenceException: Object reference not set to an instance of an object.]
>    lambda_method(Closure , User ) +137
>    System.Linq.WhereEnumerableIterator`1.MoveNext() +155
>    System.Linq.Enumerable.First(IEnumerable`1 source) +244
>    lambda_method(Closure ) +322
>    System.Linq.Queryable.First(IQueryable`1 source) +382
>    Framework.Services.ClientService.GetByFacebookUserId(String 
> ```
> 
> fbUserId) 在 ClientService.cs:39

我做错了什么还是这是一个错误？

# android - 使用 Swipe 和 Button 实现 ViewPager

> ID：11107976
> 
> 赞同：1
> 
> 时间：2012-06-19T19:26:49.420
> 
> 标签：android, android-viewpager

我一直在寻找一种在我的标签主机内向左/向右滑动标签的方法（*必须与 Android 2.1 兼容，因此没有 FragmentManagers 等*）以显示单独的布局。有很多使用 ViewPager 的示例，所以我放弃了 Tabhost 并选择实现此[代码](http://mobile.tutsplus.com/tutorials/android/android-user-interface-design-horizontal-view-paging/)。我在下面有一些使用两个“屏幕”的测试代码。当用户输入查询（此处为 screen1）时，我需要能够以编程方式在屏幕之间切换，然后显示结果页面（screen2）。用户还可以在查询页面和结果页面之间来回滑动。

我遇到的问题是如何为按钮实现 onClickListener。通常，我会在 screen1.java（如下）中实现它，但是当我单击按钮时，onClickListener 似乎永远不会获得控制权。我猜 ViewPager 工作 screen1 布局的方式以某种方式捆绑在 ViewPager 对象中。我尝试放大视图以获取 screen1 中的按钮，但事情变得一团糟而且并不简单。

我正在工作的是 FlingActivity 中我的 ViewPager (myPager) 的静态成员变量。从 PagerAdapter 中，当 screen1 被实例化时，我可以在视图膨胀时将 onClickListener 设置为按钮对象，然后在单击按钮时将静态变量 FlingActivity.myPager 引用到 setCurrentItem() （更改视图）。

事情是，这一切看起来真的很笨拙。我需要做什么才能让我的 onClickListener 回到我的 screen1.java 类中？

主要的.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<android.support.v4.view.ViewPager
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:id="@+id/myfivepanelpager"/>
</LinearLayout> 
```

screen1.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tab1_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <Button
        android:id="@+id/button1"
        style="?android:attr/buttonStyleSmall"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Button" />

    <CheckBox
        android:id="@+id/checkBox1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="CheckBox" />

</LinearLayout> 
```

screen2.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tab2_layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" />

    <Spinner
        android:id="@+id/spinner1"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content" />

    <ImageView
        android:id="@+id/iv_2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

screen1.java

```
package test.com.vfling;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class screen1 extends Activity
{
    private final String TAG = "** screen1 **";

    @Override
    protected void onCreate (Bundle savedInstanceState)
    {
        super.onCreate (savedInstanceState);

        Log.d (TAG, "oncreate");
        setContentView (R.layout.screen1);
    }

} 
```

screen2.java

```
package test.com.vfling;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;

public class screen2 extends Activity 
{
    private final String TAG = "** screen2 **";

    @Override
    protected void onCreate (Bundle savedInstanceState)
    {
         super.onCreate (savedInstanceState);
        Log.d (TAG, "oncreate");
        setContentView (R.layout.screen2);      
    }

} 
```

MyPagerAdapter.java

```
package test.com.vfling;

import android.content.Context;
import android.os.Parcelable;
import android.support.v4.view.PagerAdapter;
import android.support.v4.view.ViewPager;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.Button;

public class MyPagerAdapter extends PagerAdapter
{
    private String TAG = "** MyPagerAdapter **";

    @Override
    public int getCount ()
    {
        //Log.d (TAG, "getCount");
        return 2;
    }

    public Object instantiateItem (View collection, int position)
    {
        Log.d (TAG, "instantiateItem");

        LayoutInflater inflater = (LayoutInflater) collection.getContext ().getSystemService (Context.LAYOUT_INFLATER_SERVICE);
        int resId = 0;

        switch (position)
        {
            case 0:
                                resId = R.layout.screen1;
                                Log.d (TAG, "screen1");
            break;
            case 1:
                                resId = R.layout.screen2;                               
                                Log.d (TAG, "screen2");
            break;
        }

        View view = inflater.inflate (resId, null);
        ((ViewPager) collection).addView (view, 0);

        switch (position)
        {
            case 0:
                                Button b = (Button) view.findViewById (R.id.button1);
                                b.setOnClickListener (ocl);
                                Log.d (TAG, "screen1");
            break;
        }

        return view;
    }

    @Override
    public void destroyItem (View arg0, int arg1, Object arg2)
    {
        Log.d (TAG, "destroyitem");
        ((ViewPager) arg0).removeView ((View) arg2);
    }

    @Override
    public boolean isViewFromObject (View arg0, Object arg1)
    {
        Log.d (TAG, "isviewfromobject");
        return arg0 == ((View) arg1);
    }

    @Override
    public Parcelable saveState ()
    {
        return null;
    }

    OnClickListener ocl = new OnClickListener()
    {

        @Override
        public void onClick (View v)
        {
            switch (v.getId ())
            {
                        case R.id.button1:
                    Log.d (TAG, "button 1 click");
                        FlingActivity.myPager.setCurrentItem (1);
                        break;
            }

        }
    };
} 
```

FlingActivity.java

```
package test.com.vfling;

import android.app.Activity;
import android.os.Bundle;
import android.support.v4.view.ViewPager;

public class FlingActivity extends Activity
{
    private final String TAG = "** test_vfling **";
    public static ViewPager myPager;

    @Override
    protected void onCreate (Bundle savedInstanceState)
    {
       super.onCreate (savedInstanceState);
       setContentView (R.layout.main);

       MyPagerAdapter adapter = new MyPagerAdapter ();
       myPager = (ViewPager) findViewById (R.id.myfivepanelpager);
       myPager.setAdapter (adapter);
       myPager.setCurrentItem (1);
    }
} 
```

# java - 使用 SWT 浏览器小部件在 IE 中打开 .pdf 文件

> ID：11107980
> 
> 赞同：0
> 
> 时间：2012-06-19T19:27:16.403
> 
> 标签：java, swt, eclipse-rcp

我正在尝试使用以下代码在 IE 中使用 swt 浏览器小部件打开一个 .pdf 文件-

```
 _browser.setUrl(
    FileSystems.getDefault().getPath("UserGuide00.pdf")
    .toAbsolutePath().toString());
    return _browser; 
```

问题是 pdf 文件作为单独的文档而不是在浏览器中启动。我错过了什么？非常感谢一些帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-20T06:37:51.693

使用这样的东西：

```
browser.setText("<html>\r\n" + "<body>\r\n" + "<embed\r\n"
                    + " type=\"application/pdf\"\r\n"
                    + " src=\"file:/C:/Users/tom/Documents/myPDF.pdf\"\r\n"
                    + " id=\"pdfDocument\"\r\n" + " width=\"300\"\r\n"
                    + " height=\"300\">\r\n" + "</embed>\r\n" + "</body>\r\n"
                    + "</html>"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-20T12:10:49.907

因此 API 表示`browser.setUrl()`，该方法的输入参数应符合正确的 url 语法。以下适用于 SUN JDK_1.6.x 和最新的 eclipse 版本 (3.7.2)。

```
File file = new File("c:/temp/test.pdf");
try {
    browser.setUrl(file.toURI().toURL().toString());
} catch (MalformedURLException e) {
    e.printStackTrace();
} 
```

# mysql - 获得许多具有许多 id 的行

> ID：11107982
> 
> 赞同：0
> 
> 时间：2012-06-19T19:27:20.047
> 
> 标签：mysql

我有以下表格：

```
Action_set
id_action_p1 | id_action_p2 | id_action_p3 | etc. 
1            | 1            | 2
2            | 3            | 1
1            | 1            | 1

Action
id_action | id_type | value
1         | 0       | NULL
2         | 1       | NULL
3         | 2       | NULL 
```

表中的哪里`id_action_p1/2/3`是`Action_set`表的 fks 。`id_action``Action`

对于行中的每个 id，`Action_set`我需要在`Action`.

例如，让我们获取 Action_set 的第一行：

```
(id_action_p1 | id_action_p2 | id_action_p3 )
1 | 1 | 2 
```

结果必须给我：

```
(id_type | value)
0 | NULL
0 | NULL
1 | NULL 
```

我是mysql的菜鸟，所以不知道该怎么做:(

**编辑：**这里是我的表（**忽略 id_lap**）

```
CREATE TABLE IF NOT EXISTS `Action` (
  `id_action` int(11) NOT NULL AUTO_INCREMENT,
  `value` int(11) DEFAULT NULL,
  `id_type` tinyint(4) NOT NULL,
  PRIMARY KEY (`id_action`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=7 ;

INSERT INTO `Action` (`id_action`, `value`, `id_type`) VALUES
(1, NULL, 0),
(2, NULL, 1),
(3, NULL, 2),
(4, NULL, 3),
(5, NULL, 4),
(6, NULL, 5);

CREATE TABLE IF NOT EXISTS `Action_set` (
  `id_action_set` int(11) NOT NULL AUTO_INCREMENT,
  `id_lap` int(11) NOT NULL,
  `id_parent_action_set` int(11) DEFAULT NULL,
  `id_action_pu` int(11) DEFAULT NULL,
  `id_action_p1` int(11) DEFAULT NULL,
  `id_action_p2` int(11) DEFAULT NULL,
  `id_action_p3` int(11) DEFAULT NULL,
  `id_action_p4` int(11) DEFAULT NULL,
  `id_action_p5` int(11) DEFAULT NULL,
  `id_action_p6` int(11) DEFAULT NULL,
  `id_action_p7` int(11) DEFAULT NULL,
  `id_action_p8` int(11) DEFAULT NULL,
  `id_stage` tinyint(4) NOT NULL,
  PRIMARY KEY (`id_action_set`),
  KEY `fk_Action_set_Lap` (`id_lap`),
  KEY `fk_Action_set_Action_set1` (`id_parent_action_set`),
  KEY `fk_pu` (`id_action_pu`),
  KEY `fk_p1` (`id_action_p1`),
  KEY `fk_p2` (`id_action_p2`),
  KEY `fk_p3` (`id_action_p3`),
  KEY `fk_p4` (`id_action_p4`),
  KEY `fk_p5` (`id_action_p5`),
  KEY `fk_p6` (`id_action_p6`),
  KEY `fk_p7` (`id_action_p7`),
  KEY `fk_p8` (`id_action_p8`)
) ENGINE=MyISAM  DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci AUTO_INCREMENT=11;

INSERT INTO `Action_set` (`id_action_set`, `id_lap`, `id_parent_action_set`, `id_action_pu`, `id_action_p1`, `id_action_p2`, `id_action_p3`, `id_action_p4`, `id_action_p5`, `id_action_p6`, `id_action_p7`, `id_action_p8`, `id_stage`) VALUES
(1, 1, NULL, NULL, NULL, NULL, NULL, NULL, NULL, 2, 2, 2, 0),
(2, 1, 1, 1, 1, 1, 1, 2, 1, NULL, NULL, NULL, 0),
(3, 1, 2, NULL, NULL, NULL, NULL, NULL, NULL, 4, 4, 4, 1),
(4, 1, 3, NULL, NULL, NULL, NULL, 4, NULL, NULL, NULL, NULL, 1),
(5, 1, 4, NULL, NULL, NULL, NULL, NULL, NULL, 3, 1, 1, 2),
(6, 1, 5, NULL, NULL, NULL, NULL, 1, NULL, NULL, NULL, NULL, 2),
(7, 1, 1, 2, 1, 2, 1, 1, 1, NULL, NULL, NULL, 0),
(8, 1, 7, NULL, NULL, NULL, NULL, NULL, NULL, 4, 4, 4, 1),
(9, 1, 8, 4, NULL, 1, NULL, NULL, NULL, NULL, NULL, NULL, 1),
(10, 1, 9, NULL, NULL, NULL, NULL, NULL, NULL, 1, 1, 1, 2); 
```

* * *

**编辑 2**

大家好，我找到了这个解决方案，它完全按预期返回：

```
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p1 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p2 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p3 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p4 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p5 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p6 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p7 AND id_action_set = 1
UNION ALL
SELECT id_type, value FROM Action, Action_set WHERE id_action = id_action_p8 AND id_action_set = 1 
```

还有怎么优化呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:47:26.130

在不知道您想如何使用实际表数据的情况下，这给了我您正在寻找的结果。

**使用定义的 action_set**

```
SELECT id_type, value
FROM action
    LEFT JOIN action_set ON (id_action = id_action_set)
WHERE id_action_set = 1 
```

这将有助于更新您的原始帖子以使用实际的表数据字段来获得更准确的响应。希望这将帮助您朝着正确的方向前进。由于您使用的是 FK，因此上面的 LEFT JOIN 几乎没有用（假设您在更改时更新了它）。我只需要更多信息来为您提供正确的查询。除非其他人已经了解您要完成的工作...我还是有点迷茫。

** 所有 action_set 的**

```
SELECT id_type, value
FROM action
    LEFT JOIN action_set ON (id_action = id_action_set) 
```

** 所有带有 id_action 的 action_set ** 因为 id_action = id_action_set

```
SELECT id_action, id_type, value
FROM ACTION
    LEFT JOIN action_set ON ( id_action = id_action_set ) 
```

我是否正确假设 id_action = id_action_set 我在提供的 SQL 中没有您的 FK，所以我只是假设

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-19T19:41:36.180

```
select id_type, value from Action where id_action in 
(select id_p1 as id from Action_set limit 0,1 union all
 select id_p2 as id from Action_set limit 0,1 union all
 select id_p3 as id from Action_set limit 0,1) 
```

我确信存在更好的方法来做到这一点，但这也有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-19T20:00:07.763

您可以`Action`在单独的列中获得结果，如下所示：

```
SELECT
    a.*
    b.id_type AS p1_type, b.value AS p1_value,
    c.id_type AS p2_type, c.value AS p2_value,
    d.id_type AS p3_type, d.value AS p3_value
FROM
    Action_set a
INNER JOIN
    Action b ON a.id_action_p1 = b.id_action
INNER JOIN
    Action c ON a.id_action_p2 = c.id_action
INNER JOIN
    Action d ON a.id_action_p3 = d.id_action 
```

这将为您提供以下结果集：

```
id_p1 | id_p2 | id_p3 | p1_type | p1_value | p2_type | p2_value | p3_type | p3_value
1     | 1     | 2     | 0       | NULL     | 0       | NULL     | 1       | NULL
...
... 
```

这将是一个理想的解决方案，但如果您需要将结果成行，您可以这样做：

```
SELECT
    *
FROM
    (
        SELECT aa.*, bb.id_type, bb.value
        FROM Action_set aa
        INNER JOIN Action bb ON aa.id_action_p1 = bb.id_action

        UNION ALL

        SELECT aa.*, bb.id_type, bb.value
        FROM Action_set aa
        INNER JOIN Action bb ON aa.id_action_p2 = bb.id_action

        UNION ALL

        SELECT aa.*, bb.id_type, bb.value
        FROM Action_set aa
        INNER JOIN Action bb ON aa.id_action_p3 = bb.id_action
    ) a
ORDER BY
    a.id_action_p1,
    a.id_action_p2,
    a.id_action_p3,
    a.id_type 
```

这会给你一个结果集，如：

```
id_action_p1 | id_action_p2 | id_action_p3 | id_type | value
1            | 1            | 2            | 0       | NULL
1            | 1            | 2            | 0       | NULL
1            | 1            | 2            | 1       | NULL 
```

# java - 从 CellEditorListener 获取已编辑的 TreeNode

> ID：11107984
> 
> 赞同：3
> 
> 时间：2012-06-19T19:27:30.723
> 
> 标签：java, swing, events, rename, treenode

之前我问过如何在重命名 TreeNode 时触发事件（[此处](https://stackoverflow.com/questions/11105401/java-defaultmutabletreenode-event-when-renamed/11105565)）。我的问题得到了回答，但我遇到了另一个问题。我需要访问 CellEditorListener 的 editingStopped 事件中正在编辑的 TreeNode。这是我必须这样做的代码：

```
package com.gamecreator;

import javax.swing.event.CellEditorListener;
import javax.swing.event.ChangeEvent;
import javax.swing.tree.DefaultTreeCellEditor;

public class CustomCellEditorListener implements CellEditorListener {
    public CustomCellEditorListener() {

    }

    public void editingCanceled(ChangeEvent e) {

    }

    public void editingStopped(ChangeEvent e) {
        DefaultTreeCellEditor editor = (DefaultTreeCellEditor) e.getSource(); //This gives me the error.
        CustomTreeNode node = //What do I put here???;
        node.getResource().setName((String) node.getUserObject());

        //For debugging
        System.out.println(node.getResource().getName());
    }
} 
```

我收到此错误：

> 线程“AWT-EventQueue-0”中的异常 java.lang.ClassCastException：javax.swing.tree.DefaultTreeCellEditor$1 无法转换为 javax.swing.tree.DefaultTreeCellEditor

编辑：在另一次尝试中，我在 CustomCellEditorListener 中使用了这段代码

```
public void editingStopped(ChangeEvent e) {
    TreePath path = ((CustomTreeCellEditor) e.getSource()).getLastPath();  //This gives me the error.
    CustomTreeNode node = (CustomTreeNode) path.getLastPathComponent();
    node.getResource().setName((String) node.getUserObject());

    //For debugging
    System.out.println(node.getResource().getName());
} 
```

以及 CustomTreeCellEditor 中的这段代码

```
public TreePath getLastPath() {
    return lastPath;
} 
```

我得到了同样的错误（我希望我会）。我所拥有的应该可以工作，所以剩下的唯一真正的问题是，“为什么我会收到错误，我该如何解决？”但是如果有人有更好的方法来完成这个，我愿意倾听。

编辑 2：我做了一个小例子来说明我想要完成的事情，可以在[这里](https://www.box.com/s/449e16cecb84bf4d4198)找到（这是一个 Eclipse 档案）。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-20T06:02:55.927

您似乎想在 a`Resource`中编辑 a 的名称`DefaultMutableTreeNode`。如您所见，`ChangeEvent`发送到的`editingStopped()`来源*不是*`DefaultTreeCellEditor`; 它是编辑器的（匿名）UI 委托。

相反，请覆盖`getCellEditorValue()`您的`DefaultTreeCellEditor`，如下所示。`DefaultTreeCellRenderer`只需调用`toString()`via即可访问的[`convertValueToText()`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTree.html#convertValueToText%28java.lang.Object,%20boolean,%20boolean,%20boolean,%20int,%20boolean%29)用户对象`DefaultMutableTreeNode`。

附录：注意`isCellEditable()`确保只能编辑叶节点。

正如@kleopatra 在评论中指出的那样，之前的`TreeCellEditor`实现是无效的，因为它修改了正在编辑的节点。下面的修订版本创建了一个具有更新名称的新节点；在这种情况下，[复制构造函数](http://www.javapractices.com/topic/TopicAction.do?Id=12)会很有用。优点是`userObject`仍然是一个`Resource`. 另请参阅此[替代方法](https://stackoverflow.com/a/12651990/230513)。

![图片](../Images/af6033a84fba0109fda538e7567dd6ce.png)

```
/**
 * @see https://stackoverflow.com/a/12651990/230513
 * @see https://stackoverflow.com/a/11639595/230513
 * @see https://stackoverflow.com/a/11113648/230513
 */
public class TreeEditDemo extends JPanel {

    private JTree tree;
    private DefaultMutableTreeNode root;
    private DefaultTreeCellEditor editor;
    private JLabel label = new JLabel(" ", JLabel.CENTER);

    public TreeEditDemo() {
        super(new BorderLayout());
        root = new DefaultMutableTreeNode("Nodes");
        root.add(new DefaultMutableTreeNode(new Resource("one")));
        root.add(new DefaultMutableTreeNode(new Resource("two")));
        root.add(new DefaultMutableTreeNode(new Resource("three")));
        final DefaultTreeModel treeModel = new DefaultTreeModel(root);
        tree = new JTree(treeModel);
        tree.setEditable(true);
        editor = new MyTreeCellEditor(tree,
            (DefaultTreeCellRenderer) tree.getCellRenderer());
        tree.setCellEditor(editor);
        tree.getInputMap().put(
            KeyStroke.getKeyStroke(KeyEvent.VK_ENTER, 0), "startEditing");
        this.add(new JScrollPane(tree));
        this.add(label, BorderLayout.SOUTH);
        tree.addTreeSelectionListener(new TreeSelectionListener() {

            @Override
            public void valueChanged(TreeSelectionEvent e) {
                TreePath path = e.getNewLeadSelectionPath();
                if (path != null) {
                    DefaultMutableTreeNode node =
                        (DefaultMutableTreeNode) path.getLastPathComponent();
                    if (node.isLeaf()) {
                        Resource user = (Resource) node.getUserObject();
                        label.setText(user.toString());
                    } else {
                        label.setText(" ");
                    }
                }
            }
        });
        editor.addCellEditorListener(new CellEditorListener() {

            @Override
            public void editingStopped(ChangeEvent e) {
                label.setText(editor.getCellEditorValue().toString());
            }

            @Override
            public void editingCanceled(ChangeEvent e) {
            }
        });
    }

    private static class MyTreeCellEditor extends DefaultTreeCellEditor {

        public MyTreeCellEditor(JTree tree, DefaultTreeCellRenderer renderer) {
            super(tree, renderer);
        }

        @Override
        public Object getCellEditorValue() {
            String value = (String) super.getCellEditorValue();
            return new Resource(value);
        }

        @Override
        public boolean isCellEditable(EventObject e) {
            return super.isCellEditable(e)
                && ((TreeNode) lastPath.getLastPathComponent()).isLeaf();
        }
    }

    private static class Resource {

        String name;

        public Resource(String name) {
            this.name = name;
        }

        public String getName() {
            return name;
        }

        public void setName(String name) {
            this.name = name;
        }

        @Override
        public String toString() {
            return getName();
        }
    }

    private void display() {
        JFrame f = new JFrame("TreeEditorDemo");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        f.add(this);
        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new TreeEditDemo().display();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-28T19:08:32.587

我找到了一个实际上非常简单的解决方案。当重命名 TreeNode 时，它​​最终成为树中唯一选定的节点。因此，我能够使用：

```
 CustomTreeNode node = (CustomTreeNode) tree.getLastSelectedPathComponent(); 
```

# javascript - 如何提高 javascript html5 程序的整体性能：是否可以在两台计算机上同步两个版本？

> ID：11107985
> 
> 赞同：0
> 
> 时间：2012-06-19T19:27:34.563
> 
> 标签：javascript, performance, html

我制作了一个 javascript 程序，它基于一系列拨动开关显示图像和播放声音：如果*toggleflg[i] = "On"*则触发图像和声音。不幸的是，当触发多个图像和声音（一次超过 10 或 20 个）时，程序不可避免地会变慢:(

我正在寻找提高整体性能的方法。我不在乎我如何去做。此程序仅供个人使用。我的目标是让尽可能多的拨动开关启动。有什么我应该在程序中考虑的吗？如果做不到这一点，我想知道是否可以将工作负载分配到两台计算机上？

一个想法是让第一台计算机运行一个程序版本，该程序接受切换输入并显示视觉效果，然后将更新的 toggleflg 数组发送到另一台计算机，可能通过更新共享文件夹中的文件。第二台计算机将运行同一程序的音频版本，并使用*setTimeout()*定期检查*toggleflg[i]*的更新并更新相应的声音。简单吧？

 *我希望摆脱这个问题的是，像上面这样的文件共享方法是否合理，或者如果同步同一程序的两个版本似乎是错误的路径，任何可能的性能改进想法或见解都将不胜感激。

我正在使用 html5 音频和画布在 Firefox 中运行这个程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:32:09.707

你试过[YSlow](http://yslow.org/)吗？在过去的几天里，我一直在使用它来查看我的一些基本网站。您可以获得[Chrome](https://chrome.google.com/webstore/detail/ninejjcohidippngpapiilnmkgllmakh)或[Firefox](https://addons.mozilla.org/en-US/firefox/addon/yslow/)的插件。

例如，[这是我测试我朋友的网站](http://yslow.org/scoremeter/?url=http://www.phasefirefilms.com/Site_index.php/&grade=C&ynumreq=88&ycompress=34&yjsbottom=75&ycookiefree=45&yfavicon=90)。*

# mysql - Mysql查询帮助 - 时间限制不改变事件计数

> ID：11107987
> 
> 赞同：0
> 
> 时间：2012-06-19T19:27:39.290
> 
> 标签：mysql, timestamp

我正在尝试运行以下查询：

```
SELECT COUNT(*) FROM (
SELECT * FROM vqm_packets WHERE call_end >= DATE_SUB(NOW(), INTERVAL 1 MINUTE) 
UNION ALL 
SELECT * FROM vqm_archive WHERE call_end >= DATE_SUB(NOW(), INTERVAL 1 MINUTE)) AS t; 
```

我试图只查找 1 分钟以上的记录。有人会认为进一步限制间隔（例如更改为 1 秒）会减少记录数，但事实并非如此。我认为问题出在我基于 call_end 字段（日期时间字段，UTC）的时间限制上。只是好奇是否有人可以看到查询的任何问题？如果没有，使用 now() 和 UTC 时是否有任何问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-19T19:38:38.193

如果您的日期时间字段设置为 UTC 时间，那么您可能希望使用 UTC_TIMESTAMP() 而不是 NOW() 进行比较。

# iphone - 将 Foursquare 集成到我的应用程序中

> ID：11107993
> 
> 赞同：0
> 
> 时间：2012-06-19T19:27:59.350
> 
> 标签：iphone, objective-c, ios

我需要将 Foursquare 集成到我的 iPhone 应用程序中。

我需要执行以下操作；

1.) 查找我附近的商店/商店 2.) 通过我的应用程序登记入住

我需要知道这些是否可行，如果有人可以帮助我找到一个好的教程或一些示例代码来开始，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-19T19:32:43.640

首先查看 Ray Wenderlich 网站上的教程：

[http://www.raywenderlich.com/13097/intro-to-restkit-tutorial](http://www.raywenderlich.com/13097/intro-to-restkit-tutorial)