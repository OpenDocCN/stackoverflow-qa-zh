# StackOverflow 问答 12212000-12212999

# cuda - 并发块如何运行单个 GPU 流式多处理器？

> ID：12212003
> 
> 赞同：4
> 
> 时间：2012-08-31T08:55:23.693
> 
> 标签：cuda

我正在研究CUDA编程结构，学习后的感受是；创建块和线程后，每个块都分配给每个流式多处理器（例如，我使用的 GForce 560Ti 有 14 个流式多处理器，因此一次可以将 14 个块分配给所有流式多处理器）。但是当我浏览一些在线材料时，比如这个：

[http://moss.csc.ncsu.edu/~mueller/cluster/nvidia/GPU+CUDA.pdf](http://moss.csc.ncsu.edu/~mueller/cluster/nvidia/GPU+CUDA.pdf)

其中已经提到可以在一个多处理器上同时运行多个块。我基本上对流式多处理器上的线程和块的执行感到非常困惑。我知道块的分配和线程的执行是绝对任意的，但我想块和线程的映射实际上是如何发生的，以便可以发生并发执行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T10:03:10.930

*流式多处理器 (SM) 可以使用硬件多线程*一次执行多个块，这是一种类似于[Hypter-Threading](http://en.wikipedia.org/wiki/Hyper-threading)的过程。

[CUDA C 编程指南](http://developer.download.nvidia.com/compute/DevZone/docs/html/C/doc/CUDA_C_Programming_Guide.pdf)在第4.2 节中对此进行了如下描述：

> **4.2 硬件多线程**
> 
> 由多处理器处理的每个 warp 的执行上下文（程序计数器、寄存器等）在 warp 的整个生命周期内都在芯片上维护。因此，从一个执行上下文切换到另一个执行上下文是没有成本的，并且在每个指令发出时间，warp 调度程序都会选择一个线程准备好执行其下一条指令（warp 的活动线程）并将指令发布给这些线程.
> 
> 特别是，每个多处理器都有一组 32 位寄存器，这些寄存器在 warp 之间进行分区，以及在线程块之间进行分区的并行数据高速缓存或共享内存。
> 
> 对于给定内核，可以在多处理器上一起驻留和处理的块和扭曲的数量取决于内核使用的寄存器和共享内存的数量以及多处理器上可用的寄存器和共享内存的数量。每个多处理器也有最大数量的驻留块和驻留扭曲的最大数量。这些限制以及多处理器上可用的寄存器和共享内存的数量是设备计算能力的函数，并在附录 F 中给出。如果每个多处理器没有足够的寄存器或共享内存来处理至少一个块，内核将无法启动。

# ios - iOS 应用内未完成购买

> ID：12212004
> 
> 赞同：1
> 
> 时间：2012-08-31T08:55:25.513
> 
> 标签：ios, transactions, in-app-purchase

我在我的应用程序中为应用内购买实现了额外的收据验证（灵感来自[https://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html](https://developer.apple.com/library/ios/#releasenotes/StoreKit/IAP_ReceiptValidation/_index.html)）。所以，在我得到 SKPaymentTransactionStatePurchased 之后，我执行了这个验证，成功后，我解锁了游戏的新内容，最后，我完成了交易

```
[[SKPaymentQueue defaultQueue] finishTransaction:myTransaction]; 
```

如果由于互联网连接失败或用户在验证过程中终止应用程序而无法完成验证过程会发生什么？在这种情况下，我不会解锁内容，也不会完成交易。我认为这是相当合乎逻辑的。

但是，当我重新启动应用程序（已在“未完成交易”状态下终止）并尝试购买应用程序内时，我陷入了 SKPaymentTransactionStateFailed 状态，transaction.error.code == SKErrorPaymentCancelled。还出现了一个消息框，上面写着：

“您已经购买了此商品，但尚未加载。点击“确定”立即加载。”

按“确定”后，我没有收到任何回调 - 因此我没有解锁内容。

所以我的问题是：1）可以将交易留在未完成状态（如果无法验证）吗？2）我该如何恢复它？也许我错过了一些伴随“您已经购买......”消息框的回调？

PS 我的应用内购买是“消耗品”。所以我不能使用

```
[[SKPaymentQueue defaultQueue] restoreCompletedTransactions]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T12:30:10.280

好的，我解决了。最重要的是从 App Delegate 收听付款队列，而不是从“购买 UI 屏幕”。换句话说，

```
[[SKPaymentQueue defaultQueue] addTransactionObserver:self]; 
```

必须在

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions 
```

不在我的自定义购买屏幕的 viewDidLoad 中。

在这里可以找到很好的解释： [我应该什么时候验证应用内购买交易收据？](https://stackoverflow.com/questions/9987334/when-should-i-validate-in-app-purchase-transaction-receipt)

# ruby-on-rails - 大礼包翻译属性

> ID：12212009
> 
> 赞同：0
> 
> 时间：2012-08-31T08:55:36.590
> 
> 标签：ruby-on-rails, translation, spree

我有产品的属性“品牌”。在我的语言中，它是“Značka”。我将此属性的演示文稿名称更改为我的语言，但我在产品页面的过滤器中有“品牌”（参见图片）。我在哪里可以翻译这个？

![http://localhost:3000/t/brands/ruby-on-rails](../Images/8ab0b7cc6f8385080446c26601dc5937.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T16:49:01.700

它位于`spree_taxons`表内。你需要在那里改变它。

# bash - 从 bash 上的 STDOUT 中删除 n 行

> ID：12212013
> 
> 赞同：0
> 
> 时间：2012-08-31T08:55:56.473
> 
> 标签：bash, sed, tail, unix-head

您有任何 bash 解决方案可以从标准输出中删除 N 行吗？

像“head”命令一样，打印所有行，仅最后 N 行除外

bash 上的简单解决方案：

> 找到 ./test_dir/ | sed '$d' | sed '$d' | sed '$d' | ...

但我需要复制 sed 命令 N 次

有更好的解决方案吗？除了 awk、python 等...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:02:18.237

`head`与负数一起使用。在我的示例中，它将打印除最后 3 行之外的所有行：

```
head -n -3 infile 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-25T06:14:57.757

如果 head -n -3 文件名在您的系统上不起作用（如我的），您也可以尝试以下方法（并且可能为它取别名或在您的 .bashrc 中创建一个函数）

```
head -`echo "$(wc -l filename)" | awk '{ print $1 - 3; }'` filename 
```

其中*filename*和*3*以上分别是您的文件和行数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-11T04:42:05.733

该`tail`命令可以从 Mac OS / BSD 上的文件末尾跳过。`tail`接受`+/-`前缀，这有利于下面的表达，它将从开头显示 3 行

```
tail -n +3 filename.ext 
```

或者，要从文件末尾跳过行，请改用`-`前缀。

```
tail -n -3 filenme.ext 
```

通常，默认为`tail`前缀`-`，因此从文件末尾开始计数。在此处查看对不同问题的类似答案： [Print a file skipping first X lines in Bash](https://stackoverflow.com/questions/604864/print-a-file-skipping-first-x-lines-in-bash)

# php - 优化的 Json 解析

> ID：12212014
> 
> 赞同：0
> 
> 时间：2012-08-31T08:56:05.667
> 
> 标签：php, mysql, json, parsing, foreach

我一直在浏览 SO 的问答集，但我找不到正确的解决方案来解决我的问题，虽然这个问题不会直接暗示编程答案，但它会寻求适当的方法，然后可以转换进入源代码..以防万一mods将此问题标记为不具建设性..无论如何，这只是我......

我有一个应用程序，它使用 json 接口来自其他数据库的数据，最后我使用 PHP + MySQL，解析接口文件的内容，我会得到一个 Arrays of Arrays，请参见下文；

```
{
"p_head": [
    {
        "GROUP_ID": "700",
        "GROUP_DESC": "BBREAKFAST",
        "children": {
            "p_item": [
                {
                    "GROUP_ID": "200",
                    "PROD_ID": "113"
                }
            ]
        }
    },
    {
        "GROUP_ID": "601",
        "GROUP_DESC": "AXPRESSO",
        "children": {
            "p_item": [
                {
                    "GROUP_ID": "200",
                    "PROD_ID": "113"
                }
            ]
        }
    }
]
} 
```

现在在解析上述 JSON 数据时，我正在使用 5 个 foreach 循环，

```
1 to get the file contents,
1 to get the categories, store categories in array, store children in array
1 to expand the children array
1 to get to another level
1 to get to the array child 
```

之后，我再次使用 foreach 循环遍历类别并开始将它们插入数据库，然后使用另一个 foreach 循环遍历项目并将每一行存储到数据库中，

这里有一个小问题，这个解决方案只是为了可读性吗？好像我在编码，就好像我是一个编译器，每行执行一行......在效率方面？有什么缺点，浪费处理能力？我应该减少foreach的使用吗，如果可以，如何实现，下面是foreach循环的示例...

```
foreach($json_array as $key=>$value)
{
//echo "The Value: " .$value;
$arr = $value;
//print_r($arr);
//Category Expanding
foreach($arr as $key=>$value)
{
    //echo "Key: ".$key."=>Value: ".$value."<br/>";
    //Category
    $category[] = array(
        'cat_prodcat_posid'=>$value['GROUP_ID'],
        'cat_description'=>$value['GROUP_DESC'],
        'cat_hierarchy'=>$value['POSITION_ID']
    );
    //Category Items
    $items[] = array(
        'item_grp'=>$value['GROUP_ID'],
        'item_arr'=>$value['children']
    );
    $categoryCount++;
}
//Items Expanding
foreach($items as $key=>$value)
{
    $v = $value['item_arr'];
    //print_r($v);
    foreach($v as $key=>$value)
    {
        $v2 = $value;
        //print_r($v2);
        foreach($v2 as $key=>$value)
        {
            //$v3 = $value;
            $item_expanded[] = array(
                'item_posid'=>$value['PROD_ID'],
                'item_poscode'=>$value['PROD_CODE'],
                'item_description'=>$value['PROD_DESC'],
                'item_prodcat_posid'=>$value['GROUP_ID'],
                'item_price'=>$value['PROD_PRICE']
            );
            $itemCount++;
        }
    }
}
} 
```

无论如何我可以在项目上专门剪一个快捷方式......我已经为此使用了3个foreach......或者这个解决方案已经处于最佳状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:05:28.797

在进行 foreach 循环时，您可以通过直接转到要循环的数组来减少它。

```
foreach ($json_array['p_head'] as $key => $val) {
    if ($key != 'children') {
        //do whatever with non-children
    } else {
        foreach ($key['p_item'] as $key2 => $val2) {
            //here is where your p_item info is
        }
    }
} 
```

如果我的答案是正确答案，请标记为正确答案。谢谢

# ruby-on-rails - 如何在 ruby -on-rails 应用程序之上使用 dBpedia 设置 neo4j？

> ID：12212015
> 
> 赞同：10
> 
> 时间：2012-08-31T08:56:09.437
> 
> 标签：ruby-on-rails, nlp, jruby, neo4j, dbpedia

我正在尝试`dBpedia`与`neo4j`ontop一起使用`ruby on rails`。

假设我已经安装了[neo4j](http://www.neo4j.org/download/)并下载了一个[dBpedia 数据集](http://wiki.dbpedia.org/Downloads38)。

**如何将`dbpedia`数据集导入`neo4j`？**

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-09T05:09:34.907

将 dbpedia 加载到 Neo4j 中的最简单方法是使用[dbpedia4neo](https://github.com/claudiomartella/dbpedia4neo)库。这是一个 Java 库，但您不需要了解任何 Java，因为您需要做的就是运行可执行文件。

如果你愿意，你可以在 JRuby 中重写它，但是普通的 Ruby 不能工作，因为它依赖于[Blueprints](http://blueprints.tinkerpop.com/)，一个没有 Ruby 等价物的 Java 库。

这是两个提供加载过程的关键文件。

1.  [https://github.com/oleiade/dbpedia4neo/blob/master/src/main/java/org/acaro/dbpedia4neo/inserter/DBpediaLoader.java](https://github.com/oleiade/dbpedia4neo/blob/master/src/main/java/org/acaro/dbpedia4neo/inserter/DBpediaLoader.java)
2.  [https://github.com/oleiade/dbpedia4neo/blob/master/src/main/java/org/acaro/dbpedia4neo/inserter/TripleHandler.java](https://github.com/oleiade/dbpedia4neo/blob/master/src/main/java/org/acaro/dbpedia4neo/inserter/TripleHandler.java)

以下是[所涉及内容的描述](http://blog.acaro.org/entry/dbpedia4neo)。

Blueprints 正在将 RDF 数据转换为图形表示。要了解幕后发生的事情，请参阅[Blueprints Sail Ouplementation](https://github.com/tinkerpop/blueprints/wiki/Sail-Ouplementation)：

下载 dbpedia 转储文件后，您应该能够构建[dbpedia4neo](https://github.com/claudiomartella/dbpedia4neo) Java 库并在不修改 Java 代码的情况下运行它。

首先，克隆 GitHub 存储库的 oleiade 的 fork 并切换到`dbpedia4neo`目录：

```
$ git clone https://github.com/oleiade/dbpedia4neo.git
$ cd dbpedia4neo 
```

（Oleiade 的分支包括一个小的蓝图更新，`sail.initialize();`请参阅 [https://groups.google.com/d/msg/gremlin-users/lfpNcOwZ49Y/WI91ae-UzKQJ](https://groups.google.com/d/msg/gremlin-users/lfpNcOwZ49Y/WI91ae-UzKQJ)）。

在构建它之前，您需要更新`pom.xml`以使用更多最新的蓝图版本和当前的蓝图存储库 (Sonatype)。

为此，打开`pom.xml`并在该`dependencies`部分的顶部，将所有 TinkerPop 蓝图版本从`0.6`更改为`0.9`.

在文件中时，将 Sonatype 存储库添加到`repositories`文件末尾的部分：

```
<repository>
  <id>sonatype-nexus-snapshots</id>
  <name>Sonatype Nexus Snapshots</name>
  <url>https://oss.sonatype.org/content/repositories/releases</url>
</repository> 
```

保存文件，然后使用 maven 构建它：

```
$ mvn clean install 
```

这将为您下载并安装所有依赖项，并在`target`目录中创建一个 jar 文件。

要加载 dbpedia，请使用 maven 运行可执行文件：

```
$ mvn exec:java \
  -Dexec.mainClass=org.acaro.dbpedia4neo.inserter.DBpediaLoader \
  -Dexec.args="/path/to/dbpedia-dump.nt" 
```

dbpedia 转储很大，因此加载需要一段时间。

现在数据已加载，您可以通过以下两种方式之一访问图表：

1.  直接使用 JRuby 和 Blueprints-Neo4j API。
2.  使用常规的 Ruby 和[Rexster](https://github.com/tinkerpop/rexster/wiki/) REST 服务器，它类似于 Neo4j 服务器，只是它支持多个图形数据库。

有关如何创建 Rexster 客户端的示例，请参阅 Bulbs，这是我编写的一个支持 Neo4j Server 和 Rexster 的 Python 框架。

*   [http://bulbflow.com/](http://bulbflow.com/)
*   [https://github.com/espeed/bulbs](https://github.com/espeed/bulbs)
*   [https://github.com/espeed/bulbs/tree/master/bulbs/rexster](https://github.com/espeed/bulbs/tree/master/bulbs/rexster)

解决这一切的另一种方法是在 Ruby 中处理 dbpedia RDF 转储文件，将节点和关系写入 CSV 文件，然后使用[Neo4j 批量导入](https://github.com/jexp/batch-import)器加载它。但这需要您手动将 RDF 数据转换为 Neo4j 关系。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-06T00:53:02.610

在我看来，你有两个选择。

1.  您可以尝试完全实现这样的方法[，](http://blog.acaro.org/entry/dbpedia4neo)或者分叉这种方法（或其他类似方法）背后[的 repo并扩展/修复它以适合您的目的。](https://github.com/claudiomartella/dbpedia4neo)

2.  自己做，从头开始。这是一般方法：

将您的 dbpedia 数据集解析为适合 neo4j 插入方法的格式。存在一些像[openRDF](http://www.openrdf.org/about.jsp)这样的库来处理数据。除非您打算花时间研究最适合您的需求，否则我上面链接的现有解决方案已经实现了这个库。

然后将格式化的数据插入到你的 neo4j 数据库中。实现此目的的一种方法是通过 neo4j 的[Batch Insertion](http://docs.neo4j.org/chunked/stable/batchinsert.html)组件。请注意，正如他们所说，此工具旨在用于初始导入（因为它不是线程安全的并且是非事务性的，换句话说，不符合 ACID）。所以这真的取决于你的用例。

我的 2 美分是你使用已经存在的东西，除非这个功能是你正在开发的核心。因为构建它会很痛苦，构建高效运行的东西更痛苦。

# spring - 测试中的 Spring bean

> ID：12212016
> 
> 赞同：0
> 
> 时间：2012-08-31T08:56:10.427
> 
> 标签：spring, testing, webdriver

我在 applicationContext.xml 中有一个 Spring bean

```
 <bean id = "mailUser" class="com.company.application.domain.User">
    <property name="username" value="${mail.username}" />
    <property name="password" value="${mail.password}" /> 
```

我想将它的内容自动连接到我的测试类，比如

```
@Autowired
private User mailUser;

@Test
public void signIn() throws Exception {
    WebDriver driver = new FirefoxDriver();
    driver.get("https://mailservice.com");
    driver.manage().timeouts().implicitlyWait(10, TimeUnit.SECONDS);
    driver.findElement(By.id("username")).sendKeys(getMailUser().getUsername());
    driver.findElement(By.id("password")).sendKeys(getMailUser().getPassword());
    driver.findElement(By.className("btn")).click(); 
```

然而，这会导致 NullPointerException。我懂了

```
 java.lang.NullPointerException
at com.company.app.SignInTest.signIn(SignInTest.java:32)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.junit.runners.model.FrameworkMethod$1.runReflectiveCall(FrameworkMethod.java:44)
at org.junit.internal.runners.model.ReflectiveCallable.run(ReflectiveCallable.java:15)
at org.junit.runners.model.FrameworkMethod.invokeExplosively(FrameworkMethod.java:41)
at org.junit.internal.runners.statements.InvokeMethod.evaluate(InvokeMethod.java:20)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:76)
at org.junit.runners.BlockJUnit4ClassRunner.runChild(BlockJUnit4ClassRunner.java:50)
at org.junit.runners.ParentRunner$3.run(ParentRunner.java:193)
at org.junit.runners.ParentRunner$1.schedule(ParentRunner.java:52)
at org.junit.runners.ParentRunner.runChildren(ParentRunner.java:191)
at org.junit.runners.ParentRunner.access$000(ParentRunner.java:42)
at org.junit.runners.ParentRunner$2.evaluate(ParentRunner.java:184)
at org.junit.runners.ParentRunner.run(ParentRunner.java:236)
at org.apache.maven.surefire.junit4.JUnit4TestSet.execute(JUnit4TestSet.java:35)
at org.apache.maven.surefire.junit4.JUnit4Provider.executeTestSet(JUnit4Provider.java:115)
at org.apache.maven.surefire.junit4.JUnit4Provider.invoke(JUnit4Provider.java:97)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.maven.surefire.booter.ProviderFactory$ClassLoaderProxy.invoke(ProviderFactory.java:103)
at $Proxy0.invoke(Unknown Source)
at org.apache.maven.surefire.booter.SurefireStarter.invokeProvider(SurefireStarter.java:150)
at org.apache.maven.surefire.booter.SurefireStarter.runSuitesInProcess(SurefireStarter.java:91)
at org.apache.maven.surefire.booter.ForkedBooter.main(ForkedBooter.java:69) 
```

行指向用户名行。有谁知道如何正确修复它？我是新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:28:32.490

您需要使用 @ImportResource 注释将您的 XML 配置导入到类中。

```
@RunWith( SpringJUnit4ClassRunner.class )
@Configuration
@ContextConfiguration( classes = { TestClass.class }, loader = AnnotationConfigContextLoader.class )
@ImportResource( { "classpath:resources/applicationConfig.xml" } )
public class TestClass {} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:32:50.477

当 Spring 自动装配时，它会寻找用于自动装配的构造函数或“getter”（它还说它是按字段执行的，但我从来没有运气）。解决问题的最简单方法是执行以下操作：

```
public class P{

    private User mailUser;

    @Autowired
    public void setUser(User mailUser) {
        this.mailUser = mailUser;
    } 
```

# xcode - 在 Xcode 项目窗口之间切换？

> ID：12212021
> 
> 赞同：0
> 
> 时间：2012-08-31T08:56:33.577
> 
> 标签：xcode

基本上我应该按下选项卡上方的 Command + [`~] 按钮。

这个问题在这里已经回答了两次：

[在 Xcode 项目之间切换？](https://stackoverflow.com/questions/3985534/tabbing-between-xcode-projects)

和

[在 XCode 4.0 中的项目之间导航](https://stackoverflow.com/questions/5582629/navigate-between-projects-in-xcode-4-0)

但这对我不起作用，xcode版本有什么变化吗？或者mac的行为方式？当我按下这个组合时，我听到的只是“无效”的声音。

我正在使用最新的 Mac OS 山狮。

抱歉，如果这属于超级用户堆栈溢出，我只是想在这里可以找到更多 Xcode 用户。

我可以在鼠标垫上滑动，将屏幕显示为当前应用程序的所有活动窗口……但这比在我通常使用的 2 个项目之间切换要慢得多。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T05:33:04.330

我是否从您关于使用三指滑动（用于[Mission Control](http://support.apple.com/kb/HT4689)）的评论中推断出第二个窗口与其他窗口不在同一个桌面上？`command`+序列仅在同一桌面上的```窗口之间跳转，而不是在不同桌面之间跳转（不要与两个物理监视器混淆，如果您的计算机连接了多个监视器，则可以在它们之间跳转）。

`command`+不能```在桌面之间跳转有点奇怪，因为在应用程序之间跳转的`command`+`tab`确实会跨越桌面。如果要在桌面之间跳转，可以按`control`+`1`或`control`+`2`分别跳转到桌面 1 或 2。不过，应该注意的是，虽然在尝试在两个桌面之间跳转时这可能是一个不错的选择，但它确实选择了另一个桌面中的最后一个活动窗口，而不一定是另一个桌面中当前应用程序的窗口。`control`+`left`和`control`+也`right`可以让您在桌面之间跳转。

我相信这是 Mac OS 的“功能”，而不是 Xcode 问题。`command`+在窗口之间跳转的```能力（但不是跨任务控制桌面的窗口）在 Mac OS 中是相同的行为。

* * *

**更新：**

如果此键盘快捷键在任何应用程序中，甚至在单个任务控制桌面中根本不起作用，那么您无需担心 Xcode 设置，而是将注意力集中在键盘设置上：

![键盘快捷键](../Images/704165b14abc98bfbbc1e9bfd1319b92.png)

您可能想查看“将焦点移到下一个窗口”键盘快捷键。据报道，使用国际键盘的人无法正常工作，但通过单击（并因此选择）`command`+```图形，您可以尝试使用不同的键盘快捷键，看看是否适合您。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-28T05:50:45.517

据我所知，我有山狮。
这个怎么样？
control + down
你会得到当前的应用程序窗口。
在它们下面应该有一个 Xcode 最近项目的水平列表（打开和关闭）。使用向左或向右箭头选择项目（应以蓝色突出显示）并按 Enter。

# ios - 如何绘制支持左右拖动的折线图？

> ID：12212026
> 
> 赞同：0
> 
> 时间：2012-08-31T08:56:55.637
> 
> 标签：ios, iphone, core-graphics, draw

我想绘制一个折线图，显示从数据库读取的数据。我使用 X 轴记录时间，我希望图表支持平移和缩放。

我使用核心情节，我创建了一个演示，但它给出了 4 个错误。另一个演示工作同样错误。我使用 Xcode 4.3.3 和 iOS 5.1 SDK。

![错误截图](../Images/3ec3c710fbb38b718a142fc769a515c1.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:03:47.330

看看[Core Plot](http://code.google.com/p/core-plot/)，这可能是迄今为止最好的绘图和图表框架。

这是一个关于*raywenderlich*的教程，向您介绍如何使用它：

[第 1](http://www.raywenderlich.com/13269/how-to-draw-graphs-with-core-plot-part-1)部分和[第 2 部分](http://www.raywenderlich.com/13271/how-to-draw-graphs-with-core-plot-part-2)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-03T10:06:25.963

如果您只想在 Core Plot 中允许水平滚动（和/或缩放），请从另一个问题中查看Jay 的[这个答案](https://stackoverflow.com/a/9721739/1044642)。这是他回答的代码：

使用它只允许水平滚动/平移：

```
-(CGPoint)plotSpace:(CPTPlotSpace *)space willDisplaceBy:(CGPoint)displacement
{
    return CGPointMake(displacement.x, 0);
} 
```

使用它只允许水平缩放：

```
-(CPTPlotRange *)plotSpace:(CPTPlotSpace *)space willChangePlotRangeTo:(CPTPlotRange *)newRange forCoordinate:(CPTCoordinate)coordinate
{
    if (coordinate == CPTCoordinateY) {
    newRange = ((CPTXYPlotSpace*)space).yRange;
    }
    return newRange;
} 
```

关于您遇到的错误：它们似乎与 Core Plot 并没有直接关系。它们出现是因为您没有在头文件中声明 ivars。（*使用未声明的标识符 _titleFont*等）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-10T21:07:06.610

CorePlot 确实支持平移，但速度相当慢。iOS 图表有几种商业工具：

*   [忍者控制](http://www.shinobicontrols.com)
*   [www.threedgraphics.com](http://www.threedgraphics.com)
*   [iPhone Objective-C 的 iPhone 图表库](http://www.keepedge.com/products/iphone_charting/)

ShinobiControls 支持平移和捏合手势。

注意：我与 ShinobiControls 团队有联系。

# actionscript-3 - 在鼠标单击时调用相同的事件处理程序并输入按键

> ID：12212029
> 
> 赞同：0
> 
> 时间：2012-08-31T08:57:10.130
> 
> 标签：actionscript-3, apache-flex, flex3

我们可以使用相同的事件处理程序来监听鼠标单击事件和按下回车键时调度的事件吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:34:04.737

下面的代码可以帮助你： -

```
 <?xml version="1.0" encoding="utf-8"?>
<s:Application xmlns:fx="http://ns.adobe.com/mxml/2009" 
               xmlns:s="library://ns.adobe.com/flex/spark" 
               xmlns:mx="library://ns.adobe.com/flex/mx" minWidth="955" minHeight="600">
    <fx:Declarations>
        <!-- Place non-visual elements (e.g., services, value objects) here -->
    </fx:Declarations>
    <fx:Script>
        <![CDATA[
            import mx.controls.Alert;

            private function callHandler(event:*):void
            {
                if ( event.type == KeyboardEvent.KEY_DOWN || event.type == MouseEvent.CLICK)
                { 
                    if (event.type == MouseEvent.CLICK || (event as KeyboardEvent).charCode == 32 )
                    {
                        Alert.show("Clicked", "Alert"); 
                    }

                }
            }

        ]]>
    </fx:Script>

    <s:Button label="Click" x="100" y="100" click="{callHandler(event)}" keyDown="{callHandler(event)}"/>
</s:Application> 
```

# iphone - 通过phonegap打开iphone设置

> ID：12212031
> 
> 赞同：0
> 
> 时间：2012-08-31T08:57:15.370
> 
> 标签：iphone, cordova, settings

你能帮我吗，如何通过phonegap打开iphone设置。我试过测试，但什么都没有。

我正在开发 Xcode 4.3、iOS sdk 5.1、cordova 1.7

多谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T08:58:57.713

我认为这是不可能的，因为 SDK 5.1 中的本机应用程序无法做到这一点

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-26T21:38:57.923

从 iOS 8 可以打开应用程序设置对话框。

看到这个答案：[https ://stackoverflow.com/a/32229649/3340702](https://stackoverflow.com/a/32229649/3340702)

# php - 从 moodialog 获取特定字段并将值传递给父屏幕

> ID：12212032
> 
> 赞同：1
> 
> 时间：2012-08-31T08:57:16.253
> 
> 标签：php, javascript, iframe, mootools

我使用了 MooDialog.iframe 和 onClose 我需要一些值。但无法从该 iFrame 中获取值并希望在我在弹出窗口中打开此框架的页面中使用。

我用于弹出的功能/代码如下：

```
function popup_window() {
    var hostname = location.protocol + "//" + location.hostname +       (location.port && ":" + location.port) + "/";
    var opcion = "crear";
    co2=new MooDialog.IFrame(hostname+'infinity/contabilidad/cuenta%20crear/popup_window.php?action=2',
        { 
            title: 'Editar Centro','class' : 'content_edit1 MooDialog',
            onClose: function()
            {   
                /////////alert(document.getElementById('numero_cuenta').value);
//numero_cuenta is something i want
                location.reload();                                                                          
            }
        }
    );
} 
```

**numero_cuenta**是弹出 iframe 的 input.text 的 id。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T13:15:01.490

我找到了解决方案：

从 popup_window.php 文件中通过框架按 id 获取元素。我们需要使用以下代码：

```
onClose: function()
{   
    var myIFrame = document.getElementById("MooFrame");
    var content = myIFrame.contentWindow.document.getElementById('abcd').value;

    alert('content: ' + content);   

    location.reload();                                                                          
} 
```

# facebook - Facebook-share：使用 og:image 进行自动图像检测

> ID：12212033
> 
> 赞同：-1
> 
> 时间：2012-08-31T08:57:16.633
> 
> 标签：facebook, image, facebook-sharer

我想知道如何从网页中检测图像。我想要一个代码，如果我想在 facebook 上分享我当时所在页面的图像，它会自动检测。

例子：

```
<meta property="og:image" content="http://www.geturl.thedoctorofhouse.com/audi_a3_2.jpg" /> 
```

我应该如何处理 og:image 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:18:41.407

是的，这看起来是正确的 - 内容应该包含您想要使用的图像的 url。

您可以使用Facebook 提供的[linter 工具](http://developers.facebook.com/tools/debug)检查页面元数据的解释方式

# ios - 如何将此第 1 天作为 uilabel 传递给下一个视图控制器，我想在下一页打印第 1 天

> ID：12212036
> 
> 赞同：-1
> 
> 时间：2012-08-31T08:57:23.013
> 
> 标签：ios, xcode, uinavigationcontroller, uilabel

```
UILabel * lbl=[[UILabel alloc]initWithFrame:CGRectMake​(920, 0, 280, 50)];
 lbl.text=@"DAY 1";
 lbl.backgroundColor=[UIColor clearColor];
 [lbl setFont:[UIFont fontWithName:@"Gill Sans" size:30]];
 [self.view addSubview:lbl]; 
```

如何将此第 1 天作为 uilabel 传递给下一个视图控制器，我想在下一页打印第 1 天

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:03:15.217

为您的视图控制器编写一个自定义初始化程序，以获取您要传递给它的数据。

IE`[[MyUIViewController alloc]initWithMyData:(MyClass*)data]`

然后让视图控制器将其标签的值设置为传入的值。

# python - 如何在python中获取当前范围

> ID：12212037
> 
> 赞同：3
> 
> 时间：2012-08-31T08:57:29.413
> 
> 标签：python, scope

是否有任何指向当前范围的参考，我查找了很多文章但找不到答案，例如我想打印当前范围内的每个 var 的内容

```
for x in list(locals()):
    print(x) 
```

但只给我这个，var的名字

```
__builtins__
__file__
__package__
__cached__
__name__
__doc__ 
```

我不想要这样的代码

```
print(__builtins__)
print(__file__)
print(__package__)
print(__cached__)
print(__name__)
print(__doc__)
.... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:11:10.533

要获取这些值，您可以使用：

```
for symbol, value in locals().items():
    print symbol, value 
```

locals() 给你一个字典。迭代一个 dict 会给你它的键。要获取 (key, value) 对的列表，请使用 items 方法。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T09:56:29.420

大量的矫枉过正......将本地命名空间的过滤和打印包装在一个函数中。

我不推荐这个。我发布它主要是为了表明它可以完成并获得评论。

```
import inspect

def print_local_namespace():
    ns = inspect.stack()[1][0].f_locals
    for k, v in ns.iteritems():
        if not k.startswith('__'):
            print '{0} : {1}'.format(k, v)

def test(a, b):
    c = 'Freely'
    print_local_namespace()
    return a + b + c

test('I', 'P') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T09:44:05.673

“当前范围”是什么意思？如果您的意思只是局部变量，那么`locals()`是正确的答案。如果您指的是可以使用的所有标识符 [locals + globals + *nonlocals* ]，那么事情就会变得更加混乱。可能更简单的解决方案就是[这个](https://stackoverflow.com/questions/430811/enumerate-or-list-all-variables-in-a-program-of-your-favorite-language-here)。

如果您不想要`__.*__`变量，只需将它们过滤掉即可。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-31T09:01:33.807

`locals()`只打印那些不以 开头的变量名`'__'`：

```
for local_var in list(locals()):
    if not local_var.startswith('__'): print local_var 
```

# ruby-on-rails - 在嵌套属性rails 2上计算父级

> ID：12212038
> 
> 赞同：0
> 
> 时间：2012-08-31T08:57:35.743
> 
> 标签：ruby-on-rails

我的`enrollment.rb`

```
attr_accessible :semester_id
has_many :studentpayments
has_many :student_deductions 
```

我的`studentpayment.rb`

```
belongs_to :enrollment 
```

我的`student_deduction.rb`

```
belongs_to :enrollment 
```

我如何根据 has 或 has 获得唯一`semester_id`的`enrollment`注册`studentpayment`基础`student_deduction`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:54:56.490

```
@enrollment = Enrollment.find_by_semester_id(id) # find by semester_id

@enrollment.studentpayments.any? # if @enrollment has any student payments
@enrollment.student_deductions.any? 
```

# xml - 解析 rss 提要时给定编码中的无效字符

> ID：12212042
> 
> 赞同：0
> 
> 时间：2012-08-31T08:57:43.613
> 
> 标签：xml, vb.net, character-encoding, rss

我正在解析来自另一台服务器的 rss 提要并在中继器中显示。但是有错误：给定编码中的字符无效。代码如下：

```
Protected Sub Page_Load(sender As Object, e As System.EventArgs) Handles Me.Load
        'Create a WebRequest
        Dim rssReq As WebRequest = WebRequest.Create("http://www.freelancer.com/rss/affiliatejob_mamboking_NET.xml")
        'Create a Proxy
        Dim px As New WebProxy("http://www.freelancer.com/rss/affiliatejob_mamboking_NET.xml", True)
        'Assign the proxy to the WebRequest
        rssReq.Proxy = px
        'Set the timeout in Seconds for the WebRequest
        rssReq.Timeout = 5000
        Try
            'Get the WebResponse
            Dim rep As WebResponse = rssReq.GetResponse()
            'Read the Response in a XMLTextReader
            Dim xtr As New XmlTextReader(rep.GetResponseStream())
            'Create a new DataSet
            Dim ds As New DataSet()
            'Read the Response into the DataSet
            ds.ReadXml(xtr)
            'Bind the Results to the Repeater
            rssFreelance.DataSource = ds.Tables(0)
            rssFreelance.DataBind()
        Catch ex As Exception
            Throw ex
        End Try
    End Sub 
```

当我看到 xml 的源代码时，它显示的是 utf-8 编码。

```
<?xml version="1.0" encoding="utf-8"?>
<?xml-stylesheet type="text/xsl" href="http://www.freelancer.com/content/rss.xsl" ?><rss version="2.0" xmlns:coop="http://www.google.com/coop/namespace"> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T06:35:09.223

```
Imports System.Web
WebUtility.HtmlDecode(response) 
```

其中**response**是您要解码的实际文本、**描述**或**标题**。

# iphone - Objective-C - for循环中的未知错误

> ID：12212044
> 
> 赞同：0
> 
> 时间：2012-08-31T08:57:49.567
> 
> 标签：iphone, objective-c, ios, xcode

以下代码尝试在 CSV 文件中搜索由 cell.textlabel.text 给出的字符串

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
//create singleton instance
Globals *myGlobals = [Globals sharedGlobals];

//get searchstring form cell
NSString *stringToFind = [self.tableView cellForRowAtIndexPath:indexPath].textLabel.text;

//get Path of csv and write data in string:allLines
NSString *filePath = [[NSBundle mainBundle] pathForResource:@"ITILcsv" ofType:@"txt"];
if(filePath){

    NSString *wholeCSV = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];
    NSArray *allLines = [wholeCSV componentsSeparatedByString:@"\n"];
    //declaration
    NSArray *currentArray = nil;
    NSString *currentSearchString = nil;

//look for searchstring in 4th line of csv, if found write whole line to a singleton-variable
    for (int i=0 ; i < [allLines count]; i++){

        currentArray = [[allLines objectAtIndex:i] componentsSeparatedByString:@";"];
        currentSearchString = [currentArray objectAtIndex:3];

        if ([stringToFind isEqualToString:currentSearchString]){

            [myGlobals setCurrentLine:currentArray];
        }

    }

} 
```

在我当前的项目中使用 csv 文件进行了大量工作，我很确定这应该可以工作，但不知何故，当调用函数时，应用程序总是崩溃。

通过一大堆测试，我很确定问题出在以下几行：

```
 currentArray = [[allLines objectAtIndex:i] componentsSeparatedByString:@";"];
        currentSearchString = [currentArray objectAtIndex:3]; 
```

该程序使用注释掉的这两行，但没有实现所需的功能；）我不知道问题可能是什么？

错误是“main”中的 SIGABRT。

提前谢谢大家。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:26:02.867

**当您的currentArray**的元素**小于 3**并且您**引用索引 3**时，可能会崩溃。因此，在这种情况下，您会找到一个遥不可及的索引。

所以更好的方法是

```
for (int i=0 ; i < [allLines count]; i++)
{
    currentArray = [[allLines objectAtIndex:i] componentsSeparatedByString:@";"];

    // check and then pick
    if ([currentArray count] > 3)
    {
        currentSearchString = [currentArray objectAtIndex:3];

        if ([stringToFind isEqualToString:currentSearchString])
        {
            [myGlobals setCurrentLine:currentArray];
        }
    }
} 
```

# xslt - 如何将元素插入到 xslt 中先前创建的元素中？

> ID：12212050
> 
> 赞同：2
> 
> 时间：2012-08-31T08:58:10.083
> 
> 标签：xslt

我有几条来自数据库的记录，用于文件中的相应记录。

示例记录号 XML

1.  `<XML_FILE_HEADER file_name="sample.txt" />`
2.  `<XML_RECORD record_number="1" name="John Doe" Age="21"/>`
3.  `<XML_RECORD record_number="2" name""Jessica Sanchez" Age="23"/>`
4.  `<XML_FILE_FOOTER total_records="2"/>`

现在对于每条记录，我都有一个 xslt 模板，可以在 xml 中创建输出文件。

对于记录 1：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xalan="http://xml.apache.org/xslt">
<xsl:output method="xml"/>
<xsl:template match="XML_FILE_HEADER">
    <xsl:element name="File">
    <xsl:attribute name="FileName"><xsl:value-of select="@file_name"/></xsl:attribute>
    </xsl:element>
  </xsl:element>
</xsl:template>
</xsl:stylesheet> 
```

对于记录 2 和 3：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xalan="http://xml.apache.org/xslt">
     <xsl:output omit-xml-declaration="yes"/>
     <xsl:template match="XML_RECORD">
       <xsl:element name="Record">
        <xsl:attribute name="Name"><xsl:value-of select="@name"/></xsl:attribute>
        <xsl:element name="Details">
        <xsl:attribute name="Age"><xsl:value-of select="@Age"/></xsl:attribute>
        </xsl:element>
      </xsl:element>
     </xsl:template>
</xsl:stylesheet> 
```

对于记录 4：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xalan="http://xml.apache.org/xslt">
     <xsl:output omit-xml-declaration="yes"/>
     <xsl:template match="XML_FILE_FOOTER">
       <xsl:element name="Totals">
        <xsl:attribute name="Total Records"><xsl:value-of select="@total_records"/></xsl:attribute>
      </xsl:element>
     </xsl:template>
</xsl:stylesheet> 
```

问题是在使用上面的模板附加每条记录后，我会有一个输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<File FileName="sample.txt"></File>
<Record Name="John Doe" Age="21"></Record>
<Record Name="Jessica Sanchez" Age="22"></Record>
<Totals Total Records="2"></Totals> 
```

我如何能够在文件下插入记录和总计元素？这样它就会有这样的输出：

```
<?xml version="1.0" encoding="UTF-8"?>
<File FileName="sample.txt">
<Record Name="John Doe" Age="21"></Record>
<Record Name="Jessica Sanchez" Age="22"></Record>
<Totals Total Records="2"></Totals>
</File> 
```

任何帮助将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:26:22.643

**就像这样简短易懂**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <xsl:apply-templates select="XML_FILE_HEADER"/>
 </xsl:template>

 <xsl:template match="XML_FILE_HEADER">
   <File FileName="{@file_name}">
     <xsl:apply-templates select="../*[not(self::XML_FILE_HEADER)]"/>
   </File>
 </xsl:template>

 <xsl:template match="XML_RECORD">
   <Record name="{@name}" Age="{@Age}"/>
 </xsl:template>

 <xsl:template match="XML_FILE_FOOTER">
   <Totals TotalRecords="{@total_records}"/>
 </xsl:template>
</xsl:stylesheet> 
```

**当此转换应用于提供的 XML（更正为格式正确）文档时：**

```
<t>
    <XML_FILE_HEADER file_name="sample.txt" />
    <XML_RECORD record_number="1" name="John Doe" Age="21"/>
    <XML_RECORD record_number="2" name="Jessica Sanchez" Age="23"/>
    <XML_FILE_FOOTER total_records="2"/>
</t> 
```

**产生了想要的正确结果**：

```
<File FileName="sample.txt">
   <Record name="John Doe" Age="21"/>
   <Record name="Jessica Sanchez" Age="23"/>
   <Totals TotalRecords="2"/>
</File> 
```

**说明**：

1.  正确使用模板。

2.  正确使用`xsl:apply-templates`排序结果。

3.  正确使用 AVT（属性值模板）。

4.  避免使用`xsl:element`

5.  *没用*`xsl:call-template`。_

6.  几乎完全以“推式”实施。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:07:09.330

你想要的是`<xsl:call-template name="templatename" />`元素。这允许您从另一个模板内部调用一个模板。

就像是

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:xalan="http://xml.apache.org/xslt">
    <xsl:output method="xml"/>
    <xsl:template match="/XML_FILE/XML_FILE_HEADER">
      <xsl:element name="File">
        <xsl:attribute name="FileName">
          <xsl:value-of select="@file_name"/>
        </xsl:attribute>
        <xsl:for-each select="/XML_FILE/XML_RECORD">
          <xsl:call-template name="RecordTemplate" />
        </xsl:for-each>        
        <xsl:call-template name="TotalTemplate" />
      </xsl:element>
    </xsl:template>

    <xsl:template name="RecordTemplate">
      <xsl:element name="Record">
        <xsl:attribute name="Name"><xsl:value-of select="@name"/></xsl:attribute>
        <xsl:attribute name="Age"><xsl:value-of select="@Age"/></xsl:attribute>
      </xsl:element>
    </xsl:template>

    <xsl:template match="/XML_FILE/XML_FILE_FOOTER" name="TotalTemplate">
      <xsl:element name="Totals">
          <xsl:attribute name="Total Records"><xsl:value-of select="@total_records"/>
      </xsl:element>
    </xsl:template>
</xsl:stylesheet> 
```

当然，您的输入必须是 XML 有效的（即有一个根节点），就像这样

```
<XML_FILE>
  <XML_FILE_HEADER file_name="sample.txt" />
  <XML_RECORD record_number="1" name="John Doe" Age="21"/>
  <XML_RECORD record_number="2" name""Jessica Sanchez" Age="23"/>
  <XML_FILE_FOOTER total_records="2"/>
</XML_FILE> 
```

# php - 是否建议开发自己的 PHP 日志？

> ID：12212064
> 
> 赞同：0
> 
> 时间：2012-08-31T08:59:09.893
> 
> 标签：php, logging, monitor

Apache 日志和 PHP 日志似乎没有提供太多有用的方法来监控我的脚本在**生产服务器**中的性能。我正在考虑为我的脚本开发自定义日志，该日志记录以下信息：

1.  时间。
2.  请求的 URL。
3.  内存峰值使用率。
4.  脚本运行需要多长时间。

日志将按文件存储并按日期分组。

**问题**

1.  它是否会显着影响高流量网站的性能？如果只是轻微影响，值得一试。
2.  是否有任何现有的库或 PHP 扩展已经这样做了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:08:34.497

我认为您正在寻找[xhprof](http://pecl.php.net/package/xhprof)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:14:52.803

使用[xdbug](http://www.xdebug.org/) + [webgrind](http://code.google.com/p/webgrind/)进行分析

但是一旦部署到服务器就应该避免它们。

并且为了记录目的，[graylog2](http://graylog2.org/)很棒

# javascript - 使用 ANTLR 解析 JavaScript 正则表达式

> ID：12212065
> 
> 赞同：9
> 
> 时间：2012-08-31T08:59:10.320
> 
> 标签：javascript, antlr

我有一个 ANTLR JavaScript 语法（取自互联网），它似乎支持除正则表达式文字之外的所有内容。

正则表达式文字的问题在于您有两个规则，本质上是：

```
multiplicativeExpression
    : unaryExpression (LT!* ('*' | '/' | '%')^ LT!* unaryExpression)* 
```

和

```
regexLiteral
    : '/' RegexLiteralChar* '/' 
```

其中规则 RegexLiteralChar 使用与普通表达式不同的词法分析器规则（例如，双引号不会终止它）。

这意味着我需要以某种方式从我的解析器中更改某种词法分析器状态。我怎样才能做到这一点？甚至可能吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-03T05:28:34.790

查看 Bart Kiers [here](http://research.xebic.com/es3/)的评论中提到的语法，您可以看到这条评论，

> 定义这种语法面临的主要挑战是：
> 
> -1- 与乘法表达式和正则表达式文字相关的 DIV 符号周围的歧义。这可以通过一些词法分析器驱动的魔法来解决：门控语义谓词根据 RegularExpressionsEnabled 属性的值打开或关闭正则表达式的识别。启用正则表达式时，它们优先于除法表达式。是否启用正则表达式的决定是基于前一个标记可以被认为是除法左侧操作数的最后一个标记的启发式方法。
> 
> ...

areRegularExpressionsEnabled() 函数定义为，

```
private final boolean areRegularExpressionsEnabled()
{
    if (last == null)
    {
        return true;
    }
    switch (last.getType())
    {
    // identifier
        case Identifier:
    // literals
        case NULL:
        case TRUE:
        case FALSE:
        case THIS:
        case OctalIntegerLiteral:
        case DecimalLiteral:
        case HexIntegerLiteral:
        case StringLiteral:
    // member access ending 
        case RBRACK:
    // function call or nested expression ending
        case RPAREN:
            return false;
    // otherwise OK
        default:
            return true;
    }
} 
```

然后在RegularExpressionLiteral表达式中使用该函数，

```
RegularExpressionLiteral
    : { areRegularExpressionsEnabled() }?=> DIV RegularExpressionFirstChar RegularExpressionChar* DIV IdentifierPart*
    ; 
```

# python - 如何在 cython 中声明一个全局 numpy.ndarray？

> ID：12212068
> 
> 赞同：3
> 
> 时间：2012-08-31T08:59:17.410
> 
> 标签：python, numpy, global-variables, cython

我想创建一个需要在 numpy 数组中保存一些内部状态的信号处理算法。

为了速度，我在 cython 中对其进行了编码，并将状态声明为一个全局变量，如下所示：

```
import numpy as np
cimport numpy  as np
cdef np.ndarray delay_buffer 
```

但是，我真正想做的是：

```
import numpy as np
cimport numpy as np
DTYPE = np.float32
ctypedef np.float32_t DTYPE_t
cdef np.ndarray[DTYPE_t] delay_buffer 
```

这我可以做任何其他事情，但不能在全球范围内。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-15T11:13:07.333

> 有没有办法做到这一点？

不，正如错误所说，`Buffer types only allowed as function local variables`.

一种替代方法是使用单片`main`功能。这实际上只需要缩进所有内容，但这意味着您只能共享这么多。

我最喜欢的选择是升级到使用内存视图的现代方法：

```
cdef DTYPE_t[:] delay_buffer 
```

应该更快，更清洁且功能不逊色。

# iphone - 如何通过 UILocalNotification 实现“警报”？

> ID：12212070
> 
> 赞同：0
> 
> 时间：2012-08-31T08:59:20.130
> 
> 标签：iphone, objective-c, ios, xcode, uilocalnotification

我想通过 UILocalNotification 实现警报。我是第一次这样做。我不知道我是怎么做到的。请任何人帮助我..谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:02:05.590

[这](http://blog.mugunthkumar.com/coding/iphone-tutorial-scheduling-local-notifications-using-a-singleton-class/)是一个很好的教程。

# grails - Grails 服务使用来自另一个服务的方法

> ID：12212072
> 
> 赞同：5
> 
> 时间：2012-08-31T08:59:39.130
> 
> 标签：grails, service

我正在构建一个 grails 应用程序，并且在尝试在不同的服务中建立服务时遇到了一个问题。这两个服务都使用另一个定义的方法，例如。

```
class fooService{
    def barService
    barService.doIt()

    def getIt(){
    ...
    }
}

class barService{
    def fooService
    fooService.getIt()

    def doIt(){
    ...
    }
} 
```

当我运行应用程序并转到使用方法的位置时，会出现此错误；

```
Error creating bean with name 'fooService': 
org.springframework.beans.factory.FactoryBeanNotInitializedException: FactoryBean is 
not fully initialized yet 
```

这是在grails中无法完成的事情吗？或者有人可以提供任何建议吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:30:52.017

我过去也遇到过类似的问题，但前提是这两种服务都是事务性的。如果可以使其中至少一个成为非事务性的，那么它应该按原样工作。如果那是不可能的，那么后备是做一种“后期绑定”

```
class FooService {
  def grailsApplication
  private getBarService() {
    grailsApplication.mainContext.barService
  }

  public methodThatUsesBarService() {
    barService.doSomething()
  }
} 
```

这将在应用程序上下文中查找`barService`它的使用点，而不是`FooService`创建点。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T11:50:09.820

服务可以被另一个服务调用，但在初始化时是不可能的。如果要实现这个，方式应该是这样的。

```
class fooService{
    def barService

    def getIt(){
        ...
    }

    def anotherFooMethod(){

        barService.doIt();
    }
}

class barService{
    def fooService

    def doIt(){
        ...
    }

    def anotherBarMethod(){

        fooService.getIt();
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-24T08:49:59.113

所有这些答案都非常好，并展示了如何通过框架处理问题。虽然，当我遇到这个问题时，我意识到如果我绝对*必须*让服务相互调用并引起冲突，那么我的计划和架构肯定存在缺陷。我没有找到解决方法，而是采取了一种稍微不那么复杂和严格的方法——我进行了重组。我将有问题的方法从服务类移到另一个服务类。它需要一些重构、重新思考和复制/粘贴技能，但我认为应用程序更适合它。

我并不是说这比其他答案更好。我是说，这一次，这个项目重构是一个更好、更快、更简单的解决方案。我强烈推荐它。

*更新* 我们的最终策略是将所有“实用程序”服务功能重构为一个 baseService 类，然后让所有其他需要该实用程序服务的服务扩展 baseService。新策略是避免将服务注入到其他服务中，除非出现某些不允许我们遵循这种继承模式的情况。这将为我们提供一个更清晰的代码库，并减少需要遵循的意大利面条式的注入痕迹。另外，它消除了这个错误的出现。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T11:27:36.777

那不是有效的代码，所以很难知道到底发生了什么。`doIt()`和`getIt()`调用在构造函数中吗？如果是这样，请更改服务以实现`org.springframework.beans.factory.InitializingBean`并执行方法中的调用`afterPropertiesSet`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-07-19T07:24:52.610

您可以使用以下方法处理循环引用 -

让我们称它为 firstService 和 secondService。

## secondService 类的代码更改

```
protected def firstService 
def grailsApplication 

def initialize() {
    this.firstService = grailsApplication.mainContext.firstService 
} 
```

## Bootstrap.groovy 中的代码更改

```
def secondService

def init = { servletContext ->

    secondService.initialize()
...
.. 
```

# php - 向数据库添加唯一键

> ID：12212075
> 
> 赞同：0
> 
> 时间：2012-08-31T08:59:56.883
> 
> 标签：php, sql, database, insert

我的网站上有一个表格供用户输入他们的 fname、sname、公司、电话、电子邮件，然后在提交时更新到数据库。我的数据库中还有一个字段用于唯一的用户 ID，以防止用户具有相同的姓名和公司等。提交我的表单时，如何在此字段中添加一个唯一编号，使其与已获取的字段相比 +1。目前只有 3 个用户 ID，所以我需要下一个输入的用户 ID 为 4，依此类推。

目前我有这个。

```
require_once('dbConnect.php');
//taken from a smarty template form.
$addForename = $_POST['forename'];
$addSurname = $_POST['surname'];
$addCompany = $_POST['company'];
$addContact = $_POST['contact'];
$addEmail = $_POST['email'];

public function addUser($addForename,$addSurname,$addCompany,$addContact,$addEmail)
{
    $sql = "INSERT INTO `Users` (`Forename`, `Surname`, `ComanyName`, `Phone`, `Email`) VALUES ('".$addForename."','".$addSurname."','".$addCompany."','".$addContact."','".$addEmail."')";
    $databaseAccess = new DatabaseConnect();
    try
    {
        $result = $databaseAccess->connect($sql, "add");
    }
   catch (Exception $e)
   {
       throw new Exception("Adding  User Failed !!!");
   }

   if ($result)
   {
       return 1;
   }
   else{return 0;}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:02:19.903

如果您使用 phpmyadmin，当您使用“A_I”或 Auto_Increment 创建新列时应该有一个复选框。您必须检查它，然后它会计算您的条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:01:11.237

`auto_increment`在数据库中将行创建为 an ：

```
create table someName (ID int primary key auto_increment, col1 int ...); 
```

然后，当您插入数据时，要么将其传递给 null，要么不要像这样插入该字段：

```
insert into someName (col1) values (3); 
```

或者

```
insert into someName (ID, col1) values (null, 3); 
```

您可以使用以下内容修改当前表：

```
ALTER TABLE someName MODIFY COLUMN ID INT NOT NULL AUTO_INCREMENT , ADD PRIMARY KEY (ID); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:05:18.550

创建标识：

```
ALTER TABLE users ADD ID INT UNSIGNED 
       NOT NULL AUTO_INCREMENT, ADD PRIMARY KEY (ID); 
```

并在您想要的地方启动自动增量

```
ALTER TABLE tbl AUTO_INCREMENT = 4; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:05:50.123

创建一列将其设置为主键并自动递增。您甚至可以编写一个用于插入表的存储过程。这样您就不必每次都编写查询，也不必担心转义字符。如果您希望从存储过程中返回特定的否，请在存储过程中使用`SCOPE_IDENTITY()`。

# php - PCRE 库版本太旧

> ID：12212079
> 
> 赞同：5
> 
> 时间：2012-08-31T09:00:08.550
> 
> 标签：php, apache, apache2, centos, pcre

> Bug Genie 3 需要 PCRE 库 8.0 或更高版本。您拥有 2008-09-05 版本 7.8。从您的常用来源将您的系统更新到最新版本。

在我查看问题并尝试使用以下步骤更新我的 pcre 库后：

```
wget the latest source of pcre from sourceforge 8.31

# tar -xzf pcre-8.31.tar.gz
# cd pcre-8.31
# ./configure --enable-utf8  --enable-unicode-properties
# make && make install 
```

当我做 pcretest -C 我得到了这个

```
[root@server1 /]# pcretest -C
PCRE version 8.31 2012-07-06
Compiled with
  8-bit support only
  UTF-8 support
  Unicode properties support
  No just-in-time compiler support
  Newline sequence is LF
  \R matches all Unicode newlines
  Internal link size = 2
  POSIX malloc threshold = 10
  Default match limit = 10000000
  Default recursion depth limit = 10000000
  Match recursion uses stack 
```

当我找到时，有很多

```
[root@server1 /]# locate libpcre
/lib64/libpcre.so.0
/lib64/libpcre.so.0.0.1
/usr/lib64/libpcrecpp.so.0
/usr/lib64/libpcrecpp.so.0.0.0
/usr/lib64/libpcreposix.so.0
/usr/lib64/libpcreposix.so.0.0.0
/usr/local/lib/libpcre.a
/usr/local/lib/libpcre.la
/usr/local/lib/libpcre.so
/usr/local/lib/libpcre.so.1
/usr/local/lib/libpcre.so.1.0.1
/usr/local/lib/libpcrecpp.a
/usr/local/lib/libpcrecpp.la
/usr/local/lib/libpcrecpp.so
/usr/local/lib/libpcrecpp.so.0
/usr/local/lib/libpcrecpp.so.0.0.0
/usr/local/lib/libpcreposix.a
/usr/local/lib/libpcreposix.la
/usr/local/lib/libpcreposix.so
/usr/local/lib/libpcreposix.so.0
/usr/local/lib/libpcreposix.so.0.0.1
/usr/local/lib/pkgconfig/libpcre.pc
/usr/local/lib/pkgconfig/libpcrecpp.pc
/usr/local/lib/pkgconfig/libpcreposix.pc 
```

最后，我很高兴地支持我的 php 信息.. 它仍然显示我安装了 7.8 版。

![在此处输入图像描述](../Images/e6e56dd41bc7d39c6143b8a80abbc4a1.png)

当开源应用程序 buggenie 需要这个时，我可以知道我应该怎么做来解决这个问题。谢谢回复。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-06T08:57:38.700

我是 Centos 6.3 用户。这在我的情况下有效。

1.  搜索现有的 pcre。

    ```
    rpm -qa | grep pcre 
    ```

2.  使用 --nodeps 删除所有现有的 pcre。

3.  下载高于 8.x 的 pcre rpm。我使用了来自[http://rpmfind.net/linux/rpm2html/search.php?query=pcre的一个](http://rpmfind.net/linux/rpm2html/search.php?query=pcre)

4.  使用 rpm 安装它。

5.  重新启动您的 Web 服务并检查 phpinfo。它应该显示您刚刚安装的 pcre 库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-08-01T21:42:42.963

在 Centos 5.9 上，修改版的 drmanalo 步骤对我们有用：

1.  搜索现有的 pcre
    rpm -q --queryformat "%{name}.%{arch}\n" pcre
2.  使用 --nodeps rpm -ev --nodeps pcre-devel.x86_64
    rpm -ev --nodeps pcre.x86_64
    rpm -ev --nodeps pcre-devel.i386
    rpm -ev --nodeps pcre.i386删除所有现有的 pcre

3.  添加了存储库
    nano /etc/yum.repos.d/utter-ramblings.repo

    > [utter-ramblings]
    > name=Utter Ramblings
    > baseurl=[http://www.jasonlitka.com/media/EL5/x86_64/gpgkey=](http://www.jasonlitka.com/media/EL5/x86_64/) /media/RPM-GPG-KEY-jlitka enabled=1 gpgcheck=
    > 1**`#same.url.as.above#`**

4.  使用 yum 安装
    yum --disablerepo=* --enablerepo=utter-ramblings install pcre pcre-devel
5.  重新启动您的网络服务并检查 phpinfo

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T12:23:11.940

`--with-pcre-regex=DIR`我认为您必须使用选项针对最新的 PCRE 库手动构建 PHP 。为此，您需要获取 PHP 源和 PCRE 源，以及您可能需要的所有其他库的源。

此页面[http://php.net/manual/en/pcre.installation.php](http://php.net/manual/en/pcre.installation.php)总结了与 PHP 捆绑的 PCRE 版本。

更简单的选择是使用操作系统的包管理器更新 PHP（可能通过启用不稳定的存储库），但这取决于您的操作系统。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-09-11T10:05:39.233

在我的 Centos 5.9 上，我可以将 pcre 从 6.* 升级到 8.* 没问题，但 PHP 或 Apache 无法“识别”它。问题通过将 php53 升级到 php54 自行解决

# extjs - 如何在 ExtJS 中更改 LoadMask 文本

> ID：12212081
> 
> 赞同：0
> 
> 时间：2012-08-31T09:00:22.407
> 
> 标签：extjs, extjs4, extjs-mvc

有没有办法`Ext.LoadMask.msg`在全球范围内更改 ExtJS 4.1 MVC 应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:30:42.317

它应该与

```
// changing the msg text below will affect the LoadMask
Ext.define("Ext.locale.##.view.AbstractView", {
    override: "Ext.view.AbstractView",
    msg: "Loading data..."
}); 
```

对于大多数情况。在 onReady() 函数之后/内部调用它。将 ## 设置为您的语言环境

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T16:04:06.723

```
Ext.define("Ext.locale.de.view.AbstractView", {
override: "Ext.view.AbstractView",
loadingText: "Uebertrage Daten..." }); 
```

这对我有用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-25T01:43:00.037

在 onReady 函数中添加如下内容：

```
if (Ext.LoadMask) {
    Ext.apply(Ext.LoadMask.prototype, {
        msg: 'Загрузка...'
    });
} 
```

或者像这样在你的 locale.** 文件中：

```
Ext.define("Ext.locale.**.LoadMask", {
    override: "Ext.LoadMask",
    msg: "Загрузка..."
}); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T09:39:46.033

```
var myMask = new Ext.LoadMask(myPanel, {msg:"Please wait..."});
myMask.show(); 
```

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.LoadMask](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.LoadMask)

# java - 在 Spring MVC Web 应用程序中为 JQuery DatePicker 提供基于区域设置的日期格式的最佳方法？

> ID：12212082
> 
> 赞同：2
> 
> 时间：2012-08-31T09:00:25.923
> 
> 标签：java, spring, date-format

我正在开发一个 Spring 3 MVC 应用程序，并且有 JQuery 日期选择器，我想提供一个基于用户语言环境的日期格式。我查看了使用 @ModelAttribute 带注释的控制器方法，但看不到如何获取请求上下文。

当前代码：

```
<script type="text/javascript">
    <![CDATA[
        $( "#startDate").datepicker({
            showOn: "both",
            buttonImage: "${calendarIconUrl}",
            dateFormat:'yy/mm/dd',
            minDate:0
        });
    ]]>
</script> 
```

所以这是`'yy/mm/dd'`我想用基于语言环境的日期格式替换的。

编辑：所以我找到了[http://docs.jquery.com/UI/Datepicker/Localization](http://docs.jquery.com/UI/Datepicker/Localization)但现在我需要弄清楚如何从浏览器中获取国家代码......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:12:26.293

我遇到了类似的问题，其中区域设置是由服务器环境设置的（与所需的浏览器区域设置相反）。我以这种方式将 Java 语言环境“翻译”为 JQuery Datepicker 语言环境：

```
Locale locale = LocaleContextHolder.getLocale();
String datepickerLocale;
if(locale.getLanguage().equals("de")){
    datepickerLocale = "de"; // only "de", no country code
} else if (locale.getLanguage().equals("en")){
    if(locale.getCountry().equals("GB")){
        datepickerLocale = "en-GB"; // en-GB must be set explicitly
    } else if(locale.getCountry().equals("US")){
        datepickerLocale = ""; // en-US is default
    }
}
// [...] more locales if needed, see docs for Datepicker Localization
uiModel.addAttribute("datepickerLocale", datepickerLocale); 
```

然后在视图中设置：

```
$.datepicker.setDefaults( $.datepicker.regional['${datepickerLocale}'] ); 
```

从浏览器（请求）获取语言环境应该是这样的（未经测试）

```
RequestContextUtils.getLocaleResolver(request).resolveLocale(request) 
```

更新：我必须实现一个 DateEditor 进行验证，告诉 Spring 使用哪个语言环境来提交数据。

# php - 为什么 curl 返回 null？

> ID：12212084
> 
> 赞同：2
> 
> 时间：2012-08-31T09:00:37.417
> 
> 标签：php, curl

我想通过 php 脚本获取 yahoo woeid。

我可以访问 url 'http://query.yahooapis.com/v1/public/yql?q=select * from geo.places where text="NewYork"&format=json' 并在我的浏览器中获取 json 文件。但是当我使用 curl 它返回 null。

这就是代码。

```
 public function getwoeid(){
        $ch = curl_init();
        $url = 'http://query.yahooapis.com/v1/public/yql?q=select * from geo.places where text="'.$this->cityname.'"&format=json';
        //echo $url;
        curl_setopt($ch, CURLOPT_URL, $url);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
        $data=curl_exec($ch) or die($this->returnerror()); 
        curl_close($ch);
        $array = json_decode($data, true);
        return $array;
    } 
```

当我尝试从 geo.places where text="上海"&format=json' 访问 'http://query.yahooapis.com/v1/public/yql?q=select *' 时，curl 工作正常。

我无法修复它。

任何建议将不胜感激！谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:21:19.967

您可以只使用 PHP 的[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)。空格必须由[urlencode()](http://php.net/manual/en/function.urlencode.php)编码；

```
$url = 'http://query.yahooapis.com/v1/public/yql?q=select * from geo.places where text="'.$this->cityname.'"&format=json';
$data = file_get_contents(urlencode($url));
$array = json_decode($data, true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:14:08.177

刚刚从您的代码中得到答案：

> string '不支持 HTTP 版本
> 
> '（长度=210）

PlaceFinder Web 服务仅支持 HTTP GET 方法。不支持其他 HTTP 方法。

您不能使用 CURL，因为 curl 用作 POST 方法。请在此处阅读：http: [//developer.yahoo.com/geo/placefinder/guide/requests.html](http://developer.yahoo.com/geo/placefinder/guide/requests.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:16:09.083

你有一个打开的 curl_setopt()。它在下面：

```
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_ <------ 
```

# ftp - sublime text FTP - 编辑文件创建新文件

> ID：12212086
> 
> 赞同：1
> 
> 时间：2012-08-31T09:00:43.717
> 
> 标签：ftp, sublimetext, editing, updating

我最近安装了 sublime text 2 插件“SFTP”来直接处理我的 ftp 服务器文件。它正确连接到我的 ftp 服务器，但是当我上传/保存文件时（为了保存对原始文件的编辑）它不会覆盖保存更新的原始文件，而是在我的 ftp 中创建一个新文件文件夹：如果我在保存时编辑“index.php”，崇高文本会创建一个新文件“index.php.1”，并且原始 index.php 保持未更新。

我坚持认为这可能是一个权限问题，但在我的服务器上，所有用户的文件夹都具有 777 权限，并且文件也获得了 777 权限。

这是我的 sftp 插件配置文件 (sftp-config.json)：

```
{
// The tab key will cycle through the settings when first created
// Visit http://wbond.net/sublime_packages/sftp/settings for help

// sftp, ftp or ftps
"type": "ftp",

"save_before_upload": true,
"upload_on_save": true,
"sync_down_on_open": true,
"sync_skip_deletes": false,
"confirm_downloads": false,
"confirm_sync": true,
"confirm_overwrite_newer": false,

"host": "mobility.unixdata.es",
"user": "admin",
"password": "mlcud",
//"port": "22",

"remote_path": "/Escriptori/htdocs/betamobility/testing",
"ignore_regexes": [
    "\\.sublime-(project|workspace)", "sftp-config(-alt\\d?)?\\.json",
    "sftp-settings\\.json", "/venv/", "\\.svn", "\\.hg", "\\.git",
    "\\.bzr", "_darcs", "CVS", "\\.DS_Store", "Thumbs\\.db", "desktop\\.ini"
],
"file_permissions": "777",
"dir_permissions": "777",

//"extra_list_connections": 0,

"connect_timeout": 30,
//"keepalive": 120,
//"ftp_passive_mode": true,
//"ssh_key_file": "~/.ssh/id_rsa",
//"sftp_flags": ["-F", "/path/to/ssh_config"],

//"preserve_modification_times": false,
//"remote_time_offset_in_hours": 0,
//"remote_encoding": "utf-8",
//"remote_locale": "C",
} 
```

谢谢你的帮助 ！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-03T18:40:07.513

这很可能是由于 FTP 服务器的设置造成的。有关类似问题的答案，请参阅[https://superuser.com/questions/333022/ftp-upload-overwrite-does-not-overwite-but-creates-file-ext-instead 。](https://superuser.com/questions/333022/ftp-upload-overwrite-does-not-overwite-but-creates-file-ext-instead)

如果您通过公共网络传输文件，我建议您使用 SFTP 而不是 FTP。

# jsf - h:selectBooleanCheckbox 没有将结果传递给 Map

> ID：12212087
> 
> 赞同：1
> 
> 时间：2012-08-31T09:00:45.913
> 
> 标签：jsf, cdi

我想将复选框传递给支持 CDI-Bean。postTest.values只是一个多头列表**。**

```
<h:form>
    <h:dataTable value="#{postTest.values}" var="val">
        <h:column>
            <h:outputLabel value="#{val}"/>
        </h:column>
        <h:column>
            <h:selectBooleanCheckbox value="#{postTest.checked[val]}"/>
        </h:column>
    </h:dataTable>
    <h:commandButton action="#{postTest.process}"/>
</h:form> 
```

action 方法应该打印出检查的值。但它只是空的。

```
@Named
@RequestScoped
public class PostTest {

    List<Long> values;
    Map<Long, Boolean> checked;

    ... 
    public String process() {
        logger.info(this.toString() + "Processing");
        for (Long l : checked.keySet()) {
            logger.info(this.toString() + "\t" + l + ". checked: " + checked.get(l));
        }

        return "index2";
    }
    ...
} 
```

当我将日志记录添加到**getChecked()**方法时，我可以看到，它每列只检索一次，并且其内容根本没有改变。

问题似乎与**表单**传递值时未初始化**postTest.values的点有关。**因为如果我在构造函数（或@PostConstruct）中初始化**postTest.values**，则检查的项目将正确传递。

 ****为什么我需要在执行 POST 请求后初始化**postTest.values ？**

有没有办法防止这种情况？

还是我有其他选择？例如，确保不使用构造函数或@PostConstruct 正确初始化**postTest.values**，因为我想在初始化之前将值传递给它（我尝试了侦听器，但他们似乎没有解决这个问题）。

谢谢！

蒂姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T04:11:55.440

`@ViewAccessScoped`如果您不想使用`@ConversationScoped`and`start()`和`end()`方法，也可以使用 Myfaces CODI注释。它是一种 CDI 扩展，相当于`@ViewScoped`JSF 托管 bean。我没有检查此注解的实现，但我看到许多开发人员告诉我它甚至比`@ViewScoped`注解更好。

只需下载 Myfaces CODI 并将其放入您的类路径并使用注释。****

# sencha-touch-2 - 加载后操作数据存储数据

> ID：12212096
> 
> 赞同：2
> 
> 时间：2012-08-31T09:01:24.087
> 
> 标签：sencha-touch-2, dataview, datastore

我有一个后端，它通过 ajax 代理返回我的数据存储使用的一些 JSON 数据。然后数据显示在数据视图中。我需要做的是在数据视图显示之前对客户端接收到的数据进行一些转换。

我尝试了各种方法并决定将处理程序附加到数据存储的`load`事件：

```
Ext.getStore('MyStore').on('load', function (store, records, successful, operation, eOpts) {         
    for (var i = 0; i < records.length; i++) {
        var e = records[i];
        e.data.myField = "constantPrefix" + e.data.myField;
    }
}); 
```

处理程序触发并正确更改记录。

**问题是，数据视图仍然显示未更改的数据。整个方法是否正确？如果是这样，为什么它不起作用？如果没有 - 你将如何实现这一目标？**

以下是数据视图代码：

```
Ext.define('MyProject.view.MyDataView', {
extend : 'Ext.DataView',
xtype : 'my-dataview',

config : {      
    store : 'MyStore',
    baseCls : Ext.os.deviceType === 'Phone' ? 'my-dataview-phone' : 'my-dataview-tablet',
    mode: 'MULTI',
    allowDeselect: true,
    selectedCls: 'tick-visible',        
    triggerEvent: 'itemdoubletap',

    itemTpl : [
            '<img class="my-photo my-dataview-photo" src="',                        
            '{myField}"></img>'             
        ].join('')              
}
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:24:27.913

反而

```
 e.data.myField = "constantPrefix" + e.data.myField; 
```

利用

```
var value = "constantPrefix" + e.get('myField');
e.set('myField', value); 
```

[model.set()](http://docs.sencha.com/touch/2-0/#!/api/Ext.data.Model-method-set)负责触发数据视图确实捕获的必要事件。

干杯，奥列格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-20T17:47:34.757

您只需要通知商店侦听器有关修改的字段。尝试：

```
Ext.getStore('MyStore').afterEdit(e, ['myField']); 
```

这样做的好处是，数据视图或网格现在将显示已修改的字段（字段中有这些红色三角形）。

# css - 将表格列压缩到可能的最小宽度

> ID：12212098
> 
> 赞同：4
> 
> 时间：2012-08-31T09:01:35.913
> 
> 标签：css, internet-explorer, cross-browser, css-tables

在我的整个网站中，我有很多`<table>`s ，其中有一个特定的列，我们希望将其压缩到尽可能小的空间（不包含文本）。其他同级单元自动共享剩余空间。

我正在使用以下技巧，它适用于除 IE7- 之外的所有浏览器。（此时我其实只关心IE7）

```
table {width:100%;}
table td.min-col {white-space:nowrap; width:1px; } 
```

jsFiddle 链接：http: [//jsfiddle.net/vm8gc/23/](http://jsfiddle.net/vm8gc/23/)

如果您在 IE7 中尝试此操作，您会发现它的行为有所不同（不是预期的行为）。-- 请参阅下面的屏幕截图。

谁能想到一个修复 IE7 来实现这一点？

* * *

### 附件：

所有其他浏览器：

![在此处输入图像描述](../Images/c7bb61c13fd0d3bffbcfe314ba52b38f.png)

IE7：

![在此处输入图像描述](../Images/0812c7b66eeccfcd4cb226abb916f4f1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:04:47.460

## CSS 2 版本

出于某种原因，Internet Explorer 似乎忽略`white-space`了 TD。解决此问题的最佳方法是在 TD 内使用 span。

```
<td><span style="white-space: nowrap;">This should not wrap</span></td> 
```

像往常一样，IE 做自己的事情；）

有关`white-space`支持的信息，请参见此处：

[http://www.quirksmode.org/css/whitespace.html](http://www.quirksmode.org/css/whitespace.html)

## 预版本

可以更好地支持旧浏览器的替代方法是执行以下操作：

```
<td><pre>This will not wrap</pre></td> 
```

然后将您的预元素设置为以与普通文本相同的方式设置样式，或者使其能够从其父级继承样式*（继承可能比仅指定样式的支持更少）*：

```
td pre { font-family: inherit; font-size: inherit; color: inherit; ... } 
```

# facebook - Open Graph url 在用户时间线上搞砸了？

> ID：12212106
> 
> 赞同：0
> 
> 时间：2012-08-31T09:01:58.910
> 
> 标签：facebook, url, facebook-like, facebook-opengraph

当我喜欢公司网站上的 URL 时：http: [//guidepal.com/escape/10](http://guidepal.com/escape/10)

在时间线中被点赞的链接如下所示：

=“> http://guidepal.com/escape/10?fb_action_ids=10151400567746110&fb_action_types=og.likes&fb_source=timeline_og&action_object_map=%7B%2210151400567746110%22%3A10151100366393350%7D&action_type_map=%7B%2210151400567746110%22%3A%22og.likes%22 ％7D＆action_ref_map =％5B％5D＆代码= AQB2NUbRhNvppL1HOqmJM6CBGQa1N3vUoK9QrPNNm516895czzIFYn93tiT4HWmBcCCrjK8tYvHqUPLAbu4mhk-xT3w17UMeTITQGnJXW3_NuyYc1Aa7FHl0nTwyuYzDS05x761boSwsGNoOpcL-ulsmiiVObacATa2NQEjLtQFrygJ81fHrSyr7pF5WWlPsf9w＃*=*

URL 在那里，但似乎有问题，因为它添加了更多东西（我真的希望它不是某个地方的访问令牌：P）。我猜元标记有问题，但我不知道是什么，因为一切似乎都很好。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-13T10:27:14.770

我实际上已经对此进行了更深入的调查，这实际上是因为服务器端发生了什么。我不负责这里的网页，但他解释说有一些代码可以处理 url 末尾的整数，他不会认为这会是一个问题。奇怪的是，它通过按图像而不是最近活动中的 URL 来工作。

并且很难知道您何时不对两者负责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:14:15.917

我刚刚喜欢它，并且 URL 正确出现在我的时间轴上。

看起来元标记设置正确 - 您可以在Facebook 提供的[linter 工具上检查它们](http://developers.facebook.com/tools/debug/og/object?q=http://guidepal.com/escape/10)

# yii - 我们可以在这个场景中使用 Yii 闪现消息吗？

> ID：12212114
> 
> 赞同：0
> 
> 时间：2012-08-31T09:02:22.313
> 
> 标签：yii

我还没有看到这里涉及到这个场景： [Yii Framework: How to work with Flash Messages](http://www.yiiframework.com/wiki/21/how-to-work-with-flash-messages/#hh1)。

因此，在用户注册后，我希望将用户重定向到感谢页面，在那里他/她可以阅读更多关于他/她应该做什么以及接下来会发生什么的信息。这是*一个很好*的信息量，因此将该消息添加到已经存在的页面不是一种选择，因为它会变得嘈杂。临时显示 msg 也不是一种选择，因为它需要阅读大量的文本。

在这样的情况下：

1.  我们是否仍应使用**flash 消息**并使用**条件**，以便页面上通常存在的内容在显示成功 flash 消息时保持隐藏？

    或者

2.  我们是否应该简单地**重定向**到给定的感谢视图（通过创建相应的感谢操作？）

有更好的选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:06:25.663

您可以使用闪信。但这些实际上是针对“您的帐户现已创建”之类的。

如果您想包含大量信息，我认为最好有一个单独的感谢操作/视图，在注册过程完成后人们被重定向到。

# php - Mootools 资产与

> ID：12212115
> 
> 赞同：0
> 
> 时间：2012-08-31T09:02:25.817
> 
> 标签：php, javascript, http-headers, mootools

我对 mootools 库中的 Asset 对象有一个理解问题。我使用下面的代码来初始化一个[Asset](http://mootools.net/docs/more/Utilities/Assets#Asset%3aAsset-image)对象。

```
this.preloader = new Asset.image(src, {
    'onerror': function(){
    // do something
    },
    'onload': function(){
        this.store('loaded', true);
    }
}); 
```

如果我使用图像 url 作为不带参数的`src`参数（磁盘上的普通图像文件），如下所示：

```
http://test.local/images/picture1.jpg 
```

有用。

如果我使用图像 url 作为`src`php 脚本的参数，该脚本使用函数[imagejpeg()](http://php.net/manual/en/function.imagejpeg.php)生成图像：

```
http://test.local/index.php/de/galerie/directory1/index.php?view=image&amp;format=raw&amp;type=img&amp;id=2774 
```

稍后它向我显示了一个断开的链接。

问题：为什么资产反应不同？有没有我错过的选项？

非常感谢您的帮助！尖刺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:17:35.447

问题出在其他地方。我可以确认 Asset 对象支持生成 jpeg 流的上述 php 函数的输出，并且它还接受给定参数中的 URL`src`参数。

我通过监视已处理的 http 请求/响应发现了另一个问题，我看到传入的第二个图像流参数错误并传递了“损坏的图像参考”。

至少这篇文章可能会帮助其他人比我更早地放弃“图像流错误论文”。

关于斯派克

# c# - 如何让 HttpClient 与请求一起传递凭据？

> ID：12212116
> 
> 赞同：186
> 
> 时间：2012-08-31T09:02:26.120
> 
> 标签：c#, asp.net-web-api, impersonation, windows-security

我有一个与 Windows 服务对话的 Web 应用程序（托管在 IIS 中）。Windows 服务使用 ASP.Net MVC Web API（自托管），因此可以使用 JSON 通过 http 进行通信。Web 应用程序被配置为进行模拟，其想法是向 Web 应用程序发出请求的用户应该是 Web 应用程序用来向服务发出请求的用户。结构如下所示：

![](../Images/289b9779020c1bdbb340376196078dcd.png)

[（以红色突出显示的用户是以下示例中提到的用户。）]

* * *

Web 应用程序使用以下命令向 Windows 服务发出请求[`HttpClient`](http://msdn.microsoft.com/en-us/library/system.net.http.httpclient.aspx)：

```
var httpClient = new HttpClient(new HttpClientHandler() 
                      {
                          UseDefaultCredentials = true
                      });
httpClient.GetStringAsync("http://localhost/some/endpoint/"); 
```

这会向 Windows 服务发出请求，但不会正确传递凭据（服务将用户报告为`IIS APPPOOL\ASP.NET 4.0`）。**这不是我想要发生**的。

如果我将上面的代码更改为使用 a [`WebClient`](http://msdn.microsoft.com/en-us/library/system.net.webclient%28v=vs.100%29.aspx)，则用户的凭据将正确传递：

```
WebClient c = new WebClient
                   {
                       UseDefaultCredentials = true
                   };
c.DownloadStringAsync(new Uri("http://localhost/some/endpoint/")); 
```

使用上面的代码，服务将用户报告为向 Web 应用程序发出请求的用户。

**我做错了什么`HttpClient`导致它无法正确传递凭据**（或者它是一个错误`HttpClient`）？

[我想使用的原因`HttpClient`是它有一个与`Task`s 配合得很好的异步 API，而 的`WebClient`异步 API 需要用事件来处理。]

* * *

## 回答 #1

> 赞同：166
> 
> 时间：2013-04-15T15:20:56.007

您可以配置`HttpClient`为自动传递凭据，如下所示：

```
var myClient = new HttpClient(new HttpClientHandler() { UseDefaultCredentials = true }); 
```

* * *

## 回答 #2

> 赞同：73
> 
> 时间：2012-10-01T14:43:00.650

我也有同样的问题。由于@tpeczek 在以下 SO 文章中所做的研究，我开发了一个同步解决方案：[Unable to authenticate to ASP.NET Web Api service with HttpClient](https://stackoverflow.com/q/10308938/1045728)

我的解决方案使用 a `WebClient`，正如您正确指出的那样，它可以毫无问题地传递凭据。原因`HttpClient`不起作用是因为 Windows 安全禁用了在模拟帐户下创建新线程的能力（请参阅上面的 SO 文章。） `HttpClient`通过任务工厂创建新线程，从而导致错误。 `WebClient`另一方面，在同一线程上同步运行，从而绕过规则并转发其凭据。

虽然代码可以工作，但缺点是它不能异步工作。

```
var wi = (System.Security.Principal.WindowsIdentity)HttpContext.Current.User.Identity;

var wic = wi.Impersonate();
try
{
    var data = JsonConvert.SerializeObject(new
    {
        Property1 = 1,
        Property2 = "blah"
    });

    using (var client = new WebClient { UseDefaultCredentials = true })
    {
        client.Headers.Add(HttpRequestHeader.ContentType, "application/json; charset=utf-8");
        client.UploadData("http://url/api/controller", "POST", Encoding.UTF8.GetBytes(data));
    }
}
catch (Exception exc)
{
    // handle exception
}
finally
{
    wic.Undo();
} 
```

**注意：**需要 NuGet 包：Newtonsoft.Json，它与 WebAPI 使用的 JSON 序列化程序相同。

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2012-08-31T20:29:54.833

您正在尝试做的是让 NTLM 将身份转发到下一个服务器，这是它无法做到的 - 它只能进行模拟，只能让您访问本地资源。它不会让你越过机器边界。Kerberos 身份验证通过使用票证支持委托（您需要的），并且当链中的所有服务器和应用程序都正确配置并且在域上正确设置 Kerberos 时，可以转发票证。因此，简而言之，您需要从使用 NTLM 切换到 Kerberos。

有关您可用的 Windows 身份验证选项及其工作方式的更多信息，请访问：http: [//msdn.microsoft.com/en-us/library/ff647076.aspx](http://msdn.microsoft.com/en-us/library/ff647076.aspx)

* * *

## 回答 #4

> 赞同：23
> 
> 时间：2016-10-11T06:51:47.433

好的，感谢以上所有的贡献者。我正在使用 .NET 4.6，我们也遇到了同样的问题。我花了时间调试`System.Net.Http`，特别是`HttpClientHandler`，发现以下内容：

```
 if (ExecutionContext.IsFlowSuppressed())
    {
      IWebProxy webProxy = (IWebProxy) null;
      if (this.useProxy)
        webProxy = this.proxy ?? WebRequest.DefaultWebProxy;
      if (this.UseDefaultCredentials || this.Credentials != null || webProxy != null && webProxy.Credentials != null)
        this.SafeCaptureIdenity(state);
    } 
```

因此，在评估`ExecutionContext.IsFlowSuppressed()`可能是罪魁祸首之后，我将我们的模拟代码包装如下：

```
using (((WindowsIdentity)ExecutionContext.Current.Identity).Impersonate())
using (System.Threading.ExecutionContext.SuppressFlow())
{
    // HttpClient code goes here!
} 
```

里面的代码`SafeCaptureIdenity`（不是我的拼写错误），`WindowsIdentity.Current()`是我们冒充的身份。这是因为我们现在正在抑制流量。由于使用/处置，这在调用后被重置。

它现在似乎对我们有用，呸！

* * *

## 回答 #5

> 赞同：15
> 
> 时间：2018-02-06T18:49:14.310

在 .NET Core 中，我设法通过`System.Net.Http.HttpClient`使用.`UseDefaultCredentials = true``WindowsIdentity.RunImpersonated`

```
HttpClient client = new HttpClient(new HttpClientHandler { UseDefaultCredentials = true } );
HttpResponseMessage response = null;

if (identity is WindowsIdentity windowsIdentity)
{
    await WindowsIdentity.RunImpersonated(windowsIdentity.AccessToken, async () =>
    {
        var request = new HttpRequestMessage(HttpMethod.Get, url)
        response = await client.SendAsync(request);
    });
} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-11-01T08:45:19.040

在我在 Windows 服务中设置具有 Internet 访问权限的用户后，它对我有用。

在我的代码中：

```
HttpClientHandler handler = new HttpClientHandler();
handler.Proxy = System.Net.WebRequest.DefaultWebProxy;
handler.Proxy.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials;
.....
HttpClient httpClient = new HttpClient(handler)
.... 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2012-11-27T21:54:10.317

好的，所以我采用了 Johoun 代码并使其通用。我不确定是否应该在 SynchronousPost 类上实现单例模式。也许更有知识的人可以提供帮助。

# 执行

//我假设你有自己的具体类型。在我的情况下，我首先使用一个名为 FileCategory 的类的代码

```
FileCategory x = new FileCategory { CategoryName = "Some Bs"};
SynchronousPost<FileCategory>test= new SynchronousPost<FileCategory>();
test.PostEntity(x, "/api/ApiFileCategories"); 
```

# 泛型类在这里。你可以传递任何类型

```
 public class SynchronousPost<T>where T :class
    {
        public SynchronousPost()
        {
            Client = new WebClient { UseDefaultCredentials = true };
        }

        public void PostEntity(T PostThis,string ApiControllerName)//The ApiController name should be "/api/MyName/"
        {
            //this just determines the root url. 
            Client.BaseAddress = string.Format(
         (
            System.Web.HttpContext.Current.Request.Url.Port != 80) ? "{0}://{1}:{2}" : "{0}://{1}",
            System.Web.HttpContext.Current.Request.Url.Scheme,
            System.Web.HttpContext.Current.Request.Url.Host,
            System.Web.HttpContext.Current.Request.Url.Port
           );
            Client.Headers.Add(HttpRequestHeader.ContentType, "application/json;charset=utf-8");
            Client.UploadData(
                                 ApiControllerName, "Post", 
                                 Encoding.UTF8.GetBytes
                                 (
                                    JsonConvert.SerializeObject(PostThis)
                                 )
                             );  
        }
        private WebClient Client  { get; set; }
    } 
```

# 我的 Api 类看起来像这样，如果你好奇的话

```
public class ApiFileCategoriesController : ApiBaseController
{
    public ApiFileCategoriesController(IMshIntranetUnitOfWork unitOfWork)
    {
        UnitOfWork = unitOfWork;
    }

    public IEnumerable<FileCategory> GetFiles()
    {
        return UnitOfWork.FileCategories.GetAll().OrderBy(x=>x.CategoryName);
    }
    public FileCategory GetFile(int id)
    {
        return UnitOfWork.FileCategories.GetById(id);
    }
    //Post api/ApileFileCategories

    public HttpResponseMessage Post(FileCategory fileCategory)
    {
        UnitOfWork.FileCategories.Add(fileCategory);
        UnitOfWork.Commit(); 
        return new HttpResponseMessage();
    }
} 
```

我正在使用 ninject 和带有工作单元的 repo 模式。无论如何，上面的泛型类确实有帮助。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-06T01:40:17.047

在 web.config 中设置`identity`'s `impersonation`to`true`和`validateIntegratedModeConfiguration`to`false`

```
<configuration>
  <system.web>
    <authentication mode="Windows" />
    <authorization>
      <deny users="?" />
    </authorization>
    <identity impersonate="true"/>
  </system.web>
  <system.webServer>
    <validation validateIntegratedModeConfiguration="false" ></validation>
  </system.webServer>
</configuration> 
```

# android - 在 stagewebview 中读取视频问题（Adobe AIR for Android）

> ID：12212119
> 
> 赞同：1
> 
> 时间：2012-08-31T09:02:51.730
> 
> 标签：android, air, html5-video, stagewebview

在 Android 设备的 StageWebView 中阅读视频时出现问题。

我使用 html5 视频标签，我想在 Android 应用程序的 StageWebView 中阅读此视频。

对于 iOS，我没有问题，但在 Android 设备上，播放器是黑色的，我只能听到声音。

我尝试了很多 JS 播放器，但都有相同的问题。

有人遇到过这种问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-22T14:27:37.977

在`App.xml`Android 清单中，尝试启用硬件加速。也许就是这样。。

```
<android>
        <manifestAdditions><![CDATA[
...
            <manifest android:installLocation="auto">
...
                <application android:enabled="true" android:hardwareAccelerated="true"> 
```

# actionscript-3 - 从 AS3 应用程序导出运行时压缩的 .FLV

> ID：12212121
> 
> 赞同：0
> 
> 时间：2012-08-31T09:02:57.863
> 
> 标签：actionscript-3, flash, flv

我想问一下是否可以在浏览器（不是 AIR/EXE）中从 swf 录制（从图像创建）、压缩和导出为字节 FLV 电影。

我希望有办法使用服务器来做到这一点，但这会产生大量流量。

有任何想法吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:08:47.647

[查看](http://www.zeropointnine.com/blog/simpleflvwriteras-as3-class-to-create-flvs/)Lee Felarca 的这个图书馆

# java - GWT SoundManager 2 play() 抛出异常

> ID：12212131
> 
> 赞同：0
> 
> 时间：2012-08-31T09:03:32.207
> 
> 标签：java, gwt, audio, soundmanager2

我只是尝试使用 GWT-SoundManager2 来制造一些噪音。我刚刚尝试了一个简单的代码，如下所示：

```
SoundManager sm;
String SS = "soundId"
sm = SoundManager.quickStart();
sm.createSound(SS, "/sounds/mysound.wav");
sm.play(SS); 
```

但它抛出异常：

引起：com.google.gwt.core.client.JavaScriptException: (TypeError): Object [object Object] has no method 'toLowerCase' at com.google.gwt.dev.shell.BrowserChannelServer.invokeJavascript(BrowserChannelServer.java:248 ）在 com.google.gwt.dev.shell.ModuleSpaceOOPHM.doInvoke(ModuleSpaceOOPHM.java:136) 在 com.google.gwt.dev.shell.ModuleSpace.invokeNative(ModuleSpace.java:561) 在 com.google.gwt。 dev.shell.ModuleSpace.invokeNativeVoid(ModuleSpace.java:289) 在 com.google.gwt.dev.shell.JavaScriptHost.invokeNativeVoid(JavaScriptHost.java:107)

但是，如果我更改为以下内容，它将起作用：

```
SoundManager sm;
String SS = "soundId"
sm = SoundManager.quickStart();
sm.play(SS, "/sounds/mysound.wav"); 
```

我想使用 CreateSound，因为我想先预加载音频。在第一个代码块中我做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T01:52:07.170

看起来您的代码没有任何问题。唯一可能发生的事情是 SoundManager 在调用 createSound() 之前可能没有完全加载。

理想情况下，您调用 quickStart() 并且在调用诸如在 soundManager 实例上播放或创建声音之类的函数之后的某个时间。当 SoundManager 准备就绪时，可以使用 onReady() 函数触发回调来通知您。

如果您仍然遇到此问题，请在 github 页面上打开一个问题。还有一个新创建的示例项目，可以在[https://github.com/rcaloras/gwt-soundmanager2-example](https://github.com/rcaloras/gwt-soundmanager2-example)找到。

# c++ - 存储在对象向量上的基于堆栈的指针具有长寿命？

> ID：12212132
> 
> 赞同：1
> 
> 时间：2012-08-31T09:03:33.290
> 
> 标签：c++, vector, heap-memory, stack-memory

举个例子：

```
class A
{
public:
    int value;
    A():value(1){};
    ~A(){};
};

void Display( std::vector<A> myvector )
{
    for( std::vector<A>::iterator it = myvector.begin(); it!= myvector.end(); ++it )
        std::cout << (*it).value << std::endl;
}

A* GetAtId( DWORD id )
{
    if( id != 0 )
    {
        static A ret;
        return& ret;
    }

    return NULL;
}

void Serialize( DWORD obj[3] )
{
    std::vector<A> vecHold;

    for( int i=0; i<3; i++ )
    {
        A* ptr = NULL;
        if( obj[i] != 0 )
        {
            ptr = GetAtId( obj[i] );
            if( ptr ) vecHold.push_back( *ptr );
        }
    }

    Display( vecHold );
}

int main( )
{

    DWORD id[3] = {0,};
    id[2] = 9;
    Serialize( id );
} 
```

它是否“幸存”以调用 to `Display`？（并不是这就是我所说的“长期”的意思）

因为指针在下一个括号处被释放。我知道存储诸如`std::vector<A*>vecHold`,之类的指针的向量`vecHold.push_back( ptr )`是非法的，但是在这种情况下呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:13:36.573

```
vecHold.push_back( *ptr ); 
```

创建由`ptr`( `ret`) 指向的对象的副本，然后将其添加到 vector`vecHold`中。`ret`是一个本地`static`对象，它仍然有效并且具有与程序的生命周期相同的生命周期。所以`vecHold`持有一个有效的对象，程序中没有不正确的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:09:38.573

当一个变量被声明为`static`函数内部时，这意味着它的生命周期将持续整个程序的时间。所以在这种情况下，返回和存储指向它的指针或引用是安全的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:13:27.527

您的代码会创建向量的副本。向量不会通过引用自动传递（我也不能想到其他任何东西）。如果您想要参考，请编写代码以使用参考。

# xcode - 为什么我不在 if 条件下返回 lbl_esdeger.text？

> ID：12212133
> 
> 赞同：0
> 
> 时间：2012-08-31T09:03:36.223
> 
> 标签：xcode, arrays, nsstring, uilabel

为什么我的 lbl_esdeger.text 字符串不能取值？感谢帮助

selectedCountry = @"Kanıt"; lblText.text = selectedCountry;

```
titlearray = [[NSMutableArray alloc]init];
//KANAL D
[titlearray addObject:@"Annem Uyurken"];
[titlearray addObject:@"Arka Sokaklar"];
[titlearray addObject:@"Kanıt"];
[titlearray addObject:@"Kötü Yol"]; 

int i;
for (i=0; i<[titlearray count]; i++) 
{
    if ([titlearray objectAtIndex:i] == selectedCountry) 
    {
        lbl_esdeger.text = [titlearray objectAtIndex:i];
        NSLog(@"--- %@ --- %@",[titlearray objectAtIndex:i],selectedCountry);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:17:52.977

[`isEqualToString`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html)您应该使用if 条件中的方法比较字符串：

```
if ([[titlearray objectAtIndex:i] isEqualToString:selectedCountry])
                                  ^^^^^^^^^^^^^^^ 
```

# java - 如何在 Java 版 Google App Engine 中动态更新 JSP 文件的内容？

> ID：12212134
> 
> 赞同：2
> 
> 时间：2012-08-31T09:03:42.077
> 
> 标签：java, google-app-engine, jsp

我目前正在教授一门软件工程课程，其中大约有 275 名学生正在学习 JSP。我希望能够为学生提供在线服务，使他们能够练习基本的 JSP 技能。这个想法是学生将提供一些 JSP 代码来通过一些预先确定的测试。

例如： 学生将被要求提供 JSP 页面的代码，该页面将返回“Hello NAME”，其中 NAME 是已传递到页面的 GET 参数。

对这个问题的正确回答是。

```
Hello <%= request.getParameter("name") %> 
```

我目前可以使用基于 Linux 的解决方案测试这样的学生提交，在该解决方案中，我将提交的学生代码写入现有 JSP 文件，在传递 GET 参数时获取 JSP 页面，等待 Tomcat 重新加载并编译 JSP 页面，解析HTML 结果，并将测试结果返回给学生。这个过程相当慢（覆盖磁盘上的 JSP 文件）并且不能很好地扩展。

我希望能够在 Java 版本的 Google App Engine 上运行这个 JSP“验证器”，它可以配置为在很多学生同时练习时自动扩展。

我的问题是，如何在不覆盖现有 JSP 文件内容的情况下评估 Google App Engine 中提交的 JSP 代码？我可以将要运行的代码传递到 JSP 页面并让该页面返回结果吗？

我无法弄清楚让页面使用传入的代码来处理传入的 GET 参数。简而言之，我缺少一个 eval() 方法。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T05:12:57.133

我从来没有试过这个，但我会看看[Jasper 编译器](http://tomcat.apache.org/tomcat-5.5-doc/jasper/docs/api/org/apache/jasper/compiler/Compiler.html)（Tomcat 的 JSP 实现）。它可以从 .jsp 生成一个类文件，您可以从 GAE 加载该文件。虽然我也可以想象让它工作所需的努力可能太多了。

# python - 如何使用unitttest测试在python中计算相对时间的方法？

> ID：12212136
> 
> 赞同：0
> 
> 时间：2012-08-31T09:03:59.130
> 
> 标签：python, unit-testing, django-unittest, unittest2

我在 django 模型中有一个方法，可以相对于当前时间进行计算。这是一个片段：

```
def next_date():
    now = datetime.now()
    trial_expires = max(self.date_status_changed + timedelta(self.trial_days), now)
    return timezone.datetime(trial_expires.year, trial_expires.month+1, 1, tzinfo=trial_expires.tzinfo) 
```

使用 unittest 在 django/python 中测试这个的正确方法是什么？我想做的是能够在测试中为“现在”硬编码一些值，这样我就可以尝试各种边缘情况。理想情况下，我想避免依赖测试中的当前时间和日期。

一种方法是修改我的方法以接受一个可选参数，该参数将覆盖它使用的“现在”值。python是否有任何功能可以做类似的事情而不必修改我的方法签名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:18:40.683

您可以提取`datetime.now()`为参数：

```
def next_date(nowfunc=datetime.now):
    now = nowfunc()
    ... 
```

或作为一个类的依赖：

```
class X:
    def __init__(self, nowfunc=datetime.now):
        self._nowfunc = nowfunc

def next_date(self):
    now = self._nowfunc()
    ... 
```

并通过您的测试所需的结果传递一个模拟函数。

但如果您不想修改签名，请使用[补丁](http://www.voidspace.org.uk/python/mock/patch.html#patch-decorators)：

```
@patch.object(datetime, 'now')
def test_next_date(self, nowfunc):
    nowfunc.return_value = ... # required result
    # the rest of the test 
```

# ruby-on-rails - 从rails部分形式检索多个模型对象

> ID：12212137
> 
> 赞同：0
> 
> 时间：2012-08-31T09:03:59.970
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我将以下表单作为部分工作，我正在尝试对承包商模型进行部分调用，并且我还想传递当前页面的模型 ID，即报价 ID。

它在这一行失败 <%= hidden_​​field_tag :quote_id, @quote.id %> 'call id for nil'

我尝试创建手动路线并将搜索放在单独的方法上，但随后出现模板错误，因此我现在将其留在索引方法中。

show.html.erb 中的表格：

```
<%= form_tag quotes_path, :method => 'get', :id => "contractors_search" do %>
  <p>
    <%= text_field_tag :search, params[:search] %>
    <%= submit_tag "Search", :name => nil %>
  </p>
  <br><br><br>
  <div id="contractors"><%= render 'contractors' %></div>
<% end %> 
```

_contractors.html.erb

```
<table>
<% @contractors.each do | contractor | %>
<tr>
    <td><%= contractor.firstname %></td>
    <td>
    <%= form_tag (quote_add_contractor_path) do %>
        <%= hidden_field_tag :quote_id, @quote.id %>
        <%= hidden_field_tag :contractor_id, contractor.id %>
        <%= submit_tag "Add" %>
    <% end %>
    </td>
</tr>
<% end %>
</table> 
```

索引.js.erb

```
$("#contractors").html("<%= escape_javascript(render :partial => "contractors") %>"); 
```

控制器：

```
def index

    @quotes = Quote.all  
    @contractors = Contractor.search(params[:search]) 

end

def add_contractor
    @quote = Quote.find(params[:quote_id])
    @contractor = Contractor.find(params[:contractor_id])
    @quote.contractors << @contractor

    if @quote.save
        redirect_to @quote, notice: "contractor was added"
    else
        render :show, notice: "Sorry, something went aweful"
    end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:27:18.850

在 index.js.erb 中，您呈现部分承包商，但您没有在控制器的 index 操作中设置 @quote 实例变量。这就是为什么你会失败。尝试添加`@quote = # Some logic here`到您的索引操作。

# java - 电话号码前缀查询

> ID：12212139
> 
> 赞同：0
> 
> 时间：2012-08-31T09:04:11.567
> 
> 标签：java, postgresql, jdbc, lookup, prefix

我必须实现基于 java 的呼叫路由引擎，该引擎根据电话号码前缀将呼叫路由到适当的网关。

这里我的表（postgres）包含前缀：

```
CREATE TABLE call_routing (
  prefix character varying(20) PRIMARY KEY NOT NULL,
  carrier character varying(50) NOT NULL,
  dialstring character varying(50) NOT NULL
) 
```

一些样本数据：

```
INSERT INTO call_routing values ('02','1','/sofia/gateway/gw1');
INSERT INTO call_routing values ('0221','1','/sofia/gateway/gw2');
INSERT INTO call_routing values ('0228','1','/sofia/gateway/gw3'); 
```

例如电话号码 0221123456789 应该路由到网关“/sofia/gateway/gw2”，电话号码 0211123456789 应该路由到“/sofia/gateway/gw1”等。

问题：

1.  使用 java / jdbc 查询最佳匹配前缀的最快方法是什么。
2.  将应用程序启动时的表读取到 java 对象中并在 java 中执行所有操作而不在每次调用时访问 db 是否是一种更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:53:02.767

**获得更好的索引**

通过直接订购前缀，而不是长度（前缀）：

```
SELECT dialstring FROM call_routing
WHERE number like prefix || '%'
ORDER BY prefix DESC
LIMIT 1 
```

为什么？

因为数字的选定行将`abcdef`是前缀。所以将是这样的数字：

ab abc abcd

因此，如果您按字母顺序对它们进行排序，就足以得到一个从最长到最短的列表，这就是您想要的。

您还可以使用以下方法获得更强大的过滤器：

`prefix between 'a' and 'abcde'`. 您所有的前缀将是按字母顺序排列`>=`的最短前缀和按字母顺序排列`<=`的最长前缀。

所以可以表示为：

```
SELECT dialstring FROM call_routing WHERE
prefix between substr(number, 1, 1) and number -- range filter (use index)
AND number like prefix || '%' -- only relevant data (normal filter)
ORDER BY prefix DESC -- index will work
LIMIT 1 
```

当然，索引将位于列前缀上。

**全部缓存？**

是的，请。:)

你有多少物品？如果它不是一个巨大的列表，请将其加载到内存中。

然后你可以有一个 TreeMap （如果你想按前缀排序）或一个 HashMap （如果你喜欢先找到最长的前缀，然后每次尝试少一个字符）。哪一个会更好？取决于范围内`a >> abcde`且不匹配`like`条件的前缀数量（`abbde`通过示例）。

**如果没有很多条目**

您可以使用按前缀 desc 排序的数组：

```
be
b
abcde
abbbc
abd
ab 
```

要找到合适的前缀，请检查`Arrays.binarySearch(T[], T key, Comparator<T>)`您的手机是否在其中 ( `abcde`)。如果是……好的。如果不是你继续前进，直到：

```
- you find a prefix (OK, this is the winner)
- it doesn't start with the same char (there are no prefix) 
```

这样你就可以遍历范围`abcde >> a`并找到第一个前缀（它是最长的）。

**好的一个**

正在制作一棵树（我不确定名称）。制作一棵树，其中每个节点仅包含一个字母（在您的情况下为数字）。

```
0 // represents 0
 ->
   2  // represents 02
     -> 1 // represents 021
     -> 3 // represents 023
 ->
   4 // represents 04 
```

因此，当您寻找最长的前缀时，您会尝试在树中尽可能深入：

```
Node n = root;
for (char c: number) {
    if ((child = n.hasChild(c)) != null)
    {
       prefix += c;
       n = child;
    }
    else
       break;
} 
```

你只需要一个来创建一个

```
class Node
{
   int digit;
   Map<Integer, Node> childs = new HashMap<Integer, Node>(); // or a 10 bucket array :)
   YourInfo info;
} 
```

并用于创建结构：

```
findOrCreateNode(prefix).setInfo(info); 
```

其中 findOrCreateNode 与以前相同，但是当它没有找到节点时......创建它（`n.put(c, new Node(c))`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:36:17.953

我会亲自缓存表格，但您可以通过按长度排序来获得最佳匹配前缀（`number`这是您要搜索的内容）：

```
SELECT dialstring FROM call_routing WHERE strpos(number, prefix) = 1 ORDER BY length(prefix) DESC LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T11:43:25.930

我想知道这个。似乎最大的问题是您有包罗万象的事实（在您的示例中为 gw1）。

```
SELECT dialstring from call_routing where number like prefix || '%'
ORDER BY length(prefix) DESC
LIMIT 1 
```

对此进行索引会很困难，但我想第一个问题是，您要跟踪多少个呼叫前缀？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T13:35:58.240

您还可以查看 github 上的这个 PostgreSQL 模块，该模块专门用于为电话号码提供快速前缀匹配： [https ://github.com/dimitri/prefix](https://github.com/dimitri/prefix)

# google-chrome - 在 chrome 开发者工具中查看监听器主体

> ID：12212141
> 
> 赞同：2
> 
> 时间：2012-08-31T09:04:25.840
> 
> 标签：google-chrome, developer-tools, event-listener

在 chrome 开发人员工具中，您可以检查附加到元素的侦听器。

![在此处输入图像描述](../Images/6b438bcde71de9cb2edf19e6b4ba4372.png)

listenerBody 被剪裁了，因为检查器不够大，无法完整显示它。你如何看待整个listenerBody？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:18:01.983

看来您可以使用侦听器断点跳入该方法。请参阅[如何查看 Chrome DevTools 中元素触发的事件？](https://stackoverflow.com/questions/10213703/how-do-i-view-events-fired-on-an-element-in-chrome-web-developer#answer-10213800)详情。

# java - 如何显示 webapp 的部署文件夹之外的上传图像？

> ID：12212144
> 
> 赞同：0
> 
> 时间：2012-08-31T09:04:32.747
> 
> 标签：java, html, jsp, tomcat

我已成功将图像上传到 webapp 部署文件夹之外的“C:\Images\ProfilePic\prImage.jpg”。上传工作正常。但我无法显示上传的图片。我已经添加了

```
<Context docBase="C:\Images" path="/Images" /> 
```

到 Tomcat 的 /conf/server.xml 。

我用了

```
<img src="/Images/ProfilePic/prImage.jpg" /> 
```

显示它，但它根本不起作用。帮我..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:31:09.913

我不认为你可以这样做。

如果您想存储一些文件并让用户通过浏览器的 URL 看到它们，您应该编写一个文件 servlet 并获取文件的名称和相对路径，然后在 servlet 中读取文件并将其刷新以显示在浏览器中.

[balusc 这里](http://balusc.blogspot.com/2007/07/fileservlet.html)有一个炉排教程和示例代码

# oracle - 定期运行 Oracle 查询的最佳方式

> ID：12212147
> 
> 赞同：1
> 
> 时间：2012-08-31T09:04:47.970
> 
> 标签：oracle, oracle11g

我需要知道关于在 Oracle 上定期运行查询的最佳做法是什么（我使用的是**11g**）。

在我的特定用例中，我`DUE_DATE`在 table 中指定了一个`x`。我想要做的是每天 00:01 运行查询以计算某些记录的状态（OK、Warn、Critical 或 Overdue）。特定记录的状态是根据今天的日期（其中“今天”是运行查询的日期）相`x.DUE_DATE`对于表示“警告”和“关键”的一些用户指定的值（包含在表中`y`）计算得出的。

*   好的 -->`today < x.DUE_DATE - y.WARN`
*   警告 -->`today >= x.DUE_DATE - y.WARN and today < x.DUE_DATE - y.CRITICAL`
*   关键 -->`today >= x.DUE_DATE - y.CRITICAL and today <= x.DUE_DATE`
*   过期 -->`today > x.DUE_DATE`

定期运行此查询的最佳方式是什么？我找到了以下选项，但不确定哪个最适合我的用例：

*   [物化视图](http://docs.oracle.com/cd/B28359_01/server.111/b28286/statements_6002.htm)
*   [`DBMS_SCHEDULER`](http://docs.oracle.com/cd/E11882_01/appdev.112/e25788/d_sched.htm#CIHHBGGI)

我知道我可以根据每个用户请求动态计算状态，但由于状态每天只更改一次，我认为每天进行一次计算并缓存后续结果会更有效。

提前谢谢了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T11:01:24.413

*   对于正在运行的作业（和查询），[DBMS_SCHEDULER](http://docs.oracle.com/cd/E11882_01/server.112/e25494/scheduse.htm#g1046708)是可供选择的工具。因此，如果您想根据查询结果**更新表中的状态**，请使用[DBMS_SCHEDULER](http://docs.oracle.com/cd/E11882_01/server.112/e25494/scheduse.htm#g1046708)。

例如，您可以安排执行以下更新的作业：

```
update x
   set status = (CASE 
                   WHEN sysdate < x.DUE_DATE - y.WARN THEN
                     'Ok'
                   WHEN sysdate >= x.DUE_DATE - y.WARN and today < x.DUE_DATE - y.CRITICAL THEN
                     'Warn'
                   WHEN sysdate >= x.DUE_DATE - y.CRITICAL and sysdate <= x.DUE_DATE THEN
                     'Critical'
                   WHEN sysdate > x.DUE_DATE THEN
                     'Overdue'
                 END)
; 
```

要创建每天 00:00 安排的作业：

```
BEGIN
    dbms_scheduler.create_job(job_name => 'Status Updater',
                              job_type => 'PLSQL_BLOCK',
                              job_action => '
                                             BEGIN 
                                              update x
                                                set status = (CASE 
                                                                WHEN sysdate < x.DUE_DATE - y.WARN THEN
                                                                  ''Ok''
                                                                WHEN sysdate >= x.DUE_DATE - y.WARN and today < x.DUE_DATE - y.CRITICAL THEN
                                                                  ''Warn''
                                                                WHEN sysdate >= x.DUE_DATE - y.CRITICAL and sysdate <= x.DUE_DATE THEN
                                                                  ''Critical''
                                                                WHEN sysdate > x.DUE_DATE THEN
                                                                  ''Overdue''
                                                              END)
                                                 ;
                                              END;',
                              start_date => systimestamp,
                              repeat_interval => 'FREQ=DAILY;INTERVAL=1;BYHOUR=0;BYMINUTE=0;',
                              enabled => TRUE);
END;
/ 
```

*   如果您需要**准备报告**，请在报告工具中安排报告或使用[物化视图](http://docs.oracle.com/cd/E16338_01/server.112/e10706/repmview.htm)来存储结果集。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:02:14.083

您的问题的答案：Oracle 中调度程序的最佳方法绝对是：dbms_scheduler。

在您的特定用例中：为什么要这样做？现在您计划每天为您的数据执行此操作，即使没有人感兴趣。最后，您的状态是一个过程变量，由 sysdate 和其他数据项计算得出。

# c# - （DDD）实体类可以包含哪些方法？

> ID：12212150
> 
> 赞同：1
> 
> 时间：2012-08-31T09:04:57.103
> 
> 标签：c#, domain-driven-design, entity

我有一个类应该作为一个实体类（如在 DDD 中）。它基本上看起来像这样：

```
public class Page
{
    protected String Name;
    protected String Description;
    protected Dictionary<int, IField> Fields = new Dictionary<int, IField>();

    protected Page SetName(String name)
    {
        this.Name = name;
        return this;
    }

    protected Page SetDescription(String description)
    {
        this.Description = description;
        return this;
    }

    public Page AddField(IField field)
    {
        this.Fields.add(xxx, Field); //xxx = just some id
        return this;
    }
} 
```

现在我的问题是，这是一个有效的实体类吗？

我需要保持方法链接，所以请不要对此进行太多详细说明（即使您认为这是错误的）。

我主要关心的是，实体类是否可以包含方法，例如 getter 和 setter？尤其是像`AddField`?

该`AddField`方法采用 类型的对象`IField`。我将其存储在课堂内的字典中`Page`。那是一个集合，对吗？

这不会改变实体的状态，使其不是真正的实体类吗？

或者它就是这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:58:58.157

> 我主要关心的是，实体类是否可以包含方法，例如 getter 和 setter？尤其是像 AddField 这样的方法？

一个实体可以包含 getter、setter、adders、行为和业务规则（[推荐](http://www.google.fr/url?sa=t&rct=j&q=&esrc=s&source=web&cd=2&cad=rja&ved=0CDIQFjAB&url=http://martinfowler.com/bliki/AnemicDomainModel.html&ei=W4dAULWyJ8G60QXb3YCQBQ&usg=AFQjCNEu-1Xsds7HE8l01PKMA9GnMJcnWQ)）......基本上任何你想要的。

> AddField 方法采用 IField 类型的对象。我将它存储在 Page 类内的字典中。那是一个集合，对吗？

不，它可能是聚合**根**，但不一定。这取决于您的上下文以及您如何设计聚合。见[http://dddcommunity.org/library/vernon_2011](http://dddcommunity.org/library/vernon_2011)

> 这不会改变实体的状态，使其不是真正的实体类吗？

改变状态是实体的本质，这就是为什么我们给他们 ID 来跟踪变化。*另一方面，可以将值对象*设置为不可变，因为它们的身份无关紧要，大多数情况下您不会修改值对象，而只是创建一个新对象。

如果您想走 DDD 路线，我建议您阅读[蓝皮书](https://rads.stackoverflow.com/amzn/click/com/0321125215)或[摘要](http://www.infoq.com/news/2006/12/domain-driven-design)以对该方法有一个基本的理解。DDD 有它自己的原则和设计模式——当你不采用整个范式或至少不了解其背后的意图时，挑选其中的一些并不总是有意义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:15:57.407

我认为您的课程看起来不错，并且您没有像大多数人那样犯小学生错误，其中您有字典的吸气剂（因此您正确封装和隐藏了字典）。

我假设您通过名称识别页面，因此它成为实体所需的 id。

关于什么是聚合。Page 类看起来像一个聚合根，因为您可以通过 Page 类控制对子项 (IField) 的访问。

我不能说更多……看起来不错。

# c - GTK message_dialog 和 unicode 字符串

> ID：12212151
> 
> 赞同：1
> 
> 时间：2012-08-31T09:04:58.530
> 
> 标签：c, windows, unicode, gtk

我正在编写一个假设有 GTK gui 并使用 Windows 注册表操作的工具。例如，我有这样一个回调函数：

```
static void
msg_INFO(GtkWidget *main_window, gpointer data)
{      
  GtkWidget *dialog = gtk_message_dialog_new(NULL,
      GTK_DIALOG_DESTROY_WITH_PARENT, GTK_MESSAGE_INFO, GTK_BUTTONS_OK, data);
  gtk_window_set_position(GTK_WINDOW(dialog), GTK_WIN_POS_CENTER);
  gtk_dialog_run(GTK_DIALOG (dialog) );
  gtk_widget_destroy(dialog);
} 
```

手册上写着 GTK+ 支持 Unicode。如果我用 someDATA 作为参数调用这个函数

```
LPWSTR someDATA = malloc(256);
wcscpy(someDATA,L"Some data here"); 
```

弹出窗口将仅显示第一个字符，在这种情况下为“S”。我用谷歌搜索它并发现了一些问题，但使用 python...我不知道如何使用 gtk_message_dialog_new 来实现它，因为我需要在与用户交互期间暂停运行。对不起我的英语不好

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:23:01.363

GTK+ 使用[UTF-8](http://en.wikipedia.org/wiki/UTF-8)，这不是你从`L`-prefixed 字符串文字中得到的。后者将为您提供一个使用[宽字符](http://en.wikipedia.org/wiki/Wide_character#C.2FC.2B.2B)的字符串，通常为 16 位，因此第一个字符被编码为两个字节。

这些字节中的第二个将是 0，因为 'S' 是一个 ASCII 字符，并且当被视为 UTF-8 时，该零将终止字符串。

# android - 在 EditText 数组上的 OnFocusChangeListener

> ID：12212153
> 
> 赞同：0
> 
> 时间：2012-08-31T09:05:02.067
> 
> 标签：android, focus, android-edittext

我有一个`Array`动态创建`EditText`的`Java`，我在正确设置焦点时遇到了问题。如何管理`OnFocusChangeListener`on an `array`of `EditText`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:28:10.960

`EditText`使用 动态 设置 ID `editText.setId(id);`，然后 `View.OnFocusChangeListener`在您的活动中实现。最后，内部`onFocusChange`方法

```
@Override
public void onFocusChange(View v, boolean hasFocus) {
    /* get currently focuse changed view id using v.getId() then you can 
     * build logic using that id and your EditText id
     */
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:19:30.850

在您的内部`onFocusChange()`，添加此`mEditText.requestFocus()`mEditText将是您要设置**当前焦点的****那个**。

 **此外，您可以通过`setId()`和分配和检索数组中 EditTexts 的 id `getId()`。

希望这可以帮助！**

# regex - 删除所有非法字符

> ID：12212155
> 
> 赞同：0
> 
> 时间：2012-08-31T09:05:05.113
> 
> 标签：regex

嗨，我是正则表达式的新手，所以有人可以帮助我吗？我想删除 Windows 文件名中的所有非法字符。这是我使用的正则表达式

```
(/[^a-zA-Z ')' 0-9\\-]+/g,'')") 
```

问题是它没有摆脱括号。例如原始文件名是

```
[Yuubin Basha (Akizuki Ryou)] Cheap Thrill (Final Fantasy VII) [English] [Dragonfly] 
```

它重命名为

```
Yuubin Basha Akizuki Ryou) Cheap Thrill Final Fantasy VII) English Dragonfly 
```

它不会删除所有括号。谁能帮我修复我的正则表达式？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:09:39.217

Windows 上的文件名可以包含除 U+0000 到 U+001F 和`:?*"\/<>|`. 所以你可以使用

```
[\x00-\x1f:?\\/*"<>|] 
```

但还有其他考虑因素，例如文件名不能以空格结尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:09:43.117

```
/[^a-zA-Z\\)\\(\\]\\[0-9\\-\s]+/g 
```

正则表达式应该看起来像你的情况

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:10:07.923

一探究竟`(/[^a-zA-Z ')' 0-9\\-]+/g,''\)")`

# c# - 分组 GridView 滚动到一组

> ID：12212156
> 
> 赞同：2
> 
> 时间：2012-08-31T09:05:05.373
> 
> 标签：c#, xaml, microsoft-metro, windows-runtime

我有一个带有 SemanticZoom 的 GridView，它显示分组数据。它运作良好。但我想知道如何使用代码滚动到指定的组。就像单击缩小视图一样。我搜索并尝试过，但找不到答案。SelectedIndex 和 SelectedItem 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-06T03:55:52.727

我已经在我的博客上写了这篇关于这个问题的文章。基本上，我提供了两个项目的“视图”，一个在 GridView 中，另一个在 FlipView 中。

当用户放大 GridView 项目时，SemanticZoom 更改为 FlipView 并将 GridView 中选择的项目设置为当前项目。

这篇文章是西班牙语，我的母语，我希望这对你来说不是什么大问题。

[http://blogs.msdn.com/b/juank/archive/2012/11/05/semanticzoom-como-hacer-zoom-item-especifico-winrt-csharp.aspx](http://blogs.msdn.com/b/juank/archive/2012/11/05/semanticzoom-como-hacer-zoom-item-especifico-winrt-csharp.aspx)

放大 FlipView 不是一个小问题，但在文章中我使用由另一个 Microsoft MVP 创建的 SemanticViewHost 类解决了这个问题：Luis Guerrero 在这篇文章中：http: [//luisguerrero.net/blog/2012/08/11 /usando-un-contentcontrol-como-hijo-de-un-control-semanticzoom-en-xamlc-de-windows-8/](http://luisguerrero.net/blog/2012/08/11/usando-un-contentcontrol-como-hijo-de-un-control-semanticzoom-en-xamlc-de-windows-8/)

# ajax - 从 json 对象中获取值

> ID：12212157
> 
> 赞同：0
> 
> 时间：2012-08-31T09:05:14.373
> 
> 标签：ajax, json

我无法从 json 对象中检索值。从 firebug 观察时，json 数据如下所示：

```
[{"PROJECT_ID":"CASEENO"},{"PROJECT_ID":"DARKROOM-2"}] 
```

这是我的ajax代码：

```
$.ajax({
    type: "POST",
    url: "getdata.php",
    dataType: "json",
    data: { 'dataString': projectid }, cache:false,
    success: function(data)
             { 
                  alert(data);
                  for (var i = 0; i < data.length; i++)
                  {             
                     $("#projid").append("<option value=data[i].PROJECT_ID>data                  [i].PROJECT_ID</option>");
                   }   
             }
}); 
```

alert(data) 给出 [object Object]。我试过这样，`data.PROJECT_ID, data[PROJECT_ID],data[i].PROJECT_ID`但项目 ID 值未显示在选择标签中。如何从 for 循环中检索项目 ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:33:49.133

如果`alert(data)`给`[object Object]`，则`data`不是数组。它应该输出`[object Object],[object Object]`.

我建议使用`console.log(data)`它来更好地了解`data`实际情况并检查其结构。这个问题也可能对您有所帮助：[访问/处理（嵌套）对象、数组或 JSON](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-access-a-specific-value)。

假设`data`确实是一个数组，要在 HTML 字符串中使用它的值，您必须使用字符串连接：

```
$('#projid').append('<option value="' + data[i].PROJECT_ID  + '">' + data[i].PROJECT_ID + '</option>'); 
```

或以不同的方式创建元素：

```
$('<option />', {
    value: data[i].PROJECT_ID,
    text: data[i].PROJECT_ID
}).appendTo('#projid'); 
```

JavaScript**不像**PHP 那样插入字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:34:35.573

将您的陈述从

```
 $("#projid").append("<option value=data[i].PROJECT_ID>data[i].PROJECT_ID</option>"); 
```

至

```
$("#projid").append("<option value="+data[i].PROJECT_ID+">"+data[i].PROJECT_ID+"</option>"); 
```

# php - PHP - 解析错误：语法错误，意外'['

> ID：12212161
> 
> 赞同：-1
> 
> 时间：2012-08-31T09:05:18.380
> 
> 标签：php, syntax

也许我开始失明了，但是我遇到了一个要杀死我的问题，我有下一个功能，并且收到以下错误消息：

> 解析错误：语法错误，第 28 行 /home/largo/public_html/dev/wp-content/plugins/email-key/email-key.php 中的意外 '['

在这一行：

$to = components['recipient'];

我不明白为什么。

```
function get_form_components($components) {
global $wpdb;
$table = $wpdb->prefix . "ebk";
$components['ebk_key'] = md5(microtime());
$sql = build_sql_insert($table,$components);
    if ($wpdb->query($sql) === FALSE) {
       //return FALSE;
    } else {
        $to = components['recipient'];
        $subject = "A message from the website " . get_bloginfo( 'name' );
        $message = "Hello,\n you getting this message because your email used in the contact form in this site: \n
        the message didn\'t sent yet and it\'s waiting in a Message queue, for the message actually will send please press the
        folowing link:\n " .$components['ebk_key'] . "\n Thanks you\n " . get_bloginfo( 'name' );
        @wp_email($to,$subject,$message);
    } 

$dummy_components = $components;
$dummy_components['recipient'] = 'hold-this-please@wpcoder.co.il';

return $dummy_components;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T09:06:45.480

改变

```
$to = components['recipient']; 
```

至

```
$to = $components['recipient']; 
```

我猜。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T09:06:47.047

改变：

```
$to = components['recipient']; 
```

至

```
$to = $components['recipient']; 
```

这就是为什么拥有一个带有内置 PHP 解析器的 IDE 可以节省您的时间的原因。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T09:17:04.927

该行：

```
$to = components['recipient']; 
```

对此：

```
$to = $components['recipient']; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-31T09:06:59.197

更改`$to = components['recipient'];`为`$to = $components['recipient'];`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-31T09:07:26.733

你错过了`$`.

```
$to = $components['recipient']; 
```

# sql - SQL查询取决于当前时间

> ID：12212171
> 
> 赞同：0
> 
> 时间：2012-08-31T09:05:49.280
> 
> 标签：sql, sql-server-2008

我在表中有一些数据，我想从中查询数据，并且根据执行查询的时间，我希望查询考虑当前时间戳。

例如

```
declare @data table (id int, value nvarchar (50))

insert into @data values (1, 'First value')
insert into @data values (2, 'Second value')
insert into @data values (3, 'Third value')
insert into @data values (4, 'Fourth value') 
```

查询 1

```
select * from @data
where value != 'First value'
and (value != 'Second value' and  '2012-08-30 23:59:59' between '2012-08-30 23:59:59' and '2012-09-15 23:59:59') 
```

查询 1 返回“第三个值”和“第四个值”

查询 2

```
select * from @data
where value != 'First value'
and (value != 'Second value' and  '2012-08-29 23:59:59' between '2012-08-30 23:59:59' and '2012-09-15 23:59:59') 
```

查询 2 不返回任何值，我希望它返回“第二个值”“第三个值”“第四个值”

感谢所有帮助问候，Jesper

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:12:05.930

您正在寻找`XOR`运算符，但在 SQL2008 中没有。您需要表示`a XOR b`为`(a AND (NOT b)) OR ((NOT a) AND b)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:13:24.177

您的第二个查询将永远不会返回任何值，因为 '2012-08-29 23:59:59' 不在其他两个日期之间。

它肯定永远不会返回“第二值”，因为您特别排除了它。

我认为你需要对你试图实现的逻辑更清楚一点，也许用 OR NOT 替换最后一个 AND 会让你更接近，但这是一个猜测。

```
select * from @data
where value != 'First value'
and (value != 'Second value' OR NOT ( '2012-08-29 23:59:59' between '2012-08-30 23:59:59' and '2012-09-15 23:59:59')) 
```

# sql-server - 同一列上的非聚集索引和聚集索引

> ID：12212174
> 
> 赞同：4
> 
> 时间：2012-08-31T09:05:57.847
> 
> 标签：sql-server, indexing, b-tree, clustered-index, non-clustered-index

我在 Stackoverflow 看到了[这篇](https://stackoverflow.com/questions/42015/non-clustered-index-on-a-clustered-index-column-improves-performance)文章。第一个答案提到诸如**聚集索引具有表的所有数据，而非聚集索引仅具有列+聚集索引的位置或行（如果它在堆上）（没有聚集索引的表）。**非聚集索引如何获得聚集索引的位置？它只包含在 B 树中排序为节点的列值，每个节点都固定到该列具有该节点值的行，对吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:11:45.837

假设您正在谈论**SQL Server**，并且还假设您的表上*有*一个聚集索引（您应该这样做）。

然后，非聚集索引具有您在`CREATE INDEX`语句中定义的列，**以及**构成聚集索引（如果存在）的列。

该聚类键值是指向实际数据所在位置的“指针”。

如果查询执行器在您的非聚集索引中寻找一个值并找到匹配项，那么

*   ***要么***该值就是您所关心的-然后您就可以取回该值

*   ***或者***非聚集索引也可能有一些*包含*的列（在叶级页面中），并且有了这些，可以满足查询（所有请求的列都存在），因此您可以取回您要求的值

*   ***或者***你想要的值并不全部在非聚集索引叶级页面中（如果你一直这样做尤其如此`SELECT *`），然后查询执行器必须从非聚集索引中获取聚集键值，然后返回到聚簇索引，执行所谓的*键查找*，通过聚簇索引查找，并找到存储完整行的关联数据页 ->*现在*查询执行器可以返回您要求的值

要获得一个很好的解释 - 请[在此处查看此博客文章](http://sqlwithmanoj.wordpress.com/2011/03/02/clustered-vs-nonclustered-indexes-and-data-sorting/)。它说：

> ***在非聚集索引中：**
> ....
> 2.b。如果表具有聚集索引，或者索引位于索引视图上，则行定位器是该行的聚集索引键。SQL Server 通过使用存储在非聚集索引的叶子行中的聚集索引键来搜索聚集索引来检索数据行。*

或者[在 SQL Server 索引的整个系列中查看这篇博客文章，](http://www.sqlservercentral.com/articles/Stairway+Series/72281/)其中也解释了存储在非聚集索引叶级页面中的“书签”。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-18T16:49:38.367

很容易想象这样：

您有一张客户表，例如客户（id、姓名、年龄、地址）。在这张表上，您有一个关于年龄的**聚集索引。**这意味着您的数据在硬盘驱动器上**按年龄排序。**当您想要进行范围查询时，这非常有用，例如：

```
SELECT * FROM customer WHERE age > 18; 
```

然后，只需进行几次顺序读取，就可以从您的硬盘驱动器中获取数据。如果索引是非集群的，您将不得不为每个匹配的客户元组进行一次磁盘访问（包括数据的查找）。

也许对于您的应用程序，您还需要通过 id 访问用户。这意味着如果没有额外的 id 索引，您将不得不**遍历整个文件**才能找到特定的 id，因为它是按年龄排序的，而且您没有索引！为避免这种情况，您在 id 上创建**第二个索引**。现在您可以在此索引中搜索一个 id，并且包含您正在寻找的客户的索引的叶子指向您在磁盘上（按年龄聚集的）数据中找到元组的位置。这样你就不能读取整个表需要更少的磁盘访问（通常 2 用于索引查找 + 1 用于获取元组）。

编辑：我没有看到您在谈论同一专栏。我可以想象的一件事是，由于上述原因，您在一列上执行了一个聚集索引，例如，此列和另一列的另一个**组合索引**。这对于进行**仅索引查找**很有用，这里您在索引中拥有所有必需的属性，并且根本不需要进行页面获取。另一个原因是对于范围查询有一个聚集的 B+-Index，对于相等查询有一个 Hash-Index。但我认为这里的好处可以忽略不计。

希望这有帮助！

# javascript - data-rel="back" 在 iPhone 上不起作用

> ID：12212175
> 
> 赞同：0
> 
> 时间：2012-08-31T09:05:58.220
> 
> 标签：javascript, jquery, iphone, cordova, jquery-mobile

我正在使用`jQuery mobile`和构建一个应用程序`phonegap`

该应用程序已准备就绪，并且可以正常工作`Android, Android Simulator, Desktop browsers` 但是当我将其部署在`iPhone`后退按钮上时停止工作。我`data-rel="back"`在我的锚标签中添加一个属性，返回。（如 jQM 文档中所述）

从我的`index.html`电话，`menu.html`. 当我单击应用程序`back`上的按钮（不是浏览器后退按钮）时`menu.html`不会重新打开`index.html`

这个问题只存在于`iPhone`.

这就是我的`index.html`样子

```
 <div id="content_home" class="mainColumn" data-role="page">
            <div class="header">
                <a href="Menu.html"  id="home_nav_btn" class="headerButton nav fr" style=""><span></span></a>
                <a id="bg" class="headerButton home fl" style=""><span></span></a>
                <h1><img src="images/bank_trust.png" alt=""></h1>
            </div>
            <!-- Remaining HTML Code -->
        </div> 
```

我的 Menu.html 看起来像这样，

```
<div id="content_nav" class="mainColumn" data-role="page">
    <div class="header">
        <a id="btn_signout" class="headerButton fr" style=""><span>Signout</span></a>
        <a data-rel="back" class="headerButton home fl" ><span></span></a>
        <h1><img src="images/bank_trust.png" alt=""></h1>
    </div>
    <div class="content"></div>
    <script src="js/menu.js"></script>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:19:59.830

尝试使用[history.back](https://github.com/jquery/jquery-mobile/blob/master/js/jquery.mobile.navigation.js)，我希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T14:08:33.093

自己解决了这个...

jQM 文档说您必须具有`href`为锚点赋予语义含义的属性。我添加了`href`属性，现在一切正常。

# c# - 如何实时跟踪 Twitter 提要？

> ID：12212177
> 
> 赞同：0
> 
> 时间：2012-08-31T09:06:02.453
> 
> 标签：c#, javascript, asp.net-mvc, twitter

我将提供一些服务，但我不确定一些事情，所以如果可以的话，请帮忙。如何实时跟踪某个用户的 Twitter 提要，并在用户在他的提要中添加一些标签时在我的服务中执行一些操作？我不想准备好解决方案，我必须知道我必须学习哪些技术和第三方库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:10:13.160

一种解决方案是使用[Twitter 的流 API](https://dev.twitter.com/docs/streaming-apis)和 Json 解析器，如[Json.Net](http://json.codeplex.com/)

**编辑**

这是一个示例代码

```
HttpWebRequest webRequest = (HttpWebRequest)WebRequest.Create("https://stream.twitter.com/1/statuses/sample.json");
webRequest.Credentials = new NetworkCredential("....", "......");
webRequest.Timeout = -1;
HttpWebResponse webResponse = (HttpWebResponse)webRequest.GetResponse();

StreamReader responseStream = new StreamReader(webResponse.GetResponseStream());
while (true)
{
    var line = responseStream.ReadLine();
    if (String.IsNullOrEmpty(line)) continue;

    dynamic obj = JsonConvert.DeserializeObject(line);

    if (obj.user != null)
        Console.WriteLine(obj.user.screen_name + ": " + obj.text);

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T16:46:26.920

LINQ to Twitter， http: [//linqtotwitter.codeplex.com/](http://linqtotwitter.codeplex.com/)，支持 Twitter 流。这是一个例子：

```
 (from strm in twitterCtx.UserStream
         where strm.Type == UserStreamType.User
         select strm)
        .StreamingCallback(strm =>
        {
            if (strm.Status == TwitterErrorStatus.RequestProcessingException)
            {
                WebException wex = strm.Error as WebException;
                if (wex != null && wex.Status == WebExceptionStatus.ConnectFailure)
                {
                    Console.WriteLine(wex.Message + " You might want to reconnect.");
                }

                Console.WriteLine(strm.Error.ToString());
                return;
            }

            Console.WriteLine(strm.Content + "\n");

            if (count++ >= 25)
            {
                strm.CloseStream();
            }
        })
        .SingleOrDefault(); 
```

这是一个用户流，但您对过滤器、样本、站点和其他流具有类似的支持。

# c# - 禁用 Javascript 时使用 Javascript 提交表单

> ID：12212182
> 
> 赞同：0
> 
> 时间：2012-08-31T09:06:16.573
> 
> 标签：c#, javascript, stringbuilder

下面是我用来将 ASP.NET 中的表单发布到另一个页面的代码.....
只要启用了 javascript，它就可以正常工作，但在禁用 javascript 时会停止。

```
StringBuilder sb = new StringBuilder();
sb.Append("<html>");
sb.AppendFormat(@"<body onload='document.forms[""form""].submit()'>");
sb.AppendFormat("<form name='form' action='{0}' method='post'>",postbackUrl);
sb.AppendFormat("<input type='hidden' name='id' value='{0}'>", id);
// Other params go here
sb.Append("</form>");
sb.Append("</body>");
sb.Append("</html>");

Response.Write(sb.ToString());

Response.End(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:08:29.843

好吧，您正在使用 javascript 发布表单

`onload='document.forms[""form""].submit()'`

所以当 javascript 被禁用时，您的代码将不会执行。一切都按预期工作（或不工作）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:10:11.973

它不起作用的原因是因为您正在使用 JavaScript 提交表单。

"onload='document.forms[""form""].submit()'"

上面的代码是javascript。

您也可以为未启用 JavaScript 的用户添加一个“单击以继续”的提交按钮，但为已启用 JavaScript 的用户保留 OnLoad。

# python - Python - 转换列表

> ID：12212183
> 
> 赞同：-1
> 
> 时间：2012-08-31T09:06:18.177
> 
> 标签：python

> **可能重复：**
> [从 Python 中的列表列表中制作一个平面列表](https://stackoverflow.com/questions/952914/making-a-flat-list-out-of-list-of-lists-in-python)

我有一个类似的列表：

```
[['22', '14']] 
```

我怎样才能将其转换为：

```
[22, 14] 
```

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T09:08:44.457

```
L = [['22', '14']]
M = [ int(i) for i in L[0] ] 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T09:07:56.827

```
a = [['22','14']]
map(int, a[0]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-31T09:14:30.107

```
>>> lis=[['22', '14']]
>>> map(int,sum(lis,[]))
[22, 14] 
```

# magento - 在产品详细信息页面内容magento中显示自定义块？

> ID：12212186
> 
> 赞同：0
> 
> 时间：2012-08-31T09:06:24.607
> 
> 标签：magento, product, static-block

我需要在 media 和 product-description-tabs 之间添加静态块。

我已在设计选项卡“自定义布局更新”下的产品编辑中设置

```
 <reference name="product.info">
 <block type="cms/block" name="my_custom_block" before="-">
    <action method="setBlockId"><block_id>my_custom_block</block_id></action>
  </block>
 </reference> 
```

但块没有显示。谁能帮助我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T14:01:30.170

我把它放在我的 home.phtml

```
echo $this->getLayout()->createBlock('catalog/product_featured')->setTemplate('catalog/product/featured.phtml')->toHtml(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:36:46.357

在你的 view.phtml 中试试这个：

```
$block = $this->getLayout()->createBlock('cms/block')->setBlockId('my_custom_block');
echo $block->toHtml(); 
```

它是否显示您的块内容？

问候

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T11:01:39.013

尝试这个

第 1 步：在 Magento 的管理区域创建静态块。（CMS > 静态块）单击“+ 添加新块”。“标识符”是嵌入块时需要注意的。

第 2 步：导航到布局文件夹。（应用程序>设计>前端>默认> your_theme>布局）打开引用您打算将块放入的页面的文件。在我的情况下'page.xml'。

第 3 步：在 .xml 中找到您希望块出现的位置，并插入以下代码，其中 xxxxxx 是您之前在创建块时设置的“标识符”。

```
<block type="cms/block" name="xxxxxx">  
  <action method="setBlockId"><block_id>;xxxxxx</block_id></action>  
</block> 
```

第 4 步：导航到模板文件夹（app > design > frontend > default > your_theme > template）打开您希望块出现的文件，然后在 xxxxxx 是“标识符”的适当位置插入以下代码' 您在创建块时设置的较早。

```
<?php echo $this->getChildHtml('xxxxxx') ?> 
```

或者

```
<?php echo $this->getLayout()->createBlock(’cms/block’)->setBlockId(’my-new-block’)->toHtml() ?> 
```

或者

```
getLayout()->createBlock('catalog/product_list_related')->setTemplate('catalog/product/list/related.phtml')->toHtml() ;
?> 
```

或者

检查以下链接

[http://www.phptechi.com/how-to-add-static-block-in-magento.html](http://www.phptechi.com/how-to-add-static-block-in-magento.html)

我希望这能帮到您 ：）

# php - 社交引擎在 I4US 小部件中显示用户照片

> ID：12212188
> 
> 赞同：0
> 
> 时间：2012-08-31T09:06:37.740
> 
> 标签：php, socialengine

我正在为一些 PHP 代码使用 I4USPHP 小部件，一切正常 - 直到我需要显示一些用户照片。我有一组用户，也有他们的 ID。我调用了这个函数，但它肯定不起作用：

```
echo $this->itemPhoto($someUser['user_id'], 'thumb.icon'); 
```

过了一会儿，我认为该`$this`关键字正在造成问题，然后我尝试了以下操作：

```
echo Engine_Api::_()->itemPhoto($korisnik['user_id'], 'thumb.icon'); 
```

但仍然无法正常工作。有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T16:06:53.723

您正在传递第一个参数 user_id。此函数需要第一个参数是“项目对象”，这就是它不起作用的原因

控制器 ：`$this->view->subject = Engine_Api::_()->core()->getSubject('event');`

看法 ：`<?php echo $this->itemPhoto($this->subject(), 'thumb.icon') ?>`

# c# - 搜索 Office 加载项

> ID：12212193
> 
> 赞同：1
> 
> 时间：2012-08-31T09:06:52.180
> 
> 标签：c#, registry, ms-office, add-in

我正在寻找创建一个搜索 Office 加载项的实用程序。

我在我的注册表中找到了一些加载项，所以我认为这是一个很好的起点，但我不能只添加代码来查找我的加载项，因为世界上有数百个加载项，我一直在努力寻找一种方法来搜索注册表，因此非常感谢任何建议。

我发现了什么：

Office 加载项位于其中，`HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Office`因此我想遍历该键，以返回 Manifest Location、Load Behavior、Description 等的值。

我需要一些帮助来指出我正确的方向，如果我还不够清楚，请发表评论，我很乐意回答你的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:02:50.550

```
using (RegistryKey ExcelLocation = Registry.LocalMachine.OpenSubKey(@"SOFTWARE\Wow6432Node\Microsoft\Office\Excel\Addins"))

        foreach (string subKeyName in ExcelLocation.GetSubKeyNames())
        {
            // Open the key.
            using (RegistryKey subKey = ExcelLocation.OpenSubKey(subKeyName))
            {
                // Write the value.
                Console.Writeline(subKey.GetValue("Description"));
                Console.Writeline(subKey.GetValue("FriendlyName"));
                Console.Writeline(subKey.GetValue("Manifest"));
            }
        } 
```

这是我最接近的检索有关插件的信息它检索我想从注册表中提取的信息。

# .net - 使用 C++/CLI 将字符转换为 Unicode 会产生随机字符

> ID：12212198
> 
> 赞同：0
> 
> 时间：2012-08-31T09:07:03.293
> 
> 标签：.net, c++-cli, java-native-interface

我正在阅读网络上的一些文本，其中一些可能包含外语字符......通过 C++/CLI 阅读它并且不想将字符串转换为托管`String^`但似乎遇到了一些麻烦。这是我正在使用的代码片段

```
String^ NativeToCliString(const char * nString) {
    String^ converted; // = gcnew String("");
    if (nString != NULL)
    {
        converted = (gcnew marshal_context())->marshal_as<String^>(nString);
    }
    return converted;
} 
```

该函数不会引发错误，但是，当我将代码输出到 Windows 窗体时，它会显示一堆随机（ASCII）字符......

我使用的 JNI 方法相当简单……如果需要，我也可以发布该代码。本质上，我只是调用 Java 层，它返回 a`const char *`然后我将它传递到这里。它可以工作，但没有正确转换为 unicode。

**----更新----** 这是基于汉斯建议的工作新代码：

```
int bufSize = MultiByteToWideChar(CP_UTF8, 0 , raw , -1, NULL , 0 );
wchar_t* wstr = new wchar_t[bufSize];
MultiByteToWideChar( CP_UTF8 , 0 , raw , -1, wstr , bufSize );
String^ val = gcnew String(wstr);                           
delete[] wstr; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T23:53:51.977

这是如何做到的...我使用了 if 语句，因为我有两个具有两个不同操作系统的虚拟机，但任何一种方式都适用于任何一个。

```
 String^ JStringToCliString(const jstring string){
        String^ converted = gcnew String("");
        JNIEnv* envLoc = GetJniEnvHandle();
        std::wstring value;
        jboolean isCopy;

        if(string){
            try{
                jsize len = env->GetStringLength(string);
                if(Environment::OSVersion->Version->Major >= 6) // 6 is post XP/2003                                        
                {
                    TraceLog::Log("Using GetStringChars() for string conversion");
                    const jchar* raw = envLoc->GetStringChars(string, &isCopy);
                    // todo add exception handling here for jvm
                    if (raw != NULL) {                          
                        value.assign(raw, raw + len);
                        converted = gcnew String(value.c_str());
                        env->ReleaseStringChars(string, raw);
                    }
                }else{
                    TraceLog::Log("Using GetStringUTFChars() for string conversion.");
                    const char* raw = envLoc->GetStringUTFChars(string, &isCopy);
                    if(raw) {
                        int bufSize = MultiByteToWideChar(CP_UTF8, 0 , raw , -1, NULL , 0 );
                        wchar_t* wstr = new wchar_t[bufSize];
                        MultiByteToWideChar( CP_UTF8 , 0 , raw , -1, wstr , bufSize );
                        String^ val = gcnew String(wstr);                           
                        delete[] wstr;

                        converted = val; // partially working
                        envLoc->ReleaseStringUTFChars(string, raw);
                    }                       
                }
            }catch(Exception^ ex){
                TraceLog::Log(ex->Message);
            }
        }
        return converted;
    } 
```

# php - 将CSV导入数据库，插入而不截断表

> ID：12212201
> 
> 赞同：1
> 
> 时间：2012-08-31T09:07:09.240
> 
> 标签：php, mysql

我这里有这段代码，它允许我将数据从 csv 文件导入数据库，现在它的作用是在插入之前截断表，我之前尝试删除截断表，但它不会通过数据。我的意思是如何在这里修改此代码？我只需要它来插入数据，而不需要清空当前表！

谢谢..

```
$deleterecords = "TRUNCATE TABLE imovo"; //empty the table of its current records
mysql_query($deleterecords);

//Upload File
if (isset($_POST['submit'])) {
    if (is_uploaded_file($_FILES['filename']['tmp_name'])) {
        echo "<h1>" . "File ". $_FILES['filename']['name'] ." uploaded successfully." . "</h1>";
        echo "<h2>Displaying contents:</h2>";
        readfile($_FILES['filename']['tmp_name']);
    }

    //Import uploaded file to Database
    $handle = fopen($_FILES['filename']['tmp_name'], "r");

    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $import="INSERT into imovo(date,time,location,rbpos_id,mobile_number) values('$data[0]','$data[1]','$data[2]','$data[3]','$data[4]')";

        mysql_query($import) or die(mysql_error());
    }

    fclose($handle);

    print "Import done";

    //view upload form
}else {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:10:47.777

“我之前尝试过删除截断表，但它不会传递数据。”

也许是因为您有**唯一索引**并尝试插入重复记录。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:14:12.240

我只是想，你的表有一个独特的列......所以如果你不截断表，你就不能插入存在的记录......

所以你必须做的：

1.  检查记录是否存在

1a) 如果为真...使用 UPDATE

1b) 如果为假 .. 使用 INSERT

1.  还要检查您的 CSV 中是否不再有记录，然后您必须使用 DELETE

...

所以你看，处理所有现有记录并不简单

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:19:01.607

您上传的文件是否包含一些以前上传的数据？如果是这种情况并且您知道您可以使用

```
INSERT IGNORE into `imovo` 
```

或者如果你想替换一些重复的行做 REPLACE

```
REPLACE into `imovo` 
```

这将根据 PRIMARY KEY 或 UNIQUE 索引替换重复的行

[http://dev.mysql.com/doc/refman/5.0/en/replace.html](http://dev.mysql.com/doc/refman/5.0/en/replace.html)

# asp-classic - asp isobject检查和超时

> ID：12212204
> 
> 赞同：0
> 
> 时间：2012-08-31T09:07:31.383
> 
> 标签：asp-classic, session-timeout

我有这个管理用户会话的代码草图：

```
if IsObject(Session("operator")) then
  Set operator = Session("operator")
  operatore_id = operator.Item("id")
else
  response.redirect "controller.asp"
end if 
```

在此之前我设置了 Session.Timeout = 30，但大约几分钟后，用户被重定向到“controller.asp”，就好像会话（“operator”）不再存在一样。有什么建议可以防止这种情况吗？我想让用户尽可能多地保持“登录”状态，因为大多数时候他们必须写很多文本，而且大多数时候他们在尝试保存工作时会被重定向。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T07:22:33.997

我已经通过使用 0px 的 iframe 来解决该问题，该 iframe 调用包含代码的页面：

```
<%
Response.AddHeader "Refresh", "50"
%> 
```

这有点粗鲁，但它有效。

# c# - 替代 NUnit 中的遍历数组？

> ID：12212213
> 
> 赞同：0
> 
> 时间：2012-08-31T09:08:20.190
> 
> 标签：c#, linq, nunit

我将在一个提供数据并使用大量数组的 API 上担任测试员，因此我决定使用 NUnit、LINQ 和 C# 进行一些练习。

为了帮助我“可视化” `actual`GruopJoin 的结果，作为具有嵌套数组的数组，我正在制作一个等效`expected`对象，然后使用`Assert`s.

理想情况下我会使用

```
 Assert.That( actual, Is.EqualTo( expected ) ); 
```

但这失败并显示以下消息：

> NUnitExamples.TestFixture1.LinqOuterJoinMultirelation_Anon：预期和实际都是索引 [0] 处的值不同预期：但是是：

我想这告诉我对象引用是不同的。我想知道的是，它们是等价的对象，即属性值都相等吗？

遍历数组元素属性，包括嵌套数组*及其*属性，告诉我对象是等效的，但如果非常冗长。有没有更简单的方法来做同样的事情？

这是我的代码（顺便说一句，欢迎对我的代码提出任何批评，因为我正在从新学习这一切）：

```
[Test]
public void LinqOuterJoinMultirelation_Anon()
{
    Course[] curriculum = 
    { 
        new Course() { CourseId = "C1", Title = "Database" },
        new Course() { CourseId = "C2", Title = "HCI" },
        new Course() { CourseId = "C3", Title = "Op Systems" },
        new Course() { CourseId = "C4", Title = "Programming" }
    };

    ExamMark[] results = 
    { 
        new ExamMark() { StudentId = "S1", CourseId = "C1", Mark = 85 },
        new ExamMark() { StudentId = "S1", CourseId = "C2", Mark = 49 },
        new ExamMark() { StudentId = "S1", CourseId = "C3", Mark = 85 },
        new ExamMark() { StudentId = "S2", CourseId = "C1", Mark = 49 },
        new ExamMark() { StudentId = "S3", CourseId = "C3", Mark = 66 },
        new ExamMark() { StudentId = "S4", CourseId = "C1", Mark = 93 }
    };

    var actual = curriculum.GroupJoin
    (
        results, 
        c => c.CourseId, 
        r => r.CourseId, 
        (c, r) => new Performance() { CourseId = c.CourseId, Results = r.ToArray<ExamMark>() }
    ).ToArray<Performance>();

    var expected = new[] 
    { 
        new Performance 
        { 
            CourseId = "C1", 
            Results = new[] 
            { 
                new ExamMark() { StudentId = "S1", CourseId = "C1", Mark = 85 }, 
                new ExamMark() { StudentId = "S2", CourseId = "C1", Mark = 49 },
                new ExamMark() { StudentId = "S4", CourseId = "C1", Mark = 93 }
            }
        },
        new Performance 
        { 
            CourseId = "C2", 
            Results = new[] 
            { 
                new ExamMark() { StudentId = "S1", CourseId = "C2", Mark = 49 }
            }
        },
        new Performance 
        { 
            CourseId = "C3", 
            Results = new[] 
            { 
                new ExamMark() { StudentId = "S1", CourseId = "C3", Mark = 85 },
                new ExamMark() { StudentId = "S3", CourseId = "C3", Mark = 66 }
            }
        },
        new Performance { CourseId = "C4" }
    };

    //Assert.That( actual, Is.EqualTo( expected ) );

    for (int i = 0; i < actual.Count(); i++)
    {
        Assert.That( actual[i].CourseId, Is.EqualTo( expected[i].CourseId ) );

        for (int j = 0; j < actual[i].Results.Count(); j++)
        {
            Assert.That( actual[i].Results[j].StudentId, Is.EqualTo( expected[i].Results[j].StudentId ) );
            Assert.That( actual[i].Results[j].CourseId, Is.EqualTo( expected[i].Results[j].CourseId ) );
            Assert.That( actual[i].Results[j].Mark, Is.EqualTo( expected[i].Results[j].Mark ) );
        }
    }

class Course
{
    public string CourseId { get; set; }
    public string Title { get; set; }
}

class ExamMark
{
    public string StudentId { get; set; }
    public string CourseId { get; set; }
    public int Mark { get; set; }
}

class Performance
{
    public string CourseId { get; set; }
    public ExamMark[] Results { get; set; }
} 
```

* * *

解决

我更改了要实现的类，`IEquatable<T>`包括覆盖，`Equals`并发现我的`expected`对象不等同于`actual`由于空数组引用而不是零元素数组，即需要从

```
new Performance { CourseId = "C4" } 
```

至

```
new Performance { CourseId = "C4" , Results = new ExamMark[0] } 
```

现在`Assert.That( actual, Is.EqualTo( expected ) );`按预期工作:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:27:09.027

如果你`ExamMark`有一个合适的`Equals`覆盖（它看起来应该是那种类），并且你`Performance`做了（同样，它看起来像是使用它的真实代码会发现有用的那种类），那么你可以使用。

```
CollectionAssert.AreEqual(expected, actual); 
```

否则，您可以定义一个`IEqualityComparer<Performance>`并使用

```
CollectionAssert.AreEqual(expected, actual, new PerformanceComparer()); 
```

`CollectionAssert.AreEquivalent`如果您不关心测试的集合是否按特定顺序排列，您也可以使用。

当然，这些`Equals`方法必须自己遍历数组，但无论如何都必须这样做（当然，在不同的长度上快速返回 false）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:28:16.327

首先，要比较您最好使用的集合`CollectionAssert.AreEqual(IEnumerable expected, IEnumerable actual)`。

此方法有一个重载，它采用[IComparer](http://msdn.microsoft.com/en-us/library/system.collections.icomparer.aspx)实现来对两个集合中的各个项目进行等效检查。这将是一种选择，编写一个实现`IComparer`和比较两个`Performance`对象的类。

另一种选择是让您的所有类都实现[IEquatable](http://msdn.microsoft.com/en-us/library/ms131187.aspx)。然后你可以`CollectionAssert.AreEqual`不带`IComparer`参数使用。

# block - Magento：如何创建块类的实例？

> ID：12212215
> 
> 赞同：4
> 
> 时间：2012-08-31T09:08:21.763
> 
> 标签：block, magento-1.4

例如，在 Magento 的核心中有*app\code\core\Mage\Catalog\Block\Product\View\Options.php*类。

我将如何创建一个实例？我试过了

```
Mage::getModel('Mage_Catalog_Block_Product_View_Options'); 
```

并且它起作用了，但是由于这不是模型类，而是块类，因此以这种方式创建它似乎是错误的。有什么替代方法？

谢谢！:)

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-05-29T14:42:00.673

使用 createBlock 方法：

```
$block = $this->getLayout()->createBlock('catalog/product_view_options') 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-08-20T09:10:53.370

您需要在 Layout 上使用 createBlock，但块并不都有 getLayout 方法。

```
Mage::app()->getLayout()->createBlock('adminhtml/sales_order_grid'); 
```

这是“new My_Module_Block_Name”的更好技术，因为它允许在配置中重写块。

正如上面@Bartosz Górski 所建议的那样，在XML 中定义块是可取的，尽管不可能直接定义不同的动态内容。Magento 在 Cart 的项目渲染系统中对此有一个很好的解决方案 - 它动态创建块，但在渲染之前从 XML 加载它们的配置。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-02T11:36:11.610

只需使用新的运算符

```
$block = new Mage_Catalog_Block_Product_View_Options(); 
```

因为当您请求它们时，这些类将被自动加载！

# ruby-on-rails - 如何在 Rails 中创建可部署的项目，如 [java 中的战争]

> ID：12212217
> 
> 赞同：3
> 
> 时间：2012-08-31T09:08:27.157
> 
> 标签：ruby-on-rails, ruby, thin

嗨，我是 ruby​​ on rails 的新手，我来自 java 平台

我想在瘦服务器上部署一个 Rails 应用程序。

Que：rails 应用程序的可部署输出是什么？如何在 Rails 中创建可部署的项目，如 [java 中的战争]

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:12:33.860

Ruby 没有打包的可执行文件。一个 ruby​​ 应用程序由许多 *.rb 文件组成，这些文件由 ruby​​ vm/interpreter 在运行时编译。最简单的部署是将项目原样复制到服务器。然而，有一些部署 gem 可以让您的生活更轻松。看看`capistrano`或`vlad`。这是 capistrano 的简单教程：http: [//guides.beanstalkapp.com/deployments/deploy-with-capistrano.html](http://guides.beanstalkapp.com/deployments/deploy-with-capistrano.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T14:16:51.520

你可能想看看`warbler`<- 这是我们用于生产的。Warbler 会将您的项目打包为一个`WAR`文件，然后您可以将其部署在 Web 服务器上。

我不能谈论其他建议，但我相信它们也是有效的 :) 我只是从未使用过它们。我在使用 warbler (http://caldersphere.rubyforge.org/warbler/) 时从来没有遇到过问题。它以 gem 的形式出现，您只需要安装 ( `gem install warbler`)，然后您就可以将 warbler 添加到您的 rake 任务中：

在`lib/tasks`创建`warbler.rake`文件中：

```
begin
  require 'warbler'
  Warbler::Task.new
rescue LoadError
  # not installed
end 
```

然后你可以运行类似的东西`rake war`，warbler应该为你创建一个war文件。如果你不喜欢 warbler 默认值，你也可以指定你自己的配置文件来指定如何打包 ruby​​ 文件。

# c# - 线程睡眠 C#

> ID：12212226
> 
> 赞同：1
> 
> 时间：2012-08-31T09:08:50.380
> 
> 标签：c#, multithreading, sleep

我有一个关于线程的问题，我得到了一个与多个客户端连接的多线程 TCP 应用程序。线程的操作需要很长时间。（也许一分钟左右）。如果只有一个线程在运行，我应该如何让我的睡眠让所有线程都有相同的时间而不会延迟？

```
while(CanDoSomething)
{
    DoIt();                  //Can take all from a few seconds to a few minutes
    Thread.Sleep(100);
} 
```

这是做睡眠的最好方法吗？或者我应该给它更长的睡眠时间？其他线程是否仅获得 100 毫秒，或者是否给了它们启动然后完成的时间？因为我有一种感觉，一个线程完成工作的速度比其他线程快得多......我还能做些什么来确保他们都以相同的优先级完成工作？

编辑，更多代码：

```
private void ListenForClients()
    {
        try
        {

            this.tcpListener.Start();
            while (true)
            {
                TcpClient client = this.tcpListener.AcceptTcpClient();

                Connection c = new Connection(this.parent);
                connectionCollection.Add(c);
                Thread clientThread = new Thread(new ParameterizedThreadStart(c.HandleClientComm));

                threadCollection.Add(clientThread);
                clientThread.Start(client);
            }
        }
        catch (Exception e)
        {
        }
    }
public Connection()
    {
        this.todo = new ArrayList();
        todoT = new Thread(handleToDo);
        todoT.Start();
    }

 public void HandleClientComm(object client)
    {
        try
        {

            TcpClient server = (TcpClient)client;

            NetworkStream ns = server.GetStream();
            byte[] data = new byte[1024];
            string input, stringData;
            online = true;
            DateTime lastTime = DateTime.Now;

            while (true && this.online)
            {
                try
                {
                    if (lastTime.AddMinutes(2) < DateTime.Now)
                        break;

                    data = new byte[1024];
                    if (ns.DataAvailable && ns.CanRead)
                    {
                        int recv = ns.Read(data, 0, data.Length);
                        if (recv > 0)
                        {
                            lastTime = DateTime.Now;
                            if ((byte)data[recv - 1] == (byte)255)
                            {
                                int cnt = -1;
                                for (int i = 0; i < recv; i++)
                                {
                                    if (data[i] == (byte)254)
                                    {
                                        cnt = i;
                                        break;
                                    }
                                }

                                int nr = recv - cnt - 2;
                                byte[] tmp = new byte[nr];

                                for (int i = 0; i < nr; i++)
                                {
                                    tmp[i] = data[cnt + i + 1];
                                }
                                string crc = Encoding.UTF8.GetString(tmp);
                                stringData = Encoding.UTF8.GetString(data, 0, cnt);

                                MsgStruct msgs = new MsgStruct(stringData);
                                msgs.setCrc(crc);
                                Thread.Sleep(200);

                                addTodo(msgs);
                                if (msgs.getMsg()[0] == 'T' && this.type == 1)
                                    this.parent.cStructHandler.sendAck(msgs, this.ID);
                                Console.WriteLine(todo.Count);

                            }
                        }
                    }
                    if (parent.cStructHandler.gotMsg(this.ID))
                    {
                        MsgStruct tmpCs = parent.cStructHandler.getNextMsg(this.ID);

                        if (tmpCs.getMsg().Length != 0 && ns.CanWrite)
                        {
                            byte[] ba = Encoding.UTF8.GetBytes(tmpCs.getMsg());

                            if (tmpCs.getCrc() == "")
                            {
                                ulong tmp = CRC.calc_crc(ba, ba.Length);
                                tmpCs.setCrc(tmp.ToString("X"));
                            }

                            if (tmpCs.canSendByTimeout())
                            {
                                string crcStr = "?" + tmpCs.getCrc() + "?";
                                byte[] bb = Encoding.UTF8.GetBytes(crcStr);
                                crcStr = Encoding.UTF8.GetString(bb);
                                byte[] fullMsg = new byte[ba.Length + bb.Length];
                                bb[0] = 254;
                                bb[bb.Length - 1] = 255;

                                ba.CopyTo(fullMsg, 0);
                                bb.CopyTo(fullMsg, ba.Length);
                                string s = System.Text.UTF8Encoding.ASCII.GetString(fullMsg);

                                ns.Write(fullMsg, 0, fullMsg.Length);
                                Thread.Sleep(200);
                                if (!tmpCs.isAckNeeded())
                                    parent.cStructHandler.removeNextMsg(this.ID);
                            }
                        }
                    }
                    Thread.Sleep(100);
                }
                catch (Exception e)
                {
                    break;
                }

            }
            ns.Close();
            server.Close();
            dead = true;
        }
        catch (Exception e)
        {
            dead = true;
        }
    }

public void handleToDo()
    {
        try
        {
            int cnt = 0;
            while (true)
            {
                if (todo.Count > 0)
                {
                     //SWITCH CASE FOR DIFFERENT MESSAGE TYPES, DOING TASKS DEPENDING ON WHAT ONES...
                     Thread.Sleep(100);
                } 
                else
                {
                    if (dead)
                    {
                        todoT.Abort();
                        todoT = null;
                        break;
                    }
                }
                Thread.Sleep(200);
           }
      }
} 
```

如果不清楚，请提出问题。

/缺口

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:23:49.873

应该有一个集中的地方，任务生产者存储新任务，任务消费者从那里获取任务来处理它们。如果所有任务都是在消费者开始工作之前完成的，那么问题会简单一些。您的工作线程是任务消费者。任务通常用一个对象表示，该对象包含完成任务所需的所有相关数据。工作线程不应该有任何形式的睡眠，因为哪个线程更快以及它完成多少任务并不重要。只要有任务被消费，线程就会循环消费任务。这种消费受到某种[锁](http://msdn.microsoft.com/en-us/library/c5kehkcz.aspx)的保护。

编辑：我建议重组代码，以便只有一个线程以异步方式（[BeginRead](http://msdn.microsoft.com/en-us/library/system.net.sockets.networkstream.beginread.aspx)或[ReadAsync](http://msdn.microsoft.com/en-us/library/hh137813.aspx)）进行所有读取。代码将开始读取每个套接字，并等待某个套接字接收数据或关闭。如果接收到一个套接字的*数据并且数据是完整的*然后产生新的任务。您必须缓冲不完整的数据并读取更多数据，直到数据完成。当任务产生时，一个任务消费者最终应该拿起任务，处理它并将结果发送到相应的套接字。因此，套接字在一个线程中读取并在多个线程中写入。为防止某些竞争条件，如果为特定套接字生成了未完成的未完成任务，则主读取器线程不得为特定套接字读取更多数据。当任务完成时，主线程可能会开始读取更多数据。

我没有覆盖所有的角落，因为那会产生一堵文字墙。也许有一个图书馆可以为你做所有的交流，但我不知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T09:33:06.727

您的操作系统有一个调度程序。它已经在努力尝试给每个线程相等的时间，并且更好地了解线程何时等待某事（因此只会浪费时间）。

我不确定你更深层次的问题是什么，但我确定这不是解决方案。**很少**有真实代码`Sleep()`有用的情况（我说“真实代码”是因为在其他一些情况下它可以帮助调查和测试代码，而不是生产）。无论如何，这些极少数案例中的大多数已经存在于我们的库代码中。他们都不需要用高于 的值调用，`10`很少用高于的值调用`0`。

这不是其中一种情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T09:10:39.953

你不应该像这样使用任何 Sleeps 和 while 循环。即使使用 while 循环，在您的情况下也没有使用 Sleep 。

在不真正了解您的要求的情况下，我建议您查看计时器。

# c# - MVC3 加载启动页面错误

> ID：12212230
> 
> 赞同：0
> 
> 时间：2012-08-31T09:09:05.420
> 
> 标签：c#, asp.net-mvc-3, iis, web-config, visual-studio-2012

好的，作为一家公司，我们在 Web 服务器上部署了我们的第一个 MVC3 应用程序。已设置为处理 .NET

该服务器使用 Windows Server 2008 和 IIS 7。

但是，当我们将浏览器指向该 URL 时，我们会收到此错误。

**目录列表被拒绝 此虚拟目录不允许列出内容。**

当我们将其指向已知路径时，例如：

```
http://websitename/subfolder/subfolder/Views 
```

我们得到同样的错误。显然当 ww 尝试直接进入 Razor 页面时，例如：

```
http://websitename/subfolder/subfolder/Views/Pages/Index.cshtml 
```

正如您所期望的那样，它会下载 .cshtml 文件，因为浏览器无法读取 .cshtml，它会读取生成的 .html。

如果我指出：

```
http://websitename/subfolder/subfolder/Views/Pages/Index.html 
```

它什么也找不到。

它通过 Visual Studio 在 localhost 上运行。发布时，启动页面只是根目录，它通过 VS 运行并指向正确的位置。

我的问题是您如何手动指向 Web 服务器上生成的 html，或者当我只是转到服务器上的根目录时它没有找到起始页的原因是什么？

我检查了 IIS 并确保将正确的内容设置为本地副本'true'，并且我还在我的 web.config 文件中添加了 runAllManagedModulesForAllRequests=”true”。

任何帮助或正确方向的观点将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:16:58.747

在 MVC 中，您不通过浏览器访问视图，而是访问控制器上的操作，然后它们又返回一个视图。

所以你应该尝试访问

```
http://websitename/controller/action 
```

控制器部分是控制器的名称，其中“控制器”位在末尾被吊起，例如访问 AccountController 上的登录操作，您将转到

```
http://websitename/Account/Login 
```

你的动作应该在你的控制器中定义像这样

```
public ActionResult Login(string username, string password) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:16:00.783

您似乎还没有安装.NET 4。请您澄清一下您的服务器设置，例如操作系统、IIS 版本等？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:16:15.637

由于某种原因，请求不会从 IIS 转到 ASP.Net 运行时。根据您使用的 IIS 版本（也取决于您使用的服务器操作系统），此配置不同（或根本不需要）。在 MVC 路由中的某些旧版本的 IIS（例如版本）上，您必须将 .aspx（或任何其他扩展名）添加到所有路由（请参阅 Global.asax），然后配置 IIS 以将所有 .aspx 请求路由到ASP.Net 子系统。较新版本的 IIS 不需要所有这些。

MS的以下教程可能会有所帮助： [http ://www.asp.net/mvc/tutorials/older-versions/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs](http://www.asp.net/mvc/tutorials/older-versions/deployment/using-asp-net-mvc-with-different-versions-of-iis-cs)

# javascript - 如何在数组前使用带有额外参数的 JavaScript 的“应用”方法？

> ID：12212231
> 
> 赞同：1
> 
> 时间：2012-08-31T09:09:12.410
> 
> 标签：javascript, jquery, arrays

我正在尝试修改一些现有的 JavaScript 代码，这些代码用于[`apply()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Function/apply)将数组传递给通常需要任意数量参数的成员函数：

```
oldFoo: function( arg /* , ..., argN */ ) {
  ...
}

var ary = ...

oldFoo.apply($, ary)

... other stuff using ary ... 
```

新代码仍然接受任意数量的参数，我仍然将它们作为数组传入，但我还需要在数组之前传入一个新参数

```
newFoo: function( someObject, arg /* , ..., argN */ ) {
  ...
}

var ary = ...

newFoo.apply($, ???, ary)

... other stuff using ary ... 
```

所以我知道我可以制作一个新版本的`ary`with 数组方法，它可以就地修改它，例如// /`pop`但`push`我想用我的数组做各种事情，所以不想就地修改它。`shift``unshift`

我知道我可以通过预先添加一个新的临时数组来构建`someObject`它，但这似乎每次都需要几行代码。

是否有一种更具表现力的方式来实现我想要在大约相同数量的行中做的事情？`apply`关于返回一个新数组而不是就地修改一个数组的数组函数，我缺少什么？我已经在使用 jQuery，所以如果它有一些 vanilla JavaScript 没有的有用的东西，那也很好。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:14:51.050

我会做：

```
newFoo.apply($, ['foo','bar'].concat(ary) ); 
```

这样您就不会修改任何现有的参数数组。来自[MDN](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/concat)：

> concat 创建一个新数组，该数组由调用它的 this 对象中的元素组成，对于每个参数，依次是该参数的元素（如果参数是数组）或参数本身（如果参数是不是数组）。

# oracle-apex - 从页面内嵌入的 JavaScript 调用 apex.widget.datepicker

> ID：12212233
> 
> 赞同：1
> 
> 时间：2012-08-31T09:09:18.963
> 
> 标签：oracle-apex

我正在尝试调用 apex.widget.datepicker 将带有时间的自定义日期选择器应用到“页面加载时执行”中的字段。在以前版本的 Apex 中，这工作正常，但我们最近迁移到 Apex 4.1.1.00.23

页面加载时出现的 JS 错误是“TypeError: can't convert undefined to object”

另一方面，我可以将字段的类型更改为日期，但是如何自定义已绑定到该特定字段的 jquery 日期对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T19:01:11.350

当我访问 4.1.1 工作区时（因为 apex.oracle.com 已更新到 4.2），我立即尝试重现这些问题。然而，我做不到！我发誓我在 apex.oracle.com 上遇到了问题，但我不确定我是否犯了错误。

实际上，4.1.0 和 4.1.1 的响应完全一样，正如我所期望的那样。4.2 有所不同，但只有一点点不同。我不知道为什么到现在为止我浪费了这么多时间，我一定是真的错过了一些明显的逻辑缺陷。

我不知道 4.0 和 4.1 之间发生了什么变化，所以我不确定你做了什么来初始化 4.0 中的日期选择器。如果您所要做的只是调用`apex.widget.datepicker`一个项目以使其工作，那么在 4.1 中会发生一些变化，因为涉及到一个额外的步骤。

在调用之前`apex.widget.datepicker`，您必须确保已加载语言环境。*在打开操作 > 过滤器*菜单时，我通过检查 apex 发出的 ajax 调用发现了这一点。该代码将带有源设置的脚本标记附加到`apex_images`目录中的 datepicker 语言环境文件。该文件初始化日期选择器中的一些变量。
例如，语言为 english = 的应用程序`'en'`将初始化为`apex.jQuery.datepicker.regional['en']`

这很重要，因为如果这没有发生，您会收到`undefined`对象错误，因为小部件代码会尝试访问这些语言环境变量。如果脚本代码没有被附加，它们就不会被附加，并且`apex.widget.datepicker`会抛出一个错误。

为确保 datepicker 代码正常工作，您需要包含 locale javascript 文件。您可以通过将其添加到页面标题、页面本身、模板中来执行此操作，或者您可以动态地执行此操作：由您决定最佳位置。

以下是动态添加语言环境文件的示例：

```
$(document).append('<script type="text/javascript" src="/i/libraries/jquery-ui/1.8.14/ui/i18n/oracle/jquery.ui.datepicker-en.js"></script>'); 
```

这将获取给定目录中的文件（与 actions>filter 相同），它看起来像这样：

```
//******  AMERICAN  ******
apex.jQuery(function($){
apex.jQuery.datepicker.regional['en'] = {
closeText: "Close",
prevText: "Prev",
nextText: "Next",
currentText: "Today",
monthNames: ["January","February","March","April","May","June","July","August","September","October","November","December" ],
monthNamesShort: ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec" ],
dayNames: ["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday" ],
dayNamesShort: ["Sun","Mon","Tue","Wed","Thu","Fri","Sat" ],
dayNamesMin: ["Su","Mo","Tu","We","Th","Fr","Sa" ],
weekHeader: "Wk",
dateFormat: "dd-M-y",firstDay: 0,
isRTL: false,
showMonthAfterYear: false,
yearSuffix: ""};
apex.jQuery.datepicker.setDefaults(apex.jQuery.datepicker.regional['en']);
}); 
```

现在，请注意该路径存在一些硬编码问题。有'/i/'、jquery 版本和语言环境。对于 jquery 版本，无能为力。 `/i/`可以用语言环境替换 可以用应用程序变量`apex_img_dir` 捕获`BROWSER_LANGUAGE`

```
$(document).append('<script type="text/javascript" src="'+apex_img_dir+'libraries/jquery-ui/1.8.14/ui/i18n/oracle/jquery.ui.datepicker-&BROWSER_LANGUAGE..js"></script>'); 
```

应该做的伎俩（*检查你的ajax调用以确保！*）

包含脚本后，调用 apex.widget.datepicker 应该是安全的！

现在，我也一直在尝试**4.2**，它在那里几乎是一样的。唯一改变**的是您必须包含小部件代码**！

```
$(document).append('<script type="text/javascript" src="'+apex_img_dir+'libraries/jquery-ui/1.8.22/ui/i18n/oracle/jquery.ui.datepicker-en.js"></script>' +
'<script type="text/javascript" src="'+apex_img_dir+'libraries/apex/minified/widget.datepicker.min.js?v=4.2.0.00.19"></script>'); 
```

这应该涵盖了大部分。

# ruby-on-rails - Rails3 time_select 未正确分配给模型时间列

> ID：12212234
> 
> 赞同：0
> 
> 时间：2012-08-31T09:09:20.863
> 
> 标签：ruby-on-rails, ruby-on-rails-3, time-select

我刚刚从 rails 2.3.14 升级到 3.2.2。我的 time_select 在升级之前运行良好。现在，在我分配参数后，模型 'start_time' 和 'end_time' 列始终为零。

这是视图：

```
 <%=label_tag("Start Time")%>
    <div class="datetime-select">
        <%=time_select(:calendar_event,:start_time,{:minute_step => 5},{:class=>'time'})%>
    </div>
    <%=label_tag("End Time")%>
    <div class="datetime-select">
        <%=time_select(:calendar_event,:end_time,{:minute_step => 5},{:class=>'time'})%>
    </div> 
```

以下是控制器中的参数：

```
 Parameters: {"authenticity_token"=>"aGF3mZbZvIDiv6ikH0M8Up2HoTqyXiAFqk+6Wsjbq6g=", "calendar_event"=>{"start_date"=>"Fri Aug 31 10:30:00 +1200 2012", "calendar_resource_id"=>"", "start_time(1i)"=>"2012", "organisation_id"=>"", "start_time(2i)"=>"8", "start_time(3i)"=>"31", "booking_type"=>"WORKER", "start_time(4i)"=>"10", "end_time(1i)"=>"2012", "id"=>"", "start_time(5i)"=>"30", "end_time(2i)"=>"8", "user_id"=>"31", "end_time(3i)"=>"31", "end_time(4i)"=>"11", "description"=>"ssss", "end_time(5i)"=>"00", "end_date"=>"Fri Aug 31 11:00:00 +1200 2012"}} 
```

这是将属性分配给模型的代码：

```
 @calendar_event=CalendarEvent.new(params[:calendar_event])
      logger.info(@calendar_event.inspect) 
```

以下是日志语句中 CalendarEvent 模型的内容：

```
#<CalendarEvent id: nil, description: "ssss", booking_type: "WORKER", start: nil, end: nil, start_date: "2012-08-31", end_date: "2012-08-31", start_time: nil, end_time: nil, allDay: false, calendar_resource_id: nil, organisation_id: nil, user_id: 31, group_session_id: nil, created_at: nil, updated_at: nil> 
```

start_time 和 end_time 始终为零。

它们在 schema.rb 中被定义为“时间”列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T11:40:12.860

这可能是批量分配问题，并且您没有打开警告。尝试将以下内容添加到您的模型中：

```
attr_accessible :start_time, :end_time 
```

您还可以将其添加到您的 development.rb 环境中，以便收到这些类型的错误的通知：

```
# Raise exception on mass assignment protection for Active Record models
config.active_record.mass_assignment_sanitizer = :strict 
```

# android - 创建服务以检测设置打开

> ID：12212235
> 
> 赞同：0
> 
> 时间：2012-08-31T09:09:22.873
> 
> 标签：android

由于我是我公司提供的用户手机的管理员，我需要限制用户打开设置。我想创建一个服务来检测设置何时被打开。但是我在服务代码和清单 xml 中找不到需要监控的意图？

例如，

```
IntentFilter filter = new IntentFilter();
filter.addAction(Intent.ACTION_TIME_CHANGED);
this.registerReceiver(mBroadcastReceiver, filter);

<intent-filter>
            <action android:name="android.intent.action.TIMT_SET"/> 
</intent-filter> 
```

以上是我在网上搜索的示例，但我不知道哪个意图代表 SETTINGS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T13:00:38.917

> 由于我是我公司提供的用户手机的管理员，我需要限制用户打开设置。

创建您自己的 Android 操作系统自定义版本，锁定设置应用程序，将该自定义版本打包到您自己的自定义 ROM 模块中，然后在您分发的设备上安装该 ROM 模块。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-24T11:19:58.227

I know of 2 ways wich both have their (dis-)advanteges.

1) You can detect if your app is going to the background which happens when the user opens the menu. The handler is:

```
public void onWindowFocusChanged(boolean hasFocus) {
        super.onWindowFocusChanged(hasFocus); 
```

There you can close ALL system menus, even the menu to reboot or turn off the device! This is done with this intent:

```
Intent closeDialog = new Intent(Intent.ACTION_CLOSE_SYSTEM_DIALOGS);
sendBroadcast(closeDialog); 
```

2) You can start a run a service with a background worker that is checking the front app very often (like twice a second). You can get the foreground app like this:

```
String packageName;
String className;
ActivityManager amen = (ActivityManager)getBaseContext().getSystemService(Activity.ACTIVITY_SERVICE);
packageName = amen.getRunningTasks(1).get(0).topActivity.getPackageName();
className = amen.getRunningTasks(1).get(0).topActivity.getClassName(); 
```

The package name for the settings is: **com.android.settings**

If you detect it you can simply start an intent that brings your app back to the foreground.

Hope it helps :)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T09:44:47.383

写一个`Service`读系统`LogCat`，当一个应用程序启动时，它会显示一个非常独特的日志。例如，这是启动`Gmail`应用程序时的日志。

```
08-31 16:42:28.650: I/ActivityManager(3905): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=com.google.android.gm/.ConversationListActivityGmail bnds=[240,384][360,534]} from pid 7290 
```

好吧，对于您的情况，只需比较`cmp=`if it equals `com.android.settings`，然后做您需要做的事情。

# android - 为 GridView 的每个按钮打开一个新活动

> ID：12212236
> 
> 赞同：2
> 
> 时间：2012-08-31T09:09:30.643
> 
> 标签：android, android-intent, android-button, onclicklistener

这是我的自定义`OnClickListener`。我正在传递我的 Gridview 按钮的位置`ButtonAdapter.class`。我想为网格视图的每个按钮打开一个新活动。我应该在我的`MyOnClickListener.class`?

MyOnClickListener.class

```
import android.content.Intent;
import android.view.View;
import android.view.View.OnClickListener;

public class MyOnClickListener implements OnClickListener {

private final int position;  

    public MyOnClickListener(int position)  
    {  
        this.position = position;  
    }  

    public void onClick(View v) {
        // TODO Auto-generated method stub
        Intent intent = new Intent(v.getContext(), WordsList.class);
        v.getContext().startActivity(intent);
    }

} 
```

我得到了解决方案。我试过了，它有效！

```
public class MyOnClickListener implements OnClickListener {

private final int position;  

public MyOnClickListener(int position)  
{  
    this.position = position;  
}  

public void onClick(View v) {
    // TODO Auto-generated method stub
    switch(position){
        case 0:
        Intent a = new Intent(v.getContext(), WordsList.class);
        v.getContext().startActivity(a);
        break;
    case 1:
        Intent b = new Intent(v.getContext(), About.class);
        v.getContext().startActivity(b);
        break;  

    }

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:18:04.310

或类似的东西：

```
private Class[] activities = {
    Activity1.class,   // position=0
    Activity2.class,   // position=1
    //...
    };

public void onClick(View v) {
    Intent intent = new Intent(v.getContext(), activities[position]);
    v.getContext().startActivity(intent);
} 
```

但这很简单，也许我错过了重点？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:12:05.730

```
public void onClick(View v) {
    // TODO Auto-generated method stub
 Intent intent; 
 switch(v.getId())
 {
    case R.id.btn1:
       intent = new Intent(v.getContext(), WordsList1.class);
       v.getContext().startActivity(intent);
       break;
    case R.id.btn2:
       intent = new Intent(v.getContext(), WordsList2.class);
       v.getContext().startActivity(intent);
       break;
  }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:16:22.420

我很确定您应该使用 OnItemClickListener，因为它专门用于基于适配器的 UI。除了视图本身（如在 OnClick 中）之外，它还会传递给您，还会传递位置和 ID，以便轻松识别调用者并对其进行正确操作。

# asp.net-mvc-3 - 在没有会话的情况下在 mvc3 中将 Id 从一个 ActionResult 传递给另一个

> ID：12212242
> 
> 赞同：0
> 
> 时间：2012-08-31T09:09:47.433
> 
> 标签：asp.net-mvc-3

如何在 mvc3 中将 Id 从一个 ActionResult 传递到另一个我尝试使用 session ，但是如何不使用 session 概念

我正在使用基于 Ajax 的视图

我的行动结果 1

```
public ActionResult A(int id)
{
    Session["mId"] = Id;
    return View();
} 
```

我想在这里传递

```
public ActionResult B(int mid)
{
    mId =Convert.ToInt32(Session["mId"]);
    return View();
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:31:05.523

我也尽量避免开会。关于您发布的代码的评论，请确保它正确缩进。如果缩进正确，则易于阅读。

该`RedirectToAction`方法根据您提供的参数重定向到指定的操作方法。

您的 2 个操作方法可能如下所示：

```
public ActionResult A(int id)
{
     // Always check incoming parameters
     // Check that id is not zero or negative

     return RedirectToAction("B", new { mid = id });
}

public ActionResult B(int mid)
{
     // Check that mid is not zero or negative

     // Now you can do with mid what you need to do, for example:
     int myId = mid;

     return View();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:14:30.790

你可以使用[**Controller.RedirectToAction**](http://msdn.microsoft.com/en-us/library/system.web.mvc.controller.redirecttoaction%28v=vs.108%29.aspx)方法

```
public ActionResult A(int id)
{
//Session["mId"] = Id;
return RedirectToAction("B",new {mid=id});
} 
```

# c# - 不能通过 C# 访问 C++/CLI 重载运算符

> ID：12212243
> 
> 赞同：4
> 
> 时间：2012-08-31T09:09:49.427
> 
> 标签：c#, c++-cli, operator-overloading

我有以下 C++/CLI 类：

```
 public ref class MyClass
    {
    public:
        int val;
        bool operator==(MyClass^ other)
        {
            return this->val == other->val;
        }

        bool Equals(MyClass^ other)
        {
            return this == other;
        }
    }; 
```

当我尝试从 C# 验证两个实例`MyClass`是否相等时，我得到了错误的结果：

```
MyClass a = new MyClass();
MyClass b = new MyClass();

//equal1 is false since the operator is not called
bool equal1 = a == b;
//equal2 is true since the comparison operator is called from within C++\CLI
bool equal2 = a.Equals(b); 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-31T09:22:24.463

`==`您重载的运算符在 C# 中不可访问，并且行`bool equal1 = a == b`比较`a`和`b`通过引用。

二元运算符被 C# 中的静态方法覆盖，您需要提供此运算符：

```
static bool operator==(MyClass^ a, MyClass^ b)
{
  return a->val == b->val;
} 
```

覆盖时`==`，您还应该覆盖`!=`. 在 C# 中，这实际上是由编译器强制执行的。

# java - Android哈希码不匹配：实际设备上的onFacebookError，应用程序在模拟器上运行

> ID：12212246
> 
> 赞同：0
> 
> 时间：2012-08-31T09:10:12.447
> 
> 标签：java, android, facebook, facebook-graph-api

并提前感谢您的时间和关注！
我使用 facebook sdk 的 android 应用程序在模拟器上**运行良好**，但我在三星 Galaxy S1 和 S2 设备上都得到**了 onFacebookError() 。**我希望我还可以为您提供更详细的错误输出信息，但我目前手头没有这些设备来调试它们并检查 adb logcat 出了什么问题。我知道 onFacebookError() 方法正在运行，因为我放在那里的 Toast 显示“onFacebookError”。
在我设法拿到这些手机并调查错误并将它们发布到这里之前，有人遇到过这个问题吗？当我在这里搜索这个问题时，我读到有人认为这是因为设备上安装了官方的 facebook 应用程序。这是相关的吗？
敬酒 e.getMessage() 以获取如下错误详细信息：

```
@Override
            public void onFacebookError(FacebookError e) {
                // TODO Auto-generated method stub
                //Toast.makeText(MemoFriendActivity.this, "fbError", Toast.LENGTH_SHORT).show();
                Toast.makeText(MemoFriendActivity.this, "MSG: "+e.getMessage()+ " CODE: "+e.getErrorCode(), Toast.LENGTH_LONG).show();

            } 
```

在 S2 设备上显示此消息：“MSG: ivalid_key:Android 密钥不匹配。您的密钥“XXX”与您的应用程序设置中指定的允许密钥不匹配。请在[http://www.facebook.com/developers](http://www.facebook.com/developers) CODE检查您的应用程序设置: 0"

代码：

```
public void onClick(View v) {
    // TODO Auto-generated method stub
    if (MyUtil.fb.isSessionValid())
    {
        //button close session - log out of facebook
        try {
            MyUtil.fb.logout(getApplicationContext());
            updateGuiAccordingToState();
        } catch (MalformedURLException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }   
    }
    else
    {
        //login to facebook
        MyUtil.fb.authorize(this, new DialogListener() {

            @Override
            public void onFacebookError(FacebookError e) {
                // TODO Auto-generated method stub
                Toast.makeText(MemoFriendActivity.this, "fbError", Toast.LENGTH_SHORT).show();

            }

            @Override
            public void onError(DialogError e) {
                // TODO Auto-generated method stub
                Toast.makeText(MemoFriendActivity.this, "OnError", Toast.LENGTH_SHORT).show();
            }

            @Override
            public void onComplete(Bundle values) {
                // TODO Auto-generated method stub
                Editor editor = sp.edit();
                editor.putString("access_token", MyUtil.fb.getAccessToken());
                editor.putLong("access_expires", MyUtil.fb.getAccessExpires());
                editor.commit();
                getUsername();
                updateGuiAccordingToState();
            }

            @Override
            public void onCancel() {
                // TODO Auto-generated method stub
                Toast.makeText(MemoFriendActivity.this, "OnCancel", Toast.LENGTH_SHORT).show();
            }
        });
    }
}
protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    // TODO Auto-generated method stub
    super.onActivityResult(requestCode, resultCode, data);
    MyUtil.fb.authorizeCallback(requestCode, resultCode, data);
} 
```

My.Util.fb 是一个静态 Facebook 对象。同样，此代码适用于模拟器。有人知道如何在设备上解决它吗？我希望我能尽快在设备上查找并分享。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-02T06:44:46.147

好的，我自己得到了答案。这是 android 键的不匹配。从设备而不是模拟器运行应用程序时，您需要将开发 PC 上的哈希键替换为手机上的应用程序之一，您可以从 e.getMsg 的输出中获取显示在这里。从您的设备中获取密钥，并将其设置为 facebook.com/developers 中的新哈希。除了您拥有的 PC 之外，您还可以添加此哈希键，以防您希望该应用程序在手机和 PC 上运行。希望这对其他人有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T17:50:38.413

如果您能够在设备上看到 toast，则 toast 值`e.getMessage()`以查看更详细的错误报告。

# java - 在 JMenuBar 中的元素之间添加间距

> ID：12212254
> 
> 赞同：8
> 
> 时间：2012-08-31T09:10:25.813
> 
> 标签：java, swing, jmenubar

在我的应用程序中使用 JMenuBar 时，文件、编辑等元素靠得太近，如果元素之间有一些空间会更好看。这可能吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T09:12:21.923

是的，只需在其中添加带有空文本的 MenuBar 项目并使其不可点击/可选择

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T09:28:14.843

需要添加`JComponents`的不是`focusable`，你可以创建一个空间

1.  `JMenuBar`

    *   `JLabel`（必须设置为 required `PreferredSize`）

    *   `JSeparator`（最小尺寸为 10 像素，必须`setOpaque`为`JSeparator`）

2.  `JMenuItem`

    *   `JSeparator`（无需额外设置）

    *   `JLabel`（必须设置为 required `PreferredSize`）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-31T09:13:57.713

对于水平使用，您可以使用`|`.

```
menu.add(new JMenu("File"));
menu.add(new JMenu("|"));
menu.add(new JMenu("Edit")); 
```

对于垂直使用，您可以简单地使用 a `JSeparator` *or* `addSeparator()`：

```
menu.add(new JMenuItem("Close"));
menu.add(new JSeparator());        // explicit
menu.addSeparator();               // or implicit
menu.add(new JMenuItem("Exit")); 
```

![分隔器](../Images/d70c5464386815947f7db598a2f7a7ba.png)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-02-25T16:32:04.700

它很旧，但我一直在寻找解决同一问题的任何方法我得出了这个结论：

您应该为您的 JMenuItem 设置边距，如下所示：

```
JMenuItem menu = new JMenuItem("My Menu");
menu.setMargin(new Insets(10, 10, 10, 10)); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-07-01T19:41:36.910

javax.swing.Box 上有一个名为 createHorizo​​ntalStrut( int width ) 的静态方法来创建一个不可见的固定宽度组件。

代码看起来像这样：

```
JMenuBar menuBar = new JMenuBar();
menuBar.add( new JMenu( "File" ) );
menuBar.add( Box.createHorizontalStrut( 10 ) );  //this will add a 10 pixel space
menuBar.add( new JMenu( "Edit" ) ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-12-19T05:18:50.057

其他答案效果很好，但由于填充和边距可能会有意想不到的间距。如果您想更好地控制垫片的大小：

```
JMenu spacer = new JMenu();

//disable the spacer so that it doesn't behave
//like a menu item
spacer.setEnabled(false);

//Java components are weird. Set all three to
//guarantee that size is used
spacer.setMinimumSize(new Dimension(width, 1));
spacer.setPreferredSize(new Dimension(width, 1));
spacer.setMaximumSize(new Dimension(width, 1));

//add the spacer to your JMenuBar
jMenuBar.add(spacer); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-13T09:31:26.247

有两种标准方法可以向 Swing 组件添加任意间距。

一种标准方法是对 JMenuBar 对象中包含的 JMenu 对象使用 setMargin。这是 Gabriel Câmara 在 JMenuItem 上面建议的方式。这应该也适用于 JMenu 对象，但我尝试过它并没有用。

执行此操作的第二种标准方法是将 EmptyBorder 添加到 JMenu 对象。这工作得很好。它使您可以完全控制您想要在各个方向上拥有的确切距离。

```
JMenu jMenuFile = new JMenu("File")
jMenuFile.setBorder(new EmptyBorder(0, 10, 0, 10)); 
```

# android - Android 自定义 ListView 适配器过滤

> ID：12212255
> 
> 赞同：0
> 
> 时间：2012-08-31T09:10:34.777
> 
> 标签：android, filtering, adapter, custom-adapter

我的 ListView 中的自定义适配器有过滤问题这是我的适配器代码

```
public class PeopleAdapter extends ArrayAdapter<TUser> implements Filterable {

int resource;
String response;
Context context;

private Filter mFilter;

protected List<TUser> mActivitiesList;

//Initialize adapter
public PeopleAdapter(Context context, int resource, List<TUser> items) {
    super(context, resource, items);
    mActivitiesList = items;
    this.resource=resource;

}

@Override
public View getView(int position, View convertView, ViewGroup parent)
{
    LinearLayout PeopleList;
    //Get the current alert object
    TUser user = getItem(position);

    //Inflate the view
    if(convertView==null)
    {
        PeopleList = new LinearLayout(getContext());
        String inflater = Context.LAYOUT_INFLATER_SERVICE;
        LayoutInflater vi;
        vi = (LayoutInflater)getContext().getSystemService(inflater);
        vi.inflate(resource, PeopleList, true);
    }
    else
    {
        PeopleList = (LinearLayout) convertView;
    }
    //Get the text boxes from the listitem.xml file
    TextView ContactName =(TextView)PeopleList.findViewById(R.id.txtNameText);
    TextView ContactNick =(TextView)PeopleList.findViewById(R.id.txtNickText);

    //Assign the appropriate data from our alert object above
    ContactName.setText(user.FName + " " + user.Name);
    ContactNick.setText(user.Nick);

    return PeopleList;
}

@Override
public Filter getFilter() {
    if (mFilter == null)
        mFilter = new ArrayFilter();
    return mFilter;     
}

/**
 * An array filters constrains the content of the array adapter with a prefix. Each
 * item that does not start with the supplied prefix is removed from the list.
 * 
 * 
 */
private class ArrayFilter extends Filter {

private final Object lock = new Object();
private ArrayList<TUser> mOriginalValues;
//protected final LayoutInflater mInflater;

//mInflater = (LayoutInflater) this.getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    @Override
    protected FilterResults performFiltering(CharSequence prefix) {
        FilterResults results = new FilterResults();

        if (mOriginalValues == null) {
            synchronized (lock) {
                mOriginalValues = new ArrayList<TUser>(mActivitiesList);
            }
        }

        if (prefix == null || prefix.length() == 0) {
            synchronized (lock) {
                ArrayList<TUser> list = new ArrayList<TUser>(mOriginalValues);
                results.values = list;
                results.count = list.size();
            }
        } else {
            final String prefixString = prefix.toString().toLowerCase();

            ArrayList<TUser> values = mOriginalValues;
            int count = values.size();

            ArrayList<TUser> newValues = new ArrayList<TUser>(count);

            for (int i = 0; i < count; i++) {
                TUser item = values.get(i);

                String[] words = (item.FName.toLowerCase() + " " + item.Name.toLowerCase()).split(" ");  //item.label.toString().toLowerCase().split(" ");
                int wordCount = words.length;

                for (int k = 0; k < wordCount; k++) {
                    final String word = words[k];

                    if (word.contains(prefixString)) {
                        newValues.add(item);
                        break;
                    }
                }
            }

            results.values = newValues;
            results.count = newValues.size();
        }

        return results;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint, FilterResults results) {
        //noinspection unchecked
        mActivitiesList = (List<TUser>) results.values;
        if (results.count > 0) {
            notifyDataSetChanged();
        } else {
            notifyDataSetInvalidated();
        }
    }
} 
```

}

在我的主要活动中，我有这个代码。

```
 etPeopleSearch.addTextChangedListener(new TextWatcher() {
        public void onTextChanged(CharSequence s, int start, int before, int count) {
        }

        public void beforeTextChanged(CharSequence s, int start, int count, int after) {
        }

        public void afterTextChanged(Editable s) {
            /*ListView av = listView;
            PeopleAdapter filterAdapter = (PeopleAdapter)av.getAdapter();
            filterAdapter.getFilter().filter(s.toString());*/

            //PeopleAdapter af = (PeopleAdapter)listView.getAdapter();

            PeopleAdapt.getFilter().filter(s.toString());

        }
    }); 
```

一切都没有错误，但过滤不起作用......谁能帮助我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:23:02.970

试试这个解决方案：

```
public void onTextChanged(CharSequence s, int start, int before, int count)
{
    PeopleAdapt.getFilter().filter(s); //Filter from my adapter
    PeopleAdapt.notifyDataSetChanged(); //Update my view
} 
```

# jquery - jQuery Masonry 图像堆叠在顶部

> ID：12212261
> 
> 赞同：1
> 
> 时间：2012-08-31T09:10:57.497
> 
> 标签：jquery, jquery-masonry

我正在使用它来调用和激活 jQuery Masonry。

```
<script>    
  jQuery("#content").load("recent.html", function(){
    $('#masonryContainer').masonry({  
      // options
      itemSelector : '.item',
      columnWidth : 10,
      isAnimated: !Modernizr.csstransitions,
      easing: 'linear' 
    });
  });
</script> 
```

问题是当页面加载时，所有图像（它们在recent.html 中的div 中）都堆叠在一起。在砌体激活和动画/排列图像之前，我必须先调整浏览器窗口的大小。我希望它立即进入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:33:08.607

我认为你缺少一个准备好的：

```
<script>  
  $(window).ready(function() {
  jQuery("#content").load("recent.html", function(){
    $('#masonryContainer').masonry({  
      // options
      itemSelector : '.item',
      columnWidth : 10,
      isAnimated: !Modernizr.csstransitions,
      easing: 'linear' 
    });
  });
});
</script> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-08-11T21:19:07.717

其他 JS 库可能会导致页面加载时出现布局问题。例如，jQuery Mobile 不能很好地与 jQuery Masonry 配合使用，并且会产生上述问题。如果是这种情况，请删除其他 JS 库，直到找到罪魁祸首。

# c# - 在 SQL Server 2008 数据库中添加/删除/更新任何选定表的数据

> ID：12212262
> 
> 赞同：0
> 
> 时间：2012-08-31T09:10:57.083
> 
> 标签：c#, wpf, sql-server-2008

在 WPF 中，我需要在 SQL Server 2008 数据库中添加/删除/更新任何选定表的数据，我正在考虑使用 DataGrid 控件并绑定选定的表来执行此操作，所以任何推荐的控件从框架 4.0 中选择？我感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T04:18:48.830

我取得了成功，但不是很干净（WPF 数据网格需要 SQLCommandBuilder 帮助才能插入/更新/删除，并且表需要主键但可以工作）。还探索了第三方，发现 DevEx 和 Telerik WPF 数据网格带有动态绑定添加/更新/删除功能，但我必须编写代码，看看是否值得引入第三方依赖以获得更好的用户体验。

# c - 计算数组元素出现的次数

> ID：12212268
> 
> 赞同：3
> 
> 时间：2012-08-31T09:11:41.177
> 
> 标签：c, arrays

我陷入了困境。我的问题是在整数数组中获取重复次数最多的数字，该数组的值可以从 0 到 5,000。该数字应至少重复*n* /4 次，其中*n*是数组长度。

我查看了提取至少*n* /2 次重复元素。但我无法将其修改为我的要求。另外，由于我的不是字符数组，我无法创建一个 5,000 大小的数组来增加重复数字的索引。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T09:19:58.523

以下是我将如何处理这个问题，我认为这对于这类问题是有意义的：

1.  对数组进行排序（就地），`qsort()`如果你有它，当然可以使用。
2.  迭代，保持一个计数器，每次数组值更改时重置，一旦计数器达到 n/4，记住它为哪个数字这样做。
3.  完毕。

这里重要的是，通过将所有相同的元素组合成一个序列，排序使得一次计算每个元素变得微不足道，这使得计数变得微不足道。

# javascript - 是否可以使用拖动滑块在 jquery 中的 4 个图像之间滑动？

> ID：12212269
> 
> 赞同：0
> 
> 时间：2012-08-31T09:11:42.467
> 
> 标签：javascript, jquery, html

我有 4 张图片和一个滑块：

```
[image1.jpg]----[image2.jpg]----[image3.jpg]----[image4.jpg]
-----------------------------[Slider]----------------------- 
```

是否可以单击并拖动滑块，使其在位置 1 和 2 之间时，图像 1 和 2 设置为 50% 透明度，然后当滑块到达位置 2 时，图像 2 为 100% 不透明，图像 1 为 100 ％ 透明的。然后从位置 2 滑动到 3 时，图像 2 变为 90%，图像 3 变为 10%，下一个位置图像 2 80% 图像 3 20% 等...直到滑块位于位置 3，图像 3 完全可见并且图像2 是 100% 透明的。

那可能吗？我会使用数组，还是获取滑块的 X 位置并相应地调整图像透明度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:45:26.657

这是我的尝试：[小链接](http://jsfiddle.net/glee/Pc3z4/)。它使用 jQuery 但没有插件（我相信它也可以使用纯 JavaScript 编写）。

该代码非常不言自明，但这里是 JavaScript 部分的注释版本：

```
$(".slider").scroll(function() {
   var imgs = $(".slider img"); //find all images in the slider
    imgs.each(function() { //for each of them
        var cur = $(this); //save the current image in cur
        var lft = cur.offset().left; //find out its left offset
        if(lft <= 0) { //if it's been scrolled past (its offset is negative)
            cur.css({opacity: Math.max(0, (300 + lft) / 300)}); //then set its opacity to a value proportional to its left offset
        }
        else {
            cur.css({opacity: Math.min(1, (500 - lft) / 500)}); //it's not scrolled past yet; set its opacity appropriately
        }
    });
}); 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:14:54.840

查看[jQuery UI 滑块](http://jqueryui.com/demos/slider/#side-scroll)，它有很多功能，包括滑动（带有 div 的）图像

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:20:38.080

使用 UI 滑块，这绝对是 100% 可能的。我会看看 jQuery 的 UI 滑块。这是他们如何使用它来不断更改颜色的示例：

[滑块演示](http://jqueryui.com/demos/slider/#colorpicker)

虽然不同，但总体思路是相同的——随着滑块值的变化，您只需针对图像的不透明度进行调整。我认为您的后一个想法（“获取滑块的 X 位置并相应地调整图像透明度？”）是解决问题的好方法。您可能可以将其设置为 0 对 image1 100% 可见，25 对 image2 100% 可见，依此类推。如果您需要更多头脑风暴帮助，请告诉我们：]

# java - 使用快照依赖时，Maven 程序集表现不佳

> ID：12212278
> 
> 赞同：0
> 
> 时间：2012-08-31T09:12:17.960
> 
> 标签：java, maven, maven-2

这是我的子 pom 文件： http: [//pastebin.com/euECBcRx](http://pastebin.com/euECBcRx)

还有一个主要的 pom 文件： http: [//pastebin.com/JmwczN2v](http://pastebin.com/JmwczN2v)

我想要的是包装一个带有依赖项的罐子。在子 pom 文件中，有一个 artifactId 为 jedis 的依赖项。

问题是：当我将此依赖项从发布版本更改为快照版本（例如 2.0.0 到 2.2.0-SNAPSHOT）时，**生成的 jar 将不完整**（不涉及依赖类，仅涉及自身的类）。为什么？

**（我可以使用两个**版本在 Maven 命令行输出中得到一个没有错误的 jar ）

依赖的release jar和snapshot jar在不同的仓库，麻烦吗？

谢谢

# crystal-reports-2010 - 将 Crystal Report 导出为 PDF 时字体大小减小

> ID：12212290
> 
> 赞同：10
> 
> 时间：2012-08-31T09:13:05.057
> 
> 标签：crystal-reports-2010

我在使用水晶报表 13.0 导出水晶报表时遇到字体大小问题，字体大小减小了，所以我需要增加它。我注意到我必须从注册表项中设置它，但我没有创建相关文件到必须更改的注册表文件中的字体（PDF\ForceLargerFonts）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-14T08:16:54.633

这是 Crystal Reports 的一个已知问题，它在导出为 PDF 文件时会减小字体大小。该解决方案是从 Business Objects 支持站点检索的。通过以下链接解决它很有用：请检查一下

1- [http://www.barcodesoft.com/crystal-reports-export-pdf-font-size.aspx](http://www.barcodesoft.com/crystal-reports-export-pdf-font-size.aspx)

2- [http://mdn.morovia.com/kb/Font-size-decreases-exporting-PDF-Crystal-Reports-10053.html](http://mdn.morovia.com/kb/Font-size-decreases-exporting-PDF-Crystal-Reports-10053.html)

其他描述： [http ://www.arcanadev.com/support/kb/K00000394.aspx](http://www.arcanadev.com/support/kb/K00000394.aspx)

并打开字体文件夹并选择“字体设置”。确保未选中“根据语言设置隐藏字体”选项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-09T12:47:13.290

在 Windows 中，单击开始、运行、**Regedit**

1.  转到以下键 HKEY_CURRENT_MACHINE\SOFTWARE\Business Objects\Crystal Reports For .Net Framework 4.0\Crystal Reports\Export\
2.  右键单击 Export 文件夹（如果它不存在，则右键单击 Crystal Reports 并选择 New，Key，输入**Export**）
3.  点击新建，KEY，输入**Pdf**
4.  单击新建，DWORD 值，输入**ForceLargerFonts**
5.  创建上述键后，双击它并将值数据从**0 更改为 1**

# php - 在代理服务器后面使用 Google OpenID

> ID：12212294
> 
> 赞同：2
> 
> 时间：2012-08-31T09:13:14.967
> 
> 标签：php, zend-framework, proxy, openid

我已经按照 Google [https://developers.google.com/google-apps/marketplace/tutorial_php](https://developers.google.com/google-apps/marketplace/tutorial_php)上的本教程为学校创建了一个市场应用程序。该代码在我的服务器上运行，但是当应用程序在学校内运行时，它会失败。

它失败的原因是因为学校使用了代理服务器。有谁知道在使用 Zend/Google OpenID 代码时如何设置代理服务器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T14:04:12.953

基本上，图书馆有两种不同的方式连接到互联网：

1.  使用 cURL（在 /Yadis/ParanoidHTTPFetcher.php 中找到）
2.  使用套接字（在 /Yadis/PlainHTTPFetcher.php 中找到）

据我所知，只要安装了它，它就默认使用 cURL。

那里有两个 curl_init() 调用，所以在某些时候你需要添加：

```
 curl_setopt($ch,CURLOPT_PROXY, '10.2.68.20');
    curl_setopt($ch,CURLOPT_PROXYPORT, '3128'); 
```

或者，无论您的代理服务器是什么。那应该做的工作！

# javascript - 使用 jquery 验证功能不适用于选择元素

> ID：12212299
> 
> 赞同：4
> 
> 时间：2012-08-31T09:13:33.703
> 
> 标签：javascript, jquery, html

我的输入字段有工作验证功能：

```
$.tools.validator.fn("#password", function(input, value) {
    return value!='Password' ? true : {     
        en: "Please complete this mandatory field"
    };
});

$("#form").validator({ 
    position: 'bottom left', 
    messageClass:'form-error',
    message: '<div><em/></div>' // em element is the arrow
}); 
```

我的输入字段：

```
<input type="password" id="password" class="full" value="" name="j_password" required="required" placeholder="Password" /> 
```

并为 select 尝试了相同的逻辑，但它不起作用：

```
$.tools.validator.fn("#environment", function(select, value) {
    return value!='Select Environment' ? true : {     
        en: "Please choose the environment"
    };
}); 
```

我的选择（不工作）：

```
<select id="environment" style="opacity: 0; "><option value="Select Environment">Select Environment</option><option value="1">Dev</option><option value="2">Test</option></select> 
```

我的选择（效果不佳）：

```
<select id="environment" style="opacity: 0; "><option>Select Environment</option><option>Dev</option><option>Test</option></select> 
```

有人能指出我在哪里犯错以及如何解决吗？

**更新：**

我正在使用[http://jquerytools.org/documentation/validator/index.html](http://jquerytools.org/documentation/validator/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:44:00.993

我不知道这是否相关，但是当我想从下拉列表中选择项目时，我使用`$('#dropDownID option:selected').val()`.

我建议显示该值以查看您实际得到的结果，然后以这种方式尝试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:54:00.717

删除了**style="opacity: 0;"** 并且您的代码似乎工作正常，请参阅：[jsFiddle](http://jsfiddle.net/GDTwR/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:55:22.883

如果您尝试`$(select).val()`获取该值，它应该从选择中获取正确的选定值

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T11:43:41.310

解决了，实际上我没有在这里找到解决方案：

[https://gist.github.com/1810536](https://gist.github.com/1810536)

使用以下代码：

```
 $.tools.validator.fn("#environment", function(input, value) {          
         return value!='Select Environment' ? true : {     
                en: "Please select which environment you want to logon"
            };
        }); 
```

# c++ - 查找子网中的所有 IP

> ID：12212300
> 
> 赞同：0
> 
> 时间：2012-08-31T09:13:34.717
> 
> 标签：c++, ip

我正在为我们的项目使用 C++ 开发部分代码，我的代码必须返回子网中所有可用 IP 的列表，所以我有这种情况：

1.  获取我的子网。

2.  使用`for`循环测试子网中的每个 IP，例如：

    ```
    for (int i = 0; i < 254; i++)
    {
        testip(X, X, X, i);
        /* if IP is valid */
        vectoriplist.push_back(X, X, X, i);
    } 
    ```

对于查找子网，我想我会使用[IPnetwork 实用程序](http://ipnetwork.codeplex.com/)，但我还有另一个问题，这是我如何测试 IP 在子网上是否有效的方法。我尝试使用`boost.asio`，但我找不到任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T07:06:12.730

我找到了一个解决方案：

我在 for 循环中使用`coonect()`和函数。`getpeername()`获取子网中的所有有效 IP 地址

# c - c 中改进的 qsort() 函数

> ID：12212302
> 
> 赞同：1
> 
> 时间：2012-08-31T09:13:40.007
> 
> 标签：c, sorting

假设我们正在使用 qsort() 对一维数组进行排序，是否有一种简单的方法可以从排序数组的元素中检索该元素在排序之前在数组中被索引时的索引。假设 c[N] 排序为 d[N]，如何从整数 i, j 中找到 c[j]=d[i] ？当我的意思是一种简单的方法时，qsort（带有一些附加参数）是否存储这种信息（排序后索引之间的双射）或者它是否存在可以轻松排序和检索这种信息的 qsort 改进函数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:26:20.773

假设您使用如下结构填充初始数组：

```
struct IndexedInteger {
  int value;
  int index;
} 
```

然后，您需要在循环中填充索引：

```
void addIndices(IndexedInteger * array, size_t num) {
  int i;
  for (i = 0; i < num; ++i) {
    array[i].index = i;
  }
} 
```

然后你将对你的数组进行排序：

```
int compareIndexed(const void * elem1, const void * elem2) {
  IndexedInteger * i1, *i2;
  i1 = (IndexedInteger*)elem1;
  i2 = (IndexedInteger*)elem2;
  return i1->value - i2->value;
}

void sortArray(IndexedInteger * array, size_t num) {
  qsort(array, num, sizeof(IndexedInteger), compareIndexed);
} 
```

然后，您将使用初始索引对数组进行排序。

免责声明：我写得很快，可能会有错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:41:40.323

你可以做的是创建一个`struct`保存你的数据（在这种情况下，一个整数）和一个整数，它对应于它最初在你的数组上的位置的索引。澄清，

```
#include <stdio.h>
#include <stdlib.h>

struct myData {
    int data;
    int orig_pos; // will hold the original position of data on your array
};

int myData_compare (const void* a, const void* b) {

    return ((struct myData*)a)->data - ((struct myData*)b)->data;
}

int main () {

    size_t N = 10; // size of your array
    struct myData* array = (struct myData*) malloc(N * sizeof(struct myData));
    for (size_t i = 0; i < N; i++) {
        array[i].data     = N - i; // array will hold 10,9,8,7,...1 in this order
        array[i].orig_pos = i;
    }
    qsort(array, N, sizeof(struct myData), &myData_compare);
    for (size_t i = 0; i < N; i++) {
        printf("\ndata: %d, orig_pos: %d", array[i].data, array[i].orig_pos);
    }
    return 0;
} 
```

# twitter - 如何获取某些城市的推特趋势

> ID：12212305
> 
> 赞同：1
> 
> 时间：2012-08-31T09:14:02.860
> 
> 标签：twitter, twitter4j

[http://twitter4j.org/en/javadoc/twitter4j/api/LocalTrendsMethods.html#getLocationTrends(int](http://twitter4j.org/en/javadoc/twitter4j/api/LocalTrendsMethods.html#getLocationTrends(int) )

有没有办法获得像内华达州里诺这样的城市的推特趋势，这不是从[http://twitter4j.org/en/javadoc/twitter4j/api/LocalTrendsMethods.html#getAvailableTrends](http://twitter4j.org/en/javadoc/twitter4j/api/LocalTrendsMethods.html#getAvailableTrends) ()返回的位置的一部分

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:21:04.497

如果列表中没有，则无法使用 twitter api。但您可以尝试过滤：

*   词“[里诺，内华达，#Reno，#Nevada](https://twitter.com/#!/search/Reno%20OR%20Nevada%20OR%20#Reno%20OR%20#Nevada) ”。
*   [使用地理编码](https://twitter.com/#!/search/geocode:47.252877,-122.444291,15mi)的位置，但您必须知道每个城市的纬度经度，并且您只能从使用 twitter 定位器的人那里获得结果。

# typo3 - 如何向 Typo3 后端添加更多框架布局

> ID：12212309
> 
> 赞同：1
> 
> 时间：2012-08-31T09:14:10.270
> 
> 标签：typo3, typoscript

我目前希望用户在添加内容时为其内容选择布局。例如，他们可能希望其内容为时事通讯布局或顶部有边框的内容。

为此，我首先在我的打字稿文件中为部分框架添加一些项目：

```
TCEFORM.tt_content.section_frame {
  disabled = 0
  removeItems = 1,5,6,10,11,12,20,21,66
  addItems.104 = Newsletter
  addItems.105 = Country
  addItems.106 = Social
  addItems.107 = Border Top
} 
```

然后我将它包含在我的根页面属性的资源选项卡上的打字稿中：

```
<INCLUDE_TYPOSCRIPT: source="FILE: fileadmin/typoscript/tsconfig/page/minimal_rte.ts"> 
```

然后我在它下面添加了一些打字稿：

```
tt_content.stdWrap.innerWrap.cObject {
    104 < tt_content.stdWrap.innerWrap.cObject.default
    104 = TEXT
    104.value = <div class="newsletter">|</div>

    105 < tt_content.stdWrap.innerWrap.cObject.default
    105 = TEXT
    105.value = <div class="country">|</div>

    106 < tt_content.stdWrap.innerWrap.cObject.default
    106 = TEXT
    106.value = <div class="social">|</div>

    107 < tt_content.stdWrap.innerWrap.cObject.default
    107 = TEXT
    107.value = <div class="border_top">|</div>
} 
```

但是，我可以在我的后端页面中看到这些布局成功显示。但是每当我选择它们时，它们根本不会应用这些类。

我不确定上述步骤是否正确，或者还有更多配置需要实现。

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:49:59.403

这个任务已经解决了。根据[http://float-middle.blogspot.com/2009/07/custom-frames-for-content-elements-in.html](http://float-middle.blogspot.com/2009/07/custom-frames-for-content-elements-in.html)。我添加了打字稿：

```
tt_content.stdWrap.innerWrap.cObject {
  104 < tt_content.stdWrap.innerWrap.cObject.default
  104 = TEXT
  104.value = <div class="newsletter">|</div>

  105 < tt_content.stdWrap.innerWrap.cObject.default
  105 = TEXT
  105.value = <div class="country">|</div>

  106 < tt_content.stdWrap.innerWrap.cObject.default
  106 = TEXT
  106.value = <div class="social">|</div>

  107 < tt_content.stdWrap.innerWrap.cObject.default
  107 = TEXT
  107.value = <div class="border_top">|</div>
} 
```

在错误的地方。我需要在设置部分添加它

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-27T08:10:10.580

在 TSConfig 中

```
# add new frame to content element
TCEFORM.tt_content.section_frame {
  disabled = 0
  removeItems = 1,5,6,10,11,12,20,21,66
  addItems.101 = Leading style
} 
```

在 set.txt

```
tt_content.stdWrap.innerWrap.cObject = CASE
tt_content.stdWrap.innerWrap.cObject {
    key.field = section_frame
    101 = TEXT
    101.value = <div class="lead">|</div>
} 
```

希望它有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-10-16T12:51:23.150

除了其他一切，我认为您正在混淆 TSconfig 和 TypoScript。

```
TCEFORM.tt_content.section_frame 
```

是 TSConfig

```
tt_content.stdWrap.innerWrap.cObject 
```

是打字稿

**TS配置：**

*   在页面属性 > 资源 > TSconfig 中的后端设置
*   或者，在 Extension 中设置，例如使用 \TYPO3\CMS\Core\Utility\ExtensionManagementUtility::addPageTSConfig
*   在后端查看：信息 > 页面 TSconfig
*   文档：[如何配置](https://docs.typo3.org/m/typo3/reference-tsconfig/master/en-us/UsingSetting/Index.html)
*   [TSconfig 参考](https://docs.typo3.org/m/typo3/reference-tsconfig/master/en-us/)中记录的设置

**打字稿**

*   在后端设置：模板>信息/修改>设置
*   或者，例如使用 \TYPO3\CMS\Core\Utility\ExtensionManagementUtility::addStaticFile() 在 Extension 中设置（作为静态包含
*   在后端查看：模板 > TypoScript 对象浏览器
*   文档：[如何配置](https://docs.typo3.org/m/typo3/reference-typoscript/master/en-us/UsingSetting/Index.html)
*   记录在[TypoScript 参考中](https://docs.typo3.org/m/typo3/reference-typoscript/master/en-us/)

另请参阅“TYPO3 解释”中的[配置概述](https://docs.typo3.org/m/typo3/reference-coreapi/master/en-us/ApiOverview/Configuration/Index.html)

* * *

还，

*   section_frame 自 TYPO3 7.6 起已弃用：[https ://docs.typo3.org/c/typo3/cms-core/master/en-us/Changelog/8.6/Breaking-79622-SectionFrameForCSSStyledContentReplacedWithFrameClass.html](https://docs.typo3.org/c/typo3/cms-core/master/en-us/Changelog/8.6/Breaking-79622-SectionFrameForCSSStyledContentReplacedWithFrameClass.html)

# visual-studio-2012 - 添加到 TFS 2012 相关工作项列表

> ID：12212314
> 
> 赞同：4
> 
> 时间：2012-08-31T09:14:18.833
> 
> 标签：visual-studio-2012

有谁知道如何将查询添加到 TFS 挂起更改菜单中的相关工作项查询列表中？

目前只有两个，它们不是我们使用的过滤查询。

下面区域的屏幕显示

![在此处输入图像描述](../Images/4d23b4257313c5d100eeefda598a4f2f.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T13:06:30.563

我找到了 - 它在“工作项”部分下，然后您将查询添加到您的收藏夹

![在此处输入图像描述](../Images/137fed4805262b4028a94c50bd326ec0.png)

# python - 使用 PyObjC 编写一个独立于平台的 Python 应用程序

> ID：12212315
> 
> 赞同：0
> 
> 时间：2012-08-31T09:14:20.480
> 
> 标签：python, osx-mountain-lion, pyobjc

我正在编写一个独立于平台的 Python 应用程序。目前它在 Linux 和 OSX 上运行。但是，我想集成特定于平台的代码。更准确地说，我想使用原生通知系统（Growl、Mountain Lion 的通知中心、GNOME 通知）。

到目前为止，我设法集成了 GNOME 通知。就我使用 PyObjC 发送它们而言，Mountain Lion 通知工作正常。这是我遇到的一个大问题：

为了让 PyObjC 正常工作，我需要调用`AppHelper.runEventLoop()`. 否则，我可以发送通知，但我无法对单击通知或任何其他需要 Cocoa 库回调我的脚本的内容做出反应。但是由于我的应用程序应该是平台独立`AppHelper.runEventLoop()`的，这*不是*我想要的事件循环。我应该提到，尽管有通知，但我的应用程序不是 GUI 应用程序，实际上有它自己的事件循环。

我试图创建一个额外的线程来运行 Cocoa 事件循环，但没有成功。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-04T18:33:49.400

您应该查看使用 PyQt（使用 QApplication）处理此问题的方式：[http](http://en.wikibooks.org/wiki/Python_Programming/PyQt4) ://en.wikibooks.org/wiki/Python_Programming/PyQt4 。Qt 是一个可靠的跨平台框架，我通常建议将其用于此类开发。

如果您不适合使用 Qt，您可以从 NSRunLoop 以及您将用于 Windows 和 Linux 的任何内容创建自己的主循环抽象。

# javascript - Javascript nodejs异步调用需要收集

> ID：12212316
> 
> 赞同：0
> 
> 时间：2012-08-31T09:14:28.687
> 
> 标签：javascript, node.js

我正在使用 nodejs 的 tumblr 模块来访问 tumblr。有趣的是，我似乎是 javascript 和 nodejs 的新手。我需要以下概念的帮助。假设我打了这两个电话：

```
var someCrapArrayWhichINeedFilled = new Array();
tumblr.get('/posts/photo', {hostname: 'scipsy.tumblr.com', limit:3}, function(json){
                控制台.log(json);
                someCrapArrayWhichINeedFilled.push(json);
            });
tumblr.get('/posts/photo', {hostname: 'vulpix-bl.tumblr.com', limit:3}, function(json){
                控制台.log(json);
                someCrapArrayWhichINeedFilled.push(json);
            });

```

现在我知道回调是回调，它们会在触发时触发。所以问题是他们实际上是如何开火的。他们什么时候真正开火。我如何填充一个数组以便我可以使用它。

同样，我需要从两个不同的博客中拍摄三张照片，然后应该在我的网页上返回。我的服务器和客户端都在 javascript 中。因此，请告诉我正确的想法，它是如何在 javascript 世界中完成的，以及可以为此目的使用哪些库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:45:27.997

使用模块重写代码[`async`](https://github.com/caolan/async)，如下所示：

```
var async = require('async');

async.parallel([
    function (callback) {
        tumblr.get('/posts/photo', {hostname: 'scipsy.tumblr.com', limit:3}, function(json){
        console.log(json);
        callback(false, json);
    },
    function (callback) {
        tumblr.get('/posts/photo', {hostname: 'vulpix-bl.tumblr.com', limit:3}, function(json){
        console.log(json);
        callback(false, json);
    }
], function (err, someCrapArrayWhichIsAlreadyFilled) {
    //do work
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:33:34.360

这是我个人用于查询可变数量的“类型”（导致单独的查询）的请求。我计算请求的类型数量，收集查询响应并在它们全部收集后立即触发回调：

```
/**
 * @param payLoad -  Object, expected to contain:
 *   @subparam type - Array, required.
 *   @subparam location - Array, contains [lat,lng], optional
 *   @subparam range - Int, optional
 *   @subparam start - String, optional
 * @param cbFn - Function, callBack to call when ready collecting results.
 */
socket.on('map', function (payLoad, cbFn) {
    if (typeof cbFn === 'undefined') cbFn = function (response) {};
    var counter = 0,
        totalTypes = 0,
        resultSet = [];
    if (typeof payLoad.type === 'undefined' || !(payLoad.type instanceof Array)) {
        cbFn({error : "Required parameter 'command' was not set or was not an array"});
        return;
    }
    totalTypes = payLoad.type.length;

    /**
     * MySQL returns the results in asynchronous callbacks, so in order to pass
     * the results back to the client in one callBack we have to
     * collect the results first and combine them, which is what this function does.
     *
     * @param data - Object with results to pass to the client.
     */
    function processResults (data) {
        counter++;
        //Store the result untill we have all responses.
        resultSet.push(data);
        if (counter >= totalTypes) {
            //We've collected all results. Pass them back to the client.
            if (resultSet.length > 0) {
                cbFn(resultSet);
            } else {
                cbFn({error : 'Your query did not yield any results. This should not happn.'});
            }
        }
    }

    //Process each type from the request.
    payLoad.type.forEach(function (type) {
        switch (type.toLowerCase()) {
            case "type-a":
                mysqlClient.query("SELECT super important stuff;",
                    function selectCallBack (err, results) {
                        if (!err && results.length > 0) {
                            processResults({type : 'type-a', error : false, data : results});
                        } else {
                            processResults({type : 'type-a', error : "No results found"});
                        }
                    });
                break;
            case "type-b":
                mysqlClient.query('SELECT other stuff',
                    function selectCallBack (err, results) {
                        if (!err && results.length > 0) {
                            processResults({type : 'type-b', error : false, data : results});
                        } else {
                            processResults({type : 'type-b', error : "No results found"});
                        }
                    });
                break;
            default:
                processResults({type : type, error : 'Unrecognized type parameter'});
                break;
        }
    });
}); 
```

# c# - 卡桑德拉 get_range_slice

> ID：12212321
> 
> 赞同：2
> 
> 时间：2012-08-31T09:14:41.190
> 
> 标签：c#, java, c++, python, cassandra

当 get_range_slice 返回时，按什么顺序返回列？它是随机的还是创建列的顺序？最佳做法是遍历每一行的所有结果列并在使用该值之前比较列名，还是可以只索引返回数组？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:33:01.487

每行的列将按排序顺序返回，按列键排序，具体取决于您的比较器类型。行排序将取决于您的分区器，如果您使用随机分区器，行将以“随机”顺序返回。

在 Cassandra 中，每一行都可能有一组不同的列，因此您应该在使用值之前真正阅读列键。这将取决于您插入集群的数据。

# perl - Perl 脚本从特定行读取 csv 文件到文件末尾

> ID：12212325
> 
> 赞同：-4
> 
> 时间：2012-08-31T09:14:50.893
> 
> 标签：perl, csv, perl-module

我有一个`my.csv`包含以下内容的 CSV 文件：

```
abc,yyy

efg,zzz

zsc,vvv

uvw,ggg 
```

根据变量中的值，`$X`我需要从该特定值中读取直到文件结束。例如：

如果`$X = efg`，输出将是：

```
efg,zzz

zsc,vvv

uvw,ggg 
```

对于`$X = zsc`：

```
zsc,vvv

uvw,ggg 
```

这是我开发的脚本，它读取 CSV 文件的全部内容并显示它：

```
use strict;
use warnings;

open(my $data, '<', $file) or die "Could not open '$file' $!\n";

while (my $line = <$data>) {  
    chomp $line; 
    my @field = split "," , $line;
    print "$field[0] $field[1]";
} 
```

请帮我编写一个脚本来显示上述场景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:43:39.397

此解决方案将第 1 行跳过到匹配文本，`if (1 .. /\b$start_word\b/)`并将匹配文本中的所有行打印到文件末尾。

```
#!/usr/bin/perl
use strict;
use warnings;

my $start_word = 'efg';
my @data;

while (<DATA>) {
    chomp;
    if (1 .. /\b$start_word\b/) {
        #print if /\b$start_word\b/;
        @data = [split /,/] if /\b$start_word\b/;
    }
    else {
        #print;
        push @data, [split /,/];
    }
}

# Do something with @data

__DATA__
abc,yyy
efg,zzz
zsc,vvv
uvw,ggg 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:00:34.180

如果您只想打印第一个字段等于或大于指定值（例如`$X`）的行，请使用条件：

```
if ($field[0] >= $X) { 
    print ... 
} 
```

# ibm-midrange - 如何清除 IBM 中档机器上的作业日志

> ID：12212329
> 
> 赞同：1
> 
> 时间：2012-08-31T09:14:59.270
> 
> 标签：ibm-midrange, jobs

我们的 AS/400 上运行着作业，但随后我们的会话或作业随机结束。我们已经确定一个作业达到 maxim 作业消息，然后结束该作业。

有没有办法在作业运行时清除作业日志？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T14:37:54.840

将系统值设置为`QJOBMSGQFL`，`*WRAP`以便消息在填充时环绕到开头。

```
CHGSYSVAL SYSVAL(QJOBMSGQFL) VALUE(*WRAP) 
```

或者，您可以在特定的职位描述上进行更改。例如：

```
CHGJOBD JOBD(QDFTJOBD) JOBMSGQFL(*WRAP) 
```

[作业系统值：达到最大大小时](http://publib.boulder.ibm.com/infocenter/iseries/v7r1m0/topic/rzakz/rzakzqjobmsgqfl.htm)

# java - 如何用aspectj创建jar？蚀

> ID：12212330
> 
> 赞同：0
> 
> 时间：2012-08-31T09:14:59.933
> 
> 标签：java, eclipse, aspectj

我想创建支持 AspectJ 的 jar 文件。我的 manifest.mf（使用默认包）：

```
Manifest-Version: 1.0
Main-Class: gui
\n 
```

我在eclipse中添加了清单。我的错误：

```
exception in thread main java.lang.noclassdeffounderror org/aspectj/lang/signature
Caused by: java.lang.ClassNotFoundException: classpath
at java.net.URLClassLoader$1.run(Unknow Source)
at java.security.AccessController.doPrivileged(Native Method)
at java.net.URLClassLoader.findClass(Unknow Source)
at java.lang.ClassLoader.loadClass(Unknow Source)
could not find the main class: gui. Program will exit. 
```

我究竟做错了什么？对不起我的语言干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:16:25.907

将清单文件更改为

```
Manifest-Version: 1.0
Ant-Version: Apache Ant 1.8.2
Created-By: 1.6.0_11-b03 (Sun Microsystems Inc.)
Main-Class: gui
Class-Path: AspectJ.jar 
```

将此文件用作可执行 jar 的清单（[使用 jar 命令](http://docs.oracle.com/javase/tutorial/deployment/jar/build.html)）。

# iphone - 使用 SVGKit 加载 SVG 文件

> ID：12212332
> 
> 赞同：4
> 
> 时间：2012-08-31T09:15:22.033
> 
> 标签：iphone, ios, ipad, svg, rendering

我是 iOS 新手，我正在尝试使用 SVGKit 在我的应用程序中呈现 svg 文件。我想从 URL 加载 svg 文件，但无法正常工作。我收到以下错误：

> 线程 1：EXC_BAD_Access（代码 = 2，地址 =0x0）

在以下行：`NSLog(@"[%@] SVGKit Parse error: %@", [self class], *error);`在 SVGDocument.m 文件中。我尝试通过使用已经存在的 SVGPad 示例来实现从 URL 加载文件，该示例可以完美地加载图片，但不能从 URL 加载。我使用此代码从 URL 加载图片：

```
NSString *urlString = [NSString stringWithFormat:@"http://upload.wikimedia.org/wikipedia/commons/6/66/Blank_Map-Africa.svg"];
NSURL *url = [NSURL URLWithString:[urlString stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];
SVGDocument* svgDocument = [SVGDocument documentFromURL:url];
self.contentView = [[[SVGView alloc] initWithDocument:svgDocument] autorelease]; 
```

我还尝试使用以下代码创建和我的简单应用程序，该应用程序仅从本地文件加载十张简单图片：

```
SecondViewController *vc = [[SecondViewController alloc] init];
NSString* svgFilename = [@"/Users/XCode Projects/SVGLink/Beastie" stringByAppendingPathExtension:@"svg"];
SVGDocument *svgDocument = [SVGDocument documentWithContentsOfFile:svgFilename];
 vc.view = [[SVGView alloc] initWithDocument:svgDocument];
[self.window setRootViewController:vc]; 
```

我得到的只是这个错误：[SVGDocument] DEBUG INFO: set document viewBox = {{0, 0}, {340.961, 377.75}}

有人可以解释我在哪里犯错误吗？

我使用了这些版本的 SVGKit： [https ://github.com/SVGKit/SVGKit/](https://github.com/SVGKit/SVGKit/)

谢谢，莉莉

**编辑：**

这个 SVG 工具包版本[https://github.com/meric/SVGKit](https://github.com/meric/SVGKit)可以完美地从 url 链接加载 .svg 文件，但我仍然从文件中遇到解析错误，如脚本和其他无法识别的东西。UIWebView 中的相同文件完美显示。我想迁移到 SVG 解析器的唯一原因是，在旋转时 UIWebView 和 SVG 图形会降低几步，而我找不到修复该问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-04T16:35:30.293

# algorithm - 机器学习中的照片 OCR 算法

> ID：12212333
> 
> 赞同：1
> 
> 时间：2012-08-31T09:15:25.463
> 
> 标签：algorithm, machine-learning, ocr

我最近在 coursera 上学习了机器学习课程，并以不错的成绩通过了这门课程。我在课程中使用了 KNN、Logistic Regression、NN 等算法，其中一项任务是编写我能够完成的数字识别学习算法。课程以 Photo OCR 的案例研究结束，这让我非常兴奋，但我发现很难将课程中教授的基本算法应用到这个巨大的问题上。所以有人可以建议我一些关于 Photo OCR 的算法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:23:08.820

图像识别的问题在于它对任何变化都非常敏感。他们平均人脑能够从图像中提取某些特征，即使已经应用了某些图像操作（例如倾斜、旋转等），我们也可以识别给定的图像。

话虽这么说，据我所知，人工神经网络是使用最广泛的（投入一两个隐藏层通常也有帮助）。我听说过的另一种技术是 Wisard（或向导），但我找不到任何关于它的信息。这种技术基本上将图像分成多个部分，然后在将图像片段与您的知识库中的内容进行比较时，您可以获得一定百分比的相似性。

话虽这么说，如果我在你那里我会坚持使用神经网络加上一个像样的图形操作库，如 OpenCV（有各种包装器，包括 Java 和 C#）。目的是尽可能多地消除不需要的信息。例如，在某些情况下，将图像缩小为灰度或严格的黑白像素会有所帮助。

# c++ - 是否需要释放本地时间的内存？

> ID：12212339
> 
> 赞同：23
> 
> 时间：2012-08-31T09:15:44.107
> 
> 标签：c++, memory-management

```
void log(){
    time_t current = time(0);
    tm *ptm = localtime(&current);
        stuf...
} 
```

只是想确定一下-我是否需要在方法结束时释放 tm 指针分配的内存？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-31T09:16:54.607

不，你不应该释放它，结构是静态分配的。

检查**[文档](http://en.cppreference.com/w/cpp/chrono/c/localtime)**：

> **成功时返回**
> **指向静态内部`std::tm`对象**的值指针，`NULL`否则。该结构可以在 、 和 之间共享，`std::gmtime`并且可以在每次调用时被覆盖。`std::localtime``std::ctime`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-31T09:23:07.277

不，你不应该。该结构由函数`gmtime`和静态分配和共享`localtime`。每次调用这些函数中的任何一个时，都会覆盖此结构的内容。

所以要小心结果 - 例如立即复制它们并且不要存储指针。

# c++ - 如何解决在 C++ 标头中声明 typedef

> ID：12212340
> 
> 赞同：1
> 
> 时间：2012-08-31T09:15:47.977
> 
> 标签：c++, class, header, typedef

我想知道是否有人可以在不进行重组的情况下就解决这种情况的方法提出建议：我有一个包含类声明的标头，并声明了它通过引用/指针使用的许多类，与简单地包含相比，这显然是一种好习惯这些类的标题。

```
struct Foo;

struct Bar;

struct MyStruct
{
    void doIt( const Foo* foo );

    void doIt( const Bar* bar );
}; 
```

但是，虽然在上面的示例中 Foo 是一个类，但 Bar 实际上是一个类的 typedef，如下面的粗略示例所示：

```
#include <fd_ex.h>

struct Foo
{
   int a;
};

struct Bar_
{
   int a;
};

typedef Bar_ Bar; 
```

这会导致一些问题，因为预先声明`struct Bar`显然不正确 -`Bar`不是结构：

```
"fd_ex.cpp", line 13: Error: Multiple declaration for Bar.
"fd_ex.cpp", line 19: Error: The name Bar is ambiguous, Bar and Bar.
2 Error(s) detected. 
```

如果可能的话我不想暴露`Bar_`，主要是因为在现实生活中这可能比这个例子复杂得多。

但是，如果我**无法控制**struct 声明和 typedef for `Bar`，是否可以在标头中使用任何技术`MyStruct`来保持预先声明的精神`Bar`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:35:04.050

我不确定它在 C++ 中是否完全相同，但在 C 中，我经常声明“不透明”结构，它在头文件（比如说`mystruct.h`）中具有：

```
typedef struct MyStruct_ MyStruct;

// + function prototypes using MyStruct* 
```

然后我可以在`MyStruct`不知道它是什么的情况下使用指针，例如：`MyStruct *x;`，但不是`MyStruct x[3];`（因为编译后不知道 MyStruct 的大小）

然后在源文件中`mystruct.c`定义`struct MyStruct_`.

所以我认为你可以尝试替换：

```
class Bar; 
```

和：

```
typedef struct Bar_ Bar; 
```

（你可能只`typedef Bar_ Bar;`用 C++ 说）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T09:26:00.300

您可以转发声明结构本身：

```
struct Bar_;

typedef Bar_ Bar; 

class MyClass
{
  void DoIt( Bar* );
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T09:30:33.953

这应该可以解决问题：

```
struct Bar_;
typedef Bar_ Bar; 
```

# kissfft - 使用 C/ 中的倒谱概念和适当的输入麦克风进行 Kissfft 音高检测

> ID：12212345
> 
> 赞同：0
> 
> 时间：2012-08-31T09:15:59.637
> 
> 标签：kissfft

我现在是音频信号处理的初学者我正在尝试实现音高检测算法我发现了倒谱的一些步骤

```
result1 = IFFT(log(abs(FFT(Audio Input))))
peak = max(result);
out_frequency = 1/peak; // last step 
```

因此，我通过使用 Kissfft 和 portaudio 作为 FFT 和 IFFT 的库在 C 中实现这些算法。问题是在我得到 IFFT 结果并执行最后一步提取频率之后，结果不是我所期望的。（注。我通过在音符 A（440Hz）中唱歌来测试）

我不确定我是否错过了倒谱的最后一步，或者我做错了。

要测试的麦克风是我的笔记本电脑麦克风，我知道它是电容麦克风。我应该将麦克风更改为动态麦克风还是可以使用普通的 Labtop 麦克风

听到的是我一直在执行的代码

```
kiss_fft_cpx cin[FFT_SIZE];
kiss_fft_cpx cout[FFT_SIZE];
kiss_fft_cpx fftBins[FFT_SIZE];
for ( i = 0; i <FFT_SIZE; i++){
    cin[i].r = zero;
    cin[i].i = zero;
    cout[i].r = zero;
    cout[i].i = zero;
    fftBins[i].r = zero;
    fftBins[i].i = zero;
}
for(j=0;j < FFT_SIZE;j++){
    cin[j].r = *in++ ;
}
kiss_fftr_cfg fftConfiguration = kiss_fftr_alloc( FFT_SIZE, 0, NULL, NULL );
kiss_fftr_cfg ifftConfiguration = kiss_fftr_alloc( FFT_SIZE, 1, NULL, NULL );

// FFT...
kiss_fftr( fftConfiguration, (kiss_fft_scalar*)cin, fftBins );
for(i = 0; i<FFT_SIZE;i++){
    fftBins[i].i = log(fabs(fftBins[i].r));
    fftBins[i].r = zero;
}
// iFFT...
kiss_fftri( ifftConfiguration, fftBins, (kiss_fft_scalar*)cout );
double maxi = 0;
double maxr = 0;
for(i = 0; i<FFT_SIZE;i++){
    if(maxi<cout[j].i){
        maxi = cout[j].i;
    }
    if(maxr<cout[j].r){
        maxr = cout[j].r;
    }
}
printf("%f\t%f\n",maxi,maxr);
double result;
result = 1./maxr;
printf("result = %f\n",result);
free(fftConfiguration);
free(ifftConfiguration); 
```

看待

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T19:42:33.700

您正在创建一个复数数组 (kiss_fft_cpx)，然后将其用作真实数组 (kiss_fft_scalar)。您需要使用 Kiss_fft_scalar 将您的麦克风样本发送到 Kiss_fftr。

真正的 fft 返回 N/2+1 个复点。

计算幅度时不要忽略虚部。您可以使用 sqrt(re^2+im^2) 或跳过 sqrt 而不会影响倒谱的峰值。

需要根据 fft 大小和采样频率调整感兴趣的频率。

# asp.net-mvc-4 - Kendo UI 可编辑内联

> ID：12212347
> 
> 赞同：1
> 
> 时间：2012-08-31T09:16:04.917
> 
> 标签：asp.net-mvc-4, kendo-ui

我在剑道 UI 中遇到问题我使用 Razor 使用 GRID/INLINE EDITING，问题是当我单击编辑按钮时，Grid 中的文本框没有显示。这是我的代码

```
@(Html.Kendo().Grid(Model)    
.Name("LocalGS")    
.Columns(columns => {
    columns.Bound(p => p.Country_No).Title("Country No").Width(140);
    columns.Bound(p => p.Effective_date).Title("Effective Date").Format("{0:MM/dd/yyyy hh:mm tt}").Width(160);
    columns.Bound(p => p.Scale_Min).Width(140);
    columns.Bound(p => p.Scale_Max).Width(140);
    columns.Bound(p => p.Currency).Width(100);
    columns.Command(command => { command.Edit(); command.Destroy(); }).Width(200);
})
.ToolBar(toolbar => toolbar.Create())
.Editable(editable => editable.Mode(GridEditMode.InLine))
.Pageable()
.Sortable()
.Scrollable()
.DataSource(dataSource => dataSource        
    .Ajax()                 
    .Events(events => events.Error("error_handler"))
    .Model(model => model.Id(p => p.Country_No))
    .Create(update => update.Action("EditingInline_Create", "SaladEntry"))
    .Read(read => read.Action("KendoUIGrid", "SaladEntry"))
    .Update(update => update.Action("EditingInline_Update", "SaladEntry"))
    .Destroy(update => update.Action("EditingInline_Destroy", "Grid"))
) 
```

)

有人可以帮我吗，我在谷歌搜索解决方案，但我的问题没有答案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T11:44:09.383

检查您的所有 Kendo CSS 文件是否已就位并被调用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-01T08:41:07.780

检查模型属性是否为只读或没有设置器

# c++builder - c++ builder TClientWinSocket simbol 替换

> ID：12212352
> 
> 赞同：0
> 
> 时间：2012-08-31T09:16:16.960
> 
> 标签：c++builder, winsockets

我有以下问题。我必须通过 tcp/ip 向主机设备发送文本电报。电报应使用 0x1A (CTRL-Z) 字符终止。但是当我发送它时，主持人告诉我电报中有错误的符号。当我用 32 (0x20) 终止电报时，一切正常。我使用 WireShark 查看传输的数据，我看到当我发送 0x1A 时，它被 0x16 替换，当我发送 32 (0x20) 作为终止符时，它以某种方式被 0x1A 替换。

你能解释一下吗？

PS我正在使用c ++builder xe2在Windows 7上工作。

谢谢，弗拉基米尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-11T09:36:44.433

我找到了重点。:) c++ 中的所有转义序列都是基于八进制的。所以 032 是 0x1A 而不是 0x20。

# css - facebook facepile iframe的样式布局

> ID：12212353
> 
> 赞同：3
> 
> 时间：2012-08-31T09:16:19.583
> 
> 标签：css, facebook

我想知道是否可以设计 facebooks facepile iframe 的布局？理想情况下，我想将个人资料图片浮动到右侧，而不是将它们放在“1 朋友使用*_* ”文本下方？可以对此进行任何控制，还是您所见即所得？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-22T20:44:59.290

现在有可能，请在此处阅读：http: [//miklasnjor.com/en/2011/css-style-facebook-fanbox-fanpage-facepile-pagestream/](http://miklasnjor.com/en/2011/css-style-facebook-fanbox-fanpage-facepile-pagestream/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T12:24:34.040

Css 不能在 iframe 之外工作

这是出于安全原因。iframe src 的域与您的页面的域不同。因此禁止从外部访问 iframe 内容，例如每个 CSS 或每个 JavaScript

所以它是所见即所得（所见即所得）

# android - ImageButton 错误 onClick

> ID：12212355
> 
> 赞同：-1
> 
> 时间：2012-08-31T09:16:23.810
> 
> 标签：android, switch-statement, imagebutton

单击某些图像按钮并执行某些操作时，我正在调用函数 click() 。

```
public void onClick(View v)
{
    switch (v.getId()) {
    case R.id.btn_first_person:

        Log.i("utc","1st person");
        this.flip(R.id.btn_i);
        this.flip(R.id.btn_we);
        break;

    case R.id.btn_i:
        Log.i("utc","I clicked");
        this.change("I","play");
        break;

    case R.id.btn_we:
        Log.i("utc","We clicked");
        this.change("We","plays");
        break;

    default: Log.i("utc","default");
            Log.i("utc","asa" + v.getId());

    }
    } 
```

“btn_i”按钮工作正常，但是当我点击“btn_we”按钮时，它直接进入默认状态。不知道为什么？？

```
public void change(String person, String verb)
{
    txtUsageFirst=(TextView)findViewById(R.id.utc_usage_one);
    txtUsageSecond=(TextView)findViewById(R.id.utc_usage_two);
    txtUsageFirst.setText(person);
    txtUsageSecond.setText(verb);

} 
```

同样，当我在第一种情况下调用此翻转函数时 (btn_first_person) 发生错误，在 btnTemp=(Button) findviewbyid(r); 行 [logcat 不显示 "check","1" ]

```
public void flip(Integer r)
{
    Log.d("check","enetred flip");
    Log.d("check",r.toString());
    btnTemp=(Button) findViewById(r);
    Log.d("check","1");
    if(btnTemp.getVisibility()== View.VISIBLE)
    {
        Log.d("check","invisible now");
        btnTemp.setVisibility(View.GONE);
    }
    else
    {
        Log.d("check","visible now");
        btnTemp.setVisibility(View.VISIBLE);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:26:18.437

对于翻转功能，您将 ImageButton 转换为 Button，这可能会产生错误。

# c# - CvInvoke.cvMul 异常

> ID：12212356
> 
> 赞同：0
> 
> 时间：2012-08-31T09:16:26.807
> 
> 标签：c#, opencv, emgucv, matrix-multiplication

我正在尝试将基本矩阵与一列矩阵（二维齐次坐标）相乘，但出现以下错误：`CvException occurred - OpenCV: src1.size == dst.size && src1.channels() == dst.channels()`

代码如下所示：

```
IntPtr fundamentalMatrix = CvInvoke.cvCreateMat(3, 3, MAT_DEPTH.CV_32F);

[... finding the fundamental matrix ...]

IntPtr cam1PointRef = CvInvoke.cvCreateMat(3, 1, MAT_DEPTH.CV_32F);
IntPtr cam2PointRef = CvInvoke.cvCreateMat(3, 1, MAT_DEPTH.CV_32F);

//cam1Point is known
CvInvoke.cvSet2D(cam1PointRef, 0, 0, new MCvScalar(cam1Point.X));
CvInvoke.cvSet2D(cam1PointRef, 1, 0, new MCvScalar(cam1Point.Y));
CvInvoke.cvSet2D(cam1PointRef, 2, 0, new MCvScalar(1));

CvInvoke.cvMul(fundamentalMatrix, cam1PointRef, cam2PointRef, 1);

Matrix<float> cam2PointMat = new Matrix<float>(3, 1, cam2PointRef);

PointF cam2Point = new PointF();
cam2Point.X = cam2PointMat[0, 0] / cam2PointMat[0, 2];
cam2Point.Y = cam2PointMat[0, 1] / cam2PointMat[0, 2]; 
```

如果我像这样反转乘法顺序：`CvInvoke.cvMul(cam1PointRef, fundamentalMatrix, cam2PointRef, 1);`我得到另一个异常：

`OpenCV: The operation is neither 'array op array' (where arrays have the same size and the same number of channels), nor 'array op scalar', nor 'scalar op array'`

我做错了什么？为什么我不能将 (3 x 3) 矩阵与 (3 x 1) 矩阵相乘以获得对应点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T21:26:04.193

现在我没有我的电脑，但你应该使用 Matrix<,> 泛型类而不是旧的 cvinvoke 语法来简化它。使用矩阵类我从未发现矩阵运算有任何问题。

您的错误在于使用数组乘法方法对矩阵进行乘法运算；

> ***cvmul***
> 计算两个数组的每个元素的乘积 dst(I)=scale*src1(I)*src2(I) 所有数组必须具有相同的类型和相同的大小（或 ROI 大小）

```
public static void cvMul(
    IntPtr  src1,
    IntPtr  src2,
    IntPtr  dst,
    double  scale
) 
```

# c# - 使用 MD5 ComputeHash 时的 ObjectDisposedException

> ID：12212361
> 
> 赞同：7
> 
> 时间：2012-08-31T09:16:51.750
> 
> 标签：c#, hash, cryptography, md5, cryptographic-hash-function

我收到 ObjectDisposedException：安全句柄已关闭。

这是我的代码：

我正在尝试创建一个接口和实现类，它将使我能够获取一个字符串，将一个已知密钥附加到它，为该字符串和密钥计算 MD5 哈希，并返回计算出的哈希：

```
public interface ISignService
{
    string GetSignature(string str);
}

public class SignService : ISignService
{
    private readonly ISignSettings _signSettings;
    private readonly HashAlgorithm _hashAlgo;

    public SignService(ISignSettings signSettings)
    {
        _signSettings = signSettings;
        _hashAlgo = MD5.Create();
    }

    public string GetSignature(string str)
    {
        var strWithKey = str + _signSettings.EncryptionKey;

        var hashed = _hashAlgo.ComputeHash(Encoding.UTF8.GetBytes(strWithKey));

        return hashed.ToHexString();
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-01-16T01:07:15.673

您的代码不是线程安全的。`_hashAlgo`线程之间不能共享。请注意，您看到的异常并不是唯一可能导致的问题；我相信这个问题也可能导致不正确的哈希值。您需要`HashAlgorithm`每次都创建一个新对象，或者查看线程局部变量以为每个线程创建一个实例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-07T01:20:24.517

该代码似乎工作正常。问题可能是：

1.  对象在构造和使用之间是否被序列化和反序列化？如果是这样，将其`MDS.Create()`移至内部`GetSignature()`
2.  对象是否被处置（`SignService`或者`_hashAlgo`）？如果是这样，请不要在需要时处理或重新创建它。

# android - 组合列表和单选按钮和部分

> ID：12212362
> 
> 赞同：0
> 
> 时间：2012-08-31T09:16:52.343
> 
> 标签：android, radio-button

首先，我对 Android 完全陌生，所以我最大的问题是选择正确的组件。但是，必须完成工作，在您的帮助下，我将学习如何:)

我需要有两个部分标题、4 个项目和单选选择器，但带有绿色复选标记而不是标准单选按钮。

首先，项目始终存在，不可滚动，并且每个项目都会打开附加菜单以保存一些设置。

然后，Radio 还会给出单击 Button 时保存的三个选项之一。

我不知道如何开始，我应该实现片段还是在列表视图中设置它，或者只是在线性布局中。

特别是因为部分，据我所知，有部分意味着很多代码？

这是一张照片，请多多指教。

肿瘤坏死因子。![信息图像](../Images/b124a3580d981f81f633a9beb9ee8ea2.png)

# ios - 在哪个观点周期中将子视图添加到 UIView 子类的通用“经验法则”是什么？

> ID：12212372
> 
> 赞同：0
> 
> 时间：2012-08-31T09:17:49.440
> 
> 标签：ios, uiview, uitableview, uikit, subclass

在哪个观点周期中将子视图添加到 UIView 子类的通用“经验法则”是什么？

例如，如果您决定继承 UITableViewCell 类，您应该在哪个方法中将子视图添加到您的视觉层次结构中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:26:32.540

与我一起工作的其他开发人员，我通常`initWithFrame:`在`layoutSubviews`. 尽管有视图，我完全用笔尖布局，通常我的意思是无论如何都要保持固定大小。有时匆忙会胜出，我们在初始化程序中调整它们的大小，特别是对于我们不需要太多调整大小的视图。

可以这样想：您只需向视图层次结构添加一次。但是您可能需要多次重新定位和调整其大小。因此，您希望在共享该模式的方法中完成这些任务。`initWithFrame:`只会被调用一次，`layoutSubviews`很多次。

# svn - 颠覆结帐：有没有办法跳过子树？

> ID：12212375
> 
> 赞同：2
> 
> 时间：2012-08-31T09:17:57.140
> 
> 标签：svn, svn-checkout

我有一个包含大量目录和文件的仓库。对于scratchbuild，我只需要从根开始的树的一个子集。一些不需要的子树包含大量的文件，这些文件不需要用于临时构建。我玩过`--depth empty`只签出稀疏树的选项，但这既麻烦又倒退，因为我最终得到了我想要的目录白名单，而不是我不想要的目录黑名单。由于需要监视我可能需要进行临时构建的新目录，白名单方法变得更加复杂。

有没有办法**递归地表达 Checkout`dir`但跳过`dir/foo/bar/baz`而不`dir/frob/tweak`**跳过箍？类似于`-prune`谓词的东西`find(1)`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T14:05:56.323

Subversion 假定您需要整个目录树。有一种方法可以进行稀疏结帐，但它有点像一个循环机制：

首先，进行结帐并将其设置`--depth`为立即数：

```
 $ svn co --depth=immediates svn://localhost/myproject/trunk myproject-trunk 
```

这将立即检出根目录下的所有文件和目录。

接下来，您可以使用各种 shell 脚本魔术来`--set-depth`仅使用标志更新您想要的那些目录：

```
$ shopt -s extglob   #Needed on BASH, but not Kornshell
$ svn co --depth=immediates $REPO_URL
$ svn up --set-depth=infinity !(foo|frob) 
```

以上将检查除`foo`和之外的所有目录树`frob`。

你也可以做类似的事情`find`。

问题是 Subversion 非常简单，并且被设计成那样。在 Perforce 和 ClearCase 等其他版本控制系统中，您可以指定要检出的内容，在 Perforce 中，指定检出的方式。

但是，这需要您设置一个*视图*，这使得使用这些版本控制系统变得更加复杂。我喜欢 Perforce。它快速而强大，但开发人员讨厌它，因为它需要*视图*。对他们来说，它增加了一种复杂性，实际上并没有给他们带来太多好处。他们很少需要进行稀疏结帐。

如果这是您的 Subversion 存储库的常见问题，您可能需要重新考虑您的布局以使其更方便。这在 Subversion 中并不太难，因为整个存储库只是一个包含分支和标签的文件树。很多时候我们决定放弃一个*主干*并用一个特定的分支替换它，或者重命名和重组我们的存储库以使其更易于使用。

请务必与您的开发人员协调任何大规模重组。如果您移动他们正在处理的目录树，他们会突然发现他们无法提交更改（大多数情况下，他们可以`svn switch --relocate`解决这个问题。但是，我的经验是开发人员宁愿签入他们的东西，并从一个干净的结帐开始。

# java - Eclipse 在构建路径中找不到现有项目

> ID：12212376
> 
> 赞同：2
> 
> 时间：2012-08-31T09:18:02.367
> 
> 标签：java, eclipse, build, path

这可能是 Eclipse 的特性之一及其对构建路径的处理，尽管到目前为止测试了各种变通方法，但仍无法修复。

该问题与几个项目的工作区有关，每个项目都编译成自己的 JAR。

通过将相关的项目添加到构建路径（不`Maven`使用或使用其他外部工具或插件）来解决项目之间的依赖关系，通过

```
Project -> Properties -> Java Build Path -> Projects 
```

在所有这些项目中，有几个（比如，`com.example.p1`和`com.example.p2`）拒绝承认第三个（也是简单的）（比如，`com.example.p3`），而所有其他项目都这样做。因此，虽然 P3 已添加到构建路径中，但 P3 中的所有相关类都已正确导入，并且每个此类的源代码都可以通过点击来访问`F3`，Eclipse 一直在抱怨

```
The import com.example.p3 cannot be resolved 
```

和

```
SomeClass cannot be resolved to a type 
```

`com.example.p3.SomeClass`P3课程之一在哪里。

如果我将其编译后的 JAR 放在构建路径中，而不是 P3 项目，问题就会消失。但是，P3 中的代码经常更改，并且不断编译和刷新工作区以便获取更改是浪费时间，更不用说这不应该在 IDE 中发生（而且对于其他使用P3，在同一个 Eclipse 工作区中）。

我试过了：

*   删除并再次添加 P1、P2、P3

*   清理并重新编译所有内容

*   检查是否有任何其他项目加载了 P3 JAR

*   将 P3 放在 Eclipse 构建路径“Order and Export”列表的顶部

*   使用 Eclipse 的“修复项目设置”建议（将鼠标悬停在红色下划线错误编译行上时可用）。实际上，此选项提供了将 P3 或其 JAR 添加到构建路径，但如果添加了 P3，问题会再次出现。

`.classpath`使用 P3 源（不是 JAR）时，P1 和 P2 中的文件与所有其他项目相同，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<classpath>
    <classpathentry kind="src" output="classes" path="src"/>
    <classpathentry kind="var" path="JRE_LIB" sourcepath="JRE_SRC"/>
    <classpathentry kind="lib" path="<JAR_path/JAR_file>"/> 
    ... // Multiple other JAR files
    <classpathentry combineaccessrules="false" kind="src" path="/p3/">
    <classpathentry kind="output" path="bin"/>
</classpath> 
```

对于工作区中的所有项目，这些`.project`文件也是相同的。

有任何想法吗？

# python - 在python的文本文件中查找模式

> ID：12212379
> 
> 赞同：-1
> 
> 时间：2012-08-31T09:18:22.257
> 
> 标签：python, python-2.7

我有一个*文本文件*，比如说

```
1: 0,0,0,122
2: 2,0,3,333
3: 0,0,0,23 
```

等等。我需要在文本文件中找到“0,0,0”模式并打印除包含给定模式的行之外的所有行。请谁能告诉我**python**中的**代码**。

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T09:26:51.883

一个健壮的方法是这样的：

```
import re
pattern = re.compile(r'0\s*,0\s*,0\s*')
with open(filename) as f:
    for line in f:
            if pattern.search(line):
                    print line 
```

这样，如果您有一行有一些空间，它就会被跳过（例如“0, 0,0”而不是“0,0,0”）。

但是如果你确定不会有这样的事情，或者如果你想完全匹配“0,0,0”[无空格]，那么你可以避免使用`re`模块而只使用`in`运算符：

```
with open(filename) as f:
    for line in f:
            if '0,0,0' not in line:
                    print line 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:20:58.547

```
for line in textfile.split('\n'):
    if '0,0,0' not in line:
        print line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:21:23.263

使用[上下文管理器](http://effbot.org/zone/python-with-statement.htm)打开文件。逐行遍历文件。如果您的模式没有出现在该行中，请打印该行：

```
filename = 'textfile.txt'
pattern = '0,0,0'

with open(filename) as f:
    for line in f:
        if pattern not in line:
            print line 
```

未经测试，但应该可以工作。**

# android - 通知取决于 Android 版本？

> ID：12212382
> 
> 赞同：0
> 
> 时间：2012-08-31T09:18:30.297
> 
> 标签：android, notifications, android-4.2-jelly-bean

随着新的 Android Jelly Bean 出现通知区域的新工具。想知道我的旧应用程序是否可以验证用户系统并设置通知取决于它 4.1 或更低版本？

感谢您的任何好主意:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:32:07.057

可以使用具有向后兼容性的新通知 API。请参阅以下链接：

[http://developer.android.com/reference/android/support/v4/app/NotificationCompat.html](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.html)

[http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html](http://developer.android.com/reference/android/support/v4/app/NotificationCompat.Builder.html)

# random - CURAND 使用相同的种子生成不同的随机数

> ID：12212384
> 
> 赞同：2
> 
> 时间：2012-08-31T09:18:34.950
> 
> 标签：random, cuda

我正在使用 CURAND 库在 CUDA 中编写随机生成代码。我读到的关于随机生成的内容让我相信，如果我使用相同的种子，我将得到相同的随机数集。但是当我测试它时，情况并非如此。请解释我做错了什么。我粘贴下面的代码以供参考：

* * *

```
 curandGenerator_t rand_gen;  
    status = curandCreateGenerator (&rand_gen ,CURAND_RNG_PSEUDO_DEFAULT );  
    if(status != CURAND_STATUS_SUCCESS){  
            printf("Error encountered in generating handle\n");  
    }  
    status = curandSetPseudoRandomGeneratorSeed (rand_gen ,1234ULL);  
    if(status != CURAND_STATUS_SUCCESS){  
            printf("Error encountered in setting seed\n");  
    }  

    for(j=0; j<2; j++){  
            status = curandGenerate(rand_gen,a_d,N);  
            if(status != CURAND_STATUS_SUCCESS){  
                    printf("Error encountered in generating random numbers\n");  
             }

            cudaMemcpy ( a_h , a_d , N * sizeof(unsigned int),cudaMemcpyDeviceToHost);  
            for(i = 0; i < N; i++){  
                    printf("%d : %u\n",i,a_h[i]);  
            }
            printf("-----------%d----------------------\n",j);  
    }  
    status = curandDestroyGenerator(rand_gen);  
    if(status != CURAND_STATUS_SUCCESS){  
            printf("Error encountered in destroying handle\n");  
    } 
```

* * *

输出：

0：624778773
1：3522650202
2：2363946444
3：3：326286439
4： 3：326286439 4：3：
3732235839 7：
3382235839
7：322599309
8： 1225999309
8 ：
1225999208 - - - - - - - - - ------ 4
：2220575578 _ _ _ _ _ _ _ _ ------1------------------------

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T20:17:18.870

有一个伪随机生成器的“状态”概念。例如，Mersenne twister 的状态大小约为 1024 个字，而默认的 XORWOW 的状态大小只有几个字（但它的周期也小得多）。

每当您调用“setPseudoRandomGeneratorSeed”时，您都会初始化生成器的状态。然后随着对 curandGenerate 的后续调用，该状态将被更新（即从一个随机数变为下一个，需要重新计算该状态），因此将生成随机序列的不同部分。

您还可以尝试使用驱动程序 API - 这里 curandInit() 初始化每个线程的状态，这可能非常昂贵。然后对 curand() 或 curandUniform() 等的后续调用将重用此状态。实际上每个线程都从一个随机序列的不同偏移量开始

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2019-02-26T00:02:33.393

线程的调用是非常随机的，所以即使种子设置在主机上，每次运行都会产生不同的序列。

# c++ - 32位操作系统下检测处理器是否为64位

> ID：12212385
> 
> 赞同：6
> 
> 时间：2012-08-31T09:18:39.957
> 
> 标签：c++, 64-bit, x86-64, 32-bit

通常，x86-64 架构提供与 x86 的兼容性。32 位 Windows（或其他操作系统）可以在 x86-64 处理器上运行。（如果我错了，请纠正我）。

我想知道 32 位 Windows 是否有可能（在 C++ 中）知道底层处理器是否为 64 位。例如，如果 Windows 7 32 位在 Core i5 上运行，我们应该能够知道处理器是 64 位的（尽管 Windows 7 32 位正在运行）。

您可能会质疑即使处理器是 64 位并且操作系统是 32 位，64 位进程也无法运行的要求（如果我错了，请纠正我）。但是程序的目的是了解处理器，而不是操作系统。 [这个问题](https://stackoverflow.com/questions/9816282/32-bit-operating-system-but-x64-processor)可能看起来与此类似，但它没有给出任何 C++ 程序的提示。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-31T09:48:18.363

这不是 C++ 解决方案，但它似乎在 C# 中工作。
但是应该很容易转换为 C++，因为关键点在 API 结构[SYSTEM_INFO](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724958%28v=vs.85%29.aspx)和 API [GetNativeSystemInfo()](http://msdn.microsoft.com/en-us/library/windows/desktop/ms724340%28v=vs.85%29.aspx)

首先是对获取信息的 API 的引用

```
[DllImport("kernel32.dll")]
public static extern void GetNativeSystemInfo
              ([MarshalAs(UnmanagedType.Struct)] ref SYSTEM_INFO lpSystemInfo); 
```

然后是结构 SYSTEM_INFO 和 _PROCESSOR_INFO_UNION

```
[StructLayout(LayoutKind.Sequential)]
public struct SYSTEM_INFO
{
    internal _PROCESSOR_INFO_UNION uProcessorInfo;
    public uint dwPageSize;
    public IntPtr lpMinimumApplicationAddress;
    public IntPtr lpMaximumApplicationAddress;
    public IntPtr dwActiveProcessorMask;
    public uint dwNumberOfProcessors;
    public uint dwProcessorType;
    public uint dwAllocationGranularity;
    public ushort dwProcessorLevel;
    public ushort dwProcessorRevision;
}

[StructLayout(LayoutKind.Explicit)]
public struct _PROCESSOR_INFO_UNION
{
    [FieldOffset(0)]
    internal uint dwOemId;
    [FieldOffset(0)]
    internal ushort wProcessorArchitecture;
    [FieldOffset(2)]
    internal ushort wReserved;
} 
```

现在是一个枚举来简化调用本机 API 的代码和方法

```
public enum ProcessorArchitecture
{
    Unknown = 0,
    Bit32 = 1,
    Bit64 = 2,
    Itanium64 = 3
}

static public ProcessorArchitecture ProcessorBits
{
    get
    {
        ProcessorArchitecture pbits = ProcessorArchitecture.Unknown;
        SYSTEM_INFO l_System_Info = new SYSTEM_INFO();
        GetNativeSystemInfo(ref l_System_Info);

        switch (l_System_Info.uProcessorInfo.wProcessorArchitecture)
        {
            case 9: // PROCESSOR_ARCHITECTURE_AMD64
                pbits = ProcessorArchitecture.Bit64;
                break;
            case 6: // PROCESSOR_ARCHITECTURE_IA64
                pbits = ProcessorArchitecture.Itanium64;
                break;
            case 0: // PROCESSOR_ARCHITECTURE_INTEL
                pbits = ProcessorArchitecture.Bit32;
                break;
            default: // PROCESSOR_ARCHITECTURE_UNKNOWN
                pbits = ProcessorArchitecture.Unknown;
                break;
        }
        return pbits;
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T09:46:17.123

好吧，据我所知，您只能通过查看 CPU 信息本身来获得此信息。[我认为检查 CPU 是否支持长模式](http://en.wikipedia.org/wiki/Long_mode)应该足够了（对于 x86 和 amd64）。

为此，您可以使用`cpuid`x86 上的指令。根据您帖子的 Windows 特性，我猜您正在使用 Microsoft C++ 编译器。为此，有一个[`__cpuid`内在](http://msdn.microsoft.com/en-us/library/hskdteyh(v=vs.80).aspx)的. 可悲的是，微软页面上的描述以`PBE`flag 结尾，而`lm`我的 cpuinfo 中的 flag 在三个 flag 之后。

查看[AMD 处理器的 CPUID 修改](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538541(v=vs.85).aspx)，您可以得到`LM`，`InfoType = 0x80000001`结果位于最后返回的整数的第 29 位。在[Intel 处理器的 CPUID 修改中](http://msdn.microsoft.com/en-us/library/windows/hardware/ff538549(v=vs.85).aspx)，相同的位指定`EM64T`了等效于 AFAIK 的标志。

在这两种情况下，您都应该`InfoType = 0x80000000`首先获得最大的有意义的`InfoType`价值。如果它小于`0x80000001`，那么您不应该进行上述检查，而是假设不支持长模式。

# mysql - 如何在mysql的外键约束中允许0？

> ID：12212394
> 
> 赞同：2
> 
> 时间：2012-08-31T09:18:59.480
> 
> 标签：mysql, null, foreign-keys, primary-key, zero

假设我有一个下表：

```
UID int (11) not null,  FOREIGN KEY (UID) REFERENCES users(ID),
OID int (11),  FOREIGN KEY (OID) REFERENCES orders(ID),
primary key(UID,OID) 
```

注意主键。

而且，我想允许`NULL`每个用户 ID (UID) 有一个顺序 ID (OID)。

虽然在设置主键后它会自动生成我的 OID 字段`NOT NULL`。

作为一种解决方法，我正在考虑存储`0`而不是将其标记为不相关的字段。

`references`那么，现在的问题是，除了指定字段之外，是否可以允许外键约束也接受零（0） ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:26:53.573

一种选择是使用“代理主键”而不是您当前的 PK，而是`UNIQUE`对以下复合（UID，OID）施加约束 - 前提是您愿意拥有代理主键 - 就像身份列

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:22:39.560

我认为这在 MySQL 中是不可能的，但解决方法可能是在引用外部表时插入一个值为 0 的虚拟条目。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:26:12.513

`UNIQUE KEY`在这种情况下可以使用约束：

```
CREATE TABLE users (id int not null, primary key (id));
INSERT INTO users VALUES (1), (2), (3);

CREATE TABLE orders (id int not null, primary key (id));
INSERT INTO orders VALUES (1), (2), (3);

CREATE TABLE users_orders (uid int NOT NULL, oid int DEFAULT NULL,
                 FOREIGN KEY (uid) REFERENCES users (id),
                 FOREIGN KEY (oid) REFERENCES orders (id),
                 UNIQUE KEY (uid, oid));

INSERT INTO users_orders (uid) VALUES (1); 
```

这是一个可以玩[的演示。](http://sqlfiddle.com/#!2/1540f/3)

但请注意，您（可能）仍然可以在您的表中插入多个组合`specific UID - NULL`（我假设您在这里使用`InnoDB`）。例如，这个查询...

```
INSERT INTO users_orders o (uid) VALUES (1), (1); 
```

...也会成功（因为它不会破坏任何现有的约束）。

如果这应该被严格禁止，你最好在表和表中*都*使用一些虚拟值——以使你的交集表中的约束可用。`users``orders``foreign key`

作为旁注，我承认我对这种情况有点惊讶。交集表通常设计为没有任何可为空的字段：例如，查询中的 LEFT（或 RIGHT）JOIN 应该用于包含没有任何订单的用户。您能否解释一下为什么第一手选择了这个决定（使 OID 可以为空）？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:30:05.400

尝试使用唯一键。它允许使用 NULL 值。

# extjs - ExtJs - TreePanel 的扩展路径不起作用

> ID：12212396
> 
> 赞同：0
> 
> 时间：2012-08-31T09:19:07.377
> 
> 标签：extjs, tree, extjs4.1, expand, treepanel

我的 Treepanel 有 id 'treePanel' 并且工作得很好。

示例路径：

```
/subfolder3/abc 
```

`expandAll()`使用树面板扩展所有内容但`expandPath()`不起作用。

现在，在某些事件之后，我想在我的树中扩展一条路径。但是我做不到。

到目前为止，我已经尝试过：

```
var oTreePanel = Ext.getCmp('treePanel');

oTreePanel.expandPath('/subfolder3/abc'); // or '/subfolder3' or '/root/subfolder3' 
```

没有错误消息，但树中也没有变化。

该怎么办？

**编辑**

`oTreePanel.selModel.getSelection()[0].getPath()`是`/root/`。

我尝试了什么：

*   path: `/root`=> `success`is `true`and`node`说`node.data.id=""`and`node.data.path=""`

*   path: `/root/`=> `success`is `true`and`node`表示`node.data.id=""`and `node.data.path="/report_with_variables"`(树中的第一个节点) and`node.data.parentId= "root"`

*   path: `/root/subfolder3`to the path : `success`is `false`and `node`say `node.data.id=""`and `node.data.path=""`is`node.getPath()``/root`

我对树的 Json 响应如下所示：

```
{"status":{"status":0,"msg":"Ok","protocolversion":"extjs.json"},"value":{"name":"","path":"\/","type":"folder","leaf":false,"children":[{"name":"report_with_variables","path":"\/report_with_variables","type":"report","leaf":true,"title":"Report ohne Variablen","description":null},{"name":"subfolder1","path":"\/subfolder1","type":"folder","leaf":false},{"name":"subfolder2","path":"\/subfolder2","type":"folder","leaf":false},{"name":"subfolder3","path":"\/subfolder3","type":"folder","leaf":false},{"name":"testreports","path":"\/testreports","type":"folder","leaf":false}]}} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:25:51.030

`expandPath`工作正常，尝试验证您尝试扩展的路径。默认情况下，路径在节点的模型`idProperty`字段上构建，它是`id`模型数据中的属性，可能与您在示例中尝试使用的不同。

1.  验证路径和节点的 id
2.  尝试以下列格式运行 expandPath：

    `tree.expandPath(path, null, null, function(success, node) { //analyse method execution
    });`

    所以你可以分析回调函数中发生了什么：

    *   如果成功为假且节点为空，则路径为空

    *   如果成功为假且节点=根节点，则路径一开始就无效

    *   如果成功为假且节点不是根，则路径部分无效

3.  尝试使用`getPath()`方法获取树中某个节点的路径，然后使用获得的路径`expandPath`：

    `var n = node.getPath(); tree.expandPath(path);`

    它应该工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T17:24:50.800

我遇到了同样的问题，在我的情况下，expandPath 的回调从未被调用过。

原因是树存储在调用 expandPath 方法时仍在加载先前的请求。在调用 expandPath 之前，确保您的 tree.store 没有加载。

也许这可以帮助您和/或其他人。

# linux - Linux startx qt边框

> ID：12212397
> 
> 赞同：0
> 
> 时间：2012-08-31T09:19:13.077
> 
> 标签：linux, qt, xorg

我正在使用下一个命令运行我的程序，`startx -e qtapp`. 但是所有对话框窗口都显示没有边框。如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:23:53.727

您需要运行 WindowManager 以允许使用 windows 管理您的应用程序。一个轻量级的尝试是 OpenBox。

与其将应用程序作为 startx 的参数启动，不如使用 .xinitrc 来启动应用程序。您必须最后启动窗口管理器 - 然后它控制何时退出 X。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:50:19.440

您可以走 bazwilliams 的路线，也可以绘制自己的边框/窗口控件。这会很好，但坚持下去会很痛苦。

# php - 比较PHP中的IP地址

> ID：12212400
> 
> 赞同：0
> 
> 时间：2012-08-31T09:19:21.367
> 
> 标签：php, network-programming, ip

这是我的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>
<?php

    class visitors
    {
        static $i;
        function __construct()
        {
            $this->checkIp();
        }
        function createFile()
        {
            $fp=fopen("visit.txt","a+");
            if($fp)
            {
            echo "<br /> File created";
            return $fp;
            }
            else
            {
                echo "File creation Error Check permissions";
                exit;
            }
        }
        function fetchIp()
        {
            $ip=$_SERVER['REMOTE_ADDR'];
            //$ip=ip2long($ip);
            return $ip;
        }
        function writeFile()
        {
            $fp=$this->createFile();
            $ip=$this->fetchIp();
            //echo $ip;
            $space="\r\n";
            fwrite($fp,$ip.$space);
            //self::$i++;
            //echo self::$i;

        }
        function checkIp()
        {
            $fp=$this->createFile();
            $ip=$this->fetchIp();
            while(!feof($fp))
            {
                $data.=fgets($fp);
            }
            $uip=explode("\r\n",$data);
            foreach($uip as $key)
            {
                if(strpos($key,$ip)!==0)
                {
                    $this->writeFile();
                }

            }
        }

    }
    $v=new visitors();
    ?>
    </body>
    </html> 
```

我正在尝试将每个访问者的 ip 地址存储在一个文本文件中，如果同一个访问者第二次来，他的 ip 将被写入文本文件。为了实现这一点，我读取了文件并与当前 ip 进行比较，如果他们是一样的，它不调用写入函数。问题是一切正常，但文件每次都在换行符中使用相同的 ip 写入。比较部分失败。请帮我解决这个问题。留下静态 i 变量部分。我有评论说，所以没问题。谢谢。

注意：我已经阅读[了在 PHP 中将 IP 地址与通配符进行比较的优化方法？](https://stackoverflow.com/questions/7613002/an-optimized-method-to-compare-ip-addresses-with-wildcards-in-php)并从中得到了 strpos 的想法。在此之前我使用了 ip2long 和 long2ip 但它也导致了同样的错误。我还从[这里](http://php.net/manual/en/language.types.integer.php)阅读了 PHP 不支持无符号整数。这会影响我的比较操作，因为 ip 地址是无符号的 32位整数。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:23:19.240

不需要每次都循环，用[stristr()](http://uk.php.net/stristr)看看IP 有没有就可以了。

改变功能

```
 function checkIp()
    {
        $fp=$this->createFile();
        $ip=$this->fetchIp();
        while(!feof($fp))
        {
            $data.=fgets($fp);
        }
        $uip=explode("\r\n",$data);
        foreach($uip as $key)
        {
            if(strpos($key,$ip)!==0)
            {
                $this->writeFile();
            }

        }
    } 
```

和

```
 function checkIp()
    {
        $fp=$this->createFile();
        $ip=$this->fetchIp();
        while(!feof($fp))
        {
            $data.=fgets($fp);
        }
        if(!stristr($data, $ip)){
            $this->writeFile();
        }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:25:43.847

记住 ip 的常用方法是将它们存储在数据库中。这样，您始终可以记录他们的 ip，如果您愿意，还可以记录更多。=)

祝你好运

# android - 检查安卓版本

> ID：12212401
> 
> 赞同：2
> 
> 时间：2012-08-31T09:19:22.577
> 
> 标签：android, version

> **可能重复：**
> [以编程方式检索 Android API 版本](https://stackoverflow.com/questions/3423754/retrieving-android-api-version-programmatically)

我需要运行应用程序 api 级别的手机是否为 14，即 android 4.0 或更高版本（例如 api levcel 15）然后 startActivity ...否则如果 api 级别低于 14（例如 13），则 startActivity ...

```
 String AndroidVersion = android.os.Build.VERSION.RELEASE;
                if ( AndroidVersion == 4.0 ) {
                    Intent start = new Intent(S.this, Menu.class);
                    startActivity(start);                       
                }
                else {
                    Intent startt = new Intent(S.this, Menu2.class);
                    startActivity(startt);
                } 
```

怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:28:20.500

使用`SDK_INT`而不是`RELEASE`. 所以你的代码看起来像：

```
Intent intent;
if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.ICE_CREAM_SANDWICH) {
  intent = new Intent(S.this, Menu.class);
} else {
  intent = new Intent(S.this, Menu2.class);
}

try {
  startActivity( intent );
} catch( Exception e ) {
  e.printStackTrace();
} 
```

[此处列出了](http://developer.android.com/reference/android/os/Build.VERSION_CODES.html)所有 SDK 代码。请注意始终从 startActivity() 捕获可能的异常；它不会受到伤害（即使在您的应用程序中 - 您在开发时总是会忘记向 Manifest 添加活动），这是一个好习惯，可以防止您的应用程序崩溃，同时在日志中提供有用的信息

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:30:05.390

比较整数版本更清晰，并使用 >= 以实现未来兼容性

```
if (android.os.Build.SDK_INT >= android.os.Build.VERSION_CODES.ICE_CREAM_SANDWICH) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:30:34.117

这会做！

```
 if ( Build.VERSION.SDK_INT == 4 ) {
            Intent start = new Intent(S.this, Menu.class);
            startActivity(start);                       
        }
        else {
            Intent startt = new Intent(S.this, Menu2.class);
            startActivity(startt);
            } 
```

# c# - 我可以将多个查询字符串值映射到单个控制器（对象）参数吗？

> ID：12212407
> 
> 赞同：2
> 
> 时间：2012-08-31T09:19:30.140
> 
> 标签：c#, asp.net-web-api, query-string, model-binding

我正在构建一个 ASP.NET Web API REST 服务。

我必须处理的调用（URL）由另一方修复，并且有许多查询字符串参数。

与其让我的控制器采用十几个参数，有什么方法可以将查询参数映射到一个对象并将其传递给控制器​​？

我知道我可以通过 GetQueryNameValuePairs 在控制器中访问它们，但我想知道是否有办法以这种方式使用数据绑定。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:28:02.590

是的，

定义一个模型，例如：

```
public class InputModel
{
    public string Param1 { get; set; }
    public string Param2 { get; set; }
} 
```

然后调整你的动作：

```
public HttpResponseMessage Put(InputModel model) { ... } 
```

很像 MVC，API 控制器支持*模型绑定*，有一个基础设施来处理这个，它本身是可扩展的。我会在谷歌上搜索 ASP.NET MVC 模型绑定的示例。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-01T16:02:17.577

将模型对象传递给控制器​​时，ASP.NET Web API 似乎需要使用 [FromUri]。例如：

```
public HttpResponseMessage Post([FromUri] MyModel model) { ... } 
```

有关详细信息，请参阅此[MSDN 博客文章](http://blogs.msdn.com/b/jmstall/archive/2012/04/16/how-webapi-does-parameter-binding.aspx)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:02:13.270

我会简单地创建一个查询字符串解析器：

```
protected IDictionary<string, string> GetQueryParameters(string queryString)
{
    var retval = new Dictionary<string, string>();
    foreach (var item in queryString.TrimStart('?').Split(new[] {'&'}, StringSplitOptions.RemoveEmptyEntries))
    {
        var split = item.Split('=');
        retval.Add(split[0], split[1]);
    }
    return retval;
} 
```

然后从控制器调用：

```
public class DummyController : ApiController
{
    [HttpGet]
    public string SayHello(string name="")
    {
        var q = GetQueryParameters(Request.RequestUri.Query);

        return string.Format("Hello {0}", name);
    }
} 
```

# scripting - WinSCP - 如何识别文件是否成功传输

> ID：12212411
> 
> 赞同：2
> 
> 时间：2012-08-31T09:19:40.697
> 
> 标签：scripting, sftp, winscp

我正在使用 WinSCP 通过 SFTP 自动上传文件。我在1级开启了debug log，能查到文件是否上传成功吗？谢谢你。

部分日志文件：

```
. 2012-08-30 15:30:06.539 File: "C:\files\file_20120830.gpg"
. 2012-08-30 15:30:06.539 Copying "C:\files\file_20120830.gpg" to remote directory started.
. 2012-08-30 15:30:06.539 Binary transfer mode selected.
. 2012-08-30 15:30:06.539 Checking existence of file.
> 2012-08-30 15:30:06.539 Type: SSH_FXP_LSTAT, Size: 50, Number: 263
. 2012-08-30 15:30:06.539 Sent 54 bytes
. 2012-08-30 15:30:06.539 There are 0 bytes remaining in the send buffer
. 2012-08-30 15:30:06.539 Waiting for another 4 bytes
. 2012-08-30 15:30:06.555 Detected network event
. 2012-08-30 15:30:06.555 Received 33 bytes (0)
. 2012-08-30 15:30:06.555 Read 4 bytes (29 pending)
. 2012-08-30 15:30:06.555 Read 29 bytes (0 pending)
< 2012-08-30 15:30:06.555 Type: SSH_FXP_STATUS, Size: 29, Number: 263
< 2012-08-30 15:30:06.555 Status code: 2
. 2012-08-30 15:30:06.555 Checking existence of partially transfered file.
> 2012-08-30 15:30:06.555 Type: SSH_FXP_LSTAT, Size: 59, Number: 519
. 2012-08-30 15:30:06.555 Sent 63 bytes
. 2012-08-30 15:30:06.555 There are 0 bytes remaining in the send buffer
. 2012-08-30 15:30:06.555 Waiting for another 4 bytes
. 2012-08-30 15:30:06.570 Detected network event
. 2012-08-30 15:30:06.570 Received 33 bytes (0)
. 2012-08-30 15:30:06.570 Read 4 bytes (29 pending)
. 2012-08-30 15:30:06.570 Read 29 bytes (0 pending)
< 2012-08-30 15:30:06.570 Type: SSH_FXP_STATUS, Size: 29, Number: 519
< 2012-08-30 15:30:06.570 Status code: 2
. 2012-08-30 15:30:06.570 Opening remote file.
> 2012-08-30 15:30:06.570 Type: SSH_FXP_OPEN, Size: 75, Number: 771
. 2012-08-30 15:30:06.570 Sent 79 bytes
. 2012-08-30 15:30:06.570 There are 0 bytes remaining in the send buffer
. 2012-08-30 15:30:06.570 Waiting for another 4 bytes
. 2012-08-30 15:30:06.586 Detected network event
. 2012-08-30 15:30:06.586 Received 31 bytes (0)
. 2012-08-30 15:30:06.586 Read 4 bytes (27 pending)
. 2012-08-30 15:30:06.586 Read 27 bytes (0 pending)
< 2012-08-30 15:30:06.586 Type: SSH_FXP_HANDLE, Size: 27, Number: 771
. 2012-08-30 15:30:06.586 Write request offset: 0, len: 4096
> 2012-08-30 15:30:06.586 Type: SSH_FXP_WRITE, Size: 4135, Number: 1286
. 2012-08-30 15:30:06.586 Sent 4139 bytes
. 2012-08-30 15:30:06.586 There are 0 bytes remaining in the send buffer
. 2012-08-30 15:30:06.586 Write request offset: 4096, len: 4096
> 2012-08-30 15:30:06.586 Type: SSH_FXP_WRITE, Size: 4135, Number: 1542
. 2012-08-30 15:30:06.586 Sent 4139 bytes
. 2012-08-30 15:30:06.586 There are 0 bytes remaining in the send buffer
. 2012-08-30 15:30:06.586 Write request offset: 8192, len: 4096
> 2012-08-30 15:30:06.586 Type: SSH_FXP_WRITE, Size: 4135, Number: 1798
. 2012-08-30 15:30:06.586 Sent 4139 bytes
. 2012-08-30 15:30:06.586 There are 0 bytes remaining in the send buffer
. 2012-08-30 15:30:06.586 Write request offset: 12288, len: 4096
> 2012-08-30 15:30:06.586 Type: SSH_FXP_WRITE, Size: 4135, Number: 2054
. 2012-08-30 15:30:06.586 Sent 4139 bytes
. 2012-08-30 15:30:06.586 There are 0 bytes remaining in the send buffer
. 2012-08-30 15:30:06.586 Write request offset: 16384, len: 4096
> 2012-08-30 15:30:06.586 Type: SSH_FXP_WRITE, Size: 4135, Number: 2310
. 2012-08-30 15:30:06.586 Sent 4139 bytes
. 2012-08-30 15:30:06.586 There are 0 bytes remaining in the send buffer
. 2012-08-30 15:30:06.586 Write request offset: 20480, len: 4096
> 2012-08-30 15:30:06.586 Type: SSH_FXP_WRITE, Size: 4135, Number: 2566
. 2012-08-30 15:30:06.586 Sent 4139 bytes
. 2012-08-30 15:30:06.586 There are 0 bytes remaining in the send buffer
. 2012-08-30 15:30:06.586 Write request offset: 24576, len: 4096
> 2012-08-30 15:30:06.586 Type: SSH_FXP_WRITE, Size: 4135, Number: 2822
. 2012-08-30 15:30:06.602 Sent 4139 bytes
. 2012-08-30 15:30:06.602 There are 0 bytes remaining in the send buffer
. 2012-08-30 15:30:06.602 Write request offset: 28672, len: 98261
> 2012-08-30 15:30:06.602 Type: SSH_FXP_WRITE, Size: 98300, Number: 3078
. 2012-08-30 15:30:06.617 Sent 98304 bytes
. 2012-08-30 15:30:06.617 There are 33208 bytes remaining in the send buffer
. 2012-08-30 15:30:06.617 Detected network event
. 2012-08-30 15:30:06.617 Received 28 bytes (0)
. 2012-08-30 15:30:06.617 Read 4 bytes (24 pending)
. 2012-08-30 15:30:06.617 Read 24 bytes (0 pending)
< 2012-08-30 15:30:06.617 Type: SSH_FXP_STATUS, Size: 24, Number: 1286
< 2012-08-30 15:30:06.617 Status code: 0
. 2012-08-30 15:30:06.617 There are 33208 bytes remaining in the send buffer, need to send at least another 440 bytes
. 2012-08-30 15:30:06.633 Detected network event
. 2012-08-30 15:30:06.633 There are 33208 bytes remaining in the send buffer
. 2012-08-30 15:30:06.633 There are 33208 bytes remaining in the send buffer, need to send at least another 440 bytes
. 2012-08-30 15:30:06.633 Detected network event
. 2012-08-30 15:30:06.633 There are 33208 bytes remaining in the send buffer
. 2012-08-30 15:30:06.633 There are 33208 bytes remaining in the send buffer, need to send at least another 440 bytes
. 2012-08-30 15:30:06.633 Detected network event
. 2012-08-30 15:30:06.633 Received 28 bytes (0)
. 2012-08-30 15:30:06.633 Read 4 bytes (24 pending)
. 2012-08-30 15:30:06.633 Read 24 bytes (0 pending)
< 2012-08-30 15:30:06.633 Type: SSH_FXP_STATUS, Size: 24, Number: 1542
< 2012-08-30 15:30:06.633 Status code: 0 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-06-17T14:22:39.093

引用 WinSCP 常见问题[我如何知道脚本已成功完成？](https://winscp.net/eng/docs/faq_script_result)：

> 您可以通过 WinSCP 退出代码来判断脚本的结果。代码 0 表示成功，而 1 表示错误。有关更多详细信息，请参阅[脚本](https://winscp.net/eng/docs/scripting)文档。
> 
> 一旦发生任何错误，批处理脚本（使用`/script`或`/command` [命令行开关](https://winscp.net/eng/docs/commandline#scripting)指定）立即以代码 1 终止。[`option batch`](https://winscp.net/eng/docs/scriptcommand_option#batch)您可以使用命令更改此设置。
> 
> 要找出脚本失败的原因，请检查[会话日志](https://winscp.net/eng/docs/logging)。
> 
> 有关示例，请参见：
> 
> *   [传输自动化指南](https://winscp.net/eng/docs/guide_automation#results)；
> *   [重试脚本/连接尝试](https://winscp.net/eng/docs/script_retry)示例；
> *   [通过电子邮件发送脚本结果](https://winscp.net/eng/docs/script_email)示例。
> 
> 如果您需要更好地控制错误处理，请考虑改用[WinSCP .NET 程序集](https://winscp.net/eng/docs/library)（例如，来自[PowerShell 脚本](https://winscp.net/eng/docs/library_powershell)）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-20T09:13:09.907

WinSCP 可以选择将所有操作记录到[XML 日志](http://winscp.net/eng/docs/logging_xml)中。然后，您可以分析日志以准确了解会话期间发生的情况。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-05T05:02:30.843

下面，是我用来完成从 ftp 服务器同步到本地目录的批处理文件，删除本地端的任何更改。批处理文件还保存所有传输的**XML 日志**。

```
@echo off
cd %programfiles(x86)%\winscp\
start /b winscp.exe /log="C:\Sync\logs\!M-!D-!Y@!T.xml" /xmlgroups /command "open   ftp://username:password@ftp.foo.com" "synchronize local -delete -criteria=size     ""C:\Users\jdoe\Documents\Synced Docs"" / 
```

您要使用的参数是“ **winscp.exe /log="C:\Sync\logs!M-!D-!Y@!T.xml" /xmlgroups** "

# haskell - 根据两个条件过滤元组列表

> ID：12212412
> 
> 赞同：1
> 
> 时间：2012-08-31T09:19:45.563
> 
> 标签：haskell

我有一个看起来像这样的元组列表：

```
let tups = [("AA","BB",1),
            ("AA","CC",2),
            ("AA","BB",3),
            ("VV","RR",4),
            ("XX","TT",5),
            ("BB","BB",6)] 
```

我只想过滤掉第一个元素`AA`和第二个元素的元组`BB`。我试图使用：

```
filter (\(x,y,_) -> x /= "AA" && y /= "BB") tups 
```

上面的命令删除第一个元素是“AA”或第二个元素是“BB”的任何元组。因此，输出为：

```
[("VV","RR",4), ("XX","TT",5)] 
```

如何创建一个过滤函数来仅删除第一个元素是“AA”而第二个元素是“BB”的元组？正确的输出应该是：

```
[("AA","CC",2), ("VV","RR",4), ("XX","TT",5), ("BB","BB",6)] 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-31T09:30:27.653

布尔代数。您要删除的满足条件

```
x == "AA" && y == "BB" 
```

布尔代数指出

```
¬(x and y) = ¬x or ¬y 
```

因此，您的 lambda 条件应该是

```
x /= "AA" || y /= "BB" 
```

因为`filter`保留提供的谓词返回的所有内容`True`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-31T09:31:42.877

正如您在文档中看到的那样，[filter :: (a -> Bool) -> [a] -> [a]](http://hackage.haskell.org/packages/archive/base/latest/doc/html/Prelude.html#v:filter)返回满足谓词的那些元素的列表。这意味着您的谓词必须`True`仅针对您要保留的元素返回。

因此，通过重新表述您的请求，我们希望保留所有第一个元素不同于“AA”或第二个元素不同于“BB”的三元组：

```
filter (\(x,y,_)-> x /= "AA" || y /= "BB" ) tups 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T13:54:04.223

如果您想要使您的意图更清晰的东西，请尝试：

```
filter (\(x,y,_) -> not $ x == "AA" && y == "BB") tups 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:29:55.050

```
filter (\(x,y,_) -> x /= "AA" || y /= "BB") tups 
```

会做你想做的事。你混淆了`&&`和`||`运算符。过滤器将获取谓词为真的所有内容，因此`"AA"`返回所有没有的内容，并返回所有`y`不是“BB”的内容。

# javascript - 动态嵌套字段集

> ID：12212415
> 
> 赞同：1
> 
> 时间：2012-08-31T09:20:01.327
> 
> 标签：javascript, fieldset

我要求 HTML 页面中有 3 个级别的重复组（嵌套字段集）。我能够为单个字段集成功实现添加功能，但无法找到 3 个级别的解决方案。

考虑在 A 内部的 B 内部有 3 个嵌套的重复组 C。问题列表如下：

1）当我添加另一个 C 的克隆（这意味着 B 现在包含 2 个 C），然后当我添加另一个 B（这意味着 A 包含 2 个 B）时。现在新添加的第二个 B 有 2 个 C（因为 B 再次被克隆）但它应该只有 1 个 C。

2）在更改字段集元素的名称和ID时，如果C被克隆（将有2个C的ID分别为xxx1和xxx2这不是问题），但如果用户先添加B，我可以实现它然后在新的 B 中添加 2 个 C，我也无法处理名称更改。

下面是我使用的 HTML 和 java 脚本。请让我知道解决方案或建议我解决问题的更好方法。

```
 <html >
<head>

<script type="text/javascript" src="cloneFieldset.js"></script>
</head>
<body >

        <form name="mf" method="post" action="#" onsubmit="return false;">
        <input type="hidden" name = "Road_RepeatingGroup" id= "Road_RepeatingGroup_id" />   
         <fieldset name="fieldset1" id="roadRepeatingGroup_id1" > 
                 <input type="hidden" name = "road" id= "road_id" />
        <legend>
          Road
        </legend> 
        <table cellspacing="2" cellpadding="3" border="0" width="100%" name="test">
          <tr>
            <td width="20%">Access Road</td>
          </tr><tr>
           <td width="20%">
              <input type="text" name="Access_Road1" id="Access_Road_id1"/>
            </td>
            </tr>
        </table>
       <input type="hidden" name = "Test_RepeatingGroup" id= "Test_RepeatingGroup_id" />
        <fieldset name="test1" id="test_id1">
        <input type="hidden" name = "Test" id= "Test_id" />
        <legend>
        Test
        </legend>
        <p>
          Instructions
        </p>
        <p>
          <input type="text" name="txt_Instructions_test1" id="txt_Instructions_test_id1" />
        </p>

        <div>
        <input type="hidden" name = "Inner_RepeatingGroup" id= "Inner_RepeatingGroup_id" />
            <fieldset name="innetMost1" id="innetMost_id1">
            <input type="hidden" name = "Inner" id= "Inner_id" />
            <legend>
            InnerMost
            </legend>
            <p>
          Inner Instructions
        </p>
        <p>
          <input type="text" name="txt_InnerInstructions_test1" id="txt_InnerInstructions_test_id1" />
        </p>

        <button type="button" name="btn_Road_Delete_inner" id="btn_Road_Delete_inner1" onclick="deleteMe(this);">
          Delete
        </button>
        <button type="button" name="btn_Road_Edit_inner" id="btn_Road_Edit_inner1" onclick="addMe(this);">
          Add
        </button>
        <input type="hidden" name = "/Inner" id= "Inner_id" />
            </fieldset>
            <input type="hidden" name = "/Inner_RepeatingGroup" id= "Inner_RepeatingGroup_id" />
        <button type="button" name="btn_Road_Delete_test" id="btn_Road_Delete_test1" onclick="deleteMe(this);">
          Delete
        </button>
        <button type="button" name="btn_Road_Edit_test" id="btn_Road_Edit_test1" onclick="addMe(this);">
          Add
        </button>
        </div>
        <input type="hidden" name = "/Test" id= "Test_id1" />
        </fieldset>
        <input type="hidden" name = "/Test_RepeatingGroup" id= "Test_RepeatingGroup_id1" />
         <div>
        <button type="button" name="btn_Road_Delete" id="btn_Road_Delete1" onclick="deleteMe(this);">
          Delete
        </button>
        <button type="button" name="btn_Road_Edit" id="btn_Road_Edit1" onclick="addMe(this);">
          Add
        </button>
        </div>
        <input type="hidden" name = "/road" id= "road_id1" />
      </fieldset> 
            <input type="hidden" name = "/Road_RepeatingGroup" id= "Road_RepeatingGroup_id1" />

                <table>
                <tr><td>
                    <p>
                <input type="button" value="Submit" class="button" onclick="getElementnames();" />
                                <input type="button" value="Check FieldSet" class="button" onclick="checkFieldset();" />
            </p>
                      </td></tr>  </table>
        </form>

</body>
</html> 
```

Java脚本：

```
function addMe(a){
var original;
    if(a.type == 'button'){

    original = a.parentNode;
    }
    else{

     original= document.getElementById(a);
    }

        while (original.nodeName.toLowerCase() != 'fieldset')
    {
        original = original.parentNode;
    }
    var duplicate = original.cloneNode(true);
     //alert("id :"+duplicate.id);
   var changeID= duplicate.id;

   var counter = parseInt(changeID.charAt(changeID.length-1));
   //alert("counter :"+ counter);
     ++counter;
   var afterchangeID = changeID.substring(0,changeID.length-1);
   //alert("afterchangeID :"+ afterchangeID);
    var newID=afterchangeID + counter;
    //alert("newID :"+ newID);
    duplicate.id = newID;

    var tagNames = ['label', 'input', 'select', 'textarea'];
        for (var i in tagNames)
        {

    var nameChange = duplicate.getElementsByTagName(tagNames[i]);

        for (var j = 0; j < nameChange.length; j++)
    { //++counter;
        if (nameChange[j].type != 'hidden'){
        var elementName = nameChange[j].name;
                //alert("elementName :"+ elementName);

                var afterSplitName = elementName.substring(0,elementName.length-1);
                //alert("afterSplitName :"+ afterSplitName);
             nameChange[j].name = afterSplitName + counter;
                //alert("nameChange[j].name :"+ nameChange[j].name); 

        var elementId = nameChange[j].id;
                //alert("elementId :"+ elementId);

                var afterSplitId = elementId.substring(0,elementId.length-1);
                //alert("afterSplitId :"+ afterSplitId);
                    nameChange[j].id = afterSplitId + counter;
                       //alert("nameChange[j].id :"+ nameChange[j].id);

    }
        }
}

    insertAfter(duplicate, original);
}

function insertAfter(newElement, targetElement)
{
    var parent = targetElement.parentNode;
    if (parent.lastChild == targetElement)
    {
        parent.appendChild(newElement);
    }
    else
    {
        parent.insertBefore(newElement, targetElement.nextSibling);
    }
} 
```

# android - Android 中用于在相机视图上定位地图叠加层的增强现实

> ID：12212416
> 
> 赞同：1
> 
> 时间：2012-08-31T09:20:03.167
> 
> 标签：android, gps, android-mapview, android-camera, augmented-reality

我正在寻找 android 中的 AR SDK，它可以帮助我在基于 GPS 的相机视图上定位地图覆盖/对象。
这就是我在我的应用程序中尝试做的事情： **当设备在一个方向上直立时，相应的地图覆盖应该显示在相机视图上，同时顶部的指南针显示方向。**
希望我足够清楚！寻找您的建议。谢谢 ：）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-31T09:57:27.753

在 AR 方面有几种选择

QCAR - Qualcomm 增强现实 SDK - [https://ar.qualcomm.com/qdevnet/sdk（Android](https://ar.qualcomm.com/qdevnet/sdk)和 iOS） ARToolKit -http://sourceforge.net/projects/...（支持多种设备）

popcode - [http://www.popcode.info/demos](http://www.popcode.info/demos)（支持 Android 和 iPhone）
ARmsk -http://armsk.org/ SATCH - [http://satch.jp/](http://satch.jp/)

但是他们可能无法直接帮助您放置地图对象，您必须自己处理地图内容，一旦它们准备好被推送到相机视图上，sdk 将帮助您将这些东西变成 AR。

# entity-framework-4 - EF4 Code First + SQL Server CE：以原子方式保存双向引用

> ID：12212418
> 
> 赞同：7
> 
> 时间：2012-08-31T09:20:12.573
> 
> 标签：entity-framework-4, transactions, ef-code-first, sql-server-ce

我想保存一些具有双向关系的实体（两端的导航属性）。这是通过 2 次调用来完成的`context.SaveChanges()`。

**[关于我的模型、映射以及我如何到达那里的完整细节在折叠之后。]**

```
public void Save(){

     var t = new Transfer();
     var ti1 = new TransferItem();
     var ti2 = new TransferItem();

     //deal with the types with nullable FKs first
     t.TransferIncomeItem = ti1;
     t.TransferExpenseItem = ti2;

     context.Transfers.Add(t);
     context.Operations.Add(ti1);
     context.Operations.Add(ti2);

     //save, so all objects get assigned their Ids
     context.SaveChanges();

     //set up the "optional" half of the relationship
     ti1.Transfer = t;
     ti2.Transfer = t;
     context.SaveChanges();
} 
```

一切都很好，但是如果两次调用之间发生雷击，如何确保数据库不不一致`SaveChanges()`呢？

输入`TransactionScope`...

```
public void Save(){
    using (var tt = new TransactionScope())
    {
        [...same as above...]
        tt.Complete();
    }
} 
```

...但这在第一次调用时失败并`context.SaveChanges()`出现此错误：

> 连接对象不能在事务范围内登记。

[这个问题](https://stackoverflow.com/questions/5153573/error-on-using-transactionscope-in-ef4-sql-compact-4)和[这篇 MSDN 文章](http://msdn.microsoft.com/en-us/library/bb896149%28v=sql.100%29.aspx)建议我明确地登记交易......

```
public void Save(){
    using (var tt = new TransactionScope())
    {
        context.Database.Connection.EnlistTransaction(Transaction.Current);

        [...same as above...]
        tt.Complete();
    }
} 
```

...同样的错误：

> 连接对象不能在事务范围内登记。

这里是死胡同......让我们采用不同的方法 - 使用显式事务。

```
public void Save(){
    using (var transaction = context.Database.Connection.BeginTransaction())
    {
        try
        {
            [...same as above...]
            transaction.Commit();
        }
        catch
        {
            transaction.Rollback();
            throw;
        }
    } 
```

仍然没有运气。这一次，错误信息是：

> BeginTransaction 需要一个开放且可用的连接。连接的当前状态是关闭。

我该如何解决？

* * *

## TL;DR 详细信息

这是我的简化模型：一个引用两个操作（TransferItem）的事务，该操作引用回事务。这是Transfer 与其两个项目中的每一个项目之间**的 1:1 映射。**

我想要的是确保在**添加**新的`Transfer`.

这是我走过的路，也是我卡住的地方。

该模型：

```
public class Transfer
{
    public long Id { get; set; }
    public long TransferIncomeItemId { get; set; }
    public long TransferExpenseItemId { get; set; }
    public TransferItem TransferIncomeItem { get; set; }
    public TransferItem TransferExpenseItem { get; set; }
}

public class Operation {
    public long Id;
    public decimal Sum { get; set; }
}

public class TransferItem: Operation
{
    public long TransferId { get; set; }
    public Transfer Transfer { get; set; }
} 
```

我想将此映射保存到数据库（SQL CE）。

```
public void Save(){
     var t = new Transfer();
     var ti1 = new TransferItem();
     var ti2 = new TransferItem();
     t.TransferIncomeItem = ti1;
     t.TransferExpenseItem = ti2;

     context.Transfers.Add(t);
     context.Operations.Add(ti1);
     context.Operations.Add(ti2);
     context.SaveChanges();
} 
```

错误使我大吃一惊：

> “无法确定相关操作的有效顺序。由于外键约束、模型要求或存储生成的值，可能存在相关性。”

这是一个先有鸡还是先有蛋的问题。我无法使用不可为空的外键保存对象，但为了填充外键，我需要先保存对象。

看着[这个问题](https://stackoverflow.com/questions/824635/same-table-relationship-in-entity-framework)，我似乎不得不放松我的模型，并且：

*   在关系的至少一侧具有可为空的 FK
*   先保存那些对象
*   建立关系
*   再次保存。

像这样：

```
public class TransferItem: Operation
{
    public Nullable<long> TransferId { get; set; }
    [etc]
} 
```

另外，这里是映射。Morteza Manavi[关于 EF 1:1 关系的文章](http://weblogs.asp.net/manavi/archive/2011/05/01/associations-in-ef-4-1-code-first-part-5-one-to-one-foreign-key-associations.aspx)非常*有*帮助。基本上，我需要与指定的 FK 列创建一对多关系。'CascadeOnDelete(false)' 处理有关多个级联路径的错误。（数据库可能会尝试删除 Transfer 两次，每个关系一次）

```
 modelBuilder.Entity<Transfer>()
            .HasRequired<TransferItem>(transfer => transfer.TransferIncomeItem)
            .WithMany()
            .HasForeignKey(x => x.TransferIncomeItemId)
            .WillCascadeOnDelete(false)
            ;

        modelBuilder.Entity<Transfer>()
            .HasRequired<TransferItem>(transfer => transfer.TransferExpenseItem)
            .WithMany()
            .HasForeignKey(x => x.TransferExpenseItemId)
            .WillCascadeOnDelete(false)
            ; 
```

用于保存实体的更新代码位于问题的开头。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-06T01:27:38.703

为了完成这项工作，我必须添加更流畅的映射，以显式创建类`TransferItem`上的可选映射`Transfer`，以及使 FK 在`TransferItem`.

一旦映射被修复，我就没有问题将这一切包装在单个 TransactionScope 中。

这是整个控制台应用程序：

```
 public class Transfer
   {
      public long Id { get; set; }
      public long TransferIncomeItemId { get; set; }
      public long TransferExpenseItemId { get; set; }
      public TransferItem TransferIncomeItem { get; set; }
      public TransferItem TransferExpenseItem { get; set; }
   }

   public class Operation
   {
      public long Id { get; set; }
      public decimal Sum { get; set; }
   }

   public class TransferItem : Operation
   {
      public long? TransferId { get; set; }
      public Transfer Transfer { get; set; }
   }

   public class Model : DbContext
   {

      public DbSet<Transfer> Transfers { get; set; }
      public DbSet<Operation> Operations { get; set; }
      public DbSet<TransferItem> TransferItems { get; set; }

      protected override void OnModelCreating( DbModelBuilder modelBuilder )
      {
         modelBuilder.Entity<Transfer>()
            .HasRequired( t => t.TransferIncomeItem )
            .WithMany()
            .HasForeignKey( x => x.TransferIncomeItemId )
            .WillCascadeOnDelete( false );

         modelBuilder.Entity<Transfer>()
            .HasRequired( t => t.TransferExpenseItem )
             .WithMany()
            .HasForeignKey( x => x.TransferExpenseItemId )
            .WillCascadeOnDelete( false );

         modelBuilder.Entity<TransferItem>()
            .HasOptional( t => t.Transfer )
            .WithMany()
            .HasForeignKey( ti => ti.TransferId );
      }
   }

   class Program
   {
      static void Main( string[] args )
      {

         using( var scope = new TransactionScope() )
         {
            var context = new Model();

            var ti1 = new TransferItem();
            var ti2 = new TransferItem();

            //deal with the types with nullable FKs first
            context.Operations.Add( ti1 );
            context.Operations.Add( ti2 );
            var t = new Transfer();
            context.Transfers.Add( t );
            t.TransferIncomeItem = ti1;
            t.TransferExpenseItem = ti2;
            //save, so all objects get assigned their Ids
            context.SaveChanges();

            //set up the "optional" half of the relationship
            ti1.Transfer = t;
            ti2.Transfer = t;
            context.SaveChanges();
            scope.Complete();
         }

      }
   } 
```

运行时生成此数据库：

![在此处输入图像描述](../Images/a15fce604bff12290d4282a0c6d158b0.png)

这个输出：

![在此处输入图像描述](../Images/ee5073645b5e0d8e32805057024292ce.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T17:58:51.613

这可能是因为两次调用`SaveChanges`导致连接被打开和关闭两次。对于某些版本的 SQL Server，这会导致事务被提升为分布式事务，如果服务未运行，该事务将失败。

最简单的解决方案是通过在创建`TransactionScope`. 然后 EF 不会尝试打开或关闭连接本身，直到它在释放上下文时关闭它。

请参阅[此答案](https://stackoverflow.com/a/6860930/439024)以获取代码示例以及[此](http://geekswithblogs.net/SudheersBlog/archive/2010/04/11/139193.aspx)和[此](http://blogs.u2u.be/diederik/post/2010/06/29/Transactions-and-Connections-in-Entity-Framework-40.aspx)博客文章。

# java - xml 文件不更新。这是什么原因？

> ID：12212424
> 
> 赞同：1
> 
> 时间：2012-08-31T09:20:55.297
> 
> 标签：java, xml, google-app-engine, jakarta-ee, blobstore

blobstore 中有一个*xml*文件，如下所示：

```
<?xml version="1.0" encoding="UTF-8"?>

<Blobs>

</Blobs> 
```

以下 servlet 将文件上传到*blobstore*。上传文件后，它获取*文件*密钥并调用一个更新 xml 的 Bean，通过添加一个以 text-content 为密钥的节点。

```
public class UploadImagesToAisle extends HttpServlet {

/**
 * Handles the HTTP
 * <code>POST</code> method.
 *
 * @param request servlet request
 * @param response servlet response
 * @throws ServletException if a servlet-specific error occurs
 * @throws IOException if an I/O error occurs
 */
@Override
protected void doPost(HttpServletRequest request, HttpServletResponse response)
        throws ServletException, IOException {
    String path = request.getParameter("Data");
    PrintWriter writer = response.getWriter();
     try {
       boolean isMultipart = ServletFileUpload.isMultipartContent(request);
       if( !isMultipart ) {
           writer.println("File cannot be uploaded !");
       }  else {
           ServletFileUpload upload = new ServletFileUpload();
           FileItemIterator iter = upload.getItemIterator(request);
           List list = null;
           while(iter.hasNext()) {
               FileItemStream item = iter.next();
               String name  = item.getFieldName();
               String fileName = item.getName();
               String mimeType = new MimeType().getMimeType(fileName);
               if(mimeType == null) {
                   response.sendRedirect("error.jsp");
               }
               InputStream stream = item.openStream();
               if(item.isFormField()) {
                   // Process regular form field (input type="text|radio|checkbox|etc", select, etc).
               } else {
                   // Get a file service
                   FileService fileService = FileServiceFactory.getFileService();
                   // Create a new Blob file with mime-type "text/plain"
                   AppEngineFile file = fileService.createNewBlobFile(mimeType, fileName);
                   // Open a channel to write to it
                   boolean lock = true;
                   FileWriteChannel writeChannel = fileService.openWriteChannel(file, lock);
                   // copy byte stream from request to channel
                   byte[] buffer = new byte[10000];
                   int len;
                   while ((len = stream.read(buffer)) > 0) {
                        writeChannel.write(ByteBuffer.wrap(buffer, 0, len));
                   }

                   writeChannel.closeFinally();

                   if(MimeType.isImage) {
                       String key = fileService.getBlobKey(file).getKeyString();
                       // update the xml file with the key
                       new UpdateXml().appendKey(key);  // BEAN CALLED
                   }

                   RequestDispatcher dispatcher = request.getRequestDispatcher("private/cpanel/PcPanel.jsp");
                   dispatcher.forward(request, response);
               }
           }
       }
    }catch(Exception exc) {
        writer.println(exc);
    }
}
} 
```

以下是上述 servlet 调用以更新/写入*xml的**Bean*。

 *```
public class UpdateXml {

private final String xmlKey = "AMIfv95NSB_FKs2v6o0dIKkSdmSIJVtE0oq9X4hyTbxOTglDi6XoDaTUBlXxa3OsPfDo8ZQZF8kFb059zg4kJ3lK2MlgudC_nkQdwCpx1kYP9Rwb40s0HClFzzIIUv-UtMbuycxixVtfw-fYyhC3MXvFc1Gh-Cv9mQ";

public void appendKey(String key) {
    try {
        FileService fileService = FileServiceFactory.getFileService();
        AppEngineFile file = fileService.getBlobFile( new BlobKey( xmlKey ) );
        FileReadChannel readChannel = fileService.openReadChannel(file, true);
        InputStream stream = Channels.newInputStream(readChannel);

        DocumentBuilderFactory builderFactory = DocumentBuilderFactory.newInstance();
        DocumentBuilder documentBuilder = builderFactory.newDocumentBuilder();
        Document doc = documentBuilder.parse(stream);
        Element root = doc.getDocumentElement();

        Element blobKey = doc.createElement("blob-key");
        blobKey.setTextContent(key);

        root.appendChild(blobKey);

        GSFileOptionsBuilder optionsBuilder = new GSFileOptionsBuilder();
        optionsBuilder.setBucket("my-bucket");
        optionsBuilder.setKey(xmlKey);
        optionsBuilder.setMimeType("text/html");
        optionsBuilder.setAcl("public_read");
        optionsBuilder.addUserMetadata("suhail", "gupta");

        AppEngineFile writableFile = fileService.createNewGSFile(optionsBuilder.build());
        FileWriteChannel writeChannel = fileService.openWriteChannel(file, true);
        OutputStream output = Channels.newOutputStream(writeChannel);

        TransformerFactory tf = TransformerFactory.newInstance();
        Transformer transformer = tf.newTransformer();
        DOMSource source  = new DOMSource(doc);
        transformer.setOutputProperty(OutputKeys.ENCODING,"UTF-8");
        transformer.setOutputProperty(OutputKeys.INDENT,"yes");
        StreamResult result = new StreamResult(output);
        transformer.transform(source, result);
    }catch(Exception exc) {
        exc.printStackTrace();
    }
} 
```

}

文件上传正常，但没有对 xml 文件进行条目。日志中没有任何错误日志。我不明白这是为什么。问题是什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-02T10:14:04.240

我认为该文件没有保留，因为您忘记完成：

> 附加到它，当所有完成写入后，您必须完成文件以使其持久

[资源](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/files/FileService)

尝试添加：`writeChannel.closeFinally();`或`writeChannel.close()`之后`transformer.transform(source, result);`

* * *

**编辑**

你从不写`writableFile`：

```
FileWriteChannel writeChannel = fileService.openWriteChannel(file, true); 
```

但尝试写入以读取和锁定状态打开的文件。*

# azure - Azure 网站自定义 DNS 限制

> ID：12212429
> 
> 赞同：1
> 
> 时间：2012-08-31T09:21:05.730
> 
> 标签：azure, azure-web-app-service

如果我需要在保留模式下为 Azure 网站设置许多主机名，我会收到错误消息：

```
No CNAME pointing from www.xxxx.it to a site in a default DNS zone (or too many). 
```

这个错误在我添加第四个条目之前随机出现，然后它似乎持续存在，所以我无法添加第五个。文档中的任何地方都没有提到此限制。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-09T01:37:54.043

在预览期间，在我进行了一些测试后，限制设置为 4。但是，这可能会随着 Windows Azure 网站的发布而改变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T22:21:01.580

我现在设法弄清楚了。我已经将它设置为共享但谢谢。我必须使用我的 DNS 主机配置 * 通配符 CNAME 记录。并非所有提供商都支持这一点。我选择了亚马逊 AWS。

# android - 填充微调器时的问题

> ID：12212436
> 
> 赞同：1
> 
> 时间：2012-08-31T09:21:20.013
> 
> 标签：android, spinner

我用一些数据填充了一个微调器，如下所示：

```
adapter =
newSpinAdapter(this,com.Orange.R.layout.spinnerrowlist,spinnerInfo);                  adapter.setDropDownViewResource(com.Orange.R.layout.multiline_spinner_dropdown_item);
previousVisitCommentsSpinner.setAdapter(adapter);

public class UserComments {
    public String coach;
    public String comment;
    public String date;

    public UserComments(String coach, String comment, String date) {
        this.coach = coach;
        this.comment = comment;
        this.date = date;
    }
}

    public class SpinAdapter extends ArrayAdapter<UserComments>{
        private Context context;
        private ArrayList<UserComments> spinnerInfo;

        public SpinAdapter(Context context, int textViewResourceId, ArrayList<UserComments> spinnerInfo){
            super(context, textViewResourceId, spinnerInfo);
            this.spinnerInfo = spinnerInfo;
        }

        @Override
    public View getView(int position, View convertView, ViewGroup parent) {
            View v = convertView;
            if (v == null) {
        LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        v = vi.inflate(R.layout.spinnerrowlist, null);
    }

            Visit.UserComments info = spinnerInfo.get(position);

            if (info != null) {
        TextView spinneritem1 = (TextView) v.findViewById(R.id.textview_spinner1);
        TextView spinneritem2 = (TextView) v.findViewById(R.id.textview_spinner2);
                    TextView spinneritem3 = (TextView) v.findViewById(R.id.textview_spinner3);

        if (spinneritem1 != null) {
                        spinneritem1.setText(info.coach);
                        spinneritem1.setTextColor(getResources().getColor(
                            R.color.medium_gray));
        }

        if (spinneritem2 != null) {
                        spinneritem2.setText(info.comment);
                        spinneritem2.setTextColor(getResources().getColor(
                            R.color.medium_gray));
            }

                    if (spinneritem3 != null) {
                        spinneritem3.setText(info.date);
                        spinneritem3.setTextColor(getResources().getColor(
                            R.color.medium_gray));
            }

        }
            return v;
        }

    } 
```

这是我的代码的一部分。这是微调器的外观： [![这是我的照片](../Images/a223f590ac5d3d940625c750b7bd033a.png)](https://i.stack.imgur.com/D9fM8.png)

还行吧。

但是当我点击它时，我看起来像这样： [![这是我的形象](../Images/3c4dc76d77ef56986ab0a71f35d377fa.png)](https://i.stack.imgur.com/LFwCo.png)

显示的数据与未选中时的状态不同！！！！选择时应显示的数据应为：`2012-09-03 second 11`。谁能告诉我哪里出错了？？？什么是解决方案。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:25:44.287

在`UserComments`覆盖`toString`方法和返回文本中，您希望在微调器中可见。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T09:25:52.643

你应该`toString`在你的`UserComments`类中覆盖，例如：

```
public class UserComments {
    public String coach;
    public String comment;
    public String date;

    public UserComments(String coach, String comment, String date) {
        this.coach = coach;
        this.comment = comment;
        this.date = date;
    }

    @Override
    public String toString() {
        return date + " " + comment + " " + coach;
    }
} 
```

# css - 诺基亚 C5 边框宽度错误

> ID：12212437
> 
> 赞同：0
> 
> 时间：2012-08-31T09:21:20.623
> 
> 标签：css, border, symbian

我在诺基亚 C5 上发现了一个涉及边框宽度的 Symbian 错误。

看看下面的小提琴[http://jsfiddle.net/TnhAw/](http://jsfiddle.net/TnhAw/)

由于某种原因，顶部和底部边框占用了比框更多的**宽度。**有没有人知道的解决方法？

这是我在 Symbian 中看到的粗略模型：

![在此处输入图像描述](../Images/586a27dc5cc49505ad4639ce5573f089.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:47:51.497

`boder-width`从代码中删除`div`或根据您的要求进行调整

检查[http://jsfiddle.net/TnhAw/1/](http://jsfiddle.net/TnhAw/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:36:33.927

我建议尝试在单独的定义中设置每个边框，并在没有`margin: 20px;`.

CSS如下，因为在这种情况下小提琴不会有帮助：

```
div {
    height: 200px;
    /*margin: 20px;*/
    border-style: solid;
    border-right-width: 1px;
    border-left-width: 1px;
    border-top-width: 10px;
    border-bottom-width: 10px;
} 
```

# maven - 在命令行上覆盖 Maven 属性 (Maven 2.2.1)

> ID：12212440
> 
> 赞同：2
> 
> 时间：2012-08-31T09:21:30.950
> 
> 标签：maven, maven-2

我发现在同一命令行调用上运行 mvn install 并覆盖 POM 中定义的属性时，不会更新安装到本地存储库的 POM 中定义的属性的值，这会导致打包的工件不同步与 POM 文件。例如，考虑具有以下 POM 的两个模块，模块一和模块二

模块一 POM

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0.0</modelVersion>
<groupId>org.myorg.test</groupId>
<artifactId>module-one</artifactId>
<version>1.0</version> 
```

和模块二 POM

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/maven-v4_0_0.xsd">
<modelVersion>4.0.0.0</modelVersion>
<groupId>org.myorg.test</groupId>
<artifactId>module-two</artifactId>
<version>1.0</version>
<properties>
    <module.one.version>1.0</module.one.version>
</properties>
<build>
    <plugins>
        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-jar-plugin</artifactId>
            <configuration>
              <archive>
                <manifest>
                  <addClasspath>true</addClasspath>
                </manifest>
              </archive>
            </configuration>
        </plugin>
    </plugins>
</build>
<dependencies>
    <dependency>
        <groupId>org.myorg.test</groupId>
        <artifactId>module-one</artifactId>
        <version>${module.one.version}</version>
    </dependency>
</dependencies> 
```

在模块一 POM 上运行 mvn install 会将模块一：1.0 安装到本地存储库。现在，如果您编辑 module-one POM 并将版本设置为 2.0 并运行 mvn install ，则会将 module-one:2.0 安装到您的本地存储库。

现在在 module-two pom 上运行 mvn install -Dmodule.one.version=2.0 将导致将 module-two:1.0 安装到本地存储库。但是，检查构建的 JAR 并打开清单文件将显示以下内容

```
Manifest-Version: 1.0
Archiver-Version: Plexus Archiver
Created-By: Apache Maven
Build-Jdk: 1.6.0_26
Class-Path: module-one-2.0.jar 
```

但是在本地存储库中与这个构建的 jar 一起使用的 POM 仍将引用对 module-one:1.0 的依赖，因为该属性将保持最初定义的状态

```
<properties>
<module.one.version>1.0</module.one.version>
</properties>
...
<dependencies>
<dependency>
        <groupId>org.myorg.test</groupId>
    <artifactId>module-one</artifactId>
    <version>${module.one.version}</version>
</dependency>
 </dependencies> 
```

这是正确的行为吗？或者应该以不同的方式解析属性 module.one.version 吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:56:36.777

是的，这就是 Maven 的工作方式。因此，我总是在 pom 中定义属性的默认值，并在`settings.xml`命令行或配置文件中覆盖它们。由于存储库中的 pom 有更大的机会为团队中的其他开发人员顺利工作。

# jquery-mobile - 骨干 jquery 移动渲染 - 在 CoffeeScript 中

> ID：12212450
> 
> 赞同：1
> 
> 时间：2012-08-31T09:22:23.493
> 
> 标签：jquery-mobile, backbone.js, coffeescript

我在正文中附加了一个模板，这在 jquery mobile 中表现良好。但是，然后我遍历数据并呈现单个视图-jquery mobile 现在失败了。

最初我使用 listview("refresh")，但是当循环一个全新的视图时，我得到了这个错误，“ **jquerymobile 错误“cannot call methods on listview before initialization** ”……同时实现 trigger("create") 也没有无论我把它放在哪里似乎都不起作用......也许我错了，如果是的话，你能告诉我把它放在哪里，或者解释如何解决这个问题......

另一个问题建议这样做......但我不确定将它放在哪里，以及它是否有效：

```
$('#myListview').bind('pageinit', function() {
  $('#myListview').listview('refresh');
}); 
```

我真的被困住了..任何人都可以阐明如何解决这个问题，谢谢！

我循环通过较小视图的主要视图是..

```
class FavouritesListView extends Backbone.View
    initialize: =>
        Favourites.fetch()

    template: _.template($('#propertyFavourites').html())

    render: =>
        $(@el).append(@template)
        @addFavs()

    addFavs: =>
        Favourites.each (fav) =>
            view = new FavouriteView({model: fav})
            $("#favList", @el).append(view.render().el)

            #I've tried $("#favList", @el).append(view.render().el).listview("refresh") & get "cannot call methods on listview prior to initialization".. I've also tried .trigger("create") which doesn't work.. 
```

我的列表项视图是（正在呈现没有样式）...

```
class FavouriteView extends Backbone.View
    template: _.template($('#propertyFav').html())

    render: =>
        $(@el).html(@template({row: @model}))
        @ 
```

我的路由器和应用程序是这样加载的..

```
class AppRouter extends Backbone.Router
    routes:
        "": "home"
        "favourites": "favourites"

    initialize: ->
        #handle back buttons
        $('.back').live('click', (event) -> 
            window.history.back();
            false
        )
        @firstPage = true;

    home: ->
        @changePage(new HomeView())

    favourites: ->
        @changePage(new FavouritesListView())

    changePage: (page, theTransition) ->
        $(page.el).attr('data-role', 'page')
        page.render()
        $('body').append($(page.el))

        if theTransition is undefined
            transition = $.mobile.defaultPageTransition
        else
            transition = theTransition

        #We don't want the first page to slide in
        if @firstPage
            transition = 'none'
            @firstPage = false

        $.mobile.changePage($(page.el), {changeHash: false, transition: transition})

$(document).ready( ->
    AppRouter = new AppRouter()
    Backbone.history.start()
) 
```

作为参考，我正在使用 jqm 1.2.0 Alpha ...

任何帮助将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T21:10:04.263

我认为您`listview`每次`render`在`FavouritesListView`. 每次你创建一个新的`<ul>`，你都必须重新触发`create`它。理想情况下，您会保留该`ul`元素，并且仅在完成后换掉内部`li`元素`fetch`。然后`$('#favList').listview('refresh')`在他们被困在那里的时候做。

但是，这将需要一些重大的返工，因此，请尝试使用您现有的代码：

```
class FavouritesListView extends Backbone.View
    initialize: =>
        Favourites.fetch()

    template: _.template($('#propertyFavourites').html())

    render: =>
        @$el.append(@template)
        @addFavs()

    addFavs: =>
        # FYI: @$(...) is shorthand for this.$el.find(...)
        $favList = @$("#favList")
        Favourites.each (fav) =>
            view = new FavouriteView({model: fav})

            # TODO: batch these up and only do one append at the end for better performance.
            $favList.append(view.render().el)

        # Move this trigger out of the for loop, only trigger at the end.
        # Sometimes triggering create on the parent is better, not the actual list.
        @$el.trigger "create" 
```

我还根据一些新的 Backbone 功能调整了一些东西`this.$el === $(this.el)`，`this.$(...) === this.$el.find(...)`例如更好用的等效速记。

# powershell - 如何使用powershell从xml中获取属性值？

> ID：12212452
> 
> 赞同：36
> 
> 时间：2012-08-31T09:22:23.133
> 
> 标签：powershell, xml-parsing, powershell-2.0

我有一个 XML 文件列表，我必须从中获取特定行之后的字符串。

在文件中，我需要查找标签`Event`并获取属性值`DLLRoutine`。例如，标签看起来像下面...

```
<Event Definition="Validate" DLLPath="" DLLName="Helper.dll" DLLClass="HelpMain" 
       DLLRoutine="pgFeatureInfoOnValidate_WriteToRegSelectedFeatures" 
       InputParameters="pTreeViewFeatureTreeServerOS" RunOnce="no"/> 
```

我只需要获得`Dllroutine`价值。如何使用 PowerShell 执行此操作？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-08-31T10:18:46.773

假设您的 XML 结构类似于：

```
$xml = [xml]'
<Events>
<Event Definition="Validate" DLLPath="" DLLName="Helper.dll" DLLClass="HelpMain" DLLRoutine="pgFeatureInfoOnValidate_WriteToRegSelectedFeatures" InputParameters="pTreeViewFeatureTreeServerOS" RunOnce="no"/>
<Event Definition="Validate1" DLLPath="" DLLName="Helper.dll1" DLLClass="HelpMain1" DLLRoutine="pgFeatureInfoOnValidate_WriteToRegSelectedFeatures" InputParameters="pTreeViewFeatureTreeServerOS" RunOnce="no"/>
</Events>
'

#Or get it from a XML file
$xml = [xml](Get-Content $XMLPath)

$xml.Events.Event | Select DLLName 
```

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2013-09-30T14:39:40.007

假设您的`Event`元素有一个`Events`元素根：

```
$xml.Events.Event.DLLName 
```

我只在 Powershell 3 中测试过这个

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-01T07:24:04.373

您也可以使用 xpath 代替点表示法：

```
$xml.SelectNodes('//Events/Event') | select DLLName 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2017-03-20T14:17:32.600

你可以使用`Select-XML`：

```
$xml = [xml]'
<Events>
<Event Definition="Validate" DLLPath="" DLLName="Helper.dll" DLLClass="HelpMain" DLLRoutine="pgFeatureInfoOnValidate_WriteToRegSelectedFeatures" InputParameters="pTreeViewFeatureTreeServerOS" RunOnce="no"/>
<Event Definition="Validate1" DLLPath="" DLLName="Helper.dll1" DLLClass="HelpMain1" DLLRoutine="pgFeatureInfoOnValidate_WriteToRegSelectedFeatures" InputParameters="pTreeViewFeatureTreeServerOS" RunOnce="no"/>
</Events>
'

Select-XML -xml $xml -xpath "//Event/@DLLName" 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-04-18T15:23:47.317

尝试`$xml.Events.Event.DLLName`

它将在版本 2 中工作，我曾尝试在多个脚本中使用 xpath，但每次都失败，所以直到我尝试使用点表示法，我认为我做错了。

# .net - VS2010项目中资源文件的路径

> ID：12212456
> 
> 赞同：2
> 
> 时间：2012-08-31T09:22:41.183
> 
> 标签：.net, visual-studio-2010, visual-studio, .net-4.0

我正在使用 VS 2010 和 .NET 4.0。

我创建了一个带有单个*控制台*C# 项目的解决方案。我通过项目 > 添加 > 新文件夹的上下文菜单在项目中添加了一些文件夹。然后我把一些文件放在那里。

我现在希望获得这些资源之一的路径（或文件句柄）。有没有很好的方法来获得它的路径？

注意 1：该项目位于源代码控制中，因此我需要一种适用于不同文件路径的方法。

注意 2：如果可能，我不想使用`Directory.GetCurrentDirectory()`nor `System.Reflection.Assembly.GetExecutingAssembly().Location`。

编辑：

看来，我想直接回答[这个](https://stackoverflow.com/a/5606776/540352)Stackoverflow 问题。我想要项目目录，没有“bin\Debug”

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:26:24.673

[来自 MSDN](http://msdn.microsoft.com/en-us/library/aa457089.aspx)：

```
string path = System.IO.Path.GetDirectoryName( 
  System.Reflection.Assembly.GetExecutingAssembly().GetName().CodeBase ); 
```

还要检查[这个](https://stackoverflow.com/a/5606776/540352)Stackoverflow 答案。

# javascript - 如何在使用 javascript 提交之前更改隐藏的输入值？

> ID：12212458
> 
> 赞同：0
> 
> 时间：2012-08-31T09:22:42.430
> 
> 标签：javascript, html, forms

我是 javascript 的初学者，当用户选择带有表单的选项时，我想更改单个输入值，然后将其提交到同一页面。

这是HTML代码：

```
<form id="form" action="thispage.jsp" method="post">
<input id="action_type" type="hidden" name="action_type" value="firstAction" />
<table class="choose">
    <tr>
        <td>Choose your test</td>
        <td><select id="select_test" name="test_name">
            <option value="test0"></option>
            <option value="test1"></option>
        </select></td>
    </tr>
</table> 
```

和javascript函数：

```
form = document.getElementById("form");
action = document.getElementById("action_type");
select = document.getElementById("select_test");
select.onchange = function() {
    action.setAttribute("value", "otherAction");
    form.submit();
} 
```

这会返回一个异常，这段代码有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:25:35.790

我认为表格没有定义。尝试在表单之前添加一个 var。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:24:44.577

这似乎不是 JavaScript 的问题，而是您的 JSP 代码。尝试调试代码并检查失败的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:34:43.427

我认为**nullPointer**显示是因为没有选定的选项。由于代码上没有任何`innerHTML` 内容，因此您无法选择任何内容。

# java - jar 文件：找不到主类 - IntelliJ IDEA

> ID：12212460
> 
> 赞同：4
> 
> 时间：2012-08-31T09:23:00.793
> 
> 标签：java, jar, intellij-idea, manifest

我在 IntelliJ IDEA 中开发了一个 Java 项目。[当我像HERE](http://blogs.jetbrains.com/idea/2010/08/quickly-create-jar-artifact/ "这里")描述的那样构建 jar 工件时，一切都按预期进行。但是，当我双击输出文件夹中生成的 jar 文件时，我收到以下消息：

> 找不到主类：DoxCalculator.DoxCalculator。程序将会退出。

（我的项目和主类都被称为`DoxCalculator`）。当我打开`jar`文件时`WINRAR`，我注意到那里只有我的库文件，但没有编译输出。奇怪，因为根据项目结构窗口中的`artifacts`项目，它应该被包括在内。

我的`MANIFEST.MF`样子是这样的：

```
Manifest-Version: 1.0
Main-Class: DoxCalculator.DoxCalculator 
```

我在论坛上搜索了很多问题，但似乎没有问过类似的问题。

# python - 使用 epy/emacs 跳转到 Python 库源

> ID：12212473
> 
> 赞同：0
> 
> 时间：2012-08-31T09:24:01.650
> 
> 标签：python, emacs, rope

我正在为我的 python 项目使用 epy/ropemacs。如果目标是我的源文件，“Cc g”（rope-goto-definition）可以正常工作。但它不会跳转到第三方源文件。我想要做的是跳转到相关的第三方源文件。

这可能只是让绳子知道图书馆的路径的问题。我不知道该怎么做。任何指示都会有所帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:52:14.707

好的，找到了解决方案。编辑**.ropeproject/config.py**并将这些行添加到**set_prefs**函数

*def set_prefs(prefs):
    ...
**    prefs.add('python_path', '<你的外部库的路径>')***

示例：

*    prefs.add('python_path', '/usr/local/google_appengine')*

# c++ - 来自 MPI 的奇怪分段错误

> ID：12212476
> 
> 赞同：1
> 
> 时间：2012-08-31T09:24:16.637
> 
> 标签：c++, segmentation-fault, mpi

为了练习 MPI 用户定义的数据类型函数，我编写了一个简单的 MPI 程序。以下是抛出段错误的版本。

```
 #include <mpi.h>
    #include <iostream>

    using namespace std;

    int main( int argc , char ** argv )
    {
        int rank;

        MPI_Datatype newtype;
        MPI_Datatype newertype;

        MPI_Init(&argc,&argv);

        MPI_Comm_rank(MPI_COMM_WORLD,&rank);

        MPI_Type_contiguous(2,MPI_INT,&newtype);
        MPI_Type_commit(&newtype);
        MPI_Type_vector(3,2,3,newtype,&newertype);
        MPI_Type_commit(&newertype);    

        int * buffer = new int[16];

        for( int i=0 ; i<16 ; i++ )
        {
            buffer[i] = 0;
        }

        if(rank==0)
        {
            for( int i=0 ; i<16 ; i++ )
            {
                buffer[i] = 9;
            }

            MPI_Send(buffer,3,newertype,1,0,MPI_COMM_WORLD);        

        }else if(rank==1)
        {
            MPI_Recv(buffer,3,newertype,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);

            for( int i=0 ; i<16 ; i++ )
            {
                cout << buffer[i] << " ";
            }

            cout << endl;

        }

        MPI_Type_free(&newertype);
        MPI_Type_free(&newtype);

        MPI_Finalize();

        return 0;
    } 
```

但是，当数组声明移到 MPI_Init 之前时，一切正常。

```
#include <mpi.h>
#include <iostream>

using namespace std;

int main( int argc , char ** argv )
{
    int rank;

    **int * buffer = new int[16];

    for( int i=0 ; i<16 ; i++ )
    {
            buffer[i] = 0;
    }**

    MPI_Datatype newtype;
    MPI_Datatype newertype;

    MPI_Init(&argc,&argv);

    MPI_Comm_rank(MPI_COMM_WORLD,&rank);

    MPI_Type_contiguous(2,MPI_INT,&newtype);
    MPI_Type_commit(&newtype);
    MPI_Type_vector(3,2,3,newtype,&newertype);
    MPI_Type_commit(&newertype);    

    if(rank==0)
    {
        for( int i=0 ; i<16 ; i++ )
        {
            buffer[i] = 9;
        }

        MPI_Send(buffer,3,newertype,1,0,MPI_COMM_WORLD);        

    }else if(rank==1)
    {
        MPI_Recv(buffer,3,newertype,0,0,MPI_COMM_WORLD,MPI_STATUS_IGNORE);

        for( int i=0 ; i<16 ; i++ )
        {
            cout << buffer[i] << " ";
        }

        cout << endl;

    }

    MPI_Type_free(&newertype);
    MPI_Type_free(&newtype);

    MPI_Finalize();

    return 0;
} 
```

谁能解释在 MPI_Init 调用之后声明数组有什么问题？

```
For your information, below is the error message

9 9 9 9 0 0 9 9 9 9 0 0 9 9 9 9 
[linuxscc003:10019] *** Process received signal ***
[linuxscc003:10019] Signal: Segmentation fault (11)
[linuxscc003:10019] Signal code: Address not mapped (1)
[linuxscc003:10019] Failing at address: 0x7fa00d0b36c8 
[linuxscc003:10019] [ 0] /lib64/libpthread.so.0() [0x3abf80f500]
[linuxscc003:10019] [ 1] /opt/MPI/openmpi-1.5.3/linux/gcc/lib/libmpi.so.1(opal_memory_ptmalloc2_int_free+0x299) [0x7f980ce46509]
[linuxscc003:10019] [ 2] /opt/MPI/openmpi-1.5.3/linux/gcc/lib/libmpi.so.1(+0xe7b2b) [0x7f980ce46b2b]                            
[linuxscc003:10019] [ 3] /opt/MPI/openmpi-1.5.3/linux/gcc/lib/libmpi.so.1(+0xf0a60) [0x7f980ce4fa60]                            
[linuxscc003:10019] [ 4] /opt/MPI/openmpi-1.5.3/linux/gcc/lib/libmpi.so.1(mca_base_param_finalize+0x41) [0x7f980ce4f731]        
[linuxscc003:10019] [ 5] /opt/MPI/openmpi-1.5.3/linux/gcc/lib/libmpi.so.1(opal_finalize_util+0x1b) [0x7f980ce3f53b]             
[linuxscc003:10019] [ 6] /opt/MPI/openmpi-1.5.3/linux/gcc/lib/libmpi.so.1(+0x4ce35) [0x7f980cdabe35]                            
[linuxscc003:10019] [ 7] type_contiguous(main+0x1aa) [0x408f2e]                                                                 
[linuxscc003:10019] [ 8] /lib64/libc.so.6(__libc_start_main+0xfd) [0x3abec1ecdd]                                                
[linuxscc003:10019] [ 9] type_contiguous() [0x408cc9]                                                                           
[linuxscc003:10019] *** End of error message ***                                                                                
--------------------------------------------------------------------------                                                      
mpiexec noticed that process rank 1 with PID 10019 on node linuxscc003 exited on signal 11 (Segmentation fault).                
--------------------------------------------------------------------------                                                      
Failure executing command /opt/MPI/openmpi-1.5.3/linux/gcc/bin/mpiexec -x  LD_LIBRARY_PATH -x  PATH -x  OMP_NUM_THREADS -x  MPI_NAME --hostfile /tmp/hostfile-9252 -np 2 type_contiguous 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-01T12:43:18.820

`newertype`有 3 个段，由 2 个元素组成，`newtype`步长为 3。您正在发送 3 个该类型的元素。这意味着从发送或接收操作期间访问的第一个元素到最后一个元素在内存中的跨度是`3*3*3 - 1`（3 个元素，每个元素有 3 个元素的 3 个段，减 1，因为对于最后一个段，您只从 3 个元素中取出 2 个元素) 或 26 个类型的元素`newtype`。每个`newtype`是两个连续的`MPI_INT`元素。您的发送或接收缓冲区应该至少是`52`整数，但您只分配`16`所以`MPI_Recv`排名 1 的内容超过了分配的缓冲区的末尾，可能会覆盖堆控制结构。在调用之前将分配移动到`MPI_Init`更改这些结构在内存中的顺序，您的代码现在正在覆盖一些不同但不重要的东西。代码仍然不正确，您很幸运它没有段错误。使用更大的缓冲区（至少 52 个元素）。

# html - 在 Firefox 中恢复浏览器会话时的 HTML5 会话存储

> ID：12212477
> 
> 赞同：0
> 
> 时间：2012-08-31T09:24:21.807
> 
> 标签：html, session, firefox, storage

在 Firefox 中的当前站点上使用会话存储时，我看到了奇怪的行为。

当用户导航到站点时，会话存储值设置如下：

```
sessionStorage.setItem(cacheKey, cacheValue); 
```

然后我执行检查以查看会话密钥在站点的后续页面上是否具有特定值。如果是这样，那么我运行一个函数，如果不是，那么不要。

但是，如果用户在 Firefox 中打开了“恢复会话”功能，浏览器似乎会存储会话密钥而不是值（空字符串）。我对随后失败的值进行检查，因为该值现在为 null 或空字符串。

有没有更强大的方法来处理这种行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:48:54.437

对于像这样的意外行为，如果“恢复的”会话没有保留该值，我会将其视为新会话。

对值进行简单的空检查就足够了。

```
if (window.sessionStorage.getItem(cacheKey) === null) {
    sessionStorage.setItem(cacheKey, cacheValue);
} 
```

我觉得如果将来该值保持不变，您可能希望保留现有值。

# oracle - Oracle11g中如何授予物化视图权限

> ID：12212479
> 
> 赞同：3
> 
> 时间：2012-08-31T09:24:31.937
> 
> 标签：oracle, oracle11g, materialized-views

我对 oracle 非常陌生，并试图授予我创建的一些物化视图的权利。

我所做的（全部来自 sqlplus 命令行）：

> sqlplus "/ 作为 sysdba

```
>create tablespace tablespace_test datafile 'g:\tables\tablespace_test.dbf' size 20M autoextend on;

>create materialized view test_mv_1 tablespace tablespace_test parallel build immediate refresh complete on demand as select cm.* from yyy.jjj$project@externaldb p, yyy.jjj$mgmt@externaldb cm where (p.project_nbr = cm.project_nbr);

>create user dummy profile default identified by password default tablespace tablespace_test account unlock;

>grant connect to dummy;

>grant select on test_mv_1 to dummy;

>select * from test_mv_1;   <---***this works, data is there

>connect dummy

>select * from test_mv_1;
ERROR at line 1:
ORA-00942: table or view does not exist 
```

不知道如何解决这个问题，我确定我做错了一些事情。任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:42:13.117

如果物化视图的所有者是`SYS`（这是一个**非常**糟糕的主意——你永远不应该在`SYS`模式 中创建对象`SYS`。这是特殊的。它是为 Oracle 保留的。它的行为经常与数据库中的所有其他模式不同。）和没有为物化视图创建同义词，您需要在发出查询时指定完全限定名称为`dummy`. 那是

```
SQL> connect dummy/password
SQL> select * from sys.test_mv_1; 
```

不过，您真的，*真的*，**真的**想在不同的模式中创建物化视图。假设您在`mv_owner`架构中创建物化视图，查询将更改为

```
select *
  from mv_owner.test_mv_1 
```

如果要避免使用完全限定名称，可以创建同义词。如果您创建公共同义词

```
CREATE PUBLIC SYNONYM test_mv_1
   FOR mv_owner.test_mv_1 
```

`dummy`或者如果您在架构中创建私有同义词

```
CREATE SYNONYM test_mv_1
   FOR mv_owner.test_mv_1 
```

然后`dummy`将能够指定一个不合格的对象名称

```
SELECT *
  FROM test_mv_1 
```

# playframework-2.0 - Play 2 框架的社交登录系统

> ID：12212480
> 
> 赞同：2
> 
> 时间：2012-08-31T09:24:38.583
> 
> 标签：playframework-2.0

我是 Play 2 框架的新手。我遇到了 SECURESOCIAL 登录系统，但是在它的 github 站点上，提到它目前不支持 YAHOO 和 LINKEDIN。有人可以指导我更好的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:54:35.143

你可以看看这个其他模块：[play-authenticate](https://github.com/joscha/play-authenticate)

但是您必须为 Yahoo 和 LinkedIn 编写自己的[提供商](https://github.com/joscha/play-authenticate/tree/master/code/app/com/feth/play/module/pa/providers)。

Yahoo 使用 OpenID 2.0 方法，可以在[此处](http://developer.yahoo.com/oauth/guide)找到文档。

LinkedIn 使用 Oauth 1.0a 方法（例如[Twitter](https://github.com/joscha/play-authenticate/blob/master/code/app/com/feth/play/module/pa/providers/oauth1/twitter/TwitterAuthProvider.java)），可以在[此处](https://developer.linkedin.com/documents/authentication)找到文档。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-21T09:51:29.687

我已经创建了您正在寻找的东西：Scala 和 Java 中的 Play 2.x 客户端，它支持 OAuth/CAS/OpenID/HTTP 身份验证和用户配置文件检索：[https](https://github.com/pac4j/play-pac4j) ://github.com/pac4j/play-pac4j 。

对于 OAuth 支持，它基于 Scribe，支持**Yahoo、LinkedIn**、Facebook、Twitter、Google、DropBox、Github、Windows live、WordPress...

# java - 黑莓“错误文件不是有效的 java 代码文件”

> ID：12212481
> 
> 赞同：0
> 
> 时间：2012-08-31T09:24:38.943
> 
> 标签：java, blackberry

在这里我创建了一个应用程序，我需要在设备中运行应用程序但使用 javaloader 但它显示黑莓错误文件不是有效的 java 代码文件。

我还在许多网站上找到了结果，但没有更多成功。

这是其他网站的回复是

1.构建脚本中没有提到主类名，或者如果构建文件中没有设置，则主类（UiApplication）名称与cod文件名不同。2.构建完成的JDE版本与设备操作系统版本不兼容。

这两件事我都没有成功...... :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T12:11:53.840

对 cod 文件大小和同级 cod 文件的数量有[一个声明的限制。](http://supportforums.blackberry.com/t5/Testing-and-Deployment/The-maximum-size-of-a-BlackBerry-smartphone-application/ta-p/1300209)您的应用程序将达到此限制。

将您的大型应用程序项目拆分为一个或多个`library type`项目以及一个`application type`依赖于这些库项目的项目。

# regex - sed 在一个模式后合并 2 行

> ID：12212482
> 
> 赞同：9
> 
> 时间：2012-08-31T09:24:43.343
> 
> 标签：regex, sed

我想在使用 sed 的模式之后合并两行（请不要使用 awk，因为我使用的是 windows）所以例如这里是输入

```
pattern
XXXXXX
YYYYYY 
```

这是输出：

```
 XXXXXXYYYYYY 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-31T09:29:24.360

使用 sed 可以：

```
sed -n '/pattern/ {s/.*//; N; N; s/\n//g; p;}' 
```

### 解释

*   `/pattern/`匹配模式并执行大括号块`{ }`。
*   `s/.*//`从模式空间中删除*模式*，一个更短但更模糊的摆脱*模式*的方法是用命令交换模式空间和保持空间`x`。
*   `N`从输入文件中获取下一行并将其附加到模式空间。
*   `s/[\r\n]//g`从模式空间中删除所有换行符和回车符。
*   `p`打印图案空间。

组合 3 行的稍短的解决方案是：

```
sed -n '/pattern/ {x; N; N; s/\n//g; p;}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:36:28.967

在 Windows 上验证：

```
sed -r '1h; 1!H; ${ g; s/pattern[\r\n]+(.*)[\r\n]+(.*)/\1\2/ p}' infile 
```

^(根据[Multiline sed replace更正](http://www.refining-linux.org/archives/27/20-Multi-line-sed-search-and-replace/))

# bash - BASH CUT 与 CD 相关联

> ID：12212483
> 
> 赞同：0
> 
> 时间：2012-08-31T09:24:56.990
> 
> 标签：bash, cut

我需要一些帮助，因为我无法弄清楚错误。

```
read input    
echo -e "$input" | cut -c4-    
cd "$input" | cut -c4- 
```

所以我输入`cd test`，回显输出是正确的`test`。

我想更改目录，但它给出了`cd cd test`.

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:57:58.987

你想要的应该是：

```
cd $(echo -e "$input" | cut -c4-) 
```

也可以像这样完成（参见 bash “here strings”）

```
cd $(cut -c4- <<<$input) 
```

# asp.net-mvc-3 - MVC3：从 ViewData 检索的数据包含“/”

> ID：12212485
> 
> 赞同：1
> 
> 时间：2012-08-31T09:25:00.803
> 
> 标签：asp.net-mvc-3, partial-views

我有一个小问题。我正在将一个 id 从一个视图传递到另一个视图。我这样做：

```
@Html.Partial("DetailViews/_Parameters", Model.Parameters, new ViewDataDictionary { { "data-resourceId", Model.Id } }) 
```

我将此 id 用于局部视图上表单中的隐藏字段。像这样：

```
<form id="formAddNewParameter" action"#" title="Add new Parameter">
    <input type="hidden" name="resourceId" id="resourceId" class="required" rel="0" value=@ViewData["data-resourceId"]/>
</form> 
```

ID 按原样传递。但是最后总是有一个“/”......任何人都知道这个“/”来自哪里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:37:45.367

您缺少标签值`""`周围的引号`value`

```
<form id="formAddNewParameter" action"#" title="Add new Parameter">
    <input type="hidden" name="resourceId" 
           id="resourceId" class="required" rel="0" 
           value="@(ViewData["data-resourceId"])" />
</form> 
```

而且我猜标签关闭`/`以某种方式混合到值标签中。

# java - webapp 在加载 log4j.properties 之前以 log4j 调试开始

> ID：12212486
> 
> 赞同：0
> 
> 时间：2012-08-31T09:25:03.653
> 
> 标签：java, servlets, logging, struts2, log4j

我从 2010 年开始使用 log4j。很棒的工具。在一个新软件中，我导入了相同的配置和库，但在部署应用程序时从日志记录级别 DEBUG 开始（但我没有设置调试级别）。 **它记录了所有 struts2 和 hibernate 配置（大约 500 行）！** hibernate和struts2启动后，最后软件调用init方法，设置loggin级别为ERROR。（一切都很好）

*我不喜欢这种行为：我希望所有日志都立即处于 ERROR 级别。在我所有的其他软件中，它运行良好。*

* * *

我习惯了这种标准配置：我在 init 方法中的 servlet 中加载 log4j.properties，在 web.xml 中我使用它（我也尝试使用 0 和 -1）：

```
<load-on-startup>1</load-on-startup> 
```

servlet的init方法

```
@Override
    public void init() {
       PropertyConfigurator.configure(log4j_address);
} 
```

这是 log4j.properties：

```
log4j.rootCategory=error, stdout
log4j.logger.org=error
log4j.logger.com=error
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%7p %d{DATE} %-20F:%3L - %m%n 
```

# algorithm - 如何计算树中给定节点之前的叶子？

> ID：12212487
> 
> 赞同：0
> 
> 时间：2012-08-31T09:25:03.560
> 
> 标签：algorithm, tree

您将如何实现一个函数，该函数返回在该树中给定元素之前找到的叶子数？假设您正在从左到右阅读树？

我发现这样做但它不是很简单并且使用异常机制，我认为可能有一种优雅的方式来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:04:05.507

也许您可以对树进行dfs，计算叶子，然后将其保存到每个节点。像

```
int count;

void dfs(int x){
    dfs(x->left);
    leafBefore[x] = count;
    if (x is leaf) count += 1;
    dfs(x->right);
}

count = 0;
dfs(root); 
```

# php - 图片上传后启用/禁用按钮

> ID：12212489
> 
> 赞同：1
> 
> 时间：2012-08-31T09:25:11.317
> 
> 标签：php, ajax

嗨，我正在将图像上传到服务器。我的上传按钮始终处于活动状态，我使用简单的 ajax 代码上传图像而无需页面引用。如何在图像上传后启用选择按钮。我在此处发布的 java 脚本代码...

```
<!--AJAX UPLOADING SCRIPT -->
<script type="text/javascript" src="lib/scripts/jquery.min.js"></script
<script type="text/javascript" src="lib/scripts/jquery.form.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $('#photoimg').live('change', function(){
    $("#preview").html('');
    $("#preview").html('<br /><img src="loader.gif" alt="Uploading...."/>');
    $("#imageform").ajaxForm({target: '#preview'}).submit();
});
});
});
});
///To enable/disable the language button depending on the image upload.      
$(document).ready(function(){
  $("#language").attr('disabled',true);
  $("#language").change(
    function(){
      if ($("#PerformOcrForm").ajaxForm({target: '#previewText'}).submit()) {
          $("#language").removeAttr('disabled',false);
      }
      else {
          $('#language').attr('disabled',true);
     }
 });
});
</script> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-31T11:58:20.733

请尝试使用 firebug 来查看括号的错误。

# iphone - 意外删除 XCDataModel - 应用程序现在抛出 NSInvalidArgumentException - iPhone

> ID：12212491
> 
> 赞同：0
> 
> 时间：2012-08-31T09:25:30.357
> 
> 标签：iphone, objective-c, ios, core-data

我不小心删除了我的核心数据模型文件，然后我尝试重新添加它，但现在我的应用程序抛出以下内容：

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'Cannot create an NSPersistentStoreCoordinator with a nil model'
*** First throw call stack:
(0x1ef6022 0x186ecd6 0x1593a75 0x3021 0x2cea 0x34b0 0x26e5 0x6f0386 0x6f1274 0x700183 0x700c38 0x6f4634 0x2089ef5 0x1eca195 0x1e2eff2 0x1e2d8da 0x1e2cd84 0x1e2cc9b 0x6f0c65 0x6f2626 0x22ed 0x2255)
terminate called throwing an exception(lldb) 
```

谁能解释我需要采取哪些步骤才能让我的应用程序再次运行？

干杯，

泰辛

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:44:40.627

虽然显然应该使用某种形式的源代码控制，但这是一个小项目，所以我没有创建存储库。对于那些在同一条船上的人，以下解决了我的问题：

在方法中：

```
// Returns the managed object model for the application.
// If the model doesn't already exist, it is created from the application's model.
- (NSManagedObjectModel *)managedObjectModel
{
    if (_managedObjectModel != nil) {
        return _managedObjectModel;
    }
    NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"AppName" withExtension:@"momd"];
    _managedObjectModel = [[NSManagedObjectModel alloc] initWithContentsOfURL:modelURL];
    return _managedObjectModel;
} 
```

我改变了这一行：

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"AppName" withExtension:@"momd"]; 
```

到：

```
NSURL *modelURL = [[NSBundle mainBundle] URLForResource:@"AppName" withExtension:@"momd"]; 
```

我刚刚从模型文件扩展名中删除了“d”，一切正常。

# html - 我怎样才能做一个取其内容的大小？在我的项目中，我有以下标记：<select><option>Very looooooooooooooooooooong value</option> <option>Some</option> <option>其他</option> <option>value< ID：12212494 赞同：0 时间：2012-08-31T09:25:38.650 标签：html, css 回答 #1 赞同：2 时间：2012-08-31T09:31:49.707 设置min-width为自动。我在 Chrome 上测试了你的小提琴并且它有效。 回答 #2 赞同：1 时间：2012-08-31T09:28:37.523 如果您在 .bar 上指定宽度，它将提供一定的灵活性，请参见此处 或者，您可以从 .bar 中删除 position:absolute ，请参见此处 回答 #3 赞同：1 时间：2012-08-31T09:40:21.360 消除 foo .bar select { min-width: 100px; } 你会得到你的输出。它不需要。不需要给出任何宽度，而是它的修复或自动 回答 #4 赞同：0 时间：2012-08-31T09:31:06.090 这min-width就是问题所在。删除它，它将在 Firefox 和 Chrome 上运行。</option></select>

# eclipse - 是否可以跨 mac Spotlight、QuickSilver、Eclipse 和 InstaSearch 优化索引？

> ID：12212498
> 
> 赞同：0
> 
> 时间：2012-08-31T09:25:45.670
> 
> 标签：eclipse, macos, quicksilver

我正在为 Eclipse 使用 Spotlight、QuickSilver、Eclipse 和 InstaSearch 插件。这些模块中的每一个都具有搜索功能。我猜这些模块中的每一个都可能使用自己的索引，并且想知道是否可以强制所有这些/其中一些应用程序使用单个索引，以便我们可以节省 CPU 周期时间。可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T13:25:46.170

经过大量研究，我得出结论，这是不可能的。

# php - 如何在 php 中创建 if 语句以执行特定操作，具体取决于其中包含字符串的表单

> ID：12212499
> 
> 赞同：-3
> 
> 时间：2012-08-31T09:25:44.970
> 
> 标签：php, forms, variables

我试图在我的页面上的每个单元格中创建一个网格，会有一个简单的单行表格。如果一个人将数据输入到让我们说 FieldA 我希望 php 执行 actionA 但如果数据输入到 FieldF 我希望执行 actionF。这是否可能无需为每个单元格创建一个 php 并上传所有这些 php 文件？

或者有没有办法在每个表单中执行 GET 方法以将数据附加到操作 url 的末尾而不显示字段名称（即 sample.com/somestuff/fieldA 而不是 sample.com/somestuff/fieldname=fieldA）因此根本不需要php？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:35:53.013

你的问题对我来说有点模棱两可。不过我会试一试。

在我要设置的表格上：

```
`method="post" action="<?php echo $PHP_SELF ?>"` 
```

这将导致表单提交回自身。然后在页面顶部，您可以执行以下操作：

```
<?php
    if (isset($_POST["fieldA"]){
        performActionA();
    } else if (isset($_POST["fieldB"]){
        performActionB();
    }
    etc...
?> 
```

那是你想要做的吗？请记住，php 在与用户进行任何交互之前在服务器端执行。

否则您可以使用 javascript 来更改表单的操作字段。（未经测试）

```
<script type="text/javascript">
  function setAction(elt){
      var page = document.getElementById(elt).value;
      document.myform.action="sample.com/somestuff/"+page;
  }
</script>

<form id="myform" action="sample.com/somestuff/">
   <input type="text" name="text1" onchange="setAction('text1')" />
</form> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:36:59.813

你有没有试过什么。请尝试编写一些代码。如果你被打到在这里粘贴代码，有人会帮助你..

在我看来，为什么你需要不同的形式。只需拥有一个包含 n 个文本框的表单并执行您需要的任务。

# r - 合并两个数据环境和 do.call()

> ID：12212503
> 
> 赞同：0
> 
> 时间：2012-08-31T09:25:55.623
> 
> 标签：r

考虑以下代码

```
require(quantmod)

list.X <- c('ANFCI',  'NFCI', 'STLFSI', 'WAAA', 'WBAA', 'WCOILWTICO','WFII10', 
            'WGS10YR', 'WGS1YR', 'WGS3YR', 'WGS5YR', 'WSWP10', 'WTB3MS')
data.X <- new.env()
getSymbols(list.X, src = 'FRED', from = '1950-01-01', env = data.X) 
```

现在我把这些时间序列放在`data.X`环境中；让我需要输入`data.X`另一个时间序列：

```
getSymbols('SPY', from = '1950-01-01', env = data.X) 
```

默认情况下，这是从 Yahoo 下载的。使用最后一个命令，我是否根据需要将其放入`data.X`？

然后让我想合并它们。我相信像

```
X <- do.call(merge, as.list(c(list.X, 'SPY')), envir = data.X) 
```

可以工作，但该命令不起作用。

你能建议我一些工作吗？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:01:55.083

尝试这个：

```
mmerge <- function(.list, all=FALSE, env=.GlobalEnv) {
  .list <- lapply(.list, get, env)
  Reduce(function(...) merge(..., all=all), .list)
}

head(mmerge(list.X, env=data.X))
head(mmerge(as.list(c(list.X, 'SPY')), env=data.X)) 
```

对[这个问题点头](https://stackoverflow.com/questions/8091303/merge-multiple-data-frames-in-a-list-simultaneously)

# google-chrome - 打开新标签页/新窗口时自动打开 Chrome 开发者工具

> ID：12212504
> 
> 赞同：319
> 
> 时间：2012-08-31T09:25:55.963
> 
> 标签：google-chrome, google-chrome-devtools

我有 HTML5 应用程序，通过单击链接在新窗口中打开。每次我想记录网络通信以启动**开发人员工具**时，我有点厌倦了按**Shift + I** ，因为我总是需要它。我找不到在启动时始终启用开发人员工具的选项。

 **在 Chrome 中打开新窗口时，有什么方法可以自动打开**开发者工具？**

* * *

## 回答 #1

> 赞同：289
> 
> 时间：2016-07-14T05:37:12.970

在打开开发人员工具时，在开发人员工具窗口处于焦点的情况下，按`F1`。这将打开一个设置页面。检查“自动打开 DevTools 弹出窗口”。

这对我有用。

[![截屏](../Images/8833c744396fb42bd175febc729bf679.png)](https://i.stack.imgur.com/dHH3a.png)

* * *

## 回答 #2

> 赞同：111
> 
> 时间：2012-12-06T16:00:48.980

**更新 2：**

看到[这个答案](https://stackoverflow.com/a/38366206/2238544)。- 2019-11-05

如果它们在您打开它们的位置打开，您现在还可以让它在弹出窗口中自动打开开发人员工具。例如，如果您没有打开开发工具并看到一个弹出窗口，则它不会使用开发工具打开。但是如果你打开了开发工具然后你点击了一些东西，弹出窗口将自动打开开发工具。

**更新：**

时间变了，您现在可以在[此答案](https://stackoverflow.com/questions/12212504/automatically-open-chrome-developer-tools-when-new-tab-new-window-is-opened/36957422#36957422)中使用 --auto-open-devtools-for-tabs – Wouter Huysentruit 5 月 18 日 11:08

**操作：**

我在执行时使用了 Chrome 的启动字符串，但无法让它持续到新标签页。
我还考虑了一个可以从提示符调用的已定义 PATH 方法。这可以通过 SendKeys 命令实现，但同样只能在新实例上。并且 DevTools 不会持续到新选项卡。

浏览 Google 产品论坛，Chrome 中似乎没有内置的方法可以做到这一点。您必须使用击键解决方案或`F12`如上所述。

我推荐它作为一个功能。我知道我也不是第一个。

* * *

## 回答 #3

> 赞同：107
> 
> 时间：2016-04-30T16:33:01.723

为此有一个命令行开关：`--auto-open-devtools-for-tabs`

因此，对于 Google Chrome 上的属性，请使用以下内容：

```
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --auto-open-devtools-for-tabs 
```

这是一个有用的链接： [chromium-command-line-switches](http://peter.sh/experiments/chromium-command-line-switches/)

* * *

## 回答 #4

> 赞同：34
> 
> 时间：2017-07-26T14:12:04.283

在 Mac 上：退出 Chrome，然后在终端窗口中运行以下命令：

```
open -a "Google Chrome" --args --auto-open-devtools-for-tabs 
```

* * *

## 回答 #5

> 赞同：22
> 
> 时间：2017-11-03T19:45:53.527

在您启用的 Chrome DevTools 设置下：

在 Network -> Preserve Log Under DevTools -> Auto-open DevTools for popups

* * *

## 回答 #6

> 赞同：17
> 
> 时间：2020-01-23T05:24:31.963

在 Developer Tools 窗口可见的情况下，单击菜单图标（右上角的三个垂直点），然后单击**Settings**。

[![环境](../Images/d44fe2e3e1f9da8931170d0e353cea99.png)](https://i.stack.imgur.com/zdvQM.png)

在**Dev Tools**下，选中**Auto-open DevTools for popups**选项

[![设置细节](../Images/708f8eb19ff860ef17b957975624f7f4.png)](https://i.stack.imgur.com/ryYrA.png)

* * *

## 回答 #7

> 赞同：9
> 
> 时间：2012-10-25T09:04:44.953

F12 比 Ctrl+Shift+I 更容易

* * *

## 回答 #8

> 赞同：7
> 
> 时间：2019-01-27T08:33:26.000

如果您使用 Visual Studio Code (vscode)，使用非常流行的 vscode chrome 调试扩展 ( [https://github.com/Microsoft/vscode-chrome-debug](https://github.com/Microsoft/vscode-chrome-debug) )，您可以设置启动配置文件`launch.json`并指定在期间打开开发人员工具调试会话。

这是`launch.json`我用于我的 React 项目的：

```
{
  "version": "0.2.0",
  "configurations": [
    {
      "type": "chrome",
      "request": "launch",
      "name": "Launch Chrome against localhost",
      "url": "http://localhost:3000",
      "runtimeArgs": ["--auto-open-devtools-for-tabs"],
      "webRoot": "${workspaceRoot}/src"
    }
  ]
} 
```

重要的线是`"runtimeArgs": ["--auto-open-devtools-for-tabs"],`

您现在可以在 vscode 中输入`F5`，Chrome 也会打开您的应用程序和控制台选项卡。

* * *

## 回答 #9

> 赞同：6
> 
> 时间：2021-11-05T09:45:18.227

2021年的答案：

1.  打开开发工具（在 Windows 上为 CTRL+SHIFT+I）
2.  单击“齿轮”图标。将出现新的设置窗口。

[![设置](../Images/963b93874e5208743daa8f66e317624f.png)](https://i.stack.imgur.com/8mvnU.png)

3.  “自动打开弹出窗口的 DevTools”现在位于“首选项”部分。

[![实际位置](../Images/ad9f20230f01dab620e9f18e2442c19d.png)](https://i.stack.imgur.com/BC7uZ.png)

* * *

## 回答 #10

> 赞同：4
> 
> 时间：2015-01-04T22:09:03.417

我来这里是为了寻找类似的解决方案。我真的很想从新选项卡中查看页面加载的 chrome 输出。（在我的情况下是表单提交）我实际使用的解决方案是修改表单目标属性，以便表单提交将发生在当前选项卡中。我能够捕获网络请求。问题解决了！

* * *

## 回答 #11

> 赞同：4
> 
> 时间：2018-01-23T19:50:37.757

任何想要在 Visual Studio 中执行此操作的人，这篇[代码项目](https://www.codeproject.com/Tips/644059/Run-Debug-with-new-browser-session-in-Visual-Studi)文章都会有所帮助。只需在参数框中添加“--auto-open-devtools-for-tabs”。2017年工作。

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2020-04-14T15:01:51.847

`--auto-open-devtools-for-tabs`从命令行运行 chrome 时 使用标志

/Applications/Google\ Chrome.app/Contents/MacOS/Google\ Chrome --auto-open-devtools-for-tabs

[https://developers.google.com/web/tools/chrome-devtools/open#auto](https://developers.google.com/web/tools/chrome-devtools/open#auto)

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2016-03-29T15:03:39.287

是的，有一种方法可以做到

1.  右键单击->检查->源（选项卡）

2.  在你的右边会有一个“暂停脚本执行按钮” [![此链接指向的图像中突出显示的按钮是脚本执行按钮，可以根据需要暂停或播放。自己尝试](../Images/b155a739bd134599b101c836c6d7361f.png)](https://i.stack.imgur.com/N2i6w.png)

我希望它有帮助！和平

*   PS：这是第一次。从第二次开始，开发工具会自动加载

* * *

## 回答 #14

> 赞同：-2
> 
> 时间：2021-11-17T04:42:14.580

您可以打开停靠视图设置并根据需要调整窗口。附上截图。

[![Dock_view_seetings](../Images/e5e7097d66b3235fa93f5a7de24c3ccc.png)](https://i.stack.imgur.com/KXWzn.png)

* * *

## 回答 #15

> 赞同：-6
> 
> 时间：2018-05-25T16:07:52.580

您可以通过右下角在新窗口中打开开发工具（`F12`在 Chrome 中） ，然后选择.`clicking three, vertical dots``Open as Separate Window`**

# windows - 在哪里可以找到 mongodb Windows 和 mongodb Linux 之间的对应关系列表？

> ID：12212505
> 
> 赞同：-1
> 
> 时间：2012-08-31T09:25:57.203
> 
> 标签：windows, linux, mongodb

例如（我想知道所有这些是否应该是单独的问题）：

1.  Linux 中 mongod.exe 的等价物是什么？
2.  Windows 中 mongodb.conf 的等价物是什么？
3.  当计算机在 Windows 中启动时，我们如何使 mongodb 启动？

例如，在 mongodb 窗口中，我有一个名为 mongod.exe 的文件运行它运行 mongod“服务”或其他东西，然后它显示 mongodb 正在发生的事情的状态。

例如，这是 mongod.exe 显示的内容：

```
Fri Aug 31 16:08:13 [conn6232] end connection 127.0.0.1:19782
Fri Aug 31 16:08:13 [initandlisten] connection accepted from 127.0.0.1:19783 #
33
Fri Aug 31 16:08:13 [conn6233] end connection 127.0.0.1:19783
Fri Aug 31 16:08:13 [initandlisten] connection accepted from 127.0.0.1:19784 #
34
Fri Aug 31 16:08:13 [conn6234] end connection 127.0.0.1:19784
Fri Aug 31 16:08:13 [initandlisten] connection accepted from 127.0.0.1:19785 #
35
Fri Aug 31 16:08:13 [conn6235] end connection 127.0.0.1:19785
Fri Aug 31 16:08:13 [initandlisten] connection accepted from 127.0.0.1:19786 #
36
Fri Aug 31 16:08:13 [conn6236] end connection 127.0.0.1:19786
Fri Aug 31 16:08:13 [initandlisten] connection accepted from 127.0.0.1:19787 #
37
Fri Aug 31 16:08:13 [initandlisten] connection accepted from 127.0.0.1:19788 #
38
Fri Aug 31 16:08:13 [conn6238] end connection 127.0.0.1:19788 
```

什么是 mongod.exe 在 linux 中的等价物？

同样在 Linux 中，我们有一个名为 mongodb.conf 的东西，我们在其中设置，例如，数据目录在哪里。在windows中，windows中mongodb.conf的等价物是什么？在 Windows 中，如果我想更改数据目录，我只需复制并移动整个 mongod 目录。我什至不确定这是否是正确的方法。

然后在 Linux 中，一旦我安装了 mongodb，它就会在我每次重新启动服务器时自动运行。在 Windows 中，我必须先运行 mongod.exe。嗯...如何安排 mongodb 在 Windows 中作为服务自动运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:51:39.093

> Linux 中 mongod.exe 的等价物是什么？

答：mongod（Linux 不使用文件扩展名来表示可执行文件）

> Windows 中 mongodb.conf 的等价物是什么？

它们是相同的 - 这只是两个系统上的一个文本文件，您可以在两个系统上使用相同的文件（在调整文件路径差异等之后）

> 当计算机在 Windows 中启动时，我们如何使 mongodb 启动？

您将其安装为服务，如下所述：

[http://www.mongodb.org/display/DOCS/Windows+Service](http://www.mongodb.org/display/DOCS/Windows+Service)

# iphone - 如何在xcode中的每个第n个字符之后将逗号添加到字符串

> ID：12212508
> 
> 赞同：0
> 
> 时间：2012-08-31T09:26:01.657
> 
> 标签：iphone, nsstring, xcode4.3

我的问题很简单。我在 xcode 中为字符串变量赋值，如下所示：

ARAMAUBEBABRBGCNDKDEEEFO，我需要这样的：

AR,AM,AU,BE,BA,BR,BG,CN,DK,DE,EE,FO 每个变量的长度不同。

提前谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-07-17T17:45:29.230

此功能对于需要每千次昏迷的数字很有用……这就是我想要的，希望对您有所帮助。

```
//add comas to a a string... 
//example1: @"5123" = @"5,123" 
//example2: @"123" = @"123" 
//example3: @"123123123" = @"123,123,123"
-(NSString*) addComasToStringEvery3chrsFromRightToLeft:(NSString*) myString{
    NSMutableString *stringFormatted = [NSMutableString stringWithFormat:@"%@",myString];
        for(NSInteger i=[stringFormatted length]-3;i>0;i=i-3) {
            if (i>0) {
                [stringFormatted insertString: @"," atIndex: i];
            }
        }
    return stringFormatted;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-01T06:12:12.177

```
NSString *yourString; // the string you want to process
int len = 2;  // the length
NSMutableString *str = [NSMutableString string];
int i = 0;
for (; i < [yourString length]; i+=len) {
    NSRange range = NSMakeRange(i, len);
    [str appendString:[yourString substringWithRange:range]];
    [str appendString:@","];
}
if (i < [str length]-1) {  // add remain part
    [str appendString:[yourString substringFromIndex:i]];
}
// str now is what your want 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T06:15:22.033

尝试这个：

```
int num;
NSMutableString *string1 = [NSMutableString stringWithString: @"1234567890"];   
num = [string1 length];
for(int i=3;i<=num+1;i++) {
  [string1 insertString: @"," atIndex: i];
  i+=3;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T07:16:32.937

当您的字符串不是很大时，这会很好用：

```
NSString * StringByInsertingStringEveryNCharacters(NSString * const pString,
                                                   NSString * const pStringToInsert,
                                                   const size_t n) {
    NSMutableString * const s = pString.mutableCopy;
    for (NSUInteger pos = n, advance = n + pStringToInsert.length; pos < s.length; pos += advance) {
        [s insertString:pStringToInsert atIndex:pos];
    }
    return s.copy;
} 
```

如果字符串非常大，您应该倾向于在不插入的情况下组合它（仅附加）。

*（定义您自己的错误检测）*

# ios - 应用没有网络连接

> ID：12212532
> 
> 赞同：4
> 
> 时间：2012-08-31T09:27:11.257
> 
> 标签：ios, cordova

我的应用程序的 iOS 版本似乎根本不想连接到互联网。有人可以指出我正确的方向吗？

我已将我尝试连接的地址添加到白名单中。虽然我不确定从哪里开始，因为这是我的第一个 iOS 应用程序。我不确定是否在我没有看到的地方产生了错误。

该应用程序构建良好，并被推送到模拟器和物理 iPhone。它适用于模拟器。iPhone 有连接并且可以浏览网页，所以我知道这不是问题。

让我知道您可能还需要什么帮助，因为我不确定我需要提供什么。

**编辑**

下面的脚本使用backbone.js 模型将用户登录到系统，该模型向服务器发送ajax 请求。这在 Android Build 上运行良好。

```
App.user = new App.model.user({
    'email'     : $(event.currentTarget).find('#email').val(),
    'password'  : $(event.currentTarget).find('#password').val()
}); 
```

用户模型：

```
App.model.user = Backbone.Model.extend({
    defaults    : {
        "email"         : null,
        "password"      : null,
    },
    initialize  : function () {
        this.save(null, {
            success : function (model, response) {
                App.loggedIn = true;
                App.navigate("menu", {
                    trigger : true,
                    replace : true
                });
                App.menu();
            },
            error   : function (model, response) {
                try {
                    App.mainView.error(response.resultMessage);
                } catch (e) {
                    console.log(e);
                }
            },
            wait    : true
        });
    },
    urlRoot     : App.config.siteUrl + "/gateway/user"
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T06:04:23.533

我会尝试以下。

1）有一个虚拟的html页面

```
< html>
 < head>
  < script>
      window.location.href="Your absolute URL you are trying to reach"
  < /script>
 < /head>
 < body>Loading< /body>
< /html> 
```

如果这不起作用，请将白名单设置为 * 并重试。如果设置白名单的方式出现问题

2) 查看您是否正在访问安全 URL。如果它可以在模拟器上运行而不能在手机上运行，​​请查看手机是否可以访问您尝试点击的 URL。尝试使用移动 Safari。

3）确保您使用的是正确的科尔多瓦文件。（cordova.js 在 Android 和 IOS 之间是不同的）

4）如果移动 safari 能够连接，他们尝试使用[这个很棒的帖子中指定的 webview 调试器](http://atnan.com/blog/2011/11/17/enabling-remote-debugging-via-private-apis-in-mobile-safari/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:24:01.980

我认为你必须解决你`Cordova.plist`：

[http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html](http://docs.phonegap.com/en/1.9.0/guide_whitelist_index.md.html)

# c# - PDFBox 抛出异常：NullReference 异常

> ID：12212535
> 
> 赞同：0
> 
> 时间：2012-08-31T09:27:33.393
> 
> 标签：c#, .net, nullreferenceexception, pdfbox

pdfbox问题

我使用 pdfbox 将文本从 PDF 提取到我的richtextbox。

我不知道问题出在哪里，但有一些 PDF 很好，但有一些 PDF 会引发异常，例外情况是：

> 你调用的对象是空的。

这是我的代码：

```
using org.pdfbox.pdmodel;
using org.pdfbox.util;

private void pdfButton_Click(object sender, EventArgs e)
{
    OpenFileDialog openFD = new OpenFileDialog();
    openFD.FileName = "";
    openFD.InitialDirectory = "C:\\";
    openFD.Filter = "All PDF Files|*.PDF";
    openFD.Title = "Browse all PDF files";

    if (openFD.ShowDialog() == DialogResult.OK)
    {
        try
        {
            pdf_filename = Path.GetFileNameWithoutExtension(openFD.Filename);
            PDDocument pdfFile = PDDocument.load(openFD.Filename);

            PDFTextStripper pdfStripper = new PDFTextStripper();
            richtextBox1.Text = pdfStripper.getText(pdfFile);
            textBox1.Text = Path.GetFileName(openFD.Filename);
        }
        catch (Exception error)
        {
            MessageBox.Show(error.ToString());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T04:45:34.717

我使用 iTextSharp 解决了这个问题。这是我的同事建议的，我用 iTextSharp 更改了 PDFBox。

如果有人和我有同样的问题，这里的工作代码：

```
using iTextSharp.text.pdf;
using iTextSharp.text.pdf.parser;

private void pdfButton_Click(object sender, EventArgs e)
{
    OpenFileDialog openFD = new OpenFileDialog();
    openFD.FileName = "";
    openFD.InitialDirectory = "C:\\";
    openFD.Filter = "All PDF Files|*.PDF";
    openFD.Title = "Browse all PDF files";

    if (openFD.ShowDialog() == DialogResult.OK)
    {
        try
        {
            pdf_filename = Path.GetFileNameWithoutExtension(openFD.Filename);

            richtextBox1.Text = ReadPdf(openFD.FileName);
            textBox1.Text = Path.GetFileName(openFD.Filename);
        }

        catch (Exception error)
        {
            MessageBox.Show(error.ToString());
        }

    }
}

private string ReadPdf(string filename)
{

    if (!File.Exists(filename)) return string.Empty;

    PdfReader reader = new PdfReader(filename);

    string text = string.Empty;

    for (int page = 1; page <= reader.NumberOfPages; page++)
    {

        text += PdfTextExtractor.GetTextFromPage(reader, page);

    }

    return text;
} 
```

# jsf - 由于 JSF 数据表中组件的客户端 ID 相同而导致的错误

> ID：12212536
> 
> 赞同：0
> 
> 时间：2012-08-31T09:27:34.220
> 
> 标签：jsf, jsf-2

我有一个带有数据表的 JSF 应用程序。每行都有一个“commandLink”。单击行的 commandLink 时，必须在控制台上显示行数据。

点击commandLink时出现错误，错误如下：

```
component with duplicate id "dataTable1:col1" found

viewId=/UserHome.xhtml
location=E:\workspaces_eclipse\webService\.metadata\.plugins \org.eclipse.wst.server.core\tmp2\wtpwebapps\JSF_Demo\UserHome.xhtml
phaseId=RENDER_RESPONSE(6)

Caused by:
java.lang.IllegalStateException - component with duplicate id "dataTable1:col1" found
at  org.apache.myfaces.view.facelets.compiler.CheckDuplicateIdFaceletUtils.checkIds(CheckDuplic    ateIdFaceletUtils.java:100) 
```

该错误表明组件具有相同的 ID，但是我尝试为数据表的每个元素提供不同的“id”。

JSF 文件“UserHome.xhtml”的源代码如下：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org /TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:f="http://java.sun.com/jsf/core"   xmlns:h="http://java.sun.com/jsf/html">
     <h:head>
    <title>Resource Net 1.0</title>
    <h:outputStylesheet library="css" name="table-style.css"></h:outputStylesheet>
</h:head>
<h:body>
   <div align="center">
   <table width="90%" height="100%" border="0" style="cellspacing:0; border-radius:10px ;box-shadow: 0px 0px 15px 10px #888888">
    <tr>
        <td>
            <h2><div align="center">Resource Net 1.0</div></h2>
        </td>
    </tr>
    <tr>
        <td>                
            2\. Generated by Map :
            <h:selectOneMenu value="#{userHomeListener.favCoffee2}">
                <f:selectItems value="#{userHomeListener.allDomains}" />
            </h:selectOneMenu>
        </td>
    </tr>       
    <tr>
        <td>
            <h:dataTable value="#{userHomeListener.documents}" var="doc"
                         binding="#{userHomeListener.documentsTable}"
                          id="dataTable1"                            
                         styleClass="order-table"
                         headerClass="order-table-header"
                         rowClasses="order-table-odd-row,order-table-even-row"
                         border="1">

                <h:column id="col1">
                    <f:facet name="header1">Document ID</f:facet>
                    #{doc.docID}
                </h:column>
                <h:column id="col2">
                    <f:facet name="header2">Document Name</f:facet>
                    #{doc.docName}
                </h:column>
                <h:column  id="col3">
                    <f:facet name="header3">Document Link</f:facet>
                     <h:form id="form1">
                     <h:commandLink id="link" value="#{doc.docLink}" action="#{userHomeListener.getRowData}"></h:commandLink>
                     </h:form>
                </h:column>
                <h:column id="col4">
                    <f:facet name="header4">Upload Date</f:facet>
                    #{doc.uploadDate}
                </h:column>

            </h:dataTable>
            <h:commandButton value="get row data" ></h:commandButton>
        </td>
    </tr>
    </table>

    </div>
</h:body> 
```

我的代码有问题吗？请提出解决此问题的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:51:13.390

的`binding`属性`<h:dataTable>`是这里的嫌疑犯。当 bean 的范围太广和/或您在该属性的 getter/setter 中做“错误的事情”时，可能会导致此类问题。

将 bean 放入请求范围和/或寻找替代方法以便您可以完全摆脱它`binding`应该可以解决这个问题。

`binding`属性和命令链接操作方法的名称的组合`getRowData`表明您只是使用它来获取当前表行。在使用旧的 JSF 1.x 时确实是这样，但在使用新的 JSF 2.x 时就不是这样了。当您运行支持 Servlet 3.0 / EL 2.2 的容器（Tomcat 7、Glassfish 3 等）时，这可以做得更好、更简单。

```
<h:dataTable value="#{userHomeListener.documents}" var="doc">
    <h:column>
        <h:form>
            <h:commandLink value="#{doc.docLink}" action="#{userHomeListener.getRowData(doc)}" />
        </h:form>
    </h:column>
</h:dataTable> 
```

和

```
public void getRowData(Document doc) {
    // ...
} 
```

你看，你可以直接传递`#{doc}`作为方法参数。

### 也可以看看：

*   [如何将选定的行传递给 dataTable 中的 commandLink？](https://stackoverflow.com/questions/4994458/how-can-i-pass-a-parameter-to-a-commandlink-inside-a-datatable)
*   [推荐的 JSF 2.0 CRUD 框架](https://stackoverflow.com/questions/3180400/recommended-jsf-2-0-crud-frameworks/3180885#3180885)

# java - 通过缓存加速重复操作

> ID：12212541
> 
> 赞同：1
> 
> 时间：2012-08-31T09:28:05.213
> 
> 标签：java, google-app-engine, objectify

缓存如何与 App Engine 配合使用？只需添加`@Cached`注释就足够了：

```
@Cached
public class MyEntity {
    @Id Long id;
    ...
} 
```

但是，来自 Objectify 文档：

“在 v3.1 之前，Objectify 的全局缓存支持存在争用的同步问题。**不要将它用于需要事务完整性的实体**，并且强烈建议您对所有缓存值应用过期期限。”

这是否意味着如果我有一个在下面具有此表单的代码，我不应该使用它？

```
DAOT.repeatInTransaction(new Transactable() {
        @Override
        public void run(DAOT daot)
        {
                Counter count = daot.ofy().find(Counter.class, COUNTER_ID);
                count.increment();
                daot.ofy().put(count);
        }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T19:00:21.260

Objectify 尽其所能使其全局缓存支持[尽可能事务](https://code.google.com/p/objectify-appengine/wiki/IntroductionToObjectify)性：

> 3.1 中的缓存已从头开始重写，以提供与数据存储的近事务一致性。

例如，如果您的请求或任务在截止日期限制下运行，则有可能[写入数据存储但不会更新缓存](https://code.google.com/p/objectify-appengine/wiki/MemcacheStandalone)：

> 缓存是近乎事务性的。在正常操作下，缓存不会与数据存储不同步，即使是在激烈争用的情况下。例外情况是 DeadlineExceededException 在 30s（任务 10m）硬期限。如果 Google 在缓存更新发生之前终止了您的进程，我们将无能为力。

# javascript - 为什么 Javascript 程序员更喜欢在代码中为常量重复字符串而不是使用枚举类型的对象？

> ID：12212542
> 
> 赞同：4
> 
> 时间：2012-08-31T09:28:09.230
> 
> 标签：javascript

我试图理解为什么 Javascript 程序员看不到使用类似枚举的对象来表示常量值而不是在整个代码中重复字符串的价值？例如：

```
foo.addEventListener("someEvent", function(event) { .... }); 
```

对比

```
foo.addEventListener(events.someEvent, function(event) { .... }); 
```

对我来说，第二个似乎更好，因为当你传入无效值时，像[JSLint](http://www.jslint.com/)`events`这样的工具将更有可能解决问题（如果它可以看到 的声明）。

我听到的支持字符串的论点基本上是“这就是 javascript 程序员这样做的方式”，这让我很恼火，因为它似乎与我曾经工作过的几乎所有其他语言的最佳实践背道而驰在。

所以请帮助我理解：这是我试图将我的 C 习惯强加给 JS 开发人员的一个案例——我需要学习改变我的方式吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:32:15.750

我个人不知道，但我认为问题在于许多 JS 编码人员没有意识到您可以（ab）使用关联数组来提供类似枚举的效果。

```
var events = {
    someEvent : "someEvent",
    someOtherEvent : "someOtherEvent"
}

foo(events.someEvent); 
```

这样做绝对是一个好习惯，并且避免了很多编码问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:32:48.613

在 JavaScript 中，属性查找可能很昂贵（范围遍历加上长原型链）。

而且我还没有看到一个静态分析器（包括 JSLint）实际上提取了一个对象的内容。

我个人喜欢你的方法，但它需要权衡取舍。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T09:49:14.607

我不确定是谁告诉你的，但我个人上了一门专注于 Web 开发的课程，他们确实建议你将变量作为常量放在全局范围内，而不是一遍又一遍地不断输入字符串。它减少了麻烦，更有条理，在某些情况下甚至可以帮助实现可扩展性。

但是，我会说，总的来说，如果可以的话，最好避免使用全局变量（这在您可能知道的所有编码语言中都可以看到）。理想情况下，如果您不需要使其全球化并保持本地化，那么您应该这样做。如果您发现自己传递一个变量或一遍又一遍地使用一个不会改变的常量，那么是的，最好将它放在一个变量中。

底线：你不需要改变你的方式。实际上，我敢打赌，很多 JS 开发人员没有这些良好实践的原因是因为 javascript 的灵活性。我敢肯定，如果很多 JS 开发人员将 Java 或 C 作为他们的第一语言学习，他们也会有这些好习惯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:33:36.977

因为您必须`events`在 global/clusure 范围内添加变量。

但在 javascript 中，您应该始终将变量保留在本地范围内，因为这样会快得多。

# asp.net - 如何为我的代码 C# 设置增加的 ASP.NET 会话超时？

> ID：12212546
> 
> 赞同：2
> 
> 时间：2012-08-31T09:28:15.927
> 
> 标签：asp.net

如何增加 C# ASP.NET 应用程序的会话超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:30:06.407

这通常在文件的`<sessionState>`元素中完成`Web.config`。在此处查看 MSDN：

[http://msdn.microsoft.com/en-us/library/h6bb9cz9%28vs.80%29.aspx](http://msdn.microsoft.com/en-us/library/h6bb9cz9%28vs.80%29.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:30:43.523

您可以使用以下代码：

```
Session.Timeout = 4000; 
```

它以分钟为单位设置超时。

或按照[David M](https://stackoverflow.com/a/12212581#13198)`web.config`的建议适用于所有用户

# c++ - 为什么 valgrind(helgrind) 会在我的线程结构上调用虚函数时生成“可能的数据竞争”

> ID：12212547
> 
> 赞同：5
> 
> 时间：2012-08-31T09:28:16.990
> 
> 标签：c++, valgrind

当我开始学习 valgrind(helgrind) 工具时，我遇到了一个我没能解决的棘手问题。

简单地说，用户定义的线程类是用一个虚函数创建的，该虚函数将由线程的入口例程调用。如果是这种情况，helgrind 将报告可能的数据竞争。但是在简单地省略 virtual 关键字之后，就不会报告此类错误。怎么会这样？我的代码有什么问题吗？或者有解决方法吗？

以下是演示此类问题的简单线程应用程序，包括 cpp、Makefile 和 helgrind 报告的消息。

```
/* main.cpp */
#include <memory.h>
#include <pthread.h>

class thread_s {
public:
  pthread_t       th;
  thread_s(void);
  ~thread_s(void);
  virtual void* routine(); /* if omit virtual, no error would be generated */
  void stop(void);
};
static void* routine(void*);
int main(int, const char*[])
{
  thread_s s_v;
  pthread_create(&s_v.th, 0, routine, &s_v);
  return 0;
}
static void* routine(void* arg)
{
  thread_s *pV = reinterpret_cast<thread_s*>(arg);
  pV->routine();
  return 0;
}
void* thread_s::routine(void)
{
  return 0;
}
thread_s::thread_s(void)
{
  th = 0;
}
thread_s::~thread_s(void)
{
  stop();
}
void thread_s::stop(void)
{
  void *v = 0;
  pthread_join(th, &v);
} 
```

========================================

```
/* Makefile */
all: main test_helgrind

main: main.cpp
        g++ -o main main.cpp \
        -g -Wall -O0 \
        -lpthread

test_helgrind:
        valgrind \
                --tool=helgrind \
                ./main

clean:
        rm -f main

.PHONY: clean 
```

========================================

```
g++ -o main main.cpp \
        -g -Wall -O0 \
        -lpthread
valgrind \
                --tool=helgrind \
                ./main
==7477== Helgrind, a thread error detector
==7477== Copyright (C) 2007-2010, and GNU GPL'd, by OpenWorks LLP et al.
==7477== Using Valgrind-3.6.1 and LibVEX; rerun with -h for copyright info
==7477== Command: ./main
==7477==
==7477== Thread #1 is the program's root thread
==7477==
==7477== Thread #2 was created
==7477==    at 0x4259728: clone (clone.S:111)
==7477==    by 0x40484B5: pthread_create@@GLIBC_2.1 (createthread.c:256)
==7477==    by 0x4026E2D: pthread_create_WRK (hg_intercepts.c:257)
==7477==    by 0x4026F8B: pthread_create@* (hg_intercepts.c:288)
==7477==    by 0x8048560: main (main.cpp:18)
==7477==
==7477== Possible data race during write of size 4 at 0xbeab24c8 by thread #1
==7477==    at 0x80485C9: thread_s::~thread_s() (main.cpp:35)
==7477==    by 0x8048571: main (main.cpp:17)
==7477==  This conflicts with a previous read of size 4 by thread #2
==7477==    at 0x804858B: routine(void*) (main.cpp:24)
==7477==    by 0x4026F60: mythread_wrapper (hg_intercepts.c:221)
==7477==    by 0x4047E98: start_thread (pthread_create.c:304)
==7477==    by 0x425973D: clone (clone.S:130)
==7477==
==7477==
==7477== For counts of detected and suppressed errors, rerun with: -v
==7477== Use --history-level=approx or =none to gain increased speed, at
==7477== the cost of reduced accuracy of conflicting-access information
==7477== ERROR SUMMARY: 1 errors from 1 contexts (suppressed: 1 from 1) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:34:57.713

我不知道这是否是 helgrind 抱怨的原因，但您的程序存在严重问题。您创建一个线程，将指针传递给本地`thread_s`实例（`s_v`in `main()`）。

但是，`main()`将很快返回，而不会与线程进行任何同步 -`s_v`当线程函数`routine()`获取指针并使用它调用`pV->routine()`.

查看调用后添加以下内容是否`pthread_create()`可以防止 helmgrind 抱怨：

```
pthread_join( s_v.th, NULL); 
```

实际上，更仔细地查看 helgrind 的输出，这几乎肯定会消除 helgrind 的抱怨，因为日志指向`thread_s`析构函数作为数据竞赛的参与者之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T09:33:53.567

在一种情况下写入 vptr，在另一种情况下读取。两者都没有任何锁定。Helgrind 不知道您的程序中是否有其他方法使这种情况不可能同时在两个线程中发生，因此它会标记它。如果您可以保证在另一个线程中有人尝试对其调用函数时对象不会被破坏，那么您可以为此生成抑制。

# c# - 将每行中具有 int 值的文件转换为 IEnumerable

> ID：12212549
> 
> 赞同：1
> 
> 时间：2012-08-31T09:28:23.853
> 
> 标签：c#, .net, file-io

我在每一行都有一个包含 int 值的文件（尽管某些值可能不像某些注释那样是 int）。但是文件的结构是：

```
1
2
3
4
5
6
7
#some comment
9
10
etc... 
```

将其转换为 IEnumerable 的最快方法是什么？我可以逐行阅读并使用 List 并调用 Add 方法，但我想它在性能方面并不是最好的。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:34:12.593

您可以`IEnumerable`在读取文件时即时创建：

```
IEnumerable<Int32> GetInts(string filename)
{
    int tmp = 0;
    foreach(string line in File.ReadLines(filename))
        if (Int32.TryParse(line, out tmp))
            yield return tmp;
} 
```

这样，您可以在读取文件时使用`foreach`循环对整数执行任何操作。

```
foreach(int i in GetInts(@"yourfile"))
{
    ... do something with i ...
} 
```

* * *

如果您只想创建一个列表，只需使用`ToList`扩展名：

```
List<Int32> myInts = GetInts(@"yourfile").ToList(); 
```

但是，如果您按照问题中的描述“手动”创建列表，则可能不会有任何可衡量的性能差异。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T09:30:18.073

```
var lines = File.ReadLines(path).Where(l => !l.StartsWith("#")); 
```

你也可以追加`.Select(x => int.Parse(x))`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T09:37:49.063

```
public static IEnumerable<int> ReadInts(TextReader tr)
{
  //put using here to have this manage cleanup, but in calling method
  //is probably better
  for(string line = tr.ReadLine(); line != null; line = tr.ReadLine())
    if(line.Length != 0 && line[0] != '#')
      yield return int.Parse(line);
} 
```

我从您的描述中假设不匹配的行**应该**引发异常，但我也猜想您不想要它们的空白行很常见，所以我做 cathc 这种情况。在其他情况下酌情适应捕捉。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:35:23.417

如果您只想添加可转换为整数的行，则可以使用[`int.TryParse`](http://msdn.microsoft.com/it-it/library/f02979c7%28v=vs.95%29.aspx). 我建议使用[`File.ReadLines`](http://msdn.microsoft.com/en-us/library/dd383503.aspx)而不是[`File.ReadAllLines`](http://msdn.microsoft.com/en-us/library/system.io.file.readalllines.aspx)（在内存中创建一个数组）：

```
int value;
IEnumerable<String>lines = File.ReadLines(path)
    .Where(l => int.TryParse(l.Trim(), out value)); 
```

或（如果您想选择这些整数）：

```
int value;
IEnumerable<int>ints= File.ReadLines(path)
    .Where(l => int.TryParse(l.Trim(), out value))
    .Select(l => value); 
```

# java - 使用 struts 2 操作进行简单的 ajax 请求

> ID：12212550
> 
> 赞同：0
> 
> 时间：2012-08-31T09:28:25.847
> 
> 标签：java, jquery, ajax, struts2

我正在尝试使用 AJAX 发出一个简单的请求。但整个事情都行不通。下面是我写的代码

jsp/javascript：

```
$("#my_"+rowNum).load("getdata.action?id="+123,function(data) {
       alert("i am inside "+data);
}); 
```

Struts 动作：

```
public class MyAction extends BaseAction {

    public String execute() {
       try  {
         inputStream = new ByteArrayInputStream("ABC 123 556".getBytes("UTF-8"));
       }
       catch (UnsupportedEncodingException e) {
          //handle exception
       }
       return SUCCESS;
    }
}​ 
```

struts.xml：

```
<action name="getdata" class="com.amtd.advisoradmin.action.MyAction">
 <result type="stream">
        <param name="contentType">text/html</param>
        <param name="inputName">inputStream</param>
 </result> 
```

我觉得配置是正确的，但是在控件从 Action 类返回后，我没有收到我在 jsp 中打印的警报。我错过了什么吗？

PS：ABC 123 556 是我需要在警报中获取的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:28:52.343

我建议你在你的 Action 类中为 inputStream 类型 InputStream 和公共 getter 和 setter 设置一个私有变量，这是缺失的。

谢谢

# asp.net-mvc-4 - 在 MVC4 中将 Ninject DI 用于 api 和“常规”控制器

> ID：12212561
> 
> 赞同：4
> 
> 时间：2012-08-31T09:29:12.130
> 
> 标签：asp.net-mvc-4, ninject

> **可能重复：**
> [MVC3 + Ninject - 如何？](https://stackoverflow.com/questions/4358395/mvc3-ninject-how-to)

在一个小型 mvc 4 项目中，我正在尝试使用 ninject 实现依赖注入。

到目前为止，我已经将它与 api 控制器一起使用，但我对常规控制器没有任何运气。

我有一个 NinjectResolver：

```
public class NinjectDependencyResolver : NinjectDependencyScope, IDependencyResolver
    {
        private readonly IKernel _kernel;

        public NinjectDependencyResolver(IKernel kernel)
            : base(kernel)
        {
            _kernel = kernel;
        }

        public IDependencyScope BeginScope()
        {
            return new NinjectDependencyScope(_kernel.BeginBlock());
        }

        public override void Dispose()
        {
            _kernel.Dispose();
        }
    } 
```

还有一个 NinjectScope：

```
public class NinjectDependencyScope : IDependencyScope
    {
        protected IResolutionRoot ResolutionRoot;

        public NinjectDependencyScope(IResolutionRoot kernel)
        {
            ResolutionRoot = kernel;
        }

        public object GetService(Type serviceType)
        {
            var request = ResolutionRoot.CreateRequest(serviceType, null, new Parameter[0], true, true);
            return ResolutionRoot.Resolve(request).SingleOrDefault();
        }

        public IEnumerable<object> GetServices(Type serviceType)
        {
            var request = ResolutionRoot.CreateRequest(serviceType, null, new Parameter[0], true, true);
            return ResolutionRoot.Resolve(request).ToList();
        }

        public void Dispose()
        {
            var disposable = (IDisposable)ResolutionRoot;
            if (disposable != null) disposable.Dispose();
            ResolutionRoot = null;
        }
    } 
```

然后我在我的 Global.asax 中设置它：

```
var kernel = new StandardKernel();
            kernel.Bind(typeof(IRepository)).To(typeof(Repository));

            GlobalConfiguration.Configuration.DependencyResolver = new NinjectDependencyResolver(kernel); 
```

然后我将一个存储库注入到一个 api 控制器中，如下所示：

```
private IRepository _repository;

public TestApiController(IRepository repository)
{
    _repository = repository;
} 
```

这可以正常工作，但在常规控制器中执行相同操作会失败，并出现“没有为此对象定义无参数构造函数”错误。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-02T15:23:19.717

ASP.NET MVC 使用不同于`IDependencyResolver`ASP.NET WebAPi的方式，即`Sytem.Web.Mvc.IDependencyResolver`.

所以你需要一个新`NinjectDependencyResolver`的 MVC 控制器实现（幸运的是 MVC 和 WepAPi`IDependencyResolver`几乎有相同的成员和相同的签名，所以很容易实现）

```
public class NinjectMvcDependencyResolver : NinjectDependencyScope, 
                                            System.Web.Mvc.IDependencyResolver
{
    private readonly IKernel _kernel;

    public NinjectDependencyResolver(IKernel kernel)
        : base(kernel)
    {
        _kernel = kernel;
    }
} 
```

然后你可以在`Global.asax`with 中注册它：

```
DependencyResolver.SetResolver(new NinjectMvcDependencyResolver(kernel)); 
```

# php - SVN post-commit 钩子在 Windows 操作系统中更新 changelog.txt

> ID：12212563
> 
> 赞同：1
> 
> 时间：2012-08-31T09:29:18.260
> 
> 标签：php, windows, svn, post-commit-hook

我是 SVN 的新手，我找不到让“提交后”更新特定 txt 文件的解决方案。我有一个 php 项目，位于`changelog.txt`根文件夹内（与 index.php 位于同一级别）。我想要的是，在每个 之后`svn commit`，我的**changelog.txt**将更新一些信息，如下所示：

```
*** YYYY-MM-DD HH:MM by SVN_USERNAME
SVN_COMMIT_MESSAGE
-------------------------------------------------
*** 2010-09-22 18:31 by marco.belinni
- eshop category navigation - fixed issue with navigation, due overcaching with previous version of seo tool
-------------------------------------------------
*** 2010-09-20 01:03 by jean.laroche
- plg_c16n - fixed canonicalization with SEO Plugin which redirects non www urls to www urls
- mod_login - fixed ie and ff login, hidded input type "remember me" with checked paramater
- the whole frontpage have bolded text because of bolded "READ MORE" button - need to clean it before posting any article
- eshop browse - 10products per page FIXED by clearing cache and purged ALL urls
- eshop orderby - removed useless "SELECT" option in selection field for sorting out the items on page
------------------------------------------------- 
```

我试图找到一些信息，但是有很多网站展示了 C++ 编程的例子。有没有其他只使用 SVN 和 PHP 的解决方案？因为我什至不是 C++ 的新手。

**更新**

这是一个视觉效果，向您展示我`changelog.txt`的位置：

```
- web
 |- framework
 |  + engine
 |  + framework
 - web
   + css
   + images
   | index.php
-->| changelog.txt 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T12:26:57.093

我将假设您的更改日志存储在 SVN 本身中。在这种情况下，就停在那里。提交后，您无法更新存储在 SVN 中的文件，因为它将需要提交，这将触发使其需要提交的更新……您明白了。

您可以愉快地将数据写入一个新文件并使用它，但是只需在 hooks 目录中创建一个名为 post_commit 的文件并在其中放入一些脚本（以及您喜欢的脚本语言）来调用 svn log，将输出通过管道传输到您的 changelog 文件。

# ios - 如何使 UITableView 不改变 imageView 的框架，或调整图像大小以填充框架大小？

> ID：12212565
> 
> 赞同：3
> 
> 时间：2012-08-31T09:29:22.317
> 
> 标签：ios, uitableview, uiimageview

在`tableView:cellForRowAtIndexPath`中，我设置`imageView.image`为 1x1 或 60x60 占位符图像，而单元格的高度为 300。我还设置`imageView.frame`为`(0,0, 300, 300)`.

然后我调用一个方法`downloadImageFromURL:andSetIntoCell`，它立即添加一个`UIActivityIndicatorView`并将帧设置为`(0,0, 300, 300)` （下载是在一个线程中异步完成的，该方法不会等待下载，而是立即返回）。

但是，`tableView:cellForRowAtIndexPath`返回单元格后，`imageView.frame`将调整为垂直居中原始 60x60 大小的图像。如果该占位符图像是 800x800，它实际上工作正常：帧仍然是 (0,0,300,300) 并且图像被缩小，但是当图像是 60x60 时，帧实际上被调整为类似 (0,120, 60, 60)，这没关系，因为占位符是透明的，但`UIActivityIndicatorView`被添加为 的子视图`imageView`，因此被垂直向下推，高度为 300 并覆盖下一行的一部分。

有没有办法告诉`UITableView`不要更改`imageView.frame`，或者以编程方式轻松地将图像调整为 300x300（最好不要使用 BitmapContext），或者告诉`imageView`缩放以填充框架？

我补充说：

```
cell.imageView.contentMode = UIViewContentModeScaleToFill; 
```

设置后`imageView.frame`，如果我在 UIView 上绘图，这通常可以工作，但 UITableView 仍将显示原始的 60x60 大小，并调整`imageView.frame`为垂直居中。

（我认为在这种情况下我可以只制作`UIActivityIndicatorView`图像的大小：60x60，但据说是用 1x1 透明占位符图像来做）

**更新：顺便说一句，我什至补充说：**

```
self.table.autoresizesSubviews = NO;
self.table.autoresizingMask = UIViewAutoresizingNone;

cell.autoresizesSubviews = NO;
cell.autoresizingMask = UIViewAutoresizingNone;

cell.imageView.autoresizesSubviews = NO;
cell.imageView.autoresizingMask = UIViewAutoresizingNone; 
```

在返回单元格之前，它是相同的：imageView 被重新定位和调整大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-18T12:02:21.943

单元格的图像视图的框架稍后不会改变。所以使用`layoutSubviews`，我解决这个问题如下： -

`AFNetworking`使用名为 I 的方法设置图像`setImageWithURLRequest:`，我的示例使用 64*64 大小。您可以*更改*适用于您的表格视图的框架。

```
NSURL *urlMapThumbnail = [NSURL URLWithString:@"https://maps.googleapis.com/maps/api/staticmap?zoom=8&size=65x65&maptype=roadmap&markers=color:red%7Clabel:S%7C28.5002761,77.08126909999999"];

__weak UITableViewCell *cellTemp = cell;
[cell.imageView setImageWithURLRequest:[NSURLRequest requestWithURL:urlMapThumbnail]
                      placeholderImage:[UIImage imageNamed:@"sotrelocation"]
                               success:^(NSURLRequest *request, NSHTTPURLResponse *response, UIImage *image) {
                                   CGSize finalSize = CGSizeMake(64, 64);
                                   image = [UIImage imageWithImage:image scaledToSize:finalSize];
                                   cellTemp.imageView.image = image;
                                   [cellTemp layoutSubviews];
                               } failure:nil]; 
```

*//重新缩放图像大小的方法*

```
+ (UIImage *)imageWithImage:(UIImage *)image scaledToSize:(CGSize)newSize {
    //UIGraphicsBeginImageContext(newSize);
    UIGraphicsBeginImageContextWithOptions(newSize, NO, 0.0);
    [image drawInRect:CGRectMake(0, 0, newSize.width, newSize.height)];
    UIImage *newImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();
    return newImage;
} 
```

# jquery - Jquery-计算列“值”的平均值并将其放入另一列的每个 td

> ID：12212567
> 
> 赞同：0
> 
> 时间：2012-08-31T09:29:25.477
> 
> 标签：jquery, jquery-ui, jquery-plugins

假设我有一张这样的桌子：

```
<table cellpadding="0" cellspacing="0" border="0" class="display" id="selection">
    <th>Values</th>
    <th>Average</th>
    <tbody>
        <tr>
            <td>5</td>
            <td></td>       
        </tr>   
        <tr>
            <td>0.9</td>
            <td></td>       
        </tr>  
        <tr>
            <td>2</td>
            <td></td>       
        </tr>  
        <tr>
            <td>6</td>
            <td></td>       
        </tr>  
    </tbody>
</table> 
```

我想计算列“值”的平均值，并使用 Jquery 将其放入平均列的每个 td 中。结果应该是这样的图片：

![在此处输入图像描述](../Images/dd2a83e35c4132402aab63264f36ec20.png)

请注意，我使用搜索框过滤表格中的结果，并且每次用户搜索时行数都会改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:34:47.107

```
var sum = 0,
    count = -1,
    all = $('#selection > tbody > tr');
all.each(function() {
    sum += +$('td:eq(0)', this).text();
    count++;
});
all.find('td:eq(1)').text((sum / count).toFixed(3)); 
```

***[工作样本](http://jsfiddle.net/ujA7g/5/)***

### 笔记

`+$('td:eq(0)', this).text()`，这里开始`+`唱将文本转换为数字。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:38:58.050

```
var sum = 0, rows = $('#selection tbody tr');

rows.each(function() {
  sum += parseFloat($(this).children('td').eq(0).text());
});

rows.each(function() {
  var tds = $(this).children('td'), value = parseFloat(tds.eq(0).text());
  $(this).children('td').eq(1).text((value/sum).toFixed(3));
}); 
```

***[工作演示。](http://jsfiddle.net/YJmFY/)***

# c# - 特定列的网格视图排序

> ID：12212570
> 
> 赞同：2
> 
> 时间：2012-08-31T09:29:44.220
> 
> 标签：c#, asp.net, gridview

我想要关于在 Asp.net C# 中的 GRID VIEW 中对特定列进行排序的代码。当我在 ASC 中对一列进行排序时，当进入第二列并尝试对其进行排序时，将其作为 DESC。我想要每列单独的 ASC DESC 顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:36:07.323

用于排序

保持排序状态为 viewstate(SortDirection 和 SortExpression) 你根据当前排序状态生成正确的 linq 表达式。手动处理网格中的 Sorting 事件，并使用我编写的这个助手按 SortExpression 和 SortDirection 进行排序：

public static IQueryable SortBy(IQueryable source, string sortExpression, SortDirection direction) { if (source == null) { throw new ArgumentNullException("source"); }

```
string methodName = "OrderBy";
if (direction == SortDirection.Descending) {
    methodName += "Descending";
}

var paramExp = Expression.Parameter(typeof(T), String.Empty);
var propExp = Expression.PropertyOrField(paramExp, sortExpression);

// p => p.sortExpression
var sortLambda = Expression.Lambda(propExp, paramExp);

var methodCallExp = Expression.Call(
                            typeof(Queryable),
                            methodName,
                            new[] { typeof(T), propExp.Type },
                            source.Expression,
                            Expression.Quote(sortLambda)
                        );

return (IQueryable<T>)source.Provider.CreateQuery(methodCallExp); 
```

}

# python-2.7 - 安装 mlpy 时无法检测 GSL 标头文件夹

> ID：12212571
> 
> 赞同：1
> 
> 时间：2012-08-31T09:29:46.373
> 
> 标签：python-2.7, failed-installation

我在安装 MlPy 时遇到以下问题：

```
sudo python setup.py install

running install
running build
running build_py
running build_ext
building 'mlpy.gsl' extension
llvm-gcc-4.2 -fno-strict-aliasing -fno-common -dynamic -g -Os -pipe -fno-common -fno-strict-aliasing -fwrapv -mno-fused-madd -DENABLE_DTRACE -DMACOSX -DNDEBUG -Wall -Wstrict-prototypes -Wshorten-64-to-32 -DNDEBUG -g -fwrapv -Os -Wall -Wstrict-prototypes -DENABLE_DTRACE -arch i386 -arch x86_64 -pipe -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -I/Library/Python/2.7/site-packages/numpy-1.8.0.dev_f2f0ac0_20120725-py2.7-macosx-10.8-x86_64.egg/numpy/core/include -I/System/Library/Frameworks/Python.framework/Versions/2.7/include/python2.7 -c mlpy/gsl/gsl.c -o build/temp.macosx-10.7-intel-2.7/mlpy/gsl/gsl.o
mlpy/gsl/gsl.c:223:24: error: gsl/gsl_sf.h: No such file or directory
mlpy/gsl/gsl.c:224:39: error: gsl/gsl_statistics_double.h: No such file or directory
In file included from /Library/Python/2.7/site-packages/numpy-1.8.0.dev_f2f0ac0_20120725-py2.7-macosx-10.8-x86_64.egg/numpy/core/include/numpy/ndarraytypes.h:1722,
                 from /Library/Python/2.7/site-packages/numpy-1.8.0.dev_f2f0ac0_20120725-py2.7-macosx-10.8-x86_64.egg/numpy/core/include/numpy/ndarrayobject.h:17,
                 from /Library/Python/2.7/site-packages/numpy-1.8.0.dev_f2f0ac0_20120725-py2.7-macosx-10.8-x86_64.egg/numpy/core/include/numpy/arrayobject.h:15,
                 from mlpy/gsl/gsl.c:227:
/Library/Python/2.7/site-packages/numpy-1.8.0.dev_f2f0ac0_20120725-py2.7-macosx-10.8-x86_64.egg/numpy/core/include/numpy/npy_deprecated_api.h:11:2: warning: #warning "Using deprecated NumPy API, disable it by #defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION"
mlpy/gsl/gsl.c: In function ‘__pyx_pf_4mlpy_3gsl_sf_gamma’:
mlpy/gsl/gsl.c:835: warning: implicit declaration of function ‘gsl_sf_gamma’
mlpy/gsl/gsl.c: In function ‘__pyx_pf_4mlpy_3gsl_1sf_fact’:
mlpy/gsl/gsl.c:887: warning: implicit declaration of function ‘gsl_sf_fact’
mlpy/gsl/gsl.c: In function ‘__pyx_pf_4mlpy_3gsl_2stats_quantile_from_sorted_data’:
mlpy/gsl/gsl.c:1123: warning: implicit declaration of function ‘gsl_stats_quantile_from_sorted_data’
mlpy/gsl/gsl.c:223:24: error: gsl/gsl_sf.h: No such file or directory
mlpy/gsl/gsl.c:224:39: error: gsl/gsl_statistics_double.h: No such file or directory
In file included from /Library/Python/2.7/site-packages/numpy-1.8.0.dev_f2f0ac0_20120725-py2.7-macosx-10.8-x86_64.egg/numpy/core/include/numpy/ndarraytypes.h:1722,
                 from /Library/Python/2.7/site-packages/numpy-1.8.0.dev_f2f0ac0_20120725-py2.7-macosx-10.8-x86_64.egg/numpy/core/include/numpy/ndarrayobject.h:17,
                 from /Library/Python/2.7/site-packages/numpy-1.8.0.dev_f2f0ac0_20120725-py2.7-macosx-10.8-x86_64.egg/numpy/core/include/numpy/arrayobject.h:15,
                 from mlpy/gsl/gsl.c:227:
/Library/Python/2.7/site-packages/numpy-1.8.0.dev_f2f0ac0_20120725-py2.7-macosx-10.8-x86_64.egg/numpy/core/include/numpy/npy_deprecated_api.h:11:2: warning: #warning "Using deprecated NumPy API, disable it by #defining NPY_NO_DEPRECATED_API NPY_1_7_API_VERSION"
mlpy/gsl/gsl.c: In function ‘__pyx_pf_4mlpy_3gsl_sf_gamma’:
mlpy/gsl/gsl.c:835: warning: implicit declaration of function ‘gsl_sf_gamma’
mlpy/gsl/gsl.c: In function ‘__pyx_pf_4mlpy_3gsl_1sf_fact’:
mlpy/gsl/gsl.c:887: warning: implicit declaration of function ‘gsl_sf_fact’
mlpy/gsl/gsl.c: In function ‘__pyx_pf_4mlpy_3gsl_2stats_quantile_from_sorted_data’:
mlpy/gsl/gsl.c:1123: warning: implicit declaration of function ‘gsl_stats_quantile_from_sorted_data’
mlpy/gsl/gsl.c: In function ‘__Pyx_BufFmt_ProcessTypeChunk’:
mlpy/gsl/gsl.c:3761: warning: implicit conversion shortens 64-bit value into a 32-bit value
mlpy/gsl/gsl.c:3764: warning: implicit conversion shortens 64-bit value into a 32-bit value
lipo: can't open input file: /var/tmp//cc5P7Y1q.out (No such file or directory)
error: command 'llvm-gcc-4.2' failed with exit status 1 
```

包含我的 GSL 头文件的文件夹位于：/usr/local/brew/Cellar/gsl/1.15/include/gsl 例如，我可以在此文件夹中找到 gsl_sf.h。

让 setup.py 脚本识别这个文件夹有帮助吗？如果是这样，我该怎么做？

先感谢您。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-02T05:58:45.890

我在 Mac 上安装时遇到了同样的问题，因为 gsl 安装到 setup.py 不期望的 /usr/local/lib 和 /usr/local/include 中。我在 mlpy google 组上找到了一个带有补丁 setup.py 文件的帖子。以下是原始版本的更新版本之间的差异。您将需要更新 mp_libdir 和 mp_includedir。

```
< #### macports library/include
< mp_libdir = ['/usr/local/lib']
< mp_includedir = ['/usr/local/include']
< 
66,67c62
<                              library_dirs=mp_libdir,
<                              include_dirs=py_inc + np_inc + mp_includedir),
---
>                              include_dirs=py_inc + np_inc),
104,105c99
<                              include_dirs=py_inc + np_inc + mp_includedir,
<                              library_dirs=mp_libdir,
---
>                              include_dirs=py_inc + np_inc,
140,141c134
<                              library_dirs=mp_libdir,
<                              include_dirs=py_inc + np_inc + mp_includedir),
---
>                              include_dirs=py_inc + np_inc),
178,179c171
<                              include_dirs=py_inc + np_inc + mp_includedir,
<                              library_dirs=mp_libdir,
---
>                              include_dirs=py_inc + np_inc,
216,217c208
<                           include_dirs=py_inc + np_inc + mp_includedir,
<                           library_dirs=mp_libdir,
---
>                           include_dirs=py_inc + np_inc,
222,223c213
<                           include_dirs=py_inc + np_inc + mp_includedir,
<                           library_dirs=mp_libdir,
---
>                           include_dirs=py_inc + np_inc, 
```

# c# - 从 mvc4 应用程序调用 WebApi RTM 的正确方法

> ID：12212574
> 
> 赞同：0
> 
> 时间：2012-08-31T09:29:55.540
> 
> 标签：c#, .net, asp.net-mvc-4, asp.net-web-api

所以周围有很多例子，但找到与 rtm 位相关的例子似乎有点难找到。

我有 2 个项目，一个是 WebApi，另一个是 MVC4 .net 4.5 应用程序。

我想对项目进行更新

我的 API 中有一个控制器，它执行类似的操作

```
 [HttpPut]
    public MyModel Update(MyModel model)
    {
        //make update
        return model;
    } 
```

这个对吗？我应该使用 HttpResponseMessage 而不是只使用 MyModel 类吗？我想尽可能多地返回正确的 httpstatus 详细信息，因为我想将此 api 开放给第 3 方，而不仅仅是我的应用程序

从我的控制器从我的 mvc 应用程序调用这个 api 我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:09:29.223

如果您想使用 httpstaus 代码进行响应，则必须返回 HttpResponseMessage。

您可以选择使用一个通用方法返回您的 BO，并从 Action 和您的其他 mvc 应用程序代码中调用它。然后，您的其余调用将始终使用状态代码进行包装，而其他调用将获得一个对象。

```
[HttpPut]
public MyModel Update(MyModel model)
{
    return base.Request.CreateResponse<MyModel>(HttpStatusCode.OK, UpdateModel(model));;
}

[NonAction]
internal MyModel UpdateModel(MyModel model)
{
    //make update
    return model;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:47:05.203

最好的方法是像这样使用 HttpResponseMessage ：

```
[HttpPut]
public HttpResponseMessage Update(MyModel model)
{
    if(notfound)
    {
      return this.Request.CreateResponse(HttpStatusCode.NotFound);
    }

    //make update
    return this.Request.CreateResponse<MyModel>(HttpStatusCode.OK, Model);;
} 
```

如果我想从我的 MVC 应用程序调用 WebApi 方法，我主要使用[EasyHttp ：](http://nuget.org/packages/EasyHttp)

```
var model = new ExpandoObject(); // or use a stronly typed class.
model.Id = 1,
model.Name = "foo"

var http = new HttpClient();
http.Post("url", model, HttpContentTypes.ApplicationJson); 
```

# visualization - 构建垂直交叉过滤器图表

> ID：12212577
> 
> 赞同：3
> 
> 时间：2012-08-31T09:30:04.187
> 
> 标签：visualization, d3.js, crossfilter

从基本的[Crossfilter](http://square.github.com/crossfilter/)示例开始，我想创建一个替代可视化，以垂直而不是水平显示条形图。也就是说，基本上翻转了条形图的轴。

[修改原始](https://github.com/square/crossfilter/blob/gh-pages/index.html) `barChart`函数以交换图表中的条很容易。通过以下更改，我已经能够做到这一点：

```
var width = x.range()[1],
    height = y.range()[0]; 
```

变成

```
var width = x.range()[1],
    height = y.range()[0]; 
```

并在嵌套`barPath`方法中

```
path.push("M", x(d.key), ",", height, "V", y(d.value), "h9V", height); 
```

变成

```
path.push("M", 0, ",", x(d.key), "h", y(d.value), "v9H", 0); 
```

这些细微的变化可以很好地打印条形图，但它不能处理带有刻度的 x 轴，也不能处理选择画笔。是否可以翻转两侧的刷子？如果是这样，我将如何去做？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T16:39:55.680

最简单的方法是在chart() 中将每个图表的“g”容器旋转90。

像这样的东西：

```
g = div.append("svg").attr("width", width + margin.left +
margin.right).attr("height", height + margin.top +
margin.bottom).append("g").attr("transform", "translate(" +
margin.left + "," + margin.top + ")"+ "**rotate(90)**"); 
```

# .htaccess - 带有 CI 路由或 mod_rewrite 的 i18n URI

> ID：12212580
> 
> 赞同：0
> 
> 时间：2012-08-31T09:30:05.383
> 
> 标签：.htaccess, codeigniter, url-routing

我试图通过将包含语言名称的段更改为仅两个字符的语言代码来清理多语言 CI 站点上的 URI。

目前，我的 URI 如下所示：

```
http://example.com               //  Home (English)
http://example.com/english/home  //  Home (English)
http://example.com/home          //  404 (should go to english/home)

http://example.com/sv            //  404 (should go to swedish/home)
http://example.com/swedish/home  //  Home (Swedish)
http://example.com/sv/home       //  404 (should go to swedish/home) 
```

我已经尝试过`application/config/routes.php`和`.htaccess`，但我觉得我没有取得太大进展。我应该使用哪个？我怎样才能达到我想要的结果？

就目前而言，我的文件如下所示：

```
// .htaccess
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /example/index.php/$1 [L]

// application/config/routes.php (minus docs)
<?php
if ( ! defined('BASEPATH')) exit('No direct script access allowed');
$route['default_controller'] = "pages/view/home";
$route['([a-z]+)/([a-z]+)'] = "pages/view/$2";
?>

// application/controllers/page
<?php

class Pages extends CI_Controller {

    public function __construct() {
        parent::__construct();
        $this->language = $this->uri->segment(1);
    }

    public function view ($page = 'home') {

        if (!file_exists('application/views/pages/'.$page.'.php'))
            show_404();

        $data['title'] = $page;

        $this->lang->load('general',$this->language);
        $this->load->view('templates/header', $data);
        $this->load->view('pages/'.$page, $data);
        $this->load->view('templates/footer', $data);

    }
}
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:25:47.900

在 routes.php 中试试这个：

```
$route['default_controller'] = "pages/view/home";
$route['(en|sv)'] = 'pages/view/home';
$route['(en|sv)/([a-z]+)'] = 'pages/view/$2'; 
```

控制器构造函数：

```
function __construct(){
    parent::__construct();
    $this->lang_array = array('en' => 'english', 'sv' => 'swedish');
    $this->current_lang = $this->uri->segment(1, 'en');
} 
```

查看功能：

```
public function view ($page = 'home') {
            $lang_folder = $this->lang_array[$this->current_lang];
            // $lang_folder will be 'english' by default
            // other stuff
            $this->lang->load('general', $lang_folder);

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:48:42.853

在您当前的规则之上，添加以下内容：

```
# You already had this one
RewriteEngine On

RewriteRule ^home(.*)$ /english/home$1 [L]
RewriteRule ^sv(/home)?(.*)$ /swedish/home$1 [L] 
```

然后是你已经拥有的：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /kappahl-hilys/index.php/$1 [L] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-03T06:22:05.647

您还可以：
在第一个 Hook(pre_system) 文件中，检测 URI 中的语言：

```
 <?php

   class Lang_uri {

 public function run() {

    $languages = array('fr', 'en');

    //try to find language in $_SERVER['REQUEST_URI']
    foreach($languages as $lang)
    {
        if(strpos($_SERVER['REQUEST_URI'], '/'.$lang)===0)
        {
            //Store language founded
            define('URI_LANG', $lang);

            //Delete it, codeigniter will don't know is exists !
            $_SERVER['REQUEST_URI'] = substr_replace($_SERVER['REQUEST_URI'], '', strpos($_SERVER['REQUEST_URI'], '/'.$lang)+1, strlen($lang)+1);

            break;
        }
    }

    if(!defined('URI_LANG'))
        define('URI_LANG', 'fr');
}
    } 
```

现在在另一个钩子文件（pre_controller）中设置语言配置项

```
 class Set_language {

        public function set() { 
             global $CFG;

             $CFG->set_item('language', str_replace(array('en', 'fr'), array('english', 'french'), URI_LANG));
        }

    } 
```

就这样。
[http://site.com/fr/home](http://site.com/fr/home)和[http://site.com/home](http://site.com/home)的工作方式相同。
有关 CI Hook 的更多信息：http: [//codeigniter.com/user_guide/general/hooks.html](http://codeigniter.com/user_guide/general/hooks.html)
抱歉对于我糟糕的英语..

# android - 如何在jquery mobile for android中缓存页面

> ID：12212584
> 
> 赞同：1
> 
> 时间：2012-08-31T09:30:19.277
> 
> 标签：android, cordova, jquery-mobile, mobile-application

我正在开发一个带有 phonegap 和 jquery mobile for android 的移动应用程序。它工作正常，但从服务器获取数据需要很长时间。

我想缓存它的页面，所以如果用户回到同一页面，他可以查看同一页面。我正在使用 jquery 移动缓存代码，但它不起作用。

我正在将此代码`data-dom-cache="true"`用于缓存

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        super.appView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK);
        super.loadUrl("file:///android_asset/www/find.html");
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T08:15:06.660

缓存在我的应用程序中不起作用，所以我通过这样做将所有 json 数据存储在本地存储中

```
window.localStorage.setItem("ALL_USERS",JSON.stringify(data)); 
```

`data`我从服务器检索的 json 对象在哪里。

下次我从本地存储中检索数据时

```
window.localStorage.setItem("ALL_USERS",JSON.stringify(data));
users = JSON.parse(users); 
```

该解决方案解决了我的问题，希望对其他人有所帮助。
谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:43:42.663

在您的 Android 应用程序活动文件的 onCreate() 方法中调用以下代码：

```
super.appView.getSettings().setCacheMode(WebSettings.LOAD_CACHE_ELSE_NETWORK); 
```

如果内容存在，即使过期（例如，历史导航），上述方法也会使用缓存。如果不在缓存中，则从网络加载

请查看缓存设置的 WebSettings 常量：

[http://developer.android.com/reference/android/webkit/WebSettings.html](http://developer.android.com/reference/android/webkit/WebSettings.html)

# android - 如果 Internet 连接丢失，如何继续进行此活动（而不是去另一个活动）？

> ID：12212590
> 
> 赞同：0
> 
> 时间：2012-08-31T09:30:35.217
> 
> 标签：android, android-activity

我有一个非常常见的问题，我认为每个 android 开发人员都会在某个时候面临。我正在制作一个从网络服务器加载数据的应用程序。因此，正在使用互联网连接。但是我必须在每次调用服务器之前检查互联网连接。我正在使用 ConnectivityManager 进行操作，并且可以正常工作。

我的问题实际上是关于在互联网连接丢失时通知用户。我想向用户显示一个 AlertDialog 框，告诉他失去了互联网连接。现在的问题是，如果用户单击一个按钮并且必须启动一个新的 Activity （这将从服务器加载数据），那么我无法向他显示调用 Activity 的对话框。这里的问题是，如果互联网不可用，我不想导航到其他活动。我只想继续参加这项活动。

这个活动上有很多按钮，点击它们，用户可以去不同的活动。如果没有可用的互联网，我想要的只是不打开其他活动，并仅向他显示此活动的对话框。一种方法是检查每个按钮的单击（在 onClick 方法中），然后通知用户有关丢失的 Internet 连接。但这对我来说可能非常忙碌，因为每个活动都有很多活动和很多按钮。

是否有一种通用且有效的方法来确定是否正在离开此活动并且正在启动新活动并在找到它后向用户显示对话框而不是在互联网不可用时移动到下一个活动。什么是最好的处理这个问题的做法。请帮我。在过去的两天里，我一直坚持这一点。提前谢谢。

```
 @Override
  public void onClick(View view) {
    switch(view.getId()){
       case R.id.backIcon:
           navigateMenuScreen(view);
           break;
    }
 } 
```

这是我检查互联网连接的方法（它工作正常）：

```
 ConnectivityManager connectivityManager   = (ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo networkInfo = connectivityManager.getActiveNetworkInfo();

    if (networkInfo!=null && networkInfo.isConnected()) {
        return true;
    } else {
        return false; 
    } 
```

这是导航方法：

```
 public void navigateMenuScreen(View view){
    try {           
        Intent loginIntent = new Intent(view.getContext(), MenuActivity.class);      
        startActivityForResult(loginIntent, 0);     
        overridePendingTransition(android.R.anim.slide_in_left, android.R.anim.slide_out_right);        
    } catch(Exception ex) {
    }
} 
```

我的问题是我必须在每种导航方法中检查互联网连接（还有其他方法，如上述方法）还是有更好的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:37:47.647

登记

```
 registerReceiver(mConnReceiver, 
       new IntentFilter(ConnectivityManager.CONNECTIVITY_ACTION)); 
```

听：

```
 private BroadcastReceiver mConnReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context context, Intent intent) {
            boolean noConnectivity = intent.getBooleanExtra(ConnectivityManager.EXTRA_NO_CONNECTIVITY, false);
            String reason = intent.getStringExtra(ConnectivityManager.EXTRA_REASON);
                        boolean isFailover = intent.getBooleanExtra(ConnectivityManager.EXTRA_IS_FAILOVER, false);

            NetworkInfo currentNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_NETWORK_INFO);
            NetworkInfo otherNetworkInfo = (NetworkInfo) intent.getParcelableExtra(ConnectivityManager.EXTRA_OTHER_NETWORK_INFO);

            // do application-specific task(s) based on the current network state, such 
            // as enabling queuing of HTTP requests when currentNetworkInfo is connected etc.
        }
    }; 
```

不要忘记你的清单文件

```
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:18:28.093

可能的解决方案（假设您正在为 Android 3.0+ 开发）是使用`AsyncTaskLoader`（[docs](http://developer.android.com/reference/android/content/AsyncTaskLoader.html)）。这意味着当用户按下按钮时`Activity1`，您将启动一个“后台”任务来检索您的数据。当它成功下载数据后，它可以显示`Actiivty2`。

这将保证数据在显示时`Activity2`显示，但不能保证`Activity2`立即显示（或根本不显示，取决于您的编写方式）

我不确定这是否是您所追求的，但值得一读。

# c - C中的矩阵乘法

> ID：12212596
> 
> 赞同：-3
> 
> 时间：2012-08-31T09:30:55.473
> 
> 标签：c

我必须输入三个正整数 n、m 和 p。然后输入两个矩阵。第一个是（行）乘 m（列）矩阵。第二个是am（行）乘p（列）矩阵，然后输出矩阵乘积（应该是n行乘p列）并使用堆内存来存储矩阵。这是我到目前为止所拥有的，

```
long double adjProduct(int n, int m, int ** matrix)
{
int j, k, l;
long double product = 0.0;
long double temp = 0.0;

for(i = 0; i < n; i++)
{
    for(j = 0; j < n; j++)
    {

        if((i + (1*(m - 1))) < n)
        {
            temp = 1;
            for(k = 0; k < m; k++)
                temp *= matrix[i + k][j];

            if(temp > product)
                product = temp;
        }

        if(j + (1*(m-1)) < n)
        {
            temp = 1;

            for(k = 0; k < m; k++)
                temp *= matrix[i][j + k];

            if(temp > product)
                product = temp;
        }

        if((i + (1*(m-1)) < n) && (j + (1*(m-1)) < n))
        {
            temp = 1;

            for(k = 0; k < m; k++)
                temp *= matrix[i + k][j + k];

            if(temp > product)
                product = temp;
        }

        if((i + (1*(m-1)) < n) && (j - (1*(m-1)) >= 0))
        {
            temp = 1;

            for(k = 0; k < m; k++)
                temp *= matrix[i + k][j - k];

            if(temp > product)
                product = temp;
          }

     }
 }

return product;
}

 main(){

int ** matrix;
int n = 0; 
int m = 0;
int i, j;

scanf("%d %d", &n, &m);

matrix = (int **)malloc(sizeof(int *)*n);
if(matrix == NULL)
    exit(0);

for(i = 0; i < n; i++)
{
    matrix[i] = (int*)malloc(sizeof(int)*n);
    if(matrix[i] == NULL)
        exit(0);
}

for(i = 0; i < n; i++)
{
    for(j = 0; j < n; j++)
        scanf("%d", &matrix[i][j]);
}

printf("%.0Lf", adjProduct(n, m, matrix));

for(i = 0; i < n; i++)
    free(matrix[i]);

free(matrix);
matrix = NULL;
  } 
```

感谢所有帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:39:57.867

你在哪里繁殖？乘法应该是这样的：

```
 for(i=0;i<m;i++)
        {
            for(j=0;j<p;j++)
            {
                product[i][j]=0;
                for(k=0;k<m;k++)
                {   
                         product[i][j]+=matrix1[i][k]*matrix2[k][j];
                }
            }
        } 
```

# javascript - 在可拖动+ jquery ui中用内部元素画线

> ID：12212600
> 
> 赞同：1
> 
> 时间：2012-08-31T09:31:07.197
> 
> 标签：javascript, jquery, jquery-ui, drag-and-drop

见下图。

![在此处输入图像描述](../Images/8cb73eb1d9b4dbba2299a852eae481fd.png)

我们的 Que ：当一个可拖动元素此时移动时比较内部元素并检查 8 个侧点和同一条线，然后在这两个点之间画一条线。

我使用 jquery ui 和 jquery1.8。

所以请帮助我。如何在 jquery ui 中实现这个想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T04:45:39.880

为此目的有[http://jsplumb.org/ 。](http://jsplumb.org/)

伟大而强大的图书馆。它不是 jQuery UI，但它看起来也不错！

# fonts - OpenJDK 字体依赖项

> ID：12212604
> 
> 赞同：2
> 
> 时间：2012-08-31T09:31:16.540
> 
> 标签：fonts, openjdk

我在 Ubuntu 中编译了 OpenJDK，并在我们的嵌入式系统中删除了 JRE 包（Linux 风格）。OpenJDK 没有可再发行字体。我在 jre/lib/fonts 目录中删除了 dejavu 字体。

如果我将 Lucida 字体（随 Sun/Oracle JRE 分发）复制到 jre/lib/fonts，我的应用程序工作正常。

请让我知道在 openjdk 中使用 Dejavu 字体的步骤，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-20T12:46:39.560

检查`/etc/java-6-openjdk/fontconfig.properties`- 它应该为 OpenJDK 指定字体。

您没有说嵌入式系统上的 Linux 风格是什么，但如果它有一个包管理系统，请尝试通过它安装 DeJaVu。

作为参考，我的 fontconfig.properties 如下所示：

```
# 
# Copyright (c) 2007, Oracle and/or its affiliates. All rights reserved.
# DO NOT ALTER OR REMOVE COPYRIGHT NOTICES OR THIS FILE HEADER.
#
# This code is free software; you can redistribute it and/or modify it
# under the terms of the GNU General Public License version 2 only, as
# published by the Free Software Foundation.  Oracle designates this
# particular file as subject to the "Classpath" exception as provided
# by Oracle in the LICENSE file that accompanied this code.
#
# This code is distributed in the hope that it will be useful, but WITHOUT
# ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
# FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License
# version 2 for more details (a copy is included in the LICENSE file that
# accompanied this code).
#
# You should have received a copy of the GNU General Public License version
# 2 along with this work; if not, write to the Free Software Foundation,
# Inc., 51 Franklin St, Fifth Floor, Boston, MA 02110-1301 USA.
#
# Please contact Oracle, 500 Oracle Parkway, Redwood Shores, CA 94065 USA
# or visit www.oracle.com if you need additional information or have any
# questions.
#

# Version

# Uses Ubuntu 8.04 (hardy), Debian 6.0 (Squeeze) (and more recent releases)
# fonts and file paths.
version=1

# Component Font Mappings

# Chinese fonts
allfonts.umingcn=AR PL UMing CN
#allfonts.umingcn.motif=AR PL UMing CN
allfonts.uminghk=AR PL UMing HK
#allfonts.uminghk.motif=AR PL UMing HK
allfonts.umingtw=AR PL UMing TW
#allfonts.umingtw.motif=AR PL UMing TW
allfonts.wqy-microhei=WenQuanYi Micro Hei
allfonts.wqy-zenhei=WenQuanYi Zen Hei
#allfonts.wqy-zenhei.motif=WenQuanYi Zen Hei
allfonts.shanheisun=AR PL ShanHeiSun Uni
#allfonts.shanheisun.motif=AR PL ShanHeiSun Uni

# Indic scripts
allfonts.bengali=Lohit Bengali
allfonts.gujarati=Lohit Gujarati
allfonts.hindi=Lohit Hindi
#allfonts.malayalam=Lohit Malayalam
allfonts.oriya=Lohit Oriya
allfonts.punjabi=Lohit Punjabi
allfonts.tamil=Lohit Tamil
allfonts.telugu=Lohit Telugu
allfonts.sinhala=LKLUG

serif.plain.latin-1=DejaVu Serif
#serif.plain.latin-1.motif=LuxiSerif-Regular
serif.plain.japanese-kochi=Kochi Mincho
serif.plain.japanese-sazanami=Sazanami Mincho
serif.plain.japanese-vlgothic=Sazanami Mincho
serif.plain.korean-baekmuk=Baekmuk Batang
#serif.plain.korean-baekmuk.motif=Baekmuk Batang
serif.plain.korean-un=UnBatang
#serif.plain.korean-un.motif=UnBatang

serif.bold.latin-1=DejaVu Serif Bold
#serif.bold.latin-1.motif=LuxiSerif-Bold
serif.bold.japanese-kochi=Kochi Mincho
serif.bold.japanese-sazanami=Sazanami Mincho
serif.bold.japanese-vlgothic=Sazanami Mincho
serif.bold.korean-baekmuk=Baekmuk Batang
#serif.bold.korean-baekmuk.motif=Baekmuk Batang
serif.bold.korean-un=UnBatang Bold
#serif.bold.korean-un.motif=UnBatang Bold

serif.italic.latin-1=DejaVu Serif Oblique
#serif.italic.latin-1.motif=LuxiSerif-Oblique
serif.italic.japanese-kochi=Kochi Mincho
serif.italic.japanese-sazanami=Sazanami Mincho
serif.italic.japanese-vlgothic=Sazanami Mincho
serif.italic.korean-baekmuk=Baekmuk Batang
#serif.italic.korean-baekmuk.motif=Baekmuk Batang
serif.italic.korean-un=UnBatang
#serif.italic.korean-un.motif=UnBatang

serif.bolditalic.latin-1=DejaVu Serif Bold Oblique
#serif.bolditalic.latin-1.motif=LuxiSerif-BoldOblique
serif.bolditalic.japanese-kochi=Kochi Mincho
serif.bolditalic.japanese-sazanami=Sazanami Mincho
serif.bolditalic.japanese-vlgothic=Sazanami Mincho
serif.bolditalic.korean-baekmuk=Baekmuk Batang
#serif.bolditalic.korean-baekmuk.motif=Baekmuk Batang
serif.bolditalic.korean-un=UnBatang Bold
#serif.bolditalic.korean-un.motif=UnBatang Bold

sansserif.plain.latin-1=DejaVu Sans
#sansserif.plain.latin-1.motif=LuxiSans-Regular
sansserif.plain.japanese-kochi=Kochi Gothic
sansserif.plain.japanese-sazanami=Sazanami Gothic
sansserif.plain.japanese-vlgothic=VL PGothic
sansserif.plain.korean-baekmuk=Baekmuk Gulim
#sansserif.plain.korean-baekmuk.motif=Baekmuk Gulim
sansserif.plain.korean-un=UnDotum
#sansserif.plain.korean-un.motif=UnDotum

sansserif.bold.latin-1=DejaVu Sans Bold
#sansserif.bold.latin-1.motif=LuxiSans-Bold
sansserif.bold.japanese-kochi=Kochi Gothic
sansserif.bold.japanese-sazanami=Sazanami Gothic
sansserif.bold.japanese-vlgothic=VL PGothic
sansserif.bold.korean-baekmuk=Baekmuk Gulim
#sansserif.bold.korean-baekmuk.motif=Baekmuk Gulim
sansserif.bold.korean-un=UnDotum Bold
#sansserif.bold.korean-un.motif=UnDotum Bold

sansserif.italic.latin-1=DejaVu Sans Oblique
#sansserif.italic.latin-1.motif=LuxiSans-Oblique
sansserif.italic.japanese-kochi=Kochi Gothic
sansserif.italic.japanese-sazanami=Sazanami Gothic
sansserif.italic.japanese-vlgothic=VL PGothic
sansserif.italic.korean-baekmuk=Baekmuk Gulim
#sansserif.italic.korean-baekmuk.motif=Baekmuk Gulim
sansserif.italic.korean-un=UnDotum
#sansserif.italic.korean-un.motif=UnDotum

sansserif.bolditalic.latin-1=DejaVu Sans Bold Oblique
#sansserif.bolditalic.latin-1.motif=LuxiSans-BoldOblique
sansserif.bolditalic.japanese-kochi=Kochi Gothic
sansserif.bolditalic.japanese-sazanami=Sazanami Gothic
sansserif.bolditalic.japanese-vlgothic=VL PGothic
sansserif.bolditalic.korean-baekmuk=Baekmuk Gulim
#sansserif.bolditalic.korean-baekmuk.motif=Baekmuk Gulim
sansserif.bolditalic.korean-un=UnDotum Bold
#sansserif.bolditalic.korean-un.motif=UnDotum Bold

monospaced.plain.latin-1=DejaVu Sans Mono
#monospaced.plain.latin-1.motif=LuxiMono-Regular
monospaced.plain.japanese-kochi=Kochi Gothic
monospaced.plain.japanese-sazanami=Sazanami Gothic
monospaced.plain.japanese-vlgothic=VL Gothic
monospaced.plain.korean-baekmuk=Baekmuk Gulim
#monospaced.plain.korean-baekmuk.motif=Baekmuk Gulim
monospaced.plain.korean-un=UnDotum
#monospaced.plain.korean-un.motif=UnDotum

monospaced.bold.latin-1=DejaVu Sans Mono Bold
#monospaced.bold.latin-1.motif=LuxiMono-Bold
monospaced.bold.japanese-kochi=Kochi Gothic
monospaced.bold.japanese-sazanami=Sazanami Gothic
monospaced.bold.japanese-vlgothic=VL Gothic
monospaced.bold.korean-baekmuk=Baekmuk Gulim
#monospaced.bold.korean-baekmuk.motif=Baekmuk Gulim
monospaced.bold.korean-un=UnDotum Bold
#monospaced.bold.korean-un.motif=UnDotum Bold

monospaced.italic.latin-1=DejaVu Sans Mono Oblique
#monospaced.italic.latin-1.motif=LuxiMono-Oblique
monospaced.italic.japanese-kochi=Kochi Gothic
monospaced.italic.japanese-sazanami=Sazanami Gothic
monospaced.italic.japanese-vlgothic=VL Gothic
monospaced.italic.korean-baekmuk=Baekmuk Gulim
#monospaced.italic.korean-baekmuk.motif=Baekmuk Gulim
monospaced.italic.korean-un=UnDotum
#monospaced.italic.korean-un.motif=UnDotum

monospaced.bolditalic.latin-1=DejaVu Sans Mono Bold Oblique
#monospaced.bolditalic.latin-1.motif=LuxiMono-BoldOblique
monospaced.bolditalic.japanese-kochi=Kochi Gothic
monospaced.bolditalic.japanese-sazanami=Sazanami Gothic
monospaced.bolditalic.japanese-vlgothic=VL Gothic
monospaced.bolditalic.korean-baekmuk=Baekmuk Gulim
#monospaced.bolditalic.korean-baekmuk.motif=Baekmuk Gulim
monospaced.bolditalic.korean-un=UnDotum Bold
#monospaced.bolditalic.korean-un.motif=UnDotum Bold

dialog.plain.latin-1=DejaVu Sans
#dialog.plain.latin-1.motif=LuxiSans-Regular
dialog.plain.japanese-kochi=Kochi Gothic
dialog.plain.japanese-sazanami=Sazanami Gothic
dialog.plain.japanese-vlgothic=VL PGothic
dialog.plain.korean-baekmuk=Baekmuk Gulim
#dialog.plain.korean-baekmuk.motif=Baekmuk Gulim
dialog.plain.korean-un=UnDotum
#dialog.plain.korean-un.motif=UnDotum

dialog.bold.latin-1=DejaVu Sans Bold
#dialog.bold.latin-1.motif=LuxiSans-Bold
dialog.bold.japanese-kochi=Kochi Gothic
dialog.bold.japanese-sazanami=Sazanami Gothic
dialog.bold.japanese-vlgothic=VL PGothic
dialog.bold.korean-baekmuk=Baekmuk Gulim
#dialog.bold.korean-baekmuk.motif=Baekmuk Gulim
dialog.bold.korean-un=UnDotum Bold
#dialog.bold.korean-un.motif=UnDotum Bold

dialog.italic.latin-1=DejaVu Sans Oblique
#dialog.italic.latin-1.motif=LuxiSans-Oblique
dialog.italic.japanese-kochi=Kochi Gothic
dialog.italic.japanese-sazanami=Sazanami Gothic
dialog.italic.japanese-vlgothic=VL PGothic
dialog.italic.korean-baekmuk=Baekmuk Gulim
#dialog.italic.korean-baekmuk.motif=Baekmuk Gulim
dialog.italic.korean-un=UnDotum
#dialog.italic.korean-un.motif=UnDotum

dialog.bolditalic.latin-1=DejaVu Sans Bold Oblique
#dialog.bolditalic.latin-1.motif=LuxiSans-BoldOblique
dialog.bolditalic.japanese-kochi=Kochi Gothic
dialog.bolditalic.japanese-sazanami=Sazanami Gothic
dialog.bolditalic.japanese-vlgothic=VL PGothic
dialog.bolditalic.korean-baekmuk=Baekmuk Gulim
#dialog.bolditalic.korean-baekmuk.motif=Baekmuk Gulim
dialog.bolditalic.korean-un=UnDotum Bold
#dialog.bolditalic.korean-un.motif=UnDotum Bold

dialoginput.plain.latin-1=DejaVu Sans Mono
#dialoginput.plain.latin-1.motif=LuxiMono-Regular
dialoginput.plain.japanese-kochi=Kochi Gothic
dialoginput.plain.japanese-sazanami=Sazanami Gothic
dialoginput.plain.japanese-vlgothic=VL Gothic
dialoginput.plain.korean-baekmuk=Baekmuk Gulim
#dialoginput.plain.korean-baekmuk.motif=Baekmuk Gulim
dialoginput.plain.korean-un=UnDotum
#dialoginput.plain.korean-un.motif=UnDotum

dialoginput.bold.latin-1=DejaVu Sans Mono Bold
#dialoginput.bold.latin-1.motif=LuxiMono-Bold
dialoginput.bold.japanese-kochi=Kochi Gothic
dialoginput.bold.japanese-sazanami=Sazanami Gothic
dialoginput.bold.japanese-vlgothic=VL Gothic
dialoginput.bold.korean-baekmuk=Baekmuk Gulim
#dialoginput.bold.korean-baekmuk.motif=Baekmuk Gulim
dialoginput.bold.korean-un=UnDotum Bold
#dialoginput.bold.korean-un.motif=UnDotum Bold

dialoginput.italic.latin-1=DejaVu Sans Mono Oblique
#dialoginput.italic.latin-1.motif=LuxiMono-Oblique
dialoginput.italic.japanese-kochi=Kochi Gothic
dialoginput.italic.japanese-sazanami=Sazanami Gothic
dialoginput.italic.japanese-vlgothic=VL Gothic
dialoginput.italic.korean-baekmuk=Baekmuk Gulim
#dialoginput.italic.korean-baekmuk.motif=Baekmuk Gulim
dialoginput.italic.korean-un=UnDotum
#dialoginput.italic.korean-un.motif=UnDotum

dialoginput.bolditalic.latin-1=DejaVu Sans Mono Bold Oblique
#dialoginput.bolditalic.latin-1.motif=LuxiMono-BoldOblique
dialoginput.bolditalic.japanese-kochi=Kochi Gothic
dialoginput.bolditalic.japanese-sazanami=Sazanami Gothic
dialoginput.bolditalic.japanese-vlgothic=VL Gothic
dialoginput.bolditalic.korean-baekmuk=Baekmuk Gulim
#dialoginput.bolditalic.korean-baekmuk.motif=Baekmuk Gulim
dialoginput.bolditalic.korean-un=UnDotum Bold
#dialoginput.bolditalic.korean-un.motif=UnDotum Bold

# Search Sequences

sequence.allfonts=latin-1
sequence.allfonts.GB18030=latin-1,wqy-microhei,umingcn,shanheisun,wqy-zenhei
sequence.allfonts.GB2312=latin-1,wqy-microhei,umingcn,shanheisun,wqy-zenhei
sequence.allfonts.GBK=latin-1,wqy-microhei,umingcn,shanheisun,wqy-zenhei
sequence.allfonts.x-euc-jp-linux=latin-1,japanese-vlgothic,japanese-sazanami,japanese-kochi
sequence.allfonts.EUC-KR=latin-1,korean-un,korean-baekmuk
sequence.allfonts.Big5=latin-1,umingtw,shanheisun,wqy-microhei,wqy-zenhei
sequence.allfonts.Big5-HKSCS=latin-1,uminghk,shanheisun,wqy-microhei,wqy-zenhei
#sequence.fallback=uminghk,shanheisun,wqy-zenhei,japanese-vlgothic,japanese-kochi,japanese-sazanami,korean-un,korean-baekmuk,bengali,gujarati,hindi,oriya,punjabi,malayalam,tamil,telugu,sinhala
sequence.fallback=wqy-microhei,uminghk,shanheisun,wqy-zenhei,japanese-vlgothic,japanese-sazanami,japanese-kochi,korean-un,korean-baekmuk,bengali,gujarati,hindi,oriya,punjabi,tamil,telugu

# Exclusion Ranges

exclusion.japanese-kochi=0390-03d6,2200-22ef,2701-27be
exclusion.japanese-sazanami=0390-03d6,2200-22ef,2701-27be
exclusion.japanese-vlgothic=0390-03d6,2200-22ef,2701-27be

# Font File Names

filename.DejaVu_Sans=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans.ttf
filename.DejaVu_Sans_Bold=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans-Bold.ttf
filename.DejaVu_Sans_Oblique=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans-Oblique.ttf
filename.DejaVu_Sans_Bold_Oblique=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSans-BoldOblique.ttf

filename.DejaVu_Sans_Mono=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSansMono.ttf
filename.DejaVu_Sans_Mono_Bold=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSansMono-Bold.ttf
filename.DejaVu_Sans_Mono_Oblique=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSansMono-Oblique.ttf
filename.DejaVu_Sans_Mono_Bold_Oblique=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSansMono-BoldOblique.ttf

filename.DejaVu_Serif=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSerif.ttf
filename.DejaVu_Serif_Bold=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSerif-Bold.ttf
filename.DejaVu_Serif_Oblique=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSerif-Oblique.ttf
filename.DejaVu_Serif_Bold_Oblique=/usr/share/fonts/truetype/ttf-dejavu/DejaVuSerif-BoldOblique.ttf

filename.AR_PL_UMing_CN=/usr/share/fonts/truetype/arphic/uming.ttc
filename.AR_PL_UMing_HK=/usr/share/fonts/truetype/arphic/uming.ttc
filename.AR_PL_UMing_TW=/usr/share/fonts/truetype/arphic/uming.ttc
filename.AR_PL_ShanHeiSun_Uni=/usr/share/fonts/truetype/arphic/uming.ttc

filename.WenQuanYi_Micro_Hei=/usr/share/fonts/truetype/wqy/wqy-microhei.ttc
filename.WenQuanYi_Zen_Hei=/usr/share/fonts/truetype/wqy/wqy-zenhei.ttc
filename.Baekmuk_Batang=/usr/share/fonts/truetype/baekmuk/batang.ttf
filename.UnBatang=/usr/share/fonts/truetype/unfonts/UnBatang.ttf
filename.UnBatang_Bold=/usr/share/fonts/truetype/unfonts/UnBatangBold.ttf
filename.Baekmuk_Gulim=/usr/share/fonts/truetype/baekmuk/gulim.ttf
filename.UnDotum=/usr/share/fonts/truetype/unfonts/UnDotum.ttf
filename.UnDotum_Bold=/usr/share/fonts/truetype/unfonts/UnDotumBold.ttf
filename.Kochi_Gothic=/usr/share/fonts/truetype/kochi/kochi-gothic.ttf
filename.Sazanami_Gothic=/usr/share/fonts/truetype/sazanami/sazanami-gothic.ttf
filename.Kochi_Mincho=/usr/share/fonts/truetype/kochi/kochi-mincho.ttf
filename.Sazanami_Mincho=/usr/share/fonts/truetype/sazanami/sazanami-mincho.ttf
filename.VL_Gothic=/usr/share/fonts/truetype/vlgothic/VL-Gothic-Regular.ttf
filename.VL_PGothic=/usr/share/fonts/truetype/vlgothic/VL-PGothic-Regular.ttf

filename.Lohit_Bengali=/usr/share/fonts/truetype/ttf-bengali-fonts/lohit_bn.ttf
filename.Lohit_Gujarati=/usr/share/fonts/truetype/ttf-indic-fonts-core/lohit_gu.ttf
filename.Lohit_Hindi=/usr/share/fonts/truetype/ttf-indic-fonts-core/lohit_hi.ttf
filename.Lohit_Kannda=/usr/share/fonts/truetype/ttf-kannada-fonts/lohit_kn.ttf
#filename.Lohit_Malayalam=/usr/share/fonts/lohit-malayalam/lohit_ml.ttf
filename.Lohit_Oriya=/usr/share/fonts/truetype/ttf-oriya-fonts/lohit_or.ttf
filename.Lohit_Punjabi=/usr/share/fonts/truetype/ttf-indic-fonts-core/lohit_pa.ttf
filename.Lohit_Tamil=/usr/share/fonts/truetype/ttf-indic-fonts-core/lohit_ta.ttf
filename.Lohit_Telugu=/usr/share/fonts/truetype/ttf-telugu-fonts/lohit_te.ttf
filename.LKLUG=/usr/share/fonts/truetype/ttf-sinhala-lklug/lklug.ttf

filename.LuxiSans-Regular=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luxisr.ttf
filename.LuxiSans-Bold=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luxisb.ttf
filename.LuxiSans-Oblique=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luxisri.ttf
filename.LuxiSans-BoldOblique=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luxisbi.ttf
filename.LuxiMono-Regular=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luximr.ttf
filename.LuxiMono-Bold=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luximb.ttf
filename.LuxiMono-Oblique=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luximri.ttf
filename.LuxiMono-BoldOblique=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luximbi.ttf
filename.LuxiSerif-Regular=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luxirr.ttf
filename.LuxiSerif-Bold=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luxirb.ttf
filename.LuxiSerif-Oblique=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luxirri.ttf
filename.LuxiSerif-BoldOblique=/usr/share/fonts/truetype/ttf-xfree86-nonfree/luxirbi.ttf

# AWT X11 font paths
awtfontpath.latin-1=/usr/share/fonts/X11/Type1
awtfontpath.umingcn=/usr/share/fonts/truetype/arphic
awtfontpath.uminghk=/usr/share/fonts/truetype/arphic
awtfontpath.umingtw=/usr/share/fonts/truetype/arphic
awtfontpath.shanheisun=/usr/share/fonts/truetype/arphic
awtfontpath.wqy-microhei=/usr/share/fonts/truetype/wqy
awtfontpath.wqy-zenhei=/usr/share/fonts/truetype/wqy
awtfontpath.japanese-kochi=/usr/share/fonts/truetype/kochi
awtfontpath.japanese-sazanami=/usr/share/fonts/truetype/sazanami
awtfontpath.japanese-vlgothic=/usr/share/fonts/truetype/vlgothic
awtfontpath.korean-baekmuk=/usr/share/fonts/truetype/baekmuk
awtfontpath.korean-un=/usr/share/fonts/truetype/unfonts 
```

# perl - Perl - 在网络路径上找到最新的子目录并复制全部内容

> ID：12212605
> 
> 赞同：0
> 
> 时间：2012-08-31T09:31:17.070
> 
> 标签：perl

我想在网络路径中找到最新的子目录，并将最新子目录的全部内容复制到网络路径中的另一个文件夹中

我们在文件夹下有很多子文件夹`\\10.184.132.202\projectdump`我需要对子文件夹进行排序以进入最新文件夹并将整个内容复制到另一个文件夹中`\\10.184.132.203\baseline`

我正在使用下面提到的脚本，我能够在目录下列出最新修改的文​​件夹，但我不知道复制内容。

```
use File::stat;
use File::Copy qw(copy);
$dirname = '\\\\10.184.132.202\\projectdump\\Testing\\';
$destination = '\\\\10.184.132.203\\baseline\\Testing\\';
$timediff=0;
opendir DIR, "$dirname";
while (defined ($sub_dir = readdir(DIR)))
{
    if($sub_dir ne "." && $sub_dir ne "..")
    {
        $diff = time()-stat("$dirname/$sub_dir")->mtime;
        if($timediff == 0)
        {
            $timediff=$diff;
            $newest=$sub_dir;
        }
        if($diff<$timediff)
        {
            $timediff=$diff;
            $newest=$sub_dir;
        }
    }
}
print $newest,"\n";

open my $in, '<', $newest or die $!;
while (<$in>) {
    copy *, $destination; --------> Here i want to copy the entire contents of the $newest to $destination.
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:15:20.650

Use [File::Copy::Recursive](http://search.cpan.org/~dmuey/File-Copy-Recursive-0.38/Recursive.pm). This is an optional module, but allows you to copy entire directory trees. Unfortunately, `File::Copy::Recursive` is not a standard Perl module, but you can install it via the `cpan` command.

If installing modules is a problem (sometimes it is), you can use the [File::Find](http://perldoc.perl.org/File/Find.html) to go through the directory tree and copy files one at a time.

By the way, you can use forward slashes in Perl for Windows file names, so you don't have to double up on backslashes.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:34:51.277

为什么不调用一个简单的 shell cmd 来查找最新的目录？我认为，这在shell中会简单得多......

```
my $newestdir=`ls -1rt $dirname|tail -n 1`; 
```

在外壳中：

```
LATESTDIR=`ls -1rt $dirname|tail -n 1`
cp -r ${LATESTDIR}/* $destination/ 
```

Ups，我刚刚意识到您可能使用 Windows ......

将所有目录及其时间放入一个哈希中，然后对该哈希进行逆序排序以找到最新的

```
my ($newest) = sort {$hash{$b} cmp $hash{$a} keys %hash; 
```

然后

```
opendir NDIR, "$newest";
while ($dir=<NDIR>) {
next if $dir eq '.' or $dir eq '..';
copy $dir, $destination;
} 
```

# html - 为什么我的表格单元格宽度在 Chrome 中错误？

> ID：12212608
> 
> 赞同：24
> 
> 时间：2012-08-31T09:31:31.533
> 
> 标签：html, google-chrome, layout, width, html-table

我有一张有两行的桌子。第一行只有三个单元格。第二行有两个单元格，第一个单元格包含另一个需要填充整个单元格的表格。

```
<table border="1" style="border-collapse:collapse;">
    <tr>
        <td style="WIDTH: 205px;">1</td> <!--This width doesn't apply in Chrome-->
        <td style="width:100%;">2</td>
        <td style="WIDTH: 5px;">3</td>
    </tr>                

    <tr>
        <td colspan="2">

                <TABLE width="100%" border="1" style="border-collapse:collapse;table-layout: fixed;">
                    <TR>
                        <TD style="width:130px;">
                            A</TD>
                        <TD style="width:90px;">
                            B</TD>
                        <TD style="width:230px;">
                           C</TD>
                    </TR>

                </TABLE>        
        </td>
        <td>
            D
        </td>
    </tr>
</table> 
```

很简单，真的……至少我是这么想的。

正如我在 IE 中所期望的那样。但 Chrome 似乎没有正确应用第一个单元格的宽度。它似乎受到下面单元格中的表格的影响。

![在此处输入图像描述](../Images/b938981432e6a92b44f044165bd0af20.png)

为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-31T09:38:54.010

你应该做的两件事：

*   在表格元素上，使用`table-layout: fixed;`
*   插入列并给它们一个宽度
    *   （您还可以为第一行的表格标题/单元格分配宽度）

像这样：

```
<table border="1" style="table-layout: fixed; width: 100%;">
    <colgroup>
        <col style="width: 205px;">
        <col style="width: auto;">
          <!-- Use "width: auto;" to apply the remaining (unused) space -->
        <col style="width: 5px">
    </colgroup>

    <tr>
        <td>1</td>
        <td>2</td>
        <td>3</td>
    </tr> 

    <!-- Etc. --> 
```

# android - PreferenceFragment 中的上下文

> ID：12212609
> 
> 赞同：16
> 
> 时间：2012-08-31T09:31:39.900
> 
> 标签：android, android-fragments, android-preferences

取自[http://developer.android.com/guide/topics/ui/settings.html](http://developer.android.com/guide/topics/ui/settings.html)：

> 注意：PreferenceFragment 没有自己的 Context 对象。如果需要 Context 对象，可以调用 getActivity()。但是，请注意仅当片段附加到活动时才调用 getActivity()。当片段尚未附加或在其生命周期结束时被分离时，getActivity() 将返回 null。

如果我从 PreferenceFragment 的 OnCreate() 方法中调用 getActivity() ，那么我可以确保片段附加到它的活动 - 或者在这种情况下是否有其他方法可以获取上下文？

我需要上下文的原因是我正在尝试使用来自 PreferenceFragment 的 Toast 通知

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-31T09:38:32.717

如果您想确保 Context 可用，您需要等到 Fragment 已附加到 Activity。这个回调是[`onAttach(Activity)`](https://developer.android.com/reference/android/app/Fragment.html#onAttach%28android.app.Activity%29)方法。

根据片段的生命周期状态，该`getActivity()`方法还可以返回 null。

# javascript - 点击图标的时间选择器

> ID：12212610
> 
> 赞同：0
> 
> 时间：2012-08-31T09:31:40.117
> 
> 标签：javascript, twitter-bootstrap

我已经包含了时间选择器，并且可以在单击时选择时间。

```
//= require bootstrap-timepicker 

$('.timepicker-default').each(function(i) {

  //alert($(this).val());
  $(this).timepicker(
  {
    defaultTime:  $(this).val()
  });

}); 
```

现在，如果我添加 twitter-bootstrap 图标 'icon-time' 我怎样才能获得选择点击时间的选项？我用过这个：

```
 <div class="input-append bootstrap-timepicker-component">
  <input type="text" class="timepicker-default" name="planned_start_time" value="<%= @planned_start_time.nil? ? (Time.now).strftime('%I:%M%p') : @planned_start_time%>"> 
    <span class="add-on">
      <i class="icon-time"></i>
    </span>
</div> 
```

但是我的图标在外面，我无法通过点击图标来选择时间。[在http://jdewit.github.com/bootstrap-timepicker/](http://jdewit.github.com/bootstrap-timepicker/)中使用了同样的东西。但是我们可以选择时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T01:13:42.667

I'm the author of the component. The markup has changed a little. The default functionality will do what you are wanting. //js

```
$('.timepicker-default').timepicker(); 
```

//html

```
<div class="input-append bootstrap-timepicker">
    <input type="text" class="timepicker-default" name="planned_start_time" value="<%= @planned_start_time.nil? ? (Time.now).strftime('%I:%M%p') : @planned_start_time%>"> 
    <span class="add-on">
        <i class="icon-time"></i>
    </span>
</div> 
```

# powershell - 在 Powershell for Office 365 中获取邮箱信息

> ID：12212611
> 
> 赞同：1
> 
> 时间：2012-08-31T09:31:40.710
> 
> 标签：powershell, office365

是否可以获取用户名、全名、邮箱大小、以 MB 为单位的邮箱配额、PowerShell for Exchange 365 中所有邮箱的可用空间总大小？

到目前为止，我得到了：

```
Get-Mailbox | Get-MailboxStatistics | Select-Object DisplayName,StorageLimitStatus,TotalItemSize 
```

谢谢！

# java - 仅加密 SQLite 数据库的特定表/字段

> ID：12212613
> 
> 赞同：1
> 
> 时间：2012-08-31T09:31:47.417
> 
> 标签：java, android, android-sqlite

是否可以？

我阅读了有关 SQLCipher 的信息，但它似乎加密了整个数据库。

有没有办法将其配置为仅加密它的特定部分？

一个表或一个字段就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-02T15:13:06.393

最后我不需要使用 SQLite 或任何其他技术进行加密，因为我发现我根本不需要存储应用程序客户端的秘密，只需存储公开的 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T16:05:43.083

您可以使用扩展 DBHelper 并通过一个简单的加密工具运行某些查询，就像在[这个答案](https://stackoverflow.com/questions/8397213/encrypt-and-decrypt-data-for-android-app-client)中提到的那样。

或者从Steven Osborn 编写的[android-passwordsafe中](http://code.google.com/p/android-passwordsafe/)[删除 CrypoHelper 。](http://code.google.com/p/android-passwordsafe/source/browse/branches/crypto-refactor/src/com/bitsetters/android/passwordsafe/CryptoHelper.java?r=59)

# sql - SQL 字符串：不同值的最大值之和（分组依据）

> ID：12212616
> 
> 赞同：1
> 
> 时间：2012-08-31T09:31:51.773
> 
> 标签：sql, ms-access, vba

假设下表：

```
ID     COMPANY     SUBSIDIARY     NR_LIVES     INSURANCE_LINE     FACTOR_CALC
1      COMPANY_X   SUB_1          860          LIFE               YES
2      COMPANY_X   SUB_1          860          DISABILITY         YES
3      COMPANY_X   SUB_1          860          MEDICAL            YES 
4      COMPANY_X   SUB_2          46           LIFE               YES
5      COMPANY_X   SUB_2          689          MEDICAL            YES
6      COMPANY_X   SUB_3          852          LIFE               YES 
```

我需要一个返回值 2401 的 SQL 字符串。这是通过计算 FACTOR_CALC = Yes 的每个子公司的最高 NR_Of_Lives 的总和来完成的。我可能知道如何将所有内容加载到记录集中，然后使用 VBA，但如果可以在一个 SQL 命令中使用，我将不胜感激。

更新：当前查询：

```
sSQL_Select = "SELECT SUM(NR_LIVES) FROM (SELECT SUBSIDIARY, MAX(NR_LIVES) FROM T_WILMA WHERE PARENT=" & lParent & " AND ACC_YEAR=" & lAcc_Year & _
                " AND FACTOR_CALCULATION=TRUE GROUP BY SUBSIDIARY);" 
```

抛出错误：参数太少，预期 1\. 子查询本身按预期工作。感谢到目前为止的回复，但到目前为止我还没有成功地让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:33:55.187

您可以在子查询中确定每个子公司的最大值。然后外部查询可以对最大值求和。

```
select  sum(MaxLives)
from    (
        select  company
        ,       subsidiary
        ,       max(nr_lives) as MaxLives
        from    YourTable
        where   factor_calc = 'yes'
        group by
                company
        ,       subsidiary
        ) as SubQueryAlias 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:34:13.933

```
SELECT SUM(NR_LIVES) 
from(
SELECT SUBSIDIARY,MAX(NR_LIVES) as NR_LIVES
from <Table>
where  FACTOR_CALC='YES'
group by SUBSIDIARY)a 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T15:21:13.367

我建议您包含一些别名，以查看这是否有助于消除 db 引擎的混淆。

```
sSQL_Select = "SELECT SUM(sub.MaxOfNR_LIVES) AS NR_LIVES" & vbcrlf & _
    "FROM (" & vbCrLf & _
    "SELECT SUBSIDIARY, MAX(NR_LIVES) AS MaxOfNR_LIVES" & vbCrLf & _
    "FROM T_WILMA WHERE PARENT=" & lParent & _
    " AND ACC_YEAR=" & lAcc_Year & _
    " AND FACTOR_CALCULATION=TRUE GROUP BY SUBSIDIARY) AS sub;"
Debug.Print sSQL_Select 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-01T22:40:21.290

您需要让系统知道它正在尝试添加哪个 NR_LIVES。在您的桌子上（并取出`WHERE`您的示例中没有的额外内容，这将返回 2401

```
SELECT Sum(MAXNR_LIVES) AS Expr1
FROM (SELECT SUBSIDIARY, MAX(NR_LIVES) AS MAXNR_LIVES FROM T_WILMA 
WHERE FACTOR_CALC=TRUE GROUP BY SUBSIDIARY); 
```

# ruby-on-rails - 无法在没有登录的情况下呈现 json。我该怎么办？

> ID：12212618
> 
> 赞同：0
> 
> 时间：2012-08-31T09:32:01.597
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我是 Rails 新手，我正在尝试几个例子。我有使用设计身份验证的登录页面，我还有一个页面，用户可以在其中存储他们的详细信息、查看、编辑和删除详细信息。登录后以html格式显示。我想为 iPhone 生成 json，所以如果我调用 localhost:3000/posts/1.json 它不会显示 json 但登录后我可以看到 json。那我该怎么做呢？请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:36:57.013

从您所说的几个中，将其添加到您的`PostsController`：

```
skip_before_filter :authenticate_user!, :only => [:show] 
```

但请注意，现在任何人都可以使用此操作，即使是 html 版本。

如果在您的上下文中不安全，请考虑创建另一个专用操作。

# jquery - Jquery：现在不存在但将来会存在的元素的选择器？

> ID：12212619
> 
> 赞同：0
> 
> 时间：2012-08-31T09:32:04.550
> 
> 标签：jquery, asp.net, jquery-selectors

在 aspx 页面中，有一个网格视图，它有复选框的模板控件，像这样

```
<asp:gridview .....
  <columns>
    <asp:TemplateField>
      <HeaderTemplate>
        <asp:CheckBox ID="chkAll" runat="server"/>
      </HeaderTemplate>
      <ItemTemplate>
        <asp:CheckBox ID="chkSelect" runat="server"/>
      </ItemTemplate>
    </asp:TemplateField>
... 
```

现在，如果我写类似

```
$(#'<%=chkSelect.ClientID%>').something( function() {}); 
```

我收到一条错误消息，说'chkSelect 在当前上下文中不存在，这很明显，因为加载griddata 时该元素将存在，我所做的是将复选框的更改事件绑定到委托..

```
$("body").delegate(":checkbox", "change", function () {
                custList = $(':checkbox:checked').map(function () { return $(this).closest('tr').find('.grdCustName').text() }).get();
                $('#<%=hdnFromCustomer.ClientID %>').val(custList);
            } 
```

这再次正常工作，问题是我需要知道具有特定 id 的复选框（例如此处，`chkAll`）是否已更改（单击），然后选择所有复选框，全部检查不是问题，我可以这样做有类似的`$(':checkbox').attr(checked, 'on')`东西。

但问题是，如果我写 `$('#<%=chkAll.ClientID %>')`，它不允许我这样做，因为此复选框在启动时不存在于 DOM 中，但当用户单击`showReport`按钮并填充网格时将可用。

所以，基本上，我的问题是如何选择，或者我应该使用什么选择器来选择 DOM 中不存在但将来某个时间会存在的这个复选框（或任何其他元素）？

**编辑：**针对某些答案，问题不具有约束力，我`delegate()`已经通过 using 完成了，我也可以通过使用`.on()`or完成`.live()`。问题就像`Felix Kling`评论一样，他一针见血，（阅读他的评论和我对他的回复）。问题是页面启动时 DOM*中不存在该元素。**它是*在用户单击`showReport`按钮时动态构建的，并且 gridview 会填充数据，*这就是创建此元素的位置*。虽然我描述的方法`Yoeri`可能/可能不起作用，但我想知道*是否有任何可能的方法（当然是 jQuery！）我可以选择这种情况下描述的这样一个元素*，还是我唯一的选择是寻找类似`Yoeri`答案的替代方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:39:17.483

为什么不在自定义属性或类上选择 chkAll 框？

我经常使用 action 属性将事件绑定到...只是为了保持所有事物的一致性并与 css 类分开（这不是为了将行为绑定到它，而是为了样式;-)

```
<input type="check" action="checkAll"
...
$('input[action=checkAll]').delegate(....) 
```

至于添加action属性，可以看这里...（避免添加额外的span元素） [adding-custom-attributes-to-an-aspcheckbox-control](https://stackoverflow.com/questions/9939287/adding-custom-attributes-to-an-aspcheckbox-control)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T20:56:58.260

在 WebForms 中工作时，我经常使用带有选择器的结尾。在您的情况下，您正在寻找的选择器将显示为：

```
$("input[id$='checkAll']") 
```

或者，如果您使用的是 WebForms 4.0，您可以将复选框上的[客户端 id 模式](http://msdn.microsoft.com/en-us/library/system.web.ui.clientidmode.aspx)设置为静态，并且您可以获得一个相对健全的 id 来硬编码作为您的选择器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:39:30.340

只需运行构建并从后面的 .net 代码运行 jquery 代码。

此 Gist 中的代码将有助于使其快速简单：[https ://gist.github.com/3415335](https://gist.github.com/3415335)

# objective-c - 如何编写强大的完成块？

> ID：12212620
> 
> 赞同：0
> 
> 时间：2012-08-31T09:32:04.957
> 
> 标签：objective-c, objective-c-blocks

我正在尝试编写一个带有完成块的方法：

```
//typedef head of block
typedef void (^CommonErrors)(NSError *error);

//method with block
-(void)MethodWithString:(NSString*)string onError:(CommonErrors)ErrorBlock;

//somewhere in code:

[self MethodWithString:(NSString*) onError:^(NSError *error)ErrorBlock]; 
```

没关系，如果我双击`^(NSError *error)ErrorBlock`，
那么我将得到以下代码：`^(NSError *error){code}`

```
[self MethodWithString:(NSString*) 
               onError:^(NSError *error){
                   code
               }
]; 
```

但是每次，当我使用 this 时`CommonErrors`，
我都会使用我的模板：`onError:(CommonErrors)ErrorBlock`.
我的代码到处都是这样的：

```
onError:^(NSError *error){
    ErrorBlock(error)
} 
```

我可以通过在某处定义此模板来做到这一点吗？或者类似的东西？是否可以？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:34:28.347

实际上，我只是重读了您的问题-块类型永远不会在消费者方法签名中使用。这样做的原因是，其他人如何不看类型就知道要传递哪些参数？

您看到的行为是设计使然，块的 typedef 扩展为实际签名。

显然这是一个代码片段问题。

请参阅此[http://nearthespeedoflight.com/article/xcode_4_code_snippets](http://nearthespeedoflight.com/article/xcode_4_code_snippets)

# c - 比较字符串数组

> ID：12212625
> 
> 赞同：-3
> 
> 时间：2012-08-31T09:32:22.897
> 
> 标签：c

```
#include<reg51.h>
#include<string.h>
#include"_LCD_R8C.c"
unsigned char c[12];
unsigned char chr[11];
void serial_int (void) interrupt 4
{
  if (RI==1)      
  {
    chr[11] = SBUF;
    RI = 0;     
    TI = 0;     
  }
}

int main()
{
  unsigned char a[2][11]={"$0016221826","$0123456789"};
  int i,j;
  lcd_init();
  lcd_clear();
  SCON = 0x50;              
  TMOD = 0x20;                
  TH1  = 0xFD;                 
  ET0  = 0;                     
  TR1  = 1;                       
  RI   = 1;                   
  ES   = 1;                   
  EA   = 1;
  for(j=0;j<1;j++)
      {
       for(i=0;i<=10;i++)
       {
        c[i]=chr[i];
       }
     c[11]='\0';
     }                   
  for(i=0;i<=1;i++)
  {
    j=strcmp(a[i],c); /* !!! Here is the problem !!! */
    if(j==0)
     {
      lcd_printxy(1,1,"yes");
     }
    else
     {
      lcd_printxy(1,6,"no");
     }
 }
} 
```

我的显示为“否”，请告诉我是什么问题？问题可能是 1) 接收到的字符数组未转换为字符串，或 2) 接收到的字符数组已转换为字符串但无法与可用字符串进行比较.. 请通过程序

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:34:51.117

对于初学者来说一个明显的错误 - 更改：

```
unsigned char a[2][11]={"$0016221826","$0123456789"}; 
```

至：

```
unsigned char a[2][12]={"$0016221826","$0123456789"}; 
```

（您需要为`'\0'`每个字符串的终止留出空间 - 我很惊讶您的编译器没有抱怨这个？）

此外，您的中断处理程序中的这一行是错误的：

```
chr[11] = SBUF; 
```

这有几个问题 -`char`只能存储 11 个字符，而不是 12 个字符，并且您可能希望从索引 0 累积字符，然后碰撞索引，否则您每次只是覆盖相同的字符。

查看其余代码，还有很多其他问题，我认为您可能需要退后一步，从一个更简单的程序开始——先让它工作，然后分阶段添加。

您可能还想获得一本不错的 C 入门书籍并学习它，因为代码中有很多非常基本的错误，因此您可能会从更好地理解语言本身中受益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:40:26.783

您只需为 分配一个值`chr[11]`，数组的其余部分未初始化并将包含随机数据。然后，您将包含随机数据的这个数组复制到`c`（您可以在此处使用 eg`memcpy`而不是自己循环），最后将`c`（随机数据）的完整内容与`a`. 因此，比较的结果是字符串不相等是很自然的。

**编辑：**问题中程序的重新设计

你的程序有太多问题不容易修复，所以我决定尝试重写它：

```
#include <reg51.h>
#include <string.h>

#include "_LCD_R8C.c"

#define INPUT_LENGTH 11
#define ACCEPTABLE_INPUT_COUNT 2

char input[INPUT_LENGTH];  /* The input from the serial port */
int  input_pos  = 0;       /* Current position to write in the input buffer */
int  input_done = 0;       /* 0 = not done yet, 1 = all input read */

void serial_int (void) interrupt 4
{
    if (!input_done && RI == 1)
    {
        /* Put the input at next position in the input buffer */
        /* Then increase the position */
        input[input_pos++] = SBUF;

        RI = 0;
        TI = 0;

        /* Check if we have received all input yet */
        if (input_pos >= INPUT_LENGTH)
            input_done = 1;
    }
}

int main()
{
    /* Array of data that this programs thinks is acceptable */
    /* +1 to the input length, to fit the terminating '\0' character */
    char acceptable_inputs[ACCEPTABLE_INPUT_COUNT][INPUT_LENGTH + 1] = {
        "$0016221826", "$0123456789"
    };

    iny acceptable_found = 0;  /* Acceptable input found? */

    /* Initialization */
    lcd_init();
    lcd_clear();
    SCON = 0x50;              
    TMOD = 0x20;                
    TH1  = 0xFD;                 
    ET0  = 0;                     
    TR1  = 1;                       
    RI   = 1;                   
    ES   = 1;                   
    EA   = 1;

    /* Wait until we have received all input */
    while (!input_done)
        ;  /* Do nothing */

    /* Check the received input for something we accept */
    for (int i = 0; i < ACCEPTABLE_INPUT_COUNT; i++)
    {
        if (memcmp(acceptable_inputs[i], input, INPUT_LENGTH) == 0)
        {
            /* Yes, the data received is acceptable */
            acceptable_found = 1;
            break;  /* Don't have to check any more */
        }
    }

    if (acceptable_found)
        lcd_printxy(1, 1, "Yes");
    else
        lcd_printxy(1, 1, "No");

    return 0;
} 
```

# c++ - win32 句柄和多线程

> ID：12212628
> 
> 赞同：3
> 
> 时间：2012-08-31T09:32:40.287
> 
> 标签：c++, winapi, events, handle

在我们的应用程序中，有大量使用win32 HANDLE，使用CreateEvent、SetEvent/ResetEvent，从而执行同步机制。

我的一位同事问我访问事件的句柄是否是线程安全的。

我无法回答，因为 HANDLE 对于任何 GDI 对象都不是线程安全的……

但是由于事件是针对多线程同步的，我无法想象它们不是线程安全的。

你能确认一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T11:16:41.427

您从 Kernel32 中的函数获得的所有句柄都是线程安全的，除非该函数的 MSDN 库文章明确提到它不是。有一种简单的方法可以从您的代码中看出，这样的句柄是用 CloseHandle() 关闭的。

您对句柄*所做*的操作不一定是线程安全的，当您调用 SetEvent() 两次但只调用一次 WaitForSingleObject() 时，Windows 将无济于事。这可能是您程序中的线程竞赛，具体取决于您如何使用该事件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:46:41.787

取决于手柄的类型。

同步句柄（如由 CreateEvent 创建的句柄）根据定义是线程安全的。一个文件句柄，当被多个线程同时写入时，不是那么多。

# android - 同时在同一个端口上使用 UDP server-client

> ID：12212629
> 
> 赞同：1
> 
> 时间：2012-08-31T09:32:40.987
> 
> 标签：android, udp, udpclient

我有一个适用于 UDP 数据包的应用程序。所以我想在同一个应用程序中同时发送和接收 UDP 数据包。这是真的吗？现在它完美地工作，但分开。代码片段： `UDP Server:`

```
public class UDPServer {    
DatagramPacket packet;  
DatagramSocket socket;      
static int port = 11111;    
private boolean isRun = false;
private String message = "";
private int broadcastInterval;  
private Context context;

public boolean IsRunUDPServer(){
    return isRun;
}
public void StopBroadcasting(){
    isRun = false;      
}
public void StartBroadcasting(String message, int broadcastInterval){
    isRun = true;
    this.message = message;
    this.broadcastInterval = broadcastInterval;     
    new Thread(runner).start();     
}

Runnable runner = new Runnable() {      
    public void run() {
        while(isRun){               
            try {
                //Sending(message);
                SendBroadcastMessageOverWiFi(message);
                Thread.sleep(broadcastInterval);
                Log.e("SendBroadcastMessageOverWiFi", message);
            } catch (InterruptedException e) {                  
                e.printStackTrace();
            } catch (IOException e) {                   
            }
        }
        if(socket!=null){
            socket.disconnect();
            socket.close();             
        }           
    }
};

public UDPServer(Context context) {
    this.context=context;       
}

private InetAddress getBroadcastAddress() throws IOException {      
    WifiManager wifi = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
    DhcpInfo dhcp = wifi.getDhcpInfo();
    // handle null somehow
    if(dhcp==null){ return null; }
    int broadcast = (dhcp.ipAddress & dhcp.netmask) | ~dhcp.netmask;
    byte[] quads = new byte[4];
    for (int k = 0; k < 4; k++)
      quads[k] = (byte) ((broadcast >> k * 8) & 0xFF);
    return InetAddress.getByAddress(quads);
}

private void SendBroadcastMessageOverWiFi(String message) throws IOException{
    InetAddress addr = getBroadcastAddress();
    if(addr!=null){
        if(socket==null){
            socket = new DatagramSocket(port);          
            socket.setBroadcast(true);              
        }
        DatagramPacket packet = new DatagramPacket(message.getBytes(), message.getBytes().length,
            addr, port);
        socket.send(packet);                
    }       
}} 
```

`UDP Client:`

```
public class UDPClient {
MulticastSocket socket;
InetAddress groupAddress;
DatagramPacket packet;
byte[] buffer;

private static final int UDP_SERVER_PORT = 11111;
private static final int MAX_UDP_DATAGRAM_LEN = 32768;      

public interface OnReceiveDataListener{
    public abstract void onReceiveData(String data);
}

private OnReceiveDataListener ReceiveDataListener = null;   

public void setReceiveDataListener(OnReceiveDataListener ReceiveDataListener) {
    this.ReceiveDataListener = ReceiveDataListener;
}

public OnReceiveDataListener getReceiveDataListener() {
    return ReceiveDataListener;
}

private boolean isRun = false;  
private Thread broadcastReceiver;
public void StopReceiving(){
    isRun = false;      
}
public void StartReceiving(){
    isRun = true;           
    buffer = new byte[4096];
    broadcastReceiver = new Thread(runner);     
    broadcastReceiver.start();
}
Runnable runner = new Runnable() {      
    @Override
    public void run() {
        while(isRun){               

            String lText;
            packet = new DatagramPacket(buffer, buffer.length);             
            DatagramSocket ds = null;
            try {
                ds = new DatagramSocket(UDP_SERVER_PORT);                   
                ds.receive(packet);
                lText = new String(packet.getData(), 0, packet.getLength());
                Log.i("UDP packet received", lText+"  "+packet.getLength()+"  "+packet.getData().length);
                if(getReceiveDataListener()!=null)
                    getReceiveDataListener().onReceiveData(lText);

            } catch (SocketException e) {
                e.printStackTrace();
            } catch (IOException e) {
                e.printStackTrace();
            } finally {
                if (ds != null) {
                    ds.close();
                }
            }
        }           
    }
};} 
```

如果我启动服务器，客户端将无法接收 udp 数据包。请帮我。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-12T17:17:04.887

一次只有一个套接字（在一个进程中）可以绑定到给定的 UDP 端口。不允许将两个套接字绑定到同一个 UDP 端口号。

在大多数情况下，没有理由将客户端绑定到特定端口。相反，指定端口`0`( `INADDR_ANY`)，系统将分配一个未使用的动态端口。

# python - SQL Alchemy 覆盖 ==

> ID：12212636
> 
> 赞同：3
> 
> 时间：2012-08-31T09:33:01.243
> 
> 标签：python, sqlalchemy

我正在创建代表用户凭据的 SQLAlchemy 类。

我想要`password`存储密码哈希值的字段。因此，我想通过以下方式覆盖其行为：

1.  分配`credentials.password = value`时，它实际上存储值的散列

2.  比较`credentials.password == value`时，它实际上是与值的哈希值进行比较

[我已阅读 SQLAlchemy 文档http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#using-descriptors-and-hybrids](http://docs.sqlalchemy.org/en/rel_0_7/orm/mapper_config.html#using-descriptors-and-hybrids)的以下部分

而且我想我确实了解如何解决第 1 个问题。

但是我不确定，如何做第二点。有没有办法以安全的方式做到这一点（不破坏 SQLAlchemy）？

这是示例模型：

```
class Credentials(Base):
    __tablename__ = 'credentials'

    id = Column(Integer, primary_key=True)

    _password = Column('password', String)

    @hybrid_property
    def password(self):
        return self._password

    @password.setter(self):
        self._password = hash(self._password) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T10:58:53.473

为了进行比较，由于您无法取消对密码的哈希处理，因此您需要为 Column 类创建一个自定义类型，该类型会覆盖 eq 运算符：

```
class MyPasswordType(String):
    class comparator_factory(String.Comparator):
        def __eq__(self, other):
            return self.operate(operators.eq, hash(other)) 
```

看看：[http ://docs.sqlalchemy.org/en/latest/core/types.html#types-operators](http://docs.sqlalchemy.org/en/latest/core/types.html#types-operators)

和[http://docs.sqlalchemy.org/en/latest/core/types.html#sqlalchemy.types.TypeEngine.comparator_factory](http://docs.sqlalchemy.org/en/latest/core/types.html#sqlalchemy.types.TypeEngine.comparator_factory)

要进行设置，您只需要传入值：

```
@password.setter
def password(self, value):
    self._password = hash(value) 
```

# php - Codeigniter、密码或用户名错误消息（数据库验证）

> ID：12212638
> 
> 赞同：1
> 
> 时间：2012-08-31T09:33:02.327
> 
> 标签：php, codeigniter, login, validation

问题 1）我已经设置了一个注册/登录区域并验证了所有内容（包括空白字段），如果用户名和/或密码不正确，则在显示错误消息时碰壁。目前，如果字段留空，但在提交页面时，我会收到一条错误消息，显示正确或不正确的用户详细信息。这是我当前的代码：

问题 1（已解决）：

控制器：

```
//This method will have the credentials validation
    public function credentials_validation() {
        $data['error'] ="Invalid Username or Password";
        $this->load->library('form_validation');
        $this->form_validation->set_rules('username', 'Username', 'trim|required|xss_clean|callback_username_check');
        $this->form_validation->set_rules('password', 'Password', 'trim|required|xss_clean|callback_password_check');

          if($this->form_validation->run() == FALSE)
           {
             //Field validation failed.  User redirected to login page
             $this->index();

             }else{
                 $this->load->model('register_model');

                if($query = $this->register_model->validate()) {
                $this->load->model('news_model');

                $data = array('news' => $this->news_model->getArticle());
                $data['title'] = 'Admin | Home';
                $data['heading'] = 'News Articles';
                $data['main_content'] = 'admin/news';
                $this->load->view('include/template', $data);

                }else {
                $this->load->view('login',$data);
                }    

            }
    } 
```

问题 2) 新闻文章页面仅加载 1 篇文章，并且 url 显示类名。

新闻总监：

```
class News extends CI_Controller {

    public function __construct() {
        parent::__construct();
        $this->load->model('admin/news_model');
    }

    public function index() {
        $data = array('news' => $this->news_model->getArticle());
        $data['title'] = 'Admin | News Home';
        $data['heading'] = 'News Articles';
        $this->load->view('admin/news', $data); 
} 
```

}

新闻模型只是拉取数据库表，全选并按 id 排序并生成数组。任何人都知道为什么这仅显示 1 个结果？我认为这与 foreach 方法有关吗？

PS，没有从 CI 或 php 错误日志中显示错误消息！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T12:47:53.000

最好的方法是将错误消息存储在一个数组中，例如

```
$data['error'] ="Invalid Login"; 
```

例如在控制器中

```
if($query = $this->register_model->check_membership()) {
    $data['main_content'] = 'signup_successful';
    $this->load->view('include/template', $data);

}else {
    $data["error"]="Invalid User Id and Password combination";
    $this->load->view('signup',$data);
} 
```

该`check_membership`功能应检查登录名和密码组合是否正常。

然后在`signup`视图页面中，在顶部放一些东西

```
if (isset($error)){
    echo "<div class='error'>$error</div>";
} 
```

# android - Android 性能：平面文件与 SQLite

> ID：12212640
> 
> 赞同：26
> 
> 时间：2012-08-31T09:33:06.633
> 
> 标签：android, sqlite, flat-file

在stackoverflow上与这个主题相关的问题很少，但我没有得到正确的答案。我对平面文件的性能有一些疑问，使用**平面文件**而不是**SQLite**更好吗？任何人都可以有性能统计数据吗？或在 android 中编码平面文件的正确方法示例。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-08-31T11:19:14.547

除了性能优势之外，以下是使用 SQLite 而不是平面文件的优势的简单列表：

*   您可以根据需要查询项目 - 不需要加载所有项目并选择您需要的项目。
*   删除记录是一个不那么痛苦的过程。无需将整个文件重写到任何地方。
*   更新记录与删除或创建记录一样简单。
*   您是否尝试过对平面文件进行交叉引用查找？不值得。

总而言之，这是数据库相对于文本文件的所有优势。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-31T09:36:32.077

这取决于您的要求。

如果您的存储数据规模庞大，那么我建议您使用 SQLite。另一方面，如果数据大小只有一行或几行，那么平面文件是最佳选择。

它们之间的区别在于，SQLite 以结构化格式存储数据，因此可以更容易地从多组记录中找到一条记录，这在平面文件的情况下是非常繁琐的过程。

但是，如果您要存储 blob 类型的数据，则建议同时使用 SQLite 和文件系统两者的组合。即将图像/声音/视频数据存储为文件格式，并将它们的路径存储在 SQLite 中。

也访问这个[访问性能](https://stackoverflow.com/a/9141116/996493)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-05-14T07:33:50.690

SQlite 在性能方面肯定要好得多，随着数据大小的增加，这一点变得更加重要。

我一直在开发一个颤振应用程序，我需要根据输入的文本动态显示过滤的项目列表。我最初使用一个 json 文件来存储数据，并将相关值读取并存储到一个列表中，然后在用户键入时过滤这个列表。

这适用于一些项目，所以我认为我很好，直到我使用包含超过 150,000 个项目的真实数据集进行测试。尝试过滤用户类型如此大的列表会使应用程序崩溃。我转向数据库解决方案，我的所有问题都得到了解决。即时过滤，不再崩溃

# php - PHP mysql使用ORDER BY DESC对行进行排序

> ID：12212648
> 
> 赞同：0
> 
> 时间：2012-08-31T09:33:47.933
> 
> 标签：php, mysql, sorting

我正在使用 UNITY 创建一个游戏，它是 PHP bla bla... 你我有一些小事情需要弄清楚才能对行进行排序。问题是——这是一款我需要对玩家进行分类的游戏。例如，如果玩家 3 离开/离开游戏，那么玩家 3 的 uid 为 2

那么我们只有玩家 1 玩家 2 和玩家 4 他们有 0 1 3

```
player1 = 0
player2 = 1
player3 = 2
player4 = 3 
```

所以我需要做的就是把它整理出来，所以如果`player3 left uid 2` 我需要做整理，它会这样

```
player4 = 3
player2 = 1
player1 = 0 
```

我使用了`sort( $row = mysql_fetch_array( $sql ) )`但我只得到了错误我也使用了`sort( $row['players'] );` `$row['players']`这是`0 1 2 3` 但它没有对我需要的东西进行排序但它的输出是这个

```
player1 = 3
player2 = 1
player4 = 0 
```

这是错误的，现在玩家和当前玩家不相等

帮帮我，什么应该是正确的代码

我希望每个人都明白我需要在这里解决什么。

我也尝试使用 ORDER BY player DESC，但效果不佳。我知道有一些更具体的订购。

我有更多解​​释，这是我需要解决的顺序/排序。

```
GameID   Turn   
3         2
6         1
7         2
5         2
8         0
9         1

return should be { for example GameID 6 is TURN for the Game or Left in the Game }
GameID   Turn
6         1
9         1
8         0
3         2
5         2
7         2

another example { for example GameID 7 is TURN for the Game or Left in the Game }
GameID   Turn
7         2
3         2
5         2
8         0
9         1
6         1 
```

这是我的查询

```
$email_val = email@sample.com';

if( $email_val != null ){
    $sqlCheckError = mysql_query( "SELECT * FROM game WHERE player1 = '".$email_val."' || player2 = '".$email_val."' || player3 = '".$email_val."' || player4 = '".$email_val."' " ) or die ( mysql_error() );
    $gameCheck = mysql_fetch_array($sqlCheckError);
    // CHECK FOR GAMEID ERROR
    $gameIDCheck = $gameCheck['gameID'];
    // EMAIL EQUAL TO THE CURRENTTURN WHERE ID
    $sql = mysql_query( "SELECT * FROM game WHERE player1 = '" . $email_val . "' || player2 = '".$email_val."' || player3 = '".$email_val."' || player4 = '".$email_val."' " ) or die ( mysql_error() );
    // FIXED THE SORT OF 
    while ( $row = mysql_fetch_array( $sql ) ) {                
        $p1 = $row['player1'];
        $p2 = $row['player2'];
        $p3 = $row['player3'];
        $p4 = $row['player4'];

        if ($asterisk > 0) {
            echo "*";
        }
        echo $row['gameID'] . '|';
        echo $row['gameStatus'] . '|';

        echo $getNameLower->_NAME_LOWER_PLAYER_ONE_( $p1 );
        echo $getNameLower->_NAME_LOWER_PLAYER_TWO_( $p2 );

        if ( !empty( $p3 ) ){
            echo $getNameLower->_NAME_LOWER_PLAYER_THR_( $p3 );
        } else {
            echo '';
        }
        if ( !empty( $p4) ){
            echo $getNameLower->_NAME_LOWER_PLAYER_FOU_( $p4 );
        } else {
            echo '';
        }

        echo '|' . $row['start'];
        echo '|' . $row['currentTurn'];
        echo '|' . $row['lastWord'];
        echo '|' . $row['lastPlayer'];
        echo '|' . $row['lastPoints'];

        $cur = $row['currentTurn'];
        // CHECK THE CurrentTurn then PUT IT AS PICURL
        if ( $cur == '0' ) { echo $getPIC->purl_1( $p1 ); } 
        elseif( $cur == '1' ) { echo $getPIC->purl_2( $p2 ); }
        elseif( $cur == '2' ) { echo $getPIC->purl_3( $p3 ); }
        elseif( $cur == '3' ) { echo $getPIC->purl_4( $p4 ); }

        $asterisk++;
    }

    if( $gameIDCheck == null ){
        echo '0';           
    }
}
else{
    echo '0';
} 
```

是的，我已经首先想到了。Order By 真的很容易对所有内容进行排序。但它不会像这样 2 0 1 排序，`1 2 0`因此，如果我们使用 ORDER BY DESC 2 1 0 和 ASC 0 1 2 我希望它现在清楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:37:37.957

尝试使用[http://www.php.net/manual/en/function.asort.php](http://www.php.net/manual/en/function.asort.php)来保留您的索引关联。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:44:34.230

是的。使用 ORDER BY DESC 执行查询本身的排序 .. 它让生活更轻松..

# asp.net - 使用 sharepoint 2010 中的可视化 webpart 将照片上传到自定义列表

> ID：12212652
> 
> 赞同：0
> 
> 时间：2012-08-31T09:33:57.983
> 
> 标签：asp.net, sharepoint-2010

我有一个列表 ListPersonalDetails，用于存储学生的个人详细信息。它具有名字、姓氏、地址等字段。它还包含一个用于存储图像类型的照片的字段。我创建了一个可视化 Web 部件 StudentPersonalDetails，以将项目添加到 ListPersonalDetails。它包含一个用于浏览照片的文件上传控件。我需要将图像以及其他详细信息上传到列表中。

使用以下代码部分更新列表：

```
SPListItem studentDetailsItem = 
    SPContext.Current.Web.Lists["ListPersonalDetails"].Items.Add();

studentDetailsItem["StudentID"] = Guid.NewGuid();
studentDetailsItem["FirstName"] = txtFirstName.Text;
studentDetailsItem["LastName"] = txtLastName.Text; 

//studentDetailsItem["photo"]=need to upload photo
studentDetailsItem.Update(); 
```

# c# - 围绕现有 XDocument 包装附加元素

> ID：12212654
> 
> 赞同：3
> 
> 时间：2012-08-31T09:34:04.317
> 
> 标签：c#, xml, linq-to-xml

假设我有一个转换后的 HTML 文档，并且我想在父级周围包装一个额外的标签，以便我可以读取`head`and `body`。我将如何用 C# 做到这一点？该文件用作`XDocument`.

改变

```
<html>
    <head>
        <!-- data -->
    </head>
    <body>
       <!-- data -->
    </body>
</html> 
```

至

```
<open>
    <html>
        <head>
            <!-- data -->
        </head>
        <body>
            <!-- data -->
        </body>
   </html>
</open> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:07:04.443

假设`doc`是您现有的文档。那么你只需要

```
var wrapped = new XElement("open", doc); 
```

你有`XElement`你想要的。

# google-apps-script - HTML 到 Google 文档的转换

> ID：12212655
> 
> 赞同：0
> 
> 时间：2012-08-31T09:34:06.747
> 
> 标签：google-apps-script

我需要将 HTML 文件转换为 Google 文档。我现在的尝试是这样的：

```
var html_file = DocsList.createFile('myfile.html', data, "text/html");
var docs_file = html_file.getAs('application/??').getBytes(); 
```

谷歌文档的 mimetype 应该是什么？我的方法正确吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T16:51:08.063

遗憾的是，目前无法将文件转换为原生 Google 文档格式（文档、电子表格、演示文稿等）。

# c# - 使用 watin 在 C# 中下载完成后关闭对话框

> ID：12212659
> 
> 赞同：0
> 
> 时间：2012-08-31T09:34:21.520
> 
> 标签：c#, automation, nunit, watin

我正在我的应用程序中使用 WaTin 处理对话框，并使用 Watin 保存文件。但是在保存文件并下载完成后，另一个对话框仍然打开，带有三个按钮。`"Open"` `"Open Folder"` `"Close"`

我想在下载完成后关闭此对话框。

```
 FileDownloadHandler fileDownloadHandler = new FileDownloadHandler("Arslan");
            browser.AddDialogHandler(fileDownloadHandler);
            browser.Button("Save").ClickNoWait();
            fileDownloadHandler.WaitUntilFileDownloadDialogIsHandled(15);
            fileDownloadHandler.WaitUntilDownloadCompleted(200); 
```

请为此提出任何出路

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-13T14:56:55.433

我在**IE7**下遇到了同样的问题。但是，如果您正在下载多个文件，则按照*Ashish*的建议删除处理程序无法执行该任务，因为删除处理程序只会跳到下一个任务，这将导致下一次迭代出错。
所以最简单的解决办法就是配置IE7下载完成后自动关闭下载窗口。这是通过取消选中 IE7 Under -> `Intenet options`-> `Advanced`-> `Browsing`->上的“下载完成时通知”选项来完成的`Notify when downloads are complete`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:42:37.770

我遇到了类似的问题，我观察到的一些事情是

1.  当打开多个浏览器实例时，所有对话框处理程序都会遇到问题。当测试运行时只打开一个浏览器实例时，我很少遇到问题。
2.  除非从浏览器实例中删除对话框处理程序，否则在下一次文件下载尝试期间它几乎肯定会失败。

此外，您可能想尝试增加 WaitUntilFileDownloadDialogIsHandled 超时。

```
FileDownloadHandler fileDownloadHandler = new FileDownloadHandler(downloadlocation);
try
{
    Button button = browser.Button(Find.ByText("Save"));
    browser.AddDialogHandler(fileDownloadHandler);
    button.ClickNoWait();
    fileDownloadHandler.WaitUntilFileDownloadDialogIsHandled(40);
    fileDownloadHandler.WaitUntilDownloadCompleted(200);

}
catch (Exception excp)
{
    /// Log exception message
}
finally
{
    /// Remove the dialog handler
    browser.RemoveDialogHandler(fileDownloadHandler);
} 
```

# blackberry - 单击时，我需要更改 UI 而无需为同一屏幕推送新对象

> ID：12212662
> 
> 赞同：0
> 
> 时间：2012-08-31T09:34:32.140
> 
> 标签：blackberry

![第一张图片](../Images/8a83dfdf29b1e835676c3581e8458b64.png)

![第二张图片](../Images/274cb05d39b7900b0c9e8a32f1053dbb.png)

以上图片为安卓应用。功能是，如果我单击管理按钮，则取消按钮将出现在管理按钮的位置，同步按钮将出现在屏幕底部。我们可以在不推送新屏幕的情况下在 BB OS 5.0 应用程序中实现这一点吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-01T05:03:54.653

首先管理按钮和取消按钮具有相同的用户界面，因此不需要更改按钮只需更改它的标签即可管理取消。& 在其导航上单击，根据标签执行任务。

```
<Button Object>.setLabel("Cancel"); 
```

在屏幕的页脚中添加一个水平管理器。一旦你按下管理添加 Snyc 图像到这个 HFM 并且一旦它完成，你可以删除它。

我希望它对您有用，无需更换新屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T11:00:08.433

是的，将[Horizo​​ntalFieldManager](http://www.blackberry.com/developers/docs/4.1api/net/rim/device/api/ui/container/HorizontalFieldManager.html)实例添加到屏幕顶部并保持对它的引用。然后根据您的条件向该管理器添加/删除字段。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-01T09:29:14.213

使用`Screen`/的删除、添加和插入方法`Manager`，您可以随时修改 UI。检查以下方法。

*   [`public void deleteAll()`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html#deleteAll%28%29)
*   [`public void delete(Field field)`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html#delete%28net.rim.device.api.ui.Field%29)
*   [`public void insert(Field field, int index)`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html#insert%28net.rim.device.api.ui.Field,%20int%29)
*   [`public void add(Field field)`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html#add%28net.rim.device.api.ui.Field%29)

要在修改任何屏幕后刷新/重新绘制任何屏幕，`Screen`您可以使用以下任何一种方法。

*   [`public void invalidate()`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html#invalidate%28%29)
*   [`protected void invalidate(int x, int y, int width, int height)`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html#invalidate%28int,%20int,%20int,%20int%29)
*   [`protected void invalidateFieldRange(int lower, int upper)`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html#invalidateFieldRange%28int,%20int%29)

并检查[`Screen`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Screen.html)and [`Manager`](http://www.blackberry.com/developers/docs/5.0.0api/net/rim/device/api/ui/Manager.html)( `VerticalFieldManager`, `HorizontalFieldManager`) 的文档以获得更多想法。

# sql - 从具有循环外键的两个表中删除

> ID：12212664
> 
> 赞同：11
> 
> 时间：2012-08-31T09:34:34.473
> 
> 标签：sql, oracle

我有两张桌子

```
TableOne (TABLE_ONE_ID (pk), TABLE_TWO_ID (fk), ...(something else) )
TableTwo (TABLE_TWO_ID (pk), TABLE_ONE_ID (fk), ...(something else) ) 
```

如何从这些表中删除记录？

PS我认为这是糟糕的设计，但这不是我的错，我没有更改数据库结构的权限。我只需要知道如何从这些表中删除记录。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-31T09:39:32.807

我不确定解决这个问题的最佳方法，但我可能会做类似的事情：

```
UPDATE TableOne SET TABLE_TWO_ID = null;
DELETE FROM TableTwo;
DELETE FROM TableOne; 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-31T09:39:16.013

您可以使用以下方法禁用外键：

```
alter table TableOne disable constraint fk_table_two_id; 
```

之后，您应该能够删除这些行。

根据 DaveCosta 的评论，您可以推迟约束检查。这样，约束是在整个事务中检查的，而不是每个单独的 SQL 语句。例如：

```
begin transaction;
set constraints all deferred; 
delete from TableTwo;
delete from TableOne;
commit transaction; 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-09-01T04:29:22.773

要么[推迟](http://docs.oracle.com/cd/B10500_01/server.920/a96524/c22integ.htm#4666)外键之一，要么分配 NULL（假设它可以为 NULL）以打破循环。

顺便说一句，你是如何**插入**数据的？你一定也做了一些事情来打破那里的循环。

注意：如果只有一个仔细控制的会话正在修改数据库，则禁用或删除 FK 可能没问题，但在其他客户端可能不知道他们期望的 FK 不再强制执行的并发环境中，您可能会因数据损坏而敞开大门.

# c# - 在构建器模式中管理订单的首选方法是什么？

> ID：12212666
> 
> 赞同：5
> 
> 时间：2012-08-31T09:34:35.063
> 
> 标签：c#, design-patterns, nunit

我创建了一个流利的构建器样式模式来帮助加载我的测试数据。某些方法的顺序很重要，并且想知道管理正确顺序的首选方法是什么。

我目前有以下内容：

```
using NUnit.Framework;

[TestFixture]
public class DataBuilderTests
{
    [Test]
    public void Can_NAME()
    {
        new DataLoader()
            .Start() // must be called first
            .Setup() // then called next
            .LoadEmployees() // optional order not NB
            .LoadProducts() // optional order not NB
            .StartCleanup() // begin cleanup
            .CleanupEmployees() // optional order not NB
            .CleanupProducts() // optional order not NB
            .End();
    }
}

public class DataLoader
{
    public DataBuilderSetup Start()
    {
        return new DataBuilderSetup(this);       
    }
}

public class DataBuilderSetup
{
    private readonly DataLoader _dataLoader;

    public DataBuilderSetup(DataLoader dataLoader)
    {
        _dataLoader = dataLoader;
    }

    public DataBuilderOptions Setup()
    {
        // do setup
        return new DataBuilderOptions(_dataLoader);
    }
}

public class DataBuilderOptions
{
    private readonly DataLoader _dataLoader;

    public DataBuilderOptions(DataLoader dataLoader)
    {
        _dataLoader = dataLoader;
    }

    public DataBuilderOptions LoadEmployees()
    {
        // load
        return this;
    }

    public DataBuilderOptions LoadProducts()
    {
        // load
        return this;
    }

    public DataBuilderCleanupOptions StartCleanup()
    {
        return new DataBuilderCleanupOptions(_dataLoader);
    }
}

public class DataBuilderCleanupOptions
{
    private readonly DataLoader _dataLoader;

    public DataBuilderCleanupOptions(DataLoader dataLoader)
    {
        _dataLoader = dataLoader;
    }

    public DataBuilderCleanupOptions CleanupEmployees()
    {
        // cleanup
        return this;
    }

    public DataBuilderCleanupOptions CleanupProducts()
    {
        // cleanup
        return this;
    }

    public DataLoader End()
    {
        return _dataLoader;
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T11:26:47.637

在 Java 中（C# 和它的多重继承不应该让它有任何不同）你可以这样做：

声明一组接口，只包含一个方法：

```
Interface DoFirstThing { // could be renamed to "BuilderOnStart" or "BuilderStartingState"
    DoSecondThing doFirst();
}

Interface DoSecondThing {
    DoLastThing doSecond();
}

Interface DoLastThing {
    BuilderReady doLast();
}

Interface BuilderReady {
    Result build();
}

class BuilderWithForcedSequence implements DoFirstThing, DoSecondThing, DoLastThing, BuilderReady {

     // implement all

} 
```

最后，您需要一些工厂或工厂方法来设置该构建器的初始状态：

```
public DoFirstThing createNewBuilderWithForcedSequence(requiredParameters){
    return new BuilderWithForcedSequence(requiredParameters);
} 
```

这将产生 Builder，强制排序构建方法（它们应该被重命名为`doThat`有意义的东西），只能调用`doFirst()`, 之后`doSecond()`......等等，直到最终状态，当 obiect 将被构建时，使用`build()`方法。

```
Result result = builder.doFirst().doSecond().doLast().build(); 
```

编辑：
哎呀，这很准确你的方法:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T09:40:58.233

BuilderPattern 的部分优势在于它可以保护消费者免受方法调用的强加“魔术”排序。

我建议更改您的设计，以便：

*   所有必要的参数都是预先提供的，以保护消费者免受对`Start`和的强制有序调用`Setup`。
*   修改您的实体的职责，以便可以任意构建它们。

显然这是*我*个人的喜好。如果这种类型构成将由第三方使用的库的一部分，那么我强烈建议消除对魔术方法排序的需要。如果这仅可能在内部使用，那么由您来权衡更改代码与不更改代码相关的成本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T09:40:25.830

首选的方法是不惜一切代价避免它。设计您的构建器，使其清楚需要做什么。

```
ObjectBuilder
.Init()
.Optional1()
.Optional3()
.Optional2()
.ToObject() 
```

如果需要先发生某些事情，请在构造函数或工厂方法中执行此操作。然后总是有一种方法可以完成构建过程，清理和所有。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T09:40:37.417

例如，您可以将私有队列成员添加到构建器，`Queue<string>`并在每个构建器步骤中添加操作名称。

`.Build()`方法或在您的情况下`.End()`将检查队列是否以正确的顺序包含正确的操作名称。如果没有，你可以抛出一个`InvalidOperationException`

您也可以使用树作为数据结构。树将允许您剖析在之前的构建器步骤中不可用的选项。

**但最好考虑其他答案，因为我的方法实际上是一种 hack，它会产生维护问题。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T21:13:27.470

您当前的解决方案是我提供流畅语法的方法，尽管我不一定说它完全遵循构建器模式。本质上，您所做的是将构建器与状态机提供的限制链接在一起。我发现您所做的事情与任何其他普遍接受的流利配置（例如流利的休眠或流利的断言）相比几乎没有什么区别。

# c - 在c中使用单引号中的两个字符

> ID：12212668
> 
> 赞同：3
> 
> 时间：2012-08-31T09:34:38.320
> 
> 标签：c

```
 #include<stdio.h>

         int main()
         {

           char ch = 'A';

           printf("%d\n",'ag');

           printf("%d\n",'a');

           printf("%d, %d, %d, %d", sizeof(ch), sizeof('a'), sizeof('Ag'), sizeof(3.14f));

          return 0;
         } 
```

在 g++ 和 gcc 上运行时，我曾经对这个问题的输出有很多疑问。

但是我通过参考这些链接消除了几乎所有的疑虑：

1.  [C/C++ 中的单引号、双引号和 sizeof('a')](https://stackoverflow.com/questions/10606807/single-and-double-quotes-in-c-c)

2.  [C 或 C++ 中的单引号与双引号](https://stackoverflow.com/questions/3683602/single-quotes-vs-double-quotes-in-c)

关于这个问题的输出，我仍然需要了解一件事。

有人可以`printf("%d\n",'ag');`在程序中解释上面提到的输出吗？它实际上是如何存储在内存中的？

该程序在 Linux/GCC 平台上的输出是：

```
24935
97
1, 4, 4, 4 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:38:34.333

单引号文字的类型是`int`. 因此，大小通常足以容纳超过一个字符的位。据我所知，解释字符的确切方式取决于实现。

在你的情况下，你得到一个小端序：

*   ASCII 值为`'a'`97 (0x61)
*   ASCII 值为`'g'`103 (0x67)

你的值是 24935 = 0x6167，所以你得到的`'a'`是高字节和`'g'`低字节。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T09:38:35.803

单引号中多个字符的含义是实现定义的。

> 6.4.4.4
> 
> 整数字符常量的类型为 int。包含映射到单字节执行字符的单个字符的整数字符常量的值是被解释为整数的映射字符表示的数值。**包含多个字符（例如，'ab'）**或包含不映射到单字节执行字符的字符或转义序列 的整数字符常量的值 是**实现定义的**。

例如，在这种情况下`24935`是：字符并排`0x6167`的 ASCII 值。`a``g`

# c++ - 在哪里为最有效的代码定义一次性常量？

> ID：12212673
> 
> 赞同：5
> 
> 时间：2012-08-31T09:35:00.703
> 
> 标签：c++, performance

哪种变体最有效，为什么？还是他们会针对相同的代码进行优化？

```
char inplace(int i) {
    // [some check if 0<=i<=2 here]
    return "azS"[i];
}

char infunc(int i) {
    const char s[] = "azS";
    // [some check if 0<=i<sizeof(s)/sizeof(s[0])-1 here]
    return s[i];
}

const char s[] = "azS";
char inglobals(int i) {
    // [some check if 0<=i<sizeof(s)/sizeof(s[0])-1 here]
    return s[i];
} 
```

请不要抱怨过早的优化是多么邪恶，这只是天生的 C++'er 固有的不可抗拒的好奇心；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:58:41.740

我刚刚编译并反汇编了你的代码。`inplace`并且`inglobals`是相同的。这很直观：编译器可以将 const 字符串存储在`.rodata`节中。

奇怪的是，gcc 产生了相当多的代码`infunc`（见下文），可能是因为你“坚持”在`s`堆栈上。定义`s`as`static`会产生与和`infunc`相同的代码。`inplace``inglobals`

```
0000000000000010 :
  10: 48 83 ec 18 sub $0x18,%rsp
  14: 48 63 ff movslq %edi,%rdi
  17: 64 48 8b 04 25 28 00 移动 %fs:0x28,%rax
  1e: 00 00
  20: 48 89 44 24 08 移动 %rax,0x8(%rsp)
  25: 31 c0 xor %eax,%eax
  27: c7 04 24 61 7a 53 00 移动 $0x537a61,(%rsp)
  2e: 0f b6 04 3c movzbl (%rsp,%rdi,1),%eax
  32: 48 8b 54 24 08 移动 0x8(%rsp),%rdx
  37: 64 48 33 14 25 28 00 异或 %fs:0x28,%rdx
  3e：00 00
  40：75 05 jne 47
  42: 48 83 c4 18 添加 $0x18,%rsp
  46：c3 回复   
  47：e8 00 00 00 00 呼叫 4c

```

**编辑**

该位置`%fs:0x28`与 GCC 的堆栈保护器有关。禁用它会给出以下代码：

```
0000000000000010 :
  10: 48 63 ff movslq %edi,%rdi
  13: c7 44 24 f0 61 7a 53 移动 $0x537a61,-0x10(%rsp)
  1a: 00
  1b: 0f b6 44 3c f0 movzbl -0x10(%rsp,%rdi,1),%eax
  20：c3 重新调用   

```

因此，在这种情况下，GCC 选择将您的字符串与代码内联存储，并在执行期间将其复制到堆栈中。我认为这是非常有效的，因为您的处理器的缓存已经充满了字符串，因此不会发生内存访问。

**编辑**

综上所述，三个版本都是等价的。然而，根据您的编译器实现，一个可能会比另一个更有效。对于 GCC，`infunc`对于短字符串似乎更有效，因为字符串是与指令一起获取的。对于较大的字符串，我会使用`inplace`or `inglobals`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:56:23.260

我认为编译器会为 1 和 3 产生相同的结果，并且可能为 2 产生相同的结果（稍微取决于它是否意识到它可以不实际将数据复制到堆栈上而逃脱）。我还假设这不在某个标题或类中，这会产生很大的不同（我知道您的代码看起来不像，但我只是保持谨慎）。

一般来说，除非优化证明不是这样，否则我会尽量减少声明的范围（排除 3）。在 1 和 2 之间，如果您更改字符串的内容，出错的可能性对于 1 来说要高得多。

这让我认为它可能对生成的代码没有任何影响，但选项 2 比其他 2 好得多。

# vb6 - Activex dll - http 会话的新实例

> ID：12212675
> 
> 赞同：1
> 
> 时间：2012-08-31T09:35:05.867
> 
> 标签：vb6, enterprise-library, com-interop

我必须为我们的 vb6 dms 构建一个 vb.net mvc3 网络界面。我的逻辑层是一个多用途的活动 x dll，用户信息存储在全局中。因此，每当新用户登录时，用户信息都会覆盖以前的信息。

是否有可能为每个 http 会话使用不同的组件服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T08:20:43.347

通过使用全局变量，您隐含地要求共享数据。

要为不同的类实例提供不同的数据，您需要将全局数据移动到一个类中，可能使用某种形式的会话密钥，以便不同的请求得到正确的实例（如果上面的层还没有处理这个）

# asp.net - 我的asp网站在iis7上加载缓慢

> ID：12212677
> 
> 赞同：0
> 
> 时间：2012-08-31T09:35:14.203
> 
> 标签：asp.net, performance, iis-7

我托管了一个简单的文件下载站点，该站点在 iis7 网络服务器上的 asp.net 上运行。该站点在发布之前还可以，现在问题是服务器响应很晚。当我从服务器上的浏览器访问该站点时，速度很快。但是当我从其他计算机访问时，站点会不断加载 n 加载，直到它得到服务器的响应并快速加载页面。我不知道如何解决这个问题。此外，当我重新启动服务器时，网站从其他计算机加载速度更快了几分钟，然后又变得太慢了..可能是由于人们访问该网站，并且需要进行一些配置来防止这种响应缓慢的问题。目前，它需要大约 30 秒才能开始从服务器获得响应。我正在使用带有 2.5 GHz 双核至强处理器和 2gb 内存的 windows server 2008 r2。如果有人知道这个问题的解决方案，请给我一步一步的说明，因为我由外部专家配置了这个服务器，而我对服务器配置知之甚少。等待您的帮助:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:58:37.347

我知道改进和修复服务器问题更难检查和修复。我相信分析您的 Web 应用程序确实会对您的情况有所帮助。

而且我认为您应该对站点进行任何内存问题的分析，如果您还有数据库，那么数据库连接问题和性能（当然）。

您需要使用任何这些工具在本地 IIS7 中的站点上运行探查器以进行内存和性能检查，或者如果您可以在方便时找到任何其他工具来使用。

*   **内置visual studio 2010 终极分析工具**
    *   [使用 Visual Studio Profiler 查找应用程序瓶颈](http://msdn.microsoft.com/en-us/magazine/cc337887.aspx)
*   **红门分析器工具**
    *   [ANTS 性能分析器](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)
    *   [ANTS 内存分析器](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/)

我使用过 Red-Gate 分析器工具，它对我很有帮助。在使用之前，您需要查看使用视频以熟悉任何分析器工具。

检查[Visual Studio 工具箱：Visual Studio](http://channel9.msdn.com/Shows/Visual-Studio-Toolbox/Visual-Studio-Toolbox-Performance-Profiling)分析器教程的性能分析并检查[演练：分析 ASP.NET 应用程序](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/walkthrough)和Red-gate 分析器的[演示视频](http://www.red-gate.com/products/dotnet-development/ants-memory-profiler/video/)。

我希望我的回答是有意义的。

# c++ - 为什么在使用 clang -std=gnu++11 时这个 C++ 代码会编译？

> ID：12212678
> 
> 赞同：8
> 
> 时间：2012-08-31T09:35:15.717
> 
> 标签：c++, c++11, clang

这在使用时编译`clang -std=gnu++11 -c test.cpp`：

```
void test() {
    [[random text here]]
    if (0) {
    }
} 
```

但这会产生错误`main.cpp:3:1: error: expected statement`：

```
void test() {
    [[random text here]]
} 
```

如果我编译`clang -std=gnu++11 -S -emit-llvm main.cpp`并查看 LLVM 代码，则该`[[...]]`行似乎无效：

```
define void @_Z5testv() nounwind uwtable ssp {
  ret void
} 
```

任何想法为什么？错误或某些 C++11 语法或 GNU 扩展语法？

我使用 Xcode 4.4.1 中的 clang（Apple clang 4.0 版（tags/Apple/clang-421.0.60）（基于 LLVM 3.1svn）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T10:12:55.593

这是使用 C++11 的属性语法。因此， “ `random text here`”被假定为一个属性。根据 C++11 规范，一个属性可以修改许多语句和声明。

属性可以是语句，但它们实际上必须是*语句*。这意味着它们以`;`与许多其他 C++ 语句一样的结尾。

[实现支持的属性集是实现定义的（Clang 不支持任何属性。事实上，根据网站的说法](http://clang.llvm.org/cxx_status.html)，它显然根本不应该支持属性语法）。应该忽略特定实现未实现的属性，这就是它没有效果的原因。

# android - 如何在android中覆盖任务管理器

> ID：12212680
> 
> 赞同：1
> 
> 时间：2012-08-31T09:35:22.927
> 
> 标签：android, taskmanager

是否可以覆盖 android 中任务管理器的功能，例如阻止从任务管理器打开应用程序。我在网上搜索但我没有找到任何答案。

我从市场上安装了一个名为 Surelock 的应用程序。在那个应用程序中，他们已经覆盖了任务管理器。怎么可能

西瓦库马尔

# android - 限制对内容提供者的访问

> ID：12212681
> 
> 赞同：9
> 
> 时间：2012-08-31T09:35:28.230
> 
> 标签：android, android-contentprovider

我没有找到要求与我相同的限制的帖子。

我有一个应用程序，它为其他应用程序（称为客户端应用程序）提供内容提供程序（称为主应用程序）。我想限制从客户端应用程序对内容提供者的访问，以仅支持*插入*和*查询*方法。

我不想要的：

*   将内容提供者设为私有，因为主要目标是为客户端应用程序提供数据库。
*   使用客户端应用程序的签名限制访问，因为任何人都必须能够编写使用主应用程序平台的客户端应用程序。

我看到的最明显的解决方案是编写两个内容提供程序，一个具有主应用程序的完全访问私有，一个受限制的公共。但我认为这绝对不是正确的方法。

根据这个[Google groups post](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/-apKwmVeEvo)，我正在考虑`Binder.getCallingUid()`在内容提供者调用中使用来检测调用是否来自主应用程序。因此，如果调用不是来自主应用程序，我在*更新*和*删除*方法中无能为力。

如何获取主应用程序*UID*进行比较？如果可能的话，这个解决方案是否安全？

谢谢你的建议。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-31T09:56:44.617

使用 protectionLevel 签名定义如下所示的权限，此 WRITE 权限将仅限于使用相同私钥签名的应用程序

```
<permission android:name="com.yourapp.WRITE.PERMISSION"
    android:protectionLevel="signature"
        android:label="@string/permission_label"
        android:description="@string/permission_desc">
</permission>

<permission android:name="com.yourapp.READ.PERMISSION"
        android:label="@string/permission_label"
        android:description="@string/permission_desc">
</permission> 
```

然后在 contentprovider 标签中使用读写权限标签。您可以强制执行读取权限，也可以完全删除它

```
android:readPermission="com.yourapp.READ.PERMISSION"
android:writePermission="com.yourapp.WRITE.PERMISSION" 
```

因此，只有由相同签名签名的应用才能使用您的内容提供商

编辑：

也许你可以用这个

```
 private Collection<String> getCallingPackages() {
     int caller = Binder.getCallingUid();
     if (caller == 0) {
         return null;
     }
     return Lists.newArrayList(mContext.getPackageManager().getPackagesForUid(caller));
 } 
```

并检查您的包名是否出现在此列表中。我认为这是安全的

# c++ - 将函数从一个类发送到另一个类并在 C++ 中执行

> ID：12212685
> 
> 赞同：1
> 
> 时间：2012-08-31T09:35:37.713
> 
> 标签：c++, class, function, inheritance, signature

我想创建一个类，我们将其命名为 A 类，它执行其他类的函数。所以我想从这个 A 类和 A 类继承我的类，以便能够从派生类接收函数地址并执行它们。

这是我到目前为止的想法：

```
#include <iostream>
using namespace std;

template <class T>
class A
{
public:
    // a typedef for the function I want to execute 
    // which has no parameters and void as return type
    typedef void (T::*SpecialFunc)();

    A() { }

    //this is the function that executes the received functions
    void exec(SpecialFunc func)
    {
        ((new T)->*func)();
    }
};

class B : public A<B>
{
public:
    B()
    {
        // call A::exec to call my function
        exec(&B::funcB);
    }

    //function I want to be executed
    void funcB()
    {
        cout << "testB\n";
    }
};

int main()
{
    B ob;

    return 0;
} 
```

我想要的是要调用的函数 funcB 。到目前为止，我的程序没有错误地中断，只是严重中断。我知道这段代码无法工作，因为我尝试构建需要来自 B 类的信息的 A 类，而 B 类需要来自第一个 A 类的信息来构建，但我希望你能更好地理解我愿意实现的目标。

这可以实现吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:54:30.500

看起来你在这里有无限递归。您调用`exec()`的构造函数，它通过调用构造函数的语句`B`创建新`B`对象，等等。可能您需要传递 ponter 或对对象的引用以避免其构造。`new``B``exec()``B``exec()`

当然，`B`对象泄漏`exec()`看起来并不好。我希望它只是用于测试目的......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:02:15.673

1）“A类需要来自B类的信息，B类需要来自第一类A的信息”

- 防止循环引用使用**前向声明**

2）我建议**您的想法**如下实施：

1.  *具有*纯虚函数的**抽象类*（Abstr 类）*
**   其他类继承自它（派生）*   类管理器 - 作为参数抽象类，您可以提供任何派生类并为某些类调用虚函数*

 *我认为给定的方法将使您更有效地使用 OOP 思想*

# eclipse - Eclipse 快捷方式（F3/ctrl+click）不能用于导航

> ID：12212686
> 
> 赞同：1
> 
> 时间：2012-08-31T09:35:39.227
> 
> 标签：eclipse, ubuntu-12.04

借助此快捷方式访问声明的快捷方式不起作用安装的 Ubuntu 版本是 12.04，对于 Eclipse，它是：版本：Juno Release Build id：20120614-1722

它说：- 资源不在 JavaScript 项目的包含路径上

它适用于 .jsp 文件，但不适用于 .js 文件！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T06:19:23.277

这些快照适用于安装此[版本](http://www.eclipse.org/downloads/packages/eclipse-ide-java-ee-developers/junor)。

# mysql - MySql 满足多个条件

> ID：12212688
> 
> 赞同：2
> 
> 时间：2012-08-31T09:36:05.413
> 
> 标签：mysql, conditional-statements

我有一张表，其中一个 ID 可以有多个状态

```
| client_id | status_id |
|     1     |     2     |
|     1     |     3     |
|     1     |     5     |
|     2     |     2     |
|     2     |     3     |
|     2     |     6     | 
```

问题是，如果它们具有所有状态，即 2、3、5（status_id = 2 AND status_id = 3 AND status_id = 5），则仅选择那些 client_id，但 mysql 不允许直接这样做。

```
SELECT * FROM `klient_status` WHERE StatusID = 20 AND StatusID = 40

returns: MySQL returned an empty result set (i.e. zero rows). 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:38:30.530

这是因为您使用`AND`子句而不是`IN`子句来检查同一列中的多个值：

```
SELECT *
FROM  klient_status
WHERE status_id  IN(2,3,5)
GROUP BY client_id
HAVING COUNT(*) = 3; 
```

# 例子[@sqlfiddle](http://sqlfiddle.com/#!2/fd081/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:38:43.137

```
SELECT `client_id`, COUNT(`client_id`) c_count 
FROM `table_name` 
WHERE `status_id` IN (2,3,5) 
GROUP BY `client_id` 
HAVING c_count = 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:46:18.027

我认为您正在尝试获取一个客户端 ID，该客户端 ID 在表中出现两次。所以把查询变成你想要的英文：

> 获取此表中状态为 20 的记录以及此表中状态为 40 的另一条记录的客户

在这种情况下，您将需要使用子查询：

```
SELECT client_id 
FROM `klient_status` 
WHERE StatusID = 20 AND client_id IN
(
    SELECT client_id 
    FROM `klient_status` 
    WHERE StatusID = 40
) 
```

# jquery - 如何使用jquery+thickbox打开子窗体，并将值传递给父窗体

> ID：12212692
> 
> 赞同：0
> 
> 时间：2012-08-31T09:36:23.343
> 
> 标签：jquery, thickbox

像这个例子：

aa.jsp（父表单）

```
<head> 

    <script language="javascript" type="text/javascript" src="<%=basePath%>js/jquery-1.7.2.min.js"></script> 
    <script language="javascript" type="text/javascript" src="<%=basePath%>js/thickbox.js"></script> 

    <link rel="stylesheet" type="text/css" href="<%=basePath%>js/thickbox.css">

</head> 
<body> 

    <a href="bb.jsp?TB_iframe=true&placeValuesBeforeTB_=savedValues&height=400&width=170" title="input value" class="thickbox"> 
      <input type="text" name="txtA" id="txtA"/> 
    </a> 

</body> 
```

我在头部使用jquery和thickbox的js。并应用它们。点击txt文本框打开子页面。

bb.jsp(子表单)：

```
<body> 
  <input type="text" name="txtB" id="txtB"> 
</body> 
```

子页面中有一个文本框txtB。

如何在 bb.jsp 的文本框 txtB 中键入上下文，并将上下文传递给 aa.jsp 的父页面。然后上下文将显示在父页面的文本框 txtA 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T03:04:27.677

我找到了一个解决方案，像这样： Import js of thickBox

```
<script src="Upimg/jquery-1.1.3.1.pack.js" type="text/javascript"></script>  
<script src="Upimg/thickbox-compressed.js" type="text/javascript"></script>  
class ="thickbox"   Where you want to open the sub form, you can add//
<a href="bb.jsp?TB_iframe=true&amp;height=250&amp;width=400" title="add a caption to title attribute / or leave blank" class="thickbox">case 1</a>  
// write js in parent page, like:
function check(id){  
alert(id);  
} 
```

打开 bb.jsp 页面时会调用该事件

```
<script type="text/javascript">  
function check()
{      
window.parent.check(1);  
}  
</script>  
<body>   
<input type="text" name="txtB" id="txtB" onclick="check();">   
</body> 
```

# jquery - 从 jQuery 函数设置输入值

> ID：12212699
> 
> 赞同：0
> 
> 时间：2012-08-31T09:36:42.443
> 
> 标签：jquery, forms, input

我只是想为输入设置一个值，但它不起作用。这是我的 jquery 函数：

```
function display_form() {
    try {
        $('#start_date').val('2012/08/21');
    } catch (e) {
        alert('error');
    }

   // window.alert($('[name=start_date]').val()); (shows "undefined")
   $('#add-event').show();
} 
```

这就是 display_form 的调用方式：

```
$(document).ready(function() {
        $('#calendar').fullCalendar({ 
            dayClick: function(date, allDay, jsEvent, view)
            {     
                date_format = $.fullCalendar.formatDate(date,"yyyy-MM-dd HH:mm:ss");
                    display_form();
                    return false;

                },
            events: 'https://www.google.com/calendar/feeds/myLogin%40gmail.com/public/basic'
        });
    }); 
```

这显示“未定义”。这是我的表格：

```
<input id="start_date" name="start_date" type="text" size="6" /> 
```

我应该把我想使用的表单的 id 放在某个地方吗？我只是按照 jquery 文档中的说明进行操作，但它似乎不起作用。谁能帮助我？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:39:36.240

这将有助于

```
window.alert( $('input[name=start_date]').val() ); 

function display_form() 
    {   try {
        $('#start_date').val('2012/08/21');
        }catch (e){
                     alert('error');
                 }

       window.alert( $('[name=start_date]').val() ); 
       }

$(document).ready(function() {
$('#press').click(function() {
  display_form();
  });
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:39:38.260

## HTML

```
<input id="start_date" name="start_date" type="text" size="6" />
<button id="press">Press</button> 
```

## JavaScript

```
function display_form() {
    try {
        $('#start_date').val('2012/08/21');
    } catch (e) {
        alert('error');
    }

    window.alert( $('[name=start_date]').val() ); 
}

$('#press').click(function() {
    display_form();
 }); 
```

[jsFiddle](http://jsfiddle.net/FT4C9/1/)

# c# - 寻找链接标签的更好替代品

> ID：12212704
> 
> 赞同：0
> 
> 时间：2012-08-31T09:37:05.783
> 
> 标签：c#, vb.net, visual-studio

请查看下面的两个长链接标签（请忽略上面的黑线）链接标签的长度是在运行时动态生成的，如所见，可能是它太长并且与我们拥有的其他文本重叠（还有另一个文本你会看到“差异'）。

![在此处输入图像描述](../Images/3f04e502d17e1ecad5d43aa3d7b8f4aa.png)

我的问题是：

a) 我可以限制链接标签的最大长度吗？

b）如果滚动条太长，是否可以使用带有链接标签（或任何类似控件）的滚动条？例如，将其设置为 200 像素，如果它更长，用户必须滚动水平滚动条并查看文本的结尾。

我在 Visual Studio 2008 上使用 VB.NET

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:46:49.937

这有帮助吗...但是代码是用于标签的

```
Private Sub InitializeLabel()
Me.Label1 = New Label
Me.Label1.Location = New System.Drawing.Point(10, 10)
Me.Label1.Name = "Label1" 
Me.Label1.TabIndex = 0

' Set the label to a small size, but set the AutoSize property  
' to true. The label will adjust its length so all the text 
' is visible, however if the label is wider than the form, 
' the entire label will not be visible. 
Me.Label1.Size = New System.Drawing.Size(10, 10)
Me.Controls.Add(Me.Label1)
Me.Label1.AutoSize = True 
Me.Label1.Text = "The text in this label is longer than the set size." 

End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:48:18.953

"a) 我可以限制链接标签的最大长度吗？

标签和链接是分开存储的，因此您可以使用 SubString 将标签的长度限制为特定数量的字符。

b）如果滚动条太长，是否可以使用带有链接标签（或任何类似控件）的滚动条？例如，将其设置为 200 像素，如果它更长，用户必须滚动水平滚动条并查看文本的结尾。

您可以创建一个用户控件，将 Autoscroll 设置为 true，在用户控件中放置一个链接标签。确保标签下方有足够的空间放置滚动条，以防在链接标签开始悬挂在包含用户控件之外时它变得可见。

希望这会有所帮助，加博尔

# rpm - rpmbuild 时是否可以忽略某些特定的自动检测依赖项

> ID：12212712
> 
> 赞同：7
> 
> 时间：2012-08-31T09:37:46.350
> 
> 标签：rpm, dependency-management, rpmbuild, rpm-spec

rpmbuild 可以通过查找包中包含的二进制文件所需的共享库来自动检测依赖关系，虽然这几乎每次都是一个好的想法，但有时它是不可取的，但仅适用于某些特定的库。我指的是某些二进制文件需要的库不是通过其 rpm 包管理提供给系统但由第三方安装程序直接安装的情况。

现在，问题是：有没有办法保持自动检测功能处于活动状态（对于包中的其他二进制文件很方便）但只忽略/删除这些特定的库？

就像是

```
AutoReqIgnore : library1
AutoReqIgnore : library2 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-03-06T16:04:45.030

[从 rpm-4.9 (Fedora 15) 开始，rpm 有一个标准方法可以过滤](http://fedoraproject.org/wiki/Packaging:AutoProvidesAndRequiresFiltering)自动生成的依赖项。

例如，你可以写

```
%global __requires_exclude ^libthirdpartyplugin.so$ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-01T14:33:21.080

我还没有找到内置的方法，但我[写了一个小脚本用作过滤器](http://www.revragnarok.com/blog/blog/optional_rpm)：

```
#!/usr/bin/perl -w
use strict;
use IPC::Open2;

# This quick script will run the native find-requires (first parameter)
# and then strip out packages we don't want listed.
open2(\*IN, \*OUT, @ARGV);
print OUT while (<STDIN>);
close(OUT);
my $list = join('', <IN>);

# Apply my filter(s):
$list =~ s/^libqt-mt.so.*?$//mg;

print $list; 
```

您可以放置​​自己的正则表达式行，在此示例中我删除了`libqt-mt.so.*`

然后，在`.spec`文件中：

```
# Note: 'global' evaluates NOW, 'define' allows recursion later...
%global _use_internal_dependency_generator 0
%global __find_requires_orig %{__find_requires}
%define __find_requires %{_builddir}/%{?buildsubdir}/build/find-requires %{__find_requires_orig} 
```

如您所见，此脚本位于源代码压缩包中的`/build/`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-10-23T22:06:57.107

旧版`rpm-4.8`和旧版 (CentOS 6.x) 没有过滤自动检测到的依赖项。但是，有一个解决方法：

**在 rpmbuild 之前 Gzip 有问题的库，并在安装后对其进行 gunzip。**然后 rpmbuild 的依赖关系检测将忽略该文件。

示例情况：

你的`awesome-project-1.2.3-4.i686.rpm`包含

*   `libfoo.so`这取决于`libxx.so`
*   `libbar.so`这取决于`libyy.so`
*   `libbah.so`这取决于`libextra-3rdparty-stuff.so`不是通过 RPM 运送的

您希望在 RPM 的依赖项中有`libxx.so`and `libyy.so`，而不是`libextra-3rdparty-stuff.so`.

现在做 rpm 规范文件的技巧，说`awesome-project.spec`：

```
%prep
gzip "$RPM_BUILD_ROOT/usr/lib/libbah.so"
exit

%post
gunzip -f "$RPM_INSTALL_PREFIX/usr/lib/libbah.so.gz
exit

%preun
gzip "$RPM_INSTALL_PREFIX/usr/lib/libbah.so" # so that `rpm -e` doesn't complain about missing file
exit 
```

你去吧。`libextra-3rdparty-stuff.so`安装 RPM 时不再抱怨丢失。

# php - php 为什么即使字段不包含任何内容，isset 总是正确的？

> ID：12212717
> 
> 赞同：0
> 
> 时间：2012-08-31T09:38:07.020
> 
> 标签：php

我正在尝试在 Wordpress 中保存复选框的值。我面临的问题很简单，`if( isset( $used_checkboxes_csv ) )`即使没有选中任何复选框也总是返回 true，因此总是创建数据库条目。任何想法如何解决这个问题或使用什么来代替 isset？

```
//Listing details features and services meta checkboxes
add_action( 'add_meta_boxes', 'cd_meta_checklist_add' );
function cd_meta_checklist_add() {add_meta_box( 'checklist-id', 'Listing Icons', 'cd_meta_checklist_cb', 'post', 'normal', 'high' );}

function cd_meta_checklist_cb() 
{ 

        global $post;
        $values = get_post_custom( $post->ID );

        //check of checkbox should be active or not
        $pricelistline = explode(",", get_post_meta($post->ID, 'meta_features_checklist', true));

        // We'll use this nonce field later on when saving.
        wp_nonce_field( 'my_meta_box_nonce', 'meta_box_nonce' );

?>

        <p>
            <label for="meta_box_check_bar">bar</label>
            <input type="checkbox" id="meta_box_check_bar" name="meta_box_check_bar" value="bar" <?php if ($pricelistline[0]) {echo "checked";} ?> />
        </p>
        <p> 
            <label for="meta_box_check_parking">parking</label>
            <input type="checkbox" id="meta_box_check_parking" name="meta_box_check_parking" value="parking" <?php if ($pricelistline[1]) {echo "checked";} ?> />
        </p>
        <p> 
            <label for="meta_box_check_accessible-for-disabled">accessible-for-disabled</label>
            <input type="checkbox" id="meta_box_check_accessible-for-disabled" name="meta_box_check_accessible-for-disabled" value="accessible-for-disabled" <?php if ($pricelistline[2]) {echo "checked";} ?> />
        </p>
        <p> 
            <label for="meta_box_check_air-conditioning">air-conditioning</label>
            <input type="checkbox" id="meta_box_check_air-conditioning" name="meta_box_check_air-conditioning" value="air-conditioning" <?php if ($pricelistline[3]) {echo "checked";} ?> />
        </p>
        <p> 
            <label for="meta_box_check_frigo-bar">frigo-bar </label>
            <input type="checkbox" id="meta_box_check_frigo-bar" name="meta_box_check_frigo-bar" value="frigo-bar" <?php if ($pricelistline[4]) {echo "checked";} ?> />
        </p>
        <p> 
            <label for="meta_box_check_pets">pets</label>
            <input type="checkbox" id="meta_box_check_pets" name="meta_box_check_pets" value="pets" <?php if ($pricelistline[5]) {echo "checked";} ?> />
        </p>
        <p> 
            <label for="meta_box_check_phone">phone</label>
            <input type="checkbox" id="meta_box_check_phone" name="meta_box_check_phone" value="phone" <?php if ($pricelistline[6]) {echo "checked";} ?> />
        </p>
        <p> 
            <label for="meta_box_check_tv">tv</label>
            <input type="checkbox" id="meta_box_check_tv" name="meta_box_check_tv" value="tv" <?php if ($pricelistline[7]) {echo "checked";} ?> />
        </p>
        <p> 
            <label for="meta_box_check_local-dishes">local-dishes</label>
            <input type="checkbox" id="meta_box_check_local-dishes" name="meta_box_check_local-dishes" value="local-dishes" <?php if ($pricelistline[8]) {echo "checked";} ?> />
        </p>
<?php }

//Saving checkbox states
add_action( 'save_post', 'cd_meta_checkbox_save' );  
function cd_meta_checkbox_save( $post_id )  
{  
    // Bail if we're doing an auto save  
    if( defined( 'DOING_AUTOSAVE' ) && DOING_AUTOSAVE ) return; 

    // if our nonce isn't there, or we can't verify it, bail 
    if( !isset( $_POST['meta_box_nonce'] ) || !wp_verify_nonce( $_POST['meta_box_nonce'], 'my_meta_box_nonce' ) ) return; 

    // if our current user can't edit this post, bail  
    if( !current_user_can( 'edit_post' ) ) return;

    //grabing all checkbox values and combining them

                                /* make an array for all used checkbox */
                                $used_checkboxes = array();

                                /* make an array whit all options */
                                $avaible_checkboxes = explode(',', "bar,parking,accessible-for-disabled,air-conditioning,frigo-bar,pets,phone,tv,local-dishes");

                                /* loop troguht all avaible checkboxes */
                                foreach($avaible_checkboxes as $current_key)
                                {
                                   /* check if the checkbox was sent */
                                   if(isset($_POST["meta_box_check_{$current_key}"]))
                                   {
                                      /* if sent, add key to list */
                                      $used_checkboxes[$current_key] = $current_key;
                                   }
                                   else
                                   {
                                      /* if not sent, add empty value to list */
                                      $used_checkboxes[$current_key] = '';
                                   }
                                }

                                /* convert list to csv */
                                $used_checkboxes_csv = implode(',', $used_checkboxes);

    //saving to DB
    if( isset( $used_checkboxes_csv ) )
    update_post_meta( $post_id, 'meta_features_checklist', esc_attr( $used_checkboxes_csv ) );

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:40:26.600

听起来您想使用`empty`which 检查变量中是否包含任何内容，或者可能`is_null`检查变量是否设置为 null。

就您的代码而言：

```
$used_checkboxes = array();
// You SET the variable here

if( isset( $used_checkboxes_csv ) )
// So the isset function will return true

// To remove empty elements in an array, you can do this in your implode statement:
implode(',', array_filter($used_checkboxes)); 
```

[空](http://php.net/manual/en/function.empty.php)：

```
<?php
$expected_array_got_string = 'somestring';
var_dump(empty($expected_array_got_string['some_key']));
var_dump(empty($expected_array_got_string[0]));
var_dump(empty($expected_array_got_string['0']));
var_dump(empty($expected_array_got_string[0.5]));
var_dump(empty($expected_array_got_string['0.5']));
var_dump(empty($expected_array_got_string['0 Mostel']));
?>

Output of the above example in PHP 5.3:

bool(false)
bool(false)
bool(false)
bool(false)
bool(false)
bool(false)

Output of the above example in PHP 5.4:

bool(true)
bool(false)
bool(false)
bool(false)
bool(true)
bool(true) 
```

[一片空白](http://php.net/manual/en/function.is-null.php)

```
<?php

error_reporting(E_ALL);

$foo = NULL;
var_dump(is_null($inexistent), is_null($foo));

?>

Notice: Undefined variable: inexistent in ...
bool(true)
bool(true) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:41:14.333

您在此处设置变量：

```
$used_checkboxes_csv = implode(',', $used_checkboxes); 
```

不管它是否有正确的内容，它被设置是因为它确实存在。

这意味着：

```
if( isset( $used_checkboxes_csv ) ) 
```

将始终返回 true。

你可以做的是：

```
$used_checkboxes_csv = NULL;
if( count($used_checkboxes) > 0){
    $used_checkboxes_csv = implode(',', $used_checkboxes);
} 
```

然后，这样检查：

```
if( strlen($used_checkboxes_csv) > 0 ){ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:41:25.503

因为 $_POST 包含您的值的空字符串，并且 isset() 返回 true。在 if 条件中使用 empty() 或添加 != '' 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:45:59.587

如果声明了变量，仍会设置 Null 和/或空字符串。试试这个：

```
if(isset($used_checkboxes_csv ) && $used_checkboxes_csv == 'somevalue') 
```

# zend-framework - Zend 框架：向表单添加标题

> ID：12212718
> 
> 赞同：0
> 
> 时间：2012-08-31T09:38:09.297
> 
> 标签：zend-framework, zend-form, zend-decorators

我正在尝试将一些 html 添加到 zend 表单中，但我找不到我想要的。所以我创建了元素然后我有这个代码：

```
$form->addDisplayGroup(array('firstElement', 'secondElement'), 'user', array('legend' => 'My legend'));

$form->setDisplayGroupDecorators(array(
    'FormElements',
    array('HtmlTag', array('class'=>'myClass', 'tag' => 'div'))
)); 
```

我摆脱了字段集和图例，因为无法正确设置它的样式。所以我用一个div替换了fieldset，但我需要创建一个h2或其他东西来替换图例。有没有办法在组装饰器中添加它？

PS：我知道有很多类似的问题，我都试过了。它不起作用主要是因为我无法在 Zend Framework 中添加表单元素（我无权访问目录以在服务器上添加类）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:23:21.740

我终于找到了解决我的描述问题的方法。如果有人有同样的问题，我是这样做的：

```
$group = $form->getDisplayGroup('nameOfTheGroup');
$group->setDescription('The text you want');
$group->setDecorators(array(
    'FormElements',
    array('HtmlTag', array('tag' => 'div', 'class' => 'myClass')),
    array('Description', array('tag' => 'h2', 'placement' => 'prepend'))
)); 
```

这将在 div 之前的 h2 标记中添加描述。

# javascript - 是否可以在 JSP 中取消选择单选按钮（如复选框）

> ID：12212720
> 
> 赞同：1
> 
> 时间：2012-08-31T09:38:11.887
> 
> 标签：javascript, jsp

是否可以在 JSP 中取消选择单选按钮（如复选框）？

我有一个带有单选按钮的表格的页面。如果我在选定的收音机上单击它，我想取消选择单选按钮。这是代码

```
<tr>                    
<TD><INPUT type="radio" name="Radios" value="someValue"></td>
<TD>someValue</td>
</tr> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:45:41.553

您可以使用 Javascript 根据鼠标单击事件设置/切换属性`checked`值为`"checked"`（选择按钮）或`""`（空 stinrg = 未选择按钮）。这是[关于单选按钮的参考文档](http://www.w3.org/TR/html-markup/input.radio.html)。

请记住，一次只能选择组中的一个单选按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:53:26.317

试试这个 javascript 代码：

```
var firstClick = true;
function tick(element){
 if(!firstClick){
     if(element.checked){
         element.checked = false;
         firstClick = true;
     }
 }else{
     firstClick = false;
 }

} 
```

然后添加 onclick 属性

```
<tr>                    
<TD><INPUT type="radio" name="Radios" value="someValue" onclick="tick(this);"></td>
<TD>someValue</td>
</tr> 
```

注意：这未经测试。但这应该有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:49:12.553

问题是未选中的按钮在单击后立即在 onclick 处理程序运行之前被选中。因此，即使在用户单击按钮之前未选中该按钮，它也会在处理程序启动时被选中。所以下面的代码将不起作用。

```
function toggle(e)
{
    e.checked = !e.checked;
} 
```

所以有一个技巧可以避免这个问题。我们只是添加一个计算点击奇偶性的字段。

```
function toggleRadioButton(e)
{
    if(e.parity==undefined)
    {
        e.parity = false;
    }
    e.parity = !e.parity;
    e.checked = e.parity;

    //Fix parity of other buttons of this group which are unchecked automatically
    if(e.checked)
    {
        var buttonsInGroup = document.getElementsByName(e.name);
        for(var i=0; i<buttonsInGroup.length; i++)
        {
            if(buttonsInGroup[i]!=e)
            {
                buttonsInGroup[i].parity = false;
            }
        }
    }
} 
```

HTML 部分将具有标准的 onclick 处理程序：

```
<INPUT type="radio" name="Radios" value="someValue" onclick="toggleRadioButton(this)"/> 
```

但是，以编程方式更改按钮的状态时可能会出现一些完整性问题。我真的不喜欢这段代码，但没有看到任何其他解决方案。

最后我的建议是不要以这种奇怪的方式使用单选按钮:)。

# entity-framework - Queryable 上的通用扩展方法，在将表达式转换为 Linq-to-entities 可用的东西时崩溃

> ID：12212721
> 
> 赞同：0
> 
> 时间：2012-08-31T09:38:14.573
> 
> 标签：entity-framework, generics, expression

我编写了一个通用扩展方法，它可以消除解析查询字符串或路由数据参数并根据该参数过滤特定可查询对象的痛苦。

```
 public static IQueryable VaryBy<T>(this IQueryable<T> input,Func<T,int> navigationalproperty,string routeparameter,PageController currentPagecontroller) where T : EntityObject
    {
        string navid = currentPagecontroller.GetFromRequestOrRouteData(routeparameter);
        if (!String.IsNullOrEmpty(navid))
        {
            int navidasint = int.Parse(navid);
            //return input.Where(x => navigationalproperty(x) == navidasint);

            return (from var in input
                    let result = navigationalproperty(var)
                    where result == navidasint
                    select var);
        }
        else
        {
            return input;
        }
    } 
```

这在工作时允许我在我的控制器中编写以下干净的代码行，而不必每次都复制粘贴上述块的非通用版本。

```
 return aDB.GetAll<Product>().VaryBy(x=> x.Category.Id, "categoryid", this); 
```

遗憾的是，在结果上调用 ToList() 时会引发异常：**“LINQ to Entities 不支持 LINQ 表达式节点类型‘Invoke’。”**

我有点理解为什么会这样。我还读到我可能会为此使用[LinqKit](http://blog.felipel.com/2009/08/the-linq-expression-node-type-invoke-is-not-supported-in-linq-to-entities/)的 AsExpandable ，但在我了解如何自己完成这项工作之前，我有点犹豫是否使用他们的“自动解决方案”，我对使用不同的解决方案持开放态度方法也一样，只是想在这里学习！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T13:59:19.213

根据经验，请考虑如何将此请求转换为 TSQL。如果你不能把它翻译成原生的 TSQL，很可能任何框架也做不到。If 子句和外部方法调用都是将其转换为单个查询的障碍。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T08:08:33.560

感谢[John Skeet](https://stackoverflow.com/users/22656/jon-skeet)对我的问题的[回答](https://stackoverflow.com/questions/12251153/c-sharp-expressions-easy-conversion-with-or-equals-operator-and-external-para)简化了这个问题，我成功地创建了我的 VaryBy 函数，如下所示：

```
public static IQueryable VaryBy<T>(this IQueryable<T> input,Expression<Func<T,int>> navigationalproperty,string routeparameter,PageController currentPagecontroller) where T : EntityObject
    {
        string navid = currentPagecontroller.GetFromRequestOrRouteData(routeparameter);
        if (!String.IsNullOrEmpty(navid))
        {
            int navidasint = int.Parse(navid);
            Expression equals = Expression.Equal(navigationalproperty.Body, Expression.Constant(navidasint));
            return input.Where(Expression.Lambda<Func<T, bool>>(equals, navigationalproperty.Parameters));

        }
        else
        {
            return input;
        }
    } 
```

# xml - XML 1 字节 UTF-8 序列的无效字节 1

> ID：12212729
> 
> 赞同：0
> 
> 时间：2012-08-31T09:38:36.290
> 
> 标签：xml, utf-8, byte

我有一个程序，它需要两个 xml 文件并合并为一个，当我这样做时，我设法从“and”转换为“and '”。不谈论我为什么要这样做，这是代码片段，删除“ `&#8217;`”错误不再存在，这就是我将其粘贴在这里的原因。

```
convertedString = replace(convertedString, (String)"and ", 
                (String)"and &#8217;");
convertedString = replace(convertedString, (String)"&quot;", 
                (String)"\\\"");
convertedString = StringEscapeUtils.unescapeHtml(convertedString); 
```

使用 printDocument 方法：

```
private static void printDocument(Document doc, OutputStream out) 
    throws IOException, TransformerException 
    {     
        TransformerFactory tf = TransformerFactory.newInstance();     
        Transformer transformer = tf.newTransformer();     
        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "no");     
        transformer.setOutputProperty(OutputKeys.METHOD, "xml");     
        transformer.setOutputProperty(OutputKeys.INDENT, "yes");     
        transformer.setOutputProperty(OutputKeys.ENCODING, "UTF-8");     
        transformer.setOutputProperty("{http://xml.apache.org/xslt}indent-" +
                "amount", "4");      
        transformer.transform(new DOMSource(doc),           
                new StreamResult(new OutputStreamWriter(out, "UTF-8"))); 
    } 
```

运行我的程序我得到

```
com.sun.org.apache.xerces.internal.impl.io.MalformedByteSequenceException: Invalid byte 1 of 1-byte UTF-8 sequence.
    at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.invalidByte(UTF8Reader.java:684)
    at com.sun.org.apache.xerces.internal.impl.io.UTF8Reader.read(UTF8Reader.java:554)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.load(XMLEntityScanner.java:1742)
    at com.sun.org.apache.xerces.internal.impl.XMLEntityScanner.skipChar(XMLEntityScanner.java:1416)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:2793)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:648)
    at com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:140)
    at com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:511)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:808)
    at com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:737)
    at com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:119)
    at com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:235)
    at com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:284) 
```

即使它可能与 printDocument() 方法中的 UTF-8 有关，将其更改为 ISO-8859-1 也无济于事。

那么有人可以帮我解决问题吗？非常感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-24T10:45:24.573

如果您使用的是日食。尝试导航到首选项/常规/工作区。然后将“文本文件编码”更改为UTF-8

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:10:10.003

XML 解析器试图将输入解释为 UTF-8，但它不是 UTF-8。

# javascript - 使用jQuery在jsp中动态加载spring复选框标签时出错

> ID：12212732
> 
> 赞同：1
> 
> 时间：2012-08-31T09:38:42.320
> 
> 标签：javascript, google-app-engine, jsp, jquery-mobile, spring-mvc

*我正在根据选择*标签的变化动态加载弹簧复选框标签。但它会产生如下错误：

```
2012-08-31 09:27:14.829 org.springframework.web.servlet.tags.RequestContextAwareTag doStartTag: Neither BindingResult nor plain target object for bean name 'stockList' available as request attribute
W 2012-08-31 09:27:14.831 /stocks
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'stockList' available as request attribute
C 2012-08-31 09:27:14.832 Uncaught exception from servlet
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean name 'stockList' available as request attribute 
```

在我的应用引擎服务器日志中。

我的代码如下

```
<link rel="stylesheet"
    href="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.css" />
<script src="http://code.jquery.com/jquery-1.7.1.min.js"></script>
<script
    src="http://code.jquery.com/mobile/1.1.1/jquery.mobile-1.1.1.min.js"></script>
<script type="text/javascript">
    function loadStocks() {
        var exchange = $("#stockExchange").val();
        var a;
        if (exchange = "BO") {
            a = "<form:checkbox path='stockList' value='INFY' label='Infosys' />"
                    + "<form:checkbox path='stockList' value='HINDALCO' label='HINDALCO' />"
                    + "<form:checkbox path='stockList' value='TTM' label='Tata Motors' />";
        } else if (exchange == "NS") {
            a = "<form:checkbox path='stockList' value='INFY' label='Infosys' />";
        }
        $("#kit").html(a);
    }
</script>
</head>
<body>
    <div data-role="page">
        <div data-role="content">
            <form:form method="POST" commandName="search">
                <ul data-role="listview">
                    <li data-role="fieldcontain">
                        <div id="kit">
                            <form:select path="stockExchange" onchange="loadStocks()"
                                id="stockExchange">
                                <form:option value="">Select Stock Exchange</form:option>
                                <form:option value="BO">BSE</form:option>
                                <form:option value="NS">NSE</form:option>
                            </form:select>
                        </div>
                    </li>

                    <li data-role="fieldcontain"><label>Select Stocks</label>
                        <div id="kit">
                            <form:checkbox path="stockList" value="INFY" label="Infosys" />
                            <form:checkbox path="stockList" value="HINDALCO" label="HINDALCO" />
                            <form:checkbox path="stockList" value="TTM" label="Tata Motors" />
                            <form:checkbox path="stockList" label="RELIANCE IND."
                                value="RELIANCE" />
                        </div></li>

                    <li data-role="fieldcontain"><input type="submit"
                        value="Submit" /></li>
                </ul>
            </form:form>
        </div>
        <!-- /content -->

    </div>
    <!-- /page -->

</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:14:24.870

这个javascript函数不能这样工作。在您的浏览器中查看 HTML 源代码，您会发现它与 JSP 的不同。标签是弹簧标签，`<form:xxxx/>`用于快速生成 HTML 并使属性绑定更容易。因此，例如：

```
<form:checkbox path="stockList" value="INFY" label="Infosys" /> 
```

将被转换为这个纯 HTML：

```
<input type="checkbox" id="stockList" name="stockList" value="INFY" label="Infosys" /> 
```

由于您的 javascript 函数位于客户端，因此 spring 标记不会被转换，因此您必须在 Javascript 函数中使用纯 html。像这样的东西：

```
function loadStocks() {
    var exchange = $("#stockExchange").val();
    var a;
    if (exchange = "BO") {
        a = "<input type='checkbox' id='stockList1' name='stockList' value='INFY' label='Infosys' />"
                + "<input type='checkbox' id='stockList2' name='stockList' value='HINDALCO' label='HINDALCO' />"
                + "<input type='checkbox' id='stockList3' name='stockList' value='TTM' label='Tata Motors' />";
    } else if (exchange == "NS") {
        a = "<input type='checkbox' id='stockList' name='stockList' value='INFY' label='Infosys' />";
    }
    $("#kit").html(a);
} 
```

希望我已经很好地解释了自己。

PS：为什么`id`输入是`stockList1`，`stockList2`和`stockList3`？答案和相关信息[在这里](https://stackoverflow.com/a/2059331/787375)，检查一下，将对您有所帮助。

**编辑：**

另一种可能更简单的解决方案是在您的 JSP 中创建一个隐藏的 div，其中包含 JS 函数所需的输入，并让 spring 对其进行转换。稍后，在您的 JS 函数中，您可以使用 JQuery 克隆 Spring 生成的这些输入。这种方式可以避免创建 Spring 可以理解的纯 HTML。

# c# - 如何将任何 XElement 反序列化为对象

> ID：12212738
> 
> 赞同：0
> 
> 时间：2012-08-31T09:39:13.547
> 
> 标签：c#, .net, dynamic, xml-parsing

我希望能够在代码中采用任何 XElement，并将其作为动态模型直接放入 Razor 视图中。

无论 XElement 的内容如何，​​如何自动将 XElement 解析为动态对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:47:56.917

所以，我尝试了这个。我想我现在明白了为什么没有广泛的代码来执行此操作，并邀请您的评论、编​​辑和批评：

```
 private dynamic LoadFromXElement(XElement source)
    {
        var name = source.Name.LocalName;
        var descendants = source.Descendants().ToList();

        dynamic result = new ExpandoObject();
        var resultDict = result as IDictionary<string, object>;

        if (descendants.Count == 0)
        {
            resultDict[name] = source.Value;
            return result;
        }
        var dynamicDescendants = descendants.Select(element => LoadFromXElement(element)).ToList();

        resultDict["element"] = dynamicDescendants;

        return result;

    } 
```

也就是说，我已经对这种方法进行了一些改进......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-08T06:48:50.953

试试这个扩展

```
public static T Deserialize<T>(this  XmlReader xml)
    {

        if (xml == null)
        {
            return default(T);
        }

        var serializer = new XmlSerializer(typeof(T));

        var settings = new XmlReaderSettings();
        // No settings need modifying here

        return (T)serializer.Deserialize(xml);

    } 
```

并打电话

```
var obj = xElement.CreateReader().Deserialize<objectType>(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:05:15.163

如果您使用的是 C# 4，您可以查看[ExpandoObject](http://msdn.microsoft.com/en-us/magazine/ff796227.aspx)。

提供的链接中的示例将以下 XML 反序列化为动态`Person`对象列表：

```
<Persons>
    <Person>  
        <FirstName> Dino </FirstName>
        <LastName> Esposito </LastName>
    </Person>
    <Person>
        <FirstName> John </FirstName>
        <LastName> Smith </LastName>
    </Person>  
 </Persons> 
```

解析代码：

```
public static IList<dynamic> GetExpandoFromXml(String file) 
{ 
    var persons = new List<dynamic>();

    var doc = XDocument.Load(file);
    var nodes = from node in doc.Root.Descendants("Person")
                select node;

    foreach (var n in nodes) 
    {
        dynamic person = new ExpandoObject();
        foreach (var child in n.Descendants()) 
        {
            var p = person as IDictionary<String, object>);
            p[child.Name] = child.Value.Trim();
        }
        persons.Add(person);
    }
    return persons;
} 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-31T09:48:07.433

只是将其转换为动态？

```
var xele = new XElement("foo", "bar");
    var p = (dynamic)xele;
    Console.Write(p.Name); 
```

或者你想达到什么目的？

# ios - 使用预定计时器在 iOS 中重复触发动画

> ID：12212740
> 
> 赞同：-1
> 
> 时间：2012-08-31T09:39:15.083
> 
> 标签：ios, ios5, animation

我使用这段代码来创建和运行计时器，它工作正常。

```
NSDate *d = [NSDate dateWithTimeIntervalSinceNow: 6.0];
NSTimer *t = [[NSTimer alloc] initWithFireDate: d
                              interval: 6
                              target: self
                              selector:@selector(startAnimation)
                              userInfo:nil repeats:YES];

NSRunLoop *runner = [NSRunLoop currentRunLoop];
[runner addTimer:t forMode: NSDefaultRunLoopMode]; 
```

我的 startAnimation 方法只包含

```
[myUIImageView startAnimating]; 
```

该方法确实每六秒运行一次，但动画运行一次并且不重复。

任何想法为什么会发生这种情况？

* * *

编辑。我的动画是这样设置的：

```
-(void) setUpAnimation{
    myUIImageView  =  [[UIImageView alloc] initWithFrame:self.animatedView.frame];
    myUIImageView.animationImages = [NSArray arrayWithObjects:
                                  [UIImage imageNamed:@"1.png"],
                                  [UIImage imageNamed:@"2.png"],
                                  [UIImage imageNamed:@"3.png"],
                                   nil];

myUIImageView.animationDuration = 3;
myUIImageView.animationRepeatCount = 1;

//add the animation view to the main window;
[self.view addSubview:myUIImageView];  

} 
```

正如我上面所说，这只能正常工作一次，但不会重复！谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:12:12.137

`startAnimating`启动设置为运行一次的动画。你永远不会停止动画，所以发送一秒钟`startAnimating`什么都不做。尝试：

```
-(void)startAnimation {
    [myUIImageView stopAnimating];
    [myUIImageView startAnimating];
} 
```

# playn - PlayN 1.4 - 构建 Flash 战争

> ID：12212743
> 
> 赞同：2
> 
> 时间：2012-08-31T09:39:23.260
> 
> 标签：playn

我无法从我的项目中安装 Flash。我已成功安装并运行 HTML war 文件，但是当我尝试安装 Flash 项目时出现错误。我在其他帖子上看到这是 GWT 2.4 的问题，我必须在 pom 文件中降级到 2.3，但它没有帮助。结果是没有正确创建war文件。

我得到了这样的东西：

无法在项目 playtest-flash 上执行目标 org.apache.maven.plugins:maven-war-plugin:2.1.1:war (default-war)：组装 WAR 时出错：需要 webxml 属性（或预先存在的 WEB -INF/web.xml 如果在更新模式下执行）

有什么建议么？

# sql - 检查日期时间是否在当前日期

> ID：12212758
> 
> 赞同：13
> 
> 时间：2012-08-31T09:40:08.267
> 
> 标签：sql, sql-server, sql-server-2008, tsql, where-clause

我正在使用 SQLServer 2008。我有一个带有字段 Y 的表 X，它是日期时间格式。在我的查询的 WHERE 语句中，我只想保留字段 Y 的日期等于当前日期的行。

我搜索了互联网，但找不到适用于 SQLServer/ 的示例

感谢您的帮助！

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-31T09:42:36.300

试试这个：

```
WHERE CONVERT(DATE, Y) = CONVERT(DATE, getdate()) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T12:54:30.083

您需要将日期转换为特定格式。因为当您将日期以 datetime 数据类型存储在 sql server 中时，sql server 会自动将日期设置为默认时间。现在，当您使用 getdate() 进行查询时，它将采用当前日期和时间，因此这与您使用默认时间存储的日期不匹配。

因此，您可以通过以下两种方式执行此操作并获得实际结果。

1) 使用上面已经完成的**Date DataType 进行转换。**

2)用特定格式的**varchar数据类型进行转换。**

```
select * from X where Convert(varchar(10),Y,120) = CONVERT(varchar(10),GETDATE(),120) 
```

# java - 我想用java代码在文件中的特定位置附加一些数据

> ID：12212759
> 
> 赞同：0
> 
> 时间：2012-08-31T09:40:11.870
> 
> 标签：java, file-io, append, read-write

我想在 java 代码文件中附加一些数据。

我的文件包含以下数据：

```
#JSGF V1.0;

/**
 * JSGF Grammar for Hello World example
 */

grammar hello;

public <greet> = (ANKIT)|(BHAVIK)|(MONIL)|(JAY)|(HIREN)|(KRUTIKA)|(RIKIN)|(YAGNESH)|(KRISHNA); 
```

我希望每当我附加文件时，数据都在`;`字符之前

因此，如果我添加 JAYA，那么它会附加如下：

```
public <greet> = (ANKIT)|(BHAVIK)|(MONIL)|(JAY)|(HIREN)|(KRUTIKA)|(RIKIN)|(YAGNESH)|(KRISHNA)|(JAYA); 
```

请给我一些适当的建议或示例代码。

我做了这样的事情来实现如下的东西..

尝试 { File f = new File("E:\NEw_Workspace\Voice_recognition_modify\src\edu\cmu\sphinx\demo\helloworld\hello.gram"); RandomAccessFile raf = new RandomAccessFile(f, "rw");

```
 // Read a character
                   // char ch = raf.readChar();

                    // Seek to end of file
                    raf.seek((f.length())-1);

                    // Append to the end
                    raf.writeChars("|(ASHISH);");
                    raf.close();
                } catch (IOException e) {
                } 
```

但我得到了一个输出文件，如下所示：“A”然后是一些方形框图像“然后是 S”然后是一些方形框图像”等等

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:55:11.680

您可以使用 FileReader/FileWriter 组合。

读取每一行，然后检查最后一个字符是否为 ;。如果是，则在此之前插入您的输入；我认为 apache 库有一种方法可以在另一个字符串中插入字符串。或者你可以自己写一个方法

或者您可以使用 RandomAccessFile 并以 rw 模式打开文件。然后您可以修改现有文件。您可以使用调用 readLine() 并检查 ; 的相同过程。使用 RandomAccessFile 的示例在[这里](http://www.exampledepot.com/egs/java.io/UseRandomAccessFile.html "这里")

但是有一个问题 - 是否只有一行以 ; 结尾

在未经测试的粗略代码中

```
BufferedReader in = new BufferedReader(new FileReader("/tmp/fileIn"));
String str;
while ((str = in.readLine()) != null) {
    BufferedWriter out = new BufferedWriter(new FileWriter("/tmp/fileOut"));
    if (str.endsWith(";") { 
        //insert the variable before the ; here
    }
    out.write(str);
    out.close();
}
in.close(); 
```

我对 RandmonAccessFile 的记忆不太好，但上面应该可以大致工作，尽管 RandomAccessFile 会更干净；总是最后一个字符

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-01T04:56:57.783

我已经用以下代码做到了..取得了成功。

```
 File f = new File("E:\\NEw_Workspace\\Voice_recognition_modify\\src\\edu\\cmu\\sphinx\\demo\\helloworld\\hello.gram");
                    RandomAccessFile raf = new RandomAccessFile(f, "rw");

                    // Read a character
                   // char ch = raf.readChar();

                    // Seek to end of file
                    raf.seek((f.length())-1);

                    // Append to the end
                    raf.write(("|(KARAN);").getBytes());

                    raf.close();
                } catch (IOException e) {
                } 
```

# java - 针对 XSD 的 XML 无效

> ID：12212763
> 
> 赞同：0
> 
> 时间：2012-08-31T09:40:26.120
> 
> 标签：java, xml, jaxb, xsd

我通过编组生成了这个 xml 文件，然后我想通过验证它的模式来解组它。为什么这个 xml ：

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<ProjectConfiguration xmlns="http://ereg.egov.bg/segment/0009-900001">
    <CreationTime>2012-08-30T15:32:06.712+03:00</CreationTime>
    <Applications>
        <Application>
            <Version>1.0</Version>
            <CreationTime>2012-08-30T15:32:06.712+03:00</CreationTime>
            <FileName>ROSAppl-37</FileName>
        </Application>
    </Applications>
</ProjectConfiguration> 
```

不是针对此架构的有效 xml：

```
<?xml version="1.0"?>
<xsd:schema 
targetNamespace="http://www.bulsi.bg/egov/ProjectConfiguration"
xmlns="http://www.bulsi.bg/egov/ProjectConfiguration"
xmlns:xsd="http://www.w3.org/2001/XMLSchema"
>

<xsd:element name="ProjectConfiguration" type="ProjectConfigurationType" />

<xsd:complexType name="ProjectConfigurationType">
    <xsd:annotation>
        <xsd:documentation xml:lang="bg">Конфигурация на проекта</xsd:documentation>
    </xsd:annotation>

    <xsd:sequence>  
        <xsd:element name="CreationTime" type="xsd:dateTime">
            <xsd:annotation>
                <xsd:documentation xml:lang="bg">Време на създаване</xsd:documentation>
            </xsd:annotation>
        </xsd:element>

        <xsd:element name="Applications" minOccurs="1" maxOccurs="1">
            <xsd:annotation>
                <xsd:documentation xml:lang="bg">Заявления</xsd:documentation>
            </xsd:annotation>
            <xsd:complexType>
                <xsd:sequence>
                    <xsd:element name="Application" type="ApplicationType" minOccurs="1" maxOccurs="unbounded" />
                </xsd:sequence>
            </xsd:complexType>
        </xsd:element>                      
    </xsd:sequence>
</xsd:complexType>

<xsd:complexType name="ApplicationType" >
    <xsd:annotation>
        <xsd:documentation xml:lang="bg">Данни за заявление за вписване</xsd:documentation>
    </xsd:annotation>

    <xsd:sequence>
        <xsd:element name="Version" type="xsd:string">
            <xsd:annotation>
                <xsd:documentation xml:lang="bg">Версия на заявлението</xsd:documentation>
            </xsd:annotation>
        </xsd:element>

        <xsd:element name="CreationTime" type="xsd:dateTime">
            <xsd:annotation>
                <xsd:documentation xml:lang="bg">Време на създаване</xsd:documentation>
            </xsd:annotation>
        </xsd:element>

        <xsd:element name="FileName" type="xsd:string">
            <xsd:annotation>
                <xsd:documentation xml:lang="bg">Име на файл, в който е заявлението. Връзка между конфигурационни параметри и заявлението като файл</xsd:documentation>
            </xsd:annotation>
        </xsd:element>  
    </xsd:sequence>
</xsd:complexType>

</xsd:schema> 
```

这是错误：**Cvc-elt.1.a：找不到元素“ProjectConfiguration”的声明..“2”行，“71”列。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:46:26.903

*   您的 XML 实例：`xmlns="http://ereg.egov.bg/segment/0009-900001"`
*   您的 XML 架构：`targetNamespace="http://www.bulsi.bg/egov/ProjectConfiguration"`

这些 URI 应该匹配。

否则，`<ProjectConfiguration>`您的 Xml 文档中的元素将被假定属于`http://ereg.egov.bg/segment/0009-900001`未在您的架构中定义的名称空间。

# c# - 同步两个不同类型的对象

> ID：12212766
> 
> 赞同：0
> 
> 时间：2012-08-31T09:40:31.260
> 
> 标签：c#, object, synchronization

我有两个类，它们拥有许多相同的属性，每个类都有一些不被另一个共享的。

同步两个对象的共享属性的最快方法是什么？我知道它可以通过反射很容易地完成，但我敢打赌，在框架的某个地方，有一些东西可以使这个过程成为一个衬里左右。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:59:52.600

恐怕框架中没有*好东西*可以单线执行此过程。虽然有[AutoMapper](http://automapper.org/)可用于此任务。

# java - 将用户特定数据存储在 Web 应用程序的静态变量中是否可行

> ID：12212768
> 
> 赞同：0
> 
> 时间：2012-08-31T09:40:42.440
> 
> 标签：java

我正在开发一个 WebApplication ，一次可能有近 7000 个用户同时访问它。

所以在这个 Web 应用程序中，我使用下面的逻辑

当用户成功登录时，我将与他相关的信息存储在 ArrayList 中，如图所示。

第一类：

```
if(successfullyloggedin)  
{
ArrayList accounts = getInfoForUser(customerId);
userinfo.accountsinfor  = accounts;
}

public ArrayList getInfoForUser(String custId)
{
ArrayList  users  = getDataFromDatabase();
return users;
} 
```

第 2 类：

```
public class UserInfo {
public static ArrayList accountsinfor;
} 
```

第 3 类：

第 3 类是一个服务类，它检查用户是否存在以进行呼叫

```
class services 
{

public String MakeCall(String Id)
{

    ArrayList accounts = UserInfo.accountsinfor;

if(!ID.contains(accounts ))
// Throw an Exception
}

else
{
// Its fine 
}
} 
```

请告诉我是否可以在一次由近 7000 个用户同时使用的 WebAplication 中使用此逻辑。我关心的是使用静态变量。

或者请建议是否有更好的方法来进行此操作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:47:00.327

由于它是一个 Web 应用程序，我会为每个用户创建一个会话并将他们的特定信息放在那里。这就是它的用途。

您没有说明信息是什么：凭据、ACL 等。如果清楚，评论您的数据结构选择会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:50:13.047

目前尚不清楚您的数组列表是否包含用户信息或用户列表，因为 makeCall 在其中查找“ID”。

无论如何，在并发环境中将内容存储在静态变量中通常是个坏主意。如果您在 Web 应用程序中，我建议您将用户信息作为属性存储在 HttpSession 中：

[http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#setAttribute%28java.lang.String,%20java.lang.Object%29](http://docs.oracle.com/javaee/5/api/javax/servlet/http/HttpSession.html#setAttribute%28java.lang.String,%20java.lang.Object%29)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:58:19.780

最好的方法是使用 HttpSession 并让容器为您处理。`@SessionScoped`只需用（当然这取决于您使用的框架）注释您保存用户信息的类，让容器为您处理所有事情。而不是做容易出错的设计；）

# c# - 作为 ItemsControl 的 ItemsSource 的树结构

> ID：12212771
> 
> 赞同：0
> 
> 时间：2012-08-31T09:41:03.277
> 
> 标签：c#, wpf, windows-8, windows-runtime, winrt-xaml

我正在尝试将一个简单的树结构绑定到 Win 8（以前称为）Metro 应用程序中的 ItemsControl 的 itemsSource。我的结构实现了 INotifyPropertyChanged 接口，并在它的任何子项发生更改时发出通知。

我尝试制作一个转换器，将我的树展平为 ObservableCollection，但在创建绑定后，它不会刷新。

我做了以下测试项目来展示我想要什么： [https ://skydrive.live.com/redir?resid=970FFC53F4B7A598!146](https://skydrive.live.com/redir?resid=970FFC53F4B7A598!146)

这个简单项目中的问题是，如果您按下底部应用栏上的“添加”按钮，它会在层次结构中创建一个新的子级，但 ListView 不会刷新。

我想念什么，或者我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T14:33:50.643

使用 a 应该相当简单`DataTemplate`，例如

```
<DataTemplate DataType="{x:Type local:TreeItemType}">
    <StackPanel>
        <ContentPresenter Content="{Binding Name}"/>
        <ItemsControl ItemsSource="{Binding Children}"/>
    <StackPanel>
<DataTemplate> 
```

通过`ItemsControl.Resources`( 所以它也被应用到内部`ItemsControl`。

* * *

如果您只是想要叶子或对不是单个单元的项目提出问题，则可以构造 a [`CompositeCollection`](http://msdn.microsoft.com/en-us/library/system.windows.data.compositecollection.aspx)，而不是创建一个`ObservableCollection`永远不会修改的转换器，因为只有视图具有对它的引用，您可以通过[`CollectionContainers`](http://msdn.microsoft.com/en-us/library/system.windows.data.collectioncontainer.aspx)通知包装原始集合将被保留。

# url-rewriting - 将子域上的已知文件夹重定向到 nginx 的主站点

> ID：12212776
> 
> 赞同：6
> 
> 时间：2012-08-31T09:41:13.303
> 
> 标签：url-rewriting, nginx

我的 CMS 中有几个基于子域的网站，例如：

```
a.site.com
b.site.com 
```

所有上传的文件都在如下`/upload`目录下：

```
site.com/upload/2012/a.jpg 
```

但是 URL 是这样生成的：“ `/upload/2012/a.jpg`”。在这种情况下，可以通过`a.site.com/upload/2012/a.jpg`URL 和`b.site.com/upload/2012/a.jpg`URL 访问相同的图像。

如何配置 nginx 以重定向所有`/upload`指向`site.com/upload`. 例子：

```
a.site.com/upload/2012/a.jpg => site.com/upload/2012/a.jpg 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T16:49:54.270

如果您有 *.site.com 的单独服务器块，则将以下内容添加到子域的配置中应该可以解决问题

```
location /upload/ {
  rewrite ^ http://site.com$request_uri permanent;
} 
```

如果您在同一个服务器块中同时捕获 site.com 和 *.site.com ，则需要为此添加额外的 if 语句：

```
location /upload/ {
  if( $host != site.com ) {
    rewrite ^ http://site.com$request_uri permanent;
  }
  # if we get here it's the main site
  # directives for serving http://site.com/upload/ go here
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T00:42:36.480

Nginx 不生成 url。它是一个网络服务器。它回答诸如`http://site.com/upload/2012/a.jpg`.

因此，您可以将`/upload/2012/a.jpg`html 代码中的相对链接更改为绝对链接，`http://site.com/upload/2012/a.jpg`而不是更改 nginx 配置。或者更改子域的 nginx 配置，nginx 将为`http://site.com/upload/2012/a.jpg`and`http://a.site.com/upload/2012/a.jpg`和`http://b.site.com/upload/2012/a.jpg`请求发送相同的图像。

如果您更喜欢更改配置，则必须为所有子域创建统一配置。[因为](http://nginx.org/en/docs/http/server_names.html)

> 按名称搜索虚拟服务器时，如果名称匹配多个指定变体，例如通配符名称和正则表达式匹配，将选择第一个匹配的变体，按以下优先顺序

```
server {
    listen       80;
    server_name  *.site.com;

    location ^~ /upload {
         root   /real/path/to/upload/; 
         ...
    }

} 
```

[位置指令手册](http://nginx.org/en/docs/http/ngx_http_core_module.html#location)

# c# - 如何从 C# 应用程序发送 Windows Media Center 远程 WM_INPUT 消息？

> ID：12212783
> 
> 赞同：3
> 
> 时间：2012-08-31T09:41:38.437
> 
> 标签：c#

我正在编写一个应用程序来控制 Windows 7，尤其是 Windows Media Center。我可以发送击键、执行命令等，但我想模拟 Media Center Remote 上的一些按钮。

其中一些是 WM_INPUT 消息，如下所述：

[http://msdn.microsoft.com/en-us/library/windows/desktop/bb417079.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/bb417079.aspx)

我想以这样一种方式发送这些消息，因为它们可以被任何捕获 MCE 远程消息的应用程序接收，以便该应用程序可以更广泛地使用，因此不希望将消息发送到特定窗口。

我知道其中一些命令可以使用键盘快捷键复制，但这些命令在其他应用程序中无效。

有谁知道我如何从 C# 应用程序发送这些消息？

到目前为止，这是我整理的内容：

```
[DllImport("user32.dll")]
public static extern IntPtr PostMessage(IntPtr hWnd, uint Msg, IntPtr wParam, IntPtr lParam);

const int WM_INPUT = 0x00FF;
const int HWND_BROADCAST = 0xffff;
const int COMMAND = 0;

PostMessage((IntPtr)HWND_BROADCAST, WM_INPUT, IntPtr.Zero, (IntPtr)COMMAND); 
```

但我不知道如何构建消息本身，甚至不知道这种方法是否有效。

如果我在吠叫错误的树，那么请告诉我！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-18T13:56:18.487

我没有尝试过，但是查看您在 MSDN 中发布的链接 + 此页面：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ee418864 (v=vs.85).aspx# WM_INPUT](http://msdn.microsoft.com/en-us/library/windows/desktop/ee418864(v=vs.85).aspx#WM_INPUT)

看来您需要在 C# 应用程序中声明结构[RAWINPUT](http://msdn.microsoft.com/en-us/library/windows/desktop/ms645562%28v=vs.85%29.aspx)，用与您要发送的命令对应的数据填写它，并在 lParam 中传递一个指向它的指针。

# django - 你如何在 Django 中模拟一个 RelatedManager 方法？

> ID：12212786
> 
> 赞同：9
> 
> 时间：2012-08-31T09:41:44.900
> 
> 标签：django, testing, mocking

我有一个 Django 模型的客户经理，它覆盖该`create`方法以保存一些相关对象：

```
class CustomManager(models.Manager):
    def create(self, amount, user, description):
        txn = self.get_query_set().create(user, description)
        txn.budget_transactions.create(amount)
        return txn 
```

我的问题是：如何模拟`txn.budget_transactions.create`引发异常的调用？

对象的`budget_transactions`属性`txn`是 的一个实例`django.db.models.fields.related.RelatedManager`。使用`mock.patch`模拟这个类不起作用，因为它是动态声明的 - 它不能直接导入。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-11-13T01:39:58.353

您不能只将 RelatedManager 设置为模拟对象的原因是 django 已经覆盖了该对象的**set**方法。因此，虽然看起来因为没有投诉而正确设置了 mock，但它实际上是在默默地设置`budget_transactions`回 RelatedManager。因此，如果您确实需要返回一个模拟，那么您需要覆盖返回相关管理器的**get**方法并返回一个模拟对象。

最终应该看起来像：

```
@mock.patch('django.db.models.fields.related.ForeignRelatedObjectsDescriptor.__get__')
def test_campaign_cancel(self, mock_manager):
    mock_manager.return_value = mock.MagicMock()
    mock_manager.return_value.create = Exception('Boom!') 
```

话虽这么说，这种方法有很多陷阱，因为它将覆盖核心 django 方法，现在*所有*相关管理器都将返回一个模拟对象。从我迄今为止的经历来看，探索其他选择可能更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-12-21T14:24:07.503

`RelatedManager`是一个描述符，必须使用[`unittest.PropertyMock`](https://docs.python.org/3/library/unittest.mock.html#unittest.mock.PropertyMock)

```
from unittest import patch, MagicMock, PropertyMock, TestCase

class CustomManagerTest(TestCase):
    @patch('app.managers.Transaction.budget_transactions', new_callable=PropertyMock)
    def test_custom_manager_create(self, mock_budget_transactions):
        mock_create = MagicMock()
        mock_budget_transaction.return_value.create = mock_create

        self.assertEqual(mock_create.call_count, 1) 
```

# c++ - 包含一个或多个虚函数的类对象的大小

> ID：12212788
> 
> 赞同：1
> 
> 时间：2012-08-31T09:41:50.620
> 
> 标签：c++

我想知道包含一个或多个虚函数（但只有虚函数）的类的对象的大小。每个人都说答案是 4。但是当我尝试在 TCWIN45 上运行这些代码时，我得到了 2 作为输出。

![代码](../Images/7e3ca90cc7fe255d38fbbf87551523bf.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T09:42:43.850

从技术上讲，类对象的大小是**Unspecified**。

请注意，动态调度的实现对编译器是开放的。实现可以使用他们选择的任何机制，他们不需要记录它。

大多数实现使用***虚拟表和指针***机制，其中将虚拟指针添加到每个类对象并增加开销。可能还有其他可能会增加尺寸的东西。

通常，

> **对象大小 = 非静态数据成员大小 + 填充字节 + vptr 大小（适用）**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T11:28:22.410

“TCWIN45”是一个旧的 16 位编译器。在那里，每个指针是两个字节。典型答案 (4) 适用于更常见的 32 位编译器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:45:57.990

视情况而定，它通常是指针的大小（4 或 8 字节），但在这种情况下，它很可能是全局表中的索引。编译器可能假设整个程序中的多态类不超过 2^16 个。

编辑：不一定在整个程序中，但至少在当前的类层次结构中。

# xml - 如何使用 XQuery 创建 DOT 图？

> ID：12212792
> 
> 赞同：2
> 
> 时间：2012-08-31T09:42:13.633
> 
> 标签：xml, xquery, dot

我需要基于以下 XML 创建一个 DOT 图：

```
<layout-structure>
    <layout-root id="layout-root">
        <layout-chunk id="header-text">
            <layout-leaf xref="lay-1.01"/>
            <layout-leaf xref="lay-1.02"/>
        </layout-chunk>
        <layout-leaf xref="lay-1.03"/>
    </layout-root>
</layout-structure> 
```

我想使用 DOT 来可视化不同**layout-chunk**和**layout-leaf**元素之间的依赖关系，这些元素使用*id*或*xref*属性标识，具体取决于元素类型。

我想要的结果在 DOT 中给出：

```
graph "layout-root" {
"layout-root" -- "header-text";
"header-text" -- "lay-1.01";
"header-text" -- "lay-1.02";
"layout-root" -- "lay-1.03";
} 
```

这将导致这个可视化图表：

![](../Images/9327a4febe99c3533460ce051276065f.png)

使用 XQuery 解析**layout-root**元素以获取**layout-chunk**和**layout-structure**元素及其可能的子元素并返回要在 DOT 图中使用的*id*和*xref属性的最佳方法是什么？*

我是 XQuery 的新手，尝试过各种方法；我想我需要连接每个元素中的*id*和*外部参照*值，以便为 DOT 生成所需的标记。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T11:04:04.930

以下查询可能会有所帮助（使用 BaseX 和 Saxon 进行测试）：

```
declare variable $nl := '&#10;';

declare function local:ref($root) {
  string-join((
    for $c in $root/layout-chunk
    return (
      concat('  "', $root/@id, '" -- "', $c/@id, '";', $nl),
      local:ref($c)
    ),
    local:leaf($root)), "")
};

declare function local:leaf($root) {
  for $c in $root/layout-leaf
  return concat('  "', $root/@id, '" -- "', $c/@xref, '";', $nl)
};

(: Alternative: let $doc := doc("doc.xml") :)
let $doc := document {
  <layout-structure>
      <layout-root id="layout-root">
          <layout-chunk id="header-text">
              <layout-leaf xref="lay-1.01"/>
              <layout-leaf xref="lay-1.02"/>
          </layout-chunk>
          <layout-leaf xref="lay-1.03"/>
      </layout-root>
  </layout-structure> }
let $root := $doc/layout-structure/*
return concat(
  'graph "', $root/name(), '" { ' , $nl,
  local:ref($root),
'}') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T12:06:15.523

Dot 有一种 XML 语法，称为 DotML。我发现生成 DotML 比直接生成 Dot 更容易。详情在这里：

[http://martin-loetzsch.de/DOTML/](http://martin-loetzsch.de/DOTML/)

# xslt - 使用 XSLT 进行递归转换：表到树

> ID：12212793
> 
> 赞同：0
> 
> 时间：2012-08-31T09:42:17.447
> 
> 标签：xslt, recursion, xslt-1.0, xbrl

我想转换代表树的分层元素。数据以这种格式在表格中提供：

```
<?xml version="1.0" encoding="utf-16"?>
<asx:abap xmlns:asx="http://www.sap.com/abapxml" version="1.0">
    <asx:values>
        <CONCEPTS>
            <item>
                <NO>1</NO>
                <NS_PREFIX>de-gaap-ci</NS_PREFIX>
                <XBRL_ID>bs.ass.monetary</XBRL_ID>
                <IS_TUPLE>false</IS_TUPLE>
                <FATHER_ID/>
                <CONTEXT_REF>D-2012</CONTEXT_REF>
                <UNIT_REF>EUR</UNIT_REF>
                <DECIMALS>2</DECIMALS>
                <PRECISION/>
                <IS_NIL>false</IS_NIL>
                <VALUE>12923.00-</VALUE>
            </item>
            <item>
                <NO>2</NO>
                <NS_PREFIX>de-gaap-ci</NS_PREFIX>
                <XBRL_ID>bs.ass.string</XBRL_ID>
                <IS_TUPLE>false</IS_TUPLE>
                <FATHER_ID/>
                <CONTEXT_REF>D-2012</CONTEXT_REF>
                <UNIT_REF/>
                <DECIMALS/>
                <PRECISION/>
                <IS_NIL>false</IS_NIL>
                <VALUE>Test String</VALUE>
            </item>
            <item>
                <NO>3</NO>
                <NS_PREFIX>de-gaap-ci</NS_PREFIX>
                <XBRL_ID>bs.ass.nil</XBRL_ID>
                <IS_TUPLE>false</IS_TUPLE>
                <FATHER_ID/>
                <CONTEXT_REF>D-2012</CONTEXT_REF>
                <UNIT_REF/>
                <DECIMALS/>
                <PRECISION/>
                <IS_NIL>true</IS_NIL>
                <VALUE/>
            </item>
            <item>
                <NO>4</NO>
                <NS_PREFIX>de-gaap-ci</NS_PREFIX>
                <XBRL_ID>bs.ass.tuple1</XBRL_ID>
                <IS_TUPLE>true</IS_TUPLE>
                <FATHER_ID/>
                <CONTEXT_REF>D-2012</CONTEXT_REF>
                <UNIT_REF/>
                <DECIMALS/>
                <PRECISION/>
                <IS_NIL>false</IS_NIL>
                <VALUE/>
            </item>
            <item>
                <NO>5</NO>
                <NS_PREFIX>de-gaap-ci</NS_PREFIX>
                <XBRL_ID>bs.ass.a</XBRL_ID>
                <IS_TUPLE>false</IS_TUPLE>
                <FATHER_ID>bs.ass.tuple1</FATHER_ID>
                <CONTEXT_REF>D-2012</CONTEXT_REF>
                <UNIT_REF/>
                <DECIMALS/>
                <PRECISION/>
                <IS_NIL>false</IS_NIL>
                <VALUE>Value for bs.ass.a</VALUE>
            </item>
            <item>
                <NO>6</NO>
                <NS_PREFIX>de-gaap-ci</NS_PREFIX>
                <XBRL_ID>bs.ass.b</XBRL_ID>
                <IS_TUPLE>false</IS_TUPLE>
                <FATHER_ID>bs.ass.tuple1</FATHER_ID>
                <CONTEXT_REF>D-2012</CONTEXT_REF>
                <UNIT_REF/>
                <DECIMALS/>
                <PRECISION/>
                <IS_NIL>false</IS_NIL>
                <VALUE>Value for bs.ass.b</VALUE>
            </item>
        </CONCEPTS>
        <CONTEXTS>
            <item>
                <ID>D-2012</ID>
                <SCHEME>http://www.rzf-nrw.de/Steuernummer</SCHEME>
                <IDENTIFIER>5117050051729</IDENTIFIER>
                <IS_INSTANT>false</IS_INSTANT>
                <DATE_A>2012-08-28</DATE_A>
                <DATE_B>2012-08-30</DATE_B>
            </item>
            <item>
                <ID>I-2012</ID>
                <SCHEME>http://www.rzf-nrw.de/Steuernummer</SCHEME>
                <IDENTIFIER>5117050051729</IDENTIFIER>
                <IS_INSTANT>true</IS_INSTANT>
                <DATE_A>2012-08-28</DATE_A>
                <DATE_B/>
            </item>
        </CONTEXTS>
        <UNITS>
            <item>
                <ID>EUR</ID>
                <MEASURE_NS>iso4217</MEASURE_NS>
                <MEASURE_VALUE>EUR</MEASURE_VALUE>
            </item>
                        (...)
        </UNITS>
        <NAMESPACES>
            <item>
                <PREFIX>de-gcd</PREFIX>
                <URI>http://www.xbrl.de/taxonomies/de-gcd-2011-09-14</URI>
                <IS_DEFAULT>false</IS_DEFAULT>
            </item>
                        (...)
        </NAMESPACES>
        <SCHEMAS>
            <item>
                <SCHEMA_REF>http://www.xbrl.de/taxonomies/de-gcd-2011-09-14.xsd</SCHEMA_REF>
            </item>
                        (...)
        </SCHEMAS>
    </asx:values>
</asx:abap> 
```

该列`IS_TUPLE`表示该元素是树内的父节点。`XBRL_ID`列中包含此父亲的所有元素`FATHER_ID`都应该是此父亲的孩子。因此，如果该列为`FATHER_ID`空，则该节点没有父节点。

我想用 XSLT 递归地处理这些元素。目标格式是 XBRL，它基本上是 XML。这是我的尝试：

```
<xsl:template match="/">
<xbrl ...>
   <xsl:apply-templates select="/CONCEPTS/item">
      <xsl:with-param name="rec_father_node" select="/" />
   </xsl:apply-templates>
</xbrl>
</xsl:template>

<xsl:template name="tpl_concept" match="/CONCEPTS/item">

    <xsl:param name="rec_father_node"/>

    <xsl:variable name="rec_father_id" select="string($rec_father_node/XBRL_ID/text())"/>

    <xsl:variable name="father_id" select="string(*[local-name()='FATHER_ID'])"/>
    <xsl:variable name="is_tuple" select="string(*[local-name()='IS_TUPLE'])"/>     
    <xsl:variable name="ns_prefix" select="string(*[local-name()='NS_PREFIX'])"/>
    <xsl:variable name="xbrl_id" select="string(*[local-name()='XBRL_ID'])"/>
    <xsl:variable name="name" select="$xbrl_id"/>

    <xsl:if test="$is_tuple = 'false' and $rec_father_id = $father_id">

        <xsl:element name="{$name}">
                      (...)
        </xsl:element>
    </xsl:if>

    <xsl:if test="$is_tuple = 'true' and $rec_father_id = $father_id">
        <xsl:element name="{$name}">
            <xsl:choose>
                <xsl:when test="$is_nil = 'true'">
                    <xsl:attribute name="xsi:nil">true</xsl:attribute>
                </xsl:when>
                <xsl:otherwise>
                    <xsl:apply-templates select="/CONCEPTS/item">
                        <xsl:with-param name="rec_father_id" select="current()" />
                    </xsl:apply-templates>                  
                </xsl:otherwise>
            </xsl:choose>
        </xsl:element>
    </xsl:if>       
</xsl:template> 
```

我的想法如下：没有父亲的节点在 column 中具有字符串值 '' `FATHER_ID`。因此，我将根节点传递给参数`rec_father_node`以获取此初始字符串。通过对同一模板的递归调用，参数`rec_father_node`包含此父亲的节点，因此我可以读出此父亲的节点，`XBRL_ID`仅在列内添加具有此值的元素`FATHER_ID`。

我的问题如下：参数`rec_father_node`丢失了递归调用传递的值。`<xsl:apply-templates .../>`该值始终是初始调用传递的根节点。

有没有办法将参数传递给递归模板调用？或者一般来说，如何将这个平面表转换为具有嵌套元素的 XML 节点树？

转换的目标应如下所示（取自上面示例的名称，并添加了一些其他节点以便清楚起见）：

```
<?xml version="1.0" encoding="UTF-8"?>
<xbrl>
    <bs.ass.monetary>12923.00-</bs.ass.monetary>
    <bs.ass.string>Test String</bs.ass.string>
    <bs.ass.nil></bs.ass.nil>
    <bs.ass.tuple1>
        <bs.ass.a>Value for bs.ass.a</bs.ass.a>
        <bs.ass.b>Value for bs.ass.b</bs.ass.b>
    </bs.ass.tuple1>
</xbrl> 
```

感谢您的任何帮助或评论！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:30:12.387

您可以做的是首先定义一个键来根据它们的**FATHER_ID**元素查找“子”项目。

```
<xsl:key name="children" match="item" use="FATHER_ID" /> 
```

首先，虽然你会从匹配没有父亲的项目开始

```
<xsl:apply-templates select="item[FATHER_ID='']"/> 
```

然后，对于“元组”的项目，您可以匹配它们，并使用键递归匹配它们的子项

```
<xsl:template match="item[IS_TUPLE='true']">
   <xsl:element name="{XBRL_ID}">
      <xsl:apply-templates select="key('children', XBRL_ID)" />
   </xsl:element>
</xsl:template> 
```

您还将有另一个用于**项目**元素的模板，该模板将匹配非元组，从而输出您喜欢的任何值。

尝试以下 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>
   <xsl:key name="children" match="item" use="FATHER_ID"/>

   <xsl:template match="/">
         <xsl:apply-templates select="//CONCEPTS"/>
   </xsl:template>

   <xsl:template match="CONCEPTS">
      <xbrl>
         <xsl:apply-templates select="item[FATHER_ID='']"/>
      </xbrl>
   </xsl:template>

   <xsl:template match="item[IS_TUPLE='true']">
      <xsl:element name="{XBRL_ID}">
         <xsl:apply-templates select="key('children', XBRL_ID)"/>
      </xsl:element>
   </xsl:template>

   <xsl:template match="item">
      <xsl:element name="{XBRL_ID}">
         <xsl:value-of select="VALUE" />
      </xsl:element>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的样本时，您将获得以下信息

```
<xbrl>
   <bs.ass.monetary>12923.00-</bs.ass.monetary>
   <bs.ass.string>Test String</bs.ass.string>
   <bs.ass.nil></bs.ass.nil>
   <bs.ass.tuple1>
      <bs.ass.a>Value for bs.ass.a</bs.ass.a>
      <bs.ass.b>Value for bs.ass.b</bs.ass.b>
   </bs.ass.tuple1>
</xbrl> 
```

# ios - 在导航栏上创建标题和按钮

> ID：12212794
> 
> 赞同：-1
> 
> 时间：2012-08-31T09:42:20.263
> 
> 标签：ios, uinavigationcontroller

我正在尝试复制 iPhone 的联系人应用程序并在导航栏上创建一个按钮。实际上视图不是`UINavigation`控制器。我只是以编程方式添加了导航栏，但我正在努力在该导航栏上创建标题和按钮。

我正在使用以下代码

```
[[UIBarButton alloc]] initWithTitle:@"Done" 
                              Style:UIBarButonItemStyleBorderd 
                              target:Self 
                              action:selector(btnClicked)];  
self.navigationItem.rightBArButtonItem=btnDone; 
[self.view addSubview:navigationBar]; 
```

请参考模拟器中的 iphone 联系人应用程序。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:56:47.087

试试这个代码块

```
UIBarButtonItem *rightButton = **[[UIBarButtonItem alloc] initWithTitle:@"Done" 
    style:UIBarButtonSystemItemDone target:nil action:nil];**
UINavigationItem *item = [[UINavigationItem alloc] initWithTitle:@"Title"];
item.rightBarButtonItem = rightButton;
item.hidesBackButton = YES;
[bar pushNavigationItem:item animated:NO];
[rightButton release];
[item release]; 
```

并通过其他这样的[链接](https://stackoverflow.com/questions/2504351/how-to-add-a-button-to-uinavigationbar)

# php - 在 PHP 中将字符串解析为数组

> ID：12212796
> 
> 赞同：5
> 
> 时间：2012-08-31T09:42:27.173
> 
> 标签：php, arrays

我是 PHP 新手，找不到正确的答案。

```
$whatever = "array('Test','Blah')";
echo $parsed[2]; //This will be "Blah" 
```

我想创建一个名为的变量，该变量`$parsed`包含`$whatever`的值，但作为有效数组而不是字符串。

我知道我可以通过删除它周围的引号来创建数组，如下所示：

```
$whatever = array('Test','Blah'); 
```

但是，在我正在处理的实际代码中，这是不可能的。此外，在我的实际代码中，数组是多维的，因此涉及字符替换的东西可能是不切实际的，但是我不排除它是否是最佳选择。

综上所述，在 PHP 中将字符串解析为数组的最佳方法是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-31T09:44:46.763

使用`eval`函数： http: [//php.net/manual/en/function.eval.php](http://php.net/manual/en/function.eval.php)。

```
$whatever = "array('Test','Blah')";
$parsed = eval("return " . $whatever . ";");
echo $parsed[1]; //This will be "Blah" 
```

仔细检查`$whatever`变量内容，因为可以执行任何 PHP 代码。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-31T09:54:07.143

更安全的方式（没有评估）是：

```
$whatever = "array('Test','Blah')";

$search = array("array", "(", ")", "'");
$parsed = explode(',',str_replace($search, '', $whatever));

echo $parsed[1]; 
```

这将删除所有不必要的文本，然后将使用逗号分隔符分解字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:01:53.047

`eval()`是邪恶的。性能差，**不安全**

因此，如果您的数组没有那么复杂，请使用**正则表达式**

```
$subject = "array('Test','Blah','Blah2','Blah3')";
$pattern = "/'(.*?)'/";
preg_match_all($pattern, $subject, $matches);
echo "<pre>";print_r($matches[1]); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-06-14T19:14:09.177

这是我一直在做的事情。目前还没有单元测试，但它似乎工作得很好。我不支持在数组结构中使用函数、对象实例化、条件等。我不想为我的用例支持这些。但是请随意添加您需要的任何功能。

```
/**
 * A class used convert string representations or php arrays to an array without using eval()
 */
class ArrayTokenScanner
{
    /** @var array  */
    protected $arrayKeys = [];

    /**
     * @param string $string   e.g. array('foo' => 123, 'bar' => [0 => 123, 1 => 12345])
     *
     * @return array
     */
    public function scan($string)
    {
        // Remove whitespace and semi colons
        $sanitized = trim($string, " \t\n\r\0\x0B;");
        if(preg_match('/^(\[|array\().*(\]|\))$/', $sanitized)) {
            if($tokens = $this->tokenize("<?php {$sanitized}")) {
                $this->initialize($tokens);
                return $this->parse($tokens);
            }
        }

        // Given array format is invalid
        throw new InvalidArgumentException("Invalid array format.");
    }

    /**
     * @param array $tokens
     */
    protected function initialize(array $tokens)
    {
        $this->arrayKeys = [];
        while($current = current($tokens)) {
            $next = next($tokens);
            if($next[0] === T_DOUBLE_ARROW) {
                $this->arrayKeys[] = $current[1];
            }
        }
    }

    /**
     * @param array $tokens
     * @return array
     */
    protected function parse(array &$tokens)
    {
        $array = [];
        $token = current($tokens);
        if(in_array($token[0], [T_ARRAY, T_BRACKET_OPEN])) {

            // Is array!
            $assoc = false;
            $index = 0;
            $discriminator = ($token[0] === T_ARRAY) ? T_ARRAY_CLOSE : T_BRACKET_CLOSE;
            while($token = $this->until($tokens, $discriminator)) {

                // Skip arrow ( => )
                if(in_array($token[0], [T_DOUBLE_ARROW])) {
                    continue;
                }

                // Reset associative array key
                if($token[0] === T_COMMA_SEPARATOR) {
                    $assoc = false;
                    continue;
                }

                // Look for array keys
                $next = next($tokens);
                prev($tokens);
                if($next[0] === T_DOUBLE_ARROW) {
                    // Is assoc key
                    $assoc = $token[1];
                    if(preg_match('/^-?(0|[1-9][0-9]*)$/', $assoc)) {
                        $index = $assoc = (int) $assoc;
                    }
                    continue;
                }

                // Parse array contents recursively
                if(in_array($token[0], [T_ARRAY, T_BRACKET_OPEN])) {
                    $array[($assoc !== false) ? $assoc : $this->createKey($index)] = $this->parse($tokens);
                    continue;
                }

                // Parse atomic string
                if(in_array($token[0], [T_STRING, T_NUM_STRING, T_CONSTANT_ENCAPSED_STRING])) {
                    $array[($assoc !== false) ? $assoc : $this->createKey($index)] = $this->parseAtomic($token[1]);
                }

                // Parse atomic number
                if(in_array($token[0], [T_LNUMBER, T_DNUMBER])) {

                    // Check if number is negative
                    $prev = prev($tokens);
                    $value = $token[1];
                    if($prev[0] === T_MINUS) {
                        $value = "-{$value}";
                    }
                    next($tokens);

                    $array[($assoc !== false) ? $assoc : $this->createKey($index)] = $this->parseAtomic($value);
                }

                // Increment index unless a associative key is used. In this case we want too reuse the current value.
                if(!is_string($assoc)) {
                    $index++;
                }
            }

            return $array;
        }
    }

    /**
     * @param array $tokens
     * @param int|string $discriminator
     *
     * @return array|false
     */
    protected function until(array &$tokens, $discriminator)
    {
        $next = next($tokens);
        if($next === false or $next[0] === $discriminator) {
            return false;
        }

        return $next;
    }

    protected function createKey(&$index)
    {
        do {
            if(!in_array($index, $this->arrayKeys, true)) {
                return $index;
            }
        } while(++$index);
    }

    /**
     * @param $string
     * @return array|false
     */
    protected function tokenize($string)
    {
        $tokens = token_get_all($string);
        if(is_array($tokens)) {

            // Filter tokens
            $tokens = array_values(array_filter($tokens, [$this, 'accept']));

            // Normalize token format, make syntax characters look like tokens for consistent parsing
            return $this->normalize($tokens);

        }

        return false;
    }

    /**
     * Method used to accept or deny tokens so that we only have to deal with the allowed tokens
     *
     * @param array|string $value    A token or syntax character
     * @return bool
     */
    protected function accept($value)
    {
        if(is_string($value)) {
            // Allowed syntax characters: comma's and brackets.
            return in_array($value, [',', '[', ']', ')', '-']);
        }
        if(!in_array($value[0], [T_ARRAY, T_CONSTANT_ENCAPSED_STRING, T_DOUBLE_ARROW, T_STRING, T_NUM_STRING, T_LNUMBER, T_DNUMBER])) {
            // Token did not match requirement. The token is not listed in the collection above.
            return false;
        }
        // Token is accepted.
        return true;
    }

    /**
     * Normalize tokens so that each allowed syntax character looks like a token for consistent parsing.
     *
     * @param array $tokens
     *
     * @return array
     */
    protected function normalize(array $tokens)
    {
        // Define some constants for consistency. These characters are not "real" tokens.
        defined('T_MINUS')           ?: define('T_MINUS',           '-');
        defined('T_BRACKET_OPEN')    ?: define('T_BRACKET_OPEN',    '[');
        defined('T_BRACKET_CLOSE')   ?: define('T_BRACKET_CLOSE',   ']');
        defined('T_COMMA_SEPARATOR') ?: define('T_COMMA_SEPARATOR', ',');
        defined('T_ARRAY_CLOSE')     ?: define('T_ARRAY_CLOSE',     ')');

        // Normalize the token array
        return array_map( function($token) {

            // If the token is a syntax character ($token[0] will be string) than use the token (= $token[0]) as value (= $token[1]) as well.
            return [
                0 => $token[0],
                1 => (is_string($token[0])) ? $token[0] : $token[1]
            ];

        }, $tokens);
    }

    /**
     * @param $value
     *
     * @return mixed
     */
    protected function parseAtomic($value)
    {
        // If the parameter type is a string than it will be enclosed with quotes
        if(preg_match('/^["\'].*["\']$/', $value)) {
            // is (already) a string
            return $value;
        }

        // Parse integer
        if(preg_match('/^-?(0|[1-9][0-9]*)$/', $value)) {
            return (int) $value;
        }

        // Parse other sorts of numeric values (floats, scientific notation etc)
        if(is_numeric($value)) {
            return  (float) $value;
        }

        // Parse bool
        if(in_array(strtolower($value), ['true', 'false'])) {
            return ($value == 'true') ? true : false;
        }

        // Parse null
        if(strtolower($value) === 'null') {
            return null;
        }

        // Use string for any remaining values.
        // For example, bitsets are not supported. 0x2,1x2 etc
        return $value;
    }
} 
```

使用示例：

```
$tokenScanner = new ArrayTokenScanner();
$array = $tokenScanner->scan('[array("foo" => -123, "foobie" => "5x2", "bar" => \'456\', 111 => 12, "bar", ["null" => null], "bool" => false), 123 => E_ERROR];');
$arrayExport = preg_replace('/[\s\t]+/', ' ', var_export($array, true));
echo stripslashes($arrayExport) . PHP_EOL;
$array2 = $tokenScanner->scan('[array("foo" => 123, "foobie" => "5x2", "bar" => \'456\', 111 => 12, "bar", ["null" => null], "bool" => false), 123 => E_ERROR];');
$arrayExport = preg_replace('/[\s\t]+/', ' ', var_export($array, true));
echo stripslashes($arrayExport); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T09:45:11.453

你可以写

```
$strCreateArray = "$whatever = " . "array('Test','Blah')" . ";";

eval( $strCreateArray ); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T09:51:09.737

如果 eval 不是一个选项。根据数组是否始终具有相同的格式（从不多维），使用替换函数删除`array(`和`)`所有引号。然后在逗号上做一个字符串爆炸。

有没有办法不能为这些数组设置这种格式？像这样存储数组对我来说毫无意义。序列化或 json 是更好的选择。

# sql - 允许查询构建的数据层

> ID：12212802
> 
> 赞同：1
> 
> 时间：2012-08-31T09:42:53.130
> 
> 标签：sql, data-access-layer, query-builder, weak-typing

我需要提供一个小型应用程序，允许客户端针对其本地数据库创建查询（或“规则”）并触发某些操作（发送邮件、短信和其他内容）。

由于他们将被允许为这项工作陈述实际的 SQL，我想知道我的数据层应该是什么样子。似乎我不需要实体和存储库，因为所有数据交互都是弱类型的。

那么我的数据层应该做什么呢？打开连接，接受输入的SQL，返回属性包列表？我什至需要一个数据层吗？

**[更新]**

这是客户希望在他的应用程序中拥有的，能够针对他们的数据库编写或构建查询。它将在他们的本地计算机上运行，​​这意味着恶意员工不需要 SQL 注入攻击。

但是即使我有一个可视化控件来构建查询、验证和清理它，这一层的最终结果是 SQL 代码，不是吗？如果我想测试它，我该如何抽象它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T08:56:20.240

实际上，我们在 10 多年前遇到了几乎相同的问题（尽管它不在本地数据库中）。恕我直言，对于即席 SQL 查询（无论它们是如何创建的，用户可以只使用文本外壳来输入它们），DAL 没有多大意义 - 对于应用程序的通用报告/查询部分。这并不意味着您不能对应用程序中数据被修改或输入数据库的部分使用 DAL。

但是，您应该注意一些事情。显然，语法错误的查询应该给出有意义的错误消息，并且应该有可能中断长时间运行的查询。

限制对某些表的即席查询访问，或提供某些视图层，以将数据模型的技术部分隐藏在用户之外，这也是一个好主意。而且我会避免让您的用户以类似的临时方式修改任何数据 - 确保他们不能将任何 UPDATE 语句注入他们创建的 SELECT 语句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:49:07.293

`SQL`通常，直接从用户接受查询或对查询的任何输入被认为是危险`SQL`的，因为这样的代码容易受到[`SQL Injection`](http://en.wikipedia.org/wiki/SQL_injection)攻击。相反，如果这不是一次性案例，并且您希望让您的用户能够灵活地查询任何内容，您应该定义一种中间语言，用户将使用它来指定他们的过滤条件，这将用于SQL 查询生成。这样，你有

1.  有机会在将用户输入添加到查询之前对其进行清理。
2.  将您的对象模型与用户解耦，因此如果您以后想更改对象模型或存储本身，只要您将适配器从该中间语言编写到修改后的对象模型或新的存储。

我们在我们的一个项目中这样做是为了让用户能够灵活地对底层数据模型的任何属性进行过滤、排序和分组，这种方法非常有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:00:30.717

使用 PL/SQL 或更好的 ETL 工具构建报告数据库/星型模式，这将允许您清理/丰富数据，预先应用业务规则，使用列和表的业务语言而不是技术术语，并使用户查询返回快速，并将像 Cognos 这样的报告工具放在星型模式上，该模式为用户预先加入所有表，并允许您应用治理规则来防止用户犯傻。

这是最简单、最有效的方法，但并不便宜。

# visual-c++ - 如何在 mfc 应用程序启动时初始化变量

> ID：12212806
> 
> 赞同：0
> 
> 时间：2012-08-31T09:43:07.193
> 
> 标签：visual-c++, mfc

我有一个`std::string`在程序的视图类中声明的对象。

```
//puzzleView.h
public:
   std::string currentState;    // stores the current state of the blocks 
```

我想在执行开始时将其初始化为特定值。但是我在哪里放置初始化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T11:22:52.913

取决于您认为“执行的开始”是什么。如果您将此字符串声明为主视图的数据成员，则应在视图类构造函数中初始化它 - 在`CPuzzleView::CPuzzleView()`函数体中（我想您的视图类名称是`CPuzzleView`）。这是最常见的情况：

```
// #1 Using initialization list
CPuzzleView::CPuzzleView(): currentState("No state")
{
}

// #2 Using assignment in ctor body. Also valid, but case #1 is preferable
CPuzzleView::CPuzzleView()
{
   currentState = "No state";
} 
```

`main()`如果您需要在函数启动之前对其进行初始化，您应声明它`static`并在任何文件的全局范围内进行初始化`.cpp`，例如`puzzleView.cpp`. 但不要认为你真的需要它来完成这样的教育目的（？）任务。

还想提一下，使用 MFC`CString`类而不是`std::string`在 MFC/ATL 应用程序中会更加一致 - 不会混合不同的字符串类型并避免不必要的转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:48:51.300

您必须初始化 .cpp 文件中的字符串。

# c# - 在 datagridview 中显示另一个表中的数据代替外部值

> ID：12212810
> 
> 赞同：0
> 
> 时间：2012-08-31T09:43:36.943
> 
> 标签：c#, sql-server, database, datagridview

我正在使用 C# [C sharp] 和 sql server 开发桌面应用程序。我有三张桌子：

1.  **tblSbjEmp**
    sID
    eID

2.  **tblSbj**
    sID
    SubjectName

3.  **tblEmp**
    eID
    员工姓名

我想在 Datagridview中显示**tblSbjEmp 。**我已经很容易在datagridview中替换了隐藏**eID**的组合框，但我的问题是**我想要SubjectName（不是组合框）代替网格中的sID，它必须是只读的**

```
 public DataSet getDS(String strTableName, String strQuery)
    {
        myCon = new SqlConnection("connection string");
        try
        {
            DS = new DataSet();
            DA = new SqlDataAdapter(strQuery, myCon);
            SqlCommandBuilder cmdBldr = new SqlCommandBuilder(DA);
            DA.Fill(DS, strTableName);
            return DS;
        }
        catch (SqlException ex)
        {
            MessageBox.Show(ex.Message + "-----" + ex.ToString());
            DataTable DT = new DataTable();
            return DS;
        }
        finally
        {
            if (myCon.State == ConnectionState.Open)
                myCon.Close();
        }

    }

ds = SObj.getDS("tblSbjEmp", "Select * from tblSbjEmp");

//Lecturer Combobox
DataGridViewComboBoxColumn Employee = new DataGridViewComboBoxColumn();
Employee.HeaderText = "Lecturer";
Employee.Name = "Employee";
Employee.MaxDropDownItems = 4;
Employee.Visible = true;
Employee.Width = 150;
Employee.DataSource = clsSettings.getAllRecords("Select eID, EmployeeName from tblEmp");

Employee.DataPropertyName = "eID";
Employee.ValueMember = "eID";
Employee.DisplayMember = "EmployeeName";

dgvLecturer.Columns.Add(Employee); 
```

在组合框中，我们可以设置 DatapropertyName、ValueMember 和 DisplayMember 并选择组合框的数据源，但我怎样才能获得**SubjectName**（固定值）来代替 sID。但是当我必须更新表时，我必须更新 sID 以下是我使用的更新命令。SObj.DA.Update(ds, "tblSbjCrs"); **查询**不能通过这种方法更新，所以我在网格后面使用了单个表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-01T18:23:42.650

我有自己的答案。**在萨米先生**告诉我之后，我试图进行查询。感谢萨米先生。这是我的查询：

```
SELECT sID, eID,
    (SELECT SubjectName
      FROM  dbo.Subject
      WHERE (sID = dbo.tblSbjEmp.sID)) AS SubjectName
FROM dbo.tblSbjEmp
ORDER BY sID 
```

这是一个相关子查询并且可更新。谢谢大家。

# java - JNLP 执行失败并显示消息 Execute failed: java.io.IOException: Cannot run program "javaws"

> ID：12212813
> 
> 赞同：1
> 
> 时间：2012-08-31T09:43:43.713
> 
> 标签：java, jnlp, java-web-start

我正在使用构建文件来编译我的项目。代码编译成功并正在生成`.jar`and`.jnlp`文件。但是当我启动应用程序时，我得到了

```
Execute failed: java.io.IOException: Cannot run program "javaws" 
    (in directory "/sreekanth/ProjectsCXF/JavaWebStartTest/src/build/jar"): 
    java.io.IOException: error=2,No such file or directory. 
```

我的构建文件

```
`<!-- Build file for the project. -->
<project basedir="." default="launch" name="OPRS_JNLP">

  <target name="properties">
    <property name="build" value="build" />
    <property name="dist" value="dist" />
    <property name="src" value="src" />

    <property
      name="classpath"
      value="${java.home}/jre/lib/javaws.jar" />
  </target>

  <target
    name="compile"
    depends="properties"
    description="Compile the project" >
    <mkdir dir="${build}/share" />
    <javac
      debug="on"
      destdir="${build}/share"
      srcdir="com/abhibus/oprs"
      source="1.6"
      classpath="${classpath}" />
    <copy todir="${build}/share">
      <fileset dir="com/abhibus/oprs">
        <exclude name="**/CVS" />
        <exclude name="**/*.java" />
      </fileset>
    </copy>
  </target>

  <target
    name="dist"
    depends="compile"
    description="Create project distribution" >
    <mkdir dir="${build}/jar" />
    <mkdir dir="${build}/jar/lib" />
    <jar destfile="${build}/jar/apsrtcoprs.jar">
      <fileset dir="${build}/share">
        <include name="**/*.class" />
      </fileset>
    </jar>
  </target>

  <target
    name="make-launch-file"
    depends="properties"
    description="Copies and configures the launch file" >
    <copy todir="${build}/jar" >
      <fileset dir="${src}/conf" >
        <include name="**/*.jnlp" />
      </fileset>
    </copy>
  </target>

  <target
    name="launch"
    depends="dist, make-launch-file"
    description="Launch the project using webstart">
    <exec executable="javaws"
      dir="${build}/jar">
      <arg line="-codebase file:. file:./apsrtcoprs.jnlp" />
    </exec>
  </target>

  <target
    name="uninstall"
    depends="properties"
    description="Uninstall the project from the webstart cache">
    <exec executable="javaws">
      <arg
        line="-uninstall http://localhost:9999/apsrtcoprs.jnlp"
        />
    </exec>
  </target>

  <target name="clean"
    depends="properties"
    description="Clean all generated files">
      <delete dir="${build}" />
      <delete dir="${dist}" />
  </target>
</project>` 
```

这里出了什么问题？有人可以帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:57:37.507

```
<exec executable="${java.home}/bin/javaws" .. 
```

（或其他，但是..）指定完整路径。

# wordpress - 子域上的 Wordpress 多站点 + 多语言

> ID：12212821
> 
> 赞同：0
> 
> 时间：2012-08-31T09:44:34.007
> 
> 标签：wordpress, subdomain, multilingual

我有一个网站，使用最新的 wordpress 版本，使用一种语言并托管在`lang.domain.com`子域上。

现在我构建了将托管在主域 ( `www.domain.com/domain.com`)上的英文（和主）版本

这些站点当前托管在不同的文件夹中，并且是完全“独立”的系统。

我希望将它们集成在同一平台/文件夹下，并使用子域为多语言请求提供服务。

我的问题是：

1.  从哪儿开始？
2.  有什么限制？
3.  有什么想法要记住吗？
4.  我还应该问什么其他问题？:)

我的wordpress知识很基础（主题编辑，一些功能..），PHP和MySql没问题。

谢谢

## 编辑

找到这个（[http://codex.wordpress.org/Create_A_Network](http://codex.wordpress.org/Create_A_Network)），当然，但是 - 请给我一些见解

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T10:04:24.707

无需再次重新创建整个站点，您必须使用 WPML 插件，然后它会根据您的站点的语言添加一些标志，无论您想要它们，替代选项您也可以使用谷歌翻译器将您的站点翻译成任何语言。就像我在[我的一个项目中使用谷歌翻译一样](http://ramp1885.com)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T16:40:12.000

如果你想在同一个域上显示不同的内容，你可以使用 qTranslate wordpress 插件。在这里您可以创建 lang.mydomain.com 或 mydomain.com/lang 或 mydomain.com?lang=us。这是显示网站的三种方式。

# android - 我可以在 Perl 中开发 Android 应用程序吗？

> ID：12212827
> 
> 赞同：30
> 
> 时间：2012-08-31T09:45:04.903
> 
> 标签：android, perl, google-play

我知道我可以在 Android 上*运行*Perl，但我正在寻找可以在 Google Play 上发布的应用程序，任何人都可以下载和运行。Perl 仍然是一个可行的选择吗？

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-11-19T14:11:50.390

这个 Google 项目将 Perl 脚本和 Perl 打包成一个独立的 APK，不需要任何进一步的下载，可以上传到 Google Play：

[http://code.google.com/p/perl-android-apk/](http://code.google.com/p/perl-android-apk/)

它通过 SL4A 提供 Android API 访问 - 请参阅其中一位作者的以下页面：

[http://www.github.com/damonkohler/sl4a](http://www.github.com/damonkohler/sl4a)

所以是的，如果 Perl 是您首选的工作语言，它是一个可行的选择。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-31T09:49:28.570

从技术上讲，您可以发布任何符合 Google Play 政策并以 APK 形式分发的内容。但是对于 perl，您要么必须将 perl 与您的应用程序捆绑在一起，要么期望用户拥有它（几乎没有人），更不用说 UI。我的回答是——这不是最好的主意，如果你能重新考虑一下，你可能会想出一些需要更少麻烦的东西。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-31T10:03:53.103

*我强烈推荐用于 Android 的 Perl 和用于原型*应用程序的 SL4A 。从那里开始，将代码重构为 Java 并没有太大的飞跃，因为两个平台上的所有系统调用都是相同的。

Java 知识是一个很好的新字符串，基础知识——主要是一切都是一门课——可以在一个下午学习，并且可以在 Perl 中大量复制

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2012-08-31T18:30:02.033

简短的回答是：不，您不能在已部署的原生 Android 应用程序中使用 Perl。没有实际的方法可以做到这一点。有办法做到这一点，但没有一个是可行的。

正如其他人所指出的那样，有一些像 SL4A 之类的东西可以使原型制作成为可能，您甚至可以在手机上运行一个真正的应用程序，但是将其部署到广泛的手机上会有问题。

对于 95% 的应用程序，某种 Java 应用程序是最佳选择。然而，本机 Java 应用程序并不是您可以使用的唯一选择。

其他选项包括：

*   您可以开发一个主要在服务器端驱动的应用程序，该应用程序运行 Perl。这可能是通过某种套接字连接、REST API 或包装在安装到客户端的瘦 Java 应用程序中的基于 Web 的移动应用程序。但是，您的应用程序仅在手机或平板电脑具有工作数据连接时才能运行。有许多应用程序（包括我自己的）以这种方式工作。

*   你可以试试[PhoneGap](http://phonegap.com/)，它使用 HTML5 和 JavaScript（如果你想扩展它来做一些 Android 上 PhoneGap 不支持的事情，还可以使用 Java）。该框架还有一个优势，即可以轻松地在 iPhone 和其他智能手机上运行您的应用程序。这也有它自己的支持基础和社区，独立于 Android 和 Google，如果这是一个问题的话。

*   您还可以尝试[Scala](http://www.scala-lang.org/)，它是一种构建到 JVM 的函数式语言（即，比 Java 更 Perlish），并且有[一些工具](https://www.google.com/#q=scalar+android)可以帮助构建 Android 项目。这并不成熟，不受谷歌支持，更难开始，但对于那些被 Java 冒犯的人来说，Java 不是。

最终，应该有可能有人将应用程序部署到 Perl，我很乐意看到这种情况发生。不过，我不愿意带头开展该项目。

**2014 年 1 月更新：**可悲的是，尽管其他人说了些什么，但我在 2012 年 8 月的原始回答仍然适用。SL4A + perl 安装解决方案更接近，但 SL4A 不允许您实际构建原生 Android 应用程序。基本上，它使您能够构建一个本地托管的 Web 应用程序，该应用程序可以访问手机的某些本机功能。这可能满足某些应用程序开发人员的需求，但肯定不是所有应用程序开发人员。我仍然不知道有哪个项目可以让您在 Perl 中构建原生 Android 应用程序。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-01T05:03:48.397

Google 声称 Perl 受到“Android 脚本层”(SL4A) 的支持。

见这里：[http ://code.google.com/p/android-scripting/](http://code.google.com/p/android-scripting/)

和 Perl apk：[http ://code.google.com/p/android-scripting/downloads/detail?name=perl_for_android_r1.apk](http://code.google.com/p/android-scripting/downloads/detail?name=perl_for_android_r1.apk)

# python - Google APP Engine 数据存储设计

> ID：12212828
> 
> 赞同：0
> 
> 时间：2012-08-31T09:45:05.287
> 
> 标签：python, google-app-engine, database-design, google-cloud-datastore, type-kinds

我目前正在使用 Python 在 AppEngine 上构建一个网站，并且我必须在数据存储中存储一些信息。

我所有的信息都分为三个不同的类别，如下所示：

1°/- 文章（主页新闻条目）。2°/- 产品（产品页面描述条目）。3°/- 导航（包含所有标题菜单条目）。

现在，我像这样存储它们：

```
from google.appengine.ext import db

class article(db.Model):

    title = db.StringProperty()
    body = db.TextProperty()
    author = db.StringProperty()
    aside = db.StringProperty()
    comment = db.StringProperty()
    date = db.DateProperty(auto_now_add=True)

class navigation(db.Model):

    title = db.StringProperty()
    comment = db.StringProperty()
    link = db.StringProperty()

class products(db.Model):

    title = db.StringProperty()
    body = db.TextProperty()
    author = db.StringProperty()
    aside = db.StringProperty()
    comment = db.StringProperty()
    date = db.DateProperty(auto_now_add=True) 
```

我知道这没有优化，如您所见，我的产品类别与文章相同。我想我可以从第一篇文章中得到它，或者从第一篇文章中扩展它，但我不确定。

所以我的问题是：

我需要使用命名空间吗？（我想清楚地将文章与产品分开）。

这种数据存储的通常设计是什么？

我的文章正文属性永远不会超过 50 个单词，我该如何限制 stringProperty 范围？我是否必须在调用此属性期间进行设置，或者是否有任何选项可以设置 DB 类的默认方法？

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:06:37.190

如果我确实理解：作者可以撰写/评论一篇关于一个（只有一个？）具有描述和其他属性的产品的文章，所以我想我们应该有这样的东西

```
class products(db.Model):
    name_product = db.StringProperty()   # For Example
    description_product = db.StringProperty()   # For Example

class article(db.Model):
    my_product = db.ReferenceProperty(products, required=True)

    # Properties of the article
    title = db.StringProperty()   
    body = db.TextProperty()
    author = db.StringProperty()
    aside = db.StringProperty()
    comment = db.StringProperty()
    date = db.DateProperty(auto_now_add=True) 
```

如果一篇文章涉及多个产品，那么您可以创建另一个数据库模型来映射文章和产品。由于可以在几篇文章中提到几种产品，我们将：

```
class products(db.Model):
    name_product = db.StringProperty()   # For Example
    description_product = db.StringProperty()   # For Example

class article(db.Model):
    # Properties of the article
    title = db.StringProperty()   
    body = db.TextProperty()
    author = db.StringProperty()
    aside = db.StringProperty()
    comment = db.StringProperty()
    date = db.DateProperty(auto_now_add=True)

class map_Article_Products(db.Model):
    my_article = db.ReferenceProperty(article, required=True)
    my_product = db.ReferenceProperty(products, required=True) 
```

***请注意，在这种情况下，数据库模型“文章”会发生变化***

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T20:36:22.043

限制为 50 个字：创建您自己的 StringProperty 变体，在存储之前根据此限制进行验证。有关详细示例，请参阅[https://developers.google.com/appengine/articles/extending_models](https://developers.google.com/appengine/articles/extending_models)。

# java - Comparable[] 是存储各种变量的好方法吗？

> ID：12212830
> 
> 赞同：1
> 
> 时间：2012-08-31T09:45:12.090
> 
> 标签：java, comparable

```
 Comparable w[] = new Comparable[5];
    w[0] = 1;
    w[1] = "string";
    w[2] = 2.0; 
```

这是一个好方法吗？实际上为什么它会起作用（我只是随机尝试）？也许是因为 Comparable 扩展了整数、字符串、双精度等？所以呢？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:49:02.217

> 这是一个好方法吗？

如果你想不出做某事的好理由，那可能不是一个好主意。;)

> 也许是因为 Comparable 扩展了整数、字符串、双精度等？

数字和字符串实现了 Comparable，但您的想法是正确的。

> 所以呢？

你可以在 Java 中做很多奇怪的事情，但大多数都没有用。;)

在这种情况下，它并不是特别有用，因为对象彼此不可比较。例如 Arrays.sort(w); 不会工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T09:47:27.597

这行得通，但没有多大意义。`Integer`，`String`并且`Double`确实实现了`Comparable`接口，但是以通用的方式（即`Integer`实现`Comparable<Integer>`，`String`实现`Comparable<String>`等）。

因此，如果这是您要实现的目标，您将无法将 a`String`与 a进行比较。`Double`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T09:47:59.750

我不认为这是一个好主意。如果`Object[]`您必须存储这样的“异构”集合，请使用。指定`Comparable`为通用接口也会给出错误的建议，即您可以对数组进行排序，这是错误的，因为不同的比较器不能合作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T09:54:28.190

```
Comparable w[] = new Comparable[5]; 
```

这构造了一个实现可比较接口的项目数组。标准类型的所有包装器都实现了这个接口，所以所有东西都可以存储在那里。这样做的缺点是比较方法用于在同一类的对象之间进行比较。将不同类别的物品放入此容器中会破坏该目的。

因此，使用 Comparable 接口作为容器的基本类型可能是个坏主意。因为没有意义。

更好的选择是使用 Object[]，它是所有 Java 对象的超类型。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T09:48:45.477

使用定义要存储在数组或集合中的对象的通用有用属性的类接口。

如果您`compareTo`直接或不直接使用该方法，例如通过对数组进行排序，请使用 Comparable。如果不使用 Object，因为这对读者来说不会那么混乱。如果不是，请注意选择 Comparable 而不是 Object 这不会以有用的方式限制数组的对象，因为有许多实现它的类（并且它正在增长）。

但请注意，您很少需要将字符串、双精度数和整数存储在数组中。您必须这样做是一个信号，您应该检查您的设计。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T09:50:32.917

**-**所有`Wrapper Objects`工具`Comparable`，这就是它的工作原理。

**-此外，当您****只需要根据一个参数进行排序**时，Comparable 很好，`Comparator`但当您想要以**多种方式排序**时使用它会很好......

# c# - 在 OnSuspending 方法期间保存数据

> ID：12212831
> 
> 赞同：3
> 
> 时间：2012-08-31T09:45:12.333
> 
> 标签：c#, windows-8, windows-runtime, async-await

对于 C/XAML 中的 Windows 8 应用程序，我必须将一些数据存储到 LocalState 文件夹。我认为我在使用 async/await 运算符时遇到了一些麻烦。

当我在应用程序运行时保存数据时，一切正常，但是当我尝试在 OnSuspending 方法期间保存数据时，我的应用程序似乎没有等待我的保存方法完成以暂停应用程序。

奇怪的是，当我在调试并逐步进行所有操作时，一切正常，但是当我不放置任何断点时，应用程序在保存数据之前就关闭了。

这是我的代码：

```
 private async void OnSuspending(object sender, SuspendingEventArgs e)
    {
        var deferral = e.SuspendingOperation.GetDeferral();
        await  api.BeforeClosing(true);
        deferral.Complete();
    }

    public async Task BeforeClosing(Boolean toTombstoning)
    {
            SaveItem<LoadingProgress>(fileNameLoadingProgress, InitLoading);
    }

    public static async void SaveItem<T>(String fileName, T data, Boolean crossThreadSecure = false) where T : IBinarySerializable
    {

            await CreateNewStorageFile(fileName);

            StorageFolder localFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
            StorageFolder dataFolder = await localFolder.GetFolderAsync("Data");

            StorageFile file = await dataFolder.GetFileAsync(fileName);

            using (var stream = await file.OpenStreamForWriteAsync())
            {
                using (var writer = new BinaryWriter(stream))
                {
                    writer.Write<T>(data);
                }
            }
    }

    public async static Task CreateNewStorageFile(string filename)
    {
        StorageFolder localFolder = Windows.Storage.ApplicationData.Current.LocalFolder;
        StorageFolder dataFolder = await localFolder.CreateFolderAsync("Data", CreationCollisionOption.OpenIfExists);
        storage = await dataFolder.CreateFileAsync(filename, CreationCollisionOption.OpenIfExists);
    } 
```

我对 await 运算符做错了吗？或者在暂停应用程序之前我们可以做一些操作的最大时间量是多少？

谢谢

编辑：我做了一些新的测试：如果我删除 deferral.Complete(); 从 OnSuspending 方法来看，它可以很好地保存数据（但永远不要关闭应用程序......）。我真的认为问题在于应用程序暂停时我的时间用完了。看起来确实像这个线程上的问题：[StorageFolder.CreateFileAsync 在从 App.OnSuspending 调用时崩溃](https://stackoverflow.com/questions/11996288/storagefolder-createfileasync-crashes-when-called-from-app-onsuspending)。但是我已经尝试了这个问题的所有解决方案，但我仍然有问题......

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T11:04:57.920

您的问题是您`Complete`在所有`async`操作完成之前打电话。

最简单的解决方案是制作`SaveItem`一个`async Task`方法而不是`async void`，然后`await`在`BeforeClosing`.

作为一般规则，`async`方法应该总是返回`Task`/`Task<T>`除非它们*必须*返回`void`（例如，事件处理程序）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-22T17:06:52.043

简短而令人惊讶的答案是 OnSuspending 对于任何应用程序关键的持久性逻辑来说都是一个不可靠的地方。出于某种原因，Microsoft 决定在应用程序关闭后将 OnSuspending 事件延迟 5-10 秒。如果应用程序在此事件之前重新启动，则会生成一个单独的应用程序实例，并且它不知道仍在暂停过程中的应用程序实例。

在遵循 WinRT 应用程序数据示例项目中看似非常简单的示例后，我得出了这个结论：http: [//code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2](http://code.msdn.microsoft.com/windowsapps/ApplicationData-sample-fb043eb2)。经过一番挫折后，我在 MSDN 上找到了一个讨论 OnSuspending 作为保存触发器的线程：http: [//social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/43da2212-9910-461d-816a-94b479ce9885/](http://social.msdn.microsoft.com/Forums/en-US/winappswithcsharp/thread/43da2212-9910-461d-816a-94b479ce9885/) . 该线程的要点是您应该尽可能频繁地保存，因为 OnSuspending 是不可靠的。

# redirect - 302 重定向在浏览器中保存多长时间？

> ID：12212839
> 
> 赞同：41
> 
> 时间：2012-08-31T09:45:43.093
> 
> 标签：redirect, browser, browser-cache, cache-control, http-status-code-302

由于我们的网络服务器配置错误，主域向新位置发送了 302 重定向。我们解决了这个问题。清空浏览器缓存时，现在一切正常。

对于不清空缓存的“普通”客户端：302 重定向在浏览器中保留多长时间？

我正在寻找默认设置下每个主要浏览器（Chrome、Firefox、Safari、Opera、Edge、IE 12）的**特定缓存时间（如果有）。**

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-08-31T09:53:33.650

除非Web 服务器还返回一个`Cache-Control`or标头，否则它根本不应该被缓存。`Expires`根据[RFC 2616，第 10.3.3 节 302 找到](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.3)

> 请求的资源临时驻留在不同的 URI 下。由于重定向有时可能会改变，客户端应该继续使用 Request-URI 来处理未来的请求。此响应仅在由 Cache-Control 或 Expires 标头字段指示时才可缓存。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2015-04-13T17:37:46.717

Jon Lin 在这里引用的标准使用“SHOULD”，它[不如](https://www.ietf.org/rfc/rfc2119.txt)RFC 术语中的“MUST”强。这不仅仅是一个理论上的分歧。例如，Cloudflare[*会*缓存重定向](https://support.cloudflare.com/hc/en-us/articles/200168326-Are-301-and-302-redirects-cached-by-CloudFlare-)：

> 如果没有提供缓存标头（没有 Cache-Control 或 Expires）并且 url 是可缓存的（.jpg、.css、.js 等），则 CloudFlare 缓存 301 和 302。我们将 301 缓存几个小时，将 302 缓存更短的时间（约 20 分钟）。

因此，您应该确保可以处理它或使用显式标头（例如`Cache-Control: private, no-cache`）来指导浏览器和中间体对它进行缓存。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2018-12-13T15:33:00.807

使用 Steve Sounder 的[重定向缓存测试工具](http://stevesouders.com/tests/redirects/index.php)（感谢@LeonidVasilev），结果似乎不是预期的。如果没有过期标头或 cookie，结果如下：

**Chrome 71**：未缓存 ✔<br> **Firefox 64**：已缓存 ✕<br> **Safari 12**：已缓存 ✕

因此，尽管[RFC 2616 第 10.3.3 302 节 Found](http://www.w3.org/Protocols/rfc2616/rfc2616-sec10.html#sec10.3.3)声明了什么，但并非所有浏览器都遵循这些准则或可能被视为预期行为:(

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2020-07-20T08:59:43.110

添加

```
Cache-Control: no-store 
```

响应的标头，它不会被缓存。截至 2020 年 7 月 20 日，所有主流浏览器都尊重这一点。

不过要小心中间缓存（代理/CDN）：如果中间人的最小 TTL 不为零，那么无论您做什么，您的响应都会被缓存。参见例如：

[管理内容在边缘缓存中的保留时间（过期）](https://docs.aws.amazon.com/AmazonCloudFront/latest/DeveloperGuide/Expiration.html)

表的最后一行（*Origin 向对象添加了 Cache-Control: no-cache、no-store 和/或私有指令*）。在这种情况下，防止缓存的唯一方法是将 TTL 设置为 0（`Cache-Control: no-store`当然还要添加标头）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T09:53:06.053

这取决于各个客户端的浏览器缓存设置：IE 有一个“从不”检查新页面的选项，它对重定向具有相同的效果。
AFAIR IE 的“自动”设置（默认？）也好不到哪里去。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-12-07T07:29:33.143

**火狐**

它不应该被缓存，根据[错误 812167](https://bugzilla.mozilla.org/show_bug.cgi?id=812167)

# django - django授权

> ID：12212840
> 
> 赞同：0
> 
> 时间：2012-08-31T09:45:46.710
> 
> 标签：django, authentication

需要授权。阅读了几篇文章，阅读了所有内置机制，接受并去做。他开始做。

注册拿了module `django-registration`，自己写了Login，用了lib `django.contrib.auth`。如下：我在登录页面登录，似乎一切都很好，但是当我转到另一个页面时，授权奇迹般地消失了。据我了解，授权没有写入会话，我只在登录页面获得身份验证。

我做了以下事情：

1.  在登录页面上授权。
2.  将整个`User`对象记录到`session`.
3.  在每个页面上，我在页面加载时检查的第一件事是是否有`User`会话数据，如果有，则从那里读取。

源代码如下所示：

```
def login_user(request):
state = "Please log in below..."
username = password = ''
if request.POST:
    username = request.POST.get('username')
    password = request.POST.get('password')

    user = authenticate(username=username, password=password)
    if user is not None:
        if user.is_active:
            login(request, user)
            state = "You're successfully logged in!"
        else:
            state = "Your account is not active, please contact the site admin."
    else:
        state = "Your username and/or password were incorrect."
    request.session['user'] = user
    return render(request,'auth.html',{'state':state, 'username': username, 'info':'info'}) 
```

和我从中阅读的页面`session`：

```
@csrf_protect
def home(request):
    if "user" in request.session:
        user = request.session['user']
    else:
        user = None
    return render_to_response('home.html', {'user_name' : user}, context_instance = RequestContext(request)) 
```

但我认为，这是一种非常愚蠢的方式。你能推荐一个更合适的方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:23:18.923

我不确定你想要达到什么目标。用户登录后，您就可以`request.user.is_authenticated()`访问以检查您的视图中是否经过身份验证`request.user`的用户或访问用户本身。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:35:20.027

您不需要将用户添加到会话中；这是由身份验证中间件自动完成的。

您也不需要手动检查用户；使用[`login_required`装饰器](https://docs.djangoproject.com/en/dev/topics/auth/#the-login-required-decorator)。

结合这一点，您的登录视图变为：

```
def login_user(request):
    state = "Please log in below..."
    username = password = ''
    if request.POST:
        username = request.POST.get('username')
        password = request.POST.get('password')
    else:
        return redirect('login/')

    user = authenticate(username=username, password=password)
    if user is not None:
        if user.is_active:
            login(request, user)
            state = "You're successfully logged in!"
        else:
            state = "Your account is not active, please contact the site admin."
    else:
        state = "Your username and/or password were incorrect."
    return render(request,'auth.html',{'state':state, 'info':'info'}) 
```

在您的其他观点中：

```
from django.contrib.auth.decorators import login_required
from django.shortcuts import render

@csrf_protect
@login_required
def home(request):
    return render(request, 'home.html') 
```

在您的模板中（来自[文档](https://docs.djangoproject.com/en/dev/topics/auth/#authentication-data-in-templates)）：

```
{% if user.is_authenticated %}
    <p>Welcome, {{ user.username }}. Thanks for logging in.</p>
{% else %}
    <p>Welcome, new user. Please log in.</p>
{% endif %} 
```

# c# - 在网格后面绘图

> ID：12212843
> 
> 赞同：0
> 
> 时间：2012-08-31T09:45:59.813
> 
> 标签：c#, wpf, xaml, grid, drawing

我正在尝试绘制一个在网格文本后面旋转 45° 的矩形，并且网格位于 TreeViewItem 内。到目前为止，没有任何事情可以让它正确......我也一直在尝试使用网格的背景，但那里没有结果。这是到目前为止我得到的代码：

```
<Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="TreeViewItem">
                <Grid Margin="0,5,0,0">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="*" />
                        <RowDefinition Height="*" />
                    </Grid.RowDefinitions>
                    <Rectangle Name="rect" Stretch="Uniform" Fill="{StaticResource ItemAreaBrush}" 
                                   Stroke="{StaticResource ItemBorderBrush}" StrokeThickness="1">
                        <Rectangle.RenderTransform>
                            <RotateTransform CenterX=".5" CenterY=".5" Angle="45" />
                        </Rectangle.RenderTransform>
                    </Rectangle>
                    <ContentPresenter ContentSource="Header" Grid.Row="0" />
                    <ItemsPresenter Grid.Row="1" />
                </Grid>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsSelected" Value="true">
                        <!--<Setter TargetName="Bd" Property="Panel.Background" Value="{StaticResource SelectedItemAreaBrush}" />-->
                        <Setter TargetName="rect" Property="Rectangle.Stroke" Value="{StaticResource SelectedItemBorderBrush}" />
                        <Setter TargetName="rect" Property="Rectangle.StrokeThickness" Value="2" />
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter> 
```

任何人都可以帮助我解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:03:29.380

你是不是这个意思：

```
<ControlTemplate TargetType="TreeViewItem">
    <Grid Margin="0,5,0,0" Background="Orange">
        <Grid.RowDefinitions>
            <RowDefinition Height="*" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Rectangle Name="rect"
                    Stretch="Uniform" Fill="Cyan" Stroke="Red" StrokeThickness="1"
                    Grid.Row="0">
            <Rectangle.LayoutTransform>
                <RotateTransform CenterX=".5" CenterY=".5" Angle="45" />
            </Rectangle.LayoutTransform>
        </Rectangle>

        <ContentPresenter ContentSource="Header" Grid.Row="0" />

        <ItemsPresenter Grid.Row="1" />
    </Grid>

    <ControlTemplate.Triggers>
        <Trigger Property="IsSelected" Value="true">
            <Setter TargetName="rect" Property="Rectangle.Stroke" Value="{StaticResource SelectedItemBorderBrush}" />
            <Setter TargetName="rect" Property="Rectangle.StrokeThickness" Value="2" />
        </Trigger>
    </ControlTemplate.Triggers>
</ControlTemplate> 
```

![项目模板截图](../Images/2783cb7f5a7954bd342dfc59ed4e83bd.png)

请注意，我将 RenderTransform 更改为 LayoutTransform - 前者导致矩形“水平”布局，并且仅在放置其他所有内容后才转身，因此底部“溢出”。LayoutTransform 由 CPU/GPU 处理有点慢，但它实际上处理了新大小的转换后。另外，请注意，现在使用 LayoutTransform 矩形容易居中/边距/等

# c++ - lua/C++ 对象与静态成员的绑定

> ID：12212846
> 
> 赞同：0
> 
> 时间：2012-08-31T09:46:14.417
> 
> 标签：c++, c, binding, static, lua

我对如何将 C++ 类转换为 Lua 类的方式非常感兴趣。我发现了一个很棒的助手类——LunaWrapper（[在这里描述](http://lua-users.org/wiki/LunaWrapper)）

但似乎，在 Lua 中，类本身唯一持续存在的东西（这里不讨论结果对象！）只是构造函数。也就是说，如果有的话，我不能调用任何静态函数。（例如，让我们在 LunaWrapper 页面上描述的示例中添加一个函数：

```
`static bool Foo::bar(const char* text)
{
    printf("in bar\n");
}` 
```

`)

因此，例如，我想在 Lua 中做什么：

```
 local foo = Foo()
foo:foo()
Foo.bar() -- this should output "in bar", but this wont work! And this is what I want.
foo.bar() -- this should also output "in bar", but this is probably going to work. 
```

我怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-03T07:54:56.433

玩了一会儿之后，我想到了这个：

首先，向 Luna 添加另一个结构并在您的类中的另一个表中定义静态函数（为了匹配 LunaWrapper 代码的样式，您可以使用任何您喜欢的方式获取该信息：

```
struct StaticRegType {
  const char *name;
  int(*mfunc)(lua_State*); // pointers to static members are C-style func pointers
                           // and are incompatible with int(T::*mfunc)() ones
};
...
static const Luna<Foo>::StaticRegType StaticRegister[];
...
const Luna<Foo>::StaticRegType Foo::StaticRegister[] = {
   { "bar", &Foo::bar },
   { 0 }
}; 
```

现在是有趣的部分。不幸的是，事实证明你必须改变相当多的 LunaWrapper 才能让它做你想做的事。我们将创建一个名为 Foo 的表并使用 __call 方法附加一个元表，而不是创建一个名为 Foo 的函数来调用构造函数，以便我们维护 Foo() 构造函数语法（这在 Luna::Register 中） ：

```
lua_newtable(L);
... // here we'll insert our manipulations of the table
lua_setglobal(L, T::className); // setglobal will pop the table off the stack
                                // so we'll do whatever we want to it and then give it
                                // a name to save ourselves the extra lookup 
```

创建元表并添加构造函数和垃圾回收函数：

```
luaL_newmetatable(L, T::className);
lua_pushstring(L, "__gc");
lua_pushcfunction(L, &Luna<T>::gc_obj);
lua_settable(L, -3);
lua_pushstring(L, "__call");
lua_pushcfunction(L, &Luna<T>::constructor);
lua_settable(L, -3); 
```

现在我们需要添加我们所有的方法。我们将使用 __index 元方法 - 两个选项：1\. 将 __index 设置为一个 cfunction，它采用我们尝试从 lua 调用的名称并运行该函数，或者 2\. 将 __index 设置为包含我们所有函数的表（有关这两个选项的更多信息，请参阅[此内容）。](http://www.lua.org/pil/13.4.1.html)我更喜欢后者，因为它使我们免于循环遍历所有函数、进行讨厌的字符串比较，并且我们可以做一些复制粘贴并重用 Luna 的闭包。然而，它确实需要我们创建一个新`staticThunk`函数来处理我们的新方法：

```
static int staticThunk(lua_State *L) {
  int i = (int)lua_tonumber(L, lua_upvalueindex(1));
  return (*(T::StaticRegister[i].mfunc))(L);
} 
```

请注意，它相当简单，因为我们不需要获取我们正在调用函数的对象（我也很喜欢模板抽象，让编译器处理为我们的对象触发正确函数的细节，但这只是 Luna 作者的一个很好的决定；））。

现在我们需要为 __index 创建一个表并向其中添加方法。

```
lua_pushstring(L,"__index"));
lua_newtable(L);
// adding the normal methods is the same as in Luna (the for-loop over T::Register)
// add the static methods by going over our new StaticRegister array (remember to use
// staticThunk for them and thunk for the members
lua_settable(L, -3); // push the __index table to the metatable 
```

快到了……这是元表的诡计——我们已经构建了 Foo 表（即使它还没有真正命名为 Foo），现在我们将设置为我们的对象构建的元表，因为它也是元表的。这样我们可以同时做`Foo.bar()`和`local foo = Foo(); foo.bar()`：

```
lua_setmetatable(L, -2); // at this point the stack contains our metatable right under
                         // our table
lua_setglobal(L, T::className); // name the darn thing 
```

您需要做的最后一件事是摆脱 Luna::constructor 中与实际构造对象无关的任何内容（额外的好处 - Register 实际上注册对象类型，而构造函数实际上只是分配它，如果你问我）。我们将原来在这里的循环移到了 Register 函数中。我们完成了！

注意：此解决方案的一个缺点是，虽然为方便起见，它允许您同时调用两者`Foo.bar()`，`foo.bar()`也允许您`Foo.foo()`调用C/C++ 程序，但在 Lua 中会因运行时错误而失败。如果您想摆脱这种行为，您必须为不包含成员函数的 Foo 表创建一个元表，并为您创建的包含它们的对象创建另一个元表。`

# javascript - 如何将表单的值检索到 Windows 8 Metro javascript 中的对象中？

> ID：12212852
> 
> 赞同：2
> 
> 时间：2012-08-31T09:46:29.790
> 
> 标签：javascript, windows-8, microsoft-metro, winjs

我正在用 HTML5/Javascript 构建一个 Windows 8 Metro 应用程序，并且我有几个屏幕，用户需要在其中填写表格。根据文档（[http://msdn.microsoft.com/en-us/library/windows/apps/hh700358.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh700358.aspx)）和一些测试，WinJS 中的数据绑定似乎只是从 Javascript 到 UI。如何获取用户在我可以发布到服务器的 Javascript 对象中输入的内容？

这是我到目前为止所尝试的：

我的 HTML 表单：

```
<div id="createFormDiv" class="hide">
<form id="createForm" onsubmit="return false;">
    <fieldset class="formSection entityForm">
        <legend>Create New Address</legend>
        <table class="fields">                      
            <tr><td>Line 1</td><td><input id="i2" type="text" data-win-bind="value: Line1" /></td></tr>                     
            <tr><td>Line 2</td><td><input id="i3" type="text" data-win-bind="value: Line2" /></td></tr>                     
            <tr><td>City</td><td><input id="i4" type="text" data-win-bind="value: City" /></td></tr>                        
            <tr><td>Zip</td><td><input id="i5" type="text" data-win-bind="value: Zip" /></td></tr>                      
            <tr><td>Country</td><td><input id="i6" type="text" data-win-bind="value: Country" /></td></tr>                      
            <tr><td>Contact</td><td><input id="i7" type="text" data-win-bind="value: Contact" /></td></tr>                                              
        </table>
        <button id="cancelCreateButton" class="button">Cancel</button>
        <button id="createButton" type="submit" class="button">Create</button>
    </fieldset>
</form> 
```

在我的 JS 中，我创建了一个绑定到表单的空对象，订阅了 createButton 上的 click 事件，并期望检索一个填充了更改的对象。这是代码：

```
var element = document.getElementById("createFormDiv");
var data = {
    Line1: "",
    Line2: "",
    City: "",
    Zip: "",
    Country: ""
};
WinJS.Binding.processAll(element, data);
_bindingSource = WinJS.Binding.as(data); 
```

进而：

```
function onCreateCommandClick(args) {
    var Line2 = _bindingSource.getProperty("Line2");
} 
```

问题是， Line2 属性总是有它的初始值。

有没有办法从 WinJS 中的 HTML 表单中检索 JavaScript 对象，或者我是否必须单独解析每个输入值？如果是这样，最好的方法是什么？

谢谢，卡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:23:07.713

与此同时，这就是我正在做的事情：

```
var form = document.getElementById("createForm");
var data = { 
  Line1: form.i2.value, 
  Line2: form.i3.value, 
  City: form.i4.value, 
  Zip: form.i5.value, 
  Country: form.i6.value, 
  Contact: form.i7.value,
}; 
```

只要您有使用 value 属性的输入，这就会很好。对于其他复选框，例如复选框或文本区域，请使用适当的属性而不是值（例如检查复选框）。

如果有人有更好的解决方案，我很想听听 :)

希望这会有所帮助，卡尔

# php - 在 AJAX 调用中获取重定向的 php 页面名称

> ID：12212853
> 
> 赞同：0
> 
> 时间：2012-08-31T09:46:36.037
> 
> 标签：php, javascript, ajax

在下面的代码段中，如果请求的“profile.php”重定向到另一个页面，如“login.php”，如何识别。

```
x=new XMLHttpRequest();
x.open("GET","profile.php",true);
x.onreadystatechange=function(){
if(x.readyState==4&&x.status==200)
{
alert("Requested url(profile.php) is loaded");
document.getElementById('content').innerHTML=x.responseText;
}
} 
```

我们通过responseText成员获取页面内容，是否可以获取请求对象的url或者文件名。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T09:50:35.137

```
if(x.status>300 && x.status<400) alert(x.getResponseHeader("Location")); 
```

[更多关于状态含义](http://en.wikipedia.org/wiki/HTTP_response_codes)

# php - 无法在php中获取具有重复值的数组的键

> ID：12212863
> 
> 赞同：1
> 
> 时间：2012-08-31T09:47:04.510
> 
> 标签：php, arrays, associative-array

经过一些编码后，我得到了一个像这样的动态数组。根据数据，它可能会随着值的增加而增加。但以下是一个示例。

```
Array ( 
    [11-23-1] => 5 
    [17-29-2] => 5 
    [9-21-1] => 3 
    [10-52-2] => 5 
    [17-30-2] => 3
  ) 
```

在我得到这个数组之后，我想得到以下格式的数组 - 上面数组的值作为键，键作为值，具有唯一键。像 -

```
Array ( 
    5 => Array ( [0] => [11-23-1]
                 [1] => [17-29-2] 
                 [2] => [10-52-2] )

    3 => Array ( [0] =>[9-21-1] 
                 [1] => [17-30-2]) 
  ) 
```

我该怎么做 ？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:52:05.620

```
<?php
$source = Array ( 
    '11-23-1' => 5,
    '17-29-2' => 5, 
    '9-21-1' => 3,
    '10-52-2' => 5, 
    '17-30-2' => 3
);

$result = array();
foreach($source as $k=>$v) {
    if ( !isset($result[$v]) ) {
        $result[$v] = array();
    }
    $result[$v][] = $k;
}
var_export($result); 
```

印刷

```
array (
  5 => 
  array (
    0 => '11-23-1',
    1 => '17-29-2',
    2 => '10-52-2',
  ),
  3 => 
  array (
    0 => '9-21-1',
    1 => '17-30-2',
  ),
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:53:04.213

逆转

```
$array = array ('11-23-1' => '5',
                '17-29-2' => '5',
                '9-21-1' => '3',
                '10-52-2' => '5',
                '17-30-2' => '3');

$newArray = array();            
foreach($array as $num => $one){
    $newArray[$one][] = $num;
}

var_export($newArray); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:54:51.233

给你，一切都打包好了：）

```
<?
$arr = array (
    '[11-23-1]' => 5,
    '[17-29-2]' => 5,
    '[9-21-1]' => 3,
    '[10-52-2]' => 5,
    '[17-30-2]' => 3,
);

function rotateWithDuplicates($arr) {
    $result = array();

    foreach ($arr as $key => $value) {
        if (!array_key_exists($value, $result)) {
            $result[$value] = array();
        }
        $result[$value][] = $key;
    }

    return $result;
}

var_dump(rotateWithDuplicates($arr)); 
```

# python - 应该是一种轻松获取文件路径的方法吗？

> ID：12212866
> 
> 赞同：0
> 
> 时间：2012-08-31T09:47:14.633
> 
> 标签：python, filepath

例如，我在静态文件夹中有静态文件，文件从根目录的相对路径是

```
/static 
```

根路径是 D:\proj\src

如果我想加载 xml 文件，我应该只给出相对路径，例如

```
/static/xml/a.xml. 
```

我不需要更改字符串，添加 '../' 或 '../../' 取决于我所在的模块，这很愚蠢，所以你能不能给我一个更好的方法只使用标准自由？

项目 abs 根路径 + 相对路径应该没问题，但我尝试过但失败了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-25T14:12:57.467

如果您有文件名的完整路径，例如 /static/xml/a.xml

然后你可以像这样在 python 中很容易地到达它的不同部分

```
import os
fullFilePathName = '/static/xml/a.xml'
#
# the filename
#
theFilename = os.path.basename(fullFilePathName)

#
# The path to the file
#
thePath = os.path.dirname(fullFilePathName)

#
# Join the two together to form a path
#
fullName = os.path.join(thePath, theFileName) 
```

# spring - 使用 intellij 指定数据源 bean 没有选择实现的接口

> ID：12212868
> 
> 赞同：1
> 
> 时间：2012-08-31T09:47:25.560
> 
> 标签：spring, intellij-idea, datasource

![我收到这个错误](../Images/a2551cc58ef245b216b9e78f17b4eba7.png)

`ComboPooledDataSource``javax.sql.datasource`不允许实现和类型作为属性accorind 得到了intellij。我正在使用完整的弹簧堆栈版本 3.1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:14:20.450

尝试将此属性添加到`dataSource`bean：

```
<b:property name="expectedType" value="javax.sql.DataSource"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-10T03:19:34.860

发生这种情况时，您是否为您的项目指定了任何 JDK？

我遇到了完全相同的问题`dbcp BasicDataSource`。事实证明这是因为我没有为我的项目指定 JDK。设置后，问题就消失了。

# objective-c - iPhone-排序数组

> ID：12212871
> 
> 赞同：0
> 
> 时间：2012-08-31T09:47:45.073
> 
> 标签：objective-c, nsmutablearray, nsarray

我想对我的数组进行排序....在我的数组中，元素的顺序是 dateArray{0,1,2,3,4,5,6,7,8,9,10,11,12,13,14, 15,16,17,18,19}

但我想要这个数组以相反的顺序我用这个代码来反转..

```
dateArray=[[NSMutableArray alloc]initWithArray:[[date reverseObjectEnumerator] allObjects]]; 
```

但它给出了这个输出

```
dateArray=(
9,
8,
7,
6,
5,
4,
3,
2,
19,
18,
17,
16,
15,
14,
13,
12,
11,
10,
1,
0
) 
```

但我想要这个输出 dateArray(19,18,17,16,15,14,13,12,11,10........2,1,0) 我也使用了排序方法，但输出是一样的。我怎样才能做到这一点？？？请帮忙

编辑：

我的数组元素是 NSDocument 目录的内容....

SOLVED 这个问题已经解决了。我不知道根据需要对数组进行排序的确切方法，但我更改了子路径名称。它给出了正确的输出..

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:55:38.563

我假设您的数组包含对象而不是您的问题中的数字。这是一个按升序或降序对数组进行排序的示例。

```
NSArray *array = [[NSArray alloc]  initWithObjects:@"5",@"1",@"0",@"3",@"2",@"4", nil];

//or

NSArray *array = [[NSArray alloc] initWithObjects:[NSNumber numberWithInt:5], [NSNumber numberWithInt:1], [NSNumber numberWithInt:0], [NSNumber numberWithInt:3], [NSNumber numberWithInt:2], [NSNumber numberWithInt:4], nil];

NSSortDescriptor *sort = [[NSSortDescriptor alloc] initWithKey:nil ascending:NO]; //YES, for ascending
NSLog(@"Sorted array %@",[array sortedArrayUsingDescriptors:[NSArray arrayWithObjects:sort, nil]]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:55:06.007

你需要使用

```
-[NSArray sortedArrayUsingSelector:] 
```

或者

`-[NSMutableArray sortUsingSelector:]`并将@selector(compare:) 作为参数传递。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:01:07.797

三种方式（我相信很多其他方式）。最简单的方法（[感谢这个 SO question](https://stackoverflow.com/questions/586370/how-can-i-reverse-a-nsarray-in-objective-c)），是使用 reverseObjectEnumerator：

```
NSArray *dateArrayReversed = [[dateArray reverseObjectEnumerator] allObjects]; 
```

或者您可以使用排序描述符（混乱）：

```
NSArray *arrayOne = [NSArray arrayWithObjects:@1,@2,@3,@4,@5,@6,@7,@8,@9,@10,@11,@12,@13,@14,@15,@16,@17,@18,@19, nil];

NSSortDescriptor* sortOrder = [NSSortDescriptor sortDescriptorWithKey: @"self" ascending: NO];
    NSArray *arrayTwo =  [arrayOne sortedArrayUsingDescriptors: [NSArray arrayWithObject: sortOrder]]; 
```

另一种方法是为反转数组创建一个类别。请参阅[这个](https://stackoverflow.com/questions/586370/how-can-i-reverse-a-nsarray-in-objective-c) SO question 以获得一个很好的例子。

[如何在 Objective-C 中反转 NSArray？](https://stackoverflow.com/questions/586370/how-can-i-reverse-a-nsarray-in-objective-c)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T11:04:52.350

如果您想使用字符串而不是数字，则应使用以下格式进行正确排序：

`20`, `19`, ... `10`, `09`, `08`, ... `02`, `01`,`00`

因此，您只需`0`为每个数字添加一个前导。如果它们是字符串，您可以仅将它们排序为字符串，而不是数字，这就是需要前导零的原因。

* * *

顺便说一句，最简单的解决方案是**重命名子路径**，然后是字符串所在的位置，并且您无需更改应用程序中的任何其他内容即可获得正确的顺序。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-01T11:48:52.473

这很容易完成，您可以通过 NSSortDescriptor 对数组进行排序，但我将向您展示一个小技巧。这是代码

```
NSMutableArray *yourArray=[[NSMutableArray alloc] initWithObjects:@"1",@"5",@"10",@"6",@"3",@"11", nil];

NSMutableArray *array=[[NSMutableArray alloc] init];
int count=[yourArray count];
for (int i=0; i<count; i++) {
    [array addObject:[NSMutableDictionary dictionaryWithObjectsAndKeys:[NSNumber numberWithInt:[[yourArray objectAtIndex:i]intValue]],@"val", nil]];
}

if([array count] > 0){
    NSSortDescriptor * descriptor = [[[NSSortDescriptor alloc] initWithKey:@"val"
                                                                 ascending:NO] autorelease];
    NSArray * sortedArray = [array sortedArrayUsingDescriptors:
                             [NSArray arrayWithObject:descriptor]];
    [array removeAllObjects];
    [array addObjectsFromArray:sortedArray];
}
[yourArray removeAllObjects];
[yourArray release];
NSLog(@"sorted array=%@",array); 
```

我在这做的是首先在可变字典上添加 NSNumber 形式的字符串对象，然后将此字典添加到另一个数组中。现在使用 NSSortDescriptor 以升序或降序对数组进行排序。

# python - Pygame - transform.rotate 结果使用大量 RAM

> ID：12212872
> 
> 赞同：2
> 
> 时间：2012-08-31T09:47:46.623
> 
> 标签：python, memory, pygame, ram

所以，我正在制作这个你有手电筒的小游戏。手电筒的分辨率相当高，所以我需要为每个角度预缓存它的 360 个副本，以避免实时旋转它，这会占用大量的计算能力。图像是 1002x246 和 .png，但非常简单，所以它只占用了 3.95KB 的硬盘驱动器。但是当我在游戏中制作 360 个副本并将它们添加到列表中时，它们会占用大约 800MB 的 RAM。这是相当多的。为什么？我怎样才能减少它？

编码：

```
def flashlightinit():
    init.flashlights = []
    fl = files.flashlight
    for i in range(360):
        init.flashlights.append(pygame.transform.rotate(fl, -i)) 
```

手电筒图像经过转换（）处理，没有颜色键或 alpha 通道。

显示手电筒：

```
def flashlightupdate(angle):
    screen.blit(init.flashlights[angle], (340 - init.flashlights[angle].get_width()/2, 360 - init.flashlights[angle].get_height()/2)) 
```

角度是度数，由鼠标的位置和玩家的位置计算得出。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T12:01:41.157

我将把它作为答案发布，因为将一些评论组合在一起你可能会解决内存和性能问题。

高 RAM 使用率是由于图像数量（360），即使在磁盘上，也将占用*至少*266MB，正如 Dikei 指出的那样，您必须考虑将图像表示为 pygame 对象，因此使用的内存比原始位图。

为了避免使用 800MB 的 RAM，你显然必须避免创建所有这些图像。

为了保持良好的性能，您可以只缓存一些 0-90° 度的图像，然后使用比旋转快得多的翻转操作来构建其他旋转角度的图像（正如 halex 指出的那样）。

通过这种方式，您肯定可以消耗大约 1/4 的当前 RAM，并且仍然具有相当的渲染速度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-04T01:58:44.467

如果你必须有这么多的旋转，创建一个 pyOpenGL 矩形，将纹理设置为你的手电筒。然后旋转那个。

您可以将 pygame 用于窗口创建/输入，将 pygame 表面用于 OpenGL 纹理，或者使用 Pyglet 或其他解决方案。

# c# - 在 RichTextBox 中添加软返回

> ID：12212874
> 
> 赞同：3
> 
> 时间：2012-08-31T09:47:54.820
> 
> 标签：c#, richtextbox

如何在富文本框中添加软返回？

当我在 Microsoft Word `Shift`+中按下时`Enter`，光标向下移动到下一行，但它仍然是同一段落，并且段落格式也延续了该文本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T18:14:32.273

我相信这是一个 Vertical Tab `(char)11`。

# macos - 咖啡脚本安装

> ID：12212875
> 
> 赞同：9
> 
> 时间：2012-08-31T09:47:58.993
> 
> 标签：macos, shell, coffeescript, installation

我无法在我的 Macbook 上安装 CoffeeScript。相同的命令在我的 iMac 上运行良好。

```
$ surganov:~ surganov$ sudo npm install coffee-script -g
npm http GET https://registry.npmjs.org/coffee-script
npm http 304 https://registry.npmjs.org/coffee-script
/usr/local/share/npm/bin/coffee -> /usr/local/share/npm/lib/node_modules/coffee-script/bin/coffee
/usr/local/share/npm/bin/cake -> /usr/local/share/npm/lib/node_modules/coffee-script/bin/cake
coffee-script@1.3.3 /usr/local/share/npm/lib/node_modules/coffee-script

$ surganov:~ surganov$ coffee
-bash: coffee: command not found 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-31T09:50:07.523

如果要全局访问 coffescript 二进制文件，则需要安装它：

```
npm install -g coffee-script 
```

然后将安装目录添加到您的`PATH`. 自动化的好方法是使用[nvm](https://github.com/creationix/nvm)。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-30T11:28:44.350

我有同样的问题。当使用 '-g' 安装时，npm 安装到 /usr/local/share/npm 所以你不能使用，例如 'coffee' 命令。您可以使用以下命令检查 npm install node_modules 的位置：

```
npm prefix -g 
```

如果它不是 /usr/local 那么你可以`npm config edit`用来编辑前缀。它将在您的根目录中创建一个 .npmrc 文件（如果它不存在）。否则，使用文本编辑器打开文件并更改前缀。更多信息：[npm 配置](https://npmjs.org/doc/config.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-28T11:52:34.940

*   找到你的coffeescript bin目录（通过输入locate coffee）
*   编辑您的 ~/.profile 文件并添加： export PATH=/usr/local/lib/node_modules/coffee-script/bin::$PATH （或您的咖啡脚本/bin 所在的任何位置）
*   保存配置文件
*   键入 source ~./profile （仅这次）以加载新路径
*   现在你有了咖啡命令

# python - python如何将数据与pprint或其他模块对齐

> ID：12212878
> 
> 赞同：0
> 
> 时间：2012-08-31T09:48:08.830
> 
> 标签：python, pprint

我有一个实时（每秒）显示数据的 python 脚本。我想对齐这些。我已经尝试使用 pprint 模块，但它不起作用。

示例：我的脚本显示如下：

Server1 Sessions/s-----------Server2 Sessions/s

```
 64                                20
    0                                20
    64                                20
    64                                20
    64                                20
    0                                19
    128                                19
    0                                19
    256                                19
    192                                19 
```

有可能得到这个结果吗？

Server1 Sessions/s----------Server2 Sessions/s

```
 64                               20
    0                                20
    64                               20
    64                               20
    64                               20
    0                                19
    128                              19
    0                                19
    256                              19
    192                              19 
```

每个值每秒打印一次。我在列表或字典中没有所有这些。

我要显示的代码：

```
print("Server1 Sessions/s-----------------Server2 Sessions/s")
while i < self.timer:
    print("        " + str(self.serverrqs()*int(self.nbpro)) + "                                "+ str(self.servernbrqs()))
    i += 1
    sleep(1) 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:04:27.497

它应该是由格式字符串中的'-'指定的左对齐

```
print('        %-40s%s' % (self.serverrqs()*int(self.nbpro), self.servernbrqs())) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T10:04:28.013

您可以按摩以下内容以适应：

```
from random import randint

for line in range(4):
    value1, value2 = randint(0, 16)*16, randint(19,20)
    print("    %-4i        %-4i" % (value1, value2)) 
```

其输出如下所示：

```
 144           20
    0             20
    96            20
    128           19 
```

Google for：Python 字符串插值，了解更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T09:52:35.087

您可以只使用字符串格式：

```
>>> '%40s' % 'ab'
'                                      ab' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:12:10.530

使用新式 (>=2.7)[格式](http://docs.python.org/dev/library/string.html#string-formatting)

```
def format_row(leftval, rightval, width=30, fill=u' '):
    """"""
    row = u'        {0}{1:{fill}>{width}}'
    width = width - len(unicode(leftval))
    return row.format(leftval, rightval, fill=fill, width=width)

print format_row(1, 20)
print format_row(100, 20)
print format_row(100, 200) 
```

# asp.net - RequiredFieldValidator 在更新面板中工作异常

> ID：12212881
> 
> 赞同：1
> 
> 时间：2012-08-31T09:48:25.030
> 
> 标签：asp.net, vb.net, updatepanel, requiredfieldvalidator

我有一个带有文本框和 requiredfieldvalidator 以及几个按钮的更新面板。

在页面加载时，您会看到一个标签和一个按钮。按下按钮时，文本框和验证器会显示（与另一个按钮一起）。

显示的基本变化工作正常。但是，即使填充了文本框，我的验证器（设置为动态）也会显示其错误消息。如果填充了文本框，按下提交按钮确实有效，但我的代码显然有些地方不太对劲。

```
 <asp:UpdatePanel ID="UpdatePanel1" runat="server">
      <ContentTemplate>
        <%
        If DoNameUpdate = "" then
        %>
          <div class="formrow">
            <div class="standardlabel">Name: </div>
            <div class="fakeformfield"><%=TheName%></div>
            <div class="buttonclass"><asp:ImageButton ID="ImageButton1" ImageUrl="/images/changebutton.gif" alt="Change" CssClass="formsub" runat="server" /></div>
          </div>
        <%
        Else
        %>
        <div class="formrow">
          <asp:Label AssociatedControlID="client_name" CssClass="standardlabel" runat="server" Text="Name "></asp:Label><span class="mandatory">*</span>
          <asp:TextBox ID="client_name" runat="server" MaxLength="255" CssClass="textboxborder"></asp:TextBox><BR>
          <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" ControlToValidate="client_name" Display="Dynamic" CssClass="error" ErrorMessage="Required" InitialValue=""></asp:RequiredFieldValidator>
          <div class="buttonclass"><asp:ImageButton ID="ImageButton2" ImageUrl="/images/savebutton.gif" alt="Save Changes" CssClass="formsub" runat="server" /></div>
        </div>
        <%
        End if
        %>
      </ContentTemplate>
  </asp:UpdatePanel> 
```

和代码隐藏...

```
Protected Sub ImageButton1_Click(ByVal sender As Object, ByVal e As System.Web.UI.ImageClickEventArgs) Handles ImageButton1.Click
    Dim myReader As IDataReader = CType(SqlDataSource1.Select(DataSourceSelectArguments.Empty), IDataReader)
    If myReader.read then
      client_name.text = myReader("ClientName")
    End if
    myReader.close
  DoNameUpdate = "val"
End Sub
Protected Sub ImageButton2_Click(ByVal sender As Object, ByVal e As System.Web.UI.ImageClickEventArgs) Handles ImageButton2.Click
  SqlDataSource2a.update()
  Dim myReader As IDataReader = CType(SqlDataSource1.Select(DataSourceSelectArguments.Empty), IDataReader)
  If myReader.read then
      TheName = myReader("ClientName")
  End if
  myReader.close
  DoNameUpdate = ""
End Sub 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T09:05:25.227

在自定义事件上验证更新面板内的验证器。
您可以尝试使用 jquery（或其他事件 'click'、'change'、'keypress'、'keyup' 等）对 'blur' 事件调用验证。例如：

```
 function TextBoxValidate() {
    $('input:[type="text"]:[id*="client_name"]').each(function () { $(this).on('blur', function () { var txtId = this.id; $('span').each(function () { if (this.controltovalidate == txtId) ValidatorValidate(this); }); }); }); 
}
Sys.WebForms.PageRequestManager.getInstance().add_pageLoaded(TextBoxValidate); 
```

只需在您的 javascript 文件中添加此代码示例并包含 jquery 库

# iphone - iOS 银色 UI 元素

> ID：12212882
> 
> 赞同：1
> 
> 时间：2012-08-31T09:48:32.793
> 
> 标签：iphone, ios, ipad, user-interface

是否有任何 Apple 提供的方法来创建带有银色元素的 UI，例如在 iPhoto 或 WWDC 应用程序中？我想避免使用自定义图像创建自定义 UI。示例： [http ://cdn.macrumors.com/article-new/2012/05/wwdc_2012_app.jpg](http://cdn.macrumors.com/article-new/2012/05/wwdc_2012_app.jpg)

# iphone - iPhone iOS 4.3.3 上的 Twiiter

> ID：12212884
> 
> 赞同：0
> 
> 时间：2012-08-31T09:48:42.400
> 
> 标签：iphone, ios, twitter

我正在尝试从我的 iOS 应用程序访问 twitter，但我收到了这个错误。我已经在网上搜索过，但找不到解决方案 有人可以帮忙吗？

```
Error Domain=NSURLErrorDomain Code=-1012 "The operation couldn’t be completed. (NSURLErrorDomain error -1012.)" UserInfo=0x81e7c20 {NSErrorFailingURLKey=http://twitter.com/oauth/access_token, NSErrorFailingURLStringKey=http://twitter.com/oauth/access_token, NSUnderlyingError=0x81c5900 "The operation couldn’t be completed. (kCFErrorDomainCFNetwork error -1012.)"}`` 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:06:47.673

从链接获取[Sharkit](http://getsharekit.com/)并在应用程序中使用它

# php - 如何使用 PHP + MySQL Ajax 获取 jQuery 自动完成并传递给 JavaScript

> ID：12212887
> 
> 赞同：3
> 
> 时间：2012-08-31T09:48:47.633
> 
> 标签：php, javascript, mysql, ajax, jquery

我有一个用于自动完成搜索功能的 javascript 代码，它运行良好。但是如果你看下面的代码，搜索功能返回的数据是硬编码的，我想使用 PHP 从 MySQL 获取数据。

任何人都可以帮助我如何将下面的代码转换为使用 PHP 查询来收集数据 MySQL 然后使用结果并将其传递给 javascript？谢谢你。

```
//<![CDATA[
var a1;
var a2;

function InitMonths() {
    a2.setOptions({ lookup: 'January,February,March,April,May,June,July,August,September,October,November,December'.split(',') });
}

function InitWeekdays() {
    a2.setOptions({ lookup: 'Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday'.split(',') });
}

jQuery(function () {

    a1 = $('#query').autocomplete({
        width: 448,
        delimiter: /(,|;)\s*/,
        lookup: 'Andorra,Azerbaijan,Bahamas,Bahrain,Bangladesh,Barbados,Belarus,Belgium,Belize,Benin,Bhutan,Bolivia,Bosnia Herzegovina,Botswana,Brazil,Brunei,Bulgaria,Burkina,etc'.split(',')
    });

    a2 = $('#months').autocomplete({
        width: 448,
        delimiter: /(,|;)\s*/,
        lookup: 'January,February,March,April,May,etc'.split(',')
    });

    $('#navigation a').each(function () {
        $(this).click(function (e) {
            var element = $(this).attr('href');
            $('html').animate({ scrollTop: $(element).offset().top }, 300, null, function () { document.location = element; });
            e.preventDefault();
        });
    });

}); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-31T09:53:54.353

**新的**

基于这个自动完成插件[http://www.devbridge.com/projects/autocomplete/jquery/](http://www.devbridge.com/projects/autocomplete/jquery/)

您的 JavasSript 需要看起来像：

```
//Start auto complete
a1 = $("#query").autocomplete({
    serviceUrl:'search.php', //tell the script where to send requests
    width: 448, //set width

    //callback just to show it's working
    onSelect: function(value, data){ alert('You selected: ' + value + ', ' + data); } 
}); 
```

你的 PHP (search.php) 需要：

```
///
/*** connect to your DB here ***/
///

//retrieve the search term and strip and clean input
$term = trim(strip_tags($_GET['query'])); 

//try to make user input safer
$term = mysqli_real_escape_string($term);

//build a query on the database
$qstring = "SELECT description as value,id FROM test WHERE description LIKE '%".$term."%'";

//query the database for entries containing the term
$result = mysql_query($qstring);

//array to return
$reply = array();
$reply['query'] = $term;
$reply['suggestions'] = array();
$reply['data'] = array();

while ($row = mysql_fetch_array($result,MYSQL_ASSOC))//loop through the retrieved values
{
    //Add this row to the reply
    $reply['suggestions'][]=htmlentities(stripslashes($row['value']));
    $reply['data'][]=(int)$row['id'];
}

//format the array into json data
echo json_encode($reply); 
```

该插件需要像下面这个 PHP 应该提供的 json

```
query:'Li',
suggestions:['Liberia','Libyan Arab Jamahiriya','Liechtenstein','Lithuania'],
data:['LR','LY','LI','LT'] 
```

*注意我没有测试过这个，但它应该没问题！*

* * *

**旧答案**

见这里：[http ://www.simonbattersby.com/blog/jquery-ui-autocomplete-with-a-remote-database-and-php/](http://www.simonbattersby.com/blog/jquery-ui-autocomplete-with-a-remote-database-and-php/)

首先，如果您不使用 jQuery 自动完成插件（作为 jQuery UI 的一部分由 jQuery 支持的插件），请进行设置。[http://jqueryui.com/demos/autocomplete/#remote](http://jqueryui.com/demos/autocomplete/#remote)

你问的是如何彻底改造系统。

首先，您需要使用 Ajax 作为代理通过 PHP 将匹配字符串发送到数据库，然后 PHP 需要返回结果并让 Javascript 读取它们。

所以你需要使用（作为配置）：

```
a1 = $("#query").autocomplete({
source: "search.php"
width: 448  
}); 
```

和类似的东西（作为你的PHP）

```
//connect to your database

$term = trim(strip_tags($_GET['term']));//retrieve the search term that autocomplete sends

$qstring = "SELECT description as value,id FROM test WHERE description LIKE '%".$term."%'";
$result = mysql_query($qstring);//query the database for entries containing the term

while ($row = mysql_fetch_array($result,MYSQL_ASSOC))//loop through the retrieved values
{
        $row['value']=htmlentities(stripslashes($row['value']));
        $row['id']=(int)$row['id'];
        $row_set[] = $row;//build an array
}
echo json_encode($row_set);//format the array into json data 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-13T00:41:10.250

针对上面 Pez 的回答，建议的 PHP 数组结构对我不起作用。我必须像这样构造我的数组：

```
 $reply = array();
    $reply['query'] = $term;
    $reply['suggestions'] = array();
    foreach ($items as $item) {
        $reply['suggestions'][] = array('value' => htmlentities(stripslashes($item['value'])), 'data' => $item['id');
    } 
```

然后

```
return json_encode($reply); 
```

我正在使用此处提供的库的 v1.2.7：[https ://github.com/devbridge/jQuery-Autocomplete](https://github.com/devbridge/jQuery-Autocomplete)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T10:03:43.743

不要使用您使用过的插件，而是使用以下链接中提供的插件：

[jQuery UI 自动完成](http://jqueryui.com/demos/autocomplete/#remote "http://jqueryui.com/demos/autocomplete/#remote")

使用此插件，您可以使用 php 访问数据库中的数据。它肯定会起作用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:03:40.790

由于您已经在使用 jQuery 插件，我假设您了解 jQuery。在下面的代码中，我使用了一个名为 jQuery 的方法`$.post`，该方法用于从服务器加载数据而不重新加载页面（您可能称之为 ajax）

```
$.post('yourphp.php', function(data){
     var obj = JSON.parse(data);
      $('#months').autocomplete({
                width: 448,
                delimiter: /(,|;)\s*/,
                lookup: obj
            });
}); 
```

在你的 php 上：

```
<?php
$months = ['jan', 'feb'...'dec'];
echo json_encode($months);
?> 
```

我真的不知道您使用什么 jQuery 插件来进行自动提示。但是您可能想尝试从 jquery ui 或 html5 中的 datalist[自动完成。](http://jqueryui.com/demos/autocomplete/)虽然不太确定浏览器支持。但这里有一个例子：

```
<datalist id="yo_list">
<?php foreach(){ //loop through the result of your query here ?>
  <option value="<?php echo $somevalue; ?>"><?php echo $somevalue; ?></option>
<?php } ?>
</datalist> 
```

- 没有真正测试代码，所以如果它不起作用或者有什么你不明白的地方，请告诉我。`$.post`如果您想了解更多信息，请访问该方法的链接：http: [//api.jquery.com/jQuery.post/](http://api.jquery.com/jQuery.post/)

# android - 禁用 ScrollView 中包含的 ListView 的滚动

> ID：12212890
> 
> 赞同：36
> 
> 时间：2012-08-31T09:48:58.803
> 
> 标签：android, listview, scrollview

我想为我的用户显示个人资料屏幕。

它必须具有三个视图（2`Buttons`和 a `ImageView`）和 a`ListView`以显示该用户制作的内容。

但是，我不想`ListView`滚动。相反，我希望它尽可能大，并将我的所有视图放入 a`ScrollView`中，因此前三个视图与`ListView`. 当然，这不会按预期工作。

我所有的三件物品都在一个`LinearLayout`. 我想让它们成为 中的第一项`ListView`，但这导致它们可以作为第一项选择，并且必须进行一些不需要的编码。

有没有一种简单的方法可以做到这一点，还是我必须坚持让布局成为我的 ListView 中的第一项？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2015-01-07T11:39:02.407

我为此找到了一个非常简单的解决方案。只需获取列表视图的适配器并在显示所有项目时计算其大小。优点是该解决方案也适用于 ScrollView。

例子：

```
public static void justifyListViewHeightBasedOnChildren (ListView listView) {

    ListAdapter adapter = listView.getAdapter();

    if (adapter == null) {
        return;
    }
    ViewGroup vg = listView;
    int totalHeight = 0;
    for (int i = 0; i < adapter.getCount(); i++) {
        View listItem = adapter.getView(i, null, vg);
        listItem.measure(0, 0);
        totalHeight += listItem.getMeasuredHeight();
    }

    ViewGroup.LayoutParams par = listView.getLayoutParams();
    par.height = totalHeight + (listView.getDividerHeight() * (adapter.getCount() - 1));
    listView.setLayoutParams(par);
    listView.requestLayout();
} 
```

调用此函数传递您的 ListView 对象：

```
justifyListViewHeightBasedOnChildren(myListview); 
```

上面显示的功能是对以下帖子的修改： [禁用列表视图中的滚动](https://stackoverflow.com/questions/7611085/disable-scrolling-in-listview)

请注意在将适配器设置为列表视图后调用此函数。如果适配器中条目的大小发生了变化，您也需要调用此函数。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-31T10:02:00.327

你可以这样做

```
listView.setScrollContainer(false); 
```

更多请查看

[如何获得不可滚动的 ListView？](https://stackoverflow.com/questions/4338185/how-to-get-a-non-scrollable-listview)

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-31T10:20:07.860

将它们作为第一个 Item 添加到 ListView 似乎是一个很好的解决方案。

要使视图不可选择，只需获取视图和`.setClickable(false)`.

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2013-09-18T12:54:32.457

我会`View`在`ListView`. 给它设置一个`View.OnTouchListener()`。`true`并通过在 的`onTouch()`方法中返回来消费事件`View.OnTouchListener()`。

当您希望列表再次向后滚动时，请删除透明上设置的触摸侦听器`View`

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-10-07T11:30:27.223

如果您必须在列表视图中显示有限数量的项目并希望阻止列表视图滚动，那么您必须保持列表视图高度大于项目总高度。

例如，您要显示 3 个项目。（行高为 30）。然后项目总高度变为 3 x 30dp = 90dp，

所以现在你必须将列表视图高度设置为大于 90。例如：100dp。所以现在你的列表视图无论如何都不会滚动。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-08-31T23:37:44.853

我认为最好的方法是将 2 个按钮和图像视图放在 LinearLayout （或任何适合您需要的布局）中，并使用 addHeaderView 方法将此布局添加为列表标题：

[http://developer.android.com/reference/android/widget/ListView.html#addHeaderView(android.view.View](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView(android.view.View) )

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-05-09T18:09:38.190

使用以下说明：

```
name_lista.getLayoutParams (). height = new_size 
```

new_size 是一个变量，您将根据列表中的元素数量进行计算，例如：

```
new_size = 100 * list_size; 
```

# android - Android 多ID管理

> ID：12212892
> 
> 赞同：0
> 
> 时间：2012-08-31T09:49:05.123
> 
> 标签：android, button, for-loop

我有一个带有两个选项卡的活动。在第一个中有一个`Button`. 如果按下此按钮，则会在第二个选项卡中创建`Button`一个新选项卡。`TableRow`这工作正常。

每个`TableRow`都有 3 个视图（一个图像、一些文本和一个`button`）。每次`Button`创建 a 时，我都会为其分配一个 id (0,1,2 ...)。

如果 id 是 0,1,2 ......我想要的是设置一个特定的文本......无论哪个 id。

我已经尝试过了，但它不起作用：

```
public void onClick(View arg0) {

    // TODO Auto-generated method stub
    switch(arg0.getId()){

        case R.id.save:

            if (et.getText() !=null && thumbnail != null){

                 TableRow tr = new TableRow(this);
                 ImageView view = new ImageView(this);
                 TextView view2 = new TextView(this);
                 Button view3 = new Button(this);
                 view3.setOnClickListener(this);

                 titulo = new String[500];
                 mensaje = new String[500];
                 fotos = new Bitmap[500];

                 view.setImageBitmap(thumbnail);
                 view.setPadding(1, 5, 0, 0);
                 view.setScaleType(ImageView.ScaleType.CENTER_INSIDE);

                 Calendar c = Calendar.getInstance();
                 SimpleDateFormat dateFormat = new SimpleDateFormat("yyyy/MM/dd");

                 titulo[i]=""+et.getText();
                 mensaje[i]=""+et1.getText();
                 fotos[i]=thumbnail;
                 i++;

                 view2.setText("" + et.getText()  + dateFormat.format(c.getTime()) );
                 view2.setGravity(Gravity.CENTER_HORIZONTAL);
                 view2.setGravity(Gravity.CENTER_VERTICAL);

                 view3.setGravity(Gravity.RIGHT);
                 view3.setGravity(Gravity.CENTER_VERTICAL);

                 DisplayMetrics metrics = new DisplayMetrics();
                 getWindowManager().getDefaultDisplay().getMetrics(metrics);

                 tr.addView(view, metrics.widthPixels/3, 150);
                 tr.addView(view2, metrics.widthPixels/2, 100);
                 tr.addView(view3, metrics.widthPixels/6, 20);
                 tl.addView (tr, 0);

                 final Toast toastMensaje = Toast.makeText(getApplicationContext(),
                            "Tu entrada se cargó correctamente", Toast.LENGTH_LONG);
                    toastMensaje.setGravity(Gravity.CENTER, 0, 0);
                    toastMensaje.show();

                    et.setText("");
                    et1.setText("");
                    i1.setVisibility(View.GONE);

            }

            else{

                final Toast toastMensaje = Toast.makeText(getApplicationContext(),
                        "Tienes que añadir un título y una foto", Toast.LENGTH_LONG);
                toastMensaje.setGravity(Gravity.CENTER, 0, 0);
                toastMensaje.show();

            }

        break;

        case R.id.photo:

            Intent cameraIntent = new Intent(android.provider.MediaStore.ACTION_IMAGE_CAPTURE);  
            startActivityForResult(cameraIntent, CAMERA_PIC_REQUEST);

        break;

        case R.id.gallery:

            Intent intent = new Intent(Intent.ACTION_PICK, android.provider.MediaStore.Images.Media.EXTERNAL_CONTENT_URI);
             startActivityForResult(intent, TFRequestCodes);

        break;

    }

        for (int j=0; j<titulo.length; j++){

            if (arg0.getId()==j){

            final Toast toastMensaje = Toast.makeText(getApplicationContext(),titulo[j], Toast.LENGTH_LONG);
            toastMensaje.setGravity(Gravity.CENTER, 0, 0);
            toastMensaje.show();

        }

    }

} 
```

这段代码不起作用：

```
 for (int j=0; j<titulo.length; j++){

            if (arg0.getId()==j){

            final Toast toastMensaje = Toast.makeText(getApplicationContext(),titulo[j], Toast.LENGTH_LONG);
            toastMensaje.setGravity(Gravity.CENTER, 0, 0);
            toastMensaje.show();

        }

    } 
```

这是 XML 文件：

```
android:id="@+id/LinearLayout"
android:layout_width="fill_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="match_parent"
            android:layout_height="wrap_content" >
        </TabWidget>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="match_parent" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:background="#001521"
                android:orientation="vertical">

                 <EditText
                    android:id="@+id/title"
                    android:layout_width="fill_parent"
                    android:layout_height="42dp"
                    android:layout_marginTop="5dp"
                    android:hint="Lugar" 
                    android:gravity="top">
                    </EditText>

                 <EditText
                    android:id="@+id/editText1"
                    android:layout_width="fill_parent"
                    android:layout_height="252dp"
                    android:layout_marginTop="3dp"
                    android:hint="Título"
                    android:gravity="top"
                    android:inputType="textMultiLine" ></EditText>

                 <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="50dp"
                android:background="#001521"
                android:orientation="horizontal">

               <Button
                    android:id="@+id/photo"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:text="Photo" />

               <Button
                    android:id="@+id/gallery"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"
                    android:text="Gallery" />

                <ImageView
                    android:id="@+id/i1"
                    android:layout_width="wrap_content"
                    android:layout_height="50dp"/>

            </LinearLayout>

                <Button
                    android:id="@+id/save"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginTop="5dp"
                    android:text="Guardar entrada"
                     />

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab2"
                android:layout_width="match_parent"
                android:layout_height="match_parent" >

                <ScrollView
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent" >

                    <TableLayout
                    android:layout_width="wrap_content"
                    android:layout_height="match_parent"
                    android:id="@+id/tl"
                    android:stretchColumns="0,1,2">

                    </TableLayout>

                </ScrollView>

            </LinearLayout>

            <LinearLayout
                android:id="@+id/tab3"
                android:layout_width="match_parent"
                android:layout_height="match_parent">
            </LinearLayout>

        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:35:19.697

您不应该在 onClick() 中初始化它们

```
 titulo = new String[500];
                     mensaje = new String[500];
                     fotos = new Bitmap[500]; 
```

这样，每次单击 save 时，都会创建新对象，并且您将无法存储字符串。将它们移动到 onCreate()。ia 也是全局变量吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T14:25:31.180

我会把它放在这里，而不是评论：P

尝试添加一些日志以检查它是否进入循环

```
for (int j=0; j<titulo.length; j++)
{ 
 Log.d("TAG","id = " + arg0.getId() + " j = " + j); 
 if (arg0.getId()==j)
 { 
     Log.d("TAG","its equal"); 
     final Toast toastMensaje = Toast.makeText(getApplicationContext(),titulo[j], Toast.LENGTH_LONG);
     toastMensaje.setGravity(Gravity.CENTER, 0, 0); toastMensaje.show(); 
 } 
```

我怀疑你真正的问题是使用`getApplicationContext()`而不是你的活动的上下文。也试试这个。

# mysql - 为 MySQL 中的列添加唯一性

> ID：12212894
> 
> 赞同：0
> 
> 时间：2012-08-31T09:49:10.000
> 
> 标签：mysql

我有以下案例，表格文章和表格水果。两者都在下面表示

```
create table Article
(
    ART_ID          bigint not null auto_increment,
    ART_NAME         varchar(25) not null,
    primary key(ART_ID)
);

create table Fruit
(    
    ART_ID bigint not null,
    FRU_DES varchar(25) not null,
    Foreign Key (ART_ID) references Article(ART_ID)
); 
```

现在就我而言没关系，但是当我想输入一些数据以创建 Fruit 时，我无法在不声明 ART_ID 的情况下在表中创建该对象，但是如果我已经将其声明为 auto_increment 怎么可能.

我无法对我的数据库执行以下指令，

```
insert into Fruit(FRU_DES)
values('dsd'); 
```

但是我可以

```
insert into Fruit(ART_ID, FRU_DES)
values(1,'dsd'); 
```

但是我不希望这种情况出现，因为如果在项目后期的某个时间省略某些内容，它可能会导致一些问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:06:01.570

如果我理解正确，您将需要第三张表：

*   您的文章表原样
*   您的水果表得到 a`FRU_ID auto_increment`并且该`ART_ID`列被丢弃
*   包含 ART_ID 和 FRU_ID 列的 ArticleFruit 表

这将允许您在数据库中插入 Fruits 一次，而无需将其直接链接到文章，同时您仍然可以通过将记录添加到 ArticleFruit 表来将 Fruits 链接到文章。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:01:44.250

只要你把外键放在你说是一个有效的水果上，就必须有一个有效文章的引用。

在 ORM 或其他代码模型`AddFruit`中将是 Article 上的方法，即 Art_ID 在您尝试之前是已知的。

在直接的 sql 中，也许

```
Insert into Fruit Select Article.Art_ID,'apple' From Article Where Article.Artname = 'Still life by P Frame' 
```

说清楚。

# php - MySQL PHP查询问题

> ID：12212897
> 
> 赞同：0
> 
> 时间：2012-08-31T09:49:15.963
> 
> 标签：php, mysql

我正在尝试找出执行以下操作的最佳方法：

在数据库中，我有两个字段 - q1、q2。

我想先计算、排序和分组 q1 的响应 - 很简单。

```
1\. SELECT q1, COUNT(q1) FROM xyz GROUP BY q1 ORDER BY q1 
```

现在，为了争论，让我们假设这会带来以下内容：

```
A = 5
B = 12
C = 3 
```

我需要通过此查询获得以下信息：

```
2\. SELECT q2, COUNT(q2) FROM xyz WHERE q1 = A GROUP BY q2 ORDER by q2 
```

这很好，但是有没有办法在每次第一个查询带回结果时在循环中迭代上述内容，所以在这个例子中，2\. 的代码被迭代并循环为 q1 = A、q1 = B 和 q1 = C?

有道理？我不确定我描述得有多好，所以我道歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:51:52.327

您可以使用单个查询来实现此目的：

```
SELECT q2, COUNT(q2)
FROM xyz
GROUP BY q1, q2
ORDER by q1, q2; 
```

# jquery - Backbone.js + Jquery Mobile 哈希导航不起作用

> ID：12212902
> 
> 赞同：1
> 
> 时间：2012-08-31T09:49:38.177
> 
> 标签：jquery, jquery-mobile, backbone.js

我目前正在开发基于以下模块化方法的移动应用程序：

```
http://weblog.bocoup.com/organizing-your-backbone-js-application-with-modules/ 
```

我在路由上遇到了一些问题，我无法了解可能导致问题的原因。

我的路由器定义如下：

```
 var AppRouter = Backbone.Router.extend({
    routes: {            
        'module1' : 'module1_home', // working        
        'module1view/:id' : 'module1_view',    //Not working                  
        // Default
        '*actions': 'defaultAction' //Working
    },
    initialize:function () {
        // Handle back button throughout the application
        $('.back').live('click', function(event) {
            window.history.back();
            return false;
        });
        this.firstPage = true;
    },
    module1_view : function(id)
    {        
        var module1 = MyApp.module('module1');
        var view = new module1.DisplayView;        
        this.changePage(view);            
    },    
    defaultAction : function () {
        var home = MyApp.module('home');
        var view = new home.DefaultView;  
        this.changePage(view);
    },
    changePage:function (page) {        
        $(page.el).attr('data-role', 'page');
        page.render();
        $('body').append($(page.el));
        var transition = 'slide';

        if (this.firstPage) {
            transition = 'none';
            this.firstPage = false;
        }
        $.mobile.changePage($(page.el), {
            changeHash:true, 
            transition: transition
        });
    }
}); 
```

这是示例 URL 和结果

```
http://localhost:12345/myapp/ => shows the default view
http://localhost:12345/myapp/index.html => shows the default view
http://localhost:12345/myapp/#module1 => shows module1 home view
http://localhost:12345/myapp/index.html#module1 => shows module1 home view

http://localhost:12345/myapp/#module1view/123 => url changes to http://localhost:12345/myapp/module1view/123 and displays the default view
http://localhost:12345/myapp/index.html#module1/123 => url changes to http://localhost:12345/myapp/module1view/123 and displays the default view 
```

我还使用停用了 JQM 导航

```
jQuery(function($) {    
    $(document).on("mobileinit", function () {
        $.mobile.ajaxEnabled = false;
        $.mobile.linkBindingEnabled = false;
        $.mobile.hashListeningEnabled = false;
        $.mobile.pushStateEnabled = false;

        // Remove page from DOM when it's being replaced
        $('div[data-role="page"]').live('pagehide', function (event, ui) {
            $(event.currentTarget).remove();
        });
    });          
}); 
```

我也在这里使用 WAMP 作为 Web 服务器，并使用 firefox 作为测试浏览器。

有人有类似的问题，可以给我一些关于如何解决这个问题的见解吗？

更新#1：一些补充信息，此处未调用警报：

```
module1_view : function(id)
    { 

        alert(id);
    } 
```

因此，我可能认为代码中出现了一些问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T10:05:52.953

我能够找到问题所在。似乎将 JQM 设置放入：

```
jQuery(function($) {    });
or
$(function() { }); 
```

没有触发文档 $(document).on("mobileinit", function () { }); 由于某些原因。我仍然需要对此进行调查。

但删除触发命令和 JQM 导航被禁用，我可以正确使用骨干路由器。

# android - Android- API 8 中的片段

> ID：12212904
> 
> 赞同：2
> 
> 时间：2012-08-31T09:49:41.363
> 
> 标签：android, android-fragments

我正在使用 Android API 8。我必须使用 API 8 中不可用的片段。是否有任何解决方法可以在 API 8 中使用片段？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:52:24.183

我认为，为了在 Android 2.2 中包含片段，您需要将 android-support-v4.jar 添加到您的项目中。

[Android 支持库的概览和修订](http://developer.android.com/tools/extras/support-library.html)

下载：使用您的**SDK 管理器**。[以下是如何一步一步地做到这一点](http://developer.android.com/tools/support-library/setup.html#download)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:58:11.930

Fragments 是自 Honeycomb 以来的 Android 功能，并且在旧版本上本机不可用。然而，由于片段是使用 android UI 的方式，谷歌发布了所谓的“支持库”。这只是片段管理器和 jar 形式的东西，您可以链接到您的应用程序。支持库甚至可以在 Android 1.6 上运行，并且与 HC 开发人员可以使用的大部分相同（除了一些偏好片段）。您的编码方式几乎相同，只是您必须与所述 jar 链接并以不同方式获取 FragmentManager。请注意，在 Honeycomb 或 ICS 或 JB 上使用此库是安全的。不会有冲突，您的应用程序也将按预期运行。如果您以 HC 及更高版本为目标并且不打算支持旧版本的 Android，则不应使用此库，但这主要是因为您将链接到您不需要的库。读[这篇关于支持库的 Android SDK 文章](http://developer.android.com/tools/extras/support-library.html)

# sorting - CUDA 中的粒子细胞计数（一维和二维直方图生成）

> ID：12212906
> 
> 赞同：2
> 
> 时间：2012-08-31T09:49:52.657
> 
> 标签：sorting, cuda, atomic, race-condition, particle-system

此`__global__`功能是增加数字并计算某些单元格中有多少粒子。

```
__global__ void Set_Nc_GPU_0831(int *nc,int *index,SP DSMC)
{
    int tidx;
    tidx=threadIdx.x+blockDim.x*blockIdx.x;

    atomicAdd(&nc[index[tidx]],1);
} 
```

我正在使用缓慢的原子操作。所以我想用其他一些函数或算法替换原子函数。

有没有其他方法可以修改这个简单的`__global__`功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-11-30T22:20:53.400

按照乔治的评论，我正在处理粒子不在一条线上，而是在平面的一部分上的二维情况。

实际上，2D 案例只需要对上述代码进行少量修改。唯一要做的就是定义粒子的坐标和二维`x`直方图。`y``256 x 256`

下面的代码提供了一个完整的工作示例。

```
#include <thrust/device_vector.h>
#include <thrust/sort.h>
#include <thrust/generate.h>
#include <thrust/adjacent_difference.h>
#include <thrust/binary_search.h>

#define SIZE (100*1024*1024) // 100 MB

/********************/
/* CUDA ERROR CHECK */
/********************/
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
    if (code != cudaSuccess) 
    {
        fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
        if (abort) exit(code);
    }
}

/**********************************************/
/* FUNCTION TO GENERATE RANDOM UNSIGNED CHARS */
/**********************************************/
unsigned char* big_random_block(int size) {
    unsigned char *data = (unsigned char*)malloc(size);
    for (int i=0; i<size; i++)
        data[i] = rand();
    return data;
}

/********************************/
/* GPU HISTOGRAM CALCULATION 2D */
/********************************/
__global__ void histo_kernel2(unsigned char *dev_x_coord, unsigned char *dev_y_coord, unsigned int *histo, unsigned int size) {

    // --- The number of threads does not cover all the data size
    int i = threadIdx.x + blockIdx.x * blockDim.x;
    int offset = blockDim.x * gridDim.x;
    while (i < size)
    {
        atomicAdd(&histo[dev_y_coord[i] * 256 + dev_x_coord[i]], 1);
        i += offset;
    }
}

/********/
/* MAIN */
/********/
void main(){

    // --- Generating x- and y- coordinates of the particles
    unsigned char *x_coord = (unsigned char*)big_random_block(SIZE);
    unsigned char *y_coord = (unsigned char*)big_random_block(SIZE);

    /********************/
    /* CPU COMPUTATIONS */
    /********************/

    // --- Allocating host memory space and initializing the host-side histogram
    unsigned int *histo = (unsigned int*)malloc(256 * 256 * sizeof(unsigned int));
    for (int i=0; i < 256 * 256; i++) histo [i] = 0;

    clock_t start_CPU, stop_CPU;

    // --- Histogram calculation on the host
    start_CPU = clock();
    for (int i=0; i < SIZE; i++) histo[y_coord[i] * 256 + x_coord[i]]++;
    stop_CPU = clock();
    float elapsedTime = (float)(stop_CPU - start_CPU) / (float)CLOCKS_PER_SEC * 1000.0f;
    printf("Time to generate (CPU): %3.1f ms\n", elapsedTime);

    // --- Indirect check of the result
    long histoCount = 0;
    for (int i=0; i < 256 * 256; i++) { histoCount += histo[i]; }
    printf("Histogram Sum: %ld\n", histoCount);

    /********************/
    /* GPU COMPUTATIONS */
    /********************/

    // --- Initializing the device-side data
    unsigned char *dev_x_coord, *dev_y_coord;
    gpuErrchk(cudaMalloc((void**)&dev_x_coord,SIZE));
    gpuErrchk(cudaMalloc((void**)&dev_y_coord,SIZE));
    gpuErrchk(cudaMemcpy(dev_x_coord, x_coord, SIZE, cudaMemcpyHostToDevice));
    gpuErrchk(cudaMemcpy(dev_y_coord, y_coord, SIZE, cudaMemcpyHostToDevice));

    // --- Allocating device memory space for the device-side histogram
    unsigned int *dev_histo;
    gpuErrchk(cudaMalloc((void**)&dev_histo,256*256*sizeof(unsigned int)));

    // --- GPU timing
    cudaEvent_t start, stop;
    gpuErrchk(cudaEventCreate(&start));
    gpuErrchk(cudaEventCreate(&stop));

    // --- ATOMICS
    gpuErrchk(cudaEventRecord(start,0));
    gpuErrchk(cudaMemset(dev_histo,0,256*256*sizeof(unsigned int)));
    cudaDeviceProp prop;
    gpuErrchk(cudaGetDeviceProperties(&prop,0));

    int blocks = prop.multiProcessorCount;
    histo_kernel2<<<blocks*2,256>>>(dev_x_coord, dev_y_coord, dev_histo, SIZE);
    gpuErrchk(cudaPeekAtLastError());
    gpuErrchk(cudaDeviceSynchronize());

    gpuErrchk(cudaMemcpy(histo, dev_histo, 256 * 256 * sizeof(unsigned int),cudaMemcpyDeviceToHost));
    gpuErrchk(cudaEventRecord(stop,0));
    gpuErrchk(cudaEventSynchronize(stop));
    gpuErrchk(cudaEventElapsedTime(&elapsedTime,start,stop));
    printf("Time to generate (GPU):  %3.1f ms\n", elapsedTime);

    histoCount = 0;
    for (int i=0; i<256 * 256; i++) {
        histoCount += histo[i];
    }
    printf( "Histogram Sum:  %ld\n", histoCount );

    // --- Check the correctness of the results via the host
    for (int i=0; i<SIZE; i++) histo[y_coord[i] * 256 + x_coord[i]]--;
    for (int i=0; i<256*256; i++) {
        if (histo[i] != 0) printf( "Failure at %d!  Off by %d\n", i, histo[i] );
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-06-01T22:06:59.323

这是一个较晚的答案，用于从未回答的列表中删除此问题。

您已经认识到计算有多少粒子落入某个单元格相当于构建直方图。直方图的构建是一个经过充分研究的问题。Shane Cook 的书（CUDA Programming）包含关于这个主题的很好的讨论。此外，CUDA 样本包含直方图示例。此外，[CUDA Thrust 的直方图构造](https://code.google.com/p/thrust/source/browse/examples/histogram.cu)也是可能的。最后，[CUDA 编程博客](http://cuda-programming.blogspot.it/2013/03/optimization-in-histogram-cuda-code.html)包含更多见解。

下面我提供了一个代码来比较 5 种不同版本的直方图计算：

1.  中央处理器;
2.  带有原子的 GPU（基本上是您的方法）；
3.  GPU 与共享内存中的原子以及部分直方图的最终总和（基本上是 Paul R 提出的方法）；
4.  GPU 通过使用 CUDA 推力。

如果您在 Kepler K20c 上运行 10MB 数据的典型案例的代码，您会得到以下时序：

1.  中央处理器 = `83ms`;
2.  带有原子的 GPU = `15.8ms`;
3.  GPU 与共享内存中的原子 = `17.7ms`;
4.  CUDA 推力的 GPU = `40ms`.

如您所见，令人惊讶的是，您的“蛮力”解决方案是最快的。这是有道理的，因为对于最新的架构（您的帖子日期为 2012 年 8 月，当时 Kepler 尚未发布，至少在欧洲），原子操作非常快。

这是代码：

```
#include <thrust/device_vector.h>
#include <thrust/sort.h>
#include <thrust/generate.h>
#include <thrust/adjacent_difference.h>
#include <thrust/binary_search.h>

#define SIZE (100*1024*1024) // 100 MB

/**********************************************/
/* FUNCTION TO GENERATE RANDOM UNSIGNED CHARS */
/**********************************************/
unsigned char* big_random_block(int size) {
    unsigned char *data = (unsigned char*)malloc(size);
    for (int i=0; i<size; i++)
        data[i] = rand();
    return data;
}

/***************************************/
/* GPU HISTOGRAM CALCULATION VERSION 1 */
/***************************************/
__global__ void histo_kernel1(unsigned char *buffer, long size, unsigned int *histo ) {

    // --- The number of threads does not cover all the data size
    int i = threadIdx.x + blockIdx.x * blockDim.x;
    int stride = blockDim.x * gridDim.x;
    while (i < size) {
        atomicAdd(&histo[buffer[i]], 1);
        i += stride;
    }
}

/***************************************/
/* GPU HISTOGRAM CALCULATION VERSION 2 */
/***************************************/
__global__ void histo_kernel2(unsigned char *buffer, long size, unsigned int *histo ) {

    // --- Allocating and initializing shared memory to store partial histograms
    __shared__ unsigned int temp[256];
    temp[threadIdx.x] = 0;
    __syncthreads();

    // --- The number of threads does not cover all the data size
    int i = threadIdx.x + blockIdx.x * blockDim.x;
    int offset = blockDim.x * gridDim.x;
    while (i < size)
    {
        atomicAdd(&temp[buffer[i]], 1);
        i += offset;
    }
    __syncthreads();

    // --- Summing histograms
    atomicAdd(&(histo[threadIdx.x]), temp[threadIdx.x]);
}

/********************/
/* CUDA ERROR CHECK */
/********************/
#define gpuErrchk(ans) { gpuAssert((ans), __FILE__, __LINE__); }
inline void gpuAssert(cudaError_t code, char *file, int line, bool abort=true)
{
    if (code != cudaSuccess) 
    {
        fprintf(stderr,"GPUassert: %s %s %d\n", cudaGetErrorString(code), file, line);
        if (abort) exit(code);
    }
}

/********/
/* MAIN */
/********/
void main(){

    // --- Generating an array of SIZE unsigned chars
    unsigned char *buffer = (unsigned char*)big_random_block(SIZE);

    /********************/
    /* CPU COMPUTATIONS */
    /********************/

    // --- Allocating host memory space and initializing the host-side histogram
    unsigned int histo[256];
    for (int i=0; i<256; i++) histo [i] = 0;

    clock_t start_CPU, stop_CPU;

    // --- Histogram calculation on the host
    start_CPU = clock();
    for (int i=0; i<SIZE; i++) histo [buffer[i]]++;
    stop_CPU = clock();
    float elapsedTime = (float)(stop_CPU - start_CPU) / (float)CLOCKS_PER_SEC * 1000.0f;
    printf("Time to generate (CPU): %3.1f ms\n", elapsedTime);

    // --- Indirect check of the result
    long histoCount = 0;
    for (int i=0; i<256; i++) { histoCount += histo[i]; }
    printf("Histogram Sum: %ld\n", histoCount);

    /********************/
    /* GPU COMPUTATIONS */
    /********************/

    // --- Initializing the device-side data
    unsigned char *dev_buffer;
    gpuErrchk(cudaMalloc((void**)&dev_buffer,SIZE));
    gpuErrchk(cudaMemcpy(dev_buffer, buffer, SIZE, cudaMemcpyHostToDevice));

    // --- Allocating device memory space for the device-side histogram
    unsigned int *dev_histo;
    gpuErrchk(cudaMalloc((void**)&dev_histo,256*sizeof(long)));

    // --- GPU timing
    cudaEvent_t start, stop;
    gpuErrchk(cudaEventCreate(&start));
    gpuErrchk(cudaEventCreate(&stop));

    // --- ATOMICS
    // --- Histogram calculation on the device - 2x the number of multiprocessors gives best timing
    gpuErrchk(cudaEventRecord(start,0));
    gpuErrchk(cudaMemset(dev_histo,0,256*sizeof(int)));
    cudaDeviceProp prop;
    gpuErrchk(cudaGetDeviceProperties(&prop,0));
    int blocks = prop.multiProcessorCount;
    histo_kernel1<<<blocks*2,256>>>(dev_buffer, SIZE, dev_histo);

    gpuErrchk(cudaMemcpy(histo,dev_histo,256*sizeof(int),cudaMemcpyDeviceToHost));
    gpuErrchk(cudaEventRecord(stop,0));
    gpuErrchk(cudaEventSynchronize(stop));
    gpuErrchk(cudaEventElapsedTime(&elapsedTime,start,stop));
    printf("Time to generate (GPU):  %3.1f ms\n", elapsedTime);

    histoCount = 0;
    for (int i=0; i<256; i++) {
        histoCount += histo[i];
    }
    printf( "Histogram Sum:  %ld\n", histoCount );

    // --- Check the correctness of the results via the host
    for (int i=0; i<SIZE; i++) histo[buffer[i]]--;
    for (int i=0; i<256; i++) {
        if (histo[i] != 0) printf( "Failure at %d!  Off by %d\n", i, histo[i] );
}

    // --- ATOMICS IN SHARED MEMORY
    // --- Histogram calculation on the device - 2x the number of multiprocessors gives best timing
    gpuErrchk(cudaEventRecord(start,0));
    gpuErrchk(cudaMemset(dev_histo,0,256*sizeof(int)));
    gpuErrchk(cudaGetDeviceProperties(&prop,0));
    blocks = prop.multiProcessorCount;
    histo_kernel2<<<blocks*2,256>>>(dev_buffer, SIZE, dev_histo);

    gpuErrchk(cudaMemcpy(histo,dev_histo,256*sizeof(int),cudaMemcpyDeviceToHost));
    gpuErrchk(cudaEventRecord(stop,0));
    gpuErrchk(cudaEventSynchronize(stop));
    gpuErrchk(cudaEventElapsedTime(&elapsedTime,start,stop));
    printf("Time to generate (GPU):  %3.1f ms\n", elapsedTime);

    histoCount = 0;
    for (int i=0; i<256; i++) {
        histoCount += histo[i];
    }
    printf( "Histogram Sum:  %ld\n", histoCount );

    // --- Check the correctness of the results via the host
    for (int i=0; i<SIZE; i++) histo[buffer[i]]--;
    for (int i=0; i<256; i++) {
        if (histo[i] != 0) printf( "Failure at %d!  Off by %d\n", i, histo[i] );
    }

    // --- CUDA THRUST

    gpuErrchk(cudaEventRecord(start,0));

    // --- Wrapping dev_buffer raw pointer with a device_ptr and initializing a device_vector with it
    thrust::device_ptr<unsigned char> dev_ptr(dev_buffer);
    thrust::device_vector<unsigned char> dev_buffer_thrust(dev_ptr, dev_ptr + SIZE);

    // --- Sorting data to bring equal elements together
    thrust::sort(dev_buffer_thrust.begin(), dev_buffer_thrust.end());

    // - The number of histogram bins is equal to the maximum value plus one
    int num_bins = dev_buffer_thrust.back() + 1;

    // --- Resize histogram storage
    thrust::device_vector<int> d_histogram;
    d_histogram.resize(num_bins);

    // --- Find the end of each bin of values
    thrust::counting_iterator<int> search_begin(0);
    thrust::upper_bound(dev_buffer_thrust.begin(), dev_buffer_thrust.end(),
                    search_begin, search_begin + num_bins,
                    d_histogram.begin());

    // --- Compute the histogram by taking differences of the cumulative histogram
    thrust::adjacent_difference(d_histogram.begin(), d_histogram.end(),
                            d_histogram.begin());

    thrust::host_vector<int> h_histogram(d_histogram);
    gpuErrchk(cudaEventRecord(stop,0));
    gpuErrchk(cudaEventSynchronize(stop));
    gpuErrchk(cudaEventElapsedTime(&elapsedTime,start,stop));
    printf("Time to generate (GPU):  %3.1f ms\n", elapsedTime);

    histoCount = 0;
    for (int i=0; i<256; i++) {
        histoCount += h_histogram[i];
    }
    printf( "Histogram Sum:  %ld\n", histoCount );

    // --- Check the correctness of the results via the host
    for (int i=0; i<SIZE; i++) h_histogram[buffer[i]]--;
    for (int i=0; i<256; i++) {
        if (h_histogram[i] != 0) printf( "Failure at %d!  Off by %d\n", i, h_histogram[i] );
    }

    gpuErrchk(cudaEventDestroy(start));
    gpuErrchk(cudaEventDestroy(stop));
    gpuErrchk(cudaFree(dev_histo));
    gpuErrchk(cudaFree(dev_buffer));

    free(buffer);

    getchar();

} 
```

# coldfusion - 使用 ColdFusion 单点登录

> ID：12212907
> 
> 赞同：0
> 
> 时间：2012-08-31T09:49:56.980
> 
> 标签：coldfusion, single-sign-on, subdomain

我们有几个 ColdFusion 站点，它们都作为单独的 IIS7.5 站点托管在同一台机器上，并且可以通过子域访问。所以例如

www.domain.com

论坛.domain.com

门户网站.domain.com

profile.domain.com

为随后可以登录站点的客户创建用户帐户。我们希望为所有站点实施单点登录解决方案。

有人可以指出我在 ColdFusion 中这样做的正确方向吗？

谢谢，

理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T14:02:17.323

我们有一个 CAS 并使用 ColdFusion 登录多个服务器（类似于您所描述的）。ColdFusion 和 CAS 之间的交互是通过 UC Davis 开发的 ColdFusion CAS 客户端的略微修改版本进行的。

在这里你可以找到[一些细节](https://confluence.ucdavis.edu/confluence/display/IETP/CAS+Cold+Fusion+Clients)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:59:49.287

您可以使用 cflogin，确保 cflogin 标签上的所有 applicationToken 属性都相同。您可能还需要将您的应用程序命名为相同（Application.cfc > this.name）。登录会话将在站点之间持续存在。

[http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7db9.html](http://help.adobe.com/en_US/ColdFusion/9.0/CFMLRef/WSc3ff6d0ea77859461172e0811cbec22c24-7db9.html)

# asp.net - 在 asp.net 中检查日期

> ID：12212911
> 
> 赞同：1
> 
> 时间：2012-08-31T09:50:18.273
> 
> 标签：asp.net, vb.net

在设计中，我有 2 个文本框、2 个图像按钮和 1 个日历用于两个图像按钮单击事件在页面加载中，我在两个文本框中显示今天的日期 Page_load 看起来像这样；

```
txtfrdate.Text = Convert.ToDateTime(Today()).ToString("dd/MM/yyyy")
txttodate.Text = Convert.ToDateTime(Today()).ToString("dd/MM/yyyy") 
```

现在我只更改 txttodate 的值（todate 大于 from date）然后单击按钮消息应该显示“From Date 应该大于 to date”我编写了 imagebutton1 和 2 click 事件如下

```
Protected Sub ImageButton1_Click(ByVal sender As Object, ByVal e As System.Web.UI.ImageClickEventArgs) Handles ImageButton1.Click
  Calendar1.Visible = True
  Calendar1.SelectedDates.Clear()
  Session("click") = 1
End Sub

Protected Sub ImageButton2_Click(ByVal sender As Object, ByVal e As System.Web.UI.ImageClickEventArgs) Handles ImageButton2.Click
    Calendar1.Visible = True
    Calendar1.SelectedDates.Clear()
    Session("click") = 2
End Sub 
```

并在日历选择更改事件

```
Protected Sub Calendar1_SelectionChanged(ByVal sender As Object, ByVal e As System.EventArgs) Handles Calendar1.SelectionChanged
    Select Case (Session("click"))
        Case 1 : txtfrdate.Text = Convert.ToDateTime(Calendar1.SelectedDate.ToShortDateString).ToString("dd/MM/yyyy")
            Session("fd") = Calendar1.SelectedDate
        Case 2 : txttodate.Text = Convert.ToDateTime(Calendar1.SelectedDate.ToShortDateString).ToString("dd/MM/yyyy")
            Session("td") = Calendar1.SelectedDate
    End Select
    Calendar1.Visible = False

    Label4.Visible = False
End Sub 
```

我在点击查看点击按钮后检查日期如下

```
If txtfrdate.Text = "" Then
    Label4.Visible = True
    Label4.Text = "Select From Date"
ElseIf txttodate.Text = "" Then
    Label4.Visible = True
    Label4.Text = "Select To Date"
ElseIf txtfrdate.Text > txttodate.Text Then
    Label4.Visible = True
    Label4.Text = "From Date Must be Smaller than To Date" 
```

实际上我的问题是当我只更改 txttodate 并且 todate 大于 from date 但仍然显示 From date 应该大于 to date 的消息“我的输出显示

```
From Date: 31/08/2012  - i am not changing current date during page load
To Date: 29/09/2012 - changing by selecting the calendar message is showing 
```

起始日期必须小于截止日期

请帮助我谢谢大家

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:20:01.960

虽然我不太确定我是否完全理解你的问题。而且我认为它不是为了比较两个字符串？`txtfrdate.Text > txttodate.text`比较字符串值并且**不比较 dateTime 对象**！

使用此示例并根据您的要求对其进行调整以检查 dateTime 值。

```
 DateTime dtFrom = DateTime.Now;
    DateTime dtTo = DateTime.Now.Subtract(new TimeSpan(5, 0,0,0));

    if (dtFrom > dtTo)
    {
        Debug.WriteLine("Invalid To-Date");
    }
    else
    {
        Debug.WriteLine("OK");
    } 
```

# php - 如何生成 imagick 非线性渐变？

> ID：12212915
> 
> 赞同：0
> 
> 时间：2012-08-31T09:50:30.287
> 
> 标签：php, gradient, imagick

我用这个 php 代码生成了一个线性渐变：

```
$image = new Imagick($picture);

$image->setImageCompression(Imagick::COMPRESSION_JPEG); 
$image->setImageCompressionQuality(80);     

$image->cropThumbnailImage ( 1920, 1080);
$image->setImageFormat('jpg'); 

$gradient = new Imagick();
$gradient->newPseudoImage(1920, 1080, "gradient:green-transparent");    
$image->compositeImage($gradient, imagick::COMPOSITE_OVER, 0, 0); 
```

但是渐变到透明必须更深。图片中 75% 的绿色和 25% 的透明。

问候！

# django - Django布尔字段返回“------”作为值

> ID：12212919
> 
> 赞同：1
> 
> 时间：2012-08-31T09:50:40.563
> 
> 标签：django, forms, radio-button, modelform

我正在创建一个基于模型的表单，其中我有一个布尔字段，如下所示：

```
project_type = models.CharField(max_length=50, choices=JOB_TYPES) 
```

选择是：

```
 JOB_TYPES = (
    ('fulltime', _('Fulltid')),
    ('project', _('Prosjektbasert')),
  ) 
```

要将输入类型显示为单选按钮而不是 ，我这样做：

```
 class AddJob(ModelForm):
        class Meta:
            model = Jobs
    widgets = {
        'project_type': RadioSelect(),
    } 
```

在 HTML 中，表单输出如下所示：

```
 <label for="id_for_project_type_0">Project type</label> 
 <ul>
 <li><label for="id_for_project_type_0"><input checked="checked" type="radio"      id="id_for_project_type_0" value="" name="project_type" /> ---------</label></li>
 <li><label for="id_for_project_type_1"><input type="radio" id="id_for_project_type_1" value="fulltime" name="project_type" /> Fulltid</label></li>
 <li><label for="id_for_project_type_2"><input type="radio" id="id_for_project_type_2" value="project" name="project_type" /> Prosjektbasert</label></li>
 </ul> 
```

为什么我的值是 0？我只在模型中指定了两个值。我该如何摆脱它？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:01:13.803

您需要为 指定[默认](https://docs.djangoproject.com/en/1.4/ref/models/fields/#default)值`project_type`：

```
project_type = models.CharField(max_length=50, choices=JOB_TYPES,
                                default=JOB_TYPES[0][0]) 
```

# image - Crystal Report Viewer 不显示图像

> ID：12212924
> 
> 赞同：6
> 
> 时间：2012-08-31T09:50:56.413
> 
> 标签：image, crystal-reports

我正在使用水晶报表 v9x。在具有图像的 Crystal Report Viewer 中显示的数据中。当我尝试在 Crystal Report 查看器中显示报告时，图像未显示。

谁能给我一些想法该怎么做？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-25T20:21:13.167

您是否尝试过在 Web.config 中查找 CrystalImageHandler（在 httpHandlers 部分）？我必须添加一行才能显示我的嵌入图像：

```
<add verb="GET" path="CrystalImageHandler.aspx" type="CrystalDecisions.Web.CrystalImageHandler, CrystalDecisions.Web, Version=10.5.3700.0, Culture=neutral, PublicKeyToken=692FBEA5521E1304"/> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-04-11T16:44:10.777

如果您在该`Web.config`部分一切正常，并且如果您的`netFramework`版本高于 4.0，请尝试此操作。

在`App_Start`文件夹中，查找`RouteConfig.cs`并注释掉以下行

```
 Settings.AutoRedirectMode= RedirectMode,Permanent; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-12-03T19:36:06.157

还请尝试在 ApplicationPool 配置（IIS 应用程序池）中将 .Net Framework 模式从 Integrated 更改为 Classic

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-22T20:50:39.233

经过 2 天的搜索后，我正在使用 ASP.NET MVC 这解决了我的问题，并且图像显示了解决方案只需将以下行添加到您的文件 RouteConfig.cs

1-转到项目中的文件夹 App_Start

2-将以下忽略行粘贴到文件 RouteConfig.cs ：

```
routes.IgnoreRoute("{*allaspx}", new { allaspx = @".*(CrystalImageHandler).*" }); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-10-19T14:54:04.237

降低图像分辨率后尝试...对我来说它确实有效。

# asp.net - 命名空间中的奇怪行为

> ID：12212925
> 
> 赞同：0
> 
> 时间：2012-08-31T09:51:01.330
> 
> 标签：asp.net, vb.net, namespaces, projects-and-solutions

最近在我的解决方案中发现了一件奇怪的事情。我总是在我的项目中将根命名空间留空。然后，我像往常一样编写所有内容，包括页面的继承指令上的名称空间，并在后面的代码中使用子句名称空间。一切都按预期工作。

现在我正在体验面向插件的编程，并且我正在使用 VirtualPathProvider。可以在 forums.asp.net 文章中找到的标准类。发生的事情是 VirtualPathProvider 无法解析插件项目（命名空间 MEFTestPlugin1 pEx。）中的嵌入页面，我发现那里没有命名空间。

错误：~/Plugins/MEFTestPlugin1.dll/MEFTestPlugin1.Default.aspx

找到：~/Plugins/MEFTestPlugin1.dll/Default.aspx

所以我不得不通知项目中的根命名空间，然后第一个 url 工作。但是后来没有找到代码隐藏。

所以我终于发现只有两个工作组合是：

```
<%@ Page Title="" Language="vb" AutoEventWireup="false"  CodeBehind="Default.aspx.vb" Inherits="MEFTestPlugin1._Default" %>

Public Class _Default
    Inherits System.Web.UI.Page

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Response.Write("Code-Behinds Worky")
    End Sub
End Class 
```

或者

```
<%@ Page Title="" Language="vb" AutoEventWireup="false"  CodeBehind="Default.aspx.vb" Inherits="MEFTestPlugin1.MEFTestPlugin1._Default" %>

Namespace MEFTestPlugin1
    Public Class _Default
        Inherits System.Web.UI.Page

        Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
            Response.Write("Code-Behinds Worky")
        End Sub
    End Class
End Namespace 
```

注意页面指令中的双重命名空间。

所以这发生在我所有的解决方案和项目中，我不知道。我下载的任何示例解决方案都通知了程序集和根命名空间，并在代码隐藏中定义了命名空间，但它们工作正常！！

有谁知道可能是什么问题？当然是我在解决方案配置上错过的东西......或者我所有的东西都是VB的事实！！？？我的解决方案从以前的版本升级到 VS2010。这个事实会是问题吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T09:43:51.820

好吧，发现这是与 VB 命名空间管理有关的东西，它的工作方式与 C# 不同并且会影响 DI。我放弃了用于区域的 MEF 和用于 IoC 和解耦的 Ninject。

# mysql - c 上的 const char 哪个变量相同但值不同

> ID：12212930
> 
> 赞同：2
> 
> 时间：2012-08-31T09:51:18.423
> 
> 标签：mysql, c

我有程序使用 c 和 c++ 语言来访问 MySQL 数据库中的数据。代码：

```
const char *query="SELECT * FROM myTable;";
printf("%s\n",query);
state=mysql_query(sock,query);
printf("%s\n",query); 
```

从该代码中，“状态”语句之前和之后的查询值相同（SELECT * FROM myTable;）。但是对于这段代码：

```
const char *query=getQuery();
printf("%s\n",query);
state=mysql_query(sock,query);
printf("%s\n",query); 
```

功能：

```
const char * getQuery(){
 const char *returnValue;
 char q[BUFSIZ];
 sprintf_s(q,"%s","SELECT * FROM myTable;");
 returnValue=q;
 return returnValue;
} 
```

从这段代码中，“state”语句之前和之后的查询值是不同的，之前（SELECT * FROM myTable;）和之后（1/4>-uC^M）。

有人知道吗？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T10:39:17.873

问题是您正在返回一个局部变量。函数 getQuery() 执行后，q 将消失，指针 u 返回指向无效内存并读取乱码。它在查询之前而不是之后工作的原因是因为数据尚未被覆盖。

你想要的是这样的

```
char *returnvalue = (char *) malloc(sizeof(char)*BUFSIZ);
char q[BUFSIZ];
sprintf_s(q,"%s","SELECT * FROM myTable;");
memcpy(returnvalue, q, BUFSIZ);
return returnvalue; 
```

或这个

```
char *returnvalue = (char *) malloc(sizeof(char)*BUFSIZ);
sprintf_s(returnvalue ,"%s","SELECT * FROM myTable;");
return returnvalue; 
```

查询后，您必须记住在某些地方释放分配的内存。

```
free(query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:50:19.777

我认为这就是正在发生的事情：

本地 char 数组 q 在 getQuery 结束时离开作用域。这意味着它占用的内存被释放。不幸的是 returnValue 仍然指向那个内存位置。

释放的内存不会立即被覆盖。它被标记为“空闲”，并在需要该内存时重新分配。这就是为什么第一次调用 printf 仍然有效的原因：内存还不需要，所以旧数据仍然存在。但是 mysql_query 函数很可能需要一些内存，并且使用了曾经分配给 q 的内存。所以你现在在查询指向的地址中拥有的是来自 mysql_query 函数的一些随机数据。

那么如何解决这个问题呢？

使用 malloc() 或 new 为 returnValue 分配内存，然后使用 strncopy 将 q 的内容复制到 returnValue。请记住，当调用程序完成查询字符串时，它必须是 free()'ed 或 delete'd。

# data-structures - 是否有商过滤器的开源实现？

> ID：12212931
> 
> 赞同：2
> 
> 时间：2012-08-31T09:51:29.113
> 
> 标签：data-structures, bloom-filter

请参阅[http://en.wikipedia.org/wiki/Quotient_filter](http://en.wikipedia.org/wiki/Quotient_filter)。我还没有找到一个实现，我想要一些东西来玩，维基百科的解释对我来说有点枯燥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-09-02T10:16:41.270

[我在 C (链接](https://github.com/vedantk/quotient-filter))中实现了一个商过滤器。它支持以下操作；

*   插入（qf，键）
*   可能包含（qf，键）
*   Remove(qf, key)（需要注意的是，请参阅 qf.h 中的文档）
*   合并（qf1，qf2）-> qfout
*   迭代(qf)

该存储库包含一些文档和一个相当严格的测试套件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-27T03:55:25.663

我在 PHP 中实现了一个，目的是为了玩弄它。它不完整，但添加/包含已实现。这不是万无一失的，甚至不是错误证明。

[https://github.com/dsx724/php-quotient-filter](https://github.com/dsx724/php-quotient-filter)

希望这可以帮助。

# php - 在左侧面板从商店更改子类别后，magento 不会更改面包屑或类别标题

> ID：12212932
> 
> 赞同：2
> 
> 时间：2012-08-31T09:51:37.083
> 
> 标签：php, magento, breadcrumbs

当我单击 magento 前端左侧面板的侧边栏中的子类别时，magento 不会更改面包屑或类别标题，就像我从顶部菜单中选择子类别时，magento 会更改面包屑和类别标题。

> 那么，当我通过侧边栏选择商店中存在的子类别时，加载适当的面包屑和相关类别标题的解决方案是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:59:31.560

这是因为您属于同一类别，尽管已被侧面菜单中的选项“过滤”。

您可能希望为左侧导航滚动您自己的子类别菜单，此外，根据您的主题，查看不同的“锚定”模式对您的类别页面的作用。

或者使用广受欢迎的扩展：

[http://www.magentocommerce.com/magento-connect/sidebar-navigation-menu-4554.html](http://www.magentocommerce.com/magento-connect/sidebar-navigation-menu-4554.html)

# asp.net - 如何在 asp.net 上自动安装根证书

> ID：12212936
> 
> 赞同：0
> 
> 时间：2012-08-31T09:51:46.133
> 
> 标签：asp.net, certificate

我有一个项目使用了https。所以我使用openssl生成了一个根证书！只是喜欢CA。所以当我通过我的网站访问asp.net时。IE问我证书不合法。我必须点击浏览器输入框安装根证书！但这对客户不利。所以我想知道是否有任何脚本自动安装根证书。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:56:56.723

由于安全原因，这是不可能的，您能做的最好的事情就是从官方证书颁发机构获得证书。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-31T09:58:28.647

据我所知，这是不可能的。这是一件好事。如果您可以强制客户端自动接受/安装证书，那么 SSL 的整个概念就会变得有缺陷。

# c# - 如何从存储过程中返回一个数组？

> ID：12212937
> 
> 赞同：4
> 
> 时间：2012-08-31T09:51:47.177
> 
> 标签：c#, sql-server, ado.net

我需要从存储过程中返回一个数组。而在客户端，最终需要使用 c# 和 ado.net 来检索数据。

```
CREATE PROCEDURE [dbo].[usp_testing]

AS
BEGIN

DECLARE @ARRAY TABLE(sno int,id nvarchar(50)

INSERT @ARRAY(sno,id) values(1,'v123')
INSERT @ARRAY(sno,id) values(2,'v124')
INSERT @ARRAY(sno,id) values(3,'v124')
END 
```

此@Array 表需要返回并检索到客户端

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T09:56:58.280

`@ARRAY`不是一个数组：它是一个表。获取表格的机制很简单，而且很好实践：

```
select * from @ARRAY 
```

要在客户端获得它，请使用 ExecuteReader 或类似 DataTable 的东西，如果它让您满意的话。或者像dapper这样的东西：

```
var arr = connection.Query(
    "usp_testing", commandType: CommandType.StoredProcedure)
    .Select(row => Tuple.Create((int)row.sno, (string)row.id)).ToArray(); 
```

这是一个元组数组。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T10:05:13.630

```
create procedure strange_procedure as
begin

DECLARE @ARRAY TABLE(id int not null identity primary key, value varchar(50))

insert into @ARRAY (value) values ('This value')

select  *  from @ARRAY

end 
```

# c++ - 在 Makefile 中查找 Boost 库

> ID：12212940
> 
> 赞同：3
> 
> 时间：2012-08-31T09:51:54.883
> 
> 标签：c++, boost, makefile, pkg-config

**在构建过程中包含 Boost 库的最佳实践是什么？**

为了说明，假设我们的项目使用了 Boost 的正则表达式，编译如下：

```
g++ -lboost_regex -o main main.cpp 
```

...这意味着我可以编写一个只包含以下内容的 Makefile：

```
LDFLAGS+=-lboost_regex 
```

不幸的是，这在我的系统上不起作用：

```
$ make main
ld: library not found for -lboost_regex
collect2: error: ld returned 1 exit status 
```

这是可以理解的，因为我没有指定库路径，并且 Boost 安装在编译器找不到的位置。

显然，我不想在我的 Makefile 中对该路径进行硬编码。否则，项目无法在其他机器上构建。

一种解决方案是设置`LD_LIBRARY_PATH`，但[不鼓励这样做](http://tldp.org/HOWTO/Program-Library-HOWTO/shared-libraries.html#AEN80)。

普通库的“真正”解决方案是使用`pkg-config`，例如：

```
LDFLAGS+=$(shell pkg-config --libs sqlite3) 
```

......这被解决为类似的东西`-L/path/to/sqlite/lib -lsqlite3`。

不幸的是，[Boost 仍然不支持`pkg-config`](https://svn.boost.org/trac/boost/ticket/1094).

这让我进退两难。似乎没有确定 Boost 库安装路径的通用方法。**其他项目如何处理这个问题？**

（有人建议使用环境变量`BOOST_ROOT`，但这似乎也不是普遍存在的，您需要在 bashrc/profile 文件之一中手动设置它。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:05:17.720

由于我是建议使用的人`BOOST_ROOT`，因此我不妨将其作为答案。

背景：如果 Boost 的`bjam`构建程序`BOOST_ROOT`没有在 boosts 安装根目录中执行，它需要一个环境变量。
有了这个想法，人们不妨“依赖”它，即要求它在`make`被调用时存在，要么一直将其作为完整的环境变量，要么只是在会话/命令期间设置它，如`BOOST_ROOT=/foo/bar/boost make`.

# java - Java在char中转换int值

> ID：12212941
> 
> 赞同：0
> 
> 时间：2012-08-31T09:52:04.620
> 
> 标签：java

这是一个程序，其中第 4 行产生编译错误（可能丢失精度，需要 char find int

```
public class test {
        public static void main(String args[]) {
            char c;
            int i;
            c = 'A';        // 1
                    char ch=32;       //2
            i = c;      //3
            c = i + 1;  //4
            c++;        //5
        }
    } 
```

行号 2 个字符 ch=32；我们在 char 变量 ch 中分配了一个值 32，但没有产生任何错误。我想要这两条线之间的区别；字符 ch=32 和 c=i+1；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-31T09:55:45.057

错误的原因`char`是 2 字节和`int`4 字节。而且java不会让你在变量会丢失它的高位的地方进行隐式转换。您必须从 to 进行显式`int`转换`char`。
在另一个方向上，将`int`值分配给“数字”持有者将起作用，直到您不尝试分配超出范围的内容。（在这种情况下超过 2^16-1）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T09:57:46.843

在这两种情况下，您都请求将有符号的 32 位`int`转换为无符号的 16 位`char`。在这一行中，编译器可以确保数字 32 适合`char`：

```
char ch=32; 
```

在这一行中，编译器只知道您正在将某个`int`值转换为 a `char`，因此它不确定它是否适合：

```
c = i + 1; 
```

每当不能 100% 确定不会有精度损失时，Java 都会坚持使用显式强制转换运算符。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T09:59:16.550

精度损失意味着 INTEGER 具有较大的值，而 CHAR 较小，因此您无法容纳对于该空间来说太大的东西。

这就是您收到该错误的原因。

您需要将 INTEGER 类型转换为 CHAR 但仍然会丢失精度，因为您无法将 INTEGER 放入 CHAR 但如果整数值小于损失精度可以忽略。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T09:59:56.110

转换不应与强制转换相混淆。在这种情况下，您只是在投射。一些操作具有隐式转换，而另一些则没有。例如`=`，您没有指定您可以投射。`++`并进行`+=`隐式转换。

例如

```
char ch = '0';
char ch2 = 2; // implicit casting
ch *= 1.1; // implicit casting
ch2++; // no casting required. 
ch2 += 1; // implicit casting.
ch2 = ch2 + 1; // won't compile, casting required. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T10:04:25.757

其背后的原因是编译器无法自动将较高的数据类型值转换为较低的数据类型值。

这里 int 是更高的数据类型，而 Char 是更低的数据类型......

i+1 计算为整数结果，它不适合 char 类型。

[数据类型自动转换](http://www.google.co.in/imgres?hl=en&biw=1301&bih=635&tbm=isch&tbnid=1M9q3m2R9lQk1M:&imgrefurl=http://tecnoesis.wordpress.com/2009/11/07/declaring-initializing-and-using-variables/&imgurl=http://tecnoesis.files.wordpress.com/2009/11/10-promotion.jpg%253Fw%253D600%2526h%253D362&w=600&h=362&ei=4YtAUPOiNcPMrQe1u4HIBQ&zoom=1&iact=hc&vpx=215&vpy=338&dur=2078&hovh=174&hovw=289&tx=164&ty=83&sig=111601735656816373702&page=1&tbnh=95&tbnw=158&start=0&ndsp=20&ved=1t:429,r:7,s:0,i:95)的图像

从高到低是不可能的

从低到高是可能的

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T09:55:23.960

用这个：

```
c = (char) i + 1; 
```

但请确保您在值`i`范围内`char`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T09:57:31.823

正如[Character](http://docs.oracle.com/javase/6/docs/api/java/lang/Character.html)类中所定义的，java 中的 chars 是字符的 UTF-16 表示。因此`char`，大小为 16 位。

在您的第一个作业中，您将`32`可以存储为 16 位的 UTF-16 字符分配给 UTF-16 字符，这样就可以了。

但是，当您尝试将任何类型的 int as`i`转换为 32 位数据时，您正在从 32 位数据转换为 16 位数据，这是一个不能隐含的操作。

```
short a = 32; // fine 
short b = 3243334; // can't compile
char c = 32; // fine
char d = 3243334; // can't compile 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-31T10:00:36.110

我不确定我是否了解您想要什么....但是：

*   第 2 行有效，因为文字数字 '32' 可以用 char 的 2 字节表示
*   第 4 行失败，因为它表示如果您尝试将 4 字节值 (int) 分配给 2 字节位置 (char)，则需要强制转换。

现在，如果你想要的只是做这种 char 算术，你可以：

*   使“我”成为一个字符。
*   将演员表添加到第 4 行。

两者中的一个将起作用，但是，从您显示的片段中，可能使 'i' 成为一个字符更有意义....

# java - 使用 Java 的 Selenium WebDriver (Selenium 2) 中 selenium.refresh() 的等效代码

> ID：12212943
> 
> 赞同：8
> 
> 时间：2012-08-31T09:52:07.540
> 
> 标签：java, refresh, selenium-webdriver, selenium-rc

在 Selenium RC 中，我使用以下代码使用 Java 在浏览器上进行刷新：

```
selenium.refresh(); 
```

WebDriver 中刷新的等效代码是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-31T09:55:31.467

以下是使用 Java 的 Selenium WebDriver 中的等效代码：

```
driver.navigate().refresh(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-10-31T04:45:55.190

您可以使用：

```
driver.navigate().refresh(); 
```

例如看这里 -[如何刷新当前网页](http://reditblog.blogspot.in/2014/10/how-to-refresh-current-web-page.html)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-05T10:33:59.833

使用 Ctrl+F5 刷新的另一种方法：使用 WebDriver 和 Actions 实例，如下所示：

```
Actions actionObject = new Actions(driver);
actionObject.keyDown(Keys.CONTROL).sendKeys(Keys.F5).perform(); 
```

# mysql - 通过在索引字段上使用文件排序进行排序

> ID：12212944
> 
> 赞同：0
> 
> 时间：2012-08-31T09:52:21.530
> 
> 标签：mysql

我的查询在哪里有问题`Using filesort`，即使该字段已编入索引。

这是我的查询：

```
EXPLAIN
SELECT u.name, u.surname, u.id
FROM rw_users u
ORDER BY u.created DESC
LIMIT 4 
```

这是输出：

```
id  select_type  table  type  possible_keys  key  key_len  ref  rows  Extra           
1   SIMPLE       u      ALL                                     9     Using filesort 
```

这是`create table`：

```
CREATE TABLE `rw_users` (
  `id` mediumint(8) unsigned NOT NULL AUTO_INCREMENT,
  `created` int(11) unsigned NOT NULL,
  `email` varchar(255) COLLATE utf8_swedish_ci NOT NULL,
  `password` char(64) CHARACTER SET utf8 COLLATE utf8_bin NOT NULL,
  `name` varchar(100) COLLATE utf8_swedish_ci NOT NULL,
  `surname` varchar(100) COLLATE utf8_swedish_ci NOT NULL,
  `premium` tinyint(1) unsigned NOT NULL DEFAULT '1' COMMENT 'level or premium membership (0 = standard)',
  PRIMARY KEY (`id`),
  UNIQUE KEY `email` (`email`),
  KEY `password` (`password`),
  KEY `created` (`created`),
  KEY `premuim` (`premium`),
  KEY `name_surname` (`name`,`surname`),
  CONSTRAINT `FK_rw_users` FOREIGN KEY (`premium`) REFERENCES `rw_premium` (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=14 DEFAULT CHARSET=utf8 COLLATE=utf8_swedish_ci 
```

我需要做什么才能摆脱`Using filesort`？我在具有 118 行的数据库（完全相同的表）上进行了测试，它仍然给我`Using filesort`，所以它不能使用它，因为它比使用索引更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:54:37.517

为了获得选择查询的最佳性能，请添加[覆盖索引](https://stackoverflow.com/questions/11578241/is-there-any-way-to-check-the-performance-of-mysql-indexing/11578264#11578264)。见[这里](http://www.mysqlconf.com/mysql2009/public/schedule/detail/6796)：

```
ALTER TABLE rw_users ADD KEY ix1 (created, name, surname, id); 
```

对于`INNODB`不需要包含`id`在索引中的引擎，请使用 . 检查两个索引`EXPLAIN`。

```
ALTER TABLE rw_users ADD KEY ix1 (created, name, surname); 
```

# ajax - JSF 2 AJAX 不需要的呈现为两种形式

> ID：12212948
> 
> 赞同：0
> 
> 时间：2012-08-31T09:52:37.957
> 
> 标签：ajax, jsf-2

因此，这与经常被问到的“如何将消息呈现到多个表单”相反。我在一页上有两个表单，在一个表单中验证后，摘要错误（如果验证失败）显示在提交按钮下方的两个表单上。如果代码成功发送所需的电子邮件，则确认消息也会以两种形式显示。它们应该只显示在提交的表单中。inputTexts 下面的消息可以正常工作。我究竟做错了什么？

```
<p:panel>
    <h:form id="id_rememberUserNameForm" prependId="false">
                <td>
...
                    <p:inputText 
                        id="id_existingEmailAddress"
                        styleClass="registerinputtext width_20em"
                        size="20" 
                        maxlength="60" 
                        value="#{credentialsManagementBean.emailAddress}"
                        validator="#{multivalidator.validateEmailExists}" >
                        <f:ajax event="blur" render="id_noSuchEmailError" />
                    </p:inputText>
                </td>
            </tr>
            <!-- validation error handling +++++++++++++++++ -->
            <tr class="errorMessage min_height_1p5em">
                <td colspan="2" >
                    <h:message for="id_existingEmailAddress" 
                                id="id_noSuchEmailError" 
                                showDetail="false" 
                                showSummary="true"/>
                </td>
            </tr>
        </table>
        <p:commandButton id="id_remindUsernameButton" 
                            value="Retrieve Username" 
                            action="#{credentialsManagementBean.rememberUsername}" >
            <f:ajax execute="id_rememberUserNameForm" render="id_UserReminderMessage" />
        </p:commandButton>
        <p:messages id="id_UserReminderMessage" 
                            showSummary="false"
                            showDetail="true"
                            autoUpdate="true" />

    </h:form>
</p:panel>

<!-- next form +++++++++++++++++ -->

<p:panel>
    <h:form id="id_resetPasswordForm" prependId="false">
...
                    <p:inputText 
                        id="id_existingUsername"
                        styleClass="registerinputtext width_20em"
                        size="20" 
                        maxlength="20" 
                        value="#{credentialsManagementBean.username}"
                        validator="#{multivalidator.validateUsernameExists}">
                        <f:ajax event="blur" render="id_noSuchUserError" />
                    </p:inputText>
                </td>
            </tr>
            <!-- validation error handling +++++++++++++++++ -->
            <tr class="errorMessage min_height_1p5em">
                <td colspan="2" >
                    <h:message for="id_existingUsername" 
                                id="id_noSuchUserError" 
                                showDetail="true" 
                                showSummary="false"/>
                </td>
            </tr>
        </table>
        <p:commandButton id="id_resetPasswordButton" 
                            value="Retrieve Username" 
                            action="#{credentialsManagementBean.resetPassword}" >
            <f:ajax execute="id_resetPasswordForm" render="id_pwResetMessage" />
        </p:commandButton>
        <p:messages id="id_pwResetMessage" 
                            showSummary="true"
                            showDetail="false"
                            autoUpdate="true" />
    </h:form>
</p:panel> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T13:01:06.843

使用`<p:commandButton>`外观更新。所以试试这个：

```
<p:commandButton id="id_remindUsernameButton" value="Retrieve Username" 
   action="#{credentialsManagementBean.rememberUsername}" update="id_UserReminderMessage" process="@form">
</p:commandButton> 
```

默认是`<p:commandButton>`ajax提交，不需要`<f:ajax>`

# google-play - 如何跟踪在 android 中安装我们应用的用户

> ID：12212949
> 
> 赞同：0
> 
> 时间：2012-08-31T09:52:39.067
> 
> 标签：google-play

有没有办法我们可以跟踪安装我们的应用程序的用户，当用户卸载时，我们也应该得到响应，该特定用户已卸载..Android 市场如何跟踪已卸载的应用程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-01T21:08:33.687

开发者帐户有一个仪表板，您可以从中找到有多少活动安装。对于 Google 来说，跟踪已卸载的应用程序很容易，因为您从它下载的所有应用程序都与一个 gmail 帐户相关联，并且每当您访问市场时，它们都会根据该帐户列出更新。

如果您想跟踪安装和卸载，您可以像许多其他应用程序一样拥有自己的应用程序激活/注册模块。我不确定您将如何跟踪卸载。

# c - 位图反转颜色

> ID：12212951
> 
> 赞同：0
> 
> 时间：2012-08-31T09:52:55.790
> 
> 标签：c, winapi, hwnd, ppm, getdibits

前段时间我问了一个关于将 hwnd 保存到 ppm 文件中的问题。感谢stackoverflow用户，我解决了我的问题。我的工作正常，但我仍然有一个问题：红色和蓝色是颠倒的。

代码和我之前的问题在这里： [hwnd to ppm issue](https://stackoverflow.com/questions/11991675/hwnd-to-ppm-issue)

这是位图信息数据：

```
bi.biSize = sizeof(BITMAPINFOHEADER);    
bi.biWidth = w;    
bi.biHeight = -h;  
bi.biPlanes = 1;    
bi.biBitCount = 24;    
bi.biCompression = BI_RGB;    

bi.biSizeImage = 0;  
bi.biXPelsPerMeter = 0;    
bi.biYPelsPerMeter = 0;    
bi.biClrUsed = 0;    
bi.biClrImportant = 0; 
```

我用谷歌搜索，似乎问题是 BI_RGB，我应该使用 BI_BITFIELDS ...但我没有找到有关如何使用它的文档。而且我真的不想逐像素读取所有数据以恢复蓝色和红色。有没有办法在不逐个像素的情况下完成它？

在此先感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T10:54:03.847

在 24bpp BMP 中，像素以至少字节序存储它们的颜色。蓝色是第一，红色是最后。在 PPM 中，红色在前，蓝色在后。这在很大程度上解释了为什么它在 Windows 上是一种如此晦涩的图像格式。您必须自己交换存储顺序。

# r - 使用 httr 对 Fitbit 进行 Oauth 身份验证

> ID：12212958
> 
> 赞同：5
> 
> 时间：2012-08-31T09:53:22.170
> 
> 标签：r, oauth, fitbit, httr

我正在尝试使用[httr library](https://github.com/hadley/httr/)连接到 fitbit api 。

使用提供的示例，我想出了以下代码：

```
library(httr)

key <- '<edited>'
secret <- '<edited>'
tokenURL <- 'http://api.fitbit.com/oauth/request_token'
accessTokenURL <- 'http://api.fitbit.com/oauth/access_token'
authorizeURL <- 'https://www.fitbit.com/oauth/authorize'

fbr <- oauth_app('fitbitR',key,secret)
fitbit <- oauth_endpoint(tokenURL,authorizeURL,accessTokenURL)

token <- oauth1.0_token(fitbit,fbr)
sig <- sign_oauth1.0(fbr,
    token=token$oauth_token,
    token_secret=token$oauth_token_secret
) 
```

我完成了*身份验证。*来自 httr 的消息，但尝试访问 api 然后会引发错误消息

```
GET("http://api.fitbit.com/1/user/-/activities/date/2012-08-29.json", sig)
Response [http://api.fitbit.com/1/user/-/activities/date/2012-08-29.json]
  Status: 401
  Content-type: application/x-www-form-urlencoded;charset=UTF-8
{"errors":[{"errorType":"oauth","fieldName":"oauth_access_token","message":"Invalid signature or token '<edited>' or token '<edited>'"}]} 
```

关于问题可能是什么的任何线索？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-03T09:00:06.203

问题来自 httr 库，它使用 curlEscape 对参数进行编码，而 OAuth 1.0 规范需要百分比编码（请参阅[此页面](http://oauth.net/core/1.0/#encoding_parameters)）。

用 curlPercentEncode 替换对 curlEscape 的调用解决了这个问题！

非常感谢@mark-s 的帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-31T15:14:52.620

我唯一注意到的是，您获取签名的调用与 httr 示例略有不同。httr 示例是：

```
sig <- sign_oauth1.0(myapp, token$oauth_token, token$oauth_token_secret) 
```

虽然您的代码是：

```
sig <- sign_oauth1.0(fbr,
    token=token$oauth_token,
    token_secret=token$oauth_token_secret
) 
```

您的代码中是否需要“token=”和“token_secret=”？

# php - 未创建目录

> ID：12212959
> 
> 赞同：0
> 
> 时间：2012-08-31T09:53:23.150
> 
> 标签：php, directory

我是 php 的初学者，我创建目录的代码如下所示。

```
<?php

        if($_POST["create"])
        { 
            $name=$_POST["newDirCreated"];
            $uploaddir = $name;
            mkdir($uploaddir,0777);
            print "created";
        }

?> 
```

但是目录不是使用这个创建的。如果我想在 public_html 中创建一个目录，我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T10:04:25.173

[当出现问题时， mkdir()](http://docs.php.net/mkdir)不会抛出异常。你必须让你的脚本更“健谈”才能获得更多关于正在发生的事情的信息

```
<?php
error_reporting(E_ALL);
ini_set('display_errors', true);

if( !isset($_POST["create"]) ) {
    echo 'post parameter create not present';
}
else {
    // you are absolutely sure about passing the POST parameter as-is to mkdir() ?
    // ok, it's up to you; just make sure it doesn't get abused....
    echo 'current working directory: ', htmlspecialchars(getcwd()), "<br />\n";
    echo 'newDirCreated: ', htmlspecialchars($_POST["newDirCreated"]), "<br />\n";
    $rc = mkdir($_POST["newDirCreated"], 0777);
    if ( $rc ) {
        echo 'created';
    }
    else {
        echo "an error occured<br />\n";
        if ( function_exists('error_get_last') ) {
            echo 'error_get_last: ', htmlspecialchars(print_r(error_get_last(), true));
        }
        else if ( isset($php_errormsg) ) {
            echo 'php_errormsg: ', htmlspecialchars($php_errormsg);
        }
        else {
            echo 'no additional error information available';
        }
    }
} 
```

但请记住在调试后再次使其不那么健谈（但处理错误条件）。您不应该将所有信息暴露给任意用户......

也可以看看：

*   [http://docs.php.net/reserved.variables.phperrormsg](http://docs.php.net/reserved.variables.phperrormsg)
*   [http://docs.php.net/error_get_last](http://docs.php.net/error_get_last)

# font-face - 为什么这个@font-face 在 IE8 中不起作用？

> ID：12212961
> 
> 赞同：0
> 
> 时间：2012-08-31T09:53:26.740
> 
> 标签：font-face

我尝试了很多不同的变体，但这些都不适用于 IE：

```
@font-face {
    font-family: 'Friday';
    src: url(../fonts/callie.eot);
    src: local('☺'), url(../fonts/callie.otf) format('opentype');
    font-weight: normal;
    font-style: normal;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:02:53.093

您忘记了 IE 6-8 属性（以及更多属性）。

```
@font-face {
    font-family: 'Friday';
    src: url('callie.eot');                                    /* IE9 Compat Modes */
    src: url('callie.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
         url('callie.woff') format('woff'),                    /* Modern Browsers */
         url('callie.ttf')  format('truetype'),                /* Safari, Android, iOS */
         url('callie.svg#svgFontName') format('svg');          /* Legacy iOS */
    } 
```

资料来源：[http ://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax](http://www.fontspring.com/blog/further-hardening-of-the-bulletproof-syntax)

您还可以使用[Font Squirrel Generator生成新文件和有效的 CSS](http://www.fontsquirrel.com/fontface/generator)

保罗爱尔兰人[在这里发表了关于这件事的文章](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)

# c# - 检查字符串是否为有效整数、双精度、布尔等的扩展方法

> ID：12212962
> 
> 赞同：3
> 
> 时间：2012-08-31T09:53:30.503
> 
> 标签：c#

我正在尝试创建一个扩展方法来`string`说明字符串是有效的整数、双精度、布尔还是小数。我对**switch..case**和尝试使用泛型不感兴趣。

**扩展方法**

```
public static bool Is<T>(this string s)
{
   ....
} 
```

**用法**

```
string s = "23";

if(s.Is<int>())
{
   Console.WriteLine("valid integer");
} 
```

我无法成功实现扩展方法。我正在寻找一些想法/建议......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-31T09:59:08.797

使用 tryparse ：

```
string someString = "42";
int result;
if(int.TryParse(someString, out result))
{
    // It's ok
     Console.WriteLine("ok: " + result);
}
else
{
    // it's not ok
    Console.WriteLine("Shame on you");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-31T09:58:15.927

这可能使用以下`Cast<>()`方法起作用：

```
 public static bool Is<T>(this string s)
    {
        bool success = true;
        try
        {
            s.Cast<T>();
        }
        catch(Exception)
        {
            success = false;
        }
        return success;
    } 
```

**编辑**

显然这并非每次都有效，所以我在这里找到了另一个工作版本：

```
public static bool Is<T>(this string input)
{
    try
    {
        TypeDescriptor.GetConverter(typeof(T)).ConvertFromString(input);
    }
    catch
    {
        return false;
    }

    return true;
} 
```

取自[这里](https://stackoverflow.com/questions/2961656/generic-tryparse)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-31T10:03:25.180

这就是你想要的；

```
public static bool Is<T>(this string s)
{

    TypeConverter converter = TypeDescriptor.GetConverter(typeof(T));

    try
    {   
        object val = converter.ConvertFromInvariantString(s);
        return true;
    }
    catch
    {
        return false;
    }
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-31T10:02:28.757

实现示例：

```
public static class StringExtensions
{
    public static bool Is<T>(this string s)
    {
        if (typeof(T) == typeof(int))
        {
            int tmp;
            return int.TryParse(s, out tmp);
        }

        if (typeof(T) == typeof(long))
        {
            long tmp;
            return long.TryParse(s, out tmp);
        }

        ...

        return false;
    }
} 
```

用法：

```
var test1 = "test".Is<int>();
var test2 = "1".Is<int>();
var test3 = "12.45".Is<int>();
var test4 = "45645564".Is<long>(); 
```

另请注意，您应该将一些其他参数作为方法的输入，例如`IFormatProvider`让用户指定要使用的文化。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-08-31T09:57:34.040

我会使用 try/catch

```
string a = "23";

try{

int b = a;

Console.WriteLine("valid integer");

}
catch
{
Console.WriteLine("invalid integer");
} 
```

# java - 为什么 playframework 2.0.3 在控制器中显示无法识别的字符以导致编译错误？

> ID：12212966
> 
> 赞同：0
> 
> 时间：2012-08-31T09:53:37.970
> 
> 标签：java, encoding, playframework-2.0

我正在使用 Play Framework 2.0.3 启动一个新应用程序，但是我发现如果 Controller 中存在编译错误，则刷新浏览器后错误消息无法显示。相反，浏览器中显示了一些无法识别的字符。

例如，我在控制器中添加一个分号：

```
public class ; Application extends Controller {

  public static Result index() {
    return ok(index.render("OK."));
  }
} 
```

刷新后，浏览器显示：

```
Compilation error
��Ҫ <��ʶ��> 
```

但是，如果我在 View 或 Route 中犯了一些错误，则可以在浏览器中显示正确的错误消息。

我的环境：[文件编码：utf-8无BOM，操作系统：Windows XP中文版，浏览器：Chrome英文版]

任何人都可以给我一些提示，我该如何诊断这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T03:28:09.640

[我在这里](http://lele9001.blog.163.com/blog/static/3397342012423114449823/)找到了答案：

`build.bat`从 play 安装目录中查找（我的是在`D:\play-2.0\framework`）。

用文本编辑器编辑它，更改`%DEBUG_PARAM% -Dfile.encoding=UTF-8`为`%DEBUG_PARAM% -Dfile.encoding=GBK`

重启播放框架。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T12:18:35.920

使用一些 IDE 来处理代码，它会在您尝试运行它之前向您显示语法错误，并且会节省您大量的时间。

对于这个问题，去掉`class`world后面的分号。

# arrays - perl中的累积频率数组？

> ID：12212967
> 
> 赞同：0
> 
> 时间：2012-08-31T09:53:39.173
> 
> 标签：arrays, perl, for-loop, cumulative-frequency

我有一个整数数组，我想知道如何为累积频率数组编写代码。我应该使用 for 循环还是有更快的方法。

例如给定整数：1 2 3 4 5 6 7 8 新数组将打印：1 3 6 10 15 21 28 36 谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-31T10:45:03.733

您也可以使用`map`代替`foreach ... push`：

```
#!/usr/bin/perl -w
use strict;
my @arr = 1..10;
my $sum;
my @newarr = map { $sum += $_ } @arr;
print "@newarr\n"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:19:35.267

这很容易在一个`for`循环中完成

```
use strict;
use warnings;

my @data = 1 .. 8;

my @cumulative = $data[0];
push @cumulative, $cumulative[-1] + $_ for @data[1..$#data];

print "@cumulative\n"; 
```

**输出**

```
1 3 6 10 15 21 28 36 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T10:10:45.300

一种方式，非常低效：

```
 #!/usr/bin/env perl
    use strict;
    use warnings;
    use List::Util qw/sum/;

    my @arr = (1..10);
    my @newarr;

for my $i (0..$#arr) {
    $newarr[$i] = sum(@arr[0..$i]) 
} 
```

循环和求和要好得多：

```
use strict;
use warnings;

my @arr = (1..10);
my @newarr;
my $mid;

for my $i (0..$#arr) {
  $mid += $arr[$i];
  push(@newarr,$mid);
} 
```

# android - 服务中的 SurfaceView

> ID：12212969
> 
> 赞同：4
> 
> 时间：2012-08-31T09:53:57.223
> 
> 标签：android, android-camera, android-service

我目前正在使用 Activity 在 ICS 及更高版本中使用相机和手电筒，我使用 SurfaceView，现在我的问题是如何在服务中使用相同的代码，如何创建 SurfaceView 并使用相机？

谢谢 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-06-16T08:45:35.277

您应该使用 a`TextureSurface`而不是 a `SurfaceView`（可从 API 11 获得）。看看[这个问题](https://stackoverflow.com/questions/24205661/camera-frames-in-a-service-background-process)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-03-16T04:00:57.620

您想在服务中创建一个表面视图并使用该视图到相机。源代码在这里[https://github.com/renhongtao/FloatCameraWindow](https://github.com/renhongtao/FloatCameraWindow)

1.在服务示例中创建表面视图。此解决方案有助于了解如何在服务中创建视图。

使用名为**WindowManager的类和名为****LayoutParams**的参数对象。注意 params.type，在不同的 SDK 版本中可能会失败。

在 AndroidManifest.xml 中

```
<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" />
<service android:name=".FloatWindowService" /> 
```

创建一个新的服务子类

```
public class TopWindowService extends Service
{
private static WindowManager wm;
private static WindowManager.LayoutParams params;
private Button btn_floatView;

@Override
public void onCreate()
{
    super.onCreate();          
    createFloatView();
}

 private void createFloatView()
{

    btn_floatView = new Button(getApplicationContext());
    btn_floatView.setText("Hello");
    wm = (WindowManager)getSystemService(Context.WINDOW_SERVICE);
    params = new WindowManager.LayoutParams();      
    params.type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;
    //in different sdk this type should change 
    params.format = PixelFormat.RGBA_8888; // 
    params.flags = WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL
            | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE;

    // set float view size
    params.width = 100;
    params.height = 100;

    // set touch listen action
    btn_floatView.setOnTouchListener(new OnTouchListener()
    {
        int lastX, lastY;
        int paramX, paramY;

        public boolean onTouch(View v, MotionEvent event)
        {
            switch (event.getAction())
            {
                case MotionEvent.ACTION_DOWN:
                    lastX = (int) event.getRawX();
                    lastY = (int) event.getRawY();
                    paramX = params.x;
                    paramY = params.y;
                    break;
                case MotionEvent.ACTION_MOVE:
                    int dx = (int) event.getRawX() - lastX;
                    int dy = (int) event.getRawY() - lastY;
                    params.x = paramX + dx;
                    params.y = paramY + dy;

                    wm.updateViewLayout(btn_floatView, params);
                    break;
            }
            return true;
        }
    });

    wm.addView(btn_floatView, params);
    isAdded = true;
} 
```

2.将服务创建的表面设置为相机示例。这部分源码太多了。主要思想是使用类**LayoutInflater**加载一个xml文件。然后findViewById得到相机需要的表面。如示例 1 所示。使用 WindowManager 添加视图（在 xml 中）。

2.1 准备一个xml包含一个表面视图，名字是**cmera_layout**

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/camera_window_layout"
    android:layout_width="100dip"
    android:layout_height="100dip"
    android:background="@drawable/ic_launcher_background"
    >       
<SurfaceView
    android:id="@+id/camera_surface"
    android:layout_width="80dip"
    android:layout_height="80dip"
    android:layout_gravity="center" />
</LinearLayout> 
```

2.2 创建视图类

```
public class FloatWindowCamera extends LinearLayout {
protected  SurfaceView mCameraView; 
public static int viewWidth;
public static int viewHeight;
 private static int statusBarHeight;
private WindowManager mWindowManager;
private WindowManager.LayoutParams mParams;
private float xInScreen;
private float yInScreen;
private float xDownInScreen;
private float yDownInScreen;    
private float xInView;
private float yInView;

public FloatWindowCamera(Context context) {
    super(context);
/************************Main idea here**************************/
    mWindowManager = context.getSystemService(Context.WINDOW_SERVICE);
    LayoutInflater.from(context).inflate(R.layout.cmera_layout, this);
    View view = findViewById(R.id.camera_surface);
    viewWidth = view.getLayoutParams().width;
    viewHeight = view.getLayoutParams().height;
    mCameraView = (SurfaceView) view;
/****************************************************/

}

public SurfaceView getCameraView(){
    return mCameraView;
}
@Override
public boolean onTouchEvent(MotionEvent event) {
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:           
        xInView = event.getX();
        yInView = event.getY();
        xDownInScreen = event.getRawX();
        yDownInScreen = event.getRawY() - getStatusBarHeight();
        xInScreen = event.getRawX();
        yInScreen = event.getRawY() - getStatusBarHeight();
        break;
    case MotionEvent.ACTION_MOVE:
        xInScreen = event.getRawX();
        yInScreen = event.getRawY() - getStatusBarHeight();         
        updateViewPosition();
        break;      
    default:
        break;
    }
    return true;
}   
public void setParams(WindowManager.LayoutParams params) {
    mParams = params;
}

private void updateViewPosition() {
    mParams.x = (int) (xInScreen - xInView);
    mParams.y = (int) (yInScreen - yInView);
    mWindowManager.updateViewLayout(this, mParams);
}

private int getStatusBarHeight() {
    if (statusBarHeight == 0) {
        try {
            Class<?> c = Class.forName("com.android.internal.R$dimen");
            Object o = c.newInstance();
            Field field = c.getField("status_bar_height");
            int x = (Integer) field.get(o);
            statusBarHeight = getResources().getDimensionPixelSize(x);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }
    return statusBarHeight;

}

} 
```

2.3 创建表面视图然后给出对象。

我们使用 TopFloatWindowService 相同的类名

```
 public class TopWindowService extends Service
        {
...

    @Override
        public void onCreate()
        {

            super.onCreate();           
/********************add the view in WindowManager**************/

            mView = createCameraWindow(getApplicationContext()).getCameraView();

            //**now you can use this mView to the camera**  then startpreview       

        }

public static FloatWindowCamera createCameraWindow(Context context) {
            WindowManager windowManager = context.getSystemService(Context.WINDOW_SERVICE);
            int screenWidth = windowManager.getDefaultDisplay().getWidth();
            int screenHeight = windowManager.getDefaultDisplay().getHeight();
            if (mCameraWindow == null) {
                mCameraWindow = new FloatWindowCamera(context);
                if (mCameraWindowParams == null) {
                    mCameraWindowParams = new LayoutParams();
                    mCameraWindowParams.type = LayoutParams.TYPE_TOAST ;
                    mCameraWindowParams.format = PixelFormat.RGBA_8888;
                    mCameraWindowParams.flags = LayoutParams.FLAG_NOT_TOUCH_MODAL
                            | LayoutParams.FLAG_NOT_FOCUSABLE;
                    mCameraWindowParams.gravity = Gravity.LEFT | Gravity.TOP;
                    mCameraWindowParams.width = FloatWindowCamera.viewWidth;
                    mCameraWindowParams.height = FloatWindowCamera.viewHeight;
                    mCameraWindowParams.x = screenWidth;
                    mCameraWindowParams.y = screenHeight / 2;
                }
                mCameraWindow.setParams(mCameraWindowParams);
//here add the view to show 
                windowManager.addView(mCameraWindow, mCameraWindowParams);
                Log.e("FLOAT","create small success");
            }
            return mCameraWindow;
        } 
```

代码太多了，希望对大家有所帮助。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-31T10:00:46.887

服务不是使用这些元素的地方。你将无法做到这一点。

# winforms - Winform Framework 2.0 中的 ListView 和 DataGridView 中始终可见滚动条

> ID：12212971
> 
> 赞同：2
> 
> 时间：2012-08-31T09:54:00.373
> 
> 标签：winforms, listview, datagridview

任何人都可以提供解决方案以在 Winform（Framwwork 2.0）中的 DataGridView 和 ListView 中始终显示滚动条（即使列表中没有项目）？
我试过但没有找到任何地方。

我尝试了以下功能但没有按预期工作

```
[DllImport("user32")] 
private static extern long ShowScrollBar(long hwnd, long wBar, long bShow); 
```

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T00:21:13.860

您可以使用[Better ListView Express](http://www.componentowl.com/better-listview-express)轻松完成此操作（它是免费的第 3 方 WinForms 控件）：

```
listView.VScrollBarDisplayMode = BetterListViewScrollBarDisplayMode.ShowAlways; 
```

水平滚动条也可以这样做：

```
listView.HScrollBarDisplayMode = BetterListViewScrollBarDisplayMode.ShowAlways; 
```

该控件是 100% 托管的，因此不需要 WinAPI 调用。

# jquery - 使用带有 jquery 验证的名称中的点

> ID：12212976
> 
> 赞同：0
> 
> 时间：2012-08-31T09:54:16.380
> 
> 标签：jquery, validation

我需要验证的字段名称包含一个点。使用 Jquery 的验证扩展我这样做：

```
$('#IDENTITY_DETAILS').validate({
    ignore: "input[type='text']:hidden",
    rules: {
        HOLDERS_PERSONAL.BIRTHDAY: { required: true, validateBirthday: true },
        ...
    },
    messages: {
        HOLDERS_PERSONAL.BIRTHDAY:{
            required: "Please fill in your birthday.",
            validateBirthday: "Please fill in a valid birthday."
        },
        ...
    }, 
```

但这当然会出错。我怎样才能以这种方式使用一个点？我必须使用一个点。不要告诉我不要使用它。如果您知道如何使用 id 设置规则和消息，那很好。

我知道可以单独设置规则，从而使用 id，但我还需要设置带有名称的消息，我认为没有像规则一样设置消息的单独方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:37:15.677

前段时间我找到了解决问题的方法。无法使用 HOLDERS_PERSONAL.BIRTHDAY 中的点。看来我最终使用的 CRM 也可以使用 BIRTHDAY 作为名称。

总之，名称中的一个点不是一个好主意，永远不应该这样做。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-31T09:58:12.293

```
rules: {
        "HOLDERS_PERSONAL.BIRTHDAY": { required: true, validateBirthday: true },
        ...
    },
    messages: {
            "HOLDERS_PERSONAL.BIRTHDAY":{
                required: "Please fill in your birthday.",
                validateBirthday: "Please fill in a valid birthday."
            }, 
```

试试这个

# c# - 更新gridview而不刷新页面

> ID：12212980
> 
> 赞同：1
> 
> 时间：2012-08-31T09:54:32.123
> 
> 标签：c#, asp.net, gridview

现在我重定向到同一页面以在网格视图中显示更新的值。但我想保持在同一页面上。我使用列表作为数据源，而不是任何数据库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-31T10:02:38.443

尝试使用更新面板

```
<asp:UpdatePanel ID="UpdtPnlForGrdVw" runat="server" UpdateMode="Conditional">
    <ContentTemplate>
        <asp:GridView ...></asp:GridView>
    </ContentTemplate>
</asp:UpdatePanel> 
```

当我们将 UpdateMode 设置为 Conditional 时，我们的意思是

> 我们将`UpdtPnlForGrdVw`手动更新内容。

将数据绑定到gridview后使用

```
UpdtPnlForGrdVw.Update() 
```

更新更新面板的内容，在您的情况下将是网格视图。

您也可以使用 JavaScript 执行此操作，检查[https://stackoverflow.com/a/6177348/647884](https://stackoverflow.com/a/6177348/647884)，请记住，如果您尝试链接中的解决方案，您将不需要打开器。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-31T09:55:35.710

```
 <asp:GridView ID="GridView1" runat="server" EnableViewState="false">
    </asp:GridView> 
```

通过执行 enableviewstate=”false”，我们确保看到更新的数据。！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-31T10:03:10.543

试试下面的代码：

```
 GridView1.DataBind(); 
```

# php - 1 查看每个 IP 或设置 Cookie

> ID：12212983
> 
> 赞同：0
> 
> 时间：2012-08-31T09:54:38.207
> 
> 标签：php, mysql, html, cookies

好的，我想允许一个用户在每个页面上查看 1 次，然后向他们发送一个 cookie，阻止他们再次查看该页面，但我不擅长使用 cookie，我会用 IP 来做，但我宁愿通过饼干。这可能吗？我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:57:00.093

最简单的答案：

```
if(isset($_COOKIE['myCookie'])){
    die('Not allowed! Only one view per user!');
}
else{
    setcookie('myCookie', true);
}
//content here 
```

使用会话进行操作：

```
session_start();
if(isset($_SESSION['mySession'])){
    die('Not allowed! Only one view per user!');
}
else{
    $_SESSION['mySession'] = true;
}
//content here 
```

重定向而不是显示丑陋的错误：

```
if(isset($_COOKIE['myCookie'])){
    header('Location: error.php');
    exit;
}
else{
    setcookie('myCookie', true);
}
//content here 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T09:57:09.550

很有可能

```
<?php 
    if(isset($_COOKIE['blocked'])) {die('Access denied');}
    setcookie("blocked", true);
?> 
```

当然，绕过（删除cookies）是微不足道的。

你遇到的真正问题是信任问题。Cookie 是由客户端发送给您的，您*永远*不应信任客户端。

从根本上说，如果您想限制访问，您要么需要在服务器端记录一些无法更改的内容（例如强制用户登录、与用户关联），要么接受这一点，您实际上是在设置一个非常不安全的防御。

请注意，IP 地址也不好，因为公司中的许多用户可能看起来都具有相同的 IP 地址 - 因此阻止一个会阻止所有用户。此外，一些在家中的用户只需断开/重新连接调制解调器/路由器即可获得新的 IP 地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T10:01:46.953

```
if ( !isset($_COOKIE['visited'][$page_id]) )
{
    // leave him view the page
    $_COOKIE['visited'][$page_id] = true;
}
else
{
    // get him out of there
} 
```

这需要在索引/页面的开头编写。

但是，我不推荐这样做，因为 cookie 很容易被客户端编辑。会话是安全的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T10:11:36.130

我会避免使用：

A) 限制访问的 Cookies（可由客户端编辑）

B）IP地址'（可以很容易地更改。）

正如@Basic 所说，也许让他们登录并只让该用户查看一次。

# google-chrome-extension - 使用从内容脚本到后台页面的 sendMessage 的 Google Chrome 扩展变量未定义

> ID：12212986
> 
> 赞同：1
> 
> 时间：2012-08-31T09:54:49.873
> 
> 标签：google-chrome-extension, local-storage

我正在开发一个基本的 Google Chrome 扩展程序，但在从 localStorage 获取值时遇到问题。我在内容脚本中使用 sendMessage 从后台页面请求变量。当我得到响应时，变量始终是“未定义的”，除非我在响应之后放置类似 alert() 的东西......然后变量包含我的值。你能帮我弄清楚为什么会这样以及如何正确地做到这一点吗？我已经为这篇文章编写了代码，它在下面。非常感谢你！

* * *

## 清单.json

```
{
  "name": "Test Extension",
  "version": "1.0",
  "manifest_version": 2,
  "description": "A test extension.",
  "background": {
    "scripts": ["background.js"]
  },
  "content_scripts": [
    {
      "matches": ["<all_urls>"],
      "js": ["content.js"]
    }
  ],
 "permissions": [
    "tabs", "<all_urls>"
  ]
} 
```

* * *

## 内容.js

```
alert('content');

var color;

chrome.extension.sendMessage({greeting:"color"},function(response){color = response.farewell;});

// alert('pause'); // uncommenting this line lets me get the value...why?

alert('content - ' + color); 
```

* * *

## 背景.js

```
alert('background');

localStorage["color"] = "lightblue";

var color = localStorage["color"];

alert('background - ' + color);

chrome.extension.onMessage.addListener(function(request,sender,sendResponse)
{

if (request.greeting == "color") {sendResponse({farewell:color});}

}); 
```

* * *

非常感谢您的帮助！:)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-31T11:28:53.500

因为响应在回调函数中。当你有这个：

```
chrome.extension.sendMessage({greeting:"color"},function(response){color = response.farewell;});

alert('content - ' + color); 
```

浏览器执行 sendMessage，然后立即进入下一行，即警报。sendMessage 中的回调*在*. 警报“修复”它，因为您基本上是在暂停浏览器。如果你想使用颜色作为变量，你只能在回调内部使用它：function(response)。

# ruby-on-rails - 运行控制器规范并检索最后一条记录时出现奇怪的 RSpec 行为

> ID：12212989
> 
> 赞同：0
> 
> 时间：2012-08-31T09:54:54.667
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord, rspec, rspec-rails

这是我在**创建**操作上运行*PostsController*规范时来自调试器的日志。我不会在运行时使用控制台更改或操作任何数据库记录，所以这不是特殊情况。

 **```
(rdb:1) p Post.last
#<Post id: 2, author_id: 3, title: "My ultra cool post", content: "Lorem ipsum", deleted_at: nil, created_at: "2012-08-31 09:21:20", updated_at: "2012-08-31 09:21:20", published_at: nil, display_from: nil>

(rdb:1) p Post.all
[#<Post id: 2, author_id: 3, title: "My ultra cool post", content: "Lorem ipsum", deleted_at: nil, created_at: "2012-08-31 09:21:20", updated_at: "2012-08-31 09:21:20", published_at: nil, display_from: nil>, 
 #<Post id: 3, author_id: 2, title: "My ultra cool post", content: "Lorem ipsum", deleted_at: nil, created_at: "2012-08-31 09:21:20", updated_at: "2012-08-31 09:21:20", published_at: nil, display_from: nil>]

(rdb:1) p Post.last
#<Post id: 2, author_id: 3, title: "My ultra cool post", content: "Lorem ipsum", deleted_at: nil, created_at: "2012-08-31 09:21:20", updated_at: "2012-08-31 09:21:20", published_at: nil, display_from: nil> 
```

所以 Post.all 显示帖子 3 存在，但 Post.last 不存在

但是当我这样做时

```
(rdb:1) p Post.all.last
#<Post id: 3, author_id: 2, title: "My ultra cool post", content: "Lorem ipsum", deleted_at: nil, created_at: "2012-08-31 09:21:20", updated_at: "2012-08-31 09:21:20", published_at: nil, display_from: nil> 
```

控制器文件：

```
class PostsController < ApplicationController
  def create
    @post.author = current_user
    @post.save
    debugger # this is where I'm debugging
    respond_with @post
  end
end 
```

*   此行为在开发代码中正确工作

对我来说唯一的含义是在我的规范中我会做

```
 response.should redirect_to Post.all.last 
```

安装的

```
 response.should redirect_to Post.last 
```

我知道在 Ralis 中有一些情况下 Active Record 触发器在 DB 准备好之前调用？但在这种情况下，ActiveRecord 实际上通过 .all 调用而不是 .last 知道该记录的存在，所以这很奇怪

对此有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-31T09:59:34.007

这种行为非常合乎逻辑：默认顺序基于`created_at`，并且您的对象都具有相同的`created_at`日期时间。

所以数据库必须做出（随机）选择。

* * *

实际上，我刚刚阅读了默认顺序取决于您正在使用的数据库。为了确保你得到你所期望的使用 a `default_scope`，例如：

```
default_scope order('id ASC') 
```**

# c - 如何在代码中使用挂载函数挂载ntfs-3g？

> ID：12212998
> 
> 赞同：0
> 
> 时间：2012-08-31T09:55:22.423
> 
> 标签：c, linux, unix

我对挂载功能有疑问，我想挂载一个 ntfs 磁盘，并且我已经准备好 ntfs-3g 驱动程序，我可以使用 ntfs-3g 命令或 shell 中的 mount 命令挂载这个磁盘，但是当我尝试使用 `mount("/dev/sda1", "/mnt/sda1","ntfs-3g",MS_MGC_VAL,NULL);` 它时总是失败。

我能做些什么？我不想使用“System()”，因为在我的系统中它总是返回-1（我不知道为什么，愚蠢的busybox ash？），我需要状态来识别它是否安装成功。

请帮忙，谢谢！！！！！！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-09-29T18:58:25.743

我已经研究这个问题几个小时了，我相信正在发生的事情是对这些事情如何运作的误解。

1.  mount 程序（我的 Centos 6.5 系统上的 /bin/mount）不是 mount 系统调用的简单包装器。事实上，它非常聪明地弄清楚它正在处理什么，以及尝试安装什么东西。

2.  mount 系统调用仅适用于作为内核模块的文件系统驱动程序。您可以在 /etc/filesystems 或 /proc/filesystems 中找到的东西。

ntfs-3g 是一个[FUSE](http://fuse.sourceforge.net/)驱动程序。挂载 FUSE 文件系统的唯一正确方法是使用适当的挂载程序。（我的系统上的 ntfs-3g 或 /sbin/mount.ntfs）。这是因为除了需要内核资源之外，还必须运行用户空间程序。知道如何解释磁盘格式的是用户空间程序，而不是内核。

正常的系统挂载程序发现它必须调用其他东西才能进行挂载，并自动推断它需要 /sbin/mount.ntfs 并为您调用它。底层的 mount 系统调用没有这样的功能。它只知道它不能挂载给定的文件系统并且失败了。

所以，你有两个选择：

1.  修复系统上 mount 命令的任何问题。您可能想调查是否有实际的“安装”二进制文件。如果你这样做，直接调用它可能会有所帮助。

2.  如果您知道该内容将被格式化为 ntfs，并且您没有真正的挂载程序，那么您可能想尝试直接调用 ntfs-3g。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:49:35.967

您可以尝试以下解决方案：

1.  验证您是否具有安装和卸载文件系统的正确权限。

2.  `int mount(const char *source, const char *target, const char *filesystemtype,` `unsigned long mountflags, const void *data);`

    `filesystemtype`内核支持的参数 值列在`/proc/filesystems`. 当加载适当的模块时，其他类型变得可见。检查是否`ntfs-3g`在此处列出。

3.  检查`errno`mount系统调用设置的值，根据errno描述修复问题。资源：`man -s 2 mount`

    它很容易。只需添加`#include "errno.h"`您的源代码。然后您可以从 mount 的手册页中验证 mount 的错误是什么。这是一个示例代码，可帮助您入门：

> ```
> int retval = mount();//your system call
> if( retval != 0 )
> {
>     printf("ERROR:%d=%s\n",errno,strerror(errno));
> } 
> ```

1.  尝试`data`使用类似的字符串挂载参数`"allow_other,blksize=2048"`

2.  尝试在 NTFS 分区的 /etc/fstab 中使用 UUID 而不是设备名称。

如果您需要更多帮助，请告诉我。

# java - 返回 Ljava.lang.Object 的字符串值

> ID：12212999
> 
> 赞同：1
> 
> 时间：2012-08-31T09:55:25.410
> 
> 标签：java, string, object

我有以下代码

```
TreePath tp = jTree.getSelectionPath();
String path = tp.getPath().toString(); 
```

这会将路径设置为`Ljava.lang.Object;@33530691`，我理解这是因为

> Object 类的 toString 方法返回一个字符串，该字符串由对象作为其实例的类的名称、at 符号字符“@”和对象哈希码的无符号十六进制表示形式组成。换句话说，此方法返回一个等于以下值的字符串：
> 
> getClass().getName() + '@' +Integer.toHexString(hashCode())

但是，您实际上如何将这个值作为字符串来获取呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-31T09:57:34.243

getPath() 返回一个字符串值数组，表示树中的组件。如果您需要根的字符串表示，您将执行 getPath()[0];

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T10:05:19.077

如果它仅用于输出/记录，我想`Arrays.asList(tp.getPath()).toString()`就足够了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-31T09:57:36.163

**String 的** `toString()`方法是**默认重载**的，所以问题不在于 String 路径，而是尝试查看`TreePath tp.`

我觉得你需要看看`tp`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-31T09:58:40.517

我不太明白你的问题。您发布的报价中不是已经回答了吗？

`getClass().getName() + '@' +Integer.toHexString(hashCode())`该`toString()`方法的默认实现，但如果您需要更好的表示形式，您可以覆盖它（请记住，您需要`TreePath`在您的情况下进行扩展）。

编辑：我想，我现在明白了：

由于`TreePath.getPath()`返回一个对象数组，您可以`java.lang.Object`在输出中得到它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-31T09:59:25.950

作为树组件的对象需要重写其 toString() 方法。您可以用它返回的任何内容覆盖它。我假设您正在向树中添加一个自定义对象，因此您可以控制该对象及其 toString() 方法

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-31T10:01:58.890

如果你想得到一个逗号分隔的值字符串，你可以做

字符串路径 = new ArrayList(tp.getPath()).toString();

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-31T10:02:16.813

尝试这样的事情：

```
Object[] treeNodes = tp.getPath();
StringBuilder sb = new StringBuilder();
for(Object tn : treeNodes) {
    sb.append(File.separatorChar).append(tn.toString());
}
String path = sb.toString(); 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-31T10:03:53.100

你有一个对象数组（可能都是字符串）

对于`toString`这些，您需要使用 Arrays.toString()

```
String path = Arrays.toString(tp.getPath()); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-31T10:06:14.927

该`TreePath`对象表示从根节点到实际节点的整个路径。如果你调用`getPath`它，它会返回一个数组，其中包含根节点和实际选择的节点，以及它们之间的所有节点。

如何获得“正确的字符串”取决于您实际想要实现的目标：

*   如果您想要实际选定节点的字符串表示，请使用该[`getLastPathComponent`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreePath.html#getLastPathComponent%28%29)方法

    ```
    TreePath tp = jTree.getSelectionPath();
    String path = tp.getLastPathComponent().toString(); 
    ```

*   如果你想拥有完整的路径，你将不得不遍历数组

    ```
    TreePath tp = jTree.getSelectionPath();
    StringBuilder pathBuilder = new StringBuilder();
    for( Object node : tp.getPath() ){
      pathBuilder.append( node.toString() );
      //possibly append a separator as well
    }
    String path = pathBuilder.toString(); 
    ```

    或者简单地使用[`Arrays#toString`](http://docs.oracle.com/javase/7/docs/api/java/util/Arrays.html#toString%28java.lang.Object%5B%5D%29)方法`tp.getPath()`而不是`toString`方法