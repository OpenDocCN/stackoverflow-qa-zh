# StackOverflow 问答 12434000-12434999

# iphone - 如何测试 iPhone 5 的应用程序

> ID：12434011
> 
> 赞同：15
> 
> 时间：2012-09-15T02:18:05.467
> 
> 标签：iphone

我是一名 iOS 应用程序开发人员。我想在 iPhone 5 发布之前及时更新我的​​应用程序。但是，Apple 似乎没有在 Xcode 4.5 和 iOS 6 的 GM 版本中包含 iPhone 5 模拟器。不确定他们希望我们如何及时更新我们的应用程序对于 iPhone 5 的发布。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-15T02:30:15.220

当您更新到 Xcode 4.5 GM 后，就有了 iPhone 6 模拟器。iPhone 6 模拟器的默认屏幕设置不是 4" 大小，你应该设置它

> 硬件（顶部菜单）-> 设备-> iPhone（视网膜 4 英寸）

# java - java代码中的问号

> ID：12434021
> 
> 赞同：0
> 
> 时间：2012-09-15T02:22:33.763
> 
> 标签：java, operators

有人可以解释以下代码中的问号吗？此外 INITIAL_PERMANCE 是代码中的静态最终常量，但最后一行语法是什么？

```
Synapse(AbstractCell inputSource, float permanence) {
    _inputSource = inputSource;
    _permanence = permanence==0.0 ? 
        INITIAL_PERMANENCE : (float)Math.min(1.0,permanence);
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T02:27:53.277

这 ？和 : 是 java 条件运算符的一部分。有时称为三元运算符，因为它是 Java 中唯一接受 3 个参数的运算符。

这本质上是一个内联的 IF / THEN / ELSE 块。

```
_permanence = permanence==0.0 ? 
    INITIAL_PERMANENCE : (float)Math.min(1.0,permanence); 
```

可以改写如下：

```
if (permanence == 0.0)
    _permanence = INITIAL_PERMANENCE;
else
    _permanence = (float) Math.min(1.0,permanence); 
```

条件运算符的一般形式是

```
<Test returning a boolean> ? <value for if test is true> : <value for if test is false> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:25:30.660

这等于内联方式的 if else 语句。等效于

```
 _permanence = 
    {// A kind of anonymous routine for assignment
      if(permanence==0.0)
      { INITIAL_PERMANENCE } 
      else
      { (float)Math.min(1.0,permanence)}
    } 
```

关于[三元运算符的 oracle 网站上有一个很好的解释](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/op2.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T02:25:38.757

这是[三元运算符。](http://en.wikipedia.org/wiki/%3F%3a) 它的工作方式类似于 if-else 语句。

分解后，语句类似这样：

```
if(permanence == 0.0) { 
    _permanence = INITIAL_PERMANENCE;
} else {
    _permanence = (float)Math.min(1.0,permanence);
} 
```

在含义非常明确的情况下，它的使用受到限制。三元运算符可能会造成混淆，因此请谨慎使用。

最后的声明：

```
(float)Math.min(1.0, permanence) 
```

称为类型转换。您正在将[`Math.min()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Math.html#min%28double,%20double%29)返回双精度的 的结果转换为浮点数的结果。您必须阅读更多关于[浮点数的](http://en.wikipedia.org/wiki/IEEE_floating_point)内容才能看到这样做的价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T02:28:13.407

它被称为 Java 三元运算符（正如 Hovercraft 所说），使用如下：

```
type variableName = (statement) ? value if statement is true: value if false; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T02:28:56.167

这是最常见的使用方式。
[可选变量] =（布尔测试）？（如果为真则执行）：（如果为假则执行）

# ios - iOS Store varbinary from XML in Core Data

> ID：12434022
> 
> 赞同：0
> 
> 时间：2012-09-15T02:22:38.960
> 
> 标签：ios, xml, core-data, binary

我在我的 iPad 应用程序中使用 XML Web 服务，XML 中的元素之一是存储在 SQL 数据库中的图像的 varbinary(max) 表示。

我想将该二进制数据存储在 CoreData 中，以便可以在我的应用程序中使用该图像。

我最好怎么做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:29:23.980

带有外部存储的二进制数据类型似乎是一个不错的选择，它是在 iOS 5 中引入的。虽然[迁移有一个错误](http://www.nickkuh.com/iphone/core-data-migration-woes-with-binary-data-and-external-storage-data-loss/2012/06/)，但我不确定它是否已修复。

# javascript - Twitter Bootstrap modal and Youtube autoplay and stop when closed

> ID：12434037
> 
> 赞同：2
> 
> 时间：2012-09-15T02:26:01.293
> 
> 标签：javascript, html, youtube, twitter-bootstrap

> **Possible Duplicate:**
> [How can I stop a video with Javascript in Youtube?](https://stackoverflow.com/questions/1094397/how-can-i-stop-a-video-with-javascript-in-youtube)

I was wondering how I can use Twitter Bootstrap's modal feature to autoplay a Youtube video and when a user clicks the "close" button, it will stop the video from playing.

I have tried adding the following to my application.js file without prevail.

```
$('#my-video').on('hide', function () {
  player.stopVideo();
}) 
```

HTML view

```
<div class="modal hide" id="myModal">
  <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
  <div class="modal-body">
    <iframe width="560" height="315" src="http://www.youtube.com/embed/30Pjl31cyDY?rel=0" frameborder="0" allowfullscreen></iframe>
  </div>
</div> 
```

Any insights is much appreciated.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:30:23.913

```
player.stopVideo(); 
```

仅当`player`是您通过 Youtube API 创建的 YT.player 对象时才有效。您可以在此处了解如何通过 javascript 控制 youtube 播放器： [https ://developers.google.com/youtube/iframe_api_reference](https://developers.google.com/youtube/iframe_api_reference)

# java - java neko html, javax.xml.xpath

> ID：12434042
> 
> 赞同：0
> 
> 时间：2012-09-15T02:28:08.177
> 
> 标签：java, xpath, html-parser

Some help with this please:

```
 org.cyberneko.html.parsers.DOMParser dp = new DOMParser();
    dp.parse(new InputSource(new StringReader("<!DOCTYPE html><html><body><div></div></body></html>")));
    Document d = dp.getDocument();
    XPathFactory xpf = XPathFactory.newInstance();
    XPath x = xpf.newXPath();

    Node n = (Node)x.evaluate("//div",d,XPathConstants.NODE);
    System.out.println(n == null); 
```

Any reason why n is null, thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T00:51:23.480

这是答案，如果您想访问 div 标签。

```
 Document doc = DocumentBuilderFactory.newInstance().newDocumentBuilder().parse(new File("D:\\Loic_Workspace\\Test2\\res\\test.xml"));

        System.out.println(doc.getElementsByTagName("div").item(0).getNodeName()); 
```

这给了我控制台-> div。

希望对你有帮助

# mongodb - FOSUserBundle 查询两次以获取用户

> ID：12434048
> 
> 赞同：0
> 
> 时间：2012-09-15T02:28:44.590
> 
> 标签：mongodb, symfony, symfony-2.1, fosuserbundle, monolog

查看从底部开始的第 2 行和第 3 行：

```
[2012-09-11 16:44:55] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\ProfilerListener::onKernelRequest". [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Bundle\FrameworkBundle\EventListener\SessionListener::onKernelRequest". [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\RouterListener::onKernelRequest". [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] request.INFO: Matched route "myapp_main_default_index" (parameters: "_controller": "Myapp\MainBundle\Controller\DefaultController::indexAction", "_route": "myapp_main_default_index") [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\HttpKernel\EventListener\LocaleListener::onKernelRequest". [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] event.DEBUG: Notified event "kernel.request" to listener "Symfony\Component\Security\Http\Firewall::onKernelRequest". [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] security.DEBUG: Read SecurityContext from the session [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] security.DEBUG: Reloading user from user provider. [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] doctrine.INFO: MongoDB query: {"find":true,"query":{"_id":{"$id":"504f548c8c2d892617000000"}},"fields":[],"db":"myapp_db","collection":"User"} [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] doctrine.INFO: MongoDB query: {"limit":true,"limitNum":1,"query":{"_id":{"$id":"504f548c8c2d892617000000"}},"fields":[]} [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] doctrine.INFO: MongoDB query: {"limit":true,"limitNum":1,"query":{"_id":{"$id":"504f548c8c2d892617000000"}},"fields":[]} [] {"token":"504f6a8727898"}
[2012-09-11 16:44:55] security.DEBUG: Username "test" was reloaded from user provider. [] {"token":"504f6a8727898"} 
```

在我看来，它正在重复查询。

我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T02:04:06.017

现在我认为它不止一次查询，它只是它的记录方式。在其他查询中，查询的每个部分都有 1 个日志行，但开发工具栏显示为 1 个查询，因此它必须是正确的。

# javascript - 编写 Javascript 算法，但我需要将符号转换为实际单词

> ID：12434056
> 
> 赞同：0
> 
> 时间：2012-09-15T02:30:47.540
> 
> 标签：javascript

因此，我正在编写一种新的 JavaScript 算法，代号为 jBam（Javascript 浏览器算法模块），它用于编写一种极其简单的方法来检测浏览器及其版本。我的主要目标是能够编写这个（插入库）：

```
if(IE & version lessThan 9) {
    // IE code for 8 and below
} 
```

目前，进展非常顺利。我可以写

```
if(browser == IE & version < 9) 
```

**所以**，回到我最初的问题，我唯一想知道的可能是以某种方式设置一个变量`lessThan`并将其设置为等于符号`<`。我已经尝试过可能是最常见的补救措施（`var lessThan = <`），但当然，这有点太一厢情愿了，也有点太容易了。而且，众所周知，没有什么*太*容易了。有什么建议，也许是我没想到的 JavaScript 保护？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:42:22.067

我同意@JCOC611，但也有可能您将所有内容都作为对象的一部分，然后也`version`将对象作为属性，您可以在其中添加一个名为 的方法`lessThan`，因此您将拥有类似的内容：

```
var browserStuff = {
    browser: {
        value: "",
        is: function (comparator) {
            if (browserStuff.browser.value == comparator) {
                return true;
            }
            return false;
        }
    },
    version: {
        value: "",
        lessThan: function (comparator) {
            if (browserStuff.version.value < comparator) {
                return true;
            }
            return false;
        }
    },
    init: function () {
        // Do your stuff to determine the browser and its version
        // You need to set browserStuff.version.value and browserStuff.browser.value
        delete browserStuff.init;
    }
}.init(); 
```

然后像这样使用它：

```
if (browserStuff.browser.is("IE")) {

} 
```

或者

```
if (browserStuff.version.lessThan("7")) {

} 
```

您必须为“大于”和“不等于”等添加更多内容，但这只是开始。

我并不完全建议这样做，因为您可以轻松地使用普通的 Javascript 运算符来完成同样的事情，而冗余代码更少。此解决方案更适合“可读”主题，但绝不是必要或更好的。

# jquery - 使用 Jquery 从复选框值中删除表格行

> ID：12434057
> 
> 赞同：1
> 
> 时间：2012-09-15T02:30:57.607
> 
> 标签：jquery, html, forms

我从包含复选框值的 HTML 表单创建了一个数组。

我想知道是否可以将选定的复选框值传递给 jquery 以使用 Jquery 代码 $('tr#myTableRow').remove(); 对于表单发布的每个数组值？

任何帮助表示赞赏。

代码：

```
<form name="deletePost" id="deletePost" action="" method="post"> 
    <input class="checkBox" type="checkbox" id="idArray" name="idArray[]" value="1" />
    <input class="checkBox" type="checkbox" id="idArray" name="idArray[]" value="2" />
    <input class="formButtonDelete" type="submit" name="submit" value="Delete" />
</form>

$ids = $_POST['idArray'];
if(!empty($ids))
{
    foreach($ids as $id)
   {
      $sql = "DELETE FROM news WHERE id='$id'";
     mysql_query($sql);
   }
echo 'Posts Deleted - Please refesh page..';
} 
```

我想使用 Jquery 删除具有输入值 id 的表行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:52:31.943

试试这个

```
$('input[name=submit]').click(function(){
    $('#deletePost input:checkbox').each(function(){
        if(this.checked){
            $(this).remove();
        }
    });
    return false;
}); 
```

我添加了`return false;`这样您可以在提交之前看到输入已删除，您可以将其删除以让表单提交

看到这个[http://jsfiddle.net/F5Nth/](http://jsfiddle.net/F5Nth/)

# mysql - 在 MySQL 中，SUBSTRING(1, 200) 是否比获取 TEXT 列的完整值更好？

> ID：12434058
> 
> 赞同：3
> 
> 时间：2012-09-15T02:31:16.040
> 
> 标签：mysql, database, performance, query-optimization, substring

假设您的桌子上有一个 TEXT 列，它可能是巨大的/段落长的咆哮，或者只有几句话长的行。

性能方面/服务器负载方面，这样做是否更好：

```
SELECT SUBSTRING( myTxtColumn, 1, 200) FROM myTable AS myTxtColumn 
```

或做：

```
SELECT myTxtColumn FROM myTable 
```

哪个查询会给服务器带来更多负载？

我很好奇服务器获取列的完整值是否比对其执行 SUBSTRING() 更容易，或者 SUBSTRING() 是否会更容易，因为它只返回前 200 个字符而不是几个KB 长文本值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T03:15:52.843

我会谨慎行事并使用子字符串。您的第一个查询**可能**需要在对其执行子字符串之前读取整个字符串（我怀疑 mysql 比这更聪明，但谁知道）。您的第二个查询**肯定**必须读取整个字符串并通过网络发送。

# nhibernate - Session.BeginTransaction() 返回的实例等于 Session.Transaction？

> ID：12434060
> 
> 赞同：1
> 
> 时间：2012-09-15T02:31:30.130
> 
> 标签：nhibernate

我有一个关于 NHibernate 交易的问题。据我所知，有两种方法可以从中`ITransaction`检索`ISession`。

**选项1**

```
ISession.BeginTransaction(); 
```

**选项 2**

```
ISession.Transaction; 
```

如果我像这样连续执行它们

```
ITransaction trans = session.BeginTransaction();
ITransaction trans2 = session.Transaction; 
```

是`trans`平等的`trans2`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T07:30:22.737

NHibernate 源码@https [://github.com/nhibernate](https://github.com/nhibernate)

来自 Isession @ NHibernate.Impl.SessionImpl 的会话实现

```
public ITransaction BeginTransaction()
{
    using (new SessionIdLoggingContext(SessionId))
    {
        if (rootSession != null)
        {
            // Todo : should seriously consider not allowing a txn to begin from a child session
            //      can always route the request to the root session...
            log.Warn("Transaction started on non-root session");
        }

        CheckAndUpdateSessionStatus();
        return connectionManager.BeginTransaction();
    }
}

public ITransaction Transaction
{
    get { return connectionManager.Transaction; }
} 
```

来自 NHibernate.Adonet.ConnectionManager 类

```
public ITransaction BeginTransaction()
{
    Transaction.Begin();
    return transaction;
}

public ITransaction Transaction
{
     get
     {
         if (transaction == null)
         {
              transaction = session.Factory.TransactionFactory.CreateTransaction(session);
         }

         return transaction;
     }
} 
```

# ios - The identity used to sign the executable is no longer valid <= help me

> ID：12434062
> 
> 赞同：16
> 
> 时间：2012-09-15T02:31:51.657
> 
> 标签：ios, certificate, cydia

```
**The identity used to sign the executable is no longer valid.** 
Please verify that your device’s clock is properly set, and that your signing certificate is not expired. 
```

I've met this error when build my app on iphone by Xcode device for 2 days. It had worked properly before. But only when build on that iphone, the other ios devices is normal, hic. can you help me :(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-11-28T22:28:00.000

您可以尝试从钥匙串中删除证书，重新启动 Xcode 并尝试下载它们**（Xcode-Preferences-Accounts-View Details）**并单击**“Download All”**。

如果这不起作用打开 Xcode 帐户**（Xcode-Preferences-Accounts-View Details）**并**右键单击**证书并**删除**它们。如果有人处于非**活动状态或已过期**，请在**会员中心**检查并解决该问题。

 **即使您从 Xcode 中删除它们，您从会员中心管理的证书仍然存在。Xcode 会下载会员中心的所有证书。这些证书有几个问题，大多数时候这些操作解决了我的问题。希望它也适合你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-30T05:55:22.483

即使证书和配置文件尚未过期，它也可能在您续订 iOS 程序后发生。

只需编辑配置文件并重新选择匹配的证书。您之前确定检查的证书可以取消检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-07T09:35:59.930

我需要从钥匙串中删除我的证书，然后 xcode 建议“修复问题”，一切都开始工作了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-29T15:41:52.597

通常足以强制 XCode 重新下载证书。在 XCode -> Preferences... -> Accounts -> your apple id -> View Details 下，按左下角的重新加载按钮。**

# exception - Prevent third-party dll from crashing PowerShell

> ID：12434065
> 
> 赞同：1
> 
> 时间：2012-09-15T02:32:46.353
> 
> 标签：exception, powershell, crash, native, unmanaged

I am creating a PowerShell module which uses an unmanaged API. The way it works looks something like this:

```
PowerShell Module
       |
       ˅
.NET Wrapper DLL
       |
       ˅
   Native DLL 
```

This native DLL has two ways of communicating whether an operation failed or not - by writing status codes to stdout or by throwing Win32 exceptions. You can specify your preference by calling the API's `UseExceptions()` or `DontUseExceptions()`. However both options suck:

1.  Without exceptions, any time I do a successful function call, `0` gets printed on the screen. If a function call fails, a warning message is printed on the screen. Not only does this make it hard to detect errors, it also clutters up my module's output to the user.
2.  With exceptions, if there's a minor error, the whole PowerShell process will crash because it's a Win32 exception as opposed to a .NET exception.

Is there a way to prevent a Win32 exception from crashing the whole PowerShell process? Or is there a way to intercept this DLL's stdout and parse the status codes myself?

The API I'm using is the widely-used [Geographic Data Abstraction Library](http://gdal.org/).

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:03:30.560

在您的 .NET Wrapper DLL 中尝试捕获 SEHException 以查看是否可以捕获 Win32 异常。另一种选择是使用 CLI/C++ 编写 .NET 包装器，然后使用 C++ 异常处理机制来捕获异常。

# javascript - calculate age javascript in adobe acrobat

> ID：12434066
> 
> 赞同：1
> 
> 时间：2012-09-15T02:32:46.870
> 
> 标签：javascript, forms, pdf, adobe

I am having some difficulties getting a field to populate in an interactive PDF form. I am using a javascript to calculate the current age of client from 2 date fields (DateToday and ClientDOB) already in the form and I need it to populate a "ClientAge" field. The DateToday field automatically populates when the form is opened. I would like for the ClientAge field to populate after the user selects the ClientDOB.

This is what I am trying to have it do. Should be simple I would think.

DateToday - ClientDOB = ClientAge

Here is my code:

```
var DateToday_ = Date2Num(DateToday.formattedValue, "MM/DD/YYYY")
var ClientDOB_ = Date2Num(ClientDOB.formattedValue, "MM/DD/YYYY")
var diff = DateToday_ - ClientDOB_
ClientAge.value = Floor(diff / 365.25) 
```

I am not sure why the ClientAge field will not populate once the ClientDOB has been selected. Any replies would be helpful. Thanks.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-05T03:25:18.087

这是从网上的某个地方拍摄的。不记得在哪里。但是，我以多种形式使用了它，并且效果很好。这个想法是日期之间的差异以毫秒为单位，给定日期是过去固定日期的秒数。一旦你知道日期之间的秒数差异（在这种情况下是 DOB 到现在），你就可以计算出那是多少年。请注意，我的格式是英国日期格式 (dd/mm/yy)。如果您以美国格式 (mm/dd/yy) 操作，则必须进行适当的更改。

```
// get current date THIS NON AMERCAN DATE FORMAT
var oNow = new Date();
// get date from 'Demo.DOB' field
var oMyDate = util.scand('dd/mm/yy', this.getField('Demo.DOB').value);
// define second in milliseconds
var nSec = 1000;
// define minute in milliseconds
var nMin = 60 * nSec;
// define hour in milliseconds
var nHr = 60 * nMin;
// define day in milliseconds
var nDay = 24 * nHr;
// compute today as number of days from epoch date
var nNowDays = Number(oNow) / nDay;
// truncate to whole days
nNowDays = Math.floor(nNowDays);
// compute inputted date days from epoch data
var nMyDateDays = Number(oMyDate) / nDay;
// truncate to whole days
nMyDateDays = Math.floor(nMyDateDays);
// compute difference in the number of days
var nDiffDays = nNowDays - nMyDateDays;
// adjust difference for counting starting day as 1
++nDiffDays;
// convert days to years
var nYears = nDiffDays / 365.2525
// truncate to whole years
nYears = Math.floor(nYears);
// set field value number of years (nYears)
event.value = nYears; 
```

# c# - C# - Google Drive SDK - Storing client and secret ID in winform

> ID：12434068
> 
> 赞同：0
> 
> 时间：2012-09-15T02:33:10.423
> 
> 标签：c#, google-drive-api

I have written a C# winform program that uses the google drive SDK and that I want to release publicly. However, I'm not sure if it's safe to store my Google Drive client and secret ID's in the source code, and if it's not, what is the recommended way to store them?

Example, i have a class that explicitly defines two varialbes - String CLIENT_ID = and String SECRET_ID = . If I send out the .exe for this, is this information easily attained by someone?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:49:56.783

是的。使用反射器之类的工具，您可以在几秒钟内提取该信息。

答案是，不要使用你的谷歌驱动器。让用户使用他们的驱动器。或者，如果您的程序只需要 READ... 那么，将文件公开。

# file - get uploaded file name/path in node.js

> ID：12434069
> 
> 赞同：3
> 
> 时间：2012-09-15T02:33:18.253
> 
> 标签：file, node.js, file-upload

How do I get the name of an uploaded file name/path to manipulate it in node.js? I want move the file from the temp folder to a customer folder.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T04:17:41.153

Node.JS 不会自动将上传的文件保存到磁盘。相反，您必须通过[请求](http://nodejs.org/api/http.html#http_class_http_serverrequest)和事件`multipart/form-data`自己阅读和解析内容。[`data`](http://nodejs.org/api/http.html#http_event_data)[`end`](http://nodejs.org/api/http.html#http_event_end)

或者，您可以使用库来为您完成所有这些工作，例如[`connect`](http://www.senchalabs.org/connect/)/[`express`](http://expressjs.com/)为其[`bodyParser`](http://www.senchalabs.org/connect/bodyParser.html)或[`multipart`](http://www.senchalabs.org/connect/multipart.html)中间件（[完整示例](https://github.com/visionmedia/express/blob/master/examples/multipart/index.js)）：

```
var fs = require('fs');
var express = require('express');
var app = express();

// `bodyParser` includes `multipart`
app.use(express.bodyParser());

app.post('/', function(req, res, next){
  // assuming <input type="file" name="upload">

  var path = req.files.upload.path;
  var name = req.files.upload.name;

  // copy...
}); 
```

或者[`formidable`](https://github.com/felixge/node-formidable#installation)直接`connect`使用，用于`multipart`中间件（[完整示例](https://github.com/felixge/node-formidable/blob/master/example/upload.js)）。

并且，对于`// copy...`评论，请参阅[如何复制文件？](https://stackoverflow.com/q/4980243).

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2019-11-30T06:25:06.320

```
app.post('/', function(req, res, next){
    var file_name=req.file.filename;
    var file_path=req.file.path;
} 
```

# php - 回调函数错误

> ID：12434071
> 
> 赞同：0
> 
> 时间：2012-09-15T02:33:48.427
> 
> 标签：php, codeigniter, tankauth

好的，所以我正在创建一个简单的回调函数来检查用户是否插入了禁用词。这是我到目前为止所拥有的：（这是使用 codeigniter 和 tankauth）

```
$this->form_validation->set_rules('firstname', 'First Name', 'trim|alpha|xss_clean|min_length[2]|max_length[50]|callback_is_banned_word');
$this->form_validation->set_rules('lastname', 'Last Name', 'trim|alpha|xss_clean|min_length[2]|max_length[50]|callback_is_banned_word'); 
```

is_banned_word() 函数：

```
//Check if first or last name is a banned word
function is_banned_word($input) {
    $banned_words = array("word1","word2",...."wordn"); //This is a really long array
    foreach($banned_words as $words) {
        if (stripos($input,$words) !== false) {
            $this->form_validation->set_message('is_banned_word', 'There is a banned word your phrase.');
            return FALSE;
        }
        else {
            return TRUE;
        }
    }
    return TRUE;
} 
```

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:47:49.317

你的问题是什么？

```
function is_banned_word($input) {
    $banned_words = array("word1","word2",...."wordn"); //This is a really long array
        if (in_array( $input , $banned_words )) {
            $this->form_validation->set_message('is_banned_word', 'There is a banned word your phrase.');
            return FALSE;
        }
    return TRUE;
} 
```

# python - 防止 emacs 在 Python 中过度缩进续行

> ID：12434073
> 
> 赞同：0
> 
> 时间：2012-09-15T02:34:53.433
> 
> 标签：python, emacs, auto-indent

Emacs 的 Python 模式有一个烦人的“功能”，它会自动将括号和括号中的续行缩进前一行中的左括号。所以我们得到类似的东西

```
myfunc(a, b, c,
       d, e, f) 
```

这很烦人，因为它使整个文件的缩进看起来不一致，而且还因为你得到了类似的东西

```
myfunc(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, (x,
                                                                             y, z)) 
```

（我已经做了很长时间来说明这通常会根据列大小自动发生）

如果我要向 myfunc 添加更多参数，那么**一切**都会被`x`.

我希望它总是比第一行缩进四个空格。继续反对`\`似乎是做正确的事（不过，我不肯定它在 100% 的时间里都是正确的，因为我很少使用`\`）。例如，我想要上面的内容是

```
myfunc(a, b, c,
    d, e, f) 
```

和

```
myfunc(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, (x,
    y, z)) 
```

所以我想我想要[在 python-mode.el 中使用反斜杠继续进行正确缩进的反转](https://stackoverflow.com/questions/3638874/proper-indendation-with-backslash-line-continuations-in-python-mode-el)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:18:38.447

该值是从 py-compute-indentation 中获取的，现在位于当前主干 python-mode.el 的第 5091 行

bzr 分支 lp:python 模式

在那里引入一个布尔值：（如果 my-boolean py-indent-offset (INSTEAD OF COUMPUTED VALUE RETURNED...

OTOH，该值似乎是合理的，而不是与块设计混淆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T22:23:37.207

我还是 lisp 的新手，所以这可能不需要编辑源代码就可以完成，但对我来说，这是最简单的方法。我已`python.el`在[https://github.com/asmeurer/python.el/tree/indentation](https://github.com/asmeurer/python.el/tree/indentation)修改以删除它。我还删除了点的自动对齐（如[emacs 上的多行 python 缩进](https://stackoverflow.com/q/4057988/161801)），但它是一个单独的提交。

# spring - 命令对象的弹簧绑定日期字段

> ID：12434077
> 
> 赞同：0
> 
> 时间：2012-09-15T02:35:51.950
> 
> 标签：spring, spring-mvc

我有一个插入/更新数据的表单。命令对象 (Bean) 类有一个 Date 字段，该字段以如下形式放置：

```
<form:hidden path="createdDate"> 
```

当我提交表单时，BindResult.hasErrors() 被验证为真。

我想我需要绑定日期对象，但是命令对象字段是怎么做的呢？

表单bean代码如下

```
@Entity
@Table(name = "Employee")

public class Employee {

    @Id
    @GeneratedValue
    @Column(name="id")
    private int id;

    @Column(name="EmployeeName")
    private String employeeName;

    @Column(name="CreatedDate")
    private Date createdDate;

    //Setter and getter methods 
} 
```

错误：

```
[Field error in object 'employee' on field 'CreatedDate': rejected value [Mon Sep 17 20:35:26 IST 2012]; codes [typeMismatch.employee.CreatedDate,typeMismatch.CreatedDate,typeMismatch.java.util.Date,typeMismatch]; arguments [org.springframework.context.support.DefaultMessageSourceResolvable: codes [subject.CreatedDate,CreatedDate]; arguments []; default message [CreatedDate]]; default message [Failed to convert property value of type 'java.lang.String' to required type 'java.util.Date' for property 'CreatedDate'; nested exception is java.lang.IllegalStateException: Cannot convert value of type [java.lang.String] to required type [java.util.Date] for property 'CreatedDate': no matching editors or conversion strategy found]] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T16:00:00.723

将此注释添加到您的日期字段：

```
@Column(name="CreatedDate")
@DateTimeFormat(pattern="yyyy/MM/dd hh:mm:ss") //whatever format is appropriate to you..
private Date createdDate; 
```

确保您将 joda time 作为依赖项，并且该库存在于类路径中。它将自动注册一个转换器来处理转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T07:30:18.237

我发现了你的问题。在您的 Employee 模型类中，createdDate 字段未正确定义。您需要使用@Temporal 注释来定义该字段的类型为日期。

请将以下注释也放在 createdDate 的字段声明之上

```
@Temporal(TemporalType.TIMESTAMP) 
```

我认为这应该可以解决您的问题。干杯。

# c# - NHibernate 在 mono 下抛出 TypeLoadException

> ID：12434084
> 
> 赞同：0
> 
> 时间：2012-09-15T02:36:43.403
> 
> 标签：c#, .net, postgresql, fluent-nhibernate, mono

我有一个基于 .Net 的命令行应用程序，它与 PostgreSQL 9.1 交互（CRUD）。使用 Nuget，该项目目前引用 NHibernate 3.2.0.4000 和 FluentHibenrate 1.3.0.717

现在代码在 .Net 环境（即 Windows Xp/7）下运行良好，但在 Mono（Mono JIT 编译器版本 2.10.8.1（Debian 2.10.8.1-1ubuntu2.2））下，我在 NHibernate 中看到 TypeLoadException 完全相同代码（我没有为单声道重新编译任何东西。）。有人可以帮忙并指路吗？谢谢！

这是堆栈跟踪

```
FluentNHibernate.Cfg.FluentConfigurationException: An invalid or incomplete configuration was used while creating a SessionFactory. Check PotentialReasons collection, and InnerException for more detail.

 ---> FluentNHibernate.Cfg.FluentConfigurationException: An invalid or incomplete configuration was used while creating a SessionFactory. Check PotentialReasons collection, and InnerException for more detail.

 ---> NHibernate.MappingException: Could not compile the mapping document: (XmlDocument) ---> System.TypeInitializationException: An exception was thrown by the type initializer for NHibernate.Dialect.Dialect ---> System.TypeLoadException: Could not load type 'NHibernate.Dialect.Dialect+NoOpViolatedConstraintNameExtracter' from assembly 'NHibernate, Version=3.2.0.4000, Culture=neutral, PublicKeyToken=aa95f207798dfdb4'.
  --- End of inner exception stack trace ---
  at NHibernate.Cfg.Configuration.AddDeserializedMapping (NHibernate.Cfg.MappingSchema.HbmMapping mappingDocument, System.String documentFileName) [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at NHibernate.Cfg.Configuration.LogAndThrow (System.Exception exception) [0x00000] in <filename unknown>:0 
  at NHibernate.Cfg.Configuration.AddDeserializedMapping (NHibernate.Cfg.MappingSchema.HbmMapping mappingDocument, System.String documentFileName) [0x00000] in <filename unknown>:0 
  at NHibernate.Cfg.Configuration.AddValidatedDocument (NHibernate.Cfg.NamedXmlDocument doc) [0x00000] in <filename unknown>:0 
  at NHibernate.Cfg.Configuration.ProcessMappingsQueue () [0x00000] in <filename unknown>:0 
  at NHibernate.Cfg.Configuration.AddDocumentThroughQueue (NHibernate.Cfg.NamedXmlDocument document) [0x00000] in <filename unknown>:0 
  at NHibernate.Cfg.Configuration.AddXmlReader (System.Xml.XmlReader hbmReader, System.String name) [0x00000] in <filename unknown>:0 
  at NHibernate.Cfg.Configuration.AddInputStream (System.IO.Stream xmlInputStream, System.String name) [0x00000] in <filename unknown>:0 
  --- End of inner exception stack trace ---
  at FluentNHibernate.Cfg.FluentConfiguration.BuildConfiguration () [0x00000] in <filename unknown>:0 
  at FluentNHibernate.Cfg.FluentConfiguration.BuildSessionFactory () [0x00000] in <filename unknown>:0 

  --- End of inner exception stack trace ---
  at FluentNHibernate.Cfg.FluentConfiguration.BuildSessionFactory () [0x00000] in <filename unknown>:0 
  at MyProj.Repository.FluentNHibernateHelperPostgreSQL.CreateSessionFactory () [0x00000] in <filename unknown>:0 
  at MyProj.Repository.FluentNHibernateHelperPostgreSQL.get_SessionFactory () [0x00000] in <filename unknown>:0 
  at MyProj.Repository.FluentNHibernateHelperPostgreSQL.OpenSession () [0x00000] in <filename unknown>:0 
  at MyProj.Repository.NHibernateSessionHelper.SmartSessionFactory () [0x00000] in <filename unknown>:0 
  at MyProj.Repository.NHibernateSessionHelper.DoAnything (MyProj.Repository.TargetMethod target) [0x00000] in <filename unknown>:0 
  at MyProj.Program+<>c__DisplayClass10.<RetrieveDataDriver>b__a () [0x00000] in <filename unknown>:0 
```

这里是 FluentNHibernateHelperPostgreSQL.CreateSessionFactory() 的相关代码

```
private static ISessionFactory CreateSessionFactory()
  {
      FluentConfiguration fluentConfiguration = Fluently.Configure();
      PostgreSQLConfiguration standard = PostgreSQLConfiguration.Standard;
      FluentConfiguration fluentConfiguration1 = fluentConfiguration.Database(((PersistenceConfiguration<PostgreSQLConfiguration, PostgreSQLConnectionStringBuilder>)standard).ConnectionString((PostgreSQLConnectionStringBuilder c) => c.FromConnectionStringWithKey("ConnectionStringKey")));
      ISessionFactory sessionFactory = fluentConfiguration1.Mappings((MappingConfiguration m) => m.AutoMappings.Add(FluentNHibernateHelperPostgreSQL.CreateAutomappings)).ExposeConfiguration(FluentNHibernateHelperPostgreSQL.BuildSchema).BuildSessionFactory();
      return sessionFactory;
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-08T19:44:51.257

解决方案是从 go-mono.com 手动部署最新的 Mono 包正如评论部分 knocte 所建议的那样，`2.11.4`解决了问题。

我还没有尝试过 3.x，但到目前为止，我对 2.11.x 很满意，还没有理由跳进 3.x 的船。

# javascript - _gaq.push(['_addTrans'

> ID：12434085
> 
> 赞同：0
> 
> 时间：2012-09-15T02:37:17.783
> 
> 标签：javascript, jquery, google-analytics

尝试通过我们的电子商务商店设置 GA 并遇到实际产品项目根本没有发布到 GA 的问题。总价运行良好，但没有任何项目数据通过。

使用 Chrome 中的 Google Analytics 调试器，似乎正在发生这种情况，因为变量返回的值位于单独的行上。当它换行时，谷歌认为它没有价值，至少看起来是这样。

我附上了调试器窗口的屏幕以显示换行符。

![在此处输入图像描述](../Images/c975402a3d979b33fc6d1416a3773212.png)

在查看代码之前，请注意，为了获得价值、产品和定价，我必须遍历电子商务感谢页面上的表格，因为我们使用的电子商务系统没有任何 API...

这是以测试顺序导出的表的代码。

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<script type="text/javascript">
var purchaseTotal;
var orderID = "[[S120:cart:orderId]]";
var productQty = new Array(); //quantity of product
var productName = new Array(); //name of product
var productValue = new Array(); //price of product
var productRows;
var a = 0; //used to assign array values

var _gaq = _gaq || []; //start _gaq to use globaly

$(function(){

    function getQuerystring(key, default_){
      if (default_==null) default_=""; 
      key = key.replace(/[\[]/,"\\\[").replace(/[\]]/,"\\\]");
      var regex = new RegExp("[\\?&]"+key+"=([^&#]*)");
      var qs = regex.exec(window.location.href);
      if(qs == null)
        return default_;
      else
        return qs[1];
    }

    var isThankyou = getQuerystring('CONFIRMATION');

    if(getQuerystring('CONFIRMATION') == 'true'){

    purchaseTotal = $("table.ShoppingCart tr:last-child").children("td:last-child").text();
    purchaseTotal = purchaseTotal.replace('$',''); //removes dollar sign from text for GA use
    purchaseTotal = purchaseTotal.replace(/\s+/g,""); //removes all extra spaces
    console.log("Total: "+ purchaseTotal);

    var rows = $("table.ShoppingCart tr").length;
    console.log("Rows: " + rows);

    //start going through the rows
    for(var i = 0; i <= rows; i++){

        var cells = $("table.ShoppingCart tr").eq(i).children("td").length;
        var cell = $("table.ShoppingCart tr").eq(i).children("td");
        //if there 3 cells we're in business, it's a product
        if(cells == 3){
            //for every row, go through the cells if the length of cells in that row are 3
            for(var k = 0; k < cells; k++){
                if(k == 0){
                    //this is the quantity column, let's see how much was ordered
                    productQty[a] = $(cell).eq(k).text();
                    productQty[a] = productQty[a].replace(/\s+/g," ");
                    console.log("QTY: "+ productQty[a]);
                }
                if(k == 1){
                    //this is the product name column, what's the name?
                    productName[a] = $(cell).eq(k).text();
                    productName[a] = productName[a].replace(/\s+/g," ");
                    console.log("Name: "+ productName[a]);
                }
                if(k == 2){
                    //this is the price 
                    productValue[a] = $(cell).eq(k).text();
                    productValue[a] = productValue[a].replace("$","");
                    productValue[a] = productValue[a].replace(/\s+/g," ");
                    console.log("Value: "+ productValue[a]);
                    a++;
                }
            }
        }
        //console.log("END i loop: "+ i);
    }

    productRows = productQty.length;

    ecommerceGACode(); // launch eccomerce GA code

  }//endif
  else{
      noEcommerceGA();

  }//end else

});

function ecommerceGACode(){
        //Google Analytics Code
    console.log("ThankYouPage GA launched");
    _gaq.push(['_setAccount', 'UA-2167264-1']);
    _gaq.push(['_setDomainName', '.convio.net']);
    _gaq.push(['_setSiteSpeedSampleRate', 5]);
        if (CONVIO.referrer.length != 0) {
            _gaq.push(['_setReferrerOverride',CONVIO.referrer]);      
        }
    _gaq.push(['_trackPageview']);

    _gaq.push(['_addTrans',
      orderID,           // order ID - required
      'ECommerce Store',  // affiliation or store name
      purchaseTotal,          // total - required
      '',           // tax
      '',              // shipping
      '',       // city
      '',     // state or province
      ''             // country
    ]);

  //loop through our array's and insert the values!
  for(var i = 0; i < productRows; i++){
      console.log("QTY: "+ productQty[i]);
      console.log("Name: "+ productName[i]);
      console.log("Value: "+ productValue[i]);

      var name = productName[i];
      var qty = productQty[i];
      var price = productValue[i];

     _gaq.push(['_addItem',
      orderID,           // order ID - required
      'Ecommerce',           // SKU/code - required
      ''+name+'',        // product name
      '',   // category or variation
      ''+price+'',          // unit price - required
      ''+qty+''               // quantity - required
    ]);

  }

    _gaq.push(['_trackTrans']); //submits transaction to the Analytics servers

      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

} // Ecommerce GA Code

function noEcommerceGA(){

      console.log("Normal GA Launched");
      _gaq.push(['_setAccount', 'UA-2167264-1']);
      _gaq.push(['_setDomainName', '.convio.net']);
      _gaq.push(['_setAllowLinker', true]);
      _gaq.push(['_setSiteSpeedSampleRate', 5]);
        if (CONVIO.referrer.length != 0) {
            _gaq.push(['_setReferrerOverride',CONVIO.referrer]);      
        }
      _gaq.push(['_trackPageview']);

        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);

} // no Ecommerce Code
</script>

<table class="ShoppingCart" cellpadding="5" border="1" style="border-collapse: collapse;" width="100%">
  <tbody>
    <tr class="ShoppingCartHeadings">
      <th width="10%"> <p>Quantity</p>
      </th>
      <th width="70%"> <p>Item Name</p>
      </th>
      <th width="20%"> <p>Total Price</p>
      </th>
    </tr>
    <tr valign="top" class="ShoppingCartRow0">
      <td><p>1</p></td>
      <td><p> <span class="CartItemName">Interview with a Terrorist</span> ($5.00 each) </p></td>
      <td align="right"><p>$5.00</p></td>
    </tr>
    <tr>
      <td colspan="2" align="right"><p><strong>Total Price of Items:</strong></p></td>
      <td align="right"><p><strong>$5.00</strong></p></td>
    </tr>
    <tr>
      <td colspan="2" align="right"><p> <strong>Shipping Charges: </strong> </p></td>
      <td align="right"><p><strong>$5.00</strong></p></td>
    </tr>
    <tr>
      <td colspan="2" align="right"><p><strong>Total: </strong></p></td>
      <td align="right"><p><strong>$10.00</strong></p></td>
    </tr>
  </tbody>
</table> 
```

正如您可能看到的那样，我什至尝试从变量值中删除多余的空格。

在我的控制台测试中，所有内容都是一个没有换行符的单行字符串，所以我不知道到底发生了什么。

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:24:16.513

一个问题：您所有的产品都有相同的 sku：“电子商务”。来自[电子商务跟踪代码文档](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApiEcommerce#_gat.GA_Tracker_._addItem)：

> 确保库存中的每件商品都有唯一的 SKU。如果您的库存中包含具有相同 SKU 的不同商品，并且访问者同时购买了这两种商品，您将仅收到最近添加的数据

如果您的购物车表没有某种产品 ID 或 SKU，您可以将产品名称用于 SKU 和产品名称参数。

# api - 高库存设置

> ID：12434088
> 
> 赞同：0
> 
> 时间：2012-09-15T02:37:54.337
> 
> 标签：api, stocks, highstock

我正在与 HighStock 合作，为各种公司的股票创建图表。在 API 中，它没有告诉我如何检索有关股票的数据，它只是在 JSON 文件中检索它。我想知道是否可以传入股票参数（例如：“AAPL”或“GOOG”）来检索此信息。

[HighStock 网站](http://www.highcharts.com/)

[高库存示例](http://www.highcharts.com/stock/demo/basic-line/gray)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:58:14.867

Highcharts/Highstock 图表默认具有[**turboThreshold**](http://api.highcharts.com/highcharts#plotOptions.line.turboThreshold)，用于节省昂贵的数据检查和长序列索引。因此，如果您的图表大于 1000 个数据点，则必须进行一些服务器端处理才能显示图表。这个[**例子**](http://www.highcharts.com/component/content/article/2-news/48-loading-millions-of-points-in-highcharts)解释并说明了这个原则。请注意缩放级别更改时数据点的图表间隔如何更改。起初，间隔是每月，当您放大时，它变为半月、每周、每天、每小时，然后在完全放大时变为分钟。

此[**示例**](https://github.com/highslide-software/highcharts.com/blob/master/samples/data/from-sql.php)显示了在服务器上为处理当前缩放级别所做的工作。

Highstock 图表没有任何参数来从任何股票 API 中检索信息。您必须自己编写该功能。我建议使用服务器端代码从 API 获取信息。然后将该数据格式化为带有点的系列并将其发送到 Highstock 图表。请记住，如果您要显示大量数据点，则必须在将其发送到图表之前进行某种处理。如果您将一个系列发送到具有太多数据点的图表，该图表将根本不会显示该系列。

因此，努力尝试生成完成所有这些所需的代码。如果您在此过程中有任何具体问题，请联系我们。

# ruby-on-rails - 使用 Rspec 测试 lib 文件夹下的文件

> ID：12434091
> 
> 赞同：1
> 
> 时间：2012-09-15T02:39:36.703
> 
> 标签：ruby-on-rails, rspec

我有一个`lib/pdf_helper.rb`要测试的文件。我需要做的第一步是什么？我对控制器进行了测试。另一件事，我是 Rspec 的新手。这就是我问的原因。

谢谢。

# php - 制作用于挂钩 PDO 查询的 databaseDo() 函数

> ID：12434093
> 
> 赞同：5
> 
> 时间：2012-09-15T02:40:25.197
> 
> 标签：php, function, pdo

所以我开始[本教程](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html#7.1)作为 PHP PDO 的介绍。到目前为止，我只使用基本`mysql_*`类型查询。

我注意到，在整个教程中，`connect -> do action -> disconnect`模式是重复的，只有`do action`部分发生了变化。

在现实世界的环境中，通过创建一个可以传递查询的函数来消除重复是一个好主意吗？

例如：

## 处理查询的函数：

```
<?php
function databaseDo($action) {
    $db_hostname = 'localhost';
    $db_username = 'root';
    $db_password = 'root';

    try {
        // Establish DB connection
        $dbh = new PDO("mysql:host=$hostname;dbname=mysql", 
                $db_username, $db_password);
        echo 'Connected to database';

        // Do something
        $action($dbh);        // <- here goes whatever action we wish to perform

        // Close connection
        $dbh = null;
    } 
    catch(PDOException $e) {
        echo $e->getMessage();
    }
?> 
```

然后，假设我想执行 PDO 教程的第一个示例中的操作，我会这样设置：

```
<?php
// Define action
$insert = function($dbh) {
    $query = "INSERT INTO animals(animal_type, animal_name)
                VALUES ('kiwi', 'troy')";
    $exec = $dbh->exec($query);
    echo $exec; 
};

// Perform action
databaseDo($insert);
?> 
```

## $dbh 的范围

我使用 $dbh 作为参数。这是将变量传递给这样的函数而不使其成为全局变量的正确方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T03:18:02.867

是的，这是一个好主意 一个建议是制作一个使用单例模式的数据库帮助器类。像

```
abstract class DB
   {

    protected static $instance;

    protected $db;

    protected static $host = 'host';
    protected static $user = 'user';
    protected static $pass = 'pass';
    protected static $database;

    public static function getInstance()
    {
        if (!isset(self::$instance)) self::$instance = new static();

        return self::$instance;
    }

    public static function doStatement($statement, array $parameters)
    {

         $handler = self::sql()->prepare($statement);
         $handler->closeCursor();
         $handler->execute($parameters);
         return $handler;
    }
    protected function __construct()
    {
        $this->db = new PDO(sprintf('mysql:host=%s;dbname=%s', static::$host, static::$database), static::$user, static::$pass);
        $this->db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
        $this->db->setAttribute(PDO::ATTR_DEFAULT_FETCH_MODE, PDO::FETCH_OBJ);

    }

    public static function db()
    {
        return static::getInstance()->db;
    }
}

class Main extends DB
{
    protected static $database = 'db';
} 
```

使用它

```
$db = Main::getInstance();
$results = $db::doStatement('SELECT * FROM table WHERE id = :id', array(':id' => 5)); 
```

现在这只是非常基本的，还需要添加更多（异常处理、更多/更好的辅助方法等），但我在许多项目中都使用过类似的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:39:02.407

虽然避免重复 (DRY) 是一个始终应考虑到您的编码决策的原则，但它应该在不违反另一个重要原则的情况下实现，即关注点分离（[SoC](http://en.wikipedia.org/wiki/Separation_of_concerns)，另请参见[SRP](http://en.wikipedia.org/wiki/Single_responsibility_principle)）。您的示例 databaseDo($action) 具有双重用途：它 (1) 实例化数据库连接和 (2) 它执行查询。

现在，你可能会说，‘是的！这正是我想要的！一块石头杀死两只鸟！'，你这样说的理由是可以理解的。但是，混合职责可能会出现问题，因为当您必须更改处理一项职责的方式时，您可能还必须更改处理另一项职责的方式。

想象一下，在某个时候，您需要支持两个数据库连接，而不仅仅是一个。假设两个数据库之一支持另一个不支持的表上的事务。您的 databaseDo() 函数首先必须协商连接到哪个数据库，然后，为了安全地执行“do”操作，需要进行一些事务支持测试。它看起来像这样：

```
$context = 'production'; // but it could equally be 'development'

function databaseDo($action) {
  $db_hostname = ($context == 'production') ? 'http://remotehost.com' : 'localhost';
  $db_username = ($context == 'production') ? 'apache' : 'root';
  $pass = ($context == 'production') ? 'productionpassword' : 'developmentpassword';

  try {
    $dbh = new PDO("mysql:host=$db_hostname;dbname=mysql", $db_username, $db_password);
    echo 'Connected to database';

    if($context == 'production') {
      // ... some complicated logic to determine whether the production db 
      // will support your query, then execute it if so, exit if not ... 
    }

    if($context == 'development') {
      // ... some more complicated logic for testing and querying the 
      // development db ...
    }

    $dbh = null;
  } catch(PDOException $e) {
    echo $e->getMessage();
  }
} 
```

处理一个职责的额外要求会增加处理第二个职责的复杂性，并且这个功能将变得越来越难以维护。

在这种情况下，更好的 DRY 方法是在一个组件中处理数据库连接管理，例如在上下文感知单例类实例中（一种常用方法），以及在另一个组件中处理查询。因此，您的查询功能不一定要因数据库连接处理的变化而改变。您提到的教程包含[创建和使用此类单例实例的说明](http://www.phpro.org/tutorials/Introduction-to-PHP-PDO.html#13)。

# python - 如何编写圆形和正方形的面积程序

> ID：12434097
> 
> 赞同：-2
> 
> 时间：2012-09-15T02:41:00.490
> 
> 标签：python

编写一个程序，要求用户输入两个值：一个整数选择和一个实数 x。如果选择为 1，则计算并显示半径为 x 的圆的面积。如果选项为 2，计算并显示边长为 x 的正方形的面积。如果选择既不是 1 也不是 2，将显示文本无效选择。

所以我猜这被分成两部分？到目前为止，我所能想到的只是拥有一个选择（输入）函数并定义 pi 和 area 等是什么。但我不断收到错误。我究竟做错了什么？

```
choice = input ('Enter Choice:')
choice_1 = int (choice)
if (choice_1==1): radius = (int)
print('Enter x:',radius)
pi = 3.14159
area = ( radius ** 2 ) * pi
print ( 'The Area is=' , area )
choice_2= (choice)
if (choice_2==2): side= (int)
print('enter X:' side*side) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T02:56:44.647

虽然您的实际计算正确，但您接收输入的方式存在一些问题。你开始很好：

```
choice = input ('Enter Choice:') 
```

但然后这样做：

```
choice_1 = int (choice) 
```

这没有*错*，但不需要新的变量名。你也可以这样做`choice = int(choice)`。

然后你继续：

```
if (choice_1==1): radius = (int) 
```

语句没问题（虽然括号不是必须的`if`），但是它的正文有点奇怪。我不知道你想在那里实现什么，但几乎可以肯定它没有做你想做的事。您可能想要做的是删除`if`语句的当前主体并缩进一堆以下代码。

```
print('Enter x:',radius) 
```

这将打印出`Enter x:`后面的`radius`，您刚刚将其设置为`int`函数（可能不是您想要的。相反，您可能希望提示用户并接收他们的输入：

```
radius = input('Enter x: ') 
```

然后将其转换为浮点数：

```
radius = float(radius) 
```

回到你的代码。`pi = 3.14159`有效且正确，但无需`pi`在自己的代码中赋值；只需从以下位置导入`math`：

```
from math import pi 
```

然后你有这两行：

```
area = ( radius ** 2 ) * pi
print ( 'The Area is=' , area ) 
```

你在那里没有问题；那些应该可以正常工作。您的代码继续：

```
choice_2= (choice) 
```

这没有用。只需使用`choice`; 你不需要一个新的变量。

```
if (choice_2==2): side= (int) 
```

这里的`if`陈述也是正确的，但它的主体也是毫无意义的。同样，您可能希望提示用户输入一些内容，然后将其转换为浮点数。

最后，您得到：

```
print('enter X:' side*side) 
```

首先，您缺少逗号。其次，您在 之后输出区域`enter X:`，这没有多大意义。也就是说，您确实计算正确。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T02:46:26.257

代码存在许多问题。这是我认为您想要完成的工作示例：

```
#!/usr/bin/python
pi = 3.14159265

choice = input('Enter Choice [1 or 2]:')
choice = int (choice)

if choice == 1:
  radius = input('Enter x:')
  area = ( radius ** 2 ) * pi
  print 'The Area is=', area

if choice == 2:
  side = input('Enter x:')
  area = side ** 2
  print 'The Area is=', area 
```

您提供的代码存在许多问题：缩进、变量、输入和输出。还可以进行许多改进（例如删除重复的语句）。我上面给出的代码将完成您想做的事情。因此，让我们通过错误来更深入地了解。

## 缩进

首先，Python 程序应该正确缩进。这意味着遵循条件逻辑（例如`if`语句）的行应该被制表符。缩进称为“块”语句。`1`如果满足给定条件（例如，用户提供或`2`作为值），则只有那些缩进的行将被评估（执行）。

## 变量

`choice_1`和`choice_2`变量不是必需的。从逻辑上讲，您想告诉源代码的读者用户的输入应该四舍五入为整数。额外的变量是多余的——您可以重用该`choice`变量。

## 输入

该`input`函数用于将用户键入的任何值分配给表达式左侧的变量。例子：

```
choice = input ('Enter choice:')
radius = input( 'Enter x:' )
side = input( 'Enter x:' ) 
```

这些`input`语句出现在屏幕上。用户输入一个数字，该数字的值被放入相应的变量中。

## 输出

该`print`语句用于在屏幕上显示一个值。在您的代码中，您将文本字符串 ( `'Enter x'`) 与`print`语句组合在一起。计算机无法“知道”这`'Enter x'`意味着用户必须输入一个值。就像电脑不知道那`'Barney'`是紫色恐龙的名字一样。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T02:49:16.720

半径 = (int)

这似乎是主要问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T02:53:07.187

一些东西。

如果这就是您的脚本缩进的方式，那么它就行不通了。*缩进是python*的核心，你需要理解这一点，然后才能真正发挥作用。

如果输入是整数，它将使用 自动转换`input()`。您只要求输入一次，因此不要同时创建两个变量。

```
choice = input('Enter choice: ') 
```

如果应该在`if-elif-else`这里使用一个语句。使用控制结构对您有利：

```
if choice == 1:
  radius = input('Enter radius: ')
  print('Area of circle is ', (radius ** 2) * 3.14159)
elif choice == 2:
  side = input('Enter side length: ')
  print('Areas of square is ', side*side) 
```

这很简单，你想要实现的目标。

除此之外，你不应该做`side= (int)`or `radius = (int)`。当您应该从输入中获取值时，您正在为变量分配一种int**类型。**您会很快发现没有支持乘法的运算符`type and type`。

# c++ - 更改静态变量范围

> ID：12434099
> 
> 赞同：0
> 
> 时间：2012-09-15T02:41:39.097
> 
> 标签：c++

我在一个 C++ 类中有一个静态变量的定义：

```
static SomeType MyClass::StaticVariable; 
```

在另一个类中，我想使用这个没有 MyClass 前缀的变量。我可以这样做吗？如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:45:14.290

您可以使用参考：

```
class MyOtherClass {
    static SomeType &StaticVariable = MyClass::StaticVariable;
    // ...
} 
```

`MyOtherClass::StaticVariable`您必须确保在构建之前不要尝试引用`MyClass::StaticVariable`（在程序启动时）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:44:39.410

只有当“另一个类”派生自`MyClass`并`StaticVariable`具有公共或受保护的可见性时，您才能这样做。或者，您可以将该成员变量移动到某个其他范围或声明一个引用/指针并将其指向该变量，以便以后您必须减少输入。

# c++ - 模板或函数参数作为 doxygen 中的实现细节？

> ID：12434100
> 
> 赞同：1
> 
> 时间：2012-09-15T02:41:40.033
> 
> 标签：c++, parameters, doxygen

在 doxygen 中是否有任何常用方法来指定函数参数的某些 C++ 模板参数是实现细节，不应由用户指定？

例如，在元编程技术中用作递归级别计数器的模板参数或函数中的 SFINAE 参数？

例如 ：

```
/// \brief Do something
/// \tparam MyFlag A flag...
/// \tparam Limit Recursion limit
/// \tparam Current Recursion level counter. SHOULD NOT BE EXPLICITELY SPECIFIED !!!
template<bool MyFlag, unsigned int Limit, unsigned int Current = 0> myFunction(); 
```

是否有任何 doxygen 标准化选项等效于“不应该明确指定！！！” ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:50:13.203

在我看来，整个模板是不同接口的实现细节：

```
template<bool MyFlag, unsigned int Limit, unsigned int Current = 0> myFunctionImpl();

template<bool MyFlag, unsigned int Limit> myFunction() {
   myFunctionImpl<MyFlag, Limit, 0>();
} 
```

现在更容易记录：（`myFunction()`以及它的所有参数）是接口的一部分，它不包括迭代计数器。`myFunctionImpl()`是该接口的实现，根本不需要文档化（或者只需要最少的注释说明它是一个实现细节，用户代码不应依赖它或直接使用它）。如果需要，您可以将实现包含在一个`#ifdef`块中，以便 doxygen 预处理器将其删除并且它不会出现在生成的文档中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:35:07.170

传达不应指定参数的一种选择是将其隐藏在文档中。例如，您可以有条件地编译出内部参数：

```
/// \brief Do something
/// \tparam MyFlag A flag...
/// \tparam Limit Recursion limit
template<bool MyFlag, unsigned int Limit
#if !defined(DOXYGEN)
        , unsigned int Current = 0
#endif
> myFunction(); 
```

这将阻止它们出现在文档中，但它们仍可用于实现。

# css - 如何使用 CSS 在页面中心向下绘制垂直虚线？

> ID：12434102
> 
> 赞同：20
> 
> 时间：2012-09-15T02:42:19.080
> 
> 标签：css

我想在页面中心垂直向下画一条虚线，沿途“隐藏”在任何内容框下......有没有一种技术可以在 CSS 中做到这一点，或者我是否必须使用重复图像?

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-15T02:49:28.390

这给了你点：http: [//jsfiddle.net/NBMRp/](http://jsfiddle.net/NBMRp/)

```
body:after {
    content:"";
    position: absolute;
    z-index: -1;
    top: 0;
    bottom: 0;
    left: 50%;
    border-left: 2px dotted #444; /*change these values to suit your liking*/
} 
```

他们只是没那么漂亮。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T02:47:09.263

对于虚线，我将使用：

```
.vertical_dotted_line
{
    border-left: 1px dotted black;
    height: 100px;
} 

<div class="vertical_dotted_line"></div> 
```

并使其成为`under`您需要使用`z-index`虚线 div 和其他 div 的其他元素（它们应该具有更高的值`z-index`）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-11-04T14:20:31.970

如果您希望线条超出 div 的高度 -

```
.dashed-lines:after {
content:"";
position: absolute;
z-index: -1;
top: -50px;
bottom: -50px;
left: 50%;
border-left: 2px dotted #ce9b3a; 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T02:49:15.553

这可以通过重复图像或 CSS 来完成，具体取决于您想要的点类型，因为 CSS 只有少数类型甚至单个普通点。

使用 CSS，您可以通过使边框向左或向右来做到这一点。

例如

```
<div class="one"></div>
<div class="tow"></div> 
```

CSS

```
.one{
  width: 50%;
  border-right: 1px dotted red;
} 
```

并带有图像

```
body{
  background-image: url("dotted.png") repeat-y center top;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T02:50:35.773

`<body>`在 Photoshop 中使用所需的图案创建一个 1px 宽的 PNG 图像，然后将其设置为元素的背景（或 CSS3 中的多个背景图像之一） ，如下所示：

```
body {
    background-image: url("dottedLine.png") repeat-y center top;
} 
```

您可以通过使用`data:`URI 或创建重复的 2px-tall CSS3 渐变来在没有图像文件的情况下执行此操作。

# hive - 使用分区列的 Hive 查询不会检索所有记录。为什么？

> ID：12434104
> 
> 赞同：1
> 
> 时间：2012-09-15T02:42:35.010
> 
> 标签：hive

我有如下 Hive 声明：

```
INSERT INTO TABLE myTable partioned (myDate) SELECT * from myOthertable 
```

`myOthertable`包含 100 万条记录，并且在执行上述插入时，并非所有行都插入到`myTable`. 由于它是一个`SELECT *`没有任何`WHERE`子句的查询，理想情况下，应该对`myOthertable`into中的所有行进行 Insert `myTable`。它在插入时会忽略某些行。

谁能建议为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-01T06:58:44.700

问题可能是由于，如果表足够大，上述查询将无法正常工作，因为在初始地图任务中创建的文件数量较多。

因此，在这种情况下，将 hive 查询中的记录分组到 map 进程中，并在 reduce 端处理它们。您可以使用 DISTRIBUTE BY 在您的配置单元查询本身中实现相同的功能。下面是查询。

```
FROM myOthertable 
INSERT OVERWRITE TABLE myTable(myDate) 
SELECT other1, other2 DISTRIBUTE BY myDate; 
```

[此链接可能会有所帮助](http://unmeshasreeveni.blogspot.in/2014/11/hive-partitioning.html)

# java - Illegal State Exception 错误：目标主机不得为空或在参数中设置

> ID：12434109
> 
> 赞同：0
> 
> 时间：2012-09-15T02:43:44.570
> 
> 标签：java, android

我在我的旧 Galaxy s 上运行我的应用程序，它运行良好，然后我在我的 nexus s 上运行我的应用程序，它开始给我一些错误。我在使用 URLEncoder.encode 修复的 JSONParser 中的路径错误中遇到了非法字符，但现在我遇到了非法状态异常错误。我看了这里[http://blog.donnfelker.com/2010/04/29/android-odd-error-in-defaulthttpclient/](http://blog.donnfelker.com/2010/04/29/android-odd-error-in-defaulthttpclient/) 但我的网址中已经有 http://。我在调试器中检查了我的 httpget 的 uri。我不确定我在这里寻找什么。我知道我正在尝试查找是否已对一个字符进行了编码，该字符不应该按照我上面链接到的文章的评论中的建议进行编码，但我不知道如何去做。当我在 JSONParser.doInBackground 方法中单击 httpGet 下的 uri 时，我得到 %5BLjava.lang.String%3B%4042b3f010。我是否正确，这是来自 URLEncoder.encode 的编码表示？我将一个 StringBuilder 类型的 url 传递给我的 JSONParser.doInBackground，我将其转换为 String 然后进行编码。调试器中的 myURL 条目与 uri 相同：%5BLjava.lang.String%3B%4042b3f010。我是否要正确执行此操作。感谢您的帮助。

```
public class JSONParser extends AsyncTask<String, Void, JSONObject> {

static InputStream inputStream = null;
static JSONObject jObject = null;
static String jSon = "";
protected JSONObject doInBackground(String... url) {
    // TODO Auto-generated method stub

    //Make HTTP Request
            try {
                //defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String myURL = url.toString(); 
                myURL = URLEncoder.encode(myURL, "utf-8");
                HttpGet httpGet = new HttpGet(myURL);

                //header
                httpGet.setHeader("Accept", "application/json");

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                inputStream = httpEntity.getContent();

            } catch (UnsupportedEncodingException e){
                e.printStackTrace();
            } catch (ClientProtocolException e){
                e.printStackTrace();
            }catch (IOException e){
                e.printStackTrace();
            }

            try {
                BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream, "UTF-8"), 8);
                StringBuilder stringBuilder = new StringBuilder();
                String line = null;
                while ((line = reader.readLine()) != null){
                    stringBuilder.append(line + "\n");
                }
                Log.d("JSON Contents", stringBuilder.toString());
                inputStream.close();

                jSon = stringBuilder.toString();

            } catch (Exception e){
                Log.e("Buffer Error", "Error converting result " + e.toString());
            }
            //try to parse the string to JSON Object
            try {
                jObject = new JSONObject(jSon);

            } catch (JSONException e){
                Log.e("JSON Parser", "Error parsing data " + e.toString());
            }
            //return JSON String
            return jObject;
}

} 
```

这就是我构建传递给解析器的 url 的方式：

```
public class getName {
static String nameOne = null;
static String nameTwo = null;

static StringBuilder personURLOne = new StringBuilder();
static StringBuilder personURLTwo = new StringBuilder();

public static String personURL = "http://api.themoviedb.org/3/search/person?api_key=bb0b6d66c2899aefb4d0863b0d37dc4e&query=";

public static StringBuilder getName1(EditText searchOne){
    nameOne = searchOne.getText().toString();

    nameOne = nameOne.replace(" ", "_");

    personURLOne.append(personURL); 
    personURLOne = personURLOne.append(nameOne);

    return personURLOne;

} 
```

感谢任何帮助

更新 - 我在我的 JSONParser 中将我的代码更改为以下内容：

```
public class JSONParser extends AsyncTask<String, Void, JSONObject> {

static InputStream inputStream = null;
static JSONObject jObject = null;
static String jSon = "";
public String myURL;
protected JSONObject doInBackground(String... url) {
    // TODO Auto-generated method stub

    //Make HTTP Request
            try {
                //defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                for(int i = 0; i < url.length; i++){
                     myURL = url[0];
                     myURL = URLEncoder.encode(myURL, "utf-8");
                }
                HttpGet httpGet = new HttpGet(myURL); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:54:04.440

如果你对它进行 URL 解码，`%5BLjava.lang.String%3B%4042b3f010`你会得到`[Ljava.lang.String;@42b3f010`.

这很可疑，它不是 URL。当你调用`toString`一个数组时，你会得到一个带有左括号的有趣的字符串。例如，一个整数数组打印出类似`[I@33f42b49`.

这是因为`url`在您的`doInBackGround`方法中实际上是一个字符串数组，而不是字符串，因为`doInBackground`它采用可变数量的字符串参数：`doInBackground(String...`省略号表示带有可变参数的方法。所以你根本不想调用`toString`它。

相反，您需要遍历它并下载所有这些，或者只使用第一个：`url[0]`. 我`urls`也将它重命名为，只是为了让它明显:)

# python - pip 无法安装 psycopg2。通过 apt-get 安装，但构建文件夹仍然存在

> ID：12434110
> 
> 赞同：0
> 
> 时间：2012-09-15T02:43:47.310
> 
> 标签：python, linux, ubuntu, pip, psycopg2

我正在尝试通过 Heroku 开始使用 Django。他们的指南建议我安装 psycopg2。

我安装了 Django 和一些 dj-library manager，`pip`没有任何问题，但`psycopg2`我一直要求我没有的文件。一些解决方案建议安装`python-dev`和另一个包，但我决定尝试`sudo apt-get`并且它有效，甚至现在`pip`识别`psycopg2`为已安装。

唯一的问题是我在新创建的“项目”文件夹中运行了失败安装的控制台，现在有一个 Build 文件夹坐在那里等待 pip 完成它开始的工作。我该如何摆脱它？

另外，我是*Ubuntu* /Django/Python-in-linux 的新手，所以请随时纠正我迄今为止收集到的任何误解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:20:14.277

也许你没有做递归 rm：

```
sudo rm -r Build 
```

如果 sudo 工作正常，访问被拒绝的原因很少。

# actionscript-3 - 在 AS3 中，新的处理是什么 () 不会导致creationComplete 事件？

> ID：12434117
> 
> 赞同：0
> 
> 时间：2012-09-15T02:45:37.827
> 
> 标签：actionscript-3, flash, actionscript, mxml

我刚刚在我的代码中发现了一个错误，即类 Player 没有引发 creationComplete 事件。

网格.mxml：

```
m_arrSpaces[4][4].entities.addItem(new Player()); 
```

播放器.mxml：

```
<?xml version="1.0" encoding="utf-8"?>
<Entity xmlns="entities.*" xmlns:mx="http://www.adobe.com/2006/mxml" creationComplete="onCreationComplete">
    <mx:Script>
    <![CDATA[
        import mx.controls.Alert;

    private function onCreationComplete():void {
        Alert.show("cration");
        m_imgActiveImage = imgUp;
    }
    ]]>
</mx:Script> 
```

我知道 Grid.mxml 中的行正在运行，并且 Player 对象正在添加到 m_arrSpaces[4][4].entities。我也知道 Player.onCreationComplete() 永远不会被调用。什么？

编辑：等等，即使我更正错字并在 MXML 标记中包含括号，它也在做同样的事情，如：

```
creationComplete="onCreationComplete()" 
```

编辑：哦，是的，这是实体的代码：

```
<?xml version="1.0" encoding="utf-8"?>
<mx:Canvas xmlns:mx="http://www.adobe.com/2006/mxml" creationComplete="onCreationComplete()">
<mx:Script>
    <![CDATA[
        import mx.collections.ArrayCollection;
        import mx.controls.Image;

        import spaces.Space;

        protected var m_imgActiveImage:Image;

        public function get activeImage():Image {
            return m_imgActiveImage;
        }

        private function onCreationComplete():void {
            width = Space.SPAN - 4;
            height = width;
        }
    ]]>
</mx:Script>
</mx:Canvas> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:01:46.350

你有这个：creationComplete="onCreationComplete"

它应该是：

creationComplete="onCreationComplete()"

使用和 alert 对新应用程序进行了快速测试，但从未到达 onComplete() 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T04:34:44.380

好吧，看起来手头的另一个问题是

```
m_arrSpaces[4][4].addChild(new Player()); 
```

需要被调用才能让一切正常工作，而不是

```
m_arrSpaces[4][4].entities.addItem(new Player()); 
```

# node.js - 节点套接字挂断 Twitter 流 filter.json 获取

> ID：12434118
> 
> 赞同：1
> 
> 时间：2012-09-15T02:46:13.837
> 
> 标签：node.js, httpwebrequest

我有以下简单的 Coffeescript 代码来访问 Twitter [Stream API](https://dev.twitter.com/docs/api/1.1/post/statuses/filter)

```
http = require 'http'

options =
    port: 443
    host: 'stream.twitter.com'
    path: '/1.1/statuses/filter.json?track=keyword'
    headers:
        'Authorization': 'Basic ' + new Buffer('[user]:[pass]').toString 'base64'
        'Host': 'stream.twitter.com'
    method: 'GET'

callback = (res) ->
    console.log res
    res.on 'data', (chunk) ->
        console.log chunk

    res.on 'end', -> console.log 'end'

    # res.on 'close', -> res.emit 'end'

http.request options, callback 
```

为什么我越来越

```
throw arguments[1]; // Unhandled 'error' event

Error: socket hang up 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T05:22:29.523

错误触发了您未在监听`error`的响应 ( ) 上的事件。`res`默认情况下，`error`Node.js EventEmitters 中的事件，如果没有被监听，将会抛出。您需要添加

```
res.on 'error', # whatever 
```

并处理错误。

请注意，这只会防止错误被抛出；它不会阻止错误的发生。

# javascript - jquery对子数组进行malipulate，并使用each/map返回一个新数组

> ID：12434122
> 
> 赞同：0
> 
> 时间：2012-09-15T02:47:30.373
> 
> 标签：javascript, jquery, arrays, string, loops

我有这个字符串的形式

`ItemName1:Rate1:Tax1_ItemName2:Rate2:Tax2:_ItemName3:Rate3:Tax3_ItemName4:Rate4:Tax4`（依此类推，直到第 25 项）。

我要做的是，用户将传递一个索引，（比如2）在该索引处获取项目，当这个字符串被分割时`_`，例如。如果 index 是 2，我会得到 substring `ItemName3:Rate3:Tax3`。用户将传递的另一件事是 3 个参数，表示`newItem`、`newRate`和`newTax`，然后我必须用这些新值替换在该特定索引处找到的这些旧项目**并**返回新字符串。也许一个例子可以清楚地说明

```
var itemList=ItemName1:Rate1:Tax1_ItemName2:Rate2:Tax2:_ItemName3:Rate3:Tax3_ItemName4:Rate4:Tax4 
```

用户传递参数，`2, Denim Jeans, 399.00, 14.34`.
这必须更换原件`itemList`并返回

```
ItemName1:Rate1:Tax1_ItemName2:Rate2:Tax2:_Denim Jeans:399.00:14.34_ItemName4:Rate4:Tax4 
```

（希望我说清楚了）。
我知道最简单的方法是首先拆分`itemList`by `_`，然后在给定索引处拆分`:`，然后替换这些项目，然后使用 for 循环创建一个新字符串，然后返回该新字符串。但这似乎是很多工作。有没有一种简单的方法可以通过使用`.each()`and/or来实现`.map()`，虽然可能在 a`for`中，但我不介意！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:08:52.733

你的意思是这样的吗？

```
var items = str.split('_').map(function(v){ return v.split(':') }); 
```

这将生成一个数组：

```
[
  ["ItemName1","Rate1","Tax1"],
  ["ItemName2","Rate2","Tax2"],
  ["ItemName3","Rate3","Tax3"],
  ["ItemName4","Rate4","Tax4"]
] 
```

**演示：http:** [//jsfiddle.net/elclanrs/7uVDM/](http://jsfiddle.net/elclanrs/7uVDM/)

# c++ - 如何包含根目录中的 stdafx.h？

> ID：12434123
> 
> 赞同：28
> 
> 时间：2012-09-15T02:47:36.693
> 
> 标签：c++, visual-c++

使用 VS 中的“显示所有文件”选项，我添加了一个文件夹并在该文件夹中创建了一个新类。由于我使用的是预编译头文件，因此我还需要包含与新类文件相关的根目录中的 stdafx.h。

在我的 cpp 文件中，我有

```
#include "..\stdafx.h" 
```

但是我收到以下错误：

> 错误**C1010**：查找预编译头时文件意外结束。您是否忘记将 '#include "stdafx.h"' 添加到您的源代码中？

我的理解是，.. 应该指示编译器上一级目录？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-15T06:08:09.937

Visual C++ 允许您定义几种设置预编译头文件的方法。最常见的是在项目配置级别为所有源文件启用它，在 Configuration Properties/C++/Precompiled Headers 下，设置“Precompiled Header”，选择“Use”。设置“预编译头文件”的相同位置通常是“stdafx.h”。所有文件都将获得此设置（因此项目中的配置）除了....

一个文件负责生成 PCH 文件。该文件通常是项目中的 stdafx.cpp 文件，它通常除了`#include "stdafx.h"`. 为那个文件配置预编译头文件，从“使用”切换到“创建”。这确保了如果 PCH 的主要标头不同步，stdafx.cpp 总是首先编译以重新生成 PCH 数据文件。在 Visual Studio 中还有其他配置 PCH 设置的方法，但这是最常见的。

话虽这么说，你的问题肯定很烦人。用于启动 PCH 系统并在上面的“使用...”和“创建...”设置中指定的文件名**必须与您的 #include 中的文本完全匹配**。

因此，您很有可能可以通过将“..”添加到项目包含目录并从#include 语句中删除“..”来解决您的问题。您也可以在项目配置级别将其更改为“..\stdafx.h”作为直通标题，但如果您在多个文件夹中分层放置源文件，这可能会出现问题。

哦，如果您在阅读 PCH 配置设置时不清楚，如果您不想将 PCH 用于任何特定的源文件（并且有时有理由不这样做），您可以将其关闭以用于特定的源文件，否则请确保在每个源文件（c/cpp 等）的开头始终包含 #include "your-pch-include-file.h"。

希望你能休息一下。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-10-27T16:34:55.897

我通常也喜欢在我的项目中使用分层顺序，我发现有两种简单的方法可以包含预编译的标头：

任何一个

1.  将所在的目录`stdafx.h`放入编译器的包含目录中。

    （*属性*- *VC++ 目录*-*包括目录*：添加`$(ProjectDir)`）

或者

2.  如果没有太多的子目录，一个简单的绕过错误信息的方法是这样的：

    *   将`stdafx.h`文件放入每个仅包含顶级的子目录中`stdafx.h`：
        `#include "..\stdafx.h"`
    *   写`#include "stdafx.h"`为子目录中所有源文件的第一行，而不是在其中包含顶级文件。

这样，您的所有代码文件都使用相同的预编译头文件，无需进行其他复杂的设置。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-06-08T17:47:28.023

有趣的是，我使用的技巧不在答案中：

1.  在项目的根文件夹中创建 stdafx.h 和 stdafx.cpp。
2.  转到项目属性-> 预编译头文件。改为“使用”。
3.  转到stdafx.cpp，右键单击属性-> 预编译头文件。改为“创造”。
4.  转到项目属性-> 高级；将“强制包含文件”更改为 stdafx.h；%(ForcedIncludeFiles)

**不要更改任何 CPP 文件；保持你的头文件原样。按原样构建。**

没有打字，没有 RSI，没有包含路径的麻烦，没有其他痛苦和痛苦。美妙之处在于，当您将解决方案转移到另一个平台时，它仍然可以工作。惊人的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-30T10:55:41.887

您可以基于每个文件调整预编译头设置。

1.  在解决方案资源管理器中右键单击 .cpp 文件，选择“属性”。
2.  我强烈建议在配置下拉列表项中选择“所有配置”。
3.  浏览到“C/C++”-“预编译头文件”。
4.  将“预编译头文件”从“stdafx.h”调整为您需要的任何内容（例如在您的情况下`"../stdafx.h"`）。

请注意，这是单调乏味且容易出错的，因为它是在每个文件的基础上完成的，未来将文件添加到您的项目的开发人员必须遵循相同的步骤。如果他们不这样做，他们将面临警告和错误，例如：

*   `warning C4627: '#include "<path>"': skipped when looking for precompiled header use.`

和

*   `fatal error C1010: unexpected end of file while looking for precompiled header. Did you forget to add '#include "stdafx.h"' to your source?`

这并没有给出关于这种或任何其他方法的太多指示。

我猜他们最终会转向 StackOverflow 并最终来到这里……您好，感谢您的阅读。

在此基础上，值得采用替代方案，例如放置`$(ProjectDir)`C++ 包含路径（在 C++\General 下），但在包含其他头文件时可能会导致混淆。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-15T03:26:50.687

PCH 文件很奇怪，在 Visual Studio 中更是如此。编译使用 PCH 的 .cpp 文件时，VS 期望第一个非注释/空白文本为`#include "PCH_NAME_HERE"`. 这`PCH_NAME_HERE`正是PCH 的名称*。*没有目录，什么都没有。只是编译器选项中指定的 PCH 名称。

如果你打算做这个目录伪造，那么你需要修改你的编译器设置，以便 PCH 所在的目录在目录搜索路径中。这样，您就不需要拥有该`..\`部分。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-04-22T20:35:02.480

我建议使用：

```
$(ProjectDir)/pch/my_pch.h 
```

作为*“预编译头文件”*
和*“高级>强制包含文件”*

这将在开始时自动包含`pch`您的`.cpp`文件，因此文件中无需更改任何`.cpp`内容。

这比更改包含目录要好，因为有时您可能`pch`在包含目录中有多个文件，然后您无法分辨出使用了哪个文件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-08-06T10:21:50.630

造成混淆的原因是 Visual Studio 将包含预编译头的 include 指令与其他 include 指令区别对待。具体来说，它不使用普通路径查找方法来查找预编译的标头，而是通过简单的字符串比较尝试将包含指令与项目配置中定义的指令相匹配。

预编译器头配置是全局设置的，但可以按文件覆盖。正常的全局配置（通过 Project Properties -> Configuration Properties -> C/C++ -> Precompiled Headers 访问）是：

```
Precompiled Header: Use (/Yu)
Precompiled Header File: stdafx.h
Precompiled Header Output File: $(IntDir)$(TargetName).pch 
```

默认情况下，此配置应用于项目中的所有文件。但是，stdafx.cpp 的配置是在文件级别设置的，并将 Precompiled Header 值覆盖为：

```
Precompiled Header: Create (/Yuc) 
```

* * *

这样做的效果是，对于配置为使用预编译头文件的任何源文件（默认情况下是除 stdafx.cpp 之外的所有源文件），VS 将查找与配置的预编译头文件值匹配的包含指令。例如

```
#include "stdafx.h" 
```

因为检查使用简单的字符串比较而不是任何类型的目录搜索，所以（无论源文件相对于项目根目录的位置或 stdafx.h 文件的位置）包含中使用的路径和文件名指令必须与项目的预编译头文件配置设置使用的*完全匹配。*这样做的意外副作用是，如果您有一个包含各种源文件的项目子目录，则在这些文件中您不需要使用 ..\stdafx.h 之类的相对路径引用 stdafx.h 文件（如果您使用 VS将引发一个错误，指出它在查找预编译头时遇到了文件结尾）。

只需使用未经修饰的#include "stdafx.h" 就可以正常工作，因为 VS 会将此识别为使用预编译头的指令，并且它已经知道正确的预编译头在哪里，因为 stdafx.cpp 预编译头配置正在设置为“创建 (/Yc)”。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2015-06-05T07:54:53.610

如果您的项目的 .cpp 和 .h 文件位于不同的子目录中（而不是明确地在项目目录中），那么使用相对于解决方案目录的包含路径将是一种很好的编码风格（如果您不使用专用的包括目录）。特别是如果您在一个解决方案中有多个项目并且需要共享包含文件（例如，为了项目之间的互操作性，例如 .exe 和 .dll）。

要重构您的项目，您需要执行以下操作：

1.  在每个项目中指定额外的包含目录 $(SolutionDir) ：右键单击项目，单击“属性”，转到“配置属性”->“C/C++”->“常规”（一次对所有配置执行此操作，从“配置”下拉菜单中选择“所有配置”）
2.  转到“C/C++”->“预编译头文件”并将“预编译头文件”值更改为相对于解决方案目录的路径，例如 PROJECT_NAME/stdafx.h
3.  在您的 .cpp 文件中包含“PROJECT_NAME/stdafx.h”，而不仅仅是“stdafx.h”
4.  在您的 .h 和 .cpp 文件中，包含某些内容时，使用路径作为“PROJECT_NAME/dir1/dir2/file.h”，除非包含来自同一目录的文件

* * *

## 回答 #9

> 赞同：-4
> 
> 时间：2012-09-15T03:22:33.047

使用引号意味着它是您自己的头文件使用`<>`意味着它是系统头文件如果我没记错就使用`#include <stdafx.h>`并让编译器找到它

# iphone - 重构为 arc 导致“仅在 arc 或 gc 模式下允许合成‘弱’属性”

> ID：12434127
> 
> 赞同：8
> 
> 时间：2012-09-15T02:48:52.677
> 
> 标签：iphone, ios4, ios5

我正在为 iOS 目标 5.1 使用 xcode 4.4.1 我已经使用 ARC 开始了我的项目，并且在项目中间我向我的项目中添加了一些非 arc 第三方源。在这一点上，我决定尝试在 xcode 中重构并发生错误。它来自我的原始源代码之一。

我有一个（非原子，弱）的属性，我已经合成了它==> '弱'属性的合成只允许在 ARC 或 GC 模式下。

我很困惑 - 我正在使用弧，它抱怨它只允许在弧中使用？

目前，我已经从其他项目中重构了第三方应用程序并将其复制以供我的项目工作，但以上是我仍然想了解原因的问题。谢谢！（顺便说一句，当我转换为弧时，它说目标当前使用弧）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T12:40:25.490

听起来问题在于您已经将其设置为 ARC 项目，并且出于某种原因尝试再次对其进行转换。我只能假设该过程不会因此在此阶段出现弱引用。如果您将它们设置为分配然后转换为 ARC，您会看到它建议您将它们更改为弱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-28T15:51:16.413

我在使用针对 iOS 6.1 的 Xcode 4.6.3 时遇到了同样的症状。我从另一个项目中引入了一个非 ARC 类，并通过 Refactor 菜单对其进行了转换，结果导致后续构建在预先存在的类上失败，并出现您看到的错误（“仅在 arc 或 gc 中允许合成‘弱’属性模式”）。

项目属性清楚地表明它仍然是一个 ARC 项目，但编译器似乎忘记了该类的情况。

我通过将属性设置为“强”并通过“重构”菜单将该类转换为 ARC 来解决此问题。不出所料，它告诉我没有必要进行任何更改，但确实提供了一个我单击的保存按钮。然后我能够将属性改回“弱”并编译项目。（我假设某些元数据在此过程中的某个地方不同步。）

编辑：我最终不得不将其他符合 ARC 的类“重构”为 ARC，因为尽管它们编译它们会生成警告并导致我的应用程序崩溃。我认为这个故事的寓意是，将你的整个项目包括在重构中可能会更安全......

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-15T16:28:04.397

改为使用：

```
@property(nonatomic,assign) 
```

*注意 - 这与弱不同，但非常相似。Weak 还将对象设置为 nil，assign 没有。

# ruby-on-rails - ruby 指的是 mac osx 上已删除的位置

> ID：12434128
> 
> 赞同：1
> 
> 时间：2012-09-15T02:49:13.413
> 
> 标签：ruby-on-rails, ruby, macos, shell, rvm

我在我的 Mac 上安装了 rvm 并使用了一段时间。但是，想以全新的方式开始一个新项目，并删除了我的主目录中的 .rvm 文件夹。

但是，如果我现在运行 `which ruby` 它会显示 `/usr/bin/ruby` ，如果我运行 `ruby -v`，它会显示： `/Users/kiran/.rvm/rubies/ruby-1.9.3-p194/bin/ruby file not found`

我的任何 bash* 文件中都没有别名。这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:43:33.787

这是因为命令的 PATH 解析被缓存了，你需要运行：

```
hash -r 
```

它会清理缓存。

# javascript - 提交没有表单的 POST 方法？

> ID：12434133
> 
> 赞同：0
> 
> 时间：2012-09-15T02:50:09.997
> 
> 标签：javascript

我需要制作一个与社交网络中的“关注”按钮功能相似的按钮。问题是当用户单击按钮时我需要刷新页面，因为页面内容很大程度上取决于用户是否关注。

我可以使用 ajax 提交“关注”并在 ajax 响应时重新加载页面。是否可以在没有 AJAX 的情况下使用 POST 提交数据（就像表单一样）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:06:31.860

使用 JQuery，您可以执行类似的操作

```
$.post('pageurl.php', {"variable1": "Value1", "Variable2": "Value2"}, function(datareturn){}); 
```

并像往常一样从服务器端处理它

```
$var1 = $_POST["varriable1"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:56:41.893

根据要提交的数据量，常规链接也可以提交数据。

例如，这会提交搜索词`this and that`

```
https://www.google.com/search?q=this+and+that 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T02:57:01.870

您可以动态创建表单，然后将其删除：

```
function postjs (to,method, p) {
  var myForm = document.createElement("form");
  myForm.method=method;
  myForm.action = to ;
  for (var k in p) {
    var myInput = document.createElement("input") ;
    myInput.setAttribute("name", k) ;
    myInput.setAttribute("value", p[k]);
    myForm.appendChild(myInput) ;
  }
  document.body.appendChild(myForm) ;
  myForm.submit() ;
  document.body.removeChild(myForm) ;
} 
```

并称之为：

```
postjs('target.php','post',{field1:'value1',field2:'value2'}) 
```

# java - 渲染等距网格

> ID：12434136
> 
> 赞同：2
> 
> 时间：2012-09-15T02:51:55.347
> 
> 标签：java, swing, isometric

我正在为等距游戏制作地图编辑器，但在渲染等距引导网格（显示对象放置位置的网格）上有点卡住。也就是说，我需要在 Graphics 对象上画线，使其形成一个具有可变宽度和高度的单元格的网格。我该怎么做才能做到这一点？

到目前为止，我有：

```
//The number of cells in each direction
int nv=h/cellh;
int nh=w/cellw;
for(int i=1;i<=nv;++i){
    g.drawLine(0,i*cellh,i*cellh*2,0);
} 
```

但这只是从左侧开始绘制从左下角到右上角的线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T05:10:35.057

这将按您的预期工作：

```
public void paintComponent(Graphics g) {
    super.paintComponent(g);
    g.setColor(Color.GREEN);
    int width = getWidth();
    int height = getHeight();
    int sizeW = 50;
    int sizeH = 50;
    int countW = width / sizeW;
    int countH = height / sizeH;

    for (int i = 0; i <= countW + countH; i++) {
        g.drawLine(0, i * sizeH, i * sizeH, 0);
        g.drawLine(width - i * sizeW, 0, width, i * sizeW);
    }
} 
```

# wordpress - 更改 wordpress 中的永久链接？

> ID：12434138
> 
> 赞同：0
> 
> 时间：2012-09-15T02:52:09.993
> 
> 标签：wordpress

我在 wordpress 中有一个帖子。我改变了它的固定链接。以前是：

```
http://example.com/foo/dogs-so-awesome/ 
```

我将永久链接更改为：

```
http://example.com/foo/dogs/ 
```

我原以为旧网址不再起作用，但我仍然可以从网络浏览器中点击它并查看该页面。新的网址也有效。wordpress 在这里做重定向吗？我实际上想删除旧的 url，所以当有人试图点击它时它会 404s。但我在 wordpress 管理界面中找不到任何建议如何执行此操作的内容。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:49:51.497

您是否更改了页面的标题？还是永久链接？

如果您更改了它的“标题”，那么页面的标题将是`dogs`，但永久链接仍然是`dogs-so-awesome`。标题下方是带有“编辑永久链接”选项的永久链接。用那个。

如果你想 404 它，你可以使用一些东西（可能是 Page Links To 插件）并在`dogs-so-awesome`404 上创建一个帖子。

# c - BST 插入操作。如果已经存在重复，则不要插入节点

> ID：12434139
> 
> 赞同：-1
> 
> 时间：2012-09-15T02:52:14.093
> 
> 标签：c, insert, binary-search-tree

下面的代码读取一个输入数组，并从中构造一个 BST。如果当前 arr[i] 是树中节点的副本，则丢弃 arr[i]。struct节点中的count是指一个数字在数组中出现的次数。fi 指的是在数组中找到的元素的第一个索引。插入后，我正在对树进行后序遍历并打印数据、计数和索引（按此顺序）。运行此代码时得到的输出是：

```
0 0 7
0 0 6 
```

感谢您的帮助。

吉夫

```
 struct node{

    int data;
    struct node *left;
    struct node *right;
    int fi;
    int count;

};

struct node* binSearchTree(int arr[], int size);
int setdata(struct node**node, int data, int index);
void insert(int data, struct node **root, int index);
void sortOnCount(struct node* root);

void main(){

    int arr[] = {2,5,2,8,5,6,8,8};
    int size = sizeof(arr)/sizeof(arr[0]);
struct node* temp = binSearchTree(arr, size);
sortOnCount(temp);

}   

struct node* binSearchTree(int arr[], int size){

    struct node* root = (struct node*)malloc(sizeof(struct node));

    if(!setdata(&root, arr[0], 0))
        fprintf(stderr, "root couldn't be initialized");

    int i = 1;
    for(;i<size;i++){
        insert(arr[i], &root, i);
    }

    return root;
}    

int  setdata(struct node** nod, int data, int index){

    if(*nod!=NULL){

    (*nod)->fi = index;
    (*nod)->left = NULL;
    (*nod)->right = NULL;
    return 1;
}
return 0;
}

void insert(int data, struct node **root, int index){

struct node* new = (struct node*)malloc(sizeof(struct node));
setdata(&new, data, index);
struct node** temp = root;

while(1){

    if(data<=(*temp)->data){
        if((*temp)->left!=NULL)
            *temp=(*temp)->left;
        else{
            (*temp)->left = new;
            break;
        }
    }
    else if(data>(*temp)->data){
        if((*temp)->right!=NULL)
            *temp=(*temp)->right;
        else{
            (*temp)->right = new;
            break;
        }
    }
    else{
        (*temp)->count++;
        free(new);
        break;
    }
}

}

void sortOnCount(struct node* root){

if(root!=NULL){

    sortOnCount(root->left);
    sortOnCount(root->right);
    printf("%d %d %d\n", (root)->data, (root)->count, (root)->fi);
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:01:52.573

在插入函数的while循环中放置一个if条件。

```
while(1)
{
    if(data==(*temp)->data)
          break;
    else
    {
         your stuff;
    }
} 
```

它可能是你的答案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:35:01.300

好吧，首先，您将指针传递给插入函数中的指针：

```
void insert(int data, struct node **root, int index); 
```

然后你有一个临时变量：

```
struct node** temp = root; 
```

你用来遍历你的树。当你这样做时，你正在改变你的根。只需传递一个指针，即

```
void insert(int data, node *root , int index){ 
```

其次， `if(data<=(*temp)->data){`应该只是 <，而不是 <=。

提示：一般来说，当你真正*需要*将一个指针传递给一个指针时，这是相当罕见的。

# javascript - 如何实现由 3rd 方服务器触发的 JavaScript 方法？

> ID：12434141
> 
> 赞同：2
> 
> 时间：2012-09-15T02:52:34.353
> 
> 标签：javascript, ajax, http, events, web-applications

我正在查看必须在以下约束下工作的 Javascript 小部件：

1.  小部件向第 3 方服务器发出请求以及回调 URL
2.  3rd 方服务器在任意时间后 ping 回调 URL，这应该触发一个在小部件内运行的方法

这是小部件的实现方式：

1.  服务器 A 已设置完毕。该小部件将 GUID 参数附加到指向服务器 A 的静态 URL。
2.  小部件将此 URL（带有 GUID 参数）发送到第 3 方服务器。
3.  服务器 X 只是侦听来自第 3 方服务器的请求，并将每个请求的 GUID 参数存储在数据库中。
4.  该小部件每 X 秒轮询一次服务器 A，以查看第 3 方服务器是否使用其 GUID 发送了回调。
5.  如果服务器返回 OK 响应，则小部件将运行所需的方法。

似乎是一个相当粗略的实现。没有更简单的方法可以做到这一点吗？

我想探索：

a) 是否可以避免重复从小部件轮询服务器？可以设置保持连接吗？小部件可以订阅服务器事件吗？我查看了允许服务器向浏览器发送推送通知的服务器发送事件 API。但这与 IE 尚不兼容。

b) 是否可以完全避免设置后端？WebSockets 浮现在脑海，但我对细节模糊不清，兼容性问题会使它们不受欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T04:12:23.000

服务器消息和 WebSocket 是您的两个答案。可悲的是，两者都不是无处不在，所以你不能使用任何一个的普通实现，并期望得到完全的支持。

有一些解决方案（不幸的是，有几个付费的），它们在两端都提供 WebSocket 功能，并回退到 Flash 或长轮询。

Pusher 是一个立即浮现在脑海中的库。无论后端是什么，Pusher 都有多种实现，客户端将默认使用 websockets，但如果可能，将恢复为 Flash 的数据传输格式。他们还有一个 REST API。

这一切都取决于你想要支持的人。最后，我什至不知道您是否想为 IE6/7 用户提供完整的实时体验，即使您可以... ...因为解决方法（即：持续轮询）最坏的情况也是性能最慢的，然后最慢的浏览器将被卡住。

# php - 需要密码才能查看网页 [jQuery、JavaScript 或 PHP]

> ID：12434145
> 
> 赞同：3
> 
> 时间：2012-09-15T02:54:12.097
> 
> 标签：php, jquery, password-protection

我有一个想要密码保护的页面。[如果用户点击 URL www.webpage.com/page.php](http://www.webpage.com/page.php) ，则该页面应该可以访问。它将通过电子邮件连同验证码一起发送给用户。

我的大部分页面都是用 jQuery 编写的。我想知道如何防止在没有正确密码的情况下访问该页面。在用户输入正确的密码并验证后，它将显示内容。

我尝试使用 jQuery 对话框做一些事情，并隐藏内容然后在验证后显示它，但是如果用户查看页面的源代码，则可以查看内容。

我该怎么做呢？

我只是想避免创建一个新页面。我想我将不得不使用会话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:59:14.373

是的，你可以这样做，但如果你只通过密码保护页面客户端它不是一个好主意，因为用户可以修改 JavaScript/jquery，你可以在验证密码后通过 ajax 加载内容。

为了防止没有密码的访问，请不要加载密码未验证的数据（因为我认为您正在通过 ajax 验证密码）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T03:49:37.497

如果您只是想要一个快速简单的解决方案，您还可以考虑使用 PHP 的 HTTP 身份验证。它可以像以下一样简单

```
<?
header("Content-type: text/html; charset=utf-8");
if(empty($_SERVER['PHP_AUTH_USER'])) {
    header('WWW-Authenticate: Basic realm="Please input"');
    header('HTTP/1.0 401 Unauthorized');
    echo 'Please enter the correct username and password.';
    exit;
} else {
    echo "Username: ".$_SERVER['PHP_AUTH_USER']."<br>";
    echo "Password: ".$_SERVER['PHP_AUTH_PW']."<p>";
    $username = "demo";
    $password = "demo";
    if(($_SERVER['PHP_AUTH_USER'] != $username) || ($_SERVER['PHP_AUTH_PW'] != $password)) {
        echo "Login Failed!";
    } else {
        echo "You're in!";
    }
}
?> 
```

[您还可以在此处](http://us3.php.net/features.http-auth)找到更详细的实现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T02:58:23.370

您需要验证他们在 PHP 中使用（正确的）密码，然后*才*实际将内容输出给他们。如果他们没有密码，那么将其隐藏起来是不可行的。

通常，[会话](http://php.net/manual/en/features.sessions.php)变量用于此目的。验证脚本检查用户登录名/密码并被接受，将会话变量分配给用户。

然后在您的实际代码（对于秘密页面）中，您检查此会话变量，如果它存在，您继续向用户显示内容，如果不匹配，则显示错误消息或重定向用户通过`header()`.

# objective-c - 使用 GTM OAuth 2 在 Objective C 中对 Google Calendar API 进行身份验证

> ID：12434146
> 
> 赞同：0
> 
> 时间：2012-09-15T02:54:23.020
> 
> 标签：objective-c, ios, cocoa-touch, google-api, oauth-2.0

我正在为 iPhone 开发一个应用程序，它基本上需要连接到 Google Calendar API 并在日历中下载一些事件。（我是日历的所有者）

我从“GTM OAuth 2”中看到的所有身份验证示例都需要一个窗口供用户输入他/她的用户并通过以验证对他/她的 Google 日历的访问权限。但是，我的目标是一个特定的日历，我知道它的用户名和密码。我想知道是否有办法在我的 Objective-C 代码中硬编码用户名和密码，而不是向用户询问？

我曾经使用以前的 GData 日历 API 直接编写用户名和密码，但它似乎不再起作用，并且我收到错误 403 进行身份验证。

如果您让我知道您的建议，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T03:44:00.683

您可以保存 OAuth 2 刷新令牌（或更简单地说是`GTMOAuth2Authorization`对象的`persistenceResponseString`）并在客户端应用程序中使用它来授权请求​​。您可能想要一种方法为应用程序提供更新的字符串。

# jquery - 在jstree的上下文菜单之外动态重命名树节点

> ID：12434150
> 
> 赞同：1
> 
> 时间：2012-09-15T02:56:18.480
> 
> 标签：jquery, rename, jstree, treenode

我使用下面的代码在上下文菜单之外的 jstree 中成功创建了一个新的树节点。我的问题是如何在上下文菜单之外以类似的方式动态重命名树节点中的文本？是否可以调用 .jstree("rename" ....) 函数来完成此操作？非常感激！

```
$("#RequirementsTree").jstree("create", null, "last", {"data" : "new_node_text",
                  "state" : "open",
                  "attr" :  { "id" : "new_node_id", "name" : "requirement" }, 
 }); 
```

我尝试了以下方法：

```
 .bind("select_node.jstree", function(event, data) {
            ReqNode = data.rslt;

 $("#RequirementsTree").rename_node(ReqNode, "test"); 
```

然而，这并没有奏效。有什么我做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:17:22.847

这应该适合你：

```
$("#demo1").jstree('set_text', [node , text] );
$("#demo1").jstree('rename_node', [node , text] ); 
```

[JSTree 核心文档...](http://www.jstree.com/documentation/core)

[如何-我-重命名-a-jstree-node](https://stackoverflow.com/questions/6254735/how-can-i-rename-a-jstree-node)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-19T15:52:38.350

我正在使用 jsTree 1.0-rc3 版本。下面的语法对我有用：

```
 $('#companyFields_tree').jstree('rename_node', '#0', 'testNewName' ); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T13:09:34.067

Mortalus 的以下建议对我不起作用。虽然我更喜欢留在 jstree 特定代码的范围内，但我想出了一种 jquery hack 来绕过内置的“rename_node”和“set_text”方法，因为它们不适合我。我想我会在这里发布我的答案，以防其他人有同样的问题：

```
 $(Node).find("a").text("the_new_text_for_the_node_you_want_to_rename"); 
```

这对我有用。它基本上抓取 li 下方的锚元素并为其设置文本。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-03-26T17:57:33.777

有决定：[https ://groups.google.com/forum/#!topic/jstree/cq9wzW9Ia3s](https://groups.google.com/forum/#!topic/jstree/cq9wzW9Ia3s)

很快，默认情况下 jsTree 会阻止他的树中的任何更改，因此您必须启用它：

```
$('#YourJSTree').jstree({ core: { check_callback: 'true' }, [...] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-15T09:50:05.250

以下句子有效：
$("#demo1").jstree('set_text', node , text);

# c# - LinqToSQL InsertOnSubmit 问题

> ID：12434154
> 
> 赞同：1
> 
> 时间：2012-09-15T02:56:47.223
> 
> 标签：c#, linq-to-sql, datacontext, insertonsubmit

我有与班级帐户和城市相关联的班级联系人。城市与类状态关联，当我尝试插入新的联系人数据时，关联的类也被插入。这怎么会发生？以及如何解决？

方法 InsertOnSubmit

```
 public void InsertOnSubmit<T>(T data) where T : class
    {
        lock (_lockObj)
        {
            using (DataModel dx = new DataModel(this._adapter.ConnectionString))
            {
                dx.DeferredLoadingEnabled = false;
                dx.GetTable<T>().InsertOnSubmit(data);
                dx.SubmitChanges();
            }
        }
    } 
```

添加新联系人

```
InsertOnSubmit(new Contact { Name = this.Name, Account = Session.Account, City = this.CurrentCity }); 
```

注意：对象城市、帐户和状态来自不同的数据上下文。我使用 SQL Server Compact 3.5 作为数据库服务器。

触发 dx.SubmitChanges() 时从控制台登录

```
INSERT INTO [State]([Name])
VALUES (@p0)
-- @p0: Input String (Size = 0; Prec = 0; Scale = 0) [Center America]
-- Context: SqlProvider(SqlCE) Model: AttributedMetaModel Build: 4.0.30319.1

SELECT CONVERT(Int,@@IDENTITY) AS [value]
-- @ROWCOUNT: Input Int32 (Size = 0; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(SqlCE) Model: AttributedMetaModel Build: 4.0.30319.1

INSERT INTO [City]([StateId], [Name])
VALUES (@p0, @p1)
-- @p0: Input Int32 (Size = 0; Prec = 0; Scale = 0) [10]
-- @p1: Input String (Size = 0; Prec = 0; Scale = 0) [Los Angeles]
-- Context: SqlProvider(SqlCE) Model: AttributedMetaModel Build: 4.0.30319.1

SELECT CONVERT(Int,@@IDENTITY) AS [value]
-- @ROWCOUNT: Input Int32 (Size = 0; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(SqlCE) Model: AttributedMetaModel Build: 4.0.30319.1

INSERT INTO [Contact]([AccountId], [CityId], [Name])
VALUES (@p0, @p1, @p2)
-- @p0: Input Int32 (Size = 0; Prec = 0; Scale = 0) [1]
-- @p1: Input Int32 (Size = 0; Prec = 0; Scale = 0) [18]
-- @p2: Input String (Size = 0; Prec = 0; Scale = 0) [Sarah]
-- Context: SqlProvider(SqlCE) Model: AttributedMetaModel Build: 4.0.30319.1

SELECT CONVERT(Int,@@IDENTITY) AS [value]
-- @ROWCOUNT: Input Int32 (Size = 0; Prec = 0; Scale = 0) [1]
-- Context: SqlProvider(SqlCE) Model: AttributedMetaModel Build: 4.0.30319.1 
```

问候，

布赖恩

# .htaccess - 使用 .htaccess 拒绝没有扩展名的文件

> ID：12434156
> 
> 赞同：0
> 
> 时间：2012-09-15T02:57:00.663
> 
> 标签：.htaccess

我的服务器被黑了，有人放置了没有文件扩展名的文件。如何使用 .htaccess 拒绝访问这些文件？

它甚至有意义吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:33:43.910

> 它甚至有意义吗？

不。首先，您需要弄清楚您的服务器是如何被黑客入侵的，然后修复它。其次，如果您从文档根目录中提供所有这些文件，则需要删除它们。如果您不知道发生了哪些更改，那么您需要恢复到备份，或者检查整个站点的每个文件的文件并清除不属于那里的文件并检查应该在那里的文件'没有被修改。

但是如果你仍然想尝试使用重写规则，为了练习，防止访问没有扩展名的文件，你会想要这样的东西：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule (^|/)([^/.]+)$ - [L,F] 
```

请注意，如果您的服务器被黑客入侵，他们可以轻松更改您的 htaccess 文件。

# animation - CSS关键帧动画不起作用

> ID：12434166
> 
> 赞同：1
> 
> 时间：2012-09-15T02:59:37.600
> 
> 标签：animation, css, css-transitions

我使用在 webkit 或 IE10 中不起作用的关键帧（先做这些）得到了[这个动画。](http://jsfiddle.net/pmfzh/1/)难道我做错了什么？

谢谢你们的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:03:52.527

我不了解 IE，但`-webkit-animate`它不是有效属性。你需要使用`-webkit-animation`.

**演示：http: [//jsfiddle.net/pmfzh/2/](http://jsfiddle.net/pmfzh/2/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:05:48.657

Hereb是正确的CSS。更改`animate`为`animation`

```
div.run:hover{
    animation: bounce 2s;
    -webkit-animation: bounce 2s;
} 
```

​</p>

# objective-c - 由于“命名多个方法”错误，无法在 Xcode 4.5 中构建

> ID：12434167
> 
> 赞同：-1
> 
> 时间：2012-09-15T02:59:43.760
> 
> 标签：objective-c, xcode

我在 Xcode 4.5 中构建我的项目时遇到问题。Xcode 给了我这个错误“发现多个名为‘item’的方法，结果、参数类型或属性不匹配”。有人可以告诉我问题是什么吗？如何解决多个方法名称错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:50:32.990

您可能有不同的类实现该方法`item`但返回不同类型的结果。如果您随后尝试调用`item`类型`id`化指针，则无法知道结果类型应该是什么。

这就是 XCode 所感叹的。

如何解决它在很大程度上取决于你真正想要做什么。可能为方法使用不同的名称是最好的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-30T17:46:01.967

如果发生方法命名空间冲突，如 Analog File 的帖子中调用 id 指针，您可以通过将指针转换为可接受的类类型来解决“命名的多个方法..”错误。

因此，假设您的原始（引发错误）调用类似于：

```
id myPointer = /* ... */;
[myPointer item]; 
```

您可以命令+单击“项目”，这将显示 XCode 可以将该消息发送到的多个类。转换为其中一个类，以便 XCode 知道要使用哪个类，例如：

```
[(UIActivityItemProvider*)myPointer item]; 
```

# php - 如何解决表单帖子和ajax帖子之间的奇怪冲突？

> ID：12434169
> 
> 赞同：3
> 
> 时间：2012-09-15T03:00:00.830
> 
> 标签：php, javascript, jquery, ajax, codeigniter

在一页上，我正在尝试使用 ajax 来编辑现有值。我通过使用[jQuery Inline Edit](http://www.labs.mimmin.com/inlineedit/)并发布新数据、更新记录并成功返回来做到这一点。

这工作正常。

接下来我实现了添加新记录的功能，为此我在表的末尾有一个表单，它提交帖子数据然后重定向回原始页面。

他们每个人都单独工作，但在我使用表单添加新记录后，内联编辑停止工作。如果我关闭网页并重新打开它，它会再次正常工作，直到我使用该表单并且它再次脱离轨道。

我尝试了许多解决方案，清除会话数据，给表单一个单独的名称，重定向到另一个页面（这确实有效，但并不理想，因为我希望表单重定向回原始位置）。

这是视图表单数据的示例：

```
<?php foreach($week->incomes as $income):?>
    <tr>
        <td><?php echo $income->name;?></td>
        <td width="70" style="text-align:right;" class="editableSingle income id<?php echo $income->id;?>">$<?php echo $income->cost;?></td>
    </tr>
<?php endforeach;?>
    <?php echo form_open('budget/add/'.$week->id.'/income/index', 'class="form-vertical" id="add_income"'); ?>
    <tr>
        <td>
            <input type="text" name="name" class="input-small" placeholder="Name">
            <input type="text" name="cost" class="input-small" placeholder="Cost">
        </td>
        <td>

            <button type="submit" class="btn btn-small pull-right"><i class="icon-plus "></i></button>
        </td>
    </tr>
    <?php echo form_close(); ?> 
```

这是javascript初始化代码：

```
$(function(){
$.inlineEdit({
    income: 'budget/update_income/',
    expense: 'budget/update_expense/'
}, 
{
    animate: false,
    filterElementValue: function($o){

        if ($o.hasClass('income')) {
            return $o.html().match(/\$(.+)/)[1];
        }
        else if ($o.hasClass('expense')) {
            return $o.html().match(/\$(.+)/)[1];
        }
        else {
            return $o.html();
        }
    }, 
    afterSave: function(o){
        if (o.type == 'income') {
            $('.income.id' + o.id).prepend('$');
        }
        if (o.type == 'expense') {
            $('.expense.id' + o.id).prepend('$');
        }
    },
    colors: { error:'green' }
});
}); 
```

如果我可以提供更多信息来澄清我的尝试等，请告诉我。

**临时修复**

似乎我想出了一个解决方法，但并不理想，因为我仍然不确定是什么导致了这个问题。

我创建了一个名为重定向的方法。

```
public function redirect(){
    redirect('');
} 
```

我现在在表单提交之后调用它，它暂时允许我的多个帖子提交工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T12:56:19.897

请尝试通过替换 jquery 符号来查看。

**$**应该被**jQuery**替换，然后它将创建新实例以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-19T08:09:54.670

我在某处听说如果将表单放在 table 标记内，jquery 将无法工作。它需要在表格之外，如下所示：

```
<form>
<table>
...
</table>
</form> 
```

[如果在ajax加载的表格元素内，jQuery不会带来表单元素的内容](https://stackoverflow.com/questions/3626831/jquery-does-not-bring-the-contents-of-a-form-element-if-inside-a-table-element-o)

测试后，我发现它是部分正确的，（又名不可靠）......这就是我停止使用表格的原因。

# javascript - 在 underscorejs 模板中使用闭包

> ID：12434173
> 
> 赞同：1
> 
> 时间：2012-09-15T03:01:14.153
> 
> 标签：javascript, underscore.js

只是想知道在下划线模板中使用闭包是否有任何价值......比如说跟踪计数器或其他东西。这是我的意思的一个简单的例子：

```
<% 
 (function( models ){
  var length = models.length-1,
      section = "";
    _.each( models, function ( item, index ) {
        if (index === 0) {
          section = "top";
        } else if (index === length) {
          section = "bottom";
        } else {
          section = "center";
        }
    %>
  <div class="container">
    <div class="gradiantDiv <%= section %>content">
      <a href="/#customer/<%= item._id %>">
        <address>
          <strong><%= item.name %></strong><br>
          <%= item.addr1 %><br>
          <%= item.city %>, <%= item.state %> <%= item.zip %><br>
          <abbr title="Phone">P:</abbr> <%= item.phone %>
        </address>
      </a>
    </div>

    <div class="gradiantDiv <%= section %>action">
        <i class="icon-chevron-right"></i>
    </div>
  </div>
<% 
    });
})( models );
%> 
```

还是在 _.each 之前不使用闭包声明变量（如“length”和“section”）是否更好？或者这有关系吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T21:06:52.597

我个人不知道创建在模板之外没有意义的变量有什么好处。

我们通常在优化或使代码更具可读性时创建变量。

（例如

**长度**只使用一次。我认为在适当的位置使用它更具可读性和更少的工作。我在同行签到审查中被正确地责骂只是为了一些可理解的易读性而创建变量。

**部分**被多次使用并且需要额外的逻辑，所以它很有意义。

**除了强制解释器创建一个新指针之外，模型**什么都不做，为什么当它在包含范围内可用时传递它？

)

如果它使代码更清晰，或优化某些东西，那么我会说这是值得的。

# c - 在 Valgrind 中是否需要处理仍然可访问的内存？

> ID：12434179
> 
> 赞同：0
> 
> 时间：2012-09-15T03:03:39.800
> 
> 标签：c, memory, valgrind, memory-leaks

我已经完成了我的 C 程序并摆脱了所有确定的、间接的和可能丢失的泄漏，但现在我遇到了大约 6064 字节的可访问内存。

问题是当我使用 valgrind 尝试搜索它时，我基本上得到了一堆乱码，我认为我没有在我的代码中直接使用过许多对“ImageLoader”的引用。唯一的其他是显示 printf 语句的行号。

所以基本上我想知道是否有更好的方法来查找和消除仍然可以到达的泄漏？或者如果我什至需要？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:51:56.333

仍然可以访问的内存通常没什么好担心的，当内存仍然可以访问时，您的程序无论如何都会关闭，因此操作系统会清除这些内存。

但是，仍然可以访问的内存可能隐藏了在程序退出之前需要正确清理外部资源的情况。如果您的程序不使用任何外部资源，那么您通常不必担心它。

仍然可访问的内存通常位于主函数、全局或静态变量中。

# java - ThreadID 上的致命旋转挂起/卡住

> ID：12434182
> 
> 赞同：12
> 
> 时间：2012-09-15T03:03:58.660
> 
> 标签：java, android, android-asynctask

我正在为 Android 应用创建自定义日历。它现在的工作方式是从在线 MySQL 数据库中提取事件，将它们传输到 JSONArray，然后从那里将它们输入到日历中。它在模拟器上运行良好（如果有点慢），但今天我连接了我的 S3，它给了我以前没有收到的错误。我在日志中遇到的错误说：

09-14 22:52:12.611: E/dalvikvm(4605): threadid=2: 卡在 threadid=1，放弃

09-14 22:52:12.611：E/dalvikvm(4605)：致命的自旋挂起，转储线程

这是它一直挂断的 ASyncTask：

```
package com.legends.app;

import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONArray;
import android.os.AsyncTask;
import android.util.Log;

public class Events extends AsyncTask<Void, Void, String> {

    JSONArray jArray;
    public String result = null;
    InputStream is = null;
    StringBuilder sb=null;
    HttpEntity entity;

    protected String doInBackground(Void... arg0) {

          //http post - calls from the php file that opens the DB
          try{

               HttpClient httpclient = new DefaultHttpClient();
               HttpPost httppost = new HttpPost("http://legendsofnotredame.org/club/mobile/android/cal.php");
               HttpResponse response = httpclient.execute(httppost);

               entity = response.getEntity();

               }catch(Exception e){
                   Log.e("log_tag", "Error in http connection"+e.toString());
              }

          //convert response to string
            try{

                is = entity.getContent();

                BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);

                 sb = new StringBuilder();

                 sb.append(reader.readLine() + "\n");                 

                 String line="0";
                 while ((line = reader.readLine()) != null) {
                                sb.append(line + "\n");
                  }
                  is.close();
                  result=sb.toString();
                  }catch(Exception e){
                        Log.e("log_tag", "Error converting result "+e.toString());
                  }
            Log.e("test","Converted results to string");
            return result;
    }

    protected void onPostExecute(String result) {

    }

} 
```

添加大量日志后，我确定它挂断了“sb.append(reader.readLine() + "\n");"，我不知道如何让它不这样做。有小费吗？

编辑：这是运行它的（几乎）完整的 logcat，从它挂在 readLine 上的位置开始。我不得不在一开始就删掉一些非警告/非错误行，因为这篇文章太长了，对不起！

```
09-15 14:02:13.251: W/dalvikvm(21710): threadid=2: spin on suspend #1 threadid=1 (pcf=0)
09-15 14:02:14.001: W/dalvikvm(21710): threadid=2: spin on suspend #2 threadid=1 (pcf=0)
09-15 14:02:14.752: W/dalvikvm(21710): threadid=2: spin on suspend #3 threadid=1 (pcf=0)
09-15 14:02:15.503: W/dalvikvm(21710): threadid=2: spin on suspend #4 threadid=1 (pcf=0)
09-15 14:02:16.254: W/dalvikvm(21710): threadid=2: spin on suspend #5 threadid=1 (pcf=0)
09-15 14:02:16.254: I/dalvikvm(21710): "GC" daemon prio=5 tid=2 RUNNABLE
09-15 14:02:16.254: I/dalvikvm(21710):   | group="system" sCount=0 dsCount=0 obj=0x419b4d68 self=0x124d8e8
09-15 14:02:16.254: I/dalvikvm(21710):   | sysTid=21712 nice=0 sched=0/0 cgrp=default handle=19191584
09-15 14:02:16.254: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:16.254: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:16.254: I/dalvikvm(21710): "main" prio=5 tid=1 RUNNABLE JIT
09-15 14:02:16.254: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x40c3fcd0 self=0x10c2c30
09-15 14:02:16.254: I/dalvikvm(21710):   | sysTid=21710 nice=0 sched=0/0 cgrp=default handle=1074750856
09-15 14:02:16.254: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=640 stm=5 core=0
09-15 14:02:16.254: I/dalvikvm(21710):   at com.legends.app.CalendarActivity.onCreate(CalendarActivity.java:~122)
09-15 14:02:16.254: I/dalvikvm(21710):   at android.app.Activity.performCreate(Activity.java:4470)
09-15 14:02:16.254: I/dalvikvm(21710):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
09-15 14:02:16.254: I/dalvikvm(21710):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-15 14:02:16.254: I/dalvikvm(21710):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-15 14:02:16.254: I/dalvikvm(21710):   at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-15 14:02:16.254: I/dalvikvm(21710):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-15 14:02:16.254: I/dalvikvm(21710):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-15 14:02:16.254: I/dalvikvm(21710):   at android.os.Looper.loop(Looper.java:137)
09-15 14:02:16.254: I/dalvikvm(21710):   at android.app.ActivityThread.main(ActivityThread.java:4514)
09-15 14:02:16.254: I/dalvikvm(21710):   at java.lang.reflect.Method.invokeNative(Native Method)
09-15 14:02:16.254: I/dalvikvm(21710):   at java.lang.reflect.Method.invoke(Method.java:511)
09-15 14:02:16.254: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
09-15 14:02:16.254: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
09-15 14:02:16.254: I/dalvikvm(21710):   at dalvik.system.NativeStart.main(Native Method)
09-15 14:02:17.005: W/dalvikvm(21710): threadid=2: spin on suspend #6 threadid=1 (pcf=0)
09-15 14:02:17.005: I/dalvikvm(21710): "GC" daemon prio=5 tid=2 RUNNABLE
09-15 14:02:17.005: I/dalvikvm(21710):   | group="system" sCount=0 dsCount=0 obj=0x419b4d68 self=0x124d8e8
09-15 14:02:17.005: I/dalvikvm(21710):   | sysTid=21712 nice=0 sched=0/0 cgrp=default handle=19191584
09-15 14:02:17.005: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:17.005: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:17.005: I/dalvikvm(21710): "main" prio=5 tid=1 RUNNABLE JIT
09-15 14:02:17.005: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x40c3fcd0 self=0x10c2c30
09-15 14:02:17.005: I/dalvikvm(21710):   | sysTid=21710 nice=0 sched=0/0 cgrp=default handle=1074750856
09-15 14:02:17.005: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=712 stm=5 core=0
09-15 14:02:17.015: I/dalvikvm(21710):   at com.legends.app.CalendarActivity.onCreate(CalendarActivity.java:~122)
09-15 14:02:17.015: I/dalvikvm(21710):   at android.app.Activity.performCreate(Activity.java:4470)
09-15 14:02:17.015: I/dalvikvm(21710):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
09-15 14:02:17.015: I/dalvikvm(21710):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-15 14:02:17.015: I/dalvikvm(21710):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-15 14:02:17.015: I/dalvikvm(21710):   at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-15 14:02:17.015: I/dalvikvm(21710):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-15 14:02:17.015: I/dalvikvm(21710):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-15 14:02:17.015: I/dalvikvm(21710):   at android.os.Looper.loop(Looper.java:137)
09-15 14:02:17.015: I/dalvikvm(21710):   at android.app.ActivityThread.main(ActivityThread.java:4514)
09-15 14:02:17.015: I/dalvikvm(21710):   at java.lang.reflect.Method.invokeNative(Native Method)
09-15 14:02:17.015: I/dalvikvm(21710):   at java.lang.reflect.Method.invoke(Method.java:511)
09-15 14:02:17.015: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
09-15 14:02:17.015: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
09-15 14:02:17.015: I/dalvikvm(21710):   at dalvik.system.NativeStart.main(Native Method)
09-15 14:02:17.765: W/dalvikvm(21710): threadid=2: spin on suspend #7 threadid=1 (pcf=0)
09-15 14:02:17.765: I/dalvikvm(21710): "GC" daemon prio=5 tid=2 RUNNABLE
09-15 14:02:17.765: I/dalvikvm(21710):   | group="system" sCount=0 dsCount=0 obj=0x419b4d68 self=0x124d8e8
09-15 14:02:17.765: I/dalvikvm(21710):   | sysTid=21712 nice=0 sched=0/0 cgrp=default handle=19191584
09-15 14:02:17.765: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:17.765: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:17.765: I/dalvikvm(21710): "main" prio=5 tid=1 RUNNABLE JIT
09-15 14:02:17.765: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x40c3fcd0 self=0x10c2c30
09-15 14:02:17.765: I/dalvikvm(21710):   | sysTid=21710 nice=0 sched=0/0 cgrp=default handle=1074750856
09-15 14:02:17.765: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=762 stm=5 core=0
09-15 14:02:17.765: I/dalvikvm(21710):   at com.legends.app.CalendarActivity.onCreate(CalendarActivity.java:~122)
09-15 14:02:17.765: I/dalvikvm(21710):   at android.app.Activity.performCreate(Activity.java:4470)
09-15 14:02:17.765: I/dalvikvm(21710):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
09-15 14:02:17.765: I/dalvikvm(21710):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-15 14:02:17.765: I/dalvikvm(21710):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-15 14:02:17.765: I/dalvikvm(21710):   at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-15 14:02:17.765: I/dalvikvm(21710):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-15 14:02:17.765: I/dalvikvm(21710):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-15 14:02:17.765: I/dalvikvm(21710):   at android.os.Looper.loop(Looper.java:137)
09-15 14:02:17.765: I/dalvikvm(21710):   at android.app.ActivityThread.main(ActivityThread.java:4514)
09-15 14:02:17.765: I/dalvikvm(21710):   at java.lang.reflect.Method.invokeNative(Native Method)
09-15 14:02:17.765: I/dalvikvm(21710):   at java.lang.reflect.Method.invoke(Method.java:511)
09-15 14:02:17.765: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
09-15 14:02:17.765: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
09-15 14:02:17.765: I/dalvikvm(21710):   at dalvik.system.NativeStart.main(Native Method)
09-15 14:02:18.516: W/dalvikvm(21710): threadid=2: spin on suspend #8 threadid=1 (pcf=0)
09-15 14:02:18.516: I/dalvikvm(21710): "GC" daemon prio=5 tid=2 RUNNABLE
09-15 14:02:18.516: I/dalvikvm(21710):   | group="system" sCount=0 dsCount=0 obj=0x419b4d68 self=0x124d8e8
09-15 14:02:18.516: I/dalvikvm(21710):   | sysTid=21712 nice=0 sched=0/0 cgrp=default handle=19191584
09-15 14:02:18.516: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:18.516: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:18.516: I/dalvikvm(21710): "main" prio=5 tid=1 RUNNABLE JIT
09-15 14:02:18.516: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x40c3fcd0 self=0x10c2c30
09-15 14:02:18.516: I/dalvikvm(21710):   | sysTid=21710 nice=0 sched=0/0 cgrp=default handle=1074750856
09-15 14:02:18.516: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=834 stm=5 core=0
09-15 14:02:18.516: I/dalvikvm(21710):   at com.legends.app.CalendarActivity.onCreate(CalendarActivity.java:~122)
09-15 14:02:18.516: I/dalvikvm(21710):   at android.app.Activity.performCreate(Activity.java:4470)
09-15 14:02:18.516: I/dalvikvm(21710):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
09-15 14:02:18.516: I/dalvikvm(21710):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-15 14:02:18.516: I/dalvikvm(21710):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-15 14:02:18.516: I/dalvikvm(21710):   at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-15 14:02:18.516: I/dalvikvm(21710):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-15 14:02:18.516: I/dalvikvm(21710):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-15 14:02:18.516: I/dalvikvm(21710):   at android.os.Looper.loop(Looper.java:137)
09-15 14:02:18.516: I/dalvikvm(21710):   at android.app.ActivityThread.main(ActivityThread.java:4514)
09-15 14:02:18.516: I/dalvikvm(21710):   at java.lang.reflect.Method.invokeNative(Native Method)
09-15 14:02:18.516: I/dalvikvm(21710):   at java.lang.reflect.Method.invoke(Method.java:511)
09-15 14:02:18.516: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
09-15 14:02:18.516: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
09-15 14:02:18.516: I/dalvikvm(21710):   at dalvik.system.NativeStart.main(Native Method)
09-15 14:02:19.267: W/dalvikvm(21710): threadid=2: spin on suspend #9 threadid=1 (pcf=0)
09-15 14:02:19.267: I/dalvikvm(21710): "GC" daemon prio=5 tid=2 RUNNABLE
09-15 14:02:19.267: I/dalvikvm(21710):   | group="system" sCount=0 dsCount=0 obj=0x419b4d68 self=0x124d8e8
09-15 14:02:19.267: I/dalvikvm(21710):   | sysTid=21712 nice=0 sched=0/0 cgrp=default handle=19191584
09-15 14:02:19.267: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:19.267: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:19.267: I/dalvikvm(21710): "main" prio=5 tid=1 RUNNABLE JIT
09-15 14:02:19.267: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x40c3fcd0 self=0x10c2c30
09-15 14:02:19.267: I/dalvikvm(21710):   | sysTid=21710 nice=0 sched=0/0 cgrp=default handle=1074750856
09-15 14:02:19.267: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=906 stm=5 core=0
09-15 14:02:19.267: I/dalvikvm(21710):   at com.legends.app.CalendarActivity.onCreate(CalendarActivity.java:~122)
09-15 14:02:19.267: I/dalvikvm(21710):   at android.app.Activity.performCreate(Activity.java:4470)
09-15 14:02:19.267: I/dalvikvm(21710):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
09-15 14:02:19.267: I/dalvikvm(21710):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-15 14:02:19.267: I/dalvikvm(21710):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-15 14:02:19.267: I/dalvikvm(21710):   at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-15 14:02:19.267: I/dalvikvm(21710):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-15 14:02:19.267: I/dalvikvm(21710):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-15 14:02:19.267: I/dalvikvm(21710):   at android.os.Looper.loop(Looper.java:137)
09-15 14:02:19.267: I/dalvikvm(21710):   at android.app.ActivityThread.main(ActivityThread.java:4514)
09-15 14:02:19.267: I/dalvikvm(21710):   at java.lang.reflect.Method.invokeNative(Native Method)
09-15 14:02:19.267: I/dalvikvm(21710):   at java.lang.reflect.Method.invoke(Method.java:511)
09-15 14:02:19.267: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
09-15 14:02:19.267: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
09-15 14:02:19.267: I/dalvikvm(21710):   at dalvik.system.NativeStart.main(Native Method)
09-15 14:02:20.018: W/dalvikvm(21710): threadid=2: spin on suspend #10 threadid=1 (pcf=0)
09-15 14:02:20.018: I/dalvikvm(21710): "GC" daemon prio=5 tid=2 RUNNABLE
09-15 14:02:20.018: I/dalvikvm(21710):   | group="system" sCount=0 dsCount=0 obj=0x419b4d68 self=0x124d8e8
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21712 nice=0 sched=0/0 cgrp=default handle=19191584
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:20.018: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710): "main" prio=5 tid=1 RUNNABLE JIT
09-15 14:02:20.018: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x40c3fcd0 self=0x10c2c30
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21710 nice=0 sched=0/0 cgrp=default handle=1074750856
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=979 stm=5 core=0
09-15 14:02:20.018: I/dalvikvm(21710):   at com.legends.app.CalendarActivity.onCreate(CalendarActivity.java:~122)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.Activity.performCreate(Activity.java:4470)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.os.Looper.loop(Looper.java:137)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.ActivityThread.main(ActivityThread.java:4514)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.reflect.Method.invokeNative(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.reflect.Method.invoke(Method.java:511)
09-15 14:02:20.018: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
09-15 14:02:20.018: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
09-15 14:02:20.018: I/dalvikvm(21710):   at dalvik.system.NativeStart.main(Native Method)
09-15 14:02:20.018: E/dalvikvm(21710): Fatal spin-on-suspend, dumping threads
09-15 14:02:20.018: I/dalvikvm(21710): DALVIK THREADS:
09-15 14:02:20.018: I/dalvikvm(21710): (mutexes: tll=2 tsl=1 tscl=0 ghl=1)
09-15 14:02:20.018: I/dalvikvm(21710): "main" prio=5 tid=1 RUNNABLE JIT
09-15 14:02:20.018: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x40c3fcd0 self=0x10c2c30
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21710 nice=0 sched=0/0 cgrp=default handle=1074750856
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=979 stm=5 core=0
09-15 14:02:20.018: I/dalvikvm(21710):   at com.legends.app.CalendarActivity.onCreate(CalendarActivity.java:~122)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.Activity.performCreate(Activity.java:4470)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1053)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1934)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1995)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.ActivityThread.access$600(ActivityThread.java:128)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1161)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.os.Handler.dispatchMessage(Handler.java:99)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.os.Looper.loop(Looper.java:137)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.app.ActivityThread.main(ActivityThread.java:4514)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.reflect.Method.invokeNative(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.reflect.Method.invoke(Method.java:511)
09-15 14:02:20.018: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:980)
09-15 14:02:20.018: I/dalvikvm(21710):   at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:747)
09-15 14:02:20.018: I/dalvikvm(21710):   at dalvik.system.NativeStart.main(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710): "AsyncTask #1" prio=5 tid=11 SUSPENDED
09-15 14:02:20.018: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x41a23660 self=0x12d4758
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21739 nice=10 sched=0/0 cgrp=bg_non_interactive handle=19348592
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=18 stm=2 core=1
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.AbstractStringBuilder.append0(AbstractStringBuilder.java:~128)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.StringBuilder.append(StringBuilder.java:271)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.io.BufferedReader.readLine(BufferedReader.java:417)
09-15 14:02:20.018: I/dalvikvm(21710):   at com.legends.app.Events.doInBackground(Events.java:56)
09-15 14:02:20.018: I/dalvikvm(21710):   at com.legends.app.Events.doInBackground(Events.java:1)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.os.AsyncTask$2.call(AsyncTask.java:264)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
09-15 14:02:20.018: I/dalvikvm(21710):   at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:208)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Thread.run(Thread.java:856)
09-15 14:02:20.018: I/dalvikvm(21710): "Binder Thread #2" prio=5 tid=10 SUSPENDED
09-15 14:02:20.018: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x419b8f08 self=0x12dec18
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21722 nice=0 sched=0/0 cgrp=default handle=18856864
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:20.018: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710): "Binder Thread #1" prio=5 tid=9 SUSPENDED
09-15 14:02:20.018: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x419b8540 self=0x12dcf78
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21721 nice=0 sched=0/0 cgrp=default handle=19135504
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:20.018: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710): "FinalizerWatchdogDaemon" daemon prio=5 tid=8 WAIT
09-15 14:02:20.018: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x419b53d8 self=0x12e6520
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21720 nice=0 sched=0/0 cgrp=default handle=18832048
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Object.wait(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710):   - waiting on <0x40c474f0> (a java.lang.Daemons$FinalizerWatchdogDaemon)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Object.wait(Object.java:364)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Daemons$FinalizerWatchdogDaemon.run(Daemons.java:213)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Thread.run(Thread.java:856)
09-15 14:02:20.018: I/dalvikvm(21710): "FinalizerDaemon" daemon prio=5 tid=7 WAIT
09-15 14:02:20.018: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x419b5280 self=0x12d3a48
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21719 nice=0 sched=0/0 cgrp=default handle=18676648
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Object.wait(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710):   - waiting on <0x40c355d0> (a java.lang.ref.ReferenceQueue)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Object.wait(Object.java:401)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:102)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.ref.ReferenceQueue.remove(ReferenceQueue.java:73)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Daemons$FinalizerDaemon.run(Daemons.java:168)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Thread.run(Thread.java:856)
09-15 14:02:20.018: I/dalvikvm(21710): "ReferenceQueueDaemon" daemon prio=5 tid=6 WAIT
09-15 14:02:20.018: I/dalvikvm(21710):   | group="main" sCount=1 dsCount=0 obj=0x419b5118 self=0x12e7bd8
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21718 nice=0 sched=0/0 cgrp=default handle=18676448
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Object.wait(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710):   - waiting on <0x40c354f8> 
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Object.wait(Object.java:364)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Daemons$ReferenceQueueDaemon.run(Daemons.java:128)
09-15 14:02:20.018: I/dalvikvm(21710):   at java.lang.Thread.run(Thread.java:856)
09-15 14:02:20.018: I/dalvikvm(21710): "Compiler" daemon prio=5 tid=5 VMWAIT
09-15 14:02:20.018: I/dalvikvm(21710):   | group="system" sCount=1 dsCount=0 obj=0x419b5028 self=0x12b2640
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21717 nice=0 sched=0/0 cgrp=default handle=18856760
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=2 stm=2 core=1
09-15 14:02:20.018: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710): "JDWP" daemon prio=5 tid=4 VMWAIT
09-15 14:02:20.018: I/dalvikvm(21710):   | group="system" sCount=1 dsCount=0 obj=0x419b4f40 self=0x1269cc0
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21715 nice=0 sched=0/0 cgrp=default handle=19135712
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=1
09-15 14:02:20.018: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710): "Signal Catcher" daemon prio=5 tid=3 VMWAIT
09-15 14:02:20.018: I/dalvikvm(21710):   | group="system" sCount=1 dsCount=0 obj=0x419b4e48 self=0x12abed8
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21713 nice=0 sched=0/0 cgrp=default handle=18712776
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:20.018: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:20.018: I/dalvikvm(21710): "GC" daemon prio=5 tid=2 RUNNABLE
09-15 14:02:20.018: I/dalvikvm(21710):   | group="system" sCount=0 dsCount=0 obj=0x419b4d68 self=0x124d8e8
09-15 14:02:20.018: I/dalvikvm(21710):   | sysTid=21712 nice=0 sched=0/0 cgrp=default handle=19191584
09-15 14:02:20.018: I/dalvikvm(21710):   | schedstat=( 0 0 0 ) utm=0 stm=0 core=0
09-15 14:02:20.018: I/dalvikvm(21710):   at dalvik.system.NativeStart.run(Native Method)
09-15 14:02:20.018: E/dalvikvm(21710): threadid=2: stuck on threadid=1, giving up
09-15 14:02:20.018: D/dalvikvm(21710): threadid=2: sending two SIGSTKFLTs to threadid=1 (tid=21710) to cause debuggerd dump
09-15 14:02:20.018: D/dalvikvm(21710): NOTE: pthread_kill #1 failed: Operation not permitted
09-15 14:02:22.010: D/dalvikvm(21710): NOTE: pthread_kill #2 failed: Operation not permitted
09-15 14:02:22.010: D/dalvikvm(21710): Sent, pausing to let debuggerd run
09-15 14:02:30.018: D/dalvikvm(21710): Continuing
09-15 14:02:30.018: E/dalvikvm(21710): VM aborting 
```

这就是我在主 Activity 中调用它的地方。这些也是两个单独的文件，我不知道这是否相关，但可能是，我不知道。

```
 Events db = new Events();
        db.execute();
        while (db.result == null){
         continue;}
        result = db.result; 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-15T20:49:42.890

在又玩了一天之后，我想通了。由于非 AsyncTask 中的这些行，它正在超时：

```
while (db.result == null) {
    continue;
} 
```

它认为这是“你永远被困在一个while循环中，因此程序一定已经崩溃了”，而实际上它只是需要时间来阅读这些事件。但是，如果没有它，它将在没有完全加载事件的情况下继续前进，当它尝试使用该数组时会创建一个 NullPointerException。我所做的是这样做：

```
while (db.result == null){
   try {
      Thread.sleep(100);
   } catch (InterruptedException e) {
      // TODO Auto-generated catch block
      e.printStackTrace();
   }
   continue;
} 
```

睡眠似乎发送回我仍然在那里的应用程序，只是等待数据以便我可以继续。要么就是这样，要么它减慢了我通过 while 循环的次数。不确定是哪一个，但无论哪种方式都可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T20:48:55.647

我采取了一种稍微不同的方式：

首先我在 AsyncTask 类中设置一个字段

```
private boolean taskDone = false; 
```

然后，在 doInBackground 代码之后（或在 postExecute 中）：

```
this.taskDone = true; 
```

最后在 AsyncTask 中添加一个方法：

```
public boolean isTaskDone() {
    return taskDone;
} 
```

现在您可以使用 isTaskDone 作为 while 循环中的参数：

```
while (!isTaskDone()) {
// wait for task
} 
```

只是我的做法，我相信还有更多

# ruby - 对于将字符串更改为结束的循环，如何满足此条件？

> ID：12434184
> 
> 赞同：1
> 
> 时间：2012-09-15T03:04:37.723
> 
> 标签：ruby, string, loops

我正在将一个单词与另一个字符串进行比较，该字符串通过遍历字母表并将每个字母插入单词的每个位置而发生变化。

```
@position_counter = 0 
```

编辑：这是 letter_loop 正在运行的代码。

```
@array = ["amethod", "variable", "block"]

def word_list_loop
  @match_counter = 0
  @array.each do |word|
    letter_loop(word)
  end
  puts @match_counter
end 
```

关闭编辑

```
def letter_loop(word)
  ("a".."z").each do |letter|
     word_plus_letter = @word.dup
     word_plus_letter.insert(@position_counter, letter)
     @match_counter+=1 if word.match(/\A#{word_plus_letter}\z/)
  end
  @position_counter+=1
  letter_loop(word) unless @position_counter == (@word.length + 1) 
end 
```

我用于论证的词是`"method"`. 但是当我运行它时，我得到一个`index 7 out of string (IndexError)`. 它正确地循环遍历每个位置的字母表，但似乎并没有被`unless @position_counter == (@word.length + 1)`to 结尾抓住。

我尝试了其他一些方法，例如使用 if 语句等，但我无法让该方法自行完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:49:58.657

你跑了多少次`letter_loop`？您确定错误发生在第一次运行中吗？据我所知，如果您第二次调用它而不重置`@position_counter`为零，它将开始`@word.length + 1`产生您看到的确切错误。除此之外，我找不到您的代码有任何问题（第一次运行时在这里运行得很好）。

**更新：**由于您使用的是递归解决方案，并且`position_counter`不代表您的程序的状态（只是您的方法调用的状态），我建议不要将其声明为，`@position_counter`而是作为您的方法的可选参数：

```
def letter_loop(word, position_counter=0)
  ("a".."z").each do |letter|
     word_plus_letter = @word.dup
     word_plus_letter.insert(position_counter, letter)
     @match_counter+=1 if word.match(/\A#{word_plus_letter}\z/)
  end
  position_counter+=1
  letter_loop(word, position_counter) unless position_counter == (@word.length + 1) 
end 
```

如果您不能/不想这样做，只需在每次使用之前/之后重置它，就像我之前建议的那样，它会正常工作：

```
@array.each do |word|
  @position_counter = 0
  letter_loop(word)
end 
```

（尽管我不推荐第二种方法，因为如果您忘记在其他地方重置它，您的方法将再次失败）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:06:34.063

我认为问题在于您是从 inside 调用`letter_loop`的`@array.each`，但您不会在循环`@position_counter`的每次迭代中重置为零`@array.each`。

如果这不能解决您的问题，请添加以下内容作为第一行`letter_loop`：

```
puts "letter_loop word=#{word}, position=#{@position_counter}, matches=#{@match_counter}" 
```

然后运行程序并检查导致`IndexError`.

# google-app-engine - Jinja 不在子目录中渲染 css/图像

> ID：12434187
> 
> 赞同：2
> 
> 时间：2012-09-15T03:05:43.137
> 
> 标签：google-app-engine, jinja2

我正在使用 Jinja2 和 GAE，并且正在使用辅助函数来呈现 HTML 文件。当我尝试渲染嵌套在子目录（游戏化）中的 HTML 文件时，Jinja 似乎没有提取 CSS 和图像文件。有谁知道我应该怎么做？

我目前的 YAML 结构如下

```
handlers:
- url: /favicon\.ico
  static_files: favicon.ico
  upload: favicon\.ico

- url: .*
  script: main.app

libraries:
- name: webapp2
  version: "2.5.1"
- name: jinja2
  version: latest 
```

我当前的目录结构就是这样。

```
Main directory
|
 -- main.py

|
 ----Templates
     |
      --Gamification
        |
         --index.html
           |
            --CSS
              |
               --1.css
           |
            --img
              |
               --1.jpef 
```

主文件

```
jinja_environment = jinja2.Environment(loader=jinja2.FileSystemLoader(['Templates', 'Templates\Gamification']));
def import_html(self, address, val = {}):
    template = jinja_environment.get_template(address);
    self.write(template.render(val)); 
```

有问题的html文件如下：

```
<!DOCTYPE html>
<html>
  <head>
    <title>Gamification</title>
    <link href="css/bootstrap.css" rel="stylesheet">
  </head>

  <body>

<img src = "img/dan.jpeg" class = "img-rounded" />
<script src="http://code.jquery.com/jquery-latest.js"></script>
<script src="js/bootstrap.js"></script>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:09:24.550

看起来您没有为 img 和 css 声明静态目录。
就像是：

```
- url: /css
  static_dir: css 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-30T15:06:46.903

是的，我有同样的问题。你需要做这样的事情：

```
- url: /.*/css
  static_dir: templates/css

- url: /.*/js
  static_dir: templates/js 
```

（当然，用您的 css 和 js 文件夹所在的任何子目录替换“模板”）

# visual-studio - 在 Visual Studio 2010 中安装 entityframework 错误

> ID：12434192
> 
> 赞同：0
> 
> 时间：2012-09-15T03:06:41.813
> 
> 标签：visual-studio, nuget

我试图从 nuget 和 PM 安装 entityframework，但安装总是中途停止。

我遇到连接问题，错误是这样的

```
Install-Package : Unable to read data from the transport connection: An existing connection was forcibly close
d by the remote host.
At line:1 char:16
+ Install-Package <<<<  EntityFramework
    + CategoryInfo          : NotSpecified: (:) [Install-Package], IOException
    + FullyQualifiedErrorId : NuGetCmdletUnhandledException,NuGet.PowerShell.Commands.InstallPackageCommand 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T08:14:33.157

通过将包下载为 packages.nuget.org/v1/package/download/AjaxControlToolkit 来获取包的 .zip 文件

您也可以使用 v2 代替 v1

然后

创建一个文件夹 D:\BackupNew 并将 AjaxControlToolkit.zip 复制到该文件夹​​中。这是 nuget 包，但它有扩展 zip。因此以 zip 格式打开它并保存为 AjaxControlToolkit.nupkg。

现在是 nuget 包管理器可以轻松识别的 nuget 包。

现在从 Visual Studio 的选项中将包源添加到包管理器。

名称为 LocalREPO，源 URL 为 D:\BackupNew

然后打开 nuget 包管理器并单击本地 nuget 包源并从本地计算机安装该包...完成

# drupal - 访问自定义内容类型节点的内容

> ID：12434193
> 
> 赞同：0
> 
> 时间：2012-09-15T03:07:10.610
> 
> 标签：drupal, variables, drupal-7

我正在处理的这个网站的首页上有一个 jquery 幻灯片放映。我想用我定义的内容类型的节点的内容填充幻灯片。内容类型有多个（图像字段和描述）。如何从首页访问这些内容。

提前致谢。

——阿尤什·什雷斯塔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:12:47.750

我想出了一种方法来完成上述任务。不确定这是否是最有效的方法，但这就是我所做的。

基本上我使用加载内容节点

```
$node = node_load($node_id); 
```

然后我 print_r()'ed $node 来查看它的数组结构。之后，只需访问所需字段的值并将其回显到所需位置即可。它看起来像这样。

```
$slideArray = $node->field_slide['und'];
$count = count($slideArray);
<img src="<?php echo base_path() . 'sites/default/files/' .  $slideArray[$i]['filename'] ?>" width="930"> 
```

# c# - 数据库更改时更新 ASP.NET 数据绑定 GridView

> ID：12434196
> 
> 赞同：0
> 
> 时间：2012-09-15T03:07:35.627
> 
> 标签：c#, asp.net, gridview

我在 Visual Designer 中的设计时将我的 ASP.NET 2.0 GridView 控件绑定到数据源。

如果数据库发生更改，如何更新 GridView 控件以反映数据库中的更改？

如果网格是以编程方式绑定数据的，我可以得到一个新的数据副本并反弹。

**更新**

我想我需要进一步澄清我的问题。如果我`GridView`在设计时使用`SqlDataSource`数据控件绑定，那么如何以`GridView`编程方式更新？我是将它绑定到一个新的`DataSet`还是我只是调用该`GridView.DataBind()`方法而不更改其数据源？

我想我在这两者之间尝试过，只是简单地调用了`GridView.DataBind()`它，但我不能确定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T17:54:49.603

您可以使用 AJAX 来实现相同的功能。将您的 GridView 放在更新面板中。添加一个计时器，在计时器滴答声中，您可以重新绑定您的 Gridview。一旦数据库中的数据发生更改，它就会通过计时器的滴答声反映在网格视图中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T03:10:18.050

我见过的.Net中没有内置的方法可以做到这一点。

我相信您能做的最好的事情是创建一个数据更新线程，定期检查新的 Db 值并根据需要从代码隐藏中重新绑定网格

# php - 如何仅更新 mysql 表中的选定字段

> ID：12434199
> 
> 赞同：1
> 
> 时间：2012-09-15T03:09:09.463
> 
> 标签：php, mysql, foreach, sql-update

我做了一个查询来做我的工作。但它确实有一些错误。

1）我在 mysql 表中有 6 个图像字段和一些其他字段

2）更新我使用带有6个文件上传文件并标记为image1 image2的html表单...

3）所以如果我只想更新第 5 张图片，我必须将新图片上传到以表格形式提交的 image5。

为了更新 mysql 表，我做了这个查询。

```
$image=array(
1 =>$_FILES['image1']['name'],
2 =>$_FILES['image2']['name'],
3 =>$_FILES['image3']['name'],
4 =>$_FILES['image4']['name'],
5 =>$_FILES['image5']['name'],
6 =>$_FILES['image6']['name'],
);
$i=1;
    $sql  = "UPDATE salehotel ";
    $sql .="SET"." ";
foreach($image as $value){
    if(!$value==""){    
    $sql .=  "`image".$i."`"."="."'". $value ."'".",". " ";
    $i++;
    }

}

$sql .="
      `name`='$name',
      `status`='$status',
      `type`='$type',
      `location`='$location',
      `price`='$price',
      `description`='$description'
    WHERE  
      `property_id`='$edit'
      "; 
```

3）当我用它来更新所有 6 个图像时，没有错误，它会更新所有东西。

4）但是当我尝试更新单个图像时（例如：想如果我想更新 image5）或者我从 image5 字段中选择一个文件，这个查询总是更新表中的第一个图像。

5）我知道为什么会这样。在我的 foreach 循环内的查询中，我只寻找不等于“”的 $values。然后增加 $i。所以它只增加了一次。所以它更新image1或者我想更新image5。

6）那么我怎样才能摆脱这个错误呢？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T03:30:05.190

```
$_FILES['image2']['name']='zzzzzzzzzzzzzzzzzz';

$image=array(
1 =>$_FILES['image1']['name'],
2 =>$_FILES['image2']['name'],
3 =>$_FILES['image3']['name'],
4 =>$_FILES['image4']['name'],
5 =>$_FILES['image5']['name'],
6 =>$_FILES['image6']['name'],
);

for ($i = 1; $i <= 6; $i++) {
if(!empty($image[$i])){    
    $sql .=  "`image".$i."`"."="."'". $image[$i] ."'".",". " ";
    }
}

echo $sql; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T03:30:24.817

你可以简单地通过`$i++;`排队，走出`if`障碍来做到这一点。

您的代码的修改版本，具有上述修复和一些其他更正：

```
<?php 

$image=array(
    1 =>$_FILES['image1']['name'],
    2 =>$_FILES['image2']['name'],
    3 =>$_FILES['image3']['name'],
    4 =>$_FILES['image4']['name'],
    5 =>$_FILES['image5']['name'],
    6 =>$_FILES['image6']['name'],
);
$i=1;

$sql  = 'UPDATE salehotel ';
$sql .= 'SET ';

foreach($image as $value)
{
    if(!$value=='')
        $sql .=  '`image'.$i.'` ='."'". $value ."'".', ';

    $i++;
}

$sql .="
      `name`='$name',
      `status`='$status',
      `type`='$type',
      `location`='$location',
      `price`='$price',
      `description`='$description'
    WHERE  
      `property_id`='$edit'
      "; 
```

尽量不要使用双引号，除非你里面有变量或其他双引号。

更好的解决方案是使用 foreach 循环能力来拥有`key`，如下所示：

```
<?php

$image=array(
    1 =>$_FILES['image1']['name'],
    2 =>$_FILES['image2']['name'],
    3 =>$_FILES['image3']['name'],
    4 =>$_FILES['image4']['name'],
    5 =>$_FILES['image5']['name'],
    6 =>$_FILES['image6']['name'],
);

$sql  = 'UPDATE salehotel ';
$sql .= 'SET ';

foreach($image as $key=>$value)
{
    if(!$value=='')
        $sql .=  '`image'.( $key + 1 ).'` ='."'". $value ."'".', ';
}
...
... 
```

# ios - 带有静态单元格的 UITableViewController 显示为空白

> ID：12434200
> 
> 赞同：3
> 
> 时间：2012-09-15T03:09:37.647
> 
> 标签：ios, ios5, uitableview

我正在使用 JTRevealSidebar 并构建了一个带有静态单元格的表格视图控制器，用作我的滑出导航。当我将导航控制器作为开始视图时，我看到了所有表格单元格，因为它们应该是。当我将该视图用作导航的滑出视图时，它是一个空表视图。这是我用来将其设置为侧边栏并显示它的代码。

```
//This is in the header file
@property (nonatomic, strong) ehrxSideBarController *leftSidebarViewController;

//Then in the implementation file
@synthesize leftSidebarViewController = _leftSidebarViewController;

- (UIView *)viewForLeftSidebar {

    CGRect viewFrame = self.navigationController.applicationViewFrame;
    UITableViewController *controller = self.leftSidebarViewController;
    if ( ! controller) {
        self.leftSidebarViewController = [[ehrxSideBarController alloc] init];
        self.leftSidebarViewController.sidebarDelegate = self;
        controller = self.leftSidebarViewController;
        controller.title = @"LeftSidebarViewController";
    }
    controller.view.frame = CGRectMake(0, viewFrame.origin.y, 270, viewFrame.size.height);
    controller.view.autoresizingMask = UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleHeight;
    return controller.view;
} 
```

我确保在我的故事板中，视图具有与之关联的正确控制器类。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T16:19:23.757

好吧，从即使有赏金也没有任何回应来看，我猜这是为了掩盖或没有人尝试过。我最终在代码中动态创建部分和单元格，而不是使用静态单元格。

# c++ - 为什么我的 std::string 被转换为 std::basic_string ?

> ID：12434201
> 
> 赞同：2
> 
> 时间：2012-09-15T03:09:48.270
> 
> 标签：c++, stack

> **错误**

```
stack.cc:53:28: error: no matching function for call to ‘Stack<std::basic_string<char> >::push(std::string)’
stack.cc:53:28: note: candidate is:
stack.cc:32:11: note: Stack<T>& Stack<T>::push(T&) [with T = std::basic_string<char>] 
```

> **堆栈.cc**

```
#include<iostream>

template <typename T>
class Stack {
private:
    T* array_;
    int length_;
    T* last_;
    void expandArray();

public:
    Stack(int length = 8) {
        array_   = new T[length];
        length_  = length;
        last_    = array_;
    }

    Stack<T>& push(T&);
    T pop();
};

template<typename T>
void Stack<T>::expandArray() {
    T* array_temp = new T[length_ << 1];
    memcpy(array_temp, array_, length_);
    std::swap(array_, array_temp);
    delete[] array_temp;
    length_ <<= 1;
}

template<typename T>
Stack<T>& Stack<T>::push(T& data) {
    if (last_ == (array_ + length_ - 1)) {
        expandArray();
    }
    last_[0] = data;
    last_++;
    return *this;
}

template<typename T>
T Stack<T>::pop() {
    if(array_ != last_) {
        T temp = last_[0];
        last_--;
        return temp;
    }
    return NULL;
}

int main() {
    Stack<std::string> s;
    s.push(std::string("a"))
     .push(std::string("b"))
     .push(std::string("c"))
     .push(std::string("d"));
    std::cout << s.pop() << std::endl;
    std::cout << s.pop() << std::endl;
    std::cout << s.pop() << std::endl;
    std::cout << s.pop() << std::endl;
} 
```

`std::string`想了解为什么从to发生转换`std::basic_string<char>`？

请随时评论代码质量。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T03:14:06.207

实际的问题是您试图将引用传递给在参数中创建的对象，而不是存储在变量中。看到那个`T&`论点了`Stack<T>::push`吗？你不能在这里传递你的临时文件，因为它是一个非`const`参考。尝试如下...

```
Stack<T>& push(const T&); 
```

将此签名也用于您的实现。

* * *

话虽这么说，知道那`std::string`只是 typedef over `std::basic_string<char>`。这是因为字符串的功能也可以扩展到其他字符类型—— `std::wstring`for `wchar_t`、`std::u16string`for`char16_t`和`std::u32string`for `char32_t`。;-)

请参阅C++11 规范的**§21.4 类模板`basic_string`[basic.string]**。

> ```
> // basic_string typedef names
> typedef basic_string<char> string;
> typedef basic_string<char16_t> u16string;
> typedef basic_string<char32_t> u32string;
> typedef basic_string<wchar_t> wstring; 
> ```

请注意，您不应该依赖于为您`iostream`包含`string`。您还应该包括`cstring`并指定`memcpy`调用的范围。

* * *

顺便说一句，你真的应该考虑使用`Stack`构造函数的初始化列表......见下文。

```
Stack(int length = 8) : length_(length), array_(new T[length]), last_(array_) { } 
```

请注意，这在作为类成员声明`array_`之前正常运行；-)`last_`

* * *

...最后一点*。*您`pop`是不正确的，因为您将元素返回*到*顶部。相反，请尝试以下操作...

```
template<typename T>
T Stack<T>::pop() {
    if (array_ != last_) {
        return *--last_;
    }
    /* other stuff here */
} 
```

您需要在取消引用*之前*`last_`递减，因为点超过了顶部。作为旁注，您还返回了`std::string`from的副本`pop`，即使您声明要避免这样做。

请注意，您不应该返回`NULL`，因为这不是指针类型。实际上，您将只是`std::string`通过构造函数创建一个带有`const char *`... 的构造函数，这在`NULL`. 见§21.4.2¶8-9...

> ```
> basic_string(const charT* s, const Allocator& a = Allocator()); 
> ```
> 
> *要求：* `s`不得为空指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T03:11:30.657

`std::string`是一个 typedef，因为`std::basic_string<char>`它没有被转换为它，它就是它。原因是可以使用相同的`std::basic_string`模板`wchar_t`来拥有 unicode 字符串。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T03:14:28.370

因为这才是`std::string`真正的 - 它只是 `std::basic_string' 的别名：

```
typedef basic_string<char> string; 
```

当编译器报告错误消息时，它显示的是 typedef 的真实基类型，而不是别名。

# web-services - Int64 类型的 Web 服务中的空白值

> ID：12434202
> 
> 赞同：8
> 
> 时间：2012-09-15T03:09:51.450
> 
> 标签：web-services, delphi, soap, null, delphi-xe2

我使用具有数字元素的 Web 服务。Delphi wsdl 导入器将其设置为 Int64。

Web 服务允许此元素为空。但是，因为它被定义为 Int64，当我在 Delphi 中使用 Web 服务而不为其设置值时，它默认为 0，因为它是 Int64。但我需要它为空白，并且 Web 服务将不接受 0 值（0 定义为无效并由 Web 服务返回错误）。

如果类型是 Int64，我如何传递一个空白值？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T06:15:40.100

空龄（示例）

```
<E06_14></E06_14> 
```

可能有特殊含义，例如“未知”年龄。

在这种情况下，真正的问题是如何在 Delphi 端使该字段可空。

来自JM Babet 的[这篇文章](http://www.delphigroups.info/2/12/678923.html)：

> 对“nil”的支持一直是一个持续存在的问题。Delphi 的几种内置类型不可为空。所以我们选择在这些情况下使用一个类（不优雅但它有效）。因此，在 Delphi 2007 的最新更新中，我添加了几个 TXSxxxx 类型来帮助解决这个问题。基本上：TXSBoolean、TXSInteger、TXSLong 等。TXSString 已经存在，但尚未注册。现在它是。导入 WSDL 时，您必须启用 Use 'TXSString for simple nillable types' 选项以使导入器切换到 TXSxxxx 类型。在命令行上是“-0z+”选项。

Import WSDL Wizard的[DocWiki](http://docwiki.embarcadero.com/RADStudio/en/Import_WSDL_Wizard)还显示了与可空元素相关的两个选项：

> *   **处理可空和可选元素**- 选中此选项以使 WSDL 导入器生成有关可选和可空属性的相关信息。SOAP 运行时使用此信息来允许某些属性为零。
>     
>     
> *   **将 TXSString 用于简单的 nillable 类型**- WSDL 标准允许简单类型为 nil，在 Delphi 或 NULL 中，在 C++ 中，而 Delphi 和 C++ 不允许这样做。选中此选项以使 WSDL 导入器通过使用包装类的实例来克服此限制。

# php - 如何在文本框附近显示验证错误

> ID：12434205
> 
> 赞同：1
> 
> 时间：2012-09-15T03:10:28.697
> 
> 标签：php

我在 index.php 中有这个表格

```
<form action="result.php" method="post">
<input type="text" name="word" class="tbox">
<input type="submit" name="submit" value="Generate Now">
</form> 
```

在 result.php 中，我正在检查输入是否与所有验证条件匹配并生成输出。现在，如果它不匹配，我会在我的文本框附近抛出一个错误。这可能通过php吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:14:00.880

使用 PHP，您可以尝试如下

```
<input type="text" name="word" class="tbox"> <?php if(isset($_POST['word']) && $_POST['word'] == ''){ echo 'YOUR ERROR MESSAGE'; } ?> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T03:14:44.227

有几件事，您可以仅针对页面本身发布，在用户可访问区域中拥有数据库功能等并不是很好，因此请查看包含并使用它们来引用单个页面。

然后制作一个简单的变量并将其滑入您的表单中

```
<? echo $error ?> 
```

并通过从 result.php 导入的 php 脚本设置错误，或者如果通过 include 组合文件不在桌面上，您可能想了解会话并获取变量。

一旦它工作，然后说制作一个 div 框

```
<? if (isset($error)){?><div class="errorbox"><? echo $error?></div><? }?> 
```

# ruby-on-rails - 使用设计的电子邮件确认

> ID：12434206
> 
> 赞同：0
> 
> 时间：2012-09-15T03:10:36.630
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.1, devise

我想知道如何要求用户在注册时使用一个字段提示确认输入框。我尝试了 email_confirmation 但它没有任何其他方式解决它？与设计

更新：

我想添加一个字段confirm_email：当用户使用设计在我的网站上注册时

所以在表格上：`users/sign_up`

我想要一些东西

```
Name:
Email:
Email_Confirmation:
Password:
Password_Confirmation: 
```

我不知道如何制作 email_confirmation 字段！

# jquery - 带有 BriteVerify 的 jQuery 验证插件

> ID：12434210
> 
> 赞同：1
> 
> 时间：2012-09-15T03:12:13.063
> 
> 标签：jquery, jquery-validate

我在我的页面上将 jQuery Validate 插件与 BriteVerify 结合使用（BriteVerify 是一项检查已知垃圾电子邮件地址和其他数据的服务，以防止表单上的虚假/垃圾邮件注册）。

请注意，“有效”字段（由 Validate 插件确定）可能被 BriteVerify 视为垃圾。例如，`mickeymouse@aol.com`通过验证，因为它是一个格式正确的地址，但 BriteVerify 阻止它，因为该帐户实际上并不存在。

所以，我想要做的是：如果来自 BriteVerify 的响应表明电子邮件地址不好，则以编程方式将该字段标记为“无效”（验证插件会自行执行的方式）。见下文：

```
jQuery.briteVerify.email(jQuery("#email").val(), function(email){
    if (email.errors) {
        // Trigger jQuery Validate's invalid appearance/error message here
    } else {
        // Do nothing - email is valid
    }
} 
```

我希望这是有道理的。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T14:25:43.997

我找不到“触发”无效字段的方法，但我能够完成类似这样的事情：

```
jQuery.briteVerify.email(jQuery("#email").val(), function(email){
    if (email.errors) {
        msg = email.errors[0][1];
        if (!($("#email").hasClass("error"))) {
            $("#email").addClass("error").after("<label class='bv error'>" + msg + ".</label>");
        }
    } else {
        form.submit();
    }
} 
```

因此，如果 BriteVerify 不喜欢输入的电子邮件，并且输入字段还*没有*`error`类（表明它通过了“正常”验证），那么我添加类并动态插入错误消息。使用相同的类使其外观与 Validate 将字段标记为无效一样。

请注意标签元素如何具有一个附加`bv`类——这是为了确定错误消息是来自 Validate 还是来自 BriteVerify。因此，为了防止同时显示两条错误消息（每条一条），我在字段通过“正常”验证时都删除了 BriteVerify 错误消息（如果有的话）：

```
$("#register").validate({
    ...
    success: function(){
        $(".bv").remove();
    }
}); 
```

每当按下一个键时：

```
$("#email").keypress(function(){
    $(".bv").remove();
}); 
```

# javascript - 滚动到容器中的下一个元素 - 几乎在那里

> ID：12434211
> 
> 赞同：1
> 
> 时间：2012-09-15T03:12:46.503
> 
> 标签：javascript, jquery, scroll, scrollto, listitem

我正在努力解决一个 jquery 问题。

我想我已经接近解决方案了，但我现在一直在跌跌撞撞。

**所以我的标记（简化）看起来像这样：**

```
<div class="col">
    Content
   <div class="scroll-container">
      <ul>
        <li>Content</li>
        <li>Content</li>
        <li>Content</li>
      </ul>
   </div>
<a href="#" class="scroll">scroll down</a>
</div> 
```

基本上是一个包含一个**容器**和一个**按钮**的 .col 。

* * *

## 计划：

1）单击按钮容器后应向下滚动到下一个`<li>`。

2）当到达最后一个`<li>`时，它会再次**滚动到第一个** `<li>`。所以我需要一个**循环**。

3)**数量**和**大小**可能会因`<li>`情况而异。*所以基本上按钮应该只是滚动`<li>`到容器顶部的旁边。*

4）滚动`<li>`需要有一点边距到容器的顶部边缘。

* * *

## 我在哪里：

我有一个类似的问题，[ronalchn](https://stackoverflow.com/users/1578925/ronalchn)很好地解决了这个问题，由于问题有点相似，我根据他的代码创建了一个小提琴。

[摆弄已解决的问题](http://jsfiddle.net/fFAQY/)（查看实际代码）

**[摆弄这个问题](http://jsfiddle.net/UQsv9/5/)**（显然不适用于同一个 jquery）

我认为代码基本上只**需要稍微重新排列即可**适应新情况。

我已经尝试了几个小时，但这似乎仍然超出了我目前对 jquery 的理解水平。

对于朝着正确方向的任何推动，我都非常高兴。谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:41:52.637

给你：http: [//jsfiddle.net/UQsv9/7/](http://jsfiddle.net/UQsv9/7/)

CSS 更改：添加`position: relative`到您的`ul`

我`$.fn.data`用来存储当前的孩子，从那里它只是使用两个偏移量之间的差异来计算新的`top`.

# sqlite - 插入时的 EXC_BAD_ACCESS

> ID：12434214
> 
> 赞同：0
> 
> 时间：2012-09-15T03:13:44.513
> 
> 标签：sqlite, insert, exc-bad-access, fmdb

我正在使用 FMDatabase 对 sqlite3 数据库进行操作。这是我的代码：

```
NSString *dbFilePath = [[NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0] stringByAppendingPathComponent:[NSString stringWithFormat:@"temp_info.db"]];

FMDatabase *fmdb = [FMDatabase databaseWithPath:dbFilePath];
if (![fmdb open]) {
    NSLog(@"......");
} else {
    NSString *sql = @"CREATE TABLE IF NOT EXISTS test1(id INTEGER, name TEXT, create_time TEXT)";
    if (![fmdb executeUpdate:sql]) {
        NSLog(@"......");
    }
    for (int i = 0; i < 3; i++) {
        BOOL result = [fmdb executeUpdate:@"INSERT INTO test1(id, name, create_time) values(?,?,?)", i+1, @"test", @"12-09-10 12:10"];
        NSLog(@"%d", result);
    }
    // EXC_BAD_ACCESS
} 
```

当我运行该行时：

```
BOOL result = [fmdb executeUpdate:@"INSERT INTO test1(id, name, create_time) values(?,?,?)", i+1, @"test", @"12-09-10 12:10"]; 
```

我得到一个`EXC_BAD_ACCESS`错误。为什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T12:08:02.210

问题已解决！
* *1.* *提供给`-executeUpdate:`方法的所有参数（或任何接受 a`va_list`作为参数的变体）必须是对象。以下将不起作用（并会导致崩溃）：
`[db executeUpdate:@"INSERT INTO mytable VALUES (?)", 66];`
插入数字的正确方法是将它装箱到一个`NSNumber`对象中：
`[db executeUpdate:@"INSERT INTO mytable VALUES (?)", [NSNumber numberWithInt:66]];`
* *2.* *或者，您可以使用`-execute*WithFormat:`变体来使用`NSString`-style 替换：
`[db executeUpdateWithFormat:@"INSERT INTO mytable VALUES (%d)", 66];`
在内部，这些`-execute*WithFormat:`方法为您正确装箱。以下百分比修饰符被识别：
`%@`, `%c`, `%s`, `%d`, `%D`, `%i`, `%u`, `%U`, `%hi`, `%hu`, `%qi`, `%qu`, `%f`, `%ld`, `%lu`,`%lld`, 和`%llu`.
使用其他修饰符会产生不可预知的结果。如果由于某种原因需要`%`字符出现在 SQL 语句中，则应使用`%%`.

# jquery - jQuery Supersized - 将标题插入幻灯片项目

> ID：12434220
> 
> 赞同：0
> 
> 时间：2012-09-15T03:15:00.047
> 
> 标签：jquery, jquery-plugins, supersized

我正在使用[超大的 jQuery](http://buildinternet.com/project/supersized/)，并且希望将 slide_caption 插入到每个幻灯片项目中，因此标题会随着每个图像“滑动”，而不仅仅是挂在页面上的某个地方。

通过将其添加到我的超大型主题的 init 函数中，我已经做得很好了：

```
if ($(vars.slide_caption).length){$('#supersized li').append($('.projectcaption'));} 
```

然后我将它添加到 beforeAnimation 函数中：

```
beforeAnimation : function(direction){ 
        // Update slide caption
        if ($(vars.slide_caption).length){
            (api.getField('title')) ? $(vars.slide_caption).html(api.getField('title')) : $(vars.slide_caption).html('');
        }    
    } 
```

问题是当前幻灯片的标题更改为下一张幻灯片的标题，而不是仅替换即将到来的标题。这可能是因为我使用一个类 (.projectcaption) 作为我的幻灯片标题并且页面上不止一个，但它必须是一个类而不是一个 ID。

[http://future.thefutureforward.com/~merrell/project-test.html](http://future.thefutureforward.com/~merrell/project-test.html)

关于如何让幻灯片标题随每张幻灯片滑出但不改变现有幻灯片标题的任何想法都会很棒！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T22:05:10.793

**所以这不适用于三个以上的图像......关于如何编辑的任何想法？**

--

我最终做的是使用“setTimeout”将对 beforeAnimation 函数的调用包装在主要的超大插件文件中。然后，我根据需要添加了延迟并对其进行了调整，直到文本在正确的时间切换出来：

```
if(typeof theme != 'undefined' && typeof theme.beforeAnimation == "function")setTimeout(function(){theme.beforeAnimation('next')},80); 
```

请记住，它在该文件中被调用了三次（一次用于初始加载，一次用于单击“下一步”，一次用于单击“上一个”）。这有点小技巧，需要根据幻灯片的速度调整毫秒延迟，但它运行良好。

[http://future.thefutureforward.com/~merrell/project-test.html](http://future.thefutureforward.com/~merrell/project-test.html)

# r - 在 Windows 上加速 as.POSIXct

> ID：12434222
> 
> 赞同：1
> 
> 时间：2012-09-15T03:15:40.940
> 
> 标签：r, multicore

我知道你可以使用包中的 ,来加速这个`as.POSIXct`功能，但它只适用于 Mac 等 unix 系统。是否有 Windows 等价物，可以产生相当的速度？`pvec``multicore`

任何基准测试都会很有趣……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T11:48:24.190

我担心你混淆了两个问题。

这里没有“加速`as.POSIXct`”，这仍然是一项昂贵的操作。所做的是`pvec`通过转换并行运行向量的“块”，从而最大限度地减少函数调用的数量`as.POSIXct`——正如您在上面的评论中引用的那样。

`pvec`但是依赖于分叉，这是 Windows 不提供的。重要的操作系统之间存在一些根本区别，这就是其中之一。

# python - Python中Mathematica Nest函数的等价物

> ID：12434225
> 
> 赞同：2
> 
> 时间：2012-09-15T03:16:23.977
> 
> 标签：python, function, wolfram-mathematica

> **可能重复：**
> [如何重复一个函数 n 次](https://stackoverflow.com/questions/7359828/how-to-repeat-a-function-n-times)

Mathematica 的 Nest 函数定义在[这里](http://reference.wolfram.com/mathematica/ref/Nest.html) What's the eqv. 在 Python 中？

像这样：**nest(f, x, 2) ----> f(f(x))**

# php - PHP AJAX 图片上传示例未上传

> ID：12434229
> 
> 赞同：0
> 
> 时间：2012-09-15T03:17:37.780
> 
> 标签：php, javascript, ajax, file-upload

我的代码在控制台上没有产生错误。当我单击上传按钮时，没有任何反应。按照我使用的教程中的说明，有一个帖子发送给自己，但图像没有上传到我的文件夹，也没有显示在我的页面上。除非我知道我应该使用 jquery（一旦我将它上传到文件夹，我就会进行转换）我的代码有什么问题？

```
<?php

if (!empty($_FILES)) {
    $name = $_FILES['file']['name'];

    if ($_FILES['file']['error'] == 0) {move_uploaded_file($_FILES['file']
            ['tmp_name'], "post_images/" . $name))} 
}

?>

<script type="text/javascript">

var handleUpload = function (event) {
event.preventDefault();
event.stopPropagation();

var fileInput = document.getElementById('file');
var data = new FormData();  
data.append('file', fileInput.files[1]);    
var request = new XMLHttpRequest();
request.upload.addEventListener('progress', function(event){
    if (event.lengthComputable) 
    {
    var percent = event.loaded / event.total;
    var progress = document.getElementById('upload_progress');
    while(progress.hasChildNodes()) {
        progress.removeChild(progress.firstChild);          
    }   

progress.appendChild(document.createTextNode(Math.round(percent * 100) + 
    '%'));          

}

});

request.upload.addEventListener('load',function(event) {
document.getElementById('upload_progress').style.display = 'none';
});

request.upload.addEventListener('error', function(event) {
alert('Upload failed');
});

request.open('POST', 'upload.php');
request.setRequestHeader('Cache-Control', 'no-cache');
document.getElementById('upload_progress').style.display = 'block';
request.send(data); 

};

window.addEventListener('load', function(event) {
var submit = document.getElementById('submit');
submit.addEventListener('click', handleUpload);
});

</script>

<div id="uploaded">

<?php

if (!empty($name)) {

echo '<img src="post_images/' . $name . '" width="100" height="100" />';    

}

?>

</div>

<div id="upload_progress"></div>

<div>

<form action="" method="post" enctype="multipart/form-data">

<div>

    <input type="file" id="file" name="file" />
    <input type="submit" id="submit" value="upload" />

</div>

</form>

</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:23:21.137

非多文件输入元素中只有一个文件，`fileInput.files[1]`尝试使用第二个文件。

```
data.append('file', fileInput.files[0]); 
```

# javascript - 当鼠标悬停在文本中的单词上时显示警报

> ID：12434232
> 
> 赞同：2
> 
> 时间：2012-09-15T03:18:52.307
> 
> 标签：javascript, html

我已经为此苦苦挣扎了几天。我需要有人引导我朝着正确的方向前进。我一直在网上搜索。我不确定我是否采取了正确的方法。我需要的是，每次有人将鼠标悬停在特定关键字上时，它都应该显示一个警告框。在这个例子中，这个词是 else。当我运行代码时，它不会给出任何错误，并且当鼠标悬停在单词上时不会显示任何内容。

```
function on_func2()
{
    var searchString = 'else';
    var elements = document.getElementById('paragraph2');
    for (var i = 0; i < elements.length; i++)
    {
        if (elements[i].innerHTML.indexOf(searchString) !== -1) 
        {
            alert('Match');
            break;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:27:31.957

我会做这样的事情：它将遍历并找到所有`else`单词，并将它们包装在一个带有监听器绑定的跨度中：

```
<p id="hello">What else would you say?</p> 
```

-

```
​var hello = document.getElementById('hello');
var str = hello.innerHTML;
str = str.replace(​​​ /\b(else)\b/g, '<span onmouseover="func1()">$1</span>' );​​​​​​​​​​​​​​​​​​​
hello.innerHTML = str;

function func1() {
  alert('there');
} 
```

看看[小提琴](http://jsfiddle.net/kDdYV/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:43:43.570

使用 jQuery[刻字](http://letteringjs.com/)插件

```
<p class="word_split">if you were not there, else I would not have won.<p>

$(".word_split").lettering('words');
$('.word_split').mouseover(function(event) {
    var word=event.target.innerHTML;
    if (word == "else")
       alert("Yep");
}); 
```

这是一个演示：[jsFiddle](http://jsfiddle.net/vN83X/)

# perl - 在尝试编写脚本来置换列表中的值时，我收到未初始化值警告

> ID：12434239
> 
> 赞同：1
> 
> 时间：2012-09-15T03:20:59.750
> 
> 标签：perl, permutation, initialization

我很不确定发生了什么。对于各种长度的`@depths`，代码通常有效。然而，在整个输出过程中，程序在某些时候会抱怨使用未初始化的值。

错误归咎于第 20 行：`print $chars[$depths[$y]];`

如果这是显而易见的事情，我会提前道歉，但我肯定错过了这个问题。我已经用谷歌搜索了大约一个小时，但没有运气，所以任何朝着正确方向的轻推将**不胜**感激！

完整代码：

```
#! /usr/bin/perl -w

use strict;
use warnings;

#my @chars  = ("0" .. "9");
#my @depths = (0) x 4;
my @chars   = ("0" .. "1");
my @depths  = (0) x 3;

my ($i, $x, $y);

for ($i = 0; $i < @chars ** @depths; $i++) {

    for ($y = 0; $y < @depths; $y++) {

        print $chars[$depths[$y]];
    }
    print"\n";

    $depths[$#depths]++;
    for($x = 0; $x < @depths; $x++) {

        if($depths[$x] == @chars) {

            $depths[$x-1]++;
            while($x < @depths) {

                $depths[$x++] = 0;
            }
        }
    }
} 
```

输出：

```
000
001
010
011
Use of uninitialized value in print at a.pl line 15.
00
100
101
110 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:13:16.960

我在您的代码中添加了一些打印语句，问题变得很明显。

```
#! /usr/bin/perl -w

use strict;
use warnings;

my @chars = ("0".."1");
my @depths = (0) x 3;

my $i;
my $x;
my $y;
for ($i = 0; $i < @chars**@depths; $i++)
{
        printf "m = %d\n", scalar(@depths);
        for ($y = 0; $y < @depths; $y++)
        {
            print "y:$y; d[y] = $depths[$y]\n";
            print " :$chars[$depths[$y]]:\n";
        }
        print"\n";

        printf "b[%d] ", $depths[$#depths];
        $depths[$#depths]++;
        printf "a[%d]\n", $depths[$#depths];
        for($x = 0; $x < @depths; $x++){
                if($depths[$x] == @chars){
                        $depths[$x-1]++;
                        while($x < @depths){
                                $depths[$x++] = 0;
                        }
                }
        }
} 
```

输出是：

```
m = 3
y:0; d[y] = 0
 :0:
y:1; d[y] = 0
 :0:
y:2; d[y] = 0
 :0:

b[0] a[1]
m = 3
y:0; d[y] = 0
 :0:
y:1; d[y] = 0
 :0:
y:2; d[y] = 1
 :1:

b[1] a[2]
m = 3
y:0; d[y] = 0
 :0:
y:1; d[y] = 1
 :1:
y:2; d[y] = 0
 :0:

b[0] a[1]
m = 3
y:0; d[y] = 0
 :0:
y:1; d[y] = 1
 :1:
y:2; d[y] = 1
 :1:

b[1] a[2]
m = 3
y:0; d[y] = 0
 :0:
y:1; d[y] = 2
Use of uninitialized value within @chars in concatenation (.) or string at perm.pl line 18.
 ::
y:2; d[y] = 0
 :0:

b[0] a[1]
m = 3
y:0; d[y] = 1
 :1:
y:1; d[y] = 0
 :0:
y:2; d[y] = 0
 :0:

b[0] a[1]
m = 3
y:0; d[y] = 1
 :1:
y:1; d[y] = 0
 :0:
y:2; d[y] = 1
 :1:

b[1] a[2]
m = 3
y:0; d[y] = 1
 :1:
y:1; d[y] = 1
 :1:
y:2; d[y] = 0
 :0:

b[0] a[1] 
```

错误报告之前的行显示`$depths[$y]`为 2，但数组`@chars`仅包含索引为 0 和 1 的元素，因此警告是准确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:13:45.200

可以将`@depths`其视为 N 基数（其中 N 是 的数量`@chars`），并且 的每个元素`@depths`都是一个数字。你试图在那个数字上加一个，但你失败了。

进位从最低有效位传播到最高有效位，因此您应该是循环而不是处理进位应该从最低有效位循环到最高有效位，但是您以相反的顺序进行操作。随着循环的推进，`$x`应该开始并减少。`$#depth`

让我们看一个例子。假设有 10 个符号 ( `@chars == 10`)：

```
 456999   <- @depth
+     1
-------
 457000 
```

所以你想增加不等于 的最右边的数字`$#chars`，并将所有等于 的最右边的数字设置为零`$#chars`。这是我的编码方式：

```
#!/usr/bin/perl -w

use strict;
use warnings;

my @chars = ("0".."2");
my @depths = (0) x 3;

OUTER: while (1) {
   print @chars[@depths], "\n";

   my $x = $#depths;
   while ($depths[$x] == $#chars) {
      $depths[$x] = 0;
      last OUTER if $x == 0;
      --$x;
   }

   ++$depths[$x];
} 
```

# linux - linux 平台上的 JSON 服务器建议

> ID：12434240
> 
> 赞同：0
> 
> 时间：2012-09-15T03:21:12.880
> 
> 标签：linux, json, rest, mobile

我需要为我的移动应用程序创建一个 JSON 服务来从 Linux 上的本地和远程 http/https 服务器获取和发布数据。- 我使用 MySQL 作为 DB 引擎 - 我尝试使用 Glassfish EJB/JSP（我喜欢 Java），但这有点令人沮丧，因为我的 linux 开发机器（mint 13）对 Oracle Glassfish 的支持很差。

在您看来，在该环境中创建远程 JSON 服务器的最佳方式是什么？我有哪些选择？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:22:26.750

如果您想接受并发送回 JSON，您需要基于[JAX-RS](http://docs.oracle.com/javaee/6/tutorial/doc/giepu.html)的服务，而不是 JSP 服务。

您很可能会使用[Jersey](http://jersey.java.net/)、[RESTEasy](https://www.jboss.org/resteasy/)、[CXF](http://cxf.apache.org/docs/restful-services.html)或 JAX-RS 规范的类似实现。

从 JAX-RS 实现发回 JSON 是微不足道的；这就是 JAX-RS 的设计目的。一般来说，JSP 用于 Web 应用程序（返回 HTML、CSS、图像和 JavaScript），而 JAX-RS 用于 RESTful Web 服务，返回 JSON、XML 和 YAML。您*可以*使用 JSP 生成 JSON，但这并不常见。

就您的整体架构而言，任何网络服务器都可以（Apache、Tomcat 等），您可以使用 Springframework 或完整的应用服务器，如 JBoss 或 Glassfish。Springframework 有自己的 REST 支持，但我已经多次使用 JAX-RS 和 Spring，它运行良好。由于您已经在使用 Glassfish，因此集成 JAX-RS 实现应该很简单。[Oracle 的这篇文章](http://docs.oracle.com/cd/E19776-01/820-4867/ggnzk/index.html)向您展示了如何操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:30:20.977

好吧，我想你需要找到一个让你有信心的好框架。

我使用 Zend PHP + Doctrine 为我的应用程序提供服务。为什么？我只是在像 Zend 这样的优秀 MVC 中创建简单的控制器，并使用 Doctrine 的所有功能来处理查询。好的，但是为什么呢？因为我在上面开发了快速而整洁的代码。

最好的

# php - 选择/下拉反映当前日期？

> ID：12434249
> 
> 赞同：1
> 
> 时间：2012-09-15T03:23:24.007
> 
> 标签：php, html

我正在为客户建立一个网站（我是一名试图学习编码的设计师）并且有三个选择。

它看起来像这样：

![在此处输入图像描述](../Images/153217b207bef3de0b8f5219881f1149.png)

现在客户希望到达日期反映所有选择中的当前日期。我怎样才能用 PHP 做到这一点？

感谢大家的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T03:35:18.383

使用[日期时间](http://www.php.net/manual/en/datetime.format.php)

```
 $date = new DateTime();
 $day = $date->format('d');
 $month = $date->format('m');
 $year = $date->format('Y'); 
```

然后当你生成你的选择

```
<select name="day">
<?php
for($i = 1; $i <= 31; $i++)
{
  printf('<option value="%d" %s>%d</option>', $i, $i == $day ? 'selected="selected"' : '', $i);
}
?>
</select> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T03:50:51.077

```
<?php
$date = new DateTime();
$months = array(1 => 'Jan', 2 => 'Feb', 3 => 'Mar', 4 => 'Apr', 5 => 'May', 6 => 'Jun', 7 => 'Jul', 8 => 'Aug', 9 => 'Sep', 10 => 'Oct', 11 => 'Nov', 12 => 'Dec');
?>

<select name="month">
    <?php foreach($months as $key => $month) { ?>
        <?php $default_month = ($key == $date->format('m'))?'selected':''; ?>
        <option <?php echo $default_month; ?> value="<?php echo $key; ?>">
            <?php echo $month; ?>
        </option>
    <?php } ?>
</select>

<select name="day">
    <?php for($day = 1; $day <= 31; $day++) { ?>
        <?php $default_day = ($day == $date->format('d'))?'selected':''; ?>
        <option <?php echo $default_day; ?> value="<?php echo $day; ?>">
            <?php echo $day; ?>
        </option>
    <?php } ?>
</select>

<select name="year">
    <?php for($year = $date->format('Y'); $year <= 2020; $year++) { ?>
        <option value="<?php echo $year; ?>">
            <?php echo $year; ?>
        </option>
    <?php } ?>
</select> 
```

# c - 结构指针的动态数组

> ID：12434250
> 
> 赞同：5
> 
> 时间：2012-09-15T03:23:34.800
> 
> 标签：c, arrays, pointers

我必须使用以下代码块进行学校作业，严格不做任何修改。

```
typedef struct 
{
    char* firstName;
    char* lastName;
    int id;
    float mark;
}* pStudentRecord;

pStudentRecord* g_ppRecords;
int g_numRecords =0; 
```

这里 g_ppRecords 应该是一个指向结构的指针数组。我完全无法理解的是，该语句如何`pStudentRecords *g_ppRecords;`意味着`g_ppRecords`是一个数组，因为数组应该定义为

```
type arrayname[size]; 
```

我尝试动态地为 g_ppRecords 分配内存，但这没有帮助。

```
g_ppRecords = (pStudentRecord*) malloc(sizeof(pStudentRecord*)*(g_numRecords+1)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T04:48:27.273

编辑：更新了“大错误”部分。

关于 C 风格（不同于 C++！）类型定义的快速课程，以及它为何如此，以及如何使用它。

首先，一个基本的 typedef 技巧。

```
typedef int* int_pointer;
int_pointer ip1;
int *ip2;
int a;    // Just a variable
ip1 = &a; // Sets the pointer to a
ip2 = &a; // Sets the pointer to a
*ip1 = 4; // Sets a to 4
*ip2 = 4; // Sets a to 4 
```

ip1 和 ip2 是相同的类型：指向类型 int 的指针，即使您没有在 ip1 的声明中添加 *。那个 * 是在声明中。

切换话题。您谈到将数组声明为

```
int array1[4]; 
```

要在运行时动态执行此操作，您可以执行以下操作：

```
int *array2 = malloc(sizeof(int) * 4);
int a = 4;
array1[0] = a;
array2[0] = a; // The [] implicitly dereferences the pointer 
```

现在，如果我们想要一个指针数组怎么办？它看起来像这样：

```
int *array1[4];
int a;
array1[0] = &a; // Sets array[0] to point to variable a
*array1[0] = 4; // Sets a to 4 
```

让我们动态分配该数组。

```
int **array2 = malloc(sizeof(int *) * 4);
array2[0] = &a; // [] implicitly dereferences
*array2[0] = 4; // Sets a to 4 
```

注意 int **。这意味着指向 int 的指针。如果我们选择，我们可以使用指针 typedef。

```
typedef int* array_of_ints;
array_of_ints *array3 = malloc(sizeof(array_of_ints) * 4);
array3[0] = &a; // [] implicitly dereferences
*array3[0] = 4; // Sets a to 4 
```

看看最后一个声明中只有一个 * 吗？那是因为其中一个是“在 typedef 中”。使用最后一个声明，您现在拥有一个大小为 4 的数组，其中包含 4 个指向 int (int *) 的指针。

在这里指出操作员优先级很重要。取消引用运算符 [] 优先于 * 之一。所以要绝对清楚，我们正在做的是：

```
*(array3[0]) = 4; 
```

现在，让我们将主题更改为结构和类型定义。

```
struct foo { int a; }; // Declares a struct named foo
typedef struct { int a; } bar; // Typedefs an "ANONYMOUS STRUCTURE" referred to by 'bar' 
```

为什么你会 typedef 一个匿名结构？好吧，为了可读性！

```
struct foo a; // Declares a variable a of type struct foo
bar b;        // Notice how you don't have to put 'struct' first 
```

声明一个函数...

```
funca(struct foo* arg1, bar *arg2); 
```

看看我们如何不必将 'struct' 放在 arg2 前面？

现在，我们看到您必须使用的代码以这种方式定义了一个结构：

```
typedef struct { } * foo_pointers; 
```

这类似于我们之前如何处理指针数组：

```
typedef int* array_of_ints; 
```

并排比较

```
typedef struct { } * foo_pointers;
typedef int* array_of_ints; 
```

唯一的区别是一个是 struct {}，另一个是 int。

使用我们的 foo_pointers，我们可以声明一个指向 foo 的指针数组，如下所示：

```
foo_pointers fooptrs[4]; 
```

现在我们有一个数组，其中存储了 4 个指向我们无法访问的匿名结构的指针。

话题切换！

不幸的是，你的老师犯了一个错误。如果查看上面 foo_pointers 类型的 sizeof()，会发现它返回的是指向该结构的指针的大小，而不是结构的大小。这是 32 位平台的 4 个字节或 64 位平台的 8 个字节。这是因为我们定义了一个指向结构的指针，而不是结构本身。sizeof(pStudentRecord) 将返回 4。

所以你不能以明显的方式为结构本身分配空间！然而，编译器允许这种愚蠢。pStudentRecord 不是可用于有效分配内存的名称/类型，它是指向匿名“概念”结构的指针，但我们可以将其大小提供给编译器。

pStudnetRecord g_ppRecords[2]; pStudentRecord *record = malloc(sizeof(*g_ppRecords[1]));

更好的*做法*是这样做：

```
typedef struct { ... } StudentRecord;  // Struct
typedef StudentRecord* pStudentRecord; // Pointer-to struct 
```

我们现在能够以清晰的方式创建 struct StudentRecord 以及使用 pStudentRecord 指向它们的指针。

尽管您被迫使用的方法是非常糟糕的做法，但目前这并不是一个问题。让我们回到使用整数的简化示例。

如果我想成为一个 typedef 使我的生活复杂化但解释这里发生的概念怎么办？让我们回到旧的 int 代码。

```
typedef int* array_of_ints;
int *array1[4];
int **array2 = malloc(sizeof(int *) * 4); // Equivalent-ish to the line above
array_of_ints *array3 = malloc(sizeof(array_of_ints) * 4);
int a, b, c, d;
*array1[0] = &a; *array1[1] = &b; *array1[2] = &c; *array1[3] = &d;
*array2[0] = &a; *array2[1] = &b; *array2[2] = &c; *array2[3] = &d;
*array3[0] = &a; *array3[1] = &b; *array3[2] = &c; *array3[3] = &d; 
```

如您所见，我们可以将其与 pStudentRecord 一起使用：

```
pStudentRecord array1[4];
pStudentRecord *array2 = malloc(sizeof(pStudentRecord) * 4); 
```

将所有内容放在一起，从逻辑上可以得出：

```
array1[0]->firstName = "Christopher";
*array2[0]->firstName = "Christopher"; 
```

是等价的。（注意：不要完全按照我上面的做法；在运行时将 char* 指针分配给字符串只有在您知道已经分配了足够的空间时才可以）。

这只真正带来了最后一点。我们如何处理我们 malloc 的所有这些内存？我们如何释放它？

```
free(array1);
free(array2); 
```

关于指针、匿名结构的 typedef 和其他内容的深夜课程结束了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T03:42:28.873

观察它`pStudentRecord`是 typedef'd 作为指向结构的指针。C 中的指针只是指向内存块的开头，无论该块包含 1 个元素（普通的“标量”指针）还是 10 个元素（“数组”指针）。因此，例如，以下

```
char c = 'x';
char *pc = &c; 
```

`pc`指向以字符开头的一段记忆，`'x'`而以下

```
char *s = "abcd"; 
```

`s`指向以（后跟一个空字节）开头的一段内存`"abcd"`。类型相同，但它们可能用于不同的目的。

`g_ppRecords`因此，一旦分配，我可以通过例如访问元素`g_ppRecords[1]->firstName`。

现在，分配这个数组：你想使用`g_ppRecords = malloc(sizeof(pStudentRecord)*(g_numRecords+1));`（虽然注意`sizeof(pStudentRecord*)`和`sizeof(pStudentRecord)`相等，因为它们都是指针类型）。这会产生一个未初始化的结构*指针*数组。对于数组中的每个结构指针，您需要通过分配一个新结构来为其赋值。问题的症结在于如何分配单个结构，即

```
g_ppRecords[1] = malloc(/* what goes here? */); 
```

幸运的是，您实际上可以在以下位置取消引用指针`sizeof`：

```
g_ppRecords[1] = malloc(sizeof(*g_ppRecords[1])); 
```

请注意，这`sizeof`是一个编译器构造。即使`g_ppRecords[1]`不是有效指针，*类型*仍然有效，因此编译器将计算正确的大小。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T03:50:47.313

数组通常用指向其第一个元素的指针来引用。如果您为 10 个学生记录分配足够的空间，然后在 g_ppRecords 中存储指向该空间开头的指针，则 g_ppRecords[9] 将向前计算 9 个记录指针长度并取消引用那里的内容。如果您正确管理了空间，那么数组中的最后一条记录将是什么，因为您为 10 保留了足够的空间。

简而言之，你已经分配了空间，如果它的长度合适，你可以随意对待它，包括作为一个数组。

我不确定您为什么要为 g_numRecords + 1 记录分配空间。除非 g_numRecords 的命名令人困惑，否则数组中的空间比您需要的多一个。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T04:14:08.040

> 这里 g_ppRecords 应该是一个指向结构的指针数组。我完全不明白的是，声明 *pStudentRecords g_ppRecords; 意味着 g_ppRecords 是一个数组。作为一个数组应该定义为
> 
> 类型数组名[大小]；

umm `type arrayname[size];`是在 C 中定义数组的**多种方法***之一。*

 **这静态定义了一个数组，大多数值都存储在堆栈中，具体取决于它定义的位置，数组的大小必须在编译时知道，尽管在某些现代编译器中可能不再是这种情况。

另一种方法是在运行时动态创建一个数组，因此我们不必在编译时知道大小，这就是指针的来源，它们是存储动态分配的内存块地址的变量。

一个简单的例子是这样`type *array = malloc(sizeof(type) * number_of_items);`的 malloc 返回一个存储在 中的内存地址`array`，请注意，出于安全原因，我们不会对返回类型进行类型转换。

回到手头的问题。

```
typedef struct 
{
    char* firstName;
    char* lastName;
    int id;
    float mark;
}*  pStudentRecord;

pStudentRecord* g_ppRecords;
int g_numRecords = 0; 
```

这`typedef`与大多数注意有点不同，`}*`基本上它是一个指向结构的指针，所以这个：

```
pStudentRecord* g_ppRecords; 
```

实际上是：

```
struct 
{
    char* firstName;
    char* lastName;
    int id;
    float mark;
}** pStudentRecord; 
```

它是一个指向指针的指针，至于他们为什么会这样定义`typedef`，它超出了我的范围，我个人不推荐它，为什么？

一个问题是我们如何通过它的名字来获得结构的大小？简单我们不能！如果我们使用`sizeof(pStudentRecord)`，我们将得到`4`或`8`取决于底层架构，因为那是一个指针，在不知道结构的大小的情况下，我们不能真正使用它的 typedef 名称动态分配它，所以我们能做什么，声明第二个结构这样像这样：

```
typedef struct 
{
    char* firstName;
    char* lastName;
    int id;
    float mark;
} StudentRecord;

g_ppRecords = malloc(sizeof(StudentRecord) * g_numRecords); 
```

无论哪种方式，您确实需要联系最初创建此代码的人或维护人员并提出您的疑虑。

```
g_ppRecords=(pStudentRecord) malloc( (sizeof(char*) + 
                                  sizeof(char*) + 
                                  sizeof(int)   + 
                                  sizeof(float)) *(g_numRecords+1)); 
```

这似乎是一种可能的方式，不幸的是，[没有关于结构的保证](https://stackoverflow.com/questions/11057174/are-there-any-guarantees-about-c-struct-order)，因此它们实际上可以在成员之间包含填充，因此结构的总大小实际上可以大于其组合成员，更不用说那里的地址可能不同。

**编辑**

显然我们可以通过简单地推断它的类型来获得结构的大小

所以：

```
pStudentRecord g_ppRecords = malloc(sizeof(*g_ppRecords) * g_numRecords); 
```

工作正常！**

# cuda - 如何适当地结合 OpenMP 和 CUDA

> ID：12434251
> 
> 赞同：2
> 
> 时间：2012-09-15T03:23:36.137
> 
> 标签：cuda, openmp

我最近尝试将我的 CUDA 代码与 OpenMP 结合起来，但出现了一些问题。我的 CUDA-OpenMP 代码写成

```
 int main (void)
    {
       cudaGetDeviceCount(&gpuNum);

       //declare variables
       float *data_h; *data_d[gpuNum];
       data_h = (float*)malloc(Mem);
       ....
       ....
       omp_set_num_threads(gpuNum); 
       #pragma omp parallel
       {
         int cpuid = omp_get_thread_num();
         cudaSetDevice(cpuid);

         cudaMalloc((void**)&data_d[cpuid], Mem );

         cudaMemcpy( data_d[cpuid], data_h, Mem, cudaMemcpyHostToDevice);
         kernel<<< gpu_block, gpu_thread >>>();
         cudaMemcpy( data_h, data_d[cpuid], Mem, cudaMemcpyDeviceToHost);
       }
       printf("end of parallel\n");
       //post process
     } 
```

问题是有时当我运行这段代码时，一切都很顺利，但有时它会停止并且不会打印出“并行结束”语句。这种情况是随机发生的，谁能告诉我这可能是什么原因？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T19:45:35.937

我想提供一些失败的可能性：

在并行区域中想象一下，当执行前两行时，活动线程与另一行切换，

```
#pragma omp parallel{
  int cpuid = omp_get_thread_num();
  cudaSetDevice(cpuid);
  ...
} 
```

然后另一个线程将调用设置设备函数并更改所选设备。

虽然 memcopy 操作阻塞了内核调用，但不是。因此，如果在内核调用之后切换线程，当一个内核调用未完成时，将发出另一个内核调用。要执行并发内核，您需要使用“**流**”。看一眼

[每个流具有多个内核的 CUDA 并发内核执行](https://stackoverflow.com/questions/9311015/cuda-concurrent-kernel-execution-with-multiple-kernels-per-stream)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T12:15:40.083

如果您想获得最佳性能，我建议您不要使用 OpenMP 来运行 CUDA。根据我的经验，我知道通过 OpenMP 创建线程并非没有成本，而且需要一些时间。在创建线程期间，您将能够在许多设备上运行更多 gpu 内核。

正如@phoad 提到的，如果您的数据集是独立的，您可以使用流。你可以在网上找到很多例子。

另一种可能性是重新设计你的内核。一个内核可以完成相同的工作并返回数组作为结果。

# json - 加入 JSONArray 为 groovy 中的字符串添加双引号

> ID：12434255
> 
> 赞同：2
> 
> 时间：2012-09-15T03:24:24.317
> 
> 标签：json, grails, join, groovy, arrays

我有进行 REST 调用的 grails 应用程序。如果发生错误，则返回一个包含错误消息的 JSON 数组。我需要将这些字符串组合成一个字符串。但是，当我这样做时，会将双引号添加到字符串的开头和结尾。我写了一个简单的测试控制器来说明这个问题：

```
import net.sf.json.*
class MyController {

    def test = {

        String msg = "'fred' is not a valid LDAP distinguished name."
        JSONArray messages = new JSONArray()
        messages.add(msg)
        def renderStr = messages.join('<br/>')

        render(renderStr)
    }
} 
```

输出如下所示：

```
"'fred' is not a valid LDAP distinguished name." 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T05:03:58.507

问题是 join 函数返回 JSON-spec 字符串......根据他们的文档：http: [//grails.org/doc/1.0.3/api/org/codehaus/groovy/grails/web/json /JSONArray.html](http://grails.org/doc/1.0.3/api/org/codehaus/groovy/grails/web/json/JSONArray.html)

```
 The texts produced by the toString methods strictly conform to JSON syntax rules. The constructors are more forgiving in the texts they will accept:

    An extra , (comma) may appear just before the closing bracket.
    The null value will be inserted when there is , (comma) elision.
    Strings may be quoted with ' (single quote).
    Strings do not need to be quoted at all if they do not begin with a quote or single quote, and if they do not contain leading or trailing spaces, and if they do not contain any of these characters: { } [ ] / \ : , = ; # and if they do not look like numbers and if they are not the reserved words true, false, or null.
    Values can be separated by ; (semicolon) as well as by , (comma).
    Numbers may have the 0- (octal) or 0x- (hex) prefix.
    Comments written in the slashshlash, slashstar, and hash conventions will be ignored. 
```

请注意，“如果字符串不以**引号或单引号开头，则根本不需要引用**”的规则正在发生。您的字符串以引号开头，因此如果输出时不带引号，JSON 解析器将假定该字符串以第二个单引号结尾，之后的文本将是不可解析的垃圾。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-11-05T11:00:55.553

使用这个方便的方法

```
private String joinJSONArray(arr, delim = ',') {
    def result = ''

    arr.eachWithIndex { e, i ->
        result += e

        if (i != arr.size() - 1) {
            result += delim
        }
    }

    result
} 
```

它利用`eachWithIndex`Groovy 不提供`injectWithIndex`.

# c# - C# 动态关键字异常处理

> ID：12434256
> 
> 赞同：3
> 
> 时间：2012-09-15T03:24:26.720
> 
> 标签：c#, exception, dynamic

下面的代码在执行这一行时会抛出异常（即 something.Add(name)）。

我想在执行这个时捕获实际的异常。我的意思是我不想使用 catch(Exception ex) 而不是我想知道这里抛出的正确异常是什么。

```
try
{
  dynamic name= "test";
  var something = new List<decimal>();
  something.Add(name);
}
catch(Exception ex)
{
  throw ex;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-09-15T03:36:50.940

不知道您为什么要尝试将字符串转换为小数，但是好的...答案是 Microsoft.System.CSharp.RuntimeBinder.RuntimeBinderException。

来源：实际运行代码。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T05:49:24.347

在大多数情况下，动态类型的行为类似于类型对象，它绕过了静态类型检查。在编译时，假定动态类型的元素支持任何操作。
[来源：[MSDN-1](http://msdn.microsoft.com/en-us/library/dd264736.aspx)、[MSDN-2](http://msdn.microsoft.com/en-us/library/dd264741.aspx) ]

**在你的情况下：**

*   这意味着，当您定义一个动态类型的变量时，它将被视为对象类型，因此您可以在其中存储任何值，并且可以将其添加到十进制列表中，编译器不会抛出任何错误。
*   但是在运行时动态变量类型将被解析为“字符串”，并且您正在尝试将字符串值添加到十进制列表中，这就是运行时会抛出异常的原因。

您可以尝试以下代码：

```
try
{
  dynamic name= "test";
  var something = new List<decimal>();
  something.Add(name);
}
catch (Microsoft.CSharp.RuntimeBinder.RuntimeBinderException ex)
{
  Console.WriteLine(ex.Message);
} 
```

* * *

**动态类型示例：**

```
using System;
class Program
{
    static void Main(string[] args)
    {
        dynamic dynVar = 2;
        Console.WriteLine(dynVar.GetType());
    }
} 
```

将输出为：

> System.Int32

* * *

**您正在尝试做什么：**
只需在 IDE 中添加以下行，就会显示编译时错误。

```
List<decimal> dl = new List<decimal>();
dl.Add("Hello"); 
```

# php - iOS推送到PHP使用应用信息

> ID：12434258
> 
> 赞同：0
> 
> 时间：2012-09-15T03:24:39.983
> 
> 标签：php, ios

在创建一个使用 JSON 从 PHP 服务器中提取数据的 iOS 应用程序之后。

我想设计一个推送数据的应用程序，发送与应用程序使用相关的数据，例如：-应用程序的使用天数-应用程序的使用时间-运行时谁在我的应用程序上注册-等等。

有什么经验可以分享吗？一些框架？

最好的！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:33:07.367

为什么不编写自己的 Web 服务。由于您已经在使用 PHP，因此这里有一个很棒的教程可以帮助您入门。

[http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app](http://www.raywenderlich.com/2941/how-to-write-a-simple-phpmysql-web-service-for-an-ios-app)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:36:03.077

您可以考虑使用 Google 的 Analytics SDK，如果您对他们存储数据感到满意的话。 [https://developers.google.com/analytics/devguides/collection/ios/](https://developers.google.com/analytics/devguides/collection/ios/)

节省您运行服务器端的时间。

# ruby - return retval() if retval() - 有没有办法在 Ruby 中编写它而不调用 retval 函数两次？

> ID：12434259
> 
> 赞同：1
> 
> 时间：2012-09-15T03:24:43.227
> 
> 标签：ruby, idioms

假设我有这个代码

```
def retval
  # some resource intensive computation
  return whatever
end

def foo
  ...
  return retval if retval
  ...
end 
```

有没有办法重组这样 retval 不会被调用两次，而不做

```
def foo
  ...
  x = retval
  return x if x
  ...
end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:36:25.933

这是同一件事的另一个变体

```
def foo
  if x = retval
    return x
  end
  ...
end 
```

如果你只看语法，恐怕你不会得到截然不同的结果。此外，这有什么问题？

```
def foo
  ...
  x = retval
  return x if x
  ...
end 
```

我就是这样写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:34:54.363

您可以将结果存储在`retval`：

```
def retval
  return @retval if @retval
  # some resource intensive computation

  @retval = whatever
end

def foo
  ...
  return retval if retval
  ...
end 
```

对于较短的方法，一个很好的习惯用法是：

```
def retval
  @somevar ||= some_work
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T03:36:44.963

如果您正在寻找单线

```
return x if (x = retval) 
```

仅在`x`已定义时才有效。

```
if x = retval; x; end 
```

*确实*有效，但没有人真正那样写 Ruby。

根据你的情况，可能

```
return true if retval 
```

有可能，还是您实际上要求返回的值`retval`返回？

**更新**：正如 OP 所说，需要返回值，Sergio 的回答是恕我直言正确。当然，还有另一种方法可以在表达式内部使用相当丑陋的赋值来制作单线：

```
x = retval and return x 
```

哎呀！:-)

# android - 使用 Facebook API 获取封面照片

> ID：12434261
> 
> 赞同：7
> 
> 时间：2012-09-15T03:26:12.650
> 
> 标签：android, facebook, facebook-graph-api

在我的 Android 应用程序中，我试图从他的 Facebook 帐户中获取用户的封面照片。

我可以使用以下代码获取个人资料图片。

```
profilePicUrl = new URL("http://graph.facebook.com/" + userId + "/picture?type=large");

profilePicBmp = BitmapFactory.decodeStream(profilePicUrl.openConnection().getInputStream()); 
```

该[文档](https://developers.facebook.com/docs/reference/api/user/)指定了以下用于检索封面照片的内容。

> 用户的封面照片（必须使用 fields=cover 参数明确请求）
> 
> 需要 access_token
> 
> 返回：字段 id、source 和 offset_y 的数组

因此，JSON 响应的结构将是这样的。

```
{
   "cover": {
      "cover_id": "10151008748223553",
      "source": "http://sphotos-a.ak.fbcdn.net/hphotos-ak-ash4/s720x720/391237_10151008748223553_422785532_n.jpg",
      "offset_y": 0
   },
   "id": "19292868552"
} 
```

我对 Facebook Graph API 很陌生，因此对如何进行此操作知之甚少。

我试过这个`coverPicUrl = new URL("http://graph.facebook.com/" + userId + "/cover?type=large");`

还有这个`coverPicUrl = new URL("http://graph.facebook.com/" + userId + "/fields=cover");`

但是我一直无法获得用户个人资料的封面图片。

在线搜索也没有产生任何丰硕的结果。

任何帮助确实将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T04:58:06.390

“源”标签 (JSONObject) 嵌套在另一个 JSONObject 中，即“封面”标签。要解析这个结果，你将不得不使用这样的东西：

```
JSONObject JOSource = JOCover.optJSONObject("cover");
String coverPhoto = JOSource.getString("source"); 
```

示例中`JOCover`使用的假设您已经有一个`JSONOBject (JOCover)`来解析根。你可以用你自己`JSONObject`的代替它。

“source”标签不能直接访问，因为它嵌套在“cover”标签中。您将不得不使用“ `.optJSONObject("cover")`”。我见过人们使用`.getString`而不是，`.optJSONObject`但我从未使用过它。选择适合你的。

**编辑**

根据您对使用 Graph API 的解决方案的请求，我正在编辑早期的解决方案并将其替换为 Graph API 解决方案。

最好在 中`AsyncTask`使用此代码`doInBackground`：

```
String URL = "https://graph.facebook.com/" + THE_USER_ID + "?fields=cover&access_token=" + Utility.mFacebook.getAccessToken();

String finalCoverPhoto;

try {

    HttpClient hc = new DefaultHttpClient();
    HttpGet get = new HttpGet(URL);
    HttpResponse rp = hc.execute(get);

    if (rp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
        String result = EntityUtils.toString(rp.getEntity());

        JSONObject JODetails = new JSONObject(result);

        if (JODetails.has("cover")) {
            String getInitialCover = JODetails.getString("cover");

            if (getInitialCover.equals("null")) {
                finalCoverPhoto = null;
        } else {
            JSONObject JOCover = JODetails.optJSONObject("cover");

            if (JOCover.has("source"))  {
                finalCoverPhoto = JOCover.getString("source");
            } else {
                finalCoverPhoto = null;
            }
        }
    } else {
        finalCoverPhoto = null;
    }
} catch (Exception e) {
    // TODO: handle exception
} 
```

我已经测试了这个解决方案并且工作得很好。您必须`fields`在基本 URL 中添加活动所需的任何附加内容。为了测试，我只使用了`fields=cover`

并在 中`onPostExecute`，做你的事情来显示封面图片。希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-20T11:44:19.867

**注意**：使用 Facebook API 和端点获取封面照片`https://graph.facebook.com/me?fields=cover`不再适用于 2014 年 12 月 20 日。

它应该给出以下响应：

```
{
   "cover": {
   "cover_id": "10151008748223553",
   "source": "http://sphotos-a.ak.fbcdn.net/hphotos-ak-ash4/s720x720/391237_10151008748223553_422785532_n.jpg",
   "offset_y": 0
   },
   "id": "19292868552"
} 
```

但现在它只给出了用户的`id`：

```
{
  "id": "19292868552"
} 
```

使用[Graph Tool explorer 2.2](https://developers.facebook.com/tools/explorer/)验证了这一点`me?fields=cover`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T03:43:43.583

您已经有了封面照片 Url，只需从 Json 数组中读取该字符串，您就可以从该字符串中获取封面照片。这是封面照片的网址

```
"source": "http://sphotos-a.ak.fbcdn.net/hphotos-ak-ash4/s720x720/391237_10151008748223553_422785532_n.jpg", 
```

像这样，您可以从 Json 对象中获取图像 URL。

```
String cover_photo = JsonObject.getString("source"); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-03T16:06:32.407

我在我的应用程序中实现了类似的功能。我就是这样做的，使用 FQL：

```
String cover_photo = jsonObj.getJSONObject("pic_cover").getString("source"); 
```

这提供了封面照片的 url，因为`source`标签嵌套在`pic_cover`对象中，然后可以`ImageView`使用 Universal Image Loader 之类的库将其设置为

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-17T18:22:57.187

```
object.getJSONObject("cover").getString("source") 
```

# html - 可扩展的 DIV 取决于视口

> ID：12434266
> 
> 赞同：1
> 
> 时间：2012-09-15T03:27:16.670
> 
> 标签：html, css, height, percentage, expandable

我试图制作一个宽度和高度将根据视口按比例缩小或扩大的 div。正如您在上面的示例中看到的那样，此方法只会使我的 div 水平扩展而不是垂直扩展（固定高度）。如果我尝试为包装器或 main_content 的高度值提供百分比，浏览器会简单地忽略高度值，除非它们以像素或 em 为单位给出。我怎样才能使这项工作？在我的脑海中，如果我可以给我的 div 的高度一个百分比值，这会解决问题吗？

```
<div class=".wrapper">
  <div id="main_content"></div>
<div>

.wrapper{
   width: 80%;
   margin : 0 auto;
}

#main_content{
  width : 100%;
  height : 500px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:56:10.220

## 简短的回答：

```
html, body {
    height: 100%;
} 
```

## 长答案：

你`html`和`body`也是容器，它们的高度会随内容自动缩放。不幸的是，当你`height: 100%`在你的包装器中设置时，高度被设置为容器的 100%，它自动是你的包装器的高度，没有填充和边距。然后解决方案是将高度设置为`html`其父级的 100%，实际`document`然后将主体的高度设置为其父级的 100% `html`，. 然后您的包装器将能够设置为文档高度的百分比。

# c# - Html 锚标记的 href 值呈现怪异

> ID：12434272
> 
> 赞同：1
> 
> 时间：2012-09-15T03:28:51.353
> 
> 标签：c#, asp.net, html, master-pages

我想根据某些事情动态分配href值，重要的是要提到我有一个母版页，url路由并且我正在分配绝对路径（如[http://www.stackoverflow.com/questions/](http://www.stackoverflow.com/questions/) .. .)。

我尝试了以下方法：

```
<a href="<%= DynamicURL%>">testing urls</a>
<asp:HyperLink runat="server" ID="hpLink">this teset brouw</asp:HyperLink> 
```

在后面的代码中

```
hpLink.NavigateUrl = "http://www.someurl.com/morepath/morethisngs"; 
```

我也试过这个

```
<a runat="server" id="aAccesories">Testing ...</a> 
```

在后面的代码中我这样做：

```
 aAccesorios.HRef = "http://www.someurl.com/morepath/morethisngs"; 
```

当我看到链接呈现这样的 html 源代码时，我尝试过什么：

```
http://localhost:10027/projectTest/\www.someurl.com/morepath/morethisngs 
```

所以我无法创建绝对路径或绝对 URL，不管我尝试了什么，这很奇怪不是吗？我将域添加到 url，然后删除 http://，然后添加我想要的路径

希望你能帮助我，谢谢！

# python - DLL 加载失败: %1 不是有效的 win32 应用程序

> ID：12434283
> 
> 赞同：4
> 
> 时间：2012-09-15T03:33:23.380
> 
> 标签：python, c, extension-modules

所以我有一种情况，我需要制作二进制补丁，然后能够从 python 中应用它们。我发现[bsdiff](http://www.daemonology.net/bsdiff/)看起来像一个很棒的算法并且有一个[python 扩展模块](http://starship.python.net/crew/atuining/cx_bsdiff/index.html)，但是那个扩展模块没有超过 Python 2.5 的 Windows 安装程序

好吧，所以我从来没有认真地写过 C，更不用说尝试了一个 python 扩展模块，我开始自己编译它。在用 MinGW32 解决 DLL 加载错误几个小时后，我设法使用项目源代码中提供的 setup.py 对其进行编译和构建。但是，在导入生成的 bsdiff 模块后，我得到：

`ImportError: DLL load failed: %1 is not a valid Win32 application.`

我正在运行 64 位 python。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-02-09T12:01:24.463

这是 Python 和 pywin32 版本的不匹配。使用 easy_install 在虚拟环境中安装 pywin32 后，我收到了相同的错误消息： `(py351env) C:\Users\ernesto.luzon\Downloads>easy_install pywin32-220.win-amd64-py3.5.exe`

当我尝试导入 win32gui 时，我得到了完全相同的错误： `DLL Load Failed: %1 is not a valid win32 application`

谷歌搜索错误消息让我看到了这篇文章，cgohlke 建议从这里下载 pywin32 包：[http ://www.lfd.uci.edu/~gohlke/pythonlibs/#pywin32](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pywin32)

我下载了64位版本并通过pip安装： `pip install pywin32-220-cp35-none-win_amd64.whl`

我立即收到一条错误消息，指出我的 python 版本与我尝试安装的包不匹配。所以我在命令行中输入了“python”来启动解释器，实际上安装在我的 64 位机器上的 python 是一个 32 位的 python。卸载python并正确安装64位后，这个错误消失了，无论我是使用easy_install从sourceforge项目安装pywin32，还是我使用pip从gohlke安装wheel文件。

# javascript - ng-switch 空字符串

> ID：12434284
> 
> 赞同：15
> 
> 时间：2012-09-15T03:33:36.937
> 
> 标签：javascript, angularjs

我正在使用 Angular，我想使用 ng-switch 检查字符串何时为空。以下代码似乎对我不起作用。

```
<div ng-switch on="foo">
    <span ng-switch-when="">This string is empty</span>
    <span ng-switch-default>This string is not empty</span>
</div> 
```

对此的任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2014-04-01T13:54:55.267

```
<div ng-switch on="foo || 'null'">
    <span ng-switch-when="null">This string is empty</span>
    <span ng-switch-default>This string is not empty</span>
</div> 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-15T06:31:35.827

您需要在控制器中包含空字符串：

```
function Ctrl($scope) {
  $scope.items = ['', 'other'];
  $scope.selection = $scope.items[0];
} 
```

有关其他参考，请参阅 API：[http ://docs.angularjs.org/api/ng.directive:ngSwitch](http://docs.angularjs.org/api/ng.directive:ngSwitch)

此外，这是您的代码的工作版本：http: [//jsfiddle.net/upPgU/](http://jsfiddle.net/upPgU/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-06-02T16:14:16.207

Angular.js ng-switch的明确欺骗[--- 测试 value 是 empty 还是 undefined](https://stackoverflow.com/questions/25453689/angular-js-ng-switch-testing-if-value-is-empty-or-undefined)。

接受的答案在那里也不理想。在我的拙见中，最优雅和最清晰的解决方案在那里得到的支持最少。

```
<div ng-switch="!!selection">
   <div ng-switch-when="false">Empty, Null or undefined</div>
   <div ng-switch-when="true">The string is not empty</div>
</div> 
```

# ruby-on-rails - Rails - 如何保护外键并仍然允许关联选择

> ID：12434286
> 
> 赞同：2
> 
> 时间：2012-09-15T03:34:01.620
> 
> 标签：ruby-on-rails, ruby-on-rails-3, security

为简单起见，假设我有一个简单的 has-many-through 关系

```
class User < ActiveRecord::Base
  has_many :courses, :through => :registrations
end

class Registration < ActiveRecord::Base
  belongs_to :user
  belongs_to :course
end

class Course < ActiveRecord::Base
  has_many :users, :through => :registrations
end 
```

我想保证我的应用程序安全，所以我`attr_accessible`习惯将我的属性列入白名单。

我的问题是双重的：

1.  我将如何设置我的白名单属性，以便我可以通过表单创建一个新的 Registration 对象（传入`:user`and `:course`，但不会冒险允许这些外键稍后被恶意更新？

2.  我将如何设置我的验证，以便`belongs_to`需要两个关联但也允许在嵌套表单中创建注册对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:07:22.247

## 回答第一个问题

一种解决方案是您可以将`:user`and标记`:course`为只读。

```
attr_readonly :user_id, :course_id 
```

这样就可以在创建时设置它们，但不能在更新时设置它们。如果您希望它们将来可以更新，您可以在注册模型上创建一个特殊的方法，`@registration.update_dangerous_stuff(params)`并且只在具有更高权限的用户可以访问的控制器操作中使用此方法。该方法将使用类似的东西`update_column`来改变这些字段。

另一种方法是创建用于设置用户和课程的虚拟属性，这些属性具有决定是否可以设置用户或课程的逻辑。这是一个例子。

```
attr_accessor :safe_user, :safe_course
attr_accessible :safe_user, :safe_course

before_save :set_user, if: 'user.blank?'
before_save :set_course, if: 'course.blank?'

def set_user
  self.user = safe_user
end

def set_course
  self.course = safe_course
end 
```

因此，在您将使用`safe_user`and`safe_course`字段而不是`user`and的表单中`course`。在这种情况下，它只会设置实际的`user`并且`course`如果它们是空白的，并且它们实际上从未公开为可访问的。您可以通过使用回调条件来绕过此规则。

## 回答第二个问题

当您以复杂的形式提交一堆数据时，您需要想出一种方法来判断这些数据中哪些是有意义的，哪些只是一个占位符。如果没有提交有意义的数据，就不要创建注册。您必须决定哪些表单字段“足以”看到有人实际上尝试填写它们并犯了错误，而不是有人甚至从未接触过嵌套表单的情况。如果没有简单的方法来确定 - 一种方法是在嵌套表单中添加一个复选框“添加此注册”。如果选中该复选框 - 将尝试创建并运行验证。之后，您可以添加一些 javascript 来隐藏此复选框，并在有人激活嵌套表单中的任何字段时自动检查它。

为了在后端促进这种行为，你有`accepts_nested_attributes_for` [rails 方法](http://api.rubyonrails.org/classes/ActiveRecord/NestedAttributes/ClassMethods.html)。例如，您可以在课程模型中说如下内容。

```
accepts_nested_attributes_for :registrations,
  reject_if: -> attrs { attrs[:name].blank? }

# Don't forget this too 
attr_accessible :registrations_attributes 
```

Rails 还提供了一个快捷方式。

```
accepts_nested_attributes_for :registrations, reject_if: :all_blank 
```

在复选框的情况下，您可以说`reject_if: -> attrs { attrs[:my_check_box] == '1' }`，等等。

告诉rails`reject_if`如果不满足给定过程中的条件，它将简单地忽略注册，而不是尝试创建和验证它。

希望这能给你一些想法。

# java - 使用 FileInputStream 时出现 FileNotFoundException

> ID：12434292
> 
> 赞同：2
> 
> 时间：2012-09-15T03:35:48.483
> 
> 标签：java, filenotfoundexception, fileinputstream

我正在尝试访问我包含在 jar 中的文件。

我的代码开头如下：

```
import java.io.*;
import java.net.*;

public class intro {
public static void main(String[] args) throws IOException{

    URL jarUrl = intro.class.getResource("myFile.jar");
    File myJar = new File(jarUrl.toString());

    FileInputStream fis = new FileInputStream(myjar);
} 
```

我收到以下错误：

```
Exception in thread "main" java.io.FileNotFoundException: file:\...myFile.jar (The filename, directory name, or volume label syntax is incorrect)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(Unknown Source)
at intro.main(intro.java:10) 
```

查找 URL 或初始化文件似乎没有问题，但我无法让 FileInputStream 工作。有人知道我做错了什么吗？帮助将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T03:39:08.080

您不能以这种方式访问​​ Jar'ed 资源。Jar 中的文件不是一个`File`（即文件系统文件中的文件），它们是不同的概念。

您应该`URL.openStream`改用。

```
InputStream is = null;
try {
    is = jarURL.openStream();
    // ... Read from stream
} catch (IOException exp) {
} finally {
    try {
      if (is != null) {
        is.close();
      }
    } catch (Exception exp) {
    }    
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T03:47:04.707

您的方法在许多层面上都不正确：

1.  这是错误的，因为 URL 不是文件名：

    ```
    File myJar = new File(jarUrl.toString()); 
    ```

    假设`jarUrl`有 type `java.net.URL`，它应该写成：

    ```
    File myJar = new File(new URI(jarUrl)); 
    ```

2.  这是错误的，因为它会（假设`myJar`是正确的）将 JAR 文件作为字节流打开：

    ```
    FileInputStream fis = new FileInputStream(myJar); 
    ```

    实际上，您需要使用 JAR/ZIP 文件类打开它，然后使用它们打开 JAR 包含的文件上的流。它应该是这样的：

    ```
    ZipFile zip = new ZipFile(myJar);
    ZipEntry entry = zip.getEntry(filePathInZip);
    InputStream is = entry.getInputStream(); 
    ```

    （我省略了所有必要的异常处理和代码来关闭事物以防止资源泄漏。）

3.  这看起来是一个错误的 URL：

    ```
    file:\...myFile.jar 
    ```

    反斜杠和三个点是什么？格式正确的 URL 不会使用`\`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T03:51:05.253

如果这是已知资源，您可以使用：

```
InputStream is =intro.class.getResourceAsStream("myFile.jar"); 
```

当他们说你做错了时，其他答案会做出一些假设。但令人怀疑的是，您首先尝试将 Jar 作为资源，然后作为文件......

另外，请参见：[getResourceAsStream() vs FileInputStream](https://stackoverflow.com/questions/2308188/getresourceasstream-vs-fileinputstream)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T05:16:44.643

我不会拐弯抹角，直接开门见山。你不能以这种方式访问​​ jar 内的文件。而是尝试以下代码。

```
URL jarUrl = intro.class.getResource("myFile.jar");
InputStream is = null;
String s = new String();

try {
       is = jarURL.openStream();
       Scanner scan = new Scanner(is);

       while(scan.hasNextLine){    
          s = scan.nextLine() + s;    
       }       
 } catch (IOException exp) {
 } finally {        
     is.close();
 } 
```

# java - 在 Servlet 中提交没有页面刷新的表单

> ID：12434295
> 
> 赞同：0
> 
> 时间：2012-09-15T03:36:19.060
> 
> 标签：java, jquery, ajax

```
<script type="text/javascript">
$(document).ready(function()
{ 
    $('.ibutton').click(function() 
    {
           var ajaxdata=$("#country").val();
           var value = "country="+ajaxdata;            
           $.ajax({
                        url: "saveIt",         
                        type: "POST",                           
                        data: value,
                        cache: false,
                        success: function(data){ 
                                      alert("load success");              
                                }
                    });return false;  
    });   
});

</script> 
```

朋友们，我关注了每件事，但它不起作用，提交后，我无法发送 servlet 请求，保存这是我的 url 模式，请帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T04:21:25.617

你可以试试这个：

```
$(document).ready(function() {
    $('.ibutton').click(function(e) {
        e.preventDefault();  // add preventDefault()
        var ajaxdata = $("#country").val();

        // don't send data like this
        // var value = "country=" + ajaxdata;
        // try like below, as an object
        var value = {'countr' : ajaxdata};

        $.ajax({
            url: "saveIt",
            type: "POST",
            data: value,
            cache: false,
            success: function(data) {
                alert("load success");
            }
        });
    });
}); 
```

### 笔记

尝试`POST`通过 firebug 或其他类型的调试器调试请求，使其正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:43:19.513

您将不得不阻止表单提交事件的默认行为。

```
$( function () {
$("#ajax-form").submit(function(event){
  // fire Ajax
  $.post( "/saveIt", { country: $("#country").val() }, function (data) {} );
  event.preventDefault();
});
} ); 
```

# php - 在模板中查找方法并显示结果

> ID：12434297
> 
> 赞同：2
> 
> 时间：2012-09-15T03:36:25.010
> 
> 标签：php, mysql, frameworks, pdo, fat-free-framework

*   我正在使用具有 265 个字段和 5000 多行的 MySQL 数据库构建一个站点；
*   我可以轻松地加载（）特定记录，没有问题。
*   使用 find()、afind() 甚至“select()”时，模板将显示空白行或带有“填充”文本的行，查询结果的行数正确，但没有来自数据库的文本/数据本身;
*   无论是使用对象还是仅使用结果中的数组（afind() 和 find()），都存在同样的问题。我已经从示例和文档中逐字复制/粘贴代码，仅更改了数据库特定项目。尽管如此，还是没有运气。

**PHP 文件中的代码（来自 CLASS 的函数）：**

```
static function home() {
    $featured=new Axon('boats');
    $F3::set('boatlist',$featured->afind('D_CustomerID=173'));
    F3::set('content',TEMPLATE_DIR .'/home.html');
    echo Template::serve(TEMPLATE_DIR .'/layout.html');

} 
```

**模板 home.html:**

```
<div class="span8">
<h3>
    Featured Boats
</h3>
<F3:repeat group="{{@boatlist}}" value="{{@boat}}">
<div style="margin-left: 2em" class="thumbnails">
    <p>
        <a href="boat/{{@boat['D_BoatNum']}}">{{(trim(@boat['D_Description']))}}</a> by {{@boat['D_CustomerID']}}
    </p>
    <p>
        {{@boat['D_Price']}}
    </p>
</div>
</F3:repeat>
</div> 
```

这产生的行数与数据库中正确的行数一致。但是，每个字段的实际数据并未显示。

# integer - 在给定总数、部分数和最大和数的情况下查找整数分区的数量

> ID：12434300
> 
> 赞同：2
> 
> 时间：2012-09-15T03:37:45.167
> 
> 标签：integer, combinatorics, number-theory

我正在寻找总共 N 的整数分区数，其中有多个部分 S，最大部分正好是 X，但没有枚举所有部分。

例如：所有 100 的分区有 10 个部分和 42 作为最大部分。

我没有找到解决这个问题的定理或划分恒等式，我怀疑这是一个不容易从已知定理推导出来的非平凡问题（例如 Nijenhuis 和 Wilf 1978，Andrews et al. 2004，Bona 2006）：

例如：N 中恰好 S 部分的分区数等于 N 中恰好 S 为最大部分的分区数。

这个问题与我的研究有关，这远远超出了纯数学。

**更新**：这个问题在下面得到了回答，但我想发布我用来实现它的 Python 脚本。我可能会推动它通过 Cython 以获得一些速度。

```
n = 100 # the total
s = 10  # number of parts
x = 20  # largest part
print Partitions(n,length=s,max_part=x).cardinality() # Sage is very slow at this

def parts_nsx(n,s,x):
    if n==0 and s==0:return 1
    if n<=0 or s<=0 or x<=0:return 0
    if n>0 and s>0 and x>0:
        _sum = 0
        for i in range(0,s+1):
            _sum += parts_nsx(n-i*x, s-i, x-1)
        return _sum    
print parts_nsx(n,s,x) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T14:25:49.227

对于这个数量的分区递归`P(n,s,x)`成立：

```
P(n,s,x) = sum P(n-i*x, s-i, x-1), for i=0,...,s 
P(0,0,x) = 1
P(n,s,x) = 0, if n <= 0 or s <= 0 or x <= 0 
```

计算效率不高，也许在你的例子中它会足够快。

最好使用 memoization 来实现。

**编辑：**

带记忆的 Python 实现：

```
D = {}
def P(n,s,x):
  if n > s*x or x <= 0: return 0
  if n == s*x: return 1
  if (n,s,x) not in D:
    D[(n,s,x)] = sum(P(n-i*x, s-i, x-1) for i in xrange(s))
  return D[(n,s,x)]

P(100, 10, 42)
2685871 
```

**更新：**

满足参数的分区`n,s,x`可以具有`i`最大大小的分区`x`。通过删除这些`i`具有大小的部分，`x`我们会遇到与参数相同的问题 `n-i*x, s-i, x-1`。例如，100 个分区，有 10 个部分，最大部分为 42，可以有 0、1 或 2 个大小为 42 的部分。

`P(0,0,x) = 1`意味着我们在之前的迭代中已经有了分区。

`P(n,s,x) = 0, if n>s*x`意味着我们不能用最大大小的所有分区对 n 进行分区，因此不可能组合参数。边界条件是

# eclipse - 我如何在eclipse中使用axis2作为运行时

> ID：12434305
> 
> 赞同：1
> 
> 时间：2012-09-15T03:39:17.647
> 
> 标签：eclipse, web-services, axis2

我正在尝试使用axis2从pojo生成Web服务。但是在 Eclipse 中，我无法生成服务，因为确定按钮被禁用。我该如何启用它？

![蚀](../Images/80eac80c0aaed691b687819147c50856.png)

当我尝试启用 Axis2 Web 服务方面时，我收到此错误“Axis2 Web 服务 core1.1 需要具有版本匹配表达式“2.2、2.3、2.4、2.5”的动态 Web 模块。” 这是什么意思？

有没有其他方法可以将 pojo 转换为复杂数据类型的 web 服务？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T05:13:33.680

这意味着当您创建一个新的 Web 项目时，在向导的第一步中，您有一个组合框，允许您选择动态 Web 模块版本。您应该选择它建议您选择的版本之一。

# algorithm - 一般来说，恢复下载是如何工作的？

> ID：12434306
> 
> 赞同：5
> 
> 时间：2012-09-15T03:39:50.140
> 
> 标签：algorithm

我正在使用“Internet 下载管理器”。它能够从较早的暂停点恢复下载。其他下载管理器，例如 Firefox 也提供此功能。这些算法一般是如何工作的？他们通常如何跟踪他们离开的地方，并让服务器知道从哪里恢复？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T04:28:41.440

没有“算法”。

查看涵盖 HTTP/1.1 的[RFC 2616](http://www.w3.org/Protocols/rfc2616/rfc2616.html)，了解它具有的各种[范围](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35)支持；这就是客户端程序如何告诉服务器跳过数兆字节并因此“恢复”它停止的下载的方式。但是，服务器*可能会*忽略[范围检索请求](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.35.2)，从而阻止/禁止恢复下载。

记住在哪里恢复由客户端决定，但在某处被简单地存储为“已下载的字节数”字段。

# heroku - 我应该如何在公共仓库中处理 Cloudinary 的 cloudinary.yml？

> ID：12434314
> 
> 赞同：0
> 
> 时间：2012-09-15T03:42:07.047
> 
> 标签：heroku, assets, precompile, cloudinary

我正在尝试同时使用 Heroku 和 Cloudinary，但是由于配置变量不存在，因此 slug 编译不起作用。Cloudinary 需要一个环境变量或 cloudinary.yml。我不想将仓库设为私有仓库来存储 cloudinary.yml 文件。

我应该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-04-14T03:27:15.943

您现在可能已经找到了一个很好的解决方案，但以防万一，我建议您使用 Heroku 的环境配置。

在您的 cloudinary.yml 中使用环境变量：

```
production:
  cloud_name: sam-thornton
  api_key: <%= ENV["CLOUDINARY_API_KEY"] %>
  api_secret: <%= ENV["CLOUDINARY_API_SECRET"] %>
  enhance_image_tag: true
  static_image_support: true 
```

然后从终端设置您的 Heroku 配置：

```
heroku config:set CLOUDINARY_API_KEY=YOUR_KEY
heroku config:set CLOUDINARY_API_SECRET=YOUR_SECRET 
```

这样，您可以安全地将 cloudinary.yml 文件保存在公共存储库中（因此仍然可以与 Heroku 同步），而无需发布敏感信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:57:07.533

事实证明，附加`config.assets.initialize_on_precompile = false`将更正预编译。

# javascript - 从ajax请求中获取javascript对象

> ID：12434316
> 
> 赞同：3
> 
> 时间：2012-09-15T03:42:45.800
> 
> 标签：javascript, jquery

如何从 AJAX 响应创建 javascript 对象？

这就是我目前正在做的事情：

PHP：

```
<?
echo '{status:"1", site:"example.com"}';
?> 
```

JS：

```
success:function(data_response){
    var object = eval( data_response );
    console.log(object.url);
    }}); 
```

我目前在控制台上得到“未定义”。这是怎么做到的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T03:46:55.077

将`dataType`ajax 请求的 设置为`json`，`data_response`将是一个已经解析到的对象。

或者你也可以使用`$.getJSON`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T04:03:24.753

你也可以尝试这样的事情：

PHP

```
<?
echo json_encode(array("status"=>1,"site"=>"example.com"));
?> 
```

Ajax 在这里调用你在 JS 中的参数

```
$.ajax({
  url: url, // your url where the php is
  dataType: 'json', 
  data: data, //send data
//callback
  success: function(data_response){  
      alert(data_response.status);
      alert(data_response.site);
}
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T03:46:36.097

而不是使用内置的 php 来制作自己的 json 表示法`json_encode`

```
<?php
    return json_encode(array('status' => '1', 'site' => 'example.com'));
?> 
```

你也在记录`object.url`，但它应该是`object.site`.

您可能还需要将标题设置为 return`application/json`而不是`text/html`. 这也可以通过`dataType`在 AJAX 请求中指定 type 参数来完成`json`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T04:09:26.713

如果要使用 解析原始对象字符串`eval`，则必须将对象表示法代码包装在括号中：

```
var object = eval( '(' + data_response + ')' ); 
```

以下将阻塞解析器：

```
eval('{status:"1", site:"example.com"}') 
```

但这将按您的预期工作：

```
eval('({status:"1", site:"example.com"})') 
```

**编辑：**请注意，我不一定赞同这个解决方案。这只是为了让您了解*如果*要使用`eval`.

# bash - 从 bash 控制台重启服务器

> ID：12434327
> 
> 赞同：3
> 
> 时间：2012-09-15T03:44:04.857
> 
> 标签：bash, pythonanywhere

有没有办法从`bash`浏览器中给出的控制台中重新启动 Web 服务器`PythonAnywhere`？我已经搜索了谷歌一段时间，并没有找到任何相关的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T08:45:04.260

您的每个 Web 应用程序都有一个文件，位于`/var/www`. 文件的命名应该明确哪个文件适用于哪个 Web 应用程序。

类型

```
touch /var/www/<filename> 
```

（其中 <filename> 是您要重新启动的 Web 应用程序的文件名），服务器会注意到文件的修改日期已更改并重新启动您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-14T14:16:50.900

正如 harry 所引用的，在 PA 论坛上 PythonAnywhere 工作的人之一[https://www.pythonanywhere.com/forums/topic/89/#id_post_4289](https://www.pythonanywhere.com/forums/topic/89/#id_post_4289)

> 触摸 /var/www/you-domain-wsgi.py 中的文件将重新加载您的 Web 应用程序工作人员，因此这将了解您所做的任何代码更改，但请注意它不会执行其他操作特别是，该按钮不会获​​取您所做的任何新的静态文件目录映射。

要执行完全重新加载，您可以在 github 上使用[此脚本。](https://github.com/ayys/pareload#)

`git clone https://github.com/ayys/pareload.git`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-03-02T01:38:58.983

PythonAnywhere 此后添加了一个[API](https://help.pythonanywhere.com/pages/API)以及许多[帮助脚本](https://github.com/pythonanywhere/helper_scripts)，包括从控制台重新加载 web 应用程序的脚本：

```
pip3.5 install --user pythonanywhere
pa_reload_webapp.py <domain> 
```

请务必在运行脚本之前[生成 API 令牌。](https://www.pythonanywhere.com/user/generaladmission/account/#api_token)

# c - Win32如何给整个屏幕上色纯色

> ID：12434328
> 
> 赞同：1
> 
> 时间：2012-09-15T03:44:10.870
> 
> 标签：c, winapi, background-color

```
 RECT rect;
    HWND hwnd = GetDesktopWindow();
    LockWindowUpdate(hwnd);
    HDC hdc = GetDC(hwnd);
    HBRUSH hbrush = CreateSolidBrush(RGB(255,0,0));
    GetWindowRect(hwnd, &rect);
    FillRect(hdc, &rect, hbrush); 
```

这是我之前的尝试，什么也没做。为了清楚起见，我正在尝试将整个屏幕着色为纯色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T03:49:57.027

此代码使用 GDI（您似乎正在使用）工作：

```
#include <windows.h>

int main() {
    HDC screenDC = GetDC(NULL); //NULL gets whole screen
    HBRUSH brush = CreateSolidBrush(RGB(255,0,0)); //create brush
    SelectObject(screenDC, brush); //select brush into DC
    Rectangle(screenDC, 0, 0, GetSystemMetrics(SM_CXSCREEN), GetSystemMetrics(SM_CYSCREEN)); //draw rectangle over whole screen
    //clean up stuff here
    return 0;
} 
```

这只是一个例子，而不是一个强大的解决方案。例如，选择之前的刷回DC总是一个好主意。释放 DC 也是如此。另一种选择是在您可以用来绘制的所有内容之上放置一个全屏窗口。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T08:50:42.303

创建一个全屏窗口（不仅最大化，而且覆盖多个显示器的整个工作区）并将其涂成白色。

这是其他全屏图形应用程序（游戏、屏幕保护程序等）所做的。

# javascript - YUI3 IO 实用程序可以根据给定的内容类型标头值自动序列化数据吗？

> ID：12434330
> 
> 赞同：0
> 
> 时间：2012-09-15T03:44:22.460
> 
> 标签：javascript, yui

这是我的代码：

```
 data[this.getColumn().key] = oNewValue;
  request = Y.io("admin/api/inventory/" + encodeURIComponent(this.getRecord().getData()._id), {
    method: "PUT",
    headers: { 'Content-Type': 'application/json'},
    data: data,
    on: {
      success: function () {
        fnCallback(true, oNewValue);
      },
      failure: function () {
        fnCallback(false, oNewValue);
      }
    }
  }); 
```

数据对象等于`{price: 1200}`.

现在，`{price: 1200}`被序列化为`price=1200`（我什至不知道它是怎么发生的）。显然，这不是 JSON。

现在我可以手动`data`将数据字符串化为 json 字符串，但我想知道 YUI 是否具有将数据自动字符串化为 json 的功能。理想情况下，我只想给`data`并设置 json 内容类型以及 YUI 为我字符串化的数据。

可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T13:23:05.897

Y.io 并不知道您希望发送 JSON 数据，因此它将任何对象转换为与您发送表单时所获得的基本相同的东西（表单编码）。

如果你想进入自动序列化，我建议你看看 Y.Model 和 Y.ModelSync.REST。它为您处理所有 IO，并大大简化了代码。

[http://yuilibrary.com/yui/docs/model/](http://yuilibrary.com/yui/docs/model/)

具体来说：http: [//yuilibrary.com/yui/docs/model/#model-sync-layers](http://yuilibrary.com/yui/docs/model/#model-sync-layers)

# c# - 如何保存到外部配置文件

> ID：12434331
> 
> 赞同：1
> 
> 时间：2012-09-15T03:45:08.697
> 
> 标签：c#, .net, app-config

在 ABC.exe.config (app.config)

```
<configuration>
    <appSettings file="MySettings.config">
        <add key="setting1" value="1" />
    </appSettings>
<configuration> 
```

这里我使用“file”属性，而不是“configSource”，因为我想定义默认值。如何保存到外部配置文件“MySettings.config”？我必须保持“ABC.exe.config”不变，因为它会在程序升级时被覆盖，恕不另行通知。所有全局设置都必须保存在“MySettings.config”中

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T05:42:40.947

[MSDN文档](http://msdn.microsoft.com/en-us/library/system.configuration.appsettingssection.file.aspx)中有一个示例，方法是自己处理对文件的写入，例如，将其视为“常规”XML 文件。

# arrays - 在 O(1) 时间内找到未排序数组的两个索引之间的最大值

> ID：12434332
> 
> 赞同：2
> 
> 时间：2012-09-15T03:45:12.790
> 
> 标签：arrays, search

在一个未排序的数组中，（我们可以预处理这个数组）。我们如何在 O(1) 时间内回答以下查询？从索引 i 到 j 找到最大值

**编辑：**预处理可能需要 O(n) 时间和 O(n) 额外内存的顺序，因此经常出现的查询会在 O(1) 时间内得到回答......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:50:25.557

没有内存限制或预处理限制？只需制作一个 O(n ²`i` ) 表，其中包含每个可能的答案（即和的每个可能值对应一个条目`j`）。这张表可以在 O(n ³ ) 时间内简单地制作，并且可以通过增量计算最大值很容易地降低到 O(n ^(2 )。)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:08:44.260

这个问题（称为 Range Minimum Query 问题）得到了解决（O(n) 预处理，O(1) 查询）。来自[维基百科](http://en.wikipedia.org/wiki/Range_Minimum_Query)：

> 众所周知，O(n) 时间的预处理足以在 O(1) 时间内回答后续查询。结果方案的空间实际上非常小，即 O(n) 位（参见 Fischer & Heun (2007)）。

RMQ 问题与您的问题完全相同（只需将“最小值”替换为“最大值”）。请参阅[http://wcipeg.com/wiki/RMQ#Cartesian_trees](http://wcipeg.com/wiki/RMQ#Cartesian_trees)以获取算法草图及其正确性和内存/时间保证的证明。

另请参阅此[TopCoder 教程](http://community.topcoder.com/tc?module=Static&d1=tutorials&d2=lowestCommonAncestor#Range_Minimum_Query_%28RMQ%29)，了解可用于解决此问题的不同选项的概述，这些选项基本上是按实现复杂性递增的顺序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T07:56:40.373

这是不可能的。您将需要遍历数组以找到需要 O(n) 的最大值，或者您需要通过对数组进行排序（比 O(n) 更昂贵）或确定所有可能范围的最大值来预先计算will 比 O(n) 更昂贵，并且需要太多的内存。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-15T03:50:49.123

除非您的预处理可以大于 O(1)，否则不可能。排序有什么问题？这只是 O(n*log(n)) （如果允许基数排序，则为最大 O(n)）。

# asp-classic - YouTube API v2 Classic ASP 无法删除视频

> ID：12434334
> 
> 赞同：0
> 
> 时间：2012-09-15T03:45:31.717
> 
> 标签：asp-classic, youtube-api

我正在尝试使用 YouTube API v2 删除视频。我已经能够上传视频，所以我相信我正在正确构建请求，但在删除上传的视频时遇到了麻烦。当我发送请求时，我收到以下错误：

```
400: Bad Request
GDataParseException
Premature end of file. 
```

这是我通过 API 发送的内容：

```
Call objXMLHttp.open("PUT", "https://gdata.youtube.com/feeds/api/users/" & strYTUser & "/uploads/" & strVideoID, False)
Call objXMLHttp.setRequestHeader("DELETE", "/feeds/api/users/" & strYTUser & "/uploads/" & strVideoID & " HTTP/1.1")
Call objXMLHttp.setRequestHeader("Host", "gdata.youtube.com")
Call objXMLHttp.setRequestHeader("Authorization", "Bearer " & strAccessToken)
Call objXMLHttp.setRequestHeader("GData-Version", 2)
Call objXMLHttp.setRequestHeader("X-GData-Key", "key=" & strDevKey)
' Call objXMLHttp.setRequestHeader("Content-Length", 0)
Call objXMLHttp.setRequestHeader("Content-Type", "application/atom+xml; charset=UTF-8")
Call objXMLHttp.Send("") 
```

我正在使用文档作为参考，我尝试搜索但找不到有用的东西，所以我不知道我错过了什么。

[https://developers.google.com/youtube/2.0/developers_guide_protocol_updating_and_deleting_videos#Deleting_a_video](https://developers.google.com/youtube/2.0/developers_guide_protocol_updating_and_deleting_videos#Deleting_a_video)

任何提示/线索/等，将不胜感激！提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:56:47.660

根据给定的示例：

```
DELETE /feeds/api/users/default/uploads/VIDEO_ID HTTP/1.1
Host: gdata.youtube.com
Content-Type: application/atom+xml
Authorization: Bearer ACCESS_TOKEN
GData-Version: 2
X-GData-Key: key=DEVELOPER_KEY 
```

请求调用应该如下：

```
objXMLHttp.open "DELETE", "https://gdata.youtube.com/feeds/api/users/" & strYTUser & "/uploads/" & strVideoID, False
objXMLHttp.setRequestHeader "Host", "gdata.youtube.com"
objXMLHttp.setRequestHeader "Content-Type", "application/atom+xml"
objXMLHttp.setRequestHeader "Authorization", "Bearer " & strAccessToken
objXMLHttp.setRequestHeader "GData-Version", 2
objXMLHttp.setRequestHeader "X-GData-Key", "key=" & strDevKey
objXMLHttp.Send 
```

# java - JasperPrint 使应用程序崩溃

> ID：12434346
> 
> 赞同：0
> 
> 时间：2012-09-15T03:48:21.073
> 
> 标签：java, jsf-2, jasper-reports

在我的 Web 应用程序中，我正在使用*JasperReports*生成一些报告。在我的托管 bean 中，我有以下报告生成代码：

```
public void generateReport(ActionEvent e) { // Inside a Managed Bean
    try {
        pathReport = ReportHelper.reportPath(FacesContext.getCurrentInstance(), "rep_attendees.jasper");
        Map<String, Object> param = new HashMap<String, Object>();
        param.put("EVENT_ID", getEvent().getId());
        param.put("START_DATE", null);
        param.put("END_DATE", null);
        try {
            Properties connectionProps = new Properties();
            connectionProps.put("user", "root");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/MyDB", connectionProps);
            pdfFile = ReportHelper.generateReport(pathRelatorio, parametros, con);
        } catch (Exception ex) {
            log.error(ex.getMessage());
        }
    } catch (Exception ex) {
        log.error(ex.getMessage());
    }

} 
```

ReportHelper 的代码：

```
public class ReportHelper {

    private static final Logger log = Logger.getLogger(RelatorioHelper.class);

    public static byte[] generateReport(String path, Map<String, Object> param, Connection con) throws FileNotFoundException, JRException, Exception {

        JasperReport rep = null; // 1
        JasperPrint print = null; // 2
        byte[] pdf = null; // 3
        try {
            rep = buildReport(path); // 4
            print = loadReport(rep, param, con); // 5 NEVER RETURNS
            pdf = JasperExportManager.exportReportToPdf(print); // 6 Don't reach this line
        } catch (Exception e) {
            log.error(e.getMessage());
            throw e;
        }
        return pdf;
    }

    public static String reportPath(FacesContext context, String reportName) {
        String repPath = ((ServletContext) context.getExternalContext().getContext()).getRealPath("/resources/reports/") + "/" + reportName;
        return repPath;
    }

    private static JasperReport buildReport(String path) throws FileNotFoundException, JRException {
        return (JasperReport) JRLoader.loadObject(new File(path));
    }

    private static JasperPrint loadReport(JasperReport report, Map<String, Object> param, Connection con) throws JRException {
        return JasperFillManager.fillReport(report, param, con);
    }
} 
```

这是报告xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="SisEventos_RelatorioEvento" language="groovy" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20">
<property name="ireport.zoom" value="1.0"/>
<property name="ireport.x" value="0"/>
<property name="ireport.y" value="0"/>
<parameter name="DATA_INICIO" class="java.util.Date" isForPrompting="false">
    <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
</parameter>
<parameter name="DATA_TERMINO" class="java.util.Date" isForPrompting="false">
    <defaultValueExpression><![CDATA[null]]></defaultValueExpression>
</parameter>
<parameter name="ID_EVENTO" class="java.lang.Integer" isForPrompting="false">
    <defaultValueExpression><![CDATA[1]]></defaultValueExpression>
</parameter>
<queryString>
<![CDATA[select idt_evento, nme_evento, dta_inicio_evento, dta_termino_evento, nme_participante, eml_participante from tb_inscricao as t1
 inner join tb_evento as t2 on t1.cod_evento = t2.idt_evento
 inner join tb_participante as t3 on t1.cod_participante = t3.idt_participante
  where (t1.cod_evento = $P{ID_EVENTO} and $P{DATA_INICIO} is not null and $P{DATA_TERMINO} is not null and t2.dta_inicio_evento between $P{DATA_INICIO} and      $P{DATA_TERMINO}) or (t1.cod_evento = $P{ID_EVENTO} and $P{DATA_INICIO} is null and $P{DATA_TERMINO} is not null and t2.dta_termino_evento <= $P{DATA_TERMINO}) or     (t1.cod_evento = $P{ID_EVENTO} and $P{DATA_INICIO} is not null and $P{DATA_TERMINO} is null and t2.dta_inicio_evento >= $P{DATA_INICIO}) or (t1.cod_evento = $P{ID_EVENTO} and $P{DATA_INICIO} is null and $P{DATA_TERMINO} is null)
group by t2.nme_evento order by t2.dta_inicio_evento asc;]]>
</queryString>
<field name="idt_evento" class="java.lang.Integer"/>
<field name="nme_evento" class="java.lang.String"/>
<field name="dta_inicio_evento" class="java.sql.Timestamp"/>
<field name="dta_termino_evento" class="java.sql.Timestamp"/>
<field name="nme_participante" class="java.lang.String"/>
<field name="eml_participante" class="java.lang.String"/>
<group name="gEventos">
    <groupExpression><![CDATA[$F{nme_evento}]]></groupExpression>
    <groupHeader>
        <band height="42">
            <rectangle>
                <reportElement x="25" y="21" width="530" height="20" forecolor="#666666" backcolor="#666666"/>
            </rectangle>
            <staticText>
                <reportElement x="35" y="21" width="267" height="20" forecolor="#FFFFFF"/>
                <textElement textAlignment="Left" verticalAlignment="Middle"/>
                <text><![CDATA[Participante]]></text>
            </staticText>
            <staticText>
                <reportElement x="302" y="21" width="186" height="20" forecolor="#FFFFFF"/>
                <textElement textAlignment="Left" verticalAlignment="Middle"/>
                <text><![CDATA[E-mail]]></text>
            </staticText>
            <staticText>
                <reportElement x="488" y="21" width="68" height="20" forecolor="#FFFFFF"/>
                <textElement textAlignment="Left" verticalAlignment="Middle"/>
                <text><![CDATA[Presente]]></text>
            </staticText>
            <textField isStretchWithOverflow="true">
                <reportElement x="0" y="1" width="270" height="20"/>
                <textElement>
                    <font size="14" isBold="true"/>
                </textElement>
                <textFieldExpression><![CDATA["Evento: " + $F{nme_evento}]]></textFieldExpression>
            </textField>
            <line>
                <reportElement x="270" y="12" width="280" height="1"/>
            </line>
        </band>
    </groupHeader>
    <groupFooter>
        <band height="50"/>
    </groupFooter>
</group>
<background>
    <band splitType="Stretch"/>
</background>
<title>
    <band height="60" splitType="Stretch">
        <rectangle>
            <reportElement x="0" y="0" width="200" height="60" forecolor="#E6E6E6" backcolor="#E6E6E6"/>
        </rectangle>
        <staticText>
            <reportElement x="0" y="0" width="200" height="60" forecolor="#666666" backcolor="#FFFFFF"/>
            <textElement textAlignment="Center" verticalAlignment="Middle">
                <font fontName="Arial" size="30"/>
            </textElement>
            <text><![CDATA[SisEventos]]></text>
        </staticText>
        <staticText>
            <reportElement x="200" y="35" width="355" height="25"/>
            <textElement textAlignment="Right" verticalAlignment="Middle">
                <font fontName="Arial" size="18" isBold="true" isUnderline="false"/>
            </textElement>
            <text><![CDATA[Relatório de Participantes dos Eventos]]>        </text>
        </staticText>
        <line>
            <reportElement x="200" y="59" width="355" height="1"/>
        </line>
    </band>
</title>
<pageHeader>
    <band height="30" splitType="Stretch">
        <staticText>
            <reportElement x="0" y="5" width="80" height="20"/>
            <textElement>
                <font isBold="true"/>
            </textElement>
            <text><![CDATA[Filtro: ]]></text>
        </staticText>
        <textField isStretchWithOverflow="true">
            <reportElement x="80" y="5" width="475" height="20"/>
            <textElement/>
            <textFieldExpression><![CDATA["Data de início: " + (($P{DATA_INICIO} != null) ? $P{DATA_INICIO}.toLocaleString().substring(0, 10) : "Não informada") + " - Data de término: " + (($P{DATA_TERMINO} != null) ? $P{DATA_TERMINO}.toLocaleString().substring(0, 10) : "Não informada")]]></textFieldExpression>
        </textField>
    </band>
</pageHeader>
<columnHeader>
    <band splitType="Stretch"/>
</columnHeader>
<detail>
    <band height="20" splitType="Stretch">
        <rectangle>
            <reportElement x="25" y="0" width="530" height="20" forecolor="#E6E6E6" backcolor="#E6E6E6">
                <printWhenExpression><![CDATA[$V{COLUMN_COUNT}%2==0]]></printWhenExpression>
            </reportElement>
        </rectangle>
        <textField isStretchWithOverflow="true">
            <reportElement x="34" y="0" width="267" height="20"/>
            <textElement textAlignment="Left" verticalAlignment="Middle"/>
            <textFieldExpression><![CDATA[$F{nme_participante}]]></textFieldExpression>
        </textField>
        <textField isStretchWithOverflow="true">
            <reportElement x="302" y="0" width="185" height="20"/>
            <textElement verticalAlignment="Middle"/>
            <textFieldExpression><![CDATA[$F{eml_participante}]]></textFieldExpression>
        </textField>
        <rectangle radius="10">
            <reportElement x="500" y="2" width="15" height="15"/>
        </rectangle>
    </band>
</detail>
<columnFooter>
    <band splitType="Stretch"/>
</columnFooter>
<pageFooter>
    <band height="20" splitType="Stretch">
        <textField>
            <reportElement x="355" y="0" width="200" height="20"/>
            <textElement textAlignment="Right" verticalAlignment="Middle"/>
            <textFieldExpression><![CDATA["Página "+$V{PAGE_NUMBER}+" de "+ $V{PAGE_NUMBER}]]></textFieldExpression>
        </textField>
        <textField isStretchWithOverflow="true" pattern="EEE, dd MMM yyyy - HH:mm:ss" isBlankWhenNull="true">
            <reportElement x="0" y="0" width="200" height="20"/>
            <textElement verticalAlignment="Middle"/>
            <textFieldExpression><![CDATA["Impresso em: " + new java.util.Date().toLocaleString()]]></textFieldExpression>
        </textField>
        <line>
            <reportElement x="0" y="0" width="555" height="1"/>
        </line>
    </band>
</pageFooter>
<summary>
    <band splitType="Stretch"/>
</summary>
</jasperReport> 
```

当他到达第 4 行时，发生了一件奇怪的事情：在我的 Dock 中打开了一个名为***org.apache.cataline.startup.bootstrap的工具。***但是当他到达第 5 行并执行时，应用程序似乎卡住并且没有响应。好的，另一件事是：我正在使用休眠。我如何从 Hibernate 获取 Connection 对象（通过 JasperFillManager.fillReport(rep, param, con) 传递他）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-28T19:40:21.600

ramkitech.com 发现错误！在我的应用程序中，我使用 Maven，并且使用以下依赖项工件来导入 jasper 报告库：

```
<dependency>
    <groupId>net.sf.jasperreports</groupId>
    <artifactId>jasperreports</artifactId>
    <version>4.7.0</version>
</dependency> 
```

但我还需要以下依赖项：

```
 <dependency>
        <groupId>com.lowagie</groupId>
        <artifactId>itext</artifactId>
        <version>2.1.7</version>
 </dependency> 
```

如果您在 Report 中使用 groovy 作为一种语言（如我的情况），那么您需要添加：

```
<dependency>
    <groupId>org.codehaus.groovy</groupId>
    <artifactId>groovy-all</artifactId>
    <version>1.7.5</version>
</dependency> 
```

# c# - MVC3 Html.RadioButton statpost 返回到控制器

> ID：12434348
> 
> 赞同：0
> 
> 时间：2012-09-15T03:48:46.380
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor

我的 mvc3 应用程序中有以下模型。我想在视图上有两个单选按钮，分别映射到重量和数量（这些是数据库中的位字段）。

```
public Unit()
    {
        this.OrderLineQuantity = new HashSet<OrderLine>();
        this.OrderLineWeight = new HashSet<OrderLine>();
    }

    public int ID { get; set; }
    public System.Guid UserId { get; set; }
    public string ShortDescription { get; set; }
    public string Desciption { get; set; }
    public System.DateTime AddDate { get; set; }
    public System.DateTime UpdateDate { get; set; }
    public Nullable<bool> Weight { get; set; }
    public Nullable<bool> Quantity { get; set; }

    public virtual ICollection<OrderLine> OrderLineQuantity { get; set; }
    public virtual ICollection<OrderLine> OrderLineWeight { get; set; } 
```

我的强类型剃刀视图中有（简化的）以下内容：

```
@using (Html.BeginForm()) {
@Html.ValidationSummary(true)
<fieldset>
    <legend>Unit</legend>

    <table>
        <tr>
            <td>@Html.LabelFor(model => model.Weight)</td>
            <td>@Html.LabelFor(model => model.Quantity)</td>
        </tr>
        <tr>
            <td>
                @Html.RadioButton("unitType", "false", "Weight")
                @Html.ValidationMessageFor(model => model.Weight)
            </td>
            <td>
                @Html.RadioButton("unitType", "false", "Quantity")
                @Html.ValidationMessageFor(model => model.Quantity)
            </td>
        </tr>
    </table>
    <p>
        <input type="submit" value="Create" />
    </p>
</fieldset> 
```

}

我遇到的问题是，当我将帖子调试回控制器时，单选按钮的值为空。我有点困惑，因为我认为我在视图中正确命名了控件。有人可以帮我将值正确地发回控制器。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:58:32.933

使用`RadioButtonFor`，这将正确连接表单命名。

```
@Html.RadioButtonFor(model => model.Weight, "true")
@Html.RadioButtonFor(model => model.Quantity, "true") 
```

（如果你想使用 plain `RadioButton`，第一个参数应该是属性名称，比如`@Html.RadioButton("Weight", "true")`。但是如果在嵌套类和局部视图等情况下变得更复杂，这就是为什么建议使用上述强类型形式的原因。）

* * *

**编辑** 由于单选按钮需要在同一组中，因此必须调整视图模型。

```
@Html.RadioButtonFor(model => model.UnitType, "Weight")
@Html.RadioButton(model => model.UnitType, "Quantity") 
```

因此模型需要该`UnitType`属性，但如果您仍需要使用`Weight`and `Quantity`，则可以将它们设置为更新：

```
private string _unitType;

public string UnitType 
{
    get { return _unitType; }
    set
    {
        _unitType = value;
        Weight = (_unitType ?? "").Equals("Weight", StringComparison.CurrentCultureIgnoreCase);
        Quantity = (_unitType ?? "").Equals("Quantity", StringComparison.CurrentCultureIgnoreCase);
    }
} 
```

# database-design - 合并数据库架构

> ID：12434350
> 
> 赞同：0
> 
> 时间：2012-09-15T03:49:03.820
> 
> 标签：database-design

我们有 3 个不同的项目都有自己的数据库 [Oracle] 模式，这会导致问题，因为我们总是必须授予一个模式以访问其他模式的表。所以我们的计划是创建一个单一的模式而不是 3 个模式，但是问题是那些已经存在于这 3 个模式中的数据。我们不想复制庞大的数据，并且我们的应用程序只能指向一个模式，而不能同时指向两者。

有没有办法解决上述问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:53:42.477

数据库合并是一项有趣的活动，我目前正在自己​​做一些事情。

由于您不想将所有内容实际复制到一个模式中，一个好的解决方案可能是制作从所有三个中提取的视图，并在您的应用程序中使用它们而不是它正在使用的当前表。

# c# - WCF 服务重试

> ID：12434355
> 
> 赞同：0
> 
> 时间：2012-09-15T03:50:09.003
> 
> 标签：c#, vb.net, wcf

我试图弄清楚是否有一种简单的方法可以在发送故障时实现对服务的重试。让我们说例如：

```
Private Function SaveEmployee(emp as Empoyee)
Try
...
returnval = service.SaveEmployee(emp)
Catch ex as exception
'if exception requires retry eg:end point not found or database is not responding then
'call retry  func/class

RetryOperation(...) 

End Try

End Function 
```

在上面的示例中，如何创建一个通用的 RetryOperation 类，它可以采用任何函数并在通知用户操作无法完成之前每隔一段时间调用它 3 或 4 次。

我希望可以制作一个通用方法，而不是在所有服务调用函数中都有重复的代码

C# 或 vb.net 中的任何示例将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T05:10:16.940

如果它是一个你可能想要重复的调用，如果它失败为什么不立即使用重复功能，如果服务调用成功，它只会被调用一次，如果服务调用失败，它将重试 x 次，如果它第 x 次失败，它将引发异常

像这样的东西怎么样，请注意这大大简化了，您需要添加错误处理等：

像这样创建您的重复方法：

```
private void RepeatCall(int numberOfCalls, Action unitOfWork)
{
    for (int i = 1; i <= numberOfCalls; i++)
        {
        try
        {
            unitOfWork();
        }
        catch (...)
        {
            // decide which exceptions/faults should be retried and 
            // which should be thrown
            // and always throw when i == numberOfCalls
        }
     }
 } 
```

像这样使用它

```
try
{
    RepeatCall(3, () => 
                    {
                         MyServiceCall();
                    });

}
catch(....)
{
   // You'll catch here same as before since on the last try if the call
   // still fails you'll get the exception
} 
```

在 VB.NET 中也是一样的

```
Private Sub RepeatCall(ByVal numberOfCalls As Integer, ByVal unitOfWork As Action)

    For i = 1 To numberOfCalls
        Try
            unitOfWork()
        Catch ex As Exception

        End Try
    Next

End Sub 
```

用它：

```
 Try
      RepeatCall(3, Sub()
                       MyServiceCall()
                    End Sub)

  Catch ex As Exception

  End Try 
```

# database-design - 数据架构：产品目录的重复数据删除

> ID：12434362
> 
> 赞同：0
> 
> 时间：2012-09-15T03:50:53.173
> 
> 标签：database-design, architecture, duplicates, hbase, record-linkage

我正在考虑**合并（和重复删除）**多个产品目录的策略。

我将使用一个 no-sql 数据库，并且需要**查询 N**个部分重叠产品的目录。

分类、标签、描述等某些方面需要**规范化**，我需要跟踪哪些目录包含每个唯一项目（例如，通过 UPC 对每个目录**中的产品进行重复数据删除）。**

> 我目前的想法是将各个目录导入到他们自己的表中，然后使用自建算法来识别“相似”项目，执行规范化，然后创建一个包含规范化和去重数据的最终“主”表——（主记录值将从它选择的任何目录或目录组合中复制，并包含指向包含该项目的目录的链接）。

*我想知道关于这个主题还有哪些其他想法？我应该研究哪些研究领域来更好地教育自己？*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:12:23.403

这里有一些本地公司每晚/每周从 NoSql 生成 Sql 模式以用于报告目的。

据我了解，他们使用的方法正是您所描述的。我相信您的数据集非常大，您不应该对该策略有任何问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:50:51.183

您没有提供很多细节，但据我了解，如果您使用 HBase，您可以执行以下操作：

1.  将所有数据以原始格式或接近原始格式写入 hbase
2.  写一个 map/reduce 来解决问题：

    2.1。在映射阶段规范化并发出潜在的键

    2.2\. 在他减少阶段（你得到所有具有相同键的记录）产生主记录

3.  将主记录导出到您想要的位置

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-26T09:43:10.173

[自 1940 年代以来（不，老实说），在名称记录链接](http://en.wikipedia.org/wiki/Record_linkage)下，这一直是一个巨大的研究领域（但不幸的是，它也以许多其他名称而闻名，如“身份解析”、“数据匹配”、“合并/清除”等ETC）。这里有很多东西要学，人们已经开发了很多你可以使用的技术和工具。我强烈建议您在尝试自己编写内容之前先熟悉这些内容。

请注意，一个关键问题将是性能。您基本上必须比较所有记录对（即 O(n^2)），并且理想情况下应该使用模糊字符串比较器（它们都很慢）。仅此一项就是使用已经解决了性能问题的工具的一个很好的理由，并且还可以提供字符串比较器等。

Wikipedia 链接包含对研究和工具的引用。我强烈建议看看它。

无论如何，如果您想了解更多信息，关于该主题的第一本书（我所知道的）已于今年早些时候出版：[数据匹配，作者 Peter Christen](https://rads.stackoverflow.com/amzn/click/com/3642311636)。两篇很好的概述论文是重复记录检测：调查（Elmagarmid、Ipeirotis 和 Verykios）和记录链接和当前研究方向概述（William Winkler）。我会发布链接，但反垃圾邮件不会让我。今年早些时候，我对此做了一个演示，简要概述了问题、研究和解决方案（它在幻灯片共享上，标题为“在没有通用标识符的情况下链接数据”）。

# c++ - vector.size() 的 GDB 值错误

> ID：12434364
> 
> 赞同：4
> 
> 时间：2012-09-15T03:51:20.060
> 
> 标签：c++, vector, gdb, push-back

一个简单的 vector.push_back() 在我的代码中导致一些错误：

```
#include <vector>
using namespace std;

int main(int argc, const char *argv[])
{
    vector<unsigned> stack;
    stack.push_back(1);
    stack.push_back(1); //stack.size() becomes 467369971 after this
    stack.push_back(1);
    stack.push_back(1);
    ... more push_back()s ...
    return 0;
} 
```

我正在使用 GDB 来检查它的行为……奇怪的是 stack.size() 在第二个 push_back() 之后出错了。变成467369971！可能有什么问题？我在 Win7 64 位上，我正在使用带有 G++ 4.7.0 的 MinGW

下面是 GDB 的输出：

```
(gdb) n
5                       std::vector<unsigned> sta
(gdb) n
6                       stack.push_back(1);
(gdb) display stack.size()
1: stack.size() = 0
(gdb) n
7                       stack.push_back(1);
1: stack.size() = 1
(gdb)
8                       stack.push_back(1);
1: stack.size() = 467369971 //goes wrong here
(gdb)
9                       stack.push_back(1);
1: stack.size() = 467369971
(gdb)
10                      stack.push_back(1);
1: stack.size() = 4         // gets "normal"
(gdb)
11                      stack.push_back(1);
1: stack.size() = 467369971 // wrong again
(gdb)
12                      stack.push_back(1);
1: stack.size() = 6
(gdb)
13                      stack.push_back(1);
1: stack.size() = 7
(gdb)
14                      stack.push_back(1);
1: stack.size() = 8
(gdb)
15                      stack.push_back(1);
1: stack.size() = 467369971
(gdb)
16                      stack.push_back(1);
1: stack.size() = 10
(gdb)
17                      stack.push_back(1);
1: stack.size() = 11
(gdb)
18                      stack.push_back(1);
1: stack.size() = 12
(gdb)
19                      return 0; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T23:22:31.507

> 可能有什么问题？

这是您的编译器或 GDB 中的错误。它不会*在*`g++ (Ubuntu 4.4.3-4ubuntu5.1) 4.4.3`使用GDB 7.4的 Linux 上重现：

```
(gdb) n
7       stack.push_back(1);
1: stack.size() = 0
(gdb) 
8       stack.push_back(1); //stack.size() becomes 467369971 after this
1: stack.size() = 1
(gdb) 
9       stack.push_back(1);
1: stack.size() = 2
(gdb) 
10      stack.push_back(1);
1: stack.size() = 3
(gdb) 
11      stack.push_back(1);
1: stack.size() = 4
(gdb) 
12      stack.push_back(1); //stack.size() becomes 467369971 after this
1: stack.size() = 5
(gdb) 
13      stack.push_back(1);
1: stack.size() = 6
(gdb) 
14      stack.push_back(1);
1: stack.size() = 7
(gdb) 
15      return 0;
1: stack.size() = 8
(gdb) 
16  }
(gdb) q 
```

不幸的是，要找出应该归咎于哪个工具会有些困难：您需要检查生成的调试信息。相反，您可以尝试使用不同版本的 GCC 和 GDB 重现该问题。如果不同的 GCC 导致错误消失，则可能是 GCC 中的错误。如果不同的 GDB 版本使该错误消失，则可能是 GDB 错误。

# c# - c#中的异步和并行编程有什么关系？

> ID：12434369
> 
> 赞同：24
> 
> 时间：2012-09-15T03:53:23.790
> 
> 标签：c#, parallel-processing

我很困惑，因为异步编程是一种异步执行代码块的方法，它调用一个方法并且不等待结果。同样，并行编程是一种同时执行多个任务的方法，但所有这些任务都是异步执行的。所以想知道/混淆c#中这两种编程范式之间的关系是什么。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-15T04:14:59.813

**并行编程**是一种我们使用多个线程更快地执行任务的技术。这意味着在现代多核架构上，我们可以利用更多可用资源来执行任务。

一个很好的例子是使用快速排序对列表进行排序。

通常对于并行编程，性能很重要，所有线程都在朝着一个共同的目标工作。

**异步编程**略有不同。这通常涉及运行时间较长的任务和可能正在等待某种外部刺激的任务。一个很好的例子是在后台线程中执行大型计算，以便 UI 保持响应。对于异步代码，我们通常谈论的代码执行速度与我们的主应用程序不同。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-09-15T04:15:14.233

并行编程意味着执行操作同时使用多个线程，处理 cpu 和/或内核。

您所说的异步编程意味着触发请求并提供回调机制来接收响应。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2016-01-06T11:27:56.457

最后 ：

对**CPU 密集型**解决方案使用**并行编程**。对**IO Bound**解决方案使用**异步编程**。

 ******* * *

## 回答 #4

> 赞同：7
> 
> 时间：2012-09-15T04:14:42.833

一般来说，异步意味着尽可能执行，并行意味着通过创建一个新的执行线程立即执行。
[这里](http://urda.cc/blog/2010/10/04/asynchronous-versus-parallel-programming/)是链接

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-04-25T09:39:42.577

并行编程主要关注提高系统的性能。

异步编程主要关注提高系统的响应能力。

线程、任务等是实现异步和并行编程的技术。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2017-09-06T11:26:44.590

我能够理解并行和异步编程的最简单的方法之一是考虑从 Pluralsight 中提取的“煮鸡蛋”场景，我已经稍微改变了它以合并线程。

**并行编程**

*   滚刀：CPU
*   多个锅：线程
*   多个鸡蛋：并行任务

您有多个鸡蛋（任务）需要同时煮。在这个例子中，滚刀是 CPU，每个煮一个鸡蛋的锅都是一个线程，鸡蛋是并行任务。我可以通过同时向滚刀（CPU）添加更多的锅（线程）来煮多个鸡蛋（任务）。如果不使用并行编程，我一次只能煮 1 个鸡蛋（任务），因为您只有 1 个锅（线程）可以使用，这最终会减慢煮鸡蛋的过程。

***异步编程***

*   Egg Timer：异步任务
*   滚刀：CPU
*   多个锅：线程
*   多个鸡蛋：任务

继上面的示例之后，您现在决定只想知道所有鸡蛋何时煮熟，而不是每个鸡蛋何时煮熟。为此，您将使用一个异步任务，在这种情况下将作为鸡蛋计时器播放。当所有的鸡蛋（任务）都完成时，鸡蛋计时器（异步任务）会更新你，这样你就可以自由地做其他事情了。******

# amazon-web-services - 云中的 GPU - 录制游戏

> ID：12434374
> 
> 赞同：2
> 
> 时间：2012-09-15T03:54:10.540
> 
> 标签：amazon-web-services, video-streaming, cloud, gpu

今天我对一个项目有了一个非常好的想法，不幸的是存在信息/经验障碍。

我基本上想要的是在云中运行游戏并将图像流式传输给用户。

我知道 ec2 可以选择使用 GPU，但它可能有错误的定价模型来满足我的需求。

* * *

在云中运行游戏 -> 录制屏幕并将视频源发送到服务器。

1.  是否可以在一台服务器上运行游戏的多个实例并能够分别流式传输每个实例？

2.  还是我必须为每场比赛启动一个新实例？

如果我每个实例只能有一个游戏，我会浪费很多资源。是否有其他提供 GPU 的云托管服务商？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T04:02:27.370

首先：这真的不是亚马逊的 GPU 实例的用途。它们主要针对某些可由 GPU 加速的高性能计算任务，而根本不一定是 3D 图形。

您所描述的在技术上是可行的；事实上，这就是包括 OnLive 和 Gaikai 在内的几家公司成立的目的。但是，他们几乎没有发布有关其服务如何工作的技术方面的详细信息。很明显，它的设置**并不**简单——甚至不能用现成的硬件来实现。（例如，OnLive 最终建立了自己的数据中心，这也是他们最终破产的原因之一。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T08:57:29.743

如果您可以投入一些资金购买服务器，您可能会发现 Xen Server 是合适的选择。Xen Server 提供 GPU 虚拟化。Xen 专用于一个虚拟节点的 PCI Express 连接，如果您的服务器有多个 GPU，您可以为每个虚拟节点分配一个。它也适用于 3D 图形。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-02-13T14:29:12.397

NVIDIA 似乎正在研究云游戏（而不仅仅是游戏）的技术。[http://www.nvidia.com/object/cloud-gaming.html](http://www.nvidia.com/object/cloud-gaming.html)

在今年的圣何塞 GTC 上将有一系列关于 NVIDIA GRID 技术的演讲

# html - 如何防止 div 滚动

> ID：12434375
> 
> 赞同：1
> 
> 时间：2012-09-15T03:54:13.083
> 
> 标签：html, css

我正在尝试创建一个网站，其中有 .wrapper 沿页面中间垂直运行，.banner 在页面顶部附近水平传播。.banner 将包含一个 1600x400 的图像以及一些链接。我想要做的是创建一个横幅将“跑出”页面的效果。为此，我希望水平滚动条仅在浏览器宽度小于 .wrapper 宽度时出现。我正在尝试实现类似[EA 主页](http://www.ea.com/ca)的效果，其中水平滚动条仅在浏览器宽度小于内容而不是横幅时出现。

我想要的图片：

> ![在此处输入图像描述](../Images/6fca75012a8a27539ad493e051666441.png)

要求：

*   仅当浏览器宽度小于 .wrapper 的宽度时才显示水平条
*   当浏览器宽度小于 .banner 的宽度时，不显示水平条
*   .banner 必须一直可见到浏览器的右侧（不能被 .wrapper 截断）

我看到了[另一个](https://stackoverflow.com/questions/12432688/prevent-horizontal-scrollbar-from-appearing-in-overflowing-div)与我的类似的帖子，但没有解决。我尝试了一些建议的解决方案，但对我没有帮助。

代码：http: [//jsfiddle.net/NZb3w/](http://jsfiddle.net/NZb3w/)

```
<div class="wrapper">
    <div class="banner">
        <img src="http://www.placehold.it/1600x400">
    </div>
</div>

.wrapper {
    width: 960px;
    margin: 0 auto;
    background: #ccffff;
    height: 800px;
    padding-top: 50px;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:29:34.843

也许试试

```
.wrapper {
  min-width: 960px; 
  overflow-x:auto;
  width: 100%;
} 
```

这将允许宽度 to`.wrapper`拉伸大于 960 像素，但一旦达到 959 像素，它将添加滚动条。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T19:17:44.823

尝试使用 max-width ，这样当 div 获得最大宽度时，它将设置 scroll-x: 或 y 任何你需要的。

```
.wrapper {
  max-width: 960px;
  margin: 0 auto;
  background: #ccffff;
  height: 800px;
  overflow: auto;
  padding-top: 50px;;
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-15T04:03:24.007

对您的页面或宽度使用 css 'min-width' 属性，以便元素在限制后不会缩小，并且在此之后会出现滚动条。使用 overflow:hidden 禁用滚动条。

# delphi - 我可以将 FreeBSD 作为目标平台添加到 Delphi XE2 IDE 吗？

> ID：12434376
> 
> 赞同：0
> 
> 时间：2012-09-15T03:54:23.100
> 
> 标签：delphi, cross-platform, delphi-xe2

我的实用程序在 FPC 和 Delphi 上都能很好地编译。现在我想制作一个 IDE 来为我从 GUI 运行 FPC 作为目标平台。我注意到 RAD Studio 存储库中的一些项目模板可以跨平台构建，而有些则不能。所以假设它不是在 IDE 中硬编码，而是可配置的。另外，我知道 XE2 使用 FPC 进行 ARM 交叉编译。因此，问题是：我可以配置它以及如何配置？

* * *

UPD：正如我所知道的，项目管理器中“目标平台”节点的存在直接反映了`ProjectName.dproj`. 不知道发现是否有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:06:54.140

不，XE2 支持`Win32/64`，`OSX`（使用`FireMonkey`）和`iOS`（如您所说，使用`FPC`）。它不支持任何其他目标。如果你需要编译到另一个，你需要严格使用`FPC`and `Lazarus`; 无法将其他目标添加到 IDE。

如果您可以向 IDE 添加额外的目标，您会认为 Embarcadero 会提到它作为非常有价值的营销信息，而他们没有（甚至在 XE3 的新版本中也没有）。

# emacs - Emacs lua-mode 语法高亮不工作

> ID：12434377
> 
> 赞同：5
> 
> 时间：2012-09-15T03:54:36.127
> 
> 标签：emacs, lua

我为 Emacs 24.1 安装了 lua 模式，但是当我编写 lua 代码时，语法突出显示无法正常工作。

lua-mode 不能识别以'--' 开头的注释。甚至像 'string' 这样的单引号字符串也不会突出显示。

我找不到有关此特定问题的任何具体信息，有人知道发生了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-05T00:35:57.860

在 GNU Emacs 24.1.50.1A 上突出显示对我有用。有几件事需要您仔细检查：

*   是否启用了 lua 模式（“Lua”一词应出现在模式行中）。如果没有，请尝试通过`M-x lua-mode`包含 lua 代码的文件缓冲区手动激活它。
*   是`lua-mode.el`电流的吗？[我使用来自http://immerrr.github.com/lua-mode](http://immerrr.github.com/lua-mode)的20111107 版本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-24T07:12:16.830

使用 ubuntu 12.04 我通过执行以下操作安装了 emacs 24：

```
 $ sudo add-apt-repository ppa:cassou/emacs
  $ sudo apt-get update
  $ sudo apt-get install emacs-snapshot-el emacs-snapshot-gtk emacs-snapshot 
```

我不记得是否立即安装了 lua-mode，但我正在使用[https://github.com/technomancy/emacs-starter-kit](https://github.com/technomancy/emacs-starter-kit)并通过 emacs 内部的“package-install lua-mode”安装它。

如果您遇到问题，可能是一些旧的 emacs 设置导致它们。可以肯定的是，删除 ~/.emacs.d 和其他 ~/.emacs 的东西。

# php - php脚本在第一个P标签之间回显文本并将第二个p标签回显为另一个变量

> ID：12434378
> 
> 赞同：0
> 
> 时间：2012-09-15T03:55:00.693
> 
> 标签：php, regex, parsing

我在 mysql 数据库中有如下文本：

```
<p>text text test text</p>
<p>demo demo demo</p> 
```

我想编写 php 脚本以在变量中回显“文本文本测试文本”并在另一个变量中回显“演示演示演示”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:10:58.877

尝试这个

```
$charsToRemove =   array('<p>','</p>');
$modifyString  =   str_ireplace($charsToRemove ,'',$string); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T04:04:11.860

您希望显示数据库中的值是什么？

然后，

如果你使用 mysql，

```
 $res = mysql_query("SELECT colName FROM tableName");
  if(mysql_num_rows($res) > 0){
     $ret = mysql_fetch_assoc($res);
     echo $ret['colName'];
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T04:12:12.967

```
<?php
$html="<p>text text test text</p><p>demo demo demo</p>";
preg_match_all("'<p>(.*?)</p>'si", $html, $match);
if ($match) {
    $var1 = $match[1][0];
    $var2 = $match[1][1];
}
echo $var1."\n";
echo $var2."\n";
?> 
```

你只有两个 < p > 标签吗？如果不是，您需要循环 $match[1] 数组以检索所有内容。

# playframework - 如何在 Java 中的 PlayFramework 控制器 1.2.x 中发回 Javascript

> ID：12434379
> 
> 赞同：0
> 
> 时间：2012-09-15T03:55:52.443
> 
> 标签：playframework

浏览器请求一些数据，为此我需要发回将在浏览器上执行的 Javascript。

如何从 Play Framework 控制器将 Javascript (.js) 发送回浏览器？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T09:02:59.220

如果您只想在控制器中发回 JavaScript，您可以执行类似的操作

```
public static void sayHello() {
    renderText("alert('hello')");
} 
```

然后在你用来调用动作的 JS 函数中（使用 jsAction 标签），你只需使用 javascript eval 函数。

所以，你的代码可能看起来像

```
<script type="text/javascript">
   var sayHello = #{jsAction @sayHello() /}
   eval(sayHello());
</script> 
```

请注意 eval 被认为是危险的，就好像有人设法拦截了请求，并将他们自己的 javascript 注入到您的代码中，它会在客户端机器上执行此代码。

# iphone - 在 webapp 中打开 URL 时，如何在不跳转到 Safari 的情况下在其中显示新页面？

> ID：12434381
> 
> 赞同：0
> 
> 时间：2012-09-15T03:56:03.317
> 
> 标签：iphone, ios, web-applications, iphone-web-app

我在一个目录中有两个页面用于 iOS Web 应用程序。一个是index.html，另一个是detail.html。

在 index.html 中，有一个指向 detail.html 的链接，如下所示

```
<a href="detail.html">
Redirect 
</a> 
```

我在 iPhone 的 safari 中打开 index.html，然后将 index.html 添加到主屏幕。然后我从主屏幕打开这个网络应用程序。当点击“重定向”时，网络应用程序进入后台，然后 Safari 打开 detail.html 并进入前台。

如何在 Web 应用程序本身中打开 detail.html 而不重定向到 safari？特别感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-23T06:11:54.267

要结合克服此类 webapps 问题所需的所有功能，您可以简单地使用这个库[http://iosjs.com/features/](http://iosjs.com/features/)

如果您正在寻找快速修复：

```
$( document ).on("click","a",function( event ){

   if($( event.target ).attr( "href" )){

   var str    = $( event.target ).attr( "href" );
   var patt   = /^#/g;
   var match  = str.match(patt);

  // Stop the default behavior of the browser,ie to change the URL of the page.

    event.preventDefault();

  // Manually change the location of the page to stay in "Standalone" mode 
  //  and change the URL at the same time.

    location.href = $( event.target ).attr( "href" );
); 
```

这将处理所有锚标记。您可以使用“匹配”变量来排除带有“#”值的href。

该博客将为您提供相同的示例:: [http://www.bennadel.com/blog/2302-Preventing-Links-In-Standalone-iPhone-Applications-From-Opening-In-Mobile-Safari.htm](http://www.bennadel.com/blog/2302-Preventing-Links-In-Standalone-iPhone-Applications-From-Opening-In-Mobile-Safari.htm)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:39:49.967

我在[https://developer.apple.com/library/archive/documentation/AppleApplications/Conceptual/Dashcode_UserGuide/Contents/Resources/en.lproj/MakingaWebApp/MakingaWebApp.html#//apple_ref/doc/uid/TP40004692中找到了解决方案-CH18](https://developer.apple.com/library/archive/documentation/AppleApplications/Conceptual/Dashcode_UserGuide/Contents/Resources/en.lproj/MakingaWebApp/MakingaWebApp.html#//apple_ref/doc/uid/TP40004692-CH18)

我终于使用 javascript 而不是标签。

```
<SCRIPT LANGUAGE="JScript">
function toDetail() {
    document.location=('detail.html');
}
</SCRIPT>

<div class="cell" onclick="toDetail()">
</div> 
```

# html - HTML 通过电子邮件发送表单

> ID：12434387
> 
> 赞同：-4
> 
> 时间：2012-09-15T03:57:45.640
> 
> 标签：html, email

在我的 HTML 中，我的表单包含三个字段。当按下“提交”按钮时，我想将这些字段的内容通过电子邮件发送到 a@b.com，但是现在当我单击“提交”时，它会让用户登录到 gmail。有没有办法制作一键式电子邮件按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T04:13:26.913

这是我从您的问题中了解到的，是的，可以通过电子邮件一键发送电子邮件

```
<form action="MAILTO:a@b.com" method="post" enctype="text/plain">
  Name:<br />
  <input type="text" name="name" value="your name" /><br />
  E-mail:<br />
  <input type="text" name="mail" value="your email" /><br />
  Comment:<br />
  <input type="text" name="comment" value="your comment" size="50" />
  <br /> 
  <input type="submit" value="Send">
</form> 
```

要在不让用户转到 gmail 的情况下创建一键式电子邮件按钮，您需要执行服务器端实现，如果您甚至想在不重新加载页面的情况下执行此操作，那么您可以通过 Ajax 执行此操作（我建议您使用 Ajax使用 jquery）和邮件，您可以使用[php 邮件功能](http://php.net/manual/en/function.mail.php)，但我建议您使用[php 邮件程序](http://code.google.com/a/apache-extras.org/p/phpmailer/)

例子

```
<?php
// The message
$message = "this is demo message ";

// In case any of our lines are larger than 70 characters, 
// we should use wordwrap()
$message = wordwrap($message, 70);

// Send
mail('example@example.com', 'My Subject', $message);
?> 
```

但它会通过邮件显示一些不需要的信息，例如`example@example.com via example.com`

要隐藏 via example.com，您需要在您的网站或**DKIM（DomainKeys Identified Mail）中设置****SPF（Sender Policy Framework）**记录。[链接了解如何将 DomainKeys/DKIM 和发件人 ID 记录添加到我的 DNS？](http://help.campaignmonitor.com/topic.aspx?t=100)

 **[生成 DKIM 的](http://dkimcore.org/tools/)链接**

# java - Java继承中的方法覆盖

> ID：12434393
> 
> 赞同：8
> 
> 时间：2012-09-15T04:01:42.480
> 
> 标签：java, inheritance

```
package P1;

public class Base {

   private void pri( ) { System.out.println("Base.pri()");  }

   void pac( ) {  System.out.println("Base.pac()");  }

   protected void pro( ) { System.out.println("Base.pro()"); }

   public void pub( ) { System.out.println("Base.pub()"); }

   public final void show( ) {
       pri();  
       pac();  
       pro();  
       pub(); 
   }    
} 
```

和

```
package P2;

import P1.Base;

public class Concrete1 extends Base {
   public void pri( ) { System.out.println("Concrete1.pri()"); }
   public void pac( ) { System.out.println("Concrete1.pac()"); }
   public void pro( ) { System.out.println("Concrete1.pro()"); }
   public void pub( ) { System.out.println("Concrete1.pub()"); }
} 
```

我正在执行

```
Concrete1 c1 = new Concrete1();
c1.show( ); 
```

现在，输出显示为

> Base.pri()
> Base.pac()
> Concrete1.pro()
> Concrete1.pub()

有人可以解释为什么会这样吗？根据我对继承的理解，这***应该***发生：

1）P2.concrete1 继承 P1.Base
2）concrete1 的 c1 对象被创建
3）`c1.show()`被调用。由于 P1.Base.show() 是`public`，所以可以调用它。
4) 现在，在继承后的P2.concrete1中，只能访问它自己的方法（pri、pac、pro、pub）和P1.Base的可继承方法（pro、pub、show）。

现在为什么它甚至无法访问时在输出中显示 Base.pri() 和 Base.pac() ？

很明显，我对继承没有非常清楚的基本理解。有人可以解释这种情况以及继承实际上是如何“结构化”的。我曾经认为超类的可继承方法和字段只会叠加到子类上。但这种推理显然是错误的。

谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T04:12:06.760

简短的回答是您只能覆盖可见的方法。前两种方法，`pri`分别`pac`是*私有*的和*包保护*的。因为类之外的任何东西都不能看到*私有*方法，所以它不能被覆盖。同样，因为`Concrete1`它在不同的包中，`Base`所以它看不到`Base.pac`，所以不能覆盖它。

这意味着当您在 中定义 a`pri`和`pac`方法时`Concrete1`，它们只是恰好与 中的方法具有相同名称的方法`Base`，而不是覆盖。其他两种方法`pro`和`pub`分别是*受保护*的和*公共*的，因此对`Concrete1`. 因此 in 中的`pro`和`pub`方法是对 in`Concrete1`中同名方法的覆盖`Base`。

因为`show`在 中定义`Base`，所以它是调用 4 中定义的方法进行编译的`Base`。执行时，JVM 会查看是否有任何被覆盖以及是否执行被覆盖的方法。如上所述，`pri`并且`pac`没有被覆盖，因此版本在`Base`原样执行的地方执行。`pro``pub``Concrete1`

如果您将该`show`方法移入`Concrete1`而不是`Base`then ，它将执行 4 中定义的方法，`Concrete1`因为这些方法对`show`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T04:16:00.687

私有和无修饰符方法在设计上对其子类不可见。有关详细说明，请参见[此处](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)。

# php - curl 在 localhost linux fedora 中不起作用

> ID：12434395
> 
> 赞同：0
> 
> 时间：2012-09-15T04:02:31.287
> 
> 标签：php, curl, localhost

嗨，我使用本地 linux fedora 机器上的 curl 尝试了谷歌搜索 api，但没有得到任何结果。我想卷曲在我的本地机器上不起作用。如何使它工作。这是我的代码。

```
<?php         
echo $url = "https://ajax.googleapis.com/ajax/services/search/video?=1.0&q=iphone&userip=1xx.1xx.5x.6x";
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url); 
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1); 
curl_setopt($ch, CURLOPT_REFERER,"www.example.com"); 
$body = curl_exec($ch); 
curl_close($ch);
$json = json_decode($body);
print_r($json);
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:57:30.337

您必须从 php.ini 安装 php5-curl 并启用 cURL 扩展。

1.  用于安装 cURL 的 Linux 命令

    ```
    apt-get install curl libcurl3 php5-curl 
    ```

2.  在 php.ini 中搜索 extension=curl.so 并删除 ';'。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T04:32:56.177

请使用 curl_error() 函数检查任何错误消息。

您也可以尝试添加此值：

```
curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, FALSE);     
curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 2); 
```

# android - 键盘出现时防止Android中的UI重排

> ID：12434396
> 
> 赞同：0
> 
> 时间：2012-09-15T04:03:12.113
> 
> 标签：android, android-layout, keyboard, reflow

我有一个名为[Countdown Calendar](http://play.google.com/store/apps/details?id=com.krylonosstudios.countdowncalendar)的应用程序（它是一个小部件，可以对您的 Google 日历中的事件进行倒计时；修复小错误 atm）。但是我现在要修复的错误与输入文本时 UI 重新流动有关。让我举例说明。以下是未使用键盘时 UI 的外观：

![](../Images/db8cbcb6a25f4e12a986c583c6e86b9e.png)

这是键盘退出时的样子：

![](../Images/73e501f18ebbbd878264eb6e3afacb4a.png)

当用户尝试使用键盘时，如何使 UI 看起来不那么糟糕？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T04:20:19.250

如果无法看到第二张图片，我猜您只需要`android:windowSoftInputMode="adjustPan"`在清单中添加到您的 Activity 标记，以使您的布局简单地平移出视图，而不是尝试重新缩放以适应剩余区域。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T04:24:00.490

使用 scrollView 作为 parentView 并在其中设置剩余的子视图。

# python - 指定 imshow() 使用的查看器

> ID：12434403
> 
> 赞同：0
> 
> 时间：2012-09-15T04:04:53.297
> 
> 标签：python, python-imaging-library

PIL 如何在 Ubuntu 上找到用于 imshow() 的查看器？

我注意到它正在尝试使用“xv”，但我只有“显示”可用在我之前安装的 Python 中，它正确地找到了“显示”，而没有受到我的攻击。知道我需要检查什么环境变量/设置吗？

我是 Python 2.6.5、Ubuntu 10.04、PIL 1.1.6

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-18T17:32:07.923

我通过将显示符号链接到 $path 中的“xv”来破解它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-18T19:05:49.773

PIL 在[`ImageShow.py`](https://bitbucket.org/effbot/pil-117/src/cad4796b9fe614febe4f581495891a7778a775e9/PIL/ImageShow.py?at=default). 它用于`PATH`搜索可执行文件，因此请检查以确保`display`在您的`PATH`. 如果您想了解更多详细信息，可以查看代码。

无论如何，有可能覆盖 PIL 的选择。如果要使用`display`，请使用`ImageShow.register(ImageShow.DisplayViewer)`. 对于其他查看器，子类`ImageShow.UnixViewer`，实现`get_command_ex`，并注册新的查看器类（详见`ImageShow.py`）。

# delphi - XE2 中过高的“视图”下拉菜单

> ID：12434408
> 
> 赞同：2
> 
> 时间：2012-09-15T04:07:40.413
> 
> 标签：delphi, delphi-xe2

从历史上看，Delphi 的“视图”下拉菜单有大量项目。使用 Delphi XE2 加上几个必要的插件，这个数字变得有点大，几乎不适合我的屏幕高度。Windows 支持的普通 TMainMenu 可以适应这种情况并提供滚动或包装功能。不幸的是，RAD Studio 的主菜单似乎是 TActionMainMenuBar 无法处理的。

我能用它做什么？请指教。如果我再添加一个创建视图菜单项的加载项，它将开始重新定位下拉菜单并在鼠标释放时产生恶意点击。多了两个或三个项目，就会有一个不可见的项目:-(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T13:35:33.017

您可以尝试以下方法（将此单元添加到设计包中并将其安装在 IDE 中）。它找到 IDE 主窗体的 ActionManager 并将其样式设置为自定义样式，该样式为弹出菜单定义了一个新类。如果它们通常不适合屏幕，则此弹出菜单类会包装其菜单项：

![包装菜单](../Images/959ac8add645ae7a5c6a1657708cfaff.png)

```
unit TestUnit1;

interface

procedure InitializeStyle;

implementation

uses
  System.Types, System.Classes, System.SysUtils,
  Winapi.Messages, Winapi.Windows,
  Vcl.GraphUtil, Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.ActnMan, Vcl.ActnMenus, Vcl.StdActnMenus, Vcl.ActnCtrls,
  Vcl.PlatformDefaultStyleActnCtrls;

type
  THackCustomActionMenuBar = class(TCustomActionMenuBar);

  TStandardMenuPopupEx = class(TStandardMenuPopup)
  protected
    procedure AlignControls(AControl: TControl; var Rect: TRect); override;
    procedure CustomAlignPosition(Control: TControl; var NewLeft, NewTop, NewWidth, NewHeight: Integer;
      var AlignRect: TRect; AlignInfo: TAlignInfo); override;
    procedure PositionPopup(AnOwner: TCustomActionBar; ParentItem: TCustomActionControl); override;
    procedure WMKeyDown(var Message: TWMKey); override;
  public
    procedure SetBounds(ALeft, ATop, AWidth, AHeight: Integer); override;
  end;

  TPlatformDefaultStyleActionBarsEx = class(TPlatformDefaultStyleActionBars)
  public
    function GetPopupClass(ActionBar: TCustomActionBar): TCustomPopupClass; override;
    function GetStyleName: string; override;
  end;

{ TStandardMenuPopupEx }

var
  NextLeft, NextTop: Integer;

procedure TStandardMenuPopupEx.AlignControls(AControl: TControl; var Rect: TRect);
begin
  NextLeft := 0;
  NextTop := 0;
  inherited AlignControls(AControl, Rect);
end;

procedure TStandardMenuPopupEx.CustomAlignPosition(Control: TControl; var NewLeft, NewTop, NewWidth, NewHeight: Integer;
  var AlignRect: TRect; AlignInfo: TAlignInfo);
var
  ScreenPos: TPoint;
begin
  inherited CustomAlignPosition(Control, NewLeft, NewTop, NewWidth, NewHeight, AlignRect, AlignInfo);
  NewLeft := NextLeft;
  NewTop := NextTop;
  NextTop := NewTop + NewHeight;

  ScreenPos := ClientToScreen(Point(NewLeft, NewTop));
  if ScreenPos.Y + NewHeight > Screen.MonitorFromPoint(ScreenPos).Height then
  begin
    NextTop := 0;
    Inc(NextLeft, NewWidth);
  end;
end;

procedure TStandardMenuPopupEx.PositionPopup(AnOwner: TCustomActionBar; ParentItem: TCustomActionControl);
var
  Popup: TStandardMenuPopupEx;
begin
  inherited PositionPopup(AnOwner, ParentItem);
  if (ParentItem.Parent is TStandardMenuPopupEx) then
  begin
    Popup := TStandardMenuPopupEx(ParentItem.Parent);
    if Assigned(Popup.Selected) and Assigned(Popup.Selected.Control) then
      Left := Popup.ClientToScreen(Popup.Selected.Control.BoundsRect.BottomRight).X - 6;
  end;
end;

procedure TStandardMenuPopupEx.SetBounds(ALeft, ATop, AWidth, AHeight: Integer);
var
  ScreenPos: TPoint;
  MonitorHeight: Integer;
begin
  ScreenPos := ClientToScreen(Point(ALeft, ATop));
  MonitorHeight := Screen.MonitorFromPoint(ScreenPos).Height;
  if ScreenPos.Y + AHeight > MonitorHeight then
    AHeight := MonitorHeight - ScreenPos.Y;

  inherited SetBounds(ALeft, ATop, AWidth, AHeight);
  if HandleAllocated then
    RequestAlign;
end;

procedure TStandardMenuPopupEx.WMKeyDown(var Message: TWMKey);
var
  NextPos: TPoint;
  Sibling: TControl;
begin
  case Message.CharCode of
    VK_RIGHT:
      if Assigned(Selected) and not Selected.HasItems and Assigned(Selected.Control) then
      begin
        NextPos := Point(Selected.Control.BoundsRect.Right + 1, Selected.Control.BoundsRect.Top);
        Sibling := ControlAtPos(NextPos, False);
        if Assigned(Sibling) then
        begin
          SelectItem(Sibling as TCustomActionControl);
          Exit;
        end;
      end;
    VK_LEFT:
      if Assigned(Selected) and not Selected.HasItems and Assigned(Selected.Control) then
      begin
        NextPos := Point(Selected.Control.BoundsRect.Left - 1, Selected.Control.BoundsRect.Top);
        Sibling := ControlAtPos(NextPos, False);
        if Assigned(Sibling) then
        begin
          SelectItem(Sibling as TCustomActionControl);
          Exit;
        end;
      end;
  end;
  inherited;
end;

{ TPlatformDefaultStyleActionBarsEx }

function TPlatformDefaultStyleActionBarsEx.GetPopupClass(ActionBar: TCustomActionBar): TCustomPopupClass;
begin
  if ActionBar is TCustomActionToolBar then
    Result := inherited GetPopupClass(ActionBar)
  else
    Result := TStandardMenuPopupEx;
end;

function TPlatformDefaultStyleActionBarsEx.GetStyleName: string;
begin
  Result := 'Platform Default Ex (with wrapping menus)';
end;

function FindMainActionManager: TActionManager;
var
  I: Integer;
begin
  Result := nil;
  if Assigned(Application) and Assigned(Application.MainForm) then
    for I := 0 to Application.MainForm.ComponentCount - 1 do
      if Application.MainForm.Components[I] is TActionManager then
      begin
        Result := TActionManager(Application.MainForm.Components[I]);
        Break;
      end;
end;

var
  ExStyle: TPlatformDefaultStyleActionBarsEx = nil;

procedure InitializeStyle;
var
  ActionManager: TActionManager;
begin
  ActionManager := FindMainActionManager;
  if Assigned(ActionManager) then
  begin
    ExStyle := TPlatformDefaultStyleActionBarsEx.Create;
    ActionManager.Style := ExStyle;
  end;
end;

procedure FinalizeStyle;
var
  ActionManager: TActionManager;
begin
  if not Assigned(ExStyle) then
    Exit;
  ActionManager := FindMainActionManager;
  if Assigned(ActionManager) then
  begin
    ActionManager.Style := PlatformDefaultStyle;
    FreeAndNil(ExStyle);
  end;
end;

initialization
  InitializeStyle;

finalization
  FinalizeStyle;

end. 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T04:48:54.493

根据[Winspector](http://www.softpedia.com/get/Security/Security-Related/Winspector.shtml)，XE2 的主菜单是`TActionMainMenuBar`. （不幸的是，由于 Winspector 的工作方式，无法使用 Snagit 获取屏幕截图。）

我能想到的解决方案只有三个：

1.  安装更少的“必要的插件”（您显然会考虑并拒绝）。

2.  获得支持更高屏幕分辨率的更大显示器，为您提供更多屏幕区域（您会再次考虑并拒绝）。

3.  编写一个 IDE 插件，`View`使用`ToolsAPI`. [`GExperts`](http://www.gexperts.org)并且[`JEDI JVcl`](http://www.delphi-jedi.org)具有用于访问现有菜单（并添加您自己的菜单）到您应该能够适应的 IDE 的示例代码。

# war - JBoss 7 - 战争在哪里爆发？

> ID：12434409
> 
> 赞同：2
> 
> 时间：2012-09-15T04:08:04.050
> 
> 标签：war, jboss7.x, exploded

我想知道部署的“WAR”文件在 JBoss 7 中的哪个位置被炸开？在 JBoss 4.3 中，它会在“tmp”文件夹中的某个地方爆炸，但我无法找到它在 JBoss 7 中爆炸到的位置。谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-18T13:42:59.150

它并没有真正爆炸，而是作为虚拟文件系统 (vfs) 安装的。您可以在 tmp/vfs/deployment* 和 tmp/vfs/temp* 中找到文件

更多信息在这里：[https ://community.jboss.org/wiki/VFS3UserGuide](https://community.jboss.org/wiki/VFS3UserGuide)

# xcode - 使用来自 libc++ 的 std::list 的对象层次结构（错误？）

> ID：12434412
> 
> 赞同：1
> 
> 时间：2012-09-15T04:10:01.783
> 
> 标签：xcode, list, stl, libc++

我想我在 libc++ 列表实现中发现了一个错误。在 xcode 中使用某些构建设置时，以下代码将产生编译器错误（字段具有不完整的类型 'foo'）：

```
#include <list>

using namespace std;

class foo {
    public:
        list<foo> bar;
}; 
```

设置如下：

**XCode 版本：** 4.4.1
**C++ 语言方言：** C++11 或 GNU++11
**C++ 标准库：**具有 C++ 扩展的 LLVM C++ 标准库 (libc++11)

使用 GCC 的 libstdc++ 将解决该错误。
不使用 C++11 方言将解决该错误。
使用向量而不是列表将解决该错误。

我认为这是列表实现中的一个错误，但我不确定。
原谅我的无知，但我不知道我应该怎么做才能解决这个问题。
在我的项目中切换到矢量不是一个选项，我绝对需要 C++11 功能。这也包括 shared_ptr，但使用 GCC 时缺少标头。除此之外，苹果似乎不再提供新版本的 GCC。

如果有人可以重新创建此问题，我将不胜感激，也许使用来自 libc++ 的新标头。

另外，如果更新 LLVM/libc++ 可以解决这个问题，你推荐吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T04:46:48.643

C++ 标准 17.6.4.8：

> 在某些情况下（替换函数、处理函数、用于实例化标准库模板组件的类型的操作），C++ 标准库依赖于 C++ 程序提供的组件。如果这些组件不满足其要求，则标准对实施没有要求。
> 
> 特别是，在以下情况下效果是不确定的：
> 
> *   ...
> *   如果在实例化模板组件时将不完整的类型 (3.9) 用作模板参数，除非该组件特别允许。

标准库的容器类模板，包括`list`，都没有提到任何对不完整类型的允许。所以你的程序是一个无效的程序，可能碰巧可以与某些编译器一起使用。这不能被视为标准库实现中的错误。

# spinner - 如何从 cursorloader 填充微调器？

> ID：12434413
> 
> 赞同：2
> 
> 时间：2012-09-15T04:10:17.150
> 
> 标签：spinner, android-cursorloader

我花了几天的时间来解决这个问题，但没有运气。希望我能从这里得到答案。我尝试使用 cursorLoader 方法将数据从我的内容提供程序加载到微调器中。微调器似乎已收到数据，但我在下拉列表中没有发现任何数据，尽管已创建了几个下拉项目（没有文本）。

我相信问题不在于我的提供者，因为如果我使用相同的游标来检索数据并将其放入数组中，然后将数组绑定到微调器，那么它会正确显示所有项目。

下面是我的代码，

```
package com.supreme2u.shopper;

import android.app.Activity;
import android.app.LoaderManager;
import android.content.CursorLoader;
import android.content.Loader;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.SimpleCursorAdapter;
import android.widget.Spinner;

import com.supreme2u.shopper.provider.ShopperProvider;

public class RecordActivity extends Activity  implements LoaderManager.LoaderCallbacks<Cursor>  {
private SimpleCursorAdapter sAdapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_record);

    getLoaderManager().initLoader(0, null, this);     
    sAdapter = new SimpleCursorAdapter(
            this,
            android.R.layout.simple_spinner_item,
            null, 
            new String[] {ShopperProvider.TAG_COLUMN_TAG}, 
            new int[] {R.id.spinner1},
            0);
    sAdapter.setDropDownViewResource(android.R.layout.simple_spinner_item);
    Spinner v = (Spinner) findViewById(R.id.spinner1);
    v.setAdapter(sAdapter);
}

public Loader<Cursor> onCreateLoader(int arg0, Bundle arg1) {
    CursorLoader cursorLoader = new CursorLoader(
            this, 
            ShopperProvider.CONTENT_URI_TAGS, 
            ShopperProvider.TAG_COLUMNS, 
            null, 
            null, 
            null);
    return cursorLoader;
}

public void onLoadFinished(Loader<Cursor> arg0, Cursor arg1) {
    sAdapter.swapCursor(arg1);
}

public void onLoaderReset(Loader<Cursor> arg0) {
    sAdapter.swapCursor(null);
}

} 
```

我的布局xml：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<Spinner
    android:id="@+id/spinner1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content" />
</LinearLayout> 
```

从我的 ShopperProvider 类中提取，

```
public static final Uri CONTENT_URI_TAGS = Uri.parse("content://com.supreme2u.shopper.provider/tableTag");

public static final String TAG_COLUMN_ID = "_id";
public static final String TAG_COLUMN_TAG = "tagName";
public static final String[] TAG_COLUMNS = {"_id","tagName"}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-29T16:59:23.987

问题在于您对 SimpleCursorAdapter 的构造，特别是第二个和第五个参数（*layout*和*to*）。从文档：

> *layout*：定义此列表项的视图的布局文件的资源标识符。布局文件应该至少包括那些在“to”中定义的命名视图
> 
> *to*：应该在“from”参数中显示列的视图。这些都应该是 TextViews。此列表中的前 N ​​个视图被赋予 from 参数中前 N 列的值。如果游标尚不可用，则可以为 null。

所以你使用*android.R.layout.simple_spinner_item*是正确的*layout*。但是，传递的视图*需要*是 TextViews 并包含在*android.R.layout.simple_spinner_item*中：即*android.R.id.text1*而不是*R.id.spinner1*。

简而言之，请改用这种结构：

```
sAdapter = new SimpleCursorAdapter(
        this,
        android.R.layout.simple_spinner_item,
        null, 
        new String[] {ShopperProvider.TAG_COLUMN_TAG}, 
        new int[] {android.R.id.text1},
        0); 
```

# css - 溢出：隐藏在身体上的内容在 ios6 中被破坏

> ID：12434416
> 
> 赞同：14
> 
> 时间：2012-09-15T04:11:51.700
> 
> 标签：css, safari, mobile-safari, ios6

我已经做了一些测试，据我所知，ios6 上的移动 Safari 存在一个错误。

当添加标签并将元素移出主体时，使用它会`overflow:hidden`为该元素创建一个额外的可滚动空间。在所有桌面浏览器上，它都是“隐藏的”。`body``transform:translateX(100%);`

这是一个演示：http: [//jsfiddle.net/mUB5d/1](http://jsfiddle.net/mUB5d/1)。在 Mobile safari 中打开它，你会看到有什么问题。

任何人都可以查看 Mac OS 上的 safari 6 以查看该错误是否也存在？除了围绕我的元素创建另一个父级之外，有人知道任何解决方法吗？

感谢您的反馈意见！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T17:09:34.903

没有。Mac 上的 Safari 6 不存在该错误。滚动条不存在。

我在 OSX Mountain Lion (10.8.2) 上运行它

![在此处输入图像描述](../Images/0b6884774111f6aee4c04bbcd41e50d1.png)

为了进一步回答您的问题，发生这种情况的原因可能更多地与 Mobile Safari 的缩放渲染有关，而不是溢出隐藏错误。该元素实际上被隐藏在屏幕外（注意下面我一直向右滚动的位置，它仍然没有向我显示完整的 100% 宽度元素 - 其中 90% 实际上是隐藏的。

它可能与 iframe 和页面缩放有关。不过看起来仍然像一个错误。

我假设您是在 JSFiddle 中从一个真实的例子中演示的。如果您回到现实生活中的示例（除了 iframe 领域），如果您还没有此元标记，请尝试将其添加到头部，并查看它有帮助：

`<meta name="viewport" content="width=device-width, initial-scale=1">`

![在此处输入图像描述](../Images/d20ba4029d3b5c49301ad1ec5ca3f74e.png)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-02-23T12:04:15.417

这是 iOS 上的正常行为（仅限 iOS）。`overflow: hidden`您可以通过同时声明`html`和`body`元素来解决它。此外，您应该将 body 设置为`position: relative`.

## 溢出行为

这里有几件事在起作用。要了解修复工作的原因，我们首先需要看看视口溢出是如何设置的。

*   视口的溢出由`html`元素的溢出设置决定。
*   但只要您将`html`元素的溢出保留为默认值 ( `visible`)，主体的溢出设置也会应用于视口。即，您可以在目标视口时设置`html`或`body`设置。`overflow: hidden`到目前为止，body 元素本身的溢出行为不受影响。
*   现在，如果您将`html`元素的溢出设置为 以外的任何值，则不再发生`visible`从到视口的转移。`body`在您的特定情况下，如果您将两个溢出都`hidden`设置为 ，则`html`元素的设置将应用于视口，并且`body`元素也会隐藏其溢出。

实际上，在每个相当现代的浏览器中都是如此，而不是特定于 iOS。

## iOS 怪癖

现在，iOS 忽略`overflow: hidden`了视口。无论您在 CSS 中声明什么，浏览器都保留将内容作为一个整体显示的权利。这是故意的，而不是错误，并且在 iOS 7 和 8 中仍然如此。对此也没有任何人可以做的事情 - 它无法关闭。

但是您可以通过使主体元素本身而不是视口隐藏其溢出来解决它。要做到这一点，您必须首先将`html`元素的溢出设置为除 之外的任何值`visible`，例如设置为`auto`或`hidden`（在 iOS 中，两者没有区别）。这样，body 溢出设置不会转移到视口，并且当您将其设置为时实际上会粘在 body 元素上`overflow: hidden`。

有了它，大多数内容都被隐藏了。但是仍然有一个例外：绝对定位的元素。它们的最终偏移父对象是视口，而不是主体。如果它们位于屏幕外、右侧或底部的某个位置，您仍然可以滚动到它们。为了防止这种情况，您可以简单地将 body 元素设置为`position: relative`，这使其成为定位内容的偏移父级，并防止这些元素脱离 body 框。

## 用代码回答

最后要注意一个问题：主体本身不能大于视口。

所以body需要设置为视口宽度和高度的100%。（实现它的纯 CSS 方法的功劳归于[这个 SO answer](https://stackoverflow.com/a/6654996/508355)。）`html`和`body`元素的边距必须为 0，并且 也`html`不能有填充或边框。

最后，为了处理 body padding，并且如果你想在 body 上设置一个边框，让数学与`box-sizing: border-box`body 一起工作。

所以这里。

```
html {
  overflow: hidden;

  height: 100%;
  margin: 0;
  padding: 0;
  border: none;
}

body {
  overflow: hidden;
  position: relative;

  box-sizing: border-box;
  margin: 0;
  height: 100%;
} 
```

NB 你可以随意设置body padding 和border。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-23T05:26:10.343

在为此苦苦挣扎了一段时间后，我发现`html`和`body`标签都需要隐藏溢出才能真正隐藏溢出的内容。在`body`溢出隐藏的元素上工作正常，所以我们的选择是额外的 css 规则或包装元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-31T10:19:22.767

对我来说它有效

[我已经在左侧菜单中实现了](http://i.stack.imgur.com/Eiv0q.png)

```
if($('.left-menu-panel').is(':visible')) {$("body").addClass('left-menu-open');$("html").css('overflow-y','hidden'); $('body').click(function() {$("body").removeClass("left-menu-open") ;$("html").css('overflow-y','visible'); });$('#off-canvas-left').click(function(event){event.stopPropagation();}); } 
```

# css - 切换 div 按下其他 div

> ID：12434417
> 
> 赞同：1
> 
> 时间：2012-09-15T04:11:56.027
> 
> 标签：css, html, containers

我网站的表单页面上有 3 个 div。每当我单击切换按钮时，左上角的切换与底部 div 重叠。

我想要做的是，当单击顶部 div 容器时，左下角的 div 容器应该向下移动，并在切换关闭时移回原来的位置。

我已经包含了正确 div 的 css，我不知道这是否是影响它旁边两个 div 位置的 css。

**切换前**

![在此处输入图像描述](../Images/5d56ed527a009766b44d546c29feeadd.png)

**切换后**

![在此处输入图像描述](../Images/a12aea902f5a72d643ac2e0efe2955a2.png)

**切换的 CSS**

```
#toggle-view {
list-style:none;    
font-family:arial;
font-size:10px;
margin:0;
padding:0;
width:200px; 
position: absolute;
}

#toggle-view li {
    list-style:none;
    text-decoration:none;
    font-size:13px;
    font-family:'lato';
    padding:2px;
    margin:10px;
    margin-left:20px;
    position:relative;
    cursor:pointer; 
    border-radius: 5px;    
}

 #toggle-view li a:hover {
    color: brown;  
}

#toggle-view h3 {
    margin:0;
    font-size:13px;
    color:#2a5a9a;
}

#toggle-view span {
    position:absolute;
    right:5px; top:0;
    color:#2a5a9a;
    font-size:20px;
    font-weight: bolder;
}

#toggle-view p {
    margin:5px 0;
    display:none;
}

#toggle-view a{
    padding:5px 0;
    color:#35371c; 
}

#toggle-view a:hover{

     color:#2a5a9a;
} 
```

**左框的 CSS**

```
.report{
position: absolute;
margin-top:100px;
margin-left:0;
padding-left: 20px;
} 
```

**右框的 CSS**

```
.register-body {
height:auto;
font-size:1em;
width:710px;
position:relative;
color:#000;
border-radius:5px;
background-color:#d2d4bb;
line-height:20px;         
margin:20px 0 20px 250px;
padding:15px 15px 0; 
} 
```

当我改变

```
#toggle-view {
position: absolute;
} 
```

至

```
#toggle-view {
position: relative;
} 
```

和

```
.report{
 position: absolute;
} 
```

至

```
.report{
 position: relative;
 } 
```

我懂了 ：

![在此处输入图像描述](../Images/214bcb79826d49d12eb6796555b55743.png)

右框被推到左下框下方。

**更新**

我的**HTML**

对于切换：

```
<ul id="toggle-view">
<li>
    <h3>Create View Comment</h3>
        <span>+</span>
            <p>
                <a href="forum.php">Forum Homepage </a><br>
                <a href="create-topic.php">Create Topic </a><br>
                <a href="view-topic.php">View Topics</a><br>
                <a href="forum-stat.php">Forum Stats</a><br>
            </p>
</li> 
```

对于左下形式

```
<div class='headword'>Report A User</div>
     p>
    <form action="<?php echo htmlentities($_SERVER['PHP_SELF']); ?>" method="post">
          <?php
           $user = mysql_query("SELECT forum_id, username, first_name, last_name, email
             FROM forum_login ORDER BY username ASC") or die(mysql_error());

  echo"User <select name='username' class='tap_Select' title='User You Want To Report'>
                    <option value =''>    </option>";
                    while($row1 = mysql_fetch_array($user)){                                            
       echo '<option value="'.$row1['username'].'">'.$row1['username'].'</option>';} 
                       echo '</select>' ; ?><br>
   <select name="type" class="tap_Select" title='What Are You Reporting For'>
        <option value ="">    </option>
        <option value ="bullying">Bullying</option>
        <option value ="trolling">Trolling</option>
        <option value ="spamming">Spamming</option>
        </select> 
         <br>
        <textarea type="text" name="desc"  style="width:150px ; height: 100px;">

       </textarea><br>
       <input type="submit" name="submit1" class="tap1_Btn">
       </form> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T04:22:57.563

如果没有您的完整 html，我会说它`position: absolute`在您的`.report`css 中。Absolute 会将其从正常布局流程中拉出，这样任何其他布局`div`都会与它发生冲突，除非您更改值 one toggle 或使用 a或`top`将其放回流程中。`position: relative``position: static`

我只会删除`position: absolute`并调整您的`padding`and`margin`以便它在您想要的地方流动。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:32:47.967

**看到直播页面后更新：**

`<ul id="toggle-view"></ul><div class="report"></div>`像这样添加一个 div并让它在`<div class="register-body"></div>`外面：

```
<div class="left_pane">
    <ul id="toggle-view">
        ...
    </ul>
    <div class="report">
        ...
    </div>
</div>
<div class="register-body">
...
</div> 
```

添加`.left_pane`到 css 并设置流动：

```
.left_pane {
    width: 200px;
    float: left;
} 
```

在`position: absolute;`你的`#toggle-view`.

对于`.register-body`添加`float: left;`并更改`margin: 20px 0 20px 250px;`为`margin: 20px 0 20px 20px;`

应该没问题...

# sql - 关于一个表的主键作为另一个表的外键

> ID：12434423
> 
> 赞同：-3
> 
> 时间：2012-09-15T04:12:30.817
> 
> 标签：sql, oracle

我有两个名为 EMPLOYEE 和 DEPARTMENT 的表，如下所示：

```
CREATE table "EMPLOYEE" (
    "EMP_ID"     NUMBER,
    "ENAME"      VARCHAR2(4000),
    "SALARY"     VARCHAR2(4000),
    "COMPANY"    VARCHAR2(4000),
    "CONTACTNO." NUMBER,
    "GENDER"     CHAR(100),
    constraint  "EMPLOYEE_PK" primary key ("EMP_ID")
)

CREATE TABLE  "DEPARTMENT" 
(   
    "DEPT_ID" NUMBER, 
    "DEPT_NAME" VARCHAR2(4000), 
    "LOCATION" VARCHAR2(4000), 
    "CONTACTNO." NUMBER, 
     CONSTRAINT "DEPARTMENT_PK" PRIMARY KEY ("DEPT_ID") ENABLE
) 
```

现在我正在尝试将 EMPLOYEE 表的 Emp_ID 作为 EMPLOYEE 表本身的主键，但它应该作为 DEPARTMENT 表中 DEPT_ID 的外键，请告知如何实现这一点！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T05:08:06.240

如果`EMPLOYEE`要成为父表并且`DEPARTMENT`要成为子表，则需要在表`DEPARTMENT`中引用的位置定义外键。外键在子表上创建并引用父表。`EMP_ID``EMPLOYEE`

```
CREATE TABLE  "DEPARTMENT" 
(   
    "DEPT_ID" NUMBER, 
    "DEPT_NAME" VARCHAR2(4000), 
    "LOCATION" VARCHAR2(4000), 
    "CONTACTNO." NUMBER, 
     CONSTRAINT "DEPARTMENT_PK" PRIMARY KEY ("DEPT_ID") ENABLE,
     CONSTRAINT department_fk FOREIGN KEY( DEPT_ID )
       REFERENCES employee( EMP_ID )
) 
```

当然，根据您的示例，定义外键约束将是一种完全不正确的数据建模方法。有效部门 ID 集受员工 ID 集约束是没有意义的。以这种方式定义外键还可以防止部门拥有超过 1 名员工。如果您真的在为部门和员工建模，您将向表中添加一`DEPT_ID`列`EMPLOYEE`，该`EMPLOYEE`表将是子表，而不是父表，并且将在表上定义外键`EMPLOYEE`以引用该`DEPARTMENT`表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:22:27.167

我希望这可以帮助你

```
CREATE table "EMPLOYEE" (
"EMP_ID"     NUMBER,
"ENAME"      VARCHAR2(4000),
"SALARY"     VARCHAR2(4000),
"COMPANY"    VARCHAR2(4000),
"Dept_id"    NUMBER,
"CONTACTNO." NUMBER,
"GENDER"     CHAR(100),
 constraint  "EMPLOYEE_PK" primary key ("EMP_ID"),
 CONSTRAINT fk_DeptId FOREIGN KEY (Dept_Id)
 REFERENCES Department("Dept_Id") 
); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-15T04:47:39.240

```
CREATE table "EMPLOYEE" (
    "EMP_ID"     NUMBER,
    "ENAME"      VARCHAR2(4000),
    "SALARY"     VARCHAR2(4000),
    "COMPANY"    VARCHAR2(4000),
    "CONTACTNO"  NUMBER,
    "GENDER"     CHAR(100),
    constraint  "EMPLOYEE_PK" primary key ("EMP_ID")
)

ALTER TABLE "EMPLOYEE" ADD CONSTRAINT "EMPLOYEE_FK" 
FOREIGN KEY ("EMP_ID")
REFERENCES "DEPARTMENT" ("DEPT_ID") 
```

# python - 如何在 matplotlib 等高线图中设置虚线长度

> ID：12434426
> 
> 赞同：8
> 
> 时间：2012-09-15T04:12:56.153
> 
> 标签：python, matplotlib

我正在 matplotlib 中制作一些等高线图，并且破折号的长度太长。虚线也不好看。我想手动设置破折号的长度。当我使用 plt.plot() 制作一个简单的绘图时，我可以设置确切的破折号长度，但是我不知道如何用等高线图做同样的事情。

我认为下面的代码应该可以工作，但我得到了错误：

```
File "/Library/Python/2.7/site-packages/matplotlib-1.2.x-py2.7-macosx-10.8-intel.egg/matplotlib/backends/backend_macosx.py", line 80, in draw_path_collection
    offset_position)
TypeError: failed to obtain the offset and dashes from the linestyle 
```

这是我正在尝试做的一个示例，改编自 MPL 示例：

```
import numpy as np
import matplotlib.mlab as mlab
import matplotlib.pyplot as plt

delta = 0.025
x = np.arange(-3.0, 3.0, delta)
y = np.arange(-2.0, 2.0, delta)
X, Y = np.meshgrid(x, y)
Z1 = mlab.bivariate_normal(X, Y, 1.0, 1.0, 0.0, 0.0)
Z2 = mlab.bivariate_normal(X, Y, 1.5, 0.5, 1, 1)
# difference of Gaussians
Z = 10.0 * (Z2 - Z1)

plt.figure()

CS = plt.contour(X, Y, Z, 6, colors='k',linestyles='dashed')

for c in CS.collections:
    c.set_dashes([2,2])

plt.show() 
```

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-17T08:16:38.763

几乎。

它的：

```
for c in CS.collections:
    c.set_dashes([(0, (2.0, 2.0))]) 
```

如果你放了一个`print c.get_dashes()`那里，你会发现（这就是我所做的）。

也许线条样式的定义发生了一些变化，并且您使用的是较旧的示例。

[收藏文档](http://matplotlib.org/api/collections_api.html)有这样的说法：

> *   set_dashes(ls)
>     
>     
>     
>     set_linestyle 的别名
>     
>     
> *   set_linestyle(ls)
>     
>     
>     
>     设置集合的线型。
>     
>     
>     
>     接受：['固体'| '虚线', 'dashdot', '虚线' | （偏移量，on-off-dash-seq）]

所以在 中`[(0, (2.0, 2.0))]`，0 是偏移量，然后元组是开关重复模式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-08-08T18:48:44.757

虽然这是一个老问题，但我不得不处理它，而当前的答案不再有效。更好的方法是`plt.rcParams['lines.dashed_style'] = [2.0, 2.0]`在你的情节之前使用。

# templates - 覆盖 magento 核心管理模板

> ID：12434429
> 
> 赞同：0
> 
> 时间：2012-09-15T04:13:38.917
> 
> 标签：templates, magento, layout, overriding, block

覆盖核心 Magento 管理模板的最佳方法是什么？例如：

**app\design\adminhtml\default\default\template\page\header.phtml**

我只是想在右上角的菜单上创建一个链接，而不需要直接修改它或重新创建整个模板。现在我有一个自定义模块，它有一个这样的布局块：

```
<reference name="header">
<action method="setTemplate">
<template>mynamespace_mymodule/header.phtml</template>
</action>
</reference> 
```

这很好用，但我必须完全重新创建模板。有没有办法只添加链接而不重新创建整个模板？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:25:52.970

不幸的是，不，如果您需要将它包含在该容器 div 中，则没有一种方法可以在不复制整个模板的情况下做到这一点。模板通常会包含一些点，你可以通过做类似的事情来挂钩`$this->getChildHtml('before_body_close')`，或者更通用的`$this->getChildHtml()`，但在这种情况下没有这样的调用。您可能会包含一个新块作为标题块的兄弟，并尝试使用 CSS 定位它，但要正确定位它会非常棘手，而且可能无论如何都无法维护。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:36:50.943

您还可以将 adminhtml 设置为具有基本和自定义版本（基于主题）并将默认内容复制到`app/design/adminhtml/base/default/`. 然后复制您要编辑的模板`app/design/adminhtml/your_package/your_theme/`并在管理员中应用主题。这样你仍然可以复制它，但是以一种更合乎逻辑和整洁的方式恕我直言。

请注意，您还必须将其应用于`skin/adminhtml`

# cassandra - 如何获取 Cassandra 中可用行的 get_range？

> ID：12434430
> 
> 赞同：1
> 
> 时间：2012-09-15T04:13:38.067
> 
> 标签：cassandra, pycassa

在我的应用程序中，我想获取列族中的所有行，但要忽略暂时不可用的行（例如，某些节点已关闭）。

我有多个节点。如果其中一个节点关闭，`get_range`则将抛出`UnavailableException`，我什么也得不到。

我想要的是获取当前可用的所有行，因为对于用户来说，它总比没有好。我怎样才能做到这一点？

*   我正在使用 pycassa。
*   我的列族中的行键就像随机字符串，所以我不能用来`get`一一获取所有行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T01:22:42.153

如果[`get_range`按令牌支持](https://github.com/pycassa/pycassa/issues/170)添加到 pycassa，您可以分别获取每个令牌范围（由 报告`describe_ring`），丢弃导致 UnavailableException 的那些。除此之外，正如 Dean 所说，使用一致性级别 ONE 是您的最佳选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T00:55:59.550

应该有一个调用来获取一个行键列表，这样你就不需要一个一个地获取它们。另外，如果您有索引，那会有所帮助。例如 playORM 对表的每个分区都有一个索引（您可以拥有任意数量的分区）。这样，您就可以遍历每个索引并调用 get 传递给它的键列表。

此外，请确保您的一致性读取也设置为 ONE ;)。

后来，迪恩

# ios - 故事板中的 ioslazytableimages

> ID：12434437
> 
> 赞同：2
> 
> 时间：2012-09-15T04:15:31.153
> 
> 标签：ios

如何将 iphone lazytableimages 从 .xib 文件转换为使用情节提要？或任何使用情节提要的示例代码，类似于lazytableimages。来自[https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html的源代码](https://developer.apple.com/library/ios/#samplecode/LazyTableImages/Introduction/Intro.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:23:29.273

控制器的视图来自哪里并不重要，无论是 xib、代码还是故事板。在该示例的情况下，控制器的代码不会更改，只需确保将场景放在情节提要上，设置它的视图控制器类并连接所有插座。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T15:01:37.877

```
#import "MasterListViewController.h"
#import "AppRecord.h"
#import "RootViewController.h"
#import "ParseOperation.h"

#define kCustomRowHeight    60.0
#define kCustomRowCount     7

static NSString *const TopPaidAppsFeed =
@"http://phobos.apple.com/WebObjects/MZStoreServices.woa/ws/RSS/toppaidapplications/limit=75/xml";

@interface MasterListViewController ()
- (void)startIconDownload:(AppRecord *)appRecord forIndexPath:(NSIndexPath *)indexPath;
@end

@implementation MasterListViewController

@synthesize entries;
@synthesize imageDownloadsInProgress;

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    self.imageDownloadsInProgress = [NSMutableDictionary dictionary];
    self.tableView.rowHeight = kCustomRowHeight;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];

    NSArray *allDownloads = [self.imageDownloadsInProgress allValues];
    [allDownloads makeObjectsPerformSelector:@selector(cancelDownload)];
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    int count = [entries count];

    if (count == 0)
    {
        return kCustomRowCount;
    }
    return count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    // customize the appearance of table view cells
    //
    static NSString *CellIdentifier = @"LazyTableCell";
    static NSString *PlaceholderCellIdentifier = @"PlaceholderCell";

    // add a placeholder cell while waiting on table data
    int nodeCount = [self.entries count];

    //NSLog(@"RootViewController - nodeCount is %d",nodeCount);

    if (nodeCount == 0 && indexPath.row == 0)
    {
        UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:PlaceholderCellIdentifier];
        if (cell == nil)
        {
            cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                           reuseIdentifier:PlaceholderCellIdentifier];
            cell.detailTextLabel.textAlignment = UITextAlignmentCenter;
            cell.selectionStyle = UITableViewCellSelectionStyleNone;
        }

        cell.detailTextLabel.text = @"Loading…";

        return cell;
    }

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle
                                       reuseIdentifier:CellIdentifier];
        cell.selectionStyle = UITableViewCellSelectionStyleNone;
    }

    // Leave cells empty if there's no data yet
    if (nodeCount > 0)
    {
        // Set up the cell...
        AppRecord *appRecord = [self.entries objectAtIndex:indexPath.row];

        cell.textLabel.text = appRecord.appName;
        cell.detailTextLabel.text = appRecord.artist;

        // Only load cached images; defer new downloads until scrolling ends
        if (!appRecord.appIcon)
        {
            if (self.tableView.dragging == NO && self.tableView.decelerating == NO)
            {
                [self startIconDownload:appRecord forIndexPath:indexPath];
            }
            // if a download is deferred or in progress, return a placeholder image
            cell.imageView.image = [UIImage imageNamed:@"Placeholder.png"];
        }
        else
        {
            cell.imageView.image = appRecord.appIcon;
        }

    }

    return cell;
}

- (void)startIconDownload:(AppRecord *)appRecord forIndexPath:(NSIndexPath *)indexPath
{
    IconDownloader *iconDownloader = [imageDownloadsInProgress objectForKey:indexPath];
    if (iconDownloader == nil)
    {
        iconDownloader = [[IconDownloader alloc] init];
        iconDownloader.appRecord = appRecord;
        iconDownloader.indexPathInTableView = indexPath;
        iconDownloader.delegate = self;
        [imageDownloadsInProgress setObject:iconDownloader forKey:indexPath];
        [iconDownloader startDownload];
    }
}

- (void)loadImagesForOnscreenRows
{
    if ([self.entries count] > 0)
    {
        NSArray *visiblePaths = [self.tableView indexPathsForVisibleRows];
        for (NSIndexPath *indexPath in visiblePaths)
        {
            AppRecord *appRecord = [self.entries objectAtIndex:indexPath.row];

            if (!appRecord.appIcon) // avoid the app icon download if the app already has an icon
            {
                [self startIconDownload:appRecord forIndexPath:indexPath];
            }
        }
    }
}

// called by our ImageDownloader when an icon is ready to be displayed
- (void)appImageDidLoad:(NSIndexPath *)indexPath
{
    IconDownloader *iconDownloader = [imageDownloadsInProgress objectForKey:indexPath];
    if (iconDownloader != nil)
    {
        UITableViewCell *cell = [self.tableView cellForRowAtIndexPath:iconDownloader.indexPathInTableView];

        // Display the newly loaded image
        cell.imageView.image = iconDownloader.appRecord.appIcon;
    }

    // Remove the IconDownloader from the in progress list.
    // This will result in it being deallocated.
    [imageDownloadsInProgress removeObjectForKey:indexPath];
}

// Load images for all onscreen rows when scrolling is finished
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
    if (!decelerate)
    {
        [self loadImagesForOnscreenRows];
    }
}

- (void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    [self loadImagesForOnscreenRows];
}

@end 
```

# objective-c - 试图从字符串中获取绝对 URL？

> ID：12434439
> 
> 赞同：0
> 
> 时间：2012-09-15T04:15:45.857
> 
> 标签：objective-c, cocoa

我有以下网址作为字符串

`/Users/username/Documents/`

我需要将其转换为

`file:///localhost/Users/username/Documents/`

所以我可以将它用作 NSOpenPanel 中的路径参数。但我不知道该怎么做？有什么方法吗？我知道如何从绝对 -> 正常，但不是相反。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T04:19:26.283

你需要这样的 fileURLWithPath ：

```
[NSURL fileURLWithPath:@"/Users/username/Documents/"]; 
```

# directx - directx 中的链接错误 d3d.lib

> ID：12434443
> 
> 赞同：-1
> 
> 时间：2012-09-15T04:17:13.487
> 
> 标签：directx

我的程序太奇怪了。

我学习directx，我通常在我的实践中使用教程。

这次我想自己做整个项目。

所以我制作项目并设置链接设置和directx目录。

但我的程序不起作用！

错误说无法打开文件'd3d.lib'。

我设置的选项和教程一样，没有区别。和代码是一样的，剪切和粘贴。

唯一不同的是我是制作还是教程。

我需要你的帮助TT

我使用的是 directx9，SDK 是 Microsoft DirectX SDK（2010 年 6 月）。我的操作系统是 64 位窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T10:03:59.687

它没有打开**d3d.lib**因为没有**d3d.lib** ，您需要链接它是**d3d9.lib 。**

在您的源代码中添加它。

```
#pragma comment(lib, "d3d9.lib") 
```

# blackberry - 黑莓自定义图像按钮

> ID：12434446
> 
> 赞同：2
> 
> 时间：2012-09-15T04:17:57.277
> 
> 标签：blackberry, java-me

我创建了一个自定义图像按钮；一个是**播放**图像按钮，一个是**暂停**图像按钮。

我想在**播放**和**暂停**之间切换（即当用户点击按钮时，它必须改变 - 播放暂停或暂停播放）。

对于我的要求，我参考了这个[示例 url](http://rincethomas.blogspot.in/2012/04/custom-image-button-in-bb.html)

当我执行我的程序时，我能够显示按钮，但是当我单击按钮时，我无法更改图像按钮（播放暂停）

谁能帮我？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T05:11:32.797

您正在处理的示例使用两个图像，**打开**和**关闭**图像。但是，它使用这两个图像来根据按钮是否具有*焦点*来更改按钮的外观。

你想要一些不同的东西。*每当单击*按钮时，您都希望更改按钮的外观。为此，您可以使用此现有方法：

```
protected boolean navigationClick(int status, int time){
    fieldChangeNotify(1);
    return true;
} 
```

为此，更改（或添加）一些成员变量以存储播放和暂停位图，然后更改`navigationClick()`以在它们之间切换：

```
private Bitmap _currentPicture;
private Bitmap _playPicture;
private Bitmap _pausePicture;

protected boolean navigationClick(int status, int time){
    if (_currentPicture == _playPicture) {
        _currentPicture = _pausePicture;
    } else {
        _currentPicture = _playPicture;
    }
    invalidate();  // may be necessary to force redraw of the button

    fieldChangeNotify(1);
    return true;
} 
```

**编辑：**您可能还希望在and方法中执行相同的逻辑（如上面的`navigationClick()`），这取决于您的按钮是否应该可以通过使用拨轮或输入键 来*单击。*[在此处查看示例](https://stackoverflow.com/a/4509592/119114)`trackwheelClick()``keyChar()`

# python - 2d board raw_put string out_ put board坐标

> ID：12434448
> 
> 赞同：-4
> 
> 时间：2012-09-15T04:18:07.317
> 
> 标签：python

在 python 中，我想做的是有一个函数`def players_move`，它接受 len 5 的 raw_input 字符串，例如`b1,i5`检查移动是否合法，然后调用一个新函数`cords()`，该函数接受字符串并输出要在 2d 上更新的坐标木板。

以下是将字符串转换为坐标的内容。如果我要求它返回`b[2],i[5]`但我不能让它接受字符串然后输出 x 和 y 坐标而没有错误，或者它只返回字符串而不是坐标，它会起作用。

```
def cords ():
    move=raw_input('enter starting pos and end pos')        

    a=[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0]]
    b=[[0,1],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1],[7,1],[8,1]]
    c=[[0,2],[1,2],[2,2],[3,2],[4,2],[5,2],[6,2],[7,2],[8,2]]
    d=[[0,3],[1,3],[2,3],[3,3],[4,3],[5,3],[6,3],[7,3],[8,3]]
    e=[[0,4],[1,3],[2,4],[3,4],[4,4],[5,4],[6,4],[7,4],[8,4]]
    f=[[0,5],[1,3],[2,5],[3,5],[4,5],[5,5],[6,5],[7,5],[8,5]]
    g=[[0,6],[1,3],[2,6],[3,6],[4,6],[5,6],[6,6],[7,6],[8,6]]
    h=[[0,7],[1,3],[2,7],[3,7],[4,7],[5,7],[6,7],[7,7],[8,7]]
    i=[[0,8],[1,3],[2,8],[3,8],[4,8],[5,8],[6,8],[7,8],[8,8]]
    xx = move[0], int(move[1])
    #yy = move[3], int(move[4])
    xxx = xx[0],[xx[1]]
    #yyy= yy[3],[yy[4]]
    return xxx#,yyy 
```

我已将 raw_input 包含在函数中，使其在没有其他部分的情况下工作，它旨在输出坐标但它返回 ('b'[1]),'i'[5] 而不是 [1,1], [[3,8] 甚至更好的是它输出 [1][1],[3][8] 如果给定 b1,i5 它有一个错误如果尝试返回 x 和 y 它没有只需 x 即可正常工作，但没有错误有人可以帮忙吗？

然后我需要导入返回的值并在 update_board 函数中更新板子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:48:52.117

```
import re
def get_move(move)  : 
    d = {}
    d['a']=[[0,0],[1,0],[2,0],[3,0],[4,0],[5,0],[6,0],[7,0],[8,0]]
    d['b']=[[0,1],[1,1],[2,1],[3,1],[4,1],[5,1],[6,1],[7,1],[8,1]]
    d['c']=[[0,2],[1,2],[2,2],[3,2],[4,2],[5,2],[6,2],[7,2],[8,2]]
    #made example smaller

    def get_parts(part):
         parts = re.split("([a-zA-Z]+)",part)
     _,ltr,idx =parts
         try:
              return d[ltr.lower()][int(idx)]
         except KeyError:
              raise Exception("Letter {0} Does Not Exist".format(ltr))
         except IndexErrorError:
              raise Exception("Letter {0} Does Not Have Index {1}".format(ltr,idx))
    start,end = move.split(",")

    return get_parts(start),get_parts(end)
print  get_move(raw_input('enter starting pos and end pos')) 
```

结果

```
enter starting pos and end posa3,c4
([3, 0], [4, 2]) 
```

编辑以允许不区分大小写

# jsp - 如何在jsp文件中使用从servlet传递的bean值

> ID：12434449
> 
> 赞同：2
> 
> 时间：2012-09-15T04:18:09.157
> 
> 标签：jsp, jakarta-ee, servlets, javabeans

我将 bean 对象从 servlet 传递到 jsp 文件，并希望按如下方式使用 bean 值，但它会引发运行时错误。我究竟做错了什么？

```
 <%@ page import = "beans.UserInfo" %>
 <%
   UserInfo userInfo = (UserInfo)session.getAttribute("userInfo");
   String userName = userInfo.getUserName();
 %> 
```

例外情况如下：

例外

org.apache.jasper.JasperException: java.lang.NullPointerException org.apache.jasper.servlet.JspServletWrapper.handleJspException(JspServletWrapper.java:491) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:419) org .apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) org.apache.jasper.servlet.JspServlet.service(JspServlet.java:260) javax.servlet.http.HttpServlet.service(HttpServlet.java:717 )

根本原因

java.lang.NullPointerException org.apache.jsp.Login_jsp._jspService(Login_jsp.java:60) org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70) javax.servlet.http.HttpServlet.service(HttpServlet .java:717) org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:377) org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:313) org.apache.jasper.servlet.JspServlet .service(JspServlet.java:260) javax.servlet.http.HttpServlet.service(HttpServlet.java:717)

note Apache Tomcat/6.0.28 日志中提供了根本原因的完整堆栈跟踪。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T04:26:05.003

您在`doPost`或to中的代码`doGet`应如下所示，您正在构建`beans.UserInfo`和发出`forward`.`Dispatcher`

```
 bean.UserInfo info=new bean.UserInfo();
 //set the bean properties
 session.setAttribute("userInfo",info);
 request.getRequestDispatcher("/your_page.jsp")
    .forward(request,response); 
```

# r - R有效地以不同的顺序添加表格

> ID：12434452
> 
> 赞同：1
> 
> 时间：2012-09-15T04:19:08.573
> 
> 标签：r, sum

在我的代码中，我得到了一个看起来很像这样的表列表：

```
[[1]]
     cluster_size start end number       p_value
13             2    12  13    131 4.209645e-233
12             1    12  12    100 6.166824e-185
22            11    12  22    132 6.916323e-143
23            12    12  23    133 1.176194e-139
13             1    13  13     31  3.464284e-38
13            68    13 117     34  3.275941e-37
23            78    23 117      2  4.503111e-32 
```

……

```
[[2]]
      cluster_size start end number       p_value
13             2    12  13    131 4.209645e-233
12             1    12  12    100 6.166824e-185
22            11    12  22    132 6.916323e-143
23            12    12  23    133 1.176194e-139
13             1    13  13     31  3.464284e-38 
```

……

虽然我没有在这里展示完整的表格，但我知道它们的大小都一样。我想要做的是制作一张表格，在其中将 p 值相加。问题是当我查看不同列表元素中的表格时，$cluster_size、start、$end 和 $number 列不一定对应于同一行，所以我不能只做一个简单的求和。

执行此操作的蛮力方法是：1）制作一个空白表 2）从第一个表中复制适当的 $cluster_size、$start、$end、$number 列，并使用 which() 提取正确的 p 值所有表中的语句。有没有更聪明的方法来做到这一点？或者这差不多吗？

编辑：我被要求提供数据的 dput 文件。它位于此处： [http ://alrig.com/code/](http://alrig.com/code/)

在示例情况下，行的顺序恰好匹配。情况并非总是如此。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T04:35:08.773

似乎您可以分两步执行此操作

1.  将您的列表转换为 data.frame
2.  使用任何拆分-应用-组合方法进行总结。

假设您的数据名为 X，您可以执行以下操作：

```
library(plyr)
#need to convert to data.frame since all of your list objects are of class matrix
XDF <- as.data.frame(do.call("rbind", X))
ddply(XDF, .(cluster_size, start, end, number), summarize, sump = sum(p_value))
#-----
   cluster_size start end number          sump
1             1    12  12    100 5.550142e-184
2             1    13  13     31  3.117856e-37
3             1    22  22      1  9.000000e+00
...
29          105    23 117      2  6.271469e-16
30          106    22 146     13  7.266746e-25
31          107    23 146     12  1.382328e-25 
```

[此处](https://stackoverflow.com/questions/10748253/idiomatic-r-code-for-partitioning-a-vector-by-an-index-and-performing-an-operati/10748470#10748470)介绍了许多其他聚合技术。`data.table`如果您的数据很大，我会查看包。

# javascript - 如何确定 javascript 已完成某项操作

> ID：12434458
> 
> 赞同：0
> 
> 时间：2012-09-15T04:20:44.773
> 
> 标签：javascript, ios, mobile-safari

ios上的JS相当慢。例如在这段代码中，Js 在能够添加块样式之前添加了类。这打破了我在页面上的动画。

```
comments.style.display="block";comments.className = "show"; 
```

我有一个解决方法可以解决 ios 上的问题，但感觉不对：

```
comments.style.display="block";setTimeout(function(){comments.className = "show";},1) 
```

有没有办法确定块样式是否已设置，然后才触发第二部分？

感谢您的建议！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:32:00.000

你不能只使用if吗？

```
<div id="foo" style="display: none;">foo</div>

var div = document.getElementById( "foo"  );
if ( div.style.display == "none" ) {
    div.style.display = "block";
} 
```

如果您想收听班级更改（或样式更改）“事件”，可以尝试以下链接：

*   [事件检测何时使用 Jquery](https://stackoverflow.com/questions/1397251/event-detect-when-css-property-changed-using-jquery) <= 更改 css 属性这解决了没有 jQuery 的问题
*   [jQuery - 如果 CSS 类发生更改，则触发事件](https://stackoverflow.com/questions/1950038/jquery-fire-event-if-css-class-changed)
*   [在 CSS 更改上使用 Jquery 触发事件？](https://stackoverflow.com/questions/8671001/trigger-event-using-jquery-on-css-change)
*   [是否可以收听“风格改变”事件？](https://stackoverflow.com/questions/2157963/is-it-possible-to-listen-to-a-style-change-event)

我认为第一个将解决您的问题。这是代码：

```
document.documentElement.addEventListener( "DOMAttrModified", function( evt ){
    if ( evt.attrName === "style" ) {
        if ( evt.newValue.indexOf( "block" ) != -1 ) {
            alert( "do something!" );
        }
    }
}, false );

document.getElementById( "foo" ).style.display = "block"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:45:36.183

这是一个可能有效的黑客的光荣混乱：

```
comments.blockStyleEvent = function() {
   if ( this.style.display === "block" ) {
      this.onBlockStyleEvent.apply(this);
   }
};

comments.onBlockStyleEvent = function() {
   this.className = "show";
};

setInterval(function(){
  comments.blockStyleEvent();
}, 1); 
```

`show`例如，您还可以一个又一个地创建两个 css 类，`showAsBlock`然后您可以这样做：

```
// somewhere else
comments.className = "hide";

// ...then
comments.className = "showAsBlock"; 
```

# hibernate - 德比非法访问错误

> ID：12434464
> 
> 赞同：1
> 
> 时间：2012-09-15T04:22:13.350
> 
> 标签：hibernate, jpa, derby

尝试使用 Hibernate、JPA 和嵌入式 Derby 组装一个非常小的 JPA 测试应用程序。从 Derby 获取 IllegalAccessError，我无法在 Internet 上解决或找到可用信息：

```
Exception in thread "main" java.lang.IllegalAccessError: tried to access method       org.apache.derby.jdbc.EmbeddedDriver.boot()V from class org.apache.derby.jdbc.AutoloadedDriver 
```

derby.jar 10.9.1.0 在类路径中。

我已经成功地为我的 Oracle XE 实例设置了一个类似的 persistence.xml，它运行良好。

我没有运行任何 derby 网络服务器。我已遵循 derby 安装说明并验证了安装。我使用 derby "ij" 命令行工具来创建我的数据库（名为 "swift"）。

我无法理解这个例外，并且肯定会欣赏一些新的眼睛。

* * *

缩写堆栈跟踪：

```
INFO: HHH000401: using driver [org.apache.derby.jdbc.EmbeddedDriver] at URL       [jdbc:derby:localhost:1527/swift:create-true]
Sep 14, 2012 11:12:00 PM     org.hibernate.service.jdbc.connections.internal.DriverManagerConnectionProviderImpl configure
INFO: HHH000046: Connection properties: {user=swift, password=****, autocommit=true, release_mode=auto}
Exception in thread "main" java.lang.IllegalAccessError: tried to access method     org.apache.derby.jdbc.EmbeddedDriver.boot()V from class org.apache.derby.jdbc.AutoloadedDriver
        at org.apache.derby.jdbc.AutoloadedDriver.getDriverModule(Unknown Source)
        at org.apache.derby.jdbc.AutoloadedDriver.connect(Unknown Source) 
```

* * *

持久性.XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
    xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns /persistence/persistence_2_0.xsd">

<persistence-unit name="persistenceUnit">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.gdeb.swift.NIIN</class>
    <class>com.gdeb.swift.RIC</class>
    <properties>
        <property name="hibernate.connection.driver_class" value="org.apache.derby.jdbc.EmbeddedDriver" />
            <property name="hibernate.connection.url" value="jdbc:derby:/swift:create-true" />
            <property name="hibernate.connection.username" value="swift" />
            <property name="hibernate.connection.password" value="swift" />
    </properties>
    </persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:50:51.860

这有点像在黑暗中拍摄，但希望它能为您指明正确的方向。IllegalAccessError 表示一个类试图调用另一个类中不允许访问的方法（例如私有方法）。显然，在正常情况下，这会在编译时被阻止，但有几种方法可以在运行时出现。具体来说：

*   如果调用者和被调用者是不同的版本，并且方法在一个版本中是公共的，而在另一个版本中是私有的
*   如果调用者和被调用者由不同的类加载器加载，并且它是一个包保护的方法。在这种情况下，这些包可能被认为是不同的，因为它们是在不同的类加载器中加载的。

一些快速的谷歌搜索表明，德比中引导方法的可见性发生了变化。特别是在[10.0](http://svn.apache.org/repos/asf/db/derby/code/branches/10.0/java/engine/org/apache/derby/jdbc/EmbeddedDriver.java)中，它是私有的，而在[10.1.2.1](http://grepcode.com/file/repository.grepcode.com/java/eclipse.org/3.5/org.apache/derby/10.1.2.1/org/apache/derby/jdbc/EmbeddedDriver.java#EmbeddedDriver.boot%28%29)中，它受到包保护并从 AutoloadedDriver 调用。

基于此，我会说您受到第一个案例的打击。看看你是否能找到不止一个版本的 Derby。很可能 AutoloadedDriver 是从一个版本的 derby 加载的，而 EmbeddedDriver 是从另一个用于早期版本的 Derby 的 jar 加载的。

如果是这种情况，请从类路径中删除旧版本的 Derby。

# django - 长时间运行的事务是否会使数据库陷入困境？

> ID：12434471
> 
> 赞同：2
> 
> 时间：2012-09-15T04:23:03.223
> 
> 标签：django, postgresql, transactions

注意：我正在使用 Postgres 9.x 和 Django ORM

我的应用程序中有一些功能可以打开事务，运行一些查询，然后执行整整几秒钟的其他事情（第 3 方 API 访问等），然后再运行一些查询。查询不是很昂贵，但是我一直担心，由于有许多事务打开了这么长时间，我最终会以某种方式使我的数据库陷入困境或用完连接或其他东西。在性能方面，这有多大意义？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T13:22:51.623

保持交易开放有利有弊。

从好的方面来说，每笔交易都有间接费用。如果你可以在一个事务中做几件相关的事情，你通常会赢得性能。

但是，您会在此过程中获取行或整个表的锁（尤其是使用任何类型的写操作）。这些在事务结束时自动释放。如果其他进程可能等待相同的资源，那么在事务保持打开状态时调用外部进程是一个**非常糟糕的主意。**

也许您可以在获取任何锁*之前*调用 3rd 方 API ，然后快速连续执行所有查询？

在 Postgres Wiki 中阅读有关[检查锁的信息](http://wiki.postgresql.org/wiki/Lock_Monitoring)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T05:00:54.737

虽然不是确切的答案，但我不能高度推荐这个演示文稿。

[美国 DjangoCon 上的“PostgreSQL当它不是你的工作”](http://thebuild.com/presentations/not-my-job-djangocon-us.pdf)

它来自今年的 DjangoCon，所以也应该有一个视频，希望很快。

再加上查看作者博客，它是关于整个 Postgres 尤其是 django 的有用信息的金矿。您会在那里找到有关事务处理的有趣信息。

# sql-server-2008 - 在sql server中查询

> ID：12434473
> 
> 赞同：2
> 
> 时间：2012-09-15T04:23:12.973
> 
> 标签：sql-server-2008

In 这个结构是对还是错，这给了我错误

```
SELECT TblProjectResources.UserId 
FROM TblTasks,TblProjectResources 
WHERE TblTasks.ProjectId=TblProjectResources.ProjectId 
AND TblTasks.TaskId=@TaskId AND TblProjectResources.IsRemoved=0 
AND TblProjectResources.UserId IN(
     (SELECT UserId 
      FROM TblProjectResources 
      WHERE IsRemoved=0 
      AND ProjectApproval=1 
      AND ProjectId=@ProjectId) 
     or 
     (SELECT TblAssignments.AssigneeId 
      FROM TblTasks,TblAssignments 
      WHERE TblTasks.TaskId=TblAssignments.AssignmentEntityId 
      AND TblAssignments.AssignmentEntity='Task' 
      AND TblTasks.TaskId=@TaskId) 
     or 
      (SELECT UserId FROM TblProjects WHERE ProjectId=@ProjectId)
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:28:53.247

我认为您正在尝试像这样尝试使用`TblProjectResources.UserId IN`trice `OR`：

```
AND (TblProjectResources.UserId IN
         (SELECT UserId 
         FROM TblProjectResources 
         WHERE IsRemoved=0 
         AND ProjectApproval=1 
         AND ProjectId=@ProjectId) 
     OR
     TblProjectResources.UserId IN 
         (SELECT TblAssignments.AssigneeId 
         FROM TblTasks,TblAssignments 
         WHERE TblTasks.TaskId=TblAssignments.AssignmentEntityId 
         AND TblAssignments.AssignmentEntity='Task' 
         AND TblTasks.TaskId=@TaskId) 
     OR
     TblProjectResources.UserId IN
      (SELECT UserId FROM TblProjects WHERE ProjectId=@ProjectId)
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T04:31:45.003

@hims056 答案应该适合你。作为替代方案，您可以尝试将 OR 替换为 UNION / UNION ALL。这也应该有效。

```
SELECT TblProjectResources.UserId 
FROM TblTasks,TblProjectResources 
WHERE TblTasks.ProjectId=TblProjectResources.ProjectId 
AND TblTasks.TaskId=@TaskId AND TblProjectResources.IsRemoved=0 
AND TblProjectResources.UserId IN(
     (SELECT UserId 
      FROM TblProjectResources 
      WHERE IsRemoved=0 
      AND ProjectApproval=1 
      AND ProjectId=@ProjectId) 
     UNION 
     (SELECT TblAssignments.AssigneeId 
      FROM TblTasks,TblAssignments 
      WHERE TblTasks.TaskId=TblAssignments.AssignmentEntityId 
      AND TblAssignments.AssignmentEntity='Task' 
      AND TblTasks.TaskId=@TaskId) 
     UNION 
      (SELECT UserId FROM TblProjects WHERE ProjectId=@ProjectId)
) 
```

# html - 用于延迟 ajax 结果分页的 iFrame

> ID：12434474
> 
> 赞同：0
> 
> 时间：2012-09-15T04:23:14.693
> 
> 标签：html, iframe

我有一个繁忙的照片网站，每次用户想要加载另一页结果时，它都会发出新页面请求。我现在想实现一个 AJAX/AJAX 样式的分页效果，只对页面的画廊部分。

我可以在 jQuery/JS 中通过 AJAX 加载不同的页面来执行此操作，但是作为作弊，这是否也可以使用 iFrame？因此，当用户搜索时，将输入发布到 iFrame 目标，当他们选择页码时，将其发布到 iFrame 目标。

我问这个是因为我知道 iFrame 有一些好的用途和坏的用途。我想确保这不是坏事之一。我已阅读有关导致使用 iFrame 问题的浏览器后退按钮。如果这是一个好主意，这会是一个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:45:00.067

[你可以在这里](http://api.jquery.com/load/)查看 jQuery 的`.load()`函数。这就是我推荐的。iFrame 仍会发出新的页面请求。同样，实际上将内容构建到您的页面中，而不仅仅是在框架页面中。看起来更专业一点，工作得更好一点，并且在服务器上没有那么重（尽管 1 页面加载并不多）`.load()`

# javascript - jQuery/Javascript .toggleClass/.classList.toggle 的特殊行为

> ID：12434475
> 
> 赞同：0
> 
> 时间：2012-09-15T04:23:21.273
> 
> 标签：javascript, jquery, for-loop, behavior, toggleclass

我第一次在这里问一些事情，我希望你们能像以往一样乐于助人。

我正在用Javascript（也使用一些jQuery）制作一个应该这样做的脚本：假设我们有一个包含用户帖子的页面。如果有人在其中一个帖子上单击用户名，脚本将突出显示同一用户的所有其他帖子。如果一个用户的帖子已经被高亮了，我们在另一个帖子中点击另一个用户的名字，那么之前高亮的帖子必须恢复正常状态，现在必须突出显示另一个用户的帖子。

我写的剧本是这样的。

```
$(function (){
    $(".showall").click(function() {
        var identifier = this.innerHTML;

        var already = document.getElementsByClassName("highlight");
        var l = already.length;

        if (l) {            
            for (i=0; i<l; i++) {
                var to_hide = already[i].id;
                $("#"+to_hide).toggleClass("highlight");
            }
        }

        var sum = document.getElementsByClassName("uid_"+identifier)
        var l = sum.length;
        for (i=0; i<l; i++) {
            var to_show = sum[i].parentNode.parentNode.parentNode.id;
            $("#"+to_show).toggleClass("highlight");
        }

    });

}); 
```

让我解释一下它的作用。

当在指定元素之一上触发 click 事件时，它会存储用户标识符，然后通过检查“highlight”类的文档来检查是否已经有突出显示的评论。

如果有突出显示的评论，则应该从每个评论中删除突出显示类，然后根据用户标识符相应地突出显示任何其他帖子。

脚本的问题出现在 if(l) {} 条件内的循环中，这里

```
if (l) {            
    for (i=0; i<l; i++) {
        var to_hide = already[i].id;            
        $("#"+to_hide).toggleClass("highlight");
    }
} 
```

删除突出显示类时，它会跳过所有其他帖子，并且只循环一半长度。

例如，假设我突出显示了用户的帖子。该用户有 14 个帖子，因此，所有 14 个帖子都被突出显示。现在，如果我想突出显示另一个用户的帖子，然后单击他的名字，脚本将删除以前帖子中的突出显示，如下所示：

从 1 号
帖子中删除 亮点
从 3 号帖子中删除 亮点 从 5 号帖子中 删除亮点

当我再次单击另一个用户名时，它将
从帖子 No2
中删除突出显示 从帖子 No6 中
删除突出显示 从帖子 No10 中
删除突出显示 从帖子 No14 中删除突出显示

等等

我不明白为什么循环会这样。我已经删除了带有 .toggleClass 的行，并使它对数组的每个元素发出警报，并且它对整个长度而不是一半长度这样做，而不会跳过元素。

就像当我使用 .toggleClass 时 i 增加了 2，而我，看在我的份上，不明白为什么。我也尝试过使用 .classList.toggle 来实现，而不使用 jQuery，这又是同样的事情。

任何帮助都感激不尽。向大家问好。

编辑：忘记添加，Chrome 的控制台给了我这个错误，对于脚本正在跳过的帖子：未捕获的类型错误：无法读取未定义的属性 'id'。我明白它的意思，就像它没有找到一个有效的对象来读取 id 属性，但我不明白为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:40:49.820

您的代码似乎过于复杂。

像[这样](http://jsfiddle.net/jaBce/4/)的东西适用于您的用例吗？

```
$('.user-name').click(function (e) {
    e.preventDefault();
    var user_id = $(this).parent().data('userid');

    if (!$(this).parent().hasClass('selected')) {    
        $('.post.selected').removeClass('selected');
        $('.post[data-userId='+ user_id +']').addClass('selected');
    } else {
        $('.post.selected').removeClass('selected');
    }
}); 
```

# jquery - 无法发布和检索复选框数组值

> ID：12434483
> 
> 赞同：0
> 
> 时间：2012-09-15T04:25:25.873
> 
> 标签：jquery, arrays, forms, checkbox

我有一个联系表格，其中包含一些字段，例如姓名、电子邮件、订阅。订阅是一组复选框（数组），允许用户同时选择多个选项。

**重要的：**

请注意，我打算在没有 javascript 的情况下使表单工作，因此我需要输入名称为“订阅 []”。只需看一下复选框的 HTML 代码，您就会明白我的意思。

**完整的源代码（我的调试）：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>AJAX Posting of checkbox array</title>
</head>

<body>

<form id="frm_contact" name="frm_contact" method="post" action="ajax_contact_us.php">

<label for="name">Name</label>

<input type="text" name="name" id="name" class="text"  /><br />

<label for="email">Email</label>

<input type="text" name="email" id="email" class="text"  /><br />

<label for="subscribe">Subscribe</label>

<input type="checkbox" class="subscribe" name="subscribe" value="email" id="subscribe_0" />Email
<input type="checkbox" class="subscribe" name="subscribe" value="sms" id="subscribe_1" />SMS

<br />
<input type="submit" name="sbt_send" id="sbt_send" value="Send" class="btn_submit" />

</form>

<div id="test"></div>

<script type="text/javascript" src="http://code.jquery.com/jquery-latest.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){

    $('#sbt_send').click(function(e) {      

        $('#test').html();  

        var subscribe = new Array();
        $(".subscribe:checked").each(function() {
           subscribe.push($(this).val());
        });

        //Prepare data to be sent
        var dataString = $('#frm_contact').serialize();

        $.ajax({

          type: "POST",
          url: "ajax_contact_us11.php",
          data: dataString,
          dataType: 'json',
          cache: false,

          success: (function(response) 
            {
                if(response.error == 0)             
                {               
                    alert('yes');
                }
                else
                {
                    //alert('no');
                    $('#test').html('');                        

                    $('#test').append(  response.message['name'] + '<br />'+
                                        response.message['email'] + '<br />'+
                                        response.check );                                   
                }
            })                                                
        });                 

        e.preventDefault();

    });

});

</script>     
</body>
</html>

//ajax_contact_us11.php

<?php session_start();

$errors = array();

$str = '';

if( !isset( $_POST['name'] ) || trim( $_POST['name'] ) == '' )
{
    $errors['name'] = 'Enter name';
}

if( !isset( $_POST['email'] ) || trim( $_POST['email'] ) == '' )
{
    $errors['email'] = 'Enter email';
}

if( !isset( $_POST['subscribe'] ) || trim( $_POST['subscribe'] ) == '' )
{
    $errors['subscribe'] = 'Check at least one checkbox';
    $str = $errors['subscribe'];
}
else
{
    $str = $_POST['subscribe'];
}

if(count($errors))
{
    $error = 1;
    $message =  $errors;
}
else
{
    $error = 0;
    $message =  "success";
}   

print json_encode(array('error' => $error, 'message' => $message, 'check' => $str));
die(); 

?> 
```

**问题：**

这里有2个问题。

1.  如果我使用 subscribe[] 作为复选框输入名称，那么我无法获取复选框的任何值，即使它们都被选中或只选中其中一个。

2.  如果我删除 [] 即仅使用“订阅”而不是“订阅 []”作为复选框的名称，那么即使选中了两个，我也只能检索复选框的一个值。

我假设如果使用“subscribe”而不是“subscribe[]”，解决这个问题会很容易，但我真的需要使用“subscribe[]”。当 JS 被禁用时，我可以使表单工作，但为了正确发布这两个值（如果两个复选框都被选中），我需要名称为“订阅 []”。

那么我如何检索复选框值并同时使用“订阅 []”作为名称？

请注意，我将一个冗长的表格简化为最基本的形式，例如清酒。我会在当前选项中添加更多复选框，以及一组具有其他名称的新复选框。因此，我会将这个问题的解决方案应用于我将添加到表单中的新输入集。

自从一天半以来，我一直在研究这个问题，尝试了 SO & Google 的许多解决方案，但不幸的是，没有任何帮助。

我感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:37:50.413

如果您`[]`在名称末尾使用 ，您将在`$_POST`条目中收到一个数组。所以如果你使用`name="subscribe[]"`你会得到`$_POST['subscribe']`一个数组

```
if( !isset( $_POST['subscribe'] ) || !is_array( $_POST['subscribe'] ))
{
    $errors['subscribe'] = 'Check at least one checkbox';
    $str = $errors['subscribe'];
}
else
{
    $str = $_POST['subscribe'];
} 
```

# qt - Qt 音频编辑

> ID：12434485
> 
> 赞同：2
> 
> 时间：2012-09-15T04:25:41.253
> 
> 标签：qt, sdk, audio, qt-mobility

我想创建一个可以在移动设备上运行的类似于 Audacity 的 qt 应用程序。我现在想要的是改变音量、音高和节奏的能力。我还希望能够选择、复制和粘贴部分音频文件。

你们中的任何人都知道允许这样做的 Qt 的 API、SDK 或其他东西吗？

我在 Qt 中可以找到的所有内置内容都是 QtMultimedia，它允许我导入音频文件然后播放它，但它似乎没有编辑（比特率、频道等除外）或操作。

这是针对 Symbian 的，可以在 windows 或 kubuntu 上构建。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-10T00:46:13.693

使用[音频后端](http://qt-project.org/wiki/Qt_Multimedia_Backends#668a5ff667fa098e9a0e6aef21049f84)之一：

```
音频插件

音频后端实现 QAudioInput、QAudioOutput、QAudioDeviceInfo 和 QSoundEffect

以下是当前音频后端的列表：

    视窗多媒体
    CoreAudio (Mac OS / iOS)
    脉冲音频（Unix）
    阿尔萨 (Unix)
    OpenSL ES (安卓)
    QNX

只有 PulseAudio、CoreAudio 和 QNX 后端是真正的插件。其他后端是相关类中的“#ifdef'ed”。

```

**参考**

*   [Qt 5.4 多媒体后端](http://wiki.qt.io/Qt_5.4_Multimedia_Backends)

*   [Qt 5.5.0 多媒体后端](http://wiki.qt.io/Qt_5.5.0_Multimedia_Backends)

# windows-8 - 如何使用 C# 在 Windows 8 应用程序中使用 Web 浏览器

> ID：12434488
> 
> 赞同：-2
> 
> 时间：2012-09-15T04:26:04.250
> 
> 标签：windows-8

我是 windows 8 Metro 应用程序的初学者，我只是想知道如何使用 c# 在 windows 8 应用程序中使用 web 浏览器，就像我们在 windows phone 7 中使用 (WebBrowserTask)object.show()

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:07:26.677

查看[WebView 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.controls.webview.aspx)和[XAML WebView 控件示例](http://code.msdn.microsoft.com/windowsapps/XAML-WebView-control-sample-58ad63f7)

# jsp - javax.el.PropertyNotFoundException：在类型上找不到属性“名称”

> ID：12434492
> 
> 赞同：5
> 
> 时间：2012-09-15T04:27:43.503
> 
> 标签：jsp, struts2

我有如下代码：

```
FriendsList = new ArrayList()
....   
ResultSet rs = st.executeQuery(Select);
while (rs.next()) {
   Member member = new Member(rs);
   FriendsList.add(member);
} 
```

它成功获取结果并转到 Member 类的构造函数并向其添加数据。但是一旦我尝试使用我的 jsp 文件中的 FriendsList 属性访问其属性之一，我就会遇到以下错误：

```
 "Caused by: javax.el.PropertyNotFoundException: Property 'Name' not found on type   
 application.Member" 
```

使用 Eclipse，我为 Member 类的每个属性生成了一个完整的 setter 和 getter 列表，如下所示：

```
 public String getName() {
    return Name;
}
public void setName(String name) {
    Name = name;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T04:32:49.817

关键是“属性名”到方法名的转换。通常，getter 名称是通过获取属性名称、将第一个字符大写并在前面加上“get”来获得的。

因此，如果您想调用 getName 方法，则属性是带有小写 n 的“名称”，而不是大写 N。

对于实际上以大写字母等开头的属性还有许多特殊情况，但是如果您将其设置为属性名称始终以小写字母开头，则生活会简单得多。

# mysql - 将 MySql 从 Windows 转移到 ubuntu

> ID：12434493
> 
> 赞同：0
> 
> 时间：2012-09-15T04:28:02.827
> 
> 标签：mysql, windows, ubuntu, migration

我在 Windows 7 中使用 wamp。由于某种原因，我的操作系统已损坏，但我的电脑中仍然有 ubuntu，而 wamp 在另一个驱动器中。

现在我可以获取我的项目的源代码，但是如何从 mysql 获取数据库。我想我可以使用 .frm 和其他可以在 ubuntu 中恢复的文件。

谁能解释一下如何将我的 wamp/mysql 数据恢复到 ubuntu。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:58:46.070

是的，你应该能够将你的 .frm、.myd 和 myi 从你的 windows 机器复制到你的 linux 机器。假设您使用 XAMPP 之类的东西，文件存储在 \mysql\data

这些需要复制到 /var/lib/mysql

不过，您可能需要重新创建用户。

# c# - C# 在任务栏上移动窗口

> ID：12434495
> 
> 赞同：0
> 
> 时间：2012-09-15T04:28:26.390
> 
> 标签：c#, fullscreen

```
 const int SWP_SHOWWINDOW = 0x0040;
        int Left = Convert.ToInt32(LeftSizeTextBox.Text);
        int Top = Convert.ToInt32(TopSizeTextBox.Text);
        int Width = Convert.ToInt32(WidthSizeTextBox.Text);
        int Height = Convert.ToInt32(HeightSizeTextBox.Text);
        IntPtr handle = FindWindow(null, WindowTextBox.Text);
        SetWindowPos(handle, -2, Top - 8, Left - 30, Width + 32, Height + 38, SWP_SHOWWINDOW);
        SetForegroundWindow(handle); 
```

我想要真正的全屏。目前我的主要是全屏显示，但它在底部稍下方停止，并且不覆盖任务栏。如何在仍然能够使用 alt 选项卡的同时使其完全（无边框窗口）？如果你曾经使用过 shiftwindow，那是我想要的效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:18:54.920

要使（无边框）窗口**真正**全屏，请转到表单的属性（CTRL + W，P），然后设置`ControlBox`为`false`和。这应该在任务栏上显示您的表单。这是您要动态执行的代码：`WindowState``Maximized`

```
//ControlBox
this.ControlBox = false;
//WindowState
this.WindowState = System.Windows.Forms.FormWindowState.Maximized; 
```

**编辑：**这只会使您的表单真正全屏显示。查看您的代码，我认为您正在尝试使其他表单全屏显示。

# jquery - jquery keydown 动画背景颜色

> ID：12434498
> 
> 赞同：1
> 
> 时间：2012-09-15T04:28:47.123
> 
> 标签：jquery

我试图简单地在击键时为背景设置动画。我无法使用：

```
$('input#userInput').live('keydown', function() { 
    $(this).animate({backgroundColor:'#4E1402'}, 300).delay(800).animate({backgroundColor: '#555'}, 100);
}); 
```

请让我知道我哪里出错了。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T04:40:45.280

那是因为你[不能在](http://api.jquery.com/animate/)没有插件的情况下为背景颜色设置动画

> 所有动画属性都应动画为单个数值，除非以下说明；大多数非数字属性无法使用基本的 jQuery 功能进行动画处理**（例如，宽度、高度或左侧可以进行动画处理，但背景颜色不能进行动画处理，除非使用 jQuery.Color() 插件）**。除非另有说明，否则属性值被视为像素数。可以在适用的情况下指定单位 em 和 %。

[jsFiddle 与插件](http://jsfiddle.net/jwcarroll/cAbRg/1/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:40:55.787

试试[颜色](http://archive.plugins.jquery.com/project/color)插件，它“为 jQuery 1.2 和更新的版本添加了彩色动画的能力”。

此外，[jQuery UI](http://jqueryui.com/)已经包含了彩色动画支持。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T04:31:45.180

像这样试试

```
$('#userInput').keydown(function(){
  $(this).css("backgroundColor",'#4E1402');
$(this).delay(2000).queue(function(){
    $(this).css("backgroundColor",'#555');});
 }); 
```

# objective-c - 应用程序窗口应在应用程序启动错误结束时具有根视图控制器

> ID：12434500
> 
> 赞同：0
> 
> 时间：2012-09-15T04:29:05.393
> 
> 标签：objective-c, ios

我不断收到这个错误，我不知道为什么。一切正常，突然间我收到了这个错误。我没有更改代码，并且在委托中设置了 rootViewController，所以我不明白为什么会出现此错误。这是我的 appDelegate.m 文件中的代码。

```
#import "WhereAmIAppDelegate.h"
#import "WhereAmIViewController.h"

@implementation WhereAmIAppDelegate

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:     (NSDictionary *)launchOptions
{
    self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
    // Override point for customization after application launch.
    WhereAmIViewController *wvc = [[WhereAmIViewController alloc]   initWithNibName:@"WhereAmIViewController" bundle:nil];
    [[self window]setRootViewController:wvc];

    [self.window makeKeyAndVisible];
    return YES;
} 
```

我明确设置了rootViewController，所以我不知道为什么会这样。

# html - Twitter bootstrap 风格继承与 jinja2

> ID：12434506
> 
> 赞同：0
> 
> 时间：2012-09-15T04:29:38.507
> 
> 标签：html, css, twitter-bootstrap, template-engine, jinja2

我正在开发一个使用 jinja2 作为模板引擎的谷歌应用引擎的网络应用程序。

我是我的`base.html`文件，我有一个`<link>`CSS 标签。

现在我有一个`front.html`扩展第一个文件的另一个文件。它有`{% extends 'base.html' %}`块，代码在一个块中`{% block content %}` .......`{% endblock %}`

在第二个文件中，CSS 样式将不适用。任何想法如何解决它？

更准确地说： base.html ：

`<head>
<link ... >
< /head>
<body>
{% block content %}
{% endblock %}
</body>`

front.html： 标签中的样式不会应用于块。
`{% extends 'base.html' %}
{% block content %}
....
{% endblock %}`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T15:49:52.053

行。我想到了 。通往 的路径`front.html`类似于路径`/path1/path2`为。所以它没有正确链接。`base.html``/path1`

作为一种解决方案，您可以在链接标签上设置一个块并覆盖它，例如：

`{% block stylesheet %}
<link href="path1/something.css">
{% endblock %}`

在你拥有的孩子身上
`{% block stylesheet %}
<link href="/path1/path2/something.css">
{% endblock %}`

`app.yaml`或者，您可以在文件中放置一个路径。

# c# - 0 或不匹配正则表达式中的任何字符

> ID：12434517
> 
> 赞同：-1
> 
> 时间：2012-09-15T04:33:00.353
> 
> 标签：c#, regex

我想处理一个 10 位或 9 位的字符串。

它必须与以下内容匹配：*0123456789 或 123456789*

我试过这个表达式`^[0|\e]\d{9}$`，但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:48:32.077

这个怎么样：

```
^0?\d{9}$ 
```

这假设 012345678 也符合您的标准；也就是说，只有以 0 开头的数字才能有 10 位数字，但九位数字的任意组合都可以。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T04:41:51.973

这个简单的正则表达式应该可以工作-

`@"^0?[0-9]{9}$""`

例子：

```
var match = Regex.Match(Your_string, @"^0?[0-9]{9}$");
if (match.Success)
Console.WriteLine("Sucess"); 
```

# php - PHP Break & Continue 同时

> ID：12434519
> 
> 赞同：11
> 
> 时间：2012-09-15T04:33:32.497
> 
> 标签：php, loops, nested-loops

我有一个像这样的嵌套循环：

```
while(1){

    while($something){
        break & continue;
    }
    // More stuff that I don't want to process in this situation
} 
```

我想跳出第二个while循环并从头开始继续第一个循环（不完成第一个循环）。这可能不使用变量吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T04:51:58.970

您可以`continue 2;`在内部循环中从头开始继续外部循环。

[http://php.net/manual/en/control-structures.continue.php](http://php.net/manual/en/control-structures.continue.php)

> **continue**接受一个可选的数字参数，该参数告诉它应该跳到末尾的封闭循环的层数。默认值为**1**，因此跳到当前循环的末尾。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:36:23.437

只需在内循环中使用'break'。它将跳出内循环，外循环将继续。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T04:47:37.987

在内部while之后，你可以不只使用if语句来执行continue吗？

```
while(1){

    while($something){
        break;
    }

    if (!$something) {
       continue;
    }

    // More stuff that I don't want to process in this situation
} 
```

# mongodb - MongoDB数据库用户名被删除

> ID：12434520
> 
> 赞同：0
> 
> 时间：2012-09-15T04:33:36.570
> 
> 标签：mongodb

有没有人注意到使用代码清除所有集合（数据已删除，集合存在）时删除数据库的用户名的情况？当我通过 C# 代码清除数据库中的所有集合时，我遇到了一种情况，所有有权访问数据库的用户都消失了，我不得不使用密码再次重新创建用户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:35:34.060

MongoDB 中的每个数据库都使用[命名空间中](http://www.mongodb.org/display/DOCS/Mongo+Metadata)[的集合`system.*`](http://www.mongodb.org/display/DOCS/Mongo+Metadata)来存储元数据。例如，`system.users`用于身份验证和`system.indexes`索引定义。

如果您完全删除一个数据库（例如使用`db.dropDatabase()`），预期的结果是删除该数据库的所有数据（包括该数据库的相关系统集合）。

如果您尝试`system`直接删除一个集合，您应该会收到“异常：无法删除系统 ns”的错误。

# ios - 从点数组中获取矩形

> ID：12434522
> 
> 赞同：2
> 
> 时间：2012-09-15T04:33:47.993
> 
> 标签：ios, image-processing, avfoundation, signal-processing, gpuimage

使用[GPUImage](https://github.com/BradLarson/GPUImage)，我能够检测图像中书籍/页面的角落。但有时，它会通过超过 4 个点，在这种情况下，我需要从这些点中处理并找出最佳矩形。这是一个例子：

![在此处输入图像描述](../Images/8704d4c5d9d824b0ae28409658a6a2bb.png)

在这种情况下，找出最佳矩形的最有效方法是什么？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T01:47:47.350

如果您使用的是角点检测算法，则可以根据检测到的角点的相对强度过滤结果。相对于您当前背景的书角处的对比度似乎比在木纹中发现的点处的对比度要强得多。是否有与每个点相关的相对大小，或者你只是得到这些点？除非前景和背景的强度相对恒定，否则为边缘强度设置阈值可能意味着很多麻烦。

您的示例图像可能会模糊或变形。例如，对浅色像素进行正确的形态“关闭”可以消除木纹中的纹理，而不会影响书的大小和形状。(http://en.wikipedia.org/wiki/Mathematical_morphology)

另一种可能性是将图像缩小到更小的尺寸，然后对其进行检测。调整图像大小会消除微小的细节，例如当前检测到的任何木纹图案。

选择合适的镜头和照明可以使图像更容易处理。在处理之前尽量简化图像。如上所述，仅照亮书本边缘的“暗场”照明将呈现更简单的图像进行处理。写下约束可以更清楚地看出哪种解决方案最健壮和最容易实现。在图像的任何地方找到任何矩形都非常困难；如果矩形的大小至少为 100 x 100 像素，从正方形到图像边缘的旋转不超过 15 度等，则在深色背景上找到浅色矩形会容易得多。

更多涉及的解决方案可以分为两种方法：

1.  仅使用给定的 4 个或更多 (x,y) 点来解决问题。
2.  对样本图像完全使用不同的图像处理技术。

**1\. 只给定点求解程序** 如果你通常只有 5 或 6 个点，并且如果你确信其中 4 个点属于你想要的矩形的角，那么你可以试试这个：

1.  找到所有点的凸包。凸包是完全包含所有点的 N 边形。如果这些点是伸出的钉子，如果你在它们周围拉伸橡皮筋并让它卡入到位，那么橡皮筋的最终形状是一个凸包。找到凸包的算法通常会返回从最左下角逆时针排列的点列表。
2.  制作点列表的副本并从副本中删除点，直到只剩下四个点。这四个剩余点仍将逆时针排列。
3.  计算每组三个连续点形成的角度：点 1、2、3，然后是 2、3、4，然后是 3、4、1，依此类推。
4.  如果角度超出合理的公差（小于 70 度或大于 110 度），则跳回第 2 步并删除下一个点（或一组点）。
5.  存储每组 4 个点的最小和最大角度。
6.  重复步骤 2 - 6，每次删除一个（或多个）不同的点。
7.  跟踪最小和最大角度最接近 90 度的点集。

[http://en.wikipedia.org/wiki/Convex_hull](http://en.wikipedia.org/wiki/Convex_hull)

还可以引入许多其他检查和约束。例如，如果凸包中 3 个连续点（点 N 到 N+1，以及 N+1 到 N+2）的点到点距离接近于书本的预期宽度和高度，那么您可能会将这些标记为已知的好点，并且只测试剩余的点以查看哪个是第四点。

如果你得到很多点，上面的技术可能会变得笨拙，但如果预计在凸包上找到两个或三个书角点，它可能会起作用。

对于任何几何问题，我总是建议查看 GeometricTools.com，它有很多很棒的优化源代码，可以解决各种问题。拥有这本书也非常方便，尤其是如果您可以使用 AddAll.com 找到便宜的副本。

[http://www.geometrictools.com/](http://www.geometrictools.com/)

**2\. 示例图像的其他图像处理技术** 虽然我可能是错的，但 GPUImage 似乎没有很多通用图像处理算法。其他一些图像处理算法可以使这个问题更容易解决。

虽然这里没有篇幅，但成功图像处理的关键之一是适当的照明。确保你的照明是一致的。均匀照亮书本和背景的漫射光效果很好。您可以使用更有趣的照明来简化问题：如果您有四个灯（或特殊的环形灯），您可以从顶部、底部、左侧和右侧提供水平照明，这将使书的边缘显得明亮和其他表面看起来很暗。 [http://www.benderassoc.com/mic/lighting/nerlite/Darkfield.htm](http://www.benderassoc.com/mic/lighting/nerlite/Darkfield.htm)

如果您可以使用其他一些 GPU 库进行图像处理，那么以下技术之一可以很好地工作：

1.  连接组件标签（又名查找 blob）。使用二进制阈值或分水岭算法将作为书的白色斑点与背景的其余部分分开应该不会太难。一旦确定了图书的 blob，就更容易找到角落。(http://en.wikipedia.org/wiki/Connected-component_labeling) 在 OpenCV 中，您可以找到“轮廓”。
2.  生成一个边缘点列表，然后让四个单独的线拟合工具从上到下、从右到左、从下到上和从左到右搜索，以找到与书相关的四个强（且大部分是直的）边缘。但是，在您的示例图像中，书籍封面略微翘曲或相机镜头引入了桶形失真。
3.  使用专为在深色背景上寻找亮角而设计的角检测器。如果您一直在寻找木纹背景的白皮书，您可以创建一个检测器来查找棕色背景上的白色角落。
4.  使用霍夫技术找到图像中最强的四条线。(http://en.wikipedia.org/wiki/Hough_transform)

最有效的算法技术将取决于您的限制：您是否正在寻找仅具有特定大小的矩形？前景和背景之间的对比度是否一致？你能引入照明来简化图像的外观吗？等等。

# php - 语法错误，Silverstripe 中出现意外的“$config”（T_VARIABLE）

> ID：12434523
> 
> 赞同：0
> 
> 时间：2012-09-15T04:34:06.367
> 
> 标签：php

我在 SilverStripe 中创建了一个类 GalleryImage。我正在为网格字段创建一个配置对象，但它给出了错误语法错误，意外的 '$config' (T_VARIABLE)。如何解决这个问题？

```
 $config = GridFieldConfig::create(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T11:32:28.543

很有可能问题出在线路（或线路）之前。例如这个：

```
$myvar=1;
$config = GridFieldConfig::create(); 
```

不会导致语法错误（您在此处看到的类型），但是：

```
$myvar=1
$config = GridFieldConfig::create(); 
```

（请注意缺少的分号）将导致您遇到的错误。

它可能不是缺少分号，但请检查给您错误的行*之前的行。*

# blackberry - 从服务器加载位图的列表字段

> ID：12434524
> 
> 赞同：1
> 
> 时间：2012-09-15T04:34:19.343
> 
> 标签：blackberry, user-interface, listfield

我已经制作了一个带有图像的列表字段，该列表字段是从在线 xml 文件中解析的。似乎将图像下载到列表字段中阻止了解析列表字段“文本”内容的过程，我想显示列表字段“文本”的内容，然后开始处理图像的下载，然后显示图片。
**这是调用下载器类的代码：**

```
        线程 t = 新线程（）；
    {
        字符串 imageFilename = imageurlStrin.substring(imageurlSrin.lastIndexOf('/') + 1);
        String saveDire = "file:///store/home/user/pictures/listfield/"+imageFilename;
        尝试 {
        FileConnection fconn = (FileConnection)Connector.open(saveDire);
        如果（fconn.exists（））{
         // 没做什么
        }
        if (!fconn.exists()) {  
        UrlToImage 位 = 新 UrlToImage(imageurlStrin);
        pic = bit.getbitmap();
        }
        }catch (异常 ioe) {
        System.out.println("错误 18");
        }
    };
    t.start();

```

**这是下载器类代码：**

```
public class UrlToImage implements Runnable{
    String imageurlStrin=null;
    BitmapDowloadListener listener=null;
    public static Bitmap _bmap;
    private EncodedImage eih1;

    public void run() {

            UrlToImage bit = new UrlToImage(imageurlStrin);

    }

    public UrlToImage(String imageurlStrin)
    {
            HttpConnection connection = null;
            InputStream inputStream = null;
            EncodedImage bitmap;

            byte[] dataArray = null;
            //byte[] data1 = null;

            try
            {
            connection = (HttpConnection) Connector.open(imageurlStrin, Connector.READ, true);
            inputStream = connection.openInputStream();
            byte[] responseData = new byte[10000];
            int length = 0;
            StringBuffer rawResponse = new StringBuffer();
            while (-1 != (length = inputStream.read(responseData)))
            {
            rawResponse.append(new String(responseData, 0, length));
            }
            int responseCode = connection.getResponseCode();
            if (responseCode != HttpConnection.HTTP_OK)
            {
            throw new IOException("HTTP response code: "
            + responseCode);
            }

            final String result = rawResponse.toString();
            dataArray = result.getBytes();
            }
            catch (final Exception ex)
            { }

            finally
            {
            try
            {
            inputStream.close();
            inputStream = null;
            connection.close();
            connection = null;
            }
            catch(Exception e){}
            }

            bitmap = EncodedImage.createEncodedImage(dataArray, 0,dataArray.length);
            // this will scale your image acc. to your height and width of bitmapfield

            int multH;
            int multW;
            int currHeight = bitmap.getHeight();
            int currWidth = bitmap.getWidth();
            int scrhi = Display.getWidth()/4;
            int scrwe = Display.getWidth()/4;

            multH= Fixed32.div(Fixed32.toFP(currHeight),Fixed32.toFP(scrhi));//height
            multW = Fixed32.div(Fixed32.toFP(currWidth),Fixed32.toFP(scrwe));//width
            bitmap = bitmap.scaleImage32(multW,multH);

            Bitmap thefinal = bitmap.getBitmap();

            //url = StringUtils.replaceAll(url ,"http://u.bbstars.com/i-", "");
            final String imageFilename = imageurlStrin.substring(imageurlStrin.lastIndexOf('/') + 1);

            String saveDire = "file:///store/home/user/pictures/listfield/"+imageFilename;
            String Dire = "file:///store/home/user/pictures/listfield/";

            JPEGEncodedImage finalJPEG = JPEGEncodedImage.encode(thefinal, 100);

            byte[] raw_media_bytes = finalJPEG.getData();
            int raw_length = finalJPEG.getLength();
            int raw_offset = finalJPEG.getOffset();

            FileConnection filecon = null;
            OutputStream out = null;

            try {
                    filecon = (FileConnection) Connector.open(Dire,Connector.READ_WRITE);
                    if(!filecon.exists()){
                            filecon.mkdir();
                    }
                    filecon = (FileConnection) Connector.open(saveDire,Connector.READ_WRITE);
                if(!filecon.exists()){
                    filecon.create();
                 }
                    out = filecon.openOutputStream();
                    out.write(raw_media_bytes, raw_offset, raw_length);
                    out.close();
                    filecon.close();
                    System.out.println("----------------file saved"+imageFilename);

            } catch (IOException e) {
                System.out.println("---------------===================- error saving the file");
                };
                try {
                    FileConnection fconn = (FileConnection)Connector.open(saveDire);
                    if (fconn.exists()) {
                        InputStream input = fconn.openInputStream();
                        int available = input.available();
                        final byte[] data1=IOUtilities.streamToBytes(input);
                        input.read(data1, 0, available);
                        eih1 = EncodedImage.createEncodedImage(data1,0,data1.length);
                    }
                }catch (Exception ioe) {
                        System.out.println("error gettin bitmap details from the piture");
                    }  
            _bmap=eih1.getBitmap();
            }
            public Bitmap getbitmap()
            {
            return _bmap;
            } 
```

}

我应该怎么做才能防止 UI 阻塞，我想要完美的为什么要调用该下载器类而不停止解析其他列表字段内容的过程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T22:35:56.677

我认为您声明线程对象的方式可能只是一个简单的语法问题。 [在此处查看有关 Thread 的 BlackBerry 文档](http://www.blackberry.com/developers/docs/5.0.0api/java/lang/Thread.html)

当您创建 a`Thread`时，您通常使用`Thread`您自己的子类扩展该类，该子类实现该`run()`方法，或者您将一个新`Runnable`对象传递给您的对象的构造`Thread`函数。在您的代码中，您实际上声明了一个`Thread`实例并创建它，但不要给它一个`Runnable`，**或**覆盖默认`run()`方法。所以，这个线程不会在后台做*任何事情。*

*您实际上已经在本地范围*内声明了一段代码。如果您只是将一些代码放在一组没有附加到任何东西的大括号 ( `{`and ) 中，就会发生这种情况：`}`

```
Thread t = new Thread();
// this next curly bracket starts a "local scope".  it is NOT part of Thread t!
{
    String imageFilename = imageurlStrin.substring(imageurlStrin.lastIndexOf('/') + 1);
    // The rest of your code here will not be executed on Thread t.  It will be executed
    // on the thread where you instantiate Thread t, right before you call t.start();
    // If this code is called on the main/UI thread (which it probably is), then the 
    // network request will block the UI thread, which will stop the loading of the rest
    // of the list.
};
t.start(); 
```

你可能想要的是这样的：

```
Thread t = new Thread(new Runnable() {

    public void run() {

        String imageFilename = imageurlStrin.substring(imageurlStrin.lastIndexOf('/') + 1);
        String saveDire = "file:///store/home/user/pictures/listfield/"+imageFilename;
        try {
            FileConnection fconn = (FileConnection)Connector.open(saveDire);
            if (fconn.exists()) {
                // do nothing
            }
            if (!fconn.exists()) {  
                UrlToImage bit = new UrlToImage(imageurlStrin);
                pic = bit.getbitmap();
            }
        } catch (Exception ioe) {
            System.out.println("error 18");
        }
    }

});

t.start(); 
```

试试看，看看是否能解决问题。

# php - PHP 中的正则表达式模式 \K 替代方案

> ID：12434528
> 
> 赞同：1
> 
> 时间：2012-09-15T04:34:45.623
> 
> 标签：php, regex, arrays, string

我一直在使用`\K`很多，但最近意识到它在低于 v5.2.4 的 PHP 中不起作用。所以我正在寻找一种不同的方式。

```
<?php
    $html = '<div>hello</div>
        <div class="someclass">hi</div>
        <div class="sample">this text should be included</div>
        <div>bye</div>
    ';
    // $pattern = '/<div.+class=["\']sample["\'].+div>\K/i'; // <-- this doesn't work below v5.2.4
    $pattern = '/(?<=<div.+class=["\']sample["\'].+div>)/i'; // causes an error.
    $array = preg_split($pattern, $html);
    print_r($array);
?> 
```

我已经看到某处`(?<=)`可以用作替代方案，我尝试过，但它会导致错误。有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:43:15.140

我会重新实现`split`. 在 Perl 中它看起来像下面这样：

```
my @matches;
while (/\G((?s:.*?)...)/gc) {
   push @matches, $1;
}

push @matches, /\G(.+)\z/sg; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:42:27.470

好的，找到了解决方法。`preg_split()`接受`PREG_SPLIT_DELIM_CAPTURE`第四个参数中的标志，因此匹配的字符串可以包含在数组的分隔元素中。我只需要选择一个额外的元素来提取字符串，这并没有太多工作要做。

```
<?php
    $html = '<div>hello</div>
        <div class="someclass">hi</div>
        <div class="sample">this text should be included</div>
        <div>bye</div>
    ';
    $pattern = '/(<div.+class=["\']sample["\'].+div>)\${0}/i'; 
    $array = preg_split($pattern, $html, null, PREG_SPLIT_DELIM_CAPTURE);
    print_r($array);
?> 
```

# c# - 插入到 Windows Azure 移动服务时出现 500 内部服务器错误？

> ID：12434533
> 
> 赞同：3
> 
> 时间：2012-09-15T04:35:10.730
> 
> 标签：c#, xaml, azure, azure-mobile-services

使用从 Azure for Mobile Services 网站修改的以下代码时，我收到“Microsoft.WindowsAzure.MobileServices.MobileServiceInvalidOperationException was unhandledMessage: Internal Server Error (500 InternalServerError - Details: {"code":500,"error":"Internal服务器错误“})”错误。

我的代码：

```
 private MobileServiceCollectionView<pin> Pins;
    private IMobileServiceTable<pin> pinTable = App.MobileService.GetTable<pin>();
    public class pin
    {
        public string name { get; set; }
        public long timestamp { get; set; }
        public string type { get; set; }
        public object content { get; set; }
        public string category { get; set; }
        public string comments { get; set; }
        public int Id { get; set; }
    }
    private LiveConnectSession session;
    private async System.Threading.Tasks.Task Authenticate()
    {
        //authentication code from the Azure site, I deleted it here to save space.
    }
    public MainPage()
    {
        this.InitializeComponent();
    }
    public long getTimestamp()
    {
        //Find unix timestamp (seconds since 01/01/1970)
        long ticks = DateTime.UtcNow.Ticks - DateTime.Parse("01/01/1970 00:00:00").Ticks;
        ticks /= 10000000; //Convert windows ticks to seconds
        return ticks;
    }
    public async Task<bool> Refresh()
    {
        List<string> CategoriesMixed = new List<string>();
        Pins = pinTable.Where(pin => true).ToCollectionView();
        if (Pins.Count < 1)
        {
            pin pin = new pin();
            pin.category = "Welcome";
            pin.content = "Hello, World!";
            pin.name = "No Pins :(";
            pin.comments = string.Empty;
            pin.timestamp = getTimestamp();
            pin.type = "text";
            await pinTable.InsertAsync(pin);
        }
        else
        {
            foreach (pin nowPin in Pins)
            {
                await pinTable.DeleteAsync(nowPin); //since I'm still trying to get the inserting pins thing to work, I'm having it delete all pins it finds for the user.
            }
        }
        return true;
    }
    /// <summary>
    /// Invoked when this page is about to be displayed in a Frame.
    /// </summary>
    /// <param name="e">Event data that describes how this page was reached.  The Parameter
    /// property is typically used to configure the page.</param>
    protected override async void OnNavigatedTo(NavigationEventArgs e)
    {
        await Authenticate();
        await Refresh();
    } 
```

可能很重要的一件事是我能够将一个引脚插入数据库，但之后会引发此错误。此外，如果我在 if(Pins.Count < 1) 行设置断点，则表明当数据库中有 pin 时 Pins.Count 返回 0。

此外，在 Azure 管理门户中，我将以下内容作为插入脚本（来自[http://www.windowsazure.com/en-us/develop/mobile/tutorials/authorize-users-in-scripts-dotnet/](http://www.windowsazure.com/en-us/develop/mobile/tutorials/authorize-users-in-scripts-dotnet/)） ：

```
function insert(item, user, request) {
  item.userId = user.userId;    
  request.execute();
} 
```

和我的阅读脚本：

```
function read(query, user, request) {
   query.where({ userId: user.userId });    
   request.execute();
} 
```

错误正在“等待 pinTable.InsertAsync(pin);”上引发 Refresh() 中的行。我的 Azure 管理门户中没有错误日志。如果您需要任何其他信息，请询问:)

更新 1：我认为我的问题与[http://social.msdn.microsoft.com/Forums/en-US/azuremobile/thread/82ae07a1-5832-4dc9-97d7-1cda1fb33bc2](http://social.msdn.microsoft.com/Forums/en-US/azuremobile/thread/82ae07a1-5832-4dc9-97d7-1cda1fb33bc2)有关，但这个问题仍未得到解答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T01:49:53.193

我猜下面的行正在制造问题

```
Pins = pinTable.Where(pin => true).ToCollectionView(); 
```

`ToCollectionView();`总是返回计数为 0。这是这里的错误。你觉得乔什·特威斯特怎么样？

Stavros：我认为下面这行可以帮助您的程序顺利运行

```
List<Pin> Pins = await pinTable.Where(pin => true).ToListAsync(); 
```

# visual-studio-2012 - Visual Studio 2012 中的项目属性中缺少编译选项卡

> ID：12434535
> 
> 赞同：8
> 
> 时间：2012-09-15T04:35:18.033
> 
> 标签：visual-studio-2012

当我右键单击解决方案中的项目并进入属性时，我看不到左侧的“编译”选项卡。我看到应用程序、构建、构建事件，然后下一个是调试。

我已经用谷歌搜索了这个但找不到任何东西，在这里也找不到任何东西。有谁知道我做错了什么？

非常感谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T05:25:44.010

编译选项卡显示在 Visual Basic 项目中，但不显示在 C# 项目中。对于 Visual Basic，它主要包含特定于 VB 的构造，例如 OPTION EXPLICIT，但在 C# 的“构建”选项卡上可以找到目标平台等元素。在 Visual Basic 编译选项卡的高级编译选项下可用的目标框架位于 C# 应用程序选项卡上。

更新：随着 Visual Studio 2012 的更新 2，我现在也在“应用程序”选项卡中看到 VB 项目的目标框架。

# javascript - FB.Event.subscribe 的问题

> ID：12434547
> 
> 赞同：0
> 
> 时间：2012-09-15T04:39:48.620
> 
> 标签：javascript, symfony, fosuserbundle

我有这个脚本放在我的 html 的头部：

```
<script>
    function goLogIn(){
        alert("go login");
        window.location.href = "{{ path('_security_check') }}";
    }

    function onFbInit() {
        if (typeof(FB) != 'undefined' && FB != null ) {
            alert('here')
            FB.Event.subscribe('auth.statusChange', function(response) {
                if (response.session || response.authResponse) {
                    alert("login");
                    setTimeout(goLogIn, 500);
                } else {
                    alert('logout');
                    window.location.href = "{{ path('_security_logout') }}";
                }
            });
        }
    }
  </script> 
```

所以这里的警告框被打印出来了。但是我尝试登录和注销，但没有触发登录或注销。知道为什么吗？

以下是我初始化 facebook 按钮的方式：

```
<!-- inside a twig template -->
{{ facebook_initialize({'xfbml': true, 'fbAsyncInit': 'onFbInit();'}) }}

{{ facebook_login_button({'autologoutlink': true, 'label': 'Log in using Facebook'}) }} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T22:16:35.773

事实证明，我必须清除 cookie，然后它才能工作。

# javascript - 如何在 DOM Element 上明智地构建这个函数类型？

> ID：12434550
> 
> 赞同：0
> 
> 时间：2012-09-15T04:40:16.810
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jquery-selectors

我有一个问题：

我有 3-4 种类型的元素，如标签、文本框……，这个元素有 10-12 个功能。现在**如何在 DOM Element 上明智地构建这个函数类型？**

然后我使用这种类型的代码：

```
$('ElementID') . functionName(); 
```

然后自动明智地调用函数类型。

详见：

步 ：

1\. 制作 Dom 元素，然后通过 type wise 在这个 DOM 元素上构建我的函数。

2\. 然后我像 $('# DOM Element ID') 一样访问这个 DOM 元素，然后我调用我的方法。

例如：如果 DOM 元素类型标签，则构建以标记所有（10-12 个函数）函数。如果 DOM 元素类型为文本框，则构建到文本框所有（10-12 个函数）函数。

3.然后使用任何js文件。

（注意：你不明白我的问题然后再问......）

代码 ：

```
var Label1 = {

        GetHtml: function(id) {

            return $('<div id="'+id+'" class="drag LABLE" type="Label1"></div>');

        },

        _SetFont_family : function(CSS) {
            console.log(CSS);
        },
}; 
```

变量标签2 = {

```
 GetHtml: function(id) {

            return $('<div id="'+id+'" class="drag LABLE" type="Label2"></div>');

        },

        _SetFont_family : function(CSS) {
            console.log(CSS);
        },
};
var ElementObject  = {
        LABLE1 : LABLE1 ,
LABLE2:LABLE2  
}; 
```

称呼 ：

```
ElementObject[currentDOM.attr('type')]._SetFont_family(CSS); 
```

然后我选择的元素类型是Label2然后调用Label2函数和Label1然后调用Label1的函数。

因此，**请更好地了解**jquery 或 JavaScript 中的这种类型流。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:48:38.967

访问元素后检查它的dom类型。

例如：

1.  使用权：

    `var $node = $('#element');`

2.  获取节点名称：

    ```
    var node_name = $node.get(0).nodeName;
    // or
    var node_name = $node[0].nodeName; // output: LABEL, INPUT etc 
    ```

3.  如果节点名称是，`INPUT`那么您可以通过以下方式检查类型：

    ```
    var node_type = $node[0].type; 
    ```

* * *

***示例代码：***

```
var $node = $('#input');
var node_name = $node[0].nodeName;
var node_type = null;
alert(node_name);

if( node_name == 'INPUT') {
    node_type = $node[0].type;
    alert( node_type );
} 
```

***[这是一个演示](http://jsfiddle.net/jJ5TR/2/)***

# ruby-on-rails - 使用 Omniauth 哈希创建用户配置文件

> ID：12434552
> 
> 赞同：1
> 
> 时间：2012-09-15T04:40:41.477
> 
> 标签：ruby-on-rails, ruby, omniauth, profile

我正在尝试从我的用户模型中提取个人资料信息。目前我正在使用 Omniauth（twitter 和 facebook）来创建用户并将所有信息写入用户表......这很好，但是我被告知正确的 Rails 约定是将用户和配置文件分开。

经过几天的反复试验，在使用来自 Omniauth 哈希的用户信息创建配置文件时，我无法让 has_one 关系正常工作。

我尝试使用 before_filter 在创建用户之前自动创建配置文件，这会在配置文件表中正确创建 user_id 外键，但是我似乎无法获得任何要写入的omniauth 哈希数据。

我的会话控制器：

```
def create
  auth = request.env["omniauth.auth"]

  if user = User.find_by_provider_and_uid(auth["provider"], auth["uid"])
    redirect_to root_url, :notice => 'Signed In'
  else
    user = User.create_with_omniauth(auth)
    redirect_to profile_path(user), :notice => 'Please verify your profile'
  end 
```

在我的用户模型中：

```
before_create :create_profile

  def self.create_profile(auth)
    create! do |profile|
      profile.user_id = session[:user_id]
      profile.name = auth["info"]["name"]
      profile.email = auth["info"]["email"]
      profile.nickname = auth["info"]["nickname"]
      profile.location = auth["info"]["location"]
      profile.image = auth["info"]["image"]
     end
   end

   ... 
```

我尝试的另一个选项是使用配置文件模型编写配置文件数据......它适用于 Omniauth 哈希数据，但不会写入正确的 user_id（所以没有外键）

配置文件.rb

```
def self.create_profile_with_omniauth(auth)
  create! do |profile|
    profile.user_id = session[:user_id]
    profile.name = auth["info"]["name"]
    profile.email = auth["info"]["email"]
    profile.nickname = auth["info"]["nickname"]
    profile.location = auth["info"]["location"]
    profile.image = auth["info"]["image"]
  end
end 
```

# mysql - MySQL左连接2个表按计数排序

> ID：12434561
> 
> 赞同：5
> 
> 时间：2012-09-15T04:41:45.010
> 
> 标签：mysql

我有 2 个如下表，并希望通过 count(column) 选择它们的结果，但不起作用请告知。

```
review table

ID | RID | Name | comment
555|3000 | John | John comment
555|3001 | Ben  | Ben comment
555|3002 | Smith| Smith comment

Likes table

U | PID
1 | 3000
2 | 3000
3 | 3000
4 | 3001

Expected result

ID | RID | Name | comment      | votes
555|3000 | John | John comment | 3
555|3001 | Ben  | Ben comment  | 1 
```

我期待 select * from review 和 Likes 表中的 count PID 列的结果

我目前的查询是

```
SELECT * , (SELECT COUNT( PID ) FROM Likes AS votes WHERE there.ID = PID)
FROM review AS there
LEFT JOIN Likes b ON there.RID = b.PID
WHERE ID =555
AND there.RID = b.PID AND votes>0
ORDER BY votes DESC 
```

但它没有woking，请指教。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T05:29:50.717

由于您只通过投票进行评论，因此您可以通过转换`LEFT JOIN`为`INNER JOIN`并消除对以下内容的检测来缩短查询（也许更快） `COUNT`：[http ://www.sqlfiddle.com/#!2/1f920/3](http://www.sqlfiddle.com/#!2/1f920/3)

```
SELECT r.ID, r.RID, r.Name, `Comment`, COUNT(RID) as votes 
FROM review r 
JOIN Likes l ON l.PID = r.RID
WHERE r.ID = 555 
GROUP BY r.RID 
ORDER BY votes DESC 
```

输出：

```
|  ID |  RID | NAME |      COMMENT | VOTES |
--------------------------------------------
| 555 | 3000 | John | John comment |     3 |
| 555 | 3001 |  Ben |  Ben comment |     1 | 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T04:51:50.897

```
SELECT ID, RID, Name, `Comment`, COUNT(RID) as votes 
FROM review AS there
LEFT JOIN Likes b ON there.RID = b.PID
WHERE ID = 555
AND there.RID = b.PID 
GROUP BY b.PID 
HAVING votes > 0
ORDER BY votes DESC 
```

[sqlfiddle](http://www.sqlfiddle.com/#!2/c1b5d/1/0)

# go - Go 中“必须”模式的内置助手

> ID：12434565
> 
> 赞同：6
> 
> 时间：2012-09-15T04:42:20.647
> 
> 标签：go

是否有更内置的包装器来使返回`(X, error)`成功的函数执行或中止，例如`regexp.MustCompile`？

我说的是[这样的东西](http://golang.org/src/pkg/text/template/helper.go?s=576:619)，但更多的是“内置”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-16T23:36:10.810

那没有。你会得到最好的东西是这样的：

```
func Must(fn func() (interface{}, error)) interface{} {
    v, err := fn()
    if err != nil {
        log.Fatalln(err)
    }
    return v
} 
```

然后使用它：

```
Must(func() (interface{}, error) {
    return template.ParseGlob(pattern)
}).(*template.Template) 
```

假设这`template.ParseGlob(pattern)`是您想要包装的电话。

Go 没有参数多态性，因此这种代码最终将需要类型断言来恢复原始类型，因此（在我看来）付出的努力多于其价值。对于长链的潜在故障，您将获得的最简洁、惯用的错误处理就是检查错误并返回它。推迟清理处理程序：

```
func MyFunc() (err error) {
    a, err := blah1()
    if err != nil {
        return
    }
    defer a.Close()
    b, err := blah2(a)
    if err != nil {
        return
    }
    defer b.Close()
    // ad nauseam
} 
```

冗长而乏味，但至少它是明确且易于理解的。以下是我编写的两个模块，它们迫切需要参数多态性，它们可能会给你一些在没有它的情况下处理的想法：

*   [bitbucket.org/anacrolix/dms/futures](http://go.pkgdoc.org/bitbucket.org/anacrolix/dms/futures)
*   [bitbucket.org/anacrolix/dms/cache](http://go.pkgdoc.org/bitbucket.org/anacrolix/dms/cache)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T12:16:48.670

我认为内置机制没有意义，因为您可以很好地以各种方式处理非零错误，模板包本身的示例也是如此：参见“ [`text/template/examplefiles_test.go`](http://golang.org/src/pkg/text/template/examplefiles_test.go?l=60:71)”，说明了 ' ' 的两种不同用法`err`：

```
// Here starts the example proper.
    // T0.tmpl is the first name matched, so it becomes the starting template,
    // the value returned by ParseGlob.
    tmpl := template.Must(template.ParseGlob(pattern))

    err := tmpl.Execute(os.Stdout, nil)
    if err != nil {
        log.Fatalf("template execution: %s", err)
    }
    // Output:
    // T0 invokes T1: (T1 invokes T2: (This is T2)) 
```

在辅助函数的特定情况下`(*Template) Must()`，将错误转换为异常（恐慌）并不总是适用于*所有*go 程序（如[本线程](http://lwn.net/Articles/503452/)中所讨论的那样），并且涵盖处理错误的所有可能方式将意味着创建*很多*“内置”机制。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-30T12:28:31.110

我自己也遇到过同样的问题，决定开发以下解决方案：[https ://github.com/boramalper/must](https://github.com/boramalper/must)

**例子：**

```
database := must.MV(sql.Open("sqlite3", "...")).(*sql.DB)
defer must.M(database.Close())

must.M(database.Ping())

// Use MustValVoid (or MVV shortly) if you don't care about
// the return value.
must.MVV(database.Exec(`
    PRAGMA foreign_key_check;
    ...
`)) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-06T20:18:17.283

`log`当源本身使用时，我不确定为什么这里的所有答案都使用包`panic`：

```
func MustCompile(str string) *Regexp {
   regexp, err := Compile(str)
   if err != nil {
      panic(`regexp: Compile(` + quote(str) + `): ` + err.Error())
   }
   return regexp
} 
```

我的建议不是通用`Must`包装器，而是 `Must`根据代码中的需要实现变体。

1.  [https://github.com/golang/go/blob/go1.16.5/src/regexp/regexp.go#L305-L314](https://github.com/golang/go/blob/go1.16.5/src/regexp/regexp.go#L305-L314)

# c - ubuntu 12.04 中 gtk2 应用程序中的链接错误

> ID：12434568
> 
> 赞同：2
> 
> 时间：2012-09-15T04:43:28.630
> 
> 标签：c, gtk, ubuntu-12.04, linker-errors

我有一个**C** GUI 应用程序（在**GTK+2.0**中），我用来链接如下：

```
gcc -O2 -std=gnu99 -pipe -Wall -lm `pkg-congig gtk+-2.0 `pkg-config --libs gtk+-2.0` -o exec a.o b.o c.o 
```

最终转换为：

```
gcc -O2 -std=gnu99 -pipe -Wall -lm -pthread -I/usr/include/gtk-2.0 -I/usr/lib/x86_64-linux-gnu/gtk-2.0/include -I/usr/include/atk-1.0 -I/usr/include/cairo -I/usr/include/gdk-pixbuf-2.0 -I/usr/include/pango-1.0 -I/usr/include/gio-unix-2.0/ -I/usr/include/glib-2.0 -I/usr/lib/x86_64 linux-gnu/glib-2.0/include -I/usr/include/pixman-1 -I/usr/include/freetype2 -I/usr/include/libpng12  -lgtk-x11-2.0 -lgdk-x11-2.0 -latk-1.0 -lgio-2.0 -lpangoft2-1.0 -lpangocairo-1.0 -lgdk_pixbuf-2.0 -lcairo -lpango-1.0 -lfreetype -lfontconfig -lgobject-2.0 -lglib-2.0 -lcairo -lgtk-x11-2.0 -lglib-2.0 -o exec a.o b.o c.o 
```

直到**Ubuntu 12.04**。

当我尝试在 Ubuntu 12.04 中以相同方式链接文件时，它显示以下错误：

```
/usr/bin/ld: b.o: undefined reference to symbol 'gdk_color_parse'
/usr/bin/ld: note: 'gdk_color_parse' is defined in DSO /usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libgdk-x11-2.0.so so try adding it to the linker command line
/usr/lib/gcc/x86_64-linux-gnu/4.6/../../../x86_64-linux-gnu/libgdk-x11-2.0.so: could not read symbols: Invalid operation
collect2: ld returned 1 exit status 
```

如果有人对此有任何想法，请分享。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T04:57:41.890

对于较新版本的 GCC/binutils，链接器标志必须排在最后，因为链接器*只会向前*查找未定义的符号。尝试

```
gcc -O2 -std=gnu99 -pipe -Wall a.o b.o c.o -lm `pkg-config --libs gtk+-2.0` -o exec 
```

反而。

# php - 如何查询 session.gc_maxlifetime？

> ID：12434570
> 
> 赞同：0
> 
> 时间：2012-09-15T04:44:51.910
> 
> 标签：php, session, session-state

我知道如何设置会话的持续时间（在 PHP 文件和我的`php.ini`文件中），但我的问题与此相反。如何查看当前`session.gc_maxlife`值是多少？

我使用各种共享托管环境，所有这些环境都有不同的价值。大多数是默认的 24 分钟，但也有一些变化。

我希望能够在会话到期之前向我的用户弹出警告，但我也希望我的脚本能够根据实际的服务器设置计算出时间延迟。

我知道我可以使用 手动查找此信息`phpinfo();`，但我不知道获取此单个值的方法。

我的googlefu有没有让我失望的命令？有人写了一个函数来计算它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:52:52.013

感谢 yoda，我在评论中找到了答案。我不得不使用：

```
ini_get("session.gc_maxlifetime") 
```

# html - Facebook Like 按钮与其他社交按钮不一致。使用 CSS 解决了这个问题，但在其他浏览器中中断

> ID：12434576
> 
> 赞同：12
> 
> 时间：2012-09-15T04:46:07.977
> 
> 标签：html, css, facebook

**CSS：**

```
.share {
    width: 150px;
    height: 20px;
    background: #000;
    float: right;
    white-space: nowrap;
    padding-top: 5px;
    padding-bottom: 5px;
    padding-left: 3px;
    background-color:rgba(255, 255, 255, 0.5);
    border-bottom-left-radius: 5px;
    box-shadow: 0px 0px 10px #888;
    vertical-align: top;
} 
```

**HTML：**

```
<div class="share">
    <div class="fb-like" data-href="http://bronies.info/" data-send="false" data-layout="button_count" data-width="450" data-show-faces="true" style="width:47px; overflow:hidden; top:-3px; left:3px;"></div>
    <a href="https://twitter.com/share" class="twitter-share-button" data-text="Wondered what the bronies were all about?" data-count="none">Tweet</a>
    <div class="g-plusone" data-size="medium" data-annotation="inline" data-width="300" style="width:32px; overflow:hidden;"></div>
</div> 
```

**铬，Safari：**

![Chrome 和 Safari](../Images/57a407cc83de88363fb835bdf582561e.png)

**Internet Explorer、Firefox 和 Opera：**

![Internet Explorer、Firefox 和 Opera](../Images/0d06c01e15b3b87231cc2e023f714e37.png)

如果您可以看到我在 HTML`style`属性中所做的事情，我使用`top:-3px`了 ，并且我在其他浏览器上测试我的网站之前这样做了（Chrome 是我的主要网络浏览器）。我之所以使用它`top`是因为快速的 Google 搜索会引导我进入一个页面，指示我这样做。既然这个解决方案不起作用，我将如何调整它以在所有 Web 浏览器上对齐**和**工作？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2014-02-20T10:09:29.887

我的解决方案是：

```
.fb-like.fb_iframe_widget span{
  vertical-align: top !important;
} 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-15T05:14:44.717

您应该完全删除`top:-3px;`。因为您没有激活定位`position:relative;`所必需的 （不是`static`），所以 Webkit（Chrome、Safari）正确地忽略它，但 Internet Explorer、Firefox 和 Opera 错误地尊重它（-3px shift）。

**编辑：**

*从评论中......*
Facebook的脚本`<span>`在您的内部添加了一个`<div>`然后触发他们还提供的CSS规则：`.fb_iframe_widget span { vertical-align: text-bottom; }`. 我建议添加`float: left;`到所有三个`<div>`标签中，这样它们就不会共享一个共同的流程（或基线）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-15T05:29:56.247

尝试使用`top: auto`并查看结果，检查它是否在所有浏览器中处于相同位置。如果需要虚拟对齐，请使用`bottom: 3px;`（或任何适合您需要的适当值）

*   不要忘记你必须定位：相对；到你的代码

所以 facebook 按钮的最终样式应该是这样的：

```
width:47px; overflow:hidden;position:relative; top:auto;  bottom:3px; left:3px; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T05:17:44.380

我建议使用`display: inline-block;`and`vertical-align: middle;`用于 Facebook 按钮的容器...

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-11T08:11:45.113

我添加`vertical-align: text-bottom;`了`<span>`每个按钮（以匹配 Facebook 所做的），一切都在 Chrome、Firefox 和 IE 中完美排列。`display: inline-block`（如果这很重要，我的跨度也有。）

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-02-11T22:19:15.247

尝试将此添加到您的“共享”div。我不知道它在其他浏览器上的外观如何，但它似乎使 Chrome 中的内容排列整齐。

```
font-size: 0.1px; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-23T09:45:12.607

我最终将每个按钮包装在自己的 div 中，并将 div 设置为

`display:inline-block; white-space: nowrap; vertical-align:top;`

然后将以下内容添加到 facebook 特定的 div 中：

```
#facebookButton > div > span {vertical-align:baseline;} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-03-28T10:37:58.083

将以下样式添加到我的 css 使 facebook 分享按钮与其他社交图标对齐。

```
 .fb_iframe_widget{vertical-align:top;} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-06-14T18:12:05.267

`inline-block`这是我的解决方案：用一个元素包裹每个社交按钮。每个社交按钮的`display`属性是`block`

**HTML**

```
<div class="social-share clearfix">
    <div class="social-share-item">
        <div id="fb-like" class="fb-like" data-href="{url}" data-layout="button_count" data-size="small" data-action="like" data-show-faces="true" data-share="true"></div>
    </div>
    <div class="social-share-item">
        <a class="twitter-share-button" href="https://twitter.com/intent/tweet">Tweet</a>
    </div>
    <div class="social-share-item">
        <div class="g-plus" data-action="share"></div>
    </div>
</div> 
```

**CSS**

```
.social-share {
    display: block;
    background: #f9f9f9;
    padding: 0.2em 0.4em;
    margin-top: 1em;
}
.social-share-item > * {
    display: block;
    float: left;
}
.social-share-item {
    display: inline-block;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-11-04T08:37:05.643

我在使用移动浏览器时遇到了同样的问题，并通过以下方式解决了它：

```
.fb-like span{
    vertical-align: initial !important;
} 
```

# python - Python：多个文件类

> ID：12434577
> 
> 赞同：-1
> 
> 时间：2012-09-15T04:46:37.940
> 
> 标签：python

我想知道如何获得在文件之间拆分的类以在我的主游戏循环中编辑变量。

例如，这里是我想要完成的一个非常基本的版本。

球员等级：

```
class Player():
    def __init__(self, name, field):
        self.name = name
        self.field = field
        self.health = 500
    def summon(self,card):
        self.field.summon(card) 
```

字段类：

```
class Field():
    def __init__(self):
        self.playing_field = []
    def summon(self, card):
        self.playing_field.append(card)
        player1.health = 400 
```

还有我的游戏文件：

```
from Player import Player
from Field import Field

player1_field = Field()
player1 = Player("Steve", player1_field)

test_card = ["Test Card", 300] # Name, Power
player1.summon(test_card) 
```

这会引发错误：

```
NameError: global name 'player1' is not defined 
```

在我的游戏中，我需要在文件之间拆分类，但我无法让它们相互交谈。我想知道如何声明我的播放器对象，以便可以从我的所有类中访问它们，这正在成为一个长列表。

如果您需要我编辑此问题，请说出来。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T23:34:57.437

将来我会提供完整的追溯。

```
Traceback (most recent call last):
  File "stuff.py", line 8, in <module>
    player1.summon(test_card)
  File "/Users/jvanvoorst/blah2/Player.py", line 7, in summon
    self.field.summon(card)
  File "/Users/jvanvoorst/blah2/Field.py", line 6, in summon
    player1.health = 400 
```

问题是 Field 类成员函数 Summon 对 player1 一无所知。

您需要传入对播放器的引用或将播放器添加到 Field 类。如何最好地设计这取决于有多少场，多个玩家可以使用同一个场等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T12:31:47.607

对于您要执行的操作，请**完全避免访问全局变量。**您不需要它们，它们会妨碍制定正确的设计。

在 OO 设计中，对象操纵自己或其他对象。如果要`Field`操作，请将播放器作为 的参数或 的构造函数的`Player`参数传递。这取决于您尝试建模的逻辑：如果您可以将各种玩家召唤到场上，请将玩家作为.`summon()``Field``summon()`

# c - 如何在内存 hexdump 中找到变量的地址？

> ID：12434579
> 
> 赞同：3
> 
> 时间：2012-09-15T04:46:48.197
> 
> 标签：c, gdb, hex, memory-address

当我在做“Learn C The Hard Way”的例子时，我心想：

> 我设置 int a = 10; 但实际值 10 在哪里？我可以在程序运行时从外部手动访问它吗？

*这是一个用于演示目的的小 C 代码片段：*

```
int main (int argc, char const* argv[]) {                                   

    int a = 10;
    int b = 5;
    int c = a + b;

    return 0;
} 
```

我打开了[GNU 项目调试器](http://en.wikipedia.org/wiki/GNU_Debugger)(GDB) 并输入：

```
break main
run
next 2 
```

据我*了解***0x7fff5bffb04**是. 然后我使用**hexdump -C /dev/mem**系统调用将整个内存转储到终端中。*`int c`*

 ***现在的问题是我在哪里可以找到这个巨大的十六进制转储中的*变量 c ？*我希望给定地址，`0x7fff5bffb04`我可以找到它的值，即`15`. **另外，奖金问题， hexdump -C**中的每一列代表什么？（我知道最后一列是 ASCII 表示）

![数据库](../Images/fca46f176e9618aaecbf970eedea79b8.png)

![十六进制转储](../Images/40ac6e93e2359aff64c95a18abe8dfbb.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T23:36:40.337

> 然后我使用 hexdump -C /dev/mem 系统调用将整个内存转储到终端中。

您的 hexdump 转储了物理内存地址。该地址`0x7fff5bffb04`是您正在调试的进程中变量的*虚拟*地址。它被映射到某个*物理*地址，但是如果不检查内核映射表，您将无法找到哪个（正如 Mat 已经在评论中告诉您的那样）。

要检查虚拟地址空间，请使用`/proc/<pid>/mem`（正如 Barmar 在评论中已经告诉您的那样）。

但是整个练习*毫无意义*，因为您*已经*可以检查 GDB 中的虚拟内存，而当您查看 GDB 尚未更方便地显示给您的虚拟内存时，您将看不到*任何东西[1]。*

[1] 除了你可以看到 GDB 插入的断点，但你不应该理解 :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T10:42:36.983

首先，这些值甚至没有理由存在于 ram 中。不仅仅是 Likly，这个程序的机器代码只是在 cpu 寄存器中有值。您必须拥有更多字节（至少尝试 512）并将它们设置为随机值，然后您可以在内存转储中搜索。

您最好查看由 c 编译器生成的汇编代码。***

# jquery - 当 .load() 同一页面时，在 jquery 中单击两次触发器

> ID：12434590
> 
> 赞同：1
> 
> 时间：2012-09-15T04:48:01.747
> 
> 标签：jquery, jquery-load

这是我的主页html：

```
<script type="text/javascript" src="js/jquery.min.js"></script>
<div><a href="#" class="MyClick">Parent Click</a></div>
<div class="content"></div>
<script>
  $(document).ready(function(){ 
    $('.MyClick').click(function(){
       $('.content').load('page2.html');
    }); 
  })
</script> 
```

这是page2.html

```
<a href="#" class="showoff">Child Click</a>
<script type="text/javascript">
 $(document).ready(function(){      
    $('.showoff').live('click',function(){
        console.log('I Clicked');
    });     
 });
</script> 
```

单击链接时`parent click`，加载`page2.html`到控制台萤火虫中`div.content`并单击时`child click`打印一次..

但我的问题是当我再次`parent click`单击并再次单击时`child click`，在控制台打印两次但是我单击一次，就像`page2.html`之前尚未从 DOM 和`child click`page2.html 中删除之前与新的一起触发..

我想加载多少次`page2.html`当我单击一次时不打印多行`Child click`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:08:16.807

每次加载时，`page2.html`您都会注册一个委托点击处理程序，`.showoff`因为您使用`.live()`（顺便说一句，不推荐使用，使用[`.on()`](http://api.jquery.com/on/)or[`.delegate()`](http://api.jquery.com/delegate/)版本<1.7），这就是每次点击获得多个打印的原因。

您是否将 live 用于特定目的？因为这对我来说似乎没有必要，只需在元素本身上使用一个处理程序。

```
<a href="#" class="showoff">Child Click</a>
<script type="text/javascript">
 $(document).ready(function(){      
    $('.showoff').on('click',function(){
        console.log('I Clicked');
    });     
 });
</script> 
```

# javascript - 从城市名称获取 WOEID？

> ID：12434591
> 
> 赞同：6
> 
> 时间：2012-09-15T04:48:18.943
> 
> 标签：javascript, jquery, google-chrome-extension, yahoo-weather-api

我正在使用 Google Weather API 来获取天气信息，但显然 Google 已经停止了它的服务。我现在正在尝试切换到 Yahoo Weather API。

```
var WOEID = 2502265;  //random WOEID
$.ajax({
    url: "http://weather.yahooapis.com/forecastjson?w=" + WOEID + "&u=c",
    dataType: 'json',
    success: function(data) {
        console.log(data);
    }
}); 
```

但是，有没有办法只能通过 JavaScript 获取 WOEID？因为那时我能做到

```
http://www.google.com/ig/api?hl=en&weather=NYC 
```

就是这样。

它在[雅虎天气 API 页面上](http://developer.yahoo.com/weather/)说，

> 要查找您的 WOEID，请从天气主页浏览或搜索您的城市。WOEID 位于该城市预测页面的 URL 中。您也可以通过在主页上输入您的邮政编码来获取 WOEID。

但我想通过 JavaScript 获取它，而不是手动去 weather.yahoo.com 并找出 WOEID。

不要关心跨域策略，因为我在 Chrome 扩展程序中使用它并且它不适用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T05:21:32.140

好的，我从您的评论中知道您到底想要什么

您有一个地名，并且您想使用 javascript ajax 调用获取该地名的 WOEID

获取该网址的网址未定义任何您必须使用 GeoPlanet 服务将地点解析为 WOEID 的地方

```
http://where.yahooapis.com/v1/places.q('Place name')?appid=[yourappidhere] 
```

或者您必须适当地使用类似这样的 Direct YQL（在您的城市名称的 url 中使用百分比编码）并尝试对此进行 ajax 调用

```
http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20geo.places%20where%20text%3D%22Place%20name%22&format=xml 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T05:00:59.200

你也可以从雅虎那里得到它[http://developer.yahoo.com/geo/geoplanet/guide/concepts.html](http://developer.yahoo.com/geo/geoplanet/guide/concepts.html)

# [API 参考](http://developer.yahoo.com/geo/geoplanet/guide/api-reference.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-07T23:24:47.440

2018 年 12 月更新：

绝对使用@aravind.udayashankara 上面提到的 Direct YQL 技术。我在 yboss api 上混了一阵子，结果发现它已经停产了（[https://developer.yahoo.com/boss/search/](https://developer.yahoo.com/boss/search/)），尽管雅虎仍然有大量的在线文档。

请尝试以下操作（它在页面外运行，但 URL 中有代码）。

```
yourLocation = "location" (zip, city name, etc.)

urlQuery = "https://query.yahooapis.com/v1/public/yql?q=select+*+from+geo.places+where+text%3D%22" + yourLocation + "%22&format=json" 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2017-04-19T15:12:44.447

按城市名称获取 Woeid

```
using (WebClient wc = new WebClient())
{
string results = wc.DownloadString("http://query.yahooapis.com/v1/public/yql?q=select%20*%20from%20geo.places%20where%20text%3D%22" + CityName + "%22&format=xml");
} 
```

[有关更多详细信息，请参阅本文](http://kodecenter.com/article?id=6a257e6e-335c-4054-a437-cc423301344c)

# php - MYSQL RANDOM SELECT UNIQUE ROWS - 排除先前选择的行

> ID：12434602
> 
> 赞同：4
> 
> 时间：2012-09-15T04:49:57.817
> 
> 标签：php, mysql, random, unique

我有一个包含 16K 条目的表
我想提取随机的 44 个条目
，但我不想重复相同的条目超过一次（永远）
所以我有一个每个用户列表，将已使用的“ID”保留为逗号- 表格中的分隔字符串。
并且我使用该列表来 SELECT ... NOT IN (used_IDs)

问题是这个列表变得太大并且我相信由于大小而 sql 调用失败

关于如何更有效地做到这一点的任何想法？

```
Questions table:
+------+-------+-------+
| id   | Qtext | Tags  |
+------+-------+-------+

Test table:
+------+-------+
| id   | QIDs  |
+------+-------+

Results table:
+------+-------+-------+
| id   | tID   | uID   |
+------+-------+-------+ 
```

我需要根据结果表从问题表中选择唯一的随机值。（将测试 ID 与问题 ID 相关联）

目前正在尝试使用：

```
SELECT DISTINCT `questions`.`ID`
FROM `questions`, `tests`, `results`
WHERE 
`questions`.`ID` NOT IN (`tests`.`qIDs`)
AND `results`.`uID` = 1 AND `tests`.`ID` = `results`.`tID`
AND 4 IN ( `questions`.`tags`) 
AND "http://www.usmlestep2qna.com" = `provider`
ORDER BY RAND() LIMIT 27; 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T04:57:58.680

您可以创建一个 tall 表来存储它们，而不是将使用的用户 ID 值放在逗号分隔的字符串中的一列中。这应该会产生更好的性能

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T05:00:24.607

与其使用带有（可能很大的）CSV 的单行，不如使用索引良好的表和外连接来挑选不匹配的记录。我的测试数据库中有一个示例：

```
mysql> select * from first;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    6 | gggg  |
+------+-------+
5 rows in set (0.00 sec)

mysql> select * from second;
+------+----------+------+------+-------+------+
| id   | first_id | one  | two  | three | four |
+------+----------+------+------+-------+------+
|    1 |        1 |    3 |    0 |     4 |    6 |
|    1 |        2 |    4 |    4 |     1 |    2 |
|    3 |        3 |    1 | NULL |     3 |    4 |
+------+----------+------+------+-------+------+
3 rows in set (0.00 sec)

mysql> select a.id from first a join second b on a.id=b.first_id;
+------+
| id   |
+------+
|    1 |
|    2 |
|    3 |
+------+
3 rows in set (0.00 sec)

mysql> select a.id from first a 
left outer join second b on a.id=b.first_id where b.first_id is null;
+------+
| id   |
+------+
|    4 |
|    6 |
+------+
2 rows in set (0.00 sec) 
```

这应该可以很好地提高您的性能。

# javascript - Ember Data DS.Model 的设置功能不起作用？

> ID：12434603
> 
> 赞同：0
> 
> 时间：2012-09-15T04:50:03.467
> 
> 标签：javascript, ember.js

在 Ember Data 中，在我声明一个模型并提交到商店后，我检索它并尝试为特定字段设置一个新值，但是它给了我这个错误：

```
Uncaught Error: <DS.StateManager:ember227> could not respond to event setProperty in state rootState.loaded.created.inFlight.
Ember.StateManager.Ember.State.extend.sendRecursively ember-latest.min.js:17
Ember.StateManager.Ember.State.extend.sendRecursively ember-latest.min.js:17
Ember.StateManager.Ember.State.extend.sendRecursively ember-latest.min.js:17
Ember.StateManager.Ember.State.extend.sendRecursively ember-latest.min.js:17
Ember.StateManager.Ember.State.extend.sendRecursively ember-latest.min.js:17
Ember.StateManager.Ember.State.extend.send ember-latest.min.js:17
DS.Model.Ember.Object.extend.send ember-data.js:2540
DS.Model.Ember.Object.extend.setProperty ember-data.js:2549
(anonymous function) ember-data.js:2682
n.set ember-latest.min.js:14
c ember-latest.min.js:14
Ember.Observable.Ember.Mixin.create.set ember-latest.min.js:15
(anonymous function) 
```

详细信息（主要是样板代码）：

```
/* create store */
 App.store = DS.Store.create({
    revision: 2,
    // adapter: DS.LocalStorageAdaptor.create({}),
    adapter: DS.DjangoTastypieAdapter.create({
      serverDomain:  "http://localhost:8000",
      tastypieApiUrl: 'api/v1/',
    });
});

// declare model
App.StyleData = DS.Model.extend({
    ...
    storageID: DS.attr('number', {defaultValue: 0, key: 'storageID'}),

    didCreate: function(){
        // console.log('didcreate');
    },

});

/*create new model */

App.store.createRecord(App.StyleData, {storageID: 0});
App.store.commit();

/* retrieve model and set new value for storageID */
var mod = App.store.findAll( App.StyleData );
var mod1  = mod.get('modelCache')[0];
mod1.set('storageID', 10)     // here the error above is thrown 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T12:20:32.057

此错误来自在通过 API 调用保存记录时尝试修改记录。在您的示例中，`App.store.commit()`启动 ajax 操作以将新记录的详细信息发送到您的 API。Ajax 调用是异步操作，因此记录会进入状态，直到 API 响应，如果一切成功`inFlight`，ember-data 会将记录转换回状态。`clean`虽然它是`inFlight`，但它可能不会被修改。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T12:22:46.860

试试这个方法：

```
var update = function(){
  if(mod.isLoaded()){
    mod1.set('storageID', 10);
  }
}.observes('mod.isLoaded') 
```

# java - Finding multiple substrings using boundaries in Java

> ID：12434604
> 
> 赞同：0
> 
> 时间：2012-09-15T04:50:16.917
> 
> 标签：java

Alright so here is my problem. Basically I have a string with 4 words in it, with each word seperated by a #. What I need to do is use the substring method to extract each word and print it out. I am having trouble figuring out the parameters for it though. I can always get the first one right, but the following ones generally have problems. Here is the first piece of the code:

```
word = format.substring( 0 , format.indexOf('#') ); 
```

Now from what I understand this basically means start at the beginning of the string, and end right before the #. So using the same logic, I tried to extract the second word like so:

```
wordTwo = format.substring ( wordlength + 1 , format.indexOf('#') ); 
//The plus one so I don't start at the #. 
```

But with this I continually get errors saying it doesn't exist. I figured that the compiler was trying to read the first # before the second word, so I rewrote it like so:

```
wordTwo = format.substring (wordlength + 1, 1 + wordLength + format.indexOf('#') ); 
```

And with this it just completely screws it up, either not printing the second word or not stopping in the right place. If I could get any help on the formatting of this, it would be greatly appreciated. Since this is for a class, I am limited to using very basic methods such as indexOf, length, substring etc. so if you could refrain from using anything to complex that would be amazing!

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T04:57:42.837

If you have to use substring then you need to use the [variant of indexOf that takes a start](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#indexOf%28int,%20int%29). This means you can start look for the second `#` by starting the search after the first one. I.e.

```
wordTwo = format.substring ( wordlength + 1 , format.indexOf('#', wordlength + 1 ) ); 
```

There are however much better ways of splitting a string on a delimiter like this. You can use a [StringTokenizer](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html). This is designed for splitting strings like this. Basically:

```
StringTokenizer tok = new StringTokenizer(format, "#");
String word = tok.nextToken();
String word2 = tok.nextToken();
String word3 = tok.nextToken(); 
```

Or you can use the [String.split](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/String.html#split%28java.lang.String%29) method which is designed for splitting strings. e.g.

```
String[] parts = String.split("#");
String word = parts[0];
String word2 = parts[1];
String word3 = parts[2]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T04:56:58.343

You can go with `split()` for this kind of formatting strings.

For instance if you have string like,

```
String text = "Word1#Word2#Word3#Word4"; 
```

You can use delimiter as,

```
String delimiter = "#"; 
```

Then create an string array like,

```
 String[] temp; 
```

For splitting string,

```
temp = text.split(delimiter); 
```

You can get words like this,

```
temp[0] = "Word1";
temp[1] = "Word2";
temp[2] = "Word3";
temp[3] = "Word4"; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T04:57:19.490

Use `split()` method to do this with `"#"` as the delimiter

```
String  s = "hi#vivek#is#good";
String temp = new String();

String[] arr = s.split("#");

for(String x : arr){

  temp = temp + x;
} 
```

**Or if you want to exact each word**... you have it already in `arr`

```
arr[0] ---> First Word
arr[1] ---> Second Word
arr[2] ---> Third Word 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T04:59:55.433

I suggest that you've a look at the [Javadoc for String](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html) before you proceed further.

Since this is your homework, I'll give you a couple of hints and maybe you can solve it yourself:

*   The format for *subString* is `public void subString(int beginIndex, int endIndex)`. As per the [javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#substring%28int%29) for this method:

> Returns a new string that is a substring of this string. The substring begins at the specified beginIndex and extends to the character at index endIndex - 1\. Thus the length of the substring is endIndex-beginIndex.

Note that if you've to use this method, understand that you'll have to shift your beginIndex and endIndex each time because in your situation, you'll have multiple words that are separated by #.

*   However if you look closely, there's another method in String class that might be helpful to you. That's the `public String[] split(String regex)` method. The [javadoc](http://docs.oracle.com/javase/7/docs/api/java/lang/String.html#split%28java.lang.String%29) for this one states:

> Splits this string around matches of the given regular expression. This method works as if by invoking the two-argument split method with the given expression and a limit argument of zero. Trailing empty strings are therefore not included in the resulting array.

The `split()` method looks pretty interesting for your case. You can *split* your String with the delimiter that you have as the parameter to this method, get the String array and work with that.

Hope this helps you to understand your problem and get started towards a solution :)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T05:09:37.893

Since this is a home work, it may be better to have try to write it your self. But I will give a clue.

Clue:

> The `indexOf` method has another overload: `int indexOf(int chr, int fromIndex)` which find the first character `chr` in the string from the `fromIndex`.

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/String.html)

From this clue, the program will look something like this:

1.  Find the index of the first `'#'` from the start of the string.
2.  Extract the word from 0th character to that index.
3.  Find the index of the first `'#'` from the character AFTER the first `'#'`.
4.  Extract the word from the first `'#'` that index. ... Just do it until you get 4 words or the string ends.

Hope this helps.

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-15T05:15:49.160

I don't know why you're forced to use `String#substring`, but as others have mentioned, it seems like the wrong method for the kind of functionality you need.

`String#split(String regex)` is what you would use for such a problem, or, if your input sequence is something you don't control, I would suggest you look at the overloaded method `String#split(String regex, int limit)`; this way you can impose a limit on the amount of matches you make, controlling your resulting array.

# c# - 使用命令提示符以静默模式运行 exe 文件

> ID：12434605
> 
> 赞同：4
> 
> 时间：2012-09-15T04:50:25.987
> 
> 标签：c#, windows, installation, windows-installer

我正在尝试使用静默模式的命令提示符运行 xxx.exe 文件。我在 Google 中看到了这个链接：[http](http://www.powerware.com/Software/lansafe_help/LSHelp424.htm) ://www.powerware.com/Software/lansafe_help/LSHelp424.htm 。

当我运行此命令时： C:>"D:\xxx.exe" -r -f1"D:\Test.iss" 出现错误：**"xxx.exe" 未被识别为内部或外部命令可运行程序或批处理文件。**

任何人都可以给出我在哪里做错的想法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T05:14:09.730

正如其他人所说，请确保您的 exe 文件路径正确。您可以在执行之前更改 exe 所在的目录或写出完整路径。

如果您的意思是在屏幕上没有任何输出的情况下运行 exe，则通过静默模式，只需将输出重定向到文件即可。

例如，如果您的 exe 在 D:\myprog\myprog.exe 中，那么以下命令将使您的程序以“静默”模式运行：

```
c:>"D:\myprog\myprog.exe" > "D:\myprog\output.txt" 
```

上面的示例将输出转储到 output.txt 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T04:55:02.597

您必须运行 EXE 文件所在位置的命令。你能检查它是否位于 d: 中吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T04:56:08.223

您可以在运行命令之前切换到 D:\ 驱动器，但这并不重要。仔细检查它是否确实存在于该位置

# javascript - Javascript，有没有办法将数组编写为没有逗号或空格的单个文本字符串？

> ID：12434609
> 
> 赞同：0
> 
> 时间：2012-09-15T04:51:44.747
> 
> 标签：javascript, arrays, string

> **可能重复：**
> [没有分隔符的数组 join() 方法](https://stackoverflow.com/questions/2125779/array-join-method-without-a-separator)

我正在尝试编写一个简单的数组，然后将其显示为单个连续的文本行，没有逗号的间隙或任何形式的分隔。例如，如果数组是关于水果的，并且涉及的水果是苹果[0] 和香蕉[1]，它将显示为 applesbananas。

我也在使用 socket io 并尝试了 array.join 命令，但它在 cmd 中作为“本机表达式”出现，我不知道该怎么做。

这是我到目前为止的代码：

```
var A = 0
var B = 0
var master = new Array();

io.sockets.on("connection", function (socket) {

    socket.on("message", function (data) {

        var new_data = data.split(',');

        if (new_data == 'A') {
            master.push(new_data)
            console.log(A);
        }
        else if (new_data == 'B') {
            master.push(new_data)
            console.log(B);
        }
        var final = (master.join);
            console.log(final);
            socket.emit("message", 'master,' + final);
            socket.broadcast.emit("message", 'master,' + final); 
```

现在，这个 .join 表达式在 cmd 中显示为原生表达式。有没有办法以 cmd 或 socket io 可以理解的方式加入数组元素？

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T04:54:44.297

您看到该错误是因为您在调用`.join`.

您可以使用 加入没有空格的数组`.join('')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T04:56:59.287

尝试这个：

```
var final = master.join(""); 
```

# php - 弹出窗口出现然后退出

> ID：12434616
> 
> 赞同：-2
> 
> 时间：2012-09-15T04:53:18.987
> 
> 标签：php, javascript, popup, onsubmit

出现弹出窗口然后在加载后立即退出的代码是什么？我需要向其中添加转换代码以跟踪转换，但不想要感谢页面或重定向。

此外，无论如何隐藏弹出窗口，使其变小，仅持续 2 秒，或隐藏在浏览器后面？

我想把它放在表单的 onsubmit 函数上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:01:22.760

可能就是你要找的东西

```
<div id="popupId">
 code for your popup
</div>
setTimeout(function (){document.getElementById('popupId').style.display='none';},2000); 
```

谢谢

# javascript - 如何修复包含的验证码中的错误 addthis

> ID：12434617
> 
> 赞同：0
> 
> 时间：2012-09-15T04:53:21.970
> 
> 标签：javascript, captcha, addthis

我用 javascript 创建验证码。这是我的代码：

```
    var a = Math.ceil(Math.random() * 10);
    var b = Math.ceil(Math.random() * 10);
    var c = Math.ceil(Math.random() * 10);       
    变量 d = a + b + c;
    函数 DrawBotBoot(){
        document.write("什么是"+a+"+"+b+"+"+c+"?");
    }    

    函数 ValidBotBoot(){
        var e = document.getElementById('BotBootInput').value;
        如果 (e == d) 返回真；        
        返回假；
    }

    $（函数（）{
        $(".commentblogsubmit").click(function()
          {
          if(ValidBotBoot() == false){
            警报（“错误”）；    
          }别的{
            alert("成功！！！");
          }
        返回假；
        });
    });

```

但如果我包括 addthis，警报总是错误
对不起我的英语不好

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:16:42.197

您的代码可能与 addthis 冲突。addthis 中可能使用了 abc 或 d。

简单的解决方法是只使用具有不同、更具描述性的名称的变量。您可以做的另一件事是在绘图函数中包含生成代码并让它返回总和。所以你说

```
var expected = DrawBotBoot(); 
```

然后您可以将该值传递给 validate 函数进行测试。

```
ValidBotBoot(expected) 
```

这样，变量就保持在您希望它们的范围内。

# git - Git中添加但未提交的已删除文件可以恢复吗？

> ID：12434618
> 
> 赞同：5
> 
> 时间：2012-09-15T04:53:52.513
> 
> 标签：git, recover

我是 git 新手，我犯了一个愚蠢的错误，我通过“rm *”命令删除了一些重要文件。但是，我确实使用“git add”来添加这些文件，但没有提交。删除尚未添加。那么有什么方法可以恢复这些已删除的文件。

任何建议或答案将不胜感激。谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T07:20:24.657

由于文件已经在您的暂存区域（索引）中，只需使用`git commit`不带任何参数的方式提交它们。无论工作树的当前状态如何，这都会提交索引的内容。

然后您可以使用`git reset --hard`（如果您在要保留的树中没有其他更改）或`git checkout FILE1 FILE2...`将丢失的文件恢复到您的工作树中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T04:59:09.587

您可以使用它`git fsck --lost-found`来查找不再引用的所有对象。您需要查看“blob”对象并查看它们是否与您删除的文件匹配。希望您周围没有很多未引用的对象。

* * *

正如用户 4815162342 所指出的，发帖人实际上说尚未添加删除，这意味着可以使用 检索它们`git checkout`，或者只是立即提交以确保它们不会消失。

我会留下我的答案，以防其他人想要关于 的信息`git fsck --lost-found`，但应该接受 user4815162342 的答案。

# javascript - 在 Twitter 上使用 ie9 中的空白 src 访问 iframe 的 contentWindow

> ID：12434624
> 
> 赞同：2
> 
> 时间：2012-09-15T04:55:34.807
> 
> 标签：javascript, internet-explorer, iframe, cross-domain

我正在尝试访问 twitter.com 上 ie9 中动态插入的 iframe 的内部（从与主机页面不同的域加载的脚本插入），以便我可以将内容写入其中。我尝试将 设置`src`为`''`和`about:blank`。访问`contentDocument`抛出`Access denied`错误，访问`contentWindow`返回什么都没有。为什么会这样，有没有办法解决它？它适用于其他浏览器，但由于某种原因，Twitter 似乎正在采取措施防止这种情况发生，我很好奇它是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:49:56.627

我使用以下内容，我相信它适用于所有支持`iframe`.

```
var iframe = document.createElement("iframe");
document.body.appendChild(iframe);
var iframeDoc = iframe.contentWindow.document;

iframeDoc.open();
iframeDoc.write(html);
iframeDoc.close(); 
```

我根本不设置`@src`。

# c - C语言中的#define，带有三个点

> ID：12434626
> 
> 赞同：13
> 
> 时间：2012-09-15T04:56:24.013
> 
> 标签：c, label, c-preprocessor, notation, variadic-macros

```
#define LOGI(...) ((void)__android_log_print(ANDROID_LOG_INFO, "native-activity", __VA_ARGS__))
#define LOGW(...) ((void)__android_log_print(ANDROID_LOG_WARN, "native-activity", __VA_ARGS__)) 
```

这是这两个宏的定义；稍后在代码中`LOGI`并`LOGW`以这种方式使用

```
LOGI("accelerometer: x=%f y=%f z=%f",
                                event.acceleration.x, event.acceleration.y,
                                event.acceleration.z); 
```

这样

```
LOGW("Unable to eglMakeCurrent"); 
```

由于我尽量避免使用复杂的宏，而且`#define`总的来说，我无法理解这个宏的实际含义。3 点符号在这里的作用是什么？`#define`稍后在代码中会发生什么变化？

显然我知道这 3 个点是用来表示和不定数量的论点，但我不知道如何阅读这种情况。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-15T05:05:46.463

C99 标准引入了*可变参数宏*，即可以采用可变数量参数的类似函数的宏。

引用 C 标准的[最新草案](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1570.pdf)，第 6.10.3 节：

> 如果宏定义中的标识符列表不以省略号结尾，则调用类函数宏时的参数数量（包括那些不包含预处理标记的参数）应等于宏定义中的参数数量。否则，调用中的参数应多于宏定义中的参数（不包括`...`）。应该存在一个终止调用的 ) 预处理令牌。
> 
> 标识符`__VA_ARGS__`应仅出现在在参数中使用省略号的类函数宏的替换列表中。

...

> 如果`...`在宏定义的标识符列表中有 a ，那么尾随参数，包括任何分隔的逗号预处理标记，将被合并为一个项目：*变量 arguments*。如此组合的参数数量使得在合并后，参数的数量比宏定义中的参数数量多一（不包括`...`）。

在下一小节中：

> 替换列表中出现的标识符`__VA_ARGS__`应被视为参数，可变参数应形成用于替换它的预处理标记。

So you can invoke `LOGI` or `LOGW` with as many arguments as you like, and they'll all be expanded at the place specified in the definition by the reference to `__VA_ARGS__`.

# ruby-on-rails - Rails redirect_to：返回锚点不起作用

> ID：12434627
> 
> 赞同：3
> 
> 时间：2012-09-15T04:56:37.450
> 
> 标签：ruby-on-rails

这不起作用：

```
redirect_to :back, :anchor => 'visitor-comments-container' 
```

如何用锚重定向回来？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:13:45.300

在您的应用程序控制器中，将请求 url 存储在会话哈希中，该哈希可用于多个后续请求

```
session[:return_to] ||= request.referer 
```

然后您可以将此会话用于任何控制器操作，

```
redirect_to session[:return_to] 
```

# c# - 为什么这里需要静态

> ID：12434628
> 
> 赞同：0
> 
> 时间：2012-09-15T04:56:39.013
> 
> 标签：c#, regex, static

如果这个问题太简单，我提前道歉。

为什么下面链接中的方法 NthIndexOf 需要静态类和静态类成员？

[C# - indexOf第n次出现的字符串？](https://stackoverflow.com/questions/186653/c-sharp-indexof-the-nth-occurrence-of-a-string)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T04:58:54.937

因为它是一种[扩展方法（MSDN）](http://msdn.microsoft.com/en-us/library/bb383977.aspx) ——注意`this`第一个参数之前的关键字。

这允许您使用以下语法：

```
var result = "foo bar".NthIndexOf("o", 1); 
```

…就好像您已将`NthIndexOf`方法添加到`System.String`类型中一样。这将在该静态类的命名空间可用的任何地方可用（`using MyExtensions;`例如）。

扩展方法必须声明为公共的、非嵌套静态类的静态方法，但同样的逻辑可以在不使用扩展方法的情况下进行封装，在这种情况下就不需要使用静态类和方法。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T05:01:43.130

因为它是一种**[扩展方法（EM）](http://msdn.microsoft.com/en-us/library/bb383977.aspx)。**

> 扩展方法使您能够将方法“添加”到现有类型，而无需创建新的派生类型、重新编译或以其他方式修改原始类型。扩展方法是一种特殊的静态方法，但它们被称为扩展类型的实例方法。对于用 C# 和 Visual Basic 编写的客户端代码，调用扩展方法和在类型中实际定义的方法之间没有明显区别。

**例如：**
String 是 .Net 类型。在 EM 之前，如果不进行派生，就无法将自己的方法添加到字符串类型。即使您通过派生这样做，该方法也将被视为派生类型而不是字符串类型的方法。

但是现在有了 EM，您可以在没有衍生的情况下这样做。

**EM 的要求（在 C# 中）**

1.  它们必须是公共的和静态的
2.  定义它们的类也是公共的和静态的。
3.  **最重要的：**第一个参数应该是您为其创建 EM 的类型，并且`this`前面应该有关键字。没有它，您的方法将不是 EM，而只是静态方法。

在您之前的场景中，您的 EM`NthIndexOf`是在静态类中定义的`StringExtender`

```
public static class StringExtender
{
    public static int NthIndexOf(this string target, string value, int n)
    {
        ....
    }
} 
```

现在因为第一个参数在字符串前面包含这个，所以你可以把它称为

```
int result = "My string".NthIndexOf("M", 0); 
```

如果不是 EM 和像这样的普通静态方法

```
public static class StringExtender
{
    public static int NthIndexOf(string target, string value, int n)
    {
        ....
    }
} 
```

然后它必须被称为

```
int result = NthIndexOf("My string", "M", 0); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T05:01:10.443

这是一种需要静态关键字的[扩展方法。](http://msdn.microsoft.com/en-us/library/bb383977.aspx)

# php - 如何修复：警告：mysql_num_rows()：提供的参数不是有效的 MySQL 结果资源

> ID：12434632
> 
> 赞同：0
> 
> 时间：2012-09-15T04:56:58.660
> 
> 标签：php, warnings

我在下面的脚本中不断收到此错误，并且不确定如何解决此问题。我已经搜索并阅读了大量文章，但没有得到它。我错过了什么？真诚感谢任何帮助！

“警告：mysql_num_rows()：提供的参数不是第 42 行 /home/content/37/8642937/html/settingupsearch.php 中的有效 MySQL 结果资源”

```
<?php

$var = @$_GET['q'] ; // get the query for the search engine (if applicable)
$trimmed = trim($var); //trim whitespace from the stored variable

{
        $con = mysql_connect("***","***","***");
        if (!$con)
          {
          die('Could not connect: ' . mysql_error());
          }
}

$field = "title";
$query = mysql_query("SELECT * FROM Listings WHERE ($field) LIKE'%$trimmed%' ORDER BY id"); 

$result = mysql_query($query); 

?>

<form name="search" method="GET" action="<?=$PHP_SELF?>">
Search the database for: <input type="text" name="q" />
<input type="submit" name="search" value="Search" />
</form>

<?
if ($trimmed == "")
{
echo "<p>Please enter a search...</p>";
exit;
}

// check for a search parameter
if (!isset($var))
{
echo "<p>We dont seem to have a search parameter!</p>";
exit;
}

$numresults=mysql_query($query);
$numrows=mysql_num_rows($numresults);

if ($numrows == 0)
{
echo "<h4>Results</h4>";
echo "<p>Sorry, your search: &quot" . $trimmed . "&quot returned zero results</p>";
}

// next determine if s has been passed to script, if not use 0
if (empty($s))
{
$s=0;
}

// get results
$result = mysql_query($query) or die("Couldn't execute query");

if($numrows > 1){ $return = "results";}
else{ $return = "result"; }

// display what the person searched for
echo "<p>Your search for &quot" . $var . "&quot returned $numrows $return.</p>";

// begin to show results set
$count = 1 + $s ;

while ($r= mysql_fetch_array($result))
{
$id = $r["ID"];
$title = $r["title"];
$date = $r["price"];
$city = $r["city"];

$count++ ;

?>

<a href="http://www.***.com/archive/<? echo $title ?>/<? echo $id ?>.html"><? echo $price ?></a>

<? echo $city ?>

<? } ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T05:01:22.490

在查看您的代码时，您似乎有一个错误：

```
$query = mysql_query("SELECT * FROM Listings WHERE ($field) LIKE'%$trimmed%' ORDER BY id"); 
```

这包含在 mysql_query 中，然后您使用 mysql_query 再次调用它。

# jms - 带有 BUS 的 Websphere JMS

> ID：12434642
> 
> 赞同：1
> 
> 时间：2012-09-15T04:58:41.267
> 
> 标签：jms, websphere

嗨，我是 Websphere JMS 的新手。这是有点不同的配置，即我们需要先创建 BUS。我还看到连接工厂具有服务总线引用，并且队列中给出了相同的服务引用。到目前为止我有以下理解

1.  我们有满足特殊需求的企业总线。即 BUS 可以控制 MDB 之前的消息。我们可以过滤、修改 BUS 中的消息。
2.  Connection factory 和 Queue 之间有什么关系。我刚刚看到 Connection factory 具有相同的 BUS 引用。
3.  为什么我们在 Connection factory 和 Queue 中引用相同的 BUS 名称。

请纠正我的理解并帮助我找到上述问题的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T21:50:02.037

> 为什么我们在 Connection factory 和 Queue 中引用相同的 BUS 名称。

一个原因是连接工厂和队列中配置的总线不一定相同。在使用 SIBus 链路互连总线的拓扑中就是这种情况。在这种情况下，您可以连接到一条总线中的消息传递引擎，以将消息发送到另一条总线中的目的地。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T14:28:58.277

SIBus 是保存包含目的地（点对点或发布/订阅）并实际调度消息的消息传递引擎

在 JMS 部分中，您获得了 Default JMS Provider，它为您提供 JMS 资源（连接工厂、队列、主题），允许您与 SIBus 交互

在 SIBus 中，您在具有某种类型（点对点或发布/订阅）的消息传递引擎上定义目标

JMS 连接工厂创建到消息传递引擎的连接，以便您可以发送/接收消息，这就是为什么您需要告诉它您希望它创建连接到哪个总线的原因

JMS 队列指的是 SIBus 中的点对点目的地。

现在为您的问题：

Bus 本身并不打算修改或过滤消息
过滤可以通过在 MDB 中使用消息选择器来完成，当 MDB 附加到目标时，它将提供消息选择器，消息传递引擎将通过它过滤消息。
关于修改我不确定

正如我之前所说，
ConnectionFactory 是创建到消息传递引擎的连接，而 Queue 是 SIB 目标的抽象。这就是为什么你需要告诉每个人它正在与哪个总线交互。

# html - Bootstrap 中的中心药丸

> ID：12434645
> 
> 赞同：3
> 
> 时间：2012-09-15T04:59:02.170
> 
> 标签：html, css, twitter-bootstrap

Bootstrap 的新手，几乎完全遵循这个问题，并且似乎无法让我的药丸/标签居中？

```
</head> <body>
    <div class="container">
      <ul class="nav nav-pills">
        <li><a href="#home" data-toggle="tab">Home</a></li>
        <li><a href="#profile" data-toggle="tab">Profile</a></li>
        <li><a href="#messages" data-toggle="tab">Messages</a></li>
        <li><a href="#settings" data-toggle="tab">Settings</a></li>
      </ul>
    </div>
<html> 
```

```
.nav-tabs > li, .nav-pills > li {
    float:none;
    display:inline-block;
    *display:inline; /* ie7 fix */
     zoom:1; /* hasLayout ie7 trigger */
}

.nav-pills {
    text-align:center;
} 
```

我在一个名为 style.css 的文件中有 CSS，我正在导入

```
<link href="style.css" rel="stylesheet" type = "text/css"> 
```

这两个文件都在引导文件夹中，所以不确定发生了什么

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T05:04:36.653

您需要覆盖引导程序定义的 .nav-pills css 类（正如您已经在做的那样）。您应该更新边距并为元素指定宽度。

```
.nav-pills {
    margin: 0 auto;
    padding: 0;
    width: 400px;
} 
```

# linux - Linux内核源代码中的“当前”是什么？

> ID：12434651
> 
> 赞同：30
> 
> 时间：2012-09-15T04:59:52.120
> 
> 标签：linux, linux-kernel, kernel

我正在研究 Linux 内核，但遇到了问题。

我看到很多 Linux 内核源文件都有`current->files`. 那么是什么`current`？

```
struct file *fget(unsigned int fd)
{
     struct file *file;
     struct files_struct *files = current->files;

     rcu_read_lock();
     file = fcheck_files(files, fd);
     if (file) {
             /* File object ref couldn't be taken */
             if (file->f_mode & FMODE_PATH ||
                 !atomic_long_inc_not_zero(&file->f_count))
                     file = NULL;
     }
     rcu_read_unlock();

     return file;
 } 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-15T05:11:29.190

它是指向当前进程（即发出系统调用的进程）的指针。

在 x86 上，它在`arch/x86/include/asm/current.h`（其他拱门的类似文件）中定义。

```
#ifndef _ASM_X86_CURRENT_H
#define _ASM_X86_CURRENT_H

#include <linux/compiler.h>
#include <asm/percpu.h>

#ifndef __ASSEMBLY__
struct task_struct;

DECLARE_PER_CPU(struct task_struct *, current_task);

static __always_inline struct task_struct *get_current(void)
{
    return percpu_read_stable(current_task);
}

#define current get_current()

#endif /* __ASSEMBLY__ */

#endif /* _ASM_X86_CURRENT_H */ 
```

[Linux 设备驱动程序](http://www.xml.com/ldd/chapter/book/ch02.html)第 2 章中的更多信息：

> 当前指针是指当前正在执行的用户进程。在执行系统调用（例如 open 或 read）期间，当前进程是调用该调用的进程。如果需要，内核代码可以通过使用 current 来使用特定于进程的信息。[...]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T05:13:17.893

`Current`是类型的全局变量`struct task_struct`。您可以在 [1] 中找到它的定义。

`Files`是一个`struct files_struct`，它包含当前进程使用的文件的信息。

[1] [http://students.mimuw.edu.pl/SO/LabLinux/PROCESY/ZRODLA/sched.h.html](http://students.mimuw.edu.pl/SO/LabLinux/PROCESY/ZRODLA/sched.h.html)

# python - 为什么运行 2 个线程会使 python 崩溃？

> ID：12434654
> 
> 赞同：0
> 
> 时间：2012-09-15T05:00:25.880
> 
> 标签：python, multithreading, python-3.x, threadpool, linear-algebra

我正在制作一个小程序来评估和绘制函数的[线性规范变换](http://en.wikipedia.org/wiki/Linear_canonical_transformation)：

```
from scipy import *
from scipy.integrate import *
import time
from threading import *
def lct(f, a, b, c, d):
    def X(u):
        coeff=sqrt(-1j)*e**(1j*pi*(d/b)*(u**2))
        integrand_R= lambda t,f,a,b: (e**(-2j*pi*u*t/b)*e**(1j*pi*a*t**2/b)*f(t)).real
        integrand_I= lambda t,f,a,b: (e**(-2j*pi*u*t/b)*e**(1j*pi*a*t**2/b)*f(t)).imag
        # integral= sum of integrals of real and imaginary parts
        integral=quad(integrand_R,-Inf,0,args=(f,a,b))[0]+1j*quad(integrand_I,-Inf,0,args=(f,a,b))[0]
        #print(integral)
        return coeff*integral
    return X
class Executor(Thread):
    def __init__(self, f):
        self._f = f
        Thread.__init__(self)
    def run(self):
        y=[self._f(x_i) for x_i in x]
    def result():
        return y
#thread pool
class Pool:
    def map(self,f,x):
        executors=[Executor(f) for i in range(1)]
        x=x.reshape(8,-1)
        for i in range(len(executors)):
            executors[i].x=x[i]
            executors[i].start()
            #executors[i].join()
        #raise TypeError
        for e in executors:
            e.join()
        raise TypeError#execution does not make it this far if two threads are used

start=time.clock()

p=Pool()
x=arange(4,step=0.005)
test_lct=lct(lambda x: sin(x),1,2,3,7)
def test():
    y=abs(p.map(test_lct,x))
    raise TypeError
    figure(figsize=(6*3.13,4*3.13/2))
    plot(x,y)
    for i in range(y.size):
        if y[i]>1e15:
            print(x[i])
            print(y[i])
            print('\n')
            print(x[130:140])
            print('\n')
            print(y[130:140])
            print('\n')
test()
test_lct=lct(lambda x: sin(2*x),1,2,3,7)
test()

stop=time.clock()
print(stop-start) 
```

这项工作应该由线程池在 8 个线程之间分配，但是如果我将`executors=[Executor(f) for i in range(1)]`（第 26 行）更改为`executors=[Executor(f) for i in range(2)]`，Python 崩溃：“python.exe 已停止工作”。为什么两个线程会导致python崩溃？

注意：这可以在没有交互式解释器/matplotlib 的情况下运行，因为它在调用 plot() 之前停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T10:44:37.990

尝试使用`multiprocessing.Pool`. 它通过使用多个进程来避免 GIL。

我没有安装 scipy，所以我无法测试它，但试试这样的东西。

```
from scipy import *
from scipy.integrate import *
import time
from multiprocessing import Pool
from matplotlib.pyplot import figure, plot

def lct(f, a, b, c, d):
    def X(u):
        coeff=sqrt(-1j)*e**(1j*pi*(d/b)*(u**2))
        integrand_R= lambda t,f,a,b: (e**(-2j*pi*u*t/b)*e**(1j*pi*a*t**2/b)*f(t)).real 
        integrand_I= lambda t,f,a,b: (e**(-2j*pi*u*t/b)*e**(1j*pi*a*t**2/b)*f(t)).imag 
        # integral= sum of integrals of real and imaginary parts
        integral=quad(integrand_R,-Inf,0,args=(f,a,b))[0]+1j*quad(integrand_I,-Inf,0,args=(f,a,b))[0]
        #print(integral)
        return coeff*integral
    return X

def test():
    global test_lct, x
    y=abs(p.map(test_lct,x))
    figure(figsize=(6*3.13,4*3.13/2))
    plot(x,y)
    for i in range(y.size):
        if y[i]>1e15:
            print(x[i])
            print(y[i])
            print('\n')
            print(x[130:140])
            print('\n')
            print(y[130:140])
            print('\n')

if __name__ == '__main__':
  p=Pool()
  x=arange(4,step=0.005)
  start=time.clock()
  test_lct=lct(lambda x: sin(x),1,2,3,7)
  test()
  test_lct=lct(lambda x: sin(2*x),1,2,3,7)
  test()
  stop=time.clock()
  print(stop-start) 
```

# visual-studio - MSVC 2012 - 复制行的快捷方式

> ID：12434673
> 
> 赞同：10
> 
> 时间：2012-09-15T05:04:05.283
> 
> 标签：visual-studio, keyboard-shortcuts

在 Microsoft Visual Studio 2012 中复制一行的关键是什么？（在记事本++中是 ctrl+D ）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-11-14T18:00:09.517

检查这个扩展：

*   重复选择扩展：http: [//visualstudiogallery.msdn.microsoft.com/830a6482-3b8f-41a8-97b5-b9c581e5ad8b](http://visualstudiogallery.msdn.microsoft.com/830a6482-3b8f-41a8-97b5-b9c581e5ad8b)

在不触摸剪贴板的情况下复制该行（就像 Notepad++ 所做的那样）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-30T23:34:46.633

只是为了说清楚

行首的 ctrl-C 复制整行而不需要选择它

[在 Visual Studio 11 中复制一行代码的快捷](https://stackoverflow.com/questions/9894510/shortcut-for-duplicating-a-line-of-code-in-visual-studio-11)方式

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T05:16:34.580

这是[键盘快捷键](http://msdn.microsoft.com/en-us/library/da5kh0wa.aspx)列表，但看不到重复项。Ctrl+C/Ctrl+V 可能是你最好的选择，或者看看你是否可以在工具>选项>键盘下定义一些东西。

# cassandra - 如何在 Cassandra 中有效地存储此文档结构？

> ID：12434675
> 
> 赞同：1
> 
> 时间：2012-09-15T05:04:39.897
> 
> 标签：cassandra

我想将这个复杂的文档结构迁移到 cassandra：

```
foo = {
  1: {
    :some => :data,
  },
  2: {
    :some => :data
  },

  ...

  99 :{
    :some => :data
  }

  'seen' => {1 => 1347682901, 2 => 1347682801}
} 
```

问题：它必须在~<5 毫秒内作为一行/记录可检索（可读）。

到目前为止，我正在序列化数据，但这并不是最佳选择，因为我总是需要更新整个数据。

另一件事是，我想将 cassandras ttl 功能用于“看到”哈希中的值。

关于子结构（1..n）如何在 cassandra 中工作的任何想法，因为它们是完全动态的，但应该可以通过一个查询全部读取？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T05:15:10.963

创建一个列族。并存储如下

```
rowKey = foo

columnName           Value
-----------------------------------
1               {:some => :data,..}
2               {:some => :data,..}
...
...
99              {:some => :data,..}
seen            {1 => 1347682901, 2 => 1347682801} 
```

1,2,...“看到”都是动态的。

如果您担心只更新其中一列。这与在列族中插入新列的方式相同。见这里[Cassandra 更新专栏](https://stackoverflow.com/questions/4699052/cassandra-update-column)

```
$column_family->insert('foo', array('42' => '{:some => :newdata,..}')); 
```

我还没有使用TTL。但这很简单。[在 Cassandra 0.7+ 中的 Expiring Columns 中](http://www.datastax.com/dev/blog/whats-new-cassandra-07-expiring-columns)查看非常简单的方法来实现这一点

* * *

**更新**

> **Q1。**只是为了我的理解：您是否建议创建 99 列？或者是否有可能保持这种动态？

与 RDBMS 不同，列族具有灵活的结构。动态创建的行键可以有无限数量的列。例如：

```
myCcolumnFamily{
   "rowKey1": {
      "attr1": "some_values",
      "attr2": "other_value",
      "seen" : 823648223
   },
   "rowKey2": {
      "attr1": "some_values",
      "attr3": "other_value1",
      "attr5": "other_value2",
      "attr7": "other_value3",
      "attr9": "other_value4",
      "seen" : 823648223
   },
   "rowKey3": {
      "name"   : "naishe",
      "log"    : "s3://bucket42.aws.com/naishe/logs",
      "status" : "UNKNOWN",
      "place"  : "Varanasi"
   }
} 
```

这是一篇老文章，值得一读：[WTF is a SuperColumn？](http://arin.me/blog/wtf-is-a-supercolumn-cassandra-data-model)这是一个典型的报价，可以回答您的查询（强调我的）：

> 我想指出的一件事是在这个`[ColumnFamily]`级别上没有强制执行模式。*行没有它们包含的预定义列列表。*在上面的示例中，您会看到键为“ieure”的行包含名称为“age”和“gender”的列，而键“phatduckk”标识的行没有。它是 100% 灵活的：*一个行可能有 1,989 个列，而另一个有 2 个。一个行可能有一个名为“foo”的列，而其他行都没有。这是 Cassandra 的无模式方面。*

. . . .

> **Q2。**你建议序列化子结构？

由你决定。如果您不想序列化，您可能应该使用 SuperColumn。我的经验法则是这样的。如果列中的值表示不能独立访问其部分的单元，请使用列。（这意味着序列化值）。如果列具有可能需要直接访问的零散子部分，请使用 SuperColumn。

# java - php 触发 android 应用程序发送其 gps 位置

> ID：12434676
> 
> 赞同：0
> 
> 时间：2012-09-15T05:04:48.083
> 
> 标签：java, php, android, gps

我是java和php的初学者。我的申请由两部分组成：

1.  服务器端 ( `php`)
2.  客户端 android 设备 ( `java`)。

每当服务器端的管理员需要时，即使 android 上的应用程序没有运行，他也可以向 android 发送请求以获取其位置坐标。
我设法创建了将检测移动位置并将其保存在 android 上的变量中的 java 文件。
我的问题是，如何启用 php（服务器端）发送请求，该请求将启动在 android 上查找位置坐标的操作？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:53:43.027

您可以使用[Google Cloud Messaging for Android](http://developer.android.com/guide/google/gcm/index.html)将推送通知功能添加到您的应用程序。

# database - 处理php codeigniter中的表单复选框并更新数据库中的画廊顺序？

> ID：12434680
> 
> 赞同：0
> 
> 时间：2012-09-15T05:05:39.253
> 
> 标签：database, codeigniter

我正在尝试设置一个管理页面，在该页面中，我可以使用 Web 表单中的复选框从图库中选择图像，然后从文件系统和数据库中删除图像。我遇到的问题是我应该如何更新数据库。

正如您在模型中看到的那样，我目前在删除每个文件后更新数据库，只保留删除的数量并从“旧”订单号中减去该数量，因为删除前 10 个图像之后的图像 23 将结束向上是图像 23-10 = 13)。不确定是否可能存在一些无法正常工作的中断情况。

它似乎有效，但注意到如果画廊有很多图片，数据库订单 ID 在 35 之后没有更新。我想知道这是否可能是一些限制，比如可以在给定数量内与数据库建立多少连接时间？有没有办法可以存储所有订单 ID 并一次更新它们，或者每次都正确连接到数据库（我怀疑，因为这似乎是不好的做法）？

网络表格：

```
<form action="http://localhost/admin/galleryRemove" method="post" enctype="multipart/form-data">
    <input type="checkbox" name="orderID[]" value="1"  />
    <img src="http://localhost/img/galleries/001/img01.jpg" alt="1" class="imgCheck" />

    <input type="checkbox" name="orderID[]" value="2"  />
    <img src="http://localhost/img/galleries/001/img02.jpg" alt="2" class="imgCheck" />

    <input type="checkbox" name="orderID[]" value="3"  />
    <img src="http://localhost/img/galleries/001/img03.jpg" alt="3" class="imgCheck" />

    <input type="checkbox" name="orderID[]" value="4"  />
    <img src="http://localhost/img/galleries/001/img04.jpg" alt="4" class="imgCheck" />

    <input type="checkbox" name="orderID[]" value="5"  />
    <img src="http://localhost/img/galleries/001/img05.jpg" alt="5" class="imgCheck" />

    <input type="checkbox" name="orderID[]" value="6"  />
    <img src="http://localhost/img/galleries/001/img06.jpg" alt="6" class="imgCheck" />

    <input type="checkbox" name="orderID[]" value="7"  />
    <img src="http://localhost/img/galleries/001/img07.jpg" alt="7" class="imgCheck" />

    <input type="checkbox" name="orderID[]" value="8"  />
    <img src="http://localhost/img/galleries/001/img08.jpg" alt="8" class="imgCheck" />

    <input type="checkbox" name="orderID[]" value="9"  />
    <img src="http://localhost/img/galleries/001/img09.jpg" alt="9" class="imgCheck" />

    <input type="checkbox" name="orderID[]" value="10"  />
    <img src="http://localhost/img/galleries/001/img10.jpg" alt="10" class="imgCheck" />

    <input type="hidden" name="galleryID" value="1" />
    <input type="submit" name="remove" value="Remove"  /> This will remove all images checked.
</form> 
```

用于处理表单帖子的 CI 模型。

```
// Start of removing an image functions
    function imgRemove()
    {
        $cnt = 0;
        $id = $this->input->post('galleryID');
        foreach ($_POST['orderID'] as $order)
        {                
            $order = $order - $cnt;
            // get the picture name
            $this->db->select('*');
            $this->db->where("gallery_id = '$id'");
            $this->db->where("`order` = '$order'");
            $this->db->from('gallery');
            $q = $this->db->get();
            if ($q->num_rows != 0)
            {
                $result = $q->result();
                $picture = $result[0]->picture;

                // Get the path and then unlink(delete) the file and it's thumbnail
                $imgPath = $this->imgPath($id);
                $img =  $imgPath . $picture;
                $thumbImg =  $imgPath . 'thumbs/thumb' . $picture;
                if (file_exists($img))
                {
                    unlink($img);
                }
                if (file_exists($thumbImg))
                {
                    unlink($thumbImg);
                }

                // Remove the line from the database
                $this->db->where('gallery_id', $id);
                $this->db->where('order', $order);
                $this->db->delete('gallery');
                // Reorder all images after the deleted one.
                $this->imgOrderCheckRemove($id, $order);
                $cnt++;
            }
        }
    } 
```

数据库表布局：
![在此处输入图像描述](../Images/93ab4acbec87e41c470e52415f66a08a.png)

结果来自 var_dump($images); 就在 update_batch 之前。

```
array(3) {
    [2]=>
    array(5) {
        ["prim_id"]=>
        string(1) "8"
        ["gallery_id"]=>
        string(1) "2"
        ["picture"]=>
        string(21) "002.jpg"
        ["order"]=>
        string(1) "2"
        ["alt_text"]=>
        string(1) "2"
    }
    [10]=>
    array(5) {
        ["prim_id"]=>
        string(2) "16"
        ["gallery_id"]=>
        string(1) "2"
        ["picture"]=>
        string(18) "010.jpg"
        ["order"]=>
        string(2) "10"
        ["alt_text"]=>
        string(2) "10"
    }
    [13]=>
    array(5) {
        ["prim_id"]=>
        string(2) "19"
        ["gallery_id"]=>
        string(1) "2"
        ["picture"]=>
        string(15) "013.jpg"
        ["order"]=>
        string(2) "13"
        ["alt_text"]=>
        string(2) "13"
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T09:27:47.577

继承人的东西。我可能错过了一些东西，因为我几乎是在飞行中写的，但它应该工作得很好。

```
function imgRemove()
    {
        $id = $this->input->post('galleryID');
        $imgPath = $this->imgPath($id);

        $this->db->where('gallery_id', $id);
        $result = $this->db-get('gallery');
        $tempArray = $result->result_array();

        // reindex $tempArray for more less processing next loop
        foreach($tempArray as $img)
            $images[$img['order']] = $img;

        foreach ($_POST['orderID'] as $order)
        {
            $removethese[] = $order;
            if( isset($images[$order]) ) {
                $unlinkthese[] = $imgPath . $images[$order]['picture'];
                $unlinkthese[] = $imgPath . 'thumbs/thumb' . $images[$order]['picture'];

            }
            // lets keep $images clear, it should contain only images that will exists after cleanup
            unset($images[$order]);

        }
        // now lets remove files
        foreach($unlinkthese as $unlink )
            unlink ($unlink);

        // and then remove them from database
        $this->db->query("DELETE * FROM gallery where order IN (" . implode(',',$removethese) . " AND gallery_id=$id";

        // now lets do some re-ordering. We want to use CIs update_batch to make complex IF WHEN query

        for( $i = 1; $i <= count($images); $i++ )
            $images['order'] = $i;

        $this->db->update_batch('gallery', $images, 'prim_id'); 

    } 
```

# php - yii 博客架构上的 memcache

> ID：12434682
> 
> 赞同：0
> 
> 时间：2012-09-15T05:05:53.053
> 
> 标签：php, architecture, yii, memcached, blogs

我最近在我的 php yii 网站上添加了一个博客，它是 yii 博客演示的大量修改版本。我的博客使用活动记录，不幸的是，它使用大约 20 次数据库调用来显示帖子。我想用 memcache 加快速度。我想在内存中缓存尽可能多的内容，以摆脱大量的数据库调用。我已经启用了模式缓存，它将调用次数减少到更像 12 或 13，但这仍然太多了。

在对我的博客进行负载测试时，我发现在重负载下我的 CPU 是限制因素。我还有很多内存。所以我希望使用一些额外的内存可以减少我的 cpu 的负载。这就是 memcache 的用武之地。问题是如何构建它。

我已经想出了如何缓存带有评论和标签的单个帖子，这并不是很困难。我正在努力解决的是如何缓存索引页面，每个页面都有许多帖子。第 1 页将有 5 个帖子，第 2 页将有 5 个帖子，等等。我正在像这样进行数据库调用：

```
 $criteria=new CDbCriteria(array(
                    'condition'=>'status='.Post::STATUS_PUBLISHED,
                    'order'=>'create_time DESC',
                    'with'=>'commentCount',
            ));
            if(!is_null($tag))
                    $criteria->addSearchCondition('tags', $tag);

            $dataProvider=new ActiveDataProvider('Post', array(
                    'pagination'=>array(
                            'pageVar'=>'page',
                            'pageSize'=>5,
                    ),
                    'criteria'=>$criteria,
            ));

            $this->render('index',array(
                    'dataProvider'=>$dataProvider,
            )); 
```

我原本以为我可以只缓存生成的 $dataProvider ，并将查询字符串作为键。我可以得到的东西：

```
echo http_build_query($criteria->toArray()); 
```

我必须将页码附加到该键，但这很容易。但是，这样做意味着我需要为每个页面和每个标签缓存一个单独的 dataProvider，如果我要更新标签或添加新帖子，这将是一场噩梦。

我相信你们中的一个聪明人可以给我一些建议。我不知道如何构建它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:40:13.413

在我看来，缓存整个页面或页面的片段是要走的路。

对于缓存整个页面（或动作），yii 提供了[`COutputCache`](http://www.yiiframework.com/doc/api/1.1/COutputCache). 对于片段缓存，有[`CController::beginCache()`](http://www.yiiframework.com/doc/api/1.1/CBaseController#beginCache)和[`CController::endCache()`](http://www.yiiframework.com/doc/api/1.1/CBaseController#endCache)。有关更多信息，请参阅[页面缓存](http://www.yiiframework.com/doc/guide/1.1/en/caching.page#output-caching)和[片段缓存的文档](http://www.yiiframework.com/doc/guide/1.1/en/caching.fragment)

**关于在内容更改时使缓存失效**

来自 yii 文档

> 除了过期设置，缓存数据也可能会根据一些依赖关系的变化而失效。例如，如果我们正在缓存某个文件的内容并且文件被更改，我们应该使缓存的副本无效并从文件而不是缓存中读取最新的内容。

依赖关系可以由实例[`CCacheDependency`](http://www.yiiframework.com/doc/api/1.1/CCacheDependency)或其子类指定。对于您的特定需要，您可以使用[`CDbCacheDependency`](http://www.yiiframework.com/doc/api/1.1/CDbCacheDependency)with sql like

```
SELECT `update_time` from post where `id`=:id 
```

用于缓存特定帖子条目的页面。

有关其他可用的依赖类，请参阅[文档](http://www.yiiframework.com/doc/guide/1.1/en/caching.data#cache-dependency)

# php - 组合 foreach 数组

> ID：12434685
> 
> 赞同：0
> 
> 时间：2012-09-15T05:06:56.057
> 
> 标签：php, html

我有 2 个数组，我想根据这些数组在我的表中自动创建新行。

我的数组看起来像这样：

```
$array1['name1'] = "value1";
$array1['name2'] = "value2";
$array1['nameN'] = "valueN";

$array2['name1'] = "number1";
$array2['name2'] = "number2";
$array2['nameN'] = "numberN"; 
```

我的 html 表格输出应如下所示：

```
<table>
    <tr>
        <td>name1</td>
        <td>value1</td>
        <td>number1</td>
    </tr>
    <tr>
        <td>name2</td>
        <td>value2</td>
        <td>number2</td>
    </tr>
    <tr>
        <td>nameN</td>
        <td>valueN</td>
        <td>numberN</td>
    </tr>
</table> 
```

我一直在研究这两个代码，但我不知道如何组合它们：

```
<?php
foreach ($array1 as $name => $value) {
    echo '<tr><td>'.$name.'</td><td>'.$value.'</td></tr>';
    };
unset($nick, $value);
?>

<?php
foreach ($array2 as $name => $value) {
    echo '<tr><td>'.$name.'</td><td>'.$value.'</td></tr>';
    };
unset($nick, $value);
?> 
```

也许我可以将两个数组组合成一个多维数组并使用某种 foreach 函数，如下所示：

```
$array = array();
$array['name1']['array1'] = "value1";
$array['name1']['array2'] = "number1";
$array['name2']['array1'] = "value2";
$array['name2']['array2'] = "number2";
$array['nameN']['array1'] = "valueN";
$array['nameN']['array2'] = "numberN"; 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T05:15:31.270

我假设两个数组都有相同的键。

```
foreach ($array1 as $name => $value) {
  echo '<tr><td>'.$name.'</td><td>'.$value.'</td><td>'.$array2[$name].'</td></tr>
} 
```

如果您使用二维数组而不是两个不同的数组，那会更直接。

# javascript - 主干模板：index.jst.eco 到 index.jst.ejs

> ID：12434689
> 
> 赞同：0
> 
> 时间：2012-09-15T05:07:47.327
> 
> 标签：javascript, backbone.js, erb, ejs, eco

具体问题：此代码在主干模板 index.jst.eco 中有效，但在 index.jst.ejs 中无效

```
<ui>

<% for entry in @entries.models: %>
<li> <%= entry.get('name') %></li>
<% end %>

</ui> 
```

我想知道为什么（即如何为 ejs 修复它），更一般地说，是否有关于如何在 ejs 模板中编写代码的综合文档？我找不到任何详细的内容。当我一直在玩 ejs 和 eco 时，我注意到存在或不存在 : 或括号会产生巨大的影响，但我不知道如何知道使用什么以及何时使用。

我愿意使用 jst.eco 或 jst.ejs，这取决于哪种语法有更好的文档。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-23T22:04:27.700

刚遇到这个问题，下面是我的解决方案！

```
<% entries.each(function(entry){%>
  <li><%= entry.get('name') %></li>
<% });%> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:34:01.350

这就是在 jst.ejs 中编写生态代码的方式。

```
 <% for (var i = 0; i < entries.length; i++) { %>
    <li> <%= entries.models[i].get('name') %></li>
    <% } %> 
```

但是，我无法让它与`for entry in entries.models`迭代器一起使用

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-11T08:38:45.443

据我所知，jst.eco 格式是嵌入到 jst 模板中的 CoffeeScript，而 jst.ejs 仅适用于 JavaScript。这就是为什么在你的情况下它可以呈现这个 JavaScript 迭代：

```
<% for (var i = 0; i < entries.length; i++) { %> 
```

但不是这个 CoffeeScript 交互：

```
<% for entry in @entries.models: %> 
```

# visual-studio - Visual Studio Express 2012 和 cmake

> ID：12434696
> 
> 赞同：4
> 
> 时间：2012-09-15T05:09:46.710
> 
> 标签：visual-studio, cmake, visual-studio-2012

我正在寻找一种方法来编译一些准备好通过 cmake 使用的库，问题是我想使用 VC++ express 2012（第一个允许 x64 开发的 express 版本）但是当我运行 cmake 时我不断得到这个：

```
CMake Error: CMake was unable to find a build program corresponding to "Visual Studio 11".  CMAKE_MAKE_PROGRAM is not set.  You probably need to select a different build tool.
CMake Error: Could not find cmake module file:C:/Users/Alexander Rojas/workspace/jthread-1.3.1/build/CMakeFiles/CMakeCCompiler.cmake
CMake Error: Could not find cmake module file:C:/Users/Alexander Rojas/workspace/jthread-1.3.1/build/CMakeFiles/CMakeCXXCompiler.cmake
Configuring incomplete, errors occurred! 
```

我发现这个路径是 devenv.exe 的路径，但是这个全新的 vc 没有这个程序。任何解决方法的想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T05:35:04.983

因此，在文件中，`CMakeVS11FindMake.cmake`我必须更改注册表项的所有引用

```
HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\VisualStudio\\11.0 
```

到关键

```
HKEY_CURRENT_USER\\Software\\Microsoft\\WDExpress\\11.0_Config 
```

（只需将它们添加为额外提示即可）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-19T06:37:58.780

任何已发布的 CMake (2.8.9) 版本目前都不支持 Visual Studio 2012 Express Edition。然而，CMake 开发人员今天刚刚[签入代码来解决这个问题](http://www.cmake.org/Bug/view.php?id=13348)。无论何时发布，该修复程序都应该在 CMake 2.8.10 中。

如果您真的需要它，您应该能够获取[每晚的 CMake 安装程序](http://www.cmake.org/files/dev/)，但您可能需要等待 20120919 安装程序发布，因为我不确定此修复程序是否已进入 20120918 安装程序。

（今天为了测试它，我从他们的[git 存储库](http://www.cmake.org/Wiki/CMake/Git)中检查了源代码，切换到分支“next”，配置了旧的 CMake，自己构建了一个新的 CMake，并确认它在 VS 2012 Express 中运行良好。）

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T05:31:01.630

我仍然需要将上面的 Sambatyon 修复应用到 CMakeVS11FindMake.cmake，并且我使用的是 CMake 2.8.10.2。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-06T08:23:35.810

其他解决方案不再起作用；使用最新的（截至写作时为桌面版 Express 2012），您可能需要修改：

```
C:\Program Files (x86)\CMake 2.8\share\cmake-2.8\Modules\CMakeVS12FindMake.cmake 
```

阅读类似的内容：

```
#=============================================================================
# Copyright 2007-2013 Kitware, Inc.
#
# Distributed under the OSI-approved BSD License (the "License");
# see accompanying file Copyright.txt for details.
#
# This software is distributed WITHOUT ANY WARRANTY; without even the
# implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.
# See the License for more information.
#=============================================================================
# (To distribute this file outside of CMake, substitute the full
#  License text for the above reference.)

# Always use MSBuild because:
# - devenv treats command-line builds as recently-loaded projects in the IDE
# - devenv does not appear to support non-standard platform toolsets
# If we need devenv for Intel Fortran in the future we should add
# a special case when Fortran is enabled.
find_program(CMAKE_MAKE_PROGRAM
  NAMES MSBuild
  HINTS "[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\MSBuild\\ToolsVersions\\4.0;MSBuildToolsPath]" <--- Change this line.
  )
message("Found: ${CMAKE_MAKE_PROGRAM}")

mark_as_advanced(CMAKE_MAKE_PROGRAM)
set(MSVC12 1)
set(MSVC_VERSION 1800) 
```

这适用于 cmake 2.8.11.2

编辑：特别注意这是关于 VS2012 捆绑包，而不是 VS2013 候选版本或 VS2013 的未来版本，其中正确的 ToolsVersions 是 \12.0

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-02-18T22:28:12.167

我的解决方法：为 2010 年生成，在 VS2012 中“重新加载所有”，然后在解决方案资源管理器中的解决方案上“更新 VC++ 项目”。

但是：我的安装包括活动的 VS 2010、过期的 VS 2012 试用版、活动的 VS 2012 Express。

# mysql - 重复行更改某些列？

> ID：12434700
> 
> 赞同：1
> 
> 时间：2012-09-15T05:10:25.540
> 
> 标签：mysql

我想将 ID = 1 的行复制到同一张表中的新行。但两列（UID 和日期）不能与原始行相同。

```
INSERT IGNORE INTO `Posts` (`A`,`B`,`UID`,`Date`) VALUES 
```

如何从 ID = 1 的行中获取所有值，但将 UID 更改为 2 并将日期更改为 NOW()？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:16:27.793

```
INSERT INTO `Posts` (`A`,`B`,`UID`,`Date`) 

SELECT col1, col2, `your definedvalue1`,`your defined date `,
 FROM this_table
WHERE 1>0(your condition); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:16:16.077

尝试：

```
INSERT IGNORE INTO `Posts` (`A`,`B`,`UID`,`Date`) 
select a, b, 2, now() from `Posts` where UID = 2; 
```

查看**[示例](http://sqlfiddle.com/#!2/f60d6/1)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T05:19:10.703

尝试

```
INSERT INTO Posts (`A`,`B`,`UID`,`Date`) 
SELECT `A`,`B`,`UID`,`Date` FROM Post
ON DUPLICATE KEY UPDATE UID =2 DATE =NOW() 
```

**注意：**在 UID 和日期列上建立索引

# php - php清除url中的额外参数

> ID：12434704
> 
> 赞同：0
> 
> 时间：2012-09-15T05:11:43.353
> 
> 标签：php

当我发布一个到 facebook 的链接`http://www.zzz.com/images.php?i=kwlhjv` 时，当 facebook 上的用户点击链接时，他们被定向到我发布的同一页面，但使用 facebook 添加到 url 的另一个参数 如何使用 php 删除这些获取参数？（我仍然想保留我的`i=kwlhjv`参数）facebook重定向网址的示例：

```
http://www.facebook.com/l.php?u=http%3A%2F%2Fwww.zzz.com%2Fimages.php%3Fi%3Dkwlhjv%26ref%3Dnf&h=TAQGrLLtbAQEG_HgubmSe57WD1q-uf0_kz_-2ADc6jr9xAw&s=1 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:19:30.147

```
foreach ($_GET as $key => $val) {
  if ($key != 'i') {
    unset($_GET[$key])
  }
} 
```

# java - 在 Max OS X 上探索 Java 应用程序

> ID：12434705
> 
> 赞同：0
> 
> 时间：2012-09-15T05:11:52.927
> 
> 标签：java, macos

我用 Java 创建了一个桌面客户端，并为 Max OS X 创建了它的应用程序。我在开始类和我们创建菜单的每个地方都设置了以下属性。

```
if (System.getProperty("os.name").toUpperCase().indexOf("MAC") != -1) {
            System.setProperty("apple.laf.useScreenMenuBar", "true");
            System.setProperty("com.apple.mrj.application.apple.menu.about.name", "My Project");
} 
```

但是在使用应用程序在 Mac OS X 上运行时，显示应用程序处于最大化状态，因为我使用 (+) 按钮单击最大化，然后最小化到托盘，然后单击应用程序进行探索，始终在右上角的小窗口中进行探索。如何解决这个问题。

我在菜单栏上有三个菜单，有时它只显示两个，最后一个消失了，如何解决它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:37:38.363

我在创建 Mac 应用程序方面没有真正的经验，但我已经创建了一些 GUI。在我看来，您没有调整属性大小。可能有一个设置，但老实说我不知道​​它可能是什么......我只是想我会尝试帮助，因为没有其他人还没有。

# css - 与 用文本作为标签而不是切换器的符号

> ID：12434706
> 
> 赞同：3
> 
> 时间：2012-09-15T05:12:00.420
> 
> 标签：css, jsf, jsf-2, primefaces, stylesheet

我正在使用*p:dataTable*和*p:rowToggler*，我想在文本中显示切换器而不是圆形符号。如何标记*p:rowToggler*

我正在尝试使用这种样式来显示 Text ***Process*** _ 但是如何与*p:rowToggler*绑定？

```
<style>
.toggler {
content: "Process";
}
</style> 
```

它是正确的实施方式吗？当我点击文本或链接时，就像 rowExpantion
请帮我解决这个问题

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-09-14T15:02:54.163

我正在使用 PF 6.1 和行切换器`expandLabel`，但`collapseLabel`不确定这些第一次可用的时间。

```
<p:rowToggler expandLabel="View History" collapseLabel="Hide History"/> 
```

CSS将是

```
.ui-datatable .ui-row-toggler {
    cursor: pointer;
    text-decoration: underline;
    color: blue;
} 
```

# php - php 图片弹出框

> ID：12434714
> 
> 赞同：2
> 
> 时间：2012-09-15T05:14:11.650
> 
> 标签：php, imagemagick, image-manipulation, php-gd

是否有任何带有 php 的好的脚本或库可以将图像制作成具有两种颜色白色和另一种颜色（如果不是多种颜色）的 popart。我在 GD 或 imagemagick 中找不到任何示例

# hibernate - Derby.jar 异常时甚至没有配置？

> ID：12434716
> 
> 赞同：1
> 
> 时间：2012-09-15T05:14:47.033
> 
> 标签：hibernate, jpa, derby

我有一个带有 JPA 的小型测试应用程序，Hibernate 坚持到 Oracle XE。这一切都很好。

但是，当类路径包含 derby.jar 时，我得到一个异常，尽管我没有专门在 derby 中调用任何东西......我知道。

显然，德比正在尝试加载。但是我没有调用任何 Derby 初始化，也没有为 JPA 配置 Derby。根据 Derby 文档，“在嵌入式环境中，加载驱动程序也会启动 Derby。”

但我对德比没有任何要求。我从 persistence.xml 中删除了 derby persistence-unit。然而，随着 derby.jar 留在路径上，它爆炸了。如果我从路径中删除 derby.jar，则为 Oracle 定义的持久性单元可以正常工作。

我在 Derby 文档或在线中没有发现任何相关内容。

```
Exception in thread "main" java.lang.NoClassDefFoundError: Could not initialize class org.apache.derby.jdbc.AutoloadedDriver40 
```

我在类路径上有 derby.jar 的原因是我试图用两个声明（Oracle 和 Derby）定义一个 persistence.xml，这样我就可以在一个测试工具中测试这两个数据库，以证明与即将推出的项目的兼容性在便携式机器上使用 Oracle 内部和 Derby。

持久性.XML

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0"
xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
<persistence-unit name="persistenceUnit">
    <provider>org.hibernate.ejb.HibernatePersistence</provider>
    <class>com.gdeb.swift.NIIN</class>
    <class>com.gdeb.swift.RIC</class>
    <exclude-unlisted-classes>true</exclude-unlisted-classes>
    <properties>
        <property name="javax.persistence.jdbc.driver" value="oracle.jdbc.driver.OracleDriver" />
        <property name="javax.persistence.jdbc.user" value="swift" />
        <property name="javax.persistence.jdbc.password" value="swift" />
        <property name="javax.persistence.jdbc.url" value="jdbc:oracle:thin:@localhost:1521:xe" />
        <property name="oracle.dialect" value="org.hibernate.dialect.Oracle10gDialect" />
        <property name="hibernate.max_fetch_depth" value="3" />
    </properties>
</persistence-unit>
</persistence> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T22:14:31.457

我也遇到了这个问题。问题是我的类路径中有一个旧的 derby.jar 在新的之前。我只需要删除旧的。

我编写了一个简单的程序来执行“Class.forName(org.apache.derby.jdbc.AutoloadedDriver40)”，但失败并出现“java.lang.SecurityException：密封违规”，这意味着它正在从同一个包中查找类安全管理器不允许的两个不同的 JAR（可能是较旧和较新的 derby.jar 文件）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:25:21.287

Derby JDBC 驱动程序的自动加载是由于称为“JDBC 驱动程序自动加载”的 JDBC 4.0 特性。请参阅[http://onjava.com/onjava/2006/08/02/jjdbc-4-enhancements-in-java-se-6.html](http://onjava.com/onjava/2006/08/02/jjdbc-4-enhancements-in-java-se-6.html)和[http://docs.oracle.com/javadb/10.6.1.0/ref /rrefjdbc4_0summary.html](http://docs.oracle.com/javadb/10.6.1.0/ref/rrefjdbc4_0summary.html)了解此功能的小文档。

这个想法是您不必执行“Class.forName()”来加载驱动程序并将其注册到 DriverManager；现在自动发生了。

但一般不会造成任何问题；我很惊讶你在这里遇到了一个例外。

异常的完整堆栈跟踪是什么？您可以将整个内容剪切并粘贴到这个问题中吗？

禁用 JDBC 驱动程序自动加载没有简单的方法；最好弄清楚为什么它在您的情况下不起作用，并进行调整以使自动加载不会引发异常。

# ios - MPMoviePlayer 停止响应触摸

> ID：12434717
> 
> 赞同：0
> 
> 时间：2012-09-15T05:14:52.770
> 
> 标签：ios, touch, mpmovieplayer

我有一个在根目录下带有标签栏控制器的应用程序。“主视图”是 OpenGL 中的 3D 渲染屏幕。您可以单击某些需要显示视频的 3D 对象。视频应该是全屏并淡入淡出。

为此，我让 HomeViewController 创建了一个 MPMoviePlayerViewController，为其分配了一个 URL，然后从选项卡栏控制器呈现它。（我会从 HomeViewController 中展示它，但由于某种原因它没有正确改变它的方向——我确信它与所有自定义 3D 的东西有关，而且我没有对其进行编程，所以我只是做了一个通过从高级视图显示它来解决问题。）

（请注意，我以模态方式呈现 MPMoviePlayerViewController（不使用内置的 presentModalMovieViewController 或其他），因为 Apple 强制转换为古怪的屏幕移位，我想要溶解。）

现在，效果很好。模态窗口消失，视频播放。您可以播放和暂停它，快进，点击“完成”，模态窗口就会消失。瞧。

现在，出现了一个完全奇怪的错误：如果您不点击视频播放器并让控件淡出（就像它们在一两秒后所做的那样），用户无法通过点击将它们带回来。似乎视频控制器在淡出之后停止响应用户输入。同样，在它们消失之前它工作得很好。但在那之后，我必须等待视频播放完（实际上，模态窗口确实会消失）。

作为参考，这里是模态视频播放器的相关代码：

```
-(void) startVideoWithURL:(NSURL *)videoURL {

    if (!self.outsideMoviePlayerViewController) {
        self.outsideMoviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:nil];
    }

    if (videoURL) {

        [self stopAnimation];

        self.outsideMoviePlayerViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        self.outsideMoviePlayerViewController.moviePlayer.contentURL = videoURL;

        [[[AppController instance] getCustomTabBarViewController] presentModalViewController:self.outsideMoviePlayerViewController animated:YES];

        // Move observation of the dismiss from the MoviePlayerViewController to self.
        [[NSNotificationCenter defaultCenter] removeObserver:self.outsideMoviePlayerViewController
                                                        name:MPMoviePlayerPlaybackDidFinishNotification
                                                      object:self.outsideMoviePlayerViewController.moviePlayer];
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(movieFinishedCallback:)
                                                     name:MPMoviePlayerPlaybackDidFinishNotification
                                                   object:self.outsideMoviePlayerViewController.moviePlayer];

    }

}

-(void) movieFinishedCallback:(NSNotification *)aNotification {

    // Summary: Restart 3D animation, unregister from notifications, kill the modal video.

    [self startAnimation];

    MPMoviePlayerController *moviePlayer = [aNotification object];
    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:moviePlayer];

    [[[AppController instance] getCustomTabBarViewController] dismissModalViewControllerAnimated:YES];

} 
```

对于此类问题，我能找到的唯一其他参考资料是 Apple 支持社区上的一些存档帖子，此处为：

[https://discussions.apple.com/thread/2141156?start=0&tstart=0](https://discussions.apple.com/thread/2141156?start=0&tstart=0)

在此线程中，问题发布者自己解决了问题，并声明问题已解决。这是他的解释：

> CFRunLoopRunInMode(kCFRunLoopDefaultMode, 0, TRUE) 时会出现问题。在我更改为 CFRunLoopRunInMode(kCFRunLoopDefaultMode, 0.002, TRUE) 后，播放控件可以通过点击屏幕出现/消失。

不幸的是，我不是在编写游戏，我的开发团队中没有人在代码中的任何地方调用 CFRunLoopRunInMode。我发现最接近这一点的是动画代码（在同一个 ViewController 中）：

```
- (void)startAnimation
{
    if (!animating)
    {
        NSLog(@"startAnimation called");
        CADisplayLink *aDisplayLink = [[UIScreen mainScreen] displayLinkWithTarget:self selector:@selector(drawFrame)];
        [aDisplayLink setFrameInterval:animationFrameInterval];
        [aDisplayLink addToRunLoop:[NSRunLoop currentRunLoop] forMode:NSDefaultRunLoopMode];
        self.displayLink = aDisplayLink;

        animating = TRUE;
    }
} 
```

如果有人对可能导致这种情况的原因有任何见解，我将不胜感激。我认为，至少，即使我今晚自己解决了这个问题，这个问题也可能会出现在 Stack Overflow 上并被存档以供后代使用。

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T01:31:08.743

我弄清楚是什么导致了这个问题。

我注意到第一个视频确实播放了，而后面的视频没有。我移动了这段代码：

```
if (!self.outsideMoviePlayerViewController) {
        self.outsideMoviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:nil];
} 
```

这样，outsideMoviePlayerViewController 的创建就在下一个块内，如下所示：

```
if (videoURL) {

        self.outsideMoviePlayerViewController = [[MPMoviePlayerViewController alloc] initWithContentURL:nil];

        [self stopAnimation];

        self.outsideMoviePlayerViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;
        self.outsideMoviePlayerViewController.moviePlayer.contentURL = videoURL; 
```

现在，每次播放视频时都会创建一个新控制器，而不是回收控制器。虫子消失了。我不是 100% 确定为什么会发生这种情况，因为当您显示模态视图控制器时会发生各种各样的事情。

底线可能是我应该首先将其作为延迟加载范例的一部分，而不是试图将控制器保留在内存中。

# bash - 如何用不同的符号替换符号的第一次、中间和最后一次出现？

> ID：12434718
> 
> 赞同：0
> 
> 时间：2012-09-15T05:15:01.727
> 
> 标签：bash, grep

我有一个`/`每行包含许多 's 的文件，例如：

```
This/is/an/example.
This/is/another/example/to/read.
Read/this/example.
Last/example. 
```

我需要用 替换每行上第一次出现的 ，用 替换`/`每行上`\BEGIN`最后一次出现的，以及用`/`替换`\END`所有剩余的。例如，上面的文件会变成这样：`/``\MIDDLE`

```
This\BEGINis\MIDDLEan\ENDexample.
This\BEGINis\MIDDLEanother\MIDDLEexample\MIDDLEto\ENDread.
Read\BEGINthis\ENDexample.
Last\BEGINexample. 
```

如何使用 BASH 或 Linux 上可用的其他工具以这种方式替换此符号，例如`grep`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T06:36:28.897

我会使用`sed`（你需要`sed -E`mac OSX 上的扩展正则表达式）：

```
sed -E 's/\//\\BEGIN/; s/\/([^/]+$)/\\END\1/; s/\//\\MIDDLE/g' 
```

它之所以有效，是因为第一个`s`命令没有`g`（全局）标志，所以只有第一次出现的`/`被替换。第二个`s`用 替换最后一次出现`$`，最后最后一次替换替换所有剩余的正斜杠。替换的顺序很重要：如果有一个正斜杠你得到`//BEGIN`，如果有另一个你得到`//END`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T05:29:24.587

您可以尝试 grepping ^([a-zA-Z]+)[](.*)[]([a-zA-Z]+)$ 并将其替换为 $1 /BEGIN $2 /END $3

然后 grep 为所有 \ 并用 /MIDDLE 复制它们

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T16:11:47.137

```
while IFS=/ read -a f; do (
    set -- "${f[@]}"
                    printf "$1"                       && shift
    (( $# ))     && printf "\\BEGIN$1"                && shift
    (( $# > 1 )) && printf "\\MIDDLE%s" "${@:1:$#-1}" && shift $(( $#-1 ))
    (( $# ))     && printf "\\\\END$1"
                    printf "\n"
    )
done < input.txt 
```

一次读取一行输入，在 / 字符上分割每一行并将结果存储在子shell的位置参数中。第一个字段（我们假设存在）被无条件打印，并且每个剩余字段都打印在正确的分隔符之前。终止换行符无条件打印。

（我不完全确定为什么 END 需要双双反斜杠。没有它，我只打印了 END 的 D。）

# c - 如何测试我的应用程序是否兼容 UNICODE？

> ID：12434722
> 
> 赞同：4
> 
> 时间：2012-09-15T05:15:32.223
> 
> 标签：c, windows, winapi, unicode

如果这是一个愚蠢的问题，我深表歉意。我最近用 C 和 WinApi 在 Windows 中开发了一个应用程序。我需要检查应用程序是否兼容 UNICODE。如何测试我的机器？是否有任何程序检查 UNICODE 兼容性。此外，我没有中文机器或任何其他语言。我希望在我的机器上完成这个测试，语言默认是英语。

如果可能，请提供一些链接或详细的程序。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T12:27:19.090

好问题。在 Windows 平台上，这确实具有挑战性，因为支持许多不同的编码和代码页，并且可以在它们之间混合使用。

我通常做的是在混合了两种非 ASCII 语言的输入上测试应用程序，例如混合了俄语和希伯来语字母的文件名，并查看应用程序是否能够打开此文件等。你可以复制这个：`"שלום привет hello"`看看它是如何处理这种输入的。

因为我们这里有两种语言，不可能用一个ANSI codepage来支持，所以不会出现这种最常见的bug。

# wpf - WPF 中从旧值到新值的平滑过渡

> ID：12434725
> 
> 赞同：0
> 
> 时间：2012-09-15T05:15:50.977
> 
> 标签：wpf, properties, transform, transition, smooth

在窗口中是一个具有一定大小的矩形，我需要为矩形设置一个新的大小，逐渐将其旧大小更改为新大小。或者，例如，必须转动平滑的矩形。怎么做？

**编辑**

我想我表达得不好。例如，我有一个尺寸为 200 x 300 的矩形。我正在尝试使用新尺寸：400 x 200，我希望他没有快速应用新的平滑动画命中目标值。

**我想这在 WPF 中是如何完成的？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-07-02T18:01:40.213

老问题，但我有同样的问题并找到了解决方案。

我认为不可能用 xaml 做到这一点，只能在代码中。

```
using System.Windows.Media.Animation; // this is needed for use DoubleAnimation in code

...

private void ResizeRectangle(double width, double height)
{
    // Height
    DoubleAnimation a = new DoubleAnimation();
    a.From = MyRectangle.ActualHeight; // animation start with actual height
    a.To = height; // desired height
    a.Duration = new Duration(TimeSpan.FromSeconds(1)); // duration for From to To (you can use miliseconds), this make smooth transition from the old to the new values
    a.FillBehavior = FillBehavior.Stop; // FillBehavior should be stop, if you want do another size changes
    MyRectangle.BeginAnimation(Rectangle.HeightProperty, a);  // set up animation for MyRectangle

    MyRectangle.Height = height; // don't forget change size for rectangle, because FillBehavior.Stop stop animation and it set back to actual size

    // Width
    DoubleAnimation b = new DoubleAnimation();
    b.From = MyRectangle.ActualWidth;
    b.To = width;
    b.Duration = new Duration(TimeSpan.FromSeconds(1));
    b.FillBehavior = FillBehavior.Stop;
    MyRectangle.BeginAnimation(Rectangle.WidthProperty, b);

    MyRectangle.Width = width;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T14:01:46.987

不知道转动平滑的矩形是什么意思。

故事板。此示例甚至显示了调整矩形的大小

[故事板概述](http://msdn.microsoft.com/en-us/library/ms742868.aspx)

```
 <StackPanel Margin="20">
            <Rectangle Name="MyRectangle"
      Width="100"
      Height="100">
                <Rectangle.Fill>
                    <SolidColorBrush x:Name="MySolidColorBrush" Color="Blue" />
                </Rectangle.Fill>
                <Rectangle.Triggers>
                    <EventTrigger RoutedEvent="Rectangle.MouseEnter">
                        <BeginStoryboard>
                            <Storyboard>
                                <DoubleAnimation 
                Storyboard.TargetName="MyRectangle"
                Storyboard.TargetProperty="Width"
                From="100" To="200" Duration="0:0:1" />

                                <ColorAnimation 
                Storyboard.TargetName="MySolidColorBrush"
                Storyboard.TargetProperty="Color"
                From="Blue" To="Red" Duration="0:0:1" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Rectangle.Triggers>
            </Rectangle>
        </StackPanel> 
```

# ruby-on-rails - 如何在 Rails + Swig 中使用 C 库？

> ID：12434728
> 
> 赞同：1
> 
> 时间：2012-09-15T05:16:32.163
> 
> 标签：ruby-on-rails, c, ruby, swig, spotify

到目前为止，我已经编写了 2 个 rails 应用程序，这些应用程序肯定让我对 ruby​​ + rails 感到非常满意。不过，我不能对 C 说同样的话。老实说，每次我看 C 时，我什至都不知道自己在看什么。它看起来像通心粉。

我正在尝试构建一个 Spotify 网络应用程序。Web API 很烂，所以我必须使用它：[https ://developer.spotify.com/technologies/libspotify/](https://developer.spotify.com/technologies/libspotify/)

文档：[https ://developer.spotify.com/technologies/libspotify/docs/12.1.45/](https://developer.spotify.com/technologies/libspotify/docs/12.1.45/)

有人告诉我，我可以将 SWIG 视为与 Rails 通信的包装器。

我要获取的数据是 3 件事：订阅者数量、播放列表缩略图、曲目数量...给定播放列表 URL，格式为：`http://open.spotify.com/user/{{username}}/playlist/{{playlist_id}}`

老实说，我什至不知道从哪里开始。我在网上找不到任何 swig 教程，而且盯着这个文档也无济于事。

有人可以给我一个非常简短的 1,2,3 步骤过程，一个人可能会经历这样的事情吗？我真的不期望任何代码..但是..这是我到目前为止所理解的非常粗略的内容..也许有人可以帮我填写这个..

1.  将所有需要的 C 文件保存到 rails lib 目录
2.  用 ... 编译文件？
3.  以某种方式使用 swig
4.  :|

任何帮助将不胜感激。我意识到这是模糊和“主观的”，但我什至不知道如何客观地问这个问题。只是一个快速的 1-2-3-4-5 让我开始，所以我可以做一些谷歌搜索会很棒。

编辑：我确实找到了这个，但这似乎已经过时了：[https ://github.com/sarnesjo/greenstripes](https://github.com/sarnesjo/greenstripes)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:41:29.590

好吧，这当然不是答案，只是想在这里收集一些相关链接。

*   [http://www.eqqon.com/index.php/Ruby_C_Extension_API_Documentation_(Ruby_1.8](http://www.eqqon.com/index.php/Ruby_C_Extension_API_Documentation_(Ruby_1.8) )
*   [http://java.ociweb.com/mark/programming/Ruby_C_Extensions.pdf](http://java.ociweb.com/mark/programming/Ruby_C_Extensions.pdf)
*   [http://people.apache.org/~rooneg/talks/ruby-extensions/ruby-extensions.html](http://people.apache.org/~rooneg/talks/ruby-extensions/ruby-extensions.html)

让我们知道任何更新。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:25:29.193

经过一番挖掘，我发现了这个。我认为这是我的 ruby​​ libspotify 包装器的答案：[https ://github.com/Burgestrand/Hallon](https://github.com/Burgestrand/Hallon)

# android - 通知音未播放

> ID：12434733
> 
> 赞同：4
> 
> 时间：2012-09-15T05:16:48.450
> 
> 标签：android

我知道这个问题已经被问过很多次了，但我仍然在让它工作时遇到问题。

在我的应用程序中，我创建了一个通知来提示用户某些事件，并且我想播放已打包为应​​用程序中的原始资源的声音。

我创建我的通知实例：

```
Notification notification = new Notification(
        R.drawable.some_image,
        "some meaningful name",
        System.currentTimeMillis() );

notification.setLatestEventInfo(...) 
```

然后在该通知上设置一些属性：

```
notification.sound = Uri.parse( "android.resource://com.my.package/" + R.raw.some_mp3_file );
notification.flags = Notification.FLAG_INSISTENT; 
```

最后我调用 NotificationManager 来显示通知：

```
notificationManager.notify( 1, notification ); 
```

通知确实出现了，但声音没有播放。

难道我做错了什么？我缺少 <uses-permission> 吗？我看不出我所做的任何事情与其他任何人似乎已经让它发挥作用的不同之处。

对于它的价值，我直接在 Nexus 7 上进行测试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:55:13.087

尝试查看下面的代码。可以帮助您解决问题。

```
String ns = Context.NOTIFICATION_SERVICE;
        NotificationManager notificationManager = (NotificationManager) getSystemService(ns);
        int icon = R.drawable.update;
        CharSequence tickerText = "assignments";
        long when = System.currentTimeMillis();

        Notification assignmentNotification = new Notification(icon, tickerText, when);
       **For sound** assignmentNotification.defaults |= Notification.DEFAULT_SOUND;
        long[] vibrate = {0,100,200,300};
       **For vibrate** assignmentNotification.vibrate = vibrate;
        Context context = getApplicationContext();
        CharSequence contentTitle = "check assignments";
        CharSequence contentText = "chek ur app for assignments ";
        Intent notificationIntent = new Intent(context, ViewAssignmentnotificationActivity.class);
        PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent,0);
        assignmentNotification.setLatestEventInfo(context, contentTitle, contentText, contentIntent);
       ** final int id = 2; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:48:14.677

请看[这个答案](https://stackoverflow.com/questions/1770772/how-to-change-notification-sound-by-code-in-android)；它告诉您必须明确指定 notification.sound 才能播放该音调；

# java - Java：下载网址中带有特殊字符的网页内容

> ID：12434736
> 
> 赞同：0
> 
> 时间：2012-09-15T05:17:04.470
> 
> 标签：java, download

我正在下载网页内容，但地址有特殊字符。例如，它包含`adiós`. `myUrl`我正在使用下面的代码，但它不成功。你有什么建议吗？谢谢

```
String myUrl="http://www.somethingxxxxx.com/adiós";   
URLConnection yc = new URL(myUrl).openConnection();
BufferedReader in = new BufferedReader(new InputStreamReader(
                                                yc.getInputStream())); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T05:20:24.467

使用[URLEncoder](http://docs.oracle.com/javase/1.5.0/docs/api/java/net/URLEncoder.html)类而不是 java.netURL

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T05:41:25.650

您只需要在使用 URL 之前对其进行编码。为此，您可以尝试以下操作：

```
try {
    String base = "http://www.somethingxxxxx.com/";
    String toEncode = "adiós";
    String myEncodedUrl = base + URLEncoder.encode( toEncode, "UTF-8" );
    URLConnection yc = new URL(myEncodedUrl).openConnection();
    BufferedReader in = new BufferedReader(new InputStreamReader(
                                            yc.getInputStream()));
} catch ( UnsupportedEncodingException exc ) {
   exc.printStackTrace();
} catch ( IOException exc ) {
   exc.printStackTrace();
} 
```

# multithreading - 当更改总是在临时子上下文中完成时撤消核心数据中的更改

> ID：12434739
> 
> 赞同：3
> 
> 时间：2012-09-15T05:18:12.957
> 
> 标签：multithreading, cocoa, core-data, nsmanagedobjectcontext, nsundomanager

我的 Mac 应用程序设置为始终在主线程之外对其模型进行更改，如下所示：

1.  在单独的线程中进行更改（具有自己的上下文）
2.  在后台保存，它将更改推送到主线程中的父上下文
3.  发布通知以触发 UI 更新
4.  线程退出

这很好用，但现在我想为我所做的更改启用撤消。我该怎么做？我只看到两个同样糟糕的选择：

1.  我保留子上下文，因此保留它的撤消管理器，以防用户想要撤消。这将限制我可以进行的撤消次数，因为为了撤消而手动保留一堆上下文似乎很奇怪。
2.  或者，我可以将子上下文的撤消管理器设置为父上下文的撤消管理器吗？这样应用程序中将始终只有一个撤消管理器。这听起来也是错误的，因为托管对象不应该在不同的线程之间共享。

有没有人有任何想法？

谢谢。

# java - 如何为 java.awt.Frame 进行键绑定？

> ID：12434740
> 
> 赞同：3
> 
> 时间：2012-09-15T05:18:41.733
> 
> 标签：java, swing, jframe, key-bindings, keylistener

### 背景

我的窗口是 java.awt.Frame，Frame 内部是两个面板 (java.awt.Panel)。我正在努力让窗口处理我按下的按钮。

### 尝试 1 号

我尝试使用 KeyListener，使 Frame 实现 KeyListener。我将 KeyListener 添加到 Frame 中，但是当我按下键时 KeyListener 函数没有做任何事情。（我尝试使用 System.out.println() 进行打印。）

### 试试 2 号

我尝试遵循本教程：[http](http://tips4java.wordpress.com/2008/10/10/key-bindings/) ://tips4java.wordpress.com/2008/10/10/key-bindings/ 。这是我尝试处理按空格键的操作：

```
public void registerActions(){                                  //01
  Action myAction = new AbstractAction(){                       //02
    @Override                                                   //03
    public void actionPerformed(ActionEvent e) {                //04
      System.out.println("GREAT SUCCESS!");                     //05
    }                                                           //06
  };                                                            //07
  KeyStroke key = KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0); //08
  component.getInputMap().put(key, "myAction");                 //09
  component.getActionMap().put("myAction", myAction);           //10
}                                                               //11 
```

主要问题是我不知道第 09 行和第 10 行中的“组件”应该是什么，因为我的应用程序没有任何 JComponents。

### 我的问题

有没有办法在不使用摆动组件的情况下做到这一点？还是有另一种处理按键的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T06:01:17.220

我发现我可以使用 AWTEventListener 来做到这一点。

```
public class MyFrame extends Frame implements AWTEventListener {

  ...

  public MyFrame(String title){
    super(title);
    ...
    this.getToolkit().addAWTEventListener(this, AWTEvent.KEY_EVENT_MASK);
  }

  @Override
  public void eventDispatched(AWTEvent event) {
    if(event instanceof KeyEvent){
      KeyEvent key = (KeyEvent)event;
      if(key.getID()==KeyEvent.KEY_PRESSED){ //Handle key presses
        System.out.println(key.getKeyChar());
        //TODO: do something with the key press
        key.consume();
      }
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-16T23:53:55.427

好的，这是一个使用`JPanel`.

我创建了一个`Frame`，设置它的布局`BorderLayout`添加到`KeyPane`它，瞧...

```
public class KeyPane extends JPanel {

    private Timer paintTimer;
    private MouseFocusHandler mouseFocusHandler;

    private boolean spaceOn = false;
    private int yPos = 0;
    private int direction = 2;

    private Rectangle blob = new Rectangle(0, 0, 10, 10);

    public KeyPane() {

        setFocusable(true);

        InputMap im = getInputMap(WHEN_FOCUSED);
        ActionMap am = getActionMap();

        im.put(KeyStroke.getKeyStroke(KeyEvent.VK_SPACE, 0), "Space");
        am.put("Space", new SpaceAction());

        setPreferredSize(new Dimension(100, 100));

        getPaintTimer().setCoalesce(false);
        getPaintTimer().start();

    }

    @Override
    public void addNotify() {
        super.addNotify();
        requestFocusInWindow();
        addMouseListener(getMouseFocusHandler());
        getPaintTimer().start();
    }

    @Override
    public void removeNotify() {
        removeMouseListener(getMouseFocusHandler());
        getPaintTimer().stop();
        super.removeNotify();
    }

    protected Timer getPaintTimer() {
        if (paintTimer == null) {
            paintTimer = new Timer(40, new RepaintAction());
            paintTimer.setRepeats(true);
            paintTimer.setCoalesce(true);
        }
        return paintTimer;
    }

    protected MouseFocusHandler getMouseFocusHandler() {
        if (mouseFocusHandler == null) {
            mouseFocusHandler = new MouseFocusHandler();
        }
        return mouseFocusHandler;
    }

    @Override
    protected void paintComponent(Graphics g) {

        super.paintComponent(g);
        Graphics2D g2d = (Graphics2D) g.create();

        int width = getWidth() - 1;
        int height = getHeight() - 1;

        g2d.setColor(Color.GREEN);

        blob.x = (width - blob.width) / 2;

        System.out.println(blob);
        g2d.fill(blob);

        if (spaceOn) {
            g2d.setFont(UIManager.getFont("Label.font").deriveFont(24f));
            FontMetrics fm = g2d.getFontMetrics();

            String spaceIsOn = "Space On";

            int x = (width - fm.stringWidth(spaceIsOn)) / 2;
            int y = ((height - fm.getHeight()) / 2) + fm.getAscent();

            g2d.drawString(spaceIsOn, x, y);
        }

        g2d.dispose();

    }

    protected class MouseFocusHandler extends MouseAdapter {

        @Override
        public void mouseClicked(MouseEvent e) {
            requestFocusInWindow();
        }

    }

    protected class RepaintAction implements ActionListener {

        @Override
        public void actionPerformed(ActionEvent e) {
            yPos += direction;
            blob.y = yPos;

            if (blob.y + blob.height > getHeight() - 1) {
                blob.y = getHeight() - 1 - blob.height;
                direction = -2;
            } else if (blob.y < 0) {
                blob.y = 0;
                direction = 2;
            }
            repaint();
        }

    }

    protected class SpaceAction extends AbstractAction {

        @Override
        public void actionPerformed(ActionEvent e) {
            spaceOn = !spaceOn;
            repaint();
        }

    }

} 
```

# android - 在 Android 2.x libgdx 中处理 OpenGL 上下文恢复？

> ID：12434749
> 
> 赞同：0
> 
> 时间：2012-09-15T05:20:25.420
> 
> 标签：android, opengl-es, libgdx

我在某处读到 OpenGL 上下文可以由 libgdx 框架自动恢复。就我而言，真手机 4.0.3 一切正常。但是当我用 Android 2.x 进行测试时，它不能很好地工作，只是给我一个空白：（（。我可以将 OpenGL 上下文恢复到 libgdx 是不是真的？你能分享一下你的经验吗？ ? 或者 libgdx 不能与低于 4.x 的 Android 版本一起工作？（我使用 Opengl 1.0）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T07:01:44.767

请参阅[http://www.badlogicgames.com/wordpress/?p=1073](http://www.badlogicgames.com/wordpress/?p=1073)。这篇文章是从 2010 年开始的，所以它谈到了一些现在流行的未来特性（TextureAtlas 和 TextureRegion），文章的重点是关于动态生成的纹理如何不能由 libGDX 自动管理，但它隐含地描述了纹理管理问题，以及如何在某些情况下使用 libGDX 来解决它（基本上 libGDX 需要知道如何/从哪里重新加载纹理）。

libGDX 应该可以在 Android 2.x 或 4.x 上正常工作。

您确定在 4.x 和 2.x Android 案例中都存在底层进程吗？只有当 Activity 退出并且应用程序保持活动状态直到 Activity 重新启动时，才会出现纹理丢失问题。如果应用程序退出，一切都会重新初始化。

# c# - 在c#中，如何在变量中分配一个sql查询结果？

> ID：12434760
> 
> 赞同：1
> 
> 时间：2012-09-15T05:22:55.590
> 
> 标签：c#, sql, insert, subquery

```
 SqlConnection connection = new SqlConnection(connString.ToString());
    string select = "SELECT (CASE WHEN MAX(page_no) IS NULL  THEN 1 ELSE MAX(page_no)+1 END) FROM dbo.BOOK";
    string insert = "INSERT INTO dbo.BOOK (book_id,select) VALUES (121,4)";
    SqlCommand sqlCommand = new SqlCommand(insert,connection);
    insert.ExecuteNonQuery(); 
```

在这里，我遇到了插入包含无效字符串选择的异常。请告诉我如何在插入中分配子查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:25:37.243

你做错了，你必须对`SQLCommand`对象而不是字符串对象执行查询试试这个

```
using(SqlConnection connection = new SqlConnection(connString.ToString())){
string insert = "Insert Query";
using (SqlCommand sqlCommand = new SqlCommand(insert,connection))
{
 con.Open();
 int i = sqlCommand.ExecuteNonQuery();
}
} 
```

## 更新：

```
 var selectQuery = "SELECT (CASE WHEN MAX(page_no) IS NULL THEN 1 ELSE MAX(page_no)+1 END) FROM dbo.BOOK";
 var insertQuery = string.format("INSERT INTO dbo.BOOK (book_id,{0}) VALUES (121,4)",selectQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T05:37:20.623

您的查询结果将返回一个`DataTable`. 所以用 a`DatAdapter`来填充 a `DataTable`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T05:39:45.580

如果要使用子查询，则不能使用这样的选择语句，它必须在单个语句中

但是在上面的语句中，您编写了不同的选择和插入查询语句。

所以`cmd.ExecuteNonquery()`只执行`insert`文本语句，所以 SQL 引擎无法找到`SELECT`（并且 SELECT 是保留关键字）所以它会给你一个错误

如果你使用子查询试试这个

```
SqlConnection connection = new SqlConnection(connString.ToString());

string select = "SELECT 121, (CASE WHEN MAX(page_no) IS NULL  THEN 1 ELSE MAX(page_no)+1 END) FROM dbo.BOOK";
string insert = "INSERT INTO dbo.BOOK (book_id,[select]) "+select;

SqlCommand sqlCommand = new SqlCommand(insert,connection); 
```

sqlCommand.ExecuteNonQuery();

# android - Android ImageView 在 GingerBread 下面的 FrameLayout 内不匹配_parent

> ID：12434762
> 
> 赞同：8
> 
> 时间：2012-09-15T05:23:26.013
> 
> 标签：android, android-layout, android-fragments, android-imageview, android-listfragment

我正在尝试为聊天室建立一个对话泡泡。每个对话气泡都有附加的 xml 布局。 

我通过将**textView**设置为**wrap_content**，将语音气泡**imageView**设置为**match_parent**并将**frame_layout**设置为**wrap_content**来实现这一点。这样文本后面的 speech_bubble 图像会 **根据气泡中的文本量进行缩放**。 

我将 textView 上的宽度设置为与父级匹配，将高度设置为 wrap_content，由于某种原因，它在**Ice Cream Sandwich** (Android 4.1)中**完美地工作。**然而，在**Gingerbread**中，内部 imageView 语音气泡**不会缩放到 match_parent**，因此文本可以整齐地放入气泡内。在 Gingerbread 中，内部的 imageView**始终保持相同的大小**，而不管文本和**文本溢出气泡外**。即使**frameLayout**扩展为**wrap_content**，**imageView**也不会像预期的那样**match_parent**。 

 ******关于为什么会发生这种情况的任何想法？我可以通过 xml 设置另一个参数还是可以以编程方式调用来解决此问题的方法？ 

谢谢！

ICS 中的正确行为：

[ICS 中的正确行为](https://i.stack.imgur.com/71vJn.png)

GingerBread 中的 [错误行为：GingerBread 中的错误行为](https://i.stack.imgur.com/wmSP2.jpg)

XML 布局：

```
<merge xmlns:android="http://schemas.android.com/apk/res/android">
        <FrameLayout
            xmlns:android="http://schemas.android.com/apk/res/android"
            android:id="@+id/speech_bubble_framelayout"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:orientation="horizontal"
            android:background="@color/color_transparent"
            android:layout_toRightOf="@id/message_user_imageView">

        <ImageView xmlns:android="http://schemas.android.com/apk/res/android"
                   android:id="@+id/message_background_imageview"
                   android:layout_width="match_parent"
                   android:layout_height="match_parent"
                   android:layout_margin="5dp"
                   android:scaleType="fitXY"
                   android:layout_centerInParent="true"
                   android:textColor="@color/color_brown_mud"
                   android:background="@drawable/chat_bubble_flipped"
                />
        <TextView
                android:id="@+id/message_textView"
                android:layout_width="wrap_content"
                android:layout_height="match_parent"
                android:maxEms="10"
                android:background="@color/color_transparent"
                android:textColor="@color/color_brown_uiDesign_pallete"
                android:textSize="15sp"
                android:textStyle="bold"
                android:gravity="center_horizontal"
                android:text="Message"
                android:padding="5dp"
                android:layout_marginLeft="25dp"
                android:layout_marginRight="20dp"
                android:layout_marginTop="15dp"
                android:layout_marginBottom="15dp"
                />
    </FrameLayout>
</merge> 
```

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-15T05:34:08.823

从外观上看，这是由大小的循环依赖引起的：内部文本和图像大小取决于 FrameLayout ( `match_parent`)，而 FrameLayout 的大小取决于其中包含的内容 ( `wrap_content`)。如果正是出于这种原因涉及多个孩子，则不鼓励使用 FrameLayout。为了安全起见，我建议将 更改`FrameLayout`为 a `RelativeLayout`，并在内部图像视图上设置以下属性：

```
android:layout_alignTop="@+id/message_textview"
android:layout_alignBottom="@+id/message_textview" 
```

这将确保您的图像始终与文本的大小相匹配。******

# c# - 无论设备时区如何，获取特定时区的 DateTime.Now？

> ID：12434766
> 
> 赞同：15
> 
> 时间：2012-09-15T05:25:04.140
> 
> 标签：c#, .net, mono, xamarin.ios

我有 MonoTouch 应用程序，它处理来自网络服务的数据。此数据包含特定于时区的日期信息。时区是 UTC +12，适用于新西兰。

我的应用程序根据当前时间显示此数据。这样做的问题是，当应用程序在不同的 TimeZones 中使用时，数据无法正确显示，因为设备上的当前时间不正确。

无论设备上的语言环境/时区设置如何，如何获取 UTC +12 的当前日期时间？

编辑：

我根据以下答案尝试了以下代码：

```
TimeZoneInfo.ConvertTime (DateTime.Now, TimeZoneInfo.FindSystemTimeZoneById("Pacific/Auckland")); 
```

此代码在我的计算机上运行良好，但是当我在 MonoTouch 中运行它时，出现以下异常：

```
System.ArgumentException: Kind propery of dateTime is Local but the sourceTimeZone does not equal TimeZoneInfo.Local
   at System.TimeZoneInfo.ConvertTime (DateTime dateTime, System.TimeZoneInfo sourceTimeZone, System.TimeZoneInfo destinationTimeZone) [0x00018] in /Developer/MonoTouch/Source/mono/mcs/class/System.Core/System/TimeZoneInfo.cs:179
   at System.TimeZoneInfo.ConvertTime (DateTime dateTime, System.TimeZoneInfo destinationTimeZone) [0x00000] in /Developer/MonoTouch/Source/mono/mcs/class/System.Core/System/TimeZoneInfo.cs:173 
```

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-15T05:46:35.113

使用`DateTime.Now`. 这将为您提供系统时区日期和时间。现在像这样将该时间转换为所需的时区时间

```
var indianTime = TimeZoneInfo.ConvertTime (DateTime.Now,
                 TimeZoneInfo.FindSystemTimeZoneById("India Standard Time")); 
```

要获取 TimeZone 列表，请运行此方法

```
ReadOnlyCollection<TimeZoneInfo> zones = TimeZoneInfo.GetSystemTimeZones();
Console.WriteLine("The local system has the following {0} time zones", zones.Count);
foreach (TimeZoneInfo zone in zones)
    Console.WriteLine(zone.Id); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-15T05:46:50.497

你可以这样做：

```
Datetime date = TimeZoneInfo.ConvertTime(utcDateTime, timeZone); 
```

只需传递给定的参数。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-17T11:37:24.163

这是 MonoTouch 中的一个[错误](https://bugzilla.xamarin.com/show_bug.cgi?id=7214)。

该修复程序将包含在 MonoTouch 的未来版本中（虽然我不知道具体是哪个）。

无论如何，已经[有可用的修补程序](https://bugzilla.xamarin.com/show_bug.cgi?id=7214#c2)。

# perl - 为什么 getopts('absif:', \%Options) 在我传递无效选项时不报错？

> ID：12434771
> 
> 赞同：-2
> 
> 时间：2012-09-15T05:25:56.820
> 
> 标签：perl

### 文件.pl

```
if (! getopts('abisf:',\%Options)){
# Display usage details
print "Usage Error invalid options \n";
exit(1);
} 
```

如果我运行：

```
$>perl file.pl -q @argv; 
```

这应该打印使用错误，但事实并非如此。

```
$>perl file.pl -a @argv; 
```

这应该有`$Options{a}=1`，但我看到的是`$Options{a}=''`空的。

这是怎么回事？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:01:29.360

请记住尽可能发布[简短、独立、正确（编译）的示例](http://sscce.org/)；它使人们更容易可靠地帮助您。

这是一个SSCCE：

```
#!/usr/bin/env perl
use strict;
use warnings;
use Getopt::Std;

my %Options;

if (! getopts('abisf:',\%Options)){
# Display usage details
print "Usage Error invalid options \n";
exit(1);
}

for my $opt (sort keys %Options)
{
    print "-$opt = $Options{$opt}\n";
}
for my $arg (@ARGV)
{
    print "arg = $arg\n";
}
print "OK\n"; 
```

当调用脚本`opt.pl`并如下所示调用它时，它似乎可以正常工作：

```
$ perl opt.pl
OK
$ perl opt.pl -a
-a = 1
OK
$ perl opt.pl -a x
-a = 1
arg = x
OK
$ perl opt.pl -a -f x
-a = 1
-f = x
OK
$ perl opt.pl -a -f x zzz
-a = 1
-f = x
arg = zzz
OK
$ perl opt.pl -q
Unknown option: q
Usage Error invalid options 
$ 
```

您在输出中看到任何意外情况吗？你在你的系统上得到了什么？

# macos - 无法使用 Grid 和 RemoteWebDriver 在 Safari 上截屏

> ID：12434772
> 
> 赞同：3
> 
> 时间：2012-09-15T05:26:10.473
> 
> 标签：macos, selenium-webdriver, safari, selenium-grid

我正在尝试使用 Grid 和 RemoteWebDriver 从 Safari 获取屏幕截图。我尝试了以下方法：

1.  使用下面的代码。它适用于除 Safari 之外的所有浏览器。我也尝试返回一个 BASE64 字符串，但没有奏效。

    ```
    WebDriver augmentedDriver = new Augmenter().augment(driver);
    File source = ((TakesScreenshot)augmentedDriver).getScreenshotAs(OutputType.FILE);
    FileUtils.copyFile(source, new File("screenshot.png")); 
    ```

    `Exception: org.openqa.selenium.WebDriverException`

2.  使用 WebDriverBackedSelenium。这会引发异常。

    一个。

    ```
    Selenium sel = new WebDriverBackedSelenium(driver, driver.getCurrentUrl());
    sel.captureScreenshot(filename); 
    ```

    `Exception: java.lang.UnsupportedOperationException: captureScreenshot`

    湾。

    ```
    Selenium sel = new WebDriverBackedSelenium(driver, driver.getCurrentUrl());
    sel.captureScreenshotToString(); 
    ```

    `Exception: java.lang.UnsupportedOperationException: WebDriver does not implement TakeScreenshot`

3.  `sendKeys(Keys.chord(Keys.COMMAND, Keys.SHIFT, "3"))`我尝试使用但不被视为修饰键发送在 MAC (command+shift+3) 中进行屏幕截图的键序列，`Keys.COMMAND`因此这也不起作用。

经过一番研究，我遇到了以下问题： [http ://code.google.com/p/selenium/issues/detail?id=4203](http://code.google.com/p/selenium/issues/detail?id=4203)

我也看到了这个修订版，它应该可以解决这个问题，但我无法弄清楚如何实现这个 [http://code.google.com/p/selenium/source/detail?r=17731](http://code.google.com/p/selenium/source/detail?r=17731)

如果我能在这方面得到一些帮助，我将不胜感激。我正在使用 MAC、Safari 5.1.7 和 selenium 2.25。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T18:34:27.690

供将来参考：这似乎已在 Selenium 2.26中[修复](https://code.google.com/p/selenium/issues/detail?id=4203)

# makefile - 使用变量替换的 GNU Makefile 中的 patsubst

> ID：12434775
> 
> 赞同：1
> 
> 时间：2012-09-15T05:28:35.430
> 
> 标签：makefile, gnu-make

给定以下 GNU Makefile 代码。

```
ENDING = '\.cpp'
OBJ = $(SOURCES:$(ENDING)=.o) # (does not work) 
```

然而，这并没有取代任何东西，

```
OBJ = $(SOURCES:.cpp=.o) 
```

确实（对于 cpp 文件）。有没有办法告诉 patsubst*特定*的结局？或者至少要替换所有类型的结尾，如下所示？

```
OBJ = $(SOURCES:.*=.o) # (does not work) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T07:53:16.103

这有效：

```
ENDING = .cpp
OBJ = $(SOURCES:$(ENDING)=.o) 
```

这将取代所有结局：

```
OBJ = $(addsuffix .o,$(basename $(SOURCES))) 
```

# c++ - 二维字符串数组 C++：将整数连接成字符串

> ID：12434777
> 
> 赞同：0
> 
> 时间：2012-09-15T05:28:48.723
> 
> 标签：c++, string, multidimensional-array

我想首先说我几乎没有使用 C++ 的经验，但是这个学期我正在上大学课程，只是有点乱搞，所以我为这门课做好了更好的准备。我知道大量的 Java，但几乎不知道 C++。

基本上，我想让一些整数成为字符串的一部分，这些整数将进入字符串 2D 数组。然后我想打印出来只是为了确保所有东西都在数组中......我意识到第二个 for 循环并不是真正必要的，但我还是把它放在那里。

我的问题是尝试执行以下操作时不断收到错误消息：

```
myArray[i][j] = "(" << i << "," << j << ")"; 
```

具体来说，它告诉我：

```
error: invalid operands of types 'const char*' and 'const char [2]' to binary 
       'operator+' 
```

我不明白这个错误，也不知道如何解决它......

这就是我所拥有的。

```
int height = 5;
int width = 5;
string myArray[height][width];

for (int i = 0; i < height; ++i) {
    for (int j = 0; j < width; ++j) {
        myArray[i][j] = "(" << i << "," << j << ")";
    }
}

for (int i = 0; i < height; ++i) {
    for (int j = 0; j < width; ++j) {
        cout << myArray[i][j] << "  ";
    }
} 
```

我只想知道如何修复该错误，然后我还想具体了解为什么我会收到所说的错误。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T05:34:50.113

您会收到错误，因为这不是在 C++ 中连接字符串的方法。但是该消息很奇怪，因为您似乎正在使用`operator <<`而不是`operator +`.

无论如何，使用`std::stringstream`.

```
std::stringstream ss;
ss << "(" << i << "," << j << ")";
myArray[i][j] = ss.str(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T05:37:20.873

您可以编写一个`stringbuilder`实用程序，以便能够将其用作：

```
myArray[i][j] = stringbuilder() << "(" << i << "," << j << ")";

//other examples
std::string s = stringbuilder() << 25  << " is greater than " << 5;

f(stringbuilder() << a << b << c); //f is : void f(std::string const&); 
```

其中`stringbuilder`定义为：

```
struct stringbuilder
{
   std::stringstream ss;
   template<typename T>
   stringbuilder & operator << (const T &data)
   {
        ss << data;
        return *this;
   }
   operator std::string() { return ss.str(); }
}; 
```

请注意，**如果**您要`std::stringstream`在代码中多次使用，则会`stringbuilder`减少代码的冗长性。否则，您可以`std::stringstream`直接使用。

# iphone - 如何找出触摸屏的位置

> ID：12434784
> 
> 赞同：1
> 
> 时间：2012-09-15T05:29:36.090
> 
> 标签：iphone

我正在开发一个应用程序。因为我正在使用一个 UIImageView 并且我使用下面的代码每 0.5 秒更改一次 UIImageView 的位置。

```
[NSTimer scheduledTimerWithTimeInterval:0.5
                                 target: self
                               selector:@selector(moveImage)
                               userInfo: nil repeats:YES];
-(void) moveImage
{
   //[image1 setCenter: CGPointMake(634, 126)];
   CGFloat x = (CGFloat) (arc4random() % (int) self.view.bounds.size.width);
   CGFloat y = (CGFloat) (arc4random() % (int) self.view.bounds.size.height);
   CGPoint squarePostion = CGPointMake(x, y);
   img.center=squarePostion;
} 
```

现在我可以触摸屏幕了。我需要找出的是我的触摸位置和图像视图位置是否正确。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:02:31.933

```
use this 

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event

{

    UITouch *touch = [[event allTouches] anyObject];

    CGPoint touchLocation = [touch locationInView:self.view];

 if ([touch view] == photo1) {

        //photo1 is image view give tag to it
        if( photo1.tag==3)

        {
            NSLog(@"You have been touched image view");
        }

        photo1.center = touchLocation;

    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:54:22.760

```
//it used to find the point in view
- (void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
{

    UITouch * touch = [touches anyObject];

    CGPoint pos = [touch locationInView: [UIApplication sharedApplication].keyWindow];
       NSLog(@"%f,%f",pos.x, pos.y);

} 
```

# wpf - 使用触发器更改在 ResourceDictionary 中声明的路径的颜色

> ID：12434787
> 
> 赞同：1
> 
> 时间：2012-09-15T05:29:59.360
> 
> 标签：wpf, triggers

我正在创建一个单选按钮样式。RadioButton 有一个承载 ContentControl 的边框。ContentControl 将其 Content 属性设置为`Path`在单独的 ResourceDictionary 中声明的 (FemaleVector)。当单选按钮 IsChecked 时，如何更改路径的 Fill 属性？以下是我到目前为止所拥有的。我可以更改边框的背景属性，但设置 ContentControl 的 Foreground 属性不会更改路径的颜色。（没想到这行得通。）

```
<Style x:Key="Female" TargetType="{x:Type RadioButton}">
    <Setter Property="Margin" Value="0,0,5,0"/>
    <Setter Property="Cursor" Value="Hand"/>
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type RadioButton}">
                <Border x:Name="border" Padding="7,3,7,3" Width="35" Height="35" BorderBrush="#8CD567DC" Background="#00D567DC" CornerRadius="5" BorderThickness="0.8">
                    <ContentControl x:Name="content" Content="{DynamicResource FemaleVector}"/>
                </Border>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsChecked" Value="True">
                        <Setter Property="Background" TargetName="border" Value="#8CD567DC"/>
                        <Setter Property="Foreground" TargetName="content" Value="Blue"/>
                    </Trigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

我不喜欢在我的样式中有路径的长数据属性，所以我将它们移动到一个单独的 ResourceDictionary 中。我是否应该将路径放回我的样式而不是将其保存在单独的 ResourceDictionary 中？

编辑：类似的问题在[这里](https://stackoverflow.com/questions/3856724/bind-a-fill-property-in-a-path-to-a-foreground-property-from-the-contentcontrol)和[这里](https://stackoverflow.com/questions/2487814/wpf-style-how-to-change-gradientstop-color-in-trigger)。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T05:40:15.707

如果样式没有在某处重用，我个人会将其保存在本地样式资源部分。这样你就能看到更大的画面。否则，将它保存在 ResourceDictionary 中是明智的：)

无论哪种方式，您都应该能够通过以下方式更改 Fill 属性：

```
<Setter Property="Content.Fill" TargetName="content" Value="Blue"/> 
```

如果这不起作用，我建议更多方法：您可以在 Xaml 中使用 Trigger.EnterActions<>。或许通过动画设置属性效果会更好？带有 setter 的 ControlTemplate 触发器有时会受到限制。

还有相对绑定。但你必须小心。（如果您想让它可重复使用）在您的 FemaleVector 样式中，您可以将 Fill 与 ContentControl Foreground 绑定。在 Google 中查找 RelativeBinding。

然后是财产继承。如果在 FemaleVector 中设置填充颜色，则需要使用样式。如：

```
<Style>
<Setter Property="Fill" Value="BLACK" />
</Style> 
```

您可以稍后设置 ContentControls 样式并在那里添加触发器，例如：

```
<ContentControl.Style>
<Style>
<Style.Triggers>
<DataTrigger Binding={Binding IsChecked, RelativeSource={RelativeSource AncestorType=RadioButto}} Value=TRUE>
<Setter Property="Path.Fill" Value="BLACK" />
</DataTrigger> 
```

# actionscript-3 - ADT Captive Runtime Package 命令行错误

> ID：12434788
> 
> 赞同：1
> 
> 时间：2012-09-15T05:30:05.173
> 
> 标签：actionscript-3, command-line, air, adt

我正在尝试（未成功）使用命令提示符打包适用于 Windows 7 的 AIR 3.3 应用程序的强制运行时。

传递给 ADT 的参数是正确的，因为我没有收到错误，并且系统提示我输入证书密码：

```
C:\Users\Geoffrey Mattie>"C:\Program Files (x86)\FlashDevelop\Tools\flexsdk\bin\
adt.bat" -package -keystore "G:\Desktop\AIRCert.p12" -storetype pkcs12 -target b
undle "G:\Desktop\Off Air" "G:\Developer\OffAir\application.xml" -C "G:\Deve
loper\OffAir\bin\OffAir.swf" -C "G:\Developer\OffAir\assets\offAirIcon.png"
password: 
```

但是，输入密码后，我收到以下信息：

```
unexpected failure: inputs not set
java.lang.IllegalStateException: inputs not set
        at com.adobe.air.ApplicationPackager.createPackage(ApplicationPackager.j
ava:61)
        at com.adobe.air.nai.NativePackager.createPackage(NativePackager.java:96
)
        at com.adobe.air.ADT.parseArgsAndGo(ADT.java:564)
        at com.adobe.air.ADT.run(ADT.java:418)
        at com.adobe.air.ADT.main(ADT.java:468)

C:\Users\Geoffrey Mattie> 
```

这可能是因为我的应用程序文件位于`G`驱动器上，而 ADT 和 Java 位于`C`驱动器上吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T16:16:08.213

我认为您需要指定 .exe 文件的名称。代替：

```
-target bundle "G:\Desktop\Off Air" 
```

应该是：

```
-target bundle "G:\Desktop\Off Air\MyApp.exe" 
```

或者：

```
_target bundle "G:\Desktop\Off Air\MyApp.app" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T18:11:33.460

我手动合并 AIR 3.4 和 Flex 4.6 SDK 似乎存在问题。使用[Adob​​e 游戏网站](http://gaming.adobe.com/getstarted/)上的[预合并版本](http://download.macromedia.com/pub/gaming/flex_sdk_4.6.0.23201.zip)可以解决此问题。

# html - 打印时表格标题重复

> ID：12434790
> 
> 赞同：1
> 
> 时间：2012-09-15T05:30:23.840
> 
> 标签：html, css, printing

我使用表格来显示记录列表。它有很多行和列。如果我打印此表格，表格标题将显示在第一页。在第一页之后，不显示标题。我从谷歌搜索中找到了很多网站。我遵循了这种方法，但我无法实现。我无法意识到这个错误。这是我的CSS。

```
<style type="text/css" media="print" >
table td {
    border-bottom:1px solid gray;
}
th {
font-family:Arial;
color:black;
background-color:lightgrey;
}
thead {
    display:table-header-group;
}
tbody {
    display:table-row-group;
}
</style> 
```

这是我的 HTML 代码：

```
<table border="0" cellpadding="2" cellspacing="0">
    <thead>
        <tr>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>1</td>
            <td>First Name 1</td>
            <td>Last Name 1</td>
        </tr>
    </tbody>
</table> 
```

任何人都可以帮助我吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:36:12.490

尝试在你的 CSS 中添加这个：

```
 @media print
 {
   thead {display: table-header-group;}
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-25T20:25:10.187

这是示例首先，您必须明确定义表头和表体：

```
 <table>
   <thead>
  <tr>
     <th>First Heading</th>
     <th>Second Heading</th>
     <th>Third Heading</th>
  </tr>
 </thead>
 <tbody>
  <tr>
     <td>foo</td>
     <td>bar</td>
     <td>baz</td>
  </tr>

    . . .

  <tr>
     <td>fim</td>
     <td>fam</td>
     <td>fom</td>
  </tr>
</tbody>
</table> 
```

如果你想让打印工作，你需要有一个明确的声明。接下来，您只需要一行 CSS 就可以让事情顺利进行：

```
 @media print {
thead {display: table-header-group;}
} 
```

这将迫使大多数浏览器在每个打印页面上重复 ad 节点的内容。

# c# - 用于按日期安排资源的 Asp.Net 开发方法

> ID：12434791
> 
> 赞同：1
> 
> 时间：2012-09-15T05:30:53.927
> 
> 标签：c#, asp.net

我最近开始了一个小的 asp.net c# 项目，用于为日期安排资源。手头的具体任务是允许我在某些日子将工人分配给工作几个小时。基本上这样我就可以检查谁在做什么，在工作上花了多少时间等等。

我想与社区核实处理此类场景的标准方法，并就我概述的 bdlow 预期方法获得一些反馈。特别是我对适合此应用程序和数据库结构的 UI 控件感兴趣。

这是我计划做的，但似乎有点麻烦，我希望有一种更简单的方法我错过了。

**数据库结构**
表：Job，列：Id、JobNumber、Description、HoursAllocated 表
：Employee，列：Id、Name
表：EmployeeJob：JobId、EmployeeId、Date、Hours

**UI**
创建一个 DataTable，其中每个作业都有一行，并在接下来的 3 个月中为每一天添加一列。添加日期列时，我会检查任何 EmpployeeJob 记录并添加当天的小时数。数据表将绑定到 UI 中的 DataGrid，用户可以滚动查看网格，查看谁在做什么以及何时工作。

**对当前方法的担忧**
我已经进行了一些快速测试，这种方法似乎很慢。我已经研究了特定的调度 asp.net 控件，但似乎没有什么是理想的，为了简单起见，我想使用标准控件。

我的测试显示为大约 500 个工作构建 DataTable，耗时 3 个月，只有几个计划测试的员工花费了大约 10 秒的时间。这让我考虑将日历日期也存储到数据库中，但这似乎有点矫枉过正，并且需要维护或填充未来的数据。我正在使用实体数据模型并通过 linq 从后面的代码访问表。

您将用于安排员工工作的开发方法/数据结构/控件是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:14:14.697

我不认为你离得那么远——表格结构看起来很标准，但 UI 看起来更像 SSMS 或 Access 而不是 web。我不会担心尝试让您的 UI 与您的表格匹配，并首先关注页面，而不依赖于数据结构。如果您是用户，查看/输入数据的最简单方法是什么？

现在加载数据可能太慢了，但您可能永远不必加载那么多数据。如果您将搜索功能（按工作、日期、员工）和分页添加到网格中，这将限制您在任何时候需要返回的数据量。

您可以查看 GridView/ListView 和 DetailsView 作为显示信息的选项。考虑使用某种映射层将原始数据转换为您的 UI 需要的数据——这样您的界面与数据层的耦合就不会那么紧密，并且如果需要，以后更容易更改。

# c# - 为什么 typeof(T).IsEnum 返回 true，即使文档说它应该总是返回 false？

> ID：12434795
> 
> 赞同：2
> 
> 时间：2012-09-15T05:33:02.420
> 
> 标签：c#, enums

试图回答这个问题时出现了这个问题：

[https://stackoverflow.com/questions/12434634](https://stackoverflow.com/questions/12434634)

[该`Type.IsEnum`物业](http://msdn.microsoft.com/en-us/library/system.type.isenum(v=vs.110).aspx)的文件说：

> 如果当前 Type 表示泛型类型或泛型方法定义中的类型参数，则此属性始终返回 false。

但是我没有看到这种行为。 `typeof(T).IsEnum`正在回归`true`。为什么？我是否误解了文档？

示例代码：

```
using System;

static class Program
{
    public static void Test<TEnum>() where TEnum : struct
    {
        Console.WriteLine(typeof(TEnum).IsEnum);
    }

    public static void Test<TEnum>(this string text) where TEnum : struct
    {
        if (!typeof(TEnum).IsEnum)
        {
            Console.WriteLine("Not an enum");
            return;
        }

        Console.WriteLine("Is an enum");
    }

    public enum Test1
    {
        Value1,
        Value2,
    }

    public enum Test2 : byte
    {
        Value3,
        Value4,
    }

    static void Main(string[] args)
    {
        Test<Test1>();
        Test<Test2>();
        "".Test<Test1>();
        "".Test<Test2>();
    }
} 
```

我得到的结果是：

> True
> True
> Is an enum
> Is an enum

在阅读[了`Type.IsEnum`property](http://msdn.microsoft.com/en-us/library/system.type.isenum%28v=vs.110%29.aspx)的文档后，我希望结果是：

> False
> False
> 不是枚举
> 不是枚举

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T05:38:41.497

该文档正在讨论表示开放泛型类型或方法的类型参数的类型对象。在您的代码中，您正在查询表示封闭泛型方法中的类型参数的类型对象，并且在您的示例中，该类型参数当然*是*枚举类型。

换句话说，该文档正在讨论通过调用 GetGenericArguments 获得的类型`typeof(List<>)`，而不是 on `typeof(List<SomeEnum>`)。

# android - 在 textview 中移动文本

> ID：12434797
> 
> 赞同：2
> 
> 时间：2012-09-15T05:33:34.183
> 
> 标签：android

```
TextView txt = new TextView(this);
    txt.setText(“This is moving text”); 
    txt.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 16);
    txt.setTextColor(Color.rgb(187, 88, 15));
    txt.setPadding(10, 10, 0, 0);
    txt.setEllipsize(TruncateAt.MARQUEE);
    txt.setSingleLine();
    txt.setMarqueeRepeatLimit(10);
    txt.setFocusable(true);
    txt.setHorizontallyScrolling(true);
    txt.setFocusableInTouchMode(true);
    txt.requestFocus();
    txt.setTypeface(Typeface.SERIF,Typeface.BOLD); 
```

> 我试图为 textview 创建移动文本，但它不会移动。我尝试使用 setMarqueeRepeatLimit 。怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T12:56:00.293

> 答案是：

```
TextView txt = new TextView(this);     
txt.setText(“This is moving text”);      
txt.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 16);     
txt.setTextColor(Color.rgb(187, 88, 15));     
txt.setPadding(10, 10, 0, 0);     
txt.setEllipsize(TruncateAt.MARQUEE);     
txt.setSingleLine();     
txt.setMarqueeRepeatLimit(10);     
txt.setFocusable(true);     
txt.setHorizontallyScrolling(true);     
txt.setFocusableInTouchMode(true);     
txt.requestFocus();     
txt.setLayoutParams(new TableRow.LayoutParams(130, TableRow.LayoutParams.FILL_PARENT));
txt.setTypeface(Typeface.SERIF,Typeface.BOLD); 
```

# scala - 防止 Mixin 覆盖 equals 破坏 case 类相等

> ID：12434798
> 
> 赞同：4
> 
> 时间：2012-09-15T05:33:53.910
> 
> 标签：scala, squeryl

`Squeryl`定义了一个`KeyedEntity`覆盖的特征`equals`，检查 if 中的几个条件并`super.equals`在最后调用。因为`super`is `Object`，它总是会失败。

考虑：

```
trait T { override def equals(z: Any):Boolean = super.equals(z)} }

case class A(a: Int) extends T

val a = A(1); val b = A(1)

a==b // false 
```

因此，如果您声明

```
case class Record(id: Long, name: String ...) extends KeyedEntity[Long] { ... } 
```

- 你创建了几个`Record`实例但不持久化它们，它们的比较会中断。我通过为同一个类实现两个`Salat`和`Squeryl`后端发现了这一点，然后所有`Salat`测试都失败了，因为`isPersisted`from`KeyedEntity`是假的。

如果混合到一个案例类中，是否有一种设计`KeyedEntity`可以保持案例类的平等？我尝试将案例类类型为 P 的自键入和参数化`BetterKeyedEntity[K,P] { self: P => ... }`，但它会导致 equals 中的无限递归。

就目前的情况而言，`super`被`Object`覆盖的 equals in 的最终分支`KeyedEntity`将始终返回 false。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:26:19.027

`equals`如果有覆盖，通常为案例类生成的结构相等检查似乎不会生成。但是，必须注意一些细微之处。

将基于 id 的平等概念混入结构平等**可能不是一个好主意**，因为我可以想象它可能会导致细微的错误。例如：

*   `x: A(1)`和`y: A(1)`还没有持久化，所以它们是相等的
*   然后它们会被持久化，并且由于它们是单独的对象，持久性框架可能会将它们作为单独的实体持久化（我不知道 Squeryl，那里可能不是问题，但这是一条细线）
*   在坚持之后，由于id不同，它们突然不相等。

更糟糕的是，如果`x`和`y`被持久化到相同的 id，那么`hashCode`在持久化之前和之后会有所不同（[来源](https://github.com/max-l/Squeryl/blob/master/src/main/scala/org/squeryl/KeyedEntity.scala)显示，如果持久化它是 id 的 hashCode）。这破坏了不变性，并会导致非常糟糕的行为（例如，当放在地图中时）。请参阅[我在其中演示断言失败的要点](https://gist.github.com/3726916)。

所以不要*隐式*混合结构和基于 id 的平等。[另请参阅在Hibernate](https://stackoverflow.com/questions/1638723/equals-and-hashcode-in-hibernate)的上下文中对此进行的解释。

**类型类**

必须注意的是，其他人指出（需要参考）基于方法的平等的概念是有缺陷的，出于这些原因（两个事物相等的方法不止一种）。因此，您可以定义一个描述 Equality 的类型类：

```
trait Eq[A] {
  def equal(x: A, y: A): Boolean
} 
```

并为您的类定义（可能是多个）该类型类的实例：

```
// structural equality
implicit object MyClassEqual extends Eq[MyClass] { ... }

// id based equality
def idEq[K, A <: KeyedEntity[K]]: Eq[A] = new Eq[A] {
  def equal(x: A, y: A) = x.id == y.id
} 
```

那么你可以请求事物是 Eq 类型类的成员：

```
def useSomeObjects[A](a: A, b: A)(implicit aEq: Eq[A]) = {
  ... aEq.equal(a, b) ...
} 
```

因此，您可以通过在范围内导入适当的类型类或直接传递类型类实例来决定使用哪个相等概念，如`useSomeObjects(x, y)(idEq[Int, SomeClass])`

请注意，您可能还需要一个`Hashable`类型类，类似地。

**自动生成 Eq 实例**

这种情况与 Scala 标准库的类型类非常相似`scala.math.Ordering`。这是使用出色的[无形](https://www.google.hu/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CCQQFjAA&url=https://github.com/milessabin/shapeless&ei=SSxUUMuhOsXtsgbr24HABA&usg=AFQjCNFvx3dfQCrdoYO7rK_GCYBDLKxxQA&sig2=OXRlsO9QlRRkEB5Heo3hcA)库[自动派生`Ordering`案例类的结构实例的示例。](https://gist.github.com/3705819)

`Eq`对于和也很容易做到这一点`Hashable`。

**斯卡拉兹**

请注意，[scalaz 具有 typeclass `Equal`，](https://github.com/scalaz/scalaz/blob/scalaz-seven/core/src/main/scala/scalaz/Equal.scala)具有很好的 pimp 模式，您可以使用它来编写`x === y`而不是`eqInstance.equal(x, y)`. 我还不知道它有`Hashable`类型类。

# macros - [Libre|Open]Office 中当前文档的路径

> ID：12434803
> 
> 赞同：3
> 
> 时间：2012-09-15T05:35:02.960
> 
> 标签：macros, libreoffice, libreoffice-basic

如何确定当前打开的文档在 OpenOffice 或 LibreOffice 文档中的路径？我想将路径转发到外部应用程序。

更具体地说，我想用全屏模式的视频文件从 impress 启动一个外部播放器：

```
Shell("/usr/bin/mplayer", 2, """ -fs"" some-file-in-same-dir-as-document.mp4") 
```

对于最后一个参数，我需要当前打开的文档的路径才能附加它。不指定路径会导致引用当前路径（由`CurDir()`函数给出），这是不同的。

LibreOffice 宏实际上有很好的参考吗？我发现的唯一相对较好（但很难搜索）的文档是 Andrew Pitonyak 的“ [OpenOffice Macros Explained](http://www.pitonyak.org/book/) ”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-14T17:24:29.930

与此同时，我找到了一个可行的解决方案。看这里：

```
Sub RunSomeMovie
    GlobalScope.BasicLibraries.loadLibrary("Tools")
    Shell("/usr/bin/mplayer -fs ", 2, "" & Tools.Strings.DirectoryNameoutofPath(ThisComponent.getURL(),"/") & "/media/somemovie.mp4")
End Sub 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T16:29:34.083

要获取当前文档路径，请使用以下简单命令：

```
ThisComponent.getURL() 
```

CurDir() 对于所有操作系统来说根本不可靠顺便说一句，我在你引用的 Pitonyak 书中发现了我不知道的信息，并且发现它非常珍贵，因此感谢分享。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-12-07T10:27:40.663

我正在使用 LibreOffice 4.2.0.4，以下代码适用于我：

```
 Dim Dir as String
    GlobalScope.BasicLibraries.loadLibrary("Tools")
    Dir = Tools.Strings.DirectoryNameoutofPath(ThisComponent.url, "/") 
```

变量“dir”现在包含当前文档的路径。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-05-26T10:55:31.130

文档只有在保存（或从保存的位置打开）时才具有位置。此外，从 LibreOffice Base 中打开的表单本身没有位置。只有 odt 有位置。因此，虽然：

ThisComponent.hasLocation()

返回 True，该位置是一个空字符串（将其视为错误）。要获取位置，在这种情况下，您必须访问“父级”：

ThisComponent.Parent.hasLocation()（或 ThisComponent.Parent.getURL()）

当然，您必须将其“翻译”为可读：Tools.Strings.DirectoryNameoutofPath

# ruby-on-rails-3 - 如何在 db/seed.rb 中使用 Authlogic 创建用户？

> ID：12434804
> 
> 赞同：0
> 
> 时间：2012-09-15T05:35:03.417
> 
> 标签：ruby-on-rails-3, authlogic

当我在 db/seed.rb 中使用以下行时：

```
 #Authlogic::Session::Base.controller = Authlogic::ControllerAdapters::RailsAdapter.new(self)
User.create!({:name => "debug", :email => "debug@deb.com", :password => "12345678", :password_confirmation => "12345678"}) 
```

我得到：

```
 /authlogic-3.1.3/lib/authlogic/controller_adapters/abstract_adapter.rb:30:in `params': undefined method `params' for main:Object (NoMethodError)
        from /authlogic-3.1.3/lib/authlogic/session/params.rb:96:in `params_credentials'
        from /authlogic-3.1.3/lib/authlogic/session/params.rb:72:in `params_enabled?'
        from /authlogic-3.1.3/lib/authlogic/session/params.rb:66:in `persist_by_params'
[...] 
```

我在控制台中对这个命令有同样的错误。然而，应用程序本身一切都很好，我只在 db/seed.rb 或控制台中遇到这个问题。

注释的第一行没有区别（来源[http://www.tatvartha.com/2009/09/working-with-authlogic-in-scriptconsole/](http://www.tatvartha.com/2009/09/working-with-authlogic-in-scriptconsole/)）。

Ruby 1.9.3 Rails 3.2.8 Authlogic 3.1.3

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:42:12.887

自动应答：

我必须从 config/environment.rb 中删除以下内容：

```
Authlogic::Session::Base.controller = Authlogic::ControllerAdapters::RailsAdapter.new(self) 
```

# jquery - 使用展开/折叠所有多个手风琴切换类

> ID：12434805
> 
> 赞同：0
> 
> 时间：2012-09-15T05:35:10.617
> 
> 标签：jquery

我在尝试编写的 jquery 脚本时遇到问题。它看起来对我来说是正确的，但还不完全在那里。有人可以帮我理解为什么这不起作用吗？

```
jQuery('.expand').click(function(){
    jQuery('.expandnav').find('div.menu-body').show('slow');

    if( ('.menu-body').is(':visible') ){
        (this).addClass('collapse-active');
    }else{
        (this).removeClass('collapse-active');
    }
}); 
```

单击 .expand 时，会显示 .menu-body 但条件似乎没有运行。我已经用警报进行了测试，但没有任何反应......

我在每个手风琴上使用toggleClass，因为页面有很多，但我需要addClass/removeClass来交换+，-图像。希望这是有道理的。底线是条件没有响应。

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T05:49:30.357

你会想使用的`callback`方法`$.fn.show`，阅读更多[http://api.jquery.com/show/](http://api.jquery.com/show/)

这是一个显示建议更改的小提琴：http: [//jsfiddle.net/pewt8/](http://jsfiddle.net/pewt8/)

# c# - signtool.exe 找不到 c# 并且无法发布，因为项目无法构建

> ID：12434809
> 
> 赞同：1
> 
> 时间：2012-09-15T05:35:38.597
> 
> 标签：c#, .net, c#-4.0, clickonce, signtool

我已经编写了一个 c# windows 应用程序，我正在尝试在我的客户（客户）机器上运行它。

首先>>>我尝试发布该应用程序。虽然发布它给了我两个错误 1\. 无法发布，因为项目未能构建 2.signingtool.exe 未找到。

事件虽然在网上搜索，我没有得到这个问题的适当解决方案。然后我尝试通过在 x86 模式下发布应用程序来制作应用程序的 exe。

当我双击应用程序文件（exe）...它被打开并给我错误 1.microsoft.ace.oledb.12.0' 提供程序未在本地计算机上注册

在此错误之后，我安装了 AccessDatabaseEngine 的设置。虽然安装这个......它给了我错误......

我该怎么办这些错误？？？帮我解决同一案件的两个问题...

我已经参考了这篇文章 [ClickOnce - 由于项目未能构建而无法发布](https://stackoverflow.com/questions/7869129/clickonce-cannot-publish-because-a-project-failed-to-build)

并尝试通过顶部的菜单构建和发布项目......但问题仍然相同......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-10-30T12:26:45.190

别担心，我有这个问题。这是一个非常简单的过程：

1.  开放程序和功能
2.  选择 Microsoft Visual Studio
3.  单击更改
4.  如果出现提示，请选择修改（取决于您的 VS 版本）
5.  选择 ClickOnce 发布工具并安装它们

另外，我发现了一堆很酷的东西，你可以从那里安装。

# drupal - CKFinder 没有所需的权限

> ID：12434812
> 
> 赞同：0
> 
> 时间：2012-09-15T05:36:08.150
> 
> 标签：drupal, permissions, ckfinder

我有一个 CKEditor 作为所见即所得编辑器的 drupal 站点，想使用 CKFidner 上传图片，但在为管理员启用权限后，我仍然收到如下错误消息：“出于安全原因，文件浏览器已禁用。请联系您的系统管理员并检查 CKFinder 配置文件” - 为什么会这样？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-23T23:16:28.710

这里：

```
function CheckAuthentication()
{

    return false;
} 
```

默认情况下`CheckAuthentication()`，出于安全原因禁用它，因为它允许任何人将文件上传到您的服务器。

出于测试目的，您可以返回`true`，但关键是您实现了一些逻辑以仅授权经过身份验证的用户。

```
function CheckAuthentication()
{
    //put some logic here

    return isset($_SESSION['IsAuthorized']) && $_SESSION['IsAuthorized'];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:45:20.443

通过 ckeditor 上传图片是在内容中添加图片的一种方式。根据经验，我建议您尝试 imagefield 和插入模块。通过这种方式，您可以控制从上传图像到您的节点的视图，并轻松显示照片/预告片，在节点中创建超过 2 张图像或任何您想要的画廊，因为您的图像将以结构化方式保存在您的节点上。

# ruby-on-rails - Heroku rake db：迁移中止

> ID：12434815
> 
> 赞同：0
> 
> 时间：2012-09-15T05:36:46.943
> 
> 标签：ruby-on-rails, heroku, migration, rake

我有一个在开发中运行良好的应用程序，但是当我将它推送到 heroku 并尝试运行“heroku run rake db:migrate”时，rake 中止并显示以下消息：

```
rake aborted!
PG::Error: ERROR:  relation "submissions" does not exist
LINE 4:              WHERE a.attrelid = '"submissions"'::regclass
                                        ^
:             SELECT a.attname, format_type(a.atttypid, a.atttypmod), d.adsrc, a.attnotnull
              FROM pg_attribute a LEFT JOIN pg_attrdef d
                ON a.attrelid = d.adrelid AND a.attnum = d.adnum
             WHERE a.attrelid = '"submissions"'::regclass
               AND a.attnum > 0 AND NOT a.attisdropped
             ORDER BY a.attnum 
```

我不确定从哪里开始测试。我在我的架构中找不到问题。rake db:setup 也不起作用。这是我的架构：

```
ActiveRecord::Schema.define(:version => 20120913202908) do

  create_table "active_admin_comments", :force => true do |t|
    t.string   "resource_id",   :null => false
    t.string   "resource_type", :null => false
    t.integer  "author_id"
    t.string   "author_type"
    t.text     "body"
    t.datetime "created_at",    :null => false
    t.datetime "updated_at",    :null => false
    t.string   "namespace"
  end

  add_index "active_admin_comments", ["author_type", "author_id"], :name => "index_active_admin_comments_on_author_type_and_author_id"
  add_index "active_admin_comments", ["namespace"], :name => "index_active_admin_comments_on_namespace"
  add_index "active_admin_comments", ["resource_type", "resource_id"], :name => "index_admin_notes_on_resource_type_and_resource_id"

  create_table "admin_users", :force => true do |t|
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
  end

  add_index "admin_users", ["email"], :name => "index_admin_users_on_email", :unique => true
  add_index "admin_users", ["reset_password_token"], :name => "index_admin_users_on_reset_password_token", :unique => true

  create_table "categories", :force => true do |t|
    t.string   "name"
    t.text     "description"
    t.datetime "created_at",  :null => false
    t.datetime "updated_at",  :null => false
    t.integer  "festival_id"
  end

  create_table "categories_users", :id => false, :force => true do |t|
    t.integer "category_id", :null => false
    t.integer "user_id",     :null => false
  end

  create_table "festivals", :force => true do |t|
    t.date     "opening_date"
    t.date     "closing_date"
    t.string   "title"
    t.string   "slogan"
    t.string   "tag"
    t.datetime "submission_start_date"
    t.datetime "submission_end_date"
    t.boolean  "published"
    t.datetime "created_at",            :null => false
    t.datetime "updated_at",            :null => false
  end

  create_table "links", :force => true do |t|
    t.string   "name"
    t.string   "url"
    t.string   "kind"
    t.integer  "submission_id"
    t.datetime "created_at",    :null => false
    t.datetime "updated_at",    :null => false
  end

  create_table "performers", :force => true do |t|
    t.string   "name"
    t.string   "email"
    t.integer  "submission_id"
    t.datetime "created_at",    :null => false
    t.datetime "updated_at",    :null => false
  end

  create_table "submissions", :force => true do |t|
    t.string   "show_title"
    t.string   "group_name"
    t.string   "home_city"
    t.string   "home_theater"
    t.string   "country"
    t.text     "promotional_description"
    t.text     "additional_information"
    t.string   "contact_name"
    t.string   "contact_phone"
    t.string   "contact_email"
    t.boolean  "glbt_showcase"
    t.boolean  "diversity_showcase"
    t.integer  "user_id"
    t.integer  "category_id"
    t.datetime "created_at",              :null => false
    t.datetime "updated_at",              :null => false
  end

  create_table "users", :force => true do |t|
    t.string   "email",                  :default => "", :null => false
    t.string   "encrypted_password",     :default => "", :null => false
    t.string   "reset_password_token"
    t.datetime "reset_password_sent_at"
    t.datetime "remember_created_at"
    t.integer  "sign_in_count",          :default => 0
    t.datetime "current_sign_in_at"
    t.datetime "last_sign_in_at"
    t.string   "current_sign_in_ip"
    t.string   "last_sign_in_ip"
    t.datetime "created_at",                             :null => false
    t.datetime "updated_at",                             :null => false
    t.string   "name"
    t.string   "confirmation_token"
    t.datetime "confirmed_at"
    t.datetime "confirmation_sent_at"
    t.string   "unconfirmed_email"
    t.boolean  "curator"
  end

  add_index "users", ["email"], :name => "index_users_on_email", :unique => true
  add_index "users", ["reset_password_token"], :name => "index_users_on_reset_password_token", :unique => true

  create_table "venues", :force => true do |t|
    t.string   "name"
    t.string   "address1"
    t.string   "address2"
    t.string   "city"
    t.string   "state"
    t.string   "zip"
    t.string   "box_office_number"
    t.string   "website"
    t.string   "stage_name"
    t.text     "description"
    t.string   "contact_name"
    t.string   "contact_phone_number"
    t.string   "contact_email"
    t.datetime "created_at",           :null => false
    t.datetime "updated_at",           :null => false
  end

end 
```

关于我应该在哪里寻找问题的任何建议？我应该寻找什么？

我已经看到了许多类似的问题，但似乎没有一个明确的答案来寻找什么。

更新：这是我的 ActiveAdmin 初始化程序：

```
ActiveAdmin.setup do |config|
  config.site_title = "Cif4"
  config.authentication_method = :authenticate_admin_user!
  config.current_user_method = :current_admin_user
  config.logout_link_path = :destroy_admin_user_session_path
  config.batch_actions = true
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T16:09:36.033

由于 heroku 的定价和数据库大小的变化，最近很多人都发生了这种情况。

如果您的应用程序有超过 10,000 行并且您的计划不够高，则写入失败。

我们对此的回答是我们必须：

1) 选择一个允许 400,000 行，而不仅仅是 10,000 行的 higehr 计划

2）将我们的应用程序重新指向新的数据库。我没有参与，但显然这一步被*认为*已经完成，但实际上并没有，所以如果有必要也可以搜索一下。

# c++ - Qt 在不使用线程时从不同的线程设置父级

> ID：12434816
> 
> 赞同：1
> 
> 时间：2012-09-15T05:36:53.450
> 
> 标签：c++, multithreading, qt, label

我正在尝试制作一个绘制 9 个框的简单程序，当单击其中一个框时，会在其上绘制“X”。所以我画了 9 个盒子，然后我创建了一个类 ClickableLable。这个类继承了 QLabel 并重新实现了 mousePressEvent 函数，这样我就可以为每个点击的标签添加一个图像。

问题是，当我编译时，应用程序崩溃并且 Qt Creator 给了我一个“警告”： QObject::setParent: Cannot set parent, new parent is in a different thread

我没有使用任何线程/进程或类似的东西。我已经在互联网上搜索了这个错误，但我没有找到任何解决方案。

可点击标签.h

```
#ifndef CLICKABLELABEL_H
#define CLICKABLELABEL_H

#include <QLabel>
#include <QPixmap>
#include <QMouseEvent>

class ClickableLabel : public QLabel
{
Q_OBJECT
public:
ClickableLabel(QWidget *parent = 0);

protected:
void mousePressEvent(QMouseEvent *ev);

private:
QPixmap *zero;
QPixmap *x;

};

#endif // CLICKABLELABEL_H

ClickableLabel.cpp

#include "clickablelabel.h"

ClickableLabel::ClickableLabel(QWidget *parent) :
QLabel(parent)
{;
x = new QPixmap("x.png");
}

void ClickableLabel::mousePressEvent(QMouseEvent *ev){
if (ev->button() == Qt::LeftButton) {
    this->setPixmap(*x);
}
} 
```

主窗口.h

```
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include "clickablelabel.h"
#include <QtGui>

class MainWindow : public QMainWindow
{
Q_OBJECT

public:
MainWindow(QWidget *parent = 0);
void set_up_widgets();

protected:
void paintEvent(QPaintEvent *event);

private:
ClickableLabel *lab1;
ClickableLabel *lab2;
ClickableLabel *lab3;
ClickableLabel *lab4;
ClickableLabel *lab5;
ClickableLabel *lab6;
ClickableLabel *lab7;
ClickableLabel *lab8;
ClickableLabel *lab9;

QHBoxLayout *lay1;
QHBoxLayout *lay2;
QHBoxLayout *lay3;

QVBoxLayout *layout;

};

#endif // MAINWINDOW_H 
```

ClickableLabel.cpp

```
#include "clickablelabel.h"

ClickableLabel::ClickableLabel(QWidget *parent) :
QLabel(parent)
{;
x = new QPixmap("x.png");
}

void ClickableLabel::mousePressEvent(QMouseEvent *ev){
if (ev->button() == Qt::LeftButton) {
    this->setPixmap(*x);
}
} 
```

主文件

```
#include "mainwindow.h"

void center(QWidget &widget){
QDesktopWidget *desktop = QApplication::desktop();

int x = 800;
int y = 600;

int sWidth = (desktop->width() - 800) / 2;
int sHeight = (desktop->height() - 600) / 2;

widget.setGeometry(sWidth, sHeight, x, y);
}

int main(int argc, char *argv[])
{
QApplication a(argc, argv);
MainWindow w;
center(w);
w.show();

return a.exec();
} 
```

主窗口.cpp

```
#include "mainwindow.h"

MainWindow::MainWindow(QWidget *parent) : QMainWindow(parent)
{
this->setWindowTitle("T");
this->setToolTip("T");

set_up_widgets();
}

void MainWindow::paintEvent(QPaintEvent *event){
QPainter painter(this);
QPen pen(Qt::blue, 7, Qt::SolidLine, Qt::RoundCap);

int x = this->width() - 14;
int y = this->height() - 14;

int thirth_x = x / 3;
int thirth_y = y / 3;

painter.setPen(pen);

painter.drawLine(thirth_x, 0, thirth_x, y);
painter.drawLine(thirth_x * 2 + 14, 0, thirth_x * 2 + 14, y);
painter.drawLine(0, thirth_y, x, thirth_y);
painter.drawLine(0, thirth_y * 2 + 14, x, thirth_y * 2 + 14);

}

void MainWindow::set_up_widgets(){
lab1 = new ClickableLabel(this);
lab2 = new ClickableLabel(this);
lab3 = new ClickableLabel(this);
lab4 = new ClickableLabel(this);
lab5 = new ClickableLabel(this);
lab6 = new ClickableLabel(this);
lab7 = new ClickableLabel(this);
lab8 = new ClickableLabel(this);
lab9 = new ClickableLabel(this);

lay1 = new QHBoxLayout();
lay2 = new QHBoxLayout();
lay3 = new QHBoxLayout();

lay1->addWidget(lab1);
lay1->addWidget(lab2);
lay1->addWidget(lab3);

lay2->addWidget(lab4);
lay2->addWidget(lab5);
lay2->addWidget(lab6);

lay3->addWidget(lab7);
lay3->addWidget(lab8);
lay3->addWidget(lab9);

layout->addLayout(lay1);
layout->addLayout(lay2);
layout->addLayout(lay3);

setLayout(layout);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:13:44.203

你忘了初始化布局。

```
layout = new QVBoxLayout(); 
```

# javascript - tumblr 音频 + 无限滚动的砌体 - 发布的其他解决方案让我感到困惑

> ID：12434817
> 
> 赞同：0
> 
> 时间：2012-09-15T05:37:08.253
> 
> 标签：javascript, tumblr, jquery-masonry

> **可能重复：**
> [tumblr 音频/视频播放器 + 无限滚动的 Masonry](https://stackoverflow.com/questions/10165501/tumblr-audio-video-players-masonry-with-infinite-scroll)

[这就是我正在做的事情。一个 tumblr 博客主题](http://fabric-theme.tumblr.com/)，我遇到了类似的问题

> 一切都很好，除了音频播放器。它们不会加载到第二页并显示此消息 [需要 Flash 9 才能收听音频。]。

```
 <script type="text/javascript" >
     $(function(){

       var $container = $('#blog');

       $container.imagesLoaded(function(){
         $container.masonry({
           itemSelector: '.post',
                            columnWidth: 275,
                    gutterWidth: 10,
                        isAnimated: true,
                        animationOptions: {
                            duration: 750,
                            easing: 'linear',
                            queue: false,
                        } 
         });
       });

       $container.infinitescroll({
         navSelector  : '#page_nav',    // selector for the paged navigation
         nextSelector : '#page_nav a',  // selector for the NEXT link (to page 2)
         itemSelector : '.post',     // selector for all items you'll retrieve
         loading: {
             finishedMsg: 'No more pages to load.',
             img: 'http://i.imgur.com/6RMhx.gif'
           }
         },
         // trigger Masonry as a callback
         function( newElements ) {
           // hide new items while they are loading
           var $newElems = $( newElements ).css({ opacity: 0 });
           // ensure that images load before adding to masonry layout
           $newElems.imagesLoaded(function(){
             // show elems now they're ready
             $newElems.animate({ opacity: 1 });
             $container.masonry( 'appended', $newElems, true );
           });
         }
       );
     });
  </script> 
```

[该站点上的其他解决方案](https://stackoverflow.com/questions/10165501/tumblr-audio-video-players-masonry-with-infinite-scroll)说我需要在回调函数中使用音频修复，无论我尝试在上面的原始脚本中实现此代码的任何地方都会破坏砌体代码并弄乱网格布局。所以我问你是否可以帮助我，我正在使用音频播放器所在的 {PostID} `<div class="audio" id={PostID}>{AudioPlayerWhite}</div>`

像这样

```
 <div class="post audio">
        {block:AlbumArt}
        <img src="{AlbumArtURL}" width="100%" />
        {/block:AlbumArt}
        <div class="audio" id={PostID}>{AudioPlayerWhite}</div>
        {block:IfHideCaption}{block:Caption}
        <div class="caption">{Caption}</div>
        {/block:Caption}{/block:IfHideCaption}
        <br />
        <div class="tmbl-ico">
           <div class="my-like" data-reblog="{ReblogURL}" data-id="{PostID}" title="Like"></div>
           <div class="my-reblog"><a href="{ReblogURL}"><img src="http://static.tumblr.com/m3fp1tf/G3Wm7bksh/trans.png" /></a></div>
           <div class="my-plink"><a href="{Permalink}"><img src="http://static.tumblr.com/m3fp1tf/G3Wm7bksh/trans.png" /></a></div>
        </div> 
```

那么如何将它（其他解决方案中的以下代码）放入我的而不破坏它？我还想知道其他解决方案中的代码是否需要将变量更改为我自己的变量，以及可能是哪些变量，我对此很陌生。

# javascript - 获取覆盖的 getter 的值

> ID：12434821
> 
> 赞同：0
> 
> 时间：2012-09-15T05:37:42.527
> 
> 标签：javascript

我有这样的代码；

```
function A(){}
Object.defineProperties(A.prototype,{
    'propName' : {
        'get' : function(){
            return 'hallo';
        },
        'set' : function( p ){
            console.log( 'setting...' );
        }
    }    
 });

function B(){
    A.call( this )
}
B.prototype = Object.create( new A(), {
    'propName' : {
        'get' : function(){
            //do something than call getter of parent prototype
        },
        'set' : function( p ){
            //do something than call setter of parent prototype
        },
    }
}); 
```

是否可以调用 getter 或 setter 的原型，如果可以，如何调用？

问候……

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T10:41:20.340

对的，这是可能的。

```
B.prototype = Object.create(A.prototype, {
  'propName': {
    get: function () {
      var desc = Object.getOwnPropertyDescriptor(A.prototype, 'propName');
      var value = desc.get.call(this);
      return 'altered ' + value;
    }
  }
}); 
```

# asp.net-mvc-3 - MVC3 获取 Ajax 发布值

> ID：12434822
> 
> 赞同：1
> 
> 时间：2012-09-15T05:37:43.480
> 
> 标签：asp.net-mvc-3, jquery

在回发请求中，当我需要发布值时，我确实喜欢这样

```
[HttpPost]
public ActionResult Index()
{
    //i need to get values in here not in action method argument
    //i know this works but not like this --> ActionResult Index(string Name)

    string Name = Request.Form["Name"];
} 
```

但是在 ajax 请求中这不起作用，而且我找不到 mvc 存储 ajax 发布值的位置

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:51:47.463

我参加聚会有点晚了，但我将提供一个替代方案，允许您使用 Ajax 帖子/表单访问 Request.Form。这在 MVC 4 和 jQuery 1.9.1 中进行了测试。

如果控制器的 Request.Form 没有为您的 Ajax 帖子填充，可能是因为您手动序列化数据并将数据发送到 contentType 为的控制器`application/json`（常见场景）。

这是一个**不会**在控制器上填充 Request.Form 的 jQuery.ajax 示例。

```
 // JSON serialized form data.
    var data = {"id" : "1234", "name" : "Dave"};

    $.ajax({
        type: "POST",
        url: serviceUrl,
        contentType: "application/json",
        dataType: "json",
        data: JSON.stringify(data || {}),
        success: function () { }
    }); 
```

更改 contentType 将导致控制器像提交表单一样处理帖子。

```
 // Form encoded data.  See jQuery.serialize().
    var data = "id=1234&name=Dave";

    $.ajax({
        type: "POST",
        url: serviceUrl,
        contentType: "application/x-www-form-urlencoded; charset=UTF-8",
        dataType: "json",
        data: data,
        success: function () { }
    }); 
```

您也可以将 contentType 保留为未定义，因为`application/x-www-form-urlencoded; charset=UTF-8`它是 jQuery 的默认值。

我会注意到我只使用[$.ajax](http://api.jquery.com/jQuery.ajax/)来更好地说明正在发生的事情。您也可以使用[$.post](http://api.jquery.com/jQuery.post/)，尽管您仍然需要发送表单编码数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:40:39.433

ajax 发布的值不会出现在集合的请求中，但是您可以使用`ValueProvider`MVC 中的基础设施来获取您的 Ajax 发布的值：

```
[HttpPost]
public ActionResult Index()
{
    Name = ValueProvider.GetValue("Name").AttemptedValue;
} 
```

或者`Request.InputStream`包含所有发布的数据，您可以根据需要读取和取消轨道：

```
[HttpPost]
public ActionResult Index()
{
    var serializer = new JavaScriptSerializer();
    using (var streamReader = new StreamReader(Request.InputStream))
    {
        var data = (Dictionary<string,object>)serializer
                      .DeserializeObject(streamReader.ReadToEnd());
        //assuming your posted data looks like this: '{"Name": "test"}'
        string name = data["Name"].ToString();
    }
} 
```

但我强烈建议您不要与 MVC 基础架构作斗争，而是将数据作为您的操作参数：

```
[HttpPost]
public ActionResult Index(string name)
{

} 
```

# compression - 使用自定义标头创建 .7z 存档（创建 .unity3d 文件）

> ID：12434823
> 
> 赞同：0
> 
> 时间：2012-09-15T05:38:04.600
> 
> 标签：compression, unity3d

所以，我最近遇到了一个游戏的 .unity3d 文件，并使用工具将其解压缩。(http://en.unity3d.netobf.com/) 现在，我已经对游戏进行了调整，使其在本地服务器上运行，并且遇到了如何将文件压缩回来的问题到 .unity3d 文件中。我对该工具进行了逆向工程，并确定 .unity3d 文件是 LZMA 压缩文件（就像 .7z 存档一样），但标题是“UnityWeb”而不是“7z”。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T07:32:34.280

7z 是开源的。如果唯一的区别确实是该标头，则获取[源](http://sourceforge.net/projects/sevenzip/files/7-Zip/)文件，找到标头的位置，更改它并编译您自己的压缩实用程序。不过要注意描述标头和签名的其他常量（例如签名的长度）。我建议从文件 Xz.c 的第 9 行开始（定义`XZ_SIG`and `XZ_FOOTER_SIG`）。

# emacs - 多个 Emacs 服务器

> ID：12434828
> 
> 赞同：4
> 
> 时间：2012-09-15T05:38:43.947
> 
> 标签：emacs

我正在尝试按照[http://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html上的说明设置多个 Emacs 服务器](http://www.gnu.org/software/emacs/manual/html_node/emacs/Emacs-Server.html)

问题是 Mx set-variable server-name foo 启动后似乎对服务器名称没有影响，服务器仍然使用默认名称“server”注册。另外，我在守护程序模式下看不到服务器名称的选项。有什么想法有什么问题吗？

我正在使用 2011-06-07 版本的 GNU Emacs 23.3.1（x86_64-unknown-linux-gnu，X 工具包，Xaw3d 滚动条）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T06:03:09.423

您必须`server-name`在调用之前设置`server-start`。使用守护程序模式，您可以使用`--daemon=SERVERNAME`. 请参阅[http://www.gnu.org/software/emacs/manual/html_node/emacs/Initial-Options.html#Initial-Options](http://www.gnu.org/software/emacs/manual/html_node/emacs/Initial-Options.html#Initial-Options)

# php - 在 PHP 中延迟 10 分钟后执行代码

> ID：12434832
> 
> 赞同：3
> 
> 时间：2012-09-15T05:39:44.040
> 
> 标签：php, cron

我需要在事件（表单提交）后 10 分钟延迟 PHP 中某些代码的执行（例如；发送电子邮件）。

实现这一目标的最佳方法是什么？

我唯一的选择是每分钟运行一次 Cronjob 吗？这在共享主机上实用吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T05:45:51.637

使用 cronjobs 是最好的方法。

如果您不能在共享主机上使用 cronjob（询问客户支持），您可以在连接到 Internet 的机器（即您的家用计算机）上运行 cronjob，该机器运行 wget 到您服务器上的 php 页面，进行身份验证就可以了，然后运行 ​​php 代码来发送您的电子邮件。

对于 PHP 代码部分，我将使用一个包含所有要发送的电子邮件的数据库表、一个 creation_date 字段和一个状态字段。

作业调用的 PHP 代码将简单地执行（在伪代码中）：

```
$batchRecords = takeAbunchOfRecordsWhereStatus(NOT_SENT);
while($batchRecords) {
    if($creationDate + 10 minutes >= now()) {
        sendEmail();
        markRecordAsSent();
    }
} 
```

# javascript - 删除函数内的谷歌地图圆圈覆盖

> ID：12434837
> 
> 赞同：0
> 
> 时间：2012-09-15T05:40:17.907
> 
> 标签：javascript, google-maps, google-maps-api-3

我重做了这段代码，所以它更短，但基本上我试图用左键单击添加一个圆圈并用右键单击将其删除。radius.setMap(null) 仅在它不在函数内时才有效。

```
 <!DOCTYPE html>
    <html>
      <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
      html { height: 100%% }
      body { height: 100%%; margin: 0; padding: 0 }
      #map_canvas { height: 100%% }
    </style>
    <script type="text/javascript"
      src="http://maps.googleapis.com/maps/api/js?key=mykey&sensor=false">
    </script>
    <script type="text/javascript">
      var centerlatlng = new google.maps.LatLng(-27.467726,153.026633);
      function initialize() {
        var mapOptions = {
          center: centerlatlng,
          zoom: 16,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
            mapOptions);

        var marker = new google.maps.Marker({
                                            position: centerlatlng,
                                            map: map,
                                            title:"Hello World!"});   

        google.maps.event.addDomListener(map, 'click', updateCircle);
        google.maps.event.addDomListener(map, 'rightclick', removeRadius);

    function removeRadius(){
        radius.setMap(null);}

    function updateCircle(){
        var radius = new google.maps.Circle({map: map,
                                            radius: 400,
                                            center: centerlatlng,
                                            fillOpacity: 0});}      
    }

    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas" style="width:50%%; height:50%%"></div>
  <body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T05:48:20.227

您的半径变量是函数 updateCircle() 的本地变量。改为全球化。

```
//Global variables
var centerlatlng = new google.maps.LatLng(-27.467726,153.026633);
var radius;

function updateCircle(){
      // do not use the 'var' keyword here
        radius = new google.maps.Circle({map: map,
                                            radius: 400,
                                            center: centerlatlng,
                                            fillOpacity: 0});}      
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T05:53:22.893

**radius**是在函数中本地声明的`updateCircle()`，因此不能在`removeRadius()`.

如果您将声明从`updateCircle()`包含函数中移动`initialize()`，两者都`updateCircle()`将`removeRadius()`能够看到它而不使其成为全局；

```
function initialize() {
    var radius;
    var mapOptions = {...

    function updateCircle(){
        radius = new google.maps.Circle({map: map, ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T11:17:43.663

您可以在谷歌地图 V3 中使用它：

```
var shape=null;

google.maps.event.addDomListener(drawingManager, "circlecomplete", function(circle) {
    shape=circle;
}); 
```

在为此分配变量后，当您要删除此圆圈时，只需调用此函数：

```
function removeOverlay {
    shape.setMap(null);
} 
```

您只需将 google 返回的对象保存在特定变量中......

希望这会帮助你。

# c# - DDD 层 - 与实体的通信

> ID：12434839
> 
> 赞同：2
> 
> 时间：2012-09-15T05:40:53.613
> 
> 标签：c#, asp.net-mvc, mongodb, domain-driven-design

我开始使用 c# 在 asp.net mvc 中进行域驱动设计，并且我正在创建一个小型示例项目。我目前有一个用于我的域层、服务层、Web 以及控制台应用程序的项目。我也使用 mongodb 作为我的数据库。

目前，我的项目有组，这些组的人属于我有一个名为的类`Group`，并且`Person`在我的域层中类似于下面（简化）。`Group`并且`Person`还代表了集合`Group`在我的 mongodb 数据库中的样子。

```
public class Group
{
   public string Name { get; set; }
   public List<Person> People { get; set; }
}

public class Person
{
    public string FirstName { get; set; }
    public string LastName { get; set; }
} 
```

我理解它的方式是我的网站和我的控制台应用程序应该与我的服务层进行通信，它充当一种门面并且永远不应该看到域层？

我不确定的事情是在我的控制台应用程序或网站中，如果我想询问所有组的服务层，通常我希望我会要求类似的东西

```
var groupService = new GroupService();
List<Group> groups =  groupService.GetGroups(); 
```

除了在这种情况下作为我的组，并且人员类位于我的控制台应用程序和网站不知道的域层中，我无法请求列表，`Group`因为我的应用程序不知道 a`Group`是什么。

我的服务层是否应该将结果输出为其他内容，例如 Json，这取决于我的网站和控制台应用程序，或者说我是否有其他人可以访问的 api 来确定如何处理这些数据？还是我在这里弄混了什么？

编辑：

将来我计划在安卓应用程序中使用我的服务和域。我正在考虑使用宁静的服务。我不打算（在这个阶段）将它作为公共 API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T01:05:38.483

您的服务层将与数据传输对象进行通信，而不是域对象。域实体和数据传输对象之间的区别在于域实体具有行为，而数据传输对象 (DTO) 只是数据。

因此，回答您的问题：您的服务层将使用数据传输对象从您的控制台应用程序或您的网站获取命令和查询，并将它们转换为域实体。它将从域实体获取结果并将结果转换回 DTO。

单个域实体很可能根本不转换为 DTO，或者单个域实体转换为 10 个 DTO。这些是 2 个非常不同的 api，用于 2 个非常不同的目的。我的建议是开发你的领域层，然后在上面构建你的服务层，以根据客户端（控制台和 Web 应用程序）的需求进行通信。

# c++ - 获取直线未知端点的角度

> ID：12434842
> 
> 赞同：3
> 
> 时间：2012-09-15T05:41:23.787
> 
> 标签：c++, math, vector

**简洁版本：**

基本上，我正在尝试使用( )`Point C`的终点来计算未知数的 X 和 Y 值。`Line AB``Point B`

我尝试使用`atan2( B.y, B.x)`，但它给了我相对于`X-Axis`导致错误坐标的角度。我想我需要得到由( ) 构成的角度`Line BC`和假想的水平轴。有没有办法获得那个角度？如果获得那个角度不会做我想做的事，那会怎样？`Point B``Angle P`

**长版：**

我正在尝试使用 C++ 进行一些数学运算，但我遇到了这个特定问题。

我有两个向量，`Vector A`和`Vector B`（由`Point A`and说明`Point B`，它们形成`line AB`）。现在，我想得到`Vector C`( `Point C`)，它是`L`距离`Vector B`( 用`Line BC`) 表示的单位。

![案例 1：如果 By > Ay 则获取点](../Images/6605e79a47234800b950a89ed7c5af90.png)

我四处搜索，阅读了一些书，并得到了这个公式来得到我需要的观点。

```
/* Let:
 * L = length from B to C
 * ( B.x, B.y ) = start point
 * ( C.x, C.y ) = end point 
 * theta = angle respective to X-Axis ( using atan2( B.y, B.x ) )
 */

// To get C.x use formula cos( theta ) = ( C.x - B.x ) / L then derive
C.x = ( L * cos( theta ) ) + B.x;

// To get C.y use formula sin( theta ) = ( C.y - B.y ) / L then derive
C.y = ( L * sin( theta ) ) + B.y; 
```

但是，这不会导致`Point C`如上所示，因为结果`C`将与`X-Axis`. 在阅读了更多之后，我发现我需要得到（淡红色线）和假想的水平轴（蓝绿色线）`Angle P`之间的角度（用紫色表示） 。`Line BC``Point B`

另一个例子：

![案例 2：如果 By < Ay，则获取点](../Images/739ea146d5afa2c9b5e6249ba0486c46.png)

在这种情况下，使用上面的公式会导致`C`在错误的地方（上面`( X , 5 )`）

我不确定getting`Angle P`是否会做我想做的事，如果您知道更合适的答案，请这样做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T06:44:35.393

你不需要为此触发。这是简单的比例。我发现的方便规则是，如果您发现自己使用了 sin、cos*和*atan2，那么您可能做错了。

这是没有触发的方法

```
dx = B.x - A.x;
dy = B.y - A.y;
dist = sqrt(dx*dx + dy*dy);
C.x = B.x + L*(dx/dist);
C.y = B.y + L*(dy/dist); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T05:51:24.087

首先要做的是创建一个 tempB，就好像 A 是原点一样（这样你就可以找到 B 到 A 的角度等等）。

从 B 中减去 A 的值。

```
tempB.x = B.x - A.x
tempB.y = B.y - A.y 
```

然后你可以使用 atan2 和 sin/cos （你的公式）来获得 Cx 和 Cy

```
theta = atan2(tempB.y, tempB.x)
C.x = ( L * cos( theta ) ) + B.x;
C.y = ( L * sin( theta ) ) + B.y; 
```

另一种选择是获得 tempB 的单位向量。

```
magnitude = sqrt( pow(tempB.x,2) + pow(tempB.y,2))
unit.x = tempB.x/magnitude
unit.y = tempB.y/magnitude 
```

将此单位向量乘以 L 可以得到与 B 的偏移量。

```
C.x = B.x + unit.x * L
C.y = B.y + unit.y * L 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T07:33:22.940

您需要的（以向量形式）是`C = B + L*normalize(B-A)`. 如果您要进行更多此类计算，则值得使用向量库，以便您可以完全像这样编写代码。否则，您应该使用约翰的答案，它将相同的计算分解为其基本步骤。

编辑：这是一个你可以很容易使用的库（它只是头文件）：[GLM](http://glm.g-truc.net/)

# javascript - jQuery替换特定索引处的字符串

> ID：12434846
> 
> 赞同：0
> 
> 时间：2012-09-15T05:42:05.310
> 
> 标签：javascript, jquery, arrays, string

[好的，这与我之前](https://stackoverflow.com/questions/12434122/jquery-malipulate-a-subarray-and-return-a-new-array-using-each-map)的问题非常相关，但仍然（因此您不必前往该页面..）

我有一个格式为的字符串

```
ItemName1:Rate1:Tax1_ItemName2:Rate2:Tax2:_ItemName3:Rate3:Tax3_ItemName4:Rate4:Tax4 
```

用户将传递 4 个 args，首先将告诉该列表何时被分割时要取哪个元素，`_`其他 3 个将告诉项目的新值。
例如，如果用户通过`2, Denim Jeans, 399.00, 14.34`. 原来的字符串会变成

```
ItemName1:Rate1:Tax1_ItemName2:Rate2:Tax2:_Denim Jeans:399.00:14.34_ItemName4:Rate4:Tax4 
```

首先拆分 at `_`，获取 index 处的元素`2`（用户提供的值），然后拆分该元素，`:`然后用提供的值替换这些项目。

我得到了很多，这里是[jsfiddle](http://jsfiddle.net/k87Zw/3/)。但我只是停留在最后一部分，将进行适当的连接。
可以帮忙请帮我做最后一个功能吗？

*编辑*：更新了小提琴！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T08:15:36.713

这里有几件事......

不确定为什么要将列表作为字符串。使用 json 对象会更好。

在您的示例中，您将获得所需格式的第二个字符串..因此将其拆分并再次加入是没有意义的..您只需用 argList 替换数组项

这是修改后的jsfile。希望我能正确理解你的问题。告诉我是否有任何差距... [http://jsfiddle.net/k87Zw/5/](http://jsfiddle.net/k87Zw/5/)

# c# - MDI父窗体面板控件添加子窗体

> ID：12434847
> 
> 赞同：0
> 
> 时间：2012-09-15T05:42:09.813
> 
> 标签：c#, winforms, mdiparent

我在 C# 中的桌面应用程序中工作。我有一个 MDI 父窗体，它具有用于在其中添加子窗体的面板控件。我有 2 个孩子的表格：

```
 1\. ChildForm1
  2\. ChildForm2 
```

`Childform2`从`childform1`.

从 MDI 表单我将 childform1 添加到面板控件，知道我也想将 childform2 添加到 mdi 表单面板控件。当我单击 childform1 上的按钮时，必须从 mdi 表单面板控件中删除 childform1，并将 childform2 添加到 mdi 表单面板控件中。

如何解决这个问题呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:15:04.913

您首先通过将 ChildForm1 的引用传递给 ChildForm2 从 ChildForm1 打开 ChildForm2

```
 ChildForm2 objChildForm2 = new ChildForm2(this);
 objChildForm2.MdiParent = this.MdiParent;
 objChildForm2.Show(); 
```

现在转到您的 ChildForm2 并添加参数化构造函数，同时创建 ChildForm1 的全局对象

```
ChildForm1 objChildForm1 = null;

 public ChildForm2(ChildForm1 obj)
    {
        InitializeComponent();

        objChildForm1 = obj; // Passing refrence of ChildForm1
        obj.Hide(); // this will hide the ChildForm1
    } 
```

现在，当您的 ChildForm2 打开时，将调用上述参数化构造函数，它将隐藏您的 ChildForm1。您也可以在 ChildForm2 关闭时重新打开您的 ChildForm1。为此编写以下代码。

```
 private void btnClose_Click(object sender, EventArgs e)
    {

        objChildForm1.Show();// you can access all public members of ChildForm1 by the Global   //object "objChildForm1"
        this.Close();
    } 
```

# ruby - 在 gemspec 中添加多个 gem 依赖项

> ID：12434848
> 
> 赞同：5
> 
> 时间：2012-09-15T05:42:23.553
> 
> 标签：ruby, rubygems, gem, gemspecs

你们如何将多个开发/运行时依赖项添加到您的 gemspec 中？

这就是我这样做的方式：

```
spec.add_development_dependency 'example1', '~> 1.1', '>= 1.1.4'
spec.add_development_dependency 'example2', '~> 1.1', '>= 1.1.4' 
```

但我想知道是否有其他方法可以做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-12-23T20:44:12.133

从[这里查看](https://docs.ruby-lang.org/en/2.5.0/Gem/Specification.html#method-i-add_runtime_dependency)Gem 规范， 选择是：

`add_dependency`, `add_runtime_dependency`, `add_development_dependency`,`add_dependency_with_type`

# codeigniter - CodeIgniter 会话问题

> ID：12434856
> 
> 赞同：0
> 
> 时间：2012-09-15T05:43:10.430
> 
> 标签：codeigniter

我在控制器功能中设置会话，例如

```
$search = array(
    'search_count' => count($data['result']),
    'projectInfo' => $data['result']
    );

$this->session->set_userdata($search); 
```

其中 $data['result'] 是一个数组；

但是如果我尝试在同一个控制器的其他功能中访问这个变量，它什么也不会显示：

```
print_r($this->session->userdata('projectInfo')); 
```

虽然使用`print_r($this->session->userdata('search_count'));`它显示正确的价值。

此外，如果我`print_r($this->session->all_userdata());`在同一个控制器的第二个函数中使用它不会显示我已经在第一个函数中设置的数组值索引

```
 Array
(
    [session_id] => 4adf3a42ee64ffca2b2f273cb293a10a
    [ip_address] => 127.0.0.1
    [user_agent] => Mozilla/5.0 (Windows NT 6.1; WOW64; rv:15.0) Gecko/20100101 Firefox/15.0.1
    [last_activity] => 1347689522
    [user_data] => 
) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T11:42:11.537

如果我是正确的，您不能在不先[序列化](http://php.net/manual/en/function.serialize.php)它们的情况下将数组保存到会话中。

```
$search = array(
    'search_count' => count($data['result']),
    'projectInfo' => $data['result']
    );

$this->session->set_userdata($search); 
```

变成：

```
$search = array(
    'search_count' => count($data['result']),
    'projectInfo' => serialize($data['result'])
    );

$this->session->set_userdata($search); 
```

现在，如果要检索数组：

```
$data = unserialize($this->session->userdata('projectInfo'));
print_r($data); 
```

请注意，当您在会话中设置大量数据时，您应该使用数据库来存储会话。

配置文件

```
$config['sess_use_database']    = TRUE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-01T06:17:08.737

谢谢我添加了原生 PHP 会话类

# ios - CCDrawLine 在第一次后不断崩溃应用程序

> ID：12434859
> 
> 赞同：0
> 
> 时间：2012-09-15T05:44:00.860
> 
> 标签：ios, cocos2d-iphone

在一个应用程序中，使用 cocos2d iOS`CCDrawline`来绘制一条线。它总是第一次运行，但是，当游戏退出并重新进入第二次时，应用程序总是会在`CCDrawline`. 注释掉应用程序就可以了。

```
@implementation Hook

- (void)draw { 
    [super draw];
    ccDrawColor4F(14.0/255.0,118.0/255.0,188.0/255.0,1.0f);
    ccDrawLine(ccp(self.contentSize.width - 15, self.contentSize.height), ccp(253 - self.position.x,459 - self.position.y));
} 

@end

-(void)Fishing
{              // Create the hook
    Hook *hook = [Hook spriteWithTexture:[[CCTextureCache sharedTextureCache] textureForKey:@"hook2_small.png"]];
    hook.position = ccp(self.fishToCatch.position.x, self.fishToCatch.position.y - 10); 
    [self addChild:hook];
    .....
} 
```

# windows - 在 Windows 关机时执行批处理脚本

> ID：12434863
> 
> 赞同：40
> 
> 时间：2012-09-15T05:45:33.607
> 
> 标签：windows, batch-file, windows-7, shutdown, group-policy

当用户单击“关闭”时，有什么方法`Windows 7 Professional`可以运行批处理脚本（例如，.BAT 文件）（不是计划关闭机器的批处理文件，只有当用户单击时才会运行“关闭”）？

理想情况下，这样的脚本将显示命令提示符窗口并提供取消关机过程的选项。

不需要第三方实用程序的解决方案会更好。

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2012-09-15T05:56:46.270

您可以在 Windows 上创建本地计算机策略。[请参阅http://technet.microsoft.com/en-us/magazine/dd630947](http://technet.microsoft.com/en-us/magazine/dd630947)上的 TechNet

1.  运行`gpedit.msc`以打开组策略编辑器，
2.  导航到**计算机配置 | Windows 设置 | 脚本（启动/关闭）**。

![在此处输入图像描述](../Images/e646225d2dc3e8d44b06bf46b42b9a49.png)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-12-08T06:52:27.477

好吧，这是一种进行一些注册表更改的简单方法：我在**2008 r2**和**2016**服务器上尝试过。

需要做的事情：

1.  创建一个文本文件“ **regedit.txt** ”
2.  在其中粘贴以下代码：

```
Windows Registry Editor Version 5.00 

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Group Policy\State\Machine\Scripts]

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Group Policy\State\Machine\Scripts\Shutdown] 

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Group Policy\Scripts\Shutdown]     

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Group Policy\State\Machine\Scripts\Shutdown\0]  
"GPO-ID"="LocalGPO"    
"SOM-ID"="Local"    
"FileSysPath"="C:\\Windows\\System32\\GroupPolicy\\Machine"    
"DisplayName"="Local Group Policy"    
"GPOName"="Local Group Policy"    

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Group Policy\State\Machine\Scripts\Shutdown\0\0]    
"Script"="terminate_script.bat"    
"Parameters"=""    
"ExecTime"=hex(b):00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00    

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Group Policy\Scripts\Shutdown\0]
"GPO-ID"="LocalGPO"    
"SOM-ID"="Local"    
"FileSysPath"="C:\\Windows\\System32\\GroupPolicy\\Machine"    
"DisplayName"="Local Group Policy"    
"GPOName"="Local Group Policy"

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Group Policy\Scripts\Shutdown\0\0]    
"Script"="terminate_script.bat"    
"Parameters"=""
"IsPowershell"=dword:00000000
"ExecTime"=hex(b):00,00,00,00,00,00,00,00,00,00,00,00,00,00,00,00 
```

3.  将此文件另存为**regedit.reg**扩展名

4.  使用以下命令在任何命令行上运行它：

    ```
    regedit.exe /s regedit.reg 
    ```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-06-27T15:43:09.413

创建您自己的关闭脚本 - 称为 Myshutdown.bat - 并在脚本中执行您要执行的任何操作，然后在它结束时调用shutdown /a。然后执行你的bat文件而不是正常关机。

（有关更多信息，请参阅[http://www.w7forums.com/threads/run-batch-file-on-shutdown.11860/](http://www.w7forums.com/threads/run-batch-file-on-shutdown.11860/)。）

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2018-03-01T10:01:29.790

我在搜索启动和关闭 Windows 10 的运行脚本时发现了这个主题。上面的那些答案不起作用。对我来说，当我将脚本放入任务计划程序时，Windows 10 上的工作。如何做到这一点：按窗口键并编写任务计划程序，打开它，然后右侧是添加任务...按钮。在这里您可以添加脚本。PS：我找到了启动和注销用户的操作，没有关闭。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2020-11-11T15:10:44.087

这可以通过[SCHTASKS](https://ss64.com/nt/schtasks.html)以编程方式实现：

```
SCHTASKS /Create /SC ONEVENT /mo "Event[System[(EventID=1074)]]" /EC Security /tn on_shutdown_normal /tr "c:\some.bat" 

SCHTASKS /Create /SC ONEVENT /mo "Event[System[(EventID=6006)]]" /EC Security /tn on_shutdown_6006 /tr "c:\some.bat" 

SCHTASKS /Create /SC ONEVENT /mo "Event[System[(EventID=6008)]]" /EC Security /tn on_shutdown_6008 /tr "c:\some.bat" 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-03-13T02:42:32.333

为使上述代码起作用；您需要确保以下目录存在（我的没有）。只需将以下内容添加到 bat 并运行它：

```
mkdir C:\Windows\System32\GroupPolicy\Machine\Scripts\Startup
mkdir C:\Windows\System32\GroupPolicy\Machine\Scripts\Shutdown
mkdir C:\Windows\System32\GroupPolicy\User\Scripts\Startup
mkdir C:\Windows\System32\GroupPolicy\User\Scripts\Shutdown 
```

只是 GP 需要这些目录存在于：

```
Group Policy\Local Computer Policy\Windows Settings\Scripts (Startup/Shutdown) 
```

正常运作。

# c# - 后 ”。” 输入的值必须仅在文本框中用两位数字替换“00”

> ID：12434868
> 
> 赞同：1
> 
> 时间：2012-09-15T05:46:27.223
> 
> 标签：c#, keyboard-events

可能是我的问题似乎不是一个好问题，但这里是描述：我正在以一种形式创建一个应用程序我有一个文本框正在接受用户的输入这是我的代码

```
private void Form1_Load(object sender, EventArgs e)
{
    textBox1.Text = string.Format("{0:0.##}", "0.00");
} 
```

这将在页面加载时的文本框中显示值：**0.00** 现在，如果我点击键盘的退格按钮然后

```
if (e.KeyChar.ToString() == ".")
{
    e.Handled = true;
    int b = textBox1.Text.LastIndexOf("00");
    textBox1.SelectionStart = b;
}
else
{
    string abc = "0";
    string a = textBox1.Text.TrimStart(abc.ToCharArray());
    textBox1.Text = a;
} 
```

这段代码将引导我到这里文本框现在有：**.00**，但在此之后当我输入一些值时，它会将值作为；2334.3423424 但我想做 2334.34 这意味着值应该只替换**.00**并且用户不能在此之后输入值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:10:40.123

这段代码将限制您的用户在文本框中仅输入小数点后 2 位数字。

```
 //In key press event:
    if (e.KeyChar == '.' && (sender as TextBox).Text.IndexOf('.') > -1)
    {
        e.Handled = true;
    }
    if (!char.IsControl(e.KeyChar))
    {
        TextBox tt = (TextBox)sender;
        if (tt.Text.IndexOf('.') > -1 && tt.Text.Substring(tt.Text.IndexOf('.')).Length >= 3)
         {
           e.Handled = true;
         }
     } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:05:30.073

如果您的意思是要将数字四舍五入到小数点后两位，请使用[`Math.Round(Double, Int32)`](http://msdn.microsoft.com/en-us/library/75ks3aby%28v=vs.100%29.aspxour)函数。

在你的情况下，你可以打电话

```
double value = Convert.ToDouble(textBox1.Text);
double finalValue = Math.Round(value, 2);
textBox1.Text = finalValue.ToString(); 
```

还要确保验证用户输入并确保用户只输入数值。

# android - 为什么我不能通过外部 jar 使用 webservice 方法？我必须把那个jar文件放在哪里？

> ID：12434871
> 
> 赞同：1
> 
> 时间：2012-09-15T05:47:47.737
> 
> 标签：android, web-services, jar, axis2

我必须部署 Web 服务，它在我的 android 程序中公开两种 java 应用程序方法并返回一些字符串值。我正在使用 Axis2 Web 服务将我的 java 方法用作来自 android 的 Web 服务，而在 android 中我使用 ksoap2 来调用 java 的 Web 服务方法。问题是我的 java 方法之一是使用一些外部库来处理一些有用的信息并返回字符串作为输出。我已经在不使用 Web 服务的情况下测试了该方法，并且效果很好。我将我正在使用的 3 个外部 jar 放在 lib 文件夹中，甚至尝试将该 jar 文件放在 src 文件夹中并分别引用，但不知何故它给了我一个错误。我不知道如何解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T07:16:27.403

我已经解决了这个问题，在项目中添加 lib 文件夹，然后在该文件夹中添加所有必要的 jar，然后我将该 jar 添加到构建路径。

# java - 具有相对不错的 contains() 解决方案的最小 java 结构

> ID：12434877
> 
> 赞同：0
> 
> 时间：2012-09-15T05:49:21.447
> 
> 标签：java, memory, data-structures, hardy-ramanujan

好吧，这是内幕：我正在用 Java 编写一个类，它可以找到第 N 个[Hardy 的出租车号码](http://en.wikipedia.org/wiki/Taxicab_number)（一个可以由两组不同的两个立方数相加的数字）。我有发现本身，但我迫切需要节省一些空间。为此，我需要尽可能小的数据结构，以便我可以相对轻松地使用或创建像 contains() 这样的方法。我并不特别担心速度，因为我目前的解决方案当然可以让它在时间限制内很好地计算。

简而言之，数据结构需要：

*   为了能够相对简单地实现一个 contains() 方法
*   ***使用少量内存***
*   能够存储大量条目
*   易于与原始长类型一起使用

有任何想法吗？我从哈希图开始（因为我需要测试导致总和的值以确保准确性），然后在我保证可靠答案后转移到哈希集。

任何其他关于如何节省空间的一般想法将不胜感激！

我认为您不需要代码来回答问题，但如果您好奇的话，这里是：

```
public class Hardy {
//  private static HashMap<Long, Long> hm;

/**
 * Find the nth Hardy number (start counting with 1, not 0) and the numbers
 *      whose cubes demonstrate that it is a Hardy number.
 * @param n
 * @return the nth Hardy number
 */
public static long nthHardyNumber(int n) {
//      long i, j, oldValue;
    int i, j;
    int counter = 0;
    long xyLimit = 2147483647; // xyLimit is the max value of a 32bit signed number
    long sum;
//      hm = new HashMap<Long, Long>();
    int hardyCalculations = (int) (n * 1.1);
    HashSet<Long> hs = new HashSet<Long>(hardyCalculations * hardyCalculations, (float) 0.95);
    long[] sums = new long[hardyCalculations];

//      long binaryStorage, mask = 0x00000000FFFFFFFF;

        for (i = 1; i < xyLimit; i++){
            for (j = 1; j <= i; j++){
//                  binaryStorage = ((i << 32) + j);
//                  long y = ((binaryStorage << 32) >> 32) & mask;
//                  long x = (binaryStorage >> 32) & mask;

                sum = cube(i) + cube(j);
                if (hs.contains(sum) && !arrayContains(sums, sum)){
//                      oldValue = hm.get(sum);
//                      long oldY = ((oldValue << 32) >> 32) & mask;
//                      long oldX = (oldValue >> 32) & mask;
//                      if (oldX != x && oldX != y){
                    sums[counter] = sum;
                    counter++;
                    if (counter == hardyCalculations){
//                          Arrays.sort(sums);
                        bubbleSort(sums);
                        return sums[n - 1];
                    }
                } else {
                    hs.add(sum);
                }
            }
        }
        return 0;
}

private static void bubbleSort(long[] array){
    long current, next;
    int i;
    boolean ordered = false;

    while (!ordered) {
        ordered = true;
        for (i = 0; i < array.length - 1; i++){
            current = array[i];
            next = array[i + 1];
            if (current > next) {
                ordered = false;
                array[i] = next;
                array[i+1] = current;
            }
        }
    }
}

private static boolean arrayContains(long[] array, long n){
    for (long l : array){
        if (l == n){
            return true;
        }
    }
    return false;
}

private static long cube(long n){
    return n*n*n;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:09:52.517

您是否考虑过使用标准树？在 java 中，这将是一个`TreeSet`. 通过牺牲速度，树通常会比散列获得更多空间。

就此而言，`sums`可能是`TreeMap`将线性`arrayContains`转换为对数运算。顺其自然，以后也不用再重新排序了。

**编辑**

对使用 java 树结构的抱怨`sums`是 java 的树类型不支持 k-select 算法。假设 Hardy 数字很少见，也许您不需要担心这个容器的复杂性（在这种情况下，您的数组很好。）

如果您确实需要提高这方面的时间性能，您可以考虑使用启用选择的树，例如[此处](https://stackoverflow.com/questions/8856815/how-to-return-the-kth-element-in-treeset-in-java)提到的树。然而，该解决方案通过增加空间需求而不是降低空间需求来起作用。

或者，我们可以逐步丢弃我们知道不需要的 Hardy 数字。假设在算法运行期间，`sums`已经包含`n`哈代数，我们发现了一个新数。我们插入它并做任何我们需要保持集合顺序的事情，因此现在包含已`n+1`排序的元素。

考虑最后一个元素。我们已经知道`n`较小的哈代数，因此最后一个元素不可能是我们的答案。为什么要保留它？在这一点上，我们可以`sums`再次缩小到大小`n`并扔掉最大的元素。这既节省了空间，又节省了时间，因为我们要按排序顺序维护的元素更少。

该方法的自然数据结构`sums`是[最大堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)。在[java](https://stackoverflow.com/questions/1098277/java-implementation-for-min-max-heap)中没有可用的本地实现，但有一些第 3 方的实现。你可以“让它工作” `TreeMap::lastKey`，它最终会慢一些，但仍然比 quadratic 快`bubbleSort`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-03T06:15:04.523

这是查找给定数字是否为 HR 数字的核心功能：它在 C 中，但应该明白这一点：

```
bool is_sum_of_cubes(int value)
    {
    int m = pow(value, 1.0/3);
    int i = m;
    int j = 1;

    while(j < m && i >= 0)
        {
        int element = i*i*i + j*j*j;
        if( value == element )
            {
            return true;
            }
        if(element < value)
            {
            ++j;
            }
        else
            {
            --i;
            }
        }

    return false;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-19T21:09:42.887

如果您有非常多的元素，并且您实际上想要一个索引来允许快速测试底层数据集中的包含，那么看看[Bloom Filters](http://en.wikipedia.org/wiki/Bloom_filter)。这些是节省空间的索引，其唯一目的是实现数据集中包含的快速测试。

布隆过滤器是概率性的，这意味着如果它们为包含返回 true，那么您实际上需要检查您的基础数据集以确认该元素确实存在。

如果它们返回 false，则保证该元素不包含在基础数据集中，在这种情况下，包含测试将非常便宜。

因此，这取决于您在大多数情况下是否期望候选人真正包含在数据集中。

# java - 静态方法总是同时返回

> ID：12434879
> 
> 赞同：1
> 
> 时间：2012-09-15T05:49:28.017
> 
> 标签：java, date, static-methods

我想在我的 Util 类中创建一个静态方法，它将以日期格式返回当前时间。所以我尝试了下面的代码，但它总是同时返回。

```
private static Date date = new Date();
private static SimpleDateFormat timeFormatter= new SimpleDateFormat("hh:mm:ss a");

public static String getCurrentDate() {
    return formatter.format(date.getTime());
} 
```

如何在不创建 Util 类实例的情况下以我的特定格式获取更新时间。是否可以。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T05:52:47.047

由于您重复使用相同的 Date 对象，您总是得到相同的时间。Date 对象是在解析类时创建的。要获取每次使用的当前时间：

```
private static SimpleDateFormat timeFormatter= new SimpleDateFormat("hh:mm:ss a");

public static String getCurrentDate() {
    Date date = new Date();
    return timeFormatter.format(date);
} 
```

甚至

```
public static String getCurrentDate() {
    Date date = new Date();
    SimpleDateFormat timeFormatter= new SimpleDateFormat("hh:mm:ss a");
    return timeFormatter.format(date);
} 
```

因为 SimpleDateFormat 不是线程安全的。

由于您只需要当前时间，因此甚至不需要创建新日期。

```
public static String getCurrentDate() {
    SimpleDateFormat timeFormatter= new SimpleDateFormat("hh:mm:ss a");
    return timeFormatter.format(System.currentTimeMillis());
} 
```

如果您只想要输出而不是解析能力，您可以使用

```
public static String getCurrentDate() {
    return String.format("%1$tr", System.currentTimeMillis());
} 
```

# selenium-webdriver - 我使用的链接文本中的 xpath 选择器不起作用。

> ID：12434881
> 
> 赞同：0
> 
> 时间：2012-09-15T05:49:32.917
> 
> 标签：selenium-webdriver

我使用 xpath 选择器使用了下面的代码。但它不工作。请指导我谁知道这个问题以及我在这个代码中犯了错误的地方。

```
from selenium import webdriver
from selenium.webdriver.common.by import By
from selenium.webdriver.support.ui import Select
from selenium.common.exceptions import NoSuchElementException
import unittest, time, re

class CGBrowseJobs(unittest.TestCase):
 def setUp(self):
    self.driver = webdriver.Firefox()
    self.driver.implicitly_wait(30)
    self.base_url = "http://www.ionface.com/"
    self.verificationErrors = []

 def test_c_g_browse_jobs(self):
    driver = self.driver
    driver.get(self.base_url + "/")
    driver.find_element_by_link_text("Career Grab").click()
    driver.find_element_by_xpath("//a[text()='Browse Jobs']/@href").click()

 def is_element_present(self, how, what):
    try: self.driver.find_element(by=how, value=what)
    except NoSuchElementException, e: return False
    return True

 def tearDown(self):
    self.driver.quit()
    self.assertEqual([], self.verificationErrors)

if __name__ == "__main__":
   unittest.main() 
```

`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-17T12:11:50.750

您已经在 XPath 中包含了**@href**属性，请改用它：

```
driver.find_element_by_xpath("//a[text()='Browse Jobs']").click() 
```

Selenium 不需要直接提供链接（例如使用**@href**属性）。给它一个完整的元素，让它为你挑选出 URL。

# r - 检测循环中的错误

> ID：12434885
> 
> 赞同：2
> 
> 时间：2012-09-15T05:50:15.577
> 
> 标签：r, error-handling

以下：

```
install.packages("quantreg")
require(quantreg)

y=rnorm(10)
x=rnorm(10)

summary(rq(y~x,tau=0.01),se="ker") 
```

生成错误`Error in summary.rq(rq(y ~ x, tau = 0.01), se = "ker") : tau - h < 0: error in summary.rq`。

假设我循环了不同`y`的`x`1000 次。我希望能够知道错误何时发生并实施修复中间循环。

`summary(rq(y~x,tau=0.01),se="ker")`但是，我所有使用`is()`etc的尝试都没有成功。我以前从未使用过这种对象类型（而且 Google/SE 搜索还没有揭示答案）。

我想要类似的东西`is.error(summary(rq(y~x,tau=0.01),se="ker"))`，实际上并不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:00:33.843

详细说明@SvenHohenstein 的答案，希望返回成功评估的结果，而不仅仅是是否发生错误。我们可能还想使用返回错误消息的原因`conditionMessage`。我们想捕获 class 的错误`simpleError`，所以我们编写了一个特定于该类型条件的处理程序。所以

```
error <- FALSE              # no error yet
result <- tryCatch({        # result from summary(), or from the error handler
    summary(rq(y ~ x,tau = 0.01),se = "ker")
}, simpleError = function(e) {  # only catch simpleErrors
    error <<- TRUE      # yes, error occurred
    conditionMessage(e) # 'result' gets error message
}) 
```

然后我们会返回`list(x = x, y = y, error=error, result=result)`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T07:36:18.423

以下命令将返回一个逻辑值，指示是否发生错误：

```
class(tryCatch(summary(rq(y ~ x,tau = 0.01),se = "ker"),
               error = function(e) e))[1] == "simpleError" 
```

您可以使用`replicate`而不是 for 循环。它更有效。在以下示例中，返回一个包含`x`、`y`和逻辑`error`值的列表。该过程重复两次。您可以使用`n = 1000`它来复制它 1000 次。

```
replicate(n = 2,
          expr = {y <- rnorm(10);
                  x <- rnorm(10);
                  error <- class(tryCatch(summary(rq(y ~ x,tau = 0.01),se = "ker"), error = function(e) e))[1] == "simpleError";
                  return(list(x = x, y = y, error = error))},
          simplify = FALSE) 
```

# c# - 连接到服务器，保持连接，并在连接丢失时继续重试？

> ID：12434886
> 
> 赞同：2
> 
> 时间：2012-09-15T05:50:35.583
> 
> 标签：c#, sockets, networking

我希望我的客户端应用程序连接到我的服务器应用程序，并在连接丢失时不断尝试重新连接。

我目前正在尝试使用计时器每秒检查一次连接，首先尝试使用 NetworkStream.Write 发送数据包，然后检查 TcpClient.Connected，但它似乎不起作用。客户端断开连接后，TcpClient.Connected 永远不会返回 false。

这样做的最简单方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T05:56:32.127

如果连接关闭，它应该抛出异常。您可以抓住它并重新打开连接。`TcpListener`这是我在连接一段时间后关闭的异常`TcpClient`。

```
System.Net.Sockets.SocketException: An existing connection was forcibly closed by the remote host 
```

**编辑：** 这是您如何不断重新尝试连接的示例。请注意，根据您的情况，您可能需要一个计数器或计时器，以便它不会永远重试。

```
public class PersistantTcpClient
{
    TcpClient Client { get; set }

    public void Start()
    {
        while (true)
        {
             try
             {
                this.Client.Connect("host", port)

                // once it can connect, get back to work!
                DoWork();
             }
             catch (SocketException)
             {
                // if it cannot connect, keep trying
             }
        }
    }
} 
```

# project-management - 如何在新项目中进行时间估算

> ID：12434893
> 
> 赞同：0
> 
> 时间：2012-09-15T05:51:56.753
> 
> 标签：project-management, time-estimation

我是这个职责的新手，但是我作为软件开发人员分析了许多项目并给出了任务的时间估计。

但是，当您是团队负责人并且不了解您的开发人员技能时，这很困难。因为有时它需要研发的东西。所以当时不要判断估计。

还有一些可用的模型，如“COCOMO 模型”。

但是使用这种模型或任何其他技术来更好地估计时间是否可行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:36:07.263

向每个程序员描述任务并让他给出三遍。他们每个人认为团队需要多长时间。

超快时间、可能时间和最坏情况时间。

为所有程序员做以下总和

1 * 超 + 3 * 可能 + 1 * 最差

被除以

（程序员人数*5）

将此作为您的估计。

# android - 为什么会发生此错误？java.lang.RuntimeException：ImageLoader 在使用前必须通过配置初始化

> ID：12434895
> 
> 赞同：12
> 
> 时间：2012-09-15T05:51:58.497
> 
> 标签：android, adapter, runtimeexception

我已经从 gitHub 下载了一个 ImageDownloader 代码（[从 Here](https://github.com/nostra13/Android-Universal-Image-Loader)）现在，当我尝试从我的 web 服务下载图像时，我得到了这个运行时异常“ImageLoader must be init with configuration before using”。

我无法弄清楚。

这是我的适配器：

```
public class CustomAdapter extends BaseAdapter 
{
    private Context context;
    private ArrayList<String> logo_URL;

    private ListContent listContent;
    private ArrayList< TeamDataClass> teamdata = null;
    private ArrayList<EventDataClass> eventdata = null;
    private DisplayImageOptions options;
    private ImageLoader imageLoader;

    public CustomAdapter(Context context,ArrayList<String> logo_URL,ArrayList<TeamDataClass> teamdata, ArrayList<EventDataClass> eventdata) 
    {
        this.context = context;
        this.logo_URL = logo_URL;
        this.teamdata = teamdata;
        this.eventdata = eventdata;
        options = new DisplayImageOptions.Builder()
        .showImageForEmptyUri(R.drawable.image_for_empty_url)
        .cacheOnDisc()
        .imageScaleType(ImageScaleType.EXACT)
        .build();
        imageLoader= ImageLoader.getInstance();
    } 

    //@Override
    public int getCount() 
    {
        return teamdata.size()/2;
    }

    //@Override
    public Object getItem(int arg0) 
    {
        return arg0;
    }

    //@Override
    public long getItemId(int arg0) 
    {
        return arg0;
    }

    //@Override
    public View getView(int arg0, View convertview, ViewGroup arg2) 
    {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        if (convertview == null ) 
        {
            convertview = inflater.inflate(R.layout.custom_list_score, null);
            listContent = new ListContent();
            listContent.team_logo2 = (ImageView) convertview.findViewById(R.id.team_logo2);
            listContent.team_logo1 = (ImageView) convertview.findViewById(R.id.team_logo1);
            listContent.progress_team1=(ProgressBar)convertview.findViewById(R.id.progress_team_logo1);
            listContent.progress_team2=(ProgressBar)convertview.findViewById(R.id.progress_team_logo2);

            convertview.setTag(listContent);
        }
        else 
        {
            listContent = (ListContent) convertview.getTag();
        }
        listContent.status.setText(eventdata.get(arg0).status);
        int pos=arg0*2;
        imageLoader.displayImage(logo_URL.get(pos),listContent.team_logo1, options,new ImageLoadingListener() 
        {
            //@Override
            public void onLoadingStarted()
            {
                listContent.progress_team1.setVisibility(View.VISIBLE);
            }

            //@Override
            public void onLoadingFailed(FailReason failReason)
            {
                String message = null;
                switch (failReason) 
                {
                    case IO_ERROR:
                        message = "Input/Output error";
                        break;
                    case OUT_OF_MEMORY:
                        message = "Out Of Memory error";
                        break;
                    case UNKNOWN:
                        message = "Unknown error";
                        break;
                }
                Toast.makeText(context, message, Toast.LENGTH_SHORT).show();

                listContent.progress_team1.setVisibility(View.GONE);
                listContent.team_logo1.setImageResource(android.R.drawable.ic_delete);
            }

            //@Override
            public void onLoadingComplete(Bitmap loadedImage)
            {
                listContent.progress_team1.setVisibility(View.GONE);
                Animation anim = AnimationUtils.loadAnimation(context, R.anim.fade_in);
                listContent.team_logo1.setAnimation(anim);
                anim.start();
            }

            //@Override
            public void onLoadingCancelled()
            {
                // Do nothing
            }

            public void onLoadingComplete() {

            }
        }); 
        imageLoader.displayImage(logo_URL.get(pos+1),listContent.team_logo2, options,new ImageLoadingListener() 
        {
            //@Override
            public void onLoadingStarted()
            {
                listContent.progress_team2.setVisibility(View.VISIBLE);
            }

            //@Override
            public void onLoadingFailed(FailReason failReason)
            {
                String message = null;
                switch (failReason) 
                {
                    case IO_ERROR:
                        message = "Input/Output error";
                        break;
                    case OUT_OF_MEMORY:
                        message = "Out Of Memory error";
                        break;
                    case UNKNOWN:
                        message = "Unknown error";
                        break;
                }
                Toast.makeText(context, message, Toast.LENGTH_SHORT).show();

                listContent.progress_team2.setVisibility(View.GONE);
                listContent.team_logo2.setImageResource(android.R.drawable.ic_delete);
            }

            //@Override
            public void onLoadingComplete(Bitmap loadedImage)
            {
                listContent.progress_team2.setVisibility(View.GONE);
                Animation anim = AnimationUtils.loadAnimation(context, R.anim.fade_in);
                listContent.team_logo2.setAnimation(anim);
                anim.start();
            }

            //@Override
            public void onLoadingCancelled()
            {
                // Do nothing
            }

            public void onLoadingComplete() {

            }
        }); 

        return convertview;
    }
    private class ListContent
    {
        ImageView team_logo1, team_logo2;
        ProgressBar progress_team1,progress_team2;
    }
} 
```

这是我的日志：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: ImageLoader must be init with configuration before using
at com.nostra13.universalimageloader.core.ImageLoader.displayImage(ImageLoader.java:164)
at com.huskerit.score.CustomAdapter.getView(CustomAdapter.java:100)
at android.widget.HeaderViewListAdapter.getView(HeaderViewListAdapter.java:220)
at android.widget.AbsListView.obtainView(AbsListView.java:1554)
at android.widget.ListView.measureHeightOfChildren(ListView.java:1288)
at android.widget.ListView.onMeasure(ListView.java:1199)
at android.view.View.measure(View.java:8313)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
at android.widget.LinearLayout.measureHorizontal(LinearLayout.java:701)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:311)
at android.view.View.measure(View.java:8313)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
at android.widget.LinearLayout.measureChildBeforeLayout(LinearLayout.java:1017)
at android.widget.LinearLayout.measureVertical(LinearLayout.java:386)
at android.widget.LinearLayout.onMeasure(LinearLayout.java:309)
at android.view.View.measure(View.java:8313)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
at android.view.View.measure(View.java:8313)
at android.view.ViewGroup.measureChildWithMargins(ViewGroup.java:3138)
at android.widget.FrameLayout.onMeasure(FrameLayout.java:250)
at android.view.View.measure(View.java:8313)
at android.view.ViewRoot.performTraversals(ViewRoot.java:844)
at android.view.ViewRoot.handleMessage(ViewRoot.java:1865)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:123)
at android.app.ActivityThread.main(ActivityThread.java:3687)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:507)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:842)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:600)
at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-09-15T06:51:57.180

我在构造函数中添加了这一行，它对我有用......

```
imageLoader.init(ImageLoaderConfiguration.createDefault(context)); 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-01-25T14:11:53.243

```
protected ImageLoader imageLoader;

@Override
public void onCreate(Bundle savedInstanceState) {
super.onCreate(savedInstanceState);
setContentView(R.layout.activity_main);

imageLoader = ImageLoader.getInstance();
imageLoader.init(ImageLoaderConfiguration.createDefault(this)); 
```

# iphone - 在Objective-c中，如果结构没有初始化，它的成员返回什么值？

> ID：12434897
> 
> 赞同：3
> 
> 时间：2012-09-15T05:52:08.827
> 
> 标签：iphone, objective-c, ios

我想知道视图的高度。

```
NSInteger height = view.frame.size.height; 
```

在上面的代码中，`frame`and`size`是结构体，并且`view`是对象。
如果`view`上述代码中为 nil，则`height`返回什么值？

我知道如果我向 nil 对象发送消息，我会得到 nil。
但`size`不是对象。

当我运行上面的代码时，如果`view`为零，我得到 0。
它总是返回 0，还是不能保证返回 0？

同样在以下代码中，高度返回零。

```
CGSize size;
NSInteger height = size.height; 
```

在 Objective-C 中，未初始化的结构总是返回零？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T06:29:32.353

在您的第一个示例 ( `view.frame.size.height`) 中，如果`view`为 nil，则保证您得到 0。这在 Xcode 4.2 中实现了（使用 clang）；对于较旧的编译器版本（和我相信的 gcc），结果是未定义的。资料来源：[格雷格·帕克的博客](http://www.sealiesoftware.com/blog/archive/2012/2/29/objc_explain_return_value_of_message_to_nil.html)。

对于您的第二个示例，这取决于`CGSize size;`声明的位置。如果它是这样的局部变量：

```
- (void)someMethod {
    CGSize size;
    NSInteger height = size.height;
    ...
} 
```

然后`height`是未定义的。它可能是零，也可能是任何其他数字。

如果它是这样的实例变量：

```
@implementation MyObject {
    CGSize size;
} 
```

那么它保证被初始化为零`+[MyObject alloc]`。

如果它是这样的全局变量：

```
// outside of any method, function, or class variable section
CGSize size; 
```

（或静态变量）然后保证在您的应用启动时初始化为零。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T05:54:48.870

它不是一个未初始化的结构。事实上，`objc_msgSend_stret()`正是因为这个原因，它被初始化为全零：结构返回消息发送`nil`为所有成员返回 0。

# spring - 从 Jar 中加载带注释的 spring bean

> ID：12434898
> 
> 赞同：2
> 
> 时间：2012-09-15T05:52:14.257
> 
> 标签：spring, spring-3, spring-annotations

如果 spring bean 在 jar 文件中使用了注解，我如何在我的类中加载 mythe bean 实例？

在 jar 文件中

```
package org.java.service.test;

@Service(value = "MyService")
public class MyService {

    @Resource(name = "myproperties")
    private Properties properties;
} 
```

在我的项目中

```
package org.java.project.test;

@Service(value = "OtherService")
public class OtherService {
    @Resource(name = "MyService")
    private MyService myService;
} 
```

在 spring-beans.xml 中

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" ....>

    <context:annotation-config/>    
    <context:component-scan base-package=org.java.service.test, org.java.project.test"/>
    .....
</beans> 
```

我也尝试如下，它不起作用

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" ....>

    <context:annotation-config/>    
    <context:component-scan base-package="org.java.service.test"/>
    <context:component-scan base-package="org.java.project.test"/>
    .....
</beans> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:12:28.083

我认为问题不在于您的组件扫描配置。而不是`@Resource`在您的字段上使用注释，您`private MyService myService;`应该使用`@Autowired`注释。

所以现在您在 OtherService 类中的代码将如下所示：

```
package org.java.project.test; 

@Service(value = "OtherService") 
public class OtherService { 
    @Autowired
    private MyService myService; 
} 
```

据我说，这应该对你有用。去尝试一下。干杯。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-04T07:43:23.610

**`<context:component-scan>`** 扫描当前项目中的那些包。

# java - Arrays.sort 对二维数组进行排序而不触发垃圾收集？

> ID：12434907
> 
> 赞同：1
> 
> 时间：2012-09-15T05:53:34.630
> 
> 标签：java, android, arrays, garbage-collection

此代码完美运行，但不幸的是，由于 Arrays.sort() 比较器，它触发了垃圾收集。

有没有办法做到这一点不会触发垃圾收集？

（注意：此代码已被修改为更加“通用”。实际代码是针对 Android 游戏的，这就是垃圾收集导致的减速成为问题的原因。）

```
static final byte INCOME = 0;
static final byte INDEX = 1;

public void vSortEmployees() {
    nPaidEmployees = 0;

    for (nIter=0; nIter<MAX_EMPLOYEES; nIter++) {

        if ((employees[nIter].current == true) && (employees[nIter].volunteer == false)) {

            // We have another current and paid employee; add that employee's "amount earned to date" to the list.
            paidemployees[nPaidEmployees][INCOME] = employees[nIter].fGetTotalIncomeToDate();
            paidemployees[nPaidEmployees][INDEX] = nIter;

            nPaidEmployees++;
        }
    }

    Arrays.sort(paidemployees, new Comparator<float[]>() {
        @Override
        public int compare(float[] f1, float[] f2) {
            if (f2[INCOME] < f1[INCOME]) 
                return -1;
            else if (f2[INCOME] > f1[INCOME])
                return 1;
            else
                return 0;
        }
    });

    // Now we have a list of current, paid employees in order of income received.

    // Highest income paid out
    paidemployees[0][INCOME]

    // Second highest income paid out
    paidemployees[1][INCOME]

    // If we need to reference the original employee object, we can:        
    employees[paidemployees[0][INDEX]].getName();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:15:22.883

没有办法始终触发或不触发 GC。GC过着自己的生活。它在您对数组进行排序时运行的事实并不意味着什么。

但是，您可能可以做一些事情。只是不要为比较器使用匿名内部类。你真的不需要这个。使用常规类并将其对象创建为单例。然后就使用这个实例。在这种情况下，排序期间不会在您的代码中创建新对象，并且 GC 可能不会运行。

```
class FloatArrayComparator implements Comparator<float[]>() {
    @Override
    public int compare(float[] f1, float[] f2) {
        if (f2[INCOME] < f1[INCOME]) 
            return -1;
        else if (f2[INCOME] > f1[INCOME])
            return 1;
        else
            return 0;
    }
};

class SomeClass {
    private Comparator<float[]> floatArrayComparator = new FloatArrayComparator();

    void myMethod() {
         Arrays.sort(myArray, floatArrayComparator);
    }

} 
```

# python - 人们如何一次渲染这么多体素？

> ID：12434908
> 
> 赞同：1
> 
> 时间：2012-09-15T05:53:40.450
> 
> 标签：python, terrain, perlin-noise, voxel

我实际上有2个问题。1）我看到这些数千个体素的渲染，但使用八叉树我仍然只能在屏幕上获得大约 500 个体素。

```
import warnings,sys
sys.setrecursionlimit(50000)

class storedItem():
def __init__(self,coord,data):
    self.coord = coord
    self.data = data
    self.node = None
def remove(self):
    self.node.children.remove(self)
    self.node = None

class Node():
    def __init__(self,parent,lower,upper):
    self.parent = parent
    self.children = []
    self.lowerbound = lower
    self.upperbound = upper
    self.setVolume()

def setVolume(self):
    dx = self.upperbound[0] - self.lowerbound[0]
    dy = self.upperbound[1] - self.lowerbound[1]
    dz = self.upperbound[2] - self.lowerbound[2]
    self.volume = dx*dy*dz

def inbound(self,coord):
    if self.lowerbound[0] <= coord[0] and self.lowerbound[1] <= coord[1] and self.lowerbound[2] <= coord[2]:
        if self.upperbound[0] >= coord[0] and self.upperbound[1] >= coord[1] and self.upperbound[2] >= coord[2]:
            return True
    return False

def returnValueOrChildnode(self,coord):
    if not self.inbound(coord):
        return self.parent
    for child in self.children:
        if child.__class__ == Node:
            if child.inbound(coord):
                return child
        elif child.__class__ == storedItem:
            if child.coord == coord:
                return child
    return None

def deleteOrReturnChildNode(self,coord):
    if not self.inbound(coord):
        return self.parent
    for child in self.children:
        if child.__class__ == Node:
            if child.inbound(coord):
                return child
        elif child.__class__ == storedItem:
            if child.coord == coord:
                self.children.remove(child)
                del(child)
                return True
    return None

def insertStoredItem(self,item):
    if len(self.children) < 8:
        self.children.append(item)
        item.node = self
        return True

    if len(self.children) == 8:
        for child in self.children:
            if child.__class__ == Node:
                if child.inbound(item.coord):
                    return child.insertStoredItem(item)
            elif item.coord == child.coord:
                warnings.warn('Already an item at this location, replacing it')
                self.children.remove(child)
                self.children.append(item)

        self.breakupIntoChildren()
        self.insertStoredItem(item)

def breakupIntoChildren(self):
    #if self.volume == 8:
    #   raise Exception("Node full. Cannot add to this node")
    nodes = []
    delta = (self.upperbound[0] - self.lowerbound[0] +1)/2
    x1,x2,x3 = (self.lowerbound[0],self.lowerbound[0]+delta -1,self.upperbound[0])
    y1,y2,y3 = (self.lowerbound[1],self.lowerbound[1]+delta -1,self.upperbound[1])
    z1,z2,z3 = (self.lowerbound[2],self.lowerbound[2]+delta -1,self.upperbound[2])

    nodes.append(Node(self,(x1,y1,z1),(x2,y2,z2)))
    nodes.append(Node(self,(x2 + 1,y1,z1),(x3,y2,z2)))
    nodes.append(Node(self,(x1,y1,z2 +1),(x2,y2,z3)))
    nodes.append(Node(self,(x2 + 1,y1,z2 + 1),(x3,y2,z3)))
    nodes.append(Node(self,(x1,y2 + 1,z1),(x2,y3,z2)))
    nodes.append(Node(self,(x2 + 1,y2 + 1,z1),(x3,y3,z2)))
    nodes.append(Node(self,(x1,y2 + 1,z2 + 1),(x2,y3,z3)))
    nodes.append(Node(self,(x2 + 1,y2 + 1,z2 + 1),(x3,y3,z3)))

    while self.children:
        child = self.children[0]
        for node in nodes:
            if node.inbound(child.coord):
                node.insertStoredItem(child)
                self.children.remove(child)

    self.children = nodes

class Octree():
def __init__(self,size,maxsearch=1000):
    if size % 2:
        raise Exception("Size must be multiple of 2")
    self.root = Node(None, (0,0,0),(size,size,size))
    self.size = size
    self.maxsearch=maxsearch

def search(self,coord):
    searching = True
    node = self.root
    count = 0
    while searching:
        result = node.returnValueOrChildnode(coord)
        if result is None:
            searching = False
        elif result.__class__ == storedItem:
            result = result.data
            searching = False
        elif result.__class__ == Node:
            node = result
        count += 1
        if count > self.maxsearch: #just incase something goes wrong
            searching=False
            result = None
            raise Exception("Max Search depth limit reached")

    return result

def insert(self,coord,data):
    if not self.root.inbound(coord):
        print coord, self.size, self.root.upperbound, self.root.lowerbound
        raise Exception("Coordinate outside scope of octree")

    item = storedItem(coord,data)
    self.root.insertStoredItem(item)

def remove(self,coord):
    searching = True
    node = self.root
    count = 0
    while searching:
        result = node.deleteOrReturnChildNode(coord)
        if result is True:
            searching = False
            return True
        elif result is None:
            searching = False
        elif result.__class__ == Node:
            node = result
        count += 1
        if count > self.maxsearch: #just incase something goes wrong
            searching=False
            result = None
            raise Exception("Max Search depth limit reached")

    return result
def trace(frame, event, arg):
    print "%s, %s:%d" % (event, frame.f_code.co_filename, frame.f_lineno)
    return trace 
```

这就是我一直在使用的八叉树代码。我从一个网站上得到的，这很整洁。它非常适合移除内部的立方体。虽然它只是一个空心盒子，这很奇怪。虽然它确实大大提高了FPS。对于渲染立方体，我使用这个小类。

```
class Cube(object):

def __init__(self, position, color,tree):

    self.position = position
    self.x = position[0]
    self.y = position[1]
    self.z = position[2]
    self.color = color
    self.tree = tree

num_faces = 6

vertices = [ (0.0, 0.0, 1.0),
             (1.0, 0.0, 1.0),
             (1.0, 1.0, 1.0),
             (0.0, 1.0, 1.0),
             (0.0, 0.0, 0.0),
             (1.0, 0.0, 0.0),
             (1.0, 1.0, 0.0),
             (0.0, 1.0, 0.0) ]

normals = [ (0.0, 0.0, +1.0),  # front
            (0.0, 0.0, -1.0),  # back
            (+1.0, 0.0, 0.0),  # right
            (-1.0, 0.0, 0.0),  # left 
            (0.0, +1.0, 0.0),  # top
            (0.0, -1.0, 0.0) ] # bottom

vertex_indices = [ (0, 1, 2, 3),  # front
                   (4, 5, 6, 7),  # back
                   (1, 5, 6, 2),  # right
                   (0, 4, 7, 3),  # left
                   (3, 2, 6, 7),  # top
                   (0, 1, 5, 4) ] # bottom    

def render(self):                

    glColor( self.color )

    # Adjust all the vertices so that the cube is at self.position
    vertices = [tuple(Vector3(v) + self.position) for v in self.vertices]

    # Draw all 6 faces of the cube
    glBegin(GL_QUADS)

    for face_no in xrange(self.num_faces):

        glNormal3dv( self.normals[face_no] )

        v1, v2, v3, v4 = self.vertex_indices[face_no]

        glVertex( vertices[v1] )
        glVertex( vertices[v2] )
        glVertex( vertices[v3] )
        glVertex( vertices[v4] )            

    glEnd()
def getneighbors(self):
    x = self.x
    y = self.y
    z = self.z
    return ((x,y,z+1),(x+1,y,z),(x,y+1,z),(x-1,y,z),(x,y-1,z),(x,y,z-1))

def checkneighbors(self):
    if not self.tree:
        return True
    positions = self.getneighbors()
    for pos in positions:
        result = self.tree.search(pos)
        if not result:
            return True
    return False 
```

使用此代码，我可以获得大约 30FPS。我认为屏幕上大约有 62,210 个方格。我通常得到大约 30-40 FPS（这还不错。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-03-30T19:14:43.567

我要说的第一件事是：不要使用对象来表示立方体。这听起来是正确的做法，但我认为迭代数百万个对象并在每个对象上执行方法不会在 python 上执行得过大。

我建议使用 3d Numpy 数组来存储它（voxel[x][y][z] = color）。那将是内存消耗的改善。[你可以在这里获得更多信息](http://twistedpairdevelopment.wordpress.com/2011/06/09/creating-voxel-volumes-quicky-in-python/)

在你这样做并重写你的算法以使用一个数组而不是许多对象之后，你需要意识到的下一件事是你不需要渲染你拥有的每个体素。您只需要渲染那些可见的。这意味着向 GPU 推送的多边形要少得多。

想想看……如果你有一个 10x10x10 体素的立方体，现在你正在写 6000 个四边形。如果您将立方体增加到 100x100x100 体素，您将编写 6000000 个四边形。这很快就会失控。

您只需要推送那些对用户可见的体素。在 10x10x10 体素的情况下，您只需要推动“外部”体素。那是 486 个体素 (9x9x6)，如果你写下每个体素的每个面，这意味着 2916 个四边形。对于 100x100x100 的情况，您只需要 58806 个体素（99x99x6），即 352836 个四边形（这是您在第一种情况下编写的四边形数量的 6%）。其余的体素隐藏在外部体素后面。

优化并没有就此结束，真的。但我认为这些小的优化将允许您渲染比当前渲染更多的体素。还有许多更高级的优化，如果您想了解更多信息，可以阅读[此处。](http://0fps.net/2012/01/14/an-analysis-of-minecraft-like-engines/)

# php - 如何通过php页面将数据库值检索到jquery自动完成框

> ID：12434910
> 
> 赞同：2
> 
> 时间：2012-09-15T05:54:03.910
> 
> 标签：php, javascript, jquery, mysql

我是 jQuery 的新手；我想从数据库中获取数据以自动完成文本框。

我已经对 PHP 进行了编码以从数据库中获取值。如何在 jQuery 页面中获取这些 PHP 值？

这是脚本：

```
 <script>
    $(function() {
        var Theaters = [
            "PVR",
            "SCR",
            "MTR"
        ];
        $( "#tags" ).autocomplete({
            source: Theaters
        });
    });
    </script> 
```

这是 PHP 页面：

```
<?php
mysql_connect("localhost", "root") or die (mysql_error ());
mysql_select_db("theaterdb") or die(mysql_error());
$strSQL = "SELECT * FROM theaters";
$rs = mysql_query($strSQL);
while($row = mysql_fetch_array($rs)) 
{
echo $row['theater_name'] . "<br />";
 }
mysql_close();
?> 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:58:11.497

为此目的使用 ajax。

```
<html>
 <head>
 <title>Untitled Document</title>
 <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js"></script>
 <script type="text/javascript">
 $(function(){
    $('#radioid').click(function() {
    $('#txtDoorStyle').val($(this).val());
});
 });
 </script>
  </head>
 <body>
 <input type="radio" id="radioid" value="Door Half Transom (011)" name="doorstyle">
 <input type="text" value="" id="txtDoorStyle" name="txtDoorStyle" >
 </body>
 </html>> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:59:37.563

您有两个选择，或者两个预先加载此自动完成选项，在这种情况下，您将从 dB 检索到的数据存储在隐藏字段中，然后将数据序列化为字符串，然后在您的 javascript 中使用`str.split(",")`

或者

您可以在用户开始输入时发出 ajax 请求，然后将数据作为字符串检索，然后将其解析为数组，然后将其传递给 autoComplete api。[您可以在此处](http://api.jquery.com/jQuery.ajax)阅读有关 jquery ajax的信息

# android - 如何设置一个可点击的android视图寻呼机

> ID：12434912
> 
> 赞同：1
> 
> 时间：2012-09-15T05:54:13.477
> 
> 标签：android, android-viewpager

> **可能重复：**
> [如何在 ViewPager 中设置 OnClickListener](https://stackoverflow.com/questions/11490604/how-to-set-onclicklistener-in-viewpager)

我正在使用android 2.2。我想在viewpager中单击图像后进行另一项活动。有人可以帮助我吗？有什么方法可以达到这个目的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T08:00:24.690

ViewPager 的目的是水平翻转/滑动视图（通常是片段）。您应该阐明通过将其设置为可点击来实现的目标。如果您想要导航，请查看[VPI](http://viewpagerindicator.com/)

# java - 在 Scanner 中使用分隔符

> ID：12434915
> 
> 赞同：-1
> 
> 时间：2012-09-15T05:54:50.663
> 
> 标签：java, input, java.util.scanner, delimiter

> **可能重复：**
> [正则表达式匹配 -Java](https://stackoverflow.com/questions/12424229/regular-expression-matching-java)

我在扫描仪中使用 FileInputStream。
我必须提取这种形式的输入：
(int,int) (int,int)
我需要将这 4 个数字存储在一个数组中。
我已经尝试使用分隔符来执行此操作，但它似乎不起作用！
in 是 Scanner 对象。

```
in.useDelimiter("( * | * , * | * ) *");
int[] x = new int[4]; 
int k = 0;
while (in.hasNext() && k<4) 
{   
if(in.hasNextInt())
{
    x[k] = in.nextInt();
    k++;
}
else if(in.next("nil").equalsIgnoreCase("nil"))
{
    x[k] = 0;
    k++;
}
} 
```

任何帮助，将不胜感激！谢谢！

Edit1：我还必须确保输入是这种格式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T09:02:21.783

您可以使用以下代码。

```
String x = "(10,56)(2,8)(100,5)";

String arr[] = x.replaceAll("[(|)]","").split(",");
    for(int i=0;i<arr.length;i++){
        System.out.println(arr[i]);
    } // give u perfect result

 or

String arr[]=x.split("[(d,d)]");
for(int i=0;i<arr.length;i++){
        System.out.println(arr[i]);
    } // result with some whitespce 
```

# c# - 长度超过 10 个字符时字符串中的换行符

> ID：12434916
> 
> 赞同：-3
> 
> 时间：2012-09-15T05:54:55.850
> 
> 标签：c#, asp.net-mvc, model-view-controller, asp.net-mvc-2, asp.net-mvc-3-areas

我正在研究 MVC 3。问题是如果字符串的长度超过 10，我想打破字符串。来自数据库的字符串值作为用户名。我想在图像上应用该字符串.. 示例

```
public Image (string Name)
{    
} 
```

那么如果名称字符串超过 10 个字符，如何打破它？

```
public FileResult image(string image)
    {

        Bitmap bitMapImage = new Bitmap(Server.MapPath("/Content/themes/base/images/photo.png"));
      //  Bitmap bitMapImage = new Bitmap("/Content/themes/base/images/del02s(1).jpg");

        //TODO :  comment for revert the cation of no photo
        Graphics graphicImage = Graphics.FromImage(bitMapImage);
        graphicImage.SmoothingMode = SmoothingMode.AntiAlias;
        int count = image.Length;
        string[] arr4 = new string[count];
        if (image.Length > 9)
        {

            string imges = image

        }

       graphicImage.DrawString(image, new Font("Trebuchet MS,Trebuchet,Arial,sans-serif", 10, FontStyle.Bold), SystemBrushes.WindowFrame, new Point(15, 5));

         graphicImage.DrawArc(new Pen(Color.Red, 3), 90, 235, 150, 50, 0, 360); 
        MemoryStream str = new MemoryStream();
        bitMapImage.Save(str, ImageFormat.Png);

        return File(str.ToArray(), "image/png");
    } 
```

看一下这个

静态无效主要（字符串[] args）{

```
 string image = "1234567890abcdefghijklmnopqrsy";
        int count = image.Length;

        if (image.Length > 9)
        {
          //getting Error
            string img1 = image.Substring(0, 10); 
            string img2 = image.Substring(10, count);//getting Error Index and length           //must refer to a location within the string.
             //Parameter name: length"

            string imge3 = img1 + "\n";
            string img4 = imge3 + img2;

            Console.WriteLine(img4);
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:01:19.577

查看 String.Substring()：http: [//msdn.microsoft.com/en-us/library/system.string.substring.aspx](http://msdn.microsoft.com/en-us/library/system.string.substring.aspx)

# spring-mvc - 使用 Spring Security 错误登录时如何获取用户？

> ID：12434917
> 
> 赞同：1
> 
> 时间：2012-09-15T05:54:58.960
> 
> 标签：spring-mvc, spring-security

我正在使用 Spring security 拦截器来错误记录用户，但我找不到解决方法。

我特别想保存最后登录的用户，但我不知道如何实现这一点。

**请帮帮我**。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T07:24:01.553

是的，你可以这么做。您可以在配置 xml 文件中的标记中定义以下标记。

```
<security:form-login login-page="/sessionexpired" 
login-processing-url="/j_spring_security_check" 
default-target-url="/submitLogin" 
always-use-default-target="true" 
authentication-failure-handler-ref="customAuthenticationFailureHandler"/> 
```

您可以看到最后一个参数集**authentication-failure-handler-ref**它的值是对同一 xml 文件中定义的以下 bean 的引用。

```
<bean id="customAuthenticationFailureHandler" class="com.xxx.xxx.xxx.CustomFilter">
        <constructor-arg type="String" value="loginfailed"></constructor-arg>
        <constructor-arg type="org.hibernate.SessionFactory" ref="sessionFactory"></constructor-arg>        
</bean> 
```

此 bean 中定义的类是您自己的类，它将获取有关失败登录详细信息的信息。

```
public class CustomFilter extends SimpleUrlAuthenticationFailureHandler {

    private String defaultFailureUrl;      
    private SessionFactory sessionFactory;

    public CustomFilter(String defaultFailureUrl,SessionFactory sessionFactory) {
        super();
        this.defaultFailureUrl = defaultFailureUrl;
        this.sessionFactory = sessionFactory;
    }

    @Override
    public void onAuthenticationFailure(HttpServletRequest request,
            HttpServletResponse response, AuthenticationException exception)
            throws IOException, ServletException {
        // TODO Auto-generated method stub

        String userName = request.getParameter("j_username");;
        /*System.out.println("CustomFilter Begins");        
        System.out.println("CustomeFilter.username :: " + userName);
        System.out.println("getMessage :: " + exception.getMessage());
        System.out.println("exception :: " + exception.getClass().getSimpleName());
        System.out.println("RemoteAddr :: " + request.getRemoteAddr());        */
    }
} 
```

当身份验证失败时`onAuthenticationFailure`，将调用此类的方法，您可以在那里获取用户详细信息以登录数据库或日志文件。

希望这对您有所帮助。干杯。

# android - 简单的持久化不起作用

> ID：12434928
> 
> 赞同：0
> 
> 时间：2012-09-15T05:57:35.630
> 
> 标签：android, persistence

```
private static final String KEY = "qaz";
private String aString;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    textView = (TextView) findViewById(R.id.txt);
    final String saved;
    if (savedInstanceState != null) {
        saved = savedInstanceState.getString(KEY);
        report("[" + saved + "]");
    } else {
        saved = null;
        report("[NULL]");
    }
    if (aString==null && saved!=null) {
        aString = saved;
        report("A");
    }
}

@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    report("s");
    savedInstanceState.putString(KEY, aString);
    super.onSaveInstanceState(savedInstanceState);
}

@Override
protected void onPause() {
    report("p");
    super.onPause();
}

@Override
public void onBackPressed() {
    report("b");
    super.onBackPressed();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}

private void report(String s) {
    aString += " " + s;
    Log.v("report", aString);
    textView.setText(aString);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:31:04.087

onSaveInstance 旨在将值从您的活动的一个实例持续到下一个实例，例如当活动被销毁并在方向更改时重新创建时。请记住，当您的活动被重新创建时，它是您为扩展活动类而定义的类的全新实例，因此，所有本地字段（变量）都将被重新初始化。

正如您已经发现的那样，SharedPreferences 是一种在 Activity 生命周期之外保持值的好方法，当然还有其他方法。在 onSaveInstance 中保存并在 onCreate 中检索的值旨在让您能够将活动的新实例初始化为与销毁之前相同的状态。

例如，假设您有一个消息传递应用程序，并且您的用户已经输入了几行文本。然后他们不小心翻转了方向（我们都做对了吗？）然后将其翻转回来。看到他们的文字消失了，他们会有多沮丧？！因此，一个好的开发人员会将 TextView 的当前内容保存在 onSaveInstance 中，并在 onCreate 中检索它。如果检索到任何值，则将其传递给 setText() 方法，以便用户可以从原来的位置继续。

看看这里。学习 Activity 的生命周期，如何控制它以及如何在 Activity 之间传递值（2 个不同的 Activity 或同一 Activity 的 2 个实例）是解锁 Android 王国的关键之一。

[http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle](http://developer.android.com/reference/android/app/Activity.html#ActivityLifecycle)

关键是要了解每个回调何时被调用，更重要的是，Android 可能调用或不调用什么。例如，当您的应用程序处于后台时，如果 Android 决定终止您的应用程序，则无法保证您的活动会再次被调用。

祝你好运。

# jquery - 如何设置选择框选定值

> ID：12434931
> 
> 赞同：5
> 
> 时间：2012-09-15T05:58:33.337
> 
> 标签：jquery, dropdownbox

我有一个可变宽度的输入字段，例如`small`, `large`, `medium`。我有 CSS 样式。

例子：

```
case 1: <input type="text" id="a1" class="title small required" />
case 2: <input type="text" id="a1" class="title medium" />
case 3: <input type="text" id="a1" class="title large required" /> 
```

同时我有一个`select`盒子：

```
<select id="b1">
    <option value="small">Small</option>
    <option value="medium">Medium</option>
    <option value="large">Large</option>
</select> 
```

我现在需要的是检查该`input`字段是否具有`small`or `medium`or类`large` 并将相关`select`框设置为`selected`. 在 jQuery 中，我直接将选定的值设置为`medium`，但下拉菜单仍然显示`small`。

如何`input`使用该函数检查该字段是否具有这些类中的任何一个`hasClass()`？我们可以一次检查这个吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T06:21:15.770

用这个

```
$('#b1').val("small"); // to set small as selected

$('#b1').val("medium");

$('#b1').val("large"); 
```

使用 .hasClass() 进行下一个。

```
var size = $("#al").hasClass('small')? 'small':
  ($("#a1").hasClass('medium')? 'medium' :
  ($("#a1").hasClass('large')? large :' null')); 
alert(size); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T06:02:32.797

> *“在 jquery 中，我直接将选定的值设置为“中”，但下拉菜单仍然显示很小”*

你不显示你的 jQuery 代码，但要设置 select 元素的值，`id="1"`你会这样做：

```
$("#1").val("medium");  // or, obviously, use a variable instead of "medium" 
```

但是在您的情况下，您已经使用`id="1"`了无效的 html 的选择和输入字段 -`id`应该是唯一的。在大多数浏览器中，通过重复的 id 选择只会选择具有该 id 的第一个元素。

更改`id`s 并更新您的 jQuery 以匹配它应该可以正常工作。（如果这不起作用，请更新您的问题以实际显示您的 JS 代码，我们可以提供进一步的帮助。）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-15T06:07:15.657

**首先`id`必须在 html 页面上是唯一的**

首先选择一个选择器正确选择您的输入元素。我使用的是标题类选择器，因为它在所有情况下都存在

```
var selectedOption="";
if($('.title').hasClass('small'))
{
  selectedOption='small';
}
else if($('.title').hasClass('medium'))
{
  selectedOption='medium';
}
else
{
  selectedOption='large';
}

//i am assuming you have only one select on your page, else replace it with id selector
$("select option[value="+selectedOption+"]")).prop('selected','true');  //setting the correct option as selected 
```

# php - zend 框架中的唯一电子邮件检查无法正常工作

> ID：12434933
> 
> 赞同：3
> 
> 时间：2012-09-15T05:58:52.370
> 
> 标签：php, zend-framework

我正在开发一个基于 Zend 框架的项目。在用户注册中，我必须检查唯一的电子邮件。当我第一次注册用户时，我的代码工作正常，但是当我尝试更新用户信息并按下更新按钮时，它会给出错误消息：

```
Email already taken 
```

请帮我解决这个问题。我的代码附在下面：

```
$this->addElement('text', 'email', array(
                'label'      => 'Your email address:',
                'required'   => true,
                'filters'    => array('StringTrim'),
                'validators' => array(
                        'EmailAddress',
                        array('Db_NoRecordExists', true, array(
                                'table' => 'users',
                                'field' => 'email',
                                'messages' => array(
                                        'recordFound' => 'Email already taken'
                                )
                        )
                        )
                )
        )); 
```

我已将控制器更改为：

```
public function addAction()
    {
        $modelUsers = new Model_Users();
        $userId = $this->_getParam('userId');
        $form = $this->_getAddForm();

        if ($userId) {              
            $populateData = array();

            $user = $modelUsers->fetch($userId);

            if ($user instanceof Model_User) {
                $populateData = $user->toArray();
            }

            $form->populate($populateData);
        }

        $request = $this->getRequest();

        if ($request->isPost()) {
            $email = $this->getRequest()->getParam('email');
            if (strtolower(trim($email)) == $modelUsers->fetchByEmail($email)) {
                // change $this->_user->getAccount()->getEmail() to retrieve the user's current email address

                // remove validator from form
                $form->getElement('email')->removeValidator('Db_NoRecordExists');
            }

            $post = $request->getPost();

            if ($form->isValid($post)) {
                $values = $form->getValidValues($post);
                $data = array(
                    'firstName'     => $values['firstName'],
                    'userTypeId'    => 2,
                    'lastName'      => $values['lastName'],
                    'email'         => $values['email'],
                    'userName'      => $values['userName'],
                    'password'      => $values['password'],
                    'role'          => $values['role']
                );

                if ($userId) {
                    $user = $modelUsers->fetch($userId);
                    if ($user instanceof Model_User) {
                        $user->setFromArray($data);
                        $success = $user->save();
                        if ($success) {
                            echo Zend_Json::encode(array('status' => self::STATUS_SUCCESS, 'message' => 'Successfully updated the user!'));
                            exit;
                        }
                    }
                } else {
                    $user = $modelUsers->createRow($data);
                    $success = $user->save();
                    if ($success) {
                        echo Zend_Json::encode(array('status' => self::STATUS_SUCCESS, 'message' => 'Successfully added the user!'));
                        exit;
                    }

                }
                echo Zend_Json::encode(array('status' => self::STATUS_FAILED, 'message' => 'user not added'));
                exit;               
            } else {

                $errors = array();
                $errors = $form->errors();              

                echo Zend_Json::encode(array('status' => self::STATUS_ERROR, 'data' => $errors));
                exit;

            }
        }

        $this->view->form = $form;
        $this->_helper->layout->disableLayout();

    } 
```

模型：

```
public function fetchByEmail($email)
{
    $email=fetchOne('SELECT email FROM users WHERE email = $email');
    //$select->where('email=?',$email) ;
    //$student = $this->fetchRow($select);
    return $email;
} 
```

但这仍然行不通

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:31:40.447

解决此问题的一种简单方法是在编辑表单时从该表单元素中删除验证器。如果他们试图更改他们的电子邮件地址，您可能还希望保留验证器，因为他们不应该能够将他们的电子邮件更改为数据库中已经存在的电子邮件。

将验证器留在您的`Zend_Form`类中，*仅在编辑用户时*添加此代码。

```
if ($this->getRequest->isPost()) {
    $email = $this->getRequest()->getParam('email'); // get email from form

    // if email address has not changed, remove validator from form
    if (strtolower(trim($email)) == $this->_user->getAccount()->getEmail()) {
       // change $this->_user->getAccount()->getEmail() to retrieve the user's current email address

       // remove validator from form
       $form->getElement('email')->removeValidator('Db_NoRecordExists');
    }

    // validate form
    if ($form->isValid($this->getRequest()->getPost()) {
        //...
    }
} 
```

因此，您要做的`Db_NoRecordExists`是在编辑表单时从表单元素中删除验证器，并且只有在他们不尝试更改其电子邮件地址的情况下才允许这样做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:03:34.103

它总是会给你这个错误，因为你正在使用验证，该电子邮件是否存在于数据库表中。

但是电子邮件存在于数据库中，这就是它给出错误的原因。

删除此验证，它将对您有所帮助。

```
if(isset($_SESSION['session_id']))
{
     // code for update query
}
else
{
     // code for insert query
} 
```

# sql-server - 为 windows phone 7 和 8 开发 GIS 应用程序

> ID：12434936
> 
> 赞同：0
> 
> 时间：2012-09-15T05:59:38.007
> 
> 标签：sql-server, windows-phone-7, geospatial

我打算为 windows phone（7 和 8）启动一个 GIS 应用程序，我有一些重要的问题。任何想法将不胜感激！

1- WinPhone 的数据库引擎。SQLServer Compact 是数据库引擎的唯一选择吗？有替代方案吗？

2- SQLServer Compact（或其替代方案）是否支持空间数据？

3-是否有适合处理地理空间数据等工作的库？渲染这样的数据？...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:22:47.993

SQL Server Compact 是 Windows Phone 的内置数据库。但是，如果您可以找到其他基于 C# 的数据库，则它们可能可以正常工作。

我希望任何 GIS 库都是商业的。例如，参见[Map Suite](http://gis.thinkgeo.com/Products/GISComponentsforNETDevelopers/MapSuiteWindowsPhoneEdition/tabid/896/Default.aspx)，它是一个 Windows Phone GIS 组件。

您也许可以使用来自[http://sharpmap.codeplex.com/](http://sharpmap.codeplex.com/)的一些代码- 但它针对的是 .NET4.0 而不是 Windows Phone。

# ios - 尝试呈现模态视图控制器时的 UIViewControllerHierarchyInconsistency

> ID：12434937
> 
> 赞同：36
> 
> 时间：2012-09-15T05:59:38.490
> 
> 标签：ios, objective-c, xcode, uiviewcontroller, xib

尝试使用以下代码呈现模态视图控制器

```
MapViewController *mapView = [[MapViewController alloc] initWithNibName:@"MapViewController" bundle:nil];
    mapView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
    [self.navigationController presentModalViewController:mapView animated:YES];
    [mapView release]; 
```

不断收到以下错误..

```
'UIViewControllerHierarchyInconsistency', reason: 'A view can only be associated with at most one view controller at a time! View <UIView: 0x1ed815a0; frame = (0 20; 320 460); autoresize = W+H; layer = <CALayer: 0x1ed81600>> is associated with <UIViewController: 0x1ed835a0>. Clear this association before associating this view with <MapViewController: 0x1dd947c0>.' 
```

这是一个我几个月没有接触过的老项目，不知道是什么导致了这样的错误？

* * *

## 回答 #1

> 赞同：149
> 
> 时间：2012-09-16T21:11:20.000

在最新的 Xcode 版本中，这已经发生在我身上两次了。在这两种情况下，我都需要对 UIViewController 的 XIB 文件进行更改（在您的情况下，它将是 MapViewController.xib：

**前：**

![在此处输入图像描述](../Images/6d3ed6a5d747b721da3644e85e6ff1ff.png)

1.  将主视图**移出**视图控制器的**子**视图：
2.  **从 XIB 中删除**视图控制器（没有必要，因为**文件的所有者**应该已经属于它的类）：

**后：**

![在此处输入图像描述](../Images/d0d6864fd3e17f215fc28b00f21bfc97.png)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-03T16:16:56.337

在 iOS 6 模拟器上运行 Apple 的示例音频应用程序 MixerHost 时遇到了这个问题。

上述修复的等价物，即通过将 View 对象拖到顶层来编辑提供的 MixerHostViewController.xib，并丢弃曾经包含它的现在空的 ViewController，效果很好（尽管在我花了几个小时工作之前）找出根本问题是什么，所以我现在感觉苹果已经完成了 - 似乎他们收紧了一些东西，但没有费心检查它是否破坏了他们的示例应用程序）。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-15T18:05:15.673

当我的 Nib`UIViewController`在顶层文件中有一个时，我遇到了这个问题。所以从 Nib 加载创建了那个`UIViewController`，然后我尝试从我的类中使用它，它`MapViewController`在你的代码中的位置。

在我的情况下，解决方案只是`UIViewController`从我的 Nib 文件中删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-12-24T18:04:24.880

也许在某些情况下，最好采用另一种方法而*不是*从 NIB 中删除 UIViewController，因为一方面，通过从 NIB 的层次结构中删除视图控制器，您会丢失自动布局边距。

为什么不将 UIViewController 留在您的 nib (.xib) 中并在文件所有者类中为它创建一个出口？然后，不是直接在您的代码中实例化视图控制器，而是使用 UINib 类加载 nib，并在最佳时间（从内存/资源使用的角度）调用 nib 实例的 instantiateWithOwner() 方法来取消归档 NIB 并连接nib 对象指向所有者类的出口。

```
 @IBOutlet var myViewController: myViewController?

    var nib : UINib?
    nib = UINib(nibName: "TheNib", bundle: nil)
    if (nib == nil) {
        println("could not load nib: TheNib.xib")
    }
    nib!.instantiateWithOwner(self, options: nil) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T06:25:56.063

你应该这样做..

```
MapViewController *mapView = [[MapViewController alloc] initWithNibName:@"MapViewController" bundle:nil];
UINavigationController *navCntrlr = [[UINavigationController alloc] initWithRootViewController:mapView];
mapView.modalTransitionStyle = UIModalTransitionStyleFlipHorizontal;
//hide navigation bar if needed
[self.navigationController presentModalViewController:navCntrlr animated:YES];
[mapView release]; 
```

# django - Django CSRF 验证失败

> ID：12434938
> 
> 赞同：2
> 
> 时间：2012-09-15T06:00:02.433
> 
> 标签：django, csrf, django-csrf

我在 http 页面中有一个表单说[http://example.com](http://example.com)和表单就像。我正在使用 django 1.3。我启用了 csrf 中间件并将 csrf 令牌标签放在表单中。当我尝试提交表单时，我得到以下错误。

> 引用者检查失败 - [http://example.com/与](http://example.com/)[https://example.com/](https://example.com/)不匹配 。

关于如何克服这个问题的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:06:36.017

`http`和之间有区别`https`。当 GET 来自 HTTP 时，您是否尝试在 HTTPS 上发布？

如果您有 HTTPS 设置，您可以查看[此处](https://docs.djangoproject.com/en/dev/topics/security/#ssl-https)以验证您的配置。

# jquery - 如何在选项卡上调用jQuery单击功能

> ID：12434940
> 
> 赞同：1
> 
> 时间：2012-09-15T06:00:24.187
> 
> 标签：jquery, tabs, click, haml

```
%ul.nav.nav-tabs
  %li.active
  %a{ :href => "#a", "data-toggle" => "tab" }
  %li
  %a{ :href => "#b", "data-toggle" => "tab" } 
```

如何在第二个选项卡上调用 jQuery 单击功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-29T13:38:51.993

```
$('.nav-tabs li').eq(1).click(function(){alert("test")}) 
```

或者如果你想调用`click`事件：

```
$('.nav-tabs li').eq(1).click() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:19:58.493

```
$('#b').parent().click(function(){alert("test")}); 
```

我想这就是你的意思。

# php - 在时间间隔内从 MySQL 服务器检索数据

> ID：12434944
> 
> 赞同：2
> 
> 时间：2012-09-15T06:01:08.130
> 
> 标签：php, mysql, cakephp

我有一个名为的表`graphs`，它有我的字段，例如：

`id, name, channel, created..`等`created`字段是`DATETIME`。

现在，我想检索具有`one minute`时间间隔的数据。也就是说，与当前时间和`created`字段的日期差将为`one minute`.

这里`created`的字段日期格式是：`Y-m-d h:i:s`.

解决办法是什么？请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:07:44.260

使用这个查询

```
SELECT * FROM tbl_name WHERE DATE_SUB(NOW(),INTERVAL 1 MINUTE) <= created; 
```

[http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:15:40.913

一种可能的查询可能是：

```
SELECT * FROM graphs WHERE  (UNIX_TIMESTAMP() -  UNIX_TIMESTAMP(`created`) <= 60) 
```

检查[UNIX_TIMESTAMP](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html#function_unix-timestamp)

# xml - 在哪里可以找到 BaseX 的逻辑运算符列表？

> ID：12434945
> 
> 赞同：3
> 
> 时间：2012-09-15T06:01:10.093
> 
> 标签：xml, xquery, basex

我正在使用官方文档：[http](http://docs.basex.org/wiki/Commands#String_Syntax) ://docs.basex.org/wiki/Commands#String_Syntax ，但我无法找到逻辑运算符列表。我希望能够查询`text contains 'A' or 'B'`。

按照同样的思路，我还试图弄清楚如何限制返回的结果数量，并且我试图找到一个在 BaseX 中创建关系表的好指南。

这就是我正在使用的......我已经想出了如何做“或”，但我还没有想出如何为不同的目标传递变量。

```
let $items := ('Creditcard', 'Money order')
for $item score $s in doc('xmark')//item
  [payment contains text "$items" using stemming using case sensitive]
order by $s descending
return <item ranking= '{ $s }'>{ $item/payment/text() }</item> 
```

-编辑-

现在查看此代码，该代码基于现有答案：

```
let $items := ('Creditcard', 'Money order')
for $item in descendant::*:$item | descendant-or-self::*[text() contains text "$item"] | .//item//payment[descendant-or-self::node()/@*:lang = "bnt"][descendant-or-self::node()/@*:lang = "afr"][descendant-or-self::node()/@*:lang = "eng"][descendant-or-self::node()/@*:lang = "chi"]
return <payment>{ .//item//payment/text() }</payment>
       <buyer_name>{ .//item//buyer/text() }</buyer_name> 
```

-编辑-

另一种尝试：

```
let $list := doc('xmark')
return for $p in $list/payments/item/payment-method[text() = 'Creditcard']
return $p//text() 
```

返回 0 个结果。只是试图从文本中获取“信用卡”，即“付款方式”的值。基本上，我无法找到一致或成功的例子。

-编辑-

最近的尝试非常接近；但是，当我将它应用于我实际尝试访问的数据库而不是 BaseX 示例数据库时，我得到了一个特殊的错误品牌：

通过[http://basex.org/products/live-demo/](http://basex.org/products/live-demo/)

文档（“测试”）：=

```
<item>
<item_number>1171270</item_number>
<seller_info>
<seller_company_id>6356</seller_company_id>
<seller_rating>C31</seller_rating>
<seller_rating>T150 hr.</seller_rating>
</seller_info>
<product_info>
<unit>2022</unit>
<sinfo>55 cases</sinfo>
<sinfo>Yu-gi-oh trading card pack</sinfo>
<sinfo>.45kg per unit</sinfo>
<sinfo>24.7500kg shipment</sinfo>
</product_info>
<product_info>
<unit>9291</unit>
<sinfo>7 units</sinfo>
<sinfo>Naruto, Classic, action figure</sinfo>
<sinfo>1.8kg per unit</sinfo>
<sinfo>12.6kg shipment</sinfo>
</product_info>
</item> 
```

0：编写您自己的查询... :=

```
let $doc := doc('test') 
for $v in $doc//item
where contains($v//seller_rating,'C31')
return $v//product_info/sinfo 
```

回报：

```
Error:
Stopped at line 3, column 39: [XPTY0004] Single item expected, (element seller_rating { ... }, element seller_rating { ... }) found. 
```

我不能说我没想到会遇到这样的问题。不幸的是，我没有格式化 XML 文档，而且它的格式都非常糟糕，就像这样，这也是我试图访问它（重构它）的部分原因。 [下一个问题](https://stackoverflow.com/questions/12474622/nightmarish-valid-error-xpty0004-single-item-expected-element-x-e)出现了：“[我如何在 XQuery 中定位具有相同节点的值](https://stackoverflow.com/questions/12474622/nightmarish-valid-error-xpty0004-single-item-expected-element-x-e)”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:00:14.983

恕我直言，这与您的问题最相似：

```
let $results := 
( (: Prepare a sequence of results for each $keyword in $keywords :)
let $keywords := ('Money order', 'Creditcard', 'Personal Check')
for $keyword in $keywords
  (: see http://docs.basex.org/wiki/Full-Text#Scoring for information regarding
  scores :)
  for $item score $s in doc('xmark')//item[
    payment contains text {$keyword} all words using stemming using case sensitive
  ]
  order by $s descending
  return <item ranking= '{ $s }'>{ $item/payment/text() }</item>
)
(: now sort and group these results, grouping is done to eliminate duplicate payment
methods that have been matched by two or more keywords :)
for $result in $results
  group by $val := $result/text()
  order by $result[1]/@ranking descending
return $result[1] 
```

`score`不过，我认为您可能对包含您的关键字的不同支付方式的总数不感兴趣，以下查询将为您提供这些数据：

```
let $keywords := ('Cash', 'Personal Check')
for $keyword in $keywords 
return <keyword name="{$keyword}">
{
for $result in //item/payment
  group by $payment-method := $result/text()
  order by count($result) descending
return element {"item"} {
    attribute {"count"} {count($result)},
    $payment-method
  }[. contains text {$keyword} phrase]
}</keyword> 
```

我希望这对您有所帮助并回答您的问题，以防您无法随意寻求更多帮助:)

# javascript - jquery中的文本框验证

> ID：12434948
> 
> 赞同：2
> 
> 时间：2012-09-15T06:01:14.837
> 
> 标签：javascript, jquery

我在以下条件下验证文本框值

1.  至少应为 3 个字符

2.  它应该只包含字母

3.  它应该至少包含一个元音

如果所有条件都匹配，我将启用提交按钮。如果上述任何一种情况不匹配，我将向名为错误的 div 设置错误消息。

这是我的代码

```
$document.ready(function(){

 $('.tbox').focus(); // cursor in text box 
 $(':submit').attr("disabled",true); // disable generate button

    $('.tbox').focus(fucntion(){

        check_the_input()   
    }); 

    });

function check_the_input()
{

    var value = $(this).val();

    $('.tbox').bind('keyup blur',function(){ 
    $(this).val( $(this).val().replace(/[^a-z]/g,'') ); }

    if(value.length > 3)
    {
        if(value.indexOf('a') == -1 && value.indexOf('e') == -1 && value.indexOf('i') == -1 && value.indexOf('o') == -1 && value.indexOf('u') == -1)
        {
            $('#error').text("*Input must contain atleast one vowel");
            $(':submit').attr("disabled",true); 

        }
        else
        {
            $(':submit').attr("disabled",false);
        }

    }
    else
    {
        $('#error').text("*Input should be atleast 3 characters")
        $(':submit').attr("disabled",true); 
    }

    setTimeout(check_the_input,100);
} 
```

我在这里面临以下问题：

1.  如果我输入 input 作为 aa99 输入更改为 aa ，但仍然启用生成的按钮。

2.  我在输入文本时没有收到错误消息。只有在文本框外按 Tab 或单击鼠标后，我才会收到错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:44:34.240

我建议重新考虑这种方法。考虑这个更简单的例子：

**HTML：**

```
<form>
  <input type="text" id="myinput"/>
  <button id="submit" type="submit" disabled>Submit</button>
  <p class="error"></p>
</form> 
```

**jQuery：**

通过使用函数`test`和对象来存储您的验证过滤器，您的代码会变得更明显、更优雅，并且您可以获得更好的性能并且更易于维护，例如添加新过滤器或更多输入。

**演示：http:** [//jsbin.com/ezatap/6/edit](http://jsbin.com/ezatap/6/edit)

```
var $input = $('#myinput');
var $error = $('.error');
var $submit = $('#submit');
var Filters = {
  min: {
    re: /.{3,}/,
    error: 'Must be at least 3 characters.'
  },
  char: {
    re: /^[a-z]+$/i,
    error: 'Must be only letters.'
  },
  vowel: {
    re: /[aeiou]/i,
    error: 'Must have at least one vowel.'
  }
};

function test(value, filters) {
  var isValid = false;
  for (var i in filters) {
    isValid = filters[i].re.test(value);
    $error.hide();
    $submit.prop('disabled', false);
    if (!isValid) {
      $error.show().text(filters[i].error);
      $submit.prop('disabled', true);
      break;
    }
  }
  return isValid;
}

test($input.val(), Filters);
$input.on('keyup blur', function() {
  test(this.value, Filters);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:05:13.553

对于第一个问题：

```
else
{
    $('#error').text("*Input should be atleast 3 characters")
} 
```

=>

```
else
{
    $('#error').text("*Input should be atleast 3 characters");
    $(':submit').attr("disabled",true); 
} 
```

对于第二个问题：

当输入被编辑时，在输入失去焦点之前不会调用回调。如果您想在编辑时更改 :submit 的样式，您可以设置一个定期调用的函数，每隔几毫秒检查一次输入。这是一个简单的例子：

```
function check_the_input( )
{
   //routines check the input
   //...

   setTimeout( check_the_input, 100 ); //call me after 0.1 second
}

$(document).ready( function( ) { check_the_input( ) } ); 
```

当然，如果您想要更高的效率，还有更多工作要做。

修复几个错误，请参见：http: [//jsfiddle.net/4E7vv/2/](http://jsfiddle.net/4E7vv/2/)

# c - C中的typedef用于结构

> ID：12434952
> 
> 赞同：0
> 
> 时间：2012-09-15T06:01:39.170
> 
> 标签：c, struct, typedef

如果我有一个结构，例如：

```
typedef struct bag {
  int test;
} *bag; 
```

那么如果一个函数消耗了包。比方说：

```
int sample(bag *b) {
    b->test ...
} 
```

我收到错误，我在不是结构或联合的东西中请求成员“b”。我该如何解决？我可以将 b 转换为 (struct bag *) 但这似乎不合理。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T06:05:00.453

您刚刚将 type 定义为指向type`bag`的*指针*`struct bag`。因此，当您创建一个类型的变量时`bag *b`，您实际上是在创建一个类型的变量`struct bag**`。要么将您的参数更改为`bag b`，要么为您的成员 ( `(*b)->test`) 进行双重取消引用。

**编辑** 正如另一张海报提到的那样，您可能的意思是`typedef struct bag { ... } bag`，您的原始代码将被编译。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T06:07:41.817

您必须决定：bag 是指向结构的*指针*的名称，或者 bag 是结构的名称：可能您的意思是

```
typedef struct bag {
   int test;
} bag; 
```

然后你的代码编译。

# html - 防止当前选定的菜单项改变颜色

> ID：12434954
> 
> 赞同：2
> 
> 时间：2012-09-15T06:01:42.137
> 
> 标签：html, css, xhtml

每当我将鼠标悬停在当前选定的菜单项上时，它的颜色都会发生变化，我想防止这种情况发生。这是我的代码。

```
<html>
    <head>
        <title> Another Page </title>
        <link rel="stylesheet" href="style4.css" type="text/css" />
    <head>

    <body>

        <div id="title">

            <ul>
                <li class="current"><a href="home.html">Home</a></li>
                <li><a href="content.html">Content</a></li>
                <li><a href="search.html">Search</a></li>
            </ul>

            <div id="clear">
            </div>

        </div>

        <div id="wrapper">

            <div id="header">

            </div>

        </div>

    </body>

</html> 
```

这是CSS

```
body
{
    padding: 0;
    margin: 0;
    background-color: rgb(24,205,20);
}

h1,h2,h3
{
    padding: 0;
    margin: 0;
}

p
{
    padding: 0;
    margin: 0;
}

.current
{
    background-color: black;

}

#title
{
    background-color: orange;   
}

#title ul
{

    list-style: none;
    padding: 0;
    margin: 0;
}

#title li
{
    float: left;
}

#title a
{
    text-transform: uppercase;
    text-align: center;
    text-decoration: none;
    display: block;
    width: 120px;
    font-weight: bold;
    color: #ffffff;
    padding: 4px;
}

#title a:hover
{
    background-color: rgb(180,138,18);
}

#clear
{
    clear: both;
} 
```

需要一些紧急建议来解决这个问题。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:14:24.613

将此行添加到 CSS 文件的末尾：

```
#title .current a:hover {
        background-color: inherit;
} 
```

# c++ - C++ 等待和睡眠问题

> ID：12434955
> 
> 赞同：1
> 
> 时间：2012-09-15T06:01:50.177
> 
> 标签：c++, sleep, wait, xbox360

好的，我正在处理一个菜单，它的工作原理是每 3 秒出现一个新选项，但我正在努力做到这一点，以便在 3 秒内我可以按下按钮来激活某些东西，现在看这里：

```
dvar(-1, 0, "e \"Prestige and rank settings\"");
Sleep(35);
dvar(-1, 0, "c \"Set prestige one\"");
if (Key_Down(0, 0x02)) {
  dvar(-1, 0, "c \"Setting 1st prestige, will be kicked\"");
  Sleep(1000);
  dvar(-1, 0, "c \"^43\"");
  Sleep(1000);
  dvar(-1, 0, "c \"2\"");
  Sleep(1000);
  dvar(-1, 0, "c \"^41\"");
  Sleep(1000);
}
Sleep(3000); 
```

上面的问题是在“Set prestige one”之后它跳到下一个 Sleep(3000) 和下一个选项，现在我需要找到一种方法，以便能够在 3 秒内仍然使用该 if 语句女巫是一个按钮，而不是它休眠线程并使按钮无法使用，除非您在文本加载之前按下它。

所以我需要做的就是让线程休眠而不是让它等待那 3 秒，这样我仍然可以使用那个 if 语句。

这是针对在 XBOX360 上运行的 DLL

当前使用的库

```
#include "stdafx.h"
#include < stdio.h >
#include <string>
#include <iostream> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-08T12:46:06.337

我认为您会尝试以以下思想进行编程::

1.  事件驱动。
2.  多线程。使用系统定时器事件服务。
3.  基于状态机。

伪代码是这样的::

```
int State = IDLE;
dvar(-1, 0, "e \"Prestige and rank settings\"");
Sleep(35);
dvar(-1, 0, "c \"Set prestige one\"");

while (1)
{
    switch (SomeEvent)
    {
    case ON_Key_down:
        if (Key == 0x02)
        {
            if (State == IDLE || State == KEY_PRESSED_SET1stPRESTIGE_Finish)
            {
                State = KEY_PRESSED_SET1stPRESTIGE_1stSTEP;
                dvar(-1, 0, "c \"Setting 1st prestige, will be kicked\"");

                Timer_Event_AfterMS(1000);   // make request event after 1sec to system alarm service
            }
            else
            {
                // ignore do something
            }
        }
        break;
    case ON_Timer_SomeSec:
        if (State == KEY_PRESSED_SET1stPRESTIGE_1stSTEP)
        {
            dvar(-1, 0, "c \"^43\"");
            State = KEY_PRESSED_SET1stPRESTIGE_2ndSTEP;
            Timer_Event_AfterMS(1000);   // make request event after 1sec to system alarm service
        }
        else if (State == KEY_PRESSED_SET1stPRESTIGE_2ndSTEP)
        {
            dvar(-1, 0, "c \"2\"");
            State = KEY_PRESSED_SET1stPRESTIGE_3rdSTEP;
            Timer_Event_AfterMS(1000);   // make request event after 1sec to system alarm service       
        }
        else if (State == KEY_PRESSED_SET1stPRESTIGE_3rdSTEP)
        {
            dvar(-1, 0, "c \"^41\"");
            State = KEY_PRESSED_SET1stPRESTIGE_4rdSTEP;
            Timer_Event_AfterMS(1000);   // make request event after 1sec to system alarm service       
        }
        else if (State == KEY_PRESSED_SET1stPRESTIGE_4rdSTEP)
        {
            State = KEY_PRESSED_SET1stPRESTIGE_Need3SEC;
            Timer_Event_AfterMS(3000);   // make request event after 3sec to system alarm service       
        }
        else if (State == KEY_PRESSED_SET1stPRESTIGE_Need3SEC)
        {
            State == KEY_PRESSED_SET1stPRESTIGE_Finish;
        }
        break;
    default:
        break;
    }
} 
```

# c# - 逗号分隔的文本文件到通用列表

> ID：12434956
> 
> 赞同：2
> 
> 时间：2012-09-15T06:01:52.353
> 
> 标签：c#, list, generics, comma

将逗号分隔的文本文件转换为通用列表有点麻烦。我有一个使用以下属性定义的类（称为“客户”）：

*   名称（字符串）
*   城市（字符串）
*   余额（双）
*   卡号（整数）

这些值将以这种格式存储在文本文件中：姓名、城市、余额、车号，例如 John,Memphis,10,200789。会有多行这样的。我想要做的是在用户单击按钮时将每一行放在一个列表项中。

我已经弄清楚我可以使用 .Split() 方法分解每条线，但不知道如何将正确的值放入列表的正确属性中。（请注意：我知道如何使用 get/set 属性，我不允许使用 LINQ 来解决问题）。

任何帮助表示赞赏，因为我只是在学习并且已经为此工作了一段时间，但没有运气。谢谢

编辑：
对不起，看来我没有说清楚。我知道如何使用 .add。如果我在文本文件中有两行：A、B、1、2 和 C、D、3、4 我不知道该怎么做是使位置 0 的列表项中的名称“字段”等于“ A”，位置 1 的项目中的名称“字段”等于“C”，依此类推。

抱歉，术语使用不当，我只是在学习。希望你明白我在问什么（我相信一旦你知道这真的很容易做到）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T06:13:14.583

的结果`string.Split`将为您提供一个字符串数组：

```
string[] lineValues = line.Split(','); 
```

您可以通过索引访问数组中的值：

```
string name = lineValues[0];
string city = lineValues[1]; 
```

您可以将字符串转换为`double`或`int`使用它们各自的`Parse`方法：

```
double balance = double.Parse(lineValues[2]);
int cardNumber = int.Parse(lineValues[3]); 
```

您可以实例化该类并非常简单地分配给它：

```
Customer customerForCurrentLine = new Customer()
{
    Name = name,
    City = city,
    Balance = balance,
    CardNumber = cardNumber,
}; 
```

只需遍历这些行，为该行实例化 a `Customer`，并将其添加到您创建的类型的变量中`List<Customer>`

如果您希望您的程序是防弹的，您将不得不进行大量检查以跳过没有足够值的行，或者无法解析为正确的数字类型。例如，检查`lineValues.Length == 4`并使用`int.TryParse(...)`and `double.TryParse(...)`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:08:37.940

读取文件并根据换行符拆分其文本。然后对于总行数运行一个循环，该循环将基于逗号拆分并创建一个新对象并在其属性中插入值并将该对象添加到列表中。

这边走

```
List<Customers> lst = new List<Customers>();

string[] str = System.IO.File.ReadAllText(@"C:\CutomersFile.txt")
                             .Split(new string[] { Environment.NewLine }, 
                                                   StringSplitOptions.None);

for (int i = 0; i < str.Length; i++)
{
    string[] s = str[i].Split(',');

    Customers c = new Customers();

    c.Name = s[0];
    c.City = s[1];
    c.Balance = Convert.ToDouble(s[2]);
    c.CardNumber = Convert.ToInt32(s[3]);

    lst.Add(c);
} 
```

**顺便说一句，类名应该是`Customer`而不是`Customers`**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T06:11:03.570

Split() 按照它们在源字符串中出现的顺序生成一个字符串数组。因此，如果您的名称字段是 CSV 文件中的第一列，那么它将始终是数组中的第一个索引。

```
someCustomer.Name = splitResult[0]; 
```

等等。您还需要调查 String.TryParse 以了解您的类的数字类型属性。

# android - 为什么 Android 中的 android.os.IServiceManager 无法解析

> ID：12434957
> 
> 赞同：3
> 
> 时间：2012-09-15T06:01:59.203
> 
> 标签：android, import, resolve

我正在为 DialerDemo 编码，但是 import android.os.IServiceManager;import android.os.ServiceManagerNative; 导入android.telephony.IPhone；没有解决

```
CODE:
package com.umesh.umeshfilereadwritedemo1;

import android.app.Activity;
import android.os.Bundle;
import android.os.DeadObjectException;
import android.os.IServiceManager;
import android.os.ServiceManagerNative;
import android.telephony.IPhone;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.Toast;

public class DialerDemo extends Activity

 {

    ...
    ...
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:26:44.750

这些都是 SDK 的内部类，不公开。

您不能自行构建 source.android.com 应用程序。它们只能作为固件映像的一部分构建。请按照[说明](http://source.android.com/source/download.html)构建整个固件。虽然您可以使用[Eclipse](http://source.android.com/source/using-eclipse.html)编辑固件源，但您仍将使用它`make`来构建固件。

# android - 适用于平板电脑和移动设备的通用 Android 应用程序

> ID：12434959
> 
> 赞同：0
> 
> 时间：2012-09-15T06:02:29.330
> 
> 标签：android, android-layout, android-screen-support

我想开发一个适用于平板电脑和移动设备的应用程序。通过创建不同屏幕尺寸（即小、普通、大和特大）的 xml，我的目的会解决吗？我对此不确定，请指导我在各个方面开发该应用程序。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:07:17.240

您应该查看[设计多种屏幕尺寸](http://developer.android.com/guide/practices/screens_support.html)的文档。

除此之外，您可能不需要每种尺寸的布局。有时，向上或向下缩放更小/更大的布局就足够了。

您还需要确保您最终不会使用手机通话等功能，因为大多数平板电脑不支持该功能。

# ruby-on-rails-3 - Sunspot 搜索 Rails 的单表继承

> ID：12434968
> 
> 赞同：1
> 
> 时间：2012-09-15T06:03:52.230
> 
> 标签：ruby-on-rails-3, reflection, sunspot

我有一个带有`Content`模型的 Rails 应用程序。内容模型有许多[STI](http://api.rubyonrails.org/classes/ActiveRecord/Base.html)子模型，例如`Announcement`、`Story`、`FAQ`等。我需要能够通过[Sunspot](http://sunspot.github.com/)为每个子独立和作为一个组查询 Solr。

这是内容模型中太阳黑子搜索的当前实现。它为隐藏和发布设置默认值，因此 Solr 仅返回活动内容并接受 a`block`以允许更远的搜索参数：

```
def self.search_for(&blk)
  search = Sunspot.new_search(Content)
  search.build(&blk)
  search.build do
    with :hidden, false
    with(:published_at).less_than Time.now
  end
  search.execute

  search
 end 
```

此方法非常适用于 Content，并将返回 Content 和所有子模型的结果。我对方法的名称并不特别兴奋`search_for`，但想不出更好的方法。

我需要能够按子模型搜索，即`Announcement.search_for()`. 我不想将此方法粘贴到 ~10 个子模型中，因为默认值将在不久的将来发生变化。我想要的是让每个子模型都继承这个方法，但是搜索孩子的类，而不是`Content`（例如`Announcement`搜索`Sunspot.new_search(Announcement)`）。

有没有办法反映类方法的类，还是必须在运行时动态生成该方法才能预先定义调用类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-19T06:08:12.413

很简单，只需传递实例类型而不是`Content`. 将函数的第一行更改为：

```
search = Sunspot.new_search(self) 
```

`Content`如果您调用方法 by`Content.search_for`并且`Announcement`如果调用 by ， self 将保持在哪里`Announcement.search_for`。就是这样！

# android - 如何在 SQLiteDatabase.delete(...) 方法中使用“AND”和“OR”？

> ID：12434969
> 
> 赞同：0
> 
> 时间：2012-09-15T06:04:38.577
> 
> 标签：android, sqlite, where-clause, sql-delete

我正在使用以下代码从我的 Android 表中删除一些行：

```
sqliteDb.delete("MYTABLE", "Tel" + " = ?", new String[] { "1" }); 
```

如何为以下 3 种查询类型调用此方法？

```
Delete from MYTABLE where Tel = 1 OR Tel = 2

Delete from MYTABLE where Tel = 1 AND Number = 2

Delete from MYTABLE where Tel = 1 OR Number = 2 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:10:41.160

一般来说，类似：

```
String tableName = "MYTABLE";
String where = "Tel = ? or Number = ?";
String[] whereArgs = {"1", "2"}; 
```

如何选择 where ( `"Tel = ? or Number = ?"`) 与不同版本 ( `"Tel = ? AND Number = ?"`) 的一个版本完全取决于您：)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:10:28.110

简单地说，你可以这样做。

```
sqliteDb.delete("MYTABLE", "Tel" + " = ? OR Tel" + " = ?", new String[] { "1",  "2" }); 
```

# java - 如何更正 setOnItemClickListener？

> ID：12434970
> 
> 赞同：0
> 
> 时间：2012-09-15T06:04:53.713
> 
> 标签：java, android, listview, listactivity, onclicklistener

我将 setOnItemClickListener 添加到此代码并具有搜索过滤器，当我单击列表项而不是打开新活动时，我会强制关闭！一切正常，但没有打开 listitem 活动！我的代码哪里错了？

我的代码：

```
public class MainActivity extends Activity {

// List view
private ListView lv;

// Listview Adapter
ArrayAdapter<String> adapter;

// Search EditText
EditText inputSearch;

// ArrayList for Listview
ArrayList<HashMap<String, String>> productList;

    @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
       setContentView(R.layout.activity_main);

      // Listview Data
      String products[] = {"Dell Inspiron", "HTC One X", "HTC Wildfire S", "HTC Sense", "HTC Sensation XE","iPhone 4S", "Samsung Galaxy Note 800","Samsung Galaxy S3", "MacBook Air", "Mac Mini", "MacBook Pro"};

     lv = (ListView) findViewById(R.id.list_view);
     inputSearch = (EditText) findViewById(R.id.inputSearch);

     // Adding items to listview
    adapter = new ArrayAdapter<String>(this, R.layout.list_item, R.id.product_name, products);

     lv.setAdapter(adapter);

 //-----------------------------------------------------------------------------------

    // listening to single list item on click
    lv.setOnItemClickListener(new OnItemClickListener() {
      public void onItemClick(AdapterView<?> parent, View view,
          int position, long id) {

          // selected item 
          String product = ((TextView) view).getText().toString();

          // Launching new Activity on selecting single List Item
          Intent i = new Intent(getApplicationContext(), SingleListItem.class);
          // sending data to new activity
          i.putExtra("product", product);
          startActivity(i);

      }
    });
 //-----------------------------------------------------------------------------------------        
    /**
     * Enabling Search Filter
     * */
    inputSearch.addTextChangedListener(new TextWatcher() {

        public void onTextChanged(CharSequence cs, int arg1, int arg2, int arg3) {
            // When user changed the Text
            MainActivity.this.adapter.getFilter().filter(cs);   
        }

        public void beforeTextChanged(CharSequence arg0, int arg1, int arg2,
                int arg3) {
            // TODO Auto-generated method stub

        }

        public void afterTextChanged(Editable arg0) {
            // TODO Auto-generated method stub                          
        }
    });
    }

 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:35:29.103

没有日志很难说，但有两件事是可能的：1）您的视图不是 TextView，因此您得到 ClassCastException 2）活动 SingleListItem 未在清单中声明

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:18:30.963

问题似乎在这里`String product = ((TextView) view).getText().toString();`

通过获取值`position`

IE`String product = products[position];`

# jquery - 将 HTML 字符串转换为 Jquery 选择器

> ID：12434972
> 
> 赞同：1
> 
> 时间：2012-09-15T06:05:01.837
> 
> 标签：jquery, microsoft-metro

我有这样的 HTML 文本，它是使用 WinJS.xhr (Metro) 检索的。

HTML

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
<style>
</style>
</head>
<body>
<div id="getMe">
Something
</div>
</body>
</html> 
```

我想将其转换为 JQuery 对象，以便在其上使用选择器。例如：

```
$("#getMe").text("Something different"); 
```

@Mark：我尝试使用它，但无法获取文本。

```
var yourString = "<html><body><div id=\"getMe\">TEST</div></body></html>"// somehow set to the above string
$el = $(yourString).find("#getMe"); 
console.log($el.text()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T06:27:29.777

根据您的最后评论，这是您正在寻找的内容。

```
var myString = "<html>...</html>",
    $el = $(myString).find("#getMe"); // $el = the element you wanted. 
```

[http://jsfiddle.net/SCY9b/1/](http://jsfiddle.net/SCY9b/1/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T06:11:41.403

假设你的 html 字符串在一个变量中，那么你可以这样做：

```
 var yourString = // somehow set to the above string

 var $html = $(yourString);
 $html.find("#getMe").text("Something different");

 // and then to actually show it on the page:
 $html.appendTo("body");
 // or to just add that "getMe" div to the page:
 $html.find("#getMe").appendTo("body"); 
```

# version-control - 将 Cakephp1.3 迁移到 2.0

> ID：12434979
> 
> 赞同：5
> 
> 时间：2012-09-15T06:06:31.590
> 
> 标签：version-control

我在 cakephp 1.3 中开发了一个负载很重的项目，现在我的客户希望它使用最新的 CakePHP 版本。

我已经使用下面链接中提供的基于 shell 脚本的教程迁移了它：http: [//book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html](http://book.cakephp.org/2.0/en/appendices/2-0-migration-guide.html)

版本被替换它已在 CakePHP 2.0 版本中迁移，但现在在运行项目时出现错误

致命错误：在第 134 行的 D:\xampp\htdocs\arguenet1\lib\Cake\Controller\Component\RequestHandlerComponent.php 中的非对象上调用成员函数 parseAccept()

项目主要是使用 ajax 功能开发的，requesthandler 组件也已用于检查组件端是否存在 isAjax 请求。

谁能帮我解决这个错误...在此先感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-30T16:30:29.813

该`__construct()`方法的签名在 2.x 中已更改。请参阅[此处的 API 文档](http://api.cakephp.org/file/Cake/Controller/Controller.php#method-Controller__construct)。尝试像这样修改您的 AppController::__construct() ：

```
public function __construct($request = null, $response = null) {
    parent::__construct($request, $response);
    // Your code here.
} 
```

归功于[此 Google Groups 线程](https://groups.google.com/forum/?fromgroups=#!topic/cake-php/HMzoQiYjzo0)。

# php - 如何使用json和php

> ID：12434982
> 
> 赞同：-2
> 
> 时间：2012-09-15T06:07:00.383
> 
> 标签：php, json, web

我是 JSON 新手，但我有 PHP 经验。有人可以向我解释 JSON 是如何工作的，尤其是使用 PHP，而且 EASY 方式会很好。

EX：我有一个 php 数组，例如：

```
array(
    array('id' => 1, 'img' => "http.img1.png", 'title' => 'ice cream'),
    array('id' => 2, 'img' => "http.img2.png", 'title' => 'silly snail'),
    array('id' => 3, 'img' => "http.img3.png", 'title' => 'big bear'),
    array('id' => 4, 'img' => "http.img4.png", 'title' => 'Funny cat'),
); 
```

这很好，还是我应该改变这个数组？我想将其转换为 JSON 对象。在 php 数组中应该有一个父级，我是否必须将数组元素分配为子级，或者每个 php obj 可以是它自己的 JSON obj？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T06:09:48.983

只需在要转换为 json 字符串的变量上运行 json_encode。

```
$something = array("test" => array("value", "another value", 4));
echo json_encode($something) 
```

这将产生

```
{"test":["value","another value",4]} 
```

此外，将该字符串放入`$something = json_decode("{"test":["value","another value",4]}");`将产生与传入的相同数组`json_encode`。

请注意，JSON 不是一种编程语言；这是一种表示对象的方法。[http://json.org](http://json.org)对如何使用它有一个完整的可视化表示。JSON 的主要组件是数组（由 [] 包围）和对象（由 {} 包围）。数组是逗号分隔值的列表（请参阅 json.org 了解如何告诉它类型...非常简单），而对象是键：值对，每对之间用逗号分隔，其中键是用引号括起来的字符串。上面我创建了一个对象，其键名为“test”，其值是一个包含两个字符串和一个数字的数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T06:15:08.693

使用 json_encode() 对数组进行编码，使用 json_decode() 取回数组。

# qt - 在 Qt 中设计对话框时发生错误

> ID：12434988
> 
> 赞同：1
> 
> 时间：2012-09-15T06:08:02.347
> 
> 标签：qt

程序名称是 GoToCell，我创建了一个标签和两个按钮，我在 main.cpp 中编写了如下代码：

```
#include <QtGui/QApplication>
#include<QDialog>
#include "ui_GoToCell.h"
#include "GoToCell.h"

int main(int argc, char *argv[]) {
    QApplication a(argc, argv);
    Ui::GoToCell ui;
    QDialog *dialog=new QDialog;
    ui.setupUi(dialog);
    dialog->show();
    return a.exec();
} 
```

运行它时出现以下错误： GoToCell 不是 ui 的成员 我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:49:22.080

I think you have misspelled object name in `objectName` property in the `GoToCell.ui` form. Change it to `GoToCell`. It will then execute.

# iphone - 支持 iOS 6 和 iOS 5 自动旋转

> ID：12434992
> 
> 赞同：12
> 
> 时间：2012-09-15T06:08:32.537
> 
> 标签：iphone, objective-c, ios, uiviewcontroller, uikit

谁能确认要同时支持 iOS 6 和 iOS 5，添加新的 iOS 6 自动旋转方法是没有意义的，因为 Apple 文档建议如果您还实现 iOS 5 方法，这些方法将被完全忽略？

特别是，我谈论的方法`- (NSUInteger)supportedInterfaceOrientations`和`- (BOOL) shouldAutorotate`- 如果您还实现了这些方法，编译器会忽略和合成这些方法`- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T09:38:11.970

如果您将应用程序打包到新的 sdk 中，则需要为自动旋转添加新的回调。但是，只有在 iOS 6 设备上运行此类应用程序时才会收到这些回调。对于在早期 iOS 版本上运行的设备，将收到较早的回调。如果您不实现新的回调，则默认行为是您的应用程序在 iPad 上的所有方向上运行，在 iPhone 上除了 UpsideDown 方向之外的所有方向上运行。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-10T12:25:10.357

对于 iOS5 旋转。检查您想要的方向并返回 YES

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{  
    if ((interfaceOrientation==UIInterfaceOrientationPortrait)||(interfaceOrientation==UIInterfaceOrientationPortraitUpsideDown)) {
        return YES;
    }
    else return NO;
} 
```

iOS 6.0 自动旋转支持

```
- (BOOL)shouldAutorotate
{
    return NO;
}

- (NSUInteger)supportedInterfaceOrientations
{
    return UIInterfaceOrientationIsPortrait(UIInterfaceOrientationMaskPortrait|| UIInterfaceOrientationMaskPortraitUpsideDown);

}

- (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationIsPortrait(UIInterfaceOrientationPortrait|| UIInterfaceOrientationPortraitUpsideDown);

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-03T13:44:08.893

我认为最优雅的解决方案是：

```
- (NSUInteger)supportedInterfaceOrientations {
    return UIInterfaceOrientationMaskPortrait;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation {
    return ((1 << toInterfaceOrientation) & self.supportedInterfaceOrientations) != 0;
} 
```

我错过了什么吗？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-22T06:44:32.323

```
 - (UIInterfaceOrientation)preferredInterfaceOrientationForPresentation
{
    return UIInterfaceOrientationMaskAll;
}

-(void)viewWillLayoutSubviews
{
if([self interfaceOrientation] == UIInterfaceOrientationPortrait||[self interfaceOrientation] ==UIInterfaceOrientationPortraitUpsideDown)
    {
       if (screenBounds.size.height == 568)
        {
          //set the frames for 4"(IOS6) screen here
         }
        else

        {
         ////set the frames for 3.5"(IOS5/IOS6) screen here
        }

}
        else if ([self interfaceOrientation] == UIInterfaceOrientationLandscapeLeft||[self interfaceOrientation] == UIInterfaceOrientationLandscapeRight)
        {
         if (screenBounds.size.height == 568)
        {
          //set the frames for 4"(IOS6) screen here
         }
        else

        {
         ////set the frames for 3.5"(IOS5/IOS6) screen here
        }

    }
//it is for IOS5
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
     return YES;
    } 
```

-(void)viewWillLayoutSubviews 此方法将调用 ios5/ios6。此代码对带有 3.5" 屏幕的 ios6/ios5/ios6 和带有 ios6 的 4" 屏幕都很有用。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T06:13:48.510

您必须在某处设置一个标志（我相信您的 Info.plist），指示您使用两者中的哪一个。如果你使用新的，你不能为 iOS 5 构建（或者至少，它不能在 iOS 5 上工作）。如果您使用旧方法，则不会调用新方法。所以是的，您几乎必须选择要使用的方法，如果您想支持 iOS 5，则不能使用新方法。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-08-22T07:24:48.647

为了在 ios5 和 ios6 中支持自动旋转，我们需要在 ios6 的情况下提供回调......

```
[[UIDevice currentDevice] beginGeneratingDeviceOrientationNotifications];
[[NSNotificationCenter defaultCenter]addObserver:self selector:@selector(orientationChanged:) 
    name:UIDeviceOrientationDidChangeNotification object:nil]; 
```

我们需要打电话

```
- (NSUInteger)supportedInterfaceOrientations {
return UIInterfaceOrientationMaskPortrait;

} 

-(BOOL)shouldAutoRotate{
    return YES;
  } 
```

适用于 iOS5

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)toInterfaceOrientation
{
return ((toInterfaceOrientation == UIInterfaceOrientationPortrait) || (toInterfaceOrientation == UIInterfaceOrientationPortraitUpsideDown));
} 
```

# java - 连接被拒绝：将 java 客户端连接到 Android 服务器（模拟器）时

> ID：12434994
> 
> 赞同：0
> 
> 时间：2012-09-15T06:08:56.203
> 
> 标签：java, android, sockets

我已经尝试了几乎所有的东西。

1.  使用 adb forward TCP:12345 TCP:12345 从 ADB Shell 转发
2.  使用 10.0.2.2（无转发）监听我的主机
3.  在清单中设置 INTERNET 权限
4.  设置线程策略以允许所有功能

我在 12345 端口上运行我的客户端 java 程序，并且我在 Android 程序中有一个 ServerSocket，它通过同一个端口进行侦听。但是当我运行我的客户端（*在模拟器上运行服务器程序之后*）并输入我想要传输的字符串时，我得到一个异常说'连接被拒绝'。

```
 java.net.ConnectException: Connection refused: connect 
```

这是我的服务器程序：

```
public class MainActivity extends Activity {
    TextView tv;
    ServerSocket ss = null;
    String mClientMsg = "";
    Thread myCommsThread = null;

    public static final int SERVERPORT = 12345;
    protected static final int MSG_ID = 0x1337;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        tv = new TextView(this);
        tv.setText("Nothing from client yet");
        setContentView(tv);
        this.myCommsThread = new Thread(new CommsThread());
        this.myCommsThread.start();
    }

    @Override
    protected void onStop() {
        super.onStop();
        try {
            // make sure you close the socket upon exiting
            ss.close();
        } catch (IOException e) {
            e.printStackTrace();
        }
    }

    Handler myUpdateHandler = new Handler() {
        public void handleMessage(Message msg) {
            switch (msg.what) {
            case MSG_ID:
                // TextView tv = (TextView) findViewById(R.id.TextView01);
                tv.setText(mClientMsg);
                setContentView(tv);
                break;
            default:
                break;
            }
            super.handleMessage(msg);
        }
    };

    class CommsThread implements Runnable {
        public void run() {
            Socket s = null;
            try {
                ss = new ServerSocket(SERVERPORT);
            } catch (IOException e) {
                e.printStackTrace();
            }
            while (!Thread.currentThread().isInterrupted()) {
                Message m = new Message();
                m.what = MSG_ID;
                try {
                    if (s == null)
                        s = ss.accept();
                    BufferedReader input = new BufferedReader(
                            new InputStreamReader(s.getInputStream()));
                    String st = null;
                    st = input.readLine();
                    mClientMsg = st;
                    myUpdateHandler.sendMessage(m);
                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }
    }
}
               } 
```

我的Java客户端程序如下：

```
public class TCPSender {
    public static void main(String args[]) {
        try {
            DataInputStream dis = new DataInputStream(System.in);
            System.out.println("Enter the file name:");
            @SuppressWarnings("deprecation")
            String f = dis.readLine();
            File f1 = new File(f);
            FileReader fr = new FileReader(f1);

            Socket s = new Socket("127.0.0.1", 12345);
            PrintWriter pw = new PrintWriter(s.getOutputStream(), true);
            pw.println(f);
            int c = 0;
            while ((c = fr.read()) != -1)
                pw.println(c);
            System.out.println("File content are sent....");
            fr.close();
            s.close();
        } catch (Exception e) {
            System.out.println("" + e);
        }
    }
} 
```