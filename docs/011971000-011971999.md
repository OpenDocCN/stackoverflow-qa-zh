# StackOverflow 问答 11971000-11971999

# java - 如何分析哪些对象属于哪一代？

> ID：11971001
> 
> 赞同：0
> 
> 时间：2012-08-15T14:18:31.740
> 
> 标签：java, garbage-collection, jvm-hotspot, jmap

我有一个长时间运行（多天）的应用程序，其中包含我希望在它们被垃圾收集之前保留不同时间长度的对象。假设有四个类别：

1.  非常短暂（<1s）
2.  在用户关注的持续时间内存活（1s < 18h）
3.  每日数据（~24h）
4.  'Eternal'（很少，应用程序的生命周期）

为了帮助进行调优，我想找到一种使用 Java 6 Hotspot VM 检查实际数据进入终身代的方法。使用 jmap 生成 HPROF 文件似乎不包含世代信息。有没有其他方法可以获取这些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:45:04.320

不，没有简单的方法来获取单个对象的生成信息。实际上，如果您要求“活动”对象，这将触发 Full GC 并将所有对象放入老年代（所以现在您知道所有对象在哪里，但不知道它们在哪里）

在完整 GC 中幸存下来的对象很可能在老年代，因此如果您的系统每 5 分钟执行一次完整 GC，那么任何持续时间长于该时间的对象都差不多。

您可以做的最好的事情是尽量减少丢弃的对象（使用内存分析器来帮助）这将提高 GC 性能并减少它们发生的频率。在极端示例中，您可以使用堆外内存，这很难使用，但几乎不使用堆。如果您有很多 GB 的数据，尤其有用。

# objective-c - 如何到达对象数组的元素

> ID：11971007
> 
> 赞同：0
> 
> 时间：2012-08-15T14:18:45.103
> 
> 标签：objective-c, ios, arrays, object, arraylist

我的应用程序中有一个对象数组。

```
NSMutableArray *questions = [[NSMutableArray alloc] init];

[questions addObject:[self addQuestion:@"QUESTION 1" option1:@"ans1" option2:@"ans2" option3:@"ans3" option4:@"ans4" option5:@"ans5" answer:2]];

[questions addObject:[self addQuestion:@"QUESTION 2" option1:@"ans1" option2:@"ans2" option3:@"ans3" option4:@"ans4" option5:@"ans5" answer:2]]; 
```

在我看来，我有 6 个不同的标签。一个用于问题，另一个用于选项。但是，我不知道如何到达例如第一个对象的“选项 2”，以便我可以将其内容放到标签上？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:24:06.237

使用 NSDictionary（或 NSMutableDictionary）！或者创建一个自定义类！有很多很好的方法可以有效和安全地解决这个问题，您需要权衡您的选择。除非您的方法的返回值确实是一个对象（例如 NSMutableDictionary），否则您现在拥有的肯定不会起作用。

如果您选择使用字典，您可能会这样做

```
NSMutableDictionary *question = [[NSMutableDictionary alloc] initWithCapacity:7];
[question setObject:@"Ask a question" forKey:@"question"];
[question setObject:@"Option 1" forKey:@"1"];
[question setObject:@"Option 2" forKey:@"2"];
[question setObject:@"Option 3" forKey:@"3"];
[question setObject:@"Option 4" forKey:@"4"];
[question setObject:@"Option 5" forKey:@"5"];
[question setObject:@"2" forKey:@"Answer"];

//Keep in mind, the numbers in these dictionary entries are treated as strings 
```

然后，您可以将此字典添加到数组中：

```
[questions addObject:question]; 
```

要访问任何给定问题字典对象的正确答案，您可以调用：

```
NSString *answer = [question objectForKey:[question objectForKey:@"Answer"]]; 
```

..这将返回一个字符串：“选项 2。”

要访问要放入标签的选项的文本：

```
NSString *option = [question objectForKey:@"2"]; 
```

..这也将返回一个字符串：“选项2。”

希望这会有所帮助，很高兴详细说明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:42:27.887

```
someLabel2.text = [questions objectAtIndex:2]; 
```

如果这不能回答您的问题（我以某种方式猜测：），那么请在您的问题中添加一些更多相关信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:42:42.557

```
// get the first object in the array

id question = [questions objectAtIndex: 0];

// TODO: use whatever accessor you have to get properties
// NSString *message = ...

// set label text
label.text = message; 
```

如需更多帮助，请稍微澄清您的问题:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T14:53:59.483

好吧，这一切都取决于该`addQuestion:option1:option2:option3:option4:option5:`方法的工作原理。我想你有某种访问器方法来访问该方法返回的对象中的所有这些选项。如果您可以发布更多代码，这将有所帮助。此外，最好将问题数组作为实例变量，以便您可以从该类的其他方法访问它，也可能从类外部访问它，具体取决于您如何设置访问器方法。

我想你的代码会像这样工作（同样，我不知道，因为你还没有发布你的完整源代码）。

```
// this would be an instance of your class
id someObject = [questions objectAtIndex:0];

NSString *option1 = someObject.option1;
NSString *option2 = someObject.option2;
NSString *option3 = someObject.option3;
NSString *option4 = someObject.option4;
NSString *option5 = someObject.option5; 
```

# java - Java中未指定的块有实际用途吗？

> ID：11971009
> 
> 赞同：0
> 
> 时间：2012-08-15T14:18:49.253
> 
> 标签：java, block

> **可能重复：**
> [Java 中的匿名代码块](https://stackoverflow.com/questions/1563030/anonymous-code-blocks-in-java)

我前几天（在SO上）了解到

```
public method() {
    someCode()
    {
        Object value = localCode();
        doSomethingWith(value);
    }
    moreCode();
} 
```

是有效的 Java，它使包含`value`该区域本地的块，因此`value`仅存在于该块中。

这有什么实际用途吗？如果不是，为什么 Java 不对这种（愚蠢的）使用发出警告`{}`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T14:22:19.817

我在想要重复不同场景的测试中使用它。

```
{
    long start = System.nanoTime();
    // do something
    long time = System.nanoTime() - start;
    // print result.
}
{
    long start = System.nanoTime();
    // do something else
    long time = System.nanoTime() - start;
    // print result.
}
{
    long start = System.nanoTime();
    // do something else again.
    long time = System.nanoTime() - start;
    // print result.
} 
```

这允许复制代码而无需更改名称，或冒着重复使用变量的风险。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T14:24:12.450

不确定这实际上是为什么，但假设以下（有些人为的）情景：

```
public static void main(String[] args){
    int[] idsToCheck = {};
    {
       ExpensiveIDComputer sic = new ExpensiveIDComputer(); // very memory intensive call
       idsToCheck = sic.getIds();
    }
    // sic is now out of scope and can be GCed faster
    doManyOperationsOnIds(idsToCheck);
} 
```

因此，从本质上讲，它可以让您更快地对占用内存的操作进行垃圾收集。为什么你不只是使用另一种方法，我不知道，但这是我在阅读你的问题时的第一个想法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T15:35:51.070

不，如果`moreCode`变量在 { } 块之外声明，它将保留`value`，除非在执行期间更改。

初始化块不经常使用。

但是当你的类有多个构造函数时，它会很棒，它应该做一些常见的初始化操作，比如初始化一些变量或加载一些数据。

您可以将通用构造函数代码粘贴到初始化块中，如下所示。还有一个事实是初始化块只会在构造函数和父构造函数之后执行。

> 实例变量的初始化块看起来就像静态初始化块，但没有 static 关键字：
> 
> {
> 
> ```
> // whatever code is needed for initialization goes here 
> ```
> 
> }
> 
> Java 编译器将初始化程序块复制到每个构造函数中。因此，这种方法可用于在多个构造函数之间共享代码块。

参考：[http ://docs.oracle.com/javase/tutorial/java/javaOO/initial.html](http://docs.oracle.com/javase/tutorial/java/javaOO/initial.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T14:23:07.867

> ...所以 moreCode 仅具有该块中的 value 值。

这不完全正确，如果`moreCode`没有在块内声明。例如：

```
int moreCode = 0;

{
    moreCode = 1;
    System.out.println(moreCode);
}

// Will print 1, not 0!
System.out.println(moreCode); 
```

您可以使用它来限制变量的**范围**。如果你在块内声明一个变量，它只会存在于块内。

```
{
    int moreCode = 1;
    System.out.println(moreCode);
}

// Compile error: The variable moreCode doesn't exist here
System.out.println(moreCode); 
```

但是，这不是常用的。如果您觉得需要以这种方式使用块来限制范围，那么您的方法可能过于复杂，您应该考虑将它们拆分为更简单的方法。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T14:46:42.130

我使用它有三个原因：

*   最常见的是，在我初始化一个或多个最终值时声明/使用临时值：

    ```
    final int value;
    {
       final int counter;
       ... compute value ...
      value = counter;
    } 
    ```

*   否则“工作”而不将变量引入外部命名空间（限制范围）。

*   突出/区分属于一起的一段代码，但我还没有准备好推广到一个独立的方法（通常是为了保持代码的局部性以提高整体的可读性）。[在任何用例的 90% 中，都应该提升代码 - 这有点特殊]。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T15:25:03.287

另一个用例：为匿名子类声明最终变量。显然，您不能只在下面的匿名子类中引用“foo”。你必须使它成为“最终的”。作为替代方案，我们将值复制到一个新的最终变量中并使用它。新变量是执行期间特定时间点的“foo”快照值。

```
int foo = 1;

....

{
  final int bar = foo;
  Future<Void> future = executorService.submit(new Callable<Void>() { // use bar here });
} 
```

我意识到你可以在没有大括号的情况下做到这一点，但这限制了新变量的范围。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T14:39:51.307

它还允许您添加标签，以便您制作意大利面条代码！

```
MY_LABEL: {
  if (condition) {
    break MY_LABEL;
  }
  System.out.println("IN BLOCK");
}
System.out.println("OUTSIDE BLOCK"); 
```

如果`condition`为真，那么控制流将直接跳过第一个打印语句，您只会得到第二个打印。

***免责声明：***我不推荐使用意大利面条代码——这只是一个假设性的讨论，讨论你*可以*用这样的块做什么。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-15T14:38:22.970

如果您命名了您的代码块，您可以`break`通过寻址名称来阻止。

```
name1 : {
    name2 :{
        final int  i = 1;
        if( i == 1) {
            break name1;
        }
        System.out.println("name2");
    }
    System.out.println("name1");
} 
```

你也可以`limit the scope of a variable`，所以在块结束后，变量可以很容易地被垃圾收集。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-15T14:23:43.047

示例是`instance initializers`代码必须捕获异常的地方。

```
class SomeClass {
    private int myVar;

    // Instance initializer
    {
        try{ 
           myVar = getInitialValueFromDB(); 
        }  
        catch(Exception e){
           myVar = -1;
        }       
    }
    // no constructor here
    // ...
} 
```

# php - PHP中三元运算符左侧的大于符号有什么作用？

> ID：11971011
> 
> 赞同：0
> 
> 时间：2012-08-15T14:18:54.610
> 
> 标签：php, syntax, ternary-operator

我在 PHP 中遇到了一种用于三元运算的新语法。

```
$this->view->totalNumber > $itemsPerPage ? $this->view->renderPaginator = true 
                                         : $this->view->renderPaginator = false; 
```

如果结果值大于左侧变量的现有值，这是仅应用三元运算的某种速记吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T14:22:29.713

这只是比较操作。如果它有助于您理解，您可以像这样重写它：

```
($this->view->totalNumber > $itemsPerPage) ? $this->view->renderPaginator = true : $this->view->renderPaginator = false; 
```

现在编写它的更好方法是简单地执行以下操作：

```
$this->view->renderPaginator = ($this->view->totalNumber > $itemsPerPage); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T14:25:42.490

```
$this->view->renderPaginator = $this->view->totalNumber > $itemsPerPage; 
```

真的，人们。你们都应该感到羞耻。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T14:22:27.677

看起来代码所做的只是评估表达式

```
$this->view->totalNumber > $itemsPerPage 
```

它解析为布尔值 true 或 false，然后由三元运算符检查。

用括号括起来会更清楚：

```
($this->view->totalNumber > $itemsPerPage) ? $this->view->renderPaginator = true : $this->view->renderPaginator = false; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T14:27:07.190

这是 if 语句的简写。更复杂的版本

```
($a > $b) ? "execute here if a is greater than b" : "here if not"; 
```

因此，大于符号™ 就像比较运算符一样工作。

# php - 如果电子邮件不正确，PHP 邮件函数是否返回 true

> ID：11971014
> 
> 赞同：3
> 
> 时间：2012-08-15T14:18:57.723
> 
> 标签：php

我正在制作一个用于从用户那里收集数据的系统。我知道有些会是垃圾邮件！我只想知道如果电子邮件不正确，邮件功能是否返回false？

说我有。

```
 <?php

    $to = "fake@fake.com";
    $header = "From: {$to}";
    $subject = "Hi!";
    $body = "Hi,\n\nHow are you?";

    if (mail($to, $subject, $body, $header)) {
          echo("<p>Message successfully sent!</p>");
    } else {
          echo("<p>Message delivery failed...</p>");
    }

   ?> 
```

如果电子邮件不正确，将打印哪条消息？

如果它确实返回 false，我希望将一个“标志”与它一起存储在该数据库中，以便管理员可以查看并删除它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T14:21:13.260

不必要。

根据[手册](http://php.net/manual/en/function.mail.php)，如果消息被接受传递，该[`mail()`](http://php.net/manual/en/function.mail.php)函数将返回`true`- 但不保证它会被传递：

> 如果邮件被成功接受传递，则返回 TRUE，否则返回 FALSE。
> 
> 重要的是要注意，仅仅因为邮件被接受交付，并不意味着邮件实际上会到达预定目的地。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T14:20:57.757

服务器只能告诉您邮件是否被接受传递。除非你写了一个无效的电子邮件地址或类似的“没有电子邮件”，所以服务器会拒绝它，那么不，可悲的是，它只能说“是的，邮件被放入了电子邮局”或“不”它不是“它不能告诉你它是否到达那里，阅读，或以其他方式。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T14:28:34.537

在您在评论中概述的情况下

```
fake@gmail.com 
```

就邮件系统而言，这是一个有效的电子邮件地址。

> 消息发送成功！

将显示。邮件功能不保证能到达收件人。在你问它不可能检查之前。

# android - 点击Android通知后的AlertDialog

> ID：11971015
> 
> 赞同：1
> 
> 时间：2012-08-15T14:19:00.187
> 
> 标签：android, android-alertdialog, android-notifications

当通知出现在 Android 通知栏中时，点击它的操作由创建它时使用的 PendingIntent 定义，对吗？

但是，我不想在用户点击通知时启动活动，而是只想显示一个 AlertDialog。这可能吗？

AlertDialog 应该询问：“关闭通知”或“1 小时后再次显示”等等。

有没有办法只显示这个 AlertDialog 或者我必须启动一个活动，无论如何？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:20:27.550

您必须创建一个不设置 contentView 而只是弹出对话的活动。并记住`finish();`对话被驳回时的活动。

# javascript - 如何在node.js中的两个相同主机之间进行负载平衡（弹性）

> ID：11971020
> 
> 赞同：0
> 
> 时间：2012-08-15T14:19:31.297
> 
> 标签：javascript, json, node.js, load-balancing, bounce

我在两个相同的主机但不同的端口之间弹跳时遇到问题。

所以我在 node.js 中使用模块[弹性](https://github.com/substack/bouncy/)，我有两个应用程序托管在同一主机（本地主机）上，但侦听不同的端口。

我正在使用一个`routes.json`

`{ "localhost" : 8001, "localhost" : 8000 }`

并将弹跳点指向命令行。

但它似乎不适用于两个相同的主机？只有带端口的主机才能`8000`工作...

有什么解决办法吗？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:41:53.973

我认为您误解了以下要点`routes.json`：哈希中的键代表虚拟主机名。

它可以与域名一起使用，例如：

```
{ "dev.xx.com" : 8001, "prod.xx.com" : 8000 } 
```

基于文件的配置通过检查`req.headers.host`来决定将流量路由到哪里来工作。

您是否尝试在“localhost”上对同一应用程序的两个实例进行负载平衡？在这种情况下，您应该查看节点中内置的集群库：[http ://nodejs.org/api/cluster.html](http://nodejs.org/api/cluster.html)

编辑：

cluster 和 bouncy 都可以用来为您负载平衡请求。如果使用 bouncy，则必须自己编写一个简单的循环方案（不能使用 routes.json），集群已内置。

bouncy 的另一个缺点（对于您的特定用例）是 bouncy 不会监控它反弹请求的服务器。您必须向 bouncy 添加逻辑以检查两个服务器是否都响应。同样，这一切都内置在集群中（它将服务器作为子进程运行，并且可以在它们出现故障时重新启动它们。）集群还可以用于使用新代码安全地重新启动子服务器而不会丢失任何请求。

总而言之：如果您想将 Bouncy 用作代理，Bouncy 是可以的，但集群是为了负载平衡而设计的。

# file - 如何在 Windows（尤其是 Windows 7）中安装 NASM？

> ID：11971022
> 
> 赞同：1
> 
> 时间：2012-08-15T14:19:34.533
> 
> 标签：file, input, installation, nasm

我按照主网站上的教程进行操作。它说只是复制 nasm.exe 文件。但是当我打开它时，会出现一个黑色的控制台窗口，上面写着“没有指定输入文件”并键入“nasm -h”寻求帮助，然后窗口在几分之一秒内消失。该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-27T13:21:24.833

从我所见，您不会在nasm命令窗口中编写汇编代码，而是在记事本之类的东西中编写汇编代码，然后将文件保存到其中并使用nasm进行编译。我没有很多经验，所以这可能是错误的。希望这可以帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T14:26:39.680

打开命令窗口，导航到放置 nasm.exe 的文件夹，然后键入“nasm -h”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-17T09:47:27.720

这就是为什么许多程序员不喜欢汇编语言而不喜欢 IDE 的原因。您可以在网上搜索 radasm，我认为它也适用于 nasm。

# soap - WS-Security：X509 证书在 BinarySecurityToken ValueType 和 EncodingType 中的不同命名空间

> ID：11971024
> 
> 赞同：1
> 
> 时间：2012-08-15T14:19:51.537
> 
> 标签：soap, xml-namespaces, ws-security

我目前正在编写一个使用肥皂服务的客户端，并注意到与我从 Web 服务供应商处获得的示例相比，我们正在编写的客户端的 SOAP 调用中有一些奇怪的地方。

对于 的`ValueType`属性`BinarySecurityToken`，它`http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3`用作类型，而我的示例使用`wsse:X509v3`，其中 wsse 定义为`http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd`。

从大量的互联网研究来看，这些命名空间的使用似乎大致相同，我怀疑它们是等效的，但仍然想知道是否存在差异以及为什么有两个命名空间。

同样对于`EncodingType`，您可以使用`wsse:Base64Binary`或

```
http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-21T05:13:20.360

我浏览了[WSS X509 Token Profile 1.0](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0.pdf)和[WSS X509 Token Profile 1.1](http://docs.oasis-open.org/wss/v1.1/wss-v1.1-spec-os-x509TokenProfile.pdf)规范。ValueType 的两个值似乎都是正确的。但是“http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0”不是命名空间。它是为规范定义的 URI [规范 1.0 的第 171 行和规范 1.1 的第 158 行]。两种规范都使用 WSSE，即[http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd](http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd)作为命名空间。

所以我的结论是 ValueType="wsse:x509v3" （规范 1.0 第 308 行）相当于 ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509- token-profile-1.0#X509v3"（规范 1.1 第 340 行）

# java - 覆盖方法和字段的不同行为

> ID：11971027
> 
> 赞同：4
> 
> 时间：2012-08-15T14:20:02.167
> 
> 标签：java

我刚刚注意到覆盖方法的行为确实与覆盖字段不同。考虑以下代码段：

```
public class Bar {
  int v =1;

  public void printAll(){
    System.out.println(v);
    printV();
  }

  public void printV(){
    System.out.println("v is " + v);
  }
}

public class Foo extends Bar {
  int v = 4;

  public static void main(String[] args) {
    Foo foo = new Foo();
    foo.printAll();
 }

 public void printV() {
   System.out.println("The value v is  " + v);
 }
} 
```

它导致输出：
1
值 v 是 4

所以似乎 bar 中的 printV 方法被 foo.printV 覆盖，而 bar 中的字段 v 没有被覆盖。有谁知道这种差异的原因？

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T14:21:51.170

> 我刚刚注意到覆盖方法的行为确实与覆盖字段不同。

没有“覆盖字段”之类的东西。您可以*隐藏*字段，但不能覆盖它们。字段不是多态的。有关更多详细信息，请参阅[Java 语言规范的第 6.4.1 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.4.1)。

请注意，通常，无论如何，字段几乎*总是*应该是私有的，这意味着您首先不会意识到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:26:08.927

当您调用 foo.printAll(); 它正在调用打印值 1 的基类的函数。然后您正在调用 printV。这次由于继承的类具有相同名称的函数，它被覆盖并调用 Foo 的 printV。

v 的值取决于您从哪个类打印该值。

# objective-c - 如何使用 cocos2d 获取 mp3 文件的持续时间

> ID：11971028
> 
> 赞同：-4
> 
> 时间：2012-08-15T14:20:02.177
> 
> 标签：objective-c, cocos2d-iphone

如何通过 cocos2d 获取播放 mp3 的时长

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T04:33:01.023

我找到了答案，那就是“[[[[CDAudioManager] sharedManager] backgroundMusic] currentTime];”

# asp.net - 在代码隐藏文件C#中将boundField添加到gridview

> ID：11971035
> 
> 赞同：2
> 
> 时间：2012-08-15T14:20:22.683
> 
> 标签：asp.net, gridview, add, code-behind, boundfield

我想在代码隐藏文件 asp.net C# 中创建新的 gridview。正是我想通过c#代码将这样的boundfield添加到gridview：

```
<asp:BoundField DataField="p_type" HeaderText="type" ItemStyle-Width="70px">
   <ItemStyle Width="70px"></ItemStyle>
</asp:BoundField> 
```

我用以下代码创建了新的gridview：

```
 GridView GridView1 = new GridView();
 GridView1.AllowPaging = false;
 GridView1.CellPadding = 4;
 GridView1.GridLines= GridLines.None;
 GridView1.AutoGenerateColumns = false; 
```

我想在这个 gridview 中添加新的 boundField。如何用 c# 代码做到这一点？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T14:27:04.467

本文向您解释如何在 c# 代码中实现 gridview： http: [//www.codeproject.com/Articles/13461/how-to-create-columns-dynamically-in-a-grid-view](http://www.codeproject.com/Articles/13461/how-to-create-columns-dynamically-in-a-grid-view) 这里有一个示例代码来创建它：

```
public partial class _Default : System.Web.UI.Page
{
    #region constants
    const string NAME = "NAME";
    const string ID = "ID";
    #endregion

    protected void Page_Load(object sender, EventArgs e)
    {
        loadDynamicGrid();
    }

    private void loadDynamicGrid()
    {
        #region Code for preparing the DataTable

        //Create an instance of DataTable
        DataTable dt = new DataTable();

        //Create an ID column for adding to the Datatable
        DataColumn dcol = new DataColumn(ID ,typeof(System.Int32));
        dcol.AutoIncrement = true;
        dt.Columns.Add(dcol);

        //Create an ID column for adding to the Datatable
        dcol = new DataColumn(NAME, typeof(System.String));
        dt.Columns.Add(dcol);

        //Now add data for dynamic columns
        //As the first column is auto-increment, we do not have to add any thing.
        //Let's add some data to the second column.
        for (int nIndex = 0; nIndex < 10; nIndex++)
        {
            //Create a new row
            DataRow drow = dt.NewRow();

            //Initialize the row data.
            drow[NAME] = "Row-" + Convert.ToString((nIndex + 1));

            //Add the row to the datatable.
            dt.Rows.Add(drow);
        }
        #endregion

        //Iterate through the columns of the datatable to set the data bound field dynamically.
        foreach (DataColumn col in dt.Columns)
        {
            //Declare the bound field and allocate memory for the bound field.
            BoundField bfield = new BoundField();

            //Initalize the DataField value.
            bfield.DataField = col.ColumnName;

            //Initialize the HeaderText field value.
            bfield.HeaderText = col.ColumnName;

            //Add the newly created bound field to the GridView.
            GrdDynamic.Columns.Add(bfield);
        }

        //Initialize the DataSource
        GrdDynamic.DataSource = dt;

        //Bind the datatable with the GridView.
        GrdDynamic.DataBind();
    }
} 
```

# sql - VBA - SQL更新与列匹配的行

> ID：11971037
> 
> 赞同：0
> 
> 时间：2012-08-15T14:20:27.450
> 
> 标签：sql, ms-access, vba

我正在使用 MS Access，目前正在使用 VBA，现在有 2 个表。我正在尝试从另一个表中插入/更新行。不同之处在于一个表的数据在行方向，另一个在列方向，这是第一个表（表 A），第一行作为标题：

```
Item_Num  Cost  YearMonth
1         2     201101
2         5     201102 
```

这就是我希望以第一行作为标题的方式更新此表（表 B）：

```
Item_Num  201101  201102  201103  201104  ...
1         2       2       2       2
2         1       5       5       5 
```

在表 A 中，201101 的 YearMonth 是 Item_Num 1 的 Cost of 2。因此表 B 将针对 Item_Num 1 更新 201101 和（到最后一个 YearMonth 列），成本为 2。

我已经能够更新它出现的第一个 YearMonth（上一个示例中的 201101），但似乎无法获取剩余的列。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:47:31.940

好吧，我似乎已经明白了。我决定创建一个临时表来存储我想为表 B 更新的值，它有点乱，但它可以工作。

# objective-c - 如何从私有 Cocoa 框架中导出标头？

> ID：11971039
> 
> 赞同：0
> 
> 时间：2012-08-15T14:20:37.003
> 
> 标签：objective-c, xcode, cocoa

有一个框架在

```
/Applications/Xcode.app/Contents/OtherFrameworks/DevToolsCore.framework 
```

我想知道是否有可能以某种方式获取标题信息？

这是一个理论上允许为 XCode 创建插件的框架。

标题看起来像这样

![在此处输入图像描述](../Images/f70fa3f0c93a4b43187619b49b8c77ce.png)

而且我无法像往常一样使用公共框架访问标题。但必须有办法，因为我在网上找到了一些列出类的资源，但类描述不再可用：[https://github.com/phausler/XcodeAPI/blob/gh-pages/Frameworks/DevToolsCore。 MD](https://github.com/phausler/XcodeAPI/blob/gh-pages/Frameworks/DevToolsCore.md)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:29:41.373

您可以使用[class-dump](http://www.codethecode.com/projects/class-dump/)实用程序来提取所有 Objective-C 类以及 ivar 和方法信息。

# linux - 每日 Unix 自动 NTP 时间同步

> ID：11971040
> 
> 赞同：0
> 
> 时间：2012-08-15T14:20:40.613
> 
> 标签：linux, unix, time, synchronization, timedelay

我的应用程序在 Linux 服务器上运行，每隔三四天，服务器时间和 EST 时间有 2 到 40 秒之间的差异。有什么方法可以每天与 NTP 保持同步时间。

该应用程序运行 24X7，因此无法每天重新启动以进行同步。现在我们通过手动设置时间来解决这个问题。

感谢和赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:22:23.613

添加一个简单的 cron 作业以在您希望的任何时间运行 ntp。

```
#Set time
0 0 * * * /usr/sbin/ntpdate ntp2.ja.net 
```

# node.js - 在 CentOS 5 服务器上安装 Nodejs 时出错 - 没有模块 bz2

> ID：11971041
> 
> 赞同：4
> 
> 时间：2012-08-15T14:20:44.120
> 
> 标签：node.js, centos5, bzip2

我正在尝试在我的 CentOS 5 服务器上安装 NodeJS

我安装了 Python 2.6，并且 ./configure 可以工作，但是当我运行`make`命令时，我得到了这个结果

```
[root@catch24dev node-v0.8.6]# make
make -C out BUILDTYPE=Release V=1

....

Traceback (most recent call last):
  File "../../tools/js2c.py", line 36, in <module>
    import bz2
ImportError: No module named bz2
make[1]: *** [/usr/local/src/node-v0.8.6/out/Release/obj/gen/libraries.cc] Error 1
make[1]: Leaving directory `/usr/local/src/node-v0.8.6/out'
make: *** [node] Error 2
[root@catch24dev node-v0.8.6]# which bzip2
/usr/local/bin/bzip2 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-18T20:07:32.353

请注意，此问题的另一个解决方案（无法编译 node.js）是使用[自 0.8.6 以来已发布的 Linux 二进制发行版](http://blog.nodejs.org/2012/08/07/node-v0-8-6-stable/)

这是我使用的脚本：

```
# get the latest stable binary 
# (modify version number based on what you find in that folder)
wget http://nodejs.org/dist/latest/node-v0.8.20-linux-x64.tar.gz
cd /usr/local/
sudo tar xzvf ~/node-v0.8.20-linux-x64.tar.gz --strip=1 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-13T03:28:41.843

**当我在 Centos 6.4 上运行make**时，我也遇到了与 Marius Milliunas 相同的错误——那是在我从下载的 nodejs tarball 中提取的 nodejs 目录中运行**./configure命令之后。**就像马里乌斯·米利乌纳斯所做的那样。

问题的根源在于 nodejs 安装依赖于正在安装的 Python。具体来说，Centos 6.4 的默认 Python 安装不包括 bz2 模块，纠正措施当然是从安装 bz2 模块开始的。这是通过运行

```
yum install bzip2-devel 
```

我也跑得很好

```
yum install bzip2 
```

Centos 6.4 的内置 Python 是 Python 2.6.6 但这对于安装最新版本的 nodejs 来说很好，在撰写本文时它是 node v0.10.26

运行 **yum install bzip2-devel**后，您可以返回并在 nodejs 目录中运行**make ，这一次，** **make**将运行完成。按照nodejs 目录中设置的说明运行**make install来跟进。**

**您可以通过运行node**并获得提示来测试您的 nodejs 安装。我选择通过创建基于 nodejs 的 Web 服务器进行测试，如[http://code.tutsplus.com/tutorials/real-time-chat-with-nodejs-socketio-and-expressjs--net-31708中所述](http://code.tutsplus.com/tutorials/real-time-chat-with-nodejs-socketio-and-expressjs--net-31708)

我知道世界上一切都很酷，并且当我按照这个说明操作时，我已经在 Centos 6.4 上正确安装了 nodejs

```
The server is running, so you should be able to open http://127.0.0.1:3700/ and see:

It works! 
```

并按预期得到了“它的工作原理”输出:)

**重要的提示**

如果您在 Centos 6.4 机器上另外安装 Python 2.7.6 和 Python 3.3.4，请按照此链接上的说明进行操作：[https ://www.digitalocean.com/community/articles/how-to-set-up-python -2-7-6-and-3-3-3-on-centos-6-4](https://www.digitalocean.com/community/articles/how-to-set-up-python-2-7-6-and-3-3-3-on-centos-6-4)

安装 Python 2.7.6 和 Python 3.3 完全是可选的。请注意，安装 Python 2.7.6 和 Python 3.3.4 的最后一步是

```
make altinstall 
```

而**不是**“make install” 我错误地运行了“make install”并破坏了我对 Python 2.6.6 系统的访问权限以及对 yum 的访问权限。事实上，我推测我破坏了我对 Centos 6.4 上每个依赖于系统 Python 的访问才能正常工作的程序的访问。如果我在那个时间点成功安装了 nodejs，我也会破坏我对 nodejs 的访问。我必须销毁并重新创建 /usr/local/bin/python2 作为指向 /usr/local/bin/python2.6 的软链接，并对 /usr/bin/python2 执行相同操作以使事情恢复正常。没有太多乐趣。

# objective-c - UITableViewCell 和消失的分隔符

> ID：11971055
> 
> 赞同：3
> 
> 时间：2012-08-15T14:21:26.603
> 
> 标签：objective-c, ios, uitableview

我尝试在 UITableView 中实现我自己的简单单元格样式，但分隔符有问题。在正常视图下效果很好，但是当我选择一个单元格时它会消失。我尝试添加到我的 customSelect 视图分隔符，但是我在任何地方都看不到分隔符。如何为选定的单元格添加分隔符？

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *MyCellIdentifier = @"MyCellIdentifier";

    UITableViewCell *cell = [wallMenuTableView dequeueReusableCellWithIdentifier:MyCellIdentifier];

    if(cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:MyCellIdentifier];

        MenuItemModel *mItem = [menu.menuPositions objectAtIndex:indexPath.row];
        cell.textLabel.text = mItem.displayName;
        cell.textLabel.textColor = [UIColor colorWithRed:0.70 green:0.70 blue:0.70 alpha:1.0];
        cell.textLabel.backgroundColor = [UIColor clearColor];
        cell.textLabel.font = [UIFont fontWithName:@"ArialMT" size:16];
        cell.textLabel.shadowColor = [UIColor blackColor];
        cell.textLabel.shadowOffset = CGSizeMake(0.0, 1.0);

        customSeparator = [[UIView alloc] initWithFrame:CGRectMake(0, (cell.frame.origin.y), 320, 2)];
        customSeparator.backgroundColor=[UIColor blackColor];
        [customSeparator.layer setShadowOffset:CGSizeMake(0.0, 0.8)];
        [customSeparator.layer setShadowOpacity:0.8];
        [customSeparator.layer setShadowRadius:0.8];
        [customSeparator.layer setShadowColor:[UIColor grayColor].CGColor];
        [cell.contentView addSubview:customSeparator];

        customSelect = [[UIView alloc] initWithFrame:CGRectMake(0, (cell.frame.origin.y+2), cell.frame.size.width, cell.frame.size.height)];
        //[customSelect addSubview:customSeparator];
        customSelect.backgroundColor = [UIColor clearColor];
        [cell setSelectedBackgroundView:customSelect];

    }

    return cell;
} 
```

目前的结果：

![在此处输入图像描述](../Images/5ccf79d9cf8849c4f73db210101bf056.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T16:24:10.607

使用 UIImageView 而不是简单的 UIView 作为分隔符。设置 Image 值（这很重要！）而不是 backgroundColor 值并使用比例拉伸图像以进行填充。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:27:58.163

也许你的 costumSelect 在 Cell 的 contentView 下。我之前实现过这样的行为，但是我将 UITableViewCell 子类化了。尝试在您的自定义单元格上覆盖 setSelected 方法。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-15T14:37:34.023

使用 tableView.separatorColor（和 tableView.separatorStyle）设置对比分隔符颜色。如果您在单元格中绘制自己的分隔符，请设置 separatorStyle=UITableViewCellSeparatorStyleNone。此外，将 selectionStyle 设置为 UITableViewCellSelectionStyleNone 可能会对您有所帮助

# c#-4.0 - 元组之间的转换 和键值对

> ID：11971058
> 
> 赞同：7
> 
> 时间：2012-08-15T14:21:40.603
> 
> 标签：c#-4.0

`KeyValuePair<T1, T2>`和之间是否有任何内置转换或强制转换`Tuple<T1, T2>`？

我知道这将是一个微不足道的扩展方法：

```
public static KeyValuePair<T1, T2> ToPair<T1, T2>(this Tuple<T1, T2> source)
{
    return new KeyValuePair<T1, T2>(source.Item1, source.Item2);
}

public static Tuple<T1, T2> ToTuple<T1, T2>(this KeyValuePair<T1, T2> source)
{
    return Tuple.Create(source.Key, source.Value);
} 
```

但是由于对象可以用于类似的目的（特别是因为`KeyValuePair<>`它经常用于代替 2 元素`Tuple<>`，直到它被添加到 C#4.0 中），我想知道这样的转换器是否已经内置到框架中？

我问的原因是我正在使用一个较旧的库（针对 .NET 3.5），该库`KeyValuePair<>`在许多地方使用元组可能更合适，并且我想`Tuple<>`在新代码中使用。所以我想弄清楚我是否可以将`kvp`这些方法的返回值转换或转换为，`Tuple`或者我是否需要定义自己的转换（或更改旧代码）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T17:12:28.137

据我所知，BCL 中没有内置转换，而且绝对没有隐式或显式转换。我怀疑他们是否会添加这种转换，因为这些类型用于不同的目的。

我觉得你的版本很好。

# c# - TestMethod 生成错误 CS0201

> ID：11971059
> 
> 赞同：3
> 
> 时间：2012-08-15T14:21:41.093
> 
> 标签：c#, unit-testing, mstest

这可能是我需要摆脱系统的哲学咆哮，另一方面，我可能做错了什么，如果是这样，请告诉我！

我有一个单元测试，看起来像这样：

```
[TestMethod]
[ExpectedException(typeof(NotImplementedException))]
public void Test_XXXAccess()
{
    ControlPoint.MyObject.XXXAccess;
} 
```

当测试在特定上下文中运行时，它会检查属性 XXXAccess 是否未实现。此测试生成编译错误 CS0201：**“只有赋值、调用、递增、递减和新对象表达式可以用作语句”**虽然我同意这是生产代码中的错误，但我认为将其应用于单元测试是错误的。当然我可以将代码重写为：

```
[TestMethod]
[ExpectedException(typeof(NotImplementedException))]
public void Test_XXXAccess()
{
    MyType x = ControlPoint.MyObject.XXXAccess;
} 
```

但这（对我而言）似乎更不正确，因为您现在已将其分配给一个变量，除了使错误静音之外什么也不做。

有没有更好的方法来编写测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:27:22.997

如果您想检查该类型*是否没有*该名称的属性，则测试应在`typeof(whatever)`;上使用反射。如果要检查 getter / setter**方法**是否抛出`NotImplementedException`，则需要实际**调用**该方法。

毕竟，您可能实现了 getter 而不是 setter；在这种情况下，您只想“提及”该物业做什么？最好实际调用*您感兴趣的代码*并断言会发生什么。

我想如果它是您感兴趣的 getter，您*可以*反映以获取 getter 方法，然后就是`Invoke`它（这不需要声明一个您然后不使用的本地），但这会比您已经确定为解决方案的内容。

# c++ - 如何在 c 中使用 c++ 对象？

> ID：11971063
> 
> 赞同：8
> 
> 时间：2012-08-15T14:21:54.103
> 
> 标签：c++, c

我的视觉工作室中有 2 个项目解码器和解码器。一个有 C 代码，另一个有 C++ 代码，分别使用 stl。如何在解码项目中的 c 代码中实例化 c++ 类？

```
for e.g.
//instantiating object
reprVectorsTree *r1 = new reprVectorsTree(reprVectors1,8);
//using one of its function
r1->decode(code); 
```

我需要为此做些什么？

如何从另一个项目访问文件？

如何在 C 文件中使用现有的 c++ 代码？

--------编辑---------我有这样的课

```
class Node//possible point in our input space
{
public:
    std::vector<float> valuesInDim;//values in dimensions
    std::vector<bool> code;
    Node(std::vector<float>value);
    Node::Node(float x, float y);
Node::Node(std::vector<float> value,std::vector<bool> binary);

}; 
```

如何在 c++ 中使用上述类？如果 C 只允许结构，我如何将它映射到结构？

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-08-15T14:29:59.390

给 C++ 模块一个 C 接口：

**魔术.hpp：**

```
struct Magic
{
    Magic(char const *, int);
    double work(int, int);
}; 
```

**magic.cpp：（**实现`Magic`。）

**魔术接口.h：**

```
struct Magic;

#ifdef __cplusplus
extern "C" {
#endif

typedef Magic * MHandle;
MHandle create_magic(char const *, int);
void    free_magic(MHandle);
double  work_magic(MHandle, int, int);

#ifdef __cplusplus
}
#endif 
```

**魔术接口.cpp：**

```
#include "magic_interface.h"
#include "magic.hpp"

extern "C"
{
    MHandle create_magic(char const * s, int n) { return new Magic(s, n); }
    void    free_magic(MHandle p) { delete p; }
    double  work_magic(MHandle p, int a, int b) { return p->work(a, b); }
} 
```

现在一个 C 程序可以`#include "magic_interface.h"`并使用以下代码：

```
MHandle h = create_magic("Hello", 5);
double d = work_magic(h, 17, 29);
free_magic(h); 
```

（您甚至可能想在任何地方定义`MHandle`as`void *`并添加强制转换，以避免`struct Magic`在 C 标头中声明。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:27:23.887

使用 C++ 导出函数制作用于实例化 C++ 对象的包装器。然后从 C 代码中调用这些函数以生成对象。

由于一个是面向函数的，另一个是面向对象的，因此您可以在包装器中使用一些想法：-

1.  为了复制类成员，将一个等效的预先指定的结构从 C 代码传递到相应的 C++ 函数以获取数据。
2.  尝试使用函数指针，因为它会降低成本，但要小心它们也可能被利用。

[其他几种方式。](http://developers.sun.com/solaris/articles/mixing.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:31:27.813

您需要用 C 编写一个包装器。

像这样的东西：

在 class.h 中：

```
struct A{
   void f();
} 
```

在 class.cpp 中：

```
void A::f(){
} 
```

包装器.cpp：

```
#include "wrapper.h"
void fWrapper(struct A *a){a->f();};
struct A *createA(){
   A *tmp=new A();
   return tmp;
}

void deleteA(struct A *a){
 delete a;
} 
```

C 的 wrapper.h：

```
struct A;
void fWrapper(struct A *a);
A *createA(); 
```

C程序：

```
#include "wrapper.h"
int main(){
    A *a;
    a=createA();
    fWrapper(a);
    deleteA(a);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-18T22:34:12.303

简单来说，您只需执行以下操作：

1.  编写一个接口函数，将所有类函数（构造函数、析构函数、成员函数）转换为纯函数，并封装为`extern "C"{ }`
2.  将指向类的指针转换为指向 void 的指针，并在定义“纯函数”的任何地方***小心地***使用类型转换
3.  在 C 代码中调用纯函数。

例如，这是我的简单 Rectangle 类：

```
/*** Rectangle.h ***/
class Rectangle{
private:
    double length;
    double breadth;
public:
    Rectangle(double iLength, double iBreadth);
    ~Rectangle();
    double getLength();
    double getBreadth();
};

/*** Rectangle.cpp ***/
#include "Rectangle.h"
#include <iostream>
extern "C" {
    Rectangle::Rectangle(double l, double b) {
        this->length = l;
        this->breadth = b;
    }

    Rectangle::~Rectangle() {
        std::cout << "Deleting object of this class Rectangle" << std::endl;
    }

    double Rectangle::getLength() {
        return this->length;
    }

    double Rectangle::getBreadth() {
        return this->breadth;
    }
} 
```

现在这是我将类函数转换为纯函数的接口。注意指向类的指针是如何处理的！

```
/*** RectangleInterface.h ***/
#ifdef __cplusplus
extern "C" {
#endif
    typedef void * RHandle;
    RHandle create_Rectangle(double l, double b);
    void    free_Rectangle(RHandle);
    double  getLength(RHandle);
    double  getBreadth(RHandle);

#ifdef __cplusplus
}
#endif

/*** RectangleInterface.cpp ***/ 
#include "RectangleInterface.h"
#include "Rectangle.h"
extern "C"
{
    RHandle create_Rectangle(double l, double b){
        return (Rectangle*) new Rectangle(l, b);
    };
    void free_Rectangle(RHandle p){
        delete (Rectangle*) p;
    }
    double getLength(RHandle p){
        return  ((Rectangle*) p)->getLength();
    }
    double getBreadth(RHandle p){
        return ((Rectangle*)p)->getBreadth();
    }
} 
```

现在我可以在我的“.c”文件中使用这些接口函数，如下所示。我只需在此处包含 RectangleInterface.h 函数，其余部分由其函数处理。

```
/*** Main function call ***/
#include <stdio.h>
#include "RectangleInterface.h"

int main()
{
    printf("Hello World!!\n");
    RHandle myRec = create_Rectangle(4, 3);
    printf("The length of the rectangle is %f\n", getLength(myRec));
    printf("The area of the rectangle is %f\n", (getLength(myRec)*getBreadth(myRec)));
    free_Rectangle(myRec);
    return 0;
} 
```

# c++ - 通过基类列表调用派生类对象的析构函数

> ID：11971065
> 
> 赞同：2
> 
> 时间：2012-08-15T14:22:06.213
> 
> 标签：c++, class, derived, virtual-destructor

我得到了这个类来获取所有派生对象的列表

```
Register.h
-----------------
class Register {
...
public:

// static object list
static list<Register*> instances;

// default constructor for register object
Register::Register();

// virtual destructor to clean up with subobject destructor first
virtual Register::~Register();

// default methods for this class
static void Register::stop();

Register.cpp
-----------------
#include "Register.h"

// list with all object instances made by this programm
list<Register*> Register::instances;

// default destructor
Register::~Register() {
  list<Register*>::iterator p = find(instances.begin(), instances.end(), this);
  if (p != instances.end()) {
    instances.erase(p);
  }
}

// erase all instances clean up the dish
void Register::stop() {
  // last log message
  Log::write("register cleanup");
  // stops the logging object
  Log::stop();
  // clean up instances
  list<Register*>::iterator iter = instances.begin();
  list<Register*>::iterator end  = instances.end();
  while (iter != end) {
    cout<< endl << (*iter) -> typeName << endl;
    //delete *iter;
  }
  Register::instances.clear();
} 
```

和派生类

```
File.h
-----------------
class File : public Register {
...
// default destructor
virtual File::~File(void);
...
}

File.cpp
-----------------
// default destructor
File::~File(void) {
  cout << "file destr";
  this -> deleteFile();
}

Log.h
-----------------
// this class implements a log handler
// (derived from register)
class Log : public File {

public:
  // singelton logging object
  static Log* log;

  // default destructor
  Log::~Log(void);

Log.cpp
-----------------
using namespace std;

// declare pointer for easy logging
Log* Log::log = NULL;

// default destructor
Log::~Log(void) {
cout << "log destr";
} 
```

现在我想删除整个结构，只需删除列表和其中的对象..

我试过了

```
 Main.cpp
-----------------
 int main (int argc, char *argv[], char *envp[]) {

   Register::stop();

   return 1;
 } 
```

但对象仍被实例化

我没主意了^^

亲切地..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:30:00.493

> 注册::instances.clear();

这会清除指针列表，但不会对对象做任何事情。您需要在清除列表之前自己删除它们，例如这样

```
for (list<Register *>::iterator it = Register::instances.begin();
     it != Register::instances.end();
     ++it) {
    delete *it;
}
Register::instances.clear(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T14:37:46.007

作为手动清除列表的替代方法，C++11 引入了与 STL 容器兼容的 std::unique_ptr<> 智能指针。

```
static std::list<std::unique_ptr<Register>> instances; 
```

基本上会负责删除对象。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:34:05.167

~~好的。。我解决了。。~~

```
// clean up instances
list<Register*>::iterator iter = instances.begin();
list<Register*>::iterator end  = instances.end();

while (iter != end) {
  iter = instances.erase(iter);
}
Register::instances.clear(); 
```

# actionscript-3 - 音频 FLVPlayback 不起作用

> ID：11971067
> 
> 赞同：1
> 
> 时间：2012-08-15T14:22:13.600
> 
> 标签：actionscript-3, flash, netstream, flash-media-server, flvplayback

我目前有一个 SWF 应用程序，可以记录音频并将其保存到 FMS。然后在 Flash Professional 中，我尝试使用 FLVPlayback 组件来播放录音，但它从不播放。

录音保存在这里：`RootInstall/applications/myapp/streams/folder/audioFile.flv`

然后我查看了我的 FLVPlayback 组件源，`rtmp://server-ip/myapp/streams/folder/audioFile`但我无法播放它。

我还复制了录制的音频文件并将其卡在 vod 应用程序中，但无法播放。当我尝试 sample.flv 视频时，它们起作用了。

这是我在 AS3 中录制音频的方式：

```
nc.connect("rtmp://server-ip/myapp/folder");
...
ns = new NetStream(nc);
ns.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);

mic = Microphone.getMicrophone();
ns.attachAudio(mic);

// start publishing
ns.publish("audioFile", "record"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T20:37:57.673

录制方面的一切都是正确的，这是我试图读取 FLV 的方式不正确。

根据上面的代码，这是`player`我编码的一面。

```
...
nc = new NetConnection();
nc.addEventListener(NetStatusEvent.NET_STATUS, netStatusHandler);
nc.connect("rtmp://server-ip/myapp/folder");

private function netStatusHandler(event:NetStatusEvent):void
{
    trace(event.info.code);
    switch (event.info.code)
    {
        case "NetConnection.Connect.Success" :
            //Connected Successfully
            playLiveStream();
            break;
        case "NetConnection.Connect.Rejected" :
            // Connection Rejected
            break;
        case "NetConnection.Connect.Failed" :
            // The server may be down or unreachable
            break;
        case "NetConnection.Connect.AppShutDown" :
            // The application is shutting down
            nc.close();
            break;
        case "NetConnection.Connect.Closed" :
            //Connection Closed
            break;
    }
}

private function playLiveStream():void {
    nsPlay = new NetStream(nc);
    nsPlay.client = this;
    nsPlay.bufferTime = 0.1;
    nsPlay.play("audioFile", -1); 
} 
```

# html - IE7表格colspan固定宽度问题

> ID：11971068
> 
> 赞同：0
> 
> 时间：2012-08-15T14:22:16.270
> 
> 标签：html, css, html-table

我有一个 IE7 的问题，我有一个 4 列和 3 行的表。第一行和第三行的第一列具有固定宽度，第二行第一列的 colspan 为 2。我已经设置了一个小提琴，但我无法理解我做错了什么（除了尝试支持IE 7！）

谁能告诉我如何让第一列实际上是 60px 宽？

[http://jsfiddle.net/9GNJd/1/](http://jsfiddle.net/9GNJd/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:28:31.337

尝试添加 CSS “table-layout:fixed;” 到表格元素上。

# php - Linux Box 使用 PHP 将文件写入 Windows Server Web 共享

> ID：11971069
> 
> 赞同：0
> 
> 时间：2012-08-15T14:22:16.970
> 
> 标签：php, windows, linux, fwrite

我们有一堆 linux 和 windows 服务器。

在我的 Windows 桌面上，我可以看到所有共享。

使用 PHP 我正在尝试使用 UNC 路径将文件写入 Windows 共享上的目录。

```
//ServerShare/directory/file.txt 
```

使用`fwrite`说它成功地写入了文件，但该文件从不存在于服务器上。

使用`opendir`函数表示该目录不可访问。

这是非常简单的来源。

```
 $file_name = "\\SERVER2\Share\CPI\data.txt";

if (!$handle = fopen($file_name, 'w')) {
     echo "Cannot open file ($file_name)";
     exit;
}

// Write $somecontent to our opened file.
$somecontent = "this is a test";
if (fwrite($handle, $somecontent) === FALSE) {
    echo "Cannot write to file ($filename)";
    exit;
}

echo "Success, wrote ($somecontent) to file ($file_name)";

fclose($handle); 
```

关于需要设置哪些类型的权限才能让 linux 机器将文件写入 Windows 机器的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:27:08.367

您应该将文件共享挂载到本地目录：

```
mount -f smbfs //user@server2/Share/CPI/Data.txt /media/share 
```

然后`/media/share/Share/CPI/Data.txt`从您的 PHP 脚本访问。

PHP 需要对共享进行身份验证，即使它是公开的，并且使用`fopen`或`opendir`不这样做。

# javascript - 如何在 WebView 中链接到 Web 上的图像

> ID：11971074
> 
> 赞同：0
> 
> 时间：2012-08-15T14:22:28.810
> 
> 标签：javascript, html, objective-c, cocoa, mac-app-store

我有一个在 Cocoa WebView 中运行的 HTML 应用程序，我正在尝试链接到网络上的外部图像。当我在常规浏览器中运行应用程序时，图像显示正常，但如果我运行我的 Cocoa 应用程序，图像无法解析。

```
<img src="http://doubletapsoftware.com/logoheader_small.png" /> 
```

见下图。

![在此处输入图像描述](../Images/57f4f986d267a3ec9c337acf980197ab.png)

我是否需要添加任何配置才能从 Web 加载图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T16:07:16.370

我解决了这个问题。我需要更改我的沙盒设置以允许传出连接。

# c - PowerPC 编译器的结构数组

> ID：11971075
> 
> 赞同：-1
> 
> 时间：2012-08-15T14:22:36.173
> 
> 标签：c, arrays, struct, initialization, powerpc

我有一个问题，我被要求声明一个结构数组，里面有一个结构，如下所示：

```
typedef struct {
int a;
int b;
int c;
}blah;

int main()
{
    blah arr[1] = {{0, 0, 0}};
//...
} 
```

上面的初始化是否正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:25:40.770

是的，完全正确。

长度为 1 的数组与包含多个元素的数组没有太大区别：它们都是聚合类型，它们的初始化应该用花括号括起来。如果你的数组有 2 个元素，初始化就像

```
blah arr[2] = { {0, 0, 0}, {0, 0, 0} }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:25:05.397

是的。

如果要使用显式初始化程序，则无需指定大小，让编译器弄清楚：

```
blah arr[] = { { 0, 0, 0 } }; 
```

我还添加了空格以使嵌套更清晰。

# c# - 在运行时可浏览（假）？

> ID：11971077
> 
> 赞同：2
> 
> 时间：2012-08-15T14:22:44.653
> 
> 标签：c#, datagridview

我正在使用数据源来用数据填充我的 datagridview。但是，我试图找到一种方法让用户能够隐藏他不想看到的列。

我可以在程序运行之前隐藏和显示列，使用：

```
[Browsable(false)]
public string URL
{
    get
    {
        return this._URL;
    }
    set
    {
        this._URL = value;
        this.RaisePropertyChnaged("URL");
    }
} 
```

我似乎无法弄清楚如何`[Browsable(false)]`在运行时更改。

任何想法我怎么能做到这一点？

基本上，我想将“开/关”绑定到菜单。

抱歉，如果我在解释我的问题时没有使用正确的术语，我是自学并在几周前开始的 - 所以还是很新手:)

编辑：

无法隐藏该列，因为当我运行更新功能时，所有列都会再次出现。这是我的更新功能：

```
 private void UpdateResults()
    {
        Invoke(new MethodInvoker(
                       delegate
                       {
                           this.dgvResults.SuspendLayout();
                           this.dgvResults.DataSource = null;
                           this.dgvResults.DataSource = this._mySource;
                           this.dgvResults.ResumeLayout();
                           this.dgvResults.Refresh();
                       }
                       ));
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:26:47.120

在运行时，您可以将列指定为不可见：

```
dgv.Columns["ColumnName"].Visible = false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:36:55.600

确实，正如其他人提到的目的`BrowsableAttribute`不同，但我了解您想要做什么：

假设我们要创建一个 UserControl，而不是包装 a`DataGridView`并让用户能够选择要显示的列，从而实现完整的运行时绑定。一个简单的设计是这样的（我正在使用 a ，但如果这是你想要的`ToolStrip`，你可以随时使用 a ）：`MenuStrip`

![在此处输入图像描述](../Images/f74ffa53c08869d4baa2fa5f0f18981a.png)

```
 private void BindingSource_ListChanged(object sender, ListChangedEventArgs e) {
        this.countLabel.Text = string.Format("Count={0}", this.bindingSource.Count);
        this.columnsToolStripButton.DropDownItems.Clear();

        this.columnsToolStripButton.DropDownItems.AddRange(
            (from c in this.dataGrid.Columns.Cast<DataGridViewColumn>()
             select new Func<ToolStripMenuItem, ToolStripMenuItem>(
                 i => {
                     i.CheckedChanged += (o1, e2) => this.dataGrid.Columns[i.Text].Visible = i.Checked;
                     return i;
                 })(
                 new ToolStripMenuItem {
                     Checked = true,
                     CheckOnClick = true,
                     Text = c.HeaderText
                 })).ToArray());
    } 
```

在这种情况下，`bindingSource`是实例的中介`DataSource`，`dataGrid`我正在响应`bindingSource.ListChanged`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:39:09.780

*在运行时正确*执行此操作的方法是在集合上提供自定义 ITypedList 实现，或者为类型提供 TypeDescriptionProvider，或者（对于单对象绑定，而不是列表）来实现 ICustomTypeDescriptor。此外，您需要提供自己的过滤后的 PropertyDescriptor 实现。是不是真的值得吗？在大多数情况下：没有。正确配置网格要容易得多，只需选择要添加的列即可显示（或不显示）适当的列。

# objective-c - 当它是第一响应者时，在 UIScrollView 中移动 UITextView 时遇到问题

> ID：11971079
> 
> 赞同：0
> 
> 时间：2012-08-15T14:22:54.600
> 
> 标签：objective-c, ios, mobile, uitextview

我有一个视图控制器，它基本上是一个包含多个 UITextField 和 UITextView 的表单，嵌入在 UIScrollView 中。当 UITextField 成为第一响应者时，滚动视图会自动移动到焦点字段，这被认为是本主题第一个答案中解释的行为：

[当 UITextField 成为第一响应者时禁用 UIScrollView 滚动](https://stackoverflow.com/questions/4585718/disable-uiscrollview-scrolling-when-uitextfield-becomes-first-responder)

但是，当第一响应者是 UITextView 时，不会发生这种情况，而且我不确定为什么以及如何修复它。

第二个问题是，当显示键盘时，如果 UITextView 不在视图中，则滚动视图不会滚动（因为它被新显示的键盘隐藏了）。我实现了有关如何管理键盘的 Apple 文档的代码：

[http://developer.apple.com/library/ios/#DOCUMENTATION/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](http://developer.apple.com/library/ios/#DOCUMENTATION/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

并为textViews添加了另一个名为activeView的activeField变量（在TextView的beginEditing中初始化，在endEditing中设置为nil，在显示键盘时根据它的框架scrollToVisible）。这里的问题是UITextView中的beginEditing是在keyboardWasShown之后调用的，所以activeView没有初始化，因此不会滚动。出于某种原因，对于 UITextFields，beginEditing 之前被调用，这是预期的行为。

如何滚动到 UITextView 并且它是第一响应者，当显示键盘并隐藏它时如何移动到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:38:47.987

滚动显示`UIScrollView`do中的任何内容

`scrollRectToVisible:/*frame of object you want to show*/ animated:YES`

获取时订阅`UITextViewTextDidBeginEditingNotification`并调用上述方法。

# facebook - 如何在我的网站上显示我的 Facebook 页面问题调查？

> ID：11971080
> 
> 赞同：0
> 
> 时间：2012-08-15T14:22:54.363
> 
> 标签：facebook, facebook-graph-api

我花了几个小时阅读[Facebook 开发人员文档](http://developers.facebook.com/docs)并试图弄清楚是否有办法以某种方式在我的网站上显示我的 Facebook 页面问题投票 - 我仍然没有答案......有谁知道这是否可能?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:47:07.570

这是可能的，但不是微不足道的。

如果您只想显示问题、答案和当前结果，您需要：

*   获得托管问题的配置文件的有效访问令牌并获得`user_questions`许可。
*   在使用此访问令牌时调用[API ，并且](https://developers.facebook.com/docs/reference/api/question/)`https://graph.facebook.com/PROFILE_ID/questions`
*   解析返回的 JSON 对象并将其显示在您的站点上。

# mysql - mysql在查找重复项时获取所有记录

> ID：11971084
> 
> 赞同：0
> 
> 时间：2012-08-15T14:23:13.037
> 
> 标签：mysql, query-optimization, duplicate-data

我想对表中的所有条目进行报告，其中一列有重复条目。假设我们有一个这样的表：

```
customer_name     | some_number
Tom                 1
Steve               3
Chris               4
Tim                 3
... 
```

我想显示所有`some_number`重复的记录。我使用这样的查询来显示所有重复记录：

```
select customer_name, some_number from table where some_number in (select some_number from table group by some_number having count(*) > 1) order by some_number; 
```

这适用于一张小桌子，但我实际需要操作的桌子相当大。30,000 + 行，而且它会永远存在！有人有更好的方法来做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:31:39.647

试试这个查询：

```
SELECT t1.*
FROM (SELECT some_number, COUNT(*) AS nb
       FROM your_table
       GROUP BY some_number
       HAVING nb>1
     ) t2, your_table t1
WHERE t1.some_number=t2.some_number 
```

该查询首先用于`GROUP BY`查找重复记录，然后与表连接以检索所有字段。
由于`HAVING`使用了，它只会返回您感兴趣的记录，然后使用`your_table`.

`some_number`如果您希望查询快速，请确保您的表有一个索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:34:54.180

这表现更好吗？它加入一个`some_number`计数表，然后过滤以仅包含`count`大于 1 的那些。

```
SELECT t.customer_name, t.some_number 
FROM my_table t
INNER JOIN (
  SELECT some_number, COUNT(*) AS ct
  FROM my_table
  GROUP BY some_number ) dup ON t.some_number = dup.some_number
 WHERE dup.ct > 1 
```

# php - 无论如何，PHP 有没有做这个 javascript 技巧？

> ID：11971086
> 
> 赞同：2
> 
> 时间：2012-08-15T14:23:16.690
> 
> 标签：php, variables, ternary-operator

> **可能重复：**
> [php 变量 = variable1 || 变量2](https://stackoverflow.com/questions/11954422/php-variable-variable1-variable2)

尝试在 PHP 中执行此操作的结果为 true，而不是像 js 那样返回“无”。

```
//Javascript
var stuff = false;
document.write(stuff || 'nothing'); 
```

所以我必须这样做。有没有办法避免`stuff`两次输入变量？

```
//PHP
$stuff = false;
echo !empty($stuff)?$stuff:'nothing'; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T14:24:11.287

如果您使用 PHP 5.3 或更高版本，则可以使用速记三元格式：

```
echo ($stuff) ?: 'nothing'; 
```

# vector - 在numpy中将向量添加到矩阵行

> ID：11971089
> 
> 赞同：23
> 
> 时间：2012-08-15T14:23:26.127
> 
> 标签：vector, matrix, numpy

在 numpy 中是否有一种快速方法可以将向量添加到矩阵的每一行或每一列。

最近，我一直在将向量平铺到矩阵的大小，这会占用大量内存。例如

```
 mat=np.arange(15)
    mat.shape=(5,3)

    vec=np.ones(3)
    mat+=np.tile(vec, (5,1)) 
```

我能想到的另一种方法是使用 python 循环，但循环很慢：

```
 for i in xrange(len(mat)):
        mat[i,:]+=vec 
```

有没有一种快速的方法可以在 numpy 中做到这一点而不诉诸 C 扩展？

能够虚拟平铺矢量会很好，就像更灵活的广播版本一样。或者能够逐行或逐列地迭代操作，您几乎可以使用某些 ufunc 方法来完成。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-15T14:37:31.497

为了向每一行添加一维数组，广播已经为您处理好了事情：

```
mat += vec 
```

然而，更一般地，您可以使用`np.newaxis`将数组强制转换为可广播的形式。例如：

```
mat + np.ones(3)[np.newaxis,:] 
```

虽然不需要将数组添加到每一行，但对于按列添加也需要这样做：

```
mat + np.ones(5)[:,np.newaxis] 
```

**编辑：**正如塞巴斯蒂安提到的，对于行添加，`mat + vec`已经正确处理了广播。它也比使用`np.newaxis`. 我已经编辑了我的原始答案以明确这一点。

# python - 使用 Python、PyQt、Qt Designer 和 QStackedWidget 导入页面

> ID：11971097
> 
> 赞同：2
> 
> 时间：2012-08-15T14:23:48.710
> 
> 标签：python, pyqt, qt-designer

我正在尝试使用 PyQt 导入页面并将其添加到使用 Qt Designer 创建的 QStackedWidget 中。我不想接触已编译的页面代码或已编译的 MainWindow 代码。我可以很好地显示 MainWindow，但我似乎无法导入页面并将其添加到我的 QStackedWidget。

这是我的 MainWindow 和页面编译代码的样子：

我的`mainWindow.py`

```
 from PyQt4 import QtCore, QtGui

    try:
        _fromUtf8 = QtCore.QString.fromUtf8
    except AttributeError:
        _fromUtf8 = lambda s: s

    class Ui_MainWindow(object):
        def setupUi(self, MainWindow):
            MainWindow.setObjectName(_fromUtf8("MainWindow"))
    ... 
```

我的`appInfoPage.py`

```
 from PyQt4 import QtCore, QtGui

    try:
        _fromUtf8 = QtCore.QString.fromUtf8
    except AttributeError:
        _fromUtf8 = lambda s: s

    class Ui_appInfoPage(object):
        def setupUi(self, appInfoPage):
            appInfoPage.setObjectName(_fromUtf8("appInfoPage"))
    ... 
```

我的 main.py

```
 from PyQt4.QtGui import *
    from PyQt4.QtCore import *
    from mainWindow import Ui_MainWindow
    from appInfoPage import Ui_appInfoPage

    class main(QMainWindow, Ui_MainWindow):
      def __init__(self):
        super(QMainWindow, self).__init__()
        self.setupUi(self)
        self.appInfoPage = Ui_appInfoPage()
        self.appInfoPage.setupUi(self.appInfoPage)
        self.stackedWidget.addWidget(self.appInfoPage)
        self.stackedWidget.setCurrentWidget(self.appInfoPage)

    if __name__ == '__main__':
      application = QApplication(sys.argv)
      window = main()
      window.show()
      sys.exit(application.exec_()) 
```

当前代码给了我一个`AttributeError: 'Ui_appInfopage' object has no attributes 'setObjectName'`错误，如果我`self.appInfoPage.setupUi(self)`改为，页面与 MainWindow 重叠。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:10:04.473

这两个`Ui_*`类的定义表明它们是具有基类的简单包装器`object`——它们不是 Qt 类。

相反，它们有一个`setupUi()`方法，需要将 Qt 类的实例作为第一个参数传递。

在您中，您正确地将(ie )`class main.__init__()`的实例传递给继承类的方法。但是您没有将正确的 Qt 类的实例传递给.`QMainWindow``self``setupUi``Ui_MainWindow``self.appInfoPage.setupUi``AtrributeError`

纠正此问题的一种方法是创建 的子类`Ui_appInfoPage`，然后将其实例传递*给*您的堆叠小部件：

```
class AppInfoPage(QWidget, Ui_appInfoPage):
    def __init__(self, parent):
        super(QWidget, self).__init__(parent)
        self.setupUi(self)
...

    self.appInfoPage = AppInfoPage(self)
    self.stackedWidget.addWidget(self.appInfoPage) 
```

**注意**：我已经使用`QWidget`了我的`AppInfoPage`子类，但是如果您`Ui_appInfoPage`实际上是基于不同的 Qt 类，您显然需要更改它。

# extjs - Ext/JS 4.1 - 网格标题滚动

> ID：11971100
> 
> 赞同：2
> 
> 时间：2012-08-15T14:23:58.303
> 
> 标签：extjs, header, grid, panel, extjs4.1

我正在动态重新配置 Ext.grid.Panel。我通过 reconfigure 方法传入存储和列配置。我需要能够在垂直滚动时使列标题保持固定。谁能指出我如何做到这一点的正确方向？

这是我用来动态创建网格的代码：

```
var me = this,
    srStore = me.getStore('SearchResults'),
    cols = srStore.data.getAt(0).get('columnHeader'),
    columnConfig = [],
    fields =  [];

for(var i = 0; i < cols.length; i++) {
    columnConfig.push({ text: cols[i].replace(/_/g, ' '), dataIndex: cols[i] });
    fields.push(cols[i]);
}

var resultsStore = Ext.create('Ext.data.Store', {
    fields: fields,
    data: srStore.data.getAt(0).get('results')
});

me.getSearchResultsGrid().reconfigure(resultsStore, columnConfig); 
```

谢谢你的帮助。

杰米

# java - 在 Android 应用中自动打开 Wifi 热点

> ID：11971101
> 
> 赞同：0
> 
> 时间：2012-08-15T14:24:02.803
> 
> 标签：java, android, wifi, personal-hotspot

我有一个用 Java 编写的 android 程序，它使用 Wifi Hotspot，此时我必须打开它并手动进行设置。

我希望通过程序内部的设置打开热点。

我看过一些与此相关的帖子，有些人有答案，但他们似乎不太清楚。

有谁知道有什么可以帮助我的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:31:12.403

据我所知，Android 上绝对没有 API 可以实现此功能。您可以做的最大值就像在这个应用程序[https://play.google.com/store/apps/details?id=com.budius.WiFiShoot](https://play.google.com/store/apps/details?id=com.budius.WiFiShoot)上一样，它会检查该功能是否已启用，如果不是，它会发送用户进入设置屏幕。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:14:15.147

我尝试使用这种方式：

*   扫描所有可用的 wifi 热点。
*   检查这些热点的安全类型（WPA、WPA2、WEP、OPEN）。
*   通过 SSID 进行身份验证以连接热点。

我使用[了 wifi-connector](http://code.google.com/p/android-wifi-connecter/)库（尤其是[Wifi.java](http://code.google.com/p/android-wifi-connecter/source/browse/src/com/farproc/wifi/connecter/Wifi.java)文件）
希望这有帮助！

# opa - dotcloud opa 示例 mongodb 错误

> ID：11971107
> 
> 赞同：0
> 
> 时间：2012-08-15T14:24:15.020
> 
> 标签：opa, dotcloud

我一直在尝试了解如何在 dotcloud 上部署 Opa 应用程序。默认应用程序有效，但 Opa 文档中的 wiki 示例无法启动：

```
==> /var/log/supervisor/opa.log <==
[Opa] _no_name DbGen/Mongo/SynchroStart Db is ready
[Opa] _no_name DbGen/Mongo/SynchroStart Process 0 operations on the db wait list, start
[Opa] _no_name DbGen/Mongo/SynchroStart Process 0 operations on the db wait list, finished
[Opa] Server dispatch Decoded URL to /
[Opa] DbGen/Mongo (failure) Read from wiki set doesn't returns anything
File "stdlib/database/mongo/db.opa", line 776, characters 6-32, (776:6-776:32 | 28076-28102)
fail: undefinedDbSet build error
Error : uncaught OPA exn { 'size`': 2,
fail: 'DbSet build error',
position: 'File "stdlib/database/mongo/db.opa", line 776, characters 6-32, (776:6-776:32 | 28076-28102)' } 
```

这是我设置不当还是 dotcloud 系统中的错误？

我的 .yml：

```
opa:
type: custom
buildscript: builder
process: ~/run
ports:
    www: http

db:
    type: mongodb 
```

此图显示了 monogdb 在本地的样子。 [http://imgur.com/LJ1RY](http://imgur.com/LJ1RY)

更新：我发现 mongodb 有一个单独的日志。我找到了这个：

```
auth: couldn't find user root, _no_name.system.users 
```

这似乎表明身份验证不起作用。（又名，在本地运行 opa 程序但指向远程 mongodb 会给出相同的错误。）任何想法为什么会出现这个问题？

UPDATE2：过去几天一直在追我的尾巴，因为我不太明白 Cédrics 在说什么。这是我在示例中替换数据库行以开始工作的内容：

```
database admin {
stringmap(string) /wiki;
/wiki[_] = "This page is empty. Double-click to edit.";
} 
```

问题是我正在更改路径，而不是数据库名称：

```
ex: database int /admin/wiki 
```

并不是

```
ex. database admin {int /wiki;} 
```

我很好奇是否有办法通过 opa 使用除 admin 之外的任何其他命名数据库，但至少这让我运行起来。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:34:38.257

## 更新2：

我在这里推送了一个有效的 dotcloud conf：[https ://github.com/cedricss/opa-on-dotcloud.git](https://github.com/cedricss/opa-on-dotcloud.git)

* * *

你确定 mongodb 正在运行吗？您是否在文件中添加了以下行`dotcloud.yml`？

```
db:
    type: mongodb 
```

有关 dotcloud 上的 Opa 的更多信息：[https ://github.com/dotcloud/opa-on-dotcloud](https://github.com/dotcloud/opa-on-dotcloud)

**更新：** 现在确实有些东西坏了。在上面的 conf 示例中可以进行两个更新：

*   builder 应该更新为使用 Opa 1.0.5 来修复所有 mongodb 相关的问题：`BINURL="http://download.opalang.org/linux/opa_1.0.5%2Bbuild2988_amd64.release.run"`

*   `opa 1.0.5``node 0.6.x`至少需要，`dotcloud.yml`必须像这里解释的那样完成：http: [//docs.dotcloud.com/services/nodejs/#node-js-versions](http://docs.dotcloud.com/services/nodejs/#node-js-versions)但我不知道为什么我的实例即使在之后仍然安装节点 0.4.0创建一个全新的应用程序。我稍后再试一次。

# c# - 如何格式化数字以具有相同的位数？

> ID：11971110
> 
> 赞同：3
> 
> 时间：2012-08-15T14:24:30.433
> 
> 标签：c#, formatting, string-formatting

我有一个标签来显示一个无符号整数，它有一个最大长度。我想格式化数字以显示如下：

```
1           = "1"
1000        = "1,000"
12400       = "12.4k"
101,800,000 = "102M" // !!!
1,849,000   = "1.85M" 
```

所以，我最终得到了一个最大长度为 5 的字符串。

我的范围是从 0 到 199,999,999。

有没有办法在不处理很多情况（即很多间隔）的情况下做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:22:02.673

我可能为时已晚，但这是一个扩展方法，它返回您想要的格式的数字：

```
public static string ToShortString(this int n)
{
    if (n >= 1e8)
    {
        return (Math.Round((double)n / 1e6, 0)).ToString() + "M";
    }
    else if (n >= 1e7)
    {
        return (Math.Round((double)n / 1e6, 1)).ToString() + "M";
    }
    else if (n >= 1e6)
    {
        return (Math.Round((double)n / 1e6, 2)).ToString() + "M";
    }
    else if (n >= 1e5)
    {
        return (Math.Round((double)n / 1e3, 0)).ToString() + "K";
    }
    else if (n >= 1e4)
    {
        return (Math.Round((double)n / 1e3, 1)).ToString() + "K";
    }
    else if (n >= 1e3)
    {
        return n.ToString("##,#");
    }
    else
    {
        return n.ToString();
    }
} 
```

测试：

```
Console.WriteLine((5).ToShortString());         // displays 5
Console.WriteLine((55).ToShortString());        // displays 55
Console.WriteLine((555).ToShortString());       // displays 555
Console.WriteLine((5555).ToShortString());      // displays 5,555
Console.WriteLine((55555).ToShortString());     // displays 55.6K
Console.WriteLine((555555).ToShortString());    // displays 556K
Console.WriteLine((5555555).ToShortString());   // displays 5.56M
Console.WriteLine((55555555).ToShortString());  // displays 55.6M
Console.WriteLine((555555555).ToShortString()); // displays 556M 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:35:44.290

这个答案在这里展示了如何以多种方式做到这一点：[带有 K 后缀的整数](https://stackoverflow.com/questions/2134161/format-number-like-stackoverflow-rounded-to-thousands-with-k-suffix)

不幸的是，如果没有至少相当数量的案例，我不知道有什么方法可以做到这一点。但是上述问题中的一些答案相当优雅，并且使用最少的代码。

# c - C中的通用函数指针

> ID：11971111
> 
> 赞同：2
> 
> 时间：2012-08-15T14:24:34.177
> 
> 标签：c

我正在编写一个通用测试函数，它将接受函数地址（从映射文件中读取）和作为逗号分隔数据的参数作为来自套接字的参数。

我能够为已知的函数指针实现它。

喜欢

```
void iif(int a, int b, float f);
typedef void (*fn_t)(int a, int b, float f); 
```

使用上述方法，我将在代码库中为所有类型的函数实现编写函数指针。有没有通用的方法来做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:28:01.480

不，因为编译器需要知道如何表示参数。它无法知道排除信息的函数指针类型，因此无法生成调用。

例如，具有少量参数的函数可能会将它们传递到 CPU 寄存器中，从而在调用许多参数时“溢出”到堆栈中。

您可以使用可变参数来解决这个问题，这样做基本上“锁定”了参数传递的方式。当然，它强制被调用的函数处理可变参数，这不是很方便。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:29:52.313

您可以执行以下操作。

```
fn_t fncptr;
fncptr= MapAddress + 0x(offset); 
```

MapAdress 是将文件映射到内存地址的地方。（如果 C++ 编译器无法将偏移量添加到 void，您可以之前转换为 DWORD）偏移量是文件中函数代码的位置。但请记住，您需要在 windows 中指向指针的执行地址是 PAGE_EXETUCE_READWRITE。然后称它为，

```
fncptr(arg1, arg2, arg3); 
```

如果编译器在第一个代码中失败，请执行以下操作： fn_t fncptr; fncptr= (fn_t)((DWORD)MapAddress + 0x(offset));

# c# - 获取 TabItem 的 ContentTemplate 实例

> ID：11971113
> 
> 赞同：0
> 
> 时间：2012-08-15T14:24:36.677
> 
> 标签：c#, wpf, xaml

我有一个`TabControl`项目集合，其中每个项目都应该由`TabItem`承载用户控件的法线表示，如下所示：

```
<TabControl x:Name="Items"
            ItemsSource="{Binding ElementName=This,Path=Files}">
    <TabControl.ItemContainerStyle>
        <Style TargetType="{x:Type TabItem}">
            <Setter Property="Header" Value="{Binding Path=Name}" />
            <Setter Property="ContentTemplate">
                <Setter.Value>
                    <DataTemplate DataType="{x:Type App:MyContext}">
                        <App:Task x:Name="task" Image="{Binding Path=Image}" />
                    </DataTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </TabControl.ItemContainerStyle>
</TabControl> 
```

`ItemsSource`绑定到`ObservableCollection<MyContext>`一个.

我想像这样（或类似）获得`App:Task`为我的每个实例生成的每一个：`MyContext`

```
foreach (var file in Files)
{
    var container = Items.ItemContainerGenerator.ContainerFromItem(file) as TabItem;
    if (container == null) continue;

    var task = container.Content as Task;
    if (task == null) return;

    // ...
} 
```

但事实`container.Content`并非`MyContext`如此`Task`。所以我想我应该使用：

```
var task = container.ContentTemplate.FindName("task") as Task; 
```

但这会引发异常，因为此时`ContentTemplate`似乎尚未应用。我怎样才能强迫它或以任何其他方式得到我想要的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:30:29.430

*为什么*首先需要 UserControl？

如果您需要访问您尚未将项目上的足够属性绑定到 UserControls 的内容。

# php - 通过变量（1,2,3,4 - 1,2,3,4）替代查询结果的 PHP 解决方案

> ID：11971118
> 
> 赞同：1
> 
> 时间：2012-08-15T14:24:45.907
> 
> 标签：php

我尝试了一个 MySQL 解决方案，但它似乎并不实用，而且我得到一个需要很长时间的查询。

我正在寻找这个问题的 PHP 解决方案：

我的表格行中有来自 4 个不同站点的产品数据。

我使用一些条件查询它们，并得到一个结果变量：

```
$result = mysql_query("my query"); 
```

现在，我像这样检索数据：

```
while($slice = mysql_fetch_assoc($result)){
   $product_data = $slice['productdata'];
   $site     = $slice['site']; 
} 
```

问题是我想通过交替 $site 变量来显示产品数据：

```
1\. product from site 1;

2\. product from site 2;

3\. product from site 3;

4\. product from site 4; 
```

如果站点 2 中的所有产品都已列出，则列出其他剩余产品，如下所示：

```
1\. product from site 1;

2\. priduct from site 3;

3\. product from site 4; 
```

等等。

重要提示：我正在对结果进行分页，因此解决方案不会破坏分页。所以我需要一个可以分页的总行数。

有没有 PHP 解决方案？

**更新：**

```
$result = mysql_query("SELECT site, product FROM ".$table." WHERE my mysql conditions LIMIT ".$offset.", ".$rowsperpage."");

$rowsperpage = 20; 
```

**如果站点 3 的行数比其他站点多得多，则使用代码将生成：**

第 1 页：

*   来自站点 1 的产品；
*   来自站点 2 的产品；
*   来自站点 3 的产品；
*   来自站点 1 的产品；
*   来自站点 2 的产品；
*   来自站点 3 的产品；
*   来自站点 3 的产品；
*   来自站点 3 的产品；
*   ......
*   直到 20

第2页：

*   来自站点 1 的产品；
*   来自站点 2 的产品；
*   来自站点 3 的产品；
*   来自站点 1 的产品；
*   来自站点 2 的产品；
*   来自站点 3 的产品；
*   来自站点 3 的产品；
*   来自站点 3 的产品；
*   ......
*   直到 20

第 3 页将显示剩余的站点 3 行：

*   来自站点 3 的产品；
*   来自站点 3 的产品；
*   来自站点 3 的产品；
*   ......
*   直到 20

问题是第 1 页和第 2 页将显示比其他站点更多的站点 3 产品。

这是因为 mysql 查询的行是随机混合和排序的。当我调用其中的 20 个时，这些站点的行数不会相等。

**我想实现类似：**

第 1 页：

*   来自站点 1 的产品；
*   来自站点 2 的产品；
*   来自站点 3 的产品；
*   来自站点 1 的产品；
*   来自站点 2 的产品；
*   来自站点 3 的产品；
*   来自站点 1 的产品；
*   来自站点 2 的产品；
*   来自站点 3 的产品；
*   ......
*   直到 20

第2页：

*   来自站点 1 的产品；
*   来自站点 2 的产品；
*   来自站点 3 的产品；
*   来自站点 3 的产品；
*   来自站点 2 的产品；
*   **来自站点 3 的产品；**
*   **来自站点 3 的产品；**
*   **来自站点 3 的产品；**

.....直到20

**仅当我在每个分页页面上都有查询而没有偏移量和限制时，我想要实现的代码才可以使用**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:03:30.590

这是（尝试＃2）可能适合您的解决方案。

`LIMIT`经过更多的思考和评论，考虑到您需要的排序，使用 MySQL 通过/处理分页似乎`OFFSET`不是一件容易的事。也就是说，分页应该在 PHP 中单独处理——这里需要注意的是，您必须在每次页面加载期间加载所有 MySQL 结果。

这个想法是构建一个二维数组，其中每个“站点”作为索引，每个子数组作为每个站点的“产品”列表。构建完成后，找到最长的产品列表的长度 - 这个数字将让我们知道我们需要迭代多高才能使用这种“桶”方法。

现在，从`0`to迭代，`the length of the longest list of products`并在嵌套循环中迭代每个站点。如果该站点没有当前索引的产品，请跳过它；否则：

*   如果当前`$offest`大于 0，则跳过当前乘积并减`$offset`1。
*   如果`$offset`小于等于0，则输出乘积！

示例代码：

```
// define what page we're on (will probably come from $_GET)
$page = 1;

// define how many products to display per-page
$productsPerPage = 20;

// calculate the current offset based on the page-# and the #-per-page
$offset = (($page - 1) * $productsPerPage);

// get the full results from the database
$results = mysql_query("your query");
if (mysql_num_rows($results) <= $offset) {
    // the current page is too high; you could set it to the last page,
    // or loop back to page #1, display an error, etc.
    return;
}

$sites = array();
while ($row = mysql_fetch_assoc($result)) {
    if (!isset($sites[$row['site']])) {
        // initialize the products-array for this site
        $sites[$row['site']] = array();
    }
    // add this product to the array for this site
    $sites[$row['site']][] = $row['productdata'];
}

// get the largest-number of products for a given site
$maxProducts = 0;
foreach ($sites as $products) {
    if ($maxProducts == 0) {
        // set the first list of products as the "most"
        $maxProducts = count($products);
    } else if (($count = count($products)) > $maxProducts) {
        // the current list of products is larger than what we've found
        $maxProducts = $count;
    }
}

// iterate from the $siteOffset to the highest-number of products
for ($i = 0; $i < $maxProducts; $i++) {
    // iterate through each site and check if it has a product at this "level"
    foreach ($sites as $site => $products) {
        if (isset($products[$i])) {
            // there is a product for this site on this "level";
            // if we haven't reached our offset yet, skip it
            if ($offset-- > 0) continue;
            // otherwise, output it!
            echo $products[$i] . ' from site ' . $site . '<br />';
        }
    }
} 
```

# actionscript-3 - 在 for 循环中对多个变量创建碰撞检测？

> ID：11971120
> 
> 赞同：0
> 
> 时间：2012-08-15T14:25:02.523
> 
> 标签：actionscript-3, collision-detection

本质上，我正在尝试创建一个游戏，玩家必须躲避某些物品，到目前为止，我有一段代码可以将 3 条鲨鱼随机添加到舞台上。

这个想法是，一旦玩家击中了一条鲨鱼，他/她就会返回到起始位置，我有一个包含鲨鱼的速度、速度等的动作脚本文件，每次运行程序时，鲨鱼都会出现在不同的位置。

但是，当我尝试对鲨鱼进行碰撞测试时，只有一条鲨鱼有反应，我无法弄清楚如何让所有 3 条鲨鱼都影响玩家（square_mc）。任何帮助将不胜感激。

```
//Pirate game, where you have to avoid particular object and get to the finish line to move onto the final level.

stage.addEventListener(KeyboardEvent.KEY_DOWN, moveMode ); 
function moveMode(e:KeyboardEvent):void {

//movements for the pirate ship, this will allow the ship to move up,down,left and right.

if (e.keyCode == Keyboard.RIGHT) {
    trace("right"); 
square_mc.x = square_mc.x + 25;
} 
else if (e.keyCode == Keyboard.LEFT) {
    trace("left"); 
square_mc.x = square_mc.x - 25;
} 
else if (e.keyCode == Keyboard.UP) {
    trace("up"); 
square_mc.y = square_mc.y - 25;
} 
else if (e.keyCode == Keyboard.DOWN) {
    trace("down");
square_mc.y = square_mc.y + 25;
}
}   

//for.fla
//this program uses a for loop to create my Sharks
//a second for loop displays the property values of the sharks

function DisplayShark():void{
for (var i:Number=0;i<3;i++)
{
    var shark:Shark = new Shark(500);
    addChild(shark);

    shark.name=("shark"+i);
    shark.x=450*Math.random();
    shark.y=350*Math.random();

}
}
DisplayShark();

for(var i=0; i<3;i++){
var currentShark:DisplayObject=getChildByName("shark"+i);

trace(currentShark.name+"has an x position of"+currentShark.x+"and a y position  of"+currentShark.y);
}

//here we will look for colliosion detection between the two move clips.

addEventListener(Event.ENTER_FRAME, checkForCollision);
function checkForCollision(e:Event):void { 

if (square_mc.hitTestObject(currentShark))
{ 
trace("The Square has hit the circle");
    square_mc.x=50
    square_mc.y=50  //these lines of code return the square back to it's     original location
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:34:22.717

只需将您的 for 循环移动到 ENTER_FRAME：

```
addEventListener(Event.ENTER_FRAME, checkForCollision);
function checkForCollision(e:Event):void { 

    for(var i=0; i<3;i++){    
        var currentShark:DisplayObject=getChildByName("shark"+i);
        if (square_mc.hitTestObject(currentShark))
        { 
            trace("The Square has hit the circle");
            square_mc.x=50;
            square_mc.y=50;
        }
    }

} 
```

您不能只通过一次 for 循环并设置 currentShark 变量 - 每次执行碰撞测试时，您最终都会针对一只鲨鱼进行测试。相反，每次要检查碰撞时，都必须遍历所有鲨鱼并进行碰撞测试。

# android - HTC 渴望 BluetoothSocket 连接冻结

> ID：11971122
> 
> 赞同：0
> 
> 时间：2012-08-15T14:25:08.593
> 
> 标签：android, bluetooth

我从事项目，涉及BT连接。我已经对 Nexus S、Nexus Galaxy 等手机进行了测试，一切正常。问题在于HTC的愿望。首先，我必须通过端口连接到 PC，所以我使用反射

```
Method m = device.getClass().getMethod("createRfcommSocket",
            new Class[] { int.class });
BluetoothSocket socket = (BluetoothSocket) m.invoke(device, port);
socket.connect(); 
```

socket.connect() 永远冻结线程，就像 socket.close(); 同样从 Android 日志中，我可以看到奇怪的消息：

> USERIAL_Ioctl：BT_Sleep，USERIAL_IO_BT_WAKE_DEASSERT

重新启动没有帮助。但奇怪的是，这个问题有时会重现。

感谢您的任何评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-22T13:00:37.387

有一个解决方法。Socket.connect() 应该从另一个线程调用。

如果它会阻塞执行线程，我们可以使用 Socket.close(); 停止它。

# javascript - 骨干 - 共享模型

> ID：11971124
> 
> 赞同：0
> 
> 时间：2012-08-15T14:25:09.990
> 
> 标签：javascript, view, backbone.js, model, shared

我开始阅读一些 Backbone 教程，我发现了一件让我吃惊的事情。为什么在视图内创建模型？如果我想要一个模型有两个不同的视图（我认为 MVC 的用途）怎么办？假设我需要一个模型`Colors`、`DisplayView`视图来显示它们并`ControlsView`允许我设置它们的配置。如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:51:13.760

Backbone 不需要您在视图中创建模型 - 您可以（并且通常应该）独立于视图创建模型，以便可以共享它们。此外，仅仅因为您在视图中创建模型并不意味着您不能将该模型的引用传递给另一个视图并以这种方式共享它。

您正在阅读的教程很可能非常简单，并为单个视图创建单个模型以使教程更易于理解。

# javascript - 将日期转换为欧洲格式

> ID：11971130
> 
> 赞同：1
> 
> 时间：2012-08-15T14:25:41.430
> 
> 标签：javascript, xml, date, format

我正在编写一个用于在 Indesign 中自动化 XML 数据的脚本。我目前在 XML 中有美国格式 (MM/D/YY) 的日期，但是一旦我在 Indesign 中运行脚本，我的目标就是让它采用欧洲格式 (DD/M/YY)。为了编写将任何日期格式转换为欧洲格式的函数，我可以在脚本中添加什么？我希望这是有道理的。我需要帮助！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:36:24.450

我想只是使用

```
function convertDate(dateString) {
    var date = new Date(dateString);
    return date.getDate()+"/"+(date.getMonth() + 1)+"/"+date.getFullYear();
} 
```

请注意，据我所知，欧洲格式不使用斜杠而是点，所以它应该看起来像这样 dd.mm.yyyy 而不是 dd/mm/yyyy 因为它可能与我们的格式不匹配

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-03T11:26:27.007

[如何格式化 JavaScript 日期？](https://stackoverflow.com/questions/3552461/how-to-format-a-javascript-date)

[从 Date() 对象返回 dd-mm-yyyy](https://stackoverflow.com/questions/35843050/return-dd-mm-yyyy-from-date-object)

```
var d = new Date().toLocaleDateString("uk-Uk"); 
```

**输出：03.09.2021**

```
var d = new Date().toLocaleDateString("en-GB"); 
```

**输出：03/09/2021**

```
var d = new Date().toLocaleDateString("en-UK").replace(/\//g, '-'); 
```

**输出：03-09-2021**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:27:22.887

```
var myDate = new Date('myDateString'); //you can also do milliseconds instead of the date string
var myEuroDate = myDate.getDate() + '/' + myDate.getMonth + '/' + myDate.getFullYear(); 
```

也很有用... [http://arshaw.com/xdate/](http://arshaw.com/xdate/)

# ios - iOS 企业计划是否允许向配置文件添加权利？

> ID：11971137
> 
> 赞同：8
> 
> 时间：2012-08-15T14:26:05.027
> 
> 标签：ios

我现在正在为 iOS 内部应用程序进行研究。而且我可能需要为我的应用程序添加一个权利来实现一些功能。

我知道它不适用于 iOS 开发人员程序，因为无法向配置文件添加权利。因此，签名的应用程序被设备拒绝。

iOS 企业计划是否允许向配置文件添加权利？

UPD。我正在考虑自定义权利（例如“com.apple.springboard.opensensitiveurl”）。

此外，iOS 3.X 和 iOS 4 及更高版本之间也发生了变化（[https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1 -TROUBLESHOOTING_GUIDE-CODE_SIGNING_ENTITLEMENTS](https://developer.apple.com/legacy/library/technotes/tn2250/_index.html#//apple_ref/doc/uid/DTS40009933-CH1-TROUBLESHOOTING_GUIDE-CODE_SIGNING_ENTITLEMENTS)）。

如果我尝试仅添加权利文件并使用没有权利的配置文件对其进行签名，我会收到“您的应用程序代码签名权利文件中指定的权利与您的配置文件中指定的权利不匹配”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-14T22:26:26.647

企业计划不允许将自定义权利添加到您的配置文件中。因此，您不能创建具有特殊权利的企业应用程序。

再补充一点：

XCode 允许添加权利文件。但是，它被 iOS 设备拒绝，因为其中的权利与您的配置文件不匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:36:55.973

标准的 iOS 开发者计划允许我们使用 entitlements.plist 进行“临时”分发

[例如见这里](http://blog.futureshock-ed.com/2011/01/ios-ad-hock-app-distribution-for-beta.html)

是的，您也可以在企业帐户中进行临时配置。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-15T14:45:29.320

您将权利添加到项目而不是供应配置文件。

# windows - 如何从 perl 程序打开 Excel（程序，而不是文件）？

> ID：11971146
> 
> 赞同：3
> 
> 时间：2012-08-15T14:26:28.100
> 
> 标签：windows, perl, excel

我目前在 Windows 中有一个 perl 程序，它通过 Spreadsheet::WriteExcel 创建和填充一个 excel 文件，但我希望在我的程序关闭时打开该文件。我尝试用谷歌搜索信息，但我发现的只是如何在 perl 中打开和读取 excel 文件。有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:49:35.287

我推荐这个：

```
`your_file.xls`; 
```

它只是执行系统命令。假设 Excel 文件设置为默认使用 Excel 打开，这将起作用（根据您的设置，可能需要也可能不需要添加文件的完整路径）。

其他选项：

```
system("your_file.xls");
`C:\\Program Files\\...\\excel.exe your_file.xls`;
system("C:\\Program Files\\...\\excel.exe your_file.xls"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T14:42:30.687

我会为此使用[Win32::OLE](https://metacpan.org/module/Win32%3a%3aOLE)。OLE 是可用于执行应用程序任务的 Office 扩展。这个例子应该可以工作（我没有测试过）：

```
use strict;
use warnings;
use Win32::OLE;
use Win32::OLE::Const 'Microsoft Excel';
my $excel = Win32::OLE->GetActiveObject('Excel.Application')
  || Win32::OLE->new( 'Excel.Application', 'Quit' );
$excel->{Visible} = 1; 
```

如果您最终走这条路，[这里是对 Excel 2007 命令的参考](http://msdn.microsoft.com/en-us/library/bb149081%28v=office.12%29.aspx)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-12-24T18:35:07.060

以下对我有用。它不需要使用任何额外的模块。

```
system "start excel $file"; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-06-05T14:36:40.350

你可以像这样在 Perl 中使用 exec 命令：

```
my $excel_file = "file.xlsx";
exec "cmd", "/c", "start", $excel_file; 
```

这将打开系统中的**默认**程序以打开 xlsx 文件。我喜欢这个选项，因为如果用户没有安装 excel，只安装 libreoffice（例如），系统将使用 libreoffice 打开文件。

# android - xml布局中的自定义视图不起作用

> ID：11971150
> 
> 赞同：1
> 
> 时间：2012-08-15T14:26:51.117
> 
> 标签：android, xml, layout

我正在尝试像[这样](https://stackoverflow.com/questions/3260876/custom-view-in-xml-layout)将 View 的子类添加到我的 activity_main.xml中。

但是，设备和模拟器会立即退出应用程序。该错误似乎是 Error inflating class com.example.androidtest.PuzzleView

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout 
xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:layout_width="fill_parent"
android:layout_height="fill_parent">

<com.example.androidtestapp.PuzzleView
    android:id="@+id/puzzleView"
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="60"/>

<include
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="40"
    layout="@layout/activity_input"/>

</LinearLayout> 
```

和

```
package com.example.androidtestapp;

public class PuzzleView extends View {

public PuzzleView(Context context) {
    super(context);
    setFocusable(true);
    setFocusableInTouchMode(true);

}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:40:10.187

我认为问题是您需要有一个以 AttributeSet attrs 作为参数的构造函数

```
public PuzzleView(Context context, AttributeSet attrs) {
    super(context, attrs);
    //code
} 
```

# c# - NServiceBus RavenDB Saga 持久化器忽略 JsonIgnoreAttribute

> ID：11971151
> 
> 赞同：0
> 
> 时间：2012-08-15T14:26:53.333
> 
> 标签：c#, json.net, nservicebus, ravendb, nservicebus3

我将对象存储在我的 saga 数据中，这些对象具有在序列化和反序列化期间应忽略的属性。我尝试使用 [NonSerialized] 和 [JsonIgnore] 标记这些属性（并使用 [DataContract] 注释类而不是使这些属性 [DataMember] ...），但似乎没有任何效果。无论我做什么，当 NServiceBus 调用 Json.NET 来保存传奇数据时，所有属性都会被序列化。我还尝试为有问题的对象实现一个自定义 JsonConverter，这也被忽略了（是的，我正在用 [JsonConverter(typeof(MyConverter))] 注释对象类型...）

有没有办法让传奇持久性忽略传奇数据中包含的对象中的属性？作为参考，我使用的是 NServiceBus 3.2.7、Json.NET 4.5.7 和 RavenDB build 960。总线配置为使用 RavenDB 持久性和 saga 持久性。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T19:06:13.480

NServiceBus 内部化了 raven 客户端和 json.net。这就是为什么这些属性不起作用的原因（它们本质上是不同的类型，因为我们与内部标志合并）。解决方法是使用未合并的仅核心版本的 nsb。那就是说我很好奇你为什么需要这些额外的属性？

# c# - 使用关系更新数据表

> ID：11971152
> 
> 赞同：2
> 
> 时间：2012-08-15T14:26:53.857
> 
> 标签：c#, visual-studio-2010, .net-4.0, dataset, sql-server-2008-r2

我尝试使用数据集设计器中生成的关系和表适配器更新两个表。但是无法执行子表更新，它没有插入，问题是在子表更新期间标识列值是未知的。表“用户”具有主键和身份列 UserId。表“UserInRoles”具有 UserId 列和 Users.UserId 的外键。这是我的代码：

```
usersTableAdapter.Fill(ds.Users);
userInRolesTableAdapter.Fill(this. ds.UserInRoles);
DataRow userRow = ds.Users.NewRow();
userRow["UserName"] = userName; // and fill other userRow fields.
DataRow userRoleRow = ds.UserInRoles.NewRow();
userRoleRow["RoleId"] = selectedRole; // leave unfilled column "UserId", because I thing the relational update should do it.

userRoleRow.SetParentRow(userRow, ds.Relations["FK_UserInRoles_Users"]);
ds.Users.Rows.Add(userRow);
ds.UserInRoles.Rows.Add(userRoleRow);

tableAdapterManager.UpdateAll(ds);
ds.AcceptChanges();
//usersTableAdapter.Update(ds.Users);
//userInRolesTableAdapter.Update(ds.UserInRoles); 
```

我设置了两个关系类型，更新规则：级联，删除规则：级联，接受规则：无。刷新数据表选项被选中。在数据库上，外键也设置为级联更新，并强制复制并将外键强制为是。我做错了什么？我在用户表更新后尝试了 Users.GetChanges()，但没有得到任何更改。它现在工作的唯一方法是在更新后再次填充用户表。分别尝试更新表适配器，但随后出现违反外键的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:38:56.173

您错过了在这里创建数据关系对象的方法：http: [//msdn.microsoft.com/en-us/magazine/cc188919.aspx](http://msdn.microsoft.com/en-us/magazine/cc188919.aspx)

# jquery - 过滤出的父母的 jQuery 后代仍在集合中

> ID：11971156
> 
> 赞同：0
> 
> 时间：2012-08-15T14:27:04.803
> 
> 标签：jquery

目标：.third 类中的 p 标签上**没有红色轮廓。**

下面的独立示例，或此处的 jsfiddle：http: [//jsfiddle.net/WJVBm/](http://jsfiddle.net/WJVBm/)

非常期待获得绿色复选标记...在此先感谢您的帮助！

```
<!DOCTYPE html>
<html>
<head>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script type="text/javascript">
    $(function() {
        var myDivs = $('div');

        var myFilteredDivs = myDivs.filter(function(){
            return $(this).closest('.third').length == 0;
        });

        var myFilteredParagraphs = myFilteredDivs.find('p'); // why does this find paragraphs in divs that have already been filtered out of the collection?

        myDivs.css('border', '1px solid #CCC');
        myFilteredDivs.css('border', '1px solid blue');
        myFilteredParagraphs.css('border', '1px solid red'); // paragraphs inside of divs that should not exist in the collection are still being outlined by a red border

    });
    </script>
    <style type="text/css">
        div { float: left; padding: 20px; margin: 5px; }
    </style>
</head>

<body>

    <div class="first">
        <p>first</p>
        <div class="second">
            <p>second</p>
            <div class="third">
                <p>third</p>
            </div>
        </div>
        <div class="second">
            <p>second2</p>
        </div>
        <div class="third">
            <p>third2</p>
        </div>
    </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:45:14.880

试试这个[http://jsfiddle.net/3JALD/](http://jsfiddle.net/3JALD/)

它可能可以改进，但它似乎可以满足您的需求。

找到所有段落，`myFilteredParagraphs`因为`div.first`是 s 的一部分`myFilteredDivs`并`find()`获取所有`p`s 的后代`div.first`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:48:24.757

似乎是一个非常简单，也许很明显的修复：

[http://jsfiddle.net/WJVBm/13/](http://jsfiddle.net/WJVBm/13/)

```
var myFilteredParagraphs = myFilteredDivs.find('> p'); // why does this find paragraphs in divs that have already been filtered out of the collection? 
```

使用直接子选择器`>`

这是否符合您的要求？

# java - 违反了休眠和完整性约束

> ID：11971158
> 
> 赞同：0
> 
> 时间：2012-08-15T14:27:07.130
> 
> 标签：java, oracle, hibernate

我正在开发的一个应用程序使用 Oracle 和 Hibernate 作为 ORM。当我尝试插入 PartyUserObject 时，我不断收到以下错误：

```
could not insert: [Person]; SQL [insert into PARTY (............)]; constraint [PARTY_FK1]
java.sql.SQLIntegrityConstraintViolationException: ORA-02291: integrity constraint (PARTY_FK1) violated - parent key not found 
```

该消息似乎很明显，但我无法配置 Hibernate 以使其正常工作。相关实体的关系和hbm.xml文件如下：

`PartyUser.java`

```
private Party ap; 
```

`Party.java`

```
private Address address;
private Set<PartyUser> partyUsers; 
```

`PartyUser.hbm.xml`

```
<many-to-one
            name="ap"
            column="AP_ID"
            class="Party"
            not-null="true"
            lazy="false"
            cascade="save-update,evict">
</many-to-one> 
```

`Party.hbm.xml`

```
<set name="partyUsers" inverse="true" fetch="subselect">
    <key column="AP_ID"/>
    <one-to-many class="PartyUser"/>
</set> 
```

PARTY_FK1 指的是派对表中的地址 FK。正如我之前所说，在 DAO 上为新实例化的 PartyUser 对象调用 save （关联的 Party 和 Address 对象也是新的）。所有 id 都是在 java 端生成的。正如您可能注意到的那样，两个实体都打开了级联。

有什么想法有什么问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:49:02.407

我不确定为什么会发生这种情况，但我一直看到这个错误。我一直在做的是一开始，当我添加所有数据时，首先我用: 关闭约束，`SET DATABASE REFERENTIAL INTEGRITY FALSE`然后在最后我把它重新打开`SET DATABASE REFERENTIAL INTEGRITY TRUE`。与其说是修复，不如说它是一个 hack，但它对我们有用，所以我想我会分享知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T08:14:30.577

仅供参考，事实证明 hibernate 被配置为使用 db 序列生成，但 id 又在 java 代码中预先分配。fmdl

# java - 标准、预测、ALIAS_TO_ENTITY_MAP

> ID：11971162
> 
> 赞同：0
> 
> 时间：2012-08-15T14:27:13.263
> 
> 标签：java, hibernate

我已经使用了两个具有双向 onetomany 关联的实体。我想使用带有投影的标准（仅从几列获取数据）来获得许多`Person`带有许多`Adress`es 的 s。我想输入的查询结果`List<Map<String, Object>>`。结果列表应具有此结构（地址数据应`List<Map<String, Object>>`包含在父地址对象中）：

```
[
   {
     name: "Andrew"
     surname: "..."
     adress : [
        {
            city : "New York"
            street : "..."
            type : "home"
        }
        {
            city : "..."
            street : "..."
            type : "work:
        }
     ]
  { 
     name: "..."
     surname : "..."
     address : [{....}]
   }
] 
```

实体：

```
public class Person{
     private Long id;
     private String name;
     private String surname;
     private Integer age;
     private String phoneNr;

     @OneToMany(cascade = CascadeType.ALL, mappedBy = "person", fetch = FetchType.LAZY)
     private List<Address> addresses

    // getters and setters
}

public class Address{
     private Long id;
     private String city;
     private String street;
     @ManyToOne(fetch=FetchType.LAZY)
 @JoinColumn(name="person_id")
     private Person person;

     // getters and setters
} 
```

我所能做的就是加载整个实体，这不能满足我的需求。

```
Criteria criteria = currentSession().createCriteria(Person.class);
criteria.setFetchMode("addresses", FetchMode.JOIN);
criteria.setResultTransformer(Criteria.DISTINCT_ROOT_ENTITY); 
```

任何建议都会非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:52:10.193

我认为不可能`List<Map<String, Object>>`从查询返回。获得所需结构的最简单方法是手动创建它（至少我是这么认为的）：

```
List<Map<String, Object>> resultsList = new ArrayList<Map<String, Object>>();
List<Person> persons = criteria.list();

for (Person person: persons) {
   resultsList.put("name", person.getName());
   resultsList.put("surname", person.getSurname());
   List<Map<Strin, Object>> addressesList = new ArrayList<Map<Strin, Object>>();
   for(Address address: person.getAddresses()) {
       addressesList.put("city", address.getCity());
       addressesList.put("street", address.getStreet());
       addressesList.put("type", address.getType());   
   }
   resultsList.put("name", person.ngetName());
} 
```

在此*resultsList*之后将包含您需要的结构。

# php - 在 php 中处理大文件

> ID：11971168
> 
> 赞同：-1
> 
> 时间：2012-08-15T14:27:24.993
> 
> 标签：php, mysql, sql, file

我有大 sql 文件，我需要在那里更改一些行，现在我的文件中有这样的数据

```
 INSERT INTO `LINK_LA_TYP` VALUES
 ('1','8917181','1','24','2'),
 ('1','8934610','1','24','1'),
 ('1','9403766','1','30','1'),
 ('1','9422299','1','30','2'), 
```

我这样做了，例如在 $count 行我又写了一个

> 插入`LINK_LA_TYP`价值观

但是我的文件看起来像这样：

```
INSERT INTO `LINK_LA_TYP` VALUES
 ('1','8917181','1','24','2'),
 ('1','8934610','1','24','1'),
 ('1','9403766','1','30','1'),
 INSERT INTO `LINK_LA_TYP` VALUES
 ('1','9422299','1','30','2'), 
```

但我需要前一行符号，更改为 ; 我怎么能在大文件中做到这一点？所以我需要查看文件并在那里写行（完成），然后将 , 更改为 ; 在上一行，并在每 ~500 行（取决于计数器）到文件末尾执行此操作

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:34:22.260

这是最简单的工作流程：

创建一个临时文件。然后：

*   从原始文件中一次读取一行
*   在那条线上做你的工作
*   将更改的行写入临时文件
*   重复。

完成后，只需将临时文件重命名为正确的文件名，这将删除旧文件。

* * *

*如果*每行的*大小与之前完全相同*，则可以改为内联更改文件。您可以通过使用[fseek](http://php.net/fseek)正确对齐文件指针然后写入来做到这一点。这实现起来有点棘手，但可以为您节省临时文件的空间（也可能更快一点）。这只有在生成的文件大小与原始文件大小完全相同的情况下才有可能（例如，如果您只将某些字节从一个字符更改为另一个字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:34:39.983

如果您读入文件流（例如通过[`fgets`](http://php.net/fgets); 参见那里的示例），您应该计算行数并用分号替换第 X 行上的逗号；并在 X + 1 处插入新行。无需获取上一行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:24:09.483

花了一些时间一起嘲笑这个。

```
sed -i ':a;N;$!ba;s/,\n INSERT INTO/;\n INSERT INTO/g' your_file.sql 
```

如果你真的想从 php 脚本运行它，你可以把它放在 exec() 中。

# ios - 如何令人满意地刷新地图视图中的 mkannotations？

> ID：11971173
> 
> 赞同：0
> 
> 时间：2012-08-15T14:27:55.300
> 
> 标签：ios, mkmapview, mkannotation

我在想在 MapView 中刷新（添加和/或删除它们）我的注释的最佳方法是哪种。现在我总是在调用 regionDidChangeAnimated 时刷新它们，但我知道这不是一件好事，因为这种刷新调用了一个 web 服务来获取数据库中所有注释的坐标，但它花费太多（3G 连接的钱和时间也）。

在这种情况下你有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:34:18.443

将远程数据库中的所有注释坐标加载到本地 Core Data 数据库中，并使用本地查询来刷新注释

# c# - installshield项目运行时错误

> ID：11971177
> 
> 赞同：0
> 
> 时间：2012-08-15T14:28:15.477
> 
> 标签：c#, sql-server-2008, installshield, sql-scripts

我在 installshiel 程序中创建了一个项目，使用 SQL Server 2008 并用 C# 编写。

一切正常，数据库脚本也可以正常工作，但是在尝试安装由 installshield 创建的程序时出现错误

错误是

> 错误 27506。执行 SQL 脚本 db_name.sql 时出错。第 9 行
> CREATE DATABASE 语句失败。主文件必须至少为 3 MB 以容纳模型数据库的副本。(1803)

我试图在谷歌搜索，但我找不到任何结果

请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:27:05.957

安装程序绝对没有问题。它正在做它被告知要做的事情：执行一个注入其中的 SQL 脚本并报告发生的任何错误。

您实际上并没有提供 SQL 的内容，但基本上您需要查看[CREATE DATABASE](http://msdn.microsoft.com/en-us/library/ms176061.aspx)语句，注意 SIZE、MAXSIZE 和 FILEGROWTH 参数。

# php - 从总票数和所有票数中获得积极票数 (+/-)

> ID：11971184
> 
> 赞同：0
> 
> 时间：2012-08-15T14:28:34.993
> 
> 标签：php, math

我有一个查询，它返回总票数（COUNT（））和所有票的总和（SUM（））。单个投票存储为 -1 或 1。

现在我得到以下信息，想知道赞成票的数量是多少：

*   总和：-2
*   总票数：4

获得正面（和负面）票数的公式是什么？

在示例中，结果为：-1 + -1 + -1 + 1（3 票反对票和 1 票赞成票）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:31:04.733

```
-x +y = sum
x + y = tot
=> 2y = sum + tot
=> y = (sum + tot)/2 ; x = tot - y 
```

其中`y`是赞成票和反对票的数量`x`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:00:17.260

或者用更强大的数学术语：

![更强大的数学](../Images/b4653985af65f44c474ff0fabc266d04.png)

![进而](../Images/9cbc4b9b2939c10d8ef4bfefd9f67f66.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:34:32.650

为什么不将负数存储为 0？

正数将是总和，负数将是总和。

# php - 表格排序器插件中是否可以有下拉框？

> ID：11971185
> 
> 赞同：0
> 
> 时间：2012-08-15T14:28:40.593
> 
> 标签：php, ajax, tablesorter

我有一个使用 php、ajax 和 tablesorter 插件完美生成的表。我现在想将一些输入字段放入下拉框中，以便用户可以在需要更改时选择一个选项。然后，这一切都需要保存到数据库中。这是我到目前为止所拥有的：

```
 $('#getInfo').live('click', function() {
//clear table before search
    $("#inventoryUpdate tbody tr").remove();
    $('#messageInv').html('Please be patient, this might take a minute');
$.ajax({
    type: "POST",
    async: true,
    url: "getInventory.php",
    dataType: "json",
    data: ({skuStart: $("#startSkuRange").val(), skuEnd: $("#endSkuRange").val(), processDate: $("#processDate").val(),
           source: $("#source").val()}),
    success: function(data){
        $('#messageInv').hide(); 
        //console.log(data);
                    var myselectoptions = ''; 
        if(data.isbn2 === null){
                $("#inventoryUpdate").append('<tr><td>No Records Found</td></tr>');
            }else{
        for(var x=0;x<data.isbn2.length;x++)
                {
          $.each(data.defect2[x], function(index, val)
            {
             myselectoptions += '<option value="'+data.defect2[x][index].option+'">'+data.defect2[x][index].option+'</option>';
            });
        $("#inventoryUpdate").append('<tr><td id="tableSKU">'+data.sku[x]+'</td><td id="tableISBN">'+data.isbn2[x]+
                 '</td><td><input type="text" id="tableQuantity" value="'+data.quantity[x]+
                 '"/></td><td><select id="tableDefect">'+myselectoptions+
                 '"</select></td><td><input type="text" id="tableSource" value="'+data.source[x]+
                 '"/></td><td><input type="text" id="tableFeature" value="'+data.feature[x]+
                 '"/></td><td><input type="text"  id="tableLocation" value="'+data.location[x]+
                '"/></td><td><input type="text" id="tableProcessDate" value="'+data.processDate[x]+
                '"/></td><td><input type="text" id="tableBookType" value="'+data.booktype[x]+
                '"/></td><td><input type="text" id="tableCreatedBy" value="'+data.created[x]+
                '"/></td><td><input type="text" id="tableModifiedBy" value="'+data.modified[x]+
                '"/></td></tr>');
                                    }
        $("#inventoryUpdate").trigger("update");
            } // end of else statement
    } // end of success function
});// end of ajax call
}); // end of inventory update function 
```

我想让 tableDefect 和 tableFeature 输入成为动态填充的下拉框，并默认为数据库中的当前信息。例如，如果数据库中的缺陷是“防尘套撕裂”，这将是选择的选项，但我还需要数据库中的其余选项（无缺陷、水损坏等）在以下情况下可用它需要改变。我认为我需要将输入类型更改为选择，但是我该如何填充它呢？这是否需要再次调用数据库以获取信息？这甚至可以用这个插件来做吗？
编辑：我已经根据下面的答案粘贴了新代码，我现在得到了第一条记录的 19 个“选项”（它只是说未定义而不是返回的实际值），第二条记录有 38 个等等。应该只有 19选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:58:52.320

如果我没看错，只需替换`<input type="text"......>`为 `<select id=...><option>...</option></select>`

至于动态填充选择，可以通过几种不同的方式进行处理。使用您的 ajax，您可能会通过更改现有的

`data.defect[x]`到一个多维对象中，而不是它只是一个字符串，您将输出一个数组，该数组将在您的后端转换为 JSON，因此您的对象看起来像

`defect[{"option":"value"},{"option":"value"},{"option":"value"},{"option":"value"}]`

当您在继承部分构建表格时，您将在该对象上循环。你基本上会做和现在一样的事情……除了。你的选择看起来像

```
var myselectoptions = '';
   $.each(data.defect[x], function(index, val)
          {
             myselectoptions += '<option value="'+data.source[x][index].option+'">'+data.source[x][index].option+'</option>';
          });
'"/></td><td><select id="tableDefect">'+myselectoptions+'.... 
```

现在这是纯粹的概念，我还没有测试过，它可能需要一些调整来满足你的具体需求，但这是你可以处理你想做的事情的几种方法之一的核心概念，它适合你目前正在做，而不必改变太多。

# html - 表格自动具有相同的宽度

> ID：11971188
> 
> 赞同：0
> 
> 时间：2012-08-15T14:29:05.417
> 
> 标签：html, css

好的，我的问题是这样的，我有一个主表，并且如果表头的 wre beigger 等，`<td>`则表的所有表都对齐并扩展了 nicley ...`<th>`

我不得不将此表分成 2 个表，因为我希望顶部部分独立于底部部分进行排序。现在的问题是我必须手动设置`<td>`底部表格中的宽度，使其与顶部表格具有相同的宽度。有没有办法让他们自动设置？

```
<table align="center" class="data_table" style="border-bottom-style: none;  margin-bottom: 0px;">

    <tr>
        <th>
        </th>
    </tr>
</table>

<table align="center" class="data_table" style="border-top-style: none; margin-top: 0px;"> 

    <tr>
        <th colspan="9 title="Source of Repair (SOR) Remarks">SOR Remarks</th>
    </tr>
    <tr>
        <td width="845px" colspan="9">
            <textarea name="mcRemark" rows="7" cols="100" scrolling="auto">${mcRemark}</textarea>
        </td>
    </tr> 
```

这 `<td width="845px" colspan="9">` 是顶桌的大小，可能会改变....那是我的问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:31:34.273

它们现在是独立的表格，因此宽度会有所不同。

您可以使用 data_table 类将两个表中单元格的宽度设置为相同。

否则，我想您可以使用 javascript 来获取第一个表格单元格的宽度，并使用这些值来设置第二个表格的单元格。不过有点乱。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:31:38.107

如果不使用 javascript/jQuery 解决方案，不，没有办法使用简单的 HTML/CSS 来做到这一点。通过将所有数据包含在一个表中来重新考虑您的解决方案，这样 TH 将决定列宽。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T14:34:53.647

您可以将它们放回同一张表中，然后选择一行来划分它们并设置该行的样式以使其不可见。通过边框颜色和背景颜色。假两张桌子。

# delphi - 为什么在 FireMonkey Delphi 应用程序中指定运行时颜色时会出现“未声明的标识符”？

> ID：11971189
> 
> 赞同：3
> 
> 时间：2012-08-15T14:29:06.850
> 
> 标签：delphi, delphi-xe2, firemonkey

我正在玩我的第一个 FireMonkey 应用程序。我创建了一个 TRectangle 网格，现在我想以编程方式设置每个网格的颜色。我弄完了：

```
procedure TForm9.Button2Click(Sender: TObject);
var
  C : TRectangle;
  I : integer;
//const
//  Alpha = TAlphaColor($FF000000);
//  Red = Alpha or TAlphaColor($FF0000);

begin
  for I := 0 to ScaledLayout1.ChildrenCount-1 do
    begin
    If ScaledLayout1.Children[I] is TRectangle then
      begin
      C := Trectangle(ScaledLayout1.Children[I]);
      C.Fill.Color := Red; <<< ERROR
      C.Fill.Kind := bkSolid <<< ERROR;
      end;
    end;
end; 
```

`'unidentified identifier'`我在尝试分配常量“Red”和“bkSolid”时遇到编译器错误。如果我进入 System.UITypes 并按照上面注释掉的“const”复制出“Red”，那么一切正常。然而，“System.UITypes”在我的使用列表中。尝试`C.Fill.Color := TAlphaColor.Red`也不行。请问我可能做错了什么？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:08:07.587

TAlphaColor 是基数类型，而不是枚举或常量。TAlphaColors.Red 正在工作（注意 AlphaColorS 的“s”）或 claRed。通过 bkSolid 使用 TBrushKind.bkSolid

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-18T13:28:07.390

在uses子句中插入

用途 `System.UIConsts`

然后用`ClaRed`红色 `clawhite`代替白色等等..

而`TBrushKind.bkSolid`不是`bksolid`

# c++ - OpenGL：GL_QUADS 不绘制正方形

> ID：11971192
> 
> 赞同：3
> 
> 时间：2012-08-15T14:29:21.517
> 
> 标签：c++, opengl, sdl, glu

我正在尝试在屏幕上绘制一个正方形，但它清楚地绘制了一个矩形。

![](../Images/5b6eb8de13fb6c18ea69bf037064f98b.png)

这是我的渲染代码：

```
glClear(GL_COLOR_BUFFER_BIT);
glTranslatef(0,0,-0.1);
glBegin(GL_QUADS);
    glVertex3f(0,0,0);
    glVertex3f(1,0,0);
    glVertex3f(1,1,0);
    glVertex3f(0,1,0);
glEnd();

SDL_GL_SwapBuffers(); 
```

和 OpenGL 初始化代码：

```
glClearColor(0,0,0,0.6f);
glMatrixMode(GL_PROJECTION);
glLoadIdentity();
gluPerspective(30,640.0/480.0,.3f,200.0);
glMatrixMode(GL_MODELVIEW); 
```

为什么会这样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T15:03:02.657

我在您的代码中没有看到您设置 glViewport 的任何地方。我宁愿在你的 init 方法中写这样的东西：

```
glViewport(0,0,640,480);        // Reset The Current Viewport

glMatrixMode(GL_PROJECTION);    // Select The Projection Matrix
glLoadIdentity();               // Reset The Projection Matrix

// Calculate The Aspect Ratio Of The Window
gluPerspective(30.0f,(GLfloat)640/(GLfloat)480,0.3f,200.0f);

glMatrixMode(GL_MODELVIEW);     // Select The Modelview Matrix
glLoadIdentity(); 
```

还可以查看第二个[Nehe 教程](http://nehe.gamedev.net/tutorial/your_first_polygon/13002/)，它将帮助您从 OpenGL 开始，了解非常基本的东西，例如绘制三角形、正方形等基元......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:15:41.837

尝试使用[`gluOrtho2D`](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368673%28v=vs.85%29.aspx)生成正确的正交投影矩阵，在您的情况下`gluOrtho2D(0,640,0,480)`，这是假设您想要**2D**而不是 3D 的正方形。

这当然会将您的坐标系从 (0,1),(0,1) 更改为 (0,640),(0,480)。

# bash - 在 sed 表达式中使用文件的内容

> ID：11971202
> 
> 赞同：1
> 
> 时间：2012-08-15T14:29:46.357
> 
> 标签：bash, sed

我正在寻找执行`sed`附加到一系列文件的特定部分的操作，例如：

```
sed -i "s/test:\n/&$(<test.file)/g" foo.txt 
```

有没有一种方法可以输出文件或一些 BASH 变量并将其放入 sed 以输入文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:34:05.053

```
sed '/^test:$/{r test.file
d}' foo.txt 
```

应该做的伎俩。请注意，文件名后的文字换行符在所有版本的 sed 中都不是必需的，但建议使用。r 命令读取指定文件的内容。

# java - 玩！框架链接

> ID：11971207
> 
> 赞同：3
> 
> 时间：2012-08-15T14:30:00.407
> 
> 标签：java, web, playframework-2.0, web-development-server

我有一个**论坛**列表，我想为每个论坛创建一个链接：

```
<ul>
@for(forum <- forums) {
<li>
    <a href="@{Forums.show(forum.getId)}">@forum.getName()</a>
</li>
} 
```

这是标签的结果：

```
<a href="SimpleResult(200, Map(Content-Type -&gt; text/html; charset=utf-8))">bla bla</a> 
```

我认为它会产生一个链接，就像在本教程中一样：
[http ://www.playframework.org/documentation/1.0/firstapp](http://www.playframework.org/documentation/1.0/firstapp)

需要做什么改变？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T14:37:28.470

好的。找到了解决方案 - 应该这样做：

```
<a href="@routes.Forums.show(forum.getId())">@forum.getName()</a> 
```

# javascript - 使用 AngularJS 的全局 Ajax 错误处理程序

> ID：11971213
> 
> 赞同：82
> 
> 时间：2012-08-15T14:30:17.900
> 
> 标签：javascript, ajax, angularjs

当我的网站是 100% jQuery 时，我曾经这样做：

```
$.ajaxSetup({
    global: true,
    error: function(xhr, status, err) {
        if (xhr.status == 401) {
           window.location = "./index.html";
        }
    }
}); 
```

为 401 错误设置全局处理程序。现在，我使用 angularjs`$resource`和`$http`向服务器发出我的（REST）请求。有没有办法用角度类似地设置全局错误处理程序？

* * *

## 回答 #1

> 赞同：97
> 
> 时间：2012-08-15T15:17:54.477

我也在建立一个有角度的网站，我在处理全球 401 时遇到了同样的障碍。当我看到这篇博文时，我最终使用了 http 拦截器。也许你会发现它和我一样有用。

[“基于 AngularJS（或类似）的应用程序中的身份验证。”](http://www.espeo.pl/1-authentication-in-angularjs-application/) , *espeo 软件*

**编辑：最终解决方案**

```
angular.module('myApp', ['myApp.filters', 'myApp.services', 'myApp.directives'], function ($routeProvider, $locationProvider, $httpProvider) {

    var interceptor = ['$rootScope', '$q', function (scope, $q) {

        function success(response) {
            return response;
        }

        function error(response) {
            var status = response.status;

            if (status == 401) {
                window.location = "./index.html";
                return;
            }
            // otherwise
            return $q.reject(response);

        }

        return function (promise) {
            return promise.then(success, error);
        }

    }];
    $httpProvider.responseInterceptors.push(interceptor); 
```

* * *

## 回答 #2

> 赞同：77
> 
> 时间：2013-09-12T12:50:04.127

请注意，Angular 1.1.4 已弃用 responseInterceptors。您可以在下面找到基于[官方文档](http://docs.angularjs.org/api/ng.$http)的摘录，展示了实现拦截器的新方法。

```
$provide.factory('myHttpInterceptor', function($q, dependency1, dependency2) {
  return {
    'response': function(response) {
      // do something on success
      return response || $q.when(response);
    },

   'responseError': function(rejection) {
      // do something on error
      if (canRecover(rejection)) {
        return responseOrNewPromise;
      }
      return $q.reject(rejection);
    }
  };
});

$httpProvider.interceptors.push('myHttpInterceptor'); 
```

这是使用 Coffeescript 在我的项目中的外观：

```
angular.module("globalErrors", ['appStateModule']).factory "myHttpInterceptor", ($q, $log, growl) ->
  response: (response) ->
    $log.debug "success with status #{response.status}"
    response || $q.when response

  responseError: (rejection) ->
    $log.debug "error with status #{rejection.status} and data: #{rejection.data['message']}"
    switch rejection.status
      when 403
        growl.addErrorMessage "You don't have the right to do this"
      when 0
        growl.addErrorMessage "No connection, internet is down?"
      else
        growl.addErrorMessage "#{rejection.data['message']}"

    # do something on error
    $q.reject rejection

.config ($provide, $httpProvider) ->
  $httpProvider.interceptors.push('myHttpInterceptor') 
```

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-06-20T06:42:39.123

使用以下内容创建文件`<script type="text/javascript" src="../js/config/httpInterceptor.js" ></script>`：

```
(function(){
  var httpInterceptor = function ($provide, $httpProvider) {
    $provide.factory('httpInterceptor', function ($q) {
      return {
        response: function (response) {
          return response || $q.when(response);
        },
        responseError: function (rejection) {
          if(rejection.status === 401) {
            // you are not autorized
          }
          return $q.reject(rejection);
        }
      };
    });
    $httpProvider.interceptors.push('httpInterceptor');
  };
  angular.module("myModule").config(httpInterceptor);
}()); 
```

# android - 在Android中动态更新txt文件

> ID：11971215
> 
> 赞同：0
> 
> 时间：2012-08-15T14:30:22.937
> 
> 标签：android, android-file

我正在尝试动态写入 txt 文件。我能够创建并写入文件 1 行。之后我想写第二行。在下面的代码中，我检查文件是否存在。如果它已经存在，我会写入文件而不创建新文件（参见下面的代码）。但是，每当我第二次尝试写作时，我都会收到此错误。

错误：

```
.IllegalArgumentException: File //sdcard//uiu_error_report.txt contains a path separator 
```

代码：

```
String filename = "/sdcard/uiu_error_report.txt";

File myFile = new File(filename);

if (myFile.createNewFile()) {

  FileOutputStream fOut = new FileOutputStream(myFile);
  OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
  myOutWriter.append("[" + dateFormatted + "," + module2 + "," + type2 + "," + message2 + "]");
  myOutWriter.close();
  fOut.close();

} else {

    try {
      OutputStreamWriter out = new OutputStreamWriter(context.openFileOutput(filename,countFileRows()+1));
      // write the contents on mySettings to the file
      out.write("[" + dateFormatted + "," + module2 + "," + type2 + "," + message2 + "]");
      // close the file
      out.close();

    // Do something if an IOException occurs.
    } catch (java.io.IOException e) {

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:13:59.623

Better way to do this....

```
try {
    FileOutputStream fos = context.openFileOutput(filename, Context.MODE_APPEND | Context.MODE_WORLD_READABLE);
    OutputStreamWriter myOutWriter = new OutputStreamWriter(fos);
    myOutWriter.append("[" + dateFormatted + "," + module2 + "," + type2 + "," + message2 + "]"+"/n");
    // myOutWriter.close();

    myOutWriter.close();
} catch (Exception e) {
    e.printStackTrace();
} 
```

# iphone - 如何安全地升级/备份使用核心数据的现有应用程序？

> ID：11971219
> 
> 赞同：2
> 
> 时间：2012-08-15T14:30:44.457
> 
> 标签：iphone, xcode, backup, itunes

我有一个几个月前构建的应用程序，并希望继续升级该应用程序。

从那时起，该应用程序有大约 6 个月的数据，我想在升级应用程序之前备份这个应用程序的状态（**如果我担心我会以某种方式删除/弄乱核心数据持久存储安装新版本的应用程序。**）我不记得我是从 iTunes 商店还是从 xCode 安装获得的应用程序。

我已经使用 iTunes 备份了我的 iPhone，目前正在使用一个应用程序，该应用程序的应用程序标识符与生产应用程序不同：

*   我要保存数据的实时应用程序称为“应用程序”
*   该应用程序的进行中版本称为“app_test”

设备上有两个版本的应用程序。

我想看看我为 app_test 创建的更改在具有真实数据的实时生产应用程序上的外观。

*   **如果出现问题，我需要采取哪些步骤来确保我可以恢复我的应用程序的数据？**

**我是否足以将 xcode 的项目包 ID 从“app_test”更改为“app”以查看生产中的更改？**

感谢您的意见，我真的很重视这些数据，不想丢失它！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T08:41:39.180

第一个重要点 - 不要将“app_test bundle”标识符更改为“app” - 这将覆盖手机上的实时应用程序，并且您的数据将消失（好吧，您至少必须从备份中恢复...... )

您应该能够使用诸如“iPhone Explorer”之类的 OSX 程序来浏览您连接的手机 - 找到您的应用程序，并查看是否可以获取 .sqlite 文件（可能在应用程序的文档或 libray 文件夹中） - 复制它到您的桌面。

现在你已经有了你的实时数据库，你有几个选择。您还可以获取 app_test 数据库，并使用您最喜欢的 sql 工具合并内容 - 或将实时 .sqlite 文件导入您的 app_test xcode 项目，并告诉 app_test 将其用作数据源。

如果您需要对数据库的写入权限，则必须首先将实时 .sqlite 从 app_test 包复制到文档或库文件夹。

# android - 无法扩展 ListFragment -“调用需要 API 级别 11”

> ID：11971221
> 
> 赞同：4
> 
> 时间：2012-08-15T14:30:53.310
> 
> 标签：android, android-fragments

我正在尝试扩展 ListFragment，但我不断收到上述错误。我将 android 支持库添加到我的项目中。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-15T14:34:00.967

您的项目/类可能有错误的导入。您可能从 API 11 (android.app.ListFragment) 扩展 ListFragment，并且应该从兼容性类 ( `android.support.v4.app.ListFragment`)扩展 ListFragment

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T14:33:18.610

尝试添加

```
import android.support.v4.app.Fragment;
import android.support.v4.app.ListFragment; 
```

# c# - C#：通过 ADO.NET 在 SQL Server 2008 上运行事务

> ID：11971224
> 
> 赞同：1
> 
> 时间：2012-08-15T14:30:55.357
> 
> 标签：c#, ado.net, transactions

使用以下方法，我可以使用 ADO.NET 对 Oracle 数据库运行事务。当我在 SQL Server 数据库上尝试相同的代码时，我得到了显示的错误。这是什么原因，如何解决？

**错误：**

> *当分配给命令的连接处于挂起的本地事务中时，ExecuteNonQuery 要求该命令具有事务。该命令的 Transaction 属性尚未初始化。*

**编码：**

```
 /// <summary>
    /// A method to run transactional SQL on a database. Does not return a record set.
    /// </summary>
    /// <param name="transactions">A list of commands</param>
    /// <returns>A boolean indicator of success</returns>
    public bool ExecuteTransactionNonQuery(List<string> transactions)
    {
        if (transactions == null)
        {
            throw new ArgumentNullException("transactions");
        }

        PrepareConnection();

        DbTransaction dbTransaction = DBFactoryDatabaseConnection.BeginTransaction();

        try
        {
            foreach (var transaction in transactions)
            {

                DBFactoryDatabaseCommand.CommandText = transaction;
                DBFactoryDatabaseCommand.CommandType = CommandType.Text;
                DBFactoryDatabaseCommand.ExecuteNonQuery();
            }

            dbTransaction.Commit();
        }
        catch(Exception ex)
        {
            dbTransaction.Rollback();
            try
            {
                Close();
            }
            catch (Exception f)
            {
                throw new Exception("Error: Transaction execute failed on the database. " + ex.Message + ". Following that the application failed to close the connection. " + f.Message + ". ExecuteTransactionNonQuery().");
            }
            throw;
        }
        finally
        {
            dbTransaction.Dispose();
        }

        return true;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:33:33.763

您需要将**事务**分配给**命令**。

```
DBFactoryDatabaseCommand.Transaction = dbTransaction; 
```

# ruby - 为什么 Ruby Builder::XmlMarkup 将检查标记添加到 xml？

> ID：11971225
> 
> 赞同：11
> 
> 时间：2012-08-15T14:30:56.783
> 
> 标签：ruby, xml, builder

我正在尝试使用 Builder::XMLMarkup 来构建一些 xml，并且它不断向我的 xml 添加一个空元素。

为什么它会这样做，我该如何阻止它？

```
xml = Builder::XmlMarkup.new
=> <inspect/> 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-15T14:50:19.000

Builder 实现了一个`method_missing`添加由方法调用名称给出的标签的版本。

假设您在 irb（或 rails 的控制台）中玩游戏，当您评估表达式（例如`Builder::XmlMarkup.new`）时，irb 的默认行为是调用`inspect`它，以便生成一个字符串来显示给您。在构建器的情况下，`inspect`不是通常的 ruby`inspect`​​ 方法 - 它通过`method_missing`并添加标签。

这只会在交互式玩 ruby​​ 时发生。你可以做类似的事情

```
xml = Builder::XmlMarkup.new; false 
```

在这里，表达式的结果是`false`如此 irb 调用`inspect`它并让您的构建器对象独自一人。

不断地这样做可能会很尴尬。如果你这样做

```
xml = Builder::XmlMarkup.new; false
def xml.inspect; target!; end 
```

then`xml`仍然是一个构建器对象，当被 irb 检查时显示其内容。您将无法创建名为`inspect`（除了使用之外`tag!`）的标签，但这通常是一个小小的不便。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-08-27T08:33:02.150

如果您仍想查看输出：

```
xml = Builder::XmlMarkup.new; xml.target! 
```

# python - 运行代码时Python在极少数情况下崩溃-如何调试？

> ID：11971230
> 
> 赞同：2
> 
> 时间：2012-08-15T14:31:27.470
> 
> 标签：python, debugging, hdf5, ollydbg, h5py

我有一个问题，我现在花了几个月的时间来解决！

本质上，我正在运行需要读取并保存到 HD5 文件的代码。我为此使用 h5py。

调试起来非常困难，因为问题（无论是什么）只发生在大约 5% 的情况下（每次运行需要几个小时），当它到达那里时，它会完全崩溃 python，所以用 python 本身调试是不可能的。使用简单的日志也无法确定确切的崩溃情况——它似乎是非常随机的，在代码中的不同点崩溃，或者有延迟。

我尝试使用 OllyDbg 来弄清楚发生了什么，并且可以安全地得出结论，它始终在以下位置崩溃：http: [//i.imgur.com/c4X5W.png](https://i.imgur.com/c4X5W.png)![图片](../Images/72b0aafbb282ff51f2497ad9d4d9b9b7.png)

似乎是在调用 python 本机 PyObject_ClearWeakRefs 后不久，出现访问冲突错误消息。奇怪的是文件被成功写入。什么会导致访问冲突错误？或者是python内部（例如堆栈？）而不是文件（即我的代码）相关？

有谁知道这里发生了什么？如果没有，是否有更聪明的方法来找出到底发生了什么？也许一些隐藏的python日志或我不知道的东西？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:00:24.653

`PyObject_ClearWeakRefs`在 python 解释器本身中。但如果它只发生在少量运行中，它可能与硬件有关。你可以尝试的事情：

*   在另一台机器上运行你的程序。如果它在那里没有崩溃，则可能是硬件问题。
*   重新安装 python，以防安装的版本以某种方式损坏。
*   运行内存测试程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-26T21:46:53.090

感谢所有的答案。这次我运行了两个版本，一个带有新的 python 安装和我的相同程序，另一个在我的原始计算机/安装上，但是用 numpy 读/写程序替换了所有 HDF5 读/写程序。

该程序继续在我的第二台计算机上偶尔崩溃，但在我的主计算机上，更改代码后我的崩溃为零。因此，我认为可以安全地得出结论，这些问题与 HDF5 或更具体地与 h5py 相关。似乎更多的人在这方面遇到了 h5py 的问题。鉴于我的应用程序中的任何错误都可能导致巨大的财务损失，我决定完全抛弃 HDF5 以支持其他稳定的解决方案。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-05-17T09:03:32.650

使用 try catch 语句。这可以放入程序中，以防止程序在输入错误数据时崩溃

# python - settings.py 中的 Django 1.4“LOGGING”变量似乎被忽略了

> ID：11971231
> 
> 赞同：0
> 
> 时间：2012-08-15T14:31:29.083
> 
> 标签：python, django, logging, django-1.4

我有一个我想登录 Django 的模块，它看起来像这样：

```
import logging
logger = logging.getLogger(__name__)

def foo():
    #this is a test of logging
    logger.info("info foo")
    logger.warning("warn foo")
    logger.error("error foo") 
```

我在 settings.py 中的 LOGGING 设置如下：

```
LOGGING = {
    'version': 1,
    'disable_existing_loggers': True,
    'formatters': {
        'verbose': {
            'format': '%(levelname)s %(asctime)s %(module)s %(process)d %(thread)d %(message)s'
        },
        'simple': {
            'format': '%(levelname)s %(message)s'
        },
        },
    'handlers': {
        'null': {
            'level':'DEBUG',
            'class':'django.utils.log.NullHandler',
            },
        'console':{
            'level':'DEBUG',
            'class':'logging.StreamHandler',
            'formatter': 'simple'
        },
        'mail_admins': {
            'level': 'ERROR',
            'class': 'django.utils.log.AdminEmailHandler',
        }
    },
    'loggers': {
        'django': {
            'handlers':['null', 'console'],
            'propagate': True,
            'level':'INFO',
            },
        'django.request': {
            'handlers': ['mail_admins'],
            'level': 'ERROR',
            'propagate': False,
            },
    }
} 
```

当我运行视图调用 foo 时的输出如下：

```
WARNING:root:warn foo
ERROR:root:error foo 
```

我也期待信息日志，但是好的，让我们再试一次，但这次将 LOGGING 中的每个“级别”参数设置为“信息”：

```
WARNING:root:warn foo
ERROR:root:error foo 
```

好的......好吧，将所有内容设置为“错误”怎么样？：

```
WARNING:root:warn foo
ERROR:root:error foo 
```

LOGGING 被注释掉了？

```
WARNING:root:warn foo
ERROR:root:error foo 
```

我设置了 DEBUG = False 甚至懒得手动设置

```
LOGGING_CONFIG = 'django.utils.log.dictConfig' 
```

有没有人有任何其他想法？我不明白为什么 Django 忽略了我的 LOGGING 设置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:48:23.053

像往常一样，在堆栈溢出时输入它会让我意识到我的错误。

而不是打电话

```
logger = logging.getLogger(__name__) 
```

我需要专门调用所需的记录器：

```
logger = logging.getLogger('django') 
```

这解决了这个问题。

# git - Git：如何合并/变基 2 个不是直接后继的提交

> ID：11971237
> 
> 赞同：2
> 
> 时间：2012-08-15T14:31:47.520
> 
> 标签：git, git-rebase

我有类似的提交

```
Initial->FeatureX->B->C->D->FixBugInFeatureX->E->F-> 
```

现在我想用 FeatureX，FixBugInFeatureX 进行一次提交

所以我尝试了

```
 git -rebase -i -<FeatureX> 
```

然后，我将提交 FixBugInFeatureX 移动到文本文件中 FeatureX 之后，并将其从更改`pick`为`squash` This works if there is no conflict. 但它向我展示了一个新分支，其中包含**所有**重写的提交 Initial->FeatureX->B->C->D->FixBugInFeatureX->E->F。我可以将此分支合并到我的 Head 中 - 但我仍然有所有以前的提交（FixBugInFeatureX 现在第二次包含 FeatureA。更重要的是，提交 B、C 和 D 之间的所有提交现在都存在两次。

我想要的是一个新的提交树

```
Initial->FeatureX->B->C->D->E->F 
```

我怎样才能像这样变基 - 还是我需要不同的命令？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:22:24.677

您可以检查您的 FeatureX 和 FixBugInFeatureX 提交（然后您将处于分离的头部状态）并将它们提交到 2 个新分支

```
git checkout <FeatureX> 
git checkout -b featureX

git checkout <FixBugInFeatureX>
git checkout -b bugfix 
```

然后将这些分支合并在一起，这样原始提交和修复之间就不会有任何冲突

```
git merge featureX 
```

然后你可以检查你的主人（或包含该链的分支）了

```
git checkout master 
```

并运行 git rebase 交互模式来重新设置您的主分支和包含您的 FeatureX 的固定版本的分支。

```
git rebase -i bugfix 
```

只需为提交提供您想要的顺序，rebase 将为您完成其余的工作（您希望链的顺序）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-27T11:13:22.663

我找到了解决方案：

rebase --interactive 完成这项工作，如果我在初始提交**之前将提交的哈希传递给 squash：**

```
git rebase  -i --no-autosquash "<hash of comitt BEFORE FeatureX>" 
```

这将打开一个文本文件，如

```
pick 07b952c some unrelated committ 
pick 6c46e25 FeatureX
pick b4bc625 B
pick f2fab98 C
pick dc6ba8b D
pick 5633408 FixBugInFeatureX
pick 077888f E
pick 0123445 F

# Rebase xxx..yyy onto zzz
#
# Commands:
#  p, pick = use commit
#  r, reword = use commit, but edit the commit message
#  e, edit = use commit, but stop for amending
#  s, squash = use commit, but meld into previous commit
#  f, fixup = like "squash", but discard this commit's log message
#  x, exec = run command (the rest of the line) using shell
#
# These lines can be re-ordered; they are executed from top to bottom.
#
# If you remove a line here THAT COMMIT WILL BE LOST.
#
# However, if you remove everything, the rebase will be aborted.
#
# Note that empty commits are commented out 
```

我现在可以将此文件修改为

```
pick 07b952c some unrelated committ 
pick 6c46e25 FeatureX
squash 5633408 FixBugInFeatureX
pick b4bc625 B
pick f2fab98 C
pick dc6ba8b D
pick 077888f E
pick 0123445 F 
```

并且 git 会将两个提交压缩在一起。之后将显示一个可编辑的文本文件，我可以在其中编辑 6c46e25 的新提交消息，现在还包括 5633408

如果在两个提交之间进行了合并或推送/拉取，这将无法令人满意。这导致至少在我的试验中重复历史。但除此之外，这正是我想要的。没有重复的历史。显然，重点是在第一次提交编辑之前传递提交的哈希值。

# android - 操作栏填充

> ID：11971246
> 
> 赞同：2
> 
> 时间：2012-08-15T14:33:00.060
> 
> 标签：android, actionbarsherlock

我有一系列带有操作栏 sherlock 的选项卡。每个选项卡都有文本和图标。

如何更改每个图标周围的填充，它就在每个选项卡中的文本旁边。此外，一些选项卡中有很大的空间（在侧面），而另一些则没有。我该如何摆脱这个？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T06:41:11.533

使用自定义样式填充到 ActionBarSherlock 中的选项卡

```
<style name="MyStyle" parent="Theme.Sherlock">
    <item name="actionBarTabStyle">@style/MyTabStyle</item>
    <item name="actionBarTabTextStyle">@style/MyTabTextStyle</item>
</style>
<style name="MyTabStyle" parent="Widget.Sherlock.ActionBar.TabView">
    <item name="android:paddingLeft">6dp</item>
    <item name="android:paddingRight">6dp</item>
</style>
<style name="MyTabTextStyle" parent="Widget.Sherlock.ActionBar.TabText">
    <item name="android:textAppearance">@android:style/TextAppearance.Medium</item>
    <item name="android:textColor">@android:color/primary_text_dark</item>
    <item name="android:textSize">12dip</item>
</style> 
```

# mysql - MySQL 上的权限管理：仅执行存储过程，不再访问数据库

> ID：11971247
> 
> 赞同：1
> 
> 时间：2012-08-15T14:33:02.300
> 
> 标签：mysql, stored-procedures, rights-management

我正在通过 mysql 数据库开发基于 Web 的界面通信。对于交易会，我需要将界面和数据库交给客户。与数据库的每次通信都通过存储过程进行封装。因此，我想创建一个只有权执行存储过程但没有更多权限的用户，这样没有人可以看到数据库的详细信息......

mysql 5.1可以做到这一点吗？这可能吗？

有没有人有不同的解决方案来限制对将提供给其他人的 mysql 数据库的访问？

预先感谢和亲切的问候

索利克

# javascript - Javascript 慢慢“刷新”DOM 树

> ID：11971248
> 
> 赞同：1
> 
> 时间：2012-08-15T14:33:05.450
> 
> 标签：javascript

我有一个很奇怪的问题。我正在尝试使用以下方式获取图像的宽度和高度：

1.  创建一个图像标签并将 .src 添加到其中。
2.  将此图像标签添加到 document.body。
3.  使此图像标签可见（显示：内联）。
4.  获取元素的 .offsetWidth 和 .offsetHeight。
5.  隐藏图像标签（显示：无）；

所有这些都是使用 JS 完成的，并且在我的本地主机上运行得非常好，但是当我将网站上传到我的客户端托管服务提供商时，我感到很惊讶。在第 4 步中，offsetWidth 和 .offsetHeight 为 0。为什么会这样？我认为在第 3 步之后第 4 步之前我需要某种“冲洗”，但我不确定。有什么建议么 ？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:36:16.007

这可能是由于图像尚未加载造成的。尝试这样的事情：

```
img.onload = function() {
  // get the offsetWidth and offsetHeight
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:37:17.240

您必须等待图像通过网络实际加载。您也不需要将事物添加到 DOM：

```
var img = new Image();
img.onload = function() {
  handleImageSize(this.width, this.height);
};
img.src = "http://whatever.com/your/img.jpg"; 
```

在这里，“handleImageSize”将是您编写的一个函数，用于执行您需要对图像尺寸执行的任何操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:45:14.897

正如其他答案所暗示的那样，是由于图像没有被 DOM 完全加载。这在您的本地服务器上运行良好，因为我怀疑您正在本地加载图像，这意味着它们几乎是瞬时的；但是，在将它们移至服务器后，会有轻微的延迟。这是一个容易被忽视的问题，很容易解决。

其他答案就可以解决问题；但为了争论，这里是 jQuery 版本

```
var img = $('<img>', {
    src: 'http://dummyimage.com/150/000/fff.gif'
}).one('load', function() {
    var offsets = $(this).offset();
});

$('body').append(img); 
```

## [jsFiddle](http://jsfiddle.net/rGnBw/)

# python - Pymongo - Script v Shell 中的游标迭代

> ID：11971252
> 
> 赞同：-2
> 
> 时间：2012-08-15T14:33:20.557
> 
> 标签：python, mongodb, cursor, pymongo

我正在尝试遍历查询，返回各种字典，我最终将对其进行编码以插入数组。

我目前的问题是我的代码在 shell 中工作，但在脚本中不起作用。

这是我的代码：

```
cursor = db.model.find({'time': {'$gte': start, '$lt': end}}).sort('time')

for result in cursor:
    result['_id'] 
```

在 shell 中使用时，它返回 id。在脚本中使用时，它只是像从未发生过一样跳过它。在这两种情况下，如果我添加 print (result) 我会得到整个结果。

我将不胜感激帮助和解释。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:47:53.950

明确使用`print`语句：

```
cursor = db.model.find({'time': {'$gte': start, '$lt': end}}).sort('time')

for result in cursor:
    print result['_id'] 
```

Shell 会自动显示每个计算值（即`result['_id']`），而脚本不会。为了将一些数据写入标准输出，您应该`print`明确使用。

# php - 请帮助澄清这个 CodeIgniter 示例（在自身内部调用方法）

> ID：11971253
> 
> 赞同：1
> 
> 时间：2012-08-15T14:33:20.760
> 
> 标签：php, oop, codeigniter

查看[**Codeigniter 用户指南中的示例**](http://codeigniter.com/user_guide/libraries/file_uploading.html)，我想知道`if( !$this->upload->do_upload() )`从`do_upload()`方法本身内部调用的作用。

这是直接粘贴的代码。

```
class Upload extends CI_Controller {

    function __construct() {
        parent::__construct();
    }

    function do_upload() {
        $config['upload_path'] = './uploads/';
        $this->load->library('upload', $config);

    // ** My question starts here **
        if ( !$this->upload->do_upload() ) {
            $error = array('error' => $this->upload->display_errors());
            $this->load->view('upload_form', $error);
        }
        else{
            $data = array('upload_data' => $this->upload->data());
            $this->load->view('upload_success', $data);
        }
    }
} 
```

如我所见，它正在`do_upload()`从内部检查方法`do_upload()`..我弄错了吗？
原谅我的天真，但我以前从未见过这种情况..这是一种常见的做法吗？
它有什么作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:37:03.337

```
if ( !$this->upload->do_upload() ) { 
```

正在调用 CI 自己的上传类中的 do_upload 函数。

文档中的示例不是最好的。

所以它不是在你的控制器中再次调用 do_upload ，而是在实际上传的上传类中调用 do_upload 。

高温高压

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:37:38.647

它不是调用自己，而是调用控制器对象属性上`do_upload`的方法。这些方法只是简单地命名相同，但它们属于不同的对象。该对象似乎是在上一步中加载的库（注意：我不知道 CI）。`upload``Upload``$this->upload``'upload'`

# oracle - 具有多列查询单列的 Oracle 索引

> ID：11971254
> 
> 赞同：5
> 
> 时间：2012-08-15T14:33:27.063
> 
> 标签：oracle, indexing

在我们的 Oracle 安装中的一个表中，我们有一个在其中两列（X 和 Y）上有索引的表。如果我使用 where 子句仅触及 X 列对表进行查询，Oracle 是否能够使用索引？

例如：

表 Y：Col_A、Col_B、Col_C、

索引存在于 (Col_A, Col_B)

```
SELECT * FROM Table_Y WHERE Col_A = 'STACKOVERFLOW'; 
```

会使用索引，还是会进行表扫描？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T14:43:04.937

这取决于。

您可以通过让 Oracle 解释执行计划来检查它：

```
EXPLAIN PLAN FOR 
   SELECT * FROM Table_Y WHERE Col_A = 'STACKOVERFLOW'; 
```

进而

```
select * from table(dbms_xplan.display); 
```

所以，例如

```
create table table_y (
  col_a varchar2(30),
  col_b varchar2(30),
  col_c varchar2(30)
);

create unique index table_y_ix on table_y (col_a, col_b); 
```

然后一个

```
explain plan for
  select * from table_y
  where col_a = 'STACKOVERFLOW';

select * from table(dbms_xplan.display); 
```

该计划（在我的安装上）如下所示：

```
------------------------------------------------------------------------------------------
| Id  | Operation                   | Name       | Rows  | Bytes | Cost (%CPU)| Time     |
------------------------------------------------------------------------------------------
|   0 | SELECT STATEMENT            |            |     1 |    51 |     1   (0)| 00:00:01 |
|   1 |  TABLE ACCESS BY INDEX ROWID| TABLE_Y    |     1 |    51 |     1   (0)| 00:00:01 |
|*  2 |   INDEX RANGE SCAN          | TABLE_Y_IX |     1 |       |     1   (0)| 00:00:01 |
------------------------------------------------------------------------------------------

Predicate Information (identified by operation id):
---------------------------------------------------

   2 - access("COL_A"='STACKOVERFLOW') 
```

ID 2 向您展示了该索引`TABLE_Y_IX`确实用于`index range scan`.

如果在另一个安装上，Oracle 选择使用索引取决于很多事情。做出此决定的是 Oracle 的*查询优化器。*

**更新**如果您觉得如果 Oracle 使用索引会更好（即性能方面），您可能想尝试一下`+ index_asc(...)`（请参阅 [索引提示](http://docs.oracle.com/cd/E11882_01/server.112/e41084/sql_elements006.htm#SQLRF50406)）

所以在你的情况下，这就像

```
SELECT /*+ index_asc(TABLE_Y TABLE_Y_IX) */ * 
  FROM Table_Y 
 WHERE Col_A = 'STACKOVERFLOW'; 
```

此外，我会确保您已收集有关表及其列的统计信息。您可以使用

```
select last_analyzed from dba_tables where table_name = 'TABLE_Y'; 
```

和

```
select column_name, last_analyzed from dba_tab_columns where table_name = 'TABLE_Y'; 
```

如果没有统计信息或者它们过时，请让自己熟悉`dbms_stats`软件包以收集此类统计信息。

这些统计数据是*查询优化器*在做出决策时严重依赖的数据。

# icefaces - IceFaces 1.8 中的 EffectQueue 和链接效果

> ID：11971258
> 
> 赞同：1
> 
> 时间：2012-08-15T14:33:41.463
> 
> 标签：icefaces, icefaces-1.8

我目前正在使用 IceFaces 1.8，并且一直在尝试找到一种简单的方法来链接 UI 组件上的效果。例如，我在页面右上角有一个“显示帮助”链接。单击时，帮助文本将出现在用户的某些控件下方。我希望通过向下滑动然后突出显示此文本。

我的 bean 上有一个返回 true 或 false 的基本`isRenderHelp()`方法，并使用它来使用标签`fire`上的属性呈现效果`<ice:effect>`，所以它看起来像这样：

`<ice:effect effectType="slidedown" fire="#{myBean.renderHelp}">`

`<ice:effect effectType="slideup" fire="#{!myBean.renderHelp}">`

当帮助链接切换 bean 中的 renderHelp 标志时，这会导致帮助部分滑入和滑出。有一个小例外，即在第一次单击链接之前，renderHelp 返回 null 以防止在第一页渲染时触发上滑动画。

现在，我注意到查看 1.8 的展示代码，有一个`EffectQueue`扩展 Effect 的类。这允许我将多个效果添加到我的 bean 中的队列中，并从`getEffect`我可以分配给 panelGroup`effect`属性的方法返回队列。但是，尽管设置了优先级，但它不会执行队列中的事件。我确定我没有正确使用它，我想知道应该如何使用它。

通常我会为这种类型的事情使用 jQuery，但 UI 使用许多部分提交。我们的页面是通过 Liferay portlet 显示的，因此在任何 partialSubmit 上都会重新呈现视图，从而撤消 jQuery 对 DOM 的任何修改。

那么有没有什么简单的方法可以在 IceFaces 1.8 中链接效果？建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T08:14:53.853

这是我如何实现 effectQueue 以显示和淡化文本。

```
private EffectQueue effectQueue;
public Effect getSaveSettingsEffect() {
    return effectQueue;
}
public void fireEffect(ActionListener e) {
    if(effectQueue == null) {
        effectQueue = new EffectQueue("apperAndFade");
        Appear appear = new Appear();
        appear.setDuration(2);
        effectQueue.add(appear);
        Fade fade = new Fade();
        fade.setDuration(3);
        effectQueue.add(fade);
        effectQueue.setTransitory(true);
    }
    effectQueue.setFired(false);
} 
```

小面：

```
<ice:commandButton value="fireEffect" action="#{bean.fireEffect}"/>
<ice:outputText value="text" style="display: none;" effect="#{bean.effectQueue}"/> 
```

# java - 在枚举 VB.NET 的帮助下获取设置

> ID：11971259
> 
> 赞同：2
> 
> 时间：2012-08-15T14:33:46.697
> 
> 标签：java, .net, vb.net, enums

我正在将 Java 程序转换为 vb.net，其中应用程序中的设置由枚举控制。

```
 private enum SmsTagRule {
    //      KEYWORD   DOMAIN    BusinessClass  PREFIX  SEARCHNAME   SEARCHPARAM  SENDEMAIL  KEYWORDS...
    BAG_TAG("BagTag", "BagTag", "FoundBagTag", "b", "SearchBagTag", "490_TagNumber", true, "BagTag"),
    SKI_TAG("SkiTag", "SkiTag", "FoundSkiTag", "a", "SearchSki", "518_LabelNo", false, "SkiTag", "ski"),
    PC_TAG("PcTag", "ds", "FoundPC", "", "SearchPcTag", "585_LabelNo", false, "pc"); 
```

并且根据选择的不同设置中的女巫“标签”将返回。有没有办法在 vb.NET 中做到这一点。我曾考虑为这些标签中的每一个创建一个枚举，但似乎它应该是一个更好的解决方案。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:48:46.337

继续并创建一个代表您的设置的自定义类型：

```
Class TagRule

    Public Shared BAG = new TagRule("BagTag", "BagTag", "FoundBagTag", ...)
    Public Shared Ski = new TagRule("SkiTag", "SkiTag", "FoundSkiTag", ...)
    ...

    Dim _keyword As String
    Public Property Keyword as String
        Public Get
            return _keyword         
        End 
        Private Set
            _keyword = value
        End
    End Property

    ...

    Private Sub New(keyword as String, domain as String, businessclass as String, ...)
        _keyword = keyword
        _domain = domain
        ....
    End Sub

End Class 
```

你可以像这样使用它：

```
Dim setting As TagRule = Nothing

If somecondition Then
    setting = TagRule.Ski
Else
    setting = TagRule.BAG
End If

Dim keyword = setting.Keyword
Dim domain = setting.Domain 
```

# mysql - 分组、计数和位置

> ID：11971261
> 
> 赞同：2
> 
> 时间：2012-08-15T14:33:51.720
> 
> 标签：mysql, sql, count, group-by, where

我被难住了，挠了挠头。它一定很简单，但我没有看到它。

假设我有四个表：

```
video = id
hastag = id, tag_id, video_id
hasteam = id, team_id, video_id
hasidol = id, idol_id, video_id 
```

此数据集（仅作为示例）：

```
video = (1), (2), (3)
hastag = (1, 1, 1), (2, 1, 2), (3, 2, 3)
hasteam = (1, 1, 1), (2, 1, 3), (3, 2, 2)
hasidol = (1, 1, 3) 
```

这个查询：

```
SELECT v.id ,
COUNT(vhtag.id),
COUNT(vhteam.id),
COUNT(vhidol.id)
FROM video v
LEFT JOIN hastag vhtag ON vhtag.video_id = v.id
LEFT JOIN hasteam vhteam ON vhteam.video_id = v.id
LEFT JOIN hasidol vhidol ON vhidol.video_id = v.id

WHERE
v.id <> 1
AND
(
  vhtag.tag_id IN (SELECT htt2.tag_id FROM hastag htt2 WHERE video_id = 1)
  OR
  vhteam.team_id IN (SELECT htt3.team_id FROM hasteam htt3 WHERE video_id = 1)
  OR
  vhidol.idol_id IN (SELECT htt4.idol_id FROM hasidol htt4 WHERE video_id = 1)
)
GROUP BY v.id 
```

它给了我与 WHERE 子句不对应的“有”行的计数。例如，如果视频行只有一个共同的视频 ID 为 1 的团队和一个完全不相关的标签，当它应该说“共同标签”时，它会给我“共同标签计数：1，共同团队计数：1”计数：0（因为它是一个不相关的标签），普通团队计数：1”。

现在，只要我将查询限制为只有一个“有”表，如下所示：

```
SELECT v.id ,
COUNT(vhtag.id)
FROM video v
LEFT JOIN hastag vhtag ON vhtag.video_id = v.id

WHERE
v.id <> 1
AND
(
  vhtag.tag_id IN (SELECT htt2.tag_id FROM hastag htt2 WHERE video_id = 1)
)
GROUP BY v.id 
```

然后它确实有效，但问题是当我尝试将多个“有”表放入查询时。我尝试使用 HAVING，但它无法识别“vhtag.tag_id”列。我显然在这里做错了什么，任何人都可以帮助我吗？

编辑：

这种作品：

```
LEFT JOIN hastag vhtag ON vhtag.video_id = v.id AND vhtag.tag_id IN (SELECT htt2.tag_id FROM hastag htt2 WHERE video_id = 1)
LEFT JOIN hasteam vhteam ON vhteam.video_id = v.id AND vhteam.team_id IN (SELECT htt3.team_id FROM hasteam htt3 WHERE video_id = 1)
LEFT JOIN hasidol vhidol ON vhidol.video_id = v.id AND vhidol.idol_id IN (SELECT htt4.idol_id FROM hasidol htt4 WHERE video_id = 1) 
```

我也可以在 Doctrine 中使用它（我很笨，忘记了 WITH）。这是最佳方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:27:53.957

尝试简化查询，例如以这种方式 -

```
SELECT
  v.id,
  COUNT(vhtag.id),
  COUNT(vhteam.id),
  COUNT(vhidol.id)
FROM
  video v
LEFT JOIN (SELECT * FROM hastag WHERE video_id = 1) vhtag
  ON vhtag.video_id = v.id
LEFT JOIN (SELECT * FROM hasteam WHERE video_id = 1) vhteam
  ON vhteam.video_id = v.id
LEFT JOIN (SELECT * FROM hasidol WHERE video_id = 1) vhidol
  ON vhidol.video_id = v.id
WHERE
  v.id <> 1
GROUP BY
  v.id 
```

它给出正确的结果吗？

输出：

```
+------+-----------------+------------------+------------------+
| id   | COUNT(vhtag.id) | COUNT(vhteam.id) | COUNT(vhidol.id) |
+------+-----------------+------------------+------------------+
|    2 |               0 |                0 |                0 |
|    3 |               0 |                0 |                0 |
+------+-----------------+------------------+------------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:57:13.627

您有一个问题，您的联接导致每个团队内的交叉联接。

最简单的方法是计数不同：

```
SELECT v.id , COUNT(distinct vhtag.id), COUNT(distinct vhteam.id),
       COUNT(distinct vhidol.id)
FROM video v LEFT JOIN
     hastag vhtag
     ON vhtag.video_id = v.id
     LEFT JOIN hasteam vhteam
     ON vhteam.video_id = v.id
     LEFT JOIN hasidol vhidol
     ON vhidol.video_id = v.id 
```

真正的解决方案是分别聚合每个值，然后将结果连接在一起。

# php - 具有相同名称，不同ID的多个MySQL记录

> ID：11971264
> 
> 赞同：0
> 
> 时间：2012-08-15T14:34:01.423
> 
> 标签：php, mysql, sql, database

对此可能有一个简单的答案，但我一生都无法让它发挥作用。

我正在使用 PHP 和 MySQL，并设置了类似的东西：

```
 $studentname = mysql_real_escape_string($_POST['sname']);
        $studentnumber = mysql_real_escape_string($_POST['snumber']);
        $course = mysql_real_escape_string($_POST['courseselect']);

        $bike3 = mysql_query("SELECT stoodnumber FROM bikes505 WHERE stoodname='" . $studentname . "'");
        $bikestoods = mysql_fetch_array($bike3);

    while($row = mysql_fetch_array($stoodlistq))
            {
                $stoodentname = $row['stoodname'];
                $stoodentnumber = $row['stoodnumber'];
                //$coursename = $row2['coursename'];
                //$coursecode = $row2['coursecode'];

                if($studentname == $stoodentname && $studentnumber == $stoodentnumber){
                    //$success = 1;
                        //$success = "yupp";
                        //echo "SUCCESS, WE CAN REGISTER YOOOU!";
                        echo "<br>";

                        //echo "INSERT INTO " . $course . "";
                        switch($course){
                            case "Biking Safely":
                                if($studentnumber = $bikestoods[0] or $bikestoods[1]){
                                    echo "Sorry, this student has already registered";
                                } else if($bikecurrent < $bikemax){
                                    mysql_query("INSERT INTO bikes505 VALUES ('" . $stoodentname . "','" . $stoodentnumber . "')");
                                    echo "Yay, successfully registered " . $stoodentname . " - " . $stoodentnumber . " for " . $course;
                                    echo "<br>";
                                } else{
                                    echo "Sorry, class is full!";
                                }
                                break; 
```

...等等。我遇到的唯一问题是，如果我有两个同名的学生，列表中的第二个学生会回显信息不正确。

例如，MySQL 表有 'stoodname' 和 'stoodnumber'，如果 'Jimmy St.James','1010' 和 'Jimmy St.James','1090' 都是表中的记录，它只会让我注册课程中的 Jimmy 1010 而不是 Jimmy 1090。

我只是在验证我的方式吗？还是我错过了一些非常明显的东西？起初我认为这只是因为我只使用了数组中的第一项，`$bikestoods[0]`所以我将其更改为`$bikestoods[0] or $bikestoods[1]`它仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:41:51.120

根据评论，您已`$stoodlistq`定义为：

```
$stoodlistq = mysql_query("SELECT * FROM stoodinfo"); 
```

稍后，您将使用以下代码块：

```
$studentname = mysql_real_escape_string($_POST['sname']);
$studentnumber = mysql_real_escape_string($_POST['snumber']);
...
while($row = mysql_fetch_array($stoodlistq)) {
    ...
    if($studentname == $stoodentname && $studentnumber == $stoodentnumber){ 
```

此代码中的`while()`循环遍历每条记录，但是，`if-statement`检查 POST 变量。POST 变量构成“一个学生”的单一组合 - 因此，您只会得到一个可以注册的学生。

要解决此问题，您需要更新提交“学生姓名”/“学生编号”的表单以接受多个输入 -*或*更新`if-statement`以仅检查学生姓名（这可能会导致更不受欢迎的情况）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:40:48.300

您正在查询寻找`stoodname`. 当你在做这样的事情时，通过一个可以重复的值来做这个语句是不好的。也许您希望他们使用用户名和密码登录，或者使用您提供给他们的 id 登录，但除非这里有人有更好的主意，否则我认为您无法通过名称来登录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:41:01.420

```
$bikestoods = mysql_fetch_array($bike3); 
```

仅指`bike3`查询的第一个结果，并且只有 2 个列：[0] 和 [stoodnumber] 没有 [1]。如果你想收集bike3中的所有id，你必须诅咒一次结果。

```
while($stoodnumbers[] = mysql_fetch_array($bike3)); 
```

# python - Django 无法识别 ssl 相关的 os.environ

> ID：11971266
> 
> 赞同：0
> 
> 时间：2012-08-15T14:34:12.040
> 
> 标签：python, django

我在公司 Intranet 上安装了 Django，使用 mod_wsgi 在 Apache 上运行。Apache 服务器设置了 SSL，当用户点击 CGI 页面时，一切都按预期工作，但是我的 django 应用程序似乎没有获取任何与 SSL 相关的环境变量（ssl_client_s_dn 等），无论它们是否使用我的 django 页面http:// 或 https://。

我认为主要问题是我不明白 django 从哪里提取 os.environ 以及如何改变它。我查看了官方 django 文档和其他关于“django”和“ssl”的帖子，但这些似乎处理的视图有时需要是 http，有时是 https。我只是想获得 ssl 相关信息以显示在 os.environ 中，我不知道下一步该往哪里看。

你需要了解什么？httpd.conf wsgi 配置设置？我的项目 settings.py 或 wsgi.py 中的行？

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:38:29.733

如果您在 Apache 中使用`mod_wsgi`，并且在 Apache 中设置环境变量（使用`SetEnv`），那么您就不走运了：`mod_wsgi`的环境变量与 Apache 中的环境变量是分开的。

很多人都遇到了类似的问题，在 Apache 中设置变量时使用在 Django`SetEnv`中访问时完全不可见。`os.environ`

然而，有一些解决方案。它在[此处](http://drumcoder.co.uk/blog/2010/nov/12/apache-environment-variables-and-mod_wsgi/)列出，并且基本上出现在您的 wsgi 脚本中的这些行（根据您的需要进行调整）：

```
def application(environ, start_response):
    os.environ['ssl_client_s_dn'] = environ['ssl_client_s_dn']
    return _application(environ, start_response) 
```

这基本上将您的 WSGI 应用程序的第一个参数翻译成`os.environ`字典。有关详细信息，请参阅上面链接的帖子。

# vb.net - 创建透明控件的一般解决方案是什么？

> ID：11971267
> 
> 赞同：6
> 
> 时间：2012-08-15T14:34:12.323
> 
> 标签：vb.net, winforms, controls, transparency

因此，现在查看了一段时间，我已经阅读了大约 20 种不同的实现，但还没有看到一个可靠的、基于控件的、基于框架的通用解决方案来实现真正透明的控件。

这种可能过于简单的方法根本没有做任何事情，并创建了一个永远不会被使用的例程（InvalidateEx）：http: [//bytes.com/topic/c-sharp/answers/248836-need-make-user-control-transparent](http://bytes.com/topic/c-sharp/answers/248836-need-make-user-control-transparent)

这似乎暗示了先前的答案是什么：[https ://web.archive.org/web/20141227200000/http://bobpowell.net/transcontrols.aspx](https://web.archive.org/web/20141227200000/http://bobpowell.net/transcontrols.aspx)

但是它使用计时器滴答来执行 InvalidateEx 方法。

这似乎放弃了多层控件并在单个分层面板上处理所有绘图，同时掩盖了标签对象似乎如何实现其自己的透明度： http: [//www.codeproject.com/Articles/25048/How-在窗口中使用透明图像和标签](http://www.codeproject.com/Articles/25048/How-to-Use-Transparent-Images-and-Labels-in-Window)

这是一种完全不基于框架的方法： http: [//www.codeproject.com/Articles/30135/General-solution-for-transparent-controls](http://www.codeproject.com/Articles/30135/General-solution-for-transparent-controls)

这个答案中接受的解决方案对我来说根本不起作用：[透明控制上的透明控制？](https://stackoverflow.com/questions/7874134/transparent-control-on-transparent-control)

我得到的控件是通用的纯色（白色），上面绘制了透明图像。

所以，我开始我自己的实现。

我宁愿不依赖自底向上的 GDI 绘图，即以最父窗体执行所有绘图，我宁愿不对透明位图进行预渲染，我宁愿不从 Forms.Control 以外的其他东西继承这正在执行一些自己的巧妙技巧来缩短透明度。我真的很想深入了解如何在具有完全透明度支持的控制面上绘图。显然，例如标签控件本身就有一个完整的实现，它是如何工作的？

从逻辑上讲，透明控件不能依赖简单的 1 位剪辑区域，需要保持大部分完整。需要正确处理控件的多层，即正确的绘制顺序等，而不会导致无限循环。

第一个也是最常见的建议是：

```
SetStyle(ControlStyles.SupportsTransparentBackColor, True)
Me.BackColor = Color.Transparent 
```

我理解的第一行是同义词

```
Protected Overrides ReadOnly Property CreateParams As System.Windows.Forms.CreateParams
    Get
        Dim result As System.Windows.Forms.CreateParams = MyBase.CreateParams
        result.ExStyle = result.ExStyle Or WindowsMessages.WS_EX_TRANSPARENT
        Return result
    End Get
End Property 
```

根据继承的类，它的行为非常不同。对于 Forms.Control，OnPaintBackground 选择使用父控件的背景颜色清除剪辑矩形。不太聪明。

覆盖和删除基本 OnPaintBackground 调用会导致控件保持“脏”状态，而不会覆盖它下面的内容。使用透明颜色（乐观方法）清除会产生黑色透明像素场，并使控件显示为完全黑色。

从逻辑上讲，这是有道理的，为提高效率而进行的底层控制不会重新绘制他们预期此控制会覆盖的区域。然后表单的该区域永远不会更新并保持表单存在之前的任何内容。在其上绘制透明颜色有点令人困惑，因为这意味着图形缓冲区甚至不包含底层像素，而是实际的空白被替换为黑色透明的东西以使控件显示为黑色。

第一个挑战似乎是处理控件本身重绘时的处理，让所有底层控件在该区域中重绘自身（不会自动使控件本身无效以开始堆栈溢出），然后在底层和最新像素上绘制自身. 我还没有找到一种方法来做到这一点。我最接近的是通过挖掘 .net 代码并找到 ButtonRenderer.DrawParentBackground 方法。这在很大程度上似乎有效，尽管快速测试表明重叠组件的 z 顺序仍未正确处理，底层控件绘制在该控件的顶部。

第二个挑战是当底层控件发生变化时，让控件正确地重绘自身。通过在质询一中断开自动失效，很难通知控件使其自身失效*而不*使其父项失效。

如果有人完全解决了这个问题，请提供代码，如果没有，请提供一些我如何处理问题的一个或几个部分的经验。

非常感谢。

**编辑：**

根据 WS_EX_TRANSPARENT 似乎假设了有关 WS_EX_TRANSPARENT 的详细信息[- 它实际上做了什么？](https://stackoverflow.com/questions/6165136/ws-ex-transparent-what-does-it-actually-do)

**研究更新：** ButtonRenderer.DrawParentBackground 实际上只是由 Control 本身使用，仅当使用 Application.EnableVisualStyles() 并简单地强制父级的背景绘制。似乎是的同义词

```
InvokePaintBackground(Parent, e.Graphics) 
```

这将重现父控件的所有背景绘制细节。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-24T03:11:15.507

我已经创建了所需的通用透明度控件，解决方案是对父控件及其所有同级控件进行详细分解，并根据 InvokePaint() 和 InvokePaintBackground() 方法在 OnPaintBackground() 方法上准备递归绘图例程. 通过定义连续较小的剪辑并与较低的控件相交，此方法可最大限度地减少绘图开销。

*   完整的控件包括一种检测和响应同级控件的 Invalidate 方法的方法，有效地绘制透明控件的堆栈，并有效地允许在动画底层控件上覆盖完整的 Alpha 通道。

*   该控件可以与子控件和父控件的所有排列交错，同时提供视觉上准确的透明度。

*   控制中没有考虑命中测试。

*   此控件不会过度绘制在绘制事件期间未执行绘制的控件。这是一个很大的限制。

*   要使用控件，只需从基础继承并覆盖 OnPaint 方法即可执行自定义绘图。只要首先调用基方法，也可以覆盖 OnPaintBackground 方法。

最后，如果有人想要包括失效处理在内的完整代码，请告诉我。如果您有系统绘制组件的解决方案，也请告诉我。此外，如果您有一个更简单的解决方案，这意味着我在这方面浪费了很多时间，我也不会因为收到它而感到不安！

![在此处输入图像描述](../Images/1a249bb969ffcdd25ead4bd59027a501.png)

提供了 OnPaintBackground 方法的控件摘录：

```
''' <summary>
''' Recursively paint all underlying controls in their relevant regions, stacking drawing operations as necessary.
''' </summary>
''' <param name="pevent"></param>
''' <remarks></remarks>
Protected Overrides Sub OnPaintBackground(pevent As System.Windows.Forms.PaintEventArgs)
    'Store clip and transform for reversion
    Dim initialClip As Region = pevent.Graphics.Clip
    Dim initialTransform As Drawing2D.Matrix = pevent.Graphics.Transform

    'Develop list of underlying controls
    Dim submarinedControls As New List(Of Control)
    For Each Control As Control In m_Siblings
        If Control.Visible AndAlso Above(Control) AndAlso Me.ClientRectangle.IntersectsWith(Control.RelativeClientRectangle(Me)) Then submarinedControls.Add(Control)
    Next

    'Prepare clip for parent draw
    Dim parentClip As System.Drawing.Region = New System.Drawing.Region(initialClip.GetRegionData)
    For Each Control As Control In submarinedControls
        parentClip.Exclude(Control.RelativeClientRectangle(Me))
    Next
    pevent.Graphics.Clip = parentClip

    'Evaluate control relationship to parent, temporarily adjusting transformation for parent redraw. This translation must be relative since the incoming graphics may already have a meaningful transform applied.
    Dim translation As Point = Parent.RelationTo(Me)
    pevent.Graphics.Transform = New Drawing2D.Matrix(1, 0, 0, 1, initialTransform.OffsetX + translation.X, initialTransform.OffsetY + translation.Y)

    'Fully draw parent background
    InvokePaintBackground(Parent, pevent)
    InvokePaint(Parent, pevent)

    'Reset transform for sibling drawing
    pevent.Graphics.Transform = initialTransform

    'Develop initial clip of submarined siblings
    Dim siblingClip As System.Drawing.Region = New System.Drawing.Region(initialClip.GetRegionData)
    siblingClip.Exclude(parentClip)

    For Each Control As Control In submarinedControls
        'Define relative position of submarined sibling to self
        translation = Control.RelationTo(Me)

        'Define and apply clip *before* transformation
        Dim intersectionClip As New Region(Control.RelativeClientRectangle(Me))
        intersectionClip.Intersect(siblingClip)
        pevent.Graphics.Clip = intersectionClip

        'Apply transformation
        pevent.Graphics.Transform = New Drawing2D.Matrix(1, 0, 0, 1, initialTransform.OffsetX + translation.X, initialTransform.OffsetY + translation.Y)

        'Raise sibling control's paint events
        InvokePaintBackground(Control, pevent)
        InvokePaint(Control, pevent)

        'Revert transformation and exclude region
        pevent.Graphics.Transform = initialTransform
        siblingClip.Exclude(intersectionClip)
    Next

    'Revert transform and clip to pre-drawing state
    pevent.Graphics.Transform = initialTransform
    pevent.Graphics.Clip = initialClip
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T21:51:43.907

```
Me.Visible = False 
```

或者

```
Me.Opacity = 0 
```

或者

```
Me.Hide() 
```

# vb.net - 处理 DateTime 和 Null 值

> ID：11971269
> 
> 赞同：2
> 
> 时间：2012-08-15T14:34:17.960
> 
> 标签：vb.net, ado.net

1.  我有一个名为 modifieddate 的 DateTime 类型的变量，它可以设置为 null。
2.  我使用数据读取器填充变量，如果读取器为空，则将值设置为空
3.  当我进一步使用该变量时，存储过程抱怨我没有提供该值。“程序或函数 'tHistory_Insert' 需要参数 '@modifieddate'，但未提供”

问题：关于如何在日期为空时将空值传递到存储过程中的任何想法？

**第1步**

```
Public modifieddate As Nullable(Of DateTime) 
```

**第2步**

```
If IsDBNull(dr("modifieddate")) = False Then

     modifieddate = DateTime.Parse(dr("modifieddate"))
Else

     modifieddate = Nothing
End If 
```

**第 3 步**

```
command.Parameters.Add("@modifieddate", SqlDbType.DateTime).Value = modifieddate
command.ExecuteNonQuery() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T14:50:56.313

如果它什么都没有，我认为你必须通过 DBNull.Value。像这样的东西：

```
If modifieddate Is Nothing then
  command.Parameters.Add(...).Value = DBNull.Value
Else
  command.Parameters.Add(...).Value = modifieddate
End If 
```

# javascript - 如何在 slideToggle 上更改标题和 html

> ID：11971273
> 
> 赞同：1
> 
> 时间：2012-08-15T14:34:23.070
> 
> 标签：javascript, jquery

我有这个 HTML 标记：

```
<a title="Hide comments" hreflang="1" class="comment-show-link" rel="tooltip" href="">Hide comments</a>
<a title="Hide comments" hreflang="2" class="comment-show-link" rel="tooltip" href="">Hide comments</a> 
```

我想在 slideToggle 上将标题和 HTML 更改为“显示评论”，但不知道如何操作。我编写这段代码来显示/隐藏一个 DIV：

```
$('.comment-show-link').click(function(e) {
        $('#comment-show-'+$(this).attr("hreflang")).slideToggle('slow');
        e.preventDefault();
}); 
```

但不知道如何检查 DIV 是隐藏还是可见，并在每种情况下更改标题和 HTML。我也知道我可以使用 text() 或 html() jQuery 函数来实现这一点，但是如何实现呢？有什么帮助吗？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:37:59.373

试试这个：

```
$('.comment-show-link').click(function(e) {
        var $this = $(this);
        var num = $this.attr('hreflang'); 
        $('#comment-show-'+num).slideToggle('slow', function(){
            if ($(this).is(':hidden')) {
               // do something here
               // $this.attr('...', '...') 
            }
        });
        e.preventDefault();
}); 
```

# asp.net - 如何复制网站中的文件夹？

> ID：11971283
> 
> 赞同：2
> 
> 时间：2012-08-15T14:35:05.320
> 
> 标签：asp.net, visual-studio-2010, asp.net-4.0, visual-web-developer-2010

我在一个文件夹中有几个网页，并且想复制该文件夹以获得一组相似的页面（只有几个更改）。

但是，当我简单地将其复制并粘贴到 Visual Web Developer 中时，会出现错误：

> 类型“WebApplication1.Folder1.WebForm1”已经定义了一个名为“Page_Load”的成员，具有相同的参数类型

和：

> “WebApplication1.Folder1.WebForm1”类型已经包含“form1”的定义

*那么，在命名空间或类名不完全相同*的情况下，如何制作副本- 有没有办法让 Visual Studio 为我做这件事？如果不是 - 我应该改变什么才能让它工作但不破坏代码？

编辑：

这是我所做的：

1.  新项目
2.  Asp.net 网络应用程序
3.  将文件夹添加到项目
4.  将网络表单添加到文件夹
5.  文件夹右键复制
6.  项目右键粘贴
7.  F5
8.  出现错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:04:56.630

在复制的文件夹中，您必须更改一些内容。

1.  在复制版本的 WebForm1.aspx.cs 代码后面，将命名空间更改为新的东西。从 **命名空间 WebApplication1.Folder1**到**命名空间 WebApplication1.NewFolder1**
2.  在复制文件的 WebForm1.aspx 的标记中，您需要更改页面的“继承”属性。它应该从 **Inherits="WebApplication1.Folder1.WebForm1"**更改为**Inherits="WebApplication1.NewFolder1.WebForm1"**。
3.  您还应该更改复制的任何文件中的名称空间，但如果您只有一个空的网络表单，那么前两个步骤应该可以帮助您。

可能有一种自动方法可以完成所有这些工作（查找和替换可以工作，或者其他一些 VS 功能），但我不知道。

# ruby-on-rails - 如何与同一个对象共享两个不同的关联？

> ID：11971284
> 
> 赞同：0
> 
> 时间：2012-08-15T14:35:06.787
> 
> 标签：ruby-on-rails, associations, polymorphic-associations

我有一个属于和 has_many 的关系。

一个孩子属于_一个父母 一个父母有_许多孩子。

但是，我还有另一种方法，父母可以生孩子，那就是通过我用来创建父类型分组的 join_table。

这是我对如何做到这一点的可怕猜测：

```
# child.rb

belongs_to :parent
belongs_to :parent_group, :dependent => :destroy
delegate :parent, :to => :parent_group

# parent.rb

has_many :children
has_many :children, through: :parent_groups 
```

请注意，我实际上并没有使用这些命名约定。这些只是为了让我的工作匿名。

然后我的迁移看起来像这样：

```
class CreateParentGroup < ActiveRecord::Migration
  def self.up
    create_table :parent_groups do |t|
      t.integer :parent_id
      t.timestamps
    end
    add_column :child, :parent_group_id, :integer
  end 
```

所以我的目标是，如果我输入`Parent.find(n).children`，它将返回*通过*parent_group 和任何直接相关的子对象的子对象。

反之亦然，如果我选择 select `Child.find(n).parent`，无论是否*通过*父组，它都会选择其父组。

最后，我将能够选择 parent_groups 并选择父母的集合。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:51:37.693

首先，如果您谈论的是连接表，那么我认为您对该表的架构设置并不完全正确。它应该是这样的：

```
class CreateParentGroup < ActiveRecord::Migration
  def self.up
    create_table :parent_groups do |t|
      t.integer :parent_id
      t.integer :child_id
      t.timestamps
    end
  end
end 
```

所以，现在你的桌子`parent_groups`可以为许多父母容纳许多孩子。

至于在模型中设置关联：您不能/不应该用相同的名称命名两个不同的关联。因此，您不能`has_many :children`同时`has_many :children, :through => :parent_groups`在一个模型中做到这一点。因为如果您通过`Parent.find(n).children`Rails 访问子项，则不知道要使用哪个关联。

我会做这样的事情：

```
class Parent < AR
  has_many :regular_children, :class_name => 'Child'
  has_many :group_children, :class_name => 'Child', :through => :parent_groups

  # implement a method that combines them both
  def children
    regular_children + group_children
  end
end

class Child < AR
  belongs_to :parent
  belongs_to :parent_group, :dependent => :destroy

  # forget the delegate, otherwise your invoke of Child.find(n).parent always
  # gets delegated to parent_group which is/can be wrong due to data
end 
```

我认为这是更多的路要走...

# python - python 列表是否具有 __contains__ 的等价物来测试身份？

> ID：11971286
> 
> 赞同：9
> 
> 时间：2012-08-15T14:35:11.607
> 
> 标签：python, identity, containment

对于内置的 python 容器（`list`,`tuple`等），`in`运算符等效于`any(y == item for item in container)`前一种方法更快（更漂亮）的警告：

```
In [13]: container = range(10000)
In [14]: %timeit (-1 in container)
1000 loops, best of 3: 241 us per loop
In [15]: %timeit any(-1 == item for item in container)
1000 loops, best of 3: 1.2 ms per loop 
```

有没有等价物`any(y is item for item in container)`？也就是说，使用`is`而不是`==`?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T14:38:41.027

不，没有。`is`只是不需要经常使用运算符来证明必须维护 C 优化方法并增加 python API 的混乱。

列表和元组的`in`测试确实进行了类似于 的完整搜索`any`，尽管在 C 中，顺便说一句。然而，在集合中，测试利用了容器底层的有效存储算法，并且在预期的情况下搜索需要恒定的时间。对于集合和映射，键都应该有一个稳定的散列，这在大多数情况下意味着`is`不需要，真的。

所以，正确的写法是：

```
# For sequences
any(y is item for item in container)

# For sets, short circuit first for the not-present case:
# (note that you normally should not need this as you are supposed to rely on the hash)
y in setcontainer and any(y is item for item in setcontainer)

# For mappings, y is a key
y in mapping 

# For mappings, y is a value, and you do not have a key, fall back to any
any(y is item for item in mapping.itervalues()) 
```

# objective-c - 如何在一个 UIViewController 中动态创建多个 UITableView

> ID：11971289
> 
> 赞同：1
> 
> 时间：2012-08-15T14:35:14.303
> 
> 标签：objective-c, xcode, uitableview

我是使用 XCode 和 Objective-C 开发的新手，希望你能帮助我。

问题是，我有一个带有 UITableView 的 UITableViewController（使用 InterfaceBuilder 创建）。

部分标题下的单元格是可展开的。

现在我想在现有的TableView下动态创建多个UITableView。

样式将与现有 TableView 的样式相同。

你能告诉我如何以编程方式创建这些 TableView 吗？

非常感谢你

迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:55:30.603

从你所说的尝试使用分组表视图。查看此链接以获得快速概览，然后转到分组表视图部分。

**[编辑在这里](https://stackoverflow.com/questions/1938921/expand-collapse-section-in-uitableview "类似的堆栈页面")找到了这个例子：**

好像这就是你要找的东西。还有一个很酷的想法。

您只需制作自己的自定义标题行并将其作为每个部分的第一行即可。子类化 UITableView 或现在在那里的标题可能会是一个巨大的痛苦，我不确定你是否可以像现在这样轻松地从它们中获取操作。您可以轻松地将单元格设置为看起来像标题，并设置`tableView:didSelectRowAtIndexPath`手动展开或折叠它所在的部分。

如果我是你，我会存储一个布尔数组，对应于你每个部分的“消耗”值。然后，您可以`tableView:didSelectRowAtIndexPath`在每个自定义标题行上切换此值，然后重新加载该特定部分。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    if (indexPath.row == 0) {
        ///it's the first row of any section so it would be your custom section header

        ///put in your code to toggle your boolean value here
        mybooleans[indexPath.section] = !mybooleans[indexPath.section];

        ///reload this section
        [self.tableView reloadSections:[NSIndexSet indexSetWithIndex:indexPath.section] withRowAnimation:UITableViewRowAnimationFade];
    }
} 
```

然后，您将设置您的数字`numberOfRowsInSection`以检查该`mybooleans`值，如果该部分未展开，则返回 1，如果该部分已展开，则返回 1+ 该部分中的项目数。

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    if (mybooleans[section]) {
        ///we want the number of people plus the header cell
        return [self numberOfPeopleInGroup:section] + 1;
    } else {
        ///we just want the header cell
        return 1;
    }
} 
```

您还必须更新您`cellForRowAtIndexPath`以返回任何部分中第一行的自定义标题单元格。

# jquery - 3 带有 JQuery 的 JSON 中的“维度”数组

> ID：11971291
> 
> 赞同：0
> 
> 时间：2012-08-15T14:35:19.013
> 
> 标签：jquery, arrays, json, multidimensional-array

我想念VB。或许这很悲哀……

我需要制作一个“3 维”数组来表示以下数据。数据以 XML 开头，并被解析为 2D“数组数组”，如下所示（为清楚起见添加了描述符）：

```
[NodeArray]
    [Node: 0][Year: 2012][Quantity1: 3][Quantity2: 5] [Title: Orange]
    [Node: 1][Year: 2012][Quantity1: 5][Quantity2: 9] [Title: Apple]
    [Node: 2][Year: 2011][Quantity1: 4][Quantity2: 9] [Title: Orange]
    [Node: 3][Year: 2011][Quantity1: 8][Quantity2: 12] [Title: Apple]
    [Node: 4][Year: 2010][Quantity1: 2][Quantity2: 6] [Title: Orange]
    [Node: 5][Year: 2010][Quantity1: 10][Quantity2: 2] [Title: Apple] 
```

我想将此 2-D 数组解析为 3-D 对象数组，如下所示：

```
[Year Array]
    [2012]
        [Quantity1]: [3],[7]
        [Quantity2]: [5],[9]
        [Title]: [Orange],[Apple]
    [2011]
        [Quantity1]: [4],[8]
        [Quantity2]: [9],[12]
        [Title]: [Orange],[Apple]
    [2010]
        [Quantity1]: [2],[10]
        [Quantity2]: [6],[2]
        [Title]: [Orange],[Apple] 
```

在 VB 中，这非常简单。我会查看我的原始数据并重新调整我的数组以适应每个维度中的最大条目数。然后我将遍历数据并将其加载...

如果 2012 年索引 = 0，则“Array(0,1,1)”将返回“9”

我相信这可以用 JSON 完成，但我没有足够的经验知道如何操作。我希望这个问题足够具体，可以对我想要完成的工作提供一些见解。

**------------------编辑和新代码-----------------**

我很感激答案。

我意识到我目前的致命缺陷是我没有使用 JSON 构建我的二维数组（尽管我的示例看起来是这样的）。这是我用来构建二维数组的方法：

```
for(i=0; i<titleArray.length; i++)
{
rowArray[i] = [yearArray[i], titleArray[i],quantityOneArray[i],quantityTwoArray[i]];
} 
```

因为每个数组中总是有相同数量的条目，所以我可以可靠地使用一个数组的长度来遍历所有关联的数组。我也意识到使用“i++”是中学做事的方式，所以我对更优雅的索引方法的建议持开放态度。

但是假设我想用 JSON 构建它？我相信这还不是 JSON 格式……如果是的话，我应该可以说“rowArray[i].year”是吗？

再次感谢 - 我很幸运有这样一个活跃的社区。

**-------------------- EDIT2 & 新代码--------------------**

好的，我想我破解了 JSON 的问题。我喜欢你！我只需要稍微不同地格式化数组对象，现在我可以使用 .whatever 属性来调用数组的成员！

```
for(i=0; i<titleArray.length; i++) 
{
rowArray[i] = {"year":yearArray[i], "title":titleArray[i],"quantity1":quantityOneArray[i],"quantity2":quantityTwoArray[i]};
console.log("rowArray["+i+"]: " + rowArray[i].year + ", " + rowArray[i].title +", "+rowArray[i].quantity1+", "+rowArray[i].quantity2);
} 
```

现在对于 3-D 阵列...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:46:16.013

作为 JSON 对象的数据看起来像

```
var data = 
{
    "2011": {
        "Quantity1": [ 3, 7],
        "Quantity2": [ 5, 9],
        "Title": [
            "Orange",
            "Apple"
        ]
    },
    "2012": {
        "Quantity1": [ 4, 8],
        "Quantity2": [ 9, 12],
        "Title": [
            "Orange",
            "Apple"
        ]
    }, 
    ...
} 
```

请注意，我在结构的前 2 个级别使用了一个对象，这样您就可以使用字符串对它们进行索引。例如，你`Array(0,1,1)`会变成`data["2011"]["Quantity2"][1]`.

或者，您可以使用数组并拥有

```
var data = 
[
    [
        [ 3, 7],
        [ 5, 9],
        [ "Orange",
          "Apple" ]
    ],
    [
        [ 4, 8],
        [ 9, 12],
        [ "Orange",
            "Apple" ]
    ], 
    ...
] 
```

然后你可以这样做`data[0][1][1]`很像你的 VB 示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:44:25.557

这样的事情应该这样做：

```
var year_array = new Array(); // empty array
for ( node in node_array )
{
    if ( !year_array.hasOwnProperty(node.year) ) // if year is not in array yet
    {
        year_array[node.year] = new Array(); // create an empty array for it
    }
    year_array[node.year].push({
        "quantity1": node.quantity1,
        "quantity2": node.quantity2,
        "title": node.title,
    });
} 
```

所有这一切都是通过 2D 数组，并将值以呈现的格式放入 3D 数组中。唯一棘手的是`if ( !year_array.hasOwnProperty(node.year) )`块，它会在每年的条目第一次出现时对其进行初始化。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:44:44.570

标准 JavaScript 与 VB 非常相似，如果您可以在 VB 中完成，那对您来说应该不是问题。

# javascript - 使用 Visual Studio 在 ASP.NET 上未定义 jQuery 和 val()

> ID：11971294
> 
> 赞同：0
> 
> 时间：2012-08-15T14:35:28.117
> 
> 标签：javascript, jquery, asp.net, visual-studio-2010

我尝试使用此代码使用 jQuery 获取 var 值。由于某种原因，名称等于 null 或未定义，我似乎无法弄清楚。

```
<asp:TextBox 
    ID="Text_Email" 
    runat="server" 
    CssClass="" 
    Width="234px">Email</asp:TextBox>

var name = $("#<%=Text_Email.ClientID%>").value; // name == undefined 
```

这是我的主要脚本：

```
$(document).ready(function () {
    $("#<%=send_info.ClientID%>").click(function () {
        // var name = document.getElementById("#<%=Text_Name.ClientID%>").value;
        var name = $("#<%=Text_Email.ClientID%>").value;
        var reg = /^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;

         if (reg.test(name) == false) {
             $(this).val("");
             $("#error_email_adress").removeClass('email_valid');
             $("#error_email_adress").addClass('email_invalid');
             return false;
         } else {
             $("#error_email_adress").removeClass('email_invalid');
             $("#error_email_adress").addClass('email_valid');
             alert("Message sent");
             return true;
         }
     });
 }); 
```

这部分也让我感到困惑。为什么会出现这种情况？有人可以向我解释为什么在这里定义名称吗？

```
$("#<%=Text_Email.ClientID%>").click(function () {
    var name = this.value;//name != undefined;
}); 
```

而这里的名字是未定义的

```
var name = $("#<%=Text_Email.ClientID%>").value; // name == undefined; 
```

感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:36:20.453

jQuery 没有值，但文本框的 val() 函数，

试试这个，

```
var name = $("#<%=Text_Email.ClientID%>").val(); 
```

您的代码将是

```
$("#<%=Text_Email.ClientID%>").click(function () {
       var name = $(this).val();// you will get value in name by this statement.
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:40:30.883

试试这个而不是你写的

```
$(this).val() 
```

请注意，jquery 的语法几乎很简单。有关元素值的函数是 $.val() ，您可以通过传递一个字符串来设置元素的值，例如：

```
$(this).val("the desired value"); 
```

或者您可以通过不传递任何内容来获取元素的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:40:49.720

```
$("#<%=Text_Email.ClientID%>").click(function () {
    var name = this.value;  //<-- 'this' here is a DOM HTML Object which has .value property
    var elem = jQuery(this); //<-- converts the DOM Object into a jQuery object, jQuery does not have .value property
    var nameVal = elem.val(); //<-- get the value the jQuery way
}); 
```

阅读材料：

*   [jQuery .val()](http://api.jquery.com/val/)

# c++ - 根据输入数据创建 STL 向量 - 标量或复杂类型

> ID：11971303
> 
> 赞同：0
> 
> 时间：2012-08-15T14:36:07.423
> 
> 标签：c++, stl, vector, complextype

我有一种情况，我想将 STL Vector 创建为 a`vector<float>`或`vector<complex<float> >`. 该程序将在运行时根据输入确定数据格式。

然而，如果没有大量的 if/else 语句，这似乎是不可能的。这就是我想要做的。显然，这不起作用 b/c typedef 对于 if/else 是本地的。

```
if (INPUT_IS_REAL)
     typedef TYPE float;
else
     typedef TYPE complex<float>; 

vector v1<TYPE>;
vector v2<TYPE>;
 ..... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:37:19.297

可能的解决方案：

```
if (INPUT_IS_REAL)
    code_path<float>();
else
    code_path<complex<float>>(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T15:18:09.810

类型是在编译时定义的。您不能在执行期间更改类型。要处理两种不同的数据类型，您需要两段不同的代码；当你知道你正在处理什么输入时，你决定使用哪个。

# excel - Excel 提示用户输入要在宏中使用的数字

> ID：11971307
> 
> 赞同：1
> 
> 时间：2012-08-15T14:36:30.440
> 
> 标签：excel, excel-2007, vba

我有一个录制的宏来从 Web 服务中提取选择字段，URL 类似于[http://xxxx.com/reportviewer.aspx?ids=](http://xxxx.com/reportviewer.aspx?ids=) **123456789012** 我想提示用户输入该数字作为变量并有如果该数字在宏中使用，则传递到 2 个位置的数字。

我知道我必须创建另一个宏来让用户输入一个值，之后我不确定如何将它传递到正确的位置？

到目前为止，这是我的代码

```
Sub Macro2()
 '
' Macro2 Macro
'
' Keyboard Shortcut: Ctrl+r
'
    With ActiveSheet.QueryTables.Add(Connection:= _
        "URL;http://xxxx.com/reportviewer.aspx?ids=123456789012", _
        Destination:=Range("$A$1"))
        .Name = "reportviewer.aspx?ids=123456789012"
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .BackgroundQuery = True
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .WebSelectionType = xlSpecifiedTables
        .WebFormatting = xlWebFormattingNone
        .WebTables = "30,33,37,38,46"
        .WebPreFormattedTextToColumns = True
        .WebConsecutiveDelimitersAsOne = True
        .WebSingleBlockTextImport = False
        .WebDisableDateRecognition = False
        .WebDisableRedirections = False
        .Refresh BackgroundQuery:=False
    End With
End Sub
    Range("A2").Select 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:48:58.653

你可以`InputBox`用来收集用户的输入。收集后，您可以在继续执行代码之前测试他们的输入。这是输入/验证示例：

```
'-store user input in 'sUserInput' variable
Dim sUserInput As String
sUserInput = InputBox("Enter Number:", "Collect User Input")

'test input before continuing to validate the input
If Not (Len(sUserInput) > 0 And IsNumeric(sUserInput)) Then
    MsgBox "Input not valid, code aborted.", vbCritical
    Exit Sub
End If 
```

您的代码可以通过参考以下`sUserInput`完整版本来引用该变量：

```
Sub Macro2()
 '
' Macro2 Macro
'
' Keyboard Shortcut: Ctrl+r
'
    '-store user input in 'sUserInput' variable
    Dim sUserInput As String
    sUserInput = InputBox("Enter Number:", "Collect User Input")

    'test input before continuing to validate the input
    If Not (Len(sUserInput) > 0 And IsNumeric(sUserInput)) Then
        MsgBox "Input not valid, code aborted.", vbCritical
        Exit Sub
    End If

    With ActiveSheet.QueryTables.Add(Connection:= _
        "URL;http://network.construction.com/reportviewer.aspx?ids=" & sUserInput, _
        Destination:=Range("$A$1"))
        .Name = "reportviewer.aspx?ids=" & sUserInput
        .FieldNames = True
        .RowNumbers = False
        .FillAdjacentFormulas = False
        .PreserveFormatting = True
        .RefreshOnFileOpen = False
        .BackgroundQuery = True
        .RefreshStyle = xlInsertDeleteCells
        .SavePassword = False
        .SaveData = True
        .AdjustColumnWidth = True
        .RefreshPeriod = 0
        .WebSelectionType = xlSpecifiedTables
        .WebFormatting = xlWebFormattingNone
        .WebTables = "30,33,37,38,46"
        .WebPreFormattedTextToColumns = True
        .WebConsecutiveDelimitersAsOne = True
        .WebSingleBlockTextImport = False
        .WebDisableDateRecognition = False
        .WebDisableRedirections = False
        .Refresh BackgroundQuery:=False
    End With
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:50:12.457

你可以轻松做到

```
Sub Macro2()
'
' Macro2 Macro
'
' Keyboard Shortcut: Ctrl+r
'

    Dim stpo
       stpo = InputBox("Enter the report number")
     With ActiveSheet.QueryTables.Add(Connection:= _
            "URL;http://network.construction.com/reportviewer.aspx?ids="&stpo, _
            Destination:=Range("$A$1")) 
```

# c++ - 如何检查简单的 C++ 标准库迭代器是否可以高级？

> ID：11971308
> 
> 赞同：4
> 
> 时间：2012-08-15T14:36:36.380
> 
> 标签：c++, stl, iterator

假设我有一个封装 std 容器的类：

```
class Stash
{
    list<int> Data;

public:
    list<int>::const_iterator GetAccess() const { return Data.begin(); }
}; 
```

这是强制用户以迭代器的形式读取数据的一种非常方便的方式。但是，我找不到将迭代器与`container.end()`. 所以，我想知道是否有一个选项可以仅通过 stdlib 来完成，或者我必须自己编写迭代器类（`can_advance`例如，使用方法）。

相关问题可能是[this one](https://stackoverflow.com/questions/2062956/c-best-way-to-check-if-an-iterator-is-valid)，但它询问的是迭代器*是否有效*，而不是它是否*可以前进*。我无法找到有关后者的任何信息。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:41:08.033

您不能这样做，单个迭代器在其指向的序列末尾时不包含信息。

通常，这可以通过提供一个范围（想想`std::make_pair(cont.begin(), cont.end())`）或为您的类提供`begin()`和`end()`方法来解决，从而有效地使其成为一个范围。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T15:16:02.417

迭代器成对工作：一个指向序列开头的迭代器和一个指向序列结尾之后的迭代器。这就是为什么所有容器都具有`begin()`成员`end()`函数的原因：因此您可以查看容器管理的值序列。

`GetAccess`更改to`begin`和 to的名称会更加惯用`end`。还`end()`可以将标准算法应用于数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T01:24:16.437

您似乎要求的是“前瞻”迭代器。您可以编写一个类来“调整”迭代器以进行前瞻，其中适配器仅比您的代码领先一步：

```
template<class FwdIter>
class lookahead_iterator
{
public:
    lookahead_iterator(const FwdIter& begin): cur_iter(begin), next_iter(++begin) {}
    operator FwdIter() const { return cur_iter; }
    lookahead_iterator<FwdIter>& operator ++() { cur_iter = next_iter++; return *this; }
    // Other methods as needed.
private:
    FwdIter cur_iter;
    FwdIter next_iter;
}; 
```

不用说，如果您需要的不仅仅是前向迭代器，这将变得更加复杂。

# php - 将 +1 添加到从另一个站点获得的字符串

> ID：11971310
> 
> 赞同：0
> 
> 时间：2012-08-15T14:36:37.787
> 
> 标签：php, replace, preg-replace

我有一个从网站上得到的字符串。

字符串的一部分是“X2”，我想将 +1 添加到 2。

我得到的整个字符串是：

```
20120815_00_X2 
```

我想要的是添加“X2”+1 直到“20120815_00_X13”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:40:58.377

你可以做 ：

```
$string = '20120815_00_X2';

$concat = substr($string, 0, -1);
$num = (integer) substr($string, -1);

$incremented = $concat . ($num + 1);

echo $incremented; 
```

有关 substr() 的更多信息，请参阅 =>[文档](http://php.net/manual/en/function.substr.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:41:50.477

您想在字符串末尾找到数字并捕获它，测试最大值`12`并在这种情况下添加一个，因此您的模式看起来像：

```
/(\d+)$/    // get all digits at the end 
```

和整个表达式：

```
$new = preg_replace('/(\d+)$/e', "($1 < 13) ? ($1 + 1) : $1", $original); 
```

我使用了`e`修饰符，以便替换表达式将被评估为 php 代码。

[请参阅CodePad](http://codepad.org/6TDc0U6j)上的工作示例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T15:26:19.683

该解决方案有效（无论 X 之后的数字是多少）：

```
function myCustomAdd($string)
{

$original = $string;

$new = explode('_',$original);

$a = end($new);

$b = preg_replace("/[^0-9,.]/", "", $a);

$c = $b + 1;

$letters = preg_replace("/[^a-zA-Z,.]/", '', $a);

$d = $new[0].'_'.$new[1].'_'.$letters.$c;

return $d;

}

var_dump(myCustomAdd("20120815_00_X13")); 
```

输出：

```
string(15) "20120815_00_X14" 
```

# css - 如何将元素上的所有 CSS 规则组合在一起

> ID：11971313
> 
> 赞同：-2
> 
> 时间：2012-08-15T14:36:46.797
> 
> 标签：css, frontend, jsfiddle

对于使用 jsfiddle 或 cssdesk 之类的网站，我如何将适用于我的元素的所有 css 规则集中在一个地方？我的 CMS 有大量作用于相同元素的 CSS 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:44:26.677

不确定我是否正确理解了这个问题，但我想你是在问如何在你自己的网站上应用的小提琴上应用所有相同的样式。如果是这种情况，那么在 jsFiddle 的左侧导航中，有一个 Add Resources 选项。如果您的网站是公开的，那么您可以在那里输入指向您的 css 文件的直接 url。

然后，您在小提琴中输入的任何 html 都应在运行时从结果中应用的那些 css 文件中获取样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:11:37.420

使用 Firefox 的内置检查器（不是 firebug）来检查元素。在为检查员弹出的列中，选择“计算”选项卡。

突出显示您想要的所有样式，然后右键单击并选择，复制选择。

转到您的 jsFiddle 或 CSSDeck，粘贴属性，并用您的规则将其包围：

h1 { ...你复制的东西在这里...}

注意：您需要在所有属性的末尾添加分号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:21:24.033

脑海中浮现出两个答案：

1.  首先是简单地将您的 CSS 文件从您的笔记本电脑上传到某处的服务器。如果您可以从路由器打开端口 80 到本地计算机，您也可以在笔记本电脑上运行网络服务器。您可以从[No-IP Free 之](http://www.no-ip.com/personal/)类的服务中获取指向您 IP 地址的静态 URL 。

2.  在计算机上编写 CSS 时，请使用 CSS 预处理器，如[SASS](http://sass-lang.com/)或[LESS 。](http://lesscss.org/)这需要对您的工作流程进行一些更改，但从长远来看，您会发现这些更改使 Web 开发人员的生活变得更加轻松。SASS 和 LESS 都理解 vanilla CSS，因此您不必更改现有文件，只需更改扩展名即可。它们还能够在您的计算机上导入其他 SASS 或 LESS 文件，并将它们包含在输出生成的 CSS 中。因此，以 SASS 为例……如果您的主 CSS 文件被调用`screen.css`，请将其移至`screen.scss`. 在您进行更改后，SASS 预处理器将通读文件并将其呈现回 CSS。现在，要在您的文件中包含另一个文件，请`screen.scss`添加`@import 'newFile.scss';`，SASS 生成的 CSS 文件将包含两者`screen.scss`和`newFile.scss`。

    遵循这种设计范式还有一个额外的好处，就是将所有 CSS 保存在一个输出文件中。建议您将所有 CSS 保存在一个文件中，以最大限度地减少服务器请求（请参阅[我是否仍然需要将所有 CSS 保存在一个文件中？](https://stackoverflow.com/questions/11047507/should-i-still-bother-keeping-all-css-in-one-file)进行讨论）。

# sql-server - 使用 sql like 语句查找确切的字符串

> ID：11971322
> 
> 赞同：0
> 
> 时间：2012-08-15T14:37:07.740
> 
> 标签：sql-server

我有以下声明

```
SELECT *
FROM   Delivery_Note this_
WHERE  mycol like '%[126]%' 
```

我注意到这也会返回包含 [123] 的行。在字符串中找到完全匹配的最佳方法是什么。

*编辑* 我很欣赏这不是一个有效的查询。这种方法还有其他一些原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:45:22.577

与 一起使用时，括号指定范围`LIKE`。您可以使用`ESCAPE`关键字。

```
WHERE mycol LIKE '%\[126\]%' ESCAPE '\'; 
```

当然，如果您尝试匹配精确字符串，则不需要`LIKE`，或者您可以删除`%`字符并`LIKE`表现得像`=`（这使得将通配符或精确匹配传递给参数变得灵活）。

# ruby-on-rails - Searchlogic：查找日期与时间之间的记录

> ID：11971323
> 
> 赞同：1
> 
> 时间：2012-08-15T14:37:08.627
> 
> 标签：ruby-on-rails, activerecord, searchlogic

我正在使用 Searchlogic 插件，但我需要在两个时间之间查找记录。

```
 created_at_after("02-01-2012 00:00:00") 
 created_at_before("02-01-2012 23:59:59") 
```

没有回报什么，但是

```
 created_at_after("01-01-2012 00:00:00") 
 created_at_before("02-01-2012 23:59:59") 
```

返回 2012 年 1 月 1 日创建的所有记录...

有什么解决办法吗？

# javascript - div 选中状态

> ID：11971324
> 
> 赞同：2
> 
> 时间：2012-08-15T14:37:11.383
> 
> 标签：javascript, css, html, state, selected

大家好@stackoverflow，我目前正在尝试制作一个具有“选定状态”功能的导航栏。
我让它与 jsfiddle 很好地工作，[http://jsfiddle.net/uphem/U7NLM/](http://jsfiddle.net/uphem/U7NLM/)但是当我从中创建一个 html 时，选定的状态无法正常工作。这几乎是我在 jsfiddle 中所拥有的完全相同的副本。
我试图将 jquery 作为文件嵌入，但也没有用。

我似乎无法弄清楚为什么它不起作用..
请帮忙！

```
<html>
<head>

<title>selected state test</title>

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<script type="text/javascript">
    $('.menu_button').click(function() {
    $(this).addClass('selected').siblings().removeClass('selected')
    })​
</script>

<style type="text/css">
.menu_button {
    padding: 10px 20px 10px 20px;
    position: relative;
    color: #666;
    float: left;
    border-left: 1px dotted #e5e5e5;
    font-size: 14px;
    cursor: pointer;
}

.menu_button:hover {
    color: #f26d7d;
}

.menu_button:active {
    color: #ccc;
}

.menu_button.selected {
    background-color: #ccc;
}​
</style>

</head>
<body>

<div class="menu_button">button 1</div>
<div class="menu_button">button 2</div>
<div class="menu_button">button 3</div>
<div class="menu_button">button 4</div>​

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:40:27.690

您必须[在页面加载后才](http://docs.jquery.com/Tutorials:Introducing_$%28document%29.ready%28%29)加载 jQuery 代码，如下所示：

```
<script type="text/javascript">
$(document).ready(function() {
    $('.menu_button').click(function() {
    $(this).addClass('selected').siblings().removeClass('selected')
    })
});
</script> 
```

还有，难道你的 jQuery 导入调用是错误的？

试试这个：

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

有关何时以及如何使用`//`而不是`http://`阅读的更多信息[在 a 中将 http:// 替换为 // 是否有效？](https://stackoverflow.com/questions/550038/is-it-valid-to-replace-http-with-in-a-script-src-http)

我已经尝试过您的代码，并且在更改后它对我有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:43:53.277

如果您离线工作，您的 jQuery 调用是错误的。

用这个

```
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T14:53:20.207

使用此代码

```
<html>
<head>

<title>selected state test</title>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<script type="text/javascript">

$(document).ready(function(e) {
    $(".menu_button").click(function(e) {
        $(this).addClass("selected").siblings().removeClass("selected");
    });
});

</script>

<style type="text/css">
.menu_button {
    padding: 10px 20px 10px 20px;
    position: relative;
    color: #666;
    float: left;
    border-left: 1px dotted #e5e5e5;
    font-size: 14px;
    cursor: pointer;
}

.menu_button:hover {
    color: #f26d7d;
}

.menu_button:active {
    color: #ccc;
}

.menu_button.selected {
    background-color: #ccc;
}​
</style>

</head>
<body>

<div class="menu_button">button 1</div>
<div class="menu_button">button 2</div>
<div class="menu_button">button 3</div>
<div class="menu_button">button 4</div>​

</body>
</html> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T14:43:30.997

尝试添加：

```
 $(document).ready{
        $('.menu_button').click(function() {
          $(this).addClass('selected').siblings().removeClass('selected')
        })​;
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T14:46:09.667

这是您的 src 的问题：

```
// this directs to yourdomain.com/ajax....
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

//Instead use one of the following
<script src="ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T14:54:28.467

```
<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="content-type">
<title>selected state test</title>

<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){
        $('.menu_button').click(function() {
          $(this).addClass('selected').siblings().removeClass('selected')
        });
    });

</script>

<style type="text/css">
.menu_button {
    padding: 10px 20px 10px 20px;
    position: relative;
    color: #666;
    float: left;
    border-left: 1px dotted #e5e5e5;
    font-size: 14px;
    cursor: pointer;
}

.menu_button:hover {
    color: #f26d7d;
}

.menu_button:active {
    color: #ccc;
}

.menu_button.selected {
    background-color: #ccc;
}
</style>

</head>
<body>

<div class="menu_button">button 1</div>
<div class="menu_button">button 2</div>
<div class="menu_button">button 3</div>
<div class="menu_button">button 4</div>

</body>
</html> 
```

# google-maps - 如何判断当前是否选择了 Google Map Marker？

> ID：11971326
> 
> 赞同：4
> 
> 时间：2012-08-15T14:37:15.037
> 
> 标签：google-maps, google-maps-api-3

我在 Google Maps V3 上有一张足够简单的地图。

我将鼠标悬停在侦听器事件上的图标图像更改为鼠标移出的图标图像，这很简单。

单击标记时，我再次更改了图标，但是，我想在选择标记时保留该图标。当我将鼠标移出时，标记图标再次更改，因为我在鼠标移出侦听器事件中告诉它这样做。

我需要从 mouseout 侦听器事件中排除选定的标记，但我不知道如何找到我当前选择的标记。有任何想法吗？

这是我的代码

```
 google.maps.event.addListener(marker, 'mouseover', function () {
            this.setIcon("images/star-3-white.png");

        });
        google.maps.event.addListener(marker, 'mouseout', function () {
                //  this overwrites the image again, 
                //  need to exclude the current one here
                this.setIcon("images/star-3.png");
        });

        google.maps.event.addListener(marker, 'click', function () {
            this.setIcon("images/star-3-white.png");
            infowindow.setContent(this.html);
            infowindow.open(map, this);
        }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:09:53.010

任何一个

1.  创建标记 .selected 的成员并在单击它时对其进行设置，然后在 mouseout 功能中对其进行测试（如果要完成，请使用 mouseover 功能），如果已设置，请不要更改图标。
2.  创建一个全局变量（假设一次只选择一个标记），将其设置为等于单击的标记。在 mouseout（和 mouseover）中检查它是否等于当前标记（this），如果它不改变图标。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T15:13:45.270

有点啰嗦，但我只是添加了一个变量来存储我知道是唯一的当前标记标题。然后我检查它是否是我选择的那个。此外，我确保重置所有标记，使其不会保持与选定标记相同的颜色：

```
 var clickedMarkerTitle = null;
    function addMarker(latLng, _title, contentString) {
        marker = new google.maps.Marker({
            map: map,
            position: latLng,
            icon: "images/star-3.png",
            title: _title,
            html: contentString
        });

        google.maps.event.addListener(marker, 'mouseover', function () {
            this.setIcon("images/star-3-white.png");

        });
        google.maps.event.addListener(marker, 'mouseout', function () {
            //this.setIcon("images/star-3.png");
            testIcon(this);
        });

        google.maps.event.addListener(marker, 'click', function () {
            resetMarkerIcons();
            saveIconState(this);
            this.setIcon("images/star-3-white.png");
            infowindow.setContent(this.html);
            infowindow.open(map, this);

        });

        markersArray.push(marker);

    }
    function resetMarkerIcons() {
        //  reset all the icons back to normal except the one you clicked
        for (var i = 0; i < markersArray.length; i++) {
            markersArray[i].setIcon("images/star-3.png");

        }

    }
    function saveIconState(marker) {
        clickedMarkerTitle = marker.title;
    }
    function testIcon(marker) {
        $('#test').html('<span>' + marker.title + '</span>');

        if (clickedMarkerTitle != null) {
            $('#test').html('<span>' + marker.title + ' and its not null</span>');
            if (marker.title != clickedMarkerTitle) {
                $('#test').html('<span>' + marker.title + ' and ' + clickedMarkerTitle + '</span>');
                marker.setIcon("images/star-3.png");
            }
        }
        else {
            marker.setIcon("images/star-3.png");
        }
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-07T11:54:43.873

在寻找其他东西时偶然发现了这个答案。这会做。

```
var currentMarker = null;
var markerIcon = 'some.svg';
var markerIconHover = 'some-other.svg';

// Initialize marker here
[...]

// Set current marker on click
google.maps.event.addListener(marker, 'click', function() {
    // Reset market icons
    clearMarkerIcons();  
    // Set hovered map marker
    marker.setIcon(markerIconHover);
    // Set current marker
    currentMarker = marker;
    // Open infoWindow here
    [...]
});

// Set correct icon on mouseover
google.maps.event.addListener(marker, 'mouseover', function() {
    marker.setIcon(markerIconHover);
});

// Set correct icon on mouseout
google.maps.event.addListener(marker, 'mouseout', function() {
    if (currentMarker !== marker) {
        marker.setIcon(markerIcon);
    }
});

// Clear all set marker icons
function clearMarkerIcons() {
    for (var i = 0; i < map.markers.length; i++) {
        map.markers[i].setIcon(markerIcon);
    }
} 
```

# java - tomcat 共享库 - (config) 文件上下文规则

> ID：11971330
> 
> 赞同：0
> 
> 时间：2012-08-15T14:37:21.230
> 
> 标签：java, tomcat, tomcat6

在 Tomcat 6 的`lib`( `${catalina.home}/lib/`) 文件夹中，我有几个共享的 JAR 文件，例如 Hibernate 的。

当我调试我的 Web 应用程序时，控制台会通过 Hibernate 获得大量输出，除非我`logback.xml`输入`${catalina.home}/lib/`.

这是问题的重点：
**如果我将其移动`logback.xml`到我的网络应用程序的`/WEB-INF/lib/`文件夹中，它将被忽略，就好像没有文件一样 - 我得到了所有的输出。**

这显然与上下文有关（在我假设的 Java 级别上），但我找不到有关它的信息。
请帮助我更好地理解它，基本原理。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:57:08.513

I bet it isn't related with the context but rather the classpath hierarchy. Java infrastructure provides a mechanism ([`ClassLoader`](http://docs.oracle.com/javase/6/docs/api/java/lang/ClassLoader.html)) to build classpath hierarchies and Tomcat (as many other servlet containers/application servers) use that to isolate the different JARs/class folders being used in a specific application.

The root class loader is the one that has less visibility inside the hierarchy, nested class loaders can look for a class inside their scope or ask a parent class loader for it if not found. Some application servers allow to configure the class loaders to ask first the parent and then look inside their own scope if the parent can't locate it. However, a parent class loader can't never load a class from a nested class loader.

**NOTE**: same happens with normal files, as with your `logback.xml`.

So, you have some hibernate libraries deployed in your Tomcat's `lib` folder, which is handled by the root class loader in the hierarchy. When you have your `logback.xml` file in that folder it actually is at the same classpath hierarchy level than your Hibernate JARs, so Hibernate (or the log mechanism being used by it) can load the file because it's within its scope.

In the other hand, the libraries used by your application (`WEB-INF/lib`) are handled by a different class loader which actually is nested to the previous mentioned one. When you move your `logback.xml` to your application's library folders you are actually moving it to a wider scope but, ***since Hibernate has been loaded by a parent class loader, it can not locate the file within its scope*** (remember, a parent class loader can't load classes or files from its children, just the children can ask the parent for those).

# java - Maven 发布使用部分

> ID：11971336
> 
> 赞同：1
> 
> 时间：2012-08-15T14:37:30.793
> 
> 标签：java, maven, release

Maven 发布插件是一个很酷的工具，可以简化发布。但我想稍微改变一下行为。

最重要的是，我不希望任何更改自动提交到存储库。这应该由开发人员手动完成。

我梦想着这样的事情：

1.  检查是否使用了 SNAPSHOT 依赖项（必须）
2.  检查没有未提交的更改（可选）
3.  更新所有工件的版本号，允许用户输入新的版本号（必须）
    *   已解决：with with`mvn versions:set`
4.  在本地构建项目
    *   已解决：与`mvn clean install`

我不知道如何挑选一些在发布插件中工作的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T16:09:25.177

您描述的事情将由 maven-release-plugin 自动完成。如果您没有在构建服务器上安装 svn，则需要配置发布插件以使用[svnkit 安装](http://code.google.com/a/apache-extras.org/p/maven-scm-provider-svnjava/)

# .net - 为什么在 Web.config 中将 subStatusCode 设置为 -1？

> ID：11971356
> 
> 赞同：21
> 
> 时间：2012-08-15T14:38:36.247
> 
> 标签：.net, web-config, http-status-codes

如果这很明显，我深表歉意，但我已经四处寻找，无法找到答案。

在`.net Web.config`文件中，谁能告诉我`subStatusCode`to - 1 的设置是什么？

```
<httpErrors errorMode="Custom" existingResponse="Replace">
      <clear />
      <remove statusCode="404" subStatusCode="-1" />
      <error statusCode="404" prefixLanguageFilePath="" path="/Error.aspx" responseMode="ExecuteURL" />
</httpErrors> 
```

我的猜测是这意味着所有的“子”代码，404.1、404.2..等？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-15T16:25:37.653

[`subStatusCode`-1 是IIS中的默认值](http://www.iis.net/ConfigReference/system.webServer/httpErrors/error)。

也就是说，您在这里删除了元素，所以它只是重申显而易见的（删除*所有*先前的条目`statusCode`）。

在这种情况下（使用`remove`元素），不需要它。

# windows - 由于 Office Service Pack 3.0 导致的 Excel/VBA 自动化错误

> ID：11971358
> 
> 赞同：6
> 
> 时间：2012-08-15T14:38:43.297
> 
> 标签：windows, excel, vba, ms-office, windows-update

安装所有最新的 Windows 更新后，我的 Excel VBA 代码在第一个模块开始时显示自动化错误。它包含一些形式以及许多 VBA 代码模块。但是，当删除表单（和相关代码）时，一切都很好。

大约一年前，在其他一些 Windows 更新之后，同样的事情发生了。当时删除 .exd 文件就可以解决问题，但当前的更新（包括 Service Pack 3）似乎有所不同。

发生了什么事，我怎样才能让表格工作？所有代码都没有改变，并且在所有以前的 windows/office 更新中都幸存下来。运行 Windows 7（在 Vista 机器上也一样）和 Office 2007。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-15T14:52:33.400

[我曾经在Visual Basic 和 Crystal Reports](https://www.google.com/search?q=%22automation%20error%22%20%22crystal%20report%22&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla:en-US:official&client=firefox-a&source=hp&channel=np)中经常看到这一点；由于部署不当或[DLL Hell](http://en.wikipedia.org/wiki/DLL_Hell)。

所以，我的猜测是它不是代码，而是您正在使用的一些第 3 方控件（OCX、DLL）。

检查您的引用（在 VBA IDE 中，单击工具和引用）并查看每个 DLL 指向的位置。

查看库上的任何日期是否与工作机器不同，您可能会找到罪魁祸首。

* * *

**编辑**

OP按照上述步骤发现了问题。

此特定问题的解决方法是取消注册 mscomctl.ocx：

```
regsvr32 /u mscomctl.ocx 
```

然后注册它：

```
regsvr32 mscomctl.ocx 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T09:59:59.010

同样的问题，注册mscomctl.ocx后问题完全解决！

对于 Windows 7 或 2008 - 请记住以“管理员身份”运行 cmd.exe，然后：

对于 32 位 Windows 系统：regsvr32 c:\windows\system32\mscomctl.ocx

对于 64 位 Windows 系统：regsvr32 c:\windows\syswow64\mscomctl.ocx

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T22:09:36.287

AutoCAD 的 VBA 也有同样的问题。就我而言，使用 regsvr32 注册新的 mscomctl.ocx 足以解决问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-07T14:42:18.577

我们无法通过重新注册 mscomctl.ocx 来解决问题。但是我们通过删除调用 mscomctl.ocx 的“进度条对象表单”来解决它......我们用 application.statusbar 替换它。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-14T15:19:35.010

查看[http://support.microsoft.com/kb/2687441](http://support.microsoft.com/kb/2687441)以获取可能解决此问题的更新

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-15T16:00:47.290

我们有同样的问题。在我们的加载项中，我们能够将问题追溯到作为 Excel.Application 的变量声明。对该对象的引用位于 Excel.exe 文件中，因此不清楚哪些文件被弄乱了。

有这个问题的机器都在今天早上（2012 年 8 月 15 日）更新了以下更新（抱歉没有发布链接，作为一个新用户，我每个帖子仅限于两个）：

[Microsoft Office 2007 套件的安全更新 (KB2596615)](http://support.microsoft.com/kb/2596615)

[Microsoft Office 2007 套件的安全更新 (KB2596754)](http://support.microsoft.com/kb/2596754)

Microsoft Office 2007 套件的安全更新 (KB2596856)

Microsoft Office 2007 套件的安全更新 (KB2687441)

Microsoft Office Outlook 2007 垃圾邮件过滤器更新 (KB2687400)

Windows 恶意软件删除工具 x64 - 2012 年 8 月 (KB890830)

目前，我们在 MSDN 网站上没有找到任何可以澄清这一点的信息。我们仍在努力进一步隔离这一点。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-15T18:30:18.347

我有同样的问题。在加载加载项时打开 excel 时出现未指定的错误。过去，删除 C:\Documents and Settings\%USERNAME%\Application Data\Microsoft\Forms\ 中的 *.exd 文件可以解决问题，但这次不行。
当我试图在我的插件中打开表单时，我得到了一个不同的错误，我无法打开表单。我最终回滚到更新前的昨晚，一切都恢复了。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-15T21:31:58.067

今天在执行 Office 2007 Excel 更新后出现同样的问题。奇怪的是，尽管进行了更新，但一个系统没有任何问题——最新的系统。所以经过一番检查，我注意到这个无故障系统在 windows\sysWOW64 中的 MSCOMCTL.OCX 版本与其他版本不同。以下是此 activeX 大小：1,070,152 字节创建：2012 年 6 月 3 日修改：2012 年 6 月 6 日产品版本：6.01.9834 的详细信息所以我将其复制到了麻烦之一，它成功了。

此外，您可能需要检查这些应用程序扩展是否存在于 windows\sysWOW64 或 windows\system32 中以用于 32 位系统 FM20.DLL（修改日期：7/7/2011，版本 12.0.6604.1000，1.13MB）FM20ENU.DLL （修改日期：10/24/2008，版本 12.0.6413.1000，32.3KB）不知道在哪里可以下载这些。我从其他系统中蚕食了它们。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-08-16T00:06:42.560

昨晚更新之一后，我们所有的终端服务器都出现了同样的问题。注册 mscomctl.ocx 解决了所有用户的问题。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-08-20T09:30:15.453

取消并注册 MSCOMCTL.ocx 对我有用：

> 1.  打开管理级别的命令提示符。单击开始，然后在运行命令行中键入 RUN。在 Windows Vista 和 Windows 7 上，您将看到 CMD.EXE 出现在快速搜索列表中。右键单击 CMD.EXE，然后左键单击以管理员身份运行。将打开一个黑色命令提示符。
>     
>     
> 2.  如果在 64 位计算机上，请键入以下内容：regsvr32.exe /u C:\Windows\SysWOW64\MSCOMCTL.OCX
>     
>     
> 
> 点击 ENTER 然后输入 regsvr32.exe C:\Windows\SysWOW64\MSCOMCTL.OCX 如果在 32 位计算机上，输入以下内容： regsvr32.exe /u C:\Windows\System32\MSCOMCTL.OCX 点击 ENTER 然后输入
> regsvr32。 exe C:\Windows\System32\MSCOMCTL.OCX 执行此操作后，您的 Office 程序应该可以再次运行。

另请参阅：http: [//blogs.technet.com/b/the_microsoft_excel_support_team_blog/archive/2012/08/15/quot-unspecified-automation-error-quot-after-applying-ms12-060.aspx](http://blogs.technet.com/b/the_microsoft_excel_support_team_blog/archive/2012/08/15/quot-unspecified-automation-error-quot-after-applying-ms12-060.aspx "技术网")

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-08-27T01:30:18.900

枪的儿子...我重新注册了 C:\Windows\System32\MSCOMCTL.OCX 并且一切都恢复正常了。非常感谢所有指出这一点的人。

# internet-explorer - 以编程方式从 IE 'Internet Explorer' 中删除兼容性视图按钮？

> ID：11971362
> 
> 赞同：2
> 
> 时间：2012-08-15T14:38:48.810
> 
> 标签：internet-explorer, ie8-compatibility-mode

我有一个网站，我不想在兼容模式下查看。

例如，我必须向我的客户解释为什么不选择这个按钮来查看网站。

![在此处输入图像描述](../Images/04667cc6953df09c79f9e242974ddc2f.png)

我的问题是，我怎样才能阻止这个按钮被激活，或者我的网站永远不会在兼容模式下被查看？

例如[www.facebook.com](http://www.facebook.com) - 那里没有兼容性视图按钮！？

如何对所有具有兼容模式选项的 IE 版本执行此操作？

我试过这个...

```
<meta http-equiv="X-UA-Compatible" content="IE=9; IE=8; IE=7; IE=EDGE" /> 
```

但是按钮还在吗？

任何想法都会非常感谢。

* * *

它没有验证，我做错了吗？

![在此处输入图像描述](../Images/d9a026e385527d275a0084672219b927.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:05:04.187

尝试只使用 IE=edge：

```
<meta http-equiv=”X-UA-Compatible” content=”IE=edge” /> 
```

**将此元标记添加为`<head>`**. 只使用一个应该会强制用户的浏览器以最新的标准模式呈现。

我没有在内容属性中使用倍数，但是当 IE 看​​到它具有在旧版本中呈现的选项时，它会显示兼容模式按钮。只使用一个告诉它没有任何选项，应该删除它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:02:31.190

您必须发送一个 HTTP 标头。在 ASP.NET 中是这样的：

```
Response.AddHeader("X-UA-Compatible", "IE=edge"); 
```

# cloud-foundry - 在 cloudfoundry 中启动应用程序时出现 HTTP 404 错误

> ID：11971363
> 
> 赞同：0
> 
> 时间：2012-08-15T14:38:53.557
> 
> 标签：cloud-foundry

你好朋友我开发了一个简单的 java web 应用程序并托管在 vmware cloudfoundry 但我无法在浏览器中启动我的应用程序。它给出了这个错误

HTTP 状态 404 - /

类型状态报告

信息 /

描述 请求的资源 (/) 不可用。Apache Tomcat/6.0.35

请在 aravnd8babu@gmail.com 回复我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-19T07:22:39.110

您是否在主机文件中添加了应用程序 URL？如果不添加新条目，即：Cloudfoundry-IP applicationName.vcap.me

在您的本地 tomcat 中，URL 是 localhost:8080/applicationName 但在 cloudfoundry 中是 applicationName.vcap.me

运行命令“vmc apps”并提供输出。

# jquery - jQuery - Mouseout on Animated DIV

> ID：11971365
> 
> 赞同：0
> 
> 时间：2012-08-15T14:38:57.770
> 
> 标签：jquery, css, jquery-animate, mouseover, mouseout

I'm trying to put together an animated drop-down menu of my own in jQuery but am getting weird results. I have a container wrapping a button DIV and a menu DIV, and the idea was to have (on mouseover) both the container DIV and menu DIV scale in height with the menu DIV getting a CSS {'display', 'block'}. On mouseout of the container DIV (which is supposed to have scaled in height to contain both the button and menu DIVs) I wanted the DIVs to scale back to their original heights and the menu DIV to get a CSS {'display','none'}.

The problem now is that after everything scales up, instead of scaling back on mouseout of the supposedly scaled-up container (height: 300px), the scaling begins after mousingout of the container's original height (height: 100px), not the new one.

Here's the code:

```
$('.container').mouseover(function(){
    $('.bob').css('display','block');
    $('.bob').animate({height: '200px'});
    $(this).animate({height: '300px'});
});

$('.container').mouseout(function(){
    $('.bob').animate({height: '0'},
            function(){
            $('.bob').css('display','none');
            });
    $(this).animate({height: '100px'});
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:48:31.570

I don't know if this might help you, but it solved many of my JQuery animation problems.

Before doing an animation on an element, you might want to check if said element is already being animated. You can do it with this code

```
if( $(elem).is(':animated') ) {...} 
```

Hope this can help you

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:57:47.463

You probably need to use the on event to get the "live" .container element in its changed state. I also added the stop() function to stop the animation in case it was not finished before you mouseout/mouseover again.

```
$(document).on('mouseover', '.container', function(){
    $('.bob').css('display','block');
    $('.bob').stop(true, false).animate({height: '200px'});
    $(this).stop(true, false).animate({height: '300px'});

});

$(document).on('mouseout', '.container', function(){
    $('.bob').stop(true, false).animate({height:0},
         function(){
            $('.bob').css('display','none');
         });
    $(this).stop(true, false).animate({height: '100px'});
}); 
```

EDIT: as requested here an explanation:

This is like using the (now deprecated) live() function in JQuery which listened for changed dom elements or even elements added to the dom at a later time by js. If you only use $('.container').mouseover() it will listen for the dom element in its state as was on page load - which is only 100px high. It won't "realize" that the element has changed.

The stop function is there so that any animation of the element going on right at the moment ist stopped before the new animation starts.

[http://api.jquery.com/on/](http://api.jquery.com/on/)

[http://api.jquery.com/stop/](http://api.jquery.com/stop/)

# exception - Websphere 6 中的 DeploymentDescriptorLoadException

> ID：11971366
> 
> 赞同：0
> 
> 时间：2012-08-15T14:39:02.637
> 
> 标签：exception, web.xml, websphere-6.1

嗨，错误看起来像这样，当我在 websphere 6 中使用 ear 时，我检查了我的 web.xml 它对我来说看起来不错。请帮忙

com.ibm.etools.j2ee.commonarchivecore.exception.DeploymentDescriptorLoadException：IWAE0022E 在 EAR 文件“C:\WebSphere\AppServer\profiles\default”中为模块“acs_nominal_roll_webapp.war”加载部署描述符“WEB-INF/web.xml”时发生异常\wstemp\514564614\upload\nominal_roll-dev.ear" [8/14/12 21:58:25:254 MDT] 0000002f SystemErr R com.ibm.etools.j2ee.commonarchivecore.exception.DeploymentDescriptorLoadException: IWAE0022E 加载部署时发生异常EAR 文件“C:\WebSphere\AppServer\profiles\default\wstemp\514564614\upload\nominal_roll-dev.ear”中模块“acs_nominal_roll_webapp.war”的描述符“WEB-INF/web.xml”！Stack_trace_of_nested_exce！com.ibm.etools.j2ee.commonarchivecore.exception.NoModuleFileException：具有 uri 的模块元素的文件不存在：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-18T01:55:37.733

EAR 文件可能已损坏或不完整。Ear 中可能缺少 Web 项目的条目。

# python - web2py url 验证器

> ID：11971369
> 
> 赞同：1
> 
> 时间：2012-08-15T14:39:04.897
> 
> 标签：python, web2py, urllib

在 web2by 构建的缩短器中，我想首先验证 url，如果它无效返回到第一页并显示错误消息。这是我在控制器（mvc 架构）中的代码，但我不明白出了什么问题..！！

```
import urllib

def index():
    return dict()

def random_maker():
    url = request.vars.url
    try:
        urllib.urlopen(url)
        return dict(rand_url = ''.join(random.choice(string.ascii_uppercase +
                    string.digits + string.ascii_lowercase) for x in range(6)),
                    input_url=url)
    except IOError:
        return index() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T18:27:22.590

您不能使用 httplib 检查 http 响应代码吗？如果它是 200，那么页面是有效的，如果它是其他任何东西（如 404）或错误，那么它是无效的。

请参阅此问题：[从 URL 获取 HTTP 响应代码的最佳方法是什么？](https://stackoverflow.com/questions/1140661/python-get-http-response-code-from-a-url)

## 更新：

根据您的评论，您的问题似乎是您如何处理错误。您只处理 IOError 问题。在您的情况下，您可以通过切换到以下方式单独处理所有错误：

```
except:
    return index() 
```

您还可以通过覆盖 http_default_error 来构建自己的异常处理程序。有关详细信息，请参阅[如何在 urllib.urlretrieve 中捕获 404 错误](https://stackoverflow.com/questions/1308542/how-to-catch-404-error-in-urllib-urlretrieve)。

或者您可以切换到具有特定错误的 urllib2，然后您可以处理 urllib2 抛出的特定错误，如下所示：

```
from urllib2 import Request, urlopen, URLError
req = Request('http://jfvbhsjdfvbs.com')
try:
    response = urlopen(req)
except URLError, e:
    if hasattr(e, 'reason'):
        print 'We failed to reach a server.'
        print 'Reason: ', e.reason
    elif hasattr(e, 'code'):
        print 'The server couldn\'t fulfill the request.'
        print 'Error code: ', e.code
else:
    print 'URL is good!' 
```

上面的代码将返回：

```
We failed to reach a server.
Reason:  [Errno 61] Connection refused 
```

每个异常类的细节都包含在 urllib.error api 文档中。

我不确定如何将其插入您的代码中，因为我不确定您到底要做什么，但 IOError 不会处理 urllib 抛出的异常。

# android - PhoneGap for android-Camera API .. 不适用于 Jquery mobile

> ID：11971371
> 
> 赞同：1
> 
> 时间：2012-08-15T14:39:09.637
> 
> 标签：android, jquery-mobile, cordova

我是 Phonegap 和 JqueryMobile 的新手。我在 Eclipse 中只使用 phonegap Camera API 代码制作了单独的项目。它在模拟器中工作正常。但是，当我将相同的代码与 Jquery mobile 集成到另一个项目中时，它会引发异常**(Uncaught TypeError: Cannot read property 'PNG' of undefined at file:///android_asset/www/index.html:347)**。没有这个相机 api 代码可以正常工作。

**(1) 工作代码 - 只是 phonegap**

```
<!DOCTYPE html>
<html>
  <head>
    <title>Capture Photo</title>

    <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    var pictureSource;   // picture source
    var destinationType; // sets the format of returned value 
    var encodingType; // sets the format of returned value 

    // Wait for PhoneGap to connect with the device
    //
    document.addEventListener("deviceready",onDeviceReady,false);

    // PhoneGap is ready to be used!
    //
    function onDeviceReady() {
        console.log("onDeviceReady");
        pictureSource=navigator.camera.PictureSourceType;
        console.log("onDeviceReady1");

        destinationType=navigator.camera.DestinationType;
        console.log("onDeviceReady2");
        encodingType=navigator.camera.EncodingType;

    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoDataSuccess(imageData) {
      // Uncomment to view the base64 encoded image data
      console.log(imageData);
      var re = /\?(\d*)$/;
      imageData=imageData.replace(re, "");
      alert("imageData is "+imageData);

      // Get image handle
      //
      var smallImage = document.getElementById('smallImage');

      // Unhide image elements
      //
      smallImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      smallImage.src = "data:image/jpeg;base64," + imageData;
    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoURISuccess(imageURI) {
      // Uncomment to view the image file URI 
      console.log(imageURI);
      // alert("uri is "+imageURI);
      var re = /\?(\d*)$/;
      imageURI=imageURI.replace(re, "");
      alert("imageURI is "+imageURI);

      // Get image handle
      //
      var largeImage = document.getElementById('largeImage');

      // Unhide image elements
      //
      largeImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      largeImage.src = imageURI; 
    }

    // A button will call this function
    //
    function capturePhoto() {
      // Take picture using device camera and retrieve image as base64-encoded string
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 100, targetWidth: -1, targetHeight: -1, encodingType:encodingType.PNG });
    }

    // A button will call this function
    //
    function capturePhotoEdit() {
      // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 100, allowEdit: true, targetWidth: -1, targetHeight: -1 ,encodingType:encodingType.PNG, }); 
    }

    // A button will call this function
    //
    function getPhoto(source) { 
      // Retrieve image file location from specified source
      navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 100, targetWidth: -1, targetHeight: -1 , 
        destinationType: destinationType.FILE_URI,encodingType:PNG,
        sourceType: source });
    }

    // Called if something bad happens.
    // 
    function onFail(message) {
      alert('Failed because: ' + message);
    }

    </script>
  </head>
  <body>
    <button onclick="capturePhoto();">Capture Photo</button> <br>
    <button onclick="capturePhotoEdit();">Capture Editable Photo</button> <br>
    <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br>
    <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br>
    <img style="width:60px;height:60px;" id="smallImage" src="a.png" />
    <img style="" id="largeImage" src="a.png" />
  </body>
</html> 
```

**（2）不工作的代码 - jquerymobile + phonegap**

```
 <!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1" />
        <title>
        </title>
        <link rel="stylesheet" href="jquery.mobile-1.1.1.min.css" />
        <link rel="stylesheet" href="my.css" />
        <style>
            /* App custom styles */
        </style>
        <script src="jquery.min.js">
    <script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>
    <script type="text/javascript" charset="utf-8">

    var pictureSource;   // picture source
    var destinationType; // sets the format of returned value 
    var encodingType; // sets the format of returned value 

    // Wait for PhoneGap to connect with the device
    //
    document.addEventListener("deviceready",onDeviceReady,false);

    // PhoneGap is ready to be used!
    //
    function onDeviceReady() {
        console.log("onDeviceReady");
        pictureSource=navigator.camera.PictureSourceType;
        console.log("onDeviceReady1");

        destinationType=navigator.camera.DestinationType;
        console.log("onDeviceReady2");
        encodingType=navigator.camera.EncodingType;

    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoDataSuccess(imageData) {
      // Uncomment to view the base64 encoded image data
      console.log(imageData);
      var re = /\?(\d*)$/;
      imageData=imageData.replace(re, "");
      alert("imageData is "+imageData);

      // Get image handle
      //
      var smallImage = document.getElementById('smallImage');

      // Unhide image elements
      //
      smallImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      smallImage.src = "data:image/jpeg;base64," + imageData;
    }

    // Called when a photo is successfully retrieved
    //
    function onPhotoURISuccess(imageURI) {
      // Uncomment to view the image file URI 
      console.log(imageURI);
      // alert("uri is "+imageURI);
      var re = /\?(\d*)$/;
      imageURI=imageURI.replace(re, "");
      alert("imageURI is "+imageURI);

      // Get image handle
      //
      var largeImage = document.getElementById('largeImage');

      // Unhide image elements
      //
      largeImage.style.display = 'block';

      // Show the captured photo
      // The inline CSS rules are used to resize the image
      //
      largeImage.src = imageURI; 
    }

    // A button will call this function
    //
    function capturePhoto() {
      // Take picture using device camera and retrieve image as base64-encoded string
      navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality: 100, targetWidth: -1, targetHeight: -1, encodingType:encodingType.PNG });
    }

    // A button will call this function
    //
    function capturePhotoEdit() {
      // Take picture using device camera, allow edit, and retrieve image as base64-encoded string  
     navigator.camera.getPicture(onPhotoDataSuccess, onFail, { quality:50, destinationType:Camera.DestinationType.DATA_URL });
    }

    // A button will call this function
    //
    function getPhoto(source) { 
      // Retrieve image file location from specified source
      navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 100, targetWidth: -1, targetHeight: -1 , 
        destinationType: destinationType.FILE_URI,encodingType:PNG,
        sourceType: source });
    }

    // Called if something bad happens.
    // 
    function onFail(message) {
      alert('Failed because: ' + message);
    }

    </script>
        <script src="jquery.mobile-1.1.1.min.js">
        </script>
        <script src="my.js">        
        </script>
        <script src="local.js">
        </script>
        <script src="jqm.autoComplete.min-1.4.2.js">
        </script>
        <script src="camera.js"></script>
    </head>
    <body>
        <!-- Home -->
        <div data-role="page" id="page1">
    <script>
    var Countrydata='';
        $("#page1").bind("pageshow", function(e) {
            var myXML = ""
            var  availableTags = "";
                var request = new XMLHttpRequest();
                request.open("GET", "Countries.xml", true);
                request.onreadystatechange = function(){
                    if (request.readyState == 4) {
                        if (request.status == 200 || request.status == 0) {
                            myXML = request.responseXML;                    
                            parseXml(myXML);
                        }
                    }

                }
                request.send();

                function parseXml(xml) {

                    $(xml).find('Country').each(function(){

                    if(Countrydata !='')
                    {
                    Countrydata += ',';
                    }
                    Countrydata += $(this).text();
                    });

                    availableTags = Countrydata;

                }

            availableTags = ['India'];

            $("#searchinput1").autocomplete({
                target: $('#suggestions'),
                source: availableTags,              
                minLength: 1,
                matchFromStart: false,
                 callback: function(e) {

                    var $a = $(e.currentTarget); // access the selected item
                    $('#searchinput1').val($a.text()); // place the value of the selection into the search box
                    $("#searchinput1").autocomplete('clear'); // clear the listview
                }
            });
        });
    </script>

            <div data-theme="b" data-role="header">
                <h2>
                    Nalco Water Savings Unit
                </h2>
            </div>
            <div data-role="content" style="padding: 15px" data-theme="b">
                <div data-role="navbar" data-iconpos="right">
                    <ul>
                        <li>
                            <a href="#"   data-icon="arrow-r" >
                                Customer Info
                            </a>
                        </li>
                        <li>
                            <a href="#page2"   data-icon="arrow-r">
                                Additional Details
                            </a>
                        </li>
                        <li>
                            <a href="#page3"   data-icon="info">
                                Summary
                            </a>
                        </li>
                    </ul>
                </div>

                <div data-role="collapsible-set"   data-content-theme="b">
                    <div data-role="collapsible" data-collapsed="false">
                        <h3>
                            Company details
                        </h3>
                                 <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-mini="true">
                        <label for="textinput3">
                            Company number
                        </label>
                        <input name="txtCompNumber" id="textinput3" placeholder="" value="" type="text" />
                    </fieldset>
                </div>
                <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-mini="true">
                        <label for="textinput4">
                            Company Address
                        </label>
                        <input name="txtCompAddr" id="textinput4" placeholder="" value="" type="text" />
                    </fieldset>
                </div>
                    <div data-role="fieldcontain">
                        <fieldset data-role="controlgroup" data-mini="true">
                            <label for="textinput5">
                                City
                            </label>
                            <input name="txtCity" id="textinput5" placeholder="" value="" type="text" />
                        </fieldset>
                    </div>
                     <div data-role="fieldcontain">
                    <fieldset data-role="controlgroup" data-mini="true">
                        <label for="searchinput1">
                            Country
                        </label>
                        <input  id="searchinput1" placeholder="...Serach for country"  type="text" />

                        <ul id="suggestions" data-role="listview" data-inset="true"></ul>
                    </fieldset>
                </div>
               </div>
                    <div data-role="collapsible" data-collapsed="true">
                        <h3>
                            Customer Name
                        </h3>
                         <div data-role="fieldcontain">
                            <fieldset data-role="controlgroup" data-mini="true">
                                <label for="textinput1">
                                    Customer Name
                                </label>
                                <input name="txtCustName" id="textinput1" placeholder="" value="" type="text" />
                            </fieldset>
                        </div>
                    </div>

                    <div data-role="collapsible" data-collapsed="true">
                        <h3>
                            Sales Engineer Details
                        </h3>

                            <div data-role="fieldcontain">
                                <fieldset data-role="controlgroup" data-mini="true">
                                    <label for="textinput6">
                                        Sales Engineer Name
                                    </label>
                                    <input name="txtSalesEngName" id="textinput6" placeholder="" value="" type="text" />
                                </fieldset>
                            </div>
                            <div data-role="fieldcontain">
                                <fieldset data-role="controlgroup" data-mini="true">
                                    <label for="textinput7">
                                        Sales Engineer Phone No.
                                    </label>
                                    <input name="txtSalesEngPhone" id="textinput7" placeholder="" value="" type="tel" />
                                </fieldset>
                            </div>
                    </div>
                </div>
                <a data-role="button" data-inline="true"  data-rel="back" data-transition="fade" href="#page2">
                    Proceed
                </a>

            </div>

        </div>

          <div data-role="page" id="page2" data-theme="b">

            <div   data-role="header">
                <h2>
                    Nalco Water Savings Unit
                </h2>
            </div>
              <div data-role="content" style="padding: 15px">
                <div data-role="navbar" data-iconpos="right">
                    <ul>
                        <li>
                            <a href="#page1"   data-icon="arrow-r" class="ui-btn-active ui-state-persist">
                                Customer Info
                            </a>
                        </li>
                        <li>
                            <a href="#"   data-icon="arrow-r">
                                Additional Details
                            </a>
                        </li>
                        <li>
                            <a href="#page3"   data-icon="info">
                                Summary
                            </a>
                        </li>
                    </ul>
                </div>
                <h2> <b> What additional installation costs have been identified? </b> </h2>
                <fieldset data-role="controlgroup" data-mini="true" >
                 <div class="ui-grid-b" id="gridAddCost">
                    <div class="ui-block-a">
                    <h3><b>Description</b></h3>
                    </div>
                    <div class="ui-block-b" >
                    <h3><b>Cost</b></h3>
                    </div>
                     <div class="ui-block-c" >                  
                    </div>
                    <div class="ui-block-a">
                    <input name="txt1" id="textinput5" placeholder="" value="" type="text" />
                    </div>
                    <div class="ui-block-b">
                    <input name="txt2" id="textinput5" placeholder="" value="" type="text" />
                    </div>
                     <div class="ui-block-c" >                  
                    </div>
                    <div class="ui-block-a">
                    <input name="txt3" id="textinput5" placeholder="" value="" type="text" />
                    </div>
                    <div class="ui-block-b">
                    <input name="txt4" id="textinput5" placeholder="" value="" type="text" />
                    </div>
                     <div class="ui-block-c" >                  
                    </div>
                    <div class="ui-block-a">
                    <input name="txt5" id="textinput5" placeholder="" value="" type="text" />
                    </div>
                    <div class="ui-block-b">
                    <input name="txt6" id="textinput5" placeholder="" value="" type="text" />
                    </div>
                    <div class="ui-block-c" >                   
                    </div>                  
                </div>

   <input id="btnAddDesc" type="button" value="Add installation" />

                </fieldset>

                     <a data-role="button" data-inline="true"  data-rel="back" data-transition="fade" href="#page3">
                    Proceed
                </a>
            </div>
         </div>

          <div data-role="page" id="page3" data-theme="b">

            <div   data-role="header">
                <h2>
                    Nalco Water Savings Unit
                </h2>
            </div>
              <div data-role="content" style="padding: 15px">

                <div data-role="content">   
             <button onclick="capturePhoto();">Capture Photo</button> <br>
    <button onclick="capturePhotoEdit();">Capture Editable Photo</button> <br>
    <button onclick="getPhoto(pictureSource.PHOTOLIBRARY);">From Photo Library</button><br>
    <button onclick="getPhoto(pictureSource.SAVEDPHOTOALBUM);">From Photo Album</button><br>
    <img style="width:60px;height:60px;" id="smallImage" src="a.png" />
    <img style="" id="largeImage" src="a.png" />
                </div><!-- /content -->
                <div data-role="navbar" data-iconpos="right">
                    <ul>
                        <li>
                            <a href="#page1"   data-icon="arrow-r" class="ui-btn-active ui-state-persist">
                                Customer Info
                            </a>
                        </li>
                        <li>
                            <a href="#page2"   data-icon="arrow-r">
                                Additional Details
                            </a>
                        </li>
                        <li>
                            <a href="#"   data-icon="info">
                                Summary
                            </a>
                        </li>
                    </ul>
                </div>
                     <a data-role="button" data-inline="true"  data-rel="back" data-transition="fade" href="#page1">
                    Proceed
                </a>
            </div>
         </div>

        <script>
            //App custom javascript
        </script>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:48:39.737

这种方法：

```
navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 100, targetWidth: -1, targetHeight: -1 , 
    destinationType: destinationType.FILE_URI,encodingType:PNG,
    sourceType: source }); 
```

应该：

```
navigator.camera.getPicture(onPhotoURISuccess, onFail, { quality: 100, targetWidth: -1, targetHeight: -1 , 
    destinationType: destinationType.FILE_URI,
    encodingType:navigator.camera.EncodingType.PNG,
    sourceType: source }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T04:30:34.430

我能够使用

```
(quality: 50, destinationType: navigator.camera.DestinationType.FILE_URI, targetWidth: 1153, targetHeight: 385) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-12T05:21:23.013

打开控制台，进入项目目录。在控制台输入：

```
cordova plugin ls 
```

确保您的科尔多瓦安装需要插件。如果未安装所需的插件，请键入：

```
cordova plugin add org.apache.cordova.camera
cordova plugin add org.apache.cordova.media-capture
cordova plugin add org.apache.cordova.media 
```

然后，在物理设备上重新运行该应用程序，不要使用模拟器。模拟器没有摄像头。我也用jQm，cordova媒体插件和jQm之间没有问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T14:48:13.950

您是否忘记包含图像文件 a.png？

```
<img style="width:60px;height:60px;" id="smallImage" src="a.png" />
<img style="" id="largeImage" src="a.png" /> 
```

根据您的代码，它应该在您的 index.html 所在的同一目录中

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-10T12:15:19.917

问题在这里，

您已添加

`<script type="text/javascript" charset="utf-8" src="cordova-2.0.0.js"></script>`在您的 HTML 文件中。

应该是这样的

`<script type="text/javascript" charset="utf-8" src="js/cordova-2.0.0.js"></script>`

这意味着您必须将您的**cordova-2.0.0.js**保存在`assets/www/js`目录中。或下载最新的[Cordova](http://phonegap.com/install/)并将其保存在本地。

我希望它会奏效。

# css - 如何让 Twitter Bootstraps 移动导航栏覆盖页面上的内容而不是向下推？

> ID：11971372
> 
> 赞同：6
> 
> 时间：2012-08-15T14:39:11.187
> 
> 标签：css, twitter-bootstrap

我正在使用 Twitter Bootstrap 并想修改移动导航栏，以便在展开下拉菜单时覆盖页面上的内容，而不是将其向下推。我知道我可能需要使包含`<div>`绝对定位的菜单，增加它的 z-index，并`<div>`相对定位外部，但我似乎无法让它工作。

关于我如何做到这一点的任何建议？

这是我开始的[JSFiddle 。](http://jsfiddle.net/QuRsT/)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T17:57:56.330

`navbar-absolute`如果您向导航栏添加类似的类：

```
<div class="navbar navbar-fixed-top navbar-absolute">...</div> 
```

，以及一些 CSS 规则：

```
@media (max-width: 979px) {
  .navbar-fixed-top.navbar-absolute {
    position: absolute;
    margin: 0;
  }
}

.navbar-absolute + div {
    margin-top: 68px;
} 
```

它应该让你开始。

### [JSFiddle](http://jsfiddle.net/mmfansler/94yv6/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-06-02T06:58:17.163

这很简单，只需给出“navbar-fixed-top”它就会自动覆盖所有其他内容

`<nav class="navbar navbar-default navbar-fixed-top">`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-22T15:52:03.367

我结合使用了这两个答案来使其工作。使用 Inspect Element 计算导航栏的高度（除非您知道高度）。使用该数字的上边距设置下一个 div。然后将导航栏设置为 navbar-fixed-top。

# sql - SQL join 寻找最新记录

> ID：11971373
> 
> 赞同：1
> 
> 时间：2012-08-15T14:39:13.527
> 
> 标签：sql

我有两个相关字段的表如下： -

用户用户 ID

登录用户 ID 日期

我想要做的是列出来自 USERS 的所有用户 ID，以及他们从 LOGINS 表登录的最后日期。

我正在努力弄清楚如何构建我的 SQL。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:42:09.040

```
select 
    users.userid,
    max(date)
from 
    users
        inner join logins on user.userid = logins.userid
group by users.userid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-08-20T00:03:30.267

在每个用户登录组上使用聚合函数加入表以选择`MAX`登录`date`

IE

```
SELECT users.id, MAX(logins.date) AS last_login FROM Users
JOIN logins ON user.Id = logins.user_id
GROUP BY users.Id 
```

下面是一个实践中的例子： [http ://sqlfiddle.com/#!9/2adba3/8](http://sqlfiddle.com/#!9/2adba3/8)

# asp.net - 命令行应用程序中的 asp.net 4.0 到 excel 2010 不起作用 - 即使在驱动程序安装后也找不到驱动程序

> ID：11971376
> 
> 赞同：0
> 
> 时间：2012-08-15T14:39:22.963
> 
> 标签：asp.net, excel, odbc, adodb

我有 100 个 excel 文件。在每个文件中，我需要将其中的一行插入 SQL 服务器。我需要这个自动化，但最终不在乎它是应用程序中的 asp.net 还是 excel 宏。如果您有任何想法，请告诉我。

**问题** 我编写了 asp.net 4.0 命令行应用程序代码然后收到错误：“Microsoft.Ace.OleDb.4.0”提供程序未在本地计算机上注册。

**尝试** 安装 Microsoft Access Database Engine 2010 Redistributable ( [http://www.microsoft.com/en-us/download/details.aspx?id=13255](http://www.microsoft.com/en-us/download/details.aspx?id=13255) ) 后，我的盒子上没有更多的 odbc 驱动程序。就像以前一样，只是 SQL 驱动程序。

我的盒子是 x64，但我安装了 x86 office，所以我安装了 Microsoft Access Database Engine 2010 Redistributable for x86。

我还检查了注册表，除了 SQL 服务器驱动程序之外，看不到任何驱动程序。

我读过几篇文章：

[http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/eeaa2d7b-fbfa-401b-8efe-9170f04059b0](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/eeaa2d7b-fbfa-401b-8efe-9170f04059b0)

['Microsoft.ACE.OLEDB.12.0' 提供程序未在本地计算机中注册](https://stackoverflow.com/questions/1646409/the-microsoft-ace-oledb-12-0-provider-is-not-registered-in-the-local-machine)

虽然我将在下面包含我的代码，但我认为在我拥有驱动程序之前它不会有所作为 -

```
public void ImportExcelFilesForPieChart()
{
    List<DataTable> listDataTables = new List<DataTable>();
    List<CompanyInfo> newlist = new List<CompanyInfo>();
    string sheetName = "Output";

    string[] fileList = Directory.GetFiles(dropBoxExcelLocation);
    foreach (string filename in fileList)
    {
        DataTable dt = new DataTable();
        string connectionString = string.Format("Provider=Microsoft.Ace.OleDb.4.0;data source={0};Extended Properties=Excel 8.0;HDR=No;IMEX=1", dropBoxExcelLocation + filename);
        using (OleDbConnection connection = new OleDbConnection(connectionString))
        {
            string strSQL = String.Format("SELECT 4A, 4B, 4C, 4D, 4E, 4F FROM [{0}$]", sheetName); //[A4:F4]";
            OleDbCommand objCmd = new OleDbCommand(strSQL, connection);
            connection.Open();

            using (OleDbDataAdapter da = new OleDbDataAdapter(strSQL, connection))
            {
                da.Fill(dt);
                listDataTables.Add(dt);
            } 
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:17:14.957

您的连接字符串不正确。

提供者应该是`Microsoft.ACE.OLEDB.12.0`

我相信 JET 提供程序是 4.0。你是事先尝试过的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T16:15:54.563

我做了几件事，所以我不确定所有步骤是否都很重要。

我根据这篇 kb 文章[http://support.microsoft.com/kb/209805](http://support.microsoft.com/kb/209805)注册了我的 dll 。在注册它们之前，我确认注册表中没有条目。这让我找到了 ISAM 未发现异常。

然后，感谢 Dave R，我更改了连接字符串。最终起作用的连接字符串是（注意扩展属性上的转义引号）

```
string connectionString = string.Format("Provider=Microsoft.ACE.OLEDB.12.0;data source={0};Extended Properties=\"Excel 12.0 Xml;IMEX=1\"", filename); 
```

我没有意识到文件扩展名（.xlsx）与连接字符串相关，但在阅读了此处的连接字符串信息（[http://www.connectionstrings.com/excel-2007](http://www.connectionstrings.com/excel-2007)）后，我修复了它。

# javascript - 为什么谷歌地图教程不能在我的电脑上运行？

> ID：11971379
> 
> 赞同：3
> 
> 时间：2012-08-15T14:39:32.417
> 
> 标签：javascript, html, google-maps, google-maps-api-3

所以我从谷歌开发者网站下载了一些示例代码来玩。[下面找到的代码与此处](https://google-developers.appspot.com/maps/documentation/javascript/examples/circle-simple)找到的代码完全相同。当我下载 html 并尝试在 chrome 中本地打开它时，它没有显示任何内容，它返回一个空白屏幕，没有任何错误（firebug lite）。我正在使用 Mac，而且我对所有这些网络开发人员都是新手。我应该设置一个本地主机的东西还是我完全错过了什么？任何帮助是极大的赞赏。

```
 <!DOCTYPE html>
    <html>
      <head>
        <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
        <meta charset="utf-8">
        <title>Google Maps JavaScript API v3 Example: Circle Simple</title>
        <link href="/maps/documentation/javascript/examples/default.css" rel="stylesheet">
        <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
        <script>

         var citymap = {};
         citymap['chicago'] = {
           center: new google.maps.LatLng(41.878113, -87.629798),
           population: 2842518
         };
         citymap['newyork'] = {
           center: new google.maps.LatLng(40.714352, -74.005973),
           population: 8143197
         };
         citymap['losangeles'] = {
           center: new google.maps.LatLng(34.052234, -118.243684),
           population: 3844829
         }
         var cityCircle;

         function initialize() {
           var mapOptions = {
             zoom: 4,
             center: new google.maps.LatLng(37.09024, -95.712891),
             mapTypeId: google.maps.MapTypeId.TERRAIN
           };

           var map = new google.maps.Map(document.getElementById("map_canvas"),
               mapOptions);

           for (var city in citymap) {
             // Construct the circle for each value in citymap. We scale population by 20.
             var populationOptions = {
               strokeColor: "#FF0000",
               strokeOpacity: 0.8,
               strokeWeight: 2,
               fillColor: "#FF0000",
               fillOpacity: 0.35,
               map: map,
               center: citymap[city].center,
               radius: citymap[city].population / 20
             };
             cityCircle = new google.maps.Circle(populationOptions);
           }
         }
        </script>
      </head>
      <body onload="initialize()">
        <div id="map_canvas"></div>
      </body>
    </html> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:46:45.057

问题是文档中`link`元素的`href`属性`head`使用指向本地计算机上样式表的相对 URL。除非您已下载该样式表并将其放在`link`元素`href`属性中引用的位置，否则它不会找到它。

不过，在这种情况下，我建议您将其更改为以下内容，以便它使用来自 Google 服务器的样式表：

```
<link href="https://google-developers.appspot.com/maps/documentation/javascript/examples/default.css" rel="stylesheet"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T14:47:14.380

由于您直接从演示站点保存了文件，因此您没有保存与其关联的 CSS 文件 (/maps/documentation/javascript/examples/default.css)。所以你的地图没有宽度/高度。如果您保存此文件并正确引用它，它应该可以工作。或者，您可以将一点 css 添加到您的 html 文件中：

```
<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Google Maps JavaScript API v3 Example: Circle Simple</title>
    <style type="text/css">
    html, body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    #map_canvas {
      height: 100%;
    }

    @media print {
      html, body {
        height: auto;
      }

      #map_canvas {
        height: 650px;
      }
    }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?sensor=false"></script>
    <script>

      // Create an object containing LatLng, population.
      var citymap = {};
      citymap['chicago'] = {
        center: new google.maps.LatLng(41.878113, -87.629798),
        population: 2842518
      };
      citymap['newyork'] = {
        center: new google.maps.LatLng(40.714352, -74.005973),
        population: 8143197
      };
      citymap['losangeles'] = {
        center: new google.maps.LatLng(34.052234, -118.243684),
        population: 3844829
      }
      var cityCircle;

      function initialize() {
        var mapOptions = {
          zoom: 4,
          center: new google.maps.LatLng(37.09024, -95.712891),
          mapTypeId: google.maps.MapTypeId.TERRAIN
        };

        var map = new google.maps.Map(document.getElementById('map_canvas'),
            mapOptions);

        for (var city in citymap) {
          // Construct the circle for each value in citymap. We scale population by 20.
          var populationOptions = {
            strokeColor: '#FF0000',
            strokeOpacity: 0.8,
            strokeWeight: 2,
            fillColor: '#FF0000',
            fillOpacity: 0.35,
            map: map,
            center: citymap[city].center,
            radius: citymap[city].population / 20
          };
          cityCircle = new google.maps.Circle(populationOptions);
        }
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="map_canvas"></div>
  </body>
</html> 
```

# c++ - 我如何获得一个月的总天数并省略周末

> ID：11971380
> 
> 赞同：2
> 
> 时间：2012-08-15T14:39:35.723
> 
> 标签：c++

这是我的程序输出：

```
Select A Month-Year: 

1\. 8-2012
2\. 9-2012
3\. 10-2012
4\. 11-2012
5\. 12-2012
6\. 1-2013 
```

在用户选择例如下个月的 9-2012 之后，我希望能够知道 2012 年 9 月（9-2012）有多少天。

那么如何获取周末（周六和周日）的所有日期，以便我也可以省略这些日期？

我现在正在使用`ctime`库来获取日期。

以下是我到目前为止所做的，但对于二月，每个闰年（4 年）是 29 天。

我该如何做一个逻辑来处理它。我知道最近的一年是今年 2012 年（今年），下一年是 2016 年，但我希望我的程序能够处理至少 40 年后。

```
if(month==4||month==6||month==9||month==11)
{
totalDays = 30;
}

if(month==1 || month==3 || month==5 || month==7 || month==8 || month== 10 || month==12 )
{
totalDays = 30;
}

if(month==2)
{
//February
totalDays = 28;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:44:46.197

`mktime`几乎可以为您完成所有工作。要查找两个日期之间的天数，每个日期由 a 指定`struct tm`，您可以使用：

```
int days_between (struct tm *tsa, struct tm *tsb) {
    time_t a = mktime(tsa);
    time_t b = mktime(tsb);
    return (b - a)/(60*60*24);
} 
```

这将以秒为单位的差异除以一天中的秒数。

所以一年中的天数可以这样计算：

```
int days_of_year (int y) {
    struct tm tsa = {0};
    struct tm tsb = {0};

    tsa.tm_mday = 1;
    tsa.tm_year = y - 1900;

    tsb.tm_mday = 1;
    tsb.tm_year = y + 1 - 1900;

    return days_between(&tsa, &tsb);
} 
```

月份中的天数相似，但您将保持年份不变，并使用`tsb`.

要计算工作日数，前 28 天总是至少有 8 个。然后，根据一个月中有多少天，您必须考虑剩余的天数。该`tm_wday`字段提供自星期日以来的天数作为`struct tm`.

```
 int dss = tsa.tm_wday;
    weekdays = 8;
    switch (days) {
    case 31: if (dss == 0 || dss == 6) weekdays += 1;
             dss = (dss + 1) % 7;
    case 30: if (dss == 0 || dss == 6) weekdays += 1;
             dss = (dss + 1) % 7;
    case 29: if (dss == 0 || dss == 6) weekdays += 1;
    default: break;
    } 
```

完整的例子可以在[http://ideone.com/qQo3U找到](http://ideone.com/qQo3U)

计算闰年，公历的逻辑是：如果一年能被4整除，则为闰年，除非它也能被100整除，在这种情况下，如果能被400整除，则为闰年.

```
int is_leap_year (int y) {
    return (y % 4) ? 0 : ((y % 100) ? 1 : !(y % 400));
} 
```

但是，`mktime`已经知道这一点，并且可以为您解决，正如已经证明的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:43:16.723

一个快速的谷歌发现了这个计算星期几的链接： [http ://www.terra.es/personal2/grimmer/](http://www.terra.es/personal2/grimmer/)

你将不得不做一堆处理。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:09:56.290

您需要计算出该月的第一天是哪个工作日（使用 mktime）。算出这个月的天数（并且小心二月），然后一点点算术就会告诉你有多少个星期六和星期日。

# python - 列的多级索引：将 value_counts 作为 pandas 中的列

> ID：11971381
> 
> 赞同：6
> 
> 时间：2012-08-15T14:39:44.223
> 
> 标签：python, ipython, pandas

在一般意义上，我要解决的问题是将多级索引的一个组件更改为列。也就是说，我有一个`Series`包含多级索引的 a，我希望将索引的最低级别更改为 a 中的列`dataframe`。这是我要解决的*实际示例问题，*

这里我们可以生成一些示例数据：

```
foo_choices = ["saul", "walter", "jessee"]
bar_choices = ["alpha", "beta", "foxtrot", "gamma", "hotel", "yankee"]

df = DataFrame([{"foo":random.choice(foo_choices), 
                 "bar":random.choice(bar_choices)} for _ in range(20)])
df.head() 
```

这给了我们，

```
 bar     foo
0    beta    jessee
1    gamma   jessee
2    hotel   saul
3    yankee  walter
4    yankee  jessee
... 
```

现在，我可以分组`bar`并获取`foo`字段的 value_counts，

```
dfgb = df.groupby('foo')
dfgb['bar'].value_counts() 
```

它输出，

```
foo            
jessee  hotel      4
        gamma      2
        yankee     1
saul    foxtrot    3
        hotel      2
        gamma      1
        alpha      1
walter  hotel      2
        gamma      2
        foxtrot    1
        beta       1 
```

但我想要的是类似的东西，

```
 hotel    beta    foxtrot    alpha    gamma    yankee
foo                        
jessee     1       1       5          4        1        1
saul       0       3       0          0        1        0
walter     1       0       0          1        1        0 
```

我的解决方案是编写以下代码：

```
for v in df['bar'].unique():
    if v is np.nan: continue
    df[v] = np.nan
    df.ix[df['bar'] == v, v] = 1

dfgb = df.groupby('foo')
dfgb.count()[df['bar'].unique()] 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T15:40:50.050

我想你想要：

```
dfgb['bar'].value_counts().unstack().fillna(0.) 
```

# matlab - 在matlab中声明复杂的函数

> ID：11971386
> 
> 赞同：1
> 
> 时间：2012-08-15T14:40:04.160
> 
> 标签：matlab

我想在 Matlab 中声明一个非线性复杂函数，所以我写了这个：

```
>> syms x

>> f=inline((3/2)*(7.02^2))-(2*18*x*((1-(x/18))*(1-(exp(-18/x))))) 
```

但它不起作用并返回此错误：

```
??? Error using ==> inline.inline at 47
Input must be a string. 
```

如何声明它以便可以将它用作循环内的函数？

我想用数字找到这个函数的根，所以我首先需要声明它，这样我就可以在循环中使用它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:44:36.630

您的括号有一些问题，需要添加单引号：

```
>>f=inline('((3/2)*(7.02^2))-(2*18*x*((1-(x/18))))*(1-(exp(-18/x)))') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T12:15:59.000

首先，您应该了解[运算符优先级](http://en.wikipedia.org/wiki/Order_of_operations)，这样您就可以避免许多令人困惑的括号。

其次，正如大多数其他人在这里提到的那样，`inline`速度很慢，不适合这个目的。你最好使用（并学习如何正确使用）匿名函数，也就是函数句柄。

第三，如果你想找到这个函数的根源，你最好使用专门为此目的经过广泛测试的 Matlab 函数，而不是设计和实现你自己的版本：

```
>> f = @(x) 3/2*7.02^2 - 2*18*x.*(1-x/18).*(1-exp(-18./x));    
>> root1 = fzero(f, 14)
root1 = 
    1.440303362822718e+01

>> root2 = fzero(f, 2.5)
root2 = 
     2.365138420421266e+00

>> root3 = fzero(f, 0)    %# (if you're into that kind of perversion)
root3 = 
    0 
```

我通过从结果中随机测试值`-100:100`然后`unique`对结果进行测试来找到初始值。这绝不是找到所有根源的可靠方法，但我相信您可以提出更好的方法（无论如何，这个问题很容易通过分析来解决）。

# java - 摆脱独立 java Spring spring 应用程序中的 getBean（非 web 应用程序，无容器）

> ID：11971389
> 
> 赞同：5
> 
> 时间：2012-08-15T14:40:10.157
> 
> 标签：java, spring

在 Web 应用程序中，我们真的不需要做 ..

```
ApplicationContext ctx = new ClassPathXmlApplicationContext("spring-context.xml");
ctx.getBean("beanId"); 
```

因为一般的做法是加载上下文文件并使用 web.xml 中的 ContextLoaderServlet 注入所有具有依赖关系的 bean，如下所示。

```
<context-param>
  <param-name>contextConfigLocation</param-name>
  <param-value>/WEB-INF/spring-context.xml /WEB-INF/applicationContext.xml</param-value>
</context-param>

<listener>
  <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener>

<!-- or use the ContextLoaderServlet instead of the above listener
<servlet>
  <servlet-name>context</servlet-name>
  <servlet-class>org.springframework.web.context.ContextLoaderServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet>
--> 
```

但是，在没有容器的独立 Java 应用程序中，我最终会执行**ctx.getBean("xyz");** . 有没有一种干净的方法可以做到这一点，在网上找不到一个例子。

我检查了..[简单的 Spring，将 ClasspathApplicationContext 用于独立应用程序，如何重用？](https://stackoverflow.com/questions/707355/simple-spring-use-of-classpathapplicationcontext-for-standalone-apps-how-to-re/707729#707729)，其中谈到使用**SingletonBeanFactoryLocator**，但它最终使用 context.getBean()。

我还查看了**ServiceLocatorFactoryBean**，但这又是通过使用代理来按需获取 bean。

我正在寻找一种解决方案来从我的独立 java 应用程序的 main() 程序加载上下文文件（所有 bean），这样我就不想按需获取 bean。

示例代码：

```
public interface IReader {
    public String read();
}

public class TextFileReader implements IReader {

    private StringBuilder builder = null;
    private Scanner scanner = null;

    public TextFileReader(String fileName) throws FileNotFoundException {
        scanner = new Scanner(new File(fileName));
        builder = new StringBuilder();
    }

    public String read() {
        while (scanner.hasNext()) {
            builder.append(scanner.next());
            builder.append(",");
        }
        return builder.toString();
    }
}

 public class SpringNoConextDataReaderClient {

    private IReader reader = null;

    public void setReader(TextFileReader reader) {
        this.reader = reader;
    }

    private String fetchDataOne() {
        return reader.read();
    }

    private String fetchDataTwo() {
        return reader.read();
    }

    public static void main(String[] args) {

        final ApplicationContext context = new ClassPathXmlApplicationContext("spring-context.xml");
        String fetchedData = context.getBean(SpringNoConextDataReaderClient.class).fetchDataOne(); // <-- reader is injected as TextFileReader in fetchDataOne which reads the file

        SpringNoConextDataReaderClient client = new SpringNoConextDataReaderClient();
        client.fetchDataOne(); // <--  reader is null and throws NPE, probably its lifetime ended with previous call?

        System.out.println("Example 1.1: Got data without context: " + fetchDataOne);
    }

} 
```

**弹簧上下文.xml**

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:aop="http://www.springframework.org/schema/aop"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
                        http://www.springframework.org/schema/aop http://www.springframework.org/schema/aop/spring-aop-2.5.xsd">

    <bean id="reader" class="com.himalay.spring.core.basic.readers.TextFileReader">
        <constructor-arg value="src/main/resources/data.txt" />
    </bean>

    <bean id="springNoConextDataReaderClient" class="com.himalay.spring.core.basic.SpringNoConextDataReaderClient">
        <property name="reader"><ref bean = "reader" /></property>
    </bean>

</beans> 
```

谢谢你。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T15:16:30.947

在独立应用程序中，您需要创建`ApplicationContext`自己的实例并使用它来加载至少一个 bean。但是您加载的一个 bean 可以使用所有的 Spring 魔法`@Autowired`等，并且不需要再使用`getBean`了。因此，您可以拥有一个加载使用的引导 bean，`getBean`然后让这个 bean 执行其他所有操作。就像是：

```
@Component
public class Main
{
    @Autowired
    protected MyDependencyClass2 someClass1;
    @Autowired
    protected MyDependencyClass2 someClass2;
    // ...
    // or if you need an entity manager
    @PersistenceContext
    protected EntityManager em;
    // etc.

    protected void mainInternal(String[] args)
        throws Exception
    {
        // do everything here
        // all dependencies are initialized
        // ...
    }

    public static void main(String[] args)
        throws Exception
{
        // Bootstrap Spring and let it create and configure beans.
        final ApplicationContext context =
            new ClassPathXmlApplicationContext("spring-context.xml");
        context.getBean(Main.class).mainInternal(args);
    }
} 
```

注意：通常使用带参数的[getBean(Class)](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/BeanFactory.html#getBean(java.lang.Class))或[getBean(String,Class)](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/beans/factory/BeanFactory.html#getBean(java.lang.String,%20java.lang.Class))变体更安全`Class<T>`。

* * *

如果您只是调用`new Main()`，则依赖项不会被初始化。Spring 不知道您使用创建的`new`实例，只知道它自己创建的实例。这是 Spring 的一个关键概念。它不仅创建类的实例，还管理与其他 bean 的依赖关系，可以使用方面等处理创建的实例。这在您自己创建的实例上是不可能的`new`.

这里的重点是，如果您将所有代码从`main`移至`mainInternal`，则*所有*必需的依赖项都将被初始化。不仅`Main`如此，还有它的依赖关系、它们的依赖关系等等等等。因此，如果您的应用程序是使用 Spring 正确构建的，并且如果它只使用 Spring 特性（例如`@Autowired`）管理依赖关系，那么您将获得一个类似于您在一个网络应用程序。

因此，在这种情况下，正确的过程是：将所有 bean 所需的应用程序启动依赖项制作成`Main`. 它们将与所有依赖项一起被初始化，您可以安全地使用它们`mainInternal`或任何它调用的东西。

* * *

**编辑：评论你的例子。**正如我所解释的，*Spring 只管理它创建*的对象，而不是您使用创建的对象`new`。在您的示例中，您使用

```
SpringNoConextDataReaderClient client = new SpringNoConextDataReaderClient(); 
```

所以`client`不会由 Spring 管理，也不会设置或解析它的依赖项。可以这样想：如果你自己创建了一个对象，Spring 怎么会知道呢？

另外，您的示例设计得不好。Spring 的主要思想是使用[控制反转](https://en.wikipedia.org/wiki/Inversion_of_control)原理管理*程序组件*并将它们连接在一起。在大多数情况下，此类程序组件意味着是在应用程序的整个生命周期中存在的[单例对象。](https://en.wikipedia.org/wiki/Singleton_pattern)（也可能有生命周期较短的组件，例如一个 HTTP 请求或一个 HTTP 会话范围，但这超出了本问题的范围。）重要的是，此类单例组件一旦它们就不应更改其内部状态'被初始化。

另一方面，Spring 并不意味着管理您的数据对象，例如`IReader`. `IReader`不是程序的组件，它是您创建、从文件中读取并在之后处理的对象。更好的设计是：

*   有一个为您提供`IReader`按需的单例 bean，例如

    ```
    public class TextFileReaderProvider {
        public IReader createReader() { ... }
    } 
    ```

*   将此提供程序连接到`SpringNoConextDataReaderClient`like

    ```
    public class SpringNoConextDataReaderClient {
        @Autowired
        protected TextFileReaderProvider readerProvider;

        public SomeResult doMyComputation() {
            IReader r = readerProvider.createReader();
            try {
                // compute the result
                return theResult;
            } finally {
                r.close();
            }
        }
    } 
    ```

    （或者不是`@Autowired`在 XML 中手动配置依赖项）。

*   在`main`中，让 Spring 为您提供一个实例`SpringNoConextDataReaderClient`并调用`doMyComputation()`它。

这样的设计会导致您将软件分成不同的组件，这些组件可以在整个应用程序中重复使用，并且不会出现并发问题。

# java - 从 httppost 响应解析 xml

> ID：11971390
> 
> 赞同：7
> 
> 时间：2012-08-15T14:40:14.337
> 
> 标签：java, android, xml, http, post

在执行 http POST 期间，我将响应存储为字符串响应。

```
HttpResponse httpresponse = httpclient.execute(httppost);
HttpEntity resEntity = httpresponse.getEntity();
response = EntityUtils.toString(resEntity); 
```

如果我打印响应，它看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<response status="ok">
<sessionID>lo8mdn7bientr71b5kn1kote90</sessionID>
</response> 
```

我只想将 sessionID 存储为字符串。我试过了

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
InputSource is = new InputSource(new StringReader(xml)); 
```

以及像这样的各种方法，但它不会让我运行代码，因为 DocumentBuildFactory 和 InputSource 是无效的。

我应该怎么做才能从这个 XML 中提取特定的字符串？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-15T15:23:15.067

这只是快速而肮脏的测试。它对我有用。

```
import java.io.IOException;
import java.io.StringReader;

import javax.xml.parsers.DocumentBuilder;
import javax.xml.parsers.DocumentBuilderFactory;
import javax.xml.parsers.ParserConfigurationException;

import org.w3c.dom.Document;
import org.w3c.dom.NodeList;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;

public class Test {
    public static void main(String[] args) {
        String xml= "<?xml version=\"1.0\" encoding=\"UTF-8\"?><response status=\"ok\"><sessionID>lo8mdn7bientr71b5kn1kote90</sessionID></response>";
        DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
        DocumentBuilder builder;
        InputSource is;
        try {
            builder = factory.newDocumentBuilder();
            is = new InputSource(new StringReader(xml));
            Document doc = builder.parse(is);
            NodeList list = doc.getElementsByTagName("sessionID");
            System.out.println(list.item(0).getTextContent());
        } catch (ParserConfigurationException e) {
        } catch (SAXException e) {
        } catch (IOException e) {
        }
    }
} 
```

**输出**：lo8mdn7bientr71b5kn1kote90

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:49:25.567

**1.**使用`DOM Parser`.

**例如：**

```
DocumentBuilderFactory odbf = DocumentBuilderFactory.newInstance();
 DocumentBuilder odb =  odbf.newDocumentBuilder();
            InputSource is = new InputSource(new StringReader(xml));
            Document odoc = odb.parse(is);
            odoc.getDocumentElement().normalize ();    // normalize text representation
            System.out.println ("Root element of the doc is " + odoc.getDocumentElement().getNodeName());
            NodeList LOP = odoc.getElementsByTagName("locations");
            int totalPersons =LOP.getLength();
            System.out.println("Total nos of locations:"+totalPersons);

            for(int s=0; s<LOP.getLength() ; s++)
            {
                Node FPN =LOP.item(s);
                if(FPN.getNodeType() == Node.ELEMENT_NODE)
                    {

                    Element latlon = (Element)FPN;                                                                

                    NodeList oNameList1 = latlon.getElementsByTagName("featured");                                       
                    Element firstNameElement = (Element)oNameList1.item(0);
                    NodeList textNList1 = firstNameElement.getChildNodes();
                    //this.setLocationId(((Node)textNList1.item(0)).getNodeValue().trim());    
                    featuredArr = changeToBoolean(((Node)textNList1.item(0)).getNodeValue().trim());                                    // value taken
                    System.out.println("#####The Parsed data#####");
                    System.out.println("featured : " + ((Node)textNList1.item(0)).getNodeValue().trim());           
                    System.out.println("#####The Parsed data#####");
     } 
```

**有关详细信息，请参阅此链接：**

[http://tutorials.jenkov.com/java-xml/dom.html](http://tutorials.jenkov.com/java-xml/dom.html)

# c - libevent 2.0.19 - 奇怪的 evbuffer_copyout 最终符号

> ID：11971392
> 
> 赞同：0
> 
> 时间：2012-08-15T14:40:23.743
> 
> 标签：c, cocoa, libevent

我正在使用 libevent 来执行简单的 POST http 服务器，但我发现了一个奇怪的问题 - evbuffer_copyout 写入 *data 发送的数据有开销（每次都更改）。正如您在代码中看到的那样，我通过剪切不必要的符号来修复，但它看起来不像正确的解决方案。我在这里收到： ![在此处输入图像描述](../Images/f82ccbb2eaedd40b6bbc79a8fa26be1f.png)

下面是回调代码：

```
size_t len = evbuffer_get_length(evhttp_request_get_input_buffer(r));
struct evbuffer *in_evb = evhttp_request_get_input_buffer(r);

size_t lenBuffer = evbuffer_get_length(in_evb);

char *data = malloc(len);
evbuffer_remove(in_evb, data, len);
NSString *final = [NSString stringWithCString:data encoding:NSASCIIStringEncoding];
NSString *finalFinal = [final substringWithRange:NSMakeRange(0, len)];

NSLog(@"==>lenBuffer:%zu len:%zu data:%@",lenBuffer,len,finalFinal);
evhttp_add_header(evhttp_request_get_output_headers(r),
                  "Content-Type", "text/html");
evhttp_send_reply(r, 200, "OK", in_evb);
free(data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:59:25.737

当您通过 malloc 分配内存时，它充满了一些垃圾。你用有用的数据填充这个内存，但它可能不包含字符串终止符 '\0' 所以，调试器会向你显示从缓冲区获得的数据，后面有一些垃圾。

# html - 为什么“脚本”需要结束标签而“元”不需要？

> ID：11971393
> 
> 赞同：6
> 
> 时间：2012-08-15T14:40:23.440
> 
> 标签：html, web-applications

我正在编写一个 HTML 页面，并注意到 HTML 标题标签并不完全一致。其中一些需要结束标签，而另一些则不需要。

例如，`script`标签确实需要结束标签，但`meta`不需要。现在我想知道*为什么*？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T14:42:07.627

该`script`标签不是空（非封闭）标签，因为它有时包含内容（Javascript 代码），但`meta`标签从不包含。
有两种方法可以将 Javascript 放入网页中。第一种方法是包含一个外部文件：

```
<script src="path/to/my/script.js"></script> 
```

第二种方法是将 Javascript 直接放在 HTML 文件中，如下所示：

```
<script>
  Javascript goes here
</script> 
```

所以有时候，`script`需要有内容。但`meta`另一方面，该标签只需要提供有关当前页面的少量信息，因此一个空标签就足够了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T14:42:24.213

我相信这只是与当前系统所基于的系统有关的任意原因......

“如果有人好奇，最终的原因是 HTML 最初是 SGML 的一种方言，这是 XML 的怪异哥哥。在 SGML 领域，标签可以在 DTD 中指定为自闭（例如 BR、HR、INPUT )、隐式可关闭（例如 P、LI、TD）或显式可关闭（例如 TABLE、DIV、SCRIPT）。XML 当然没有这个概念。

来自：[https ://stackoverflow.com/a/3327807/773263](https://stackoverflow.com/a/3327807/773263)

# java - 除了使用像 Eclipse 插件这样的分析器之外，由一个类创建的对象的 java 数量

> ID：11971401
> 
> 赞同：0
> 
> 时间：2012-08-15T14:40:31.370
> 
> 标签：java, eclipse, object, profiler, yourkit

我想知道是否有一个好的 eclipse 插件来查看创建了多少对象或每个类。Yourkit 探查器在这方面做得很好，但在 eclipse 中有一些正确的东西很方便。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:05:23.440

尝试 Eclipse 的[Eclipse Memory Analyzer](http://www.eclipse.org/mat/)插件。

# c# - 在两个不同的 AWS S3 账户之间复制

> ID：11971402
> 
> 赞同：1
> 
> 时间：2012-08-15T14:40:32.730
> 
> 标签：c#, amazon-s3, amazon-web-services

我正在为 AWS 使用 C# 库。我们有一个场景，第 3 方已授予我们对其 S3 存储桶的读取权限。是否可以将对象从他们的 S3 存储桶复制到我们的存储桶中而无需进行往返（即 GET 和 PUT）？

我在 AWS 文档中找到了这个：http: [//docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectCOPY.html](http://docs.amazonwebservices.com/AmazonS3/latest/API/RESTObjectCOPY.html)

但这似乎只适用于他们的 REST API，不适用于我正在使用的 C# 库

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T17:15:03.050

尽管 bwight 似乎在想什么，但它并没有那样工作。在没有必要往返的情况下使其工作的唯一方法是使用完全相同的凭据来访问两个存储桶。因此，让它工作的唯一方法是让源存储桶的所有者（在我的情况下是第 3 方）授予对您的一个用户帐户的访问权限以从他们的存储桶中列出/读取。他们只需要修改他们的存储桶策略以包含以下内容：

```
"Principal": {
    "AWS": "arn:aws:iam::1234567890:user/someusername"
} 
```

然后在策略中授予它所需的任何权限

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:07:59.817

C# SDK 也可以使用相同的方法。我不确定您是否可以跨帐户复制到存储桶，但如果权限设置正确，我认为没有理由不这样做。如果这不起作用，我会说这是不可能的。

[http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/?topic=html/M_Amazon_S3_AmazonS3Client_CopyObject.htm](http://docs.amazonwebservices.com/sdkfornet/latest/apidocs/?topic=html/M_Amazon_S3_AmazonS3Client_CopyObject.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-24T00:11:38.090

请务必记住，您用于处理 AWS 服务的任何语言（例如 S3）都将在后台与该服务的 API 进行通信。问题是 SDK 是否支持底层方法，在这种情况下是 PUT-copy 方法。

如果您跨账户执行此操作，则您使用的 IAM 用户/密钥对必须具有对源对象的 READ 访问权限和对目标存储桶的 WRITE 访问权限。

# wpf - wpf单选按钮上奇怪的焦点矩形

> ID：11971406
> 
> 赞同：7
> 
> 时间：2012-08-15T14:40:49.283
> 
> 标签：wpf, xaml, radio-button

为什么单击其中一个单选按钮时矩形会出现在单选按钮中。

![wpf单选按钮上奇怪的焦点矩形](../Images/77ee5f50b2864591eff0a1c2794f52ab.png)

XAML 标记如下所示

```
<RadioButton GroupName="LabelDisp" IsChecked=".. Converter={StaticResource enumBooleanConverter}, ConverterParameter= LabOnly}" Content="{x:Static resx:StringRes.RadioButtonLab}" Style="{StaticResource ListOption}" Command="{Binding Path=Command}"></RadioButton>
<RadioButton GroupName="LabelDisp" IsChecked=".. Converter={StaticResource enumBooleanConverter}, ConverterParameter= DescOnly}" Content="{x:Static resx:StringRes.RadioButtonDesc}" Style="{StaticResource ListOption}" Command="{Binding Path=Command}"></RadioButton>
<RadioButton GroupName="LabelDisp" IsChecked=".. Converter={StaticResource enumBooleanConverter}, ConverterParameter= LabAndDescr}" Content="{x:Static resx:StringRes.RadioButtonBoth}" Style="{StaticResource ListOption}" Command="{Binding Path=Command}"></RadioButton> 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-16T17:03:57.907

我返回 null 应该返回 Binding.Donothing 。

```
public object ConvertBack(object value, Type targetType, object parameter, System.Globalization.CultureInfo culture)
            {
                return (bool)value ? Enum.Parse(targetType, parameter.ToString(), true) : Binding.DoNothing;
            } 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-15T14:41:56.657

这些被称为 FocusVisualStyle，您可以将其删除 -

```
<RadioButton FocusVisualStyle="{x:Null}"/> 
```

**更新**

是的，HB 是对的，我以为你在谈论我们在单击单选按钮时得到的虚线边框。但似乎`validation border`，检查你的转换器代码，有什么东西在里面。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T14:43:23.597

对我来说看起来像是一个验证错误，可能是因为`ConverterParameter`. （您可能要考虑使用[另一种方法](https://stackoverflow.com/questions/9145606/how-can-i-reduce-radiobutton-binding-code/9145914#9145914)来绑定 RadioButtons）

# c++ - C++ 循环头包括

> ID：11971408
> 
> 赞同：8
> 
> 时间：2012-08-15T14:40:55.430
> 
> 标签：c++, header, header-files, circular-dependency

我知道之前有人问过与此类似的问题，但在进行研究之后，我仍然对循环标题包含有疑问。

```
//FooA.h
#ifndef H_FOOA
#define H_FOOA

#include "foob.h"

class FooA{
   public:
      FooB *fooB;
};

//FooB.h
#ifndef H_FOOB
#define H_FOOB

class FooA;
class FooB{
   public:
      FooA *fooA;
}; 
```

现在，如果我有两个循环依赖项，这就是我在 stackoverflow 上看到人们解决问题的方式。我唯一的问题是在我的 main.cpp 中我必须先包含 fooa.h 然后再包含 foob.h

```
//main.cpp the right way
#include "fooa.h"
#include "foob.h"

//main.cpp that will surely get a compile error
#include "foob.h"
#include "fooa.h" 
```

现在我的问题是“有没有办法以某种方式转发声明这些类，让我不关心在 main.cpp 中包含头文件的顺序？”

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-08-15T14:42:53.363

> 有没有办法以某种方式转发声明这些类，让我不关心在 main.cpp 中包含头文件的顺序？

由于您只处理简单的指针，因此您可以在这两种情况下使用前向声明：

呸呸呸

```
#ifndef H_FOOA
#define H_FOOA

// #include "foob.h" << not needed!
class FooB;       // << substitute with a forward declaration of FooB

class FooA{
   public:
      FooB *fooB;
};
#endif 
```

FooB.h

```
#ifndef H_FOOB
#define H_FOOB

class FooA;
class FooB{
   public:
      FooA *fooA;
};
#endif 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T14:42:42.793

您不必关心订单，因为`fooa.h`包含`foob.h`, 并且`foob.h`有 . 的前向声明`FooA`。您的代码中的一切都已正确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T14:46:42.057

在两个头文件中使用前向声明。

你知道你可以在同一行声明它吗？

在“FooB.h”中

```
class FooB{
    public:
        class FooA *fooA;
}; 
```

在“FooA.h”中

```
class FooA {
    public:
        class FooB *fooB;
}; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T14:44:54.720

由于两个类都只包含一个指针，因此您不需要包含另一个标头。一个前向声明就可以了。

任何实际使用其他类的代码**都**需要标头，但这应该在 cpp 文件中。

# java - 使用 Transformer 写入 xml 文件（JAVA）时的内存使用情况

> ID：11971411
> 
> 赞同：0
> 
> 时间：2012-08-15T14:41:05.773
> 
> 标签：java, xml-serialization

我的应用程序在 32 位 JVM 中运行，并且内存消耗量很大。它在 Windows 上运行。

我正在使用 Transformer 类将 Doc 文档写入文件，与此处解释的内容非常相似：http: [//docs.oracle.com/javase/tutorial/jaxp/xslt/writingDom.html](http://docs.oracle.com/javase/tutorial/jaxp/xslt/writingDom.html)

似乎在调用转换方法时，内存使用量（>100MB）急剧增加。仅当尝试编写包含亚洲字符 (UTF8) 的文档时才会发生这种情况。该文档的大小 <100KB。

由于应用程序接近 2GB 进程地址空间这一事实，应用程序会因该内存分配而崩溃。

这是 Transformer 的已知行为吗？有没有办法在不使用转换器的情况下将文档写入文件，这样我就可以克服这个问题？

谢谢，萨尔

# xcode - 在具有许多子菜单和屏幕的应用程序中使用 Storyboard 是否方便？

> ID：11971413
> 
> 赞同：1
> 
> 时间：2012-08-15T14:41:08.223
> 
> 标签：xcode, ipad, storyboard

我需要为 iPad 做一个应用程序，我是一个初学者。我读过很多关于 Objective-C、iPod 和 iPad 的应用程序、XCODE 的书。我的应用程序将有一个主菜单（有 15 个选项/按钮）。每个选项都会有一个带有 5-10 个选项的子菜单/弹出窗口的屏幕。每个选项都可能有一个带有表格、图形等的最后一个屏幕，或者可能是另一个子菜单。如您所见，我将有很多屏幕。我读过故事板。我做了一些例子，确实让一些事情变得非常简单，但是在这些例子中，我只有 5-6 个屏幕，每个屏幕都不同......在我的应用程序中，我想制作一个屏幕并重用它在其他选项中，因为某些屏幕将非常相似，只是具有不同的选项（如菜单/弹出窗口、表格、图形等）。我的问题是，使用 Storyboard 是否方便？提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:17:19.013

我认为故事板很棒（只是刚刚开始使用它们）。我很想使用多个故事板创建您的应用程序。例如 MainMenu 故事板，然后为该屏幕上的 5-10 个选项中的每一个提供单独的故事板。

虽然您可以为每个屏幕“模板”使用 XIB，但我认为这不会减少您需要编写的代码。是的，您可以在多个屏幕上重复使用 XIB，但是您可以通过使用带有一堆孤立 viewController 的故事板来做同样的事情。

您的第三个选择当然是全部用代码编写；例如，编写一个演示引擎，它可以根据存储在数据库或 plist 等中的数据随意创建和显示视图控制器和视图。如果您计划创建多个将从这种方法中受益的应用程序，这是一个不错的选择。

# android-source - 为 Desire S 构建 AOSP

> ID：11971414
> 
> 赞同：3
> 
> 时间：2012-08-15T14:41:12.257
> 
> 标签：android-source, drivers, cyanogenmod, android

[我从http://source.android.com](http://source.android.com)下载了 AOSP并按照上述步骤构建系统。在代码的构建过程中得到了system.img等img文件。然后我快速启动系统 img 到我的 android htc 渴望的设备。它安装成功。但是当设备重新启动时，它会卡在 htc logo 中。我还尝试以许多不同的方式安装 imgs。没有任何效果。

由于 cyanogenmod 和其他定制 rom 设计公司已经为 htc 的愿望等创建了定制 rom，我想知道他们是如何解决这个问题的。这可能是什么原因。相同的代码在模拟器中运行良好。我看到 AOSP 仅适用于 Google Nexus 设备。对于其他设备，为了使其正常工作，需要有驱动程序（专有二进制文件）。真的吗？如果是这样，我如何使用 AOSP 创建自己的自定义 rom？如何获取 Desire S 或除 google 设备之外的任何其他设备的专有二进制文件？

**此 AOSP 是否仅在 Nexsus 设备中本地工作？如果是这样，它作为开源有什么用？

非常感谢对此的任何积极答复。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:53:22.067

即使是谷歌手机，您也需要专有驱动程序。需要专有驱动程序才能在低级别上使用硬件。在更高级别上，您有硬件抽象层。Android 的 Linux 内核可与此 HAL 一起使用，但不能与这些专有驱动程序一起使用。Android 的所有其他层（以及您在 AOSP 下的意思）都使用 Linux 内核。

因此，对于每个设备，您都需要专有驱动程序，这些驱动程序通常应该放在 AOSP 的设备或供应商目录中。只需尝试为您的手机查找驱动程序并查找如何为您的手机构建 AOSP 的说明。

# google-app-engine - 使用模型继承时，ndb.KeyProperty 可以引用基模型类吗？

> ID：11971415
> 
> 赞同：4
> 
> 时间：2012-08-15T14:41:13.400
> 
> 标签：google-app-engine, app-engine-ndb

我有一些模型共享一组公共属性，我在其他模型继承的基本模型类中定义了这些属性：

```
class BaseUser(ndb.Model):
    name = ndb.StringProperty()

class DerivedUserA(BaseUser):
    # some additional properties...

class DerivedUserB(BaseUser):
    # some additional properties... 
```

在其他一些模型中，我需要对任何`BaseUser`衍生模型的引用：

```
class MainModel(ndb.Model):
    user = ndb.KeyProperty(kind = BaseUser) 
```

但是，当我尝试`DerivedUserA`为该属性设置实体键时`MainModel.user`，GAE 会提出一个`BadValueError`声明，指出它需要一个带有 kind 的键，`BaseUser`但被赋予了`DerivedUserA`.

如果我`kind`从 my 中删除参数`MainModel`，它会起作用：

```
class MainModel(ndb.Model):
    user = ndb.KeyProperty() 
```

我可以忍受，但我宁愿检查一下，以确保我没有试图在`MainModel.user`财产中保存任何类型的实体。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T19:55:39.057

使用 PolyModel 进行数据存储继承 -> [https://developers.google.com/appengine/docs/python/ndb/polymodelclass](https://developers.google.com/appengine/docs/python/ndb/polymodelclass)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T20:33:43.870

这不起作用的原因是 kind 参数`KeyProperty()`会立即转换为字符串。
由于它只是一个验证功能，我们可以考虑修复这个问题。
如果您喜欢这个想法，您可以在跟踪器中提交功能请求：[http](http://code.google.com/p/appengine-ndb-experiment/issues/list) ://code.google.com/p/appengine-ndb-experiment/issues/list - 这将不如 PolyModel 重量级（尽管看起来PolyModel 可能就是您正在寻找的东西）。

# android - 从对话框中保存首选项

> ID：11971418
> 
> 赞同：1
> 
> 时间：2012-08-15T14:41:20.107
> 
> 标签：android, sharedpreferences, android-preferences, android-dialog

`Dialog`在我的屏幕中打开自定义项后`Preferences`，如何在`Dialog`消失后保存到该特定首选项？

```
public class Preferences extends PreferenceActivity implements OnSharedPreferenceChangeListener {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        addPreferencesFromResource(R.xml.task_preferences);

        Preference dialogPreference = (Preference) findPreference(getString(R.string.clock_font_color));
        dialogPreference.setOnPreferenceClickListener( new OnPreferenceClickListener() {
            public boolean onPreferenceClick(Preference preference) {
                dialog(); ////How save here//????
                return true;
            }
        });
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-12-22T04:26:18.837

```
SharedPreferences preferences = getPreferenceManager().getSharedPreferences(); 
preferences.edit().putString("clockfontcolor", "-9856").commit(); 
```

# cordova - 在 Phonegap 2.0.0 中抑制 PluginResult 输出

> ID：11971420
> 
> 赞同：0
> 
> 时间：2012-08-15T14:41:29.197
> 
> 标签：cordova, cordova-2.0.0

我正在使用带有联系人 API 的 Phonegap/Cordova 2.0.0。当我发出查找请求时，我会在终端上收到大量成功输出，其中包含所有找到的联系人，开头是：

> > PluginResult:toJSONString - {"status":1,"message":[{"id":

这个输出最终是数百行。

有没有办法切换 Phonegap API 的控制台输出？

更新

根据下面的评论，这将在下一个 Phonegap 版本中修复。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-17T14:49:39.290

Shaz 在 2.1 中签入默认为无日志的代码，但您可以通过调用 setVerbose 再次启用它们。

[https://github.com/apache/incubator-cordova-ios/commit/2979d14d70d5f5e67d0c42b81afab76964cdf048#CordovaLib/Classes/CDVPluginResult.m](https://github.com/apache/incubator-cordova-ios/commit/2979d14d70d5f5e67d0c42b81afab76964cdf048#CordovaLib/Classes/CDVPluginResult.m)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-31T13:32:17.150

这里同样的问题。由于这个错误，控制台尝试显示长数据，并从技术上冻结应用程序。

为什么 phonegap/cordova 没有 alpha/beta 阶段？我们都必须始终是 beta 测试人员吗？请尝试发布-stable-版本，例如2.0..

# python - Python 程序和日期时间本地化

> ID：11971423
> 
> 赞同：1
> 
> 时间：2012-08-15T14:41:45.610
> 
> 标签：python, datetime, localization

我做了一个小 Python 程序：

```
# -*- coding: utf-8 -*-
""" Program that ask for the birth date and return the day name of the birth """

from datetime import datetime

def ask_birthdate():
    """ Raw input of the birth date """
    date = raw_input("Enter your birth date (DD-MM-YYYY) : ").strip()
    return datetime.strptime(date, '%d-%m-%Y')

def birthday(date):
    """ Localized day of birth """
    return date.strftime('%A')

if __name__ == "__main__":
    date = ask_birthdate()
    print u"You was born a %s" % birthday(date) 
```

很简单，但我想翻译一下。首先是 IHM 文本（输入您的出生日期）和（您的出生日期）然后我还希望翻译当天的名称。

在文档中，我看到它应该是本地化的，但是我应该如何将程序配置为本地化？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:19:31.760

我认为您正在寻找[Locale Module](http://docs.python.org/library/locale.html)。

只需将以下行添加到您的代码中：

```
import locale

... 

locale.setlocale(locale.LC_ALL, '<desired local>')
# NOTE: using locale.setlocale(locale.LC_ALL, '') will use the machine's default locale defined in the LANG environment variable. 
```

我将 'desired local' 设置为 'de_DE' 并使用您的代码生成以下内容：

```
Enter your birth date (DD-MM-YYYY) : 15-08-2012
You was born a Mittwoch 
```

# ios - iOS UIDatePicker 因（几乎）无限循环而崩溃

> ID：11971432
> 
> 赞同：0
> 
> 时间：2012-08-15T14:41:57.630
> 
> 标签：ios, uidatepicker

我有以下代码在更改 UISwitcher 时执行：

```
if(switcher.on == YES) {
    self.pickerView.datePickerMode = UIDatePickerModeDate;
}
else {
    self.pickerView.datePickerMode = UIDatePickerModeTime;
} 
```

这会导致应用程序在模拟器中崩溃，并带有以下堆栈跟踪：

```
* thread #1: tid = 0x1f03, 0x027997dc CoreFoundation`CFNumberGetValue + 12, stop reason = EXC_BAD_ACCESS (code=2, address=0xbf7fffec)
frame #0: 0x027997dc CoreFoundation`CFNumberGetValue + 12
frame #1: 0x02843d2c CoreFoundation`-[__NSCFNumber longValue] + 76
frame #2: 0x02843ed1 CoreFoundation`-[__NSCFNumber integerValue] + 33
frame #3: 0x0a624255 UIKit`-[UIPickerViewAccessibility(SafeCategory) accessibilityContainerElements] + 99
frame #4: 0x08f61424 UIAccessibility`-[NSObject(AXPrivCategory) accessibilityElementCount] + 34
frame #5: 0x08f6135b UIAccessibility`-[NSObject(AXPrivCategory) _accessibilityResetContainerElements] + 75

...

frame #196418: 0x08f6135b UIAccessibility`-[NSObject(AXPrivCategory) _accessibilityResetContainerElements] + 75
frame #196419: 0x0a624290 UIKit`-[UIPickerViewAccessibility(SafeCategory) accessibilityContainerElements] + 158
frame #196420: 0x08f61424 UIAccessibility`-[NSObject(AXPrivCategory) accessibilityElementCount] + 34
frame #196421: 0x08f6135b UIAccessibility`-[NSObject(AXPrivCategory) _accessibilityResetContainerElements] + 75
frame #196422: 0x0a624290 UIKit`-[UIPickerViewAccessibility(SafeCategory) accessibilityContainerElements] + 158
frame #196423: 0x08f61424 UIAccessibility`-[NSObject(AXPrivCategory) accessibilityElementCount] + 34
frame #196424: 0x08f6135b UIAccessibility`-[NSObject(AXPrivCategory) _accessibilityResetContainerElements] + 75
frame #196425: 0x0a624465 UIKit`-[UIPickerViewAccessibility(SafeCategory) reloadAllComponents] + 68
frame #196426: 0x00ca8b18 UIKit`-[UIDatePickerView _updateBitsForDate:forced:andReload:animateIfNeeded:] + 611
frame #196427: 0x00ca9116 UIKit`-[UIDatePickerView _setDate:animated:forced:] + 372
frame #196428: 0x00caa13b UIKit`-[UIDatePickerView setDatePickerMode:] + 535
frame #196429: 0x00ca7669 UIKit`-[UIDatePicker setDatePickerMode:] + 51
frame #196430: 0x0005ba9b MyApp`-[RRDatePickerViewController switchChanged:] + 283 at RRDatePickerViewController.m:249
frame #196431: 0x02876e99 CoreFoundation`-[NSObject performSelector:withObject:withObject:] + 73
frame #196432: 0x00aa914e UIKit`-[UIApplication sendAction:to:from:forEvent:] + 96
frame #196433: 0x00aa90e6 UIKit`-[UIApplication sendAction:toTarget:fromSender:forEvent:] + 61
frame #196434: 0x00b4fade UIKit`-[UIControl sendAction:to:forEvent:] + 66
frame #196435: 0x00b4ffa7 UIKit`-[UIControl(Internal) _sendActionsForEvents:withEvent:] + 503
frame #196436: 0x00ca3c16 UIKit`-[_UISwitchInternalView _sendActions] + 121
frame #196437: 0x013cc85d Foundation`__NSFireDelayedPerform + 389
frame #196438: 0x02849936 CoreFoundation`__CFRUNLOOP_IS_CALLING_OUT_TO_A_TIMER_CALLBACK_FUNCTION__ + 22
frame #196439: 0x028493d7 CoreFoundation`__CFRunLoopDoTimer + 551
frame #196440: 0x027ac790 CoreFoundation`__CFRunLoopRun + 1888
frame #196441: 0x027abd84 CoreFoundation`CFRunLoopRunSpecific + 212
frame #196442: 0x027abc9b CoreFoundation`CFRunLoopRunInMode + 123
frame #196443: 0x02cf97d8 GraphicsServices`GSEventRunModal + 190
frame #196444: 0x02cf988a GraphicsServices`GSEventRun + 103
frame #196445: 0x00aa6626 UIKit`UIApplicationMain + 1163
frame #196446: 0x00002732 MyApp`main + 130 at main.m:16
frame #196447: 0x000026a5 MyApp`start + 53 
```

有人对为什么会发生这种情况有任何建议吗？谢谢。

干杯，加兹。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T09:03:53.880

这似乎与这里的问题相同

[一个用于多个字段的 UIDatePicker - 设置日期时的 EXC_BAD_ACCESS](https://stackoverflow.com/questions/10538807/one-uidatepicker-for-multiple-fields-exc-bad-access-when-setting-the-date)

在 iPhone 上运行代码时不会出现此问题。

# javascript - 如何在 NodeJS 中生成像 facebook、google+ 这样的唯一 ID

> ID：11971440
> 
> 赞同：3
> 
> 时间：2012-08-15T14:42:11.727
> 
> 标签：javascript, node.js, cassandra, uuid

我正在使用 nodeJS 和 cassandra

我目前正在使用 UUID v1 作为唯一 ID

但是，我认为 uuid 太长了

我想生成像 fb 和 G+ 这样更短的数字唯一 ID

并且不必在插入之前检查 id 是否存在于数据库中

例子：

> [https://plus.google.com/104560124403688998123/posts](https://plus.google.com/104560124403688998123/posts)
> 
> 脸书/100001458264256

我正在考虑根据一些用户详细信息生成它？

有什么好主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T05:20:49.030

如果您使用 UUID 类型创建列族，它们将以二进制形式存储，并且只需要 16 个字节在磁盘上，这已经小于您想要的 20 个字节。

查看[cql 文档](http://cassandra.apache.org/doc/cql/CQL.html)，

```
CREATE COLUMNFAMILY MonkeyTypes (
    KEY uuid PRIMARY KEY,
    species text,
    alias text,
    population varint
) 
```

您可以使用数据库、[zookeeper](http://zookeeper.apache.org/)或[雪花](http://engineering.twitter.com/2010/06/announcing-snowflake.html)来生成唯一的 8 字节 ID。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-22T03:14:48.710

您可以尝试使用[flake-idgen](https://www.npmjs.com/package/flake-idgen)包来获取较短的唯一 ID。

```
var FlakeIdGen = require('flake-idgen')
var intformat = require('biguint-format')
var generator = new FlakeIdGen;
var id1 = generator.next();
var id2 = generator.next();
var id3 = intformat(id1, 'dec'); //sample : 5829986774188818434
var id4 = intformat(id2, 'hex', {prefix:'0x'}) // sample : 0x50e8461520c00003 
```

# python - 如何访问python中字典列表中的属性？

> ID：11971443
> 
> 赞同：-1
> 
> 时间：2012-08-15T14:42:21.200
> 
> 标签：python

假设我有一个字典：

```
firstdict = {"somelist":[]} 
```

我有另一个字典：

```
 seconddict = {"attribute1": "value1", "attribute2": "value2"} 
```

附加字典后

```
firstdict["somelist"].append(seconddict) 
```

我想打印“attribute1”值。尽管以下语句不起作用：

```
print firstdict["somelist"][0].attribute1 
```

如何打印/访问属性 1 的值？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T14:44:01.653

```
>>> firstdict = {"somelist":[]}
>>> seconddict = {"attribute1": "value1", "attribute2": "value2"}
>>> firstdict["somelist"].append(seconddict)
>>> print firstdict["somelist"][0]['attribute1']
value1 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:44:38.387

它是 `firstdict["somelist"][0]['attribute1']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T14:53:18.710

Python 不是 JavaScript；“attribute1”不是属性，它是字典中的键。要访问相应的值，请使用 [] 索引运算符，就像使用 firstdict 一样：

```
subdict = firstdict["somelist"][0]
print subdict["attribute1"] 
```

或者，简单地说：

```
print firstdict["somelist"][0]["attribute1"] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T14:45:37.527

```
firstdict["somelist"][0]['attribute1'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T15:12:35.960

将字典存储在字典内的列表中似乎很奇怪。如果您使用它从多个字典中收集值，请查看[此线程](https://stackoverflow.com/questions/38987/how-can-i-merge-union-two-python-dictionaries-in-a-single-expression)。

你也可以考虑嵌套字典：

```
>>>seconddict = {"key1": "value1", "key2": "value2"}
>>>firstdict = {'dict 1': seconddict}
>>> firstdict['dict 1']['key1']
'value1' 
```

# c# - 如何在 C# 中读取 XML

> ID：11971447
> 
> 赞同：0
> 
> 时间：2012-08-15T14:42:31.273
> 
> 标签：c#, xml, xmlnode

这听起来可能是一个非常基本的问题，但就是这样。我在 DOM 中加载了这个示例 XML

```
<message from="fromvalue" to="tovalue" xml:lang="en" type="chat">
   <thread>{fe422b47-9856-4404-8c35-5ff45e43ee01}</thread> 
   <body>Test buddy</body> 
   <active xmlns="http://XXXX.org/protocol/chatstates" /> 
 </message> 
```

这是我使用以下代码从请求正文收到的

```
StreamReader reader = new StreamReader ( HttpContext.Request.InputStream,        System.Text.Encoding.UTF8 );
string sXMLRequest = reader.ReadToEnd ( );
XmlDocument xmlRequest = new XmlDocument ( );
xmlRequest.LoadXml ( sXMLRequest ); 
```

现在我需要的是三个不同变量中的三件事的值

```
string bodytext = {body element inner text}
string msgfrom = {from attribute value of message element}
string msgto =   {to attribute value of message element} 
```

我正在使用 C#，任何人都可以从他们宝贵的时间中抽出几分钟来指导我，将非常感激

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T14:49:40.670

我会在这里使用 LINQ to XML - 它*更*简单：

```
XDocument doc = XDocument.Load(HttpContext.Request.InputStream);
string bodyText = (string) doc.Root.Element("body");
string fromAddress = (string) doc.Root.Attribute("from");
string toAddress = (string) doc.Root.Attribute("to"); 
```

这将为您提供`null`不存在的任何元素/属性的值。如果您对 NullReferenceException 感到满意：

```
XDocument doc = XDocument.Load(HttpContext.Request.InputStream);
string bodyText = doc.Root.Element("body").Value;
string fromAddress = doc.Root.Attribute("from").Value;
string toAddress = doc.Root.Attribute("to").Value; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T14:49:09.887

您可以使用[`XDocument`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx).NET 3.5 中引入的新 XML 解析器：

```
XDocument doc = XDocument.Parse(sXMLRequest);
string bodytext = doc.Element("message").Element("body").Value;
string msgfrom = doc.Element("message").Attribute("from").Value;
string msgto = doc.Element("message").Attribute("to").Value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:49:39.123

我更喜欢 XLINQ，但是在您的示例中：

```
XmlNode thread_node = xmlRequest.SelectSingleNode("/message/thread");
Guid thread = thread_node.InnerText;

XmlNode body_node = xmlRequest.SelectSingleNode("/message/body");
string body= body_node.InnerText; 
```

ETC...

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-08-15T14:49:55.103

在 Xml 和 C# 类之间序列化/反序列化非常容易：

[http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization](http://www.switchonthecode.com/tutorials/csharp-tutorial-xml-serialization)

您基本上创建了一个包含 Xml 的元素和属性的类，将 [XmlElement] 和 [XmlAttribute] 属性粘贴到它们上，然后使用`XmlSerializer`.

还有其他选择；您已经提到`XmlReader`需要大量工作/维护，并且通常仅用于大型文档。到目前为止，我看到的其他答案使用易于使用且不使用此类代理类的更高抽象级别的阅读器。我想这是一个偏好问题。

# smtp - 为什么我不能通过 BizTalk SMTP 适配器更改正文部分的附件名称？

> ID：11971450
> 
> 赞同：3
> 
> 时间：2012-08-15T14:42:40.040
> 
> 标签：smtp, biztalk, biztalk-2010

我正在尝试通过 BizTalk SMTP 发送端口发送消息。具体来说，我通过编排的“稍后指定”端口发送消息。我的目标是使用我选择的附件文件名将消息正文附加到已发送的电子邮件中。

但是，无论我尝试什么，附件名称仍然是“body.csv”

我试过了：

1.  带有单个部分的多部分消息 +`MIME.FileName`在此部分上设置。
2.  包含两个部分（均附加）的多部分消息 +`MIME.FileName`在两个部分上都设置（非正文部分正确具有附件名称，正文部分没有）。
3.  标准消息+`MIME.FileName`在消息上设置。

我已经在“仅附加正文部分”和“附加所有部分”的 SMTP 适配器上尝试了所有配置，但没有一个有效。

目前我有“仅附加正文部分”和一些固定文本（在发送端口上配置）用于电子邮件内容。

我读到有些人在过去版本的 BizTalk 中使用了 MIME 编码器管道，但显然这对于​​ SMTP 适配器是不必要的。其他人使用自定义管道组件来设置`MIME.FileName`我要去的地方，但如果`MIME.FileName`已经在我的编排中设置，似乎没有必要。

对于这个相对简单的问题，我是否遗漏了一些基本的东西？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-11T16:48:46.763

您可以在消息分配形状内的编排中执行此操作。使用多部分，消息将如下所示：

`Message.part(MIME.FileName) = "your file.name";`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T06:40:53.290

第二个假设工作。尝试使用助手的这段代码（对我有用）：

```
public static void SetFileName(string emailMessage,XLANGMessage message)
{
    Byte[] b = GetBytes(emailMessage);
    MemoryStream stream = new MemoryStream(b);
    IStreamFactory factory = new BinaryStreamFactory(stream);
    string partName = FileName + "." + FileType;
    message.AddPart(factory, partName);
    XLANGPart part = message[partName];
    part.SetPartProperty(typeof(MIME.FileName), partName);
}

static byte[] GetBytes(string str)
{
    byte[] bytes = new byte[str.Length * sizeof(char)];
    System.Buffer.BlockCopy(str.ToCharArray(), 0, bytes, 0, bytes.Length);
    return bytes;
} 
```

# php - PHP：错误未定义变量。使用从 php 文件到另一个 php 文件的变量

> ID：11971466
> 
> 赞同：0
> 
> 时间：2012-08-15T14:43:33.823
> 
> 标签：php

```
//this is my connection.php
<?php
$pdo = new PDO('mysql:host=localhost;dbname=test;', 'root');
$pdo->exec("SET CHARACTER SET utf8");
?>

//this is my class.php
<?php
include 'connection.php';
$stmt = $pdo->prepare(query here); //wrong part
?> 
```

问题：错误未定义 $pdo，这样做的正确方法是什么？但是当我将代码从 connection.php 传输到 class.php 时，它工作正常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:50:57.777

在上面的文件`$pdo`中声明。`global``connection.php`

检查[将变量从一个 php 包含文件传递到另一个：全局与非](https://stackoverflow.com/questions/4675932/passing-a-variable-from-one-php-include-file-to-another-global-vs-not)和将[PHP 中的变量从一个文件传递到另一个文件](https://stackoverflow.com/questions/4572062/passing-variables-in-php-from-one-file-to-another)

# c - 在 printf ( " %.*f ", a, b ) 中，如果 'a' 为负数，结果会怎样？

> ID：11971467
> 
> 赞同：1
> 
> 时间：2012-08-15T14:43:39.493
> 
> 标签：c, printf

通常当我们做类似的事情时：

```
printf ( " %.*f ", 2, 3.3 ); 
```

精度宽度设置为 2 并输出**3.30**。但是如果宽度被赋予负值怎么办，例如

```
printf ( " %.*f ", -2, 3.3 ); 
```

输出为**3.300000**，这意味着正在使用默认宽度。**那么这个-2**到底在做什么呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:51:29.783

> 取负精度，就好像省略了精度一样。

来源：C99 7.19.6.1（HTML 版本位于[http://port70.net/~nsz/c/c99/n1256.html#7.19.6.1](http://port70.net/~nsz/c/c99/n1256.html#7.19.6.1)）

或来自 POSIX（更具可读性）： http: [//pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html](http://pubs.opengroup.org/onlinepubs/9699919799/functions/printf.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T14:50:06.160

正如克里斯在上面类似评论的那样，

> 取负精度，就好像省略了精度

这是一个[参考](http://en.cppreference.com/w/cpp/io/c/fprintf)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T14:48:06.393

后期 C11 标准草案说（7.21.6.1）：

> 采用负精度参数，就好像省略了精度一样。

（是的，它是为了`fprintf`，这就是草案所说的`printf`(7.21.6.3):)

> printf 函数等效于 fprintf，其参数 stdout 置于 printf 的参数之前。

# magento - Magento v1.7 - 新订单到达后管理员无法收到电子邮件

> ID：11971473
> 
> 赞同：4
> 
> 时间：2012-08-15T14:44:01.890
> 
> 标签：magento

我希望商店管理员在新订单到达后收到电子邮件通知。

**这是我的设置** ![在此处输入图像描述](../Images/c6937d3b1441bf58fdf4f7b54e1ce887.png)

但是，它不起作用。

有没有人可以帮助我？

顺便说一句，其他电子邮件发送工作正常，因此 SMTP 服务器设置没有问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-12T08:29:42.703

邮件设置存在问题，我的建议是请您的托管公司的支持部门帮您解决问题。这是因为我不了解您的操作系统，因此无法向您发送您需要做的事情的链接。此外，支持台之前已经解决了这个问题，他们应该能够在几分钟内完成。

想象一下，您的服务器有一个 example.com 的“A”记录。当您的电子邮件发送出去时，发送给客户的电子邮件会发送到以太网上，而您的电子邮件发送给 me@example.com，服务器会说“嘿！那是给我们的！可以停在这里！并将其发送到本地邮箱。因此，出于邮件的目的，您的电子邮件服务器需要确保它不会将其转发到本地域。该设置可能非常简单，但是，在不了解您的主机的情况下，我建议您向支持人员求助。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-08-16T11:34:43.660

如果您想获取交易电子邮件的副本，

转到管理面板-> 系统-> 配置-> 销售电子邮件选项卡-> 订单-> 在选项**发送电子邮件副本**中指定您的电子邮件ID 。

这将对您有所帮助。

问候维克

# c# - 以下情况如何在 SQL 数据库中建表？

> ID：11971474
> 
> 赞同：-3
> 
> 时间：2012-08-15T14:44:01.513
> 
> 标签：c#, asp.net, sql, database, system

我正在开发一个系统来计算服装的 SMV。我面临在我的数据库中创建表的问题。我想为样式插入操作。不同的风格可以有不同数量的操作。

我已经创建了一个名为的表`StyleDetails`，其中包含`style no, account, buyer`除操作之外的其他内容。

例如，A444 号样式的操作可以如下所示：

```
join neck,
attach neck,
attch sleeve,
bottom hem...etc. 
```

如何设计我的数据库以输入相关样式的此类操作。请尽快回复。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:47:56.663

尽管您的问题不是很清楚，但我认为您应该看看物料清单（“BOM”）数据库设计的工作原理。我不确定您使用的是什么数据库平台，但有很多关于这个主题的教程。[这](http://sqlblog.com/blogs/john_paul_cook/archive/2009/11/06/bill-of-materials-the-basics.aspx)是一个。

# javascript - 设置窗口滚动动画的 CSS 值限制

> ID：11971475
> 
> 赞同：5
> 
> 时间：2012-08-15T14:44:08.237
> 
> 标签：javascript, jquery, html, css, sticky

我有一个随着用户向下滚动而滑动的 <div id='map'> 地图。然而，它似乎让地图永远滚动，永远不会让用户真正到达页面底部（有一个页脚）。

我想要做的是让 <div> 在到达另一个动态大小（高度可变） <div> 的末尾时停止滚动。这两个 <div> 并排并在同一行中。

这是我用来使正确的 div 随用户滚动而移动的 JavaScript 代码：

```
$(function() {

    var $sidebar   = $("#map"),
        $window    = $(window),
        offset     = $sidebar.offset(),
        topPadding = 15;

    $window.scroll(function() {
        if ($window.scrollTop() > offset.top) {
            $sidebar.stop().animate({
                marginTop: $window.scrollTop() - offset.top + topPadding
            });
        }
        else {
            $sidebar.stop().animate({
                marginTop: 0
            });
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:07:39.267

你不能使用`animate()`带有滚动功能的方法，它会产生冲突，因为滚动值总是会改变，而 jQuery 不能无限重复相同的动画。停止也不会解决这个问题，或者我无法做到。

我建议在陈述[中使用变体。](https://stackoverflow.com/questions/11872381/scrolltop-and-then-div-fixed/11872508#11872508)`if`

[这里不是使用动画用法的动画示例。](http://jsfiddle.net/4TfTF/14/)

**[这是使用 css 方法的相同示例。](http://jsfiddle.net/4TfTF/8/)**

```
$(window).scroll(function() {
    var scrollVal = $(this).scrollTop();
    if ( scrollVal > offset.top) {
        $sidebar.css({
           'margin-top': (($window.scrollTop() - offset.top) + topPadding) + 'px'
                       //added +'px' here to prevent old internet explorer bugs
        });
    } else {
        $sidebar.css({'margin-top':'0px'});
    }
}); 
```

注意：如果你想用 扩展你的 if 语句`else if`，不要使用`else`，它也会产生冲突。相信我，我对这个问题真的很熟悉。

**更新：**

您也可以更改计算限制的方法。我想你想修复导航，你的 html 是这样的：

```
<div class="wrapper">
    <div class="header">header</div>
    <span id="subnav">hold this</span>
</div>​ 
```

和 jQuery 计算应该是这样的： [这是工作 jsFiddle。](http://jsfiddle.net/4TfTF/26/)

```
$(document).ready(function() {
   $(window).scroll(function() {
       var headerH = $('.header').outerHeight(true);
      //this will calculate header's full height, with borders, margins, paddings
       console.log(headerH);
       var scrollVal = $(this).scrollTop();
        if ( scrollVal > headerH ) {
        //when scroll value reach to your selector
            $('#subnav').css({'position':'fixed','top' :'0px'});
        } else {
            $('#subnav').css({'position':'static','top':'0px'});
        }
    });
 });​ 
```

# mysql - 学说 2 DQL 安全性

> ID：11971477
> 
> 赞同：0
> 
> 时间：2012-08-15T14:44:23.603
> 
> 标签：mysql, sql, security, zend-framework, doctrine-orm

DQL 查询示例

```
<?php
$query = $em->createQuery('SELECT u FROM ForumUser u WHERE u.username = :name');
$query->setParameter('name', 'Bob');
$users = $query->getResult(); // array of ForumUser objects 
```

上面的示例是一个参数化查询，其中 name 设置为 Bob。当我试图审查我们项目中的代码安全性时，我想询问学说社区的成员 createQuery 是否准备了 sql 语句。

例如，将 ' OR 1=1-- 注入 'name' 参数会改变实体管理器创建的查询吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:47:46.920

Doctrine 和使用 DBAL 的最大好处之一是注射保护。它将使用准备好的语句来不允许注入。尝试将该字符串添加到参数不会导致查询更改。

我的朋友希望我纠正自己说 Doctrine 的最大好处不是它是一个 DBAL，而是一个 ORM。这是真的。

# css - 固定包装器中的绝对定位 div

> ID：11971483
> 
> 赞同：0
> 
> 时间：2012-08-15T14:44:31.273
> 
> 标签：css

我重现了我的问题的确切上下文：在[CodePen](http://codepen.io/anon/pen/karwG)和[jsFiddle](http://jsfiddle.net/7ffBF/14/)上。

它似乎按我的预期工作，但是当我将相同的样式应用于几乎相同的 DOM 时（还有一些其他元素，但这些元素没有定位并且不应该影响最终结果）我遇到了以下问题：

![在火狐中](../Images/2530a3b7eac023b5592cffa655017045.png)

![萤火虫](../Images/13cd2fcdb9ce918cca9cfaec5c269c36.png)

如你看到的。红色框以某种方式位于顶部 div 下方，即使该 div 定位为静态。我错过了什么？谢谢！

**编辑：**我正在尝试获得 CodePen 或 jsFiddle 中显示的效果。但是在我的浏览器中，绝对框不会越过固定的 div。当用萤火虫检查时（显示蓝色悬停方块的第二张图片），绝对框就在那里。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:51:19.953

这是你要找的，还是我误解了你的问题？

[http://codepen.io/simonaronsson/pen/eiAJd](http://codepen.io/simonaronsson/pen/eiAJd)

但是，据我所知 - 整个代码有点混乱。你有一个 30px 的容器，但盒子是 200x200？另外：如果您希望容器和盒子位于顶部，为什么要将它们固定在底部？很难理解你在做什么。你可能需要更好地描述你真正想要的东西。

或者也许这就是你的想法？

[http://codepen.io/simonaronsson/pen/vxuwd](http://codepen.io/simonaronsson/pen/vxuwd)

其实，我有点失落。当您详细说明时，我会尝试重写我的答案。:)

# c# - 使用带有用户名和密码的 SQL 数据库的 ASP.NET C# 实现登录

> ID：11971484
> 
> 赞同：1
> 
> 时间：2012-08-15T14:44:33.690
> 
> 标签：c#, asp.net, session, authentication

请有人可以使用数据库中的信息帮助我朝着正确的方向实现现代登录吗？

我有一个保存用户名和密码信息的 Microsoft SQL 数据库。

我希望获取用户的凭据、身份验证，然后为他们启动会话。

我知道如何使用 PHP 和最佳实践进行登录，例如`hashing`和`salting`，在登录时重新创建会话 id，但是对于 ASP.NET，Internet 让我在这方面失败了。结果将我与使用 ADO 的旧方法联系起来。

没有用于进行身份验证的内置久经考验的类，但我如何将它们与 SQL 数据库一起使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:48:26.140

这样做的标准方法有据可查，请看这里：

[http://msdn.microsoft.com/en-us/library/6e9y4s5t](http://msdn.microsoft.com/en-us/library/6e9y4s5t)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:51:52.983

内置的提供者实现了他们的数据库模式。如果你有一个现有的数据库或者想使用你自己定制的数据库模式，你将不得不推出你自己的会员提供者，这就像实现一个`MembershipProvider`接口一样简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:48:11.547

查看[成员资格简介 (MSDN)](http://msdn.microsoft.com/en-us/library/yh26yfzy.aspx)和[SqlMembershipProvider 类](http://msdn.microsoft.com/en-us/library/system.web.security.sqlmembershipprovider.aspx)。这可能会对您有所帮助。这个解决方案虽然绑定了它自己的数据库模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T14:56:59.840

你可以看看[ShoelaceMVC](https://github.com/RyannosaurusRex/Shoelace-MVC)。它使用来自 codeplex 的 CodeFirstMembership 项目为 ASP.NET MVC 应用程序实现自定义成员资格提供程序。所有的代码都在那里并且可以查看。确保您查看 ShoelaceMVC-Project 文件夹下的示例项目，因为其他项目是项目模板和 nuget 包，对您来说不是一个完整的示例。

# iphone - 在 iOS 中解析 JSON 与解析 XML

> ID：11971487
> 
> 赞同：3
> 
> 时间：2012-08-15T14:44:38.667
> 
> 标签：iphone, ios, json, xml-parsing

设想 ：

我正在开发一个解析器，用于在发出请求后从服务器发回的数据。数据格式为 JSON 或 XML。

问题：

1.  是否有任何理由选择其中一种格式而不是另一种格式？
2.  哪个更快，解析json还是解析xml？

谢谢大家。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:49:21.033

当首选 JSON 时，通常是因为它明显更短。这样可以节省传输流量，从而节省时间和电池电量（不过，这不是一件坏事吗？）。含义：即使解析 JSON 会更慢（我对此表示怀疑），无线传输期间的增益肯定会补偿解析期间任何额外的 CPU 时间。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T14:49:12.267

查看有关解析 XML 的[本教程。](http://www.raywenderlich.com/553/how-to-chose-the-best-xml-parser-for-your-iphone-project)我可能听起来固执己见，但是如果可以选择 JSON，尽管我不知道您的项目处于什么情况。在做出决定之前，我肯定会查看项目的整个架构（权衡和选择）。根据我的经验，理解 JSON 并将其与 NSDictionaries 和 NSArrays 关联起来比理解 XML 容易得多。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T14:50:35.613

这是一篇有用[的帖子](http://www.mnot.net/blog/2012/04/13/json_or_xml_just_decide)，可能会帮助您做出决定。

# design-patterns - 增强构建器 - 子类化构建器或创建构建器装饰器？

> ID：11971490
> 
> 赞同：0
> 
> 时间：2012-08-15T14:44:52.883
> 
> 标签：design-patterns

我正在设计一个新的应用程序并考虑以下问题。

* * *

**背景资料**

我将有一个名为 HouseBuilder 的构建器类来构建 House 类型的对象。构建器将提供以下方法：

*   构建屋顶（），
*   构建窗口（），
*   构建门（），
*   ETC。，
*   获取房屋（）。

在客户端代码中，我通常会像这样使用构建器类：

```
HouseBuilder builder = new HouseBuilder();
House house = builder.buildRoof().buildWindow().buildWindow().buildDoor().getHouse(); 
```

这是使用中的 Builder 设计模式的经典示例。

* * *

**问题**

在客户端代码中，我需要建造一个特定类型的房子，比如说小屋。每次我需要一个新的时，从基本的构建块（例如上面的例子）构建小屋似乎都是很多不必要的重复代码。

因此，我将创建一个新的构建器类，比如说一个 CottageBuilder，它允许这样的事情：

```
HouseBuilder builder = new CottageBuilder();
House house = builder.buildCottage().getHouse(); 
```

我不确定设计 CottageBuilder 的最佳方法是什么。想到两个选择：

*   让 CottageBuilder 成为 HouseBuilder 的子类，并在 buildCottage 方法中使用父类的方法，
*   让 CottageBuilder 接受一个 HouseBuilder 实例并在 buildCottage 方法中调用它的方法（无论如何，为了获得多态行为，我会让 CottageBuilder 子类化 HouseBuilder - 所以我会让 CottageBuilder 变成类似于 HouseBuilder 周围的装饰器）。

哪种方法更好？

我能想到的第二种方法的一个缺点是 CottageBuilder 需要依赖另一个 HouseBuilder 实例，我会让它在它的构造函数中请求依赖。然而，从客户端代码的角度来看，将 HouseBuilder 实例设置到 CottageBuilder 实例中似乎很奇怪。

* * *

请注意，我的构建器实际上并不是要构建 House 对象，而是来自不同域的对象。我决定不通过描述目标域来污染问题，而是弥补这个类比，在我看来，它非常适合原始问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T07:29:03.470

“构建器”通常通过一系列步骤构建对象，例如`HouseBuilder`您的示例中的。您`CottageBuilder`并不是真正的建筑商，而是返回特定类型房屋的“工厂”。所以我会有一个`HouseFactory`带有静态方法的类来创建不同类型的房子：

```
public class HouseFactory {
  public static House createCottage() {
    HouseBuilder builder = new HouseBuilder();
    // use builder to build cottage
    return builder.getHouse();
  }

  // more methods for other types of houses
} 
```

# asp.net - asp:Image - 中继器中的标签

> ID：11971495
> 
> 赞同：1
> 
> 时间：2012-08-15T14:45:12.493
> 
> 标签：asp.net, image, repeater

为什么第二行有效但第一行无效？我得到“服务器标签格式不正确”。我复制到第二行的 Guid 直接来自数据库。

```
< asp:Image runat="server" ImageUrl="~/Images/Avatar/Avatar.aspx?UserId=<%#DataBinder.Eval(Container.DataItem, "UserId")%>" />

< asp:Image runat="server" ImageUrl="~/Images/Avatar/Avatar.aspx?UserId=22AA736E-BD1B-4623-8E76-4769051F2E60" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:48:13.930

在ImageUrl属性的值周围*加上**单*引号。

 *```
<asp:Image runat="server" 
           ImageUrl='~/Images/Avatar/Avatar.aspx?
              UserId=<%#DataBinder.Eval(Container.DataItem, "UserId")%>' /> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:43:58.037

另一种方法是使用`String.Format(...)`.

```
<asp:TemplateField HeaderText="Avatar" SortExpression="LastName, FirstName">
    <ItemTemplate>
        <asp:Image ID="Image1" runat="server" ImageUrl='<%# String.Format("~/Images/Avatar/Avatar.aspx?UserID={0}", Eval("UserID").ToString()) %>' />
    </ItemTemplate>
</asp:TemplateField> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:49:36.173

或者试试

```
< asp:Image runat="server" ImageUrl='<%#"~/Images/Avatar/Avatar.aspx?UserId=" + DataBinder.Eval(Container.DataItem, "UserId")%>' /> 
```

你的问题是双引号。您的开场报价是双引号，因此被“UserID”上的开场报价关闭。无论如何，在数据绑定时也应该始终使用单引号。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T14:53:03.050

尝试将您打印`<%#DataBinder.Eval(Container.DataItem, "UserId")%>`在标签上。Guid 的格式化方式可能与它在数据库中的样子不完全相同。如果我没记错的话，它可能在 Guid 周围有 {}。*

# .net - 防止 .NET 检查某些程序集的代码签名证书的吊销状态

> ID：11971496
> 
> 赞同：0
> 
> 时间：2012-08-15T14:45:13.853
> 
> 标签：.net, code-access-security, code-signing-certificate, ocsp, certificate-revocation

我正在寻找一种方法来指示 .NET 运行时，它不应使用某些程序集的相应证书颁发机构在线检查代码签名证书的吊销状态。这些程序集在 IIS 下的 SharePoint 2010 网站中运行，位于安全受限的内部网络中，该内部网络无法访问 Internet，因此无法查询 CA。

我们已尝试设置 CAS 策略来强制对此代码完全信任：

```
<CodeGroup
    class="UnionCodeGroup"
    version="1"
    PermissionSetName="FullTrust"
    Name="ShareModel_Strong_Name"
    Description="This code group grants full trust for custom assemblies.">
    <IMembershipCondition
        class="StrongNameMembershipCondition"
        version="1"
        PublicKeyBlob="0024...8cd4"
        />
    </CodeGroup> 
```

此设置已部署为自定义`wss_minimaltrust.config`文件的一部分。但是，这对 CRL 检查机制没有影响。

解决此问题的正确方法是什么：其他/正确的 .NET 配置，可能在`machine.config`某些 Windows Server 2008 R2 配置中，还有什么？

# c# - 使用新语句时，UserControl 不随 MouseEvent 移动？

> ID：11971499
> 
> 赞同：0
> 
> 时间：2012-08-15T14:45:20.543
> 
> 标签：c#, wpf, user-controls

我有一个为我的 WPF 画布创建的 UserControl(CardGUI)，并且我在 UserControl 上实现了 MouseEvents，如下所示。事情是当我将 UserControl 从工具箱拖到画布上时，它工作得很好，但是当我尝试添加新控件时，CardGUI card = new CardGUI(); 在我的 MainForm 中，我无法再移动控件，而且我不知道这是为什么。

我尝试调试，但是当我单击新添加的控件时，事件仍然会被触发，但我无法移动它。

```
public void UserControl_MouseLeftButtonDown(object sender, 
                                            MouseButtonEventArgs e)
{
    if (!inDrag)
    {
        anchorPoint = e.GetPosition(null);
        CaptureMouse();
        inDrag = true;
        e.Handled = true;
    }
}

public void UserControl_MouseMove(object sender, MouseEventArgs e)
{
    if (inDrag)
    {
        currentPoint = e.GetPosition(null);       
        Canvas.SetLeft(this, 
                       Canvas.GetLeft(this) + 
                           (currentPoint.X - anchorPoint.X));
        Canvas.SetTop(this, 
                      Canvas.GetTop(this) + 
                         (currentPoint.Y - anchorPoint.Y));
        anchorPoint = currentPoint;
        e.Handled = true;
    }
}

public void UserControl_MouseLeftButtonUp(object sender, 
                                          MouseButtonEventArgs e)
{
    if (inDrag)
    {
        ReleaseMouseCapture();
        inDrag = false;
        e.Handled = true;
    }
} 
```

我将控件添加到我的主窗体中，例如：

```
 this.deckCard = new CardGUI();            
        this.deckCard.Margin = new Thickness(xDeckCoord, yDeckCoord, 0, 0);
        this.main.Children.Add(this.deckCard);
        this.deckCard.IsHitTestVisible = true;
        this.deckCard.AllowDrop = true; 
```

我认为可能是因为添加控件的方法只被调用一次，即使触发了事件，位置也不会真正更新。如果我从工具箱中拖动控件，我就没有这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:00:58.040

您将其添加到画布，但未设置任何位置或大小

尝试添加：

```
this.main.SetLeft(deckCard, 0);
this.main.SetTop(deckCard, 0); 
```

或者，如果您希望将内容自动拉伸到可用大小（您对 Margin 的使用似乎可以推断出），则可以使用 Grid

# python - Python/Scipy 集成数组

> ID：11971503
> 
> 赞同：3
> 
> 时间：2012-08-15T14:45:35.500
> 
> 标签：python, arrays, scipy, integrate

我正在尝试编写一个执行以下操作的程序：

*   从数组中获取 V 的值
*   将 V 值传递到与 E 相关的积分中
*   将积分结果输出到数组 I
*   情节 I 反对 V

这个方程看起来很糟糕，但除了 V 之外，一切都是常数。[这是方程](http://i50.tinypic.com/2hiav83.png)。方程不是很重要。

我该如何解决这个问题？我的尝试（如下所示）没有计算从文件中读取的每个 V 值的积分。

```
from scipy import integrate #integrate.quad
from numpy import *
import pylab
import datetime
import time
import os
import math

# import V
fn = 'cooltemp.dat'
V = loadtxt(fn,unpack=True,usecols=[1])

# variables
del1, del2, R, E, fE, fEeV = 1,2,1,2,1,1
e = 1.602176565*10**-19

# eqn = dint(abc)
a = E/( math.sqrt( E**2 - del1**2 ) )
b = ( E+ e*V )/( math.sqrt( ( E + e*V )**2) - del2**2)
c = fE-fEeV
d = 1/(e*R) # integration constant
eqn = a*b*c

# integrate 
result = quad(lambda E: eqn,-inf,inf)

# current
I = result*d

# plot IV curve
pylab.plot(V,I,'-r')

## customise graph
pylab.legend(['degree '+str(n),'degree '+str(q),'data'])
pylab.axis([0,max(x),0,max(y)])
pylab.xlabel('voltage (V)')
pylab.ylabel('current (A)')
tc = datetime.datetime.fromtimestamp(os.path.getmtime(fn))
pylab.title('IV curve\n'+fn+'\n'+str(tc)+'\n'+str(datetime.datetime.now()))
pylab.grid(True)
pylab.show() 
```

***更新的尝试：

```
from scipy import integrate
from numpy import *
import pylab
import datetime
import time
import os
import math

# import V
fn = 'cooltemp.dat'
V = loadtxt(fn,unpack=True,usecols=[1])
# print V

# variables
del1, del2, R, E, fE, fEeV = 1.0,2.0,1.0,2.0,1.0,1.0
e = 1.602176565*10**-19

I=[]
for n in range(len(V)):

    constant = 1/(e*R) # integration constant
    eqn = (E/( math.sqrt( E**2 - del1**2 ) ))*(( E + e*V[n] )/( math.sqrt( ( E + e*V[n] )**2) - del2**2))*(fE-fEeV)

    # integrate 
    result,error = integrate.quad(lambda E: eqn,-inf,inf)
    print result
    # current
    I.append(result*constant)

I = array(I)

# plot IV curve
pylab.plot(V,I,'-b') 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:00:14.887

你有几个问题：

您传递给的“函数”`quad`总是返回 eqn，它只是一个预先计算好的数字。您需要定义一个适当的函数，该函数将 E 的给定值作为输入并返回被积函数。此函数还需要假设 V 的固定值。假设您提供的代码计算给定 V 和 E 值的正确数量（我没有检查，只是复制粘贴）：

```
# import V
fn = 'cooltemp.dat'
V = loadtxt(fn,unpack=True,usecols=[1])
# print V

@np.vectorize
def result(x):
    def integrand(E):
        del1, del2, R, fE, fEeV = 1.0,2.0,1.0,1.0,1.0
        e = 1.602176565*10**-19
        a = E/( math.sqrt( E**2 - del1**2 ) )
        b = ( E+ e*x )/( math.sqrt( ( E + e*x )**2) - del2**2)
        c = fE-fEeV
        d = 1/(e*R) # integration constant
        return a * b * c
    return quad(integrand, -inf, inf)

I = result(V) 
```

总结：

*   `result(v)`针对 v 的固定值计算全积分（在 E 上）
*   `integrand(E)`在固定的 E（积分变量）和固定的 V 处评估被积函数（它从函数外部获取值，这就是为什么被积函数的定义嵌套在结果的定义中的原因）
*   `@np.vectorize`诀窍只是一个很好的便利功能，它允许您将 V 的数组传递到`result`. Numpy 将为您循环遍历这些值，并返回一个数组而不是一个标量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:22:55.763

您应该使用 [np.vectorize](http://docs.scipy.org/doc/numpy/reference/generated/numpy.vectorize.html) 将数组传递给方程并取回数组。例如，这将计算以下等式（如果您好奇的话，移动距离......）：

![移动距离](../Images/784012f15f8d41a792721a2e4998c37d.png)

```
 import numpy as np
from scipy.integrate import quad

spl=299792458.0    #speed of light in m/s
Mpc=3.0856E22      # Mpc in m
pc=3.0856E16       # pc in m

def HubbleTime(H0):
    return 3.0856e17/(H0/100.0)

def HubbleDist(H0):
        """returns the Hubble Distance (in Mpc) for given H_0"""
    return spl*HubbleTime(H0)/Mpc

def Integrand(z, Om, OLam):
        """ This is the E(z) function from Hogg (2000)
        Integrand(z, Om, OLam)
    """
    return ( Om*(1+z)**3 + OLam)**(-0.5)

def CosmComDist(z, H0=70, Om=0.30, OLam=0.70):
    """Gives the comoving distance at redshift z
    CosmComDist(z, H0=70, Om=0.30, OLam=0.70)
    """
    CMD=HubbleDist(H0)*quad(Integrand, 0, z, args=(Om, OLam))[0]
    return CMD

CosmComDist=np.vectorize(CosmComDist)
redshifts = np.linspace(0,1,100)
distances = CosmComDist(redshifts) 
```

# javascript - 将 jQuery JS 转换为 onclick

> ID：11971504
> 
> 赞同：0
> 
> 时间：2012-08-15T14:45:36.140
> 
> 标签：javascript, jquery, wordpress, hyperlink

> **可能重复：**
> [如何使用 WordPress 自定义链接创建可点击的电话链接？](https://stackoverflow.com/questions/11951302/how-to-create-clickable-telephone-link-with-wordpress-custom-links)

再次您好，并提前感谢您的帮助。

单击链接而不是加载时，我需要使用此 jQuery javascript。

```
<script type="text/javascript">
jQuery(document).ready(function(){

  var href_value;

  href_value = jQuery('li.phone a').attr('href');

  href_value = href_value.replace('http://','tel:');

  jQuery('li.phone a').attr('href',href_value);

});
</script> 
```

我正在使用 WordPress 自定义链接，我需要为电话号码创建一个可点击的链接。

我发现了这篇文章：“[如何使用 WordPress 自定义链接创建可点击的电话链接？](https://stackoverflow.com/questions/11951302/how-to-create-clickable-telephone-link-with-wordpress-custom-links) ”有人遇到了类似的问题，我尝试了 jQuery 脚本，但是当我点击链接时它不起作用。我收到一个错误：需要身份验证，需要用户名和密码。我相信如果它是可点击的而不是加载的，这个代码会起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:51:45.677

这是代码：

```
jQuery(document).ready(function($){
  $('li.phone a').click(function(){
    var $this = $(this);
    var href_value = $this.attr('href').replace('http://','tel:');
    $this.attr('href',href_value);
  })
}) 
```

# c++ - 点击“确定”按钮时禁止关闭 TForm

> ID：11971512
> 
> 赞同：0
> 
> 时间：2012-08-15T14:46:17.273
> 
> 标签：c++, c++builder

点击确定按钮时如何抑制关闭表单？我有以下代码：

```
void __fastcall TfrmTillegg_velg::btnOkClick(TObject *Sender)
{
    if (exp1)
        ShowMessage("Not allowed"); // Don't close form
    else if (exp2)
        ShowMessage("Not allowed"); // Don't close form
    else
    {
        // Do something here
        Close();
    }
} 
```

该项目是用 Borland c++builder 编写的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:57:19.233

如果您的意思是保持`ShowMessage`打开创建的对话框。那么据我所知，你不能这样做。显示的对话框`ShowMessage`将在您单击任何按钮时关闭。如果您想要一个不会以这种方式关闭的弹出对话框，您将需要自己创建一个自定义表单并根据您的需要控制其行为。

万一您的问题是指您的**主**表单关闭，那么您确实`Close()`在上面的按钮单击事件处理程序中进行了显式调用，这将导致您的表单在您`exp1`和`exp2`条件都为假时关闭。

```
 else     {         
        // Do something here         
        Close();     // THIS WILL CLOSE YOUR MAIN FORM.
 } 
```

# php - 贝宝 setExpressCheckout nvp 错误

> ID：11971516
> 
> 赞同：0
> 
> 时间：2012-08-15T14:46:37.790
> 
> 标签：php, curl, paypal, paypal-sandbox

我有一些代码来为 Paypal 构建请求 URL，但在某些项目上它返回以下错误（在响应转换为数组之后）：

```
Array
(
    [TIMESTAMP] => 2012-08-15T14:23:10Z
    [CORRELATIONID] => XXXXXXXXXXXXXXXXX
    [ACK] => Failure
    [VERSION] => 87.0
    [BUILD] => 3435050
    [L_ERRORCODE0] => 10413
    [L_SHORTMESSAGE0] => Transaction refused because of an invalid argument. See additional error messages for details.
    [L_LONGMESSAGE0] => The totals of the cart item amounts do not match order amounts.
    [L_SEVERITYCODE0] => Error
) 
```

这是我通过 cURL 发送的网址：

```
https://api.sandbox.paypal.com/nvp?
METHOD=setExpressCheckout
&VERSION=87.0
&USER=test_user.mysite.co.uk
&PWD=1340704478&SIGNATURE=AxhCd62FkHm-KuS.WvqjUnQ.l8WyAuePJQjoYT0C5lGiwjpcVIJHURjI
&RETURNURL=http://www.mysite.co.uk/checkout/order/confirm
&CANCELURL=http://www.mysite.co.uk/checkout/order/error
&L_PAYMENTREQUEST_0_NAME0=Likit+Snaks+&L_PAYMENTREQUEST_0_NUMBER0=LIKIT-SNAKS
&L_PAYMENTREQUEST_0_DESC0=Flavour%3A+Apple+&+Cinnamon
&L_PAYMENTREQUEST_0_AMT0=2.08
&L_PAYMENTREQUEST_0_QTY0=1
&PAYMENTREQUEST_0_CURRENCYCODE=GBP
&PAYMENTREQUEST_0_ITEMAMT=2.08
&PAYMENTREQUEST_0_SHIPPINGAMT=3.65
&PAYMENTREQUEST_0_TAXAMT=0.52
&PAYMENTREQUEST_0_AMT=6.25 
```

但是总数不加起来吗？

如果有帮助，这里是构建 url 的 php：

```
private function buildRequestItemsURL()
{

    $this->db->select("bi_id, prod_id, bi_psc_id, prod_title, prod_sku, bi_price, bi_qty, basket_delivery");
    $query = $this->db->get_where("basket_views", array("basket_session" => session_id()));

    $i = 0;
    $total = 0;
    $url = "";

    foreach($query->result() as $row)
    {

        $row->options = "";

        if($i==0)
        {

            if(number_format($row->basket_delivery, 2) == 0.00)
            {

                header("location: http://www.mysite.co.uk/checkout/basket");

            }
            else
            {

                $delivery = $row->basket_delivery;

            }

        }

        $this->db->select("opt_1_name AS Colour, opt_2_name AS Size, opt_3_name AS Flavour, opt_4_name AS Material, opt_5_name AS Style");
        $this->db->where("psc_id", $row->bi_psc_id);
        $query = $this->db->get("product_stock_view bio", 1);

        foreach($query->first_row() as $key => $value)
        {

                $row->options .= (!is_null($value)) ? "{$key}: {$value}, " : "";                

        }
        $row->bi_price = number_format($row->bi_price * 0.8, 2);
        $row->options = substr($row->options, 0, -2);
        $url .= "&L_PAYMENTREQUEST_0_NAME{$i}={$row->prod_title}&L_PAYMENTREQUEST_0_NUMBER{$i}={$row->prod_sku}&L_PAYMENTREQUEST_0_DESC{$i}={$row->options}&L_PAYMENTREQUEST_0_AMT{$i}={$row->bi_price}&L_PAYMENTREQUEST_0_QTY{$i}={$row->bi_qty}";

        $total += (($row->bi_price)*$row->bi_qty);
        ++$i;

    }

    $itemTotal = $total;
    $total += $delivery;
    $total += ($itemTotal * 0.25);

    $total = number_format($total, 2);
    $itemTotal = number_format($itemTotal, 2);
    $vat = $total - $itemTotal - $delivery;
    $vat = number_format($vat, 2);

    $url .= "&PAYMENTREQUEST_0_CURRENCYCODE=GBP&PAYMENTREQUEST_0_ITEMAMT={$itemTotal}&PAYMENTREQUEST_0_SHIPPINGAMT={$delivery}&PAYMENTREQUEST_0_TAXAMT={$vat}&PAYMENTREQUEST_0_AMT=".$total;

    $url = urlencode($url);
    $url = str_replace("%3F", "?", $url);
    $url = str_replace("%26", "&", $url);
    $url = str_replace("%3D", "=", $url);

    return $url;

}

$url = "?METHOD=setExpressCheckout&VERSION=87.0&USER=user.mysite.co.uk&PWD=1340704478&SIGNATURE=AxhCd62FkHm-KuS.WvqjUnQ.l8WyAuePJQjoYT0C5lGiwjpcVIJHURjI&RETURNURL=http://www.mysite.co.uk/checkout/order/confirm&CANCELURL=http://www.mysite.co.uk/checkout/order/error";      
$url .= $this->buildRequestItemsURL();
$url = "https://api.sandbox.paypal.com/nvp".$url; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:58:56.293

问题是产品描述中的 &。我更改了代码，以便将产品属性单独编码为 $url 字符串，从而删除 &。这是新的 buildRequestItemsURL 函数代码：

```
private function buildRequestItemsURL()
{

    $this->db->select("bi_id, prod_id, bi_psc_id, prod_title, prod_sku, bi_price, bi_qty, basket_delivery");
    $query = $this->db->get_where("basket_views", array("basket_session" => session_id()));

    foreach($query->result() as $row)
    {

        $row->prod_title = urlencode($row->prod_title);
        $row->prod_sku = urlencode($row->prod_sku);

    }

    $i = 0;
    $total = 0;
    $url = "";

    foreach($query->result() as $row)
    {

        $row->options = "";

        if($i==0)
        {

            if(number_format($row->basket_delivery, 2) == 0.00)
            {

                header("location: http://www.crowstonstack.co.uk/checkout/basket");

            }
            else
            {

                $delivery = $row->basket_delivery;

            }

        }

        $this->db->select("opt_1_name AS Colour, opt_2_name AS Size, opt_3_name AS Flavour, opt_4_name AS Material, opt_5_name AS Style");
        $this->db->where("psc_id", $row->bi_psc_id);
        $query = $this->db->get("product_stock_view bio", 1);

        foreach($query->first_row() as $key => $value)
        {

                $row->options .= (!is_null($value)) ? urlencode("{$key}: {$value}, ") : "";             

        }
        $row->bi_price = number_format($row->bi_price * 0.8, 2);
        $row->options = substr($row->options, 0, -2);
        $row->prod_title = str_replace("&", "%26", $row->prod_title);
        $url .= "&L_PAYMENTREQUEST_0_NAME{$i}={$row->prod_title}&L_PAYMENTREQUEST_0_NUMBER{$i}={$row->prod_sku}&L_PAYMENTREQUEST_0_DESC{$i}={$row->options}&L_PAYMENTREQUEST_0_AMT{$i}={$row->bi_price}&L_PAYMENTREQUEST_0_QTY{$i}={$row->bi_qty}";

        $total += (($row->bi_price)*$row->bi_qty);
        ++$i;

    }

    $itemTotal = $total;
    $total += $delivery;
    $total += ($itemTotal * 0.25);

    $total = number_format($total, 2);
    $itemTotal = number_format($itemTotal, 2);
    $vat = $total - $itemTotal - $delivery;
    $vat = number_format($vat, 2);

    $url .= "&PAYMENTREQUEST_0_CURRENCYCODE=GBP&PAYMENTREQUEST_0_ITEMAMT={$itemTotal}&PAYMENTREQUEST_0_SHIPPINGAMT={$delivery}&PAYMENTREQUEST_0_TAXAMT={$vat}&PAYMENTREQUEST_0_AMT=".$total;

    return $url;

} 
```

# extjs4.1 - Ext.Element.scrollIntoView 似乎不适用于 vbox 布局的 flex-ed 组件

> ID：11971522
> 
> 赞同：2
> 
> 时间：2012-08-15T14:46:45.537
> 
> 标签：extjs4.1

ExtJS 4.1.1。

我有一个面板`layout: { type: 'vbox', align: 'stretch' }`。里面是一个布局为`{type: 'anchor', anchor: '100% 100%'}`and的容器`flex: 3`。容器内部是一个普通面板（包含 HTML），带有`autoScroll: true`.

从 UI 滚动效果很好。但是，为结果的 div 传入 Element 的调用`scrollIntoView`无效。

我注意到 div 确实有 overflow-x/y: auto。然而，它有一个巨大的数字（2241px）的高度属性，我怀疑这是这个问题的根源。

这是怎么回事？

# emacs - Defun 在 lambda 中使用可选参数？

> ID：11971523
> 
> 赞同：1
> 
> 时间：2012-08-15T14:46:49.600
> 
> 标签：emacs, lambda

我想在 lambda 中使用可选参数调用 defun：

```
(global-set-key (kbd "M-S-v") 
                (lambda ()
                  (interactive) (bk-cleans-text nil 2))) 
```

该功能独立工作：

```
(bk-cleans-text nil 2) 
```

但是当在 lambda 内部调用时，它会抱怨`cond`：

```
(defun bk-cleans-text (&optional killIt ParsSepBy)
  (interactive)

      (cond 
       ((= 1 ParsSepBy)
        (setq Find "\n+")
        (setq Replace "\n"))
       ((= 2 ParsSepBy)
        (setq Find "\n\n+")
        (setq Replace "\n\n"))
       (t
        (setq Find "\n+")
        (setq Replace "")))

      (message "F: %s, R: %s" Find Replace)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:02:32.037

问题出在您选择的组合键上。我用了另一个，它奏效了。

# ruby-on-rails - 查找：哈希的所有条件

> ID：11971524
> 
> 赞同：0
> 
> 时间：2012-08-15T14:46:51.020
> 
> 标签：ruby-on-rails

在我的数据库中，我有一个表“审计”，其中包含一个名为“更改”的字段，它以哈希的形式存储数据。

我想检索具有以下条件的所有审核：

```
- auditable_type = 'Expression'
- action = 'destroy'
- changes = :EXP_SUBMISSION_FK =>'9999992642' #note that this field stores hash values

@expression_history_deleted = Audit.find(:all, :conditions => ["auditable_type =? AND action = ? AND changes = ?",'Expression', 'destroy' , { :EXP_SUBMISSION_FK =>'9999992642'} ]) 
```

上面的代码什么也不返回。

如果我删除条件中的“更改”，使其如下所示，我会得到一个条目列表：

```
@expression_history_deleted = Audit.find(:all, :conditions => ["auditable_type =? AND action = ?",'Expression', 'destroy'])

   <% @expression_history_deleted.each do |test| %>
    <%= test.changes['EXP_SUBMISSION_FK'] %> ---displays the value
    <% end %> 
```

我的问题是如何执行搜索并设置哈希值的条件。

```
**** 
```

我正在使用“acts_as_audited”，它将哈希格式的所有更改存储在“审计”表中。

```
**** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:11:31.170

我假设您正在使用 ActiveRecord 中的序列化功能？

不幸的是，我认为在 SQL 级别上搜索它并不容易。显然可以提取所有记录并在 Ruby 中处理搜索，但这并不理想。

我建议将您需要搜索的任何内容从序列化列中移到它自己的列中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:15:42.667

如果您使用 ActiveRecord 序列化宏，那么您可以转储包含列`changes`和单独的结构，如“audible_type: Expression”。尝试在该列上执行一系列全文搜索，工作就完成了。但更可取的方法是将这些数据提取到真正的数据库级列中

# c# - 简单查询，需要帮助替换一些文本

> ID：11971525
> 
> 赞同：0
> 
> 时间：2012-08-15T14:46:53.633
> 
> 标签：c#

我已经登录，我的大多数用户都输入以下类型的用户名“mydomain\Y98765”以进入我们的网站。我最近升级了我们的网站，不再需要他们在用户名中输入“mydomain”。我知道我需要使用 replace 命令将“mydomain\”替换为“”，但是，我的服务器不断因我的尝试而崩溃。这是在用户未在 mydomain 中键入时有效的代码。

```
UserManager Usermanager = new UserManager();

UserData userdata = Usermanager.Login(UserName.Text, Password.Text, "DC=my,DC=domain,DC=co,DC=uk"); 
```

这是我尝试过的，但会使服务器崩溃。有人可以帮忙吗

```
string username = UserName.Replace("mydomain\\","");
UserData userdata = Usermanager.Login(username, Password.Text, "DC=my,DC=domain,DC=co,DC=uk"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:03:01.490

您的替换代码不起作用的原因是您实际上并未使用 Username 控件的文本。您正在尝试在控件本身上调用 replace ，这没有任何效果。要更正此问题，您必须将代码更改为：

```
string username = UserName.Text.Replace(@"mydomain\",""); 
```

检查字符串是否包含“mydomain\”是不必要的。如果字符串不包含“mydomain\”，则替换不会对字符串执行任何操作，并且无论哪种方式都不会真正提高效率。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:00:18.117

要解决您的第二个问题，请尝试：

```
string username = (UserName.Text.Contains("mydomain\\")) ? UserName.Text.Replace("mydomain\\","") : UserName.Text;
UserData userdata = Usermanager.Login(username, Password.Text, "DC=my,DC=domain,DC=co,DC=uk"); 
```

# php - 交叉编译 PHP

> ID：11971527
> 
> 赞同：14
> 
> 时间：2012-08-15T14:47:02.530
> 
> 标签：php, linux, embedded, cross-compiling

我已经下载了 PHP 5.4.0 源代码，将其解压缩并移到源文件夹中。

我做了一个配置：

```
./configure --build=x86_64-unknown-linux-gnu --host=arm-linux-uclibcgnueabi --prefix=/usr/arm/www CC="arm-linux-uclibcgnueabi-gcc --sysroot=/toolchains/gnu_cortex-a9_tools/"  --disable-libxml --disable-dom  --without-iconv --without-openssl --disable-simplexml --disable-xml --disable-xmlreader --disable-xmlwriter --without-pear --without-sqlite3 --disable-pdo --without-pdo-sqlite --disable-phar  --with-config-file-path=/etc/ 
```

其次是

```
make 
```

没有错误，一切运行良好。接下来我进行make安装。

```
make install 
```

再次一切正常。我将它移动到目标平台并运行

```
/usr/arm/www/bin/php -v
PHP 5.4.0 (cli) (built: Aug 15 2012 16:07:41) 
Copyright (c) 1997-2012 The PHP Group
Zend Engine v2.4.0, Copyright (c) 1998-2012 Zend Technologies 
```

我用我的网络服务器直接用 php 测试了一个简单的主页。

```
<?php echo "hello" ?>
# php index.php
hello 
```

它按预期工作。接下来我测试：

```
<?php
$output = shell_exec('ls -lart');
echo "<pre>$output</pre>";
?> 
```

哦不~

```
# php shell.php 

Segmentation fault 
```

我测试了另一个脚本：

```
#!/bin/php
<?php

echo "hello";
$handle = fopen("info.txt", "r");
echo $handle;
?> 
```

结果相同：

```
# php index.php 
helloSegmentation fault 
```

我有 php.ini 吗？

```
# /usr/arm/www/bin/php --ini
Configuration File (php.ini) Path: /etc/
Loaded Configuration File:         /etc/php.ini 
```

是的，并且没有禁用的功能。测试 strace /usr/arm/www/bin/php index.php

```
lstat("/srv/www/info.txt", {st_mode=S_IFREG|0644, st_size=20, ...}) = 0
open("/srv/www/info.txt", O_RDONLY)     = 3
fstat(3, {st_mode=S_IFREG|0644, st_size=20, ...}) = 0
lseek(3, 10, SEEK_CUR)                  = 0
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
+++ killed by SIGSEGV +++ 
```

文件 info.txt 存在并且它有读/写的权限。

测试 strace /usr/arm/www/bin/php shell.php

```
fcntl64(3, F_GETFL)                     = 0 (flags O_RDONLY)
ioctl(3, SNDCTL_TMR_TIMEBASE or TCGETS, 0x7e31fddc) = -1 EINVAL (Invalid argument)
vfork()                                 = 3324
close(4)                                = 0
fstat(3, {st_mode=S_IFIFO|0600, st_size=0, ...}) = 0
read(3, "total 24\n-rw-rw-r--    1 1001    "..., 8192) = 468
read(3, ""..., 8192)                    = 0
--- SIGCHLD (Child exited) @ 0 (0) ---
close(3)                                = 0
wait4(3324, [{WIFEXITED(s) && WEXITSTATUS(s) == 0}], 0, NULL) = 3324
--- SIGSEGV (Segmentation fault) @ 0 (0) ---
+++ killed by SIGSEGV +++ 
```

如果我通过 gdb 运行 index.php，它会给我：

```
Starting program: /usr/arm/www/bin/php index.php
hello
Program received signal SIGSEGV, Segmentation fault.
zend_do_fcall_common_helper_SPEC (execute_data=0x2ac7a040) at /home/maiden/Downloads/php-5.4.0/Zend/zend.h:391
391 /home/maiden/Downloads/php-5.4.0/Zend/zend.h: No such file or directory.
    in /home/maiden/Downloads/php-5.4.0/Zend/zend.h 
```

gdb 从 shell.php 给我这个 启动程序：/usr/arm/www/bin/php shell.php

```
Program received signal SIGSEGV, Segmentation fault.

zend_do_fcall_common_helper_SPEC (execute_data=0x2ab76040) at /home/maiden/Downloads/php-5.4.0/Zend/zend.h:391
391 in /home/maiden/Downloads/php-5.4.0/Zend/zend.h 
```

zend.h 位于 /usr/arm/www/include/php/Zend/ 显然在交叉编译期间出现了问题。我错过了什么？我没有找到任何配置标志来更正此问题，并且创建指向所需位置的符号链接会删除 gdb 输出，但 php 仍然存在段错误。

谢谢你的帮助！

**更新：**

```
# valgrind php test.php
==2181== Memcheck, a memory error detector
==2181== Copyright (C) 2002-2012, and GNU GPL'd, by Julian Seward et al.
==2181== Using Valgrind-3.8.0 and LibVEX; rerun with -h for copyright info
==2181== Command: php test.php
==2181==
==2181== Conditional jump or move depends on uninitialised value(s)
==2181==    at 0x4004EC8: ??? (in /lib/ld-uClibc-0.9.30-nptl.so)
==2181==
==2181== Invalid read of size 4
==2181==    at 0x4004D48: _dl_get_ready_to_run (in /lib/ld-uClibc-0.9.30-nptl.so)
==2181==  Address 0x7d4cc304 is just below the stack ptr.  To suppress, use: --workaround-gcc296-bugs=yes
==2181==
==2181== Invalid read of size 4
==2181==    at 0x48C348C: __uClibc_main (in /lib/libuClibc-0.9.30-nptl.so)
==2181==  Address 0x7d4cc554 is just below the stack ptr.  To suppress, use: --workaround-gcc296-bugs=yes
==2181==
==2181== Invalid write of size 4
==2181==    at 0x233010: __eqdf2 (ieee754-df.S:1120)
==2181==  Address 0x7d4cb0bc is just below the stack ptr.  To suppress, use: --workaround-gcc296-bugs=yes
==2181==
Warning: shell_exec(): Unable to execute 'ls -lart' in /test.php on line 3
==2181== Invalid read of size 4
==2181==    at 0x1FF1AC: zend_do_fcall_common_helper_SPEC (zend.h:391)
==2181==    by 0x1F3D17: execute (zend_vm_execute.h:410)
==2181==    by 0x18B217: zend_execute_scripts (zend.c:1279)
==2181==    by 0x1365BB: php_execute_script (main.c:2473)
==2181==    by 0x22B52B: do_cli (php_cli.c:988)
==2181==    by 0x22BD4B: main (php_cli.c:1364)
==2181==  Address 0x8 is not stack'd, malloc'd or (recently) free'd
==2181==
Segmentation fault 
```

**更新2**

使用 memcheck 重新运行 valgrind，得到的输出与以前大致相同，但这是新的：

```
php: can't resolve symbol '__libc_freeres' 
```

**更新3**

虽然 valgrind 让我失望了，但我继续使用 gdb，我在目标系统上创建了文件夹 /home/maiden/..etc 并复制了我的 php/include 文件夹的内容并重新运行 gdb。现在我收到此错误消息：

```
(gdb) run index.php 
Starting program: /bin/php index.php
hello
Program received signal SIGSEGV, Segmentation fault.
zend_do_fcall_common_helper_SPEC (execute_data=0x2ab34040) at /home/maiden/Downloads/php-5.4.5/Zend/zend.h:391
warning: Source file is more recent than executable.
391     return --pz->refcount__gc; 
```

这与 Sixeightzero 昨天在评论中所写的非常相似。我现在已经尝试过 PHP 版本 5.3.5、5.4.0、5.4.5 全部相同的错误。

该主题已关闭！:( 继续：[https](https://serverfault.com/questions/418521/cross-compile-php) ://serverfault.com/questions/418521/cross-compile-php [已关闭] 现在开始：[使用 UCLIBC 交叉编译 PHP](https://stackoverflow.com/questions/12004567/cross-compile-php-with-uclibc)

# script# - Script# 是否适用于 Visual Studio 2012？

> ID：11971530
> 
> 赞同：0
> 
> 时间：2012-08-15T14:47:07.323
> 
> 标签：script#

我用谷歌搜索了一下以找到答案，但没有成功。

我正在为一个使用 Visual Studio 2012（目前是 RC）开发的新项目开发框架。我对 Script# 感到非常兴奋，以至于我在 VS 2012 中尝试了它。“扩展和更新”工具提供了它，所以我想，很酷，只需使用它......但是当我尝试添加一个新的 JavaScript 项目页面（或任何其他 Script# 项目）：

![在此处输入图像描述](../Images/11e46a737ed54fe95996a84f39b3d585.png)

这是我尝试添加“jQuery Page Script”项目时的结果：

![在此处输入图像描述](../Images/89b3af25cd508a1d6e8bd710547955de.png)

我还尝试重新安装 Script# - 没有成功。

难道我做错了什么？Script# 准备好用于 VS 2012 了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T17:39:56.273

这很奇怪。一个简单的问题，大概你已经看过了 - 包是否存在于安装 vs 扩展的位置。如果不是，那么这意味着 VS 一开始就没有正确安装扩展。

但是，看起来扩展已添加，至少就模板而言。

似乎失败的是添加 nuget 包，当您实例化项目模板时会发生这种情况......您可以尝试手动添加 ScriptSharp、ScriptSharp.Lib.HTML 和 ScriptSharp.Lib.jQuery 包，看看是否 a)让您继续前进，并且b）这背后的nuget包管理器是否存在问题？

它绝对应该适用于 VS2012。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-21T12:31:58.657

问题的根源似乎在以下方面： 1\. 创建任何 S# 项目类型 2\. 检查解决方案资源管理器中的 Assembly Reference 部分是否有“mscorlib”，它将被遗漏。3\. 所以没有找到像 GlobalMethods 这样的属性。

我注意到，如果您卸载项目然后重新加载（解决方案资源管理器的上下文操作），则引用存在正确的“mscorlib”（S# 之一，来自安装 NuGet 包的路径）。

我想知道在第一种情况下是否可以引用“mscorlib”？我还注意到，没有像以前的项目模板（版本 0.7.5.x 之前）那样直接引用“mscorlib”。

# iphone - 带有 UITableView 的表单

> ID：11971531
> 
> 赞同：3
> 
> 时间：2012-08-15T14:47:08.413
> 
> 标签：iphone, ios, uitableview

我正在使用 UITableView 创建一个表单，我希望当我单击行的任何部分时，将焦点放在文本字段上，以便我可以在上面写字。现在要专注于文本字段（黄色空间），我只需单击文本字段（见图）。名称是标题（不可编辑） ![在此处输入图像描述](../Images/d60cf1869c876f89ef7a19248e26562a.png)

非常感谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T14:54:11.383

假设您有一个名为 textField 的文本`myTextField`字段，您希望在选择表中的第一行时将其作为焦点。

在您的`didSelectRowAtIndexPath:`方法中执行此操作

```
if (indexPath.row == 0) {
    [myTextField becomeFirstResponder];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:53:59.050

在`-didSelectRowAtIndexPath`该行中，调用`[correspondingTextField becomeFirstResponder]`；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:01:05.980

您可以在 didselectrow 中将文本框设置为“becomefirstreponder”，以防您在表格视图中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T15:01:33.907

如果您正确设置了委托，这是当用户单击任何行时触发的委托方法。 `- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath`

因此，在此方法中，您将使用 becomeFirstResponder 方法来获取焦点。

`[yourTextField becomeFirstResponder ];`

# c# - 用于在另一个线程中运行函数的 C# 泛型

> ID：11971534
> 
> 赞同：0
> 
> 时间：2012-08-15T14:47:28.173
> 
> 标签：c#, multithreading, generics

我有一些用于在后台线程中运行方法的通用函数。除了正常的线程同步问题之外，这里是否存在任何危险？

```
 public static void ThreadRunReturn<TReturn, TArgument>(Func<TArgument, TReturn> func, TArgument arg, bool background = true)
    {
        Thread th = new Thread(unused => func(arg));
        th.IsBackground = background;
        th.Start(th);
    }
    public static void ThreadRunReturn<TReturn, TArgument1, TArgument2>(Func<TArgument1, TArgument2, TReturn> func, TArgument1 arg1, TArgument2 arg2, bool background = true)
    {
        Thread th = new Thread(unused => func(arg1, arg2));
        th.IsBackground = background;
        th.Start(th);
    }

    public static void ThreadRun<TArgument>(Action<TArgument> action, TArgument arg, bool background = true)
    {
        Thread th = new Thread(unused => action(arg));
        th.IsBackground = background;
        th.Start(th);
    }
    public static void ThreadRun<TArgument1, TArgument2>(Action<TArgument1, TArgument2> action, TArgument1 arg1, TArgument2 arg2, bool background = true)
    {
        Thread th = new Thread(unused => action(arg1, arg2));
        th.IsBackground = background;
        th.Start(th);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:54:24.003

后台线程不会使应用程序保持活动状态。如果您有长时间运行的后台进程正在运行并且您的应用程序终止，它不会等待这些后台线程完成 - 它会杀死它们。只是要记住的事情。

# windows - 在 Windows 批处理中编写脚本

> ID：11971537
> 
> 赞同：0
> 
> 时间：2012-08-15T14:47:37.250
> 
> 标签：windows, batch-file

我有一个非常简单的批处理文件，它基本上是检查是否设置了环境变量，然后尝试设置它。它没有正确设置变量，而且我对批处理文件一般都很陌生，所以我对我正在编写的脚本有一些一般性的问题。任何见解将不胜感激。这是我的问题。

1.  在第 15 行，如果我不知道目录的全名怎么办？即，如果我只知道“口哨”是其中的一部分，并且想检查它是否 == 到 DIR 怎么办？
2.  在第 16 行和第 19 行，我想说如果我在“whistle-1.0.0”中，我知道 BELFRAMEWORK_HOME 变量应该设置为它上面的 1 个目录。我尝试使用 '%DIR%..\' 来执行此操作，但这似乎没有效果。如何将 BELFRAMEWORK_HOME 设置为 'whistle-1.0.0' 上方的 1 个目录？
3.  在第 17 行和第 20 行中，不打印 BELFRAMEWORK_HOME 变量。我不明白为什么，因为它与第 10 行和第 12 行的形式相同，它们按预期回显了变量。为什么 BELFRAMEWORK_HOME 不回显？
4.  最后一件事，有没有什么好的在线资源来学习更多关于这种类型的脚本？

谢谢！

```
1@echo off
2
3if not defined JAVA_OPTS (
4    set JAVA_OPTS=-Xmx1024m -Dderby.stream.error.field=org.openbel.framework.common.enums.DatabaseType.NULL_OUTPUT_STREAM
5) else (
6    set JAVA_OPTS=%JAVA_OPTS% -Dderby.stream.error.field=org.openbel.framework.common.enums.DatabaseType.NULL_OUTPUT_STREAM
7)
8
9set DIR=%CD%
10echo "DIR/CD : %DIR%"
11set DIR=%~dp0
12echo "DIR/~dp0 : %DIR%"
13
14if not defined BELFRAMEWORK_HOME (
15  if "%DIR%"=="whistle-1.0.0" (
16      set BELFRAMEWORK_HOME=%DIR%\..\
17      echo "DIR == whistle, BELFRAMEWORK_HOME is now: %BELFRAMEWORK_HOME%"
18  ) else (
19      set BELFRAMEWORK_HOME=%DIR%\..\
20      echo "DIR != whistle, BELFRAMEWORK_HOME is now: %BELFRAMEWORK_HOME%"
21    )
22)
23
24set WHISTLE_HOME=%~dp0
25java %JAVA_OPTS% -jar %WHISTLE_HOME%\whistle-1.0.0.jar %* 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T17:28:47.040

哦，一个价格的 4 个问题 :-)

**1）**我相信你想要`C:\folder\xxxxWHISTLExxxx\`匹配的东西，但不是`C:\xxxxWHISTLExxxx\folder\`. 如果是这种情况，那么您将需要将 FINDSTR 与正则表达式一起使用，以确保最后一个目录与 WHISTLE 匹配。搜索必须不区分大小写。

您不想要 FINDSTR 输出。您只想知道是否找到了字符串。如果未找到（错误）则返回 1，如果找到（成功）则返回 0。

```
echo %DIR% | findstr /irc:"whistle[^\\]*[\\]*$" >nul && (
  rem Code for success (string found)
)
  rem Code for failure (string not found)
) 
```

**2）**如果你想要尾随反斜杠，那么你可以使用

```
for %%A in ("%DIR%\.") do set "BELFRAMEWORK_HOME=%%~dpA" 
```

如果您不想要尾随反斜杠，请使用

```
for %%A in ("%DIR%\..") do set "BELFRAMEWORK_HOME=%%~fA" 
```

**3)**你遇到了新批量用户的经典绊脚石。%BELFRAMEWORK_HOME% 在解析行时展开，整个 IF 语句，包括带括号的代码块，被解析为一个语句。所以扩展值是在执行 IF 语句之前存在的值。

您可以通过使用延迟扩展来解决问题。

```
@echo off
setlocal enableDelayedExpansion
set var=BEFORE
(
   set var=AFTER
   echo within block normal expansion = %var%
   echo within block delayed expansion = !var!
)
echo after block normal expansion = %var% 
```

上面的结果是

```
within block normal expansion = BEFORE
within block delayed expansion = AFTER
after block normal expansion = AFTER 
```

**4)**这是我最喜欢的批处理脚本网站

*   [http://dostips.com](http://dostips.com)
*   [http://judago.webs.com](http://judago.webs.com)
*   [http://robvanderwoude.com/batchfiles.php](http://robvanderwoude.com/batchfiles.php)
*   [http://ss64.com/nt/syntax.html](http://ss64.com/nt/syntax.html)或[http://ss64.com/nt/](http://ss64.com/nt/)

# image - matlab心电图直方图

> ID：11971538
> 
> 赞同：0
> 
> 时间：2012-08-15T14:47:46.207
> 
> 标签：image, matlab

我想问如何找到心电图图像的直方图？由于我的程序给出了以下错误：

```
Function IMHIST expected its first input, I or X, to be two-dimensional.

Error in ==> imhist>parse_inputs at 216
iptcheckinput(a, {'double','uint8','logical','uint16','int16','single'}, ...

Error in ==> imhist at 57
[a, n, isScaled, top, map] = parse_inputs(varargin{:}); 
```

我的程序是：

```
Im1 = imread('pic1.jpg');Im = im2double(Im1);figure,imhist(Im) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:52:39.127

最有可能的是，图像存储为 RGB。因此，您必须将其转换为灰度：

```
Im1 = imread('pic1.jpg');
Im = im2double(Im1);
Im = rgb2gray(Im); %# convert to grayscale
figure,imhist(Im) 
```

# vba - Word VBA - 通过 doc 运行并使用 excel 表替换文本

> ID：11971540
> 
> 赞同：0
> 
> 时间：2012-08-15T14:47:49.597
> 
> 标签：vba, ms-word

我正在尝试创建一个执行以下操作的宏：

浏览文档并查找格式为## 的字符串。我要查找的项目是数字，因此它们将始终为##014、##054 等。如果找到包含##...的字符串，则需要在我的文档中搜索excel 工作表CodesNew.xls。如果它在 A 列中找到匹配的字符串，则需要将 word 文档中的字符串替换为 B 列中的值。现在到了棘手的部分！该值需要作为合并字段输入。

我现在只有搜索 Word 文档并替换它。

```
Selection.Find.ClearFormatting
Selection.Find.Replacement.ClearFormatting
With Selection.Find
   .Text = "##*"
   .Replacement.Text = "KDKKD"
   .Forward = True
   .Format = False
   .MatchCase = False
   .MatchWholeWord = False
   .MatchWildcards = True
   .MatchSoundsLike = False
   .MatchAllWordForms = False
End With
Selection.Find.Execute Replace:=wdReplaceAll 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:31:30.337

你可以试试这个。您需要通过 WOrd VBA 编辑器中的工具->引用来引用 Microsoft ActiveX 数据对象库，将任何路径、文档和工作表名称修复为您需要的名称，并添加您自己的错误检查。如果您实际使用 .xlsx 来存储代码，则需要更改 OLE DB 提供程序名称

```
Sub replaceWithNamesFromExcel()
' Alter this as needed
Const strMatch As String = "##[0-9]{1,}"
Dim bOpened As Boolean
Dim connXL As ADODB.Connection
Dim rsXL As ADODB.Recordset
Dim rng1 As Word.Range
Dim rng2 As Word.Range
Set connXL = New ADODB.Connection
With connXL
  ' Fix the path in here to be the one you need
  .ConnectionString = "Provider=Microsoft.Jet.OLEDB.4.0;Data Source=C:\mypath\test.xls;Extended Properties=""Excel 8.0;HDR=No;IMEX=1"";"""
  .Open
End With
Set rsXL = New ADODB.Recordset
Set rsXL.ActiveConnection = connXL
Set rng1 = ActiveDocument.Content
With rng1.Find
  .ClearFormatting
  .Replacement.ClearFormatting
  .Text = strMatch
  .Forward = True
  .Format = False
  .MatchCase = False
  .MatchWholeWord = False
  .MatchWildcards = True
  .MatchSoundsLike = False
  .MatchAllWordForms = False
  While .Execute
    Set rng2 = rng1.Duplicate
    rsXL.Open "SELECT F2 FROM [CodeNew$] WHERE F1 = '" & rng2.Text & "'"
    If Not rsXL.EOF Then
      rng2.Fields.Add Range:=rng2, _
        Type:=WdFieldType.wdFieldEmpty, _
        Text:="MERGEFIELD """ & rsXL.Fields(0).Value & """", _
        preserveformatting:=False
    End If
    rsXL.Close
    Set rng2 = Nothing
  Wend
End With
Set rng1 = Nothing
Set rsXL = Nothing
connXL.Close
Set connXL = Nothing
End Sub 
```

为了合并评论...

我相信评论中描述的 OP 的问题可能是由于将 .xls 文件直接放在 c:\ 下，这可能导致权限问题，和/或没有更改 .Connectionstring 行以反映 .xls 的实际位置文件。但这很难说。

# java - 在 Android 中使用 Timer.scheduleAtFixedRate()

> ID：11971544
> 
> 赞同：0
> 
> 时间：2012-08-15T14:47:57.517
> 
> 标签：java, android, timer

在我的 Android 应用程序中，无论手机是否处于活动状态，我都需要每分钟执行一些代码。

（对于那些好奇的人，这个应用程序是为一个个人项目设计的，一个“会说话”的时钟，它需要检查每分钟是否有相应的声音文件可以播放。这不是我打算向世界发布的东西，所以电池没有考虑因素。）

我目前的方法是用来`Timer.scheduleAtFixedRate()`安排任务。

每当我查看应用程序并偶尔与其交互以防止屏幕空白时，这似乎都有效，但如果手机关闭屏幕以节省电量，我的通话似乎是偶尔发生的。

我尝试将间隔设置为每 30 秒一次，但即便如此，我似乎错过了几分钟。在 Android 上使用 Timer 是否有具体注意事项？有没有更好的方法来实现我所需要的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:54:32.760

问题：您是否 100% 绝对确定您需要每分钟都这样做？在我看来，你会像疯了一样占用电池，并且会让不少用户不满意。

但是如果你回答`yes`这个问题：在你的活动暂停后，系统不能保证它上面的任何东西（包括你的任务）都会继续运行；这样，一旦系统需要几兆字节来执行任何操作，它就会终止您的活动并停止您的计时器。

您应该在服务中实现计时器/任务。服务被系统杀死的可能性要小得多，您可能会问系统是否需要杀死它以尽快重新创建它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:53:21.210

您是否尝试过使用`AlarmManager`，即使手机处于待机模式或关机状态，这也可以让您每隔 X 时间执行一项任务

[这](http://developer.android.com/reference/android/app/AlarmManager.html)是它的文档

如果你想要一个使用 AlarmManager 的好例子，[这里](https://stackoverflow.com/questions/4459058/alarm-manager-example)是……如果手机关机，这个例子不起作用，但如果你愿意，你可以很容易地启用它

# c# - 在 C# 中的页面处理期间会话是否会过期

> ID：11971546
> 
> 赞同：8
> 
> 时间：2012-08-15T14:47:59.990
> 
> 标签：c#, asp.net, .net

我正在尝试解决在回发期间会话 id 似乎神秘地清除的问题。我确定该值正在设置中，并且我的代码中没有其他地方可以清除该会话。此外，我将会话 id 的值存储在页面的视图状态中。在回发期间，视图状态为空，这实质上意味着当将值分配给视图状态时，会话变量为空。是否有可能在代码执行期间，会话对象因超时而被清除？

所以让我们说如果我有以下代码。

```
if (session["id"] == null)                                        :line1
{                                                                 :line2
   session["id"] = // Generate some unique id                     :line3 
}                                                                 :line4

viewstate["id"] = session["id"];                                  :line5 
```

理论上是否有可能即使第 1 行中的 session["id"] 不为空，但由于超时，第 5 行为空。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T18:06:12.990

我不得不说不。我刚刚创建了一个站点并将会话超时设置为 1（分钟）

```
<system.web>
    <compilation debug="true" targetFramework="4.0" />
  <sessionState timeout="1"></sessionState>
</system.web> 
```

然后在页面加载中添加了一个网页

```
 protected void Page_Load(object sender, EventArgs e)
    {
        Session["Test"] = "Tester";

        //Should be longer than the 1 minute session timeout
        Thread.Sleep(120001);

        Response.Write(String.Format("Session[\"Test\"] = {0}", Session["Test"]));
    } 
```

我在 Cassini VS 调试器和 IIS 7 asp.net 4 上进行了测试，在每次测试中，页面都使用 Session["Test"] = Tester 加载。我还尝试在睡眠期间手动回收应用程序池并得到相同的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T14:06:07.707

这是我的代码，它工作正常......

```
protected void Page_Load(object sender, EventArgs e)
        {
            if (Session["id"] == null)
            {
                Session["id"] = "abc";
            }
            ViewState["id"] = Session["id"];
            Label1.Text = ViewState["id"].ToString();
            ViewState["id"] = Session["id"].ToString();
            Label1.Text += ViewState["id"].ToString();
        } 
```

将“会话”更改为“会话”，将“视图状态”更改为“视图状态”

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T17:52:10.087

不，因为如果发生超时，您将永远无法到达第 5 行。程序、服务等将停止运行。

# wpf - 如何在 WPF 中找到任意字形的确切大小？

> ID：11971547
> 
> 赞同：2
> 
> 时间：2012-08-15T14:48:00.587
> 
> 标签：wpf, fonts, size, height, glyph

我需要找到任意字体中每个字符的确切大小。

字体是使用[GlyphTypeface](http://msdn.microsoft.com/en-us/library/system.windows.media.glyphtypeface.aspx)类加载的。

问题是我只能使用 AdvanceWidths 属性直接访问字形的宽度，但每个字符的高度都是相同的，并且它被设置为[Height](http://msdn.microsoft.com/en-us/library/system.windows.media.glyphtypeface.height.aspx)属性。

似乎可以使用 Baseline、Height、XHeight、BottomSideBearings 和 TopSideBearings 属性的组合来计算单个字符的高度，但是没有关于所有这些值的真正含义的文档。整个字体的基线、高度和 XHeight 值是恒定的，关于其他两个 - BottomSideBearings 和 TopSideBearings - 我找不到它们的含义。

一般来说，是否有任何信息可以从任意字体计算单个字形的大小？（只有“TTF”文件，或者可以从中加载任何其他 GlyphTypeface）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-25T12:31:12.777

经过一番研究，找到了计算字符大小的正确方法：

```
var typeface = new GlyphTypeface(new Uri(fontpath));
var character = 'W';
var charIndex = typeface.CharacterToGlyphMap[character];

var width = typeface.AdvanceWidths[charIndex];
var height = typeface.Height - typeface.TopSideBearings[charIndex]
                             - typeface.BottomSideBearings[charIndex]; 
```

这将给出 em 中的字符大小 - 要找到实际大小，它需要乘以字体大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T15:15:27.127

您也许可以获得[GlyphTypeface.GetGlyphOutline](http://msdn.microsoft.com/en-us/library/system.windows.media.geometry.bounds)方法返回的几何[边界：](http://msdn.microsoft.com/en-us/library/system.windows.media.glyphtypeface.getglyphoutline.aspx)

```
GlyphTypeface typeface = new GlyphTypeface(new Uri(@"C:\Windows\Fonts\SegoeUI.ttf"));
ushort glyphIndex = typeface.CharacterToGlyphMap['W'];
double emSize = 14d;
Geometry outline = typeface.GetGlyphOutline(glyphIndex, emSize, 0d);
Size size = outline.Bounds.Size; 
```

# php - 调用执行查询的函数时未定义的变量

> ID：11971548
> 
> 赞同：0
> 
> 时间：2012-08-15T14:48:04.590
> 
> 标签：php

> **可能重复：**
> [PHP：“注意：未定义的变量”和“注意：未定义的索引”](https://stackoverflow.com/questions/4261133/php-notice-undefined-variable-and-notice-undefined-index)

这一定很简单……

此脚本调用 db_prcislo() 函数。

```
<?php 
  require_once "kniznica/vyk/uzivatel_vyk.php"; db_prcislo();
  echo '<select name="problem_cislo">';
  while($row = mysql_fetch_array($vysledok)){
   echo "<option value='".$row['problem_cislo']."'>".$row['problem_cislo']."</option>";} 
  echo "</select>";
?> 
```

这是 db_prcislo() 函数

```
function db_prcislo() {
$poziadavka = "SELECT problem_cislo FROM problem_cislo";
$vysledok = mysql_query($poziadavka);
return $vysledok;} 
```

然而，我得到了未定义的变量。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:50:57.517

发生错误是因为您尝试`$vysledok`在`while()`循环中使用该变量，但您从未分配过它。你只在你的`db_prcislo()`函数中分配了它。

对此进行更新，它应该可以工作：

```
<?php 
  require_once "kniznica/vyk/uzivatel_vyk.php";

  $vysledok = db_prcislo();
  echo '<select name="problem_cislo">';
  while($row = mysql_fetch_array($vysledok)){
   echo "<option value='".$row['problem_cislo']."'>".$row['problem_cislo']."</option>";} 
  echo "</select>";
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T14:51:03.060

您没有对 from 的返回值做任何事情`db_prcislo`。

代替

```
db_prcislo(); 
```

你应该有

```
$vysledok = db_prcislo(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:51:13.777

您必须检索函数调用的结果：

代替：

```
db_prcislo(); 
```

和：

```
$vysledok = db_prcislo(); 
```

# mysql - WHERE 子句仅 IF NOT NULL

> ID：11971554
> 
> 赞同：18
> 
> 时间：2012-08-15T14:48:20.720
> 
> 标签：mysql

我需要帮助我的`SELECT`.

我有一个可以存在的字段，`NULL`其中存储了一个外键。

```
SELECT * FROM beerImage WHERE beerBRewID = brewID AND beerBrandID = beerID <--- this can be NULL 
```

所以如果什么`NULL`都没有发生。

我如何检查是否`beerID`可以`NOT NULL`使用`"beerBrandID = beerID"`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-15T14:52:15.207

你可能需要这样的东西：

第一个例子：

```
SELECT * FROM beerImage WHERE beerBRewID = brewID AND (beerID IS NULL OR beerBrandID = beerID) 
```

第二个例子：

```
SELECT * FROM beerImage WHERE beerBRewID = brewID AND beerID IS NOT NULL AND beerBrandID = beerID 
```

第一个示例将允许您显示 beerID 为 null 的记录以及 beerBrandID 等于 beerID 的啤酒（两者）。

第二个将准确返回与 beerBrandID 相对应的啤酒（不包括 NULL beerIDs）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2018-12-04T02:49:33.340

`CASE`在 where 子句中使用 with 语句怎么样

```
WHERE
CASE WHEN  beer.id IS NOT NULL 
    THEN beer.brand_id = 12345
    ELSE TRUE
END 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T15:29:09.043

如果要包含不匹配的记录，则需要外部联接

```
SELECT beer.id AS beerID,
 beer.barrelID AS barrelID,
 beer.imageID AS imageID,
 beer.title AS title,
 beer.map AS map,
 beer.longitude AS longitude, 
 beer.latitude AS latitude, 
 brand.name AS brandName, 
 brew.type AS brewType,
 image.name AS imageName, 
 variation.name AS variationName 
FROM brand, brew, image, beer
LEFT OUTER JOIN variation ON variation.ID = beer.VariationID
WHERE beer.id = %s 
AND md5(beer.memberID) = %s 
AND beer.review = 1 
AND brand.ID = beer.brandID 
AND brew.ID = beer.brewID 
AND image.ID = beer.imageID 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T14:52:06.520

要检查 null / not null，请使用 IS NULL / IS NOT NULL

```
AND beerID IS NOT NULL 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T14:53:30.903

您可以使用“IS NULL”或“IS NOT NULL”MySQL 比较函数。

在此处阅读有关此内容的更多信息：http: [//dev.mysql.com/doc/refman/5.0/en/working-with-null.html](http://dev.mysql.com/doc/refman/5.0/en/working-with-null.html) http://dev.mysql.com/doc/refman/5.0/en/comparison -operators.html#operator_is-null

# c# - 错误 - 数据绑定方法，例如 Eval()、XPath() 和 Bind()

> ID：11971556
> 
> 赞同：4
> 
> 时间：2012-08-15T14:48:23.157
> 
> 标签：c#, asp.net, data-binding, drop-down-menu

在我的具有两个数据绑定下拉列表的详细信息视图上按下提交按钮后，我一直收到此错误。我不在代码中的任何地方使用 Eval 或 XPath，但经常使用 Bind。

```
Databinding methods such as Eval(), XPath(), and Bind() can only be used in the context of a databound control.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.InvalidOperationException: Databinding methods such as Eval(), XPath(), and Bind() can only be used in the context of a databound control.

Source Error: 

[No relevant source lines]

Source File: c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\9b1781c5\212dfe37\App_Web_newrequestform.aspx.1420f3bc.0khdma4p.0.cs    Line: 0 

Stack Trace: 

[InvalidOperationException: Databinding methods such as Eval(), XPath(), and Bind() can only be used in the context of a databound control.]
   System.Web.UI.Page.GetDataItem() +2802118
   ASP.authorized_leaverequest_newrequestform_aspx.__DataBinding__control69(Object sender, EventArgs e) in c:\Windows\Microsoft.NET\Framework\v4.0.30319\Temporary ASP.NET Files\root\9b1781c5\212dfe37\App_Web_newrequestform.aspx.1420f3bc.0khdma4p.0.cs:0
   System.Web.UI.Control.OnDataBinding(EventArgs e) +91
   System.Web.UI.WebControls.ListControl.OnDataBinding(EventArgs e) +14
   System.Web.UI.WebControls.ListControl.PerformSelect() +34
   System.Web.UI.WebControls.BaseDataBoundControl.DataBind() +74
   System.Web.UI.WebControls.BaseDataBoundControl.EnsureDataBound() +66
   System.Web.UI.WebControls.ListControl.OnPreRender(EventArgs e) +29
   System.Web.UI.Control.PreRenderRecursiveInternal() +103
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Control.PreRenderRecursiveInternal() +175
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +2496 
```

反汇编指向 ---> mov dword ptr [ebp-58h],eax

我一直在寻找这个错误好几天没有运气。我已经尝试过[WEBSWAPP](http://www.webswapp.com/categories/ASPNET2/Default.aspx)并搜索了许多论坛。请帮忙。

我正在尝试使用下拉列表让用户选择值来填充数据库。我表单中的每个字段都是一个模板并且是数据绑定的。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;
using System.Configuration;
using System.Data.SqlClient;
using System.Data;
using System.Web.Services;
using System.Web.Services.Protocols;
using AjaxControlToolkit;

namespace TimeAndAttendanceUI.Authorized.LeaveRequest
{
    public partial class newRequestForm : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
    {
        if (!IsPostBack)
            {
                DetailsView1.DataBind();
            }
        }

        protected void DetailsView1_DataBound(object sender, EventArgs e)
        {
            TextBox employeeID = (TextBox)(DetailsView1.FindControl("TextBox17"));
            DropDownList approverID = (DropDownList)(DetailsView1.FindControl("DropDownList4"));

            if (DetailsView1.CurrentMode == DetailsViewMode.Insert)
            {
                var CurrUser = "";

                Account.Login uusr = new Account.Login();
                CurrUser = uusr.User.Identity.Name.ToString().ToUpper();

                employeeID.Text = CurrUser.Substring(3, 3);

                string supusrid = "";

                DataHandler.DataHandler Dt = new DataHandler.DataHandler();
                supusrid = Dt.SelectRequestApproverForm(supusrid);

                approverID.SelectedValue = supusrid;
            }
        }

        protected void DropDownList6_SelectedIndexChanged(object sender, EventArgs e)
        {
            DropDownList lvtype = (DropDownList)(DetailsView1.FindControl("DropDownList6"));
            string selectedValue = lvtype.SelectedValue.ToString().ToUpper();
            if (selectedValue == "4 " || selectedValue == "1F")
            {
                DropDownList lvreason = (DropDownList)(DetailsView1.FindControl("DropDownList5"));
                SqlDataSource1.SelectParameters["LEAVECODE"].DefaultValue = selectedValue;

                lvreason.Visible = true;
            }

        }

        protected void Button2_Click(object sender, EventArgs e)
        {
            DetailsView1.DataSource = null;
            DetailsView1.DataBind();
        }

        protected void Button2_Click1(object sender, EventArgs e)
        {
            Button3.Visible = true;
        }

        protected void Button3_Click(object sender, EventArgs e)
        {
            DetailsView1.Visible = true;
            DetailsView1.ChangeMode(DetailsViewMode.Insert);
            if (DetailsView1.CurrentMode.Equals(DetailsViewMode.Insert))
            {
                Button3.Visible = false;
                Button4.Visible = false;
                DetailsView2.Visible = true;
                DetailsView3.Visible = true;
            }
        }

    }
} 
```

抱歉用代码轰炸。

```
 <asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">
    <asp:Label ID="HoursLabel" runat="server"></asp:Label>
    <br />
    <table class="style1">
        <tr>
            <td class="style2" colspan="2">
                <asp:DetailsView ID="DetailsView1" runat="server" 
                DataSourceID="ObjectDataSource1" DataKeyNames="bwrequestid"
                Height="29px" Width="928px" AutoGenerateRows="False" CellPadding="4" ForeColor="#333333"
                GridLines="None" Style="margin-right: 0px; text-align: left; margin-top: 0px;" 
                    ondatabound="DetailsView1_DataBound" 
                    oniteminserted="DetailsView1_ItemInserted" 
                    onitemcommand="DetailsView1_ItemCommand" >
                <AlternatingRowStyle BackColor="White" ForeColor="#284775" />
                <CommandRowStyle BackColor="#E2DED6" Font-Bold="True" />
                <EditRowStyle BackColor="#999999" />
                <FieldHeaderStyle BackColor="#E9ECF1" Font-Bold="True" Width="180px" />
                <Fields>
                    <asp:TemplateField AccessibleHeaderText="Request ID" HeaderText="Leave Request ID" Visible="False">
                        <EditItemTemplate>
                            <asp:Label ID="Label18" runat="server" Text='<%# Bind("bwrequestid") %>'></asp:Label>
                            <asp:TextBox ID="TextBox169" runat="server" Text='<%# bind("bwrequestid") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:Label ID="Label19" runat="server" Text='<%# Bind("bwrequestid") %>'></asp:Label>
                            <asp:TextBox ID="TextBox165" runat="server" Text='<%# bind("bwrequestid") %>'></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label1" runat="server" Text='<%# Bind("bwrequestid") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Employee ID" HeaderText="Employee ID" >
                        <EditItemTemplate>
                            <asp:Label ID="Label20" runat="server" Text='<%# bind("emppid") %>'></asp:Label>           
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:Label ID="Label21" runat="server" Text='<%# bind("emppid") %>'></asp:Label>
                            <asp:TextBox ID="TextBox17" runat="server" Text='<%# bind("emppid") %>' 
                               ></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label2" runat="server" Text='<%# bind("emppid") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Approver ID" HeaderText="Approver ID">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox3" runat="server" Text='<%# Bind("approverid") %>' Height="21px"
                                Width="68px"></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:DropDownList ID="DropDownList4" runat="server" style="text-transform:uppercase;" DataSourceID="SqlDataSourceApprover"
                                DataTextField="APPROVNAME" DataValueField="APPROVERID" 
                                SelectedValue='<%# Bind("approverid") %>'>
                            </asp:DropDownList>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label3" runat="server" Text='<%# Bind("approverid") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField HeaderText="Leave Type" SortExpression="reqleavecode">
                        <EditItemTemplate>
                            <asp:DropDownList ID="DropDownList7" runat="server" AppendDataBoundItems="True" 
                                AutoPostBack="True" DataSourceID="SQLLEAVECODE" 
                                style="text-transform:uppercase;" DataTextField="LEAVETYPE" 
                                DataValueField="LEAVECODE" 
                                onselectedindexchanged="DropDownList6_SelectedIndexChanged" 
                                SelectedValue='<%# BIND("REQLEAVECODE") %>' ViewStateMode="Enabled" 
                                Width="165px" Height="19px">
                                <asp:ListItem></asp:ListItem>
                            </asp:DropDownList>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:DropDownList ID="DropDownList6" runat="server" DataSourceID="SQLLEAVECODE" 
                                DataTextField="LEAVETYPE" style="text-transform:uppercase;"  DataValueField="LEAVECODE"
                                onselectedindexchanged="DropDownList6_SelectedIndexChanged" 
                                AppendDataBoundItems="True" ViewStateMode="Enabled" AutoPostBack="True" 
                                SelectedValue='<%# BIND("REQLEAVECODE") %>' Width="166px" Height="19px"><asp:ListItem></asp:ListItem>
                            </asp:DropDownList>
                            <br />
                            <asp:Label ID="Label26" runat="server" Text='<%# bind("reqleavecode") %>'></asp:Label>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label9" runat="server" Text='<%# Bind("reqleavecode") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Leave Type" HeaderText="Leave Reason" 
                        Visible="False">
                        <ItemTemplate>
                            <asp:Label ID="Label4" runat="server" Text='<%# Bind("leavetype") %>'></asp:Label>
                        </ItemTemplate>
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox4" runat="server" Text='<%# Bind("leavetype") %>' Height="21px"
                                Width="43px"></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:DropDownList ID="DropDownList5" runat="server" AppendDataBoundItems="True" 
                                AutoPostBack="True" DataSourceID="SqlDataSource1" DataTextField="REASON" 
                                DataValueField="REASON" Height="19px" 
                                onselectedindexchanged="DropDownList5_SelectedIndexChanged1" 
                                SelectedValue='<%# Bind("leavetype") %>' Width="163px">
                            </asp:DropDownList>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator1Reason" runat="server" 
                                ControlToValidate="DropDownList5" ErrorMessage="*Leave Reason Required" 
                                ForeColor="Red"></asp:RequiredFieldValidator>
                        </InsertItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="start date" HeaderText="Leave Date">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox5" runat="server" 
                                Text='<%# Bind("lstdate",  "{0:MM/dd/yyyy}") %>' Height="21px"
                                Width="72px"></asp:TextBox>
                            <asp:CalendarExtender ID="TextBox5_CalendarExtender" runat="server" Enabled="True" TargetControlID="TextBox5">
                            </asp:CalendarExtender>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox5" runat="server" 
                                Text='<%# Bind("lstdate",  "{0:MM/dd/yyyy}") %>' Height="21px"
                                Width="67px"></asp:TextBox>
                            <asp:CalendarExtender ID="TextBox5_CalendarExtender" runat="server" Enabled="True"
                                TargetControlID="TextBox5">
                            </asp:CalendarExtender>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                                ControlToValidate="TextBox5" ErrorMessage="*Leave Date Required" 
                                ForeColor="Red"></asp:RequiredFieldValidator>
                            <br />
                            <asp:CompareValidator ID="CompareValidator18" runat="server" 
                                ControlToCompare="TextBox7" ControlToValidate="TextBox5" 
                                ErrorMessage="Leave date cannot be after start date" ForeColor="Red" 
                                Operator="LessThanEqual" ToolTip="Must choose start date before end date"></asp:CompareValidator>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label7" runat="server" Text='<%# Bind("lenddate") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="lenddate" HeaderText="Return Date">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox7" runat="server" 
                                Text='<%# Bind("lenddate",  "{0:MM/dd/yyyy}") %>' Height="21px" Width="67px"></asp:TextBox>
                            <asp:CalendarExtender ID="TextBox7_CalendarExtender" runat="server" Enabled="True"
                                TargetControlID="TextBox7">
                            </asp:CalendarExtender>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox7" runat="server" 
                                Text='<%# Bind("lenddate",  "{0:MM/dd/yyyy}") %>' Height="21px"
                                Width="67px"></asp:TextBox>
                            <asp:CalendarExtender ID="TextBox7_CalendarExtender" runat="server" Enabled="True" TargetControlID="TextBox7">
                            </asp:CalendarExtender>
                            <asp:CompareValidator ID="CompareValidator1" runat="server" 
                                ControlToCompare="TextBox5" ControlToValidate="TextBox7" 
                                ErrorMessage="Return date cannot be before start date" ForeColor="Red" 
                                Operator="GreaterThanEqual"></asp:CompareValidator>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label15" runat="server" Text='<%# Bind("lsttime") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Leave Time" HeaderText="Leave Time">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox15" runat="server" Height="21px" 
                                Text='<%# Bind("lsttime") %>' ToolTip="Type 'A' or 'P' to switch AM/PM" 
                                Width="85px"></asp:TextBox>
                            <asp:MaskedEditExtender ID="TextBox15_MaskedEditExtender" runat="server" 
                                AcceptAMPM="True" CultureAMPMPlaceholder="" CultureCurrencySymbolPlaceholder="" 
                                CultureDateFormat="" CultureDatePlaceholder="" CultureDecimalPlaceholder="" 
                                CultureThousandsPlaceholder="" CultureTimePlaceholder="" Enabled="True" 
                                ErrorTooltipEnabled="True" Mask="99:99" MaskType="Time" 
                                TargetControlID="TextBox15" />
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox15" runat="server" Text='<%# Bind("lsttime") %>' Width="85px"
                                Height="22px" ToolTip="Type 'A' or 'P' to switch AM/PM"></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label8" runat="server" Text='<%# Bind("lendtime") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Return Time" HeaderText="Return Time">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox8" runat="server" Text='<%# Bind("lendtime") %>' Width="85px"></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox8" runat="server" Text='<%# Bind("lsttime") %>' Width="85px"
                                Height="22px" ToolTip="Type 'A' or 'P' to switch AM/PM"></asp:TextBox>
                            <asp:MaskedEditExtender ID="TextBox8_MaskedEditExtender" runat="server" 
                                AcceptAMPM="True" CultureAMPMPlaceholder="" CultureCurrencySymbolPlaceholder="" 
                                CultureDateFormat="" CultureDatePlaceholder="" CultureDecimalPlaceholder="" 
                                CultureThousandsPlaceholder="" CultureTimePlaceholder="" Enabled="True" 
                                ErrorTooltipEnabled="True" Mask="99:99" MaskType="Time" 
                                TargetControlID="TextBox8" />
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label10" runat="server" Text='<%# Bind("standby") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Standby" HeaderText="On Standby">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox10" runat="server" Text='<%# Bind("standby") %>' MaxLength="1" Width="21px"></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:DropDownList ID="DropDownList1" runat="server" DataSourceID="SqlDataSource10"
                                DataTextField="&quot;Y/N&quot;" DataValueField="&quot;Y/N&quot;" SelectedValue='<%# BIND("standby") %>'>
                            </asp:DropDownList>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label12" runat="server" Text='<%# Bind("rsndecline") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Reason Decline" 
                        HeaderText="Request Decline Reason" InsertVisible="False">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox12" style="text-transform:uppercase;" runat="server" Text='<%# Bind("rsndecline") %>' 
                                Visible="False"></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox12" runat="server" Text='<%# Bind("rsndecline") %>' 
                                Visible="False"></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label13" runat="server" Text='<%# Bind("status") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="Status" HeaderText="Request Status" InsertVisible="False">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox13" runat="server" Text='<%# Bind("status") %>'></asp:TextBox>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox13" runat="server" Text='<%# Bind("status") %>' Visible="False"></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label14" runat="server" Text='<%# Bind("empremarks") %>' 
                                ToolTip="Additional information pertaining to leave request"></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField AccessibleHeaderText="empremarks" HeaderText="Leave Request Remarks">
                        <EditItemTemplate>
                            <asp:TextBox ID="TextBox14" runat="server" style="text-transform:uppercase;" Text='<%# Bind("empremarks") %>' 
                                TextMode="MultiLine" Height="50px" Width="449px" 
                                ToolTip="Additional information pertaining to leave request"></asp:TextBox>
                            <asp:RequiredFieldValidator ID="RequiredFieldValidator4" runat="server" 
                                ControlToValidate="TextBox14" Display="Dynamic" Enabled="False" 
                                ErrorMessage="*Leave Remarks Required for &quot;Other&quot; selection" 
                                ForeColor="Red"></asp:RequiredFieldValidator>
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:TextBox ID="TextBox14" runat="server" style="text-transform:uppercase;" Text='<%# Bind("empremarks") %>' 
                                TextMode="MultiLine" Height="47px" Width="452px" 
                                ToolTip="Additional information pertaining to leave request."></asp:TextBox>
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Button ID="Button1" runat="server" CausesValidation="False" 
                                CommandName="Edit" Height="21px" Text="Edit" Width="65px" />
                            &nbsp; &nbsp;
                            <asp:Button ID="Button2" runat="server" CausesValidation="False" 
                                CommandName="New" Height="21px" Text="New" Width="65px" />
                            &nbsp; &nbsp;
                        </ItemTemplate>
                    </asp:TemplateField>
                    <asp:TemplateField ShowHeader="False">
                        <EditItemTemplate>
                            <asp:Button ID="Button1" runat="server" CausesValidation="True" 
                                CommandName="Update" Text="Update" />
                            &nbsp;
                            <asp:Button ID="Button2" runat="server" CausesValidation="False" 
                                CommandName="Cancel" Text="Cancel" />
                        </EditItemTemplate>
                        <InsertItemTemplate>
                            <asp:Button ID="Button1" runat="server" CommandName="Insert" 
                                Text="Submit Request" />
                            &nbsp;
                            <asp:Button ID="Button2" runat="server" CausesValidation="False" 
                                CommandName="Cancel" Height="21px" onclick="Button2_Click1" Text="Cancel" />
                        </InsertItemTemplate>
                        <ItemTemplate>
                            <asp:Label ID="Label5" runat="server" Text='<%# Bind("lstdate") %>'></asp:Label>
                        </ItemTemplate>
                    </asp:TemplateField>
                        </Fields>
                        </asp:DetailsView>
                    </td>
                </tr>
             </table>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
        ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
        SelectCommand="SELECT REASON, LEAVECODE FROM BWLEAVRSN">
    <SelectParameters>
        <asp:Parameter Name="LEAVECODE" Type="String" />
    </SelectParameters>
    </asp:SqlDataSource>

    <asp:SqlDataSource ID="SQLLEAVECODE" runat="server" 
       ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
       ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>"                
       SelectCommand="SELECT LEAVETYPE, LEAVECODE FROM BWLVTYPE ORDER BY LEAVECODE">
    </asp:SqlDataSource>

    <asp:SqlDataSource ID="SqlDataSourceApprover" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>"
        ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
        SelectCommand="SELECT APPROVERID, APPROVNAME FROM BWAPPROVER ORDER BY APPROVERID">
    </asp:SqlDataSource>

    <asp:SqlDataSource ID="SqlDataSource10" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>"
        ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
        SelectCommand="SELECT * FROM BWYNSELECT ORDER BY ALPH"></asp:SqlDataSource>

            <asp:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
            </asp:ToolkitScriptManager>
    <asp:Label ID="Label27" runat="server" ></asp:Label>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T17:06:25.640

我注意到的一件事，我怀疑在复制和粘贴中不知何故缺少的是第一个*不见了。我不认为它会编译，所以我猜你的代码中不存在。但是，值得检查。*

 *您的错误可能是`SqlDataSource`由于`TemplateField`. 将它们移到外面`DetailsView`并试一试。

**前**

```
<asp:DetailsView ....
....
<InsertItemTemplate>
    <asp:DropDownList ID="DropDownList4" runat="server" style="text-transform:uppercase;" DataSourceID="SqlDataSourceApprover"
        DataTextField="APPROVNAME" DataValueField="APPROVERID" 
        SelectedValue='<%# Bind("approverid") %>'>
    </asp:DropDownList>
    <asp:SqlDataSource ID="SqlDataSourceApprover" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>"
        ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
        SelectCommand="SELECT APPROVERID, APPROVNAME FROM BWAPPROVER ORDER BY APPROVERID">
    </asp:SqlDataSource>
</InsertItemTemplate>
....
<EditItemTemplate>
    <asp:DropDownList ID="DropDownList7" runat="server" AppendDataBoundItems="True" 
        AutoPostBack="True" DataSourceID="SQLLEAVECODE" 
        style="text-transform:uppercase;" DataTextField="LEAVETYPE" 
        DataValueField="LEAVECODE" 
        onselectedindexchanged="DropDownList6_SelectedIndexChanged" 
        SelectedValue='<%# BIND("REQLEAVECODE") %>' ViewStateMode="Enabled" 
        Width="165px" Height="19px">
        <asp:ListItem></asp:ListItem>
    </asp:DropDownList>
</EditItemTemplate>
<InsertItemTemplate>
    <asp:DropDownList ID="DropDownList6" runat="server" DataSourceID="SQLLEAVECODE" 
        DataTextField="LEAVETYPE" style="text-transform:uppercase;"  DataValueField="LEAVECODE"
        onselectedindexchanged="DropDownList6_SelectedIndexChanged" 
        AppendDataBoundItems="True" ViewStateMode="Enabled" AutoPostBack="True" 
        SelectedValue='<%# BIND("REQLEAVECODE") %>' Width="166px" Height="19px"><asp:ListItem></asp:ListItem>
    </asp:DropDownList>
    <asp:SqlDataSource ID="SQLLEAVECODE" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
        ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
        SelectCommand="SELECT LEAVETYPE, LEAVECODE FROM BWLVTYPE ORDER BY LEAVECODE">
    </asp:SqlDataSource>
    <asp:DropDownList ID="DropDownList5" runat="server" AppendDataBoundItems="True" 
        AutoPostBack="True" DataSourceID="SqlDataSource1" DataTextField="REASON" 
        DataValueField="REASON" Height="19px" 
        onselectedindexchanged="DropDownList5_SelectedIndexChanged1" 
        SelectedValue='<%# Bind("leavetype") %>' Visible="False" Width="163px">
    </asp:DropDownList>
    <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
        ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
        ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
        SelectCommand="SELECT REASON, LEAVECODE FROM BWLEAVRSN">
        <SelectParameters>
            <asp:ControlParameter ControlID="Label27" Name="LEAVECODE" PropertyName="Text" 
                Type="String" />
        </SelectParameters>
    </asp:SqlDataSource>
....
</asp:DetailsView> 
```

**后**

```
<asp:DetailsView ....
....
<InsertItemTemplate>
    <asp:DropDownList ID="DropDownList4" runat="server" style="text-transform:uppercase;" DataSourceID="SqlDataSourceApprover"
        DataTextField="APPROVNAME" DataValueField="APPROVERID" 
        SelectedValue='<%# Bind("approverid") %>'>
    </asp:DropDownList>
</InsertItemTemplate>
....
<EditItemTemplate>
    <asp:DropDownList ID="DropDownList7" runat="server" AppendDataBoundItems="True" 
        AutoPostBack="True" DataSourceID="SQLLEAVECODE" 
        style="text-transform:uppercase;" DataTextField="LEAVETYPE" 
        DataValueField="LEAVECODE" 
        onselectedindexchanged="DropDownList6_SelectedIndexChanged" 
        SelectedValue='<%# BIND("REQLEAVECODE") %>' ViewStateMode="Enabled" 
        Width="165px" Height="19px">
        <asp:ListItem></asp:ListItem>
    </asp:DropDownList>
</EditItemTemplate>
<InsertItemTemplate>
    <asp:DropDownList ID="DropDownList6" runat="server" DataSourceID="SQLLEAVECODE" 
        DataTextField="LEAVETYPE" style="text-transform:uppercase;"  DataValueField="LEAVECODE"
        onselectedindexchanged="DropDownList6_SelectedIndexChanged" 
        AppendDataBoundItems="True" ViewStateMode="Enabled" AutoPostBack="True" 
        SelectedValue='<%# BIND("REQLEAVECODE") %>' Width="166px" Height="19px"><asp:ListItem></asp:ListItem>
    </asp:DropDownList>
    <asp:DropDownList ID="DropDownList5" runat="server" AppendDataBoundItems="True" 
        AutoPostBack="True" DataSourceID="SqlDataSource1" DataTextField="REASON" 
        DataValueField="REASON" Height="19px" 
        onselectedindexchanged="DropDownList5_SelectedIndexChanged1" 
        SelectedValue='<%# Bind("leavetype") %>' Visible="False" Width="163px">
    </asp:DropDownList>
....
</asp:DetailsView>

<asp:SqlDataSource ID="SqlDataSourceApprover" runat="server" ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>"
    ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
    SelectCommand="SELECT APPROVERID, APPROVNAME FROM BWAPPROVER ORDER BY APPROVERID">
</asp:SqlDataSource>

<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
    ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
    SelectCommand="SELECT REASON, LEAVECODE FROM BWLEAVRSN">
    <SelectParameters>
        <asp:ControlParameter ControlID="Label27" Name="LEAVECODE" PropertyName="Text" 
            Type="String" />
    </SelectParameters>
</asp:SqlDataSource>

<asp:SqlDataSource ID="SQLLEAVECODE" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
    ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
    SelectCommand="SELECT LEAVETYPE, LEAVECODE FROM BWLVTYPE ORDER BY LEAVECODE">
</asp:SqlDataSource> 
```

**直接为 DropDownList5 更改 SqlDataSource**

您的错误现在可能是由*SqlDataSource1*试图`Label`从`DetailsView`. 这不可能真的发生，所以直接改变参数。

更改参数类型

```
<asp:SqlDataSource ID="SqlDataSource1" runat="server" 
    ConnectionString="<%$ ConnectionStrings:ConnectionStringEvent %>" 
    ProviderName="<%$ ConnectionStrings:ConnectionStringEvent.ProviderName %>" 
    SelectCommand="SELECT REASON, LEAVECODE FROM BWLEAVRSN">
    <SelectParameters>
        <asp:Parameter Name="LEAVECODE" Type="String" />
    </SelectParameters>
</asp:SqlDataSource> 
```

改变`Parameter`

```
protected void DropDownList6_SelectedIndexChanged(object sender, EventArgs e)
{
    DropDownList lvtype = (DropDownList)(DetailsView1.FindControl("DropDownList6"));
    string selectedValue = lvtype.SelectedValue.ToString().ToUpper();
    if (selectedValue == "4 " || selectedValue == "1F")
    {
        DropDownList lvreason = (DropDownList)(DetailsView1.FindControl("DropDownList5"));
        SqlDataSource1.SelectParameters["LEAVECODE"].DefaultValue = selectedValue;

        lvreason.Visible = true;
    }
} 
```*

# c# - 将 AzureDirectory 与 Lucene.NET 3.0.3.0 一起使用

> ID：11971565
> 
> 赞同：2
> 
> 时间：2012-08-15T14:48:46.120
> 
> 标签：c#, azure, lucene.net, azure-blob-storage

我下载 AzureDirectory 并使用最新的 Lucene.NET 根本无法编译

很多错误，比如

`'Lucene.Net.Store.Azure.AzureDirectory' does not implement inherited abstract member 'Lucene.Net.Store.Directory.Dispose(bool)'`

是否有任何新的 AzureDirectory 可以与 Lucene 3 一起使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-03T14:29:07.820

我刚刚从 Nuget 下载了 AzureDirectory 1.0.5.1 并使用 JustDecompile 对其进行了反编译。AzureDirectory 类没有实现 Lucene.net 3.0.3（发行版）中 Directory 类的几个抽象成员，例如 ListAll()。因此，AzureDirectory 1.0.5.1 无法与 Lucene.net 3.0.3 兼容

希望作者尽快升级 AzureDirectory 以支持这个新版本的 Lucene.net。与此同时，我建议自己深入研究代码......这就是我正在做的事情。虽然不确定我是否会成功，因为我不熟悉 Lucene 的内部运作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-14T23:32:15.577

感谢大家的帮助，我已经获得了带有 Lucene 3.0.3.0 和最新 Azure SDK 的 AzureDirectory。

但我有个问题。我有 4 个独特的 Lucene 索引，基本上针对不同国家的不同产品。“lucenedb-us”、“lucenedb-au”、“lucenedb-eu”等。

AzureDirectory 缓存究竟是如何工作的？

会这样：

```
azureDirectory = new AzureDirectory(cloudStorageAccount, "lucenedb-us", new RAMDirectory()); 
```

然后是：

```
azureDirectory = new AzureDirectory(cloudStorageAccount, "lucenedb-au", new RAMDirectory()); 
```

导致准确的结果，还是代码总是使用“lucenedb-us”？如果它总是使用“lucenedb-us”，删除会`new RAMDirectory()`解决问题吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T20:48:07.283

我已经使用对我有用的 Lucene.Net 3.0.3 测试了 Lucene.Net.Store.Azure 1.0.5.1。我使用了以下步骤，因此您也可以尝试：

1.  在 VS2010 中创建了一个 Windows Azure Worker 角色
2.  [使用 VS 包管理器从此处](http://nuget.org/packages/Lucene.Net.Store.Azure)包含 Lucene.NET.Store.Azure (1.0.5.1) （依赖于 Lunece.NET 2.9.4.1 及更高版本）

    2.1 PM> 安装包Lucene.Net.Store.Azure

3.  之后，我从[这里](http://nuget.org/packages/Lucene.net)将 Lucene.net 更新为 3.0.3 RC ，删除了 Lucene.net 2.9.4.1 并安装了 3.0.3 位

    3.1 PM> 安装包Lucene.Net -Pre

4.  验证我在我的项目中设置了最新的位和所有依赖项，我在我的工作角色中添加了以下测试代码：

    ```
    Lucene.Net.Util.Version version = Lucene.Net.Util.Version.LUCENE_30;
    Microsoft.WindowsAzure.CloudStorageAccount cloudAccount = Microsoft.WindowsAzure.CloudStorageAccount.FromConfigurationSetting("CloudStorageSetting");
    var cacheDirectory = new RAMDirectory();
    AzureDirectory azureDirectory = new AzureDirectory(cloudAccount, "MyCloudIndex",cacheDirectory);
    IndexWriter indexWriter = null;
    Analyzer analyzer = new StandardAnalyzer(Lucene.Net.Util.Version.LUCENE_30);
    indexWriter = new IndexWriter(azureDirectory, analyzer, IndexWriter.MaxFieldLength.UNLIMITED); 
    Document doc = new Document();
    indexWriter.AddDocument(doc);
    indexWriter.Dispose();
    azureDirectory.Dispose(); 
    ```

没有编译错误，并且该角色确实可以正常工作，因此您可以尝试相同的方法来查看。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-05T16:06:43.220

您可以使用这个 GitHub 存储库：[https](https://github.com/richorama/AzureDirectory)
://github.com/richorama/AzureDirectory 您必须自己构建它，但它可以与 Lucene 3.0.3 和 Azure Tools 2 一起正常工作。

# c# - 从绑定源创建项目列表

> ID：11971569
> 
> 赞同：1
> 
> 时间：2012-08-15T14:49:05.503
> 
> 标签：c#, database, list, data-binding, tableadapter

我有一个连接到数据库的绑定源。绑定源连接到具有 4 列的数据表。术语、定义、商店 ID 和 ID。我目前在商店 ID 上有一个过滤器，因此我可以获取当前商店的所有术语和定义。使用此绑定源，我想将术语放入列表中，并将定义放入列表中，但我不确定如何执行此操作。我看到在货币管理器中有一个 List 方法。做这个的最好方式是什么？

*过滤器在定义绑定源上*

我尝试使用表适配器，但它没有过滤商店，这是我尝试过的代码：

```
 var definitionDataTable = definitionTableAdapter.GetData();
        var termArray = (from row in definitionDataTable.AsEnumerable()
                         select row.Field<string>("Term")).ToArray();
        var definitionArray = (from row in definitionDataTable.AsEnumerable()
                               select row.Field<string>("Description")).ToArray(); 
```

非常感谢任何帮助，我只是使用数据库的新手，仅供参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:12:40.093

尝试 ：

```
var termArray = (from row in definitionDataTable.AsEnumerable() 
where row.Field<int>("StoreID")==yourID select row.Field<string>("Term")).ToArray(); 
```

# css - 字体定义的最小 CSS3 兼容性规则是什么？

> ID：11971570
> 
> 赞同：-1
> 
> 时间：2012-08-15T14:49:06.357
> 
> 标签：css, fonts, svg, truetype, eot

> **可能重复：**
> [我们如何在 LESS 类型的 CSS 中使用 @font-face](https://stackoverflow.com/questions/8338241/how-we-can-use-font-face-in-less-type-of-css)

考虑到现代浏览器及其最新版本（对于打算供将来使用的网站），这种带有 ttf、svg 和 eot 的字体定义会是 FF、IE、Chrome 和 Safari 的最佳解决方案吗？

以下是保证兼容性的最佳最小版本吗？换句话说，现在可以删除 svg 和 eot 还是 IE 仍然需要 eot 无法读取 ttf？

```
 @font-face {
            font-family: 'Somefont Regular';
            src: url('somefont.eot');
            src: local('Somefont Regular'), 
                 local('Somefont'), 
                 url('somefont.ttf') format('truetype'),
                 url('somefont.svg#font') format('svg'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:54:05.557

神奇的 Paul Irish 在 2010 年的某个时候写了一篇关于`@font-face`跨浏览器/跨平台支持 的文章。[值得一试。](http://paulirish.com/2009/bulletproof-font-face-implementation-syntax/)

另外，这里有一些我经常使用的代码：

```
@font-face {
    font-family: 'Museo';
    src: url('museo_slab_500-webfont.eot');
    src: url('museo_slab_500-webfont.eot?#iefix') format('embedded-opentype'),
         url('museo_slab_500-webfont.woff') format('woff'),
         url('museo_slab_500-webfont.ttf') format('truetype'),
         url('museo_slab_500-webfont.svg#Museo') format('svg');
    font-weight: normal;
    font-style: normal;
} 
```

# c# - 原始 .csproj 文件中的效果更改

> ID：11971573
> 
> 赞同：1
> 
> 时间：2012-08-15T14:49:16.697
> 
> 标签：c#, file-io, reference, msbuild, csproj

我正在开发一个应用程序，它将根据需要从 .csproj 文件中添加/删除项目属性和引用。

```
project.AddItem("Reference", "System.IO", globalProperties);
project.AddItem("Reference", "System.Collections.Generic", globalProperties); 
```

上面的代码添加了项目。当我打印出 project.Items 中的 ProjectItems 时，我可以看到添加的引用。当我打开需要修改的 .csproj 文件时，更改不可见（因为正在传递文件的副本）。但是，我想对正在修改的 .csproj 文件进行更改。我尝试使用“ref”关键字，但不起作用。有人可以告诉我该怎么做吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:23:48.100

你有o在你的参考之前先添加一个项目组

```
var slItemGroup = project.Xml.CreateItemGroupElement();
project.Xml.InsertAfterChild(slItemGroup, project.Xml.LastChild);
slItemGroup.AddItem("Reference", "System.IO"); 
```

并且您必须调用项目的保存方法：

```
project.Save(projectFileName); 
```

# python-twitter - Python-Twitter 中的列表类

> ID：11971574
> 
> 赞同：1
> 
> 时间：2012-08-15T14:49:19.297
> 
> 标签：python-twitter

尽管经过一天的搜索和尝试，我还是无法绕过 python-twitter 模块的 List 类。游戏的目的很简单，我想检索我之前分组到一个名为 MyStudents 的 Twitter 列表中的所有关注者（我的学生）。

我很早就陷入了这个过程，因为我什至不知道如何获取列表类的实例（我没有任何问题地标记了 Api 类的实例）：

以下

```
`list=twitter.List()` 
```

似乎发回了一个空集。也一样

```
`list=twitter.List(name='MyStudents')` 
```

和相当绝望的

```
list=twitter.List('MyStudents') 
```

谁能指出我正确的方向？

提前致谢

# razor - 有没有办法使用 ServiceTask 在控制台应用程序中托管 Razor 页面？

> ID：11971576
> 
> 赞同：3
> 
> 时间：2012-08-15T14:49:23.407
> 
> 标签：razor, markdown, servicestack

我正在尝试制作一个控制台应用程序来公开 JSON 服务。此外，我想托管 html 和 js 页面来使用它们。我将 *.md（甚至 *.htm）文件放入 Views 文件夹，但我无法访问它们。

如果我添加一个路由“.Add(”/Test")”（其中 MyMarkdownView : MarkdownViewBase），我什至会得到一个“KeyNotFoundException The given key is not present in the dictionary”。例外。

通常是否有可能，或者我应该自己提供服务（类似于[https://github.com/jimschubert/blogs/blob/master/2012-07-15/RazorExample/Main.cs](https://github.com/jimschubert/blogs/blob/master/2012-07-15/RazorExample/Main.cs)）来托管它们？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:21:17.907

您可能对使用**嵌入式资源MVC Razor 视图的**[Razor Rockstars](https://github.com/ServiceStack/ServiceStack.Examples/tree/master/src/RazorRockstars/RazorRockstars.Console)控制台应用程序感兴趣，这些视图可以使用（或不使用）现有[ServiceStack Web 服务](http://www.servicestack.net/)。

 **即示例项目显示了在 ServiceStack 中托管 MVC Razor 页面的 3 种不同方式：

1.  [服务/控制器和模型](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/RazorRockstars/RazorRockstars.Console/Views/Rockstars.cshtml)- 使用来自[Web 服务的](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/RazorRockstars/RazorRockstars.Console/AppHost.cs#L91)**响应 DTO**作为**视图模型**
***   [无服务/控制器](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/RazorRockstars/RazorRockstars.Console/TypedModelNoController.cshtml)-**直接**使用**请求 DTO**作为视图模型*   [没有服务/控制器或模型](https://github.com/ServiceStack/ServiceStack.Examples/blob/master/src/RazorRockstars/RazorRockstars.Console/NoModelNoController.cshtml)-**直接**使用**动态视图模型******

# assembly - 小内存模型和中内存模型有什么区别？

> ID：11971579
> 
> 赞同：2
> 
> 时间：2012-08-15T14:49:31.053
> 
> 标签：assembly, compiler-construction, x86

维基百科和其他资源描述了可用于 x86 平台（实模式）上的编译器的[不同内存模型。](http://en.wikipedia.org/wiki/Intel_Memory_Model#Memory_models)

我可以看到小模型和小模型之间的区别（在小模型中，代码、堆栈和数据段寄存器指向同一段，在小 CS 指向一个段，SS 和 DS 指向另一个），以及小模型之间的区别和紧凑（CS、SS 和 DS 指向三个单独的段），但小型和中型之间的区别让我难以理解，因为 CS 都指向一个段，SS 和 DS 指向另一个段。

我意识到中等模型适用于具有多个代码段的程序，但这种差异是如何实现的？它究竟改变了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:57:33.543

从 Turbo C++ 内置帮助（菜单：Options->Compiler->Code Generation...->Model，按 F1）

**小的**

将小型号用于平均尺寸的应用。

代码段和数据段不同并且不重叠，因此您有 64K 的代码和 64K 的数据和堆栈。总是使用近指针。

**中等的**

中型模型最适合在内存中保存的数据不多的大型程序。

远指针用于代码但不用于数据。因此，数据加堆栈限制为 64K，但代码最多可占用 1MB。

所以你有它。在中型模型中，您使用远指针访问代码（代码具有远调用和远返回指令并使用远函数指针进行操作）并且您可以有多个段。标准的 16 位 DOS .EXE 文件格式支持多段。在小型模型中，所有指针都在附近，因此您不能也不要更改程序中的默认代码段。

# com - 需要什么 COM 支持才能使我的自定义 DirectShow 过滤器属性页适用于运行对象表中的远程过滤器

> ID：11971589
> 
> 赞同：0
> 
> 时间：2012-08-15T14:50:04.163
> 
> 标签：com, directshow

我有一些带有自定义属性页的自定义 DirectShow 过滤器。当过滤器与属性页在同一进程中时，这些工作正常。

但是，当我使用图形编辑的“连接到远程图形”功能时，属性页不起作用。当属性页在远程过滤器上为我的私有 COM 接口执行 QueryInterface 时，QueryInterface 失败。Microsoft 过滤器的属性页（例如 EVR 视频渲染器）工作正常，因此它必须是可能的。

这可能是因为我的过滤器的私有接口只能在“进程中”工作，我需要添加额外的 COM 支持，以便这些接口可以与“进程外”过滤器一起使用。为了实现这一目标，我需要用 COM 术语做什么？

DirectShow 基类是否支持这些 COM 功能？我能否可靠地检测到过滤器何时耗尽进程并拒绝优雅地显示属性页？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T18:08:57.433

一种选择是构建代理/存根对。但另一个更简单的方法是使您的私有接口自动化兼容（派生自`IDispatch`，适用类型约束），并将其放入要附加到 DLL 的类型库中，并以通常的方式注册。代理/存根对将自动为此类接口提供，无需打扰。

DirectShow 基类不提供对此的内置支持。Windows 提供的常用 DirectShow 过滤器可能与通过进程边界传递接口不兼容，我的猜测是它取决于几年前负责各自开发的团队。例如，视频渲染器具有可以远程连接的接口。相反，音频渲染器的接口没有考虑到这种能力，它们只会使试图建立这种连接的进程之一崩溃（客户端进程，如果我没记错的话）。

# string - 如何在我的 C# 代码中创建 XML 中使用的空格字符

> ID：11971593
> 
> 赞同：1
> 
> 时间：2012-08-15T14:50:15.417
> 
> 标签：string, encoding, format

我有以下字符串，从 XML 属性中读取：

```
"OnTrak 4-3/4&#8221;, 6-3/4&#8221;, 8-1/4&#8221; / MPR" 
```

在我的 C# 应用程序中，它的格式很好，如下所示

“OnTrak 4-3/4”、6-3/4”、8-1/4” / MPR”

这是我在调试器、组合框或此论坛上看到的表单（如果我不缩进指定代码）。

我想要做的是指定与 C# 变量相同的字符串，并在应用程序运行时显示它的格式。不幸的是，我得到的只是我输入的字符串。

我试图尝试将编码从 ASCII 转换为 UTF8，但没有成功。如何正确格式化此特殊字符，在哪里可以找到这些符号的列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T14:54:34.897

这些被称为 XML 实体。使用[HttpUtility.HtmlDecode](http://msdn.microsoft.com/en-us/library/7c5fyk1k.aspx)将它们解码回您想要的纯文本。归功于[C#，函数将所有 html 特殊字符替换为普通文本字符](https://stackoverflow.com/questions/2720684/c-function-to-replace-all-html-special-characters-with-normal-text-characters)，以了解如何在 C# 中转换实体

请注意，从 ASCII 转换为 UTF8（和 Unicode 等）称为更改字符集，通常在字符串中有特定字符时完成。例如，如果你的字符串包含中文字符，你就不能使用 ASCII。在这种简单的情况下，您不需要转换字符集，因为默认情况下 C# 字符串是 Unicode 字符集，而 XML 实体是基于 Unicode 的（我相信）。

# c - 无论我做什么，snprintf() 都会给我一个分段错误

> ID：11971595
> 
> 赞同：0
> 
> 时间：2012-08-15T14:50:24.177
> 
> 标签：c, segmentation-fault, printf

所以我搜索并查看了所有的 snprintf()、sprintf() 和分段错误线程，但仍然无处...

基本上，似乎仅仅存在 snprintf() 语句就导致我的代码出现分段错误。长话短说，是的，这是做作业的……基本上，我必须填写缺失的代码，并且严格遵守命令，不要触碰已经存在的代码。这是我的代码的样子：

```
 struct dirent* dirEntryPtr;
        struct stat statBuffer;
        char *yourFileName;
        while((dirEntryPtr=readdir(dirPtr))!=NULL)
        {
            int yourFileSize;
            memset(buffer,'\0',sizeof(buffer));
            yourFileName=dirEntryPtr->d_name;
            printf("Directory entry read...%s\n",yourFileName);
            snprintf(buffer,MAX_LINE,"%s/%s",DIR_NAME,yourFileName);
            printf("Printed directory entry to buffer...\n");
            stat(buffer,&statBuffer);
            yourFileSize=statBuffer.st_size;
            printf("File size: %d\n",yourFileSize);
            if(S_ISREG(statBuffer.st_mode))
                {   
                printf("REGULAR!\n");
                snprintf(buffer,MAX_LINE,"%30s (%5d)\n",yourFileName,yourFileSize);
                printf("[%s] %30s (%5d)\n",(char *)statBuffer.st_mode,yourFileName,yourFileSize);
                }
            else
            if(S_ISDIR(statBuffer.st_mode)){
                printf("DIRECTORY!\n");
                snprintf(buffer,MAX_LINE,"%30s (dir)\n",yourFileName);
                printf("[%s] %30s (dir)\n",(char *)statBuffer.st_mode,yourFileName);}
            else
                {
                printf("OTHER!!\n");
                snprintf(buffer,MAX_LINE,"%30s (other)\n",yourFileName);
                printf("[%s] [%s] %30s (other)\n",(char*) S_ISREG(statBuffer.st_mode),(char *)statBuffer.st_mode,yourFileName);
                }                   
            printf("Writing buffer \"%s\" to client...\n",buffer);
            write(clientDescriptor,buffer,MAX_LINE);
            free(buffer);
        }
        close(clientDescriptor);
        exit(EXIT_SUCCESS); 
```

所有的 printf() 基本上都用于调试。（是的，我知道，使用 GDB，但尽管经过多年的指导，我还是无法弄清楚它是如何工作的！）

长话短说，当前目录中的文件被读取，一次一个。第一个文件通常是名为 server.c 的文件，它始终被正确识别为“常规”文件。然而，当 snprintf() 行进入时，就是分段错误发挥作用的地方。缓冲区是一个声明的字符串（我不允许触摸的部分代码，但说明是专门使用 snprintf() 将条目写入“缓冲​​区” - 事实上，我正在使用 EXACT snprintf() 命令是说明中给出的内容！）并设置为 MAX_LINE 字节（80），这是在包含的外部头文件中#defined。我之前在那里有一个 strnlen 用于调试目的，以确认 DIR_NAME 是一个字符，而 yourFileName 至少在 server.c 的情况下是 9 - 远不及 80！

我什至尝试声明一个新变量并通过 snprintf() 向它写入一个字节，但仍然出现分段错误！我已经尝试过使用和不使用 malloc() 命令。

我还应该寻找什么？？？我确实给我的教授发了电子邮件，但说实话，我必须提交这个，比如今天（几天后才到期，但我要出城了），只需要尽快指点......但根据我对C的理解，这应该可行。事实上，它实际上在昨天下午工作，但突然间它在昨晚深夜开始对我造成分段错误。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T14:56:58.163

这是一个可能的原因：

```
printf("[%s] [%s] %30s (other)\n",
       (char*) S_ISREG(statBuffer.st_mode),
       (char *)statBuffer.st_mode,
       yourFileName); 
```

这指示`printf()`：

*   将 的返回值`S_ISREG()`视为指向空终止字符串的指针，它不是并且将是`0`或`1`（基于以下从 中提取的内容`sys/stat.h`）：

    ```
    #define __S_ISTYPE(mode, mask)  (((mode) & __S_IFMT) == (mask))

    #define S_ISREG(mode)    __S_ISTYPE((mode), __S_IFREG) 
    ```

*   将`st_mode`其视为指向非空终止字符串的指针（AFAIK 的类型`st_mode`为`int`）

要修复用作`%d`格式说明符而不是`%s`OR，`S_ISREG()`您可以使用三元运算符并返回字符串文字：

```
printf("[%s] [%d] %30s (other)\n",
       S_ISREG(statBuffer.st_mode) ? "regular file" : "not regular file",
       statBuffer.st_mode,
       yourFileName); 
```

* * *

这是一个错误，几乎可以肯定是原因：

```
char buffer[MAX_LINE];

free(buffer); 
```

**只传递给`free()`动态分配的内容**：

> free 函数会导致 ptr 指向的空间被释放，也就是说，可用于进一步分配。如果 ptr 是空指针，则不会发生任何操作。否则，如果参数与 calloc、malloc 或 realloc 函数先前返回的指针不匹配，或者如果空间已通过调用 free 或 realloc 被释放，则行为未定义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:49:21.187

另一个错误：

```
write(clientDescriptor,buffer,MAX_LINE); 
```

`buffer`如果指向 NUL 终止的字符串，几乎肯定不是您想要的。这总是写入`MAX_LINE`字符并且不会在 NUL 处停止。我建议`fprintf`和朋友 ( `puts`, `fputs`) 输出字符串。

# java - 将 java.security.policy 属性设置为跨平台文件路径

> ID：11971597
> 
> 赞同：0
> 
> 时间：2012-08-15T14:50:39.867
> 
> 标签：java

我正在尝试以编程方式设置系统属性“java.security.policy”。

只要安全策略文件的路径没有空格，它就可以工作。

```
File myFileReference = new File("C:\folder_name\security.policy")
System.setProperty("java.security.policy", myFileReference.getAbsolutePath());
System.setSecurityManager(new RMISecurityManager()); 
```

如果文件路径中有空格，它们会用 %20 转义，例如“C:\folder%20name\security.policy”。

上面的代码执行得很好，但是所有的安全检查都失败了。我假设 setProperty 并没有真正找到该文件。

在 Windows 上，写入文件名而不转义空格是可行的。

```
System.setProperty("java.security.policy", "C:\\some folder\\wideopen.policy"); 
```

所以，**问题似乎是 %20 space escaping**。我可以使用正则表达式替换它，但也许这会使它只在 Windows 上工作，而在其他地方失败。另外，我不想像那样对文件路径进行硬编码。

我查看了 Java 文档中的 File 函数，该函数返回适用于任何平台的“System.setProperty”兼容路径名。我还尝试了 toURI().toString() 之类的方法，但无济于事。

有没有一种优雅的方法可以从 1 行代码中的文件引用中获取工作文件路径字符串？

编辑：这是简化的代码，我像这样构造文件

```
URL policyURL = Class.class.getResource("/sub local folder/wideopen.policy");
new File(policyURL.getFile()) 
```

我需要一个相对路径，所以我使用了 getResource 小技巧，它恰好返回一个 URL，带有讨厌的 %20 转义。既然我知道问题出在哪里，我就可以使用 URLDecoder 将它们剥离。但是有没有更不容易出错的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-02T16:44:39.273

我使用 URLDecoder 类解决了。这是我尝试做的事情的完整示例，以及使其工作的解决方案。

```
//here is the trick
URL policyFileURL = Class.class.getResource("/server/model/easy.policy");
String policyFilePath = "";
try {
    policyFilePath = URLDecoder.decode(policyFileURL.getFile(), "UTF-8");
}
catch (UnsupportedEncodingException e) {}

//here what I wanted to do (now it works)
server.activate(port, new File(policyFilePath)); 
```

# c# - wp7 isolatedstoragesettings.save 是否会再次重写整个数据

> ID：11971598
> 
> 赞同：0
> 
> 时间：2012-08-15T14:50:40.080
> 
> 标签：c#, windows-phone-7, isolatedstorage

我正在为 wp7 开发一个应用程序。我正在使用隔离存储设置来保存我的数据。

我想知道IsolatedStorageSettings.save() 是增量保存数据还是完全重写数据，即再次重写已经存储的数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:13:24.603

它将再次重写整个字典。

# c# - C# - 如何从列表中查找最频繁的日期

> ID：11971621
> 
> 赞同：2
> 
> 时间：2012-08-15T14:51:59.737
> 
> 标签：c#, linq, group-by

我好像画了一个空白。我有一个销售清单，检索如下：

```
List<Sales> sales = ctn.Sales.Where(s => s.DateSold >= request.FromDate && s.DateSold <= request.ToDate).ToList(); 
```

销售列表中的项目如下所示：

> 销售ID | 售出日期 | 产品编号 | 店铺编号

作为报告的一部分，我想向用户返回一个简单的字符串，告知他们哪一天是销售最多的一天。

所以我认为我应该做的是按天分组销售，计算每天的数量，然后评估哪个数字最高，但是我不确定该怎么做。

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T14:54:32.853

您只需对 进行分组`DateSold`，然后按计数排序（这会告诉您有多少项目属于该组）：

```
salesByDay = sales.GroupBy(s => s.DateSold).OrderBy(g => g.Count()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:56:01.330

如果您将已售商品的确切日期时间设置为 DateSold，您可能希望使用 Date 部分并按其分组

```
from sale in sales
group sale by sale.DateSold.Date into grouped
orderby grouped.Count()
select new {Date = grouped.Key, Count = grouped.Count()}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T14:58:49.820

这将为您提供销售额最多的日期：

`sales.GroupBy(x => x.DateSold).OrderByDescending(g => g.Count()).FirstOrDefault().Key;`

# java - .NET GC stuck on JNI call from finalizer()

> ID：11971624
> 
> 赞同：3
> 
> 时间：2012-08-15T14:52:05.227
> 
> 标签：java, .net, java-native-interface, clr

I have a .NET application that is using JNI to call Java code. On the .NET finalizer we call a JNI call to clean the connected resource on Java. But from time to time this JNI gets stuck. This as expected stuck the all .NET process and never releases.

Bellow you can see the thread dump we got from .NET:

NET Call Stack Function

```
.JNIEnv_.NewByteArray(JNIEnv_*, Int32) 
Bridge.NetToJava.JVMBridge.ExecutePBSCommand(Byte[], Int32, Byte[])
Bridge.Core.Internal.Pbs.Commands.PbsDispatcher.Execute(Bridge.Core.Internal.Pbs.PbsOutputStream, Bridge.Core.Internal.DispatcherObjectProxy) 
Bridge.Core.Internal.Pbs.Commands.PbsCommandsBundle.ExecuteGenericDestructCommand(Byte, Int64, Boolean) 
Bridge.Core.Internal.DispatcherObjectProxy.Dispose(Boolean) 
Bridge.Core.Internal.Transaction.Dispose(Boolean) 
Bridge.Core.Internal.DispatcherObjectProxy.Finalize() 
```

Full Call Stack Function

```
ntdll!KiFastSystemCallRet 
ntdll!NtWaitForSingleObject+c 
kernel32!WaitForSingleObjectEx+ac 
kernel32!WaitForSingleObject+12 
jvm!JVM_FindSignal+5cc49 
jvm!JVM_FindSignal+4d0be 
jvm!JVM_FindSignal+4d5fa 
jvm!JVM_FindSignal+beb8e 
jvm+115b 
jvm!JNI_GetCreatedJavaVMs+1d26 
Bridge_NetToJava+1220 
clr!MethodTable::SetObjCreateDelegate+bd 
clr!MethodTable::CallFinalizer+ca 
clr!SVR::CallFinalizer+a7 
clr!WKS::GCHeap::TraceGCSegments+239 
clr!WKS::GCHeap::TraceGCSegments+415 
clr!WKS::GCHeap::FinalizerThreadWorker+cd 
clr!Thread::DoExtraWorkForFinalizer+114 
clr!Thread::ShouldChangeAbortToUnload+101 
clr!Thread::ShouldChangeAbortToUnload+399 
clr!ManagedThreadBase_NoADTransition+35 
clr!ManagedThreadBase::FinalizerBase+f 
clr!WKS::GCHeap::FinalizerThreadStart+10c 
clr!Thread::intermediateThreadProc+4b 
kernel32!BaseThreadStart+34 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:31:24.127

I have no idea whether .NET finalizers are equally bad idea to Java finalizers, but using a potentially (dead)locking code (i see Win32 condition call at the very bottom) from anything like finalizer (regardless of the platform) is definitely a bad idea. You need to clean your native code of any potential locking, or have an emergency brake timeout at the level of .NET

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:27:30.057

As I didn't find a question I won't post a formal answer here but rather tell a story about something similar I underwent sometimes:

We created C ojects via JNI, that were backed by java object, and we decided to clean the C objects within the finalize method. However, we envisioned deadlocks, as the finalize is called from a non-application thread, the garbage-collector. As the entire wolrd is stopped while collecting the garbage, whenever the finalizer meets a lock it's immediately a dead lock. Thus we decided to use a java mechnism called phantom references. It's possible to bind a number to each of these 'references' (the C pointer) and then the VM removes an referenced object it puts such an reference into a queue. And one can pull this data whenever appropriate and remove the C object.

I think at least your problem is the same.

# php - PHP多维到平面数组（更改键->值）

> ID：11971630
> 
> 赞同：0
> 
> 时间：2012-08-15T14:52:17.783
> 
> 标签：php, mysql, arrays, multidimensional-array

这是我在使用PHP查询mysql数据时经常遇到的一个问题，想知道有没有更高效的解决方案。当我只需要两列数据时，例如“id”和“price”列，我更喜欢这种“平面”格式：

```
array(
    id 1 => price 1,
    id 2 => price 2,
    id 3 => price 3,
    ...
); 
```

或在 json 中：

```
[{"id 1":"price 1"},{"id 2":"price 2"},{"id 3":"price 3"}, ...] 
```

我通常的解决方案是循环两次，如下所示：

```
require_once('server/connection.php');
$info = mysql_query("SELECT id, price FROM table");  

$array1 = array();
while ($row = mysql_fetch_assoc($info)) {
    $array1[] = array(
        'id' => $row['id'],
        'price' => $row['price']
    );
}
mysql_close($con);

$array2 = array();
foreach ($array1 as $key => $value) {
    $array2[$key][$value['id']] = $value['price'];
}

print json_encode($array2); 
```

这确实有效，但我认为这段代码对于它的目的来说太长了，应该有更好的方法——所以我只需要循环一个数组。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:55:51.697

您可以将循环简化为此

```
while ($row = mysql_fetch_assoc($info)) {
    $array1[] = array(
        'id '.$row['id'] => 'price '.$row['price']
    );
}

print json_encode($array1); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:03:35.997

```
$result = array();
while ($row = mysql_fetch_assoc($info)) {
    $result[$row['id']] = $row['price'];
}
print_r($result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:09:17.943

```
require_once('server/connection.php');
$info = mysql_query("SELECT id, price FROM table");  

$array1 = array();
while ($row = mysql_fetch_assoc($info))
    $array1[$row['id']] = $row['price'];
mysql_close($con);

print json_encode($array1); 
```

注意：您的 $array2 是一个二维数组。如果它适合您，您需要更改您的 javascript 代码以处理以下平面格式，即上面的代码产生

```
[{"id 1":"price 1"},{"id 2":"price 2"},{"id 3":"price 3"}, ...] 
```

# c - Linux ioctl 命令在用户空间和内核空间之间切换

> ID：11971633
> 
> 赞同：1
> 
> 时间：2012-08-15T14:52:34.413
> 
> 标签：c, linux, ioctl

不确定是否有人在这里有任何想法，我以前从未见过。我正在编写一个存根来测试我的内核模块，当我检查用户空间中命令的值时，我得到的值与查看内核空间时不同。

部分存根：

```
#include <stdio.h>
#include <errno.h>
#include <string.h>
#include <fcntl.h>
#include <sys/stat.h>
#include "ain.h"
#include "ain_ioctl.h"
#define AI_DEVICE   "/dev/ain"

void main()
{
    int fd, error, ioctl_par = 0;
    char* dev;
    long ret;

    dev = AI_DEVICE;

    printf("Starting driver test\n");

    fd = open(dev, O_RDWR);
    if (fd < 0) {
    /* Failed to open -> Print error-message and exit */
    printf("%s failed to open, error: %s\n", dev, strerror(errno));
    }

    printf("Doing the IOCTL now... cmd: %d\n", AIN_IOC_GET_AN0_CONF);
    fflush(stdout);

    ret = ioctl(fd, AIN_IOC_GET_AN0_CONF, &ioctl_par); 
```

ain_ioctl.h 文件：

```
#define AIN_IOC_MAGIC  'e'
#define AIN_IOC_GET_AN0_CONF    _IOR(AIN_IOC_MAGIC, 46, int) 
```

内核中的 ioctl 例程：

```
int ain_ioctl (struct inode * inodep, struct file * filp, unsigned int cmd, unsigned long arg)
{
    printk("In the ain_ioctl function, cmd: %d. type: %d, dir: %d, nr: %d, size: %d\n", 
        cmd, _IOC_TYPE(cmd), _IOC_DIR(cmd), _IOC_NR(cmd), _IOC_SIZE(cmd));

    printk("Testing against command: %d. type: %d, dir: %d, nr: %d, size: %d\n",
        AIN_IOC_GET_AN0_CONF, _IOC_TYPE(AIN_IOC_GET_AN0_CONF), _IOC_DIR(AIN_IOC_GET_AN0_CONF), 
        _IOC_NR(AIN_IOC_GET_AN0_CONF), _IOC_SIZE(AIN_IOC_GET_AN0_CONF)); 
```

现在我希望用户空间打印中的输出与内核中相同。并在内核中的第一组打印到第二组。然而，这不是我所看到的......

输出：

```
mike@linux-4puc:~> ./a.out 
Starting driver test
Doing the IOCTL now... cmd: -2147195602

mike@linux-4puc:~> dmesg | tail
[75253.205136] In the ain_ioctl function, cmd: -1078168112\. type: 117, dir: 2, nr: 208, size: 16316
[75253.205140] Testing against            cmd: -2147195602\. type: 101, dir: 2, nr: 46, size: 4 
```

任何人都知道为什么当我通过 ioctl 命令将命令传递给内核时，与我只是通过硬编码来检查值时（就像我在打印中所做的那样），我的命令为什么表现不同？

我在构建时看到的唯一警告似乎与 ioctl 调用无关：

```
makedepend: warning: ignoring option -Wall 
makedepend: warning: ignoring option -Wall 
makedepend: warning: ain.c (reading /usr/src/linux/include/linux/compiler-gcc.h), line 94: incomplete include == "#include gcc_header(__GNUC__)" 
makedepend: warning: ain.c (reading /usr/src/linux/include/linux/string.h, line 13): cannot find include file "stdarg.h" 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:09:54.727

-1078168112（为什么不以十六进制打印这些？）看起来像一个堆栈指针。可能`&ioctl_par`。这表明您的 ioctl 方法接收的参数与您预期的不同。

在当前的内核源代码中，我看到 ioctl 方法采用 3 个参数，而不是 4 个。4 参数 ioctl 似乎是一个较旧的接口。

您在模块编译期间是否收到任何警告？注意他们！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T13:28:15.273

Alan Curry 的答案不是完整的“正确”答案，但它引导我找到了解决方案。该命令的十六进制值很差，所以我查看了内核中的其他 ioctl 调用。

我拥有的系统基于较旧的 2.4X 内核，我正在将其更新为 3.1。这里的问题是 ioctl 调用的参数列表。在参数列表中包含 inode 指针会导致问题，因为它将文件指针作为命令。

适当的解决方案：

```
long ain_ioctl (struct file * filp, unsigned int cmd, unsigned long arg) { 
    ... 
```

# java - 在循环内创建准备好的语句

> ID：11971635
> 
> 赞同：6
> 
> 时间：2012-08-15T14:52:42.900
> 
> 标签：java, sql, jdbc, prepared-statement

**澄清一下：**我知道创建`PreparedStatement`循环外部是正确的。我只是出于好奇才问了这个问题。

* * *

假设我正在[`PreparedStatement`](http://docs.oracle.com/javase/7/docs/api/java/sql/PreparedStatement.html)使用始终相同的 SQL 查询创建一个内部循环。

```
final String sql = "INSERT INTO ...";
while (condition) {
   ...
   PreparedStatement statement = connection.prepareStatement(sql);
   // Fill values of the prepared statement
   // Execute statement
   ...
} 
```

`PreparedStatement`因为对象总是被重新创建，所以这没用吗？或者底层数据库是否认识到它始终`PreparedStatement`是创建并重用它的同一个 SQL 查询？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T14:58:30.193

**1.** If you are using the **same** `PreparedStatement` throughout the loop, then **its better you keep the** `PreparedStatement` **outside the loop**.

**2.** If you have **sql statment which keeps changing inside the loop**, then only its worth using it in the loop.

**3.** Moreover if its keep changing, then just use `Statement` **instead of** `PreparedStatement`, else the very purpose of PreparedStatement **is lost as you keep changing it.**

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T15:00:52.750

一些驱动程序会缓存准备好的语句，是的。例如，浏览此 Oracle 文档： [http ://docs.oracle.com/cd/B10501_01/java.920/a96654/stmtcach.htm](http://docs.oracle.com/cd/B10501_01/java.920/a96654/stmtcach.htm)

我不相信有什么要求对所有驱动程序都是如此，尽管它确实似乎是许多 JDBC 驱动程序的一个可能特性。听起来 MySQL 可能不会这样做： [如何使用 MySQL 准备好的语句缓存？](https://stackoverflow.com/questions/222019/how-to-use-mysql-prepared-statement-caching)

也就是说，如果您真的想有效地使用准备好的语句，那么在每次循环迭代中使用准备好的语句的实例似乎更有意义。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-04T09:27:47.670

到目前为止我知道的两种方法。

第一种方式

它的插入记录一一

```
final String sql = "INSERT INTO tablename(columnname) Values(?)";

PreparedStatement statement = connection.prepareStatement(sql);

while (condition) {
statement.setString(1,value);
statement.executeUpdate();
} 
```

（或者）

第二种方式

它将所有记录作为批量插入插入

```
final String sql = "INSERT INTO tablename(columnname) Values(?)";

PreparedStatement statement = connection.prepareStatement(sql);

while (condition) {
statement.setString(1,value);
statement.addBatch();
}

statement.executeBatch(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T15:00:30.550

每次都创建它是没有用的。请参阅链接[http://www.theserverside.com/news/1365244/Why-Prepared-Statements-are-important-and-how-to-use-them-properly](http://www.theserverside.com/news/1365244/Why-Prepared-Statements-are-important-and-how-to-use-them-properly)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T15:02:52.860

还尝试使用[Connection.setAutoCommit(false)](http://docs.oracle.com/javase/6/docs/api/java/sql/Connection.html#setAutoCommit%28boolean%29)禁用自动提交，并且使用[PreparedStatement.executeBatch()](http://docs.oracle.com/javase/1.4.2/docs/api/java/sql/PreparedStatement.html)

# php - 执行完其他所有操作后自动执行功能

> ID：11971640
> 
> 赞同：1
> 
> 时间：2012-08-15T14:52:51.623
> 
> 标签：php

基本上，我有一个包含在页面顶部的脚本，它可以做很多事情，最重要的是 ob_start()。然后在页面的正文中我有各种将被替换的标签，例如{hello_word}。然后在最后，我包含另一个结束输出缓冲区的脚本，并用其他代码替换标签，然后打印。

有没有可能的方法来做到这一点而不必在最后包含我的第二个文件？有没有一些简单的方法可以在最后自动执行一个函数或包含一个文件？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T14:56:08.140

You can register a function to be executed at the very end of script using [`register_shutdown_function`](http://php.net/manual/en/function.register-shutdown-function.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T14:56:21.257

You can use the [auto_append](http://www.php.net/manual/en/ini.core.php#ini.auto-append-file) setting in php.ini, but you'll sacrifice portability. If you don't plan on distributing your application, this is a good option.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T15:04:23.487

您剩余的任何对象都将在脚本结束时被销毁，并且它们的析构函数将被调用[(manual)](http://www.php.net/manual/en/language.oop5.decon.php)。您可以将要执行的代码放在析构函数的末尾。

例如：

```
Class Waitforme {

  function __destruct() {
    echo "I'm here!";
  }

}

$hello = new Waitforme(); 
```

在被销毁之前，这将无济于事`$hello`，届时我们将看到“我在这里！”

# html-table - GMAIL 无法在电子邮件中呈现简单表格

> ID：11971642
> 
> 赞同：0
> 
> 时间：2012-08-15T14:52:58.493
> 
> 标签：html-table, gmail, rendering, html-email

任何在这件事上回复我的人都是绝对的传奇。我真诚地希望这只是太接近代码的问题，我再也看不到它了。在大多数（如果不是全部）浏览器和电子邮件客户端中，代码呈现良好。但在 GMAIL 中，底部表格向左吹出，右侧的内容向右侧吹出。

这是石蕊试纸上的照片：[https ://betalondon.litmus.com/pub/dfe0bd6](https://betalondon.litmus.com/pub/dfe0bd6)

这是完整的代码：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head>

  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <title>ENO MAGIC FLUTE e-mail</title>

</head>

<body>
<table align="center" bgcolor="#000000" border="0" cellpadding="0" cellspacing="0" width="100%">
    <tr>
    <td align="center" valign="top">
    <table width="1030px" cellpadding="0" cellspacing="0"  border="0">
        <tr>
            <td width="140" valign="top" bgcolor="#000000" style="line-height: 0px;">
            </td>
            <td valign="top" width="600" bgcolor="#000000">
                <table cellpadding="0" cellspacing="0" border="0" width="600">
                    <tr>
                        <td>
                        <table height="135" border="0" cellpadding="0" cellspacing="0" >
                        <tr>
                        <td  valign="middle" border="0">
                        <a href="http://www.eno.org"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/header2.jpg" alt="logo"  width="600" height="283" border="0"/></a>
                        </td>

                        <td  valign="bottom" border="0" width="18" height="15" bg-color="#ffffff">
                        <br/>
                        <br/>
                        </td>

                        </tr>
                    </table>
                        </td>
                    </tr>

                    <tr>
                        <td>
                        <table width="600" cellpadding="0" cellspacing="0" border="0" bgcolor="#ffffff">
                            <tr>

                                <td width="310" valign="top">
                                <table cellpadding="0" width="300" cellspacing="4" border="0" style="margin-top: 15px; margin-left: 10px;">

                <!--Title text--><tr>
                                    <td align="left">
                                    <span style="text-decoration: uppercase; font-family:Helvetica, Arial; font-size:14px; color:#000000; line-height:120%;">MOZART's<br/>
                                    </span>
                                    <span style="text-decoration: uppercase; font-family:Helvetica, Arial; font-size:25px; color:#000000; line-height:150%;"><strong>THE MAGIC FLUTE</strong></span><br/>
                                    <span style="text-decoration: uppercase; font-family:Helvetica, Arial; font-size:14px; color:#000000; line-height:150%;">13 Sep - 18 Oct</span><br/>

                                    </td>
                                </tr>
                                <tr>

                <!--Body-text--><td align="left">

<span style="font-family:Helvetica, Arial; font-size:14px; color:#000000; line-height:120%;">
                                    You are invited back to witness the adventure, music and emotion of one of Mozart's most stirring operas, your last chance to witness Nicholas Hytner's lavish production.<br/><br/>

Its distinctive characters, Papageno, Pamina, Sarastro and The Queen of the Night, along with magical sets, costumes and fantasy creatures, make this remarkable opera one not to be missed. Catch one of the final ten performances for what's been considered <em>'one of ENO's most magical interpretations'</em> (The Times)<br/><br/>

This time why not share the enjoyment and bring friends and family. 
                                    </span>
<br/>
<br/>
       <table style="background:#e4e4e4; border: solid 1px #d7d7d7;">
    <tr>
        <td style="padding: 5px;">
<span style="font-family: arial, helvetica, sans-serif; color:#000000; font-size: 18px;">
    Final 10 performances<br/>
    Tickets from £19<br/>
    Children under 16 half price<br/>
    <a href="http://www.eno.org/see-whats-on/productions/production-page.php?&itemid=2130" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/booknow.png" border="0"/></a>
</span>
       </td>
   </tr>
      </table>        
<br/>

                                   </td>

                                    </tr>

                                </tr>

                                </table>

                                <br/><br/>
<br/><br/>

                                </td>
                                <td><img src="http://content.high50.com/emails/20012012/images/1x1.gif" width="35" height="5" border="0" /></td>

                                <td valign="top">
                                    <br/>
                                <table width="255" cellpadding="0" cellspacing="0" height="100%">
                                <tr>
                                <td valign="top" width="280" align="left">

                                    <font style="font-family:arial; font-size:14px; color:#000000; line-height:1.5em; padding-left: 40px; margin-top: 15px;"><strong>BOX OFFICE: </strong></font><br/>
                                    <span style="font-family: arial; color: #ed1c24; font-size: 18px; padding-left: 40px;">020 7845 95300</span><br/>
                                    <span style="font-family: arial; "> 
                                <a href="https://www.facebook.com/englishnationalopera" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/fbook.png" border="0"/></a>
                                <a href="https://twitter.com/E_N_O" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/twitter.png" border="0"/></a>
                                <a href="http://www.youtube.com/englishnationalopera" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/youtube.png" border="0"/></a>
                                <a href="http://www.flickr.com/photos/eno-baylis/" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/flickr.png" border="0"/></a>
                                <a href="http://vimeo.com/englishnationalopera" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/vimeo.png" border="0"/></a>
                            </span>
                                    <br/>
                                    <br/>

<img style="padding-left: 11px;" src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/listen.png" border="0"/></a>
<br/>
<span style="font-family:Georgia, arial, helvetica, sans-serif; font-size:14px; color:#999999; line-height:1.5em; font-style: italic; padding-left: 40px; float: left; text-decoration: none;">
    <a href="http://www.eno.org/see-whats-on/productions/production-page.php?itemid=2130&tab=audio" style="text-decoration:none; color: #999;"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/arrow.png" style="float: left;" align="left" border="0" hspace="3" valign="middle" border="0"/>Overture</a><br/>

                                  <a href="http://www.eno.org/see-whats-on/productions/production-page.php?itemid=2130&tab=audio" style="text-decoration:none; color: #999;"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/arrow.png" style="float: left;" align="left" border="0" hspace="3" valign="middle" border="0"/>Queen of the Night</a><br/>

                                  <a href="http://www.eno.org/see-whats-on/productions/production-page.php?itemid=2130&tab=audio" style="text-decoration:none; color: #999;"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/arrow.png" style="float: left;" align="left" border="0" hspace="3" valign="middle" border="0"/>Papagena and Papageno</a></span>
<br/>
<br/>
<br/>
<br/>

</td>                                           
        </tr>
                            </table>

                                </td>
                                </td>
                            </tr>
                        </table>
                        </td>
                    </tr>   
                    <tr>
                        <td>
                        <table height="" border="0" cellpadding="0" cellspacing="0" bgcolor="#ffffff" width="600">
                        <tr>
                        <td valign="top">
                            <hr style="width: 600px; color:#6493b1; border: dotted 1px;"/>
                            <a href="mailto:?Subject=Book tickets to see The Magic Flute&body=Shall we go and see this opera together?: You are invited back to witness the adventure, music and emotion of one of Mozart's most stirring operas, your last chance to witness Nicholas Hytner's lavish production. Book here
                            #[http://www.eno.org/see-whats-on/productions/production-page.php?selected_date=13-09-2012&itemid=2130]#"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/forward.png" alt="forward this e-mail to a friend" width="" height="" border="0"/></a>

                            <span style="float: right; font-family: arial;"><strong>FOLLOW US</strong>: 
                                <a href="https://www.facebook.com/englishnationalopera" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/fbook.png" border="0"/></a>
                                <a href="https://twitter.com/E_N_O" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/twitter.png" border="0"/></a>
                                <a href="http://www.youtube.com/englishnationalopera" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/youtube.png" border="0"/></a>
                                <a href="http://www.flickr.com/photos/eno-baylis/" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/flickr.png" border="0"/></a>
                                <a href="http://vimeo.com/englishnationalopera" target="_blank"><img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/vimeo.png" border="0"/></a>
                            </span>
<br/><br/>
                            <center><span style="text-align: center; font-family: arial; font-size: 20px;"><strong>ENGLISH NATIONAL OPERA</strong></span><br/><span style="text-align: center; font-family: arial; font-size: 12px;">London Coliseum, 38 St. Martin's Lane, London, WC2N 4ES BOX OFFICE: 020 78459300<br/><br/>
                            <img src="http://www.beta-testing.co.uk.php5-23.ord1-1.websitetestlink.com/eno/artslottery.png" border="0"/><br/><br/>
                            ENO is a registered charity in England (no 257210)</span><br/><br/>
                    <span style="font-family: arial; font-size: 11px;">Photos: GTG/ Yunus Durukan</span>    <br/>
                            <hr style="border:1px dotted; color:#6493b1;"><br/><br/>
                        <a href="mailto:boxoffice@eno.org" style="font-family:arial; font-size:12px; color: #e41d2a; text-decoration:none; margin-top: 10px;">Unsubscribe</a></center>

                        </td>                   
                        </tr>
                    </table>
                        </td>
                    </tr>   
                    <tr>
                        <td>

                        <table height="90" border="0" cellpadding="0" cellspacing="0"  width="600" bgcolor="#ffffff">
                        <tr>
                        <td valign="top" align="center"> 

                        <br /><br />
                         <br />
                        </td>                   
                        </tr>
                    </table>
                        </td>
                    </tr>       
                </table>
            </td>
            <td width="140" valign="top" bgcolor="#000000"></td>
        </tr>   
    </table>

    </td>
    </tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T14:57:06.090

Your HTML is invalid. Use the [W3C validator service](http://validator.w3.org/check) to check it. Pay special attention to errors like this:

> Line 91, Column 37: end tag for "table" omitted, but OMITTAG NO was specified

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:12:49.783

For me it worked:

1- Open Firefox with Firebug

2- Go to gmail

3- Click "Compose"

4- Right click on the textfield, and choose "Inspect element with Firebug"

5- Search the following code:

```
[-] <iframe id=":jo" class="Am Al editable" frameborder="0" style="padding: 0px; height: 569.5px; background-color: white;" tabindex="1">
   [-] <html style="background:none transparent;min-width:0;">
      [+] <head>
      [+] <body id=":jo" class="editable LW-avf" style="min-width:0;" hidefocus="true" g_editable="true">
   </html>
</iframe> 
```

6- Select `<body>` and click `Edit` button

7- Paste your code between `<body>` and `</body>` (not included).

8- Close firebug

9- Send the email.

# java - 通过“HardCoded”构造函数 Arg 类 通过 Spring Config 到 bean

> ID：11971651
> 
> 赞同：6
> 
> 时间：2012-08-15T14:53:35.433
> 
> 标签：java, spring, dependency-injection

我有一个要注入服务的泛型类型。由于泛型在 Java 中的实现方式，我需要一个构造函数 arg（或属性设置器）来保存泛型类型参数的类信息。

我的问题是——我可以通过属性注入或指定构造函数 arg 传递一个带有 spring 的 Class 实例吗？

我确实知道 T 在运行时之前的类型，所以我具体知道 Type 参数是什么。

我在想它看起来像这样：

```
<bean id="dataMartService" class="com.someclass">
    <constructor-arg value="java.lang.class<com.someotherclass>" />
</bean> 
```

我完全不知道这应该如何发生吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T14:56:45.700

尝试：

```
<bean id="dataMartService" class="com.someClass">
    <constructor-arg>
        <value type="java.lang.Class">someotherclass</value>
    </constructor-arg>
</bean> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-15T14:58:31.147

使用弹簧 el：

```
<constructor-arg value="#{ T(java.lang.Math) }" /> 
```

（为此您需要 spring 3.0）

话虽如此，如果您将字符串传递给在属性集期间需要类的参数，spring 应该自动转换它，尽管我不确定在匹配构造函数时这是如何工作的。上述方法要简洁得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-07-23T05:35:27.560

您可以使用：

```
//for constructor
public CheckSpell(SpellCheker spellCheker){
         this.spellCheker=spellCheker;
}

//Use object reference as bean

    <bean id="textEditor" class="com.sring.spellCheck">
          <constructor-arg ref="spellChecker"/>
      </bean>

<bean id="spellCheker" class="com.spring.SpellCheker"/> 
```

# android - 这个气球状的 UI 组件叫什么名字？(安卓/Linux)

> ID：11971652
> 
> 赞同：2
> 
> 时间：2012-08-15T14:53:36.457
> 
> 标签：android, linux, user-interface, dialog

这既不是代码问题也不是技术问题，所以我承认它可能与 StackOverflow 有点离题，但我真的需要帮助，因为我已经花了很多时间。

我正在使用帮助窗口实现，我想使用我在某些 Android 按钮选项中看到的视图类型来执行此操作。在某些版本的 Ubuntu 中，当您将鼠标箭头指向主任务栏中的应用程序快捷方式时，也可以看到该视图。它看起来像一个气球型对话框。波纹管是视图的屏幕截图：

![在此处输入图像描述](../Images/cac3b1c1941cfa697abfd5c6211ed04e.png)

我的问题是有点傻：**我不知道这个 UI 组件的技术名称，所以我无法搜索文档和示例。**

我已经搜索了**对话框、菜单、气球、弹出菜单**等多种术语组合，但均未成功。谁能告诉我这个 UI 的名称，如果可能的话，发布一个简单的 Android/Java 使用示例？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T14:56:30.153

这种方法没有原生 UI，但是，您可以使用您喜欢的任何视图组（取决于它的内容）并将该视图组的背景设置为 9 补丁可绘制。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T15:34:47.560

这看起来像一个弹出窗口。它不是标准组件，但您可以使用[PopupWindow 创建一个类似的组件。](http://developer.android.com/reference/android/widget/PopupWindow.html)

请参阅[如何在 Android 中创建弹出窗口以](http://androidresearch.wordpress.com/2012/05/06/how-to-create-popups-in-android/)了解详细实现。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T15:00:27.670

没有 UI 视图：检查[http://greendroid.cyrilmottier.com/](http://greendroid.cyrilmottier.com/)有类似 QuickAction 的东西。简单易用且免费 ;)

![在此处输入图像描述](../Images/f4e89a465f25cc7d076e15d2f5e2b181.png)

# php - 使用 PHP 监控某些网页加载时间（包括所有图像、css 等）

> ID：11971655
> 
> 赞同：0
> 
> 时间：2012-08-15T14:53:57.623
> 
> 标签：php, monitoring

这是一个非常广泛的问题，所以我只是在寻找最好的方法。

我想定期监控我网站上的某些页面。

我正在寻找编写一个 PHP 脚本来加载页面，就好像它正在浏览器中加载一样。这意味着，它会加载所有*CSS、Javascript、图像、视频等*。

我只想获取这些页面的加载时间，然后将结果以`crontab`. 为此，我打算使用`microtime()`和一个`phpMailer`.

有谁知道加载完整页面的脚本，或者对如何进行此操作有任何建议？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:00:18.903

如果页面有动态内容怎么办？您还需要执行所有 JavaScript 并获取所有 CSS 图像以获得最终时间。我相信仅使用 PHP 是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:02:45.437

您从托管站点的同一服务器运行的 php 脚本会给您异常读数（非常低），因为它本质上是在第一跳加载。您真正想要做的是从您自己之外的各种服务器上运行脚本。php 可以看到的内容也有限制，即 JS 和 JQuery 等。

**[最简单的方法是使用jmeter](http://jmeter.apache.org/)**从您的家用电脑上进行检查。您将家庭浏览器设置为将其用作代理并转到您想要的任何网站。Jmeter 将记录统计数据。当您感到高兴时，您可以选择保存统计信息。

这样就避免了通过脚本处理JS和JQuery的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:02:27.297

这可能会变得非常复杂。你基本上必须解析 HTML，然后有大量的边缘情况，比如 JS，包括资源等……我绝对建议使用 Chrome 开发工具的网络选项卡之类的东西。

# android - 当多个加载器与加载器管理器一起使用时，android 无法在方向更改时保持正确的加载器状态

> ID：11971663
> 
> 赞同：0
> 
> 时间：2012-08-15T14:54:10.573
> 
> 标签：android, android-loadermanager

我在我的应用程序中使用 4 个加载器将数据加载到列表视图中。当我改变方向时，加载器管理器总是尝试加载第一个加载器。为了解决这个问题，我在应用程序的“onResume”中重新启动加载程序。现在列表视图填充了数据，但未维护方向更改之前列表的位置。有没有办法在方向改变时保持装载机状态？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:36:55.280

如果你不能阻止列表的重新加载，你至少可以恢复位置：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    if (null != savedInstanceState) {
        mViewPosition = savedInstanceState.getInt(KEY_LIST_CUR_POS);
        mViewOffset = savedInstanceState.getInt(KEY_LIST_VIEW_OFFSET);
    } 
}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    View view = inflater.inflate(R.layout.status_list, container, false);
    return(view);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);

    // Restore list position.
    getListView().setSelectionFromTop(mViewPosition, mViewOffset);
}

@Override
public void onSaveInstanceState(Bundle outState) {
    super.onSaveInstanceState(outState);

    // Save current view in list.
    outState.putInt(KEY_LIST_CUR_POS, mViewPosition);
    outState.putInt(KEY_LIST_VIEW_OFFSET, mViewOffset);
}

@Override
public void onPause() {
    super.onPause();

    mViewPosition = getListView().getFirstVisiblePosition();
    View v = getListView().getChildAt(0);
    mViewOffset = (v == null) ? 0 : v.getTop();
} 
```

# python - 在 scipy.stats.rv_continuous 的子类中实现 _rvs 的要求？

> ID：11971667
> 
> 赞同：0
> 
> 时间：2012-08-15T14:54:28.923
> 
> 标签：python, statistics, scipy

我想根据类实现一个特定的分布`scipy.stats.rv_continuous`，我想提供我自己的实现，`_rvs` 但我不明白其中包含哪些参数（它只是`*args`在函数声明中）。

特别是，我看不到`size`参数如何`_rvs`通过函数调用（[在线源代码](https://github.com/scipy/scipy/blob/master/scipy/stats/distributions.py#L849)`rv_generic.rvs`中的第 665 行）输入到调用中。

我的分布没有任何参数（除了`loc`and `scale`），所以如果`_rvs`只需要返回 1 个随机值，我可以用一个空参数列表来做到这一点，但它似乎需要返回一个（平面）随机值数组，如何获取要返回的元素数量？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T20:00:41.997

该类`scipy.stats.rv_continuous`是 的子类`rv_generic`。后者定义了一个函数，该函数在将其变量设置为或特定数字后`rv_generic.rvs`调用。这是通过读取存储在其中的关键字参数并检查参数来完成的。`self._rvs``self._size``None``**kwds``size`

通常，当`self._size`is时`None`，分布返回一个标量，否则返回一个长度数组`self._size`。

# android - Android：主题变化超出预期

> ID：11971670
> 
> 赞同：1
> 
> 时间：2012-08-15T14:54:32.447
> 
> 标签：android, styles, themes, titlebar

我需要更改我的应用标题背景颜色。我能够根据[这个问题](https://stackoverflow.com/questions/2251714/set-title-background-color)做到这一点。但这不仅改变了我的标题，还改变了我的整个应用程序（编辑文本、按钮、微调器）。我可以使用这样的东西只更改标题，但将其他所有内容保留为默认主题吗？顺便说一句，我正在使用 Theme.Black。

下面是我正在使用的一些代码：res/values.themes.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
<style name="customTheme" parent="android:Theme.Black"> 
    <item name="android:windowTitleBackgroundStyle">@style/WindowTitleBackground</item>   
</style> 
</resources> 
```

res/values/styles.xml：

```
<resources>
<style name="AppTheme" parent="android:Theme.Black" />
<style name="WindowTitleBackground" parent="android:Theme.Black">     
    <item name="android:background">@color/titlebackgroundcolor</item>                   
</style>
</resources> 
```

资源/布局/mytitle.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
>
<TextView
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/myTitle"
    android:text="This is my new title"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:textColor="@color/titletextcolor"
/>
</RelativeLayout> 
```

在我的活动中，我调用：

```
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    requestWindowFeature(Window.FEATURE_CUSTOM_TITLE);
    setContentView(R.layout.activity_auth);
    getWindow().setFeatureInt(Window.FEATURE_CUSTOM_TITLE, R.layout.mytitle);
} 
```

在 AndroidManifest 中：

```
 <application
    android:icon="@drawable/ic_launcher_"
    android:label="@string/app_name"
    android:theme="@style/customTheme" > 
```

提前致谢。

# android - 无法在 AndEngine 中加载精灵

> ID：11971674
> 
> 赞同：1
> 
> 时间：2012-08-15T14:54:36.483
> 
> 标签：android, sprite, andengine

我正在学习 AndEngine，并且正在学习一些基本教程。我试图在屏幕中加载一个精灵，但精灵看起来已损坏。

这是我的代码：

```
package com.example.andengine_demo;

import org.andengine.engine.camera.Camera;
import org.andengine.engine.options.EngineOptions;
import org.andengine.engine.options.ScreenOrientation;
import org.andengine.engine.options.resolutionpolicy.RatioResolutionPolicy;
import org.andengine.entity.scene.Scene;
import org.andengine.entity.scene.background.Background;
import org.andengine.entity.sprite.Sprite;
import org.andengine.entity.util.FPSLogger;
import org.andengine.opengl.texture.TextureOptions;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlas;
import org.andengine.opengl.texture.atlas.bitmap.BitmapTextureAtlasTextureRegionFactory;
import org.andengine.opengl.texture.region.TextureRegion;
import org.andengine.ui.activity.BaseGameActivity;

public class MainActivity extends BaseGameActivity {

    // ===========================================================
    // Constants
    // ===========================================================
    static final int CAMERA_WIDTH = 720; 
    static final int CAMERA_HEIGHT = 480;

    private static final String TAG = "AndEngineTest";
    private BitmapTextureAtlas mBitmapTextureAtlas;
    private TextureRegion mPlayerTextureRegion;
    // ===========================================================
    // Fields
    // ===========================================================

    //private ZoomCamera mCamera;

@Override
public EngineOptions onCreateEngineOptions() {
    // TODO Auto-generated method stub
    Camera mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    return new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera);
}

@Override
public void onCreateResources(
        OnCreateResourcesCallback pOnCreateResourcesCallback) throws Exception {
    // TODO Auto-generated method stub
    mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 32, 32, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    mPlayerTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "face_box.png", 0, 0);
    mBitmapTextureAtlas.load();

}

@Override
public void onCreateScene(OnCreateSceneCallback pOnCreateSceneCallback)
{
    this.mEngine.registerUpdateHandler(new FPSLogger());
    // TODO Auto-generated method stub
    Scene scene = new Scene();
    scene.setBackground(new Background(0f, 0f, 1f));

    final Sprite oPlayer = new Sprite(32,32, mPlayerTextureRegion, getVertexBufferObjectManager());
    scene.attachChild(oPlayer);
}

@Override
public void onPopulateScene(Scene pScene,
        OnPopulateSceneCallback pOnPopulateSceneCallback) throws Exception {
    // TODO Auto-generated method stub

}
} 
```

这就是它的外观：

![腐化的精灵](../Images/acaf026ecfcac008ac75de4b1ff46c0a.png)

我检查了图像大小是 32x32，图像的路径，并且在加载时我还尝试了不同的纹理选项。图片格式为PNG。如果您看到，背景颜色与我设置的颜色不符。我认为我的模拟器已正确配置（使用 GPU 仿真）以使用 GLES2.0。我认为问题可能是相机高度和相机宽度的值。我之所以设置它是因为我在教程中看到了它们，但不知道它们是否正确……我的分辨率是 WVGA800。

我不知道我做错了什么......我需要解决这个问题才能继续创建游戏，所以任何帮助都会受到好评。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:08:33.380

你应该`SimpleBaseGameActivity`改为扩展。然后你不必担心那些回调或任何事情。

```
public class MainActivity extends SimpleBaseGameActivity {

// ===========================================================
// Constants
// ===========================================================
static final int CAMERA_WIDTH = 720; 
static final int CAMERA_HEIGHT = 480;

private static final String TAG = "AndEngineTest";
private BitmapTextureAtlas mBitmapTextureAtlas;
private TextureRegion mPlayerTextureRegion;
// ===========================================================
// Fields
// ===========================================================

//private ZoomCamera mCamera;

@Override
public EngineOptions onCreateEngineOptions() {
    // TODO Auto-generated method stub
    Camera mCamera = new Camera(0, 0, CAMERA_WIDTH, CAMERA_HEIGHT);
    return new EngineOptions(true, ScreenOrientation.LANDSCAPE_SENSOR, new RatioResolutionPolicy(CAMERA_WIDTH, CAMERA_HEIGHT), mCamera);
}

@Override
public void onCreateResources() {
    mBitmapTextureAtlas = new BitmapTextureAtlas(this.getTextureManager(), 32, 32, TextureOptions.BILINEAR_PREMULTIPLYALPHA);
    mPlayerTextureRegion = BitmapTextureAtlasTextureRegionFactory.createFromAsset(this.mBitmapTextureAtlas, this, "face_box.png", 0, 0);
    mBitmapTextureAtlas.load();
}

@Override
public Scene onCreateScene()
{
    this.mEngine.registerUpdateHandler(new FPSLogger());
    // TODO Auto-generated method stub
    Scene scene = new Scene();
    scene.setBackground(new Background(0f, 0f, 1f));

    final Sprite oPlayer = new Sprite(32,32, mPlayerTextureRegion, getVertexBufferObjectManager());
    scene.attachChild(oPlayer);
    return scene;
}

} 
```

# javascript - 显示 JSON 对象的差异，最好以树视图的形式显示

> ID：11971676
> 
> 赞同：0
> 
> 时间：2012-08-15T14:54:50.917
> 
> 标签：javascript, jquery, html, json

我目前有两个 json 对象，包含配置信息，由网页中的 javascript 加载。

这些 json 对象并排显示在两个树视图中。我目前正在为此使用 jqtree。

我需要能够突出两个 json 对象之间的差异，类似于您在 notepad++ 和其他开发环境中获得的代码比较工具。

如果可能的话，我宁愿坚持一些描述的树视图，但这不是最重要的部分。如果有人可以建议一个可以做到这一点的软件包，那就太好了，但任何一般性的建议都会很有用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:42:04.050

github.com/samsonjs/json-diff 是完美的解决方案，感谢 JoshuaBoshi 的发帖。

# sql - 优化连接（超过2个表，过滤器）

> ID：11971682
> 
> 赞同：0
> 
> 时间：2012-08-15T14:55:02.570
> 
> 标签：sql, database, sybase

几个 Sybase 数据库查询问题：

1.  如果我进行连接并有 where 子句，是否会在实际连接之前应用过滤器？换句话说，它是否比没有任何 where 条件的 join 更快？

2.  我有一个涉及 3 个表的示例（列在下面）：

    ```
    A: O1,....
    B: E1,E2,...
    C: O1, E2, E2 
    ```

所以我的加入看起来像：

```
select A.*, B* from B,C,A
where 
C.E1=B.E1 and C.E2=B.E2 and C.O1=A.O1 
and A.O2 in (...)
and B.E3 in (...) 
```

如果我消除了 C 并将 O1 添加到表 B 中，我的连接会明显更快吗？

```
B:E1,E2,O1.... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:13:48.953

First, you should use proper join syntax:

```
select A.*, B.*
from B join C
     on C.E1=B.E1 and C.E2=B.E2 join
     A
     on C.O1=A.O1
where B.E3 in (...) 
```

The "," means cross join and it is prone to problems since it is easily missed. Your query becomes much different if you say "from B C, A". Also, it gives you access to outer joins, and makes the statement much more readable.

The answer to your question is "yes". Your query will run faster if there are fewer tables being joined. If you are doing a join on a primary key, and the tables fit into memory, then the join is not expensive. However, it is still faster to just find the data in the record in B.

As I say this, there could be some boundary cases in some databases where this is not necessarily true. For instance, if there is only one value in the column, and the column is a long string, then adding the column onto pages could increase the number of pages needed for B. Such extreme cases are unlikely, and you should see performance improvements.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:14:48.280

速度通常取决于 SQL Server 必须读取的行数。

1.  我认为使用 where 子句或 join 没有任何区别
2.  取决于.. 消除表中有多少行

它可能取决于您添加连接或 where 子句的顺序，例如，如果 C 中只有几行，并且您首先将其添加为表或位置，它会立即减少可能的匹配数. 但是，如果 C 中有数百万行，那么您必须阅读数百万行才能找到匹配项。

现代优化器可以重新排列您的查询以提高效率，但不要依赖它。

真正可以减少读取的行数是在连接列中添加索引 - 如果您在 A.O1 和 C.O1 上有索引，那么它可以减少大量读取次数。

# vb.net - 尝试使用 linq 对对象列表进行排序时出现无效的强制转换异常

> ID：11971683
> 
> 赞同：7
> 
> 时间：2012-08-15T14:55:04.810
> 
> 标签：vb.net, linq, sorting

我正在尝试对推文列表（类：SimpleTweet）进行排序，每个推文都有与之关联的 ID（x.ID，其中 x 是 SimpleTweet 类的对象）。我正在使用 linq 对它进行排序，使用“OrderByDescending”，但是在我设置一个 List(Of SimpleTweet) 类型的新对象等于排序列表的那一行出现错误。我得到的错误是“System.InvalidCastException：无法转换类型为'System.Linq.OrderedEnumerable `2[SimpleTweet,System.Int64]&#39; to type &#39;System.Collections.Generic.List`1 [SimpleTweet]'的对象”。

编码：

```
 <WebMethod()> _
    Public Function GetTweetsByUserID(ByVal userID As Integer) As List(Of SimpleTweet)
        Dim result As New List(Of SimpleTweet)
        Dim urlTwitter As String = "https://api.twitter.com/1/statuses/user_timeline.xml?include_entities=true&include_rts=true&screen_name={0}&count=3"
        'Dim twitterfeed As String = utils.GetUserTwitterFeeds(userID, "docphin")
        Dim lq As New lqDFDataContext
        Dim var = lq.web_GetTweetsByUserID(userID).ToList()
        Dim sortedresult As New List(Of SimpleTweet)
        If Not var Is Nothing Then
            For Each twitterfeed In var

                Dim listURL As String = String.Format(urlTwitter, twitterFeed.TweeterFeed)

                Dim tweetXML As XmlDocument = utils.GetXMLForURL(listURL)

                Dim tweetnodelist As XmlNodeList = tweetXML.ChildNodes(1).ChildNodes

                For Each node As XmlNode In tweetnodelist
                    Dim tweet As New SimpleTweet
                    tweet.CreatedAt = node.SelectSingleNode("created_at").InnerText
                    tweet.HTMLText = utils.ReturnTextWithHRefLink(node.SelectSingleNode("text").InnerText)
                    tweet.ID = node.SelectSingleNode("id").InnerText
                    tweet.Name = node.SelectSingleNode("user/name").InnerText
                    tweet.ScreenName = node.SelectSingleNode("user/screen_name").InnerText
                    tweet.Text = node.SelectSingleNode("text").InnerText
                    tweet.UserID = node.SelectSingleNode("user/id").InnerText
                    tweet.ProfileImageURL = node.SelectSingleNode("user/profile_image_url_https").InnerText
                    result.Add(tweet)
                Next
            Next

        sortedresult = result.OrderByDescending(Function(tweet) tweet.ID)  
        End If
        Return sortedresult
    End Function 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T14:58:38.917

您需要通过`result`调用来实现`.ToList()`. 将其添加到此行的末尾：

```
sortedresult = result.OrderByDescending(Function(tweet) tweet.ID) 
```

`sortedResult`是类型`List(Of SimpleTweet)`并`OrderByDescending`返回一个`IOrderedEnumerable(Of SimpleTweet)`不能自动转换为预期类型的​​。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T14:58:50.747

由于您要返回 a`List(Of SimpleTweet)`您需要调用[`ToList`](http://msdn.microsoft.com/en-us/library/bb342261.aspx)以从以下位置创建一个新列表`IEnumerable(Of SimpleTweet)`：

```
Return sortedresult.ToList() 
```

`ToList` 强制立即进行查询评估。

# entity-framework-4 - Enitiy 框架查询，过滤子集合的子集合

> ID：11971686
> 
> 赞同：1
> 
> 时间：2012-08-15T14:55:18.563
> 
> 标签：entity-framework-4, filtering, eager-loading

我正在使用急切加载来填充我的对象。是否可以过滤子集合的子集合。以下代码为我提供了过滤期间的子集合。但我也想过滤 TradeStatus == TradeStatus.Open 的时期的孩子？

```
 public class Route
    {
       public Guid RouteId { get; set; }
       public string Name { get; set; }
       public virtual ICollection<Period> Periods { get; set; }
    }

    public class Period
    {
       public Guid PeriodId { get; set; }
       public virtual ICollection<Trade> Trades { get; set; }
       public bool IsActive { get; set; }
    }

    public class Trade
    {
       public Guid PeriodId { get; set; }
       public string TradeName { get; set; }
       public decimal TradePrice { get; set; }
       public TradeStatus TradeStatus { get; set; }
    }

    string routeName = "UK_USA"

    Route route = Context.Set<Route>().SingleOrDefault(r => r.Name.Equals(routeName));

    if (route != null)
    {
        Context.Entry(route).Collection(r => r.Tenors).Query()
                      .Where(t => t.IsActive)
                      .Include(t => t.Trades).Load();
    } 
```

我已经尝试了以下但它返回

> 包含路径表达式必须引用在类型上定义的导航属性。对引用导航属性使用虚线路径，对集合导航属性使用 Select 运算符。参数名称：路径

```
Context.Entry(route).Collection(r => r.Tenors).Query()
                          .Where(t => ValidTenorName.Contains(t.Name))
                          .Include(t => 
                              t.Trades.Where(tr=> tr.TradeStatus ==  TradeStatus.Open).Load(); 
```

有没有解决这个问题的方法，或者使用连接的替代方法？

谢谢

# javascript - IE7 JSON 响应：预期对象.. 适用于 Chrome 和 FireFox

> ID：11971687
> 
> 赞同：3
> 
> 时间：2012-08-15T14:55:19.700
> 
> 标签：javascript, json, internet-explorer-7, response, object-expected

这是在我可以将我心爱的 webapp 发送到野外之前我必须做的最后一件事，但当然 IE7 对我来说很难！

我正在使用 JQuery Form 插件将数据上传到我的服务器。然后，一个 servlet 类将对该文件运行一些操作，并将一些 JSON 回传给客户端。与往常一样，Chrome 和 Firefox 像冠军一样处理响应并给我期望的输出。

Internet Explorer 7 没有。我收到“预期对象”错误....我已将问题缩小到单个函数。我有根据地猜测 IE7 没有正确处理响应，但我真的不知道。这是导致问题的实际代码：

```
function uploadScript() {

$("#uploadScript").ajaxSubmit({
    beforeSend: function() {

        $("#uploadScript").attr("disabled", true);

    },
    dataType: "json",
    cache: false,
    success: function(response, status, xhr) {
        if(response != undefined) {
            commandArray = ([]).concat(response.command);
            paramsArray = ([]).concat(response.params);
            IDArray = ([]).concat(response.id);
            commandID = response.commandID;
            updateScriptView();
        }

    }
})

} 
```

我已经尝试将响应标头内容类型显式设置为“应用程序/json”，但无济于事。我什至在某处读到这样的标题甚至会导致 IE 出错，所以前面肯定令人困惑。

也许是 JSON 语法？没有！我检查了它，仔细检查了它，然后通过 JSONLint 运行它以确定。

关于我做错了什么的任何想法？

编辑：**JSON 响应**字面上是这样的：

```
{ "command" : ["sequential","wait","tune","endsequential"],"params" : [["5"],["00:00:03"],["202","RA29B[*]"],["100000"]],"id" : [100000,100002,100003,100001],"commandID" : 100004} 
```

眼睛友好是这样的：

```
{
"command": [
    "sequential",
    "wait",
    "tune",
    "endsequential"
],
"params": [
    [
        "5"
    ],
    [
        "00:00:03"
    ],
    [
        "202",
        "RA29B[*]"
    ],
    [
        "100000"
    ]
],
"id": [
    100000,
    100002,
    100003,
    100001
],
"commandID": 100004
} 
```

**回答！**显然，我在 ajaxSubmit() 的 beforeSend 选项中调用 $.attr() 导致 IE7 出现问题。我不知道为什么会这样，我的谷歌搜索没有产生任何结果（必须谷歌正确的问题才能得到正确的答案）。无论如何，删除此代码块解决了我的问题。我感谢给予我的所有帮助。多谢你们！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:17:44.160

看起来你正在使用 malsup 插件。如果是这种情况，那么 git repo 对此插件有一些已知问题：

[https://github.com/malsup/form/issues](https://github.com/malsup/form/issues)

检查您的问题是否已被报告。还要检查你的 jQuery 版本

这是给你的：[https ://github.com/malsup/form/issues/179](https://github.com/malsup/form/issues/179)

# java - 在浏览器中使用 Netty 将文本消息与 websocket 绑定

> ID：11971694
> 
> 赞同：1
> 
> 时间：2012-08-15T14:55:36.937
> 
> 标签：java, netty

我正在尝试使用 Netty 实现 websockets。我尝试了 DiscardServer 示例，如果我只是使用 Telnet 运行它，它就可以正常工作

```
 Telnet localhost 8090. 
```

因此，无论我在终端窗口中输入什么消息，它都会返回给我。但是现在我想在浏览器中实现相同的功能，例如如果我在文本区域中放置一些文本消息，那么它应该在浏览器上显示该文本消息。

我可以使用以下代码启动 websocket 服务器

```
 ChannelFactory factory = new NioServerSocketChannelFactory(
            Executors.newCachedThreadPool(),
            Executors.newCachedThreadPool());

    ServerBootstrap bootstrap = new ServerBootstrap(factory);

    bootstrap.setPipelineFactory(new ChannelPipelineFactory() {
        public ChannelPipeline getPipeline() {
            return Channels.pipeline(new DiscardServerHandler());
        }
    });

    bootstrap.setOption("child.tcpNoDelay", true);
    bootstrap.setOption("child.keepAlive", true);

    bootstrap.bind(new InetSocketAddress(8090)); 
```

但是如何将我的文本区域中的文本消息与 websocket 服务器绑定

**- - 更新 - -**

我创建了 MyServerHandler 类

```
 public class MyServerHandler extends SimpleChannelUpstreamHandler {

@Override
public void messageReceived(ChannelHandlerContext ctx, MessageEvent e) {
    Object msg = e.getMessage();        
    //msg.getClass();
    if (msg instanceof HttpRequest) {
                    //handleHttpRequest(ctx, (HttpRequest) msg);
        ctx.getChannel().write(msg);
    } else if (msg instanceof WebSocketFrame) {
        //handleWebSocketFrame(ctx, (WebSocketFrame) msg);
    }

}
  } 
```

它调用 messageReceived 方法，但不会进入任何 if 条件。

我也写了 WebSocketServerPipelineFactory 类

```
 public class WebSocketServerPipelineFactory implements ChannelPipelineFactory {

@Override
    public ChannelPipeline getPipeline() throws Exception {
        // Create a default pipeline implementation.
        ChannelPipeline pipeline = pipeline();
        pipeline.addLast("decoder", new HttpRequestDecoder());
        pipeline.addLast("aggregator", new HttpChunkAggregator(65536));
        pipeline.addLast("encoder", new HttpResponseEncoder());
        pipeline.addLast("handler", new MyServerHandler());
        return pipeline;
    }
    } 
```

我的事情它也没有调用这个类的方法。

在我写的jsp文件中

```
 <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.4/jquery.min.js"  type="text/javascript"></script>
   <script>
   var MESSAGE_HANDSHAKE = "handshake";
   var MESSAGE_OPPONENT_UPDATE = "response";
   var MESSAGE_TURN_INDICATOR = "turn";
   var MESSAGE_GAME_OVER = "game_over";
   var WEBSOCKET_URL = "ws://localhost:8090";
   $(document).ready(function() {
   ws = new WebSocket(WEBSOCKET_URL);

   ws.onopen = function(event) { 
 alert("test");
 $('#status').text("Waiting...."); 
  };

   ws.onmessage = function(event) {
    var message = jQuery.parseJSON(event.data);

    alert(message.type);
   }

   }); 

<body>
 <p id="status">&nbsp;</p>
</body> 
```

它不会使用任何 jquery 方法。我还缺少什么吗？

另外，如果我写

```
 ws.send("Test Message"); 
```

它抛出以下java脚本错误

```
 Uncaught Error: INVALID_STATE_ERR: DOM Exception 11 login.htm:33
 (anonymous function) login.htm:33
 f.extend._Deferred.e.resolveWith jquery.min.js:2
 e.extend.ready jquery.min.js:2
 c.addEventListener.C 
```

如果我使用

```
 var WEBSOCKET_URL = "wss://echo.websocket.org/"; 
```

然后它起作用了，这是我无法连接到我的服务器吗？

我正在使用 eclipse 来运行这段代码。我正在使用 Apache Tomcat 运行我的 jsp 代码，并通过将 WebsocketServer.class 作为 java 应用程序运行来运行 websocket 服务器。这有什么区别吗？

**- - 更新 - -**

我在 MyServerHandler 类中编写了以下方法，并在浏览器中出现错误

```
 Error during WebSocket handshake: 'Sec-WebSocket-Accept' header is missing 
```

MySeverHandler.java

```
 private void handleHttpRequest(ChannelHandlerContext ctx, HttpRequest req)
        throws Exception {

    // Allow only GET methods.
    if (req.getMethod() != HttpMethod.GET) {
    //  sendHttpResponse(ctx, req, new DefaultHttpResponse(
        //      HttpVersion.HTTP_1_1, HttpResponseStatus.FORBIDDEN));
        return;
    }

    // Serve the WebSocket handshake request.
    if (req.getUri().equals(WEBSOCKET_PATH)
            && Values.UPGRADE.equalsIgnoreCase(req.getHeader(CONNECTION))
            && WEBSOCKET.equalsIgnoreCase(req.getHeader(Names.UPGRADE))) {

        // Create the WebSocket handshake response.
        HttpResponse res = new DefaultHttpResponse(
                HTTP_1_1,
                new HttpResponseStatus(101, "Web Socket Protocol Handshake"));
        res.addHeader(Names.UPGRADE, WEBSOCKET);
        res.addHeader(CONNECTION, Values.UPGRADE);

        // Upgrade the connection and send the handshake response.
        ChannelPipeline p = ctx.getChannel().getPipeline();
        p.remove("aggregator");
        p.replace("decoder", "wsdecoder", new WebSocketFrameDecoder());

        // Write handshake response to the channel
        ctx.getChannel().write(res);

        // Upgrade encoder to WebSocketFrameEncoder
        p.replace("encoder", "wsencoder", new WebSocketFrameEncoder());

        // Initialize the game. Assign players to a game and assign them a letter (X or O)
        ///initGame(ctx);

        return;
    }

    // Send an error page otherwise.
    sendHttpResponse(ctx, req, new DefaultHttpResponse(
            HttpVersion.HTTP_1_1, HttpResponseStatus.FORBIDDEN));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:41:31.933

Netty 使用责任链设计模式，因此每当您需要使用协议时，您需要在管道中创建适当的解码器/编码器。对于 websocket，这里是一个示例管道。

```
public class WebSocketServerPipelineFactory implements ChannelPipelineFactory {
    public ChannelPipeline getPipeline() throws Exception {
            // Create a default pipeline implementation.
            ChannelPipeline pipeline = pipeline();
            pipeline.addLast("decoder", new HttpRequestDecoder());
            pipeline.addLast("aggregator", new HttpChunkAggregator(65536));
            pipeline.addLast("encoder", new HttpResponseEncoder());
            pipeline.addLast("handler", new YourBusinessHandler());
            return pipeline;
    } 
```

}

您可以在业务处理程序中编写任何业务逻辑。在这种情况下，您将只是回显您收到的内容，因此它将类似于`channel.write(incomingMessage);`此处理程序中的内容。

看看这个[井字游戏](http://kevinwebber.ca/blog/2011/11/2/multiplayer-tic-tac-toe-in-java-using-the-websocket-api-nett.html)了解更多信息。github中还有很多关于如何执行此操作的链接信息。

# python - 如何在 Python 上使用正则表达式删除括号？

> ID：11971696
> 
> 赞同：3
> 
> 时间：2012-08-15T14:55:37.143
> 
> 标签：python, regex

我有这样的字符串：

```
Alex Jatt, (alex.jatt@domain.com) 
```

amd 我正在尝试使用正则表达式仅提取电子邮件地址，如下所示：

```
p = re.search('\((.*?)\)', c) 
```

但 print p 命令打印*（alex.jatt@domain.com）*

如何修改此正则表达式以摆脱括号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T15:06:28.097

加入你也可以做到..

```
a= ''.join(c for c in a if c not in '()') 
```

或使用正则表达式..

```
In[20]: import re

In[21]: name= re.sub('[()]', '', a)

In [22]: name
Out[22]: 'Alex Jatt, alex.jatt@domain.com' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T14:59:47.163

没有`regex`解决方案：

```
>>> strs="Alex Jatt, (alex.jatt@domain.com)"
>>> strs.split(',')[1].strip().strip("()")
'alex.jatt@domain.com' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-15T14:59:48.530

`re.search`允许您将匹配的组从正则表达式匹配中提取出来。在您的情况下，您可能希望用于`p.group(1)`提取第一个带括号的匹配项，它应该是您拥有的正则表达式中的电子邮件。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T14:58:23.257

use a look ahead and a look behind to make sure that the parenthesis are there, but to prevent you from capturing them.

```
p = re.search('(?<=\().*?(?=\))', c) 
```

or you could just access the capture group instead of the whole regex.

```
p = re.search('\((.*?)\)', c).group(1) 
```

either way would work.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T14:59:19.513

I think you've been changing the code before pasting it in here.

If I do:

```
>>> import re
>>> c="Alex Jatt, (alex.jatt@domain.com)"
>>> p = re.search('\((.*?)\)', c)
>>> print p
<_sre.SRE_Match object at 0x10bd68af8> 
```

You want to look at the groups:

```
>>> import re
>>> c="Alex Jatt, (alex.jatt@domain.com)"
>>> p = re.search('\((.*?)\)', c)
>>> print p.groups()[0]
alex.jatt@domain.com 
```

# database - joomla #__associations table

> ID：11971701
> 
> 赞同：1
> 
> 时间：2012-08-15T14:55:53.253
> 
> 标签：database, joomla

I expired that joomla 2.5 supports menu item association, which enables it to change the language without necessarily being redirected to the front-page.

I would like to generate a list containing all associated menu items of the current menu item. For example: I have three articles about the wheel, each in a different language, but about the same subject, associated with each other and clicking through the language switcher always delivers me the right page.

The #__associations table in the database of joomla stores records consisting only of an id, a context and an md5 hash value, representing all the associations. How is this hash generated?

Greeting philipp

EDIT::

going on searching I found how to get the list in the code of the language filter plugin:

```
$app = JFactory::getApplication();
$menus = $app->getMenu();
$active = $app->getMenu()->getActive();
JLoader::register('MenusHelper', JPATH_ADMINISTRATOR . '/components/com_menus/helpers   /menus.php'); 
```

and finally:

```
$associations = MenusHelper::getAssociations($active->id); 
```

works!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-27T10:32:58.230

只是为了结束这个问题：

散列是在 json 编码的关联数组中生成`administrator/components/com_menus/models/item.php line 1198`的 md5 散列。

# security - Best approach to mobile web app security/authentication?

> ID：11971705
> 
> 赞同：2
> 
> 时间：2012-08-15T14:56:02.900
> 
> 标签：security, authentication, mobile

I'm working on a mobile web app solution for a company. It has several features which pull data from an internal SharePoint server using web services. It also connects to multiple databases on internal company servers. Everything is fine and dandy when I deploy the project from localhost (using my default credentials or someone else's).

But when it comes to an external device, I have no idea how to go about working on login authentication (using Active Directory) or security. Any advice on the best way to get started?

# android - min3D code is showing just black screen

> ID：11971707
> 
> 赞同：0
> 
> 时间：2012-08-15T14:56:09.353
> 
> 标签：android, android-animation

I am trying to create a 3D animation using min3D with the project in code.google.com

[http://code.google.com/p/min3d/source/browse/trunk/sampleProjects/min3dSampleProject1/src/min3d/sampleProject1/ExampleRotatingPlanets.java](http://code.google.com/p/min3d/source/browse/trunk/sampleProjects/min3dSampleProject1/src/min3d/sampleProject1/ExampleRotatingPlanets.java)

I have downloaded the Activity file and picture files, I have declared the activity in manifest file as

```
 <activity android:name=".Animation_3dActivity"      android:label="@string/app_name">
             <intent-filter>
            <action android:name="android.intent.action.MAIN" />

            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
     </activity> 
```

I am using android minSDKVersion as 11.

But when I open the activity in emulator, it is just showing the title bar and a black screen.

With reference to the question in stack overflow,

[Min3d doesn't show anything (in sample from min3d wiki)](https://stackoverflow.com/questions/10914120/min3d-doesnt-show-anything-in-sample-from-min3d-wiki)

It was mentioned that min3D jar has some problem and need to be downloaded again. I replaced with 2-3 jars the problem is still the same.

Can someone please let me know what might be the issue?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-19T20:04:22.843

是的，min3D 代码有问题。我刚刚从谷歌复制了 min3Daccelorometer 示例并复制粘贴了 min3D 源文件。它运作良好。

# android - How to assign several location on google map from dataBase?

> ID：11971723
> 
> 赞同：0
> 
> 时间：2012-08-15T14:57:03.873
> 
> 标签：android, sqlite, list, google-maps

i want to get all the locations from a table Called Mission in my database then i want to assign these locations into my map ...i tried this code but it does not work it shows only one location i need help for this code to work well ?

```
 public class MaptoDo extends MapActivity{
MapView mv;
MapController mc;
SQLiteDatabase sql;
Cursor c;
GeoPoint p;
double [] lat;
double[]lon;
List<Overlay> listOfOverlays;
  @Override
    public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
        setContentView(R.layout.googlemap);
        Intent in =getIntent();
        mv=(MapView) findViewById(R.id.mapView);
        mv.setBuiltInZoomControls(true);
        mv.setSatellite(true);
        sql=openOrCreateDatabase("db",0,null);
        c=sql.rawQuery("select * from Mission",null);
        double [] lat = new double[c.getColumnCount()];
        double [] lon = new double[c.getColumnCount()];
        if(c.getColumnCount()!=0){
            int i=0;
            int count=c.getColumnCount();
            c.moveToFirst();
            while(count>0){
                lat[i]=c.getDouble(3);
                lon[i]=c.getDouble(4);
                i++;
                count--;

            }
            c.close();
            }
        for(int i=0;i<lat.length;i++)
        {
            p=new GeoPoint((int)lat[i]*1000000,(int) lon[i]*1000000);
             mc = mv.getController();
            mc.animateTo(p);
            mc.setZoom(8);
            MapOverlay mapOverlay = new MapOverlay(p,"hi","locate new point");
            listOfOverlays = mv.getOverlays();
            listOfOverlays.clear();
            listOfOverlays.add(mapOverlay);
            mv.invalidate();

        }
    }
  @Override
  public boolean onCreateOptionsMenu(Menu menu) {
    // TODO Auto-generated method stub
    MenuItem itIn=menu.add("Zoom in");
    itIn.setIcon(R.drawable.in);
    MenuItem itOut=menu.add("Zoom out");
    itOut.setIcon(R.drawable.out);
    return super.onCreateOptionsMenu(menu);

  }
  @Override
  public boolean onOptionsItemSelected(MenuItem item) {
    // TODO Auto-generated method stub
    if(item.getTitle()=="Zoom in")
    {
        MapController mc=mv.getController();
        mc.zoomIn();
    }
    else if(item.getTitle()=="Zoom out")
    {
        MapController mc=mv.getController();
        mc.zoomOut();
    }

    return super.onOptionsItemSelected(item);
  }
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}

public class MapOverlay extends com.google.android.maps.Overlay
{
    public MapOverlay(GeoPoint p, String string, String string2) {
        // TODO Auto-generated constructor stub
    }
    @Override
    public boolean draw(Canvas canvas, MapView mapView, boolean shadow,
            long when) {
        super.draw(canvas, mapView, shadow);
        Point screenPts = new Point();
        mapView.getProjection().toPixels(p, screenPts);
        Bitmap bmp = BitmapFactory.decodeResource(
        getResources(), R.drawable.redpushpin);
        canvas.drawBitmap(bmp, screenPts.x-20, screenPts.y-34, null);
        return true;
    }
    @Override
    public boolean onTouchEvent(MotionEvent event, MapView mapView)
    {
    if (event.getAction() == 1) {
    GeoPoint p = mapView.getProjection().fromPixels((int) event.getX(),(int) event.getY());
    Toast.makeText(getBaseContext(),"Location: "+p.getLatitudeE6() / 1E6 + "," +
    p.getLongitudeE6() /1E6 ,Toast.LENGTH_SHORT).show();
    }
            return false;

    }
}} 
```

the class that takes the Mission from the user and put them into the table of the DataBase is here it works well but i put it for more clearance of the first code :

```
 public class newMission extends Activity 
   implements OnClickListener{
SQLiteDatabase sql;
EditText e1,e2,e3,e4;
Button b;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    Intent in =getIntent();
    setContentView(R.layout.newmission);
    e1=(EditText) findViewById(R.id.edn1);
    e2=(EditText) findViewById(R.id.edn2);
    e3=(EditText) findViewById(R.id.edn3);
    e4=(EditText) findViewById(R.id.edn4);
    b=(Button) findViewById(R.id.btnew);
    b.setOnClickListener(this);
    sql=openOrCreateDatabase("db",0, null);
    sql.execSQL("CREATE TABLE if not exists Mission" +
            "" +
            " (emp integer REFERENCES Employee2 (password)," +
            "oper_n text,cust_n text,lat double," +
            "long double,oper_id integer PRIMARY KEY AUTOINCREMENT)");
}
@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    String opN=e1.getText().toString();
    String cuN=e2.getText().toString();
    String lats=e3.getText().toString();
    String  lons=e4.getText().toString();
     try {
          double lat=Double.parseDouble(lats);
          double lon=Double.parseDouble(lons); 
        //  float lat=Float.parseFloat(lats);
         // float lon=Float.parseFloat(lons);

  sql.execSQL("INSERT INTO Mission (oper_n,cust_n,lat,long)Values('"+opN+"','"+cuN+"'," +lat+ "," +lon+ ");");
  Toast.makeText(this,"Data Inserted",2000).show();
    //add to ToDo list too 
}catch (NumberFormatException nfe) {
    Toast.makeText(this, "Please Enter Valid Data",2000).show();
}
     } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-20T06:46:32.873

错误在于这一行：listOfOverlays = mv.getOverlays(); listOfOverlays.clear();

从 for 循环中删除此代码。这在 for 循环之前。还要从 for 循环中删除 mv.invalidate 并将其添加到循环之后。

# facebook - 是否可以创建仅适用于特定用户的私有应用程序？

> ID：11971727
> 
> 赞同：4
> 
> 时间：2012-08-15T14:57:14.770
> 
> 标签：facebook, private

基本上，我们想为 facebook 创建一个应用程序。在我们系统上拥有帐户的用户能够安装我们的 facebook 应用程序。我们不希望所有 facebook 用户都使用此应用程序。这可能吗 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T16:01:23.593

现在正在安装 Facebook 应用程序。您不能限制用户在 Page Tab 中安装您的应用。但是你可以限制你的内容，你想显示哪个用户/页面ID。

1) 基于用户的限制。

您放置一个放置`if()`条件来检查用户是否在您的数据库中。如果是，则仅显示内容，否则您将显示您没有权限的消息

2) 限制页面。

如果您想限制您的应用程序只能在某些 Facebook 页面中访问，那么您可以使用签名请求来获取页面 id 并检查此页面 id 是否已在您的系统中注册。然后在这种情况下显示您的应用内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T15:14:25.907

是的。

1.  转到应用程序的设置。
2.  选择“基本”选项卡。
3.  对于“沙盒模式：”选择“启用”。

现在您的应用程序对所有用户都关闭了。要让某些用户访问您的应用程序，请执行以下步骤：

1.  在应用程序的设置中选择选项卡“角色”。
2.  在以下类别之一中添加用户的 UID：管理员、开发人员、测试人员。

现在此用户可以访问您的应用程序。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-15T15:16:19.853

例如，您可以连接到存储用户帐户的数据库并进行身份验证过程。

# java - 计算带有百分比答案的系统的错误率

> ID：11971731
> 
> 赞同：-3
> 
> 时间：2012-08-15T14:57:32.380
> 
> 标签：java, cluster-analysis, classification

我会很感激这方面的想法。想象一下，我有一个软件（约束满足求解），它可以解决一个问题并给出如下答案：

100 % A 是解决方案，

100 % B 是解决方案，

70 % C 是溶液，

50% D 是溶液，

而正确答案是 C。

想象一下，最终所有答案都将在我的系统中考虑，因此尽管不确定性较低，但提出正确答案仍然是一项成就。我不会丢弃百分比低于 100 的答案。但是，找到合适的评估函数或错误率计算很重要。

如何计算我的系统的错误率。

有人可能会说上面的例子有 100% 的错误率，因为答案既不是 A 也不是 B。如果正确答案是 B 并且只有 B 怎么办。错误率是多少？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T22:33:28.527

好吧，显而易见的方法是计算所有回复的平均错误。

使用平均绝对偏差 (MAD)：

```
(|1-0| + |1-0| + |.7-1| + |.5-0|) / 4 = (1+1+.3+.5)/4 = 2.8/4 = 0.7 
```

或均方误差 (MSE)：

```
(|1-0|^2 + |1-0|^2 + |.7-1|^2 + |.5-0|^2) / 4 = (1+1+.09+.25)/4 = 2.34/4 = 0.585 
```

两者都有其优点和缺点。

（上面的例子是使用 的“正确”向量`0 0 1 0`，但它也允许答案是例如“任何 ABC D” `1 1 1 1`，例如使用 。您可以确保这些值总和为 1 或不是）。同样，如果您知道一个答案是正确的，您可能希望将算法输出归一化为总和为 1。在您的示例中，这将使 的答案正常化`.3125 .3125 .21875 .15625`，这可能具有较低的错误。）

# php - do_something-tag 中的 PHP 字符串

> ID：11971733
> 
> 赞同：-3
> 
> 时间：2012-08-15T14:57:40.667
> 
> 标签：php, wordpress

我想执行此操作：

```
<?php echo do_shortcode('[add_to_cart item="<?php the_field('item_number'); ?>"]'); ?> 
```

如何在 do_shortcode-tag 中添加 the_field-tag？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T15:00:09.553

做：

```
 <?php echo do_shortcode('[add_to_cart item="' . the_field('item_number') . '"]'); ?> 
```

您永远不能将 php 标签放在另一个 php 标签中。代码会中断。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:31:26.730

我猜您需要在循环中*获取该字段*，您尝试过吗？

```
 <?php $theField = get_field('item_number'); ?> 
```

然后回显您的简码

```
 <?php echo do_shortcode('[add_to_cart item="'.$theField.'"]'); ?> 
```

# c++ - 如何判断传入的数组是一维、二维还是ND数组

> ID：11971734
> 
> 赞同：3
> 
> 时间：2012-08-15T14:57:41.150
> 
> 标签：c++, c, multidimensional-array

我想编写一个函数，它将接受一个数组作为输入参数。并且该函数应该打印数组的所有元素。

> ```
> print_array(arr)
> {
>   //print all the elemnts of arr.
> } 
> ```

我不知道该怎么做。

我认为首先我们需要找出传递的数组是 1-D 还是 2-D 还是 3-D 等等...数组

因为，要打印以下元素：

> ```
>  1-D array, you need only 1 for loop.
>                             2-D array, you need only 2 for loop.
>                             3-D array, you need only 3 for loop. 
> ```

但是，我不知道您将如何识别它的一维、二维或 ND 阵列。请帮忙。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-15T15:32:25.267

[`std::rank`](http://en.cppreference.com/w/cpp/types/rank)实际上，您可以通过使用 C++11 的类型特征的单个重载非常容易地找出确切的维数：

```
#include <type_traits>
#include <iostream>

template<class T, unsigned N>
void print_dimensions(T (&)[N]){
  static unsigned const dims = std::rank<T>::value + 1;
  std::cout << "It's a " << dims << "-D array, you need "
            << dims << " for-loops\n";
} 
```

* * *

但是，您实际上根本不需要`std::rank`打印所有元素。这可以通过简单的重载轻松解决：

```
namespace print_array_detail{
template<class T>
void print(T const& v){ std::cout << v << " "; }
template<class T, unsigned N>
void print(T (&arr)[N]){
  for(unsigned i=0; i < N; ++i)
    print(arr[i]);
  std::cout << "\n";
}
}

template<class T, unsigned N>
void print_array(T (&arr)[N]){ print_array_detail::print(arr); } 
```

[活生生的例子。](http://liveworkspace.org/code/f4622fabef36947fcf7fcdad6de1be58)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T15:11:50.057

您可以通过模板和 C++ 中的重载来达到此目的。考虑

```
template<size_t X, size_t Y>
int sum_array_dimensions(int (&arr)[X][Y])
{
  // it's 2d
  return X + Y;
}

template<size_t X, size_t Y, size_t Z>
int sum_array_dimensions(int (&arr)[X][Y][Z])
{
  // it's 3d
  return X + Y + Z;
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T15:13:23.993

您可以在参数中编码维数，并传递一维数组

```
#define N1 10
#define N2 100
void function(unsigned dimensions, int* array)
{ switch(dimension):
  { case 1:
      for (int i=0;i<N;i++)
      { ... array[i] ...
      }
      break;
    case 2:
      for (int i=0;i<N;i++)
      { for (int j=0;j<N;j++)
        { ... array[i*N+j] ...
        }
      }
      break;
    case 3:
      for (int i=0;i<N;i++)
      { for (int j=0;j<N;j++)
        { for (int k=0;k<N;k++)
          { ... array[i*N2+j*N+k] ...
          }
        }
      }
      break;
  }
} 
```

如果 N 是 2 的幂，您可以使用`<<`左移 ( `x*2^n == x<<n`)
**编辑**扩展解决方案来优化乘法

```
// the array is 0-indexed
void function(unsigned* dimensions, int* array)
{ //dimensions[0] = number of dimensions
  //dimensions[1 ... dimensions[0] ] the dimensions themselves
  for(int i=1,n=1;i<=dimensions[0];i++)
  { n*=dimensions[i]; }
  /* if the order in the array happens to be the wanted one */
  for(int i=1;i<=n;i++)
  { print( array[i] );
  }
  /* otherwise the dimensions are specified in the dimension array */
  for(int i=1;i<=n;i++)
  { int k=0;
    int temp=i;
    int base=1;       
    for(int j=1;j<=dimensions[0];j++)
    { k+=(temp%dimension[j])*base;
      base*=dimension[j];
      temp/=dimension[j];
    }
    print(array[k]);
  }   
  */ 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-15T15:24:32.440

正如其他人所说，当您将数组传递给函数时，数组的大小会丢失（除非您通过引用传递）。所以你可以做这样的事情：

```
/* this function does the work */
template <typename T>
void bar(T* arr, size_t n_dims, size_t* sizes)
{
    std::cout << n_dims << " dimension(s)\n";
    for (size_t i = 0; i < n_dims; ++i)   // for each dimension
        for (size_t j = 0; j < sizes[i]; ++j) ; // for each element
}

/* These are helper overloads to call bar with correct arguments. */
/* You'll need to provide one for each number of dimension you want to support */

template<typename T, size_t N>
void foo(T (&arr)[N])
{
    size_t sizes[] = {N};
    bar(arr, 1, sizes);
}

template<typename T, size_t N, size_t M>
void foo(T (&arr)[N][M])
{
    size_t sizes[] = {N, M};
    bar(arr, 2, sizes);
}

template<typename T, size_t N, size_t M, size_t O>
void foo(T (&arr)[N][M][O])
{
    size_t sizes[] = {N, M, O};
    bar(arr, 3, sizes);
}

int main()
{
    int arr1[42];
    int arr2[2][2];
    int arr3[2][3][4];
    foo(arr1);
    foo(arr2);
    foo(arr3);
} 
```

[活生生的例子。](http://ideone.com/dEDIn)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T15:02:04.270

你做不到。但是您可以编写 3 个具有相同名称和不同参数（不同数组类型）的不同函数，然后每个函数将处理它自己的数组。

# android - android.os.NetworkOnMainThreadException even though I set target SDK to android 1.6

> ID：11971738
> 
> 赞同：1
> 
> 时间：2012-08-15T14:58:11.643
> 
> 标签：android

I have an android project that is set to run on android 3.2, and I have a library project that uses networking in its main thread, which by sdk version of 3,2 throws android.os.NetworkOnMainThreadException. By SDK version below Honeycomb using network in main thread is ok: [http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html](http://developer.android.com/reference/android/os/NetworkOnMainThreadException.html).

To solve this problem, I tried setting my library project's SDK version to 1.6, however the same error is still there! Is this normal behavior of Android? Isn't it wrong? What about backward compatibility?

Edit: I know that I should not perform a network request in main thread, however its not my code that does it, but the library that I have to use. I cannot/would not like to touch the code of the library, its a commercial API that belongs to other company.

Edit 2: I am of course trying to get a newer/fixed version of that library, but that is another issue. So my question now is, is there a way to compile/run the library with an older SDK?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:00:15.660

我认为底线是，如果您尝试在 3.0+ 设备/模拟器上运行它，它将无法工作。您需要使用 AsyncTask。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:02:53.600

您正在使用的库项目*不应*在主线程上执行网络操作。Android 抛出这个异常是因为这样做是非常糟糕的做法。

**你不应该破解你的方式`NetworkOnMainThreadException`**; 使用 an`AsyncTask`或 a`Thread`来执行网络操作。

阅读这篇[**博文**](http://www.androiddesignpatterns.com/2012/06/app-force-close-honeycomb-ics.html)了解更多信息。

# sql - 验证年份的案例说明

> ID：11971745
> 
> 赞同：0
> 
> 时间：2012-08-15T14:58:36.913
> 
> 标签：sql, oracle

我正在寻找一份`case`声明，以验证 4 位数年份是否正确。

例如，如果我选择了`ID`and `DT`（数据类型为DATE），并且日期错误，请不要显示它。

```
SELECT ID, to_char(DT,'yyyy-mm-dd hh:mm:ss') from DB_TABLE 
```

将导致以下结果：

```
ID  DT
1   0208-03-25 12:26:00
2   2008-04-01 13:45:18
3   2000-11-15 13:45:18 
```

我的目标是编写一个查询，当日期不正确时将 null 放在日期列中：

```
select ID, case when DT is not valid then null else dt from DB_TABLE 
```

将导致以下结果：

```
ID  DT
1   null
2   2008-04-01 13:45:18
3   2000-11-15 13:45:18 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:06:11.997

试试这样：

```
select ID,
  case
    when extract(year from DT) between 1900 and 2050
      then DT
    else null
  end as DT
from DB_TABLE; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:12:10.423

像这样的东西

```
 select case 
       when length (to_char(extract(year from to_date('0208-03-25','YYYY-MM-DD')))) < 4 
          or extract(year from to_date('0208-03-25','YYYY-MM-DD')) not between 1800 and 2013
           then NULL           
       else to_date('0208-03-25','YYYY-MM-DD')
       end as DT
  from dual; 
```

您可以定义自己的比较逻辑，与上述逻辑相反。

因此，对于您的查询-

```
select ID, case 
           when length (to_char(extract(year from DT))) < 4 
              or extract(year from DT) not between 1800 and 2013
               then NULL
           else DT
           end as DATE_DT
 from DB_TABLE; 
```

我`< 4`今年的原因`0208`被认为是 Oracle 中的有效年份，但是这可以通过范围检查使用 来检查，所以如果你有一个年份范围`between`，你应该只接受year 。如果您没有年份范围，那么检查应该足以在数据中找到“史前”年份。`between``1900``2015``length`

# android - Google Play 开发者统计 API

> ID：11971748
> 
> 赞同：6
> 
> 时间：2012-08-15T14:58:41.597
> 
> 标签：android, api, console, statistics, google-play

是否有任何 API 可以让人们从 Google Play 获取其应用程序的统计信息？我认为Android App Andlytics会做这样的事情（尽管由于控制台内部的变化，他们有很多更新......）但这是否也可以通过某种方式使用API​​进行开发？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T15:26:21.087

不幸的是，目前没有用于开发人员统计的 API。像 Andlyitics 这样的应用程序使用屏幕抓取（我相信在应用程序中说明），这就是为什么它们必须在控制台发生变化时进行更新。

# python - Python 字典，具有后备功能的关键存在

> ID：11971752
> 
> 赞同：5
> 
> 时间：2012-08-15T14:58:52.070
> 
> 标签：python

这些方法之间有什么区别、陷阱或缺点吗？

```
foo = dict(key=u"")
bar = foo.get('key', 'foobar') 
```

对比

```
foo = dict(key=u"")
bar = bool(foo['key']) or 'foobar' 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-15T15:02:03.800

您绝对不应该使用第二种形式，因为`KeyError`如果您的字典中不存在该键，它会抛出 a 。由于设置了密钥，因此您只能从第二种形式中获得可接受的行为。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T15:03:14.740

第一段代码尝试从`foo`关联的中获取值`key`，如果`foo`没有键`key`，则默认为`foobar`。所以这里有两种情况：

1.  `foo`有钥匙`key`，所以`bar`设置为`foo[key]`
2.  `foo`没有钥匙`key`，所以`bar`设置为`"foobar"`

第二个查看与 中的键关联的值`key`，`foo`如果该值是假的（即 if `bool(foo[key])==False`），则默认为`foobar`。如果`foo`没有密钥`key`，它会引发一个`KeyError`. 所以这里有*三种*情况：

1.  `foo`有密钥`key`，并且`bool(foo[key])==True`，所以`bar`设置为`True`
2.  `foo`有密钥`key`，并且`bool(foo[key])==False`，所以`bar`设置为`"foobar"`
3.  `foo`没有密钥`key`，因此代码引发了`KeyError`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-15T15:01:34.640

`KeyError`如果`foo['key']`不存在，第二个示例将引发。

如果您想为`bar`if`foo['key']`不存在或包含 false 值分配默认值，这将是 Pythonic 的方法：

```
bar = foo.get('key') or 'foobar' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T15:03:26.823

这是使用的问题`bool()`

```
one = {"my_key": None}

print "Get:", one.get("my_key")
print "Bool:", bool(one.get("my_key"))
print "Get with falback:", one.get("my_key", "other")

Get: None
Bool: False
Get with falback: None 
```

请注意，其中有一个值`None`，但 bool 的计算结果为 false。您应该使用`get("key", "default")`，它旨在完成这项工作。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T15:05:49.753

如果您认为`foo = dict(key=u"")`会生成一个默认值为空字符串的字典，那您就错了。你需要一个`defaultdict`：

```
In [6]: bool(foo['key']) or 'foobar'
Out[6]: 'foobar'
In [7]: foo = dict(key='')
In [9]: bool(foo['nokey']) or 'foobar'
KeyError: 'nokey' 
```

要么使用`defaultdict`, 要么`dict.get`, 甚至`dict.setdefault`.

好的方法也有效：

```
In [10]: try:
   ....:     v = foo['nokey']
   ....: except KeyError:
   ....:     v = 'foobar'
   ....:     

In [11]: v
Out[11]: 'foobar' 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T15:08:47.657

是的：

`foo.get('key', 'foobar')`总是返回一些东西（如果有一个名为'key'的键，它将返回它的值，如果没有这样的键，它将返回'foobar'。

但如果没有名为“key”的键，则`bool(foo['key']) or 'foobar'`可以引发 a 。`KeyError`

此外 -`or`这里的使用不是指示性的，因此该`get`方法是可取的。

# php - jQuery Blueimp 上传插件的自定义 $options 目录？

> ID：11971753
> 
> 赞同：3
> 
> 时间：2012-08-15T14:58:56.153
> 
> 标签：php, jquery, plugins, file-upload, blueimp

我一直在使用[blueimp jQuery File Upload 插件](https://github.com/blueimp/jQuery-File-Upload/)，我正在尝试设置一个用户可以更改上传的自定义字段。

在 PHP 类中有一个设置所有默认选项变量的结构。我正在寻找可以存储此数据的最佳方式，因此在用户设置值后，它将保存为新的默认上传文件夹。我正在考虑一个外部 XML 文件，将它们导入到 PHP 脚本中。

这是上传类的构造函数：

```
 function __construct($options=null) {
    $this->options = array(
        'script_url' => $this->getFullUrl().'/',
        'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/', 
```

我希望这是有道理的，我很乐意澄清任何事情。但基本上 - 我怎样才能允许用户手动输入目录结构并成为图像的新上传目录？我在哪里可以保存这个新的字符串变量？可能不在 PHP 内部，但可能在外部文件中，如 XML 或 JSON？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-16T00:41:07.750

我注意到你和我几乎同时在 github 上发布了一个 blueimp 上传问题。我不确定我是否有完整的答案给你，但让我给你到目前为止我发现的东西。也许它会有所帮助：

我一直在寻找一种方法来过滤用户从经过身份验证的系统中上传的文件。我发布了 github.com/blueimp/jQuery-File-Upload/issues/1578 。插件作者建议我在服务器端进行过滤。我找到了 github.com/blueimp/jQuery-File-Upload/issues/1149，它解释了如何在服务器端进行过滤。我已经这样做了，它可以上传。我现在进行了设置，每个用户在上传文件夹中都有一个子文件夹，名为他们的唯一 ID 号，其中包含他们的图像。所以无论如何，这是一种设置上传路径的动态方式。也许你可以使用它。

我目前的问题是，虽然我可以确认图像已上传，但它们在下载表中不可见。请参阅 github.com/blueimp/jQuery-File-Upload/issues/1587。

我为解决此问题所做的一次尝试包括尝试将选项传递给构造函数：

这是我在 blueimp index.php 文件中的代码：

```
$customer_path_files = dirname($_SERVER['SCRIPT_FILENAME']) .     DIRECTORY_SEPARATOR.         'files' . DIRECTORY_SEPARATOR . $uid . DIRECTORY_SEPARATOR;
    if (!file_exists($customer_path_files)) {
    @mkdir($customer_path_files);
}
$customer_path_thumbnails = dirname($_SERVER['SCRIPT_FILENAME']) . DIRECTORY_SEPARATOR     . 'thumbnails' . DIRECTORY_SEPARATOR . $uid . DIRECTORY_SEPARATOR;
if (!file_exists($customer_path_thumbnails)) {
    @mkdir($customer_path_thumbnails);
}

$options=array(
'upload_dir' => $customer_path_files,
'upload_url' => base_url().'blueimp/server/php/files/'.$uid.'/',
'thumbnail' => array(
                'upload_dir' => $customer_path_thumbnails,
                'upload_url' => base_url().'blueimp/server/php/thumbnails/'.$uid.'/',
                'max_width' => 80,
                'max_height' => 80
            )
);

require('upload.class.php');

$upload_handler = new uploadHandler($options); 
```

希望这里有帮助，

* * *

附录：

我希望确实如此。顺便说一句，我阅读了[Jquery 文件上传插件：动态更改上传路径？](https://stackoverflow.com/questions/11056171/jquery-file-upload-plugin-dynamically-change-upload-path). 这**正是**我想要做的。如果您也是，我只想说我还尝试将隐藏字段中的会话变量（在我的情况下为 codeigniter 变体（ $this->session->userdata('uid') ）传递给插件的索引。 php 文件，但就像在帖子中一样，它在 index.php 中不存在（我认为是因为，上传按钮不是为重新填充或删除而推送的）。这是我第一次使用 ajax，但我认为会话 ID 必须以某种方式通过 Json 发送。我试图弄清楚这一点。听起来这就是 Chris G 所做的。如果有任何帮助，我已经发布了以下问题以及更多详细信息：

[http://www.dynamicdrive.com/forums/showthread.php?p=279824](http://www.dynamicdrive.com/forums/showthread.php?p=279824)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T17:40:37.037

我的 wordpress 用户数据代码，

**前：**

```
function __construct($options = null, $initialize = true) {

    $this->options = array(
        'script_url' => $this->get_full_url().'/',
        'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/',
        'upload_url' => $this->get_full_url().'/files/',
        'user_dirs' => false,
        'mkdir_mode' => 0755,
        'param_name' => 'files', 
```

**后：**

```
function __construct($options = null, $initialize = true) {

    require_once '../../../../wp-config.php';
    global $wpdb, $user_ID;

        if($user_ID) $userdi = $user_ID.'/';

    $this->options = array(
        'script_url' => $this->get_full_url().'/',
        'upload_dir' => dirname($_SERVER['SCRIPT_FILENAME']).'/files/'.$userdi,
        'upload_url' => $this->get_full_url().'/files/'.$userdi,
        'user_dirs' => false,
        'mkdir_mode' => 0755,
        'param_name' => 'files', 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-01T00:14:58.660

一些评论——

. 这些职位来自 2012/13 年度。更高版本的 jQuery File Upload 有一个选项，'user_dirs' => true，它将用户标识符插入到存储文件的路径中：（来自 UploadHander.php）

```
protected function get_upload_path($file_name = null, $version = null) {
    ...
    return $this->options['upload_dir'].$this->get_user_path().$file_name;
} 
```

其中 get_user_path 返回一个空字符串，除非 user_dirs 为真。

. 除了用您喜欢的选项重写 UploadHander.php 之外，您还可以将选项传递给 UploadHandler 构造函数——在 server/php/index.php 中，替换

```
$uploadHandler = new UploadHandler(); 
```

和

```
$uploadHandler = new UploadHandler(array('option1' => value,
                                         'option2' => value)); 
```

# c# - 暂停计时器似乎无法正常工作

> ID：11971755
> 
> 赞同：0
> 
> 时间：2012-08-15T14:59:09.947
> 
> 标签：c#, timer

我编写了一个应用程序，它每 10 秒通过 FTP 下载文件，并且我有以下计时器代码。

```
timer3.Tick += new EventHandler(updateLogs);
timer3.Interval = (1000) * (10);
timer3.Enabled = true;
timer3.Start(); 
```

我的 updateLogs 函数：

```
timer3.Enabled = false;
server1_log = downloadLog("192.168.0.217", 1);
server2_log = downloadLog("192.168.0.216", 2);
server3_log = downloadLog("192.168.0.215", 3);
timer3.Enabled = true; 
```

我意识到请求可能需要超过 10 秒的时间，这就是为什么我在调用 downloadLog() 之前禁用计时器并在之后启用计时器。

尽管如此，大约一分钟后，应用程序冻结并且 CPU 使用率跃升至 45+ %。当我注释掉 timer3 的代码时，应用程序可以正常运行很长时间，并且从不崩溃。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T15:12:58.750

如果您正在使用`System.Windows.Forms.Timer`，您应该期待这种行为。尽管这个类给你一种它异步执行操作的错觉，但它实际上是在使用 UI 线程来做实际的工作。因此，如果你的计时器执行的逻辑卡住了，你的 UI 也会卡住。

* * *

为了缓解这种情况，您应该使用实际上在后台线程上工作的计时器，或者使用`BackgroundWorker`.

.NET BCL中有三个`Timer`类。

1.  [System.Windows.Forms.Timer](http://msdn.microsoft.com/en-us/library/system.windows.forms.timer.aspx)
2.  [System.Threading.Timer](http://msdn.microsoft.com/en-us/library/system.threading.timer.aspx)
3.  [System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)

最适合您的需求是[System.Timers.Timer](http://msdn.microsoft.com/en-us/library/system.timers.timer.aspx)（关于此的讨论会相当长。有关更多信息，最好阅读[MSDN 杂志比较这三个的文章](http://msdn.microsoft.com/en-us/magazine/cc164015.aspx)）。

在异步执行工作和更新 UI 时，您还需要知道的是，您不能/不应该直接从工作线程访问 UI。看看[关于这个主题的 SO question](https://stackoverflow.com/questions/10170448/how-to-invoke-an-ui-method-from-another-thread)。

# django - berkeley dbxml django mod_wsgi 无法使用错误：“终于”弹出错误异常

> ID：11971766
> 
> 赞同：0
> 
> 时间：2012-08-15T14:59:45.813
> 
> 标签：django, exception, mod-wsgi, berkeley-db-xml

我有一个连接到 bdbxml 的 python/django 应用程序“mysite”。该应用程序使用 django 开发服务器运行良好，但在使用 mod_wsgi 和 apache 运行时失败 - 我选择的生产路线。具体来说，连接到数据库的应用程序部分失败并显示非常无用的消息，“终于”弹出错误异常。

我通过谷歌搜索相信这个错误是由 C++ 应用程序在没有其他错误消息生成时生成的通用错误，但我不是 C++ 专家，所以真的不知道它是什么意思。

我的 views.py 函数如下所示：

```
def dbquery(request):
  mgr = XmlManager()
  container = mgr.openContainer("/wsgi/mysite/mysite.bdbxml")
  results = container.getAllDocuments(0)
  for value in results:
    document = value.asDocument()
    return HttpResponse (document.getName()) 
```

我的 django.wsgi 文件（使用 Graham Dumpleton 建议的格式）看起来像：

```
import os, sys

sys.path.append('/wsgi')
sys.path.append('/wsgi/mysite')

import settings

import django.core.management
django.core.management.setup_environ(settings)
utility = django.core.management.ManagementUtility()
command = utility.fetch_command('runserver')

command.validate()

import django.conf
import django.utils

django.utils.translation.activate(django.conf.settings.LANGUAGE_CODE)

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler() 
```

和 httpd.conf 看起来像：

```
WSGIApplicationGroup %{GLOBAL}

WSGIScriptAlias / /wsgi/mysite/apache/django.wsgi

<Directory /wsgi/mysite>
  Order deny,allow
  Allow from all
</Directory> 
```

有谁知道如何解决这个问题？

谢谢

**更新**

根据 Graham Dumpleton 的建议，该问题可能与数据库的权限有关，这里是 ls -las 的输出，显示了数据库所在目录的权限。所有文件和文件夹都归 apache 所有。

```
 4 drwxr-xr-x 5 apache apache   4096 May  5 06:26 .
  4 drwxr-xr-x 3 apache apache   4096 May  4 22:09 ..
  4 drwxr-xr-x 2 apache apache   4096 May  5 14:52 apache
  4 -rw-r--r-- 1 apache apache     16 May  5 05:05 index.html
  4 -rw-r--r-- 1 apache apache     12 May  5 04:52 index.html~
  0 -rw-rw-r-- 1 apache apache      0 May  4 22:09 __init__.py
  4 -rw-r--r-- 1 apache apache    114 May  5 05:39 __init__.pyc
  4 -rw-rw-r-- 1 apache apache    503 May  4 22:09 manage.py
164 -rwxr-xr-x 1 apache apache 163840 May  5 05:23 mysite.bdbxml
  4 drwxr-xr-x 2 apache apache   4096 May  5 05:26 scripts  
  8 -rw-rw-r-- 1 apache apache   5060 May  5 04:50 settings.py
  8 -rw-rw-r-- 1 apache apache   5031 May  4 22:09 settings.py~
  4 -rw-r--r-- 1 apache apache   2784 May  5 05:39 settings.pyc
  4 drwxr-xr-x 2 apache apache   4096 May  5 04:49 templates
  4 -rw-rw-r-- 1 apache apache    639 May  5 05:32 urls.py
  4 -rw-rw-r-- 1 apache apache    600 May  5 04:42 urls.py~
  4 -rw-r--r-- 1 apache apache    444 May  5 05:40 urls.pyc
  4 -rw-r--r-- 1 apache apache    609 May  5 06:26 views.py
  4 -rw-r--r-- 1 apache apache    609 May  5 06:26 views.py~
  4 -rw-r--r-- 1 apache apache    914 May  5 06:26 views.pyc 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T09:12:24.750

经过完全重新安装后，我现在可以确认 Graham 的评论是正确的。该问题与权限有关。

一旦 apache 进程成为包含应用程序和数据库文件的目录的所有者，它就开始工作了。

```
$chown -R apache:apache /wsgi 
```

谢谢！

# sql - 创建触发器以限制在特定日期插入记录

> ID：11971770
> 
> 赞同：0
> 
> 时间：2012-08-15T14:59:49.560
> 
> 标签：sql, sql-server, database, triggers

我有一个数据库表如下：

```
create table Table1(
Date varchar(10),
Batch_Name varchar(50),
Hall_Name varchar(50),
Lecturer_Name varchar(100)) 
```

我想为此表创建一个触发器，这将限制在特定日期插入相同的批次名称、大厅名称或讲师名称。例如：如果用户插入，

```
**Record 1 :** 2012/08/15 - Batch 1 - Hall 1 - Lecturer 1
**Record 2 :** 2012/08/15 - Batch 2 - Hall 2 - Lecturer 2 
```

到表，应该是正确的。但是如果用户试图插入为

**记录 1 :** 2012/08/15 - Batch 1 - Hall 1 - Lecturer 1

```
**Record 2 :** 2012/08/15 - Batch 1 - Hall 1 - Lecturer 2 **OR**
**Record 2 :** 2012/08/15 - Batch 1 - Hall 2 - Lecturer 1 **OR** 
**Record 2 :** 2012/08/15 - Batch 2 - Hall 1 - Lecturer 1 
```

它应该提供一个错误。

我正在使用此表为特定系统创建时间表。我试图通过此触发器实现的是，如果用户尝试在同一天在不同的记录上分配相同的大厅、讲师或批次，我想提供一个错误，这显然是过度分配。在触发器方面，我是一个新手，所以如果有人能为我提供这种情况的解决方案，我将不胜感激！我使用 MS SQL Server 2008 作为 DBMS。提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:04:18.547

我认为这不一定是触发器

这听起来像是一组 3 个唯一索引。

在对上创建唯一索引：

```
day, lecturer
day, batch
day, hall 
```

# qgis - QGIS Windows 错误

> ID：11971774
> 
> 赞同：1
> 
> 时间：2012-08-15T15:00:01.913
> 
> 标签：qgis

我已经按照[本](http://hub.qgis.org/projects/quantum-gis/wiki/QGIS_Server_Tutorial)教程设置了 QGIS，但是在查看地图的功能时，即 localhost/qgis/qgis_mapserv.fcgi.exe?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetCapabilities 或 localhost/qgis/qgis_mapserv.fcgi.exe ?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetCapabilities&map=c:/myprojects/world.qgs

我收到错误，

内部服务器错误

服务器遇到内部错误或配置错误，无法完成您的请求。

请联系服务器管理员 admin@local.domain 并告知他们错误发生的时间，以及您所做的任何可能导致错误的事情。

服务器错误日志中可能提供有关此错误的更多信息。

但是 localhost/ 显示的是主页，

![对于本地主机/](../Images/3ee73875807ef6751f98cca5d01eaa11.png)

我在网上进行了研究，但没有找到解决方案或结果！

谁能帮我解决这个问题，我使用的是 Windows 7。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T07:26:10.983

服务器可能无法访问位于 c:/myprojects/world.qgs 的项目

尝试将其移动到服务器目录，然后重试。

# windows - 桂自动化测试

> ID：11971785
> 
> 赞同：-1
> 
> 时间：2012-08-15T15:00:33.693
> 
> 标签：windows, tcl

我是一名学生，我对 TCL 编程很感兴趣。首先，我对 Wi-Fi 很感兴趣。我已经通过 WPS 手动使用我的网页 (gui) 将我的 USB 无线记忆棒连接到我的接入点，它运行良好，所以我想自动完成。需要使用 TCL 对其进行编程。我不知道如何开始。有人可以帮我做一个简单的测试用例。提示：在我的网页上，我有一个 Start PBC 按钮，在我的 USB 记忆棒上，我也有一个 WPS 按钮。

最好的问候德克

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:05:21.377

您可以尝试 selenium 或 iMacro。第一个效果很好。

# javascript - 如何通过文本框的值更改网站的标题？

> ID：11971787
> 
> 赞同：2
> 
> 时间：2012-08-15T15:00:35.497
> 
> 标签：javascript, html

就像您在此网站上提出问题一样，当您在选项卡中键入标题时，您在问题框中键入的内容就会更改。你如何访问这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:02:11.630

Quick'n'dirty：

```
document.title = prompt('sup bro ?'); 
```

* * *

如果您不想要模式输入对话框，则需要为任何`<input>`框捕获一些事件。

```
document.getElementById('inputBoxId').addEventListener('keypress', function( event ) {
    if( event.keyCode === 13 ) {  // return ?
        document.title = this.value;
    }
}, false); 
```

^(`addEventListener`需要替换`attachEvent`为 IE<9)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:05:10.060

像这样的东西：

```
var textbox = document.getElementById('myTextbox')
function setTitle () {
  document.title = textbox.value
}
textbox.onkeyup = setTitle
textbox.onchange = setTitle 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:02:24.127

您必须在 html 中使您的标题标签动态化，因此标题标签显示为头标签的元素。您必须使用 javascript 或某些服务器语言来设置其值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T15:04:19.493

这里，

```
<script language="javascript">
 document.title = "The new title goes here.";
</script> 
```

只需将其添加到您的页面并尝试！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-15T15:09:29.060

如果您使用类似`PHP`or的服务器端脚本`ASP`，它非常简单。只需根据您的 URL 生成文本。

例如，如果你有一个 php 页面`mypage.php`，你可以使用；

```
<title><?php echo $_GET["title"]; ?></title> //will display page title "MyPage" 
```

如果你把你的 php 页面称为`mypage.php?title=MyPage`

不是 JavaScript，只是为了您的信息。

# ios - iOS >> 如何识别用户离开 UISlider Thumb 属性的手势？

> ID：11971791
> 
> 赞同：0
> 
> 时间：2012-08-15T15:00:58.680
> 
> 标签：ios, uislider, gesture

在我的应用程序中，我使用在 Storyboard 中创建的 UISlider，并在相关 UIViewController 中作为 IBOutlet 连接。

当用户拿着 UISlider 并移动它时，我有几个动作发生。我通过创建 IBAction 并将 Storyboard UISlider 与“值更改”发送事件连接来调用它们 - 这是将 UISlider 与其 .h 文件 IBAction 连接时关联的默认“发送事件”。

现在，当用户最终离开 UISlider 时，我想做几件事。我应该使用哪个已发送事件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T15:18:58.153

```
UIControlEventTouchUpInside 
```

是你想要的那个。

# git - git push 错误的仓库

> ID：11971793
> 
> 赞同：0
> 
> 时间：2012-08-15T15:01:12.710
> 
> 标签：git, hook, push

我们目前有两个存储库。存储库 A 约为 100M。存储库 B 大约是 3G。我们遇到了这样一种情况，即 repo B 的开发人员配置了一个指向 repo A 的远程并将一个分支（称为 repo_B_branch）推送到 repo A。

现在这将回购 A 的大小增加到 3G+。不好。

回购 A 已将 receive.denynonfastforward 设置为 true。这不应该拒绝在 repo A 上创建 repo_B_branch 吗？git 不应该阻止推送与 master 不共享共同祖先的分支吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:26:09.753

`denynonfastforward`防止用其中没有现有分支历史记录的新版本分支替换现有分支。如果开发人员推送了一个在存储库中不存在的分支，使其成为“新”分支，那么它不会被拒绝，无论它是否与存储库中的其他任何东西有共同的祖先（如果它没有共同祖先，然后它被创建为孤立或断开的分支）。

# java - 如果我没有指定 -Xms，Java 会从什么开始堆？

> ID：11971794
> 
> 赞同：1
> 
> 时间：2012-08-15T15:01:15.697
> 
> 标签：java, memory, jvm, jvm-arguments

> **可能重复：**
> [如何确定默认的 Java 堆大小？](https://stackoverflow.com/questions/4667483/how-is-the-default-java-heap-size-determined)

我很好奇如果我没有`-Xms`为 Java 指定初始 JVM 堆大小会发生什么？

目前我有`-Xms256m and -Xmx512m`，但这在我的服务器上给了我一个错误：

```
Failed to create JVM, return code is:-1 
```

我相信 JVM 在以 256m 的起点获取 256MB 的连续内存时遇到问题。在今天之前，我们只有一个`-Xmx256m`设置，但有一些进程内存不足。

如果我删除`-Xms`设置并留下`-Xmx512m`'？堆从什么开始？

**如果没有声明起始堆，它如何获取连续内存？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:06:03.873

**默认初始大小：**

`Larger of 1/64th of the System's physical memory on the machine or some reasonable minimum.` `Before J2SE 5.0, the default initial heap size was a reasonable minimum, which varies by` `platform.`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-15T15:11:36.030

回答你的第一个问题。请看特德霍普的评论。 **[默认的 java 堆大小是如何确定的？](https://stackoverflow.com/questions/4667483/how-is-the-default-java-heap-size-determined)**

其次，您不需要指定最小和最大堆大小。您也输入错误。

它应该是`-Xms256m -Xmx512m`

初始堆大小将是客户端类机器上`4Mbyte`的**最大**堆。`64Mbyte`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:03:37.027

不要把`=`：

```
-Xms256m -Xmx512m 
```

我认为默认值在历史上为 2 MB，但这取决于您的 Java 版本和您的平台。我会尝试挖掘文档。

# asp.net - 必填字段验证器 .net 2010

> ID：11971795
> 
> 赞同：0
> 
> 时间：2012-08-15T15:01:20.993
> 
> 标签：asp.net, visual-studio-2010, visual-studio

下午所有，

一旦用户单击提交按钮，我需要在 Web 表单上验证两个文件。这些 Web 表单还包含一个验证摘要，以使用户了解错误消息。

我的代码看起来像这样......

```
 <td>                       
         <asp:TextBox ID="txtOrganiser" runat="server"  ></asp:TextBox>      
     </td>
     <td>
         <asp:RequiredFieldValidator ID="RequiredFieldVal0"
                     ControlToValidate="txtOrganiser" 
                     ErrorMessage="Meeting Organiser"
                     Text="*" 
                     runat="server" Display="None"/>
      </td>
      <td>      
         <asp:DropDownList ID="AgendaStatus" 
               runat="server" Height="24px" Width="125px"> </asp:DropDownList>        
      </td>    
      <td>
          <asp:RequiredFieldValidator ID="RequiredFieldValidator1"
                     ControlToValidate="AgendaStatus" 
                     ErrorMessage="Agenda Status"
                     Text="*" 
                     runat="server" Display="None"/>
      </td>
      <td>
          <asp:ValidationSummary ID="ValidationSummary"
            HeaderText="You must enter a value in the following fields:"
            DisplayMode="BulletList"
            EnableClientScript="true"
            runat="server"/>
      </td> 
```

“会议组织者”的代码运行良好。但是“AgendaStatus”下拉菜单没有。我认为这是因为下拉列表本质上已经有一个默认值来提示用户选择项目？

议程下拉列表使用此代码...

```
 'Used for the Enum property on the web page for the dropdown (Agenda Template.aspx)
Private Sub BindStatus()
    AgendaStatus.DataSource = EnumHelper.ToList(GetType(AgendaStatus))

    AgendaStatus.DataTextField = "Value"
    AgendaStatus.DataValueField = "Key"
    AgendaStatus.DataBind()

    AgendaStatus.Items.Insert(0, New ListItem(" - Please Select -", "~"))
End Sub 
```

而这段代码...

```
Imports Microsoft.VisualBasic
Imports SembCorp.CoreLib

Public Enum AgendaStatus
   <EnumDescription("Created")> _
   TempCreated = 1
   <EnumDescription("In Progress")> _
   InProgress = 2
   <EnumDescription("Completed")> _
   Completed = 3

End Enum 
```

如果下拉框没有选定的项目，则会显示一条错误消息...

```
Requested value '~' was not found. 
```

我可以看到为什么显示此错误，因为用户没有选择下拉选项之一。但是我认为我可以添加RequiredFieldValidator 工具来解决这个问题。这没有奏效，我没有解决方案。

任何帮助都是提前得到的。

问候贝蒂

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:08:59.433

首先，您可以设置[`AppendDataboundItems`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.listcontrol.appenddatabounditems.aspx)为 true，这样您就可以在 aspx 标记上以声明方式添加您的默认项：

```
<asp:DropDownList ID="AgendaStatus"
    AppendDataboundItems="true" 
    runat="server" Height="24px" Width="125px"> 
    <asp:ListItem Value="-1" Text=" - Please Select -"></asp:ListItem>
</asp:DropDownList> 
```

然后您可以将验证器设置[`InitialValue`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.requiredfieldvalidator.initialvalue.aspx)为`"-1"`以确保第一项不是有效的用户选项：

```
 <asp:RequiredFieldValidator ID="RequiredFieldValidator1"
                 InitialValue="-1"
                 ControlToValidate="AgendaStatus" 
                 ErrorMessage="Agenda Status"
                 Text="*" 
                 runat="server" Display="None"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:09:20.087

从列表项值中删除“~”。也设置`AppendDataBoundItems="true"`为`DropDownList`

# common-lisp - Common Lisp 源代码组织

> ID：11971796
> 
> 赞同：7
> 
> 时间：2012-08-15T15:01:21.163
> 
> 标签：common-lisp, asdf

我是 CL 新手，正在使用 AllegroCL。我试图弄清楚如何组织我的源代码以满足以下要求：

1.  我想阻止 src 代码包含我的测试套件。
2.  我想以可移植的方式声明项目依赖项（src 和 test deps），这样我团队中的其他成员就不必修改他们的系统。
3.  我想简化签入的持续集成，包括构建和测试。

我一直在尝试创造性地使用 ASDF 来满足这些要求，但我无法做到。其他人如何解决这个问题？这两个要求不是“Lispy”吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T16:02:18.743

使用 ASDF 或使用 Allegro CL defsystem 工具。

1.  使它们成为两个不同的系统。测试套件系统依赖于软件系统。
2.  使用相对路径名，根据系统定义文件的位置计算绝对路径名，或者，“pro”版本，使用逻辑路径名（它们是 CL 中的路径名，可以根据规则重新映射）。
3.  可能有一个用于 Common Lisp 的持续集成工具，但我还没有使用任何工具。拥有 defsystem 描述是一个好的开始。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-16T09:56:13.137

我正在使用 quicklisp，它会在您的主文件夹中创建一个“quicklisp”文件夹，其中可以找到一个“本地项目”文件夹。此文件包含一个 txt 文件，您可以在其中将 URI 插入 .asd 文件。

如何使用该实用程序：

*   在项目文件夹中创建“project.asd”和“project-test.asd”

project.asd（管理纯项目代码的包含）

```
(asdf:defsystem :project-name
  :description "description here"
  :version "version here"
  :author "your name here"
  :depends-on (:a
               :list 
               :of
               :dependencie
               :libraries)
  :components ((:file "sourcefileone")
               (:file "sourcefiletwo"))) 
```

project-test.asd（管理测试代码的包含）

```
(asdf:defsystem :project-name-test
  :description "testing"
  ...
  :depends-on (:project-name)
  :components ((:file "sourcefileone-test")
               (:file "sourcefiletwo-test"))) 
```

*   现在将这些文件的 URI 插入到上面命名的 local-projects.txt 中

*   程序并行处理 <filename>.lisp 文件中的项目源代码和 <filename>-test.lisp 文件中的测试调用（*-test.lisp 文件必须包含测试执行调用）

*   启动您的 sbcl 或您使用的任何东西，然后使用`(ql:quickload "project-name")`或`(ql:quickload "project-name-test")`取决于您是否只想加载项目或测试它。

您唯一需要做的就是将它移植到其他任何地方，就是在复制项目的计算机上编写 local-projects.txt。之后，您的大学可能会在他们想要的任何其他项目中使用 asdf 文件和快速加载来依赖它。要复制项目文件夹，您可以使用 ctr+c/v 或者更复杂的 git。

为了测试，我编写了自己的小型测试套件，但我敢打赌那里有很好的测试套件。更多关于 quicklisp 的信息可以在[这里](http://www.quicklisp.org/)找到，关于 asdf[在这里](http://common-lisp.net/project/asdf/)。如果您在配置 quicklisp 时遇到困难，也许[这个问题可以帮助您。](https://stackoverflow.com/questions/11261045/how-to-add-a-local-project-to-asdf-configured-by-quicklisp)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-20T13:06:35.713

如果安装了 Quicklisp，您可以使用内置功能 Quickproject。

```
(ql:quickload "quickproject")
(quickproject:make-project "~/src/lisp/swatchblade/"
                         :depends-on '(vecto hunchentoot)) 
```

这将创建 4 个文件：

*   包.lisp
*   swatchblade.lisp
*   色板刀片.asd
*   自述文件.txt

package.lisp 定义包命名空间：

```
(defpackage #:swatchblade  
(:use #:cl)
  (:shadowing-import-from #:vecto
                          #:with-canvas
                          #:rounded-rectangle
                          #:set-rgb-fill
                          #:save-png-stream)) 
```

swatchblade.asd 定义系统/项目、源代码文件、依赖项等。

```
(asdf:defsystem #:swatchblade 
 :serial t
  :depends-on (#:vecto
               #:hunchentoot
               #:cl-colors)
  :components ((:file "package")
               (:file "swatchblade"))) 
```

swatchblade.lisp 是源代码所在的位置。

您可以通过 Quicklisp 的快速加载加载项目：

```
* (ql:quickload "swatchblade")
loading output
* (swatchblade:start-web-server :port 8080)
Server started on port 8080. 
```

如果您随后创建另一个依赖于 swatchblade 系统的项目：

```
quickproject:make-project "~/src/lisp/whimsytron/" 
                       :depends-on '(swatchblade)) 
```

关于测试，您可以在 package.lisp 中为您的测试添加另一个命名空间：

```
 (defpackage #:swatchblade-tests  
      (:use #:cl #:swatchblade)) 
```

创建一个测试文件，编写代码，并将文件添加到系统定义中：

```
(asdf:defsystem #:swatchblade 
 :serial t
  :depends-on (#:vecto
               #:hunchentoot
               #:cl-colors)
  :components ((:file "package")
               (:file "swatchblade")
               (:file "swatchglade-tests"))) 
```

加载**swatchblade-tests**命名空间以运行测试。

[带有测试的示例项目在这里](https://github.com/paradigmshift/my-tools)

如果您想避免 Quicklisp 将所有依赖项安装到系统中，据我所知，您必须安装依赖项并手动加载系统。

Quicklisp 的作者 Zach Beane 有一篇关于[使用 quickproject](http://xach.livejournal.com/278047.html)的更详细的帖子。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-16T18:54:04.313

根据 Rainer 的建议，我建议您使用 ASDF 系统定义工具来定义两个系统，即您的主系统*foo*和辅助系统*foo-tests*。

在*foo*系统的定义中，添加一个在 foo 上做的规范，*你*`in-order-to`需要在foo *-tests*上做。这样可以确保如果您这样做，将加载相应的测试系统及其依赖项，然后 ASDF 将执行测试操作。`test-op`*`test-op`*`(asdf:test-system "foo")`**

 **我发现 FiveAM 是一个适合构建测试的库。

以上将加载所有内容，但现在您需要确保执行`test-op`on *foo-tests*实际运行测试！为此，您需要在`PERFORM`for`TEST-OP`和上添加一个方法`(eql (find-system "foo-tests"))`。该`PERFORM`方法应该调用您定义的所有 FiveAM 测试，并且要么成功，要么在测试失败时引发错误。

我为 ASDF 制作了一个 FiveAM-tester 插件。我将尝试将其公开。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-02-08T20:19:36.330

## 重要的

上面的建议很好，但你会在尝试测试未导出的东西时感到沮丧。一个简单的解决方法是不要定义两个包。只需将您的测试与其他来源放在同一个包中。有什么害处？

如果您认为会有伤害，那么您将不得不这样做：

```
(defpackage #:sources
  (:use #:cl))

(defpackage #:tests
  (:use #:cl #:lisp-unit)
  (:import-from #:sources)) 
```

重要的部分是`:import-from`你的源代码包而不是`:use`ing 它。

然后，当您在测试包中使用它们时，您必须对源包中的符号进行限定。例如，假设你有这个功能：

```
(defun return-true () t) 
```

您的测试可能如下所示：

```
(define-test test-return-true
  "Make sure it works"
  (assert-equal t (sources::return-true))) 
```

重要的部分是你的意思，`(sources::return-true)`而不是仅仅`(return-true)`。像`'sym`;这样的符号也是如此。将其称为`'sources::sym`.**

# android - PreferenceActivity 和嵌套首选项上的 setHomeButtonEnabled

> ID：11971800
> 
> 赞同：6
> 
> 时间：2012-08-15T15:01:33.237
> 
> 标签：android, android-actionbar, android-4.0-ice-cream-sandwich, preferenceactivity, android-homebutton

我有偏好屏幕扩展`PreferenceActivity`。针对 OS 4.0.3，我想`<`在操作栏上添加图标，所以我在`onCreate()`.

```
ActionBar actionBar = getActionBar();
actionBar.setHomeButtonEnabled(true);
actionBar.setDisplayHomeAsUpEnabled(true); 
```

有效。`<`已添加到应用程序图标的左侧。但是当我点击进入下一个级别的项目（更多详细信息屏幕）时，`<`将不会显示。回到顶层，`<`再次出现。

`PreferenceActivity`自从 smart the隐藏它以来，我从未想过嵌套偏好的机制。现在我的问题是，为什么不`PreferenceActivity`显示`<`嵌套首选项？

我不想争辩说我不需要添加`<`到偏好屏幕。（即使是谷歌的一些应用程序，也有一些没有，所以我认为这没有可靠的规则。）

如果有一个简单的解决方案，我想解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T00:45:24.253

您应该通过编写自定义 ActionBar 样式来添加箭头，而不是动态添加它，以与您的应用程序主题一起使用。（基本上，见[https://stackoverflow.com/a/16247111/582004](https://stackoverflow.com/a/16247111/582004)）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-09-19T10:36:54.797

这是我在设置活动上的主页按钮的工作代码

```
 @Override   
    public void onCreate(Bundle savedInstanceState) {

    super.onCreate(savedInstanceState);
    LinearLayout root = (LinearLayout)findViewById(android.R.id.list).getParent().getParent().getParent();
    Toolbar bar = (Toolbar) LayoutInflater.from(this).inflate(R.layout.settings_toolbar, root, false);
    root.addView(bar, 0); // insert at top
    bar.setTitle("Settings");
    bar.setTitleTextColor(Color.WHITE);

    bar.setNavigationOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            finish();
        }
    });
    addPreferencesFromResource(R.layout.settings);

} 
```

这是 settings_toolbar.xml

```
 <android.support.v7.widget.Toolbar xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:app="http://schemas.android.com/apk/res-auto"
android:id="@+id/toolbar"
android:layout_width="match_parent"
android:layout_height="?attr/actionBarSize"
android:background="@color/colorPrimary"
android:elevation="2dp"
android:fitsSystemWindows="true"
android:minHeight="?attr/actionBarSize"
app:navigationIcon="@drawable/gobackleftarrow"
app:theme="@style/ThemeOverlay.AppCompat.Dark.ActionBar">

</android.support.v7.widget.Toolbar> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-20T08:29:43.387

您需要为希望显示向上导航的每个 Activity 启用主页按钮和操作栏。您还必须在清单中设置父活动。

有关血腥细节，请参阅此问题： [向上指示器不显示](https://stackoverflow.com/questions/11315474/up-indicator-does-not-show-up)

# javascript - jQuery触发点击不起作用

> ID：11971803
> 
> 赞同：1
> 
> 时间：2012-08-15T15:01:43.247
> 
> 标签：javascript, jquery

这是我的脚本：

```
<script type="text/javascript">
    function is_numeric(n){
        return !isNaN(parseFloat(n)) && isFinite(n);
    }

    jQuery(document).ready(function(){
        // Est-ce que on doit forcer l'ouverture d'un asset en particulier ?
        var Hash = window.location.hash;
        var Triggered = false;

        if(Hash != undefined && Hash != ''){
            Hash = Hash.substring(2);

            if(is_numeric(Hash) === true && Hash > 0){
                Triggered = true;
                jQuery('.show-container[data-id="'+Hash+'"]').trigger('click');
            }
        }

        if(Triggered === false){
            jQuery('.show-container:first-child').trigger('click');
        }

        jQuery('.show-container').bind('click', function(e){
            //  On empêche l'action par défaut du lien
            e.preventDefault();

            if(ContainerEl.css('display') == 'none'){
                ContainerEl.show(0, function(){
                    SubContainerEl.slideDown(300, function(){
                        // Other code there...
                    });
                });
            } else {
                // On cache le tout
                SubContainerEl.slideUp(300, function(){
                    ContainerEl.hide(0);
                });
            }
        });
    });
</script> 
```

这是html

```
<h4 class="heading"><a class="show-container" data-id="1" href="javascript:void(0);">BC600 | <span id="assign_count_1">0</span> / 5</a></h4>
<div id="asset-data-1" data-ajax-loaded="false" class="row-fluid" style="display: none;">
    <div data-container="true" class="span12" style="display: none; height: 310px; overflow: auto;"></div>
</div>

<h4 class="heading"><a class="show-container" data-id="2" href="javascript:void(0);">Ultrabook HP3608 | <span id="assign_count_2">9</span> / 25</a></h4>
<div id="asset-data-2" data-ajax-loaded="false" class="row-fluid" style="display: none;">
    <div data-container="true" class="span12" style="display: none; height: 310px; overflow: auto;"></div>
</div> 
```

问题是，当`window.location.hash`不为空时，我想读取它并提取信息。信息将类似于`#a2`或`#a23`...数字是`AssetID`。

如果我看到一个有效的 ID，我想触发点击，如果没有，我想默认触发第一个。

这不起作用，控制台没有给我任何错误。我设置了一些警报来检查脚本是否足够远，是的，他做了，但触发器什么也没做。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:18:37.300

您试图在点击被绑定之前触发点击。你的代码应该是这样的：

```
// This section orignally appeared after the triggering of the click
jQuery('.show-container').bind('click', function(e){
    // Your code
});

if(Triggered === false){
    jQuery('.show-container:first-child').trigger('click');
} 
```

另请注意，根据您使用的 jQuery 版本，不推荐使用 bind 并应替换为[on()](http://api.jquery.com/on/)。

```
jQuery('.show-container').on('click', function(e){
    // Your code
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:17:34.147

问题是您的 Hash 是一个字符串；is_numeric() 将返回 true，即使您将字符串传递给它，例如 '20' 或 '55'。

您需要将字符串转换为数字。

一种方法是：

```
var Hash = 'a23';
Hash = Hash.substring(2);

var actualNumber = Number(Hash); // Here you convert the string to number 
```

这应该有效。

# jquery - jQuery $.ajax 没有附加从服务器返回的 HTML

> ID：11971804
> 
> 赞同：0
> 
> 时间：2012-08-15T15:01:48.310
> 
> 标签：jquery

我对该代码有一个非常奇怪的问题。这种情况是众所周知的——通过`$.ajax()`. 但问题是，我只能使用该代码 4 次（编辑后：8 次），之后不会附加来自服务器的结果。怎么了 ？

## 编辑

情况：在第 4 次附加返回的 HTML 之前，但在第 4 次之后没有附加相同的 HTML。

```
$('a.menu-item').click(function () {
     loadContent($(this).attr('href'));
});

    function loadContent(hash) {
                window.location.hash = hash;

                $.ajax(
                {
                    url: '/MyAction/' + hash.replace('#', ''),
                    type: 'post',
                    contentType: 'application/x-www-form-urlencoded; charset=UTF-8',
                    cache : false,
                    success: function (res) {
                                appendData(res);
                            },
                    complete: function(xhr, textStatus) {
                        if(xhr.status == '404') {
                            alert('not found');
                        }
                    } 
             });
    }

function appendData(res) {
        $('#myContent').remove();
        $('<div id="myContent" class="inner-container">'+res+'</div>')
        .appendTo('#mainContainer');
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T16:24:30.643

好的，伙计们，我已经想通了。我注意到，有时 firebug 会执行另一个名称相同的函数：`loadContent`但它的参数不同。重命名该功能后，问题就消失了。谢谢你的帮助 ！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:17:43.303

删除`isLoading`标志。它没有定义，也不需要。

# mysql - REGEXP 对非字母数字和空格、'-' 字符有效

> ID：11971815
> 
> 赞同：3
> 
> 时间：2012-08-15T15:02:24.670
> 
> 标签：mysql, regex

我只想找到非字母数字字符，并且只找到没有“-”的空格...

但这不起作用：

```
REGEXP '^[a-zA-Z0-9/-:space:]*' 
```

此正则表达式对这些数据有效：

```
 'Test Cinema'
  'AMERICANII AU TALENT - SEZONUL 5, EPISODUL 12' 
```

我不想找到这些字符，我想找到这样的字段：

```
'Test Item;?!'
'LOCAL KOMBAT "FIERBE BULGARIA"' 
```

我如何编写仅对其他字符有效的正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T15:06:31.890

^ 必须在括号内才能成为否定。当放在正则表达式的开头时，^ 表示它应该在字符串的开头匹配。

试试这个来匹配所有非空、非字母数字（包括空格和-）的字符串：

```
^[^a-zA-Z0-9 -]+$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T15:05:41.103

```
[^a-zA-Z0-9 -]* 
```

这就是你想要的，我想。

通过将 放在`-`末尾`[]`，正则表达式知道您的意思是文字`-`，并且您不需要使用`\`.

编辑：要匹配*整个字符串*，请使用：

```
^[^a-zA-Z0-9 -]*$ 
```

`^`并`$`用于将正则表达式锚定到字符串的开头和结尾。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T16:04:23.703

列出一个测试应该匹配和不应该匹配的东西的列表会很有用，因为它需要猜测

尝试

```
1\. ^.*?[^A-Za-z0-9 -]+[A-Za-z0-9 -]*$
2\. ^.*?[^A-Za-z0-9, -]+[A-Za-z0-9, -]*$ 
```

**1个匹配**（第一个因为逗号）

```
AMERICANII AU TALENT - SEZONUL 5, EPISODUL 12
Test Item;?!
LOCAL KOMBAT "FIERBE BULGARIA" 
```

但与测试影院不匹配

**2 场比赛**

```
Test Item;?!
LOCAL KOMBAT "FIERBE BULGARIA" 
```

但是不匹配

```
Test Cinema
AMERICANII AU TALENT - SEZONUL 5, EPISODUL 12 
```

[你可以在这里](http://regexr.com?31rh0)玩第二个 我不得不否定换行符以使其适用于示例，但只需每行添加一个测试以查看它是否匹配

# ios - PhoneGap 构建 - iOS 不使用 config.xml

> ID：11971819
> 
> 赞同：1
> 
> 时间：2012-08-15T15:02:30.867
> 
> 标签：ios, cordova, configuration

我遇到了问题[`PhoneGap build`](https://build.phonegap.com/)。我在一个 zip 文件中使用我自己的自定义[`config.xml`](https://build.phonegap.com/docs/config-xml)打包与我的应用程序。构建过程成功，除了 iOS 版本。它工作正常，但似乎根本没有使用我`config.xml`的。Android 没有问题，应用程序在 中配置了正确的图标`config.xml`，但 iOS 版本使用默认`PhoneGap build`图标和配置。

我在安装 IPA 文件时尝试删除浏览器缓存，尝试了其他 iOS 设备，但似乎 iOS 版本使用的是默认配置而不是我自定义的配置。有人知道解决方案吗？谢谢

# android - Android 2.3.3 忽略媒体查询和 jquery

> ID：11971824
> 
> 赞同：1
> 
> 时间：2012-08-15T15:02:48.007
> 
> 标签：android, jquery, html, css, media-queries

我正在为客户制作一个简单的响应式网站，在主页上它有一个全角无限滚动滑块，显然也是响应式的。

滑块（显然）将 <li> 元素的宽度设置为屏幕宽度，并将容器设置为 li * 数量的宽度，这非常有效......直到我在我的 Android 手机上加载打开它.

为了实现响应式设计，我使用了简单的媒体查询，效果也很好……除了在我的手机上。

当我在手机上打开网站时，我的手机决定使用普通样式表并将滑块 li 元素的宽度设置为大约每个1400px，隐藏在容器上的溢出也不起作用。

我在三星 Galaxy Ace 上使用默认浏览器，Android 2.3.3

我的 jQuery

```
$(function() {

    //rotation speed and timer
    var speed = 5000;
    var run = setInterval('rotate()', speed);   

    //grab the width and calculate left value\
    var screenWidth = $(window).width();
    $("ul.slides li").css("width",screenWidth);
    $("ul.slides li").width(screenWidth);   
    var fullWidth = $('ul.slides li').size() * $('ul.slides li').width();
    $('ul.slides').css('width', fullWidth);

    var item_width = $('ul.slides li').width(); 
    var left_value = item_width * (-1); 

    //move the last item before first item, just in case user click prev button
    $('ul.slides li:first').before($('ul.slides li:last'));
    $('ul.slides li:first').before($('ul.slides li:last'));

    //set the default item to the correct position 
    $('ul.slides').css({'left' : left_value});

    //if user clicked on prev button
    $('a.controls.left').click(function() {

        //get the right position            
        var left_indent = parseInt($('ul.slides').css('left')) + item_width;

        //slide the item            
        $('ul.slides').animate({'left' : left_indent}, 1000,function(){    

            //move the last item and put it as first item               
            $('ul.slides li:first').before($('ul.slides li:last'));           

            //set the default item to correct position
            $('ul.slides').css({'left' : left_value});

        });

        //cancel the link behavior            
        return false;

    });

    //if user clicked on next button
    $('a.controls.right').click(function() {

        //get the right position
        var left_indent = parseInt($('ul.slides').css('left')) - item_width;

        //slide the item
        $('ul.slides').animate({'left' : left_indent}, 1000, function () {

            //move the first item and put it as last item
            $('ul.slides li:last').after($('ul.slides li:first'));                  

            //set the default item to correct position
            $('ul.slides').css({'left' : left_value});

        });

        //cancel the link behavior
        return false;

    });        

    //if mouse hover, pause the auto rotation, otherwise rotate it
    $('ul.slides').hover(

        function() {
            clearInterval(run);
        }, 
        function() {
            run = setInterval('rotate()', speed);   
        }
    ); 

});

//a simple function to click next link
//a timer will call this function, and the rotation will begin :)  
function rotate() {
    var item_width = $('ul.slides li').width(); 
    var left_value = item_width * (-1); 

        //get the right position
        var left_indent = parseInt($('ul.slides').css('left')) - item_width;

        //slide the item
        $('ul.slides').animate({'left' : left_indent}, 1000, function () {

            //move the first item and put it as last item
            $('ul.slides li:last').after($('ul.slides li:first'));                  

            //set the default item to correct position
            $('ul.slides').css({'left' : left_value});

        });
} 
```

我的媒体查询存储在我的 CSS 文件的底部。

```
@media only screen and (max-width: 767px) {
    .container_12 { width: 300px; }
    .container_12 . > * { margin: 0; }

    .container_12 .grid_1,
        .container_12 .grid_3,
        .container_12 .grid_4,
        .container_12 .grid_5,
        .container_12 .grid_6,
        .container_12 .grid_7,
        .container_12 .grid_8,
        .container_12 .grid_9,
        .container_12 .grid_10,
        .container_12 .grid_11,
        .container_12 .grid_12 { width: 300px; margin: 0 auto; }
    .container_12 .prefix_8 { padding-left: 0px;}

    .container_12 .grid_2 { width: 125px; }
    .container_12 .push_2   { left: 0;  position: relative; }

    span.phonenumber        {margin-top: 0;}
    ul.nav                  {margin: 10px 0;}
    #main-content h1        {font-size: 18px; line-height: 1.4;}
    div.grid_4.twitter      {margin-top: 40px;}
    a.button                {display: block;}
    #footer, #footer .tr    {font-size: small; text-align: center !important;}
    #slider, #slider li     {height: 400px; width: 320px;}
    #slider .meta           {height: auto; padding: 10px; width: 280px; text-align: center; bottom: 120px;}
    #slider .meta .title, #slider .meta .date, #slider .meta .location {margin-right: 10px;}
    .controls-box {width: 100%;margin: 10px auto;}
    #slider .meta .controls.left {float: left;}
    #slider .meta .controls.right {float: right;}
    .article p {font-size: 16px;}
    #intro-content h3 p {font-size: 18px;}
    .contact {margin-bottom: 40px;float: left;}
    input[type="submit"] {background-position: 30px;}
    .grid_2.tr {text-align: left;}
    .grid_2.tr label {top:0;}

} 
```

网站：

```
http://ethercreative.net/verdant 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-19T15:45:10.740

大多数浏览器会缩放页面以适应，因此您必须强制宽度和缩放为 1。试试这个元标记，通常可以解决问题：

```
<meta name="viewport" id="viewport" content="width=device-width, initial-scale=1.0" /> 
```

由于您使用的是横向卷轴，因此 width 属性可能会导致问题（剪切背景等），因此您可以尝试在没有的情况下运行它。

```
<meta name="viewport" id="viewport" content="initial-scale=1.0" /> 
```

看看什么效果最好。

# python - 来自向后 ForeignKey 关系的 Django 查询输出

> ID：11971832
> 
> 赞同：0
> 
> 时间：2012-08-15T15:03:09.710
> 
> 标签：python, mysql, django

我有一个 django 模型，`Foo`它具有各种已知且一致命名的属性（`alpha`、、`beta`...）以及可变数量的`Bar`; `Bar`本身就是一个具有属性 ( `name`, `value`, ...) 的模型。我不能将每个`bar`的名称和值等作为`Foo`模型中的列，因为它们太多了，它们有许多不同的名称，有些仅适用于几个 foo。所以我在模型中有一个 ForeignKey 关系`Bar`，所以每个人都`bar`知道`foo`它属于哪个，我可以使用 Django 的`select_related()`，例如：

```
foos = Foo.objects.filter(alpha__lte=10).select_related()
for foo in foos:
    bars = foos.bar_set.filter(name__in=('prop1', 'prop2', 'prop5'))
    for bar in bars:
        print '%s = %d' % (bar.name, bar.value) 
```

这似乎可行......但它真的是使用 MySQL 组织数据的最佳方式吗？

如果我走在正确的轨道上，我还有另一个问题：我怎样才能加快速度？我应该补充一点，我总共有 2,700,000`Foos`和 16,900,000 `Bars`（索引到位等）。我的输出特别慢 - 我希望能够编写具有以下属性列的文本文件：`foo.alpha`, `foo.beta`, `foo.bar1.value`, `foo.bar2.value`, 等...其中`bar1`,`bar2`等由它们的`name`属性选择。我一直在尝试输出字段列表：

```
bar_output_fields = ['prop1', 'prop2', 'prop5']
all_output_fields = [('%4d', 'alpha'),
                     (%12.6f', 'prop1'), 
                     (%10.3e', 'beta'),
                     (%10.3e', 'prop2')
                     ('%2d', 'prop5')]
fo = open('output.txt', 'w')
for foo in foos:
    bars = foos.bar_set.filter(name__in=bar_output_fields)
    for bar_output_field in bar_output_fields:
        bar = bars.filter(name=bar_output_field).get()
        setattr(foo, bar_output_field, bar.value)
    for (fmt, name) in all_output_fields:
        print >>fo, fmt % getattr(foo, name),
    print >>fo
fo.close() 
```

但是当查询返回 >1000s 时，这非常慢`foo`。有人对这里提高性能有任何建议吗？我觉得我错过了一些大事...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T02:22:30.787

同样根据文档 if model Foo(models.Model): bar = models.ForeignKey(Bar) ，那么 model Foo 和 model bar 都获得 model_set 属性。即您可以调用 Foo.bar_set.all() 来检索与 foo 关联的所有柱，反之亦然 Bar.foo_set.all()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:07:26.320

如果你只使用`Foo`to limit `Bar`，那么你可以通过 cut out 来提高效率`Foo`。

```
bars = Bar.objects.filter(foo__alpha__lte=10, name__in=('prop1', 'prop2', 'prop5')) 
```

# c# - 多个 jcarousels 第二个工作正常 第一个滚动到空白

> ID：11971833
> 
> 赞同：1
> 
> 时间：2012-08-15T15:03:10.943
> 
> 标签：c#, jcarousel, multiple-instances

我在同一页面上加载的两个单独的用户控件中创建了两个 jcarousels。第一个脚本看起来像

```
<script type="text/javascript">
jQuery(document).ready(function () {
    jQuery('#mycarousel').jcarousel({
        vertical: true,
        auto: 2
    });

}); 
```

设置是

```
<asp:Repeater runat="server" ID="List" EnableViewState="False" OnItemDataBound="LoadImages"  >
        <HeaderTemplate>
            <ul id="mycarousel" class="mycarousel jcarousel jcarousel-skin-tango" >
        </HeaderTemplate>
        <FooterTemplate>
            </ul>
        </FooterTemplate>
        <ItemTemplate>
            <li style="height:100px;">
                <asp:Hyperlink ID="Hyperlink1" runat="server" 
                    NavigateUrl='<%# "~/Products/" + Eval("Linked_Product_UrlLabel") + 
                    ".aspx" %>'>
                    <asp:Image ID="MainImage" runat="server" Height="100" style="margin: 0 10px 10px 0;" CssClass="jcarousel-item" />
                </asp:Hyperlink>
            </li>      
        </ItemTemplate>
    </asp:Repeater> 
```

第二个脚本是

```
<script type="text/javascript">
jQuery(document).ready(function () {
    jQuery('#mycarousel2').jcarousel({
    auto: 1,
    scroll: 1,
    wrap: 'both'
    });

}); 
```

并设置

```
<asp:Repeater runat="server" ID="List" EnableViewState="False" OnItemDataBound="LoadImages"  >
        <HeaderTemplate>
            <ul id="mycarousel2" class="mycarousel jcarousel jcarousel-skin-tango" >
        </HeaderTemplate>
        <FooterTemplate>
            </ul>
        </FooterTemplate>
        <ItemTemplate>
            <li style="height:100px;">
                <asp:Hyperlink ID="Hyperlink1" runat="server" 
                    NavigateUrl='<%# "~/Products/" + Eval("Linked_Product_UrlLabel") + 
                    ".aspx" %>'>
                    <asp:Image ID="MainImage" runat="server" Height="100" style="margin: 0 10px 10px 0;" CssClass="jcarousel-item" />
                </asp:Hyperlink>
            </li>      
        </ItemTemplate>
    </asp:Repeater> 
```

当页面加载时一切看起来都很好，直到第一个 jcarousel 开始滚动到遗忘。自动生成的滚动按钮会引起一些生涩的反应，但不能正确滚动。关于我需要改变什么的任何想法？

我发现我的问题确实仍然在于将其中一个旋转木马命名为 mycarousel。显然，如果使用多个我不能命名 mycarousel

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:33:52.497

I found that my problem indeed was still with naming one of the carousels mycarousel. Apparently if using more than one I can not name either mycarousel. This was answered in a separate question [Multiple jcarousels on one page issue](https://stackoverflow.com/questions/7189627/multiple-jcarousels-on-one-page-issue)

# sql - 来自多列的where子句

> ID：11971844
> 
> 赞同：3
> 
> 时间：2012-08-15T15:03:37.183
> 
> 标签：sql, sql-server

我是这个站点和 SQL 的新手。需要帮助在 MS SQL 中构建以下查询

```
Select *
From Table1
Where customer = '123' and asofdate = '2012-01-01' 
```

这就是我的问题开始的地方。我只需要上面列出的客户的数据和提到的日期，但我想检查下面的列，其中显示数据的任何位置然后显示该行）

```
and abc !='0', abcd !='0', abcde !='0', abcdef !='0' 
```

如果我`"or"`在上面的行之间使用它会带来线条，即使有其他客户号码，如果我输入“和”它不会给我带来任何线条。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T15:05:29.970

如果我正确理解您的要求，您可以使用括号将布尔逻辑分组为子表达式，例如：

```
Select * From Table1 Where customer = '123' and asofdate = '2012-01-01' and (abc != 0 OR abcd != 0 OR abcde != 0 OR abdcdef != 0) 
```

这可能相当于

```
WHERE true and true and (true or false or false or false) 
```

这导致“真” - 例如括号中的某些 ORed 测试可能会失败，但只要其中一个为真，整个结果就为真，因此过滤到结果集中

注意：不要使用带数值的引号 - 它们只能用于字符串（或日期）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:06:01.940

您可以在 WHERE 语句中使用括号：

```
WHERE customer = '123' and asofdate = '2012-01-01' and
      (abc !='0' or abcd !='0' or abcde !='0' or abcdef !='0') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T15:06:40.550

您只需要添加带有`AND`和括号的条件：

```
Select *
From Table1
Where (customer = '123' and asofdate = '2012-01-01')
    AND (abc !='0' OR abcd !='0' OR abcde !='0' OR abcdef !='0') 
```

# php - 计算数组值之间的差异php

> ID：11971846
> 
> 赞同：0
> 
> 时间：2012-08-15T15:03:51.580
> 
> 标签：php, arrays, codeigniter

我有一小段代码。

```
<?php foreach($last_activity as $activity) : ?>
<tr>
    <td><?= $activity['category'];?></td>
    <td><?= $activity['activity'];?></td>
    <td><?= $activity['datetime'];?></td>
    <td><?= $activity[''];?></td>
</tr>
<?php endforeach; ?> 
```

这会运行一个循环，用来自查询的数据填充表行。我希望能够以这种方式提供可能...在该行的最后一列中计算当前行中的日期时间列与上面行中的日期时间列之间的差异。

这可能吗（例如，通过在我的最后一列中放置一段 php 脚本`<td>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:09:16.697

我想它可以用这样的东西来完成：

```
<?php $recent_datetime = null;
      foreach($last_activity as $activity): ?>
<tr>
    <td><?=$activity['category'];?></td>
    <td><?=$activity['activity'];?></td>
    <td><?=$activity['datetime'];?></td>
    <td><?= ($recent_datetime 
              ? $activity['datetime'] - $recent_datetime 
              : $activity['datetime'] );
         ?></td>
</tr>
<?php $recent_datetime = $activity['datetime']; endforeach; ?> 
```

# asp.net-mvc - T4MVC，过时了吗？还好？如果不是还有什么用？

> ID：11971849
> 
> 赞同：8
> 
> 时间：2012-08-15T15:04:02.330
> 
> 标签：asp.net-mvc, asp.net-mvc-3, mvccontrib, t4mvc, asp.net-mvc-futures

伙计们，

*从今天*开始，我应该在我的项目中引入 T4MVC 还是使用 MvcContrib 的强类型优势？

```
return RedirectToAction(MVC.MyController.MyAction()); 
```

或者

```
return RedirectToAction<MyController>(c => c.MyAction()); 
```

试图坚持标准/主流并保持最新。

我知道，这个网站上有问答，我很想听听什么是最新和最棒的，而不是 2 年前的。

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T15:13:05.883

这两种技术今天都是可以接受的，我还没有听说过一种会被弃用。`T4MVC`具有性能更好的优势，这也是为什么那些采用 lambda 表达式的强类型助手实际上不是 ASP.NET MVC 核心的一部分的原因之一。

# javascript - 如何在呈现 HTML 时添加要执行的处理程序？

> ID：11971850
> 
> 赞同：0
> 
> 时间：2012-08-15T15:04:08.207
> 
> 标签：javascript, jquery, html, client-side

我正在`JavaScript`用`jQuery`. 我将`JavaScript`源代码和HTML 页面添加`jQuery`到 HTML 页面中，并注册我的函数以在页面完全呈现时调用。

```
<script type="text/javascript" src="lib/jquery-1.8.0.js"></script>
<script type="text/javascript" src="src/myapp.js"></script>
<script type="text/javascript">$(MyApp.onReady)</script>

```

它可以工作，但我不喜欢在 HTML 中包含*代码。*

现在我想知道我是否可以摆脱最后一行。是否绝对有必要`$(MyApp.onReady)`在 HTML 中调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:09:39.153

`document.ready`您可以回复`myapp.js`文件中的 a。这将确保 DOM 树可以使用：

```
$(document).ready(function () {
    // do whatever you want here, confident that the DOM is loaded
}); 
```

如果您需要等到整个页面在浏览器中呈现（图像等），您可以响应 load 事件：

```
$(window).load(function() {
    // everything is rendered in the browser
}); 
```

您通常不需要等到`load`，我建议您先尝试第一个片段，然后再使用第二个片段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:08:14.023

`$(document).ready`当html控件的所有渲染完成时调用，您可以将代码放在此方法中或在其中调用您的方法

```
$(document).ready(function(){
    //your code here
    //$(MyApp.onReady) 
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T15:08:53.090

你可以把`$( MyApp.onReady );`线放在里面`myapp.js`。您需要注意的是在`jQuery`加载文件之前加载。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T15:10:03.993

您可以将此代码添加到 myapp.js 文件的尾部，例如：

```
/* myapp.js */
var MyApp = (function(app, $) {
    // your logic...
    // defining app.onReady function...
    $(function() {
        app.onReady();
    });

    return app;
})(MyApp || {}, jQuery); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T15:12:15.563

你需要打电话给`MyApp.onReady()`某个地方。如果您将访问 DOM（您可能会访问），是的，您必须等到 DOM 被处理。您可以通过在结束标签之前`document.ready`放置`MyApp.onready()`一个权利来避免使用。到那时，DOM 将已经被解析。但是，如果您不访问 DOM，则可以在任何地方进行操作。`script``body``MyApp.onReady()`

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T15:12:57.987

看看这个问题：[Running javascript after page is fully rendering](https://stackoverflow.com/questions/8611713/running-javascript-after-page-is-fully-rendered)

基本上，您似乎想为 window.onload 设置一个函数，这将在页面呈现后运行。由于我看不到你的 myapp.js，我不知道 onReady 函数在那里做什么。您是否保留该行取决于该功能的作用。正如 Grampa 所说，您可以将该行放在 javascript 文件中。

# javascript - 从 Iframe 中获取选定的值

> ID：11971851
> 
> 赞同：0
> 
> 时间：2012-08-15T15:04:14.563
> 
> 标签：javascript

我有我的拨号页面，我有用针拨号。针跟随光标。点击拨号角度给出。角度值来自 js.query。我使用 iframe 将拨号页面导入到我的主页。我在框架内获得拨号图像和角度，但我的问题是我如何让角度出现在其他地方而不是在我的主页中。这就是我在主页上导入我的拨号图像的方式。感谢您的帮助

```
<iframe name="clkwise1" id="clkwise1" src="Dial1.htm" width=150 height=215 frameborder=0 scrolling="no" ></iframe> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:18:40.590

如果您使用的是 jQuery，则可以使用以下内容访问 iframe 中的元素。

```
$('#iframe').contents().find('#dial').data('angle'); 
```

您需要将 #iframe 更改为 iframe 的 ID。您还需要将#dial 更改为您的 dial 元素的 id，并确保在更改 dial 时，它会将 data-angle 自身的属性更新为 dial angle 的值。

# wpf - Windows 8 上的命令绑定问题（发布预览版）

> ID：11971855
> 
> 赞同：4
> 
> 时间：2012-08-15T15:04:24.063
> 
> 标签：wpf, windows-8, command, .net-4.5

最近我有机会玩一点 Windows 8 Release Preview（具体来说是 Build 8400）。我的目标是调查仅在 Windows 8 下出现在我们的产品（WPF 应用程序）中的错误。错误看起来非常简单 - 一些按钮在不应该被禁用时被禁用。它看起来很容易修复，但我决定找到根本原因。

事实证明，当绑定到命令的控件接收到通知时，如果发送者不是同一个命令`CanExecuteChanged`，它不会重新查询命令的方法。`CanExecute`当命令对模型执行某些操作并且它的执行能力取决于模型的状态时，这有点问题。例如，假设您有一个模型：

```
class MyModel
  {
    public void ChangeModel(bool makeValidForCommand)
    {
      Valid = makeValidForCommand;

      if (ModelChanged != null)
        ModelChanged(this, new EventArgs());
    }

    public bool Valid { get; private set; }

    public event EventHandler ModelChanged;
  } 
```

和一个命令：

```
class MyCommand : ICommand
  {
    public MyCommand(MyModel model)
    {
      _model = model;
    }

    public bool CanExecute(object parameter)
    {
      return _model.Valid;
    }

    public event EventHandler CanExecuteChanged
    {
      add { _model.ModelChanged += value; }
      remove { _model.ModelChanged -= value; }
    }

    public void Execute(object parameter) { }

    private MyModel _model;
  } 
```

不幸的是，这在 Windows 8 上不起作用 - 绑定到命令的按钮将在模型更改状态后保持不正确的禁用（或启用）状态。不过，它在 Windows 7 上运行良好！

该命令可以这样重写：

```
class MyCommand : ICommand
  {
    public MyCommand(MyModel model)
    {
      _model = model;
    }

    public bool CanExecute(object parameter)
    {
      return _model.Valid;
    }

    public event EventHandler CanExecuteChanged
    {
      add
      {
        _canExecuteChanged += value;
        _model.ModelChanged -= _modelChanged;
        _model.ModelChanged += _modelChanged;
      }

      remove
      {
        _canExecuteChanged -= value;
        _model.ModelChanged -= _modelChanged;
      }
    }

    public void Execute(object parameter)
    {
    }

    private void _modelChanged(object sender, EventArgs e)
    {
      if (_canExecuteChanged != null)
        _canExecuteChanged(this, new EventArgs());
    }

    private event EventHandler _canExecuteChanged;
    private MyModel _model;
  } 
```

现在 sender 是命令本身，一切都很好。另一种选择是使用`CommandManager`及其`RequerySuggested`事件：

```
public event EventHandler CanExecuteChanged
    {
      add { CommandManager.RequerySuggested += value; }
      remove { CommandManager.RequerySuggested -= value; }
    } 
```

它再次起作用！嗯，现在我完全迷惑了。Sender 不是命令-它是空的，但是如果我尝试使用空的发件人发送我自己的事件，它就不再起作用了。

有没有人遇到过同样的情况？在新Windows上是不是有这么奇怪的优化方式？老实说，它看起来更像是一个错误。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-27T08:09:50.580

似乎，这是 .Net Framework 4.5 中的一个重大变化。该问题在此处报告给 Microsoft：

[http://connect.microsoft.com/VisualStudio/feedback/details/751429/wpf-icommand-canexecutechanged-behaviour-change-in-net-4-5](http://connect.microsoft.com/VisualStudio/feedback/details/751429/wpf-icommand-canexecutechanged-behaviour-change-in-net-4-5)

# php - 用于将包含 SVG 的 HTML 转换为 PDF 的 PHP 库

> ID：11971856
> 
> 赞同：0
> 
> 时间：2012-08-15T15:04:34.577
> 
> 标签：php, html, pdf, svg, html2pdf

是否有任何库或库组合可用于从包含 SVG 的 HTML 生成 PDF。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:07:19.183

*   [使用 PHP 将 SVG 图像转换为 PNG](https://stackoverflow.com/q/4809194/1393862)
*   [使用 PHP PDF 库](http://php.net/manual/en/book.pdf.php)
*   添加照片使用[`PDF_load_image`](http://www.php.net/manual/en/function.pdf-load-image.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:15:31.590

使用 TCPDF [PHP 代码](http://www.tcpdf.org/examples/example_058.phps) [PHP 代码执行](http://www.tcpdf.org/examples/example_058.pdf)

# javascript - 单一表格中的多条记录

> ID：11971857
> 
> 赞同：0
> 
> 时间：2012-08-15T15:04:35.717
> 
> 标签：javascript, html, ajax

我需要编写一个可以包含多个个人信息的页面。客户将填写几条个人信息记录，然后一次全部提交。

我希望页面一次只显示一条记录的输入字段。填写一条记录后，客户可以单击“下一步”按钮移动到下一条记录。

我正在考虑用数组输入编写一个表单并使用 javascript 隐藏/显示每条记录。但是这个解决方案似乎很混乱，尤其是。当记录数未知时。是否可以将每条记录的输入字段嵌套到一个或表格单元格并隐藏/显示此元素？每条记录中的输入字段数量非常多。

我不想提交每条记录，因为它们可以包含图像并且都共享一些共同的隐藏值。

我敢肯定之前有人遇到过这个问题，有什么好的解决方案建议吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T06:34:55.820

从可用性的角度来看，这不是一个好主意。用户不知道表格的长度，也无法知道总步数和还剩多少步。

但是可以说它是一个简短的形式，你给用户一些当前/总步骤的提示。

哟应该显示整个表单并使用字段集标签来分隔不同的步骤。
然后使用 javascript 隐藏除第一个字段集以外的所有字段并提供“下一步”按钮
当用户单击“下一步”时，您应该

1.  验证输入
2.  隐藏字段集
3.  显示下一个
4.  更新当前/总步数的指标

验证很重要，因为如果有多个无效输入，您将无法同时显示所有错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:15:25.673

考虑到你有这样的 html

```
<form>
<table id="page-1">
  <input type="text" name="name"/>
  <input type="text" name="surname"/>
</table>
<table id="page-2">
     <input type="text" name="age"/>
</table>
<div id="page-3">
     <input type="submit" name="submit"/>
</div>
</form>
<input id="next" type="button" value="Next"/> 
```

所以你可以用像这样的简单javascript来做到这一点

```
 var actualPage = 0;
    $("#next").click(function() {
        $("#page-" + actualPage).hide();
        actualPage++;
        if(!$("#page-" + actualPage).length) {
             // this was last page
             $(this).hide();
             return false;
        }
        $("#page-" + actualPage).show();
    }); 
```

确实有很多方法可以做到这一点，我不知道哪一种取决于您提供的最适合您

这样 javascript 不关心你有多少字段并且提交表单将按预期工作

# android - android中的大列表？

> ID：11971858
> 
> 赞同：0
> 
> 时间：2012-08-15T15:04:35.753
> 
> 标签：android, random

我想从一个大列表（大约 1000 个条目）中随机选择一个条目。在我的应用程序中保留这个大列表的最佳方法是什么？我应该把它放到一个大的字符串数组中吗？当尝试随机选择一个字符串时，它会减慢我的程序吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:08:20.273

首先，1000 个字符串并不是一个特别大的数组大小。这是否是很多内存取决于字符串是否长。

至于随机选择一个，就选择一个需要多长时间而言，元素的数量根本不应该是一个因素。只需生成一个介于 0 和 1000（不包括）之间的随机整数，然后在该索引处选择一个。

```
Random random = new Math.Random(); // done once only

int randomIndex = random.nextInt(1000); // each time you need an index 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:07:56.967

如果我们谈论整数和短字符串，1000 个条目并不是一个大列表，如果它的复杂对象我真的很喜欢[OrmLite](http://ormlite.com/)用于数据库持久性。

# iphone - 如何从 GPS 而不是 iPhone 中的三角天线获取坐标

> ID：11971860
> 
> 赞同：1
> 
> 时间：2012-08-15T15:04:51.160
> 
> 标签：iphone, objective-c, gps, cllocationmanager

我正在使用 CLLocation 机制来获取 iPhone 中的坐标。我从“定位我”示例中举了一个例子，并对其进行了一点扩展。但是我正在发布准确性问题。

*   如果我将所需的精度设置为 10 米或更小，我会得到精度为 1414 米的响应。
*   如果我将所需的精度设置为 100 或更高 - 在大多数情况下，我得到的最佳精度是 65 米。有时多有时少。
*   如果我关闭 WiFi 和 3g，我的准确度约为 47 米。

那么问题来了，有没有办法让 iPhone 使用 GPS 而不是三角天线来获取位置？

很高兴知道在使用天线时是否有提高精度的方法，但到目前为止我得到的最好结果是 65 米。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T15:39:11.100

您实际上不应该尝试控制哪些硬件正在为您获取位置。如果您想要更高的准确度，您可以检查由 提供给您的准确度，`CLLocation`如果它不是您想要的，则将其丢弃。

或者，您可以读取一堆读数并使用我编写的这段代码对它们进行平均！您将一组`CLLocation`对象传递给它，它会返回一个平均位置。我在我的一个应用程序中使用它，它提供了很高的准确性（如果您使用 >5 个位置，通常在一米内）。

```
- (CLLocation *) averageLocations: (NSArray *) loci
{
    double tempLat=0,tempLong=0,tempAlt=0,tempAccH=0,tempAccV=0,tempCourse=0,tempSpeed=0,tempTime=0;
    for (CLLocation *loc in loci)
    {
        tempLat += loc.coordinate.latitude;
        tempLong += loc.coordinate.longitude;
        tempAlt += loc.altitude;
        tempAccH += loc.horizontalAccuracy;
        tempAccV += loc.verticalAccuracy;
        tempCourse += loc.course;
        tempSpeed += loc.speed;
        tempTime += loc.timestamp.timeIntervalSinceReferenceDate;
    }

    double ratio = (double) loci.count;
    CLLocationCoordinate2D tempCoord = CLLocationCoordinate2DMake(tempLat/ratio, tempLong/ratio);
    NSDate *tempDate = [[NSDate alloc] initWithTimeIntervalSinceReferenceDate:tempTime/ratio];

    CLLocation *temp = [[CLLocation alloc] initWithCoordinate:tempCoord 
                                  altitude:tempAlt/ratio 
                        horizontalAccuracy:tempAccH/ratio 
                          verticalAccuracy:tempAccV/ratio 
                                    course:tempCourse/ratio
                                     speed:tempSpeed/ratio
                                 timestamp:tempDate];

    return temp;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:42:37.723

核心位置不会为您提供数据源的位置数据。保证位置的最佳方法是查找您收到的 CLLocation 对象的日期，并检查位置的水平和垂直精度。我在核心位置方面进行了广泛的工作，我可以告诉您，如果您需要准确的位置数据，时间是不准确信息的一个很好的指标。如果我需要准确的数据，我会忽略超过 5 秒的数据。

# objective-c - Cocoa中窗口的圆角渐变背景

> ID：11971866
> 
> 赞同：5
> 
> 时间：2012-08-15T15:05:22.803
> 
> 标签：objective-c, macos, cocoa

我有一个带有文本字段和边框按钮的窗口。它是无边界和透明的，但问题会在任何窗口上重现。

该窗口的内容视图在 IB 中设置为绘制窗口背景的自定义类。

这是代码：

```
- (void)drawRect:(NSRect)dirtyRect
{
    [NSGraphicsContext saveGraphicsState];

    float cornerRadius = 10;
    NSBezierPath *path = [NSBezierPath bezierPathWithRoundedRect:self.bounds xRadius:cornerRadius yRadius:cornerRadius];

    [path setClip];

    NSGradient *gradient = [[NSGradient alloc] initWithColorsAndLocations:
                            [NSColor colorWithCalibratedRed:0.96f green:0.96f blue:0.96f alpha:1.00f], 0.0f,
                            [NSColor colorWithCalibratedRed:0.84f green:0.84f blue:0.84f alpha:1.00f], 1.0f,
                            nil];

    [gradient drawInRect:self.bounds angle:270];

    [NSGraphicsContext restoreGraphicsState];
} 
```

它会导致一些非常奇怪的伪影，例如消失的对象或文本字段的背景更改为窗口的：

![在此处输入图像描述](../Images/d7c40688734c52b07b7e36dad3e3ed56.png) ![在此处输入图像描述](../Images/b522b39ecc5573c522746f875299c671.png)

这是怎么回事？我试图隔离它，我一直在玩这个“图形上下文状态保存”的东西（我不确定我是否理解正确），但问题仍然存在。

我有 XCode 4.4，SDK 是 10.7（我的操作系统也是），部署目标是 10.6。这可能没关系，但我过去一直在做类似的事情，我从来没有遇到过这样奇怪的问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-24T16:01:22.490

问题似乎是 [path setClip] 方法。我对此进行了注释，并且正确绘制了文本字段和按钮。

所以，我然后替换了这一行：

```
[gradient drawInRect:self.bounds angle:270]; 
```

和

```
[gradient drawInBezierPath:path angle:270]; 
```

一切都很完美。按钮和文本字段按预期出现。

NSBezierPath 的类参考声明：

> 您应该避免使用此方法来调整剪切路径，因为它可能会扩展剪切路径超出封闭视图设置的范围。如果您确实使用此方法，请务必在修改剪切路径之前保存图形状态，并在完成后恢复图形状态。
> 
> 该方法使用当前绕组规则来确定接收器的削波形状。此方法不影响接收器的路径。

并没有真正解释你看到的问题，但让我看看我还能如何绘制渐变。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T19:40:24.220

使其工作的一种解决方法是（在窗口的 -awakeFromNib 或 -init 处）制作与 self.bounds 大小相同的 NSImage，然后将此渐变绘制到图像中（使用图像的 -lockFocus、-unlockFocus）。然后，您可以使用 window.backgroundColor = [NSColor colorWithPatternImage:image]; 将图像设置为背景

它有效，但我对解决方案不满意。

我看不出有任何理由为什么上面不起作用。我在绘制视图时也遇到过类似的奇怪问题，所以我想知道它不起作用的真正原因。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-27T14:22:43.540

我同意这很奇怪/烦人。有人会认为这只是层之间可能相互干扰的问题..但如果不执行以下操作似乎很难解决..

这是您描述的视图，*一团糟。*之后 - 通过界面生成器更改了一个简单的复选框..

![在此处输入图像描述](../Images/39ea0205bf2bc9077975a3c3aacc741c.png)

![在此处输入图像描述](../Images/4ff732824c56b13e62fc82eea9bff6a3.png)

我发现通过将有问题的控件封装在一个框或一个视图或诸如此类的东西中，然后单击界面构建器中的“核心动画”“setWantsLayer”按钮，将允许这些界面元素在没有所有杂乱无章的情况下发光。

![在此处输入图像描述](../Images/bfeb0000aa1335bbafbb77e9c4c9ee10.png)

一种愚蠢的解决方法......但实际上它有效 - 而且很容易。

PS - 我发现在解决此类问题时，使参数更具戏剧性（颜色等）会有所帮助 - 特别是如果您试图向人们描述出了什么问题..

# ios - iOS 应用测试：未找到代码签名

> ID：11971875
> 
> 赞同：27
> 
> 时间：2012-08-15T15:05:36.710
> 
> 标签：ios, testing, ipod

我没有 iPhone 开发者帐户。我想在我的 iPod Touch 上测试我的应用程序。

iPod iOS 版本：5.1 (9B176 build) Xcode 开发 SDK：5.1 模拟器：iPhone 5.1 Retina/普通 iPad 5.1 Retina/普通

为了绕过代码签名等，我改变了项目设置，如下所示。

```
Code signing identity   Don't code sign
  Debug                 Don't code sign
    Any iOS SDK         Don't code sign
Release                 Don't code sign
  Any iOS SDK           Don't code sign 
```

我将 iPod-Touch 连接到我的 MacBook Pro，选择 iPod 作为我的目标（而不是模拟器），构建项目并运行它。然后我收到错误“未找到代码签名”。

有什么帮助吗？

注意：我没有创建任何应用程序证书等。（我没有应用程序开发帐户）

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2012-11-12T18:25:51.963

如果构建在中途中断，您也可能会收到此错误。它破坏了 Xcode 的内部数据（他们为什么要保存可破坏的数据？我不知道）。

关闭 xcode，然后重新启动，重新构建......它通常会消失。

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2013-02-22T21:33:36.573

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-08-15T15:18:58.887

如果您想在 iDevice 上运行您的应用程序，您必须进行代码签名，除非它已越狱。

您必须拥有开发许可证才能对您的应用程序进行代码签名。

如果您不想购买开发者许可证并且您是学生，您可以申请 iOS 开发者大学计划，该计划允许您在实际设备上测试您的应用程序，但不提交 App Store。

[https://developer.apple.com/programs/ios/university/](https://developer.apple.com/programs/ios/university/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-15T15:08:30.340

如果您不想在设置中对其进行代码签名，那很好，但如果您想在设备中运行它，则必须对其进行代码签名。当然，除非您越狱您的设备……这是您唯一的选择，因为您提到您没有应用程序开发帐户。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-08T14:06:10.993

清理缓存和 Xcode DerivedData 文件夹帮助我解决了这个问题。清理产品和产品构建文件夹后退出 Xcode 并删除其中的所有内容

```
~/Library/Developer/Xcode/DerivedData 
```

然后删除所有与Xcode相关的文件和文件夹

```
~/Library/Caches 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-12-10T03:47:39.547

此错误意味着您的代码无法签名，因此该项目无法在您的设备中运行。我发现这个问题是因为我在构建设置中更改了“其他 C 标志”。删除您添加的项目，它运行！

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2017-02-19T18:02:46.127

我在 Xcode 8.2 中遇到了这个错误，因为我的设备上没有足够的空间。感谢 Xcode 的描述性错误...

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-11-14T11:00:18.343

我正在使用以下文件 - 使用 CODE_SIGNING_REQUIRED 属性。默认情况下是 YES。我已将其更改为 NO - 以尝试生成未签名的 .ipa。

/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS10.1.sdk[![SDK 设置文件](../Images/00b8be3379827e9ed254ec074719615b.png)](https://i.stack.imgur.com/TbKvD.png)

设置被设置为“不要代码签名”。之后，我需要在设备上运行该应用程序，但出现“未找到代码签名”错误。在我正确设置了所有团队、配置文件、代码签名身份之后 - 问题仍然存在。将 CODE_SIGNING_REQUIRED 设置为 YES。

但不知何故，没有任何帮助 - “未找到代码签名”错误停留在那里 - 不得不重新安装 Xcode。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2016-11-14T06:31:20.507

删除 prov 文件时出现此问题。我生成了一个配置文件，它是固定的。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-05-07T11:46:39.190

我用这个：

右键单击 Application 文件夹中的 XCode.app 文件并转到路径：

```
Applications/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS.sdk 
```

打开文件`SDKSettings.plist`并检查`CODE_SIGNING_REQUIRED`. 如果设置为“否”，则设置为“是”。

现在重新启动 XCode。如果它再次不起作用，则清除 XCode DerivedData 文件夹。

见：[这个](https://forums.developer.apple.com/thread/60563)

# r - 如何用中位数填充 NA？

> ID：11971876
> 
> 赞同：16
> 
> 时间：2012-08-15T15:05:36.770
> 
> 标签：r, plyr, data.table, statistics

示例数据：

```
set.seed(1)
df <- data.frame(years=sort(rep(2005:2010, 12)), 
                 months=1:12, 
                 value=c(rnorm(60),NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA))

head(df)
  years months      value
1  2005      1 -0.6264538
2  2005      2  0.1836433
3  2005      3 -0.8356286
4  2005      4  1.5952808
5  2005      5  0.3295078
6  2005      6 -0.8204684 
```

请告诉我，我如何将 df$value 中的 NA 替换为其他月份的中位数？“值”必须包含同一月份所有先前值的中值。也就是说，如果当前月份是 5 月，“值”必须包含 5 月份所有先前值的中值。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-15T15:14:23.367

你想使用测试`is.na`功能：

```
df$value[is.na(df$value)] <- median(df$value, na.rm=TRUE) 
```

这表示对于所有值 where `df$value`is `NA`，将其替换为右侧。您需要这`na.rm=TRUE`件作品，否则该`median`功能将返回`NA`

逐月做这个，有很多选择，但我认为`plyr`有最简单的语法：

```
library(plyr)
ddply(df, 
      .(months), 
      transform, 
      value=ifelse(is.na(value), median(value, na.rm=TRUE), value)) 
```

你也可以使用`data.table`. 如果您的数据很大，这是一个特别好的选择：

```
library(data.table)
DT <- data.table(df)
setkey(DT, months)

DT[,value := ifelse(is.na(value), median(value, na.rm=TRUE), value), by=months] 
```

还有很多其他方法，但有两种！

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-08-15T15:21:52.227

或与 ave

```
df <- data.frame(years=sort(rep(2005:2010, 12)),
months=1:12,
value=c(rnorm(60),NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA,NA))
df$value[is.na(df$value)] <- with(df, ave(value, months, 
   FUN = function(x) median(x, na.rm = TRUE)))[is.na(df$value)] 
```

* * *

既然有这么多答案，让我们看看哪个是最快的。

```
plyr2 <- function(df){
  medDF <- ddply(df,.(months),summarize,median=median(value,na.rm=TRUE))
df$value[is.na(df$value)] <- medDF$median[match(df$months,medDF$months)][is.na(df$value)]
  df
}
library(plyr)
library(data.table)
DT <- data.table(df)
setkey(DT, months)

benchmark(ave = df$value[is.na(df$value)] <- 
  with(df, ave(value, months, 
               FUN = function(x) median(x, na.rm = TRUE)))[is.na(df$value)],
          tapply = df$value[61:72] <- 
            with(df, tapply(value, months, median, na.rm=TRUE)),
          sapply = df[61:72, 3] <- sapply(split(df[1:60, 3], df[1:60, 2]), median),
          plyr = ddply(df, .(months), transform, 
                       value=ifelse(is.na(value), median(value, na.rm=TRUE), value)),
          plyr2 = plyr2(df),
          data.table = DT[,value := ifelse(is.na(value), median(value, na.rm=TRUE), value), by=months],
          order = "elapsed")
        test replications elapsed relative user.self sys.self user.child sys.child
3     sapply          100   0.209 1.000000     0.196    0.000          0         0
1        ave          100   0.260 1.244019     0.244    0.000          0         0
6 data.table          100   0.271 1.296651     0.264    0.000          0         0
2     tapply          100   0.271 1.296651     0.256    0.000          0         0
5      plyr2          100   1.675 8.014354     1.612    0.004          0         0
4       plyr          100   2.075 9.928230     2.004    0.000          0         0 
```

我敢打赌 data.table 是最快的。

[ Matthew Dowle ] 这里定时的任务最多需要 0.02 秒 (2.075/100)。`data.table`认为这无关紧要。尝试设置`replications`并`1`增加数据大小。或者计时 3 次运行中最快的时间也是一个常见的经验法则。这些链接中更详细的讨论：

*   [证据表明 data.table 并不总是最快的](http://www.talkstats.com/showthread.php/25761-Evidence-that-data.table-isn-t-always-fastest?p=84871&highlight=#post84871)
*   *[与其他列值对应的特定数据部分的平均列值中](https://stackoverflow.com/a/11562850/403310)的*基准**
**   [伦敦 R 演讲，2012 年 6 月](http://datatable.r-forge.r-project.org/LondonR_2012.pdf)（幻灯片 21，标题为“其他”）*   [*在极端情况下按组*基准进行转换](https://stackoverflow.com/posts/11463757/revisions)*

 ** * *

## 回答 #3

> 赞同：9
> 
> 时间：2017-08-13T00:07:58.777

还有另一种方法可以做到这一点`dplyr`。

如果您想用它们的中位数替换所有列，请执行以下操作：

```
library(dplyr)
df %>% 
   mutate_all(~ifelse(is.na(.), median(., na.rm = TRUE), .)) 
```

如果要替换列的子集（例如 OP 示例中的“值”），请执行以下操作：

```
df %>% 
  mutate_at(vars(value), ~ifelse(is.na(.), median(., na.rm = TRUE), .)) 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-15T15:38:18.947

这是我能想到的最强大的解决方案。它确保年份的排序正确，并且在您有多年缺失值的情况下，将正确计算所有前几个月的中位数。

```
# first, reshape your data so it is years by months:
library(reshape2)
tmp <- dcast(years ~ months, data=df)  # convert data to years x months
tmp <- tmp[order(tmp$years),]          # order years
# now calculate the running median on each month
library(caTools)
# function to replace NA with rolling median
tmpfun <- function(x) {
  ifelse(is.na(x), runquantile(x, k=length(x), probs=0.5, align="right"), x)
}
# apply tmpfun to each column and convert back to data.frame
tmpmed <- as.data.frame(lapply(tmp, tmpfun))
# reshape back to long and convert 'months' back to integer
res <- melt(tmpmed, "years", variable.name="months")
res$months <- as.integer(gsub("^X","",res$months)) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-15T15:15:11.010

坚持使用基础 R，您还可以尝试以下操作：

```
medians = sapply(split(df[1:60, 3], df[1:60, 2]), median)
df[61:72, 3] = medians 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-15T15:11:22.817

这是一种使用方式`plyr`，它不是很漂亮，但我认为它可以满足您的需求：

```
library("plyr")

# Make a separate dataframe with month as first column and median as second:
medDF <- ddply(df,.(months),summarize,median=median(value,na.rm=TRUE))

# Replace `NA` values in `df$value` with medians from the second data frame
# match() here ensures that the medians are entered in the correct elements.
df$value[is.na(df$value)] <- medDF$median[match(df$months,medDF$months)][is.na(df$value)] 
```*

# java - java scheduleAtFixedRate 方法参数不匹配

> ID：11971879
> 
> 赞同：0
> 
> 时间：2012-08-15T15:05:45.347
> 
> 标签：java, eclipse, concurrency, timer, scheduler

我很困惑为什么 eclipse 报告我的代码 using`scheduleAtFixedRate`有编译错误；参数不匹配。下面是显示代码和错误消息的屏幕截图。

![在此处输入图像描述](../Images/5b4373d52d90a6656897801a339b8080.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:34:38.643

尝试这样做。

从类中删除所有导入，然后按`Ctrl`++`Shift`以便`O`自动添加导入。如果您的项目只有默认的 JDK（并且没有其他库，则应添加以下导入：

```
import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.TimeUnit; 
```

这是我的班级的快照：

![在此处输入图像描述](../Images/a641ed4a9fc500fac62ac679a255eaab.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:36:23.350

我创建了相同的方法并使用了正确的包，该类是在 Eclipse 中构建的，没有错误

```
import java.util.concurrent.ScheduledThreadPoolExecutor;
import java.util.concurrent.TimeUnit;

public class Example {

    @SuppressWarnings("unused")
    private static void initialiseIssueTrackingTask(){

        ScheduledThreadPoolExecutor stpe = new ScheduledThreadPoolExecutor(5);
        Runnable task = new Runnable() {

            @Override
            public void run() {
                // TODO Auto-generated method stub
            }
        };
        stpe.scheduleAtFixedRate(task, 0L, 1L, TimeUnit.MINUTES);
    }
} 
```

# heroku - 我无法验证我的 heroku 帐户

> ID：11971890
> 
> 赞同：4
> 
> 时间：2012-08-15T15:06:13.453
> 
> 标签：heroku

我正在尝试验证我的帐户，填写所有表单字段，按“提交”，但答案是“被网关拒绝”。所有字段都正确写入。

# c# - 为 .NET 合并和压缩 PDF 文件的最佳第三方程序集是什么？

> ID：11971899
> 
> 赞同：3
> 
> 时间：2012-08-15T15:06:48.923
> 
> 标签：c#, pdf, merge

我试过 PDFSharp，但他们在使用最新版本的 Acrobat Reader 时遇到问题。

有谁知道那里最好的免费的？

我正在用 C# 编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T19:22:05.700

[Docotic.Pdf 库](https://bitmiracle.com/pdf-library/)可以轻松合并 PDF 文件。

这是一个示例，展示了如何将多个 PDF 合并为一个。

```
using (PdfDocument pdf = new PdfDocument())
{
    string[] filesToMerge = ...
    foreach (string file in filesToMerge)
        pdf.Append(file);

    // delete the first (automatically inserted) page
    pdf.RemovePage(0);

    // document gets saved compressed by default
    // you can compress it even more if you set following options to true

    //pdf.SaveOptions.RemoveUnusedObjects = true;
    //pdf.SaveOptions.UseObjectStreams = true;

    pdf.Save("merged.pdf");
} 
```

免责声明：我为图书馆的供应商工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:13:57.627

虽然不是免费的.. 看看 Aspose，它们有不错的组件并且支持很好。我已经在几个项目中使用了它们，主要是他们的 Word 产品，但确实有机会使用他们拥有的 PDF 组件，并且使用起来很容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T16:55:42.540

也许您可以尝试使用[Amyuni PDF Creator .net](http://www.amyuni.com/en/developer/pdfcreator/features)

[Append](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacDocument/Methods/IacDocument.Append_Method.htm)方法允许您将一个 PDF 文件的页面连接或插入到另一个 PDF 文件中。[Merge](http://www.amyuni.com/WebHelp/Amyuni_PDF_Creator_for_NET/Amyuni_PDFCreator_IacDocument/Methods/IacDocument.Merge_Method_.htm)
方法允许您 在另一个文件的页面上绘制一个 PDF 文件的页面。

默认情况下，所有 PDF 文件都将压缩保存。

*通常的免责声明适用*

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T18:14:51.097

在此处向下滚动以获取答案：

[在 c#.net 中使用 iTextSharp 合并多个 PDF](https://stackoverflow.com/questions/6029142/merging-multiple-pdfs-using-itextsharp-in-c-net)

iTextSharp 是要走的路！！

# python - 尝试连接时如何提前超时

> ID：11971901
> 
> 赞同：0
> 
> 时间：2012-08-15T15:06:55.323
> 
> 标签：python, timeout, rabbitmq, pika

我有一个应用程序正在尝试连接到 rabbitmq-server，但是如果它无法连接到服务器，我希望我的应用程序在指定的秒数内超时。

我的问题是我不知道该怎么做。

澄清一下，当我的制片人尝试连接时，我想早点超时，因为现在最多需要 20-30 秒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:37:56.140

如果您正在使用的库使用[套接字模块](http://docs.python.org/library/socket)（很多都这样做），那么一个简单的`import socket; socket.setdefaulttimeout( SECONDS )`就足够了

[编辑以包括 Daniel Figueroa 的更正]

# python - Over-Ride __init__：扩展表单 (Python/Django)

> ID：11971902
> 
> 赞同：-1
> 
> 时间：2012-08-15T15:07:00.703
> 
> 标签：python, django, forms, extend

努力弄清楚如何`__init__()`在我的 Django 表单中覆盖该方法以包含数据库中的其他值。我有一组摄影师，我试图将它们列为用户的表单选项。之后，用户的摄影师选择（连同其他信息）将作为新模型的实例添加到数据库中。

这是我的另一个[Current Question](https://stackoverflow.com/questions/11548992/adding-values-to-complex-django-view)的延续或阐述。@Rob Osborne 给了我一些很好的建议，帮助我理解如何扩展`BaseForm`，但我仍然无法让我的代码执行。如果您有兴趣，链接的问题会列出我的模型、表单和视图。虽然我知道使用 ModelForm 更容易且文档更多，但在这种情况下我必须使用 BaseForm。

这是我所拥有的：

```
class AForm(BaseForm):
    def __init__(self, data=None, files=None, instance=None, auto_id='id_%s',
                 prefix=None, initial=None, error_class=ErrorList,
                 label_suffix=':', empty_permitted=False):

        self.instance = instance
        object_data = self.instance.fields_dict()
        self.declared_fields = SortedDict()
        self.base_fields = fields_for_a(self.instance)

        BaseForm.__init__(self, data, files, auto_id, prefix, object_data,
                      error_class, label_suffix, empty_permitted)
        self.fields['photographer'].queryset = Photographer.objects.all()

    def save(self, commit=True):
        if not commit:
            raise NotImplementedError("AForm.save must commit it's changes.")

        if self.errors:
            raise ValueError(_(u"The Form could not be updated because the data didn't validate."))

        cleaned_data = self.cleaned_data

        # save fieldvalues for self.instance
        fields = field_list(self.instance)

        for field in fields:
            if field.enable_wysiwyg:
                value = unicode(strip(cleaned_data[field.name]))
            else:
                value = unicode(cleaned_data[field.name]) 
```

使用上面的代码会产生一个`KeyError at 'photographer'`.

我很欣赏有关如何解决此 KeyError 的任何想法/评论，以便我可以将这些`photographer`值放入我的表单中。谢谢！

* * *

编辑：

正如@supervacuo 推荐的那样，尝试使用super，但仍然`KeyError at photographer`像以前一样获得：

```
class AForm(BaseForm):
    def __init__(self, data=None, files=None, instance=None, auto_id='id_%s',
             prefix=None, initial=None, error_class=ErrorList,
             label_suffix=':', empty_permitted=False):

        super(AForm, self).__init__(data, files, auto_id, prefix, object_data,                         error_class, label_suffix, empty_permitted)
        self.fields['photographer'].queryset = Photographer.objects.all() 
```

生成 KeyError 时我会遗漏什么？感谢您的任何建议。

* * *

编辑2：添加`fields_dict()`

来自模型.py

```
class A(models.Model):
    category = models.ForeignKey(Category)
    user = models.ForeignKey(User)

    def fields_dict(self):
        fields_dict = {}
        fields_dict['title'] = self.title

        for key, value in self.fields():
            fields_dict[key.name] = value.value

        return fields_dict 
```

感谢您的任何建议。

* * *

编辑3：（`class AForm`在最初的问题中也进行了编辑，以包含更多信息）

```
def fields_for_a(instance):
    fields_dict = SortedDict() 
    fields = field_list(instance)

    for field in fields:
        if field.field_type == Field.BOOLEAN_FIELD:
            fields_dict[field.name] = forms.BooleanField(label=field.label, required=False, help_text=field.help_text)
        elif field.field_type == Field.CHAR_FIELD:
            widget = forms.TextInput
            fields_dict[field.name] = forms.CharField(label=field.label, required=field.required, max_length=field.max_length, help_text=field.help_text, widget=widget)

            fields_dict[field.name] = field_type(label=field.label,
                                             required=field.required,
                                             help_text=field.help_text,
                                             max_length=field.max_length,
                                             widget=widget)

    return fields_dict 
```

* * *

编辑 4：定义字段（自我）。来自models.py：

```
 def fields(self):
        fields_list = []
        fields = list(self.category.field_set.all())
        fields += list(Field.objects.filter(category=None))

        for field in fields:
            try:
                fields_list.append((field, field.fieldvalue_set.get(ad=self),))
            except FieldValue.DoesNotExist:
                pass  # If no value is associated with that field, skip it.

        return fields_list

    def field(self, name):
        if name == 'title':
            return self.title
        else:
            return FieldValue.objects.get(field__name=name, ad=self).value 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:34:23.863

您的呼叫`BaseForm.__init__`似乎是错误的；你应该使用[`super()`](http://docs.python.org/library/functions.html#super)，像这样

```
class AForm(BaseForm):
    def __init__(self, *args, **kwargs):

        super(AForm, self).__init__(*args, **kwargs)
        self.fields['photographer'].queryset = Photographer.objects.all() 
```

（正如 Rob Osbourne 对您的其他问题所接受的答案中所建议的那样）。

除此之外，我怀疑你的`fields_dict()`方法，它不是 Django 的一部分，你没有提供定义。确认`print self.fields.keys()`，无论出于何种神秘原因，`photographer`不存在，然后发布`fields_dict()`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T17:21:39.330

该 GitHub 链接应该是**您问题中的第一件事**。

该[`django-classifieds`应用程序](https://github.com/saebyn/django-classifieds)具有完整的动态字段系统（基于`Field`和`FieldValue`模型），这就是您遇到麻烦的原因。如果您不完全理解`django-classifieds`.

查看`FIELD_CHOICES`in`django-classified`的列表`models.py`，您不能使用这个数据库驱动的字段系统来定义关系 - 所以没有动态的每个类别`ForeignKey`字段！

另一种方法是在您的模型上添加一个`photographer`字段`A`（您将其重命名的任何特定原因`Ad`？），因为您似乎已经根据您的其他问题完成了。但是，要完成剩下的距离，您需要`fields_dict()`像这样编辑方法：

```
def fields_dict(self):
    fields_dict = {}
    fields_dict['title'] = self.title
    fields_dict['photographer'] = self.photographer

    for key, value in self.fields():
        fields_dict[key.name] = value.value

    return fields_dict 
```

# internet-explorer - 管理插件中未显示 ActiveX

> ID：11971903
> 
> 赞同：-1
> 
> 时间：2012-08-15T15:07:04.573
> 
> 标签：internet-explorer, plugins, activex

我已经为 x86 版本的 IE 构建了一个 ActiveX 控件，它可以正确注册和运行。我可以将它安装在其他 x86 机器上，它也可以正常工作。我没有收到任何错误，只是它没有出现在 IE 的工具->管理加载项中。其他机器会得到 IE 顶部的黄色条，但一旦接受它就不会重新出现。

我需要为此在 RC 文件中添加一些内容吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:12:33.760

Microsoft does not want you to modify their product, thats why activex or any other addons by microsoft will not show up. Of you want to modify activex, then search activex in my computer.

# c# - 尾部斜杠（/）添加在参数中

> ID：11971904
> 
> 赞同：3
> 
> 时间：2012-08-15T15:07:16.323
> 
> 标签：c#, protocols, url-protocol

我正在我的计算机上注册一个自定义协议处理程序，它调用此应用程序：

```
 string prefix = "runapp://";

        // The name of this app for user messages
        string title = "RunApp URL Protocol Handler";

        // Verify the command line arguments
        if (args.Length == 0 || !args[0].StartsWith(prefix))
        { 
            MessageBox.Show("Syntax:\nrunapp://<key>", title); return; 
        }

        string key = args[0].Remove(0, "runapp://".Length);
        key.TrimEnd('/'); 

        string application = "";
        string parameters = "";
        string applicationDirectory = "";

        if (key.Contains("~"))
        {
            application = key.Split('~')[0];
            parameters = key.Split('~')[1];
        }
        else
        {
            application = key;
        }

        applicationDirectory = Directory.GetParent(application).FullName;

        ProcessStartInfo psInfo = new ProcessStartInfo();
        psInfo.Arguments = parameters;
        psInfo.FileName = application;

        MessageBox.Show(key + Environment.NewLine + Environment.NewLine + application + " " + parameters);
        // Start the application
        Process.Start(psInfo); 
```

它的作用是检索 runapp:// 请求，将其分为两部分：应用程序和传递的参数，根据 '~' 字符的位置。（如果我通过 PROGRA~1 或其他东西，这可能不是一个好主意，但考虑到我是唯一一个使用它的人，这不是问题），然后运行它。

但是，总是在字符串中添加一个尾随的“/”：如果我通过

`runapp://E:\Emulation\GameBoy\visualboyadvance.exe~E:\Emulation\GameBoy\zelda4.gbc`, 会被解释为

`runapp://E:\Emulation\GameBoy\visualboyadvance.exe E:\Emulation\GameBoy\zelda4.gbc/`.

为什么要这样做？为什么我不能摆脱这个斜线？我试过`TrimEnd('/')`, `Remove(key.IndexOf('/'), 1)`, `Replace("/", "")`，但斜线仍然存在。怎么了 ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T15:16:08.377

您需要分配 TrimEnd 的结果：

```
key = key.TrimEnd('/'); 
```

C# 中的字符串是[不可变](http://msdn.microsoft.com/en-us/library/362314fe.aspx)的；因此，更改字符串的字符串方法会返回带有更改的新字符串，而不是更改原始字符串。

# c# - 这段 C# 代码如何得出答案？

> ID：11971905
> 
> 赞同：2
> 
> 时间：2012-08-15T15:07:17.320
> 
> 标签：c#, math

我已经解决了项目 Euler 问题 16，但发现了这种相当新颖的方法，但我无法理解所采用的技术（来自[http://www.mathblog.dk/project-euler-16/](http://www.mathblog.dk/project-euler-16/)）：

```
int result = 0;

BigInteger number = BigInteger.Pow(2, 1000);

while (number > 0) {
    result += (int) (number % 10);
    number /= 10;
} 
```

我的版本似乎更传统，但我认为上述方法更酷。

```
var result = BigInteger
    .Pow(2, 1000)
    .ToString()
    .Aggregate(0, (total, next) => total + (int) Char.GetNumericValue(next)); 
```

第一种方法的数学是如何工作的，这很酷，但我需要一些解释来帮助我理解，所以如果有人愿意向我解释，我将非常感激。

**注意：如果我在错误的部分发布，请让我知道更好的提问位置。**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T15:10:51.513

`value % 10`将返回最后一位（除以 10 后的余数）。将整数除以 10 将删除该数字。

将数字视为一个列表，您只是将列表出列并对值求和。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-15T15:15:44.990

模运算符提供除法的余数。因此，mod 10 将成为数字中的一个。然后整数除以 10 将移动所有内容，以便可以重复。

数字 12345 的示例：

```
12345 % 10 = 5
12345 / 10 = 1234
 1234 % 10 = 4
 1234 / 10 = 123
  123 % 10 = 3
  123 / 10 = 12
   12 % 10 = 2
   12 / 10 = 1
    1 % 10 = 1
    1 / 10 = 0 (loop ends) 
```

加法是在每个模数的结果上执行的，所以你会得到`5+4+3+2+1`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-15T15:11:57.703

`number % 10`提取最低有效十进制数字。例如`12345`=>`5`

`number / 10`删除最低有效的十进制数字。这是有效的，因为 C# 中的整数除法会丢弃余数。例如`12345`=>`1234`

因此，上面的代码提取每个数字，将其添加到总和中，然后将其删除。它重复这个过程，直到所有数字都被删除，并且数字是`0`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-15T15:11:42.743

1.  他们找到了数字 2^1000。

2.  模 10 获得最低有效位。EG 12034 % 10 = 4

3.  除以 10 会去除最低有效位。EG 12034 / 10 = 1203

4.  他们总结了这些最低有效数字。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-15T15:12:18.453

这很简单：

想象一下：

数字 = 54

它使用模数将余数除以 10

例如 54 / 10 = 5 余数 4

然后它将这个数字 (4) 添加到结果中，然后将该数字除以 10（存储到丢弃小数位的 int 中）

那么数字 = 5

再次相同，5 / 10 = 0 余数 5

将它们加在一起，结果现在是 9

依此类推，直到数字为 0 :)

（在这种情况下 9 是答案）

# objective-c - Magical Record - 使用 2 个模型 Coredata 或更多

> ID：11971911
> 
> 赞同：0
> 
> 时间：2012-08-15T15:07:32.097
> 
> 标签：objective-c, core-data, magicalrecord

我可以使用 2 个模型 coredata 或更多。
在我的应用程序中，我使用 2 个模型，它们是包（表：包、练习、测试、问题）和字典（表：单词）来存储应用程序信息。我已经找到有信息`managedObjectModel`可以更改名称的地方，但我找不到任何东西。
这个案子我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T17:11:42.230

MagicalRecord 只是提供帮助来简化默认堆栈。它也不会阻止您使用备用堆栈配置。你可以有第二个托管对象模型，它有一个助手，但只有第一个是“默认”模型。您必须自己管理第二个模型。这也意味着您可以创建连接到此模型的额外持久存储。

# objective-c - iOS - 视频不播放

> ID：11971916
> 
> 赞同：0
> 
> 时间：2012-08-15T15:07:46.650
> 
> 标签：objective-c, ios, video

当我按照本教程进行操作时：[http](http://www.youtube.com/watch?v=cYXAHRvHbQE) ://www.youtube.com/watch? v=cYXAHRvHbQE 它在 [playercontroller release] 上给了我一个错误；行，所以我删除了它，然后当我尝试运行它时它给了我这些错误

这是图片：（它不会让我发布它） [http://aftermathgame.webs.com/ss1.png](http://aftermathgame.webs.com/ss1.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:23:05.453

如果您根本不能只添加头文件。

首先，必须将一个框架添加到您的项目中。

其次，您应该有一个以下标题。`#import <MediaPlayer/MediaPlayer.h>`

参考以下流程。

> 1.  在 Xcode 中，单击 Project Navigator 顶部的项目文件。
>     
>     
> 2.  单击“目标”下的“您的项目名称”
>     
>     
> 3.  单击“构建阶段”选项卡。
>     
>     
> 4.  单击“Link Binary With Libraries”窗口中的加号。
>     
>     
> 5.  添加 MediaPlayer.Framework 库
>     
>     
> 6.  添加`#import <MediaPlayer/MediaPlyer.h>`

![在此处输入图像描述](../Images/3cd98db204c110bc25ae275424cd3337.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:26:55.757

我猜这一点：

```
Undefined symbols for architecture i386:
"_OBJC_CLASS_$_MPMoviePlayerViewController", referenced from:
      objc-class-ref in ViewController.o 
```

...意味着您未能链接到 MediaPlayer 框架。

在导航器中单击您的项目文件，找到 Linked Frameworks 面板并添加缺少的框架。

您还得到的语义错误意味着您没有将视图控制器声明为符合 AVAudioPlayerDelegate 协议。`<AVAudioPlayerDelegate>`（将其添加到类声明后的尖括号中。）

# cmake - 为什么 CMake 区分“目标”和“命令”？

> ID：11971917
> 
> 赞同：72
> 
> 时间：2012-08-15T15:07:48.350
> 
> 标签：cmake

在 CMake 语义中，“目标”和“命令”之间存在某种区别，这让我感到困惑。在 Makefiles 中，没有这样的区别：

```
targetname:dependency
    command 
```

即目标对应于同名的生成文件。

在 CMake 中，您有诸如“add_custom_command”和“add_custom_target”之类的命令，它们具有重叠的功能，甚至在官方文档中，语义也很混乱，即在“Mastering CMake，第 5 版”中，第 110 页的“添加自定义目标”下：

> DEPENDS 参数设置自定义目标和自定义命令之间的依赖关系。

我的理解是目标（生成的文件）具有依赖关系（其他文件，生成或不生成），以及实际执行生成的命令。说目标取决于命令是荒谬的。更糟糕的是，“add_custom_command”有两种风格，它们要么将附加命令附加到现有目标，要么将命令吐出到以太中。

有人可以解释为什么这种区别甚至存在吗？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-15T23:12:37.470

### 目标

[`add_executable`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:add_executable)通常，目标包括通过调用or定义的可执行文件或库，[`add_library`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:add_library)它们可以设置许多[属性](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#section_PropertiesonTargets)。

它们可以相互依赖，这对于诸如此类的目标仅意味着依赖的目标将在它们的依赖之后构建。

但是，您也可以通过[`add_custom_target`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:add_custom_target). 从文档：

> 添加具有给定名称的目标以执行给定命令。目标没有输出文件，并且即使命令尝试使用目标名称创建文件，也总是被认为已过期。使用 ADD_CUSTOM_COMMAND 生成具有依赖关系的文件。默认情况下，没有任何东西取决于自定义目标。使用 ADD_DEPENDENCIES 将依赖项添加到其他目标或从其他目标添加依赖项。

因此，这些与“普通”目标不同，因为它们不代表会产生 exe 或 lib 的东西，但它们仍然受益于目标可以拥有的所有属性，包括拥有或成为依赖项。它们显示为可以构建的目标（例如`make MyCustomTarget`或`msbuild MyCustomTarget.vcxproj`）。构建它们时，您只是调用为它们设置的命令。如果它们依赖于其他目标（普通或自定义），那么将首先构建这些目标。

### 自定义命令

via 定义的自定义命令[`add_custom_command`](http://www.cmake.org/cmake/help/v2.8.8/cmake.html#command:add_custom_command)完全不同，因为它不是“可构建”对象，并且不像目标那样具有可设置的属性 - 它不是命名对象，可以在添加后再次显式引用CMakeLists.txt。

它基本上是一个命令（或一组命令），在构建依赖目标之前将被调用。这就是“依赖”在这里的真正含义（至少我是这么看的）——它只是说如果 A 依赖于 B，那么 B 将在 A 构建之前构建/执行。

自定义命令的依赖项可以使用`add_custom_command(TARGET target ...`表单显式设置，也可以通过创建包含通过`add_custom_command(OUTPUT output1 ...`表单生成的文件的目标来隐式设置。

在第一种情况下，每次`target`构建时，都会先执行自定义命令。

在第二种情况下，它有点复杂。如果自定义命令具有依赖于其输出文件的目标（并且输出文件尚不存在），则在构建这些依赖对象之前调用它。当您这样做时，会隐式创建依赖项，`add_library(MyLib output1.h ... )`例如`output1.h`通过`add_custom_command(OUTPUT output1.h ... )`.

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2018-04-03T14:52:22.017

add_custom_command 添加一个可以定义输出的可调用函数（使用 OUTPUT 和 BYPRODUCTS 参数）。它还可以具有将在调用函数之前运行的依赖项。

请注意，由于奇怪的文档（makefile 示例非常具有误导性），它不会做您可能认为它会做的事情。特别是，它对执行的次数没有任何保证。例如，想象一下：

```
add_custom_command(OUTPUT /tmp/touched COMMAND echo touch COMMAND touch /tmp/touched)
add_custom_target(touched-one ALL DEPENDS /tmp/touched)
add_custom_target(touched-two ALL DEPENDS /tmp/touched) 
```

“触摸”会打印多少次？你不知道，因为它没有在任何地方指定；make -j2 可能会打印两次，但它取决于时间：

```
Scanning dependencies of target touched-two
Scanning dependencies of target touched-one
[ 50%] Generating touched
touch
[100%] Generating touched
touch
[100%] Built target touched-two
[100%] Built target touched-one 
```

但是 Ninja 只会打印一次，可能是：

```
# rm -rf * && cmake -GNinja ../c ; cmake --build . -- -j 5
[1/1] Generating touched
touch 
```

通常，您将执行 add_custom_command 来完成一些工作并定义一个 OUTPUT，然后您将拥有一个依赖于自定义命令输出的 add_custom_target。任何想要输出的人都取决于目标，这确实给了你想要的保证。

警告：请参阅[此错误](https://gitlab.kitware.com/cmake/cmake/issues/16767)，了解为什么构建跨平台元构建工具非常困难的一个很好的*例子*。

# javascript - 在 Node.js 中发送文件之前如何设置 MIME 类型？

> ID：11971918
> 
> 赞同：22
> 
> 时间：2012-08-15T15:07:48.693
> 
> 标签：javascript, node.js, browser, webserver

从我的 Node.js 服务器向浏览器发送脚本时，在 Google Chrome 中，我收到以下警告：

> 资源解释为脚本，但使用 MIME 类型 text/plain 传输

我搜索了一下，发现这是一个服务器端问题，即我认为我应该在发送之前为事物设置正确的 MIME 类型。这是 HTTP 服务器的处理程序：

```
var handler = function(req, res)
{
    url = convertURL(req.url); //I implemented "virtual directories", ignore this.

    if (okURL(url)) //If it isn't forbidden (e.g. forbidden/passwd.txt)
    {
        fs.readFile (url, function(err, data)
        {
            if (err)
            {
                res.writeHead(404);
                return res.end("File not found.");
            }

            //I think that I need something here.
            res.writeHead(200);
            res.end(data);
        });
    }
    else //The user is requesting an out-of-bounds file.
    {
        res.writeHead(403);
        return res.end("Forbidden.");
    }
} 
```

问题：**如何更正我的服务器端代码以正确配置 MIME 类型？**

（注意：我已经找到了[https://github.com/broofa/node-mime](https://github.com/broofa/node-mime)，但它只能让我确定 MIME 类型，而不是“设置”它。）

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-08-15T15:42:04.183

我想到了！

感谢@rdrey 的[链接](http://nodejs.org/api/http.html#http_response_setheader_name_value)和[这个节点模块](https://github.com/broofa/node-mime)，我设法正确设置了响应的 MIME 类型，如下所示：

```
function handler(req, res) {
    var url = convertURL(req.url);

    if (okURL(url)) {
        fs.readFile(url, function(err, data) {
            if (err) {
                res.writeHead(404);
                return res.end("File not found.");
            }

            res.setHeader("Content-Type", mime.lookup(url)); //Solution!
            res.writeHead(200);
            res.end(data);
        });
    } else {
        res.writeHead(403);
        return res.end("Forbidden.");
    }
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-15T15:15:02.493

在 google 上搜索 Content-Type HTTP 标头。

然后弄清楚如何使用[http://expressjs.com/api.html#res.set进行设置](http://expressjs.com/api.html#res.set)

哎呀，这个例子包括你的答案；）

只需检查文件结尾，如果是`.js`，请设置适当的 MIME 类型以使浏览器满意。

编辑：如果这是纯节点，没有快递，请看这里：[http ://nodejs.org/api/http.html#http_response_setheader_name_value](http://nodejs.org/api/http.html#http_response_setheader_name_value)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-13T19:32:37.920

`mime.lookup()`现在改名为`mime.getType()`. 所以你可以这样做：

```
res.set('Content-Type', mime.getType('path/file')); 
```

[https://www.npmjs.com/package/mime](https://www.npmjs.com/package/mime)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-22T23:38:30.680

我在使用您的处理程序函数时遇到问题，因为未定义 convertURL 和 okURL 函数。我稍微修改了代码，看起来像这样

```
function handler(req, res) 
{
    // /home/juan/Documentos/push-api-demo is the path of the root directory of the server
    var url             = '/home/juan/Documentos/push-api-demo' + req.url;
    var file_exists     = fs.existsSync(url);

    if (file_exists) 
    {
        fs.readFile(url, function(err, data) 
        {
            if (err) 
            {
                res.writeHead(404);
                return res.end("File not found.");
            }

            res.setHeader("Content-Type", mime.lookup(url)); 
            res.writeHead(200);
            res.end(data);
        });
    } 
    else 
    {
        res.writeHead(403);
        return res.end("Forbidden.");
    }
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-04-24T09:39:37.670

您可以复制以下 JSON，[其中包含 mime 类型的完整列表](https://www.freeformatter.com/mime-types-list.html#mime-types-list)，

```
{".x3d":"application/vnd.hzn-3d-crossword",".3gp":"video/3gpp",".3g2":"video/3gpp2",".mseq":"application/vnd.mseq",".pwn":"application/vnd.3m.post-it-notes",".plb":"application/vnd.3gpp.pic-bw-large",".psb":"application/vnd.3gpp.pic-bw-small",".pvb":"application/vnd.3gpp.pic-bw-var",".tcap":"application/vnd.3gpp2.tcap",".7z":"application/x-7z-compressed",".abw":"application/x-abiword",".ace":"application/x-ace-compressed",".acc":"application/vnd.americandynamics.acc",".acu":"application/vnd.acucobol",".atc":"application/vnd.acucorp",".adp":"audio/adpcm",".aab":"application/x-authorware-bin",".aam":"application/x-authorware-map",".aas":"application/x-authorware-seg",".air":"application/vnd.adobe.air-application-installer-package+zip",".swf":"application/x-shockwave-flash",".fxp":"application/vnd.adobe.fxp",".pdf":"application/pdf",".ppd":"application/vnd.cups-ppd",".dir":"application/x-director",".xdp":"application/vnd.adobe.xdp+xml",".xfdf":"application/vnd.adobe.xfdf",".aac":"audio/x-aac",".ahead":"application/vnd.ahead.space",".azf":"application/vnd.airzip.filesecure.azf",".azs":"application/vnd.airzip.filesecure.azs",".azw":"application/vnd.amazon.ebook",".ami":"application/vnd.amiga.ami","N/A":"application/andrew-inset",".apk":"application/vnd.android.package-archive",".cii":"application/vnd.anser-web-certificate-issue-initiation",".fti":"application/vnd.anser-web-funds-transfer-initiation",".atx":"application/vnd.antix.game-component",".dmg":"application/x-apple-diskimage",".mpkg":"application/vnd.apple.installer+xml",".aw":"application/applixware",".les":"application/vnd.hhe.lesson-player",".swi":"application/vnd.aristanetworks.swi",".s":"text/x-asm",".atomcat":"application/atomcat+xml",".atomsvc":"application/atomsvc+xml",".ac":"application/pkix-attr-cert",".aif":"audio/x-aiff",".avi":"video/x-msvideo",".aep":"application/vnd.audiograph",".dxf":"image/vnd.dxf",".dwf":"model/vnd.dwf",".par":"text/plain-bas",".bcpio":"application/x-bcpio",".bin":"application/octet-stream",".bmp":"image/bmp",".torrent":"application/x-bittorrent",".cod":"application/vnd.rim.cod",".mpm":"application/vnd.blueice.multipass",".bmi":"application/vnd.bmi",".sh":"application/x-sh",".btif":"image/prs.btif",".rep":"application/vnd.businessobjects",".bz":"application/x-bzip",".bz2":"application/x-bzip2",".csh":"application/x-csh",".c":"text/x-c",".cdxml":"application/vnd.chemdraw+xml",".css":"text/css",".cdx":"chemical/x-cdx",".cml":"chemical/x-cml",".csml":"chemical/x-csml",".cdbcmsg":"application/vnd.contact.cmsg",".cla":"application/vnd.claymore",".c4g":"application/vnd.clonk.c4group",".sub":"image/vnd.dvb.subtitle",".cdmia":"application/cdmi-capability",".cdmic":"application/cdmi-container",".cdmid":"application/cdmi-domain",".cdmio":"application/cdmi-object",".cdmiq":"application/cdmi-queue",".c11amc":"application/vnd.cluetrust.cartomobile-config",".c11amz":"application/vnd.cluetrust.cartomobile-config-pkg",".ras":"image/x-cmu-raster",".dae":"model/vnd.collada+xml",".csv":"text/csv",".cpt":"application/mac-compactpro",".wmlc":"application/vnd.wap.wmlc",".cgm":"image/cgm",".ice":"x-conference/x-cooltalk",".cmx":"image/x-cmx",".xar":"application/vnd.xara",".cmc":"application/vnd.cosmocaller",".cpio":"application/x-cpio",".clkx":"application/vnd.crick.clicker",".clkk":"application/vnd.crick.clicker.keyboard",".clkp":"application/vnd.crick.clicker.palette",".clkt":"application/vnd.crick.clicker.template",".clkw":"application/vnd.crick.clicker.wordbank",".wbs":"application/vnd.criticaltools.wbs+xml",".cryptonote":"application/vnd.rig.cryptonote",".cif":"chemical/x-cif",".cmdf":"chemical/x-cmdf",".cu":"application/cu-seeme",".cww":"application/prs.cww",".curl":"text/vnd.curl",".dcurl":"text/vnd.curl.dcurl",".mcurl":"text/vnd.curl.mcurl",".scurl":"text/vnd.curl.scurl",".car":"application/vnd.curl.car",".pcurl":"application/vnd.curl.pcurl",".cmp":"application/vnd.yellowriver-custom-menu",".dssc":"application/dssc+der",".xdssc":"application/dssc+xml",".deb":"application/x-debian-package",".uva":"audio/vnd.dece.audio",".uvi":"image/vnd.dece.graphic",".uvh":"video/vnd.dece.hd",".uvm":"video/vnd.dece.mobile",".uvu":"video/vnd.uvvu.mp4",".uvp":"video/vnd.dece.pd",".uvs":"video/vnd.dece.sd",".uvv":"video/vnd.dece.video",".dvi":"application/x-dvi",".seed":"application/vnd.fdsn.seed",".dtb":"application/x-dtbook+xml",".res":"application/x-dtbresource+xml",".ait":"application/vnd.dvb.ait",".svc":"application/vnd.dvb.service",".eol":"audio/vnd.digital-winds",".djvu":"image/vnd.djvu",".dtd":"application/xml-dtd",".mlp":"application/vnd.dolby.mlp",".wad":"application/x-doom",".dpg":"application/vnd.dpgraph",".dra":"audio/vnd.dra",".dfac":"application/vnd.dreamfactory",".dts":"audio/vnd.dts",".dtshd":"audio/vnd.dts.hd",".dwg":"image/vnd.dwg",".geo":"application/vnd.dynageo",".es":"application/ecmascript",".mag":"application/vnd.ecowin.chart",".mmr":"image/vnd.fujixerox.edmics-mmr",".rlc":"image/vnd.fujixerox.edmics-rlc",".exi":"application/exi",".mgz":"application/vnd.proteus.magazine",".epub":"application/epub+zip",".eml":"message/rfc822",".nml":"application/vnd.enliven",".xpr":"application/vnd.is-xpr",".xif":"image/vnd.xiff",".xfdl":"application/vnd.xfdl",".emma":"application/emma+xml",".ez2":"application/vnd.ezpix-album",".ez3":"application/vnd.ezpix-package",".fst":"image/vnd.fst",".fvt":"video/vnd.fvt",".fbs":"image/vnd.fastbidsheet",".fe_launch":"application/vnd.denovo.fcselayout-link",".f4v":"video/x-f4v",".flv":"video/x-flv",".fpx":"image/vnd.fpx",".npx":"image/vnd.net-fpx",".flx":"text/vnd.fmi.flexstor",".fli":"video/x-fli",".ftc":"application/vnd.fluxtime.clip",".fdf":"application/vnd.fdf",".f":"text/x-fortran",".mif":"application/vnd.mif",".fm":"application/vnd.framemaker",".fh":"image/x-freehand",".fsc":"application/vnd.fsc.weblaunch",".fnc":"application/vnd.frogans.fnc",".ltf":"application/vnd.frogans.ltf",".ddd":"application/vnd.fujixerox.ddd",".xdw":"application/vnd.fujixerox.docuworks",".xbd":"application/vnd.fujixerox.docuworks.binder",".oas":"application/vnd.fujitsu.oasys",".oa2":"application/vnd.fujitsu.oasys2",".oa3":"application/vnd.fujitsu.oasys3",".fg5":"application/vnd.fujitsu.oasysgp",".bh2":"application/vnd.fujitsu.oasysprs",".spl":"application/x-futuresplash",".fzs":"application/vnd.fuzzysheet",".g3":"image/g3fax",".gmx":"application/vnd.gmx",".gtw":"model/vnd.gtw",".txd":"application/vnd.genomatix.tuxedo",".ggb":"application/vnd.geogebra.file",".ggt":"application/vnd.geogebra.tool",".gdl":"model/vnd.gdl",".gex":"application/vnd.geometry-explorer",".gxt":"application/vnd.geonext",".g2w":"application/vnd.geoplan",".g3w":"application/vnd.geospace",".gsf":"application/x-font-ghostscript",".bdf":"application/x-font-bdf",".gtar":"application/x-gtar",".texinfo":"application/x-texinfo",".gnumeric":"application/x-gnumeric",".kml":"application/vnd.google-earth.kml+xml",".kmz":"application/vnd.google-earth.kmz",".gqf":"application/vnd.grafeq",".gif":"image/gif",".gv":"text/vnd.graphviz",".gac":"application/vnd.groove-account",".ghf":"application/vnd.groove-help",".gim":"application/vnd.groove-identity-message",".grv":"application/vnd.groove-injector",".gtm":"application/vnd.groove-tool-message",".tpl":"application/vnd.groove-tool-template",".vcg":"application/vnd.groove-vcard",".h261":"video/h261",".h263":"video/h263",".h264":"video/h264",".hpid":"application/vnd.hp-hpid",".hps":"application/vnd.hp-hps",".hdf":"application/x-hdf",".rip":"audio/vnd.rip",".hbci":"application/vnd.hbci",".jlt":"application/vnd.hp-jlyt",".pcl":"application/vnd.hp-pcl",".hpgl":"application/vnd.hp-hpgl",".hvs":"application/vnd.yamaha.hv-script",".hvd":"application/vnd.yamaha.hv-dic",".hvp":"application/vnd.yamaha.hv-voice",".sfd-hdstx":"application/vnd.hydrostatix.sof-data",".stk":"application/hyperstudio",".hal":"application/vnd.hal+xml",".html":"text/html",".irm":"application/vnd.ibm.rights-management",".sc":"application/vnd.ibm.secure-container",".ics":"text/calendar",".icc":"application/vnd.iccprofile",".ico":"image/x-icon",".igl":"application/vnd.igloader",".ief":"image/ief",".ivp":"application/vnd.immervision-ivp",".ivu":"application/vnd.immervision-ivu",".rif":"application/reginfo+xml",".3dml":"text/vnd.in3d.3dml",".spot":"text/vnd.in3d.spot",".igs":"model/iges",".i2g":"application/vnd.intergeo",".cdy":"application/vnd.cinderella",".xpw":"application/vnd.intercon.formnet",".fcs":"application/vnd.isac.fcs",".ipfix":"application/ipfix",".cer":"application/pkix-cert",".pki":"application/pkixcmp",".crl":"application/pkix-crl",".pkipath":"application/pkix-pkipath",".igm":"application/vnd.insors.igm",".rcprofile":"application/vnd.ipunplugged.rcprofile",".irp":"application/vnd.irepository.package+xml",".jad":"text/vnd.sun.j2me.app-descriptor",".jar":"application/java-archive",".class":"application/java-vm",".jnlp":"application/x-java-jnlp-file",".ser":"application/java-serialized-object",".java":"text/x-java-source,java",".js":"application/javascript",".json":"application/json",".joda":"application/vnd.joost.joda-archive",".jpm":"video/jpm",".pjpeg":"image/pjpeg",".jpgv":"video/jpeg",".ktz":"application/vnd.kahootz",".mmd":"application/vnd.chipnuts.karaoke-mmd",".karbon":"application/vnd.kde.karbon",".chrt":"application/vnd.kde.kchart",".kfo":"application/vnd.kde.kformula",".flw":"application/vnd.kde.kivio",".kon":"application/vnd.kde.kontour",".kpr":"application/vnd.kde.kpresenter",".ksp":"application/vnd.kde.kspread",".kwd":"application/vnd.kde.kword",".htke":"application/vnd.kenameaapp",".kia":"application/vnd.kidspiration",".kne":"application/vnd.kinar",".sse":"application/vnd.kodak-descriptor",".lasxml":"application/vnd.las.las+xml",".latex":"application/x-latex",".lbd":"application/vnd.llamagraphics.life-balance.desktop",".lbe":"application/vnd.llamagraphics.life-balance.exchange+xml",".jam":"application/vnd.jam",".123":"application/vnd.lotus-1-2-3",".apr":"application/vnd.lotus-approach",".pre":"application/vnd.lotus-freelance",".nsf":"application/vnd.lotus-notes",".org":"application/vnd.lotus-organizer",".scm":"application/vnd.lotus-screencam",".lwp":"application/vnd.lotus-wordpro",".lvp":"audio/vnd.lucent.voice",".m3u":"audio/x-mpegurl",".m4v":"video/x-m4v",".hqx":"application/mac-binhex40",".portpkg":"application/vnd.macports.portpkg",".mgp":"application/vnd.osgeo.mapguide.package",".mrc":"application/marc",".mrcx":"application/marcxml+xml",".mxf":"application/mxf",".nbp":"application/vnd.wolfram.player",".ma":"application/mathematica",".mathml":"application/mathml+xml",".mbox":"application/mbox",".mc1":"application/vnd.medcalcdata",".mscml":"application/mediaservercontrol+xml",".cdkey":"application/vnd.mediastation.cdkey",".mwf":"application/vnd.mfer",".mfm":"application/vnd.mfmp",".msh":"model/mesh",".mads":"application/mads+xml",".mets":"application/mets+xml",".mods":"application/mods+xml",".meta4":"application/metalink4+xml",".mcd":"application/vnd.mcd",".flo":"application/vnd.micrografx.flo",".igx":"application/vnd.micrografx.igx",".es3":"application/vnd.eszigno3+xml",".mdb":"application/x-msaccess",".asf":"video/x-ms-asf",".exe":"application/x-msdownload",".cil":"application/vnd.ms-artgalry",".cab":"application/vnd.ms-cab-compressed",".ims":"application/vnd.ms-ims",".application":"application/x-ms-application",".clp":"application/x-msclip",".mdi":"image/vnd.ms-modi",".eot":"application/vnd.ms-fontobject",".xls":"application/vnd.ms-excel",".xlam":"application/vnd.ms-excel.addin.macroenabled.12",".xlsb":"application/vnd.ms-excel.sheet.binary.macroenabled.12",".xltm":"application/vnd.ms-excel.template.macroenabled.12",".xlsm":"application/vnd.ms-excel.sheet.macroenabled.12",".chm":"application/vnd.ms-htmlhelp",".crd":"application/x-mscardfile",".lrm":"application/vnd.ms-lrm",".mvb":"application/x-msmediaview",".mny":"application/x-msmoney",".pptx":"application/vnd.openxmlformats-officedocument.presentationml.presentation",".sldx":"application/vnd.openxmlformats-officedocument.presentationml.slide",".ppsx":"application/vnd.openxmlformats-officedocument.presentationml.slideshow",".potx":"application/vnd.openxmlformats-officedocument.presentationml.template",".xlsx":"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",".xltx":"application/vnd.openxmlformats-officedocument.spreadsheetml.template",".docx":"application/vnd.openxmlformats-officedocument.wordprocessingml.document",".dotx":"application/vnd.openxmlformats-officedocument.wordprocessingml.template",".obd":"application/x-msbinder",".thmx":"application/vnd.ms-officetheme",".onetoc":"application/onenote",".pya":"audio/vnd.ms-playready.media.pya",".pyv":"video/vnd.ms-playready.media.pyv",".ppt":"application/vnd.ms-powerpoint",".ppam":"application/vnd.ms-powerpoint.addin.macroenabled.12",".sldm":"application/vnd.ms-powerpoint.slide.macroenabled.12",".pptm":"application/vnd.ms-powerpoint.presentation.macroenabled.12",".ppsm":"application/vnd.ms-powerpoint.slideshow.macroenabled.12",".potm":"application/vnd.ms-powerpoint.template.macroenabled.12",".mpp":"application/vnd.ms-project",".pub":"application/x-mspublisher",".scd":"application/x-msschedule",".xap":"application/x-silverlight-app",".stl":"application/vnd.ms-pki.stl",".cat":"application/vnd.ms-pki.seccat",".vsd":"application/vnd.visio",".vsdx":"application/vnd.visio2013",".wm":"video/x-ms-wm",".wma":"audio/x-ms-wma",".wax":"audio/x-ms-wax",".wmx":"video/x-ms-wmx",".wmd":"application/x-ms-wmd",".wpl":"application/vnd.ms-wpl",".wmz":"application/x-ms-wmz",".wmv":"video/x-ms-wmv",".wvx":"video/x-ms-wvx",".wmf":"application/x-msmetafile",".trm":"application/x-msterminal",".doc":"application/msword",".docm":"application/vnd.ms-word.document.macroenabled.12",".dotm":"application/vnd.ms-word.template.macroenabled.12",".wri":"application/x-mswrite",".wps":"application/vnd.ms-works",".xbap":"application/x-ms-xbap",".xps":"application/vnd.ms-xpsdocument",".mid":"audio/midi",".mpy":"application/vnd.ibm.minipay",".afp":"application/vnd.ibm.modcap",".rms":"application/vnd.jcp.javame.midlet-rms",".tmo":"application/vnd.tmobile-livetv",".prc":"application/x-mobipocket-ebook",".mbk":"application/vnd.mobius.mbk",".dis":"application/vnd.mobius.dis",".plc":"application/vnd.mobius.plc",".mqy":"application/vnd.mobius.mqy",".msl":"application/vnd.mobius.msl",".txf":"application/vnd.mobius.txf",".daf":"application/vnd.mobius.daf",".fly":"text/vnd.fly",".mpc":"application/vnd.mophun.certificate",".mpn":"application/vnd.mophun.application",".mj2":"video/mj2",".mpga":"audio/mpeg",".mxu":"video/vnd.mpegurl",".mpeg":"video/mpeg",".m21":"application/mp21",".mp4a":"audio/mp4",".mp4":"application/mp4",".m3u8":"application/vnd.apple.mpegurl",".mus":"application/vnd.musician",".msty":"application/vnd.muvee.style",".mxml":"application/xv+xml",".ngdat":"application/vnd.nokia.n-gage.data",".n-gage":"application/vnd.nokia.n-gage.symbian.install",".ncx":"application/x-dtbncx+xml",".nc":"application/x-netcdf",".nlu":"application/vnd.neurolanguage.nlu",".dna":"application/vnd.dna",".nnd":"application/vnd.noblenet-directory",".nns":"application/vnd.noblenet-sealer",".nnw":"application/vnd.noblenet-web",".rpst":"application/vnd.nokia.radio-preset",".rpss":"application/vnd.nokia.radio-presets",".n3":"text/n3",".edm":"application/vnd.novadigm.edm",".edx":"application/vnd.novadigm.edx",".ext":"application/vnd.novadigm.ext",".gph":"application/vnd.flographit",".ecelp4800":"audio/vnd.nuera.ecelp4800",".ecelp7470":"audio/vnd.nuera.ecelp7470",".ecelp9600":"audio/vnd.nuera.ecelp9600",".oda":"application/oda",".ogx":"application/ogg",".oga":"audio/ogg",".ogv":"video/ogg",".dd2":"application/vnd.oma.dd2+xml",".oth":"application/vnd.oasis.opendocument.text-web",".opf":"application/oebps-package+xml",".qbo":"application/vnd.intu.qbo",".oxt":"application/vnd.openofficeorg.extension",".osf":"application/vnd.yamaha.openscoreformat",".weba":"audio/webm",".webm":"video/webm",".odc":"application/vnd.oasis.opendocument.chart",".otc":"application/vnd.oasis.opendocument.chart-template",".odb":"application/vnd.oasis.opendocument.database",".odf":"application/vnd.oasis.opendocument.formula",".odft":"application/vnd.oasis.opendocument.formula-template",".odg":"application/vnd.oasis.opendocument.graphics",".otg":"application/vnd.oasis.opendocument.graphics-template",".odi":"application/vnd.oasis.opendocument.image",".oti":"application/vnd.oasis.opendocument.image-template",".odp":"application/vnd.oasis.opendocument.presentation",".otp":"application/vnd.oasis.opendocument.presentation-template",".ods":"application/vnd.oasis.opendocument.spreadsheet",".ots":"application/vnd.oasis.opendocument.spreadsheet-template",".odt":"application/vnd.oasis.opendocument.text",".odm":"application/vnd.oasis.opendocument.text-master",".ott":"application/vnd.oasis.opendocument.text-template",".ktx":"image/ktx",".sxc":"application/vnd.sun.xml.calc",".stc":"application/vnd.sun.xml.calc.template",".sxd":"application/vnd.sun.xml.draw",".std":"application/vnd.sun.xml.draw.template",".sxi":"application/vnd.sun.xml.impress",".sti":"application/vnd.sun.xml.impress.template",".sxm":"application/vnd.sun.xml.math",".sxw":"application/vnd.sun.xml.writer",".sxg":"application/vnd.sun.xml.writer.global",".stw":"application/vnd.sun.xml.writer.template",".otf":"application/x-font-otf",".osfpvg":"application/vnd.yamaha.openscoreformat.osfpvg+xml",".dp":"application/vnd.osgi.dp",".pdb":"application/vnd.palm",".p":"text/x-pascal",".paw":"application/vnd.pawaafile",".pclxl":"application/vnd.hp-pclxl",".efif":"application/vnd.picsel",".pcx":"image/x-pcx",".psd":"image/vnd.adobe.photoshop",".prf":"application/pics-rules",".pic":"image/x-pict",".chat":"application/x-chat",".p10":"application/pkcs10",".p12":"application/x-pkcs12",".p7m":"application/pkcs7-mime",".p7s":"application/pkcs7-signature",".p7r":"application/x-pkcs7-certreqresp",".p7b":"application/x-pkcs7-certificates",".p8":"application/pkcs8",".plf":"application/vnd.pocketlearn",".pnm":"image/x-portable-anymap",".pbm":"image/x-portable-bitmap",".pcf":"application/x-font-pcf",".pfr":"application/font-tdpfr",".pgn":"application/x-chess-pgn",".pgm":"image/x-portable-graymap",".png":"image/x-png",".ppm":"image/x-portable-pixmap",".pskcxml":"application/pskc+xml",".pml":"application/vnd.ctc-posml",".ai":"application/postscript",".pfa":"application/x-font-type1",".pbd":"application/vnd.powerbuilder6",".pgp":"application/pgp-signature",".box":"application/vnd.previewsystems.box",".ptid":"application/vnd.pvi.ptid1",".pls":"application/pls+xml",".str":"application/vnd.pg.format",".ei6":"application/vnd.pg.osasli",".dsc":"text/prs.lines.tag",".psf":"application/x-font-linux-psf",".qps":"application/vnd.publishare-delta-tree",".wg":"application/vnd.pmi.widget",".qxd":"application/vnd.quark.quarkxpress",".esf":"application/vnd.epson.esf",".msf":"application/vnd.epson.msf",".ssf":"application/vnd.epson.ssf",".qam":"application/vnd.epson.quickanime",".qfx":"application/vnd.intu.qfx",".qt":"video/quicktime",".rar":"application/x-rar-compressed",".ram":"audio/x-pn-realaudio",".rmp":"audio/x-pn-realaudio-plugin",".rsd":"application/rsd+xml",".rm":"application/vnd.rn-realmedia",".bed":"application/vnd.realvnc.bed",".mxl":"application/vnd.recordare.musicxml",".musicxml":"application/vnd.recordare.musicxml+xml",".rnc":"application/relax-ng-compact-syntax",".rdz":"application/vnd.data-vision.rdz",".rdf":"application/rdf+xml",".rp9":"application/vnd.cloanto.rp9",".jisp":"application/vnd.jisp",".rtf":"application/rtf",".rtx":"text/richtext",".link66":"application/vnd.route66.link66+xml",".shf":"application/shf+xml",".st":"application/vnd.sailingtracker.track",".svg":"image/svg+xml",".sus":"application/vnd.sus-calendar",".sru":"application/sru+xml",".setpay":"application/set-payment-initiation",".setreg":"application/set-registration-initiation",".sema":"application/vnd.sema",".semd":"application/vnd.semd",".semf":"application/vnd.semf",".see":"application/vnd.seemail",".snf":"application/x-font-snf",".spq":"application/scvp-vp-request",".spp":"application/scvp-vp-response",".scq":"application/scvp-cv-request",".scs":"application/scvp-cv-response",".sdp":"application/sdp",".etx":"text/x-setext",".movie":"video/x-sgi-movie",".ifm":"application/vnd.shana.informed.formdata",".itp":"application/vnd.shana.informed.formtemplate",".iif":"application/vnd.shana.informed.interchange",".ipk":"application/vnd.shana.informed.package",".tfi":"application/thraud+xml",".shar":"application/x-shar",".rgb":"image/x-rgb",".slt":"application/vnd.epson.salt",".aso":"application/vnd.accpac.simply.aso",".imp":"application/vnd.accpac.simply.imp",".twd":"application/vnd.simtech-mindmapper",".csp":"application/vnd.commonspace",".saf":"application/vnd.yamaha.smaf-audio",".mmf":"application/vnd.smaf",".spf":"application/vnd.yamaha.smaf-phrase",".teacher":"application/vnd.smart.teacher",".svd":"application/vnd.svd",".rq":"application/sparql-query",".srx":"application/sparql-results+xml",".gram":"application/srgs",".grxml":"application/srgs+xml",".ssml":"application/ssml+xml",".skp":"application/vnd.koan",".sgml":"text/sgml",".sdc":"application/vnd.stardivision.calc",".sda":"application/vnd.stardivision.draw",".sdd":"application/vnd.stardivision.impress",".smf":"application/vnd.stardivision.math",".sdw":"application/vnd.stardivision.writer",".sgl":"application/vnd.stardivision.writer-global",".sm":"application/vnd.stepmania.stepchart",".sit":"application/x-stuffit",".sitx":"application/x-stuffitx",".sdkm":"application/vnd.solent.sdkm+xml",".xo":"application/vnd.olpc-sugar",".au":"audio/basic",".wqd":"application/vnd.wqd",".sis":"application/vnd.symbian.install",".smi":"application/smil+xml",".xsm":"application/vnd.syncml+xml",".bdm":"application/vnd.syncml.dm+wbxml",".xdm":"application/vnd.syncml.dm+xml",".sv4cpio":"application/x-sv4cpio",".sv4crc":"application/x-sv4crc",".sbml":"application/sbml+xml",".tsv":"text/tab-separated-values",".tiff":"image/tiff",".tao":"application/vnd.tao.intent-module-archive",".tar":"application/x-tar",".tcl":"application/x-tcl",".tex":"application/x-tex",".tfm":"application/x-tex-tfm",".tei":"application/tei+xml",".txt":"text/plain",".dxp":"application/vnd.spotfire.dxp",".sfs":"application/vnd.spotfire.sfs",".tsd":"application/timestamped-data",".tpt":"application/vnd.trid.tpt",".mxs":"application/vnd.triscape.mxs",".t":"text/troff",".tra":"application/vnd.trueapp",".ttf":"application/x-font-ttf",".ttl":"text/turtle",".umj":"application/vnd.umajin",".uoml":"application/vnd.uoml+xml",".unityweb":"application/vnd.unity",".ufd":"application/vnd.ufdl",".uri":"text/uri-list",".utz":"application/vnd.uiq.theme",".ustar":"application/x-ustar",".uu":"text/x-uuencode",".vcs":"text/x-vcalendar",".vcf":"text/x-vcard",".vcd":"application/x-cdlink",".vsf":"application/vnd.vsf",".wrl":"model/vrml",".vcx":"application/vnd.vcx",".mts":"model/vnd.mts",".vtu":"model/vnd.vtu",".vis":"application/vnd.visionary",".viv":"video/vnd.vivo",".ccxml":"application/ccxml+xml,",".vxml":"application/voicexml+xml",".src":"application/x-wais-source",".wbxml":"application/vnd.wap.wbxml",".wbmp":"image/vnd.wap.wbmp",".wav":"audio/x-wav",".davmount":"application/davmount+xml",".woff":"application/x-font-woff",".wspolicy":"application/wspolicy+xml",".webp":"image/webp",".wtb":"application/vnd.webturbo",".wgt":"application/widget",".hlp":"application/winhlp",".wml":"text/vnd.wap.wml",".wmls":"text/vnd.wap.wmlscript",".wmlsc":"application/vnd.wap.wmlscriptc",".wpd":"application/vnd.wordperfect",".stf":"application/vnd.wt.stf",".wsdl":"application/wsdl+xml",".xbm":"image/x-xbitmap",".xpm":"image/x-xpixmap",".xwd":"image/x-xwindowdump",".der":"application/x-x509-ca-cert",".fig":"application/x-xfig",".xhtml":"application/xhtml+xml",".xml":"application/rss+xml",".xdf":"application/xcap-diff+xml",".xenc":"application/xenc+xml",".xer":"application/patch-ops-error+xml",".rl":"application/resource-lists+xml",".rs":"application/rls-services+xml",".rld":"application/resource-lists-diff+xml",".xslt":"application/xslt+xml",".xop":"application/xop+xml",".xpi":"application/x-xpinstall",".xspf":"application/xspf+xml",".xul":"application/vnd.mozilla.xul+xml",".xyz":"chemical/x-xyz",".yaml":"text/yaml",".yang":"application/yang",".yin":"application/yin+xml",".zir":"application/vnd.zul",".zip":"application/zip",".zmm":"application/vnd.handheld-entertainment+xml",".zaz":"application/vnd.zzazz.deck+xml",".atom":"application/atom+xml",".jpeg":"image/jpeg",".jpg":"image/jpeg",".rss":"application/rss+xml"} 
```

到你的服务器上一个名为`mimeTypes.json`（例如）的文件，用 读取它`var mimes = require("mimeTypes.json")`，然后在 res.end 之前简单地做

```
var extension = req.url.substring(
    req.
    url.lastIndexOf(".")
);

var type = mimes[extension];
if(type) {
    req.setHeader("content-type", type);
} 
```

附言

JSON 是从上面链接的 JavaScript 控制台解析的。如果发生更改，只需在该页面的控制台中运行以下命令即可获取新的 JSON：

```
var j = 
Array.apply(
    null,
    document
    .getElementsByTagName("table")[0].rows
).map(x => [
    x.cells[2].innerText,
    x.cells[1].innerText
]).slice(1)
.filter(x=>
    !x[1].includes("x-citrix-jpeg")
)

j.forEach(x => {
    x[0].indexOf(",") > -1 && (
        x[0].split(",").forEach(y =>
             j.push([y.trim(), x[1]])
        )
    )
})

j = Object.fromEntries(
    j.filter(x=>
        x[0].indexOf(",") === -1
    )
); 
```

# sql - 计算下一个日期将发生天/月组合

> ID：11971921
> 
> 赞同：4
> 
> 时间：2012-08-15T15:07:57.117
> 
> 标签：sql, oracle

我有一个月和一天；我正在尝试计算出在给定日期之后本月和日将存在的下一个日期。

例如，如果我有一个如下表，其中 reference_date 的格式为`'MMDD'`. 请不要为此责备我；它是在英国提交的官方格式。

```
create table tmp_ben_dates ( filing_date date, reference_date varchar2(4));
insert all
into tmp_ben_dates values ( to_date('31/12/2011','dd/mm/yyyy'), '1231')
into tmp_ben_dates values ( to_date('31/12/2011','dd/mm/yyyy'), '1130')
into tmp_ben_dates values ( to_date('31/12/2011','dd/mm/yyyy'), '0101')
into tmp_ben_dates values ( to_date('31/07/2011','dd/mm/yyyy'), '0601')
into tmp_ben_dates values ( to_date('31/07/2011','dd/mm/yyyy'), '0801')
select * from dual; 
```

我想返回 each`reference_date`之后出现的第一个日期`filing_date`。例如，在第一个示例中，这将是 31/12/2012，而在最后一个示例中，这将是 01/08/2011。

到目前为止，我最好的尝试如下

```
with new_date as ( 
  select reference_date
       , filing_date
       , add_months( trunc(filing_date,'y')
                   , to_number(substr(reference_date,1,2)) - 1) 
           + to_number(substr(reference_date,3)) - 1 as the_date
    from tmp_ben_dates
         )
select filing_date
     , reference_date
     , case when filing_date < the_date then next_date 
            else add_months(the_date,12) end
  from new_date 
```

返回正确的结果：

```
FILING_DATE         REFE NEXT_DATE
------------------- ---- -------------------
31/12/2011 00:00:00 1231 31/12/2012 00:00:00
31/12/2011 00:00:00 1130 30/11/2012 00:00:00
31/12/2011 00:00:00 0101 01/01/2012 00:00:00
31/07/2011 00:00:00 0601 01/06/2012 00:00:00
31/07/2011 00:00:00 0801 01/08/2011 00:00:00 
```

然而，这也是完全荒谬的。难以阅读和理解。

也可以使用`interval`，但我真的不明白它是如何让确定发生了什么变得不那么混乱的。

```
with new_date as ( 
  select reference_date
       , filing_date
       , trunc(filing_date,'y') 
          + to_yminterval( 'P' 
                           || to_char(to_number(substr(reference_date,1,2)) - 1) 
                           || 'M') 
          + to_dsinterval( 'P' 
                           || to_char(to_number(substr(reference_date,3)) - 1) 
                           || 'D') as the_date
    from tmp_ben_dates
         )
select filing_date
       , reference_date
       , case when filing_date < the_date then the_date 
              else add_months(the_date,12) end as next_date
  from new_date 
```

我在这里遗漏了一些非常明显的东西吗？在 SQL 中是否有一种简单的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:48:44.867

你可能会发现这更简单。它只是将日期置于 YYYYMMDD 格式，并将其用作 to_date() 的第二个参数：

```
with new_date as (
    select reference_date, filing_date,
           to_date(to_char(filing_date, 'yyyy')||reference_date), 'yyyymmdd'
                  ) - 1 as the_date
    from tmp_ben_dates
  )
select filing_date, reference_date,
      (case when filing_date < the_date then next_date
            else add_months(the_date,12)
       end)
from new_date 
```

# php - 检查是否连接到应用程序，如果没有重定向到使用 Facebook PHP SDK / API 登录

> ID：11971923
> 
> 赞同：-1
> 
> 时间：2012-08-15T15:08:01.240
> 
> 标签：php, facebook, facebook-graph-api, facebook-php-sdk

我正在努力寻找一种方法来检测用户是否未连接到我的应用程序，我想向活动“查看”发送一个“项目”，它工作得很好，但他们必须先单击登录链接，然后重新加载该页面，他们已登录。

我怎样才能让它自动发生？如何检查用户是否连接到应用程序？我尝试了以下代码，但未连接的用户只会得到一个空白页。

```
$facebook = new Facebook($config);
$user_id = $facebook->getUser();

    // Check if logged in
    if($user_id) {
            $params = array(
              'ok_session' => 1, // Logged in and connected
              'no_user' => 2, // Logged out of facebook
              'no_session' => 3, // Logged in but not connected
            );
            $next_url = $facebook->getLoginStatusUrl($params);

            if($next_url == 2 || $next_url == 3){
                header('Location: '.$facebook->getLoginUrl(array('scope' => 'publish_stream')));
            }
        } else {
            // Not logged in
            header('Location: '.$facebook->getLoginUrl(array('scope' => 'publish_stream')));
    } 
```

似乎没有检查用户是否已连接的功能，所以我使用了该`getLoginUrl`功能。

`$user_id`由提供`$user_id = $facebook->getUser();`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:29:49.147

If we are talking canvas/page tab app here, then the info you’re looking for is in the `signed_request`parameter your app gets passed on initial load.

If not – “outside” of Facebook the PHP SDK has no way of knowing if there’s a user visiting your page that has used your app before if there aren’t any cookies set for your domain remaining that say so.

You can use `FB.getLoginStatus` out of the JS SDK – that will make a cross-domain request to Facebook to see if the user is logged in, and can set the appropriate cookies under your domain that’ll let the PHP SDK take notice on the *next* request to your server as well.

# c# - OnPropertyChange 射击顺序

> ID：11971924
> 
> 赞同：6
> 
> 时间：2012-08-15T15:08:03.930
> 
> 标签：c#, wpf, xaml, mvvm

我有一个应用程序，您可以在其中选择 ListBox 中的不同对象。当您选择一个对象时，它会更改控件的视图模型。该控件使用 CodePlex 中的时间线控件，因此，我将时间线数据的 StartDate 和 EndDate 绑定到 ViewModel。更换 ViewModel 时，有时会出现错误：

```
ArgumentOutOfRangeException: MaxDateTime cannot be less then MinDateTime 
```

这只发生在我从较晚的日期到较早的日期时。我很确定这是由于属性自动更新到视图的方式。这是相关的 XAML。

```
MaxDateTime="{Binding Path=RecordingEnd}" 
MinDateTime="{Binding Path=RecordingStart}" 
CurrentDateTime="{Binding Path=CurrentDateTime, Mode=TwoWay}" 
```

ViewModel 有这个：

```
 private int myObjectIndex;
        public int MyObjectIndex
        {
            get { return myObjectIndex; }
            set { myObjectIndex = value; OnPropertyChanged("MyObjectIndex"); MyObject = MyObjects[myObjectIndex]; }
        }

        private MyObjectViewModel myObject=new MyObjectViewModel();

        public MyObjectViewModel MyObject            {
            get { return myObject; }
            set
            {
                myObject= value;
                OnPropertyChanged("MyObject");
            }
        } 
```

有没有办法解决这个问题？有没有办法告诉 WPF 对象中的参数应该更新的顺序？

更新：我最终使用了@colinsmith 回复的变体：

```
public MyObjectViewModel MyObject {
    get { return myObject; }
    set 
    {
        myObject= new MyObjectViewModel();
        OnPropertyChanged("MyObject");

        myObject= value;
        OnPropertyChanged("MyObject");    
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:40:41.190

你能试试这个：

```
public MyObjectViewModel MyObject            {
            get { return myObject; }
            set
            {
                myObject=null;
                OnPropertyChanged("MyObject");

                myObject= value;
                OnPropertyChanged("MyObject");
            }
        } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:27:38.817

您可以处理这样一个事实，即可以在最大数据时间之前更新最小日期时间并使某些内容无效（即推迟设置最大值或最小值，直到最大值和最小值都被更新）。这可能非常容易出错。或者，您可以将最大值和最小值设为相同的值，以便它们只能同时更新。例如，而不是拥有`RecordingEnd`和`RecordingStart`拥有`RecordingSpan`它同时具有最大值和最小值。

# jsf-2 - 为 f:metadata 创建复合组件

> ID：11971927
> 
> 赞同：3
> 
> 时间：2012-08-15T15:08:11.280
> 
> 标签：jsf-2, metadata, facelets, composite-component

我想创建一个复合组件，它将一些常见的元数据添加到视图中，例如：

```
<viewController:metadata controller="orderController"/> 
```

组件：

```
<composite:interface>
  <composite:attribute name="controller" />
</composite:interface>

<composite:implementation>

  <f:metadata>
    <f:viewParam name="id" value="#{cc.attrs.controller.id}" />
    <f:event type="preRenderView"
      listener="#{cc.attrs.controller.initConversation}" />
  </f:metadata>

</composite:implementation> 
```

我做了类似的事情来为所有视图添加一个按钮栏，它工作正常，但似乎 f:metadata 不可能。

我是对的还是我的代码有问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T15:15:51.497

这是不可能的。必须进入`<f:metadata>`与视图 ID 关联的视图。另请参阅[标签文档](http://docs.oracle.com/javaee/6/javaserverfaces/2.1/docs/vdldocs/facelets/f/metadata.html)（强调我的）：

> 声明此视图的元数据方面。这必须是`<f:view>`. **此标记必须位于给定 viewId 的顶级 XHTML 文件中，或位于模板客户端中，但不能位于模板**中。实现必须确保刻面的直接子代是 a `UIPanel`，即使刻面只有一个子代。实现必须将 的 id 设置为`UIPanel`符号`UIViewRoot.METADATA_FACET_NAME`常量的值。

# sql-server-2012 - 为什么这个查询的 CONVERT to datetime 中断而不是另一个？

> ID：11971933
> 
> 赞同：0
> 
> 时间：2012-08-15T15:08:28.993
> 
> 标签：sql-server-2012

此查询工作正常：

```
select CONVERT(DATETIME, GroupAdminEffectiveDate, 101) from ExchangeSmallGroupEnrollment
group by GroupAdminEffectiveDate 
```

并返回以下内容：

```
1900-01-01 00:00:00.000
2012-06-30 00:00:00.000
2012-07-01 00:00:00.000
2012-07-11 00:00:00.000
2012-07-23 00:00:00.000
2012-07-25 00:00:00.000
2012-08-01 00:00:00.000
2012-08-14 00:00:00.000
2012-08-26 00:00:00.000
2012-09-01 00:00:00.000
2012-09-03 00:00:00.000 
```

但是，以下查询：

```
select CONVERT(DATETIME, GroupAdminEffectiveDate, 101) from ExchangeSmallGroupEnrollment 
```

我得到以下错误：

```
Msg 241, Level 16, State 1, Line 1
Conversion failed when converting date and/or time from character string. 
```

有任何想法吗？非常感激。

更新：

询问：

```
select distinct GroupAdminEffectiveDate from ExchangeSmallGroupEnrollment 
```

结果：

```
(empty string)
06/30/2012
07/01/2012
07/11/2012
07/23/2012
07/25/2012
08/01/2012
08/14/2012
08/26/2012
09/01/2012
09/03/2012 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:15:59.763

我无法重现你的错误，所以我怀疑我们对“空字符串”的定义不同，或者还有其他事情你没有透露。同时，由于您使用的是 SQL Server 2012，因此您可以使用`TRY_PARSE`它，例如以下表达式之一：

```
SELECT TRY_PARSE(GroupAdminEffectiveDate AS DATETIME USING N'en-us') 
  FROM dbo.ExchangeSmallGroupEnrollment;

SELECT TRY_PARSE(GroupAdminEffectiveDate AS DATETIME USING N'en-us') 
  FROM dbo.ExchangeSmallGroupEnrollment
  GROUP BY GroupAdminEffectiveDate;

SELECT TRY_PARSE(GroupAdminEffectiveDate AS DATETIME USING N'en-us') 
  FROM dbo.ExchangeSmallGroupEnrollment
  GROUP BY TRY_PARSE(GroupAdminEffectiveDate AS DATETIME USING N'en-us'); 
```

如果您真的希望 1900-01-01 成为有效输出，则：

```
SELECT COALESCE(TRY_PARSE(GroupAdminEffectiveDate AS DATETIME USING N'en-us'),
    '19000101') 
  FROM dbo.ExchangeSmallGroupEnrollment
  GROUP BY TRY_PARSE(GroupAdminEffectiveDate AS DATETIME USING N'en-us'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T18:42:44.850

您首先将您的`varchar`列转换为`Datetime`然后转换。

```
Declare @testvarchar VARCHAR(15) = '08/27/2012'
select CONVERT(datetime, Cast(@testvarchar as datetime), 101) 
```

那应该可以解决您的转换错误

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T22:34:20.147

您的数据库中可能存在更多“非日期”字段。一个可以`""`，另一个`" "`。当您按或区分时，所有最终都`""`意味着NULL，这很好转换。否则它会失败`" "`（空间）。

检查`select length( GroupAdminEffectiveDate ) from ExchangeSmallGroupEnrollment` 也许它会给你一些线索？

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-08-15T15:34:30.930

检查这个：

```
select CONVERT(DATETIME, ISDATE( GroupAdminEffectiveDate), 101) from ExchangeSmallGroupEnrollment 
```

# python - 如何确定异步阻塞应用程序中的理想池大小？

> ID：11971935
> 
> 赞同：1
> 
> 时间：2012-08-15T15:08:28.637
> 
> 标签：python, asynchronous, io, network-programming, gevent

这是有问题的代码（一个非常简单的爬虫），该文件是一个 url 列表，通常 > 1000。

```
import sys, gevent
from gevent import monkey
from gevent.pool import Pool
import httplib, socket
from urlparse import urlparse
from time import time

pool = Pool(100)

monkey.patch_all(thread=False)

count = 0
size = 0
failures = 0

global_timeout = 5
socket.setdefaulttimeout(global_timeout)

def process(ourl, mode = 'GET'):
    global size, failures, global_timeout, count
    try:
        url = urlparse(ourl)
        start = time()
        conn = httplib.HTTPConnection(url.netloc, timeout = global_timeout)
        conn.request(mode, ourl)
        res = conn.getresponse()
        req = res.read()
        end = time()
        bytes = len(req)
        took = end - start
        print mode, ourl, bytes, took
        size = size + len(req)
        count += 1
    except Exception, e:
        failures += 1

start = time()

gevent.core.dns_init()
print "spawning..."
for url in open('domains'):
    pool.spawn(process, url.rstrip())
print "done...joining..."
pool.join()
print "complete"

end = time()
took = end - start
rate = size / took
print "It took %.2f seconds to process %d urls." % (took, count)
print rate, " bytes/sec"
print rate/1024, " KB/sec"
print rate/1048576, " MB/sec"

print "--- summary ---"
print "total:", count, "failures:", failures 
```

当我改变池大小时，我得到了很多不同的速度变化：-

```
pool = Pool(100) 
```

我一直在考虑编写一个算法来即时计算理想的池大小，但我不想跳进去，我想知道我是否忽略了一些东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T15:30:27.130

任何并行处理都将受 CPU 限制或 IO 限制。从您的代码的性质来看，看起来在较小的池大小时，它将是 IO 绑定的。具体来说，它将受您接口的带宽以及系统可以支持的同时打开的套接字数量的限制（考虑这里的某些版本的 Windows，我曾多次设法用完可用的套接字）。当您增加池大小时，该进程可能会开始倾向于受 CPU 限制（特别是，如果您有更多的数据处理未在此处显示）。要将池大小保持在最佳值，您需要监视所有这些变量的使用情况（打开的套接字数、进程的带宽利用率、CPU 利用率等）。您可以通过在运行爬虫时分析指标来手动执行此操作并对池大小进行必要的调整，或者您可以尝试自动执行此操作。在 Python 中是否可以实现类似的功能是另一回事。

# windows - Windows上erlang的开发环境

> ID：11971936
> 
> 赞同：3
> 
> 时间：2012-08-15T15:08:35.490
> 
> 标签：windows, compiler-construction, erlang, erlang-nif

我有一个 erlang 项目，其中包括具有与原始套接字一起使用的操作系统特定功能的 NIF。我想将此项目移植到 Windows 上，这意味着将 NIF 中的功能更改为在 Windows 上工作。

在 Windows 上进行 erlang 编程的首选 IDE 是什么？

为了能够编译这个项目，我必须设置什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T13:43:57.630

Erlang 可以设置为 msvc 中的外部工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T13:13:35.067

我建议使用它的 gcc 下载 cygwin 并尝试像在 linux 上一样编译你的 nif。[github](https://github.com/erlang/otp/blob/maint/INSTALL-WIN32.md)上有一些关于如何设置 Windows 环境来编译 Erlang/OTP 的说明，但这对于您的 NIF 来说可能是多余的。

作为一个 IDE，我会使用你在 Linux 上使用的任何东西，即希望是 Emacs :)

# python - 是否可以通过 Python 从系统托盘显示气球提示？

> ID：11971940
> 
> 赞同：2
> 
> 时间：2012-08-15T15:08:58.490
> 
> 标签：python, winapi

我想我在这里找到了相关的 MSDN 文档：http: [//msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.notifyicon.aspx)但我不确定如何（或者是否可能) 继续通过 pywin32 访问此类功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T18:15:30.430

除非您使用 IronPython，否则您将无法通过该 API 显示气球提示。

pywin32api 只是 win32 c/c++ 库的包装器。因此，您要查找的库是[Shell_NotifyIcon 函数](http://msdn.microsoft.com/en-us/library/bb762159%28VS.85%29.aspx)。

您可以使用 win32api 访问任务栏，但这并不重要。这是其他人创建的一个示例，用于[将 python 应用程序最小化到任务栏](http://www.brunningonline.net/simon/blog/archives/SysTrayIcon.py.html)。

您可能还会发现使用 IronPython、WxPython、PyQT 或 PyGTK 之类的东西要容易得多。

# objective-c - 在字符串Objective-c中连接字符串

> ID：11971945
> 
> 赞同：52
> 
> 时间：2012-08-15T15:09:08.163
> 
> 标签：objective-c, ios, string

我想在字符串中放置一个字符串。基本上在伪代码中：

```
"first part of string" + "(varying string)" + "third part of string" 
```

我怎样才能在objective-c中做到这一点？有没有办法在 obj-c 中轻松连接？谢谢！

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-08-15T15:11:12.430

是的

```
NSString *str = [NSString stringWithFormat: @"first part %@ second part", varyingString]; 
```

对于串联，您可以使用`stringByAppendingString`

```
NSString *str = @"hello ";
str = [str stringByAppendingString:@"world"]; //str is now "hello world" 
```

对于多个字符串

```
NSString *varyingString1 = @"hello";
NSString *varyingString2 = @"world";
NSString *str = [NSString stringWithFormat: @"%@ %@", varyingString1, varyingString2];
//str is now "hello world" 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-15T15:11:52.200

主题变奏曲：

```
NSString *varying = @"whatever it is";
NSString *final = [NSString stringWithFormat:@"first part %@ third part", varying]; 
```

* * *

```
NSString *varying = @"whatever it is";
NSString *final = [[@"first part" stringByAppendingString:varying] stringByAppendingString:@"second part"]; 
```

* * *

```
NSMutableString *final = [NSMutableString stringWithString:@"first part"];
[final appendFormat:@"%@ third part", varying]; 
```

* * *

```
NSMutableString *final = [NSMutableString stringWithString:@"first part"];
[final appendString:varying];
[final appendString:@"third part"]; 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-08-15T15:11:39.530

```
NSString * varyingString = ...;
NSString * cat = [NSString stringWithFormat:@"%s%@%@",
  "first part of string",
  varyingString,
  @"third part of string"]; 
```

或者干脆`-[NSString stringByAppendingString:]`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-08-15T15:11:11.853

你通常会`-stringWithFormat`在这里使用。

```
NSString *myString = [NSString stringWithFormat:@"%@%@%@", @"some text", stringVariable, @"some more text"]; 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-08-15T15:11:46.333

做就是了

```
NSString* newString=[NSString stringWithFormat:@"first part of string (%@) third part of string", @"foo"]; 
```

这给你

```
@"first part of string (foo) third part of string" 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2017-10-03T03:52:29.390

令我惊讶的是，没有一个最佳答案指出在最近的 Objective-C 版本下（在他们添加文字之后），您可以像这样连接：

```
@"first" @"second" 
```

这将导致：

```
@"firstsecond" 
```

您不能将它与 NSString 对象一起使用，只能与文字一起使用，但在某些情况下它可能很有用。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-08-15T16:08:56.703

简单的一个：

```
[[@"first" stringByAppendingString:@"second"] stringByAppendingString:@"third"]; 
```

如果您有许多要连接的字符串，则应该使用`NSMutableString`以获得更好的性能

# linux - xlib / egl 如何在 eglSwapBuffers 上获取 VSync/swapInterval

> ID：11971947
> 
> 赞同：1
> 
> 时间：2012-08-15T15:09:16.320
> 
> 标签：linux, xlib, egl

我想知道`eglSwapBuffers`在使用 xlib 时如何正确启用 vsync。似乎`eglSwapInterval`只是忽略了对的调用。

我在窗口和全屏模式下运行。窗口模式是否可能根本不支持它？在这种情况下，降低渲染频率的好方法是什么（睡眠往往会导致不稳定的行为，因为无法保证何时醒来）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T21:13:26.253

经过大量的谷歌搜索后，我终于找到了这个：

[http://lists.freedesktop.org/archives/mesa-commit/2010-May/021020.html](http://lists.freedesktop.org/archives/mesa-commit/2010-May/021020.html)

> egl：实现 EGL_NOK_swap_region
> 
> 此扩展添加了一个新功能，它提供了 eglSwapBuffers 的替代方案。eglSwapBuffersRegionNOK 除了 eglSwapBuffers 中的参数外，还接受两个新参数。新参数包括一个指向定义矩形（x、y、宽度、高度）的 4 整数块列表的指针和一个指定列表中矩形数量的整数。

并且 /usr/include/EGL/eglmesaext.h 声明

```
EGLAPI EGLBoolean EGLAPIENTRY eglSwapBuffersRegionNOK(EGLDisplay dpy, EGLSurface surface, EGLint numRects, const EGLint* rects); 
```

这里还有一些示例用法：

[https://github.com/blazt/piglit/blob/master/tests/egl/egl-nok-swap-region.c](https://github.com/blazt/piglit/blob/master/tests/egl/egl-nok-swap-region.c)

所以我尝试像这样使用它：

```
EGLint dirtyRect[4] = { 0, 0, 0, 0 };
PFNEGLSWAPBUFFERSREGIONNOK swap_buffers_region = (PFNEGLSWAPBUFFERSREGIONNOK)
    eglGetProcAddress("eglSwapBuffersRegionNOK"); 
```

在我的窗口调整大小回调

```
dirtyRect[2] = windowWidth;
dirtyRect[3] = windowHeight; 
```

在我的主循环中

```
if (swap_buffers_region)
    swap_buffers_region(egl_dpy, egl_surf, 1, dirtyRect);
else
    eglSwapBuffers(egl_dpy, egl_surf); 
```

它确实看起来更流畅并减慢了帧速率，但仅下降到 180-200 FPS 的范围；所以我仍然需要在帧之间做一个睡眠。也许它只在关键 GPU 操作的一些短时间间隔内阻止交换缓冲区？或者，也许我做得不对。没有把握。

# python - 如何在 Python 中执行 get/set 方法（特别是 Trac）

> ID：11971953
> 
> 赞同：0
> 
> 时间：2012-08-15T15:09:30.697
> 
> 标签：python, oop

在 C-ish 语言中，我会使用 getter/setter 方法/函数来掩盖数据存储细节，例如：

```
int getFoo();
void setFoo(int value); 
```

我有一些 Python 可以：

```
class MyClass:
    def Foo(self):
        ...magic to access foo...
        return value 
```

为 Foo 编写/命名设置器的正确方法是什么？我确信它比语言功能更成语，但我不确定什么是常见的。也许我需要重命名`Foo()`并`getFoo()`匹配它`setFoo()`。我想这没关系，如果这是通常所做的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:13:05.680

你可以使用一个[属性](http://docs.python.org/library/functions.html#property)。这是直接从文档中提取的：

```
class C(object):
    def __init__(self):
        self._x = None

    @property
    def x(self):
        """I'm the 'x' property."""
        return self._x

    @x.setter
    def x(self, value):
        self._x = value

    @x.deleter
    def x(self):
        del self._x 
```

现在你可以做...

```
c = C()
c.x = "a"
print c.x
>>> "a"
del c.x 
```

请记住，在 Python 3 之前的 Python 版本（例如，Python 2.7）中，您需要确保您的对象是新样式的类（它必须派生自`object`）才能支持这样的属性。当然，无论如何，您可能应该为所有课程使用新型课程...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:16:43.100

使用内置**属性**函数：

```
class MyClass:

    def __init__(self):
        self._value = 'Initialize self._value with some value or None'        

    def get_foo(self):
        ...magic to access foo...
        return self._value

    def set_foo(self, value):
        ... magic processing for value ...
        self._value = value

    foo = property(get_foo, set_foo) 
```

现在您可以像这样使用访问它：

```
inst = MyClass()
inst.foo = 'Some value'
print inst.foo 
```

它将打印：

> > > '一些价值'

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:12:49.043

通常，您不需要在 Python 中使用 getter 和 setter。

但是，如果您想将过程的结果公开为属性，则可以使用[`@property`装饰器](http://docs.python.org/library/functions.html#property)：

```
class MyClass:
    @property
    def foo(self):
        # operation
        return value

    @foo.setter
    def foo(self, value):
        # operation storing value 
```

仅将 的值存储`foo`在属性中更为常见。这可以在`__init__`实例初始化程序中计算：

```
class MyClass:
    def __init__(self):
        self.foo = someCalculationDeterminingFoo() 
```

# grails - 在 Grails 中使用 Quartz 插件

> ID：11971954
> 
> 赞同：1
> 
> 时间：2012-08-15T15:09:37.263
> 
> 标签：grails, quartz-scheduler

我是在 Grails 中使用 Quartz 插件的新手，想运行简单的应用程序。我使用了以下代码（表单石英插件文档），但它只运行一次。任何的想法？我应该设置什么吗？

谢谢

```
class MyJob {
    static triggers = { simple name: 'mySimpleTrigger', startDelay: 60000, repeatInterval: 1000 }
    def group = "MyGroup"

    def execute(){
    println "Running Job!"
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T21:06:42.573

我将“new Date()”添加到 println，它现在可以工作了！

```
class MyJob {
    static triggers = { simple name: 'mySimpleTrigger', startDelay: 60000, repeatInterval: 1000 , repeatCount:-1}
    def group = "MyGroup"

    def execute(){
    println "Running Job!"+new Date()
  }
} 
```

在我**看来**，石英进行了一些**优化**，当工作状态恒定时，它运行一次！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T20:20:32.237

如果要多次运行作业，请在简单触发器定义中指定 repeatCount：

> repeatCount — 触发器将触发作业执行 (1 + repeatCount) 次并在此之后停止（在此处指定 0 以进行一次性作业或 -1 以无限期地重复作业执行）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-30T15:21:29.247

您可以在触发器中定义一个**cron**以配置何时执行您的作业：

```
static triggers = {
    cron name: 'mySimpleCron', cronExpression: "0 30 15 * * ?"
} 
```

这将在每天 15:30:00 运行您的工作。

另一个例子：

1\. 每天从下午 2 点开始到下午 2:05 结束，每分钟开火一次：

```
cronExpression: "0 0-5 14 * * ?" 
```

2.每周一、二、三、四、五上午10:15开火：

```
cronExpression: "0 15 10 ? * MON-FRI" 
```

**7 项**表达式的语法为：

```
* * * * * * *
| | | | | | |_ Year [optional]
| | | | | |_ Day of Week, 1-7 or SUN-SAT, ?
| | | | |_ Month, 1-12 or JAN-DEC
| | | |_ Day of Month, 1-31, ?
| | |_ Hour [0-23]
| |_ Minute [0-59] 
|_ Second [0-59] 
```

以这种方式定义作业执行行为更容易，您只需更改表达式而不是整个代码即可配置更多选项。

这些链接中的更多信息：

**[CronTrigger 教程](http://www.quartz-scheduler.org/documentation/quartz-1.x/tutorials/crontrigger)**

**[Grails 的 Quartz 插件 - 参考文档](http://grails-plugins.github.io/grails-quartz/)**

# sql-server - 在基于或条件的 sql server 中查找 MaxDate 和 MinDate 需要帮助

> ID：11971956
> 
> 赞同：0
> 
> 时间：2012-08-15T15:09:39.330
> 
> 标签：sql-server

我有以下表格的表格

```
id  First service date  Last service date
1   6/19/2006           6/19/2006
1   7/3/2006            7/3/2006
1   7/19/2006           7/19/2006
1   9/10/2007           9/10/2007
1   9/25/2007           9/25/2007
2   4/3/2007            4/3/2007
2   7/9/2007            7/9/2007
2   10/1/2007           5/19/2008
2   1/15/2008           1/15/2008
2   2/13/2008           2/13/2008
2   3/7/2008            3/7/2008
3   5/9/2006            5/9/2006
3   5/15/2006           5/15/2006
3   6/22/2006           6/22/2006
3   10/3/2006           10/3/2006 
```

我需要找到每个 id 的最短服务日期和最长服务日期。施加的条件是，如果每次服务之间的间隔超过 90 天，那么最近的第一次服务日期将是最短服务日期。

所以我期待的结果是

```
ID  Minimum date of service     Max date of service
1   9/10/2007                   9/25/2007
2   7/9/2007                    5/19/2008
3   10/3/2006                   10/3/2006 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:29:56.537

I think this will give you what you want:

```
select t1.id, min(t2.firstdate), max(t2.lastdate)
from yourTable t1
inner join yourTable t2
    on t1.id = t2.id
    and datediff(day, t1.firstdate, t2.firstdate) > 90
group by t1.id 
```

See [SQL Fiddle with Demo](http://sqlfiddle.com/#!3/66b05/2)

# cmake - 构建cmake静态库

> ID：11971957
> 
> 赞同：2
> 
> 时间：2012-08-15T15:09:47.137
> 
> 标签：cmake

我有一个项目（静态库）说这种形式：

```
rootlib/
  CMakeLists.txt     (1)
  src1.c
  sublib1/
    CMakeLists.txt   (2)
    subsrc1.c
  sublib2/
    CMakeLists.txt   (3)
    subsrc2.c 
```

*   `CMakeLists.txt`我所做的一切`add_library(... sources)`
*   在（1）中，我也这样做`target_link_libraries(rootlib sublib1 sublib2)`

之后`make`，我有三个`*.a`文件无处合并在一起。我现在要做的就是（自动）创建一个静态库（即合并所有内容）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-15T16:30:34.433

您可以使用具有新功能的 Cmake 2.8.8 - 对象库：[http ://www.cmake.org/Wiki/CMake/Tutorials/Object_Library](http://www.cmake.org/Wiki/CMake/Tutorials/Object_Library)

或通过 add_custom_target 自己编写

# php - 使用 PHP 确定唯一用户（无 Cookie、IP 地址）

> ID：11971958
> 
> 赞同：3
> 
> 时间：2012-08-15T15:09:47.350
> 
> 标签：php, cookies, ip-address

这是一个非常广泛的问题；我只是在寻找最好的方法来做到这一点。

我希望能够区分**`unique user`**. 我需要能够跟踪用户何时访问特定页面。

以下是我和其他人遇到的问题：

*   使用 an`IP address`无效，因为一个上可能有许多计算机`IP address`
*   `COOKIES`如果用户在给定的时间段内清除他/她的 cookie，使用会遇到问题。
*   如果会话过期，使用`SESSIONS`会遇到问题。

我正在考虑将这三者结合起来，但我仍然很确定这不会捕获所有异常。我需要一个类似于*Youtube*跟踪其视频观看次数的系统。

有没有人对此有任何其他想法？（除了实现用户系统）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:22:32.770

如果不使用 cookie/要求用户登录以识别自己 - 确定他们是否“唯一”几乎是不可能的。有几种方法可以提供帮助，但都不能保证：

您可以使用[PHP 会话](http://php.net/manual/en/book.session.php)- 无需实际的“用户管理系统”。

```
session_start();
$id = session_id(); 
```

*   这样做的好处是，只要他们的会话保持活动状态，您就可以跟踪当前用户。

*   缺点是，如果“新用户”是会话已清除的老用户（很像用户已清除 cookie），您将无法确定“新用户”是否唯一。

另一种选择，但也与仅使用 IP 地址相同，是尝试使用来自[`$_SERVER`](http://php.net/manual/en/reserved.variables.server.php)环境信息的不同变量的最佳指纹识别算法：

```
$userFingerprint = $_SERVER['REMOTE_ADDR'] . ':' . $_SERVER['HTTP_USER_AGENT'] . ':' . $_SERVER['HTTP_ACCEPT']; // plus any others you might find helpful 
```

*   这样做的好处是，可能有足够的数据来区分同一网络上的用户。

*   明显的缺点是，可能没有足够的数据来区分同一网络上的用户。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:32:57.900

One other way may be to create a table in your database capturing the following data:

*   IP address
*   Operating system/ browser etc. (any other info that would be specific to that user)

Then, you could narrow it down and say, "A user at this particular IP address using this particular OS on this particular browser downloaded this image at this particular time."

Is that what you want to achieve?

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T15:24:27.637

我认为，没有任何绝对的方法可以做到这一点。用户可以更改 IP 地址、删除或更改 cookie 等，因为一切尽在掌握。

但是根据您正在计划的系统（民意调查，计数器），您可以开发一种确定唯一用户的方法。例如开发一个投票系统，你可以在数据库中插入ip、http_user_agent，也可以设置一些cookie来提高质量。

# javascript - 什么是处理 javascripts 的最简单的网络抓取工具

> ID：11971959
> 
> 赞同：6
> 
> 时间：2012-08-15T15:09:49.230
> 
> 标签：javascript, python

我想制作一个能够登录网站的网络抓取应用程序（我可以使用斜纹布（python）做到这一点），并且还能够执行触发对其他页面的访问的 JavaScript。

我肯定更喜欢在 python 中使用一些东西，但我已经准备好尝试新的东西了。我已经安装了 mechanize、watir、Hojocki 等，但不确定这是否真的有帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:46:49.660

我推荐[PhantomJS](http://phantomjs.org/)。

它是一个完整的 Webkit 浏览器，但无头且可编写脚本。

它非常适合这种事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:19:25.440

我相信有一些模块（例如[Ghost](http://jeanphix.me/Ghost.py/)），但我已经使用[Selenium](http://code.google.com/p/selenium/wiki/PythonBindings) /WebDriver 来完成这样的事情。它表面上是一个测试框架，但它为您提供了许多方法来允许您与页面进行交互，就像您以普通用户的身份加载它一样。您还可以运行它，以便浏览器实际打开并且您可以观看代码执行（使调试更容易），或者在代码执行的“无头”模式下（还有其他站点/SO 答案更好比我能给出的解释:)）。

话虽这么说，Ghost 看起来也很棒，所以尝试一下它们，希望其中一个能满足您的需求！

另外，请参阅[没有用于自动化的 GUI 的 Javascript（和 HTML 渲染）引擎？](https://stackoverflow.com/questions/2716230/javascript-and-html-rendering-engine-without-a-gui-for-automation)对于可能有一些额外答案的类似问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-09T08:55:33.337

我会推荐[Octoparse，一个](http://www.octoparse.com/)适用于 Windows 的免费网络爬虫。它不是可编程的，但它非常易于使用。但是没有Mac版本。所以... JavaScript可以由Octoparse btw处理。

# entity-framework - 对自引用表中的数据进行排序

> ID：11971960
> 
> 赞同：0
> 
> 时间：2012-08-15T15:09:49.587
> 
> 标签：entity-framework, entity-framework-4, ef-code-first

我有一张桌子，用来存放一些产品。

```
ProductA
ProductB
ProductC 
```

其中一个要求是一种产品可以属于另一种

```
ProductA
ProductD -> ProductA
ProductE -> ProductA
ProductB
ProductF -> ProductB
ProductC 
```

如您所见，属于另一个产品的产品必须位于它的正下方。所有数据必须属于一个列表（没有嵌套集合），因为我只需要在一个网格中显示数据。

如果我引入一个新的属性 ReferenceProductId，即指向另一个产品，那么我解决了“归属”的问题，但我无法找到如何对它们进行排序的方法。最简单的方法是，如果我可以说 ProductA 属于 ProductA，但如果我没记错的话，那是不可能的。此外，当我将一种产品分配给另一种产品时，我不能这样做：

```
product.ReferenceProductId = anotherProduct.Id 
```

我需要自己分配一个引用，因为我正在使用身份主键，所以新记录的 Id 将为 0。

```
product.ReferenceProduct = anotherProduct; 
```

你在这里有什么想法？我可以让它正确保存数据，但我不能让它以上述排序顺序加载它们。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:41:56.023

您可以创建一个自定义比较器来排序您的列表。这只是一个示例，但它使用了比较 Id 和参考 Id，这使我能够实现您在上面想要的结果，假设在没有产品参考时 referenceId 为空。如果 FK 没有通过调用更新，您可以更改代码`product.Reference.Id`，但为简单起见，我忽略了这一点。

我的产品类别：

```
 public class Product
    {
        public int Id { get; set; }
        public string Name { get; set; }
        public int? ReferenceId { get; set; }
    } 
```

比较器：

```
public class ProductComparer : IComparer<Product>
{
    public int Compare(Product product, Product other)
    {
        if (product.ReferenceId == null && other.ReferenceId == null)
            return product.Id.CompareTo(other.Id);

        if (product.ReferenceId == null && other.ReferenceId != null)
            return product.Id.CompareTo(other.ReferenceId);

        if (product.ReferenceId != null && other.ReferenceId == null)
            return ((int) product.ReferenceId).CompareTo(other.Id);

        if (product.ReferenceId == other.ReferenceId)
            return product.Id.CompareTo(other.Id);

        return ((int) product.ReferenceId).CompareTo((int) other.ReferenceId);
    }
} 
```

然后你会用这样的方式调用你的集合：

```
products.OrderBy(p => p, new ProductComparer()); 
```

# css - 带有css的IE8阴影

> ID：11971965
> 
> 赞同：0
> 
> 时间：2012-08-15T15:10:02.013
> 
> 标签：css

我想知道如何在 IE8 中的 div 的各个方面获得阴影。除此之外，我想要另一个除顶部以外的所有侧面都有阴影的 div。

我已经设法在右侧和底部得到阴影，但不是在所有 4 个边上。方向属性告诉我什么？我尝试了不同的方向，但没有成功..

`filter: progid:DXImageTransform.Microsoft.Shadow(Strength = 4, Direction = 135, Color = '#cccccc');`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:15:13.133

无法将 css 阴影与 ie 一起使用（仅 ie9）。但是你可以使用[shadowOn](http://shadowon.codeplex.com/)。这是一个很棒的基于图像的 jquery 插件，并且非常易于使用来为 html 元素添加阴影。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:15:48.590

[你可以用http://css3pie.com/](http://css3pie.com/)模拟你想要的

那个，或者只是在你的对象后面添加一个部分透明的 div 稍微大一点来充当假阴影

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:21:26.967

***[您可以在此处](http://tumblr.gesteves.com/post/475773360/css-glow-effects-with-box-shadow)***解决具有发光效果的 CSS 边框。您可以更改颜色和其他一些参数。

希望这可以帮助。

# ios - NSXMLParser 缓存

> ID：11971966
> 
> 赞同：0
> 
> 时间：2012-08-15T15:10:02.840
> 
> 标签：ios, caching

我正在开发一个使用 xml 解析的应用程序。一切都完美无缺，但是当我编辑 xml 文件时，不显示更改。我认为这可能是缓存问题，因为文件已正确加载到服务器上。我如何解决它？

```
-(IBAction)avviaParsing{

 NSString *urlstring=@"http://www.acicastelloonline.it/app_ios/show.xml";
    NSURL *xmlURL=[NSURL URLWithString:urlstring];  

    NSXMLParser *parser = [[ NSXMLParser alloc] initWithContentsOfURL:xmlURL];

    [parser setDelegate:self];

    [parser parse];

        [parser release];} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T15:14:17.500

here is three option, you should try this code before XMLParsing:

you select only one of the three.

## **clearing**

`[[NSURLCache sharedURLCache] removeAllCachedResponses];`

* * *

## **disable cache**

```
NSURLCache *cache = [[NSURLCache alloc] initWithMemoryCapacity:0 diskCapacity:0 diskPath:nil]; 
[NSURLCache setSharedURLCache:cache]; 
[sharedCache release]; 
```

* * *

## this is other solution.

```
NSURL *xmlURL=[NSURL URLWithString:URL];
NSURLRequest *request = [NSURLRequest requestWithURL:xmlURL cachePolicy:NSURLRequestReloadIgnoringLocalAndRemoteCacheData timeoutInterval:0.0f];
NSXMLParser *xmlParser =[[NSXMLParser alloc] initWithData:[NSURLConnection sendSynchronousRequest:request returningResponse:nil error:nil]; 
```

# google-app-engine - ndb 的缓存如何处理压缩属性？

> ID：11971971
> 
> 赞同：2
> 
> 时间：2012-08-15T15:10:20.517
> 
> 标签：google-app-engine, app-engine-ndb

我正在考虑在一些大属性上启用[压缩](https://developers.google.com/appengine/docs/python/ndb/properties#compressed)（设置）。`compressed = True``LocalStructuredProperty`

但是，这些是经常被读写的实体，所以我担心编码/解码这些属性所需的额外 CPU。

我想知道 ndb 的内置缓存系统是否会缓解这种情况？ndb 是否缓存这些属性的压缩或未压缩数据？我意识到每次写入都会发生压缩，但如果我至少可以在读取缓存实体时绕过解压缩，那可能是值得的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-15T20:28:14.243

NDB 使用惰性解压缩和压缩，如果您有一个缓存在*内存中*（在 Context 对象中）的实体，它只会在您第一次实际访问该属性时解压缩。此外，如果您在没有访问压缩属性的情况下读取实体并将其写回，则根本不会解压缩和压缩（无论缓存如何）。

但是，这些值是以压缩形式写入内存缓存的，因此如果您实际访问压缩属性，缓存不会对您有太大帮助。

我的建议：仅在数据太大而无法容纳的情况下才使用压缩（整个实体的限制约为 1MB），并且仅在压缩良好的数据类型（例如文本，但不是图像或其他媒体，因为这些格式已经有自己的媒体特定压缩）。日志行压缩得很好。英文文本或计算机源代码压缩得很好。

# java - C++ 客户端和 Java 服务器

> ID：11971972
> 
> 赞同：0
> 
> 时间：2012-08-15T15:10:26.447
> 
> 标签：java, c++, client

我做了一个 Java Socket 服务器和一个 C++ 客户端。但是，客户端连接到服务器，没有问题。但是当我写一些客户端-服务器时，服务器没有捕捉到消息。我做错了什么？

Java Server的一点点代码：

```
DataInputStream dis=new DataInputStream(usrSocket.getInputStream());
ByteArrayOutputStream out = new ByteArrayOutputStream();
int data;
while((data = dis.read())>=0) {
out.write(data);
}
byte[] bytes = out.toByteArray();
String decrypt = new String(bytes);
if(decrypt.equals("status")){
System.out.println("Status emitted.");
}
System.out.println("Received a message."); 
```

C++ 客户端编写：

```
QByteArray qba;
qba.append(text);
sock->write(qba.data());
qDebug() << "Send status"; 
```

我需要这方面的帮助，非常感谢。（那个变量“text”是一个QString）

* * *

## 编辑

Java 服务器：这只是所有代码的一部分，主线程等待连接（Socket sock = server.accept()）并为每个用户创建一个新线程。我发布的 Java 服务器代码，它是用户线程的一部分。如果您需要所有代码，请告诉我。

我将等待答案！非常感谢！对不起，如果我回答你晚了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T13:08:07.983

如果我没看错，那是因为您的客户端仍在运行。Read() 返回数字 >= 0，直到客户端套接字关闭。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:37:55.320

您的 Java 代码读取套接字直到 EOS，然后打印一些东西，顺便说一句，这不是解密操作。你的 C++ 客户端写了一些东西并且从不关闭套接字。所以服务器永远无法摆脱读取循环。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-15T15:55:46.373

当您使用 QTcpSocket 时，您很可能在默认异步模式下运行客户端。这意味着当您在调用 connectToHost 后写入时，不会发送任何内容，因为套接字*未连接*。

尝试使用：

```
socket->connectToHost(hostAddress, hostPort, QIODevice::ReadWrite);
if (socket->waitForConnected()) {
    QString text = "test string";
    QByteArray array;
    array.append(string);
    qDebug() << socket->write(array);
} else {
    // connect error!
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T15:21:26.657

试试这个**Java Server**的代码。

```
ServerSocket ss = new ServerSocket(Port_No);

Socket incomingClient = ss.accept();

InputStream i = incomingClient.getInputStream();

OutputStream o = incomingClient.getOutputStream();  // Use it write to the Client Socket

InputStreamReader isr = new InputStreamReader(i);

BufferedReader br = new BufferedReader(isr);

String str = new String();

while ((str = br.readLine())!=null){

     // do what you want with the data received in str.

 } 
```

# ruby-on-rails - Ruby 调试器：“内部错误！！！调试器：模块的未定义方法 `skip_next_exception'”（OSX 10.7 Lion）

> ID：11971977
> 
> 赞同：2
> 
> 时间：2012-08-15T15:10:53.790
> 
> 标签：ruby-on-rails, ruby, debugging, osx-lion, sinatra

使用[调试器](http://rubygems.org/gems/debugger)gem，尝试使用“跳过”命令时出现以下错误：

> 内部错误！！！Debugger:Module 的未定义方法“skip_next_exception”

*   红宝石版本：1.9.3-p194
*   RubyGems 版本：1.8.24
*   操作系统：OSX 10.7 狮子

这是调试器中的错误还是只是用户错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-10T22:33:38.203

我看不到你的代码。但我可以建议以下解决方案：

1.  确保将`debbugger`gem 添加到 Gemfile 或`require 'debbugger'`直接添加
2.  在 sinatra 应用程序中[添加gem 的助手。](http://www.sinatrarb.com/intro.html#Helpers)这是至关重要的。
3.  尝试在 Sinatra 之外使用 gem 功能来检查它是否有效

# html - z-index 是否只影响同一分组中的项目？

> ID：11971980
> 
> 赞同：2
> 
> 时间：2012-08-15T15:11:08.127
> 
> 标签：html, css

我试图在我的 html 中放置一些位于不同区域但具有高 z-index 的内容，因此它应该位于顶部。这是如何运作的？

我的例子是这样的：

```
<div>
   <div style="z-index: 7000"></div>
</div>
<div style = "z-index: 7050"></div> 
```

我在想 z-index 只与 DOM 树中的兄弟姐妹相关。

大家对此怎么看？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-15T15:27:16.663

这张图很好地总结了它。

![图片取自下面链接的文章](../Images/89bdd2d14d51043eb5642848dc308ed1.png)

[您可以在此处](https://developer.mozilla.org/en-US/docs/CSS/Understanding_z-index/The_stacking_context)找到一篇关于 z-index 属性如何在堆叠上下文中工作的好文章

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T15:18:34.033

是/否，如果父元素设置为相对位置，它只会影响同一组内的事物。从那时起，它里面的所有东西都将以此为基础。

但是，根据我根据您上面的 html 看到的内容。`z-index`没有任何价值，因为元素并没有从 DOM 流中分离出来。z-index 用于具有位置的元素：固定或绝对

例子：

```
<div style="z-index:100;"></div> 
```

什么也没做

```
<div>
<div style="z-index:100;"></div>
</div> 
```

什么也没做

```
<div style="position:relative;width:100px;height:100px;">
   <div style="z-index:100;position:absolute;top:0;left:0;background-color:#000;"></div>
   <div style="z-index:200;position:absolute;top:25px;left:25px;background-color:#CCC;"></div>
</div> 
```

做一些事情并将元素保留在父 div 中。

```
<div style="width:100px;height:100px;">
   <div style="z-index:100;position:absolute;top:0;left:0;background-color:#000;"></div>
   <div style="z-index:200;position:absolute;top:25px;left:25px;background-color:#CCC;"></div>
</div> 
```

做了一些事情，但带有 z-index 的 div 将使用浏览器作为确定将自己放置在哪里的媒介，而不是父元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-15T15:29:16.263

正如克里斯已经指出的那样，该`z-index`属性仅适用于定位元素很重要。[规范](http://www.w3.org/TR/css3-positioning/#z-index)说该`z-index`属性定义了同一**堆叠上下文**中元素的定位。并非每个元素都会生成新的堆叠上下文！因此，`z-index`不仅与 DOM 树中的兄弟姐妹相关，而且与同一堆叠上下文中的每个元素相关。[规范](http://www.w3.org/TR/css3-positioning/#z-index)说，具有属性`auto`而不是整数的元素*不会*生成新的堆叠上下文。`z-index`

# jquery - jquery 选择链接到标题而不是值

> ID：11971984
> 
> 赞同：0
> 
> 时间：2012-08-15T15:11:12.753
> 
> 标签：jquery, html, select

大家好，很抱歉再次问这个问题，但我有一些 jquery 可以更改一对中第二个选择的值，目前我正在使用以下代码，因为我尝试使用各种版本的 .hide .show 来完成这项工作，但我猜是因为我已经使用了一个变体，它会引起一些干扰，但这是我正在使用的代码

```
jQuery.fn.filterOn = function(selectFrom, values) {
    return this.each(function() {
        var select = this;
        var options = [];
        $(select).find('option').each(function() {
            $(this).attr("title");
        });
        $(select).data('options', options);
        console.log(selectFrom);
        $(selectFrom).change(function() {
            var options = $(select).empty().data('options');
            var haystack = values[$(this).val()];
            console.log(haystack);
            $.each(options, function(i) {
                var option = options[i];
                if($.inArray(option.value, haystack) !== -1) {
                    $(select).append(
                    $('<option>').text(option.text).val(option.value)
                    );
                }
            });
        });            
    });
};

$(function() {
    $('#city').filterOn('#country', {
        'default': [],
        'LK':['LK'],'SY':['SY'],'KE':['KE']

         });
}); 
```

那么这就是两个选择的样子记住第一个有 155 个值，第二个有超过 16000 个值；

```
<select id="country" name="country">
 <option value="">---------</option>
 <option value="LK">Sri Lanka</option>
 <option value="SY">Syria</option>
 <option value="KE">Kenya</option>.......
</select>

<select id="city" name="city">
 <option value="">---------</option>
 <option title="LK" value="1252211">Ahangama</option>
 <option title="LK" value="1252196">Ahungalla</option>
 <option title="LK" value="8100176">Ahungalle</option>
 <option title="LK" value="1251081">Anuradhapura</option>
 <option title="LK" value="1250308">Bandarawela</option>
 <option title="LK" value="1249978">Bentota</option>
 <option title="LK" value="8100177">Beruwela</option>
 <option title="LK" value="1248991">Colombo</option>
 <option title="LK" value="1248750">Dambulla</option>
 <option title="LK" value="8202608">Dickwella</option>
 <option title="LK" value="8208032">Embilipitiya</option>
 <option title="LK" value="1224688">Wadduwa</option>
 <option title="LK" value="1223738">Weligama</option>
 <option title="SY" value="170063">Aleppo</option>
 <option title="SY" value="8100417">Bloudan</option>......
</select> 
```

这一切都有效，但是因为它使用 push im 假设它重新排列第二个选择以将标题值作为值，所以它会说 lk 而不是它需要的数字。我尝试使用不同的 .hide .show 进行了几次尝试，但似乎都不起作用，这两个选择也位于使用 jquery hide show 的跨度内。不知道这是否会影响子元素上的隐藏显示，但我无法让它按应有的方式工作。我还查看了有关级联选择的其他一些讨论，但找不到任何解决我的问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:07:57.253

首先，我建议使用 ajax 或类似的东西来根据所选值获取数据。但是，如果您想知道您提供的代码有什么问题，有几件事：

```
 var options = [];
    $(select).find('option').each(function() {
        $(this).attr("title");
    });
    $(select).data('options', options); 
```

在这里，您定义了一个空数组，然后遍历所有选项，对它们中的任何一个都不做任何事情（`$(this).attr("title");`返回 title 属性的值，但您不做任何事情）。然后将 的`options`数据元素设置`select`为空数组。我认为您想要做的更像是：

```
 var options = [];
    $(select).find('option').each(function() {
        options.push(this);
    });
    $(select).data('options', options); 
```

这会将所有 16,000 个`option`元素存储在数据缓存中。我认为更好的选择可能是：

```
 var options = {};
    $(select).find('option').each(function() {
        var $o = $(this), title = $o.attr('title');
        if (options.hasOwnProperty(title) === false) {
            options[title] = [];
        }
        options[title].push({ 'text': $o.text(), 'value': $o.val() });
    });
    $(select).data('options', options); 
```

现在，在您的更改功能中，您可以执行以下操作：

```
 $(selectFrom).change(function() {
        var $select = $(select),
            options = $select.empty().data('options')[$(this).val()];
        // options is now just an array of objects with value and text properties, so:
        $.each(options, function () {
            $('<option value="' + this.value + '">' + this.text + '</option>').appendTo($select);
        });
    }); 
```

这样，您就不会将整个 DOM 元素存储在内存中，而只是将相关信息存储在内存中。希望有帮助。

# twitter-bootstrap - Twitter Bootstrap 24 列

> ID：11971986
> 
> 赞同：0
> 
> 时间：2012-08-15T15:11:26.720
> 
> 标签：twitter-bootstrap

> **可能重复：**
> [自定义 Twitter 引导网格不起作用](https://stackoverflow.com/questions/11854808/customizing-twitter-bootstrap-grid-does-not-work)

我正在尝试使用具有 24 列和流体网格系统的 Twitter Bootstrap 网格。

我通过设置 3 个网格变量在[http://twitter.github.com/bootstrap/download.html](http://twitter.github.com/bootstrap/download.html)自定义了我的 css ：

```
@gridColumns:24
@gridColumnWidth:30px
@gridGutterWidth:10px 
```

以及流体网格系统：

```
@fluidGridColumnWidth:3.2%
@fluidGridGutterWidth:1.06% 
```

通过这种方式，我仍然有一个 12 列的网格。

我尝试在较少的文件（variables.less）中手动编辑它并编译较少的文件以获取我的 bootstrap.css，但我无法获得 24 列。

诀窍是什么？

# javascript - Wing IDE 中咖啡脚本的语法高亮显示

> ID：11971995
> 
> 赞同：0
> 
> 时间：2012-08-15T15:11:42.850
> 
> 标签：javascript, coffeescript, lexer, wing-ide

有没有人知道在 Wing IDE 中为咖啡脚本文件高亮显示语法的方法？我已经将它设置为突出显示，就好像它是一个 javascript 文件一样，它工作正常，但是它缺少一些东西，特别是注释。有人为此编写了词法分析器。我将使用咖啡脚本很长一段时间，让突出显示正确工作会非常有帮助。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-15T17:09:37.067

Wing 4 中似乎没有对coffeescript 的语法高亮支持。它应该在 Wing 5 中，但我不知道什么时候出来。我也会看看我们是否可以在 Wing 4 中添加它，尽管由于所涉及的不同代码库的兼容性，它可能无法解决。

# maven - 如何通配符将多个文件附加到maven中的工件？

> ID：11971996
> 
> 赞同：4
> 
> 时间：2012-08-15T15:11:43.653
> 
> 标签：maven

在我的 maven 项目中，ant 插件生成多个 war 文件，我想将它们全部附加到同一个工件中。我尝试了这样的 build-helper-maven-plugin

```
<plugin>
 <groupId>org.codehaus.mojo</groupId>
 <artifactId>build-helper-maven-plugin</artifactId>
 <version>1.7</version>
 <executions>
 <execution>
 <id>attach-artifacts</id>
 <phase>package</phase>
 <goals>
  <goal>attach-artifact</goal>
 </goals>
 <configuration>
 <artifacts>
<artifact>
  <file>${project.build.directory}/*.war</file>
  <type>war</type>
</artifact>                 
</artifacts>
</configuration>
</execution>
</executions>
</plugin> 
```

我不想单独指定每个war文件，因为ant插件是动态的。有没有办法做到这一点？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T16:11:21.883

Build Helper 插件似乎不支持为单个工件提供通配符（顺便说一句，如果支持，它可能会使用[Resources Plugin](http://maven.apache.org/plugins/maven-resources-plugin/examples/include-exclude.html)使用的包含/排除配置）。

我了解到，如果您选择使用 Maven，最好将您的构建调整为“Maven 方式”。

在这种情况下，您应该修改您的构建以不使用 ant war 插件，而是为每个 war 文件使用一个单独的模块（子项目）的多模块构建。

[或者，在过去，我通过Maven Assembly 插件](http://www.sonatype.com/books/mvnref-book/reference/assemblies.html)完成了类似您所做的事情，其中​​所有战争都在一个 tar/gz 文件中一起提供。然后将存档（包含每个战争）附加到构建中。

请注意，您应该更喜欢让您的“网络应用程序”模块具有“pom”的工件类型。程序集插件会将档案附加到最终构建中。

有关更多信息，我发现 Sonatype 的在线书籍是一个很好的资源： http: [//www.sonatype.com/Support/Books](http://www.sonatype.com/Support/Books)

# google-chrome - Google Chrome 扩展程序上的安全存储

> ID：11971998
> 
> 赞同：5
> 
> 时间：2012-08-15T15:11:47.270
> 
> 标签：google-chrome, google-chrome-extension

在 Chrome 的关于存储在扩展程序中的[开发者页面上](http://developer.chrome.com/extensions/storage.html)，它明确表示存储区域未加密，因此不应将机密信息存储在那里。

Safari 提供了一个“ [SafariExtensionSecureSettings](http://developer.apple.com/library/safari/#documentation/UserExperience/Reference/SafariExtensionSecureSettings/SafariExtensionSecureSettings/SafariExtensionSecureSettings.html) ”类来安全地存储键/值对。谷歌浏览器中是否有等价物？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-18T03:52:52.060

目前 Google Chrome 中没有与 Safari 的“SafariExtensionSecureSettings”等效的功能。

这是另一个更普遍地概述了 localStorage 安全性的答案[https://stackoverflow.com/a/3719435/117068](https://stackoverflow.com/a/3719435/117068)