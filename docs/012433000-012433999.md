# StackOverflow 问答 12433000-12433999

# objective-c - 如何使用可可 API 检查 OSX 的滚动方向

> ID：12433018
> 
> 赞同：2
> 
> 时间：2012-09-14T22:57:19.290
> 
> 标签：objective-c, macos, cocoa

我无法确定当前是否将滚动设置为反向模式，我想显示该设置并将其用于滑块和其他东西。

我知道我可以检查一下 plist：

```
dict = open("/Library/Preferences/.GlobalPreferences.plist");
=> dict.objectForKey("com.apple.swipescrolldirection"); 
```

我在这里寻找任何 API。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-30T00:20:46.867

我刚才遇到了同样的问题，我是这样解决的：

**用 Catfish_Man 的建议编辑：**

```
NSString *scrollDirection = [[[NSUserDefaults standardUserDefaults] objectForKey:@"com.apple.swipescrolldirection"] boolValue]? @"Natural" : @"Normal"; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-30T00:25:44.780

我想你正在寻找 上的[**`isDirectionInvertedFromDevice`**](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Classes/NSEvent_Class/Reference/Reference.html#//apple_ref/occ/instm/NSEvent/isDirectionInvertedFromDevice)房产`NSEvent`。

# c# - 如何获取PhoneTextBox控件的文本值

> ID：12433022
> 
> 赞同：0
> 
> 时间：2012-09-14T22:57:57.447
> 
> 标签：c#, windows-phone-7, xaml, silverlight-toolkit

我要求用户输入他或她想要搜索的内容，然后我想将此值传递到将执行搜索并给出结果的另一个页面。我正在使用 WP Toolkit 中的 PhoneTextBox 控件。在 KeyUp 或 ActionIconTapped 事件中，我想获取在 PhonTextBox 中输入的值并将其传递到我的搜索页面，尽管我不知道如何输入文本值？

主页.xaml

```
<toolkit:PhoneTextBox x:Name="publicSearchTextBox" HorizontalAlignment="Stretch" Margin="-10,0,12,0"
                      Hint="search for topic or name"
                      ActionIcon="/Resources/Images/search.png" 
                      ActionIconTapped="publicSearchTextBox_ActionIconTapped"
                      KeyUp="publicSearchTextBox_KeyUp"/> 
```

MainPage.xaml.cs

```
..get publicSearchTextBox text value and pass this to the search page? 
```

出于某种原因，我无法`x:Name="publicSearchTextBox"`在我的 xaml 中设置后面的代码中引用 PhoneTextBox？这怎么可能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:36:56.007

也许你有一个错字，因为我为你上面的 XAML 做了一些处理程序，它对我来说很好。将以下代码复制粘贴到后面的代码中并尝试？

```
private void PrintTextboxValue()
{
    Debug.WriteLine("Value: {0}", publicSearchTextBox.Text);
}

private void publicSearchTextBox_ActionIconTapped(object sender, EventArgs e)
{
    PrintTextboxValue();
}

private void publicSearchTextBox_KeyUp(object sender, KeyEventArgs e)
{
    PrintTextboxValue();
} 
```

如果它不起作用，请使用更多信息更新您的问题，例如，您在哪里引用`PhoneTextBox`.

# python - 如果所有子级都停止并阻止其他子级生成，则终止/重新启动 python 脚本

> ID：12433029
> 
> 赞同：0
> 
> 时间：2012-09-14T22:58:40.473
> 
> 标签：python, linux, command-line

我有一个套接字服务器，它使用线程为每个连接的客户端打开一个线程。我还有另外两个持续运行的线程正在执行维护操作。

基本上有一个主线程加上两个持续运行的子线程，每个连接的客户端加上一个子线程。

我希望能够安全地终止或重新启动。

我希望能够以某种方式触发终止功能，指示所有子进程安全终止，然后父进程可以退出。

有任何想法吗？

请不要建议以客户端身份连接并发送会触发它的命令。已经想好了。

我正在寻找一种通过在控制台中执行某些东西来做到这一点的方法。

python 套接字服务器作为系统服务运行，并希望在 init 脚本中实现终止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:11:19.710

最好的方法是在你的主线程中设置一个信号处理程序。这可以使用`signal`模块来完成。请参阅：[http](http://docs.python.org/library/signal.html) ://docs.python.org/library/signal.html 。一个好方法是捕获 CTRL-C 信号 (SIGINT)。

请注意，信号处理程序也可以是类方法，因此您不必使用全局方法（我花了一段时间才发现）。

```
 def __init__(self):
     signal.signal(signal.SIGINT, self.just_kill_me)

 def just_kill_me(self, sig, frame):
     self.stopped = True
     for t in self.threads:
         t.join() 
```

不可能向线程发送等效的终止信号。相反，您应该设置一个标志，向孩子们发出停止信号。

您的子线程应该循环运行，定期检查父线程是否请求它们停止。

```
while not parent.stopped:
    do_some_maintenance_work 
```

# c# - 为 WP7 引用 Silverlight 工具包

> ID：12433035
> 
> 赞同：0
> 
> 时间：2012-09-14T22:59:32.767
> 
> 标签：c#, silverlight, windows-phone-7, toolkit

我正在为 Windows Phone 设备开发一个 7.1 应用程序。我下载了最新的 silverlight 工具包，版本 5。

但是，当我尝试添加对我的解决方案的引用时（在这种情况下为`System.Windows.Controls.DataVisualization.Toolkit`），我收到以下错误：

```
A reference to a higher version or incompatible assembly cannot be added to the project 
```

我的 XAML 标头如下：

```
<phone:PhoneApplicationPage x:Class="JOKR_Pivot.MainPage"
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
                            xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
                            xmlns:controls="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls"

                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                            xmlns:local="clr-namespace:JOKR_Pivot"
                            xmlns:tilteffect="clr-namespace:JOKR_Pivot"
                            local:TiltEffect.IsTiltEnabled="True" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:41:35.147

您下载了错误的工具包。

这就是你要找的东西：[Windows Phone Toolkit](http://silverlight.codeplex.com/releases/view/75888)

# database - 如何在heroku数据库中查找行数

> ID：12433036
> 
> 赞同：39
> 
> 时间：2012-09-14T22:59:42.500
> 
> 标签：database, postgresql, heroku

标题几乎总结了我的问题，但这里有更多细节：

我正在运行一个脚本来将行导入 heroku 数据库。我开始收到错误：

```
<class 'django.db.utils.DatabaseError'> current transaction is aborted, commands ignored until end of transaction block` 
```

该脚本在我的本地主机上运行顺利，所以我不是在那里寻找问题。我最近收到了来自 heroku 的电子邮件，说我“接近开发数据库的行数限制”

我假设我达到了行数限制，但我想在采取进一步行动之前确认这一点。

有谁知道我如何找到整个数据库的当前行数？（我知道我可以对每张桌子进行计数，但我希望有一种更清洁的方法）

* * *

## 回答 #1

> 赞同：79
> 
> 时间：2012-09-26T07:54:41.320

如果你有 heroku cli 工具，这将给你，除其他外，你的数据库中的行数

```
heroku pg:info -a your_app 
```

还给出了您的计划类型、数据库状态、当前连接数、postgres 版本、创建数据库的时间、计划中的行数、数据大小、表数以及您的数据库是否有任何 fork/按照激活的选项。

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2012-09-14T23:18:22.180

这将为您提供数据库中所有行的大致计数：

```
 SELECT sum(reltuples) from pg_class where relname IN (SELECT c.relname
 FROM pg_catalog.pg_class c
 LEFT JOIN pg_catalog.pg_namespace n ON n.oid = c.relnamespace
 WHERE c.relkind = 'r'
 AND n.nspname <> 'pg_catalog'
 AND n.nspname <> 'information_schema'
 AND n.nspname !~ '^pg_toast'
 AND pg_catalog.pg_table_is_visible(c.oid)); 
```

尽管错误消息表明您的数据库存在一些错误，但可能是违反约束而不是您的插入权限被撤销。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2018-03-20T12:27:23.857

Heroku 发布[了一个“pg-extras”工具带](https://blog.heroku.com/more_insight_into_your_database_with_pgextras)，它可以为您提供额外的信息，例如数据库的行数。

即使您有比 Hobby 更高的计划，您也可以通过执行以下操作获得行数：

```
heroku plugins:install heroku-pg-extras 
```

然后：

```
heroku pg:index_usage --app dashboard 
```

这将为您提供每个表的行数。

# drupal - drupal字段小部件不保存提交的数据

> ID：12433039
> 
> 赞同：6
> 
> 时间：2012-09-14T22:59:50.380
> 
> 标签：drupal, drupal-7, drupal-modules

我正在尝试创建一个自定义小部件，但是当我提交时，Drupal 似乎没有保存任何数据。当`hook_field_attach_submit()`用于显示我粘贴的数据时，它被列为空。

奇怪的是，如果我将其更改`#type`为单个文本字段而不是字段集，它将仅保存已输入的字符串的第一个字符。

这似乎是一个验证问题，但我不确定如何挂钩或调试问题。我可以从这里去哪里？

```
<?php
function guide_field_widget_info(){
  dpm("guide_field_widget_info");
  return array(
    'guide_text_textfield' => array(
      'label' => t('test Text field'), 
      'field types' => array('text'), 
      'settings' => array('size' => 60), 
      'behaviors' => array(
        'multiple values' => FIELD_BEHAVIOR_CUSTOM,
        'default value' => FIELD_BEHAVIOR_DEFAULT,
      ),
    )
  );
}

function guide_field_widget_form(&$form, &$form_state, $field, $instance, $langcode, $items, $delta, $element) {
  $field_name = $instance['field_name'];
  $required = $element['#required'];
  $item =& $items[$delta];

  $element += array(
        '#type' => 'fieldset',
    '#title' => t('helloooooooo'),
    );
    $required = $element['#required'];
    $item =& $items[$delta];

    $element['nametest'] = array(
        '#title' => t('Name'),
        '#type' => 'textfield',
        '#required' => $required,
        // use #default_value to prepopulate the element
        // with the current saved value
        '#default_value' => isset($item['nametest']) ? $item['nametest'] : '',
    );

    $element['checkme'] = array(
        '#title' => t('Check this box or dont'),
        '#type' => 'checkbox',
        '#default_value' => isset($item['checkme']) ? $item['checkme'] : '',
    );

//When changing the above code to have a single field, $value is no longer  null but will display the first character of the string. I've pasted the code I used to test beloe
/*
  $element+= array(
    '#title' => t('Name'),
    '#type' => 'textfield',
    '#default_value' => isset($item['nametest']) ? $item['nametest'] : '',
  );  
*/

  return $element;
}

//hooking this here is required given that after submit, the value is a multidimensional array, whereas the expected value of text is, well, text :-)

function  guide_field_attach_submit($entity_type, $entity, $form, &$form_state){
  dpm($form,"guide_field_attach_submit data"); //shows $form[field_test_field][und][0]    [value] as being null 
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-10T21:29:05.783

hook_field_is_empty 是强制性的，必须按如下方式实现：

```
 /**
  * Implements hook_field_is_empty().
  */

function MODULENAME_field_is_empty($item, $field) {
  if ($field['type'] == 'FIELDTYPE') {
    if (empty($item[$field['type']]['YourField']) ) {
      return (TRUE);
    }
  }
  return (FALSE);
} 
```

# mysql - mySQL 从另一个表更新一个表的所有字段

> ID：12433040
> 
> 赞同：2
> 
> 时间：2012-09-14T23:00:04.877
> 
> 标签：mysql

我有表 A 和表 B。它们都有相同的字段。如果表 B 有新数据，我想从表 B 对表 A 进行完整更新。这是完全替换。或将表 B 中的数据克隆到表 A

所以，我有如下的sql。

```
sql="update `table A` select * from `table B`" 
```

我执行了那个，但它没有给我正确的结果。

什么应该是正确的sql？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T23:19:51.337

如果要创建表 B 的副本，可以使用

```
CREATE TABLE A SELECT * FROM B 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:22:28.660

```
TRUNCATE `table A`;
INSERT INTO `table A` SELECT * FROM `table B`; 
```

# r - R - 列中的条目数，用“;”分隔

> ID：12433044
> 
> 赞同：-1
> 
> 时间：2012-09-14T23:00:26.417
> 
> 标签：r

我正在尝试计算一个特定列中的条目数。假设我们有一个数据集 /here 由一个矩阵表示，就像这样

```
c=array(c(0,1,3,5,2,3,45,5,"Erk1","akt;Erk1","akt","NaN"), dim=c(4,3)) 
```

现在我想绘制一个带有 Erk1 - 2 akt -2 数量的条形图，但我无法得到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:45:50.617

这将拆分包含的字符串`;`：

```
dat <- unlist(strsplit(c[, 3], split = ";"))

#[1] "Erk1" "akt"  "Erk1" "akt"  "NaN" 
```

该`table`函数可用于生成频率：

```
table(dat)

#dat
# akt Erk1 
#   2    2 
```

这将生成`barplot`：

```
barplot(table(dat)) 
```

# c++ - C++ 在类中包装 cin 和 cout - 重载 << 和 >> 运算符

> ID：12433055
> 
> 赞同：4
> 
> 时间：2012-09-14T23:01:15.950
> 
> 标签：c++, stream, operator-overloading, cout, cin

我正在尝试制作一个控制台类。我想将`cin`and包装`cout`在类中并重载`<<`and`>>`运算符。所以我可以这样使用这个类：

```
// Output
Console << "Call cout from Console" << endl;

// Input
string str;
Console >> str; // Call cin 
```

我最好的猜测是：

```
class Console {
//...
public:
    ostream& operator<< (ostream& os)
    {
        cout << os;
        return &cout;
    }
    //...
}; 
```

但我知道那是错误的，我怎么能重载运算符以将 Console 类用作`cin`and `cout`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T03:48:33.967

我有一个可以处理流操纵器的工作代码。[你可以在这个 Ideone 页面](http://ideone.com/Y60xz)中看到我的代码

这是代码：

```
#include <iostream>

typedef std::ostream& (*manip) (std::ostream&);

class console {

};

template <class T> console& operator<< (console& con, const T& x) { std::cout << x; return con; }
template <class T> console& operator>>(console& con,  T& x) { std::cin >>x; return con; }
console& operator<< (console& con, manip manipulator){ std::cout<<manipulator; return con;}

int main() {
    console c;
    int a,b;
    c>>a>>b;
    c << "hello world"<<std::endl<<std::hex<<(a+b)<<std::endl;
} 
```

感谢@MooingDuck 的讨论让我得到了一个可行的答案，感谢@111111 作为起点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T00:04:37.180

这不是您问题的直接答案，但也许我会为您指出一些替代方案。

请参阅我对其他问题的[回答。](https://stackoverflow.com/questions/12060581/getting-last-char-sent-to-stdcout/12061076#12061076)定义所有这些`<<`和`>>`操作符并不是很容易。但是，您可以覆盖控制台的 streambuf。使用 cin 和 cout 的组合流缓冲区，

`std::iostream`从您的控制台和您的 streambuf派生`std::streambuf`

```
class console_streambuf : public std::streambuf {
public:
    console_streambuf() {
        // no buffering, overflow on every char
        setp(0, 0);
    }
    virtual int_type overflow(int_type c) {
        std::cout << c;
        return c;
    }
    ...
};

class console : public std::iostream {
public:
    console() { rdbuf(&buf); }
private:
    console_streambuf buf; 
}; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T23:06:33.113

我不知道为什么要做这样的事情，但它不是您需要捕获的流，而是另一种类型。但如果这只是为了让 std::cout 和 std::cin 更方便，我不会打扰。

```
class console {

};

template<typename T>
console& operator<<(console con, const T& val) {
     std::cout << val;
     return con;
}

console c;
c << "hello world\n"; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T02:05:58.690

与上面的许多答案相反，使用模板的魔力做你想做的事情非常简单。

我建议使用字符串流，因为使用 ostream（cout 是 ostream）可能需要神秘的黑魔法（不是开玩笑）。

```
#include <string>
#include <iostream>
#include <sstream>

struct console {
  std::stringstream  data_;

  console() : data_() {  };

  // We make ourselves a template sink so we can "take" operator<<'s.
  //  The awesome advantage to using a template like this is that the
  //  compiler will allow us to "take" any data that can be converted
  //  to a stringstream, which will handle converting int's etc.
  //  for us!
  template<typename T>
  console& operator<<(const T& what) {
    data_ << what;
    return *this;  // We must return a reference if we want to
                   //  string together more than one thing, i.e.
                   //  b << " " << 4;
  }

  void flush() {
    std::cout << data_.str();
    data_.clear();
    std::cout.flush();
  }
};

int main()
{
  int a = 4;
  console b;
  console c;
  b.data_ << 2;
  c.data_ << 4;
  //b << std::cout;  // WHAT? it's possible but stupid, prints garbage

  // Because we made the template return a reference, this will
  //  allow us to chain things just like we do with cout.
  b << " HELLO WORLD! " << "yo!" << 4;

  b << a << " " << 4.2f;

  // Compiler chokes on this. It will try to convert "console"
  //  to a stringstream which it can't.
  //b << c;

  b.flush(); // Send out the output

  // Wait for key press
  char foo[500];
  gets(foo);
} 
```

输出：

```
2 HELLO WORLD! yo!44 4.2 
```

就像 cout 一样，当然除了有更多的控制权。如果您想要二进制 I/O，您可以使用 basic_ostream 和 basic_istreams，但除非您真的需要，否则我建议您不要使用它。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-14T23:10:14.453

Overloaded operator functions must be declared with the specific types you're going to call them with on the left and right. So you will need an `operator<< (int)`, `operator<< (double)`, `operator<< (const std::string &)`, etc.

If you're really just going to pass them on to cin and cout, you can save typing by using a template member function, like:

```
template <class T> Console& operator<< (const T& x) { cout << x; return *this; } 
```

[thanks to André for pointing out it should return Console& so you can string together calls like `Console << a << b;` ]

# java - 在一些 URL 上获取 FileNotFoundException。正在尝试下载

> ID：12433059
> 
> 赞同：1
> 
> 时间：2012-09-14T23:02:18.867
> 
> 标签：java, android, file, download, inputstream

我正在为 Android 设备开发一个下载所有内容的应用程序，并且由于某种原因抛出 FileNotFoundException 只是几个 URL 给我带来了问题。我打印出 URL 并将其复制到我的浏览器，它在那里工作正常，所以我不知道问题是什么。

例外：

```
W/System.err(14261): java.io.FileNotFoundException: 
http://feedproxy.google.com/~r/BillBurr/~5/pCkxUgHf5tY/MMPC_9-9-12.mp3 
```

代码（减去大多数异常处理）：

```
URL u = new URL(uri);

HttpURLConnection c = (HttpURLConnection) u.openConnection();
c.setRequestMethod("GET");
c.setDoOutput(true);
c.connect();
c.setReadTimeout(readTimeout);

int totalSize = c.getContentLength();
InputStream in = null;
try {
     in = c.getInputStream(); // Exception problem here 

     byte[] buffer = new byte[1024];
     int len1 = 0;
     ................ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T21:47:49.577

只需删除`c.setDoOutput(true);`. 哦！

干杯harism。

# android - 防止点击时默认的蓝色选择

> ID：12433062
> 
> 赞同：2
> 
> 时间：2012-09-14T23:03:13.437
> 
> 标签：android, html, css, cordova

作为一个普通的网站，当我将网站开发为一个原生的android应用程序时，在我在android中冲浪时点击后像普通网站一样点击的区域上有一个蓝色矩形选择。

我想知道是否有任何方法可以防止这种情况发生，因此应用程序将具有真正的原生 GUI。

谢谢！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T23:06:08.900

使用以下 CSS：

```
a {
   outline: 0;
} 
```

对于它的价值，那个边界是为了便于访问，所以如果这对你很重要，你可能希望考虑保留它。

# mysql - mysql：InnoDB：无法继续操作

> ID：12433063
> 
> 赞同：5
> 
> 时间：2012-09-14T23:03:25.423
> 
> 标签：mysql

我在windows 7环境下安装了mysql。当我尝试从命令行启动服务器时：mysqld --user=root

我收到以下消息：

```
120914 15:47:04 [Warning] Can't create test file C:\Program Files\MySQL\MySQL Server 5.5\data\SFO1502128830A.lower-test
120914 15:47:04 [Warning] Can't create test file C:\Program Files\MySQL\MySQL Server 5.5\data\SFO1502128830A.lower-test
120914 15:47:04 [Note] Plugin 'FEDERATED' is disabled.
120914 15:47:04 InnoDB: The InnoDB memory heap is disabled
120914 15:47:04 InnoDB: Mutexes and rw_locks use Windows interlocked functions
120914 15:47:04 InnoDB: Compressed tables use zlib 1.2.3
120914 15:47:04 InnoDB: Initializing buffer pool, size = 128.0M
120914 15:47:04 InnoDB: Completed initialization of buffer pool
120914 15:47:04  InnoDB: Operating system error number 5 in a file operation.
InnoDB: The error means mysqld does not have the access rights to
InnoDB: the directory. It may also be you have created a subdirectory
InnoDB: of the same name as a data file.
InnoDB: File name .\ibdata1
InnoDB: File operation call: 'create'.
InnoDB: Cannot continue operation. 
```

请指教，谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-12T20:57:33.183

试试这个：以管理员身份运行 Windows CMD Prompt 并执行你的 MySql 命令。

# database - Miva 从数据库中选择订单

> ID：12433064
> 
> 赞同：0
> 
> 时间：2012-09-14T23:04:01.397
> 
> 标签：database, select, ftp, miva

我有一个客户希望创建一个与 Miva 一起使用的批处理订单系统。

我想知道是否有人创建了一个导出当天创建的订单的系统。我们需要实现的系统必须创建一个 csv 文档并将该文件发送到一个 ftp 服务器。

如果有人有任何想法或示例，我将不胜感激，因为我还没有使用过 Miva 系统的那部分。

编辑：经过一番研究，我发现miva的系统将导出文件保存到服务器，可以通过ftp收集。我可以从我们的本地主机运行自动化和文件转换，但是

我需要找到一个模块或创建一个可以每天创建该导出的模块。有谁知道现有的模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:24:01.547

Miva 没有 cURL 的本机实现。

但它确实有一个“报告”区域，您可以在其中生成过去 24 小时内下达订单的 CSV 报告。

您可以自行决定如何将数据从导出到 FTP 服务器。

根据您的设置，您可以创建一个 cron 来为您执行此操作，并使用不同的语言将 Miva 生成的 CSV 文件通过 FTP 传输到正确的服务器（也就是说，如果它与运行 Miva 商店的不同）。

# visual-studio - Visual Studio 2005 命令窗口“自动完成”在错误的一侧打开

> ID：12433068
> 
> 赞同：1
> 
> 时间：2012-09-14T23:04:31.720
> 
> 标签：visual-studio, visual-studio-2005

![命令窗口问题](../Images/0ace82e8ac40696fac1344654e7d1af3.png)

大家好，我有一个奇怪的问题，我不知道如何解决。我继承了一位同事的计算机，在他的 Visual Studio 2005 的命令窗口中，当我使用“of”命令时，打开的自动完成窗口似乎向左而不是向右增长。这使得无法看到任何字符串的开头，因为我将命令窗口保留在屏幕的左侧。这在我的旧机器上从来没有发生过。他的所有上下文菜单也向左打开，但我在控制面板中修复了它，它对此没有任何作用。重新启动计算机没有帮助。有什么想法吗？

# mysql - MySQL-Join 查询：如何获取 JOIN 中的缺失值（见截图）

> ID：12433069
> 
> 赞同：1
> 
> 时间：2012-09-14T23:04:52.983
> 
> 标签：mysql, join

我对一个带有连接的数据库发起了一个 SQL 查询，并得到了我想要的带有 2 个缺失值的结果（针对 2 个数据库）。

问题是一些数据没有加入。

这是屏幕：http: [//imageshack.us/a/img805/7764/dbresult.jpg](http://imageshack.us/a/img805/7764/dbresult.jpg)

这是查询：

```
SELECT
    customer_licenses.regkey as regkey,
    sharktoolz_com.zmf3_users.display_name as clientname,
    products.name as productname,
    licensetypes.name as licensename,
    customer_licenses.regname as regname
FROM
    customer_licenses 
LEFT JOIN
    sharktoolz_com.zmf3_users
ON
    customer_licenses.customer_id = sharktoolz_com.zmf3_users.id
LEFT JOIN
    licensetypes
ON
    licensetypes.id = customer_licenses.id 
LEFT JOIN
    products
ON
    licensetypes.product_id = products.id 
```

如何将产品加入查询？该值存在但未显示在结果中？每条记录的产品 ID 都是相同的。

非常感谢！

# sql - 同一 INSERT 期间另一列中序列列的参考值

> ID：12433075
> 
> 赞同：12
> 
> 时间：2012-09-14T23:06:09.057
> 
> 标签：sql, postgresql, auto-increment, sql-insert

我有一个带有 SERIAL 主键的表，还有一个 ltree 列，我希望它的值是这些主键的串联。例如

```
id | path
----------
1    1
2    1.2
3    1.2.3
4    1.4
5    1.5 
```

我很好奇是否有办法在一个查询中进行这样的插入，例如

```
INSERT INTO foo (id, ltree) VALUES (DEFAULT, THIS.id::text) 
```

我可能在这里过分了，并试图在一个查询中完成我应该在两个查询中执行的操作（在事务中分组）。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-15T00:08:07.533

您可以使用 CTE 从序列中检索*一次值并**重复*使用它：

```
WITH cte AS (
   SELECT nextval('foo_id_seq') AS id
   )
INSERT INTO foo (id, ltree)
SELECT id, '1.' || id
FROM   cte; 
```

[带有数据修改命令](https://www.postgresql.org/docs/current/queries-with.html#QUERIES-WITH-MODIFYING)的CTE需要 Postgres 9.1 或更高版本。

如果您不确定序列的名称，请 [`pg_get_serial_sequence()`](https://www.postgresql.org/docs/current/functions-info.html#FUNCTIONS-INFO-CATALOG-TABLE)改用：

```
WITH i AS (
   SELECT nextval(pg_get_serial_sequence('foo', 'id')) AS id
   )
INSERT INTO foo (id, ltree)
SELECT id, '1.' || id
FROM   i; 
```

如果表名“foo”在数据库中的所有模式中可能不是唯一的，请对其进行模式限定。如果任何名称的拼写不标准，则必须双引号：

```
pg_get_serial_sequence('"My_odd_Schema".foo', 'id') 
```

* * *

快速测试表明[@Mark 的想法](https://stackoverflow.com/a/12433285/939860)也*可能*有效：[`lastval()`](https://www.postgresql.org/docs/current/functions-sequence.html#FUNCTIONS-SEQUENCE-TABLE)

 *```
INSERT INTO foo (ltree) VALUES ('1.' || lastval()); 
```

*   您可以忽略`id`查询，该`serial`列将自动分配。没什么区别。

*   行之间不应该有竞争条件。我[引用手册](https://www.postgresql.org/docs/current/functions-sequence.html)：

> `currval`
> 
> `nextval`返回当前会话中此序列最近获得的值。（如果`nextval`在此会话中从未为此序列调用过，则会报告错误。）**因为这将返回一个会话本地值，所以它给出了一个可预测的答案，无论`nextval`自当前会话以来其他会话是否已执行。**
> 
> 此功能需要`USAGE`或`SELECT`对序列具有特权。
> 
> `lastval`
> 
> `nextval`返回当前会话中最近返回的值。此函数**与 相同`currval`，不同**之处在于它不是将序列名称作为参数，而是引用`nextval`当前会话中最近应用的序列。`lastval`如果`nextval`当前会话中尚未调用，则调用是错误的。
> 
> 此功能需要`USAGE`或`SELECT`对最后使用的序列具有特权。

大胆强调我的。

**但是**，正如[@Bernard 评论](https://stackoverflow.com/questions/12433075/reference-value-of-serial-column-in-another-column-during-same-insert/12433285#comment76902318_12433446)的那样，它毕竟可能会失败：不能保证在调用填充第二列*之前*`nextval()`填充默认值（并在过程中调用）。所以坚持第一个解决方案并确保。 *`lastval()``ltree``nextval()`*

 ** * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-14T23:38:12.360

这在我的测试中有效：

```
INSERT INTO foo (id, ltree) VALUES (DEFAULT, (SELECT last_value from foo_id_seq)); 
```

如果两个 INSERT 同时发生，我认为那里存在竞争条件，因为这引用了最后一个序列值，而不是当前行。我个人更倾向于这样做（伪代码）：

```
my $id = SELECT nextval('foo_id_seq');
INSERT INTO foo (id, ltree) VALUES ($id, '$id'); 
```**

# pandas - 在 python 中从 yahoo Finance 自动下载历史股票价格

> ID：12433076
> 
> 赞同：48
> 
> 时间：2012-09-14T23:06:15.723
> 
> 标签：pandas, finance, yahoo-finance, google-finance, stockquotes

有没有办法从雅虎财经或谷歌财经（csv格式）自动下载股票的历史价格？最好在 Python 中。

* * *

## 回答 #1

> 赞同：106
> 
> 时间：2012-09-20T10:05:41.657

当你要在 Python 中处理这样的时间序列时，`pandas`是必不可少的。好消息是：它带有一个雅虎历史数据下载器：`pandas.io.data.DataReader`.

```
from pandas.io.data import DataReader
from datetime import datetime

ibm = DataReader('IBM',  'yahoo', datetime(2000, 1, 1), datetime(2012, 1, 1))
print(ibm['Adj Close']) 
```

[`pandas`这是文档中的一个示例。](http://pandas.pydata.org/pandas-docs/stable/io.html#yahoo-finance)

**pandas >= 0.19 的更新：**

该`pandas.io.data`模块已被删除`pandas>=0.19`。相反，您应该使用单独的[`pandas-datareader`包](https://github.com/pydata/pandas-datareader)。安装：

```
pip install pandas-datareader 
```

然后你可以在 Python 中做到这一点：

```
import pandas_datareader as pdr
from datetime import datetime

ibm = pdr.get_data_yahoo(symbols='IBM', start=datetime(2000, 1, 1), end=datetime(2012, 1, 1))
print(ibm['Adj Close']) 
```

[还支持从 Google 财经下载。](http://pandas-datareader.readthedocs.io/en/latest/remote_data.html#google-finance)

[的文档中还有更多内容`pandas-datareader`。](http://pandas-datareader.readthedocs.io)

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-09-14T23:29:54.900

简短的回答：是的。使用 Python 的[urllib](http://docs.python.org/library/urllib.html)拉取您想要的股票的历史数据页面。与雅虎一起去！金融; 谷歌既不太可靠，数据覆盖范围也较小，而且一旦拥有它，对如何使用它的限制就更加严格。另外，我相信谷歌明确禁止你在他们的服务条款中抓取数据。

更长的答案：这是我用来提取特定公司所有历史数据的脚本。它提取特定股票代码的历史数据页面，然后将其保存到由该代码命名的 csv 文件中。您必须提供自己想要提取的股票代码列表。

```
import urllib

base_url = "http://ichart.finance.yahoo.com/table.csv?s="
def make_url(ticker_symbol):
    return base_url + ticker_symbol

output_path = "C:/path/to/output/directory"
def make_filename(ticker_symbol, directory="S&P"):
    return output_path + "/" + directory + "/" + ticker_symbol + ".csv"

def pull_historical_data(ticker_symbol, directory="S&P"):
    try:
        urllib.urlretrieve(make_url(ticker_symbol), make_filename(ticker_symbol, directory))
    except urllib.ContentTooShortError as e:
        outfile = open(make_filename(ticker_symbol, directory), "w")
        outfile.write(e.content)
        outfile.close() 
```

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2016-06-14T08:30:56.797

用实际演示扩展[@Def_Os 的答案......](https://stackoverflow.com/a/12510334/5741205)

正如@Def_Os 已经说过的那样——使用[Pandas Datareader](https://pandas-datareader.readthedocs.io/en/latest/)使这项任务变得非常有趣

```
In [12]: from pandas_datareader import data 
```

提取所有可用的历史数据以`AAPL`从`1980-01-01`

```
#In [13]: aapl = data.DataReader('AAPL', 'yahoo', '1980-01-01')

# yahoo api is inconsistent for getting historical data, please use google instead.
In [13]: aapl = data.DataReader('AAPL', 'google', '1980-01-01') 
```

前 5 行

```
In [14]: aapl.head()
Out[14]:
                 Open       High     Low   Close     Volume  Adj Close
Date
1980-12-12  28.750000  28.875000  28.750  28.750  117258400   0.431358
1980-12-15  27.375001  27.375001  27.250  27.250   43971200   0.408852
1980-12-16  25.375000  25.375000  25.250  25.250   26432000   0.378845
1980-12-17  25.875000  25.999999  25.875  25.875   21610400   0.388222
1980-12-18  26.625000  26.750000  26.625  26.625   18362400   0.399475 
```

最后 5 行

```
In [15]: aapl.tail()
Out[15]:
                 Open       High        Low      Close    Volume  Adj Close
Date
2016-06-07  99.250000  99.870003  98.959999  99.029999  22366400  99.029999
2016-06-08  99.019997  99.559998  98.680000  98.940002  20812700  98.940002
2016-06-09  98.500000  99.989998  98.459999  99.650002  26419600  99.650002
2016-06-10  98.529999  99.349998  98.480003  98.830002  31462100  98.830002
2016-06-13  98.690002  99.120003  97.099998  97.339996  37612900  97.339996 
```

将所有数据保存为 CSV 文件

```
In [16]: aapl.to_csv('d:/temp/aapl_data.csv') 
```

d:/temp/aapl_data.csv - 5 第一行

```
Date,Open,High,Low,Close,Volume,Adj Close
1980-12-12,28.75,28.875,28.75,28.75,117258400,0.431358
1980-12-15,27.375001,27.375001,27.25,27.25,43971200,0.408852
1980-12-16,25.375,25.375,25.25,25.25,26432000,0.378845
1980-12-17,25.875,25.999999,25.875,25.875,21610400,0.38822199999999996
1980-12-18,26.625,26.75,26.625,26.625,18362400,0.399475
... 
```

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2016-07-26T15:53:53.963

Python 中已经有一个名为 yahoo_finance 的库，因此您需要先使用以下命令行下载该库：

```
sudo pip install yahoo_finance 
```

然后，一旦您安装了 yahoo_finance 库，下面的示例代码将从 Yahoo Finance 下载您需要的数据：

```
#!/usr/bin/python
import yahoo_finance
import pandas as pd

symbol = yahoo_finance.Share("GOOG")
google_data = symbol.get_historical("1999-01-01", "2016-06-30")
google_df = pd.DataFrame(google_data)

# Output data into CSV
google_df.to_csv("/home/username/google_stock_data.csv") 
```

这应该这样做。让我知道它是否有效。

更新：不再支持 yahoo_finance 库。

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2019-04-13T02:26:50.883

您可以查看 yahoo_fin 包。它最初是在 Yahoo Finance 更改其 API 后创建的（文档在此处：[http](http://theautomatic.net/yahoo_fin-documentation) ://theautomatic.net/yahoo_fin-documentation ）。

```
from yahoo_fin import stock_info as si

aapl_data = si.get_data("aapl")

nflx_data = si.get_data("nflx")

aapl_data.head()

nflx_data.head()

aapl_data.to_csv("aapl_data.csv")

nflx_data.to_csv("nflx_data.csv") 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-10-15T14:22:11.543

当您知道如何操作时，这很简单：

```
import yfinance as yf
df = yf.download('CVS', '2015-01-01')
df.to_csv('cvs-health-corp.csv') 
```

如果你想绘制它：

```
import finplot as fplt
fplt.candlestick_ochl(df[['Open','Close','High','Low']])
fplt.show() 
```

[![在此处输入图像描述](../Images/841cdbbdfb48324e184cf6d36efb128a.png)](https://i.stack.imgur.com/f2FZY.png)

# python - 在视频上传期间保持持久连接

> ID：12433079
> 
> 赞同：1
> 
> 时间：2012-09-14T23:06:41.263
> 
> 标签：python, youtube, amazon-s3

我有一个从浏览器直接上传到 S3 的 Flash 视频上传。有用。

但是，如果连接中断，它会在大约三秒后超时。另一方面，如果您将视频上传到 YouTube，即使您断开互联网连接，它也会挂起，然后在互联网连接再次正常工作时重新开始。为了测试这一点，我上传了一个视频，停止连接五分钟（定时），然后再次开始我的互联网连接。大约三十秒后，视频继续上传。这一点尤其重要，因为上传的视频非常大（1GB+），上传可能需要几个小时。

YouTube 是如何做到这一点的？我需要在自己的上传器中进行哪些更改或检查才能使其像 YouTube 那样工作？谢谢你。

# javascript - Javascript计时器从输入值读取间隔

> ID：12433080
> 
> 赞同：2
> 
> 时间：2012-09-14T23:06:53.877
> 
> 标签：javascript, jquery

我有一个文本类型的输入，我在其中添加了一个值。

```
<input type="text" name="mydat" id="mydat" value="60000" /> 
```

我有一个每分钟运行的计时器。

```
<script>

window.setInterval(function(){

 //do something here

}, 60000);

</script> 
```

在上面的代码中，间隔值是硬编码的。

我该怎么做：

60000 = #mydat 值

那么，每次循环时，它都会从 #mydat 读取值？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T23:11:14.560

`setTimeout`改为递归使用。

```
var startTimer = function() {
    console.log("do something here");
    window.setTimeout(startTimer, parseInt($("#mydat").val(), 10));
});

startTimer(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-14T23:10:21.353

“每次循环”意味着该值可能会更改-因此`setInterval`不正确，您需要`setTimeout`重复使用...

```
function DoSomething() {
    //Do Stuff
    setTimeout(DoSomething, document.getElementById('mydat').value);
} 
```

如果文本框的内容发生变化（在下一个事件触发后），应该做你需要的并更新超时

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T23:12:29.303

您可以使用 value 属性检索输入的值。

```
var interval = document.getElementById('mydat').value;

window.setInterval(function() {
    // Some code...
}, interval); 
```

或使用 jQuery

```
var $interval = $('#mydat').val();

window.setInterval(function() {
    // Some code...
}, $interval); 
```

# ruby-on-rails - Rails：哈希的未定义方法“名称”

> ID：12433086
> 
> 赞同：0
> 
> 时间：2012-09-14T23:07:40.697
> 
> 标签：ruby-on-rails, ruby, koala

**更新：**部分问题可能已通过访问数据解决，例如

```
first_name = graphdata[:first_name] 
```

而不是喜欢

```
first_name = userdata.first name 
```

但是当我去保存它时，我现在收到了这个错误

```
 undefined method `save!' for #<Class:0x00000102dbe068> 
```

**原来的问题**

我确信这段代码可能存在多个问题。

我正在玩一个 Rails 应用程序的克隆[https://github.com/banane/sample-koala-rails-app](https://github.com/banane/sample-koala-rails-app)，它使用 Koala 向 Facebook 进行身份验证并获取用户数据。它使用`callback`下面 home_controller.rb 中的方法来执行此操作。

我正在尝试将身份验证令牌和用户数据保存到我创建的用户模型中。

在下面的回调方法中，我插入了这段代码

```
 user = User.oath(session[:access_token], @user_info)   ### my code/ likely wrong
     session[:user_id] = user.id                            ### my code/ likely wrong 
```

尝试使用我在用户模型上创建的“誓言”类方法将数据保存到用户模型（见下文）。注意，我什至不确定我是否可以将该实例变量 @user_info 传递给方法......

当我测试它时，我得到的错误是

```
undefined method `name' for #<Hash:0x00000103457d70> 
```

痕迹说

```
app/models/user.rb:8:in `oath'
  app/controllers/home_controller.rb:30:in `callback' 
```

**这是代码**

用户.rb

```
def self.oath(access_token, userdata)      #my code/ likely wrong

    name = userdata.name
    first_name = userdata.first_name
    last_name = userdata.last_name
    username = userdata.username
    gender = userdata.gender
    email = userdata.email
    access_token = access_token
    save!
  end 
```

Home_controller.rb（在回调方法结束时我尝试保存用户数据）

```
def callback
    if params[:code]
        # acknowledge code and get access token from FB
          session[:access_token] = session[:oauth].get_access_token(params[:code])
        end     

         # auth established, now do a graph call:

        @api = Koala::Facebook::API.new(session[:access_token])
        begin
            @user_info = @api.get_object("me")
            @graph_data = @api.get_object("/me/statuses", "fields"=>"message")
        rescue Exception=>ex
            puts ex.message
        end

        user = User.oath(session[:access_token], @user_info)  #my code/likely wrong
        session[:user_id] = user.id

        respond_to do |format|
         format.html {   }           
        end

    end 
```

@user_info 包含所有这些数据

```
{"id"=>"8331884858", "name"=>"Michael MYLASTNAME", "first_name"=>"Michael", "last_name"=>"MYLASTNAMe", "link"=>"http://www.facebook.com/myusername", "username"=>"myusername", "gender"=>"male", "email"=>"myemail", "timezone"=>5, "locale"=>"en_US", "verified"=>true, "updated_time"=>"2012-07-29T06:52:12+0000"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:14:26.937

听起来您可能只是错误地访问了哈希，试试这个：

```
 def self.oath(access_token, userdata)
    create! userdata.merge({:access_token => access_token})
  end 
```

# asp.net-mvc-3 - MVC3中模型的自定义验证

> ID：12433089
> 
> 赞同：0
> 
> 时间：2012-09-14T23:08:07.073
> 
> 标签：asp.net-mvc-3

我正在尝试验证覆盖 ValidationAttribute 的视图模型。

1.  验证工作正常但是当我尝试使用下面显示它时

    @Html.ValidationSummary("ViewModel")

    **输出：** ViewModel ******自定义错误消息*******

    如何从中删除“ViewModel”。

2.  “ValidationAttribute”类的“IsValid”方法被调用两次

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:44:19.340

尝试

```
@Html.ValidationSummary(true); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T07:48:52.463

首先，您如何编写自定义模型验证错误消息？

如果是属性相关的，应该这样添加：

```
ModelState.AddModelError("PropertyName", "Custom Error message"); 
```

然后，在您的视图中，您可以通过以下方式显示消息：

```
@Html.ValidationMessageFor(m=>m.PropertyName) 
```

# c++ - c++ ptlib PNotifier use in OPAL

> ID：12433090
> 
> 赞同：1
> 
> 时间：2012-09-14T23:08:08.337
> 
> 标签：c++, api, voip, opalvoip

I'm using OpalVoip for making a softphone application and i got stuck with following:

```
void MyManager::main()
{
    //variables
    PNotifier notify; // this is the problem
    //it is the template PNotifierFunctionTemplate<INT>

    //more stuff 

    listener->Open(notify); 

    //listener is of type OpalListenerUDP
    //it should start the listener and wait for incoming connection
    //but however i need to pass this NOTIFY which should be the INT parameter to the
    //new OpalTransport instance created by the listener...
    //however OpalListenerUDP only creates OpalTransport after the connection is
    //accepted as so in following: OpalListenerUDP::Accept(/*time interval*/)
    //
    //So far I think that this notifier should be a pointer to an object of type
    //OpalListenerUDP but i have no idea how to get it done 
} 
```

Any help will be appreciated, Red.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T09:52:54.523

在对蛋白石源代码进行深入研究后，我找到了解决方案。事实证明

```
OpalConnection::StartListener(OpalListener&); 
```

将完成打开侦听器的工作，因此无需调用 OpalListener::Open() ，因此只需调用 OpalListener::Accept 即可接受连接。

# android - Android Emulator fails to start any AVD (Win Vista)

> ID：12433091
> 
> 赞同：1
> 
> 时间：2012-09-14T23:08:19.930
> 
> 标签：android, windows, android-emulator, windows-vista

Android emululator fails to start with the following message:

> Failed to create Context 0x3005
> emulator: WARNING: Could not initialize OpenglES emulation, using software renderer.
> Warning: No DNS servers found

I have installed the latest Android SDK, installed all tools and extras and several Android versions in the SDK Manager, and created several AVDs with various settings in the AVD Manager, but no matter which AVD I try to start, it fails with the above message.

I have also installed Eclipse ADT, and running projects on an actual Android device connected with USB works fine.

**OS:** Windows Vista Ultimate, Service Pack 2 (32 bit)

I *have* googled it, and found a lot of similar questions, but none which helped me solve the problem. I have read through the documentation at developer.android.com as well, but I could not find any solution there either.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T14:00:01.410

我设法自己解决了。

我所要做的就是右键单击**AVD Manager.exe**并选择*Run as administrator*。

# vbscript - 2-dimesional array from two 1-dimensional arrays

> ID：12433093
> 
> 赞同：0
> 
> 时间：2012-09-14T23:08:24.783
> 
> 标签：vbscript

For example:

```
a1 = Split("item1 item2 item3")
a2 = Split("value1 value2 value3") 
```

Now I want to create 2-dimensional array named `a` (2x3 or in vbscript syntax `array(1,2)`)

Is there a way to create this 2-dimensional array without traversing former mentioned arrays element by element?

As a matter of fact I don't even want to create 1-dimensional arrays, but I want to use Split() function and immediately assign each split in adequate 2-dimensional array row, but I can't find any reference how it could be possible. All examples I see are assigning each element separately, like:

```
Dim a(1,2)
a(0)(0) = "item1"
a(0)(1) = "item2"
... 
```

while I would like something like:

```
Dim a(1,2)
a(0) = Split("item1 item2 item3")
a(1) = Split("value1 value2 value3") 
```

or anything similar without assigning every element separately.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:22:30.340

我在[这里](http://camie.dyndns.org/technical/vbscript-arrays/)找到了。这很容易：

```
a = Array(Split("item1 item2 item3"), Split("value1 value2 value3")) 
```

# ruby - In Jekyll, site.posts returns nothing

> ID：12433095
> 
> 赞同：2
> 
> 时间：2012-09-14T23:08:54.627
> 
> 标签：ruby, yaml, jekyll, liquid

I blog with Jekyll. In my `source/index.html` (I reconfigured the paths in `_config.yml`) I have written:

```
{{ site.posts }} 
```

But when I compile it it gives no results. I am sure that I have posts, they are compiled and work as supposed.

I don't know where to start troubleshooting, have anyone else had such problem?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-21T21:52:00.247

site.post 返回液化 Jekyll::Post 对象的数组。您可以通过简单地编写来检查帖子的数量：

```
{{ site.posts.size }} 
```

你可以遍历他们写作：

```
<ul>
{% for post in site.posts %}
  <li class="post">
    <h1><a href="{{ post.url }}">{{ post.title }}</a></h1>
  </li>
{% endfor %}
</ul> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T02:00:45.857

在 Jekyll 中，帖子需要位于`_posts`要包含在`{{ site.posts }}`变量中的文件夹中。

您很有可能只是省略了文件夹名称中的下划线。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-15T18:30:35.147

验证发布时间，它发生在过去，未来的帖子不会添加到`site.posts`.

# c# - sort list-of-lists using linq and custom sorting rules

> ID：12433098
> 
> 赞同：0
> 
> 时间：2012-09-14T23:09:42.553
> 
> 标签：c#, linq, algorithm, sql-order-by

I have a list of lists, with each inner list being a list of integers like this (code is simplified for clarity):

```
var listOfLists = new List<List<int>>
{
     new List<int> {6, 0, 2, 5, 6},      // #3 in sort order
     new List<int> {6, 0, 2, 2, 5, 6},   // #2 in sort order
     new List<int> {0, -1, 0, 0, 7},     // #1 in sort order
     new List<int> {11, 3, 5, 5, 12},    // #4 in sort order
}; 
```

I want to sort these lists using LINQ-to-Objects according to the following rules:

1.  If either list is empty, the non-empty list sorts first
2.  The list with the lowest minimum number is sorted first
3.  If there's a tie, the largest number of duplicates of the minimum is sorted first. Example: `{2,2}` sorts before `{2}`.
4.  If there's still a tie, remove the minimums from both lists and goto Step #1

Background:

Each list represents locations which each have 1+ retail stores. Each retail store is assigned an "urgency" number defining how badly that location needs to be restocked. The "worst" is -1, which usually means a customer has complained about empty products. 0 usually means the store has run out of high-selling products. 1 is usually a store that's almost empty. And so on. In practice the urgengy calculation is complex and based on multiple criteria validated by data-mining, but how we get the numbers isn't important for the sorting.

I want to find the most urgent locations, which I'm defining as the location with the most urgent store, with the number of stores at that level of urgency used as a tie-breaker.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:09:42.553

I divided the problem into two:

First, I dealt with the tiebreaking by duplicates part of the problem by subtracting a small floating-point number (e.g. .0000001) for every duplicate, e.g.:

```
from m in list
group m by m.Urgency into g
orderby g.Key
select g.Key - (g.Count()-1) *.0000001 
```

This left me with a much simpler problem: simply comparing two sequences item-by-item.

For this task I adapted Jon Skeet's answer to [Is there a built-in way to compare IEnumerable (by their elements)?](https://stackoverflow.com/a/2811805/126352). I had to change his comparer to fix a code bug and because my sorting rules treated longer sequences as sorted before shorter sequences, but otherwise I copied the code verbatim.

Here's the resulting solution, somewhat simplified for posting here:

```
var urgentLocations = 
               (   from m in Stores
                   group m by m.Location into g
                   where g.Min(m => m.Urgency) < 14
                   select new {Name = g.Key, Stores = g.OrderBy(m=>m.Urgency).ToList()})
               .OrderBy (g=>g.Stores, new LocationComparer())
               .ToList();

public class LocationComparer : IComparer<List<Machine>>
{

    public int Compare(List<Store> source1, List<Store> source2)
    {
        var reduced1 = from m in source1
                        group m by m.Urgency into g
                        orderby g.Key
                        select g.Key - (g.Count() - 1) * .0000001;
        var reduced2 = from m in source2
                        group m by m.Urgency into g
                        orderby g.Key
                        select g.Key - (g.Count() - 1) * .0000001;
        return SequenceCompare(reduced1, reduced2);
    }

    // adapted from https://stackoverflow.com/a/2811805/126352 but modified so that 
    // shorter sequences are sorted last
    public int SequenceCompare<T>(IEnumerable<T> source1, IEnumerable<T> source2)
    {
        // You could add an overload with this as a parameter 
        IComparer<T> elementComparer = Comparer<T>.Default;
        using (IEnumerator<T> iterator1 = source1.GetEnumerator())
        using (IEnumerator<T> iterator2 = source2.GetEnumerator())
        {
            while (true)
            {
                bool next1 = iterator1.MoveNext();
                bool next2 = iterator2.MoveNext();
                if (!next1 && !next2) // Both sequences finished 
                {
                    return 0;
                }
                if (!next1) // Only the first sequence has finished
                {
                    return 1;
                }
                if (!next2) // Only the second sequence has finished 
                {
                    return -1;
                }
                // Both are still going, compare current elements 
                int comparison = elementComparer.Compare(iterator1.Current,
                                                 iterator2.Current);
                // If elements are non-equal, we're done 
                if (comparison != 0)
                {
                    return comparison;
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T01:24:36.177

这也适用于`Compare`，对吧？

```
public int Compare(List<Store> source1, List<Store> source2)
{        
    var reduced1 = source1.Select(s => s.Urgency).OrderBy(u => u);
    var reduced2 = source2.Select(s => s.Urgency).OrderBy(u => u);
    return SequenceCompare(reduced1, reduced2);
} 
```

# asp.net-mvc - WCF as a model for MVC application

> ID：12433102
> 
> 赞同：2
> 
> 时间：2012-09-14T23:10:26.113
> 
> 标签：asp.net-mvc, wcf, model

I am about to start a proof-of-concept project using MVC 4\. Unlike Entity Framework, I want to use my own WCF service as a model for this application (as this service handles database access and query formation etc. internally). I understand that "using WCF service as a model" is logical term, what I am looking for is some industry standard best practices to do this. Should I create 'gateway' classes in the model container that actually talks to the service proxy? And handle massaging of data prior to using these gateways in the controller? Any pointer will be appreciated.

# apache - 如何为带有斜杠、无斜杠或 index.html 的目录编写 apache 重定向

> ID：12433105
> 
> 赞同：0
> 
> 时间：2012-09-14T23:10:58.007
> 
> 标签：apache, mod-rewrite, redirect

我经常使用 mod-rewrite 并且正在寻找捷径。

如果我想重定向这两个链接

```
mydomain.com/tralalala/login
mydomain.com/tralalala/login/ 
```

我可以用这个语句来做到这一点：

```
 RewriteRule ^tralalala/login/?$ /redirect-page.html [R=301,L] 
```

有没有一种方法可以用一条语句重定向所有这三个 URL：

```
mydomain.com/tralalala/login
mydomain.com/tralalala/login/
mydomain.com/tralalala/login/index.html 
```

我不一定想在“tralalala/login”之后使用通配符重定向所有内容。

例如，我不想重定向此页面。

```
mydomain.com/tralalala/login/dont-redirect-this.html 
```

我知道我可以用 2 个重写语句来做到这一点，但我更喜欢一个语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:52:17.183

尝试

```
RewriteRule ^tralalala/login(/index.html|/)?$ /redirect-page.html [R=301,L] 
```

# c# - 使用 Chello 在 Trello 上创建卡片

> ID：12433117
> 
> 赞同：3
> 
> 时间：2012-09-14T23:12:23.360
> 
> 标签：c#, .net, trello

我正在尝试使用 Chello 在 Trello Board 上创建卡片，但没有得到任何结果。

如果我尝试，我可以看到我的代码已连接

```
var chello = new ChelloClient("<my API key>");
var b = chello.Members.AllBoards("<my user name>"); 
```

在这种情况下`b`，我的电路板将被退回。

但这失败了

```
 var c = new Card();
        c.Name = "Test2";
        c.IdBoard = "Test";
        c.IdList = "Done";
        chello.Cards.Create(c);
        chello.Cards.Update(c); 
```

知道如何进行这项工作吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-19T10:11:19.447

I think the problem is that `c.IdBoard` should not be set to the NAME of the board, but to the ID. When viewing a board you can find the ID in the address bar, for example `https://trello.com/board/trello-development/4d5ea62fd76aa1136000000c`.

In this case, `4d5ea62fd76aa1136000000c` is the ID.

The same goes for `c.IdList`.

# objective-c - NSDateFormat (Unicode) 问题

> ID：12433119
> 
> 赞同：0
> 
> 时间：2012-09-14T23:12:29.910
> 
> 标签：objective-c, unicode, nsdate, nsdateformatter

我试图转换一个看起来像这样的 NSString：

```
@"00:00 15 September 2012" 
```

到 NSDate。

我无法弄清楚 unicode 格式需要是什么。我正在尝试这个：

```
@"HH:mm dd MMMM YYYY"
@"HH:mmddMMMMYYYY" 
```

我一直试图遵守[这里的规则，](http://unicode.org/reports/tr35/tr35-6.html#Date_Format_Patterns)但无济于事。

* * *

**编辑：**

保罗的回答确实有效（军事时间问题除外）。我试图使用 Apple 的示例来说明如何创建格式模板，如下所示：

```
NSString *formatString = [NSDateFormatter dateFormatFromTemplate:@"hh:mm dd MMM yyyy" options:0
                                                              locale:[NSLocale currentLocale]];

NSDateFormatter* fmt = [NSDateFormatter new];
[fmt setDateFormat:formatString]; 
```

这会导致所有内容都吐出 null。

但是，如果我这样做：

```
NSDateFormatter* fmt = [NSDateFormatter new];
[fmt setDateFormat:@"hh:mm dd MMM yyyy"]; 
```

世界上一切都很好。我唯一的猜测是 NSLocale 在模拟器中不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:19:00.330

你离得不远，你需要类似的东西：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"HH:mm dd MMM yyyy";
dateFormatter.timeZone = [[NSTimeZone alloc] initWithName:@"GMT"];

NSLog(@"%@", [dateFormatter dateFromString:@"00:00 15 September 2012"]); 
```

# maven - 创建新阶段

> ID：12433120
> 
> 赞同：27
> 
> 时间：2012-09-14T23:12:44.147
> 
> 标签：maven, maven-3

我正在使用 Maven 开展一个项目，为此我需要两个新阶段：“分析”和“评估”（用于数据分析的不同阶段）。我已经阅读了我能找到的所有文档，并创建了尽可能接近正确的 components.xml 和生命周期.xml 版本，但 Maven 拒绝运行新阶段。（我应该强调，让我的插件工作没有问题，将它们绑定到默认生命周期提供的现有阶段也没有问题。我的问题是我创建的新阶段似乎被 maven 忽略了。）我该怎么办需要做什么才能让我的新阶段发挥作用？

生命周期.xml：

```
<lifecycles>
  <lifecycle>
    <id>lenskit</id>
    <phases>
      <phase>
        <id>analyze</id>
        <executions>
          <execution>
            <goals>
              <goal>greet</goal>
            </goals>
          </execution>
        </executions>
      </phase>
      <phase>
        <id>validate</id>
        <executions>
          <execution>
            <goals>
              <goal>greet</goal>
            </goals>
          </execution>
        </executions>
      </phase>
    </phases>
  </lifecycle>
</lifecycles> 
```

组件.xml：

```
<component-set>
  <components>
    <component>
      <role>org.apache.maven.lifecycle.mapping.LifecycleMapping</role>
      <role-hint>lenskit</role-hint>
      <implementation>
        org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping
      </implementation>
      <configuration>
         <id>lenskit</id>
         <phases>
            <phase>get-data</phase>
            <phase>analyze</phase>
            <phase>eval</phase>
         </phases>
         <default-phases>
            <verify> org.apache.maven.plugins:maven-resources-plugin:resources </verify>
            <get-data> org.riedl:hello-lenskit-plugin:greet </get-data>
            <analyze> org.riedl:hello-lenskit-plugin:greet </analyze>
            <eval> org.riedl:hello-lenskit-plugin:greet </eval>
            <package> org.riedl:hello-lenskit-plugin:greet </package>
         </default-phases>
      </configuration>
    </component>
  </components>
</component-set> 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-17T23:01:47.570

Maven 邮件列表中的一个向导向我指出了一个完整的工作示例，该示例完全符合我的要求：它创建了一个自定义生命周期，其中包含您想要的任何阶段，并允许您从 Maven 命令行使用该生命周期。该示例位于：

[https://svn.apache.org/repos/asf/maven/plugins/trunk/maven-scm-publish-plugin](https://svn.apache.org/repos/asf/maven/plugins/trunk/maven-scm-publish-plugin)

缺少的关键见解是 components.xml 文件必须*同时*具有 LifecycleMapping 组件*和*Lifecycle 组件。正确的、有效的 components.xml 如下。

请注意，您只能定义一个附加生命周期（即除了三个*默认*生命周期：构建、清理和站点生命周期之外）。原始生命周期及其阶段将始终存在，并且您不能在新生命周期中包含名称与现有生命周期匹配的任何阶段，这太糟糕了，因为重新定义项目的完整生命周期会更加尴尬。不过，这是向前迈出的一大步。

另外，请记住，当您使用新的生命周期时，您必须将其标记为*扩展*：

```
<extensions>true</extensions> 
```

因此允许插件重新定义生命周期。为了表明你的 pom.xml 应该使用新的生命周期，包括生命周期名称作为你项目的“包装”。

```
<component-set>
  <components>
    <component>
      <role>org.apache.maven.lifecycle.mapping.LifecycleMapping</role>
      <role-hint>lenskit</role-hint>
      <implementation>
    org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping
      </implementation>
    </component>
    <component>
      <role>org.apache.maven.lifecycle.Lifecycle</role>
      <implementation>org.apache.maven.lifecycle.Lifecycle</implementation>
      <role-hint>lenskit</role-hint>
      <configuration>
     <id>lenskit</id>
     <phases>
        <phase>get-data</phase>
        <phase>analyze</phase>
        <phase>eval</phase>
     </phases>
     <default-phases>
        <get-data>org.riedl:hello-lenskit-plugin:greet</get-data>
        <analyze>org.riedl:hello-lenskit-plugin:greet</analyze>
        <eval>org.riedl:hello-lenskit-plugin:greet</eval>
     </default-phases>
      </configuration>
    </component>
  </components>
</component-set> 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-09-18T15:47:25.810

Maven 中有许多错误会干扰 John 的方法：

以下内容实际上应该是约翰答案的一部分，但我的编辑与评论他的方法而不是强调该方法的当前局限性相混淆......所以这里它们是第二个答案：rolleyes：

这需要 Maven 3.0 或更高版本才能工作。当您尝试在 Maven 2.x 中使用它时，您将收到如下错误：

```
$ mvn eval
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[ERROR] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Invalid task 'eval': you must specify a valid lifecycle phase, or a goal 
in the format plugin:goal or pluginGroupId:pluginArtifactId:pluginVersion:goal
[INFO] ------------------------------------------------------------------------
[INFO] For more information, run Maven with the -e switch
[INFO] ------------------------------------------------------------------------
[INFO] Total time: < 1 second
[INFO] Finished at: Tue Sep 18 15:58:12 IST 2012
[INFO] Final Memory: 2M/81M
[INFO] ------------------------------------------------------------------------ 
```

至少从 Maven 3.0.4 开始，当您在没有目标或阶段的情况下调用 Maven 时，它不会在帮助文本中列出这些阶段：

```
$ mvn
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.224s
[INFO] Finished at: Tue Sep 18 16:03:20 IST 2012
[INFO] Final Memory: 2M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] No goals have been specified for this build. You must specify a valid 
lifecycle phase or a goal in the format <plugin-prefix>:<goal> or 
<plugin-group-id>:<plugin-artifact-id>[:<plugin-version>]:<goal>. Available 
lifecycle phases are: validate, initialize, generate-sources, process-sources, 
generate-resources, process-resources, compile, process-classes, 
generate-test-sources, process-test-sources, generate-test-resources, 
process-test-resources, test-compile, process-test-classes, test, 
prepare-package, package, pre-integration-test, integration-test, 
post-integration-test, verify, install, deploy, pre-clean, clean, post-clean, 
pre-site, site, post-site, site-deploy. -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/NoGoalSpecifiedException 
```

在多模块构建中，您最终可能会搞砸。

考虑以下两个扩展模块：

## 扩展 1

```
<component-set>
  <components>
    <component>
      <role>org.apache.maven.lifecycle.mapping.LifecycleMapping</role>
      <role-hint>fancy</role-hint>
      <implementation>
        org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping
      </implementation>
    </component>
    <component>
      <role>org.apache.maven.lifecycle.Lifecycle</role>
      <implementation>org.apache.maven.lifecycle.Lifecycle</implementation>
      <role-hint>fancy</role-hint>
      <configuration>
         <id>fancy</id>
         <phases>
            <phase>fancy</phase>
         </phases>
         <default-phases>
            <fancy>org.codehaus.mojo:rpm-maven-plugin:version</fancy>
         </default-phases>
      </configuration>
      </configuration>
    </component>
  </components>
</component-set> 
```

## 扩展 2

```
<component-set>
  <components>
    <component>
      <role>org.apache.maven.lifecycle.mapping.LifecycleMapping</role>
      <role-hint>poncy</role-hint>
      <implementation>
        org.apache.maven.lifecycle.mapping.DefaultLifecycleMapping
      </implementation>
    </component>
    <component>
      <role>org.apache.maven.lifecycle.Lifecycle</role>
      <implementation>org.apache.maven.lifecycle.Lifecycle</implementation>
      <role-hint>poncy</role-hint>
      <configuration>
         <id>poncy</id>
         <phases>
            <phase>poncy</phase>
            <phase>fancy</phase>
         </phases>
         <default-phases>
            <poncy>org.apache.maven.plugins:maven-enforcer-plugin:display-info</poncy>
            <fancy>org.codehaus.mojo:build-helper-maven-plugin:parse-version</fancy>
         </default-phases>
      </configuration>
    </component>
  </components>
</component-set> 
```

## 家长会

```
<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>localdomain.localhost</groupId>
  <artifactId>fancy-lifecycle-parent</artifactId>
  <version>0.1-SNAPSHOT</version>
  <packaging>pom</packaging>

  <modules>
    <module>poncy-test</module>
    <module>fancy-test</module>
  </modules>

</project> 
```

## 花式测试 pom

```
<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>localdomain.localhost</groupId>
  <artifactId>fancy-test</artifactId>
  <version>0.1-SNAPSHOT</version>
  <packaging>fancy</packaging>

  <build>
    <extensions>
      <extension>
        <groupId>localdomain.localhost</groupId>
        <artifactId>fancy-lifecycle</artifactId>
        <version>0.1-SNAPSHOT</version>
      </extension>
    </extensions>
  </build>
</project> 
```

## Poncy 测试 pom

```
<?xml version="1.0" encoding="utf-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" 
         xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 
                             http://maven.apache.org/maven-v4_0_0.xsd">
  <modelVersion>4.0.0</modelVersion>

  <groupId>localdomain.localhost</groupId>
  <artifactId>poncy-test</artifactId>
  <version>0.1-SNAPSHOT</version>
  <packaging>poncy</packaging>

  <build>
    <extensions>
      <extension>
        <groupId>localdomain.localhost</groupId>
        <artifactId>poncy-lifecycle</artifactId>
        <version>0.1-SNAPSHOT</version>
      </extension>
    </extensions>
  </build>
</project> 
```

## 一些测试

```
$ mvn -f pom.xml fancy
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] poncy-test
[INFO] fancy-test
[INFO] fancy-lifecycle-parent
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building poncy-test 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.1.1:display-info (default-display-info) @ poncy-test ---
[INFO] Maven Version: 3.0.4
[INFO] JDK Version: 1.6.0_35 normalized as: 1.6.0-35
[INFO] OS Info: Arch: x86_64 Family: mac Name: mac os x Version: 10.8.1
[INFO] 
[INFO] --- build-helper-maven-plugin:1.7:parse-version (default-parse-version) @ poncy-test ---
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building fancy-test 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- rpm-maven-plugin:2.1-alpha-2:version (default-version) @ fancy-test ---
[WARNING] rpm version string truncated to 0.1
[INFO] setting [rpm.version] property to value [0.1].
[INFO] setting [rpm.release] property to value [SNAPSHOT20120918152051].
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building fancy-lifecycle-parent 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] poncy-test ........................................ SUCCESS [0.727s]
[INFO] fancy-test ........................................ SUCCESS [0.196s]
[INFO] fancy-lifecycle-parent ............................ SUCCESS [0.001s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.152s
[INFO] Finished at: Tue Sep 18 16:20:51 IST 2012
[INFO] Final Memory: 4M/81M
[INFO] ------------------------------------------------------------------------ 
```

第一个测试来自父 pom，一切正常。请注意，两个阶段 (`poncy`和`fancy`的执行是为`poncy-test`模块调用的，但只有一个阶段 ( `fancy`) 是为`fancy-test`模块调用的，正如您所期望的那样。

`poncy`现在只在阶段尝试相同

```
$ mvn poncy
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] poncy-test
[INFO] fancy-test
[INFO] fancy-lifecycle-parent
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building poncy-test 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.1.1:display-info (default-display-info) @ poncy-test ---
[INFO] Maven Version: 3.0.4
[INFO] JDK Version: 1.6.0_35 normalized as: 1.6.0-35
[INFO] OS Info: Arch: x86_64 Family: mac Name: mac os x Version: 10.8.1
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building fancy-test 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] poncy-test ........................................ SUCCESS [0.588s]
[INFO] fancy-test ........................................ FAILURE [0.033s]
[INFO] fancy-lifecycle-parent ............................ SKIPPED
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 0.853s
[INFO] Finished at: Tue Sep 18 16:23:27 IST 2012
[INFO] Final Memory: 3M/81M
[INFO] ------------------------------------------------------------------------
[ERROR] Unknown lifecycle phase "poncy". You must specify a valid lifecycle phase or a goal in the format <plugin-prefix>:<goal> or <plugin-group-id>:<plugin-artifact-id>[:<plugin-version>]:<goal>. Available lifecycle phases are: validate, initialize, generate-sources, process-sources, generate-resources, process-resources, compile, process-classes, generate-test-sources, process-test-sources, generate-test-resources, process-test-resources, test-compile, process-test-classes, test, prepare-package, package, pre-integration-test, integration-test, post-integration-test, verify, install, deploy, fancy, pre-clean, clean, post-clean, pre-site, site, post-site, site-deploy. -> [Help 1]
[ERROR] 
[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.
[ERROR] Re-run Maven using the -X switch to enable full debug logging.
[ERROR] 
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/LifecyclePhaseNotFoundException 
```

请注意，我们现在有一个构建失败，因为该`fancy-test`模块的阶段是未知的。

如果我们构建父级并`poncy-test`明确地一切正常：

```
$ mvn poncy -pl :fancy-lifecycle-parent,:poncy-test
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] poncy-test
[INFO] fancy-lifecycle-parent
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building poncy-test 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.1.1:display-info (default-display-info) @ poncy-test ---
[INFO] Maven Version: 3.0.4
[INFO] JDK Version: 1.6.0_35 normalized as: 1.6.0-35
[INFO] OS Info: Arch: x86_64 Family: mac Name: mac os x Version: 10.8.1
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building fancy-lifecycle-parent 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] poncy-test ........................................ SUCCESS [5.247s]
[INFO] fancy-lifecycle-parent ............................ SUCCESS [0.001s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 5.488s
[INFO] Finished at: Tue Sep 18 16:24:45 IST 2012
[INFO] Final Memory: 3M/81M
[INFO] ------------------------------------------------------------------------ 
```

最后，积极的一面是，如果我们添加一个`jar`没有定义扩展的打包模块，所有的地狱都不会松散：

```
$ mvn fancy
[INFO] Scanning for projects...
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Build Order:
[INFO] 
[INFO] jar-test
[INFO] poncy-test
[INFO] fancy-test
[INFO] fancy-lifecycle-parent
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building jar-test 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building poncy-test 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- maven-enforcer-plugin:1.1.1:display-info (default-display-info) @ poncy-test ---
[INFO] Maven Version: 3.0.4
[INFO] JDK Version: 1.6.0_35 normalized as: 1.6.0-35
[INFO] OS Info: Arch: x86_64 Family: mac Name: mac os x Version: 10.8.1
[INFO] 
[INFO] --- build-helper-maven-plugin:1.7:parse-version (default-parse-version) @ poncy-test ---
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building fancy-test 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] 
[INFO] --- rpm-maven-plugin:2.1-alpha-2:version (default-version) @ fancy-test ---
[WARNING] rpm version string truncated to 0.1
[INFO] setting [rpm.version] property to value [0.1].
[INFO] setting [rpm.release] property to value [SNAPSHOT20120918152733].
[INFO]                                                                         
[INFO] ------------------------------------------------------------------------
[INFO] Building fancy-lifecycle-parent 0.1-SNAPSHOT
[INFO] ------------------------------------------------------------------------
[INFO] ------------------------------------------------------------------------
[INFO] Reactor Summary:
[INFO] 
[INFO] jar-test .......................................... SUCCESS [0.001s]
[INFO] poncy-test ........................................ SUCCESS [0.809s]
[INFO] fancy-test ........................................ SUCCESS [0.198s]
[INFO] fancy-lifecycle-parent ............................ SUCCESS [0.001s]
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time: 1.244s
[INFO] Finished at: Tue Sep 18 16:27:33 IST 2012
[INFO] Final Memory: 4M/81M
[INFO] ------------------------------------------------------------------------ 
```

# javascript - 使用 window.opener 将值从弹出窗口传递给父页面

> ID：12433123
> 
> 赞同：0
> 
> 时间：2012-09-14T23:13:03.013
> 
> 标签：javascript

我正在尝试从弹出窗口向父页面发送一个 php 值，但所发生的只是弹出窗口变为空白。我确信这是我的语法错误。

```
die( '<script>window.opener.location.search=?week_start='.$week_start.'; window.close();</script>'); 
```

如果有人可以帮助我纠正它，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:18:04.630

这是您更正的语法：

```
die( '<script>window.opener.location.search=\'?week_start='.$week_start.'\'; window.close();</script>'); 
```

# android - Android ndk-r8“尝试执行'cc1plus'时出错：execvp：没有这样的文件或目录”

> ID：12433127
> 
> 赞同：5
> 
> 时间：2012-09-14T23:13:30.760
> 
> 标签：android, android-ndk, osx-mountain-lion

我正在尝试使用 Mountain Lion 上的 Android NDK 为 Android 构建一个库，遵循本指南

[http://masl.cis.gvsu.edu/2012/01/25/android-echoprint/](http://masl.cis.gvsu.edu/2012/01/25/android-echoprint/)

当需要编译库时，我运行：

```
cd <path to jni>
<ndk>/ndk-build 
```

我收到以下错误：

```
Compile++ thumb  : echoprint-jni <= AndroidCodegen.cpp
arm-linux-androideabi-g++: error trying to exec 'cc1plus': execvp: No such file or directory
make: *** [/Users/wingdom/Desktop/obj/local/armeabi/objs/echoprint-jni/AndroidCodegen.o] Error 1 
```

我相信我已将所需的所有内容添加到路径变量中：

```
export PATH=$PATH:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/bin:Developer/android-sdk/tools:/Developer/android-sdk/platform-tools:/Developer/android-ndk:/Developer/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin 
```

为了编译它，我还需要做什么？我目前正在使用 r8b NDK，但已经尝试使用版本一直到 6。

编辑：

我尝试了这个解决方案：[构建 android ndk 示例项目时出错](https://stackoverflow.com/questions/8544977/error-while-building-android-ndk-sample-project)

添加

```
export PATH=$PATH:/usr/lib/i386-linux-gnu/gcc/i686-linux-gnu/4.5.2 
```

到我的路径给我这个错误：

```
cc1plus: error: unrecognized command line option "-mbionic"
cc1plus: error: unrecognized command line option "-mthumb"
cc1plus: error: unrecognized command line option "-mfpu=vfp"
/Users/wingdom/Desktop/jni/AndroidCodegen.cpp:1: error: bad value (armv5te) for -march= switch
/Users/wingdom/Desktop/jni/AndroidCodegen.cpp:1: error: bad value (xscale) for -mtune= switch
make: *** [/Users/wingdom/Desktop/obj/local/armeabi/objs/echoprint-jni/AndroidCodegen.o] Error 1 
```

但添加

```
export CROSS_COMPILER=$PATH:/Developer/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/bin 
```

没有帮助，就像在上面的链接中所做的那样。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-18T01:36:13.627

我遇到了同样的错误。
我什至无法执行“gcc，g++”命令。所以我在谷歌上搜索了很多以找到解决方案，但对我没有任何帮助。

然后，我发现 ndk 中的某些文件名不正确，`_`在某些文件名上有拖尾。（在我的情况下，在 toolchains/arm-linux-androideabi-4.6/prebuilt/darwin-x86/arm-linux-androideabi/bin 文件夹中, `gcc_`, `g++_`,`c++_`而不是`gcc`, `g++`, `c++`.)
我使用 The unarchiver 来提取 NDK 存档，所以我认为 unarchiving 过程有问题。

所以我重新下载了 NDK 并检查了 MD5 校验和，然后使用 Mac 的默认存档实用程序提取了存档。

现在，问题已经解决了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-17T21:39:16.270

听起来您的 NDK 下载/解包很糟糕。它正在寻找的`cc1plus`二进制文件应该在`$NDK_HOME/toolchains/arm-linux-androideabi-4.4.3/prebuilt/darwin-x86/libexec/gcc/arm-linux-androideabi/4.4.3/`. 如果它不存在，请尝试重新下载 SDK 和/或再次解包。

如果*存在*，请确保构建传递`V=1`到`ndk-build`，并查看是否有任何奇怪`-B`的选项传递给编译器。该`-B`选项告诉`gcc`在哪里可以找到它的“子程序”（其中`cc1plus`一个）。很确定 r8 的命令行上不应该有任何东西，所以如果有的话，某处的某处传递了错误的标志。例如，在我的系统上，C++ NDK 命令行最终看起来像这样：

```
 /opt/android-ndk/toolchains/arm-linux-androideabi-4.4.3/prebuilt/linux-x86/bin/arm-linux-androideabi-g++ -MMD -MP -MF ./obj/local/armeabi-v7a/objs/sometarget/SomeCppFile.o.d -fpic -ffunction-sections -funwind-tables -fstack-protector -D__ARM_ARCH_5__ -D__ARM_ARCH_5T__ -D__ARM_ARCH_5E__ -D__ARM_ARCH_5TE__  -Wno-psabi -march=armv7-a -mfloat-abi=softfp -mfpu=vfp -fno-exceptions -fno-rtti -mthumb -Os -fomit-frame-pointer -fno-strict-aliasing -finline-limit=64 -I/opt/android-ndk/sources/cxx-stl/stlport/stlport -I/opt/android-ndk/sources/cxx-stl//gabi++/include -DANDROID -Wall -Wa,--noexecstack  -frtti  -O2 -DNDEBUG -g   -I/opt/android-ndk/platforms/android-8/arch-arm/usr/include -c  jni/SomeCppFile.cpp -o ./obj/local/armeabi-v7a/objs/sometarget/SomeCppFile.o 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-04T06:02:32.297

也许你需要安装 g++：

`$sudo apt-get install g++`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-07-29T09:46:04.563

我花了大约一天的时间来找到这个的根本原因

```
arm-linux-androideabi-gcc: error trying to exec 'cc1': execvp: No such file... 
```

和其他问题。

问题是我用 7z 解压了 NDK 和 SDK，这删除了所有二进制文件的可执行权限，并且 Eclipse 无法启动 cc1。一旦我使用 tar 解压了 SDK 和 NDK 的 tar 文件，一切都开始运行良好。

# c++ - Qt 库 - 静态成员函数的线程安全

> ID：12433128
> 
> 赞同：1
> 
> 时间：2012-09-14T23:13:39.340
> 
> 标签：c++, multithreading, qt, thread-safety, static-members

Qt 的文档指出所有 QDateTime 函数都是可重入的，这在 Qt 术语中意味着如果您在另一个线程中创建 QDateTime 的新对象，您可以安全地使用它。但是以下静态成员是否线程安全：QDateTime::currentDateTime 和 QDateTime::fromTime_t？

辅助线程中的代码：

```
 // Is line below thread safe?
 QDateTime tDateTimeNow1 = QDateTime::currentDateTime(); 

 // The below code should be no different then the one above..
 QDateTime tDateTimeNow2; 
 tDateTimeNow2 = tDateTimeNow2.currentDateTime(); 
```

我对本文[http://doc.qt.nokia.com/4.7-snapshot/thread-basics.html](http://doc.qt.nokia.com/4.7-snapshot/thread-basics.html)中的以下声明感到困惑：“QDateTime::currentDateTime() 在 Qt 中未标记为线程安全文档，但是我们可以在这个小例子中使用它，因为我们知道 QDateTime::currentDateTime() 静态方法没有在任何其他线程中使用。”

如果 QDateTime::currentDateTime() 不能在辅助线程中使用，那么我们如何以线程安全的方式创建具有当前日期时间的 QDateTime 对象？

以下是与上述类似的其他静态成员函数，我不知道它们是否可以在线程中安全使用：1）QTimer::singleShot 2）QString::fromUtf8 3）QString:number

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T00:58:11.477

如果您需要一种线程安全的方式来获取具有当前时间的 QDateTime 对象，请创建一个保护不安全调用的函数。

```
QDateTime getCurrentTime()
{
    static QMutex mutex;
    QMutexLocker locker(&mutex);
    return QDateTime::currentDateTime();

} 
```

# asp.net-mvc - 如何在不使用太多 RAM 的情况下正确地从 MVC3 流式传输大数据？

> ID：12433132
> 
> 赞同：10
> 
> 时间：2012-09-14T23:14:26.963
> 
> 标签：asp.net-mvc, asp.net-mvc-3, model-view-controller, stream, ram

我想`HttpResponse.OutputStream`一起使用，`ContentResult`这样我就可以`Flush`不时避免.Net使用过多的RAM。

但是所有使用 MVC 的示例都`FileStreamResult, EmptyResult, FileResult, ActionResult, ContentResult`显示了将所有数据放入内存并传递给其中之一的代码。还有一篇文章建议`EmptyResult`与使用一起返回`HttpResponse.OutputStream`是个坏主意。我还能如何在 MVC 中做到这一点？

从 MVC 服务器组织大数据（html 或二进制）的可刷新输出的正确方法是什么？

为什么返回`EmptyResult`or `ContentResult`or`FileStreamResult`是个坏主意？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-15T15:10:20.047

如果您已经有一个流可以使用，您会想要使用 FileStreamResult。很多时候，您可能只能访问该文件，需要构建一个流，然后将其输出到客户端。

```
System.IO.Stream iStream = null;

// Buffer to read 10K bytes in chunk:
byte[] buffer = new Byte[10000];

// Length of the file:
int length;

// Total bytes to read:
long dataToRead;

// Identify the file to download including its path.
string filepath  = "DownloadFileName";

// Identify the file name.
string  filename  = System.IO.Path.GetFileName(filepath);

try
{
    // Open the file.
    iStream = new System.IO.FileStream(filepath, System.IO.FileMode.Open, 
                System.IO.FileAccess.Read,System.IO.FileShare.Read);

    // Total bytes to read:
    dataToRead = iStream.Length;

    Response.ContentType = "application/octet-stream";
    Response.AddHeader("Content-Disposition", "attachment; filename=" + filename);

    // Read the bytes.
    while (dataToRead > 0)
    {
        // Verify that the client is connected.
        if (Response.IsClientConnected) 
        {
            // Read the data in buffer.
            length = iStream.Read(buffer, 0, 10000);

            // Write the data to the current output stream.
            Response.OutputStream.Write(buffer, 0, length);

            // Flush the data to the HTML output.
            Response.Flush();

            buffer= new Byte[10000];
            dataToRead = dataToRead - length;
        }
        else
        {
            //prevent infinite loop if user disconnects
            dataToRead = -1;
        }
    }
}
catch (Exception ex) 
{
    // Trap the error, if any.
    Response.Write("Error : " + ex.Message);
}
finally
{
    if (iStream != null) 
    {
        //Close the file.
        iStream.Close();
    }
    Response.Close();
} 
```

[这](http://support.microsoft.com/kb/812406)是解释上述代码的微软文章。

# c# - 在应用程序池回收之前空闲后无法连接到 WebService

> ID：12433136
> 
> 赞同：1
> 
> 时间：2012-09-14T23:15:53.720
> 
> 标签：c#, asp.net, web-services, iis, timeout

我有一个在 IIS 上运行的 Web 服务，并且在大多数情况下它工作正常。我可以在首次部署时从测试 Web 应用程序调用此 Web 服务。如果我使用相同的测试数据多次点击彼此靠近的 web 服务，它会返回结果就好了。

如果我让 Web 服务处于空闲状态（我无法弄清楚它开始出错之前需要多长时间，至少一个小时）并且我尝试访问同一个 Web 服务，我会在尝试时立即返回一个内部 500 超时错误使用与以前相同的方法。无论我如何调用此 Web 服务（通过 Windows 应用程序、Web 应用程序、使用 SOAP 请求的提琴手），我都会立即收到此错误。在我回收运行 Web 服务的应用程序池之前，无法让它再次工作。

编辑：另外，如果有帮助，我仍然可以在发生此错误时将 webservice asmx 页面显示在 Web 浏览器上。

# php - 我应该将美国各州存储在我的数据库中还是 PHP 数组中？

> ID：12433137
> 
> 赞同：10
> 
> 时间：2012-09-14T23:15:55.233
> 
> 标签：php, mysql, database, arrays

我应该如何存储州和国家？

选项 1) 我可以创建一个名为 states 的数据库表，并具有“id”、“state”和“state_abbr”。然后我可以通过用户表中的“id”来引用它。

选项 2）我可以创建一个 PHP 数组并使用它来填充状态下拉菜单，并避免完全查询数据库。数组的键是为该用户插入数据库中的值。

状态不会改变，因此数据应该是静态的。存储这些信息的最佳方式是什么？为什么？PHP数组不会更快吗？为什么看起来数据库是存储它的最佳方式呢？

想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T01:56:06.330

一位聪明的数据库设计师曾经告诉我，“你所知道的关于状态代码的一切都是错误的。”

*   这些是两个字母的代码，而不是缩写。（[加利福尼亚的缩写](http://en.wikipedia.org/wiki/List_of_U.S._state_abbreviations#Current_use_of_traditional_abbreviations)是“Calif.”，俄亥俄的缩写是“Ohio”。）
*   [其中有50多个](https://pe.usps.com/text/pub28/28apb.htm)。
*   并非所有的两个字母代码都指状态。他们还指“财产”，如“密克罗尼西亚联邦”和“帕劳”。
*   它们不是独一无二的。一个由两个字母组成的代码 AE 是指四个不同的军事“国家”（欧洲武装部队、加拿大武装部队、中东武装部队和非洲武装部队）。
*   军事“州”代码可能会随着部队兵力的变化而变化。向非洲派遣数十万军队，您可能会看到“非洲武装部队”的代码从“AE”变为“AF”。
*   有十几个地区尚未在此列表中。其中一些具有战略意义（威克岛、中途岛等），它们的地位很容易改变。

鉴于您不太可能了解 USPS 州代码等常见事物的所有这些信息，因此将它们存储在表格中更有意义。表在运行时比 PHP 数组更容易维护。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T00:01:06.043

因为数据库是最好的存储方式。

如果明年贵公司决定走向国际怎么办？所以现在你需要国家和国家的依赖下拉列表。

所以你需要加上欧洲，然后是非洲。那是一吨的国家，还有一吨的州。您将需要一个大阵列。

然后你的老板想要一份按国家/地区的报告。

如果您将所有内容都保存在数据库中，则管理起来会容易得多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-07-30T03:06:30.210

我知道这是旧的，但以防其他人想知道同样的事情。我目前正在设计应用程序，为了确保数据完整性，我想创建一个国家和州表。我也有城市，但我会让用户在输入地址时填充我认为的内容。

现在我这么说，因为在某个时候，我确实希望我的申请能够国际化。

所以，我当前的国家数据库有 249 条记录。（我删除了一些没有人口的）

另一方面，国家有点困难，因为并非每个国家都将它们称为国家。（有州、省、部门、教区、领地、地区、地区，也许还有其他一些。）但该表目前包含 3438 条记录。

现在我可能会浪费我的时间来研究这些信息，因为甚至可能有一个在线数据库，我可以简单地使用某种 API 来引用它，但是现在我从一个叫做 iso 3166 的东西中获取我的信息（ -1 代表国家 -2 代表州。（我相信））

所以现实是，我可能永远不会看到其中一些国家的业务，但他们现在就在那里。

我还创建了一个表格，用于正确格式化货币值。这也有点困难，因为我只喜欢少数人需要的信息。

但是当您必须考虑不同国家/地区的信息差异时，DB 设计似乎确实有点复杂。

但要最终回答你的问题，如果你只在美国做生意，硬编码或使用数据库会起作用，但州确实会改变。虽然我们添加新状态已经有一段时间了，但它确实发生了，并且可能很快会再次发生。所以数据库会更容易管理我认为任何改变。另外，如果您决定显示与该州相关的其他信息，您所要做的就是添加一些列，您的所有参考资料都会显示该信息。

我的观点是不要在代码中硬编码数据，但我不是专业人士。即使是你认为永远不会改变的事情，比如性别，也证明了它也可以随着人们这些天提出的所有这些反式术语而改变。

# php - PHP 在整数和字母之间爆炸

> ID：12433142
> 
> 赞同：2
> 
> 时间：2012-09-14T23:16:53.893
> 
> 标签：php, regex, explode

```
array (    
    [0] => 3 / 4 Bananas
    [1] => 1 / 7 Apples
    [2] => 3 / 3 Kiwis
    ) 
```

可以说，是否可以遍历这个列表，并`explode`在找到的第一个字母和第一个整数之间进行迭代，所以我可以将文本与数字集分开，最终得到如下内容：

```
array (
   [0] => Bananas
   [1] => Apples
   [2] => Kiwis
   ) 
```

我不知道您如何将其指定为分隔符。甚至可能吗？

```
foreach ($fruit_array as $line) {
   $var = explode("??", $line);
} 
```

编辑：更新示例。按空间爆炸是行不通的。见上面的例子。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T23:24:13.643

您可以使用`preg_match`而不是`explode`：

```
$fruit_array = array("3 / 4 Bananas", "1 / 7 Apples", "3 / 3 Kiwis");
$result = array();
foreach ($fruit_array as $line) {
   preg_match("/\d[^A-Za-z]+([A-Za-z\s]+)/", $line, $match);
   array_push($result, $match[1]);
} 
```

它几乎从字面上匹配您的表达式，即一个数字`\d`，后跟一个或多个非字母`[^A-Za-z]`，后跟一个或多个字母或空格（以解释多个单词）`[A-Za-z\s]+`。括号之间的最终匹配字符串将在第一个匹配项中*捕获*，即`$match[1]`.

这是一个**[演示](http://ideone.com/FZJdt)**。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T23:27:43.467

```
// An array to hold the result
$result = array();

// Loop the input array
foreach ($array as $str) {

  // Split the string to a maximum of 2 parts
  // See below for regex description
  $parts = preg_split('/\d\s*(?=[a-z])/i', $str, 2);

  // Push the last part of the split string onto the result array
  $result[] = array_pop($parts);

}

// Display the result
print_r($result); 
```

正则表达式的工作方式如下：

```
/
  # Match any digit
  \d
  # Match 0 or more whitespace characters
  \s*
  # Assert that the next character is a letter without including it in the delimiter
  (?=[a-z])
/i 
```

[看到它工作](http://codepad.org/wEjguHUn)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-14T23:33:03.970

如果你想在“第一个字母和找到的第一个整数之间”爆炸，你不应该使用explode。

[PHP`explode`函数](http://php.net/manual/en/function.explode.php)接受一个分隔符作为它的第一个参数：

> 数组**爆炸**（字符串*$delimiter*，字符串*$string* [, int *$limit* ] ）

这意味着它不够“聪明”，无法理解“在第一个字母和找到的第一个整数之间”这样的复杂规则——它只能理解“在 '1' 上拆分”或“在 'A' 上拆分”之类的东西。分隔符必须是具体的：例如，特定的字母和特定的整数。（即“在字母'B'和整数'4'之间”）

对于更抽象/更一般的东西，比如你描述的（“在第一个字母和找到的第一个整数之间”），你需要一个模式。所以最好的办法是使用[`preg_replace`](http://php.net/manual/en/function.preg-replace.php)or[`preg_split`](http://php.net/manual/en/function.preg-split.php)代替，[像这样](http://codepad.viper-7.com/vCPKzJ)：

```
<?php

$myArr = [    
    "3 / 4 Bananas",
    "1 / 7 Apples",
    "3 / 3 Kiwis",
    "1 / 7 Green Apples",
];

for($i=0; $i<count($myArr); $i++) {
    echo "<pre>";
    echo preg_replace("/^.*?\d[^\d[a-z]]*([a-z])/i", "$1", $myArr[$i]);
    echo "</pre>";
}

?> 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-14T23:36:21.550

您还可以在 preg_match 中使用 PREG_OFFSET_CAPTURE 标志：

```
$a = array('1/4 banana', '3/5 apple', '3/2 peach');

foreach ($a as $b) {
    preg_match('/[a-z]/', $b, $matches, PREG_OFFSET_CAPTURE);
    $pos = $matches[0][1]; // position of first match of [a-z] in each case
    $c[] = substr($b, $pos);  
}

print_r($c);

Array ( [0] => banana [1] => apple [2] => peach ) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-14T23:24:10.210

像这样的东西：

```
foreach ($fruit_array as $line) {
   $var = explode(" ", $line);
   $arr[$var[2]] = $var[3];
}

var_dump( $arr ) should output:

array (
   [0] => Bananas
   [1] => Apples
   [2] => Kiwis
   ) 
```

# spring-mvc - Spring+Hibernate：在线程中找不到会话

> ID：12433143
> 
> 赞同：0
> 
> 时间：2012-09-14T23:17:32.650
> 
> 标签：spring-mvc, spring-3, spring-transactions, hibernate-4.x

我制作了一个基于 Maven+Spring 3.1+Spring MVC 3.1+Hibernate 4.1 的项目，如果我使用代码，则在事务中：

```
Session session=sessionFactory.getCurrentSession();
session.save(user); 
```

它在 getCurrentSession() 处给出了异常：

```
SEVERE: Servlet.service() for servlet appServlet threw exception
org.hibernate.HibernateException: No Session found for current thread
    at org.springframework.orm.hibernate4.SpringSessionContext.currentSession(SpringSessionContext.java:97)
    at org.hibernate.internal.SessionFactoryImpl.getCurrentSession(SessionFactoryImpl.java:1024)
    at com.company.cv.dao.UserDAO.saveUser(UserDAO.java:30)
    at com.company.cv.service.UserService.saveUser(UserService.java:20)
    at com.company.cv.HomeController.saveUser(HomeController.java:44)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.springframework.web.method.support.InvocableHandlerMethod.invoke(InvocableHandlerMethod.java:213)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:126)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:96)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:617)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:578)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:80)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:923)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:852)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:882)
    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:789)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:637)
    at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
    at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:857)
    at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
    at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
    at java.lang.Thread.run(Thread.java:662) 
```

但是如果我使用 openSession 而不是 getCurrentSession 没有异常并且代码事务成功完成：

```
 Session session = sessionFactory.openSession();
    session.save(user); 
```

是什么原因？谢谢您的帮助

我的 applicationContext.xml：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource" destroy-method="close">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"></property>
    <property name="url" value="jdbc:mysql://localhost:3306/companycv" />
    <property name="username" value="root" />
    <property name="password" value="root" />
</bean>

<bean id="sessionFactory" class="org.springframework.orm.hibernate4.LocalSessionFactoryBean">
    <property name="dataSource" ref="dataSource" />
    <property name="annotatedClasses">
    <list>
        <value>com.company.cv.model.User</value>
    </list>
    </property>
    <property name="hibernateProperties">
        <props>
            <prop key="hibernate.hbm2ddl.auto">create</prop>
            <prop key="hibernate.dialect">org.hibernate.dialect.MySQLDialect</prop>
            <prop key="hibernate.show_sql">true</prop>
        </props>
    </property>
</bean>

<bean id="txManager" class="org.springframework.orm.hibernate4.HibernateTransactionManager">
    <property name="sessionFactory" ref="sessionFactory" />
</bean>
<tx:annotation-driven transaction-manager="txManager" /> 
```

servlet-context.xml：

```
<!-- Handles HTTP GET requests for /resources/** by efficiently serving up static resources in the ${webappRoot}/resources directory -->
<resources mapping="/resources/**" location="/resources/" />

<!-- Resolves views selected for rendering by @Controllers to .jsp resources in the /WEB-INF/views directory -->
<beans:bean class="org.springframework.web.servlet.view.InternalResourceViewResolver">
    <beans:property name="prefix" value="/WEB-INF/views/" />
    <beans:property name="suffix" value=".jsp" />
</beans:bean>

<context:component-scan base-package="com.company.cv" /> 
```

我的服务代码：

```
@Service
public class UserService implements UserServiceIntf{

    @Autowired
    UserDAOIntf userDAO;

    @Transactional
    public void saveUser(User user) {
        userDAO.saveUser(user);
    }
} 
```

我的 DAO 代码：

```
@Repository
public class UserDAO implements UserDAOIntf {

    @Autowired
    SessionFactory sessionFactory;

    public void saveUser(User user) {
        Session session=sessionFactory.getCurrentSession();
        session.save(user);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:49:35.877

`@Transactional`您需要在调用 DAO 方法的服务方法上方添加注释`save`。由于您已`txManager`在应用程序上下文中定义，因此您无需手动管理事务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-16T15:24:22.697

我观察到您做错的一件事是您将 Hibernate 事务 API 的使用与 Spring 托管事务管理抽象混合在一起。严格不建议这样做。

```
Session session=sessionFactory.getCurrentSession();
Transaction tx=session.beginTransaction(); // This is using Hibernate transaction API
session.save(user);
sessionFactory.getCurrentSession().save(user);
tx.commit();// This is using Hibernate transaction API 
```

在上面的代码中，您使用 hibernate 事务 api 来管理事务以及 Spring 事务管理（当您使用事务注释注释您的 Service 方法时）

你只需要使用这个

```
Session session=sessionFactory.getCurrentSession();
session.save(user);
sessionFactory.getCurrentSession().save(user); 
```

同样正如其他人所指出的，您列出了重复的数据源定义。而且您提到您无法获得没有意义的 sessionFactory，因为它是通过 Spring 注入的，并且您说在另一种情况下您可以访问 sessionFactory。没有理由发生这种情况。

***更新***

所以你说你在这两种情况下都可以访问 sessionFactory，但在 getCurrentSession 的情况下它不起作用。进行了所有建议的更改后，最好的建议是通过在 log4j 配置中启用 Hibernate 日志记录和 Spring 框架日志记录（如果您使用的是 log4j）跟踪相关活动，以了解幕后发生的事情。

您的 log4j 配置文件将是这样的

```
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=<file-path>
log4j.appender.file.MaxFileSize=5MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Root logger
log4j.rootLogger=INFO, file

# Hibernate and Spring logging
log4j.logger.org.hibernate=DEBUG
log4j.logger.org.springframework.transaction=DEBUG 
```

这会给你一个清晰的画面。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T13:28:38.013

这是因为 Hibernate4。如果您像我首先应该做的那样查看 Hibernate4 DOC (:D) Hibernate4，那么您每次都有 openSession。我认为 Hibernate 的人做到了，所以像我这样的菜鸟每次都会被迫使用新的会话。因为会话不是线程安全的。仅供参考[Hibernate openSession() 与 getCurrentSession()](https://stackoverflow.com/questions/8046662/hibernate-opensession-vs-getcurrentsession)

# r - 水平线段

> ID：12433148
> 
> 赞同：0
> 
> 时间：2012-09-14T23:17:59.560
> 
> 标签：r, ggplot2

int_times

```
gene       lag     stim num
 a1  46.53000 173.5300   1
 a2 101.47000 162.5900   2
 a3  14.00000 259.0000   3
 a4   6.43276 134.1821   4
 a5  28.00000 182.0000   5
 a6  16.00000 198.0000   6 
```

这是我的gg代码

```
 ggplot(int_times,aes(x=stim,y= num,colour=gene)) +
       scale_y_continuous(labels=c('should not exist',int_times$gene)) +
       # geom_line(aes(position)) +
       geom_segment(aes(xend=length(stim),yend=.01)) +
       xlab('x') +
       ylab('y') +          
       opts(title = 'Multiple Gs') 
```

我不知道如何让 hline 工作，但我希望一切都像现在这样，除了每条线是它对应的 y 轴上的单独水平段 ![在此处输入图像描述](../Images/0219552ee6034b06dbd215a6610c42ba.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:26:57.337

看看这对你有什么作用：

```
 ggplot(int_times,aes(x=stim,y=gene ,colour=gene)) +
       geom_segment(aes(xend=length(stim),ystart=gene, yend=gene)) +
       xlab('x') +
       ylab('y') +          
       opts(title = 'Multiple Gs') 
```

Doug 我编辑并为 y 提供了基因，因为无论如何这似乎是你想要的 y 轴。

# r - 将区间转换为组

> ID：12433149
> 
> 赞同：1
> 
> 时间：2012-09-14T23:18:00.217
> 
> 标签：r

这可能被问到但我找不到类似的：有没有办法将间隔转换为组 ID，例如：

```
x <- data.frame(num = c(1:15))
x$int <- cut(x$num, 5) 
```

以便

```
x$group:
1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 
```

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T01:56:58.693

如果您指定，则可以避免`as.numeric()`后处理`labels = FALSE`：

```
> cut(x$num, 5, labels = FALSE)
 [1] 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 
```

的帮助页面`cut()`告诉我们有关标签的信息：`If labels = FALSE, simple integer codes are returned instead of a factor.`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T23:21:41.777

你是如此接近！

```
as.numeric(x$int)
#  [1] 1 1 1 2 2 2 3 3 3 4 4 4 5 5 5 
```

# xml - XML 有像 HTML5 这样的标准解析算法吗？

> ID：12433152
> 
> 赞同：0
> 
> 时间：2012-09-14T23:18:05.510
> 
> 标签：xml, html, xml-parsing, html-parsing

据我所知，HTML5 有标准的解析算法：

[http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html#parsing](http://www.whatwg.org/specs/web-apps/current-work/multipage/parsing.html#parsing)

但我没有找到对应的 XML。有吗？

我还为 XHTML 找到了一个。

[http://www.whatwg.org/specs/web-apps/current-work/multipage/the-xhtml-syntax.html#xml-parser](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-xhtml-syntax.html#xml-parser)

但与 HTML5 相比，它非常通用。和 XML 一样吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:11:32.940

[XML 在XML Specification (5th Edition)](http://www.w3.org/TR/2008/REC-xml-20081126/)中有一个非常明确的语法。所有 XML 解析器都应完全遵循该 CFG 以产生相同的解析结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T18:16:33.410

通常，规范编写者尽量避免包含算法：编写规范是为了定义每个可能输入的效果，而不限制实现者发明自己的算法以实现所需结果的能力。HTML5 包含算法的原因是承认失败；浏览器已经开发了许多奇怪的怪癖，以至于不再可能在抽象级别指定它们的行为，只能通过标准化实际算法来完成。

# ios - 出现键盘时应用程序在模拟器中崩溃

> ID：12433153
> 
> 赞同：0
> 
> 时间：2012-09-14T23:18:06.367
> 
> 标签：ios, xcode, ios-simulator, uikeyboard, xcode4.4

我有一个使用了一年多的应用程序，它一直运行良好。突然间，一旦出现键盘，它就开始在模拟器中崩溃。键盘从哪里出现并不重要。该应用程序仍然可以在我的设备上运行。

我正在使用 Xcode 4.4 和 iOS 5.1。几天前我确实在一个单独的目录中安装了 Xcode 4.5，也许这就是导致问题的原因。

这是我在控制台上遇到的错误，有人有解决方案吗？

```
Unable to load persistent store at URL 'file://localhost/Users/myusername/Library/Application%20Support/iPhone%20Simulator/5.1/Library/Keyboard/UserDictionary.sqlite' ({
metadata =     {
    NSPersistenceFrameworkVersion = 419;
    NSStoreModelVersionHashes =         {
        UserDictionaryEntry = <f0c9025b 602122f9 37a4e274 bdaacec1 b9a66f83 fca5c43b bed5e80a 6baee338>;
    };
    NSStoreModelVersionHashesVersion = 3;
    NSStoreModelVersionIdentifiers =         (
        ""
    );
    NSStoreType = SQLite;
    NSStoreUUID = "9CF44513-5DA9-4BB7-B88E-9C705D1874A5";
    "_NSAutoVacuumLevel" = 2;
};
reason = "The model used to open the store is incompatible with the one used to create the store";
})
2012-09-14 19:10:05.988 MyAppName[62761:4d13] Unable to load persistent store at URL     'file://localhost/Users/myusername/Library/Application%20Support/iPhone%20Simulator/5.1/Library/Keyboard/UserDictionary.sqlite' ({
metadata =     {
    NSPersistenceFrameworkVersion = 419;
    NSStoreModelVersionHashes =         {
        UserDictionaryEntry = <f0c9025b 602122f9 37a4e274 bdaacec1 b9a66f83 fca5c43b bed5e80a 6baee338>;
    };
    NSStoreModelVersionHashesVersion = 3;
    NSStoreModelVersionIdentifiers =         (
        ""
    );
    NSStoreType = SQLite;
    NSStoreUUID = "9CF44513-5DA9-4BB7-B88E-9C705D1874A5";
    "_NSAutoVacuumLevel" = 2;
};
reason = "The model used to open the store is incompatible with the one used to create the store";
})
2012-09-14 19:10:05.990 MyAppName[62761:4d13] Unable to load persistent store at URL 'file://localhost/Users/myusername/Library/Application%20Support/iPhone%20Simulator/5.1/Library/Keyboard/UserDictionary.sqlite' ({
metadata =     {
    NSPersistenceFrameworkVersion = 419;
    NSStoreModelVersionHashes =         {
        UserDictionaryEntry = <f0c9025b 602122f9 37a4e274 bdaacec1 b9a66f83 fca5c43b bed5e80a 6baee338>;
    };
    NSStoreModelVersionHashesVersion = 3;
    NSStoreModelVersionIdentifiers =         (
        ""
    );
    NSStoreType = SQLite;
    NSStoreUUID = "9CF44513-5DA9-4BB7-B88E-9C705D1874A5";
    "_NSAutoVacuumLevel" = 2;
};
reason = "The model used to open the store is incompatible with the one used to create the store"; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:09:52.007

我在这里找到了答案：

[XCode 4.3 无法加载持久存储 UserDictionary.sqlite](https://stackoverflow.com/q/11040681/472344)

我只需要重置模拟器。该问题可能是由安装 Xcode 4.5 引起的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T06:26:08.433

This work for me. You can also fixed this problem by selecting and clicking 'iOS Simulator' -> Reset Content and Settings.

# c++ - std::fill、std::copy 是否专门用于 std::vector ?

> ID：12433154
> 
> 赞同：16
> 
> 时间：2012-09-14T23:18:11.730
> 
> 标签：c++, vector, stl-algorithm, bitvector

在考虑这个[问题](https://stackoverflow.com/questions/12432084/fastest-way-to-modify-part-of-array)时，我开始怀疑`std::copy()`和/或`std::fill`是否专门（我的意思是优化）`std::vector<bool>`.

这是 C++ 标准所要求的，还是 C++ 标准库供应商常用的方法？

简单来说，不知道是不是下面的代码：

```
std::vector<bool> v(10, false);
std::fill(v.begin(), v.end(), true); 
```

在任何方面都比这更好/不同：

```
std::vector<bool> v(10, false);
for (auto it = v.begin(); it != v.end(); ++it) *it = true; 
```

非常严格 - 可以说：`std::fill<std::vector<bool>::iterator>()`进入内部表示`std::vector<bool>`并设置它们的整个字节而不是单个位？我认为交`std::fill`朋友`std::vector<bool>`对图书馆供应商来说不是一个大问题？

[更新]

`std::vector<bool>`下一个相关问题：如果还没有专门化，我（或其他任何人：）可以专门化这样的算法吗？这是 C++ 标准允许的吗？我知道这将是不可移植的 - 但仅适用于一个选定的标准 C++ 库？假设我（或其他任何人）找到了接触`std::vector<bool>`私处的方法。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-15T05:07:33.497

STD 是仅标头库，它随您的编译器一起提供。您可以自己查看这些标题。因为 GCC 的`vector<bool>` 执行是在`stl_bvector.h`. 对于其他编译器，它也可能是相同的文件。是的，有专门的`fill`（看附近`__fill_bvector`）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T01:05:37.253

标准中没有强制要求进行优化。如果可以应用优化，则假定这是一个“实施质量”问题。然而，大多数算法的渐近复杂度是有限的。

只要正确的程序按照标准要求运行，就可以进行优化。您询问的示例，即涉及使用迭代器 on 的标准算法的优化`std::vector<bool>`，几乎可以以实现认为合适的任何方式实现其目标，因为没有办法监控它们是如何实现的。这就是说，我非常怀疑. 上是否有任何标准库实现优化操作`std::vector<bool>`。大多数人似乎认为这种专业化一开始就令人憎恶，应该消失。

如果专业化涉及至少一种用户定义的类型，则仅允许用户创建库类型的专业化。我认为根本不允许用户在命名空间`std`中提供任何功能：没有任何需求，因为所有此类功能都将涉及用户定义的类型，因此可以在用户的​​命名空间中找到。`std::vector<bool>`表述方式不同：我认为您暂时无法优化算法。但是，您可能会考虑为开源实现贡献优化版本（例如`libstdc++`和`libc++`）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-26T07:59:53.457

它没有专门化，但您仍然可以使用它。（虽然很慢）

但这是我发现的一个技巧，它使用代理类`std::fill`启用。`std::vector<bool>``std::_Vbase`

（警告：我仅针对 MSVC2013 对其进行了测试，因此它可能不适用于其他编译器。）

```
int num_bits = 100000;
std::vector<bool> bit_set(num_bits , true);

int bitsize_elem = sizeof(std::_Vbase) * 8; // 1byte = 8bits

int num_elems = static_cast<int>(std::ceil(num_bits / static_cast<double>(bitsize_elem))); 
```

在这里，因为如果你使用一个元素的任何一个位，你就需要它的**整个位**，所以元素的数量必须**向上取整**。

使用这些信息，我们将构建一个**指针向量，**指向位下的原始元素。

```
std::vector<std::_Vbase*> elem_ptrs(num_elems, nullptr);

std::vector<bool>::iterator bitset_iter = bit_set.begin();
for (int i = 0; i < num_elems; ++i)
{
    std::_Vbase* elem_ptr = const_cast<std::_Vbase*>((*bitset_iter)._Myptr);
    elem_ptrs[i] = elem_ptr;
    std::advance(bitset_iter, bitsize_elem);
} 
```

`(*bitset_iter)._Myptr`: 通过取消引用 的迭代器`std::vector<bool>`，您可以访问代理类`reference`及其成员`_Myptr`。

由于返回类型`std::vector<bool>::iterator::operator*()`是`const std::_Vbase*`， 因此将它**的 constness 删除**`const_cast`。

现在我们得到指向这些位下面的原始元素的指针`std::_Vbase* elem_ptr`。

`elem_ptrs[i] = elem_ptr`: 记录这个指针，...

`std::advance(bitset_iter, bitsize_elem)`: ...并继续我们的旅程，通过跳跃前一个元素持有的位来寻找下一个元素。

```
std::fill(elem_ptrs[0], elem_ptrs[0] + num_elems, 0); // fill every bits "false"
std::fill(elem_ptrs[0], elem_ptrs[0] + num_elems, -1); // fill every bits "true" 
```

现在，我们可以使用`std::fill`指针向量，而不是位向量。

也许有些人可能会在外部使用代理类感到不舒服，甚至删除它的常量。

但是，如果您不关心这一点并且想要快速的东西，这是最快的方法。

我在下面做了一些比较。（做了新项目，没有改变配置，发布，x64）

```
int it_max = 10; // do it 10 times ...
int num_bits = std::numeric_limits<int>::max(); // 2147483647

std::vector<bool> bit_set(num_bits, true);
for (int it_count = 0; it_count < it_max; ++it_count)
{
    std::fill(elem_ptrs[0], elem_ptrs[0] + num_elems, 0);
} // Elapse Time : 0.397sec

for (int it_count = 0; it_count < it_max; ++it_count)
{
    std::fill(bit_set.begin(), bit_set.end(), false);
} // Elapse Time : 18.734sec

for (int it_count = 0; it_count < it_max; ++it_count)
{
    for (int i = 0; i < num_bits; ++i)
    {
        bit_set[i] = false;
    }
} // Elapse Time : 21.498sec

for (int it_count = 0; it_count < it_max; ++it_count)
{
    bit_set.assign(num_bits, false);
} // Elapse Time : 21.779sec

for (int it_count = 0; it_count < it_max; ++it_count)
{
    bit_set.swap(std::vector<bool>(num_bits, false)); // You can not use elem_ptrs anymore
} // Elapse Time : 1.3sec 
```

有一个警告。当您`swap()`将原始向量与另一个向量结合时，指针向量就变得无用了！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T01:00:22.663

23.2.5 [C++ 国际标准](http://www.open-std.org/jtc1/sc22/wg21/docs/papers/2005/n1905.pdf)中的类向量告诉我们

> 为了优化空间分配，提供了一个专门针对 bool 元素的向量：

之后提供 bitset 特化。就标准而言`vector<bool>`，供应商需要使用位集来实现它以优化空间。优化空间是有代价的，因为不优化速度。

如果一本书是在所有紧密装订在容器中的图书馆书籍之间，那么从图书馆取一本书比找到一本书更容易......

* * *

以你的例子为例，你正试图从头到尾做一个`std::fill`或`std::copy`。但情况并非总是如此，有时它不仅仅是简单地映射到整个字节。所以，这在速度优化方面有点问题。对于必须将每一位更改为 1 的情况很容易，这只是将字节更改为 0xF，但这里不是这种情况；如果您只更改字节的某些位，则会变得更加困难。然后你需要实际计算字节是什么；这不是一件小事^*，或者至少不是当前硬件上的原子操作。

这是过早的优化故事，它在空间方面很好，但在性能方面却很糟糕。

有一张`"is a multiple of 8 bits"`支票值得开销吗？我对此表示怀疑。

[* 我们这里说的是多位，对于只有一位的情况，你当然可以做位操作。]

# azure - 是否为 Windows Azure 网站中的每个网站分配了保留的 VM？

> ID：12433161
> 
> 赞同：0
> 
> 时间：2012-09-14T23:18:58.070
> 
> 标签：azure, virtual-machine

对于使用自定义 DNS，我想为我的 2 个 Windows Azure 网站从共享模式切换到保留模式。这些站点的流量很低，自定义 dns 是从共享升级到保留的唯一原因。

我想知道的是，当我为我的 2 个站点切换到保留模式时，azure 是分配 2 个小型 VM 实例（每个实例一个）还是它们共享一个公共小型 VM（单个）？

如果每个网站都有单独的虚拟机，是不是很贵？每个人 57 美元只是为了拥有自定义 DNS 吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:55:10.460

当您将一个网站升级到预留实例时，您会收到类似这样的通知，要求您将**当前区域中的所有站点**升级为预留模式：

![在此处输入图像描述](../Images/1f3e5c0d3b6f333c4ec48a49f3402279.png)

在我的示例中，我在北欧地区有 2 个网站，两个实例都将升级为保留模型。您将获得 1 个实例，其中包含您在该地区的所有网站。如果您想提高性能（假设您有 100 个站点），您可以简单地将新实例添加到预留容量（这可以在**扩展**菜单中完成）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T05:12:11.327

目前只有两种模式——免费/共享和保留，如果你想使用自定义域，你必须升级到保留模式。当我们推出新的“共享”模式时，这将很快改变。这种新的“共享”模式将支持自定义域。请稍后再回来查看。

# multithreading - NUnit 控制台中的错误：“不支持 STA 线程上的多个句柄的 WaitAll”

> ID：12433163
> 
> 赞同：1
> 
> 时间：2012-09-14T23:19:04.373
> 
> 标签：multithreading, nunit

与[此问题](https://stackoverflow.com/q/8065982/4794)类似，我升级到 NUnit 2.6 版，并开始收到线程错误。

> 不支持 STA 线程上的多个句柄的 WaitAll

测试在 NUnit GUI 下运行良好，但在控制台版本上失败。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:19:04.373

我猜新的 NUnit 控制台版本一定是从多线程单元模型切换到了单线程。无论如何，有一个命令行开关可以将其设置回 MTA。这是我的 NAnt 构建脚本中的相关部分。

```
<exec program="nunit-console.exe" if="${nunit-in-path}">
  <arg file="../ZaberConsole/ZaberConsoleTest.nunit"/>
  <arg value="/apartment=MTA"/>
</exec> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-08T16:02:12.773

或者尝试在程序集上设置[RequiresMTA](http://www.nunit.org/index.php?p=requiresMTA&r=2.5)属性。这对我有用。

# git - Mac 是否有 posh-git 等价物？

> ID：12433165
> 
> 赞同：28
> 
> 时间：2012-09-14T23:19:12.483
> 
> 标签：git, macos

我刚刚发现（并且非常喜欢）安装了 posh-git 模块的 PowerShell。我真的很喜欢在我的 Mac 上使用类似的东西。是否存在这样的等价物？

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-09-15T00:02:55.633

当然有一些方法可以获得类似于 posh-git 给你的特性。

例如，[安装`bash-completion`](https://github.com/bobthecow/git-flow-completion/wiki/Install-Bash-git-completion)使您能够`<tab>`完成 Git 命令。

安装`bash-completion`后，您可以将其添加到您的`.bash_profile`：

`PS1='\u@\h \W$(__git_ps1 " (%s)")\$ '`

这将在您的提示中包含当前分支名称：

`user@computer-name current-folder (branch-name)$`

您还可以将以下内容（在[此处](http://fedoraproject.org/wiki/Git_quick_reference)找到）添加到您的`.bash_profile`（在 PS1 之前）：

```
export GIT_PS1_SHOWDIRTYSTATE=true
export GIT_PS1_SHOWUNTRACKEDFILES=true 
```

这将在分支名称后添加标志以显示 repo 的当前状态：

```
user@computer-name current-folder (branch-name *)$ #Repo has modified files
user@computer-name current-folder (branch-name +)$ #Repo has staged files
user@computer-name current-folder (branch-name %)$ #Repo has untracked files 
```

您还可以使用以下命令启用 Git 着色：

`git config --global color.ui auto`

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2014-02-21T06:38:19.403

[我将 posh-git 模块移植为 shell 脚本](https://github.com/lyze/posh-git-sh)。

正如在上面的帖子中所建议的那样`redhotvengeance`，您应该安装`bash-completion`以获取 Git 命令的制表符补全。

# c# - 正则表达式使用

> ID：12433168
> 
> 赞同：0
> 
> 时间：2012-09-14T23:19:36.440
> 
> 标签：c#, regex, string

我有一个字符串，它是一个 REST 查询字符串，它看起来像这样

```
//new_requestSet?$select=new_ExternalStatus,new_name&$filter=new_ExternalStatusDirty eq true 
```

我正在使用StackOverFlow 上发布[的正则表达式类。](https://stackoverflow.com/questions/186653/c-sharp-indexof-the-nth-occurrence-of-a-string)在上面的输入字符串中找到一些位置效果很好，但我觉得提取我需要的实际值的代码效率低下。有没有更有效的方法使用正则表达式而不是 IndexOf 和 SubString？

```
int fieldPos = StringExtender.NthIndexOf(json, "filter=", 1);
            int firstSpace = StringExtender.NthIndexOf(json, " ", 1);
            int secondSpace = StringExtender.NthIndexOf(json, " ", 2);
            int entityPosEnd = StringExtender.NthIndexOf(json, @"\Set", 1);
            int searchFieldStart = StringExtender.NthIndexOf(json, "=", 2);
            string searchField = json.Substring(searchFieldStart + 1, firstSpace - searchFieldStart - 1);
            string criteria = json.Substring(secondSpace+1);
            string entity = json.Substring(0, entityPosEnd); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:56:20.567

捕获组应该会有所帮助。[http://msdn.microsoft.com/en-us/library/az24scfc.aspx#grouping_constructs](http://msdn.microsoft.com/en-us/library/az24scfc.aspx#grouping_constructs)

```
 var regex = new Regex(@"(?<name>[^=?&]+)=(?<value>[^&]+)");
    var results = regex.Matches(request);

    foreach (Match result in results)
    {
        Console.WriteLine("name: {0} - value: {1}", result.Groups["name"].Value, result.Groups["value"].Value);
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T00:31:41.573

您可以第一次通过“&”吐出字符串并接收参数名称/值对
然后通过“=”第二次拆分每对并接收参数名称/值的不同值。

您需要编写更多代码，但根本不需要正则表达式。

# c - 如何比较来自 gprof 的不同优化级别文件

> ID：12433169
> 
> 赞同：2
> 
> 时间：2012-09-14T23:19:45.537
> 
> 标签：c

大家，我正在运行 gprof 来检查两个不同优化级别（-g -pg 与 -O3 -pg）的执行时间百分比。

所以我得到的结果是，一个函数在 O3 中占用了 68% 的 exc-time，但在 -g 版本中只占用了 9%。

我不确定如何找出其背后的原因。我正在考虑在编译之前比较两个版本文件，但我不确定 cmd 是否可以这样做。

有没有其他方法可以找出这个执行时间差异的原因。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-19T00:15:00.560

当您使用优化标志时，您必须小心解释 gprof/profiling 结果。使用 -O3 编译确实可以改变代码的结构，因此 gprof 无法判断在哪里花费了多少时间。

特别是，启用更高优化级别的函数内联使得您的某些函数将完全被内联代码替换，因此它们似乎根本不需要任何时间。然后将花费在这些子函数中的时间归因于调用它们的父函数，因此看起来在给定父函数中花费的时间实际上增加了。

我找不到一个很好的参考。这是一个旧的例子：
[http](http://gcc.gnu.org/ml/gcc/1998-04/msg00591.html)
://gcc.gnu.org/ml/gcc/1998-04/msg00591.html 话虽如此，当使用-O3 运行gprof 时，我会预料到这种奇怪的行为。我总是只使用 -O1 优化来进行分析，以尽量减少这些影响。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:28:54.263

我认为您的推理存在一个根本缺陷：优化版本中执行时间的 68% 与未优化版本中的 9% 相比，这意味着未优化版本的性能更好。

相反，我很确定 -O3 版本在绝对值上表现更好，但优化器在其他功能上做得更好，因此，*与优化代码的其余部分成比例*，给定的子例程结果较慢 -但它实际上比未优化的版本更快 - 或者至少一样快。

不过，要直接检查发出的代码中的差异，您可以使用`-S`开关。另外，为了看看我的想法是否正确，您可以粗略地比较 -O0 与 -03 中的函数所花费的 CPU 时间，将该百分比乘以您的程序所花费的*用户*时间，该命令提供的命令如下`time`（另外，我很确保您可以获得在 gprof 中的子例程中花费的绝对时间的度量，IIRC 甚至在默认输出中也是如此）。

# iphone - iOS 6 - 处理顶部和底部的黑色条纹

> ID：12433172
> 
> 赞同：0
> 
> 时间：2012-09-14T23:20:05.433
> 
> 标签：iphone, ios, xcode, cordova

我使用 phonegap 2.0 开发移动应用程序。现在，iOS 6 出现了，但还没有新的 Ghonegap 版本。我想知道如何处理顶部和底部的（默认）黑色条纹，因为我的应用程序是为具有较小显示屏的 ios 5 系列设计的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T21:52:19.430

正如 Erez Rabih 指出的那样：

所有不包含该`Default-568h@2x.png`文件的应用程序都显示在一个信框中。包括`Default-568h@2x.png`将使您的应用程序填满 4 英寸视网膜设备的屏幕。

PhoneGap 的 Web 浏览器视图应填满屏幕。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:27:47.427

那么，在您有机会在新的 Phonegap 版本发布后有机会分发适用于 iOS6 的应用程序版本之前，它们肯定会保持黑色条纹吗？

# r - 参考查找后将 data.table 与其自身合并

> ID：12433175
> 
> 赞同：10
> 
> 时间：2012-09-14T23:21:03.193
> 
> 标签：r, data.table

如果我有`data.tables` `DT`and `neighbors`：

```
set.seed(1)
library(data.table)
DT <- data.table(idx=rep(1:10, each=5), x=rnorm(50), y=letters[1:5], ok=rbinom(50, 1, 0.90))
n <- data.table(y=letters[1:5], y1=letters[c(2:5,1)]) 
```

`n`是一个查找表。无论何时`ok == 0`，我都想查找相应`y1`的 in`n`并将该值用于`x`给定的值`idx`。举个例子，DT的第4行：

```
> DT
   idx          x y ok
1:   1 -0.6264538 a  1
2:   1  0.1836433 b  1
3:   1 -0.8356286 c  1
4:   1  1.5952808 d  0
5:   1  0.3295078 e  1
6:   2 -0.8204684 a  1 
```

`y1`来自`n`for`d`是`e`：_

```
> n[y == 'd']
   y y1
1: d  e 
```

第 4行`idx`是 1。所以我会使用：

```
> DT[idx == 1 & y == 'e', x]
[1] 0.3295078 
```

我希望我的输出与所有值都替换为相应的 n['y1']值`data.table`一样：`DT[ok == 0]``x``x`

```
> output
   idx          x y ok
1:   1  0.3295078 d  0
2:   2 -0.3053884 d  0
3:   3  0.3898432 a  0
4:   5  0.7821363 a  0
5:   7  1.3586800 e  0
6:   8  0.7631757 d  0 
```

我可以想出几种使用base R或`plyr`...的方法来做到这一点，也许周五晚些时候...但是无论这需要什么合并序列`data.table`都超出了我的范围！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-16T21:34:15.223

好问题。使用其他答案中的函数并将 Blue 的答案包装到一个函数`blue`中，以下如何。基准包括`setkey`所有情况下的时间。

```
red = function() {
    ans = DT[ok==0]
      # Faster than setkey(DT,ok)[J(0)] if the vector scan is just once
      # If lots of lookups to "ok" need to be done, then setkey may be worth it
      # If DT[,ok:=as.integer(ok)] can be done first, then ok==0L slightly faster

    # After extracting ans in the original order of DT, we can now set the key :
    setkey(DT,idx,y)
    setkey(n,y)

    # Now working with the reduced ans ...

    ans[,y1:=n[y,y1,mult="first"]]
    # Add a new column y1 by reference containing the lookup in n
    # mult="first" because we know n's key is unique, for speed (to save looking
    # for groups of matches in n). Future version of data.table won't need this.
    # Also, mult="first" has the advantage of dropping group columns (so we don't
    # need [[2L]]). mult="first"|"last" turns off by-without-by of mult="all".

    ans[,x:=DT[ans[,list(idx,y1)],x,mult="first"]]
    # Changes the contents of ans$x by reference. The ans[,list(idx,y1)] part is
    # how to pick the columns of ans to join to DT's key when they are not the key
    # columns of ans and not the first 1:n columns of ans. There is no need to key
    # ans, especially since that would change ans's order and not strictly answer
    # the question. If idx and y1 were columns 1 and 2 of (unkeyed) ans then we
    # wouldn't need that part, just
    #    ans[,x:=DT[ans,x,mult="first"]]
    # would do (relying on DT having 2 columns in its key). That has the advantage
    # of not copying the idx and y1 columns into a new data.table to pass as the i
    # DT. To save that copy y1 could be moved to column 2 using setcolorder first.

    redans <<- ans
    } 
```

```
crdt(1e5)
origDT = copy(DT)
benchmark(blue={DT=copy(origDT); system.time(blue())},
          red={DT=copy(origDT); system.time(red())},
          fun={DT=copy(origDT); system.time(fun(DT,n))},
          replications=3, order="relative")

test replications elapsed relative user.self sys.self user.child sys.child
 red            3   1.107    1.000     1.100    0.004          0         0
blue            3   5.797    5.237     5.660    0.120          0         0
 fun            3   8.255    7.457     8.041    0.184          0         0

crdt(1e6)
[ .. snip .. ]
test replications elapsed relative user.self sys.self user.child sys.child
 red            3  14.647    1.000    14.613    0.000          0         0
blue            3  87.589    5.980    87.197    0.124          0         0
 fun            3 197.243   13.466   195.240    0.644          0         0

identical(blueans[,list(idx,x,y,ok,y1)],redans[order(idx,y1)])
# [1] TRUE 
```

中`order`需要 ，`identical`因为在 tie 的情况下，`red`返回结果的顺序与`DT[ok==0]`while`blue`似乎是 order by相同。`y1``idx`

如果`y1`结果中不需要它，可以使用`ans[,y1:=NULL]`;立即将其删除（无论表格大小）即，这可以包含在上面以产生所要求的确切结果，而完全不影响时间。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-15T10:09:42.973

```
library(data.table)

crdt <- function(i=10){
 set.seed(1)
 DT <<- data.table(idx=rep(1:i, each=5), x=rnorm(5*i), 
                   y=letters[1:5], ok=rbinom(5*i, 1, 0.90))
 n <<- data.table(y=letters[1:5], y1=letters[c(2:5,1)])
} 

fun <- function(DT,n){
 setkey(DT,ok)
 n1 <- merge(n,DT[J(0),list(y,idx)],by="y")
 DT[J(0),x:=DT[paste0(y,idx) %in% paste0(n1[,y1],n1[,idx]),x]]
} 

crdt(10)
fun(DT,n)[J(0)]
     ok idx          x y
[1,]  0   1  0.3295078 d
[2,]  0   2 -0.3053884 d
[3,]  0   3  0.3898432 a
[4,]  0   5  0.7821363 a
[5,]  0   7  1.3586796 e
[6,]  0   8  0.7631757 d 
```

但是对于更大的 data.tables，它仍然很慢：

```
crdt(1e6)
system.time(fun(DT,n)[J(0)])
       User      System     elapsed 
      4.213       0.162       4.374 

crdt(1e7)
system.time(fun(DT,n)[J(0)])
       User      System     elapsed 
    195.685       3.949     199.592 
```

我有兴趣学习更快的解决方案。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-15T14:58:46.603

超级复杂的答案：

```
setkey(
    setkey(
        setkey(DT,y)[setkey(n,y),nomatch=0] #inner joins DT to n
    #matches the new x value by idx and y, and assigns it
    ,idx,y1)[setkey(J(idx,y,new.x=x),idx,y),x:=new.x] 
,ok)[list(0)] #pulls things where ok == 0 
```

看起来 Roland 的答案更适合较小的桌子，但我的最终会赶上更大的尺寸。不过，我还没有做很多检查。

```
> library(rbenchmark)
> benchmark(fun(DT,n)[J(0)],setkey(setkey(setkey(DT,y)[setkey(n,y),nomatch=0],idx,y1)[setkey(J(idx,y,new.x=x),idx,y),x:=new.x],ok)[list(0)])
                                                                                                                                  test
1                                                                                                                     fun(DT, n)[J(0)]
2 setkey(setkey(setkey(DT, y)[setkey(n, y), nomatch = 0], idx, y1)[setkey(J(idx, y, new.x = x), idx, y), `:=`(x, new.x)], ok)[list(0)]
  replications elapsed relative user.self sys.self user.child sys.child
1          100   13.21 1.000000     13.08     0.02         NA        NA
2          100   15.08 1.141559     14.76     0.06         NA        NA
> crdt(1e5)
> benchmark(fun(DT,n)[J(0)],setkey(setkey(setkey(DT,y)[setkey(n,y),nomatch=0],idx,y1)[setkey(J(idx,y,new.x=x),idx,y),x:=new.x],ok)[list(0)])
                                                                                                                                  test
1                                                                                                                     fun(DT, n)[J(0)]
2 setkey(setkey(setkey(DT, y)[setkey(n, y), nomatch = 0], idx, y1)[setkey(J(idx, y, new.x = x), idx, y), `:=`(x, new.x)], ok)[list(0)]
  replications elapsed relative user.self sys.self user.child sys.child
1          100  150.49 1.000000    148.98     0.89         NA        NA
2          100  155.33 1.032162    151.04     2.25         NA        NA
> 
```

# ms-word - 通过 Microsoft Office Word 将图片发布到博主

> ID：12433179
> 
> 赞同：2
> 
> 时间：2012-09-14T23:22:17.270
> 
> 标签：ms-word, blogger

我如何使用 MS Word 2013 将图片发布到 Bloogger

向我询问图片提供者

而且我不知道我的博客用于上传图片的 Provider 是什么

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T09:28:25.517

如果您使用 www.blogger.com （即 blogspot）写博客，那么您的图片托管将通过在线 picasa 网络相册进行。您需要在 picasa 上上传图片，然后将图片的 HTML 代码放在博客、堆肥模式和添加图片选项中。

# ruby-on-rails - 用于俄语符号的 Rails gsub

> ID：12433182
> 
> 赞同：2
> 
> 时间：2012-09-14T23:22:28.340
> 
> 标签：ruby-on-rails, ruby, gsub, cyrillic

在我的 Rails 应用程序中，我需要格式化我的字符串，使其仅包含字母，不包含符号。但主要问题是字符串是俄语的，那怎么办呢？对于 rnglish 和字母和数字，我这样做：

```
ArtLookup.get_analog(@articles.ART_ARTICLE_NR.gsub(/[^0-9A-Za-z]/, '')) 
```

但是如何为俄语字母做呢？（第一个是А，最后一个是Я）。只有字母，并删除空格？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T00:00:30.980

使用`\p{Cyrillic}`，它匹配任何西里尔字符。

例子：

```
1.9.3p194 :001 > s = "helloЯ"
 => "helloЯ" 
1.9.3p194 :002 > s.gsub(/\p{Cyrillic}/, '')
 => "hello" 
```

有关 Ruby 中特殊字符处理的更多信息：[http ://ruby-doc.org/core-1.9.3/Regexp.html](http://ruby-doc.org/core-1.9.3/Regexp.html)

**编辑答案：**

如果你只想要西里尔字母的一个子集，恐怕你必须建立自己的集合。

为此，您可以尝试使用 range: `/[а-я]+/i`，它应该可以工作。如果没有，只需明确指定您的字母表：`/[абвгдеёжзийклмнопрстуфхцчшщъыьэюя]+/i`

# bash - cd 到 bash 脚本中带有空格的未知目录名

> ID：12433190
> 
> 赞同：1
> 
> 时间：2012-09-14T23:23:27.817
> 
> 标签：bash, shell

我看过一些有类似问题的帖子，但我无法推断出一些解决方案来满足我自己的需求，所以我在这里。

我有一个简单的 shell 脚本，我需要它来 cd 到名称中带有空格的目录。目录每次都在同一个地方（`/home/user/topleveldir`），但目录名称本身对机器来说是唯一的，并且其中有一个空格（`/home/user/topleveldir/{machine1}\ dir/`, `/home/user/topleveldir/{machine2}\ dir/`）。我对在脚本中 cd 进入该唯一目录的最佳方法感到困惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:30:06.550

我不明白为什么像下面这样的东西不起作用

```
baseDir=/home/user/topleveldir
machine=<whatever machine name>
cd "$baseDir/$machine dir" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-14T23:33:20.890

您需要引用该空格字符，以便 shell 知道它是参数的一部分，而不是参数之间的分隔符。

如果您在脚本中的该命令行上直接有目录，请使用单引号。在单引号之间，除了单引号外，每个字符都按字面意思解释。

```
cd '/home/user/topleveldir/darkstar dir/' 
```

如果目录名称来自变量，请在命令替换周围使用双引号。**始终在命令替换周围使用双引号**，例如`"$foo"`. 如果省略引号，则变量的值将被拆分为单独的单词，这些单词被解释为 glob 模式——这是非常不可取的。

```
directory_name='darkstar dir'
…
cd "/home/user/topleveldir/$directory_name" 
```

# jakarta-ee - 重用第二个 EAR 文件的类

> ID：12433197
> 
> 赞同：1
> 
> 时间：2012-09-14T23:24:22.810
> 
> 标签：jakarta-ee, jboss, ear, reusability

使用 JBoss，我创建了两个单独的 EAR 文件：

EAR1 ----->

1.  网络

    *   成员控制器.java
    *   场地控制器.java
2.  ejb

    *   成员.java
    *   场地.java

EAR2 ----->

1.  网络
    *   成员控制器.java
2.  ejb
    *   成员.java

现在，对于 EAR2，我想通过从 EAR1 导入 Venue.java 和 VenueController.java 来扩展它们，而不必复制所有代码。

那可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T20:02:20.863

你在谈论 JBoss AS 7 吗？在 JBoss AS 7 中打包为顶级档案（例如 WAR、JAR 和 SAR）的应用程序被分配了以下模块名称：

部署。[档案名称]

在包含嵌套模块的应用程序（例如 EAR 存档）中，每个单独的存档都将使用以下分类分配一个模块名称：

deployment.[ear archive name].[sub deployment archive name]
例如，如果 Web 应用程序包含在存档 Ear1.ear 中，将使用以下名称进行部署：

部署.Ear1.ear.WebExample1.war

您可以在存档的 META-INF/MANIFEST.MF 中添加一个依赖项，该依赖项引用单独部署的 Web 应用程序：

**依赖：deployment.Ear1.ear.WebExample1.war**

作为替代方案，您可以添加一个**jboss-deployment-structure.xml**需要放置在 EAR1 的 META-INF 文件夹中：

```
<jboss-deployment-structure>
<sub-deployment name="WebExample2.war">
   <dependencies>
     <module name="deployment.Ear1.ear.WebExample1.war" />
    </dependencies>
</sub-deployment>
</jboss-deployment-structure> 
```

# python - 修改 virtualenv 以便安装在全局站点包中的包可用

> ID：12433198
> 
> 赞同：16
> 
> 时间：2012-09-14T23:24:58.663
> 
> 标签：python, virtualenv, virtualenvwrapper

> **可能重复：**
> [使用 virtualenv 恢复 `--no-site-packages` 选项](https://stackoverflow.com/questions/3371136/revert-the-no-site-packages-option-with-virtualenv)

我使用[virtualenvwrapper 文档](http://virtualenvwrapper.readthedocs.org/en/latest/index.html)创建了一个虚拟环境，如下所示：

```
$ pip install virtualenvwrapper
$ export WORKON_HOME=~/Envs
$ mkdir -p $WORKON_HOME
$ source /usr/local/bin/virtualenvwrapper.sh
$ mkvirtualenv env1 
```

它在大多数情况下都可以正常工作，但我遇到了一些 Django 问题，需要我在虚拟环境之外安装一些全局包。安装这些软件包后，如何更新我的虚拟环境以引入这些新软件包？还是我需要从头开始重新创建环境？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-14T23:48:09.693

这个问题是部分重复：[Revert the `--no-site-packages` option with virtualenv](https://stackoverflow.com/questions/3371136/revert-the-no-site-packages-option-with-virtualenv)

然而，由于这个问题特别提到了**virtualenvwrapper ，使用****virtualenvwrapper**时最简单的解决方案是简单地使用它的[`toggleglobalsitepackages`](http://virtualenvwrapper.readthedocs.org/en/latest/command_ref.html#toggleglobalsitepackages)命令：

```
$ toggleglobalsitepackages env1 
```

或者，您可以重新安装*virtualenv*，重新配置它以访问全局包，同时使用以下命令保留已安装的包：

```
$ mkvirtualenv --system-site-packages env1 
```

*（感谢@Adaephon 的提醒`toggleglobalsitepackages`）*

# google-app-engine - Google App Engine 上的 500 服务器错误

> ID：12433200
> 
> 赞同：1
> 
> 时间：2012-09-14T23:25:13.093
> 
> 标签：google-app-engine, rest, jax-rs

我正在使用 Eclipse + GAE 插件创建一些玩具 REST API。该应用程序在本地运行良好，但是当我在 Google App Engine 上成功部署代码时出现“500 服务器错误”。

我可以访问应用程序的“索引”页面，但 API 部分无法正常工作。

```
Error: Server Error

The server encountered an error and could not complete your request.
If the problem persists, please report your problem and mention this error message and the   query that caused it. 
```

以下是 App Engine 日志跟踪中的一些额外信息：

```
Uncaught exception from servlet
java.lang.IncompatibleClassChangeError: Implementing class
at com.google.appengine.runtime.Request.process-3ebd0f261ef448d0(Request.java)
at java.lang.ClassLoader.defineClass1(Native Method)
at java.lang.ClassLoader.defineClass(ClassLoader.java:634)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:142)
at java.net.URLClassLoader.defineClass(URLClassLoader.java:277)
at sun.reflect.GeneratedMethodAccessor5.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
at java.lang.reflect.Method.invoke(Method.java:616)
at java.lang.ClassLoader.loadClass(ClassLoader.java:266)
at com.sun.jersey.api.core.ScanningResourceConfig.init(ScanningResourceConfig.java:79)
at com.sun.jersey.api.core.PackagesResourceConfig.init(PackagesResourceConfig.java:104)
at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:78)
at com.sun.jersey.api.core.PackagesResourceConfig.<init>(PackagesResourceConfig.java:89)
at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:700)
at com.sun.jersey.spi.container.servlet.WebComponent.createResourceConfig(WebComponent.java:678)
at com.sun.jersey.spi.container.servlet.WebComponent.init(WebComponent.java:203)
at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:374)
at com.sun.jersey.spi.container.servlet.ServletContainer.init(ServletContainer.java:557)
at javax.servlet.GenericServlet.init(GenericServlet.java:212)
at org.mortbay.jetty.servlet.ServletHolder.initServlet(ServletHolder.java:440)
at org.mortbay.jetty.servlet.ServletHolder.doStart(ServletHolder.java:263)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at org.mortbay.jetty.servlet.ServletHandler.initialize(ServletHandler.java:685)
at org.mortbay.jetty.servlet.Context.startContext(Context.java:140)
at org.mortbay.jetty.webapp.WebAppContext.startContext(WebAppContext.java:1250)
at org.mortbay.jetty.handler.ContextHandler.doStart(ContextHandler.java:517)
at org.mortbay.jetty.webapp.WebAppContext.doStart(WebAppContext.java:467)
at org.mortbay.component.AbstractLifeCycle.start(AbstractLifeCycle.java:50)
at com.google.tracing.TraceContext$TraceContextRunnable.runInContext(TraceContext.java:452)
at com.google.tracing.TraceContext$TraceContextRunnable$1.run(TraceContext.java:458)
at com.google.tracing.TraceContext.runInContext(TraceContext.java:698)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContextNoUnref(TraceContext.java:336)
at com.google.tracing.TraceContext$AbstractTraceContextCallback.runInInheritedContext(TraceContext.java:328)
at com.google.tracing.TraceContext$TraceContextRunnable.run(TraceContext.java:456)
at java.lang.Thread.run(Thread.java:679) 
```

原因是什么？有任何想法吗？谢谢大家！

# .net - 如何在具有多种类型的 VB.Net 中使用 WhenAny？

> ID：12433207
> 
> 赞同：0
> 
> 时间：2012-09-14T23:26:07.850
> 
> 标签：.net, async-await

我想使用`Task.WhenAny()`具有不同返回类型但具有共同基本类型的任务列表。我将用于`Await`获取第一个就绪响应并将其从基本类型转换为我需要的任何类型。例如，一个可能是`Task(of ClassDerived1)`另一个`Task(of ClassDerived1)`，但我将调用 Task.WhenAny(of ClassBase)。

可以做到吗？ `WhenAny`据我所知，不支持协方差。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:37:10.063

实际上，它是`Task<T>`不支持方差的类型（因为没有`ITask<T>`类型）。我遇到了同样的问题，这*很*烦人。

不幸的是，没有理想的解决方案。我只是从中获取平原`Task`，`WhenAny`然后`as`将其转换为适当的类型。

**从 svick 的评论更新：**如果您可以让每个输入任务成为 a `Task<ClassBase>`，那么您可以`Task<ClassBase>`从`WaitAny`.

如果你想发疯，你可以定义自己的（等待的）`IMyTask<out T>`接口，将任务包装到其中，并定义自己的`WaitAny`. 或者做所有的任务`Task<dynamic>`。我还没有尝试过像这样疯狂的东西。:)

# ruby - 如何添加二进制数据来抑制 POST

> ID：12433208
> 
> 赞同：5
> 
> 时间：2012-09-14T23:26:22.360
> 
> 标签：ruby, curb

我正在尝试使用 Curb gem 对 Parse Cloud 执行以下 POST

```
curl -X POST \
  -H "X-Parse-Application-Id: PARSE_APP_ID" \
  -H "X-Parse-REST-API-Key: PARSE_API_KEY" \
  -H "Content-Type: image/jpeg" \
  --data-binary '@myPicture.jpg' \
  https://api.parse.com/1/files/pic.jpg 
```

有了这个：

```
curl = Curl::Easy.new("https://api.parse.com/1/files/lion.jpg")
curl.multipart_form_post = true
curl.headers["X-Parse-Application-Id"] = PARSE_APP_ID
curl.headers["X-Parse-REST-API-Key"] = PARSE_API_KEY
curl.headers["Content-Type"] = "image/jpg"
res = curl.http_post(Curl::PostField.file('file', image.path)) 
```

上传通过 201，但该文件似乎没有正确地将其上传到服务器。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-14T23:51:22.170

弄清楚了：

```
curl = Curl::Easy.new("https://api.parse.com/1/files/lion.jpg")
curl.headers["X-Parse-Application-Id"] = PARSE_APP_ID
curl.headers["X-Parse-REST-API-Key"] = PARSE_API_KEY
curl.headers["Content-Type"] = "image/jpeg"
data = File.read('/Users/haider/Pictures/lion.jpg')
curl.post_body=data
curl.http_post
puts curl.body_str 
```

# iphone - 碰撞组过滤器在 Box2D 中不起作用

> ID：12433211
> 
> 赞同：0
> 
> 时间：2012-09-14T23:26:43.373
> 
> 标签：iphone, objective-c, cocos2d-iphone, box2d

我正在使用 Box2D 在 Cocos2d 中开发游戏。目前我已经建立了一个有一些界限的系统。他们是为了一个球。我希望流星从屏幕外进入并击打球。

边界在我的 init 方法中定义如下：

```
 // Define the ground body.
    b2BodyDef groundBodyDef;
    groundBodyDef.type = b2_staticBody;
    groundBodyDef.position.Set(0, 0); // bottom-left corner

    // Call the body factory which allocates memory for the ground body
    // from a pool and creates the ground box shape (also from a pool).
    // The body is also added to the world.
    b2Body* groundBody = world->CreateBody(&groundBodyDef);

    // Define the ground box shape.
    b2PolygonShape groundBox;       

    // bottom
    groundBox.SetAsEdge(b2Vec2(0,0), b2Vec2(screenSize.width/PTM_RATIO,0));
    groundBody->CreateFixture(&groundBox,0);

    // top
    groundBox.SetAsEdge(b2Vec2(0,screenSize.height/PTM_RATIO), b2Vec2(screenSize.width/PTM_RATIO,screenSize.height/PTM_RATIO));
    groundBody->CreateFixture(&groundBox,0);

    // left
    groundBox.SetAsEdge(b2Vec2(0,screenSize.height/PTM_RATIO), b2Vec2(0,0));
    groundBody->CreateFixture(&groundBox,0);

    // right
    groundBox.SetAsEdge(b2Vec2(screenSize.width/PTM_RATIO,screenSize.height/PTM_RATIO), b2Vec2(screenSize.width/PTM_RATIO,0));
    groundBody->CreateFixture(&groundBox,0);

    //Collision filter stuff here. Not working.
    b2Filter filter;
    filter.groupIndex = -2;
    groundBody->GetFixtureList()[0].SetFilterData(filter); 
```

我的球定义如下：

```
 //Physics object.
    b2BodyDef ballBodyDef;
    ballBodyDef.position.Set(ball.position.x/PTM_RATIO, ball.position.y/PTM_RATIO);
    ballBodyDef.type = b2_dynamicBody;
    ballBodyDef.userData = ball;
    ballBodyDef.bullet = true;
    ballBody = world->CreateBody(&ballBodyDef);

    b2CircleShape ballShape;
    ballShape.m_radius = 10.0/PTM_RATIO;
    b2FixtureDef ballFix;
    ballFix.restitution = 1.1f;
    ballFix.density  = 0.0f;
    ballFix.shape = &ballShape;
    ballBody->CreateFixture(&ballFix); 
```

流星是用两种方法制作的，较短的方法是放置流星。较长的人实际上使用较短的人给出的点来创建它们：

```
-(void)createMeteorAtPoint:(CGPoint)point {
    //Create particle sprite representation.
    CCParticleMeteor *meteor = [[CCParticleMeteor alloc] initWithTotalParticles:200];
    meteor.gravity = ccp(-200,0);
    meteor.life = 0.5;
    meteor.lifeVar = 0.25;
    meteor.position = point;
    meteor.tag = 2;
    meteor.startSize = 5.0;
    meteor.startSizeVar = 3.0;
    [self addChild:meteor];

    //Make meteor physics body.    
    b2BodyDef meteorBodyDef;
    meteorBodyDef.position.Set(point.x/PTM_RATIO, point.y/PTM_RATIO);
    meteorBodyDef.type = b2_dynamicBody;
    meteorBodyDef.userData = meteor;
    b2Body *meteorBody = world->CreateBody(&meteorBodyDef);
    meteorBody->SetBullet(true);

    b2CircleShape meteorShape;
    meteorShape.m_radius = 7.5/PTM_RATIO;
    b2FixtureDef meteorFix;
    meteorFix.shape = &meteorShape;
    meteorFix.density = 1;

    //Give it the same negative group index of the boundaries to prevent collision.
    //Not working.
    meteorFix.filter.groupIndex = -2;

    meteorBody->CreateFixture(&meteorFix);

    //Give it a motion.
    b2Vec2 F;
    F.Set(CCRANDOM_0_1()*2, 0);
    meteorBody->SetLinearVelocity(F);
}

//Create a bunch of meteors that will sweep from left to right.
-(void)createMeteors {
    for (int i = 0; i < 8*40; i += 20) {
        [self createMeteorAtPoint:ccp(-40.0f, i + 2)];
    }
    NSLog(@"HERE");
} 
```

我可以看到物理对象堆积在屏幕的一侧，因为我设置了调试标志。但是一个：尽管是相同的负组指数，但他们并没有越过边界。第二：球决定它不喜欢右边的墙，然后穿过它。

如果你认为我遗漏了一些重要的东西，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:19:17.210

只有一个边界装置的组索引为 -2（底部）。您可以像这样遍历身体的所有固定装置：

```
for (b2Fixture* f = body->GetFixtureList(); f; f = f->GetNext())
{
    //do something with the fixture 'f'
    f->SetFilterData(...);
} 
```

我不确定为什么球会忽略任何墙壁（除非你通过在球和墙壁所属的地面之间创建鼠标关节来移动它，并且关节设置为不碰撞连接的物体.. . 但在这种情况下，球将忽略*所有*墙壁，并且仅在移动时）。

# jquery-ui-sortable - jquery-ui, Choppy 拖入 sortable 中 sortable

> ID：12433220
> 
> 赞同：1
> 
> 时间：2012-09-14T23:27:43.383
> 
> 标签：jquery-ui-sortable, jquery-ui-draggable

我[在这里的示例代码（jsBin）](http://jsbin.com/ehujej/2/edit)，我无法顺利将项目拖入innerSortable。

将项目拖出 innerSortable 工作正常，在 innerSortable 内拖动工作正常，但是当我尝试将项目从外部可排序拖动到内部排序时有点不稳定。

对我来说看起来像一个 jquery-ui 可排序的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-05T22:14:49.277

不要尝试将 sortables 嵌套在其他 sortables 中。

# javascript - delete 关键字对全局变量的不同行为

> ID：12433223
> 
> 赞同：6
> 
> 时间：2012-09-14T23:28:02.480
> 
> 标签：javascript

请考虑以下代码段（[此处](http://jsfiddle.net/5ej28/)为小提琴）：

```
​var a;

​a = 1;
console.log(delete a​); // prints 'false'

​b = 1;
console.log(delete b);​ // prints 'true'​​​​ 
```

为什么`delete`关键字在全局变量`a`和上的行为不同`b`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T23:32:36.353

[来自 MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)：

> 删除操作符从对象中删除一个属性。

全局变量（不带`var`）是全局对象（通常是`window`）的属性，因此可以删除。

A`var`不是全局变量，而是外部范围内的局部变量——不是全局对象的属性——所以`delete`不会删除它。从那些文档中：

```
x = 42;     // creates the property x on the global object
var y = 43; // declares a new variable, y

delete x;   // returns true  (x is a property of the global object and can be deleted)
delete y;   // returns false (delete doesn't affect variable names) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T23:32:49.807

MDN 说只有当属性存在并且不能被删除时，delete 才会返回 false。它在所有其他情况下返回 true。删除后，尝试测试实际值。你会看到它`a`没有被删除。这是因为，正如 MDN 页面所说，`delete`不会影响变量名。

> 它对变量或函数名称没有影响。

（即，使用全局对象定义`var`而不脱离全局对象）

查看下一页上的示例。 [https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/delete)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T23:56:37.250

来自[关于 var 的 Mozilla 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/var)：

*不同之处在于声明的变量是全局对象的不可配置属性，而未声明的变量是可配置的。*

`var a;`--> 这是一个声明的变量，因为你使用的是`var`，所以它是不可配置的。

`a = 6;`--> 这是一个未声明的变量，因为你没有使用`var`，所以它是可配置的。

上面的两种语法都会以一个名为`a`attach 的 var 作为全局对象的属性结束（`window`通常），并且 properties 具有以下属性：

*   **可写**。如果为 false，则无法更改该属性的值。
*   **可配置**。如果为 false，则任何删除属性或更改其属性（可写、可配置或可枚举）的尝试都将失败。
*   **可枚举**的。如果为 true，则当用户执行 for (var prop in obj){} （或类似）时，该属性将被迭代。

它是从[ecmascript5 对象和属性](http://ejohn.org/blog/ecmascript-5-objects-and-properties/)中提取的，正如您所读到的，所讨论的变量的`configurable`属性会影响该变量是否可以被删除。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-27T13:07:38.637

“var a”表示无法从当前块之外的任何地方访问它，因此删除它意味着*UNDECLARE*（与未定义不同），从而允许在同一块中再次写入“var a”（错误）*。*

允许的用法（MDN）：

```
delete object.property 
delete object['property'] 
delete object[index] 
delete property 
```

这就像 GOTO 和非结构化编程，您可能需要手动清理资源，它有点像 C 中的 ~Destructor（虽然不一样）。你可以删除一个像 ~a(); 这样的对象。但你不能像“int i”那样“'UNDECLARE'一个变量”。

# android - Paypal 是否在 Android 应用程序中处理信用卡/借记卡而不登录到 paypal 帐户？如何处理？

> ID：12433225
> 
> 赞同：0
> 
> 时间：2012-09-14T23:28:08.847
> 
> 标签：android, paypal

好的，我今天打电话给 paypal，问他们是否可以通过移动应用程序使用借记卡/信用卡。他们说不。但是，网上的人写它就像有办法一样。

此外，我给一家移动公司发了一封电子邮件，假装我对向他们提供我的卡信息感到不安全，并询问他们如何通过他们的应用程序获取信用卡/借记卡，他们回答说他们为此使用了 Paypal！

所以我很困惑。这里有没有人在没有登录 Paypal 的情况下在 android 中使用信用卡/借记卡付款？

我到处搜索，包括在stackoverflow中：

[通过贝宝/信用卡进行 Android 支付处理](https://stackoverflow.com/questions/6428943/android-payment-processing-through-paypal-credit-card)

但我仍然不确定。任何人都可以有一个明确的答案，而不仅仅是将我发送到其他一些链接。

更新：似乎可以做到这一点，有没有人有关于如何做到这一点的教程？

更新 2：我放弃了尝试这样做的贝宝。我现在使用zooz。我强烈建议任何陷入让贝宝为他们使用zooz的麻烦的人。它太容易了。顺便说一句，我不为 zooz 工作，我将它们用于我的应用程序。他们的网站是zooz.com

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:46:35.403

可以通过您的移动设备进行 PayPal 付款，这也不是那么困难。只需使用 PayPal 支付并将其支付网关（网页）嵌入到 WebView 中。您可以选择通过 IPN 接收反馈，并向您的应用程序触发 GCM 事件。

不，您将无法获取客户的信用卡号和其他信息，将其提供给 PayPal 并处理付款。但使用 PayPal 的重点是，获取、传输和存储该信息的所有安全性（包括安全处理信息所带来的重大责任！）是 PayPal 的责任，而不是您的责任。

请记住，如果您使用 PayPal 为您的应用程序或应用程序内的数字内容收费，您将违反 Google Play/Market TOS。但是，如果您正在创建购物应用程序，则应该没问题。

# python - 将 ID 映射到名称并删除重复的算法开发

> ID：12433227
> 
> 赞同：0
> 
> 时间：2012-09-14T23:28:42.823
> 
> 标签：python, algorithm, csv

我在 CSV 文件中有一个列，其名称使得该列中的每个单元格都可能与一个稍微拼写错误的单元格相同。例如，“耐克”可能与“耐克公司”相同。可能与“Nike Inc”相同。

**我当前的脚本**

我已经用 Python 编写了一个程序，如果该值在列中作为前缀或后缀出现超过 2 次，则从每个单元格中删除前缀和后缀。在此列中按字母顺序排序后，我将一行与下一行进行了比较。

**我目前的问题**

仍有许多单元格实际上是其他单元格的副本，但它们并未如此表示。这些示例是：a) 不完全匹配（并且不仅仅是大写） b) 通过比较其词干（无前缀和无后缀）与其按字母顺序排列的邻居没有发现

**我目前的问题**

1) 有没有人有将 ID 映射到来自世界各地的名称的经验（所以口音、unicode 和所有这些东西在这里也是一个问题，尽管我设法解决了大多数这些 un​​icode 问题）并且对算法开发有很好的想法这里没有列出？

2）在某些没有拾取重复的情况下，我知道为什么我知道它们是重复的。在一种情况下，一行中间有一个句点，该句点在其不包含句点的兄弟单元格中不存在。根据我知道为什么我知道它的少数实例，简单地创建一个额外的列并输出我怀疑是重复的单元格值是一种好策略吗？

3) 我如何检查自己？一种方法是标记潜在重复的最大数量并手动查看所有这些。不幸的是，我们的数据集的大小并没有使它非常漂亮，也不是很可行......

感谢您的任何帮助，您可以提供！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:42:41.920

尝试音译名称，删除所有国际符号，然后考虑使用类似`soundex`或[http://en.wikipedia.org/wiki/Levenshtein_distance](http://en.wikipedia.org/wiki/Levenshtein_distance)的函数（例如[http://pypi.python.org/pypi/Fuzzy](http://pypi.python.org/pypi/Fuzzy)）计算文本相似度。

# c - 为什么从控制台读取字符并存储在数组中时会出现分段错误？

> ID：12433229
> 
> 赞同：0
> 
> 时间：2012-09-14T23:28:53.980
> 
> 标签：c, arrays, memory-management, segmentation-fault, dynamic-memory-allocation

我正在尝试编写一个程序，它将字符从标准输入读取到字符数组中，这样我就可以对该数组执行其他操作。我编写了程序，以便在需要时为数组动态分配更多内存。但是，一旦我结束程序的输入，我总是会遇到分段错误。

笔记：

*   我使用 int 而不是 char 来存储正在读取的字符，所以我相信与 EOF 的比较应该是有效的？
*   这`ch == 'l'`条线就在那里，因为我厌倦了按两次 Ctrl+D，一旦我解决了这个问题，它就会被删除。

以下是在 main 中，在程序开头带有 stdlib/stdio #included：

```
int arrCount = 0, arrSize = 200, ch, key_data_len;
char* input = malloc(arrSize * sizeof(char));

printf("Input is an array of %d characters that takes up %d bytes.\n", arrSize, arrSize * sizeof(char));

// Add characters to array until input is finished.
while ( (ch = (int) getchar()) != '\0' && ch != EOF) {
  if(arrCount >= arrSize)
  { 
    printf("GOT IN IF STATEMENT.");
    // If the array has not been initialized, fix that.
    if (arrSize == 0)
      arrSize = 200 * sizeof(char);

    // Make the reallocation transactional by using a temporary variable first
    char *_tmp = (char *) realloc(input, (arrSize *= 2));

    // If the reallocation didn't go so well, inform the user and bail out
    if (!_tmp)
    {
      fprintf(stderr, "ERROR: Couldn't realloc memory!\n");
      return(-1);
    }

    // Things are looking good so far
    input = _tmp;
  }

  printf("\narrCount = %d; ch = %c; sizeof(ch) = %d\n", arrCount, ch, sizeof(ch));
  input[arrCount++] = ch;

  printf("&input[%d] = %p\n", arrCount-1, &input[arrCount - 1]);
  printf("input[%d] = %c\n", arrCount - 1, input[arrCount - 1]);
  if (ch == 'l') {
    break;
  }
} 
```

示例输出：

> ... $ ./db
> 
> 输入是一个包含 200 个字符的数组，占用 200 个字节。
> 
> **tl**
> 
> arrCount = 0; ch = t; sizeof(ch) = 4
> 
> &输入[0] = 0x827a008
> 
> 输入[0] = t
> 
> 输入[0] = t
> 
> arrCount = 1; ch = l; sizeof(ch) = 4
> 
> &输入[1] = 0x827a00a
> 
> 输入[1] = l
> 
> 输入[1] = t
> 
> 分段故障

可能与此相关的其他内容：我注意到如果我为输入数组输入了足够的字符以达到索引 399 / 大小 400，也会弹出此错误：

```
*** glibc detected *** ./db: realloc(): invalid old size: 0x08a73008 *** 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T23:33:29.603

这是错误的，您正在释放刚刚分配的数组：

```
input = _tmp;
free(_tmp); 
```

你根本不需要`free`-`realloc`为你做。

# css - 固定左右列，Liquid Middle 无法跨越整个页面

> ID：12433230
> 
> 赞同：3
> 
> 时间：2012-09-14T23:28:58.657
> 
> 标签：css, templates, html, dreamweaver

我试图*不*使用 adobe 预定义的 CSS 模板，而是创建自己的。我有一个 130px 高度的标题，我想跨越整个宽度。在此之下，我想在页面的最左边和最右边固定 150px 的列。中间，我想跨越浏览器的整个宽度。所有这些都包含在一个“容器”div 中。

我的标题很好，向左浮动，宽度 = 100%。接下来，左列宽 = 150px 并向左浮动。没问题。然后，当我向左浮动时，“内容”出现在它应该在的位置。然后 150px 宽的右列也向左浮动。

我将内容（中间 div）宽度设置为多少？如果我执行 100%，它会将其放在左列下方 - 即使我在两侧设置 150 像素的边距以容纳列。如果我做“自动”，它也会破坏水平完整性。现在它是 70%，这使得它们都排成一行，但在大分辨率下不会占据全屏。（我设置了最小宽度）。这似乎应该是一个简单的解决方法——我的直觉是它与容器 div 的“绝对”定位有关。感谢您的任何想法/帮助。

这是该页面的链接：

[http://www.mynextbit.com/Fifty%20Stars%20Thirteen%20Stripes/index.html](http://www.mynextbit.com/Fifty%20Stars%20Thirteen%20Stripes/index.html)

这是我的代码：

```
.container {
float: left;
height: auto;
padding: 0px;
margin: 0px;
left: 0px;
top: 0px;
clip: rect(0px,auto,auto,0px);
position: absolute;
width: auto;
min-width: 1024px;
}
.header {

}
.leftcol {
width: 150px;
float: left;
text-align: center;
}
.content {
height: auto;
float: left;
text-indent: 10px;
overflow: scroll;
width: 70%;
min-width: 700px;
}
.rightcol {
float: left;
width: 150px;
clear: none;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-14T23:42:29.407

更改 div 的顺序。

```
<div class="leftcol"></div>
<div class="rightcol"></div>
<div class="content"></div> 
```

然后在 CSS 中将右列更改为

```
.rightcol { float: right; } 
```

从内容 div中删除`float: left;`and `width: 70%;`（无浮动，无宽度）

~~这是一个小提琴：[jsfiddle.net/D4fPh/](http://jsfiddle.net/D4fPh/)~~

**2014 年9 月 17 日**- 更新可执行代码段：

```
@charset "utf-8";
/* CSS Document */

.container {
    float: left;
    height: auto;
    padding: 0px;
    margin: 0px;
    left: 0px;
    top: 0px;
    clip: rect(0px,auto,auto,0px);
    position: absolute;
    width: auto;
    min-width: 1024px;
}
.header {
    /* [disabled]float: left; */
    /* [disabled]height: 130px; */
    width: 100%;
}
.leftcol {
    /* [disabled]height: auto; */
    width: 150px;
    float: left;
    text-align: center;
    /* [disabled]position: absolute; */
    /* [disabled]left: 0px; */
    /* [disabled]top: 130px; */
    /* [disabled]clear: left; */
    /* [disabled]min-width: 150px; */
    /* [disabled]max-width: 160px; */
}
.content {
    height: auto;
    text-indent: 10px;
    overflow: scroll;
    /* [disabled]margin-left: 150px; */
    /* [disabled]margin-right: 150px; */
    min-width: 700px;
}
.rightcol {
    float: right;
    /* [disabled]height: auto; */
    width: 150px;
    clear: none;
    /* [disabled]min-width: 150px; */
    /* [disabled]max-width: 160px; */
}

body {
    background-image: url(../Fifty%20Stars%20Thirteen%20Stripes/fsts_banner_repeatstripes.png);
    background-repeat: repeat-x;
}
leftcollinks {
    color:#710808;
    text-align:center;
    font-family:"Palatino Linotype", "Book Antiqua", Palatino, serif;
    font-size:16px;
    line-height:1.8;
    font-weight:bold;
}
p {
    margin-left:15px;
    margin-right: 15px;
    font-family: Tahoma, Geneva, sans-serif;
}
```

```
<html xmlns="http://www.w3.org/1999/xhtml"><!-- InstanceBegin template="/Templates/Template_FSTS_Main.dwt" codeOutsideHTMLIsLocked="false" --><head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<!-- InstanceBeginEditable name="doctitle" -->
<title>Fifty Stars Thirteen Stripes</title>
<!-- InstanceEndEditable -->

<!-- InstanceBeginEditable name="head" -->
<style type="text/css">
body {
    background-image: url(fsts_banner_repeatstripes.png);
}
</style>
<!-- InstanceEndEditable -->
<link href="styles.css" rel="stylesheet" type="text/css">
<link type="text/css" rel="stylesheet" href="chrome-extension://cpngackimfmofbokmjmljamhdncknpmg/style.css"><script type="text/javascript" charset="utf-8" src="chrome-extension://cpngackimfmofbokmjmljamhdncknpmg/page_context.js"></script></head>

<body screen_capture_injected="true">
<div class="container">
  <div class="header"><img src="fsts_banner_name.png" width="400" height="130" alt="Fifty Stars Thirteen Stripes"></div>

  <div class="leftcol"><leftcollinks>
    American Politics<br>
    The Media<br>
    History<br>
    Economy<br>
    Education<br>
    Foreign Policy<br>
    Philosophy<br>
    Social Programs<br>
    Faith & Religion<br>
    U.S. Departments<br>
    Science & Tech<br>
    Books & Resources<br>
    Miscellaneous<br>
      <font color="#060648">
    About FSTS</font></leftcollinks><br>
  </div>
  <!-- InstanceBeginEditable name="EditRegion3" -->
  <div class="rightcol"><leftcollinks>
    American Politics<br>
    The Media<br>
    History<br>
    Economy<br>
    Education<br>
    Foreign Policy<br>
    Philosophy<br>
    Social Programs<br>
    Faith & Religion<br>
    U.S. Departments<br>
    Science & Tech<br>
    Books & Resources<br>
    Miscellaneous<br>
      <font color="#060648">
    About FSTS</font></leftcollinks><br></div><div class="content">
    <p>I've been thinking. That's the first good. For 31 years I haven't been...</p>
    <p>I'm writing this on a typical foggy evening in Monterey, California during the middle of September. I'm staring at a stack of books on my desk, each of them unread for reasons that have defined the first three decades of my life. Reasons I'm not proud of, and have little or nothing to show for. Forgiving myself is harder than I would have expected. However, self pity it seems, will lead me nowhere - something I learned recently from a man I like to call myself. </p>
    <p>What is it I want? Knowledge? To do what with? Would I be satisfied with reading every good book, article, newspaper and documentary in the world? To be filled with that much knowledge must be empowering, but logic says that's not enough. The man who invented the wrench didn't do it so he could hang it on a wall. He designed and manufactured it to serve a purpose. What good is knowledge if it doesn't serve a purpose? Knowledge must serve as a tool to create, to think, to design, to perform, to <i>do</i> something. Otherwise, the capacity of our brain has been wasted. Have I come to the right conclusion?</p>
    <p>'Tis a crafty trap, the world has sprang on the minds of society. We've become content with settling on another man's reasoning. Television, the internet, even the Government is happy to do the hard work for us. They'll simply tell us what to think by embedding a message behind a nice face, some modern special effects, feelings, anything at all to hold our attention. How many people know who their congressman is? What laws have gone into effect in your area in the past couple years? Which 2012 Presidential candidate better reflects your values? Is voting important? Could you explain why? How many of us know when the last U.S. servicemember died overseas? Where do your tax dollars go? If you don't know any of that but you know who Justin Beiber is dating - you're a victim of the trap. You've been conditioned to believe that Justin Beiber is important. How many of us work a dead-end job, and yet spend our free time watching "our shows" and opinion-filled news, playing video games, partying, etc? Worse yet, how many of us have no job at all and do the same thing?</p>
    <p>Well, if that is the world you desire, you can have it. I'm leaving it and never going back. I cannot fathom the hours, days, years I've wasted filling the mold of what today's America wanted me to be. I had no idea how to use my brain. I didn't know what I wanted, so I let someone else tell me. I didn't have values, morals, or principles that I derived on my own so I listened to the first shmuck with a smile and adopted his. I felt before I thought, and  it's brought me down a road of self pity and guilt. I didn't know whose standard I was trying to live up to, but I knew I was always falling short. I was never quite satisfied with life. </p>
    <p> More to follow...</p>
  </div>
  <!-- InstanceEndEditable -->

 </div>

<!-- InstanceEnd -->
</body></html>
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T08:07:59.750

.content 将通过这个 css 缩放高度以适应您的所有内容：

```
.header {
    position: absolute;
    width: 100%;
    height: 130px;
    top: 0;
    left: 0;
    background: #f00;
}

.container {
    position: relative;
    padding-top: 130px;    
    height: 100%;
}

.left,
.right {
    position: absolute;
    width: 150px;
    height: 100%;
    left: 0;
    top: 0;
    background: #0f0;
}

.right {
    left: auto;
    right: 0;    
    background: #0f0;
}

.center {
    padding: 0 150px;
    background: #00f;
}
```

```
<div class="header">I'm a header</div>
<div class="container">
    <div class="left">I'm on the left</div>
    <div class="right">I'm on the right</div>
    <div class="center">I'm center</div>
</div>
```

上面的例子作为小提琴（显示更正确）：

[http://jsfiddle.net/en6Cr/](http://jsfiddle.net/en6Cr/)

# python - 仅使用天数时，“datetime.timedelta”和“dateutil.relativedelta.relativedelta”有什么区别？

> ID：12433233
> 
> 赞同：111
> 
> 时间：2012-09-14T23:29:11.810
> 
> 标签：python, datetime, timedelta

[`datetime.timedelta`](http://docs.python.org/library/datetime.html#timedelta-objects)（来自 Python 的标准库）和[`dateutil.relativedelta.relativedelta`](http://labix.org/python-dateutil)仅使用天数有什么区别？

据我了解，`timedelta`仅支持天（和周），同时`relativedelta`增加了对以年、月、周或日定义的周期的支持，以及定义年、月或日的绝对值。*（请记住，就这个问题而言，我不必担心小时、分钟或秒）*

考虑到我只处理对象，并且只对由天数定义的时间段感兴趣，和[`datetime.date`](http://docs.python.org/library/datetime.html#date-objects)之间有什么区别？有什么区别吗？`timedelta``relativedelta`

```
from datetime import date, timedelta
from dateutil.relativedelta import relativedelta

i = -1  # This could have been any integer, positive or negative
someday = date.today()
# Is there any difference between these two lines?
otherday = someday + timedelta(days=i)
otherday = someday + relativedelta(days=i) 
```

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2012-09-14T23:44:26.963

`dateutil`是python标准`datetime`模块的扩展包。正如您所说，它提供了额外的功能，例如以大于一天的单位表示的时间增量。

如果您必须问一些问题，例如在我女朋友的生日到来之前我可以存多少个月，或者这个月的最后一个星期五是什么时候，这很有用？这隐藏了由不同月份长度或闰年额外天数引起的复杂计算。

就您而言，您只对天数感兴趣。所以你最好使用它，因为这样可以避免对包`timedelta`的额外依赖。`dateutil`

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-14T23:47:29.513

A`relativedelta`比 a 有更多的参数`timedelta`：

> ```
> Definition:   relativedelta.relativedelta(self, dt1=None, dt2=None,
> years=0, months=0, days=0, leapdays=0, weeks=0, hours=0, minutes=0,
> seconds=0, microseconds=0, year=None, month=None, day=None,
> weekday=None, yearday=None, nlyearday=None, hour=None, minute=None,
> second=None, microsecond=None) 
> ```

你可以用它来计算一个月中的最后一个星期五：

```
In [14]: import datetime as dt

In [15]: import dateutil.relativedelta as relativedelta

In [16]: today = dt.date.today()

In [17]: rd = relativedelta.relativedelta(day = 31, weekday = relativedelta.FR(-1))

In [18]: today+rd
Out[18]: datetime.date(2012, 9, 28) 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2018-11-17T01:13:11.970

其他答案中未突出显示的一个主要区别是每个时差原语都存在单数和复数名词。虽然`timedelta`只提供复数名词（例如`hours`，`days`）来表示相对时间差，但`relativedelta`也提供单数名词（例如`hour`，`day`）来表示绝对时间信息。

这从 2 个类的定义中可以清楚地看出：

> ```
> Definition:   datetime.timedelta([days[, seconds[, microseconds[, 
> milliseconds[, minutes[, hours[, weeks]]]]]]])
> 
> Definition:   relativedelta.relativedelta(self, dt1=None, dt2=None,
> years=0, months=0, days=0, leapdays=0, weeks=0, hours=0, minutes=0,
> seconds=0, microseconds=0, year=None, month=None, day=None,
> weekday=None, yearday=None, nlyearday=None, hour=None, minute=None,
> second=None, microsecond=None) 
> ```

现在，单数形式究竟是做什么的？单数形式创建一个增量，当添加到`datetime`对象时，将对象中的特定日期/时间原语设置`datetime`为`relativedelta`. 这是一个小例子：

```
>>> import datetime as dt; from dateutil.relativedelta import *
>>> NOW = dt.datetime(2018, 11, 17, 9, 6, 31)
>>> NOW
datetime.datetime(2018, 11, 17, 9, 6, 31)
>>> NOW + relativedelta(hours=1) #Simply add one hour
datetime.datetime(2018, 11, 17, 10, 6, 31)
>>> NOW + relativedelta(hour=1) #Set the hour to 01:00 am
datetime.datetime(2018, 11, 17, 1, 6, 31) 
```

这可能导致`relativedelta`被用于一些有趣的应用程序，使用`timedelta`. 很快想到的一个是四舍五入。

## 一个有趣的应用程序：快速四舍五入

我现在将向您展示`relativedelta`在将对象四舍五入`datetime`到最接近的分钟、小时、天等时如何更具表现力。

### 四舍五入到最近的小时：

注意使用四舍五入是多么简单`relativedelta`：

```
#Using `relativedelta`
NOW + relativedelta(hours=1, minute=0, second=0, microsecond=0)

#Using `timedelta`
dt.combine(NOW.date(),dt.time(NOW.hour,0,0)) + dt.timedelta(0,60*60,0) 
```

使用 . 可以轻松实现其他更复杂的舍入`relativedelta`。但是，请注意，所有可以通过 完成的舍入`relativedelta`也可以使用`datetime`函数 和完成`timedelta`，只是以稍微复杂一点的方式。

# java - Java JScrollPane 更新图像

> ID：12433235
> 
> 赞同：1
> 
> 时间：2012-09-14T23:29:44.957
> 
> 标签：java, image, swing, jscrollpane, paint

我正在制作一个程序，它有一个可以滚动的图像，如果按下按钮，我不知道如何更新图像（例如：向图像添加绿色椭圆。）它已经绘制了图像进入 JScrollPane 并且您可以滚动，但是当您单击按钮时它不会刷新图像。（代码中的更多详细信息）这是代码：

```
public class PegMaster extends JPanel implements ActionListener {

    //Note: not complete code
    public PegBox[] pegbox = new PegBox[9];

    public static Dimension size = new Dimension(520, 500);

    public BufferedImage canvas;
    public Graphics2D g2d;
    public JScrollPane scroller;
    JPanel panel;
    private Canvas window;

    JScrollPane pictureScrollPane;

    public PegMaster() {
        JButton button = new JButton("test");
        button.addActionListener(this);
        add(button);

        canvas = new BufferedImage((int)size.getWidth()-30, 75 * GUESSES, BufferedImage.TYPE_INT_RGB);
        g2d = canvas.createGraphics();
        for(int i = 0;i<=pegbox.length-1;i++) {
           pegbox[i] = new PegBox(i, g2d);
        }
        window = new Canvas(new ImageIcon(toImage(canvas)), 1);
        //Class Canvas is a Scrollable JLabel to draw to (the image)
        pictureScrollPane = new JScrollPane(window);
        pictureScrollPane.setPreferredSize(new Dimension((int)size.getWidth()-10, (int)size.getHeight()-20));
        pictureScrollPane.setViewportBorder(BorderFactory.createLineBorder(Color.black));
        add(pictureScrollPane);

        //adds the scrollpane, but can't update the image in it
    }

    public static void main(String args[]) {
        SwingUtilities.invokeLater(new Runnable() {
            public void run() {
                createGUI();
                //just adds the scrollpane
            }
        });
    }

    public void paint(Graphics g) {
        super.paint(g);

        for(int i = 0;i<=pegbox.length-1;i++) {
            //pegbox[i] = new PegBox(i);
            pegbox[i].draw(g2d);
        }
        try {
            Thread.sleep(20);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }   
        //tried re-making the scrollpane, didn't work.
        //window = new Canvas(new ImageIcon(toImage(canvas)), 1);
        //pictureScrollPane = new JScrollPane(window);
        //pictureScrollPane.setPreferredSize(new Dimension((int)size.getWidth()-10 (int)size.getHeight()-20));
        //pictureScrollPane.setViewportBorder(BorderFactory.createLineBorder(Color.black));
        //tried imageupdate: pictureScrollPane.imageUpdate(canvas, 0, 0, 0 (int)size.getWidth()-10, (int)size.getHeight()-20);
        //remove(pictureScrollPane);
        //tried this: pictureScrollPane.revalidate();
        repaint();
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T00:06:20.953

首先，不要使用`Canvas`它是一个重量级的组件，从长远来看它只会给你带来问题，要么使用`JComponent`要么`JPanel`

其次，不要覆盖`paint`，`paintComponent`而是使用。 `paint`做了很多工作，包括绘制边框和子组件之类的东西。如果您使用`paintComponent`它在绘画层次结构中的正确层上执行您想要做的事情，那就更好了。

第三，永远不要`Thread.sleep`在事件调度线程中调用类似 while 的东西。这将导致事件队列暂停并停止响应事件，使您的程序看起来像是停止了。

第四，切勿在绘制方法中调用 ( 或任何可能导致重绘请求发生的方法) `repaint`。您最终只会用尽您的 CPU，并且您将被迫终止该进程。`invalidate``revalidate`

第五，您没有提供`actionPerformed`方法，这可能是所有操作（和问题）所在。我想你需要调用`window.repaint()`并且可能`window.invalidate()`（以相反的顺序），但由于你没有提供使用此代码，这只是猜测......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T01:31:15.540

试试这个显示图像的类。这可以添加到`JScrollPane`

```
public class ImagePanel extends JPanel {

    public Image img;

    public ImagePanel(Image img){
        this.img = img;
    }

    public void paintComponent(Graphics g){
        super.paintComponent(g);
        g.drawImage(img, 0, 0, this);
    }

} 
```

现在将这个类添加到`JScrollPane`. 要更新它，只需更改图像引用并调用`repaint()`组件上的方法

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-24T16:04:50.117

上述解决方案没有解决我的目的，所以我研究并发现[了这个](https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html)。请按照链接查看整个示例。我添加了代码以供参考，以防链接更改。

```
public class ScrollablePicture extends JLabel
                           implements Scrollable,
                                      MouseMotionListener {

private int maxUnitIncrement = 1;
private boolean missingPicture = false;

public ScrollablePicture(ImageIcon i, int m) {
    super(i);
    if (i == null) {
        missingPicture = true;
        setText("No picture found.");
        setHorizontalAlignment(CENTER);
        setOpaque(true);
        setBackground(Color.white);
    }
    maxUnitIncrement = m;

    //Let the user scroll by dragging to outside the window.
    setAutoscrolls(true); //enable synthetic drag events
    addMouseMotionListener(this); //handle mouse drags
}

//Methods required by the MouseMotionListener interface:
public void mouseMoved(MouseEvent e) { }
public void mouseDragged(MouseEvent e) {
    //The user is dragging us, so scroll!
    Rectangle r = new Rectangle(e.getX(), e.getY(), 1, 1);
    scrollRectToVisible(r);
}

public Dimension getPreferredSize() {
    if (missingPicture) {
        return new Dimension(320, 480);
    } else {
        return super.getPreferredSize();
    }
}

public Dimension getPreferredScrollableViewportSize() {
    return getPreferredSize();
}

public int getScrollableUnitIncrement(Rectangle visibleRect,
                                      int orientation,
                                      int direction) {
    //Get the current position.
    int currentPosition = 0;
    if (orientation == SwingConstants.HORIZONTAL) {
        currentPosition = visibleRect.x;
    } else {
        currentPosition = visibleRect.y;
    }

    //Return the number of pixels between currentPosition
    //and the nearest tick mark in the indicated direction.
    if (direction < 0) {
        int newPosition = currentPosition -
                         (currentPosition / maxUnitIncrement)
                          * maxUnitIncrement;
        return (newPosition == 0) ? maxUnitIncrement : newPosition;
    } else {
        return ((currentPosition / maxUnitIncrement) + 1)
               * maxUnitIncrement
               - currentPosition;
    }
}

public int getScrollableBlockIncrement(Rectangle visibleRect,
                                       int orientation,
                                       int direction) {
    if (orientation == SwingConstants.HORIZONTAL) {
        return visibleRect.width - maxUnitIncrement;
    } else {
        return visibleRect.height - maxUnitIncrement;
    }
}

public boolean getScrollableTracksViewportWidth() {
    return false;
}

public boolean getScrollableTracksViewportHeight() {
    return false;
}

public void setMaxUnitIncrement(int pixels) {
    maxUnitIncrement = pixels;
} 
```

# mysql - 从数据库中选择具有现有图像的随机用户

> ID：12433240
> 
> 赞同：1
> 
> 时间：2012-09-14T23:30:41.470
> 
> 标签：mysql, sql

我有两张桌子：

**用户：**

```
userID | uName | 
-----------------
   1   |  John
   2   |  Bohn
   3   |  Kohn
   4   |  Lohn
   5   |  Zohn
   6   |  Rohn 
```

**图片：**

```
imageID | url | userID
----------------------
   1    |  x  |   2
   2    |  x  |   2
   3    |  x  |   1
   4    |  x  |   3
   5    |  x  |   3
   6    |  x  |   3 
```

如您所见，有一个 USER 数据库，它通过用户 ID 连接到 IMAGES 数据库。只有一个唯一的用户行，但每个用户可以有多个图像。

我想要的是从数据库和他的所有图像中获取**一个 RANDOM用户。**条件是没有图像的用户不应该被选中。

你能帮我建立**一个 mysql 查询**来实现吗？

PS 如果用户数据重复（因为多个图像行）并不重要，结果集中只有一个用户。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T23:35:37.407

首先，`INNER JOIN`两个表，排除没有任何图像的用户；然后，`ORDER BY RAND()`，随机化结果集；最后，选择第一行得到一个随机数`userId`：

```
SELECT u.*
FROM user u INNER JOIN images i ON (u.userId = i.userId)
ORDER BY RAND()
LIMIT 1 
```

**[演示](http://sqlfiddle.com/#!2/75c3c/1)**。

**编辑**：要从随机用户中选择*所有*图像，请使用以下命令：

```
SELECT i.*
FROM images i 
     INNER JOIN 
     (SELECT u.userId
      FROM user u INNER JOIN images i ON (u.userId = i.userId)
      ORDER BY RAND()
      LIMIT 1) rand_user 
     ON (i.userId = rand_user.userId); 
```

**[演示](http://sqlfiddle.com/#!2/75c3c/6)**。

# makefile - make : 源和二进制同名

> ID：12433245
> 
> 赞同：1
> 
> 时间：2012-09-14T23:32:14.130
> 
> 标签：makefile

我有很多带有扩展名的文件`.cpp`

```
f001.cpp
abc.cpp
... 
```

我尝试用这个编译任何文件

```
%.cpp:
        g++ -o $* $*.cpp 
```

但我明白了

```
make: *** No hay objetivos.  Alto. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:43:07.473

这行得通吗？

```
f001.o:

%.o: %.cpp
        g++ -o $@ $< 
```

**编辑：**

好的！现在试试这个：

```
OBJETIVOS = f001.o abc.o def.o ghi.o

todos: $(OBJETIVOS)

%.o: %.cpp
        g++ -o $@ $< 
```

这里有一个问题。通常`abc`是可执行的二进制文件，并且`abc.o`是目标文件。您正在构建可执行文件，但调用它们`abc.o`. 如果您希望它们成为可执行文件，最好将它们称为`abc`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T03:15:15.850

在@Beta 的回答下，我解决了

```
files = $(basename $(shell ls *cpp))                                                     

all: $(files)                                                                            

%: %.cpp                                                                                 
    g++ -o $@ $<                                                                

clean:                                                                                   
    rm $(files) 
```

[https://gist.github.com/3726212](https://gist.github.com/3726212)

# algorithm - 序列计算算法

> ID：12433252
> 
> 赞同：0
> 
> 时间：2012-09-14T23:33:05.737
> 
> 标签：algorithm, permutation

我正在寻找有助于我计算序列的算法或伪代码的提示。这是一种排列，但不完全是因为它不是固定长度。输出序列应如下所示：

```
A
B
C
D
AA
BA
CA
DA
AB
BB
CB
DB
AC
BC
CC
DC
AD
BD
CD
DD
AAA
BAA
CAA
DAA
... 
```

上面的每个字符实际上代表一个整数，它从最小值递增到最大值。我开始时不知道深度，所以只使用多个嵌套的 for 循环是行不通的。

在德国已经很晚了，我就是无法解决这个问题。很确定它可以用 for 循环和递归来完成，但我目前不知道如何开始。

有任何想法吗？

编辑：B-错字更正。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:54:31.777

看起来您正在采用长度为 1、2、3 等的四个不同数字的所有组合，允许重复。

所以从长度 1 开始：{ A, B, C, D }

要获得长度 2，将 A、B、C、D 依次添加到长度为 1 的每个成员之前。（16 个元素）

要获得长度 3，将 A、B、C、D 依次添加到长度为 2 的每个成员之前。（64 个元素）

要获得长度 4，将 A、B、C、D 依次添加到长度为 3 的每个成员之前。（256 个元素）

等等。

如果您有更多或更少的数字，则相同的方法将起作用。如果你允许 A 等于 B，它会变得有点棘手，但这看起来不像你现在正在做的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:48:42.233

您的序列看起来更像 (A ^(n-1) XA ^T )，其中 A 是矩阵，A ^T是它的转置。

```
A= [A,B,C,D] 
```

> *A ^T XA ^(n-1)* ∀ (n=0)
> 
> 序列= A,B,C,D
> 
> *A ^T XA ^(n-1)* ∀ (n=2)
> 
> 序列= AA,BA,CA,DA,AB,BB,CB,DB,AC,BC,CC,DC,AD,BD,CD,DD

您可以使用任何像[这样](http://programsplusplus.blogspot.in/2012/04/matrix-multiplication-in-c.html)的矩阵乘法代码并实现您想要的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T00:12:32.523

你有 4 个元素，你只是在一个反向的 base 4 表示法中循环数字。说 A=0,B=1,C=2,D=3 ：
第一个循环从 0 到 3 在 1 位上
第二个循环从 00 到 33 在 2 位
上等等

```
i    reversed i    output using A,B,C,D digits
loop on 1 digit
0    0             A
1    1             B
2    2             C
3    3             D

loop on 2 digits
00   00            AA
01   10            BA
02   20            CA
03   30            DA
10   01            AB
11   11            BB
12   21            CB
13   31            DB
20   02            AC
21   12            BC
22   22            CC
... 
```

该算法非常明显。您可以查看[分册 3a TAOCP D. Knuth](http://www.kcats.org/csci/464/doc/knuth/fascicles/fasc3a.pdf)中的算法 L（词典 t 组合生成） 。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T00:17:32.987

根据 OP 的评论，这是一种在不存储列表的情况下执行序列的方法。

使用里程表类比。这只需要跟踪索引。每次序列的第一个成员循环时，向右递增一个。如果这是该序列的成员第一次循环，则将成员添加到序列中。

增量将需要级联。这相当于从 99,999 英里到 100,000 英里（逗号是千位标记）。

如果你有一千个整数需要循环遍历，那么假设你正在查看以 1000 为基数的里程表，而不是上述以 10 为基数的里程表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-15T14:21:05.980

怎么样：

```
 Private Sub DoIt(minVal As Integer, maxVal As Integer, maxDepth As Integer)
    If maxVal < minVal OrElse maxDepth <= 0 Then
      Debug.WriteLine("no results!")
      Return
    End If
    Debug.WriteLine("results:")

    Dim resultList As New List(Of Integer)(maxDepth)

    ' initialize with the 1st result: this makes processing the remainder easy to write.
    resultList.Add(minVal)
    Dim depthIndex As Integer = 0
    Debug.WriteLine(CStr(minVal))

    Do

      ' find the term to be increased
      Dim indexOfTermToIncrease As Integer = 0
      While resultList(indexOfTermToIncrease) = maxVal

        resultList(indexOfTermToIncrease) = minVal

        indexOfTermToIncrease += 1
        If indexOfTermToIncrease > depthIndex Then
          depthIndex += 1
          If depthIndex = maxDepth Then
            Return
          End If
          resultList.Add(minVal - 1)
          Exit While
        End If
      End While

      ' increase the term that was identified
      resultList(indexOfTermToIncrease) += 1

      ' output
      For d As Integer = 0 To depthIndex
        Debug.Write(CStr(resultList(d)) + " ")
      Next
      Debug.WriteLine("")

    Loop

  End Sub 
```

这样就够了吗？它不需要太多内存并且相对较快（除了写入输出......）。

# wordpress - 通过复选框过滤 wordpress 查询

> ID：12433253
> 
> 赞同：0
> 
> 时间：2012-09-14T23:33:09.760
> 
> 标签：wordpress, filter

我有一种情况，我有两种不同的帖子类型的查询，我必须在顶部选择带有帖子类型名称的复选框。默认情况下，我不会选中这些复选框，并且如果未选中某个主题以从查询中删除该帖子类型和附属于该帖子类型的帖子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T23:57:27.617

这部分是间接的，但你明白了。将值分配给已检查/​​未检查的值。

```
if($checkboxone == '1') { 
    $types = array( 'typeone' )
}
if($checkboxtwo == '1') {
    $types = array( 'typetwo' )
}
if($checkboxtwo == '1' && $checkboxone == '1'){
    $types = array( 'typeone', 'typetwo' )
} 
```

然后通过类似这样的方式将该值插入到您的 WP_Query 中。它的文档在[这里](http://codex.wordpress.org/Class_Reference/WP_Query#Type_.26_Status_Parameters)

```
// The Query
$the_query = new WP_Query( array( 'post_type' => $types );

// The Loop
while ( $the_query->have_posts() ) : $the_query->the_post();
    //DO STUFF
endwhile;

// Reset Post Data
wp_reset_postdata(); 
```

# servicestack - 具有可变数量属性的 ServiceStack 请求 DTO

> ID：12433254
> 
> 赞同：2
> 
> 时间：2012-09-14T23:33:18.113
> 
> 标签：servicestack

我想创建一个作为查询服务前端的端点，并且我想支持这样一种场景，即可以通过查询字符串参数将任意数量的参数传递到服务中。

这是我想要的那种 URL：

`/queries/MyQuery?argument1=value&arg2=value`

`Dictionary<string, object>`DTO对象结构本身相当简单（属性如 这是否可以通过 RouteAttribute 实现，还是我需要转向另一个方向？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:01:42.217

这是一个很好的答案，解释[了 ServiceStack 中的路由](https://stackoverflow.com/a/12165439/85785)。

只有**PathInfo**是路由的一部分，所有路由/服务上的请求 DTO 也会根据 QueryString/FormData 等上的请求参数自动填充。

因此，如果您知道 QueryString 将是什么，您只需将其作为属性添加到请求 DTO 上，它们就会自动填充。

如果您不知道它们是什么，但您仍想访问 QueryString，您可以从`base.Request`Service 中的属性中获取它，例如：

```
 class MyServices : Service 
 {
     public object Get(MyQuery request) 
     {
        foreach (var entry in base.Request.QueryString) {
            ...
        }
     }
 } 
```

# sql - PostgreSQL 查询文本数组值

> ID：12433260
> 
> 赞同：4
> 
> 时间：2012-09-14T23:34:22.677
> 
> 标签：sql, arrays, postgresql

我有一个表，其中一列有一个数组 - 但以文本格式存储：

```
mytable

id  ids
--  -------
1   '[3,4]'
2   '[3,5]'
3   '[3]'
etc ... 
```

我想在列中查找值 5 作为数组元素的所有记录`ids`。

我试图通过使用“字符串到数组”函数并`[`使用该函数删除符号来实现这一点`translate`，但找不到方法。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T02:55:57.653

你可以这样做：[http ://www.sqlfiddle.com/#!1/5c148/12](http://www.sqlfiddle.com/#!1/5c148/12)

```
select *
from tbl
where translate(ids, '[]','{}')::int[] && array[5]; 
```

输出：

```
| ID |   IDS |
--------------
|  2 | [3,5] | 
```

* * *

您也可以使用 bool_or：[http ://www.sqlfiddle.com/#!1/5c148/11](http://www.sqlfiddle.com/#!1/5c148/11)

```
with a as
(
  select id, unnest(translate(ids, '[]','{}')::int[]) as elem
  from tbl
)
select id
from a
group by id
having bool_or(elem = 5); 
```

要查看原始元素：

```
with a as
(
  select id, unnest(translate(ids, '[]','{}')::int[]) as elem
  from tbl
)
select id, '[' || array_to_string(array_agg(elem), ',') || ']' as ids
from a
group by id
having bool_or(elem = 5); 
```

输出：

```
| ID |   IDS |
--------------
|  2 | [3,5] | 
```

* * *

Postgresql DDL 是原子的，如果您的项目还没有迟到，只需将您的字符串类型数组构造成一个真正的数组：[http ://www.sqlfiddle.com/#!1/6e18c/2](http://www.sqlfiddle.com/#!1/6e18c/2)

```
alter table tbl
add column id_array int[];

update tbl set id_array = translate(ids,'[]','{}')::int[];

alter table tbl drop column ids; 
```

询问：

```
select *
from tbl
where id_array && array[5] 
```

输出：

```
| ID | ID_ARRAY |
-----------------
|  2 |      3,5 | 
```

您还可以使用包含运算符：[http ://www.sqlfiddle.com/#!1/6e18c/6](http://www.sqlfiddle.com/#!1/6e18c/6)

```
select *
from tbl
where id_array @> array[5]; 
```

我更喜欢`&&`语法，它直接意味着交集。它反映您正在检测两个集合之间是否存在交集（数组是一个集合）

[http://www.postgresql.org/docs/8.2/static/functions-array.html](http://www.postgresql.org/docs/8.2/static/functions-array.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-14T23:48:27.027

如果您存储数组的字符串表示形式略有不同，则可以`array of integer`直接转换为：

```
INSERT INTO mytable
VALUES 
 (1, '{3,4}')
,(2, '{3,5}')
,(3, '{3}');

SELECT id, ids::int[]
FROM   mytable; 
```

否则，您必须多做一步：

```
SELECT (translate(ids, '[]','{}'))::int[]
FROM   mytable 
```

我会考虑将列作为数组类型开始。

无论哪种方式，您都可以像这样找到您的行：

```
SELECT id, ids 
FROM  (
    SELECT id, ids, unnest(ids::int[]) AS elem
    FROM   mytable
    ) x
WHERE  elem = 5 
```

# ubuntu - 如何在 ubuntu 12.04 上安装 appcelerator 钛？

> ID：12433261
> 
> 赞同：1
> 
> 时间：2012-09-14T23:34:40.813
> 
> 标签：ubuntu, titanium, appcelerator, appcelerator-mobile, installation

我下载了可用的[zip 文件](http://titanium-studio.s3.amazonaws.com/latest/titanium.linux.gtk.x86.zip)- 从它的名字来看 - 似乎是 gtk，

并尝试按照安装指南中的说明运行 TitaniumStudio

> 运行 TitaniumStudio 可执行文件

我收到此错误消息

> 没有为可执行文件安装应用程序。是否要搜索应用程序来打开此文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:52:31.730

这是我所做的。

解压下载的文件并将文件夹 Titanium_Studio 复制到 /opt（您可能需要使用 sudo 权限才能复制）。它不必在 /opt 中。在这种情况下，请适当修改桌面条目。

创建桌面条目。

```
geordee@ubuntu:~/.local/share/applications$ cat TitaniumStudio.desktop 
[Desktop Entry]
Name=Titanium Studio
Exec=/opt/Titanium_Studio/TitaniumStudio
Icon=/opt/Titanium_Studio/icon.xpm
Terminal=false
Type=Application
StartupNotify=true 
```

单击 Ubuntu 按钮并输入 Titanium。点击图标。然后，您也可以将程序锁定到 Launcher。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-18T16:41:37.120

这个问题已经在互联网上被问过很多次了，还没有看到一个可靠的答案或者有人得到了这个工作。我有这个问题大约 2 周，最后我设法解决了它。这意味着我刚刚在 Ubuntu 15.10 上成功安装了 Titanium 5.x，经过 2 周的不间断乏味尝试。我已经多次看到 Titanium 论坛和 StackOverflow 帖子的这个问题，但又一次 - 没有可靠的答案。***我希望有人能够将其用作解决方案。***

我不能保证这个解决方案的正确性，但这些是我遵循的步骤。

**安装 JDK**

根据官方文档，这必须是 7 或 8。

**安装 Node.js**

对于 linux node.js 版本必须在 0.1x 和 4.2x 之间。根据文档，这些是受支持的版本。最新版本的 node 比这更高，并且不能保证它会工作。所以我也降级到了4.0.0版本。

**下载并安装钛**

您必须先登录并下载钛应用加速器设置 zip 文件。解压到任何地方。进入该目录并作为任何用户 AppeceratorStudio 文件执行。这个用户应该拥有 .npm 和 .appcelerator 目录的所有权。当您第一次执行此文件时，它只会连接到 appcelerator aws 服务器并下载配置。我们只是看不到它。没有任何迹象表明曾经如此。ps aux、top 或 netstat 中没有指示。所以，勇敢地对待自己，直到这一切都结束了。这需要很长时间。所以不要中断这个。如果一切顺利，你就有了钛。

**如果不间断 -** >

您将不得不简单地再次进行配置。幸运的是，当您使用 Titanium CLI 时，您也可以进行配置。

// 这会下载钛 CLI 并对其进行配置

sudo npm install appcelerator -g

应用程序设置

在此之后，您可以运行 AppeceratorStudio 文件并开始使用 Titanium。

这个网站很有帮助。

[http://kalpa-gunarathna.blogspot.com/2016/01/how-to-install-titanium-appcelerator-on.html](http://kalpa-gunarathna.blogspot.com/2016/01/how-to-install-titanium-appcelerator-on.html)

希望这有帮助。:)

# github - gitHub - 提交并将开发分支推送到另一个分支

> ID：12433263
> 
> 赞同：1
> 
> 时间：2012-09-14T23:35:11.687
> 
> 标签：github, push, git-branch

我有一个开发分支。我进行了本地更改，提交它们`git commit -m "blah" file` 并将这些更改推送到我的分支（ccap-biology-dev）`git push origin ccap-biology-dev` 。这些更改已提交另一个分支（ccap-biology）以及我的 .gitignore 文件处理的一些临时文件。这些临时文件都不在我的分支上。我想避免这种情况再次发生。但是，我不知道我做错了什么或纠正此问题的最佳方法。

我为尝试隔离问题而采取的步骤：

```
1\. git remote -v:
   origin   https://github.com/Connexions/oer.exports.git (fetch)
   origin   https://github.com/Connexions/oer.exports.git (push)</code>

2\. git branch -avvv
   ccap-biology                           0105488 [origin/ccap-biology] Update css/ccap-numbering.less
 * ccap-biology-dev                       c674100 module2epub
   remotes/origin/HEAD                     -> origin/master
   remotes/origin/ccap-biology             0105488 Update css/ccap-numbering.less
   remotes/origin/ccap-biology-dev         c674100 module2epub
   remotes/origin/master                   fa3d5fa Added some styling to solutions

3\. branch log file doesn't reflect a commit on ccap-biology
4\. gitHub Activity Feed does not show this push either 
```

这发生在 commit 期间`c674100 module2epub`。下一步要采取什么措施来查明发生了什么？清理我不小心推送到的分支的最佳方法是什么？

任何帮助表示赞赏。提前谢谢。

# node.js - 使用 HAProxy 扩展 socket.io

> ID：12433269
> 
> 赞同：4
> 
> 时间：2012-09-14T23:36:08.867
> 
> 标签：node.js, socket.io, haproxy

到目前为止，我只有一个 node.js 应用程序。运行 socket.io。随着用户数量的增长，它在一天中的大部分时间都达到了 100% CPU，所以我决定将用户拆分到多个 node.js 进程。我已经拆分了我的 node.js 应用程序逻辑，以允许在不同的子域上对用户进行分片。我还将会话代码提取到通过 URL 传递的令牌中，因此 cookie 并不重要。

我想使用我的 8 核机器中的至少 4 个内核，所以我想运行多个 node.js 进程，每个进程都为子域上的应用程序提供服务。为了让所有 node.js 都可以通过端口 80 访问，我决定使用 HAProxy。设置如下所示：

```
 domain.com -> haproxy -> node on 127.0.0.1:5000
sub1.domain.com -> haproxy -> node on 127.0.0.1:5001
sub2.domain.com -> haproxy -> node on 127.0.0.1:5002
sub3.domain.com -> haproxy -> node on 127.0.0.1:5003 
```

现在一切正常，但应用程序的常规部分（不使用 socket.io）非常慢。它是使用 Express.js 编写的，当我直接打开页面（即不通过 HAProxy）时它运行得很快。此外，使用 XHR 传输连接到 socket.io 可以快速工作，但对于 Websocket 传输，建立连接也需要很长时间。建立连接后，它运行良好且快速。

我以前从未使用过 HAProxy，所以我可能配置错误。这是我的 HAProxy 配置：

```
global
    maxconn 50000
    daemon

defaults
    mode http
    retries 1
    contimeout 8000
    clitimeout 120000
    srvtimeout 120000

frontend http-in
    bind *:80
    acl is_l1 hdr_end(host) -i sub1.domain.com
    acl is_l2 hdr_end(host) -i sub2.domain.com
    acl is_l3 hdr_end(host) -i sub3.domain.com
    acl is_l0 hdr_end(host) -i domain.com
    use_backend b1 if is_l1
    use_backend b2 if is_l2
    use_backend b3 if is_l3
    use_backend b0 if is_l0
    default_backend b0

backend b0
    balance source
    option forwardfor except 127.0.0.1  # stunnel already adds the header
    server s1 127.0.0.1:5000

backend b1
    balance source
    option forwardfor except 127.0.0.1  # stunnel already adds the header
    server s2 127.0.0.1:5001

backend b2
    balance source
    option forwardfor except 127.0.0.1  # stunnel already adds the header
    server s2 127.0.0.1:5002

backend b3
    balance source
    option forwardfor except 127.0.0.1  # stunnel already adds the header
    server s2 127.0.0.1:5003 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T12:53:15.463

我想到了。我在文档中找不到这个，但全局 maxconn 设置不适用于前端。前端默认有 2000 个并发连接，超出的所有内容都已排队。由于我有长期的 socket.io 连接，这会产生问题。

解决方案是在前端部分显式设置 maxconn。

# java - jruby gem 安装错误或任何 gem：“错误：执行 gem 时 ...（Errno::ENOENT）”

> ID：12433270
> 
> 赞同：0
> 
> 时间：2012-09-14T23:36:14.973
> 
> 标签：java, jruby, jrubyonrails, solaris-10

尝试安装任何 jruby gem 时，出现以下错误。

```
$ jruby -S gem install rails
ERROR:  While executing gem ... (Errno::ENOENT)
    No such file or directory - 
```

不幸的是，错误消息中没有列出目录或文件。当我搜索此错误时，它通常最终成为特定文件或目录的权限问题，但在这种情况下，没有列出任何内容。

任何帮助或方向将不胜感激。

Jruby：1.6.7.2 操作系统：Solaris 10

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:40:28.363

如果这是 JRUby 的系统安装，您的问题可能是您需要 root 访问权限才能安装 gem。如果是这种情况，请尝试使用以下命令安装 gem `sudo`：

```
sudo jruby -S gem install rails 
```

我建议使用[RVM](https://rvm.io/)安装[JRuby](https://rvm.io/interpreters/jruby/)。安装需要大量的猜测工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T17:25:01.170

经过一番研究，我发现[JRuby 1.6.7 和 1.6.6 中有一个 bug，](http://jira.codehaus.org/browse/JRUBY-6494)即在 Solaris 上安装 gem 失败。目前 Solaris 上的 gem 安装仅适用于 Jruby 1.6.5.1 及更早版本。

# google-chrome-extension - 我可以允许扩展用户选择匹配的域吗？

> ID：12433271
> 
> 赞同：13
> 
> 时间：2012-09-14T23:36:16.003
> 
> 标签：google-chrome-extension

我可以允许我的扩展的域匹配是用户可配置的吗？我想让我的用户选择扩展程序的运行时间。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-15T11:07:57.507

要为内容脚本实现可定制的“匹配模式”，需要由后台页面使用该方法执行内容脚本（在使用事件侦听[`chrome.tabs.executeScript`](https://developer.chrome.com/extensions/tabs.html#method-executeScript)器检测到页面加载之后）。[`chrome.tabs.onUpdated`](https://developer.chrome.com/extensions/tabs.html#event-onUpdated)

因为匹配模式检查没有在任何 API 中公开，所以您必须自己创建方法。它在 中实现[`url_pattern.cc`](https://code.google.com/p/chrome-browser/source/browse/trunk/src/chrome/common/extensions/url_pattern.cc)，并且规范在[匹配模式](https://developer.chrome.com/extensions/match_patterns.html)中可用。

下面是一个解析器的例子：

```
/**
  * @param String input  A match pattern
  * @returns  null if input is invalid
  * @returns  String to be passed to the RegExp constructor */
function parse_match_pattern(input) {
    if (typeof input !== 'string') return null;
    var match_pattern = '(?:^'
      , regEscape = function(s) {return s.replace(/[[^$.|?*+(){}\\]/g, '\\$&');}
      , result = /^(\*|https?|file|ftp|chrome-extension):\/\//.exec(input);

    // Parse scheme
    if (!result) return null;
    input = input.substr(result[0].length);
    match_pattern += result[1] === '*' ? 'https?://' : result[1] + '://';

    // Parse host if scheme is not `file`
    if (result[1] !== 'file') {
        if (!(result = /^(?:\*|(\*\.)?([^\/*]+))(?=\/)/.exec(input))) return null;
        input = input.substr(result[0].length);
        if (result[0] === '*') {    // host is '*'
            match_pattern += '[^/]+';
        } else {
            if (result[1]) {         // Subdomain wildcard exists
                match_pattern += '(?:[^/]+\\.)?';
            }
            // Append host (escape special regex characters)
            match_pattern += regEscape(result[2]);
        }
    }
    // Add remainder (path)
    match_pattern += input.split('*').map(regEscape).join('.*');
    match_pattern += '$)';
    return match_pattern;
} 
```

## 示例：在匹配模式的页面上运行内容脚本

在下面的示例中，数组是硬编码的。[`localStorage`](https://stackoverflow.com/tags/local-storage/info)在实践中，您可以使用or将匹配模式存储在数组中[`chrome.storage`](https://developer.chrome.com/extensions/storage.html)。

```
// Example: Parse a list of match patterns:
var patterns = ['*://*/*', '*exampleofinvalid*', 'file://*'];

// Parse list and filter(exclude) invalid match patterns
var parsed = patterns.map(parse_match_pattern)
                     .filter(function(pattern){return pattern !== null});
// Create pattern for validation:
var pattern = new RegExp(parsed.join('|'));

// Example of filtering:
chrome.tabs.onUpdated.addListener(function(tabId, changeInfo, tab) {
    if (changeInfo.status === 'complete') {
        var url = tab.url.split('#')[0]; // Exclude URL fragments
        if (pattern.test(url)) {
            chrome.tabs.executeScript(tabId, {
                file: 'contentscript.js'
                // or: code: '<JavaScript code here>'
                // Other valid options: allFrames, runAt
            });
        }
    }
}); 
```

要使其正常工作，您需要[在清单文件中请求以下权限](https://developer.chrome.com/extensions/declare_permissions.html)：

*   **`"tabs"`**- 启用必要的`tabs`API。
*   **`"<all_urls>"`**- 能够用于`chrome.tabs.executeScript`在特定页面中执行内容脚本。

## 固定的权限列表

如果匹配模式的集合是固定的（即用户不能定义新的，只能切换模式），`"<all_urls>"`可以用这组权限替换。您甚至可以使用[可选权限](https://developer.chrome.com/extensions/permissions.html)来减少请求权限的初始数量（在[文档中有`chrome.permissions`](https://developer.chrome.com/extensions/permissions.html)明确说明）。

# java - Restlet：无法找到此表示的转换器：[application/json,UTF-8]

> ID：12433277
> 
> 赞同：1
> 
> 时间：2012-09-14T23:37:20.693
> 
> 标签：java, restlet-2.0

我对此进行了大量研究，但一直无法找到解决方案。我创建了最简单的单元测试来获取单个实体，但仍然收到“无法找到转换器”异常。我在我的类路径中包含了 org.restlet.ext.servlet.jar、org.json.jar 和 org.restlet.ext.net.jar。我还能够看到返回的 json，并且能够使用 cr.get(MediaType.APPLICATION_JSON) 方法进行打印。

```
ClientResource cr = new ClientResource("http://localhost:8888/r/establishment/29");
Establishment est = cr.get(Establishment.class);
System.out.println("Establishment name is " + est.getName()); 
```

我在 GAE 和 1.7.1 上使用 restlet-gae-2.1rc6

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-25T17:22:07.937

您需要注册一个转换器。例子：

```
Engine.getInstance().getRegisteredConverters().add(new JacksonConverter()); 
```

查看具有相同解决方案但问题不同的问题：[Android to gae restlet example doesn't work on the Android side](https://stackoverflow.com/q/19593337/435605)

我在这里找到了解决方案：[https ://stackoverflow.com/a/5205993/435605](https://stackoverflow.com/a/5205993/435605)

# php - mySQL 数据库和 PHP 中的 URL 字符串

> ID：12433279
> 
> 赞同：1
> 
> 时间：2012-09-14T23:37:27.477
> 
> 标签：php, mysql, special-characters

我遇到了存储在我的数据库中的 URL 无法正确显示的问题。这是我的代码：

```
 $sqlCommand = 
       "SELECT  rotator.title, rotator.imageURL, rotator.targetURL, rotator.caption  FROM rotator   
        WHERE ( ( rotator.visible = '1' )
        OR ( rotator.visible = '2' AND ( NOW() BETWEEN rotator.schedstart AND rotator.schedstop ) ) )
        ORDER BY rotator.displayorder ASC";
    $query = mysqli_query($myConnection,$sqlCommand) or die (mysqli_error($myConnection));

    $rotatorsDisplay = '';
    while ($row = mysqli_fetch_array($query)){
        $rotatorstitle = $row["title"];
        $rotatorsimg = $row["imgURL"];
        $rotatorsURL = $row["targetURL"];
        $rotatorscaption = $row["caption"];

        $rotatorsDisplay .= '<li>
                <a href="'. $rotatorsURL .'"><img src="'. $rotatorsimg .'"></a>
                <div id="title">'. $rotatorstitle .'</div>
                <div class="caption">'. $rotatorscaption .'</div>
            </li>';
    }
    mysqli_free_result($query); 
```

给我带来麻烦的是 $rotatorsimg 变量。在数据库中，我手动输入了 rotator.imageURL 的值，如下所示：'images/rotator/name.jpg' 但是当我从数据库中查询它们时，将它们添加到 $rotatorsDisplay 变量中，然后使用此代码输出它们：

```
 <?php echo $rotatorsDisplay; ?> 
```

我在结果页面中得到的只是：

```
 <a href="doctor.php"><img src=""></a> 
```

我很确定这不起作用的原因是 URL 中的斜杠。我也很确定我需要以某种方式编码/转换 HTML 以从我输入数据库的代码中去除特殊字符，然后在输出时将其解码/转换回 HTML，但是由于我使用手动将此信息输入到数据库中phpMyAdmin，我还没有弄清楚如何做到这一点。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T23:41:39.087

看起来您使用了错误的索引键。

```
$rotatorsimg = $row["imgURL"]; 
```

应该是

```
$rotatorsimg = $row["imageURL"]; 
```

因为这就是您从数据库中查询的内容。

# ios - OpenCV VideoCapture 不打开文件 ios

> ID：12433280
> 
> 赞同：0
> 
> 时间：2012-09-14T23:37:35.477
> 
> 标签：ios, opencv, video-capture

我使用以下方法将视频保存到文件中：

```
NSString *documentsDirectory = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
documentsDirectory = [documentsDirectory stringByAppendingPathComponent:@"test9.avi"];

NSLog(@"Open to: %@", documentsDirectory);

std::string fileName([documentsDirectory cString], [documentsDirectory cStringLength]);
videoWriter = new cv::VideoWriter(fileName, CV_FOURCC('H', 'F', 'Y', 'U'), 25, cvSize(288,352),1); 
```

但我无法用 VideoCapture 打开它：

```
NSLog(@"Load the video");
videoCapture = new cv::VideoCapture();
NSLog(@"Video loaded");
if (videoCapture->open(fileName))
{
    NSLog(@"Opened");
}
else {
    NSLog(@"Failed to open");
} 
```

VideoCapture 本身没有错误，只是我的日志“无法打开”......我能以某种方式获得更详细的错误日志吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T12:42:30.370

```
cv::VideoCapture capture;
NSString* pathToInputFile = [NSString documentPathByAppendingPath:@"Video/sample_iTunes.mov"];
if(capture.open(std::string([pathToFile UTF8String]))){
    NSLog(@"Opened");
}else{
    NSLog(@"Failed to open");
} 
```

对我来说很好

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-24T12:10:10.637

这个片段在 Xcode 10、Swift 4 中对我有用。感谢@Nathan Tuggy。

```
- (void)openVideoFile:(NSURL *)fileName {

    NSString *filename = fileName.path;
    std::string filePath = [filename UTF8String];

    cv::VideoCapture capture(filePath);

    if (!capture.isOpened()) {
        printf("@Error Opening video file");
        // failed, print error message
    }
    else {
        printf("File Opened");
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-03-06T06:24:42.103

虽然基里尔的答案在发布时会起作用，但现在情况已不再如此。

以下适用于 Xcode 8.2.1，替换`documentPathByAppendingPath`不再可用的功能。

```
cv::VideoCapture cap;
NSString *path = [[NSBundle mainBundle] pathForResource:@"MyVideo" ofType:@"MOV"];
if ( cap.open ( std::string( path.UTF8String ) ) ) {
    NSLog(@"Opened");
} else {
    NSLog(@"Failed to open");
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-04-14T02:02:46.633

我使用 Swift 3 遇到了这个问题。感谢[Kirill](https://stackoverflow.com/questions/12433280/opencv-videocapture-not-opens-file-ios#14832846)和[CodeBender](https://stackoverflow.com/questions/12433280/opencv-videocapture-not-opens-file-ios#42618847)的回答，我解决了这个问题。

```
let resourceURL = Bundle.main.url(forResource: "test", withExtension: "MOV")
let openCVVideoCapture = OpenCVVideoCaptureWrapper.init(file: resourceURL?.path) 
```

以下是我的`OpenCVVideoCaptureWrapper.mm`

```
@implementation OpenCVVideoCaptureWrapper {

    cv::VideoCapture video;
}

- (instancetype)initWithFile:(NSString*) filePath  {

    std::string cvFilePath = [filePath UTF8String];
    video = cv::VideoCapture(cvFilePath);

    if (!video.isOpened()) NSLog(@"Could not open file");

    return self;
}
@end 
```

# java - 在浏览器中启动时未签名的 jar，但在 javaws 中未签名

> ID：12433283
> 
> 赞同：0
> 
> 时间：2012-09-14T23:37:55.760
> 
> 标签：java, security, java-web-start

我在本地网络服务器上有一个小型 webstart 应用程序，可在 localhost:5000/games/game.jnlp 访问，通过 Firefox 和 Chromium 访问它会导致以下错误：

```
net.sourceforge.jnlp.LaunchException: Fatal: Initialization Error: Could not initialize application. 
    at net.sourceforge.jnlp.Launcher.createApplication(Launcher.java:778)
    at net.sourceforge.jnlp.Launcher.launchApplication(Launcher.java:552)
    at net.sourceforge.jnlp.Launcher$TgThread.run(Launcher.java:889)
Caused by: net.sourceforge.jnlp.LaunchException: Fatal: Application Error: Cannot grant permissions to unsigned jars. Application requested security permissions, but jars are not signed.
    at net.sourceforge.jnlp.runtime.JNLPClassLoader.setSecurity(JNLPClassLoader.java:312)
    at net.sourceforge.jnlp.runtime.JNLPClassLoader.<init>(JNLPClassLoader.java:232)
    at net.sourceforge.jnlp.runtime.JNLPClassLoader.getInstance(JNLPClassLoader.java:357)
    at net.sourceforge.jnlp.runtime.JNLPClassLoader.getInstance(JNLPClassLoader.java:330)
    at net.sourceforge.jnlp.Launcher.createApplication(Launcher.java:770)
    ... 2 more 
```

在 Swing 样式错误消息中弹出。

我的 JNLP 文件：

```
<?xml version="1.0" encoding="utf-8"?>
  <jnlp
    spec="1.0+"
    href="game.jnlp"
    >

  <information>
    <title>Space Shapes</title>
    <vendor>WorldsProject</vendor>
    <homepage href="http://www.worldsproject.org"/>
    <description>A game where you must shoot shapes in space.</description>
    <description kind="short">A game where you must shoot shapes in space.</description>
  </information> 
  <security>
    <all-permissions/>
  </security>   
  <resources>
    <j2se href="http://java.sun.com/products/autodl/j2se" version="1.4+" max-heap-size="512m"/>
    <jar href="game.jar"/>  
    <jar href="resources.jar"/>
    <jar href="slick.jar"/>
    <jar href="jogg-0.0.7.jar"/>    
    <jar href="jorbis-0.0.15.jar"/>
    <jar href="lwjgl.jar"/>
    <nativelib href="lwjgl-libs.jar"/>
  </resources>

  <application-desc main-class="org.worldsproject.fluxware.spaceshapes.SpaceShapesGame"/>

</jnlp> 
```

我已确认所有内容均已正确签名

```
jarsigner -verify -certs -verbose 
```

我用 JaNeLA 查看了 jnlp，所有绿色和黄色消息，完全没有错误。我已经测试了其他 webstarts，所有这些都可以工作，除了我的。

编辑，我所有的罐子和 jnlp 文件的链接：[https ://www.dropbox.com/sh/hzagv1e4t4jr43t/WA-LVXp5tc](https://www.dropbox.com/sh/hzagv1e4t4jr43t/WA-LVXp5tc)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:07:58.543

如果您的 jnlp 正在使用命令行进行初始化，那么您也需要在浏览器中设置**javaws** **(Sun JDK)**的位置，即当您的浏览器要求打开您的 javaws 应用程序时，提供指向您的**sun java**位置的路径。

此外，如果 href 表示相对 URL，它必须引用作为代码库子目录的位置。在您的代码库中指定 URL。

# jsf - 提交时未调用 ValueChangeListener

> ID：12433288
> 
> 赞同：0
> 
> 时间：2012-09-14T23:38:31.873
> 
> 标签：jsf, jsf-2

我的 valuechangelistener 方法没有像我预期的那样被调用。我有 ah:selectOneRadio 组件（如下），我希望在单击添加按钮时调用 valueChangeListener，但只有 add 方法被调用，setSelectedItem 方法被完全忽略。我错过了什么？请注意，javascript dataTableSelectOneRadio 执行良好。

这是.xhtml

```
h:panelGrid
Select Client to Associate with Appointment
<h:dataTable id="addClient" styleClass="dataTable"
   value="#{AddEntryMB.clientValues}" var="c" binding="#{AddEntryMB.dataTable}" >

<h:column>
    <f:facet name="header">Select</f:facet>
        <h:selectOneRadio valueChangeListener="#{AddEntryMB.setSelectedItem}" 
               immediate="true" onchange="dataTableSelectOneRadio(this);">
                    <f:selectItem itemValue="null" />
            </h:selectOneRadio>
</h:column>

<h:column>
   <f:facet name="header">Last Name</f:facet>
    #{c.lastName}
</h:column>

</h:dataTable>
</h:panelGrid>

<h:panelGroup>
    <h:commandButton action="#{AddEntryMB.add}" value="add" />
    <h:commandButton action="cancel" value="cancel" immediate="true"/>
</h:panelGroup> 
```

这是支持bean。

```
@ManagedBean(name="AddEntryMB")
@ViewScoped
public class AddEntryMB implements Serializable {
private int  rowIndex;
private int idValue;
    private transient HtmlDataTable dataTable;

 public void setSelectedItem(ValueChangeEvent event) {

    rowIndex = dataTable.getRowIndex();

}

public void add()
{
    DefaultScheduleEntry entry = new DefaultScheduleEntry();
    entry.setId(RandomStringUtils.randomNumeric(32));
    entry.setStartTime(from);
    entry.setEndTime(until);
    entry.setTitle(title);
    entry.setSubtitle(location);
    entry.setDescription(comments);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:14:22.987

当您将组件绑定`binding`到视图范围 bean 的属性时，将在每个 RESTORE_VIEW 阶段重新创建视图范围 bean。这被称为[JSF 问题 1492](http://java.net/jira/browse/JAVASERVERFACES-1492)，并已针对即将推出的 JSF 2.2 进行了修复。

在这种特殊情况下，您最好从 EL 上下文中删除`binding="#{AddEntryMB.dataTable}"`并获取当前。`var="c"`

```
public void setSelectedItem(ValueChangeEvent event) {
    FacesContext context = FacesContext.getCurrentInstance();
    DefaultScheduleEntry c = context.getApplication().evaluateExpressionGet(context, "#{c}", DefaultScheduleEntry.class);
    // ...
} 
```

# javascript - node.js：setInterval() 跳过调用

> ID：12433296
> 
> 赞同：11
> 
> 时间：2012-09-14T23:39:30.923
> 
> 标签：javascript, node.js, setinterval, milliseconds

对于即将使用 node.js 的项目，我需要定期执行各种内务管理任务。特别是一些任务每毫秒，其他每 20 毫秒（每秒 50 次），还有一些每秒。所以我考虑使用 setInterval()，结果很有趣：很多函数调用都被跳过了。

我使用的基准如下：

```
var counter = 0;
var seconds = 0;
var short = 1;
setInterval(function() {
        counter ++;
    }, short);
setInterval(function() {
        seconds ++;
        log('Seconds: ' + seconds + ', counter: ' +
             counter + ', missed ' +
             (seconds * 1000 / short - counter));
    }, 1000); 
```

有一个一秒的长定时器和一个可以使用变量调整的短定时器`short`，在本例中为 1 毫秒。每一秒，我们都会打印短周期中预期的滴答数与短计数器更新的实际次数之间的差异。

以下是短计时器为 1 ms 时的行为：

```
2012-09-14T23:03:32.780Z Seconds: 1, counter: 869, missed 131
2012-09-14T23:03:33.780Z Seconds: 2, counter: 1803, missed 197
2012-09-14T23:03:34.781Z Seconds: 3, counter: 2736, missed 264
...
2012-09-14T23:03:41.783Z Seconds: 10, counter: 9267, missed 733 
```

许多函数调用被跳过。这是10毫秒：

```
2012-09-14T23:01:56.363Z Seconds: 1, counter: 93, missed 7
2012-09-14T23:01:57.363Z Seconds: 2, counter: 192, missed 8
2012-09-14T23:01:58.364Z Seconds: 3, counter: 291, missed 9
...
2012-09-14T23:02:05.364Z Seconds: 10, counter: 986, missed 14 
```

更好，但大约每秒跳过一个函数调用。对于 20 毫秒：

```
2012-09-14T23:07:18.713Z Seconds: 1, counter: 46, missed 4
2012-09-14T23:07:19.713Z Seconds: 2, counter: 96, missed 4
2012-09-14T23:07:20.712Z Seconds: 3, counter: 146, missed 4
...
2012-09-14T23:07:27.714Z Seconds: 10, counter: 495, missed 5 
```

最后 100 毫秒：

```
2012-09-14T23:04:25.804Z Seconds: 1, counter: 9, missed 1
2012-09-14T23:04:26.803Z Seconds: 2, counter: 19, missed 1
2012-09-14T23:04:27.804Z Seconds: 3, counter: 29, missed 1
...
2012-09-14T23:04:34.805Z Seconds: 10, counter: 99, missed 1 
```

在这种情况下，它会跳过很少的调用（间隔在 33 秒后增加到 2，在 108 秒后增加到 3。

这些数字各不相同，但在运行之间却惊人地一致：在 9267、9259 和 9253 的 10 秒后运行 3 次前 1 毫秒基准测试会产生延迟。

我没有找到这个特定问题的参考资料。有[很多被引用的 Ressig 帖子](http://ejohn.org/blog/accuracy-of-javascript-time/)和许多相关的 JavaScript 问题，但大多数假设代码在浏览器中运行，而不是在 node.js 中。

现在是可怕的问题：这里发生了什么？开个玩笑；显然函数调用被跳过了。但我看不到这种模式。我认为长周期可能会阻止短周期，但在 1 ms 的情况下它没有任何意义。短周期函数调用不会重叠，因为它们只是更新一个变量，并且 node.js 进程即使在 1 毫秒的短周期内也接近 5% 的 CPU。但平均负载很高，约为 0.50。不过，我不知道为什么一千次调用对我的系统造成如此大的压力，因为 node.js[可以完美地处理更多的客户端](http://blog.caustik.com/2012/04/08/scaling-node-js-to-100k-concurrent-connections/)；setInterval()一定[是 CPU 密集型的](https://stackoverflow.com/questions/6650134/is-setinterval-cpu-intensive)（或者我做错了什么）。

一个明显的解决方案是使用较长的计时器对函数调用进行分组，然后多次运行短周期函数调用以模拟较短的计时器。然后将长周期用作“扫帚车”，在较低的时间间隔内错过任何呼叫。一个例子：设置 20 毫秒和 1000 毫秒的 setInterval() 调用。对于 1 ms 调用：在 20 ms 回调中调用它们 20 次。对于 1000 毫秒的调用：检查 20 毫秒函数被调用了多少次（例如 47 次），进行任何剩余的调用（例如 3 次）。但是这个方案会有点复杂，因为调用可能会以有趣的方式重叠；虽然它可能看起来像它，但它也不会是常规的。

真正的问题是：使用 setInterval() 或 node.js 中的其他计时器可以做得更好吗？提前致谢。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T00:19:55.617

javascript 中的 SetInterval 函数不准确。您应该尝试使用高分辨率计时器。[在 javascript 中构建准确的计时器](http://www.sitepoint.com/creating-accurate-timers-in-javascript/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-14T23:59:30.353

看看这个文档：[http ://nodejs.org/api/timers.html#timers_settimeout_callback_delay_arg](http://nodejs.org/api/timers.html#timers_settimeout_callback_delay_arg)

> 重要的是要注意，您的回调可能不会在延迟毫秒内被调用 - Node.js 不保证回调何时触发的确切时间，也不保证触发的顺序。回调将被称为尽可能接近规定的时间。

发生这种情况是因为应用程序代码阻塞了事件循环。所有定时器和 I/O 事件只能在`nextTick`.

您可以使用以下代码查看此行为：

```
setInterval(function() {
    console.log(Date.now());
    for (var i = 0; i < 100000000; i++) {
    }
}, 1); 
```

尝试更改迭代次数并查看结果。

理想情况下，如果应用程序滴答持续时间少于 1 毫秒，计时器将准确触发。但这在实际应用中是不可行的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-17T21:29:57.997

答案恰好是 Vadim 和 zer02 给出的答案的组合，所以我在这里留下一个记录。正如 Vadim 所说，系统无法应对过于频繁的更新，给系统增加一些负载也无济于事。或者更确切地说，运行时无法应对；如果需要，系统应该能够每毫秒触发一次回调，但由于某些无法解释的原因，它通常不想这样做。

正如 zer02 评论的那样，解决方案是使用[准确的计时器。](http://www.sitepoint.com/creating-accurate-timers-in-javascript/)不要被名字误导；使用的机制与 setTimeout() 相同，但延迟会根据计时器触发前的剩余时间进行调整。因此，如果时间结束，那么“准确计时器”将调用 setTimeout(callback, 0) 立即运行。令人惊讶的是，系统负载低于 setInterval()：在我非常不科学的示例中，大约是 CPU 的 2% 而不是 5%。

这个简单的功能可能会派上用场：

```
/**
 * A high resolution timer.
 */
function timer(delay, callback)
{
    // self-reference
    var self = this;

    // attributes
    var counter = 0;
    self.running = true;
    var start = new Date().getTime();

    /**
     * Delayed running of the callback.
     */
    function delayed()
    {
        callback(delay);
        counter ++;
        var diff = (new Date().getTime() - start) - counter * delay;
        if (!self.running) return;
        setTimeout(delayed, delay - diff);
    }

    // start timer
    delayed();
    setTimeout(delayed, delay);
} 
```

要使用，只需调用`new timer(delay, callback);`. （是的，我颠倒了参数的顺序，因为第一个回调非常烦人。）要停止它，请设置`timer.running = false`.

最后一点： setTimeout(callback, delay) 不像我担心的那样使用递归（例如：等待一段时间，然后调用回调），它只是将回调放在一个队列中，运行时轮到它时将调用该队列来，在全球范围内。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-21T14:34:49.467

我禁用了调试器并再次尝试。对我来说效果很好

# vb.net - VBScript 到底是什么，我可以使用哪些书籍/在线资源来学习它？

> ID：12433299
> 
> 赞同：-1
> 
> 时间：2012-09-14T23:40:02.990
> 
> 标签：vb.net, vbscript

我有一些编程知识，可以用 Python、Java 编写控制台应用程序，并且可以使用 VB.net 编写控制台和 GUI 程序。既然我知道VB.net，我虽然我应该学习VBScript。我在网上读到它是 Internet Explorer 上使用的一种语言，但我学校的技术部门在文本编辑器中编写应用程序并将它们保存为 .vbs 并在计算机上运行它们（不需要浏览器）。我已经用这种方法制作了一个简单的消息框（MsgBox"message here",4,"title here"）。这是一种能够在两种环境中使用的单一语言，还是这两种不同的东西？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:04:30.963

***我在网上读到它是 Internet Explorer 上使用的一种语言...***

是的，VBScript 可以用作 JavaScript 的替代品。但是，实际上，没有人将 VBScript 用于 Web 应用程序开发，因为它*仅适用*于 Internet Explorer。

***...但是我学校的技术部门在文本编辑器中编写应用程序并将它们保存为 .vbs 并在计算机上运行它们（不需要浏览器）。***

是的，很多问题都可以用 VBScript 解决。VBScript 是一种完整的编程语言，它可以访问 Windows 中的 COM 子系统。我喜欢 VBScript 的地方在于它适用于***所有***Windows 系统。因此，当您有限制禁止您安装其他语言解释器/运行时（例如 Java JRE、Python、Perl、Ruby 等）时，这是一个很好的解决方案。

有关您可以使用 VBScript 执行的操作的示例，请参阅[此示例](https://stackoverflow.com/a/11371712/1497596)，该示例演示了从 Windows 注册表中读取键。

[并在此处](https://stackoverflow.com/a/11371416/1497596)查看我的帖子，以获取将 Microsoft 的权威 VBScript 参考下载为 Windows 帮助文件的指针。

话虽如此，微软几乎已经停止增强 VBScript 并将其精力投入到**PowerShell**中。PowerShell 主要针对系统管理员，当用于此目的时，它是一种功能异常强大的语言。但是，我上次查看时，PowerShell 在创建自己的类方面很弱。（或者至少它很尴尬。）不过，作为应用程序开发人员，当我使用 VBScript 解决问题时，我通常会通过`Class`关键字广泛使用类。很多人不知道这一点，但是您可以在 VBScript 中进行面向对象的编程，我也经常这样做。

查看[这个示例](https://stackoverflow.com/a/12065343/1497596)，它展示了如何通过`Class`VBScript 中的关键字开发自己的类。

# imagemagick - ImageMagick：如何在没有背景的情况下使用 mogrify 按比例调整大小

> ID：12433300
> 
> 赞同：20
> 
> 时间：2012-09-14T23:40:06.960
> 
> 标签：imagemagick, mogrify

我正在关注这个例子[http://cubiq.org/create-fixed-size-thumbnails-with-imagemagick](http://cubiq.org/create-fixed-size-thumbnails-with-imagemagick)，这正是我想要对图像做的，除了有背景剩菜（即白色边框）。有没有办法做到这一点，并可能裁剪出白色背景？还有另一种方法可以做到这一点吗？调整大小需要成比例，所以我不想设置宽度调整大小限制或高度限制，而是按比例调整图像大小。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-15T09:29:58.727

您链接到的示例使用此命令：

```
mogrify             \
  -resize 80x80     \
  -background white \
  -gravity center   \
  -extent 80x80     \
  -format jpg       \
  -quality 75       \
  -path thumbs      \
   *.jpg 
```

首先，`mogrify`有点危险。它内联处理您的原件，并覆盖原件。如果出现问题，您就会丢失原件，并且会被错误的结果所困扰。但是，在您的情况下，`-path thumbs`可以减轻这种危险，因为确保将结果写入子目录*thumbs*

另一个 ImageMagick 命令，`convert`可以保留您的原件并执行与以下相同的操作`mogrify`：

```
convert             \
   input.jpg        \
  -resize 80x80     \
  -background white \
  -gravity center   \
  -extent 80x80     \
  -quality 75       \
   thumbs/output.jpg 
```

如果想要**相同的结果，但不是白色画布扩展**（最初添加是为了使结果成为一个 80x80 的正方形图像），只需省略`-extent 80x80`参数（`-background white`and`gravity center`也是多余的）：

```
convert             \
   input.jpg        \
  -resize 80x80     \
  -quality 75       \
   thumbs/output.jpg 
```

或者

```
mogrify             \
  -resize 80x80     \
  -format jpg       \
  -quality 75       \
  -path thumbs      \
   *.jpg 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-05-21T21:44:02.287

我知道这是一个旧线程，但是通过使用 -write 标志和 -set 标志，可以写入同一目录中的文件而不会覆盖原始文件：

```
mogrify -resize 80x80 \
-set filename:name "%t_small.%e" \
-write "%[filename:name]" \
*.jpg 
```

如[http://imagemagick.org/script/escape.php](http://imagemagick.org/script/escape.php)所述，%t 是不带扩展名的文件名，%e 是扩展名。所以 image.jpg 的输出将是一个缩略图 image_small.jpg。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-01-13T10:45:45.247

这是我每次想将所有内容批量调整为 1920x 并保持纵横比时使用的命令。

> mogrify - 路径。-resize 1920x1920 -format "_resized.jpg" -quality 70 *.jpg

# javascript - cron 作业 vs Javascript 计时事件

> ID：12433302
> 
> 赞同：0
> 
> 时间：2012-09-14T23:40:49.207
> 
> 标签：javascript, php, cron, dom-events

我正在开发需要在特定时间执行一个代码的网站。

哪个是编写 Cron Job 或使用 JavaScript Timing Event 或类似的东西或 JavaScript 更快更好的选择

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-14T23:44:03.763

你在问一个关于两个完全不同的事情的问题。

Cron 作业基于服务器，JavaScript（除非您使用 NodeJS）基于客户端。取决于这是否是一项任务：

*   **必须**执行并且不能依赖于客户端（例如，数据是敏感的），或者
*   可以依赖于客户端执行（这意味着浏览器窗口应该保持打开状态并且应该启用 JavaScript），

分别选择 Cron (1) 或 JavaScript (2)。

这真的就像苹果和橘子之间的比较。除非您告诉我们您想要橙汁还是苹果派，否则我们将无法为您提供更多帮助。请记住，Cron 是为了更可靠的服务器端任务执行，而 JavaScript 超时是每个用户（或者更确切地说是每个客户端），不太可靠的执行。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T23:46:23.820

这完全取决于您需要在特定时间执行的代码的性质。

如果这是每天下午 2 点或其他时间必须发生的事情，无论是否有人在查看该网站，那么您应该为此使用 cron 作业。

另一方面，如果它需要在*每个用户*的特定时间执行（即，在一定的空闲时间后自动将用户从页面注销），那么适当的调用是 Javascript 计时函数。

Javascript 计时功能仅在有人实际查看页面时才有效，然后它将为多个用户多次调用，这可能会或可能不会根据您的情况而定。

当然，您可能正在服务器上运行[Node.js](http://nodejs.org/)，在这种情况下，您可以像使用 cron 作业一样使用 Javascript 计时函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T01:43:57.000

**简而言之，使用 cron**

在您对另一个答案的评论中，您说：

> 我想每周执行一次 php 函数

在这种情况下，您有一个主要选项（假设您使用 *nix），那就是 cron（我不知道 Windows 的替代方案是什么）。Cron 是专门为此功能设计的，无论您是否选择使用它，它很可能无论如何都在您的服务器上运行（对于其他系统功能），因此速度不是问题。

**不要使用 Node.js**

Node.js 是PHP的*替代服务器端技术。*您将在服务器端使用它*而不是*php。如果您已经在使用 PHP，那就忘记它。提到 Node.js 的唯一原因是您询问过 JavaScript。

此外，对于*每周一次*的计时事件，JavaScript 计时器也不是一个好主意。setTimeout() 函数以毫秒为单位工作，适用于在几秒和几分钟（可能是几小时）内工作，但不是几周。

*如果*您要使用服务器端 JavaScript（如 Node.js），您可能需要执行类似于下面的 PHP 替代方案的操作。

**PHP 替代方案**

当然，根据您的托管环境（尤其是便宜的），cron 可能不可用。在这种情况下，您将不得不提出不同的策略，并且您可能最好使用 PHP。我以前见过的一些事情是这样的：

1.  有一些需要执行的工作的登记册。（在数据库、文件或其他任何地方）
2.  每次你运行你的主 PHP 脚本（通常是 index.php），检查寄存器看看是否有任何未完成的工作。2.a. 运行作业。2.b。更新寄存器，以便您记住上次执行作业的时间。

优点：

1.  如果您无权访问 cron，它可以工作。

缺点：

1.  如果您的脚本不经常运行（因为此方法依赖于访问您页面的人），您的作业可能不会像您希望的那样经常运行。
2.  如果您的脚本*经常*运行，您将在脚本中遭受不必要的开销。
3.  如果您的作业需要很长时间才能运行，它将影响页面加载时间。
4.  您基本上是在复制 cron，但使用 PHP 的效率远低于使用 cron。
5.  您不太可能（除非您投入大量时间）开发出与 cron 一样好的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T23:43:37.800

要运行 javascript 计时事件，您需要打开网页。这意味着您必须公开该页面。你不想那样做。Cron 作业既简单又有效。我喜欢他们。你应该这样做。

# jquery - 实时搜索表格行

> ID：12433304
> 
> 赞同：34
> 
> 时间：2012-09-14T23:41:07.910
> 
> 标签：jquery, search, live, tablerow

我想通过表格行进行实时搜索，使用 jQuery，“实时”词是关键，因为我想在同一站点上的文本输入中键入关键字，我希望 jQuery 自动排序（或删除那些与搜索查询不匹配的）表行。

这是我的 HTML：

```
<table>
    <tr><th>Unique ID</th><th>Random ID</th></tr>
    <tr><td>214215</td><td>442</td></tr>
    <tr><td>1252512</td><td>556</td></tr>
    <tr><td>2114</td><td>4666</td></tr>
    <tr><td>3245466</td><td>334</td></tr>
    <tr><td>24111</td><td>54364</td></tr>
</table> 
```

如果我愿意的话。按 搜索`Unique ID`，它应该显示唯一从特定编号开始的唯一 ID 行。铁。如果我在搜索输入框中键入“2”，则应保留以下行，因为它们以 开头`2`：

```
<table>
    <tr><th>Unique ID</th><th>Random ID</th></tr>
    <tr><td>214215</td><td>442</td></tr>
    <tr><td>2114</td><td>4666</td></tr>
    <tr><td>24111</td><td>54364</td></tr>
</table> 
```

如果我要输入`24`，那么应该只有一行可见，因为它从 开始`24`：

```
<table>
    <tr><th>Unique ID</th><th>Random ID</th></tr>
    <tr><td>24111</td><td>54364</td></tr>
</table> 
```

如果你们能给我一些关于如何做这样的事情的提示，我将非常感激。

谢谢你。

* * *

## 回答 #1

> 赞同：67
> 
> 时间：2012-09-14T23:51:55.527

我不确定这有多有效，但这有效：

```
$("#search").on("keyup", function() {
    var value = $(this).val();

    $("table tr").each(function(index) {
        if (index != 0) {

            $row = $(this);

            var id = $row.find("td:first").text();

            if (id.indexOf(value) != 0) {
                $(this).hide();
            }
            else {
                $(this).show();
            }
        }
    });
});​ 
```

* * *

### [DEMO](http://jsfiddle.net/FranWahl/rFGWZ/) - 在桌子上实时搜索

* * *

我确实添加了一些简单的突出显示逻辑，您或未来的用户可能会觉得很方便。

添加一些基本突出显示的方法之一是将`em`标签包裹在匹配的文本周围，并使用 CSS 为匹配的文本应用黄色背景，即：( `em{ background-color: yellow }`)，类似于：

```
// removes highlighting by replacing each em tag within the specified elements with it's content
function removeHighlighting(highlightedElements){
    highlightedElements.each(function(){
        var element = $(this);
        element.replaceWith(element.html());
    })
}

// add highlighting by wrapping the matched text into an em tag, replacing the current elements, html value with it
function addHighlighting(element, textToHighlight){
    var text = element.text();
    var highlightedText = '<em>' + textToHighlight + '</em>';
    var newText = text.replace(textToHighlight, highlightedText);

    element.html(newText);
}

$("#search").on("keyup", function() {
    var value = $(this).val();

    // remove all highlighted text passing all em tags
    removeHighlighting($("table tr em"));

    $("table tr").each(function(index) {
        if (index !== 0) {
            $row = $(this);

            var $tdElement = $row.find("td:first");
            var id = $tdElement.text();
            var matchedIndex = id.indexOf(value);

            if (matchedIndex != 0) {
                $row.hide();
            }
            else {
                //highlight matching text, passing element and matched text
                addHighlighting($tdElement, value);
                $row.show();
            }
        }
    });
}); 
```

* * *

[**演示**](http://jsfiddle.net/FranWahl/aSjqT/)- 应用一些简单的突出显示

* * *

* * *

## 回答 #2

> 赞同：32
> 
> 时间：2013-10-31T01:35:51.110

这是一个搜索两列的版本。

```
$("#search").keyup(function () {
    var value = this.value.toLowerCase().trim();

    $("table tr").each(function (index) {
        if (!index) return;
        $(this).find("td").each(function () {
            var id = $(this).text().toLowerCase().trim();
            var not_found = (id.indexOf(value) == -1);
            $(this).closest('tr').toggle(!not_found);
            return not_found;
        });
    });
}); 
```

演示：http: [//jsfiddle.net/rFGWZ/369/](http://jsfiddle.net/rFGWZ/369/)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-15T00:05:04.097

[François Wahl 方法](https://stackoverflow.com/a/12433371/1250044)，但有点短：

```
$("#search").keyup(function() {
    var value = this.value;

    $("table").find("tr").each(function(index) {
        if (!index) return;
        var id = $(this).find("td").first().text();
        $(this).toggle(id.indexOf(value) !== -1);
    });
}); 
```

[http://jsfiddle.net/ARTsinn/CgFd9/](http://jsfiddle.net/ARTsinn/CgFd9/)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2018-01-14T01:51:23.327

> 这是它的纯 Javascript 版本，带有**LIVE 搜索 ALL COLUMNS**：

```
function search_table(){
  // Declare variables 
  var input, filter, table, tr, td, i;
  input = document.getElementById("search_field_input");
  filter = input.value.toUpperCase();
  table = document.getElementById("table_id");
  tr = table.getElementsByTagName("tr");

  // Loop through all table rows, and hide those who don't match the search query
  for (i = 0; i < tr.length; i++) {
    td = tr[i].getElementsByTagName("td") ; 
    for(j=0 ; j<td.length ; j++)
    {
      let tdata = td[j] ;
      if (tdata) {
        if (tdata.innerHTML.toUpperCase().indexOf(filter) > -1) {
          tr[i].style.display = "";
          break ; 
        } else {
          tr[i].style.display = "none";
        }
      } 
    }
  }
} 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-06-28T01:58:21.380

我接受了 yckart 的回答：

*   将其隔开以提高可读性
*   不区分大小写的搜索
*   通过添加 .trim() 修复了比较中的错误

（如果您将脚本放在页面底部的 jQuery 包含下方，则不需要准备好文档）

jQuery：

```
 <script>
    $(".card-table-search").keyup(function() {
        var value = this.value.toLowerCase().trim();

        $(".card-table").find("tr").each(function(index) {
            var id = $(this).find("td").first().text().toLowerCase().trim();
            $(this).toggle(id.indexOf(value) !== -1);
        });
    });
 </script> 
```

如果你想扩展它，让它遍历每个 'td' 并进行比较。

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2017-12-06T13:40:26.790

老问题，但我知道如何更快地做到这一点。对于我的示例：我的表中有大约 10k 数据，所以我需要一些快速搜索机器。

这是我所做的：

```
$('input[name="search"]').on('keyup', function() {

        var input, filter, tr, td, i;

        input  = $(this);
        filter = input.val().toUpperCase();
        tr     = $("table tr");

        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[0]; // <-- change number if you want other column to search
            if (td) {
                if (td.innerHTML.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }) 
```

希望它可以帮助某人。

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-08-29T09:45:37.293

**这个在我的情况下是最好的**

[https://www.w3schools.com/jquery/jquery_filters.asp](https://www.w3schools.com/jquery/jquery_filters.asp)

```
<script>
$(document).ready(function(){
  $("#myInput").on("keyup", function() {
    var value = $(this).val().toLowerCase();
    $("#myTable tr").filter(function() {
      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
    });
  });
});
</script> 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2017-12-29T07:16:56.157

在 JS 函数下方，您可以使用基于某些指定列来过滤行，请参见 searchColumn 数组。它取自 w3 学校，并进行了一些定制，以在给定的列列表上进行搜索和过滤。

HTML结构

```
<input style="float: right" type="text" id="myInput" onkeyup="myFunction()" placeholder="Search" title="Type in a name">

     <table id ="myTable">
       <thead class="head">
        <tr>
        <th>COL 1</th>
        <th>CoL 2</th>
        <th>COL 3</th>
        <th>COL 4</th>
        <th>COL 5</th>
        <th>COL 6</th>      
        </tr>
    </thead>    
  <tbody>

    <tr>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
     </tr>

    </tbody>
</tbody> 
```

```
 function myFunction() {
    var input, filter, table, tr, td, i;
    input = document.getElementById("myInput");
    filter = input.value.toUpperCase();
    table = document.getElementById("myTable");
    tr = table.getElementsByTagName("tr");

     var searchColumn=[0,1,3,4]

    for (i = 0; i < tr.length; i++) {

      if($(tr[i]).parent().attr('class')=='head')
        {
            continue;
         }

    var found = false;
      for(var k=0;k<searchColumn.length;k++){

        td = tr[i].getElementsByTagName("td")[searchColumn[k]];

        if (td) {
          if (td.innerHTML.toUpperCase().indexOf(filter) > -1 ) {
            found=true;    
          } 
        }
    }
    if(found==true)  {
        tr[i].style.display = "";
    } 
    else{
        tr[i].style.display = "none";
    }
}
} 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2014-01-17T20:58:50.973

这是您可以使用 Ajax、PHP 和 JQuery 执行的操作。希望这有助于或给你一个开始。检查 php.ini 中的 mysql 查询。它匹配从第一个开始的模式。

在此处查看现场演示和源代码。

[http://purpledesign.in/blog/to-create-a-live-search-like-google/](http://purpledesign.in/blog/to-create-a-live-search-like-google/)

创建一个搜索框，可能是这样的输入字段。

```
<input type="text" id="search" autocomplete="off"> 
```

现在我们需要听用户在文本区域输入的任何内容。为此，我们将使用 jquery live() 和 keyup 事件。在每个 keyup 上，我们都有一个 jquery 函数“search”，它将运行一个 php 脚本。

假设我们有这样的 html。我们有一个输入字段和一个列表来显示结果。

```
 <div class="icon"></div>
 <input type="text" id="search" autocomplete="off">
 <ul id="results"></ul> 
```

我们有一个 Jquery 脚本，它将监听输入字段上的 keyup 事件，如果它不为空，它将调用 search() 函数。search() 函数将运行 php 脚本并使用 AJAX 在同一页面上显示结果。

这是JQuery。

```
$(document).ready(function() {  

    // Icon Click Focus
    $('div.icon').click(function(){
        $('input#search').focus();
    });

    //Listen for the event
    $("input#search").live("keyup", function(e) {
    // Set Timeout
    clearTimeout($.data(this, 'timer'));

    // Set Search String
    var search_string = $(this).val();

    // Do Search
    if (search_string == '') {
        $("ul#results").fadeOut();
        $('h4#results-text').fadeOut();
    }else{
        $("ul#results").fadeIn();
        $('h4#results-text').fadeIn();
        $(this).data('timer', setTimeout(search, 100));
    };
});

// Live Search
// On Search Submit and Get Results
function search() {
    var query_value = $('input#search').val();
    $('b#search-string').html(query_value);
    if(query_value !== ''){
        $.ajax({
            type: "POST",
            url: "search_st.php",
            data: { query: query_value },
            cache: false,
            success: function(html){
                $("ul#results").html(html);

            }
        });
    }return false;    
} 
```

}); 在 php 中，对 mysql 数据库进行查询。php 将返回将使用 AJAX 放入 html 的结果。在这里，结果被放入一个 html 列表中。

假设有一个虚拟数据库，其中包含两个表动物和鸟类，它们具有两个相似的列名“type”和“desc”。

```
//search.php
// Credentials
$dbhost = "localhost";
$dbname = "live";
$dbuser = "root";
$dbpass = "";

//  Connection
global $tutorial_db;

$tutorial_db = new mysqli();
$tutorial_db->connect($dbhost, $dbuser, $dbpass, $dbname);
$tutorial_db->set_charset("utf8");

//  Check Connection
if ($tutorial_db->connect_errno) {
    printf("Connect failed: %s\n", $tutorial_db->connect_error);
    exit();

$html = '';
$html .= '<li class="result">';
$html .= '<a target="_blank" href="urlString">';
$html .= '<h3>nameString</h3>';
$html .= '<h4>functionString</h4>';
$html .= '</a>';
$html .= '</li>';

$search_string = preg_replace("/[^A-Za-z0-9]/", " ", $_POST['query']);
$search_string = $tutorial_db->real_escape_string($search_string);

// Check Length More Than One Character
if (strlen($search_string) >= 1 && $search_string !== ' ') {
    // Build Query
    $query = "SELECT *
        FROM animals
        WHERE type REGEXP '^".$search_string."'
        UNION ALL SELECT *
        FROM birf
        WHERE type REGEXP '^".$search_string."'"
        ;

$result = $tutorial_db->query($query);
    while($results = $result->fetch_array()) {
        $result_array[] = $results;
    }

    // Check If We Have Results
    if (isset($result_array)) {
        foreach ($result_array as $result) {

            // Format Output Strings And Hightlight Matches
            $display_function = preg_replace("/".$search_string."/i", "<b class='highlight'>".$search_string."</b>", $result['desc']);
            $display_name = preg_replace("/".$search_string."/i", "<b class='highlight'>".$search_string."</b>", $result['type']);
        $display_url = 'https://www.google.com/search?q='.urlencode($result['type']).'&ie=utf-8&oe=utf-8';

            // Insert Name
            $output = str_replace('nameString', $display_name, $html);

            // Insert Description
            $output = str_replace('functionString', $display_function, $output);

            // Insert URL
            $output = str_replace('urlString', $display_url, $output);

            // Output
            echo($output);
        }
    }else{

        // Format No Results Output
        $output = str_replace('urlString', 'javascript:void(0);', $html);
        $output = str_replace('nameString', '<b>No Results Found.</b>', $output);
        $output = str_replace('functionString', 'Sorry :(', $output);

        // Output
        echo($output);
    }
} 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2017-09-18T07:18:05.987

我使用了以前的答案并将它们组合起来创建：

### 通过隐藏行和突出显示搜索任何列

用于突出显示找到的文本的 Css：

```
em {
   background-color: yellow
} 
```

JS：

```
function removeHighlighting(highlightedElements) {
   highlightedElements.each(function() {
      var element = $(this);
      element.replaceWith(element.html());
   })
}

function addHighlighting(element, textToHighlight) {
   var text = element.text();
   var highlightedText = '<em>' + textToHighlight + '</em>';
   var newText = text.replace(textToHighlight, highlightedText);

   element.html(newText);
}

$("#search").keyup(function() {
   var value = this.value.toLowerCase().trim();

   removeHighlighting($("table tr em"));

   $("table tr").each(function(index) {
      if (!index) return;
      $(this).find("td").each(function() {
         var id = $(this).text().toLowerCase().trim();
         var matchedIndex = id.indexOf(value);
         if (matchedIndex === 0) {
            addHighlighting($(this), value);
         }
         var not_found = (matchedIndex == -1);
         $(this).closest('tr').toggle(!not_found);
         return not_found;
      });
   });
}); 
```

演示**[在这里](http://jsfiddle.net/behzadkh/rFGWZ/3848/)**

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-05-12T11:50:17.933

如果一行中的任何单元格包含搜索的短语或单词，则此函数显示该行，否则将其隐藏。

```
 <input type="text" class="search-table"/>  
     $(document).on("keyup",".search-table", function () {
                var value = $(this).val();
                $("table tr").each(function (index) {
                    $row = $(this);
                    $row.show();
                    if (index !== 0 && value) {
                        var found = false;
                        $row.find("td").each(function () {
                            var cell = $(this).text();
                            if (cell.indexOf(value.toLowerCase()) >= 0) {
                                found = true;
                                return;
                            } 
                        });
                        if (found === true) {
                            $row.show();
                        }
                        else {
                            $row.hide();
                        }
                    }
          });
   }); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2016-05-09T18:22:23.557

使用[yckart 的答案](https://stackoverflow.com/a/12433439/5435780)，我搜索了整个表 - 所有 td。

```
$("#search").keyup(function() {
    var value = this.value;

    $("table").find("tr").each(function(index) {
        if (index === 0) return;

        var if_td_has = false; //boolean value to track if td had the entered key
        $(this).find('td').each(function () {
            if_td_has = if_td_has || $(this).text().indexOf(value) !== -1; //Check if td's text matches key and then use OR to check it for all td's
        });

        $(this).toggle(if_td_has);

    });
}); 
```

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2021-09-09T10:03:35.517

```
<!--code for table search start--> 
<script>
    $(document).ready(function () {
        $("#myInput").on("keyup", function () {
            var value = $(this).val().toLowerCase();
            $("#myTable tr").filter(function () {
                $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
            });
        });
    });
</script><!--code for table search end--> 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2020-11-09T08:51:41.643

嘿，对于仍在寻找 2020 年的每个人。我从这里得到了一些答案，并制作了自己的 searchTable 函数。

```
function searchTable() {
 var input, filter, table, tr, td, i, txtValue;
 input = document.getElementById("myInput");
 filter = input.value.toUpperCase();
 table = document.getElementById("showTable");
 tr = table.getElementsByTagName("tr");
 th = table.getElementsByTagName("th");
 var tdarray = [];
 var txtValue = [];
 for (i = 0; i < tr.length; i++) {
   for ( j = 0; j < th.length; j++) {
     tdarray[j] = tr[i].getElementsByTagName("td")[j];
   }
   if (tdarray) {
     for (var x = 0; x < tdarray.length; x++) {
       if (typeof tdarray[x] !== "undefined") {
          txtValue[x] = tdarray[x].textContent || tdarray[x].innerText;
          if (txtValue[x].toUpperCase().indexOf(filter) > -1) {
            tr[i].style.display = "";
          } else {
            tr[i].style.display = "none";
          }
       }
     }
   }
 }
}

<input style="width: 485px;" type="text" id="myInput"  class="search-box" onkeyup="searchTable()" placeholder="Suche..">

<table id="showTable">
  <thead>
    <tr>
    </tr>
  </thead>
  <tbody>
  </tbody>
</table> 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2018-11-28T12:23:36.177

```
$("#search").on("keyup", function() {
        var value = $(this).val().toLowerCase();
        $("tbody tr").filter(function() {
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)
        });
    }); 
```

假设有一个带有 tbody 的表。您也可以使用 find 进行搜索，或者如果表有 ID，您可以使用 id

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-03-20T06:32:00.430

这是我的例子

```
<input class="form-control data-search" type="text" name="employee_quick_search" data-table=".employee-table" placeholder="Kiirotsing" value="see">

<table class="employee-table">

$("tbody tr", 'table.search-table').filter(function (index) {

//IF needed to show some rows
/*
            if (index == 0 || index == 1)
                return;
*/

            var inputValueFound = false;
//input search
            $('input,textarea,select', this).each(function(){

                if( $(this).val().toLowerCase().indexOf(value) > -1 )
                    inputValueFound = true;
            });
//text search
            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1 || inputValueFound);
        }); 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2021-10-05T14:12:27.093

在这里你可以使用这个 JQuery 代码。我个人使用此代码。

```
$("#ticket-search").on("keyup", function() {

    var value = $(this).val().toLowerCase();

    $("#ticket-table tr").filter(function() {

      $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1)

    });

  }); 
```

* * *

## 回答 #18

> 赞同：-1
> 
> 时间：2018-03-10T17:29:58.557

以下是我搜索 html 表的方式：
<input type='text' onkeyup="filterTo(this.value, 'myTable')" placeholder='Search...'>
<table id='myTable'>... </table>

```
function filterTo(input, table) {
var tr = document.getElementById(table).getElementsByTagName('tr');
for (var i = 1; i < tr.length; i++) {
    var td = tr[i].getElementsByTagName('td');
    var hide = true;
    for (var j=0; j<td.length; j++) { 
        if (td[j].innerHTML.toUpperCase().indexOf(input.toUpperCase()) > -1) { hide=false; break } 
    }
    tr[i].style.display = hide ? 'none' : '';
} } 
```

# objective-c - Xcode 中用于在帮助和 IDE 之间切换的快捷方式

> ID：12433305
> 
> 赞同：7
> 
> 时间：2012-09-14T23:41:13.877
> 
> 标签：objective-c, xcode, editor

我是 XCode IDE、Mac 和 IOS 编程的新手。意味着我将在帮助和编辑器之间进行大量交换。但是，当使用`Cmd`+时，`Tab`我不会在帮助和 IDE 之间切换，而是在其他打开的应用程序之间切换。

有谁知道在IDE和帮助之间切换的捷径？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-14T23:43:32.680

1.  `OPT`++会在XCode中带来帮助（如果你去帮助部分会提到快捷方式`Cmd`）`?`

2.  使用 1\. 结合`CMD`+`'`滚动浏览 XCode 中所有打开的项目/窗口。

你可以看看这个[页面](http://developer.apple.com/library/mac/#documentation/IDEs/Conceptual/xcode_help-command_shortcuts/MenuCommands/MenuCommands014.html#//apple_ref/doc/uid/TP40010560-CH2-SW1)：它指的是所有 XCode 快捷方式和手势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T23:43:54.897

打开 Organizer 的默认快捷方式是`Cmd`++ ，您可以根据需要在 Xcode 的 Preferences 中对其进行编辑`Shift`。`2`

还有一个快捷方式可以直接将您带到“文档”选项卡：`Cmd`++ 。`Alt``?`

此外，您可以在“系统偏好设置”→“键盘”→“键盘快捷方式”中设置在活动应用程序的窗口之间切换的快捷方式。默认是`Cmd`+`<`但我更喜欢`Alt`+ `Tab`。

![在此处输入图像描述](../Images/c59c0e52c43d6ad2ee447928ea860cbd.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-14T23:45:42.820

`Command`- `Option`- `Shift`- `/`(aka `Command`- `Option`- `?`) 将打开文档窗口。

`Command`此外，您可以使用-在应用程序内的窗口之间循环```（适用于任何应用程序）。您可以使用它在项目窗口和其他打开的窗口（包括文档窗口）之间轻松切换。

`Command`-`Tab`应用程序之间的循环，而不是窗口。

请注意，给定菜单命令的键盘快捷键将与命令一起显示在菜单中（对于任何应用程序都是如此）：

![帮助菜单](../Images/8a63bd5cfb9dafbbab488a9bf63c3ee9.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-16T09:36:34.430

如果您使用的是 Mountain Lion（不确定它是否适用于早期版本），如果您愿意，还可以使用 4 指滚动（任务控制快捷键）。打开管理器（帮助）后，用 4 根手指向上滑动以显示任务控制。在顶部，您会看到虚拟桌面。将管理器/帮助窗口拖放到第二个桌面上。现在，您可以用 4 根手指在触控板上向右或向左滑动，以在代码视图和帮助之间切换。我知道这听起来很复杂，但一旦你习惯了它，它就会成为第二天性。但是，是`Cmd + ~`的也很好。

# python - 应用程序需要文件系统元数据层

> ID：12433308
> 
> 赞同：5
> 
> 时间：2012-09-14T23:42:01.177
> 
> 标签：python, file, metadata

我正在寻找一个位于文件顶部的元数据层，它可以解释文件名中的键值对信息，用于处理数千个文件的应用程序。更多信息：

*   这些不一定是具有内置元数据的媒体文件 - 因此是键值对。
*   元数据超出了操作系统信息（文件大小等）——应用程序放入键值的任何内容。
*   它应该可以通过命令行和 python 模块访问，以便我的应用程序可以与之对话。
*   添加：它也应该被常见的 os 命令（cp、mv、tar 等）支持，以便在复制或移动文件时不会丢失。

我想要的功能示例包括：

*   列出组织 ID 3375 的目录 x 中的文件
*   通过将 load_time 转换为年/月并显示每个年/月组合的文件计数和大小来报告目录 y 中的文件
*   根据加载时间的键获取目录 z 中最旧的文件

嵌入了这些简单元数据的文件可能如下所示：

*   Bowling_state-ky_league-15_game-8_gametime-201209141830.tgz
*   Bowling_state-ky_league-15_game-9_gametime-201209141930.tgz

此元数据非常易于访问并与文件紧密结合。但是 - 我宁愿避免在所有操作中都使用剪切或通配符。

我环顾四周，只能找到媒体和操作系统元数据解决方案，如果它已经存在，我不想构建它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-14T23:58:56.597

你看过扩展文件属性吗？请参阅：[http ://en.wikipedia.org/wiki/Extended_file_attributes](http://en.wikipedia.org/wiki/Extended_file_attributes)

基本上，您将键值对作为零终止字符串存储在文件系统本身中。您可以像这样从命令行设置这些属性：

```
$ setfattr -n user.comment -v "this is a comment" testfile
$ getfattr testfile
# file: testfile
user.comment
$ getfattr -n user.comment testfile
# file: testfile
user.comment="this is a comment" 
```

要从 python 设置和查询扩展文件系统属性，可以尝试 python 模块 xattr。见： http: [//pypi.python.org/pypi/xattr](http://pypi.python.org/pypi/xattr)

**EDIT** 大多数文件系统操作命令都支持扩展属性，例如通过添加命令行标志的 cp、mv 和 tar。例如 cp -a 或 tar --xattr。您可能需要使这些命令透明地工作。（您可能有些用户不知道您的扩展属性。）在这种情况下，您可以创建一个别名，例如 alias cp="cp -a"。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T02:35:53.563

[如前所述](https://stackoverflow.com/a/12433404)，xattrs 在可用时是一个很好的解决方案。但是，当您不能使用 xattrs 时：

## NTFS 备用数据流

在 Microsoft Windows 上，xattrs 不可用，但[NTFS 备用数据流](https://en.wikipedia.org/w/index.php?title=NTFS&oldid=511837447#Alternate_data_streams_.28ADS.29)提供了类似的功能。ADS 允许您将任意数量的数据与文件的主要流一起存储。它们是使用

```
drive:\path\to\file:streamname 
```

ADS 实际上只是它自己的具有特殊名称的文件。显然，您可以通过指定包含冒号的文件名从 Python 访问它们：

```
open(r"drive:\path\to\file:streamname", "wb") 
```

然后像普通文件一样使用它。（免责声明：未经测试。）

从命令行，使用微软的`streams`程序。

由于 ADS 存储任意二进制数据，因此您负责编写查询功能。

## SQLite

SQLite 是您可以使用的嵌入式 RDBMS。将`.sqlite`数据库文件存储在目录树旁边。

对于您添加的每个文件，还要将每个文件记录在一个表中：

```
CREATE TABLE file (
    file_id INTEGER PRIMARY KEY AUTOINCREMENT,
    path TEXT
); 
```

然后，例如，您可以将一段元数据存储为表：

```
CREATE TABLE organization_id (
    file_id INTEGER PRIMARY KEY,
    value INTEGER,
    FOREIGN KEY(file_id) REFERENCES file(file_id)
); 
```

然后你可以查询它：

```
SELECT path FROM file NATURAL JOIN organization_id
WHERE value == 3375 AND path LIKE '/x/%'; 
```

或者，如果您想要一个纯键值存储，您可以将所有元数据存储在一个表中：

```
CREATE TABLE metadata (
    file_id INTEGER,
    key TEXT,
    value TEXT,
    PRIMARY KEY(file_id, key),
    FOREIGN KEY(file_id) REFERENCES file(file_id)
); 
```

询问：

```
SELECT path FROM file NATURAL JOIN metadata
WHERE key == 'organization_id' AND value == 3375 AND path LIKE '/x/%'; 
```

显然，每当您读取或写入文件时，您都有责任更新数据库。您还必须确保这些更新是原子的（例如`active`，向`file`表中添加一列；添加文件时：set `active = FALSE`、write file、fsync、set`active = TRUE`和 as cleanup 删除任何具有 的文件`active = FALSE`）。

*   Python 标准库包含 SQLite 支持作为[`sqlite3`](http://docs.python.org/library/sqlite3.html)包。
*   从命令行，使用该`sqlite3`程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-24T00:11:18.110

Xattr 对大小的限制（Ext4 最多 4kb），xattr 键必须以“用户”为前缀。在 Linux 上。并不是所有的文件系统都支持 xattr。

尝试包装 xattr 并可以轻松切换以禁用 xattr 支持的[iDB.py库。](https://github.com/clouddb/idb.py/)

# r - 使用 if 和 else 在向量 R 中输出的神秘值

> ID：12433309
> 
> 赞同：0
> 
> 时间：2012-09-14T23:42:04.577
> 
> 标签：r, for-loop, compare, if-statement

我有一个值向量（仅限数字）。我想把这个向量分成两个向量。一个向量将包含小于原始向量平均值的值，另一个向量将包含大于原始向量平均值的值。我有以下作为测试 R 脚本：

```
v <- c(1,1,4,6,3,67,10,194,847)

#Initialize
v.in<- c(rep(0),length(v))
v.out<- c(rep(0),length(v))

for (i in 1:length(v))
{
   if (v < 0.68 * mean(v))
   {
      v.in[i] <- v[i]
   }
   else
   {
      v.out[i] <- v[i]
   }
}
v.in
v.out

## <https://gist.github.com/8a6747ea9b7421161c43> 
```

我得到以下结果：

```
9: In if (v < 0.68 * mean(v)) { :
  the condition has length > 1 and only the first element will be used
> v.in
[1]   1   1   4   6   3  67  10 194 847
> v.out
[1] 0 9
> v
[1]   1   1   4   6   3  67  10 194 847
> 
```

显然，0 和 9 不是 v 中任何元素的值。

任何建议发生了什么以及如何解决这个问题？

谢谢，埃德

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:03:56.360

@BenBolker 在评论中指出了为什么您的代码不起作用：您需要`v`在使用`if`. 但是，您可能会`split`为这样的任务找到更好的功能：

```
split(v,v<0.68*mean(v))
$`FALSE`
[1] 194 847

$`TRUE`
[1]  1  1  4  6  3 67 10 
```

谜团的答案`v.out`是它的分支没有被选中，所以它不会被改变。因此，它保留了它的初始值，它（可能）错误地给出了一个单一的值`0`和向量 ( ) 的长度，`9`而不是我怀疑你想要的九个零副本。

# jquery - jquery 通过递增 ID 循环遍历元素

> ID：12433313
> 
> 赞同：1
> 
> 时间：2012-09-14T23:42:53.017
> 
> 标签：jquery

我有大约十几个事件要检查，并且所有选择器的名称都类似（迭代地）。我怎样才能缩短这个程序？

```
$(document).ready(function() {
    $(document).on('click','#del_od1', function() {
        $('#change_od1').val('YES');
        $('#span_od1').html('(Deleted)');
        $('#status_od1').val('DELETED');
    });
    $(document).on('click','#del_od2', function() {
        $('#change_od2').val('YES');
        $('#span_od2').html('(Deleted)');
        $('#status_od2').val('DELETED');
    });
    $(document).on('click','#del_od3', function() {
        $('#change_od3').val('YES');
        $('#span_od3').html('(Deleted)');
        $('#status_od3').val('DELETED');
    });
}); 
```

这个问题名字不好。有人还可以建议一个更准确的标题，我会在接受答案之前将其更改为该标题。

* * *

编辑：

响应 ajax 调用会回显整个表结构。表的顶部是这样的：

```
$r = '
    <table id="DocTable">
        <tr>
            <th width="170">Document Title</th>
            <th width="170">MetShare FN</th>
            <th width="50">Action</th>
            <th width="50">Delete</th>
        </tr>'; 
```

随后是几行不相关的行，其中包含呼叫中请求的信息。然后将其附加到前一个位，整个内容回显为`echo $r;`.

```
$rest_docs =  $aProj['all_project_docs'];
$ocnt = 0;
if ($rest_docs !== ''){
    $ocnt = $ocnt + 1;
    $aRest_docs = explode('?',$rest_docs);
    foreach($aRest_docs as $doc){
        $aDoc_parts = explode('|',$doc);

        $r = $r . '
        <tr>
            <td>'.$aDoc_parts[0].'</td>
            <td>
                <span id="span_od' . $ocnt . '">
                    <a href="'.$aDoc_parts[1].'" target="blank">
                    '. $aDoc_parts[1] .'
                    </a>
                </span>
                <input type="hidden" id="status_od' . $ocnt . '" name="status_od' . $ocnt . '">
            </td>
            <td>
                <a id="change_od' . $ocnt . '" class="normal" href="#">change</a>
                <input type="file" id="if_od' . $ocnt . '" name="if_od' . $ocnt . '" style="display:none">
                <input type="text" style="display:none">
            </td>
            <td>
                <a href="#" id="del_od' . $ocnt . '">delete</a>
            </td>
        </tr>';
    }
}

echo $r; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:15:16.240

### *[jsBin（仅举例）演示](http://jsbin.com/iturun/2/edit)*

所有这些名字的共同点......

```
 del_od1
change_od1
  span_od1
status_od1

is:      1      :)   (a number, and so for all other elements) 
```

......所以我们需要抓住它！看：

```
$(document).ready(function() {
    $(document).on('click','[id^=del_od]', function() {//^="starts with selector"

        var num = this.id.split('od')[1];  // returns our number from the id!
        // from now on we can use our var "num" :

        $('#change_od'+ num).val ('YES');
        $('#span_od'  + num).html('(Deleted)');
        $('#status_od'+ num).val ('DELETED');
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-14T23:46:03.860

显而易见的方法是

```
$(document).ready(function() {
    for(var i = 1; i < 10; ++i) {
        $(document).on('click','#del_od' + i, (function(index) {
            return function() {
                $('#change_od' + index).val('YES');
                $('#span_od' + index).html('(Deleted)');
                $('#status_od' + index).val('DELETED');
            };
        })(i));
    }
}); 
```

但是，通过使用类而不是 id 并利用您拥有的有关文档结构的信息，您极有可能在没有这种粗鲁的编码风格的情况下实现相同的效果。你能举个例子吗？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T05:39:59.943

在 jQuery 中，您可以避免关闭并使用`event.data`。这对我来说看起来更干净。

```
jQuery(document).ready(function($) { 
    for(var i = 1; i < 10; ++i) {
        $(document).on('click','#del_od' + i,{'index': i},function(e) {
            var index = e.data.index;
            $('#change_od' + index).val('YES');
            $('#span_od' + index).html('(Deleted)');
            $('#status_od' + index).val('DELETED'); 
        })
    }
}); 
```

[演示](http://jsfiddle.net/42Hz4/)

[参考](http://api.jquery.com/on/#passing-data)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-14T23:56:15.200

通过从 id 中解析 id 后缀，您可以使用一个事件处理程序为它们提供所有服务：

```
$(document).ready(function() {
    $(document).on('click','[id^="del_"]', function() {
        var suffix = this.id.replace(/^.*?_/, "");
        $('#change_' + suffix).val('YES');
        $('#span_' + suffix).html('(Deleted)');
        $('#status_' + suffix).val('DELETED');
    });
}); 
```

这也可以通过使用删除按钮与受影响项目的 HTML 关系来解决。

如果您可以修改 HTML 以使用各种目标的类，那么只需使用按下的按钮与所需目标的关系，就可以在没有任何 id 的情况下这样做：

```
 <tr>
        <td>'.$aDoc_parts[0].'</td>
        <td>
            <span id="span_od'  . $ocnt . '" class="spanTarget">
                <a href="'.$aDoc_parts[1].'" target="blank">
                '. $aDoc_parts[1] .'
                </a>
            </span>
            <input type="hidden" id="status_od' . $ocnt . '" class="statusTarget" name="status_od' . $ocnt . '">
        </td>
        <td>
            <a id="change_od' . $ocnt . '" class="changeTarget normal" href="#">change</a>
            <input type="file" id="if_od' . $ocnt . '" name="if_od' . $ocnt . '" style="display:none">
            <input type="text" style="display:none">
        </td>
        <td>
            <a href="#" id="del_od' class="deleteButton" . $ocnt . '">delete</a>
        </td>
    </tr>'; 
```

而且，这将是仅基于位置和类（无 id）的脚本：

```
$(document).ready(function() {
    $(document).on('click', '.deleteButton', function() {
        var parent = $(this).closest("tr");
        parent.find('.changeTarget').val('YES');
        parent.find('.spanTarget').html('(Deleted)');
        parent.find('.statusTarget').val('DELETED');
    });
}); 
```

这将获取单击的删除按钮所在的行，然后找到同一行中的更改、跨度和状态对象并对其进行操作。根本没有使用任何 ID。这使用单击按钮的位置来查找它操作的对象。

# clojure - 如何将对 Blitline JSON 服务的 cURL 调用转换为 clojure？

> ID：12433314
> 
> 赞同：0
> 
> 时间：2012-09-14T23:42:59.533
> 
> 标签：clojure

Blitline 提供了这个例子来从命令行调用；这将如何转化为clojure？

```
$ curl "http://api.blitline.com/job" -d json='{ "src" : "http://www.google.com/logos/2011/yokoyama11-hp.jpg", "functions" : [ {"name": "blur", "params" : {"radius" : 0.0, "sigma" : 2.0}, "save" : { "image_identifier" : "some_id" }} ]}' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-18T02:08:52.850

上面的答案是正确的。为了完整起见，我附上了您需要的完整代码：

```
(require '[clj-http.client :as http])
(require '[clojure.data.json :as json])

(def post
(http/post "http://api.blitline.com/job" {
:body 
    (json/json-str 
        { "json" 
        { "application_id" "sgOob0A3b3RdYaqwTEJCpA"
          "src" "http://www.google.com/logos/2011/yokoyama11-hp.jpg"
          "functions" [ {
                "name" "blur"
                "params" {
                    "radius" 0.0
                    "sigma" 2.0
                }
                "save" { "image_identifier" "some_id" }
                }
                ]}}) 
:body-encoding "UTF-8"
:content-type :json
:accept :json
}))

(json/read-json (:body post)) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T11:00:00.353

您可以使用 clj-http.client 和 clojure.data.json。以下是我用来与 Urban Airship JSON API 对话的一些代码作为示例：

```
(ns my-ns
  (:require [clj-http.client :as http]
            [clojure.data.json :as json]))

(def uu-base-url
  "https://go.urbanairship.com")

(def auth ["secret" "password"])    

(defn broadcast-message*
  [auth text]
  (http/post (str uu-base-url "/api/push/broadcast/") ;; target url
             {:basic-auth auth ;; leave this out if you don't need HTTP basic authentication
              :content-type "application/json"
              :body (json/json-str
                     ;; clojure data to be converted into JSON request body
                     {:aps {:badge 1
                            :alert text}})})) 
```

# google-bigquery - 按日期分区？

> ID：12433322
> 
> 赞同：6
> 
> 时间：2012-09-14T23:43:47.213
> 
> 标签：google-bigquery

我们正在尝试使用 BigQuery 来分析我们的软件应用程序生成的用户数据。

我们的工作表包含数亿行，每行代表一个唯一的用户“会话”。每个都包含时间戳、UUID 和其他字段，用于描述用户在该会话期间与我们产品的交互。我们目前每天生成大约 2GB 的数据（约 1000 万行）。

每隔一段时间，我们可能会针对整个数据集运行查询（现在大约需要 2 个月，并且还在增长），但是典型的查询只会跨越一天、一周或一个月。我们发现随着表的增长，我们的单日查询变得越来越昂贵（正如我们在 BigQuery 架构中所期望的那样）

更有效地查询数据子集的最佳方法是什么？我能想到的一种方法是按天（或周、月等）将数据“分区”到单独的表中，然后在一个联合中一起查询它们：

`SELECT foo from mytable_2012-09-01, mytable_2012-09-02, mytable_2012-09-03;`

有没有比这更好的方法？？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-06-16T02:32:33.553

BigQuery 现在支持按日期进行表分区：

[https://cloud.google.com/blog/big-data/2016/03/google-bigquery-cuts-historical-data-storage-cost-in-half-and-accelerates-many-queries-by-10x](https://cloud.google.com/blog/big-data/2016/03/google-bigquery-cuts-historical-data-storage-cost-in-half-and-accelerates-many-queries-by-10x)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T00:04:31.590

嗨，大卫：处理这个问题的最佳方法是将数据分片到多个表中，并按照您在示例中的建议运行查询。

更清楚地说，BigQuery 没有索引的概念（通过设计），因此将数据分片到单独的表中是一种有用的策略，可以使查询尽可能经济高效。

另一方面，对于担心拥有太多表的人来说，另一个有用的功能是为表设置[过期](https://developers.google.com/bigquery/docs/reference/v2/tables#resource)时间，之后表将被删除并回收它们的存储 - 否则它们将无限期地持续存在。

# mysql - mysql数据库拒绝访问

> ID：12433323
> 
> 赞同：2
> 
> 时间：2012-09-14T23:43:47.547
> 
> 标签：mysql, ubuntu, phpmyadmin, silverstripe, modx-revolution

我想安装 CMS，第一次尝试安装“Silver Stripe CMS”，但安装挂起在数据库中，它向我显示此错误：我在“localhost”上找不到数据库服务器：用户“root”的访问被拒绝'@'localhost'（使用密码：否）

然后我尝试安装 CMS “Modx” 仍然挂在数据库上，这次的消息是： Connexion au serverur MySQL：
未指定处理器！

我试图重新安装 PhpMyAdmin，我 affice 这个错误：

> Une erreur s'est produite lors de la création de la base de données。
> 
> 错误 1045 (28000): 用户 'root'@'localhost' 的访问被拒绝（使用
> 密码：是）
> 
> Vous pouvez soit recommencer soit放弃者l'opération。Si vous
> choisissez « Recommencer », la mise à jour sera tentée à nouveau en vous posant à nouveau les questions de configuration。Avec l'option « Recommencer avec les memes réglages », la mise à jour sera tentée immédiatement。Avec le choix « Abandonner », la mise à jour échouera et vous devrez revenir à la version précédente, désinstaller et
> reconfigurer ce paquet, à moins d'effectuer vous-même les opérations
> pérations pour continuer à l'utiliser。Enfin, le choix « Ignorer »
> poursuivra les opérations en ignorant les erreurs ultérieures issues de dbconfig-common。
> 
> ```
> <Ok> 
> ```

虽然我以 root 身份登录我的 phpmyadmin 并且我的密码没有问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:52:03.110

我认为赠品就在这一点：

> 用户 'root'@'localhost' 的访问被拒绝（使用密码：否）

看起来好像没有为您安装的 CMS 设置密码。我不熟悉 silverstripe，但似乎您需要在某处编辑文件才能告诉它密码。

此外，`root`可能不建议使用该用户，我建议在您的数据库上创建一个具有您想要的权限的辅助用户，并在 CMS 中使用该帐户。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T05:54:11.213

如果您已登录，请尝试从命令行连接，`root`只需键入`mysql`并输入即可。如果有效，则问题出在应用程序级别。

寻找银条配置文件：
`<your app root folder>/conf/ConfigureFromEnv.php`

并确保在以下行中正确设置凭据：

```
/* Database connection */
define('SS_DATABASE_SERVER', 'localhost');
define('SS_DATABASE_USERNAME', 'root');
define('SS_DATABASE_PASSWORD', ''); 
```

我同意我朋友 Fluffeh 的观点，你不应该使用`root`- 最好为 Silver Stripe 创建一个专用用户。

# ios - 确定细胞的当前状态

> ID：12433330
> 
> 赞同：11
> 
> 时间：2012-09-14T23:44:40.443
> 
> 标签：ios, cocoa-touch, uitableview

我知道一个子类`UITableViewCell`可以在转换时实现`willTransitionToState`和执行自定义代码。但是有没有办法找到细胞的当前状态？

如果不是，我应该继承`UITableViewCell`并定义一个属性`currentState`，我总是在我的`willTransitionToState`? 然后我总有办法知道任何特定细胞的状态。

似乎很奇怪，我不能询问一个单元格的当前状态是什么（0、1、2 或 3）。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-15T02:06:24.307

当前状态为`UITableViewCellStateDefaultMask`(0)、`UITableViewCellStateShowingEditControlMask`(1)、`UITableViewCellStateShowingDeleteConfirmationMask`(2) 和`UITableViewCellStateShowingEditControlMask | UITableViewCellStateShowingDeleteConfirmationMask`(3)。

这些状态对应于属性[`editing`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableViewCell/editing)和的值[`showingDeleteConfirmation`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewCell_Class/Reference/Reference.html#//apple_ref/occ/instp/UITableViewCell/showingDeleteConfirmation)。可以进行如下测试：

```
if (!cell.editing && !cell.showingDeleteConfirmation) {
    // 0 - UITableViewCellStateDefaultMask
} else if (cell.editing && !cell.showingDeleteConfirmation) {
    // 1 - UITableViewCellStateShowingEditControlMask
} else if (!cell.editing && cell.showingDeleteConfirmation) {
    // 2 - UITableViewCellStateShowingDeleteConfirmationMask
} else if (cell.editing && cell.showingDeleteConfirmation) {
    // 3 - UITableViewCellStateShowingEditControlMask | UITableViewCellStateShowingDeleteConfirmationMask
} 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-06T22:18:28.727

对于 iOS 6，这是我的解决方案：

适用于任何过渡状态并处理滑动以删除手势。将此代码放在 UITableviewCell 的子类中。

```
- (void)willTransitionToState:(UITableViewCellStateMask)state {

    [super willTransitionToState:state];

    if (state == UITableViewCellStateDefaultMask) {

        NSLog(@"Default");
        // When the cell returns to normal (not editing)
        // Do something...

    } else if ((state & UITableViewCellStateShowingEditControlMask) && (state & UITableViewCellStateShowingDeleteConfirmationMask)) {

        NSLog(@"Edit Control + Delete Button");
        // When the cell goes from Showing-the-Edit-Control (-) to Showing-the-Edit-Control (-) AND the Delete Button [Delete]
        // !!! It's important to have this BEFORE just showing the Edit Control because the edit control applies to both cases.!!!
        // Do something...

    } else if (state & UITableViewCellStateShowingEditControlMask) {

        NSLog(@"Edit Control Only");
        // When the cell goes into edit mode and Shows-the-Edit-Control (-)
        // Do something...

    } else if (state == UITableViewCellStateShowingDeleteConfirmationMask) {

        NSLog(@"Swipe to Delete [Delete] button only");
        // When the user swipes a row to delete without using the edit button.
        // Do something...
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-21T19:55:47.283

应用了 Neil 评论的 jhilgert00 快速版本：

```
override func willTransitionToState(state: UITableViewCellStateMask) {

    super.willTransitionToState(state)

    if (state == UITableViewCellStateMask.DefaultMask) {
        println("default")
    } else if (state & UITableViewCellStateMask.ShowingEditControlMask != nil)
        && (state & UITableViewCellStateMask.ShowingDeleteConfirmationMask != nil) {
            println("Edit Control + Delete Button")
    } else if state & UITableViewCellStateMask.ShowingEditControlMask != nil {
        println("Edit Control Only")
    } else if state & UITableViewCellStateMask.ShowingDeleteConfirmationMask != nil {
        println("Swipe to Delete [Delete] button only")
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-08-14T21:03:35.403

从 swift 3 开始，state 的值是一个 OptionSet，你可以像这样使用它：

```
override func willTransitionToState(state: UITableViewCellStateMask) {
    super.willTransitionToState(state)
    if state.contains(.DefaultMask) {
        print("DefaultMask")
    }
    if state.contains(.ShowingEditControlMask) {
        print("ShowingEditControlMask")
    }
} 
```

# javascript - 使用 JavaScript 控制台修改脚本的结果

> ID：12433336
> 
> 赞同：3
> 
> 时间：2012-09-14T23:45:44.107
> 
> 标签：javascript, google-chrome

在 Chrome 中，这个[小提琴](http://jsfiddle.net/4ujmy/1/)打印`false`. 但是，在 JavaScript 控制台中输入的相同代码会打印`true`：

```
a = 1;
var a = 2;
console.log(delete a);​ 
```

为什么会根据我是否使用 Chrome 控制台得到不同的结果？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:48:26.117

因为 Chrome 控制台在`eval`构造或类似的东西中运行，而不是在全局范围内运行。

StackOverflow 上有*很多*关于操作符的讨论。`delete`搜索`[javascript] delete`将有助于回答出现的其他问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T00:47:06.583

`var`定义的变量不能被删除。

# java - 带有字符串/Varchar 参数的 Spring JDBC 模板查询

> ID：12433339
> 
> 赞同：1
> 
> 时间：2012-09-14T23:46:13.703
> 
> 标签：java, spring, jdbc, jdbctemplate

```
SimpleDateFormat sdf = new SimpleDateFormat("dd/MM/yyyy");
String query = "select a.alert_id from alert a where (alert.last_execution is null or trunc(alert.last_execution) < to_date(?, 'dd/MM/yyyy') ) and alert.frequency = ?";
jdbcTemplate.query(query, new Object[] {sdf.format(new Date()), "DAILY"}, new AlertRowMapper()) 
```

它在查询行中返回异常：

SQL 状态 [99999]；错误代码 [17004]；无效的列类型；嵌套异常是 java.sql.SQLException: Invalid column type at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:83)

有人知道为什么它不起作用吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:10:36.787

尝试将 Date 对象直接发送到`jdbcTemplate`参数中并`to_date()`从查询中删除该部分。Spring 应该自动转换数据类型，而不是您在应用程序中转换字符串。

# selenium - 有没有办法暂停使用 PHPUnit 扩展 Selenium

> ID：12433340
> 
> 赞同：3
> 
> 时间：2012-09-14T23:46:21.237
> 
> 标签：selenium, phpunit, selenium-server

我的测试运行得太快了，代码总是失败。有没有办法暂停？

我试过 $this->pause('3000'); 和 $this->wait('3000'); 但它不起作用。

现在，我正在使用 $this->setSpeed('3000'); 但它运行得太慢了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T13:47:04.177

如果您确实需要等待一段固定的时间：[睡眠](http://php.net/manual/en/function.sleep.php)功能将按您的预期工作。

但更好的解决方案是[等待元素/文本可见](https://github.com/php-webdriver/php-webdriver/wiki/HowTo-Wait#elements-visibility-and-invisibility)- 测试将能够在 HTML 元素准备好后几乎立即恢复工作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-02T02:01:46.500

使用 setSpeed(300) 以合理的速度查看屏幕上发生的情况

# c# - 如何从类库中获取资源

> ID：12433343
> 
> 赞同：0
> 
> 时间：2012-09-14T23:46:34.607
> 
> 标签：c#, windows-phone-7

我正在编写一个类库（Windows Phone 7 目标），它有一个名为`SoundFilePath`.
在最常见的情况下，调用 WP 应用程序将使用 WAV 文件的相对路径填充它。然后预计类库会在某些事件中播放它。

将此视为 Windows Phone 解决方案的简化树结构，该解决方案将使用 MainPage.xaml 中的类库。

```
WPSolution_
           |_References
           |            |_MyClassLibrary.dll
           |_MainPage.xaml
           |_Sounds
           |            |_beep.wav 
```

在 MainPage.xaml 中的某个地方，您将拥有：

```
var mcl = new MyClassLibrary();
mcl.SoundFilePath = "Sounds/beep.wav"; 
```

**我的问题是我的类库如何知道在哪里寻找资源？**

我尝试了几件事，包括以下内容，但无济于事：

```
Uri uri = new Uri(SoundFilePath , UriKind.Relative);
StreamResourceInfo sri = Application.GetResourceStream(uri); // sri was null 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T16:14:20.450

Gros Lalo 提供的答案。只需将 WAV 的 Build Action 设置为 Content。

# django - Django：特定网址中有 2 个活跃用户

> ID：12433347
> 
> 赞同：0
> 
> 时间：2012-09-14T23:48:07.520
> 
> 标签：django, url, session, cookies, request

我根本不知道该怎么做。

我有一个与已知 url 链接的 html，带有两个按钮。想象这个 url 只与两个人/用户共享。

每个人都必须按下按钮签上自己的名字。

我尝试使用请求，但我不知道如何知道该视图中是否有多个用户处于活动状态。

另一点是：

一个人首先到达网址，当第二个出现时，如何在他们的浏览器中“刷新”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:00:27.117

您必须在某个模型中存储谁在什么视图中。

```
class UsersInURL(models.Model):
    users = models.ManyToManyField(User)
    url = models.CharField()
    # you'd probably want to use a through table and set up some expiration logic 
```

然后记住每次登录用户查看页面时都要修改这个模型；中间件听起来很适合这个。

```
class UserTrackerMiddleware(object):
    def process_view(self, request, *args, **kwargs):
          UsersInURL.users.through.filter(user=request.user).delete()
          users_in_url, created = UsersInURL.objects.get_or_create(url=request.path)
          users_in_url.users.add(request.user) 
```

然后要刷新他们的页面，您需要在服务器和浏览器之间设置某种通信，该通信会 ping 此模型并在检测到某些更改时刷新。

```
var lastCheckedUsers = undefined;
function checkForNewUsers() {
    $.get('/some-ajaxy-url/', { url: document.URL }, success: function(data) {
         // you'd have to set up a view that returns active users @ url
         if (lastCheckedUsers != data.users && lastCheckedUsers != undefined) {
            window.location.href = window.location.href; 
         };
        lastCheckedUsers = data.users;  // store last state; refresh if modified. 
    })
};
setInterval(checkForNewUsers, 1000); 
```

我相信这应该会产生一些想法。

# svn - 在tortoisesvn中，如何获取标记快照的只读副本

> ID：12433349
> 
> 赞同：1
> 
> 时间：2012-09-14T23:48:10.767
> 
> 标签：svn, tortoisesvn

我使用 tortoise-svn 作为我的源代码控制。我是 SVN 和 tortoise-svn 的新手，我一直在试图弄清楚如何获取标记快照的只读副本。

我的目录结构如下：

```
SVN
  MyProject
    branches
    tags
    trunk
      module1
      module2 
```

（目前“分支”和“标签”文件夹为空。）

我通过右键单击模块 2 创建了模块 2 的标记快照`tortoisesvn >> branch/tag`，如下所述：http: [//tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-branchtag.html](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-branchtag.html)

我将此标记的快照命名为“module2--alpha1”

我现在想将此标记快照中的文件下载到本地文件夹。我不会修改此本地文件夹中的文件。我将简单地使用这个下载的快照来构建我的网站的 alpha1 版本。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T08:50:56.383

你有两个选择：

*   查看该标签的新工作副本。然后，您将获得一个功能齐全的工作副本，您可以从中提交更改
*   将该标签导出到新文件夹。通过导出，您不会获得工作副本，而只会获得未版本控制的文件和文件夹。您不能从那里提交您所做的更改。

我想在您的情况下，导出是要走的路，因为这比签出更“只读”。

# svg - 如何获得正确的 SVG 尺寸/纵横比？

> ID：12433353
> 
> 赞同：0
> 
> 时间：2012-09-14T23:48:26.793
> 
> 标签：svg

我正在通过手动编码 svgs 做出一些指示。我已经使用 100x100 正方形中的点定义了一个多边形，并通过设置外部 SVG 元素的宽度和高度属性获得了我想要的纵横比。这是图形的 jsfiddle：http: [//jsfiddle.net/62WpR/](http://jsfiddle.net/62WpR/)。

不幸的是，文本被宽度和高度属性压缩。有没有什么方法可以在不压缩文本的情况下使用它们，或者做一些愚蠢的事情，比如对其应用转换？

如果这是不可能的，我想我将不得不在坐标空间中定义我想要的最终纵横比的路径。令人失望。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T17:29:58.037

解决了它。

通过将视图框设置为 1:2 的比例并在 svg 中的两个多边形上使用变换，我能够获得我想要的尺寸。只要将 CSS 中的尺寸设置为 2:1 的比例，图形就会正确显示。

我还明智地使用了 preserveAspectRatio 属性来使图像保持相同的纵横比。我只在 CSS 中设置宽度：http: [//jsfiddle.net/62WpR/3/](http://jsfiddle.net/62WpR/3/)

```
<svg baseProfile="full" contentScriptType="text/ecmascript" contentStyleType="text/css" id="svg" preserveAspectRatio="xMinYMin meet" version="1.2" viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg">
  <g transform="scale(1 .5)" stroke-linejoin="bevel" stroke="black">
       <polygon vector-effect="non-scaling-stroke" fill="#666" id="tab" points="20.0,95.0 5.0,50.0 20.0,5.0 90.0,5.0 95.0,15.0 95.0,85.0 90.0,95.0"></polygon>
       <polygon vector-effect="non-scaling-stroke" fill="#FFEA00" id="insert" points="25.0,95.0 10.0,50.0 25.0,5.0" visibility="visible"></polygon>
  </g>                                    
  <text fill="white" font-size="30" text-anchor="middle" x="60" y="36">999</text>
</svg>​ 
```

# python - Python、Hadoop 或其他语言中的图形聚类

> ID：12433354
> 
> 赞同：3
> 
> 时间：2012-09-14T23:48:36.947
> 
> 标签：python, graph, hadoop, cluster-analysis, graph-theory

有谁知道 python 中的一个包，它可以在一个非常大的无向图中（100,000 个节点和很多边）选择多个集群，以便在集群内最小化平方距离之和或类似的东西？我现在正在看 MCL：http: [//micans.org/mcl/](http://micans.org/mcl/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:30:23.310

It looks either spectral clustering with mahout or this MCL algo are gonna work.

# iphone - 当用户输入一定数量的字符时如何自动将光标移动到下一个字段

> ID：12433359
> 
> 赞同：1
> 
> 时间：2012-09-14T23:49:43.277
> 
> 标签：iphone, ios, xcode, uitextfield

我的应用程序有一个注册页面。系统会提示用户输入手机号码和四位 PIN 码以在应用程序中使用。有三个单元格字段有助于单元格格式的标准化——第一个字段是三位数字并保存区号，第二个字段也是三位数字，最后一个字段是四位。接下来是 PIN 字段。当用户在给定框中输入正确的位数时，我希望下一个字段变为活动状态。例如，当有人输入三位数的区号时，光标应前进到下一个框。

我已经让它工作了，这样如果一个人继续打字，光标就会移动。但是，它只在输入下一个数字*后*移动（例如，您输入三个区号，然后输入另一个数字，该数字将与光标一起出现在下一个框中；输入后光标不移动只有三位数字）。此外，我使用的方法似乎有一个小故障，如果字段已经具有所需的字符数，则无法编辑它们。

这是我目前使用的代码：

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
    NSUInteger newLength = newString.length;

    if (textField.tag == 3) {
        if (newLength == 4) {
            [cellField2 becomeFirstResponder];
        }
    }
        if (textField.tag == 4) {
            if (newLength == 4) {
                [cellField3 becomeFirstResponder];
            }
        }
            if (textField.tag == 5) {
                if (newLength == 5) {
                    [pinField becomeFirstResponder];
                }
        }
    if (textField.tag == 6) {
        if (newLength == 5) {
            [pinField resignFirstResponder];
        }
    }

    return YES;
} 
```

我感谢任何帮助，谢谢。

ETA：编辑以包含 danh 的代码，我知道这比我所做的更正确。但是，我的光标问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T04:55:30.217

请注意，您不需要使用标签，因为您将它们全部放在插座中，因此您可以使用：`if (textField == cellField1) {`，甚至更好：`if (textField == self.cellField1) {`。这也使您更容易跟踪您的代码并识别您正在操作的文本字段。

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
    NSUInteger newLength = newString.length;

    if (textField == self.cellField1) {
        if (newLength == 3) {
            [cellField1 setText:newString];
            [cellField2 becomeFirstResponder];
            return NO; // NO because we already updated the text.
        }
    }

    if (textField == self.cellField2) {
        if (newLength == 3) {
            [cellField2 setText:newString];
            [cellField3 becomeFirstResponder];
            return NO;
        }
    }

    if (textField == self.cellField3) {
        if (newLength == 4) {
            [cellField3 setText:newString];
            [pinField becomeFirstResponder];
            return NO;
        }
    }

    if (textField == pinField) {
        if (newLength == 5) {
            [pinField resignFirstResponder];
            return YES;
        }
    }

    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T00:11:12.770

一些东西：

newLength 需要首先拥有新字符串，这应该可以解决计数问题：

```
NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];
NSUInteger newLength = newString.length; 
```

接下来，您可以发送`becomeFirstResponder`. 无需发送辞职，因为它隐含在成为。

`YES`这种方法应该在最后回答。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-08T03:18:56.377

lnafziger 的回答效果很好！那些正在寻找快速解决方案的人，这是我的 swift 2.2 代码。

```
func textField(textField: UITextField, shouldChangeCharactersInRangerange: NSRange, replacementString string: String)-> Bool 
{

    let newString = ((textField.text)! as NSString).stringByReplacingCharactersInRange(range, withString: string)// Convert text into NSString in order to use 'stringByReplacingCharactersInRange' function

    let newLength = newString.characters.count  // Count the length of 'String' type variable

    if (textField == cellField1) {

        if (newLength == 3) {

            cellField1.text = newString
            cellField2.becomeFirstResponder()
            return false
        }
    }

    if (textField == cellField2) {

        if (newLength == 3) {

            cellField2.text = newString
            cellField3.becomeFirstResponder()
            return false
        }
    }

    if (textField == cellField3) {

        if (newLength == 4) {

            cellField3.text = newString
            pinField.becomeFirstResponder()
            return false
        }
    }

    if (textField == pinField) {

        if (newLength == 5) {

            pinField.resignFirstResponder()
            return true
        }
    }

    return true

} 
```

# css - 如何用 CSS 让 Bootstrap 的水平表单标签更小？

> ID：12433360
> 
> 赞同：14
> 
> 时间：2012-09-14T23:49:53.980
> 
> 标签：css, twitter-bootstrap

Bootstrap 有很多[关于表单类型的示例](https://getbootstrap.com/2.3.2/#forms)。我有兴趣使用看起来像这样的“水平形式”

[![图片.png](../Images/9a5c8cfe0d5c2f96e5ab028f354d96ba.png)](https://i.stack.imgur.com/36FPr.png)

这是使用 Web 检查器工具栏概述一些元素后的样子：

[![图片2.png](../Images/6dd6dde1747483e2f56833849e378256.png)](https://i.stack.imgur.com/yChlu.png)

我在弹出模式中工作，空间已经有点紧张了。我尝试将引导程序的网格系统`.span1`和`.span2`标签作为一个类添加，但它没有提供所需的行为。

有没有办法使用引导程序的其他方面来获得所需的行为（即收紧水平表单上的标签占用的空间量）？这样做的正确方法是什么？我正在使用引导版本`2.1`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T02:03:48.343

我不知道引导程序是否为它定义了一些东西..下面是一种解决方法..

```
<div class="control-group">
<label class="control-label" style="width:auto" for="inputEmail">Email</label>
<div class="controls" style="margin-left:auto">
<input type="text" class="input-small" id="inputEmail" placeholder="Email">
</div>
</div> 
```

我添加了`style="width:auto"`哪个是默认`140px`的，`style="margin-left:auto"`哪个是默认的`160px`的。还`class="input-small"`可以减少输入字段宽度以挤出更多空间，使其适合模态..

现在您可以根据需要进一步调整以适应它..

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-06-26T18:22:45.223

要减小垂直间距，`form-control-sm`请缩小字体大小（使用 Bootstrap 4）：

```
<form>
  <div class="form-group form-row">
    <label class="col-sm-2 col-form-label form-control-sm">Label</label>
    <div class="col-sm-3">
      <input class="form-control form-control-sm">
    </div>
  </div>
</form> 
```

# unity3d - 统一编译最后一个脚本

> ID：12433361
> 
> 赞同：0
> 
> 时间：2012-09-14T23:50:07.930
> 
> 标签：unity3d

有什么办法（最好是在代码中，但检查员也可以）最后编译一个统一的脚本吗？我检查了统一脚本参考，它说要把它放在一个编辑器文件夹中，但这会扰乱我的组织，有什么办法可以做到吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-16T22:36:27.053

进入inspector并找到一个脚本，然后点击顶部的“Execution Order”

![图片](../Images/10e5b19f54d453377d63b76ef49a6f38.png)

然后您将看到“MonoManager”，然后您可以通过单击“+”按钮添加脚本并更改它们的执行顺序。否则，它们都会按照加载顺序在默认时间执行。

![图2](../Images/8c310b1bfd8900da7bb88ff4664221b7.png)

# perl - LWP::UserAgent 设置请求 url 的 ip，因此 LWP 不必进行 dns 查找

> ID：12433362
> 
> 赞同：0
> 
> 时间：2012-09-14T23:50:31.450
> 
> 标签：perl, dns, ip, lwp, lwp-useragent

我正在使用[LWP::UserAgent](http://search.cpan.org/~gaas/libwww-perl-6.04/lib/LWP/UserAgent.pm)请求大量页面内容。我已经知道我请求的 url 的 ip，所以我希望能够指定托管我请求的 url 的 ip 地址，这样 LWP 就不必花时间进行 dns 查找。我浏览了文档，但没有找到任何解决方案。有谁知道这样做的方法？谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T00:38:38.337

所以我找到了一个完全符合我要求的模块：[LWP::UserAgent::DNS::Hosts](https://metacpan.org/module/LWP::UserAgent::DNS::Hosts)

这是我测试并执行我在问题中指定的示例脚本：

```
#!/usr/bin/perl 
use strict;
use LWP::UserAgent;
use LWP::UserAgent::DNS::Hosts;

LWP::UserAgent::DNS::Hosts->register_host(
        'www.cpan.org' => '199.15.176.140',
);

my $ua = LWP::UserAgent->new;
$ua->timeout(10);
$ua->env_proxy;

#actually enforces new DNS settings as if they were in /etc/hosts
LWP::UserAgent::DNS::Hosts->enable_override;

my $response = $ua->get('http://www.cpan.org/');

if ($response->is_success) {
    print $response->decoded_content;  # or whatever
}
else {
    die $response->status_line;
} 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T00:02:23.173

嗯，你的系统应该已经在缓存 DNS 响应了。您确定此优化会有所帮助吗？

* * *

选项1。

利用

```
http://192.0.43.10/ 
```

代替

```
http://www.example.org/ 
```

当然，如果服务器执行基于名称的虚拟主机，那将失败。

* * *

选项 2。

用缓存版本替换`Socket::inet_aton`（从 LWP::Protocol::http 调用的 IO::Socket::INET 调用）。

```
use Socket qw( );
BEGIN {
    my $original = \&Socket::inet_aton;

    my %cache;
    my $caching = sub {
       return $cache{$_[0]} //= $original->($_[0]);
    };

    no warnings 'redefine';
    *Socket::inet_aton = $caching;
} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-15T00:01:33.520

只需将域名替换为 URL 中的 IP 地址即可：

```
use strict;
require LWP::UserAgent;

my $ua = LWP::UserAgent->new;
$ua->timeout(10);
$ua->env_proxy;

# my $response = $ua->get('http://stackoverflow.com/');
my $response = $ua->get('http://64.34.119.12/');

if ($response->is_success) {
    print $response->decoded_content;  # or whatever
}
else {
    die $response->status_line;
} 
```

# sql-server-2005 - 在哪里修剪/编码/修复从端到端 ASP 到 SQL 的字符？

> ID：12433364
> 
> 赞同：1
> 
> 时间：2012-09-14T23:51:00.500
> 
> 标签：sql-server-2005, encoding

我有一个 ASP Classic 应用程序，它允许人们将 Word 文档复制并粘贴到常规表单字段中。然后我通过 jQuery Ajax 将该文档发布到保存信息的 SQL Server。

我的问题是花引号和其他单词字符在它们回来时会变成奇怪的字符。

我试图在我的保存例程（经典的 asp 存储过程）中过滤它们，但我仍然不能完全消除这些问题。

ASP 页面有这个带有 ISO-8859-1 字符集的标题。将字符粘贴到文本输入字段时看起来不错。

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xml:lang="en" xmlns="http://www.w3.org/1999/xhtml" lang="en">
    <head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1"> 
```

我的 jQuery 代码在 ASP 页面中构建以下 JSON：

```
var jsonToSend = { serial: serial, critiqueText: escape(critiqueText) }; 
```

数据库排序规则设置为**SQL_Latin1_General_CP1_CI_AS**

我使用 TEXT 和`VARCHAR`字段来保存文本（是的，我知道 Text 字段类型不是首选，但这是我现在拥有的）。

我必须在每一点做什么来确保 (1) Word 字符被剥离，以及 (2) 编码前后一致，所以我不会显示任何奇怪的字符？

哦- ASP Classic 3 在 Windows Server 2003 上以 32 位模式运行，针对 SQL Server 2005。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:31:17.870

快速而肮脏的解决方案是在后端数据库中使用 nvarchar 和 ntext。您提到的奇怪字符是编码问题。例如见下面的例子。

*   İiıIÜĞ 土耳其语 win-1254
*   Ä°iÄ±IÃœÄ 在正常 ANSI
*   C4B069C4B149C39CC49E 它们都具有相同的十六进制值。

您在网页中使用 ISO-8859-1 编码。这意味着您只能保存仅是完整 unicode 的前 256 位的 ASCII 字符。看到这个[答案](https://stackoverflow.com/questions/6296936/can-sql-server-sql-latin1-general-cp1-ci-as-be-safely-converted-to-latin1-genera)。您在数据库中使用 Latin1。大约这三个字符集是相等的。Latin1-General = [Win 1252](http://msdn.microsoft.com/en-us/library/cc195054.aspx) = [IEC_8859-1](http://en.wikipedia.org/wiki/ISO/IEC_8859-1)。

```
 ISO/IEC_8859-1 is the basis for most popular 8-bit character sets, including Windows-1252 and the first block of characters in Unicode.

  SQL_Latin1_General_CP1_CI_AS:- Latin1-General, case-insensitive, accent-sensitive, kanatype-insensitive, 
  width-insensitive for Unicode Data, SQL Server Sort Order 52 on Code Page 1252 for non-Unicode Data 
```

这意味着您输入到数据库[前 256 位值的任何字符都是安全的](https://stackoverflow.com/questions/7048745/difference-between-utf-8-and-iso-8859-1)。如果您知道客户端的默认编码。我建议尝试这种默认编码，看看是否可以恢复一些信息。我在土耳其举了一个例子，我知道大多数客户使用 Win1254，因此我会尝试将值更改为该编码，看看我可以恢复任何东西。

您回答的第二部分是您可以安全地从 varchar 更改为 nvarchar 而不会丢失信息。在这里，不丢失信息的这将是第一部分十六进制值（第一个 256 值）。你的奇怪字符会保留，但其他角色会保留。

这个[答案](https://stackoverflow.com/questions/8157602/change-datatype-varchar-to-nvarchar-in-existing-sql-server-2005-database-any-is)和[链接的文章](http://rusanu.com/2011/10/20/sql-server-table-columns-under-the-hood/)提供了更多信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-03T10:51:30.010

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T18:00:24.753

I deal with importing of crazy characters into SQL all day long and nvarchar is the way to go. Unless they're numbers or something of that sort I set the columns to nvarchar(max) so I won't have to deal with it. The only exception you have to keep in mind is if you're going to use Foreign Keys then you'll have to set it to nvarchar(450). This handles all kinds of crazy characters, spacing, and gaps in text as the result of tabs.

# android - 从 Android 服务中打开数据库连接时出错

> ID：12433365
> 
> 赞同：1
> 
> 时间：2012-09-14T23:51:09.893
> 
> 标签：android, sqlite, android-service, runtime-error

我必须从 Service android 调用一种方法来打开与内部 android 数据库（sqlite）的连接。我正在使用以下代码：

```
public class myService extends Service{

public void setDB(DB_DatabaseManager db){
    dbManager = db;
}

public DB_DatabaseManager dbManager;
private Timer timer; 

public IBinder onBind(Intent intent){
    return null;
}

public void onCreate(){
    super.onCreate();
    Log.i("my attempt","service activated");
    TimerTask task = new TimerTask(){
        public void run(){
            Log.i("my attempt","ANDROID SERVICE RUNNING!");
            dbManager.open(); // <--this statement generates error!
                            // --- in this section I start the communication with database

        }

    };
    timer = new Timer();
    timer.schedule(task, 0, 20000);
}

public void onDestroy(){
    super.onDestroy();
    timer.cancel();
    timer = null;
    Log.i("my attampt", "service stopped");
} 
```

open() 定义为：

```
 SQLiteDatabase mDb=mDbHelper.getWritableDatabase(); 
```

为了调用我使用的服务：

```
 myService serv = new myService();
    serv.setDB(dbManager); 
    startService(new Intent(this,myService.class)); 
```

如果我删除行 dbManager.open(); 一切正常 但是，我的代码的其他部分中的方法 dbManager.open() 效果很好。但在这种情况下，我在 logcat 中收到以下错误：

```
 09-14 23:44:32.287: E/AndroidRuntime(1115): FATAL EXCEPTION: Timer-0
   09-14 23:44:32.287: E/AndroidRuntime(1115): java.lang.NullPointerException
   09-14 23:44:32.287: E/AndroidRuntime(1115):  at host.framework.myService$1.run(myService.java:49)
   09-14 23:44:32.287: E/AndroidRuntime(1115):  at java.util.Timer$TimerImpl.run(Timer.java:284) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:24:04.127

不要尝试这样做...

```
myService serv = new myService(); 
```

与`Activity`类类似，`Service`是一个“特例”类，你永远不应该尝试使用`new`.

A`Service`是使用`bindService(...)`or创建`startService(...)`的，操作系统负责创建/实例化它。

在您的情况下，您似乎需要`Service`能够访问数据库“助手”类，并且有多种方法可以做到这一点。

一种方法是扩展`Application`该类并让它创建 db 帮助器的实例并保存`static`对它的引用。这样在 中`Service`，您可以简单地使用...

```
MyApp.mDbHelper.open(); 
```

或者将`singleton`模型用于您的数据库助手，这将允许您在`Service`...中执行以下操作

```
DB_DatabaseManager.getInstance().open(); 
```

# css - 如何垂直拉伸 div 列以适应其容器？

> ID：12433370
> 
> 赞同：1
> 
> 时间：2012-09-14T23:51:44.713
> 
> 标签：css

所有内容都是动态的。

```
#block {
    width: 500px;
    background-color:#fff000;
    border: thin solid #999;

}
#col1{
    width: 300px;
    background-color:#ffffff;
    float:left;
    height:auto; 
    overflow: auto;
}

#col2{
    width: 180px;
    background-color:#ffaaff;
    float:right;
}
.clear {
    clear: both
}
```

```
<div id="block">
    <div id="col1">

      white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white 

    </div>

      <div id="col2">
        pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink 

      </div>
    <div class="clear"></div>  
</div>
```

我希望白色柱垂直拉伸以匹配粉色柱的高度（到达底部黄色边框）。我不喜欢使用绝对或相对显示。

这是 和 的解决`display:relative`方案`display:absolute`。它有效，但在更复杂的结构中给我带来了其他问题。

```
#block {
    width: 500px;
    background-color:#fff000;
    border: thin solid #999;
    position:relative;
}
#col1{
    width: 300px;
    background-color:#ffffff;
    float:left;
    height:100%; 
    overflow: auto;
    position:absolute;
}

#col2{
    width: 180px;
    background-color:#ffaaff;
    float:right;
}
.clear {
    clear: both
}
```

```
<div id="block">
    <div id="col1">

      white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white 

    </div>

      <div id="col2">
        pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink 

      </div>
    <div class="clear"></div>  
</div>
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T23:54:47.450

您不想使用绝对/相对？你想用什么*？*

这是仅修复 CSS，否则为背景图片 [http://unnaturalcode.blogspot.com/2012/08/css-recipe-for-making-elements-fill.html](http://unnaturalcode.blogspot.com/2012/08/css-recipe-for-making-elements-fill.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:57:19.777

看到这个：

```
html, body { height: 100% }

#block {
    width: 500px;
    background-color:#fff000;
    border: thin solid #999;
    height: 100%;
}
#col1{
    width: 300px;
    background-color:#ffffff;
    float:left;
    height:100%; 
    overflow: auto;
}

#col2{
    width: 180px;
    background-color:#ffaaff;
    float:right;
}
.clear {
    clear: none
}
```

```
<div id="block">
    <div id="col1">

      white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white white 

    </div>

      <div id="col2">
        pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink pink 

      </div>
    <div class="clear"></div>  
</div>
html, body { height: 100% }

#block {
    width: 500px;
    background-color:#fff000;
    border: thin solid #999;
    height: 100%;
}
#col1{
    width: 300px;
    background-color:#ffffff;
    float:left;
    height:100%; 
    overflow: auto;
}

#col2{
    width: 180px;
    background-color:#ffaaff;
    float:right;
}
.clear {
    clear: none
}
```

（我改变了你的清晰 DIV 并添加`height: 100%`到周围的元素。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-21T17:45:51.847

将要拉伸的元素及其所有父容器设置为`height:100%;`.

例如，

```
#element_to_be_stretched, html, body {height: 100%} 
```

# ruby-on-rails - will_paginate 导致 ActiveRecord::RecordNotFound 在显示

> ID：12433374
> 
> 赞同：0
> 
> 时间：2012-09-14T23:52:12.980
> 
> 标签：ruby-on-rails, ruby-on-rails-3, pagination

在我们的 rails 3.2.8 应用程序中，当单击下一页或第 1 页之后的另一个页面时，will_paginate 会导致 ActiveRecord::RecordNotFound 错误。这是错误：

```
ActiveRecord::RecordNotFound in LeaseBookingsController#show

Couldn't find LeaseBooking with id=search_results

Parameters:

{"page"=>"4",
 "id"=>"search_results"} 
```

search_results 是控制器中的自定义操作：

```
 def search_results
    @lease_booking = LeaseBooking.new(params[:lease_booking], :as => :roles_search)   
    @lease_bookings = @lease_booking.find_lease_bookings.paginate(:per_page => 40, :page => params[:page])
  end 
```

find_lease_bookings 是模型中检索lease_booking 记录的方法。该错误仅与 will_paginate 相关。在 gemfile 中有：

```
gem 'will_paginate', '~> 3.0' 
```

任何解决分页问题的解决方案？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T12:46:29.477

我今天遇到了类似的问题，浪费了很多时间。这就是原因。

“如果您的表单的操作是 POST（或任何其他 HTTP 方法），那么搜索词将不会应用于后续页面链接。换句话说，当您点击“下一页”或任何其他页面链接时，搜索参数（ s) 会丢失。”

看看这个链接。 [https://github.com/mislav/will_paginate/wiki/Simple-search](https://github.com/mislav/will_paginate/wiki/Simple-search)

所以解决方案是使用 GET 代替 POST。

# c# - Kinvey Rest API -- 使用 C# 后端的聚合 (Map/reduce)

> ID：12433375
> 
> 赞同：0
> 
> 时间：2012-09-14T23:52:14.640
> 
> 标签：c#, api, rest, mapreduce

我在浏览 kinvey (BAAS) 文档时遇到了使用 Map/reduce 的聚合概念。

[http://docs.kinvey.com/rest-aggregation.html](http://docs.kinvey.com/rest-aggregation.html)

由于 Kinvey 没有 .Net SDK，我们唯一的选择是使用 Rest API。我熟悉 REST API，但是，根据文档（上面的链接），但是，如何在 C# 后端代码的 API 请求参数中构造 Map/Reduce 语法？

我们想要制作的 windows Phone 应用程序将在后端包含 C# 代码。我们希望在应用程序中显示几个聚合模块/数据点。我想利用 kinvey 在 MongoDB 上运行时提供的 Map/reduce 功能，而不是使用 linq 并在代码中进行处理。

如果有人能对此有所了解，我将不胜感激。

谢谢拉胡尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T14:25:52.433

您想向 发送 POST 请求`/appdata/:appKey/:collectionName/_group`，其中 :appkey 是应用程序 ID， :collectionName 是您要在其上运行聚合的特定集合。

然后在正文中，您要指定 map/reduce 参数：

```
{
  "key": {
    "lastName":true
  },
  "initial": {
    "count": 0
  },
  "reduce": "function(doc,out){ out.count++;}",
  "condition": {
    "age": { "$gt":31 }
  }
} 
```

在此示例中，“ `key`”指定将被聚合的实体列名称。大多数时候你只想做一个，但你可以指定多个。" `initial`" 种子减少起始值，因为这是一个计数示例，它从零开始。“ `reduce`”是一个javascript函数；它传入实体 ( `doc`) 和我们的返回对象 ( `out`)。如果你想总结每个人的年龄而不是人数，它会像：`out.count += doc.age`. 最后你可以指定一个可选的“ `condition`”；这是一个使用查询语言的过滤器，只有满足条件的实体才会被评估。

作为参考，这里是 MongoDB 聚合文档。您应该能够在那里列出的所有内容[http://www.mongodb.org/display/DOCS/Aggregation](http://www.mongodb.org/display/DOCS/Aggregation)

查询语法的 Kinvey 文档：http://docs.kinvey.com/rest-filtering.html [（](http://docs.kinvey.com/rest-filtering.html)请记住，这是 body 对象中条件的一部分，而不是 POST uri）。

如果您需要它，这里有一个关于将字典转换为 JSON 的问题。[如何在 C# 中将字典转换为 JSON 字符串？](https://stackoverflow.com/questions/5597349/c-sharp-dictionary-to-json)

# java - 在 ... 标签内解析 HTML

> ID：12433378
> 
> 赞同：0
> 
> 时间：2012-09-14T23:52:34.533
> 
> 标签：java, android, xml-parsing, jsoup

所有-我有以下代码：

```
class AddStringTask extends AsyncTask<Void, String, Void> {    
    @Override
    protected Void doInBackground(Void... unused) {
        org.jsoup.nodes.Document doc = null;
        try {
            doc = Jsoup.connect("http://scores.espn.go.com/
                                 nfl/gamecast?
                                 gameId=320909007',%20'gamecast320909007"
                               ).get();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        docTitle = doc.select("head").first().text();
        return null;    
    }
} 
```

我得到输出“NFL Gamecast - Chicago vs Green Bay”（顺便说一句，Green Bay 赢了）。这很好，但是当我试图获得实际分数时，我无法弄清楚如何。我的问题是我试图用`<div id="awayScoreBox" class="vscorebox">...</div>`（这是在`<Body>`标签下）替换“头”。所以按照使用“head”标签的格式，我尝试了这个：

```
docTitle = doc.select("div id="awayScoreBox" class="vscorebox"").first().text();
return null; 
```

你可以想象我有一个语法错误，但不知道为什么。我意识到我可能必须指定这是在`<Body>`标签下，但我找不到有关如何执行此操作的任何信息。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:01:36.090

它是一个用于[同时选择 id 和 class](https://stackoverflow.com/questions/1944302/jquery-select-an-elements-class-and-id-at-the-same-time)的 css 选择器，所以它是

```
doc.select("div#awayScoreBox.vscorebox"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T00:12:08.767

你没有逃避引号。您当前正在使用它。

```
docTitle = doc.select("div id="awayScoreBox" class="vscorebox"").first().text();
return null; 
```

将部分更改`doc.select`为此。

```
doc.select("div id=\"awayScoreBox\" class=\"vscorebox\"").first().text(); 
```

这就是为什么你得到一个`SyntaxException`.

# iphone - 奇怪的 UITableView 错误

> ID：12433379
> 
> 赞同：2
> 
> 时间：2012-09-14T23:52:34.953
> 
> 标签：iphone, objective-c, ios, uitableview

设置 UITableView 时出现一个奇怪的错误。发生的情况是，当我第一次单击它时，什么也没有发生（它应该更改 UIView），但是当我单击它上方或下方的单元格时，它会更改为我想要显示的 UIView。我正在创建它，就像我创建的所有其他 tableview 一样，这里是代码：

```
- (void)viewDidLoad {

    [super viewDidLoad];
    TableView = [[UITableView alloc] initWithFrame:CGRectMake(0,0,320.0,120.0)]; 
    // Table View is an iVar in the header file
    TableView.dataSource = self;
    TableView.delegate = self;
}

-(CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath     {

    return 44;
}

-(CGFloat)tableView:(UITableView *)tableView heightForHeaderInSection:(NSInteger)section {

    return 10;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {

    return 5;
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {

    return 1;
}

-(UITableViewCell*)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString* CellIdentifier = @"CELLIDENTIFIER";
    UITableViewCell* cell = [TableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
        [cell setSelectionStyle:UITableViewCellSelectionStyleBlue];
        [cell setBackgroundView:[[GMCellBackground alloc] init]];
    }

    cell.textLabel.text = [array objectAtIndex:indexPath.row];
    return cell;
}

-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath {

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:22:24.620

我想我看到了你的问题。您在评论中写道，您在

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath 
```

请注意，它是**didDeselect**不是**didSelect**。你想要的我认为是改变观点

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
```

这是我认为人们接受 Xcode 的自动完成建议而没有注意到它不是正确的方法而导致的常见错误。

它在您第二次单击时起作用的原因是被选中的第一个单元格被取消选择，因此您的方法被调用。

# c# - Castle Windsor：在依赖解决后通过方法注入子依赖

> ID：12433380
> 
> 赞同：2
> 
> 时间：2012-09-14T23:53:14.150
> 
> 标签：c#, asp.net, dependency-injection, castle-windsor, ioc-container

我有以下工作单元。它允许我通过 IOC 添加存储库，然后根据类型访问我的服务中的这些存储库 - 无需在每次出现新存储库时重写工作单元。从我所做的研究来看，使用 Activator 并不足以担心性能影响。

```
public class DbContextUnitOfWork : IDisposable
{
   public DbContextUnitOfWork(DbContext dbContext))
   {
       // Set DbContext
   }

   public void AddRepository<T>() where T : IRepository
   {
       // Activate T and inject DbContext
       // Add to singleton list
   }

   public T GetRepository<T>() where T : IRepository
   {
       // If T exists on list return T
   }

   // Other methods such as save, dispose, etc.
} 
```

我的问题是，如何配置 Windsor，以便在它完成解析 DBContextUnitOfWork 后，我可以为我需要添加的每个存储库显式调用 AddRepository 方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T12:16:09.957

最后我发现我可以使用 Component.For().UsingFactory()，并且我可以注册一个为我构建 UnitOfWork 的自定义工厂。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T05:33:20.690

大概您正在添加存储库，因为稍后将需要它们。通常的方法是向 Windsor 注册存储库类型，并要求 Windsor 在此时解析存储库*，*而不是使用激活器预先创建它们。

# servicestack - 自定义 ServiceStack HTML 格式

> ID：12433381
> 
> 赞同：1
> 
> 时间：2012-09-14T23:53:49.530
> 
> 标签：servicestack

我想自定义 ServiceStack 使用的 HTML5 结果格式。我的基本目标是能够在资源之间嵌入 REST 样式的链接并在线识别它们。例如，我希望能够`link rel="edit"`在我的响应中嵌入一个 -type 元素并将其转换为适当的链接/表单/等。当它被渲染时。我还考虑了其​​他几个类似的自定义。

在调用 JSON API 的一侧构建一个静态站点会更容易吗？如果没有，我应该如何继续自定义现有格式？如果我可以提供自己的 CSS/JS，我想我可以解决我的迫切需求，但我对我可能忽略的任何其他扩展点感兴趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:16:14.663

[HtmlFormat](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Formats/HtmlFormat.cs)本身中只有有限的自定义可用，例如`TitleFormat`，`HtmlTitleFormat`等（有关详细信息，请参见 impl）。

HtmlFormat 的主体是一个嵌入式资源，因此包含在 ServiceStack dll 中。要[自定义 ServiceStack 中的任何嵌入资源，](https://github.com/ServiceStack/ServiceStack/wiki/Metadata-page#updating-html-and-metadata-page-templates)您只需将嵌入文件添加到与 ServiceStack 项目中相同的目录结构中，然后添加到您的主机项目中（优先）。

要覆盖正文，请在以下位置添加自定义版本的[HtmlFormat.html](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/Templates/HtmlFormat.html)：

```
/Templates/HtmlFormat.html 
```

否则，您可以完全删除它并添加自己的，例如：

```
Plugins.RemoveAll(x => x is HtmlFormat);
Plugins.Add(new MyNewHtmlFormat()); 
```

# c++ - 如何在类中使用数组变量？C++

> ID：12433382
> 
> 赞同：2
> 
> 时间：2012-09-14T23:54:29.423
> 
> 标签：c++, arrays, multithreading, class, variables

这是一个非常愚蠢的问题，但这里......

我有一个带有此代码的课程：

```
class ArraySection {
public:
    unsigned char *array;
    int start, stop, k;   
}; 
```

我要做的就是在我的主函数中创建这个类的一个实例。我正在尝试这样做（其中长度和 n 是预定义的）：

```
ArraySection *ASarrayPrimes = nullptr;
ASarrayPrimes->array[length];
ASarrayPrimes->start = stop;
ASarrayPrimes->stop += length;
ASarrayPrimes->k = 0; 
```

但我猜这不是正确的方法......？我们从来没有在课堂上真正讨论过这个。（如果您想知道，我应该使用线程来并行化筛算法以找到素数。）我想要做的是获取大量数组，将其分解为更小的数组（使用此 ArraySection 创建教授给出的课程），然后让线程在那些单独的较小线程中寻找素数。

编辑：我不能改变班级，伙计们。我只能用教授给的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-14T23:58:20.280

你永远不会为你的对象分配任何内存。使用 分配内存`new`，或将其保留在堆栈上。

您可以使用任一选项在类内分配数组。

```
ArraySection *ASarrayPrimes = new ArraySection; // On the heap
ASarrayPrimes->array = new char[SIZE]; // New character array on the heap
delete [] ASarrayPrimes->array;
delete ASarrayPrimes; // Make sure you free the memory

ArraySection ASarrayPrimes; // On the stack
ASarrayPrimes.array = new char[SIZE]; // New character array on the heap 
```

只要确保你也释放了那个`array`内存！更安全的方法是使用 a `std::vector<char>`or 实际上。a`std::string`而不是成员`char* array`，因为这些将为您处理分配/解除分配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-14T23:57:20.530

你所做的只是在你的班级里放了一个指针。要放置一个数组，您可以这样做：

```
class ArraySection {
public:
    unsigned char array[100];
    int start, stop, k;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-14T23:58:38.267

考虑：

```
class ArraySection {
public:
    string str; // or vector<type> for the type of the number
    int start;
    int stop;
    int k;
}; 
```

这避免了所有的阵列业务和错误。

如果需要，您可以访问 str.c_str() 以只读方式访问字符串 C 样式中的数据，但您不必担心实际长度。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T00:00:42.677

查看[本教程](http://www.cplusplus.com/doc/tutorial/)以学习 C++。

但是要回答您的问题，有两种方法可以分配对象的内存：

1-在堆栈上分配：

```
ArraySection arrayInstance; 
```

2-或在堆上：

```
ArraySection  *arrayInstance = new ArraySection(); 
```

然后你需要为`unsigned char *array`变量分配内存；

1-

```
arrayInstance.array = new unsigned char[1234]; 
```

2-

```
arrayInstance->array = new unsigned char[1234]; 
```

# c# - cshtml错误传递参数

> ID：12433385
> 
> 赞同：0
> 
> 时间：2012-09-14T23:54:59.330
> 
> 标签：c#, javascript, asp.net, razor

当我通过按钮进行重定向时如何传递参数：

*   当我调用方法afficher时，它需要参数我该如何添加它
*   我如何传递编辑器字段的值，如afficher（）的参数

文件：Index.cshtml

```
<body  onload="initialize()">

<div id="map_canvas" style="width: 800px; height: 500px;"></div>
@using (Html.BeginForm("Afficher", "Historique"))
{
    <div>
        <fieldset>
            <legend>Tracking Information</legend>

            <div class="editor-label">
               <label  title= "jour " runat="server" >             day of begin                 </label>
               </div>
                <div class="editor-field">
               <input id="day_begin" name= "day_begin" />
               </div>
               <div class="editor-label">
             <label  title= " heure " runat="server" >              hour of begin                 </label>
             </div>
             <div class="editor-field">
             <input id="hour_begin" name= "hour_begin" />
             </div>
             <div class="editor-label">
             <label  title= " minute " runat="server" >              minute of begin              </label>
             </div>
             <div class="editor-field">
             <input id="minute_begin" name= "minute_begin" />
             </div>
             <div class="editor-label">
             <label  title= " jour " runat="server" >                day of end                 </label>
             </div>
             <div class="editor-field">
              <input id="day_end" name= "day_end" />
              </div>
                <div class="editor-label">
             <label  title= " heure " runat="server" >               hour of end                 </label>
             </div>
              <div class="editor-field">
               <input id="hour_end" name= "hour_end" />
               </div>
               <div class="editor-label">
             <label  title= " minute " runat="server" >              minute of end              </label>
            </div>
            <div class="editor-field">
               <input id="minute_end" name= "minute_end" />
               </div>

            <p>
                <input type="submit" value="Done" runat="server" />
            </p>
        </fieldset>
    </div>
}
@using (Html.BeginForm())
{
    <div>
        <fieldset>
            <legend>Result</legend>

            <table id ="table 1" runat="server" ></table>

    </div>
    }

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Lay2.cshtml";
}
<script src="@Url.Content("~/Scripts/jquery-1.4.4.min.js")" type="text/javascript"></script>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
<script type="text/javascript">

    function initialize() {
        var myLatLng = new google.maps.LatLng(36.802584, 10.108191);
        var myOptions = {
            zoom: 30,
            center: myLatLng,
            mapTypeId: google.maps.MapTypeId.TERRAIN
        };
        var map = new google.maps.Map(document.getElementById("map_canvas"),
         myOptions);
        var flightPlanCoordinates = [
         new google.maps.LatLng(36.802584, 10.108191),
         new google.maps.LatLng(36.801897, 10.102955),
         new google.maps.LatLng(36.802275, 10.110788),
         new google.maps.LatLng(36.805024, 10.109049)
         ];
        var flightmarker = new google.maps.Marker({
            position: new google.maps.LatLng(36.802584, 10.108191),
            map: map,
            title: " denden"
        });

        var flightPath = new google.maps.Polyline({
            path: flightPlanCoordinates,
            strokeColor: "#FF0000",
            strokeOpacity: 1.0,
            strokeWeight: 2
        });
        flightPath.setMap(map);
    }

</script>

</body> 
```

文件 HistoriqueController.cs：

```
public ActionResult Afficher(int b1,int b2, int b3, int e1, int e2, int e3)
         {
             double d1 = b1 * 10000 + b2 * 100 + b3;
             double d2 = e1 * 10000 + e2 * 100 + e3;
             ViewBag.Title = (d2 - d1).ToString();
             Parcours p = new Parcours(d1, d2);
             var model = p._segments;

             return View(model);
         } 
```

我有错误：

```
The parameters dictionary contains a null entry for parameter 'b1' of non-nullable type 'System.Int32' for method 'System.Web.Mvc.ActionResult Afficher(Int32, Int32, Int32, Int32, Int32, Int32)' in 'MvcApplication7.Controllers.HistoriqueController'. An optional parameter must be a reference type, a nullable type, or be declared as an optional parameter.
Nom du paramètre : parameters 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:09:24.697

MVC 模型绑定器将在任何可以找到值的地方查找值，但必须以某种方式设置操作方法中的所有不可为空的参数，否则您将看到您看到的异常。

您可以在表单中添加这些参数，如下所示（隐藏或用户输入类型）：

```
@using (Html.BeginForm("Afficher", "Historique"))
{
    <fieldset>
        <legend>Tracking Information</legend>    
        <input id="b1" name= "b1" type="text" /> 
        <input id="b2" name= "b2" type="text" /> 
        <input id="b3" name= "b3" type="text" /> 

        <input id="e1" name= "e1" type="hidden" value="1" /> 
        <input id="e2" name= "e2" type="hidden" value="2" /> 
        <input id="e3" name= "e3" type="hidden" value="3" /> 
   <!-- etc -->
} 
```

或者，如果参数是可选的，那么您可以在 action 方法中使它们为空：

```
public ActionResult Afficher(int? b1, int? b2, int? b3, int? e1, int? e2, int? e3) 
```

# android - 方向更改后Android DialogFragment消失

> ID：12433397
> 
> 赞同：36
> 
> 时间：2012-09-14T23:57:39.417
> 
> 标签：android, android-fragments, android-lifecycle, android-dialogfragment

我有一个 FragmentActivity 支持 v4 类，它实现了两个并排（有点像 gmail）片段和一个可以调出 DialogFragment 的按钮。

除非我改变方向，否则这一切都很好。当我改变方向时，片段的状态不会被保存。

**主要问题是如果我打开了 FragmentDialog，它就会消失。**

我已经设置`setRetainInstance(true);`了所有片段，但没有帮助。

在我的清单中，我包括`android:configChanges="orientation"`但仍然没有帮助。

这是我的代码示例，感谢您的帮助。

```
public class AddMasterDialog extends DialogFragment {

    private int mTitle;
    private int mPrompt;
    private OnClickListener onSaveListener;
    private OnClickListener onCancelListener;

    public AddMasterDialog newInstance(int title, int prompt) {
        AddMasterDialog simpleDialog = new AddMasterDialog(title, prompt);
        return simpleDialog;
    }

    public AddMasterDialog() {
        // Empty constructor required for DialogFragment
    }
    public AddMasterDialog(int title, int prompt) {
        // Empty constructor required for DialogFragment
        mTitle = title;
        mPrompt = prompt;
    }
    public void setSaveButton(OnClickListener save){
        onSaveListener = save;
    }
    public void setCancelButton(OnClickListener cancel){
        onCancelListener = cancel;
    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setRetainInstance(true);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {

        //if(savedInstanceState == null){
            View view = inflater.inflate(R.layout.add_new_simple, container);
            getDialog().setTitle(mTitle);
            ((TextView) view.findViewById(R.id.add_simple_new_value_prompt)).setText(mPrompt);

            Button saveButton = (Button) view.findViewById(R.id.add_simple_save_button);
            saveButton.setOnClickListener(onSaveListener);

            //Cancel Button
            Button cancelButton = (Button) view.findViewById(R.id.add_simple_cancel_button);
            cancelButton.setOnClickListener(onCancelListener);
            return view;
        //}
    }
} 
```

在我的主要活动中：

```
private void initiateAddMasterPopupWindow() {
        try {
            addMasterDialog = new AddMasterDialog(R.string.add_new_master_dialog_title, R.string.add_master_new_value_prompt);
            addMasterDialog.setSaveButton(saveNewMasterClickListener);
            addMasterDialog.setCancelButton(cancelNewMasterClickListener);
            FragmentManager fm = getSupportFragmentManager();
            addMasterDialog.show(fm, ADD_NEW_MASTER);

        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-15T02:26:04.900

好的，所以问题似乎与`DialogFragment`兼容性库有关。

这篇文章中描述了[这个](http://code.google.com/p/android/issues/detail?id=17423)问题。

“片段的过时 DISMISS 消息保留在消息队列中。它`DialogFragment.onDestroyView()`在关闭旧对话框时已排队，并在创建新对话框后重新激活。

一个快速（可能很脏）的解决方法是`onDestroyView()`在调用`super.onDestroyView()`“

将以下代码添加到我的 DialogFragment 解决了这个问题：

```
 @Override
 public void onDestroyView() {
     if (getDialog() != null && getRetainInstance()) {
         getDialog().setDismissMessage(null);
     }
     super.onDestroyView();
 } 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-12-31T11:27:13.187

为了出于不同原因有相同问题的可怜的灵魂（我）的利益，我将发布此消息。只要您执行以下操作，就应该自动保留对话框片段：

1.  如果您调用 an `Activity onSaveInstanceState()`，**请确保调用超级函数！！！！**. 就我而言，这是关键。还要确保你在 Fragment 中做同样的事情。
2.  如果您使用`setRetainInstance`，您将需要手动存储这些值并重新应用它们。否则，在大多数情况下，您应该不必担心。如果你正在做一些更复杂的事情，你可能需要`setRetainInstance(true)`，否则忽略它。就我而言，我需要用它来为我的一个课程存储一个随机种子，但除此之外我还可以。
3.  有些人抱怨支持库中的一个错误，即在不应该发送关闭消息时发送。最新的支持库似乎已经解决了这个问题，所以你不必担心这个问题。

您不需要做任何花哨的事情，例如手动存储片段，如果您按照这些步骤操作，它应该会自动完成。总的来说，这似乎对任何拥有更现代的支持库的人都有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-11-25T17:32:05.843

就我而言，我有一个 DialogFragment 显示另一个 DialogFragment 使用

```
listDialogFragment.show(getChildFragmentManager(), "TAG"); 
```

将其更改为

```
listDialogFragment.show(getActivity().getSupportFragmentManager(), "TAG"); 
```

解决了这个问题

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-04-25T19:07:08.380

除了设置之外，`setRetainInstance(true);`只需将以下代码放在您的`DialogFragment`. 这是一个经过测试的解决方案。

```
private boolean isDismissible = false;

@Override
public void dismiss() {

    try {

        isDismissible = true;
        super.dismiss();

        Log.d(getClass().getSimpleName(), "Dialog dismissed!");

    } catch (IllegalStateException ilse) {
    }
}

@Override
public void onDismiss(DialogInterface dialog) {

    // So that dialog should not dismiss on orientation change
    if (isDismissible) {

        // So that dialog can be dismissed
        super.onDismiss(dialog);
    }
} 
```

# prism - 使用 Prism 4.0 配置 Enterprise Library 5.0

> ID：12433398
> 
> 赞同：1
> 
> 时间：2012-09-14T23:58:01.547
> 
> 标签：prism, enterprise-library, prism-4

我正在尝试将 EL 5.0 与棱镜一起使用。

作为引导过程的一部分 - 我创建了 Logger Facade 适配器 - 它使用以下代码进行日志记录...

```
var logwriter = EnterpriseLibraryContainer.Current.GetInstance<LogWriter>();     
logwriter.Write(message, category.ToString(), (int)priority); 
```

当引导程序正在进行时，框架会完成一些日志记录......并开始写入文件......

作为 ConfigureContainer() 的一部分，我注册了 EnterpriseLibraryContainer 以使用我的统一容器。

```
var configurator = new UnityContainerConfigurator(Container); 
// Read the configuration files and set up the container.         
EnterpriseLibraryContainer.ConfigureContainer(configurator, ConfigurationSourceFactory.Create()); 
```

在此阶段 - 任何后续日志记录（通过异常处理块）到同一日志记录目标侦听器都将写入新文件（增量文件），因为较早的文件由不同的实例保存

任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T23:39:52.400

在 EnterpriseLib 支持的帮助下，我能够解决这个问题......这是链接

[http://entlib.codeplex.com/discussions/395614](http://entlib.codeplex.com/discussions/395614)

# apache - 如何使用 puppet 为 apache 设置 documentroot？

> ID：12433408
> 
> 赞同：3
> 
> 时间：2012-09-14T23:59:42.490
> 
> 标签：apache, puppet, vagrant

我一直在尝试让 apache 从 /vagrant/ 使用 puppet 通过 vagrant 服务，我的清单如下所示：

```
class apache {
  exec { 'apt-get update':
    command => '/usr/bin/apt-get update'
  }

  package { "apache2":
    ensure => present,
  }

  service { "apache2":
    ensure => running,
    require => Package["apache2"],
    root => '/vagrant/'
  }
} 
```

我非常感谢您的帮助....我对清单文档的糟糕程度感到震惊。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-25T18:36:53.837

比使用模板等更改 httpd.conf 更容易，它是从 /var/www 到 /vagrant 的符号链接。添加

```
 file { '/var/www':
   ensure => 'link',
   target => '/vagrant',
   force => true,
} 
```

到你的 puppet 文件，你正在运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T06:35:45.190

资源管理进程，`service`但与配置文件没有任何关系。您的清单只是说“确保 apt 已更新，apache2 已安装并正在运行”。

我认为您正在寻找的内容可以使用模板（[http://docs.puppetlabs.com/guides/templating.html](http://docs.puppetlabs.com/guides/templating.html)）来处理。

# groovy - 在 IntRange 上调用 .each{} 返回范围而不是每个整数

> ID：12433413
> 
> 赞同：57
> 
> 时间：2012-09-15T00:00:32.310
> 
> 标签：groovy, int, range, each

我想我有一些有趣的期望......我想将数字从 1 迭代到 10。作为一个 while 循环，它是这样的：

```
def countMe = 1
while (countMe<11) {
  println countMe
  countMe++
} 
```

我期待以下内容也会这样做：

```
[1..10].each { println it } 
```

但它实际上打印的是`IntRange`，而不是`Integer`范围内的每个。`[x..y].each{}`获取每个数字列表的（语法上）最接近我的幻想的方法是什么？

* * *

## 回答 #1

> 赞同：105
> 
> 时间：2012-09-15T00:05:28.393

[使用括号而不是方括号：](http://ideone.com/dytPF)

```
(1..10).each{println it} 
```

`[1..10]`是包含单个范围的长度为 1 的列表。

# amazon-web-services - 如何将域从 Godaddy 移动到 AWS Route 53

> ID：12433420
> 
> 赞同：62
> 
> 时间：2012-09-15T00:01:38.133
> 
> 标签：amazon-web-services, amazon-route53

由于 Godaddy 宕机了几个小时，我和我的客户非常沮丧，想将一切都更改为 AWS。

到目前为止一切都完成了，只有域 (blablabla.com) 丢失了，我很难尝试从 godaddy 迁移到 Route 53，我是否必须从其中删除并从 AWS 从头开始​​创建？

有没有人有任何经验如何做到这一点？

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-09-15T01:17:05.160

解决方案：

在您的 aws 控制台上登录；点击 53 号公路；创建托管区域；选择您新创建的主机名称并单击“转到记录集”，记下名称服务器；

登录您的 Godaddy 帐户；选择您的域名；转到 Nameservers 并单击 SetNameservers；粘贴您从“Go to Record Sets”Route 53 获取的所有四个；

就是这样......，你不必再依赖 Godaddy 提供的这种可怕的服务了

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2015-03-12T13:51:04.833

您可以将域注册转移到 AWS Route 53。您必须“解锁”该帐户。

登录去爸爸。

转到*域详细信息*然后*设置*：

*   锁定：设置为关闭
*   授权码：通过电子邮件发送我的代码

Route 53 将需要授权码来完成转移请求。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-03-11T22:45:22.880

以下是将您的互联网域名迁移到 AWS 路由 53（DNS 管理器）的步骤。

** 请注意您的邮件服务器的托管位置，无论是在 Godaddy 邮件服务、Gmail (gsuite) 还是在您的 Cpanel 服务器（VPS/服务器）中。** 要增强您的域 DNS 功能，您需要将名称服务器、DNS 记录和域名转移到 AWS route53，这就是为什么建议迁移到 AWS Route 53。您可以让 Godaddy 成为 yourdomain.com 的所有者，并且通过 Route 53 管理您的 DNS

脚步：

1.  转到 Godaddy DNS 记录并了解每个记录并记下它们（截图）

2.  转到 AWS 路由 53，克里特岛公共托管区域（在 AWS 路由 53 上创建您的域）。这是一个很好的教程：

[https://www.clickittech.com/aws/migrate-godaddy-to-aws-route53/](https://www.clickittech.com/aws/migrate-godaddy-to-aws-route53/)

3.  将您的 Godaddy DNs 记录复制到您之前创建的公共托管区域。请记住，每条记录都需要存在于新的 aws 区域中。

4.  将您的名称服务器更改为 AWS Route 53。这意味着什么？为了允许 AWS 路由 53 管理您的域、DN 记录等，您需要将实际的 Godadaddy 名称服务器 (NS) 记录更改为 AWS 记录。

    *   转到 Godaddy 管理面板并登录
    *   转到 DNS 管理
    *   在名称服务器下单击更改 - > 自定义 - > 更改名称服务器

    您需要从 NSx.domaincontrol.com 更改为 AWS 名称服务器。

更多信息：[https ://www.clickittech.com/aws/migrate-godaddy-to-aws-route53/](https://www.clickittech.com/aws/migrate-godaddy-to-aws-route53/)

4-8 小时后，您的名称服务器将在您的国家、世界和网络中反映和传播。

实际上你已经完成了这个。

此外，如果您需要将您的网站或 Web 应用程序迁移到 AWS，请参阅本教程，很好的解释，见下文：

[https://www.clickittech.com/aws-migration/transfer-domain-aws-migrate-move-website-aws/](https://www.clickittech.com/aws-migration/transfer-domain-aws-migrate-move-website-aws/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-02-15T23:43:25.727

[上面The Poet](https://stackoverflow.com/users/1248959/the-poet)的答案对于移动所有内容很有用，但它也会杀死您使用 GoDaddy 的电子邮件服务。如果您想保持电子邮件服务器在 GoDaddy 上运行，您还需要获取您的 MX 电子邮件服务器及其优先级编号。我的看起来像这样...

```
0 smtp.secureserver.net
10 mailstore1.secureserver.net 
```

将这些带到您的 Route53 设置中，单击 Create Record Set，选择一种 MX Mail Exchange 类型，然后将这些值粘贴到其中（前面的数字如上所示）。保存记录集。

PJT[也是](https://stackoverflow.com/users/118566/pjt)正确的；由于某些特定于 AWS 的原因，Route53 中的所有域信息都以额外的句点结束，但不要担心——它不会影响生产行为。当您从 Route53 复制您的四个以粘贴到 GoDaddy 的名称服务器中时，您需要一次做一个，并在最后剪掉额外的时间段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2017-09-19T18:37:14.233

如果要将 DNS 记录迁移到 Route 53，则需要[从 GoDaddy 导出它们](https://ca.godaddy.com/help/export-my-domains-zone-file-records-4166)并在 Route 53 中手动重新创建它们。

要在一个自动化步骤中执行此操作，请考虑使用 DNSTools.ninja 等 DNS 迁移工具，如下所述：[https ://dnstools.ninja/migrate-bind-aws-route53-safely-3-commands/](https://dnstools.ninja/migrate-bind-aws-route53-safely-3-commands/)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-07-08T00:05:53.503

**如果你有 google mx 记录，请小心它们。**

### 为什么要转53路？

1.  AWS Route 53 不会将您限制为 64 个子域。
2.  AWS 允许您使用路由 53 托管存储桶

这一切都是50美分/月。

### AWS 名称服务器

现在要回答您的问题，您需要将名称服务器移动到路由 53。这意味着在 godaddy 名称服务器部分中应该填充 aws 名称服务器。请参阅此处的步骤。 [https://metamug.com/article/dns-migrate-godaddy-to-route-53.php](https://metamug.com/article/dns-migrate-godaddy-to-route-53.php)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-05-27T08:27:39.390

将域名注册商从 GoDaddy 转移到 Route 53 的详细步骤在[https://cloudopian.com/blog/how-to-transfer-domain-registrar-from-godaddy-to-amazon-route-53/](https://cloudopian.com/blog/how-to-transfer-domain-registrar-from-godaddy-to-amazon-route-53/)

请记住，您首先需要通过在 Route 53 中创建一个托管区域并将您的 godaddy 托管域指向使用 Route 53 的名称服务器而不是它自己的名称服务器来转移您的名称服务器。

# regex - 查找文件中包含两个或多个“;”的行 符号

> ID：12433431
> 
> 赞同：0
> 
> 时间：2012-09-15T00:03:53.467
> 
> 标签：regex, linux, string, grep

如何确定文件中具有两个或多个“；”的行 linux cmd中一行的符号？

谢谢，爸

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T00:10:47.497

使用`grep`：

```
grep '.*;.*;' filename 
```

这将打印至少包含 2 的行`;`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T03:53:34.613

其实，这就够了：

```
grep ';.*;' filename 
```

# bash - 通过在 bash 创建的脚本中执行 TortoiseProc.exe 来更新 SVN

> ID：12433436
> 
> 赞同：1
> 
> 时间：2012-09-15T00:04:36.627
> 
> 标签：bash

我需要在 bash 中创建的脚本中运行 SVN 更新，但它失败了。请你帮忙找出我做错了什么？

**脚本：**

```
echo SVN Update
alias svn="cd C/Program Files/TortoiseSVN/bin"
START TortoiseProc.exe /command:update /path:"cd C/CCUE" /closeonend:0 
```

* * *

**输出错误：**

```
+echo SVN $'Update\r'
SVN Update
' alias 'svn=cd C/Program Files/TortoiseSVN/bin
+ START TortoiseProc.exe /command:update '/path:cd C/CCUE' $'/closeonend:0\r' - line 7: START: command not found 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:31:23.180

为目录更改定义别名与执行该目录更改不同。更改目录也不是一个好主意，因为那时 TortoiseProc 将不知道您要更新哪个目录。

我建议使用`TortoiseProc.exe`完整路径或放入`TortoiseSVN/bin`PATH。

该错误也可能是由于`bash`找不到`START.EXE`.

我能够在不`START`使用以下行的情况下手动调用 TortosieProc

```
$ "/c/Program Files/TortoiseSVN/bin/TortoiseProc.exe" /command:update /path:"d:\Dir\LocalRepo" /closeonend:0 & 
```

注意该`path`参数是如何被 TortoiseProc 调用的，因此必须遵循 Windows 语法。如果我对路径使用 UNIX 样式，TortoiseProc 会抱怨。

*测试`cygwin`，Windows 7，TortoiseSVN 1.7*

# php - 如何使用 jQuery 通过 Ajax 发送复选框数组的值？

> ID：12433438
> 
> 赞同：15
> 
> 时间：2012-09-15T00:04:48.093
> 
> 标签：php, jquery, ajax, arrays

我有一个包含很多表单字段（12 xn 行）的表单。每行中的第一个字段（代表产品）是一个类似于以下内容的复选框：

```
<input type="checkbox" class="ids" name="ids[]" value="1"> 
```

每个复选框的值都是唯一的。

我想要做的是将检查的值发送到 PHP 脚本以通过 Ajax 进行处理。我遇到的问题是将 ID 正确地发送到服务器。我尝试过使用几种方法，包括：

```
$('.ids:checked').serialize(); 
```

和

```
var ids = [];
$('.ids:checked').each(function(i, e) {
    ids.push($(this).val());
});

$.ajax({
    url: "stub",
    type: "post",
    dataType: "json",
    data: {
        'ids[]': 'ids[]='+ids.join('&ids[]=')
    },
    success: function(data) {
        // stub
    }
}); 
```

但是这些都导致在服务器上得到这个：

```
ids[]=104&ids;[]=105 
```

我可以序列化整个表单并将其发送过来，但这可能会导致发送大量未使用的数据。

如何仅将 的值发送`delete[]`到服务器？理想情况下，PHP 将其识别为数组？

（我已经通过将 ID 作为逗号分隔的字符串发送来解决它，但我想知道如何实现这一点，因为我花了足够的时间试图弄清楚）。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-09-15T00:11:55.923

这对我来说很好

```
<input type="checkbox" class="ids" name="ids[]" value="2">
<input type="checkbox" class="ids" name="ids[]" value="3">
<input type="checkbox" class="ids" name="ids[]" value="4">
<input type="checkbox" class="ids" name="ids[]" value="5">
<input type="checkbox" class="ids" name="ids[]" value="6">

<div id="response"></div>
<button id="submit">Submit</button>

<script>

$('#submit').click(function() {

$.ajax({
    url: "stub.php",
    type: "post",
    data: $('.ids:checked').serialize(),
    success: function(data) {
    $('#response').html(data);
    }
});

});
</script> 
```

然后在 stub.php

```
var_dump($_POST); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T00:43:20.897

为什么不将 id 作为逗号分隔的字符串发送。您可以在服务器端拆分它并应用与之关联的逻辑..

```
var ids = [];
$('.ids:checked').each(function(i, e) {
    ids.push($(this).val());
});

$.ajax({
    url: "stub",
    type: "post",
    dataType: "json",
    data: {
        'ids[]': ids.join()
    },
    success: function(data) {
        // stub
    }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-02-17T03:54:41.860

**我工作正常的解决方案**

```
//get checkbox checked data as the array

var ids = new Array();
      $('input[name="ids[]"]:checked').each(function(){
         ids.push($(this).val());
      });

var dataString = 'ids='+ ids;

 $.ajax({
            type: "POST",
            url: "ajax_fees_pay_Directly.php",
            data: dataString,
            cache: false,
            success: function(data){

}
 }); 
```

# python - 调试python函数

> ID：12433443
> 
> 赞同：-1
> 
> 时间：2012-09-15T00:06:25.620
> 
> 标签：python

我无法让我的功能正常工作。我的函数需要是一个接受`*Asterisk`字符的参数，并将在后续行中打印出 1 个星号、3 个 ast.、5 个任何奇数。所以第一行将有 1 个 ast，第二行有 3 个 ast，依此类推。该参数将接受任何奇数`int`。

我的尝试：

```
def arrowHead(n):
    spaces = n / 2
    for x in range(1, n+2, 2):
        string_ln = ''
    for num in range(spaces):
        string_ln = string_ln + ' '
    for num2 in range(x): string_ln = string_ln + '*'
        spaces = spaces - 1
        print string_ln
        final_string = ''
    for x in range(n / 2):
        final_string = final_string + ' '
        final_string = final_string + '*'
    for x in range(3):
        print final_string 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T00:19:03.233

您将无法以这种方式打印箭头，因为您无法在空格之间打印字符！

你可以试试这样的东西吗？

```
def arrow(n):
  for x in range(n+1):
    print (' '*n)+(' *'*x)
    n -= 1

>> arrow(7)
>> 
       *
      * *
     * * *
    * * * *
   * * * * *
  * * * * * *
 * * * * * * * 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T00:25:23.213

如果要调试 Python 脚本，可以使用[`pdb`](http://docs.python.org/library/pdb.html). 例如，在系统的 shell 或命令行中：

```
python -m pdb yourscript.py 
```

然后，您可以使用`n`（跳过函数调用）、`s`（进入函数调用）单步执行脚本，使用 打印变量的状态`p yourvarname`，并使用其他几个命令（尝试使用`help`以查看所有命令，然后`help somecommand`查看详细帮助）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T00:11:28.883

您的问题不清楚，但如果您想打印星号奇数次，请使用此

```
def arrowHead(n):
   print '*' * (2*n-1) 
```

更新：-

```
>>> def arrow(n,flag=1):
    if flag<n:
        print (' '*(arrow(n,flag+1))+' * '*(n-(2*flag-1)))
    return 2*flag-1

>>> arrow(10)

            * 
          *  *  * 
        *  *  *  *  * 
      *  *  *  *  *  *  * 
    *  *  *  *  *  *  *  *  * 
```

# c++ - 在虚拟磁盘驱动程序中处理系统关闭

> ID：12433447
> 
> 赞同：1
> 
> 时间：2012-09-15T00:08:23.243
> 
> 标签：c++, c, windows, kernel, scsi

我正在为 Windows 开发一个虚拟磁盘驱动程序，它使用普通文件作为存储（很像 Windows 7 附带的 VHD 虚拟磁盘驱动程序）。

我的虚拟驱动程序支持写入并且有一个缓存，当操作系统关闭时我需要刷新它。明显的解决方案是处理`SRB_FUNCTION_SHUTDOWN/SRB_FUNCTION_FLUSH`SCSI 请求。

但是，如果**真实**磁盘（我的文件所在的磁盘）在我的虚拟驱动程序**之前收到关闭请求怎么办？**显然它将不再接受任何写入请求，我将无法刷新数据。

这个问题有什么解决办法吗？谢谢

# http - 寻找一个 http “Tee”

> ID：12433448
> 
> 赞同：1
> 
> 时间：2012-09-15T00:08:27.653
> 
> 标签：http

我正在寻找一个 http“tee”命令/servlet/{python,perl}-script。

基本上我想将一个 http post 请求分发给多台机器。一台机器或进程位于一个端口上并接收一个 http 请求，然后以相同的格式将其发送到许多其他机器。可以忽略下游服务器的响应，并且 http tee 将始终返回 HTTP_OK 而没有输出...

这听起来很简单，它应该已经存在。可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-09T12:34:47.927

可以使用 nc 创建一个慢速版本的 http tee。

```
mknod backpipe p
while [[ true ]] ; do (nc -l YOUR_MAIN_PORT 0<backpipe | tee >( cat > /dev/tcp/YOUR_TEE_HOST/PORT ) | nc YOUR_BACKEND_HOST YOUR_BACKEND_PORT | tee -a outflow 1>backpipe); done 
```

# xml - VB.net 2010 XML 节点解析

> ID：12433449
> 
> 赞同：0
> 
> 时间：2012-09-15T00:08:40.667
> 
> 标签：xml, vb.net, xml-parsing, vb.net-2010

我试图获得一些有关 XML 的帮助。我在网上找到了一些很好的代码示例，它适用于我想要获得的大部分内容，但并非适用于所有人。对此的任何帮助都会很好。我只得到组合数据。我正在研究如何在一个对象的循环中获取“ns0:NarrativeCreateDatetime”，在另一个对象中获取“ns0:NarrativeText”。

谢谢费尔南多

部分xml文件：

2012 年 9 月 14 日 07:49:23 - E911 信息 - 服务等级：BUSN

```
for Each item As System.Xml.XmlElement In Narrative
        If Not item.InnerText = "" Then

            objNarrative = item.InnerText
            x += 1
        End If
    Next 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:35:07.463

```
For Each item As System.Xml.XmlElement In DispatchTime
        If Not item.InnerText = "" Then
            For Each UnitNumber As System.Xml.XmlElement In item.GetElementsByTagName("ns0:UnitNumber")
                objUnitNumber = UnitNumber.InnerText
            Next
            For Each Dispatched As System.Xml.XmlElement In item.GetElementsByTagName("ns0:Dispatched")
                objUnitDispatched = Dispatched.InnerText
            Next
            For Each Enroute As System.Xml.XmlElement In item.GetElementsByTagName("ns0:Enroute")
                objUnitEnRoute = Enroute.InnerText
            Next
            For Each AtScene As System.Xml.XmlElement In item.GetElementsByTagName("ns0:AtScene")
                objUnitAtScene = AtScene.InnerText
            Next
            For Each InService As System.Xml.XmlElement In item.GetElementsByTagName("ns0:InService")
                objUnitInService = InService.InnerText
            Next
            ' Add Code to insert to DB

            objUnitNumber = ""
            objUnitDispatched = ""
            objUnitEnRoute = ""
            objUnitAtScene = ""
            objUnitInService = ""
        End If
    Next 
```

# c# - 从字符串名称在程序集中创建类实例

> ID：12433451
> 
> 赞同：2
> 
> 时间：2012-09-15T00:08:44.663
> 
> 标签：c#, .net, .net-assembly

我不确定这是否可行，而且我对在 C#.NET 中使用程序集还很陌生。

我想做的是在提供该类的字符串名称时创建一个类的实例。像这样的东西：

```
using MyAssembly;

namespace MyNameSpace
{
     Class MyClass
     {
          int MyValue1;
          int MyValue2;

          public MyClass(string myTypeName)
          {
               foreach(Type type in MyAssembly)
               {
                    if((string)type == myTypeName)
                    {
                         //create a new instance of the type
                    }
               }
               AssignInitialValues(//the type created above)
          }

          //Here I use an abstract type which the type above inherits from
          private void AssignInitialValues(AbstractType myClass)
          {
               this.value1 = myClass.value1;
               this.value2 = myClass.value2;
          }
      }
 } 
```

显然，您无法将字符串与类型进行比较，但它说明了我正在尝试做的事情：创建一个在与提供的字符串不同的程序集中找到的类型。

有什么想法吗？

* * *

**编辑：**

尝试后：

```
var myObject = (AbstractType) Activator.CreateInstance(null, myTypeName);
AssignInitialValues(myObject); 
```

我收到许多错误：

*   可访问性不一致：参数类型“MyAssembly.AbstractType”比方法“MyNameSpace.MyClass.AssignInitialValues(MyAssembly.AstractType)”更难访问
*   'MyAssembly.AstractType' 由于其保护级别而无法访问
*   找不到类型或命名空间名称“MyAssembly”（您是否缺少 using 指令或程序集引用？）
*   找不到类型或命名空间名称“AbstractType”（您是否缺少 using 指令或程序集引用？）

不完全确定为什么找不到程序集；我添加了对程序集的引用，并为程序集中的命名空间使用了 Using 指令。至于保护级别，它是调用只能是公共的类（或者更确切地说是类的构造函数）。

关于问题出在哪里的任何线索？

* * *

**更新：**

在浏览了几篇关于 SO 的文章后，我发现了这个：[https](https://stackoverflow.com/a/1632609/360627) : //stackoverflow.com/a/1632609/360627`AbstractType`公开课程解决了可访问性不一致的问题。

新的编译器错误是这样的：

无法将类型“System.Runtime.Remoting.ObjectHandle”转换为“MyAssembly.AbstractType”

它引用的行是这一行：

```
var myObject = (AbstractType) Activator.CreateInstance(null, myTypeName); 
```

使用`.Unwrap()`get 解决了这个错误，我认为这是正确的方法（不确定）。但是，在运行程序时，当调用此代码时，我会得到一个 TypeLoadException。

TypeLoadException：无法从程序集“MyNameSpace”加载类型“AbstractType”...

我马上可以发现它正在寻找的类型是正确的，但它正在寻找的组件是错误的。查找该`Activator.CreateInstance(String, String)`方法发现 null 作为第一个参数意味着该方法将在执行程序集中查找。这与原始帖子中所需的行为相反。

我尝试使用`MyAssembly`作为第一个参数，但这会产生错误：

“MyAssembly”是一个“命名空间”，但用作“变量”

我*认为*这是由于`MyAssembly`不是字符串造成的。但是，如果我尝试`'MyAssembly'`我会得到以下编译器错误：

*   字符文字中的字符过多
*   'System.Activator.CreateInstance(System.ActivationContext, string[])' 的最佳重载方法匹配有一些无效参数
*   参数 1：无法从 'char' 转换为 'System.ActivationContext'
*   参数 2：无法从 'string' 转换为 'string[]'

在我看来，它试图使用错误的重载。

关于如何解决这个问题的任何想法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T00:16:52.647

如果您有您的类型的完全限定名称，则根本不需要此`foreach`循环：

```
var myObject = (SomeBaseType) Activator.CreateInstance(null, myTypeName); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-15T00:32:41.367

有很多方法可以满足您的需求。不是最好的表现：

```
Activator.CreateInstance(null, myTypeName); 
```

你也可以使用这个：

```
var ci = Type.GetType(myTypeName).GetConstructor(Type.EmptyTypes);
var myTypeInstance = ci.Invoke(new object[]{}) 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-16T05:56:47.270

好的，这就是答案。我已经使用真实代码对其进行了测试，并且可以正常工作。我不确定这是最好的方法还是最有效的方法。我赞成其他两个答案，因为它们帮助我走上了正确的道路，但这是完整的答案。

```
using MyAssembly;

namespace MyNameSpace
{
     Class MyClass
     {
          int MyValue1;
          int MyValue2;

          public MyClass(string myTypeName)
          {
               string assemblyName = Assembly.GetAssembly(typeof(AbstractType)).ToString();
               AbstractType selectedClass = (AbstractType)Activator.CreateInstance(assemblyName, myTypeName).Unwrap();
               AssignInitialValues(selectedClass);
          }

          private void AssignInitialValues(AbstractType myClass)
          {
               this.value1 = myClass.value1;
               this.value2 = myClass.value2;
          }
      }
 } 
```

花了我三天的谷歌搜索，搜索 SO 和 MSDN，但它就在那里。请注意，使用`Activator.CreateInstance(String, String)`程序集名称（第一个参数）实例化类时，必须是完整的程序集名称，而不仅仅是 .dll（或 .exe）的名称。

可以通过使用`string assemblyName = Assembly.GetAssembly(typeof(AbstractType)).ToString();`where来检索程序集名称，其中`AbstractType`可以替换为您知道包含在程序集中并定义的类型。

类型名（第二个参数）必须是完全限定名，而不仅仅是类名。

# c++ - 我可以从 Visual Studio 的堆栈跟踪中省略对某个库的调用吗？

> ID：12433456
> 
> 赞同：4
> 
> 时间：2012-09-15T00:09:05.503
> 
> 标签：c++, visual-studio-2010, visual-c++, boost, callstack

当我使用 C++ boost 库并遇到断点时，我的堆栈跟踪总是被 boost 调用淹没。有没有办法告诉 Visual Studio（一些编译器标志？）我不想在我的调用堆栈中看到任何提升调用？

# actionscript-3 - 包含较大 TextField 的矩形上的 Actionscript 事件侦听器

> ID：12433457
> 
> 赞同：1
> 
> 时间：2012-09-15T00:09:10.513
> 
> 标签：actionscript-3, flash, actionscript

我有一个矩形，我想在上面显示一个标签。我试图通过创建一个矩形精灵来做到这一点，然后将一个 textField 添加到精灵的显示树中。

问题是文本字段周围似乎有很多额外的空白填充。尽管文本适合该框，但 textField 的边界超出了其包含矩形的可见区域。这也会导致矩形的宽度和高度发生变化。

问题是我希望用户能够在屏幕上拖动矩形。我添加了一个事件监听`MOUSE_DOWN`器来启动拖动。但是，用户可以通过单击可见矩形周围的区域来开始拖动，而不仅仅是在矩形本身上。我认为这是因为用户实际上会点击来自 TextField 的额外空白空间并从边缘渗出

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:10:47.293

我认为您正在寻找的是`textField.autoSize`参数。它使文本字段范围缩小到文本的大小（否则它具有默认的高度/宽度，无论它包含的文本如何）

```
import flash.text.TextField;
import flash.text.TextFieldAutoSize;

var textField:TextField = new TextField();

textField.autoSize = TextFieldAutoSize.LEFT;
textField.text = "your text"; //set this AFTER autoSize 
```

您还可以将 textField 的宽度设置为矩形的宽度。或者放弃 autosize 属性并手动将文本框的高度/宽度设置为矩形的高度/宽度，尽管这会截断任何不适合的文本。

文本字段上总是有一些填充。获取实际文本的确切边界可能很棘手（尽管有可能）。一种更简单的方法是仅屏蔽您的文本框。

如果你的矩形是用图形类绘制的，你可以这样做：

```
var rectangle:Sprite = new Sprite();
rectangle.graphics.beginFill(0xFF0000);
rectangle.graphics.drawRect(0,0,100,100);
addChild(rectangle);

var myMask:Shape = new Shape();
myMask.graphics.copyFrom(rectangle.graphics);
rectangle.addChild(myMask);

var textField:TextField = new TextField();
textField.width = rectangle.width;
textField.height = rectangle.height;
textField.mask = myMask;

rectangle.addChild(textField); 
```

您可以做的另一种选择是在您的事件侦听器中，检查目标是否是文本框并退出该函数。（如果您使用此方法，请确保您的文本字段的 mouseEnabled 属性为 true（默认））

```
function rectangleClickHandler(e:Event):void {
    if(e.target == myTextField) return;
    //rest of your code
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T22:51:43.767

您可以做的另一件事，可能比掩码等更简单，就是让文本字段不接收鼠标事件。这将阻止任何鼠标事件因与文本字段的交互而被触发，但您仍然可以在矩形上处理它们。

这里重要的项目是 mouseEnabled 标志。您在容器上启用 mouseChildren，但禁用容器和文本字段的 mouseEnabled。

```
var tf:TextField = new TextField();
tf.autoSize = TextFieldAutoSize.LEFT;
tf.text = "Testing the text mouse enabled";

var rectangle:Sprite = new Sprite();
rectangle.graphics.beginFill(0xFF0000);
rectangle.graphics.drawRect(0,0,100,100);

var container:Sprite = new Sprite();
container.addChild( rectangle );
container.addChild( tf );
addChild( container );

// IMPORTANT FLAGS HERE
tf.mouseEnabled = false;
container.mouseEnabled = false;
container.mouseChildren = true;

container.addEventListener( MouseEvent.ROLL_OVER, rollOverHandler, false, 0, true ); 
```

事件处理程序只会在容器的其他子项滚动时触发，而不是文本字段。使用此方法，您可以选择性地激活容器对象中启用鼠标的组件。

# android - 以编程方式或通过 xml 设置视图的宽度和高度

> ID：12433463
> 
> 赞同：0
> 
> 时间：2012-09-15T00:09:57.720
> 
> 标签：android

我注意到在在线教程中，人们使用特定的 dp 值来表示任何视图的宽度和高度

例如， android:layout width ="20dp" 我想知道，因为我们有这么多设备和密度，以编程方式确定这个值会更好吗？例如，我希望特定图像占据屏幕宽度的 20%，然后我将获得屏幕宽度并乘以 20% 并相应地设置宽度

你知道 dp 应该在任何屏幕上使其大小相等，无论密度是多少，但对于许多设备而言并非如此，例如galaxy s2和galaxy note

你能告诉我我的方法是否正确吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:32:31.963

更好的方法是在你的 xmls 中使用线性布局，并在其中设置 layout_weight 为你想要的值的子元素。您也可以在线性布局中使用 weight_sum 来设置最大权重。

例如

线性 weight_sum = 100 和内部带有 layout_weight = 20 的 textview。这意味着您的 textview 具有线性值的 20%。

ps：对于水平方向，权重=宽度和宽度= 0dp

对于垂直，重量 = 高度和高度 = 0

希望能帮到你^^

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T00:19:05.117

对于 dp 无法充分补偿的任何内容，您可以将不同分辨率的图像插入到您的备用可绘制文件夹中。它们被广泛命名为您的应用将接触到的不同屏幕尺寸，Android 将自行调整。根据我的经验，我尝试通过 xml 尽可能多地绘制图形，因为我发现它远没有那么麻烦。

# javascript - Javascript - 正则表达式奇数引号

> ID：12433464
> 
> 赞同：0
> 
> 时间：2012-09-15T00:10:10.560
> 
> 标签：javascript, regex

所以我有这个 javascript 正则表达式：

```
var reg = new RegExp("(?i)\b((?:[a-z][\w-]+:(?:/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))"); 
```

我怎么能转义引号以便包含引号，因为现在它们溢出并引用它后面的行。

编辑：正则表达式扩展：

```
(?xi)
\b
(                           # Capture 1: entire matched URL
  (?:
    [a-z][\w-]+:                # URL protocol and colon
    (?:
      /{1,3}                        # 1-3 slashes
      |                             #   or
      [a-z0-9%]                     # Single letter or digit or '%'
                                # (Trying not to match e.g. "URI::Escape")
    )
    |                           #   or
    www\d{0,3}[.]               # "www.", "www1.", "www2." … "www999."
    |                           #   or
    [a-z0-9.\-]+[.][a-z]{2,4}/  # looks like domain name followed by a slash
  )
  (?:                           # One or more:
    [^\s()<>]+                      # Run of non-space, non-()<>
    |                               #   or
    \(([^\s()<>]+|(\([^\s()<>]+\)))*\)  # balanced parens, up to 2 levels
  )+
  (?:                           # End with:
    \(([^\s()<>]+|(\([^\s()<>]+\)))*\)  # balanced parens, up to 2 levels
    |                                   #   or
    [^\s`!()\[\]{};:'".,<>?«»“”‘’]        # not a space or one of these punct chars
  )
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:47:08.680

如果你只是在javascript中使用正则表达式的原生声明形式：

```
var reg = /regex here/; 
```

然后，您可以在正则表达式中自由使用引号而无需转义任何内容。您必须通过在正则表达式前面放置反斜杠来转义正则表达式中的任何正斜杠。

如果您想坚持使用字符串形式，那么您可以在引号前用反斜杠转义引号，以防止它成为字符串终止符：

```
var reg = new RegExp('My dog\'s breath'); 
```

# java - 错误运行 mvn checkstyle:checkstyle

> ID：12433466
> 
> 赞同：2
> 
> 时间：2012-09-15T00:10:18.870
> 
> 标签：java, maven, plugins, eclipse-plugin, checkstyle

执行命令时出现以下错误`mvn checkstyle:checkstyle`：

```
An error has occurred in Checkstyle report generation.
...
Caused by: com.puppycrawl.tools.checkstyle.api.CheckstyleException: cannot initialize module TreeWalker - Unable to instantiate GenericIllegalRegexp
    at com.puppycrawl.tools.checkstyle.Checker.setupChild(Checker.java:178)
    at com.puppycrawl.tools.checkstyle.api.AutomaticBean.configure(AutomaticBean.java:184)
    at org.apache.maven.plugin.checkstyle.DefaultCheckstyleExecutor.executeCheckstyle(DefaultCheckstyleExecutor.java:170)
    at org.apache.maven.plugin.checkstyle.AbstractCheckstyleReport.executeReport(AbstractCheckstyleReport.java:259)
    ... 24 more
Caused by: com.puppycrawl.tools.checkstyle.api.CheckstyleException: Unable to instantiate GenericIllegalRegexp
    at com.puppycrawl.tools.checkstyle.PackageObjectFactory.createModule(PackageObjectFactory.java:155)
    at com.puppycrawl.tools.checkstyle.TreeWalker.setupChild(TreeWalker.java:161)
    at com.puppycrawl.tools.checkstyle.api.AutomaticBean.configure(AutomaticBean.java:184)
    at com.puppycrawl.tools.checkstyle.Checker.setupChild(Checker.java:157)
... 27 more
Caused by: com.puppycrawl.tools.checkstyle.api.CheckstyleException: Unable to instantiate GenericIllegalRegexpCheck
    at com.puppycrawl.tools.checkstyle.PackageObjectFactory.doMakeObject(PackageObjectFactory.java:98)
    at com.puppycrawl.tools.checkstyle.PackageObjectFactory.createModule(PackageObjectFactory.java:152)
    ... 30 more 
```

我猜这个错误与使用旧版本的 checkstyle 创建的规则有关。

pom.xml 中的 checkstyle 插件配置为：

```
...
<plugin>
<groupId>org.apache.maven.plugins</groupId>
<artifactId>maven-checkstyle-plugin</artifactId>
<version>2.9.1</version>
<configuration>
    <configLocation>checkstyle.xml</configLocation>
    <headerLocation>LICENSE.txt</headerLocation>
</configuration>
</plugin>
... 
```

有没有办法或工具来迁移规则以使它们与 checkstyle 5.5 兼容？（除了基于 checkstyle 文档的每个规则的概述规则）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T12:07:48.707

我已经设法摆脱了修改规则 xml 的特定异常。
我已经更换：

```
<module name="GenericIllegalRegexp">
  <property name="format" value="\s+$"/>
  <property name="message" value="Line has trailing spaces."/>
  <property name="ignoreComments" value="true"/>
</module> 
```

和

```
<module name="RegexpSinglelineJava">
  <property name="format" value="\s+$"/>
  <property name="message" value="Line has trailing spaces."/>
  <property name="ignoreComments" value="true"/>
</module> 
```

希望我能帮助遇到同样问题的人。问候。

# mobile - 未链接的按钮和链接按钮在 jQuery Mobile 中不显示点击动画/状态更改

> ID：12433467
> 
> 赞同：0
> 
> 时间：2012-09-15T00:10:27.277
> 
> 标签：mobile, button, jquery-mobile

我正在尝试在使用 jQuery Mobile 的移动应用程序中使用未链接的按钮。我仍然希望按钮是可点击的，但我想使用我自己的而不是默认的 ajax 行为。

但是，当我点击一个未链接到某项内容的按钮时，它不会提供任何反馈。也就是说CSS不会更改为按下状态然后再返回。当我点击具有有效 href 或位于表单内的链接时，它可以工作。

奇怪的是，在我的桌面浏览器中单击链接确实会调用更改，尽管它与点击按钮不同。使用默认的 CSS 包按钮，当点击它们提交表单或进入下一页时，它们会立即变为蓝色。当我在桌面上单击它们时，它们会进入灰色悬停状态，因此看起来这实际上不适用于任何浏览器。

有谁知道如何获得一个简单的按钮来响应点击，即使该按钮实际上没有链接到任何地方？

编辑：这里有一些代码可以尝试我在 iOS 和 Android 上都尝试过，结果相同。

```
<!DOCTYPE html>
<html>
    <head> 
        <title>My Page</title> 
        <meta name="viewport" content="width=device-width, initial-scale=1"> 
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0-beta.1/jquery.mobile-1.2.0-beta.1.min.css" />
        <script src="http://code.jquery.com/jquery-1.8.1.min.js"></script>
        <script src="http://code.jquery.com/mobile/1.2.0-beta.1/jquery.mobile-1.2.0-beta.1.min.js"></script>
    </head>

    <body>

        <div data-role="page" id="startpage">
            <div data-role="header" data-theme="c">
                <h1>Button Test</h1>
            </div>
            <div data-role="content">
                <button id="test1">Test 1</button>
                <button data-role="button" id="test2">Test 2</button>
                <a data-role="button" id="test3">Test 3</a>
                <a data-role="button" href="" id="test4">No href</a>
                <a data-role="button" href="#" id="test5">href=#</a>
                <a data-role="button" href="#page2" id="test6">This works because it's linked</a>
                <form method="get" action="index2.html">
                    <input type="text" name="name" placeholder="Name"/>
                    <button type="submit" value="No tap change here either"></button>
                </form>
            </div><!-- /content -->
        </div><!-- /page -->

        <div data-role="page" id="page2">
            <div data-role="header" data-theme="c">
                <h1>Page 2</h1>
            </div>
            <div data-role="content">Linked buttons work</div>
        </div>

    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-16T01:52:08.183

好的，我最终在 jQuery Mobile 问题跟踪器中提交了一个错误，这似乎是一个已知问题。

[https://github.com/jquery/jquery-mobile/issues/5009](https://github.com/jquery/jquery-mobile/issues/5009) https://github.com/jquery/jquery-mobile/issues/4469

解决方法是使用这样的链接按钮：

```
<a href="javascript:void(0)" data-role="button">Click me</a> 
```

有了这个按钮，即使它实际上并没有去任何地方或做任何事情，它也会向用户提供反馈。

他们正在考虑在 v1.3 中解决这个问题。

# validation - 有没有人实施了缺少 Drools 时间单位的替代方法：年和月

> ID：12433469
> 
> 赞同：2
> 
> 时间：2012-09-15T00:10:31.460
> 
> 标签：validation, datetime, drools, rule-engine, temporal

Drools 似乎只支持与时间运算符一起使用的时间单位的天、小时、分钟、秒和毫秒。我正在制定一个寻找特定年龄段人群的规则。例如：6个月至5岁、18岁以下、12岁以上等。

我的 person 类有一个 dateOfBirth 实例变量，但没有 person.age 方法可以进行直接比较，例如：

```
 $p : Person(age <= 18) 
```

我没有太多的自由来修改 Person 类，我试图避免编写 utils 方法并使用“eval”进行比较，因为“evals”没有优化。我是一个流口水的新手，并写了以下规则。

```
rule "Under18Years"

when
    now : RuleTime()
    $p : Person(dateOfBirth after[-6570d, 0s] $now )
then
    System.out.println("Under18Years fired");
end 
```

我知道这不是很准确，因为我只使用了 6570 (365*18) 天；忽略闰年。我最好在标准 SI 年 (31,556,926) 乘以 18 中使用秒来计算 18 年，但有更好的方法吗？这也不适用于涉及数月的条件。有没有人对这个问题有任何其他想法/解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:28:36.217

您可以创建执行上述操作的包或函数

```
public int getAge() {
Years years = Years.yearsBetween(dateOfBirth, currentDate);
return years.getYears(); 
```

只要我一直在使用流口水，就一直有很多年可供使用。我看到这是不久前发布的，也许你已经发现了。

# c# - 检测 SslStream 套接字断开连接

> ID：12433470
> 
> 赞同：2
> 
> 时间：2012-09-15T00:10:35.407
> 
> 标签：c#, sockets, networkstream, sslstream, disconnection

我在包装套接字的 NetworkStream 之上使用 SslStream，在这种情况下如何检测套接字断开连接。

换句话说，我想检测远程客户端是否关闭了连接。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:50:47.977

读取时会收到 EOS，写入时会收到 IOException。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-02-17T14:49:39.850

在内部套接字上使用 poll 方法：

```
if (client.Client.Poll(0, SelectMode.SelectRead))
{
    read = 0;
    read = br.Read(buffer, 0, buffer.Length);

    if (read > 0)
    {
        Console.Write(Encoding.ASCII.GetString(buffer, 0, read));
    }
    else
        throw new Exception("Socket closed");
} 
```

# iphone - 有没有办法检测多个平移手势？

> ID：12433480
> 
> 赞同：3
> 
> 时间：2012-09-15T00:11:35.473
> 
> 标签：iphone, ios, ipad, uigesturerecognizer

我希望用户能够同时从每个拇指上平移，但我不知道如何使用 uigesturerecognizer 来检测它。我可以同时检测水龙头和平底锅没问题。

看来第二个平底锅会挡住第一个平底锅。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T03:33:03.457

我通过定义 shouldReceiveTouch 来解决它，如下所示：

```
-(BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    if (gestureRecognizer == singleTap) {
        return YES;
    }
    if (gestureRecognizer == pan1 && [touch locationInView:self].x > 160) {
        return YES;
    }
    if (gestureRecognizer == pan2 && [touch locationInView:self].x <= 160) {
        return YES;
    }
    return FALSE;
} 
```

initWithFrame 具有以下代码：

```
self.userInteractionEnabled = YES;
singleTap = [[UITapGestureRecognizer alloc]
                                     initWithTarget:self action:@selector(handleSingleTap:)];
singleTap.numberOfTapsRequired = 1;
[self addGestureRecognizer:singleTap];
[singleTap release];
NSLog(@"tap: %p", singleTap);

pan1 = [[UIPanGestureRecognizer alloc]
                               initWithTarget:self action:@selector(handlePan1:)];
[self addGestureRecognizer:pan1];
NSLog(@"pan1: %p", pan1);

pan2 = [[UIPanGestureRecognizer alloc]
                                initWithTarget:self action:@selector(handlePan2:)];
[self addGestureRecognizer:pan2];

for (UIGestureRecognizer *recognizer in self.gestureRecognizers) {
    recognizer.delegate = self;
}
NSLog(@"pan2: %p", pan2); 
```

# events - 主干事件未绑定到 dom 元素

> ID：12433485
> 
> 赞同：5
> 
> 时间：2012-09-15T00:13:34.047
> 
> 标签：events, dom, backbone.js, click

在我的一个观点中，我有：

```
events: {
    'click .tab': 'doSomething',
}, 
```

然后：

```
doSomething: function(){
    ...
}, 
```

在我看来，这是一个重复出现的结构，但由于某种原因，此视图中的单击不会触发“doSomething”功能。

元素何时绑定到事件？

关于调试的任何提示？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T04:49:39.200

链接到这里的小提琴：http: [//jsfiddle.net/7xRak/](http://jsfiddle.net/7xRak/)

省略选择器会导致事件绑定到视图的根元素 ( `this.el`)。

如果您`class="tab"`是查看 DOM 元素的意思`this.el`，那么您应该将事件绑定为

```
events : {
  'click' : 'dosomething'
} 
```

对于内部元素，`this.el`就像

```
<div class="tab">
     <span class="inner"></span>
</div> 
```

那么你应该将事件绑定为，

```
 events : {
      'click' : 'dosomething'
      'click .inner' : 'onInnerClick'
    } 
```

文件：[http ://backbonejs.org/#View-delegateEvents](http://backbonejs.org/#View-delegateEvents)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-15T00:16:07.390

委托发生在`delegateEvents`视图构造函数末尾的方法期间。

[http://documentcloud.github.com/backbone/docs/backbone.html#section-144](http://documentcloud.github.com/backbone/docs/backbone.html#section-144)

在返回之前尝试手动调用`this.delegateEvents()`内部。您是否以骨干没有预料到的方式在您的内部或方法中进行操作？`render``this``this.el``initialize``render`

# unicode - 将字符串写入 Unicode 文件

> ID：12433488
> 
> 赞同：0
> 
> 时间：2012-09-15T00:14:31.200
> 
> 标签：unicode, installation, nsis

我正在使用*NSIS Unicode 版本*，并且正在尝试将字符串附加到现有的 Unicode 文件（UTF-16LE）。

**我的问题：**在我将字符串写入文件然后打开文件后，我写的字符串只是乱码。我有一种感觉，它试图将 ANSI 字符串写入 UTF-16LE 文件。

**如何将字符串写入 unicode 文件？**

```
Function ${prefix}AppendFile 
    # Note: Will automatically create file if it doesn't exist
    # $0 = fName
    # $1 = strToWrite

    Pop $1
    Pop $0

    ClearErrors
    FileOpen  $3 $0 a
    FileSeek  $3 0 END
    FileWrite $3 "$\r$\n"        # write a new line
    FileWrite $3 "$1"
    FileWrite $3 "$\r$\n"        # write an extra line
    FileClose $3                 # close the file

    IfErrors 0 +2
        MessageBox MB_OK "Append Error: $1 $\r$\n$\r$\n$0"
FunctionEnd 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:39:53.210

如果您正在处理 UTF-16LE 文件，则需要使用[`FileWriteUTF16LE`](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.5.9)写入 Unicode 文本，而不是[`FileWrite`](http://nsis.sourceforge.net/Docs/Chapter4.html#4.9.5.8)使用 写入 ANSI 文本。

# pointers - 为什么在 ARM 过程调用标准中使用帧指针寄存器已过时？

> ID：12433489
> 
> 赞同：1
> 
> 时间：2012-09-15T00:14:35.947
> 
> 标签：pointers, arm, call, frame, procedure

我正在阅读 ARM 过程调用标准：

[http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0041c/Cegbidie.html](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0041c/Cegbidie.html)

它说：

> 仅支持不需要帧指针寄存器的 APCS 变体。需要帧指针寄存器的 APCS 变体已过时。记录这些变体只是为了向后兼容。

有人能告诉我为什么吗？如果在编译时堆栈帧大小未知，我认为需要帧指针。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T01:15:52.083

假设调用约定指定了如何在函数退出时清理堆栈，您只需要拥有堆栈指针。编译器可以跟踪函数内的所有堆栈操作，因此无需将这些信息保存在单独的寄存器中。

这当然很方便，但不是绝对必要的。

# c# - OpenID+OAuth 中缺少 DotNetOpenAuth.ApplicationBlock

> ID：12433490
> 
> 赞同：8
> 
> 时间：2012-09-15T00:14:36.527
> 
> 标签：c#, asp.net, openid, dotnetopenauth

我在我的 ASP.NET WebForm（使用 .NET Framework 3.5）应用程序中实现 OpenID+OAuth，在网上找到了示例

```
https://groups.google.com/forum/?fromgroups=#!topic/dotnetopenid/xQYkE6sUZYU 
```

但是我缺少 DotNetOpenAuth.ApplicationBlock 命名空间，我在我的项目中包含了这些库：

```
DotNetOpenAuth.dll
DotNetOpenAuth.OAuth2.dll
DotNetOpenAuth.OAuth2.Client.dll 
```

任何人都可以建议我在哪里做错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-16T16:01:00.230

ApplicationBlock 不是以二进制形式分发的，因为它旨在将相关源代码复制+粘贴到您的项目中。[您可以从SourceForge 上](http://sourceforge.net/projects/dnoa/files/latest/)的示例分发中获取 ApplicationBlock 项目。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-22T17:12:08.010

您可以在 Samples/DotNetOpenAuth.ApplicationBlock 的 DotNotOpenAuth 文件夹下找到该项目

# python-2.7 - 这是 PyQt 4 python 错误还是行为错误的代码？

> ID：12433491
> 
> 赞同：11
> 
> 时间：2012-09-15T00:14:36.957
> 
> 标签：python-2.7, segmentation-fault, pyqt, pyqt4, qgraphicsscene

以下代码应创建 QGraphicsView 小部件，该小部件拥有一个 QGraphicsScene，其中包含文本：

```
#!/usr/bin/python

import sys
from PyQt4.QtGui import *

if __name__ == '__main__':
  app = QApplication(sys.argv)

  view = QGraphicsView()  
  scene = QGraphicsScene()

  scene.addText("Hello!")

  view.setScene(scene)
  view.show();

  sys.exit(app.exec_()) 
```

这会打开窗口，将文本放在那里，但在我关闭窗口后 - python 转储核心并打印出几个问题：

```
(python:5387): Gtk-CRITICAL **: IA__gtk_container_add: assertion `GTK_IS_CONTAINER (container)' failed

(python:5387): Gtk-CRITICAL **: IA__gtk_widget_realize: assertion `GTK_WIDGET_ANCHORED (widget) || GTK_IS_INVISIBLE (widget)' failed
...clip...
... above message is shown many, many times ...
...clip...
(python:5387): Gtk-CRITICAL **: IA__gtk_widget_realize: assertion `GTK_WIDGET_ANCHORED (widget) || GTK_IS_INVISIBLE (widget)' failed
Segmentation fault (core dumped) 
```

版本：python2.7 2.7.3-0ubuntu3.1 python-qt4 4.9.1-2ubuntu1

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-17T10:17:00.353

它看起来与退出时被删除的 QApplication 对象有关，但我不确定为什么。您的代码在 Windows 下对我来说运行良好，但在 Ubuntu 安装下我得到了与您相同的段错误输出。

我设法使用以下代码获得了一个干净的退出作为解决方法。

```
#!/usr/bin/python

import sys
from PyQt4.QtGui import QApplication, QGraphicsView, QGraphicsScene

if __name__ == '__main__':
  app = QApplication(sys.argv)

  view = QGraphicsView()  
  scene = QGraphicsScene()

  scene.addText("Hello!")

  view.setScene(scene)
  view.show()

  app.exec_()
  app.deleteLater()
  sys.exit() 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-17T16:14:14.097

这可能既不是 PyQt 错误，也不是行为错误的代码。

当 python 完成其关闭过程时，对象被删除的顺序可能是不可预测的。有时，这可能会导致出现一些令人费解的错误消息。

您的脚本在我的（非 Ubuntu）Linux 机器上运行良好 - 但是当我关闭窗口时，我得到以下输出：

```
$ python2 test.py 
QPixmap: Must construct a QApplication before a QPaintDevice
Aborted 
```

从表面上看，这似乎毫无意义……

但是，通过强制以不同的顺序删除对象通常很容易摆脱此类错误消息。

一种（有点奇怪）的方法是重命名一些对象。所以对我来说，如果我简单地更改`view`为`_view`.

然而，也许更好的选择是确保某些关键对象在父/子层次结构中连接在一起：

```
 view = QGraphicsView()  
    scene = QGraphicsScene(view) 
```

这样做的原因是，当删除一个对象时，Qt 也会自动删除它的所有后代`QObject`节点。这有助于确保在 python 端之前清理 PyQt 对象的 C++ 端（这实际上是导致这类问题的核心）。

另一种可能性是保持对 的全局引用`QApplication`，并将其他所有内容放在一个`main`函数中：

```
import sys
from PyQt4.QtGui import *

def main():
    view = QGraphicsView()
    scene = QGraphicsScene()
    scene.addText("Hello!")
    view.setScene(scene)
    view.show()
    return qApp.exec_()

if __name__ == '__main__':

    app = QApplication(sys.argv)
    sys.exit(main()) 
```

# java - 返回二叉树中序遍历的第 n 项

> ID：12433493
> 
> 赞同：2
> 
> 时间：2012-09-15T00:14:40.600
> 
> 标签：java, recursion, binary-tree

我想出了这段代码，但它需要一个全局变量`Rank`。有什么方法可以解决这个问题而不必有一个全局变量？

```
int Rank = 0; 
public int inOrderTraversal(TreeNode node, int n){
    if(node==null)
        return 0;
    int x=inOrderTraversal(node.left,n);
    if(x!=0)return x;
    Rank++;
    if(n==Rank) return node.data;
    int y=inOrderTraversal(node.right,n);
    int c= x==0 ? y:x;
    return c;
} 
```

我只是想在二叉树的有序遍历中返回第 n 项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:32:19.817

您可以将`TraversalState`对象传递到递归调用链中，并将您访问的节点数存储在其中的变量中：

```
class TraversalState {
    public int rank = 0;
}
...
public int inOrderTraversal(TreeNode node, int n, TraversalState ts){
    if(node==null)
        return 0;
    int x=inOrderTraversal(node.left,n, ts);
    ts.rank++;
    if(n==ts.rank) return node.data;
    int y=inOrderTraversal(node.right,n, ts);
    int c= x==0 ? y:x;
    return c;
} 
```

现在您的实现是线程安全的，因为它不使用“全局”对象。调用它如下：

```
int r = inOrderTraversal(myNode, targetN, new TraversalState()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T14:05:04.587

递归方法很容易理解，但是如果您的树形与预期不符，那么您将受制于此处的最大堆栈深度，这可能会更多地限制显式分配的堆栈结构所消耗的堆内存。因此，最好花时间构建一个迭代游走器。

首先，定义树节点本身的结构：

```
public final class TreeNode {
  public final int data;
  public final TreeNode left, right;

  public TreeNode(int data, TreeNode left, TreeNode right) {
    this.data = data;
    this.left = left;
    this.right = right;
  }

  public TreeNode(int data) {
    this(data, null, null);
  }
} 
```

我们需要一种方法来对深度优先遍历树期间发出的事件做出反应。从这些方法返回 true 表示访问者希望步行继续；返回尽快停止步行的错误请求。

```
public abstract class Visitor {
  public boolean visitPre(TreeNode node) {
    return true;
  }

  public boolean visitMid(TreeNode node) {
    return true;
  }

  public boolean visitPost(TreeNode node) {
    return true;
  }
} 
```

现在，定义迭代有序游走算法：

```
final class InOrder {
  private InOrder() {}

  private static final class Breadcrumb {
    public final TreeNode node;
    public final boolean rightIsNext; // Not a great name.

    public Breadcrumb(TreeNode node, boolean rightIsNext) {
      this.node = node;
      this.rightIsNext = rightIsNext;
    }

    public static Breadcrumb goingLeft(TreeNode departingPoint) {
      return new Breadcrumb(departingPoint, true);
    }

    public static Breadcrumb goingRight(TreeNode departingPoint) {
      return new Breadcrumb(departingPoint, false);
    }
  }

  public static <T extends Visitor> T walk(TreeNode root, T visitor) {
    if (null == root ||
        null == visitor)
      throw new NullPointerException();
    final Deque<Breadcrumb> stack = new ArrayDeque<Breadcrumb>();
    if (!visitor.visitPre(root))
      return visitor;
    for (;;) {
      for (TreeNode left = root.left;
           null != left;
           root = left, left = root.left) {
        if (!visitor.visitPre(left))
          return visitor;
        stack.push(Breadcrumb.goingLeft(root));
      }
      if (!visitor.visitMid(root))
        return visitor;
      final TreeNode right = root.right;
      if (null != right) {
        if (!visitor.visitPre(right))
          return visitor;
        stack.push(Breadcrumb.goingRight(root));
        root = right;
      } else {
        if (!visitor.visitPost(root))
          return visitor;
        // Go back up the tree until we find a node with an unexplored right child.
        for (;;) {
          if (stack.isEmpty())
            return visitor;
          final Breadcrumb breadcrumb = stack.pop();
          if (breadcrumb.rightIsNext) {
            if (!visitor.visitMid(breadcrumb.node)) {
              return visitor;
            }
            if (null != breadcrumb.node.right) {
              if (!visitor.visitPre(breadcrumb.node.right))
                return visitor;
              stack.push(Breadcrumb.goingRight(breadcrumb.node));
              root = breadcrumb.node.right;
              break;
            }
          }
          if (!visitor.visitPost(breadcrumb.node))
            return visitor;
        }
      }
    }
  }
} 
```

`walk()`在样本树上执行函数：

```
 (1)
      |
    +-+-+
    |   |
   (2) (5)
    |
  +-+-+
  |   |
 (3)  -
  |
+-+-+
|   |
-  (4) 
```

也就是说，有五个节点，其中数据为 4 和 5 的叶子都是右孩子。

```
final TreeNode root = new TreeNode(1,
                                   new TreeNode(2,
                                                new TreeNode(3,
                                                             null,
                                                             new TreeNode(4)),
                                                null),
                                   new TreeNode(5));
walk(root,
     new Visitor() {
       private final PrintStream ps = System.out;

       @Override
       public boolean visitPre(TreeNode node) {
         trace(node, "Pre");
         return true;
       }

       @Override
       public boolean visitMid(TreeNode node) {
         trace(node, "Mid");
         return true;
       }

       @Override
       public boolean visitPost(TreeNode node) {
         trace(node, "Post");
         return true;
       }

       private TreeNode trace(TreeNode node, String phase) {
         ps.print(phase);
         ps.print('(');
         ps.print(node.data);
         ps.println(')');
         return node;
       }
     }); 
```

这将打印以下内容：

```
Pre(1)
Pre(2)
Pre(3)
Mid(3)
Pre(4)
Mid(4)
Post(4)
Post(3)
Mid(2)
Post(2)
Mid(1)
Pre(5)
Mid(5)
Post(5)
Post(1) 
```

现在，您需要一种方便的方法来查找在有序游走过程中遇到的第 n 个节点。我们将编写一个名为 的函数`findNthInOrder()`，其中参数`n`将零指定为遇到的第一个节点，其左子树已经被探索过，一个指定第二个，依此类推：

```
private static TreeNode findNthInOrder(TreeNode root, final int n) {
  if (n < 0)
    throw new IllegalArgumentException();
  return walk(root,
              new Visitor() {
                public TreeNode found = null;
                private int remaining = n + 1;

                @Override
                public boolean visitMid(TreeNode node) {
                  if (0 == --remaining) {
                    found = node;
                    return false;
                  }
                  return true;
                }
              }).found;
} 
```

在我们的示例树上调用此函数会产生预期的结果：

```
final TreeNode nth = findNthInOrder(root, 3);
System.out.println(null != nth ? nth.data : "(none)"); 
```

这会将“1”打印到控制台，这与样本树上的先前跟踪遍历相匹配：第四个（即，根据上面的参数，从零开始的索引 3）发出的“Mid”跟踪是针对承载`data`值一。

总而言之，考虑构建足以形式化正在发挥作用的概念，以便您可以在坚实的基础上更自信地编写这些特定查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T00:36:41.897

```
public int inOrderTraversal(TreeNode node, AtomicInteger n){
    if(node == null) return 0;
    if(n == 0) return node.data;
    int leftVal = inOrderTraversal(node.left, n.decrementAndGet());
    if(n == 0) return node.data;
    int rightVal = inOrderTraversal(node.right,n.decrementAndGet());
    return leftVal == 0 ? rightVal : leftVal;
} 
```

或者使用[Apache commons lang](http://commons.apache.org/lang/api-2.4/org/apache/commons/lang/mutable/MutableInt.html)`MutuableInt`而不是.`AtomicInteger`

# php - 如何检查重复的用户名和/或电子邮件？

> ID：12433498
> 
> 赞同：2
> 
> 时间：2012-09-15T00:15:16.103
> 
> 标签：php, mysql, sql, pdo

我一直想知道如果在注册期间用户名和/或电子邮件重复，如何签入 MySQL 表。这是我到目前为止尝试过但无济于事的方法：

```
$username = $_POST['username'];
$sq = $db->exec("SELECT * FROM `users` WHERE `username` = '$username'");
if ($sq->rowCount() > 0)
{
    $msg = "That username is already taken.";
    $error = true;
}

$email = $_POST['email'];
$sq = $db->exec("SELECT * FROM `users` WHERE `email` = '$email'");
if ($sq->rowCount > 0)
{
    $msg = "That email is already taken.";
    $error = true;
}

if (!error)
{
    //add to db
} 
```

这给出的错误是`Call to a member function rowCount() on a non-object`

能否请你帮忙？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T00:23:49.063

`PDO::exec()`返回一个整数，因此您的上述代码将死于致命错误`call to member function rowCount() on a non-object`。您应该为此做的是`SELECT COUNT(*)`获取行数。

您还可以使用异常来帮助错误处理过程。

像这样：

```
// Ensure PDO will throw exceptions on error
$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

// Turn emulated prepares off
$db->setAttribute(PDO::ATTR_EMULATE_PREPARES, FALSE);

try {

  // Check if username is taken
  $stmt = $db->prepare("SELECT COUNT(*) FROM `users` WHERE `username` = :username");
  $stmt->execute(array('username' => $_POST['username']));
  if ($stmt->fetchColumn() > 0) {
    throw new Exception("That username is already taken.");
  }

  // Check if email is taken
  $stmt = $db->prepare("SELECT COUNT(*) FROM `users` WHERE `email` = :email");
  $stmt->execute(array('email' => $_POST['email']));
  if ($stmt->fetchColumn() > 0) {
    throw new Exception("That email is already taken.");
  }

  // Username and email are free

} catch (PDOException $e) {

  // A database error occured

} catch (Exception $e) {

  // Either the username of email is taken

} 
```

如果列中的数据应该是唯一的，则它应该有一个唯一索引以防止重复插入，并加快基于该列的值进行搜索的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T00:35:30.527

为了避免潜在的竞争条件，您应该简单地将您的用户名和电子邮件字段设置为唯一索引。

当您尝试插入重复行时，您的数据库引擎会给您一个特定的错误代码，对于 MySQL，它是 1062。

如果查询失败，则检查错误号是否为重复行的错误号，并据此显示消息。

至少，您的列应该是唯一索引，以防止在数据库级别出现重复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T00:23:38.443

请说明 $db 的类型，假设它是 sqllite3。

[在http://php.net/manual/en/sqlite3.exec.php](http://php.net/manual/en/sqlite3.exec.php)查看 SQLLITE3::exec() 的文档.. 据它所说，它仅对 (UPDATE, INSERT, DELETE) 有效并返回布尔值. 因此，您的代码可能不会运行。

如果根据您的标签，您正在使用 MySQL。我相信您需要查看 mysql/mysqli 扩展、mysql_query() 和 mysqli_query()，或者如果 $db 是 mysqli 类型，则 $db -> query()。

# java - org.hibernate.QueryParameterException：找不到命名参数

> ID：12433499
> 
> 赞同：13
> 
> 时间：2012-09-15T00:15:52.400
> 
> 标签：java, spring, hibernate

我的项目设置是 MySQL DB 上的 Spring MVC、Hibernate 3.2.x

收到以下错误：

> org.hibernate.QueryParameterException：找不到命名参数电子邮件

方法#1：

```
@Override
public Boolean isExist(String email) {
    boolean flag = false;  
    String hql = "from com.cmgr.beans.UserAccount u where u.email = :email";
    List<UserAccount> result = currentSession().createQuery(hql)
        .setParameter("email", email)
        .list();

    UserAccount userAccount = (UserAccount)result.get(0);
    if (userAccount!=null && userAccount.getEmail().equalsIgnoreCase(email)) {
        flag = true;
    }

    return flag;
} 
```

方法#2：

```
 @Override
    public Boolean isExist(String email) {
        boolean flag = false;
        String hql = "from com.cmgr.beans.UserAccount u where u.email = :email";
        List<UserAccount> result = currentSession().createQuery(hql).setString("email", email).list();

        UserAccount userAccount = (UserAccount) result.get(0);
        if (userAccount != null && userAccount.getEmail().equalsIgnoreCase(email)) {
            flag = true;
        }
        return flag;
    } 
```

错误：

> java.lang.IllegalArgumentException：参数 email 在 [from com.cmgr.beans.UserAccount u where u.email = :email] 中不作为命名参数存在

用户帐户类：

```
package com.cmgr.beans;

import java.io.Serializable;
import java.util.List;
import java.util.Set;
import javax.persistence.*;
import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.beans.factory.annotation.Qualifier;

@Entity
@Table(name = "user_account")
public class UserAccount implements Serializable {

    @Autowired
    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY, generator = "user_account_seq")
    @SequenceGenerator(name = "user_account_seq", sequenceName = "user_account_seq")
    @Column(name = "user_id")
    private Long UserId = null;
    //
    @Autowired
    @Column(name = "user_name")
    private String UserName;
    //
    @Autowired
    @Column(name = "user_type")
    private String UserType = null;
    //
    @Autowired
    @Column(name = "first_name")
    private String FirstName;
    //
    @Autowired
    @Column(name = "last_name")
    private String LastName;
    //
    @Autowired
    @Column(name = "email")
    private String Email;
    //
    @Autowired
    @Column(name = "phone_contact_1")
    private String PhoneContact1 = null;
    //
    @Autowired
    @Column(name = "phone_contact_2")
    private String PhoneContact2 = null;
    //primary_address_is_usa
    @Autowired
    @Column(name = "primary_address_is_usa")
    private Boolean primaryAddressIsUsa = null;
    //
    @Autowired
    @Column(name = "address_1")
    private String Address1 = null;
    //
    @Autowired
    @Column(name = "city1")
    private String city1 = null;
    //
    @Autowired
    @Column(name = "state1")
    private String state1 = null;
    //
    @Autowired
    @Column(name = "country1")
    private String country1 = null;
    //
    @Autowired
    @Column(name = "zipcode")
    private Integer zipcode = 0;
    //
    @Autowired
    @Column(name = "Industry")
    private String Industry = null;
    //is the user account Active either due to user deactivation,admin deactivation, or nonpayment
    @Autowired
    @Column(name = "active")
    private boolean Active = false;
    //1 to 1 relation with registerationCode in Registeration class 
    @Autowired
    @Qualifier("UserRegisteration")
    @OneToOne(fetch = FetchType.LAZY)
    @JoinColumn(name = "Registeration_Code_fk", referencedColumnName = "registeration_code", nullable = false)
    private UserRegisteration UserRegisteration;
    //1 to many relation with EmailId in Email class  
    @OneToMany(cascade = {CascadeType.ALL})
    @JoinColumn(name = "emailed_id")
    private List<Emailed> emailed = null;
    //1 to many relation with signatureId in signature class
    @OneToMany(cascade = {CascadeType.ALL})
    @JoinColumn(name = "signature_id")
    private List<Signature> signatures;
    //1 to many relation with UserAccountDocId in UserAccountDoc class 
    @OneToMany(cascade = {CascadeType.ALL})
    @JoinColumn(name = "user_doc_id")
    private Set<UserAccountDocumentRelationship> UserAccountDocumentRelationship;

    @Autowired(required = false)
    public UserAccount() {
    }

    @Autowired(required = true)
    public UserAccount(String UserName, String FirstName, String LastName, String Email, String Industry) {
        this.FirstName = FirstName;
        this.LastName = LastName;
        this.Email = Email;
        this.Industry = Industry;
        this.UserName = UserName;
    }

    @Autowired(required = false)
    public UserAccount(String UserName, Long UserId, String FirstName, String LastName, String Email, String Industry) {
        this.UserId = UserId;
        this.FirstName = FirstName;
        this.LastName = LastName;
        this.Email = Email;
        this.Industry = Industry;
        this.UserName = UserName;
    }

    public String getIndustry() {
        return Industry;
    }

    public void setIndustry(String Industry) {
        this.Industry = Industry;
    }

    public String getAddress1() {
        return Address1;
    }

    public void setAddress1(String Address1) {
        this.Address1 = Address1;
    }

    public String getPhoneContact1() {
        return PhoneContact1;
    }

    public void setPhoneContact1(String PhoneContact1) {
        this.PhoneContact1 = PhoneContact1;
    }

    public String getPhoneContact2() {
        return PhoneContact2;
    }

    public void setPhoneContact2(String PhoneContact2) {
        this.PhoneContact2 = PhoneContact2;
    }

    public boolean isActive() {
        return Active;
    }

    public void setActive(boolean Active) {
        this.Active = Active;
    }

    public String getEmail() {
        return Email;
    }

    public void setEmail(String Email) {
        this.Email = Email;
    }

    public String getFirstName() {
        return FirstName;
    }

    public void setFirstName(String FirstName) {
        this.FirstName = FirstName;
    }

    public String getLastName() {
        return LastName;
    }

    public void setLastName(String LastName) {
        this.LastName = LastName;
    }

    public com.cmgr.beans.UserRegisteration getUserRegisteration() {
        return UserRegisteration;
    }

    public void setUserRegisteration(com.cmgr.beans.UserRegisteration UserRegisteration) {
        this.UserRegisteration = UserRegisteration;
    }

    public Long getUserId() {
        return UserId;
    }

    public void setUserId(Long UserId) {
        this.UserId = UserId;
    }

    public String getUserType() {
        return UserType;
    }

    public void setUserType(String UserType) {
        this.UserType = UserType;
    }

    public List<Emailed> getEmailed() {
        return emailed;
    }

    public void setEmailed(List<Emailed> emailed) {
        this.emailed = emailed;
    }

    public List<Signature> getSignatures() {
        return signatures;
    }

    public void setSignatures(List<Signature> signatures) {
        this.signatures = signatures;
    }

    public String getCity1() {
        return city1;
    }

    public void setCity1(String city1) {
        this.city1 = city1;
    }

    public String getCountry1() {
        return country1;
    }

    public void setCountry1(String country1) {
        this.country1 = country1;
    }

    public Boolean getPrimaryAddressIsUsa() {
        return primaryAddressIsUsa;
    }

    public void setPrimaryAddressIsUsa(Boolean primaryAddressIsUsa) {
        this.primaryAddressIsUsa = primaryAddressIsUsa;
    }

    public String getState1() {
        return state1;
    }

    public void setState1(String state1) {
        this.state1 = state1;
    }

    public Integer getZipcode() {
        return zipcode;
    }

    public void setZipcode(Integer zipcode) {
        this.zipcode = zipcode;
    }

    public String getUserName() {
        return UserName;
    }

    public void setUserName(String UserName) {
        this.UserName = UserName;
    }

    @Override
    public boolean equals(Object obj) {
        if (obj == null) {
            return false;
        }
        if (getClass() != obj.getClass()) {
            return false;
        }
        final UserAccount other = (UserAccount) obj;
        if ((this.UserId == null) ? (other.UserId != null) : !this.UserId.equals(other.UserId)) {
            return false;
        }
        return true;
    }

    @Override
    public int hashCode() {
        int hash = 3;
        hash = 73 * hash + (this.UserId != null ? this.UserId.hashCode() : 0);
        return hash;
    }

    public Set<com.cmgr.beans.UserAccountDocumentRelationship> getUserAccountDocumentRelationship() {
        return UserAccountDocumentRelationship;
    }

    public void setUserAccountDocumentRelationship(Set<com.cmgr.beans.UserAccountDocumentRelationship> UserAccountDocumentRelationship) {
        this.UserAccountDocumentRelationship = UserAccountDocumentRelationship;
    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-10-26T10:04:36.500

据我所知，这是 Hibernate 报告错误错误消息的情况。我猜，实际的错误是“找不到 com.cmgr.beans.UserAccount 的映射”。试试这个查询：

```
String hql = "from com.cmgr.beans.UserAccount"; 
```

这可能会向您显示正确的错误消息。一旦你解决了这个问题，你就可以改变它来接受参数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-12T12:12:24.477

今天我遇到了类似的问题......我的实体不在 Spring 的扫描包中。所以 Hibernate 不知何故做了一些事情，但错误消息非常混乱，并不真正适合真正的问题。为了解决我的问题，我必须将实体添加到 packagescan。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-26T12:44:25.287

将您的查询更改为

```
String hql = "from com.cmgr.beans.UserAccount u where u.Email = :email"; 
```

由于您的 UserAccount 类具有`Email`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T04:31:37.897

Hibernate 以某种方式抛出了与它必须的不同的异常.. 可能通过纠正这个你应该摆脱这个问题：

*   重命名类中的字段以遵循 JavaConventions（应以小写字母开头）
*   使用简单的类名而不是完全限定的

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-19T04:55:12.840

我看到在 UserAccount 类中，电子邮件地址的属性被定义为“电子邮件”而不是“电子邮件”。参考[休眠文档](http://docs.jboss.org/hibernate/orm/3.3/reference/en/html/queryhql.html#queryhql-casesensitivity)

建议使用 java 命名约定，因此我建议您在 UserAccount 中将您的属性命名为“电子邮件”。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2016-12-06T10:06:51.707

代替：

```
 @Autowired
    @Column(name = "email")
    private String Email;
    // 
```

和：

```
@Autowired
private String email; 
```

使用变量命名小写字母的java命名约定&不用写

```
@Column(name = "email") 
```

因为变量名与列名同名

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-18T13:30:36.893

试试这个....

代替

```
List<UserAccount> result = currentSession().createQuery(hql)
 .setParameter("email", email)
 .list(); 
```

利用

```
List<UserAccount> result = currentSession().createQuery(hql)
 .setString("email", email)
 .list(); 
```

也许它会帮助你....

# java - 使用 Spring/Hibernate 时 Freemarker 的替代品？

> ID：12433506
> 
> 赞同：12
> 
> 时间：2012-09-15T00:16:18.627
> 
> 标签：java, ajax, spring, web-applications, freemarker

Freemarker 作为使用 Spring 的富 Web 应用程序的视图技术，有哪些现代、更高效的替代方案？Spring MVC/Freemarker 仍然是最好的组合之一，还是有其他组合？

我必须构建的应用程序很小，但很复杂，可能需要大量自定义 javascript，因为所有控件和 ui 都非常不标准（它不是真正的业务应用程序）。暴雪的游戏网站比如暗黑破坏神 3 就是我正在尝试做的一个例子。

这种组合仍然是满足我需求的最佳选择，还是我应该看看其他技术？

谢谢

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-15T07:29:55.637

市场上有几种良好且成熟的模板引擎。他们中的大多数人都与 Spring 玩得很好。

*   [Velocity](https://velocity.apache.org/) - 经典且最流行的模板引擎之一。相当好，相当灵活，难看的语法，但很好的 Eclipse 插件。
*   [Thymeleaf](https://www.thymeleaf.org/) - 市场上功能最丰富、最灵活的模板引擎之一。性能很好，虽然不是开创性的。我个人对大多数项目的选择。
*   [字符串模板](https://www.stringtemplate.org/)- 非常好的性能，很难使用。很灵活，想...
*   [MVEL](https://github.com/mvel/mvel) - 看起来非常非常快并且功能非常丰富。对我来说，在初级开发人员的项目中使用它非常复杂且非常困难。
*   [Rhythm](http://www.rythmengine.com/) - 从 Play 框架到 Java，很好而且非常灵活。Razor 语法很棒。Rhythm 非常快，非常灵活且易于使用。我的项目的另一个个人选择，在 Thymeleaf 旁边。有一篇[很好的文章](http://software-lgl.blogspot.com/2012/03/rythm-easy-to-use-high-performance-java.html)介绍了如何在 Java 中使用这个引擎。
*   [httl](https://httl.github.io/) - 小，易于使用，不是那么快，但仍然足够好。相当灵活，但功能并不丰富。
*   [Trimou](http://trimou.org/) - 另一个相当新的孩子。看起来不错，使用 Mustache 模板语法并且相当容易使用。但是对于我的口味来说有点过于简单化并且缺少一些功能。
*   [摇杆](https://github.com/fizzed/rocker)- 显然是一个相当新的发展，此时积极维护和扩展。我喜欢它，它对语法有一个不错的想法，但它与其他语法完全不同。很多简单的功能，缺少一些高级功能恕我直言。根据我们刚刚进行的测试，性能非常好。
*   [Pebble](http://www.mitchellbosecke.com/pebble/home) - 我们将它用于几个不同的目的，事实证明它使用起来相当简单，并具有受 PHP 世界 Twig 启发的体面语法。性能非常好，是我们尝试过的最快的之一。

* * *

根据我们的测试，性能方面，从最慢的顺序开始：

1.  百里香叶
2.  自由标记
3.  速度
4.  特里穆
5.  胡子
6.  卵石
7.  摇杆

你的旅费可能会改变！...

* * *

有[几个很好的比较](https://monocaffe.blogspot.com/2010/06/java-template-engines-fight.html)（相当老的文章）。[Baeldung](http://www.baeldung.com/spring-template-engines)还提供了一个关于如何使用其中一些的不错的教程

There are plenty of template engines out there. Check [this directory](https://java-source.net/open-source/template-engines) if you need more...

# configuration - BundleActivator、ManagedService 和我的应用程序如何在启动/停止时交互？

> ID：12433515
> 
> 赞同：1
> 
> 时间：2012-09-15T00:19:01.903
> 
> 标签：configuration, osgi, lifecycle

我有一个非 OSGi 应用程序。为了将它转换为 OSGi，我首先将它捆绑起来并给它一个简单的 BundleActivator。激活器的 start() 启动了一个线程，它曾经是我的应用程序的 main()（现在是一个 Runnable），并记住了那个线程。激活器的 stop() 中断了该线程，并等待它结束（通过 join()），然后返回。这一切似乎都运行良好。

作为 OSGiification 过程的下一步，我现在尝试使用 OSGi 配置管理，而不是应用程序过去使用的基于属性的配置。因此，除了 Activator 之外，我还添加了 ManagedService。

但是我不再清楚我应该如何启动和停止我的应用程序。我看到的例子只会让我感到困惑。具体来说，这里：

[http://felix.apache.org/site/apache-felix-config-admin.html](http://felix.apache.org/site/apache-felix-config-admin.html)

他们似乎不再在 BundleActivator.start() 中真正启动应用程序。相反，他们只是注册一个 ManagedService 来接收配置。所以我猜也许我在收到配置时在 ManagedService 中启动了应用程序的主线程？他们没有显示它 - ManagedService 的 updated() 在传递非空字典时只是有模糊的评论说“从配置管理员应用配置”。

那么我看这里：

[http://blog.osgi.org/2010/06/how-to-use-config-admin.html](http://blog.osgi.org/2010/06/how-to-use-config-admin.html)

在那里，*似乎*他们正在做我猜想的事情。他们似乎已将实际应用程序从 BundleActivator 移至 ManagedService，并且正在处理在 updated() 接收到非空配置时启动它，如果它已经启动则首先停止它。

但是现在调用 BundleActivator 的 stop() 时呢？

回到我上面提到的第一个示例页面，他们取消注册 ManagedService。在第二个示例页面上，他们没有显示他们做了什么。

所以我猜也许注销ManagedService会导致空配置被发送到ManagedService.updated()，此时我可以中断应用程序线程，等待它结束，然后返回？

我怀疑我完全不正确，但我不知道这样做的“真正”方法是什么。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T10:54:23.880

BundleActivator (BA) 和 ManagedService (MS) 是对您的捆绑包的回调。BundleActivator 用于您的捆绑包的活动状态。BA.start 是当你开始捆绑时，而 BA.stop 是当它停止时。如果有配置，则调用 MS 为您的捆绑包提供配置，或者通知您没有配置。

因此，在 BA.start 中，您注册您的 MS 服务并返回。当调用 MS 时（在其他线程上），您将收到您的配置或被告知没有配置，您可以采取相应的行动（启动应用程序等）

您的 MS 也可以随时被要求修改或删除您的配置，您应该采取相应的行动（即调整您的应用程序行为）。

当您在 BA.stop 被调用时，您需要停止您的应用程序。作为正常捆绑停止处理的一部分，您可以取消注册 MS 或让框架为您完成。

# reporting-services - 将 WebForms ReportViewer 10.0 与 Reporting Services 2012 实例一起使用

> ID：12433518
> 
> 赞同：1
> 
> 时间：2012-09-15T00:19:11.810
> 
> 标签：reporting-services, sql-server-2012, reportviewer2008

有谁确切地知道 ReportViewer 10.0 webforms 控件是否可以针对 Reporting Services 2012 实例正常工作？

我们的应用程序使用 webforms ReportViewer 控件的 v10.0，通常我们连接到几个 2008 SSRS 实例之一。然而，我们不得不为我们的一个客户设置一个新的安全环境，并将我们的应用程序部署到它上面。我们看到一些奇怪的行为，我刚刚发现这个新环境运行 SQL Server 2012，因此运行 SSRS 2012。

我们看到的问题是 Web 应用程序的一些用户在 ReportViewer 控件中收到以下消息：

“由于目标机器主动拒绝，无法建立连接。”

这似乎不是客户端特定的问题，因为与 SSRS 服务器的连接是由应用程序建立的，并且呈现的输出被发送到客户端。在我们深入解决这个问题之前，我觉得我需要尝试验证这种组合是否可以正常工作，或者是否存在已知的不兼容性。

不幸的是，将我们正在使用的 ReportViewer 控件换成与 SSRS 2012 一致的最新版本是一项相当大的工作，因此我正在尝试查看是否有人成功地使其正常工作。

谢谢。

# javascript - 访问 JSON 对象数据

> ID：12433522
> 
> 赞同：-1
> 
> 时间：2012-09-15T00:19:34.990
> 
> 标签：javascript, json, rest

我有一个向 RESTful Web 服务（通过 php 和 curl）发送请求的页面。该页面接收一个 JSON 对象作为响应。我正在尝试使用返回的数据填写一些表单字段。在我的页面上回显的对象 javascript 如下所示：

```
var obj = {
  "NPI": [
{
  "NPI": "123456789",
  "EntityType": "Individual",
  "IsSoleProprietor": "N",
  "LastName": "Smith",
  "FirstName": "John",
  "MiddleName": "D",
  "NameSuffix": "JR.",
  "Credential": "MD",
  "FirstLineMailingAddress": "PO BOX 123",
  "MailingAddressCityName": "SCOTTSDALE",
  "MailingAddressStateName": "AZ",
  "MailingAddressPostalCode": "85255-0162",
  "MailingAddressCountryCode": "US",
  "MailingAddressTelephoneNumber": "888-123-4567",
  "MailingAddressFaxNumber": "888-123-4567",
  "FirstLinePracticeLocationAddress": "123 DR",
  "SecondLinePracticeLocationAddress": "#278",
  "PracticeLocationAddressCityName": "SCOTTSDALE",
  "PracticeLocationAddressStateName": "AZ",
  "PracticeLocationAddressPostalCode": "85266-2273",
  "PracticeLocationAddressCountryCode": "US",
  "PracticeLocationAddressTelephoneNumber": "888-123-4567",
  "PracticeLocationAddressFaxNumber": "888-123-4567",
  "EnumerationDate": "09/20/2006",
  "LastUpdateDate": "02/07/2011",
  "GenderCode": "M",
  "Gender": "Male",

    }
  ]
};
alert(obj.NPI.NPI); 
```

访问这些对象属性的语法是什么。下面的警告语句不起作用（它警告“未定义”）。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:22:26.240

试试`obj.NPI[0].NPI` 这个应该可以

问题是第一个 NPI 是一个数组而不是一个对象，所以因为存在 [] 所以你应该选择数组中的哪个元素

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T00:22:56.157

你`obj.NPI`是一个对象数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T00:23:04.490

试试这个

```
console.log(obj.NPI[0].NPI);
console.log(obj.NPI[0].EntityType);
//etc 
```

你的结构是这样的

```
{// Start of object
  "NPI": //First element, access it as obj.NPI
      [ // NPI is an array
        { // First element of the array is an object
           "NPI": "123456789", // Then access each element of this object using dot notation
           "EntityType": "Individual",
           ................................ 
```

# php - 检索日期，请假 7 小时？

> ID：12433529
> 
> 赞同：1
> 
> 时间：2012-09-15T00:21:18.037
> 
> 标签：php, drupal, date, datetime

我无法显示正确的日期，实际上它只是时间。

在数据库中，日期以这种形式存储：'2012-09-28 23:30:00'（按实际日期时间的 7 小时关闭）

这是事件日期的值。

当我使用这个脚本（对于drupal）检索它时： `$ttdate = $obj->field_date_test_value; $nttdate = strtotime($ttdate); $okdate = format_date($nttdate, $type = 'medium'); print $okdate;`

...它工作正常，但时间减少了 7 小时。因此，不是显示“星期五，2012 年 9 月 28 日 - 下午 4:30”，而是显示“星期五，2012 年 9 月 28 日 - 晚上 11:30”。

请注意，在活动页面上，drupal 检索正确的时间......

我做了一些研究，我认为这与时区有关？但是我将时区设置为洛杉矶，所以我不太确定发生了什么。也许是我的剧本？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T10:46:49.413

I assume that you use the Date module.

This is probably because the Date module saves the date in UTC and alters the output on rendering (using [format_date()](http://api.drupal.org/api/drupal/includes!common.inc/function/format_date/7), I think). Since you do not format the date in your own code, you see the raw UTC time (which is PDT + 7 hours) even though the correct date is displayed by the event page.

[The bottom of this page](http://drupal.org/node/767182) explains how timezones are handled in the Date module. My guess is that either the first or third scenario is relevant in your case.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-15T00:53:33.083

在 mysql 中尝试以下操作：

```
set time_zone = '-07:00'; 
```

# c++ - 为什么我需要外部？

> ID：12433534
> 
> 赞同：3
> 
> 时间：2012-09-15T00:22:10.560
> 
> 标签：c++, extern

我正在使用 wglGetProcAddress 在我的代码中获取 GL 函数。该指南的作者（https://sites.google.com/site/opengltutorialsbyaks/introduction-to-opengl-3-2---tutorial-01）说我需要定义这样的函数：

```
extern PFNGLCREATEPROGRAMPROC glCreateProgram; 
```

使用 extern 关键字。但是我尝试不使用它并且它可以工作（编译成功完成并且程序成功使用该功能）。为什么我一般需要这个关键字，在这种情况下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:33:09.263

`extern`告诉编译器定义的名称在另一个编译单元中。默认情况下，全局函数定义`extern`。所以这涵盖了为什么它在你的情况下有效。

您**必须**使用它的地方是定义和声明全局变量时。

如果存在编译单元需要注意的全局变量（例如互斥锁），则需要使其在所述单元中可用。但如果你这样做：

```
int a; // in global scope 
```

编译器将尝试在程序静态内存中为其分配内存，并给出重新定义错误。`extern`来这里救我们。通过写作：

```
extern int a; 
```

我们为全局提供声明，但不为其分配内存。

但是由于不鼓励这样使用全局变量，你很少会看到它在使用中。

# c++ - 从 'const char*' 到 'const uint8_t*' 的无效转换

> ID：12433537
> 
> 赞同：2
> 
> 时间：2012-09-15T00:22:26.613
> 
> 标签：c++, char, type-conversion, arduino

我在尝试编写一个 Arduino 程序以读取通过串行连接从处理发送的命令时遇到一个小问题。处理应该通过串行连接向 Arduino 发送“H”或“L”。该值在我的程序中存储为 char，但是当我尝试执行 Serial.write("Value: %c",val) 时，我收到“从 'const char*' 到 'const uint8_t*' 的无效转换”错误。如果有人可以帮助我解决这个问题，那就太好了。我真的需要弄清楚这个值是什么，这样我才能重新编写我的程序。谢谢！

代码如下：

```
char val; // variable to receive data from the serial port

int ledpin = 8; // LED connected to pin 48 (on-board LED)

void setup() {
  pinMode(ledpin, OUTPUT);  // pin 48 (on-board LED) as OUTPUT
  Serial.begin(9600);       // start serial communication at 9600bps
}
void loop() {

  while (Serial.available()>0){

  val=Serial.read();
  }
  //Serial.write("Value: %c",(char)val);

  if( val == 'H' )               // if 'H' was received
  {
Serial.write("Setting Value to High \n");
digitalWrite(ledpin, HIGH);  // turn ON the LED
  } else { 
Serial.write("Setting Value to Low \n");
digitalWrite(ledpin, LOW);   // otherwise turn it OFF
  }
    Serial.flush();
        delay(100);                    // wait 100ms for next reading
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:26:40.060

[`Serial.write`](http://arduino.cc/en/Serial/Write)不是`printf`- 它不采用格式字符串作为参数。看看文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-16T21:15:49.120

代替 serial.write 使用：Serial.print 或 Serial.println(witch 在字符串末尾打印 \r\n)

# c# - 如何验证窗口窗体中的通用数据集合

> ID：12433542
> 
> 赞同：1
> 
> 时间：2012-09-15T00:23:34.993
> 
> 标签：c#, .net, winforms, collections

我有进行计算并将数据添加到集合列表的方法。下面是我的代码

```
IterateDtColl iterateDataList = new IterateDtColl();

        double answer;
        //Array to hold the previous initail tempreture
        double[] TempArray = new double[9];

        for (int tVal = 0; tVal < exdatalist.count(); tVal++)
        {
            ValidateDataColl validatelist = new ValidateDataColl();

            //Assign my initial tempreture
            if (iterateDataList.count() > 0)
            {
                TempArray[0] = iterateDataList.getexceldata(tVal - 1).Pi1;
                TempArray[1] = iterateDataList.getexceldata(tVal - 1).Pi2;
                TempArray[2] = iterateDataList.getexceldata(tVal - 1).Pi3;
                TempArray[3] = iterateDataList.getexceldata(tVal - 1).Pi4;
                TempArray[4] = iterateDataList.getexceldata(tVal - 1).Pi5;
                TempArray[5] = iterateDataList.getexceldata(tVal - 1).Pi6;
                TempArray[6] = iterateDataList.getexceldata(tVal - 1).Pi7;
                TempArray[7] = iterateDataList.getexceldata(tVal - 1).Pi8;
                TempArray[8] = iterateDataList.getexceldata(tVal - 1).Pi9;
            }
            else
            {
                TempArray[0] = Convert.ToDouble(initProbTxtBx.Text);
                TempArray[1] = TempArray[0];
                TempArray[2] = TempArray[0];
                TempArray[3] = TempArray[0];
                TempArray[4] = TempArray[0];
                TempArray[5] = TempArray[0];
                TempArray[6] = TempArray[0];
                TempArray[7] = TempArray[0];
                TempArray[8] = TempArray[0];
            }

            //Holds Value for last calculated values..
            double[] LastCalValue = new double[9];

            for (int iVal = 0; iVal < 9; iVal++)
            {
                answer = 0.0;

                if (iVal == 0)
                {
                    answer = (TempArray[iVal] + (r_val(dxval(lval, nval)) * (exdatalist.getexceldata(tVal).CentreTemp + initVal))) / (1 + (2 * r_val(dxval(lval, nval))));
                }
                else if (iVal == 8)
                {
                    answer = (TempArray[iVal] + (r_val(dxval(lval, nval)) * (LastCalValue[iVal - 1] + exdatalist.getexceldata(tVal).SurfaceTemp))) / (1 + (2 * r_val(dxval(lval, nval))));
                }
                else
                {
                    answer = (TempArray[iVal] + (r_val(dxval(lval, nval)) * (LastCalValue[iVal - 1] + initVal))) / (1 + (2 * r_val(dxval(lval, nval))));
                }

                //Hold the values at the present index so it can be used at the next index
                LastCalValue[iVal] = answer;

                //Adds the data to be validated to my collection list
                validatelist.addvaliddt(new ValidateDataCl(initVal, LastCalValue[iVal], TempArray[iVal]));
            } 
```

我想检查验证列表中的initVal和LastCalValue[index]之间的差异是否小于0.0001，如果不是，则进行下面的计算直到满足条件。

```
for (int check = 0; check < validate.count(); check++)
            {
                double newAnswer;
                double NewVal = 0.0;

                if (check == 0)
                {
                    //Set my new value to the value at the next index(Which then becomes my guess)
                    NewVal = validate.getvaliddata(check + 1).NewValue;
                    newAnswer = (validate.getvaliddata(check).InitTemp + (r_val(dxval(lval, nval)) * (CentreTemp + NewVal))) / (1 + (2 * r_val(dxval(lval, nval))));
                }
                else if (check == 8)
                {
                    NewVal = OldVal[check - 1];
                    newAnswer = (validate.getvaliddata(check).InitTemp + (r_val(dxval(lval, nval)) * (NewVal + SurfaceTemp))) / (1 + (2 * r_val(dxval(lval, nval))));
                }
                else
                {
                    NewVal = validate.getvaliddata(check + 1).NewValue;
                    newAnswer = (validate.getvaliddata(check).InitTemp + (r_val(dxval(lval, nval)) * (OldVal[check - 1] + NewVal))) / (1 + (2 * r_val(dxval(lval, nval))));
                }

                validate.getvaliddata(check).InitGuess = NewVal;
                validate.getvaliddata(check).NewValue = newAnswer;

                OldVal[check] = newAnswer;
            }

            //ValidateDataColl ValidatedList = CalNewData(validatelist, exdatalist.getexceldata(tVal).CentreTemp, exdatalist.getexceldata(tVal).SurfaceTemp);

            iterateDataList.additerdt(new IterateClass(exdatalist.getexceldata(tVal).CentreTemp, ValidatedList.getvaliddata(0).NewValue, ValidatedList.getvaliddata(1).NewValue, ValidatedList.getvaliddata(2).NewValue, ValidatedList.getvaliddata(3).NewValue, ValidatedList.getvaliddata(4).NewValue, ValidatedList.getvaliddata(5).NewValue, ValidatedList.getvaliddata(6).NewValue, ValidatedList.getvaliddata(7).NewValue, ValidatedList.getvaliddata(8).NewValue, exdatalist.getexceldata(tVal).SurfaceTemp));
        }

        return iterateDataList; 
```

我怎样才能做到这一点？

# jquery-datatables - jEditable 数据表插件的选项太多？

> ID：12433553
> 
> 赞同：1
> 
> 时间：2012-09-15T00:26:21.670
> 
> 标签：jquery-datatables, jeditable

这让我有点疯狂，也许有人对此有所了解。我有一个带有可编辑数据表的 jsp 页面，我希望有以下选项

```
$("#masterTable").dataTable({
    "sDom" : '<"H"flp>t<"F"ip>r',
    "bJQueryUI" : true,
    "bStateSave" : true,
    "bProcessing" :true
}).makeEditable({
    "sAddURL" : "manager/add",
    "sDeleteURL" : "manager/delete",
    "sAddNewRowFormId" : "formAddNewRowId",
    "sAddNewRowButtonId" : "btnAddNewRowId",
    "sAddNewRowOkButtonId" : "btnAddNewRowOkId",
    "sAddNewRowCancelButtonId" : "btnAddNewRowCancelId",
    "sDeleteRowButtonId" : "btnDeleteRowId",
    "fnOnAdded" : function(){
        window.location.replace("/view/master.jsp");
    },
    "fnShowError" : function(message, action){
      switch(action){
          case "add":
              window.alert("Add Failed. Please check the error log for the exact problem");
              break;
          case "update":
              window.alert("Update Failed. Please check the error log for the exact problem");
              break;
          case "delete":
              window.alert("Delete Failed. Please check the error log for the exact problem");
              break;
      } 
    },
    "fnOnDeleted" : function(){
       window.location.replace("/view/report.jsp");
    },
    "aoColumns" : [null, null, null, null, null, null, null, null, null, null, null, null, null, null, null, null]
}); 
```

但是，当我尝试加载它时，我收到了这个错误：

```
java.io.IOException: Error: Attempt to clear a buffer that's already been flushed 
```

疯狂的部分是，如果我删除任何两个选项，页面加载正常。哪两个，或者它们在多少行（1或单独），或者它们是否是 .dataTable 或 .makeEditable 的一部分，但如果我留下所有选项，错误都没有关系。表格上可以使用的选项数量是否有一些奇怪的上限？

# sublimetext2 - 本地主机中的浏览器预览

> ID：12433554
> 
> 赞同：0
> 
> 时间：2012-09-15T00:26:36.023
> 
> 标签：sublimetext2

我意识到它们是在浏览器中打开文件的方法（构建、插件和包）。我想要做的是在本地打开文件。我可能错过了一些东西，因为它曾经可以工作。现在预览会在导航文件中生成以下内容：///Applications/MAMP/htdocs/xxxx.dev/index.html 而不是 localhost

我知道，因为我使用的是 LiveReload，所以我可以输入我知道，因为我使用的是 LiveReload，我可以输入一次 localhost，然后它会自行刷新。就此而言，我可以在我所有的测试浏览器中做到这一点。但这意味着至少还有 3 次！

来吧，一定有像我这样看过 Paul Irish 并且想要提高效率的人！

我已经搜索了几天，不想回到 coda2 ......请帮助！一次，它会自行刷新。就此而言，我可以在我所有的测试浏览器中做到这一点。但这意味着至少还有 3 次！

来吧，一定有像我这样看过 Paul Irish 并且想要提高效率的人！

我已经搜索了几天，不想回到 coda2 ......请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-08T08:57:23.663

也许这个插件会帮助你？

[https://github.com/wattsin/Sublime-Text---打开并查看](https://github.com/wattsin/Sublime-Text---Open-And-View)

# api - WSO2 API 管理器的 API

> ID：12433557
> 
> 赞同：1
> 
> 时间：2012-09-15T00:26:51.357
> 
> 标签：api, soap, wsdl, wso2, wso2-am

我可以使用 WSO2 API Manager 的 API 吗？比如说，获取 API 或其他内容的列表。我听说有一个用于此的 SOAP API，但我找不到任何关于它的信息。我希望有人得到一些信息。我发现这个 XML 文件（如下所列）可能是我需要的，也可能不是我需要的，但在 SOAP 方面我完全是菜鸟，不知道我需要什么。这是文件内容。这是 WSDL 文件的样子吗？

```
<?xml version="1.0" encoding="UTF-8"?><serviceGroup name="API" successfullyAdded="true">
    <service name="API" exposedAllTransports="true" serviceDeployedTime="1347567758279" successfullyAdded="true">
        <operation name="getAPI">
            <parameter name="AuthorizationAction">/permission/admin/manage/resources/govern/apis/list</parameter>
            <module name="addressing" version="4.0" type="engagedModules"/>
            <module name="relay" version="4.0" type="engagedModules"/>
        </operation>
        <operation name="updateAPI">
            <parameter name="AuthorizationAction">/permission/admin/manage/resources/govern/apis/add</parameter>
            <module name="addressing" version="4.0" type="engagedModules"/>
            <module name="relay" version="4.0" type="engagedModules"/>
        </operation>
        <operation name="getAPIDependencies">
            <parameter name="AuthorizationAction">/permission/admin/manage/resources/govern/apis/list</parameter>
            <module name="addressing" version="4.0" type="engagedModules"/>
            <module name="relay" version="4.0" type="engagedModules"/>
        </operation>
        <operation name="addAPI">
            <parameter name="AuthorizationAction">/permission/admin/manage/resources/govern/apis/add</parameter>
            <module name="addressing" version="4.0" type="engagedModules"/>
            <module name="relay" version="4.0" type="engagedModules"/>
        </operation>
        <operation name="getAPIArtifactIDs">
            <parameter name="AuthorizationAction">/permission/admin/manage/resources/govern/apis/list</parameter>
            <module name="addressing" version="4.0" type="engagedModules"/>
            <module name="relay" version="4.0" type="engagedModules"/>
        </operation>
        <operation name="deleteAPI">
            <parameter name="AuthorizationAction">/permission/admin/manage/resources/govern/apis/add</parameter>
            <module name="addressing" version="4.0" type="engagedModules"/>
            <module name="relay" version="4.0" type="engagedModules"/>
        </operation>
        <bindings>
            <binding name="APISoap12Binding">
                <operation name="getAPI"/>
                <operation name="updateAPI"/>
                <operation name="getAPIDependencies"/>
                <operation name="addAPI"/>
                <operation name="deleteAPI"/>
                <operation name="getAPIArtifactIDs"/>
            </binding>
            <binding name="APIHttpBinding">
                <operation name="getAPI"/>
                <operation name="updateAPI"/>
                <operation name="getAPIDependencies"/>
                <operation name="addAPI"/>
                <operation name="deleteAPI"/>
                <operation name="getAPIArtifactIDs"/>
            </binding>
            <binding name="APISoap11Binding">
                <operation name="getAPI"/>
                <operation name="updateAPI"/>
                <operation name="getAPIDependencies"/>
                <operation name="addAPI"/>
                <operation name="deleteAPI"/>
                <operation name="getAPIArtifactIDs"/>
            </binding>
        </bindings>
        <policies/>
        <module name="addressing" version="4.0" type="engagedModules"/>
        <module name="relay" version="4.0" type="engagedModules"/>
        <parameter name="enableMTOM">true</parameter>
        <parameter name="adminService">true</parameter>
        <parameter name="AuthorizationAction">/permission/admin/login</parameter>
        <parameter name="hiddenService">true</parameter>
    </service>
</serviceGroup> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:56:04.707

是的，有一个用[Jaggery](http://jaggeryjs.org/)构建的 javascript API 层，可用于以 REST 方式使用 API Manager 相关功能。

目前，您可以在以下[位置](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/apimgt/api-publisher-web/src/site/blocks/)的两个 jaggery 应用程序 [store/publisher] 中找到它们。导航到它，您会注意到根据 api manager 相关功能分类的术语，“blocks”目录中有几个子目录[eg:item-add,listing,search,etc]。打开reuired catogory，将会有一个名为'ajax'的子文件夹，因为我们以AJAX方式传递请求。在里面你可以找到包含相关的jag文件可以以 REST 方式使用的 API 方法。

然而，我们还没有将这个 API 层从 Web 应用程序流中分离出来，以使用户更容易找到和使用 API，但我们计划在不久的将来将此 API 层单独添加到应用程序中。

目前，你可以做的只是去上面提到的位置，找到相关的API方法来消费。例如，如果你想在api-publisher中使用addAPI方法，你可以做的是导航到' ajax'子目录'item-add'目录中的[位置](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/apimgt/api-publisher-web/src/site/blocks/)。你会看到有一个名为'add.jag'的文件。打开它并识别什么是动作[例如：addAPI]和请求参数是什么[ eg:APIName,version,etc]你需要传递来处理动作。然后使用REST客户端向API函数发送http请求。[eg:CURL]。例如这里你的http请求将遵循以下方式。

" [http://ip:port/publisher/site/blocks/item-add/ajax/add.jag](http://ip:port/publisher/site/blocks/item-add/ajax/add.jag) -d "action=addAPI&name=API1&version=1.0.0&description=API&endpoint= [http://search.twitter.com&wsdl=&tags =open,social&tier=Silver&thumbUrl=https:](http://search.twitter.com&wsdl=&tags=open,social&tier=Silver&thumbUrl=https://lh6.ggpht.com/RNc8dD2hXG_rWGzlj09ZwAe1sXVvLWkeYT3ePx7zePCy4ZVV2XMGIxAzup4cKM85NFtL=w124&context=/api2&tiersCollection=Gold&resourceCount=0&resourceMethod-0=POST&uriTemplate-0=/) //lh6.ggpht.com/RNc8dD2hXG_rWGzlj09ZwAe1sXVvLWkeYT3ePx7zePCy4ZVV2XMGIxAzup4cKM85NFtL=w124&context=/api2&tiersCollection=Gold&resourceCount=0&resourceMethod-0=POST&uri

您可以从下载包的以下位置找到基于此 JavaScript 层编写的三个示例 [TwitterSearch、YahooPlaceFinder、YoutubeFinds]。{API 管理器主页}/samples

导航到上述位置内的上述每个三个示例，并查看 APIPopulator.sh 脚本，以更好地了解 API Manager 相关的 jaggery API 是如何从中使用的。

添加到上面，对于 WSO2 API Manager 实现其后端主要功能，我们没有使用 Web 服务调用，而是可以从[这里](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/apimgt/org.wso2.carbon.apimgt.api/1.0.0/)找到的 java API 。您可以使用该 API 进行自定义实现。您可以找到我们的来自[这里](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/apimgt/org.wso2.carbon.apimgt.impl/1.0.0/)的 java API 的 java[back-end] 实现。

# php - 根据当前 URL 更改 css div 或 body 背景图像

> ID：12433559
> 
> 赞同：0
> 
> 时间：2012-09-15T00:27:52.650
> 
> 标签：php, javascript, jquery, css, html

我需要这样做的原因是我正在处理的网站使用完全相同的模板来显示多个页面的动态内容。所有页面都复制完全相同的 div id，因为它们以相同的方式显示内容（标题内容除外！）。标题内容会缩短，但 div id 仍保留在源代码中。

博客索引页面需要显示一张背景图片，而网站上的每个其他页面都需要显示另一张背景图片。

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:32:57.097

这段代码将做你想做的事：

```
if (window.location.href.indexOf('somepart_of_the_url') != -1) {
    //Change background to some div
    $('#somediv').css('backgroundImage','url(images/mybackgroundimage.jpg)');
    //Change background to page body
    $("document.body").css('backgroundImage','url(images/mybackgroundimage.jpg)');
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T00:36:39.850

我经常根据模板或请求路径为 body 类命名。我知道你说他们都使用相同的模板，但是该模板需要参数，其中一个参数应该是

```
body_class 
```

当你在 /. 时，无论你有什么控制器/动态的东西来填充你的站点并渲染模板，都应该传入“home”。在我以前的经验中，我也会传递其他内容，以便 /blog/category/post 可能有一个像

```
<body class="post two-column-a"> 
```

然后你的选择器是这样的：

```
body { ... }
body.home { ... } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T17:34:39.080

这有效：

```
<script language="javascript">
$(document).ready(function() {
if (window.location.href.indexOf('INDEX_URL') != -1) {
//Change background
$('#DIV_ID').css({'background-image': 'url(http://URL.com/images/BG.jpg)', 'background-repeat': 'repeat-x', 'background-position': 'center top', 'width': '100%!important', 'min-height': '400px'});
}
});
</script> 
```

这段代码的缺陷在于，如果您将目录插入“INDEX_URL”，例如 /folder/，则 /folder/ 之后的任何页面都将具有该背景。

# jquery - 使用 Fancybox 2 将标题放在里面

> ID：12433561
> 
> 赞同：1
> 
> 时间：2012-09-15T00:28:19.080
> 
> 标签：jquery, fancybox, fancybox-2

我完全一无所知，但通过使用这里找到的许多很好的答案，我设法让 Fancybox v2.1.0 工作。现在，我想将标题位置更改为“内部” - 我看到了各种代码，例如：

```
 $(".fancybox").fancybox({
helpers : {
    title: {
        type: 'inside'
    }
} 
```

});

但我不知道该放在哪里 - 我要编辑 jquery.fancybox.js 文件吗？如果有，在哪里？我在第 182 行看到可以更改标题类型，但这似乎对我不起作用。

在确定这一点后，我想将打开/关闭更改为“弹性”，所以任何帮助也将不胜感激。没有在线示例页面 - 但它是缩略图的基本页面，每次单击以打开更大的单个图像。

非常感谢 - 很抱歉成为这样的新手 - 以前使用过 Lightbox，但 Fancybox 似乎更适合我的需要。

**编辑**（从评论中移动代码）这是我所拥有的：

```
<script type="text/javascript" src="ajax.googleapis.com/ajax/libs/jquery/1.8.1/... 
<link rel="stylesheet" href="lib/jquery.fancybox.css" type="text/css" media="screen" /> <script type="text/javascript" src="lib/jquery.fancybox.pack.js"></script> 
<script type="text/javascript"> 
 $(document).ready(function() { 
  $(".fancybox").fancybox(); 
 }); 
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T07:03:24.947

你不需要弄乱原始的 js 文件，你只需要在你的 html 文档中加载 fancybox （[看看这里包含什么](http://fancyapps.com/fancybox/#instructions)）

然后，在`<head>`您的 html 文档部分中，包含此脚本（在按照上述说明加载 jQuery 和 fancybox js 文件之后）

```
<script type="text/javascript">
 $(document).ready(function(){
  $(".fancybox").fancybox({
    openEffect  : 'elastic',
    closeEffect : 'elastic',
    helpers     : {
        title: {
            type: 'inside'
        }
    }
  });​
 });
</script> 
```

# facebook - Facebook OpenGraph 操作未获批准

> ID：12433563
> 
> 赞同：-1
> 
> 时间：2012-09-15T00:29:08.843
> 
> 标签：facebook, facebook-opengraph

我正在尝试为我的应用程序提交阅读的 Facebook 打开图形操作。但是当我提交它时，我得到了以下回复。

> 根据您提供的使用说明，我们无法测试此操作。请提供完整的复制说明和指向我们可以触发操作的特定 URL 的链接。您还应该测试您的操作，以确保您可以成功地将操作发布回名为 Auth Dialog Preview User 的测试用户的时间线。完成这些更改后，重新提交您的操作。

我可以理解第一部分，但我不理解以下部分。

> 您还应该测试您的操作，以确保您可以成功地将操作发布回名为 Auth Dialog Preview User 的测试用户的时间线。完成这些更改后，重新提交您的操作。

这是什么意思，我该如何解决？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:38:27.157

这意味着您必须为您的应用程序使用自动创建的测试用户，称为“Auth Dialog Preview User”，并从该用户的帐户发布一些操作。

[https://developers.facebook.com/docs/test_users/](https://developers.facebook.com/docs/test_users/)解释了测试用户的一般工作方式，您可以通过应用设置界面以他们的身份登录

# php - PHP - YouTube Live API - 获取视频 ID

> ID：12433564
> 
> 赞同：0
> 
> 时间：2012-09-15T00:29:14.703
> 
> 标签：php, api, zend-framework, youtube, feed

我想要做的是获取当前在 YouTube 上播放的所有实时视频的列表，然后将它们嵌入，或者如果不可能，至少链接到它们可用的 YouTube。

使用 Zend 框架检索提要的代码非常简单。

```
 $videoFeed = $yt->getVideoFeed('https://gdata.youtube.com/feeds/api/charts/live/events/live_now');
    foreach ($videoFeed as $videoEntry) {
        printVideoEntry($videoEntry);
    } 
```

printVideoEntry() 只显示有关该视频的一堆数据。它适用于频道或播放列表提要。当它用于实时流时，很多数据都不存在。它只是标题、描述和作者。我想要的是视频的视频ID。

通过请求提要的 url，我得到提要的 xml。下面是一个示例视频条目。

```
 <entry gd:etag='W/&quot;CUYEQ347eCp7I2A9WhJUFks.&quot;'>
<id>tag:youtube.com,2008:live:event:IKv8FeyLmiIl-8iUVVahpRaYMLRCD0xt</id>
<published>2012-09-14T21:14:31.000Z</published>
<updated>2012-09-14T22:51:42.000Z</updated>
<category scheme='http://schemas.google.com/g/2005#kind' term='http://gdata.youtube.com/schemas/2007#liveEvent'/>
<title>TGIFF Live Stream with Realm (League of Legends)</title>
<summary>Realm's Livestream: Thank God it's Freakin Friday! This week we're getting into some League of Legends action and teaching our ambitious Hundar how to play! This live show will air every Friday from 4-6pm PST on http://www.machinimalive.com 
Subscribe to the Machinima Live newsletter here! http://eepurl.com/o1-kP</summary>

<content type='application/atom+xml' src='https://gdata.youtube.com/feeds/api/users/MachinimaRealm/live/videos/YbeDQJ_FSVA?v=2'/>
<link rel='self' type='application/atom+xml' href='https://gdata.youtube.com/feeds/api/users/VEbcFWM43PS-d5vaSKUMng/live/events/IKv8FeyLmiIl-8iUVVahpRaYMLRCD0xt?v=2'/>
<author><name>MachinimaRealm</name><uri>https://gdata.youtube.com/feeds/api/users/MachinimaRealm</uri><yt:userId>VEbcFWM43PS-d5vaSKUMng</yt:userId></author>

<media:group><media:description type='plain'>Realm's Livestream: Thank God it's Freakin Friday! This week we're getting into some League of Legends action and teaching our ambitious Hundar how to play! This live show will air every Friday from 4-6pm PST on http://www.machinimalive.com 
Subscribe to the Machinima Live newsletter here! http://eepurl.com/o1-kP</media:description><media:title type='plain'>TGIFF Live Stream with Realm (League of Legends)</media:title></media:group><yt:status>active</yt:status><yt:when end='2012-09-15T01:00:00.000Z' start='2012-09-14T22:51:42.000Z'/></entry> 
```

“内容”项目包含视频 ID 作为“src”，但我不知道如何访问它。

```
echo $videoEntry->content->src 
```

返回空值。

有人能帮我解决这个问题吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:28:39.747

Can you `var_dump` the entire object? It doesn't seem like a PHP problem, but a Zend Framework specific problem. (also, putting a `zend-framework` tag should lend better results for your question)

# java - 减少抽象类

> ID：12433566
> 
> 赞同：-1
> 
> 时间：2012-09-15T00:29:48.227
> 
> 标签：java, swing, keyboard, abstract-class, key-bindings

我在这里有这段代码来创建一个键绑定：

```
KeyStroke k = KeyStroke.getKeyStroke(KeyEvent.VK_F1, 0);
getInputMap(WHEN_IN_FOCUSED_WINDOW).put(k, k.toString());
getActionMap().put(k.toString(), new AbstractAction()
{ 
    public void actionPerformed(ActionEvent e)
    {
        //put action here
    }
}); 
```

问题是我的程序中有 8 个。每一个都创建一个单独的类文件来保存抽象类。如果可能的话，我将如何重写它以限制创建的类的数量。（我已经搜索过这个，但是减少抽象类并没有提供任何有用的东西）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T01:50:02.410

除了@EdC 在此建议的扩展之外，您还可以使用组合，如本示例所示[，](https://stackoverflow.com/a/12433730/230513)[其中](https://stackoverflow.com/a/5797965/230513)使用`Action`指定给封闭构造函数的参数`JButton`。此外，一个人`Action`可以*将*其转发`ActionEvent`给另一个人`Action`，如图所示[`KeyPadPanel`](https://sites.google.com/site/drjohnbmatthews/keypad-panel)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T01:14:00.430

因此，如果您用一些重复的例子来更新问题，那么会有什么帮助。例如，它只是重复的匿名内部类的样板。如果是这样，您将被困在 java 8 之前。还是方法主体的某些重要部分被复制了？

在这种情况下，您可以使用公共代码添加一个抽象超类。这实际上会增加类的数量，但这通常不是问题。例如

```
private static abstract class MyBaseAction extends AbstractAction {
    public void actionPerformed(ActionEvent e) {
        // Do Common Stuff
        // ....

        doSpecificStuff(e);
    }

    protected abstract void doSpecificStuff(ActionEvent e);
} 
```

然后将其子类化，而不是为您的匿名内部类进行抽象操作。

# mysql - SQL 自动派生字段

> ID：12433567
> 
> 赞同：-1
> 
> 时间：2012-09-15T00:29:56.753
> 
> 标签：mysql, sql, derived

好的，我正在寻找一种方法使某个字段等于其他 3 个字段的总和。我有 3 个不同的评分字段，然后是一个“总体评分”字段，我需要自动等于其他 3 个的总和。我知道如何使用 select 语句检索值，我只是希望它自动发生在桌子。- 使用 MySQL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:42:09.003

在不同的 DBMS 中有不同的方法可以做到这一点，例如虚拟列，

在甲骨文中：

```
overall NUMBER GENERATED ALWAYS AS (rating1 + rating2 + rating3) VIRTUAL 
```

在 SQL Server 中：

```
[overall] AS (rating1 + rating2 + rating3) PERSISTED 
```

不幸的是，并非所有 DBMS 都支持虚拟列。最通用（在大多数 DBMS 上工作）的方法是创建一个视图，例如：

```
CREATE VIEW ratings_overall AS 
   SELECT rating1, rating2, rating3, (rating1 + rating2 + rating3) as overall
   FROM source_table; 
```

# java - 接收一个 bean 作为许多具体类型之一

> ID：12433568
> 
> 赞同：0
> 
> 时间：2012-09-15T00:30:12.597
> 
> 标签：java, casting, constructor, return, javabeans

我有一个大约五级深度的 Java bean 继承层次结构，其中有许多类型的车辆模型作为最深层次的子类。每辆车大约有20个田地。我让工厂根据价值返回特定的车型。然后我必须使用设置器来设置二十个字段中的每一个。但是属性，因此，setter 取决于每个模型。这些模型不实现任何接口。即使他们这样做了，我也无法在接收空具体类型的接口类型上调用 setter。有没有办法将引用接收到具体模型类型中，以便我可以调用 setter？其余的类需要使用这样的引用来调用其他方法。

我想收到以下内容之一：

```
Camry camry = Factory.get("DL");
Taurus taurus = Factory.get("BC");
Cadillac cadillac = Factory.get("ES"); 
```

然后根据需要使用其中一个参考。cadillac.setStarSystem("star123"); ..所有凯迪拉克相关的二传手

不必使用工厂。任何其他技术都可以。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T00:39:22.593

如果你知道你要回来的类型，这不只是一个简单的铸造练习吗？（“任何其他技术都可以”？）

```
Camry camry = (Camry)vehicles.get("DL");
Taurus taurus = (Taurus)vehicles.get("BC");
Cadillac cadillac = (Cadillac)vehicles.get("ES");

cadillac.setStarSystem("star123"); 
```

不，您*不需要*使用任何特定的接口来执行此操作。如所示/提到的，这将允许您“将引用接收到具体的模型类型中，以便我可以调用 setter”。

（Java 1.5/5.0 引入的泛型的一个不幸的副作用是它有时会导致用户忘记多态性的基础知识——突然之间，“强制转换很糟糕”。）

# javascript - 如何将空格填充的网址转换为链接

> ID：12433574
> 
> 赞同：0
> 
> 时间：2012-09-15T00:31:59.530
> 
> 标签：javascript, regex, url

我有以下代码用于将文本中的 http URL 转换为锚标记。它正在寻找以 http 开头的任何内容，并被空格（或输入的开头/结尾）包围

```
function linkify (str) {
    var regex = /(^|\s)(https?:\/\/\S+)($|\s)/ig;
    return str.replace(regex,'$1<a href="$2" target="_blank">$2</a>$3')
}

// This works
linkify("Go to http://www.google.com and http://yahoo.com");

// This doesn't, yahoo.com doesn't become a link
linkify("Go to http://www.google.com http://yahoo.com"); 
```

它不起作用的情况是如果我在两个链接之间只有一个空格。我假设这是因为两个链接之间的空间不能用于匹配两个 URL，在第一次匹配之后，URL 之后的空间已经被消耗。

玩：http: [//jsfiddle.net/NgMw8/](http://jsfiddle.net/NgMw8/)

有人可以建议一种正则表达式方法吗？我可以自己扫描字符串，寻找一种正则表达式的方式（或者某种不需要我自己扫描字符串并自己构建新字符串的方式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:34:32.177

不要捕获决赛`\s`。这样，第二个 url 将`\s`根据需要与前面的 url 匹配：

```
function linkify (str) {
    var regex = /(^|\s)(https?:\/\/\S+)/ig;
    return str.replace(regex,'$1<a href="$2" target="_blank">$2</a>')
} 
```

[http://jsfiddle.net/NgMw8/3/](http://jsfiddle.net/NgMw8/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T00:55:19.177

在匹配您的 final 时只需使用积极的前瞻`$|\s`，如下所示：

```
var regex = /(^|\s)(https?:\/\/\S+)(?=($|\s))/ig; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T00:02:34.157

如果有任何 html 元素粘在 url 上，则没有任何作用......

类似的问题，它的答案在[这里](https://stackoverflow.com/questions/12440232/using-regex-and-javascript-to-make-links-clickable-but-not-overwrite-pre-existin/12446278#answer-12446278)

一些解决方案可以处理诸如“test.com/anothertest?get=letsgo”之类的 url 并附加 http://

*   可以采取解决方法来处理 https 和其他 tld ...

# java - 排序哈希函数和编译错误

> ID：12433576
> 
> 赞同：2
> 
> 时间：2012-09-15T00:32:20.557
> 
> 标签：java, sorting, collections, hashmap

我使用这种方法对我的哈希函数进行排序。当我编译程序时，会出现这些错误：

```
Note: Retriever.java uses unchecked or unsafe operations.
Note: Recompile with -Xlint:unchecked for details. 
```

我的`hashMap<String, Double>`

```
private static Map sortByComparator(Map unsortMap) {

    List list = new LinkedList(unsortMap.entrySet());

    // sort list based on comparator
    Collections.sort(list, new Comparator() {
        @Override
        public int compare(Object o1, Object o2) {
            return ((Comparable) ((Map.Entry) (o2)).getValue())
                    .compareTo(((Map.Entry) (o1)).getValue());
        }
    });

    // put sorted list into map again
    Map sortedMap = new LinkedHashMap();
    for (Iterator it = list.iterator(); it.hasNext();) {
        Map.Entry entry = (Map.Entry) it.next();
        sortedMap.put(entry.getKey(), entry.getValue());
    }
    return sortedMap;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:56:20.843

这是一个编译器警告，因为您忽略了泛型并使用“原始”类型。Ypu需要指定泛型如下：

```
private static <K, V extends Comparable<V>> Map<K, V> sortByComparator(Map<K, V> unsortMap) {

    List<Map.Entry<K, V>> list = new LinkedList<Map.Entry<K, V>>(unsortMap.entrySet());

    //sort list based on comparator
    Collections.sort(list, new Comparator<Map.Entry<K, V>>() {
        @Override
         public int compare(Map.Entry<K, V> o1, Map.Entry<K, V> o2) {
           return o1.getValue().compareTo(o2.getValue());
         }
    });

    //put sorted list into map again
    Map<K, V> sortedMap = new LinkedHashMap<K, V>();
    for (Iterator<Map.Entry<K, V>> it = list.iterator(); it.hasNext();) {
         Map.Entry<K, V> entry = it.next();
         sortedMap.put(entry.getKey(), entry.getValue());
    }
    return sortedMap;
} 
```

这里发生的事情是，通过指定泛型类型，您可以告诉编译器这些集合包含哪些类型的对象。因此，我能够消除比较器和第二个循环中的所有演员表。这使得该方法实际上类型安全且可由编译器检查。

编译器通过警告告诉您的是，因为您使用的是原始类型并进行强制转换，所以它无法检查您输入的准确性。另一种选择是使用@SuppressWarnings 简单地抑制此警告，但最好实际使方法类型安全。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T01:14:58.197

我建议您查看有关如何使用集合框架的 Oracle 文档。您可以使用原始类型，但这样会失去 Java 5 中引入的用于提高代码质量和生产力的功能。

如果您是 Collections Framework 的新手，请查看[http://docs.oracle.com/javase/tutorial/collections/intro/index.html](http://docs.oracle.com/javase/tutorial/collections/intro/index.html)。这是了解其工作原理的好来源。

As you are saying you "compiled" the program, i assume you`re not using an IDE like Eclipse to help you. I recommend you use Eclipse to help you creating your projects. It will help you with these compiler errors/warnings. Thus, it will give you some tips while you are coding, like errors, warnings and so on.

Take a look at [http://www.eclipse.org/](http://www.eclipse.org/).

# java - Android SDK 中的 Find_java.exe 找不到 Java

> ID：12433581
> 
> 赞同：0
> 
> 时间：2012-09-15T00:33:42.547
> 
> 标签：java, android

我肯定已经安装了 JDK 1.6.0 `C:\Program Files\Java\jdk1.6.0_35`，但是当我尝试打开 SDK 管理器时，它似乎永远无法找到它。在任务管理器中，find_java.exe 会一直显示，直到我停止它（将运行几个小时）。

我必须设置一些环境变量才能使其正常工作吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:59:07.727

可能是您忘记了`PATH`环境变量。要检查此用途，

在 Unix/Linux 系统中，

```
echo $PATH
echo $JAVA_HOME 
```

在 Windows 系统中，

```
echo %PATH%
echo %JAVA_HOME% 
```

如果两个测试都显示空行，那么您可能需要再次设置它们。

要设置它们，请执行此操作。首先尝试在`UAC`关闭的情况下重新安装java。如果失败，请在`cmd`

```
SetX PATH %PATH%;<path_to_jdk/jre>\bin\
SetX JAVA_HOME <path_to_jdk/jre> 
```

希望它有所帮助，并认为您正在使用 Windows。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T02:13:19.503

当您使用 Windows 系统时，请使用以下方式设置您的`JAVA_HOME`和`CLASSPATH`环境变量。

**视窗**

*   选择开始，选择控制面板。双击系统，然后选择高级选项卡。
*   单击环境变量。在系统变量部分中，找到 PATH 环境变量并选择它。单击编辑。如果 PATH 环境变量不存在，请单击新建。
*   在编辑系统变量（或新系统变量）窗口中，指定 PATH 环境变量的值。单击确定。单击确定关闭所有剩余的窗口。

**视窗：**

*   在桌面上，右键单击我的电脑图标。
*   从上下文菜单中选择属性。
*   单击高级选项卡（Vista 中的高级系统设置链接）。
*   单击环境变量。在系统变量部分中，找到 PATH 环境变量并选择它。单击编辑。如果 PATH 环境变量不存在，请单击新建。
*   在编辑系统变量（或新系统变量）窗口中，指定 PATH 环境变量的值。单击确定。单击确定关闭所有剩余的窗口。

**Windows 7的：**

*   在桌面上，右键单击计算机图标。
*   从上下文菜单中选择属性。
*   单击高级系统设置链接。
*   单击环境变量。在系统变量部分中，找到 PATH 环境变量并选择它。单击编辑。如果 PATH 环境变量不存在，请单击新建。
*   在编辑系统变量（或新系统变量）窗口中，指定 PATH 环境变量的值。单击确定。单击确定关闭所有剩余的窗口。

现在除了基于 Linux 的系统，还遵循用于设置`JAVA_HOME`和`CLASSPATH`变量的步骤，

*   打开根文件夹
*   在查看菜单中，勾选“显示隐藏文件”，或按 Ctrl + H。
*   现在您可以看到一个名为**.bashrc的系统隐藏文件**
*   右键单击并打开它的编辑器，并在最后编写以下命令。

    ```
    PATH=$PATH:/opt/jdk1.6.0_21/bin
    export PATH
    JAVA_HOME=/opt/jdk1.6.0_21
    export JAVA_HOME
    NDK_HOME=/opt/android-ndk-r8
    export NDK_HOME 
    ```

*   保存并退出。

# android - 将活动带回前面后，TextView 停止更新

> ID：12433583
> 
> 赞同：2
> 
> 时间：2012-09-15T00:35:02.907
> 
> 标签：android, runnable

我试图找出线程并遇到这个问题，如果应用程序被发送到后面，TextView 会停止更新，然后再恢复。

如何确保应用程序重新回到前面后 TextView 继续更新？

或者...

重新启动活动后，如何将 TextView 重新连接到我的可运行线程中的处理程序？

有一个进度条可以正常工作，所以我有点困惑。我很感激一些建议，因为我认为我可能犯了一个简单的错误。

```
public class ThreadTestActivity extends Activity {
    private Handler handler;
    private static ProgressBar progress;
    private TextView tv;
    private int counter = 0;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_ThreadTest);
        handler = new Handler();
        progress = (ProgressBar) findViewById(R.id.progressBar1);
        tv = (TextView) findViewById(R.id.myText);
        Button but = (Button) findViewById(R.id.Button01);

        but.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {

                thread_fun();
            });}
    }
    private void thread_fun() {

        new Thread(new Runnable() {
            public void run() {

                try {
                    while (counter < 100) {
                        counter += 20;
                        Thread.sleep(2000);
                        // Update the progress bar and TextView (in 5 chunks of 20, 0 to 100) 
                        // This works perfectly it the app stays in front
                        handler.post(new Runnable() {
                            public void run() {
                            // but after sending to the back (esc) and bringing the activity back to the front
                                progress.setProgress(counter); //This progres bar maintains its value and updates correctly
                                tv.setText(String.valueOf(counter)); //This TextView reverts to its default text and does not update  
                            }
                        });
                    }

                } catch (IOException e) {
                    e.printStackTrace();
                }
            }
        }).start();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T03:38:37.390

当一个活动在后台运行然后恢复时，它会经历整个生命周期。这意味着创建了一个新实例，并再次调用 Activity.onCreate。[有关详细信息，请参见此处](http://developer.android.com/reference/android/app/Activity.html)的图表。*需要注意的重要一点是，活动经历了这个生命周期，并且在方向改变时也会*被销毁和重新创建。所以这是你必须意识到并与之合作或围绕的事情。

当您的 Activity 在后台运行并恢复时更新 ProgressBar 的原因是您在每次调用 onCreate 时设置的 Activity 中有一个静态引用。此静态引用在您的 Activity 的第一个实例和您恢复后创建的第二个实例之间共享。一旦你开始你的线程，它只会更新这个引用指向的任何 ProgressBar，所以你会得到同一个 ProgressBar 正在更新的印象。

事实上，它不是同一个对象，它是一个不同的实例。这就是为什么 TextView 中的文本没有更新的原因，因为线程正在更新一个较旧的 TextView 实例，而不是屏幕上的那个。您可以在调试器中确认所有这些，或者更简单地通过打印出对象的哈希码来确认。尝试将其放入您的 while 循环中：

```
Log.d("thread_fun", "threadid="+Thread.currentThread().getId()+
    ",progressbar="+progress.hashCode()+
    ",textview="+tv.hashCode()); 
```

请注意，ProgressBar 的哈希码发生了变化，因为线程正在更新一个新的 ProgressBar，但正在更新的 TextView 的哈希码没有变化。

```
D/thread_fun(28989): thread=3483,progress=1097438768,textview=1097437160
D/thread_fun(28989): thread=3483,progress=1097438768,textview=1097437160
D/thread_fun(28989): thread=3483,progress=1097528568,textview=1097437160
D/thread_fun(28989): thread=3483,progress=1097528568,textview=1097437160 
```

现在，答案不是让 TextView 也是静态的。这不是您应该在 Activity 生命周期更改之间维护状态的方式，因为如果您不小心，它可能会导致[内存泄漏，坦率地说，这也令人困惑，正如您从上面看到的那样。](http://android-developers.blogspot.com/2009/01/avoiding-memory-leaks.html)相反，您应该覆盖其他生命周期方法之一，onPause 或 onStop，以保存 ProgressBar 和 TextView 的状态，并可能终止正在更新它的线程。然后，在 onCreate 中，您需要将该状态从 Bundle 中拉出，并将 ProgressBar 和 TextView 恢复到用户离开时的状态，并且还可能重新启动线程。您可能想要阅读的方法称为[Activity.onSaveInstanceState](http://developer.android.com/reference/android/app/Activity.html#onSaveInstanceState%28android.os.Bundle%29). 还有其他选项，但这是 StackOverflow 在很多问题中都涉及的内容，并且在 Android SDK 文档中进行了很好的描述。

我希望这会有所帮助！如果不清楚，请告诉我！

# python - 类构造函数应该返回子类吗？

> ID：12433584
> 
> 赞同：3
> 
> 时间：2012-09-15T00:35:07.540
> 
> 标签：python, oop, coding-style

类构造函数应该返回子类吗？

这主要是关于OOP风格和python风格的问题。我遇到了需要实现通用案例解决方案的问题，出于性能原因，我需要为特定输入类型实现优化的解决方案。输入类型取决于用户。目前，我已经通过对一般案例解决方案进行子类化以制作优化解决方案来实现这一点。我想出了下面的例子来帮助描述我的意思。

```
from collections import Counter

class MyCounter(object):
    """General Case Counter"""
    def __init__(self, seq):
        self.seq = seq

    def count(self, key):
        return sum(key == item for item in self.seq)

class OptimizedCounter(MyCounter):
    """Counter optimized for hashable types"""
    def __init__(self, seq):
        self.counter = Counter(seq)

    def count(self, key):
        return self.counter.get(key, 0)

counter = MyCounter(['a', 'a', 'b', [], [0, 1]])
counter.count([0, 1])
# 1

counter = OptimizedCounter(['a', 'a', 'b'])
counter.count('a')
# 2 
```

我的问题是如何设计一个流畅的界面，以便用户获得适当的实例，而不必担心它是如何实现的。我考虑过做类似以下的事情，但这对我来说感觉很丑。有没有更规范或 OOP 的方式来做这样的事情？

```
class MyCounter(object):
    """General Case Counter"""
    def __new__(cls, seq):
        if hasOnlyHashables(seq):
            return object.__new__(OptimizedCounter)
        else:
            return object.__new__(MyCounter) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-15T00:36:12.450

使用返回适当类的实例的工厂函数。

```
def makeCounter(seq):
    if hasOnlyHashables(seq):
        return OptimizedCounter(seq)
    else:
        return MyCounter(seq) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T00:46:31.147

您的分配器实现有点偏离。如果您需要创建子（或不同）类型的实例，那么您可以通过调用*其*构造函数来实现；只有当你想创建*当前*类的实例时，你才应该调用父级的（`object`在这种情况下）分配器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-02-10T18:07:40.510

不，类构造函数不返回任何内容。

您需要按照 BrenBarn 的建议创建一个工厂，但我会将该工厂作为静态方法放在最通用的类​​中。

像这样的东西：

```
class MyCounter(object):
    @staticmethod
    def from_seq(cls, seq):
        if hasOnlyHashables(seq):
            return OptimizedCounter(seq)
        else:
            return MyCounter(seq) 
```

# javascript - 指定页面在页面重新加载时保持选中状态

> ID：12433587
> 
> 赞同：1
> 
> 时间：2012-09-15T00:35:44.303
> 
> 标签：javascript, jquery

我将在下面发布 html 和 javascript 以使事情变得清晰......但在我这样做之前，我将解释一下我想要完成的事情。

基本上我想让一些页面在不重新加载页面的情况下打开。那是成功完成的。现在，我找不到任何关于如何使被点击的页面在页面加载/重新加载时保持打开状态的解决方案。

```
<nav>
    <a href="#home">Home</a>
    <a href="#download">Download</a>
    <a href="#about">About</a>
    <a href="#contact">Contact</a>
</nav>

<div id="container">
<div id="home">
    Home
</div>

<div id="download">
    Download
</div>

<div id="about">
    About
</div>

<div id="contact">
    Contact
</div>
</div>

$(function(){
var $menuItems = $('nav a'),
    $container = $("#container");

$menuItems.on('click', function(e) {
    e.preventDefault();
    $(this.hash, $container).delay(300).fadeIn(1000).siblings().fadeOut(1000);
});
});​ 
```

感谢 Marcus Ekwall 对 javascript 的帮助！

现在...我真的很想知道如何在重新加载页面时使用这些 href 来加载单击的菜单页面，以及如何在首次访问时加载主页。因为我得到的是空白页（没有内容），直到我点击其中一个菜单项。

干杯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:20:37.863

如果`localStorage`适合你？

```
$(function() {
    var $menuItems = $('nav a'),
        $container = $("#container");

    $menuItems.on('click', function(e) {
        e.preventDefault();
        $(this.hash, $container).delay(300).fadeIn(1000).siblings().fadeOut(1000);
        localStorage.setItem('currentpage', this.hash);
    });
    if (localStorage.getItem('currentpage')) {
        $(localStorage.getItem('currentpage'), $container).siblings().hide();
    }
}); 
```

**更新**

添加了一个[演示](http://jsfiddle.net/b2aJ4/)。

# ios - 使用按钮标题打开电话应用程序

> ID：12433589
> 
> 赞同：0
> 
> 时间：2012-09-15T00:36:20.040
> 
> 标签：ios, uibutton, openurl

我有一个以电话号码为标题的 UIButton。

此代码会打开带有标题号码的手机应用程序吗？

```
- (IBAction)callContact:(id)sender 
{
    [[UIApplication sharedApplication] openURL: 
        [NSURL URLWithString:telfButton.titleLabel.text]];
} 
```

它给了我一个错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T01:28:57.980

取决于 URL 是什么。如果它只是`3033749943`它不会工作。但`tel://3033749943`会工作得很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:10:41.077

如另一个答案所述，您必须使用“tel://”来启动电话应用程序并拨打号码。但是，您可以使用`NSString`'s`stringWithFormat`在“tel://”之后的按钮标题中添加数字。

```
- (IBAction)callContact:(id)sender 
{
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:[NSString stringWithFormat:@"tel://%@",telfButton.titleLabel.text]];
} 
```

# inno-setup - Inno Setup 不包括目标文件夹中的任何指定文件

> ID：12433590
> 
> 赞同：2
> 
> 时间：2012-09-15T00:36:32.327
> 
> 标签：inno-setup

这是我第一次使用 Access Developer Extensions 以外的安装程序。我尝试将几个 MS Access 文件安装到用户的 AppData\Local 文件夹中。它似乎唯一要做的就是在该文件夹中放置两个文件：unins000.exe 和 unins000.dat。它似乎忽略了我想放在那里的文件，尽管当我编译它时肯定将它们包含在 Setup.exe 文件中。这是脚本 - 有人可以告诉我这里有什么问题吗？目标文件夹或文件是否存在似乎并不重要 - 我得到相同的结果。

```
; -- LEAP.iss --

[Setup]
AppName=LEAP
AppVersion=1.1
DefaultDirName={localappdata}\LEAP
DefaultGroupName=LEAP
Compression=lzma2
SolidCompression=yes
OutputDir=userdocs:Inno Setup Output

[Files]
Source: "China.accdb"; DestDir: "{localappdata}"; DestName: "China.accdr"
Source: "Replica of China_be.mdb"; DestDir: "{localappdata}"

[Icons]
Name: "{group}\LEAP"; Filename: "{localappdata}\China.accdr"
Name: "{userdesktop}\LEAP"; Filename: "{localappdata}\China.accdr" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T03:00:52.637

您想在和部分`{localappdata}`替换为。**一旦用户在“选择目标位置**”向导页面上选择了安装位置，就会定义该常量。您的最终用户可能不明白您允许他们选择安装程序的位置，只是发现您实际上已经在安装程序中硬编码了该位置。`{app}``[Files]``[Icons]``{app}`

 **如果您不希望他们选择位置，请[`DisableDirPage=true`](http://www.jrsoftware.org/ishelp/index.php?topic=setup_disabledirpage)在 中设置`[Setup]`。

您还应该在 [Setup] 中建立[AppID值。](http://www.jrsoftware.org/ishelp/index.php?topic=setup_appid)**

# java - final 方法中的早期绑定

> ID：12433594
> 
> 赞同：1
> 
> 时间：2012-09-15T00:36:51.880
> 
> 标签：java

我在多个地方读到最终方法是早期绑定的，但没有一个提供令人满意的理由。我怀疑即使在父类引用上调用的最终方法中，它怎么可能如此coz，编译器无法说明是调用父类的非最终方法还是子类的最终方法。
请指教。

```
class Parent {
    void meth() {
       System.out.println("parent");
}
}

class Child extends Parent {

@Override
final void meth() {
    // TODO Auto-generated method stub
    System.out.println("child");
}

public static void main(String[] args) {
    Parent parent = new Parent();
    Parent child = new Child();
    child.meth();
    parent.meth();
}
} 
```

在上面的代码中，调用子方法（父引用）的方法 meth() 是最终方法，但是 JVM 应该需要在运行时使用方法查找表，就像调用的子方法或父方法一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:48:13.210

自然，只有当引用的静态类型是方法具有 final 说明符的类时，才会发生早期绑定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T01:05:45.770

java中的绑定分两个阶段进行。在编译时，编译器已知的引用类型用于将方法绑定到可能是类型层次结构的最高方法。例如，如果在 Number 类型变量上调用 toString()，那么编译器知道它必须调用 Number.toString() 或子类覆盖而不是 Object.toString()。

其次，在运行时调用方法时，会查看对象的运行时类型，并找到并调用类型层次结构中最具体的方法。即在上面的 Number.toString 的情况下，如果对象是 Integer，它将找到 Integer.toString 并调用它。

如果方法在引用/变量的类型中是最终的，那么可以跳过第二步，因为我们知道不能有子类覆盖。这就是 Dima Rudnick 所说的静态类型。再次以我的示例为例，如果 Number.toString 是最终的，并且变量是 Number 类型，那么我们不需要查看运行时类型来知道我们正在调用什么方法。

*注意：*出于此目的，我假设 Object、Number 和 Integer 都具有特定的 toString 方法，而不是依赖于继承的方法。

# ajax - 如何在页面离开时终止长轮询 Ajax 请求

> ID：12433599
> 
> 赞同：3
> 
> 时间：2012-09-15T00:38:46.550
> 
> 标签：ajax, comet, server-push

我有很长的轮询 Ajax 请求。浏览器，至少但不是最后一个 IE 不会在页面离开时终止请求，因此即使用户访问其他站点，请求也会保持打开和活动状态。多说，浏览器可以成功地处理来自这个连接的响应，尽管它们的结果无处可去。作为调用 htmlxml 连接中止或停止窗口的一般建议显然不起作用。所以我的实现是在卸载时添加额外的 Ajax 调用，以通知服务器连接持有者该页面处于休假状态，因此它可以发送一些虚拟响应，并且浏览器将在之后将连接返回到可用池。这种方法有效，但看起来我过度设计了。不幸的是，我可以在其他一些程序（如 GMAIL）上观察到类似的问题，它也会进行长时间轮询，结果在重新加载后它停止工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T10:03:15.587

IE 的 XHR 上有一个`abort()`方法可以手动断开它。

这有点hacky，但您可以尝试以下方法：

```
<body onbeforeunload="AbortMyAjax()"> 
```

并使用该方法中止任何活动的长轮询。

作为参考，这是我的一个项目中的一些代码：

```
$this.lp = null;
function _LongPoll() {
    $.ajaxSetup({ cache: false });
    $this.lp = $.getJSON(m_PollUrl, _LongPollCallback);
} 
```

并在正文前卸载：

```
if(!!QueueManager.lp && !!QueueManager.lp.abort) QueueManager.lp.abort('PAGE_CLOSED'); 
```

# javascript - 如何在两个数组中找到匹配的值？

> ID：12433604
> 
> 赞同：115
> 
> 时间：2012-09-15T00:40:37.733
> 
> 标签：javascript, arrays

我有两个数组，我希望能够比较这两个数组并只返回匹配的值。例如，两个数组都有值`cat`，所以这就是将返回的值。我还没有找到这样的东西。返回相似性的最佳方法是什么？

```
var array1 = ["cat", "sum","fun", "run"];
var array2 = ["bat", "cat","dog","sun", "hut", "gut"];

//if value in array1 is equal to value in array2 then return match: cat 
```

* * *

## 回答 #1

> 赞同：347
> 
> 时间：2017-10-26T15:00:51.863

您可以使用 ：

```
const intersection = array1.filter(element => array2.includes(element)); 
```

* * *

## 回答 #2

> 赞同：61
> 
> 时间：2012-09-15T00:51:50.050

自然，我的方法是遍历第一个数组一次并检查第二个数组中每个值的索引。如果索引是`> -1`，则将`push`其放到返回的数组中。

```
​Array.prototype.diff = function(arr2) {
    var ret = [];
    for(var i in this) {   
        if(arr2.indexOf(this[i]) > -1){
            ret.push(this[i]);
        }
    }
    return ret;
}; 
```

​我的解决方案不像其他人那样使用两个循环，因此它可能运行得更快一些。如果您想避免使用`for..in`，您可以先对两个数组进行排序以重新索引它们的所有值：

```
Array.prototype.diff = function(arr2) {
    var ret = [];
    this.sort();
    arr2.sort();
    for(var i = 0; i < this.length; i += 1) {
        if(arr2.indexOf(this[i]) > -1){
            ret.push(this[i]);
        }
    }
    return ret;
}; 
```

用法如下所示：

```
var array1 = ["cat", "sum","fun", "run", "hut"];
var array2 = ["bat", "cat","dog","sun", "hut", "gut"];

console.log(array1.diff(array2)); 
```

如果您在扩展 Array 原型时遇到问题/问题，您可以轻松地将其更改为函数。

```
var diff = function(arr, arr2) { 
```

`this`而且你会改变 func 最初所说的任何地方`arr2`。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2017-11-28T05:28:07.897

我发现@jota3 的建议对我来说非常有效。

```
var intersections = array1.filter(e => array2.indexOf(e) !== -1); 
```

希望这可以帮助！

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2012-09-15T13:14:15.757

与（如在其他带有 loops/ 的解决方案中所见）`O(n log(n) + m log(m))`相比，此函数运行，如果您要处理大量值，这可能很有用。`O(n*m)``indexOf`

但是，因为既不是`"a" > 1`也不是`"a" < 1`，这仅适用于相同类型的元素。

```
function intersect_arrays(a, b) {
    var sorted_a = a.concat().sort();
    var sorted_b = b.concat().sort();
    var common = [];
    var a_i = 0;
    var b_i = 0;

    while (a_i < a.length
           && b_i < b.length)
    {
        if (sorted_a[a_i] === sorted_b[b_i]) {
            common.push(sorted_a[a_i]);
            a_i++;
            b_i++;
        }
        else if(sorted_a[a_i] < sorted_b[b_i]) {
            a_i++;
        }
        else {
            b_i++;
        }
    }
    return common;
} 
```

例子：

```
var array1 = ["cat", "sum", "fun", "hut"], //modified for additional match
    array2 = ["bat", "cat", "dog", "sun", "hut", "gut"];
intersect_arrays(array1, array2);
>> ["cat", "hut"] 
```

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2012-09-15T00:48:13.990

每次迭代第一个数组中的元素时，循环遍历第二个数组，然后检查匹配项。

```
var array1 = ["cat", "sum", "fun", "run"],
    array2 = ["bat", "cat", "dog", "sun", "hut", "gut"];

function getMatch(a, b) {
    var matches = [];

    for ( var i = 0; i < a.length; i++ ) {
        for ( var e = 0; e < b.length; e++ ) {
            if ( a[i] === b[e] ) matches.push( a[i] );
        }
    }
    return matches;
}

getMatch(array1, array2); // ["cat"] 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2018-07-16T10:44:29.097

```
var array1  = [1, 2, 3, 4, 5, 6];
var array2 = [1, 2, 3, 4, 5, 6, 7, 8, 9];
var array3 = array2.filter(function(obj) { 
    return array1.indexOf(obj) == -1; 
}); 
```

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2019-01-18T08:19:17.150

您可以使用 javascript 函数[`.find()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/find) 正如 MDN 中所说，它将返回第一个为 true 的***值***。如果找到这样的元素，find*立即*返回该元素的值。否则，查找返回`undefined`。

```
var array1 = ["cat", "sum", "fun", "run", "cat"];
var array2 = ["bat", "cat", "dog", "sun", "hut", "gut"];

found = array1.find((val, index) => {
  console.log('index', index) // Stops at 0
  return array2.includes(val)
})
console.log(found)
```

或者使用[`.filter()`](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)，它首先遍历每个元素，然后将结果返回给您。

```
var array1 = ["cat", "sum", "fun", "run", "cat"];
var array2 = ["bat", "cat", "dog", "sun", "hut", "gut"];

found = array1.filter((val, index) => {
  console.log('index', index) // Stops at array1.length - 1
  return array2.includes(val)
})
console.log(found)
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-07-08T10:52:50.180

使用 lodash

```
GLOBAL.utils = require('lodash')
var arr1 = ['first' , 'second'];
var arr2 = ['second '];

var result = utils.difference(arr1 , arr2);
console.log ( "result :" + result ); 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2012-09-15T00:45:21.683

作为答案完成，所以我可以进行格式化......

这是您需要经历的过程。循环遍历数组以获取详细信息。

```
create an empty array
loop through array1, element by element. {
  loop through array2, element by element {
    if array1.element == array2.element {
      add to your new array
    }
  }
} 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2012-09-15T00:48:47.497

如果您的值是非空字符串或数字，则可以将对象用作字典：

```
var map = {}, result = [], i;
for (i = 0; i < array1.length; ++i) {
    map[array1[i]] = 1;
}

for (i = 0; i < array2.length; ++i) {
    if (map[array2[i]] === 1) {
        result.push(array2[i]);

        // avoid returning a value twice if it appears twice in array 2
        map[array2[i]] = 0;
    }
}

return result; 
```

* * *

## 回答 #11

> 赞同：2
> 
> 时间：2016-03-30T20:55:40.667

像 underscore 和 lodash 这样的库有一个实用方法调用`intersection`来查找传入的数组中的匹配项。看看：[http ://underscorejs.org/#intersection](http://underscorejs.org/#intersection)

* * *

## 回答 #12

> 赞同：2
> 
> 时间：2018-02-21T13:21:45.630

使用一些 ES6：

```
let sortedArray = [];
firstArr.map((first) => {
  sortedArray[defaultArray.findIndex(def => def === first)] = first;
});
sortedArray = sortedArray.filter(v => v); 
```

此代码段还根据*defaultArray的顺序对**firstArr进行排序*

 *像：

```
let firstArr = ['apple', 'kiwi', 'banana'];
let defaultArray = ['kiwi', 'apple', 'pear'];
...
console.log(sortedArray);
// ['kiwi', 'apple']; 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-06-02T16:42:56.257

迭代 array1 并找到 array2 中存在的 indexof 元素。

```
var array1 = ["cat", "sum","fun", "run"];
var array2 = ["bat", "cat","sun", "hut", "gut"];
var str='';
for(var i=0;i<array1.length;i++){
        if(array2.indexOf(array1[i]) != -1){
           str+=array1[i]+' ';
       };
    }
console.log(str) 
```*

# .net - MVC3 C# 导出到 Excel

> ID：12433608
> 
> 赞同：0
> 
> 时间：2012-09-15T00:41:49.263
> 
> 标签：.net, asp.net-mvc-3, excel-2007

我正在尝试将数据从数据库导出到 excel 2007 文件。

我只想将 html 文件的标题更改为 excel 2007 文件。

我将数据格式化为表格并将标题更改为：

```
Response.AddHeader("Content-Disposition", "attachment;filename= filename.xlsx");
Response.ContentType = "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"; 
```

我不断收到同样的错误：

> “Excel 无法打开文件‘filename.xlsx’，因为文件扩展名的文件格式无效。验证文件没有损坏，并且文件扩展名与文件格式匹配”

我还尝试了我在网上找到的这个示例，我可以在 excel 2003 中打开并显示警告消息，但在 2007 年我收到上述错误消息。它需要使它与excel2007一起工作

```
<html 
xmlns:o="urn:schemas-microsoft-com:office:office" 
xmlns:x="urn:schemas-microsoft-com:office:excel" 
xmlns="http://www.w3.org/TR/REC-html40">
<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Excel.Sheet>
<meta name=Generator content="Microsoft Excel 11">
<!--[if gte mso 9]><xml>
 <x:ExcelWorkbook>
  <x:ExcelWorksheets>
   <x:ExcelWorksheet>
    <x:Name>Sheet1</x:Name>
    <x:WorksheetOptions>
     <x:Selected/>
     <x:ProtectContents>False</x:ProtectContents>
     <x:ProtectObjects>False</x:ProtectObjects>
     <x:ProtectScenarios>False</x:ProtectScenarios>
    </x:WorksheetOptions>
   </x:ExcelWorksheet>
  </x:ExcelWorksheets>
  <x:ProtectStructure>False</x:ProtectStructure>
  <x:ProtectWindows>False</x:ProtectWindows>
</x:ExcelWorkbook>
</xml><![endif]-->
<style>
<!--table
    {mso-displayed-decimal-separator:"\.";
    mso-displayed-thousand-separator:" ";}
.xl2
    {
    mso-number-format:M/D/YY;
    border-left:.5pt solid;
    border-top:.5pt solid;
    border-right:.5pt solid;
    border-bottom:.5pt solid;
    }
.xl3
    {
    border-left:.5pt solid;
    border-top:.5pt solid;
    border-right:.5pt solid;
    border-bottom:.5pt solid;
    }
-->
</style>
</head>
<body>
<table>
<tr>
<td class=xl2>17.02.2010</td>
<td class=xl3>4</td>
<td class=xl3>0</td>
</tr>
<tr>
</tr>
</table>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:31:03.427

我使用这种形式：

```
using(System.IO.MemoryStream ms = /*Include Excel File*/) {
  ControllerContext.HttpContext.Response.Clear();
  ControllerContext.HttpContext.Response.AddHeader("cache-control", "private");
  ControllerContext.HttpContext.Response.AddHeader("Content-disposition", "attachment; filename=" + filename + ";");
  ControllerContext.HttpContext.Response.AddHeader("Content-type", "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet");
  ms.WriteTo(ControllerContext.HttpContext.Response.OutputStream);
}
return null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T01:14:45.570

只生成一个 .csv 怎么样？为什么需要一个成熟的原生 Excel 文件？另一个简单的选择是只生成 HTML 内容，然后将输出内容类型设置为 excel。Excel 将打开它并对其进行格式化，这是一个快速快捷方式，但它可以工作。

# r - 一个棘手函数的数值积分

> ID：12433609
> 
> 赞同：13
> 
> 时间：2012-09-15T00:41:54.990
> 
> 标签：r, integration

该`prob`包以数值方式评估基本 R 分布的特征函数。对于几乎所有的分布，都有现有的公式。但是，对于少数情况，没有已知的封闭形式的解决方案。恰当的例子：威布尔分布（但见下文）。

对于 Weibull 特征函数，我基本上计算两个积分并将它们放在一起：

```
fr <- function(x) cos(t * x) * dweibull(x, shape, scale)
fi <- function(x) sin(t * x) * dweibull(x, shape, scale)
Rp <- integrate(fr, lower = 0, upper = Inf)$value
Ip <- integrate(fi, lower = 0, upper = Inf)$value
Rp + (0+1i) * Ip 
```

是的，它很笨拙，但效果却出奇的好！……嗯*，*大多数时候。一位用户最近报告了以下中断：

```
cfweibull(56, shape = 0.5, scale = 1)

Error in integrate(fr, lower = 0, upper = Inf) : 
  the integral is probably divergent 
```

现在，我们知道积分不是发散的，所以它一定是一个数值问题。通过一些摆弄，我可以得到以下工作：

```
fr <- function(x) cos(56 * x) * dweibull(x, 0.5, 1)

integrate(fr, lower = 0.00001, upper = Inf, subdivisions=1e7)$value
[1] 0.08024055 
```

没关系，但它并不完全正确，而且它需要相当多的摆弄，这不能很好地扩展。我一直在研究这个以获得更好的解决方案。我发现了一个最近发布的特征函数的“封闭形式” `scale > 1`（[见这里](http://www.springerlink.com/content/11h4k713u0h251k7/)），但它涉及[赖特的广义合流超几何函数](http://en.wikipedia.org/wiki/Fox%E2%80%93Wright_function)，它还没有在 R 中实现。我查看了`integrate`替代品的档案，那里有很多东西似乎组织得不太好。

作为搜索的一部分，我想到通过反正切将积分区域转换为有限区间，*瞧*！看看这个：

```
cfweibull3 <- function (t, shape, scale = 1){
  if (shape <= 0 || scale <= 0) 
    stop("shape and scale must be positive")
  fr <- function(x) cos(t * tan(x)) * dweibull(tan(x), shape, scale)/(cos(x))^2
  fi <- function(x) sin(t * tan(x)) * dweibull(tan(x), shape, scale)/(cos(x))^2
  Rp <- integrate(fr, lower = 0, upper = pi/2, stop.on.error = FALSE)$value
  Ip <- integrate(fi, lower = 0, upper = pi/2, stop.on.error = FALSE)$value
  Rp + (0+1i) * Ip
}

> cfweibull3(56, shape=0.5, scale = 1)
[1] 0.08297194+0.07528834i 
```

## 问题：

1.  你能做得比这更好吗？
2.  是否有一些关于数值积分例程的东西，这些事情的专家可以对这里发生的事情有所了解？我有一个偷偷摸摸的怀疑，`t`余弦会迅速波动，这会导致问题......？
3.  是否存在更适合此类问题的现有 R 例程/程序包，有人可以指点我到一个合适的位置（在山上）开始攀登吗？

## 评论：

1.  `t`是的，用作函数参数是不好的做法。
2.  我计算了`shape > 1`使用 Maple 发布的结果的确切答案，以及被`brute-force-integrate-by-the-definition-with-R`踢的 Maple 的屁股。也就是说，我可以在几分之一秒内得到相同的答案（达到数值精度），而价格甚至更小。

## 编辑：

我打算写下我正在寻找的确切积分，但似乎这个特定站点不支持 MathJAX，所以我将提供链接。我正在寻找数值评估[Weibull 分布的](http://en.wikipedia.org/wiki/Weibull_distribution)[特征函数](http://en.wikipedia.org/wiki/Characteristic_function_%28probability_theory%29)以获得合理的输入（无论这意味着什么）。该值是一个复数，但我们可以将其拆分为实部和虚部，这就是我所说的及以上。`t``Rp``Ip`

最后一条评论：维基百科列出了 Weibull cf 的公式（无限级数），并且该公式与我在上面引用的论文中证明的公式相匹配，**但是**，该级数仅被证明适用于`shape > 1`. 该案`0 < shape < 1`仍然是一个悬而未决的问题；有关详细信息，请参阅论文。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-20T02:15:45.767

您可能有兴趣查看这篇论文，该论文讨论了高度振荡积分的不同积分方法——这就是您本质上要计算的内容： [http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1。 1.8.6944](http://citeseerx.ist.psu.edu/viewdoc/summary?doi=10.1.1.8.6944)

另外，另一个可能的建议是，您可能希望指定一个较小的限制，而不是无限限制，因为如果您指定所需的精度，那么根据 weibull 的 cdf，您可以轻松估计尾部的多少截短。如果你有一个固定的限制，那么你可以准确（或几乎）指定细分的数量（例如，为了每个周期有几个（4-8）个点）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-02-26T23:55:20.083

我和 Jay 有同样的问题——不是 Weibull 分布，而是*集成*函数。我在对此问题的评论中找到了对**Jay 问题 3的回答：**

[R中的发散积分在Wolfram中是可解的](https://stackoverflow.com/questions/25713582/divergent-integral-in-r-is-solvable-in-wolfram)

R 包*pracma*包含几个用于数值求解积分的函数。在包中，可以找到一些用于集成某些数学函数的 R 函数。还有一个更一般的函数*积分*。这对我有帮助。示例代码如下。

**问题 2：**链接问题的第一个答案（上面）指出，R 打印出的不是 C 源文件的完整错误消息（该函数可能收敛速度太慢）。因此，我同意 Jay 的看法，即余弦的快速波动可能是一个问题。就我而言，在下面的示例中，这就是问题所在。

**示例代码**

```
# load Practical Numerical Math Functions package
library(pracma)

# define function
testfun <- function(r) cos(r*10^6)*exp(-r)

# Integrate it numerically with the basic 'integrate'.
out1 = integarte(testfun, 0, 100)
# "Error in integrate(testfun, 0, 100) : the integral is probably divergent"

# Integrate it numerically with 'integral' from 'pracma' package
# using 'Gauss-Kronrod' method and 10^-8 as relative tolerance. I
# did not try the other ones.
out2 = integral(testfun, 0, 100, method = 'Kronrod', reltol = 1e-8) 
```

**两个备注**

1.  *积分*函数不会像积分函数那样中断，*但*它可能需要很长时间才能运行。我不知道（我也没有尝试过）用户是否可以限制迭代次数（？）。
2.  即使*积分*函数最终没有错误，我也不确定结果有多*正确*。*对一个在零附近快速*波动的函数进行数值积分似乎非常棘手，因为人们不知道在哪里计算了波动函数的确切值*（正值是负值的两倍；接近局部最大值的正值和远离局部最大值的负值）* . 我不是数字积分方面的专家，但我只是在我的数字讲座中了解了一些基本的固定步长积分方法。*因此，积分*中使用的自适应方法可能以某种方式解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-17T02:28:23.997

我正在尝试回答问题 1 和 3。话虽如此，我并没有提供任何原始代码。我做了一个谷歌搜索，希望这会有所帮助。祝你好运！

来源：http://cran.r-project.org/doc/contrib/Ricci-distributions-en.pdf (p.6)

```
#Script

library(ggplot2)

## sampling from a Weibull distribution with parameters shape=2.1 and scale=1.1
x.wei<-rweibull(n=200,shape=2.1,scale=1.1) 

#Weibull population with known paramters shape=2 e scale=1
x.teo<-rweibull(n=200,shape=2, scale=1) ## theorical quantiles from a

#Figure
qqplot(x.teo,x.wei,main="QQ-plot distr. Weibull") ## QQ-plot
abline(0,1) ## a 45-degree reference line is plotted 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-17T03:08:00.237

这有什么用吗？

[http://www.sciencedirect.com/science/article/pii/S0378383907000452](http://www.sciencedirect.com/science/article/pii/S0378383907000452)

Muraleedharana et al (2007) Modified Weibull distribution for maximum and significant wave height simulation and prediction, *Coastal Engineering*，第 54 卷，第 8 期，2007 年 8 月，第 630-638 页

摘自：“威布尔分布的特征函数推导出来。”

# android - 在包 android 中找不到属性“filterTouchesWhenObscured”的资源标识符

> ID：12433615
> 
> 赞同：0
> 
> 时间：2012-09-15T00:42:54.247
> 
> 标签：android, windows, build, command, android-sdk-tools

我正在使用 cmd 提示符构建一个 andorid 应用程序，但是当我调用 ant release 或 ant debug 时，我不断收到此 BuildFail

[https://www.dropbox.com/s/99dit8ctiq3bv4w/error.png](https://www.dropbox.com/s/99dit8ctiq3bv4w/error.png)

它说：

```
No resource identifier found for attribute 'filterTouchesWhenObscured' in package android 
```

其次是：

```
D:\Program Files\Android\android-sdk\tools\ant\build.xml: null returned: 1 
```

有谁知道为什么会发生这种情况？我在想也许我没有正确运行我的 android update lib-project 命令。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-22T11:21:34.053

filterTouchesWhenObscured is available since API level 9\. The error indicates that you are using some prior API.

# javascript - YUI2 DataTable 可以使用 YUI3 DataSource 吗？

> ID：12433616
> 
> 赞同：1
> 
> 时间：2012-09-15T00:43:19.280
> 
> 标签：javascript, yui

我目前正在学习使用 YUI2 DataTable。（当它支持内联单元格编辑时，我将学习YUI3 DataTable）。

我的问题很简单——我可以将它与 YUI3 DataSource 一起使用还是必须使用 YUI2 DataSource？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T13:38:17.720

当你创建一个 DataTable 实例时，你必须提供一个 YUI2 数据源，如果只是为了让它开心。它可能是一个指向空数组的本地数据源，但 YUI2 数据源必须在那里。稍后，您可以使用任何您想要实际获取数据的方法，一旦获得数据，就调用[YUI2](http://developer.yahoo.com/yui/docs/YAHOO.widget.DataTable.html#method_onDataReturnInitializeTable)所做的 onDataReturnInitializeTable。你不能在构造函数中提供 YUI3 DataSource，它们有不同的接口，DataTable 不知道如何处理它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T12:12:51.207

Gallery中有一个模块，它包装了一个带有兼容层的YUI3数据源，可与YUI2模块一起使用，特别是DataTable。更多信息在这里：

[http://yuilibrary.com/gallery/show/datasource-wrapper](http://yuilibrary.com/gallery/show/datasource-wrapper)

我在可以在这里查看的代码中使用了它：

[https://github.com/brianjmiller/interchange_mvc/blob/master/share/ic/js/renderer/v2_data_table.js](https://github.com/brianjmiller/interchange_mvc/blob/master/share/ic/js/renderer/v2_data_table.js)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-30T03:51:40.493

YUI 3 已经开始实现内联单元格编辑：[http](http://blunderalong.com/yui/dta/editing/dt_cellediting.html) ://blunderalong.com/yui/dta/editing/dt_cellediting.html 几周后将被放入 YUI-3 库中：

[http://yuilibrary.com/gallery/show/datatable-celleditor-inline](http://yuilibrary.com/gallery/show/datatable-celleditor-inline)

基本上，坚持~2周就可以了！从 2.4 版开始，我也一直在使用 YUI 2 数据表，但还没有迁移到 YUI 3！

# c++ - 使用 cublas saxpy 时出错

> ID：12433620
> 
> 赞同：1
> 
> 时间：2012-09-15T00:43:48.847
> 
> 标签：c++, cuda, cublas

我正在尝试使用`cublasSaxpy`cublas 的功能。

看代码：

```
#include <cublas_v2.h>

float *dev_B;
float *dev_tmp;

cublasStatus_t stat ;
cublasHandle_t handle ;
...
...
stat = cublasCreate(&handle);
if(stat != CUBLAS_STATUS_SUCCESS)
{
    cout << "CUBLAS Initialization failed!" << endl;
    exit(EXIT_FAILURE);
}
...
...
stat = cublasSetVector(N, sizeof(float), vB, N, dev_B, N);
if(stat != CUBLAS_STATUS_SUCCESS)
{
    cout << "CUBLAS setting vector failed" << endl;
    exit(EXIT_FAILURE);
}

stat = cublasSetVector(N, sizeof(float), nullvec, N, dev_tmp, N);
if(stat != CUBLAS_STATUS_SUCCESS)
{
    cout << "CUBLAS setting vector failed" << endl;
    exit(EXIT_FAILURE);
}
...
...
stat = cublasSaxpy(handle, N, 1.0f, dev_B, 1, dev_tmp, 1); 
```

所以，我正在使用来自 CUDA 5.0 RC1 的 eclipse nsight。我没有构建项目，因为我没有完成它，但是 IDE 在 saxpy 操作中给了我一个读取下划线：

```
Invalid arguments '
Candidates are:
enum {cublas_api.h:3039} cublasSaxpy_v2(cublasContext *, int, const float *, const float *, int, float *, int) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T05:28:20.563

在 CUBLAS V2 API 中，所有标量实参都通过引用而不是值传递。正确的要求`saxpy`是这样的：

```
const float alpha = 1.0f;
stat = cublasSaxpy(handle, N, &alpha, dev_B, 1, dev_tmp, 1); 
```

这在文档中有明确的讨论。

# javascript - 动态加载脚本文件时出现错误“对象函数‘模态’没有方法”

> ID：12433622
> 
> 赞同：1
> 
> 时间：2012-09-15T00:45:05.640
> 
> 标签：javascript, jquery, simplemodal

从正文中的脚本，我将 jquery 和 SimpleModal 动态加载到页面标题中。我使用回调来确保在调用 jQuery 之前完全加载它——这很有效。但是，当我动态加载 SimpleModal 脚本文件时，我无法随后调用它的方法。当 SimpleModal 脚本延迟加载时，它会出现无法引用当前文档对象。任何帮助将不胜感激。

```
/******** Called once jQuery has loaded ******/
function scriptLoadHandler() {
    jQuery = window.jQuery.noConflict(true);

    main();
}

/******** Main function ********/
function main() {
    jQuery(document).ready(function ($) {
        var domain = 'http://qo.microssoftware.com';

        /******* Load SimpleModal *******/
        var script_tag = document.createElement('script');
        script_tag.setAttribute("type", "text/javascript");
        script_tag.setAttribute("src",
        domain + "/js/simplemodal.js");
        script_tag.onload = modalLoadHandler;
        (document.getElementsByTagName("head")[0] || document.documentElement).appendChild(script_tag);

    });
}

function modalLoadHandler() {
    /******* Open Modal *******/
    $.modal("<div><h1>SimpleModal</h1></div>", {});
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T00:50:28.837

尝试：

```
<script type="text/javascript" src="http://qo.microssoftware.com/js/simplemodal.js"></script>
<script type="text/javascript">
jQuery(document).ready(function ($) {
    $.modal("<div><h1>SimpleModal</h1></div>");
});
</script> 
```

或者，如果您想使用 main() 函数调用模态：

```
<script type="text/javascript" src="http://qo.microssoftware.com/js/simplemodal.js"></script>
<script type="text/javascript">
jQuery(document).ready(function ($) {
    function main() {
        $.modal("<div><h1>SimpleModal</h1></div>");
    }
});
</script> 
```

您不需要将 js 放在标题中...实际上有些程序员总是将所有 JS 放在结束 BODY-tag 之前。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T01:09:06.760

这是您希望基于`onload`脚本事件创建异步闭包的地方。

如果你必须支持古老的 IE，你也可以挂钩到`onreadystatechange`事件中，就像在 AJAX 请求中一样（在纯 JS 中）。更现代的浏览器不会触发此事件。

因此，将 onload 转换为回调，该回调会触发文件中的已知方法。您还可以通过附加到`onerror`脚本的加载来解决错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T00:50:13.850

首先，我建议这是不必要的。simplemodal 脚本非常紧凑。更多地考虑如何在一般情况下优化脚本加载（gzip，或者如果您必须使用 ajax，使用 RequireJS 等的 AMD 依赖加载），而不会出现这种 ajax 方法不必要的复杂性。

使用此类方法的脚本加载器（如 Facebook SDK 或 Google Maps）将在脚本初始化后搜索窗口（全局）元素以查找要调用的回调。基本上，您必须修改 simplemodal 代码，然后将您的依赖代码包装在回调中。在这种情况下，我几乎看不出这有什么必要。

# ruby-on-rails - Rspec：当它也与 validate 一起使用时如何编写条件验证

> ID：12433625
> 
> 赞同：2
> 
> 时间：2012-09-15T00:46:04.803
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rspec2, rspec-rails

My Location 模型可以有一个网站。仅当该位置在线时，该网站才必须存在。在保存之前，网站必须具有正确的格式。

**位置.rb**

```
class Location < ActiveRecord::Base
  attr_accessible :online :website
  validates_presence_of :website, :if => 'online.present?'
  validates_inclusion_of :online, :in => [true, false]
  validate :website_has_correct_format, :if => 'website.present?'

  private

  def website_has_correct_format
    unless self.website.blank?
      unless self.website.downcase.start_with?('https://', 'http://')
        errors.add(:website, 'The website must be in its full format.)
      end
    end
  end
end 
```

我制定了一个规范来测试这个：

**location_spec.rb**

```
require 'spec_helper'

describe Location do

  before(:each) do
    @location = FactoryGirl.build(:location)
  end

  subject { @location }

  describe 'when website is not present but store is online' do
    before { @location.website = '' && @location.online = true }
    it { should_not be_valid }
  end
end 
```

测试失败，给我带来错误：

```
Failures:

  1) Location when website is not present but store is online
     Failure/Error: it { should_not be_valid }
     NoMethodError:
       undefined method `downcase' for true:TrueClass
     #./app/models/location.rb:82:in `website_has_correct_format'
     #./spec/models/location_spec.rb:72:in `block (3 levels) in <top (required)>' 
```

这个问题的解决方案是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T00:56:40.743

您的规范文件写得有点错误。没有按照您期望的`&&`方式工作。

```
require 'spec_helper'

describe Location do

  before(:each) do
    @location = FactoryGirl.build(:location)
  end

  subject { @location }

  describe 'when website is not present but store is online' do
    before do
      @location.website = ''
      @location.online = true
    end

    it { should_not be_valid }
  end
end 
```

# javascript - 如何在不修改原始代码的情况下，用jQuery调用放在另一个函数中的函数？

> ID：12433634
> 
> 赞同：2
> 
> 时间：2012-09-15T00:48:25.560
> 
> 标签：javascript, jquery

这基本上是我的代码的框架：

```
var firstfunction = function () {
    function innerfunction () {
        // Do stuff here
    }
} 
```

如何在`innerfunction()`不更改上文提到的代码的情况下引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T00:54:03.933

如果您想将 innerFunction 公开为 API，您可以执行以下操作：

```
var firstFunction = function () {
  var imPrivate = "foo"
  var innerFunction = function () {
    // do stuff
  }

  return {
    innerFunction : innerFunction
  }
}

firstFunction.innerFunction() 
```

这也可以让您创建私有方法和变量。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T00:53:21.867

似乎您想使用currying，这是一种函数式编程技术，您可以从另一个函数返回一个函数，即：

```
var f1 = function() {
    return function() {
    }
}

> f1()(); 
```

# vb.net - VB.NET 如何更改使用 LINQ 选择的行？

> ID：12433635
> 
> 赞同：0
> 
> 时间：2012-09-15T00:48:27.137
> 
> 标签：vb.net, linq, datatable

我有以下代码，它根据某些条件使用 LINQ 选择一些行。

```
 Dim cname
    Dim Category
    Dim cprice

    Try
        For i = 0 To mainDatatable.Rows.Count - 1
            cname = mainDatatable.Rows(i)("cname")
            Category = mainDatatable.Rows(i)("ccategory")
            cprice = mainDatatable.Rows(i)("cprice")
            Dim nameparts() As String = cname.Split(New String() {" "}, StringSplitOptions.None)
            Dim query = From products In mainDatatable.AsEnumerable()
                        Where products.Field(Of Integer)("ccategory") = Category And products.Field(Of Double)("cprice") = cprice And products.Field(Of String)("cname").Contains(nameparts(0)) And products.Field(Of String)("cname").Contains(nameparts(1))
                        Select products
            If query.Count > 1 Then
                'then i want to do some changes to those rows
            End If
        Next
    Catch ex As Exception
        MsgBox(ex.Message)
    End Try 
```

代码运行良好，但我需要对选定的行进行更改。我不知道该怎么做，例如我有一个名为 gprice 的列，我希望它为所有选定的行将其设置为某个值并将更改保存到`mainDatatable`，希望您能提供帮助。

为了清楚起见，假设 中的行数`query` 为 6，那么我想让`query`= 1 中的某些列的所有值，然后更新中选定行的值`mainDatatable`

- - - 更新

如果你没有得到它忘记上面的代码，这就是我想要做的

-我有一个数据表，它只有两列产品名称和产品价格，现在有同名但颜色不同的产品

-我想通过解析字符串名称对这些产品进行分组，并检查名称中具有相同单词的其他产品，只允许一个单词不同，即颜色，

-该组中的产品之间的价格也必须相同，这就是上面的 LINQ 代码所做的并且它完美地完成了

-我的问题是我添加了名为 groupnumber 的第三列，我想为第 1 组中的每个产品添加 1，为第 2 组中的每个产品添加 2，依此类推。

# c# - 如何让 RenderTargetBitmap 和 VisualBrush 一起玩得很好？

> ID：12433638
> 
> 赞同：0
> 
> 时间：2012-09-15T00:48:58.353
> 
> 标签：c#, .net, wpf, visualbrush, rendertargetbitmap

我的要求：

*   处理自定义图像逻辑的持久性`UserControl`，例如地图或绘图
*   一组容器，用于在缩放或平移移动期间对图像进行缓存
*   `VisualBrush``UserControl`我可以添加到容器中以与效果一起使用的副本

我目前使用 RenderTargetBitmap 实现图像缓存，但这似乎与我正在使用的`VisualBrush`-covered对象有问题。`Rectangle`

**我的问题**：我可以在此代码中添加/更改什么以使`VisualBrush`对象在使用后正确呈现`RenderTargetBitmap`？是什么奇怪的事情`RenderTargetBitmap`使人`VisualBrush`看不见？

如果没有大量代码，我无法重现这个问题。

在我的 xaml 文件中，我有：

```
<Window x:Class="ElementRender.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Height="350" Width="525">
  <Grid>
    <Grid Name="_contentContainer">
      <Rectangle Fill="White"/>
      <Grid Name="_content">
        <Grid Name="_back"/>
        <Grid Name="_body"/>
      </Grid>
    </Grid>
    <StackPanel VerticalAlignment="Bottom" Orientation="Horizontal">
      <Button Content="New" Name="New"/>
      <Button Content="Move" Name="Move"/>
      <Button Content="Update" Name="Update"/>
    </StackPanel>
  </Grid>
</Window> 
```

和 .xaml.cs：

```
using System.Windows;
using System.Windows.Controls;
using System.Windows.Media;
using System.Windows.Media.Imaging;
using System.Windows.Shapes;

public partial class MainWindow : Window
{

  private const int imageWidth = 150;
  private const int imageHeight = 150;
  private readonly UserControl Control;

  public MainWindow()
  {
     InitializeComponent();

     // User Control setup
     Control = new UserControl() {
        Width = imageWidth, Height = imageHeight,
        Content = BuildImage()
     };
     _body.Children.Add(SoftCopy(Control));

     // event setup
     Move.Click += (sender, e) => _content.RenderTransform = new TranslateTransform(50, 50);
     New.Click += (sender, e) => {
        HardCopy();
        _content.RenderTransform = null;
        Control.Content = BuildImage();
     };
  }

  private FrameworkElement BuildImage()
  {
     return new Rectangle{Fill=Brushes.Blue};
  }
  private void HardCopy()
  {
     int width = (int) _contentContainer.ActualWidth;
     int height = (int) _contentContainer.ActualHeight;

     // render the current image
     var rtb = new RenderTargetBitmap(width, height, 96, 96, PixelFormats.Pbgra32);
     DrawingVisual dv = new DrawingVisual();
     using (var context = dv.RenderOpen())
     {
        var brush = new VisualBrush(_contentContainer) { Opacity = .5 };
        context.DrawRectangle(brush, null, new Rect(0, 0, width, height));
     }
     rtb.Render(dv);
     var lastRender = new Image
     {
        Source = rtb,
        Stretch = Stretch.None,
        HorizontalAlignment = HorizontalAlignment.Center,
        VerticalAlignment = VerticalAlignment.Center,
        Width = width,
        Height = height
     };
     _back.Children.Clear();
     _back.Children.Add(lastRender);
  }
  private FrameworkElement SoftCopy(FrameworkElement element)
  {
     return new Rectangle{Fill= new VisualBrush(element), Width=element.Width, Height=element.Height};
  }
} 
```

关于代码的一些帮助说明：

*   xaml`_contentContainer`用于`HardCopy()`将当前图像复制到图像缓存中，`_back`.
*   `SoftCopy`返回一个与过去一模一样的 FrameworkElement，但没有任何变换、效果或视觉父级。这个非常重要。
*   `BuildImage`模拟在初始图像以某种方式转换后构建要粘贴到缓存上的新图像。

如果您构建并运行`SoftCopy()`从 中删除 的应用程序`_body.Children.Add(SoftCopy(Control));`，您会看到我想要获得的效果：新元素粘贴在旧元素上方，而旧元素似乎保留了它的变换。

`var rtb = new RenderTargetBitmap(width, height, 96, 96, PixelFormats.Pbgra32);`或者，如果您从中删除该行`HardCopy`，缓存功能将被破坏，但 SoftCopy 会正确显示。

但是，如果您按原样运行应用程序，您会注意到新的 BlueRectangle（通过 VisualBrush 呈现）根本不会显示，直到您再次点击“新建”按钮，将图像推送到缓存，并且仍然没有向您显示新创建的图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-01T17:16:22.363

我会很自负地称其为 WPF 中的错误。我最终发现了如何解决我遇到的奇怪行为：

```
var visual = visualBrush.Visual;
visualBrush.Visual = null;
visualBrush.Visual = visual; 
```

这本质上应该是一个空操作：到最后，视觉画笔具有与开始时相同的视觉效果。`VisualBrush`但是，在渲染后添加此代码段`RenderTargetBitmap`修复了我遇到的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T17:02:30.510

我不太明白这篇文章，但有几件重要的事情：

如果您将 RenderTransform/Margins 应用于元素并对其进行拍照（RenderTargetBItmap），那么您将度过一段糟糕的时光。它会被抵消，你只会得到子图片。

这个想法是在没有任何渲染转换的情况下拍照，然后从旧的复制 RenderTransform。如果需要的话。

# google-api - 如何将服务帐户与 gsutil 一起使用，以上传到 CS + BigQuery

> ID：12433639
> 
> 赞同：16
> 
> 时间：2012-09-15T00:49:01.103
> 
> 标签：google-api, google-bigquery, google-cloud-storage

如何使用我在 Google API 控制台中创建的服务帐户使用 gsutil 将数据上传到 Google BigQuery？

首先，我尝试使用[gsutil](https://code.google.com/p/gsutil/)将数据上传到 Cloud Storage ，因为这似乎是推荐的模型。在 gmail 用户批准的情况下一切正常，但它不允许我使用服务帐户。

看来我可以使用 Python API 使用[已签名的 JWT 凭据](https://developers.google.com/accounts/docs/OAuth2ServiceAccount)获取访问令牌，但我更喜欢使用支持可恢复上传等的命令行工具，例如 gsutil。

编辑：我想在 cron 中使用 gsutil 每晚将文件上传到 Cloud Storage，然后将它们导入 BigQuery。

任何帮助或指示将不胜感激。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-26T20:38:41.370

Google Cloud Storage 刚刚发布了一个新版本 (3.26) 的 gsutil，它支持服务帐户（以及许多其他功能和错误修复）。如果您已经安装了 gsutil，您可以通过运行以下命令获取此版本：

`gsutil update`

简而言之，您可以通过运行以下命令配置服务帐户：

`gsutil config -e`

`gsutil help config`有关使用 config 命令的更多详细信息，请参阅。
有关`gsutil help creds`支持的不同类型凭据（和不同用例）的信息，请参阅`gsutil`。

Mike Schwartz，谷歌云存储团队

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2019-05-02T15:30:43.493

要扩展@Mike 答案，您需要

1.  下载服务帐户密钥文件，并将其放入 eg`/etc/backup-account.json`
2.  `gcloud auth activate-service-account --key-file /etc/backup-account.json`

现在所有呼叫都使用所述服务帐户。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-15T04:25:29.857

首先，您应该使用`bq`命令行工具从命令行与 BigQuery 进行交互。[（在此处](http://code.google.com/p/google-bigquery-tools/downloads/list)阅读并[在此处](https://developers.google.com/bigquery/docs/hello_bigquery)下载）。

我同意 Marc 的观点，将您的个人凭据与`gsutil`和一起使用是个好主意`bq`，`bq`命令行工具支持使用服务帐户。使用服务帐户身份验证的命令可能如下所示。

```
bq --service_account 1234567890@developer.gserviceaccount.com --service_account_credential_store keep_me_safe --service_account_private_key_file myfile.key query 'select count(*) from publicdata:samples.shakespeare' 
```

键入`bq --help`以获取更多信息。

通过 Python 或 Java 在代码中使用服务帐户也很容易。[这是一个使用BigQuery 授权指南](https://developers.google.com/bigquery/docs/authorization#service-accounts-server)中的一些代码的快速示例。

```
import httplib2

from apiclient.discovery import build
from oauth2client.client import SignedJwtAssertionCredentials

# REPLACE WITH YOUR Project ID
PROJECT_NUMBER = 'XXXXXXXXXXX'
# REPLACE WITH THE SERVICE ACCOUNT EMAIL FROM GOOGLE DEV CONSOLE
SERVICE_ACCOUNT_EMAIL = 'XXXXX@developer.gserviceaccount.com'

f = file('key.p12', 'rb')
key = f.read()
f.close()

credentials = SignedJwtAssertionCredentials(
    SERVICE_ACCOUNT_EMAIL,
    key,
    scope='https://www.googleapis.com/auth/bigquery')

http = httplib2.Http()
http = credentials.authorize(http)

service = build('bigquery', 'v2')
datasets = service.datasets()
response = datasets.list(projectId=PROJECT_NUMBER).execute(http)

print('Dataset list:\n')
for dataset in response['datasets']:
  print("%s\n" % dataset['id']) 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-09-15T02:58:45.403

服务帐户通常用于识别应用程序，但在使用 gsutil 时，您是交互式用户，使用您的个人帐户更自然。您始终可以将您的 Google Cloud Storage 资源与您的个人帐户和/或服务帐户相关联（通过访问控制列表或开发人员控制台的“团队”选项卡），因此我的建议是使用您的个人帐户和 gsutil，然后使用服务帐户为您的应用程序。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-09-17T02:04:20.990

*根据乔纳森的要求，作为答案而不是评论发布*

是的，如果用户不再存在，则由单个用户做出的 OAuth 授权将不再有效。因此，如果您将基于用户的流程与您的个人帐户一起使用，那么如果您离开公司，您的自动化流程将会失败。

我们应该使用 gsutil 支持服务帐户，但现在还不支持。

您可以执行以下操作之一：

1.  可能使用服务帐户的现有 python oauth 客户端实现快速将该功能添加到 gsutil/oauth2_plugin/oauth2_helper.py
2.  通过服务帐户流从外部检索访问令牌并将其存储在 ~/.boto 中指定的缓存位置（有点hacky）
3.  自己创建一个角色帐户（通过 gmail.com 或 google 应用程序）并向该帐户授予权限并将其用于 OAuth 流程。

我们已提交功能请求以支持 gsutil 的服务帐户，并从团队获得了一些初步的积极反馈。（虽然不能给出预计到达时间）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-16T11:28:59.807

到今天为止，您无需运行任何命令来设置要与`gsutil`. 您所要做的就是`~/.boto`使用以下内容进行创建：

```
[Credentials]
gs_service_key_file=/path/to/your/service-account.json 
```

# javascript - 组织 javascript 应用程序的最佳方式

> ID：12433641
> 
> 赞同：2
> 
> 时间：2012-09-15T00:49:09.303
> 
> 标签：javascript

我一直在尝试一些不同的方法来组织我的 javascript 应用程序中的代码，我想知道哪种方法最合适。

第一个例子：

```
var Application = {

    init: function() {
        //Some code
        Calculate();
    },

    Calculate: function() {
        //Some code
    }
}; 
```

第二个例子：

```
(function() {

    function init() {
        //Some code
        Calculate();
    }

    function Calculate() {
        //Some code
    }

})(); 
```

第三个例子：

```
(function() {

    var init = function() {
        //Some code
        Calculate();
    };

    var Calculate = function() {
        //Some code
    };

})(); 
```

或者它是首选的其他方式？我对此感到非常困惑。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T01:04:20.233

毫无疑问，答案是“视情况而定”。你的应用程序有多大？您是否一直需要所有模块？您的应用程序需要多大的可扩展性和可重用性？这些不是专门的 JavaScript 问题，而是“架构”问题，虽然学习 JavaScript 基础相对容易，但要成为一名优秀的软件开发架构师需要很多年的时间。（虽然你问这些问题很好。）

我会鼓励你深入研究编程模式。*学习模式是根据给定*的应用程序学习以正确的方式构建应用程序。

 *我可以说你的第一个例子和你的第二个例子的组合是一个很好的起点（一个立即调用的函数表达式包装并返回一个对象文字）。这通过闭包提供了一定程度的私有范围，称为模块模式。您将看到这种模式在几乎所有主要的 JS 应用程序和库中都在某种程度上使用，因为它的多功能性和优雅性。

要了解有关 JavaScript 模式的更多信息，我强烈推荐 Addy Osmani 的“学习 JavaScript 设计模式”。你可以在这里免费阅读：http: [//addyosmani.com/resources/essentialjsdesignpatterns/book/](http://addyosmani.com/resources/essentialjsdesignpatterns/book/)*

# jquery - 等待多个延迟函数调用完成的问题

> ID：12433642
> 
> 赞同：1
> 
> 时间：2012-09-15T00:49:10.630
> 
> 标签：jquery, node.js, facebook-graph-api

我正在尝试使用[node-facebook-sdk](https://github.com/Thuzi/facebook-node-sdk)使用 Node.JS 进行 FB 图形 API 调用

我想从所有用户朋友那里获取提要数据。FB 图形 API 每个批处理请求只允许 50 个朋友，所以我正在进行一系列批处理 FB.api() 调用。

我试图将 FB.api() 调用存储在一个数组中，然后使用 jQuery when() 调用延迟函数。

# 问题：

1）我传递给 .done() 函数的函数过早执行。2）console.log（feed）在.done（）之后执行，据我所知，这不应该发生。

```
$ = require('jQuery');

//maximum batch size request is 50\. use 2-D array to store in buckets of 50 friends each.
                var numFriends = friends.data.length;
                var batch = [];
                var deferred = [];//array to hold all the requests
                var feed_dump = [];//where we collect all the feed data

            //initialize a bucket for each set of 50 friends
            for (var i = 0, ii = numFriends / 50; i < ii; i++) {batch.push([]);}

            //put corresponding requests in in buckets.
            for (var i = 0; i < numFriends; i++) {
                batch[Math.floor(i/50)].push({ method: 'get', relative_url: friends.data[i].id + '/feed?since=' + '-1 month'});//not sure if the date format will work user.last_updated
            }

            //make the multiquery request for each bucket
            for (var i in batch) {
                var bucket = batch[i];
                //nested FB api call

                deferred.push(FB.api('', 'post', {'batch' : bucket}, function(res){//res = array 50 friend feeds
                        if (!res || res.error) {
                            console.log(!res ? 'error occurred' : res.error); return;
                        }
                        for (var j in res) {
                            var feed = JSON.parse(res[j].body);
                            console.log(feed);
                            feed_dump.push(feed);//feed for each friend appeneded to dump
                        }
                }));
            }

            console.log('this should show up before graph api requests are made.');

            //jQuery when() function.
            $.when.apply(null, deferred).done(function() {
                console.log('hopefully feed_dump has been updated...');
                PySocket.emit('update_user_graph',JSON.stringify(feed_dump));
            }); 
```

如何正确推迟批处理 FB.api() 请求？另外，如果有人能想到更好的方法，请告诉我；我对异步 javascript 没有那么丰富的经验。

我想我的问题的一个更简单的形式是：我怎样才能等待多个回调函数完成？

谢谢一堆。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T04:42:36.627

**编辑：**封装回调计数递减：http: [//jsfiddle.net/3L9zc/32/](http://jsfiddle.net/3L9zc/32/)

```
function BatchAPICalls(){
    var calls = [];
    var self = this;

    self.push = function(){
        var args = [];

        for(var i = 1; i < arguments.length - 1; i++)
            args.push(arguments[i]);

        calls.push({
            fn: arguments[0],
            callback: arguments[arguments.length - 1],
            args: args
        });        
    };

    self.start = function(callback){
        var callbacksLeft = calls.length;

        function batchCallback(){
            callbacksLeft--;
            if(callbacksLeft == 0)
                callback();
        }

        for(var i = 0; i < calls.length; i++){

            var call = calls[i];

            var batchItemCallback = function(){
                call.callback.apply(this, arguments);
                batchCallback();
            };

            call.fn.apply(this, call.args.concat([batchItemCallback]));            
        }
    };
}

var numFriends = friends.data.length;
var batch = [];
var feed_dump = [];

for (var i = 0, ii = numFriends / 50; i < ii; i++) {
    batch.push([]);
}

for (var i = 0; i < numFriends; i++) {
    batch[Math.floor(i/50)].push({ 
        method: 'get', 
        relative_url: friends.data[i].id + '/feed?since=' + '-1 month'
    });
}

function done() {
    console.log('hopefully feed_dump has been updated...');
    PySocket.emit('update_user_graph',JSON.stringify(feed_dump));
}    

var batchCalls = new BatchAPICalls();

for (var i in batch) {
    var bucket = batch[i];

    batchCalls.push(FB.api, 'call #' + i, 'post', {'batch' : bucket}, function(res){

        if (!res || res.error) {
            console.log(!res ? 'error occurred' : res.error); return;
        }
        for (var j in res) {
            var feed = JSON.parse(res[j].body);
            console.log(feed);
            feed_dump.push(feed);//feed for each friend appeneded to dump
        }
    });
}

console.log('this should show up before graph api requests are made.');

batchCalls.start(done); 
```

# jquery - 如何在 jQuery 中使用 css font-weight 属性为文本设置动画？正常到粗体

> ID：12433645
> 
> 赞同：8
> 
> 时间：2012-09-15T00:49:36.343
> 
> 标签：jquery, css, animation, fonts, jquery-animate

我正在尝试像不透明效果一样制作动画，这会使文本慢慢变粗。尝试了通常的`animate()`方法，但没有奏效。搜索它，但找不到任何示例。**是否有可能做到这一点？**

[**js小提琴。**](http://jsfiddle.net/2EECN/28/)

**jQuery：**

```
var Text = $('h1');
Text.click(function() {
    Text.animate({'font-weight':'bold'},600)
        .delay(200).animate({'font-weight':'normal'},600);
}); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-06-09T20:49:13.427

> **编辑，2021 年 4 月：**现在可以使用[可变字体](https://v-fonts.com/)`transition: font-weight`或更无缝地实现这一点。

# 可悲的是，我认为这是**不可能的。**

字体中的每个字符都有特定的形状。此外，不同权重中的相似字符也是不同的——粗体字符不仅仅具有与其常规对应物的数学定义的偏移量。

使用 jQuery.css()可以很容易地从常规跳转到**粗体**或*斜体*，但是目前无法在浏览器中使用 jQuery.animate() 转换字体粗细。在动画中也很难做到，因为不同权重之间没有“帧”，因为它们都是单独绘制的。

# 然而，

如果您为不同的粗细选择具有一致字母间距的字体（例如[Exo](http://www.google.com/fonts/specimen/Exo)）并制作从细到黑的阶梯动画，您可能会接近所需的结果。

从你的 jsFiddle 开始，这就是我能想到的：

[**这是工作的jsFiddle。**](http://jsfiddle.net/2EECN/133/)

以及它背后相当愚蠢的Javascript：

```
Text.click(function() {

  Text.css({'font-weight':200});
  setTimeout(function(){ Text.css({'font-weight':300})}, 30)
  setTimeout(function(){ Text.css({'font-weight':400})}, 60)
  setTimeout(function(){ Text.css({'font-weight':500})}, 90)
  setTimeout(function(){ Text.css({'font-weight':600})},120)
  setTimeout(function(){ Text.css({'font-weight':700})},150)
  setTimeout(function(){ Text.css({'font-weight':800})},180)
  setTimeout(function(){ Text.css({'font-weight':900})},210)

}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-07-08T08:23:51.090

您可以使用纯 CSS，使用`text-shadow`和伪类`:hover`，并使用 a`transition`对其进行动画处理

```
.animate {
  font-size: 35px;
  transition: 0.6s;
}
.animate:hover {
  text-shadow: 0 0 2px black;
  transition: 0.6s;
}
```

```
<div class="animate">StackOverflow</div>
```

* * *

你也可以使用 jQuery，通过使用`addClass()`：

```
$("#animateBold").click(function() {
  $(".animate").addClass("bold");
});
```

```
.animate {
  font-size: 30px;
}
/* Then .bold CSS class */
.bold {
  text-shadow: 0 0 2px black;
  transition: 0.6s;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="animate">StackOverflow<div>
<button id="animateBold">Animate!</button>
```

* * *

或者，如果您想要切换效果，请使用[`ternary`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Operators/Conditional_Operator)运算符：

```
($(".animate").hasClass("bold")) ? $(".animate").removeClass("bold") : $(".animate").addClass("bold"); 
```

```
$("#toggleBold").click(function() {
  ($(".animate").hasClass("bold")) ? $(".animate").removeClass("bold") : $(".animate").addClass("bold");
});
```

```
.animate {
  font-size: 30px;
  transition: 0.6s;
}
.bold {
  text-shadow: 0 0 2px black, 0 0 2px black;
  transition: 0.6s;
}
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<div class="animate">StackOverflow<div>
<button id="toggleBold">Animate!</button>
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-15T03:05:39.233

从技术上讲，font-weight 可以是一个数字，比如 100 或 800，但实际上浏览器只能实现 normal 或粗体。Animate 采用数字或“隐藏”、“显示”或“切换”之一。所以你的“大胆”是行不通的。从理论上讲，您可以将字体粗细设置为一个数字，然后传入一个数字以进行动画处理。（400 是“正常”重量，700 是粗体 [1]）唉，这似乎在 jQuery 中不起作用。

但！你可以用 CSS3 做到这一点，虽然它不会在 Internet Explorer 上工作，但你想要的效果将达到 50% 以上的人口。请参阅此示例。

[http://www.quackit.com/css/css3/properties/css_transition-property.cfm](http://www.quackit.com/css/css3/properties/css_transition-property.cfm)

# javascript - 如何减少 AJAX 繁重的 Web 应用程序中的 HTTP 请求数量？

> ID：12433646
> 
> 赞同：0
> 
> 时间：2012-09-15T00:49:44.317
> 
> 标签：javascript, api, rest

我正在构建一个 MVC javascript 应用程序，该应用程序在前端具有大部分逻辑，仅将后端留给 API，在前端具有模态。

但是，我认为存在一些设计和性能问题。考虑以下带有 RESTful 后端的情况：

1.  第一个 HTML 页面的用户问题`GET /`，包括 Javascript 应用程序。
2.  该页面加载了 Javascript 应用程序，发出`GET /api/articles?limit=30`以 JSON 格式提取前 30 篇文章，这些文章将由 Javascript 应用程序呈现给浏览器。
3.  对于每篇文章，都有评论。所以每篇文章都会单独发出一个ajax请求 `GET /api/article/<article_id>/comments`来获取相关的评论也被渲染。

这样一来，单页访问的请求就已经超过了30个，这会导致大量的HTTP开销，而且看起来并不正确。

有人可以推荐正确的方法吗？我设计错了吗？RESTful 后端在这种情况下有用吗？对于 JavaScript 繁重的前端和后端 API 之间的通信架构，还有哪些其他建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:08:53.593

不确定您正在为后端使用什么框架，但后端会查询您的所有文章，并且还包括（例如）每篇文章的最新 3 条评论。

/api/articles?limit=30 返回的 JSON 可能如下所示：

```
[
    {
        title: "Article Title",
        comments : [
            {
               comment: "Hi",
               author: "Me"
            }
        ]
    }
] 
```

# java - 使用java在环形平面上包含/排除

> ID：12433647
> 
> 赞同：0
> 
> 时间：2012-09-15T00:49:45.437
> 
> 标签：java, loops, for-loop

我写了一个程序来解决以下问题：

> 在随机创建种子且粒子随机移动的环形平面上实施扩散受限聚合模拟。如果它们的粒子没有降落在种子或粒子附近，它们就会移动。用户输入种子（红色像素）、粒子（黑色像素）、步骤（无或迭代）、平面大小。

我的代码很慢。我怎样才能让它更快？

我随机创建 x 和 y 坐标并绘制红色像素（种子），然后为黑色像素（粒子）随机创建 x 和 y，如果黑色像素落在可以停留的红色或黑色像素的位置，否则它会再次随机移动直到没有更多的粒子。如果像素落在 x > 边框等边界之外，则 x=0; 如果 x <1 则 x= 边界。y 也是一样。

这只是意味着如果它落在边界上，我会将它移动到相反的边界。然后再次检查相邻像素。我有一个用于创建种子的外循环，以及用于创建粒子的内循环。在内部循环中，我检查 x,y 位置：

```
//Place, move, and "stick" the particles; stop if either steps or particles = 0
for (int p = 0; p < particles; p++) {

    for (int s = 0; s < steps; s++) {
        if (xPos > image.getWidth() ) {
                       do something
                    } 
        else if (xPos < 1) {
                        do something
                    }
        if (yPos > image.getHeight() - 2) {
                         do something
                    } 
        else if (yPos < 1) {
                         do something
                    } 
        else if (xPos > image.getWidth() && yPos > image.getHeight()) {
                         do something
                    } 
        else if (xPos < 1 && yPos < 1) {
                         do something
                    }

     //If the surrounding pixels' color is not white, make that particle stick.
            if (moveValid()) {
                image.setRGB(xPos, yPos, 0xFF000000);
            } 

            //Otherwise, move in a random direction
            else {
                if(xPos == 1 && image.getRGB(size - 2, yPos) != 0xFFFFFFFF){
                   draw(xPos,yPos);
                }
                else if(xPos == size - 2 && image.getRGB(1,yPos) != 0xFFFFFFFF){
                    draw(xPos,yPos);
                }
                if(yPos == 1 && image.getRGB(xPos, size - 2) != 0xFFFFFFFF){
                   draw(xPos,yPos);
                }
                else if(yPos == size - 2 && image.getRGB(xPos,1) != 0xFFFFFFFF){
                    draw(xPos,yPos);
                }
                else {
                    move();

                }

            }
        }

        //Regenerate random x and y positions for the next particle   
        xPos = random.nextInt(size);
        yPos = random.nextInt(size);
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:18:58.633

尽管`draw()`未显示 的实现，但看起来您正在更新 a`BufferedImage`然后渲染它。

1.  第一步始终是[分析](https://stackoverflow.com/q/2064427/230513)您现有的代码，寻找易于实现的优化。

2.  第二步有时是搁置现有代码并尝试不同的方法。

您可以利用[此处](https://stackoverflow.com/a/2687871/230513)概述和讨论[的](https://stackoverflow.com/a/3072979/230513)Mode-View-Controller 模式。特别是，让您的[DLA](http://en.wikipedia.org/wiki/Diffusion-limited_aggregation) *模型*在后台线程上全速发展，同时以更可持续的速度更新您的*视图。*本文[建议](https://sites.google.com/site/drjohnbmatthews/threadwatch)了几种同步方法，并包含一个用于`javax.swing.Timer`调整更新速度的相关示例。

# key-value-store - 如何在单级数据库实例中创建多个逻辑表？

> ID：12433657
> 
> 赞同：3
> 
> 时间：2012-09-15T00:52:11.567
> 
> 标签：key-value-store, leveldb

我正在开发一个分布式键值系统（或数据存储），它在后端使用[levelDB作为其嵌入式数据库库。](http://code.google.com/p/leveldb/)

我希望一台节点/机器托管多个表（出于复制和负载平衡的目的）。我知道 levelDB 没有表的概念，所以我不能以表的形式对我的数据进行逻辑分区（因此不能将这些表用作我的基本分布单位）。

**我的问题是：**是否有规定在 levelDB 的单个实例中拥有多个“逻辑表”？

据我所知，我可以在我的节点上运行多个 levelDB 实例，每个实例处理一个表。但我不想这样做，因为在这种情况下，当同时访问这些多个数据库实例时，会出现严重的争用（我相信在磁盘上）。虽然在单个 DB 实例中拥有多个逻辑表可以为我提供 levelDB 优化的优势，以最大限度地减少磁盘访问。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-19T22:30:15.280

如果您想在 LevelDB 中拥有多个“逻辑表”，那么您必须对您的键空间进行分区或为键添加前缀。为每个表创建一个不同的前缀，例如：

```
0x0001 is for table 1
0x0002 is for table 2
0x0003 is for table 3
and so on... 
```

因此，键将由表前缀和键本身组成：[0x0001,0xFF11] 将寻址表 1 中的键 0xFF11。然后您可以使用单个 LevelDB 实例并拥有多个对应于“表”的“键空间”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-07T07:52:52.340

您最好的选择是使用 Lirik 建议的键前缀对键空间进行分区。尽管可以打开多个数据库，但我不建议您将其用于您的用例，因为数据库不会共享任何缓冲区和缓存。使用多个开放数据库可能会对性能产生负面影响，并且会使优化资源使用（主要是内存）变得更加困难。

# haskell - 高阶函数和 ST

> ID：12433667
> 
> 赞同：4
> 
> 时间：2012-09-15T00:54:31.927
> 
> 标签：haskell

我正在玩[http://hackage.haskell.org/packages/archive/vault/0.2.0.0/doc/html/Data-Vault-ST.html](http://hackage.haskell.org/packages/archive/vault/0.2.0.0/doc/html/Data-Vault-ST.html)并想编写如下函数：

```
onVault  f = runST (f <$> Vault.newKey)
onVault2 f = runST (f <$> Vault.newKey <*> Vault.newKey) 
```

等等。如果我用不带参数的函数替换这些函数并调用特定函数而不是 f，它可以工作，但这些高阶函数不会进行类型检查。

发生了什么事，我可以解决它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T01:31:33.230

您需要给出2 种类型`onVault`并对其进行`onVault2` [排名](http://www.haskell.org/haskellwiki/Rank-N_types)。

```
{-# LANGUAGE Rank2Types #-} -- RankNTypes would also work

onVault :: (forall s. Key s a -> b) -> b
onVault2 :: (forall s. Key s a -> Key s b -> c) -> c 
```

这是因为`runST :: (forall s. ST s a) -> a`要求传递的动作在状态线程参数中是多态的`s`，这是一种用于保证纯度的类型级技巧。有关详细信息，请参阅[HaskellWiki 上的 ST monad 文章](http://www.haskell.org/haskellwiki/Monad/ST)。

# php - 通过其 IP 地址和 HTTP 主机标头获取远程网页内容？

> ID：12433669
> 
> 赞同：0
> 
> 时间：2012-09-15T00:55:21.720
> 
> 标签：php

我想通过其 IP 地址获取网页的内容。还有许多其他网站也共享此 IP，因此使用 HTTP Host 标头。此 PHP Web 服务器没有 DNS 服务，将响应

```
file_get_contents("http://allaboutcircuits.com"); 
```

经过

```
php_network_getaddresses: getaddrinfo failed: Name or service not known 
```

从几个例子中，我尝试了：

```
$context = stream_context_create(array('http' => array('header' => 'Host:allaboutcircuits.com')));
$url = 'http://68.233.243.63';
echo file_get_contents($url, 0, $context); 
```

似乎我**在 file_get_contents() 行**仍然有同样的错误，这意味着 file_get_contents() 仍然在 DNS 中查询 Host 标头，尽管提供了 IP 地址。

如何修复此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:13:35.583

问题是网站响应重定向到`www.allaboutcircuits.com`，所以 PHP 试图遵循重定向。更改您的 Host 标头以包含`www.`前缀，它应该可以工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T01:13:26.663

```
$s=socket_create(AF_INET,SOCK_STREAM,SOL_TCP); 
socket_connect($s,'68.233.243.63',80);
socket_send($s,"GET / HTTP/1.1\r\nHost: www.allaboutcircuits.com\r\n\r\n",1000,0);
socket_recv($s, $buf, 100000,0);
socket_close($s);
echo $buf; 
```

应该是一个开始！

# python - Python Scrapy：Yahoo Fantasy 蜘蛛什么都不返回，没有错误

> ID：12433670
> 
> 赞同：0
> 
> 时间：2012-09-15T00:55:42.973
> 
> 标签：python, yahoo, scrapy

我正在开展一个项目，以从各种服务的 Fantasy Football 联赛中获取统计数据，而雅虎是我目前所坚持的。我希望我的蜘蛛抓取公共雅虎联盟的草稿结果页面。当我运行蜘蛛时，它没有给我任何结果，也没有错误消息。它只是说：

```
2012-09-14 17:29:08-0700 [draft] DEBUG: Crawled (200) <GET http://football.fantasysports.yahoo.com/f1/753697/draftresults?drafttab=round> (referer: None)
2012-09-14 17:29:08-0700 [draft] INFO: Closing spider (finished)
2012-09-14 17:29:08-0700 [draft] INFO: Dumping spider stats:
    {'downloader/request_bytes': 250,
     'downloader/request_count': 1,
     'downloader/request_method_count/GET': 1,
     'downloader/response_bytes': 48785,
     'downloader/response_count': 1,
     'downloader/response_status_count/200': 1,
     'finish_reason': 'finished',
     'finish_time': datetime.datetime(2012, 9, 15, 0, 29, 8, 734000),
     'scheduler/memory_enqueued': 1,
     'start_time': datetime.datetime(2012, 9, 15, 0, 29, 7, 718000)}
2012-09-14 17:29:08-0700 [draft] INFO: Spider closed (finished)
2012-09-14 17:29:08-0700 [scrapy] INFO: Dumping global stats:
    {} 
```

这不是登录问题，因为有问题的页面无需登录即可访问。我从此处发布的其他问题中看到，人们已经为雅虎的其他部分工作而受到了打击。雅虎幻想是否有可能阻止蜘蛛？我已经为 ESPN 成功编写了一个，所以我认为问题不在于我的代码。无论如何，这里是：

```
class DraftSpider(CrawlSpider):
name = "draft"
#psycopg stuff here

rows = ["753697"]

allowed_domains = ["football.fantasysports.yahoo.com"]

start_urls = []

for row in rows:

    start_urls.append("http://football.fantasysports.yahoo.com/f1/" + "%s" % (row) + "/draftresults?drafttab=round")

    def parse(self, response):
        hxs = HtmlXPathSelector(response)
        sites = hxs.select("/html/body/div/div/div/div/div/div/div/table/tr")
        items = []
        for site in sites:
            item = DraftItem()
            item['pick_number'] = site.select("td[@class='first']/text()").extract()
            item['pick_player'] = site.select("td[@class='player']/a/text()").extract()
            item['pick_nflteam'] = site.select("td[@class='player']/span/text()").extract()
            item['pick_ffteam'] = site.select("td[@class='last']/@title").extract()
            items.append(item)
        return items 
```

非常感谢对此的任何见解。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T08:07:25.913

```
C:\Users\Akhter Wahab>scrapy shell http://football.fantasysports.yahoo.com/f1/75
In [1]: hxs.select("/html/body/div/div/div/div/div/div/div/table/tr")
Out[1]: [] 
```

您的绝对 Xpath 不正确“/html/body/div/div/div/div/div/div/div/table/tr”

以及我永远不会**建议**您使用绝对 Xpath，但您应该使用一些相对 xpath，就像所有结果都在

```
//div[@id='drafttables'] 
```

这个分区。所以你可以开始得到结果。

# java - 解析嵌套的 JSON

> ID：12433673
> 
> 赞同：7
> 
> 时间：2012-09-15T00:56:49.630
> 
> 标签：java, json, jackson

我有以下 JSON：

```
{
  "registration": {
    "name": "Vik Kumar",
    "first_name": "Vik",
    "last_name": "Kumar",
    "bloodGroup": "B-",
    "gender": "male",
    "birthday": "10\/31\/1983",
    "email": "vik.ceo\u0040gmail.com",
    "cellPhone": "1234123456",
    "homePhone": "1234123457",
    "officePhone": "1234123458",
    "primaryAddress": "jdfjfgj",
    "area": "jfdjdfj",
    "location": {
      "name": "Redwood Shores, California",
      "id": 103107903062719
    },
    "subscribe": true,
    "eyePledge": false,
    "reference": "fgfgfgfg"
  }
} 
```

我正在使用以下代码来解析它：

```
JsonNode json = new ObjectMapper().readTree(jsonString);
JsonNode registration_fields = json.get("registration");

Iterator<String> fieldNames = registration_fields.getFieldNames();
while(fieldNames.hasNext()){
    String fieldName = fieldNames.next();
    String fieldValue = registration_fields.get(fieldName).asText();
    System.out.println(fieldName+" : "+fieldValue);
} 
```

这工作正常，它打印除了位置之外的所有值，这是另一种嵌套级别。我尝试了与上面代码相​​同的技巧来传递 json.get("location") 但这不起作用。请建议如何使其适用于位置。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-15T01:05:48.157

您需要检测何时使用（嵌套）`Object`处理`JsonNode#isObject`：

```
public static void printAll(JsonNode node) {
     Iterator<String> fieldNames = node.getFieldNames();
     while(fieldNames.hasNext()){
         String fieldName = fieldNames.next();
         JsonNode fieldValue = node.get(fieldName);
         if (fieldValue.isObject()) {
            System.out.println(fieldName + " :");
            printAll(fieldValue);
         } else {
            String value = fieldValue.asText();
            System.out.println(fieldName + " : " + value);
         }
     }
} 
```

因此，当您到达一个对象时，例如`location`，您将`printAll`递归调用以打印其所有*内部*值。

```
org.codehaus.jackson.JsonNode json = new ObjectMapper().readTree(jsonString);
org.codehaus.jackson.JsonNode registration_fields = json.get("registration");
printAll(registration_fields); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T01:05:50.933

由于`location`嵌套在 内`registration`，您需要使用：

```
registration_fields.get("location"); 
```

为拿到它，为实现它。但是不是已经被while循环处理过了，为什么还要单独获取呢？

# xcode - iOS5 中 RTL 和 LTR UIViews 之间的切换

> ID：12433674
> 
> 赞同：0
> 
> 时间：2012-09-15T00:57:08.143
> 
> 标签：xcode, ipad, ios5, right-to-left

我想知道如何在 iOS5 故事板上的 RTL 和 LTR UIViews 之间切换。在 android 中有两种不同的布局目录，例如：layout-ar（用于阿拉伯语）和 layout（用于所有其他语言 LTR）。那么我们可以在 XCODE 中做类似的事情，还是有任何其他方式来实现 RTL。

# android - Android 为 TextView 中的文本向左填充，其中包含左侧的图像和右侧的文本

> ID：12433676
> 
> 赞同：3
> 
> 时间：2012-09-15T00:57:58.293
> 
> 标签：android, user-interface

我有一个 TextView，其中包含左侧的图像和右侧的文本：

![在此处输入图像描述](../Images/632147d09a133d1c42677abd6e473f4d.png)

我想在垂直线和文本之间创建一个空间。

这是我的代码：

```
<TextView
    android:id="@+id/locationDetailsTitleTextView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/map_activity_location_details_dialog_title"
    android:textColor="@color/actionbar_title_color"
    android:textAppearance="?android:attr/textAppearanceLarge"
    android:gravity="center_vertical"
    android:drawableLeft="@drawable/balloon_line" /> 
```

我怎样才能做到这一点？

**更新**

这是`Drawable`我使用的`balloon_line`：

![在此处输入图像描述](../Images/13e6d542e42267d88befa1bbd05d8ac5.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-15T02:12:34.520

你试过使用`android:drawablePadding`吗？

**示例：**在文本和左侧可绘制对象之间添加 5dp 填充

```
<TextView
    android:id="@+id/locationDetailsTitleTextView"
    ...
    android:drawableLeft="@drawable/balloon_line" 
    android:drawablePadding="5dp"/> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-09-14T10:14:45.280

在你的文本视图中使用这个标签`android:drawablePadding="5dp"`

# python - 如何使用 awk 、 python 或 biopython 从 PDB 文件中获取子单元的数量？

> ID：12433678
> 
> 赞同：0
> 
> 时间：2012-09-15T00:59:04.660
> 
> 标签：python, awk, bioinformatics, biopython

我有一个目录中的 PDB（文本）文件。我想打印每个 PDB 文件中的子单元数。

1.  读取 pdb 文件中以`ATOM`
2.  该`ATOM`行的第五列包含`A`、`B`、`C`等`D`。
3.  如果只包含`A`子单元数为 1。如果包含`A`和子`B`单元数为 2。如果包含`A`,`B`子`C`单元数为 3。

1kg2.pdb 文件

```
ATOM   1363  N   ASN A 258      82.149 -23.468   9.733  1.00 57.80           N  
ATOM   1364  CA  ASN A 258      82.494 -22.084   9.356  1.00 62.98           C  
ATOM   1395  C   MET B 196      34.816 -51.911  11.750  1.00 49.79           C  
ATOM   1396  O   MET B 196      35.611 -52.439  10.963  1.00 47.65           O 
```

1uz3.pdb 文件

```
ATOM   1384  O   ARG A 260      80.505 -20.450  15.420  1.00 22.10           O 
ATOM   1385  CB  ARG A 260      78.980 -18.077  15.207  1.00 36.88           C 
ATOM   1399  SD  MET B 196      34.003 -52.544  16.664  1.00 57.16           S 
ATOM   1401  N   ASP C 197      34.781 -50.611  12.007  1.00 44.30           N 
```

2b69.pdb 文件

```
ATOM   1393  N   MET B 196      33.300 -54.017  12.033  1.00 46.46           N  
ATOM   1394  CA  MET B 196      33.782 -52.714  12.566  1.00 49.99           C 
```

期望的输出

```
pdb_id   subunits

 1kg2      2
 1uz3      3
 2b69      1 
```

如何使用 awk、python 或 Biopython 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T15:04:40.750

您可以使用[数组](https://www.gnu.org/software/gawk/manual/html_node/Arrays.html#Arrays)记录第五列的所有可见值。

```
$ gawk '/^ATOM/ {seen[$5] = 1} END {print length(seen)}' 1kg2.pdb
2 
```

**编辑：**使用 gawk 4.x，您可以使用它[`ENDFILE`](https://www.gnu.org/software/gawk/manual/html_node/BEGINFILE_002fENDFILE.html#BEGINFILE_002fENDFILE)来生成所需的输出：

```
BEGIN {
  print "pdb_id\t\tsubunits"
  print
}

/^ATOM/ {
  seen[$5] = 1
}

ENDFILE {
  print FILENAME, "\t", length(seen)
  delete seen
} 
```

结果：

```
$ gawk -f pdb.awk 1kg2.pdb 1uz3.pdb 2b69.pdb
pdb_id          subunits

1kg2.pdb         2
1uz3.pdb         3
2b69.pdb         1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T15:42:18.770

[字典](http://docs.python.org/py3k/tutorial/datastructures.html#dictionaries)是计算唯一出现次数的一种方法。以下为每个子单元分配一个无意义的值 (0)，因为您只关心唯一子单元（字典键）的数量。

```
import os

for fn in os.listdir():
    if ".pdb" in fn:
        sub = {}
        with open(fn, 'r') as f:
            for line in f:
                c = line.split()
                if len(c) > 5 and c[0] == "ATOM":
                    sub[c[4]] = 0
        print(fn, len(sub.keys())) 
```

（一个全新的用户应该得到一个答案以及指向[http://whathaveyoutried.com/](http://whathaveyoutried.com/)的指针。随后的问题应该包括用户实际尝试解决问题的证据。）

# c++ - wchar_t* 奇怪的行为

> ID：12433687
> 
> 赞同：0
> 
> 时间：2012-09-15T01:01:53.137
> 
> 标签：c++, visual-c++, corruption, garbage

嗨，我正在寻找一些建议，我在类的命令解释器中工作，我有这个“命令”（即一个类），它从内部变量中获取一些 c 字符串并创建一个 std::wstring，然后我将它转换为 wchar_t *但是当我返回它时，我只会在变量上得到垃圾，pe

返回前变量的内容：

> comandos disponibles: ayuda salir

返回后变量的内容：

> ������������������������������������������

我试图让函数返回一个 const wchar_t * 但它也不起作用，但如果我在返回中放入一个字符串，它就可以正常工作。

```
return L"test" 
```

任何想法？

- 编辑 -

这是我正在使用的代码

```
wchar_t * ayuda::run(std::list<char* const> * lista){

    std::wstring out;

    out += L"comandos disponibles:\n"; //static header
    commandMap map = loadMap();//get a map whit all the function names

    commandMap::iterator it;
    for(it = map.begin(); it != map.end();it++){
        out+=std::wstring(it->first.begin(),it->first.end())+L"\n";// append the command name to the string
    }
    wchar_t * _out = const_cast<wchar_t*>( out.c_str() ); //cast to wchar *
    return _out;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:11:13.413

您是否试图返回分配在堆栈上的 wchar_t * ？

```
wchar_t *MyFunction()
{
    wchar_t myString[] = L"This will be destroyed from the stack on returned";
    return myString;
} 
```

在这种情况下，字符串会从堆栈中删除，然后返回垃圾。这可以解释你所看到的。

在 C++ 中，将 std::string 或 std::wstring 用于字符串，它可以防止内存泄漏并提供有用的功能。尽可能避免使用数组。

```
#include <string>

std::wstring MyFunction()
{
    std::wstring myString = L"This will be copied, since this is not a pointer, but an instance of an object.";
    return myString;
} 
```

另一种方法是在堆上分配字符串，然后你需要确保在某处删除它，否则会出现内存泄漏。

```
wchar_t *MyFunction()
{
    wchar_t myString[] = L"This will be destroyed from the stack on returned";
    size_t myStringLen = wcslen(myString);

    wchar_t *outString = new wchar_t[myStringLen+1]; //allocate heap memory
    wcscpy(outString, myString); //copy the string to heap memory

    return outString; //return a string that will not be destroyed.
} 
```

# ruby-on-rails - 在 Rails 功能测试中自动测试格式

> ID：12433688
> 
> 赞同：0
> 
> 时间：2012-09-15T01:02:16.983
> 
> 标签：ruby-on-rails, ruby, binding, functional-testing

我想让我的每个功能测试自动测试各种格式。似乎实现这一点的方法是将“测试”方法包装在我自己的类方法中：

```
def self.test_all_formats(name)
  [ "xml", "json" ].each do |fmt|
    test "#{name} #{fmt}" do
      yield(format)
    end
  end
end

test_all_formats "index" do |fmt|
  get :index, { :format => fmt }
  assert_response :ok
end 
```

不幸的是，每个测试都会引发以下错误：

> NoMethodError：AccountsControllerTest:Class 的未定义方法“get”。

尽管块的执行被推迟到测试的执行，但它试图在类的上下文中而不是实例的上下文中运行块。

有没有办法实现这种自动化测试？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:21:41.813

以下对我有用：

```
class << self
  def test_all_formats(name, &block)
    [ "xml", "json" ].each do |fmt|
      test "#{name} #{fmt}" do
        instance_exec fmt, &block
      end
    end
  end
end

test_all_formats "index" do |fmt|
  get :index, { :format => fmt }
  assert_response :ok
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:52:55.600

此代码最初是作为 Chris Oei 的解决方案提供的，如果您不喜欢使用 instance_exec，可能会更可取：

```
class << self
   def test_formats(name, &block)
    define_method "fmt_#{name}", &block
      [ "xml", "json" ].each do |fmt|
        test "#{name} #{fmt}" do
          send "fmt_#{name}", fmt
        end
      end
    end
  end
end 
```

# python - 提取列表中奇数位置的元素

> ID：12433695
> 
> 赞同：124
> 
> 时间：2012-09-15T01:05:25.100
> 
> 标签：python, list, slice

所以我想创建一个列表，它是一些现有列表的子列表。

例如，

`L = [1, 2, 3, 4, 5, 6, 7]`，我想创建一个子列表`li`，其中`li`包含奇数位置的所有元素`L`。

虽然我可以做到

```
L = [1, 2, 3, 4, 5, 6, 7]
li = []
count = 0
for i in L:
    if count % 2 == 1:
        li.append(i)
    count += 1 
```

但我想知道是否有另一种方法可以有效地以更少的步骤完成相同的操作。

* * *

## 回答 #1

> 赞同：285
> 
> 时间：2012-09-15T01:08:49.920

## 解决方案

是的你可以：

```
l = L[1::2] 
```

这就是全部。结果将包含放置在以下位置的元素（`0`基于 -，所以第一个元素在 position `0`，第二个在`1`等）：

```
1, 3, 5 
```

所以结果（实际数字）将是：

```
2, 4, 6 
```

## 解释

最后`[1::2]`的只是列表切片的符号。通常它是以下形式：

```
some_list[start:stop:step] 
```

如果我们省略`start`，将使用默认值 ( `0`)。因此将选择第一个元素（在 position `0`，因为索引是`0`基于 - 的）。在这种情况下，将选择第二个元素。

因为省略了第二个元素，所以使用默认值（列表的末尾）。所以列表正在**从第二个元素迭代到 end**。

我们还提供了第三个参数 ( `step`)，即`2`. 这意味着将选择一个元素，跳过下一个元素，依此类推......

所以，总而言之，在这种情况下`[1::2]`意味着：

1.  取第二个元素（顺便说一下，如果你从索引判断，它是一个奇怪的元素），
2.  跳过一个元素（因为我们有`step=2`，所以我们跳过一个，与`step=1`默认值相反），
3.  取下一个元素，
4.  重复步骤 2.-3。直到到达列表的末尾，

**编辑**：@PreetKukreti 给出了关于 Python 列表切片符号的另一个解释的链接。见这里：[解释 Python 的切片符号](https://stackoverflow.com/questions/509211/good-primer-for-python-slice-notation)

## 附加功能 - 将 counter 替换为`enumerate()`

在您的代码中，您明确创建并增加计数器。在 Python 中，这不是必需的，因为您可以通过一些可迭代的 using 进行枚举[`enumerate()`](http://docs.python.org/library/functions.html#enumerate)：

```
for count, i in enumerate(L):
    if count % 2 == 1:
        l.append(i) 
```

上面的用途与您使用的代码完全相同：

```
count = 0
for i in L:
    if count % 2 == 1:
        l.append(i)
    count += 1 
```

`for`有关在 Python 中使用计数器模拟循环的更多信息： [Accessing the index in Python 'for' loops](https://stackoverflow.com/q/522563/548696)

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-15T01:30:04.403

对于*奇数*职位，您可能想要：

```
>>>> list_ = list(range(10))
>>>> print list_[1::2]
[1, 3, 5, 7, 9]
>>>> 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2016-08-24T14:02:52.567

我喜欢列表推导，因为它们的数学（集合）语法。那么这个怎么样：

```
L = [1, 2, 3, 4, 5, 6, 7]
odd_numbers = [y for x,y in enumerate(L) if x%2 != 0]
even_numbers = [y for x,y in enumerate(L) if x%2 == 0] 
```

基本上，如果你枚举一个列表，你会得到 index`x`和 value `y`。我在这里所做的是将值`y`放入输出列表（偶数或奇数）并使用索引`x`来确定该点是否为奇数（`x%2 != 0`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-03-16T09:36:53.163

您可以使用按位 AND 运算符`&`：

```
>>> x = [1, 2, 3, 4, 5, 6, 7]
>>> y = [i for i in x if i&1]
[1, 3, 5, 7] 
```

这将为您提供*列表中的奇数元素*。现在**要提取奇数索引处的元素，**您只需要稍微更改一下上面的内容：

```
>>> x = [10, 20, 30, 40, 50, 60, 70]
>>> y = [j for i, j in enumerate(x) if i&1]
[20, 40, 60] 
```

* * *

**解释**

按位与运算符与 1 一起使用，它起作用的原因是，以二进制形式写入的奇数必须有它的第一个数字为 1。让我们检查一下：

```
23 = 1 * (2**4) + 0 * (2**3) + 1 * (2**2) + 1 * (2**1) + 1 * (2**0) = 10111
14 = 1 * (2**3) + 1 * (2**2) + 1 * (2**1) + 0 * (2**0) = 1110 
```

与 1 的 AND 操作将仅返回 1（二进制中的 1 也将具有最后一位 1），如果该值是奇数。

查看 Python[位运算符](https://wiki.python.org/moin/BitwiseOperators)页面了解更多信息。

PS：如果你想在数据框中选择奇数列和偶数列，你可以战术上使用这种方法。假设面部关键点的 x 和 y 坐标以 x1、y1、x2 等列的形式给出...要使用每个图像的宽度和高度值标准化 x 和 y 坐标，您可以简单地执行：

```
for i in range(df.shape[1]):
    if i&1:
        df.iloc[:, i] /= heights
    else:
        df.iloc[:, i] /= widths 
```

这与问题并不完全相关，但对于数据科学家和计算机视觉工程师来说，这种方法可能很有用。

# xamarin.ios - 在 MonoTouch 下构建 System.Net 代理 DLL - 避免“朋友访问”冲突？

> ID：12433701
> 
> 赞同：3
> 
> 时间：2012-09-15T01:06:07.843
> 
> 标签：xamarin.ios, portable-class-library

为了让 Portable Library Projects v2 在 MonoTouch 中工作，我目前正在跳过一些障碍。

其中之一是我正在为 System.Net 方法构建一个转发 DLL（请参阅[http://slodge.blogspot.co.uk/2012/04/using-portable-library-tools-for.html](http://slodge.blogspot.co.uk/2012/04/using-portable-library-tools-for.html)中的一些解释）

但是，我在实际生成具有正确名称的 DLL 时遇到了一些问题 - 因为如果我生成它，`System.Net`那么在构建过程中会出现错误：

> 错误 CS0281：朋友访问权限已授予`System.Net, PublicKeyToken=7cec85d7bea7798e', but the output assembly is named` System.Net，版本 = 0.0.0.0，文化 = 中性，PublicKeyToken = null'。尝试添加对“System.Net，PublicKeyToken=7cec85d7bea7798e”的引用或更改输出程序集名称以匹配它 (CS0281) (System.Net.Touch)

我确实有办法解决这个问题 - 以不同的名称生成文件，然后手动重命名它。但如果可以的话，我宁愿避免这一步。

任何人都可以提出一种方法来避免这个错误，同时仍然生成一个名为 System.Net 的程序集吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-21T19:02:47.530

不确定这是否有帮助。我能够获取您的代码并在 Visual Studio 2010 中构建延迟签名的 System.Net，Version=2.0.5.0，Culture=neutral，PublicKeyToken=7cec85d7bea7798e。然后成功地使用该 DLL 构建了一个简单的应用程序（一个 PCL + 一个 MonoTouch ) 在 VS/Windows 和 Xamarin/Mac 中编译和运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T19:42:03.513

经过几个月的研究，似乎在解决方案中做到这一点的唯一方法是我已经拥有的解决方法：

> 我确实有办法解决这个问题 - 以不同的名称生成文件，然后手动重命名它。但如果可以的话，我宁愿避免这一步。

希望这不会很快被需要 - 因为我们现在有正式的 Xamarin PCL 支持正在生产中。

# javascript - 不确定此代码段如何工作

> ID：12433704
> 
> 赞同：1
> 
> 时间：2012-09-15T01:08:40.377
> 
> 标签：javascript

```
var count = function(tree) {
    var stack = [];
    var count = 0;
    for (var node = tree; node; count++, node = stack.pop()) {
        if (node.left) stack.push(node.left);
        if (node.right) stack.push(node.right);
    }
    return count;
}; 
```

上面的代码工作并返回二叉树中的节点数。

我很困惑这是如何工作的。不`var stack = [];`创建空数组？

如果是这样，在 for 循环中设置时 node 是否不会变为 0，从而使两个 if 语句都返回 false 并且不运行？

**编辑：**我刚刚意识到代码`node = stack.pop()`在循环体结束之前不会被执行。因此，直到该点的节点将包含传递到过程中的当前节点（从头节点开始）。

为这个平凡的问题道歉，我想该睡觉了

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T01:21:45.680

您可以将其重写为：

```
var count = function(tree) {
    var stack = [];
    var count = 0;
    var node = tree; // set node to the tree (the tree's root node)
    while (node) { // while the node is not null
        // The way these pushes are done, it's basically doing a depth first search
        if (node.left) stack.push(node.left);
        if (node.right) stack.push(node.right);
        count++;
        node = stack.pop();
    }
    return count;
}; 
```

换句话说，`node`它在运行时不会变为零，因为它`stack`是空的。它设置为`tree`，而不是`stack`。[你可以看到它在这里工作](http://jsfiddle.net/PaPdT/2/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T01:20:58.103

我提供了评论并创建了一个[JS Fiddle](http://jsfiddle.net/gbsandeep/Wyfkr/)。我希望这有帮助

```
 var count = function(tree) {
    // Stack is by default empty (empty array)
    var stack = [];

    var count = 0;

    // Initially set node to the tree root. 'node' always points to the item being processed. 
    // Each node can have left and right children. 
    // They can be null as well.
    // Comparison is to check if the 'node' is undefined or null 
    // count is incremented if a left or right children is found. 
    // stack.pop() removes the top most element from the array/stack. 

    for (var node = tree; node; count++, node = stack.pop()) {

      // verify if left child exists, then push. This will add to the count when it is popped.  

      if (node.left) stack.push(node.left);

      // verify if right child exists, then push. This will add to the count when it is popped.

  if (node.right) stack.push(node.right);
    }
    return count;
}; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T01:27:57.467

```
// Count is a function that takes a binary tree, each node in the binary tree
// has a left and a right child. The tree itself is also such a note, namely
// the root node of the tree. What Count does with this tree is count the
// amount of nodes.
var count = function(tree) {
    // We first create a new stack, which we plan to use for counting.        
    var stack = [];

    // The initial count is zero.
    var count = 0;

    // Initial: We first take the root node.
    // Condition: As long as node exists.
    // Incrementation: We increment count, and take another node of the stack.
    for (var node = tree; node; count++, node = stack.pop()) {
        // For the current node, place it's left and right node on the stack.
        if (node.left) stack.push(node.left);
        if (node.right) stack.push(node.right);
    }

    // Remember: Init --> Body --> Incr --> Cond --> Body --> Incr --> Cond ...

    // Now that all nodes have passed through the stack, return the count.
    return count;
}; 
```

假设树是这样的：

```
 1
  / \
 2   3
    / \
   4   5 
```

事情是这样的：

*   堆栈为空，计数为 0。
*   它以“1”开始，在堆栈中添加子“2”和“3”。
*   它增加计数（0 - > 1）并获取堆栈的一个节点，即“2”。
*   它以“2”继续，它没有孩子。
*   它增加计数 (1 -> 2) 并获取堆栈的一个节点，即“3”。
*   它以“2”继续，它在堆栈上添加子“4”和“5”。
*   它增加计数（2 -> 3）并获取堆栈的一个节点，即“4”。
*   它以“4”继续，它没有孩子。
*   它增加计数（3 -> 4）并获取堆栈的一个节点，即“5”。
*   它以“5”继续，它没有孩子。
*   它增加了计数（4 -> 5）并且不能获取堆栈的节点，它会停止。
*   最终计数 5 被返回。

# c# - 使用正则表达式查找单引号字符串以及它们之间的内容

> ID：12433708
> 
> 赞同：1
> 
> 时间：2012-09-15T01:09:09.677
> 
> 标签：c#, sql, regex, parsing

目前我正在为 SQL 查询编写一个非常简单的文本框到查询解析器。需要做的一件事是需要找到并正确参数化放在单引号中的字符串。我已经用谷歌搜索并逐页查找答案，但是我找不到任何帮助。

给定查询

```
INSERT INTO PracticeTable
VALUES ('Hello 'World') 
```

或者例如，

```
WHERE users.UserProfiles = 'John's Profile' 
```

我需要想办法

1.  查找单引号中的字符串
2.  从内部提取字符串

我可以使用循环自己进行参数化。

所以要完成查询段中的例子

```
WHERE users.UserProfiles = 'John's Profile' 
```

我应该得到一个匹配 'John's Profile' 的匹配项，然后能够从它们内部删除整个字符串 John's Profile。

谁能帮我？另外，任何人都可以建议一种更好的方法来接收用户的查询并运行它吗？我一直在寻找建议。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T01:20:39.610

测试以下内容。它将捕获带引号的字符串。

```
[^']*'(.+)' 
```

=>

> WHERE users.UserProfiles = '约翰的个人资料'

提取组

> 约翰的个人资料

我想提一下，您的 WHERE 子句是错误的 SQL，因为您的内部 ' 没有被转义。

* * *

正如您所问的，引用的字符串可以通过以下方式轻松捕获：

```
[^']*('.+') 
```

# iphone - 随时间增量生成图像视图

> ID：12433709
> 
> 赞同：0
> 
> 时间：2012-09-15T01:09:10.837
> 
> 标签：iphone, ios, xcode

如何以编程方式`UIImageViews`在随机位置以时间增量在屏幕上生成无限数量的 on。随机位置是：`CGPoint(arc4random() % (481), arc4random() % (321),20,20)`我只是不明白如何使用一个图像变量和一个 for 循环不断创建新的位置。或者`NSTimer`每次增量都会在屏幕上添加一个新图像。

我知道有一些教程可以解决这个问题，但我能找到的唯一的教程使用了自动引用计数。它应该很容易创建，并且链接很好。

* * *

其他问题：

UI 用于用户界面，但由于我没有使用情节提要或 xib，因此是否有更好的类型`imageView`可供使用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:25:00.050

How about something like this, in your view controller class (substituting your own image file name of course):

```
- (void)viewDidLoad {
    [super viewDidLoad];
    [NSTimer scheduledTimerWithTimeInterval:.5 target:self selector:@selector(addViews:) userInfo:nil repeats:YES];
}

-(void)addViews: (NSTimer *) aTimer {
    UIImageView *iv = [[UIImageView alloc]initWithImage:[UIImage imageNamed:@"New_PICT0011.jpg"]];
    CGRect rect = CGRectMake(arc4random() % (481), arc4random() % (321), 20, 20);
    [iv setFrame:rect];
    [self.view addSubview:iv];
} 
```

You would have to put some kind of counter in there, and when it got to the total number of views you wanted, call [aTimer invalidate];

# c++ - 如果我在 C++ 中使用堆，我做错了什么吗？

> ID：12433711
> 
> 赞同：0
> 
> 时间：2012-09-15T01:09:29.983
> 
> 标签：c++, raii

[我](https://stackoverflow.com/questions/712639/understanding-the-meaning-of-the-term-and-the-concept-raii-resource-acquisiti)对 RAII 的了解越多，我就越明白使用堆栈是确保代码异常安全的方法。

这是否意味着每次我`new()`在我的代码中做某事时，我都做错了什么，因为有更好的方法可以使用 RAII 原则来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T02:19:32.000

我认为您还没有完全理解 RAII 的真正含义。动态分配，就像程序中需要文件、数据库连接等其他资源一样。RAII 专注于如何管理这些资源，而要走的路是让具有自动存储持续时间的对象（堆栈或作为另一个对象的成员）管理资源。

这并不意味着每个资源都必须在堆栈中分配，而是如果您在堆中分配某些东西，您应该将管理该内存的责任委托给堆栈中的对象。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T08:45:24.323

如果你使用 ，你*不一定*做错了什么`new`，但值得检查你做对了。

*   表达式的结果`new`应立即置于智能指针的控制之下，通常是直接将其传递给构造函数。
*   如果那个智能指针是 a `shared_ptr`，那么你*可能*做错了。您可能应该`make_shared`改用。在某些情况下您不应该（使用`weak_ptr`大对象），而在某些情况下您不应该（没有 Boost 的 C++03）。
*   如果您使用`delete`，那么您几乎做错了，除非您正在编写自己的智能指针类。即使这样，您的智能指针也可能能够使用另一个智能指针来节省工作。
*   这不是必需的，但是如果您`new`仅因为对象“对于堆栈而言太大”而使用，请考虑编写一个充当对象句柄的类，使用`unique_ptr`或`scoped_ptr`管理它，以便从用户的角度来看他们处理的对象是自动变量。如果您愿意，可以将其扩展到完整的 PImpl 成语。即使您不想要另一个类，也请考虑一个创建对象并将 a 返回`unique_ptr`给它的函数，然后您可以调用 like `auto foohandle = give_me_a_foo();`。然后`give_me_a_foo`contains `new`，但其他用户代码没有，并且您鼓励将内容自动填充到 RAII 对象中的做法。

在 C++ 中，有替代 RAII 的资源管理策略，但如果你使用它们，你就会知道，这会影响什么是“错误的”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T01:15:41.133

一点也不。如果野兽的本质（分配要求）是真正动态的，那么最终它要么来自堆，要么来自堆栈指针。

您能做的最好的事情就是为您使用范围保护的包装。（当我需要一个受范围保护的动态临时缓冲区时，我不能告诉你我使用 std::vector<> 的频率）。这是使用维护良好和设计良好的库（如 STL 等）的最理想原因之一。与 C# 或 Java 不同，它是可预测的，在真正需要时具有巨大的价值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T01:12:24.337

不，堆栈空间非常有限，所以你不想在上面放很多东西，因此术语堆栈溢出。此外，如果您需要一个对象的生命周期比您的函数长，那么您不能将其放入堆栈。

# java - 是每次都实例化的最终变量

> ID：12433712
> 
> 赞同：2
> 
> 时间：2012-09-15T01:09:36.673
> 
> 标签：java

当我们有一个类的最终实例变量时，它是为该类创建的每个对象实例化还是只创建一次并引用？
如果最终变量是局部类变量会怎样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T01:19:40.023

`final`修饰符只是表明该变量可以被赋值一次*，*并且不能再被赋值。它对实例化没有影响；规则与普通变量相同。修饰符所做的`final`只是防止该值被第二次分配。

下面的例子。

```
private final List myList = new ArrayList(); 
```

每次运行时都会实例化该列表，即每次实例化封闭类时。

```
public void bob() {
    final List myList = new ArrayList();
} 
```

该列表将在每次运行时实例化，即每次`bob`调用该方法时。

```
private static final List MY_LIST = new ArrayList(); 
```

同样，每次运行时都会实例化该列表。由于这也是一个`static`字段初始值设定项，因此该代码将在第一次加载类时运行。因此，对于简单的程序，这将运行一次——在多个类加载器正在运行的场景中（例如应用程序服务器等），但是，每次将类加载到新的类加载器中时，这将运行一次。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T01:14:44.347

最终变量为类的每个实例实例化。一旦分配给它们的值可能不会更改。这些变量可以通过初始化程序或赋值语句初始化一次。

您指的是*静态*变量。这些变量不附加到特定对象，而是附加到整个类。它们是在加载类时分配的。

将这两者结合在一起，您可以为该类提供一个*静态最终变量。*这基本上意味着*一旦分配*给变量的值是常量，并且它将附加到类而不是类的实例。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T01:21:55.390

实例变量、类变量和局部变量用于指代三种不同的事物，因此将变量称为“类的实例变量”或“局部类变量”会造成混淆。

一个实例变量属于一个对象。无论是否`final`，都会在每个实例中为它分配空间。如果是`final`，则必须在构造过程中赋值，并且变量只能赋值一次。

一个类变量属于整个类。无论该类的对象数量如何，只有一个变量，并且所有实例都可以引用它。将变量声明为`static`意味着它属于该类。与实例变量一样，`static`可以声明类变量`final`。然后它必须在类初始化时被赋值一次且仅一次。

局部变量在方法中声明，并且该变量占用方法堆栈帧中的空间——尽管该变量可能持有指向堆中对象的指针。局部变量 can be `final`，这意味着它们只能被赋值一次。此外，如果局部变量是`final`，它可以被方法中实例化的内部类引用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-15T01:16:11.960

变量不是被实例化的变量。类被实例化。变量被初始化。实例变量必须在构造对象时初始化，如果是，`final`您将无法为它们重新分配值。如果它是一个实例变量，那么类的每个实例都会有它自己的副本，否则如果它是静态的，那么只有一个属于类本身的副本。

# git - git status 在 vi rtualbox 上的共享文件夹上花费的时间太长

> ID：12433718
> 
> 赞同：6
> 
> 时间：2012-09-15T01:11:41.590
> 
> 标签：git, virtualbox

我的虚拟机（Mac OS X 主机、RedHat 来宾）上有一个来自主机的共享文件夹-> 来宾计算机。共享文件夹是在主机上创建的，我在来宾上执行了 git checkout 等操作。问题是在客户机上运行 git status 等命令需要很长时间。这是一个已知问题还是有解决方法？

（git status 在主机或来宾上的非共享文件夹上都可以正常工作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-13T10:00:46.050

尝试进入`git prune && git gc`以执行无法访问的对象的清理和垃圾收集。您也可以`git repack -Adf`尝试重新包装所有内容，看看是否有任何改变。`git status`通过遍历工作树并在所有内容上调用 stat() 来限制速度。如果该调用很慢（网络驱动器或有关虚拟化的某些东西），则状态命令将执行不佳。

`git fsck`还有`git count-objects`几个命令可以使用。如果有很多（> 200）对象，事情可能会开始变慢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-13T09:32:14.520

然后从那个 repo 克隆到一个更好的文件系统，在那里工作，将你的更改推回。

# c++ - gSoap 在接口之间共享数据类型

> ID：12433719
> 
> 赞同：13
> 
> 时间：2012-09-15T01:11:49.393
> 
> 标签：c++, client, gsoap

我正在尝试实现两个 Windows 服务，每个实现都是自己的 gSoap 接口，并且都是每个接口的客户端和服务器。所以我的问题是我在两个接口（带成员的类）中使用相同的数据类型，并使用将创建两个不同命名空间的 soapcpp2.exe -q 选项生成 c++ 代码，这很好，它可以工作，但问题是由于命名空间分离，两个接口中应该相等的数据类型现在不同，但是如果我删除命名空间，我将发生冲突，因为共享数据类型在两个接口中具有相同的名称。

“问题：

```
interface 1:
---
>class xsd__Address 
{ 
   char *email; 
   char *url; 
}; 

>int ns1__getAddress(xsd__Address& ret);

---
interface 2:
---
>class xsd__Address 
{ 
   char *email; 
   char *url; 
}; 

>int ns2__setAddress(xsd__Address& ret);

--- 
```

在每个头文件的定义之后，我用 sopcpp2.exe 编译它，例如：

> soapcpp2.exe -qintf1 -n xxxx //用于接口1
> 
> soapcpp2.exe -qintf2 -n xxxx //用于接口2

所以当在我的项目中同时使用两个接口（接口 1 和接口 2）时，当我需要这样的东西时：

```
intf1::Interface1 int1;
int1.endpoint="xxx";
intf1::ns__Address address;
int1.ns1__getAddress(address);

intf2::Interface1 int2;
int2.endpoint="xxx";
int2.ns2_setAddress(address); //this don't compile like i was expecting because to the compiler they are not the same object (and it is wright...) 
```

问题：

是否可以在两个或多个接口之间共享数据类型？是的？这是如何实现的？

如果不是，实现这一点的最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-10T11:38:23.860

上次我使用 gSOAP（2008 年？），它没有为共享结构提供任何灵活性。我无法评论 2013 年的今天是否可能。

但是，作为一种快速解决方法，您可以尝试将 2 个 WSDL 合并为一个（例如，作为构建的一部分），然后生成统一的 SOAP 堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-11-21T23:06:01.400

您已经有两种可能的解决方案： 1\. 使用名称空间并以某种方式处理形式上不同的数据类型。2\. 合并 WSDL 文件并针对结果只运行一次 gSOAP 编译器。

我在 2015 年花了几个星期试图找到一个更好的解决方案，但没有任何解决方案。

# java - 随机选择一组双打

> ID：12433721
> 
> 赞同：1
> 
> 时间：2012-09-15T01:12:16.737
> 
> 标签：java, random, double

我有一个双打列表，为此，假设我有一个双打，命名为一、二、三、四、五、六、七等……到 100。每个都设置为一个值。（这些值与名称不对应）。

我如何随机选择其中的 10 个，并将每个选定的设置为另一个双倍？

EG 说选择了双“一”，以及其他 9 个。

我还想将双“blah”设置为所选双精度的值。然后我想将双“blahtwo”设置为下一个选定双精度的值，等等......

我不想随机选择相同的双倍。

示例代码：

```
 double cardone, cardtwo, cardthree, cardfour, cardfive, cardsix, cardseven, cardeight, cardnine, cardten, cardeleven, cardtwelve, cardthirteen, cardfourteen, cardfifteen, cardsixteen, cardseventeen, cardeighteen, cardnineteen, cardtwenty;

double ran, ranone, rantwo, ranthree, ranfour, ranfive, ransix, ranseven, raneight, rannine, ranten;

cardone = 1.01;
        cardtwo = 1.02;
        cardthree = 1.03;
        cardfour = 1.04;
        cardfive = 1.05;
        cardsix = 1.06;
        cardseven = 1.07;
        cardeight = 1.08;
        cardnine = 1.09;
        cardten = 1.1;
        cardeleven = 1.11;
        cardtwelve = 1.12;
        cardthirteen = 1.13;
        cardfourteen = 2.01;
        cardfifteen = 2.02;
        cardsixteen = 2.03;
        cardseventeen = 2.04;
        cardeighteen = 2.05;
        cardnineteen = 2.06;
        cardtwenty = 2.07; 
```

所以我想随机选择十个名字为“card”的双打，例如。卡多内、卡二等

我想要名为“跑”的双打，例如。“ranone”“rantwo”等...设置为与十个选定的双打相同。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:32:03.197

我会使用一个 Double 的集合，比如一个`ArrayList<Double>`而不是一个 double 数组，然后调用`Collections.shuffle(myArrayList)`ArrayList。宾果游戏，随机。要获得其中的 10 个值，只需调用`remove(0)`列表（在检查以确保大小不为 0 之后）。

这与洗一副牌并随机选择 10 张牌没有太大区别。

**编辑**
我没有意识到您实际上是在尝试模拟扑克牌。如果是这种情况，那么请停止你正在做的事情并忘记使用双打。取而代之的是学习和使用枚举，因为纸牌几乎是枚举有用的最纯粹的例子。可以在[此处](http://docs.oracle.com/javase/1.5.0/docs/guide/language/enums.html)找到描述所有这些的出色链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T01:35:58.330

这是一个非常简单的解决方案：

```
List<Double> doubles = new ArrayList<Double>();
// Add all 100 of your doubles
shuffle(doubles); 
```

然后`shuffle`是通用的，可以与任何列表一起使用：

```
private static <T> void shuffle(List<T> list) {
    int size = list.size();
    Random rand = new Random();
    for (int i = 0; i < size) {
        list.add(list.remove(rand.nextInt(size - i)));
    }
} 
```

这会选择一个随机的、尚未选择的值并将其放在列表的末尾。如果您想要更好的解释，请直说。该列表将在调用后随机化`shuffle`，您可以遍历它们以获得双打。

# c# - ASP.NET MembershipProvider——它究竟是如何进行加密的？

> ID：12433726
> 
> 赞同：5
> 
> 时间：2012-09-15T01:13:26.223
> 
> 标签：c#, asp.net

我需要了解 MembershipProvider 如何执行加密的细节：

1.  它使用什么算法？
2.  是否有任何base64编码预处理或后处理？
3.  除了它使用的标准算法之外，它还有什么其他功能吗？

给定一个要加密的纯文本密码，请引导我完成生成返回的最终加密密码的确切步骤。

我认为查看源代码对回答我的问题大有帮助，但我一直无法在网上找到它。我只找到[了这个文档](http://msdn.microsoft.com/en-us/library/system.web.security.membershipprovider.encryptpassword.aspx)，它没有提供实现细节。

感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-17T18:02:35.393

以下是您想要/需要的代码......到达那里有点像兔子沃伦，所以要完全理解，我建议您执行以下操作：

*   安装[ReSharper](http://www.jetbrains.com/resharper/)
    *[可选] 安装[dotPeek](http://www.jetbrains.com/decompiler/)*
*   在任何地方写下以下代码：
    `var dummyMembershipProvider = new SqlMembershipProvider();`
    `dummyMembershipProvider.ChangePassword("userName", "oldPassword", "newPassword");`
*   Ctrl + 左键单击（转到定义）`ChangePassword`
*   这将开始你的兔子窝之旅......它应该看起来像这样：
    `SqlMembershipProvider.ChangePassword`
    `SqlMembershipProvider.EncodePassword`
    `MembershipProvider.EncryptPassword`
    `IMembershipAdapter.EncryptOrDecryptData`
    `MembershipAdapter.EncryptOrDecryptData`
    `MachineKeySection.EncryptOrDecryptData`
*   购买 ReSharper，因为您意识到没有它就无法生存

无论如何，这是 MachineKeySection.EncryptOrDecryptData：

```
public sealed class MachineKeySection : ConfigurationSection
{
    internal static byte[] EncryptOrDecryptData(bool fEncrypt, byte[] buf, byte[] modifier, int start, int length,
                                                bool useValidationSymAlgo, bool useLegacyMode, IVType ivType)
    {
        EnsureConfig(); 

        if (useLegacyMode) 
            useLegacyMode = _UsingCustomEncryption; // only use legacy mode for custom algorithms 

        System.IO.MemoryStream ms = new System.IO.MemoryStream(); 
        ICryptoTransform oDesEnc = GetCryptoTransform(fEncrypt, useValidationSymAlgo, useLegacyMode);
        CryptoStream cs = new CryptoStream(ms, oDesEnc, CryptoStreamMode.Write);

        // DevDiv Bugs 137864: Add Random or Hashed IV to beginning of data to be encrypted. 
        // IVType.None is used by MembershipProvider which requires compatibility even in SP2 mode.
        bool createIV = ((ivType != IVType.None) && (CompatMode > MachineKeyCompatibilityMode.Framework20SP1)); 

        if (fEncrypt && createIV)
        { 
            byte[]  iv       = null;
            int     ivLength = (useValidationSymAlgo ? _IVLengthValidation : _IVLengthDecryption);
            switch (ivType)
            { 
            case IVType.Hash:
                iv = GetIVHash(buf, ivLength); 
                break; 
            case IVType.Random:
                iv = new byte[ivLength]; 
                RandomNumberGenerator.GetBytes(iv);
                break;
            }
            Debug.Assert(iv != null, "Invalid value for IVType: " + ivType.ToString("G")); 
            cs.Write(iv, 0, iv.Length);
        } 

        cs.Write(buf, start, length);
        if (fEncrypt && modifier != null) 
        {
            cs.Write(modifier, 0, modifier.Length);
        }

        cs.FlushFinalBlock();
        byte[] paddedData = ms.ToArray(); 
        byte[] bData; 
        cs.Close();
        ReturnCryptoTransform(fEncrypt, oDesEnc, useValidationSymAlgo, useLegacyMode); 

        // DevDiv Bugs 137864: Strip Random or Hashed IV from beginning of unencrypted data
        if (!fEncrypt && createIV)
        { 
            // strip off the first bytes that were either random bits or a hash of the original data
            // either way it is always equal to the key length 
            int ivLength = (useValidationSymAlgo ? _IVLengthValidation : _IVLengthDecryption); 
            int bDataLength = paddedData.Length - ivLength;

            // valid if the data is long enough to have included the padding
            if (bDataLength >= 0)
            {
                bData = new byte[bDataLength]; 
                // copy from the padded data to non-padded buffer bData.
                // dont bother with copy if the data is entirely the padding 
                if (bDataLength > 0) 
                {
                    Buffer.BlockCopy(paddedData, ivLength, bData, 0, bDataLength); 
                }
            }
            else
            { 
                // data is not padded because it is not long enough
                bData = paddedData; 
            } 
        }
        else 
        {
            bData = paddedData;
        }

        if (!fEncrypt && modifier != null && modifier.Length > 0)
        { 
            for(int iter=0; iter<modifier.Length; iter++) 
                if (bData[bData.Length - modifier.Length + iter] != modifier[iter])
                    throw new HttpException(SR.GetString(SR.Unable_to_validate_data)); 
            byte[] bData2 = new byte[bData.Length - modifier.Length];
            Buffer.BlockCopy(bData, 0, bData2, 0, bData2.Length);
            bData = bData2;
        } 
        return bData;
    } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:12:39.770

成员资格提供程序的源代码可从 Microsoft 获得。几年前，斯科特·格思里在博客上写过它。

[http://weblogs.asp.net/scottgu/archive/2006/04/13/442772.aspx](http://weblogs.asp.net/scottgu/archive/2006/04/13/442772.aspx)

# variables - PowerShell，如何增加变量名？

> ID：12433729
> 
> 赞同：1
> 
> 时间：2012-09-15T01:13:49.043
> 
> 标签：variables, powershell

我目前正在编写一个解析 XML 文件的 PowerShell 脚本，它会将一些解析后的值保存为变量以供以后使用。

例如，假设我的 XML 看起来像这样，

```
<head>
  <foo>
   <bar id="1" status="dead">
      <baz>
        <qux>Hello World 001</qux>
      </baz>
    </bar>
   <bar>
      <baz>
        <qux>Hello World 002</qux>
       </baz>
   </bar>
  </foo>

  <foo>
   <bar id="2" status="dead">
      <baz>
        <qux>Goodbye World 001</qux>
      </baz>
    </bar>
   <bar>
      <baz>
        <qux>Goodbye World 002</qux>
       </baz>
   </bar>
  </foo>
</head> 
```

目前，我的脚本看起来像这样，

```
[xml]$report = Get-Content ./helloworld.xml
$foo_sub_length = $report.head.foo.length - 1
$bar_sub_length = $report.head.foo[$foo_sub_length].bar.length - 1
$foo_looper = 0
$bar_looper = 0 
```

到目前为止，这部分工作，但是，因为我想从每个单独的 foo 中提取 id 号或 qux 字符串，我想做类似于以下的事情（伪代码）：

```
do {
    do {
      $foo($foo_looper)_id = $report.head.foo[$foo_looper].bar[$bar_looper].baz.id
        $foo($foo_looper)_bar($bar_looper)_qux = $report.head.foo[$foo_looper].bar[$bar_looper].baz.qux
      $bar_looper = $bar_looper + 1
    while $bar_looper <= $bar_sub_length
     }
  $foo_looper = $foo_looper + 1
while $foo_looper <= $foo_sub_length
} 
```

我意识到这可能没有任何意义，或者我可能不清楚，但我需要一些帮助。本质上，有没有办法增加一个变量，使其名称可以是，例如，$foo1、$foo2、$foo3 等，而不改变它的值？本质上，

```
> $bar = 1
> $foo($bar) = hello
> $bar + 1
> $foo($bar) = world
> $foo(1)
hello
> $foo(2)
world 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T01:27:15.000

使用[新变量](http://technet.microsoft.com/en-us/library/hh849913.aspx)cmdlet。

例如

```
$bar = 1
New-Variable "foo$bar" "Hello,"
$bar = $bar + 1
New-Variable "foo$bar" "World!"
"$foo1 $foo2" 
```

应该给你

```
Hello, World! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T01:24:20.673

你想重命名一个变量？变量通过变量：驱动器公开为提供者。因此，您可以对变量使用 rename-item，就像文件一样。

```
ps> rename-item variable:var1 var2 
```

# asp.net-mvc - ASP.NET MVC 4 - 允许 URL 中的破折号/连字符

> ID：12433736
> 
> 赞同：4
> 
> 时间：2012-09-15T01:15:06.327
> 
> 标签：asp.net-mvc, url, hyphenation

我正在努力如何在我的 MVC 4 / ASP.NET 4.5 应用程序的 URL 中正确允许破折号/连字符...由于某种原因，MVC 将破折号转换为下划线，这不是我想要的。

在发布问题之前，我已经做了很多搜索，仍然找不到任何简单的解决方案。对于这样一个简单的配置，我发现的一切似乎都不合时宜。

基本上，我希望能够访问以下 URL：

www.mysite.com/dashes-in-url

例如，我创建了一个名为：

破折号-in-urlController.cs

控制器被命名为罚款，并允许控制器名称中的破折号。

但是，当我为上述控制器创建索引视图时，它创建的视图为：

文件夹：/Views/dashes_in_url

在该文件夹中有一个 Index.cshtml 文件 - 但它用下划线替换了我的破折号。

所以我必须访问网址：

www.mysite.com/dashes_in_url

用下划线代替 URL 中的破折号。

有谁知道任何优雅、简单的解决方案来实现我想要做的事情？

非常感谢您对此事的任何帮助，谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-08-03T11:54:23.303

我为这个问题开发了一个开源**NuGet 库**，它隐式地将 EveryMvc/Url 转换为 every-mvc/url。

虚线 URL 对 SEO 更友好且更易于阅读。（[更多关于我的博客文章](http://www.ata.io/lowercase-dashed-route/)）

NuGet 包：[https ://www.nuget.org/packages/LowercaseDashedRoute/](https://www.nuget.org/packages/LowercaseDashedRoute/)

要安装它，只需在 Visual Studio 中打开 NuGet 窗口，方法是右键单击项目并选择 NuGet 包管理器，然后在“在线”选项卡上键入“小写虚线”，它应该会弹出。

或者，您可以**在包管理器控制台中运行此代码：**

`Install-Package LowercaseDashedRoute`

之后，您应该打开 App_Start/RouteConfig.cs 并注释掉现有的 route.MapRoute(...) 调用并添加以下内容：

```
routes.Add(new LowercaseDashedRoute("{controller}/{action}/{id}",
  new RouteValueDictionary(
    new { controller = "Home", action = "Index", id = UrlParameter.Optional }),
    new DashedRouteHandler()
  )
); 
```

而已。所有的 url 都是小写、虚线和隐式转换，而无需您做任何其他事情。

开源项目网址：[https ://github.com/AtaS/lowercase-dashed-route](https://github.com/AtaS/lowercase-dashed-route)

# android - 具有多个线程的 onRetainNonConfigurationInstance？

> ID：12433738
> 
> 赞同：2
> 
> 时间：2012-09-15T01:15:43.523
> 
> 标签：android, multithreading, resume

我有关于在同一个活动中恢复多个线程：我的应用程序中有三个不同的线程，我称之为 AThread、BThread 和 CThread。

如果我的应用程序关闭并重新打开，我需要重新打开所有预览线程。我怎么能那样做？我想返回一个线程列表。这是一个不错的选择吗？就像是：

```
@Override
public Object onRetainNonConfigurationInstance() {
    return new ArrayList<Thread>(AThread, BThread, CThread);
} 
```

然后，在 onCreate 函数中，调用一个“for each”来验证所有线程。就像是

```
 @Override
    public void onCreate(Bundle savedInstanceState) {
(...)
        super.onCreate(savedInstanceState);
        ArrayList<Thread> allThreads = (ArrayList<Thread>) getLastNonConfigurationInstance();
        AThread = allThreads.get(0);
        BThread = allThreads.get(1);
        CThread = allThreads.get(2);
        if (AThread != null && AThread.isAlive()) {
            // TODO SOMETHING
        }
        if (BThread != null && BThread.isAlive()) {
            // TODO SOMETHING
        }
        if (CThread != null && CThread.isAlive()) {
            // TODO SOMETHING
        }
    } 
```

那是对的吗？有更好的主意吗？干杯 =)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T02:07:15.163

使用 a`Fragment`来托管您`Thread`的 s （或更优选地是 a ）`AsyncTask`并调用's方法。将在配置更改中保留，并且（及其s）不会与. 我相信这比使用.`setRetainInstance(true)``Fragment``onCreate``Fragment``Fragment``Thread``Activity``onRetainNonConfigurationInstance`

# xml - 在 xsd 中定义 complexType：Src-resolve：无法将名称“variable1”解析为 A(n)“类型定义”组件

> ID：12433742
> 
> 赞同：2
> 
> 时间：2012-09-15T01:16:27.060
> 
> 标签：xml, validation, xsd, complextype

我收到一个错误：

> Src-resolve：无法将名称“variable1”解析为 A(n)“类型定义”组件。

通过验证以下方案：

```
<?xml version="1.0" encoding="UTF-8"?>
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">

               ...

                            <xs:element name="variables" maxOccurs="1">
                            <xs:complexType>
                                <xs:annotation>
                                    <xs:documentation>AWK external variables (from bash)</xs:documentation>
                                </xs:annotation>
                                <xs:sequence>
                                    <xs:element name="variable" type="variable" minOccurs="1"/>
                                    <xs:complexType name="variable">
                                        <xs:sequence>
                                            <xs:element name="name" type="xs:string" minOccurs="1" maxOccurs="1"/>
                                            <xs:element name="value" type="xs:string" minOccurs="1" maxOccurs="1"/>
                                        </xs:sequence>
                                    </xs:complexType>
                                </xs:sequence>
                            </xs:complexType>
                        </xs:element>

             ...

</xs:schema> 
```

有什么问题？我想将全局复杂类型“ ”定义为此处描述 `variable`的“ ”：http: [//www.ibm.com/developerworks/library/xml-schema/#list9](http://www.ibm.com/developerworks/library/xml-schema/#list9)`BookType`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T13:05:07.450

只需将元素的内容`<xs:complexType name="variable">`从`xs:schema`.

类型是 XML Schema 中无法命名的事物之一，除非其父对象是`xs:schema`（或重新定义，但这是另一回事）。

# unity3d - Unity - 选择性碰撞 - 再次

> ID：12433744
> 
> 赞同：1
> 
> 时间：2012-09-15T01:16:44.860
> 
> 标签：unity3d, physics

我知道这个话题已经在这里讨论过很多次了。但我被困在这里。

我正在开发一个简单的游戏，其中堆放了一些刚体，而射弹旨在击中这些游戏对象。

但其中一些刚体是收藏品，如果被射弹击中，这些元素会给出分数。

我的问题是：我需要那些收藏品的行为就像其他刚体一样，但作为弹丸的触发器。

我该怎么做？

问候。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T22:50:15.633

我不是百分百确定我理解你想要什么，但这是我认为你需要做的。

在收藏品上设置一个名为“Collectible”的标签，然后在代码中编写以下内容

```
Void OnCollisionEnter(Collision other){
    if(other.tag == "Collectible"){
        CollectCollectible();
    }
} 
```

每当有东西与对象发生碰撞时，就会运行 OnCollisionEnter，检查标签远非最有效的方法，但它可能是最简单的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T13:36:40.877

我不确定我是否理解正确。将脚本附加到收藏品并让它实现`OnCollisionEnter`。如果您在设计时不知道哪些是收藏品，您可以在运行时通过`AddComponent <MyCollectibleScript> ()`.

另一种（相当肮脏的）方法是采用不同的物理材料，但这只是为了完整性。

# jquery - jquery复选框更改事件

> ID：12433748
> 
> 赞同：4
> 
> 时间：2012-09-15T01:17:11.103
> 
> 标签：jquery, checkbox

嗨，我想知道是否存在可以由其他代码而不是用户触发的复选框事件...

例如

[http://jsfiddle.net/DC3EH/](http://jsfiddle.net/DC3EH/)

对于“全选”复选框，它还应自动切换“选定”类以切换行的背景颜色。

我试过“改变”和“点击”，这只是由用户触发的。

我注释掉了一些代码......顺便说一句，我想要有很多复选框来切换某些类别的复选框，所以我想避免有很多“.closest('tr').addClass('selected');” 等等

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T02:53:06.627

它似乎完美地工作：

[http://jsfiddle.net/DC3EH/20/](http://jsfiddle.net/DC3EH/20/)

我用过 .change()

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T01:33:18.783

我不确定这是您需要的，但我认为`<tr>`必须通过选中“全选”复选框将所有内容更改为选中。试试这个[http://jsfiddle.net/DC3EH/5/](http://jsfiddle.net/DC3EH/5/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-15T01:40:17.823

您是否尝试过触发点击事件？

```
.trigger("click") // for each checkbox 
```

示例：http: [//jsfiddle.net/ELTRd/1/](http://jsfiddle.net/ELTRd/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-15T01:52:32.237

如果绑定到 change 事件，则可以在 jquery 中触发 click 事件，该事件将检查复选框并依次触发 change 事件：

```
$(document).ready(function(){
    $('#check_all').click(function(event) {
        $('[name^="checkbox"]').trigger("click");
    });   

    $('[name^="checkbox"]').change(function(event) {
        console.log('a');
        if ($(this).is(":checked")) {
             $(this).closest('tr').addClass('selected');
        }
        else {
             $(this).closest('tr').removeClass('selected');
        }
    });    
});​ 
```

更新小提琴：http: [//jsfiddle.net/DC3EH/19/](http://jsfiddle.net/DC3EH/19/)

我切换到 change 事件而不是 click 事件的原因是 jquery 如何处理事件的触发。当您触发单击时，它将在更改复选框状态之前调用您的事件处理程序。绑定到更改可确保在状态更改之前不会调用您的事件。

# sql - SQL JOIN 多个表并获取 AVG

> ID：12433749
> 
> 赞同：2
> 
> 时间：2012-09-15T01:17:43.093
> 
> 标签：sql, join

我正在尝试在我的 sql 查询中执行几个 JOINS，但遇到了问题。我需要做的是从`poker_sites`表中选择所有字段，然后从中获取 2 个相关字段`networks`，如果可用，则从中获取平均评分`editor_content`

我遇到的问题是查询只返回一行，而应该至少有三行。

任何帮助将非常感激。

这是我的 SQL

```
SELECT AVG(editor_content.rating) AS rating, poker_sites.*,
networks.network_name, networks.network_icon FROM poker_sites
    LEFT JOIN networks
    ON (poker_sites.network_id=networks.network_id)
    LEFT JOIN editor_content
    ON (poker_sites.site_id=editor_content.assign_id)
    WHERE poker_sites.published=1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T01:21:47.070

如果要使用聚合函数（在本例中为 AVG）获得多个结果，则需要 GROUP BY。

```
 SELECT x.avgRating AS rating, poker_sites.*,
        networks.network_name, networks.network_icon 
    FROM poker_sites
    LEFT JOIN networks
        ON (poker_sites.network_id=networks.network_id)
    LEFT JOIN 
    (
        SELECT AVG(editor_content.rating) as avgRating, editor_content.assign_id
        FROM editor_content
        GROUP BY editor_content.assign_id
    ) x
        ON (poker_sites.site_id = x.assign_id)
    WHERE poker_sites.published=1 
```

# java - 在本机代码中处理信号 - JVM 在终端中使用 SIGSEGV 崩溃

> ID：12433751
> 
> 赞同：4
> 
> 时间：2012-09-15T01:18:03.600
> 
> 标签：java, linux, java-native-interface, signals, native

这是我的第一篇文章，所以请表现出一些理解。我有一些 java 代码和一些本机代码。

Java 部分目前还不是很有趣，所以我将跳到 C++ 部分：

```
//some more trivial includes
#include <signal.h>

//these are global variables
jclass GLOBAL_CLASS;
JNIEnv * GLOBAL_ENV;
jobject GLOBAL_OBJECT;
jmethodID METHOD_ID;

void sigproc(int signo)
{
    if (signo == SIGINT)
{
        signal(SIGINT, sigproc);
        //if Ctrl-c is pressed I want to call a method within my java class
        //since I can pass only int to this function
        //I've decided to use global variables
        GLOBAL_ENV->CallVoidMethod(GLOBAL_OBJECT, METHOD_ID);
        exit(0);
    }
}

JNIEXPORT void JNICALL Java_intern_Work_readFromFile
(JNIEnv *env, jobject obj, jobjectArray arr)
{

/*define a signal trap! */
signal(SIGINT, sigproc);
//sigproc(SIGINT);
/*initialize the global variables */
GLOBAL_ENV = env;
GLOBAL_OBJECT = obj;
GLOBAL_CLASS = env->GetObjectClass(obj);
//method id is the same so it's better to cache it
//at the beginning
jmethodID mid = env->GetMethodID(GLOBAL_CLASS,
                                      "nativeListener", 
                                      "(Ljava/lang/String;)V");
METHOD_ID = GLOBAL_ENV->GetMethodID(GLOBAL_CLASS,
                    "closeEverything", "()V");
    //let's say I have a while(true) block just below
    //and some more work is done.
} 
```

这个函数在我的 MainClass 开始时触发。如果我删除程序可以正常运行

```
GLOBAL_ENV->CallVoidMethod(GLOBAL_OBJECT, METHOD_ID); 
```

但问题是我需要它，因为我计划释放一些动态分配的内存+我需要调用我的类的这个函数。（换句话说......当我在终端按 ctrl-c 时，它说 JVM cheshes 与 SIGSEGV）

似乎我实际上并不了解从内核传递信号时到底发生了什么。我的全局变量 GLOBAL_ENV 仍然是我可以使用的正确指针吗？

谁能告诉我一个优雅的方式来解决我的问题？或者也欢迎任何指导！任何解释......任何东西。提前致谢！

这是 JVM 崩溃代码的示例：

```
A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007f9974cfc021, pid=7099, tid=140297087112960
#
# JRE version: 6.0_24-b24
# Java VM: OpenJDK 64-Bit Server VM (20.0-b12 mixed mode linux-amd64 compressed oops)
# Derivative: IcedTea6 1.11.4
# Distribution: Ubuntu 12.04 LTS, package 6b24-1.11.4-1ubuntu0.12.04.1
# Problematic frame:
# V  [libjvm.so+0x617021]  methodOopDesc::result_type() const+0x31 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T03:26:20.837

你的问题是这`SIGINT`是一个*异步信号*；它可以发生在任何两个机器指令之间，除非被阻塞。

这意味着从信号处理程序中调用除*异步安全函数*之外的任何东西都是不安全的（并且，如果您想要可移植，则除了设置`sig_atomic_t`变量之外不应该做任何事情）。JVM 肯定不能算作异步安全的。最有可能的是，您在一些重要代码的中间中断了 JVM，并且您的方法调用正在破坏 JVM 状态。

The approach usually used for handling `SIGINT` is to have a loop somewhere which checks a flag variable (of type `sig_atomic_t`). When you get a `SIGINT`, set the flag and return. The loop will come around and execute the rest of the handler in a safe, synchronous fashion.

In your case, you can just spawn off a Java thread which periodically calls a `checkForInterrupt` function that checks the aforementioned flag variable. `checkForInterrupt` returns the current flag status, and your thread can then choose to act on it.

The other option is to use a function like `pause`, `sigwait` or `sigsuspend` to suspend a thread until a signal is received. The thread then wakes up and processes the signal synchronously.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T02:14:11.447

看看 [http://javajiggle.com/2008/01/06/if-jni-based-application-is-crashing-check-signal-handling/](http://javajiggle.com/2008/01/06/if-jni-based-application-is-crashing-check-signal-handling/) 似乎这可能是您描述的问题。

编辑：该链接是旧的，这是其中的信息：

[http://docs.oracle.com/javase/7/docs/technotes/guides/vm/signal-chaining.html](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/signal-chaining.html)

> 要使用 libjsig.so，请将其与创建/嵌入 HotSpot VM 的应用程序链接，例如：
> 
> cc -L -ljsig -ljvm java_application.c
> 
> 或使用 LD_PRELOAD 环境变量，例如：
> 
> 导出 LD_PRELOAD=/libjsig.so; java_application (ksh)
> 
> setenv LD_PRELOAD /libjsig.so; java_application (csh)
> 
> 插入的 signal()/sigset()/sigaction() 返回保存的信号处理程序，而不是操作系统看到的 Java HotSpot VM 安装的信号处理程序。
> 
> 引入了信号链工具以解决请求增强号 4381843。

# php - 如何忽略 Doctrine/Mongo QueryBuilder 搜索中的搜索字段？

> ID：12433754
> 
> 赞同：0
> 
> 时间：2012-09-15T01:18:27.693
> 
> 标签：php, mongodb, symfony, doctrine-orm

我有一个用于搜索的 Mongo ODM 查询，其中一个字段（属性类型）具有“全部”值，因此搜索应忽略其余值。

```
$query = $dm->createQueryBuilder('SomeBundle:Listing')
     ->select('id', 'title','saleOrRent')
     ->field('residentialOrCommercial')->equals($residentialOrCommercial)
     ->field('propertyType')->equals($propertyType)
     ->getQuery(); 
```

我可以进行精确的文本匹配，但是当有人在 propertyType 上选择“全部”时，我如何在上面的查询中考虑？我的意思是当有人选择“全部”时，我希望查询完全忽略“propertyType”字段并带回所有值。

我知道我不是很清楚，但我正在努力做到。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T06:59:03.613

做就是了：

```
$qb = $dm->createQueryBuilder('SomeBundle:Listing')
     ->select('id', 'title','saleOrRent')
     ->field('residentialOrCommercial')->equals($residentialOrCommercial);

if ($propertyType != 'All') {
     $qb->field('propertyType')->equals($propertyType);
}

$query = $qb->getQuery(); 
```

# jquery - jQuery Validate onclick: false 不适用于复选框或选择

> ID：12433756
> 
> 赞同：4
> 
> 时间：2012-09-15T01:19:02.993
> 
> 标签：jquery, validation, jquery-plugins, jquery-validate

我正在尝试禁用验证，直到发生错误后提交。onfocusout 处理程序工作正常，但 onclick 不适用于复选框或选择元素。

我写了以下内容作为一个简单的例子。如果您提交空白表格，然后更正复选框并选择，则它们不应立即验证。您将看到文本输入正常工作。

无论 onclick 处理程序如何，选择似乎有时都有效。它确实在 safari 中验证了 onclick，但在 chrome 中没有。

小提琴：http: [//jsfiddle.net/ebMdq/6/](http://jsfiddle.net/ebMdq/6/)

```
<form id="myForm" action="">
Name: <input type="text" name="fname" /><br />
Do you Rawk? <input type="checkbox" name="rock" /><br /> 
choose color: <select id="color" name="color" class="required">
<option value="">Choose One</option>
<option value="blue">blue</option>
<option value="blue">red</option>
</select><br />
<input type="submit" />
</form>​

$(function () {
var validator = $("#myForm").validate({ 
             onfocusout: false,
             onkeyup: false,
             onlclick: false,
             rules: { 
                 fname: "required", 
                 rock: "required",
                 color: "required"
                }, 
             messages: { 
                 fname: "Enter your firstname", 
                 rock: "you know you do",
                 color: "pick one!",
             }, 
         });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T01:27:25.557

选择、单选和复选框在不同浏览器中的事件行为不一致。

change 或 onchange 事件用于单选/复选框。

# ruby-on-rails - 模型外键验证

> ID：12433758
> 
> 赞同：4
> 
> 时间：2012-09-15T01:19:13.050
> 
> 标签：ruby-on-rails, validation, model

我有两个模型：客户和发票。每个客户可以有很多张发票，每张发票只属于一个客户。如果客户被删除，与他相关的发票也应该被删除。

这一切都是通过以下代码完成的：

```
#### Invoice class
class Invoice < ActiveRecord::Base
  attr_accessible :amount, :body, :client_id, :filename, :subject

  validates :amount, :body, :client_id, :filename, :subject, :presence => true
  validates :client_id, :numericality => { :only_integer => true, :greater_than_or_equal_to => 0 }

  belongs_to :client
end

#### Client class
class Client < ActiveRecord::Base
  attr_accessible :city, :country, :name, :street, :zip

  validates :city, :country, :name, :street, :zip, :presence => true
  validates :zip, :numericality => { :only_integer => true, :greater_than_or_equal_to => 10000, :less_than_or_equal_to => 99999 }

  has_many :invoices, dependent: :destroy
end 
```

这是我到目前为止所构建的 - 但我想知道：我如何验证当用户创建新发票时，客户端表中的客户端 ID 确实存在，如果不存在，则显示相应的错误消息？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T01:48:25.793

对于外键 (FK) 约束，我建议您在数据库中执行此操作。Rails 本身没有对此的内置支持。如果您确实想检查 Ruby/Rails 中的外键是否存在，那会给应用程序增加不必要的负载。

这里有几个链接可能会有所帮助：

[你应该在 Rails 中使用外键约束](http://blog.weiskotten.com/2008/01/you-should-use-foreign-key-constraints-in-rails.html)

[在 Rails 中支持外键约束](https://stackoverflow.com/questions/320194/support-for-foreign-key-constraint-in-rails)

[在 Rails 迁移中添加外键约束](http://complicated-simplicity.com/2009/06/fk-constraints/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-01-29T21:59:25.243

Slightly updated answer; in Rails 4.2, you can make use of the new `required` option on singular associations.

```
class Invoice < ActiveRecord::Base
  belongs_to :client, required: true
end 
```

Rails 4.2 also supports this on has_one associations:

```
has_one :foo, required: true 
```

*Here is the PR: [https://github.com/rails/rails/pull/16056](https://github.com/rails/rails/pull/16056)*

# mysql - MySQL 日期显示为 0000-00-00 windows application .net

> ID：12433777
> 
> 赞同：-3
> 
> 时间：2012-09-15T01:23:47.527
> 
> 标签：mysql, vb.net

我到数据库的连接字符串有`Allow Zero Datetime=True;`整个程序运行良好，唯一的问题是日期没有。

我用一个访问数据库测试了同一个程序，它完美地工作。此问题仅发生在我的项目所需的 MySQL 数据库上。

这是一个插入语句，我在历史表下只有我的数据库

```
SqlVentaCasas = "INSERT INTO VentaCasasHistory (ID, Direccion, Estatus, Precio, " & _
                            "NumeroDias, FechaHoy, Agente, Compania, Unidad, Ciudad ) VALUES ('" & _
                            AddIDCasas2 & "','" & AddDireccionCasas2 & "','" & AddEstatusCasas2 & "'," & AddPrecioCasas2 & ", " & NumeroDiasCasas2 & " ,'" & _
                            Date.Today & "','" & AgenteNameCasas2 & "','" & AgenteCompaniaCasas2 & "', '" & AddUnidadCasas2 & "', '" & AddCiudadCasas2 & "' );" 
```

日期在我的 .net windows 应用程序中显示为 0000-00-00。我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T18:39:04.673

尝试更改`Date.Today`为`Date.Today.ToString("yyyy-MM-dd")`. 我相信默认的日期格式是`MM/dd/yyyy`没有`Date.Today`任何 MySQL 在这种情况下可能不喜欢的格式字符串。

# jquery - 选择多个 用 jQuery

> ID：12433780
> 
> 赞同：4
> 
> 时间：2012-09-15T01:25:02.300
> 
> 标签：jquery, html, dom

这个问题询问如何获取所有选择`<options>`的`<select>`元素并在逗号分隔的列表中返回它们的值。 [JQuery - 多选选项](https://stackoverflow.com/questions/2290181/jquery-multiple-select-options)

我想做与这个问题相反的事情；我有一个`<select>`标签的逗号分隔值列表，并想**使用 jQuery**`<option>`选择每个值在逗号分隔列表中的值。

 ****示例数据：**

```
<script type="text/javascript">
var data = "0a,0d,0f,0g";
</script>
<select id="ps-type" name="ps-type" multiple="multiple" size="5">
    <option value="0a">Residential - Wall Insulation</option>
    <option value="0b">Residential - Attic /Crawl Space Insulation</option>
    <option value="0c">Residential - Foundation Insulation</option>
    <option value="0d">Residential - Exterior Roof System</option>
    <option value="0e">Commercial - Wall Insulation</option>
    <option value="0f">Commercial - Air Barrier System (Walltite)</option>
    <option value="0g">Commercial - Roof System</option>
</select> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-15T01:28:19.187

[`.val()`](http://api.jquery.com/val/#val2)还接受一个值数组作为参数。因此，要选择多个值，只需使用 将逗号分隔的值列表转换为数组，`split(",")`然后将其传递给`.val()`：

```
var data = "0a,0d,0f,0g";
$("#ps-type").val(data.split(",")); 
```

**[演示](http://jsfiddle.net/hxfBZ/)**。**

# python - 在 Python 中编写一个比较两个数字的程序

> ID：12433782
> 
> 赞同：-1
> 
> 时间：2012-09-15T01:25:21.103
> 
> 标签：python

我是 python 新手，我不知道如何解决这个问题。如果我想比较两个整数以查看它们是否相等，我将如何设置它？例如，a 输入一个数字，b 输入一个数字，看看它们是否相等？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T01:26:52.610

```
a=20
b=10
if a==b:
 print "equal"
else:
 print "unequal" 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T01:32:02.327

```
a = input("Enter the first number: ")
b = input("Enter the second number: ")
# if a is b: - Compares id's, and can cause inconsistencies. Use == instead.
if a == b:
  print "Both inputs are equal"
else:
  print "Your input is not equal." 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T01:27:05.650

```
def compare(a, b):
   return a == b 
```

您可以编写这样的函数并调用它，如下所示：

```
aNumber = 3
anotherNumber = 4
result = compare(aNumber, anotherNumber)
print(result) 
```

# c# - C# 从 Primera PTRobot SDK 的指针访问数组

> ID：12433784
> 
> 赞同：0
> 
> 时间：2012-09-15T01:26:31.833
> 
> 标签：c#, pointers

我正在尝试将 PTRobot API 集成到我的 C# .NET 程序中，但遇到了一个我无法弄清楚的问题。我正在尝试执行以下命令：

```
PTRobot_Initialize()
PTRobot_EnumRobots(HANDLE * phRobots, DWORD * pdwNumRobots)
PTRobot_GetRobotInfo(HANDLE hRobot, PTRobotInfo *pRobotInfo)
PTRobot_EnumDrives(HANDLE hRobot, HANDLE * phDrives, DWORD * pdwNumDrives)
PTRobot_GetDriveInfo(HANDLE hDrive, PTDriveInfo* pDrvInfo) 
```

这来自 API 文档。Primera 还围绕 DLL 为 C# 开发了一个 .NET 包装器。更新的功能是：

```
PTRobot_Initialize()
PTRobot_EnumRobots(ref UInt32 nRobots, ref UInt32 pnNumRobots)
PTRobot_GetRobotInfo(UInt32 nRobotID, [In, Out] RobotInfo myRobotInfo)
PTRobot_EnumDrives(UInt32 nRobotID, ref UInt32 nDriveIDs, ref UInt32 nNumDrives)
PTRobot_GetDriveInfo(UInt32 nDriveID, [In, Out] DriveInfo myDriveInfo) 
```

我正在尝试将 .NET 功能集成到我的程序中，但我遇到了问题。EnumRobots 的参数 nRobots“指向 HANDLE 数组以存储找到的机器人”，而 EnumDrives 参数 nDriveIDs “指向 DWORDS 数组以存储找到的驱动器”。我的问题是如何从这个 uint 中获取一个数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T16:38:11.360

找到了答案。对于所有想知道的人，您可以执行以下操作：

```
uint numRobots = 5;
uint numDrives = 5;
uint[] robotArray = new uint[numRobots];
uint[] driveArray = new uint[numDrives];

DriveInfo arr = new DriveInfo();
PTRobotReturn rtn;
RobotInfo rI = new RobotInfo();
rtn = PTRobot.Initialize();

rtn = PTRobot.EnumRobots(ref robotArray[0], ref numRobots);

rtn = PTRobot.GetRobotInfo(robotArray[0], ref rI);

rtn = PTRobot.EnumDrives(robotArray[0], ref driveArray[0], ref numDrives);

rtn = PTRobot.LoadDrive(robotArray[0], driveArray[0], PrimeraTechnology.DiscLocation.Right_Bin, PrimeraTechnology.ClearDrive.Yes); 
```

# sql - 列中的唯一值，但仅对每个关联的外键唯一

> ID：12433788
> 
> 赞同：1
> 
> 时间：2012-09-15T01:27:09.110
> 
> 标签：sql, sqlite

我为令人困惑的标题道歉，但我真的不知道如何用一句话来描述这个问题。

我有一个用于一般小费竞赛的 SQLite 数据库。对于不熟悉这个概念的人，人们会“提示”他们认为会在每轮体育比赛的每场比赛中获胜的人，并且在比赛结束时提示最正确的人获胜（奖品可能是金钱，骄傲， ETC）。AFL 在澳大利亚非常受欢迎。

基本结构是用户注册为所有者，然后他们可以创建任意数量的比赛，每个比赛都通过外键链接到他们。这是数据库模式的相关部分：

```
create table owner (
    owner_id INTEGER NOT NULL,
    owner_name VARCHAR NOT NULL,
    owner_nick VARCHAR UNIQUE NOT NULL,
    owner_email VARCHAR NOT NULL,
    owner_password VARCHAR NOT NULL,
    CONSTRAINT owner_pk PRIMARY KEY (owner_id)
);

create table comp (
    comp_id INTEGER NOT NULL,
    comp_owner_id INTEGER NOT NULL,
    comp_name VARCHAR UNIQUE NOT NULL,
    CONSTRAINT comp_pk PRIMARY KEY (comp_id),
    CONSTRAINT comp_owner_fk FOREIGN KEY (comp_owner_id) REFERENCES owner (owner_id) NOT DEFERRABLE
); 
```

问题的要点是：我想对 comp 表的 comp_name 字段强制执行唯一约束（如上所示），因为单个所有者不应该有两个或多个同名比赛。但是，完全有可能两个不同的所有者想要两个名称相同的不同比赛（例如，两个办公室为同一个体育联盟举办小费比赛）。是否可以使用 SQL 强制执行此操作，还是我需要在其他地方手动执行？

几点注意事项：

*   我正在使用 SQLite 3.6.20，它具有适当的外键约束执行
*   该数据库永远不会在生产级应用程序中使用。这是一个私人项目。
*   该数据库正在一个基于 Web 的 PHP 应用程序中使用。
*   如果这不能用 SQLite 实现，那么用 MySQL 能实现吗？

编辑：我觉得我应该指出，我知道 SQLite 对更改表的支持非常有限，删除数据库并重新开始是一个非常好的选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:41:27.027

`UNIQUE`只需在这两个字段上创建一个约束，如下所示：

```
create table comp (
    comp_id INTEGER NOT NULL,
    comp_owner_id INTEGER NOT NULL,
    comp_name VARCHAR NOT NULL,
    CONSTRAINT comp_unq UNIQUE (comp_owner_id, comp_name),
    CONSTRAINT comp_pk PRIMARY KEY (comp_id),
    CONSTRAINT comp_owner_fk FOREIGN KEY (comp_owner_id) REFERENCES owner (owner_id) NOT DEFERRABLE
); 
```

那应该做你想做的事。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T01:42:02.907

您可以使用以下语法创建复合 UNIQUE 约束：

```
create table comp (
    comp_id INTEGER NOT NULL,
    comp_owner_id INTEGER NOT NULL,
    comp_name VARCHAR,
    CONSTRAINT comp_pk PRIMARY KEY (comp_id),
    CONSTRAINT comp_unique UNIQUE (comp_owner_id, comp_name),
    CONSTRAINT comp_owner_fk FOREIGN KEY (comp_owner_id) REFERENCES owner (owner_id) NOT DEFERRABLE
); 
```

如果您担心将约束添加到已经存在的表中，您可以这样做：

```
 CREATE UNIQUE INDEX comp_unique (comp_owner_id, comp_name) ON comp 
```

此外，您可以考虑丢失 owner_id 列并简单地使用 owner_name 作为所有者表中的主键。同样，您可能不需要 comp_id，因为您在该表中有另一个候选键。

# database - MS Access：如何强制仅从两个不同的表中选择一个所有者

> ID：12433791
> 
> 赞同：1
> 
> 时间：2012-09-15T01:27:42.140
> 
> 标签：database, ms-access

我有 3 个标有产品、个人和公司的表。现在，产品由公司或个人拥有，而不是两者兼有，并且始终由其中一个拥有。我要问的问题是我应该怎么做？

我是否会有第四个标有所有者的表，该表具有 companyID、ProductID、IndividualID 并允许 companyID 或 IndividualID 为空值。但这似乎会创建很多空值，我仍然必须只强制执行一个所有者。在这种情况下，所有这三个属性都是指向各自表的外键。这似乎不是一个很好的方法，但我想不出更好的方法。还有另一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T01:38:57.933

您无法使用 SQL 声明性引用完整性来强制执行您正在寻找的那种规则。

考虑个人和公司是否真的是一种“类型”的东西，或者它们是否至少具有一组可以在单个表中表示的核心属性（列）（对于特殊列之间的链接表是不相同的）两种实体）。如果是这样，请重构您的数据库，使这些常见元素位于该表中，并使用该表中的 id 作为 Product 表中的所有者 id。

如果您认为个人和公司如此不同以至于不能将它们组合成一个表，您可以使用第四个表的方法，或者您可以在代码中强制执行这种关系。您还可以选择切换到支持存储过程和触发器的数据库引擎，并在触发器中强制执行关系，但会以性能为代价。

# ssh - Erlang 是否有权访问发送到 ssh:daemon 的公钥？

> ID：12433799
> 
> 赞同：3
> 
> 时间：2012-09-15T01:29:52.543
> 
> 标签：ssh, erlang

在使用带有自定义 shell 的 erlang 的 ssh:daemon 时，是否有一种方法可以访问从远程客户端发送的公钥？我想在稍后在 shell 中执行的命令中使用该密钥进行进一步的身份验证，但看不到方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T02:25:30.953

我相信 erlang 的**ssh**模块不会将原始公钥暴露给它的公共 API，但如果你真的需要它们，你可能可以成功地从[ssh_transport.erl](https://github.com/erlang/otp/blob/maint/lib/ssh/src/ssh_transport.erl)中挖掘出来，这几乎是无证的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-11-29T15:05:34.160

从 Erlang OTP 20 开始，有一个`key_cb`用于函数系列的文档选项`ssh:daemon()`，它允许传递处理密钥的函数。

# c++ - 返回堆栈变量

> ID：12433803
> 
> 赞同：-1
> 
> 时间：2012-09-15T01:30:34.103
> 
> 标签：c++, stack, return

我试图弄清楚如何调用返回堆栈类型变量的函数。这是我制作的一个非常简单的代码块，用于查看这种方法是否有效，但它没有：

```
#include <iostream>
#include <string>
#include <stdio.h>
#include <stdlib.h>
#include <stack>

stack<int> ReturnStack(stack<int>);

int main () 
{
    stack<int> z;
    stack<int> x;
    z.push(1);
    z.push(2);
    z.push(3);
    x = ReturnStack(z); 
}

stack<int> ReturnStack(stack<int> z)
{
    return z;
} 
```

它抛出了一堆错误，并拒绝工作。我在这里做错了什么？如何成功调用返回堆栈的东西？谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T01:39:23.037

`stack`位于`std`命名空间中。如果（作为一种快速的创可贴，而不是真正的修复）你`using std::stack;`在声明之前放置`ReturnStack`，它编译没有任何问题。

# c++ - 如何让 wxWidgets 控件接受中键点击？

> ID：12433804
> 
> 赞同：0
> 
> 时间：2012-09-15T01:30:33.597
> 
> 标签：c++, mouseevent, wxwidgets

我有一个场景，我希望一些 wxWidgets 控件响应鼠标中键单击，其行为方式与通常的左键单击完全相同，除了我应该能够告诉它是中键单击并执行在我的应用程序中有所不同。

具体来说，我正在使用按钮和滑块，并且希望按钮可以按下并且滑块可以使用中间按钮拖动。我在 Windows 中（这是我唯一关心的平台），以防万一。

在浏览了 wx 文档之后，我没有找到任何方法来设置控件侦听的鼠标按钮。所以，我的第一个想法是编写一个事件处理程序，它捕获中键事件，将它们转换为相应的左键事件，并告诉 wx 处理它们：

```
void OnMouseEvent(wxMouseEvent & wxevent)
{
    wxMouseEvent wxeventTranslated = wxevent;

    if (wxevent.MiddleDown())
    {
        wxeventTranslated.SetEventType(wxEVT_LEFT_DOWN);
    }
    else if (wxevent.MiddleUp())
    {
        wxeventTranslated.SetEventType(wxEVT_LEFT_UP);
    }
    else
    {
        return;
    }

    m_pWxbutton->ProcessWindowEvent(wxeventTranslated);
} 
```

（这里`m_pWxbutton`是`wxButton`注册事件的地方）。它不起作用：调用了鼠标事件处理程序，但我从未收到`wxEVT_COMMAND_BUTTON_CLICKED`事件，按钮也没有在 GUI 中进入“按下”视觉状态。我还尝试了一个版本，我更改了传入事件的事件类型，然后调用`Skip()`了 ，但结果相同。

诚然，对于按钮来说，自己检测点击很容易，但我希望它也适用于滑块，我不喜欢为这些重新实现所有鼠标逻辑的想法。:)

如何翻译鼠标事件并让它们表现得像本机 GUI 事件？或者，我应该尝试一种完全不同的方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T10:57:14.230

你不能像这样修改标准控件的行为——这就是为什么它们是*标准*的。当然，您可以使用自定义的类似按钮的控件以任何您想要的方式处理鼠标，但是没有可移植的方式来修改标准控件以执行您想要的操作，充其量您可以使用特定于平台的代码并且在某些平台上这可能是完全不可能的。

# hibernate - 无法使用 JPA EntityManager

> ID：12433805
> 
> 赞同：2
> 
> 时间：2012-09-15T01:30:41.700
> 
> 标签：hibernate, jpa, persistence, entitymanager, persistence.xml

我想用Java实现一个能够与数据库交互的程序。我已经使用 EJB 完成了类似的操作，但这次我需要它能够在没有应用程序服务器的情况下工作。到目前为止我所做的是（使用 Eclipse）：

*   创建数据库连接
*   创建 JPA 项目
*   创建实体（正确映射）
*   设置`persistence.xml`（在`META-INF`文件夹中）
*   导入`MySQL JDBC Driver`库和`persistence-api-1.0.2.jar`

这是我的`persistence.xml`：

```
<?xml version="1.0" encoding="UTF-8"?>
<persistence version="2.0" xmlns="http://java.sun.com/xml/ns/persistence" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://java.sun.com/xml/ns/persistence http://java.sun.com/xml/ns/persistence/persistence_2_0.xsd">
    <persistence-unit name="top" transaction-type="RESOURCE_LOCAL">
        <provider>org.hibernate.ejb.HibernatePersistence</provider>
        <class>database.Match</class>
        <class>database.Player</class>
        <class>database.Tournament</class>
        <properties>
            <property name="hibernate.connection.provider_class" value="org.hibernate.connection.DriverManagerConnectionProvider"/>
            <property name="hibernate.connection.url" value="jdbc:mysql://localhost:3306/top"/>
            <property name="hibernate.connection.driver_class" value="org.hsqldb.jdbcDriver"/>
            <property name="hibernate.dialect" value="org.hibernate.dialect.HSQLDialect"/>
            <property name="hibernate.connection.username" value="root"/>
            <property name="hibernate.connection.password" value="root"/>
            <property name="hibernate.show_sql" value="true"/>
            <property name="hibernate.hbm2ddl.auto" value="update"/>
        </properties>
    </persistence-unit>
</persistence> 
```

这是我尝试使用的方法`EntityManager`：

```
private static EntityManagerFactory factory;
private EntityManager entityManager;

public DBManager() {
    factory = Persistence.createEntityManagerFactory("top");
    entityManager = factory.createEntityManager();
}

public Player createPlayer(String name, int age, Court favouriteCourt, int currentRanking) {
    Player player = new Player();
    player.setAge(age);
    player.setCurrentRanking(currentRanking);
    player.setFavouriteCourt(favouriteCourt);
    player.setName(name);
    entityManager.persist(player);
    return player;
} 
```

我的`Main`班级只是简单地创建一个新的`DBManager`并尝试使用`createPlayer`.

我得到以下异常：

```
 Exception in thread "main" javax.persistence.PersistenceException: No resource files named META-INF/services/javax.persistence.spi.PersistenceProvider were found. Please make sure that the persistence provider jar file is in your classpath.
    at javax.persistence.Persistence.findAllProviders(Persistence.java:167)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:103)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)
    at database.DBManager.<init>(DBManager.java:17)
    at database.Main.main(Main.java:8) 
```

添加`hibernate-entitymanager-3.3.2.GA.jar`我得到：

```
 Exception in thread "main" javax.persistence.PersistenceException: No Persistence provider for EntityManager named top: Provider named org.hibernate.ejb.HibernatePersistence threw unexpected exception at create EntityManagerFactory: 
java.lang.NoClassDefFoundError
java.lang.NoClassDefFoundError: org/hibernate/MappingException
    at org.hibernate.ejb.HibernatePersistence.createEntityManagerFactory(HibernatePersistence.java:124)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:110)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)
    at database.DBManager.<init>(DBManager.java:17)
    at database.Main.main(Main.java:8)
Caused by: java.lang.ClassNotFoundException: org.hibernate.MappingException
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.net.URLClassLoader$1.run(Unknown Source)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    at sun.misc.Launcher$AppClassLoader.loadClass(Unknown Source)
    at java.lang.ClassLoader.loadClass(Unknown Source)
    ... 5 more

    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:154)
    at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:83)
    at database.DBManager.<init>(DBManager.java:17)
    at database.Main.main(Main.java:8) 
```

我错过了什么？我需要导入其他罐子吗？或者在描述符中设置其他内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T01:35:35.180

您缺少的是 hibernate-entitymanager 仅包含包装休眠核心以将其公开为 JPA 实体管理器的包装器。因此，如果您只添加了您将不会获得实际的休眠类，因此找不到您的类。

[如果您在hibernate 主页上](http://www.hibernate.org/)查看组件如何绑定在一起的图片，您会看到实体管理器构建在 hibernate 核心和 hibernate 注释之上。您需要为这两个及其所有依赖项添加所需的 jar。

[文档](http://docs.jboss.org/hibernate/orm/4.1/quickstart/en-US/html_single/#hibernate-gsg-setup-releaseBundle)描述了 hibernate 发行版中的各种 jar 文件夹，以及您需要哪些 jar 集以用于何种用途。

# c# - 从 FrameworkElementFactory 获取值

> ID：12433806
> 
> 赞同：2
> 
> 时间：2012-09-15T01:30:45.743
> 
> 标签：c#, wpf, listview, gridviewcolumn, frameworkelementfactory

我有一个带有一个 GridViewColumn 的列表视图

```
 GridViewColumn gvc = new GridViewColumn();

        DataTemplate dt = new DataTemplate();
        FrameworkElementFactory ch = new FrameworkElementFactory(typeof(CheckBox));

        Binding bind= new Binding("Empty");
        ch.SetBinding(CheckBox.IsCheckedProperty, bind);

        dt.VisualTree = ch;
        gvc.CellTemplate = dt;
        (lv.View as GridView).Columns.Add(gvc); 
```

稍后当我想检索复选框是否被选中时，我正面临**FrameworkElementFactory**，因为它没有 GetValue 方法，不知道如何将其转换为复选框，所以我如何从**FrameworkElementFactory**获取 IsChecked 属性，知道能够为我的列表视图的任何元素访问它

```
 ...
var mycheckboxFEF = template.VisualTree.FirstChild;// FirstChild is my FrameWorkElementFactory checkbox
bool isempty= (......) ???? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T15:59:54.880

我确实通过这个例子为您的问题提供了解决方案。
这应该通过选择一个项目并按下按钮
XAML 来工作：

```
<Button Margin="0,12,401,276" Click="Button_Click">Button</Button>
        <ListView x:Name="yourListView" ItemsSource="{Binding Things}" SelectedItem="{Binding SelectedThing}" Margin="0,41,0,0">
            <ListView.View>
                <GridView>
                    <GridView.Columns>
                        <GridViewColumn Header="Check"  Width="250">
                            <GridViewColumn.CellTemplate>
                                <DataTemplate>
                                    <CheckBox x:Name="myCBox" Content="{Binding ThingName}"></CheckBox>
                                </DataTemplate>
                            </GridViewColumn.CellTemplate>
                        </GridViewColumn>
                    </GridView.Columns>
                </GridView>
            </ListView.View>
        </ListView> 
```

后面的代码：

```
 /// <summary>
    /// Interaction logic for MainWindow.xaml
    /// </summary>
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();

            Things = new List<Thing>
                         {
                             new Thing {ThingName = "t1"},
                             new Thing {ThingName = "t2"},
                             new Thing {ThingName = "t4"},
                             new Thing {ThingName = "t3"},
                         };
            DataContext = this;

        }

        public List<Thing> Things { get; set; }
        public Thing SelectedThing { get; set; }

        private void Button_Click(object sender, RoutedEventArgs e)
        {
            var yourListViewItem = (ListViewItem)yourListView.ItemContainerGenerator.ContainerFromItem(yourListView.SelectedItem);
            CheckBox cb = FindByName("myCBox", yourListViewItem) as CheckBox;
            MessageBox.Show(cb.Content + " IsChecked :" + cb.IsChecked);
        }
        private FrameworkElement FindByName(string name, FrameworkElement root)
        {
            Stack<FrameworkElement> tree = new Stack<FrameworkElement>();
            tree.Push(root);

            while (tree.Count > 0)
            {
                FrameworkElement current = tree.Pop();
                if (current.Name == name)
                    return current;

                int count = VisualTreeHelper.GetChildrenCount(current);
                for (int i = 0; i < count; ++i)
                {
                    DependencyObject child = VisualTreeHelper.GetChild(current, i);
                    if (child is FrameworkElement)
                        tree.Push((FrameworkElement)child);
                }
            }

            return null;
        }
    }

    public class Thing
    {
        public string ThingName { get; set; }

    } 
```

希望能帮助到你

# android - 在自定义 SurfaceView (Android) 中调整画布的大小/位置

> ID：12433811
> 
> 赞同：0
> 
> 时间：2012-09-15T01:31:33.260
> 
> 标签：android, surfaceview, android-canvas

我会尽量缩短我的问题：

我正在尝试制作一个小游戏并获得一个继承 SurfaceView 的类，以及一个具有处理 SurfaceView 持有者的线程的类。在线程循环中，我锁定了从 Holder 获得的 Canvas，并在 SurfaceView 类中调用了 update() 和 draw() 方法。画布代表屏幕上的一切。现在这是我的问题：有没有办法调整画布的大小（可能像使用位图一样使用矩阵）然后定位它？

如果你想知道为什么，那是因为我正在工作的“目标屏幕”必须具有特定的比例，所以，根据实际的屏幕尺寸，我必须调整画布的大小并重新定位它。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T18:35:46.150

没关系，我只需要应用矩阵来缩放并转换到整个画布。

# ruby-on-rails - PostgreSQL 安装错误——无法分配内存

> ID：12433813
> 
> 赞同：16
> 
> 时间：2012-09-15T01:31:39.547
> 
> 标签：ruby-on-rails, postgresql, memory-management, heroku

我正在尝试从 sqlite3 切换到 PostgreSQL 以在 Rails 中进行开发，这样我就没有任何 heroku 问题。我遵循了关于 heroku 和链接到 Railscast 的建议，但是在 brew 安装 postgresql 后遇到了以下错误。

> 在 /usr/local/var/postgres/base/1 中创建 template1 数据库 ...
> 
> 致命：无法创建共享内存段：无法分配内存
> 
> 详细信息：失败的系统调用是 shmget(key=1, size=2072576, 03600)。
> 
> 提示：这个错误通常意味着 PostgreSQL 对共享内存段的请求超出了可用内存或交换空间，或者超出了内核的 SHMALL 参数。您可以减少请求大小或使用更大的 SHMALL 重新配置内核。要减少请求大小（当前为 2072576 字节），请减少 PostgreSQL 的共享内存使用量，可能通过减少 shared_buffers 或 max_connections。

我已经浏览了文档，但我对此很陌生，对内存和数据库的工作方式知之甚少，我认为这里的某个人可能比我能更好地为我指明正确的方向自己找。知道如何解决这个问题吗？我的电脑是新的而且比较花哨，如果它内存不足我会感到惊讶，所以我不知道减少“共享内存使用”是否是正确的想法（如果我完全了解发生了什么） .

编辑：应该早点提出来。这是导致错误的命令（构建数据库）：

```
initdb /usr/local/var/postgres -E utf8 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-15T01:39:20.587

从数据库路径来看，我猜你使用的是 Mac OS X。

由于大多数流行的 Linux 发行版都有一个位于 /var/lib 的数据库目录。

在谷歌上搜索后，我发现了这个： [Fixing the postgresql initdb fatal shared memory error on Leopard](http://willbryant.net/software/mac_os_x/postgres_initdb_fatal_shared_memory_error_on_leopard)

希望它有所帮助。

为了您的方便，我从上面的链接中复制了这些说明。

运行这些命令：

```
sudo sysctl -w kern.sysv.shmall=65536
sudo sysctl -w kern.sysv.shmmax=16777216 
```

或编辑 /etc/sysctl.conf 进行永久更改

```
kern.sysv.shmall=65536
kern.sysv.shmmax=16777216 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-29T16:04:50.127

您必须更改并重新启动：

```
sudo vim /etc/sysctl.conf 
```

对于 2 GB 的 mac os x

```
kern.sysv.shmall=393216
kern.sysv.shmmax=1610612736 
```

对于 4 GB 的 mac os x

```
kern.sysv.shmall=786432
kern.sysv.shmmax=3221225472 
```

对于 8 GB 的 mac os x

```
kern.sysv.shmall=786432 * 2
kern.sysv.shmmax=3221225472 * 2 
```

ETC ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-02T00:16:19.937

由于答案中的页面引用不存在，这里有更多关于如何在 Mac 上设置共享内存的详细信息。

确保您的系统配置为允许使用更大量的共享内存。请注意，这不会“保留”任何内存，因此可以安全地配置比您最初可能需要的值高得多的值。您可以通过编辑文件来做到这一点`/etc/sysctl.conf`- 例如

```
sudo nano /etc/sysctl.conf 
```

在具有 2GB RAM 的 MacBook Pro 上，示例`sysctl.conf`包含：

```
kern.sysv.shmmax=1610612736
kern.sysv.shmall=393216
kern.sysv.shmmin=1
kern.sysv.shmmni=32
kern.sysv.shmseg=8
kern.maxprocperuid=512
kern.maxproc=2048 
```

请注意 ( `kern.sysv.shmall * 4096`) 应大于或等于 `kern.sysv.shmmax`。`kern.sysv.shmmax`也必须是 的倍数`4096`。

编辑（或创建）文件后，重新启动。如果要检查内核当前使用的设置，可以使用 sysctl 实用程序：

```
sysctl -a 
```

享受！

# python - 线程和父级中的异常捕获

> ID：12433818
> 
> 赞同：0
> 
> 时间：2012-09-15T01:33:09.727
> 
> 标签：python

如何很好地捕获 Python 线程中的异常？

如果你有一个线程化的 python 应用程序`sys.excepthook`不会捕获子级的错误。

当孩子引发异常时，父母将继续运行而不会出现任何问题，从而使调试变得有点困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:33:09.727

```
import os
import sys
import signal
import string
import threading

# capture Exceptions
def except_catch(type, value, track, thread):
  import traceback

  rawreport = traceback.format_exception(type, value, track)
  report = "\n" . join(rawreport)

  errorlog = open("errors.log", "a")

  if thread != "":
    errorlog.write("Exception in thread: " + thread + "\n\n")

  errorlog.write(("%s\n" + "-" * 30 + "\n\n") % report)

  errorlog.close()
sys.excepthook = except_catch

# capture KeyboardInterrupt
def interrupt_catch(signal, frame):
  print ""
  os._exit(1)
signal.signal(signal.SIGINT, interrupt_catch)

# all your threaded code here
def whatever_threaded_function():
  try:
    a = 1 / 0

  except:
    exc_type, exc_value, exc_traceback = sys.exc_info()
    except_catch(exc_type.__name__, exc_value, exc_traceback, threading.current_thread().name)

threading.Thread(target=whatever_threaded_function).start() 
```

# android - 使用进度对话框时如何解决线程错误？

> ID：12433822
> 
> 赞同：0
> 
> 时间：2012-09-15T01:33:23.027
> 
> 标签：android, multithreading, view, nullpointerexception, progress-bar

我是 android 的菜鸟，试图学习如何正确实现进度对话框。我从一些在 OnCreate 期间填充列表视图之前查询和解析 twitter 结果的代码开始。这工作得很好。我想添加一个进度条，因为它需要几秒钟，但是自从我添加了进度条后，我的代码就停止了工作。我在解析过程中遇到空指针错误，并且我的应用程序由于错误说“只有创建视图层次结构的原始线程才能触及其视图”而崩溃。非常感谢任何解决此问题的帮助。

```
 public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    dialog = new ProgressDialog (MainActivity.this);
    dialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
    dialog.setMessage("Loading... please wait");
    dialog.setIndeterminate(false);
    dialog.setMax(100);
    dialog.setProgress(0);
    dialog.show();

    Runnable runnable = new Runnable() {
        @Override
        public void run() {

    tweets = new ArrayList<Tweet>();

    try {           
        JSONObject jArray = JSONfunctions.getJSONfromURL("http://search.twitter.com/search.json?q=gold%20silver%20news&rpp=15");
        JSONArray parsedTwitter = jArray.getJSONArray("results");       
        if(parsedTwitter.equals("") ){
            Toast.makeText(MainActivity.this, "No nearby locations", Toast.LENGTH_LONG).show();
        }else{
            for (int i = 0; i < parsedTwitter.length(); i++) {
            JSONObject parsedspecific = parsedTwitter.getJSONObject(i);             
        if (i == 0){                
            String from_user = parsedspecific.getString("from_user");
            String text = parsedspecific.getString("text"); 
            String profile_image_url = parsedspecific.getString("profile_image_url");  
            Tweet tweet0 = new Tweet(from_user, text, profile_image_url );
            tweets.add(tweet0);                 
            }
dialog.setProgress(50);
        if (i == 1){                
            String from_user = parsedspecific.getString("from_user");
            String text = parsedspecific.getString("text"); 
            String profile_image_url = parsedspecific.getString("profile_image_url");  
            Tweet tweet1 = new Tweet(from_user, text, profile_image_url );
            tweets.add(tweet1);                 
            }

      }
            }

    } catch (Exception e) {
        Log.e("log_tag", "Error parsing data "+ e.toString());
    }

    ListView listView = (ListView) findViewById(R.id.ListViewId);      
    listView.setAdapter(new UserItemAdapter(MainActivity.this, R.layout.listitem, tweets));

    dialog.setProgress(100);
    dialog.dismiss();
        }
    };

    new Thread(runnable).start();

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:57:55.027

这意味着 Dialog 位于不同的线程中，您需要一个处理程序来处理它，尝试在 OnCreate() 方法之前添加下一行：

```
Handler handler; 
```

然后在 OnCreate 方法上，实例化处理程序，使其与对话框在同一个线程中

```
handler = new Handler(); 
```

最后，要从不同的线程更新对话框，您需要使用如下处理程序：

```
handler.post(new Runnable(){
public void run(){
//Do here whatever you want to do to the dialog
dialog.setProgress("whatever integer");
}
}); 
```

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T01:50:15.607

在 Android 中，您应该只执行 中的那种 UI 操作`Main Thread`，这是默认线程。否则，您将收到您现在遇到的错误。尝试学习如何在单独的线程中使用`Handler`或`AsyncTask`进行长进度操作。

# iphone - Dropbox 如何在后台同步照片并获得苹果的批准？

> ID：12433824
> 
> 赞同：4
> 
> 时间：2012-09-15T01:34:25.077
> 
> 标签：iphone, ios, dropbox

Dropbox 的最新更新允许将应用程序置于后台后同步图片。苹果文档只允许某些后台进程。

音频、位置、voip、报亭内容、外部附件、蓝牙中央

Dropbox 不属于这些类别中的任何一个。

[https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html](https://developer.apple.com/library/ios/#documentation/iphone/conceptual/iphoneosprogrammingguide/ManagingYourApplicationsFlow/ManagingYourApplicationsFlow.html)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-15T01:58:26.447

在上面链接的 iOS App Programming Guide 中，查看“在后台执行有限长度任务”子标题下的“后台执行和多任务处理”部分：

> 正在过渡到后台的应用程序可以请求额外的时间来完成任何重要的最后一分钟任务。要请求后台执行时间，请调用 UIApplication 类的 beginBackgroundTaskWithExpirationHandler: 方法。如果您的应用在任务进行时移动到后台，或者如果您的应用已经在后台，则此方法会延迟您的应用暂停。如果您的应用程序正在执行一些重要任务，例如将用户数据写入磁盘或从网络服务器下载重要文件，这可能很重要。

这给你 10 分钟的后台时间来做你想做的事。如果您注意到，Dropbox 只会继续传输 10 分钟，然后您需要重新启动应用程序才能继续传输。

# sql - oracle中的CHECK约束，用于列之间的值检查

> ID：12433826
> 
> 赞同：4
> 
> 时间：2012-09-15T01:35:14.483
> 
> 标签：sql, oracle, constraints

我有一个名为的表`Room`，它有列（ID、类型、价格......等）

我想为两者添加约束`type`，`price`例如：

*   如果是单件，则价格不应大于 50，
*   如果 double (d)，则价格不应大于 100，并且
*   如果是家庭 (f)，那么价格不应大于 150

我试图像这样添加它，但它给了我一个错误。不知道我应该怎么写：

```
ALTER TABLE ROOM 
ADD (CONSTRAINT CHK_PRICE CHECK (
(TYPE='S' AND PRICE <= 50) AND 
(TYPE='D' AND PRICE <=100) AND 
(TYPE='F' AND PRICE <= 150))); 
```

收到的错误是：

```
SQL Error: ORA-02293: cannot validate (xxxx.CHK_PRICE) - check
constraint violated
02293\. 00000 - "cannot validate (%s.%s) - check constraint violated"
*Cause:    an alter table operation tried to validate a check constraint to
           populated table that had nocomplying values.
*Action:   Obvious 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-15T03:13:01.970

听起来您需要`OR`将三个条件放在一起，而不是`AND`它们放在一起。任何行都不可能满足所有三个条件`type`- 不能同时具有 S、D 和 F 的值。您可能想要

```
ALTER TABLE ROOM 
  ADD (CONSTRAINT CHK_PRICE CHECK (
        (TYPE='S' AND PRICE <=  50) OR -- <-- OR, not AND
        (TYPE='D' AND PRICE <= 100) OR -- <-- OR, not AND
        (TYPE='F' AND PRICE <= 150))); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T04:03:45.233

好吧，您确实需要在三个检查条件中使用“或”而不是“和”。

并且错误消息（ORA-02293：无法验证）通知您的表室中有一些数据行违反了您的完整性约束。此外，您可以使用选项 VALIDATE 或 NOVALIDATE 指定表中的现有数据是否必须符合约束条件。如果您不想验证房间中的这些现有数据行，您可以使用 NOVALIDATE 指定此约束，并且 VALIDATE 是默认值。

> ```
>  ALTER TABLE ROOM    
>     ADD (CONSTRAINT CHK_PRICE CHECK 
>     (
>     (TYPE='S' AND PRICE <=  50) OR -- <-- OR, not AND
>     (TYPE='D' AND PRICE <= 100) OR -- <-- OR, not AND
>     (TYPE='F' AND PRICE <= 150)
>     )
>     NOVALIDATE   -- VALIDATE is default
>     ); 
> ```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T14:55:08.330

您收到错误消息 ORA-02293，因为您的表中已经有不满足新创建的检查约束的数据。

我认为这里的一个重要部分是要意识到您在这里没有要验证的一个业务规则，而是三个。对于验证约束的用户来说，最方便的是确切地知道他插入的行有什么问题。所以这就是为什么我会去这些限制：

```
SQL> create table room (id,type,price)
  2  as
  3  select 1, 'S', 50 from dual union all
  4  select 2, 'D', 80 from dual union all
  5  select 3, 'F', 110 from dual
  6  /

Table created.

SQL> alter table room add constraint single_room_below_50 check (type != 'S' or price <= 50)
  2  /

Table altered.

SQL> alter table room add constraint double_room_below_100 check (type != 'D' or price <= 100)
  2  /

Table altered.

SQL> alter table room add constraint family_room_below_150 check (type != 'F' or price <= 150)
  2  /

Table altered.

SQL> insert into room values (4, 'S', 60)
  2  /
insert into room values (4, 'S', 60)
*
ERROR at line 1:
ORA-02290: check constraint (RWIJK.SINGLE_ROOM_BELOW_50) violated 
```

问候，
罗布。

PS：关于这个主题的更多背景可以在[我的这篇博文中](http://rwijk.blogspot.com/2009/09/check-constraints-and-and.html)找到。

# php - PDO 执行不会正确注入数组值

> ID：12433828
> 
> 赞同：1
> 
> 时间：2012-09-15T01:35:41.333
> 
> 标签：php, mysql, pdo

我编写了一个函数，它从我的数据库中选择所有用户以及使用 PDO 的所有对应字段。我还允许该函数将数组作为参数以方便过滤。我的问题是当我将过滤器数组传递给执行函数时，我没有从表中获得任何行。我知道它与 PDO 以及我将数组传递给它的方式有关，因为当我运行带有硬编码到查询中的过滤器的执行方法时，它可以工作。这是我的函数和调用它的代码：

```
$config = array(
    'filters' => array(
        'all members'     => array('',  ''),
        'officers'            => array('statuses.position_id', '8'),
        'current members'     => array('users.alumni', 0)
    )
);

$filter = $config['filters'];
//Requested filter is just a constant used to keep track of the parsed $_GET value
$result = $dbh->getUsers($filter[REQUESTED_FILTER]);

//Just showed function, not whole class
public function getUsers(array $filter = array('', '')) {
  $result = array();

  $sql = 'SELECT users.firstname, users.lastname, users.grad_year, users.alumni, users.signedISA, phone_numbers.phone_number, emails.email_address,
                addresses.name, addresses.street, addresses.city, addresses.state, addresses.zip
           FROM 
              ((users LEFT JOIN phone_numbers 
                 ON users.user_id = phone_numbers.user_id) 
                 LEFT JOIN emails 
                 ON users.user_id = emails.user_id)
                 LEFT JOIN addresses
                 ON users.user_id = addresses.user_id
                 WHERE ? = ?;';

  $sth = $this->handle->prepare($sql);

  if($sth->execute($filter)) {
     while($row = $sth->fetch(PDO::FETCH_ASSOC)) {
        array_push($result, $row);
     }
  }

  return $result;
} 
```

任何人都知道为什么这不起作用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:48:06.747

您不能将架构对象标识符（如表或列名）作为参数传递给准备好的语句（您当前的尝试始终是比较`WHERE`子句中的参数化字符串文字）。

相反，您需要执行以下操作：

```
public function getUsers(array $filter = array('\'\'', '')) {
  $result = array();

  $sql = 'SELECT users.firstname, users.lastname, users.grad_year, users.alumni, users.signedISA, phone_numbers.phone_number, emails.email_address,
                addresses.name, addresses.street, addresses.city, addresses.state, addresses.zip
           FROM 
              ((users LEFT JOIN phone_numbers 
                 ON users.user_id = phone_numbers.user_id) 
                 LEFT JOIN emails 
                 ON users.user_id = emails.user_id)
                 LEFT JOIN addresses
                 ON users.user_id = addresses.user_id
                 WHERE ' . $filter[0] . ' = ?;';

  $sth = $this->handle->prepare($sql);

  if($sth->execute($filter[1])) {
     while($row = $sth->fetch(PDO::FETCH_ASSOC)) {
        array_push($result, $row);
     }
  }

  return $result;
} 
```

如果 的值超出您的控制范围，请注意 SQL 注入`$filter`（您需要用反引号引用标识符并将其中包含的任何反引号加倍：确保以多字节安全的方式执行此操作！）。

# c# - 如何从列表中下载所有图像 里面有很多图片链接？

> ID：12433829
> 
> 赞同：1
> 
> 时间：2012-09-15T01:35:45.443
> 
> 标签：c#

```
private List<string> retrieveImages(string address)
{

    System.Net.WebClient wc = new System.Net.WebClient();
    List<string> imgList = new List<string>();
    doc.Load(wc.OpenRead(address)); //or whatever HTML file you have 
    HtmlNodeCollection imgs = doc.DocumentNode.SelectNodes("//img[@src]");
    if (imgs == null) return new List<string>();

    foreach (HtmlNode img in imgs)
    {
        if (img.Attributes["src"] == null)
            continue;
        HtmlAttribute src = img.Attributes["src"];

        imgList.Add(src.Value);
        //Image imgDownload = GetImage(src.Value);
        //imgDownload.Save(@"d:\myImages");
    }
    return imgList;
} 
```

在某些情况下，列表 imgList 包含 33 个项目，它看起来像这样：

首先`[0]`我看到：`/images/experiments/nav_logo78.png` 作为我看不到的图像的链接，http 开头或 www 只是开头`/images`

然后在`[1]`我看到的地方：`//maps.gstatic.com/mapfiles/transparent.png`

然后在一些项目到位后 [10] 我看到： http: [//mt1.google.com/vt/lyrs=m@186000000&hl=iw&src=app&x=75&y=51&z=7&s=Gali](http://mt1.google.com/vt/lyrs=m@186000000&hl=iw&src=app&x=75&y=51&z=7&s=Gali)

我不确定我看不到的加利是什么，`.bmp .gif`或者`.png`只是加利的图像。

我想要的是从每个链接下载所有这些图像并将其保存到我的硬盘上。所以我有这个下载功能：

```
private Image GetImage(string url)
{
    System.Net.WebRequest request = System.Net.WebRequest.Create(url);

    System.Net.WebResponse response = request.GetResponse();
    System.IO.Stream responseStream = response.GetResponseStream();

    Bitmap bmp = new Bitmap(responseStream);

    responseStream.Dispose();

    return bmp;
} 
```

当我在retrieveImages() 函数中使用这个GetImage 函数时，它不会对程序做任何事情，甚至不会对我的意思是List imgList 是空的。如果我将这两行标记为现在：

```
//Image imgDownload = GetImage(src.Value);
//imgDownload.Save(@"d:\myImages"); 
```

如果我用//不使用它们标记它们，那么一切都在工作，但如果我使用它们，则没有任何工作，并且它不会将任何内容保存到我的硬盘上。

我应该怎么办？

编辑：

我刚刚将我的retrieveImages 函数更改为：

```
private List<string> retrieveImages(string address)
        {

            System.Net.WebClient wc = new System.Net.WebClient();
            List<string> imgList = new List<string>();
            doc.Load(wc.OpenRead(address)); 
            HtmlNodeCollection imgs = doc.DocumentNode.SelectNodes("//img[@src]");
            if (imgs == null) return new List<string>();

            foreach (HtmlNode img in imgs)
            {
                if (img.Attributes["src"] == null)
                    continue;
                HtmlAttribute src = img.Attributes["src"];

                imgList.Add(src.Value);
                wc.DownloadFile(src.Value ,  @"d:\MyImages\my.gif");
            }
            return imgList;
        } 
```

我在 wc.DownloadFile 行上使用了一个断点，它抛出了一个异常：Webexception Was Caught

找不到路径“D:\textinputassistant\tia.png”的一部分。

在 src.Value 中，在这种情况下它是：/textinputassistant/tia.png 所以你告诉我要避免一开始没有 http 或 https 或 www 的链接，我会修复它。问题是是否例外是因为这条线以 / 开头并且它没有任何 http/s/www ？

完整的例外：

```
System.Net.WebException was caught
  Message=Could not find a part of the path 'D:\textinputassistant\tia.png'.
  Source=System
  StackTrace:
       at System.Net.WebClient.DownloadFile(Uri address, String fileName)
       at System.Net.WebClient.DownloadFile(String address, String fileName)
       at GatherLinks.Form1.retrieveImages(String address) in D:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Form1.cs:line 328
       at GatherLinks.Form1.webCrawler(String url, Int32 levels, DoWorkEventArgs eve) in D:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Form1.cs:line 97
  InnerException: System.Net.WebException
       Message=Could not find a part of the path 'D:\textinputassistant\tia.png'.
       Source=System
       StackTrace:
            at System.Net.FileWebResponse..ctor(FileWebRequest request, Uri uri, FileAccess access, Boolean asyncHint)
            at System.Net.FileWebRequest.GetResponseCallback(Object state)
       InnerException: System.IO.DirectoryNotFoundException
            Message=Could not find a part of the path 'D:\textinputassistant\tia.png'.
            Source=mscorlib
            StackTrace:
                 at System.IO.__Error.WinIOError(Int32 errorCode, String maybeFullPath)
                 at System.IO.FileStream.Init(String path, FileMode mode, FileAccess access, Int32 rights, Boolean useRights, FileShare share, Int32 bufferSize, FileOptions options, SECURITY_ATTRIBUTES secAttrs, String msgPath, Boolean bFromProxy, Boolean useLongPath)
                 at System.IO.FileStream..ctor(String path, FileMode mode, FileAccess access, FileShare share, Int32 bufferSize, FileOptions options, String msgPath, Boolean bFromProxy)
                 at System.Net.FileWebStream..ctor(FileWebRequest request, String path, FileMode mode, FileAccess access, FileShare sharing, Int32 length, Boolean async)
                 at System.Net.FileWebResponse..ctor(FileWebRequest request, Uri uri, FileAccess access, Boolean asyncHint) 
```

## 内部异常：

刚刚添加了一个过滤器，因此它将仅保存以 http 开头的链接：

```
private List<string> retrieveImages(string address)
        {

            System.Net.WebClient wc = new System.Net.WebClient();
            List<string> imgList = new List<string>();
            doc.Load(wc.OpenRead(address));
            HtmlNodeCollection imgs = doc.DocumentNode.SelectNodes("//img[@src]");
            if (imgs == null) return new List<string>();

            foreach (HtmlNode img in imgs)
            {
                if (img.Attributes["src"] == null)
                    continue;
                HtmlAttribute src = img.Attributes["src"];

                imgList.Add(src.Value);
                if (src.Value.Contains("http"))
                {
                    wc.DownloadFile(src.Value, @"d:\MyImages\my.gif");
                }
            }
            return imgList;
        } 
```

现在 src.Value 包含：[http://mt1.google.com/vt/lyrs=m@186000000&hl=iw&src=app&x=75&y=51&z=7&s=Gali](http://mt1.google.com/vt/lyrs=m@186000000&hl=iw&src=app&x=75&y=51&z=7&s=Gali)

然后在它试图下载我得到异常之后： WebException Was Caught

远程服务器返回错误：(403) Forbidden。

```
System.Net.WebException was caught
  Message=The remote server returned an error: (403) Forbidden.
  Source=System
  StackTrace:
       at System.Net.WebClient.DownloadFile(Uri address, String fileName)
       at System.Net.WebClient.DownloadFile(String address, String fileName)
       at GatherLinks.Form1.retrieveImages(String address) in D:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Form1.cs:line 330
       at GatherLinks.Form1.webCrawler(String url, Int32 levels, DoWorkEventArgs eve) in D:\C-Sharp\GatherLinks\GatherLinks\GatherLinks\Form1.cs:line 97
  InnerException: 
```

问题是异常是否抛出，因为在这种情况下，谷歌网站阻止下载，或者因为链接以 Gali 结尾，我不确定它是什么类型的文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:58:03.640

我会首先忽略没有有效链接的图像，即没有 http://

要将文件保存到磁盘，您可以下载它的二进制文件并像这样保存：

```
string URL="http://www.yourdomain.com/file1.zip";
string DestinationPath="C:\file1.jpg";
System.Net.WebClient Client = new WebClient();
Client.DownloadFile(URL,DestinationPath); 
```

您不必将图像转换为 .net 图像来保存它。我最近写的一些导入应用中有一些类似的代码

# objective-c - 使可可窗口全屏

> ID：12433832
> 
> 赞同：3
> 
> 时间：2012-09-15T01:36:37.267
> 
> 标签：objective-c, macos, cocoa, opengl, fullscreen

我目前正在向 OS X 中的 OpenGL 窗口添加全屏视图。我没有使用 OS X 的“全屏模式”，因为我不喜欢接管用户屏幕的想法。

我有自己的自定义窗口类派生自该类，`NSWindow`并且在该类中，我覆盖了`toggleFullscreen:`选择器：

```
- (void)toggleFullScreen:(id)sender
{
    _fullscreen = !_fullscreen;
    if(_fullscreen) {
        NSRect screenRect = [[NSScreen mainScreen] frame];
        [self setStyleMask:NSBorderlessWindowMask];
        [self setFrame:screenRect display:YES];
        [self setLevel:NSMainMenuWindowLevel+1];
        [self setOpaque:YES];
        [self setHidesOnDeactivate:YES];
    } else {
        NSRect screenRect = [[NSScreen mainScreen] frame];
        unsigned int width = (unsigned int)(screenRect.size.width/2.0f);
        unsigned int height = (unsigned int)(screenRect.size.height/2.0f);
        NSRect frame = NSMakeRect(0, screenRect.size.height-height, width, height);

        [self setStyleMask:NSTitledWindowMask | NSResizableWindowMask];
        [self setFrame:frame display:YES];
        [self setLevel:NSNormalWindowLevel];
        [self setOpaque:YES];
        [self setHidesOnDeactivate:NO];
    }
} 
```

这似乎工作正常，在全屏窗口（根据[此处](http://developer.apple.com/library/mac/#documentation/graphicsimaging/conceptual/OpenGL-MacProgGuide/opengl_fullscreen/opengl_cgl.html#//apple_ref/doc/uid/TP40001987-CH210-SW6)的 Apple 文档）和屏幕分辨率一半的窗口之间切换。

问题是在两种模式之间切换会使我的窗口“失去焦点”。如果我在切换模式后立即按下我正在使用的键盘快捷键，我会收到 OS X 错误“哔”。我必须在窗口中单击以“重新激活”它，然后才能再次使用切换。

我尝试将 a 添加`[self makeKeyAndOrderFront:nil];`到我的函数中，但这并不能解决问题。我所需要的只是一种在过渡期间保持窗口“聚焦”的方法。除了那个问题，这个方法工作得很好，不需要对我的`NSView`.

**编辑**

不确定它是否相关，但我正在以编程方式创建此窗口，而不是从 Nib 加载它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-03-13T14:47:36.907

一种更简单的方法，这似乎是正确的现代方法（如 Lion）......

在我的 NSApplicationDelegate 的 init 方法中（对不起，我是新手，所以我的术语是错误的），在创建窗口之后......

`[window setCollectionBehavior:(NSWindowCollectionBehaviorFullScreenPrimary)];`

然后用 target = nil 触发一个`toggleFullScreen`，比如说从你的菜单中。

然后它将创建一个带有图标的新命名桌面，将您的窗口滑动到它并使其全屏显示。就像您将它们设为全屏时的 Google Chrome 或 Safari。我也在做这件事，没有笔尖或 xib 或这些天孩子们所说的任何东西。

[本页](http://www.cocoanetics.com/2012/11/the-lions-full-screen-mode/)讨论如何使用 Interface Builder 方式进行操作。

[这](https://developer.apple.com/library/mac/documentation/General/Conceptual/MOSXAppProgrammingGuide/FullScreenApp/FullScreenApp.html)是有关该主题的官方 Apple 文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-07-01T03:14:58.393

我自己遇到了这个问题，发现在 setStyleMask 之前调用它：

```
[window orderOut:nil]; 
```

这在 setStyleMask 为我解决了失去焦点的问题之后：

```
[window makeKeyAndOrderFront:nil]; 
```

# python - Python：将列表排序为多个列表或字典

> ID：12433833
> 
> 赞同：2
> 
> 时间：2012-09-15T01:36:38.563
> 
> 标签：python, list, sorting, dictionary

我有一个字符串列表，这是一个例子：

```
wallList = ['wall_l0', 'wall_l1', 'wall_broken_l0', 'wall_broken_l1',
             'wall_vwh_l0','wall_vwh_l1', 'wall_vwh_broken_l0', 
             'wall_vwh_broken_l1', 'wall_vpi_l0', 'wall_vpi_l1', 
             'wall_vpi_broken_l0', 'wall_vpi_broken_l1'] 
```

我想按墙类型和状态（默认/损坏）将它们组合在一起：

```
[['wall_l0', 'wall_l1'],['wall_broken_l0', 'wall_broken_l1']]

[['wall_vwh_l0', 'wall_vwh_l1'],['wall_vwh_broken_l0', 'wall_vwh_broken_l1']] 

[['wall_vpi_l0', 'wall_vpi_l1'],['wall_vpi_broken_l0', 'wall_vpi_broken_l1']] 
```

任何人都知道如何最好地做到这一点，或者知道 python 食谱？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T01:53:25.273

这里有一个小单线来做到这一点：

```
import itertools, re
results = [list(v) for (k, v) in itertools.groupby(sorted(wallList),
        lambda x: re.sub(r'\d+', '0', x))] 
```

这不会保留顺序，但否则它会为您提供所需的相同输出。

它的工作原理是查看所有数字都转换为“0”的版本并对重复项进行分组。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T01:56:03.430

**编辑**：显然我的回答只是部分正确，因为我忘了按“状态”进行组织。正确答案来自@samy.vilar。

使用[`itertools.groupby`](http://docs.python.org/library/itertools.html#itertools.groupby)：

```
>>> from itertools import groupby
>>> [list(g) for k,g in groupby(sorted(wallList), lambda r: r[:-1])]
[['wall_broken_l0', 'wall_broken_l1'], ['wall_l0', 'wall_l1'], ['wall_vpi_broken_l0
', 'wall_vpi_broken_l1'], ['wall_vpi_l0', 'wall_vpi_l1'], ['wall_vwh_broken_l0', 'w
all_vwh_broken_l1'], ['wall_vwh_l0', 'wall_vwh_l1']] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-15T02:35:29.930

Interesting, first we need to break it up by wall type so we can do this.

```
>>> from itertools import groupby
>>> wallList = ['wall_l0', 'wall_l1', 'wall_broken_l0', 'wall_broken_l1',
         'wall_vwh_l0','wall_vwh_l1', 'wall_vwh_broken_l0', 
         'wall_vwh_broken_l1', 'wall_vpi_l0', 'wall_vpi_l1', 
         'wall_vpi_broken_l0', 'wall_vpi_broken_l1']
>>> list(groupby(sorted(wallList), lambda wall: wall.replace('_broken', '')[:-3]))
[('wall', <itertools._grouper object at 0x1004edc50>), ('wall_vpi', <itertools._grouper object at 0x1004edb90>), ('wall_vwh', <itertools._grouper object at 0x1004eda90>)] 
```

great now that we have the types lets separate by those that are broken.

this is what everything looks like together.

```
>>> from itertools import groupby
>>> wallList = ['wall_l0', 'wall_l1', 'wall_broken_l0', 'wall_broken_l1',
         'wall_vwh_l0','wall_vwh_l1', 'wall_vwh_broken_l0', 
         'wall_vwh_broken_l1', 'wall_vpi_l0', 'wall_vpi_l1', 
         'wall_vpi_broken_l0', 'wall_vpi_broken_l1']

>>> values = [[list(v) for k, v in groupby(values, lambda value: '_broken_' in value)] 
...             for key, values in groupby(sorted(wallList), lambda wall: wall.replace('_broken', '')[:-3])]
>>> from pprint import pprint
>>> pprint(values)
[[['wall_broken_l0', 'wall_broken_l1'], ['wall_l0', 'wall_l1']],
 [['wall_vpi_broken_l0', 'wall_vpi_broken_l1'],
  ['wall_vpi_l0', 'wall_vpi_l1']],
 [['wall_vwh_broken_l0', 'wall_vwh_broken_l1'],
  ['wall_vwh_l0', 'wall_vwh_l1']]] 
```

there are surely other ways, but this seems to be concise.

Here is another way:

```
>>> from collections import defaultdict
>>> values = defaultdict(lambda : defaultdict(list))
>>> for wall in wallList:
...     if 'broken' in wall:
...         values[wall[:-3].replace('_broken', '')]['broken'].append(wall)
...     else:
...         values[wall[:-3]]['default'].append(wall)
... 
>>> values.items()
[('wall', defaultdict(<type 'list'>, {'default': ['wall_l0', 'wall_l1'], 'broken': ['wall_broken_l0', 'wall_broken_l1']})), ('wall_vpi', defaultdict(<type 'list'>, {'default': ['wall_vpi_l0', 'wall_vpi_l1'], 'broken': ['wall_vpi_broken_l0', 'wall_vpi_broken_l1']})), ('wall_vwh', defaultdict(<type 'list'>, {'default': ['wall_vwh_l0', 'wall_vwh_l1'], 'broken': ['wall_vwh_broken_l0', 'wall_vwh_broken_l1']}))]
>>> 
```

This second method should be faster since we are only iterating once, dictionary look ups are constant, and we can access any set of walls by name as well as state ...

```
>>> values['wall']['default']
['wall_l0', 'wall_l1']
>>> values['wall_vpi']['default']
['wall_vpi_l0', 'wall_vpi_l1']
>>> values['wall_vpi']['broken']
['wall_vpi_broken_l0', 'wall_vpi_broken_l1']
>>> 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-15T01:49:34.300

拆分 _: `string.split('_')`。如果你得到 2 个字段，你就有了退化的情况。如果你得到 3，则按 3 的中间字段分组。列表字典可能会有所帮助，或者更好的是 collections.defaultdict(list)。

# javascript - 客户端使用 jQuery 搜索表

> ID：12433835
> 
> 赞同：5
> 
> 时间：2012-09-15T01:37:30.830
> 
> 标签：javascript, jquery, html, search

假设我有一个标准的 HTML 表格结构，例如：

```
<table class="table table-striped table-hover table-bordered table-condensed">
<thead>
    <tr>
        <th>Name</th>
        <th>Type</th>
        <th>Added</th>
    </tr>
</thead>
<tbody>
    <tr id="1a0daa2734" class="item">
        <td><a href="/view/1a0daa2734">Item Number 1</a></td>
        <td>A</td>
        <td>8/1/2012 10:18:34 PM</td>
    </tr>
    <tr id="b1ff6e0ac" class="item">
        <td><a href="/view/b1ff6e0ac">Item Number 2</a></td>
        <td>B</td>
        <td>8/2/2012 5:48:54 PM</td>
    </tr>
    <tr id="edd8b70893" class="item">
        <td><a href="/view/edd8b70893">Item Number 3</a></td>
        <td>A</td>
        <td>8/13/2012 3:55:41 PM</td>
    </tr>
</tbody>
</table> 
```

我正在尝试使用 jQuery 编写客户端搜索。基本上我有一个 id 的搜索框`search-items`。

```
 $("#search-items").bind("keyup paste", function() {
        var searchText = $("#search-items").val(); 

        $(".item").each(function() {
             //???
        });
    }); 
```

获取搜索值并在 tbody 内部`search-items`找到**NON-MATCHES的最佳方法是什么？**我想要不匹配的，因为这些是我要隐藏的元素。

它应该只在前两个`td`元素内搜索，所以`name`and`type`列，**不添加**。

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-15T01:45:54.667

以下代码将在您将值键入到 column1 或 2 时尝试将它们匹配。

```
$("#search").on("keyup paste", function() {
    var value = $(this).val().toUpperCase();
    var $rows = $("table tr");

    if(value === ''){
        $rows.show();
        return false;
    }

    $rows.each(function(index) {
        if (index !== 0) {

            $row = $(this);

            var column1 = $row.find("td:first a").html().toUpperCase();
            var column2 = $row.find("td").eq(1).text().toUpperCase();

            if ((column1.indexOf(value) > -1) || (column2.indexOf(value) > -1)) {
                $row.show();
            }
            else {
                $row.hide();
            }
        }
    });
});​ 
```

### [演示](http://jsfiddle.net/FranWahl/eCM9N/)- 分别按第 1 列和第 2 列值搜索您的表（未添加）

我确信有一种更有效的编写方式，但这应该可以帮助您入门。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T02:09:15.323

这样的事情怎么样？

```
function escapeRegex(value) {
    return value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g, "\\$&");
}

$(function() {
    $("#search-items").bind("keyup paste", function() {
        var searchText = $("#search-items").val(),
            regex = new RegExp(escapeRegex(searchText), "gi"),
            $items = $(".item").show();

        if (searchText) {
            $items.each(function() {
                var $tds = $("td", this).slice(0, 2), // only the first two columns
                    text = $tds.text();

                if (text.search(regex) === -1) {
                    $(this).hide();
                }

            });
        }
    });
});​ 
```

**示例：http:** [//jsfiddle.net/Pc7Nk/1/](http://jsfiddle.net/Pc7Nk/1/)

*该`escapeRegex`功能是从[jQueryUI自动完成的源代码中无耻地窃取的。](https://github.com/jquery/jquery-ui/blob/master/ui/jquery.ui.autocomplete.js#L559)*

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-15T01:45:42.767

逐行查找第一个 td （如果愿意，您还可以添加 n 个要匹配的 td 元素。.text() 将返回一个字符串，使用字符串对象 .search 方法，您将返回索引在第一次匹配时，如果没有匹配则返回 -1，因此我们隐藏该行。

```
$("#search-items").bind("keyup paste", function() {
    var searchText = $("#search-items").val(); 

    $(".item").each(function() {
         var $this = $(this)
         if ($this.find('td:first-child').text().search(searchText) === -1) {
             $this.hide()
         }
    });
}); 
```

# php - 无法获取 PHP 表单以将日期时间保存为 NULL

> ID：12433836
> 
> 赞同：1
> 
> 时间：2012-09-15T01:37:30.770
> 
> 标签：php, mysql, datetime, null

我有一个很好的时间来解决这个问题 - 这似乎是一个有据可查的问题，但没有一个解决方案足以完全解决我的问题。

基本上我已经为我们的网站建立了一个数据库来保存即将发生的事件；有时这些事件会显示不止一个，因此我们可以在字段中输入这些日期（如果有的话）。大多数时候，只有一个日期可以输入，所以我们的额外日期字段（date2、date 3 等）是空白的。如果它们是**空白**的，我希望它们作为**NULL**保存到 mysql 数据库中。

我将值扔到 mySQL 的示例如下所示：

```
if (empty($_POST['date2']))
        {$date2 = NULL;
        }
    else
        {$date2 = mysql_real_escape_string(date("Y-m-d",strtotime($_POST['date2'])));
        } 
```

哪个正在做它应该做的事情。当我们尝试如下更新变量时，问题就来了：

```
 mysql_query("UPDATE events
             SET date2='".mysql_real_escape_string($date2))."', 
```

mySQL 不知道这个值是什么（显然，因为你不能转义字符串或格式化 NULL 的日期），所以它将值保存为 0000-00-00 （或 1969-12-31 ......取决于我试图解决这个问题）。我想不通的是如何在不使用 ''s 的情况下输入 date2 的值。

我尝试将其更改为**date2 = $date2，**但代码不会执行并抛出错误。 **date2='$date2',**执行 - 但它再次没有正确保存 NULL（我认为是因为它保存的是 'NULL' 而不是 NULL？）。

有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T01:39:08.290

您有单引号中的变量：

```
date2='".mysql_real_escape_string($date2))."', 
```

这意味着您正在尝试将字符串保存到该字段。

如果你想要它，`null`你需要去掉它周围的引号。

```
insert into YourTable ('null'); // Will try to insert a string
insert into YourTable (null); // Will try to insert a null 
```

编辑：为什么不立即将其直接放入`if`语句中？

```
if (empty($_POST['date2']))
{
    $date2 = NULL;
    mysql_query("UPDATE events SET date2=null, ...";
    // This will also work...
    mysql_query("UPDATE events SET date2=".$date2.", ...";
}
else
{
    $date2 = mysql_real_escape_string(date("Y-m-d",strtotime($_POST['date2'])));
    mysql_query("UPDATE events SET date2='".mysql_real_escape_string($date2))."', ...";
} 
```

更新代码：

```
$query="update events set ";

if (empty($_POST['date2']))
{
    $date2 = NULL;
    $query.="date2=null, ";
}
else
{
    $date2 = mysql_real_escape_string(date("Y-m-d",strtotime($_POST['date2'])));
    $query.= " date2='".mysql_real_escape_string($date2)."', ";
}

// a few other if statements to finish up the rest of your fields...

$query.=" where someCondition=SomeOtherCondition";
mysql_query($query); 
```

需要注意的是，如果您编写的这段代码又好又新鲜，您可能需要考虑从[PDO 开始。](http://php.net/manual/en/book.pdo.php)并使用准备好的语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T01:51:34.837

您可以规范化您的数据库。添加`dates`具有以下结构的表：

```
CREATE TABLE  `test`.`dates` (
    `id` INT NOT NULL AUTO_INCREMENT PRIMARY KEY ,
    `event_id` INT NOT NULL ,
    `date` DATETIME NOT NULL ,
INDEX (  `event_id` )); 
```

对于每个事件，该表保留一个或多个日期。如果 date2、date3 为空，则表中没有它们的记录。

# php - Magento / Wordpress 博客的分页系统

> ID：12433838
> 
> 赞同：1
> 
> 时间：2012-09-15T01:38:15.503
> 
> 标签：php, wordpress, magento

我正在尝试创建一个分页系统，Magento 可以在其中抓取 WordPress 博客，但我只遇到过`$this->getPosts();`它可以抓取一个类别中的每个帖子。

我安装了 Magento 和 FishPig/WordPress。我开始意识到您不能调用任何 WordPress 函数，那么我将如何在 Magento 中为 WordPress 博客创建分页系统？

我只想声明我是 Magento 的新手。

# c++ - GNE 的几个错误

> ID：12433842
> 
> 赞同：1
> 
> 时间：2012-09-15T01:39:17.933
> 
> 标签：c++, networking

虽然我是 C++ 新手，（我有 Java 经验）我正在启动一个需要使用[GNE](http://www.gillius.org/gne/)或游戏网络引擎的项目。

在他们的[教程](http://www.gillius.org/gne/tutorials/tut1.htm#part1)中，（从 2003 年开始授予）他们使用这一行：

```
if ( initGNE( NL_IP, atexit ) ) { 
```

在我的代码中，我使用以下内容：

```
log("Initializing GNE...");

if(initGNE(NL_IP, atexit)) {
    err("GNE failed to initialize!");
    err("Press ENTER to close MoServ...");
    std::cin.get();
    exit(0);
}

log("-> Registering game version...");
setGameInformation(myName(), myVer());
log("-> Initializing console...");
initConsole(false);
setTitle("MoServ");

log("GNE initialized!"); 
```

编译时（在 Linux 上使用 g++，通过 eclipse /w CDT）我收到以下错误：

```
/home/tehtros/Dev/MoServ/Debug/../src/main.cpp:38: undefined reference to `GNE::initGNE(unsigned int, int (*)(void (*)()), int)'
/home/tehtros/Dev/MoServ/Debug/../src/main.cpp:46: undefined reference to `GNE::setGameInformation(std::basic_string<char, std::char_traits<char>, std::allocator<char> >, unsigned int)'
/home/tehtros/Dev/MoServ/Debug/../src/main.cpp:48: undefined reference to `GNE::Console::initConsole(bool)'
/home/tehtros/Dev/MoServ/Debug/../src/main.cpp:49: undefined reference to `GNE::Console::setTitle(char const*)' 
```

注意：在文档中，他们确实说过，除非您首先调用 GNE::initGNE()，否则所有其他 GNE 函数都会出现“未定义引用”错误。

* * *

如果我改变：

```
if(initGNE(NL_IP, atexit)) { 
```

到：

```
if(initGNE(NL_IP, atexit())) { 
```

然后我得到错误：

```
../src/main.cpp:38:27: error: too few arguments to function ‘int atexit(void (*)())’ 
```

* * *

虽然这在文档中没有，但如果我改变它：

```
if(initGNE(NL_IP, atexit())) { 
```

更进一步，对此：

```
if(initGNE(NL_IP, atexit(shutdownGNE()))) { 
```

然后我得到这个错误：

```
../src/main.cpp:38:40: error: invalid use of void expression 
```

* * *

如果我删除括号，如下所示：

```
if(initGNE(NL_IP, atexit(shutdownGNE))) { 
```

然后我得到这个错误：

```
../src/main.cpp:38:39: error: invalid conversion from ‘int’ to ‘int (*)(void (*)())’ [-fpermissive]
/usr/local/include/gnelib/ObjectBrokerClient.h:120:15: error:   initializing argument 2 of ‘bool GNE::initGNE(NLenum, int (*)(void (*)()), int)’ [-fpermissive] 
```

* * *

正如你所看到的，我有点迷路了。我不知道 GNE 是否坏了，如果我只是犯了一个小错误，或者我完全不知道我在做什么，我应该停止尝试用我的一点理解来编写这么大的东西。（再一次，我通过实际做来学习，而不是通过阅读如何去做。）任何人都可以提供任何帮助或支持，并澄清我做错了什么，如果有的话？

* * *

编辑：我直接从他们的网站复制并粘贴了他们的示例，没有进行任何修改，并且没有编译。

* * *

解决方案：我通过更改命令的顺序解决了这个问题。在命令行上，我可以这样编译：

```
g++ -o test "test.cpp" -lgnelib -lNL 
```

为了使这项工作与 Eclipse 一起工作，我添加了`gnelib`和`NL`作为库，并将构建命令更改为：

```
${COMMAND} ${INPUTS} ${OUTPUT_FLAG} ${OUTPUT_PREFIX}${OUTPUT} ${FLAGS} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T02:18:40.833

我不确定您为什么要使用函数点参数，但如果期望指向函数的指针传递不同的东西`atexit`，显然它将不起作用。特别是，传递调用`initGNE()`的结果是行不通的。`void``atexit`

第一个示例中的错误只是由于编译程序而不是与适当的库链接造成的：您需要指定定义函数的库。例如，看一下[安装教程](http://www.gillius.org/gne/tutorials/linuxinstall.htm)，它显示您需要使用`-lgnelib`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T02:13:33.287

在尝试解决原始问题时，您遇到了其他问题，因此让我们关注原始错误。编译器已完成处理您的代码，但链接器未找到您使用的符号。您需要将包含这些符号的库链接到您的可执行文件中。

# php - Html 表单缩进

> ID：12433845
> 
> 赞同：0
> 
> 时间：2012-09-15T01:39:54.110
> 
> 标签：php

我正在创建一个简单的消息传递应用程序，用户可以在其中登录或注册并专门与我交流。他们的用户名和密码存储在 .txt 中的一行（存储其他所有人），我们的对话逐行存储在唯一的用户名.txt 中

当用户注册或登录时，我想将他们从表单重定向到一个独立的文本区域，该区域在下面显示我们的对话。但是，当重定向用户时，我不确定如何将他们的用户名 (usrNm) 发送到下一个 php 文件以显示我们对话的内容（该文件是他们的用户名）。我试过 include(index.php) 无济于事。如何在不传递 html 的情况下也包含 index.php。最好的方法是什么？

我也对使用`''`vs的一般规则感到困惑`""`，我相信`""`允许变量在里面并`''`适用于其他一切？我还在 html 中被告知`<input type="text"`.. 文本应该用引号括起来，如果它不带引号工作有什么好处？如果你想启发我，另一个小问题在第 30 行。非常感谢所有建议！

```
//index.php
<?php
    echo "Login or register. ";
    //Ensures form exists and instantiates neccesary variables
    if (isset($_POST['usrNm'],$_POST['pass'],$_POST['passConf'])) {
        $usrNm = $_POST['usrNm'];
        $pass = $_POST['pass'];
        $passConf = $_POST['passConf'];
        $rec = file('userPass.txt');
        //Parses username from users txt file
        function usrName($indx){
            global $rec;
            $usrName = substr($rec[$indx], 0, stripos($rec[$indx], ' '));
            return $usrName;
        }
        //Parses password from users txt file
        function passWrd($indx){
            global $rec;
            $passWrd = trim(substr($rec[$indx], stripos($rec[$indx], ' ')));
            return $passWrd;
        }
        //Attempts to log user in
        if(!empty($usrNm)&&!empty($pass)&&empty($passConf)) {
            for($i=0;$i<count($rec);$i++) {
                //Logs user in
                if (($usrNm==usrName($i))&&($pass==passWrd($i))) {
                    //Outputs admin screen
                    if ($usrNm=='rich') {
                        for ($x=1; $x<count($rec); $x++) { 
                            //How to evaluate usrName($x) between link tags?
                            $usrNameLink = usrName($x);
                            echo "<a href='$com.php'>$usrNameLink</a> ";
                        }
                        break;
                    }
                    else header('Location: com.php');
                }
                //Wrong password
                elseif (($usrNm==usrName($i))&&($pass!=passWrd($i))) {
                    echo 'Wrong password.';
                    break;
                }
                //Username doesn't exist
                elseif (($i==count($rec)-1)&&($usrNm!=usrName($i))) {
                    echo 'Username doesn\'t exist.';
                }
            }
        }
        //Attempts to register user.
        elseif (!empty($usrNm)&&!empty($pass)&&!empty($passConf)) {
            for($i=0;$i<count($rec);$i++) {
                //Username taken
                if ($usrNm==usrName($i)) {
                    echo 'Username taken.';
                    break;
                }
                //Registers user: updates user txt file and creates txt file that saves correspondence between the user and me
                elseif (($i==count($rec)-1)&&($usrNm!=usrName($i))&&($pass==$passConf)) {
                    $handle = fopen('userPass.txt', 'a');
                    $handle2 = fopen("$usrNm.txt", 'a');
                    fwrite($handle, $usrNm.' '.$pass."\r\n");
                    fwrite($handle2, 'Richard: Here you can send me messages.');
                    fclose($handle);
                    fclose($handle2);
                    header('Location: com.php');
                }
                //Passwords don't match
                elseif (($i==count($rec)-1)&&($usrNm!=usrName($i))&&($pass!=$passConf)) {
                    echo 'Passwords don\'t match.';
                }
            }
        }
        //User didn't fill in the password field
        else{echo 'Fill in the required fields.';}
    }

?>
<form action="index.php" method="post">
    Username:<input name="usrNm" type="text"></input><br>
    Password:<input name="pass" type="password"></input><br>
    Confirm Password (only for registration):<input name="passConf" type="password"></input><br>
    <input name="submit" type="submit"></input>
</form>

//com.php
<?php
    include('index.php');
    if (isset($_POST['msg'])) {
        if (!empty($_POST['msg'])) {
            echo $usrNm;
        }
    }
?>
Welcome!
<form action="com.php" method="post">
    <textarea name="msg" cols="64" rows="4" type="text"></textarea><br>
    <input name="send" type="submit"></input>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:06:21.920

双引号解析变量是正确的，而单引号则不然。至于该段中的第二个问题，请参阅[此处](http://mathiasbynens.be/notes/unquoted-attribute-values)以了解有关将属性值用引号括起来的规则。除了能够在值中包含特殊字符之外，这样做并没有太多好处。我也推荐阅读[这篇](https://stackoverflow.com/questions/6495310/do-you-quote-html5-attributes)文章。

至于那段中的第三个问题（小问题），我建议如下：

```
echo "<a href='$com.php'>".usrName($x)."</a>"; 
```

如果您只想在该行中直接使用该功能。

至于您的第一个问题，我不知道有任何这样的方法可以在不传递 html 的情况下包含文件。 [这](https://stackoverflow.com/questions/11262182/php-include-without-output)可能是一个这样的答案，但它未经我的测试，所以我不能告诉你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T03:07:15.547

如果您希望将用户名发送到下一个 php 文件，您可以像这样传递变量：

```
echo "<a href='$com.php?usrName=$usrNameLink&someOtherVariable=2'>$usrNameLink</a> "; 
```

和

```
else header('Location: com.php?usrName=$usrNameLink&someOtherVariable=2'); 
```

然后在下一个 php 页面上使用`$_GET['usrName']`检索它，就像你是为 POST 变量

除此之外，代达罗斯已经涵盖了所有其余部分！

# c - 如何在 C 中呈现已签名的 int？

> ID：12433847
> 
> 赞同：0
> 
> 时间：2012-09-15T01:40:36.030
> 
> 标签：c, int, signed

我是 C 新手，这是一个新手问题：

我遇到了这段关于有符号整数表示的代码：

```
int main(void) {
    int a = 0x8fffffff;
    printf("%d\n",a);
    return 0;
} 
```

它返回`-1879048193`。

我目前对 signed int 的理解是最左边的位用于负或正指示：

所以`0x9`应该评估为有符号十进制`-1`，因为它的左侧位是`1`：

```
int main(void) {
    int a = 0x9;
    printf("%d\n",a);
    return 0;
} 
```

但它给了我小数点 9，不是我所期望的，知道吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T01:47:38.927

您混淆了表示以及“最左边”（最重要）位的实际含义。当系统在内存中表示一个 int（我将使用 32 位）时，它会占用类型定义的位数，而不是它需要保存该数字的位数。根据变量的类型，它甚至可能需要更多时间才能将其置于良好的起始位置以供以后访问（填充/对齐）。

你的整数可以这样表示，它在最右边的 4 位中具有二进制值 9：

```
 0b00000000000000000000000000001001 
```

正如你所看到的，最左边的位肯定不是 1。你的 int 可能不是 32 位，但任何超过 4 的东西都会给你同样的故事。做出相同的假设，您可以查看实际设置最高有效位的结果，在我打印 0x80000009 的测试中，结果为 -2147483639。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:04:25.663

有几种方法可以用二进制表示有符号数。您正在考虑[sign-and-magnitude](http://en.wikipedia.org/wiki/Signed_number_representations#Sign-and-magnitude_method)，这是 IEEE 浮点格式使用的。如您所述，单精度`float`或双精度的最高有效位`double`用于表示符号。现代计算机中的整数值以二进制补码表示。二进制补码中可表示的值的范围取决于使用了多少位。使用的位数取决于您的编译器、您正在编译的目标以及您选择的变量类型。一个 8 位二进制补码数可以表示 -128 到 +127 范围内的数字。在`C`您通常会将该`char`类型用于有符号的 8 位值，并且`int` for a signed 32-bit value, all processors I'm aware of today would represent these in two's complement. To find out how many bytes of storage your system uses to store an `int` you can use the `sizeof` operator in `C`, in most systems an `int` is 4 bytes, or 32-bits. In an N-bit two's complement number the most significant bit (bit N-1) can, in fact, be used to determine the sign of the number, but the remaining bits are not to be interpreted as the magnitude.

See [Wikipedia's article on two's complement](http://en.wikipedia.org/wiki/Two%27s_complement).

One interesting fact of two's complement is that the most negative number representable in N bits has no representable positive counterpart in N bits. In other words, you cannot represent the absolute value of the most negative value. The most negative value in two's complement representable in N bits has the most significant bit (bit N-1) set, and the remaining bits 0, its value is -pow(2,N-1). For N=8 the most negative value is 0x80 and the value is -pow(2,8-1) which is -pow(2,7) or -128\. The largest positive number representable in two's complement in 8 bits is 0x7F, a '0' in the most significant bit and '1' in the remaining bits, or pow(2,7)-1 or +127.

# c# - 使用 C# 获取类“in”的 div 内容

> ID：12433850
> 
> 赞同：1
> 
> 时间：2012-09-15T01:41:41.903
> 
> 标签：c#, html, web-scraping

如何使用 C#获取`div`类或更多的内容？`in`

我有以下 HTML 代码：

```
<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="utf-8" />
    <title></title>
</head>
<body>
    <div id="xxx">
        <div class="in">
            <a href="/a/show/7184569" class="mm">ВАЗ 2121</a> <span class="for">за</span>
            <span class="price">2 700 $</span>
            <br />
            <span class="year">1990 г.</span><br />
            <div style="margin: 3px 0 3px 0">contentxxx</div>
        </div>
    </div>
</body>
</html> 
```

我想获取内容，`div class="in"`结果是：

```
<div class="in">
     <a href="/a/show/7184569" class="mm">ВАЗ 2121</a> <span class="for">за</span>
     <span class="price">2 700 $</span>
     <br />
     <span class="year">1990 г.</span><br />
     <div style="margin: 3px 0 3px 0">contentxxx</div>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T07:23:14.890

```
using HtmlAgilityPack;

static void Parse
        {

            HtmlWeb web = new HtmlWeb();
            HtmlDocument doc = new HtmlDocument();
            doc.LoadHtml(getHTML());

            HtmlNodeCollection nodeCol = doc.DocumentNode.SelectNodes("//div[@class=\"in\"]");

            string value = nodeCol[0].InnerHtml;
        }

        static string getHTML()
        {
            string retVal = "";

            retVal = @"<!DOCTYPE html>"
                     + "<html lang=\"en\" xmlns=\"http://www.w3.org/1999/xhtml\">"
                    + "<head>"
                        + "<meta charset=\"utf-8\" />"
                        + "<title></title>"
                    + "</head>"
                    + "<body>"
                        + "<div id=\"xxx\">"
                            + "<div class=\"in\">"
                                + "<a href=\"/a/show/7184569\" class=\"mm\">ВАЗ 2121</a> <span class=\"for\">за</span>"
                                + "<span class=\"price\">2 700 $</span>"
                                + "<br />"
                                + "<span class=\"year\">1990 г.</span><br />"
                                + "<div style=\"margin: 3px 0 3px 0\">contentxxx</div>"

                            + "</div>"
                        + "</div>"
                    + "</body>"
                    + "</html>";

            return retVal;
        } 
```

请添加命名空间 HtmlAgilityPack；参考：[http ://htmlagilitypack.codeplex.com/releases/view/90925](http://htmlagilitypack.codeplex.com/releases/view/90925)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-19T03:47:20.573

您可以使用[HTML Agility Pack](http://html-agility-pack.net)轻松完成：

```
using HtmlAgilityPack;

...
var doc = new HtmlDocument();
doc.Load(@"C:\file.htm") //see the overloads. You can also use `LoadHtml` method.

var node = doc.DocumentNode.SelecSingleNode("//div[@class='in']");

//This is the text you are looking for...
var result = node.OuterHtml; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-19T05:01:43.567

使用 JQuery 获取 div 的内容：

```
<script language="text/javascript">

       var d = $('div.in').html();
</script> 
```

上面的代码获取具有`in`类的 div 的内容。

# java - 我可以在 X3D 中创建带有负对象的布尔值吗？

> ID：12433854
> 
> 赞同：1
> 
> 时间：2012-09-15T01:42:37.977
> 
> 标签：java, x3d

我有两个对象。一个代表墙，一个代表门或窗。我有两者的尺寸。如果我在像 Cinema 4d 这样的 3D 程序中工作，我会将对象分组为布尔值，并将门/窗设为负对象。有没有办法在 X3D 中做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T12:48:57.833

X3D 中的模型没有布尔运算符，但是您可以使用脚本制作一个修改现有模型的坐标以适应所需大小的 PROTO。

否则，如果您的问题只是关于如何从 Cinema4D 导出模型以使其看起来相同：我从未使用过 C4D，所以我不确定确切的程序是什么，但在 3dsmax 中，您会折叠修改器堆栈以结束使用基本网格，您就可以将其导出。

# typo3 - 根据页面兄弟位置获取页码

> ID：12433856
> 
> 赞同：3
> 
> 时间：2012-09-15T01:43:10.977
> 
> 标签：typo3, typoscript

有没有办法通过打字稿来获取当前页面与其兄弟姐妹相关的索引？

有点类似我们通过 register:count_HMENU_MENUOBJ 获取子页面数量的方式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T14:18:08.483

我想我找到了自己问题的答案。如果有更好的请告诉我

```
lib.pagesiblingcount = TEXT
lib.pagesiblingcount {
  numRows.table = pages
  numRows.select.pidInList.data= field: pid
  numRows.select.orderBy = sorting
  numRows.select.andWhere.dataWrap = sorting<={page:sorting}
} 
```

# voice - Camtasia 视频与机器旁白

> ID：12433858
> 
> 赞同：0
> 
> 时间：2012-09-15T01:44:16.387
> 
> 标签：voice, camtasia

我是 Camtasia 的新手。现在，当我录制屏幕上的活动时，我需要使用机器旁白而不是麦克风作为音频输入，我没有找到任何解决方案。你们中有人有任何想法将机器旁白集成到 camtasia 视频中吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:21:13.280

Stack Overflow 是一个面向程序员的问答网站。如果您愿意，可以在[http://feedback.techsmith.com/techsmith](http://feedback.techsmith.com/techsmith)询问。这是 TechSmith 的一般支持论坛。TechSmith 是 Camtasia 的创建者。如果您选择在那里问，请详细说明“机器叙述者”，因为我真的不明白。祝你好运！

# php - CodeIgniter 和二叉树迭代/组织

> ID：12433861
> 
> 赞同：1
> 
> 时间：2012-09-15T01:44:48.743
> 
> 标签：php, mysql, codeigniter, recursion, tree-traversal

我正在开发一个需要在 HTML 中输出完美二叉树的 CI 项目。树中的每个节点都与表中的一条记录相关。该表目前有超过 1000 万行，我将需要输出深度至少为 9 的树，因此如果没有以最佳方式构建，事情可能会很快变慢。

使用 CI 的 MVC 范式，组织这些数据的最佳方式是什么？有了这么大的表，我不想过多地访问数据库，并且构建这样的树会很快变得昂贵（# cells = 2^(depth+1)-1）。

到目前为止，我已经构建了控制器来处理请求（简单的部分）和一个库来通过递归地访问数据库并为每个节点创建一个对象来处理/构建树结构。我有点纠结于如何组织其余部分。我应该从视图/帮助器中处理树遍历和 HTML 输出吗？如果我们这样做，我知道人们试图避免的视图中会有一大堆逻辑。同样，我知道从库中输出任何 HTML 都被看不起，但鉴于这种结构，从那里处理所有递归/输出似乎是合乎逻辑的。

任何建议都会非常有帮助，并在此先感谢！

# ruby - Aptana 代码辅助

> ID：12433863
> 
> 赞同：1
> 
> 时间：2012-09-15T01:45:22.560
> 
> 标签：ruby, aptana3, content-assist

我是 Ruby 语言（v1.9.3）和 Aptana 的新手。我在使用 Aptana（3.2.2 版本）代码辅助时遇到问题。问题是它没有显示任何数据类型的任何核心/库方法。例如，如果我输入：

```
s= String.new("hello")
#Expecting the IDE to show up capitalize method when I type 'c' after string
s.c
---
#Expecting the IDE to show up capitalize method when I type 'c' after string
"hello".c
---
s="hello"
#Expecting the IDE to show up capitalize method when I type 'c' after string
s.c 
```

输入“。”后弹出代码帮助。并在输入字母“c”后消失。我在这里期待的是 IDE 在字符串中显示大写方法。但是，它没有显示 capitalize() 或任何其他字符串方法。但是，如果我输入“。” 在字符串之后，它会正确地将其检测为字符串，但代码辅助显示其他方法，例如 toutf16()、block_scanf() .. 等，而不是我想要的库方法。

我尝试更改文件关联（通过在 Window >> Preferences >> Editors >> File Associations >> *.rb 中将 Aptana Source Editor 默认设置为默认）。IDE 代码辅助显示了我已经实现的类方法，但没有显示任何库方法。如果它可以为我提供 Ruby 文档中给出的库方法，那将非常有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-18T10:31:16.157

如果你想要**真正的自动**补全，最好的方法（至少对我来说）是使用**IRB**之类的**Interactive Ruby Shell**，或者它的替代品。我最喜欢的一个是[PRY](http://pryrepl.org/)。安装真的很简单：

 **```
$ gem install pry
$ pry 
```

在控制台中，只需使用 [TAB] 键即可自动完成，它会向您显示所有可能性。我还可以推荐您观看Joshua Cheek 的[Pry Screencast 视频，其中他解释了](https://vimeo.com/26391171)**Pry**的最重要功能。**

# javascript - 如何在多选项卡浏览器中更改选项卡之前捕获旧 URL？

> ID：12433865
> 
> 赞同：0
> 
> 时间：2012-09-15T01:45:42.397
> 
> 标签：javascript, firefox, firefox-addon

我正在制作一个 Firefox 插件，它将记录用户在其浏览器中保持网页打开的时间。

通过添加进度侦听器，我能够捕获在浏览器中打开的每个新网页的链接（无论是在新选项卡中还是在已打开的选项卡中）：

```
addProgressListener(myAddon_urlBarListener,
                    Components.interfaces.nsIWebProgress.NOTIFY_ALL); 
```

然后我`onLocationChange`用来获取标签的新 URL。

问题是我不知道选项卡的旧 URL 能够停止计时器并计算该网页的持续时间。现在，如果我关闭网页的选项卡，我只能计算时间，因为我能够捕获关闭选项卡事件以及关闭前页面中的链接是什么。

如果我在同一个选项卡中打开一个新 URL，我需要一种方法来捕获旧网页的 URL，即使在浏览器中打开了多个选项卡，这也需要工作。顺便说一句，我没有使用 jQuery，但如果需要，我会的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T13:08:53.833

如果在两个选项卡中打开相同的 URL 怎么办？您应该关注标签，而不是 URL。您的`onLocationChange`函数应该找到`<browser>`与选项卡关联的元素并记住它的 URL（只要时间）。下次您看到相同的`<browser>`元素时，您将获得所需的所有信息。目前存储有关浏览器数据的最佳方法是，使用[方法](https://developer.mozilla.org/en-US/docs/XUL/tabbrowser#m-getBrowserForDocument)[`WeakMap`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/WeakMap)可以找到元素。所以这样的事情应该有效：`<browser>`[`tabbrowser.getBrowserForDocument()`](https://developer.mozilla.org/en-US/docs/XUL/tabbrowser#m-getBrowserForDocument)

```
browsers: new WeakMap(),

onLocationChanged: function(webProgress, request, location, flags)
{
  if (typeof flags == "number" &&
      (flags & Components.interfaces.nsWebProgressListener.LOCATION_CHANGE_SAME_DOCUMENT))
  {
    // Ignore anchor changes
    return;
  }

  var doc = webProgress.DOMWindow.document;
  var browser = gBrowser.getBrowserForDocument(doc);
  if (this.browsers.has(browser))
  {
    // We know this tab already, record data for previous URL
    var data = this.browsers.get(browser);
    recordPageClosed(data.url, data.startTime);
  }

  // Start timer for this tab
  this.browsers.set(browser, {url: location.spec, startTime: Date.now()});
} 
```

当然，您仍然必须处理`TabClose`事件。在那里，您将需要通过相应元素查找元素的[`tabbrowser.getBrowserForTab()`方法](https://developer.mozilla.org/en-US/docs/XUL/tabbrowser#m-getBrowserForTab)。`<browser>``<tab>`

# android - 如何以编程方式显示 Android 状态栏？

> ID：12433869
> 
> 赞同：3
> 
> 时间：2012-09-15T01:46:54.713
> 
> 标签：android, hide, show, statusbar, expand

当它从服务中隐藏时，有没有办法显示android状态栏？显示我的意思是屏幕顶部的栏，而不是扩大通知区域。

播放商店中的智能状态栏以某种方式在没有 root 的情况下执行此操作。

另外，我也尝试过扩展状态栏通知，代码如下：

```
Object service = mContext.getSystemService("statusbar");
Class<?> statusbarManager = Class.forName("android.app.StatusBarManager");
Method expand = statusbarManager.getMethod("expand");
expand.invoke(service); 
```

具有所需的权限。但似乎什么也没发生。

任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-03T20:20:00.457

原来这是一个JB限制。如果app是全屏的，原来的方法是不能展开状态栏的。

# google-app-engine - 在 GAE 中查询过滤字符串列表属性

> ID：12433877
> 
> 赞同：2
> 
> 时间：2012-09-15T01:49:15.090
> 
> 标签：google-app-engine, google-cloud-datastore

有没有办法使用 query.filter() 来查看元素是否在实体的字符串列表属性中？所以：

```
class Rainbow(db.Model):
    colors = StringListProperty()

def filt():
    results = db.GqlQuery("SELECT * FROM Rainbow WHERE colors = 'yellow'")
    return results 
```

这将返回彩虹中颜色“黄色”的所有结果。但是，有没有办法使用查询对象来完成这个？所以：

```
def filt():
    q = Rainbow.all()
    q.filter('colors =', 'yellow') # something like this? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T22:58:22.233

您提供的代码应该可以工作（假设您添加代码以实际运行查询并获取结果）。如果它不起作用，请显示您尝试的实际代码和您遇到的错误。

# c++ - 在 C++ 硬币找零算法中计算错误

> ID：12433878
> 
> 赞同：2
> 
> 时间：2012-09-15T01:49:27.900
> 
> 标签：c++, algorithm

所以，我正在尝试构建这个程序，我想从用户那里获取一个输入，即总金额和支付金额。现在，余额应细分为 10 美元、5 美元、1 美元、25 美分硬币、10 美分硬币和镍币。但是下面的程序/代码告诉我天平中四分之一、硬币和镍币的总数，而不是剩余的。例如 。如果总金额为 5.76 且已支付金额为 $15，则应显示零 $10、一 $5、4 $1、零 $.25、2 $.10、零 $.05 和四 $.01。

请告诉我这里的代码有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T02:03:49.327

最简单的解决方法是将数字作为浮点数，然后将其乘以 100，然后将其保存为 int。

```
#include <iostream>

using namespace std;

int main ( )
{
    float userNUmber;
    int change, quarters, dimes, nickels, pennies; // declare variables
    cout <<"Enter the amount of money: ";
    cin >> userNUmber; // input the amount of change
    change = userNUmber * 100;
    quarters = change / 25; // calculate the number of quarters
    change = change % 25; // calculate remaining change needed
    dimes = change / 10; // calculate the number of dimes
    change = change % 10; // calculate remaining change needed
    nickels = change / 5; // calculate the number of nickels
    pennies = change % 5; // calculate pennies

    cout << "\nQuarters: " << quarters << endl; // display # of quarters
    cout << " Dimes: " << dimes << endl; // display # of dimes
    cout << " Nickels: " << nickels << endl; // display # of nickels
    cout <<" Pennies: " << pennies << endl; // display # of pennies
    system("Pause");
    return (0);
} 
```

在循环中也这样做是这样的

```
#include <iostream>
#include <vector>
#include <string>
using namespace std;

int main ( )
{
    float userNUmber;
    int change, quarters, dimes, nickels, pennies; // declare variables

    cout <<"Enter the amount of money: ";
    cin >> userNUmber; // input the amount of change
    change = userNUmber * 100;

    vector<int> coins(4, 0);
    coins[0] = 25; coins[1] = 10; coins[2] = 5; coins[3] = 1;
    vector<string> coinsName(4, "");
    coinsName[0] = "Quaters"; coinsName[1] = "Dimes"; coinsName[2] = "Nickels"; coinsName[3] = "Pennies";

    for(size_t i = 0; i < coins.size(); ++i)
    {
        int numberOfCoins = change / coins[i]; // calculate the number of quarters
        change = change % coins[i]; // calculate remaining change needed
        cout << coinsName[i] << ": " << numberOfCoins << endl; // display # of quarters
    }
    system("Pause");
    return (0);
} 
```

# javascript - 我的“切换类”javascript 不工作

> ID：12433879
> 
> 赞同：2
> 
> 时间：2012-09-15T01:49:31.387
> 
> 标签：javascript

我正在使用这个小脚本在单击另一个元素时切换元素的类。这是精简的代码：

```
//Toggle comments
function togglecomments() {
    function shiftcomments() {
        var comments = document.getElementsByTagName('aside')[0];
        if(comments.className = "hide"){comments.className = "show";}
        else{comments.className = "hide";};
    }
    var commenttoggle = document.getElementById('toggle-comments');
    bindEvt(commenttoggle, "click", shiftcomments);

}
bindEvt(window, "load", togglecomments); 
```

问题是它只工作一次，但在单击之后，该类不再切换。对于那些感兴趣的是我使用的事件处理程序：http: [//pastebin.com/md3dPvMJ](http://pastebin.com/md3dPvMJ)（之前它工作得很好，所以它不应该是问题。）

任何想法我做错了什么？

感谢您的反馈家伙！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:54:13.103

在你的 if 语句中，你有这个：

```
if(comments.className = "hide") 
```

它应该是：

```
if(comments.className === "hide") 
```

这也可以：

```
if(comments.className == "hide") 
```

你实际上在做什么是将className更改为“隐藏”，而不是检查是否相等。

对于和之间的区别`==`，`===`我实际上会在 stackoverflow 向您指出另一个问题：[JavaScript 比较中应该使用哪个等于运算符（== vs ===）？](https://stackoverflow.com/questions/359494/javascript-vs-does-it-matter-which-equal-operator-i-use)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-23T07:07:11.667

这是我正在使用的一个小功能，带有 jQ​​uery，但它可以更新。

```
 toggleClass = function (obj, className) {
            var currentClass = $(obj).attr('class'),
                hasIt = false;
            if (currentClass.indexOf(className) < 0) {
                currentClass += " " + className;
                hasIt = true;
            } else {
                currentClass = currentClass.replace(className, "");
                hasIt = false;
            }

            $(obj).attr('class', currentClass);
            return hasIt;
        }; 
```

# wix - 如何使用 WiX 创建 .NET 事件日志源

> ID：12433883
> 
> 赞同：15
> 
> 时间：2012-09-15T01:50:06.937
> 
> 标签：wix, event-log, wix3.5, eventlog-source

[这是对How do you create an event log source using WiX](https://stackoverflow.com/questions/58538/how-do-you-create-an-event-log-source-using-wix) and [WIX: Create EventSource using .NET message file](https://stackoverflow.com/questions/3590015/wix-create-eventsource-using-net-message-file)的有意半重复。

我的第一个问题是，它真的必须如此复杂吗？是否有某种方法可以简单地指定给 WiX，“我的程序是一个 .Net 程序，它需要写入事件日志 - 请进行必要的设置”？

好的，假设这是不可能的，我希望收到任何关于必要的 WiX 语句以使其工作的建议，无论安装了哪个版本的 .Net Framework，也不管它是 32 位还是 64 位系统。毕竟，我的大多数 .Net 程序都能够在 .Net 2.0 或更高版本上运行，并且可以在 32 位或 64 位上运行，所以这无关紧要。

最后一个问题：有没有办法让它经得起未来的考验？如果我今天生成的 MSI 文件在五年内仍然可以工作，那就太好了，即使 .Net CLR 2.0 和 4.0 在 Windows 11 或当时所谓的任何东西中都已被归入垃圾箱。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-09-20T14:16:56.077

按照要求。使用 UtilExtension 在 .NET 4 full 和 .NET 4 客户端配置文件上工作的解决方案：

1）添加这些 PropertyRef 的：

```
<PropertyRef Id="NETFRAMEWORK40FULLINSTALLROOTDIR"/>
<PropertyRef Id="NETFRAMEWORK40FULLINSTALLROOTDIR64"/>
<PropertyRef Id="NETFRAMEWORK40CLIENTINSTALLROOTDIR"/>
<PropertyRef Id="NETFRAMEWORK40CLIENTINSTALLROOTDIR64"/> 
```

2）32位部分：

```
<!-- Event Source creation for 32bit OS with .NET 4 Full-->
<Component Id="CreateEventSource32BitFullNet4" Guid="your-guid-here">
    <Condition><![CDATA[NETFRAMEWORK40FULLINSTALLROOTDIR AND NOT VersionNT64]]></Condition>
    <CreateFolder/>
    <!-- Create an Event Source -->
    <Util:EventSource
          xmlns:Util="http://schemas.microsoft.com/wix/UtilExtension"
          Name="YOUR APP NAME"
          Log="Application"
          EventMessageFile="[NETFRAMEWORK40FULLINSTALLROOTDIR]EventLogMessages.dll"/>
</Component>

<!-- Event Source creation for 32bit OS with .NET 4 Client Profile-->
<Component Id="CreateEventSource32BitClientNet4" Guid="your-guid-here">
    <Condition><![CDATA[NETFRAMEWORK40CLIENTINSTALLROOTDIR AND NOT VersionNT64]]></Condition>
    <CreateFolder/>
    <!-- Create an Event Source -->
        <Util:EventSource
          xmlns:Util="http://schemas.microsoft.com/wix/UtilExtension"
          Name="YOUR APP NAME"
          Log="Application"
          EventMessageFile="[NETFRAMEWORK40CLIENTINSTALLROOTDIR]EventLogMessages.dll"/>
</Component> 
```

3）64位部分：

```
<!-- Event Source creation for 64bit OS with .NET 4 Full -->
<Component Id="CreateEventSource64BitFullNet4" Guid="your-guid-here">
    <Condition><![CDATA[NETFRAMEWORK40FULLINSTALLROOTDIR64 AND VersionNT64]]></Condition>
    <CreateFolder/>
    <!-- Create an Event Source -->
    <Util:EventSource
          xmlns:Util="http://schemas.microsoft.com/wix/UtilExtension"
          Name="YOUR APP NAME"
          Log="Application"
          EventMessageFile="[NETFRAMEWORK40FULLINSTALLROOTDIR64]EventLogMessages.dll"/>
</Component>

<!-- Event Source creation for 64bit OS with .NET 4 Client Profile -->
<Component Id="CreateEventSource64BitClientNet4" Guid="your-guid-here">
    <Condition><![CDATA[NETFRAMEWORK40CLIENTINSTALLROOTDIR64 AND VersionNT64]]></Condition>
    <CreateFolder/>
    <!-- Create an Event Source -->
    <Util:EventSource
          xmlns:Util="http://schemas.microsoft.com/wix/UtilExtension"
          Name="YOUR APP NAME"
          Log="Application"
          EventMessageFile="[NETFRAMEWORK40CLIENTINSTALLROOTDIR64]EventLogMessages.dll"/>
</Component> 
```

# apache - .htaccess 多个获取变量的帮助

> ID：12433885
> 
> 赞同：1
> 
> 时间：2012-09-15T01:50:22.690
> 
> 标签：apache, .htaccess, mod-rewrite

我希望我的 URL 看起来像：localhost/website/148/category

这是我目前的 .htaccess 文件

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)(.*)$ /website/index.php?id=$1&c=$2 
```

谁能帮我？我一直在四处寻找答案，到目前为止，对我来说没有任何效果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:06:43.087

如果 htaccess 文件位于网站目录中，显然这会改变规则所需的内容。

尝试

```
RewriteEngine on
RewriteBase /website/
RewriteCond %{REQUEST_FILENAME} !-f 
RewriteCond %{REQUEST_FILENAME} !-d 
RewriteRule ^/?([^/]+)/([^/]+)/?$ /website/index.php?id=$1&c=$2 
```

至于修复 CSS 和图像等的相对链接，您需要通过将其放在页面标题中来更正您的相对 URI 基础：

```
<base href="/website/"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T01:55:17.133

尝试这个：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^.]+)?/([^.]+)?/?$ /website/index.php?id=$1&c=$2 
```

# php - Linux 中的 Exec() 命令不会从 PHP 页面执行任何操作

> ID：12433886
> 
> 赞同：2
> 
> 时间：2012-09-15T01:50:30.613
> 
> 标签：php, linux, exec, festival

我正在尝试从 Web 浏览器中的 PHP 文件运行以下命令：

```
 exec('festival --tts /var/www/test.txt &'); 
```

不幸的是，什么也没有发生。我想过尝试“回声”，但没有什么可以返回来查看命令是否有效。我将 test.txt 的权限设置为 777。我还在 shell 中运行了该命令，它工作得很好——只是在由 PHP 脚本提交时不行。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T01:53:40.740

提供`festival`二进制文件的完整路径，您可以在控制台上使用`which festival`命令找到它，然后在 exec 调用中使用它，如下所示：

```
exec('/usr/bin/festival --tts /var/www/test.txt &'); 
```

**更新：** 您需要确保创建文件的文件夹对运行 php 的用户具有写权限，该用户通常`www-data`在基于 debian 的发行版上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T01:56:02.233

如果我正确理解您要执行的操作，则您不会返回输入。其语法是：

```
exec('command', $output); 
```

其中 $output 是存储脚本输出的变量。奇怪的是，这个输出将作为一个数组返回，所以`implode()`如果你期待一个字符串，当你完成时不要忘记它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T01:57:44.160

程序是否`festival`打印任何输出？如果是这样，请尝试捕获它。还要检查返回值。

```
exec('/usr/bin/festival --tts /var/www/test.txt &', $output, $return); 
```

转储输出数组，如下所示：

```
var_dump($output); 
```

任何非零返回值通常表示错误：

```
echo $return; 
```

# java - 使用 Java 启动 Windows exe

> ID：12433888
> 
> 赞同：-2
> 
> 时间：2012-09-15T01:50:50.150
> 
> 标签：java, windows, native, runtime.exec

我想了解如何使用 Java 代码在 Windows 中打开任何 exe。我之前搜索过谷歌，他们只向我展示了他们使用的部分代码，我认为，因为它似乎无法编译。

我已经下载了JDK 7进行编译。我目前不使用 Eclipse，并且解释我必须做些什么才能使其详细工作会很有帮助。

什么 Sri Harsha Chilakapati 说：我需要为代码创建一个类吗？

感谢那些回答但我不太明白你的意思的人，但我确实设法找到了一个有我所追求的网站： [http ://www.rgagnon.com/javadetails/java-0014.html](http://www.rgagnon.com/javadetails/java-0014.html)

```
public class Test {
  public static void main(String[] args) throws Exception {
    Process p = Runtime.getRuntime().exec(
    "\"c:/program files/windows/notepad.exe\"");
p.waitFor();
  } 
} 
```

以上是我所追求的，但无论如何再次感谢回答的人。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T01:53:24.010

尝试这个。

```
String myExe = "C:\\MyExe.exe";
String args  = "";

Runtime.getRuntime().exec(myExe + " " + args); 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-15T01:58:50.723

我会推荐[ProcessBuilder](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html)，尤其是对于其他参数。

# css - 资产：预编译抛出错误：未定义的方法“每个”为真：TrueClass

> ID：12433889
> 
> 赞同：1
> 
> 时间：2012-09-15T01:51:06.227
> 
> 标签：css, ruby-on-rails, ruby, asset-pipeline

我刚刚开始维护别人的代码库，我无法让它在生产环境中本地运行。预编译样式表时会出现错误本身。

这是一个运行在 Ruby 1.9.2 上的 Rails 3.2.6 应用程序。我注意到在下面的输出中，gemset 被全局使用，这很奇怪，因为当我运行时

rvm gemset 列表

它表示正在使用项目的 gemset。我不确定这是否是我的问题的原因，如果它不相关。

我真的不知道该怎么做才能解决这个问题。有什么建议么？

```
RAILS_ENV=production rake assets:precompile --trace
** Invoke assets:precompile (first_time)
** Execute assets:precompile
/Users/bendowney/.rvm/rubies/ruby-1.9.2-p320/bin/ruby /Users/bendowney/.rvm/gems/ruby-1.9.2-p320@global/bin/rake assets:precompile:all RAILS_ENV=production RAILS_GROUPS=assets --trace
** Invoke assets:precompile:all (first_time)
** Execute assets:precompile:all
** Invoke assets:precompile:primary (first_time)
** Invoke assets:environment (first_time)
** Execute assets:environment
** Invoke tmp:cache:clear (first_time)
** Execute tmp:cache:clear
** Execute assets:precompile:primary
rake aborted!
undefined method `each' for true:TrueClass
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/actionpack-3.2.6/lib/sprockets/static_compiler.rb:47:in `compile_path?'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/actionpack-3.2.6/lib/sprockets/static_compiler.rb:22:in `block in compile'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/sprockets-2.1.3/lib/sprockets/base.rb:212:in `block in each_logical_path'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/sprockets-2.1.3/lib/sprockets/base.rb:200:in `block (2 levels) in each_file'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/sprockets-2.1.3/lib/sprockets/base.rb:190:in `each_entry'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/sprockets-2.1.3/lib/sprockets/base.rb:198:in `block in each_file'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/sprockets-2.1.3/lib/sprockets/base.rb:197:in `each_file'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/sprockets-2.1.3/lib/sprockets/base.rb:210:in `each_logical_path'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/actionpack-3.2.6/lib/sprockets/static_compiler.rb:18:in `compile'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/actionpack-3.2.6/lib/sprockets/assets.rake:56:in `internal_precompile'
/Users/bendowney/.rvm/gems/ruby-1.9.2-p320@challenge/gems/actionpack-3.2.6/lib/sprockets/assets.rake:70:in `block (3 levels) in <top (required)>' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T02:09:39.280

在您的*环境*/production.rb 中，确保您`config.assets.precompile`是一个 Array 而不是设置为`true`. [文档](http://guides.rubyonrails.org/asset_pipeline.html)中的示例：

```
config.assets.precompile += ['admin.js', 'admin.css', 'swfObject.js'] 
```

# c# - 在 https 中阻止网站

> ID：12433891
> 
> 赞同：3
> 
> 时间：2012-09-15T01:51:52.563
> 
> 标签：c#, https

此代码阻止网站前： http: [//google.com](http://google.com)或 plus.google.com 但[https://google.com](https://google.com)不起作用

```
e.Cancel = e.Url.Host.Contains("google"); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-15T02:07:01.340

```
private void webBrowser1_Navigating(object sender, WebBrowserNavigatingEventArgs e)
 { 
    e.Cancel = e.Url.ToString().Contains("google"); 
 } 
```

# android - Sqlite 适用于所有移动设备？

> ID：12433895
> 
> 赞同：1
> 
> 时间：2012-09-15T01:52:36.413
> 
> 标签：android, sqlite

我正在使用带有 android 2.1 的 sqlite 。现在，我想知道 sqlite 是否适用于任何带有 android 的手机？，也许我的问题有点傻，但我只是想确保一旦我完成我的应用程序就不会出现问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T01:57:24.623

是的，可以安全地假设每台运行 Android 的设备都可以处理 sqlite ;) 它从 API 级别 1 开始就存在

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-15T02:00:42.307

是的，Sqlite 是最简单的数据库，最受所有 Android 设备的支持。您无需担心它是否会支持。

# objective-c - -[UICIColor colorSpaceName]：无法识别的选择器发送到实例

> ID：12433897
> 
> 赞同：5
> 
> 时间：2012-09-15T01:53:02.740
> 
> 标签：objective-c, ios, user-interface

我正在为我的 iOS 5 应用程序中的主题支持创建几个类。我的主题存储在 plist 中，然后我将它们加载到一个 Theme 对象中，我在我的应用程序中使用它来初始化各种控件。我将颜色作为字符串存储在主题中，然后使用此代码将它们转换为 UIColor：

```
UIColor* color = [UIColor colorWithCIColor:[CIColor colorWithString:@"0.5 0.5 0.5 1.0"]]; 
```

这适用于大多数控件，但是当我尝试将导航栏的色调设置为这样时：

```
//navigation bar
[self.navigationController.navigationBar setTintColor:color]; 
```

我得到这个例外：

```
-[UICIColor colorSpaceName]: unrecognized selector sent to instance 
```

当我在不使用 CIColor 的情况下初始化颜色时，例如：

```
UIColor* color = [UIColor colorWithRed:0.5 green:0.5 blue:0.5 alpha:1.0];
[self.navigationController.navigationBar setTintColor:color]; 
```

一切都很好。

任何线索是什么原因造成的？我找不到太多关于 UICIColor 的信息，但我猜由于 UIColor 只是 CGColor 或 CIColor 之上的一个包装器，因此存在实现差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-27T11:30:14.773

[当我尝试访问 uibutton 的 titleLabel 属性（xcode 4.5 和 IOS sdk 6.0）时，](https://stackoverflow.com/questions/12586834/strange-crash-when-i-try-to-access-to-uibuttons-titlelabel-property-xcode-4-5)请参阅奇怪的崩溃

我找到了一种解决方法：在使用我的 colorWithCIColor 之前，我使用以下方法复制了它：

```
newcolor = [UIColor colorWithCGColor:newcolor.CGColor]; 
```

它解决了崩溃。反正很奇怪

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-11-03T23:01:45.247

我有类似的问题

```
[UIColor colorWithCIColor:[CIColor colorWithString:color]]; 
```

尽管我为此寻找了一个优雅的解决方案，但最终我找到了一个解决方案，该解决方案停止了问题并使我的应用程序能够像以前一样继续运行。

我的颜色字符串与您的格式相同：

```
"0.5 0.7 0.2 0.75" 
```

我发现修复它的最简单方法就是执行以下操作：

```
NSArray * colorParts = [color componentsSeparatedByString: @" "];

CGFloat red = [[colorParts objectAtIndex:0] floatValue];
CGFloat green = [[colorParts objectAtIndex:1] floatValue];
CGFloat blue = [[colorParts objectAtIndex:2] floatValue];
CGFloat alpha = [[colorParts objectAtIndex:3] floatValue];

UIColor * newColor = [UIColor colorWithRed:red green:green blue:blue alpha:alpha]; 
```

手动拆分每个值，然后将其放入 colorWithRed: 代码中。

这意味着您可以保留颜色字符串，但摆脱导致所有崩溃的有问题的 colorWithString 代码。

希望这可以帮助

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-17T11:13:19.647

`UIColor`定义在`iOS 2.0`，因为`[UIColor colorWithCIColor]`转换为`iOS5.0`，我认为苹果转换错误，你可以使用下面的代码：

```
 CIColor *ci_ = [CIColor colorWithString:colorString];
    UIColor *color = [UIColor colorWithRed:ci_.red green:ci_.green blue:ci_.blue alpha:ci_.alpha];
    // UIColor *color = [UIColor colorWithCIColor:[CIColor colorWithString:colorString]]; 
```

# eclipse - Eclipse 内容辅助自动为变量附加类型

> ID：12433900
> 
> 赞同：17
> 
> 时间：2012-09-15T01:53:23.813
> 
> 标签：eclipse, eclipse-juno, content-assist

我刚开始使用 Juno 几天，内容辅助机制似乎与以前的行为有所不同。

例如，如果我尝试声明一个变量

```
Boolean isVisible 
```

Juno的内容助手会给你一个带有变量名的下拉列表

```
isVisibleBoolean 
```

作为提示。

非常烦人的是，无论我输入什么（; 或 SPACE），都会选择“isVisibleBoolean”。

有人知道如何禁用自动变量类型附加的东西吗？

非常感激。

我目前使用的是 Mac OS X 10.8.1，尚未在 Windows 中对其进行测试。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-07-16T17:08:21.633

根据[Eclipse Bug 412992](https://bugs.eclipse.org/bugs/show_bug.cgi?id=412992)的讨论，检查您的 Content Assist Auto Activation 设置：Window->Preferences->Java->Editor->Content Assist

例如，如果字符 az 被列为“Java 的自动激活触发器”，您可以删除它们，并且当您点击 ' ' 或 ';' 时，类型名称不会自动附加到新的变量名称中。您可以根据可用选项确定适合您风格的最佳配置/折衷方案。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-09T09:42:43.527

似乎这是不可能的。查看 Eclipse 错误 378588 的答案：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=378588](https://bugs.eclipse.org/bugs/show_bug.cgi?id=378588)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-10T08:28:44.233

不是一个完美的解决方案：

Window->Preference->Java->Editor->Content Assist->Java 的自动激活触发器：.ABCDEFGHIJKLMNOPQRSTUVWXYZ

这样，只会弹出类和类型的提案。

只是一个建议，选择权在你。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-23T13:48:22.127

这在 Eclipse 2018-12 中仍然是一个问题，它似乎只有在您将`Auto activation triggers for Java`设置更改为 eg时才会发生，这`._abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ`将使 Content Assist（几乎）总是弹出，即使不按`Ctrl`+ `Space`（Windows）也是如此。

Eclipse 2018-12 中添加了一个新设置，使其不那么烦人（在[错误报告](https://bugs.eclipse.org/bugs/show_bug.cgi?id=378588)下方的评论中提到）：

在`Window - Preferences - Java - Editor - Content Assist`方框中打勾`Disable insertion triggers except 'Enter'`。

启用此设置后，Content Assist 仍会触发（取决于其他设置），但您必须按下`Enter`才能接受建议。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-16T06:00:40.310

您看到的是对象类型的名称完成。这通常是有道理的，例如按下 Ctrl-Space 后将`List book`完成到`List bookList`. 对于原始类型，这没有完成，因此`int count`在按下 Ctrl-Space 时不会完成任何操作。通过将变量声明为原始布尔值，这将是一个（不是很好）解决您的问题的方法。

我真正推荐的解决方案是改变你编写变量声明的风格。对于您的示例，`isVisible = false`改为编写，让编辑器抱怨缺少类型声明，点击`Ctrl`- `1`（从您的光标可能放置的任何位置）`Enter`，.

# backbone.js - 我的路由器无法使用后退/前进点击

> ID：12433908
> 
> 赞同：0
> 
> 时间：2012-09-15T01:55:11.550
> 
> 标签：backbone.js

我的路由器是这样的：

```
define(function(require) {
var _         = require('underscore'),
    Backbone  = require('backbone'),

    homeStageView,
    homeSidebarView,
    yxyStageView;

return Backbone.Router.extend({
    routes: {
        '/web/:route'     : 'viewLoader'
    },

    initialize: function() {
        //this._bindRoutes();
        $('.link').click(function(e) {
            e.preventDefault();
            Backbone.history.navigate($(this).attr('href'), true);
        });
    },

    viewLoader: function(route) {
        switch(route) {
            case 'home': 
                this.homeHandler();
                break;
            case 'yxy':
                this.yxyHandler();
                break;
        }
    },

    // navigation handlers
    homeHandler: function() {
        if ( !homeStageView ) {
            require(['views/home-stage-view'], function(HomeStageView) {
                homeStageView = new HomeStageView();
                homeStageView.render();
            });    
        }
        else {
            homeStageView.render();
        }
        this.renderHomeSidebarView();
    },

    yxyHandler: function() {
        if ( !yxyStageView ) {
            require(['views/yxy-stage-view'], function(YxyStageView) {
                yxyStageView = new YxyStageView();
                yxyStageView.render();
            });    
        }
        else {
            yxyStageView.render();
        }
        this.renderHomeSidebarView();
    },

}); 
```

});

在我的主视图中，我像这样初始化路由器：

```
appRouter = new AppRouter();    
if ( history && history.pushState ) {
    Backbone.history.start({pushState: true});
    console.log('has pushState');
}
else {
    Backbone.history.start();
    console.log('no pushState');
} 
```

这适用于加载我的所有视图，但当用户单击后退按钮时它不起作用。

地址栏中的 url 可能会相应地出现，但仅此而已。显然，我错过了一些东西。

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T02:05:45.803

来自[精美手册](http://backbonejs.org/#Router-extend)：

> **延长** `Backbone.Router.extend(properties, [classProperties])`
> 
> [...] 请注意，您需要避免在路由定义中使用前导斜杠：

您的路线是`/web/:route`如此尝试删除前导斜杠：

```
routes: {
    'web/:route': 'viewLoader'
} 
```

# java - 我的@produced EntityManager 线程在 servlet 容器中是否安全？

> ID：12433914
> 
> 赞同：3
> 
> 时间：2012-09-15T01:57:04.187
> 
> 标签：java, jpa, thread-safety

在我的一个项目中，我试图将我的持久性管理从应用程序切换到容器。我正在遵循这些说明：[http ://docs.oracle.com/javaee/6/tutorial/doc/gkhrg.html](http://docs.oracle.com/javaee/6/tutorial/doc/gkhrg.html)

我读过 EntityManager 不是线程安全的，只是想确保我的设置是正确的。我的担忧：[http](http://weblogs.java.net/blog/2005/12/19/dont-use-persistencecontext-web-app) ://weblogs.java.net/blog/2005/12/19/dont-use-persistencecontext-web-app 。

我有一个产生持久性上下文的类。

```
@Singleton
public class JpaResourceProducer {

    //The "pu" unit is defined with transaction-type="JTA"
    @Produces
    @PersistenceUnit(unitName = "pu")
    @Database
    EntityManagerFactory databasePersistenceUnit;

    @Produces
    @PersistenceContext(unitName = "pu")
    @Database
    EntityManager databaseEntityManager;

    /* Alternative
    @PersistenceContext(unitName = "pu")
    private EntityManager em;

    @Produces
    @UserDatabase
    public EntityManager create() {
        return em;
    }

    public void close(@Disposes @Database EntityManager em) {
        em.close();
    } 
    */
} 
```

然后我有一个注入 DAO 的 jax-rs 资源。

```
@RequestScoped
@Path("/endpoint")
public class MyResource {

    @Inject private Dao dao;

    @GET
    @Produces({MediaType.APPLICATION_JSON})
    public Converter get() {

        MyEntity entity = dao.find(1);

        Converter converter = new Converter(entity);
        return converter;
    }

} 
```

最后是`DAO`我注入`EntityManager`.

```
@Singleton
public class JpaDao<T, K extends Serializable> implements Dao<T, K> {

    protected Class<T> entityClass;

    @Inject
    @Database
    EntityManager em;

    public JpaDao() {
        ParameterizedType genericSuperclass = (ParameterizedType) getClass().getGenericSuperclass();
        this.entityClass = (Class<T>) genericSuperclass.getActualTypeArguments()[0];
    }

    public T find(K id) {
        return em.find(entityClass, id);
    }

    ....
} 
```

***1\. 就线程安全和整体性能而言，这是一个好的设置吗？***

* * *

奖励问题：

在`JpaResourceProducer`我有一个替代设置用于`EntityManager`手动关闭管理器的位置。

***2.我的集装箱处理是否`EntityManager`自动关闭？***

Oracle 的示例包括一个`EntityManagerFactory`.

***`EntityManagerFactory`3.当我使用 CMP 时，我真的需要一个吗？***

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-16T10:29:22.693

你的容器是什么？从使用的注释来看，我认为它至少与 Java EE 6 Web Profile 兼容，在这种情况下，您过于复杂了。

1.  本教程介绍了多个持久性单元的生产。您的应用程序中是否存在这种情况？如果不是这样，直接注入到 EJB 中会更可靠，也不会那么*神奇*——我也不确定单例生成的持久性上下文的事务行为。

2.  单例`JpaDAO`意味着，在您的应用程序中一次只能有一个数据库操作，因此这是严重的性能瓶颈。相反，它应该是无状态的（并通过传统方式注入其持久性上下文）。

通常，将您的 DAO 和业务逻辑，甚至您的 JAX-RS 端点实现为会话 EJB，并让容器正确处理并发和事务。还可以使用其他示例来源，例如[Adam Bien 的](http://www.adam-bien.com/roller/abien/ "亚当的博客") [JavaEE Patterns](http://kenai.com/projects/javaee-patterns/ "JavaEE 模式项目")。

# vb.net - 打开进程并抓取窗口标题。我哪里做错了？

> ID：12433925
> 
> 赞同：1
> 
> 时间：2012-09-15T01:58:52.373
> 
> 标签：vb.net, process

在我的应用程序中，我允许用户从打开的文件对话框中添加程序，然后将项目添加到列表视图并将项目位置保存到标签中。所以我想做的是当列表视图中的程序被选中并按下按钮时，它启动一个计时器，这个计时器检查进程是否正在运行，如果它没有启动进程，一次进程启动它获取进程的窗口标题并将其发送到另一个表单上的文本框。

**编辑：问题是如果有人能看到它为什么不工作，我的意思是启动进程，然后当它开始关闭表单并将进程窗口标题添加到另一个表单上的文本框时。我试图让它工作，但我做不到。我知道它获得的进程名称是正确的我认为我的问题与我的 for 循环有关。基本上它现在没有做任何可见的事情。**

我觉得我的代码非常接近，我希望它只需要一些小的调整。任何帮助，将不胜感激。抱歉，如果我的编码实践不是那么好，我对此很陌生。

**编辑：我找到了解决方案。我向按钮添加了代码，使我的计时器能够执行该过程。另一个问题确实是它读取文件的方式，我不得不使用替换功能从文件路径代码中删除“.exe”。

编辑 2：Mark Hall 发布了一个更好的解决方案。我现在正在使用他的代码，因为它出错的可能性较小。

```
 Private Sub Timer1_Tick(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Timer1.Tick
       Dim s As String = ListView1.SelectedItems(0).Tag
    Dim myFile As String = Path.GetFileName(s)
    Dim mu As String = myFile.Replace(".exe", "").Trim()
    Dim f As Process
    Dim p As Process() = Process.GetProcessesByName(mu)

    For Each f In p
        If p.Length > 0 Then
            For i As Integer = 0 To p.Length - 1
                ProcessID = (p(i).Id)
                AutoMain.Name.Text = f.MainWindowTitle
                Timer1.Enabled = False
                Me.Close()
            Next
        Else
            ProcessID = 0
            End If
        If ProcessID = 0 Then
            Process.Start(mu)
        End If
    Next
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T03:43:35.210

正在发生的事情是，您在进入 For Each 循环之前正在寻找与您的参数匹配的 Process 数组是空的，因此它永远不会进入它，因此您永远不会启动您的流程。

这是一个非常简单的例子：

```
Private Sub Timer1_Tick(sender As System.Object, e As System.EventArgs) Handles Timer1.Tick
    Dim s As String = ListView1.SelectedItems(0).Tag.ToString
    Dim myFile As String = Path.GetFileName(s)

    Dim p As Process() = Process.GetProcessesByName(Path.ChangeExtension(myFile, Nothing))
    Static started As Boolean

    If p.Count > 0 Or started Then
        If p.Length > 0 Then
            For i As Integer = 0 To p.Length - 1
                ProcessId = (p(0).Id)
                AutoMain.Name.Text = p(0).MainWindowTitle
                Timer1.Enabled = False
                started = False
                Timer1.Stop()
                Me.Close()
            Next
        Else
            ProcessId = 0
        End If
    Else
        started = True
        Process.Start(myFile)
    End If

End Sub 
```

# javascript - Facebook Like 按钮动态元标记 (jQuery)

> ID：12433942
> 
> 赞同：1
> 
> 时间：2012-09-15T02:03:50.683
> 
> 标签：javascript, jquery, facebook, sdk, facebook-like

我正在尝试在模态中设置一个类似 Facebook 的按钮，并且我希望 OG 元特定于模态中的每个图像。在我的脚本中，我首先添加了所需的 OG 元标记：

```
/* INSERT OPEN GRAPH META TAGS */
$('head').append('<meta property="og:title" content="'+x+'"/>
   <meta property="og:url" content="'+window.location.href+'"/>
   <meta property="og:description" content="'+z+'"/>
'); 
```

我已经检查过了，它们被添加得很好，此时 FB 尚未初始化或被调用。只有某些模态框具有社交图标，因此当打开模态框时，会加载图像，如果需要社交图标，它会运行以下代码并根据元素的某些数据属性动态更新 OG 元标记：

```
$('meta[property="og:title"]').attr('content',currentImageParent.data('MetaTitle')); 

$('meta[property="og:description"]').attr('content',currentImageParent.data('MetaDescription')); 
```

这工作得很好，我可以看到更新发生在代码中。因此，在模态中加载图像并根据图像的 .data 信息更新元标记后，我认为调用 Facebook SDK 设置点赞/发送按钮是安全的（并添加所需的 DIV如果页面不存在，则转到该页面）：

```
$('body').prepend('<div id="fb-root" class="FacebookSDK"></div>
   <script>
   function(d,s,id){
       var js,fjs=d.getElementsByTagName(s)[0];
       if(d.getElementById(id))return;
       js=d.createElement(s); 
       js.id=id; 
       js.src="//connect.facebook.net/en_US/all.js#xfbml=1";     
       fjs.parentNode.insertBefore(js,fjs);
   }(document,\'script\',\'facebook-jssdk\'));
   </script>
'); 
```

在调试器中这不起作用，只是默认为非 OG 元标记（标题/描述）。它还会抛出错误，指出未定义 og:url 等（即使它们在调用之前已添加）。如果我在 html 页面上放置虚拟 OG 元标记并运行调试器，我不会收到任何错误，并且会显示 OG 元标记内容（不是动态更新的内容，只是虚拟内容文本）。

有任何想法吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T12:08:27.800

Facebook 的抓取工具不执行 Javascript，因此只能在执行任何 Javascript（或 jQuery）之前读取 HTML 中可用的元标记。

每个 Open Graph 对象都必须有一个唯一的 URL。

# javascript - 如何使用 JQuery 来解析这个 json？

> ID：12433945
> 
> 赞同：0
> 
> 时间：2012-09-15T02:04:26.473
> 
> 标签：javascript, jquery, json

我有这个 JSON：

```
{
  "jsonDept": [
    {
      "Id": "1",
      "DeptName": "aaaa "
    }, {
      "Id": "2",
      "DeptName": "bbb "
    }, {
      "Id": "6",
      "DeptName": "ccc "
    }, {
      "Id": "7",
      "DeptName": "ddd "
    }, {
      "Id": "8",
      "DeptName": "eee "
    }, {
      "Id": "9",
      "DeptName": "fff "
    }, {
      "Id": "12",
      "DeptName": "haha "
    }, {
      "Id": "13",
      "DeptName": "test1 "
    }, {
      "Id": "14",
      "DeptName": "test2 "
    }, {
      "Id": "10",
      "DeptName": "tmd "
    }, {
      "Id": "11",
      "DeptName": "tnnd "
    }
  ]
} 
```

还有我的jQuery：

```
function loadDepartmentList() {
    $.ajax({
        url: "QueryDepartment.ashx",
        //data: "",
        type: "GET",
        dataType: 'json',
        success: function (data) {
            // how to read json here? this is not working
            $.each(data, function () {
                alert("Name: " + this.DeptName);
            });
        }
    })
} 
```

但警报显示“未定义”，并且只弹出一次。

我想要做的是解析这个json，生成html`<ul><li>DeptName</li></ul>`并将html放入一个div。

我用谷歌搜索了很多代码，它们都不起作用。我认为这可能是开头字符串“jsonDept”的问题。

任何人都可以为这个 json 编写一个工作脚本吗？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T02:06:45.027

返回的对象包含一个属性，即`jsonDept`. 它是`jsonDept`包含部门信息数组的属性。

```
function loadDepartmentList() {
    $.ajax({
        url: "QueryDepartment.ashx",
        //data: "",
        type: "GET",
        dataType: 'json',
        success: function (data) {
            // how to read json here? this is not working
            $.each(data.jsonDept, function () {
                alert("Name: " + this.DeptName);
            });
        }
    })
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T11:59:44.153

这是您想将 json 数组解析到 HTML 列表 "ul li DeptName /li /ul" 中吗？

为 UL 创建 id

```
<ul id="list"></ul> 
```

功能：

```
 function loadDepartmentList() {
       $.ajax({
          url: "QueryDepartment.ashx",
           //data: "",
           type: "GET",
           dataType: 'json',
           success: function (data) {            
           $.each(data.jsonDept, function () {
              $('#lsit').append('<li>'+this.DeptName+'</li>');
           });
        }
    })
  } 
```

希望这会给一些想法..

# c - 为什么 malloc 有时不起作用？

> ID：12433947
> 
> 赞同：20
> 
> 时间：2012-09-15T02:04:51.177
> 
> 标签：c, windows, segmentation-fault, malloc, porting

我正在将一个 C 项目从 Linux 移植到 Windows。在 Linux 上它是完全稳定的。在 Windows 上，它大部分时间都运行良好，但有时我会遇到分段错误。

我正在使用 Microsoft Visual Studio 2010 进行编译和调试，看起来有时我的 malloc 调用根本不分配内存，返回 NULL。机器有空闲内存；它已经通过该代码一千次，但它仍然发生在不同的位置。

就像我说的，它不会一直发生，也不会发生在同一个地方。它看起来像一个随机错误。

在 Windows 上我必须比在 Linux 上更小心吗？我做错了什么？

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2012-09-15T05:46:16.470

`malloc()`当它无法为内存请求提供服务时，返回一个无效的 NULL 指针。在大多数情况下，C 内存分配例程通过调用操作系统来管理可用内存的列表或堆，以在进行`malloc()`调用并且列表或堆上没有块来满足请求时分配额外的内存块。

因此，第一种`malloc()`失败情况是内存请求无法满足，因为（1）C 运行时的列表或堆上没有可用的内存块，以及（2）当 C 运行时内存管理请求更多内存时操作系统，请求被拒绝。

这是一篇关于[指针分配策略](http://www.eskimo.com/~scs/cclass/int/sx7.html)的文章。

这篇论坛文章给出了一个[由于内存碎片导致的 malloc 失败](http://www.gidforums.com/t-9340.html)的例子。

可能失败的另一个原因`malloc()`是内存管理数据结构已损坏，这可能是由于缓冲区溢出，其中分配的内存区域用于大于分配内存大小的对象。不同的版本可以使用不同的内存管理策略，并确定在调用`malloc()`时提供多少内存。`malloc()`例如，a`malloc()`可能会准确地为您提供请求的字节数，或者它可能会为您提供比您要求的更多的信息，以适应内存边界内分配的块或使内存管理更容易。

使用现代操作系统和虚拟内存，除非您正在做一些非常大的内存驻留存储，否则内存不足是非常困难的。但是，正如用户 Yeow_Meng 在下面的评论中提到的那样，如果您正在做算术来确定要分配的大小并且结果是负数，那么您最终可能会请求大量内存，因为`malloc()`要分配的内存量的参数是未签名。

在进行指针运算以确定某些数据需要多少空间时，您可能会遇到负大小的问题。这种错误对于对意外文本进行的文本解析很常见。例如，以下代码将导致非常大的`malloc()`请求。

```
char pathText[64] = "./dir/prefix";  // a buffer of text with path using dot (.) for current dir
char *pFile = strrchr (pathText, '/');  // find last slash where the file name begins
char *pExt = strrchr (pathText, '.');    // looking for file extension 

// at this point the programmer expected that
//   - pFile points to the last slash in the path name
//   - pExt point to the dot (.) in the file extension or NULL
// however with this data we instead have the following pointers because rather than
// an absolute path, it is a relative path
//   - pFile points to the last slash in the path name
//   - pExt point to the first dot (.) in the path name as there is no file extension
// the result is that rather than a non-NULL pExt value being larger than pFile,
// it is instead smaller for this specific data.
char *pNameNoExt;
if (pExt) {  // this really should be if (pExt && pFile < pExt) {
    // extension specified so allocate space just for the name, no extension
    // allocate space for just the file name without the extension
    // since pExt is less than pFile, we get a negative value which then becomes
    // a really huge unsigned value.
    pNameNoExt = malloc ((pExt - pFile + 1) * sizeof(char));
} else {
    pNameNoExt = malloc ((strlen(pFile) + 1) * sizeof(char));
} 
```

良好的运行时内存管理将尝试合并已释放的内存块，以便许多较小的块在释放时组合成较大的块。这种内存块的组合减少了无法使用 C 内存管理运行时管理的列表或内存堆上已经可用的内存来服务内存请求的机会。

您可以重用已分配内存的越多，依赖`malloc()`的`free()`越少越好。如果你不做，`malloc()`那么它很难失败。

您可以将许多小型调用更改`malloc()`为更少的大型调用，从而`malloc()`减少内存碎片和扩展内存列表或堆大小的机会，这些小块无法组合，因为它们不是下一个对彼此。

您可以`malloc()`同时`free()`处理的连续块越多，内存管理运行时就越有可能合并块。

没有规则说您必须对`malloc()`对象的特定大小执行 a，提供的 size 参数`malloc()`可以大于您为其分配内存的对象所需的大小。因此，您可能希望对调用使用某种规则，`malloc ()`以便通过四舍五入到某个标准内存量来分配标准大小的块。因此，您可以使用 ((size / 16) + 1) * 16 或更可能 ((size >> 4) + 1) << 4 之类的公式分配 16 个字节的块。许多脚本语言使用类似的东西以便增加重复调用的机会，`malloc()`并`free()`能够将请求与列表或内存堆上的空闲块匹配。

这是一个尝试减少分配和释放的块数量的简单示例。假设我们有一个可变大小的内存块的链表。所以链表中节点的结构看起来像：

```
typedef struct __MyNodeStruct {
    struct __MyNodeStruct *pNext;
    unsigned char *pMegaBuffer;
} MyNodeStruct; 
```

可能有两种方法可以为特定缓冲区及其节点分配此内存。第一个是节点的标准分配，然后是缓冲区的分配，如下所示。

```
MyNodeStruct *pNewNode = malloc(sizeof(MyNodeStruct));
if (pNewNode)
    pNewNode->pMegaBuffer = malloc(15000); 
```

然而，另一种方法是执行类似以下的操作，它使用带有指针算法的单个内存分配，以便单个`malloc()`提供两个内存区域。

```
MyNodeStruct *pNewNode = malloc(sizeof(myNodeStruct) + 15000);
if (pNewNode)
    pNewNode->pMegaBuffer = ((unsigned char *)pNewNode) + sizeof(myNodeStruct); 
```

但是，如果您使用这种单一分配方法，则需要确保您在使用指针时保持一致`pMegaBuffer`，您不会意外地`free()`对其进行操作。如果您必须用更大的缓冲区更改缓冲区，则需要释放节点并重新分配缓冲区和节点。所以程序员有更多的工作。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-04-05T00:02:04.647

在 Windows 上失败的另一个原因`malloc()`是，如果您的代码在一个 DLL 中分配并在不同的 DLL 或 EXE 中释放。

与 Linux 不同，在 Windows 中，DLL 或 EXE 有自己的运行时库链接。这意味着您可以使用 2013 CRT 将您的程序链接到针对 2008 CRT 编译的 DLL。

不同的运行时可能会以不同的方式处理堆。Debug 和 Release CRT*肯定会*以不同的方式处理堆。如果您`malloc()`在 Debug 和`free()`Release 中，它会严重损坏，这可能会导致您的问题。

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-11-27T21:52:30.560

我见过 malloc 失败的实例，因为指向新内存的指针本身没有分配：

```
pNewNode = malloc(sizeof(myNodeStruct) + 15000); 
```

如果由于某种原因需要预先创建或分配 pNewNode，它是无效的并且 malloc 将失败，因为 malloc 分配的结果（本身是成功的）不能存储在指针中。当这个错误出现时，我已经看到多次运行同一个程序，代码将在某些情况下工作（当指针意外出现时，但只是运气好），但在许多情况下，它不会指向任何地方，因为它从未分配过。

如何找到这个错误？在您的调试器中查看 pNewNode 在调用 malloc 之前是否实际有效。它应该指向 0x000000 或其他一些实际位置（在 malloc 分配实际分配的内存段之前，这实际上是垃圾）。

* * *

## 回答 #4

> 赞同：-20
> 
> 时间：2014-01-02T23:08:16.717

您可以基于递归函数声明自己的安全 malloc：

```
void *malloc_safe(size_t size)
{
    void* ptr = malloc(size);
    if(ptr == NULL)
        return malloc_safe(size); 
    else
        return ptr;
} 
```

如果 malloc 失败，此函数将再次调用并尝试在 ptr 变为 != NULL 时分配内存。

使用：

```
int *some_ptr = (int *)malloc_safe(sizeof(int)); 
```

# codeigniter - Codeigniter 内存缓存

> ID：12433950
> 
> 赞同：2
> 
> 时间：2012-09-15T02:05:47.240
> 
> 标签：codeigniter, memcached

我很不幸地弄清楚为什么 memcached 不能正常工作。

**已启用的 PHP 信息详细信息：**

```
memcache support | enabled
Active persistent connections | 0
Version | 2.2.6
Revision | $Revision: 303962 $ 
```

ETC...

加载驱动程序

```
$this->load->driver('cache',array('adapter'=>'mecached')); 
```

错误响应：

```
get() on a non-object in /system/libraries/Cache/drivers/Cache_memcached.php on line 50 
```

当我尝试使用此代码时

```
var_dump(var_dump($this->cache->memcached->is_supported())); 
```

响应：布尔（假）

我也检查了这个论坛主题

[http://codeigniter.com/forums/viewthread/180005/#855216](http://codeigniter.com/forums/viewthread/180005/#855216)

似乎 memcache 仍然无法正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-14T14:39:45.423

在 windows 下运行 Memcache 时，请注意将 Memcached 更改为`system/libraries/Cache/drivers/Cache_memcached.php`.

这将使 Memcache 工作，但它不会使您的项目正确过期，因为 Memcache 使用第 4 个参数作为 TTL，而 Memcached 使用第 3 个参数作为 TTL，CI 只接受 3 个参数。

为了克服这个问题（并使其与 Memcache 和 Memcached 一起工作），您需要对 system/libraries/Cache/drivers/Cache_memcached.php 进行以下更改。

1) 声明一个新属性`private $_is_memcache = FALSE;`

2) 改变功能`save()`如下：

```
public function save($id, $data, $ttl = 60)
{
    if($this->_is_memcache) {
        return $this->_memcached->add($id, array($data, time(), $ttl), FALSE, $ttl);
    } else {
        return $this->_memcached->add($id, array($data, time(), $ttl), $ttl);
    }
} 
```

3）在函数`_setup_memcached()`中将行替换为`$this->_memcached = new Memcached();`：

```
if(class_exists("Memcached")) {
    $this->_memcached = new Memcached();
} else {
    $this->_memcached = new Memcache();
    $this->_is_memcache = TRUE;
} 
```

4）在函数`is_supported ()`中将行替换为`if ( ! extension_loaded('memcached'))`：

```
if ( !extension_loaded('memcached') && !extension_loaded('memcache')) 
```

# 完成课程

```
<?php if ( ! defined('BASEPATH')) exit('No direct script access allowed');
/**
 * CodeIgniter
 *
 * An open source application development framework for PHP 4.3.2 or newer
 *
 * @package     CodeIgniter
 * @author      ExpressionEngine Dev Team
 * @copyright   Copyright (c) 2006 - 2011 EllisLab, Inc.
 * @license     http://codeigniter.com/user_guide/license.html
 * @link        http://codeigniter.com
 * @since       Version 2.0
 * @filesource  
 */

// ------------------------------------------------------------------------

/**
 * CodeIgniter Memcached Caching Class 
 *
 * @package     CodeIgniter
 * @subpackage  Libraries
 * @category    Core
 * @author      ExpressionEngine Dev Team
 * @link        
 */

class CI_Cache_memcached extends CI_Driver {

    private $_memcached;            // Holds the memcached object
    private $_is_memcache = FALSE;  // Identifies wether it's Memcache instead of Memcached

    protected $_memcache_conf   = array(
                    'default' => array(
                        'default_host'      => '127.0.0.1',
                        'default_port'      => 11211,
                        'default_weight'    => 1
                    )
                );

    // ------------------------------------------------------------------------ 

    /**
     * Fetch from cache
     *
     * @param   mixed       unique key id
     * @return  mixed       data on success/false on failure
     */ 
    public function get($id)
    {   
        $data = $this->_memcached->get($id);

        return (is_array($data)) ? $data[0] : FALSE;
    }

    // ------------------------------------------------------------------------

    /**
     * Save
     *
     * @param   string      unique identifier
     * @param   mixed       data being cached
     * @param   int         time to live
     * @return  boolean     true on success, false on failure
     */
    public function save($id, $data, $ttl = 60)
    {
        if($this->_is_memcache) {
            return $this->_memcached->add($id, array($data, time(), $ttl), FALSE, $ttl);
        } else {
            return $this->_memcached->add($id, array($data, time(), $ttl), $ttl);
        }
    }

    // ------------------------------------------------------------------------

    /**
     * Delete from Cache
     *
     * @param   mixed       key to be deleted.
     * @return  boolean     true on success, false on failure
     */
    public function delete($id)
    {
        return $this->_memcached->delete($id);
    }

    // ------------------------------------------------------------------------

    /**
     * Clean the Cache
     *
     * @return  boolean     false on failure/true on success
     */
    public function clean()
    {
        return $this->_memcached->flush();
    }

    // ------------------------------------------------------------------------

    /**
     * Cache Info
     *
     * @param   null        type not supported in memcached
     * @return  mixed       array on success, false on failure
     */
    public function cache_info($type = NULL)
    {
        return $this->_memcached->getStats();
    }

    // ------------------------------------------------------------------------

    /**
     * Get Cache Metadata
     *
     * @param   mixed       key to get cache metadata on
     * @return  mixed       FALSE on failure, array on success.
     */
    public function get_metadata($id)
    {
        $stored = $this->_memcached->get($id);

        if (count($stored) !== 3)
        {
            return FALSE;
        }

        list($data, $time, $ttl) = $stored;

        return array(
            'expire'    => $time + $ttl,
            'mtime'     => $time,
            'data'      => $data
        );
    }

    // ------------------------------------------------------------------------

    /**
     * Setup memcached.
     */
    private function _setup_memcached()
    {
        // Try to load memcached server info from the config file.
        $CI =& get_instance();
        if ($CI->config->load('memcached', TRUE, TRUE))
        {
            if (is_array($CI->config->config['memcached']))
            {
                $this->_memcache_conf = NULL;

                foreach ($CI->config->config['memcached'] as $name => $conf)
                {
                    $this->_memcache_conf[$name] = $conf;
                }               
            }           
        }

        if(class_exists("Memcached")) {
            $this->_memcached = new Memcached();
        } else {
            $this->_memcached = new Memcache();
            $this->_is_memcache = TRUE;
        }

        foreach ($this->_memcache_conf as $name => $cache_server)
        {
            if ( ! array_key_exists('hostname', $cache_server))
            {
                $cache_server['hostname'] = $this->_default_options['default_host'];
            }

            if ( ! array_key_exists('port', $cache_server))
            {
                $cache_server['port'] = $this->_default_options['default_port'];
            }

            if ( ! array_key_exists('weight', $cache_server))
            {
                $cache_server['weight'] = $this->_default_options['default_weight'];
            }

            $this->_memcached->addServer(
                    $cache_server['hostname'], $cache_server['port'], $cache_server['weight']
            );
        }
    }

    // ------------------------------------------------------------------------

    /**
     * Is supported
     *
     * Returns FALSE if memcached is not supported on the system.
     * If it is, we setup the memcached object & return TRUE
     */
    public function is_supported()
    {
        if ( !extension_loaded('memcached') && !extension_loaded('memcache'))
        {
            log_message('error', 'The Memcached Extension must be loaded to use Memcached Cache.');

            return FALSE;
        }

        $this->_setup_memcached();
        return TRUE;
    }

    // ------------------------------------------------------------------------

}
// End Class

/* End of file Cache_memcached.php */
/* Location: ./system/libraries/Cache/drivers/Cache_memcached.php */ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-17T14:03:16.287

似乎您有旧版本的 Codeigniter。您的服务器启用了[Memcache](http://us.php.net/manual/en/book.memcache.php)扩展，但 codeigniter 的缓存驱动程序需要安装[Memcached 。](http://us.php.net/memcached)大约一年前，“Johnbellone”增加了对这两个 Memcached 扩展的支持。详情[在这里](https://github.com/EllisLab/CodeIgniter/commit/9e8dc0e1b2175fc79b112d469626c76cc13610e3#system/libraries/Cache/drivers/Cache_memcached.php)。

# asp.net - 既然我们已经有了 CSS，为什么还需要 ASP.NET 主题？

> ID：12433951
> 
> 赞同：1
> 
> 时间：2012-09-15T02:05:55.820
> 
> 标签：asp.net, css, themes

您可以在服务器控件中指定 CssClass，您的 ASP.NET 页面将为控件生成样式属性。

您还可以在 ASP.NET 页面中指定外部 CSS 文件，就像在普通 HTML 页面中一样。

您还可以在 ASP.NET 页面标题部分中编写标记，就像编写普通 HTML 页面一样。

那么为什么需要 ASP.NET 主题呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T02:28:19.783

不要将 ASP.NET 主题与 ASP.NET 外观混淆。我在这里解释了它们：

ASP.NET 中的主题系统不与 CSS 竞争，而是一个旨在让用户更容易选择应用于站点的样式表的系统。

这个想法是您将创建一个“BoringBlue.css”样式表和相关的艺术作品，然后进行一些更改并创建一个名为“HotPink.css”的新样式表。而不是生成启用或禁用页面样式`<link>`元素的标记的工作，ASP.NET 主题将为您完成这项繁重的工作。

然而，ASP.NET Web Forms Web Controls 最初是在微软的 IE6 热恋期间制作的（当时他们假装 Firefox 不存在，所以这是在 2004-2005 年左右），所以他们没有大量使用 CSS，许多控件呈现表示属性，例如`bgcolor`. “ASP.NET 皮肤”是一种控制 WebControls（注意，不是 HtmlControls）的颜色和其他显示设置的方法。除了 CSS 样式表之外，ASP.NET 主题还为您提供了一种选择还应用哪个 ASP.NET 外观的方法。

请注意，在 ASP.NET MVC 下，主题和皮肤已完全过时，因为框架不再呈现任何复杂的标记，将完全控制权返回给开发人员。最后，没有更多的噱头——自从人们在 2007 年左右停止使用 phpNuke 以来，我还没有真正遇到过“让用户设置配色方案”的网站。

# boost - boost lib子目录在哪里？

> ID：12433953
> 
> 赞同：0
> 
> 时间：2012-09-15T02:06:12.533
> 
> 标签：boost

你好我昨天下载了最新的boost库（.7z格式），解压后发现这里没有lib子目录，所以找不到.lib文件，是boost团队的疏忽吗？

我的目录结构：

升压_1_51_0

*   促进
*   文档
*   库
*   更多的
*   地位
*   工具
*   ETC

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T02:31:49.040

大多数 boost 的功能都在`boost`目录内的仅头文件中。这意味着您需要做的就是`boost`在项目中包含该目录，然后就完成了。

对于一些特定的库，您需要通过Boost 网站上的[说明构建自己的库。](http://www.boost.org/doc/libs/1_51_0/more/getting_started/index.html)

如果您将 Eclipse 与 CDT（更难配置）一起使用，[这里](http://theseekersquill.wordpress.com/2010/08/24/howto-boost-mingw/)有更好的说明。

# php - 如何在 PHP 中解析响应头？

> ID：12433958
> 
> 赞同：12
> 
> 时间：2012-09-15T02:06:28.913
> 
> 标签：php, api, rest, http-headers

我已经向 REST API 发出了一个 oauth 签名请求，并将响应标头放在一个数组中，如下所示：

```
[0] => HTTP/1.1 200 OK
[1] => Cache-Control: private
[2] => Transfer-Encoding: chunked
[3] => Content-Type: text/html; charset=utf-8
[4] => Content-Location: https://***
[5] => Server: Microsoft-IIS/7.0
[6] => Set-Cookie: ASP.NET_SessionId=***; path=/; HttpOnly
[7] => X-AspNetMvc-Version: 2.0
[8] => oauth_token: ***
[9] => oauth_token_secret: ***
[10] => X-AspNet-Version: 4.0.30319
[11] => X-Powered-By: ASP.NET
[12] => Date: Sat, 15 Sep 2012 02:01:15 GMT 
```

我试图弄清楚如何解析标头以便轻松检索诸如 HTTP 状态代码、Content-Location、oauth_token 和 oauth_token_secret 之类的项目？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-15T02:15:49.427

您需要迭代数组并检查`stripos()`以找到您要查找的标题。在大多数情况下，您然后`explode()`打开`:`（限制为 2 个结果部分），但 HTTP 响应代码将要求您在空格上展开。

```
// Get any header except the HTTP response...
function getResponseHeader($header, $response) {
  foreach ($response as $key => $r) {
     // Match the header name up to ':', compare lower case
     if (stripos($r, $header . ':') === 0) {
        list($headername, $headervalue) = explode(":", $r, 2);
        return trim($headervalue);
     }
  }
}
// example:
echo getResponseHeader("Content-Type");
// text/html; charset=utf-8

// Get the HTTP response code
foreach ($response as $key => $r) {
  if (stripos($r, 'HTTP/') === 0) {
    list(,$code, $status) = explode(' ', $r, 3);
    echo "Code: $code, Status: $status";
    break;
  }
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-09-15T02:17:14.563

似乎唯一没有 a 的标头`:`是 HTTP 版本和状态。做一个`array_shift`提取它，遍历其他创建一个数组，如下所示：

```
$parsedHeaders = array();
foreach ($headers as $header) {
    if (! preg_match('/^([^:]+):(.*)$/', $header, $output)) continue;
    $parsedArray[$output[1]] = $output[2];
} 
```

ps：未经测试。

— 编辑 —</p>

请享用 ;）

```
/**
 * Parse a set of HTTP headers
 *
 * @param array The php headers to be parsed
 * @param [string] The name of the header to be retrieved
 * @return A header value if a header is passed;
 *         An array with all the headers otherwise
 */
function parseHeaders(array $headers, $header = null)
{
    $output = array();

    if ('HTTP' === substr($headers[0], 0, 4)) {
        list(, $output['status'], $output['status_text']) = explode(' ', $headers[0]);
        unset($headers[0]);
    }

    foreach ($headers as $v) {
        $h = preg_split('/:\s*/', $v);
        $output[strtolower($h[0])] = $h[1];
    }

    if (null !== $header) {
        if (isset($output[strtolower($header)])) {
            return $output[strtolower($header)];
        }

        return;
    }

    return $output;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-10-14T15:22:00.043

如果你有 pecl_http 的简短回答：http: [//php.net/manual/it/function.explode.php](http://php.net/manual/it/function.explode.php)

稍微长一点的答案：

```
$header = "...";
$parsed = array_map(function($x) { return array_map("trim", explode(":", $x, 2)); }, array_filter(array_map("trim", explode("\n", $header)))); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-04-02T18:33:20.643

我最终得到了这个解决方案，它使用正则表达式查找标头中的所有键和值，并结合来自[https://stackoverflow.com/a/43004994/271351](https://stackoverflow.com/a/43004994/271351)的一些数组突变，将正则表达式匹配到关联数组中。这不是 100% 适合这里提出的问题，因为它接受一个字符串，但是加入一个字符串数组以获得单个字符串将作为这个的前兆。我的案例必须处理原始标题，因此这个解决方案。

```
preg_match_all('/^([^:\n]*): ?(.*)$/m', $header, $headers, PREG_SET_ORDER);
$headers = array_merge(...array_map(function ($set) {
    return array($set[1] => trim($set[2]));
}, $headers)); 
```

这会产生一个标题的关联数组。如果标题的第一行作为输入包括在内（例如`GET / HTTP/1.1`），这将在输出中忽略它。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-11-24T02:29:17.437

没有 http_parse_headers() 的最佳方式；

```
function strHeaders2Hash($r) {
    $o = array();
    $r = substr($r, stripos($r, "\r\n"));
    $r = explode("\r\n", $r);
    foreach ($r as $h) {
        list($v, $val) = explode(": ", $h);
        if ($v == null) continue;
        $o[$v] = $val;
    }
    return $o;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-09-24T12:02:14.347

看起来您正在使用`get_headers`函数，如果是这样，请使用 this 函数的第二个参数，它替换输出数组键的数值并用字符串键替换它们，查看 get_headers 函数的[**手册**](http://us2.php.net/get_headers)。

一个小例子是：

```
<?php
    $output = get_headers('http://google.com', 1);
    print_r($output); 
```

将产生类似于以下数组的内容：

```
Array
(
    [0] => HTTP/1.0 301 Moved Permanently
    [Location] => http://www.google.com/
    [Content-Type] => Array
        (
            [0] => text/html; charset=UTF-8
            [1] => text/html; charset=ISO-8859-1
        )

    [Date] => Array
        (
            [0] => Tue, 24 Sep 2013 11:57:10 GMT
            [1] => Tue, 24 Sep 2013 11:57:11 GMT
        )

    [Expires] => Array
        (
            [0] => Thu, 24 Oct 2013 11:57:10 GMT
            [1] => -1
        )

    [Cache-Control] => Array
        (
            [0] => public, max-age=2592000
            [1] => private, max-age=0
        )

    [Server] => Array
        (
            [0] => gws
            [1] => gws
        )

    [Content-Length] => 219
    [X-XSS-Protection] => Array
        (
            [0] => 1; mode=block
            [1] => 1; mode=block
        )

    [X-Frame-Options] => Array
        (
            [0] => SAMEORIGIN
            [1] => SAMEORIGIN
        )

    [Alternate-Protocol] => Array
        (
            [0] => 80:quic
            [1] => 80:quic
        )

    [1] => HTTP/1.0 200 OK
    [Set-Cookie] => Array
        (
            [0] => PREF=ID=58c8f706594fae17:FF=0:TM=1380023831:LM=1380023831:S=_ehOnNWODZqIarXn; expires=Thu, 24-Sep-2015 11:57:11 GMT; path=/; domain=.google.com
            [1] => NID=67=L85IlJW5yG4l9Suyf1LwKMUTcVHyGv4u9tuuMlBH4pfT1syOJvspcgRJ9uTde1xLTDhI2QcOG_fuJY3sfhw49mayT5WdMHnGeMyhh3SgFTRYVF0RAtBXXmjyDFzMqPKu; expires=Wed, 26-Mar-2014 11:57:11 GMT; path=/; domain=.google.com; HttpOnly
        )

    [P3P] => CP="This is not a P3P policy! See http://www.google.com/support/accounts/bin/answer.py?hl=en&answer=151657 for more info."
) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-01-20T20:59:44.790

如果你想更加安全，请使用 Symfony HTTP Foundation：

`composer require symfony/http-foundation`

```
use Symfony\Component\HttpFoundation\Request;

$request = Request::createFromGlobals();

// retrieves an HTTP request header, with normalized, lowercase keys
$request->headers->get('host');
$request->headers->get('content-type'); 
```

如果您不想拥有这种依赖关系，这里有一个示例，我将其放在一起以确定`Cache-Control`标头是否具有该`no-cache`值，例如：

```
/**
*  [
*    0 => 'Cache-Control: no-cache, no-store, no-validate',
*    1 => 'User-Agent: Mozilla/5.0 (X11; Linux x86_64; rv:12.0) Gecko/20100101 Firefox/12.0',
*  ]
*/
$headers = headers_list();

foreach ( $headers as $header_string ) {
     /*
     * Regex Samples:
     * "Foo: Bar"
     * "Foo-Bar: Baz-Bar:1"
     *
     * Matches:
     * "Foo"
     * "Foo-Bar"
     */
    preg_match( '#^.+?(?=:)#', $header_string, $key );

    if ( empty( $key ) ) {
        continue;
    }

    $key   = strtolower( reset( $key ) );
    $value = strtolower( ltrim( strtolower( $header_string ), $key . ':' ) );

    if ( $key == 'cache-control' ) {
        if ( strpos( $value, 'no-cache' ) !== false || strpos( $value, 'no-store' ) !== false ) {
            $nocache = true;
        }
    }
} 
```

# jquery - 如何预先隐藏某些内容以准备在 jQuery 动画中公开它？

> ID：12433959
> 
> 赞同：2
> 
> 时间：2012-09-15T02:06:37.240
> 
> 标签：jquery, css, animation

我有一个按钮 div，我附加了一个 jQuery 动画，它在其他事件上公开/隐藏它。

它工作得很好，但我不清楚他们正在改变的 div 的哪些样式元素，所以，我不确定如何设置它的 CSS 以便它开始隐藏，然后在启动动画的事件时暴露出来被踢开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T02:10:11.983

据我了解，您想知道在基本页面代码中放置哪些属性。在这种情况下，只需`display:none;`在按钮元素上放一个简单的元素——jQuery 足够聪明，可以处理其余的事情。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-15T02:11:33.187

你有几个选择：

用 css

```
display: none; 
```

或 jQuery

```
.hide() 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-15T02:11:39.687

一旦它被“隐藏”，就使用`display: none;`jquery将它设置为的东西

# asp.net-mvc-3 - 在注册期间从注入类型中获取属性

> ID：12433964
> 
> 赞同：0
> 
> 时间：2012-09-15T02:07:01.953
> 
> 标签：asp.net-mvc-3, dependency-injection, autofac

希望我能解释这一点，有人可能会理解它以提供帮助:)

无论如何，我想从注入类型中获取一个属性并在另一个注入中使用它。因此，假设您在一个控制器上有 MVC 模型状态，您想将其注入到控制器使用的服务中。

```
public class MyController
{
    public MyController(IService service)
    {
        ....
    }
}

public class MyService : IService
{
    public MyService(IModelStateWrapper modelState)
    {
        ....
    }
} 
```

我怎样才能基本上做到这一点：

```
public class MyController
{
    public MyController(IService service)
    {
        service.ModelState = new ModelStateWrapper(ModelState);
    }
} 
```

使用 Autofac 或任何 DI 容器进行注入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-17T15:26:35.530

您可以这样做，但您必须先解决几个设计问题。

`IService`首先，您的实现似乎要求您`IModelStateWrapper`在构造过程中传入，以便稍后在创建控制器期间被覆盖。您必须这样做，以便`IService`实现仅将其作为属性，而不是作为构造函数的要求。

其次，您必须确保`service.ModelState`在构造控制器之后进行设置是可以的。如果有其他构造函数逻辑假设`service.ModelState`已设置，那么您将有一些无法通过 DI 真正完成的事情。

如果你这样做，Autofac 会让你做一些很酷的事情。当你注册你的控制器类型时，注册一个 lambda 而不仅仅是一个类型。

```
var builder = new ContainerBuilder();
builder.RegisterType<MyService>().As<IMyService>();
builder.Register(
    c=>
    {
      var service = c.Resolve<IMyService>();
      var controller = new MyController(service);
      service.ModelState = new ModelStateWrapper(controller.ModelState);
      return controller;
    }).As<IController>();
var container = builder.Build(); 
```

请注意，循环逻辑的事情是在注册的 lambda 中处理的。现在，当您解析控制器时...

```
var controller = container.Resolve<IController>(); 
```

...该逻辑将运行，您将获得所需的效果。

再一次，我会对这里发生的循环引用表示一些担忧。如果有一种方法可以消除控制器和服务之间的循环依赖关系，那么让 DI 为您工作会更好。

# java - 为什么我收到错误“线程“AWT-EventQueue-0”中的异常 java.lang.ArithmeticException：/ 为零”？

> ID：12433965
> 
> 赞同：2
> 
> 时间：2012-09-15T02:07:03.463
> 
> 标签：java, swing, exception, zero, divide

> ```
> Exception in thread "AWT-EventQueue-0" java.lang.ArithmeticException: / by zero
>         at factoroperations.compute(factoroperations.java:21)
>         at factorframe$buttonhandler.actionPerformed(factorframe.java:71)
>         at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:20
> 18)
>         at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.jav
> a:2341)
>         at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel
> .java:402)
>         at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259
> )
>         at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonL
> istener.java:252)
>         at java.awt.Component.processMouseEvent(Component.java:6504)
>         at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
>         at java.awt.Component.processEvent(Component.java:6269)
>         at java.awt.Container.processEvent(Container.java:2229)
>         at java.awt.Component.dispatchEventImpl(Component.java:4860)
>         at java.awt.Container.dispatchEventImpl(Container.java:2287)
>         at java.awt.Component.dispatchEvent(Component.java:4686)
>         at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832
> )
>         at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
> 
>         at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
>         at java.awt.Container.dispatchEventImpl(Container.java:2273)
>         at java.awt.Window.dispatchEventImpl(Window.java:2713)
>         at java.awt.Component.dispatchEvent(Component.java:4686)
>         at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
>         at java.awt.EventQueue.access$000(EventQueue.java:101)
>         at java.awt.EventQueue$3.run(EventQueue.java:666)
>         at java.awt.EventQueue$3.run(EventQueue.java:664)
>         at java.security.AccessController.doPrivileged(Native Method)
>         at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
> 
> main.java:76)
>         at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
> main.java:87)
>         at java.awt.EventQueue$4.run(EventQueue.java:680)
>         at java.awt.EventQueue$4.run(EventQueue.java:678)
>         at java.security.AccessController.doPrivileged(Native Method)
>         at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDo
> main.java:76)
>         at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
>         at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThre
> ad.java:211)
>         at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.
> java:128)
>         at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThre
> ad.java:117)
>         at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
> 
>         at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
> 
>         at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
> ```

```
//Project: A program that factors numbers

//This defines the properties of the user interface

import java.awt.FlowLayout;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
import java.awt.Font;
import javax.swing.JFrame;
import javax.swing.JButton;
import javax.swing.JTextField;
import javax.swing.JLabel;

public class factorframe extends JFrame
{//declare all the variables
    private JLabel integerlabel;
    private JTextField integerfield;
    private JLabel factorslabel;
    private JTextField factorsfield;
    private JLabel namelabel;
    private JButton computebutton;
    private JButton clearbutton;
    private JButton exitbutton;
    private String integerstring;
    private long integer;
    private String factorsstring;
    private int factors;
    private factoroperations factormachine;

 public factorframe() //This is the constructor
 {  //add all buttons and fields
    super("Factor Frame");
    setLayout(new FlowLayout());
    namelabel = new JLabel("Integer Factorization  By Michael Daigh");
    add(namelabel);
    integerlabel = new JLabel("Enter an integer:");
    add(integerlabel);
    integerfield = new JTextField(20);
    add(integerfield);
    factorslabel = new JLabel("The factors are:");
    add(factorslabel);
    factorsfield = new JTextField(20);
    add(factorsfield);
    computebutton = new JButton("Compute Factors");
    add(computebutton);
    clearbutton = new JButton("Clear");
    add(clearbutton);
    exitbutton = new JButton("Exit");
    add(exitbutton);
    buttonhandler myhandler = new buttonhandler();
    computebutton.addActionListener(myhandler);
    clearbutton.addActionListener(myhandler);
    exitbutton.addActionListener(myhandler);
    factormachine = new factoroperations();
 }//End of constructor method
 private class buttonhandler implements ActionListener
   {public void actionPerformed(ActionEvent event)
        {
            if(event.getSource() == computebutton)//if user clicks compute factors
            {//computes the factors of the number
                integerstring = integerfield.getText();//get the number
                integer = Long.parseLong(integerstring);
                factorsstring = factoroperations.compute(integer);
                factorsfield.setText(factorsstring);//display the factors
            }
            else if(event.getSource() == clearbutton)//if user clicks clear
            {//clears all data in integer field and factor field
                integer=0;
                integerfield.setText("");
                factors=0;
                factorsfield.setText("");
            }
            else if(event.getSource() == exitbutton)//if user clicks exit
            {//exits the program
                System.exit(0);
            }
            else
                System.out.println("Unknown error");
        }//End of actionPerformed
    }//End of buttonhandler class
}//End of factorframe class

//Project: A program that factors numbers

//This contains the algorithm used by this project.

public class factoroperations
{
 public static String compute(long integer)
 {
    String factor="";//initialize the factor string
    int check = 1;//initialize the prime check
    for(int i=2; i<=integer/2; i++)
    {
        if(integer%i==0)//i is a factor of the number
        {
            for(int k=2; k<i; k++)//check if it is prime
            {
                if(i%k ==0)
                {
                    check = 1;
                    break;
                }
                else
                    check = 0;
            }
            if(check == 0 || i == 2)//display the prime factors only
            {
                factor = factor + " " + i + "P";
            }
            else if(check == 1)//display all other factors
                factor = factor + " " + i;
        }
    }
    if(factor == "")//if number does not factor, it is already prime
    {
        factor = "No factors. It is a prime number";
    }
    return factor;
 }
}//End factoroperations class

//Project: A program that factors numbers

//This activates the user interface.
import javax.swing.JFrame;
public class testfactor
{public static void main(String[] args)
    {factorframe myframe = new factorframe();
     myframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     myframe.setSize(325,225);
     myframe.setVisible(true);
    }//End of main
}//End of class testfactor 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-15T02:25:47.427

你得到 int 溢出并被 0 除。虽然`integer`参数是 long，但你的 i 是一个 int，如果它试图递增以匹配大 long 参数的大小，它将溢出，当它溢出时，它的值可以是 0、负数或天知道。

一种可能的解决方案：您的 for 循环索引都应该是长整数，而不是整数。

此外，对于它的价值，给一个*长*参数或变量命名是相当令人困惑的`integer`！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T02:24:03.577

你永远不会除以 0，所以它不应该产生这个错误，这里有些东西搞砸了。但是，我想指出一些需要解决的问题：

*   不要打电话给你的`long`整数；这简直是​​愚蠢的。给它一个更有意义的名字，比如`numberToFactor`or just `number`。
*   " `if(factor == "")`":`if(factor.equals(""))`改为使用，你必须`.equals`在字符串上使用而不是`==`
*   继续阅读`StringBuilder`；您可以使用它来使您的代码更高效地使用 for 循环中的所有字符串连接。

编辑：有了你评论中的这个新信息，气垫船是对的。将循环计数器更改为与要考虑的`long`数字一样的类型。如果它们是 int 的，当它们达到 2^31-1（最大 int 值）时，它们会导致错误。但是，使用 long 可以为数字提供更多内存，从而使其更大。

# java - json反序列化

> ID：12433967
> 
> 赞同：1
> 
> 时间：2012-09-15T02:07:43.930
> 
> 标签：java, json

刚开始，任何便利都值得赞赏。让一个对象将其序列化到这个起始段：

> [{"boo00":true,"lineItem":[{"bool00":true,"display":false,"extra00":"objectType","status":"","value":"recordType:A" }, {"bool00":true,"display":false,"extra00":"0","status":"","value":"UPC:1"},{...},{.. .}],"rowId":0,"str00":"hidden"},

该对象有四个元素：`boo00`(boolean)、`lineIem`(ArrayList)、`rowID`(int)、`str00`(String)

我有这个部分，我试图了解如何重建我的对象

```
String flatten = lines.toString();
JSONObject outer = JSONObject.fromObject(flatten);
Iterator itr04 = null;
for(itr04 = outer.entrySet().iterator(); itr04.hasNext();){
    Map.Entry entry = (Map.Entry) itr04.next();
    String key = (String)entry.getKey();
    System.out.println("key= "+key);
} 
```

我收到以下异常：

> “net.sf.json.JSONException：JSONObject 文本必须在 [] 的字符 1 处以 '{' 开头”

在这一点上，这对我来说意义不大，因为这正是它的开始方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T02:14:10.710

您的 JSON 文本以方括号: 开头`[`，而不是花括号: `{`。JSON 字符串表示一个对象*数组*。

你`outer`应该是一个[`JSONArray`](http://json-lib.sourceforge.net/apidocs/jdk15/net/sf/json/JSONArray.html).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:21:37.180

由于 Java JSON 的东西有点脑残，你可以做的一件事就是将“[”和“]”连接到字符串的前面和结尾。然后您可以随时使用 JSONArray 读取字符串，然后`instanceof`对每个数组元素执行操作以找出您拥有的内容。

# python - 这个程序到底有什么问题？

> ID：12433969
> 
> 赞同：-2
> 
> 时间：2012-09-15T02:08:06.693
> 
> 标签：python

下面的代码应该提示用户输入一个数字，检查数字是否等于 30，并打印是否是。

代码包含错误，不会运行。

解释什么是错的。

假设用户实际上输入了一个整数。

```
user_input = input("Enter an integer: ")

user_input = int(user_input)

if user_input = 30:

    print("The user entered 30.")

else:

    print("The user did not enter 30.") 
```

当我运行它时，我无法准确指出问题所在。

我认为`if`,`else`声明部分有问题。我现在只使用 Python 2 周，但我仍在努力理解它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-15T02:09:14.587

`=`是一项任务； `==`是一个比较。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-15T02:10:14.900

试试这个：`if user_input == 30`。在大多数语言中，`=`分配变量（即`a = 3`），并`==`测试它们之间的相等性（即`a == b`）。

# node.js - NodeJS 多路复用终端？

> ID：12433971
> 
> 赞同：1
> 
> 时间：2012-09-15T02:08:24.187
> 
> 标签：node.js, io

这是我的问题。我直接输出到控制台并通过终端获取用户输入。有时，用户正在输入一个东西，然后当控制台输出一些东西时，他们输入的文本会变得混乱。它不会破坏程序，只是很烦人。

我在 npm 目录中查看了 ncurses，但它似乎相当复杂。我想要的只是在不中断用户输入的情况下将内容打印到屏幕上。

任何帮助，我的意思是任何帮助，都非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-15T05:23:03.263

你是如何从终端阅读的？如果您在“原始”模式下执行此操作，您可以获得每个字符（或每几个字符）的输入，那么当您获得一个字符时，设置一个“输出禁止”标志并设置一个超时，当用户已经停止打字了。无论您的输出是什么，都需要检查标志并在设置时推迟。

或者，如果用户逐行输入，您可以在每个字符上设置标志，然后在他们输入换行符时清除它（并简单地刷新输出）。

如果终端处于“熟”模式（您的代码在用户键入换行符之前什么都看不到），除非您咬住 ncurses 子弹，否则您几乎无能为力。

# c# - EditorFor 不向控制器发送数据

> ID：12433974
> 
> 赞同：4
> 
> 时间：2012-09-15T02:09:08.640
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, editorfor

我有以下代码：

```
@Html.EditorFor(model => model.NoteRateGreaterThan, null, "advSearchInput", null) 
```

问题是，当帖子完成时，我为“NoteRateGreaterThan”输入的值没有填充到发送到控制器的模型中。但是，当我将其更改回：

```
@Html.EditorFor(model => model.NoteRateGreaterThan) 
```

有用。

我需要能够使用第一个代码，因为我需要能够更改“editorfor”输入的宽度，并且根据我的研究，唯一的方法是通过 css（“advSearchInput”是类）有什么想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-15T02:38:32.823

我不确定你认为你的第一个例子是做什么的，但事实并非如此。EditorFor 没有指定 Html 属性的能力，例如 class。您必须使用更基本的方法，例如 Html.TextBoxFor。

EditorFor 的第三个参数是 htmlFieldName，用于在元素 ID 重复时消除歧义。

这就是您的字段没有被填充的原因，因为您正在更改名称。

编辑：

从 MVC 5.1 开始，EditorFor 现在允许您通过以下语法传递 html 属性：

```
@Html.EditorFor(model => model.Foo, new { htmlAttributes = new { @class = "whatever" }}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-11T14:19:07.543

在更高版本的 MVC EditorFor 中确实能够使用以下语法指定 HTML 属性，例如 class：

```
@Html.EditorFor(model => model.NoteRateGreaterThan, new { htmlAttributes = new { @class = "form-control" } }) 
```

如果您想在 CSS 中使用元素 ID 而不是类，则可以使用 element `#NoteRateGreaterThan`。

您尝试使用的语法会在您的编辑器上设置自定义元素 ID。当您有多个控件引用相同的模型属性时，这很有用。如果你想设置这个控件的样式，你可以使用 CSS 选择器`#advSearchInput`。

但是，正如您所注意到的，虽然具有更改 ID 的编辑器将从模型中获取值，但只有一个重复控件可以更新回模型中，并且它始终是没有自定义 ID 的那个。由于您没有自定义 ID 的此模型属性的控件，因此不会将值写入模型中。

编辑包括关于版本的警告。

# java - 如何从另一个类访问对象方法？

> ID：12433978
> 
> 赞同：0
> 
> 时间：2012-09-15T02:09:49.000
> 
> 标签：java, methods, constructor

这是我的名为“Main.java”的主类的代码：

```
import org.lwjgl.LWJGLException;
import org.lwjgl.opengl.Display;
import org.lwjgl.opengl.DisplayMode;

import static org.lwjgl.opengl.GL11.*;

public class Main{
    public static void main(String[] args){
        try{
            Display.setDisplayMode(new DisplayMode(640, 480));
            Display.setTitle("LWJGL TESTING");
            Display.create();
        }catch (LWJGLException e){
            e.printStackTrace();
            Display.destroy();
            System.exit(1);
        }

        glMatrixMode(GL_PROJECTION);
        glOrtho(0, 640, 480, 0, 1, -1);
        glMatrixMode(GL_MODELVIEW);

        while (!Display.isCloseRequested()){
            glClear(GL_COLOR_BUFFER_BIT);
            new KeyboardEventHandler();
            Line line1 = new Line(100, 100, 200, 200, 1);
            Line line2 = new Line(400, 0, 400, 100, 2);
            Display.update();
            Display.sync(60);
        }
        Display.destroy();
        System.exit(0);
    }
} 
```

这是名为“KeyboardEventHandler.java”的 KeyboardEventHandler 类的代码：

```
import org.lwjgl.input.Keyboard;

public class KeyboardEventHandler extends Main{
    public KeyboardEventHandler(){
        if(Keyboard.isKeyDown(Keyboard.KEY_LEFT)){

        }
    }
} 
```

这是我的名为“Line.java”的课程：

```
import static org.lwjgl.opengl.GL11.*;

import org.lwjgl.opengl.*;
import org.lwjgl.*;
import org.lwjgl.opengl.GL11;

public class Line {
    int id;
    public Line(int startx, int starty, int endx, int endy, int startingid){
        glBegin(GL_LINE_STRIP);
            glVertex2i(startx, starty);
            glVertex2i(endx, endy);
        glEnd();
        id = startingid;
    }
    public int getLineId(){
        return id;
    }
} 
```

如何从 KeyboardEventHandler 类访问“line1”行的方法 getLineId()，我对 Java 相当陌生，所以如果这是一个明显的答案，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-15T02:14:35.333

您可以将 line 传递给 KeyboardEventHandler 构造函数。

```
//New KeyboardEventHandler
import org.lwjgl.input.Keyboard;

public class KeyboardEventHandler extends Main{
    public KeyboardEventHandler(Line passedLine /* Passing the Line object*/){
        if(Keyboard.isKeyDown(Keyboard.KEY_LEFT)){
            int lineID = passedLine.getLineId();
        }
    }
} 
```

然后在你的主课上

```
/*Section from Main class*/
while (!Display.isCloseRequested()){
    glClear(GL_COLOR_BUFFER_BIT);
    Line line1 = new Line(100, 100, 200, 200, 1);
    //Pass line into keyboard event handler\\
    new KeyboardEventHandler(line1);
    Line line2 = new Line(400, 0, 400, 100, 2);
    //Pass line into keyboard event handler\\
    new KeyboardEventHandler(line2);
    Display.update();
    Display.sync(60);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-15T02:14:49.580

要调用该方法，只需使用 a`.`来表示实例（line1 或 line2）内的字段或方法 (getLineId)。要将其提供给其他类，请将您的 Line 实例之一传递给构造函数。对你来说，这将是：

```
 public class KeyboardEventHandler extends Main{
        public KeyboardEventHandler(Line line){
            if(Keyboard.isKeyDown(Keyboard.KEY_LEFT)){
                int line1Id = line1.getLineId();
            }
        }
    } 
```

在你的召唤中，做`new KeyboardEventHandler(myLine);`

这个代码结构也有一些问题，我什至看不到在那里使用另一个类只做一件小事的意义。

另外，如果您不知道这一点，我建议您在来这里之前阅读更多内容。这个网站是用来问**已经研究过**的问题，但没有找到解决方案。这显然根本没有被研究过。

# php - 将 JSON 编码的文本转换为数组

> ID：12433993
> 
> 赞同：1
> 
> 时间：2012-09-15T02:13:04.643
> 
> 标签：php, json

我有一串以这种方式编码的文本：

```
 {"itemId":"17417362","type":"0","cclass":0,"value":"100","category":null,"image":{"url":"\/\/cdn.site.com\/insight.site.com\/COS20\/_Cache\/_ImageCache\/362\/17417362.gif","height":"100","width":"80"},"burstText":"","summary":"SAVE $1.00 ON TWO","brand":"Big \u00ae","link_text":"","link_url":"","activated":"2012-09-01T00:01:00","expiration":"2012-10-31T23:59:00","isuff":"362\/17417362.gif","imagePrefix":null,"details":"when you buy TWO BOXES: Original \u00ae ...","catid":"531","catdesc":"Ready to Eat","slot":"-415","prodinfo":"when you buy TWO BOXES any flavor: Original \u00ae \u2022 \u00ae \u202 \u00ae...","cpnuse":"1","printed":null,"actiontaken":null,"printCount":null,"onCard":null,"sid":"11079187","fid":"06338174","videoURL":"","catlevel1":"107","catlevel2":"399","catlevel3":"531","catdesc1":"Foods","catdesc2":"Breakfast","catdesc3":"Ready to Eat","restricted":0},"17557036": 
```

我已经在这个字符串上尝试了 json_decode，但它失败了。我认为这是由于特殊字符和一般格式。我该如何清理它以进行解码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T02:14:47.543

对于初学者来说，你的字符串突然终止：`"17557036":`是它的最后一个 - 因此，不是格式良好的 JSON。

# properties - jms 消息选择器

> ID：12433995
> 
> 赞同：3
> 
> 时间：2012-09-15T02:13:18.547
> 
> 标签：properties, jms, activemq

我正在使用 ActiveMQ 5.5 和 JMS。我创建了一个带有消息选择器的主题消费者

```
key<>'aValue' 
```

这意味着消费者将仅接收具有名为“key”的属性且不具有值“aValue”的消息。

然后我发送一条没有名为“key”的属性的消息（请注意，这种情况不是存在具有空值的属性，而是没有属性。）

令我困惑的是，消息已传递。

如果我使用运算符 NOT LIKE，情况并非如此：

```
key NOT LIKE 'aVal%'. 
```

在这种情况下，消费者不会收到消息。这在我看来是不一致的。

这就是 JMS 规范所说的：

> A message selector matches a message when the selector evaluates to true when the message's header field and property values are substituted for their corresponding identifiers in the selector.

根据 SQL92 规范（JMS 消息选择器语法基于该规范），将任何内容与 NULL 进行比较会导致 NULL 而不是值（在这种情况下为 TRUE 或 FALSE）。如果是这种情况，则第一种情况不应导致接收到消息。

有人遇到过这个吗？当生产者没有指定属性而消费者有选择器时，<> 情况或 NOT LIKE 情况哪个结果是正确的？有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-15T04:18:01.387

根据我有限的阅读，我的理解是这样的，首先来自 JMS 规范：

> 如果引用了消息中不存在的属性，则其值为 NULL。

因此，在您的情况下，替换属性值时的键标识符将评估为 NULL

第一个表达式本质上是 NULL<>'aValue'，在我看来这是真的

第二个表达式将是 NULL NOT LIKE '%aVal' 规范说会有一个未知的结果，而 ActiveMQ 似乎已经以 true 作为结果：

> 如果 LIKE 或 NOT LIKE 操作的标识符为 NULL，则操作的值是未知的。

我认为解决方法是使选择器非常明确：

```
(key NOT NULL) AND ... 
```

# hibernate - 休眠：hbm2ddl 反转列顺序

> ID：12433998
> 
> 赞同：5
> 
> 时间：2012-09-15T02:13:35.160
> 
> 标签：hibernate, hbm2ddl

我让 hbm2ddl 为我创建表（出于开发目的），并且列与类中的字段顺序相反。

**我怎样才能让它以与类相同的顺序创建列？**

我认为 Java 类不存储字段的顺序，所以 Hibernate 根本不知道源代码中的顺序是什么（如果我考虑更复杂的情况，这似乎是合乎逻辑的）。

但是，我至少可以要求 Hibernate 将 PK 和 FK 列作为第一列吗？

休眠 4.0.0 (JBoss AS 7.1.2) MySQL 5.1.x

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-15T13:49:49.973

Hibernate 团队表示这是一个[已知限制](https://forum.hibernate.org/viewtopic.php?p=2396344)，无法设置顺序。但是在生产中使用 Hibernate 时不应该依赖 hbm2ddl，它是非常有限的，例如它可以添加列，但不能删除它。相反，人们通常使用[LiquiBase](http://www.liquibase.org/)或[FlyWay](http://flywaydb.org)或[DbDeploy](http://dbdeploy.com/)等工具创建数据库迁移，这为您提供了更大的灵活性和对模式更新的控制。

为了描述这种方法如何提供帮助：假设您有一个 UAT 环境并且您刚刚更新了架构 - 您想向现有列添加非空约束。使用 hbm2ddl 这是不可能的，您将强制您的 QA 从头开始​​重新创建数据库。使用上述工具，您需要添加一个 SQL 文件，这些工具将运行这个新脚本，分别更新架构。您可能还想设置 hbm2ddl=verify 以确保当前的 DB 模式是最新的，反之亦然 - Hibernate 映射是正确的。