# StackOverflow 问答 10376000-10376999

# xaml - 通过 XAML 巧妙地填充 IEnumerable？

> ID：10376001
> 
> 赞同：12
> 
> 时间：2012-04-29T21:11:11.137
> 
> 标签：xaml, .net-4.0

我正在尝试从 XAML 填充依赖项属性。依赖属性是`IEnumerable<KeyAction>`其中 KeyAction 是复杂类型的地方。

```
<loc:MyType.KeyActions>
    <loc:KeyAction Action="Show" Key="Space" Modifiers="LeftCtrl" />
    <loc:KeyAction Action="Hide" Key="Escape" />
</loc:MyType.KeyActions> 
```

现在，这会导致`KeyAction`属性“声明两次”，因为 XAML 将每个项目解释为该属性的候选对象，而不是列表中的项目。

为此，它需要看起来像：

```
<loc:CompletionPopupView.KeyActions>
    <sys:List`KeyAction>
        <loc:KeyAction Action="Show" Key="Space" Modifiers="LeftCtrl" />
        <loc:KeyAction Action="Hide" Key="Escape" />
    </sys:List`KeyAction>
</loc:CompletionPopupView.KeyActions> 
```

而且我需要添加名称空间，通用语法可能更糟糕，即使可行。有什么方法可以使第一个示例起作用吗？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-30T00:43:35.873

有两种不同的方法可以使这项工作。一个看起来与您的第一个示例完全相同，但需要对您的课程进行更改并且不能按照您要求的方式运行（这对您来说可能是也可能不是问题）；其他行为与您所要求的完全一样，但更加冗长。你可以决定哪一个更适合你。

## 选项 1：添加到集合

XAML 具有用于初始化集合的神奇速记语法，使用您在第一个示例中显示的确切语法。但是，它仅在属性类型实现时才有效`IList`。（是的，这确实*是非泛型* `IList`——虽然通常没什么大不了的，但 .NET 附带的所有泛型集合都实现了`IList<T>`和`IList`。）

所以你可以做你的第一个例子，但前提是你的`KeyActions`属性被声明为实现的类型`IList`。例如，您可以将您的属性更改为：

```
public ObservableCollection<KeyAction> KeyActions { get {...} } 
```

然后只需将多个子元素放入您的属性中，它会将它们添加到集合中：

```
<loc:MyType.KeyActions>
    <loc:KeyAction Action="Show" Key="Space" Modifiers="LeftCtrl" />
    <loc:KeyAction Action="Hide" Key="Escape" />
</loc:MyType.KeyActions> 
```

不过，这与您所要求的不太一样，因为 XAML 不会创建*新*集合——它会添加到*现有*集合中。因此，如果您选择此选项，您的类需要在其构造函数 () 中实例化集合，这样当您开始尝试向它添加元素`KeyActions = new ObservableCollection<KeyAction>();`时，您不会得到空引用异常。`Add`

## 选项 2：创建新集合

如果您确实需要创建一个新集合并将其分配给您的属性，那也是可行的。不幸的是，XAML2006（WPF 仍在使用的风格）仅支持整个文档的根元素上的泛型——因此您无法实例化 a`List<T>`并将其分配给属性。

但这没关系；您可以使用与 WPF 相同的解决方法。只需创建您自己的从泛型列表派生的非泛型类。

```
public class KeyActionCollection : ObservableCollection<KeyAction> {} 
```

然后你可以在 XAML 中实例化它：

```
<loc:CompletionPopupView.KeyActions>
    <loc:KeyActionCollection>
        <loc:KeyAction Action="Show" Key="Space" Modifiers="LeftCtrl" />
        <loc:KeyAction Action="Hide" Key="Escape" />
    </loc:KeyActionCollection>
</loc:CompletionPopupView.KeyActions> 
```

如果您选择此选项，您可以按照您的意愿声明您的财产`IEnumerable<KeyAction>`。只有从 XAML 填充列表时才需要自定义列表。

您甚至可以结合这两种方法：使属性为 read/write 和 type `KeyActionCollection`，在构造函数中对其进行实例化，然后 XAML 可以选择是使用简写语法添加到现有集合中，还是创建新集合；和运行时代码可以做出同样的选择。

# php - 显示会话用户 ID 的 html 报告

> ID：10376004
> 
> 赞同：-1
> 
> 时间：2012-04-29T21:11:27.723
> 
> 标签：php, mysql

在我的管理部分，我希望用户能够单击一个按钮和一个 HTML 报告，以显示所有表中的所有字段，并使用该会话中设置的用户 ID。所以`$user_id = intval($_SESSION['user_id']);`

按钮会是这样的：

```
<?php
if (isset($_POST['doReport'])) {

$link = mysql_connect(DB_HOST, DB_USER, DB_PASS) or die("Couldn't make connection.");

$query = ("SELECT user_id FROM users WHERE user_id = '$user_id');
}
// redirect to report page
            header('Location: report.php?id=' . $user_id);
?>
 <p align="center">
                <input name="doReport" type="submit" id="doThesisReport" value="View Report"> 
```

此外，由于我有 7 个表格，因此在报告页面中布置它的最佳方式是什么。我正在寻找一个快速简单的解决方法谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:25:02.697

你有一个错误：`"`char 在声明结束时错过了`$query`。

我不明白你的麻烦。如果你想使用`$_SESSION['user_id']`，你可以在任何页面使用它，而不用在 url 中传递它。

请不要将几个问题放在一个问题上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:36:45.707

实现这一目标的好方法是：

*   使一个按钮女巫重定向到一个新页面，比如“report.php”。
*   现在为重定向页面创建以下逻辑：

    1.  使用您在上面使用的代码从会话中获取 USER-ID。

    2.  在此页面上建立数据库连接。
    3.  你忘了`mysql_select_db();`用来选择数据库。
    4.  编写如下查询：

        ```
        $query = ("SELECT user_id FROM users WHERE user_id = '$user_id'");
        // you left " 
        ```

    5.  `$result=mysql_query($query)`使用;触发查询 请注意，来自数据库的结果保存到`$result`.
    6.  您可以根据自己的喜好使用表格来显示数据，但快速的方法是使用`print_r($result)`
    7.  使用关闭连接`mysql_close();`

希望由于问题不清楚，我已经发布了基本逻辑。

已编辑：忘记将查询放在代码块中。

# caching - 直接映射缓存命中/未命中

> ID：10376006
> 
> 赞同：5
> 
> 时间：2012-04-29T21:11:41.293
> 
> 标签：caching, memory, computer-architecture

如果这是错误的堆栈交换，我深表歉意；它似乎是最接近可能对计算机体系结构有所帮助的地方。对于计算机系统中的作业问题，有人问我：

```
Consider three direct mapped caches X, Y, and Z each interpreting an
8-bit address slightly differently according to the {tag:setIdx:byteOffset}
format speciﬁed. For each address in the reference stream, indicate whether the
access will hit (H) or miss (M) in each cache.

                  C1       C2     C3
Address Formats: {2:2:4} {2:3:3} {2:4:2}

Address References in Binary: 00000010, 00000100... 
```

我应该说每个地址引用是否会导致命中或未命中，但我不知道从哪里开始。

对于格式，我认为 tag 表示缓存块中数据的标签，setIdx 表示为表示缓存中的不同块而给出的位数，而 offset 是您可以选择的块中的特定字节。

我觉得我不明白什么是命中或错过。我认为有3种类型：强制、能力和冲突。如果我不知道缓存中已经存在什么，我怎么知道哪个是强制未命中？给定标签格式，我如何判断缓存的容量？

感谢您提供任何提示或提示。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T02:38:00.187

以 C1 为例，它有 2 位用于 setIdx，4 位用于 byteOffset。

所以这个缓存将有 2^2 = 4 个块（00、01、10 和 11），每个块将有 2^4 = 16 个字节。

地址引用现在可以拆分为 C1 格式：{00 00 0010}

假设缓存默认为空，则第一次查找将导致未命中。但是，缓存现在将加载带有标签“00”的块“00”。

下一个引用 {00 00 0100} 将查找块“00”，它看到标签也是“00”，我们有一个命中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-15T08:47:24.513

我不认为你会受到打击。即使地址 00 00 0100 会查找同一个块，它也会在内存中查找不同的地址。在直接映射缓存中，命中仅是由于尝试在连续指令中访问同一块中内存中的相同地址而导致的。内存中的地址由字节地址而不是块号给出。只要不尝试访问块中的相同地址，直接映射缓存就会替换块的内容。如果 00 00 0100 在另一个 00 00 0100 之前，那么在直接映射缓存中会有命中。

在关联的高速缓存中，内存地址由块号而不是字节地址给出，因此会在此处生成命中。

块号由 floor(Byte address/Bytes per block) mod（块数）给出

# php - Jquery移动表单不会提交也不会发布输入到php脚本

> ID：10376008
> 
> 赞同：0
> 
> 时间：2012-04-29T21:11:55.417
> 
> 标签：php, android, jquery, jquery-mobile

嗨，我几乎得到了一切，但我不知道出了什么问题。我有两页。search.php ：使用 jquery 允许选择产品类型并将输入提交到 index.php ：（没有 jquery 只是简单的 html/php 页面）当我单击提交按钮时显示来自我的数据库的结果，加载窗口弹出，什么也没有发生！当我在没有 jquery 的情况下对 search.php 进行编码时，我已经让它工作了，但它在 android 浏览器中看起来很丑：/

这是我的代码：

[http://textuploader.com/?p=6&id=dmLX](http://textuploader.com/?p=6&id=dmLX)

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:06:51.190

在您的页面“index.php”中，您忘记了打开的正文标记。此外，您的 index.php 必须与 jquerymobile 结构“兼容”：在您的第一个 div 上添加属性 data-role=page"。像这样：

```
<body>
<div data-role="page" class="type-interior">
<?php while($myproducts = mysql_fetch_array($result)) {?> 
<table width="800" height ="479" border="0" background="includes/images/result_box.png">
  <tr>
    <td id="Prix"><?php echo $myproducts['Product_Price']." Dollars" ;?> <p>&nbsp;</p></td>
  </tr>
</table>
</div>
<?php }  ?>
</body> 
```

# seo - 添加新帖子后如何发送到google ping

> ID：10376009
> 
> 赞同：8
> 
> 时间：2012-04-29T21:12:01.637
> 
> 标签：seo

我想告诉 Google 我在我的网站上添加了一个新帖子。如何宣布谷歌再次索引我的页面？我知道可以为站点地图编制索引，但是否可以从单个帖子（页面）重新编制索引？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-21T12:03:10.840

添加您的帖子后。更改站点地图中更新页面的**最后修改日期**（如果您使用的是 WordPress 或 Blogspot，则可以使用站点地图插件自动执行此操作）。

然后**在网站管理员工具（必应和谷歌）中重新提交站点地图**

或者尝试以下方法告诉搜索引擎您已更新您的网站

**平谷歌机器人**

在浏览器地址栏中输入以下网址

```
http://www.google.com/webmasters/sitemaps/ping?sitemap=[your sitemap web address] 
```

例如：

```
http://www.google.com/webmasters/sitemaps/ping?sitemap=http://www.example.com/sitemap-file.xml 
```

**冰冰机器人**

在浏览器地址栏中输入以下网址

```
http://www.bing.com/webmaster/ping.aspx?siteMap=[your sitemap web address] 
```

例如：

```
http://www.bing.com/webmaster/ping.aspx?siteMap=http://www.exmaple.com/sitemap.xml 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:18:47.843

这是不可能的。Google 会自动计算出您的更新频率。如果您更频繁地更新您的网站，那么谷歌会更频繁地检查它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T21:19:15.230

我认为您可以做的最好的事情是每次更新您的网站时向 Google 提交一个站点地图。我不认为你可以实际告诉他们重新索引。流行的 CMS 和博客托管软件有一些附加组件，它们会自动提交站点地图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-09T09:01:17.520

您可以通过 xml-prc pings 将您的新帖子提交到谷歌博客搜索。

[http://blogsearch.google.com/ping/RPC2](http://blogsearch.google.com/ping/RPC2)

[http://xmlrpc.scripting.com/weblogsCom.html](http://xmlrpc.scripting.com/weblogsCom.html)

似乎谷歌在 ping 几秒钟后抓取了该页面。

# aptana - Aptana 无法启动，因为工作区已更改位置

> ID：10376010
> 
> 赞同：2
> 
> 时间：2012-04-29T21:12:02.667
> 
> 标签：aptana, workspace

我在 Mac OS X 上，我刚刚安装了一个辅助驱动器，我将用户的主目录放置在该驱动器上。现在，当我启动 Aptana/Titanium Studio 时，它说无法创建指定的工作区，因为目录无效或只读。我猜它正在照顾旧的文件路径。

我可以在哪个文件中更改为新的工作区位置？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-04T19:52:45.970

找到了解决方法。我只是在我的用户文件夹中添加了一个符号链接：

我的用户名-> /Volumes/Second/Home/

瞧！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-14T11:35:00.313

我遇到过同样的问题。我试图将工作区更改为只读位置，然后无法重新启动。

我在通常的嫌疑人中搜索了一个 pref 文件，但找不到它。我怀疑它存储在 Eclipse 框架文件的深处。

我通过执行解决了它

```
./AptanaStudio3 -data ~Home

from

~/Applications/Aptana Studio 3/AptanaStudio3.app/Contents/MacOS/ 
```

将工作区重置为 ~Home

希望这对未来的寻求者有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T21:26:31.670

Aptana/Titanium Studio 是否在工作区消息后关闭，或者您可以进入首选项菜单？如果是这样，您可以通过转到

Aptana/Titanium Studio > 首选项 > 常规 > 启动和关闭 > 工作区

然后，当您下次启动应用程序时，系统会要求您提供工作区位置，您可以浏览到新位置。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T22:12:11.663

您应该能够使用位于 /Application/Titanium Studio/configuration/config.ini 的 config.ini 文件来更改它。

我没有理由为 Titanium 这样做，但我过去曾为 Eclipse 做过，因为 Titanium/Aptana 基本上是 Eclipse 的衍生产品，这也应该适用于它们。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-21T15:42:45.873

以防万一有人遇到同样的问题而答案不起作用。我的问题是微不足道的。我的高清没有可用空间！（只有 2MB）。如果是这样，请释放一些空间并重新启动 Aptana。

（我想知道为什么信息那么模糊。为什么不说“释放一些空间”并“释放”我不要浪费我的时间！）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-31T18:05:38.070

我知道这很旧，但在将我的 Aptana Studio 3 数据复制到新计算机并将我的工作区放在不同的位置后，我最终来到了这里，这给出了无法打开工作区的相同错误。

如果您安装到默认位置（在 Windows 上）并想告诉 Aptana 您将工作区移动到哪里，您可以设置路径的文件是：

```
%HOMEPATH%\AppData\Roaming\Appcelerator\Aptana Studio\configuration\.settings\org.eclipse.ui.ide.prefs 
```

# c - 在 if 语句中分配 fopen 的结果

> ID：10376013
> 
> 赞同：5
> 
> 时间：2012-04-29T21:12:38.720
> 
> 标签：c, if-statement, variable-assignment

我目前正在学习 C，想知道以下两段代码的性能是否不同，或者它是否只是一种风格。

查看一些来源，它们具有以下代码：

```
...
FILE * pFile;
pFile = fopen ("myfile.txt","r");
if (pFile == NULL)
{ some code }
... 
```

虽然我的教授在他的笔记中有以下代码：

```
...
FILE * pFile
if ((pFile = fopen("myfile.txt","r")) == NULL)
{ some code }
... 
```

只是想知道这是否仅仅是不同程序员的风格偏好，或者将 return/set 行放在 if statmeent 中是否有好处。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T21:13:54.413

**没有区别。**更有经验的程序员有时会使用第二种形式，只是为了节省一行，但它们*本质上是相同*的。第二个往往更“UNIX-y”，其中大多数函数调用在继续之前检查错误（而不是成功）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:15:43.007

它们是相同的，因为`(pFile = fopen("myfile.txt", "r"))`返回`pFile`，但我个人更喜欢第一个，因为它更明确。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T21:16:53.707

这两个变体是相等的。它不影响性能。但是，我认为第一个变体更好，因为它使事情更清楚。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T21:40:22.273

这两个程序是等效的。

有些人喜欢第一种风格，说它更具可读性，有些人喜欢第二种风格，说它更紧凑。

有关信息，请注意在某些编码指南（[MISRA](http://en.wikipedia.org/wiki/MISRA_C)是其中之一）中，禁止使用第二种样式。MISRA 禁止在`if`语句的控制表达式中使用赋值运算符。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T21:30:41.600

性能上没有区别，但显然第二种更可取。

第一个将尝试打开文件与测试是否成功打开文件分开。

第二个使打开文件和测试是否成功成为*一个*操作，这正是您不仅应该编码它的方式，也是您应该如何思考它的方式。您根本不应该将它们视为两个独立的操作。打开文件的操作是不完整的，直到/除非您检查了它是否正确打开。

将打开和测试视为两个独立的操作是懒惰的编码，会导致思维草率。不要这样做。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-29T22:33:54.737

正如这里所说，这两个部分显然是相同的。然而，我更喜欢第一个，因为它倾向于避免赋值运算符 = 和相等运算符 == 之间的混淆。考虑一个函数**foo(arg)**返回一个 int 的情况。你会写这样的东西：

```
int y;

if ((y = foo(x)) == 0) {
    ... some code ...
} 
```

现在，假设您将赋值运算符与相等混淆（顺便说一句，在 if 表达式中很常见）：

```
int y;

if ((y == foo(x)) == 0) {
    ... some code ...
} 
```

由于表达式**(y == foo(x))**的类型是 int，因此编译器认为上面的代码是合法的 C 代码。这显然会在您的代码中产生错误。

现在，让我们考虑第一个选项：

```
int y;

y = foo(x);
if (y == 0) {
    ... some code ...
} 
```

显然，现在您不太可能将赋值与相等混淆。此外，即使你写了**y == foo(x);** 作为语句，编译器将发出警告。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-29T22:50:34.053

虽然现有的答案非常好，但关于如何处理 C 语言中的某些内容是否是性能问题，我有几件事要补充。

首先，一种快速检查方法是编译两个版本的代码`gcc -O3`并比较生成的`.o`文件。如果它们相同，那么当然不会有任何性能差异（至少与您正在使用的当前编译器/版本不同）。

话虽如此，一个更概念化的方法是问自己两个问题：

1.  这两段代码是否为所有可能的有效输入变量值定义了完全相同的行为，或者只为您期望的输入定义了相同的行为（甚至只是类似的行为）？

2.  如果它们定义了完全相同的行为，您认为编译器很容易看到这一点吗？

如果是这样，则“不应该”存在性能差异，因为编译器“应该”将它们编译成它认为是实现所描述行为的最有效方式。当然，有时编译器可能非常愚蠢，所以如果它真的很重要，您可能需要检查一下。

在您的情况下，两个版本的代码都定义了完全相同的行为，我认为您很难找到一个编译器以不同方式编译它们，除非可能完全禁用优化。

# wpf - 从 WPF 的内部渲染到 Directx 应用程序

> ID：10376016
> 
> 赞同：8
> 
> 时间：2012-04-29T21:13:04.213
> 
> 标签：wpf, directx, overlay, code-injection, slimdx

我有一个 WPF 应用程序，用于在实时流中覆盖 HUD。最初的想法是为 xsplit（一种用于呈现实时流的流行应用程序）创建一个插件来显示 WPF 应用程序的内容。这种方法的问题是，将位图渲染到 xsplit 的 COM 接口对释放应用程序的 CPU 性能有很大的损害（因为我相信 xsplit 的 COM 接口以及使用 RenderTargetBitmap 会对 CPU 造成负担）。

我一直在研究将叠加层直接渲染到游戏中（目标 DirectX 应用程序），因为它提供了许多好处。主要是它规避了 xsplit 中的性能问题，而且还向各种流和捕获应用程序开放了应用程序。

* * *

我对 DirectX 不是很有经验，但我认为这是解决方案的大纲

1.  初始化 WPF 应用程序并捕获 WPF 的 Direct3d 设备[（通过此方法）](http://jmorrill.hjtcentral.com/Home/tabid/428/EntryId/438/How-to-get-access-to-WPF-s-internal-Direct3D-guts.aspx)

2.  查找并挂钩目标 DirectX 应用程序的 EndScene 调用[（使用 EasyHook+Slimdx）](http://spazzarama.com/2011/03/14/c-screen-capture-and-overlays-for-direct3d-9-10-and-11-using-api-hooks/)

3.  **将 WPF 设备表面的内容渲染到挂钩的 DirectX 应用程序之上**

* * *

我的主要问题是如何使用 SlimDX 完成第 3 步。我希望解决方案能够以某种方式重用表面而不依赖于复制，因为目标是不影响挂钩应用程序的性能。我还希望能够限制该地区并支持透明度。我还想知道在挂钩的 DirectX 应用程序的设备中使用 WPF 的 Direct3d 设备是否会导致任何不稳定。

任何见解将不胜感激，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T09:07:44.993

我正在尝试做同样的事情。到目前为止，我发现您可以将 wpfvisualtree 渲染为位图，然后将位图写入第 2 点中捕获的 d3d 设备。

```
void render(Direct3D.Device device)
{

wpfRenderTargetBitmap.Render(WpfVisualTree);
wpfRenderTargetBitmap.CopyPixels(devicePtr);

} 
```

我还没有对此进行测试，但我认为我在正确的轨道上。我现在唯一的问题是我失去了窗口中的所有交互性。按钮点击等将不再被捕获......

任何帮助都会很好。

# networking - 如何将桌面直播到 html5 视频标签

> ID：10376018
> 
> 赞同：2
> 
> 时间：2012-04-29T21:13:14.853
> 
> 标签：networking, vlc, live-streaming

我有一个程序的一些输出，我想将其实时流式传输到 html5 视频标签。到目前为止，我已经使用 VLC 来捕获屏幕，将其转码为 ogg，并使用其内置的 http 服务器进行流式传输。只要我在浏览器窗口中看到桌面图像，它就可以工作。

问题是：每次我刷新页面时，视频都会从顶部开始，我只想看到当前屏幕，这样我就可以用它来构建一种有限的远程桌面解决方案，让我能够从浏览器控制 ubuntu 桌面程序。

我正在考虑使用 websockets 将鼠标事件发送到程序，但我一直坚持如何获取实时图片而不是整个流。

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T13:59:38.423

如果您也在构建服务器端，我建议您自己处理该操作。您可以做的是使用 mjpeg 进行 html 流式传输。您可以编写将接受 http 连接并发送 mjpeg 流的标头的服务器应用程序，然后每次更新都会自行发送图片。这样，您将在浏览器中获得实时流。

这个选项很好，因为它能够控制来自服务器端的流，而对于客户端，它只是用 mjpeg 标记。

关于 WebSockets - 是的，您可以构建它，但您必须在远程计算机端实现输入设备控制。

这是您可能感兴趣的流式 MJPEG 服务器：http: [//www.codeproject.com/Articles/371955/Motion-JPEG-Streaming-Server](http://www.codeproject.com/Articles/371955/Motion-JPEG-Streaming-Server)

# c++ - 如何配置 syslog 以便应用程序日志转到特定文件

> ID：10376020
> 
> 赞同：11
> 
> 时间：2012-04-29T21:13:35.497
> 
> 标签：c++, linux, syslog, rsyslog

我有一个应用程序应该*只*`myapp`将日志文件发送到. 是用 C++ 编写的。以下示例代码仅将日志发送到 /var/log/syslog。我的操作系统是 Linux - Ubuntu 12.04 - 具体来说。我还发现我的机器安装了 rsyslog 而不是 syslog。*`/var/log/myapp.log``myapp`*

 *```
#include <stdio.h>
#include <unistd.h>
#include <syslog.h>

int main(void) {
    openlog("myapp", LOG_PID|LOG_CONS, LOG_USER);
    syslog(LOG_INFO, "abc 10");
    closelog();
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T22:43:57.757

根据 syslog(3) 手册页，openlog() 的第一个参数设置日志消息的前缀，而不是文件名。您可以使用 LOG_LOCAL0 之类的工具来标记您的输出，然后[使用 /etc/syslog.conf 配置 syslogd](https://unix.stackexchange.com/questions/11953/make-a-log-file)以将这些日志发送到您想要的文件。*

# java - 模板方法和策略设计模式有什么相似之处

> ID：10376024
> 
> 赞同：5
> 
> 时间：2012-04-29T21:13:49.057
> 
> 标签：java, design-patterns, strategy-pattern, template-method-pattern

这是模板方法模式的一个例子吗？

```
public abstract class Character{

    public final void useWeapon(){
        useBusterSword();
        useMateriaBlade();
        useUltimateWeapon();
    }

    public abstract void useBusterSword();
    public abstract void useMateriaBlade();
    public abstract void useUltimateWeapon();
}

public class Cloud extends Character{

    public void useUltimateWeapon() {
        System.out.println("Change Weapon to Ultima Weapon");
    }

    public void useBusterSword() {

    }

    public void useMateriaBlade() {

    }
}

public class TestGame {
    public static void main(String[] args){
        Character cloud = new Cloud();
        cloud.useWeapon();
    }
} 
```

如果是这样，那么使用这种模式比策略模式有什么优势？

策略模式

```
public class Character {
    WeaponBehavior w;
    public void setWeaponBehavior(WeaponBehavior wb){
        w = wb;
    }

    public void useWeapon(){
        w.useWeapon();
    }
}

public class Cloud extends Character{

    public Cloud(){
        w = new UltimaWeapon();
    }

}

public interface WeaponBehavior {
    public void useWeapon();
}

public class UltimaWeapon implements WeaponBehavior {
    public void useWeapon() {
        System.out.println("Change Weapon to UltimaWeapon");
    }

}

public class BusterSword implements WeaponBehavior {
    public void useWeapon() {
        System.out.println("Change Weapon to MateriaBlade");
    }

}

public class MateriaBlade implements WeaponBehavior {
    public void useWeapon() {
        System.out.println("Change Weapon to MateriaBlade");
    }

}

public class TestGame {
    public static void main(String[] args){
        Character c = new Cloud();
        c.useWeapon();
    }
} 
```

我注意到的是 Strategy 模式封装了不同的东西，而 TemplateMethod 模式让子类处理了不同的东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T09:26:56.787

`Strategy`模式定义了一系列算法并使它们*可以互换*。客户端代码可以使用不同的算法，因为算法是封装的。

`Template`方法定义了算法的*轮廓*，并让子类成为算法实现的一部分。因此，您可以对算法步骤进行不同的实现，但*保留算法的结构*

所以你可以看到每个模式的***意图***是不同的。因此，这不是一个优于另一个的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T21:58:31.303

是的，您可以使用策略模式而不是模板方法，但在特殊情况下，您将重复算法逻辑。

模板方法的最佳用例是通过特定实现替换一些抽象方法。

例如，你想做饭，你的食谱是：

1.  服用成分
2.  把它们放进
3.  热
4.  给 smbd 煮熟的食物

在java中配方只是某些`Recipe`类中的方法

```
void cook(){
  takeIngridients();
  putIt();  // abstract
  heat();  //abstract
  giveFood();
} 
```

您创建`PanRecipe`类扩展`Recipe`并实现抽象方法以使用 pan。另一个类可以`GrillRecipe`和实现使用烧烤的方法。现在您可以通过 调用它`grillRecipe.cook()`，而不是策略模式不需要复制重复方法的实现`takeIngridients`和`giveFood`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T21:43:13.800

当您想要使用某些父类的字段并且您的实现不是真正的完整算法而只是一些非常特定于您的类层次结构的“逻辑”时，模板方法模式很有用。

另一方面，当您发现您的模板方法实现是冗余的或导致同一棵树的多个子类之间出现重复代码时，请首选策略模式，以便您的代码将被分解。

此外，模板方法通过子类化的方式工作，您无法在运行时更改您的行为，而使用策略模式，您所要做的就是随时使用 setter 来更改您的行为。

在所有其他情况下，这两种模式非常相似，您通常可以选择您喜欢的一种。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-13T17:39:17.257

**相似之处：**

1.  *模板*方法和*策略*都是行为模式。
2.  两种模式都用于按子类更改算法，但有所不同 - 部分或全部

为了更好地理解这两个特性，我们必须了解这两种模式实现的核心差异。

**核心差异：**

1.  *模板方法*使用继承，*策略*使用组合
2.  基类实现的*Template 方法*不应被覆盖。***这样，算法的结构由超类控制，细节在子类中实现***
3.  *Strategy*将算法封装在一个接口后面，这为我们提供了在运行时更改算法的能力

相关文章：

[策略模式的真实示例](https://stackoverflow.com/questions/370258/real-world-example-of-the-strategy-pattern/35180265#35180265)

[JDK中的模板设计模式，找不到定义要按顺序执行的方法集的方法](https://stackoverflow.com/questions/35559360/template-design-pattern-in-jdk-could-not-find-a-method-defining-set-of-methods/38740810#38740810)

查看[模板方法](http://www.journaldev.com/1763/template-method-design-pattern-in-java)和[策略](http://www.journaldev.com/1754/strategy-design-pattern-in-java-example-tutorial)文章以获得更好的理解。

# javascript - Javascript Closure 编译器 - 导出全局变量

> ID：10376025
> 
> 赞同：3
> 
> 时间：2012-04-29T21:13:53.447
> 
> 标签：javascript, google-closure-compiler

我的 webapp 基于一个通用脚本，在该脚本中我定义了通用函数和一个全局变量，并动态加载了处理这些函数的脚本。到目前为止，我发现导出全局变量的唯一方法是将任何出现替换为，`window["myGlobalVar"]`但我觉得它非常难看。有更好的方法吗？

这是一个插图

```
// commonscript.js before compilation
function incrementVariable() {window["myGlobalVar"]++;}
window["incrementVariable"] = incrementVariable;
window["myGlobalVar"] = 0; 
```

在另一个脚本中

```
alert(myGlobalVar); // <= alerts 0
incrementVariable();
alert(myGlobalVar); // <= alerts 1 
```

我正在寻找一种直接`myGlobalVar`在两个文件中使用的方法，因为它会更优雅。但是，我需要设置`window["myGlobalVar"]`为指针而不是对象的副本，并且我不确定如何在简单类型上执行此操作。

可能吗？封装`myGlobalVar`是`Object`唯一的另一种方式吗？

非常感谢你的灯。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-30T13:01:23.850

# New Answer

Closure-compiler supports an `@nocollapse` annotation which prevents a property from being collapsed to a global variable. This allows the property to be mutable when exported.

`@nocollapse` does not block renaming - you still need to export a property to accomplish that.

`@nocollapse` is currently only supported when compiling from source. It will be included in the next release - that is versions **AFTER** the v20150315 release.

# Old Answer

**`@expose` is now deprecated. The compiler will warn about any usage of `@expose`**

There is a new, but so far undocumented, annoatation: @expose. This single annotation will both export a property and prevent it from being collapsed off a constructor. It sounds like the perfect fit for your situation - but it will require your variable to be a property on an object.

However, use with care. Any properties which have @expose will not be renamed and will not be removed as dead code. This makes it especially problematic for use by javascript library writers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-03T18:34:40.263

如果您想要一个不被重命名的变量，只需创建一个名为 example 的文件，`props.txt`其中包含以下内容：

```
myGlobalVar:myGlobalVar 
```

然后在编译代码时，添加命令行参数：`--property_map_input_file props.txt`

您的变量不会被重命名，并且只要它没有被优化掉，它就可用于所有脚本。此外，如果您根本不声明它（所以您省略`var myGlobalVar`），它不会被重命名或删除。

# sql - 在存储过程中使用聚合函数一次而不是多次

> ID：10376027
> 
> 赞同：3
> 
> 时间：2012-04-29T21:13:55.370
> 
> 标签：sql, tsql

我有一个存储过程，它在其中使用一个函数，并且该函数需要两个参数。我的问题与性能问题有关，见下文

```
 CASE 
 WHEN (DATEDIFF(MINUTE,dbo.FunctionName(DatetimeField, DatetimeID), dbo.FunctionName(DatetimeField, DatetimeID))/60.0) > 8 THEN
      (DATEDIFF(MINUTE,dbo.FunctionName(DatetimeField, DatetimeID), dbo.FunctionName(DatetimeField, DatetimeID))/60.0)
 Else 0
 END 
 Else
 0
 END)
 Else
(DATEDIFF(MINUTE,dbo.FunctionName(DatetimeField, DatetimeID), dbo.FunctionName(DatetimeField, DatetimeID))/60.0)-T.lunch
END
     as 'Total' 
```

现在我要做的是创建一个临时表，这样我就可以使用它来调用函数，而不是每次到达那些需要通过数十万条记录的行时调用函数的方式。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:51:34.037

您可以像这样在查询中重用表达式：

```
select (case when NewValue > 8 then NewValue else 0 end) xyz
from T
cross apply (
 select NewValue = dbo.FunctionName(DatetimeField, DatetimeID)
) x 
```

以这种特殊方式使用的交叉应用可用于引入新列并重用它们的值。此技术适用于在同一查询中重用常用表达式。

普通的批次级变量可以这样声明：

```
DECLARE @NewValue int = dbo.FunctionName(DatetimeField, DatetimeID); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:41:48.750

假设您的函数是确定性的（或者无论时钟时间如何至少返回相同的值），您可以设置一个临时表，例如：

```
select DatetimeField, DatetimeID, FunctionName(DatetimeField, DatetimeID) as val
into #tmp
from (select distinct DatetimeField, DatetimeID
      from table
     ) t 
```

然后，您可以重写存储过程以使用它。

但是，在编写查询时，确定性函数只会为 datediff 返回 0，因为这两个参数是相同的。

最后，您的性能问题似乎与被调用的函数有关。您发布代码的建议是一个很好的建议。

# android - 无法在 SdCard、Android 中创建文件夹

> ID：10376030
> 
> 赞同：0
> 
> 时间：2012-04-29T21:14:13.027
> 
> 标签：android, android-sdcard, mkdir, fileoutputstream

我的代码曾经可以工作，但现在我什至无法创建目录。（请注意，“1”没有打印到 logcat。）我不知道我破坏了什么。我正在尝试将图像保存在我创建的文件夹中，这是我的代码：

```
 String storedir = "/sdcard";
    String separator = "/";
    String mDateTime = formatter.format(cal.getTime());
    File newdir1 = new File(storedir + "/" + mDateTime);
            if (newdir1.mkdir())
                System.out.println("1");

    File newdir2 = new File(storedir + "/" + mDateTime + "/");
            if (newdir2.mkdir())
                System.out.println("2");

   // Fall into the catch because of ;
                if (fileNameLower.indexOf(".jpeg") > 0)
            fileExt = ".jpeg";
                String rand_fileName = Long.toString(System.currentTimeMillis());// +fileExt;
        String last_fileName = rand_fileName + fileExt;
            File storefile = new File(storedir + "/" + mDateTime + "/" + separator
                + last_fileName);
        String picAddress = storedir + "/" + mDateTime + "/" + separator
                + rand_fileName + ".png";
        System.out.println("135 : [" + storefile.toString() + "]/n");

        BufferedOutputStream bos = null;
        BufferedInputStream bis = null;
        try {
            Log.w("Process : " , "Starting to download process.");
            bos = new BufferedOutputStream(new FileOutputStream(storefile));
            bis = new BufferedInputStream(in);
            int c;
            while ((c = bis.read()) != -1) {
                bos.write(c);
                bos.flush();
            }
            Log.w("Process : " , "The image is downloaded.");
        } catch (Exception exception) {
            exception.printStackTrace();
            throw new Exception("151 : !");
        } finally 
        {
            bos.close();
            bis.close();
        }

04-29 21:29:20.648: W/The image's type(5733): .jpeg
04-29 21:29:20.648: I/System.out(5733): log : [.jpeg]/n
04-29 21:29:20.652: I/System.out(5733): log : [/sdcard/2012-04-29/1335734960650.jpeg]/n
04-29 21:29:20.652: W/Process :(5733): Starting to download process.
04-29 21:29:20.652: W/System.err(5733): java.io.FileNotFoundException: /sdcard/2012-04-29/1335734960650.jpeg (Permission denied)
04-29 21:29:20.672: W/System.err(5733):     at org.apache.harmony.luni.platform.OSFileSystem.open(Native Method)
04-29 21:29:20.672: W/System.err(5733):     at dalvik.system.BlockGuard$WrappedFileSystem.open(BlockGuard.java:232)
04-29 21:29:20.682: W/System.err(5733):     at java.io.FileOutputStream.<init>(FileOutputStream.java:94)
04-29 21:29:20.682: W/System.err(5733):     at java.io.FileOutputStream.<init>(FileOutputStream.java:66)
04-29 21:29:20.682: W/System.err(5733):     at com.mobil.eposta.Baglanti.saveFile(Baglanti.java:345)
04-29 21:29:20.692: W/System.err(5733):     at com.mobil.eposta.Baglanti.saveAttachMent(Baglanti.java:255)
04-29 21:29:20.692: W/System.err(5733):     at com.mobil.eposta.Baglanti.EkiKaydet(Baglanti.java:235)
04-29 21:29:20.692: W/System.err(5733):     at com.mobil.eposta.Baglanti.Position(Baglanti.java:224)
04-29 21:29:20.692: W/System.err(5733):     at com.mobil.eposta.GoruntuleActivity$1.onClick(GoruntuleActivity.java:75)
04-29 21:29:20.707: W/System.err(5733):     at android.view.View.performClick(View.java:2485)
04-29 21:29:20.707: W/System.err(5733):     at android.view.View$PerformClick.run(View.java:9080)
04-29 21:29:20.712: W/System.err(5733):     at android.os.Handler.handleCallback(Handler.java:587)
04-29 21:29:20.712: W/System.err(5733):     at android.os.Handler.dispatchMessage(Handler.java:92)
04-29 21:29:20.712: W/System.err(5733):     at android.os.Looper.loop(Looper.java:123)
04-29 21:29:20.712: W/System.err(5733):     at android.app.ActivityThread.main(ActivityThread.java:3683)
04-29 21:29:20.712: W/System.err(5733):     at java.lang.reflect.Method.invokeNative(Native Method)
04-29 21:29:20.712: W/System.err(5733):     at java.lang.reflect.Method.invoke(Method.java:507)
04-29 21:29:20.722: W/System.err(5733):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-29 21:29:20.732: W/System.err(5733):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-29 21:29:20.732: W/System.err(5733):     at dalvik.system.NativeStart.main(Native Method) 
```

**sdcard挂载的情况怎么办？**

**在此代码中，结果是“NOT GOOD”语句。我该如何改变这种情况？**

```
private static boolean  checkExternalMedia()
{
    boolean mExternalStorageAvailable = false;
    boolean mExternalStorageWriteable = false;
    String state = Environment.getExternalStorageState();

    if (Environment.MEDIA_MOUNTED.equals(state)) {
        // We can read and write the media
        mExternalStorageAvailable = mExternalStorageWriteable = true;
    } else if (Environment.MEDIA_MOUNTED_READ_ONLY.equals(state)) {
        // We can only read the media
        mExternalStorageAvailable = true;
        mExternalStorageWriteable = false;
    } else {
        // Something else is wrong. It may be one of many other states,
        //  to know is we can neither read nor write
        Log.i("TAG","State="+state+" Not good");
        mExternalStorageAvailable = mExternalStorageWriteable = false;
    }

    Log.i("TAG","Available="+mExternalStorageAvailable+"Writeable="+mExternalStorageWriteable+" State"+state);
    return (mExternalStorageAvailable && mExternalStorageWriteable);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:25:12.517

*   而不是使用“/sdcard”常量字符串，使用`Environment.getExternalStorageDirectory().getAbsolutePath()`

这将为您提供 sdcard 根路径（在某些设备中可能不仅仅是“/sdcard”

*   它通常是“/mnt/sdcard”，而不是“/sdcard”。如果你想对事物进行实验，首先要做的就是弄清楚一些事实。

*   您初始化了一个“分隔符”常量，但您继续使用“/”来创建路径。这是从您粘贴问题的代码中引用的：

    文件 storefile = new File(storedir + "/" + mDateTime + **"/" + separator** + last_fileName);

你能看出它有什么问题吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:19:23.863

你需要

```
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

在您的清单文件中。请参阅有关 stackoverflow 的其他问题，例如[写入 SD 卡的权限](https://stackoverflow.com/questions/2121833/permission-to-write-to-the-sd-card)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T22:08:22.420

`File`使用该类来构建路径更加安全和简单。

试试这样：

```
if (!checkExternalMedia()) {
    // show error dialog here.
    return;
}

File storedir = Environment.getExternalStorageDirectory();

String mDateTime = formatter.format(cal.getTime());
File savedir = new File (storedir, mDateTime);

if (fileNameLower.indexOf(".jpeg") > 0) {
    fileExt = ".jpeg";
}
String rand_fileName = Long.toString(System.currentTimeMillis());// +fileExt;
String last_fileName = rand_fileName + fileExt;

File storefile = new File(storedir, last_fileName);

// create all directories required for that file
if (!storefile.mkdirs()) {
    Log.e("Process", "can't create directories:" + storefile.getParent());
    // return here too
}

// here be streams 
```

# jquery - jQuery 代码在 Chrome 和 IE 中无法正常工作

> ID：10376036
> 
> 赞同：2
> 
> 时间：2012-04-29T21:15:19.607
> 
> 标签：jquery, internet-explorer, google-chrome, browser

我在 HTML 文档中有以下 javascript 代码，它在 div 中加载 Html：

```
<script>
$(function(){
    $("#submenu a").click(function(){
        var page = this.hash.substr(1);
        $.get(page+".html",function(gotHtml){
            $("#contenedorprincipal").html(gotHtml);
        })
    });
});
</script> 
```

在 Firefox 中它可以完美运行，但在 Chrome 和 IE 中它不起作用。有什么想法或建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:21:57.687

在我看来，它可以在 chrome 中运行......无论如何试试这个：http: [//jsfiddle.net/8daxU/](http://jsfiddle.net/8daxU/)

将包装函数替换为（我添加了一个警报只是为了显示哈希 - 在后记中删除）

```
 $(document).ready(function(){
     $("#submenu a").click(function(){
        var page = this.hash.substr(1);
        alert(page);
        $("#contenedorprincipal").load(page+".html");
     });
 }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:33:24.180

这应该适用于浏览器：

```
$(function () {
    var $content = $( '#contenedorprincipal' );

    $( '#submenu' ).on( 'click', 'a', function ( e ) {
        $content.load( this.href.split( '#' )[1] + '.html' );
    });
}); 
```

# actionscript-3 - 我可以在 Flash 中访问 Google Maps API 吗？

> ID：10376039
> 
> 赞同：0
> 
> 时间：2012-04-29T21:15:26.837
> 
> 标签：actionscript-3, flash, google-maps-api-3, cross-domain

我想这样查询 Google Maps API：[http ://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true](http://maps.googleapis.com/maps/api/geocode/json?address=1600+Amphitheatre+Parkway,+Mountain+View,+CA&sensor=true)

他们的`crossdomain.xml`文件的内容，[here](http://maps.googleapis.com/crossdomain.xml)，是：

```
<?xml version="1.0"?>
<!DOCTYPE cross-domain-policy SYSTEM "http://www.adobe.com/xml/dtds/cross-domain-policy.dtd">
<cross-domain-policy>
  <site-control permitted-cross-domain-policies="by-content-type" />
</cross-domain-policy> 
```

我对 ActionScript 不是很有经验，但我相信，由于他们缺少`allow-access-from`指令，我无能为力。

我不能使用`ExternalInterface`，所以在 Javascript 中使用 JSONP 是不可能的。

有什么办法可以解决这个问题吗？

**注意：**我不能使用 Google Maps API for Flash，因为[他们没有发布新的 API 密钥](https://developers.google.com/maps/signup)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T04:15:42.973

您可以使用“INSIDE”Flash IDE 中的谷歌地图，无需 API 密钥。尝试下载他们的示例并在闪存上运行它们。

# objective-c - 推视图控制器

> ID：10376040
> 
> 赞同：0
> 
> 时间：2012-04-29T21:15:36.307
> 
> 标签：objective-c, xcode, cocoa-touch, ios5

我有一个标签栏，但我想通过点击切换到另一个视图，所以我做到了

```
UIViewController *controller;
switch (item.tag) {
    case 0:
        NSLog(@"1");

        controller = [[2012ViewController alloc] init]; 

        [self.navigationController pushViewController:controller
                                             animated:YES];

        break; 
```

但是当我点击它时，它会转到 2012ViewController （“主页”），但会出现一个后退按钮。但是它需要转到 2012ViewController 而不显示后退按钮，因为当我单击 2012ViewController 屏幕上的后退按钮时，它是

2012ViewController >（后退按钮）'我点击后退按钮的屏幕'>（后退按钮）2012ViewController

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:31:51.727

如果我正确理解你的问题，你应该简单地打电话

```
[self.navigationController popViewControllerAnimated:YES]; 
```

这将从导航控制器堆栈中弹出您的视图控制器。这样，您将回到第一个视图控制器，而不是推送一个新的。

# c# - DragMove() 和 MouseDragElementBehaviour 不能在同一个窗口中工作？

> ID：10376044
> 
> 赞同：0
> 
> 时间：2012-04-29T21:16:20.033
> 
> 标签：c#, .net, wpf, xaml, drag-and-drop

我正在创建一个 WPF/xaml 应用程序

窗口样式=“无”

所以正因为如此，我不得不使用

```
 protected override void OnMouseLeftButtonDown(MouseButtonEventArgs e)
    {
        base.OnMouseLeftButtonDown(e);

        // Begin dragging the window
        this.DragMove(); 
```

使其可以在屏幕上拖动窗口。但是，我也想在我计划使用的窗口中制作可拖动的图像

```
 <Image HorizontalAlignment="Right" Height="65" Width="203" Margin="0,278.271,14.434,82.5" Source="Images/Implementation1.png" Stretch="Fill">
        <i:Interaction.Behaviors>
            <ei:MouseDragElementBehavior ConstrainToParentBounds="True"/>
        </i:Interaction.Behaviors>
    </Image> 
```

问题是我不能让它们都在同一个窗口上工作，因为它们只有在另一个被关闭时才会起作用。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:11:20.510

您`OnMouseLeftButtonDown`是在整个窗口上定义的，因此会干扰`MouseDragElementBehavior`.

添加一个`Border`到你的窗口，给它一个`Background`（`Transparent`没关系，只是不要让它没有背景）并`MouseLeftButtonDown`在边框上收听事件。在`DragMove()`事件的处理程序中执行。

你可以把边框作为窗口的标题，也可以把它放在内容的后面。

# ruby-on-rails-3 - 使用 Carrierwave 上传文件时，nil 不是符号

> ID：10376046
> 
> 赞同：0
> 
> 时间：2012-04-29T21:16:29.497
> 
> 标签：ruby-on-rails-3, carrierwave

我搜索了很多。我正面临这个错误 ![在此处输入图像描述](../Images/988d645ddc5b81af79d262efc6d04543.png)

控制器中的创建方法是

def create @category = Category.new(params[:category])

```
respond_to do |format|
  if @category.save
    format.html { redirect_to @category, notice: 'Category was successfully created.' }
    format.json { render json: @category, status: :created, location: @category }
  else
    format.html { render action: "new" }
    format.json { render json: @category.errors, status: :unprocessable_entity }
  end
end
end 
```

我的表格是

```
<%= form_for @category, :html => { :multipart => true } do |f| %>
<% if @category.errors.any? %>
<div id="error_explanation">
  <h2><%= pluralize(@category.errors.count, "error") %> prohibited this category from   being saved:</h2>

  <ul>
  <% @category.errors.full_messages.each do |msg| %>
    <li><%= msg %></li>
  <% end %>
  </ul>
  </div>
  <% end %>

 <div class="field">
  <%= f.label :name %><br />
  <%= f.text_field :name %>
 </div>
 <div class="field">
   <%= f.label :description %><br />
   <%= f.text_area :description%>
 </div>

 <div class="field">
    <%= f.file_field :image %>
 </div>

 <div class="actions">
    <%= f.submit %>
 </div>
 <% end %> 
```

当我选择要上传的文件并单击提交按钮时不继续

我的上传者是

```
# encoding: utf-8
require 'carrierwave/processing/rmagick'
class ImageUploader < CarrierWave::Uploader::Base

#Include RMagick or MiniMagick support
include CarrierWave::RMagick

# Choose what kind of storage to use for this uploader:
storage :file

# This is a sensible default for uploaders that are meant to be mounted:
def store_dir
"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}"
end

def scale(width, height)
 # do something
end

# Create different versions of your uploaded files:
  version :thumb do
  process :resize_to_fill => [80, 80]
  end

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T06:43:15.277

我已经创建了新项目，以相同的方式应用所有内容及其工作，仍然不知道为什么会发生此错误，但现在我没有问题。

# php - fopen 对具有 777 权限的文件的权限被拒绝

> ID：10376048
> 
> 赞同：7
> 
> 时间：2012-04-29T21:16:50.167
> 
> 标签：php, fopen, file-permissions

由于这篇文章的标题几乎是不言自明的，我将直接跳到代码：

```
echo sprintf('%o', fileperms('test.txt'))."<br/>";

fopen("test.txt", "w"); 
```

有了这个，我得到：

```
100777
fopen(test.txt): failed to open stream: Permission denied 
```

有任何想法吗 ？

编辑：问题已解决：服务器上的访问控制列表配置不正确。

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T21:26:13.887

我认为您可能对文件有写/读权限，但对文件夹没有。在您网站的公共根目录中尝试此操作，看看您是否可以读取或写入该文件。

对于安全模式（[http://php.net/manual/en/function.fopen.php](http://php.net/manual/en/function.fopen.php)），php doc 的说明如下：

> 注意：启用安全模式后，PHP 会检查脚本运行所在的目录是否与正在执行的脚本具有相同的 UID（所有者）。

最后，您还需要确保 php 有权访问您尝试写入的文件夹。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-01-16T13:34:46.217

我有同样的问题：文件夹是 777，但 fopen 不起作用。fopen 表示权限拒绝。确保您的脚本具有“良好”权限。也许它会帮助你：

```
echo $dst, file_exists($dst) ? ' exists' : ' does not exist', "\n";
echo $dst, is_readable($dst) ? ' is readable' : ' is NOT readable', "\n";
echo $dst, is_writable($dst) ? ' is writable' : ' is NOT writable', "\n";
$fh = fopen($dst, 'w');
if ( !$fh ) {
    echo ' last error: ';
    var_dump(error_get_last());
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T00:36:46.707

我认为您遇到的问题是文件所有权问题...您可以使用它来找出问题

```
error_reporting(E_ALL);
ini_set('display_errors','On');

$file = "a.jpg";

echo sprintf ( '%o', fileperms ( $file ) ), PHP_EOL;
echo posix_getpwuid ( fileowner ( $file ) ), PHP_EOL; // Get Owner
echo posix_getpwuid ( posix_getuid () ), PHP_EOL; // Get User

if (is_file ( $file )) {
    echo "is_file", PHP_EOL;
    ;
}

if (is_readable ( $file )) {
    echo "is_readable", PHP_EOL;
    ;
}

if (is_writable ( $file )) {
    echo "is_readable", PHP_EOL;
}

fopen ( $file, "w" ); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-09-11T12:30:52.703

我刚刚遇到了这个问题，不幸的是，错误消息没有提供任何关于实际原因的线索。我必须将 777 提供给包含在给出错误消息的文件中的类的文件。错误消息只说调用该类的 php 文件，它已经有 777。

因此，检查错误消息中提到的文件（比如说 index.php），然后检查在该文件中实例化了哪些类（class-file.php、class-writer.php 等）。然后检查这些文件（class-file.php、class-writer.php）的权限。

一旦我授予类文件的权限，它就可以正常工作。也许虚拟主机更改了他们的配置中的某些内容，因为直到几天前一切正常。

# asp.net-mvc-3 - MVC 3 HTML 5 和 HTML 4

> ID：10376052
> 
> 赞同：4
> 
> 时间：2012-04-29T21:17:14.473
> 
> 标签：asp.net-mvc-3, html, razor

我有一个 MVC 3 项目并启用了 HTML 5 标记。对于 HTML 5 部分，它运行良好。

现在我创建了一个局部视图并将一些代码复制并粘贴到其中

第一行是

```
<div id="Header"> 
```

我想在我的视图中使用这个部分视图，即 html 4 标记。

问题来了，剃须刀引擎自动转换我的

```
<div id="Header"> 
```

进入

```
<Header> 
```

我不想为此视图使用 HTML 5，而只使用 HTML 4。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-08T07:45:58.983

你为什么要变回：

```
<div id="Header"> 
```

未来的路在何方？

如果您担心与旧版浏览器的兼容性，您可以简单地实现modernizr-2.6.2.js。（应随 Visual Studio Web 项目提供）

这将使所有基本的 HTML5 在旧版浏览器中工作。（未在 IE6 之前的浏览器上测试过）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-19T06:25:04.910

您能否在部分视图页面的顶部使用过渡文档类型。因为 HTML 引擎是根据 doctype 来理解页面的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-19T01:54:22.403

给您的问题：您是否在 Html 5 视图中创建了 Html 4 局部视图？; 如果你的回答是肯定的，那么你提到的问题是自然发生的。当 MVC 呈现您的页面时，他首先呈现 Html 5 部分（布局母版页）。因此，将默认选择 Html5 类型的文档类型。之后，当渲染 Html 4 部分视图时，引擎会在对 Html 5 的标记支持下渲染它。

如果我想总结一下我想说的话：

```
<html>
      //Html 4 partial view.
</html> 
```

无论您在该部分视图中编写什么 Html4 代码，这都会生成一个 Html 5 标记视图。如果我错了，请告诉我。我会从我的错误中吸取教训。谢谢。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-08T14:42:35.467

如果您按如下方式更改 div，它将不会被换出：

```
<div id="strap"> 
```

这可能会解决您眼前的问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-05-08T10:59:20.450

你总是可以使用一个类而不是一个 id

```
<div class="header"> 
```

这有一个额外的好处，就是不会让你的 css（如果有的话）这个元素非常具体，也意味着 ID 不能被重用。

您仍然可以使用 jQuery 选择器选择您的元素，使用它的类作为选择器

```
$('.header') 
```

# jsf-2 - 不起作用 JSF 注释 @ListenerFor/@ListenersFor

> ID：10376053
> 
> 赞同：3
> 
> 时间：2012-04-29T21:17:15.847
> 
> 标签：jsf-2, annotations, listener, systemevent

JSF 注释 @ListenerFor 不适用于 GlassFish 或 Tomcat。没有错误或警告。它只是不调用方法 processEvent()。

```
@ListenersFor({@ListenerFor(systemEventClass=PostConstructApplicationEvent.class), 
public class MySystemEventListener implements SystemEventListener {

   @Override
   public void processEvent(SystemEvent event) throws AbortProcessingException {
      if(event instanceof PostConstructApplicationEvent){
         System.out.println("*********************************************");
         System.out.println("processEvent Method is Called: PostConstructApplicationEvent");
         System.out.println("*********************************************");
      }

      if(event instanceof PreDestroyApplicationEvent){
         System.out.println("*********************************************");
         System.out.println("processEvent Method is Called: PreDestroyApplicationEvent");
         System.out.println("*********************************************");
      }
}

   @Override
   public boolean isListenerForSource(Object o) {
      return (o instanceof Application);
   }

} 
```

有什么想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T18:53:02.100

正如它的[javadoc](http://docs.oracle.com/javaee/6/api/javax/faces/event/ListenerFor.html)告诉你的那样，它的`@ListenerFor`目的是放在一个`UIComponent`或`Renderer`实现上，而不是放在一个独立的`SystemEventListener`实现上。对于后者，您需要将其注册`<system-event-listener>`为`faces-config.xml`.

例如

```
<application>
    <system-event-listener>
        <system-event-listener-class>com.example.MySystemEventListener</system-event-listener-class>
        <system-event-class>javax.faces.event.PostConstructApplicationEvent</system-event-class>
        <system-event-class>javax.faces.event.PreDestroyApplicationEvent</system-event-class>
    <system-event-listener>
</application> 
```

对于特定的功能需求，您可能需要考虑使用预先初始化的应用程序范围 bean。这有点容易，不需要一些冗长的 XML：

```
@ManagedBean(eager=true)
@ApplicationScoped
public void App {

    @PostConstruct
    public void init() {
        // ...
    }

    @PreDestroy
    public void destroy() {
        // ...
    }

} 
```

# jquery-mobile - 将主干集合绑定到前端的视图和下划线模板

> ID：10376055
> 
> 赞同：1
> 
> 时间：2012-04-29T21:17:19.653
> 
> 标签：jquery-mobile, backbone.js, underscore.js

我正在使用骨干网 + jquery mobile，无法通过下划线模板将我的模型（集合）数组输出到 UI。

我的模型如下：

```
var shortcake = Backbone.Model.extend({

    defaults: function() {
      return {
        name: "No Slot", 
        butter: false, 
        time: "3pm",
        icon: "plus",
        deladd: "ADD"
      };
    },

    initialize: function() {
      this.bind("change:butter", function(){
      if (this.model.butter == false) {
        this.set({name: this.defaults.name});
      };
        }),
    }
}); 
```

我的收藏如下：

```
var shortcakes = Backbone.Collection.extend ({
    model: shortcake
});

var shortcake1 = new shortcake({ name: "How Bizarre", butter: "true", time: "1", icon:"plus", deladd:"ADD" });
var shortcake2 = new shortcake({ name: "Sexual Healing", butter: "true", time: "1", icon:"plus", deladd:"ADD" });
var shortcakeAlbum = new shortcakes([ shortcake1, shortcake2]); 
```

而我的观点：

```
var shortcakeUI = Backbone.View.extend ({

    tagName: "li",
    template: _.template($('#shortcakeTemplate').html()),

    initialize: function(){
    this.render();
    },

    render: function() {
        var variables = { namee: name };
          if (this.model.butter == false) {
            this.model.deladd = "ADD";
            this.model.icon= "plus";
            this.el.html( template );
          }
          else {
                this.model.deladd = "DELETE";
            this.model.icon= "minus";
            this.el.html( template );
          }
        },

)};

var ShortcakeUI = new shortcakeUI({ 
collection : shortcakeAlbum, 
el: $("#shortcakeinterface")[0] 
});
ShortcakeUI.render(); 
```

我的html是：

```
 <ul data-role="listview" data-split-icon="gear" data-split-theme="d">
        <div id="shortcakeinterface"></div>
    </ul>
<!---Templates--->
            <script id="shortcakeTemplate" type="text/template">
        <% for(var i = 0; i < shortcakeAlbum.length; i++){ %>
        <% var shortcakez = shortcakeAlbum[i]; %>

            <fieldset class="ui-grid-a">
                <div class="ui-block-a">

                    <h3><%= shortcakez.time %></h3>
                    <p><%= shortcakez.name %></p>      

                </div>

                <div class="ui-block-b">

                    <div id="8" data-role="controlgroup" data-type="horizontal" >
                       <a href="#" data-role="button" data-icon="<%= shortcakez.icon %>"><%= shortcakez.deladd %></a>
                       <a href="#" data-role="button" data-icon="plus">Test</a>
                    </div>

                </div>     
            </fieldset>
        <% } %>
        </script> 
```

因此，有了这些，我的 UI 不会显示加载的模型列表。刚开始研究骨干网和js，我在这里做事吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:57:34.210

您需要在 render() 中将模型传递给您的模板。

代替

```
this.el.html( template ); 
```

做这个

```
$(this.el).html( this.template(this.model.toJSON()) ); 
```

# c++ - sys/stat S_ISDIR(m) with struct dirent

> ID：10376056
> 
> 赞同：3
> 
> 时间：2012-04-29T21:17:22.157
> 
> 标签：c++, c, systems-programming

我想检查文件是目录、链接还是普通文件。我遍历目录并将每个文件保存为`struct dirent *`. 我尝试传递`d_ino`给`S_ISDIR(m)`、`S_ISLINK(m)`或`S_ISREG(m)`无论文件如何，我都不会得到肯定的结果。所以我的问题是：我如何使用`S_ISDIR(m)`with `struct dirent`？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T21:40:26.570

当您使用 读取目录[`readdir(3)`](http://linux.die.net/man/3/readdir)时，文件类型存储在您收到`d_type`的每个成员变量中，而不是成员中。您很少会关心 inode 编号。`struct dirent``d_ino`

然而，并不是所有的实现都会为`d_type`成员提供有效的数据，因此您可能需要在每个文件上调用[`stat(3)`](http://linux.die.net/man/3/stat)or[`lstat(3)`](http://linux.die.net/man/3/lstat)来确定其文件类型（`lstat`如果您对符号链接感兴趣，请使用，或者`stat`如果您对符号链接），然后使用宏检查`st_mode`成员。`S_IS***`

典型的目录迭代可能如下所示：

```
// Error checking omitted for expository purposes
DIR *dir = opendir(dir_to_read);
struct dirent *entry;

while((entry = readdir(dir)) != NULL)
{
    struct stat st;
    char filename[512];
    snprintf(filename, sizeof(filename), "%s/%s", dir_to_read, entry->d_name);
    lstat(filename, &st);

    if(S_ISDIR(st.st_mode))
    {
        // This directory entry is another directory
    }
    else if(S_ISLINK(st.st_mode))
    {
        // This entry is a symbolic link
    }
    else if(S_ISREG(st.st_mode))
    {
        // This entry is a regular file
    }
    // etc.
}

closedir(dir); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:28:49.647

S_ISDIR(m), S_ISLINK(m) 用于对抗`struct stat.st_mode`，而不是`struct dirent`。例如：

```
struct stat sb;
...
stat ("/", &sb);
printf ("%d", S_ISDIR (sb.st_mode)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T15:53:53.297

不幸的是，如上所述，您不能将 S_IS* 宏与 struct dirent 成员一起使用。但是，您不需要，因为成员 d_type 已经为您提供了该信息。您可以像这样直接测试它：

```
struct dirent someDirEnt;
... //stuff get it filled out
if(someDirEnt.d_type==DT_LNK)
...//whatever you link 
```

特别是 d_type 成员可能包含：

> ```
>  DT_BLK      This is a block device.
>    DT_CHR      This is a character device.
>    DT_DIR      This is a directory.
>    DT_FIFO     This is a named pipe (FIFO).
>    DT_LNK      This is a symbolic link.
>    DT_REG      This is a regular file.
>    DT_SOCK     This is a UNIX domain socket.
>    DT_UNKNOWN  The file type is unknown. 
> ```

# javascript - 如何阻止 Uploadify 显示进度框

> ID：10376057
> 
> 赞同：1
> 
> 时间：2012-04-29T21:17:24.257
> 
> 标签：javascript, jquery, uploadify, image-uploading

正如标题所说，我似乎无法让 Uploadify 在上传过程中停止显示进度框。这是我所拥有的：

```
$('#imageupload').uploadify({
                'swf'      : 'scripts/uploadify/uploadify.swf',
                'uploader' : 'scripts/uploadify/uploadify.php',
                // Put your options here
                'buttonText' : 'Select Image',
                'uploadLimit' : 999,
                'overrideEvents' : ['onUploadProgress'],
                'multi' : false,
                'formData'      : {'yourid' : '<?=@(int)$_SESSION['user']?>'},
                'fileSizeLimit' : '2MB',
                'fileTypeExts' : '*.gif; *.jpg; *.png; *.JPG; *jpeg',
                'fileTypeDesc' : 'Image Files',
                'onUploadStart' : function(file) {
                    $("#imageupload").uploadify("settings", "formData", {'yourid' : $(".userid").attr("id")});
                    $(".imageuploadbox #imagepercent").css("display", "inline");
                },
                'onUploadSuccess' : function(file) {
                    var currenttime = new Date();
                    $("img#yourprofilepic").attr("src", "images/artist_pictures/thumbs/artist_8.jpg?"+currenttime);
                },
                'onUploadProgress' : function(file, bytesUploaded, bytesTotal, totalBytesUploaded, totalBytesTotal) {
                    var percentcomp = (100*(totalBytesTotal/totalBytesUploaded)).toFixed(0);
                    $('.imageuploadbox #imagepercent #percentcomplete').html(percentcomp);
                } 
            }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:22:33.623

很简单试试这个：

删除要上传的链接`css`，然后将其添加到您的 css 中：

```
.uploadifyQueue
{
display:none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-10T16:05:43.610

好像名字变了，这个对我有用：

```
#upload_pc-queue{
    display:none;
} 
```

# iphone - 隐藏 uitoolbar 在顶部留下空隙

> ID：10376058
> 
> 赞同：0
> 
> 时间：2012-04-29T21:17:26.227
> 
> 标签：iphone, objective-c, ios, cocoa-touch

我在导航堆栈中有三个视图控制器。第一个视图控制器不使用 uitoolbar，第二个使用，第三个不使用。

问题是，当我从第二个 UIViewController 转到第三个 UITableViewController 时，如果我隐藏工具栏，屏幕顶部会出现一个白色间隙。

这是一张图片：

![顶部间隙](../Images/4aff5517dae7a04fdcb8e1520113e997.png)

我目前`[self.navigationController setToolbarHidden:YES animated:YES];` 在第二个视图控制器的 viewWillDisappear 中，但我也把它放在了第三个视图控制器的 viewWillAppear 方法中。两者都会导致出现差距。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:51:56.630

首先，我建议使用`setToolbarHidden:YES animated:NO`让新的 UIViewController 在没有工具栏的情况下出现。我认为您的方法最初会显示它然后消失，对吗？如果您使用`animated:NO`（或者使用不带 的方法签名`animated:`），当第三个 UIViewController 被推到屏幕上时，新的 UIViewController 应该“推”出第二个 UIViewController 的 UIToolbar。

其次，您可能需要在 Interface Builder 中查看您的 UIViewController 视图的震动和支撑。几乎可以肯定，这就是造成这种差距的原因。您可能希望拥有固定的顶部和底部边距以及灵活的高度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:01:51.437

我会回答我自己的问题，但我不会接受它，因为它很hacky。

我可以通过在 viewDidLoad 的开头添加这行代码来修复它：

```
[self.tableView setFrame: CGRectMake(0, 0, 320, 493)]; 
```

基本上，我将 tableview 框架的高度设置为比全屏尺寸（320 x 480）大 13 个像素。

# c# - 使用控制器参数进行单元测试

> ID：10376062
> 
> 赞同：1
> 
> 时间：2012-04-29T21:17:58.867
> 
> 标签：c#, asp.net-mvc-3

我有一个使用 Azure 的 MVC4 项目。我想编写简单的测试来检查用户登录。我的登录操作定义为

```
 [HttpPost]
    public ActionResult LogOn(LogOnModel model, string returnUrl) 
    {
        if (ModelState.IsValid) 
        {
            if (Membership.ValidateUser(model.UserName, model.Password)) 
            {
                FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe);
                if (Url.IsLocalUrl(returnUrl) && returnUrl.Length > 1 && returnUrl.StartsWith("/")
                    && !returnUrl.StartsWith("//") && !returnUrl.StartsWith("/\\")) 
                {
                    return Redirect(returnUrl);
                }
                else 
                {
                    return RedirectToAction("Index", "Home");
                }
            }
            else 
            {
                ModelState.AddModelError("", "The user name or password provided is incorrect.");
            }
        }

        // If we got this far, something failed, redisplay form
        return View(model);
    } 
```

和我的测试方法

```
[TestMethod]
public void UserValidLoginTest()
{
    // Arrange
    AccountController controller = new AccountController();

    // Act
    LogOnModel model = new LogOnModel()
    {
        UserName = "user@example.com",
        Password = "pass1234"
    };

    var result = controller.LogOn(model, null) as RedirectToRouteResult;

    // Assert
    Assert.IsNotNull(result);
    Assert.AreEqual(result.RouteValues["action"], "Index");
} 
```

我有两个问题，首先是

```
 FormsAuthentication.SetAuthCookie(model.UserName, model.RememberMe); 
```

返回 NullReferenceException 并且还

```
 Url.IsLocalUrl(returnUrl) 
```

做同样的事情。我怎么能解决这个问题？我怎么能测试它？我也可以使用 Selenium 或 Moq 编写集成测试，但我不确定如何使用 Azure 对其进行测试。任何想法如何解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:23:20.073

似乎您需要为 FormsAuthentication 和 Url 类创建模拟。因为看起来这些是静态方法，所以你应该用一个调用它们的接口来包装它们的用法，并且在测试中，只需使用一个也实现相同接口的模拟类，但会返回你需要的模拟结果测试运行。
（有关在[此处](http://adventuresdotnet.blogspot.com/2011/03/mocking-static-methods-for-unit-testing.html)模拟静态方法的更多信息）

如果您使用 IoC 容器来注入控制器的依赖项，例如 Windsor Castle，这将更容易做到。[（您可以在此处](http://stw.castleproject.org/Windsor.MainPage.ashx)
阅读有关温莎城堡集装箱的信息）

# c++ - 将唯一数据推送到向量中

> ID：10376065
> 
> 赞同：26
> 
> 时间：2012-04-29T21:18:34.583
> 
> 标签：c++, insert, unique, stdvector

我有以下数据：

```
FolioA Name1 100
FolioA Name2 110
FolioA Name3 100
FolioB Name1 100
FolioB Name3 106
FolioC Name1 108
FolioC Name2 102
FolioC Name3 110 
```

我只想将唯一的名称（即 Name1、Name2 和 Name3，每个一次）插入

```
std::vector<std::string> name; 
```

当我遍历数据时。

因此，我有以下代码，我将数据存储在名为 test 的地图中：

```
std::map<std::string, std::map<std::string, double> >test;
std::map<std::string, std::map<std::string, double > >::iterator it1 = test.begin(), end1 = test.end();
    while (it1 !=end1) {
        std::map<std::string, double>::iterator it2 = it1->second.begin(), end2=it1->second.end();
        **name.push_back(it2->first);**
        ++it2;
    }
    ++it1;
} 
```

但是，目前通过以我的方式将数据推送到名称中，有 3 个 Name1 实例、2 个 Name2 实例和 3 个 Name3 实例，这是我的代码所期望的。如何将其修复为只有唯一名称。

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-04-29T21:27:24.110

由于您想保留给定名称的第一个实例，因此您必须在某个时候执行名称查找。一个只涉及你的向量的简单算法是可以使用[std::find检查条目是否已经存在](http://en.cppreference.com/w/cpp/algorithm/find)

```
std::vector<std::string> name;

....
if (std::find(name.begin(), name.end(), someName) == name.end()) {
  // someName not in name, add it
  name.push_back(someName);
} 
```

但是在这里，您每次要插入元素时都在执行搜索，这（本身）取决于`O(N)`复杂性，`O(N*N)`为整个算法提供支持。因此，您可以通过使用具有快速查找功能的中间容器进行优化，例如`std::set`@Chad 建议的一个具有`O(logN)`查找复杂性的容器，给出`O(N*logN)`整体，或者像 C++11 的[std::unordered_set](http://en.cppreference.com/w/cpp/container/unordered_set)这样的散列容器，其中具有接近恒定的时间查找，给〜O（N）的整体复杂性。

```
#include <unordered_set>

std::unordered_set<std::string> name_set;
....

// still need to search, since you want to keep 
// the first instance of each name, and not the last.
// But unordered_set performs the look-up at insertion,
// only inserting if someName not already in the set
name_set.insert(someName); 
```

然后，按照@Chad 的例子，

```
std::vector<std::string> name(names_set.begin(), name_set.end()); 
```

如果您没有 C++11，则哈希映射替代方案是`boost::hash_map`和`tr1::hash_map`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T23:12:51.517

您要求提供示例代码，所以我会这样做：

```
std::set<std::string> unique_names;

// ...
while (it1 !=end1)
{
    // ...
    // **name.push_back(it2->first);**
    unique_names.insert(it2->first);
}

std::vector<std::string> name(unique_names.begin(), unique_names.end()); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T21:24:51.160

如果您不关心要将哪个实例输入数据结构，[std::set](http://www.sgi.com/tech/stl/set.html)将满足您的目的

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-29T21:32:16.140

也许您应该使用另一个地图而不是矢量来拥有唯一的名称。

std::map < std::string, double > 名称；

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-30T06:50:00.933

list 具有 .sort() 和 .unique() 的能力，这将为您提供 .

您可以使用迭代器对其进行迭代并使用 initializer_list 对其进行初始化。

对我来说，这些数据实际上更像是一个结构：

```
#include <iterator>
#include <list>
#include <string>
#include <fstream>

typedef struct NODE_S {
    string name1, name2;
    int n;
} NODE_S NODE;

bool compare_NODE (NODE first, NODE second)
{
    unsigned int i=0;
    if (first.name1 < second.name1) {
        return true;
    } else if (first.name2 < second.name2) {
        return true;
    } else if (first.n < second.n) {
        return true;
    } else { return false;}
}

bool readfile(list<NODE>& ln, string filepath) {
    std::ifstream filein;
    NODE n;
    filein.open(filepath.c_str(), std::iofstream::in);
    if (!filein.good()) {
        filein.close();
        std::cerr << "ERROR: unable to open file \"" << filepath << "\" or file is zero-length." << std::endl;
        return false;
    }
    do {
        filein >> n.name1 >> n.name2 >> n.name3 >> std::skipws;
        ln.push_back(n);
        ln.sort(compare_NODE);
        ln.unique();
        //add node to list

    } while (!filein.good()); //can use .eof here, but if bad disk blocks...
    filein.close();
    return true;
}

int main(int argc, char * argv[], char * envp[]) {
    string filepath="somefile.txt";
    if (!readfile(filepath)) {
        return 1;
    }
    list<NODE>::iterator lni;
    for (lni = ln.begin(); lni != ln.end(); lni++) {
        std::cout<<lni->name1<<' '<<lni->name2<<' '<<lni->n<<std::endl;
    }
    return 0;
} 
```

[http://www.cplusplus.com/reference/stl/list/sort/](http://www.cplusplus.com/reference/stl/list/sort/)

[http://www.cplusplus.com/reference/stl/list/unique/](http://www.cplusplus.com/reference/stl/list/unique/)

# php - 如何在 Mysql 和 PHP 中创建“上升”或“热门”查询？

> ID：10376067
> 
> 赞同：4
> 
> 时间：2012-04-29T21:18:50.293
> 
> 标签：php, mysql

我正在尝试创建一个过滤器来显示某些被认为是“趋势”的记录。因此，我们的想法是选择投票率高的记录，但不要按投票最多到最少投票的降序排列。这样用户就可以浏览并有机会查看所有链接，而不仅仅是顶部的链接。你建议什么是最好的方法？我不知道如何创建随机分类的趋势链接，但是当用户从一个页面到另一个页面时，它们不会重复。有什么建议么？如果有任何不清楚的地方请告诉我，谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:35:28.417

此响应假定您在每个投票的每行基础上跟踪子表中的投票，而不是仅对特定项目的计数器 +1。

确定您关心热门话题的时间范围。也许1小时会好？

然后运行查询以确定在过去一小时内哪个项目的投票数最高。按此计数排序，您将获得不断更新的最受好评的项目列表。

```
SELECT items.name, item_votes.item_count FROM items
INNER JOIN
(
    SELECT item_id, COUNT(item_id) AS item_count
    FROM item_votes
    WHERE date >= dateAdd(hh, -1, getDate()) AND 
          ## only count upvotes, not downvotes
          item_vote > 0
    group by item_id
) AS item_votes ON item_votes.item_id = items.item_id

ORDER BY item_votes.item_count DESC 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T05:18:44.743

您提到您不想在多个页面上重复项目，这意味着您无法*根据请求*获得随机排序。相反，您需要检索项目、订购它们并将它们保存在服务器范围或特定于会话的缓存中。

服务器范围的缓存需要每隔一段时间更新一次，您需要定义一个时间间隔。发生此更新时切换页面的用户将看到他们的项目被打乱。

只要用户浏览您的网站，特定于会话的缓存就会保留这些项目，这意味着如果您的用户从未离开，这些项目就会过时。再一次，您需要确定强制更新的时间间隔。

我在想你需要一个版本列表。你可以做服务器范围的缓存解决方案，并给它一个版本（日期，整数，任何东西）。您在浏览最新趋势时需要传递此版本，用户将继续查看相同的列表。单击趋势菜单链接会将它们发送到没有版本信息的浏览页面，这应该会从缓存中获取最新信息。只要用户正在浏览这些页面，您就可以保留它。

我无法进入sql语句，不是因为它们很难，而是我们不知道您的数据库结构。您是否在单独的表格中跟踪个人投票？它们只是聚合成一列吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T21:27:48.640

也许创建一个新列来记录它有多少视图？然后每次有人查看它时更新它，并按查看次数最多的线程排序。

# iphone - 四舍五入到“美丽”的价值

> ID：10376071
> 
> 赞同：0
> 
> 时间：2012-04-29T21:19:26.390
> 
> 标签：iphone, ios, xcode, floating-point, int

伙计们，我正在制作简单的绘图抽屉，并想为水平线找到漂亮的值。例如，如果我的值等于 72089.601562，那么 beautiful 是 70000 或 75000。所以，我认为 beautifulNumber%5 = 0。你有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:27:47.520

这个怎么样？

```
#import <math.h>
#import <stdio.h>

#define ROUNDING 5000

int beautify(float input)
{
    // Cast to int, losing the decimal value.
    int value = (int)input;

    value = (value / ROUNDING) * ROUNDING;

    if ((int)input % ROUNDING > ROUNDING / 2 )
    {
        value += ROUNDING;
    }

    return value;
}

int main()
{
    printf("%d\n", beautify(70000.601562)); // 70000
    printf("%d\n", beautify(72089.601562)); // 70000
    printf("%d\n", beautify(76089.601562)); // 75000
    printf("%d\n", beautify(79089.601562)); // 80000
    printf("%d\n", beautify(70000.601562)); // 70000

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:25:12.127

这取决于您是想要一个底值、一个上限还是只是四舍五入到最接近的 5000。

对于底值：

`int beautiful = (int)(floor(ugly / 5000.0) * 5000.0);`

对于上限值：

`int beautiful = (int)(ceil(ugly / 5000.0) * 5000.0);`

对于舍入：

`int beautiful = (int)(round(ugly / 5000.0) * 5000.0);`

为了制作图表线，我可能会找到您必须绘制的最小值和最大值，从最小值的底值开始，然后添加所需的间隔，直到超过最大值。

例如：

```
float minValue = 2.34;
float maxValue = 7.72;
int interval = 1;
NSMutableArray *horizLines = [NSMutableArray array];
int line = (int)(floor(minValue / interval) * interval);
[horizLines addObject:[NSNumber numberWithInt:line]];
do {
    line = (int)(ceil(minValue / interval) * interval);
    [horizLines addObject:[NSNumber numberWithInt:line]];
    if (minValue >= maxValue) break;
    minValue = minValue + interval;
} 
```

根据需要使用！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T21:29:14.193

好吧，您似乎希望它根据数字的大小进行缩放。如果范围仅达到 10，那么显然舍入到最接近的 5,000 是没有意义的。可能有一种非常优雅的方式来使用位移对其进行编码，但这样的事情就可以解决问题：

```
float value = 72089.601562
int beautiful = 0;

// EDIT to support returning a float for small numbers:
if (value < 0.2) beautiful = int(value*100)/100.;
else if (value < 2.) beautiful = int(value*10)/10.;

// Anything bigger is easy:
else if (value < 20) beautiful = (int)value;
else if (value < 200) beautiful = (int)value/10;
else if (value < 2000) beautiful = (int)value/100;
else if (value < 20000) beautiful = (int)value/1000;
// etc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T21:52:57.613

听起来你想要做的是四舍五入到 1 位或 2 位有效数字。四舍五入到 n 个有效数字非常简单：

```
double roundToNDigits(double x, int n) {
    double basis = pow(10.0, floor(log10(x)) - (n-1));
    return basis * round(x / basis);
} 
```

这会给你`roundToNDigits(74518.7, 1) == 70000.0`和`roundToNDigits(7628.54, 1) == 8000.00`

如果您想四舍五入到 1 位或 2 位数字（只有 2 位，第二位数字是 5），您需要类似：

```
double roundSpecial(double x) {
    double basis = pow(10.0, floor(log10(x))) / 2.0;
    return basis * round(x / basis);
} 
```

# java - GWT：您将无法访问生产环境中工作目录中的文件

> ID：10376073
> 
> 赞同：1
> 
> 时间：2012-04-29T21:19:56.827
> 
> 标签：java, gwt

```
Your working directory, (C:\dev\projects\org\tatis\web\workspace\eclipse\lotto-shop) is not equal to your web application root
(C:\dev\projects\org\tatis\web\workspace\eclipse\lotto-shop\target\lottoShop-0.0.1-SNAPSHOT)
You will not be able to access files from your working directory on the production server. 
```

当我使用 mvn gwt:run 启动 gwt 应用程序时，我看到了上述警告，我认为这可能导致我遇到一些安全异常，并且 log4j 也无法访问我的日志文件。

我得到的最接近的是[is-it-possible-to-access-files-beyond-web-inf-folder-in-dev-mode-of-gae-java-se](https://stackoverflow.com/questions/8950163/is-it-possible-to-access-files-beyond-web-inf-folder-in-dev-mode-of-gae-java-se)

请问有什么建议吗？

# ruby-on-rails - Rabl 返回字符串 Rails

> ID：10376077
> 
> 赞同：0
> 
> 时间：2012-04-29T21:20:56.843
> 
> 标签：ruby-on-rails, ruby, rabl

在我的控制器中，我有

```
app_key = Application.find_by_name(params[:id].capitalize).app_key
@response = app_key == params[:app_key] ? "200" : "403" 
```

我想回复：

"response" => @response ，如何在 Rails 中使用 Rabl？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:25:53.673

在您的控制器操作中使用`render :file => 'your_view', :status => @response`（如果有，请在 respond_to 块中使用）。我认为状态应该是一个数字，而不是字符串。

# php - 安全地更改大型数据库中的字段（表结构）

> ID：10376085
> 
> 赞同：2
> 
> 时间：2012-04-29T21:22:23.847
> 
> 标签：php, mysql, phpmyadmin

我刚刚注意到我`smallInt`在一个领域，那应该只是`int`。仅仅改变它就安全吗？该表中的所有数据会发生什么变化？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:26:49.617

是的，将较小的值更改为较大的值是安全的，无需担心任何数据截断或其他问题。

如果反过来，您将不得不担心任何数据值的最大值，同时转移到较小的数据类型。

# oracle - 跨不同用户引用外键

> ID：10376087
> 
> 赞同：2
> 
> 时间：2012-04-29T21:22:34.653
> 
> 标签：oracle, reference, foreign-keys

我正在引用属于另一个用户的密钥：

例子：

```
create table emp 
     ( name char(10)
     , empid char(10)
     , dob date
     , phone char(14)
     , primary key(empid)
     , foreign key phone 
          references (user2.contacts)
       ); 
```

where`user2`包含一个以 phone 作为主键的表。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T23:44:44.913

USER2 需要授予您的用户对其表的 REFERENCES 权限。

```
grant references on contacts to user1
/ 
```

请注意，与其他权限不同，REFERENCES 必须始终直接授予。如果权限是通过角色授予的，则 USER1 将无法创建外键。

外键的语法要求我们在引用中包含主键（或至少一个唯一键）列：

```
create table emp       
( name char(10)      
      , empid char(10)     
      , dob date
      , phone char(14)
      , constraint emp_pk primary key(empid)
      , constraint emp_contact foreign key (phone)
            references (user2.contacts.phone)        ); 
```

明确命名我们的约束是一种很好的做法，因为系统生成的名称很难使用。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-05-01T05:00:55.163

它应该是这样的：

```
create table emp 
     ( name char(10)
     , empid char(10)
     , dob date
     , phone char(14)
     , primary key(empid)
     , foreign key phone 
          references user2.contacts)
       ); 
```

# list - Sencha 将动态点击监听器添加到记录列表

> ID：10376088
> 
> 赞同：0
> 
> 时间：2012-04-29T21:22:38.030
> 
> 标签：list, cordova, sencha-touch, extjs, sencha-touch-2

我有一个 Ext.data.Store 和一个带有列表的 Ext.Panel。我使用以下命令动态添加记录：

```
myStore.add({txt: r}); 
```

我想添加一个侦听器，当我单击列表记录时，它会在消息框中显示记录数据。

我该怎么做？

扩展数据存储

```
 var myStore = Ext.create('Ext.data.Store', {
        storeId: 'MyStore',
        fields: ['txt']
    }); // create() 
```

扩展面板

```
listpanel = new Ext.Panel({
                            layout: 'fit',   // important to make layout as 'fit'
                            items: [
                                {
                                    xtype: 'titlebar',
                                    id: 'myTitle',
                                    docked: 'top',
                                    title: 'Before Change title'

                                },
                                {
                                  //Definition of the list
                                  xtype: 'list',
                                  itemTpl: '{txt}',
                                  store: myStore,
                                }]
                          }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T03:16:01.717

您需要使用组件`itemtap`的事件`Ext.List`。

例如

```
 ....
   ....
   xtype: 'list',
   itemTpl: '{txt}',
   store: myStore,
   listeners : {
         itemtap : function(item, num, record, ev) {
                var myTxt = item.getStore().getAt(num).get('txt');
                Ext.Msg.alert('Message','Tapped record : '+myTxt);
         }
   }
   ....
   .... 
```

# iphone - 尝试将对象添加到 NSSet 时，iPhone 计算器应用程序崩溃

> ID：10376089
> 
> 赞同：0
> 
> 时间：2012-04-29T21:22:42.627
> 
> 标签：iphone, objective-c, xcode, debugging, cs193p

我正在完成 2010 年秋季版的斯坦福课程 CS193P，iPhone 编程。在作业 2 中，我正在改进在作业 1 中创建的计算器应用程序。似乎我快完成了，但是当我尝试按下位于界面上的变量时应用程序崩溃（出于这些目的，“x”）。

使用我有限的调试技能，我设法找到了问题所在。问题出在方法“(NSSet)variablesInExpression:(id)anExpression”中。

```
+ (NSSet *)variablesInExpression:(id)anExpression
{
NSMutableSet *setOfVariables = [[NSSet alloc] init];
for (NSString *str in anExpression) {
    if ([str hasPrefix:VARIABLE_PREFIX]) {
        [setOfVariables addObject:str];
    }
}
[setOfVariables autorelease];
return setOfVariables;
} 
```

当我到达线路时

```
[setOfVariables addObject:str]; 
```

应用程序崩溃。我已经尝试了几个小时，请帮忙！XCode 中有没有办法查看“anExpression”中的整个值列表？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:24:48.847

尽管您将变量声明为可变集，但您创建了不可变 NSSet 类的实例 - 您必须创建 NSMutableSet 实例：

```
NSMutableSet *setOfVariables = [[NSMutableSet alloc] init]; 
```

# ios - iPhone外观交换？

> ID：10376090
> 
> 赞同：0
> 
> 时间：2012-04-29T21:22:43.713
> 
> 标签：ios, user-interface, appearance

在我的应用程序中，我希望有一个可用选项，以便用户可以更改应用程序的外观。这只是视觉风格——导航栏、单元格、字体和按钮图像。

用户点击一个按钮，然后应用程序加载适当的图像或其他内容。

有什么方法可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:58:10.227

在 iOS 5 和更高版本中，您可以使用 UIAppearance 类方法`appearance`，它返回接收者的外观代理，并将其设置在那里。例如，如果你想让所有 UIView 背景颜色变成绿色，你可以简单地说：

```
[[UIView appearance] setBackgroundColor:[UIColor greenColor]]; 
```

当然，这仅对单用户会话有益。应用程序退出后，您将恢复为白色或您设置为默认的任何背景颜色。

建议这个 SO 问题的评论：[Best way to apply a theme to an iPhone app](https://stackoverflow.com/questions/2730926/best-way-to-apply-a-theme-to-an-iphone-app)提供了更深入的答案，并且可能更符合您正在寻找的内容。

# c# - 如何在一对多关系 EF 4.3.1 中的导航集合中删除后正确清理

> ID：10376096
> 
> 赞同：3
> 
> 时间：2012-04-29T21:24:17.293
> 
> 标签：c#, .net, entity-framework, entity-framework-4.3

在典型的一对多关系中，当我删除时：

```
var orderEntity = context.Orders.Single(o => o.orderID == entityID);
var baddetail = orderEntity.OrderDetails
                           .Single(od => od.orderDetailID == badOrderDetailID);
orderEntity.OrderDetails.Remove(baddetail); 
```

我得到错误：

```
The operation failed: The relationship could not be changed because one 
or more of the foreign-key properties is non-nullable. When a change is made 
to a relationship, the related foreign-key property is set to a null value. 
If the foreign-key does not support null values, a new relationship must 
be defined, the foreign-key property must be assigned another non-null value, 
or the unrelated object must be deleted. 
```

作为一种解决方案，提出了扩展 DBContext.SaveChanges()

```
public override int SaveChanges()
    {

        foreach (OrderDetails od in this.OrderDetails.ToList())
        {
            // Remove OrderDetails without Order.
            if (od.Order == null)
            {
                this.OrderDetail.Remove(od);
            }
        }

        return base.SaveChanges();
    } 
```

但是正在检查带有空订单的 OrderDetails，当 orderID 不可为空时似乎很奇怪。这样做的正确方法是什么？

**编辑：** 例如，当您通过绑定`Order.OrderDetails`到和 DataGrid 公开时，会发生这种奇怪的删除。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:38:53.863

你可以这样做：

```
var orderEntity = context.Orders.Single(o => o.orderID == entityID);
var baddetail = orderEntity.OrderDetails.Single(od => od.orderDetailID == badOrderDetailID);
context.OrderDetails.Remove(baddetail);

```

因为在您的示例中，您没有删除实体。您正在删除关系。因此，它尝试将 null 设置为您的 FK 列，并且它不可为空，您将获得异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:46:19.487

您正在从 OrderDetails 的 Order 对象集合中删除 OrderDetail。这只是将 OrderDetail 的 ID 有效地设置为 null，而不是将其标记为删除。这是不允许的，因为从 OrderDetail 到数据库中 Order 表的 FK 不可为空。

你应该做

```
var orderEntity = context.Orders.Single(o => o.orderID == entityID);
var baddetail = orderEntity.OrderDetails
                       .Single(od => od.orderDetailID == badOrderDetailID);

context.OrderDetails.Remove(baddetail); 
```

# java - 以两位小数格式化输出，并以五个空格分隔小数

> ID：10376101
> 
> 赞同：0
> 
> 时间：2012-04-29T21:24:52.847
> 
> 标签：java, printf

我要打印的语句的代码如下：

```
System.out.printf("%-5s.2f %5s %14s %5s\n", months[x], avg[x]((avg[x]-variation)*100.0)/100.0, "Above"); 
```

我的输出是：

```
Months Average Variations
Jan .2f 13.3 1.7299999999999986 Below 
```

我需要将“变量”下的数字格式化为两位小数，而不是获得不必要的小数，但我还需要将其隔开，以便正确格式化。我不需要上传其余的代码，这是让我的程序无法工作的唯一原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:56:10.213

不确定我是否正确理解了这个问题，但也许这段代码可以满足您的要求？

```
System.out.println("Months Average Variations");
System.out.printf("%-5s.2f %5s %12.2f %5s\n", "Jan", 13.3, 1.7299999999999986, "Below"); 
```

输出：

```
Months Average Variations
Jan  .2f  13.3         1.73 Below 
```

而且，在询问 StackOverflow 之前先上网研究一下总是很有用的，例如，您可以阅读有关格式化数字的[本教程](http://docs.oracle.com/javase/tutorial/java/data/numberformat.html)（以及[Formatter](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Formatter.html)类的 JavaDoc）。

# html - 通过屏幕调整大小的内容显示粘滞页脚

> ID：10376105
> 
> 赞同：0
> 
> 时间：2012-04-29T21:25:32.567
> 
> 标签：html, css

请参考我的网站[http://www.vault-x.com](http://www.vault-x.com)

我应用了本教程中的“粘性页脚”技术 (http://ryanfait.com/sticky-footer/)

但是，当浏览器窗口垂直调整大小时，它不起作用。我无法弄清楚为什么会这样。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:32:32.303

你的列是浮动的，这意味着它没有给内容元素提供高度。在你的元素之后添加一个`<div>`with ，它将解决问题。`clear: both``#r_column`

# android - 在 onLoadFinished CursorLoader 回调中获取 Bundle 参数

> ID：10376106
> 
> 赞同：10
> 
> 时间：2012-04-29T21:25:36.183
> 
> 标签：android

当我启动游标加载器时

```
 Bundle bundle = new Bundle();
 bundle.putInt("arg", 123);
 getLoaderManager().restartLoader(0, bundle, this); 
```

我想把包裹放进去

```
 public void onLoadFinished(Loader<Cursor> loader, Cursor data) 
```

但这似乎只能从 onCreateLoader(...)

我能想到的唯一解决方法是继承 CursorLoader 并添加一些字段以在加载到 onLoadFinished(...)

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-30T18:55:53.350

我不会只在实现 LoaderCallbacks 的类中使用私有成员字段，因为您永远不知道究竟哪个加载器正在完成。最好按照提问者的建议进行操作，并将数据与加载程序一起存储。这是我的做法：

```
public static class CursorWithData<D> extends CursorWrapper {
  private final D mData;

  public CursorWithData(Cursor cursor, D data) {
    super(cursor);
    mData = data;
  }

  public D getData() {
    return mData;
  }
}

@Override
public Loader<Cursor> onCreateLoader(int id, final Bundle bundle) {
  // ...

  return new CursorLoader(getActivity(), uri, projection, selection, args, order) {
    @Override
    public Cursor loadInBackground() {
      return new CursorWithData<Bundle>(super.loadInBackground(), bundle);
    }
  };
}

@Override
public void onLoadFinished(Loader<Cursor> cursorLoader, Cursor cursor) {
  CursorWithData<Bundle> cursorWithData = (CursorWithData<Bundle>) cursor;
  Bundle args = cursorWithData.getData();
  cursor = cursorWithData.getWrappedCursor(); // Optional if you are worried about performance

  // ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-01T22:45:54.153

由于您使用“this”作为 onLoadFinished 的第三个参数，我假设该类正在实现 LoaderManager.LoaderCallbacks 接口。所以不需要参数，可以使用私有成员字段。

# xml - 映射 api3 加载 xml 标记延迟

> ID：10376111
> 
> 赞同：0
> 
> 时间：2012-04-29T21:26:05.347
> 
> 标签：xml, google-maps-api-3, settimeout

我已经从谷歌地图 api制作了一个[教程](https://developers.google.com/maps/articles/phpsqlajax_v3?hl=de-DE)，以将生成的 xml 文件从数据库和 php 中加载到地图中。现在我正在尝试使用 setTimeout 左右添加一个延迟，以像这个[示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-animations-iteration?hl=el-GR)一样一个接一个地放置一个标记。我非常初学者，如果有人能告诉我如何做到这一点，我会非常高兴！

```
downloadUrl("php/addLocations.php", function (data) {
    var xml = parseXml(data);
    var markers = xml.documentElement.getElementsByTagName("marker");
    for (var i = 0; i < markers.length; i++) {
        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var type = markers[i].getAttribute("type");
        var profile_image = markers[i].getAttribute("myimage");
        var point = new google.maps.LatLng(
        parseFloat(markers[i].getAttribute("lat")), parseFloat(markers[i].getAttribute("lng")));
        var html = "<b>" + name + "</b> <br/>" + address + "<br/>" + "<img src='uploads/" + profile_image + "' width='100px' />";
        var icon = customIcons[type] || {};
        var marker2 = new google.maps.Marker({
            map: bigmap,
            position: point,
            icon: icon.icon,
            animation: google.maps.Animation.DROP,
            shadow: icon.shadow
        });
        bindInfoWindow(marker2, bigmap, infoWindowLoc, html);
    }
});

var infoWindowLoc = new google.maps.InfoWindow;

function bindInfoWindow(marker2, bigmap, infoWindowLoc, html) {
    google.maps.event.addListener(marker2, 'click', function () {
        //openMarkerBox(); 
        // panning map
        bigmap.panTo(marker2.position);
        infoWindowLoc.setContent(html);
        infoWindowLoc.open(bigmap, marker2);
    });
}

function downloadUrl(url, callback) {
    var request = window.ActiveXObject ? new ActiveXObject('Microsoft.XMLHTTP') : new XMLHttpRequest;

    request.onreadystatechange = function () {
        if (request.readyState == 4) {
            request.onreadystatechange = doNothing;
            callback(request.responseText, request.status);
        }
    };

    request.open('GET', url, true);
    request.send(null);
}

function parseXml(str) {
    if (window.ActiveXObject) {
        var doc = new ActiveXObject('Microsoft.XMLDOM');
        doc.loadXML(str);
        return doc;
    } else if (window.DOMParser) {
        return (new DOMParser).parseFromString(str, 'text/xml');
    }
}

function doNothing() {
    alert("shit")
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T00:58:37.733

好吧，如果您检查[示例](https://google-developers.appspot.com/maps/documentation/javascript/examples/marker-animations-iteration?hl=el-GR)中的代码，您需要的一切都在那里。看一眼：

1 -`onclick`附加到*Drop Markers*按钮的处理程序：

```
`<button id="drop" onclick="drop()">Drop Markers</button>` 
```

提供在线文档`onclick`：[在此链接](http://www.w3schools.com/jsref/event_onclick.asp)。

2 -`drop()`你的例子中的功能：

```
function drop() {
    for (var i = 0; i < neighborhoods.length; i++) {
        setTimeout(function() {
            addMarker();
        }, i * 200);
    }
} 
```

`setTimeout`该函数的在线文档可用：[在此链接](http://www.w3schools.com/js/js_timing.asp)。

3 -`addMarker()`你的例子中的功能：

```
function addMarker() {
    markers.push(new google.maps.Marker({
        position:  neighborhoods[iterator],
        map:       map,
        draggable: false,
        animation: google.maps.Animation.DROP
    }));
    iterator++;
} 
```

`google.maps.marker`提供动画在线文档：[在此链接](https://developers.google.com/maps/documentation/javascript/overlays#MarkerAnimations)。

浏览代码，深入挖掘，你应该能够弄清楚这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T15:19:35.150

好的，这是一个似乎可行的解决方案。谢谢你 Sean 4 你的时间和小费。

```
var iterator = 0;
var marker2;
var customIcons = {art: {icon: 'img/art_marker.png',},graff: {icon: 'img/graff_marker.png',}};

downloadUrl("php/addLocations.php", function (data) {
    var xml = parseXml(data);
    var markers = xml.documentElement.getElementsByTagName("marker");

    for (var i = 0; i < markers.length; i++) {

    myFunction();
    function myFunction() { 
        var name = markers[i].getAttribute("name");
        var address = markers[i].getAttribute("address");
        var type = markers[i].getAttribute("type");
        var profile_image = markers[i].getAttribute("myimage");
        var point = new google.maps.LatLng(
        parseFloat(markers[i].getAttribute("lat")), parseFloat(markers[i].getAttribute("lng")));

        setTimeout(function() { 
            addMarker(name, address, type, profile_image, point);
}, i * 2200);

    }

}
});

function addMarker (name, address, type, profile_image, point) {

        var icon = customIcons[type] || {};
        var html = "<b>" + name + "</b> <br/>" + address + "<br/>" + "<img src='uploads/" + profile_image + "' width='100px' />";
        var marker2 = new google.maps.Marker({
            map: bigmap,
            position: point,
            icon: icon.icon,
            animation: google.maps.Animation.DROP,
            shadow: icon.shadow
        });
        bindInfoWindow(marker2, bigmap, infoWindowLoc, html);
        iterator++;
} 
```

# facebook - 来自 API 的 Facebook 事件图片

> ID：10376112
> 
> 赞同：3
> 
> 时间：2012-04-29T21:26:10.117
> 
> 标签：facebook, facebook-graph-api

我似乎在 Facebook API 上发现了一个错误。

这与与事件相关的图片有关。

通过图表检索配置文件和事件的图片时，您应该使用以下链接：

```
http://graph.facebook.com/{eventid}/picture 
```

对于已经发生的事件（即过去），这可以按预期工作，但是当您尝试检索即将发生的事件的图片时，例如：

[https://graph.facebook.com/323879667682222/picture](https://graph.facebook.com/323879667682222/picture)

无法找到实际图像，并显示默认的灰色图标。

（ps. 上面的链接与预定于 5 月 3 日发生的事件有关）

您能否确认这是一个错误，以及是否有任何其他方法可以从图表中检索事件图像。

谢谢，

韦兹

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T07:49:29.333

您可以使用如下 FQL 查询检索事件配置文件图像：

```
SELECT pic, pic_square, pic_small, pic_big FROM event WHERE eid=EVENT_ID 
```

此调用以 4 种尺寸返回事件配置文件图像的 url：

*   pic - 最大宽度为 100 像素，最大高度为 300 像素。
*   pic_square - 50px 的宽度和高度。
*   pic_small - 最大宽度为 50 像素，最大高度为 150 像素。
*   pic_big - 最大宽度为 200 像素，最大高度为 600 像素。

您可以在 Facebook 开发人员页面中阅读有关事件表字段的更多信息：[FQL 事件表。](https://developers.facebook.com/docs/reference/fql/event/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-21T23:56:58.123

这确实是一个错误，遇到了同样的问题。我现在正在做一个 FQL 查询：

```
 $url = 'http://api.facebook.com/method/fql.query?query=select name, pic_small, pic_big, pic, host, description, start_time, end_time, location, venue from event where eid="'.$post.'"';

        if($sxe = new SimpleXMLElement($url, NULL, TRUE)){
            $urlimg = $sxe->event->pic_big;
} 
```

或使用 facebook php api：

# php - 如何避免通过 URL 操作导航文件夹

> ID：10376113
> 
> 赞同：0
> 
> 时间：2012-04-29T21:26:10.350
> 
> 标签：php, url, directory, root

请我需要您对我的网站的帮助（测试阶段）。我有一个这种性质的文件系统......

```
 www (root)  
  {

           school { //main project folder

                  images //images folder

                  uploads //user uploads folder 

                  JavaScripts //JS folder

                  CSS // css folder

                 includes //includes folder

             index.php

            contactus.php

            aboutus.php

            register.php

           } //main project folder
  } //www folder 
```

当用户执行以下操作时，如何防止用户浏览我的文件夹系统：

```
 http://127.0.0.1/school/css
 http://127.0.0.1/school/images
 http://127.0.0.1/school/includes
 http://127.0.0.1/school/uploads
 http://127.0.0.1/school/javascripts 
```

感谢您的帮助....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:45:31.513

您还可以在每个文件夹中放置一个名为 index.php 或 index.html 的空 php 或 html 文件。用户将无法浏览这些目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:40:33.543

**[请参阅以下有关如何禁用直接目录浏览的文章](http://www.techiecorner.com/106/how-to-disable-directory-browsing-using-htaccess-apache-web-server/)**

具体来说，`Options Indexes`在您的 .htaccess 文件中搜索。如果不存在，将以下行添加到您的 .htaccess 中：

```
Options -Indexes 
```

目录浏览应该不可用。

更多方法可以在上面的文章中找到。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-20T07:56:36.770

为您不想通过 url 输入导航的目录创建一个 .htaccess 文件。

并在文件中，放入以下行：

```
Deny from all 
```

就是这样。。享受。。

出于安全目的，请改用以下行：

```
Options -Indexes 
```

# adsense - Google 自定义搜索引擎如何使用 JSON/atom API 展示广告

> ID：10376120
> 
> 赞同：6
> 
> 时间：2012-04-29T21:26:49.677
> 
> 标签：adsense, google-custom-search

我正在使用 Goolge 自定义搜索 API (JSON/atom) 创建一个搜索引擎。我已将我的搜索引擎与一个 adsense 帐户相关联，但是当我进行查询时，我没有在搜索结果中看到任何广告，我还检查了 Google 自定义搜索文档，它在 API 调用的响应中没有提及任何关于广告的内容，它只讲述搜索结果和促销活动。

我想知道是否可以使用 JSON/atom API 获取搜索广告。

提前致谢， 卡姆兰

# c - 使用 setitimer 暂停计时器？

> ID：10376125
> 
> 赞同：3
> 
> 时间：2012-04-29T21:27:43.670
> 
> 标签：c, timer, setitimer

在 C 中，有没有办法使用 setitimer 启动计时器，然后暂停它，然后用暂停时剩余的时间恢复计时器？我最初的想法是通过使用 getitimer 来节省剩余的时间，停止计时器，然后将计时器设置回 getitimer 中保存的值，但这似乎不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:40:04.487

您不能暂停计时器。保存剩余时间，停止计时器然后启动新计时器是执行此操作*的*方法。该方法确实有效，所以我猜您的代码中有错误。

# python - 使用 Python 创建自定义语言

> ID：10376129
> 
> 赞同：1
> 
> 时间：2012-04-29T21:27:51.837
> 
> 标签：python, sage

我最近开始使用 Sage，我开始怀疑标准 Python`int`包装在一个名为`Integer`Sage 的自定义类中。如果我`type(1)`在 Python 中输入，`<type 'int'>`我会得到`<type 'sage.rings.integer.Integer'>`.

如果我想用我自己的自定义类替换 Python `int`（或`list`或`dict`），该怎么做？会有多难（例如，我可以完全用 Python 完成）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:43:48.907

您可以继承 Python 的所有内置类型。例如：

```
class MyInt(int):
    pass

i = MyInt(2)
#i is now an instance of MyInt, but still will behave entirely like an integer. 
```

但是，您需要明确地说每个整数都是 MyInt 的成员。所以`type(1)`仍然会`int`，你需要做`type(MyInt(1))`。

希望这接近您正在寻找的内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T10:58:21.953

作为其他答案的补充：运行任何代码时，Sage 都有一个预处理步骤，将 Sage-Python 转换为真正的 Python（然后执行）。这是由`preparse`函数完成的，例如

```
sage: preparse('a = 1')
'a = Integer(1)'
sage: preparse('2^40')
'Integer(2)**Integer(40)'
sage: preparse('F.<x> = PolynomialRing(ZZ)')
"F = PolynomialRing(ZZ, names=('x',)); (x,) = F._first_ngens(1)" 
```

这一步正是允许透明使用`Integer`s（代替`int`s）和其他非标准语法（如上面的多项式环示例`[a..b]`等）的原因。

据我了解，这是完全透明地使用 Python 中内置类型替换的唯一方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T21:58:38.073

在 Sage 的情况下，这很容易。Sage 可以完全控制自己的 REPL（读取-评估-打印循环），因此它可以解析您提供给它的命令，并将您的表达式部分转换为它想要的任何类。然而，让标准 Python 自动将整数类型用于整数文字并不容易。简单地将内置函数重新分配`int()`给其他类型是行不通的。您可能可以使用导入过滤器来执行此操作，该过滤器会扫描导入的每个文件以查找（例如）整数文字并将它们替换为`MyInt(42)`或其他内容。

# c++ - 2 个小错误，我在 C++ 中无法理解！

> ID：10376130
> 
> 赞同：-1
> 
> 时间：2012-04-29T21:27:52.710
> 
> 标签：c++, compiler-errors, linear-algebra, calculator

我有一些琐碎的错误，我只是无法让我的新菜鸟像大脑一样圆润！我在做什么错我得到错误：

> C:\Users\George\Desktop\linear_equation_calc\main.cpp||在函数'int main(int, const char**)':|
> 
> C:\Users\George\Desktop\linear_equation_calc\main.cpp|101|错误： 'calcparallelplugin' 未在此范围内声明|
> 
> C:\Users\George\Desktop\linear_equation_calc\main.cpp|104|error: 'else' without a previous 'if'| ||=== 构建完成：2 个错误，0 个警告 ===|

```
#include <iostream>
#include <string.h>

using namespace std;

// Function includes
// I try to keep them in the order they appear in the
// output below for organization purposes
#include "calc.m.xy12plugin.cpp"
#include "calc.b.xymplugin.cpp"
#include "calc.m.xybplugin.cpp"
#include "calc.point.xymplugin.cpp"
#include "calc.parallelplugin.cpp"

// The above one would be here, too

int main(int argc, const char* argv[]) {
int i;
i = 0;
cout << "Linear Equation Calculator" << endl << "Copyright (c) 2011 Patrick Devaney" << endl
<< "Licensed under the Apache License Version 2" << endl;
// This loop makes the code a bit messy,
// but it's worth it so the program doesn't
// crash if one enters random crap such as
// "zrgxvd" or "54336564358"
while(i < 1) {
cout << "Type:" << endl
<< "0 to calculate a slope (the M value) based on two points on a line" << endl
<< "1 to calculate the Y-intercept (the B value) based on two points and a slope" << endl
<< "2 to calculate the slope (the M value) based on the Y-intercept and X and Y" << endl <<
"plug-ins" << endl
<< "3 to find the next point up or down a line based on the slope (M) and X and Y"
<< endl << "plug-ins" << endl
<< "4 to find a point x positions down the line based on the slope (M) and X and Y"
<< endl << "plug-ins" << endl
<< "5 to find the equation of a parallel line in form y=mx+c"
<< endl << "plug-ins" << endl;

string selection;
cin >> selection;
if(selection == "0") {
mcalcxyplugin();
i++;
}
else if(selection == "1") {
calcbxymplugin();
i++;
}
else if(selection == "2") {
calcmxybplugin();
i++;
}
else if(selection == "3") {
calcpointxymplugin(1);
i++;
}
else if(selection == "4") {
int a;
cout << "How many points up/down the line do you want? (Positive number for points" << endl
<< "further up, negative for previous points" << endl;
cin >> a;
calcpointxymplugin(a);
i++;
}
else if(selection == "5");{

calcparallelplugin();
i++;
}
else {
i = 1;
}
// End of that loop below
}
return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:30:02.093

嗯，第一个意味着在`main`你调用`calcparallelplugin()`中，这是编译器第一次听说这个函数。也许它在您的包含文件中拼写不同？

由于这个杂散的分号而发生第二个错误：

```
else if(selection == "5");{
                         ^
                         | 
```

它作为最后一个“if”的主体，因此终止了语句链；因此，几行之后的最后一个“else”与之前的任何“if”无关。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:30:15.840

尾随分号导致`else`错误：

```
else if(selection == "5");{ 
```

尾随分号表示代码等效于：

```
else if(selection == "5") { }

{
    calcparallelplugin();
    i++;
}
else {
    i = 1;
} 
```

所以`else`没有previous `if`: 去掉分号。

# iphone - 一页上的 2 个表视图 - 两个 NSArray

> ID：10376131
> 
> 赞同：0
> 
> 时间：2012-04-29T21:27:59.507
> 
> 标签：iphone, objective-c, xcode

您好，我是 xCode 和 iPhone 开发的新手。我在一页上有两个不同的 TableView 控件。我有 NSArray #1 需要作为 TableView #1 的数据源和 NSArray #2 需要作为 TableView #2 的数据源。

唯一的问题是 NSArray#1 同时填充了 TableView1 和 TableView2。我查看了代码，似乎找不到在哪里可以区分哪个 NSArray 属于每个 TableView。

任何帮助将不胜感激。提前致谢！

```
@interface GrainBinContentsEstimatorViewController : UIViewController
<UITableViewDelegate, UITableViewDataSource>
{
    UITableView *tableViewGrainBinType;
    UITableView *tableViewGrainType;
}

@property (strong, nonatomic) NSArray *arrayGrainBinTypes;
@property (strong, nonatomic) NSArray *arrayGrainTypes;
@property (nonatomic, retain) UITableView *tableViewGrainBinType;
@property (nonatomic, retain) UITableView *tableViewGrainType;

@implementation GrainBinContentsEstimatorViewController
@synthesize arrayGrainBinTypes, arrayGrainTypes, tableViewGrainBinType, tableViewGrainType;

- (void)viewDidLoad
{
    [super viewDidLoad];
    self.arrayGrainBinTypes = [[NSArray alloc]
                       initWithObjects:@"RF", @"RC45", @"RC60", nil];

    self.arrayGrainTypes = [[NSArray alloc]
                            initWithObjects:@"Wheat", @"Corn", @"Soybeans", @"Rice", @"Milo", @"Barley", nil]; 
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section{
    return @"Select Bin Type";
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    return [self.arrayGrainBinTypes count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]
                initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [self.arrayGrainBinTypes objectAtIndex: [indexPath row]];
    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:52:13.073

在每个委托方法（回调）中，调用者（tableview）作为参数传递。因此，您可以根据此参数进行切换，例如：

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
   if (tableView == self.tableViewGrainBinType) return [self.arrayGrainBinTypes count];
   else return [self.arrayGrainTypes count];
} 
```

你明白了……

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:55:05.203

首先，欢迎来到 SO。

所以，你在这里有一个合理的设计理念：一个数组填充一个表视图。表格视图的数据源/委托*通常*是 UITableViewController 或 UIViewController，但它当然不必是。在你的情况下，它是你的 UIViewController。那么，当每个表格视图加载时，它会询问其数据源“嘿，我有多少行/部分？我的单元格是什么样的？”会发生什么情况？和其他问题。

在您的情况下，您没有区分表格视图！所以 tableView1 是在问“我的单元格是什么样的？让我们看看 tableView:cellForRowAtIndexPath: 必须说什么！” 你从你的 arrayGrainByTypes 数组中给它信息。然后 tableView2 出现并提出相同的问题，并使用**相同**的方法得到答案。在这些数据源方法中的每一个中，通常都会向您提供作为该方法的参数的表视图正在请求此信息。所以，只需检查哪个表视图正在询问！

```
if (tableView == self.tableViewGrainType) {
    // table view 1's information is set here
else if (tableView == self.tableViewGrainBinType) {
    // table view 2's information is set here
} 
```

# android - 添加第三方 jar 工具

> ID：10376132
> 
> 赞同：0
> 
> 时间：2012-04-29T21:28:30.540
> 
> 标签：android, jsoup

我在一个月前完成了一个使用 JSoup jar 的应用程序。commonsWares 向我指出，我需要从构建路径中删除 jar 文件并创建一个 libs 文件夹以供正确使用。

我将它从构建路径中删除并创建了一个名为 libs 的文件夹并将 jar 文件放在那里。这个对吗？

android 项目返回错误，因为它看不到 JSoup 库。那么我该如何做到这一点以确保它的所有可见性和运作良好呢？

我所做的截图如下：

![库](../Images/80b5779f4f5c8fa5b0c6524cdba7ba5e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:48:46.597

听起来您可能不在最新的 ADT 上。最新的 ADT 应该只拾取您库中的任何 jar。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:00:13.933

每次移动 jar 文件的位置时，都需要更新构建路径。在 Eclipse 中，您应该右键单击项目，选择*Build Path*然后*Configure Build Path*。然后只需选择*Libraries*选项卡，然后选择*Add Jar*。找到你的 jar 文件并选择它，你应该很高兴。

# ruby-on-rails - Rails 安装失败

> ID：10376133
> 
> 赞同：0
> 
> 时间：2012-04-29T21:28:44.197
> 
> 标签：ruby-on-rails

我正在尝试在 Mac 上安装 rails，但遇到了一些奇怪的错误：

> sudo gem install rails 成功安装 rails-3.2.3 1 个 gem 安装 rails-3.2.3 的 ri 文档...找不到文件“lib”正在安装 rails-3.2.3 的 RDoc 文档...找不到文件“lib”
> 
> rails --version Rails 当前未安装在此系统上。要获取最新版本，只需键入：

```
$ sudo gem install rails 
```

然后，您可以重新运行“rails”命令。

有人知道我做错了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:00:38.253

这个问题的解决方案似乎是我已经在 /usr/bin 中安装了 rails，它首先在我的 PATH 中。

这个“安装”只是一个 shell 脚本，上面的输出表明它没有安装。

我手动删除了它并重新安装了所有东西 - 在修复它产生的随机错误并对我的 PATH 进行了一些小编辑之后，它现在似乎正在工作。

# security - 访问令牌到期/续订

> ID：10376134
> 
> 赞同：0
> 
> 时间：2012-04-29T21:28:47.780
> 
> 标签：security, token, facebook-access-token, renewal

我有一个个人网站，我想在上面显示我最新的 Facebook 评论。一切正常，但我不确定访问令牌过期是如何工作的。我有两个月的访问令牌，这是否意味着每两个月我必须获得一个新的访问令牌并替换我的代码中的那个。如果是这样，那真的一点都不方便……尤其是因为这一切都是为了授权 MYSELF 获得我自己的评论。

有没有办法自动更新访问令牌或获得一个不会过期的令牌或任何其他方式来解决这两个月到期的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:07:23.727

根据 Facebook 文档，您可以 ping 此 URL，它将返回相同的访问令牌（如果有时间）或新的访问令牌（如果没有时间）。这将返回一个带有令牌和过期时间的字符串。

`https://graph.facebook.com/oauth/access_token?client_id=APPID&client_secret=APPSECRET&grant_type=fb_exchange_token&fb_exchange_token=TOKEN`

# android - GPS当前位置

> ID：10376136
> 
> 赞同：2
> 
> 时间：2012-04-29T21:28:57.697
> 
> 标签：android

我已经在这段代码上工作了一段时间，一切似乎都很好，但是我的编辑器，eclipse 一直告诉我要转换 myManager。代码如下，

```
package com.gps.project;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.TextView;
import android.content.Context;
import android.widget.Button;
/*LOcation based API*/
import android.location.LocationManager;

public class GpsActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        /*Create ab ttuon we are to use in our GPS*/
        final Button gpsButton=(Button) findViewById(R.id.gpsButton);
        gpsButton.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                LoadCoords();

            }
        });

    }
    public void LoadCoords(){
        /*Create two textfields that will contain information as latitudes and longitudes*/
        TextView latText=(TextView) findViewById(R.id.latText);
        TextView lngText=(TextView) findViewById(R.id.lngText);

        /*Creation of a location manager from which we are to pull the location values*/
        LocationManager myManager=(LocationManager) getSystemService(Context.LOCATION_SERVICE);
        /*To pull the coordinates from myManager, we use the getCurrentLocation( ) method.*/
        Double latPoint = myManager.getCurrentLocation("gps").getLatitude();
        Double lngPoint = myManager.getCurrentLocation("gps").getLongitude();
        /*Finally, take the new Double values and pass them to your TextViews:*/
        latText.setText(latPoint.toString());
        lngText.setText(lngPoint.toString());
    }
} 
```

如果有人帮助我纠正我的错误，我会很高兴。我打算得到经度和纬度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:45:50.363

正如我在回复中所说，我认为您应该使用[getLastKnownLocation](http://developer.android.com/reference/android/location/LocationManager.html#getLastKnownLocation%28java.lang.String%29)代替`getCurrentLocation`我在文档中找不到的（可能已弃用）。

> 返回一个 Location 指示从给定提供程序获得的最后一个已知位置修复的数据。这可以在不启动提供程序的情况下完成。请注意，此位置可能已过时，例如，如果设备已关闭并移动到另一个位置。如果提供程序当前被禁用，则返回 null。

您需要添加的[权限](http://developer.android.com/reference/android/location/LocationManager.html#GPS_PROVIDER)是：

```
<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/> 
```

# php - HTML 输入框中的 PHP UTF-8 编码

> ID：10376138
> 
> 赞同：2
> 
> 时间：2012-04-29T21:29:18.570
> 
> 标签：php, html, encoding, utf-8, meta-tags

这是数据库中的内容

```
Seilpendel für Tragsysteme 
```

现在我通过 AJAX 将它加载到文本框中，但加载到文本框中的是

```
Seilpendel f�r Tragsysteme 
```

`Seilpendel für Tragsysteme`但我想在输入框中输入正确的字符串

我试过了

```
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" /> 
```

但不是它的工作

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:07:33.507

解决此问题的正确方法是将数据库配置为使用 UTF8 作为输入和输出的字符编码。

RUN 连接到数据库后的以下查询，一次，一切都应该开始工作。

```
SET NAMES 'utf8'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:31:39.070

确保您还使用 UTF8 编码保存文件

您可以在记事本中打开它（甚至更好 - notepad++）并在“另存为...”弹出窗口中 - 选择 UTF8 而不是默认的 ANSI

如果您使用的是记事本++，请选择不带 BOM 的 utf-8

如果文件的编码没问题，请确保与数据库的连接是 utf-8 格式，您可以通过以下查询来做到这一点： `SET NAMES 'utf8'`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T21:57:22.333

确保 db 以 UTF8 编码，或者在从 db 加载数据或回写时使用**utf8_encode()**或**utf8_decode() 。**

# c++-cli - 托管程序集调用 C++/CLI 引起的循环依赖

> ID：10376141
> 
> 赞同：1
> 
> 时间：2012-04-29T21:29:40.393
> 
> 标签：c++-cli

我正在尝试从托管调用者调用 C++/CLI 类方法。托管程序集定义了一个类，该类是 C++/CLI 函数的输入类型，并通过 OnPropertyChanged 事件响应托管类中变量的更改。当其中一个事件更改处理程序触发时，它调用 C++/CLI 传递数据。

C＃：

```
namespace managedA
{
    class clsA
    {
        //The rest of clsA defined elsewhere
        partial void initialise()
        {
            this.PropertyChanged += delegate(object o, System.ComponentModel.PropertyChangedEventArgs args)
            {
                if (args.PropertyName == "myvar")
                {
                    CalcMyVar();
                }
            }
        }

        void CalcMyVar()
        {
            cppcli::Calc _calc = new cppcli::Calc();
            _calc.DoSomething(this);
        }
    }
} 
```

C++/CLI：

```
namespace cppcli
{
public ref class Calc       
    {
    public:

        managed::clsA ^ DoSomething(managed::clsA ^ input)
        {
            ...
        }
    }
} 
```

我遇到的问题是由托管调用者通过 C++/CLI 对自身的循环依赖引起的。我尝试在被调用者`(cppcli:Calc)`继承的中间项目中声明一个接口类，但这不起作用，因为中间项目总是需要`managed::clsA`在`cppcli::Calc`声明时知道。似乎无论我如何声明（例如用`cppcli::Calc`抽象），我最终总是需要对声明中某处的引用。如何以在声明中抽象类型的方式声明？`managed::clsA``Object``managed::ClsA``cppcli::Calc`

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T19:41:45.010

为了清楚起见，我不会将 C++/CLI 称为非托管，而将应用程序的其他部分称为托管，因为所有具体的 C++/CLI 代码都是托管的。只有您使用的本机 C++ 代码是非托管的。至少我是这么理解的。

无论如何，继续前进，如果您的应用程序的 C++/CLI 部分充当实用程序，那么我建议在您在应用程序中继承的 C++/CLI 部分声明一个基类（您称之为“托管”）部分你的软件。这样，应用程序部分包含并继承自 C++/CLI 部分，但 C++/CLI 部分不需要了解您的应用程序层。举一个未经测试的例子：

C++/CLI 代码

```
public ref class base
{
public:
   int a;
};

public ref class Calc
{
public:
   static void DoSomething(base^ p_base)
   {
      p_base.a = 5;
   }
} 
```

应用层

```
//Include your C++/CLI code
public ref class app_class : public base
{
   void do_something()
   {
      Calc::DoSomething(this);
   }
} 
```

无论如何我没有编译这个，但我想你明白了。

# php - php长时间运行的进程，'at'表现得很奇怪

> ID：10376143
> 
> 赞同：10
> 
> 时间：2012-04-29T21:29:58.700
> 
> 标签：php, linux, gentoo

首先，我远不是 Linux 专家，所以这可能是这里的问题，但无论如何，问题是：

我按照这里写的：http: [//symcbean.blogspot.com/2010/02/php-and-long-running-processes.html](http://symcbean.blogspot.com/2010/02/php-and-long-running-processes.html)

启动一个长时间运行的 PHP 进程。这在我的 Mac 上的 MAMP 配置中完美运行。然而，一旦我将它部署到我们的 VPS，我得到了一些非常奇怪的结果。

所以首先我做一个简单的测试，使用 SSH 连接：

```
echo '/usr/local/php53/bin/php -d memory_limit=512M -q /home/user/www/Update/Update.php;' | at now + 2minutes 
```

结果：

```
warning: commands will be executed using /bin/sh
job 2300 at 2012-04-29 19:24 
```

事实上，2 分钟后 php 脚本被执行。到目前为止，一切都很好。

接下来我尝试以下方法：

在我的浏览器中我打开：

```
www.myserver.com/Update/LaunchUpdates.php 
```

此 php 脚本包含以下行：

```
exec("echo '/usr/local/php53/bin/php -d memory_limit=512M -q /home/user/www/Update/Update.php;' | at now + 2minutes"); 
```

发生的情况如下：我在 -l 处检查状态，我看到：

```
job 2304 at 2012-04-29 19:32 
```

然后我等待 2 分钟并再次在 -l 处运行。我希望看到一个空的结果，但我得到：

```
job 2305 at 2012-04-29 19:34 
```

2分钟后我得到

```
job 2306 at 2012-04-29 19:36 
```

我对那里发生的事情一无所知。未执行 php 脚本，并且该作业似乎在 2 分钟后自行重新安排。这种情况一直持续到我完成工作为止。

有谁知道可能会发生什么？

更多信息：

```
cat /etc/*-release
Gentoo Base System version 1.6.14 
```

更多细节。以下是 at 作业被调度时的内容：(at -c [ID])

```
#!/bin/sh
# atrun uid=1002 gid=100
# mail user 1
umask 33
SERVER_SIGNATURE=\<address\>Apache/2.2.20\ \(Unix\)\ mod_ssl/2.2.20\ OpenSSL/0.9.8o\ Server\ at\ xxx.yyyyy.com\ Port\ 80\</address\>"
"; export SERVER_SIGNATURE
HTTP_USER_AGENT=Mozilla/5.0\ \(Macintosh\;\ Intel\ Mac\ OS\ X\ 10_7_3\)\ AppleWebKit/534.55.3\ \(KHTML,\ like\ Gecko\)\ Version/5.1.5\ Safari/534.55.3; export HTTP_USER_AGENT
HTTP_HOST=xxx.yyyyy.com; export HTTP_HOST
SERVER_PORT=80; export SERVER_PORT
DOCUMENT_ROOT=/home/user/www; export DOCUMENT_ROOT
SCRIPT_FILENAME=/home/user/www/Update/LaunchUpdates.php; export SCRIPT_FILENAME
REQUEST_URI=/Update/LaunchUpdates.php; export REQUEST_URI
SCRIPT_NAME=/Update/LaunchUpdates.php; export SCRIPT_NAME
HTTP_CONNECTION=keep-alive; export HTTP_CONNECTION
REMOTE_PORT=36291; export REMOTE_PORT
PATH=/bin:/usr/bin; export PATH
PWD=/home/user/www/Update; export PWD
SERVER_ADMIN=webmaster@abcdef.com; export SERVER_ADMIN
REDIRECT_STATUS=200; export REDIRECT_STATUS
HTTP_ACCEPT_LANGUAGE=en-us; export HTTP_ACCEPT_LANGUAGE
HTTP_ACCEPT=text/html,application/xhtml+xml,application/xml\;q=0.9,\*/\*\;q=0.8; export HTTP_ACCEPT
REMOTE_ADDR=83.101.41.41; export REMOTE_ADDR
SHLVL=764; export SHLVL
SERVER_NAME=xxx.yyyyy.com; export SERVER_NAME
SERVER_SOFTWARE=Apache/2.2.20\ \(Unix\)\ mod_ssl/2.2.20\ OpenSSL/0.9.8o; export SERVER_SOFTWARE
QUERY_STRING=; export QUERY_STRING
SERVER_ADDR=1.2.3.4; export SERVER_ADDR
GATEWAY_INTERFACE=CGI/1.1; export GATEWAY_INTERFACE
SERVER_PROTOCOL=HTTP/1.1; export SERVER_PROTOCOL
HTTP_ACCEPT_ENCODING=gzip,\ deflate; export HTTP_ACCEPT_ENCODING
REQUEST_METHOD=GET; export REQUEST_METHOD
cd /home/user/www/Update || {
     echo 'Execution directory inaccessible' >&2
     exit 1
}
/usr/local/php53/bin/php -d memory_limit=512M -q /home/user/www/Update/Update.php; 
```

在等待 2 分钟后重新安排工作时，我得到了新工作的内容，它是相同的，除了：

SHLVL=764 已经变成了 SHLVL=765

更多信息！

正如用户建议的那样，我尝试使用 nohup 而不是 at。所以我做了以下事情：

在 .sh 文件中生成要由 nohup 运行的命令（具有执行权限）。然后执行 exec('nohup .....')

我还在 LaunchUpdates 中添加了一个检查，以确保在 nohup 批处理完成运行之前不会再次调用它（我基本上是 rm .sh 文件及其批处理的结尾，在 LaunchUpdates 中我检查该文件是否存在）。

所以简而言之。

batchProcess.sh 包含：

```
/usr/local/php53/bin/php -d memory_limit=512M -q /home/user/www/Update/Update.php; 
rm /home/user/batchProcess.sh 
```

我的 LaunchUpdates php 代码包含：

```
$batchFile = "/home/user/batchProcess.sh";

if (file_exists($batchFile))
{
    echo 'Process still running. Try again later!';
    exit;
}

exec('nohup /home/user/batchProcess.sh > ~/process.out 2> ~/process.err < /dev/null &'); 
```

不，会发生什么：

我在我的 php 脚本中注释掉了 exec 行，所以文件不会被执行而是生成。我通过使用 ssh 登录手动测试文件，更改为用户“user”并运行：

```
nohup /home/user/batchProcess.sh > ~/process.out 2> ~/process.err < /dev/null & 
```

一切正常（最后删除 .sh 文件）！

接下来我取消注释 exec 行并重新运行 php 脚本。process.out 包含：

```
Process still running. Try again later! 
```

这意味着它再次执行基本脚本而不是执行语句？？？我完全迷失在这里！由于我在两个帐户上运行相同的 bash 脚本，因此执行哪些命令不会出错。

我应该开始挖掘 apache 日志吗？

这应该需要一点时间，男孩是我错了......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-03T15:55:11.017

由于您示例中的“at”命令用于从调用终端取消绑定脚本，因此您可以使用“nohup”而不是“at”。

试试这个（从调用进程中解除绑定，等待 120 秒并调用 php）：

```
/usr/bin/nohup /bin/sleep 120 2> /dev/null && \
/bin/date >> /tmp/longphp.log && \
/usr/local/php53/bin/php -d memory_limit=512M \
  -q /home/user/www/Update/Update.php >> /tmp/longphp.log 2>> /tmp/longphp.log 
```

它创建 /tmp/longphp.log 文件进行分析。您还可以创建一个包含先前脚本的 shell 包装器，以简化操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-06T09:05:53.830

**第一次尝试：**正如其他人所说，`LaunchUpdates.php`（您从浏览器调用）必须调用自身。它可能不会`.../Update.php`像您报告和打算那样调用，但是`... /LaunchUpdates.php`. 一个容易犯和忽视的错误，所以我的钱就在上面。[编辑：那不是问题。]

**第二次尝试：**现在您已经添加了生成的`at`脚本，我们可以看到您实际上调用了`Update.php`. 下一条线索：子shell 通常将变量`SHLVL`增加到比其父项的值大一。它超出个位数是非常不寻常的，在这种情况下，它表明您有超过 700 个 at 命令链，每个命令都由前一个启动。这排除了`LaunchUpdates.php`以某种方式通过 http 运行，因为`SHLVL`然后将被重置为比其在 apache 中的值大一。

我的新猜测：`Update.php`以某种方式执行`$SCRIPT_NAME`or `$SCRIPT_FILENAME`，（正如我们在生成的脚本中看到的那样）设置为`at`to`LaunchUpdates.php`而不是`Update.php`. 您可以`Update.php`通过将其替换为空文件或仅将消息写入文件的存根来检查问题是否存在：问题应该消失。

最有可能的原因是那些环境设置。如果您无法弄清楚，请向我们展示代码`Update.php`（以简化形式，但确保问题仍然存在），以便我们大家看看。

**编辑 2：**所以您已经确认 LaunchUpdates.php 正在重新启动。由于它不调用自身，因此它必须由 调用`Update.php`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-05-09T18:09:28.380

与其说是“at”问题的答案，但作为替代方案，您可以使用[prggmr](https://github.com/nwhitingx/prggmr)库设置超时以在 2 分钟内运行，该库将执行 Update.php 文件中包含的代码。

```
require 'path/to/prggmr/src/prggmr.php';

prggmr\timeout(function(){
    // Put logic from Update.php HERE
}, 120000);
// note the time is in milliseconds

prggmr\loop(); 
```

要运行代码，您将使用相同的命令，只需删除“at”

```
exec("echo '/usr/local/php53/bin/php -d memory_limit=512M -q /home/user/www/Update/Update.php;'"); 
```

这将在 2 分钟内在该超时时间内运行代码并在之后自动终止脚本，请注意，该库需要 PHP 5.4 才能运行，这只是一个替代方案，如果安装 5.4 不是一个选项，请忽略这一点。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-03T13:22:58.277

除了使用“at -l”检查队列外，还可以尝试使用“at -c [ID]”查看AT将运行的实际命令。我认为这将有助于诊断错误是什么。

我高度怀疑 at 命令正在自行运行，因此它每 2 分钟重新安排一次。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-05-09T14:52:40.613

文章作者编写了如下代码来实现调度：

```
print `echo /usr/bin/php -q longThing.php | at now`; 
```

使用反引号使脚本显示调度命令的结果。`at`如果给出任何意外的输出，这可能会给您一个提示......也许添加`2>&1`以查看是否有任何错误。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2012-05-03T11:48:49.907

我假设您在运行时以 root 身份登录（或者 uid PHP 在 webserver 中运行）`at -l`，并且作业与在 webserver 中运行的 uid PHP 相关联？

但是，其他人可能正在访问该网页，因为新作业的添加间隔与初始运行的延迟相同，这让我认为 Update.php 可能正在调用命令以再次运行自己？

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2012-05-03T16:00:04.987

如果您查看 /var/spool/at/atjobs，您会发现一个 .SEQ 和与此类似的文件

```
-rwx------ 1 sergio at   5077 may  3 17:53 a000010153c71d 
```

该文件包含所有环境变量以及 atd 执行的命令。希望这可以帮助

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2012-05-03T15:35:47.543

您应该让您的脚本在现在 + 2 分钟内启动并创建和附加一个日志文件，例如：

```
file_put_contents(__FILE__.'.log', date('c') . "\n", FILE_APPEND); 
```

然后你可以很容易地检查发​​生了什么。两分钟的差异让人们假设它会重新安排自己。

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-05-10T00:55:41.137

尝试这个：

`exec('/home/user/batchProcess.sh >> ~/process.out 2>&1 | at now &');`

# c - 在 C 中访问动态分配的嵌套结构

> ID：10376147
> 
> 赞同：2
> 
> 时间：2012-04-29T21:30:25.080
> 
> 标签：c, struct, nested, dynamic-arrays, dereference

结构如下，内部结构在外部结构内部。两个结构都是动态分配的。当我尝试通过引用来访问内部结构以更改地址值时，就会出现问题。

例如：

```
typedef struct{
    char address[32];
}inner;

typedef struct{
    struct inner innerStruct;
}outer;

main(){

    int i = 0;
    outer* outerArray;
    outer* outerReference;
    inner* innerReference;

    /* create 20 outer structs */
    outerArray = malloc(20 * sizeof(outerArray*));

    /* for each outer struct, dynamically allocate 10 inner structs */

    for(i = 0; i < 10; i++)
    {
        outerReference = outerArray + i;
        outerReference->innerStruct = malloc(10 * sizeof(outerReference->innerStruct);
    }

} 
```

如何访问`outerArray[3][innerStruct[4]`第 4 个外部结构的第 5 个内部结构并更改其地址值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:36:24.253

如果您想使用，请声明`innerStruct` 为`inner *`，而不是 a 。`struct inner``malloc()`

正如您所声明的，`inner`当您创建一个`outer`.

另请注意，由于您使用了 ，因此在声明该类型的变量时`typedef`不需要关键字。`struct`

这是编译和运行的代码的更正版本：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct {
  char address[32];  // 32 chars are allocated when an inner is created
} inner;

typedef struct {
  inner innerStruct;  // innerStruct is allocated when an outer is created
} outer;

typedef struct {
  inner *innerStruct;  // innerStruct must be allocated explicitly
} outer2;

int main(int argc, char *argv[]) {
  int i = 0;
  outer  *outerArray;
  outer2 *outer2Array;

  outer  *outerReference;
  outer2 *outer2Reference;

  /* create 20 outer structs (should check for out-of-mem error) */
  outerArray = malloc(20 * sizeof(outer));

  for (i = 0; i < 10; ++i) {
    outerReference = outerArray + i; // ptr to i'th outer
    // Note: innerStruct.address bcz it's a structure
    sprintf(outerReference->innerStruct.address, "outer struct %d", i);
  }

  /* create 20 outer2 structs */
  outer2Array = malloc(20 * sizeof(outer2));

  /* for each outer struct, dynamically allocate 10 inner structs */
  for (i = 0; i < 10; ++i) {
    outer2Reference = outer2Array + i;
    outer2Reference->innerStruct = malloc(sizeof(inner));
    // Note: innerStruct->address bcz it's a pointer
    sprintf(outer2Reference->innerStruct->address, "outer2 struct %d", i);
  }

  /* print all the data and free malloc'ed memory */
  for (i = 0; i < 10; ++i) {
    printf("outer: %-20s, outer2: %-20s\n",
      outerArray[i].innerStruct.address,
      outer2Array[i].innerStruct->address);
      free(outer2Array[i].innerStruct);
  }
  free(outer2Array);
  free(outerArray);
  return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T13:59:03.960

打印`address`第 4 个外部结构的第 5 个内部结构的成员，将数据复制到其中并再次打印：

```
#include <stdio.h>
#include <stdlib.h>

typedef struct{
    char address[32];
}inner;

typedef struct{
    inner* innerStruct;
}outer;

int main()
{
    int i = 0;
    outer* outerArray;
    outer* outerReference;
    /* inner* innerReference; */ /* unused */

    /* create 20 outer structs */
    outerArray = malloc(20 * sizeof(*outerArray));

    /* for each outer struct, dynamically allocate 10 inner structs */

    for(i = 0; i < 10; i++)
    {
        outerReference = outerArray + i;
        outerReference->innerStruct = malloc(10 * sizeof(*outerReference->innerStruct));
    }

    printf("address: '%s'\n", outerArray[3].innerStruct[4].address);

    strcpy(outerArray[3].innerStruct[4].address, "<emtpy>");

    printf("address: '%s'\n", outerArray[3].innerStruct[4].address);

    return 0;
} 
```

下次您发布代码时，请善待并使其编译。

# python - 将目录添加到 python 路径，但是当我尝试导入时 python 给出错误

> ID：10376159
> 
> 赞同：2
> 
> 时间：2012-04-29T21:31:59.863
> 
> 标签：python, filepath

要将目录添加到我的 python 路径，我进入命令行，执行“open -e .bash_profile”，在 TextEdit 中打开它。然后我添加了刚刚创建的名为“coltrane”的目录，因此 bash 文件在编辑后如下所示：

![coltrane 的文件路径](../Images/a1c5c900ab235647a633fbd2e69ad9b5.png)

然后我进入 python 交互会话并执行“import sys”和“print sys.path”来测试编辑是否成功。它给了我这个：

![系统路径](../Images/652092b78c106cfdb6632a304dfd5341.png)

如您所见，目录“coltrane”是 sys.path 上的第一个路径。但后来我尝试导入“coltrane”，但它无法识别：

![在此处输入图像描述](../Images/216a1ee5a9ebccabd3513ae9fe1ed89a.png)

知道为什么会这样吗？我在 .bash_profile 中写错了吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:36:49.050

您将`coltrane`目录添加到路径中，我假设这是您要导入的模块（也就是说，您`__init__.py`在该目录中有一个可以使目录本身成为模块）。但是您想将*包含*您要导入的模块的目录（即 ）添加`djangoprojects`到您的路径中，因为它`PYTHONPATH`告诉 Python 在哪些目录中查找模块。

# css - 仅在 IE 7 中消失的背景图像

> ID：10376160
> 
> 赞同：1
> 
> 时间：2012-04-29T21:32:15.757
> 
> 标签：css, internet-explorer-7

我的提交按钮图像消失但仅在 IE7 及以下版本中存在问题。我试过了：

*   添加边框颜色
*   添加`background-color`
*   添加`min-height: 22px`到触发器`hasLayout`
*   添加`display: inline-block;`

但没有工作。

这是我的表格： http: [//www.bitstream.ca/contact.html](http://www.bitstream.ca/contact.html)

**HTML：**

```
<button id="submit" type="submit">Submit</button> 
```

**CSS：**

```
#submit{
    background: url('imgs/submit.png') no-repeat top;
    cursor: pointer;
    width: 79px;
    height: 22px;
    border: 1px;
    text-indent: -9999px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T21:46:53.553

您正在向内联元素添加`width`and 。`height`内联元素无法在它们上设置`width`或`height`设置，因此如果您将元素设置为`display: block;`，它应该可以解决您的问题。

# c# - 如何从 asp.net 页面中的 html textarea 读取文本？

> ID：10376164
> 
> 赞同：2
> 
> 时间：2012-04-29T21:32:40.290
> 
> 标签：c#, asp.net

我在没有 runat="server" 的情况下在 asp.net 页面中设置了 html textarea，我需要在后面的代码中通过 C# 在字符串变量中设置文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:23:31.663

TextMode 属性设置为 MultiLine 的 ASP.NET TextBox 控件将生成 Html TEXTAREA 控件。

因此，无需手动制作 Html TEXTAREA，您只需拖放一个 TextBox 控件并拥有：

```
 <asp:TextBox ID="TextBox1" runat="server" TextMode="MultiLine"></asp:TextBox> 
```

然后在你后面的代码中：

```
 TextBox2.Text = "... blah blah blah..."; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:37:58.863

使用 Request.Form Collection [http://msdn.microsoft.com/en-us/library/ms525985(v=vs.90).aspx](http://msdn.microsoft.com/en-us/library/ms525985(v=vs.90).aspx) 检索值..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T22:38:34.523

你可以看看这个[线程](https://stackoverflow.com/questions/9495428/load-text-into-textarea-from-code-behind-in-asp-net-using-c-sharp)

我认为它是一样的，希望它有帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-01T00:56:06.483

您不能将值保存到代码隐藏文件中的变量中，然后在网络表单本身上通过某种方式引用变量，例如 <%= varName =>??

上面似乎需要做很多工作，只是为了引用一个您可以在 C# 中轻松设置的变量，然后拉入页面加载。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T00:34:16.910

我猜你试图完成的是用服务器端的变量填充你的文本框，而不将 runat="server" 设置为控件。

您可以使用 ajax 和简单的 jquery 来做到这一点。

假设您在 YourPage.aspx 上有这个

```
<input id="txtMyTextBox" type="text" /> 
```

接下来是一个简单的jquery

```
function getMytextValue() {
        $.ajax({
            url: "/MainPage.aspx/YourServerSideFunction",
            type: "post",
            data: "{ }",
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            success: function (data) {
                //Get your value from JSON data.d;
                $('#txtMyTextBox').val(data.d);
            },
            error: function (request, status, err) {
                //Do something here for error;
            }
        });
    } 
```

现在只需在您喜欢的任何事件上调用 jquery。

PS：不要忘记在你的代码后面创建一个[WebMethod]。

希望这对你有帮助！:D

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-08T05:38:09.567

[请查看此链接](http://weblogs.asp.net/scottgu/asp-net-mvc-framework-part-3-passing-viewdata-from-controllers-to-views)

您可以使用 ViewData 在代码中设置数据，并可以按照上面链接中的说明在 html 中访问它们。

# java - 方法的编译器错误

> ID：10376167
> 
> 赞同：0
> 
> 时间：2012-04-29T21:32:51.767
> 
> 标签：java, compiler-construction

我正在制作一个小程序时遇到问题。基本上我有6个班。1个主类，4个“扩展”主类的子类和另一个运行程序的类。到目前为止，运行程序的类是这样安排的：

```
public class ClassToRunProgram {

public void main(String[] args){

Class1 a = new Class1(0, "class1"); //I've created 1 main class (Class5) that 
Class2 b = new Class2(1, "class2"); //these 4 classes extend.
Class3 c = new Class3(2, "class3");
Class4 d = new Class4(3, "class4");

int randomNum = (int) (Math.random() *3);

Class5[] arrayForClasses = new Class5[]{a, b, c, d}; //since they're extending this
                                                    //class I want to make them into
                                                   //a single Array?

    String numberQuestion = JOptionPane.showInputDialog(null, 
"What question do you want to ask? \n 
Enter a number: \n 
1\. First Question? \n 
2\. Second Question? \n 
3\. Third Question?");

int question = Integer.parseInt(numberQuestion); //not sure if this part is 
                                                //actually relevant at all??
                                               //Think it might be since I want to
                                              //use integers in my if statement below

if(question == 1){
    JOptionPane.showMessageDialog(null, "Blah blah"+arrayForClasses.getReturnValue()+" blah");
} 
```

.getReturnValue() 方法在所有类 (1-5) 中。我不确定这是否真的是我必须做的。但是我遇到的问题是，当我编译它时（即使它没有完成），它会抛出一个“无法找到符号”错误消息“符号：方法 .getReturnValue（）位置：变量 arrayForClasses 类型 Class5 []” . 我只是想知道我哪里错了？

任何帮助深表感谢。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:36:12.087

`arrayForClasses`是一个数组，你不能向数组添加方法，只能向数组*内*的对象添加方法。您需要调用数组中对象的方法，而不是数组本身。所以像

```
arrayForClasses[0].getReturnValue() 
```

现在，我说“类似”是因为我很难遵循您正在尝试做的事情，而且我有点担心将“getReturnValue()”方法放入许多不同的类中而没有这样做的具体原因。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:37:49.180

`arrayForClasses`是一个数组；它不是它包含对象的类之一，因此它没有`getReturnValue()`方法

您需要访问数组的一个元素（即*它*的一个对象`Class5`或其子类），然后调用`getReturnValue()`它：

```
arrayForClasses[0].getReturnValue() 
```

索引可以从 0 到 3（总共 4 个元素），您可以使用其中任何一个。您甚至可以循环访问所有这些：

```
for (Class5 elem : arrayForClasses) { // cycles through each element in order
  elem.getReturnValue();
} 
```

# jquery - 如何使用 jQuery 的 .draggable 来拖动表格单元格？

> ID：10376168
> 
> 赞同：1
> 
> 时间：2012-04-29T21:32:52.723
> 
> 标签：jquery, user-interface, draggable, user-experience

在这个小提琴中，我想做一个 jQuery 或 Javascript 交互，这将允许我拖动第一个表格单元格（名称）并将其拉出。.draggable 似乎只适用于 div。是否有解决方案或者我应该放弃尝试使用表格制作 UI？ [http://jsfiddle.net/4XyzJ/33/](http://jsfiddle.net/4XyzJ/33/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:35:07.920

你可以试试这个插件[http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/](http://www.isocra.com/2008/02/table-drag-and-drop-jquery-plugin/)

这就是你需要的表格单元格[http://www.jeasyui.com/tutorial/dd/dnd3.php](http://www.jeasyui.com/tutorial/dd/dnd3.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:16:27.660

您可以在单元格中放置一个 div 并拖动它。

# hadoop - 弹性 MapReduce 上的 Mahout：Java 堆空间

> ID：10376171
> 
> 赞同：3
> 
> 时间：2012-04-29T21:33:34.553
> 
> 标签：hadoop, heap-memory, amazon-emr, mahout

我在 Amazon Elastic MapReduce 集群上从命令行运行 Mahout 0.6，试图对大约 1500 个短文档进行树冠集群，并且作业不断失败，并显示“错误：Java 堆空间”消息。

根据这里和其他地方以前的问题，我已经调高了我能找到的每个内存旋钮：

*   conf/hadoop-env.sh：在小型实例上将所有堆空间设置为高达 1.5GB，在大型实例上甚至为 4GB。

*   conf/mapred-site.xml：添加 mapred.{map, reduce}.child.java.opts 属性，并将其值设置为 -Xmx4000m

*   $MAHOUT_HOME/bin/mahout：增加 JAVA_HEAP_MAX 并将 MAHOUT_HEAPSIZE 设置为 6GB（在大型实例上）。

而且问题一直存在。我一直在反对这个问题太久了——有人有什么建议吗？

完整的命令和输出看起来像这样（在大型实例集群上运行，希望它能缓解问题）：

```
hadoop@ip-10-80-202-112:~$ mahout-distribution-0.6/bin/mahout canopy -i sparse-data/2010/tf-vectors -o canopy-out/2010 -dm org.apache.mahout.common.distance.TanimotoDistanceMeasure -ow -t1 0.5 -t2 0.005 -cl
run with heapsize 6000
-Xmx6000m
MAHOUT_LOCAL is not set; adding HADOOP_CONF_DIR to classpath.
Running on hadoop, using HADOOP_HOME=/home/hadoop
No HADOOP_CONF_DIR set, using /home/hadoop/conf 
MAHOUT-JOB: /home/hadoop/mahout-distribution-0.6/mahout-examples-0.6-job.jar
12/04/29 19:50:23 INFO common.AbstractJob: Command line arguments: {--clustering=null, --distanceMeasure=org.apache.mahout.common.distance.TanimotoDistanceMeasure, --endPhase=2147483647, --input=sparse-data/2010/tf-vectors, --method=mapreduce, --output=canopy-out/2010, --overwrite=null, --startPhase=0, --t1=0.5, --t2=0.005, --tempDir=temp}
12/04/29 19:50:24 INFO common.HadoopUtil: Deleting canopy-out/2010
12/04/29 19:50:24 INFO canopy.CanopyDriver: Build Clusters Input: sparse-data/2010/tf-vectors Out: canopy-out/2010 Measure: org.apache.mahout.common.distance.TanimotoDistanceMeasure@a383118 t1: 0.5 t2: 0.0050
12/04/29 19:50:24 INFO mapred.JobClient: Default number of map tasks: null
12/04/29 19:50:24 INFO mapred.JobClient: Setting default number of map tasks based on cluster size to : 24
12/04/29 19:50:24 INFO mapred.JobClient: Default number of reduce tasks: 1
12/04/29 19:50:25 INFO mapred.JobClient: Setting group to hadoop
12/04/29 19:50:25 INFO input.FileInputFormat: Total input paths to process : 1
12/04/29 19:50:25 INFO mapred.JobClient: Running job: job_201204291846_0004
12/04/29 19:50:26 INFO mapred.JobClient:  map 0% reduce 0%
12/04/29 19:50:45 INFO mapred.JobClient:  map 27% reduce 0%
[ ... Continues fine until... ]
12/04/29 20:05:54 INFO mapred.JobClient:  map 100% reduce 99%
12/04/29 20:06:12 INFO mapred.JobClient:  map 100% reduce 0%
12/04/29 20:06:20 INFO mapred.JobClient: Task Id : attempt_201204291846_0004_r_000000_0, Status : FAILED
Error: Java heap space
12/04/29 20:06:41 INFO mapred.JobClient:  map 100% reduce 33%
12/04/29 20:06:44 INFO mapred.JobClient:  map 100% reduce 68%
[.. REPEAT SEVERAL ITERATIONS, UNITL...]
12/04/29 20:37:58 INFO mapred.JobClient: map 100% reduce 0%
12/04/29 20:38:09 INFO mapred.JobClient: Job complete: job_201204291846_0004
12/04/29 20:38:09 INFO mapred.JobClient: Counters: 23
12/04/29 20:38:09 INFO mapred.JobClient: Job Counters 
12/04/29 20:38:09 INFO mapred.JobClient: Launched reduce tasks=4
12/04/29 20:38:09 INFO mapred.JobClient: SLOTS_MILLIS_MAPS=94447
12/04/29 20:38:09 INFO mapred.JobClient: Total time spent by all reduces waiting after reserving slots (ms)=0
12/04/29 20:38:09 INFO mapred.JobClient: Total time spent by all maps waiting after reserving slots (ms)=0
12/04/29 20:38:09 INFO mapred.JobClient: Rack-local map tasks=1
12/04/29 20:38:09 INFO mapred.JobClient: Launched map tasks=1
12/04/29 20:38:09 INFO mapred.JobClient: Failed reduce tasks=1
12/04/29 20:38:09 INFO mapred.JobClient: SLOTS_MILLIS_REDUCES=23031
12/04/29 20:38:09 INFO mapred.JobClient: FileSystemCounters
12/04/29 20:38:09 INFO mapred.JobClient: HDFS_BYTES_READ=24100612
12/04/29 20:38:09 INFO mapred.JobClient: FILE_BYTES_WRITTEN=49399745
12/04/29 20:38:09 INFO mapred.JobClient: File Input Format Counters 
12/04/29 20:38:09 INFO mapred.JobClient: Bytes Read=24100469
12/04/29 20:38:09 INFO mapred.JobClient: Map-Reduce Framework
12/04/29 20:38:09 INFO mapred.JobClient: Map output materialized bytes=49374728
12/04/29 20:38:09 INFO mapred.JobClient: Combine output records=0
12/04/29 20:38:09 INFO mapred.JobClient: Map input records=409
12/04/29 20:38:09 INFO mapred.JobClient: Physical memory (bytes) snapshot=2785939456
12/04/29 20:38:09 INFO mapred.JobClient: Spilled Records=409
12/04/29 20:38:09 INFO mapred.JobClient: Map output bytes=118596530
12/04/29 20:38:09 INFO mapred.JobClient: CPU time spent (ms)=83190
12/04/29 20:38:09 INFO mapred.JobClient: Total committed heap usage (bytes)=2548629504
12/04/29 20:38:09 INFO mapred.JobClient: Virtual memory (bytes) snapshot=4584386560
12/04/29 20:38:09 INFO mapred.JobClient: Combine input records=0
12/04/29 20:38:09 INFO mapred.JobClient: Map output records=409
12/04/29 20:38:09 INFO mapred.JobClient: SPLIT_RAW_BYTES=143
Exception in thread "main" java.lang.InterruptedException: Canopy Job failed processing sparse-data/2010/tf-vectors
at org.apache.mahout.clustering.canopy.CanopyDriver.buildClustersMR(CanopyDriver.java:349)
at org.apache.mahout.clustering.canopy.CanopyDriver.buildClusters(CanopyDriver.java:236)
at org.apache.mahout.clustering.canopy.CanopyDriver.run(CanopyDriver.java:145)
at org.apache.mahout.clustering.canopy.CanopyDriver.run(CanopyDriver.java:109)
at org.apache.hadoop.util.ToolRunner.run(ToolRunner.java:65)
at org.apache.mahout.clustering.canopy.CanopyDriver.main(CanopyDriver.java:61)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.ProgramDriver$ProgramDescription.invoke(ProgramDriver.java:68)
at org.apache.hadoop.util.ProgramDriver.driver(ProgramDriver.java:139)
at org.apache.mahout.driver.MahoutDriver.main(MahoutDriver.java:188)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at org.apache.hadoop.util.RunJar.main(RunJar.java:156) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-17T18:02:44.127

在正常情况下，您可以通过将“mapred.map.child.java.opts”和/或“mapred.reduce.child.java.opts”设置为“-Xmx3g”来增加 map/reduce 子任务的内存分配”。

但是，当您在 AWS 上运行时，您对这些设置的直接控制较少。Amazon 提供了一种在启动时配置 EMR 集群的机制，称为“引导操作”。

对于内存密集型工作流程，即任何 Mahout :)，请查看“MemoryIntensive”引导程序。

[http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/Bootstrap.html#PredefinedBootstrapActions_MemoryIntensive](http://docs.amazonwebservices.com/ElasticMapReduce/latest/DeveloperGuide/Bootstrap.html#PredefinedBootstrapActions_MemoryIntensive)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:41:57.623

您的本地 Hadoop 配置与 EMR 的运行方式无关，这些环境变量也无关。您必须自己配置 EMR，其中一些没有等效项。例如，您的工作人员内存取决于您要求的实例类型。

该错误与内存没有任何关系。EMR 在等待作业完成时因某种原因中断了作业。它失败了吗？

# ruby-on-rails - 在 Sinatra 和 Rails 之间共享模型代码

> ID：10376174
> 
> 赞同：8
> 
> 时间：2012-04-29T21:33:50.017
> 
> 标签：ruby-on-rails, sinatra, sharing

我有一个响应 api 调用的 Sinatra 应用程序，以及一个处理报告和所有漂亮的东西（如图形和网站）的 Rails 应用程序。两者都需要访问一组通用模型（例如帐户、站点等）

我的问题是：如何有效地在两个应用程序之间共享代码？例如，如果我在 Sinatra 中编辑 Accounts 模型，我不想记住在 Rails 应用程序中复制相同的更改。我宁愿不使用 Rails 机架安装，因为这两个应用程序将位于不同的集群上。

我在 StackOverflow 上看到过关于以下方面的建议：

*   Git 模块
*   符号链接（不适用于我同事使用的 Windows）
*   Rails 插件（我怀疑这是否适用于 Sinatra）
*   Ruby Gems（我认为这对于模型数据来说太过分了，但这只是我）

这两个应用程序位于不同的存储库中。基本上，我首先开发 API，然后在 Rails 应用程序中添加特定于 Account 的逻辑（主要是因为 Rails 有更多的库可以更容易地开发这些东西）。

你将如何解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T00:24:08.677

我会选择 gem，或者更确切地说是 gem，你不需要发布它，然后使用 Bundler [git dependencies](http://gembundler.com/git.html)。我们在 Travis CI 中大量执行此操作，并且效果很好，尤其是 Bundler 1.2 中新的“本地”git 依赖项：http: [//gembundler.com/man/bundle-config.1.html#LOCAL-GIT-REPOS](http://gembundler.com/man/bundle-config.1.html#LOCAL-GIT-REPOS)

# python - 将数字类型透明地处理为单值序列（反之亦然）

> ID：10376175
> 
> 赞同：1
> 
> 时间：2012-04-29T21:33:59.963
> 
> 标签：python, functional-programming, sequence

我开始通过编写 ODE 求解器来学习 Python。我想透明地处理单变量或多变量输入函数。这是我的欧拉方法一步的代码：

```
def euler(h, t, y, f):
    return (y + h*f for y,f in zip(y,f(t,y))) 
```

现在我定义了两个函数，`f1`就像`f2`这样：

```
def f1(t,y):
    return -2*t*y

def f2(t,y):
    x, y = y #is rebinding usually ok, or confusing?
    return (x - t*y, y + x/t) 
```

当我测试它们时，这就是（显然）发生的事情

```
>>> list(euler(0.01, 1, (1,2), f2))
[0.99, 2.03]
>>> list(euler(0.01, 1, 1, f1))
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "<stdin>", line 2, in euler
TypeError: zip argument #1 must support iteration 
```

如果给定的函数适用于一个或多个变量，我希望求解器能够透明地处理，但还没有找到一种很酷的方法。我发现的一种方法是

```
import operator as op
def euler(h, t, y, f):
    if op.isNumberType(y):
        return (y + h*f(t,y),)
    return (y + h*f for y,f in zip(y,f(t,y))) 
```

但是现在我传递了一个浮点数并返回了一个可迭代的，所以`list(euler(...))`可以成功。但是，例如，我不能调用`f(t,euler(...))`.

有没有办法将单例序列作为原始类型处理，或者将原始序列作为单例序列处理而无需无休止的检查？我所说的“无休止的检查”是指只需要检查几个地方，而不是检查我的代码。或者我应该把它吸起来，然后`f(t,y)`期待一个序列而不是一个数字？

感谢您的帮助，也欢迎有关我的编码的提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:45:10.217

在您的 euler 函数中，您可以捕获 TypeError 并通过封装在列表中并重试来恢复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:57:55.550

一种可能的解决方案是以下列方式编写你的欧拉函数

```
def euler(h, t, y, f):
    if isinstance(y,collections.Iterable):
        return (y + h*f for y,f in zip(y,f(t,y)))
    else:
        return (y+h*f(t,y),) 
```

另一种解决方案是将您的一维函数编写为

```
def f1(t,y):
    return (-2*t*y[0],) 
```

然后按以下方式调用euler

```
list(euler(0.01, 1, (1,), f1)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T22:12:51.367

使 f(t, y) 仅使用序列非常容易：

```
def euler(h, t, y, f):
    return (y + h*v for y,v in zip(y,f(t,y)))

def f1(t,status):
    x, = status
    return -2*t*x,

def f2(t,status):
    x, y = status
    return x - t*y, y + x/t

print list(euler(0.01, 1, (1,2), f2))
print list(euler(0.01, 1, (1,), f1)) 
```

# java - 当 JFrame 最大化时，我可以永久删除对任务栏的访问吗？

> ID：10376177
> 
> 赞同：0
> 
> 时间：2012-04-29T21:34:01.190
> 
> 标签：java, swing, jframe, taskbar

我目前正在为我的 Capstone 项目构建一个 POS 系统来完成我的学位。我已经超越了项目的规范（在我的投资组合中看起来比调用的命令行窗口界面更好），并且想添加一个额外的功能。

当我想到 POS 系统时，我想到的应用程序对用户隐藏了主要的“Windows”功能，并且只允许最终用户完成他们的工作。为了做到这一点，我想在应用程序运行时完全删除任务栏。我目前能够使 JFrame 全屏显示，这隐藏了 Windows 任务栏。

但是，当用户按下 ALT+TAB 或键盘上的“Windows”键时，任​​务栏会再次出现。这是我要删除的功能。

这是我的SSCCE：

```
import java.awt.BorderLayout;
import java.awt.EventQueue;
import java.awt.Toolkit;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class TestWindow extends JFrame implements ActionListener {

    private static final long serialVersionUID = 1L;
    private JPanel contentPane;

    public void buildGUI() {
        setUndecorated(true);
        setResizable(false);
        Toolkit tk = Toolkit.getDefaultToolkit();
        int xSize = ((int) tk.getScreenSize().getWidth());
        int ySize = ((int) tk.getScreenSize().getHeight());
        setSize(xSize, ySize);
        setAlwaysOnTop(true);
        contentPane = new JPanel();
        contentPane.setLayout(new BorderLayout(0, 0));
        setContentPane(contentPane);
        setVisible(true);

        JPanel panel = new JPanel();
        contentPane.add(panel, BorderLayout.CENTER);
        JButton btn = new JButton("Exit");
        btn.addActionListener(this);
        panel.add(btn);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    new TestWindow().buildGUI();
                } catch (Exception e) {
                    e.printStackTrace();
                }
            }
        });
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getActionCommand().equals("Exit")) {
            System.exit(0);
        }
    }
} 
```

那么我是否只需要添加一个 keyListener 来检查是否按下了 ALT+TAB 或 Windows 键？或者有没有更好的方法来处理这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T08:49:08.243

它要求您使用 SetWindowsHookEx 设置一个低级键盘挂钩（请参阅：WH_KEYBOARD_LL）

# objective-c - 更改xcode上图像的x值？

> ID：10376178
> 
> 赞同：-1
> 
> 时间：2012-04-29T21:34:06.653
> 
> 标签：objective-c, xcode

在互联网上查找 aprox 后。1/2 小时我来了。

```
 -(IBAction)left
{
    img.center.x = img.center.x floatValue]-30;
} 
```

在理想的世界中，这将是：单击按钮时，它将图像向左移动 30 像素

但是我们并不生活在一个理想的世界中，所以当我点击构建并运行时，它会出现 2 个错误......

> 错误：无法转换为指针类型
> 错误：需要左值作为赋值的左操作数

任何解决方案或对该问题的洞察力都会受到极大的欢迎。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:37:55.717

假设你有一个错字，你可以简单地做

```
img.frame = CGRectOffset(img.frame, dx, 0); 
```

其中`dx`是移动图像 x 坐标的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:18:26.193

这应该有效。它设置您的图像中心点，保持 y 值相同，x 值向左移动 30 个点。

```
img.center =CGPointMake(img.center.x-30, img.center.y); 
```

很简单的东西！

# javascript - '\n\t\r' == 0 是真的吗？

> ID：10376179
> 
> 赞同：36
> 
> 时间：2012-04-29T21:34:22.480
> 
> 标签：javascript

今天我在做一些实验的时候`==`，我无意中发现了这一点`"\n\t\r" == 0`。到底如何`"\n\t\r"`等于`0`，或`false`？

我所做的是：

```
var txt = "\n";  //new line
txt == 0;        //it gives me true 
```

这真的让我很恼火。所以我做了更多：

```
var txt = "\r";  //"return"
txt == 0;        //true

var txt = "\t";  //"tab"
txt == 0;        //true 
```

这根本没有意义。这是怎么回事？更疯狂的是：

```
//Checking for variable declared or not

var txt ="\n\t\r";
if(txt!=false){
    console.log("Variable is declared.");
}else{
    console.log("Variable is not declared.");
} 
```

它给我的是`Variable is not declared.`

它如何等于`0`, 或`false`???

* * *

## 回答 #1

> 赞同：41
> 
> 时间：2012-04-29T23:50:46.997

这种行为可能令人惊讶，但可以通过查看[规范](http://es5.github.com/)来解释。

我们必须看看在执行与[*等号*运算符](http://es5.github.com/#x11.9.1)的比较时会发生什么。确切的算法在[第 11.9.3 节](http://es5.github.com/#x11.9.3)中定义。

我构建了一个简单的工具来演示执行了哪些算法步骤：[https ://felix-kling.de/js-loose-comparison/](https://felix-kling.de/js-loose-comparison/)

* * *

### `string == integer`

我们必须查看的步骤是＃5：

> 5.如果`Type(x)`是String，`Type(y)`是Number，
> 返回比较的结果`ToNumber(x) == y`。

这意味着字符串`"\n"`( `"\r"`, `"\t"`) 首先转换为数字，然后与`0`.

字符串如何转换为数字？这在[第 9.3.1 节](http://es5.github.com/#x9.3.1)中进行了解释。简而言之，我们有：

> 的 MV（数学值）`StringNumericLiteral ::: StrWhiteSpace`是`0`。

其中`StrWhiteSpace`定义为

```
StrWhiteSpace :::
    StrWhiteSpaceChar StrWhiteSpace_opt

StrWhiteSpaceChar :::
    WhiteSpace
    LineTerminator 
```

这只是意味着包含空格字符和/或行终止符的字符串的数值是`0`.
哪些字符被视为空白字符在[第 7.3 节](http://es5.github.com/#x7.2)中定义。

* * *

### `string == boolean`

我们必须查看的步骤是#7：

> 7\. 如果 Type(y) 为 Boolean，则返回比较结果`x == ToNumber(y)`。

布尔值如何转换为数字非常简单：`true`become`1`和`false`become `0`。

之后我们将一个字符串与一个数字进行比较，这在上面已经解释过了。

* * *

`===`正如其他人所提到的，可以使用严格比较 ( ) 来避免这个“问题”。实际上，如果您知道自己在做什么并且想要这种行为，那么您应该只使用正常比较。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-04-29T21:38:29.177

因为 JavaScript 是一种松散类型的语言，它会尝试将比较的第一方类型转换为另一方，以便它们相互匹配。

任何不包含数字的字符串在与整数比较时变为 0，在与布尔值比较时变为真（在某些情况下除外）。

**[轻阅读材料。](https://developer.mozilla.org/en/JavaScript/Reference/Operators/Comparison_Operators)**

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-29T21:40:15.220

`txt`不是`Boolean`，所以永远不会`false`。不过也可以`undefined`。

```
var txt ="\n\t\r";
if(txt !== undefined) { //or just: if (txt)
    console.log("Variable is declared.");
} else {
    console.log("Variable is not declared.");
}
//=> will log: 'Variable is declared.' 
```

顺便说一句，*声明*的变量可能是`undefined`（例如`var txt;`）。

如果您进行更严格的比较（没有类型强制，使用`===`），您会看到

```
var txt = '\n'; txt === 0; //=> false
var txt = '\r'; txt === 0; //=> false
var txt = '\t'; txt === 0; //=> false 
```

[也可以看看](http://javascript.crockford.com/style2.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T21:41:52.823

原因是`"\n\t\r"`as`" "`被视为空字符串。如果您使用`==`它将返回`true`，但如果您使用`===`它将返回`false`。

如果你想测试是否存在，你应该使用类似的东西

```
if(typeof strName !== 'undefined') {
    /*do something with strName*/
} else {
    /*do something without it*/
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-30T00:51:36.587

每当您使用`== operator`and 尝试将字符串与数字进行比较时，字符串将首先转换为数字。因此：`alert("\n\r"==0) becomes: alert(Number("\n\r")==0)` 数字结构有点有趣。它将首先去除空格，然后确定数字是否不是数字。如果`NaN`，则结果为“ `NaN`”。如果字符串为空，则结果为 0。

```
alert(Number()) alerts 0
alert(Number("")) alerts 0
alert(Number(" \n \r \n \t")) alerts 0
alert(Number("blah")) alerts NaN
alert(Number("0xFF")) alerts 255
alert(Number("1E6")) alerts 1000000 
```

要检查结果是否为 NaN，请使用 isNaN()

```
Thus: alert(isNaN("blah")) alerts true
Thus: alert(isNaN("")) alerts false
Thus: alert(isNaN("\n")) alerts false
Thus: alert(isNaN(" ")) alerts false 
```

但是请注意，NaN 永远不会等于 NaN：

```
var nan=Number("geh");alert(nan==nan);  alerts false 
```

**更新：**

如果要检查双方是否为 NaN，则首先将两者都转换为布尔值，如下所示：

```
var nan=Number("geh");alert(!!nan==!!nan); alerts true 
```

**或者更好**

```
var nan=Number("geh");
alert(isNaN(nan)&& isNaN(nan)); 
```

# c - 在 CentOS 上增加管道内部缓冲区大小

> ID：10376180
> 
> 赞同：1
> 
> 时间：2012-04-29T21:34:22.473
> 
> 标签：c, linux, multithreading, ipc, pipe

我正在使用异步管道进行进程间通信（为了简化，我删除了错误检查）

```
int pipe_fd[2];
pipe(pipe_fd);
int fdflags = fcntl(pipe_fd[1], F_GETFL, 0);
fdflags |= O_NONBLOCK;
fcntl(pipe_fd[1], F_SETFL, fdflags); 
```

我正在寻找一种增加管道内部缓冲区大小的方法。我知道可以通过以下方式使用 Kernel >= 2.6.35：

```
fcntl(fd, F_SETPIPE_SZ, size); 
```

或写信至：

```
/proc/sys/fs/pipe-max-size 
```

但我正在使用内核 2.6.18 开发 CentOS 5。是否可以使用 Kernel 2.6.18 增加管道内部缓冲区大小？如果是，该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-22T20:29:20.957

在 CentoS 5 的内核上，管道固定为 64 KB

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-24T22:15:56.510

```
/proc/sys/fs/pipe-max-size sets the limit for fcntl F_SETPIPE_SZ 
```

只是改变`/proc/sys/fs/pipe-max-size`没有区别 `ulimit -p`也没有用

你必须实际使用`fcntl F_SETPIPE_SZ`

从我所看到`pipe-max-size`的默认值为 1MB，对于任何疯狂的管道需求来说应该绰绰有余

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T12:36:02.427

除非您只想在 C 代码中执行此操作，否则一种选择是在设置限制后运行程序的包装器 shell 脚本中使用 ulimit -p。

# ios - 需要帮助在多个视图上实现滚动条

> ID：10376181
> 
> 赞同：1
> 
> 时间：2012-04-29T21:34:49.467
> 
> 标签：ios, xcode, uiscrollview, interface-builder

好的，所以我是新手，一直在尝试寻找解决方案，但无济于事。我想将滚动条添加到应用程序的多个页面，但是当我添加插座时，它不会显示在侧面，因此我可以链接 2。它显示的唯一页面是故事板中的默认视图。

在 viewcontroller.h 我有。

```
 @interface ViewController : UIViewController {

    IBOutlet UIScrollView *Scroller;

} 
```

在 viewcontroller.m 我有...

```
- (void)viewDidLoad

{

    [super viewDidLoad];

    [Scroller setScrollEnabled:YES];

    [Scroller setContentSize:CGSizeMake(320, 1000)]; 
```

现在，当我制作另一个视图控制器时，我可以将其链接到的屏幕右侧的插座不存在。我需要做什么才能将插座链接到滚动条？任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:56:43.737

当滚动条的内容超出其屏幕空间时，滚动条会自动添加到相应的控件中。我认为您正在尝试添加一些操作系统的固有特性。

您希望向什么添加滚动条？

此外，您正在实例化一个 UIScrollView，它是 UIView 的一个专门子类。它专门用于处理大于屏幕视口的内容的滚动（如上所述）。

# python - AppEngine 应用程序一旦在线就无法制作 cookie，但在 localhost 上可以正常工作——对吗？

> ID：10376185
> 
> 赞同：1
> 
> 时间：2012-04-29T21:35:12.530
> 
> 标签：python, google-app-engine

我的问题如下：我正在尝试制作一种论坛，我想通过一个简单的 cookie 会话模式对用户进行身份验证。为此，我正在使用《使用 App Engine》一书中的会话实用程序。我的问题是，虽然当我在本地主机上尝试它时 thisis 工作得很好，但有多个用户登录，但我无法让它在线工作。问题是没有创建cookie。有没有人见过这样的东西？抱歉，如果我遗漏了一些明显的东西，我刚开始使用应用引擎

更新我的设置cookie的代码是这样的，

```
 self.sid = str(random.random())[5:]+str(random.random())[5:]
        self.key = "session-" + self.sid
        logging.info("Creating session "+self.key);
        self.session = dict()
        memcache.add(self.key, self.session, 3600)
        self.cookie[COOKIE_NAME] = self.sid
        self.cookie[COOKIE_NAME]['path'] = "/"
        self.cookie[COOKIE_NAME]["domain"] = "example.appspot.com"
        # Send the Cookie header to the browser
        print self.cookie 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T17:52:57.623

我在几个项目中使用了[https://github.com/dound/gae-sessions 。](https://github.com/dound/gae-sessions)奇迹般有效！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:59:03.390

你看过[https://github.com/dound/gae-sessions](https://github.com/dound/gae-sessions)吗？我发现启动和运行非常简单，并且为您完成了很多繁琐的工作。

# android - Android：线程上的 NetworkOnMainThreadException

> ID：10376186
> 
> 赞同：0
> 
> 时间：2012-04-29T21:35:18.070
> 
> 标签：android, sockets, networking, service

正如标题所说。启动使用套接字的服务时出现此错误。怎么会？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:40:57.577

因为您试图在主应用程序线程上使用套接字，可能来自`onStartCommand()`. 请在后台线程上进行网络 I/O。

# javascript - 如何防止fancybox关闭？想让用户点击关闭按钮而不是浏览器上的任何位置

> ID：10376194
> 
> 赞同：1
> 
> 时间：2012-04-29T21:36:22.743
> 
> 标签：javascript, jquery, html, css

你好 StackOverflowers！

我正在整理的网站有一些问题，联系表格在一个花式框中，每当您单击它关闭的表单时，这显然是我不想要的，因为我希望该表格可以在花式框中使用？

我的网站的链接是：[http ://raychampionfitness.com](http://raychampionfitness.com)

我使用了在 stackoverflow 上找到的其他示例，声称它们可以工作，但它们现在完全可以工作吗？

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T21:51:43.870

这需要设置为 false 而不是 true：

```
/* Using custom settings */
$("a#inline").fancybox({
    'hideOnContentClick': true
}); 
```

此外，您在该页面上加载了 jQuery 两次 - 一次由 wordpress 自动加载，看起来您可能在主题或其他内容中添加了另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-24T14:52:02.770

如果有人使用新的 v2 的 fancybox，你现在必须设置：

```
modal: true 
```

# c++ - 使用 std::fstream 读取文本文件时如何使用非默认分隔符？

> ID：10376199
> 
> 赞同：18
> 
> 时间：2012-04-29T21:36:29.503
> 
> 标签：c++, fstream, ifstream

在我的 C++ 代码中，我想从文本文件 (*.txt) 中读取并标记每个条目。更具体地说，我希望能够从文件中读取单个单词，例如“格式”、“堆栈”、“杰森”、“欧洲”*等*。

我选择使用`fstream`来执行此任务，但我不知道如何将它的分隔符设置为我想要使用的分隔符（空格、，`\n`以及连字符甚至撇号，如“麦当劳”中的）。我认为空格`\n`是默认分隔符，但连字符不是，但我想将它们视为分隔符，以便在解析文件时，我会在“blah blah xxx animal--cat”中得到简单的“blah”、“等等”，“xxx”，“动物”，“猫”。

也就是说，我希望能够从“stack-overflow”、“you're”*等中获取两个字符串，*并且仍然能够同时保持`\n`和空格作为分隔符。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-29T22:10:01.770

istream 将“空白”视为分隔符。它使用语言环境来告诉它哪些字符是空格。反过来，语言环境包括对`facet`字符类型进行分类的 ctype。这样的方面可能看起来像这样：

```
#include <locale>
#include <iostream>
#include <algorithm>
#include <iterator>
#include <vector>
#include <sstream>

class my_ctype : public
std::ctype<char>
{
    mask my_table[table_size];
public:
    my_ctype(size_t refs = 0)  
        : std::ctype<char>(&my_table[0], false, refs)
    {
        std::copy_n(classic_table(), table_size, my_table);
        my_table['-'] = (mask)space;
        my_table['\''] = (mask)space;
    }
}; 
```

还有一个小测试程序来证明它有效：

```
int main() {
    std::istringstream input("This is some input from McDonald's and Burger-King.");
    std::locale x(std::locale::classic(), new my_ctype);
    input.imbue(x);

    std::copy(std::istream_iterator<std::string>(input),
        std::istream_iterator<std::string>(),
        std::ostream_iterator<std::string>(std::cout, "\n"));

    return 0;
} 
```

结果：

```
This
is
some
input
from
McDonald
s
and
Burger
King. 
```

`istream_iterator<string>`用于`>>`从流中读取单个字符串，因此如果直接使用它们，应该会得到相同的结果。您需要包括的部分是创建语言环境并`imbue`用于使流使用该语言环境。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T21:48:57.660

您可以使用

```
istream::getline(char* buffer, steamsize maxchars, char delim) 
```

虽然这只支持单个分隔符。要进一步拆分不同分隔符上的行，您可以使用

```
char* strtok(char* inString, const char* delims) 
```

这需要多个分隔符。当您使用 strtok 时，您只需第一次将缓冲区的地址传递给它 - 之后只需传入一个空值，它就会从它给您的最后一个令牌中为您提供下一个令牌，当没有时返回一个空指针更多的。

编辑：一个具体的实现会是这样的

```
char buffer[120]; //this size is dependent on what you expect the file to contain
while (!myIstream.eofbit) //I may have forgotten the exact syntax of the end bit
{
    myIstream.getline(buffer, 120); //using default delimiter of \n
    char* tokBuffer;
    tokBuffer = strtok(buffer, "'- ");
    while (tokBuffer != null) {
        cout << "token is: " << tokBuffer << "\n";
        tokBuffer = strtok(null, "'- "); //I don't need to pass in the buffer again because it remembers the first time I called it
    }
} 
```

# objective-c - Objective-C 接口/实现范式：在实现中而不是在接口中有方法是什么意思？

> ID：10376200
> 
> 赞同：1
> 
> 时间：2012-04-29T21:36:36.797
> 
> 标签：objective-c

我试图了解如何在 Objective-C 中强制执行访问。我想我已经掌握了基础知识，但最近我意识到我不明白一个方法存在于实现中但不存在于接口中意味着什么。这是否意味着该方法不是对象私有的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T21:39:20.770

这意味着该方法*是*对象私有的，至少按照惯例是这样。ObjC 中没有“可强制执行的”私有方法，但如果该方法没有出现在接口中，那么其他人不应该调用它（并且它会生成一个编译器警告来尝试）。

# bash - 首选的 Bash shebang 是什么？

> ID：10376206
> 
> 赞同：1346
> 
> 时间：2012-04-29T21:37:00.027
> 
> 标签：bash, shebang

对于大多数用途，客观上是否有任何`Bash`舍邦比其他更好？

*   `#!/usr/bin/env bash`
*   `#!/bin/bash`
*   `#!/bin/sh`
*   `#!/bin/sh -`
*   ETC

我隐约记得很久以前听说在末尾添加破折号可以防止有人将命令传递给您的脚本，但找不到任何详细信息。

* * *

## 回答 #1

> 赞同：1797
> 
> 时间：2012-04-30T12:14:50.937

您应该使用**`#!/usr/bin/env bash`**可移植性[：](https://en.wikipedia.org/w/index.php?title=Shebang_(Unix)&oldid=878552871#Portability)不同的 *nixes 放在`bash`不同的地方，使用`/usr/bin/env`是一种解决方法来运行`bash`在`PATH`. 而**[`sh`不是`bash`](https://mywiki.wooledge.org/BashGuide/CommandsAndArguments#Scripts)**。

* * *

## 回答 #2

> 赞同：125
> 
> 时间：2018-10-17T17:49:37.440

我建议使用：

```
#!/bin/bash 
```

它不是 100% 可移植的（一些系统放置`bash`在.`/bin``#!/bin/bash``/bin/bash`

替代方案：

```
#!/usr/bin/env bash 
```

已被建议 - 但不能保证该`env`命令在`/usr/bin`（而且我使用了不存在的系统）。此外，此表单将使用`bash`当前 users 中的第一个实例`$PATH`，这可能不是 bash shell 的合适版本。

（但是`/usr/bin/env`应该可以在任何相当现代的系统上工作，要么是因为`env`它在其中，要么是`/usr/bin`因为系统做了一些事情来使它工作。我上面提到的系统是 SunOS 4，我可能已经有 25 年没有使用它了。）

如果您需要在没有 的系统上运行脚本`/bin/bash`，您可以修改脚本以指向正确的位置（这确实不方便）。

在我对[这个问题](https://unix.stackexchange.com/q/29608/10454)[的回答](https://unix.stackexchange.com/a/29620/10454)中，我已经更深入地讨论了权衡取舍。

一个有点模糊的更新：我使用的一个系统[Termux](https://termux.com/)是一个在 Android 下运行的类似桌面 Linux 的层，没有`/bin/bash`( `bash`is `/data/data/com.termux/files/usr/bin/bash`) - 但它有特殊的处理来支持`#!/bin/bash`。

* * *

## 回答 #3

> 赞同：88
> 
> 时间：2012-04-29T21:39:45.507

`/bin/sh` is usually a link to the system's default shell, which is often `bash` but on, e.g., Debian systems is the lighter weight `dash`. Either way, the original Bourne shell is `sh`, so if your script uses some `bash` (2nd generation, "Bourne Again sh") specific features (`[[ ]]` tests, arrays, various sugary things, etc.), then you should be more specific and use the later. This way, on systems where bash is not installed, your script won't run. I understand there may be an exciting trilogy of films about this evolution...but that could be hearsay.

Also note that when evoked as `sh`, `bash` to some extent [behaves as POSIX standard](http://wiki.bash-hackers.org/scripting/bashbehaviour) `sh` (see also [the GNU docs](https://www.gnu.org/software/bash/manual/bashref.html#Bash-POSIX-Mode) about this).

* * *

## 回答 #4

> 赞同：33
> 
> 时间：2016-10-26T19:55:26.357

使用 shebang 行调用适当的解释器不仅适用于 BASH。您可以将 shebang 用于系统上的任何解释语言，例如 Perl、Python、PHP (CLI) 和许多其他语言。顺便说一句，shebang

```
#!/bin/sh - 
```

（也可以是两个破折号，即`--`）结束 bash 选项之后的所有内容都将被视为文件名和参数。

使用该`env`命令使您的脚本可移植，并允许您为脚本设置自定义环境，因此可移植脚本应使用

```
#!/usr/bin/env bash 
```

或者对于任何语言，例如 Perl

```
#!/usr/bin/env perl 
```

请务必查看以下`man`页面`bash`：

```
man bash 
```

和`env`：

```
man env 
```

注意：在 Debian 和基于 Debian 的系统上，例如 Ubuntu，`sh`链接到`dash`not `bash`. 由于所有系统脚本都使用`sh`. 根据 Debian 的说法，这允许 bash 增长并使系统保持稳定。

此外，为了保持调用 *nix 就像我从不在 shebang 调用的脚本上使用文件扩展名一样，因为你不能像在 Windows 上那样省略可执行文件调用的扩展名。file 命令可以将其识别为脚本。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-04-29T22:36:34.793

这实际上取决于您如何编写 bash 脚本。如果您`/bin/sh`的符号链接到 bash，当 bash 被调用为 时`sh`，[某些功能不可用](http://www.gnu.org/software/bash/manual/bashref.html#Bash-POSIX-Mode)。

如果您想要特定于 bash 的非 POSIX 功能，请使用`#!/bin/bash`

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2021-08-27T16:52:51.710

为 #!/usr/bin/env 方法再投一票。我经常使用虚拟环境，就我而言，我使用安装在 virtualenv 中的 python。使用 #!/usr/bin/python 可能不是我想要的 python。我使用 #!/usr/bin/env python 得到了正确的 python。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-02-09T07:05:10.290

`#!/bin/sh`

因为大多数脚本不需要特定的 bash 功能，应该为 sh 编写。

此外，这使得脚本可以在默认情况下没有 bash 的 BSD 上运行。

# java - 如何处理 hashCode 方法实现中的溢出

> ID：10376207
> 
> 赞同：1
> 
> 时间：2012-04-29T21:37:12.913
> 
> 标签：java, overflow

我有一个类有两种方法：getY() 和 getX()（它是一种地图）。
Y 和 X 的域是 [-1000.0, + 1000.0]，它们是双精度数。
我写了一个 hashCode() 方法：

```
@Override
public int hashCode() 
{
    int hash=(int) (getX()/EPSILON);
    hash+= (int) ( (1000.0/EPSILON)*getY() );
    return hash;
} 
```

其中 EPSILON 是允许的最大误差。
但问题是值太高，如果 X=1000.0 和 Y=1000.0 出现溢出。如何编写一个 hashCode() 方法来处理溢出并且在每种情况下仍然能够为两个不同的对象返回两个哈希码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:47:10.810

这就是你应该如何为双打做的（见[这里](https://stackoverflow.com/questions/2827612/effective-java-hashcode-implementation)）：

```
long t = Double.doubleToLongBits(d);
result = prime * result + (int) (t ^ (t >>> 32)); 
```

对于`prime`使用较小的素数，标准值为 37。

用另一个素数初始化`result`，不要从零开始。标准是17。

这是来自 Josh Bloch 的 Effective Java。

至于您的直接问题：

您通过忽略它来处理溢出。在哈希码计算中欢迎溢出。

当然，您不能保证每个可能的值都有不同的哈希值。目标是良好的分散性，而不是唯一性。

# callback - 使用回调签名的 Flickr API JSONP

> ID：10376208
> 
> 赞同：1
> 
> 时间：2012-04-29T21:37:28.297
> 
> 标签：callback, jsonp, call, flickr, signed

Flickr API 有问题。简而言之，我有一个运行良好的签名呼叫，但我需要为其添加一个回调。添加`&callback=?`到字符串会导致 API 返回`jsonFlickrApi({"stat":"fail", "code":96, "message":"Invalid signature"})`

所以我不确定如何最好地处理它。通话需要签名，因为它正在抓取私人照片。有没有办法构造我的回调函数来避免这个问题？我一直将回调放在格式参数之后，并尝试在字符串的末尾。两者都返回相同的错误。我放错地方了吗？

谢谢你的帮助！

jsFiddle：http://jsfiddle.net/danielredwood/RzkzY/14/

```
function imgBuilder(data){
    $.each(data.photos.photo,function(i,rPhoto){
        var base   = 'http://farm' + rPhoto.farm + '.static.flickr.com/' + rPhoto.server + '/' + rPhoto.id + '_' + rPhoto.secret,
            thumb  = base + '_m.jpg',
            medium = base + '.jpg',
            large  = base + '_b.jpg',
            imageM = '<a class="fancybox" rel="group" ' + 'title="' + rPhoto.title + '" href="'+ medium +'"><img src="' + thumb + '" alt="' + rPhoto.title + '"/></a>',
            imageL = '<a class="fancybox" rel="group" ' + 'title="' + rPhoto.title + '" href="'+ large +'"><img src="' + thumb + '" alt="' + rPhoto.title + '"/></a>';

        $(imageM).appendTo("#test");
    });
}

/* Need to add callback to the string?? */ 
$.getJSON("http://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=e3571d0891d2ad7f6b2b44611b8126ee&user_id=26545877%40N04&tags=terminal+5&per_page=25&format=json&auth_token=72157629563488548-bdcd1a2ad2f288df&api_sig=944625b8e72de2b3b9200a892263e1b1", imgBuilder);​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-04T06:20:45.480

我在使用 Remember the Milk API 时遇到过类似的情况，我认为它是基于 Flickr API 的。

通过覆盖 jQuery 对 JSONP 请求的默认设置，我成功地进行了调用。

jQuery默认为请求添加一个`callback=`and参数。`_=`Flickr 将在计算您的请求签名时包含这些参数。它与您计算的不匹配`api_sig`，因此请求失败。

`callback=`用于将响应与您的回调函数相关联，由 jQuery 生成，因此您不能将其包含在签名计算中，但您可以覆盖默认行为并通过包含自行指定

```
jsonp: false,
jsonpCallback: 'my_callback_name', 
```

作为`$.ajax`调用的参数。

我假设`'my_callback_name'`对于包含 ajax 调用的页面的每次加载都应该是唯一的。计算 api_sig时应包含`callback='my_callback_name'`在参数中。

`_=`是由 jQuery 添加到 URL 以使每个请求唯一的时间戳，在计算 api_sig 时您也无法知道。您可以通过添加来防止它被添加

```
cache: true, 
```

这将停止`_=`添加到您的 URL（并使`api_sig`.

# jquery - 加载新页面之前未运行 Ajax 调用

> ID：10376216
> 
> 赞同：0
> 
> 时间：2012-04-29T21:38:11.353
> 
> 标签：jquery, html, http, get, analytics

也许我在这里遗漏了一些简单的东西，但这让我感到沮丧。所以我需要做的是在单击链接周围的这个 div 时更新我的​​服务器上的某些内容（我正在通过分析进行单击）。我想我会做一个点击事件并做一个ajax调用（通过get）。

```
$.get("stat/418491289); 
```

但问题是，没有拨打电话。用户被发送到下一页并且未调用 get 调用未完成/调用。我会知道，因为在服务器上它会更新数据库。也许我不应该进行 ajax 调用，或者我应该做些什么，但我不确定。我现在无法暂停链接操作，因为它包含在 div 中。理想情况下，我想做的是关闭请求，然后不用担心。更新统计数据并不重要，所以如果它在 1% 的时间内不能正常工作，那就没问题了。我该怎么做？

我想我可能不是很清楚。我要问的是：在浏览器转到链接页面之前，我可以通过 javascript 向我的服务器发出请求吗？我不在乎响应是什么，我只需要发送请求。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:00:24.593

如果我清楚地理解了这个问题，您需要使用它`preventDefault`来取消链接的默认行为，例如

```
$("#linkID").click(function(e){
 e.preventDefault();
 //ajax call here
}); 
```

或放一个`return false;`

```
$("#linkID").click(function(){

     //ajax call here
     return false;
    }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:49:53.497

您是否检查了页面的网络流量以查看是否完全发出了 get 请求（而不是由服务器处理）？可能 URL 不正确，您会收到 404 响应。

这也可能是您处理点击事件的方式。如果您的 ajax 请求是从 div 点击处理程序发出的，并且用户正在点击一个链接 ()，那么该链接将首先处理将用户带到页面的点击。我不确定默认链接处理程序是否会将点击传播到父元素。

如果这是问题所在，可能更容易查看一些代码来帮助找到问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T21:58:09.993

您的网址缺少第二个引号。

# windows-phone-7 - WP7 如何更改 XNA 歌曲音量？

> ID：10376219
> 
> 赞同：0
> 
> 时间：2012-04-29T21:38:20.197
> 
> 标签：windows-phone-7, xna

所以我想让用户从他们的媒体库中选择一首歌曲并以可变音量播放。据我了解，以下情况属实：

*   通过 MediaLibrary 的实例访问歌曲
*   可以使用 MediaPlayer.Play() 播放歌曲
*   更改 MediaPlayer.Volume 对 MediaLibrary 中的歌曲没有影响（从 XNA 4.0 开始）
*   有一个 System.Windows.Controls.MediaElement 控件，但它的源是流或 Uri

有没有人找到解决这些限制的方法，以不同的音量播放 MediaLibary 中的歌曲？我只能想到两种可能的方法。一，以某种方式将 Stream 包裹在 Song 周围并将其提供给 MediaElement（直接或通过将 Song 复制到隔离存储并从那里流式传输），或者二，使用 Uri 访问 MediaLibary。有谁知道这是否可能？

另外，我还没有看过 Microsoft.Phone.BackgroundAudio，那里有什么有用的吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T00:28:56.097

用户可以完全控制手机发出的音量。

的值`MediaPlayer.Volume`与用户设置的音量有关。（我总是将其设置为 1，但还没有发现现实生活需要将其设置为其他任何值。）

是的，这意味着你不能做你想做的事。
如果可以的话，这意味着即使用户将设备上的音量调到非常安静，您的应用程序也会突然发出更大的声音。这不是可预测的用户体验，也可能不是用户想要的。

不，背景音频别无选择，不，您无法获取 MediaLibrary 中项目的 URI。

# php - jPlayer - 在完全缓冲之前寻找轨道部分时的不良结果

> ID：10376220
> 
> 赞同：0
> 
> 时间：2012-04-29T21:38:20.293
> 
> 标签：php, javascript, jplayer

我正在使用 jPlayer，流式受保护的媒体，如果我在曲目完全缓冲从头开始播放的曲目之前单击搜索栏的一部分，但是，进度条仍保留在我单击的位置。

有什么办法可以避免这种情况，我已经调查了内容范围等，并遇到了以下解决方案，但我并不完全在那里：

```
header("Content-Type: ".$mimeTypes[$ext]);
header('Content-Disposition: attachment; filename="'.$fileName.'"');
header('Accept-Ranges: bytes');
//header('Content-Range: bytes');

$begin  = 0;
$end    = $fsize - 1;

if (preg_match('/bytes=\h*(\d+)-(\d*)[\D.*]?/i', $_SERVER['HTTP_RANGE'], $matches))
{
    $begin  = intval($matches[1]);
    if (!empty($matches[2]))
    {
        $end    = intval($matches[2]);
    }
}

header('Content-Length:' . (($end - $begin) + 1));
header("Content-Range: bytes $begin-$end/$fsize"); 
```

在 smartReadFile.php 中更正的代码的帮助下，跟踪进度条确实可以工作：

[https://groups.google.com/forum/#!msg/jplayer/nSM2UmnSKKA/bC-l3k0pCPMJ](https://groups.google.com/forum/#!msg/jplayer/nSM2UmnSKKA/bC-l3k0pCPMJ)

如果我给它几秒钟缓冲它可以正常工作。

jPlayer 中是否有一种方法可以在搜索栏获取数据之前进行预缓冲？

```
$(document).ready(function(){

  $("#jquery_jplayer_1").jPlayer({

    swfPath: "js",
    supplied: "mp3, m4a, oga"
  });

});

function playTrack(id,title) {

$("#jquery_jplayer_1").jPlayer("setMedia", { mp3: "/download.php?track=" + id });
$("#jp-audio-container .track-name").text(title);
$("#jquery_jplayer_1").jPlayer("play");

var span = document.getElementById('trackTitle');

while( span.firstChild ) {

    span.removeChild( span.firstChild );

}

span.appendChild( document.createTextNode("Now playing: " + title) );

} 
```

有什么想法可以解决这个问题吗？

非常感谢。

# iphone - 使用 ShareKit 将视频发布到 Facebook？

> ID：10376228
> 
> 赞同：1
> 
> 时间：2012-04-29T21:39:06.840
> 
> 标签：iphone, facebook, facebook-graph-api, video, sharekit

是否可以使用 ShareKit 的一些分支将视频发布到 Facebook？我不想自己搞乱整个 Facebook 图形 API，但希望能够发布视频。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T09:03:54.163

[ShareKit 2.0 repo](https://github.com/ShareKit/ShareKit)中有一个针对某些服务（包括 Facebook）的视频共享的[拉取请求。](https://github.com/ShareKit/ShareKit/pull/212)它还没有合并，因为有一些问题没有解决，最严重的一个是如果你分享大视频，它会耗尽设备的内存。

但这对你来说可能是一个好的开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T06:22:38.760

我建议不要使用sharekit，而是为此使用FBGraphAPI ...

以下是以下步骤，您可以在 Facebook 上发布视频。

在 .h 文件中

```
#import "FbGraph.h"
#import "FbGraphFile.h"
#import "JSON.h"
#import <MobileCoreServices/MobileCoreServices.h>

@interface ViewController : UIViewController
{
    FbGraph                 *FB_Graph;
    FbGraphResponse         *FB_Graph_Response;
    FbGraphFile             *FB_Graph_File;
}

-(IBAction)btnShareVideoPress:(id)sender;

@end 
```

在 .m 文件中调用此方法.....

```
- (void)viewDidAppear:(BOOL)animated
{
   [super viewDidAppear:animated];

  NSString *ClientID = @"197556430726736";

  FB_Graph = [[FbGraph alloc]initWithFbClientID:ClientID];

  [FB_Graph authenticateUserWithCallbackObject:self      andSelector:@selector(fbGraphCallback:) andExtendedPermissions:@"user_photos,user_videos,publish_stream,offline_access,user_checkins,friends_checkins"];

 }

-(IBAction)btnShareVideoPress:(id)sender
{

NSString *path = [[NSBundle mainBundle] pathForResource:@"YouTubeTest" ofType:@"m4v"]; 
NSURL *videoURL1=[NSURL fileURLWithPath:path];

NSMutableDictionary *variables = [[NSMutableDictionary alloc]init];

FB_Graph_File = [[[FbGraphFile alloc] initwithURL:videoURL1]retain];

[variables setObject:FB_Graph_File forKey:@"file"];

[variables setObject:@"Test video upload 1" forKey:@"message"];
[variables setObject:@"video" forKey:@"MediaType"];
[FB_Graph doGraphPost:@"me/videos" withPostVars:variables];

FbGraphResponse *fb_graphresponse = [FB_Graph doGraphGet:@"me/videos/uploaded" withGetVars:variables];  

NSLog(@"postPictureButtonPressed:  %@", fb_graphresponse.htmlResponse);

 } 
```

# android - 按 Ctrl + F11 时内容消失？

> ID：10376232
> 
> 赞同：0
> 
> 时间：2012-04-29T21:39:29.887
> 
> 标签：android, android-layout, screen-orientation, tablerow

我有一个选项菜单，其中一个选项在单击时会为结果启动一个新活动。因此，当此活动被销毁时，a 获取结果并根据 onActivityResult 方法中的结果创建一个表格行，并且表格行出现在屏幕上，但是当我按`Ctrl`+时`F11`，内容不存在。我知道如果我在 OnCreate 方法中创建表格行，这将起作用，但为什么呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:45:37.783

`Ctrl`+`F11`改变方向。您应该阅读更多关于 Activity 生命周期[http://developer.android.com/guide/topics/fundamentals/activities.html#Lifecycle](http://developer.android.com/guide/topics/fundamentals/activities.html#Lifecycle)以更好地理解它。基本上，方向变化会导致您的活动被破坏并重新创建。再次调用 OnCreate 方法，但它不会恢复您在 onActivityResult 中创建的表。

您还可以禁用方向更改，请参阅[如何在 Android 上禁用方向更改？](https://stackoverflow.com/questions/1512045/how-to-disable-orientation-change-in-android)

# php - Firefox 12 not reloading pages after redirect

> ID：10376233
> 
> 赞同：12
> 
> 时间：2012-04-29T21:39:36.860
> 
> 标签：php, firefox, caching

![Flowchart diagram](../Images/8b5234ca63e72dc5d0a37b838dddc0b3.png)I have written a login script to redirect back to the index page once you have logged in, and thus reloading the index page for a logged in user, it just displays the previously loaded index page. The new Firefox 12 update doesn't reload the index page once the login script has redirected it back. This problem occurs again and again throughout my site when the processing script redirects Firefox back to a page it has already loaded.

Ive tried turning off caching in PHP with:

```
<?php
header( "Last-Modified: " . gmdate( "D, j M Y H:i:s" ) . " GMT" );
header( "Expires: " . gmdate( "D, j M Y H:i:s", time() ) . " GMT" );
header( "Cache-Control: no-store, no-cache, must-revalidate" );
header( "Cache-Control: post-check=0, pre-check=0", FALSE );
header( "Pragma: no-cache" ); ?> 
```

and in `.htaccess` with:

```
<filesMatch "\.(php)$">
FileETag None
<ifModule mod_headers.c>
Header unset ETag
Header set Cache-Control "max-age=0, no-cache, no-store, must-revalidate"
Header set Pragma "no-cache"
Header set Expires "Wed, 11 Jan 1984 05:00:00 GMT"
</ifModule>
</filesMatch> 
```

Can anyone explain why Firefox 12.0 is doing this? It doesn't do it in other browsers. How can it be solved as soon as possible?

Thanks.

UPDATE: It worked fine in the previous version of Firefox and all other browsers. All it's doing is redirecting back to the index page where it should reload for the newly logged in user, yet it still displays the original home page. When you click a link to the homepage it will then load the homepage properly for the user.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-03T11:31:11.277

从 Firefox 11 升级到 12 后，我注意到了同样的问题。我的购物车不再正常工作，除非我在每个请求的 URL 上附加一个随机字符串。

[http://support.mozilla.org/en-US/questions/926043](http://support.mozilla.org/en-US/questions/926043)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-08T14:55:15.930

刚刚设置

```
header("Cache-Control: no-cache"); 
```

在你之前

```
header("Location:".$url); 
```

问候，丹尼尔

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-03T17:19:49.517

您应该在重定向 URL 中添加时间戳：

```
http://yourdomain.com/index.php?time=0205122019 
```

我认为这是一个缓存问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T07:03:25.057

我在其他帖子中看到的一个有趣的技巧是关于防止 FF 缓存页面。这是一个较旧的文档，但可能仍然适用：（https://developer.mozilla.org/en/Using_Firefox_1.5_caching），说 FF 不会缓存带有 unload 或 onbeforeunload 事件的页面。

添加一个什么都不做的 onbeforeunload 事件怎么样：

```
<script>
    window.onbeforeunload = function(){} //add onbeforeunload
</script> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-30T00:53:22.460

然后使用 javascript 进行重定向：

```
<?php 
    $url = "/index.php";
    echo "<script type='text/javascript'>
            window.location='" . $url . "';
          </script>";
?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-30T05:24:15.303

有时 php 重定向工作得更好/

```
 header( "Location: index.php" ) ;
 header ("Content-Length: 0");
 exit; 
```

# php - 使用 DATE_ADD() 时的 SQL 语法错误

> ID：10376236
> 
> 赞同：2
> 
> 时间：2012-04-29T21:39:49.080
> 
> 标签：php, mysql, sql

所以我试图提前 24 小时以上返回所有约会。我很肯定代码中的错误是围绕 DATE_ADD 的东西，所以我知道 PHP 变量设置正确。我想我只是在想 DATE_ADD 错误。我还尝试了几种括号变体，但都没有运气。只是 CURDATE() 有效。谢谢你的帮助！

```
$sql =  "   SELECT DISTINCT timeBlocks.date
            FROM timeBlocks
            WHERE timeBlocks.location = '".$appointmentLocation."' AND timeBlocks.school = '".$_SESSION["school"]."' AND timeBlocks.date >= DATE_ADD(curdate(), INTERVAL 1 YEAR)
            ORDER BY timeBlocks.date ASC;"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:44:32.377

也许这太明显了，但它说`INTERVAL 1 YEAR`的是 24 小时而不是 24 小时。

# html - Change defined textfield properties

> ID：10376237
> 
> 赞同：0
> 
> 时间：2012-04-29T21:39:54.707
> 
> 标签：html, ruby-on-rails

I have a free text field defines as follows

```
t.text :freeText 
```

in the gui it is defined

```
<p>
  <b>Freetext:</b>
  <%= @recipe.freeText %>
</p> 
```

I get a textfield on the html. I want to be able to present large input text with multiline (kind of like JTextArea instead of JTextField). How do I declare it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:59:39.493

您可以使用[text_area](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-text_area)标签助手，如下所示：

```
<% form_for(@recipe) do |f| %>
    <%= f.text_area :freeText, :html => {:cols => "40", :rows => "10"} %> 
<% end %> 
```

顺便说一句，请阅读 Ruby 风格指南以了解如何正确命名变量（以及其他内容）。以下来自 GitHub 的内容很棒[。](https://github.com/styleguide/ruby)

# iphone - 在方法执行期间强制显示图形更改

> ID：10376247
> 
> 赞同：0
> 
> 时间：2012-04-29T21:40:41.130
> 
> 标签：iphone, alpha

我有一个简单的表格。有许多元素。我希望用户看到显示中某些元素的短暂变化。我设置了更改（更改多个对象的 alpha），在数据库中做一些工作，睡眠（1）恢复 alpha 设置，然后继续。睡眠 (1) 非常明显，但对象没有明显变化。

我假设由于睡眠在我的方法中，所以它假设该方法必须在更新显示之前完成。有没有办法强制显示图形更改？

非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:58:21.413

主线程正在运行一个所谓的运行循环。它基本上是这样工作的：

*   查询传入事件（触摸、计时器、可能是 I/O 等）。
*   对这些事件做出反应。
*   更新用户界面。
*   重复。

您的代码通常在“对事件做出反应”阶段运行。您更改了 UI 对象，但是当您休眠时，“更新 UI”部分无法执行，休眠已完成。只要您在主线程上休眠，就不会发生 UI 更新或动画，也不会处理任何触摸。这就是为什么你永远不会阻塞主线程的原因。

因此，您需要将您的方案更改为异步的，例如使用[`performSelector:withObject:afterDelay:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelector%3awithObject%3aafterDelay%3a)or [`dispatch_after`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/dispatch_after.3.html)。或者，如果您只是在做简单的动画，您可能想使用[`animateWithDuration:animations:completion:`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/clm/UIView/animateWithDuration%3aanimations%3acompletion%3a)和朋友。

如果你需要做一些不能异步完成的事情，你想在不同的线程中运行它。然后在主线程上进行 UI 更新，使用[`performSelectorOnMainThread:withObject:waitUntilDone:`](https://developer.apple.com/library/ios/documentation/Cocoa/Reference/Foundation/Classes/nsobject_Class/Reference/Reference.html#//apple_ref/occ/instm/NSObject/performSelectorOnMainThread%3awithObject%3awaitUntilDone%3a)or[`dispatch_sync`或`dispatch_async`](http://developer.apple.com/library/mac/#documentation/Darwin/Reference/Manpages/man3/dispatch_sync.3.html)（几乎所有 UI 更新都需要在主线程上完成）。

# php - Remotly logging into Managebac

> ID：10376250
> 
> 赞同：0
> 
> 时间：2012-04-29T21:41:20.157
> 
> 标签：php, curl

First of all, I want to make clear that I've tried many different ways and read quite a lot of articles about this, but none worked completely.

I've got to the point, where I successfully get the cookies by cURL, but when I try to actually use them, it simply fails and says that I'm being redirected.

The point, where I want to get, is that I just want to log in, retrieve the data from my profile and then do stuff with it...

Here's where I am right now (it just saves the correct cookies, but doesn't return back MY post-login page):

```
$url="https://myschool.managebac.com/sessions/";

$postdata = "login=myname@myschool.com&password=password&commit=Sign-in&remember_me=1";

$cr = curl_init();
curl_setopt($cr, CURLOPT_URL, $url);
curl_setopt($cr, CURLOPT_POST, TRUE);
curl_setopt($cr, CURLOPT_HEADER, TRUE);
curl_setopt($cr, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
curl_setopt($cr, CURLOPT_RETURNTRANSFER, TRUE);
curl_setopt($cr, CURLOPT_POSTFIELDS, $postdata);  
curl_setopt($cr, CURLOPT_COOKIEJAR, 'cookie.txt');   
$header = curl_exec($cr); 
curl_close($cr); 

$cr2 = curl_init();
curl_setopt($cr2, CURLOPT_URL, 'https://myschool.managebac.com/');
curl_setopt($cr2, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
curl_setopt($cr2, CURLOPT_HEADER, TRUE);
curl_setopt($cr2, CURLOPT_RETURNTRANSFER, TRUE); 
curl_setopt($cr2, CURLOPT_COOKIEFILE, 'cookie.txt'); 
$result = curl_exec($cr2);
curl_close($cr2); 
```

I hope that there actually is a possible way, because Managebac is not that used application (mainly for IB students), but it would help me a great deal if I got this working.

I'm glad for every and each answer.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T17:20:38.140

好的，所以我设法做到了。

现在，它得到了想要的信息并且一切正常。

如果有人想要代码，这里是：

```
$url="https://myschool.managebac.com/sessions";
$postdata = "login=mylogin&password=mypassword&commit=Sign-in&remember_me=1";

$cr_curlopt = array(CURLOPT_URL => $url,
                    CURLOPT_POST => TRUE,
                    CURLOPT_HEADER => TRUE,
                    CURLOPT_USERAGENT => $_SERVER['HTTP_USER_AGENT'],
                    CURLOPT_RETURNTRANSFER => TRUE,
                    CURLOPT_POSTFIELDS => $postdata,
                    CURLOPT_COOKIEJAR => 'cookie.txt');

$cr = curl_init();
curl_setopt_array($cr, $cr_curlopt);
$header = curl_exec($cr);

curl_close($cr); 

$cr2_curlopt = array(CURLOPT_URL => "http://myschool.managebac.com",
                    CURLOPT_USERAGENT => $_SERVER['HTTP_USER_AGENT'],
                    CURLOPT_RETURNTRANSFER => TRUE,
                    CURLOPT_COOKIEFILE => 'cookie.txt');

$cr2 = curl_init();
curl_setopt_array($cr2, $cr2_curlopt);
$result = curl_exec($cr2);
curl_close($cr2);

print $result; 
```

顺便说一句，我不知道为什么它实际上会有所帮助，但是在我将 curlopt 添加从单独的字符串更改为一个数组后它开始工作。（感谢 DanRedux）

# linux - linux - write commands from one terminal to another

> ID：10376251
> 
> 赞同：14
> 
> 时间：2012-04-29T21:41:25.843
> 
> 标签：linux, redirect, terminal, stdin, tty

I need to write commands from one terminal to another terminal.

I tried these:

```
echo -e "ls\n" > /proc/pid/fd/0
echo -e "ls\n" > /dev/pts/4 
```

Which just prints the `ls` as output and doesn't execute.

I tried these:

```
chmod 777 /dev/tty4 ;echo "ls" > /dev/tty4
chmod 777 /dev/tty40 ;echo "ls" > /dev/tty40 
```

Which don't seem to do anything

Any ideas?

[note that I don't want to touch the second terminal to accomplish this. only the first one]

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-12-04T22:01:09.403

Python代码：

```
#!/usr/bin/python

import sys,os,fcntl,termios
if len(sys.argv) != 3:
   sys.stderr.write("usage: ttyexec.py tty command\n")
   sys.exit(1)
fd = os.open("/dev/" + sys.argv[1], os.O_RDWR)
cmd=sys.argv[2]
for i in range(len(cmd)):
   fcntl.ioctl(fd, termios.TIOCSTI, cmd[i])
fcntl.ioctl(fd, termios.TIOCSTI, '\n')
os.close(fd) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T22:24:52.103

可以使用以下脚本同时在多个终端上显示命令的输出。它适用于所有控制台程序，包括编辑器。例如做：

```
execmon.bash  'nano hello.txt' 5 
```

打开编辑器，我们介绍的输出和文本都将重定向到虚拟终端号 5。您可以看到您的终端：

```
ls /dev/pts 
```

每个虚拟终端都有一个关联号码。

与普通终端、konsole 和 xterm 一起工作，只需创建文件 execmon.bash 并输入：

```
#! / bin / bash
# execmon.bash
# Script to run a command in a terminal and display the output
# in the terminal used and an additional one.
param = $ #
if [$ param-eq 2]; Then
    echo $ 1 | tee a.out a.out && cat> / dev / pts / $ 2 && exec `cat` a.out | tee / dev / pts / $ 2 && rm a.out
else
    echo "Usage:"
    echo "execmon 'command' num '
    echo "-command is the command to run (you have to enter ')"
    echo "-num is the number of virtual console to output to the"
fi 
```

例子：

```
execmon.bash 'ls-l' 5
execmon.bash 'nano Hello.txt' 5 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T21:54:57.040

这是毛茸茸的。您尝试使用的 proc 中的标准输入文件是终端设备的符号链接（可能是 /dev/pts/something）。有**两个**进程打开了该设备：shell（您的目标）和终端仿真器（例如 gnome-terminal），它们像套接字一样使用它来双向传递数据。大概后者正在窃取输出并显示它，因此外壳永远不会看到它。我认为这种技术行不通。

你想达到什么目的？你不能像孩子一样使用像popen()这样的传统工具来运行这个过程吗？如果它是 GUI 终端仿真器，您可以尝试通过 X 事件或内核的 uinput API 伪造键盘输入。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-20T11:42:11.087

打开 2 个终端，然后在要在 ttd 上写入的终端上键入 ttd 将显示终端的地址移动到另一个终端并键入 cat >（第二个终端的地址）并按 Enter

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-24T11:05:21.017

看着：

```
man 1 script 
```

例如：

```
script -f /dev/tty1 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-29T21:54:16.233

这是错误的处理方式 - 您可能会在终端中显示它，但未执行。

你需要做一些事情，比如告诉 shell 从命名管道或 netcat/socat 中读取。或者您可以尝试以 root 身份或使用 xtest 注入击键（有时在 X 下还有另一种方式，我忘记了）。

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2014-11-26T15:04:11.677

command > dev/pts/# 其中 # 是另一个终端的名称

# c# - Windows 服务 - 获取当前目录

> ID：10376253
> 
> 赞同：67
> 
> 时间：2012-04-29T21:41:40.430
> 
> 标签：c#, windows-services, working-directory

我有一个 Windows 服务，它应该在其当前目录中查找配置文件。

所以我使用`directory.getcurrentdirectiry()`但不是我返回的服务目录

```
c:\windows\system32 
```

知道为什么以及如何获取服务目录吗？

* * *

## 回答 #1

> 赞同：160
> 
> 时间：2012-04-30T14:43:25.767

您可以通过在代码中包含此行来将当前目录设置为运行服务的目录：

```
System.IO.Directory.SetCurrentDirectory(System.AppDomain.CurrentDomain.BaseDirectory); 
```

这其中的重要部分是：

```
System.AppDomain.CurrentDomain.BaseDirectory 
```

这将返回您的服务运行所在目录的路径。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2012-04-29T21:43:50.543

试试这个：

```
System.Reflection.Assembly.GetEntryAssembly().Location 
```

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2013-07-19T11:00:01.027

从完整路径获取目录：

```
var location = System.Reflection.Assembly.GetEntryAssembly().Location;
var directoryPath = Path.GetDirectoryName(location); 
```

与编写 Windows 服务相比，这是一个非常愚蠢的问题 :)

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2016-04-14T18:23:59.423

不要使用`Directory.GetCurrentDirectory()`. *我在返回C:\Windows\System32*时遇到了同样的问题。改用这个：

`Path.GetDirectoryName(Application.ExecutablePath);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-06-21T11:28:12.493

如果您的目标是 .NET Core 或 .NET Standard，您也可以使用`AppContext.BaseDirectory`。

请参阅[https://docs.microsoft.com/en-us/dotnet/api/system.appcontext.basedirectory](https://docs.microsoft.com/en-us/dotnet/api/system.appcontext.basedirectory)

# watir - 检查页面错误

> ID：10376255
> 
> 赞同：0
> 
> 时间：2012-04-29T21:41:57.533
> 
> 标签：watir, watir-webdriver

是否有任何方法或方法来检查使用 Watir 加载的页面是否返回错误 - 例如服务器不可用？

我想看看页面是否正确加载或浏览器是否返回任何错误。

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T18:42:06.527

这不是 watir 或 webdriver 的功能（获取 http 状态代码）。一般的理念是工具像用户一样自动化，用户看不到http状态。（尽管他们会看到生成的错误页面）此外，由于浏览器是进行调用的人，而不是一些底层代码，它具有状态代码，但它并没有真正暴露给用户，也不是通过DOM 等。这是[一个 webdriver 问题](https://code.google.com/p/selenium/issues/detail?id=141)，大约 3 年来一直收到这种请求，正如您所看到的，开发人员非常坚持认为这不是他们想要添加到 webdriver 的东西

一般来说，如果你得到了正确的页面，一个很好的测试是检查页面标题，看看它是否是预期的。如果不是，那么您可以截屏或以其他方式检查您确实尝试过的页面并从中理解（很可能是来自网络服务器的标准错误页面）

如果您真的希望能够查看 HTTP 状态代码本身，可以使用代理或对 URL 进行第二次调用（您必须提前保存，这可能并不总是那么容易）使用使用 httparty 之类的代码从您的代码中调用 http 级别。）

有几个红宝石“代理”宝石，包括最近创建的一个。但我没有使用它们，也无法告诉您如何设置它们，以便来自浏览器的 http 调用将通过代理并可供您以这种方式进行检查。您可能需要与其中一个代理的作者交谈，并询问这种事情是否可能。（我知道我见过人们谈论在 Java 中使用 webdriver 做类似的事情，所以使用 ruby​​ 也应该可以）

# codeigniter - CodeIgniter 电子邮件类中未显示换行符

> ID：10376257
> 
> 赞同：0
> 
> 时间：2012-04-29T21:42:14.243
> 
> 标签：codeigniter

在为 CodeIgniter 电子邮件类准备消息时，我似乎做错了什么。我有以下代码：

```
$message =  "Registration Confirmation and Receipt";
$message .= "\r\n";
$message .= "Thank you for registering for MAGIC Live. Your credit card receipt and a complete confirmation of your registration is below. Please keep it for your records.\r\n";
$message .= "\r\n";
$message .= "Credit card: XXXX XXXX XXXX ".$group['last4'];
$message .= " Exp: ".$group['exp_month']."/".$group['exp_year']."\r\n";
$message .= "data";
$this->email->message($message); 
```

似乎只有两组相邻的换行符生效。输出的电子邮件如下所示：

```
Registration Confirmation and Receipt Thank you for registering for MAGIC Live. Your credit card receipt and a complete confirmation of your registration is below. Please keep it for your records.

Credit card: XXXX XXXX XXXX 4242 Exp: 3/2015 data 
```

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-02T03:12:29.017

检查电子邮件配置。您可以设置换行符。默认为\n。

```
$config['newline'] = "\r\n" 
```

# java - 如何打包 Java 文件

> ID：10376265
> 
> 赞同：-2
> 
> 时间：2012-04-29T21:44:11.523
> 
> 标签：java, eclipse

我想知道在 Eclipse 中打包 java 文件以创建 .app 或 .exe 应用程序的步骤。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:48:09.933

您需要先创建一个 jar，然后使用程序将其打包到可执行文件中。谷歌“jar to exe” 这是一个。 [http://www.regexlab.com/en/jar2exe/](http://www.regexlab.com/en/jar2exe/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:52:07.690

您可以使用 eclipse 导出一个[可执行的 Jar](http://viralpatel.net/blogs/2008/12/create-jar-file-in-java-eclipse.html)文件，然后使用[Launch4j](http://launch4j.sourceforge.net/)为您的应用程序制作一个 .exe。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T23:05:34.313

如果这个应用程序。有一个 GUI，构建 Jars 并提供应用程序。来自使用[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)的互联网链接。JWS 可以部署 Java 富客户端桌面应用程序。到 Windows、OS X 和 *nix，提供桌面集成、自动更新和许多其他强大的功能。

# java - Enum和Enumeration之间有什么关系，如果有的话

> ID：10376269
> 
> 赞同：6
> 
> 时间：2012-04-29T21:44:41.170
> 
> 标签：java

我想知道Java 中的[Enumeration 接口和](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Enumeration.html)[Enum 构造](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)之间的正式联系是什么？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T21:46:17.987

没有，它们用于完全不同的事物。[`enums`](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.9)用于枚举常量。[`Enumeration`](http://docs.oracle.com/javase/7/docs/api/java/util/Enumeration.html)是一个很大程度上过时的接口，已被[`Iterator`](http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html).

# django - Django {{ profile }} 在模板中全局可用

> ID：10376271
> 
> 赞同：0
> 
> 时间：2012-04-29T21:44:59.653
> 
> 标签：django, templates, django-templates, profiles, django-profiles

我正在使用 django-registration 和 django-profiles 构建应用程序。在页面的任何地方，我都有显示当前登录用户数据的部分（如名字和姓氏，使用类似的语法：）`{{ user.first_name }}`，它工作正常。它是通过**子页面模板来完成的，该模板扩展了一个具有 HTML 结构的主模板**和提到的部分。

现在我尝试将用户图像（使用）添加到该部分，但在以下页面上到处都`{{ profile.image }}`存在模板变量的可用性问题：`{{ profile }}`

*   [http://127.0.0.1:8000/profiles/myusername/（myusername](http://127.0.0.1:8000/profiles/myusername/)是有头像的人的用户名），
*   [http://127.0.0.1:8000/profiles/edit/](http://127.0.0.1:8000/profiles/edit/)。

在**settings.py**我有：

```
AUTH_PROFILE_MODULE = 'intranet.UserProfile'

TEMPLATE_CONTEXT_PROCESSORS = (
   'django.core.context_processors.static',
) 
```

添加`"django.contrib.auth.context_processors.auth",`到`TEMPLATE_CONTEXT_PROCESSORS`不会改变任何东西。

**我在models.py**中的UserProfile 类是：

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    image = models.ImageField(upload_to=user_image_name,
        blank=True, null=True, verbose_name='User photo') 
```

**urls.py**：

```
(r'^profiles/edit/', 'profiles.views.edit_profile', {'form_class': ProfileForm, }),
(r'^profiles/', include('profiles.urls')), 
```

所以其余的默认设置在**django-profiles urls.py**文件中。

我希望**能够在应用程序模板中的** `{{ profile }}` **任何地方（不仅在配置文件页面上）使用模板变量**，以便可以在其他人扩展的主模板中使用它。

请让我知道我怎样才能得到这个。任何帮助将不胜感激。

我在 1.3.1 版中使用 Django，在 0.7 版中使用 django-registration，在 0.2 版中使用 django-profiles。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T22:00:51.363

我想你想要[`user.get_profile()`](https://docs.djangoproject.com/en/dev/topics/auth/#django.contrib.auth.models.User.get_profile)。

如果您正在使用`RequestContext`并`auth`在 中的上下文处理器列表中`settings.py`，请尝试`{{user.get_profile.image}}`查看它是否符合您的要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:26:21.527

我认为“彼得·罗威尔”的上述回答在这种特定情况下一定对你有用，原因如下，

1.  用户对象可通过模板中的“django.contrib.auth.context_processors.auth”上下文处理器获得。
2.  正如您可以在 django 模板上下文中使用可用 Python 对象的所有方法一样，User.get_profile() 方法可用。

但是如果您在模板中需要任何其他对象（例如，id=2 的条目对象，或者如果您没有 "django.contrib.auth.context_processors.auth" ），您可以将字典中的任何对象提供给 Template from您的观点如下

```
def view_needing_profile(request):
    c_user = request.user
    c_profile = c_user.get_profile()
    c_entry = Entry.objects.get(id=2)

    return render(request, 'template_using_profile_and_entry.html',
                           {'profile' : c_profile, 'entry' : c_entry } ) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-01T13:39:25.703

您也可以在您的用户配置文件应用程序 models.py 文件中放置类似的内容

`# Fetches the user profile if it exists, otherwise, it creates one User.get_or_create_profile = property(lambda u: Profile.objects.get_or_create(user=u)[0])`

这可确保您始终返回配置文件对象。

# android - 在视图中使用简单画布的动画

> ID：10376278
> 
> 赞同：2
> 
> 时间：2012-04-29T21:45:54.267
> 
> 标签：android, xamarin.android, android-canvas, android-view

`View`我正在尝试在一个使用mono for android中形成一个简单的动画（目前只不过是画一些线条） 。

这是我的代码：

```
public class DemoView : View
{
    public DemoView(Context context, IAttributeSet attrs) :
        base(context, attrs)
    {
        Initialize();
    }

    public DemoView(Context context, IAttributeSet attrs, int defStyle) :
        base(context, attrs, defStyle)
    {
        Initialize();
    }

    private void Initialize()
    {
    }

    protected override void OnDraw(Android.Graphics.Canvas canvas)
    {
        base.OnDraw(canvas);

        canvas.DrawColor(Color.Blue);

        Paint pen = new Paint();

        pen.Color = Color.Red;
        pen.StrokeWidth = 2;
        pen.SetStyle(Paint.Style.Stroke);

        canvas.DrawLine(0, 0, 25, 25, pen);
    }

    //How to add other lines to form an animation?
} 
```

上面的代码只是将背景渲染为蓝色并画了一条线。我正在寻找方法（我相信这样的方法，`OnPaint`以便在应用程序打开时画一些线。我真的不知道要寻找什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-12T15:20:23.633

查看github上的[MonoDroid 示例项目。](https://github.com/xamarin/monodroid-samples)它是关于如何使用 MonoDroid 实现不同 Android 解决方案的综合资源。

它包含几个使用动画绘制的示例应用程序，包括[Snake 游戏](https://github.com/xamarin/monodroid-samples/tree/master/Snake)和[动态壁纸](https://github.com/xamarin/monodroid-samples/tree/master/LiveWallpaperDemo)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-20T01:05:32.850

这就是我的`OnDraw`方法的样子

```
protected override void OnDraw(Android.Graphics.Canvas canvas)
{
    base.OnDraw(canvas);

    if (x < 0 && y < 0)
    {
        x = Width/2;
        y = Height/2;
    }
    else
    {
        x += xVelocity;
        y += yVelocity;

        if (x > Width - particleWidth || x < 0)
            xVelocity *= -1;
        if (y > Height - particleHeight || y < 0)
            yVelocity *= -1;
    }

    Paint p = new Paint();
    p.Color = Color.White;
    canvas.DrawCircle(x, y, particleWidth, p);
    handler.PostDelayed(Invalidate, FRAME_RATE);
} 
```

`handler.PostDelayed`是负责计时器的人

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-05-14T07:55:22.267

您可以查看 Timer 类。它可以安排您的 TimerTask（覆盖 run() 方法）并定期运行它。之后，您可以在 run() 方法中调用 postInvalidate()。此方法将调用 onDraw() 方法，您的所有 Canvas 绘图都可以在该方法中完成。这是假设这不是您的 UI 类，否则调用 invalidate()。

```
 public DrawView(Context context, VoiceGraphActivity _parent) {
    super(context);
    parent_ = _parent;

    paintBorder.setStyle(Style.STROKE);
    paintBorder.setColor(0xff888870);
    paintBorder.setAlpha(170);

    paintGraph.setStyle(Style.STROKE);
    paintGraph.setColor(0xff888888);
    paintGraph.setAlpha(230);

    timer = new Timer();

    class liveGraph extends TimerTask {

        @Override
        public void run() {

            postInvalidate ();
        }

    };

    int UI_UPDATE_MS = 100;

    timer.schedule(new liveGraph(), UI_UPDATE_MS, UI_UPDATE_MS);
} 
```

您可以尝试在 run 方法中添加触摸事件。此代码来自我正在处理的图形应用程序。它不断地记录来自 MIC 的声音，并在两个单独的线程中绘制振幅。

# xcode - 如何更改捆绑包ID的大小写？

> ID：10376280
> 
> 赞同：0
> 
> 时间：2012-04-29T21:46:09.603
> 
> 标签：xcode, xcode4, app-store-connect

我读过 Bundle ID 的大小写并不重要；但是我发现这不是真的。现在，我需要在 XCode 4 中获取我的 bundle id 的情况，以匹配 iTunes Connect 中的情况。

这是我在验证期间遇到的错误： ![在此处输入图像描述](../Images/4b64c140eadd5adbfe1ddd7551add7f5.png)

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:19:05.233

在 info.plist 中更改它。

但请注意，除非它们是相同的情况，否则就 iTunes 而言，它们是完全不同的捆绑包。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:05:17.467

我发现除了使用正确名称的新项目重新开始并将文件复制到新项目之外，没有其他方法可以解决此问题。然后我去了 iTunes Connect 并创建了一个新应用程序。现在可以了！

# ruby-on-rails - 改变 Rails 环境。生产

> ID：10376287
> 
> 赞同：2
> 
> 时间：2012-04-29T21:46:56.253
> 
> 标签：ruby-on-rails, web-applications

我的 Rails 应用程序在处于开发模式时工作得很好，但是如果我将其更改为生产模式，它会给出一些错误错误，我看不出它背后的任何原因。你知道任何可能的问题吗？

这是我的错误信息：

```
Started GET "/favicon.ico" for 127.0.0.1 at Mon Apr 30 00:55:16 +0300 2012

ActionController::RoutingError (No route matches [GET] "/favicon.ico"):
  actionpack (3.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.1) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.1) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.1) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.1) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  rack-cache (1.1) lib/rack/cache/context.rb:132:in `forward'
  rack-cache (1.1) lib/rack/cache/context.rb:241:in `fetch'
  rack-cache (1.1) lib/rack/cache/context.rb:181:in `lookup'
  rack-cache (1.1) lib/rack/cache/context.rb:65:in `call!'
  rack-cache (1.1) lib/rack/cache/context.rb:50:in `call'
  railties (3.2.1) lib/rails/engine.rb:479:in `call'
  railties (3.2.1) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.1) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /home/erogol/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
  /home/erogol/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
  /home/erogol/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
  /home/erogol/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/webrick/server.rb:162:in `start'
  /home/erogol/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
  /home/erogol/.rvm/rubies/ruby-1.8.7-p358/lib/ruby/1.8/webrick/server.rb:95:in `start'
  /home/erogol/.rvm/ru 
```

谢谢大家关心...

当我输入 rake assets:precompile 我得到：

```
rake aborted!
no such file to load -- uglifier
  (in /home/erogol/Dropbox/Bunch_It/app/assets/javascripts/application.js)

Tasks: TOP => assets:precompile:primary
(See full trace by running task with --trace)
rake aborted!
Command failed with status (1): [/home/erogol/.rvm/rubies/ruby-1.8.7-p358/b...]

Tasks: TOP => assets:precompile
(See full trace by running task with --trace) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-10T05:42:19.447

尝试`config.serve_static_assets = true`在`\config\environments\production.rb`文件中设置。这对我有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:32:30.407

从报错信息来看，Rails 找不到文件：/favicon.ico。请确保它存在。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T22:43:28.883

如果这只是在生产中而不是在开发中，我的第一个猜测是你可能需要编译你的资产。您需要运行：

```
rake assets:precompile 
```

或更改您的`production.rb`环境文件以包括：

```
config.assets.compile = true 
```

但是，错误消息中的路径`/favicon.ico`不是`assets/favicon.ico`. 而且，favicon 文件应该只是在您的`/public`目录中。你能确认这是文件所在的位置吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T23:19:29.993

问题是关于`config.assets.compress = true`. 它对我的 javascript 文件造成了问题。我将其设置为 false，我的应用程序开始正常工作。但是我不知道将其设为假是否会导致我的程序丢失。

# import - IntelliJ - 1 个项目 - 支持 2 个版本的导入库？

> ID：10376292
> 
> 赞同：0
> 
> 时间：2012-04-29T21:47:47.803
> 
> 标签：import, intellij-idea

我正在为我的 Android 应用程序使用 3rd 方插件。我需要使用不同版本的库快速创建构建。

两个版本的库都有相同的类。

谢谢，弦乐

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:39:19.727

我认为没有一种快速的方法可以在一个项目中切换库。更好的解决方案是在同一代码库上设置 2 个不同的项目，每个库版本一个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-05T14:29:27.277

出色地。它并不漂亮，但您可以将您的库添加到您设置的 2 个不同的 SDK 中。

然后，您只需更改 SDK 以构建一个与另一个。

# c - 如何在 C 中使用 GUI？

> ID：10376295
> 
> 赞同：3
> 
> 时间：2012-04-29T21:48:05.260
> 
> 标签：c

我正在学习 C 并想用 GUI 编写程序。就我个人而言，我对 Linux 中的终端或 Windows 中的黑色窗口感到满意。但是，我想写一些其他非专业用户可以使用的东西。所以我写了这篇文章来问如何用C写一个GUI程序（C++是可以的）。我应该读什么样的书？或者我需要知道的其他任何事情。谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T21:54:03.760

对于纯 C，您可以使用[GTK+](http://www.gtk.org/)，但如果您也熟悉 C++，我会推荐诺基亚的[Qt](http://qt.nokia.com/) Framework。有超过 100 个用于掌握 Qt 的 youtube 视频。请点击此链接：[Qt 培训](http://www.youtube.com/user/VoidRealms)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T21:55:42.410

对于 C 中的跨平台（linux/windows/mac），我认为 GTK 占主导地位，但请注意 GTK 不太可能安装在大多数非 Linux 系统上。

对于 C++ 中的跨平台，WxWidgets 很受欢迎，因为它使用底层的原生 GUI 库，因此应用程序的外观和感觉可以融合。还有 Qt，但这不使用原生基础架构，因此应用程序不融合in（除非系统主要是 Qt，就像 GTK 不会混合，除非系统主要是 GTK）。

Windows 和 linux 有一个原生的 C GUI API（对于 linux，GTK，如前所述，它也是可移植的）。我*猜*OSX 本身就使用了 Objective C。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T21:57:38.187

根据操作系统的不同，您必须查看某种形式的 API，这些 API 将与所述操作系统进行通信，以便对 GUI 应用程序进行编程。

在 Windows 上，熟悉 Win32 API 会很好。Microsoft 有一个[基本教程](http://msdn.microsoft.com/en-us/library/bb384843.aspx) ，我个人不喜欢他们的文档，但它是一个开始的地方。

对于 OSX，你有[Cocoa](https://developer.apple.com/technologies/mac/cocoa.html)，（尽管你必须学习基于 C 的 Objective-C）。

至于 linux，您可以使用各种工具包来编写 GUI，例如前面提到的 GTK。（这是跨平台的。）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:20:02.140

既然你在 Linux 下弄清了 C 语言，那你就好好学习`GTK+`.
如果您想使用基于文本的用户界面，您可以使用该[`curses`](http://en.wikipedia.org/wiki/Curses_%28programming_library%29)库。

这是一本你可以用来[学习 GTK+的书](https://rads.stackoverflow.com/amzn/click/com/1590597931)

# c++ - 为 C/C++ 程序编写检测工具

> ID：10376298
> 
> 赞同：4
> 
> 时间：2012-04-29T21:48:19.723
> 
> 标签：c++, c, instrumentation

我想编写一个基于某些输入属性自动检测输入 C/C++ 代码的程序。我正在寻找一个开始学习如何做的好地方（主要与如何做仪器，在哪里做等有关）。我已经在网上搜索了一段时间，没有任何运气。因此，如果有人能帮我指出一个好的起点，我将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:00:34.883

如果您还没有找到它，这里有一个非常相似的问题，其中包含使用自定义[LLVM Pass](http://llvm.org/docs/WritingAnLLVMPass.html)和[GCC MELT](http://gcc-melt.org/)的好主意：[使用 LLVM 检测 C/C++ 代码](https://stackoverflow.com/questions/7806689/instrumenting-c-c-code-using-llvm)

如果您正在寻找更简单的东西，请查看这个基于预处理器的解决方案，[用于 C++ 的基本检测和分析框架](http://www.codeproject.com/Articles/30028/Basic-Instrumentation-and-Profiling-Framework-for)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T21:57:56.873

如果您使用的是 Linux，并且只需要系统 API 调用，请查看[strace](http://linux.die.net/man/1/strace)或阅读[此问题](https://stackoverflow.com/questions/1010561/unix-system-call-monitor)。

如果您想检测自己的代码，事情会变得更加棘手。探查器一直这样做，但它们与编译器一起工作以添加检测。gcc 似乎支持某种形式的用户定义检测。看到[这个问题](https://stackoverflow.com/questions/3982868/how-to-tell-gcc-to-instrument-the-code-with-calls-to-my-own-function-each-line)。

我发现我很少需要对整个程序进行检测——通常只有几个关键领域需要它。在这种情况下，定义一些检测宏或添加一些`#ifdef MY_TRACE ... #endif`部分会有所帮助。

# vb.net - 从列表框中删除 Visual Basic 2010

> ID：10376301
> 
> 赞同：0
> 
> 时间：2012-04-29T21:48:33.540
> 
> 标签：vb.net, vb.net-2010

好吧，我很难弄清楚我做错了什么。基本上我需要删除比平均数少的 Listbox1 项目，但它给了我：

System.ArgumentOutOfRangeException 未处理 Message=InvalidArgument='9' 的值对'index' 无效。参数名称：索引

```
Private Sub Label3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Label3.Click
    Dim Myrand As New Random
    Dim res As Double
    Dim i As Integer
    Dim n As Integer
    Dim tot As Double
    Dim avarage As Double

    ListBox1.Items.Clear()

    For i = 0 To 14 Step 1
        res = Math.Round(Myrand.NextDouble, 3)
        ListBox1.Items.Add(res)
        tot = tot + res
    Next

    avarage = tot / ListBox1.Items.Count
    MsgBox(avarage)

    For i = 0 To ListBox1.Items.Count - 1 Step 1
        If ListBox1.Items(i) < avarage Then
            ListBox1.Items.RemoveAt(i)
            n = n + 1
        End If
    Next

    MsgBox("Removed " & n & " items!")
End Sub 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:52:51.457

当您删除一个项目时，它不再在列表中，因此列表变得更短，并且您的原始计数不再有效。只是减少`i`：

```
Private Sub Label3_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Label3.Click
    Dim Myrand As New Random
    Dim res As Double
    Dim i As Integer
    Dim n As Integer
    Dim tot As Double
    Dim avarage As Double

    ListBox1.Items.Clear()

    For i = 0 To 14
        res = Math.Round(Myrand.NextDouble, 3)
        ListBox1.Items.Add(res)
        tot += res
    Next

    avarage = tot / ListBox1.Items.Count
    MsgBox(avarage)

    For i = 0 To ListBox1.Items.Count - 1
        If ListBox1.Items(i) < avarage Then
            ListBox1.Items.RemoveAt(i)
            i -= 1
            n += 1
        End If
    Next

    MsgBox("Removed " & n & " items!")
End Sub 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:03:30.370

它在 For/Next 循环开始时获取最大计数并且[不重新评估它](http://msdn.microsoft.com/query/dev10.query?appId=Dev10IDEF1&l=EN-US&k=k%28VB.FOR%29;k%28TargetFrameworkMoniker-%22.NETFRAMEWORK,VERSION=V4.0%22%29;k%28DevLang-VB%29&rd=true)。尝试向后迭代，这样你就可以从你没有从你要去的地方移除。

IE

```
For i = ListBox1.Items.Count - 1 To 0 Step -1
    If ListBox1.Items(i) < avarage Then
        ListBox1.Items.RemoveAt(i)
        n = n + 1
    End If
Next 
```

从上面的 MSDN Link 强调我的：

> 当 For...Next 循环开始时，Visual Basic 计算 start、end 和 step。这是它**唯一**一次评估这些值。然后它将开始分配给计数器。在运行语句块之前，它将计数器与结束进行比较。如果 counter 已经大于结束值（或者如果 step 为负则更小），则 For 循环结束并且控制传递到 Next 语句之后的语句。否则语句块运行。

# php - 如何使用另一个应用程序维护 PHP 会话状态

> ID：10376305
> 
> 赞同：3
> 
> 时间：2012-04-29T21:49:05.723
> 
> 标签：php, coldfusion

**目标：**

维护 PHP 应用程序和 Coldfusion 应用程序之间的会话状态，它们一起构成了整个应用程序。

**当前方法：**

登录到我们的 Coldfusion 应用程序后（登录的唯一方式，即无法通过 PHP 应用程序登录），我们使用以下 JS 片段调用远程 PHP 文件，该文件设置 PHP 会话 cookie（无法通过 Coldfusion 设置） ，并在随后的 Coldfusion 页面访问中刷新 PHP 会话：

```
<script type="text/javascript">
  // Create an image.
  var imgPing = new Image();
  // Set image src to App A ping url.
  imgPing.src = "http://remotePHPApplicationURL/remoteFile.php";
</script> 
```

登录时，此代码段会加载到每个 Coldfusion 页面上，以维护并行会话。

如果通过非 SSL Coldfusion 页面调用此方法，则该方法按设计工作，但是，有一些 SSL Coldfusion 页面包含该应用程序。当 SSL 页面调用此代码段时，我们会在 Chrome Inspector 中同时收到“不安全内容”警告（中断我们的 SSL 连接）和“匿名功能”错误。

我们已经尝试 CFHTTP 来“获取”这个 PHP 文件，但它没有按照设计设置 PHP cookie。关于如何使用 img.src 执行 PHP 文件与使用 CFHTTP 相比，我有一些不明白的地方。

**问题：**

是否有另一种更好的方法来调用/执行/ping PHP 文件与处理 img.src 似乎只在非 SSL 情况下有效？

以下是 PHP 文件的示例：

```
<?php
  error_reporting(E_ALL & ~E_NOTICE);
  define('THIS_SCRIPT', 'index');
  define('CSRF_PROTECTION', true);

  $globaltemplates = array();       

  require_once('./global.php');

  $phpapp->session->save();
  setcookie('userid', 'uid');
  setcookie('password', 'pass');
  header("Content-Type: image/png");
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T07:25:55.400

您可以使用 CFHTTP，但您必须像浏览器和远程应用程序之间的代理一样使用它，并手动管理发送和接收的 cookie。

我已经成功地将用户从 ColdFusion 登录到 phpBB

这个过程看起来像这样

1.  CFHTTP 到 remoteFile.php
2.  检查返回的 http 响应并提取远程应用程序设置的 cookie
3.  使用 CFCOOKIE 在用户浏览器中设置它们

在后续请求中，您需要查看应用程序发送的 cookie 是否存在，以及它们是否在步骤 1 中使用 CFTTPPARAM 与 CFHTTP 请求一起传递。应用程序可能设置了 sessionid 或类似的 cookie，需要发送该 cookie 来维护会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:56:19.870

希望我错了，但我想不出解决办法。但是，我确实对为什么难以找到解决方案有一些见解，希望会有所帮助。

CFHTTP 不起作用，因为调用 PHP 页面的是 ColdFusion 服务器，而不是用户的浏览器。所以，ColdFusion 服务器有一个会话，但用户的计算机没有。

有很多方法可以从浏览器中调用文件（您可以从 IMG 标签、CFSCRIPT 标签、IFRAME、图像对象......），但它们都遇到相同的问题 - 即浏览器如果您从 SSL 页面调用非 SSL 文件，将发出警告。

因此，如果没有浏览器中的警告，可能无法通过 SSL 跨 SSL 维护来自 ColdFusion 的 PHP 会话（当然，我很乐意证明这一点是错误的）。

根据您的需要，可行的方法是使从您的服务器到 PHP 服务器的任何链接向 PHP 服务器发送一个包含登录信息的表单帖子，以便他们在访问该第三方站点时自动登录。我不知道这是否适合你的情况，但我想我会把它扔在那里。

然而，主要的一点是，除了在您的 ColdFusion 应用程序的每个页面请求上维护会话之外，还要寻找其他途径来实现您的目标。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T18:20:54.790

我建议使用[SAML](http://en.wikipedia.org/wiki/SAML_2.0) SSO 实现并仅在需要时对特定应用程序进行身份验证，您可以使用数据库将简单会话信息交叉存储为 json 字符串。如果实施得当，体验将是无缝的，并将提供可扩展的解决方案。

# asp.net - 自动填充 ASP.net MVC2 CRUD 的日期时间

> ID：10376306
> 
> 赞同：0
> 
> 时间：2012-04-29T21:49:31.853
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-2

我正在尝试学习 ASP.net MVC 2，并且我已经为只有一个表的示例错误跟踪系统创建了数据库表、模型、视图和控制器。我还能够在错误跟踪器上执行 CRUD 操作。当我创建一个“新错误”时，应用程序会询问我错误名称、错误 ID、错误描述、错误创建日期、错误到期日期。我的问题是我不想每次都输入错误创建日期和错误到期日期。我希望使用系统中的当前日期和时间自动填充错误创建日期。并且错误到期日期将自动填充与当前日期 + 7 天的创建日期相比的 & 天数。我应该在视图中这样做吗？我需要使用 JavaScript 执行此操作还是有其他方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:35:18.440

假设您有一个强类型视图，目前对于创建视图，您必须从控制器发送模型的新实例。

```
public ActionResult Create()
{
    DBModel model = new DBModel();
    return View(model);
} 
```

如果您设置日期属性并如下所示发送模型，则应在视图中填充您的日期字段。

```
public ActionResult Create()
{
    DBModel model = new DBModel();
    model.BugCreateDate = DateTime.Now;
    model.BugDueDate = DateTime.Now.AddDays(7);
    return View(model);
} 
```

# xcode - IBA 动作发件人

> ID：10376308
> 
> 赞同：0
> 
> 时间：2012-04-29T21:50:03.620
> 
> 标签：xcode, cocos2d-iphone

在我尝试将 [sender duration] 传递给 int dur 之前，一切正常。它适用于 TAG，但不适用于我自己的 var。我已经尝试过 INT 和 NSinteger 的 durationSpell。我想要做的是：我有 10 个不同的按钮来触发 spawnShoot，它们都有不同的持续时间。我想从单击的按钮中获取持续时间。

```
@interface ClassUI : NSObject {

    CCMenuItemImage *button;
    CCSprite *shot;
    int durationSpell;
}
-----------------
    ClassUI *spellshealP1 = [[ClassUI alloc]init];

        spellshealP1.button = [CCMenuItemImage itemFromNormalImage:@"smallHeal.png" selectedImage:@"healempty.png" target:self selector:@selector(spawnShoot:)];

        spellshealP1.button.tag = 101;
        spellshealP1.durationSpell = 10;

CCMenu *player1menu = [CCMenu menuWithItems:spellshealP1.button, spellbighealP1.button, spellcureP1.button, spellfocusP1.button, spellpoisonP1.button, spellbfBallP1.button, spellsfBallP1.button, nil];
player1menu.position = ccp(MoveMenuInXP1, (768/2) - (numberOfButtons*buttonSize/2) + buttonSize/2);
[self addChild:player1menu];
-----------------            
        -(IBAction)spawnShoot:(id)sender{
           int tag = [sender tag]; 
           int dur = [sender durationSpell];
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:26:54.737

好的，这里的问题是：发件人不是`spellSheal`，而是`spellSheal.button`。
所以你试图得到`spellSheal.button.durationSpell`，但实际上它是`spellSheal.durationSpell`......

因此，最好的方法是让 ClassUI 从 CCMenuItemImage 继承。这是我的做法：

```
@interface ClassUI : CCMenuItemImage {
  CCSprite *shot;
  int durationSpell;
}
-----------------
ClassUI* spellshealP1 = [ClassUI itemFromNormalImage:@"smallHeal.png" selectedImage:@"healempty.png" target:self selector:@selector(spawnShoot:)];
spellshealP1.tag = 101;
spellshealP1.durationSpell = 10;
-----------------            
-(IBAction)spawnShoot:(id)sender{
  int tag = [sender tag]; 
  int dur = [sender durationSpell];
} 
```

# c# - 字符串货币格式未使用正确的本地

> ID：10376309
> 
> 赞同：0
> 
> 时间：2012-04-29T21:50:24.963
> 
> 标签：c#, wpf, xaml, datagrid, string-formatting

我目前正在处理一个 C# 项目，我正在格式化 WPF 数据网格中单元格内的数据以显示为货币。

在数据网格中，我使用以下代码：

```
<my:DataGridTemplateColumn Header="Debit Amount">
     <my:DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
           <TextBlock Text="{Binding DebitAmount, StringFormat='C'}" />
        </DataTemplate>
     </my:DataGridTemplateColumn.CellTemplate>
</my:DataGridTemplateColumn> 
```

当字符串被格式化时，它显示为 $50.00，但它应该显示为 £50.00。我想也许我忘记更改 PC 上的语言设置并将其保留为默认美国而不是将其更改为英国，但是，PC 设置为英语英国。

有没有办法可以强制它是英国或根据 PC 的语言设置对其进行格式化。

感谢您的任何帮助，您可以提供。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:54:03.820

您必须`xml:lang`在 XAML 中设置属性。将属性添加`xml:lang="en-GB"`到顶级 XAML 元素。

有关更多信息，您可以阅读有关[XAML 中的 xml:lang 处理的](http://msdn.microsoft.com/en-us/library/ms788730%28v=vs.100%29.aspx)信息。

# java - 随机显示 Hashmap 返回值，一次一个

> ID：10376310
> 
> 赞同：0
> 
> 时间：2012-04-29T21:50:26.553
> 
> 标签：java, android

我试图在文本视图中一次随机显示一个项目。我可以用下面的代码显示所有这些。

```
final HashMap<String, String> map = new HashMap<String, String>();
    NodeList nodes = doc.getElementsByTagName("item");
   // for (int i = 0; i < nodes.getLength(); i++) {
        // creating new HashMap

    for (int i = 0; i < nodes.getLength(); i++) {
        Element element = (Element) nodes.item(i);
        map.put(KEY_TITLE,parser.getValue(element, KEY_TITLE));

        menuItems.add(map);

        List<String> valuesList = new ArrayList<String>(map.values()); 
        int randomIndex = new Random().nextInt(valuesList.size()); 
       randomValue = valuesList.get(randomIndex); 
       Log.i("inside", randomValue);    
    }

     Collections.shuffle(menuItems);
     menuItems.add(map);
        next.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View v) {
             Log.i("outide",map.get(KEY_TITLE));    
                 myImage.setImageResource(imageArr[rgenerator.nextInt(imageArr.length)]);
            }
     });

 }
 } 
```

任何人都可以告诉我随机显示数据的最简单方法是什么？

谢谢，

嗨，大家好，

这就是我想出的，它似乎按我想要的方式工作。

```
final ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

    XMLParser parser = new XMLParser();
    Document doc = parser.getDomElement(responseBody);
     NodeList nodes = doc.getElementsByTagName("item");

     for (int i = 0; i < nodes.getLength(); i++) {
            // creating new HashMap
       // for (int i = 0; i < nodes.getLength(); i++) {
            Element element = (Element) nodes.item(i);
            HashMap<String, String> map = new HashMap<String, String>();
            map.put(KEY_TITLE,parser.getValue(element, KEY_TITLE));

            menuItems.add(map);
          }

     Collections.shuffle(menuItems);
     Map<String, String> myValueMap = menuItems.get(0); 
     textView.setText(myValueMap.get(KEY_TITLE));
                next.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                     Collections.shuffle(menuItems);
                     Map<String, String> MapBtn = menuItems.get(0);
                       textView.setText(MapBtn.get(KEY_TITLE));
                        myImage.setImageResource(imageArr[rgenerator.nextInt(imageArr.length)]);
            }
         });

 }
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:56:23.180

如果你想随机化列表

```
Collections.shuffle(menuItems); 
```

循环之后

# java - Java：JFrame 分辨率？

> ID：10376311
> 
> 赞同：3
> 
> 时间：2012-04-29T21:51:20.863
> 
> 标签：java, swing, jframe, resolution, layout-manager

我在 Mac 上使用几个 JFrame 制作了一个程序，分辨率还可以，一切都适合屏幕。但是当我在我的 PC 上运行该程序时，JFrames 太大了并且直接离开了屏幕。

我的问题是：是否可以在 JFrame 上设置通用分辨率，以便将所有组件绘制得更小一点？我宁愿这样做，然后遍历整个程序并手动调整每个组件的大小。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T22:10:37.250

> 我使用几个 JFrame 制作了一个程序

错误地使用 CardLayout 代替，只有当有真正的理由使用 JDialog 或 JOptionPane 与父和 (JDialog) 可能与 setModal(true) 到单个 JFrame

> 但是当我在我的 PC 上运行程序时，JFrames 太大了，直接从屏幕上消失了

*   你在使用 AbsoluteLayout

*   你的电脑是不是特定的

*   每个本机操作系统返回不同的（[例如，您无法在屏幕上找到两个具有相同像素比率的容器](https://stackoverflow.com/a/10371443/714968)） JComponents 的字体和默认大小

> 是否可以在 JFrame 上设置通用分辨率，以便将所有组件绘制得更小一些？

使用正确的 LayoutManager，肯定不容易，需要真正的努力

> 我宁愿这样做，然后遍历整个程序并手动调整每个组件的大小。

使用适当的 LayoutManager，

*   为了获得更好的帮助，请尽快使用[SSCCE](http://sscce.org/)编辑您的问题，展示您在 PC 或平台之间的不同屏幕尺寸的问题

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T21:59:47.177

据我所知，您无法更改 Swing 组件的分辨率。但是您可以从系统中获取当前的屏幕尺寸（[这里](http://www.exampledepot.com/egs/java.awt/screen_ScreenSize.html)是一个示例）。使用此屏幕尺寸，您可以调整组件。

如果您明智地编写 GUI，则不必手动调整 GUI 的所有组件的大小。相反，顶级 JPanel（或 JFrame 或其他任何东西）将根据其包含的组件（例如，使用类似 pack() 的东西）调整其大小。因此，只有少数组件具有硬编码大小。这个大小也可以外化为易于编辑的类或文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-30T23:43:26.783

我遇到了像你这样的问题，我用 JScrollbar 解决了它！ [这](https://stackoverflow.com/questions/5928514/how-can-i-scroll-my-jframe-using-the-jscrollbar)是使您的 JFrame 可滚动的方法。

# c - 解析错误：简单的 C 程序

> ID：10376318
> 
> 赞同：1
> 
> 时间：2012-04-29T21:52:44.910
> 
> 标签：c, parse-error

我有一个类的以下简单代码，并且从`c = c ...`if 语句开始的每一行都收到一个解析错误。此外，我收到以下错误：

警告：类型与先前的隐式声明不匹配。以前在函数 isUpperCase 中隐式声明 isUpperCase：在“=”标记之前解析错误。isLowerCase 也有类似的错误。

有没有人有任何见解？

```
#include<stdio.h>
#include<string.h>

#define LOWERCASE_START = 97
#define LOWERCASE_END = 122
#define UPPERCASE_START = 65
#define UPPERCASE_END = 90
#define ALPHABET_LENGTH = 26

void simpleEncryption(char s[]){
    int i;
    for (i=0; i < strlen(s); i++){
        char c = s[i];
        if (isUpperCase(c) == 1){
            c = c - UPPERCASE_START + 1;
            c = c % ALPHABET_LENGTH;
            c = c + UPPERCASE_START;
        } else if (isLowerCase(c) == 1){
            c = c - LOWERCASE_START + 1;
            c = c % ALPHABET_LENGTH;
            c = c + LOWERCASE_START;
        }
        s[i]=c;
    }
}

int isUpperCase(char c) {
    if (c >= UPPERCASE_START && c <= UPPERCASE_END) {
        return 1;   
    } else {
        return 0;
    }
}

int isLowerCase(char c) {
    if (c >= LOWERCASE_START && c <= LOWERCASE_END) {
        return 1;   
    } else {
        return 0;
    }
} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T21:57:17.643

您的宏定义不应包含等号，您只需要：

```
#define LOWERCASE_START 97
#define LOWERCASE_END 122
#define UPPERCASE_START 65
#define UPPERCASE_END 90
#define ALPHABET_LENGTH 26 
```

预处理器的思想相当简单，会盲目地替换`= 97`成你的 C 来产生像这样的损坏的东西：

```
c = c - = 97 + 1; 
```

如果你有`=`你`#define`的 s。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-29T21:56:05.673

`isUpperCase()`并且`isLowerCase()`在使用之前没有声明：要么为每个添加声明，要么将它们的定义移动到 before `simpleEncryption()`。

正如首先所说的[mu 太短](https://stackoverflow.com/users/479863/mu-is-too-short)，宏定义不正确。要么修复宏，要么改用`const int`变量：

```
static const int ALPHABET_LENGTH = 26; 
```

# java - Java除法错误

> ID：10376322
> 
> 赞同：4
> 
> 时间：2012-04-29T21:53:17.557
> 
> 标签：java, division, integer-division

我有以下变量：

```
int first = 0;
int end = 0; 
```

在公开课上声明。

在一个方法内：

```
double diff = end / first;
double finaldiff = 1 - diff; 
```

上的`end`变量`System.out.println`是`527`，`first`是`480`。

为什么 diff 的答案是`1`? 应该是`1.097916667`，我认为使用 a`double`可以让我计算成小数？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T21:55:51.377

除以两个`int`s 将得到一个`int`，然后隐式转换为`double`。在除法之前将one 转换为 a `double`：

```
double diff = (double)end / first; 
```

# c++ - 1个最终编译器错误:(有人可以为我简单地解释一下吗

> ID：10376323
> 
> 赞同：0
> 
> 时间：2012-04-29T21:53:40.653
> 
> 标签：c++, compiler-errors, linear-algebra, calculator

> C:\Users\George\Desktop\linear_equation_calc\main.cpp||在函数'int main(int, const char**)':| C:\Users\George\Desktop\linear_equation_calc\main.cpp|101|错误： 'calcparallelplugin' 未在此范围内声明| ||=== 构建完成：1 个错误，0 个警告 ===|

这是我不断收到的错误。我理解声明的含义，但我真的不明白我应该如何使用 calcparallelplugin() 将其声明为 im 以链接到另一个 .cpp 文件。我知道拥有单独的 .cpp 文件而不是标题不是标准做法。请有人用非常简单的术语解释一下，我现在像s***一样厚

```
#include <iostream>
#include <string.h>

using namespace std;

// Function includes
// I try to keep them in the order they appear in the
// output below for organization purposes
#include "calc.m.xy12plugin.cpp"
#include "calc.b.xymplugin.cpp"
#include "calc.m.xybplugin.cpp"
#include "calc.point.xymplugin.cpp"
#include "calc.parallelplugin.cpp"

// The above one would be here, too

int main(int argc, const char* argv[]) {
  int i;
  i = 0;
  cout << "Linear Equation Calculator" << endl << "Copyright (c) 2011 Patrick Devaney" << endl
  << "Licensed under the Apache License Version 2" << endl;
  // This loop makes the code a bit messy,
  // but it's worth it so the program doesn't
  // crash if one enters random crap such as
  // "zrgxvd" or "54336564358"
  while(i < 1) {
    cout << "Type:" << endl
    << "0 to calculate a slope (the M value) based on two points on a line" << endl
    << "1 to calculate the Y-intercept (the B value) based on two points and a slope" << endl
    << "2 to calculate the slope (the M value) based on the Y-intercept and X and Y" << endl <<
    "plug-ins" << endl
    << "3 to find the next point up or down a line based on the slope (M) and X and Y"
    << endl << "plug-ins" << endl
    << "4 to find a point x positions down the line based on the slope (M) and X and Y"
    << endl << "plug-ins" << endl
    << "5 to find the equation of a parallel line in form y=mx+c"
    << endl << "plug-ins" << endl;

    string selection;
    cin >> selection;
    if(selection == "0") {
      mcalcxyplugin();
      i++;
    }
    else if(selection == "1") {
      calcbxymplugin();
      i++;
    }
    else if(selection == "2") {
      calcmxybplugin();
      i++;
    }
    else if(selection == "3") {
      calcpointxymplugin(1);
      i++;
    }
    else if(selection == "4") {
      int a;
      cout << "How many points up/down the line do you want? (Positive number for points" << endl
      << "further up, negative for previous points" << endl;
      cin >> a;
      calcpointxymplugin(a);
      i++;
    }
    else if(selection == "5"){

      calcparallelplugin();
      i++;
    }
    else {
      i = 1;
    }
    // End of that loop below
  }
  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:03:57.820

未在此范围内声明的错误就是这个意思。在所有`#include<...>`文件都包含在你的主文件中之后，编译器找不到那个函数，所以它不知道该怎么做。

但是，这也适用于另一种情况：

```
#include <iostream>

int main(int argc, char** argv)
{
    testfunc();
}

void testfunc()
{
    std::cout << "test!" << std::endl;
} 
```

在这种情况下，问题的原因是编译器需要前向声明函数——即它需要函数原型。这将起作用：

```
#include <iostream>

void testfunc(); // the compiler sees this and knows the linker
                 // has the responsibility of finding this symbol.

int main(int argc, char** argv)
{
    testfunc();
}

void testfunc()
{
    std::cout << "test!" << std::endl;
} 
```

还有另一个关于范围界定的案例。命名空间影响范围，例如：

```
#include <iostream>

void testfunc();

int main(int argc, char** argv)
{
    testfunc();
}

namespace test
{
    void testfunc()
    {
        std::cout << "test!" << std::endl;
    }
} 
```

也会失败。对于您的原型，您需要`void test::testfunc();`. 这是因为命名空间的内部本身就是一个作用域，而不是全局作用域`::`。通过编写`using namespace std;`代码，您可以使函数在`std`全局命名空间中可用。

我还注意到您用于`.cpp`包含。惯例是使用`.h`或`.hpp`用于头文件，它通常包含相应`.cpp`实现的前向声明、类等。

所以，我会检查：

*   代码不是命名空间的。
*   你包括正确的东西。
*   您正在使用正确的名称调用该函数。

# android - openStream 在 Android 2.3 上工作，在 Android 3/4 上失败

> ID：10376331
> 
> 赞同：0
> 
> 时间：2012-04-29T21:54:08.330
> 
> 标签：android, exception, networking

我遇到了 openStream() 的问题，因为它在 Android 2.3.4 下工作，但在 3.0 和 4.0.4 下失败。该应用程序位于一个简单的 RSS 阅读器中，在此处执行 openStream() 时出现空异常：

```
protected InputStream getInputStream() {
    try {
    InputStream myConnection;
    myConnection = feedUrl.openStream();
    return myConnection;
    } catch (IOException e) {
        throw new RuntimeException (e);
    }
} 
```

URL 是：[http](http://europenews.dk/en/headlines/feed/) ://europennews.dk/en/headlines/feed/ 该地址 有一个有效的 RSS 提要。

控制在 catch 处立即返回到调用代码，而不是进入第一个 catch。调用代码是：

```
try {
    InputStream in = this.getInputStream();
    Xml.parse(in, Xml.Encoding.UTF_8, root.getContentHandler());
    } catch (Exception e) {
    throw new RuntimeException(e);
} 
```

这是我观察到返回的异常为空的地方。

我在某处看到它失败了，因为我在 UI 线程中进行网络活动，并且我真的应该将它分拆到另一个线程中（由于滞后，我打算这样做）。这是一个合理的建议吗？

# eclipse - 如何让 Maven 将源包解析/附加到自己/本地存储库中的依赖项？

> ID：10376333
> 
> 赞同：0
> 
> 时间：2012-04-29T21:54:17.990
> 
> 标签：eclipse, maven, swt

我有一个用于 SWT 的本地 maven 存储库（直接在我的项目的 SCM 中），因为 SWT 没有最新的工件服务器。

为此，我下载了最新版本，解压缩了 zip 并将 jar（lib 本身）和这样的源安装到我的本地存储库中：

`mvn deploy:deploy-file -DgroupId=org.eclipse.swt.gtk.linux -DartifactId=x86_64 -Dversion=3.7.2 -Dfile=/tmp/swt.jar -Dpackaging=jar -Durl=file://tmp/myProject/lib/`

分别：

`mvn deploy:deploy-file -DgroupId=org.eclipse.swt.gtk.linux -DartifactId=x86_64 -Dversion=3.7.2 -Dfile=/tmp/src.zip -Dpackaging=jar -Durl=file://tmp/myProject/lib/ -Dclassifier=sources`

之后，我在项目的 pom 中声明了这个 repo 和 swt 依赖项并运行：

`mvn -DdownloadSources=true -DdownloadJavadocs=true eclipse:clean`

和`mvn -DdownloadSources=true -DdownloadJavadocs=true eclipse:eclipse`

这会将 SWT 添加到我的 .classpath 并为我设置其余部分。但它不会将 swt-sources.jar 附加到 eclipse 中的 swt 依赖项。

任何提示为什么这不起作用？

# javascript - 在无法访问框架内容的域中自动调整 iframe 的大小

> ID：10376334
> 
> 赞同：0
> 
> 时间：2012-04-29T21:54:18.927
> 
> 标签：javascript, html, iframe

我正在建立一个网站，并且我有一个 iframe，其中包含从外部网站加载的内容：

```
<iframe src="example.com"></iframe> 
```

这会在我的页面上留下丑陋的双滚动条。

已尝试搜索解决方案，但遇到了以下问题：

1.  跨域限制
2.  我无法访问插图中使用的“example.com”。

这个问题有什么可能的解决方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:56:36.703

只需将滚动属性设置为“否”。

```
<iframe src="example.com" scrolling="no"></iframe> 
```

**更新：**

如果您的内容只是 iframe，您可以这样做，

```
<html>
  <head>
    <style type="text/css">
       body {overflow:hidden}
    </style>
  </head>
  <body>
    <iframe width="100%" height="100%" src="http://example.com" scrolling="yes"></iframe>
  </body>
</html> 
```

# c++ - 重建一个函数的签名，只知道它的名字和参数列表

> ID：10376337
> 
> 赞同：1
> 
> 时间：2012-04-29T21:55:03.263
> 
> 标签：c++, templates, c++11, traits, overloading

我正在编写一些宏，它们采用函数名称并执行一些操作，其中之一是通过它的签名`decltype`并将其用作模板参数。

我想扩展这些宏以支持重载函数。我的想法是让他们接受一个额外的参数来指定参数列表，而不是完整的签名，因为两个函数重载不能只针对返回类型而不同。当我尝试重建函数的完整签名时，问题就出现了，就像我在非重载情况下所做的那样`decltype`：我如何猜测返回类型？

我试过了`result_of`，但没有运气：

```
#include <type_traits>
#include <typeinfo>
#include <iostream>
using namespace std;

double f(int, int);
int f(int, int, int);

int main(){
    cout<<typeid(result_of<decltype(&f)(int,int, int)>::type).name()<<endl;
} 
```

`double f(int, int)`如果注释掉，则该片段有效。我知道这是因为在`decltype`其中不知道要选择两个重载中的哪一个。通常，人们会在与所需重载匹配的签名之前添加一个虚拟强制转换，但这意味着您提前知道返回类型，因此所有这些东西都是无用的。

有没有办法解决这个问题，还是我必须强制用户在宏中指定完整签名？

编辑：基本上，我有这两个宏：

```
//add a member function as a method
#define addmethod2(stringname, methodname)      fields[#stringname]=method_helper<decltype(&hold_type::methodname), &hold_type::methodname>::worker
#define addmethod(methodname)                   addmethod2(methodname, methodname) 
```

我想添加第三个，`addmethod3`它只*接受*参数列表（如果它是带有返回类型的完整签名，那将是微不足道的），以便选择正确的成员函数重载。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T13:26:42.573

关于什么

```
template<typename T>
struct identity { typedef T type; };

template<typename T>
using NoDeduce = typename identity<T>::type;

template<typename T>
using Identity = T;

template<typename ...P, typename R>
Identity<R(P...)> *get_f(R f(NoDeduce<P>...)) {
  return f;
} 
```

然后你可以说

```
auto *f1 = get_f<int, int, int>(f);
auto *f2 = get_f<int, int>(f); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:24:26.877

使用`decltype`并拨打电话表达式：`decltype(f(0, 0, 0))`. 当参数是您不能轻易提供 (unlike `int`) 的实例的类型时，使用`std::declval`来伪造它：

```
decltype(f(std::declval<int>(), std::declval<int>(), std::declval<int>())) 
```

# asp.net - gridview中的按钮连接另一个页面

> ID：10376339
> 
> 赞同：0
> 
> 时间：2012-04-29T21:55:24.313
> 
> 标签：asp.net, gridview, webforms

我有一个 asp.net 4.0 gridview，它显示了我的数据库属性。我添加了一个按钮来更新数据库。当用户单击这些按钮时，我想去另一个页面添加一些值。如何通过单击按钮转到另一个页面，例如 anotherpage.aspx？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:57:56.927

为什么不这样做：

```
Response.Redirect("page.aspx") 
```

（或）这样做

```
Server.Transfer("page.aspx", ) 
```

# java - java - 用相同的键+不同的值替换hashmap中的键+值

> ID：10376340
> 
> 赞同：1
> 
> 时间：2012-04-29T21:55:39.650
> 
> 标签：java, hashmap

我已经研究这个问题很久了，但无法正确回答！

我有一个填充的哈希图和一个格式相同的哈希图`Map<Integer, ArrayList<String>>`( 当我使用 .put 命令更新填充的哈希图时，我一直在处理的少数/一个替换了填充的哈希图中的所有内容 - 这是正常的吗？我哪里错了？我期待它可以简单地替换有问题的键+值....

请原谅不提供代码，但这意味着发布相当多的代码来演示，只是想知道是否有人可以帮助解释这可能出错的地方。如果需要，我可以把一些东西放在一起展示......

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T00:16:56.317

这是代码示例的样子：

```
import java.util.*;

public class NumFormEx
{
    public static ArrayList <String> listIt (String... params) 
    {
        ArrayList <String> as = new ArrayList <String> ();
        for (String s: params)
            as.add (s);
        return as;
    }

    public static void main (String args[])
    {
        Map <Integer, ArrayList<String>> mils = new HashMap<Integer, ArrayList<String>> ();
        mils.put (1, listIt ("foo", "bar")); 
        mils.put (2, listIt ("zacka", "zacka")); 
        System.out.println ("mils:\t" + mils);
        mils.put (1, listIt ("foobar"));        
        System.out.println ("mils:\t" + mils);
    }
} 
```

测试：

```
java NumFormEx
mils:   {1=[foo, bar], 2=[zacka, zacka]}
mils:   {1=[foobar], 2=[zacka, zacka]} 
```

我会说：正如预期的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:33:42.533

由于地图不允许重复值，您可以这样做：

```
myMap.put(2, new ArrayList<String>()); 
```

这将采用键 2 的元素并将其列表替换为新的（“空白”）列表。

# scheme - 遍历 Racket 中的字母表

> ID：10376342
> 
> 赞同：4
> 
> 时间：2012-04-29T21:55:42.497
> 
> 标签：scheme, racket

我想编写一个程序，将字母表中的字母作为符号进行迭代并对其进行处理。我希望它大致相当于这个 C 代码：

```
for(char letter = 'a'; letter <= 'z'; letter++)
{
    printf("The letter is %c\n", letter);
} 
```

我真的不知道如何在 Racket 中做到这一点。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T22:12:44.000

假设您只想遍历小写英文字母，这是一种方法：

```
(define alphabet (string->list "abcdefghijklmnopqrstuvwxyz"))

(for ([letter alphabet])
  (displayln letter)) 
```

你可以用`for`循环做更多的事情。例如，

```
(for/list ([let alphabet] [r-let (reverse alphabet)])
  (list let r-let)) 
```

生成一个与另一个方向的字母配对的字母列表。虽然这实际上更好地表示为地图：`(map list alphabet (reverse alphabet))`.

此外，如果您需要更多， [SRFI-14](http://docs.racket-lang.org/srfi/srfi-std/srfi-14.html)提供了对字符集的更多操作。

编辑：最初，我用 , 做了一些事情`char->integer`，`integer->char`但`range`我现在拥有的更简单。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-30T16:33:01.697

只是为了让其中一个答案显示直译方法：

```
#lang racket
(for ([letter (in-range (char->integer #\a)
                        (add1 (char->integer #\z)))])
  (printf "The letter is ~a\n" (integer->char letter))) 
```

Racket 不支持 C 允许的字符和整数之间的隐式双关：与 C 不同，Racket 值的类型是内在的，而不是值本身的外部。`char->integer`and`integer->char`函数在这些类型之间进行显式转换。

# php - 查询更新导致巨大的意外数字

> ID：10376356
> 
> 赞同：0
> 
> 时间：2012-04-29T21:57:25.377
> 
> 标签：php, mysql

我的 hiscore 表有一些问题。有些玩家很快就获得了很多分数，甚至更多。我在下面发布了两个代码：

第一个是我目前使用的，导致问题：

```
$name = mysql_real_escape_string($_POST['name']); 
$set = mysql_real_escape_string($_POST['set']); 

if ($set == 1 && isset($_POST['score']))
{
    $score = mysql_real_escape_string($_POST['score']); 

    $query = mysql_query("UPDATE users SET totalScore=totalScore + '$score' WHERE username='$name'"); 

    if ($query) 
    {
        echo 'success'; 
    }
    else {
        echo 'error'; 
    }

} 
```

我尝试在下面的代码中将分数转换为 int，但更新结果是一个巨大的数字（4294967295），要设置为 totalScore。totalScore 是 int(25) 类型，我将属性设置为无符号，这样玩家就不能以负数结束。

请帮忙谢谢

```
$name = mysql_real_escape_string($_POST['name']); 
$set = (int)$_POST['set']; 

if ($set == 1 && isset($_POST['score']))
{
    $score = (int)$_POST['score']; 

    $query = mysql_query("UPDATE users SET totalScore=totalScore + $score WHERE username='$name'"); 

    if ($query) 
    {
        echo 'success'; 
    }
    else {
        echo 'error'; 
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:01:35.233

如果这是您用来保存分数的唯一脚本，难怪人们为了获得高分而作弊 - 为了防止它，您需要在参数中插入一些加密，并在脚本中添加一些基于会话和时间的保护

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:01:59.907

这是因为您将整数添加到可能的整数数据类型上。如果您确保输入是整数（*您已经在做*） ，则不需要引号和转义

```
"UPDATE users SET totalScore=totalScore + $score WHERE username='$name'" LIMIT 1; 
```

只有您根据名称更新查询，您可能需要限制执行。

# javascript - Javascript modal DOM 更新有必要吗？

> ID：10376358
> 
> 赞同：1
> 
> 时间：2012-04-29T21:57:29.967
> 
> 标签：javascript, modal-dialog

我的 Javascript 代码中有一些函数可以执行长时间的操作，例如将各种图像绘制到画布上。在执行这些功能时，我不希望用户能够访问 UI 上的按钮，因此我在所有内容上放置了一个大的模态 div 以在过程发生时掩盖按钮。然而，我很快意识到，由于代码是连续的，UI 永远没有机会更新，而且模态 div 从未真正出现，因为它在过程结束时被删除。

我的问题是，在这种情况下真的有必要掩盖 UI 吗？如果用户在执行操作时确实按下了另一个按钮，新进程是否会等到前一个进程完成后再开始？或者，也许由于模态 UI 在他们单击 UI 时*应该*已启动，因此模态将阻止新进程启动。另一种方法是，我可以在将模态 div 设置好之后直接设置一个超时时间，让 UI 有时间在开始该过程之前进行更新，但我不确定这是否有必要。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T22:46:42.963

如有疑问，请自行控制任务。当您开始“单一类型”操作时 - 提出一些标志，表明它正在进行中。如果您收到来自某个 UI 元素的消息，将再次启动此任务`return`。完成后，删除标志。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T22:46:50.503

是的，您需要封面 div，不，新进程不会等到前一个进程完成后再开始（除非您对它们进行了编码）。

强制重绘的一个简单技巧是使用`setTimeout`毫秒`0`。重新布局应尽快进行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-06T10:42:14.063

由于引擎执行 javascript 的方式，您确实需要 div。如果您想阅读它，那将非常有趣-由 John Resig 撰写（如果我夸大其词，请原谅，呵呵）[http://ejohn.org/blog/how-javascript-timers-work/](http://ejohn.org/blog/how-javascript-timers-work/)。虽然是关于计时器和间隔，

如果您没有心情阅读，这里是摘要： 代码在同一个线程中执行，并且每当浏览器找到时间时，它就会暂停当前代码，并开始其他内容 - 执行本身不会停止 - 路径它的变化，暂时。我强烈建议您阅读完整的帖子。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-05-07T11:37:41.700

正如@Parth 指出的那样，浏览器在单个线程中运行 javascript，因此，如果`<div>`不存在覆盖，UI 事件将被触发，但将保留在队列中，直到长时间运行的功能完成。但是，通常不会出现这种行为。如果要冻结 UI，只需保留`<div>`叠加层。

如果你想让浏览器有机会更新 UI（或允许用户取消处理），你必须将长时间运行的函数逻辑分解为各种函数调用，并使用`window.setTimeout calls`. 有几种方法可以实现这种模式，但我喜欢非递归封闭队列方法：

```
// this will block UI until all images are painted:
function paintAll(arImg) {
    for(var i=0; i<arImg.length; i++) paintSingle(arImg[i]);
}

// this will block UI only while each image is painted:
function paintAll(arImg) {
    // copy arImg to queue not to modify the input parameter
    var queue = arImg.slice(0);

    // apply the paint function to the first element, remove it from queue
    // and set the runner function to run again after 5 milliseconds
    // (this will allow the UI thread to run between each runner call)
    var runner = function() {
        // check any UI based condition to abort running:
        if(!checkUiBasedCondition()) return;

        if(!queue.length) return;
        paintSingle(queue.shift());
        window.setTimeout(runner, 5);
    }

    // call runner to initiate the processing
    runner();
} 
```

[https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/shift](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/shift) [https://developer.mozilla.org/en/DOM/window.setTimeout](https://developer.mozilla.org/en/DOM/window.setTimeout)

# unit-testing - WP7 应用程序的 HttpWebRequest 抛出 NullReferenceException

> ID：10376360
> 
> 赞同：0
> 
> 时间：2012-04-29T21:57:54.863
> 
> 标签：unit-testing, windows-phone-7, httpwebrequest, nullreferenceexception

我有以下代码在我的 WP7 应用程序中创建一个 HttpWebRequest。我正在尝试从类型为“Silverlight 单元测试应用程序”的单元测试应用程序调用此代码，目标框架设置为 Silverlight 5。我从 Jeff Wilcox 的博客中获取了 WP7.5 Mango Beta 测试程序集：

```
public void SomeFunction()
{
    Uri uri = new Uri("http://www.google.com");
    HttpWebRequest request = HttpWebRequest.CreateHttp(uri);
    request.Method = "POST";
    ...
} 
```

在上面的代码中，创建请求的行会抛出一个`NullReferenceException`. 堆栈跟踪不提供任何有价值的东西。

发生这种情况是因为我使用的是 SL 测试应用程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:46:17.607

Windows Phone 7.5 使用 Silveright 4，而不是 5，但它与两者的桌面版本不兼容（单元测试必须从 WP 模拟器运行）。

创建 WP 测试项目：

1.  创建 Windows Phone Silverlight 应用程序项目
2.  添加对您的实际应用程序项目的引用
3.  下载并参考[Mango 的 SL 单元测试程序集](http://www.jeff.wilcox.name/2011/06/updated-ut-mango-bits/)
4.  将以下代码添加到`Loaded`事件处理程序中的 MainPage：

_

```
var testPage = UnitTestSystem.CreateTestPage() as IMobileTestPage; 
BackKeyPress += (x, xe) => xe.Cancel = testPage.NavigateBack(); 
(Application.Current.RootVisual as PhoneApplicationFrame).Content = testPage; 
```

关于主题，您*可以*通过重新注册正确的处理程序来解决问题：

```
WebRequest.RegisterPrefix("http://", WebRequestCreator.ClientHttp);
WebRequest.RegisterPrefix("https://", WebRequestCreator.ClientHttp); 
```

但是，我建议您重新开始。

# python - 核心python中是否使用二进制搜索算法？

> ID：10376366
> 
> 赞同：1
> 
> 时间：2012-04-29T21:58:15.633
> 
> 标签：python

我正在使用二进制搜索算法的核心 python 2.x 中寻找实例。你有什么快速的指示在哪里看吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:16:20.250

bisect 模块使用二分查找。这是源代码的链接：http: [//hg.python.org/cpython/file/2.7/Lib/bisect.py](http://hg.python.org/cpython/file/2.7/Lib/bisect.py)

大多数 Python 核心的其余部分使用哈希表或线性搜索。

# javascript - 显示带有快捷键但不插入快捷键的文本区域

> ID：10376374
> 
> 赞同：0
> 
> 时间：2012-04-29T21:59:33.353
> 
> 标签：javascript, jquery, textarea

```
$(document).keydown(function(event) {

if(event.keyCode === 70) {
$.("#myTextarea").css('display','block');
$.('textarea').focus();
} 
```

问题是当我单击**f**并且 div 在 textarea 中可见时，其中有字母 f

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:01:53.517

```
$(document).keydown(function(event) {
    if(event.keyCode === 70) {
    $.("#myTextarea").css('display','block');
    $.('textarea').focus();
    return false;
} 
```

基本上，您需要通过从函数返回 false 或调用 event.preventDefault() 来防止默认事件行为。

[http://api.jquery.com/event.preventDefault/](http://api.jquery.com/event.preventDefault/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:02:06.763

试试这个：

```
$(document).keydown(function(event) {
if(event.keyCode === 70) {
$.("#myTextarea").val(" ");
$.("#myTextarea").css('display','block');
$.('textarea').focus();
} 
```

# jquery - jquery在弹出窗口关闭时重新附加div

> ID：10376380
> 
> 赞同：1
> 
> 时间：2012-04-29T22:00:21.207
> 
> 标签：jquery, popupwindow

我正在使用 jQuery 打开一个弹出窗口，效果很好，但我也有 #content div 从“父”页面分离...

```
$('.newWindow').click(function(ev){

window.open('popout.html','pop out','width=400,height=345');
ev.preventDefault();
$('#content').detach();
return false;

}); 
```

使用的链接：

```
<a href="popout.html" rel="0" class="newWindow">Pop Out Window</a> 
```

当弹出窗口关闭时，如何“重新附加”该 div？

我已经尝试了很多我在 SO 上找到的答案，但似乎没有一个有效。

**更新：**

似乎我的浏览器缓存了弹出窗口，因为当我查看源代码（通过右键单击查看源代码）时，我注意到我所做的任何更改 IE 新的 JS 代码不在那里，所以关闭浏览器并重新打开，嘿，在那里进行代码编辑...

暂时去了：

```
window.onunload = function(){
  window.opener.location.reload();
}; 
```

它在子关闭时刷新父页面，但仍然更喜欢重新附加方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:05:52.033

你可以试试

```
var p; // where p may be of global scope

$('.newWindow').click(function(ev){

window.open('popout.html','pop out','width=400,height=345');
ev.preventDefault();
 p = $('#content').detach();
return false;
}); 
```

//在窗口关闭时

```
if(p){
 p.appendTo("body");//or where ever you want it to append
 p = null;
} 
```

代码取自[**此处给出的示例**](http://api.jquery.com/detach/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:13:44.427

创建一个临时变量来存储之前的 div `detaching`。

```
var content; // temp storage

$('.newWindow').click(function(ev){

     window.open('popout.html','pop out','width=400,height=345');
     ev.preventDefault();
     content = $('#content');
     content.detach();
     return false;
}); 
```

当您需要再次在 DOM 中重新附加它时，只需使用`.appendTo()`

```
content.appendTo($("#whereToReAttach")); 
```

# c# - 其中 T： 进入其中 T: 类给出 cs0452

> ID：10376383
> 
> 赞同：4
> 
> 时间：2012-04-29T22:00:46.233
> 
> 标签：c#, generics

我有

```
public static void SecureTcpRpc<InterfaceType>(string uri, 
                                               Action<InterfaceType> action) 
                                              where InterfaceType : class; 
```

然后我在这里使用它

```
 private static AuthorizedActionResult 
                RunChannelAction<T>(IEnumerable<string> uris, 
                                    Func<T, AuthorizedActionResult> actionFunc)
                                    where T : IPingable
            {
                    WcfClient.SecureTcpRpc<T>.... 
```

编译器不喜欢我将 T 限制为 IPingable。我不明白它为什么反对。IPingable 是一个引用类型，因此它匹配 SecureTpcRpc 方法的约束。但是编译器说'T必须是引用类型'

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T22:22:35.270

我认为您还需要对该功能的“类”约束`AuthorizedActionResult`才能使其正常工作。

```
where T : class, IPingable 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:11:18.943

第二个应该是通用的吗？如果是接口类型，应该是这样的：

```
private static AuthorizedActionResult RunChannelAction(
  IEnumerable<string> uris, 
  Func<IPingable, AuthorizedActionResult> actionFunc)
        {
                WcfClient.SecureTcpRpc<IPingable>.... 
```

# android - 接收蓝牙发现的广播错误

> ID：10376388
> 
> 赞同：1
> 
> 时间：2012-04-29T22:01:29.550
> 
> 标签：android, bluetooth, broadcastreceiver

我正在尝试查找附近的蓝牙设备，所以我正在使用 BroadcastReceiver。大多数情况下它工作正常，但有时我会收到此错误。

```
04-30 09:50:15.277: E/AndroidRuntime(847): FATAL EXCEPTION: main
04-30 09:50:15.277: E/AndroidRuntime(847): java.lang.RuntimeException: Error receiving broadcast Intent { act=android.bluetooth.device.action.FOUND (has extras) } in com.waratah.app.SetMachineActivity$2@40582d20
04-30 09:50:15.277: E/AndroidRuntime(847):  at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:722)
04-30 09:50:15.277: E/AndroidRuntime(847):  at android.os.Handler.handleCallback(Handler.java:587)
04-30 09:50:15.277: E/AndroidRuntime(847):  at android.os.Handler.dispatchMessage(Handler.java:92)
04-30 09:50:15.277: E/AndroidRuntime(847):  at android.os.Looper.loop(Looper.java:130)
04-30 09:50:15.277: E/AndroidRuntime(847):  at android.app.ActivityThread.main(ActivityThread.java:3683)
04-30 09:50:15.277: E/AndroidRuntime(847):  at java.lang.reflect.Method.invokeNative(Native Method)
04-30 09:50:15.277: E/AndroidRuntime(847):  at java.lang.reflect.Method.invoke(Method.java:507)
04-30 09:50:15.277: E/AndroidRuntime(847):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
04-30 09:50:15.277: E/AndroidRuntime(847):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
04-30 09:50:15.277: E/AndroidRuntime(847):  at dalvik.system.NativeStart.main(Native Method)
04-30 09:50:15.277: E/AndroidRuntime(847): Caused by: java.lang.NullPointerException
04-30 09:50:15.277: E/AndroidRuntime(847):  at com.waratah.app.SetMachineActivity$2.onReceive(SetMachineActivity.java:532)
04-30 09:50:15.277: E/AndroidRuntime(847):  at android.app.LoadedApk$ReceiverDispatcher$Args.run(LoadedApk.java:709)
04-30 09:50:15.277: E/AndroidRuntime(847):  ... 9 more 
```

它显示 NullPointerException 但我看不到此错误是如何发生的，因为我正在检查变量以避免异常。

```
// The BroadcastReceiver that listens for discovered devices and
// changes the title when discovery is finished
private final BroadcastReceiver mReceiver = new BroadcastReceiver() {
    @Override
    public void onReceive(Context context, Intent intent) {
        if (intent == null) {
            return;
        }
        String action = intent.getAction();
        int i;
        Machine d;

        if (BluetoothAdapter.ACTION_STATE_CHANGED.equals(action)) {
            if (mBtAdapter.isEnabled()) {
                if(D) Log.d(BroadcastReceiver.class.getName(), "Bluetooth is enabled");
                pd.dismiss();                   
            }
            doDiscovery();

        // when bluetooth device is found 
        } else if (BluetoothDevice.ACTION_FOUND.equals(action)) { 
            if(D) Log.d(BroadcastReceiver.class.getName(), "found");
            // Get the BluetoothDevice object from the Intent
            BluetoothDevice device = intent.getParcelableExtra(BluetoothDevice.EXTRA_DEVICE);
            if (device != null) {

                // Check if the device has name
                if ((device.getName() != null)||(device.getName().length() > 0)) { //LINE 532 HERE 
                    d = new Machine(device);
                    if (d.getPairingState() != BluetoothDevice.BOND_BONDED) {
                        d.setBluetoothState(true);
                        addDevice(d);
                    } else {
                        for (i = 0; i < adapter.getCount(); i++) {
                            if (adapter.getItem(i).getAddress().equals(device.getAddress())) {
                                    adapter.getItem(i).setBluetoothState(true);
                            }
                        }
                    }
                }
            }
        // When discovery is finished, change the Activity title
        } else if (BluetoothAdapter.ACTION_DISCOVERY_FINISHED.equals(action)) {
            scanButton.setVisibility(View.VISIBLE);

            pb.setVisibility(View.GONE);
            scanning.setVisibility(View.GONE);
        }
    }
}; 
```

我已经注册了我的所有操作并正确注册了我的接收器。此错误仅偶尔发生。当没有东西可以接收时，是否可以触发 onReceive() 函数？

谢谢你的帮助。

编辑：第 532 行是

```
 if ((device.getName() != null)||(device.getName().length() > 0)) { 
```

所以这意味着设备必须为空，但前一行检查了这一点。

```
if (device != null) { 
```

顺便说一句，两个广播接收器同时运行会导致这种错误吗？BroadcastReceiver 收到后是否将意图归零？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:54:39.193

我怀疑你误用了|| 代替 ＆＆。

`if ((device.getName() != null)||(device.getName().length() > 0)) {`

对比

`if ((device.getName() != null) && (device.getName().length() > 0)) {`

如最初所写，如果 device.getName() 为 null，则它会尝试评估第二部分，即在 null 值上调用 length()，从而导致您看到的 NPE。

# c# - “隐藏”的正则表达式？

> ID：10376394
> 
> 赞同：2
> 
> 时间：2012-04-29T22:02:00.277
> 
> 标签：c#, .net, regex

C# 中有什么方法可以使用正则表达式，但只返回（使用 Regex.Match）正则表达式的一部分？例如，

```
string input = "Hello my friend!";
string pattern = "\\w+ my friend.";
Console.WriteLine(Regex.Match(input, pattern)); //Returns "Hello my friend!" 
```

但是如果我只想要“你好”，或者只是最后的标点符号呢？*我知道我可以*做类似 " " （`^\\w+`甚至`.split(' ')[0]`只是任何方式来做到这一点，或者只是这样做会更简单*`my friend.`*

 *```
string input = "Hello my friend!";
string pattern = "\\w+ my friend.";
if (Regex.IsMatch(input, pattern))
{
    Console.WriteLine(input.Split(' ')[0]);
}
else
{
    Console.WriteLine("");
} 
```

（对不起，如果这真的很简单，或者我遗漏了什么，我刚刚开始真正使用正则表达式）

谢谢，

马修

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:11:54.723

除了其他答案中建议的捕获组之外，您还可以使用前瞻。所以你可以使用类似的表达式`"\\w+(?= my friend)"`，整个匹配只会返回`\\w+`部分。

通常，形式为`a(?=b)`where`a`和`b`are 正则表达式的模式仅在其后跟但不匹配`a`时才匹配。`b``b`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:08:23.320

您可以使用“组”来捕获字符串的特定部分。例如，假设您想在`Hello, John!`. 我们的正则表达式看起来类似于：

```
/Hello, (.+)/ 
```

( `()`group) 运算符捕获其中的任何内容。然后我们可以使用以下代码来获取名称。

```
var regex = new Regex(@"Hello, (.+)");
var match = regex.Match("Hello, John");

System.Console.WriteLine("Your name is {0}.", match.Groups[1]); // Your name is John. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T22:08:36.400

我认为您正在寻找在正则表达式中*捕获组。*您可以使用括号标识捕获组。对于您的特定示例：

```
string input = "Hello my friend!";
string pattern = "(\\w+) my friend";
var match = Regex.Match(input, pattern);
Console.WriteLine(match.Groups[1]); // Prints "Hello" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T22:12:03.483

或者你可以用前瞻来做（未经测试，因为我没有任何方法来测试 c#）

```
"\\w+(?=\\s+my friend)" 
```*

# java - 阵列问题不打印中间或中间

> ID：10376397
> 
> 赞同：1
> 
> 时间：2012-04-29T22:02:29.610
> 
> 标签：java

我希望用户能够将数字添加到数组中，直到`randomNumber`输入预定值。然后我想打印数组的中间和中位数。

该代码适用于用户输入，但我从中间或中位数没有得到任何东西，它只是说`0`。

谁能帮我解决这个问题？这是我的代码：

```
import java.util.Arrays;
import java.util.Scanner;

public class ArrayTest {
    Scanner input = new Scanner( System.in );

    int usersGuess;       
    int randomNumber = 45;

public void enterNumbers() {
    do {
        System.out.printf("Please enter numbers: ");
        usersGuess  = input.nextInt();

        if ( usersGuess != randomNumber ) {
            System.out.printf("Please enter numbers: ");
            usersGuess  = input.nextInt();
        }
        else 
              System.out.println("Correct guess");
    } 
    while ( usersGuess != randomNumber );   

    int testArray []  = new int[ 20 ];

    boolean correctGuess = false;

    for ( int i = 0; i < testArray.length; i++ ) {
        testArray[ i ] = usersGuess ;

        if ( testArray[ i ] == randomNumber ) {
            correctGuess = true;
            break;
        }
    }

    System.out.println();System.out.println( "Middle is: " + testArray
            [ ( testArray.length + 1)/2] );

    Arrays.sort( testArray );

    System.out.println( "Median is: " + testArray[ testArray.length/2] );
    System.out.println();
}

public class Test {
    public static void main( String [] args ){
        ArrayTest arrayTest = new ArrayTest();
        arrayTest.enterNumbers();
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:37:59.590

我很确定如果您不知道如何构造数组，那么您不应该使用数据结构 ArrayList。这是没有 ArrayList 的完整版本的代码。

*   数组是最终的，因为它们在创建后无法更改。所以在这个例子中，我使用了最大数量的猜测

希望这可以帮助...

```
 import java.util.Arrays;
    import java.util.Scanner;

    public class ArrayTest 
    {
        Scanner input = new Scanner( System.in );

        int usersGuess;       
        int randomNumber = 45;
         int num_of_guesses = 0;

         int max_guesses = 20;

        public void enterNumbers()
        {
            int testArray []  = new int[ max_guesses ];

             do
            {

                  if ( usersGuess != randomNumber )
                {
                    System.out.printf("Please enter numbers: ");
                    usersGuess  = input.nextInt();     

                }
                else 
                      System.out.println("Correct guess");

                  testArray[ num_of_guesses ] = usersGuess;
                  num_of_guesses++;

                  if ( num_of_guesses >= max_guesses)
                {
                    System.out.println("Your all out of guesses!");
                    break;     
                } 

            } 
            while ( usersGuess != randomNumber &&  max_guesses >= num_of_guesses );

            System.out.println( "\nMiddle is: " + testArray
                    [ ( num_of_guesses)/ 2] );

            Arrays.sort( testArray, 0, num_of_guesses );

            System.out.println( "Median is: " + testArray[ ( num_of_guesses)/ 2 ] );
            System.out.println();

        }

    }

    public class Test 
    {
        public static void main( String [] args )
        {
            ArrayTest arrayTest = new ArrayTest();

            arrayTest.enterNumbers();
        }

    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:06:36.467

你没有节省用户的猜测。你需要`testArray`在你的第一个`do while`循环中添加他们的猜测。

这应该适合你：

```
public void enterNumbers()
{
    List<Integer> guesses = new ArrayList<Integer>();
    do  
    {   
        System.out.printf("Please enter numbers: "); 
        usersGuess  = input.nextInt();
        guesses.add(usersGuess);

        if ( usersGuess != randomNumber )
        {   
            System.out.printf("Please enter numbers: "); 

        }   
        else 
              System.out.println("Correct guess");   

    }   
    while ( usersGuess != randomNumber );

    int size = guesses.size();
    System.out.println("\nMiddle is: " + guesses.get((size + 1) / 2);

    Collections.sort(guesses);

    System.out.println("Median is: " + guesses.get(size / 2));
    System.out.println();
} 
```

# dom - 一种在 Slickgrid 的列格式化程序中返回 DOM 对象或 jQuery 的方法

> ID：10376403
> 
> 赞同：2
> 
> 时间：2012-04-29T22:03:19.460
> 
> 标签：dom, slickgrid, formatter

Slickgrid 的列格式化程序将 html 返回给网格对象，因此基本上没有办法在格式化程序中创建的元素上附加事件。必须使用 $.live() 来捕获这些元素，为什么 Slickgrid 格式化程序使用 HTML 而不是 DOM 对象？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T16:39:11.857

1）因为以这种方式渲染它更快。2）阻止开发人员做你想做的事情：）这种方法是不可扩展的。使用事件委托是这里的方法。

# linux - 从 lastlog 中捕获错误（unix 和 bash）

> ID：10376410
> 
> 赞同：0
> 
> 时间：2012-04-29T22:04:47.320
> 
> 标签：linux, bash, unix

我正在创建一个脚本来检测哪个用户有一段时间没有连接到服务器。

到目前为止一切都很好，但现在试图从我的脚本生成的列表中删除一些不需要的条目。我想在我的脚本中添加一个异常，以便在使用未使用的参数调用 lastlog 时，输出不会打印到屏幕上。

我试过类似的东西：

```
if [ $? -gt 0 ]; then
    echo "ERROR!"
fi 
```

但问题是 lastog 在成功时返回 0 但很简单：

```
lastlog: Unknown user or range: infolog 
```

关于错误。所以我无法捕捉到例外。

这是我的代码（非常简单）

```
#!/bin/bash
FILES=../*

for year in 2000 2001 2002 2003 2004 2005 2006 2007 2008 2009 2010 2011 2012
do
    for f in $FILES
    do
        tempUser=${f:3:20}
        userCommand=`lastlog -u $tempUser | grep $year`

        if [ ${#userCommand} != 0 ]   
        then
          echo "$userCommand"
        fi

    done
done 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:22:26.187

您可以非常简单地对此进行测试，但在我方便的 linux 机器`lastlog`上确实为错误的用户名设置了非零状态：

```
$ if lastlog -u nosuchuser; then echo no error; else echo error; fi
lastlog: Unknown user or range: nosuchuser
error 
```

如果您在管道中运行它，问题在于管道序列的“状态”是管道*最后一个*元素的状态：

```
$ progA | progB | progC
$ echo $? 
```

打印 progC 的状态。

`PIPESTATUS`如果您使用 bash，则可以通过 bash 的数组变量从所有内容中获取状态：

```
bash$ progA | progB | wc
bash: progB: command not found
bash: progA: command not found
      0       0       0
bash$ echo ${PIPESTATUS[@]}
127 127 0
bash$ 
```

这应该可以让您继续前进。

* * *

编辑：您甚至可能不在乎，只是在寻找一种方法来丢弃 stderr 的输出`lastlog`，在这种情况下，请考虑：

```
$ lastlog 2>/dev/null | grep ... 
```

# c - 如何将从文件中读取的字符串拆分为 C 中的数组

> ID：10376411
> 
> 赞同：1
> 
> 时间：2012-04-29T22:04:51.140
> 
> 标签：c, arrays, file

我有一个简单的文件，其中包含 100 个文件名及其相应大小的列表，如下所示：

```
file1.txt, 4000
file2.txt, 5000 
```

等等。如何逐行读取文件，然后将文件名列表存储到 char 数组中，然后将大小列表存储到 int 数组中？我正在尝试像这样使用 sscanf ，但这不起作用。我遇到了段错误：

```
main(){
    char line[30];
    char names[100][20];
    int sizes[100];
    FILE *fp;
    fp = fopen("filelist.txt", "rt");
    if(fp == NULL){
        printf("Cannot open filelist.txt\n");
        return;
    }

    while(fgets(line, sizeof(line), fp) != NULL){
        sscanf(line, "%s, %d", names[i][0], sizes[i]);
        printf("%d", sizes[i]);
        i++;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:09:03.997

`i`不防止超过，这是可以读取的和`100`的最大数量。如果文件中有超过一百行，则会发生越界访问。通过进行此（或类似）更改来防止这种情况：`sizes``names`

```
while (i < 100 & fgets(line, sizeof(line), fp) != NULL) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T04:22:45.900

```
#include <stdio.h>
int main()
{
char line[30];
char names[100][20];
int sizes[100];
int i = 0;
FILE *fp;

fp = fopen("1.txt", "rt");

if(fp == NULL)
{
    printf("cannot open file\n");
    return 0;
}
while(fgets(line, sizeof(line), fp) != NULL)
{
     sscanf(line, "%[^,]", names[i]);//output the string until the char is the ","
     sscanf(line, "%*s%s", sizes);//skip the characters and get the size of the file 
        printf("%s\n", names[i]);
        printf("%s\n", sizes);

    i++;
}
fclose(fp);

return 0;
} 
```

我想这就是你想要的。

您应该正确理解 sscanf() 。

![在此处输入图像描述](../Images/66cc2177c7c9e16f6aaaf567ce46cecf.png)

# c# - 从标准输入中读取未定义的行数

> ID：10376417
> 
> 赞同：10
> 
> 时间：2012-04-29T22:05:18.217
> 
> 标签：c#

我有未知数量的输入行。我知道每一行都是一个整数，我需要用所有行创建一个数组，例如：

输入：

```
12
1
3
4
5 
```

我需要把它作为一个数组：`{12,1,3,4,5}`

我有下面的代码，但我无法获取所有行，也无法调试代码，因为我需要发送它来测试它。

```
List<int> input = new List<int>();

string line;
while ((line = Console.ReadLine()) != null) {
     input.Add(int.Parse(Console.In.ReadLine()));
}

StockItem[] stock = new StockItem[input.Count];
for (int i = 0; i < stock.Length; i++) {
    stock[i] = new StockItem(input.ElementAt(i));
} 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-29T22:12:19.667

```
List<int> input = new List<int>();

// As long as there are nonempty items read the input
// then add the item to the list    
string line;
while ((line = Console.ReadLine()) != null && line != "") {
     input.Add(int.Parse(line));
}

// To access the list elements simply use the operator [], instead of ElementAt:
StockItem[] stock = new StockItem[input.Count];
for (int i = 0; i < stock.Length; i++) {
    stock[i] = new StockItem(input[i]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T22:25:53.147

你真的需要数组中的ID吗？我可能会尝试这样的事情：

```
 // Use a function that takes a StringReader as an input.
    // That way you can supply test data without using the Console class.
    static StockItem[] ReadItems(StringReader input)
    {
      var stock = new List<StockItem>();

      // Only call ReadLine once per iteration of the loop.
      // I expect this is why you're not getting all the data.
      string line = input.ReadLine();
      while( ! string.IsNullOrEmpty(line) ) {

        int id;
        // Use int.TryParse so you can deal with bad data.
        if( int.TryParse(line, out id) ) { 
          stock.Add(new Stock(id));
        }

        line = input.ReadLine();
      }

      // No need to build an populate an array yourself. 
      // There's a linq function for that.
      return stock.ToArray();
    } 
```

然后你可以调用它

```
 var stock = ReadItems(Console.In); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-30T18:22:03.230

使用列表是一个好方法。但是您应该考虑限制总行数。

此外，OP没有说空行应该终止列表！

所以应该只检查 null 。

请参阅[如何在 C# 中的控制台上检测 EOF？Console.ReadLine() 在 EOF 时返回什么？](https://stackoverflow.com/questions/36526669/how-to-detect-eof-on-the-console-in-c-what-does-console-readline-returns-upo)

# python - PyPI 包的安装数量统计信息？

> ID：10376429
> 
> 赞同：23
> 
> 时间：2012-04-29T22:07:30.143
> 
> 标签：python, pypi

我现在在 Python 包索引 (PyPI) 上有几个包。有什么方法可以获取有关下载次数的统计信息（手动或通过`easy_install`或`pip`？

或者，或者，主包页面收到了多少次浏览？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2013-03-28T00:37:58.523

至少有两个包可以帮助解决这个问题：[`pypstats`](https://pypi.python.org/pypi/pypstats/)和[`vanity`](https://pypi.python.org/pypi/vanity). Vanity 在命令行中非常容易使用：

```
vanity numpy 
```

你会得到一个打印输出到你的控制台。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2017-05-06T05:45:46.710

pypi.python.org 网站上没有 Pip 统计信息，并且`vanity`包也无法正常工作。

今天你只能通过 BigQuery 中的这个数据集获取点子统计信息：[https ://bigquery.cloud.google.com/dataset/the-psf:pypi](https://bigquery.cloud.google.com/dataset/the-psf:pypi)

[https://pypi.python.org/pypi/dvc](https://pypi.python.org/pypi/dvc)包的查询示例：

```
SELECT
  details.system.name,
  COUNT(*) as download_count,
FROM
  TABLE_DATE_RANGE(
    [the-psf:pypi.downloads],
    DATE_ADD(CURRENT_TIMESTAMP(), -31, "day"),
    DATE_ADD(CURRENT_TIMESTAMP(), -1, "day")
  )
WHERE
  file.project = 'dvc'
GROUP BY details.system.name 
```

请注意，部分下载信号是由监控工具产生的，不应计入用户下载量。例如，您应该`null`从输出中排除值：

```
Row details_system_name download_count   
1   Darwin  1111     
2   null    10000    
3   Windows 222  
4   Linux   3333 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2020-10-19T09:12:01.487

我在其他答案中尝试了不同的方法。就我而言，虚荣心不再起作用，原因就[在这里](https://github.com/aclark4life/vanity/issues/66/)。pypi.python.org 网站上没有 Pip 统计信息，原因在[Python 打包指南](https://packaging.python.org/guides/analyzing-pypi-package-downloads/)中提到，以及如何使用 Google Big Query 分析 PyPI 下载的详细指南（在此答案中总结如下）。

有 2 种方法仍然可用。

## PyPIstats.org

**第一种方法比第二种方法容易，**但似乎不太可靠，因为它有时会返回`429 RATE LIMIT EXCEEDED`

1.  转到[pypistats.org](https://pypistats.org/)；
2.  搜索包名；
3.  获取其下载的统计信息。下图是 的结果`numpy`。[![在此处输入图像描述](../Images/8a5437be7295417903927613deecc5db.png)](https://i.stack.imgur.com/TQx82.png)

## 谷歌大查询

**第二种方法**是谷歌大查询，由 PiPy[官方](https://packaging.python.org/guides/analyzing-pypi-package-downloads/)推荐。

1.  转到 [https://bigquery.cloud.google.com/dataset/the-psf:pypi](https://bigquery.cloud.google.com/dataset/the-psf:pypi)
2.  将以下代码复制到`editor`窗口中。

```
SELECT
  details.installer.name,
  COUNT(*) as download_count,
FROM `the-psf.pypi.downloads*`
WHERE
file.project = 'dvc'
AND _TABLE_SUFFIX
BETWEEN FORMAT_DATE('%Y%m%d', DATE('2020-01-04'))
AND FORMAT_DATE('%Y%m%d', DATE('2020-02-04'))
GROUP BY details.installer.name 
```

3.  点击`run`按钮，得到结果。下面两张图显示了代码和结果`numpy`。
    [![代码](../Images/f4d5520a02b94bf0c296cad881e75b5f.png)](https://i.stack.imgur.com/Mzz0p.png) [![结果](../Images/2b1bb7722d7df6244b667327034dbfae.png)](https://i.stack.imgur.com/2i5uf.png)

请注意，第二种方法需要您有谷歌云账号，**并且**需要您提供您的信用卡信息，**并且**每天查询次数有限。**所以我个人推荐第一种方法。**

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2012-04-30T00:01:32.267

**更新2：它回来了！现在在下载列表之后（在用户提供的文档下方）有一个“下载（所有版本）”。**

[http://mail.python.org/pipermail/distutils-sig/2013-June/021344.html](http://mail.python.org/pipermail/distutils-sig/2013-June/021344.html)上的公告- 目前是每日计数；几周和几个月将在可用时添加。但是，奇怪的是，没有总数。

~~**更新：这不再有效（不显示信息） - 请参阅[http://mail.python.org/pipermail/distutils-sig/2013-May/020855.html](http://mail.python.org/pipermail/distutils-sig/2013-May/020855.html)（不幸的是，这也会影响其他答案）。**~~

也许我误解了（对不起），但我认为这是在您项目的 pypi 主页上！

有关最新详细信息，请参阅上面的更新（我已删除下面不再正确的信息）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-08-26T11:35:01.800

我发现了一个网站：[https ://pypistats.org/packages/py3-pinterest](https://pypistats.org/packages/py3-pinterest)

他们跟踪下载量，但只跟踪 1 天、1 周和 1 个月。@Dmitry Petrov 的回答更好。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2020-04-14T08:23:32.937

您现在可以使用[pypistats](https://pypistats.org)网站检查您的统计信息。

对于`pytest`包：[https ://pypistats.org/packages/pytest](https://pypistats.org/packages/pytest)

这些数字与 bigquery 的数字一致。例如 day `13-04`: 501685 没有镜像的下载。

使用请求：

```
#standardSQL
SELECT
  COUNT(*) AS num_downloads,
  SUBSTR(_TABLE_SUFFIX, 7, 8) AS `day`
FROM `the-psf.pypi.downloads*`
WHERE file.project = 'pytest'
  AND _TABLE_SUFFIX
    BETWEEN FORMAT_DATE(
      '%Y%m%d', DATE_SUB(CURRENT_DATE(), INTERVAL 10 DAY))
    AND FORMAT_DATE('%Y%m%d', CURRENT_DATE())
GROUP BY `day`
ORDER BY `day` 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-02-05T23:02:45.693

如果您想过滤数据并检查每个安装程序运行的所有下载：

```
SELECT
  details.installer.name,
  COUNT(*) as download_count,
FROM `the-psf.pypi.downloads*`
WHERE
file.project = 'dvc'
AND _TABLE_SUFFIX
BETWEEN FORMAT_DATE('%Y%m%d', DATE('2020-01-04'))
AND FORMAT_DATE('%Y%m%d', DATE('2020-02-04'))
GROUP BY details.installer.name 
```

所以你应该看到所有的安装程序，例如： [![在此处输入图像描述](../Images/c1c53feccd7b0f6b4a52640f4a92448e.png)](https://i.stack.imgur.com/RppDk.png)

有关更多信息，请查看[有用的查询](https://packaging.python.org/guides/analyzing-pypi-package-downloads/#useful-queries)

# android - 当我转动屏幕或激活屏幕保护程序时，Android 收音机应用程序停止播放

> ID：10376431
> 
> 赞同：1
> 
> 时间：2012-04-29T22:07:49.073
> 
> 标签：android, shoutcast, gyroscope, background-music, android-music-player

我创建了一个使用 SHOUTcast 广播电台的网络广播应用程序，当我按下播放按钮时，它基本上会播放预定的网络广播电台。它工作正常，但是当我转动屏幕时，音乐暂停，我必须再次按播放。当屏幕在一段时间后锁定时，它也会暂停。如何防止音乐停止？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:13:39.167

您有 2 个问题：首先，您可能没有正确处理屏幕旋转/方向更改。看一下[这个](http://developer.android.com/guide/topics/resources/runtime-changes.html)以获得有关方法的一些指导。第二个问题是屏幕锁定时网络可能会断开：您可能需要获取唤醒锁以防止这种情况或明确禁止 wifi 睡眠。看看这个答案：[当手机处于睡眠状态时，如何防止 Wifi 断开连接？](https://stackoverflow.com/questions/3871824/how-do-i-keep-wifi-from-disconnecting-when-phone-is-asleep)获得一些指导。

# javascript - 检查不存在的变量时的控制流模式

> ID：10376435
> 
> 赞同：1
> 
> 时间：2012-04-29T22:08:42.173
> 
> 标签：javascript

我看到了以下模式并尝试将其调整为我自己的用途：

```
var request = window.ActiveXObject ?
  new ActiveXObject('Microsoft.XMLHTTP') :
  new XMLHttpRequest; 
```

简化：

```
var request = window.ActiveXObject ?
  "is ActiveX" : "not ActiveX";
document.write(request + "<br>");
// I get not ActiveX (Chrome) 
```

现在当我尝试：

```
var notX = "x"; 
  var j = x ? "has x" : "no x";
  document.write(j + "<br>");
  // console error: x is not defined 
```

[http://jsfiddle.net/4mn8n/1/](http://jsfiddle.net/4mn8n/1/)

什么都没有输出。与该程序继续但在的情况下没有什么`window.ActiveXObject`不同？`x``document.write``x`

**- 更重要的是**

我可以用什么强大的模式来代替上述模式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:14:49.253

变量和属性之间有很大的区别（尽管变量*始终*是某个对象的属性；有时该对象没有名称并且您无法直接访问它，例如调用函数时使用的*变量绑定对象）。*当你这样做时：

```
if (thingy.x) {
    // ...
} 
```

...您正在检查一个*属性*。如果该属性不存在，则不是错误，只是您返回的值是`undefined`.

相反，如果你这样做：

```
if (x) {
    // ...
} 
```

...您正在检查一个*名为*`x`. 如果*根本*`x`不存在，这是一个*错误*（特别是 a ），因为该符号是完全未定义的（而不是具有*value*的属性）。**`ReferenceError``x` *`undefined`***

 ***当您处理全局变量时，这有点模糊，因为全局变量是`window`浏览器中的全局对象的属性。因此，如果您有：

```
var x; 
```

...在全局范围内，`if (x)`将起作用，`if (window.x)`因为`x`是`window`（全局对象）的属性。但是有一个很大的区别，如果`x`没有*定义*，`if (x)`会抛出一个错误但`if (window.x)`会是错误的（因为表达式的`window.x`结果是`undefined`）。

除非您使用该语句，否则全局范围是唯一发生这种情况的范围`with`（我建议避免使用该语句，原因是[Crockford 在此处讨论](http://yuiblog.com/blog/2006/04/11/with-statement-considered-harmful/)）。（我并不总是同意 Crockford 的观点，事实上我可能会说这只是 50% 的事情，但他对 .) 有很好的看法`with`。）

您可以*可靠地*使用`typeof`任何参考，甚至是未定义的参考，因此：

```
if (typeof x !== "undefined") {
} 
```

...即使`x`完全未定义也可以工作，因此这通常是检查某物是否存在的最佳方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:11:15.893

当您仅按原样使用它来检查未定义的变量时，这是一个错误。原始代码没有错误，因为它将它作为对象的*属性*进行访问`window`；获取未定义的属性，而不是错误，会导致`undefined`JavaScript。

要检查变量，您可以`typeof`改用。

```
var j = typeof x !== 'undefined' ? "has x" : "no x"; 
```***

# ruby - 为什么我不能在我声明它的地方创建我的私有变量？

> ID：10376440
> 
> 赞同：3
> 
> 时间：2012-04-29T22:09:24.937
> 
> 标签：ruby

考虑以下代码

```
class CheckOut 
    @rules
    @total = 0
    @basket = Hash.new 

    def initialize(rules, discounts)
        @total=0
                #if i use the line below everything is ok.
        #@basket = Hash.new
        @rules = rules
    end

     def scan sku
          price = @rules[sku]
          if @basket.has_key?(sku) #I get NoMethodError: undefined method `has_key?' for nil:NilClass
             @basket[sku] += 1
          else 
              @basket[sku] = 1
          end
          @total += price
     end    

     def total
        @total
     end
end 
```

如果我按原样运行代码，我会在 has_key 上得到 noMethodError？但是如果我在初始化时创建哈希，一切正常。为什么我不能在声明时创建哈希？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T22:17:26.980

当你在类体中定义一个实例变量时，它是一个定义在 上的*类实例变量*`CheckOut`，它是 的实例`Class`，并且不存在于 的实例中`CheckOut`。相反，您需要在您`initialize`发现的情况下定义实例变量（因为`initialize`在新`CheckOut`实例的上下文中运行）：

```
class CheckOut
  def initialize(rules, discounts)
    @total = 0
    @basket = Hash.new
    @rules = rules
  end
  ...
end 
```

这是一个进一步说明这一点的快速示例：

```
class Foo
  @bar = "class bar!"
  @baz = "class baz!"
  def initialize
    @bar = "instance bar!"
  end
end

Foo.instance_variable_get(:@bar)  #=> "class bar!"
Foo.new.instance_variable_get(:@bar)  #=> "instance bar!"

Foo.instance_variable_get(:@baz)  #=> "class baz!"
Foo.new.instance_variable_get(:@baz)  #=> nil 
```

这也表明*所有*实例变量都默认为`nil`，即使它们以前从未被引用过。这就是为什么您的错误是 a`NoMethodError for nil:NilClass`而不是 a 的原因`NameError`。

# javascript - jquery试图实现鼠标方向和角度

> ID：10376441
> 
> 赞同：1
> 
> 时间：2012-04-29T22:09:25.167
> 
> 标签：javascript, jquery

我试图做一个鼠标方向+角度脚本，就像游戏“像素”一样。我希望能够使用 mousemove 事件移动元素，并让元素感觉到方向并将其尖端指向它。我似乎无法理解该方法的工作原理，我尝试了几种不同的方法来确定鼠标移动到某个角度的方向，但都没有奏效。这是游戏的示例，当然它是在 Flash 中，但该方法在 jquery 中应该是可能的。[http://www.agame.com/game/pixel.html](http://www.agame.com/game/pixel.html)

如果有人为此遇到过 jfiddle 或知道一个好的方法，请告诉我。

编辑*

我在下面尝试了这个，它几乎可以工作，但只有当鼠标的方向左右移动时。上下似乎是倒转的

```
var follow = $(".you");
var xp = 0, yp = 0;
var loop = setInterval(function(){
xp += (mouseX - xp) / 5;
yp += (mouseY - yp) / 5;
follow.css({left:xp, top:yp});

}, 15);
var lastx = 0;
var lasty = 0;
var img = $('.you');
var offset = img.offset();
function mouse(evt){

var mouse_x = evt.pageX; var mouse_y = evt.pageY;
    var degree=getDirection(lastx,lasty,mouse_x,mouse_y);
     lastx=mouse_x;
     lasty=mouse_y;
   img.css('-moz-transform', 'rotate('+degree+'deg)');
    img.css('-webkit-transform', 'rotate('+degree+'deg)');
    img.css('-o-transform', 'rotate('+degree+'deg)');
    img.css('-ms-transform', 'rotate('+degree+'deg)');
   }
   $(".field").mousemove(mouse);

 function getDirection(x1, y1, x2, y2,ns)
{
var dx = x2 - x1;
var dy = y2 - y1;
return (Math.atan2(dx,  dy) / Math.PI * 180);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:26:33.210

这样你才能找到行进的方向

```
function getDirection(x1, y1, x2, y2)
{
    var dx = x2 - x1;
    var dy = y2 - y1;

    return Math.atan2(dx,  dy) / Math.PI * 180;​
} 
```

我不太确定您是如何绘制图像的，因此无法帮助您实现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:42:33.117

在您的一条评论中，您说您使用顶部/左侧，但这显然是不够的：它会移动您的图像，但对角度没有任何作用。

您必须使用 CSS 样式`transform: rotate(45deg)`。看[这里](http://www.w3schools.com/css3/css3_2dtransforms.asp)。不幸的是，`transform`相对较新，您实际上必须为每种浏览器类型添加一个 CSS 行：`-ms-transform: rotate(45deg)`、`-webkit-transform: rotate(45deg)`等。您也可以使用`rad`而不是度数，这是`Math.atan`返回的值。

也看[这里](https://stackoverflow.com/questions/5610171/transform-in-jquery)，他们建议使用旋转插件来简化事情。

# java - 自定义服务器错误代码 spring MVC & tomcat

> ID：10376442
> 
> 赞同：1
> 
> 时间：2012-04-29T22:09:32.827
> 
> 标签：java, tomcat, servlets, spring-mvc, custom-error-handling

我正在编写一个 webapp，它应该能够处理如下请求：localhost:8080/WeddingApp/report?tid=1

如果服务器收到以下请求，我希望这样做： localhost:8080/WeddingApp/report localhost:8080/WeddingApp/report?tid=

发出错误 404/500 而不是默认的 400。不仅更改错误 400 重定向到的页面，还更改从服务器检索的错误代码。

怎样才能做到这一点？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T16:16:47.000

在您的代码查找请求参数的地方`tid`，将响应状态设置为您想要的代码，如下所示：

```
response.setStatus(404); 
```

`response`您的 servlet 类在哪里`HttpServletResponse`：

```
import java.io.*;
import javax.servlet.*;
import javax.servlet.http.*;

public class ServletExample extends HttpServlet {
  private void doGetOrPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {
    // ~~~ your code snippet ~~~
    String value = request.getParameter("tid");
    if (value == null) {
        response.setStatus(404);
    } else {
        // do something
    }
  }
} 
```

# c - 如何获取指向结构的指针数组？

> ID：10376444
> 
> 赞同：1
> 
> 时间：2012-04-29T22:09:53.267
> 
> 标签：c, arrays, pointers, structure

我需要创建一个头指针数组。

```
typedef struct data_{
  void *data;
  struct data_ *next;
}data;

typedef struct buckets_{
  data *data;
  void *key;
}buckets;

typedef struct hash_table_ {
  buckets **buckets_array;
} hash_table, *Phash_table;

Phash_table table_p;
table_p = (void *)malloc(sizeof(hash_table));
table_p -> buckets_array = (void **)malloc(sizeof(buckets buckets)*size); 
/*Line #7*/ 
```

当我尝试编译时，我得到了这个

```
hash.c:7:62: error: expected ')' before 'buckets'
hash.c:7:28: warning: assignment from incompatible pointer type [enabled by default] 
```

我正在尝试获取一组存储桶，每个存储桶将指向一个链表。我在正确的道路上吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:12:26.463

你有一个错字。我想你想写

```
table_p -> buckets_array = (void **)malloc(sizeof(buckets)*size); 
```

# c# - 自定义异常应该有自己的错误代码吗？

> ID：10376452
> 
> 赞同：2
> 
> 时间：2012-04-29T22:10:52.767
> 
> 标签：c#

我有一个我一直在处理的套接字包装库，除其他外，在开始时进行一点握手，以确保与您交谈的任何人都使用与您相同的协议和设置。我以标准方式创建了自己的异常类：

```
 private class NSocketProtocolException : System.Exception
    {
        public NSocketProtocolException(string message) : base(message) { }
    } 
```

我抛出这个异常有多种原因，比如，如果客户端和服务器没有使用相同版本的协议，如果一个想要使用加密而另一个不使用，等等。现在我是唯一的一个使用这个库的人，但我试图将它设计得足够友好，以便将来其他人也可以。为了让其他程序员能够对抛出异常的不同实例做一些更有价值的事情，我是否应该有自己的自定义错误代码来配合这些？

我真的不知道如何编辑错误代码，但更重要的是，我不想使用可能是另一种类型的异常使用的相同错误代码。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T23:09:24.993

您不需要错误代码，异常消息是有关异常的详细信息的地方。如果您使用错误代码，您仍必须在某处记录该错误代码，对吗？因此该描述可以在异常消息中。您的代码的用户可以按类型捕获异常。

如果您需要存储一些有关异常或上下文的数据，请使用[Exception.Data](http://msdn.microsoft.com/en-us/library/system.exception.data%28v=vs.90%29.aspx)，例如您可以输入异常的数据时间戳，或者在 Web 应用程序中您可以将当前请求 URL 放入 Data 等。

另外一定要阅读这篇关于[自定义异常](http://blogs.msdn.com/b/jaredpar/archive/2008/10/20/custom-exceptions-when-should-you-create-them.aspx)的博客文章，你真的需要它们吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:16:26.730

只需将异常公开，（添加其他构造函数），然后如果使用它的任何人觉得在某些无法处理异常的下游应用程序中需要错误代码，他们可以添加自己的。

# iphone - iPhone 设置自动调整大小

> ID：10376464
> 
> 赞同：1
> 
> 时间：2012-04-29T22:12:33.463
> 
> 标签：iphone, objective-c, ios

我正在尝试在导航栏的子类和分段控件上设置自动调整大小。我需要在代码中执行此操作，而不是界面生成器。

我想要与此接口设置等效的代码。

![在此处输入图像描述](../Images/ef4f66e11b8aae999beb3f6b63c71c56.png)

编辑：

我试过这个，但它不起作用。

```
[self.segmentedControl setAutoresizingMask: UIViewAutoresizingFlexibleBottomMargin | UIViewAutoresizingFlexibleRightMargin | UIViewAutoresizingFlexibleLeftMargin]; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T22:22:21.577

查看[编程指南](http://developer.apple.com/library/ios/documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/CreatingViews/CreatingViews.html#//apple_ref/doc/uid/TP40009503-CH5-SW5)注释：

> 上图中的灵活宽度和高度常量 [`UIViewAutoresizingFlexibleHeight`和`UIViewAutoresizingFlexibleWidth`] 与 Autosizing 控件图中的宽度和大小指示器具有相同的行为。然而，保证金指标的行为和使用被有效地逆转了。在 Interface Builder 中，边距指示器的存在意味着边距具有固定大小，而没有指示器意味着边距具有灵活大小。

您希望底部、左侧和右侧边距是*固定*的（这是默认设置），而*顶部*边距是灵活的。试试这个：

```
[self.segmentedControl setAutoresizingMask: UIViewAutoresizingFlexibleTopMargin]; 
```

# string - 如何在 Adob e Flex 中将字符串日期修改为正确的格式？

> ID：10376469
> 
> 赞同：0
> 
> 时间：2012-04-29T22:13:10.953
> 
> 标签：string, apache-flex, date, format

我的 Adob​​e Flex 应用程序依赖于从 Facebook 获取用户的详细信息，这些详细信息稍后将存储到我的数据库中。我的远程服务器的默认日期设置为 yyyy-mm-dd，但从 Facebook 检索到的生日字段是美国的 mm-dd-yyyy 作为字符串。我已经决定使用我的服务器设置是有意义的，特别是因为我可以使用 CURDATE() 函数。这让我陷入了一个棘手的境地；那么我将如何修改字符串呢？

我想我必须将返回的值拆分为日、月和年的 3 个子值，然后以不同的顺序将它们粘贴在一起。我不知道这将如何在 Flex 中完成。有人可以帮忙吗？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:19:14.273

```
var dateStr:String = "04-29-2012";
var parts:Array = dateStr.split("-");

if(parts == null || parts.length != 3)
{
  // Input error
}

dateStr = parts[2] + "-" + parts[0] + "-" + parts[1];
// Result : 2012-04-29 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T06:23:00.693

我认为您可以使用内置 DateFiled 类进行日期操作。以下方法可用于解析包含日期的 String 对象，并返回与该 String 对应的 Date 对象。

```
stringToDate(valueString:String, inputFormat:String):Date

eg.
 var dob:Date = DateField.stringToDate("06/30/2005", "MM/DD/YYYY"); 
```

有关更多详细信息，请参阅有关 DateField 的 Adob​​e 帮助。

# facebook - Facebook 评论侦听器返回评论框 ID 而不是评论 ID

> ID：10376475
> 
> 赞同：0
> 
> 时间：2012-04-29T22:13:50.137
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk

我正在使用侦听器在 Facebook 社交评论插件中获取评论 ID。

```
 // Additional initialization code here, this is where we listen to events
    FB.Event.subscribe('comment.create',
      function(response) {
        alert('You commented in URL: ' + response.href + 'CommentID: ' + response.commentID);
        // do an ajax call to server to store user,commentID,href info if you require
      }
    );
  }; 
```

我的问题是返回的 ID 是评论框 ID，我想要评论的 ID。我如何得到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:30:19.603

你得到的ID是评论框的对象ID

您可以使用 fql 查询其评论，例如：

`SELECT text,post_fbid,username,fromid,time FROM comment WHERE object_id=10150692213226360`

[http://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3Dselect%20text%2Cpost_fbid%2Cfromid%2Ctime%20from%20comment%20where%20object_id%3D10150692213226360](http://developers.facebook.com/tools/explorer?method=GET&path=fql%3Fq%3Dselect%20text%2Cpost_fbid%2Cfromid%2Ctime%20from%20comment%20where%20object_id%3D10150692213226360)

有关 fql 中评论表的更多信息，您可以浏览：http: [//developers.facebook.com/docs/reference/fql/comment/](http://developers.facebook.com/docs/reference/fql/comment/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:31:11.897

有一个关于此的错误。

可以在[这里](http://developers.facebook.com/bugs/457493477614026?browse=search_50117b894df0d6925218896 "http://developers.facebook.com/bugs/457493477614026?browse=search_50117b894df0d6925218896")找到。

它似乎已被分配，因此您可以期待很快的解决方案。

# php - Zend_Filter_Input 和所需值

> ID：10376477
> 
> 赞同：1
> 
> 时间：2012-04-29T22:14:09.017
> 
> 标签：php, zend-framework

使用时是否可以制作所需的数组项`Zend_Filter_Input`：

```
 $data = array();
    $validators = array(
        'name' => 'NotEmpty'
    );
    $filters = array(
        '*' => 'StringTrim'
    );

    $input = new Zend_Filter_Input($filters, $validators, $data);

    var_dump($input->isValid()); 
```

它回来`true`了，而我期望它是`false`。

有什么办法吗？

**更新**：

找到了：

```
$validators = array(
    'name' => array(
        'NotEmpty',
        'presence' => 'required' // <-----
    )
); 
```

但对于不存在的值`$input->getErrors();`返回空数组。如何检索正确的错误消息？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:11:20.073

尝试

```
if (!$input->isValid()) {
    $errors = $input->getMessages();
} 
```

# android - 图标应用android很小

> ID：10376479
> 
> 赞同：0
> 
> 时间：2012-04-29T22:14:48.127
> 
> 标签：android

我在显示图标应用程序时遇到问题。图标显示小。尺寸为 128x128 像素。我尝试了不同的可能性...有人建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:16:46.250

不太清楚你的意思：图标格式有[据可查](http://developer.android.com/guide/practices/ui_guidelines/icon_design_launcher.html#size)。按照这些说明，你应该没问题。您需要以下 4 个图标。

启动器图标大小 36 x 36 像素 48 x 48 像素 72 x 72 像素 96 x 96 像素

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:20:03.983

你把图标放在hdpi drawable文件夹里了吗？

# javascript - 用数组添加对象的问题

> ID：10376485
> 
> 赞同：12
> 
> 时间：2012-04-29T22:15:20.777
> 
> 标签：javascript

受此[视频](https://www.destroyallsoftware.com/talks/wat)的启发，我*进一步*测试了`{}+[]`.

**测试1：**

```
typeof {}+[]  //"object" 
```

好的，`{}+[]`一个`object`.

**测试 2：**

```
var crazy = {}+[];
typeof crazy  //"string" 
```

什么？不是`{}+[]`吗`object`？为什么是`string`现在？

**测试 3：**

```
console.log({}+[]) 
```

我得到了什么：

![在此处输入图像描述](../Images/77d5398be5f004b8b6752c69448a21b8.png)

所以它是一个`number`！......不是吗？

那么**实际上是什么类型的`{}+[]`**？

## 更新

对于说`{}+[]`是空字符串的人：

```
{}+[] === ""     //false
({}+[]) === ""   //false
({};+[]) === ""  //SyntaxError
({}+[]).length   //15 
```

JavaScript 太难理解了……

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T22:22:45.520

类型`{}+[]`可能因上下文而异。

1.  `typeof {}+[] //"object"`
    在这种情况下，根据运算符优先级`typeof {}`计算为“对象”，`+[]`添加一个空字符串（数组被强制转换为字符串），因此结果为“对象”。
    您可以考虑检查`typeof ({}+[])`（您的第二种情况）。

2.  `var crazy = {}+[]; typeof crazy //"string"`
    在这种情况下，您要添加对象和数组 - 它们都强制转换为字符串，因此`typeof`返回“字符串”。

3.  `{}+[]`
    这被解释为空代码块、一元加号和空数组。第一部分什么都不做，数组被转换为它的元素的逗号分隔字符串（空数组的空字符串），然后是一个数字（空字符串被转换为 0），因此`0`.

**更新**

*   `{}+[] === "" //false`
    见#3，`{}`被解释为一个块，你`0`在左边。
    比较`{}+[] === 0 // true`。

*   `({}+[]) === "" //false`
    参见 #1，`{}`被解释为对象字面量。当尝试添加数组和对象时，它们都转换为字符串，`"[object Object]"`对象和数组的空字符串。因此，你`"[object Object]"`在左边。
    比较`({}+[]) === "[object Object]" // true`。

*   `({};+[]) === "" //SyntaxError`
    我想，这个是不言自明的:)

*   `({}+[]).length //15`
    15 正好是 的长度`"[object Object]"`，见上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:40:15.527

```
var f = {}+[];
console.log(f==="[object Object]") 
```

这将记录`true`，因为当您分配`{}+[]`给 var 时，它会使用它的方法将其转换为字符串`toString()`......在这种情况下返回“[object Object]”（长度为 15 个字母 - 并且长度 = 15 是从）

# ios - 从字符串数组中设置 UITable 中的详细文本标签

> ID：10376487
> 
> 赞同：0
> 
> 时间：2012-04-29T22:15:54.257
> 
> 标签：ios, uitableview, master-detail, detailtextlabel

我正在使用主从应用程序模板。我硬编码了一个 NSArray 来设置文本标签：

```
groups = [[NSArray alloc] initWithObjects:@"Group1", @"Group2", nil]; 
```

然后我创建了两个数组，每个数组包含五个单词，并将这两个数组放入另一个数组中：

```
group1 = [[NSArray alloc] initWithObjects:@"A", @"and", @"find", @"go", @"have", nil];
group2 = [[NSArray alloc] initWithObjects:@"here", @"jump", @"not", @"on", @"one", nil];
groupWords = [[NSArray alloc] initWithObjects:group1, group2, nil]; 
```

在 tableView:cellForRowAtIndexPath: 我试图将单元格的文本设置为“Group#”，将详细文本设置为单词列表。我能够为每个单元格设置文本标签，但我似乎无法弄清楚如何传递字符串数组来设置每个详细文本标签。

例子：

第 1 组

A, and, find, go, have

第 2 组

在这里，跳，不，上，一个

这是我到目前为止所拥有的：

```
static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [groups objectAtIndex:[indexPath row]];

    NSString *detailWords = [self.groupWords objectAtIndex:[indexPath row]];
    NSLog(@"%@", detailWords);

    cell.detailTextLabel.text = 
    return cell; 
```

很感谢任何形式的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:40:50.977

命名的变量`detailWords`应该是一个数组而不是一个字符串。

然后按照您显示的方式格式化一行中的数组元素，您可以将它们连接成一个字符串，例如：

```
- (NSString *)stringFromArrayOfStrings:(NSArray *)array {
    NSMutableString *result = [NSMutableString stringWithString:@""];
    if ([array count] > 0) {
        [result appendString:[array objectAtIndex:0]];
        for (int i = 1; i < [array count]; i++) {
            [result appendString:@", "];
            [result appendString:[array objectAtIndex:i]];
        }
    }
    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T02:02:23.233

```
NSMutableString *detailText = [[NSMutableString alloc] init];
for (int i = 0; i < [[self groupWords] count]; i = i + 1) {
    NSMutableArray *subArray = [[self groupWords] objectAtIndex:i];
    [detailText appendString:[subArray objectAtIndex:[indexPath row]]];
    if (i < [[self groupWords] count] - 1) [detailText appendString:@","];
}
[[cell detailTextLabel] setText:detailText]; 
```

* * *

***编辑/更新：*** 我的错，我想我现在明白你的意思了。尝试这个：

```
// Declare the mutable string container
NSMutableString *detailText = [[NSMutableString alloc] init];
// Get the array you want to "combine"
NSArray *array = [[self groupWords] objectAtIndex:[indexPath row]];
// Iterate the array (this block assumes you've got NSStrings in the array;
// it might break otherwise)
for (int i = 0; i < [array count]; i = i + 1) {
    [detailText appendString:[array objectAtIndex:i]];
    if (i < [array count] - 1) [detailText appendString:@", "];
}
[[cell detailTextLabel] setText:detailText]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T05:54:19.127

静态 NSString *CellIdentifier = @"Cell";

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
if (cell == nil) {
    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];
}

cell.detailTextLabel.text = [[self.groupWords objectAtIndex:indexPath.section] objectAtIndex:indexPath.row];
return cell; 
```

我希望这对你有帮助......

# windbg - 将当前目录和命令行参数更改为 CDB 调试过程

> ID：10376488
> 
> 赞同：2
> 
> 时间：2012-04-29T22:16:08.803
> 
> 标签：windbg

我在大学和目前的工作中使用 gdb 完成了很多工作，但我需要学习如何在 Windows 上使用 CDB 和 WinDBG 进行开发。我更喜欢使用 CDB，因为 Emacs 中有一个很好的模式。

1.  启动 CDB 后如何更改当前目录？这很有用，因为当前目录默认为可执行目录（`cdb C:/dev/myexe.exe`将给出当前 dir=c:/dev，尽管我从 启动了 cdb `C:/testdir`），但我可能在不同的驱动器上有一个测试目录，我更愿意将其用作工作目录。或者我可能有多个测试目录，我想在它们之间轻松切换，而不会丢失进程的断点。更改工作目录可以在 GDB 中使用`cd`. 在 CDB 中如何做到这一点？

2.  假设我开始使用调试一个新进程，`cdb my.exe arg1 arg2`并且在设置断点和代码单步执行几分钟后，我意识到我应该指定一个额外的参数。在 GDB 中，我可以在运行进程时设置命令行参数 ( `r arg1 arg2 newarg3 ...`)。我的断点和工作区中的所有内容都保持不变。可以在 CDB 中做到这一点吗？看起来我需要保存工作区，使用调试过程的新参数重新启动 CDB，然后加载工作区以获取断点，这比发出运行命令要多得多。

在过去的几周里断断续续地搜索后，我还没有找到答案，我真的很想摆脱 Visual Studio 调试。

编辑：澄清#1和#2

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-02T13:04:19.030

嗯，它不像在 GDB 中那么容易，但在 CDB 中是可能的。

要更改工作目录并维护断点，您必须[.kill进程，使用](http://msdn.microsoft.com/en-us/library/windows/hardware/ff563855%28v=vs.85%29.aspx)[.creatdir](http://msdn.microsoft.com/en-us/library/windows/hardware/ff562280%28v=vs.85%29.aspx)告诉它从哪里启动，然后使用[.create](http://msdn.microsoft.com/en-us/library/windows/hardware/ff562279%28v=vs.85%29.aspx)重新启动进程。

例如：

```
 0:000> bp CreateFileW 
 0:000> bl  0 e 750316af     
 0001 (0001)  0:**** kernel32!CreateFileW 
 0:000> .kill 
 Terminated.  Exit thread and process events will occur.     
 0:000> .createdir d:\dev 
 Process creation dir: d:\dev 
 Process will inherit handles   
 0:000> .create c:\windows\system32\notepad.exe 
 CommandLine: c:\windows\system32\notepad.exe 
 Starting directory: d:\dev 
 Create will proceed with next execution 
 0:000> g 
 Symbol search path is: SRV*d:\symbols*http://msdl.microsoft.com/download/symbols 
 Executable search path is:  ModLoad: 00880000 008b0000   notepad.exe eax=00000000   
 ebx=00000000 ecx=25c50000 edx=0009dc08 esi=fffffffe edi=00000000 eip=774d0fac 
 esp=000df398 ebp=000df3c4 iopl=0         nv up ei pl zr na pe nc cs=0023  ss=002b  
 ds=002b  es=002b  fs=0053  gs=002b          efl=00000244 
 ntdll!LdrpDoDebuggerBreak+0x2d: 774d0fac 8975fc          mov     dword ptr [ebp-4],esi ss:002b:000df3c0=00000000 
 0:000> bl  0 e 750316af     
 0001 (0001)  0:**** kernel32!CreateFileW 
 0:000> g 
```

要使用不同的参数重新启动，请执行相同的[.kill 操作](http://msdn.microsoft.com/en-us/library/windows/hardware/ff563855%28v=vs.85%29.aspx)，然后将新参数传递给[.create](http://msdn.microsoft.com/en-us/library/windows/hardware/ff562280%28v=vs.85%29.aspx)命令。

如果您要经常这样做，那么我会花一些时间编写一个脚本，使这个多步骤过程更容易。

# macos - 在 OS X 应用程序中嵌入 CouchDB（零部署）

> ID：10376491
> 
> 赞同：4
> 
> 时间：2012-04-29T22:16:26.297
> 
> 标签：macos, couchdb

我正在寻找一种在 OSX 应用程序上嵌入 CouchDB 实例的方法，这样用户就不必安装任何东西。这可能吗？

我研究过 CouchDBX，但它似乎完全放弃了，找不到替代品。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:44:21.130

我认为您可能会将 TouchDB 视为合适的选择 [https://github.com/couchbaselabs/TouchDB-iOS](https://github.com/couchbaselabs/TouchDB-iOS)

这允许您在应用程序内部构建它，用户无需执行任何操作。

# jsf - retargetMethodExpressions 时找不到内部组件

> ID：10376496
> 
> 赞同：0
> 
> 时间：2012-04-29T22:17:09.203
> 
> 标签：jsf, jsf-2, composite-component

我必须编写一个显示登录表单的复合组件，并且可以与以下代码片段一起使用：

```
<login:loginForm username="#{loginBean.username}" 
                 password="#{loginBean.password}" 
                 action="#{loginBean.login}"/> 
```

我的 loginBean 只是一个简单的可序列化`@ViewScoped` `@ManagedBean`的 getter、setter 和`public String login()`方法。

这是我的复合组件：

```
<body>
    <cc:interface>
        <cc:attribute name="username" required="true" type="java.lang.String" />
        <cc:attribute name="password" required="true" type="java.lang.String" />
        <cc:attribute name="action" targets="submit" required="true" method-signature="java.lang.String f()"/>
    </cc:interface>

    <cc:implementation>
        <h3><span xml:lang="en">Login</span> Daten </h3>
        <h:form>
            <div class="formblock">
                <fieldset>
                    <div>
                        <h:outputLabel value="Username" for="username"/>
                        <h:inputText id="username" value="#{cc.attrs.username}"/>
                    </div>

                    <div>
                        <h:outputLabel value="Passwort" for="password"/>
                        <h:inputSecret id="password" value="#{cc.attrs.password}"/>
                    </div>
                </fieldset>
            </div>
            <div class="buttons">
                <h:commandButton id="submit" value="Anmelden" accesskey="r" />
            </div>
        </h:form>
    </cc:implementation>
</body> 
```

但是，当我在浏览器中打开 login.xhtml 页面（包含`login:loginForm`-snippet）时，我可以在码头日志中看到以下错误：

```
Apr 29, 2012 11:59:49 PM org.apache.myfaces.view.facelets.FaceletViewDeclarationLanguage retargetMethodExpressions
SEVERE: Inner component submit not found when retargetMethodExpress 
```

**但是，这是什么意思？我的代码中的错误在哪里？**我已经尝试了一些其他解决方案来实现该`action`属性，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:17:43.840

行。升级到 myfaces 版本 2.1.7 后，没有 -stuff 的直接解决方案`target`有效：

```
<body>
    <cc:interface>
        <cc:attribute name="username" required="true" type="java.lang.String" />
        <cc:attribute name="password" required="true" type="java.lang.String" />
        <cc:attribute name="action" required="true" method-signature="java.lang.String f()"/>
    </cc:interface>

    <cc:implementation>
        <h3><span xml:lang="en">Login</span> Daten </h3>
        <h:form>
            <div class="formblock">
                <fieldset>
                    <div>
                        <h:outputLabel value="Username" for="username"/>
                        <h:inputText id="username" value="#{cc.attrs.username}"/>
                    </div>

                    <div>
                        <h:outputLabel value="Passwort" for="password"/>
                        <h:inputSecret id="password" value="#{cc.attrs.password}"/>
                    </div>
                </fieldset>
            </div>
            <div class="buttons">
                <h:commandButton action="#{cc.attrs.action}" value="Anmelden" accesskey="r" />
            </div>
        </h:form>
    </cc:implementation>
</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T01:45:42.753

target="submit" 不正确，因为 h:form 是 NamingContainer，因此您需要为该组件分配和 id 并将目标更改为 "myForm:submit" 或类似的东西。

# php - 项目连接：PHP 致命错误：找不到类 'FOS\Rest\Util\Codes'

> ID：10376497
> 
> 赞同：0
> 
> 时间：2012-04-29T22:17:11.117
> 
> 标签：php, symfony

我正在尝试在 osx lion 上安装以下项目[连接。](https://github.com/dsyph3r/connect)

```
cd /tmp
git clone git://github.com/dsyph3r/connect
cd connect
git submodule update --init

php bin/vendors install 
```

当我运行以下命令时`php bin/vendors install`，我收到以下消息：

```
PHP Fatal error:  Class 'FOS\Rest\Util\Codes' not found in /private/tmp/connect/vendor/bundles/FOS/RestBundle/DependencyInjection/Configuration.php on line 115

Fatal error: Class 'FOS\Rest\Util\Codes' not found in /private/tmp/connect/vendor/bundles/FOS/RestBundle/DependencyInjection/Configuration.php on line 115
PHP Fatal error:  Class 'FOS\Rest\Util\Codes' not found in /private/tmp/connect/vendor/bundles/FOS/RestBundle/DependencyInjection/Configuration.php on line 115

Fatal error: Class 'FOS\Rest\Util\Codes' not found in /private/tmp/connect/vendor/bundles/FOS/RestBundle/DependencyInjection/Configuration.php on line 115 
```

我错过了什么？

附言

```
more app/config/parameters.ini
[parameters]
    database_driver="pdo_mysql"
    database_host="localhost"
    database_port=""
    database_name="connect"
    database_user=""
    database_password=""
    mailer_transport="smtp"
    mailer_host="localhost"
    mailer_user=""
    mailer_password=""
    locale="en"
    secret="xxxx"

more deps | grep FOSRest 
[FOSRest]
    git=git://github.com/FriendsOfSymfony/FOSRest.git
[FOSRestBundle]
    git=git://github.com/FriendsOfSymfony/FOSRestBundle.git 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-10-17T04:34:30.327

HTTP 状态代码已在`Symfony\Component\HttpFoundation\Response`.

```
//...
const HTTP_CONTINUE = 100;
const HTTP_SWITCHING_PROTOCOLS = 101;
const HTTP_PROCESSING = 102;            // RFC2518
const HTTP_OK = 200;
const HTTP_CREATED = 201;
const HTTP_ACCEPTED = 202;
//... 
```

你可以像这样使用它：

```
use FOS\RestBundle\Controller\Annotations,    
    Symfony\Component\HttpFoundation\Response;

/**
 *
 * @Annotations\View(
 *   template = "QuoteBundle:Quote:new.html.twig",
 *   statusCode = Response::HTTP_BAD_REQUEST
 * )
 *
 */ 
```

# entity-framework-4 - EF 4.3：不能在同一上下文中使用 Find 和 Where

> ID：10376498
> 
> 赞同：0
> 
> 时间：2012-04-29T22:17:18.137
> 
> 标签：entity-framework-4, entity-framework-4.1

我有这样的代码结构：

```
var adjective = context.Adjectives.Find(11); //works
var substantive = context.Substantives.Find(11);  //works    
var address = context.Addresses.Where(v => v.ZipCode == new_possible_address.ZipCode).SingleOrDefault();  //works    

var name = context.Names.Find(91); //doesn't work 
```

最后一行显示错误消息：

> “属性‘Id’是对象关键信息的一部分，不能修改。”

我注意到如果我删除 Where 语句，最后一个 Find 方法有效。所以：

```
var adjective = context.Adjectives.Find(11); //works
var substantive = context.Substantives.Find(11);  //works    

var name = context.Names.Find(91); //now works 
```

此外，如果我使用调试功能“设置下一个语句”，则在“地址。哪里”行执行后立即转到形容词或实质性行。这两种方法也停止工作。

为什么我不能在同一上下文中使用 Find 和 Where 方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-03T02:49:08.353

这是一个模型问题。我必须完成这样的导航映射：

```
modelBuilder.Entity<People>().HasOptional(c => c.Address).WithMany(); 
```

我只需要这种方式。

# php - 严重的文件信息问题

> ID：10376501
> 
> 赞同：1
> 
> 时间：2012-04-29T22:17:31.117
> 
> 标签：php, mime, fileinfo

我在共享主机上，并且一直在与他们争夺文件信息的工作，我们终于让它工作了，但我又遇到了另一个障碍，我基本上得到了这个，因为我正在创建一个新的文件上传工具，我们需要知道正在上传哪些 mimetype，但 fileinfo 不想玩球。

因此，.sql 文件将返回 text/plain，正确。

但是，所有其他文件都会简单地返回 application/octet-stream，我想知道为什么会这样，我不想用大量问题惹恼主持人，所以我想对这个问题进行一些研究在我进一步麻烦他们之前。

代码：

```
function get_mime($filename)
{
    $result = new finfo(FILEINFO_MIME_TYPE, "/usr/share/file/magic.mime"); 
    return $result->file($filename, FILEINFO_MIME_TYPE);
}

echo $user->get_mime($_FILES['file']['tmp_name'][$i]); 
```

任何帮助将不胜感激，非常感谢

# 更新

所以我已经着手更新 MIMETYPE 检查的代码，并且我已经更新了代码以反映以下内容（对于函数）：

```
function get_mime($filename)
{
    $result = new finfo(FILEINFO_MIME_TYPE, "/usr/share/file/magic.mime"); // return mime type ala mimetype extension

    if (is_resource($result) === true)
    {
        return $result->file($filename, FILEINFO_MIME_TYPE);
    } else {
        return "failed";
    }

    return false;
} 
```

显然，如您所见，当它失败时，我已使其输出**失败**。这发生在 100% 的时间里，删除 if 语句会导致它返回 application/octet-stream，这是不正确的。

上传过程将是：用户上传 -> 文件被移动到公共上方的临时文件夹，（upload_check）将由fileinfo检查文件，如果文件不是我们接受的文件将被丢弃，否则将被复制到公共文件，然后从临时文件夹中丢弃。

我已经创建了该进程，但 fileinfo 仍然不想合作并为所有内容返回 application/octet-stream，即使它们位于刚刚保存在 public_html 文件夹上方的服务器上。

有什么建议吗？

杰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:43:55.260

## 建议

我真的认为你在这里搞错了......

A. 上传文件时，它也会`mime type`自动返回`$_FILES`

```
echo $_FILES['file']['type'][$i] ; 
```

B 如果您想为未上传的文件获取 mime，或者尝试更好地确定客户端标头提供的内容，请使用`mime_content_type` [http://php.net/manual/en/function.mime-content-type。 php](http://php.net/manual/en/function.mime-content-type.php)

```
echo mime_content_type($fileName); 
```

C. 折旧

~~`mime_content_type`&都`Fileinfo`没有得到适当的维护，并且已经贬值。~~

**更新：**它曾经在手册中被错误地标记为已弃用，但它已在2016 年 1 月 14 日修复[https://bugs.php.net/bug.php?id=71367](https://bugs.php.net/bug.php?id=71367) 。可以看到支持 7.0，所以没有停产一点也不。

或者可以建议您查看以下链接进行更换

[获取 mime 类型的压缩文件](https://stackoverflow.com/questions/10363199/getting-mime-type-of-zipped-files/10363354#10363354)

[http://www.php.net/manual/en/function.mime-content-type.php#87856](http://www.php.net/manual/en/function.mime-content-type.php#87856)

D. 您也可以使用`getID3` [http://sourceforge.net/projects/getid3/files/getID3%28%29%201.x/1.9.3/](http://sourceforge.net/projects/getid3/files/getID3%28%29%201.x/1.9.3/)可以检查一些常见文件的真实mime类型...

E. 使用 Linux 命令行可能更省钱

```
$mime = shell_exec("file -bi " . escapeshellarg($file)); 
```

或者在 Mac 上

```
$mime = shell_exec("file -b --mime ".escapeshellarg($file)); 
```

## 最后

为什么要`$_FILES['file']['tmp_name'][$i]`直接工作？？众所周知，这会带来很多问题

尝试

```
$tempDir = ""; // Temp
foreach ( $_FILES ["file"] ["error"] as $key => $error ) {
    if ($error == UPLOAD_ERR_OK) {
        $tmp_name = $_FILES ["file"] ["tmp_name"] [$key];
        $name = $_FILES ["file"] ["name"] [$key];
        $tempFile = "$tempDir/$name";
        move_uploaded_file ( $tmp_name, $tempFile );
        echo $user->get_mime ( $tempFile );
        unlink ( $tempFile );

    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T22:28:53.473

您应该检查您尝试使用的魔术文件是否存在并且可以被 php.ini 读取。

尝试 ：

```
$finfo = finfo_open(FILEINFO_MIME, "/usr/share/file/magic.mime");

if (!$finfo) {
    echo "Opening fileinfo database failed";
    exit();
}

finfo_close($finfo); 
```

# listbox - XUL 列表框列表项中的换行符

> ID：10376503
> 
> 赞同：1
> 
> 时间：2012-04-29T22:17:46.450
> 
> 标签：listbox, newline, xul, listitem

我尝试了几种 CSS 技巧来获得一个 XUL 列表框来显示带有解释的换行符的项目。这会很有用，因为我正在使用 listitem-iconic 类来添加一个图标，该图标会显着增加 listitem 的高度。

此处提出的[前一个问题](https://stackoverflow.com/questions/10031215/br-or-newline-in-xul)提到在 XUL 中对标签使用空白 CSS 属性，但是下面的代码没有任何效果。目前，任何用换行符分割的行都一起运行。

```
listitem {
   white-space: pre-wrap;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T11:45:13.783

white-space 属性仅对`<description>`标签有效，因此您应该将项目包装在内部`<description>`，然后在`<listitem>`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T12:23:56.883

您的样式适用于错误的元素。如果您查看[`listbox.xml`绑定](http://mxr.mozilla.org/mozilla-central/source/toolkit/content/widgets/listbox.xml)或使用[DOM Inspector](https://addons.mozilla.org/addon/dom-inspector-6622/)检查您的列表，您会看到`listitem-iconic`有一堆“匿名”子级。最终结构如下所示：

```
<listitem class="listitem-iconic">
  <listcell class="listcell-iconic">
    <image class="listcell-icon"/>
    <label class="listcell-label" flex="1" crop="right"/>
  </listcell>
</listitem> 
```

文本进入`label`元素，所以这是您应该应用样式的元素。所以这个CSS代码应该可以工作：

```
listitem .listcell-label {
   white-space: pre-wrap;
} 
```

# debugging - 为什么将其作为一个单独的过程会导致各种怪异

> ID：10376504
> 
> 赞同：2
> 
> 时间：2012-04-29T22:17:50.457
> 
> 标签：debugging, vhdl

我正在学习 VHDL，还有什么比在其中拥有一个项目更好的学习方式。所以，我现在项目的一部分是创建一个小的内存组件。

这是我的完整代码：

```
entity memory is
  port(
    Address: in std_logic_vector(15 downto 0); --memory address
    Write: in std_logic; --write or read
    UseTopBits: in std_logic;  --if 1, top 8 bits of data is ignored and not written to memory
    Clock: in std_logic;
    DataIn: in std_logic_vector(15 downto 0);
    DataOut: out std_logic_vector(15 downto 0);
    Reset: in std_logic
  );
end memory;

architecture Behavioral of memory is
  constant SIZE : integer := 4096;
  type memorytype is array(0 to (size-1)) of std_logic_vector(7 downto 0);
  signal mem: memorytype;

begin
  resetmem: process(Clock, Reset) --this process is the troublemaker 
  begin
  if(Reset ='1' and rising_edge(Clock)) then
    mem <= (others => "00000000");
  end if;

  end process;
  writemem: process(Reset,Write, Address, UseTopBits, Clock)
    variable addr: integer;
  begin
    addr := conv_integer(Address);
    if(addr>size-1) then
      addr:=0;
    end if;
    if(Write='1' and Reset='0') then
      if(rising_edge(clock)) then
        mem(conv_integer(addr)) <= DataIn(7 downto 0);
        if(UseTopBits='1') then
          mem(conv_integer(addr)+1) <= DataIn(15 downto 8);
        end if;
      end if;
    end if;
  end process;
  readmem: process(Reset,Address,Write,Clock)
    variable addr: integer;
  begin
    addr := conv_integer(Address);
    if(addr>size-1) then
      addr:=0;
    end if;
    if(Reset='1') then
      DataOut <= (others => '0');
    elsif(Write='0') then
      DataOut <= mem(conv_integer(addr)+1) & mem(conv_integer(addr));
    else 
      DataOut <= (others => '0');
    end if;
  end process;
end Behavioral; 
```

在添加重置过程之前，根据我的测试台，我的代码运行良好。现在添加它后，我得到了各种奇怪的东西`DataOut`。看似随机的位将具有逻辑状态，`X`而不是 a `0`，`1`这会导致我所有的测试台都失败（因为它应该）

我通过将代码放入`writemem`流程中来修复它：

```
begin
  --where resetmem process was
  writemem: process(Reset,Write, Address, UseTopBits, Clock)
    variable addr: integer;
  begin
    addr := conv_integer(Address);
    if(addr>size-1) then
      addr:=0;
    end if;
    if(Reset ='1' and rising_edge(Clock)) then --code is now here
      mem <= (others => "00000000");
    elsif(Write='1' and Reset='0') then
      if(rising_edge(clock)) then
        mem(conv_integer(addr)) <= DataIn(7 downto 0);
        if(UseTopBits='1') then
          mem(conv_integer(addr)+1) <= DataIn(15 downto 8);
        end if;
      end if;
    end if;
  end process; 
```

所以这个问题现在已经解决了，但我不明白为什么将 resetmem 作为一个单独的进程会导致所有这些奇怪的问题。任何人都可以阐明这是如何发生的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T09:05:33.843

`mem`您有两个同时使用不同（非）值驱动的进程`Z`- 这就是导致“X”值的原因。

此外，如果您计划综合您的代码，您可能需要查看推荐的用于推断触发器的流程模板（如果您使用的是 Xilinx ISE，您可以在 Edit > Language Templates > VHDL > Synthesis Constructs 中找到这些模板> 编码示例 > 人字拖）。这将帮助您为您的复位/时钟使能引脚确定优先级，以获得有效映射到 FPGA 硬件的设计。

例如：

```
if(Write='1' and Reset='0') then
  if(rising_edge(clock)) then
    mem(conv_integer(addr)) <= DataIn(7 downto 0);
    if(UseTopBits='1') then
      mem(conv_integer(addr)+1) <= DataIn(15 downto 8);
    end if;
  end if;
end if; 
```

`Write`根据合成器的智能程度，这可能会使您的时钟启用 (当然。

如果你把它写成：

```
if(Reset='1') then
  --Do nothing, for now
elsif(rising_edge(clock)) then
  if(Write='1') then
    mem(conv_integer(addr)) <= DataIn(7 downto 0);
    if(UseTopBits='1') then
      mem(conv_integer(addr)+1) <= DataIn(15 downto 8);
    end if;
  end if;
end if; 
```

您的代码会更简洁，并且它还应该更好地与底层硬件综合（至少在 Xilinx FPGA 的情况下）。

此外，请查看 Ken Chapmans[获得您的优先事项正确](http://www.xilinx.com/support/documentation/white_papers/wp275.pdf)的白皮书。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T09:54:15.267

VHDL 在信号上有这个“驱动程序”的概念。

每个写入信号（或总线的一部分）的进程都会创建一个驱动程序。当多个驱动程序连接到一个信号时，会调用一个“解析函数”来决定结果值应该是什么。当具有相反值 (和) 的驱动器被驱动到信号上时，（对于第一个近似值）`std_logic`（因此对于 a `std_logic_vector`s 位）的分辨率函数会产生 Xs 。还有一个名为的值被视为非驱动值，可以被其他值覆盖。（还有,和，但我们暂时将它们放在一边，未初始化）`1``0``Z``W``L``H``U`

这个过程：

```
resetmem: process(Clock, Reset) --this process is the troublemaker 
  begin
  if(Reset ='1' and rising_edge(Clock)) then
    mem <= (others => "00000000");
  end if;
end process; 
```

说（转述）

> > > if (reset and clock) then drive zeros to mem

如果条件为假，它*没有*说明要做什么，因此它继续驱动零（在其余时间）。`X`当您的其他流程驱动价值时，它们会发生冲突并产生

出于模拟目的，您*可以*这样做

```
else
  mem <= (others => 'Z'); 
```

这将使其“驱动”另一个过程可以覆盖的高阻抗。

* * *

但是我认为您要做的是将 RAM*初始化*为全零。FPGA RAM 不能通过信号重置为特定值，但可以在配置时*加载值。*模拟器对配置过程一无所知，您的模拟被认为是在配置完成后发生的。

因此，模拟这种行为的一种方法是在声明信号时对其进行初始化：

```
signal mem: memorytype := (others => (others => '0')); 
```

# python - 接受函数参数的返回值

> ID：10376506
> 
> 赞同：2
> 
> 时间：2012-04-29T22:17:55.500
> 
> 标签：python, python-2.7

所以我正在尝试使用一个返回值的函数，但我希望将这些值返回到不同的函数中。下面是我需要的一个例子。

```
def returner():
    x=1
    y=2
    z=3
    return x,y,z
def tester(arg1,arg2,arg3):
    print arg1,arg2,arg3

tester(returner()) 
```

我想要它做的是打印 1,2,3 但是我无法做到这一点，因为它说“测试器只需要 3 个参数，给定 1 个。” 我有什么遗漏或者这是不可能的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-29T22:20:03.587

您想使用`*`- splat（或星号）运算符：

```
tester(*returner()) 
```

这是参数解包——它将返回值的元组解包到函数的参数中。

```
>>> def test():
...    return 1,2,3
... 
>>> def test2(arg1, arg2, arg3):
...    print(arg1, arg2, arg3)
... 
>>> test2(*test())
1 2 3 
```

# c - 使用返回自定义结构的函数时出错

> ID：10376510
> 
> 赞同：0
> 
> 时间：2012-04-29T22:18:54.250
> 
> 标签：c, json

我有一个解析 JSON 文本并返回一个名为 EZapiEntry 的新结构的函数。当我检查结果的值时，一切正常。

在 athor c 文件中使用此函数后。我得到错误的结果。

函数代码：

```
EZapiEntry parseEntry()
 {
    EZapiEntry   result;
    json_t      *entryJson;
    entryJson = json_object_get(root,"data");
    unsigned int i=0;
    EZuc8* maskString=json_string_value(json_object_get(entryJson,"mask"));
    result.uiKeySize = json_integer_value(json_object_get(entryJson,"keySize"));
    result.uiResultSize = json_integer_value(json_object_get(entryJson,"resultSize"));
    EZuc8 val1[result.uiKeySize];   
    hexStringToBytes(json_string_value(json_object_get(entryJson,"key")),val1);
    result.pucKey = val1;   
    EZuc8 val2[result.uiResultSize];
    hexStringToBytes(json_string_value(json_object_get(entryJson,"result")),val2);  
    result.pucResult = val2;
    EZuc8 val3[strlen(maskString)];
    hexStringToBytes(maskString,val3);  
    result.pucMask = val3;
    result.uiProfile = json_integer_value(json_object_get(entryJson,"profile"));
        printf("\nkeySize :  %u  ",result.uiKeySize);
        printf("\nResultSize :  %u  ",result.uiResultSize);
        printf("\nkey :    ");
        for (i = 0 ; i <result.uiKeySize ; i++)
        {
            printf("%02x",result.pucKey[i]);
        }
        printf("\nresult :    ");
        for (i = 0 ; i <result.uiResultSize ; i++)
        {
           printf("%02x",result.pucResult[i]);
        }
        printf("\nmask :    ");
        for (i = 0 ; i <strlen(maskString) ; i++)
        {
          printf("%02x",result.pucMask[i]);
         }  
        printf("\nprofile :    ");
        printf("%u",result.uiProfile);  
    return result;
 } 
```

函数使用代码：

```
 entry=parseEntry();
   printf("\nkeySize2 :  %u  ",entry.uiKeySize);
   printf("\nResultSize2:  %u  ",entry.uiResultSize);
   printf("\nkey2 :    ");
    for (i = 0 ; i <entry.uiKeySize ; i++)
    {
       printf("%02x",entry.pucKey[i]);
    }
   printf("\nresult2 :    ");
    for (i = 0 ; i <entry.uiResultSize ; i++)
    {
       printf("%02x",entry.pucResult[i]);
    }
   printf("\nprofile2 :    ");
   printf("%u",entry.uiProfile); 
```

这是结果：

```
keySize :  1  
ResultSize :  16  
key :    03
result :    aaaaaa11445544ff00112233445544ff
mask :    0000000a
profile :    0
keySize2 :  1  
ResultSize2:  16  
key2 :    bf
result2 :    bfb985b0102e765c00112233445544ff
profile2 :    0 
```

例如 Result1 的第一个值是正确的。第二个是错误的

我真的是堆栈，我找不到问题！有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:26:05.470

这将在函数返回后产生一个悬空指针：

```
EZuc8 val2[result.uiResultSize];
hexStringToBytes(json_string_value(json_object_get(entryJson,"result")),val2);  
result.pucResult = val2; 
```

as在返回`val2`时将不再存在`parseEntry()`。`val1`和的类似问题`val3`。`malloc()`而不是直接向相关成员使用 VLA ：

```
result.pucResult = malloc(sizeof(EZuc8) * result.uiResultSize);
hexStringToBytes(json_string_value(json_object_get(entryJson,"result")),
                 result.pucResult); 
```

记住`free()`动态分配的内存。

# iphone - NSInternalInconsistencyException 找不到实体名称的 NSManagedObjectModel

> ID：10376511
> 
> 赞同：0
> 
> 时间：2012-04-29T22:18:55.510
> 
> 标签：iphone, ios, core-data, nsfetchedresultscontroller

我正在尝试在我已经开始的项目中设置 coredata.. 我已经解决了一些其他错误，但现在已将其范围缩小到此，

> *** 由于未捕获的异常“NSInternalInconsistencyException”而终止应用程序，原因：“+entityForName：找不到实体名称“Manuf”的 NSManagedObjectModel

我想我已经缩小了这个问题的范围，并[在这里](https://stackoverflow.com/questions/4252828/nsinternalinconsistencyexception-reason-entityforname-could-not-locate-an)回答了这个问题的可能解决方案：亚历克斯的回答。

但是，我并不完全确定这对我来说是不是这样，因为我感到困惑的原因是，我实际上并没有在我的 app-delegate 和 viewcontrollers 中设置所有内容，而是使用了我的 app-delegate 和一个对象类。所以我希望有人可以帮助我在这里隔离并解决我的问题......

这是我的对象类中的代码段，这给了我这个问题。它几乎与 xcode 为 coredata 应用程序生成的模板代码相同，但是它不包括排序和 tableview 的东西，因为我不需要。我只是将一堆 NSData 转储到我的 coredata 对象中。

```
- (NSFetchedResultsController *)fetchedResultsController
{
    if (__fetchedResultsController != nil) {
        return __fetchedResultsController;
    }

    NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];
    // Edit the entity name as appropriate.
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"Manuf" inManagedObjectContext:self.managedObjectContext]; //this is the line where my code fails and generates the error in the log
    [fetchRequest setEntity:entity];

    // Edit the section name key path and cache name if appropriate.
    // nil for section name key path means "no sections".
    NSFetchedResultsController *aFetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:fetchRequest managedObjectContext:self.managedObjectContext sectionNameKeyPath:nil cacheName:@"Master"];
    aFetchedResultsController.delegate = self;
    self.fetchedResultsController = aFetchedResultsController;

    NSError *error = nil;
    if (![self.fetchedResultsController performFetch:&error]) {
        // Replace this implementation with code to handle the error appropriately.
        // abort() causes the application to generate a crash log and terminate. You should not use this function in a shipping application, although it may be useful during development. 
        NSLog(@"Unresolved error %@, %@", error, [error userInfo]);
        abort();
    }

    return __fetchedResultsController;
} 
```

更新：

这就是我认为我出错的地方。在模板代码中，控制器和上下文在 appdelegate 中设置，如下所示

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    // Override point for customization after application launch.
    UINavigationController *navigationController = (UINavigationController *)self.window.rootViewController;
    ICDMasterViewController *controller = (ICDMasterViewController *)navigationController.topViewController;
    controller.managedObjectContext = self.managedObjectContext;
    return YES;
} 
```

因为我在一个对象类中做我所有的事情我不知道如何在我的应用程序委托中初始化它？

与我现在在我的 appdelegate 中尝试做的相反

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{   
    //Add status bar
    [[UIApplication sharedApplication] setStatusBarStyle:UIStatusBarStyleBlackOpaque];
    [[UIApplication sharedApplication] setStatusBarHidden:NO withAnimation:UIStatusBarAnimationFade];

    self.window.rootViewController = self.navigationController; //Adds RootViewController to the NavigationController interface
    self.navigationController.navigationBar.tintColor = [UIColor grayColor];
    [self.window makeKeyAndVisible];

    //try setting up context for my nsobjectclass EngineResponses
    EngineResponses *engineResponses = [[EngineResponses alloc] init];
    engineResponses.managedObjectContext = self.managedObjectContext;

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:29:31.100

早晨。

我要检查三件事：

1) 是`self.managedObjectContext` `nil`吗？（如果你得到什么`NSLog(@"%@", self.managedObjectContext);`？

2）您的模型描述是否包含一个名为的实体`Manuf`- 它可能区分大小写:)

3）当您创建协调器时，您是否从 (2) 正确加载模型？

# javascript - 有没有办法在 Node.js 中对字符串进行正则表达式引用？

> ID：10376513
> 
> 赞同：6
> 
> 时间：2012-04-29T22:19:10.663
> 
> 标签：javascript, regex, node.js, google-chrome, v8

我想创建一个与字符串*foo*完全匹配的正则表达式，即使*foo*包含元字符。这有时被称为`RegExp.quote`. 有没有办法在 Node.js 环境（或更广泛地说，v8/Chrome/WebKit/JavaScript）中做到这一点？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-06-24T11:36:56.180

`npm install regexp-quote`

```
RegExp.quote = require('regexp-quote') // optional
new RegExp(RegExp.quote(foo)) 
```

# eclipse - 如何从更改侦听器中保存 jspinner 的值

> ID：10376516
> 
> 赞同：1
> 
> 时间：2012-04-29T22:19:26.667
> 
> 标签：eclipse, swing, jspinner, jform-designer, changelistener

我希望使用创建的名为 spinnerModel 的值，但似乎不能这样做，我相信我必须将其声明为某种我不确定的类型。我想把它变成双精度，因为它稍后会在程序中使用。我有以下内容，

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.event.*;

 public class UI  {

 //Need to use the spinnerModel here but cannot :(

private void weightSpinnerMetricStateChanged(ChangeEvent e) {
    JSpinner weightSpinnerMetric = (JSpinner) e.getSource();
    SpinnerModel spinnerModel = weightSpinnerMetric.getModel();
    System.out.println(spinnerModel.getValue());
}
    stonesSpinnerImperial = new JSpinner(); //Spinner created here.

stonesSpinnerImperial.setModel(new SpinnerNumberModel(3, 3, 31, 1));
            stonesSpinnerImperial.addChangeListener(new ChangeListener() {
                @Override
                public void stateChanged(ChangeEvent e) {
                    stonesSpinnerStateChanged(e);
                    stonesSpinnerImperialStateChanged(e);
                }
            });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:41:26.587

您应该从微调器模型中检索值，而不是尝试保存事件。

这一切都在[Swing 教程中关于 spinners](http://docs.oracle.com/javase/tutorial/uiswing/components/spinner.html)的解释。那个turial中代码的一小部分复制粘贴

```
public void stateChanged(ChangeEvent e) {
        SpinnerModel dateModel = dateSpinner.getModel();
        if (dateModel instanceof SpinnerDateModel) {
            setSeasonalColor(((SpinnerDateModel)dateModel).getDate());
} 
```

当然，您需要调整此代码以匹配您当前的设置（例如将演员更改`SpinnerDataModel`为您的微调器模型）

# javascript - Javascript 对象子参考？

> ID：10376521
> 
> 赞同：0
> 
> 时间：2012-04-29T22:20:21.707
> 
> 标签：javascript, oop

我有一个 javascript 对象，我需要引用其中一个子对象的值。孩子应该是数组的一部分。

这有效：

```
this.manager.response.highlighting[doc.id]['sentence_0002'] 
```

但这不会：

```
this.manager.response.highlighting[doc.id][0] 
```

我不知道`sentence_000*`要返回哪些数字，所以我想通过它的数组号来引用它。

```
this.manager.response.highlighting[doc.id].length 
```

也不返回任何东西。

以下是转换为 javascript 对象的 xml 文档的一部分：

```
<response>
  <lst name="highlighting">
    <lst name="http://www.lemonde.fr/international/">
      <arr name="sentence_0005">
        <str> puni pour sa gestion de la crise Geir Haarde a été condamné pour avoir manqué aux devoirs de sa </str> 
```

我需要访问的是`<str>`. `doc.id`已成功设置为`http://www.lemonde.fr/international/`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:25:42.413

如果`highlighting[doc.id]`有一个名称为 的属性`sentence_xyz`，则该属性**没有**`for..in`位置顺序，但您可以使用循环找出存在哪些键：

```
var key, val;
var obj = this.manager.response.highlighting[doc.id];
for (key in obj) {
    // Here, `key` will be a string, e.g. "sentence_xyz", and you can get its value
    // using
    val = obj[key];
} 
```

您可能会发现需要过滤掉其他属性，这可以使用通常的字符串方法来完成，例如：

```
for (key in obj) {[
    if (key.substring(0, 9) === "sentence_") {
        // It's a sentence identifier
    }
} 
```

您可能还会发现[`hasOwnProperty`](http://es5.github.com/#x15.2.4.5)有用，尽管我猜这是来自 JSON 文本响应的反序列化对象图，在这种情况下`hasOwnProperty`并没有真正进入它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:56:37.980

在你的问题中：

> 我有一个 javascript 对象，我需要引用其中一个子对象的值。孩子应该是数组的一部分。
> 
> 这有效：
> 
> ```
> this.manager.response.highlighting[doc.id]['sentence_0002'] 
> ```
> 
> 但这不会：
> 
> ```
> this.manager.response.highlighting[doc.id][0] 
> ```

这表明`this.manager.response.highlighting[doc.id]`引用的对象`sentence_0002`有一个名为“0”的属性，但它没有一个名为“0”的属性。

该对象可能是一个对象或数组（或任何其他对象，如函数甚至 DOM 对象）。请注意，在 javascript 中，数组只是具有特殊长度属性和一些方便的继承方法的对象，这些方法通常可以应用于任何对象。

因此，所引用的对象`this.manager.response.highlighting[doc.id]`是 Array 还是 Object 在上面没有区别，因为您所追求的属性似乎有一个普通的对象名称，而不是一个数字索引，如果它是一个 Array 并且正在被用作数组。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T14:49:22.787

您现在可以找到对象的长度，但索引不会是数字，它将是 'sentence_000*'

这样做：

```
 var obj = this.manager.response.highlighting[doc.id],
     indexes = Object.getOwnPropertyNames(obj),    
     indexLength = indexes.length;
 for(var counter = 0; counter < indexLength; counter++){
    obj[indexes[counter]] == val // obj[indexes[counter]] is same as this.manager.response.highlighting[doc.id]['sentence_000*'] 
 } 
```

# .net - 将 X509Certificate2（仅使用公钥）导出到 .CER 文件

> ID：10376524
> 
> 赞同：1
> 
> 时间：2012-04-29T22:21:05.880
> 
> 标签：.net, x509certificate, public-key-encryption

我可以访问内存中 X509Certcate2 类型的对象（它同时具有私钥和公钥）。我需要生成一个物理 .CER 文件，最终用户可以双击该文件并将其导入证书存储区。

到目前为止，我这样做的尝试都失败了。我尝试了各种方法将证书的公钥转储到文件中，但证书工具无法导入。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-10T00:39:57.290

事实证明，正如布鲁诺所说，我需要做的就是在对象本身上调用 Export 方法，并且只包含公钥的字节数组已准备好保存为 *.cer 文件

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T02:11:27.517

你可以查看 Mono 源代码并学习它的 makecert，

[https://github.com/mono/mono/blob/master/mcs/tools/security/makecert.cs](https://github.com/mono/mono/blob/master/mcs/tools/security/makecert.cs)

# java - 循环生成的字符

> ID：10376527
> 
> 赞同：0
> 
> 时间：2012-04-29T22:22:08.043
> 
> 标签：java, loops

```
public class Driver {

public static void main(String[] args) {

    int length=0;
    int MaxNumber=100;
    StringBuilder password = new StringBuilder();

    do {
        if (PasswordGenerator.matchLength (length)) {
            break;
        }
        length++; // length is randomly picked
    } while (length < MaxNumber );   // or <100
    System.out.println("The length of the character string is " + length);

    int index = 0;
    char f = 0;

    for (char d = 0; d < 127; d++) {
        if(PasswordGenerator.matchCharAt(d, index)) {
            password.append(d);
            System.out.println("Hey! Char at " + index + " is " + d);
            d++;
        }
    }

}
} 
```

所以我找到了如何通过循环找到我随机生成的密码的第一个字符，并且想知道如何通过使用该循环或另一个循环来提供它来查找密码中的其他字符。字符跟随循环的长度，这也是随机生成的。PasswordGenerator 类的文档在这里.. (http://www.technology.heartland.edu/faculty/todds/csci130/assignments/A5_password/doc/index.html)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:27:19.697

将 的值更改为`index`您要查找的字符的位置。如果您想找到所有这些，那么...

```
for(int j=0; j < length; j++)
{
      for (char d = 0; d < 127; d++) 
      {
        if(PasswordGenerator.matchCharAt(d, j)) 
        {
            password.append(d);
            System.out.println("Hey! Char at " + index + " is " + d);

            // No sense in incrementing d and going through all of them
            // You found it already, break this loop
            break;
        }
    }
} 
```

# android - 使用 javax 邮件类通过 Gmail smtp 发送多封电子邮件偶尔会触发连接被拒绝错误

> ID：10376528
> 
> 赞同：0
> 
> 时间：2012-04-29T22:22:11.490
> 
> 标签：android, gmail, jakarta-mail

我正在使用 javax 邮件类通过 Gmail SMTP 发送多封带有附件的电子邮件。电子邮件发送是在 doInBackground() 函数中的 AsyncTask 内完成的。我有一个邮件数组列表，我正在逐一发送。第一封电子邮件成功发送，但从下一封电子邮件中我收到了 MessagingException：无法连接到 SMTP 主机。我不太确定为什么会出现这个问题。是否可能没有释放所需的资源？有谁知道这个问题的解决方案？

> 04-30 10:10:25.109: W/System.err(619): javax.mail.MessagingException: 无法连接到 SMTP 主机：localhost，端口：25；04-30 10:10:25.109: W/System.err(619): 嵌套异常是: 04-30 10:10:25.109: W/System.err(619): java.net.ConnectException: localhost/127.0。 0.1:25 - 连接被拒绝 04-30 10:10:25.109: W/System.err(619): at com.sun.mail.smtp.SMTPTransport.openServer(SMTPTransport.java:1391) 04-30 10:10: 25.109: W/System.err(619): 在 com.sun.mail.smtp.SMTPTransport.protocolConnect(SMTPTransport.java:412) 04-30 10:10:25.109: W/System.err(619): 在 javax .mail.Service.connect(Service.java:288) 04-30 10:10:25.109: W/System.err(619): 在 javax.mail.Service.connect(Service.java:169) 04-30 10 :10:25.109: W/System.err(619): 在 javax.mail.Service.connect(Service.java:118) 04-30 10:10:25.109: W/System.err(619): 在 javax。邮件。

我的发送电子邮件异步任务类

```
class SendEmailAsyncTask extends AsyncTask <Void, Void, Boolean> {
    Mail thisMail;

    public SendEmailAsyncTask() {
        if(V) Log.v(SendEmailAsyncTask.class.getName(), "SendEmailAsyncTask()");
        this.thisMail = mailQueue.get(mailCounter);
        sendMessageToClient("Sending " + thisMail.getRecipients());

    }

    @Override
    protected Boolean doInBackground(Void... params) {
        if(V) Log.v(SendEmailAsyncTask.class.getName(), "doInBackground()");
        try {
            thisMail.send();
            return true;
        } catch (AuthenticationFailedException e) {
            Log.e(SendEmailAsyncTask.class.getName(), "Gmail account details are wrong");
            createNotification("Gmail account details are incorrect. Please check them in the settings.");
            setFlag(FLAG_BAD_ACCOUNT);
            e.printStackTrace();
            return false;
        } catch (MessagingException e) {
            Log.e(SendEmailAsyncTask.class.getName(), thisMail.getRecipients() + " sending failed");
            e.printStackTrace();
            return false;
        } 
    }

    @Override
    protected void onPostExecute(Boolean result) {
        if(result) { // email send success
            //sent successfully 
            if(D) Log.d(SendEmailAsyncTask.class.getName(), "email sent successfully");
            sendMessageToClient("Email sent");
        } else {
            //retry? or quit
            if(D) Log.d(SendEmailAsyncTask.class.getName(), "email was not sent");
            sendMessageToClient("Email not sent");
        }       

            mailCounter++;
            // if there are more mails in the queue start another send email task
            if (mailCounter < mailQueue.size()) {
                SendEmailAsyncTask sendTask = new SendEmailAsyncTask();
                sendTask.execute();

            // if there are no more in the mail queue, delete the data set
            } else {
                deleteTask = new DeleteFilesAsyncTask(currentDataSet.getDate(), currentDataSet.getMachine());
                deleteTask.execute();
            }

        sendTask = null;
    }
} 
```

编辑：查看我的邮件包装类，我使用的端口是 465，而不是 25。我想知道这是否意味着什么？

```
public class Mail extends javax.mail.Authenticator {   
private String mailhost = "smtp.gmail.com";   
private String user;   
private String password;   
private Session session;   
private Multipart multipart;
private String subject;
private String body;
private String sender;
private String recipients;

static {   
    Security.addProvider(new JSSEProvider());   
}  

public Mail(String user, String password) {
    this.user = user;   
    this.password = password;   
    multipart = new MimeMultipart();

    Properties props = new Properties();   
    props.setProperty("mail.transport.protocol", "smtp");   
    props.setProperty("mail.host", mailhost);   
    props.put("mail.smtp.auth", "true");   
    props.put("mail.smtp.port", "465");   
    props.put("mail.smtp.socketFactory.port", "465");   
    props.put("mail.smtp.socketFactory.class",   
            "javax.net.ssl.SSLSocketFactory");   
    props.put("mail.smtp.socketFactory.fallback", "false");   
    props.setProperty("mail.smtp.quitwait", "false");   

    //session = Session.getDefaultInstance(props, this);
    session = Session.getInstance(props, this);
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T22:40:02.277

好吧，因为似乎没有人有答案......我会回答我自己的问题。

我通过在创建电子邮件后立即发送电子邮件而不是稍后安排发送来解决问题。

以前的代码：（一次成功发送后出错）

```
class CreateEmailAsyncTask extends AsyncTask <Void, Void, Boolean> {
    @Override
    protected Boolean doInBackground(Void... params) {
        // create emails and add to the queue
    }

    @Override
    protected void onPostExecute(Boolean result) {
        SendEmailAsyncTask sendTask = new SendEmailAsyncTask();
        sendTask.execute();
}

class SendEmailAsyncTask extends AsyncTask <Void, Void, Boolean> {
    @Override
    protected Boolean doInBackground(Void... params) {
        // send emails
    }
} 
```

更改的代码：（适用于所有电子邮件）

```
class CreateEmailAsyncTask extends AsyncTask <Void, Void, Boolean> {
    @Override
    protected Boolean doInBackground(Void... params) {
        // create emails
        // send emails
    }
} 
```

我认为可能存在超时或使邮件对象无效的东西，但我不确定。我检查了[Java Mail API 文档](http://javamail.kenai.com/nonav/javadocs/)，但找不到太多信息...

# file-upload - 如何验证文件上传？[播放框架]

> ID：10376533
> 
> 赞同：1
> 
> 时间：2012-04-29T22:22:49.617
> 
> 标签：file-upload, playframework, playframework-2.0, javabeans

我有一个简单的bean，像这样：

```
package models;

import play.data.validation.Constraints;

public class Upload
{
    @Constraints.Required
    @Constraints.MinLength(4)
    @Constraints.MaxLength(40)
    public String name;

    @Constraints.Required
    public String inputFile;
} 
```

和形式，像这样：

```
@form(action = routes.Application.submit(), 'enctype -> "multipart/form-data") {

    @inputText(
        uploadForm("name"),
        '_label -> "Name"
    )

    @inputFile(
        uploadForm("inputFile"),
        '_label -> "Queries"
    )
} 
```

1.  验证 inputFile 的最佳方法是什么？
2.  是否可以通过注释来做到这一点？

`@Required constraint`根本不起作用。

我希望它被选中+添加一些大小限制。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:52:11.457

使您的表格如下：

```
 <input type="file" name="inputFile"> 
```

在您提交方法中添加：

```
 // from official documentation
    public static Result submit() {
      MultipartFormData body = request().body().asMultipartFormData();
      FilePart file = body.getFile("inputFile");
      if (inputFile != null) {
        String fileName = picture.getFilename();
        String contentType = picture.getContentType(); 
        File file = picture.getFile();
        // method the check size
        if(!validateFileSize){
          return redirect(routes.Application.index());    // error in file size 
        }
        return ok("File uploaded");
      } else {
        // here comes the validation
        flash("error", "Missing file");
        return redirect(routes.Application.index());    
      }
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T13:50:13.223

像下面这样的东西，也许？

```
MultipartFormData body = request().body().asMultipartFormData();
if (!body.getFiles().isEmpty()) { 
  // do your work
} 
```

# ios - 我可以在重复的 UILocalNotification 中更改消息吗？

> ID：10376535
> 
> 赞同：6
> 
> 时间：2012-04-29T22:22:57.813
> 
> 标签：ios, xcode, ios5, xcode4.2, uilocalnotification

我有一个每小时重复一次的 UILocalNotification，我想在它重复时更改消息，以便它不同，或者在 3 条消息之间轮换。

有谁知道这样做的方法？

此外，似乎我无法自定义重复的本地通知，超过每分钟、每小时、每天等一次。我想要的是每 15 分钟通知一次。我怀疑这是不可能的……除非你知道办法？

非常感谢您提供的帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T22:31:35.353

如果您想更改消息，您可以访问`scheduledLocalNotifications`应用程序委托中的数组并修改消息，但要做到这一点，您需要应用程序正在运行。我认为最好简单地安排不同的通知以及要显示的不同消息。

关于重复间隔，简单的答案是否定的，**你不能创建自己的重复间隔**。这是众多限制之一`UILocalNotification`。许多应用程序（包括我的）已经解决了创建通知队列的问题。[我在这里](https://stackoverflow.com/questions/10341476/fire-local-notification-every-day-on-different-times/10343323#10343323)解释这个话题

# c# - 从模板生成 PDF 时字段重复

> ID：10376536
> 
> 赞同：0
> 
> 时间：2012-04-29T22:23:10.020
> 
> 标签：c#, .net, xml-parsing

我正在阅读一个 XML 文件并使用这些数据来填写一个 PDF 模板。

XML 文件有一个名为 `<my:SpecialInstructions>Test for special instructions</my:SpecialInstructions>`

而 PDF 模板字段是：

![pdf上的字段](../Images/6b771055480d8569c3960cacedf935bb.png)

并且这些字段被称为：

![字段](../Images/015f04b310f1fc986fc6662381e5f578.png)

我遇到的问题是`Test for special instructions`第一行重复一次，第二行重复一次

**问题：标签如何`<my:SpecialInstructions>`翻译成`my:SpecialInstructions1`& `my:SpecialInstructions2`？**

我正在使用`XMLParse`,`c#`为此。

根据罗伯特的建议，我将包含填充 PDF 的代码：

```
public void InsertDataToTemplate(DataTable dt)
        {
            // cycle through datatable and find field to field matches
            DataRow row = dt.Rows[0];
            int fieldType = 0;
            string checkBoxInsert = "";
            List<string> notFoundList = new List<string>();

            foreach (DataColumn col in dt.Columns)
            {
                if (pdfStamper.AcroFields.Fields.Where(afd => afd.Key == col.ColumnName).Count() != 0)
                {
                    fieldType = pdfStamper.AcroFields.GetFieldType(col.ColumnName);
                    if (fieldType == AcroFields.FIELD_TYPE_CHECKBOX)
                    {
                        checkBoxInsert = (row[col.ColumnName].ToString().ToUpper() == "FALSE") ? "NO" : "Yes";
                        pdfStamper.AcroFields.SetField(col.ColumnName, checkBoxInsert);
                    }
                    else
                    {
                        pdfStamper.AcroFields.SetField(col.ColumnName, row[col.ColumnName].ToString());
                    }
                }
                else
                    notFoundList.Add(col.ColumnName);
            }
        } 
```

# android - Resources$NotFoundException：资源不是可绘制的

> ID：10376537
> 
> 赞同：1
> 
> 时间：2012-04-29T22:23:10.363
> 
> 标签：android

我正在尝试在 LayerList drawable 的标签内动态设置 a 的 android:src。

为此，我需要访问该标签，但它不断失败：

```
android.content.res.Resources$NotFoundException: Resource is not a Drawable (color or path): TypedValue{t=0x12/d=0x0 a=3 r=0x7f090142} 
```

这是 LayerList 可绘制部分：

```
<item android:id="@+id/my_item_id" 
    android:left="35dip" 
    android:right="0dip"
    android:top="0dip"
    android:bottom="50dip">
    <bitmap android:id="@+id/my_bitmap_id" android:gravity="left"/>
</item> 
```

这是代码：

```
Resources r = view.getResources(); 
Drawable drawable = r.getDrawable(myDrawableId); 
// it abends on this next line 
LayerDrawable ld = (LayerDrawable) r.getDrawable(R.id.my_item_id); 
// this is where I want to set the id of the drawable to use in the bitmap 
ld.setDrawableByLayerId(myDrawableId, drawable); 
```

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T11:42:16.843

好的，当您调用 getDrawable 时，它​​需要引用您的可绘制文件夹中的一个可绘制对象。我不确定 my_item_id 是什么，但如果它是可绘制的，请尝试

```
LayerDrawable ld = (LayerDrawable) r.getDrawable(R.drawable.my_item_id); 
```

# ajax - Django jquery 数据表“aData 未定义”错误

> ID：10376538
> 
> 赞同：0
> 
> 时间：2012-04-29T22:23:19.550
> 
> 标签：ajax, django, jquery, datatable

我尝试在 Django 中实现 jquery datatable ajax-source 的使用，但是有一些问题。ajax 调用运行良好并得到响应，但是`aData is undefined`在 javascript 中引发该错误之后。

会有什么问题？

这些是我到目前为止所拥有的。

**视图.py**

```
def model_history(request):
    o = Model.objects.get(id=request.GET["pk"])
    items_list = list(o.lastupdate_set.all().values())
    return HttpResponse(simplejson.dumps(items_list),'application/json') 
```

**js**

```
 function viewModelHistory(pk){
        url1 = "/model/history/?pk="+pk;

        $('#history').dataTable( {
            "bProcessing": true,
            "bServerSide": true,
            "sAjaxSource": url1,
            "fnServerData": function ( sSource, aoData, fnCallback ) {
              $.ajax( {
                "dataType": 'json',
                "type": "POST",
                "url": sSource,
                "data": aoData,
                "success": fnCallback
              } );
            }
          } );
} 
```

**列表模型.html**

```
<table id="history">
                    <thead>
                        <tr>
                            <th>col1</th>
                            <th>col2</th>
                            <th>col3</th>
                            <th>col4</th>
                            <th>col5</th>
                        </tr>
                    </thead>
                    <tbody>
                    </tbody>
                </table> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-24T21:12:03.370

您的 JSON 结构的格式似乎存在问题。jquery.datatables 期望它看起来像

`{"aaData": [["blah1", "blah2", "blah3"]]}`

如果您的 JSON 看起来像

`[["blah1", "blah2", "blah3"]]`

在您的 view.py 中，您需要将 item_list 包装在字典中，如下所示：

```
items_list_dict = {}
items_list_dict.update({'aaData': items_list})
return HttpResponse(simplejson.dumps(items_list_dict),'application/json') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-21T05:35:08.790

发布您的 JSON 输出会很有帮助，但我认为它看起来像这样：

```
[["key":"val"],["key":"val"]] 
```

如果是这样，您需要从 json 中删除您的密钥。Datatables 期望这样的 json：

```
[["val"],["val"]] 
```

您可以做的一件事是从您的查询中列出列表

```
my_json = []
for item_list in items_list:
    a = [item_list.xxx_column_name_xxx]
    my_json.append(a)

items_list_dict = {}
items_list_dict.update({'aaData': my_json})
data = json.dumps(items_list_dict)

return HttpResponse(data, mimetype='application/json') 
```

# admob - Admob：从大量活动到不活动

> ID：10376539
> 
> 赞同：1
> 
> 时间：2012-04-29T22:23:31.910
> 
> 标签：admob, status

我有一个带有 admob 广告的 Android 应用。这个应用程序很受欢迎，已经上线3个多月了。从一天到另一天，五天前，admob 状态变为非活动状态......它显示：“AdMob 从未收到您网站的广告请求。” 这个应用每天给我 80 美元，现在它降到了零。我尝试通过不同方式（支持表格、电子邮件、不同语言）联系 admob，但没有得到任何答复。我也没有收到任何通知。

正如您所料，我对 Admob 非常失望，真的不知道该怎么办。

有任何想法吗？

谢谢

# java - GWT（服务器端）多线程可能

> ID：10376541
> 
> 赞同：0
> 
> 时间：2012-04-29T22:24:15.453
> 
> 标签：java, multithreading, google-app-engine, gwt

我正在开发一个系统，服务器需要（每秒）向多个客户端发送值。我的想法是为每个客户端实现一个线程来执行此操作。我以以下方式实现了线程：

```
Runnable tu = new TimeUpdater(market_id);
Thread thread = ThreadManager.createBackgroundThread(tu);
thread.start(); 
```

和

```
public class TimeUpdater implements Runnable{
boolean close = false;
..
   public void run() {
      while(!close){

      try {
        //do something    
        Thread.sleep(1000);
      }catch (InterruptedException e) {
       }

      }
   }
} 
```

要暂停我刚刚使用的线程：

```
thread.interrupt();
thread = null; 
```

但我就是不能让线程的暂停/恢复工作。有没有人有更好的想法在服务器上使用多线程和 GWT？

错误地编辑了原帖。- 马丁

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:07:40.827

很抱歉，但我相信 google-app-engine 不允许多线程。例如，请参见[此处](https://stackoverflow.com/questions/3800435/why-does-google-app-engine-support-a-single-thread-of-execution-only)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T17:12:59.753

首先，您的后台线程要求这些进程在后端运行。为了做到这一点，您必须将任务发送到后端，您将在后端运行任务，因此添加线程只会增加应用程序的延迟。您实际上不需要线程来发送消息；后端请求持续 10 分钟。此外，您的线程将按照自己的请求运行；您可能能够在静态 ram 中存储线程列表以便能够访问它们，但更好的解决方案是在消息进入时分发消息，而不是让实例保持在线和休眠状态。如果您的客户端每秒都向服务器发送消息，则该 rpc 可以通过键查询需要通知哪些其他用户，并立即发送消息。如果您使用异步数据存储进程，它会非常快。此外，如果您想缩短请求时间，

我使用 ThreadLocal 映射和清理过滤器进行这样的后处理。Servlet 将作业发布到可运行的列表中，并且清理过滤器运行这些作业。只要您立即启动异步请求，它们通常会在清理过滤器到达它们时完成。

[https://developers.google.com/appengine/docs/java/datastore/async](https://developers.google.com/appengine/docs/java/datastore/async)

# android - ListView contentview 从外部 xml 文件更改

> ID：10376543
> 
> 赞同：0
> 
> 时间：2012-04-29T22:24:21.920
> 
> 标签：android, listview, resources, listitem

这就是我想要做的。我有一个从 /values/menu.xml 中保存的 xml 资源文件填充的列表视图

它里面有这个代码：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
 <string-array name="menuchoices">
     <item name="pv">Present Value</item>
     <item name="fv">Future Value</item>
     <item name="bond">Bond Pricing</item>
 </string-array>   
</resources> 
```

到目前为止这么简单。然后我的 Main.java 文件如下所示：（改编自此处的其他列表视图问题）

```
public class Main extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    ListView lv = (ListView) findViewById(R.id.listView1);
    lv.setAdapter(new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1,
            getResources().getStringArray(R.array.menuchoices)
            ));

}

public void onListItemClick(ListView partent, View v, int position, long id) {
   if ("pv".equals(getResources().getStringArray(R.array.menuchoices)[position])){
       setContentView(R.layout.presentvalue);
   }
   }       
} 
```

基本上我读到一直启动新活动并不是最佳实践，所以我只是告诉 if 语句来更改内容视图。问题是——当我点击列表中的第一项时没有任何反应。我也尝试用“Present Value”代替“pv”，但它也没有帮助。

我认为这是因为我从这里的[List View selection 之类的帖子中获取代码以启动新的 Activity](https://stackoverflow.com/questions/3420458/list-view-selection-to-start-a-new-activity)）但我不知道如何更改它，以便它与外部 xml 资源文件一起使用。

这应该是一个简单的修复吧？

提前致谢

最大限度

Ps 所有其他东西都有效（presentvalue.xml 文件位于布局文件夹中，当我运行应用程序时列表正确显示）

编辑 //

这是有问题的行

```
public void onListItemClick(ListView parent, View v, int position, long id) {
   if (view.getText().toString().equals("Present Value")){
       startActivity(new Intent(Main.this, PresentValue.class));
   }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:40:02.343

该函数`onListItemClick()`通常与 ListActivity 一起使用。对此有几个修复：

1.  *   将行更改`extends Activity`为`extends ListActivity`。
    *   删除您的 ListView 定义。
    *   将您的 main.xml id 从更改`@+id/listView1`为`@android:id/list`
2.  *   之后添加`implements OnItemClickListener`你的类定义`extends Activity`
    *   将函数更改`onListItemClick`为`onItemClick`

尝试移动你的`menuchoices`块：

```
 <string-array name="menuchoices">
     <item name="pv">Present Value</item>
     <item name="fv">Future Value</item>
     <item name="bond">Bond Pricing</item>
 </string-array> 
```

进入您的 string.xml 文件，然后我们可以简化您的适配器（假设您做了上面的更改 #1）：

```
setListAdapter(new ArrayAdapter<String>(this,
        android.R.layout.simple_list_item_1,
        R.array.menuchoices)); 
```

我们还可以浓缩您如何测试菜单选择：

```
"pv".equals(getResources().getStringArray(R.array.menuchoices)[position]) 
```

变成：

```
view.getText().toString().equals("Present Value"); 
```

（小点，你在“父母”这个词中有错字）

怎么样？

# javascript - javascript样式表转换器不起作用

> ID：10376548
> 
> 赞同：0
> 
> 时间：2012-04-29T22:25:09.653
> 
> 标签：javascript, css, stylesheet, alternate

好的，朋友给了我这段代码，但它不起作用。我一直在寻找一个 java 样式表转换器，这是我唯一能找到的。当我单击链接（更改样式）时，什么也没有发生。帮助？而且我确实很难理解javascript，所以对我来说很难。

js代码：

```
function setActiveStyleSheet(title) {
  var i, a, main;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title")) {
      a.disabled = true;
      if(a.getAttribute("title") == title) a.disabled = false;
    }
  }
}

function getActiveStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1 && a.getAttribute("title") && !a.disabled) return a.getAttribute("title");
  }
  return null;
}

function getPreferredStyleSheet() {
  var i, a;
  for(i=0; (a = document.getElementsByTagName("link")[i]); i++) {
    if(a.getAttribute("rel").indexOf("style") != -1
       && a.getAttribute("rel").indexOf("alt") == -1
       && a.getAttribute("title")
       ) return a.getAttribute("title");
  }
  return null;
}

function createCookie(name,value,days) {
  if (days) {
    var date = new Date();
    date.setTime(date.getTime()+(days*24*60*60*1000));
    var expires = "; expires="+date.toGMTString();
  }
  else expires = "";
  document.cookie = name+"="+value+expires+"; path=/";
}

function readCookie(name) {
  var nameEQ = name + "=";
  var ca = document.cookie.split(';');
  for(var i=0;i < ca.length;i++) {
    var c = ca[i];
    while (c.charAt(0)==' ') c = c.substring(1,c.length);
    if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length,c.length);
  }
  return null;
}

window.onload = function(e) {
  var cookie = readCookie("style");
  var title = cookie ? cookie : getPreferredStyleSheet();
  setActiveStyleSheet(title);
}

window.onunload = function(e) {
  var title = getActiveStyleSheet();
  createCookie("style", title, 365);
}

var cookie = readCookie("style");
var title = cookie ? cookie : getPreferredStyleSheet();
setActiveStyleSheet(title);

    }
); 
```

标题样式表代码：

```
<link rel="stylesheet" type="text/css" media="screen" href="css/zerohour.css" title="default" />

<link rel="alternate stylesheet" type="text/css" media="screen" href="css/rainbow.css" title="rainbow" /> 
```

链接激活码：

```
<a href="#" 

onclick="setActiveStyleSheet('default'); 

return false;">change style to default</a>

<a href="#" 

onclick="setActiveStyleSheet('rainbow'); 

return false;">change style to rainbow</a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T03:39:45.633

这是我认为您正在尝试做的事情的重写：

```
var activeStylesheet = (function() {

  // Store title of default linked stylesheet
  var defaultTitle;

  return {

    // Set the active stylesheet to the link styesheet element with title
    // Set all others to disabled
    setActive: function(title) {
      var link, links = document.getElementsByTagName('link');

      for (var i=0, iLen=links.length; i<iLen; i++) {
        link = links[i];

        if (link.rel.indexOf("style") != -1 && link.title) { 
          link.disabled = true; 

          if (link.title == title) {
            link.disabled = false; 
          }
        }
      }
    },

    // Return the title of the currently active linked stylesheet,
    // or undefined if none found
    getActive: function() {
      var link, links = document.getElementsByTagName('link');

      for (var i=0, iLen=links.length; i<iLen; i++) {
        link = links[i];

        if (link.rel.indexOf("style") != -1 &&
            link.title &&
           !link.disabled) {
          return link.title;
        }
      }
    },

    // Return the title of the link stylesheet element where 
    // rel property contains 'alt'
    getPreferred: function() {
      var link, links = document.getElementsByTagName('link');

      for (var i=0, iLen=links.length; i<iLen; i++) {
        link = links[i];

        if (link.rel.indexOf("style") != -1 && 
            link.rel.indexOf('alt') == -1 &&
            link.title) { 
          defaultTitle = title;
          return link.title; 
        }
      }
    }
  };
}()); 
```

一些按钮来做一些事情：

```
<button onclick="
 alert(activeStylesheet.getActive());
">Show title of active stylesheet</button>
<button onclick="
 activeStylesheet.setActive('rainbow');
">Set active stylesheet to "rainbow"</button>
<button onclick="
 activeStylesheet.setActive('default');
">Set active stylesheet to "default"</button> 
```

请注意，使用标题将区分大小写，所以要小心。

您可以将默认链接样式表的标题存储在*defaultTitle*变量中，但我不知道您想用它做什么。您有一个*setPreferred*，它首先检查是否设置了*defaultTitle*，如果没有，则调用*getPreferred* ，使用*defaultTitle*调用*setActive*。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:33:41.077

我意识到这个问题没有被标记`Jquery`，但除非你有充分的理由坚持使用 vanilla Javascript，否则我会推荐 Jquery。

您只需两行代码即可切换样式：

```
$('#foobar').click(function(){
        $('link').attr('href','newstyle.css');
        return false;
}); 
```

**[现场演示](http://jsfiddle.net/zv677/8/)***

# asp.net - web.config 中的 securityTrimmingEnabled="true" 效果太好了

> ID：10376552
> 
> 赞同：1
> 
> 时间：2012-04-29T22:25:55.260
> 
> 标签：asp.net

我正在使用 C# ASP.NET 4 VS2010。

我正在使用角色的成员资格，这些角色已经像往常一样定义了。

我有一个`~/web.sitemap`文件，其中包括：

（`~/`安全性对所有人都允许。）

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >

  <siteMapNode url="" title=""  description="">

    <siteMapNode url="" title="A menu for the Administrator"  description="">
      <siteMapNode url="~/Admin/ResetPassword.aspx" title="Reset password for a user"  description="" />
      <siteMapNode url="~/Admin/SendEmailToUser.aspx" title="Send e-mail to a user"  description="" />
    </siteMapNode>

    <siteMapNode url="" title="A menu for the SIC (second in command) person"  description="">
      <siteMapNode url="~/SIC/UnlockUser.aspx" title="Unlock a user"  description="" />
      <siteMapNode url="~/SIC/ApproveUser.aspx" title="Approve a user"  description="" />
    </siteMapNode>

    <siteMapNode url="" title="A menu for users"  description="">
      <siteMapNode url="~/Users/MakeYourContribute.aspx" title="Make your contribution"  description="" />
      <siteMapNode url="~/Users/CheckOnYourBalance.aspx" title="Check on your balance"  description="" />
    </siteMapNode>

    <siteMapNode url="" title="A menu for anonymous visitors"  description="">
      <siteMapNode url="~/AboutUs.aspx" title="About us"  description="" />
      <siteMapNode url="~/Application.aspx" title="Send an application to join us"  description="" />
    </siteMapNode>

  </siteMapNode>

</siteMap> 
```

和一个这样结尾的 web.config 文件：

```
 <siteMap defaultProvider="XmlSiteMapProvider" enabled ="true">
      <providers>
        <add name="XmlSiteMapProvider" type="System.Web.XmlSiteMapProvider" siteMapFile="~/web.sitemap" securityTrimmingEnabled="true" />
      </providers>
    </siteMap>
  </system.web>
</configuration> 
```

我的菜单基于`asp:Repeater`控件，如下所示：

```
<div>
    <ul>
        <li>
            <asp:hyperlink runat="server" id="lnkHome" navigateurl="~/Default.aspx">Home</asp:hyperlink>
        </li>
        <asp:repeater runat="server" id="menu" datasourceid="SiteMapDataSource1">
                        <ItemTemplate>
                            <li>
                                <asp:HyperLink ID="lnkMenuItem" runat="server" NavigateUrl='<%# Eval("Url") %>'><%# Eval("Title") %></asp:HyperLink>

                                <asp:Repeater ID="submenu" runat="server" DataSource="<%# ((SiteMapNode) Container.DataItem).ChildNodes %>">
                                    <HeaderTemplate>
                                        <ul>
                                    </HeaderTemplate>
                                    <ItemTemplate>
                                        <li>
                                            <asp:HyperLink ID="lnkMenuItem" runat="server" NavigateUrl='<%# Eval("Url") %>'><%# Eval("Title") %></asp:HyperLink>
                                        </li>
                                    </ItemTemplate>
                                    <FooterTemplate>
    </ul>
    </FooterTemplate> </asp:Repeater> </li> </ItemTemplate> </asp:Repeater> </ul>
    <asp:sitemapdatasource id="SiteMapDataSource1" runat="server" showstartingnode="true" />
</div> 
```

允许/拒绝文件夹的安全性是为各个文件夹定义的。有 4 个安全级别： 1) 管理员。2）二把手（SIC）。3) 用户（所有注册用户）。4) 匿名用户。

例如，Administrators 角色和 SIC 角色的成员都可以在文件夹中进行操作`~/SIC`，但其余用户则被限制。

现在，只要我将 添加`securityTrimmingEnabled="true"`到`web.config`，我在菜单上看到的唯一行就是`Home`。

我配置错了吗？

为了让这个依赖于安全的菜单正常工作，我还需要进行更多配置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T05:38:30.550

问题是菜单标题中的空 URL。

```
 <siteMapNode url="" title="A menu for the Administrator"  description=""> 
```

站点地图功能似乎正在尝试确定空网址“”的权限，但失败了。

一种解决方法是修改 .sitemap 文件以明确声明可以访问父节点的角色。

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >

  <siteMapNode url="" title=""  description="" roles="*">

    <siteMapNode url="" title="A menu for the Administrator"  description="" roles="Administrators">
      <siteMapNode url="~/Admin/ResetPassword.aspx" title="Reset password for a user"  description="" />
      <siteMapNode url="~/Admin/SendEmailToUser.aspx" title="Send e-mail to a user"  description="" />
    </siteMapNode>

    <siteMapNode url="" title="A menu for the SIC (second in command) person"  description="" roles="administrators,second in command">
      <siteMapNode url="~/SIC/UnlockUser.aspx" title="Unlock a user"  description="" />
      <siteMapNode url="~/SIC/ApproveUser.aspx" title="Approve a user"  description="" />
    </siteMapNode>

    <siteMapNode url="" title="A menu for users"  description="" roles="administrators,secondincommand,users">
      <siteMapNode url="~/Users/MakeYourContribute.aspx" title="Make your contribution"  description="" />
      <siteMapNode url="~/Users/CheckOnYourBalance.aspx" title="Check on your balance"  description="" />
    </siteMapNode>

    <siteMapNode url="" title="A menu for anonymous visitors"  description="" roles="*">
      <siteMapNode url="~/AboutUs.aspx" title="About us"  description="" />
      <siteMapNode url="~/Application.aspx" title="Send an application to join us"  description="" />
    </siteMapNode>

  </siteMapNode>

</siteMap> 
```

诚然，这并不理想，因为现在您在两个地方部分配置了安全性。

另一种选择是只放在`roles="*"`每个菜单标题上。它仍然会在每个叶节点上应用权限检查，并在必要时隐藏它们。这样做的缺点是它可以显示空的菜单标题。

这是将我指向此解决方案的资源：[http ://www.4guysfromrolla.com/articles/122805-1.aspx](http://www.4guysfromrolla.com/articles/122805-1.aspx)

# javascript - Javascript 控制台问题

> ID：10376564
> 
> 赞同：2
> 
> 时间：2012-04-29T22:29:11.337
> 
> 标签：javascript

一般来说，在 JavaScript 控制台中，如果它声明：

> 未捕获的类型错误：对象 #<HTMLDocument> 没有方法“getElementByID”

您的代码中的典型问题是什么？我是 JavaScript 新手，在编写程序时，这个问题反复出现，我不知道如何解决这个问题，或者甚至可能是什么问题。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T22:31:18.527

`getElementById`不是`getElementByID`

小写`d`。JavaScript 区分大小写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T22:32:14.143

典型的问题是您可能`getElementByID`在您的意思时输入了`getElementById`。或者，如果错误输入发生在转录错误消息而不是原始代码中:-)，也许您做了一些您认为会产生 DOM 对象但实际上产生`null`或`undefined`或其他东西的事情；有很多方法可以做到这一点。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T22:31:30.700

正确的方法名称是`document.getElementById`.

# iphone - 返回键的单字符号？

> ID：10376566
> 
> 赞同：2
> 
> 时间：2012-04-29T22:29:33.847
> 
> 标签：iphone, objective-c, ios5

我有一个快速的问题，我在任何地方都找不到。我将我的文本字段限制为数字、小数和负号。但在这样做时，我关闭了返回键。有人知道 iOS 的返回键的 unichar 编号吗？我以为是十三岁，但那行不通。

```
 - (BOOL)textField:(UITextField *)textField 
 shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
 {
     NSUInteger lengthOfString = string.length;
for (NSInteger loopIndex = 0;  loopIndex < lengthOfString; loopIndex++)
     {
         unichar character = [string characterAtIndex:loopIndex]; 
         if (character < 45) return NO; //45 - 57 we want
         if (character > 57) return NO; // -./0123456789
         if (character == 47) return NO; //47 we dont want, it is 
 //             if (character  == 36) return YES
     }
NSUInteger newLength = [textField.text length] + [string length] - range.length;
return (newLength > 5) ? NO : YES;
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:59:52.683

您可能有其他原因来检查输入。（我认为与 '\n' 作品相比），但这可能会更好：

```
-(BOOL)textFieldShouldReturn:(UITextField *)textField 
```

**编辑**

处理浮点输入的更彻底的处理可能如下所示。关键思想是用建议的替换来构建一个候选字符串，然后测试整个字符串的语法有效性。通过这种方式，您可以处理用户在任意位置粘贴新文本而无需接触代码。正则表达式只是一种指定语法的紧凑/快速方法，您可以将自己的方法放入验证器中。

（我猜您可能希望将减号处理为不是字面上输入的一部分，而是需要负数的指示符。还假设长度限制是有效数字，而不仅仅是总字符）

```
// answers true for a valid floating point literal, notwithstanding length
- (BOOL)isValidFloat:(NSString *)string {

    // optional sign, followed by zero or more digits, followed by decimal, followed by zero or more digits
    NSString *regex = @"([-+]?[0-9]*\\.?[0-9]*)";
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF MATCHES %@", regex];
    return [predicate evaluateWithObject:string];
}

#define kMAX_DIGITS  5

- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

    NSString *currentText = textField.text;
    NSString *candidateText = [currentText stringByReplacingCharactersInRange:range withString:string];

    // accept a minus sign at any time. Place it in front if it's not already there
    if (string.length == 1 && [string characterAtIndex:0]=='-') {
        if ([currentText rangeOfString:string].location == NSNotFound) {
            textField.text = [string stringByAppendingString:currentText];
            // since we just inserted the minus, answer no so it won't be inserted twice
            return NO;
        }
    }

    // the decimal and minus sign don't count against the length constraint
    NSInteger decimalFudge = ([candidateText rangeOfString:@"."].location != NSNotFound)? 1 : 0;
    NSInteger minusFudge = (candidateText.length > 0 && [candidateText characterAtIndex:0]=='-')? 1 : 0;
    NSInteger maxLength = kMAX_DIGITS + decimalFudge + minusFudge;

    return (candidateText.length <= maxLength) && [self isValidFloat:candidateText];
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField {
    [textField resignFirstResponder];
    return YES;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:58:32.190

KeyCode 36 号呢？

看看这个链接的答案： [NSTextField captures return key event两次](https://stackoverflow.com/questions/5085551/nstextfield-captures-return-key-event-twice)

无论如何，您可以禁用这些限制并对每个输入键执行 NSLog 以获得返回的 unichar 数。

# memory - Cuda：内核调用后内存中的数据损坏

> ID：10376569
> 
> 赞同：0
> 
> 时间：2012-04-29T22:29:50.727
> 
> 标签：memory, cuda

请看这段代码：

```
#include <stdlib.h>
#include <stdio.h>

int N, L, I;
float * inputs;
float * temp;

// first kernel
__global__ void mulKernel ( float * output, float * inputs)///, float * weights)
{
   int idx = blockIdx.x * blockDim.x + threadIdx.x;

   output [idx] = inputs [idx] * 3;//weights [idx];
   //weights [idx] = 4;

   //__syncthreads();
}

//second kernel
__global__ void sumKernel ( float * output, float * input)
{
   int idx = blockIdx.x * blockDim.x + threadIdx.x;
   output [idx] = input[idx]*2;

   __syncthreads();
}

void printVector (const float *p, const int N) {
    for (int i=0; i<N; i++)
    printf("%f\n",p[i]);
}

int main(int argc, char *argv[])
{
    if(argc < 3)
        printf("Usage: cuda <layers> <inputs>\n");
    else
    {
        L = atoi(argv[1]);
        N = atoi(argv[2]);
        I = atoi(argv[2]);
        inputs = (float*)malloc(I*sizeof(float));
        float * weights = (float*)malloc(I*sizeof(float));

        // and fill with some arbitrary values
        for (int i=0; i<I; i++)
        {
            inputs[i] = 1;
        }
        for (int i=0; i<I; i++)
        {
            weights[i] = 1.5;
        }

        // allocate device memory
        float * devInputs = NULL;
        float * devTemp = NULL;
        float * devWeights = NULL;

        cudaMalloc ( (void**)&devInputs, I*sizeof(float) );
        cudaMalloc ( (void**)&devTemp, I*sizeof(float) );
        cudaMalloc ( (void**)&devWeights, I*sizeof(float) );

        // set kernel launch configuration
        dim3 threadsMul = dim3(512, 1);
        int blocksCount = floor(I / threadsMul.x) + 1;
        dim3 blocksMul  = dim3(blocksCount, 1);

        dim3 threadsSum = dim3(512, 1);
        blocksCount = floor(I / threadsSum.x) + 1;
        dim3 blocksSum  = dim3(blocksCount, 1);

        cudaMemcpy      ( devInputs, inputs, I*sizeof(float), cudaMemcpyHostToDevice );
        cudaMemcpy      ( devWeights, weights,I*sizeof(float), cudaMemcpyHostToDevice );

        //kernels calling in this cycle
        for(int j=0;j<L;j++)
        {
            // copying data to see that's ok
          cudaMemcpy      ( inputs, devInputs, I*sizeof(float), cudaMemcpyDeviceToHost );
          cudaMemcpy      ( weights, devWeights, I*sizeof(float), cudaMemcpyDeviceToHost );

            // print it
          printf("inputs:\n");
          printVector (inputs, N);
          printf("weights:\n");
          printVector (weights, N);
          printf("\n");

            // running first kernel
          mulKernel<<<blocksMul, threadsMul>>>(devTemp, devInputs);//, devWeights);

            // copying and printing data. We can see thats array weights contains a wrong values
          cudaMemcpy      ( inputs, devInputs, I*sizeof(float), cudaMemcpyDeviceToHost );
          cudaMemcpy      ( weights, devWeights, I*sizeof(float), cudaMemcpyDeviceToHost );

          printf("inputs:\n");
          printVector (inputs, N);
          printf("weights:\n");
          printVector (weights, N);
          printf("\n");

          if(cudaDeviceSynchronize() == cudaSuccess)
            printf("threads syncronized\n");

          cudaMemcpy      ( inputs, devInputs, I*sizeof(float), cudaMemcpyDeviceToHost );
          cudaMemcpy      ( weights, devWeights, I*sizeof(float), cudaMemcpyDeviceToHost );

          printf("inputs:\n");
          printVector (inputs, N);
          printf("weights:\n");
          printVector (weights, N);
          printf("\n");

          sumKernel<<<blocksSum, threadsSum>>>(devInputs, devTemp);

          cudaMemcpy      ( inputs, devInputs, I*sizeof(float), cudaMemcpyDeviceToHost );
          cudaMemcpy      ( weights, devWeights, I*sizeof(float), cudaMemcpyDeviceToHost );

          printf("inputs:\n");
          printVector (inputs, N);
          printf("weights:\n");
          printVector (weights, N);
          printf("\n\n");

          if(cudaDeviceSynchronize() == cudaSuccess)
            printf("threads syncronized\n");

          cudaMemcpy      ( inputs, devInputs, I*sizeof(float), cudaMemcpyDeviceToHost );
          cudaMemcpy      ( weights, devWeights, I*sizeof(float), cudaMemcpyDeviceToHost );

          printf("inputs:\n");
          printVector (inputs, N);
          printf("weights:\n");
          printVector (weights, N);
          printf("\n\n");
        }

        cudaMemcpy      ( inputs, devInputs, I*sizeof(float), cudaMemcpyDeviceToHost );

        cudaFree         ( devInputs   );
        cudaFree         ( devTemp   );
        cudaFree         ( devWeights   );

        printVector (inputs, N);

        free(inputs);
        free(weights);
    }
    return 0;
} 
```

并查看输出。在调用第一个内核之后，devWeights 数组丢失了数据。但它没有在任何地方使用。我只是将它复制到内存，运行内核（不影响它）并复制回主机。在输出中，我看到它发生了变化。为什么？我究竟做错了什么？

在 main 函数中，您可以看到循环。在其中我运行两个内核：sumKernel 和 mulKernel。在运行内核之前、之后和同步线程之后，我将数组复制到主机并打印它。所以，我在调用内核后看到了错误的数据。请参阅代码中的注释。

我没有看到任何错误（只有 cudaSuccess）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T13:52:01.510

Oh, I found the error. I forgot to use if(idx < N) in my kernels and CUDA didn't print error when gone out array dimensions. So, when I changed inputs array, I also changed data that situated in memory after inputs.

# jquery - 将水平 Superfish 菜单变成小屏幕上的下拉菜单

> ID：10376572
> 
> 赞同：1
> 
> 时间：2012-04-29T22:30:36.643
> 
> 标签：jquery, superfish

我有一个启用 Superfish 的水平菜单，当窗口加载或调整为小于 800 像素宽时，我想将其变成下拉菜单。如果窗口大小调整为超过 800 像素，我希望该下拉列表返回到水平列表。

水平菜单如下所示，通过 PHP 输出（此处简化）：

```
<ul id="menu-primary">
        <li id="menu-item-683">...</li>
        <li id="menu-item-10">
         <a class="sf-with-ul" href="about-us">About Us</a>
         <ul class="sub-menu"> </ul>
        </li>
        ...
</ul> 
```

所以我尝试像这样包装菜单：

```
$("#menu-primary").wrap("<ul id='menu-dropdown' class='sf-menu sf-vertical'><li id='li_drop' class='menu-item'></li></ul>");
$("#menu-primary").before("<span id='nav-dropdown' class='sf-with-ul'>MENU</span>"); 
```

然后在包装器上调用 superfish 以获得更小的窗口大小，并简单地从包装器中删除 superfish 类以获得更大的窗口大小：

```
 function menudrop(){
if ( $(window).innerWidth() < 800) {
    $("#menu-dropdown").addClass("menu menu-dropdown superfish sf-js-enabled");
    $('#menu-dropdown').superfish({delay:100,animation:{height:'show'},dropShadows: false, speed: 1});
}

else {
    $("#menu-dropdown").removeClass("menu menu-dropdown superfish sf-js-enabled");
}
} 
```

它主要工作，但如果我以 <800 像素加载页面并将大小调整为 >800，`#menu-primary`则不会显示。我已经尝试使 CSS 与我没有添加包装器完全相同，但它不起作用。似乎我需要以`$('#menu-dropdown').superfish();`某种方式撤消，但我不知道该怎么做。

这是可能的，还是有更好的方法来实现这个想法（无需将菜单转换为`<select><option>...`菜单）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-01T17:00:03.287

Superfish 必须有一个 jquery 事件绑定到菜单，所以即使你将 html 更改为旧的，它可能会改变下拉效果，但它仍然是错误的。Superfish 效果是不可逆的（我认为），但您可以在下拉菜单上为同一个 css 定义 2 种样式，您已经拥有的一种是 #menu-primary，另一种是 #menu-primary2（或其他任何东西），这两种风格应该是完全一样的。在应用 superfish 效果之前，保存旧菜单 html：

```
var oldmenu = $('#menu-primary').html();
$('#menu-primary').superfish(.... 
```

然后在浏览器大小 > 800 上粘贴旧的 html：

```
$('#menu-primary').html(oldmenu); 
```

并像这样应用另一个类（具有相同的样式）：

```
$('#menu-primary').attr("id", "menu-primary2"); 
```

现在超级鱼效果在此菜单上不起作用，样式仍然相同。

# python - 使用 GDAL 在 Python 和 Matplotlib 中读取 TIFF

> ID：10376573
> 
> 赞同：2
> 
> 时间：2012-04-29T22:31:14.863
> 
> 标签：python, matplotlib, gdal

我正在尝试使用 Python 和 MatPlotLib 显示灰度 TIFF 文件，

到目前为止，我已经阅读了这个文件：

```
import scipy as N
import gdal
import sys
import matplotlib.pyplot as pyplot

try:
    tif = gdal.Open('filename.tif')
    tifArray = tif.ReadAsArray()
except:
    print 'The file does not exist.'
    sys.exit(0)

band1 = tif.GetRasterBand(1)
band2 = tif.GetRasterBand(2)
band3 = tif.GetRasterBand(3)

band1Array = band1.ReadAsArray()
band2Array = band2.ReadAsArray()
band3Array = band3.ReadAsArray() 
```

但后来我不知道我还能做什么......我很无能为力。有人会在这方面帮助我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-30T06:07:25.313

将文件处理成 2 数组后，您可以使用 matplotlib 中绘制 2D 数组的任何函数，例如 cmap、imshow 等。

这是[弹珠示例的输出](http://www.fileformat.info/format/tiff/sample/index.htm)

```
img=mpimg.imread('MARBLES.TIF ')
imgplot = plt.imshow(img) 
```

如果您只查看图像的band3，您会得到以下结果：

```
imgplot2 = plt.imshow(band3Array)
plt.show() 
```

![弹珠band3](../Images/062d648db06ad3f80260fd09f3f0f19f.png)

进一步研究 MPL 和 2D 数组函数中的图像查看...

# java - 如何使用 ArrayList 在寄存器中查找名称

> ID：10376584
> 
> 赞同：0
> 
> 时间：2012-04-29T22:32:05.000
> 
> 标签：java, arraylist

我目前正在研究以下问题：

> **假设一个类 Name 具有存储为字符串的属性“surname”和“firstname”。让“注册”是一个带有声明的名称列表：**
> 
> ```
> ArrayList<Name> regist = new ArrayList<Name>(); 
> ```
> 
> **假设填充了“regist”，实现下面的方法，在列表中查找具有给定姓氏的名称，如果列表中不存在匹配的名称，则返回 null。（您可以编写 Java 代码或 Java 和伪代码的混合）。**
> 
> ```
> public Name find(String surname)
> {
>   //... to do ...
> } 
> ```

到目前为止，我能够得出的答案是：

```
public Name find (String surname)
{
  this.surname = surname;
  return null;
}

public Name()
{
  surname = " ";
} 
```

在那之后，我被困在这里，如果有人能告诉我如何完成这段代码，那么你的帮助将不胜感激，在此先感谢。

（如果我能够正确完成它，我将能够正确测试此代码）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:39:06.620

您必须遍历其中的项目`regList`并返回`Name`具有给定姓氏的对象。您当前的 find 代码不正确 - find 方法不在名称类中，并且（或不应）允许直接更改`Name`对象内的变量。

无论如何，解决方案是：

```
public Name find(String surname)
{
    for(Name obj : regList)
    {
       // Check the object's surname with the given one
       // Should check if obj is null
       // Must use .equals to compare strings.
       if(obj.surname.equals(surname))
           return obj;
    }

    // Not found
    return null;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:40:06.920

你的意思是什么意思：

```
public Name find (String surname)
{
    // loop all names in regist
    for(Name n : regist)
    {
        // find the Name object with matching surname
        if(n.getSurname().equals(surname))
        {
            return n;
        }
    }
    return null;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T22:38:49.140

您将需要遍历 regist 并测试姓氏是否与参数匹配...如果循环退出而没有找到匹配项，则返回 null。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T22:45:28.103

您在其中声明的 ArrayList `ArrayList<Name> regist = new ArrayList<Name>();` 可能已经具有您要查找的确定名称。要找到它，您必须在 sudo 代码中执行以下操作：

找出在 regist 中存储了多少名称，然后检查从位置 0 到最后一个位置的每个名称在 regist 中。如果相同，则返回名字和姓氏。请记住，first 和 surname 都添加到了 regist 中，并且您应该只测试 surename 并在surename 正确的情况下返回 first 和 surename。

# javascript - 运行函数时模拟单击以查看选项卡

> ID：10376589
> 
> 赞同：0
> 
> 时间：2012-04-29T22:32:39.560
> 
> 标签：javascript, jquery, click, simulation

我在项目中使用以下选项卡：

```
//Tabs
$('ul.tabs').each(function(){

  var $active, $content, $links = $(this).find('a');

  $active = $links.first().addClass('active');
  $content = $($active.attr('href'));

  $links.not(':first').each(function () {
    $($(this).attr('href')).hide();
  });

  $(this).on('click', 'a', function(e){

    $active.removeClass('active');
    $content.hide();

    $active = $(this);
    $content = $($(this).attr('href'));

    $active.addClass('active');
    $content.show();

    e.preventDefault();
  });
}); //End Tabs 
```

HTML如下：

```
<ul class='tabs'>
<li><a href='#tab1'>Tab 1</a></li>
<li><a href='#tab2'>Tab 2</a></li>
<li><a href='#tab3'>Tab 3</a></li>
</ul>
<div id='tab1'></div>
<div id='tab2'></div>
<div id='tab3'></div> 
```

我遇到的问题是我想在活动选项卡中运行一个函数，然后自动选择另一个选项卡，其中将显示先前执行的代码的结果。

我不确定如何模拟单击以自动选择下一个选项卡，因此将不胜感激任何帮助！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:37:21.607

模拟点击的一种简单方法是使用`.trigger()`

```
$("#tab2").trigger("click"); //when you need in the function 
```

# c++ - 将双精度列表标准化为 -1 到 1 或 0 - 255

> ID：10376600
> 
> 赞同：5
> 
> 时间：2012-04-29T22:36:01.837
> 
> 标签：c++, normalization

`-1.396655`我有一个在to之间的任何范围内的双打列表，`1.74707`甚至可能更高或更低，无论哪种方式，我都会在规范化之前知道`Min`and`Max`值是什么。我的问题是如何在`-1`to之间标准化这些值，`1`甚至更好地将它们从 double 值转换为 to 的 char`0`值`255`

任何帮助，将不胜感激。

```
double range = (double)(max - min);
value = 255 * (value - min)/range 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T22:40:19.633

你需要一个表格的[映射](http://en.wikipedia.org/wiki/Linear_equation)`y = mx + c`，你需要找到一个`m`和一个`c`。您有两个固定的数据点，即：

```
 1 = m * max + c
-1 = m * min + c 
```

从那里，它是[简单的代数](http://en.wikipedia.org/wiki/Simultaneous_equations)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T22:42:25.213

最简单的方法是首先移动所有值，使 min 为 0，方法是从每个数字中减去 Min。然后乘以 255/(Max-Min)，这样移动后的 Max 将映射到 255，其他所有内容都将线性缩放。所以我相信你的方程看起来像这样：

`newval = (unsigned char) ((oldval - Min)*(255/(Max-Min)))`

在转换为 char 之前，您可能需要更仔细地进行舍入。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-07-14T03:01:35.503

有两个改变要做。

首先，使用 256 作为限制。

其次，确保您的范围略微缩小以避免获得 256。

```
 public int GetRangedValue(double value, double min, double max)
    {
        int outputLimit = 256;

        double range = (max - min) - double.Epsilon; // Here we shorten the range slightly

        // Then we build a range such that value >= 0 and value < 1
        double rangedValue = (value - min) / range;

        return min + (int)(outputLimit * rangedValue);
    } 
```

通过这两个更改，您将在输出中获得正确的分布。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-01-04T08:56:28.503

当我开始使用 C++ 做一些卷积工作时，我解决了这个需求。

希望我的代码能给你一个有用的参考:)

```
bool normalize(uint8_t*& dst, double* src, int width, int height) {
    dst = new uint8_t[sizeof(uint8_t)*width*height];
    if (dst == NULL)
        return false;
    memset(dst, 0, sizeof(uint8_t)*width*height);
    double max   = std::numeric_limits<double>::min();
    double min   = std::numeric_limits<double>::max();
    double range = std::numeric_limits<double>::max();
    double norm  = 0.0;
    //find the boundary
    for (int j=0; j<height; j++) {
        for (int i=0; i<width; i++) {
            if (src[i+j*width] > max) 
                max = src[i+j*width];
            else if (src[i+j*width] < min)
                min = src[i+j*width];
        }
    }
    //normalize double matrix to be an uint8_t matrix
    range = max - min;
    for (int j=0; j<height; j++) {
        for (int i=0; i<width; i++) {
            norm = src[i+j*width];
            norm = 255.0*(norm-min)/range;
            dst[i+j*width] = (uint8_t)norm;
        }
    }
    return true;
} 
```

基本上输出（由'dst'接收的calley）在[0, 255]左右。

# python - 覆盖实例上的特殊方法

> ID：10376604
> 
> 赞同：27
> 
> 时间：2012-04-29T22:36:17.737
> 
> 标签：python, metaprogramming

我希望有人可以回答这个对Python有深入了解的人:)

考虑以下代码：

```
>>> class A(object):
...     pass
...
>>> def __repr__(self):
...     return "A"
...
>>> from types import MethodType
>>> a = A()
>>> a
<__main__.A object at 0x00AC6990>
>>> repr(a)
'<__main__.A object at 0x00AC6990>'
>>> setattr(a, "__repr__", MethodType(__repr__, a, a.__class__))
>>> a
<__main__.A object at 0x00AC6990>
>>> repr(a)
'<__main__.A object at 0x00AC6990>'
>>> 
```

请注意 repr(a) 没有产生 "A" 的预期结果？我想知道为什么会这样，是否有办法实现这一点......

我相比之下，以下示例有效（*也许是因为我们没有尝试覆盖特殊方法？*）：

```
>>> class A(object):
...     def foo(self):
...             return "foo"
...
>>> def bar(self):
...     return "bar"
...
>>> from types import MethodType
>>> a = A()
>>> a.foo()
'foo'
>>> setattr(a, "foo", MethodType(bar, a, a.__class__))
>>> a.foo()
'bar'
>>> 
```

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-04-29T22:42:30.703

Python 通常不会调用`__`实例上的特殊方法，即名称被包围的方法，而只会在类上调用。（虽然这是一个实现细节，但它是标准解释器 CPython 的特性。）所以没有办法`__repr__()`直接覆盖实例并使其工作。相反，您需要执行以下操作：

```
class A(object):
    def __repr__(self):
        return self._repr()
    def _repr(self):
        return object.__repr__(self) 
```

现在您可以`__repr__()`通过替换来覆盖实例`_repr()`。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2014-09-26T01:28:34.710

如[特殊方法查找](https://docs.python.org/3/reference/datamodel.html#special-method-lookup)中所述：

> 对于自定义类，特殊方法的隐式调用只有在对象类型上定义时才能保证正确工作，而不是在对象的实例字典中......除了为了正确性而绕过任何实例属性之外，隐式特殊方法查找通常还绕过`__getattribute__()`甚至对象元类的方法

（我剪掉的部分解释了这背后的基本原理，如果你对此感兴趣的话。）

Python 没有准确记录实现何时应该或不应该在类型上查找方法；实际上，它所记录的只是实现可能会或可能不会查看实例以进行特殊方法查找，因此您不应该指望任何一个。

正如您可以从测试结果中猜到的那样，在 CPython 实现中，`__repr__`是在类型上查找的函数之一。

* * *

2.x 中的情况略有不同，主要是因为经典类的存在，但只要您只是创建新样式的类，您就可以认为它们是相同的。

* * *

人们想要这样做的最常见原因是猴子修补对象的不同实例来做不同的事情。你不能用特殊的方法做到这一点，所以……你能做什么？有一个干净的解决方案和一个 hacky 的解决方案。

干净的解决方案是在类上实现一个特殊方法，该方法只调用实例上的常规方法。然后，您可以在每个实例上修补该常规方法。例如：

```
class C(object):
    def __repr__(self):
        return getattr(self, '_repr')()
    def _repr(self):
        return 'Boring: {}'.format(object.__repr__(self))

c = C()
def c_repr(self):
    return "It's-a me, c_repr: {}".format(object.__repr__(self))
c._repr = c_repr.__get__(c) 
```

hacky 的解决方案是动态构建一个新的子类并重新分类对象。我怀疑任何真正有这种情况的人都会知道如何从那句话中实现它，而任何不知道如何实现的人都不应该尝试，所以我就这样吧。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-29T22:37:38.163

原因是`__x__()`为类而不是实例定义了特殊方法 ()。

当您考虑时，这是有道理的`__new__()`- 在实例上调用它是不可能的，因为在调用它时实例不存在。

因此，如果您愿意，可以对整个班级执行此操作：

```
>>> A.__repr__ = __repr__
>>> a
A 
```

或在个别情况下，如[kindall 的回答](https://stackoverflow.com/a/10376655/722121)。（注意这里有很多相似之处，但我认为我的示例添加到足以发布此内容）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-29T23:10:40.427

对于新样式类，Python 使用一种绕过实例的特殊方法查找。[这里是源代码](http://hg.python.org/cpython/file/2.7/Objects/typeobject.c#l1164)的摘录：

```
 1164 /* Internal routines to do a method lookup in the type
  1165    without looking in the instance dictionary
  1166    (so we can't use PyObject_GetAttr) but still binding
  1167    it to the instance.  The arguments are the object,
  1168    the method name as a C string, and the address of a
  1169    static variable used to cache the interned Python string.
  1170 
  1171    Two variants:
  1172 
  1173    - lookup_maybe() returns NULL without raising an exception
  1174      when the _PyType_Lookup() call fails;
  1175 
  1176    - lookup_method() always raises an exception upon errors.
  1177 
  1178    - _PyObject_LookupSpecial() exported for the benefit of other places.
  1179 */ 
```

您可以更改为旧式类（不要从*object*继承），也可以将调度程序方法添加到类（将查找转发回实例的方法）。有关实例调度程序方法的示例，请参阅[http://code.activestate.com/recipes/578091上的配方](http://code.activestate.com/recipes/578091)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-10-21T12:37:55.017

TLDR：不可能在实例上定义适当的、未绑定的方法；这也适用于特殊方法。由于绑定方法是一等对象，因此在某些情况下差异并不明显。但是，特殊方法总是在需要时被 Python 查找为正确的、未绑定的方法。

您始终可以手动回退到使用更通用属性访问的特殊方法。属性访问涵盖存储为属性的绑定方法以及根据需要绑定的未绑定方法。这类似于如何`__repr__`或其他方法使用属性来定义其输出。

```
class A:
    def __init__(self, name):
        self.name = name

    def __repr__(self):
        # call attribute to derive __repr__
        return self.__representation__()

    def __representation__(self):
        return f'{self.__class__.__name__}({self.name})'

    def __str__(self):
        # return attribute to derive __str__
        return self.name 
```

* * *

# 未绑定与绑定方法

Python中的方法有两种含义：类的*未绑定*方法和该类实例的*绑定*方法。

未绑定方法是类或其基类之一上的常规函数​​。它可以在类定义期间定义，也可以在以后添加。

```
>>> class Foo:
...     def bar(self): print('bar on', self)
...
>>> Foo.bar
<function __main__.Foo.bar(self)> 
```

一个未绑定的方法在类上只存在一次——它对所有实例都是相同的。

绑定方法是已*绑定*到特定实例的未绑定方法。这通常意味着该方法是通过实例查找的，该实例调用函数的[`__get__`方法](https://docs.python.org/3/reference/datamodel.html#object.__get__)。

```
>>> foo = Foo()
>>> # lookup through instance
>>> foo.bar
<bound method Foo.bar of <__main__.Foo object at 0x10c3b6390>>
>>> # explicit descriptor invokation
>>> type(foo).bar.__get__(foo, type(Foo))
<bound method Foo.bar of <__main__.Foo object at 0x10c3b6390>> 
```

就 Python 而言，“方法”一般是指*根据需要*绑定到其实例的*未绑定方法*。当 Python 需要特殊方法时，它直接调用未绑定方法的描述符协议。结果，*在类上查找该方法*；实例上的属性被忽略。

 *** * *

# 对象上的绑定方法

每次从其实例中获取绑定方法时，都会重新创建绑定方法。结果是一个具有标识的一流对象，可以存储和传递，并在以后调用。

```
>>> foo.bar is foo.bar  # binding happens on every lookup
False
>>> foo_bar = foo.bar   # bound methods can be stored
>>> foo_bar()           # stored bound methods can be called later
bar on <__main__.Foo object at 0x10c3b6390>
>>> foo_bar()
bar on <__main__.Foo object at 0x10c3b6390> 
```

能够存储绑定方法意味着它们*也*可以存储为属性。在其绑定实例上存储绑定方法使其看起来类似于未绑定方法。但实际上存储绑定方法的行为略有不同，可以存储在*任何*允许属性的对象上。

```
>>> foo.qux = foo.bar
>>> foo.qux
<bound method Foo.bar of <__main__.Foo object at 0x10c3b6390>>
>>> foo.qux is foo.qux  # binding is not repeated on every lookup!
True
>>> too = Foo()
>>> too.qux = foo.qux   # bound methods can be stored on other instances!
>>> too.qux             # ...but are still bound to the original instance!
<bound method Foo.bar of <__main__.Foo object at 0x10c3b6390>>
>>> import builtins
>>> builtins.qux = foo.qux  # bound methods can be stored...
>>> qux                     # ... *anywhere* that supports attributes
<bound method Foo.bar of <__main__.Foo object at 0x10c3b6390>> 
```

就 Python 而言，绑定方法只是常规的、可调用的对象。正如它无法知道是否`too.qux`是 的方法`too`一样，它也无法推断是否`too.__repr__`是方法。**

# java - 有没有一种本机或更快的方法来在 java 中对列表进行分区？

> ID：10376608
> 
> 赞同：0
> 
> 时间：2012-04-29T22:37:18.773
> 
> 标签：java, partitioning

假设我有一个像 {1,2,3,4,5,6,7,8} 这样的列表。有没有一种快速的方法来创建两个列表（一个带有前半部分，另一个带有后半部分）？拆分的位置总是列表大小的一半（列表总是偶数）

目前我的方法是将大小除以 2，然后迭代列表，在 list1 中添加低于该值的任何内容，在 list2 中添加任何高于该值的任何内容。我只是想知道是否有更快的方法（我需要做超过 10 亿个这样的操作，所以即使性能稍有改进也可以为我节省很多时间）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T22:39:53.553

至于内置功能，您可以使用[`List#subList(int, int)`](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#subList%28int,%20int%29)：

```
int size = original.size();
List<Integer> first = original.subList(0, size / 2);
List<Integer> second = original.subList(size / 2, size); 
```

是否要使用`subList()`取决于您对内容所做的操作。`subList()`将视图返回到原始列表中（而不是实际复制）。确保您阅读了 javadoc。这是一个片段：

> 返回此列表在指定的 fromIndex（包括）和 toIndex（不包括）之间的部分的视图。（如果 fromIndex 和 toIndex 相等，则返回列表为空。）返回列表由此列表支持，因此返回列表中的非结构性更改会反映在此列表中，反之亦然。返回的列表支持此列表支持的所有可选列表操作。

另外，我无法真正谈论它的性能`subList()`以及它可能会或可能不会满足您的要求。我想因为它只是创建视图而不是复制它会相对较快。但同样，相当情境化，您需要以任何一种方式对其进行分析才能知道。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:42:17.237

好吧，你必须做超过十亿个这些 - 有趣。

您应该分析不同的方法。

我的赌注是使用数组和`System.arraycopy`

如果您的代码不是生成列表的代码，则取决于`List`所提供的您的实现。

如果我们提供有关要求的更多详细信息，您会得到更好的答案。是必需的副本还是视图（由`subList()`enought 提供）。您正在使用/正在提供哪种实现`List`等。速度也将受到 jvm（版本和平台）的影响。

# php - php / sql - 登录失败

> ID：10376610
> 
> 赞同：1
> 
> 时间：2012-04-29T22:37:20.107
> 
> 标签：php, forms

我正在尝试验证我的 php/sql 网页的登录名。

第一个代码显示了 Login.php 的一部分，我在其中获取了两个文本字段、电子邮件和密码，并将它们传递给 authenticate.php

第二个代码显示了我在哪里获取这两个值并尝试处理它们。

我遇到的问题是我每次都被定向到 index.php，即使我在该字段中输入了正确的数据。

任何帮助，将不胜感激。

Login.php 的一部分

```
 <td width="70">Email</td>
        <td width="6" align="center">:</td>
<form action="authenticate.php" method="post" name="authenticate_form">
        <td><input name="email" type="text" id="email"></td>
      </tr>
      <tr>
        <td width="70">Password</td>
        <td width="6" align="center">:</td>
        <td><input name="password" type="text" id="password"></td>
      </tr>
      <tr>
        <td width="70">Login</td>
        <td width="6" align="center">:</td>
        <td>
            <input type="submit" name="submit" value="Login" />
</form>
        </td> 
```

验证.php

```
// ----------------------
// Retrieve login information

include("db_info.php");

// ----------------------

$conn = oci_connect($db_user, $db_pwd, '(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(Host=asuka.cs.ndsu.nodak.edu)(Port=1521)))(CONNECT_DATA=(SID=asuka)))');

if (!$conn) {
    $e = oci_error();
    print_r($e);
    exit();
}

// ----------------------
// Get POST values

if(isset($_POST['email']) && $_POST['email'] && isset($_POST['password']) && $_POST['password']) {

     // Get posted form information and strip out unsafe characters
     $email = htmlspecialchars(stripslashes($_POST['email']));
 $password = htmlspecialchars(stripslashes($_POST['password']));
} else {
    // Illegal access.
    // Redirect back to index.php
    header("location: index3.php");
    exit();
}

// ----------------------
// Authenticate User

// Create query
$sql = "SELECT PASSWORD FROM CUSTOMER WHERE EMAIL = '$email'";

 // Create database query statement
$statement_id = oci_parse($conn, $sql);

// Execute query statement
$result = oci_execute($statement_id, OCI_COMMIT_ON_SUCCESS);
$queryResult = oci_fetch_row($statement_id);

//var_dump($queryResult);
// Check for successful authentication
if($password == $queryResult[0]) {

if ($email=="admin@hotmail.com") {
    $db_login_status = 2;
    header("location: admin.php");
} else {
    $db_login_status = 1;
    header("location: normal.php");
}
} else {
    header("location: fail.php");
}

// ----------------------
// Close connections

oci_free_statement($statement_id);
oci_close($conn); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:42:39.070

`$result`永远不会分配，因此它永远不会等于`1`. 解决方法是：

```
$result = oci_execute($statement_id, OCI_COMMIT_ON_SUCCESS);
// Check for successful authentication
if ($result) { 
```

`$result`将是布尔值，因此您无需将其与`1`.

`$result`返回时有`false`一个函数可以查看出了什么问题。这个函数是`oci_error()`。您应该打印（或记录）错误，而不是重定向。这将帮助您进行调试。

问题可能是您的 SQL 查询中的参数没有引号。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T22:43:10.090

```
if ($email=="admin@hotmail.com") {
    $db_login_status = 2;
    header("location: index1.php");
} else {
    $db_login_status = 1;
    header("location: index.php");
} 
```

如果您被发送到 index.php，那一定意味着您没有使用“admin@hotmail.com”登录。尝试使用该电子邮件地址。否则，请尝试删除上面的代码并留下这两行：

```
 $db_login_status = 1;
    header("location: index.php"); 
```

问题是*即使*您输入了正确的登录名，您也不​​会被重定向*，因为*您这样做了，您会被重定向。如果您不想在登录时被重定向，则必须更改脚本以执行您想要的任何操作。

编辑：根据您的评论，它似乎`$email`是空的。那是因为`<input name="email">`您的表单中的 是一个隐藏的输入，当您输入密码时没有填充任何内容。我假设您有一个 javascript，它从其他表格单元格中的可见文本输入中导入值。你？否则就是你的问题。您的`<form>`标签实际上需要包含登录数据输入的输入。您可以通过将表单包裹在整个登录表周围来解决问题。

除此之外，您`$result`将*始终*为 1，因为查询成功，而不是因为它包含结果。之后，您还需要执行`$row = oci_fetch_row($statement_id);`. 然后检查`if($row)`而不是`if($statement_id)`. 或者干脆`if(oci_fetch_row($statement_id))`

附带说明一下，结果是另一个问题：不要忘记在外部编辑器上提交您对数据库所做的编辑。如果它们没有提交，其他查询将看不到它们。在这种情况下，'admin@hotmail.com' 的记录被添加到外部程序中并且没有提交 - 所以 PHP 拒绝确认登录。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T22:49:16.283

`if ($result==1) {}`

$result 从未在代码中分配！

# javascript - 如何为谷歌地图 API v3 创建一个带有自定义图标的标记？

> ID：10376617
> 
> 赞同：18
> 
> 时间：2012-04-29T22:38:09.727
> 
> 标签：javascript, google-maps-api-3, google-maps-markers

我已经阅读[https://developers.google.com/maps/documentation/javascript/overlays](https://developers.google.com/maps/documentation/javascript/overlays)有一段时间了，我似乎无法为我的地图工作获得自定义图标。

这是我的javascript：

```
var simplerweb = new google.maps.LatLng(55.977046,-3.197118);
var marker;
var map;

function initialize() {
    var myOpts = {
        center:    simplerweb,  
        zoom:      15,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"), myOpts);
    marker = new google.maps.Marker({
        map:        map,
        draggable:  true,
        animation:  google.maps.Animation.DROP,
        position:   simplerweb
    });
    google.maps.event.addListener(marker, 'click', toggleBounce);
}

function toggleBounce() {
  if (marker.getAnimation() != null) {
    marker.setAnimation(null);
  } else {
    marker.setAnimation(google.maps.Animation.BOUNCE);
  }
} 
```

对于 gmaps 的完整初学者有什么建议吗？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-29T22:40:51.083

> *   **演示：** [http ://so.lucafilosofi.com/how-do-you-create-a-marker-with-a-custom-icon-for-google-maps-api-v3](http://so.lucafilosofi.com/how-do-you-create-a-marker-with-a-custom-icon-for-google-maps-api-v3)

```
marker = new google.maps.Marker({
    map:map,
    // draggable:true,
    // animation: google.maps.Animation.DROP,
    position: new google.maps.LatLng(59.32522, 18.07002),
    icon: 'http://cdn.com/my-custom-icon.png' // null = default icon
  }); 
```

> *   **注意：** [https ://developers.google.com/maps/documentation/javascript/overlays#Icons](https://developers.google.com/maps/documentation/javascript/overlays#Icons)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-18T05:13:25.630

尝试

```
 var marker = new google.maps.Marker({
      position: map.getCenter(),
      icon: 'http://imageshack.us/a/img826/9489/x1my.png',
      map: map
    }); 
```

* * *

从这里

[https://developers.google.com/maps/documentation/javascript/examples/marker-symbol-custom](https://developers.google.com/maps/documentation/javascript/examples/marker-symbol-custom)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-12-29T12:05:31.847

您想要的颜色上的符号！

我几天来一直在寻找这个答案，这是创建自定义标记的正确且简单的方法：

' [http://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=xxx%7c5680FC%7c000000&.png](http://chart.googleapis.com/chart?chst=d_map_pin_letter&chld=xxx%7c5680FC%7c000000&.png) ' 其中 xxx 是文本，5680fc 是背景的十六进制颜色代码，000000 是文本的十六进制颜色代码.

这些标记是完全动态的，您可以创建任何您想要的气球图标。只需更改网址。

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2016-01-14T12:40:38.247

```
LatLng hello = new LatLng(X, Y);          // whereX & Y are coordinates

Bitmap icon = BitmapFactory.decodeResource(getApplicationContext().getResources(),
                R.drawable.university);   // where university is the icon name that is used as a marker.

mMap.addMarker(new MarkerOptions().icon(BitmapDescriptorFactory.fromBitmap(icon)).position(hello).title("Hello World!"));

mMap.moveCamera(CameraUpdateFactory.newLatLng(hello)); 
```

# ruby-on-rails - NoMethodError（调用私有方法“gets”# )

> ID：10376618
> 
> 赞同：3
> 
> 时间：2012-04-29T22:38:14.030
> 
> 标签：ruby-on-rails, paperclip

我有这个方法：

```
 def parse_headers
    return unless upload?
    tempfile = upload.queued_for_write[:original]
    unless tempfile.nil?
      csv = CSV.new(tempfile, :headers => :first_row)
      csv.shift
      raise NilColumnHeader if csv.headers.include?(nil)
      self.headers = csv.headers
    end
  end 
```

我得到

```
NoMethodError (private method `gets' called for #<Paperclip::UploadedFileAdapter:0xdbc7624>):
  /home/neilmarion/.rvm/rubies/ruby-1.9.3-head/lib/ruby/1.9.1/csv.rb:1851:in `block in shift'
  /home/neilmarion/.rvm/rubies/ruby-1.9.3-head/lib/ruby/1.9.1/csv.rb:1849:in `loop'
  /home/neilmarion/.rvm/rubies/ruby-1.9.3-head/lib/ruby/1.9.1/csv.rb:1849:in `shift'
  app/models/import.rb:60:in `parse_headers'
  activesupport (3.2.3) lib/active_support/callbacks.rb:429:in `_run__820973538__save__162881384__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_save_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  activerecord (3.2.3) lib/active_record/callbacks.rb:264:in `create_or_update'
  activerecord (3.2.3) lib/active_record/persistence.rb:84:in `save'
  activerecord (3.2.3) lib/active_record/validations.rb:50:in `save'
  activerecord (3.2.3) lib/active_record/attribute_methods/dirty.rb:22:in `save'
  activerecord (3.2.3) lib/active_record/transactions.rb:241:in `block (2 levels) in save'
  activerecord (3.2.3) lib/active_record/transactions.rb:295:in `block in with_transaction_returning_status'
  activerecord (3.2.3) lib/active_record/connection_adapters/abstract/database_statements.rb:192:in `transaction'
  activerecord (3.2.3) lib/active_record/transactions.rb:208:in `transaction'
  deadlock_retry (1.2.0) lib/deadlock_retry.rb:31:in `transaction_with_deadlock_handling'
  activerecord (3.2.3) lib/active_record/transactions.rb:293:in `with_transaction_returning_status'
  activerecord (3.2.3) lib/active_record/transactions.rb:241:in `block in save'
  activerecord (3.2.3) lib/active_record/transactions.rb:252:in `rollback_active_record_state!'
  activerecord (3.2.3) lib/active_record/transactions.rb:240:in `save'
  app/controllers/imports_controller.rb:19:in `create'
  actionpack (3.2.3) lib/action_controller/metal/implicit_render.rb:4:in `send_action'
  actionpack (3.2.3) lib/abstract_controller/base.rb:167:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (3.2.3) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
  activesupport (3.2.3) lib/active_support/callbacks.rb:535:in `_run__450882913__process_action__213203411__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/abstract_controller/callbacks.rb:17:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
  activesupport (3.2.3) lib/active_support/notifications.rb:123:in `block in instrument'
  activesupport (3.2.3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (3.2.3) lib/active_support/notifications.rb:123:in `instrument'
  actionpack (3.2.3) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
  actionpack (3.2.3) lib/action_controller/metal/params_wrapper.rb:205:in `process_action'
  activerecord (3.2.3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (3.2.3) lib/abstract_controller/base.rb:121:in `process'
  actionpack (3.2.3) lib/abstract_controller/rendering.rb:45:in `process'
  actionpack (3.2.3) lib/action_controller/metal.rb:203:in `dispatch'
  actionpack (3.2.3) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
  actionpack (3.2.3) lib/action_controller/metal.rb:246:in `block in action'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `call'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:36:in `call'
  journey (1.0.3) lib/journey/router.rb:68:in `block in call'
  journey (1.0.3) lib/journey/router.rb:56:in `each'
  journey (1.0.3) lib/journey/router.rb:56:in `call'
  actionpack (3.2.3) lib/action_dispatch/routing/route_set.rb:600:in `call'
  omniauth (1.1.0) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
  omniauth (1.1.0) lib/omniauth/strategy.rb:177:in `call!'
  omniauth (1.1.0) lib/omniauth/strategy.rb:157:in `call'
  /home/neilmarion/.rvm/gems/ruby-1.9.3-head@missionhub-p4/bundler/gems/rack-oauth2-server-96860b070f61/lib/rack/oauth2/server.rb:230:in `call'
  airbrake (3.0.9) lib/airbrake/rack.rb:27:in `call'
  client_side_validations (3.1.4) lib/client_side_validations/middleware.rb:18:in `call'
  warden (1.1.1) lib/warden/manager.rb:35:in `block in call'
  warden (1.1.1) lib/warden/manager.rb:34:in `catch'
  warden (1.1.1) lib/warden/manager.rb:34:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
  rack (1.4.1) lib/rack/etag.rb:23:in `call'
  rack (1.4.1) lib/rack/conditionalget.rb:35:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/head.rb:14:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/flash.rb:242:in `call'
  rack (1.4.1) lib/rack/session/abstract/id.rb:205:in `context'
  rack (1.4.1) lib/rack/session/abstract/id.rb:200:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/cookies.rb:338:in `call'
  activerecord (3.2.3) lib/active_record/query_cache.rb:64:in `call'
  activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__322488348__call__162881384__callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
  activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
  activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  rails-dev-tweaks (0.6.1) lib/rails_dev_tweaks/granular_autoload/middleware.rb:34:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
  airbrake (3.0.9) lib/airbrake/user_informer.rb:12:in `call'
  railties (3.2.3) lib/rails/engine.rb:479:in `call'
  railties (3.2.3) lib/rails/application.rb:220:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /home/neilmarion/.rvm/rubies/ruby-1.9.3-head/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /home/neilmarion/.rvm/rubies/ruby-1.9.3-head/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /home/neilmarion/.rvm/rubies/ruby-1.9.3-head/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread' 
```

可能是什么问题？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-26T12:42:10.433

啊.. !!，我今天面临同样的问题

只是改变

```
upload.queued_for_write[:original] 
```

至

```
upload.queued_for_write[:original].read 
```

它有效

# entity-framework - 使用实体框架过滤相关实体

> ID：10376619
> 
> 赞同：2
> 
> 时间：2012-04-29T22:38:27.533
> 
> 标签：entity-framework, filtering

我正在寻找加载和过滤相关子实体的最佳方法。我有一些有用的东西，但我不确定它是否是实现我想要的最好甚至正确的方法。下面的工作代码示例。优点和缺点都会很棒！谢谢！

```
public Site Find(int siteID)
{
    // Can't use include here, not possible to filter related (child) entities
    // return _context.Sites.Where(x => x.ID == siteID)
    //                      .Include("SiteLoggers")
    //                      .Where(x => x.Deleted == false)
    //                      .FirstOrDefault();

    var site = _context.Sites.Where(x => x.ID == siteID).FirstOrDefault();

    if(site != null)
    {
        site.SiteLoggers = site.SiteLoggers.Where(x => x.SiteID == siteID && 
                                                       x.Deleted == false)
                                           .ToList();
    }

    return site;
} 
```

编辑：

添加了 POCOS

```
public class Site
{
    public int ID { get; set; }
    public int LocationID { get; set; }
    public bool Active { get; set; }
    public bool Deleted { get; set; }
    public string Name { get; set; }
    public virtual Location Location { get; set; }
    public virtual ICollection<SiteLogger> SiteLoggers { get; set; }
    public virtual ICollection<LinkDcSite> DcSiteLinks { get; set; }
}

public class SiteLogger
{
    public int ID { get; set; }
    public int UID { get; set; }
    public int SiteID { get; set; }
    public int LocationID { get; set; }
    public string Name { get; set; }
    public bool Active { get; set; }
    public bool Deleted { get; set; }
    public virtual Site Site { get; set; }
    public virtual Location Location { get; set; }
    public virtual ICollection<SiteLoggerSensor> SiteLoggerSensors { get; set; }
    public virtual ICollection<LinkLoggerSiteLogger> LinkLoggerSiteLogger { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:12:50.357

您的方法很好，我认为您需要额外检查`x.SiteID == siteID`：

```
....
site.SiteLoggers = site.SiteLoggers.Where(x => !x.Deleted).ToList();
.... 
```

此外，如果您通过 ID 搜索意味着您确定没有两个具有相同 ID 的元素，因此最好使用 SingleOrDefault 而不是 FirstOrDefault，以在有多个具有一个 ID 的项目的情况下引发异常。

```
var site = _context.Sites.Where(x => x.ID == siteID).SingleOrDefault(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:05:32.143

你可以通过一个简单的查询来做到这一点：

```
var site = _context.SiteLoggers.Where(sl => sl.SiteId = siteId && !sl.Deleted).ToList(); 
```

如果 SiteLoggers 和 Sites 之间存在关系，则无需检查该站点是否存在。

# mysql - 存储平均正常运行时间数据的最佳方法

> ID：10376625
> 
> 赞同：2
> 
> 时间：2012-04-29T22:38:57.080
> 
> 标签：mysql, ruby-on-rails, activerecord

我们有 500 多个偏远地区。每个位置都有一个 linux 路由器，每 15 分钟检查一次我们的管理系统（使用 RoR3 自制）。

我们需要记录并计算每个盒子互联网连接的平均正常运行时间。

每个路由器每 15 分钟向服务器上的脚本发送一个请求。（目前这只是记录上次签到时间和正常运行时间。）

如果我们想绘制每个盒子的历史正常运行时间，那么在不阻塞数据库的情况下最有效的方法是什么。

每 15 分钟签入 500 个盒子（根据我的计算）将导致 17,520,000 次插入。我认为我们不需要的大量数据。

谁能帮我们解开这个谜语？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:49:46.077

为什么不看看[RRDTool](http://oss.oetiker.ch/rrdtool/) ( [Wiki-entry](http://en.wikipedia.org/wiki/RRDtool) )。它只是这种情况的工具。

它作为一种循环自平均数据库工作，它用于许多日志记录应用程序，只是为了与您的情况类似的目的。

举个例子，看看[Cacti](http://www.cacti.net/)，它是一个围绕 RRDTool（用 PHP 实现）构建的数据记录/网络监控和图形前端应用程序。

# html - 如何将此 CSS 菜单拉伸到 100%

> ID：10376628
> 
> 赞同：-1
> 
> 时间：2012-04-29T22:39:19.420
> 
> 标签：html, css, menu, css-tables

这是一个很棒的[CSS 菜单](http://www.devinrolsen.com/wp-content/themes/dolsen/demos/css/infinite-sub-menu/)：

唯一的缺点是它没有拉伸到 100%……如果它有 2 个元素，它应该是 50%/50%，如果有 4 个项目，那么 25%/25%/25%/25% 就像它们是表格单元格一样。怎么做？我是 CSS 新手。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:12:05.980

使用`display: table/table-cell`（适用于现代浏览器和 IE8+）和[display-table.htc](http://tanalin.com/en/projects/display-table-htc/)（适用于 IE6/7）。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T22:42:11.353

修改其宽度，`100%`使菜单跨度为全宽。

```
#myfantasticmenu { width: 100%; } 
```

我用萤火虫模拟了变化，所需的样式定义是

```
#nav {
    overflow: hidden; /* To clear the div */
    width: 100%;
} 
```

关于这部分，当项目为 4 时，两个需要 50/50，每个需要 25，你将需要一些 javascript 来执行此操作。

如果您考虑使用 jQuery，那么它将类似于

```
childs= $("#myfantasticmenu").children('a'); //grab the list items
childs.css('width', (100/childs.length)+%); 
```

* * *

如果避免编写脚本是您的**主要**目标，那么将表格带入游戏中，它们会*自动*执行您需要的行为。

# javascript - 隔离 JavaScript 的执行

> ID：10376629
> 
> 赞同：17
> 
> 时间：2012-04-29T22:39:28.927
> 
> 标签：javascript, plugins, module, isolation

JS 最让我烦恼的限制之一是隔离代码执行的能力很差。

我希望能够控制执行代码的上下文，与 node.js 中的`Script.createContext`&实现类似效果的东西`Script.runInContext`（节点正在使用绑定到 V8 引擎，所以我无法模拟它们的实现）。

这是我想隔离代码执行的一些原因：

1.  将代码与全局命名空间（`window`对象和`DOM`）隔离，但是我需要能够对上下文中公开的对象引用函数调用，这些对象必须同步执行，这使得使用 a`WebWorker`进行隔离几乎不可能。
2.  通过隔离代码的执行，还可以在不再需要时释放其定义（内存管理）。

我知道可以通过将脚本加载到`iframe`.

我需要共享构造函数定义以及在隔离容器/上下文之间共享的对象定义，它们都必须在主 UI 线程上运行。主要是我想使用这些隔离的容器来托管插件/模块（迷你应用程序），每个插件/模块都通过在自己的`Context2D`对象上调用绘图命令来呈现和动态更新视口。

如果这些容器没有在主 UI 线程上运行，那么代理调用将非常困难，`ctx.measureText()`因为`ctx.drawImage()`图像对象无法在`Worker`.

*有人知道未来的规范会使这成为可能吗？*

*是否有任何当前（隐藏的）浏览器端 API 可用于实现此目的？*

*使用像 Goggle 的 Dart VM 这样的虚拟机并重新实现我当前的代码库会更好吗？* 我目前的代码库略高于 20 000 行代码。

在 * 中重新实现框架会更好吗

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T23:06:01.177

您可以使用简单的自执行函数对象将代码与全局命名空间隔离：

```
(function() {
   // all your code goes here
   // nobody outside of your code can reach your top level variables here
   // your top level variables are not on the window object

   // this is a protected, but top level variable
   var x = 3;

   // if you want anything to be global, you can assign it to the window object.
   window.myGlobal = {};

   function myTopLevelFunction(x,y,z) {
       // code here
   }

})(); 
```

如果你想拥有多个这样的执行上下文并能够在它们之间共享，那么你将不得不通过一个公开的位置进行集合，或者是一个真正的全局变量，或者一个已知 DOM 对象上的属性或类似的东西。声明一个全局命名空间对象并使用其属性来访问您在模块之间共享的东西是相对常见的。我知道它并不完全完美，但它确实有效。这是使用单个全局命名空间对象的会合示例：

```
// module AAA
(function() {
   // module AAA code goes here

   // set up global namespace object and whatever references we want to be global
   window.myModuleTop = window.myModuleTop || {};
   myModuleTop.AAA = {};
   myModuleTop.AAA.myFuncA = function() {};

})();

// module BBB
(function() {
   // module BBB code goes here

   // set up global namespace object and whatever references we want to be global
   window.myModuleTop = window.myModuleTop || {};
   myModuleTop.BBB = {};
   myModuleTop.BBB.myFuncB = function() {};

})(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T23:07:44.077

我见过的最近的图书馆是[Caja](http://en.wikipedia.org/wiki/Caja_project)。

基本上，在非严格的 javascript 代码中，有很多方法可以访问全局对象（`window`在浏览器中），这使得真正的隔离成为一个非常困难的问题。Caja 做了一些 iframe 技巧来修补这个问题，但老实说，我不确定它是如何工作的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-10-12T20:26:07.717

您不能像提到的其他答案那样使用闭包，然后使用影子 dom 来确保用户无法访问 dom 的其余部分吗？像这样的东西：

```
var containerNode = someDomNode
var root = containerNode.createShadowRoot()
;(function(root){
  var window = null, document = null, history = null,
      screen = null, navigator = null, location = null

  // isolated code goes here

})(root) 
```

注意事项：

*   如果您在隔离代码的上下文之外创建其他全局对象，您需要像我对窗口、文档等所做的那样显式地隐藏变量，否则隔离代码将访问它。
*   这显然不适用于没有影子 dom 的浏览器，除非您的隔离代码根本不需要与 dom 交互。
*   您必须非常小心，您*确实*授予隔离代码访问权限的对象不包含对您*不*希望它访问的内容的引用。有时这是超级容易犯的错误。
*   我提出这个建议是因为它似乎可行，但我不知道是否有其他方法可以获取诸如窗口和文档对象之类的东西。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T00:35:53.837

“标准”命名空间是一种选择吗？喜欢：

```
var myNamespace = {};

myNamespace.myFunc = function() { return true; } 
```

这种方法是我能想到的最简单的方法，可能是许多问题的解决方案。虽然不是真正的沙箱，但它可以让代码不易出错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-11-19T20:01:50.580

有一个[Realms API 提案](https://github.com/tc39/proposal-realms)，似乎可以解决类似的问题。它仍在讨论中，但已经有一个 polyfill 用于它 - [realms-shim](https://github.com/Agoric/realms-shim)。

# matlab - 如何使用 for 循环乘以 (n) 个函数？

> ID：10376632
> 
> 赞同：-1
> 
> 时间：2012-04-29T22:39:36.587
> 
> 标签：matlab

```
function box1( l, m)
%UNTITLED Summary of this function goes here
%   Detailed explanation goes here

%Define parameter 

M1=[l, m];

fin=fopen('d://box1.txt','wt');

fprintf(fin,'      XY                   %g:     %g \n',M1); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:30:30.617

是要迭代的**l**和**m列向量吗？**在这种情况下，您可以编写：

```
for k=1:size(M1,1)
fprintf(fin,'      XY                   %g:     %g \n',M1(k,:);
end
fclose(fid); 
```

不过，如果你能澄清一下就更好了。

# javascript - 在 Ember.js 中销毁对象

> ID：10376633
> 
> 赞同：5
> 
> 时间：2012-04-29T22:39:41.703
> 
> 标签：javascript, ember.js, destroy

想象一下，我创建了一个 ember 对象，然后将其添加到任意未知数量的数组控制器中。有没有一种简单的方法来销毁对象，以便所有数组控制器都收到通知并将其删除？

[http://jsfiddle.net/FcsRP/](http://jsfiddle.net/FcsRP/)

来自 Ember.CoreObject 的 destroy 似乎没有通知集合它们的对象已被销毁，或者集合没有删除它们的对象。我什至不确定他们是否有意。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-05-05T02:40:27.900

我能想到的最简单的方法是在对象的`isDestroyed`属性上添加一个观察者。这样，当您销毁某些东西并且该属性变为`true`您可以运行所需的任何代码时。

看到这个jsfiddle：http: [//jsfiddle.net/ud3323/FSCyF/](http://jsfiddle.net/ud3323/FSCyF/)

代码：

```
obj = Ember.Object.create({});

a1 = Ember.ArrayController.create({
    content: [],
    destroyedObj: function() {
        alert('destroyed obj observer in a1');
  }.observes('content.@each.isDestroyed')
});
a2 = Ember.ArrayController.create({
    content: [],
    destroyedObj: function() {
        alert('destroyed obj observer in a2');
  }.observes('content.@each.isDestroyed')
});

a1.pushObject(obj);
a1.pushObject(obj);
a2.pushObject(obj);

obj.destroy()

alert(a1.get('content').length) 
```

# ruby-on-rails - Rails 上的关系数据库

> ID：10376643
> 
> 赞同：0
> 
> 时间：2012-04-29T22:41:13.637
> 
> 标签：ruby-on-rails, ruby

我刚开始使用rails，

我有一个使用一组 3 个属性生成的模型，并且我为它编写了控制器和视图，现在我需要另一个数据库或具有 4 个属性的模型，其中必须链接新模型的第二个和第三个属性对于原始数据库中的 2 个属性，如何创建或生成此模型？

主数据库（书籍）

BookID, Bookname , no.of.books

辅助数据库（使用）Customername、Bookname、noofbooks_rented。

更改必须反映在原始数据库上。我在这里先向您的帮助表示感谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:10:45.887

在您的图书模型中

```
class BooK < ActiveRecord::Base
belongs_to :customer

def count_books
  //count all books on a particular user
end

end 
```

在您的客户模型中

```
class Customer <ActiveRecord::Base
has_many :books
end 
```

# sql - NoSQL 中的地理查询

> ID：10376644
> 
> 赞同：3
> 
> 时间：2012-04-29T22:41:15.840
> 
> 标签：sql, performance, nosql, latitude-longitude, couchbase

我们的团队目前正在开发一些我们害怕“爆炸”的杀手级 ios 定位应用程序，因此我们希望努力考虑可扩展性和可用性。

在我们读到 draw something 是基于 couchbase NoSQL 之后，我们扫描了 couch base api（特别是 .net api）并找到了我们所有应用程序需求的解决方案，除了一个，我们描述了这个场景：

1.  假设我们在全球有 1,000,000 个用户，他们的位置由经度和纬度指定；
2.  我们有一个用户圈范围 c：它的位置（由经度和纬度指定）和半径 rc
3.  我们希望有效地确定哪些用户在圈子中。

如果我们像现在这样在sql server中编写它，它是这样的：

```
CREATE TABLE UserLocations
[UserId] [bigint] NOT NULL,
[CurrentLocation] [geography] NOT NULL

ALTER PROCEDURE sp_GetCurrentUsersInRange
@userPoint geography, 
@RangeInMeters int
AS
BEGIN

select  UserId from UserLocations
where @userPoint.STDistance(CurrentLocation) <= @RangeInMeters
and UserId <> @userId

END 
```

但这是 NoSQL，只有键（例如经度键和纬度键），但我们无法获取所有值并在内存中全部查询，不是吗？

所以你的问题是：有没有一种方法你知道如何在 NoSQL 中完成这样的事情？

谢谢

ps我们在Stackoverflow中的相关问题：[如何有效地确定圆内的n个位置？](https://stackoverflow.com/questions/10211579/how-to-determine-n-locations-inside-a-circle-efficiently)

编辑：Couchbase 支持已经回答了我！他们引用的答案：

*“我们的地理空间索引是在 2.0（计划于今年晚些时候推出）中作为实验性首次推出的功能，并将在以后的版本中完全支持。我们还在为其构建必要的客户端界面， “但目前没有可用的。最后，距离和边界圆（以及其他）是我们将在前进过程中开发的功能。”*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:47:54.303

我不知道用 couchbase 做这件事，但 MongoDB 有地理空间索引。

[http://www.mongodb.org/display/DOCS/Geospatial+Indexing](http://www.mongodb.org/display/DOCS/Geospatial+Indexing)

**编辑**看起来沙发也有地理空间，通过 GeoCouch。 [http://www.couchbase.com/docs/couchbase-geocouch-guide/](http://www.couchbase.com/docs/couchbase-geocouch-guide/)

# php - org.json.JSONException：值 我正在尝试从 android 活动将数据连接到我的 sqldatabase 进行注册页面，我收到此错误“org.json.JSONException: Value 首先，任何人都可以建议我在将mysql数据库与php脚 问问题 问问题 2012-04-29T22:41:26.187 46160 次 This question shows research effort; it is useful and clear 5 This question does not show any research effort; it is unclear or not useful Bookmark this question. Show activity on this post. 我正在尝试从 android 活动将数据连接到我的 sqldatabase 进行注册页面，我收到此错误“org.json.JSONException: Value 首先，任何人都可以建议我在将mysql数据库与php脚本用于android应用程序时如何调试我的程序？因为我通常使用日志猫，但这里的错误不是很清楚：S ... 这是活动代码： public class Subscribe extends Activity { Button bSubscribe; EditText etPwdSub, etPwdConf, etLoginSub, etNameSub, etFnSub; String result = null; InputStream is = null; String donnees = ""; protected void onCreate(Bundle savedInstanceState) { super.onCreate(savedInstanceState); setContentView(R.layout.subscribe); etLoginSub = (EditText) findViewById(R.id.etLoginSub); etPwdSub = (EditText) findViewById(R.id.etPwdSub); etPwdConf = (EditText) findViewById(R.id.etPwdConf); etNameSub = (EditText) findViewById(R.id.etNameSub); etFnSub = (EditText) findViewById(R.id.etFnSub); bSubscribe = (Button) findViewById(R.id.bSubscribe); bSubscribe.setOnClickListener(new View.OnClickListener() { public void onClick(View v) { Pattern p = Pattern.compile(".+@.+\\.[a-z]+"); Matcher m = p.matcher(etLoginSub.getEditableText()); if (m.matches() == false) { Toast.makeText( getBaseContext(), "Le champs email ne correspond pas au format d'une adresse mail", Toast.LENGTH_SHORT).show(); } else { // autre méthode : etPwdSub.equals("") if (etPwdSub.getEditableText() != null && etPwdConf.getEditableText() != null && etNameSub.getEditableText() != null && etFnSub.getEditableText() != null) { if (etPwdSub.getEditableText().toString().equals(etPwdConf.getEditableText().toString())) { ArrayList <namevaluepair>nameValuePairs = new ArrayList<namevaluepair>(); nameValuePairs.add(new BasicNameValuePair("login", etLoginSub.getText().toString())); nameValuePairs.add(new BasicNameValuePair("pwd", etPwdConf.getText().toString())); nameValuePairs.add(new BasicNameValuePair("name", etNameSub.getText().toString())); nameValuePairs.add(new BasicNameValuePair("firstname", etFnSub.getText().toString())); try { // commandes httpClient HttpClient httpclient = new DefaultHttpClient(); HttpPost httppost = new HttpPost( "http://192.168.1.101/spotnshare/subscribe.php"); httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs)); HttpResponse response = httpclient.execute(httppost); HttpEntity entity = response.getEntity(); is = entity.getContent(); } catch (Exception e) { Log.i("taghttppost", "" + e.toString()); Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG) .show(); } try { BufferedReader reader = new BufferedReader(new InputStreamReader( is, "UTF-8")); StringBuilder sb = new StringBuilder(); String line = null; while ((line = reader.readLine()) != null) { sb.append(line + "\n"); } is.close(); result = sb.toString(); } catch (Exception e) { Log.i("tagconvertstr", "" + e.toString()); } try { JSONObject jObj = new JSONObject(result); donnees = jObj.getString("message"); Intent ourIntent = new Intent(Subscribe.this, SubscribeMess.class); // objet qui vas nous permettre de passe des variables ici la // variable passInfo Bundle objetbunble = new Bundle(); objetbunble.putString("message", donnees); ourIntent.putExtras(objetbunble); // on passe notre objet dans l'intent // on appelle notre activité startActivity(ourIntent); } catch (JSONException e) { Log.i("tagjsonexp", "" + e.toString()); } catch (ParseException e) { Log.i("tagjsonpars", "" + e.toString()); } } else { Dialog d = new Dialog(Subscribe.this); d.setTitle(etPwdSub.getEditableText() +" "+etPwdConf.getEditableText()); d.show(); } } else { Dialog d = new Dialog(Subscribe.this); d.setTitle("Fill in all the fields !"); d.show(); } } } }); } protected void onPause() { super.onPause(); finish(); } } 这是php脚本： [Registration confirmation.](http://localhost/spotnshare/validation_mail.php?usrk='.$clef.' ) '; ini_set('SMTP','relay.skynet.be'); if(mail($destinataire,$sujet,$message,$from)){ $msg = 'Check your mailbox to activate your account !'; } else{ $msg = 'Problem sending you the activation mail !'; $req = mysql_query("DELETE FROM userTable WHERE colUserLogin = '".$pseudo."' "); } } else{ $msg = 'Problem inserting you in our database !'; } }else{ $msg = 'This email has already been used !'; } mysql_free_result ($req); }else{ $msg = "Connexion problem with de DB" print(json_encode(array("message" => $msg))); } }else{ $msg = "Couldn't treat your datas" } print(json_encode(array("message" => $msg))); ?> 您对http://192.168.1.101/spotnshare/subscribe.php的请求失败并返回非 JSON 字符串（可能是 PHP 错误）。您可以使用 Log.i("tagconvertstr", "["+result+"]"); 在new JSONObject调用之前查看你在解析它之前得到了什么。 编辑：如果您使用的是 Eclipse，您可以设置一个断点并逐步查看发生了什么。 phpandroidmysqljson 4 5 回答 5 This answer is useful 11 您对http://192.168.1.101/spotnshare/subscribe.php的请求失败并返回非 JSON 字符串（可能是 PHP 错误）。您可以使用 Log.i("tagconvertstr", "["+result+"]"); 在new JSONObject调用之前查看你在解析它之前得到了什么。 编辑：如果您使用的是 Eclipse，您可以设置一个断点并逐步查看发生了什么。 于 2012-04-29T22:44:23.647 回答 This answer is useful 4 谢谢，我设法纠正了一些错误 2 ';' 丢失了，我可以看到 Log.i("tagconvertstr", "["+result+"]"); 的错误 它显示的味精是这样的： [
font size = 1 table class=''xdebug-erroe' dir='ltr' ... loads of html code that wasn't in my initial code then....{"message":"Problem sending you the activation mail !"}] 因此，该消息“向您发送激活邮件时出现问题”的 json 格式存在问题，但用户注册成功！ 因此，我第二次尝试该代码时，它会以正确的 json 格式向我显示：“此电子邮件已被使用”！（没有任何错误）但我仍然无法在我的 php 代码中找到错误：S 于 2012-04-30T20:48:22.223 回答 This answer is useful 0 尝试在打印之前阻止任何输出并将其更改print为echo 您还可以删除关闭?>以防止在 php 脚本之后进一步输出 [Registration confirmation.](http://localhost/spotnshare/validation_mail.php?usrk='.$clef.' ) '; ini_set('SMTP','relay.skynet.be'); if(mail($destinataire,$sujet,$message,$from)){ $msg = 'Check your mailbox to activate your account !'; } else{ $msg = 'Problem sending you the activation mail !'; $req = mysql_query("DELETE FROM userTable WHERE colUserLogin = '".$pseudo."' "); } } else{ $msg = 'Problem inserting you in our database !'; } }else{ $msg = 'This email has already been used !'; } mysql_free_result ($req); }else{ $msg = "Connexion problem with de DB" print(json_encode(array("message" => $msg))); } }else{ $msg = "Couldn't treat your datas" } ob_end_clean() echo(json_encode(array("message" => $msg))); 于 2012-04-29T22:45:29.707 回答 This answer is useful 0 您应该Content-Type在发回响应之前设置标头。 header('Content-Type: application/json'); print(json_encode(array("message" => $msg))); 检查这个：从 PHP 脚本返回 JSON 于 2017-02-12T17:12:37.767 回答 This answer is useful 0 我也有同样的问题; 我以简单的方式找到了解决方案。 在 Java 代码中，只需Log.e("anyText",response); 在 logCat 中输入它就会告诉你什么是问题 于 2019-12-09T18:47:28.297 回答 Related 1 java - Java：自定义图标问题 1 vb.net - 调整和重绘datagridview 1 asp.net - 在 ASP.Net 中，我如何在允许下载之前要求联系方式 1 macros - common lisp：对于一个 lisp 会话，只评估一次顶级表单 1 c# - WPF 从 ContentTemplate 内部访问父 ViewModel 3 php - 在 SES 中使用 PHP 变量作为电子邮件目的地 4 c# - WCF REST - 发布 JSON 字符串 1 python - 寻找最频繁的模式 1 vb.net - RichTextBox.append 字体颜色？ 2 python - 将 Stripe 导入 Django - NameError Reference php × 1429865 c/c++ × 756500 nginx × 49975 mongodb × 159057 mybatis × 3233 anaconda × 13410 pycharm × 14671 python × 1902243 vscode × 56040 docker × 110988 github × 49000 flask × 49129 ffmpeg × 24037 jmeter × 16910 matplotlib × 63493 bootstrap × 54641</namevaluepair></namevaluepair>

> ID：10376645
> 
> 赞同：5
> 
> 时间：
> 
> 标签：php, android, mysql, json

我正在尝试从 android 活动将数据连接到我的 sqldatabase 进行注册页面，我收到此错误“org.json.JSONException: Value

首先，任何人都可以建议我在将mysql数据库与php脚本用于android应用程序时如何调试我的程序？因为我通常使用日志猫，但这里的错误不是很清楚：S ...

这是活动代码：

```
public class Subscribe extends Activity {

    Button bSubscribe;
    EditText etPwdSub, etPwdConf, etLoginSub, etNameSub, etFnSub;
    String result = null;
    InputStream is = null;
    String donnees = "";

    protected void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);

        setContentView(R.layout.subscribe);

        etLoginSub = (EditText) findViewById(R.id.etLoginSub);
        etPwdSub = (EditText) findViewById(R.id.etPwdSub);
        etPwdConf = (EditText) findViewById(R.id.etPwdConf);
        etNameSub = (EditText) findViewById(R.id.etNameSub);
        etFnSub = (EditText) findViewById(R.id.etFnSub);

        bSubscribe = (Button) findViewById(R.id.bSubscribe);        
        bSubscribe.setOnClickListener(new View.OnClickListener() {

            public void onClick(View v) {

                Pattern p = Pattern.compile(".+@.+\\.[a-z]+");
                Matcher m = p.matcher(etLoginSub.getEditableText());

                if (m.matches() == false) {

                    Toast.makeText(
                            getBaseContext(),
                            "Le champs email ne correspond pas au format d'une adresse mail",
                            Toast.LENGTH_SHORT).show();
                } else {

                    // autre méthode : etPwdSub.equals("")
                    if (etPwdSub.getEditableText() != null
                            && etPwdConf.getEditableText() != null
                            && etNameSub.getEditableText() != null
                            && etFnSub.getEditableText() != null) {

                        if (etPwdSub.getEditableText().toString().equals(etPwdConf.getEditableText().toString())) {

                            ArrayList<NameValuePair> nameValuePairs = new ArrayList<NameValuePair>();

                            nameValuePairs.add(new BasicNameValuePair("login", etLoginSub.getText().toString()));
                            nameValuePairs.add(new BasicNameValuePair("pwd", etPwdConf.getText().toString()));
                            nameValuePairs.add(new BasicNameValuePair("name", etNameSub.getText().toString()));
                            nameValuePairs.add(new BasicNameValuePair("firstname", etFnSub.getText().toString()));                          

                            try {
                                // commandes httpClient
                                HttpClient httpclient = new DefaultHttpClient();

                                HttpPost httppost = new HttpPost(
                                        "http://192.168.1.101/spotnshare/subscribe.php");

                                httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));

                                HttpResponse response = httpclient.execute(httppost);

                                HttpEntity entity = response.getEntity();
                                is = entity.getContent();

                            } catch (Exception e) {
                                Log.i("taghttppost", "" + e.toString());
                                Toast.makeText(getBaseContext(), e.toString(), Toast.LENGTH_LONG)
                                        .show();
                            }

                            try {
                                BufferedReader reader = new BufferedReader(new InputStreamReader(
                                        is, "UTF-8"));

                                StringBuilder sb = new StringBuilder();

                                String line = null;

                                while ((line = reader.readLine()) != null) {
                                    sb.append(line + "\n");
                                }

                                is.close();

                                result = sb.toString();
                            } catch (Exception e) {
                                Log.i("tagconvertstr", "" + e.toString());
                            }

                            try {
                                JSONObject jObj = new JSONObject(result);

                                    donnees = jObj.getString("message");

                                    Intent ourIntent = new Intent(Subscribe.this,
                                            SubscribeMess.class);

                                    // objet qui vas nous permettre de passe des variables ici la
                                    // variable passInfo
                                    Bundle objetbunble = new Bundle();          
                                    objetbunble.putString("message", donnees);
                                    ourIntent.putExtras(objetbunble);               // on passe notre objet dans l'intent

                                    // on appelle notre activité
                                    startActivity(ourIntent);                                   

                            } catch (JSONException e) {
                                Log.i("tagjsonexp", "" + e.toString());
                            } catch (ParseException e) {
                                Log.i("tagjsonpars", "" + e.toString());
                            }

                        } else {
                            Dialog d = new Dialog(Subscribe.this);
                            d.setTitle(etPwdSub.getEditableText() +" "+etPwdConf.getEditableText());
                            d.show();
                        }

                    } else {
                        Dialog d = new Dialog(Subscribe.this);
                        d.setTitle("Fill in all the fields !");
                        d.show();
                    }

                }
            }
        });

    }

    protected void onPause() {
        super.onPause();
        finish();
    }
} 
```

这是php脚本：

```
<?php

if( isset($_POST['login']) && isset($_POST['pwd']) && isset($_POST['name']) && isset($_POST['firstname'])) {

    include("connexion_bdd.php");

    if(connexionBDD() == 1){

        $login = $_POST['login'];
        $pwd = $_POST['pwd'];
        $name = $_POST['name'];
        $firstname = $_POST['firstname'];

        $sql = "SELECT colUserID
                FROM userTable 
                WHERE colUserLogin = '".$login."' ";

        $req = mysql_query($sql);
        $resultat=mysql_num_rows($req); 

        if($resultat==0){
            $temps = time();
            $clef = md5($login . $temps);

            $req = mysql_query("INSERT INTO userTable(colUserLogin, colUserPwd, colUserName, colUserFirstname, colUserKey, colUserDate)
                                        VALUES( '$login', '$pwd', '$name', '$firstname', '$clef', '$temps')");

            if($req){
                    $destinataire = $login;
                    $sujet ="Welcome on SnSR";
                    $from = "From: SpotnShareReminder@live.com \r\n";
                    $from .= "Content-Type: text/html; charset=us-ascii\r\n";

                    $message = ' Clic on the link below :<br/>
                    <a href="http://localhost/spotnshare/validation_mail.php?usrk='.$clef.' ">
                        Registration confirmation.
                    </a> ';

                    ini_set('SMTP','relay.skynet.be');

                    if(mail($destinataire,$sujet,$message,$from)){
                        $msg = 'Check your mailbox to activate your account !'; 
                    }           
                    else{
                        $msg = 'Problem sending you the activation mail !'; 
                        $req = mysql_query("DELETE FROM userTable WHERE colUserLogin = '".$pseudo."' ");
                    }
            }
            else{
                $msg = 'Problem inserting you in our database !';
            }
        }else{
                $msg = 'This email has already been used !';
        }
        mysql_free_result ($req);   

    }else{
        $msg = "Connexion problem with de DB"
        print(json_encode(array("message" => $msg)));       
    }

}else{
        $msg = "Couldn't treat your datas"
}

print(json_encode(array("message" => $msg)));

?> 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-29T22:44:23.647

[您对http://192.168.1.101/spotnshare/subscribe.php](http://192.168.1.101/spotnshare/subscribe.php)的请求失败并返回非 JSON 字符串（可能是 PHP 错误）。您可以使用

`Log.i("tagconvertstr", "["+result+"]");`

在`new JSONObject`调用之前查看你在解析它之前得到了什么。

编辑：如果您使用的是 Eclipse，您可以设置一个断点并逐步查看发生了什么。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T20:48:22.223

谢谢，我设法纠正了一些错误 2 ';' 丢失了，我可以看到 Log.i("tagconvertstr", "["+result+"]"); 的错误

它显示的味精是这样的：

`[<br/ > font size = 1 table class=''xdebug-erroe' dir='ltr' ... loads of html code that wasn't in my initial code then....{"message":"Problem sending you the activation mail !"}]`

因此，该消息“向您发送激活邮件时出现问题”的 json 格式存在问题，但用户注册成功！

因此，我第二次尝试该代码时，它会以正确的 json 格式向我显示：“此电子邮件已被使用”！（没有任何错误）但我仍然无法在我的 php 代码中找到错误：S

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T22:45:29.707

尝试在打印之前阻止任何输出并将其更改`print`为`echo`

您还可以删除关闭`?>`以防止在 php 脚本之后进一步输出

```
<?php
ob_start();
if( isset($_POST['login']) && isset($_POST['pwd']) && isset($_POST['name']) && isset($_POST['firstname'])) {

    include("connexion_bdd.php");

    if(connexionBDD() == 1){

        $login = $_POST['login'];
        $pwd = $_POST['pwd'];
        $name = $_POST['name'];
        $firstname = $_POST['firstname'];

        $sql = "SELECT colUserID
                FROM userTable 
                WHERE colUserLogin = '".$login."' ";

        $req = mysql_query($sql);
        $resultat=mysql_num_rows($req); 

        if($resultat==0){
            $temps = time();
            $clef = md5($login . $temps);

            $req = mysql_query("INSERT INTO userTable(colUserLogin, colUserPwd, colUserName, colUserFirstname, colUserKey, colUserDate)
                                        VALUES( '$login', '$pwd', '$name', '$firstname', '$clef', '$temps')");

            if($req){
                    $destinataire = $login;
                    $sujet ="Welcome on SnSR";
                    $from = "From: SpotnShareReminder@live.com \r\n";
                    $from .= "Content-Type: text/html; charset=us-ascii\r\n";

                    $message = ' Clic on the link below :<br/>
                    <a href="http://localhost/spotnshare/validation_mail.php?usrk='.$clef.' ">
                        Registration confirmation.
                    </a> ';

                    ini_set('SMTP','relay.skynet.be');

                    if(mail($destinataire,$sujet,$message,$from)){
                        $msg = 'Check your mailbox to activate your account !'; 
                    }           
                    else{
                        $msg = 'Problem sending you the activation mail !'; 
                        $req = mysql_query("DELETE FROM userTable WHERE colUserLogin = '".$pseudo."' ");
                    }
            }
            else{
                $msg = 'Problem inserting you in our database !';
            }
        }else{
                $msg = 'This email has already been used !';
        }
        mysql_free_result ($req);   

    }else{
        $msg = "Connexion problem with de DB"
        print(json_encode(array("message" => $msg)));       
    }

}else{
        $msg = "Couldn't treat your datas"
}
ob_end_clean()
echo(json_encode(array("message" => $msg))); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-12T17:12:37.767

您应该`Content-Type`在发回响应之前设置标头。

```
header('Content-Type: application/json');
print(json_encode(array("message" => $msg))); 
```

检查这个：[从 PHP 脚本返回 JSON](https://stackoverflow.com/questions/4064444/returning-json-from-a-php-script)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-09T18:47:28.297

我也有同样的问题; 我以简单的方式找到了解决方案。

在 Java 代码中，只需`Log.e("anyText",response);` 在 logCat 中输入它就会告诉你什么是问题

# python - 已安装的 Python 模块 - Python 找不到它们

> ID：10376647
> 
> 赞同：12
> 
> 时间：2012-04-29T22:41:28.510
> 
> 标签：python, numpy, pandas

这是一个初学者`python`安装问题。这是我第一次尝试安装和调用包。我已经`pip`安装了，我尝试安装两个模块 -`numpy`和`pandas`.

在终端中，我运行了以下命令：

```
sudo pip install numpy

sudo pip install pandas 
```

两个命令都返回成功消息。这是`pandas`成功消息（这是我安装的第二个软件包，并且仍在我的终端历史记录中）：

```
Successfully installed pandas
Cleaning up... 
```

`pip`安装后返回类似消息`numpy`。

现在，当我启动`python`并尝试调用它时：

```
import pandas 
```

我收到此错误消息：

> ```
> Traceback (most recent call last):
>   File "<stdin>", line 1, in <module>
> ImportError: No module named pandas 
> ```

我尝试时也一样`numpy`。

谁能告诉我我做错了什么？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T02:30:34.447

啊。你的路径中有两条相同版本的蟒蛇？不要那样做。

pip、easy-install 等与特定的 python 安装相关联，默认情况下将使用该 python。因此，如果您有系统提供的 python 和系统提供的 easy_install（或使用系统 python 自己安装了 easy_install），那么默认情况下，easy_install 将为系统 python 安装包。

恕我直言，避免这种混乱的最好方法是对该版本使用系统python（可能是2.7），对于其他版本，`make alt-install`在安装时使用，这将为您提供诸如此类的可执行文件`python3.1`。如果确实需要更换系统提供的版本，请卸载。

一旦你这样做了。每个 python 都将有一个不同的名称（以版本结尾）`python`并将保持系统名称。

接下来，当您安装 easy_install 时，您会注意到存在特定于版本的版本（`easy_install-2.7`例如）。使用那些。如果缺少一个，则使用适当的 python 安装 distutils （例如使用`python3.1`，你会得到一个`easy_install-3.1`）。不幸的是，每次你这样做（iirc）你都会覆盖 un-versioned `easy_install`，所以*永远不要*使用它 - 总是使用版本化的。

或者，除了系统版本之外，您不能安装 easy_install 或 pip ，然后*始终使用 virtualenv*。virtualenv 会让你指定一个 python 版本（所以你可以为所有安装的 python 使用系统 virtualenv），然后为你使用的 python 安装 easy_install/pip。因此，一旦您进入虚拟环境，一切都会正常进行。

我刚刚意识到我对 pip 没有太多经验，所以我实际上对此无能为力（除了要注意 virtualenv 确实提供了它）（关于哪个更可取：它曾经是 pip 得到更好的维护；我认为这些天来，最新的 distutils/easy_install 和 pip 一样好，但是 pip 还有一些我从未使用过的功能）。

免责声明：以上是从开发 lepl 获得的经验，它在 2.6 到 3.2 上运行，所以我需要在所有这些上进行测试。据我所知，我上面描述的内容对我有用，但我对 python/easy_install/pip 没有深入的了解，所以我可能在合理化/描述事物方面有一些错误（换句话说，我正在写所有这些以防万一它有帮助，但我有点担心我有一个错误 - 如果是这样，请有人纠正我）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-26T14:51:02.667

有了这个，我解决了这个问题（可能会帮助你）：

```
$ sudo apt-get install python-pandas
$ sudo apt-get install python-numpy 
```

# opengl - 如何修复以与 VSync 不同的帧率运行的游戏循环？

> ID：10376648
> 
> 赞同：2
> 
> 时间：2012-04-29T22:41:38.757
> 
> 标签：opengl, language-agnostic

例如，我有 60 fps 用于游戏逻辑，但 50 fps 用于 VSync。我应该将游戏循环移动到不同的线程并发送绘图线程的绘图请求还是我仍然可以用一个线程解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:23:29.613

您的游戏逻辑是否需要 1s/60 来计算，或者这只是您使用的模拟间隔？如果它是一个间隔，我建议您通过显示每个帧所花费的时间来调整模拟间隔，即您测量帧之间的时间并用它来提供您的模拟。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-02T15:15:34.967

您应该使用计时器而不是硬编码的计时。（而不是 1/60 秒，而是使用先前更新和当前更新之间的差异。）这避免了计算无法保持在 60fps 的情况。那么垂直同步也不会成为问题。

如果我错了，请纠正我，但您可以以任何 fps 进行渲染，并且可以以任何其他 fps 进行屏幕绘制而不会出现任何问题（可能会有一点抖动）

对于多核 CPU，我建议在可行的情况下使用线程。例如物理在一个线程中，在另一个线程中渲染（使用快照数据渲染以防止副作用）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-12T05:35:44.010

看看 Glenn Fiedler 的这篇文章，“Fix your timestep”：

[http://gafferongames.com/game-physics/fix-your-timestep/](http://gafferongames.com/game-physics/fix-your-timestep/)

# css - 有人可以向我解释一下 Golden Grid System 网格吗？

> ID：10376653
> 
> 赞同：3
> 
> 时间：2012-04-29T22:42:17.897
> 
> 标签：css, responsive-design, grid, golden-grid-system

我正在尝试使用[Golden Grid System](http://goldengridsystem.com/)网格进行响应式两列布局（内容和侧边栏），但无法理解它。我真的很喜欢这个系统背后的想法（没有固定宽度、可缩放基线等），但不知道如何处理这些列。我想在桌面上并排放置一个侧边栏和一个内容列，然后在顶部放置侧边栏，在平板电脑/移动设备上放置下面的内容。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-27T10:08:07.957

当您第一次查看 GGS 时，创建列可能有点棘手，因为网站上提供的示例无法很好地说明如何使用网格来创建列。

关于 GGS 最重要的一点是它不是一个网格框架，它只提供列宽等建议。如果您已经下载了 CSS，您会在评论中看到这些建议的概述。

```
 Four-column grid active
  ----------------------------------------
  Margin   | #  1   2   3   4   |   Margin
  5.55555% | %  25  50  75  100 | 5.55555%

  Eight-column grid active
  ----------------------------------------------------------------------
  Margin   | #  1     2     3     4     5     6     7     8   |   Margin
  5.55555% | %  12.5  25.0  37.5  50.0  62.5  75.0  87.5  100 | 5.55555%

  Sixteen-column grid active
  ----------------------------------------------------------------------------------------------------------------------
  Margin   | #  1     2     3     4     5     6     7     8     9     10    11    12    13    14    15    16  |   Margin
  5.55555% | %  6.25  12.5  18.75 25.0  31.25 37.5  43.75 50.0  56.25 62.5  68.75 75.0  81.25 87.5  93.75 100 | 5.55555% 
```

要创建网格，您需要选择最适合您需要的网格。假设您选择了 8 列网格，最简单的方法是从第一个列宽 (12.5%) 构建它并将其添加到后续网格列。为了使其响应，只需将适当的列定义包装在与适当断点相对应的媒体查询中。

参见小提琴示例：http: [//jsfiddle.net/ricebunny/C6QEu/12/](http://jsfiddle.net/ricebunny/C6QEu/12/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T22:55:53.867

在您提供的页面上，您可以下载 4 个文件。我建议使用这些并调整它们。如果您只想做一个没有固定宽度的 2 列布局，为什么不使用 2 个简单列创建自己的布局并使用百分比作为宽度？

# java - 解析视图时出错？

> ID：10376658
> 
> 赞同：1
> 
> 时间：2012-04-29T22:42:54.053
> 
> 标签：java, jsp, rest, spring-mvc

我尝试制作一个与服务器上的存储库连接的 Web 应用程序，并且我想在屏幕上打印数据。实际上我尝试创建一个 RESTful 客户端。可能有一个解析错误，不允许我看到显示数据我的jsp如下：

```
 <%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
   <%@page contentType="text/html" pageEncoding="UTF-8"%>
   <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
      "http://www.w3.org/TR/html4/loose.dtd">

  <html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <title>Insert title here</title>
   </head>
   <body>
     <h1>Get Author</h1>

       <c:if test="${empty author}">
      No records found!
       </c:if>

      <c:if test="${!empty author}">
            <table style="border: 1px solid #333">
    <tr>
    <td style="width: 100px">Id</td>
    <td>${data.id}</td>
    </tr>

    <tr>
    <td>Name</td>
    <td>${data.name}</td>
    </tr>

    <tr>
    <td>Address</td>
    <td>${data.address}</td>
    </tr>

     </table>
       </c:if>

     </body>
   </html> 
```

控制器如下（我用两种不同的方式实现控制器。其中一种已注释）

```
 @Controller
 public class Contraller {

protected static Logger logger = Logger.getLogger("controller");

private RestTemplate restTemplate = new RestTemplate();

@RequestMapping(value = "/datas", method = RequestMethod.GET)
public String getDatas(Model model) {

    HttpEntity<Data> entity = new HttpEntity<Data>(headers);

    // Send the request as GET
    try {
        ResponseEntity<DataList> result = restTemplate.exchange("http://www../data/", 
                        HttpMethod.GET, entity, DataList.class);
        // Add to model
        model.addAttribute("datas", result.getBody().getData());

    } catch (Exception e) {
    }

    // This will resolve to /WEB-INF/jsp/personspage.jsp
    return "personspage";
}

/**
 * Retrieves a single record from the REST provider
 * and displays the result in a JSP page
 */

@RequestMapping(value = "/data", method = RequestMethod.GET)
public String getMyData(@RequestParam("id") Long id, Model model) {

        try{    

            Data results = restTemplate.getForObject("http://www.../data/{id}",
                                      Data.class, id);

            model.addAttribute("data", results);

        }catch(Exception e){

        }
            return "getpage";
} 
```

该模型：

```
 @XmlRootElement(name = "data", namespace="http://www...")
     @XmlAccessorType(XmlAccessType.FIELD)
    public class Data {

private Long id;
private String name;

public Long getId() {
    return id;
}
public void setId(Long id) {
    this.id = id;
}
public String getName() {
    return name;
}
public void setFirstName(String name) {
    this.name = name;
}
public String getAddress() {
    return address;
}
public void setAddress(String address) {
    this.address = address;
}

 } 
```

在存储库中有 4000 个数据。当我给出以下 URL 时： localhost:8080/Client_for_rest/data?id=1 （从 1 到 4000 的所有 id）返回给我视图，但它不显示数据。如果我给出一个大于 4000 的 id，即 4001 会告诉我没有记录是真的。据此，我假设客户端与服务器端连接，但存在一个问题（我想是解析）它不允许在视图上显示数据。我不熟悉 Spring MVC 框架，我读过一些关于 marshaller 和 castor 的东西，但我不知道如何实现它们。其实我想知道是否有更简单的方法来解决我的问题。我必须使用 pojo maven 依赖项等吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:46:56.943

如果您的方法返回类型是字符串，则使用 map 对象和 bindresult 作为该方法的参数。

并向该地图对象添加元素。

您可以直接在您的 jsp 页面上访问该地图对象

举个例子 ：

```
@RequestMapping("/locationUpdate.do")
    public String locationUpdate(Map<String, Object> map,@ModelAttribute("location") Location location, BindingResult result) {
        map.put("location", locationService.getLocationByCode(locationcode));
        map.put("locGrp", listLocationGroup());

        return "location/locationAdd";
    } 
```

现在你可以在你的 jsp 中直接访问 location 和 locGrp

# c - 在 bash 中复制一个在 bash 中主动写入的文件

> ID：10376661
> 
> 赞同：0
> 
> 时间：2012-04-29T22:43:11.193
> 
> 标签：c, linux, bash, shell, unix

我需要能够将文本文件复制到另一个位置，然后删除该文本文件的内容（不删除文件）。

目前我正在这样做：

```
#!/bin/bash

count=0

    for filename in `find . -name "*_list" -print`
    do
      while read -r line
      do
        echo $line 
        sync
        echo "### Trace Info ###" > log.txt
        sync
        python worker.py "$line"
        echo $line > traces/trace$count.txt
        sync
        sync
        sleep 1
        sync
        sync
        cp log.txt traces/trace$count.txt
        #cp log.txt traces/log.txt
        sync
        sleep 1
        count=$((count+1))
      done < $filename
    done 
```

但是调用同步和睡眠它对我不起作用，而是我得到这样的文件：（注意：python 文件没有写入 log.txt CacheGrind 是。）

```
CachegrindMemMod/vg-in-place --tool=cachegrind --trace-children=yes /usr/sbin/mysqld 2>log.txt

cat trace10.txt | xxd
0000000: 2323 2320 5472 6163 6520 496e 666f 2023  ### Trace Info #
0000010: 2323 0a00 0000 0000 0000 0000 0000 0000  ##..............
0000020: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000030: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000040: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000050: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000060: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000070: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000080: 0000 0000 0000 0000 0000 0000 0000 0000  ................
0000090: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000a0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000b0: 0000 0000 0000 0000 0000 0000 0000 0000  ................
00000c0: 0000 0000 0000 0000 0000 0000 0000 0000  ................ 
```

此跟踪有 4 兆零应该是文本。

```
ls -la trace10.txt 
-rw-r--r-- 1 root root 4350121 2012-04-29 15:34 trace10.txt 
```

我猜有一些缓存正在阻止我获取应计文本。任何想法都会很棒。

如果您有兴趣，该文件应包含从修改后的 CacheGrind 版本中检索到的内存地址列表，如下所示：

```
Dw: 0x4916e30
Dw: 0x4916df0
Dw: 0x4916db0
Dw: 0x4916d70
Dr: 0x4916d30
Dr: 0x4916cf0
Dr: 0x4916cb0
Dr: 0x4916c70
Dr: 0x4916c30
Dr: 0x4916bf0
Dr: 0x4916bb0
Dr: 0x4916b70
Dr: 0x4916b30
Dr: 0x4916af0
Dr: 0x4916ab0 
```

CacheGrind 的修改版本也可以在[这里找到](https://github.com/kportertx/CachegrindMemMod/tree/master/cachegrind)

附加信息：我注意到一些文件只包含标题而没有空数据。这也让我认为这是一个 I/O 缓存问题

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:57:11.840

谁在那个 log.txt 文件中写？蟒蛇脚本？它在后台工作吗？如果是这样，为什么要尝试复制（未完成）文件？你为什么要在 bash 脚本中同步？

*   扩展脚本，使其允许将日志文件作为命令行参数，因此每次调用都将写入单独的文件。

# multithreading - 具有可变持续时间“业务逻辑”的破坏者模式

> ID：10376665
> 
> 赞同：1
> 
> 时间：2012-04-29T22:43:45.430
> 
> 标签：multithreading, performance, latency, low-latency, disruptor-pattern

如何在存在可变持续时间“业务逻辑”任务的流程中有效地使用破坏者？以前做过吗？

可以通过处理响应阶段的第二个环形缓冲区来完成吗？如果是这样，我该怎么做。

我了解 Disruptor 并看到了我的调用链的一些特定部分，我可以在其中应用这个概念。具体来说，该应用程序是一个中间件类型的应用程序，它执行以下步骤：

*   阅读入站消息，解组请求
*   确定请求的客户详细信息，确定要处理的工作流程步骤
*   调用后端系统执行步骤
*   整理响应、记录响应、编组并返回给消费者

问题是后端步骤的某些实例可能需要“较长”时间，这可能会迫使短期运行任务的响应阶段等待较长时间运行的任务。假设后端系统的调用可以异步或同步完成 - 所以这个想法是后端系统调用只是一个触发后端异步请求的消费者。

后端系统响应时间可以从 5 毫秒（一些请求）、50 毫秒（90% 的请求）到 - 5000 毫秒（1% 的请求）（想想大型磁盘 I/O）。

我可以看到 Disruptor 具有潜在的高效性，但无法绕过这个障碍来降低平均延迟。

# ruby-on-rails - 无法自动执行路由文件升级（rails-upgrade）

> ID：10376670
> 
> 赞同：0
> 
> 时间：2012-04-29T22:44:03.183
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, rake

我有 Rails2 应用程序，我正在尝试将其升级到 Rails3（插件：[https](https://github.com/rails/rails_upgrade) ://github.com/rails/rails_upgrade ）。

一切都很好，直到路线文件升级的步骤。当我尝试使用`rake rails:upgrade:routes`显示以下错误时：

```
 /home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake/alt_system.rb:32: Use RbConfig instead of obsolete and deprecated Config.
    (in /home/chmarus/Pulpit/mmo)
    WARNING: This version of mysql2 (0.3.11) doesn't ship with the ActiveRecord adapter bundled anymore as it's now part of Rails 3.1
    WARNING: Please use the 0.2.x releases if you plan on using it in Rails <= 3.0.x
    DEPRECATION WARNING: config.action_controller.session= has been deprecated. Please use config.session_store(name, options) instead. (called from <class:Application> at /home/chmarus/Pulpit/mmo/config/application.rb:54)
    DEPRECATION WARNING: Rake tasks in /home/chmarus/Pulpit/mmo/vendor/plugins/event_calendar/tasks/event_calendar_tasks.rake are deprecated. Use lib/tasks instead. (called from <top (required)> at /home/chmarus/Pulpit/mmo/Rakefile:7)
    rake aborted!
    undefined method `now' for nil:NilClass

    (See full trace by running task with --trace) 
```

当前 Rails 版本：2.3.9 目标版本：3.0.3

什么是磨损？我可以错过什么吗？也许是耙子的错，但我不确定。

编辑：rake rails:upgrade:routes --trace

```
chmarus@Arti:~/Pulpit/mmo$ rake rails:upgrade:routes --trace
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake/alt_system.rb:32: Use RbConfig instead of obsolete and deprecated Config.
(in /home/chmarus/Pulpit/mmo)
WARNING: This version of mysql2 (0.3.11) doesn't ship with the ActiveRecord adapter bundled anymore as it's now part of Rails 3.1
WARNING: Please use the 0.2.x releases if you plan on using it in Rails <= 3.0.x
DEPRECATION WARNING: config.action_controller.session= has been deprecated. Please use config.session_store(name, options) instead. (called from <class:Application> at /home/chmarus/Pulpit/mmo/config/application.rb:54)
DEPRECATION WARNING: Rake tasks in /home/chmarus/Pulpit/mmo/vendor/plugins/event_calendar/tasks/event_calendar_tasks.rake are deprecated. Use lib/tasks instead. (called from <top (required)> at /home/chmarus/Pulpit/mmo/Rakefile:7)
** Invoke rails:upgrade:routes (first_time)
** Execute rails:upgrade:routes
rake aborted!
undefined method `now' for nil:NilClass
/home/chmarus/Pulpit/mmo/vendor/plugins/rails_upgrade/lib/routes_upgrader.rb:47:in `module_eval'
/home/chmarus/Pulpit/mmo/vendor/plugins/rails_upgrade/lib/routes_upgrader.rb:18:in `draw'
(eval):1:in `upgrade_routes'
/home/chmarus/Pulpit/mmo/vendor/plugins/rails_upgrade/lib/routes_upgrader.rb:47:in `module_eval'
/home/chmarus/Pulpit/mmo/vendor/plugins/rails_upgrade/lib/routes_upgrader.rb:47:in `upgrade_routes'
/home/chmarus/Pulpit/mmo/vendor/plugins/rails_upgrade/lib/routes_upgrader.rb:28:in `generate_new_routes'
/home/chmarus/Pulpit/mmo/vendor/plugins/rails_upgrade/lib/tasks/rails_upgrade_tasks.rake:29:in `block (3 levels) in <top (required)>'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:636:in `call'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:636:in `block in execute'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:631:in `each'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:631:in `execute'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:597:in `block in invoke_with_call_chain'
/home/chmarus/.rvm/rubies/ruby-head/lib/ruby/1.9.1/monitor.rb:211:in `mon_synchronize'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:590:in `invoke_with_call_chain'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:583:in `invoke'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:2051:in `invoke_task'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:2029:in `block (2 levels) in top_level'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:2029:in `each'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:2029:in `block in top_level'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:2023:in `top_level'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:2001:in `block in run'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:2068:in `standard_exception_handling'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/lib/rake.rb:1998:in `run'
/home/chmarus/.rvm/gems/ruby-head@rails3/gems/rake-0.8.7/bin/rake:31:in `<top (required)>'
/home/chmarus/.rvm/gems/ruby-head@rails3/bin/rake:19:in `load'
/home/chmarus/.rvm/gems/ruby-head@rails3/bin/rake:19:in `<main>' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T16:50:14.777

解析您的 routes.rb 文件时会发生该错误。`now`在 config/routes.rb 中查找关键字。请参阅[https://github.com/rails/rails_upgrade/blob/master/lib/routes_upgrader.rb#L38](https://github.com/rails/rails_upgrade/blob/master/lib/routes_upgrader.rb#L38)第 47 行。

如果您没有看到调用`now`或不知道如何从那里修复它，请编辑问题并发布您的 routes.rb 文件，发表评论，我们可以仔细查看。

# c# - 接口中的 XmlAttribute / XmlElement（序列化时元素名称未更改） - 为什么？

> ID：10376675
> 
> 赞同：1
> 
> 时间：2012-04-29T22:44:42.123
> 
> 标签：c#, xml, interface, xml-serialization, xml-attribute

当我将“XmlAttribute/XmlElement”添加到接口中的属性并且 100 个其他类从该接口继承时，将对象序列化为 XML 时 - 为什么序列化后我输入的属性名没有显示在 XML 文件中？

```
interface Test
{
    [XmlAttribute("Name")]
    bool PropertyName { get; set; }
} 
```

保存文件时，显示“PropertyName”而不是“Name”。

有没有办法让它工作，所以一个带有 XmlAttributes 添加到接口的属性会在任何地方更改 Value 而不是 Value 因为如果一些类从同一个接口继承，则需要花费大量时间将所有这些属性添加到所有这些类继承它，并且更改属性的名称而不是更改其中的 100 个会更容易。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T17:12:04.727

我更改了代码以更适合我的项目。我所做的是这样的：

```
 public static XmlAttributeOverrides GetXmlAttributeOverrides(Type type)
    {
        XmlAttributeOverrides overrides = new XmlAttributeOverrides();

        foreach (Type derived in ClassHandler.GetImplementedInterfaces(type))
        {

            foreach (PropertyInfo propertyInfo in derived.GetProperties())
            {
                XmlAttributeAttribute xmlAttributeAttribute = ClassHandler.GetCustomAttribute<XmlAttributeAttribute>(propertyInfo, true) as XmlAttributeAttribute;

                if (xmlAttributeAttribute == null) continue;

                XmlAttributes attr1 = new XmlAttributes();
                attr1.XmlAttribute = new XmlAttributeAttribute();
                attr1.XmlAttribute.AttributeName = xmlAttributeAttribute.AttributeName;
                overrides.Add(type, propertyInfo.Name, attr1);
            }
        }

        return overrides;
    } 
```

我正在尝试实现具有属性的接口的对象都具有“[XmlAttributeAttribute(SomeName)] 在它们之上。

尽管如此，当我序列化它时，它会给出相同的结果。我没有从界面获取属性值。

这就是我序列化的方式：

```
 public static void SerializeFile(String filename, object obj, bool deleteIfExists = true)
    {

        if (deleteIfExists)
        {
            FileManager.DeleteFile(filename);
        }

        Type[] extraTypes = ClassHandler.GetPropertiesTypes(obj, true);

        using (var stream = new FileStream(filename, FileMode.Create))
        {
            //XmlSerializer xmlSerialize = new XmlSerializer(obj.GetType(), extraTypes); 
            XmlSerializer xmlSerialize = new XmlSerializer(obj.GetType(), GetXmlAttributeOverrides(obj.GetType()), extraTypes, null, null);
            xmlSerialize.Serialize(stream, obj);
        }
    } 
```

我在 ClassHandler 类中使用的两种方法：

```
 public static T GetCustomAttribute<T>(this PropertyInfo propertyInfo, bool inherit) where T : Attribute
    {
        object[] attributes = propertyInfo.GetCustomAttributes(typeof(T), inherit);

        return attributes == null || attributes.Length == 0 ? null : attributes[0] as T;
    }

    public static List<Type> GetImplementedInterfaces(Type type)
    {
        Type[] types = type.GetInterfaces();
        List<Type> lTypes = new List<Type>();

        foreach(Type t in types)
        {
            lTypes.Add(t);
        }

        return lTypes;
    } 
```

类具有以下结构：

```
interface IAnimal
{
    // Properties
    // Methods
}

public abstract class Animal : IAnimal
{
    // Implements IAnimal properties and methods
    // This XmlElement gets written correctly when XML Serializing
    // Example:
    [XmlElement("AnimalAge")]
    public double Age
    {
        get { return _age; }
        set { _age = value; }
    }
}

public abstract class Bird : Animal, IAttributeWings
{
    // Implements Attributes common for all "Birds"
    // Setting "override" here gives me error
    public bool HasWings { get { return _hasWings; } set { _hasWings = value; } }
}

public class Pelican : Bird, IAttributeCanFly
{
    // Implements Attributes common for all "Pelicans"
    // Does not implement previous attribute IAttributeWings since Bird class does this
    // Setting "override" here gives me error as well
    public bool CanFly { get { return _canFly; } set { _canFly = value; } }
} 
```

然后属性接口仅具有诸如“bool CanFly，bool hasWings”之类的属性以及此示例中特定类别的此类和其他属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T20:29:46.263

Deukalin，花了一些时间使它与类和接口的综合树一起工作。

这是工作代码

```
 public interface ITestX
    {
        [XmlAttribute("NameX")]
        string PropertyNameX { get; set; }
    }

    public interface ITestY
    {
        [XmlAttribute("NameY")]
        string PropertyNameY { get; set; }
    }

    public interface ITestZ
    {
        [XmlAttribute("NameZ")]
        string PropertyNameZ { get; set; }
    }

    public abstract class TestC : ITestZ
    {
        public abstract string PropertyNameZ { get; set; }
    }

    public abstract class TestA : TestC, ITestX, ITestY
    {
        public abstract string PropertyNameX { get; set; }
        public abstract string PropertyNameY { get; set; }
    }

    public class TestB : TestA
    {
        public override string PropertyNameX { get; set; }
        public override string PropertyNameY  { get; set; }
        public override string PropertyNameZ { get; set; }
    }

    public static class ClassHandler
    {
        public static T GetCustomAttribute<T>(this PropertyInfo propertyInfo, bool inherit) where T : Attribute
        {
            object[] attributes = propertyInfo.GetCustomAttributes(typeof(T), inherit);

            return attributes == null || attributes.Length == 0 ? null : attributes[0] as T;
        }

        public static void GetXmlAttributeOverrides(XmlAttributeOverrides overrides, Type type)
        {
            if (type.BaseType != null)
            {
                GetXmlAttributeOverrides(overrides, type.BaseType);
            }

            foreach (Type derived in type.GetInterfaces())
            {
                foreach (PropertyInfo propertyInfo in derived.GetProperties())
                {
                    XmlAttributeAttribute xmlAttributeAttribute = ClassHandler.GetCustomAttribute<XmlAttributeAttribute>(propertyInfo, true) as XmlAttributeAttribute;

                    if (xmlAttributeAttribute == null)
                        continue;

                    XmlAttributes attr1 = new XmlAttributes();
                    attr1.XmlAttribute = new XmlAttributeAttribute();
                    attr1.XmlAttribute.AttributeName = xmlAttributeAttribute.AttributeName;
                    overrides.Add(type, propertyInfo.Name, attr1);
                }
            }
        }
    }

    class Program
    {
        static void Main(string[] args)
        {
            XmlAttributeOverrides XmlAttributeOverrides = new XmlAttributeOverrides();
            ClassHandler.GetXmlAttributeOverrides(XmlAttributeOverrides, typeof(TestB));
            try
            {
                TestB xtest = new TestB() { PropertyNameX = "RajX", PropertyNameY = "RajY", PropertyNameZ = "RajZ" };

                StringBuilder xmlString = new StringBuilder();
                using (XmlWriter xtw = XmlTextWriter.Create(xmlString))
                {
                    XmlSerializer serializer = new XmlSerializer(typeof(TestB), XmlAttributeOverrides);
                    serializer.Serialize(xtw, xtest);

                    xtw.Flush();
                }

                Console.WriteLine(xmlString.ToString());
            }
            catch (Exception ex)
            {
                Console.WriteLine(ex.ToString());
            }
} 
```

下面是上面示例的输出

```
<?xml version="1.0" encoding="utf-16"?><TestB xmlns:xsi="http://www.w3.org/2001/
XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" NameZ="RajZ" Na
meX="RajX" NameY="RajY" />
Press any key to continue . . . 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T01:49:34.520

某些原因它在 .NET 中不起作用......但我想出了这个解决方案来克服使用**XmlAttributeOverrides**时遇到的问题。有关它的更多信息，请访问以下链接

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeoverrides.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeoverrides.aspx)

您可以通过在应用程序的某处重构/缓存此**GetXmlAttributeOverrides()方法来优化它。**希望能帮助到你。

```
public interface ITest
{
    [XmlAttribute("Name")]
    string PropertyName { get; set; }
}

public class XTest : ITest
{
    public string PropertyName
    {
        get;
        set;
    }
}

public class Program
{
   static void Main(string[] args)
    {

        try
        {
            XTest xtest = new XTest() { PropertyName = "Raj" };

            StringBuilder xmlString = new StringBuilder();
            using (XmlWriter xtw = XmlTextWriter.Create(xmlString))
            {
                XmlSerializer serializer = new XmlSerializer(typeof(XTest), GetXmlAttributeOverrides(typeof(XTest)));
                serializer.Serialize(xtw, xtest);

                xtw.Flush();
            }

            Console.WriteLine( xmlString.ToString());
        }
        catch (Exception ex)
        {
            Console.WriteLine(ex.ToString());
        }
    }

   public static XmlAttributeOverrides GetXmlAttributeOverrides(Type derivedType)
   {
       Type type = typeof(ITest);
       XmlAttributeOverrides overrides = new XmlAttributeOverrides();

       XmlAttributes attr = new XmlAttributes();

       foreach (PropertyInfo propertyInfo in type.GetProperties())
       {
           XmlAttributeAttribute xmlAttributeAttribute = propertyInfo.GetCustomAttribute(typeof(XmlAttributeAttribute), true) as XmlAttributeAttribute;

           if (xmlAttributeAttribute == null) continue;

           XmlAttributes attr1 = new XmlAttributes();
           attr1.XmlAttribute = new XmlAttributeAttribute();
           attr1.XmlAttribute.AttributeName = xmlAttributeAttribute.AttributeName;
           overrides.Add(derivedType, propertyInfo.Name, attr1);
       }

       return overrides;
   }
} 
```

**编辑：**在您的应用程序中包含此扩展类

```
public static class PropertyInfoEx
{
        public static T GetCustomAttribute<T>(this PropertyInfo propertyInfo, bool inherit) where T : Attribute
        {
            object[] attributes = propertyInfo.GetCustomAttributes(typeof(T), inherit);

            return attributes == null || attributes.Length == 0 ? null : attributes[0] as T;
        }

} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T18:18:26.297

在您的代码中发现了一些问题。以下是更正后的代码

```
public static XmlAttributeOverrides GetXmlAttributeOverrides(Type type)
{
    XmlAttributeOverrides overrides = new XmlAttributeOverrides();

    // Get all interfaces that the "type" implements (is it same as "derivedType" from previously)?
    foreach (Type derived in ClassHandler.GetImplementedInterfaces(type))
    {

        foreach (PropertyInfo propertyInfo in derived.GetProperties())
        {
            XmlAttributeAttribute xmlAttributeAttribute = ClassHandler.GetCustomAttribute<XmlAttributeAttribute>(propertyInfo, true) as XmlAttributeAttribute;

            if (xmlAttributeAttribute == null) continue;

            XmlAttributes attr1 = new XmlAttributes();
            attr1.XmlAttribute = new XmlAttributeAttribute();
            attr1.XmlAttribute.AttributeName = xmlAttributeAttribute.AttributeName;
            overrides.Add(type, propertyInfo.Name, attr1);
        }
    }

    return overrides;
} 
```

自己试试。让我知道它是否有效。

# macros - 将 2 个文本保存在同一个 file.csv 中，但在 iMacros 上的两个不同列中

> ID：10376677
> 
> 赞同：0
> 
> 时间：2012-04-29T22:44:53.960
> 
> 标签：macros, text-extraction, imacros

我正在努力了解如何将两个不同的文本保存在一个名为 file.csv（或 .txt）的文件中，但保存在两个不同的列中。

我已经构建了一个`.JS`生成随机文本的程序，然后填写一些字段，然后继续执行宏的其余部分。

我想要做的是将这些文本（电子邮件，密码）保存在 .csv 但在`{{!COL1}}`&`{{!COL2}}`

有没有办法建立这样的东西？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-27T22:34:20.417

```
set !extract value1
add !extract value2
saveas type=extract.... 
```

# flash - 在 Flash 中切换场景的问题

> ID：10376683
> 
> 赞同：0
> 
> 时间：2012-04-29T22:46:01.087
> 
> 标签：flash, actionscript

我是 Flash 新手，我正在为班级做这个项目。我正在创建一个带有两个独立场景的演示游戏。

我创建的场景 1 有 60 帧动作。我在 5 个单独的图层上有 5 个云，并对所有云层应用了新的补间动画，因此云将从屏幕的两侧移动并最终到达舞台上的给定位置。舞台上还有一个“PLAY”按钮（实例名称：playbtn），点击后应该转到场景 2。动作脚本和按钮分别位于不同的图层上，都位于时间线的顶部。我已经给按钮这个动作脚本插入关键帧 1：

```
function onPlayClick(event:MouseEvent):void{
    gotoAndPlay(1,"Scene 2");
}
playbtn.addEventListener(MouseEvent.CLICK, onPlayClick);

stop(); 
```

当我测试电影时，它一直播放场景 1，然后立即进入场景 2。问题是我在舞台上的字体在测试播放时没有出现。它也没有给我点击播放按钮的选项，因为它直接进入下一个场景而没有停止。

我希望场景 1 在第 60 帧结束时停止，而不循环或转到下一个场景，让用户能够单击播放按钮。所以我`stop();`在关键帧 1 处放入了动作脚本，但这只会删除我在场景 1 上的文本。我什至尝试`stop(60);`在关键帧 60 处放置以查看场景是否会停在那里，这给了我与以前相同的结果。

它还在测试电影之前显示一条奇怪的消息：“您的内容不会流式传输。运行时共享库​​预加载将要求您在播放第一帧之前下载所有内容。”

Flash 中的输出还显示“ReferenceError: Error #1065: Variable TCMText is not defined”。

我不知道该怎么做，我在网上的任何地方都找不到任何与我的问题相匹配的东西。

谢谢阅读！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T16:20:12.113

引用“我希望场景 1 在第 60 帧处停止”只需添加：

```
stop(); // make sure this is a keyframe aswell 
```

还有其他方法可以在 A 类文件中实现。

要解决您的其他问题，请在创建所有资产时定义它们，如果您的懒惰只是在您的第一帧上执行它并且它们会隐藏它们直到需要

```
myMc.visible = false// declare variables first 
```

问题 3：“字体” 您必须为动态文本框嵌入字体，您可以通过查看修饰符选项卡并选择嵌入来做到这一点。

问题 4：“变量”变量 TCMText 未定义。

```
 var TCMText = "";//declare like this at start of script 
```

# java - Android：DataOutputStream 上的 NullPointerException

> ID：10376685
> 
> 赞同：0
> 
> 时间：2012-04-29T22:46:05.273
> 
> 标签：java, android, multithreading, sockets, nullpointerexception

我正在写一种手机和电脑之间的聊天应用程序。为了从手机接收，我设置了一个套接字并将其`outputStream`放入 a`DataOutputStream`中，从 a 轮询字符串`LinkedBlokingQueue`并使用`writeUTF()`. 但由于某种原因，我在执行`dataOutputStream.writeUTF(input)`.

这是代码：

```
public class txThread extends Thread{
    private LinkedBlockingQueue activityQueue;
    private Socket socket;
    private String input;

    public txThread(LinkedBlockingQueue activityQueue){
        this.activityQueue = activityQueue;
        socket = null;
        input = null;
    }

    public void run(){
        DataOutputStream dataOutputStream = null;
        try {
            socket = new Socket("192.168.1.8",1755);
            Log.d("DEBUG","THREAD_TX_CONNECTED");
            dataOutputStream = new DataOutputStream(socket.getOutputStream());
            while(true){
                input = (String) activityQueue.poll();
                dataOutputStream.writeUTF(input);
            }
        } catch (UnknownHostException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        finally{
            if (socket != null){
                try {
                    socket.close();
                } catch (IOException e) {
                    e.printStackTrace();
                }
        }
        if (dataOutputStream != null){
            try {
                dataOutputStream.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        }
        }
        return;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T12:23:11.133

如果队列中没有第一项，我认为您不希望`activityQueue.poll()`在这里返回。`null`

> 检索并删除此双端队列表示的队列的头部（换句话说，此双端队列的第一个元素），如果此双端队列为空，则返回 null。

我认为您应该`activityQueue.take()`在`while(true)`等待队列中有一个项目的循环中使用：

> 检索并删除此双端队列表示的队列的头部（换句话说，此双端队列的第一个元素），如有必要，等待元素可用。

# ruby-on-rails - 为依赖于rails中另一个选择字段的选择字段设置默认值

> ID：10376686
> 
> 赞同：0
> 
> 时间：2012-04-29T22:46:11.170
> 
> 标签：ruby-on-rails, ruby, view

在我的 Rails 应用程序中，我使用的是“设计”。我还为用户添加了“机构”选择字段和“校园”选择字段，当用户选择一个“机构”时，“校园”字段更改到目前为止一切正常，我的问题是当我想编辑用户的个人资料时.

当我去编辑时，我希望选择字段的默认值是用户所属的。这仅解决了“机构”的问题：

```
= select_tag(:institution, options_for_select(Instituicao.all.map {|institution| institution.name, institution.id] },
      [current_user.campus.institution.name, current_user.campus.institution.id]) 
```

但是对于“Campus”，我无法获得默认值作为他已经属于的用户“Campus”，这就是“Campus”选择现在的方式：

```
= select_tag(:campus, options_for_select(Institution.first.campus.map {|campus| [campus.name, campus.id] }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:38:16.990

```
= select_tag(:campus, 
  options_for_select(
    Institution.all.campus.map {|campus| [campus.name, campus.id] },
    current_user.campus.id # ???  don't really know how your relationships are set up
  ) 
```

看起来用户属于校园，校园属于机构，但您没有发布足够的代码来确定。

您的第一个工作示例可以简化为：

```
= select_tag(:institution, 
  options_for_select(
    Instituicao.all.map {|institution| institution.name, institution.id] },
    current_user.campus.institution.id) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:32:41.870

解决我自己的问题：

只需像这样执行 Campus select 字段：

```
= select_tag(:campus, options_for_select(current_user.campus.institution.campus.map {|campus| [campus.name, campus.id] })) 
```

# opengl - VBO 纹理不起作用

> ID：10376687
> 
> 赞同：0
> 
> 时间：2012-04-29T22:46:13.417
> 
> 标签：opengl, textures, vbo

问题是这段代码什么也不显示。我的大量纹理有问题。如果我评论有关纹理处理的代码行，它会完美运行。它显示一个 4 色方块。你能帮助我吗 ？

```
#define OFFSET_BUFFER(bytes) ((GLfloat *)NULL + bytes)

GLfloat vertices[12] =
{
    -1.0f, -1.0f, 1.0f,
    -1.0f, 1.0f, 1.0f,
    1.0f, 1.0f, 1.0f,
    1.0f, -1.0f, 1.0f,
};

GLfloat colors[12] =
{
    1.0f, 0.0f, 0.0f,
    0.0f, 1.0f, 0.0f,
    0.0f, 0.0f, 1.0f,
    1.0f, 0.0f, 1.0f,
};

GLfloat texture[8] =
{
    0.0f, 0.0f,
    1.0f, 0.0f,
    1.0f, 1.0f,
    0.0f, 1.0f
};

int main(int argc, char *argv[])
{
    SDL_Init(SDL_INIT_VIDEO);
    SDL_WM_SetCaption("Texture Mapping",NULL);
    SDL_SetVideoMode(500, 500, 32, SDL_OPENGL);

    bool continuer = true;
    SDL_Event event;
    GLuint  buf[2];
    GLuint texture1;

    glClearDepth(1.0f);
    glClearColor(0.1f, 0.1f, 0.1f, 0.1f);
    glEnable(GL_DEPTH_TEST);
    glMatrixMode(GL_PROJECTION);
    glLoadIdentity();
    gluPerspective(70.0f, (float)500.0f / (float)500.0f, 1.0f, 3000.0f);
    glewInit();

    texture1 = loadTexture("caisse.jpg");
    glBindTexture(GL_TEXTURE_2D, texture1);

    glGenBuffers(2, &buf[0]);
    glBindBuffer(GL_ARRAY_BUFFER, buf[0]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(vertices), vertices, GL_STATIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER, buf[1]);
    glBufferData(GL_ARRAY_BUFFER, sizeof(colors), colors, GL_STATIC_DRAW);

    glBindBuffer(GL_ARRAY_BUFFER, texture1);
    glBufferData(GL_ARRAY_BUFFER, sizeof(texture), texture, GL_STATIC_DRAW);

    while (continuer)
    {
        SDL_WaitEvent(&event);
        switch(event.type)
        {
            case SDL_QUIT:
                continuer = false;
        }

        glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);

        glEnable(GL_TEXTURE_2D);

        glMatrixMode(GL_MODELVIEW);
        glLoadIdentity();

        gluLookAt(0.0f, 0.0f, 3.0f, 0.0f, 0.0f, 0.0f, 0.0f, 1.0f, 0.0f);

        glBindBuffer(GL_ARRAY_BUFFER, buf[0]);
        glVertexPointer(3, GL_FLOAT, 0, OFFSET_BUFFER(0));

        glBindBuffer(GL_ARRAY_BUFFER, buf[1]);
        glColorPointer(3, GL_FLOAT, 0, OFFSET_BUFFER(0));

        glBindBuffer(GL_ARRAY_BUFFER, texture1);
        glTexCoordPointer(2, GL_FLOAT, 0, OFFSET_BUFFER(0));

        glEnableClientState(GL_VERTEX_ARRAY);
        glEnableClientState(GL_COLOR_ARRAY);
        glEnableClientState(GL_TEXTURE_COORD_ARRAY);

        glDrawArrays(GL_QUADS, 0, 4);

        glDisableClientState(GL_TEXTURE_COORD_ARRAY);   
        glDisableClientState(GL_COLOR_ARRAY);
        glDisableClientState(GL_VERTEX_ARRAY);

        glDisable(GL_TEXTURE_2D);

        glFlush();
        SDL_GL_SwapBuffers();
    }

    SDL_Quit();

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:52:42.640

首先，您需要开始`glGetError()`输入代码进行调试，因为您肯定会在这里产生一些错误。

您正在`texture1`使用 glBindBuffer 绑定纹理，这样做是不正确的。纹理坐标与纹理不同。您应该生成 3 个缓冲区而不是 2 个，并将`texture[8]`texcoords 加载到第三个缓冲区中。

# meteor - 流星和文本区域

> ID：10376690
> 
> 赞同：1
> 
> 时间：2012-04-29T22:46:40.920
> 
> 标签：meteor

好的，所以我不确定为什么我不能渲染代码。首先，如果我 console.log users.content 我得到了我想要的内容，但我有些无法将它传递给 textarea 以便它显示它......

```
Users = new Meteor.Collection("users");

if(Meteor.is_client){
  Template.inputUser.code = function(){
    var el = Users.find({name:"oscar"});
    el.forEach(function(users){
      console.log(users.content);
    })
  }
} 
```

然后在我的html模板上我有

```
<body>{{> inputUser}}</body>

<template name="inputUser">
<textarea>{{content}}</textarea>
</template> 
```

而且我会在分贝上记录下来

```
if(Meteor.is_server)
  Users.insert({name:"oscar",content:"hello world"}) 
```

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:29:27.893

首先你的方法`Template.inputUser.code`应该返回一些东西，你还应该注意它不会被那个模板调用，因为它需要`{{code}}`调用它而不是`{{content}}`

第二点是如果您禁用了自动发布包，数据库内容并不总是可用，如果是这样，请使用发布（在服务器代码中）和订阅（在客户端代码中）检查： http: [//docs.meteor.com/# meteor_subscribe](http://docs.meteor.com/#meteor_subscribe)您可以使用它来检查客户端何时显示所有数据。就像是：

```
Meteor.subscribe('allusers', function() {
  Template.inputUser.code = function(){
    var user = Users.findOne({name:"oscar"});
    return user.content;
  }
});

...

Meteor.publish('allusers', function() {
  return Users.find();
}); 
```

# android - SQLite 游标如何在内部工作？

> ID：10376691
> 
> 赞同：9
> 
> 时间：2012-04-29T22:46:41.430
> 
> 标签：android, sqlite, database-cursor

我正在做一个需要在表格上存储位图的项目。这些位图用于数据适配器中以显示在列表上。该表可能包含超过 1000 个图像。我目前不存储到文件的原因是因为我可以将图像读取和写入数据库的速度有多快。

我本质上要寻找的是了解 SQLite 游标的局限性。光标是如何加载到内存中的？它将查询结果放在内存中还是创建某种类型的临时读/写文件？我不想遇到查询大型数据集导致设备内存不足的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T04:51:32.747

如果我记得的话，它会尽可能多地将结果缓存在内存中。通常，它应该保持在[软堆限制](http://www.sqlite.org/c3ref/soft_heap_limit64.html)以下。这是一个建议限制，因此它更愿意超过限制而不是返回 SQL_NOMEM。

我不相信它会为任何缓存机制写入磁盘。只要每个图像都可以放入内存，并且它们不在索引中，这应该不是问题。

我不是一个安卓程序员，因为它的价值。其中一些东西可以定制。

作为背景，[sqlite_step](http://www.sqlite.org/c3ref/step.html)是默认库中的光标。我不知道android是否已经实现了它自己的机制。您可以在他们的页面上找到一些关于[动态内存分配](http://www.sqlite.org/malloc.html)的一般信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-07T15:43:04.730

这是我做的一个旧帖子。我的解决方案是将图像保存到文件并将图像的路径保存到数据库表中。这更干净，似乎更快。

将大型二进制数据保存到表中的想法似乎不是正确的做法。我没有关于为什么不是一个好主意的详细信息，但这就是我从一些研究中得到的感受。

# android - 当活动在android中启动时，如何从edittext中删除选定的状态？

> ID：10376692
> 
> 赞同：1
> 
> 时间：2012-04-29T22:47:03.417
> 
> 标签：android, android-edittext

在我的应用程序中，我有一个包含edittext的活动，当活动启动时，编辑文本自动被赋予选定状态并且键盘立即出现，这里的问题是当这种情况发生时用户看到的活动的其他部分被隐藏，我想要的是，当活动开始时，edittext 上没有焦点，以便用户可以查看页面上的其他元素，然后决定是否要选择 edittext 并启动键盘，任何帮助都会很长谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:54:08.117

我想通了，您实际上必须进入清单文件并将`android:windowSoftInputMode="stateHidden"`活动标记放入您不希望键盘自动显示的活动中，进行了一些广泛的搜索但找到了它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T05:49:21.083

在 manifest.xml 文件中使用 android:windowSoftInputMode="stateHidden" 作为

```
<activity android:name=".YourActivity" android:label="" android:theme="@android:style/Theme.NoTitleBar" android:windowSoftInputMode="stateHidden"/> 
```

希望这有帮助

# mongodb - 如何在 MongoDB 中搜索嵌入式集合？

> ID：10376697
> 
> 赞同：0
> 
> 时间：2012-04-29T22:48:18.767
> 
> 标签：mongodb, mongoose, mongodb-query

例如，假设我有一个 Post 模式，如下所示：

```
var Schema = new db.Schema({
    title    : String
    , text    : String

    // Denormalize by using user name
    , author     : String
    , tags: [String]
    , comments: [Comment]
}); 
```

我正在尝试匹配特定标签，如下所示：

```
function getPostByTag(tag, callback) {
    Post.find().where({"tags.value": tag}).run(callback);
} 
```

但它正在返回一切。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:14:53.180

你从哪里得到“tags.value”的“价值”部分。不应该只是：

```
Post.find().where({tags:tag}).run(callback); 
```

# django - 注释然后过滤然后注释

> ID：10376699
> 
> 赞同：0
> 
> 时间：2012-04-29T22:48:56.350
> 
> 标签：django, annotations

编码：

```
now = datetime.now()
year_ago = now - timedelta(days=365)
category_list = Category.objects.annotate(suma = Sum('operation__value')) \
                                .filter(operation__date__gte = year_ago) \
                                .annotate(podsuma = Sum('operation__value')) 
```

这个想法：得到每个类别的总和和一年前的总和。

但是这段代码只过滤了对象；`suma`等于`podsuma`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:23:50.740

一个查询集只产生一个查询，因此所有注释都是在同一个过滤数据集上计算的。您需要执行两个查询。

**更新：**

做这样的事情：

在模型.py

```
class Category(models.Model):
    ...
    def suma(self):
        return ...
    def podsuma(self):
        return ... 
```

然后删除注释，您的 for 循环应该按原样工作。这将意味着更多的查询，但它们会更简单，您可以随时缓存它们。

# cpu-cache - 高速缓存内存混乱

> ID：10376703
> 
> 赞同：-2
> 
> 时间：2012-04-29T22:49:56.500
> 
> 标签：cpu-cache

在 UC 模式下运行时，CPU Cache 是否仍可用于程序员的内存使用？还是因为程序员无法寻址高速缓存而这不可能？我错误地认为 MTRR 可以用来寻址 CPU Cache 内存？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-06T01:37:19.687

您似乎在询问是否可以关闭缓存的正常行为，而是将其 SRAM 用作可直接寻址的内存区域。最简洁的答案是不。此外，不可缓存 (UC) 是内存页面或内存区域的属性，而不是缓存本身的模式。

# android - Android Indeterminate ProgressBar 不旋转

> ID：10376705
> 
> 赞同：6
> 
> 时间：2012-04-29T22:50:05.850
> 
> 标签：android, progress-bar

抱歉，如果之前有人问过这个问题，但我找不到答案（我已经搜索过了！）

我试图按照 google/android 文档在我的应用程序执行冗长的任务时使不确定的进度条出现并旋转。

```
protected void readData(final String whatToFind) 
{

    try
    {
        if (whatToFind.length() == 0)
        {
            adapter.notifyDataSetChanged();
            return;
        }

        mProgress.setVisibility(View.VISIBLE);
        mProgressText.setVisibility(View.VISIBLE);

        m_dialog = new ProgressDialog(this);
            m_dialog.setTitle("Searching...");
            m_dialog.setMessage("Please wait while searching...");
            m_dialog.setIndeterminate(true);
            m_dialog.setCancelable(true); 
            m_dialog.show(); 

        new Thread(new Runnable() 
        {
            public void run() 
            {
                mHandler.post(new Runnable() 
                {    
                    public void run() 
                    {

                                while (LotsOfWorkGoingOn)  
                                {
                                    // Update the progress bar
                                        mHandler.post(new Runnable() {
                                         public void run() {
                                             mProgress.setProgress(m_i); /// vain attempt to make the progressbar spin
                                         }
                                     });                                

                                                         mProgress.setVisibility(View.GONE);
                                                         mProgressText.setVisibility(View.GONE);
                                                         m_dialog.hide();

                                            }

                        });
            }
        }).start();

    }
    catch (Exception ex)
    {
        Log.e(LOGid, "Error listing items:" + ex.getStackTrace());
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T22:55:19.797

`setProgress`仅在进度条不是 Indeterminate 时有效。

不确定意味着它没有进度量，当您不知道完成任务/剩余的进度量时使用它来结束任务。

如[文档](http://developer.android.com/reference/android/widget/ProgressBar.html)中所述：

> 进度条也可以是不确定的。在不确定模式下，进度条会显示循环动画，但没有进度指示。当任务的长度未知时，应用程序使用此模式。不确定的进度条可以是旋转的轮子，也可以是水平条。

另一方面，如果您甚至没有看到进度条，也许您的背景是浅色的？

尝试将样式属性设置为：

```
style="@android:style/Widget.ProgressBar.Inverse" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-04-20T20:16:51.007

也许我误解了这个问题，但对于那些试图让他们自定义的不确定`ProgressBar`旋转降落在这里的人，希望这可以帮助你。不要设置`android:indeterminateDrawable`为实际资产，而是设置为您自己的可旋转资产的自定义可绘制对象。

定义 res/drawable/progress_indeterminate_custom.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<layer-list xmlns:android="http://schemas.android.com/apk/res/android" >
  <item>
    <rotate
      android:drawable="@drawable/your_custom_drawable"
      android:fillAfter="true"
      android:fromDegrees="0"
      android:pivotX="50%"
      android:pivotY="50%"
      android:toDegrees="360" />
  </item>
</layer-list> 
```

当任务开始和结束时，您可以分别设置`ProgressBar`to`VISIBLE`和的可见性`GONE`。

如果要修改旋转速度，[此答案](https://stackoverflow.com/a/19185350/1221537)将更`toDegrees`改为 360 的倍数（即 720、1080 等）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-08-18T22:46:56.547

就我而言，我只是忘记了设备上的所有动画都已禁用。没有阻塞或任何不良控制设置。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-04-30T23:58:49.077

假设存在 UI 阻塞问题，您可以通过`AsyncTask`以下方式扩展和使用它：

```
ProgressDialog m_dialog;

protected void readData(final String whatToFind) {

    if (whatToFind.length() == 0) {
        adapter.notifyDataSetChanged();
        return;
    }

    m_dialog = new ProgressDialog(this);
    new LengthyTask().execute();
}

//AsyncTask<Params, Progress, Result>
//Params: type passed in the execute() call, and received in the doInBackground method
//Progress: type of object passed in publishProgress calls
//Result: object type returned by the doInBackground method, and received by onPostExecute()
private class LengthyTask extends AsyncTask<Object, Integer, Object> {

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        // initialize the dialog
        m_dialog.setTitle("Searching...");
        m_dialog.setMessage("Please wait while searching...");
        m_dialog.setIndeterminate(true);
        m_dialog.setCancelable(true);
        m_dialog.show();
    }

    @Override
    protected Object doInBackground(Object... params) {
        // do the hard work here
        // call publishProgress() to make any update in the UI
    }

    @Override
    protected void onProgressUpdate(Integer... values) {
        // called from publishProgress(), you can update the UI here
        // for example, you can update the dialog progress
        // m_dialog.setProgress(values[0]); --> no apply here, because we made it indeterminate
    }

    @Override
    protected void onPostExecute(Object result) {
        super.onPostExecute(result);

        // close the dialog
        m_dialog.dismiss();
        //do any other UI related task
    }
} 
```

有关 的更深入解释`AsyncTask`，请阅读[此处](http://developer.android.com/guide/topics/fundamentals/processes-and-threads.html#AsyncTask)和[此处](http://developer.android.com/reference/android/os/AsyncTask.html)。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-12-30T00:26:26.397

AsyncTask 应该可以解决问题，但我建议使用[Android Annotations](https://github.com/excilys/androidannotations/wiki/WorkingWithThreads)来使这种事情变得不那么冗长（并且更容易）。

```
void myMethod() {
    someBackgroundWork("hello", 42);
} 
```

在后台发生的事情：

```
@Background
void someBackgroundWork(String aParam, long anotherParam) {
    [...]
    doInUiThread("hello", 42);
} 
```

这可以调用在 UI 线程中发生的事情。

```
@UiThread
void doInUiThread(String aParam, long anotherParam) {
    [...]
} 
```

Android Annotations 可能仅此一项就值得，但还有许多其他有用的 Annotations。

# javascript - 如何使键码适用于西里尔文

> ID：10376706
> 
> 赞同：1
> 
> 时间：2012-04-29T22:50:07.380
> 
> 标签：javascript

下面的代码仅适用于拉丁语**n**，但如何使其适用于西里尔**语-**

```
if(event.keyCode === 78) {
console.log('okay');
} 
```

如果我更改与美国不同的键盘布局并单击 latin N

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T23:50:03.507

我不太确定你在问什么，但我假设你想获得与在键盘上输入西里尔字符相关的字符。如果是这样，我想当`keydown`正确`keyup`的事件是`keypress`. 告诉你按下的物理键，同时`keydown`告诉你输入的字符。这是一个简单的跨浏览器示例，说明如何获取键入的字符：`keyup``keypress`

```
document.onkeypress = function(e) {
    e = e || window.event;
    var charCode = (typeof e.which == "number") ? e.which : e.keyCode;
    var typedChar = String.fromCharCode(charCode);
    alert("Typed character: " + typedChar);
}; 
```

这是 JavaScript 键盘事件的权威参考：http: [//unixpapa.com/js/key.html](http://unixpapa.com/js/key.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:12:03.357

Cyrillic **н**不是 UTF8 的前 127 个字符的一部分，因此您的代码不起作用。如果有意义的话，您可以尝试为**н使用适当的代码，即 1085：**

```
if(event.keyCode === 1085) {
    console.log('okay');
} 
```

作为旁注，西里尔字母和拉丁字符之间没有一对一的关系 - 我建议在尝试发明之前三思而后行。

# php - PHP _GET 问题未多次尝试刷新数据

> ID：10376708
> 
> 赞同：0
> 
> 时间：2012-04-29T22:50:30.847
> 
> 标签：php, mysql, web-services, html

我有一个从我的应用程序触发的 php 脚本。此脚本使用 GET 方法从 url 检索信息并将其放入数据库。到目前为止，我已经让它工作了，除了当我尝试做多个请求时。

例如，我做了一个测试，每次我都会从 GET 中获取数据库的名称，将其放入适当的数据库中，检索最后一个条目，然后每次添加 7 并将其回显到屏幕/输入它作为最新的号码返回数据库。我在我的浏览器中尝试了这个，每次都点击刷新，并且第一次工作。我第二次点击刷新，它给了我与第一次相同的结果。我一直在尝试但结果相同，所以我关闭了浏览器并再次尝试。它按应有的方式工作。

所以我认为这个问题与第二次、第三次、第四次……没有收到连接的脚本有关。它似乎只在第一次工作。我认为这是缓存数据的问题，但我在 php 脚本中关闭了缓存。

有人可以告诉我为什么它只在第一次尝试时有效吗？

谢谢

**用代码编辑**

```
header("Expires: Mon, 26 Jul 1997 05:00:00 GMT");
header("Last-Modified: " . gmdate("D, d M Y H:i:s") . " GMT"); 
header("Cache-Control: no-store, no-cache, must-revalidate"); 
header("Cache-Control: post-check=0, pre-check=0", false);
header("Pragma: no-cache");

checkToken();

function checkToken ()
{

$username='XXXXX';
$password='XXXXX';
$database='Push';

$passed= $_GET['token'];

$pieces = explode(" ", $passed); /*Contains two pieces of information.  
                                       First is for the correct table and 
                                       and the second is the actually data 
                                       that will be put into the tables*/
$search= $pieces[1];

$table= $pieces[0];

echo $table." ".$search;

 $db= new mysqli('localhost', $username, $password, $database);

if (mysqli_connect_errno())
{
    echo 'Error: Could not connect';
    exit;

}

$query = "SELECT * FROM `Tokens` WHERE `Number` LIKE '%$search%' ";

       echo "after";

$result = $db->query($query);
if ($result) {
    $num_results = $result->num_rows;

    $row = $result->fetch_assoc();

    echo $row;

    if (!$row)
    {
        echo "No Token, insert into database";
        insertToken($table,$pieces[1]);

        return;

    }

   /*problem may be around here...? does not always go into (!row)
     after the first time when it is supposed too*/

echo $row['Numbers'];

} else {
   // echo "Query failed: {$db->error}\n";

    echo "No";

}

}

function insertToken ($daTable, $daToken)
{

$username='XXXX';
$password='XXXX';
$database='Push';

 $token=$daToken;

 $con= mysql_connect("localhost",$username,$password);

  mysql_select_db($database,$con);

  $res = mysql_query(
"INSERT INTO $daTable
VALUES ('', '$token')");
if (!$res) {
die('Invalid query: ' . mysql_error());
 } else  {
echo "complete";
 }

mysql_close($link);

  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:58:57.297

也许是缓存问题？尝试确保代码完全执行，例如回显时间

# asp.net-mvc - 用于 Web 表单用户控件 (ASCX) 的 MVC 替换

> ID：10376714
> 
> 赞同：0
> 
> 时间：2012-04-29T22:51:57.440
> 
> 标签：asp.net-mvc

我是 ASP.NET MVC 世界的安静新手。在 Web 窗体中，我们可以编写一个用户控件并将所有细节封装在其中。然后我们可以在 N 个页面上重用控件，这是一个很好的代码重用。

我想在 MVC 3/4 中做同样的事情并且没有任何运气。有人可以帮我解决上述问题吗？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:30:04.613

可能最接近 MVC 中的 ASCX 的是[RenderAction](http://msdn.microsoft.com/en-us/library/ee703541.aspx)。与用户控件类似，您可以将局部视图绑定到独立于容器视图及其操作的特定操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:01:43.000

没有确切的等价物。但是，有一些方法可以重用代码。您可以创建 HtmlHelper 扩展（如 Html.Whatever() 方法），或者您可以使用部分视图，或者您可以使用模板。所有这些都做不同的事情，但它们提供了多种重用代码的方法。

# php - 如何附加刚刚上传的文件名？

> ID：10376719
> 
> 赞同：-1
> 
> 时间：2012-04-29T22:52:44.303
> 
> 标签：php, javascript

我在附加 imageNameArray 时遇到问题，它应该显示已上传的文件名。

问题是，假设我之前上传了一个文件（pig.png），当我刷新页面并上传另一个文件（panda.png）时，当我上传文件时，它应该显示'panda.png'。但它会附加上一个上传文件的名称 (pig.png)，而不是附加 panda.png。

如果我再次刷新页面并上传另一个文件（tiger.png），那么当我上传文件时，它应该显示“tiger.png”。但它仍然只是附加先前上传文件的名称（panda.png），而不是附加tiger.png。

如果我上传另一个文件（不刷新页面），例如monkey.png，那么它会再次附加panda.png。没有猴子.png。所以它应该附加tiger.png和monkey.png，而是附加panda.png和panda.png。

我想要的是，当一个文件被上传时，它的名字被附加了。但是如何才能做到这一点呢？请展示如何修复它的编码示例，因为我发现它比解释为什么会发生这种情况更容易:)

下面是发生附加的 javascript 代码：

```
 <?php
    session_start();

    $idx = count($_SESSION ['fileImage'] - 1);
    $output = isset($_SESSION ['fileImage'][$idx]) ?
        $_SESSION ['fileImage'][$idx]['name'] : "";

    ?>

<script type="text/javascript">

 function imageClickHandler(imageuploadform){ 
      if(imageValidation(imageuploadform)){ 
          return startImageUpload(imageuploadform); 
      } 
      return false;
  }

function startImageUpload(imageuploadform){

              $(".imageCancel").click(function() {
              $('.upload_target').get(0).contentwindow
          return stopImageUpload();
    });

      return true;
}

    function stopImageUpload(success){
        var imageNameArray = new Array();
        imageNameArray = <?php echo $output ?>;
        var result = '';

        if (success == 1){
            result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';

            for(var i=0;i<imageNameArray.length;i++)
            {
                $('.listImage').append(imageNameArray[i]+ '<br/>');
            }
        }
        else {
            result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
        }
        return true;
    }

</script>

<body>

<form action='imageupload.php' method='post' enctype='multipart/form-data' target='upload_target' onsubmit='return imageClickHandler(this);' class='imageuploadform' > 
Image File: <input name='fileImage' type='file' class='fileImage' /></label><br/><label class='imagelbl'>
<input type='submit' name='submitImageBtn' class='sbtnimage' value='Upload' /></label>
</p><ul class='listImage' align='left'></ul>
<iframe class='upload_target' name='upload_target' src='#' style='width:0;height:0;border:0px;solid;#fff;'></iframe></form>");

</body> 
```

下面是 php 脚本 (imageupload.php)，它从上面的 javascript 函数上传另一个页面上的文件：

```
<?php
session_start();

$result = 0;
$errors = array ();
$dirImage = "ImageFiles/";

if (isset ( $_FILES ['fileImage'] ) &&
    $_FILES ["fileImage"] ["error"] == UPLOAD_ERR_OK) {

    $fileName = $_FILES ['fileImage'] ['name'];

    $fileExt = pathinfo ( $fileName, PATHINFO_EXTENSION );
    $fileExt = strtolower ( $fileExt );

    $fileDst = $dirImage . DIRECTORY_SEPARATOR . $fileName;

        if (count ( $errors ) == 0) {
            if (move_uploaded_file ( $fileTemp, $fileDst )) {
                $result = 1;
        }
    }
}

$_SESSION ['fileImage'][] = array('name' => $_FILES ['fileImage']['name']);
?>
<script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result;?>);</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:51:48.677

问题是当 PHP 代码呈现页面时，您正在输出上传文件的名称，这是在（下一个）图像上传之前。

这发生在`stopImageUpload()`JavaScript 函数的这一行：

```
imageNameArray = <?php echo $output ?>; 
```

有几种方法可以解决这个问题，但我会选择通过`stopImageUpload()`函数将文件名传回的直接方法。

```
// stolen from http://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding
function htmlEncode(value) { return $('<div/>').text(value).html(); }

function stopImageUpload(success, filename) {
  var imageNameArray = new Array();
  var result = '';

  if (success) {
    result = '<span class="msg">The file was uploaded successfully!</span><br/><br/>';

    $('.listImage').append(htmlEncode(filename) + '<br/>');
  } else {
    result = '<span class="emsg">There was an error during file upload!</span><br/><br/>';
  }
} 
```

然后你只需要调整最后一行`imageupload.php`：

```
<script language="javascript" type="text/javascript">window.top.stopImageUpload(<?php echo $result ? 'true' : 'false'; ?>, '<?php echo $_FILES['fileImage']['name'] ?>');</script> 
```

*注意：如果您启用了允许`<?= ?>`阻止的选项，您可以使上面的代码看起来更好：*

```
<script language="javascript" type="text/javascript">window.top.stopImageUpload(<?= $result ? 'true' : 'false'; ?>, <?= $_FILES['fileImage']['name'] ?>);</script> 
```

# javascript - $.getJSON 没有做任何事情

> ID：10376721
> 
> 赞同：0
> 
> 时间：2012-04-29T22:53:03.673
> 
> 标签：javascript, jquery, json

我不确定为什么，但似乎当我在调用另一个 getJson 之后调用 $.getJSON 时，什么都没有发生。这是代码：

```
getWeather();

function getWeather() {
    $.getJSON("http://where.yahooapis.com/geocode?q=" + lat + ",+" + lon + "&gflags=R&flags=J", function(data){
        zipCode = data.ResultSet.Results[0].postal;
        WOEID = data.ResultSet.Results[0].woeid;
        getYahooWeather(WOEID);         
    });
}

function getYahooWeather(x) {
    var query = escape('select item from weather.forecast where woeid="'+x+'"');
    var url = "http://query.yahooapis.com/v1/public/yql?q=" + query + "&format=json&callback=c";
    console.log(url);

    $.getJSON(url, function(data2){
        console.log("hey");
    });
} 
```

我的问题是，我对这些 $.getJSON 调用做错了吗？

非常感谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T23:05:34.423

您已经指定回调应该是`c`函数，所以声明它：

```
function getYahooWeather(x) {
  var query = escape('select item from weather.forecast where woeid="'+x+'"');
  var url = "http://query.yahooapis.com/v1/public/yql?q=" + query + "&format=json&callback=c";
  console.log(url);

  $.getJSON(url);
}

function c(data2) {
  console.log("hey");
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:56:32.237

您的请求在当前域之外。您**不能**提出外部请求，它受到跨域策略的限制。

此类请求并使用*jsonp*请求代替。这是一个让您入门的[指南。](http://djpate.com/2011/02/25/how-to-make-cross-domain-ajax-request-using-jsonp-jquery/)

# javascript - 显示来自多维数组的信息？

> ID：10376723
> 
> 赞同：1
> 
> 时间：2012-04-29T22:53:41.890
> 
> 标签：javascript, jquery, arrays, multidimensional-array, push

我有一个多维数组的新输入。已定义的原始输入在调用时会正确显示，但新输入写为“未定义”。我认为它将新输入识别为变量。你如何让它们显示为字符串？

```
var original = new Array(); //this is the array
function input(title, artist, ddate, genre, picsrc) {
    this.Title = title;
    this.Artist = artist;
    this.Ddate = parseInt(parseFloat(ddate));
    this.Genre = genre;
    this.Picsrc = picsrc;
}
original[0] = {title:"Hope II", artist:"Gustav Klimt", ddate:1907, genre:"Art Nouveau", picsrc:"gustav.jpg"}; //and so on 
```

添加到数组中的值取自表单。

```
function addit(form) {
G = form.Title.value //as a test

original[original.length++] =  new input(form.Title.value, form.Artist.value, form.Ddate.value, form.Genre.value, form.Picsrc.value)

alert("your entry has been added")
alert(G) //value shows up in the alert
} 
```

但是当它在这个函数中被回调时：

```
$("#info").html(original[currentrecord]["title"]+"<br /><h2>"+original[currentrecord]["artist"]+"</h2>"+original[currentrecord]["ddate"]+"<br />"+original[currentrecord]["genre"]); 
```

一切都被写成“未定义”。我假设数据已成功添加到数组中，但可能格式不正确？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:01:27.577

我更喜欢使用点表示法，但这不是必需的。

真正的问题是：JavaScript 是区分大小写的。

我会这样做：

```
original[currentrecord].Title
original[currentrecord].Artist 
```

等等...

在您的代码中的一个地方，您使用全小写（初始化 original[0] 时），但在构造函数中，您使用大写作为第一个字母。

# c# - 带有单元测试的 C# IDE（如 Java 的 Eclipse 和 assertEquals( ... ) 等）

> ID：10376724
> 
> 赞同：2
> 
> 时间：2012-04-29T22:53:47.423
> 
> 标签：c#, unit-testing, ide

我想试驾 C#，我看过几篇关于 C# 的免费 IDE（包括 MonoDevelop）的帖子。

我还没有看到有关 IDE 的单元测试功能的信息。我一直在用 Java 编写代码，并且依赖 Eclipse 的单元测试（assertEquals( ... )) 等）来开发我的桌面代码（我知道 Eclipse 不是在 Java 中进行单元测试的唯一方法，但它做得很好）。

C# 的任何 IDE 是否有类似的功能？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T22:55:22.347

不能说我自己使用过任何免费的 IDE，但是根据这篇[博](http://www.dijksterhuis.org/using-nunit-with-monodevelop/)文，MonoDevelop 非常支持[NUnit](http://nunit.org)。老实说，我希望大多数 IDE 都支持多个单元测试框架——当然，如果我正在开发一个单元测试框架，那么目标之一就是 IDE 集成。

将 NUnit 与 Visual Studio 的免费“Express”版本一起使用是可能的，但有些痛苦，因为它使用单独的 NUnit GUI 而不是作为集成运行器 - 但当然总比没有好。

（我个人通常使用专业版本的 Visual Studio，[ReSharper](http://jetbrains.com/resharper)和[NCrunch](http://www.ncrunch.net/)运行我的单元测试。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T23:03:29.270

有一个由 Microsoft 创建的[免费版本的 Visual Studio](http://www.microsoft.com/visualstudio/en-us/products/2010-editions/express)，最新的 beta[包括新的单元测试功能](http://www.hanselman.com/blog/FeaturesNOONENOTICEDInVisualStudio11ExpressBetaForWeb.aspx)，这些功能以前只在 Professional/Ultimate 版本中可用。

对于 Visual Studio 免费版中单元测试的限制，也有很多[变通方法。](http://tech.rofas.net/post/running-and-debugging-tests-with-visual-studio-express-edition.aspx)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T23:03:44.170

显然，SharpDevelop 有一个使用 MBUnit 和 Gallio 的 IDE测试[运行](http://www.icsharpcode.net/OpenSource/SD/)插件[。](http://wiki.sharpdevelop.net/InsideSharpDevelop.Samples-GallioAddin.ashx)第一个链接是一篇提到如何设置的文章。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-29T22:59:13.467

[SharpDevelop](http://www.icsharpcode.net/OpenSource/SD/)支持使用 NUnit 进行单元测试，当然也支持 C#。

# mysql - 如何解决 mysql 线程堆栈溢出？

> ID：10376725
> 
> 赞同：7
> 
> 时间：2012-04-29T22:54:15.780
> 
> 标签：mysql, linode

我在mysql上有一个存储过程。它在我的本地 MAMP 环境中运行，该过程运行良好，但是当我将其移动到 linode 服务器/主机时，它无法运行。我收到“线程堆栈溢出”错误。我尝试将线程堆栈从初始值 64K 向上提升。我将值更改为 128K，然后更改为 256K。但问题仍然存在。

我正在开发一个清晰的 ubuntu 512MB linode 服务器。我在我的 mysql/my.cnf 文件中运行 linode 的建议配置：

```
key_buffer = 16K
max_allowed_packet = 1M
thread_stack = 64K 
table_cache = 4
sort_buffer = 64K
net_buffer_length = 2K 
```

任何人都可以帮忙吗？你能建议不同的配置吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-05-06T23:31:13.403

我是个白痴。我将 thread_stack 重置为更高的数字，但我没有重新启动服务器。重新启动解决了问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-25T22:30:31.017

如果你使用的是 Ubuntu 14.04，你可以在这里增加你的 MySQL 线程堆栈：

`/etc/mysql/my.cnf`

并更改此值`thread_stack`，它可能具有这样的值，例如：

`thread_stack = 192K`

之后，您需要像这样重新启动 MySQL：

`sudo service mysql restart`

有关更多信息，请参阅[Ubuntu 14.04，MySQL 文档](https://help.ubuntu.com/14.04/serverguide/mysql.html)。

# svg - 如何缩放具有一些复杂路径定义的 SVG？

> ID：10376729
> 
> 赞同：19
> 
> 时间：2012-04-29T22:54:31.313
> 
> 标签：svg, scale

我有一个 SVG，其代码如下所示：

```
<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">
<svg width="150px" height="150px" preserveAspectRatio="xMinYMin meet" viewBox="0 0 150 155" version="1.1" xmlns="http://www.w3.org/2000/svg">
    <g id="g11" transform="matrix(1.25,0,0,-1.25,-100.0791,954.14501)">
        <g id="g3186" transform="translate(6.3490095,-13.703287)">
            <path d="..."></path>
            <path d="..."></path>
            <path d="..."></path>
            <path d="..."></path>
        </g>
    </g>
</svg> 
```

SVG 的“原始”尺寸生成的图像是 300 像素 x 310 像素。我想将图像作为一个整体进行缩放，比如说 50%。我尝试了多种方法来缩放图像，但我完成的最好的方法是将原始图像简单地剪辑或“裁剪”到原始尺寸的 50% 的区域。

使用preserveAspectRatio、设置viewbox、尝试使用transform="scale(0.5")等都没有奏效。我想做的就是将原始尺寸缩放 50%。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-30T10:51:52.020

`transform="scale(0.5)"`绝对应该工作。你可能做错了什么。

尝试`g11`用另一个`g`包裹`transform="scale(0.5)"`并删除`preserveAspectRatio`and`viewBox`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-06-13T09:00:33.250

这是我如何做的一个例子

```
<!DOCTYPE html>
    <meta charset="utf-8">
    <html>
    <head>
        <script src="http://d3js.org/d3.v3.min.js"></script>
    </head>
    <body>
    <!-- this came from Open Clip Art http://openclipart.org/tags/svg 
         I just took the bits inside the g tag and gave them an id -->
    <svg xmlns:xlink="http://www.w3.org/1999/xlink" >
        <defs>
            <g id="factory2">
                <g id="layer1" transform="translate(-190.12 -497.04)">
                    <path id="path3019" d="m260.18 638.49c-12.375-0.3028-33.202-0.51166-    46.283-0.46413l-23.783 0.0864 0.54057-2.5363c0.29731-1.3949 0.72336-10.785 0.94678-20.867 0.22343-10.082 0.61582-18.541 0.87198-18.797 0.6619-0.66189 5.5186 2.3677 12.539 7.8218l6.0422 4.6941 2.6179-4.6941c1.4398-2.5818 3.2323-5.8073 3.9833-7.1678 0.75098-1.3605 1.8059-2.6205 2.3442-2.7999 0.53833-0.17944 3.4031 1.6087 6.3662 3.9737 14.183 11.32 13.44 10.876 15.062 9.0051 0.81257-0.93784 2.5493-4.5177 3.8593-7.9552 1.3101-3.4375 2.6092-6.2494 2.887-6.2486 0.2778 0.00077 4.2211 3.6008 8.7629 8s8.6861 7.9986 9.2095 7.9986c1.661 0 5.5112-4.8335 7.5569-9.4868 1.0867-2.4718 2.2704-4.4985 2.6305-4.5037 0.36009-0.005 4.9112 4.2194 10.114 9.3881l9.4588 9.3976-0.36231 12.268c-0.19928 6.7473-0.57659 12.482-0.83847 12.744-0.71531 0.7153-9.6348 0.75231-34.526 0.14325zm-53.812-3.6334c-0.72187-0.28887-1.5844-0.25335-1.9167 0.0789-0.33229 0.33229 0.25834 0.56864 1.3125 0.52522 1.165-0.048 1.4019-0.28494 0.60417-0.60416zm52.618-13.034c0.27612-3.8066 0.0559-4.2797-2.2628-4.8616-1.4128-0.35458-4.5879-0.34189-7.0559 0.0282-4.4272 0.66389-4.4872 0.72466-4.4872 4.5421 0 4.3193 0.69024 4.6694 9 4.5649l4.5-0.0566 0.30588-4.2169zm-34.556 2.4532c-0.1375-0.40496-0.25-2.3113-0.25-4.2363v-3.5h-13v7.8954l5.25 0.37628c6.7165 0.48138 8.3091 0.37478 8-0.53546zm17.25-3.2363v-4l-6.75-0.29569-6.75-0.29569v3.879c0 2.1335 0.31903 4.1981 0.70896 4.588 0.38993 0.38992 3.4274 0.57742 6.75 0.41666l6.041-0.29229v-4zm32.5 0.5v-4h-12v8h12v-4zm16.267 0.75c0.27194-1.7875 0.29645-3.5875 0.0545-4-0.24197-0.4125-3.3384-0.75-6.8809-0.75h-6.441v8h12.773l0.49443-3.25zm-82.457-1.5-0.31037-3.75h-5.7837c-4.0517 0-6.0685-0.44918-6.7347-1.5-0.67184-1.0597-0.95549 0.0411-0.96631 3.75l-0.0153 5.25h14.121l-0.31036-3.75zm13.69-19.25c-0.33992-0.55-1.068-1-1.618-1s-0.72189 0.45-0.38197 1 1.068 1 1.618 1 0.72189-0.45 0.38197-1zm-13.665-0.75c-1.26-1.4949-1.4649-9.1853-1.405-52.75l0.0701-51 3.3219 0.15527c1.8271 0.0854 3.5772 0.4105 3.8891 0.72245 0.31195 0.31195 0.73146 10.142 0.93225 21.845 0.2008 11.703 0.79871 30.278 1.3287 41.278 1.2527 26.001 0.96626 31.906-1.8072 37.25-2.3841 4.5942-4.0201 5.2403-6.33 2.5zm27.665-1.9051c-1.1986-2.8686-1.388-5.8273-0.88023-13.75 0.35583-5.5522 0.69953-20.895 0.76378-34.095 0.12983-26.675 0.48916-28.507 4.9502-25.245 1.5369 1.1238 1.7803 4.6464 2.3358 33.807 0.55628 29.202 0.44258 33.086-1.1049 37.745-2.0404 6.1432-3.9393 6.6248-6.0646 1.5383z"/>
                </g>
            </g>
        </defs>
    </svg>

    <script type="text/javascript">
        var svg = d3.select("svg") .append("g");

        var nodes = [{ name: "1", type: 'factory2' }];

        var node = svg.selectAll("node")
                .data(nodes)
                .enter()
                .append("g")
                .attr({
                    dx:50, dy:50, width:50, height:50,
                    // here's the magic
                    transform:"scale(0.5)"
                });

        node.append("use")
                .attr({
                    "xlink:href": "#factory2"
                });

    </script>
    </body>
    </html> 
```

# facebook - 如何从 Facebook 的图形 api 中回显某些内容？

> ID：10376730
> 
> 赞同：0
> 
> 时间：2012-04-29T22:54:32.410
> 
> 标签：facebook, facebook-graph-api

我想在我的网站中显示来自： [https ://graph.facebook.com/comments/?ids=http://lujanventas.com/test.php 的内容。](https://graph.facebook.com/comments/?ids=http://lujanventas.com/test.php)

除了 AJAX 调用，我还能怎么做？没有JS可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:59:19.700

您可以创建一个服务器端脚本来读取文件的内容并回显它

这是 php 中此类脚本的示例：

```
 $ids = "http://lujanventas.com/test.php";
 $url = "https://graph.facebook.com/comments/?ids=".urlencode($ids);
 $data = json_decode(file_get_contents($url),true);
 foreach($data[$ids]["comments"]["data"] as $comment){
     echo $comment["message"]."<br /><br />";
 } 
```

# c++ - 从高度编码的 RGB 值

> ID：10376731
> 
> 赞同：2
> 
> 时间：2012-04-29T22:54:43.713
> 
> 标签：c++, colors, rgb

我有一个程序，我需要将高度表示为 RGBT（浮点数）值。那是：

```
[R, G, B, T (Transperancy)] -> [0.0f-1.0f, 0.0f-1.0f, 0.0f-1.0f, 0.0f-1.0f] 
```

从概念上讲，我知道您可以通过最大和最小高度之间的基本高度进行编码。我什至有一些灰度高度编码的代码：

```
double Heightmin=0;
double Heightmax=23;

osg::Vec4 getColourFromHeight(double height, double alpha=1.0) {

    double r=(height-Heightmin)/Heightmax;
    double b=(height-Heightmin)/Heightmax;
    double g=(height-Heightmin)/Heightmax;
    return osg::Vec4(r, g, b, 1.0);
} 
```

我想知道的是，是否有一种比使用 R 和 G 更复杂的算法，如下所示：

```
double r=(height-Heightmin)/Heightmax;
double b=0.0f;
double g=(Heightmax- height + Heightmin)/Heightmax; 
```

（也就是说，G 是 R 的倒置形式，所以在低值时它会显得更绿，而在高值时它会显得更红。

我希望能够利用 RG 和 B 来提供逼真的高度编码景观：

![在此处输入图像描述](../Images/4ef4f3d0a313a11f65b05556f12bbb6c.png)

这是一张 72dpi RGB 高度编码的地形图的图像。我希望能够实现类似的目标。是否有一种简单的算法可以根据最小和最大高度创建 RGB 值？

谢谢你的帮助。

本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:02:52.883

你只需要想出一个你喜欢的合适的颜色渐变，然后把它放在一个查找表（或类似的）中。

那么您所需要的就是将范围 -> 中的值映射`min_height`到`max_height`范围`0`->中的东西`255`（例如）。

当然，您可能会发现可以表示为数学函数的颜色渐变，但这不太通用。

# javascript - Raphael 对象无法正确沿路径设置动画

> ID：10376732
> 
> 赞同：1
> 
> 时间：2012-04-29T22:54:57.660
> 
> 标签：javascript, jquery, animation, raphael, geometry

所以我有一个绘制路径的函数。我想沿着这些不同的路径为一些圆圈设置动画，而这些圆圈从正确的位置开始（在路径的第一个点），当我尝试沿着路径为它们设置动画时，它们会变得混乱。我究竟做错了什么？

[您可以在jsfiddle](http://jsfiddle.net/VEdwG/1/)或此处查看我的代码：

```
function commerce() {
    Raphael("commercebounce", function () {
        var r = this;
        function pathfade() {
        var a = .1,
            b = .4, 
            c = [0, 2], 
            d = [50, 300], 
            e = [150, 800], 
            fz = [150, 350], 
            g = d[0] + Math.random() * (d[1] - d[0]), 
            h = e[0] + Math.random() * (e[1] - e[0]), 
            i = fz[0] + Math.random() * (fz[1] - fz[0]),
            colours = ["215,10,45", "115,115,115"],
            stroke = ["", "- "];
            opacity = a + Math.random() * (b - a), colour = "rgb(" + colours[Math.round(Math.random())] + ")", strokeW = c[Math.round(Math.random())];
            j = r.path("M 0 " + g + " C 0 " + g + " " + (h - 100) + " " + g + " " + h + " 400 M " + h + " 400 C " + h + " 400 " + (h + 100) + " " + g + " 960 " + i).attr({stroke: colour,"stroke-dasharray": stroke[Math.round(Math.random())],"stroke-opacity": .1});
            return j
            }   
        ja = pathfade();
        jb = pathfade();
        jc = pathfade();
        jd = pathfade();
        je = pathfade();
        jf = pathfade();
        jg = pathfade();
        jh = pathfade();
        ji = pathfade();
        jj = pathfade();
        function bowlball(x) {
            leng = x.getTotalLength(),
            a = .1,
            b = .4,
            c = [0, 2],
            opacity = a + Math.random() * (b - a),
            strokeW = c[Math.round(Math.random())],
            colours = ["215,10,45", "115,115,115"],
            colour = "rgb(" + colours[Math.round(Math.random())] + ")";
            h = r.circle(0, 0, 7, 7).attr({"stroke-width": this.strokeW,stroke: colour,"stroke-opacity": this.opacity,fill: "none","fill-opacity": 0}).onAnimation(function() {
            var t01 = this.attr("transform")})
            r.customAttributes.along1 = function (v) {
                var point = x.getPointAtLength(v * leng);
                return {
                    transform: "t01" + [point.x, point.y] + "r" + point.alpha
                   }
            };
            return h.attr({along1:0}), h;         
        }
        ha = bowlball(ja);
        hb = bowlball(jb);
        hc = bowlball(jc);
        hd = bowlball(jd);
        he = bowlball(je);
        hf = bowlball(jf);
        hg = bowlball(jg);
        hh = bowlball(jh);
        hi = bowlball(ji);
        hj = bowlball(jj);
        ha.animate({along1:.02},5000); //animation fail
    }); 
}; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-25T10:28:04.603

这是一个老问题，但我猜这是因为您在转换字符串中使用了小写的“t”，这意味着它是一个相对转换。但是 getPointAtLength 不返回绝对坐标吗？如果是这样，您应该使用大写“T”将元素移动到那些绝对坐标

# jquery - 用 FuncUnit 测试两个页面的交互

> ID：10376733
> 
> 赞同：0
> 
> 时间：2012-04-29T22:55:11.577
> 
> 标签：jquery, testing, funcunit

我想测试两个页面的交互（由不同的用户打开，但是没有cookies）。我可以用 FuncUnit 做到这一点吗？

显然调用`S.open()`两次不会导致*两个*页面都打开。我也试过`S.sub()`，但没有定义。

如果 FuncUnit 做不到，有没有轻量级的免费测试工具可以做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T18:16:08.907

解决方案是将两个页面放在[框架](http://www.w3schools.com/tags/tag_frameset.asp)中，并在查询中使用[上下文参数。](http://javascriptmvc.com/docs.html#!funcunit.finding)

# algorithm - 大 Ө 符号到底代表什么？

> ID：10376740
> 
> 赞同：202
> 
> 时间：2012-04-29T22:56:19.830
> 
> 标签：algorithm, computer-science, big-o, notation, big-theta

我对大 O、大 Omega 和大 Theta 符号之间的区别感到非常困惑。

我知道大 O 是上限，大 Omega 是下限，但是 big Ө (theta) 到底代表什么？

我读过这意味着***紧密绑定***，但这是什么意思？

* * *

## 回答 #1

> 赞同：365
> 
> 时间：2012-09-09T12:09:32.743

首先让我们了解什么是大 O、大 Theta 和大 Omega。它们都是函数[集](http://en.wikipedia.org/wiki/Set_%28mathematics%29)。

大 O 给出[渐近上界](http://en.wikipedia.org/wiki/Asymptote)，而大欧米茄给出下界。Big Theta 两者兼而有之。

一切都是`Ө(f(n))`，`O(f(n))`但不是相反。 如果它同时在 in和 in中
`T(n)`，则称在in 中。在集合术语中，**是****和****的****[交集](http://en.wikipedia.org/wiki/Set_%28mathematics%29#Intersections)**`Ө(f(n))``O(f(n))``Omega(f(n))`
**`Ө(f(n))``O(f(n))``Omega(f(n))`**

例如，归并排序最坏的情况是两者`O(n*log(n))`和`Omega(n*log(n))`- 因此也是`Ө(n*log(n))`，但它也是`O(n^2)`，因为`n^2`它比它渐近地“更大”。然而，它**不是** `Ө(n^2)`，因为算法不是`Omega(n^2)`。

### 更深入的数学解释

`O(n)`是渐近上界。如果`T(n)`是`O(f(n))`，则表示从某一个开始`n0`，有一个常数`C`这样的`T(n) <= C * f(n)`。另一方面，大欧米茄说有一个常数`C2`使得`T(n) >= C2 * f(n))`)。

### 不要混淆！

不要与最坏、最好和平均情况分析相混淆：所有三个（Omega、O、Theta）表示法都**与**算法的最佳、最坏和平均情况分析无关。这些中的每一个都可以应用于每个分析。

**我们通常使用它来分析算法的复杂性**（如上面的归并排序示例）。当我们说“算法 A 是`O(f(n))`”时，我们真正的意思是“在最坏¹情况分析下的算法复杂度是`O(f(n))`”——意思是——它缩放“相似”（或正式，不比）函数`f(n)`。

### 为什么我们关心算法的渐近界？

嗯，有很多原因，但我相信其中最重要的是：

1.  确定*确切的*复杂度函数要困难得多，因此我们在 big-O/big-Theta 符号上“妥协”，这些符号在理论上足够丰富。
2.  确切的操作数也*取决于平台*。例如，如果我们有一个包含 16 个数字的向量（列表）。需要多少操作？答案是：视情况而定。一些 CPU 允许向量加法，而另一些则不允许，因此答案在不同的实现和不同的机器之间有所不同，这是一个不受欢迎的属性。然而，大 O 符号在机器和实现之间更加稳定。

要演示此问题，请查看以下图表： ![在此处输入图像描述](../Images/0d43b09873344177c376030530ea166a.png)

很明显，它`f(n) = 2*n`比`f(n) = n`. 但差异并不像其他功能那么大。我们可以看到，它`f(n)=logn`迅速变得比其他功能低得多，并且`f(n) = n^2`迅速变得比其他功能高得多。
所以 - 由于上述原因，我们“忽略”了常数因子（图表示例中的 2*），并且只采用大 O 表示法。

在上面的示例中，`f(n)=n, f(n)=2*n`将同时在 in`O(n)`和 in `Omega(n)`- 中，因此也将在`Theta(n)`.
另一方面 -`f(n)=logn`将在`O(n)`（它比“更好” `f(n)=n`），但不会在`Omega(n)`- 因此也不会在`Theta(n)`.
对称地，`f(n)=n^2`将在`Omega(n)`，但不在`O(n)`，因此 - 也不是`Theta(n)`。

* * *

¹通常，但并非总是如此。当缺少分析类（最差、平均和最佳）时，我们的意思**是最坏的情况。**

* * *

## 回答 #2

> 赞同：101
> 
> 时间：2012-04-29T23:03:05.717

这意味着该算法在给定函数中既是大 O 又是大欧米茄。

例如，如果是`Ө(n)`，则有一些常数`k`，使您的函数（运行时，无论如何）大于`n*k`足够大`n`的 ，还有一些其他常数`K`，使您的函数小于`n*K`足够大的`n`。

换句话说，对于足够大`n`的 ，它被夹在两个线性函数 之间：

对于`k < K`并且`n`足够大，`n*k < f(n) < n*K`

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2012-09-12T00:46:21.707

**Theta(n)：**如果存在正常数且可以夹在和之间，则函数`f(n)`属于。即它给出了上限和下限。`Theta(g(n))``c1``c2``f(n)``c1(g(n))``c2(g(n))`

> *Theta(g(n)) = { f(n) : 存在正常数 c1,c2 和 n1 使得 0<=c1(g(n))<=f(n)<=c2(g(n))对于所有 n>=n1 }*

当我们说`f(n)=c2(g(n))`or`f(n)=c1(g(n))`它表示渐近紧界。

**O(n)：**它只给出上限（可能很紧也可能不紧）

> *O(g(n)) = { f(n) : 存在正常数 c 和 n1 使得 0<=f(n)<=cg(n) 对于所有 n>=n1}*

*例如*：边界`2*(n^2) = O(n^2)`是渐近紧的，而边界`2*n = O(n^2)`不是渐近紧的。

**o(n)：**它只给出上限（从不严格限制）

> O(n) 和 o(n) 之间的显着区别是对于所有 n>=n1，f(n) 小于 cg(n)，但不等于 O(n)。

*例如*：`2*n = o(n^2)`，但是`2*(n^2) != o(n^2)`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2019-04-02T10:24:01.290

我希望这是您可能希望在经典[CLRS](https://rads.stackoverflow.com/amzn/click/com/0262033844)中找到的内容（第 66 页）： [![在此处输入图像描述](../Images/d09308bf388bc69643ed5ffed8ab1ad4.png)](https://i.stack.imgur.com/nLm8w.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2018-10-16T16:15:15.687

## 大 Theta 符号：

没什么好惹的哥们！！

如果我们有一个正值函数 f(n) 并且 g(n) 接受一个正值参数 n 则 ϴ(g(n)) 定义为 {f(n):对于所有 n> 存在常数 c1,c2 和 n1 =n1}

其中 c1 g(n)<=f(n)<=c2 g(n)

## 举个例子：

让 f(n)=[![](../Images/98b861dff70171227a8280581da9e772.png)](https://i.stack.imgur.com/NmWqN.gif)

g(n)=[![](../Images/7b7bc1dca05d0930ef5da7d5881b9eb4.png)](https://i.stack.imgur.com/CIjOK.gif)

c1=5 和 c2=8 和 n1=1

在所有符号中，ϴ 符号给出了关于函数增长率的最佳直觉，因为它给了我们一个紧密的界限，不像 big-oh 和 big-omega 分别给出上限和下限。

ϴ 告诉我们 g(n) 尽可能接近 f(n)，g(n) 的增长率尽可能接近 f(n) 的增长率。

[![查看图像以获得更好的直觉](../Images/1d534d2febc20ce5728cfb6a1e3d14a2.png)](https://i.stack.imgur.com/OelP2.gif)

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-11-14T11:55:42.717

**首先是理论**

1.  大 O = 上限 O(n)

2.  Theta = 阶函数 - theta(n)

3.  Omega = Q 表示法（下限）Q(n)

## 为什么人们如此困惑？

在许多博客和书籍中，如何强调这一声明就像

“这是大 O(n^3)”等。

人们经常像天气一样混淆

O(n) == theta(n) == Q(n)

但值得记住的是，**它们只是名称为 O、Theta 和 Omega 的数学函数**

所以它们具有相同的多项式通式，

让，

f(n) = 2n4 + 100n2 + 10n + 50 那么，

g(n) = n4，所以 g(n) 是以函数为输入并返回具有最大幂的变量的函数，

> 相同的 f(n) 和 g(n) 用于以下所有解释

## 大 O(n) - 提供上限

大 O(n4) = 3n4，因为 3n4 > 2n4

**3n4 是 Big O(n4) 的值 就像 f(x) = 3x**

**n4**在这里扮演**x**的角色，所以，

用 x'so 替换 n4，Big O(x') = 2x'，现在我们都很高兴一般概念是

所以 0 ≤ f(n) ≤ **O(x')**

**O(x') = cg(n) = 3n4**

投入价值，

0 ≤ 2n4 + 100n2 + 10n + 50 ≤ 3n4

**3n4 是我们的上限**

## Big Omega(n) - 提供下限

Theta(n4) = cg(n) = 2n4 因为 2n4 ≤ 我们的示例 f(n)

**2n4 是 Theta(n4) 的值**

所以，0 ≤ cg(n) ≤ f(n)

0 ≤ 2n4 ≤ 2n4 + 100n2 + 10n + 50

**2n4 是我们的下限**

## Theta(n) - 提供紧界

计算得出天气下界与上界相似，

情况1）。上限类似于下限

```
if Upper Bound is Similar to Lower Bound, The Average Case is Similar

Example, 2n4 ≤ f(x) ≤ 2n4,
Then Theta(n) = 2n4 
```

案例2）。如果上界与下界不相似

```
In this case, Theta(n) is not fixed but Theta(n) is the set of functions with the same order of growth as g(n).

Example 2n4 ≤ f(x) ≤ 3n4, This is Our Default Case,
Then, Theta(n) = c'n4, is a set of functions with 2 ≤ c' ≤ 3 
```

希望这解释！

# api - Z3 Python API - 何时可用

> ID：10376741
> 
> 赞同：0
> 
> 时间：2012-04-29T22:56:30.193
> 
> 标签：api, z3

在[Z3-Python 教程](http://rise4fun.com/z3py/tutorialcontent/guide#h212)中，声明为了在本地使用 Z3 和 Python，需要使用 Z3 版本中的 Python 库。但是，我安装的最新版本（3.2）不包含这样的文件夹。我想这意味着该文件夹存在于 4.0 上。有谁知道什么时候发布？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:07:12.060

Z3 Python (Z3Py) 是 Z3 4.0 的一部分。它很快就会发布。如果您需要，我们可以向您发送预发布版本。

# c++ - 静态数组 VS。C++11 中的动态数组

> ID：10376743
> 
> 赞同：6
> 
> 时间：2012-04-29T22:56:41.400
> 
> 标签：c++, arrays, templates, c++11, move-semantics

我知道这是一个非常古老的辩论，在世界各地已经讨论过很多次。但是我目前在决定在特定情况下应该在静态数组和动态数组之间使用哪种方法而不是另一种方法时遇到了麻烦。实际上，我不会使用 C++11，我会使用静态数组。但我现在很困惑，因为两者可能有同等的好处。

第一个解决方案：

```
template<size_t N>
class Foo
{
    private:
        int array[N];

    public:
        // Some functions
} 
```

第二种解决方案：

```
template<size_t N>
class Foo
{
    private:
        int* array;

    public:
        // Some functions
} 
```

我不能碰巧选择，因为两者各有优势：

*   静态数组更快，我们根本不关心内存管理。
*   只要未分配内存，动态数组就不会加权。在那之后，它们不像静态数组那样好用。但是从 C++11 开始，我们可以从移动语义中获得很大的好处，而我们不能将其用于静态数组。

我不认为有一个好的解决方案，但我想得到一些建议，或者只是想知道你对这一切的看法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T15:52:39.523

我实际上不同意“这取决于”。永远不要使用选项 2。如果您想使用翻译时间常数，请始终使用选项 1 或 std::array。您列出的一个优点，即动态数组在分配之前没有任何重量，实际上是一个可怕的、巨大的缺点，需要重点指出。

**永远不要拥有具有多个构造阶段的对象**。永远不能。这应该是通过一些大纹身来记忆的规则。只是永远不要这样做。

当你的僵尸对象还不是很活跃，虽然也不是很死，管理它们的生命周期的复杂性会成倍增长。你必须检查每一种方法，无论它是完全活着的，还是只是假装活着。异常安全需要在您的析构函数中使用特殊情况。您现在添加了必须在 N 个不同位置检查的需求（#methods + dtor），而不是一个简单的构造和自动销毁。编译器不在乎你是否检查。而其他工程师不会有这个需求广播，所以他们可能会以不安全的方式调整你的代码，使用变量而不检查。现在所有这些方法都有多种行为，具体取决于对象的状态，因此对象的每个用户都需要知道会发生什么。 **僵尸会毁了你的**（编码）**生活。**

相反，如果您的程序中有两个不同的自然生命周期，请使用两个不同的对象。但这意味着你的程序中有两种不同的状态，所以你应该有一个状态机，一种状态只有一个对象，另一种状态有两者，由异步事件分隔。如果两点之间没有异步事件，如果它们都适合一个功能范围，那么分离是人为的，你应该做单相构造。

转换时间大小应转换为动态分配的唯一情况是当大小对于堆栈而言太大时。然后进入内存优化，并且应该始终使用内存和分析工具对其进行评估，以查看什么是最好的。选项 2 永远不会是最好的（它使用裸指针 - 所以我们再次失去了 RAII 和任何自动清理和管理，添加不变量并使代码更复杂并且容易被其他人破坏）。向量（如位掩码所建议的）将是适当的第一个想法，尽管您可能不喜欢及时的堆分配成本。其他选项可能是应用程序图像中的静态空间。但同样，只有在您确定您有内存限制并且从那里做什么应该由实际可衡量的需求来确定时，才应该考虑这些。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T22:59:45.343

两者都不使用。几乎在任何情况下都最好使用`std::vector`。在其他情况下，这在很大程度上取决于`std::vector`不足的原因，因此无法普遍回答！

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-30T00:33:21.783

> 我目前在决定在特定情况下应该使用哪个而不是另一个时遇到问题。

您需要逐个考虑您的选项以确定给定上下文的最佳解决方案 - 也就是说，无法进行概括。如果一个容器适用于所有场景，那么另一个容器就会过时。

如前所述，`std`在编写自己的实现之前考虑使用实现。

更多细节：

**固定长度**

*   注意你消耗了多少堆栈。
*   如果将其视为动态大小的容器，可能会消耗更多内存。
*   快速复制。

**可变长度**

*   重新分配和调整大小可能代价高昂。
*   可能会消耗比需要更多的内存。
*   快速移动。

* * *

更好的选择还需要您了解元素类型的创建、复制、分配等的复杂性。

如果您确实使用`std`实现，请记住实现可能会有所不同。

最后，您可以为这些类型创建一个容器，抽象实现细节并根据大小和上下文动态选择适当的数据成员——抽象通用接口背后的细节。这有时对于禁用功能或使某些操作（例如昂贵的副本）更加明显也很有用。

简而言之，您需要对类型和用法有很多了解，并衡量程序的几个方面，以确定特定场景的最佳容器类型。

# c - 有没有办法将 FILE* 的内容复制到文件描述符？

> ID：10376744
> 
> 赞同：0
> 
> 时间：2012-04-29T22:56:53.790
> 
> 标签：c, file, file-descriptor

我的意思是功能方面。我正在使用 fileno 将 FILE* 转换为 fd 并且它返回时没有任何错误，但是当我对 fileno 的返回值使用 pread 时，它给了我一个错误的文件描述符错误。IE：

```
FILE* fin;
FILE* fout;
int fd, result;
fd = open("path", O_RDWR);
// Do stuff with fin and fout
// fout is the file with all of the stuff I want to copy to the fd
fd = fileno(fout);
result = pread(fd, buf, size, offset); // Bad file descriptor--returns a 9 
```

我不知道是什么原因导致 pread 给我这个错误，这让我发疯了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:01:04.133

我的猜测是这`fout`不是一个有效的 FILE* 指针。你验证了吗？你检查过返回值`fileno`吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T18:04:08.213

你检查过退货`fileno()`吗？
[fileno() 手册页](http://pubs.opengroup.org/onlinepubs/7908799/xsh/fileno.html)

# web-services - 在 Amazon S3 上增长文件

> ID：10376745
> 
> 赞同：2
> 
> 时间：2012-04-29T22:57:02.553
> 
> 标签：web-services, amazon-s3, amazon-web-services

是否可以在亚马逊 s3 上拥有不断增长的文件？

也就是说，我可以上传一个我在上传开始时不知道最终大小的文件。这样我就可以开始以指定的偏移量将更多数据写入文件。

例如一次写入 1000 字节，然后在下一次调用中继续写入偏移量为 1001 的文件，这样下一个写入的字节就是文件的 1001 字节。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T23:42:12.197

[Amazon S3](http://aws.amazon.com/s3/)确实允许您通过[使用 Multipart Upload API 上传对象](http://docs.amazonwebservices.com/AmazonS3/latest/dev/uploadobjusingmpu.html)来做到这一点：

> 分段上传允许您将单个对象作为一组部分上传。每个部分都是对象数据的连续部分。您可以按任意顺序独立上传这些对象部分。如果任何部分传输失败，您可以重新传输该部分而不影响其他部分。上传对象的所有部分后，Amazon S3 会组装这些部分并创建对象。[...]

列出的优势之一正是针对您的用例，即***在您知道最终对象大小之前开始上传**- 您可以在创建对象时上传对象*。

[使用 REST API 进行分段上传](http://docs.amazonwebservices.com/AmazonS3/latest/dev/UsingRESTAPImpUpload.html)可以使用此功能，所有[AWS 开发工具包](http://aws.amazon.com/code)以及像[boto](https://github.com/boto/boto)（*为 Amazon Web Services 提供接口的 Python 包*）这样的第 3 方库也提供基于此 API 的分段上传支持。

# c# - 重复字符的字符串压缩

> ID：10376749
> 
> 赞同：2
> 
> 时间：2012-04-29T22:57:34.293
> 
> 标签：c#, string, compression

我有以下两个字符串。

```
uncompressed "(A(2),I(10),A,A,A,A(3),R,R,R,R,A,A)"
compressed "(A(2),I(10),3A,A(3),4R,2A)" 
```

忽略格式 A(n) 或 I(n) 中的任何条目，您可以看到，当我们找到任何连续重复的字符时，它会被该位置的单个条目和计数替换。

我知道必须有一种优雅的方式来做到这一点，但我一直想出看起来难看的嵌套循环。

字符串中的数据来自 ISO8211 文件格式，并标识要应用于子字段中数据的格式。

我确信这可以用一行 linq 来完成，但我没有想法（今晚。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:32:10.773

该技术称为[运行长度编码](http://en.wikipedia.org/wiki/Run-length_encoding)。

这是一个使用 Python 的示例：

```
from itertools import groupby
uncompressed = "(A(2),I(10),A,A,A,A(3),R,R,R,R,A,A)"
counted = [(k, len(list(g))) for k, g in groupby(uncompressed.split(','))]
compressed = ','.join(k if cnt==1 else str(cnt)+k for k, cnt in counted) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:30:30.197

好吧，不完全是一行。这将做到：

```
string str = "(A(2),I(10),A,A,A,A(3),R,R,R,R,A,A)";

string prev = null;
int cnt = 0;
string result =
  "(" + String.Join(",",
  (str.TrimStart('(').TrimEnd(')') + ",").Split(',').Select(x => {
    if (x == prev) {
      cnt++;
      return null;
    } else {
      string temp = cnt > 1 ? cnt.ToString() + prev : prev;
      prev = x;
      cnt = 1;
      return temp;
    }
  }).Where(x => x != null)
) + ")"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T23:31:58.600

这是一种使用 LINQ 的方法`GroupBy`：

```
static string RLE(string s) {
    s = s.Substring(1, s.Length - 2);

    char? l = null;
    int i = 0;

    return "(" + string.Join(",", s.Split(',').GroupBy(c => {
        if(c.Length != 1) {
            i++;
            return i++;
        }

        if(c[0] == l) {
            return i;
        }

        l = c[0];
        return ++i;
    }).Select(x => (x.Count() > 1 ? x.Count().ToString() : string.Empty) + x.First())) + ")";
} 
```

# java - 在 JSF-2.0 中使用技术 JSP（而不是 XHTML）有什么缺点吗？

> ID：10376751
> 
> 赞同：1
> 
> 时间：2012-04-29T22:58:11.883
> 
> 标签：java, jsp, jsf, jsf-2, facelets

我曾经使用 JSP 作为视图技术。但是对于 JSF-2.0，新的推动力是让开发人员使用 Facelets 作为他们的模板技术。但这是否是一个严重的问题？如果我继续将 JSP 用于 JSF 中的视图，我会失去什么吗？究竟比这项技术更好？XHTML 和JSP 的工作有什么根本区别吗？如果有人能回答我将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T23:09:23.063

新的视图范围和 Facelets 的包含是 JSF 的主要改进以及支持 ajax 和注释。该技术是 JSF 2.0 中一个非常重要且强大的属性。所以我不建议在没有必要的情况下忽略它。

JSP 不鼓励使用 JSF 2.0，因为 Facelets 为开发用户界面提供了比传统 JSP 更清晰和灵活的机制。由于几个基本原因，Facelets 要好得多：

*   Facelets 标记不需要在标记库描述符文件 (TLD) 中声明。
*   标签中的属性是动态的，它们会自动映射到属性。这是 JSP 中不可用的主要功能之一是页面。
*   非常有用的页面模板功能。您定义一个模板，该模板为具有自定义范围的所有视图页面定义通用布局。
*   JSF 规范的 JSP 端是静止的。没有任何涉及新标签（复合组件、ajax、系统事件等）的新特性通过 JSP 公开。
*   此外，Facelets 的执行速度比 JSP 快。

总的来说，JSF 2.0 中的 JSP 作为视图技术被认为比较麻烦且难以维护

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:17:23.183

如果您使用 JSF，那么您真的应该使用 Facelets 而不是 JSP，因为 JSP 和 JSF 并不能很好地匹配。[主要问题是 JSP 世界对JSF 生命周期](http://docs.oracle.com/javaee/1.4/tutorial/doc/JSFIntro10.html)一无所知。您可以阅读[本文](http://onjava.com/pub/a/onjava/2004/06/09/jsf.html?page=1)以获取一些示例。Facelets 没有这些问题，因为它是专门为匹配 JSF 而创建的。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-04-29T23:01:16.623

xhtml和jsp之间没有选择。JSP 是一种服务器端模板机制，用于创建基于文本的响应以发送到浏览器。该文本响应可以是 xhtml、html、json、xml 或任何其他文本格式。因此，您可以使用 jsp 创建 xhtml - 您无需在它们之间进行选择。

仅仅因为您更改了扩展名并不意味着您正在做任何不同的事情。你只是在改变你所说的 - 没有特别的理由这样做，这很令人困惑。

# php - PostgreSQL 查询和 PHP 协助

> ID：10376752
> 
> 赞同：4
> 
> 时间：2012-04-29T22:58:38.740
> 
> 标签：php, sql, postgresql

在此小介绍的正下方，您将看到我正在使用的数据库表的布局，然后您将看到我的问题的详细信息。请提供尽可能多的指导。我仍在学习 PHP 和 SQL，我非常感谢您的帮助，因为我掌握了这个窍门。

表一（'bue'）——chp_cd rgn_no bgu_cd work_state

表二（'chapterassociation'）——chp_cd rgn_no bgu_cd work_state

数据库类型：PostgreSQL

我正在尝试对这两个表执行以下操作，我认为这是我必须做的一个 JOIN，但我对它并不是很熟悉，我正在努力学习。到目前为止，我已经创建了一个查询来从这些表中选择一组数据，这样查询就不会在整个数据库上运行。现在选择了数据，我正在尝试执行以下操作...

首先，表一（'bue'）的'work_state'应与表二（'chapterassociation'）的'work_state'进行核对。一旦找到匹配项，表一（'bue'）的'bgu_cd'应该与表二（'chapterassociation'）的'bgu_cd'相匹配。当找到两个匹配项时，它将始终指向第二个表中的唯一行（“章节关联”）。使用第二个表（'chapterassociation'）中的唯一行，'rgn_no'和'chp_cd'的值应该在第一个表（'bue'）中更新以匹配第二个表（'chapterassociation'）中的值。

我知道这可能要求很多，但如果有人可以帮助我构建一个查询来做到这一点，那就太好了！我真的很想学习，因为我不想永远对此一无所知。虽然我不确定我是否完全理解这里的 JOIN 和比较是如何工作的。

如果我是正确的，我将不得不将其放入单独的查询中，然后在 PHP 中。因此，例如，它可能是一些以最终查询的最终结果结尾的 IF ELSE 语句，它将表 2 中的值更新到表 1。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T23:16:25.450

JOIN 将为您进行两个级别的匹配...

```
 bue
INNER JOIN
  chapterassociation
    ON  bue.work_state = chapterassociation.work_state
    AND bue.bgu_cd     = chapterassociation.bgu_cd 
```

实际算法由 PostreSQL 决定。它可以是合并、使用哈希等，并且取决于索引和有关数据的其他统计信息。但是您不需要直接担心，SQL 会为您抽象出来。

然后你只需要一种机制来将数据从一个表写入另一个......

```
UPDATE
  bue
SET
  rgn_no = chapterassociation.rgn_no,
  chp_cd = chapterassociation.chp_cd
FROM
  chapterassociation
WHERE bue.work_state = chapterassociation.work_state
  AND bue.bgu_cd     = chapterassociation.bgu_cd 
```

# solr - Solrj 错误添加文档

> ID：10376753
> 
> 赞同：0
> 
> 时间：2012-04-29T22:58:47.310
> 
> 标签：solr, solrj

我正在按照 wiki 页面上给出的示例通过 solrj 索引页面。我已经尝试了各种方法来让它工作，但不知何故，我不断收到一个看起来像这样的错误：

**错误：[doc=1] 遇到非多值字段 id 的多个值：[1, 34d47c153efcf221]**

我的架构非常简单（仅用于测试）

```
    <field name="id" type="int" indexed="true" stored="true" required="true" />
    <field name="name" type="string_filename" indexed="true" stored="true" required="true"/>
    <field name="size" type="int" indexed="true" stored="true" required="true"/>
    <field name="created_at" type="date" indexed="true" stored="true"/>
    <field name="updated_at" type="date" indexed="true" stored="true"/>

```

代码如下所示：

```
String solrHost = "localhost";
String coreName = "files";
SolrServer solr = null;
try {
    solr = new CommonsHttpSolrServer("http://"+solrHost+":8983/solr/"+coreName);
} catch (Exception e) {
    System.out.println("ERROR:" + e.getMessage());
}

SolrInputDocument doc = new SolrInputDocument();
doc.addField("id", 1);
doc.addField("name", "testfile.pdf");
doc.addField("size", 34234234);

try{
    `solr.add(doc);
}    catch (Exception e) {
    System.out.println("ERROR adding docs: " + e.getMessage());
}

try{
    solr.commit();
} catch (Exception e) {
    System.out.println("commit FAiled.");
} 
```

希望这是我想念的微不足道的事情。任何帮助表示赞赏:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:54:07.497

经过大量阅读和实验。我发现了问题所在。为了启用重复数据删除，我需要在模式文件中添加另一个字段。所以像

```
<field name="signature" type="string" stored="true" indexed="true" multiValued="false" / > 
```

然后在我的 solrconfig 中，我需要在“signatureField”元素中设置这个字段“signature”：

```
 <updateRequestProcessorChain name="dedupe">
   <processor class="solr.processor.SignatureUpdateProcessorFactory">
     <bool name="enabled">true</bool>
     <str name="signatureField">signature</str>
     <bool name="overwriteDupes">false</bool>
     <str name="fields">id,name</str>
     <str name="signatureClass">solr.processor.Lookup3Signature</str>
   </processor>
   <processor class="solr.LogUpdateProcessorFactory" />
   <processor class="solr.RunUpdateProcessorFactory" /> 
```

感谢所有贡献的人！:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T10:22:33.533

看起来您正在尝试为 id 索引 2 个值，即 1 和 34d47c153efcf221。

# memory - Go：重用映射键时的大量内存使用

> ID：10376755
> 
> 赞同：2
> 
> 时间：2012-04-29T22:58:54.867
> 
> 标签：memory, map, go

作为我的*Go*教程的一部分，我正在编写简单的程序来计算多个文件中的单词。我有一些用于处理文件和创建告诉特定单词出现次数的*go 例程。*`map[string]int`然后将映射发送到减少例程，该例程将值聚合到单个映射。听起来很简单，看起来像是 Go 的完美（map-reduce）任务！

我有大约 10k 个文档，其中包含 160 万个唯一单词。我发现我的内存使用量在运行代码时快速且不断地增长，并且在大约一半的处理过程中内存不足（12GB 盒子，7GB 可用空间）。所以是的，这个小数据集使用了千兆字节！

试图找出问题所在，我发现reducer收集和聚合数据是罪魁祸首。代码如下：

```
func reduceWords (input chan map[string]int, output chan int) {
  total := make(map[string]int)
  for wordMap := range input {
    for w, c := range wordMap {
      total[w] += c
    }
  }      
  output <- len(total)
} 
```

如果我从上面的示例中删除地图，内存将保持在合理的范围内（几百兆字节）。我发现，复制一个字符串也解决了这个问题，即以下示例不会占用我的内存：

```
func reduceWords (input chan map[string]int, output chan int) {
  total := make(map[string]int)
  for wordMap := range input {
    for w, c := range wordMap {
      copyW := make([]byte, len(w)) // <-- will put a copy here!
      copy(copyW, w)
      total[string(copyW)] += c
    }
  }  
  output <- len(total)
} 
```

当我直接使用该值时，是否有可能`wordMap`在每次迭代后都没有破坏实例？（作为一名 C++ 程序员，我对 GC 的直觉有限。）这是理想的行为吗？难道我做错了什么？我应该对*Go*感到失望还是对自己感到失望？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:13:02.033

您的代码是什么样的，可以将文件转换为字符串？我会在那里寻找问题。如果您要将大块（可能是整个文件？）转换为字符串，然后将它们切成单词，那么如果您保存任何一个单词，您就会固定整个块。尝试将块保留为 []byte，将它们切成单词，然后将单词单独转换为字符串类型。

# ruby-on-rails - Google Maps 4 rails 中的样式化窗口

> ID：10376757
> 
> 赞同：0
> 
> 时间：2012-04-29T22:58:59.770
> 
> 标签：ruby-on-rails, ruby-on-rails-3, google-maps, gmaps4rails

我试图摆脱出现在地图信息窗口中的滚动条，但我看不到应该应用样式的元素。

使用 Google Maps 4 rails 渲染地图时，我应该应用哪个元素？我知道它们是 div，但没有特定的类或选择器，因此我无法选择窗口。

我从这样的部分渲染我的窗口：

```
marker.infowindow render_to_string(:partial => 'window_info', :locals => {:place => place}) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:25:23.133

您需要告诉它使用特定的类，这是我在我的应用程序中的操作方式：

```
<%= gmaps({"markers" => 
            {"data" => @json , 
             "options" => {"custom_infowindow_class" => "infobox", 
             "auto_adjust"=>false, "do_clustering"=>true}}} ) %> 
```

我想你只需要弄清楚如何通过

```
"options" => {"custom_infowindow_class" => "whatever" } 
```

进入你的地图初始化

然后您可以创建 css 类并应用您自己的样式

```
.whatever { 
  #whatever
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T19:28:21.417

根据[样式化 Google Maps InfoWindow](https://stackoverflow.com/questions/5634991/styling-google-maps-infowindow)，我猜您无法真正按照您想要的方式设置信息窗口的样式。您必须使用我在 gem 中内置的 InfoBox。

请参阅[此处的文档](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Markers)，部分`Custom infowindows`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-11T03:29:21.223

在 chrome 中检查 js 控制台时出现错误：**Object # < Marker > has no method 'infobox'**。这是一个线索。

根据**自定义 infowindows**部分中的[文档，](https://github.com/apneadiving/Google-Maps-for-Rails/wiki/Markers)**第 2 步**我们必须初始化一个 js 代码，但这对我不起作用。

 ****然后查看 main.coffee 中的宝石内部

```
 infobox:            -> false   #to let user use custom infoboxes 
```

设置为 true 无效

对我来说，诀窍是改变这条线

```
@infowindow = new InfoBox(@infobox(boxText)) 
```

在 app/assets/javascripts/gmaps4rails/google/objects/marker.coffee

到文档中提到的代码。

```
 @infowindow = new InfoBox(
      content: boxText
      disableAutoPan: false
      maxWidth: 0
      pixelOffset: new google.maps.Size(-140, 0)
      zIndex: null
      boxStyle:
        background: "url('http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.5/examples/tipbox.gif') no-repeat"
        opacity: 0.75
        width: "280px"

      closeBoxMargin: "10px 2px 2px 2px"
      closeBoxURL: "http://www.google.com/intl/en_us/mapfiles/close.gif"
      infoBoxClearance: new google.maps.Size(1, 1)
      isHidden: false
      pane: "floatPane"
      enableEventPropagation: false        

    ) 
```****

# asp.net-mvc-3 - 从 MVC3 中的表单获取数据？

> ID：10376759
> 
> 赞同：1
> 
> 时间：2012-04-29T22:59:08.870
> 
> 标签：asp.net-mvc-3, forms, ienumerable

我有这个视图用于呈现表单

```
@using ExpertApplication.ViewModels
@model IEnumerable<QuestionViewModel>
@{
    ViewBag.Title = "GetQuestions";
}
@using(Html.BeginForm("ProcessAnswers", "Home", FormMethod.Post))
{
    foreach(QuestionViewModel questionViewModel in Model)
    {
        Html.RenderPartial("QuestionPartialView", questionViewModel);
    }
<input type="submit" value="Send data"/>
}
}
<h2>GetQuestions</h2> 
```

和局部视图

```
@using ExpertApplication.ViewModels
@model QuestionViewModel
<div id="question">
    @Model.Text
    <br />
    <div id="answer">
        @foreach(var answer in Model.AnswerViewModels)
        {
            @(Model.IsMultiSelected
            ? Html.CheckBoxFor(a => answer.Checked)
            : Html.RadioButtonFor(a => answer.Checked, false))
            @Html.LabelFor(a => answer.Text)
            <br />
        }
    </div>
</div> 
```

我想从 From 获取数据

```
[HttpPost]
public ActionResult ProcessAnswers(IEnumerable<QuestionViewModel> answerForQuesiton)
{
//answerForQuestion always is null
} 
```

但参数 answerForQuesiton 为空。如何解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T00:06:01.770

您使用了错误的机制。您应该使用 EditorTemplates 而不是部分视图。编辑器模板知道如何处理集合并创建格式正确的名称属性，以便可以在回发时绑定它们。

[http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/](http://coding-in.net/asp-net-mvc-3-how-to-use-editortemplates/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:46:20.490

MVC 使用零索引名称绑定列表。不幸的是，由于这个原因，while`foreach`循环将创建包含正确值的输入，但它们不会创建使用正确名称的输入名称。因此，您不能使用绑定列表`foreach`

例如：

```
for (int i = 0; i< Model.Foo.Count(); i++)
{
    for (int j = 0; j < Model.Foo[i].Bar.Count(); j++)
    {
        @Html.TextBoxFor(m => m.Foo[i].Bar[j].myValue)
    }
} 
```

将创建名称为“Foo[1].Bar[2].myValue”的文本框并正确绑定。然而，

```
foreach (var foo in Model.Foo)
{
    foreach (var bar in foo.Bar)
    {
        @Html.TextBoxFor(m => bar.myVal);
    }   
} 
```

将创建具有与前一个循环完全相同的值的文本框，但它们都将具有“name="bar.myVal"，因此它们都不能绑定。

所以要解决你的问题：
1）你可以用 for 循环替换你的 foreach 循环。注意：这需要使用`IList`or`List`而不是`IEnumerable`
2) 您可以使用 EditorTemplates 自动为您应用正确的名称。

# c++ - 使用 std::map 评估表达式树

> ID：10376760
> 
> 赞同：0
> 
> 时间：2012-04-29T22:59:10.773
> 
> 标签：c++, tree, expression, infix-notation, postfix-notation

我正在使用抽象数据类型来评估与以前不同的方式相反的表达式树，我不确定如何准确地使用 map 函数。

好的，所以这个功能

```
int arithmetic_expression::evaluate_Expression(std::map< std::string, int > ipMap)
{
if (tree != NULL){
    return(tree->evaluate(ipMap));
}
else
    return(0);
} 
```

调用这个函数，在这个函数中我不知道要返回什么

```
int Tree::evaluate(std::map< std::string, int > ipMap){

//not sure what to put in return to evaluate the expression
if(NodeType==TYPE_OPERATOR)
{
    return())
} 
```

我以前用这种不同的方式这样做

```
int arithmetic_expression::evaluate_Expression()
{
if (topPtr != NULL)
    return(evaluateTree(topPtr));
else
{
    std::cout<< "Invalid expression: returning 0"<< std::endl;
    return(0);
}
}
}
}

int arithmetic_expression::evaluateTree(TreeNodePtr rootPtr)
{
if ((rootPtr->Op=="+") | (rootPtr->Op=="-")|(rootPtr->Op=="*")|(rootPtr->Op== "/")) 
{
    if (rootPtr->Op=="+")
        {
            return(evaluateTree(rootPtr->leftPtr)+ evaluateTree(rootPtr->rightPtr));
        }
    if (rootPtr->Op=="-")
    {
        return(evaluateTree(rootPtr->leftPtr)- evaluateTree(rootPtr->rightPtr));
    }
    if (rootPtr->Op=="*")
    {
        return(evaluateTree(rootPtr->leftPtr)* evaluateTree(rootPtr->rightPtr));
    }
    if (rootPtr->Op=="/")
    {
        return(evaluateTree(rootPtr->leftPtr)/ evaluateTree(rootPtr->rightPtr));
    }
}
else
{
    int Number;
    std::istringstream(rootPtr->Op) >> Number;
    return(Number);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T00:35:38.160

您确实需要一棵树来进行表达式评估，并`std::map`在内部使用一棵树。这并不意味着他们是天生的匹配。

特别是， a`std::map<std::string, int>`只能保存每个字符串的一次出现，并按这些字符串排序。您的表达式树可以包含多个相同的子表达式，并按表达式求值的算术规则排序。

# django - 在 Heroku 上为我的 Django 应用程序运行“syncdb”会引发错误

> ID：10376765
> 
> 赞同：1
> 
> 时间：2012-04-29T23:00:51.833
> 
> 标签：django, postgresql, heroku

我正在尝试在 Heroku 上创建一个 Django 应用程序，如 Heroku/Django Cedar 堆栈教程中所述。

我已经到了在 Heroku 上部署我的代码的地步，但是当我运行时`heroku run python appname/manage.py syncdb`，我得到以下跟踪：

```
Traceback (most recent call last):

File "planamo/manage.py", line 10, in <module>
    execute_from_command_line(sys.argv)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 443, in execute_from_command_line
    utility.execute()
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/__init__.py", line 382, in execute
    self.fetch_command(subcommand).run_from_argv(self.argv)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 196, in run_from_argv
    self.execute(*args, **options.__dict__)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 232, in execute
    output = self.handle(*args, **options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/base.py", line 371, in handle
    return self.handle_noargs(**options)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 57, in handle_noargs
    cursor = connection.cursor()
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/__init__.py", line 308, in cursor
    cursor = util.CursorWrapper(self._cursor(), self)
  File "/app/.heroku/venv/lib/python2.7/site-packages/django/db/backends/postgresql_psycopg2/base.py", line 177, in _cursor
    self.connection = Database.connect(**conn_params)
  File "/app/.heroku/venv/lib/python2.7/site-packages/psycopg2/__init__.py", line 179, in connect
    connection_factory=connection_factory, async=async)
psycopg2.OperationalError: could not connect to server: No such file or directory
    Is the server running locally and accepting
    connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"? 
```

我不知道问题是什么。这是怎么回事？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T20:19:50.130

回答了我自己的问题：你必须跑`heroku addons:add shared-database`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-05-21T08:23:51.557

我刚刚找到了导致此错误的另一个原因。Heroku 在 settings.py 文件的末尾注入代码。

**如果 settings.py 的最后一行不包含进位返回注入代码可能会被忽略**。

这是[django-social-auth 的 settings.py 文件的情况](https://github.com/omab/django-social-auth/blob/master/example/settings.py)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:05:51.547

您可以尝试在 settings.py 的数据库配置中添加：'HOST': '127.0.0.1'

# .net - 如何使相同的 .exe 与 .NET 2.0、3.5 和 4.0 一起使用？

> ID：10376766
> 
> 赞同：0
> 
> 时间：2012-04-29T23:01:00.907
> 
> 标签：.net, mono, version, backwards-compatibility, gmcs

我正在开发一个 .NET 2.0 应用程序，使用 Mono ( `gmcs -langversion:ISO-2`) 从 .cs 源创建 .exe。如果安装了 .NET Framework 2.0，它在 Windows 上可以正常工作，但如果只安装 3.5 或 4.0，它就无法正常工作。是否可以使相同的 .exe 文件与任何 .NET 框架 2.0、3.5、4.0（以及可能的未来版本）一起使用？据我所知，我没有使用在这些版本之间发生变化的任何 API。

[如何使生成的 EXE 在所有 .NET 框架版本中工作](https://stackoverflow.com/questions/7852332/how-to-make-the-generated-exe-work-in-all-net-framework-versions)？建议它应该开箱即用（但它不适用于我的 .exe）。它还说：

> 安装 Framework 4.0 后，您应该可以运行针对 2.0 以后的任何框架的应用程序。但是，您可能需要确保您的应用程序知道这一点。在 App.Config 中，您可以使用 SupportedRuntime 元素指定在未安装目标框架的情况下您的应用可以尝试使用的版本。

如何更改 App.Config？如何设置 SupportedRuntime 元素？是否可以在不在目标机器上创建更多文件的情况下做到这一点 - 即只需在 .exe 中设置一些内容以使其兼容？

# ruby - 具有匹配字符串的 ruby 元字符

> ID：10376772
> 
> 赞同：1
> 
> 时间：2012-04-29T23:02:15.137
> 
> 标签：ruby

我正在尝试创建一个输入两个字符串的程序。如果它们匹配，则返回它们包含相同长度 2 子字符串的位置数。

例如：string_match('xxcaazz', 'xxbaaz') → 3 "xx" "aa" "az" 我的问题是我应该使用哪些元字符来验证

这是我想出的

```
puts "enter word"
a = STDIN.gets
a.chomp!
puts"enter word"
b = STDIN.gets
b.chomp!
if a == /word/ or b == /word/ then 
  puts str.match(/{a} {b}/) + "equal"
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:36:11.967

更新答案：

（仍然尖刺，但更好）

```
first_word = 'xxcaazz'.split('')
second_word ='xxbaaz'.split('')

first_word_length = first_word.length
second_word_length = second_word.length

if [first_word_length, second_word_length].min == first_word_length
  inner_word = second_word
  outter_word = first_word
else
  inner_word = first_word
  outter_word = second_word
end

outter_word_length = outter_word.length - 2

word_matches = 0

(0..outter_word_length).each do |character|
  if "#{outter_word[character]}#{outter_word[character + 1]}" == "#{inner_word[character]}#{inner_word[character + 1]}"
    puts "#{outter_word[character]}#{outter_word[character + 1]}"
    word_matches += 1
  end
end

puts "Found #{word_matches} matches" 
```

原始尖峰：

这可能会让您有一个良好的开端（尽管它绝不是防弹的，只是一个快速的峰值）：

```
first_word = 'xxcaazz'.split('')
second_word ='xxbaaz'.split('')
first_word_length = first_word.length

(0..first_word_length).each do |character|
  if "#{second_word[character]}#{second_word[character + 1]}" == "#{first_word[character]}#{first_word[character + 1]}"
    puts "#{second_word[character]}#{second_word[character + 1]}"
  end
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:46:46.287

Unpack 'a2X' 表示提取 2 个字节，然后倒回 1 个字节：

```
first_word = 'xxcaazz'
second_word ='xxbaaz'
tokens = first_word.unpack 'a2X' * (first_word.length - 1)
# => ["xx", "xc", "ca", "aa", "az", "zz"]
tokens.flat_map{|m| second_word.scan m}
# => ["xx", "aa", "az"] 
```

# php - HTML表单将两个deminsion数组传递给PHP（我认为是特殊情况）

> ID：10376774
> 
> 赞同：3
> 
> 时间：2012-04-29T23:02:20.820
> 
> 标签：php, html, forms, multidimensional-array

这个 HTML 代码

```
<input name="Html_Array[][title]">
<input name="Html_Array[][amount]"> 
```

生成这个 PHP 数组

```
 [0] => Array
            (
                [title] => Seilpendel für Tragsysteme
            )

        [1] => Array
            (
                [amount] => 2
            )...So on 
```

**生成以下 PHP 数组的 HTML 代码将是什么**

```
 [0] => Array
            (
                [title] => Seilpendel für Tragsysteme
                [amount] => 1
            )

        [1] => Array
            (
                [title] => Article Tiel
                [amount] => 2
            ) 
```

数组的大小是未知的，所以我们不能将索引硬编码为 0,1,2 等

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:07:22.587

每次添加一组新的表单字段时都保留一个索引（使用 jQuery）：

```
window.count = 0;
$('#add-more-button').on('click', function() {
 $('<input name="html_array[' + window.count + '][title] />').appendTo('form:first');
 $('<input name="html_array[' + window.count + '][amount] />').appendTo('form:first');
 window.count++;
}); 
```

你应该得到正确的结构。

**如果您的意思是 PHP，请**编辑：****

 **```
// Assuming 0-indexed array
foreach($my_array as $key => $value) {
 echo '<input name="html_array[' . $key . '][title]" />';
 echo '<input name="html_array[' . $key . '][value]" />';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:06:18.473

我不认为您可以在 HTML 中创建确切的结构。只需合并它们：

```
$result = array();
$current = array();

foreach($input as $item) {
    $k = reset(keys($item));

    if(isset($current[$k])) {
        $result[] = $current;
        $current = array();
    }

    $current[$item] = $item[$k];
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T23:14:37.203

```
 <input name="Html_Array[0][title]">
 <input name="Html_Array[0][amount]">

 <input name="Html_Array[1][title]">
 <input name="Html_Array[1][amount]"> 
```

等等...

循环可用于生成所需的整数序列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T23:07:23.190

只需删除包裹第二维数组名称的引号

```
 <input name="Html_Array[][title]">
 <input name="Html_Array[][amount]"> 
```**

# dialog - 无法在 Chrome 扩展中获取背景页面的标签 ID

> ID：10376777
> 
> 赞同：0
> 
> 时间：2012-04-29T23:03:05.760
> 
> 标签：dialog, google-chrome-extension

我正在编写一个 Chrome 扩展程序，其中有一个类似对话框的窗口让用户输入用户名和密码，然后将其发送回后台页面以在 OAuth 2.0 中请求令牌。

要将用户名和密码从对话窗口发送回后台页面，我使用了以下代码（在对话窗口 .html 文件中）：

```
<script>
function usrpwd(){
    var up = {};
    up.usr = document.login_form.usr.value;
    up.pwd = document.login_form.pwd.value;
    chrome.tabs.sendRequest(window.dialogArguments,up);
    window.close();
}
</script> 
```

其中`window.dialogArguments`应该是扩展程序背景页面的标签 ID。

对话窗口在后台页面中打开

```
chrome.contextMenus.create({
  "title" : "show Modal Dialog",
  "contexts" : ["all", "page"], 
  "onclick": handle_click
});

function handle_click(){
    chrome.tabs.getSelected(null, function(tab){
        console.log('tab ', tab);   
        window.showModalDialog("login_popup.html", tab.id, "dialogHeight:300px; dialogLeft:200px;");
    });
} 
```

`tab.id`应该是背景页面的ID，它会被传递到对话窗口并分配给`window.dialogArguments`。

同样在后台页面中，用户名和密码由以下人员接收，

```
chrome.extension.onRequest.addListener(
    function(request){
        console.log("Username: ", request.usr);
        console.log("Username: ", request.pwd);
    }
); 
```

但是，`console.log('tab ', tab)`在`handle_click`函数内部始终显示 getSelected 选项卡是单击上下文菜单的选项卡，而不是背景页面。所以我想知道在这种情况下如何获取背景页面的标签ID。或者有没有其他更好的方式在对话窗口和背景页面之间进行通信？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T10:29:44.197

背景页面没有`tabId`，因为它们不是选项卡。

要将消息发送到后台页面，请使用[`chrome.extension.sendRequest`](http://code.google.com/chrome/extensions/extension.html#method-sendRequest)(`extension`而不是`tabs`)。

PS。[完整演示](https://stackoverflow.com/a/10341102/938089?popup-window-in-chrome-extension)

# objective-c - RestKit SerializationMimeType - 它是否使用相同的类型反序列化？

> ID：10376779
> 
> 赞同：0
> 
> 时间：2012-04-29T23:03:30.830
> 
> 标签：objective-c, ios, serialization, deserialization, restkit

当您`serializationMIMEType`为您的设置时`RKObjectManager`，它适用于对象的反序列化方式还是仅适用于它们的序列化方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T15:40:24.330

我认为它们会根据响应标头中的 mime 类型进行反序列化。目前无法对此进行测试，因此*认为*。

# javascript - 在 HTML 中执行动态表计算 - jQuery？

> ID：10376781
> 
> 赞同：1
> 
> 时间：2012-04-29T23:03:39.477
> 
> 标签：javascript, jquery

我有一个 HTML 表格，它允许用户直接或从选择菜单输入一些值。

```
<form action="" method="">
<table id="scores" width="358" border="1">
<tr>
<th colspan="5">Activities</th>
</tr>
<tr class="header">
<td width="104">Activity</td>
<td width="163">Rating</td>
<td width="69">Hours Per Week</td>
<td width="163">Weeks Per Year</td>
<td width="163">Average Hours Per Week</td>
</tr>
<tr>
<td class="title"><input type="text" value=""/></td>
<td><select name="rating">
<option value=""></option>
  <option value="High">High</option>
  <option value="Moderate">Moderate</option>
</select></td>
<td class="title"><input type="text" value=""/></td>
<td class="title"><input type="text" value=""/></td>
<td>&nbsp;</td>
</tr>
<tr>
<td class="title"><input type="text" value=""/></td>
<td><select name="rating">
<option value=""></option>
  <option value="High">High</option>
  <option value="Moderate">Moderate</option>
</select></td>
<td class="title"><input type="text" value=""/></td>
<td class="title"><input type="text" value=""/></td>
<td>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td class="title">Total High</td>
<td class="title" id="totalHigh"></td>
</tr>
<tr>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td>&nbsp;</td>
<td class="title">Total Moderate</td>
<td class="title" id="totalModerate"></td>
</tr>
<tr>
<td colspan="5"><button class="copy"  value="Set Value">Submit</button></td>
</tr>
</table> 
```

我需要执行如下几个计算：

1.  对于每一行，我需要计算“每周平均小时数”，即（每周小时数 * 每年周数）/52

2.  对于每一行，用户可以为评级选择“高”或“中等”。然后，我需要计算 Rating = "High" 的所有行和 Rating = "Moderate" 的所有行的 "Average Hours Per Week" 总数。

我今天大部分时间都在拔出我最后剩下的头发，试图使用我是新手的 jQuery 来做一些事情。我在以下位置设置了一个 jsfiddle：

[http://jsfiddle.net/tZPDr/](http://jsfiddle.net/tZPDr/)

它有一个简化版本的表格。非常感谢有关如何在用户键入时动态执行这两个计算的任何帮助。

非常感谢，史蒂夫

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:25:59.883

如果您想作为用户类型执行此操作，则需要绑定到`keypress`or `keydown`。

例子：

```
$('td.hours input').on('keypress', function() {
   //get  the values and calculate
}); 
```

然后选择您的字段并执行计算。你可以得到这样的值

例子：

```
var hrs = $('td.hours input').val(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:18:35.430

做了一些调整，看看[这个小提琴](http://jsfiddle.net/gopi1410/tZPDr/1/)。休息一下，你应该能够弄清楚。:)

# c# - 如何根据状态更改视图？

> ID：10376783
> 
> 赞同：1
> 
> 时间：2012-04-29T23:03:43.467
> 
> 标签：c#, silverlight, windows-phone-7, windows-phone-7.1

我现在正在使用 Silverlight 在 Windows Phone 7.1 中工作。在 WPF 中，我可以更改使用 DataTriggers 检查属性状态的视图，但在 WP7 中我意识到没有 DataTriggers。

为了更加具体，我正在创建一个时钟，其中有两个视图，模拟广告数字，我想根据属性值更改 contentControl 中的视图。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-01T02:02:48.767

一种选择是将 绑定`ContentControl`到模型中的属性。然后`Content`根据另一个属性的值更新 。

这是一个非常粗略的例子`CheckBox`，使用 a`ContentControl`和几个`UserControls`：

**XAML**

```
<StackPanel>
    <CheckBox Content="Swap Content" 
              IsChecked="{Binding Path=Swapper, Mode=TwoWay}" />
    <ContentControl Content="{Binding Path=ClockView}" />
</StackPanel> 
```

**代码背后**

```
public partial class MainPage : PhoneApplicationPage
{
    public MainPage()
    {
        InitializeComponent();
        this.DataContext = new MainModel();
    }
}

public class MainModel : INotifyPropertyChanged
{
    private bool _swapper;
    public bool Swapper
    {
        get { return _swapper; }
        set
        {
            _swapper = value;
            NotifyChanged( "Swapper" );
            SwapContent();
        }
    }

    private UserControl _clockView;
    public UserControl ClockView
    {
        get { return _clockView; }
        private set
        {
            _clockView = value;
            NotifyChanged( "ClockView" );
        }
    }

    public void SwapContent()
    {
        // AnalogClock and DigitalClock are UserControls
        if( ClockView == null || ClockView.GetType() == typeof( AnalogClock ) )
        {
            ClockView = new DigitalClock();
        }
        else
        {
            ClockView = new AnalogClock();
        }
    }

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyChanged( string propName )
    {
        if( PropertyChanged != null )
        {
            PropertyChanged( this, new PropertyChangedEventArgs( propName ) );
        }
    }
} 
```

# shell - Emacs shell：概述输入、输出、错误

> ID：10376786
> 
> 赞同：5
> 
> 时间：2012-04-29T23:04:50.723
> 
> 标签：shell, emacs

我正在寻找一种方法来在 shell/comint 中直观地区分用户键入的内容、输出的内容以及 stderr 的输出内容。有这种模式吗？

（可以肯定的是，我不感兴趣`ansi-color-for-comint-mode`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T01:37:07.557

运行异步进程的 Elisp 工具不能很好地支持区分 stderr 和 stdout 输出，因此目前 comint 不允许您区分两者。OTOH 的到来已经以不同的方式显示用户输入的文本（comint-highlight-input face）、提示（comint-highlight-prompt face）和过程输出（没有特殊的面，即默认）。

# assembly - 需要帮助理解 E8 asm 调用指令 x86

> ID：10376787
> 
> 赞同：17
> 
> 时间：2012-04-29T23:04:55.723
> 
> 标签：assembly, x86, disassembly

我需要帮助才能理解以下组装说明。在我看来，我正在调用 someUnknownValue += 20994A 的地址？

```
E8 32F6FFFF - call std::_Init_locks::operator=+20994A 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-04-29T23:31:40.583

无论您使用什么来获得反汇编，都试图提供帮助，方法是将调用的目标作为它知道的某个符号的偏移量 - 但鉴于偏移量如此之大，它可能会感到困惑。

调用的实际目标可以计算如下：

*   `E8`是`call`具有相对偏移量的 a。
*   在 32 位代码段中，偏移量指定为带符号的 32 位值。
*   该值采用 little-endian 字节顺序。
*   偏移量是从以下指令的地址开始测量的。

例如

```
<some address>       E8 32 F6 FF FF         call <somewhere>
<some address>+5     (next instruction) 
```

*   偏移量是`0xFFFFF632`。
*   解释为带符号的 32 位值，即`-0x9CE`.
*   该`call`指令为`<some address>`5 个字节长；下一条指令是在`<some address> + 5`。
*   所以调用的目标地址是`<some address> + 5 - 0x9CE`。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-07-13T06:25:01.217

如果您使用反汇编程序分析 PE 文件，反汇编程序可能给您错误的代码。大多数恶意软件编写者使用插入 E8 作为反反汇编技术。您可以验证 E8 上面的代码是否是跳转指令，跳转位置在 E8 之后。

# javascript - 如何验证客户端中的远程数据？

> ID：10376789
> 
> 赞同：0
> 
> 时间：2012-04-29T23:05:20.653
> 
> 标签：javascript, json, model-view-controller, mvvm, client-side

我正在设计一个客户端-服务器系统，我需要了解如何在客户端发送操作和请求时检查客户端的数据是否正确。在这种特殊情况下，我有一个浏览器和一个 javascript 客户端，它从 longpolling 获取数据并更新一系列绑定到 html 元素的对象，几乎是 MVVM。

步骤是这样的：

*   开始投票
*   获取完整数据
*   将 json 转换为 javascript 对象
*   更新与数据相关的每个 html 对象

用户可以随时触发事件并使用最新更新的本地模型。

*   用户触发事件
*   发送事件 + 完整数据（所有转换为 json 的对象）

问题是：它非常粗糙，可能很慢，对客户端和服务器来说很重。

我的目标是将数据传输减少到最低限度，并避免客户端损坏/攻击。我该怎么办？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T04:37:36.013

> My objectives are to reduce the data transfer to a minimum

Some things to try:

*   Reduce the number or frequency of client events that send an update
*   Send only what data has changed
*   Compress the data you send
*   bundle several events into a single request

> and avoid client side corruption/attacks.

*   To avoid attacks, you need to validate all input on the server. You should write your validator *without knowledge of the client*. You can assume nothing about what combination of data you can get--instead you should assume that someone is hand-crafting requests with a text editor and sending them with CURL.
*   To avoid corruption (really a "lost update"), use [conditional PUTs or POSTs](http://www.w3.org/1999/04/Editing/) with the `if-none-match` or `if-unmodified-since` headers.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T04:18:28.783

> 我的目标是将数据传输减少到最低限度

只发送已更改的数据，但 AJAX 中的最高成本是请求，因此除非您发送大量数据，否则可能不会产生任何明显的差异。

> 并避免客户端损坏/攻击

不可能的。您的代码在浏览器中运行，用户可以为所欲为。

# android - 从/向文件读取/写入位图的最快方法？

> ID：10376795
> 
> 赞同：6
> 
> 时间：2012-04-29T23:05:48.503
> 
> 标签：android, android-ndk

我目前正在将位图写入 png 文件并将它们读回位图。我正在寻找提高写作和阅读速度的方法。这些图像需要是无损的，因为我正在读回它们以进行编辑。

我看到性能最差的地方是实际的`BitmapFactory.decode(...)`。

***几个问题：***
1\. 使用 NDK 从文件读取/写入位图是否有更快的解决方案？
2\. 有没有更好的库可以更快地解码位图？
3\. 存储和读取位图的最佳方式是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-05-07T13:39:32.760

试图解决将图像读/写到文件的最佳/最快方法归结为使用普通的 old `BitmapFactory`. 我曾尝试使用 NDK 进行编码/解码，但这并没有什么不同。

本质上，使用的格式是无损 PNG，因为我不想在编辑图像后失去任何质量。

所有这一切的主要概念是我需要了解的是编码与解码需要多长时间。编码数在 300-600ms 以上，取决于图像大小，解码速度很快，大约 10-23ms。

在了解了所有内容之后，我刚刚创建了一个工作线程，我将需要编码的图像传递给它，让它在不影响用户体验的情况下完成工作。图像被缓存在内存中，以防在完全编码并保存到文件之前立即需要它。

# c++ - 对 C++ 堆栈使用感到困惑

> ID：10376808
> 
> 赞同：0
> 
> 时间：2012-04-29T23:08:22.907
> 
> 标签：c++, nodes, stack

我是这个网站的新手，我会尽我所能做出贡献。另外，请知道我从来没有在不花很多时间自己弄清楚的情况下提出问题。

因此，C++ 堆栈让我发疯。

我的问题：我应该将我的变量/值放在 Stack 功能块中的什么位置以实际使用它。我知道 Stacks 是一种 LIFO 数据结构，我已经阅读了无数将板堆叠在一起的例子，等等。

**看看这段代码：**

```
#include <iostream>
using namespace std;

const int MAX_SIZE = 100;

class StackOverFlowException 
{
    public:
        StackOverFlowException() 
        {
            cout << "Stack overflow" << endl;
        }
};

class StackUnderFlowException 
{
    public:
        StackUnderFlowException() 
        {
            cout << "Stack underflow" << endl;
        }
};

class ArrayStack 
{    
    private:        
        int data[MAX_SIZE];        
        int top;    
  public:        
      ArrayStack() 
      {            
          top = -1;        
    }        

    void Push(int element)
    {            
        if ( top >= MAX_SIZE ) 
            {            
                throw new StackOverFlowException();
            }                   
            data[++top] = element;        
    }        

    int Pop()
    {            
        if ( top == -1 ) 
            {            
                throw new StackUnderFlowException();            
            }            
            return data[top--];        
    }        

    int Top() 
    {            
        return data[top];        
    }

    int Size() 
    {
        return top + 1;
    }

    bool isEmpty() 
    {
        return ( top == -1 ) ? true : false;
    }
}; 
```

[ETC....]

这是基本的千篇一律....*假设我正在尝试对其进行调整以表达一个系统，其中最后的食品订单首先被踢出；变量是“食物”、“订单”等等。我在哪里将这些变量集成到上面的堆栈代码中！？！？？！*

请帮助我很困惑我要不分青红皂白地打东西

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T23:18:10.610

堆栈实现可以使用模板，以便您可以将任何您想要的东西放入堆栈（在合理范围内）。

例如，有一个类，封装了所有与订单相关的数据（这只是一个例子）：

```
class FoodOrder
{
    int orderNumber;
    time_t orderTime;

    // add more variables here
} 
```

然后，您的堆栈可能如下所示：

```
template<typename T> class Stack
{
    T data[MAX_SIZE];
    int top;

    void Push(T item);
    T Pop(void);

    // add methods
} 
```

然后，您可以拥有`Stack`任何您想要的物品：

```
Stack<int> stackOfInts;
Stack<std::string> stackOfStrings;
Stack<FoodOrder> stackOfOrders; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T23:26:11.503

如果您需要例外，请使用现有`std::stack`并包装它，例如像这样（注意您可以轻松地对其进行模板化）：

```
class protectedstack
{
private:
    std::stack<int> stack;
    const int myarbitraryupperlimit = 100;
public:
    void pop() 
    {
        if(stack.empty()) 
        {
            throw new StackUnderFlowException();            
        }
        stack.pop();
    }
    void push(const int& value)
    {
        if(stack.size()>=myarbitraryupperlimit)
        {
            throw new StackOverFlowException();
        }
        stack.push(value);
    }
    // Similar for top/empty/constructors/...
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T23:38:59.577

这一切都在`top`变量中。此变量指示哪个对象是当前顶部。当您 时`pop()`，`top`变量会减少——这意味着顶部现在比原来的位置低一个。当 you 时`push()`，它会增加 - 顶部现在比原来的位置高一倍。这个变量解释了堆栈的 LIFO 功能。

当然，您可以`template`使用该类使其与 a`FoodOrder`或其他任何东西一起使用。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-30T00:41:34.713

我不明白为什么会出现混乱。数据将进入，呃！，“数据”变量。

因此，您要么使用模板，使数据缓冲区能够容纳任何东西，要么将数据类型更改为您特别需要的类型。

例如，如果你有一个 FoodOrder 类，你可以这样做（我的 C++ 生锈了，但这基本上是它的要点）：

FoodOrder *data[MAX_SIZE];

您必须更改 push/pop 参数以相应地接受 FoodOrder 指针/引用，然后您就设置好了。

PS 关于使用 std::stack ——这可能是一个更好的解决方案，但没有回答他的具体问题。

PS 2 海报写道：“我是这个网站的新手，我会尽我所能做出贡献。”。真的吗？那么他为什么还没有选择一个答案呢？这闻起来更像是家庭作业吗？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-29T23:11:43.867

数据的类型，以及 Top 和 Pop 返回的数据类型，以及 Push 作为参数的数据类型，就是堆栈中包含的内容；这就是您要替换的任何类型的东西，无论您想把它变成一堆。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-29T23:15:55.690

这是一个堆栈：

![堆](../Images/12242b369a91b0c55b4de366707944fd.png)

这样想：在不移动其他书的情况下添加一本书的唯一方法是将其放在顶部：这就是这样`Push`做的。因此，通过调用`Push(Book1)`，您会将 Book1 放在堆的顶部。

同样，在不移动其他书的情况下拿走一本书的唯一方法是拿走最上面的那本书：这就是这样`Pop`做的。因此，通过调用`Pop()`，您将获得（并从堆栈中删除）堆栈顶部的任何一本书，在图像中是绿皮书。

我错过了什么还是这是你的问题？

# c# - 对 Web 处理程序的 Webpart 调用

> ID：10376811
> 
> 赞同：2
> 
> 时间：2012-04-29T23:08:45.810
> 
> 标签：c#, sharepoint, web-parts, ashx

我有一个 webpart 调用 ASP.NET 处理程序来完成自动完成功能。

```
ASHX File
    <%@ WebHandler Language="C#" Class="MyService.MyAutoComplete" CodeBehind="MyAutoComplete.ashx.cs" %> 
```

代码隐藏文件

```
namespace MyService
{
    /// <summary>
    /// Summary description for MyAutoComplete
    /// </summary>
    public class MyAutoComplete : IHttpHandler
    {
        public void ProcessRequest(HttpContext context)
        {
            var searchTerm = context.Request.QueryString["term"].ToString();

            context.Response.Clear();
            context.Response.ContentType = "application/json";

            var search = GetList();

            JavaScriptSerializer jsSerializer = new JavaScriptSerializer();
            string json = jsSerializer.Serialize(search);
            context.Response.Write(json);
            context.Response.End();
        }

    }
} 
```

这是我的 JQuery 调用

```
$(function () {
            $("#<%= txtSearchInput.ClientID %>").autocomplete({
                source: "/_Layouts/My Service/MyAutoComplete.ashx",
                minLength: 2,
                select: function (event, ui) {
                    $(this).val(ui.item.value);
                }
            });
        }); 
```

“我的服务”是 webpart 项目中的 SharePoint 布局文件夹。

当我通过 JQuery 进行调用时，它会引发以下错误“无法创建类型'MyService.MyAutoComplete'”

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:08:37.753

实现[IHttpHandler](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.aspx)时，您必须提供以下实现：

*   [ProcessRequest()](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.processrequest.aspx)方法（你做的），
*   IsReusable[属性](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.isreusable.aspx)（您没有）。

因此，`MyAutoComplete`无法实例化该类，因为它没有为所有`IHttpHandler`的抽象成员提供实现。

由于您的处理程序显然是无状态的，您可以`IsReusable`按如下方式实现：

```
public bool IsReusable
{
   get {
       // Handler is stateless, we can reuse the same instance
       // for multiple requests.
       return true;
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-01T14:50:49.560

似乎 SharePoint 组件有自己的识别组件的方式:)。谷歌搜索后，我找到了以下解决方案。

```
<%@ WebHandler Language="C#"  Class="MyService.MyAutoComplete,MyProject, Version=1.0.0.0, Culture=neutral, PublicKeyToken=87c41094797c589e" %> 
```

# iphone - Cocos2D 和 iPhone 的加速度计

> ID：10376817
> 
> 赞同：0
> 
> 时间：2012-04-29T23:09:34.630
> 
> 标签：iphone, objective-c, cocos2d-iphone, accelerometer

下午好！

今天我开始开发一个游戏，我遇到了麻烦。所以，首先我想说我没有开发游戏的经验......

所以，我在图层中有一个 CCSprite，我想在场景之间移动它并留有边距（顶部、底部、左侧和右侧）。

最小 X 应为 -0.8（使用加速度计的 X 轴），最大 8。最小 Y 应为 -1（Y 轴）或 Z 轴 0，最大 0（Y 轴）或 -1（Z 轴）。

好的，知道这一点，我尝试使用最小和最大空间和加速度计值之间的范围来做到这一点，但我没有让它垂直工作（iPhone 上的 Y 轴）。然后我在网络上得到了一个完成的代码，但是当我想将对象移回时这不起作用（对象只会移动）。

有人知道如何解决这个问题吗？

我的实际代码：

```
- (void)updatePosition:(ccTime)dt {
    CGSize winSize = [[CCDirector sharedDirector] winSize];

    float maxY = winSize.height - car.contentSize.height/2 - 20;
    float minY = car.contentSize.height/2 + 20;
    float newY = car.position.y + (carPointsPerSecY * dt);
    newY = MIN(MAX(newY, minY), maxY);

    float maxX = winSize.width - car.contentSize.width/2 - 40;
    float minX = car.contentSize.width/2 + 40;
    float newX = car.position.x + (carPointsPerSecX * dt);
    newX = MIN(MAX(newX, minX), maxX);

    car.position = ccp(newX, newY);
}    

- (void)accelerometer:(UIAccelerometer *)accelerometer didAccelerate:(UIAcceleration *)acceleration {
    float speedY = acceleration.y * 500;
    if(carPointsPerSecY < speedY) {
        carPointsPerSecY = MIN(carPointsPerSecY + 10, speedY);
    } else {
        carPointsPerSecY = MAX(carPointsPerSecY - 2, speedY);
    }

    float speedX = acceleration.x * 200;
    if(carPointsPerSecX < speedX) {
        carPointsPerSecX = MIN(carPointsPerSecX + 10, speedX);
    } else {
        carPointsPerSecX = MAX(carPointsPerSecX - 10, speedX);
    }

    NSLog(@"Acceleration: X (%f) - Y (%f) - Z (%f)", acceleration.x, acceleration.y, acceleration.z);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T03:19:57.310

我不确定我是否完全理解您想要什么，但我希望这可以帮助您实现最终目标：

```
-(void)updatePosition:(ccTime)dt {
    CGSize size = [[CCDirector sharedDirector] winSize];

    int margin = 20;
    float speed = 15;

    float maxX = size.width - car.contentSize.width / 2 - margin;
    float minX = car.contentSize.width / 2 + margin;
    float maxY = size.height - car.contentSize.height / 2 - margin;
    float minY = car.contentSize.height / 2 + margin;

    float newX = MIN(MAX(car.position.x + xAccel * speed, minX), maxX);
    float newY = MIN(MAX(car.position.y + yAccel * speed, minY), maxY);

    car.position = ccp(newX, newY);
}

//define in header: float xAccel, yAccel;
- (void)accelerometer: (UIAccelerometer *)accelerometer didAccelerate: (UIAcceleration *)acceleration {
    yAccel = acceleration.x;
    xAccel = -acceleration.y;
} 
```

# .net - doxygen 中的相对路径以允许持续集成

> ID：10376818
> 
> 赞同：3
> 
> 时间：2012-04-29T23:09:36.043
> 
> 标签：.net, visual-studio, continuous-integration, jenkins, doxygen

目的是使用 Doxygen 自动为我的整个 Visual Studio C# 解决方案创建文档。这应该发生在带有 Jenkins 的外部构建服务器上。我的项目结构是这样的：

```
Root
    Tools
        doxygen-1.8.0
            doxygen.exe
    Project1
        bin
        ...
    Project2
        bin
        ...
    ... 
```

当使用 Doxywizard 创建 Doxyfile 时，输入和输出的路径很遗憾是绝对的——这意味着它们依赖于我的开发人员机器并且不再在 Jenkins 服务器上工作。你知道我该如何解决吗？我怀疑这与 Doxygen 的`FULL_PATH_NAMES`和有关`STRIP_FROM_PATH`，但老实说，我没有得到这两个参数的描述。也许我错了，这根本与 2 个参数无关。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T06:01:22.207

我不确定 Windows 上的 doxygen 是否希望配置文件使用 Windows 路径（带有反斜杠分隔符）或 Unix 路径（带有正斜杠）。无论如何，你应该确保你的路径是相对于你运行 doxygen 的目录。

在您的 Doxyfile 中，设置`INPUT`列表和 `OUTPUT_DIRECTORY`相对路径。假设您从*Root*内部运行：

```
INPUT = ./Project1 \
        ./Project2 
```

通常，您应该更新所有指定相对路径的变量（并确保将您的资源签入源代码管理）。

在我们的一些项目中，我发现通过环境变量设置 OUTPUT_DIRECTORY 很方便：

```
OUTPUT_DIRECTORY = $(DOXYGEN_OUTOUT_DIR) 
```

在其他情况下，它只是一个相对路径：

```
OUTPUT_DIRECTORY = ./gen/docs 
```

前导`./`不是绝对必要的，但它是一个可读的指标，表明这是一个相对路径。

该`FULL_PATH_NAMES`变量不会帮助您，它控制文件在生成的文件列表中的显示方式。

# ajax - $(document).ajaxstart 没有触发

> ID：10376819
> 
> 赞同：4
> 
> 时间：2012-04-29T23:09:36.907
> 
> 标签：ajax, jquery, flickr

我有两个调用 $.getJSON 的函数——一个查看存储在服务器上的 JSON，另一个调用 Flickr。

我有这个：

```
$(document).ajaxStart(function(){ 
        alert('requeststart');
        //$('#loading').show(); 
    }); 
```

当使用某个给定路径调用 $.getJSON 时有效，但当 $.getJSON 调用 Flickr 时它不会引发警报。Flickr 调用有效，并且所有内容都按应有的方式加载……但是它不会触发 ajaxStart。（我使用 ajaxStart 和 ajaxStop 来显示 loading-gif）

有任何想法吗？

这是调用 Flickr 的函数：

```
$('#submit').on("click", function (evt) {
    evt.preventDefault();
    var tag = $('input').val();
    if (tag == "") {
        alert("please enter a tag");
    }
    else {
      $.getJSON("http://api.flickr.com/services/feeds/photos_public.gne?jsoncallback=?",{tags: tag, tagmode: "any", format: "json" },
      function(data) {
        $.each(data.items, function(i,item){
            var name = names[index];
            $("#" + name).empty();
            $('<img src="' + item.media.m.replace("_m.jpg", ".jpg") + '" />').appendTo("#" + name);
            $('<a href="' + item.link + '"> ' + item.title + '</a>').appendTo("#" + name );
            index ++;
            if (i==5) { 
                index = 0;
                }       
        });
      });
    }
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-30T00:44:55.040

jQuery 只有在内部使用对象时才会触发这些事件（[ajaxStart](http://api.jquery.com/ajaxStart/)和[ajaxStop ）。](http://api.jquery.com/ajaxStop/)`XMLHttpRequest`

但是，如果您使用回调参数 ( `JSONP`) 从不同的域请求数据，jQuery 不会使用`XMLHttpRequest`，而是通过插入`<script>`标签来实现。

这就是事件不会被触发的原因。

* * *

作为一种解决方法，您可以在调用之前开始加载动画`$.getJSON`，并将其停止在`function(data) {..`块内。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-08-22T08:52:21.150

对于乘法请求，您也必须单独计算它们。我是这样做的：

```
var loader = 0;       
function showloader(cnt){
    loader = loader + cnt;
     if(loader < 1) {
        $('#loading').hide();
      } else {
        $('#loading').show();
      }
} 
```

增加 1 并在之前调用它`$.getJSON`并减少它并在完成后再次触发。像：

```
showloader(1);
$.getJSON( 
   [...] 
 }).done(function() { 
   showloader(-1);
   [...]
}); 
```

# xcode - iPad 对象渲染不正确

> ID：10376820
> 
> 赞同：0
> 
> 时间：2012-04-29T23:09:39.480
> 
> 标签：xcode, macos, ipad, ios-simulator

我们刚刚在我们的办公室里设置了一大堆开发 MacBook。据我所知，我们都设置了完全相同的计算机（仅安装 xcode，不更改任何设置）。我们甚至将完全相同的 xcode 项目分发给每个人，以测试每个人的设置是否正确。但出于某种原因，我的 iPad 模拟器错误地呈现了 UIView 控制器上对象的位置。我可以制作一个非常基本的应用程序，并在 xcode 4.3.1（最新版本的 ATM）中使用情节提要编辑器敲击 UIView 控制器，并为其添加一个按钮。当我在模拟器上运行它时，它在 iPhone 上看起来不错，但是当我尝试在 iPad 中查看它时，似乎某些元素可以缩放到 iPad 分辨率，但其他元素不会。没有的组件，如果它们在 iPhone 上呈现，似乎就在它们所在的位置。这个问题最奇怪的部分是我在网上找不到遇到同样问题的人。我已经尝试删除并重新安装 xcode，但仍然发生同样的事情。我担心我可能不得不重新安装操作系统并从头开始。

它在 iPhone 模拟器上的外观： ![苹果手机](../Images/567f4e94fa48edb62e36025b786c2b5c.png)

在 iPad 模拟器上： ![iPad](../Images/0d1ef9f3feb07e8b32e416549d383599.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T08:25:04.423

我认为这不是 SDK 问题，我敢打赌您正在编写适合 iPhone 屏幕而不是更大 iPad 屏幕的代码。

我认为您只添加了按钮并且 Autoresizing Mask 设置不正确。我做了一些测量，似乎：

*   到视图顶部的距离是固定的（~360px）；
*   宽度是固定的（~260px）；

您需要让按钮与底部保持固定距离（因为它应该留在图下方）并删除左侧固定边距，以便它可以居中。

您需要查看[`UIViewAutoresizingMask`](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)for`UIView`的`autoresizingMask`属性。

```
button.autoresizingMask = UIViewAutoresizingFlexibleHeight | UIViewAutoresizingFlexibleLeftMargin | UIViewAutoresizingFlexibleRightMargin; 
```

# vb.net - 自动删除listobx中的空项目？

> ID：10376821
> 
> 赞同：1
> 
> 时间：2012-04-29T23:09:46.417
> 
> 标签：vb.net

`listbox`由于从`textbox`读取文本文件 的附加文本，我有一个不断创建空项目。

我可以让它在启动时删除任何空项目吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-11-18T17:13:48.423

如果您想在加载表单时从列表框中删除空项目，请使用`Form1_Load`Event

```
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load 
```

然后在此事件中添加此代码

```
Dim i As Integer = 0
        Do While (ListBox1.Items.Count) - 1 >= i
            If String.IsNullOrEmpty(ListBox1.Items(i)) Then
                ListBox1.Items.Remove(ListBox1.Items(i))
                i -= 1
            End If
            i += 1
        Loop 
```

您可以将 if 条件语句替换
`String.IsNullOrEmpty(ListBox1.Items(i))` 为 `ListBox1.Items(i) = String.Empty`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:13:09.717

阅读文件时最好只过滤掉空行。但是，如果那不可能：

```
For i As Integer = 0 To yourListBox.Items.Count - 1
    If CStr(yourListBox.Items(i)) = String.Empty Then
        yourListBox.Items.RemoveAt(i)
        i -= 1
    End If
Next 
```

如果您可以控制添加，那么假设您正在添加它们，如下所示：

```
For Each line As String In IO.File.ReadAllLines(somefile)
    yourListBox.Items.Add(line)
Next 
```

......然后你去：

```
For Each line As String In IO.File.ReadAllLines(somefile)
    If line <> String.Empty Then yourListBox.Items.Add(line)
Next 
```

# android - Android如何检查我的sqlite db中的双重输入？

> ID：10376827
> 
> 赞同：0
> 
> 时间：2012-04-29T23:10:48.630
> 
> 标签：android, database, sqlite, list

所以我的应用程序中有一个数据库，当应用程序首次通过 Helper 类打开时构建，我可以添加（如果只使用 dbfavoritosHelper.insert(favId, favName, favType);ourCursor.requery();Toast。 makeText(getApplicationContext(),"El medio a sido a tus favorites!" 在 Agrefav 按钮内，)) 并毫无问题地从中删除项目，但我想要完成的是在按下添加按钮检查的那一刻具有相同 favId 的项目已经存在，所以如果它存在，我不想添加它，因为我不想创建重复项，所以我想更新该项目，到目前为止我拥有的代码在这里不起作用是：

在我的主要活动中

```
//this is how I call insert
 Button Agrefav = (Button) findViewById(R.id.btnFav);
            Agrefav.setOnClickListener(new View.OnClickListener() {
            public void onClick(View view) {
                if(arrayOfWebData.isEmpty()){
                    Toast.makeText(getApplicationContext(),
                            "No hay medio para agregar a favoritos!",
                            Toast.LENGTH_LONG).show();
                }else{
                    if(!dbfavoritosHelper.find(favId)){
                         dbfavoritosHelper.insert(favId, favName, favType);
                    ourCursor.requery();
Toast.makeText(getApplicationContext(),
                                "El medio a sido a tus favoritos!",
                                Toast.LENGTH_LONG).show();
                    }else{
                        dbfavoritosHelper.update(favId, favId, favName, favType);
                        ourCursor.requery();
                        Toast.makeText(getApplicationContext(),
                                "El medio se a actualizado en tus favoritos!",
                                Toast.LENGTH_LONG).show();
                    }
                }
            }});

//this is how I call delete
dbfavoritosHelper.delete(delId);
                     delId=null;
                     ourCursor.requery(); 
```

在我的助手中：

```
 //this is how I insert items to table
 public void insert(String mId, String mName, String mType) {
    ContentValues cv=new ContentValues();
    cv.put("medioId", mId);
    cv.put("medioName", mName);
    cv.put("medioType", mType);

    getWritableDatabase().insert("favorito", null, cv);

}

//this is how I'm trying to find if an item already exists in db, but not working
public boolean find(String mId){
    try {
    getReadableDatabase().rawQuery("SELECT * FROM favorito WHERE favorito.medioId='"+mId+"';", null);

    return true;        
    } catch (SQLException sqle){
    return false;   
    }
}

//this is how I update items
public void update(String id, String mId, String mName, String mType){
    ContentValues cv=new ContentValues();
    String[] args={id};
    cv.put("medioId", mId);
    cv.put("medioName", mName);
    cv.put("medioType", mType);
    getWritableDatabase().update("favorito", cv, "_id=?", args);
}

//this is how I delete them
public void delete(String id){
    getWritableDatabase().delete("favorito", "_id=?", new String[] {id});
} 
```

欢迎任何建议，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:57:23.057

您也可以让您的桌子为您检查。这是 SQLite 中的一个示例：

```
create table foo (
  name text unique);

insert into foo (name) values ("Pablo");
insert into foo (name) values ("Pablo"); // Doesn't add row! 
```

因此，如果我们稍微更改您的插入函数以捕获约束异常并让它返回 true/false：

```
public boolean insert(String mId, String mName, String mType) {
    ContentValues cv = new ContentValues();
    cv.put("medioId", mId);
    cv.put("medioName", mName);
    cv.put("medioType", mType);

    try {
        getWritableDatabase().insertOrThrow("favorito", null, cv);
        return true; // Won't be executed if an error is thrown
    }
    catch(SQLiteConstraintException e) {
        return false; 
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:44:18.283

我的解决方案是更改为

```
public boolean find(String mId){    
    Cursor c = getReadableDatabase().rawQuery("SELECT * FROM favorito WHERE favorito.medioId='"+mId+"';", null);
    if (c.moveToFirst())
    { return true; }else{
    return false;}
} 
```

# jsf - 我如何在 JSF 上做到这一点？

> ID：10376828
> 
> 赞同：0
> 
> 时间：2012-04-29T23:10:57.420
> 
> 标签：jsf, jakarta-ee, primefaces, custom-component

所以我试图找到解决以下问题的最佳方法。

我有以下页面：

1.insert.xhtml（我有一个表格来注册客户）

2.find.xhtml（我有一个注册客户的表格，我可以在其中编辑和排除它们）

在 find.xhtml 页面中，我有一个带有编辑选项的上下文菜单，如果单击它，它将打开一个`<p:dialog>` 具有相同 insert.xhtml 注册表单的表单，但提交按钮具有不同的名称和动作侦听器.

我还有其他需要客户参考的注册，例如：向注册客户注册汽车销售。我选择一个已经注册的客户将其添加到销售表单的方法是通过在 find.xhtml 表中调用具有相同代码的弹出窗口并在那里选择一个客户，除了该表在其页脚上有一个名为 select 的按钮。

所以我要问的是一种重用这些表单/表格代码的方法，能够根据需要在它们上面添加一些组件。有没有办法做到这一点？

编辑：就像一个模板

EDIT2：没关系，我只是使用`<ui:decorate>`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:33:53.470

我不确定 <ui:decorate> 是否是最佳解决方案。我已经看到了许多使用组合的模板示例。我非常喜欢 IBM 的这个教程：

[http://www.ibm.com/developerworks/java/library/j-jsf2fu2/index.html](http://www.ibm.com/developerworks/java/library/j-jsf2fu2/index.html)

他们详细解释了如何创建模板。

# linux - Linux 脚本：在特定列中搜索关键字

> ID：10376834
> 
> 赞同：4
> 
> 时间：2012-04-29T23:12:44.997
> 
> 标签：linux, search, awk, grep

我有一个包含多列数据的大型文本文件。我正在尝试编写一个脚本，该脚本从命令行接受列号和关键字，并在显示任何匹配项的整行之前搜索任何匹配项。

我一直在尝试以下方式：

`grep $fileName | awk '{if ($'$columnNumber' == '$searchTerm') print $0;}'`

但这根本行不通。我在正确的路线上吗？谢谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:27:43.210

-v 选项可用于将 shell 变量传递给`awk`命令。

以下可能是您正在寻找的内容：

`awk -v s=$SEARCH -v c=$COLUMN '$c == s { print $0 }' file.txt`

**编辑：**

我一直在尝试编写更优雅、更紧凑的代码。所以这就是丹尼斯的意思：

`awk -v s="$search" -v c="$column" '$c == s { print $0 }' file.txt`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:27:29.073

看起来很合理。尝试使用`set -x`来查看传递给`awk`. 您还可以使用不同的和/或更多的 awk 东西，包括摆脱单独的 grep：

```
awk -v colnum=$columnNumber -v require="$searchTerm"
    "/$fileName/ { if (\$colnum == require) print }" 
```

它通过设置 awk 变量（在这种情况下为`colnum`and `require`）然后使用文字字符串`$colnum`来获取所需的字段，并使用变量`require`来获取所需的字符串。

请注意，在所有情况下（使用或不使用`grep`命令），任何正则表达式元字符都`$fileName`将是 meta-y，例如，`this.that`将匹配名为`this.that`的文件以及名为的文件`thisXthat`。

# objective-c - iOS 5 中的异步网络操作

> ID：10376839
> 
> 赞同：4
> 
> 时间：2012-04-29T23:12:54.903
> 
> 标签：objective-c, ios, networking, ios5

在我所见的任何地方，我都看到人们明确地使用队列或运行循环来进行网络操作。我应该在 iOS 5 中仍然这样做，还是应该[`NSURLConnection sendAsynchronousRequest:queue:completionHandler:`](http://developer.apple.com/library/ios/#documentation/cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html#//apple_ref/occ/clm/NSURLConnection/sendAsynchronousRequest%3aqueue%3acompletionHandler%3a)改用？这是在 iOS >= 5 中进行网络操作的首选方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T00:13:03.530

我无法回答其他人的偏好，但我推出了自己的< os5，并且我非常喜欢块操作。a) 我对网络操作的中间结果或处理它们的重复代码不感兴趣，b) 块被保留，所以我得到更少的竞争条件，其中委托的某些方面被过早释放，并且 c) 我当特定操作完成时，永远不要混淆正在运行的代码。

简而言之，这是对 IMO NSURLConnection 接口的巨大改进。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T00:39:09.073

这取决于。对于简单的事情，新的基于块的 API 让生活变得更轻松。但是，与实施这些`NSURLConnectionDelegate`方法相比，您会失去一些控制权。

例如，无法取消已使用此方法启动的连接，或在下载所有数据之前处理响应（例如用于解析标头）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T03:33:46.727

您也可以使用 GCD 在 iOS 4 上执行类似的操作。

```
dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_LOW, 0), ^{

    NSData *data = [NSURLConnection sendSynchronousRequest:blah returningResponse:response error:blah];
    //process response body here

    dispatch_async(dispatch_get_main_queue(), ^{

        //Update UI Code here
        self.textView.text = [[NSString alloc] initWithData:data];

    });
}); 
```

此代码和 OP 发布的代码的问题在于，一旦建立连接，您就无法取消它们。取消对 viewDidDisappear 的请求对提高应用程序的性能大有帮助。[我在iOS PTL](http://iosptl.com/)一书中广泛讨论了这个问题

您需要第三方网络框架（如 MKNetworkKit 或 RestKit 或现已失效的 ASIHTTP）的第二个原因是用于身份验证。大多数 Web 服务要求您使用 NSURLCredential（HTTP Basic 或 HTTP Digest 或 Windows NTLM 或 oAuth）进行身份验证

如果您推出自己的代码，仅此一项就需要几天时间。并不是说你不应该这样做。但是没有必要，因为所有这些第三方框架都被广泛使用，并且与您自己的代码相比，它们中的机会或错误或性能问题更少。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-05T05:19:23.890

我写了[一篇博](http://www.techsfo.com/blog/2013/08/managing-nested-asynchronous-callbacks-in-objective-c-using-reactive-cocoa/)文，比较了几种方法，包括**NSURLConnection**、**[AFNetworking](https://github.com/AFNetworking/AFNetworking)**和**ReactiveCocoa**。

### ReactiveCocoa 方法

如果你想真正喜欢异步网络调用，你可以试试[ReactiveCocoa](https://github.com/ReactiveCocoa/ReactiveCocoa)。ReactiveCocoa 允许您定义代表每个网络请求的信号。它允许您[链接多个相关的网络调用](https://stackoverflow.com/questions/15797081/chaining-dependent-signals-in-reactivecocoa)。

```
#import <ReactiveCocoa/ReactiveCocoa.h>
// ...

-(RACSignal*)signalGetNetworkStep1 {
   NSURL* url = ...;
   return [RACSignal createSignal:^(RACDisposable *(id subscriber) {
      NSURLRequest *request1 = [NSURLRequest requestWithURL:url];
      AFJSONRequestOperation *operation1 = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
         [subscriber sendNext:JSON];
         [subscriber sendCompleted];
      } failure:^(AFHTTPRequestOperation *operation, NSError *error){
         [subscriber sendError:error];
      }];
      [operation1 start];
      return nil;
   }
}

-(void) yourMethod {
   [[self signalGetNetworkStep1] subscribeNext:^(id *x) {
      // perform your custom business logic
   }];
} 
```

# android - Android：如何判断是否按下了键盘的 ok 键？

> ID：10376842
> 
> 赞同：1
> 
> 时间：2012-04-29T23:13:11.173
> 
> 标签：android, keyboard

有没有办法知道用户何时按下键盘上的 ok 键？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T23:23:16.420

调用`setOnEditorActionListener()`您的，当用户按下 IME 操作键时`EditText`，您的`OnEditorActionListener`将被调用。`onEditorAction()`

请注意，并非所有 IME 都有这样的密钥，所以不要指望它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:16:37.863

尝试`KeyEvent.FLAG_EDITOR_ACTION`

来自：http: [//developer.android.com/reference/android/view/KeyEvent.html#FLAG_EDITOR_ACTION](http://developer.android.com/reference/android/view/KeyEvent.html#FLAG_EDITOR_ACTION)

# javascript - 调试 javascript/jquery：期待更多源字符

> ID：10376843
> 
> 赞同：1
> 
> 时间：2012-04-29T23:13:14.830
> 
> 标签：javascript, jquery, asp.net, web-services, jquery-ui

我正在尝试将 javascript 文件作为 jquery ui datepicker 的插件来处理。基本上我有一个代表假期预订的数据库表，我可以从日期选择器日历中选择日期。我正在尝试禁用选择已在预订中预订的任何日期。这是我的 javascript 文件：

```
$(document).ready(function () {

$("#checkin").datepicker({
    changeMonth: true,
    changeYear: true,
    showOtherMonths: true,
    selectOtherMonths: true,
    dateFormat: 'DD, d MM, yy',
    altField: '#date_in',
    altFormat: 'yy-mm-dd',
    beforeShowDay: markInvalidDates,
    onChangeMonthYear: fetchFreeDays,
    firstDay: 1 // rows starts on Monday
});

$("#checkout").datepicker({
    changeMonth: true,
    changeYear: true,
    showOtherMonths: true,
    selectOtherMonths: true,
    dateFormat: 'DD, d MM, yy',
    altField: '#date_out',
    altFormat: 'yy-mm-dd',
    beforeShowDay: highlightDays,
    onChangeMonthYear: fetchFreeDays,
    firstDay: 1 // rows starts on Monday
}); 
```

});

```
var invalidDays = [];

function getReservations() {
$.ajax({
type: "POST",
url: "MullinsBayServices.asmx/GetVerifiedReservations",
data: "{}",
contentType: "application/json; charset=utf-8",
dataType: "json",
async: "false",
success: function(response) {
    var unvailableDates = response.d;
    $.each(unvailableDates, function(index, date) {
        invalidDays.push(date);
    });
},
failure: function(msg) {
    $('#output').text(msg);
} 
```

});

```
function markInvalidDates(date) {
getReservations();
dmy = date.getDate() + "-" + (date.getMonth()+1) + "-" + date.getFullYear();
if ($.inArray(dmy, invalidDays) == -1) {
    return [true, ""];
} else {
    return [false,"","Unavailable"];
} 
```

}

我对 javascript/jquery 还是很陌生，不知道我在哪里出错了。假设 web 服务返回以 JSON 格式正确序列化的日期，这是否适合我想要完成的任务？

# php - ExpressionEngine 手动输入导入

> ID：10376845
> 
> 赞同：1
> 
> 时间：2012-04-29T23:14:33.430
> 
> 标签：php, mysql, expressionengine

我有一个来自旧网站的 XML 提要，其中包含新闻文章。我必须将这些文章导入我的新 ExpressionEngine 站点。我打算通过解析 XML 并编写一些 PHP 来做一个简单的插入来做到这一点。

我对 ExpressionEngines 的架构感到很困惑，条目存储在哪个表中？此外，如果有（免费）扩展可以做到这一点，那就太好了。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T01:56:13.207

所有 ExpressionEngine 帖子都存储在 exp_channel_data (2.x) 或 exp_weblog_data (1.x) 表中。

对于 EE1.x，我发现了这个：

*   [将数据导入表达式引擎](http://devot-ee.com/add-ons/import-data-into-expressionengine)

我找不到免费插件来导入 EE2.x。

对于 EE2.x，我发现了这些：

*   [进口商](http://www.solspace.com/software/detail/importer/)- 商业
*   [DataGrab](http://brandnewbox.co.uk/products/details/datagrab) - 商业

**编辑：**

找到了这个免费插件，它可能可以帮助您在 EE2.x 中导入：

[MX 工具箱](http://devot-ee.com/add-ons/mx-tool-box)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T16:44:40.313

实际上，*magzalez 的*答案是不完整的——只有自定义字段数据存储在`exp_channel_data`.

您还需要查看：

*   `exp_channel_titles`
*   `exp_members`(`exp_channel_titles`使用一`author_id`列，该列必须对应于`exp_members`
*   `exp_category_posts``entry_id`，这是一个连接from`exp_channel_titles`和`cat_id`from的关系表`exp_categories`

# iphone - Xcode：Twitter 文本字段发布问题

> ID：10376848
> 
> 赞同：0
> 
> 时间：2012-04-29T23:15:15.983
> 
> 标签：iphone, xcode, ios5, twitter, uitextfield

我遇到了一个奇怪的问题。如果我运行以下代码，我会得到我的推文框文本为“今天我已经听过（null）”。当我在 [tweet setInitialText:str1] 中更改 str1 时；到 txt1.text 代码将无法运行，我收到此消息“方法调用的参数太多，预期 1 有 2”。

我错过了什么吗？

提前致谢。

```
@implementation ViewController
@synthesize txt1;

-(IBAction)Twitte{

    if ([TWTweetComposeViewController canSendTweet]){

        NSString *str1 = [[NSString alloc] initWithFormat:@"Today I have listened to %@", txt1.text];

        TWTweetComposeViewController *tweet = [[TWTweetComposeViewController alloc] init];
        [tweet setInitialText:str1];
        [tweet addURL:[NSURL URLWithString:@"http://twitter.com/#!/"]];

        [self presentModalViewController:tweet animated:YES];

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:21:09.330

IBAction 需要一个 id 参数。字符串中的 null 表示 txt1 为 nil。它不能回答字符串，因为它不指向任何东西。添加一个参数并检查初始化 txt1 的位置。

# javascript - 其他内容大小更改时为 div 位置设置动画

> ID：10376849
> 
> 赞同：1
> 
> 时间：2012-04-29T23:15:16.700
> 
> 标签：javascript, css, html

我有一个内容 div，还有一个位于第一个 div 下方的 div。第一个 div 的内容是动态变化的，它的高度也会根据需要而变化。通常，随着第一个 div 的高度变化，第二个 div 的位置会自动上下颠簸。如何为第二个 div 设置动画，最好只使用 CSS 和 JS（不使用 jQuery）？

这是一个视觉效果： ![在此处输入图像描述](../Images/bd96e2f8b9d84405927fa01ada0fb12c.png)

左边是我的两个 div，最初。有时，div1 会扩大高度以适应其内容，然后将 div2 向下推。如何为 div2 的运动设置动画？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:34:44.180

> *   **演示：http:** [//jsbin.com/uwoxek](http://jsbin.com/uwoxek)

```
function init() {
    var header = document.getElementById('header');
    var header_height = header.offsetHeight;
    header.style.height = '10px';
    header.style.overflow = 'hidden';
    var i = 0;
    var animation = setInterval(function () {
        if (i <= header_height) {
            header.style.height = (10 + i) + 'px';
        } else {
            clearInterval(animation);
            header.style.overflow = 'block';
        }
        i++;
    }, 10); 
} 
```

好的，也许需要一些注释？你必须移动的不是“第二个”div，而是“第一个”，通过移动会自动将第二个推到底部（或第一个的末尾）希望这有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:25:54.107

演示：http: [//jsfiddle.net/xS3y7/](http://jsfiddle.net/xS3y7/)

```
#div1 {
    width: 50px; // Parent div needs width and height for this to work.
    height: 50px;
    background-color : red;
    position: relative;
}

#div2 {
    position: absolute;  //positioning based on parent.
    width: 100%; // 100% width of parent
    height: 20%; // 20% width of parent
    background-color: blue;
    bottom: 0px; // Place on the bottom
}​ 
```

需要注意的重要一点是，父级`<div>`必须具有*绝对*或*相对*定位，子级`<div>`必须具有绝对定位。绝对定位基于其最近的父元素（在本例中为`#div1`）定位。绝对定位使我们能够将元素放置在我们想要的任何位置（相对于父元素），计算值关闭，所以这真的很强大。

如果想好好阅读，请查看[CSS-Tricks](http://css-tricks.com/absolute-relative-fixed-positioining-how-do-they-differ/)上的 Chris Coyier 。

# html - HTML表格问题（固定左侧单元格，右侧单元格填充所有其余内容）

> ID：10376851
> 
> 赞同：0
> 
> 时间：2012-04-29T23:15:41.877
> 
> 标签：html

我需要一张我无法正确处理的桌子的帮助。这是一个非常简单的表格，只有两个单元格（左和右）：

```
<table>
   <tr>
     <td width="100px">
       my content 1
     </td>
     <td>
       my content2
     </td>
   </tr>
</table> 
```

我希望左边那个是固定大小（100px），右边那个展开到页面的其余部分。

问题是我尝试过的都没有奏效。如果我按原样离开，它将与“我的内容 2”一样大。

我试图在第二个页面上放置一个隐藏元素（如图像）以确保它一直运行，但在我的小型上网本上，它超出了桌子的大小并打破了它。所以我无法将图像定义为与屏幕一样大。

还有其他想法吗？它应该很简单，但我无法完成它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:18:24.040

添加`width: 100%`到您的表

[http://jsfiddle.net/rU9Tu/](http://jsfiddle.net/rU9Tu/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:22:00.697

通常，表格会根据其内容调整大小，因此您需要设置表格以获取可用的完整长度。

```
<table width="100%">
...
</table> 
```

# java - 使用数组时出现 java.lang.NullPointerException 错误

> ID：10376857
> 
> 赞同：1
> 
> 时间：2012-04-29T23:16:37.953
> 
> 标签：java, arrays, eclipse, nullpointerexception

我已经编写了一些代码，它应该允许我获取数据库中列下的所有数据并将其存储在字符串数组中。我将包含信息的字符串数组转换为双精度数组。将双精度数组中的所有值加在一起以获得一个总值，然后该值将显示在 EditText 中。但是，每当我开始活动时，就会出现一个错误，提示 java.lang.NullPointerException。

这是数组的代码：

```
DatabaseTotalEntries getAllData = new DatabaseTotalEntries(this); //Creates a new method in the database class
    getAllData.open();
    String[] RunningCosts = getAllData.getCost(); //Transfers all the data under the Total Running Costs column into a String Array
    String[] RunningTimes = getAllData.getTime();
    String[] EnergyUsages = getAllData.getEnergy();
    getAllData.close();

    double[] doubleRunningCosts = new double[RunningCosts.length];
    for(int i=0; i<RunningCosts.length; i++)
    {
       doubleRunningCosts[i] = Double.parseDouble(RunningCosts[i]);
    } // Converts the string array 'RunningCosts' into a double array

    double TotalCost = 0;
    for (int in = 0; in <doubleRunningCosts.length; in++)
        TotalCost += doubleRunningCosts[in]; //Adds the values in the double string array together to get one total value

    DecimalFormat decf = new DecimalFormat("##");
    totalCostBox.setText(decf.format(TotalCost)); //Sets the variable 'TotalCost' to appear in the totalCostBox edit text 
```

LogCat 说事件发生在第 31 行，即

```
double[] doubleRunningCosts = new double[RunningCosts.length]; 
```

这是我在数据库中使用的 getData 方法：

```
public String[] getCost() {
    // TODO Auto-generated method stub
    ArrayList<String> costarraylist = new ArrayList<String>();
    String[] applianceCostcolumns = new String[] { KEY_TOTAL_COST };
    Cursor costcursor = allDatabase.query(DATABASE_TABLE, applianceCostcolumns, null, null, null, null, null);
    String result;

    int iApplianceCost = costcursor.getColumnIndex(KEY_TOTAL_COST);

    for (costcursor.moveToFirst(); !costcursor.isAfterLast(); costcursor
            .moveToNext()) {

        result = costcursor.getString(iApplianceCost);

        costarraylist.add(result);
    };
    return null;
} 
```

有谁知道可能是什么问题？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T23:21:00.133

改变

```
return null; 
```

至

```
return costarraylist.toArray(new String[costarraylist.size()]); 
```

在你`getCost()`方法的最后一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:19:19.583

成员函数`public String[] getCost()`返回 null 而不是实际成本值。因此，`double[] doubleRunningCosts = new double[RunningCosts.length];`第 31 行将失败，因为 RunningCosts 为空。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T23:21:25.680

您的`getCost`方法`null`在应该返回类似的东西时返回`costarraylist.toArray(new String[0])`

# c# - XmlSerialization - 默认忽略变量

> ID：10376858
> 
> 赞同：1
> 
> 时间：2012-04-29T23:16:59.583
> 
> 标签：c#, properties, xml-serialization

使用 XmlSerialization 将对象序列化为 xml 时，是否可以默认忽略普通变量？

我有一个变量：

```
class SomeClass
{
    private bool trueOrFalse = false;

    public bool TrueOrFalse
    {
        get { return trueOrFalse; }
        set { trueOrFalse = value; }
    }
} 
```

在序列化它时，我在 XML 文件中得到两个“元素”，每个元素一个 - 但它们是相同的。因此，对于一个更干净的 XML 文件，我希望以某种方式包含属性，而不必使用 XmlIgnore - 作为默认设置，有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T12:57:48.267

对不起，是我的错。我有几个类实现的接口，所有字段都设置为私有。幸运的是，通过测试实现接口的特定对象，我将其字段设置为公共，这是它同时写入属性名 + 属性值以及字段和字段值的原因。

因此，字段必须是私有的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:32:32.117

根据 C# 的版本，您可以像这样定义属性：

```
public class SomeClass
{
    public bool TrueOrFalse{ get; set; }      
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-30T00:48:46.540

正如@Jaime Olivares 在 xml 序列化中所说，只序列化一个类中的公共成员，尝试像这样为你的字段添加前缀

```
[Serializable]
class SomeClass
{
//does not persist the member in your serialization process
 [NonSerialized]
 private bool trueOrFalse = false;

 public bool TrueOrFalse
 {
    get { return trueOrFalse; }
    set { trueOrFalse = value; }
 } 
```

}

# extjs - 存储加载后 extjs 4.0.7 中 Combobox 中的小错误

> ID：10376859
> 
> 赞同：0
> 
> 时间：2012-04-29T23:17:20.517
> 
> 标签：extjs, combobox, drop-down-menu, setvalue

我对组合框有一点问题。我有一个组合框商店，它在某些事件后使用 ajax 重新加载。之后，我使用 myCombo.setValue() 设置默认组合框选定字段。它运作良好。问题是当我单击组合并显示下拉列表时。该列表自动隐藏。但仅在第一次，然后一切正常，直到我重新加载我的表格。我可以显示我的代码的一部分：

店铺：

```
 var ParentsStore =   Ext.create('Ext.data.Store', { 
    autoLoad: false,
    fields: ['id', 'name'],
    proxy: {
        type: 'ajax',
        url: 'index.php?aid=parents_combostore',
        reader: {
            type: 'xml',
            record: 'item',
            idProperty: 'ASIN',
            totalRecords: '@total'
        }
    }
}); 
```

它正在重新加载商店：

```
 Ext.getCmp('userParent_combo_id').clearValue();

       ParentsStore.getProxy().extraParams = 
       {
                 typ :typ['usrtyp_id']
       };
            Ext.getCmp('userParent_combo_id').store.load();
            Ext.getCmp('userParent_combo_id').lastQuery = null; 
```

有人了解我并可以尝试帮助我吗？

此致！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T09:41:30.417

我不认为错误存在于库中，而仅存在于我的代码中！

这是我调用加载存储时的一部分

```
 xtype: 'radiogroup',
                    columns: 1,
                    fieldLabel: 'typ',
                    id: 'typ_radio_id',

                    items: [
                        usrtyp_item
                    ],
                    listeners: {
                            change: {
                                fn: function(field,new_value,old_value,options)
                                {
                                        typ=Ext.getCmp('typ_radio_id').getValue();

                                        if(second_change)
                                        {
                                            Ext.getCmp('userParent_combo_id').clearValue();

                                            ParentsStore.getProxy().extraParams = {
                                                typ :typ['usrtyp_id']
                                            };
                                            Ext.getCmp('userParent_combo_id').store.load();
                                            Ext.getCmp('userParent_combo_id').lastQuery = null; 

                                            second_change=0;
                                        }
                                        else second_change=1;

                                }
                            }
                    } 
```

这是树面板上的侦听器，我在其中使用 setValue

```
 listeners: {
            'itemclick': function(this_el,record,item,index,e,eOpts)
            {
                    var user_info = getUserById( record.get('id') );    

                        parent_id=user_info['parent_id'];
                        second_change=0;

                        Ext.getCmp('userParent_combo_id').setValue( parent_id );
            }
} 
```

在“itemclick”之后，radiogroup 中的“更改”事件会自动触发。这是我的代码的一部分，但也是重要的部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:45:19.053

`load()`方法是异步的。这意味着您不能假设 store 在您调用后立即加载`load()`。您需要为商店加载事件配置处理程序并在`setValue()`那里继续您的逻辑 - 等。

# c# - 如何在 WPF 中将小表单创建到视图中

> ID：10376865
> 
> 赞同：0
> 
> 时间：2012-04-29T23:18:00.423
> 
> 标签：c#, xaml

如何在 WPF/XAML中以**红色**突出显示的视图创建一个小表单

![在此处输入图像描述](../Images/03537281cf523f8fcf2fb00d4c494eba.png)

### 编辑

以及当我按下按钮创建新选项时如何链接确定更新选项并选择这个新选项

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:47:31.870

使用[弹出窗口](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.popup.aspx)

```
<Popup Name="Popup" PlacementTarget="{Binding ElementName=AddButton}" 
                       StaysOpen="False">
                    ... Add content here ...
                </Popup> 
```

# core-location - 即使在任务栏中杀死后，应用程序仍会使用 iOS 定位服务

> ID：10376868
> 
> 赞同：1
> 
> 时间：2012-04-29T23:18:13.263
> 
> 标签：core-location, cllocationmanager

我有一个使用 startMonitoringSignificantLocationChanges 的应用程序。

打开后，右上角的紫色箭头会出现。

我正在做一些测试，偶尔我会调用 stopMonitoringSignificantLocationChanges。

发生这种情况时，即使我在 Xcode 中终止了该应用程序，紫色箭头仍会显示。我进入 Settings.app -> Location Services 并看到我的应用旁边的紫色箭头也亮了，这意味着它仍在使用它。即使在没有将 Xcode 连接到设备的情况下运行，并且在我从多任务栏中终止应用程序之后，它也会这样做。

怎么会这样？

杀掉一个应用程序不应该导致重大的位置变化监控停止吗？

这肯定发生在 5.1 中......尚未使用 5.0 进行测试。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-05-05T01:41:11.253

我也遇到了这个问题，但我没有监控重大的位置变化。它源于使用 CLLocationManager 并设置地图视图以在 Xcode 中的属性下显示用户位置。Telling`[locationManager stopUpdating]`让我的位置经理停止发送消息，但来自 Map View 的消息一直在发送。直到我告诉地图视图`[mapView setShowUsersLocation:NO]`它才退出。从您最初的帖子中不确定您是否甚至在使用 MapKit，但我想我会把它扔在那里以防万一。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T05:05:34.573

你确定你`stopMonitoringSignificationLocationChanges`在后台/终止之前打电话？

看看[CLLocationManager](http://developer.apple.com/library/ios/#DOCUMENTATION/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instm/CLLocationManager/startMonitoringSignificantLocationChanges)的文档——这可能对你来说很重要：

> 如果您启动此服务并且您的应用程序随后终止，则系统会在新事件到达时自动将应用程序重新启动到后台。

那里有一些非常具体的细节，关于当你被终止时如何处理数据（在里面`application:didFinishLaunchingWithOptions:`）。

# css - 使用 Internet Explorer 9 时 CSS 下拉菜单消失

> ID：10376870
> 
> 赞同：1
> 
> 时间：2012-04-29T23:18:15.200
> 
> 标签：css, internet-explorer-9, drop-down-menu

我有一个我正在尝试构建的 CSS 菜单。它适用于文本和锚链接，但我将相同的 CSS 用于带有社交媒体（如按钮）（facebook、twitter 等）的下拉菜单，除了 IE9 之外，一切都很好！我发誓这个浏览器将是我的死亡！我读过它看起来像 :hover 是我需要鼠标悬停或 JS 的问题！我在这方面的专业知识有限，我不知道该怎么做。

这是 HTML

```
<ul id="nav">
<li>Share This Page
    <ul>
        <li>
                    <div id="social_body">
                       <div id="social_left">
                         <g:plusone size="tall"></g:plusone>
                       </div>
                       <div id="social_right">
                         <div class="fb-like" data-send="false" data-layout="box_count"     
                        data-width="55" data-show-faces="true"></div>
                       </div>
                     </div> 
                </li>
        <li>
                    <div id="social_body">
                      <div id="social_left">
                          <a href="https://twitter.com/share" class="twitter-share-
                             button" data-count="vertical">Tweet</a>
                             <script>!function(d,s,id){var                                  
                             js,fjs=d.getElementsByTagName(s)                                 
                             [0];if(!d.getElementById(id))
                             {js=d.createElement(s);js.id=id;js.src="
                             //platform.twitter.com/widgets.js";
                             fjs.parentNode.insertBefore(js,fjs);}}
                             (document,"script","twitter-wjs");</script>
                      </div>
                      <div id="social_right">
                         <script src="//platform.linkedin.com/in.js" 
                             type="text/javascript"></script>
                             <script type="IN/Share" data-counter="top"></script>
                      </div>
                    </div>
                 </li>
                 <li><div id="share_footer"><a href="http://www.brandonturpin.com" 
                             target="_blank">Zen Cart Module</a> by Brandon Turpin</div>
                 </li>
    </ul>
        </li>
            </ul> 
```

这是CSS

```
/*------------------------------------*\
    RESET
\*------------------------------------*/
body,div,dl,dt,dd,ul,ol,li,h1,h2,h3,h4,h5,h6,pre,form,fieldset,input,textarea,p,blockquote,th,td{
    margin:0;
    padding:0;
}
table{
    border-collapse:collapse;
    border-spacing:0;
}
fieldset,img{
    border:0;
}
address,caption,cite,code,dfn,th,var{
    font-style:normal;
    font-weight:normal;
}
caption,th{
    text-align:left;
}
h1,h2,h3,h4,h5,h6{
    font-size:100%;
    font-weight:normal;
}
q:before,q:after{
    content:'';
}
abbr,acronym{
    border:0;
}

/*------------------------------------*\
    DROPDOWN
\*------------------------------------*/

#nav{   color: #1e598e;
    list-style:none;
    font-weight:bold;
    margin-bottom:10px;
    /* Clear floats */
    float:left;
    width:100%;
    /* Bring the nav above everything else--uncomment if needed.
    position:relative;
    z-index:5;
    */
}
#nav li{
    text-align: center;
    margin-right:10px;
    position:relative;
}

/*--- DROPDOWN ---*/
#nav ul{
    background:#fff; /* Adding a background makes the dropdown work properly in IE7+. Make this as close to your page's background as possible (i.e. white page == white background). */
    background:rgba(255,255,255,0.8); /* But! Let's make the background fully transparent where we can, we don't actually want to see it if we can help it... */
        height:auto; 
        padding-left: 5px; 
        padding-top: 10px; 
        padding-bottom: 5px; 
        padding-right: 5px; 
        border: 2px solid #e3e3e3;
        width: 14em;
    list-style:none;
    position:absolute;
    left:-9999px; /* Hide off-screen when not needed (this is more accessible than display:none;) */
}
#nav ul li{
    float:none;
}
#nav ul a{
    white-space:nowrap; /* Stop text wrapping and creating multi-line dropdown items */
}
#nav li:hover ul{ /* Display the dropdown on hover */
    left:0; /* Bring back on-screen when needed */
} 
```

我有点失落！！当IE9

# solr - Solr 软提交功能

> ID：10376872
> 
> 赞同：1
> 
> 时间：2012-04-29T23:18:31.547
> 
> 标签：solr

solr 3.6 有软提交功能吗？

我阅读了有关该功能的文档，但我很困惑是否仅在与 Real-Time GETS 链接的 solr 4.0 中可用，或者它是否在最后一个稳定版本 3.6 中可用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T00:06:14.667

否 根据 Solr Wiki on [soft commits](http://wiki.apache.org/solr/UpdateXmlMessages#A.22commit.22_and_.22optimize.22)，`softcommit`commit 命令的属性仅在 Solr 4.0 版中可用，在 Solr 3.6 版中*不可用。*

# linux - 每次 APC 100% 碎片化

> ID：10376876
> 
> 赞同：0
> 
> 时间：2012-04-29T23:18:56.420
> 
> 标签：linux, caching, apc, php

我的 APC 总是达到 100% 碎片化。我的 VPS 有 1GB 内存，APC 有 256mb 分配给它，但它在 256mb 中平均只使用 100mb（最大 150mb）。

我必须重新启动 php-fpm，100% Fragmentation 会减慢我的网站速度。有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T07:47:27.790

你真的应该在你的生产服务器上设置 apc.stat=0 ，它会阻止 APC 实际进入 IO 来检查文件是否已更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-29T14:59:05.917

100% 的碎片化不会减慢您的网站速度。如果APC需要存储一个大文件并且没有地方放置它只是一个问题。

您在应用程序中使用 user_cache 吗？

您是否使用 apc.php 来查看它使用了多少内存？图表必须保持稳定。如果它每次都更改，则 APC 配置不正确。

您的服务器上正在运行什么样的网站？有些需要微调。例如 Magento 要求最大文件大小为 20M。

# javascript - 浏览器到 Spotify 同步数据

> ID：10376880
> 
> 赞同：0
> 
> 时间：2012-04-29T23:20:06.650
> 
> 标签：javascript, html, spotify

我想在我的网站上做到这一点，例如用户去

```
http://example.com/connect/spotify 
```

然后他们按“连接”，如果他们这样做了，spotify 应用程序就会收到 API 密钥。

我该怎么做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:11:39.497

您可以链接到`spotify:app:myappname:key:value:key2:value2:etc:etc`以启动 Spotify 应用程序并加载您的应用程序。然后该`key:value:key2:value2:etc:etc`部分将通过`ARGUMENTSCHANGED`even on传递给您的应用程序`application`。

但是，这根本不是一个非常优雅的解决方案，尤其是在用户没有安装 Spotify 或您的应用程序的情况下。

更好的方法可能是编写一个简单的 REST API，您的 Spotify 应用程序可以与之交互以获取其他需要密钥的 API 的 API 密钥。这样，一切都将是无缝的。

# java - 与作家一起编写大字符串而不是大量单个字符更好？

> ID：10376881
> 
> 赞同：0
> 
> 时间：2012-04-29T23:20:26.290
> 
> 标签：java

假设我有一个程序试图写入一个 CSV 文件，其中可能有数千个逗号分隔值和数千行。

现在，我只是为每个单独的字符重复调用 BufferedWriter 的写入函数，我想知道如果我将字符连接成一个长字符串并使用另一个类（例如 PrintWriter）写入它们是否会提高性能。

直观地说，我认为这两种方法都不会更快，因为这一切都归结为写入单个字节，但我想确定一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T23:23:16.350

> 直观地说，我认为这两种方法都不会更快，因为这一切都归结为写入单个字节，但我想确定一下。

你的假设有点错误。较长数据的较少写入涉及（通常）较少的系统调用，并且比单独写入每个字节更快。

就好像你需要把 10 个箱子从一个城市搬到另一个城市，你可以把所有的箱子一起装在一辆卡车上，也可以一个一个地拿走。你仍然需要移动 10 个箱子 X 公里，但是这些方法之间存在很大的效率差异。

请注意，即使您使用 BufferedWriter 并多次调用 to `write`，它实际上也不会每次都写入文件（这就是为什么它被称为**Buffered** Writer...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:34:58.127

> 现在，我只是为每个单独的字符重复调用 BufferedWriter 的写入函数，我想知道如果我将字符连接成一个长字符串并使用另一个类（例如 PrintWriter）写入它们是否会提高性能。

它是否会产生*重大影响*是值得怀疑的。

但是，我的直觉是，您当前的操作方式可能比构建字符串并编写它要快。另一种方法会产生分配多个（至少 2 个，可能更多）堆节点并将字符复制到临时字符串中的额外开销。我认为您不会在其他地方收回开销。但这是猜测。最重要的是输出堆栈中的*某处有缓冲。*

我的建议：

*   不要在这上面浪费时间。
*   如果存在真正的（可测量的）性能问题，请使用这两种策略来分析您的应用程序（或基准测试），然后看看哪一种更适合您的应用程序。

# wordpress - 使 get_adjacent_post() 跨自定义帖子类型工作

> ID：10376891
> 
> 赞同：10
> 
> 时间：2012-04-29T23:22:24.867
> 
> 标签：wordpress, custom-post-type

使用`get_adjacent_post`,`previous_post_link`和`next_post_link`似乎只能识别具有相同帖子类型的项目。由于我有 2 种自定义帖子类型，有没有办法在所有上一个和下一个帖子类型之间进行链接？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-04-30T10:55:15.417

似乎这个问题在整个互联网上都被问到了，但没有明确的答案。因此，我从原始函数创建了自己的函数，`get_adjacent_post`并为其他需要它的人定制了它。

**功能**

把它放在你的functions.php中

```
/*
 * Replacement for get_adjacent_post()
 *
 * This supports only the custom post types you identify and does not
 * look at categories anymore. This allows you to go from one custom post type
 * to another which was not possible with the default get_adjacent_post().
 * Orig: wp-includes/link-template.php 
 * 
 * @param string $direction: Can be either 'prev' or 'next'
 * @param multi $post_types: Can be a string or an array of strings
 */
function mod_get_adjacent_post($direction = 'prev', $post_types = 'post') {
    global $post, $wpdb;

    if(empty($post)) return NULL;
    if(!$post_types) return NULL;

    if(is_array($post_types)){
        $txt = '';
        for($i = 0; $i <= count($post_types) - 1; $i++){
            $txt .= "'".$post_types[$i]."'";
            if($i != count($post_types) - 1) $txt .= ', ';
        }
        $post_types = $txt;
    }

    $current_post_date = $post->post_date;

    $join = '';
    $in_same_cat = FALSE;
    $excluded_categories = '';
    $adjacent = $direction == 'prev' ? 'previous' : 'next';
    $op = $direction == 'prev' ? '<' : '>';
    $order = $direction == 'prev' ? 'DESC' : 'ASC';

    $join  = apply_filters( "get_{$adjacent}_post_join", $join, $in_same_cat, $excluded_categories );
    $where = apply_filters( "get_{$adjacent}_post_where", $wpdb->prepare("WHERE p.post_date $op %s AND p.post_type IN({$post_types}) AND p.post_status = 'publish'", $current_post_date), $in_same_cat, $excluded_categories );
    $sort  = apply_filters( "get_{$adjacent}_post_sort", "ORDER BY p.post_date $order LIMIT 1" );

    $query = "SELECT p.* FROM $wpdb->posts AS p $join $where $sort";
    $query_key = 'adjacent_post_' . md5($query);
    $result = wp_cache_get($query_key, 'counts');
    if ( false !== $result )
        return $result;

    $result = $wpdb->get_row("SELECT p.* FROM $wpdb->posts AS p $join $where $sort");
    if ( null === $result )
        $result = '';

    wp_cache_set($query_key, $result, 'counts');
    return $result;
} 
```

**用法**

基本用途

```
// Custom post types can be array() or string
$post1 = mod_get_adjacent_post('prev', array('post', 'custom1', 'custom2'));
$post2 = mod_get_adjacent_post('next', 'custom2'); 
```

用于创建上一个/下一个链接

```
<?php
$prev = mod_get_adjacent_post('prev', array('post', 'custom1', 'custom2'));
$next = mod_get_adjacent_post('next', array('post', 'custom1', 'custom2'));
?>

<?php if($prev) : ?>
    <a href="<?php echo get_permalink($prev->ID)?>">&laquo; Go back in time</a>
<?php endif; ?>

<?php if($next) : ?>
    <a href="<?php echo get_permalink($next->ID)?>">Next: <?php echo $next->post_title; ?> &raquo;</a>
<?php endif; ?> 
```

如果您仍想包含变量`$in_same_cat`，您仍然可以修改代码，`$excluded_categories`但如果您这样做了，那么我建议您改用`get_adjacent_post`它，因为这就是它的用途。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-04-01T11:38:51.473

**以前的答案不再起作用。看看这个**

我想出了一个新的，更简单：

*   将此粘贴到您的functions.php中

```
function custom_posttype_get_adjacent_ID($direction = 'next', $type = 'post', $current) {

    // Get all posts with this custom post type
    $posts = get_posts('posts_per_page=-1&order=DESC&post_type='.$type);

    $postsLength = sizeof($posts)-1;
    $currentIndex = 0;
    $index = 0;
    $result = 0;

    // Iterate all posts in order to find the current one
    foreach($posts as $p){
        if($p->ID == $current) $currentIndex = $index;
        $index++;
    }
    if($direction == 'prev') {
        // If it's 'prev' return the previous one unless it's the first one, in this case return the last. 
        $result = !$currentIndex ? $posts[$postsLength]->ID : $posts[$currentIndex - 1]->ID;
    } else {
        // If it's 'next' return the next one unless it's the last one, in this case return the first. 
        $result = $currentIndex == $postsLength ? $posts[0]->ID : $posts[$currentIndex + 1]->ID;
    }
    return $result;
} 
```

现在，无论您需要下一个帖子 ID，只要使用如下函数即可：

```
custom_posttype_get_adjacent_ID('prev', 'project', get_the_ID()); 
```

**评论：**

*   `get_the_ID()`如果您愿意，请随意替换您当前的帖子 ID。
*   第一个参数预计是“下一个”或“上一个”，它回落到“下一个”。
*   第二个参数需要是自定义帖子类型名称。你可以在你的`register_post_type()`函数中找到它。它回退到“发布”。
*   如果最后一个参数为空，它将不起作用。

**例子：**

如果您想要下一个或上一个帖子永久链接，您可以像这样使用它：

```
<?php echo get_permalink(custom_posttype_get_adjacent_ID('prev', 'project', get_the_ID())); ?> 
```

所以使用标签它看起来像这样：

```
<a href="<?php echo get_permalink(custom_posttype_get_adjacent_ID('prev', 'project', get_the_ID())); ?>">Previous Project</a> 
```

无法对其进行大量测试，因此如果在某些情况下无法正常工作，请告诉我，我会尝试修复/改进它。

# javascript - 资产目录中的 Rails 3.2.1 javascripts 不起作用

> ID：10376902
> 
> 赞同：0
> 
> 时间：2012-04-29T23:25:04.960
> 
> 标签：javascript, jquery, ruby-on-rails-3

奇怪的是，我无法触发 *.js 文件中的 javascript，这些文件不是 assets/javascripts 目录中的 application.js 文件。例如，如果我创建一个新的 rails 3.2.1 应用程序，并插入以下内容：

index.html.erb：

```
<%= link_to "click", "javascript:", :onclick => "call_function();" %> 
```

并将我的函数转换为 javascript 文件“anyscript.js”：

```
function call_function () {
  alert("hello2");
} 
```

仅当将 javascript 放入 application.js 文件而不是其他任何地方时，警报功能似乎才起作用。我的 application.js 文件有 require_tree 。所以它应该加载目录中的所有脚本。但如果该函数位于单独的文件中，则它不起作用。

我可以将我所有的 javascript 放在应用程序文件中，但这显然并不理想。有人遇到这个问题吗？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T00:32:03.170

好的，您确定 anyscript.js 文件包含在 JS 清单文件中，也就是 application.js？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:53:42.747

确保目录中的脚本被正确加载并且你的 require_tree 命令是正确的。在开发模式下，验证是否加载了相关脚本。如果是，它将在单击链接时运行。它不会的唯一原因是它超出范围或未定义。

# ruby-on-rails - 使用 Games 表获取 Teams 表中每个团队的胜负？

> ID：10376908
> 
> 赞同：1
> 
> 时间：2012-04-29T23:26:39.637
> 
> 标签：ruby-on-rails, database-design, application-design

我正在创建一个使用 RoR 来管理篮球联赛的应用程序。我有两张桌子：`Teams`& `Games`。该`Games`表使用外键获取两个团队，并包含每个团队的得分量，如下所示：

![团队和游戏](../Images/99cc9b0c5d248feead17f0732ce9b87b.png)

现在，我想列出所有球队，然后是他们的输赢记录。我想不出一个更简单的方法来做到这一点，而不是一个 foreach 循环来计算包含该团队的游戏表中的所有记录，并且该团队比其他团队拥有更多。然后又是损失。必须有一个更简单的方法。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:36:16.517

我同意最好不要在 Ruby 中加载所有记录并计算这些记录。在 SQL 查询中执行此操作会快得多。

```
def team_stats(team_id)
  # Wins are any game where the team played and scored higher than the other team
  wins = Game.where('(home_team_id = ? AND home_team_score > away_team_score) OR (away_team_id = ? AND home_team_score < away_team_score)', team_id, team_id).count

  # The opposite for losses
  losses = Game.where('(home_team_id = ? AND home_team_score < away_team_score) OR (away_team_id = ? AND home_team_score > away_team_score)', team_id, team_id).count

  # Ties are not accounted for

  return {:wins => wins, :losses => losses}
end 
```

# c# - 从 Master 更新内容页面

> ID：10376912
> 
> 赞同：3
> 
> 时间：2012-04-29T23:27:50.907
> 
> 标签：c#, asp.net, master-pages

我有一个母版页和一个内容页。不太清楚如何做到这一点。在母版页中执行某些操作后，如何重置/刷新内容页。我正在做的事情是更改下拉列表，然后指示您在内容页面中可以看到的内容。如果我可以从可以做到这一点的母版页调用内容页面的页面加载。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T23:50:54.577

处理页面中母版页的自定义事件。

```
//Event in MasterPage
public delegate void SomethingSelected(object sender, String SelectedValue);
public event SomethingSelected OnSomethingSelected;

//SelectedIndexChanged event in MasterPage
protected void DropDonwnList1_SelectedIndexChanged(object sender, EventArgs e)
{
    OnSomethingSelected(sender, ((DropDownList)sender).SelectedValue);
} 
```

内容页面（假设它的类型被称为`SiteMaster`）：

```
protected void Page_Init(object sender,EventArgs e){
    var master = (SiteMaster)Page.Master;
    master.OnSomethingSelected +=  MasterSelected;
}

private void MasterSelected(object sender, string selectedValue)
{ 
    // now you can handle the master's event and update your content page
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:14:23.343

有关事件的顺序，请参阅[http://msdn.microsoft.com/en-us/library/ms178472.aspx](http://msdn.microsoft.com/en-us/library/ms178472.aspx)。具体来说，“*母版页的行为类似于页面上的子控件：母版页 Init 事件发生在页面 Init 和 Load 事件之前，而母版页 Load 事件发生在页面 Init 和 Load 事件之后。* ”

# git - Git忽略gitconfig？

> ID：10376913
> 
> 赞同：13
> 
> 时间：2012-04-29T23:28:09.980
> 
> 标签：git, chmod, git-config

Git似乎忽略了`~/.gitconfig`

```
$ git config --global core.filemode false

$ git config -l
core.filemode=false
core.filemode=true 
```

所以现在有 2 个条目`core.filemode`并且 git 仍然没有忽略文件模式的变化

```
$ touch modetest

$ git add .

$ git commit -m test1
[master (root-commit) 320cfe4] test1
 0 files changed, 0 insertions(+), 0 deletions(-)
 create mode 100644 modetest

$ chmod +x modetest

$ git diff
diff --git a/modetest b/modetest
old mode 100644
new mode 100755 
```

根据[torek 的回答](https://stackoverflow.com/a/10377092)，我将此行添加到我的`.bash_profile`

```
[ -d .git ] && git config core.filemode false 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-04-30T00:00:14.153

在创建或重新初始化新存储库时，始终根据探测文件系统的结果`git init`设置新值。`core.filemode`您只需要手动：

```
git config core.filemode false 
```

或者：

```
git config --unset core.filemode 
```

使其尊重您的`~/.gitconfig`. 如果你`git init`再次运行 per-repo 设置将回到`true`你的系统上。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-02-09T18:43:19.460

也许有点矫枉过正，但在 Cygwin 中，这让我很困扰，以至于我不得不更深入地研究这个问题。当 git 从源代码构建时，它会检查它所构建的文件系统以查看它是否理解可执行位。

我继续在我的 Cygwin 系统上从源代码构建 git 并将其安装到本地目录，然后将二进制文件添加到我的路径中。基本步骤是：

```
cd ~/
mkdir git
cd git
mkdir inst
git clone -c core.autocrlf=false https://github.com/git/git.git
cd git
NO_TRUSTABLE_FILEMODE=1 make prefix=/home/[username]/git/inst/
NO_TRUSTABLE_FILEMODE=1 make prefix=/home/[username]/git/inst/ install 
```

然后在 .bashrc 中添加如下内容：

```
export PATH=/home/[username]/git/inst/bin:$PATH 
```

当然，除非您在 Cygwin 中安装了所有构建依赖项，否则该构建将无法工作。稍微戳了一下，我就可以轻松完成了。现在该系统上的 git init 和 git clone 默认文件模式为 false。诀窍是为构建定义 NO_TRUSTABLE_FILEMODE。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-22T02:13:40.600

（编辑）所以要恢复，在 Windows 上我们需要做：

```
git config --global --unset core.filemode
git config --unset core.filemode
git config core.filemode false 
```

您可以在 Git 安装目录中为新的 git 文件夹 (init) 创建一个空配置文件：

```
C:\bin\Git\share\git-core\templates>echo > config
C:\bin\Git\share\git-core\templates>notepad config 
```

并放入：

```
[core]
filemode = false 
```

# iis - IIS7 不会处理使用 XML 数据的 Flash swf 文件

> ID：10376916
> 
> 赞同：1
> 
> 时间：2012-04-29T23:28:44.627
> 
> 标签：iis, google-chrome, flash

我有一个 SWF 文件，我正在尝试使用 SWFObjects 2.2 来提供它。它可以在任何地方工作，除非从我的服务器提供给 Chrome 浏览器。具体来说：

*   本地 IIS 7、Chrome、IE 和 FF 都可以工作
*   通过本地文件系统浏览服务器适用于 Chrome、IE 和 FF
*   服务器浏览 IIS 7，适用于 IE 和 FF，不适用于 Chrome

我的服务器 IIS 将向 Chrome 浏览器提供普通的 SWF 文件，而不是这个使用 XML 数据文件的特定 SWF 文件。我的 SWF 文件、XML 数据文件和引用的图像都在同一个文件夹中（希望尽早消除它作为可能的错误来源）。

什么可能的 IIS 7 设置会阻止 Chrome 浏览器呈现使用 XML 数据文件的 SWF 文件？有没有办法在 Chrome 浏览器中进行故障排除以了解错误是什么？

这是我正在使用的 .htm 文件（由 SWFObjects 生成）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
    <head>
        <title></title>
        <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
        <script type="text/javascript" src="swfobject.js"></script>
        <script type="text/javascript">
            swfobject.registerObject("myFlashContent", "9.0.0");
        </script>
    </head>
    <body>
        <div>
            <object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="800" height="600" id="myFlashContent">
                <param name="movie" value="banner.swf" />
                <param name="flashvars" value="file=data.xml" />
                <!--[if !IE]>-->
                <object type="application/x-shockwave-flash" data="banner.swf" width="800" height="600">
                    <param name="flashvars" value="file=data.xml" />
                <!--<![endif]-->
                    <a href="http://www.adobe.com/go/getflashplayer">
                        <img src="http://www.adobe.com/images/shared/download_buttons/get_flash_player.gif" alt="Get Adobe Flash player" />
                    </a>
                <!--[if !IE]>-->
                </object>
                <!--<![endif]-->
            </object>
        </div>
    </body>
</html> 
```

在带有 Chrome 的服务器上使用它，我得到的只是一个空白页。

TIA,

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:32:55.900

> 在带有 Chrome 的服务器上使用它，我得到的只是一个空白页。

如果您右键单击 swf 应该在的位置，您是否在上下文菜单中看到“Swf 未加载”消息？如果是这样，打开 Chrome 的开发者控制台，启动网络选项卡并刷新页面。您应该会看到对 swf 的服务器的请求，这可能会提示您加载失败的原因。

如果您没有看到“未加载 SWF”消息，而是看到常规的 Chrome 上下文菜单，则浏览器甚至没有尝试加载。

# jquery - 使用动态更新的内容序列化可排序的 Jquery-ui

> ID：10376921
> 
> 赞同：0
> 
> 时间：2012-04-29T23:29:55.097
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有一个可排序的列表，当项目移动时更新我的​​数据库。但是，还有一个功能，用户可以动态地将新项目添加到列表中。当这些项目被添加时，由于某种原因，在更新数据库中的项目位置时，可排序的行为就好像它们不存在一样。

有没有办法在添加项目后基本上序列化可排序列表，以便它在页面上基本上是“活的”？

我已经查看了`.refresh()`代码，但这似乎不起作用......谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:37:05.603

如果足够简单，您可以使用添加序列的回调方法并像那样更新数据库。

```
$("#newtab").appendTo("#sortableContainer", function() {
    //OK its time to update this addition to the database
}); 
```

# python - 从文本文件中读取非 ASCII 字符

> ID：10376923
> 
> 赞同：5
> 
> 时间：2012-04-29T23:30:07.433
> 
> 标签：python, character-encoding

我正在使用python 2.7。我已经尝试了很多东西，比如编解码器，但没有奏效。我怎样才能解决这个问题。

我的文件.txt

```
wörd 
```

我的代码

```
f = open('myfile.txt','r')
for line in f:
    print line
f.close() 
```

输出

```
s\xc3\xb6zc\xc3\xbck 
```

Eclipse 和命令窗口的输出相同。我用的是Win7。当我不从文件中读取时，任何字符都没有问题。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-09T11:58:32.903

```
import codecs
#open it with utf-8 encoding 
f=codecs.open("myfile.txt","r",encoding='utf-8')
#read the file to unicode string
sfile=f.read()

#check the encoding type
print type(file) #it's unicode

#unicode should be encoded to standard string to display it properly
print sfile.encode('utf-8')
#check the type of encoded string

print type(sfile.encode('utf-8')) 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-30T00:16:51.200

1.  首先 - 检测文件的编码

```
 from chardet import detect
  encoding = lambda x: detect(x)['encoding']
  print encoding(line) 
```

2.  然后 - 将其转换为 unicode 或您的默认编码 str：

```
 n_line=unicode(line,encoding(line),errors='ignore')
  print n_line
  print n_line.encode('utf8') 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T00:18:12.270

这是终端编码。尝试使用您在文件中使用的相同编码配置您的终端。我建议您使用 UTF-8。

顺便说一句，对所有输入输出进行解码编码以避免出现问题是一个好习惯：

```
f = open('test.txt','r')    
for line in f:
    l = unicode(line, encoding='utf-8')# decode the input                                                                                  
    print l.encode('utf-8') # encode the output                                                                                            
f.close() 
```

# c# - 当我将字符串输出到 Windows 窗体中的选中列表框时，仅该字符串的第一行显示在复选框旁边

> ID：10376928
> 
> 赞同：0
> 
> 时间：2012-04-29T23:31:24.157
> 
> 标签：c#, winforms

当我单击下面的按钮方法时

```
private void button1_Click(object sender, EventArgs e)
    {
        string output;

        //Concatenate the text value of the 3 text boxes
        output = "Task: " + this.textBoxTask.Text + "\r\n";
        output += "Description: " + this.textBoxDescription.Text + "\r\n";
        output += "Due Date: " + this.textBoxDueDate.Text + "\r\n";

        this.checkedListBoxTasks.Items.Add(output);

    } 
```

在“任务：我在文本框中写的任何内容”这一行上，复选框旁边显示了是否有让它显示其他两行？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T02:04:17.507

试试这个。

```
this.checkedListBoxTasks.Items.Add(this.textBoxTask.Text);
this.checkedListBoxTasks.Items.Add(this.textBoxDescription.Text);
this.checkedListBoxTasks.Items.Add(this.textBoxDueDate.Text); 
```

希望这对您有所帮助。:D

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-30T00:01:28.547

尝试使用**System.Text 命名空间**中的**StringBuilder 类**进行字符串连接。

# java - 正则表达式匹配相同数字的模式

> ID：10376933
> 
> 赞同：1
> 
> 时间：2012-04-29T23:32:16.830
> 
> 标签：java, regex, string

我一直在尝试编造一个搜索数字模式的正则表达式。例如，正则表达式应该从 172564817256481725648 中提取 1725648。

目前，我有 `(\\d+){1+}`，但它只是返回空白。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T23:35:15.767

我不认为你会找到一个正则表达式来做到这一点。您需要更强大的机制来做您正在寻找的事情，其中​​之一就是[Robin-Karp 算法](http://en.wikipedia.org/wiki/Rabin%E2%80%93Karp_algorithm)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T05:51:16.343

这将适用于您的示例

```
^(\d+)\1+$ 
```

[在 Regexr 上](http://regexr.com?30q9v)查看

您可以从组 1 中获取找到的模式。

这将匹配相同数字序列的序列。`\1`是对中匹配内容的反向引用`(\d+)`。我`+`在它后面放了一个，所以它需要匹配这个序列直到最后。`^`将其锚定到字符串的开头和`$`结尾。

但是你的要求不是很清楚。[看到这个](http://regexr.com?30qa2)

```
(\d+).*\1 
```

它缺少锚点，并允许`.*`在搜索模式之间存在内容。但它只会找到字符串中的第一个序列，该序列稍后会在字符串中重复。

```
Hello1725648Foo987Bar987Foobar1725648  
     |||||||__________________||||||| 
```

它会发现`1725648`

```
He987llo1725648FooBar987Foobar1725648
  |||________________||| 
```

它会发现`987`

```
123He987llo1725648FooBar987Foobar1725648
|________________________________| 
```

它只会找到`1`

# jquery - 重新提交具有 jQuery 提交函数并返回 False 的表单

> ID：10376935
> 
> 赞同：2
> 
> 时间：2012-04-29T23:33:27.513
> 
> 标签：jquery, forms, submit, return

我正在使用 jquery 在提交表单时调用操作。我也在使用 return false; 以防止页面被刷新。但是，当我尝试重新提交表单时 - 它不起作用，但我需要它（例如在字段中输入新数据）。

目前，我正在使用这种结构：

```
<form action="" method="POST" id="myform">
<input type="text" name="test" value="test">
</form>

    $(document).ready(function(){
    $('#myform').submit(function(){
    // Some action here
    return false;
    });
    }); 
```

编辑：我不想提交表格。我只想让它在每次按下提交按钮时触发一个 jQuery 函数。对于当前示例，该操作仅起作用一次（第一次按下提交按钮时）。似乎阻止完全停止了提交按钮的功能。

EDIT2：好的，让我澄清一下。我没有提交按钮。我只有一个文本输入，每当有人填写它并按下 Enter 键（例如表单的提交被触发）时，我想通过 jQuery 获取这个输入值并做一些事情。问题是现在我只能这样做一次（在文本输入中使用新值第二次按 enter 没有任何作用）。我猜 return false 是造成这种情况的原因。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T23:38:56.300

删除 return false 然后它可以工作。您正在阻止提交表单。

```
$(document).ready(function() {
    $("myButton").click(function() {
        $('#myform').submit(function() {
            // Some action here
            //return false;
        });
    });
});​ 
```

# java - 将 spinnermodel 更改为双精度值，以便稍后在更改事件之外使用

> ID：10376937
> 
> 赞同：0
> 
> 时间：2012-04-29T23:34:18.453
> 
> 标签：java, eclipse, swing, user-interface, jform-designer

我遇到的问题是将 SPinnerModel 类型更改为 double 类型，因为稍后将在程序中使用它。我也不能在它的方法之外使用 weightSpinnerMetric，但我不确定如何解决这个问题。

再次感谢各位。

```
import javax.swing.*;
import javax.swing.event.*;

public class UI  {

private JSpinner weightSpinnerMetric;

 //Need to change the weightSpinnerMetric to double and then use it here but cannot do either

private void weightSpinnerMetricStateChanged(ChangeEvent e) {
JSpinner weightSpinnerMetric = (JSpinner) e.getSource();
SpinnerModel spinnerModel = weightSpinnerMetric.getModel();
System.out.println(spinnerModel.getValue());

weightSpinnerMetric = new JSpinner(); //Spinner created here.

weightSpinnerMetric.setModel(new SpinnerNumberModel(3, 3, 31, 1));
        weightSpinnerMetric.addChangeListener(new ChangeListener() {
            @Override
            public void stateChanged(ChangeEvent e) {
                weightSpinnerMetricStateChanged(e);
                weightSpinnerMetricStateChanged(e);
            }
        });
}} 
```

就目前而言，我希望在另一种方法（A 按钮）中调用 spinnermodel，以便在按下按钮时调用 spinnermodel 值，对于一个视觉示例，我有以下内容：![在此处输入图像描述](../Images/c78898b3e4b6079e991fcf4059a894f3.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T00:24:41.163

如果其他方法在同一个类 UI 中，就调用它？如：

```
weightSpinnerMetric.getModel().getValue(); 
```

如果您需要将其与`(double)`.

如果该方法在另一个类中，则应在 UI 中提供类似于以下的非私有方法：

```
public double getCurrentWeight() {
    return (double) weightSpinnerMetric.getModel().getVale();
} 
```

另一种方法是让一个变量保存当前输入权重，并更新它`weightSpinnerMetricStateChanged`而不是`System.out.println(spinnerModel.getValue())`将该值设置为该变量。

# objective-c - 读取文本文件的行

> ID：10376942
> 
> 赞同：2
> 
> 时间：2012-04-29T23:34:45.253
> 
> 标签：objective-c

我得到一个具有特定行数的远程文本文件。每一行都有相同的格式，并且在每一行的末尾都有一个`0x0D`（*回车*）和`0x0A`（*新行*）。

如果我运行以下代码，则连续：

```
NSError *error = nil;
NSString *words = [[NSString alloc] initWithContentsOfFile:path
                              encoding:NSUTF8StringEncoding error:&error];
NSArray* lines = [words componentsSeparatedByCharactersInSet:[NSCharacterSet newlineCharacterSet]];   

for(NSString *str in lines){
        NSLog(@"%@",str);
} 
```

由于这些行尾字符，我在每个文本行之间都有一个空白行。您将如何自定义我的阅读并阅读没有那些空行的那些行？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T23:58:46.477

看看[`-[NSString enumerateLinesUsingBlock:]`](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSString_Class/Reference/NSString.html#//apple_ref/doc/uid/20000154-SW87)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:02:06.593

您可以尝试以下方法：

```
NSArray* lines = [words componentsSeparatedByString:@"\r\n"]]; 
```

# symfony - Assetic 找不到文件

> ID：10376946
> 
> 赞同：13
> 
> 时间：2012-04-29T23:35:10.127
> 
> 标签：symfony, assetic

我正在尝试在树枝模板中链接一个 css 文件（位于一个包中）：

```
{% stylesheets 
    '@AcmeFooBundle/Resources/public/css/bootstrap.min.css' 
%}
    <link href="{{ asset_url }}" rel="stylesheet"/>
{% endstylesheets %} 
```

我收到的第一条错误消息是：

*您必须将 AcmeFooBundle 添加到assetic.bundle 配置...*

这是配置：

```
# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    bundles:        []
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
        #closure:
        #    jar: %kernel.root_dir%/Resources/java/compiler.jar
        #yui_css:
        #    jar: %kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar 
```

然后我尝试在**bundles**指令中添加 AcmeFooBundle 但随后出现错误：

*找不到文件....*

我不明白我在这里做错了什么......

在控制台中转储资产配置的默认配置（使用**php app/console config:dump-referenceassetic ）我可以看到****捆绑**指令中列出的 AcmeFooBundle 捆绑...

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-04-30T04:13:58.337

除非您需要将 Assetic 的某些捆绑包列入白名单，否则只需`bundles`从配置中删除该选项即可。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-12-26T14:44:38.823

以下对我有用：

1.  创建捆绑包，例如：

    ```
    php app/console generate:bundle --namespace=Acme/Bundle/BlogBundle --no-interaction 
    ```

    请参阅：[生成新的捆绑包骨架](http://symfony.com/doc/2.0/bundles/SensioGeneratorBundle/commands/generate_bundle.html)

2.  添加 Assetic 导入，如下所示：

    ```
    {% javascripts '@AcmeBlogBundle/Resources/public/js/*' %}
    <script type="text/javascript" src="{{ asset_url }}"></script>
    {% endjavascripts %} 
    ```

3.  将 Bundle 添加到资产配置：

    ```
    # Assetic Configuration
    assetic:
        ...
        bundles:        ['AcmeBlogBundle']
        ... 
    ```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-28T05:14:29.000

我遇到了同样的问题，elnur 的建议奏效了。这是我的资产配置供您参考

```
# Assetic Configuration
assetic:
    debug:          %kernel.debug%
    use_controller: false
    #bundles:        [ ]
    #java: /usr/bin/java
    filters:
        cssrewrite: ~
        #closure:
        #    jar: %kernel.root_dir%/Resources/java/compiler.jar
        yui_css:
            jar: "%kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar"
        yui_js:
            jar: "%kernel.root_dir%/Resources/java/yuicompressor-2.4.7.jar" 
```

# c# - 如何构造并保存到数据库以供以后使用半任意 lambda 表达式？

> ID：10376947
> 
> 赞同：2
> 
> 时间：2012-04-29T23:35:11.153
> 
> 标签：c#, lambda

我正在创建一个报告引擎。我试图使其更通用的挑战之一是试图弄清楚如何为用户的查询提供更大的灵活性，这意味着生成自己的查询以供以后使用，而不是使用我提供的固定集合。

例如，假设我有一个 Document 对象，它有 N Section 对象，其中有 N Line 对象。

在具有更多静态目标的代码中，我可以使用文档列表上的 where 子句和 lambda 表达式轻松获取 Documents 列表，其中有一个具有 Line 的 Section 的值包含一些文本。

然而，有很多（几乎是无限的）可能的表达方式，因此将人们限制在一个子集或必须将每个可能的路径编码为参数化方法并不是真正可行的。

所以问题是，我该如何 1）从字符串数据构造一个 lambda 表达式（这意味着我如何有效地将一些数据发布到服务器，我可以灵活地转换为表达式）和 2）我如何保存该表达式以供以后使用在数据库中？

可能只有 #1 是真正相关的，因为如果我可以在 POST 数据时构造表达式，我可以将该字符串信息存储到数据库并执行相同的过程，但我目前不知道如何完成 #1

有什么建议么？我觉得这在理论上是可行的，但我显然错过了基本方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:44:45.823

不确定这是否对您有帮助，但这里有一些建议：

1.  考虑使用谓词生成器。[这是](http://www.albahari.com/nutshell/predicatebuilder.aspx)有关该方法的更多信息。

2.  您也许可以使用动态 linq，并且可以将查询保存在数据库中以供以后使用，就像常规字符串一样。我对这种方法没有经验，但如果你有兴趣，可以在[这里阅读。](https://stackoverflow.com/questions/125400/generic-linq-query-predicate)

祝你引擎好运，听起来很有趣！

# python - 使用 Mac OSX 管理员帐户安装 Beautifulsoup

> ID：10376950
> 
> 赞同：0
> 
> 时间：2012-04-29T23:35:19.003
> 
> 标签：python, macos, installation, beautifulsoup, easy-install

需要帮助....我尝试了很多次使用管理员帐户安装beautifulsoup4-4.0.0b3，但失败了很多次。我使用 Macpro OS X Lion 10.7.2

终端中发生的事情如下：

> 当我打字时：`easy_install beautifulsoup4`

回应：

```
error: can't create or remove files in install directory 
The following error occurred while trying to add or remove files in 
the installation directory: 
[Errno 13] Permission denied: '/Library/Python/2.7/site-packages/ 
test-easy-install-411.write-test' 
The installation directory you specified (via --install-dir, --prefix, 
or the distutils default setting) was: 
    /Library/Python/2.7/site-packages/ 
Perhaps your account does not have write access to this directory?  If 
the installation directory is a system-owned directory, you may need to 
sign in as the administrator or "root" account.  If you do not have 
administrative access to this machine, you may wish to choose a different 
installation directory, preferably one that is listed in your PYTHONPATH 
environment variable. 
For information on other options, you may wish to consult the 
documentation at: 
  http://peak.telecommunity.com/EasyInstall.html 
Please make the appropriate changes for your system and try again. 
```

并且它自动重复了这个对话：

```
$ easy_install cd beautifulsoup4-4.0.0b3 
error: can't create or remove files in install directory 
The following error occurred while trying to add or remove files in 
the installation directory: 
    [Errno 13] Permission denied: '/Library/Python/2.7/site-packages/ 
test-easy-install-415.write-test' 
The installation directory you specified (via --install-dir, --prefix, 
or the distutils default setting) was: 
    /Library/Python/2.7/site-packages/ 
Perhaps your account does not have write access to this directory?  If 
the installation directory is a system-owned directory, you may need to 
sign in as the administrator or "root" account.  If you do not have 
administrative access to this machine, you may wish to choose a different 
installation directory, preferably one that is listed in your PYTHONPATH 
environment variable. 
For information on other options, you may wish to consult the 
documentation at: 
  http://peak.telecommunity.com/EasyInstall.html 
Please make the appropriate changes for your system and try again. ` 
```

它几乎让我发疯。感谢任何人帮助我找出问题所在...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:44:12.830

简单：尝试`sudo easy_install beautifulsoup4`然后输入您的管理员密码。

更难：我建议设置一个[virtualenv](http://pypi.python.org/pypi/virtualenv)。设置完成后，您可以在没有管理员密码的情况下安装东西。这也是有利的，因为如果你搞砸了 Python 安装，你可以删除 virtualenv 并重新开始。（你确实需要安装 XCode 来设置一个 virtualenv，所以它可能有点麻烦）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T23:41:55.367

该错误`permission denied`表明您确实具有写入权限，因此您需要`sudo`在命令前面使用。

使用`sudo easy_install beautifulsoup4`或更好，`pip install beautifulsoup4`无需[`virtualenv`](http://docs.python-guide.org/en/latest/dev/virtualenvs/)使用`sudo`.

# java - 本地主机上的 Java 无效 HTTP 响应

> ID：10376951
> 
> 赞同：3
> 
> 时间：2012-04-29T23:35:32.603
> 
> 标签：java, http, networking

我为一个学校项目编写了一个包，用户可以在其中指定一个服务器 url 并获取它返回的 xml。尽管在客户端，我遇到了一个错误。

模拟 API 类

```
import java.net.*;
import java.util.ArrayList;
import java.io.*;

public class ParkingLotInstance {
/*
 * Parking Lot API instance
 *      Constructor
 *          URL - String
 *          Port - int
 */

public static URL serverURL;

public ParkingLotInstance( URL connurl){
    serverURL = connurl;
}

public String getParkingLotInfo(){
    //Get a response from API server

    URL APIurl = this.serverURL;
    System.out.println(APIurl);
    try {
        BufferedReader in = new BufferedReader(
                new InputStreamReader(APIurl.openStream()));

        String APIresponse;
        while ((APIresponse = in.readLine()) != null)
            return APIresponse;
        in.close();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;

}

public ArrayList parseParkingLotInfo( String XML ){
    //Parse XML into array list

    return null;
}
} 
```

主班

```
package parkinglot_api;

import java.net.MalformedURLException;
import java.net.URL;

public class Example {

/**
 * @param args
 */
public static void main(String[] args) {
    // TODO Auto-generated method stub
    URL serverURL;
    try {
        serverURL = new URL("http://localhost:8080");

        ParkingLotInstance API = new ParkingLotInstance(serverURL);

        String parkingLotXML = API.getParkingLotInfo();

        System.out.println(parkingLotXML);
    } catch (MalformedURLException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }

}

 } 
```

我得到的错误

```
http://localhost:8080
null
java.io.IOException: Invalid Http response
at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source)
at java.net.URL.openStream(Unknown Source)
at parkinglot_api.ParkingLotInstance.getParkingLotInfo(ParkingLotInstance.java:28)
at parkinglot_api.Example.main(Example.java:20) 
```

服务器代码

[https://bitbucket.org/it460/parking-lot-api/src/f7095b71eb11/server](https://bitbucket.org/it460/parking-lot-api/src/f7095b71eb11/server)

我不太了解 Java，尤其是网络方面的东西，所以上面是在 localhost:8080 上运行服务器并吐出 xml 的代码的链接。不确定在哪里设置标题，老实说很高兴它输出了 xml。我需要调整的原因是教授希望我将客户端打包，以便另一个小组可以指定应用服务器 url 并获取数据。这就是我在此处发布的代码中所尝试的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T03:29:59.507

在您的 Response 类中包含以下内容：

```
response += "HTTP/1.1 200 OK\n";
response += "Content-Type: application/xml\n\n";

if ( format.equals("xml")){
      // Retrieve XML Document
       String xml = LotFromDB.getParkingLotXML();
       response += xml;
} 
```

注意：您应该避免编写自己的 Web 服务器。而是使用现有的 Web 服务器，这将有很大帮助。上述更改将解决您当前的问题，但如果您继续沿着这条线前进，您将遇到更多问题。我建议您考虑为您的服务器实现使用任何[servlet 引擎](http://jetty.codehaus.org/jetty/)。此外，在客户端上使用成熟的 HTTP 客户端库，例如[Apache Http Client](http://hc.apache.org/httpclient-3.x/)，而不是`java.net.URL`类。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T01:23:22.137

看起来像标题处理的问题。请使用 tcp monitor（例如：[http](http://ws.apache.org/commons/tcpmon) ://ws.apache.org/commons/tcpmon form apache）来查找问题。例如，它可能是由不正确的字符编码或消息多部分编码（猜测）的特定方式引起的。

# visual-studio - 如何在项目的特定文件夹中为特定类型的所有文件运行 Visual Studio 宏

> ID：10376956
> 
> 赞同：1
> 
> 时间：2012-04-29T23:36:53.403
> 
> 标签：visual-studio, visual-studio-2010, macros

Visual Studio 2010 宏问题：

我有一个宏，我可以在另一个宏中执行它来更改 .aspx 文件，如下所示：

```
DTE.ExecuteCommand("Macros.Abba.Module1.AbbaZabba") 
```

我希望能够对解决方案资源管理器中文件夹中的所有 .aspx 文件执行此操作。

例如，我的解决方案资源管理器如下所示：

解决方案“您的解决方案名称”

-项目1

--父文件夹

---子文件夹

而且我希望能够为子文件夹中的每个 .aspx 文件运行此宏 - 但没有非 aspx 文件。我已经寻找了几天的方法来做到这一点，但似乎没有任何效果，现在我必须在每个文件上手动运行宏，这可能需要一段时间。

我不介意手动输入文件夹名称，也不介意在运行宏之前选择文件夹。我是编码方面的初学者，所以推荐我使用某种方法或其他方法比什么都没有帮助，但比帮助我稍微完成它的帮助要小。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T14:37:52.727

我最终通过拼接两种不同的方法（一种用于查找文件夹，另一种用于遍历文件）来实现自己的工作。

找到我想要的文件夹的一个在这里，切换触发宏：

[http://msdn.microsoft.com/en-us/library/bb264485(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bb264485(v=vs.80).aspx)

迭代宏是这里有用的答案：

[需要 Visual Studio 宏才能将横幅添加到所有 C# 文件](https://stackoverflow.com/questions/415101/need-visual-studio-macro-to-add-banner-to-all-c-sharp-files)

最终的解决方案：

```
Imports System
Imports System.ComponentModel
Imports EnvDTE
Imports EnvDTE80
Imports EnvDTE90
Imports EnvDTE90a
Imports EnvDTE100
Imports System.Diagnostics

Public Module iterateFolder
  Sub IterateFiles(Optional ByVal dbProjName As String = "")
    Dim project As Project
    Dim parentFolder As String = ""
    Dim courseFolder As String = ""

    If (String.IsNullOrEmpty(dbProjName)) Then
        dbProjName = InputBox("Type the database project name.")
        If (String.IsNullOrEmpty(dbProjName)) Then
            Return
        End If
    End If

    If (String.IsNullOrEmpty(parentFolder)) Then
        parentFolder = InputBox("Type the parent folder name.")
        If (String.IsNullOrEmpty(parentFolder)) Then
            Return
        End If
    End If

    If (String.IsNullOrEmpty(courseFolder)) Then
        courseFolder = InputBox("Type the child folder name.")
        If (String.IsNullOrEmpty(courseFolder)) Then
            Return
        End If
    End If

    For Each project In DTE.Solution
        Dim projectItem As EnvDTE.ProjectItem
        If (dbProjName.Equals(project.Name)) Then
            For Each projectItem In project.ProjectItems()
                If (projectItem.Name = parentFolder) Then
                    Dim subItem As EnvDTE.ProjectItem
                    For Each subItem In projectItem.ProjectItems()
                        If (subItem.Name = courseFolder) Then
                            IterateProjectFiles(subItem.ProjectItems)
                        End If
                    Next
                End If
            Next
        End If
    Next
End Sub
Private Sub IterateProjectFiles(ByVal prjItms As ProjectItems)
    For Each file As ProjectItem In prjItms
        If file.SubProject IsNot Nothing Then
            DTE.ExecuteCommand("View.SolutionExplorer")
            If file.Name.EndsWith(".aspx") Then
                file.Open()
                file.Document.Activate()
                DTE.ExecuteCommand("Macros.Abba.Module1.AbbaZabba")
            End If
            IterateProjectFiles(file.ProjectItems)
        ElseIf file.ProjectItems IsNot Nothing AndAlso file.ProjectItems.Count > 0 Then
            DTE.ExecuteCommand("View.SolutionExplorer")
            If file.Name.EndsWith(".aspx") Then
                file.Open()
                file.Document.Activate()
                DTE.ExecuteCommand("Macros.Abba.Module1.AbbaZabba")
            End If
            IterateProjectFiles(file.ProjectItems)
        Else
            DTE.ExecuteCommand("View.SolutionExplorer")
            If file.Name.EndsWith(".aspx") Then
                file.Open()
                file.Document.Activate()
                DTE.ExecuteCommand("Macros.Abba.Module1.AbbaZabba")
            End If
        End If
    Next
End Sub
End Module 
```

您可以硬编码项目和文件夹名称，或者只是其中的一些名称，或者将它们全部留空，具体取决于您需要多少多功能性。

我应该在这里注意 abbazabba 宏执行文件的关闭和保存，但如果这对任何人有用，您可以从本文的第二个链接中获得如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:34:51.887

看看 Visual Studio 2010 附带的“AddDirAsSlnFolder”示例宏。它看起来有很多您正在寻找的功能。

# xml - 文件存在的问题命令 windows phone

> ID：10376961
> 
> 赞同：1
> 
> 时间：2012-04-29T23:37:43.973
> 
> 标签：xml, windows-phone-7.1, isolatedstorage

我在互联网上发现了这个代码来检查文件是否存在

```
using (var store = IsolatedStorageFile.GetUserStoreForApplication())
            {
                if (store.FileExists("Setting.xml"))
                {
                    MessageBox.Show("have file");
                }
                else
                {
                    MessageBox.Show("haven't file");                    
                }
            } 
```

当我尝试时，它只显示条件“尚未归档”。是否有 Setting.xml 文件？（我可以通过 XDocument data = XDocument.Load("Setting.xml"); 加载这个文件）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-28T20:50:06.857

你能检查一下这个“Setting.xml”文件在IsolatedStorage中吗？

因为，为了访问来自 IsolatedStorage 的文件 - 您应该使用 IsolatedStorageFileStream。

# c++ - OpenFileMapping 问题，找不到文件映射

> ID：10376962
> 
> 赞同：0
> 
> 时间：2012-04-29T23:37:51.803
> 
> 标签：c++, c, winapi, file-mapping

我目前正在尝试使用文件映射来测试进程间通信。我将调用生产者的第一个程序在以下创建文件映射并写入它的代码上不会出错，如下所示：

```
 hEvent = CreateFileMapping(
             INVALID_HANDLE_VALUE,    // use paging file
             NULL,                    // default security
             PAGE_READWRITE,          // read/write access
             0,                       // maximum object size (high-order DWORD)
             256,                // maximum object size (low-order DWORD)
             TEXT("hEvent")); 

if (hEvent == NULL)
{
    MessageBox(NULL, TEXT("error: cannot create file map"), TEXT("gotit"), MB_OK);
  _tprintf(TEXT("Could not create file mapping object (%d).\n"),
         GetLastError());
  return 1;
}

 mapBuffer = (LPTSTR) MapViewOfFile(hEvent, FILE_MAP_ALL_ACCESS, NULL, NULL, 256);
            if (mapBuffer == NULL)
{
   MessageBox(NULL, TEXT("error: cannot view map"), TEXT("gotit"), MB_OK);
  _tprintf(TEXT("Could not map view of file (%d).\n"),
         GetLastError());

   CloseHandle(hEvent);

  return 1;
}

            CopyMemory((PVOID)mapBuffer, teststring, 256);
            _getch();

             UnmapViewOfFile(mapBuffer);
             CloseHandle(hEvent); 
```

但是，我的第二个程序正在模仿第二个进程，我将命名消费者，在尝试使用以下代码重新打开此文件映射时出错：

```
 hEvent = OpenFileMapping(FILE_MAP_ALL_ACCESS, FALSE, TEXT("hEvent"));
             if (hEvent == NULL)
 {
  MessageBox(NULL, TEXT("error opening filemap"), TEXT("gotit"), MB_OK);
         GetLastError();
  return 1;
 } 
```

任何人都可以看到我遗漏的任何明显的东西吗？，因为它直接在我的头上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T23:50:45.123

像所有内核对象一样，文件映射在最后一个句柄关闭时被删除。由于您的第一个程序立即关闭句柄，因此第二个程序找不到任何内容。只要您希望映射存在，就必须保持句柄打开。

# haskell - 为什么这个 Haskell 类型类代码不起作用？

> ID：10376963
> 
> 赞同：1
> 
> 时间：2012-04-29T23:38:14.417
> 
> 标签：haskell, typeclass

试图找出 Haskell 类型类。为什么以下不起作用？

```
{-# LANGUAGE FlexibleInstances #-}
class IntClass t
instance IntClass Int

intToIntClass  :: (IntClass r) => Int -> r
intToIntClass  x = x 
```

显然，“实例”并不意味着我认为它应该意味着什么。相反，它给出了我不明白的错误消息。

```
Could not deduce (r ~ Int)
from the context (IntClass r)
  bound by the type signature for intToIntClass  :: IntClass r => Int -> r
  at f.hs:10:1-16
  `r' is a rigid type variable bound by
      the type signature for intToIntClass  :: IntClass r => Int -> r
      at f.hs:10:1
In the expression: x
In an equation for `intToIntClass t': intToIntClass  x = x 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T23:46:43.170

签名

```
intToIntClass  :: (IntClass r) => Int -> r 
```

意味着`intToIntClass`可以产生调用者想要的任何类型的值，只要该类型属于`IntClass`. 但实现只能产生`Int`价值。

没有帮助的`Int`是 - 到目前为止 - 唯一的实例，就编译器而言，可能在其他模块中定义了更多实例，因此编译器不能接受仅产生`Int`s 的方法。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-29T23:50:10.283

你写的函数说，“给我一些东西，我会把它还给你。” 您编写的类型说：“我可以将 an`Int`转换为调用者想要的任何类型，只要该类型是类型类的实例`IntClass`。”

当我们把它们放在一起时，我们有一个函数可以`Int`从调用者那里获取一个，然后直接返回。除了当返回相同`Int`的值时，它将是调用者想要的任何类型的值，只要该类型是类型类的成员`IntClass`。输入如何从`Int`调用者想要的任何（受约束的）类型变为？它不能。由于输入是直接返回的，因此返回类型必须与参数类型相同。类型检查器从您的代码中推断出这一点，但随后无法将该推断与您命名输出类型相协调`r`。类型检查器希望与您一起解决此问题，但不能确定这`r`与`Int`给定唯一假设`r`是类型类实例的情况相同`IntClass`。

在typeclass`fromInteger`中找到了一个与您编写的函数很相似的函数。`Num`如果您想谈论可以基于 an 构造的所有类型`Int`，那么这应该是您的类型类的方法。就像是：

```
class IntClass a where
  intToIntClass :: Int -> a 
```

您将为您希望成为 实例的每种类型定义此方法`IntClass`，并具有您想要的`intToIntClass :: IntClass r => Int -> r`. 这种返回类型多态性严重依赖于每个参与类型具有适当的定义`intToIntClass`。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-29T23:48:26.163

你的类型很好。例如，这有效：

```
intId :: IntClass r => r -> r
intId = id 
```

问题是，的*类型*`intToIntClass`签名说它映射`Int`到. 编译器无法证明 that是 的*唯一*成员，因此由于严格返回的主体，它的多态性不够。*`IntClass``Int`*`IntClass``intToIntClass``Int`**

 *** * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-30T07:06:58.647

为了进一步澄清，假设我将您的模块与一个新实例一起使用：

```
instance IntClass Integer 
```

然后你的实现`intToIntClass`也承诺有 type `(IntClass Integer => Int -> Integer)`。但是您的实现与此冲突。编译器假定类型类是“开放的”，这意味着

1.  未来可能会出现新的实例，并且
2.  今天的代码不能在这样的未来改变行为

因此，编译器看到今天唯一的实例是 for，`Int`但它不能假设这将在未来保持不变。

(1.) 和 (2.) 的结合使思考和推理 Haskell 代码变得更加容易。当您知道今天的新实例不能搞砸昨天的代码并且今天的代码对明天的新实例是安全的时，警告要少得多。**

# backbone.js - 如何在 Backbone.js 应用程序中保存对本地数据的任何更改？

> ID：10376964
> 
> 赞同：3
> 
> 时间：2012-04-29T23:38:15.443
> 
> 标签：backbone.js

我正在做一个本地 Backbone.js 应用程序并使用一个名为 data 的本地文件夹来放置初始数据。在我的 Backbone.router 中，我使用 ajax 来获取初始数据，如下所示：

```
p = $.ajax({
        url: 'data/todolist.json',
        dataType: 'json',
        data: {},
        success: function(data) {
            var approuter = new AppRouter({data: data});
            Backbone.history.start();
        }
    }) 
```

我的`initialize`方法`AppRouter`如下：

```
initialize: function(options){
        this._data = options.data;
        this._todos = new TodosCollection(options.data);
        this._length = this._todos.length;
        this._index = new CategoriesView({collection: this._todos});
    }, 
```

在我的应用程序中，每次在我的 Backbone.View 中创建、删除和更新项目时，我都会使用`this.model.destroy()`,`this.collection.add()`或`this.model.set()`来更新我的模型和集合。但似乎它没有将这些更改保存到我的初始数据，即上面的“todolist.json”。当我刷新整个页面时，应用程序仍然显示初始数据。我想要做的是每次我的视图发生一些变化时数据文件都会更新。那么我应该如何实现呢？

还有一个问题：如果我想使用 localStorage 来保存这些数据怎么办？我不需要在路由器中使用 ajax 调用吗？我一开始只是`Backbone.Collection.fetch()`在Router的`initialize`方法中使用了一个方法，应用程序启动后，每次使用时localStorage都会自动更新数据`this.model.destroy()`，`this.collection.add()`还是`this.model.set()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-04T06:38:43.420

您要将修改后的数据写回 .json 文件，还是要将 .json 文件用作初始数据，然后使用 Local Storage/IndexedDB/Web SQL/... 进行持久化？无论如何，Backbone 非常轻量级，并且不支持这些开箱即用的功能。你必须自己写这个，或者找一个插件来做这个。

[使用FileSystem API](http://www.html5rocks.com/en/tutorials/file/filesystem/)在 HTML5 应用程序中写入本地文件应该是可能的，但要让它在所有浏览器中工作可能会很棘手。此外，您只能在文件系统的特殊沙盒部分中读取/写入文件。

对于本地存储，请查看backbone-localstorage.js 插件。Backbone 中包含的 Todo 示例应用程序也使用了这个插件。在我看来，基本上，您需要覆盖模型的 fetch 和 sync 方法。

# iphone - 在iOS应用程序中，为什么prepareForSegue发生在didSelectRowAtIndexPath之前

> ID：10376967
> 
> 赞同：13
> 
> 时间：2012-04-29T23:38:43.073
> 
> 标签：iphone, ios5

我正在尝试将单元格行为更改为：1）当单元格被点击时，将单元格标记为完整并带有复选标记 2）当点击详细信息披露附件按钮时，执行 Segue。3）在 tableView:didSelectRowAtIndexPath: 我有：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    AWDelivery *delivery = [self.fetchedResultsController objectAtIndexPath:indexPath];
    [delivery toggleDelivered: delivery];
    [self configureCheckmarkForCell:cell withDelivery:delivery];
    [tableView deselectRowAtIndexPath:indexPath animated:YES];
    if (debugging) NSLog(@"[%s] [%d]", __PRETTY_FUNCTION__, __LINE__);
} 
```

deselectRowAtIndexPath 应该绕过 segue，但事实并非如此。

NSLogs：a) 在 2012-04-29 18:50:00.848 Delivery[3148:fb03] [-[DeliveryTVC prepareForSegue:sender:]] [168] b) 在 2012-04-29 18:50:01.245 Delivery[3148 :fb03] [-[DeliveryTVC tableView:didSelectRowAtIndexPath:]] [93]

请注意，“didSelect”出现在“prepareForSegue”之后。

任何提示将不胜感激。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-30T00:04:37.140

您是否已将详细信息附加到表格视图单元格？相反，尝试在两个视图控制器之间拖动它（一个包含表格，另一个是您希望它去的地方）。

然后手动执行 ( `[self performSegueWithIdentifier:@"MySegue"];`) 时`tableView:accessoryButtonTappedForRowWithIndexPath:`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-07-02T18:01:26.137

如果需要在 prepareForSegue 中获取当前 tableview 选择，可以通过访问 UITableViewController 的 tableView ivar 来获取；

```
[self tableView] indexPathForSelectedRow] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-07-11T19:31:54.870

```
- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    // Make sure your segue name in storyboard is the same as this line
    if ([[segue identifier] isEqualToString:@"ClaimDetailsSeque"])
    {
        DLog(@"destinationViewController %@",[[segue destinationViewController] topViewController]);
        //This syntax is needed when the seque is going through a Navagation Controller
        ClaimDetailsFormViewController* vc = (ClaimDetailsFormViewController*)[[segue destinationViewController] topViewController];

        //This the the way to get the object from the selected row via the FetchedResultsController
        //this is needed because prepareForSegue is called before didSelectRowAtIndexPath
        NSIndexPath *selectedIndexPath = [self->claimTableView indexPathForSelectedRow];
        ClaimHistory *object = [[self claimHistoryFetchedResultsController] objectAtIndexPath:selectedIndexPath];

        MyClaimHistorySM *myCH = [MyClaimHistorySM new];

        myCH.policyNumber = object.policyNumber;
        myCH.policyStatus = object.policyStatus;
        myCH.claimNumber  = object.claimNumber;
        myCH.insuredName = object.insuredName;
        myCH.lossDescription = object.lossDescription;
        myCH.dateOfLoss = object.dateOfLoss;
        myCH.incidentCloseDt = object.incidentCloseDt;

        vc.claimHistorySM = myCH;

    }

} 
```

![故事板上的序列](../Images/c671d0dc0183040320ae80f63df5e874.png)

# java - 在 If 语句中比较字符串时出错

> ID：10376973
> 
> 赞同：0
> 
> 时间：2012-04-29T23:40:07.790
> 
> 标签：java, if-statement, compiler-errors, user-input

我有一个名为“name”的变量存储在工作文件夹的另一个类中。我想将它与来自 JOptionPane 的用户输入进行比较。我的代码是这样的：

```
String userInput = JOptionPane.showInputDialog(null, "What is the value?");
if(name.equals(userInput)){JOptionPane.showMessageDialog(null, "You are correct.");} 
```

当我编译程序时，它会抛出找不到符号“name”的错误。我是否必须以其他方式调用该变量才能将其与用户输入进行比较，还是我在这里完全错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:41:23.847

如果`name`是不同对象的成员，那么您将需要指定哪个对象。

```
thingWithAName.name.equals(userInput) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T00:08:15.490

假设在工作文件夹中，您有以下两个类：

```
class IHaveNameVariable
{
    String name;
}

class IAccessNameVariable
{
    public void someMethod()
    {
        // Uncomment the code below
        // and it will compile.

        // IHaveNameVariable aRef = new IHaveNameVariable();

        String userInput = JOptionPane.showInputDialog(null, "What is the value?");
        if(/*aRef.*/name.equals(userInput))
        {
            JOptionPane.showMessageDialog(null, "You are correct.");
        }
    }
} 
```

所以，这就是您访问另一个类的字段的方式。如果字段是`static`，则无需使用创建对象`new`；只需使用类名。

# python - 超过 4 个通道的 Opencv 聚类

> ID：10376974
> 
> 赞同：1
> 
> 时间：2012-04-29T23:40:39.210
> 
> 标签：python, opencv, numpy, k-means

我正在尝试在 opencv 库 (kmeans2) 中应用 kmeans 聚类算法，但每个样本点都有超过 4 个值（超过 4 个特征）

当我尝试使用 cvMat 为 kmeans2 准备参数时，每当我打印或为其分配任何值时，它都会引发异常。

这是我尝试过的两种方法

第一种方法

```
import cv
from numpy import *
a = zeros([20,1,6])
b = cv.fromarray(a)
print b[0,0]
OpenCV Error: One of arguments' values is out of range (The number of channels must be 1, 2, 3 or 4) in cvRawDataToScalar, file /build/buildd/opencv-2.3.1/modules/core/src/array.cpp, line 1531
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
cv2.error: The number of channels must be 1, 2, 3 or 4 
```

第二种方法

```
import cv
from numpy import *
a = cv.CreateMat(20,1,cv.MAKETYPE(cv.CV_32F,6))
print a[0,0]
OpenCV Error: One of arguments' values is out of range (The number of channels must be 1, 2, 3 or 4) in cvRawDataToScalar, file /build/buildd/opencv-2.3.1/modules/core/src/array.cpp, line 1531
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
cv2.error: The number of channels must be 1, 2, 3 or 4 
```

为 kmeans 算法创建和操作 cvMat 参数的正确方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T06:56:36.423

你犯的错误是形成错误维度的矩阵。改变这个

```
a = zeros([20,1,6]) 
```

对此

```
a = zeros([20,6,1]) 
```

还有这个

```
a = cv.CreateMat(20,1,cv.MAKETYPE(cv.CV_32F,6)) 
```

对此

```
a = cv.CreateMat(20, 6, cv.CV_32F) 
```

看来您误解了文档

> samples – 输入样本的浮点矩阵，每个样本一行。

并且在每一列中都有功能。

# jsf-2 - 允许用户在会话超时后登录 JSF 2.0

> ID：10376978
> 
> 赞同：0
> 
> 时间：2012-04-29T23:41:56.083
> 
> 标签：jsf-2

要求是允许用户在登录页面上停留很长时间甚至在会话超时而不刷新页面后登录。有没有办法在会话超时时创建一个新的 DOM？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T18:56:06.937

没有这样的方法。只需将 JSF 状态保存方法设置为`client`. 这样视图将永远不会过期。

```
<context-param>
    <param-name>javax.faces.STATE_SAVING_METHOD</param-name>
    <param-value>client</param-value>
</context-param> 
```

这只会以内存使用换取网络带宽（例如，更低的内存使用和更多的网络带宽使用）。启用部分状态保存后，网络带宽使用的增加应该相对较小，并且可以通过缩小、压缩等轻松获得。

# java - 在 Vector / ArrayList 的上下文中同步是什么意思？

> ID：10376983
> 
> 赞同：12
> 
> 时间：2012-04-29T23:42:29.740
> 
> 标签：java, vector, arraylist, synchronization

我刚刚阅读了一些[关于](http://www.javaworld.com/javaworld/javaqa/2001-06/03-qa-0622-vector.html)`Vector`和`ArrayList`的信息。据我所知`Vector`，与`ArrayList`. 但是`Vector`是同步的，而`ArrayList`不是同步的。

但是，这是什么意思？我们说 a`Vector`是同步的是什么意思？什么时候有用？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-29T23:44:07.360

这意味着多个线程可以并行修改 Vector 而没有数据损坏的风险。

如果要使用 ArrayList 执行此操作，则需要使用`synchronized`关键字。

# php - session_start() - 无法发送会话 cookie

> ID：10376984
> 
> 赞同：-1
> 
> 时间：2012-04-29T23:42:30.663
> 
> 标签：php, mysql, login

嗨，我在 PHP 中创建了一个简单的注册和登录脚本，但是当我加载登录页面时出现这些错误。

警告：session_start() [function.session-start]：无法发送会话 cookie - 标头已由 C:\Users\s14\phase2 中的（输出开始于 C:\Users\s14\phase2\index.php:8）发送\index.php 在第 10 行

警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 C:\Users\s14\phase2\index.php:8）在 C:\Users\s14\phase2 \index.php 在第 10 行

从我的代码的第 6 行到第 20 行

```
<form action="index.php" method=get>
 <h1 align="center" style="color:gray" >Welcome to this simple application</h1>
<?php
error_reporting(E_ALL & ~E_NOTICE);
session_start();
if( $_SESSION["logging"])
{
     print_secure_content();
}
else {
if(!$_SESSION["logging"])
{  
$_SESSION["logging"]=true;
loginform();
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:45:03.180

`session_start()`在回显或输出之前，您必须保留, 。你有这些在`session_start()`运行前输出的 HTML。

您的解决方案：

```
<?php
/* Make sure this part is at the top */
error_reporting(E_ALL & ~E_NOTICE);
session_start();
?>
<!-- Now other -->
<form action="index.php" method=get>
 <h1 align="center" style="color:gray" >Welcome to this simple application</h1>
<?php
if( $_SESSION["logging"])
{
     print_secure_content();
}
else {
if(!$_SESSION["logging"])
{  
$_SESSION["logging"]=true;
loginform();
}
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:47:04.950

`session_start()`必须在任何输出之前调用。因此，如果您将`session_start()`调用放在任何 HTML 之前，应该没有问题。

# node.js - 设置与 expect.js 的等价性

> ID：10376985
> 
> 赞同：0
> 
> 时间：2012-04-29T23:42:30.847
> 
> 标签：node.js, testing

我使用`expect.js`并且我想测试集合等价性

```
Error: expected [ [ 1, 2 ], [ 2, 1 ], [ 0, 1 ], [ 1, 0 ] ] to sort of equal [ [ 1, 2 ], [ 2, 1 ], [ 1, 0 ], [ 0, 1 ] ] 
```

^ 这应该是真的。

我找到[了这个](http://community.service-now.com/blog/slightlyloony/4113)，但我如何将它整合到`expect.js`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T00:32:32.363

您可以通过对数组进行排序来作弊..（以下是咖啡脚本）

```
 describe 'test', ->
  it 'should match', ->

    a = [ [ 1, 2 ], [ 2, 1 ], [ 0, 1 ], [ 1, 0 ] ]
    b = [ [ 1, 2 ], [ 2, 1 ], [ 1, 0 ], [ 0, 1 ] ]

    expect(a.sort()).to.eql b.sort() 
```

# php - 在数据集中找到最现实的市场价格平均值的算法

> ID：10376988
> 
> 赞同：9
> 
> 时间：2012-04-29T23:43:22.933
> 
> 标签：php, algorithm, sorting

## 我有的：

*   用户正在拍卖网站上出售 foobars。
*   每个 foobar 都是相同的。
*   foob​​ar 的价格由用户决定。
*   我将废弃每个价格列表以形成一个数据集，如下所示：
    $prices = ('foobar' => [12.34, 15.22, 14.18, 20.55, 9.50]);

## 我需要的：

*   找到每天、每周、每月的实际平均市场价格。

## 我面临的问题：

*   事实证明，异常值拒绝的实施效果不佳，因为数据存在偏差。
*   用户极不可能将拍卖价格低于平均市场价格，因为它无法撤消。即使它远低于市场价格，这种情况也会很少发生，以至于整体平均水平不会受到影响。然而，试图抬高价格的用户更有可能发生，并且发生的频率足以影响实际的平均市场价值。

## 我想我会怎么做：

```
Daniel Collicott: 
```

> 如果我理解正确，您想计算一件商品的最佳销售价值。（或者您是否正在尝试计算实际价值？？）
> 
> 卖家很自然地玩游戏（例如 ebay），试图最大化他们的利润。
> 
> 出于这个原因，我会避免使用平均/SD 方法：它们对特定销售策略产生的异常值过于敏感。
> 
> 博弈论方面，我认为聪明的卖家会通过研究他们的竞争对手和他们的历史销售产出来估计最高可能的销售价格（最大利润）：找到甜蜜点。
> 
> 出于这个原因，我将记录所有卖家的历史价格直方图并查看价格分布，使用接近模式的东西来确定最佳价格，即最常见的销售价格。更好的是，我会根据每个卖家的利润（与历史销量成正比）来衡量价格。
> 
> 我怀疑这会更接近您的最佳市场价值；如果您正在寻找真正的市场价值，请在下方评论或在我的机器学习公司与我联系

## 我的问题：

*   对@Daniel Collicott 的帖子中提到的事情的更详细解释：

    --> 最佳销售价值
    --> 实际销售价值
    --> 两者的算法

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-30T00:08:37.673

**使用平均值**和**标准差**，您的第一个问题非常简单：

```
$prices = array
(
    'bar' => array(12.34, 102.55),
    'foo' => array(12.34, 15.66, 102.55, 134.66),
    'foobar' => array(12.34, 15.22, 14.18, 20.55, 99.50, 15.88, 16.99, 102.55),
);

foreach ($prices as $item => $bids)
{
    $average = call_user_func_array('Average', $bids);
    $standardDeviation = call_user_func_array('standardDeviation', $bids);

    foreach ($bids as $key => $bid)
    {
        if (($bid < ($average - $standardDeviation)) || ($bid > ($average + $standardDeviation)))
        {
            unset($bids[$key]);
        }
    }

    $prices[$item] = $bids;
}

print_r($prices); 
```

基本上，您只需要删除低于`avg - stDev`或高于`avg + stDev`.

* * *

和实际功能（从[我的框架](https://github.com/alixaxel/phunction/blob/master/phunction/Math.php)移植）：

```
function Average()
{
    if (count($arguments = func_get_args()) > 0)
    {
        return array_sum($arguments) / count($arguments);
    }

    return 0;
}

function standardDeviation()
{
    if (count($arguments = func_get_args()) > 0)
    {
        $result = call_user_func_array('Average', $arguments);

        foreach ($arguments as $key => $value)
        {
            $arguments[$key] = pow($value - $result, 2);
        }

        return sqrt(call_user_func_array('Average', $arguments));
    }

    return 0;
} 
```

输出（[演示](http://codepad.org/PZVNE9Td)）：

```
Array
(
    [bar] => Array
        (
            [0] => 12.34
            [1] => 102.55
        )

    [foo] => Array
        (
            [1] => 15.66
            [2] => 102.55
        )

    [foobar] => Array
        (
            [0] => 12.34
            [1] => 15.22
            [2] => 14.18
            [3] => 20.55
            [5] => 15.88
            [6] => 16.99
        )
) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-05-16T11:58:32.110

如果您要做的只是标准化您的数据集 - 即收敛于反映均值的集合，那么您可以使用[峰度](http://en.wikipedia.org/wiki/Kurtosis)和[偏度](http://en.wikipedia.org/wiki/Skewness)来表征数据集的结构以帮助识别异常值 - （计算每个点的指标使用数据集的其余部分旨在最小化 Kurtois 并保持偏度的趋势 - 拒绝极端值并重复，直到排除一个值不会显着改变指标）。

但是您的问题更有趣：

让我看看我是否正确：您对 foobar 市场的了解不完全，但您只能获得有限的具体信息。

您想使用有限的数据集来预测有关市场的隐藏信息。

您需要[贝叶斯平均值](http://en.wikipedia.org/wiki/Bayesian_average)（另请参阅[贝叶斯推理](http://en.wikipedia.org/wiki/Bayesian_inference#Examples)）。

假设您每天有 1000 个价格；

对于每一天，计算：均值、众数、中位数、标准偏差、峰度和偏度 - 这给出了市场形状的句柄：

*   均值和中位数将显示价格如何变动
*   mode & stdev 将显示市场的成熟程度（成熟市场应该有较低的 stdev）
*   峰度将显示价格弹性 - 低值是有弹性的，高是更多的可塑性 - 也与成熟度有关
*   偏度将显示需求趋势 - 左侧的长尾表示讨价还价，右侧的尾表示愿意支付更高的价格

比较每日价值将使您能够衡量市场的健康状况。

一旦您获得了几周的趋势数据（随着时间的推移会变得更好），您就可以开始测试真实价格。

1.  首先，对数据集第一天的真实价格进行有根据的猜测。
2.  使用倾斜加权价格样本计算市场的贝叶斯平均价格，但样本不超过每日集的 80% / stddev^2
3.  这现在成为您的真实价格。
4.  每天重复 2 到 4 次应该会给你一个缓慢移动的价格。

如果真实价格在跳跃，那么要么样本量太小，要么市场运行不正常（即一些参与者支付的价格高于价值，卖出低于价值，供应受到限制，购买价格与值等）。

我已经对二手车价格进行了建模（它们不是同质的），但我确实得到了一些合理的收敛 - +/- 10％，但这是在有限的数据集上。它似乎也适用于房价，而不是商品或足球比分。

它永远不会给你一个明确的预测答案，尤其是在拍卖环境中——但它应该让你比算术平均值更接近真实价格。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-30T01:51:41.507

好的，经过大量的努力，无论异常值的**最大值**有多极端（或不极端），一个似乎都有效的解决方案。请记住，我的数学知识非常原始，所以请谨慎对待。

```
$prices = array
(
    'baz' => array(12.34, 15.66),
    'bar' => array(12.34, 102.55),
    'foo' => array(12.34, 15.66, 102.55, 134.66),
    'foobar' => array(12.34, 15.22, 14.18, 20.55, 99.50, 15.88, 16.99, 102.55),
);

foreach ($prices as $item => $bids)
{
    $average = average($bids);
    $standardDeviation = standardDeviation($bids);

    foreach ($bids as $key => $bid)
    {
        if ($bid > ($average + ($average - $standardDeviation)))
        {
            unset($bids[$key]);
        }
    }

    $prices[$item] = $bids;
}

print_r($prices);

function average($arguments)
{
    if (count($arguments) > 0)
    {
        return array_sum($arguments) / count($arguments);
    }

    return 0;
}

function standardDeviation($arguments)
{
    if (count($arguments) > 0)
    {
        $result = Average($arguments);

        foreach ($arguments as $key => $value)
        {
            $arguments[$key] = pow($value - $result, 2);
        }

        return sqrt(Average($arguments));
    }

    return 0;
} 
```

输出（[演示](http://codepad.org/1kWrfUyZ)）：

```
Array
(
    [baz] => Array
        (
            [0] => 12.34
            [1] => 15.66
        )

    [bar] => Array
        (
            [0] => 12.34
        )

    [foo] => Array
        (
            [0] => 12.34
            [1] => 15.66
        )

    [foobar] => Array
        (
            [0] => 12.34
            [1] => 15.22
            [2] => 14.18
            [3] => 20.55
            [5] => 15.88
            [6] => 16.99
        )
) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-05-10T22:01:43.623

如果我理解正确，您想计算一件商品的*最佳*销售价值。（或者您是否正在尝试计算*实际*价值？？）

卖家很自然地玩游戏（例如 ebay），试图最大化他们的利润。

出于这个原因，我会避免使用平均/SD 方法：它们对特定销售策略产生的异常值过于敏感。

博弈论方面，我认为聪明的卖家会通过研究他们的竞争对手和他们的历史销售产出来估计最高可能的销售价格（最大利润）：找到甜蜜点。

出于这个原因，我将记录所有卖家的历史价格直方图并查看价格分布，使用接近模式的东西来确定*最佳*价格，即最常见的销售价格。更好的是，我会根据每个卖家的利润（与历史销量成正比）来衡量价格。

我怀疑这会更接近您的*最佳*市场价值；如果您正在寻找*真正的*市场价值，请在下方评论或在我的[机器学习](http://www.minimalistic.eu/)公司与我联系

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-30T09:34:46.820

丹，阅读您的评论，我开始认为您想要的东西可以非常简单地实现。这是在 C# 中，但它非常简单，应该很容易理解：

```
const double reasonable_price_range = 1.5;
List<double> prices = new List<double> { 50.00, 51.00, 52.00, 100.00, 101.00, 102.00, 150.00, 151.00, 152.00 };
double min = prices.Min();
var reasonable_prices = (from p in prices where p <= min * reasonable_price_range select p).ToList(); 
```

丢弃所有比*最小*价格大一定百分比的数字（百分比是 IMO 的最佳衡量标准），然后返回其余数字。

这应该适用于您的所有示例。1.5 常数是任意的，可能应该更高（问题是，如果我们知道价格 X 是合理的，那么价格可以涨到多高仍然被认为是合理的？）。但是，这取决于甚至没有一个低异常值 - 列表中的最低价格必须是合理的。

当然，min * 常数不一定是最优决策函数，但如果我们可以依赖 min 永远不会是异常值，问题就会变得简单得多，因为我们可以将它们与最小元素进行比较，而不是对元素进行分组。

# jquery - jquery 循环精简版图像突破包含元素

> ID：10376990
> 
> 赞同：1
> 
> 时间：2012-04-29T23:43:40.327
> 
> 标签：jquery, slideshow, padding

测试页面在这里：[clicky click](http://www.oichigo.com/test/)

我正在尝试在我的幻灯片图像容器中添加 8px 填充以创建白色边框。

这适用于非幻灯片内容（检查顶部的第一个和最后一个选项卡），但不适用于循环 lite 幻灯片中使用的图像。（顶部有 2 个中间标签）

我可以看到它与使用绝对定位的幻灯片有关，但无法找到解决方法。

我想要容器上的填充，以便将图像压缩在其中。

这些图像的最大宽度为 100%，并按比例放大/缩小到 420px 浏览器宽度以下，所以我真的不想使用基于像素的尺寸。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-05T17:02:53.800

您可以将每个图像放在一个 div 中，将填充添加到 img 并循环 div .. 这应该可以。

这是一个例子：http: [//jsfiddle.net/5VcNV/](http://jsfiddle.net/5VcNV/)

# android - 如何在 sql 数据库中搜索字符串 - Android

> ID：10376998
> 
> 赞同：0
> 
> 时间：2012-04-29T23:45:09.363
> 
> 标签：android

如果我想使用 java 在下面的 sql 数据库中搜索一个字符串，我该怎么做？老实说，我不知道从哪里开始他们的任何在线材料都涵盖了这一点？...谢谢。我虽然可以有某种 strstr() 函数或收集表中字符串的东西。

```
package f.s.l;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteDatabase.CursorFactory;
import android.database.sqlite.SQLiteOpenHelper;

public class HotOrNot {
public static final String KEY_ROWID ="_id";
public static final String KEY_NAME ="persons_name";
public static final String KEY_HOTNESS ="persons_hotness";

private static final String DATABASE_NAME ="HotOrNotdb";
private static final String DATABASE_TABLE ="peopleTable";
private static final int DATABASE_VERSION =1;

private DbHelper ourHelper;
private final Context ourContext;
private SQLiteDatabase ourDatabase;

private static class DbHelper extends SQLiteOpenHelper{

public DbHelper(Context context) {
super(context, DATABASE_NAME, null, DATABASE_VERSION);
// TODO Auto-generated constructor stub
}

@Override
public void onCreate(SQLiteDatabase db) {
// TODO Auto-generated method stub
db.execSQL("CREATE TABLE " + DATABASE_TABLE + " (" +
        KEY_ROWID + " INTEGER PRIMARY KEY AUTOINCREMENT, " +
        KEY_NAME + " TEXT NOT NULL, " +
        KEY_HOTNESS + " TEXT NOT NULL);"

        );

}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
// TODO Auto-generated method stub
db.execSQL("DROP TABLE IF EXISTS " + DATABASE_TABLE);
onCreate(db);

}

}
public HotOrNot(Context c){
ourContext =c;
}
public HotOrNot open() throws SQLException{ 
ourHelper = new DbHelper(ourContext);
ourDatabase = ourHelper.getWritableDatabase();
return this;
}
public void close(){

 ourHelper.close();
 }
 public long createEntry(String name, String hotness) {
 // TODO Auto-generated method stub
 ContentValues cv = new ContentValues();
 cv.put(KEY_NAME, name);
 cv.put(KEY_HOTNESS, hotness);
 return ourDatabase.insert(DATABASE_TABLE, null, cv);

 }
 public String getData() {
 // TODO Auto-generated method stub
String [] columns = new String[]{ KEY_ROWID, KEY_NAME, KEY_HOTNESS};
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
String result = "";

int iRow = c.getColumnIndex(KEY_ROWID);
int iName = c.getColumnIndex(KEY_NAME);
int iHotness = c.getColumnIndex(KEY_HOTNESS);

for(c.moveToFirst(); !c.isAfterLast(); c.moveToNext()) {

result = result + c.getString(iRow) + " "+ c.getString(iName) + " " +                c.getString(iHotness) + "\n";
}

return result;
}
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T23:47:57.007

在`query`方法中，您需要声明 WHERE 子句。例如：

```
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, "some_col like " + "'%Somevalue%'", null, null, null, null); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T03:08:52.387

LIKE 是一个很好的 SQL 关键字供您查找...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-03T14:02:31.870

尝试以下代码进行搜索：-

```
public Cursor getROUTINENAME(String search_str) {
        String query = "SELECT * FROM TBNAME where COL_NAME LIKE '%"+search_str+"%'";

        Cursor mCursor = db.rawQuery(query, null);
        if (mCursor != null) {
            mCursor.moveToFirst();
        }
        return mCursor;
    } 
```

用 string 调用上面的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-17T04:00:08.773

字符串查询 = " SELECT * FROM " + DB_NAME + " WHERE " + COLUMN_dars + " LIKE " + "'"+select+"'";

```
 SQLiteDatabase db = this.getWritableDatabase();
    Cursor cursor = db.rawQuery(query,null); 
```