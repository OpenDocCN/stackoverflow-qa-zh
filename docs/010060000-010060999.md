# StackOverflow 问答 10060000-10060999

# php - 发布一个行独有的变量，我该怎么做？

> ID：10060005
> 
> 赞同：0
> 
> 时间：2012-04-08T02:49:21.400
> 
> 标签：php, html, forms, html-table, http-post

我发布了两件事。该评论可以正常工作，但我需要发布的第二项`$list['id']`是每一行独有的。当用户单击 POST 时，如何包含此唯一 ID，以便可以在发布它的页面上使用它。

```
foreach ($posts as $key => $list){
            echo " <tr valign='top'>\n";
                            echo " <tr>$list['id']                  
                 <div class='comment_text'>
                     <form method='post' action='add_comment.php'>
                 <textarea name='comment'</textarea>
                 <input class='btn' type='submit' value='Post'/>

                 </form>
                 </div>
                 </td>\n";

            echo "</tr>\n";
        } 
```

**我发布到的页面如下所示：**

```
<?php
$commenter_user_id = $_SESSION['user_id'];
$body = substr($_POST['comment'],0,400);
$post_id=;
add_comment($commenter_user_id,$post_id,$body);
$_SESSION['message'] = "Your comment has been added!";
header("Location:/social_learning/site_pages/profile.php");
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:17:28.240

您可以使用隐藏输入：

`<input type="hidden" name="postName" value="<?= $list['id'] ?>" />`

然后在你的PHP中它是可用的`$_POST['postName']`（根据`name`隐藏输入的属性）

# delay - 延迟 div 的“创建”，而不仅仅是显示 div

> ID：10060007
> 
> 赞同：2
> 
> 时间：2012-04-08T02:49:59.357
> 
> 标签：delay, vimeo, creation, autoplay

我可能没有使用正确的术语，但希望我能正确地回答我的问题。我想知道是否可以“延迟”特定 div 的“创建”，而不仅仅是延迟 FadeTo 或 Show jquery 命令。

我之所以这么问是因为我使用的 Vimeo API 完全令人难以置信和令人沮丧（至少对我而言——这是无尽耻辱的根源，我在尝试任何此类 Vimeo API 编码时陷入自怜之中）。我想要做的只是延迟嵌入 Vimeo 视频的 iframe 代码的自动播放。问题是我将包含 vimeo iframe 的 div 设置为在页面加载后隐藏三秒钟，然后再淡入，但由于它只是隐藏，因此视频在访问者实际看到之前就开始播放。我只是将 &autoplay=1 用于 vimeo 嵌入...

所以，我想除了让这个令人困惑的 Vimeo API 尝试以这种方式延迟视频之外，唯一的其他解决方案是能够仅使用 jQuery 命令来延迟 vimeo iframe 甚至在页面上加载/创建，直到容器div 淡入。

如果这是可能的，我会祝福我的幸运符。如果有人在接下来的几个小时内回答，则加倍积分！非常感谢！！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:36:48.993

我刚刚编辑了我的答案并将其应用于您提供的代码：

* * *

所以我在这里所做的是：
1）将 jquery 加载到您的页面中
2）当 jquery 看到您的 id="div" 为“准备就绪”的 div 时，它会触发一个提示已加载的警报（您可以删除它，它只是为了测试目的），然后将 src 从加载到您的 iframe 中延迟 2 秒（2000 毫秒）
3）因此您可以将 2000 更改为您想要的任何时间，并确保“player_1”与您的 iframe id 匹配

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>

<script>
 $(document.getElementById('div')).ready(function() 
{
       alert('loaded');
    setTimeout('document.getElementById("player_1").src="http://www.youtube.com/v/82CYNj7noic?autoplay=1"', 2000);

 });

</script>

<div id="div" class="div">
<iframe class="iframe" id="player_1" >    </iframe>
</div> 
```

​ ​</p>

这对你有用吗？？我希望我有帮助！

# delphi - 是否可以在 Delphi 中为泛型类创建类型别名

> ID：10060009
> 
> 赞同：11
> 
> 时间：2012-04-08T02:50:20.573
> 
> 标签：delphi, generics, types, alias, declaration

我想为泛型类定义一个类类型（类型别名）。我想这样做，以便单元 b 的用户可以在不使用单元 a 的情况下访问 TMyType。我有这样的单位：

```
unit a;
interface
type
  TMyNormalObject = class
    FData: Integer;
  end;
  TMyType<T> = class
    FData: <T>;
  end;
implementation
end.

unit b;
interface
type
  TMyNormalObject = a.TMyNormalObject;  // works
  TMyType<T> = a.TMyType<T>; // E2508 type parameters not allowed on this type
implementation
end. 
```

我已经找到了一个我不喜欢的可能的解决方法，因为它可能会引入难以找到的错误：

```
TMyType<T> = class(a.TMyType<T>); 
```

这种方法的问题在于它引入了一个新的类类型，并且 a.TMyType 实例不是 b.TMyType （而 a.TMyNormallClass 是 b.TMyNormalClass ，反之亦然 - 它们指的是同一个类）。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T07:34:57.083

当前~~无法~~为泛型类声明类类型。

有关详细信息，请参阅[QC76605](http://qc.embarcadero.com/wc/qcmain.aspx?d=76605)。**还有下面的更新。**

例子 ：

```
TMyClass<T> = class
end;
TMyClassClass<T> = class of TMyClass<T>; //E2508 type parameters not allowed on this type 
```

提出的解决方法如下所示：

```
TMyIntClass = TMyType<Integer>;
TMyIntClassClass = Class of TMyIntClass; 
```

但是正如评论的那样，这将破坏泛型的整个想法，因为必须为每个泛型实例化该类。

这里还有一个链接，指向生成泛型类型的专用子类的类似解决方法：[derive-from-specialized-generic-types](https://stackoverflow.com/a/793853/576719)。在这种情况下，它看起来像这样：

```
TMySpecialClass = Class(TMyType<Integer>); 
```

**更新 ：**

RM提出的解决方法：

```
TMyType<T> = class(a.TMyType<T>); 
```

可以使用以下方案实现类型安全：

```
unit Unita;
interface
type
  TMyType<T> = class
    Constructor Create;
  end;

implementation

uses
  Unitb;

constructor TMyType<T>.Create;
begin
  Inherited Create;
  //WriteLn( Self.QualifiedClassName,' ',Unitb.TMyType<T>.QualifiedClassName);
  Assert(Self.QualifiedClassName = Unitb.TMyType<T>.QualifiedClassName);
end;

end. 
```

* * *

```
unit Unitb;

interface

uses Unita;

type
  TMyType<T> = class(Unita.TMyType<T>);
implementation
end. 
```

* * *

```
Project Test;
{$APPTYPE CONSOLE}    
uses
  System.SysUtils,
  Unita in 'Unita.pas',
  Unitb in 'Unitb.pas';

var
  t1 : Unita.TMyType<Integer>;
  t2 : Unitb.TMyType<Integer>;
  t3 : TMyType<Integer>;    
begin
  try
    //t1 := Unita.TMyType<Integer>.Create;  //Exception EAssertionFailed !!
    t2 := Unitb.TMyType<Integer>.Create;
    t3 := TMyType<Integer>.Create;
    ReadLn;
  finally
    //t1.Free;
    t2.Free;
    t3.Free;
  end;
end. 
```

创建泛型类时，会进行测试以检查创建的类是否派生自单元 b 中声明的类型。从而检测到所有从单元 a 创建此类的尝试。

**更新 2：**

为了清楚起见，对泛型类的引用“ `class of type<T>`”是不可能的，但是泛型类的副本是可以的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T11:57:45.630

由于无法为泛型类声明“类型别名”，因此这是使用[接口](http://docwiki.embarcadero.com/RADStudio/en/Interface_References)的解决方案。

```
unit UnitA;

interface  

Uses UnitB; 

type
  TMyType<T> = class(TInterfacedObject,ITMyType<T>)
    FData : T;
    Constructor Create( aV : T);
  end;

implementation

constructor TMyType<T>.Create( aV : T);
begin
  Inherited Create;
  FData := aV;
  WriteLn( Self.QualifiedClassName);
end;

end. 
```

* * *

```
unit UnitB;

interface

type
  ITMyType<T> = Interface
  End;

implementation

end. 
```

* * *

```
program Test;
{$APPTYPE CONSOLE}
uses
  UnitA in 'UnitA.pas',
  UnitB in 'UnitB.pas';

var
  it1 : ITMyType<Integer>;
begin
  it1:= TMyType<Integer>.Create(1);
  ReadLn;
end. 
```

# django - 使用 Apache 的 Django EC2 mod_wsgi 配置不起作用

> ID：10060011
> 
> 赞同：0
> 
> 时间：2012-04-08T02:50:45.733
> 
> 标签：django, ubuntu, apache2, amazon-ec2, mod-wsgi

我认为我的 apache2 服务器即将设置，但它仍然返回 500 错误。这是我的`.wsgi`文件：

```
import os, sys

#path to directory of the .wsgi file ('apache/')
wsgi_dir = os.path.abspath(os.path.dirname(__file__))

#path to project root directory (parent of 'apache/')
project_dir = os.path.dirname(wsgi_dir)

sys.path.append(project_dir)
project_settings = os.path.join(project_dir, 'settings')
os.environ['DJANGO_SETTINGS_MODULE'] = 'ecomstore.settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

这是我的`virtualhost`文件：

```
NameVirtualHost *:80
 <VirtualHost *:80>
      ServerAdmin admin@site.com
      ServerName www.site.com
      ServerAlias site.com

      Alias /static /home/ecomstore/static

      DocumentRoot /home/ecomstore
      WSGIScriptAlias / /home/ecomstore/apache/ecomstore.wsgi

      ErrorLog /var/log/apache2/error.log

      LogLevel warn

      CustomLog /var/log/apache2/access.log combined

 </VirtualHost> 
```

这是我的服务器重启：

```
sudo /etc/init.d/apache2 restart
 * Restarting web server apache2
[Sun Apr 08 02:47:31 2012] [warn] module wsgi_module is already loaded, skipping
 ... waiting ..........[Sun Apr 08 02:47:42 2012] [warn] module wsgi_module is already loaded, skipping
   ...done. 
```

但是，即使我在重新启动时没有收到 mod-wsgi 配置错误，我仍然会收到前面提到的 500 Internal Server 错误。有什么我想念的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:50:26.387

您需要查看发出请求时的 Apache 错误日志，而不是重新启动时的错误日志。

问题的来源之一是 sys.path 不包含项目目录的父目录，由于您将 DJANGO_SETTINGS_MODULE 设置为，这将是必要的。在以下位置阅读有关此要求的信息：

[http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango](http://code.google.com/p/modwsgi/wiki/IntegrationWithDjango)

并修复它。

除此之外，您需要确定它是 Apache 500 页面还是 Django 页面。如果它是 Django 的，则在 Django 设置文件中打开 DEBUG 并重新启动 Apache，以便在浏览器中显示完整的错误。解决后关闭 DEBUG。

# mysql - 获取复杂查询的计数

> ID：10060015
> 
> 赞同：0
> 
> 时间：2012-04-08T02:52:41.323
> 
> 标签：mysql, select, join, count, having

我想计算以下查询返回的总行数：

```
SELECT table1.*, COUNT(table2.fk) * (100/18) AS 'number' 
FROM table1 INNER JOIN table2 ON table1.pk = table2.fk
WHERE table1.Street LIKE '$Street%' 
AND table1.City LIKE '$City%' 
AND table1.Zip LIKE '%$Zip' 
AND table1.DOBY LIKE '%$DOBY' 
AND table1.DOBM LIKE '%$DOBM' 
AND table1.DOBD LIKE '%$DOBD' 
AND table1.Gender LIKE '$gender%' 
AND table2.year>= 2004 
AND table2.type IN ('AA', 'AB', 'AC') 
GROUP BY table2.fk
HAVING (COUNT(table2.fk) * (100/18)) >= '$activity' 
ORDER BY DOBY, DOBM, DOBD ASC 
```

查询将table1的主键作为table2的外键出现的次数或次数，并根据固定的数量计算百分比（'number'）。它工作得很好，但我无法获得为我的分页脚本找到的记录总数。如果有人能提供一些建议或解决方案，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T03:28:52.677

正如 Itay Moav 所说，一种编程语言应该有一个`found_rows`函数。根据[函数文档](http://dev.mysql.com/doc/refman/5.5/en/information-functions.html#function_found-rows)，如果关键字不存在，它会返回`SELECT`带有关键字的语句的行数。`LIMIT``LIMIT`

如果没有，您可以`SELECT`对数据库进行另一个查询：`SELECT FOUND_ROWS();`. 它将返回相同的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T03:12:17.183

你可以做`SQL_CALC_FOUND_ROWS`（​​谷歌的确切语法）
然后使用`SELECT FOUND_ROWS() AS total`

# windows - Windows 控制台中的选项卡

> ID：10060016
> 
> 赞同：2
> 
> 时间：2012-04-08T02:53:07.300
> 
> 标签：windows, console, ascii, console-application

我的命令行应用程序经常向控制台输出简短的报告。这些报告包含 TAB 字符。如果我稍后将控制台的输出复制到文本文件中，我会发现 Windows 控制台将 TAB 转换为空格。

是否有一个设置（或我可以在 Windows 中使用的替代控制台）实际上将 TAB 字符保留在控制台窗口中（以便我可以复制它），但仍将其显示为好像它对应于一定数量的空格？

# html - 我怎样才能把我的覆盖 div *上面* Facebook Like 按钮？

> ID：10060017
> 
> 赞同：3
> 
> 时间：2012-04-08T02:53:10.527
> 
> 标签：html, css, facebook

我正在隐藏的 div 作为覆盖 div（使用 jQuery）淡化。它出现在我页面的所有元素之上，除了 Facebook Like 按钮。

我在 CSS 中试过`z-index: 100;`，但没有用。

有人遇到过这个问题吗？

PS：Twitter 按钮也会发生同样的事情，但 Google +1 按钮不会

```
 <fb:like href="http://www.apple.com" send="true" layout="button_count" 
width="450" show_faces="false"></fb:like> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T03:57:12.263

好的，这似乎是有道理的，考虑到 twitter 和 Facebook 按钮将使用 JS 来创建它们的按钮。

因为 JS 将在所有样式加载后运行客户端，所以它总是可以覆盖任何试图掩盖它的尝试。

我实际上认为掩盖 facebook like 按钮可能违反 TOS，但您需要检查一下。

要尝试的事情

**包含分区**

使用适当的 z-index 围绕它创建一个 div。

**正确的 z-index**

确保 FB 和 Twitter 按钮创建的 z-index 没有大于您的。虽然 z-index 在技术上仅从 0 到 255（我认为），但人们会转为负值并高于 255 以确保它们是最高或最低的。

**JavaScript**

按钮加载完成后，使用 JS 设置 z-index 或其他属性隐藏

# php - php || 和 && 逻辑优化

> ID：10060018
> 
> 赞同：6
> 
> 时间：2012-04-08T02:53:28.953
> 
> 标签：php, performance, optimization, logic

我有点优化怪胎（至少按照我的定义），这个问题困扰了我很长一段时间。

我想知道 PHP 是否对 && 和 || 做了一些优化：举个例子：

```
$a = "apple";
$b = "orange";
if ($a == "orange" && $b == "orange") {
    //do stuff
} 
```

当该代码执行时，它将检查 $a 是否等于“橙色”。在这种情况下，它不是。但是，有一个 && 运算符。由于第一部分 ($a == "orange") 已经返回 false，PHP 是否仍会检查 $b 是否等于 "orange"？

我对 || 有同样的问题：

```
$a = "orange";
$b = "orange";
if ($a == "orange" || $b == "orange") {
    //do stuff
} 
```

当它检查 $a 是否等于“橙色”时，它返回 true。因为那会使|| 运算符返回 true，PHP 是否会检查 || 的第二部分 （因为我们已经知道这将是真的）？

希望我在这里有意义，希望有人能回答我。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T02:55:29.703

PHP 使用带有二进制条件的[短路评估](http://en.wikipedia.org/wiki/Short-circuit_evaluation)（例如`&&`，`||`或它们的常量等价物），因此如果评估 LHS 的结果意味着 RHS 不是必需的，则它不会。

例如...

```
method_exists($obj, 'func') AND $obj->func(); 
```

...是对这一事实的利用。在此示例中，仅当 LHS 返回*真*值时才会评估 RHS 。此处的逻辑是有道理的，因为您只想在方法存在时调用它（只要您不使用`__call()`，但那是另一回事）。

您也可以`OR`以类似的方式使用。

```
defined('BASE_PATH') OR die('Restricted access to this file.'); 
```

此模式通常用作 PHP 文件的第一行，这些文件旨在被包含而不是直接访问。如果该`BASE_PATH`常量不存在，则 LHS 是*虚假*的，因此它执行 RHS，即`die()`脚本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T02:58:21.697

是的，PHP 短路了`&&`and`||`运算符，这意味着不，如果左操作数的值意味着不需要计算，则不会计算右操作数。无需优化它们。你可以像这样测试它：

```
function one() {
    echo "One";
    return false;
}

function two() {
    echo "Two";
    return true;
}

one() && two(); // Outputs One
echo "\n";
two() || one(); // Outputs Two 
```

[这是一个演示。](http://codepad.org/L8SzwXUY)如果没有短路，你会得到：

```
OneTwo
TwoOne 
```

# fortran - 在 Fortran 中使用公共块的问题

> ID：10060019
> 
> 赞同：0
> 
> 时间：2012-04-08T02:54:14.660
> 
> 标签：fortran, fortran-common-block

我正在使用有限元分析程序的 fortran 子程序。我必须在两个子程序之间共享变量，所以我使用的是 COMMON 块（编辑：模块更好）。问题是只有一些变量被传递给另一个子程序，其他的则没有。

我的代码是这样的： 第一个子程序：

```
real knom, krot

COMMON /kVAR/ kmom, krot
SAVE /kVAR/ 
```

第二个子程序我使用相同的语法。我通过将每个子例程中的 kmom 和 krot 值写入 txt 文件来控制结果：

```
 write(6,*) 'I am in URDFIL', or 'I am in UFIELD'
1 KINC, kmom, krot 
```

结果是：

```
I am in URDFIL           1      -16700 -2.3857285E-03
I am in UFIELD           2      -16700 -1155769886 
```

所以krot的价值就丢失了。任何建议都是最受欢迎的。

若昂

解决了：

```
module shared_var
    implicit none
    real*8 kmom, krot
    save
end module shared_var 
```

在每个子程序中：

```
use shared_var 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T03:32:54.907

您是否在第二个例程中包含了 knom、krot 的声明？可能您正在获得隐式输入，并且 krot 正在以整数形式输出。您似乎有一个错字：knom 与 kmom。这就是为什么在这两种情况下 kmom 都作为整数输出的原因——隐式类型为整数，因为 knom 是实数。如果隐式类型生效，这些变量将是整数，因为它们以“k”开头。我强烈建议不要使用隐式类型，除非从遗留代码中删除工作量太大。强烈建议使用“implicit none”，以便在您忘记键入变量或在变量名中打错字时，编译器会警告您。大多数编译器都有相当于“隐式无”的选项。

# objective-c - 为什么 -[NSString stringWithFormat:] 不需要 nil 来指示参数的结束？

> ID：10060020
> 
> 赞同：2
> 
> 时间：2012-04-08T02:54:21.743
> 
> 标签：objective-c, ios

> **可能重复：**
> [为什么某些可可方法中的参数列表以 nil 结尾？](https://stackoverflow.com/questions/2477985/why-do-parameter-lists-in-certain-cocoa-methods-end-with-a-nil)

当我定义这样的方法时，我必须放一个 nil/NULL/0 来指示这些变量参数的结束，如何`stringWithFormat:`实现这样不需要这样做？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T02:56:45.363

因为`stringWithFormat:`使用格式本身来确定它需要多少个参数。

有两种基本方法可以做到这一点（处理变量参数列表）。

首先是要提前知道有多少个参数，或者是长度，或者是格式字符串之类的东西。这方面的例子是：

```
int arr[] = {6, 3, 1, 4, 1, 5, 9};
//           ^
//           |
//           +--- number of elements following. 
```

或者：

```
NSString *message = [NSString stringWithFormat: @"Your age is %d", age];
//                                                            ^
//                                                            |
//                                 only one format element ---+ 
```

其次是哨兵值，例如`nil/NULL/0`最后的你：

```
int arr[] = {3, 1, 4, 1, 5, 9, -1};
//                              ^
//                              |
//         marks end of data ---+ 
```

现在，显然，哨兵方法只有在您能够区分真实数据和哨兵值时才有效（在上述情况下很容易，因为 PI 的数字都是介于 0 和 9 之间的正数）。

从技术上讲，我想您也可以将它们组合起来（例如对组进行计数，每个组都有一个哨兵值），但我还没有看到它经常在野外使用。

# android - MediaPlayer.release()后SurfaceView可以复用吗？

> ID：10060021
> 
> 赞同：3
> 
> 时间：2012-04-08T02:55:19.440
> 
> 标签：android, media-player

假设我们有以下内容（来自 Android ApiDemos）：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<SurfaceView android:id="@+id/surface"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_gravity="center">
</SurfaceView> 
```

MediaPlayer使用SurfaceView后，调用了它的release()，SurfaceView可以复用吗？我试图创建一个新的MediaPlayer实例来重用SurfaceView，但是在setDisplay()处出现以下错误：java.lang.IllegalArgumentException: The surface has been released

代码如下：

```
 mPreview = (SurfaceView) findViewById(R.id.surface);
holder = mPreview.getHolder();
holder.addCallback(this);

mMediaPlayer = new MediaPlayer();
MediaPlayer.setDataSource(url);

mMediaPlayer.setDisplay(holder); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-14T11:33:13.163

尝试这个：

```
 @Override
public void surfaceCreated(SurfaceHolder holder) {
    System.out.println("===== * surfaceCreated * =====");
    if(mMediaPlayer == null)
        mMediaPlayer = new MediaPlayer();
    mMediaPlayer .setDisplay(holder);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:17:45.190

尝试这个 ：

```
mPreview  = (SurfaceView) findViewById(R.id.PlaySurfaceView);
surfaceHolder = mPreview.getHolder();
surfaceHolder.addCallback(this);
try {
 mMediaPlayer = new MediaPlayer();
 mMediaPlayer.setDataSource(url);  
 mMediaPlayer.setDisplay(holder); 
 } catch (IllegalArgumentException e1) {
     e1.printStackTrace();
   } catch (SecurityException e1) {
     e1.printStackTrace();
   } catch (IllegalStateException e1) {
     e1.printStackTrace();
   } catch (IOException e1) {
     e1.printStackTrace();
   } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-21T13:48:52.380

我遇到了这个问题，并通过将我的发布功能 visible=gone 添加到 surfaceview 来解决它：

```
 public void release() {
    if (mMediaPlayer != null) {
    setVisibility(View.GONE);
      mMediaPlayer.reset();
      mMediaPlayer.release();
      mMediaPlayer = null;
      mCurrentState = STATE_IDLE;}
  } 
```

并在 onprepared 函数中设置 visible=visible：

```
 videoView.setOnPreparedListener(new OnPreparedListener() {
            public void onPrepared(MediaPlayer mp) {
                audio=false; video=false; int ty=mp.getTrackInfo().length;
                for (int i=0; i<ty;i++)
                {
                    if (mp.getAudioTrack()>-1) {audio=true;}
                    if (mp.getVideoTrack()>-1) {video=true;}
                }

                if (((audio==false)&&(skip==true))||((video==false)&&(skip2==true))||((video==true)&&(skip4==true))) 
                {   notifybar("...");
                    nexttr();} else {
                if (vis==true) {
                if (video==false) {
                    if (mVisualizerView.getVisibility()!=View.VISIBLE) {mVisualizerView.setVisibility(View.VISIBLE);}
                        mVisualizerView.link(videoView.getAudioSessionId());
                        vis2=true;
                        } else if (vis2==true){
                       mVisualizerView.release();
                       mVisualizerView.setVisibility(View.GONE);
                      vis2=false;
                        }}
                //this
                if (video==true) {
                if (videoView.getVisibility()!=View.VISIBLE) {videoView.setVisibility(View.VISIBLE);}
                } else {if (videoView.getVisibility()!=View.INVISIBLE) {videoView.setVisibility(View.INVISIBLE);}
                } 
```

# drupal - Drupal 7 Ubercart 3 结账的简单限制

> ID：10060022
> 
> 赞同：0
> 
> 时间：2012-04-08T02:55:24.410
> 
> 标签：drupal, drupal-7, ubercart

我正在尝试编写一个非常简单的模块来强制执行自上次在 Drupal 7 站点上使用 Ubercart 3.x 购买以来的最大订单量和最小时间。我在这里扯头发。没有任何效果。我编写了我的小模块并启用了它。开发模块拾取它的痕迹。唯一的问题是什么都没有发生。现在代码中只有最大订单数量限制，但它不起作用。我究竟做错了什么？

```
<?php
  function farmers_uc_order($op, $order, $edit) {
    switch ($op) {
      case 'new':
          if ($order->order_total > 50) {
             return array(array(
               'pass' => FALSE,
               'message' => t('We are sorry, but your total order exceeds our $50 limit.  Please remove some items from your cart before checkout.'),
             ));
          }
      break;
    }
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-12T02:35:54.230

尝试将您的代码放入`submit`操作中，而不是`new`.
我没有看到[文档](http://api.ubercart.me/api/drupal/ubercart!uc_order!uc_order.api.php/function/hook_uc_order/7)指定`new`操作的返回值。

# java - 并非所有组件都显示

> ID：10060029
> 
> 赞同：0
> 
> 时间：2012-04-08T02:56:37.110
> 
> 标签：java, swing, user-interface

当我运行这个程序时，当我使用 setSize 来确定窗口大小时，窗口会挡住 panel2 中的按钮。

此外，如果我使用 frame.pack() 而不是 setSize()，所有组件都在一条水平线上，但我试图获取它们，以便 panel1 组件在一条线上，而 panel2 组件在它们下方的一条线上。

有人可以详细解释这两个问题的答案吗？

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class Exercise16_4 extends JFrame{
    // FlowLayout components of top portion of calculator
    private JLabel jlbNum1 = new JLabel("Number 1");
    private JTextField jtfNum1 = new JTextField(4);
    private JLabel jlNum2 = new JLabel("Number 2");
    private JTextField jtfNum2 = new JTextField(4);
    private JLabel jlbResult = new JLabel("Result");
    private JTextField jtfResult = new JTextField(8);

    // FlowLayout Components of bottom portion of calculator
        private JButton jbtAdd = new JButton("Add");
    private JButton jbtSubtract = new JButton("Subtract");
    private JButton jbtMultiply = new JButton("Multiply");
    private JButton jbtDivide = new JButton("Divide");

    public Exercise16_4(){
        JPanel panel1 = new JPanel();
        panel1.setLayout(new FlowLayout(FlowLayout.CENTER, 3, 3));
        panel1.add(jlbNum1);
        panel1.add(jtfNum1);
        panel1.add(jlNum2);
        panel1.add(jtfNum2);
        panel1.add(jlbResult);
        panel1.add(jtfResult);

        JPanel panel2 = new JPanel();
        panel2.setLayout(new FlowLayout(FlowLayout.CENTER, 3, 10));
        panel1.add(jbtAdd);
        panel1.add(jbtSubtract);
        panel1.add(jbtMultiply);
        panel1.add(jbtDivide);

        add(panel1, BorderLayout.NORTH);
        add(panel2, BorderLayout.CENTER);
    }

    public static void main(String[] args){
        Exercise16_4 frame = new Exercise16_4();

        frame.setTitle("Caculator");
        frame.setSize(400, 200);
        frame.setLocationRelativeTo(null);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        //frame.setResizable(false);
        frame.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T03:09:40.050

您的问题可能是印刷错误，因为您将所有组件添加到 panel1 而没有添加到 panel2：

```
 // you create panel2 just fine
  JPanel panel2 = new JPanel();
  panel2.setLayout(new FlowLayout(FlowLayout.CENTER, 3, 10));

  // but you don't use it! Change below to panel2.
  panel1.add(jbtAdd);
  panel1.add(jbtSubtract);
  panel1.add(jbtMultiply);
  panel1.add(jbtDivide); 
```

将按钮添加到 panel2，然后调用`pack()`before `setVisible(true)`。不要设置 GUI 的大小。

# php - RewriteRule 删除漂亮 URL 的无关 URL 部分

> ID：10060030
> 
> 赞同：0
> 
> 时间：2012-04-08T02:56:42.697
> 
> 标签：php, .htaccess, mod-rewrite, pretty-urls

## 背景

尝试使用 Apache 的 mod rewrite 和 PHP 重新创建 StackOverflow 风格的漂亮 URL。

## 问题

这很好用：

```
<IfModule mod_rewrite.c>
  RewriteEngine on

  RewriteRule ([0-9]+)$ index.php?id=$1 [L]
</IfModule> 
```

`http://localhost/home/script/5`诸如重定向到的URL `http://localhost/home/script/index.php?r=5`。CSS 内容加载完美。

像重定向这样的 URL `http://24.68.226.186/recipes/recipe/5/seo-text`，但是 CSS 文件的相对路径不正确：

```
<link rel="StyleSheet" hreF="css/theme.css" type="text/css" media="screen,print" id="css-theme" /> 
```

## 目录

脚本 (index.php) 的目录结构类似于：

```
htdocs/home/script
htdocs/home/script/.htaccess
htdocs/home/script/index.php
htdocs/home/script/css
htdocs/home/script/images 
```

## 问题

您如何使用 mod rewrite 告诉 Apache 在提供文件时使用“脚本”目录而不是附加到 URL 的任何子目录？

换句话说，您将如何使用 mod rewrite 删除 URL 的“seo-text”部分并（1）确保它反映实际标题 [来自数据库]；(2) 将浏览器重定向到新的 URL [如有必要]；(3) 告诉 Apache 忽略 URL 中 ID 之外的所有路径？

我宁愿不在 CSS 中使用绝对路径。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T22:49:11.627

使用了洛根的建议：

```
<base href="/home/script/" target="_self" /> 
```

由于一个错误，这不适用于 IE8。

# url - 如何匹配龙卷风中的 url 模式，例如 www.abc.com/?code=abcd1234

> ID：10060034
> 
> 赞同：0
> 
> 时间：2012-04-08T02:57:06.433
> 
> 标签：url, tornado

我用谷歌搜索了很多，但找不到。

比如我的app是www.abc.com，这种url怎么匹配：

```
www.abc.com/?code=abcd1234 
```

我的处理程序：

```
handers = [
  (r"/?", HomeHandler),
  (r"/?code=([^/]+)", OtherHandler),
] 
```

我认为第二种模式是错误的，它总是使用第一种

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T05:59:03.913

好的，我知道 r"/" 是路径，而 '?code=([^/]+)' 是查询。

# android - 如何像最新的 FriendCaster 应用一样实现时间戳滚动面板？

> ID：10060040
> 
> 赞同：1
> 
> 时间：2012-04-08T02:58:45.517
> 
> 标签：android, scroll

FriendCaster 的最新更新带来了如截图所示的时间戳滚动面板。我想建立一个类似的，但任何人都可以告诉如何开始？

截图可以在这里找到：http: [//imageshack.us/photo/my-images/191/screenshot2012040810401.png/](http://imageshack.us/photo/my-images/191/screenshot2012040810401.png/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:30:26.557

Chris Banes 在 GitHub 上的[ScrollBarPanel 。](https://github.com/chrisbanes/Android-ScrollBarPanel)支持自定义视图作为滚动条面板。

[Cyril Mottier解释](http://android.cyrilmottier.com/?p=556)了如何通过扩展 ListView 来实现滚动条面板。

# cakephp - 为什么我的密码没有散列？

> ID：10060045
> 
> 赞同：0
> 
> 时间：2012-04-08T03:01:17.340
> 
> 标签：cakephp

所以，我环顾四周并检查了SO。我的问题与此类似：[为什么 CakePHP 身份验证组件没有对我的密码进行哈希处理？](https://stackoverflow.com/questions/617471/why-is-the-cakephp-authentication-component-not-hashing-my-password)除了我无法让它工作。

我的密码在注册时未散列。

在我的用户控制器中：

```
public function beforeFilter() {
    parent::beforeFilter();
    $this->Auth->allow('register', 'logout'); 
    $this->Auth->fields = array('username' => 'email', 'password' => 'password');
} 
```

看法：

```
<?php echo $this->Form->create('User'); ?>
    <fieldset>

        <?php
        echo $this->Form->input('email');
        echo $this->Form->input('password');
        ?>
    </fieldset>
<?php echo $this->Form->end(__('Submit'));?> 
```

我有一些该`email`领域的验证器。问题是，密码被存储为明文。我认为这`Auth->fields`条线应该解决这个问题，但事实并非如此。我知道 CakePHP 只有在 和 都被填充时才会散列，`username`但我清楚地重新映射了它，所以它应该散列正确吗？`password``$data`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T03:20:56.053

如果您使用的是 CakePHP 2.x，Auth 将不再自动散列您的密码

[来自http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)的文档

> AuthComponent 不再自动散列它可以找到的每个密码。之所以将其删除，是因为它使验证等许多常见任务变得困难。您永远不应该存储纯文本密码，并且在保存用户记录之前，您应该始终对密码进行哈希处理。您可以在保存密码之前使用静态 AuthComponent::password() 对密码进行哈希处理。这将为您的应用程序使用配置的散列策略。

# c++ - 使用 Bresenham 线算法绘制线条

> ID：10060046
> 
> 赞同：9
> 
> 时间：2012-04-08T03:01:21.007
> 
> 标签：c++, graphics, bresenham

我的计算机图形作业是仅使用绘制点的能力来实现 OpenGL 算法。

所以很明显，我需要先开始`drawLine()`工作，然后才能画出其他任何东西。 `drawLine()`只能使用整数来完成。没有浮点数。

这是我被教导的。基本上，线条可以分为 4 种不同的类别，正陡、正浅、负陡和负浅。这是我应该画的图：

![预期结果](../Images/0accbc76802d499915f955b44594bf31.png)

这是我的程序正在绘制的图片：

![实际结果](../Images/8fb125e66175f4176f8a0518c9d91617.png)

颜色是为我们完成的。给定顶点，我们需要使用 Bresenham 的线算法根据起点和终点绘制线。

这是我到目前为止所拥有的：

```
int dx = end.x - start.x;
int dy = end.y - start.y;

//initialize varibales
int d;
int dL;
int dU;

if (dy > 0){
        if (dy > dx){
                //+steep
                d = dy - 2*dx;
                dL = -2*dx;
                dU = 2*dy - 2*dx;

                for (int x = start.x, y = start.y; y <= end.y; y++){
                        Vertex v(x,y);
                        drawPoint(v);

                        if (d >= 1){
                                d += dL;
                        }else{
                                x++;
                                d += dU;
                        }
                }              
        } else {
                //+shallow
                d = 2*dy - dx;
                dL = 2*dy;
                dU = 2*dy - 2*dx;

                for (int x = start.x, y = start.y; x <= end.x; x++) {
                        Vertex v(x,y);
                        drawPoint(v);

                        // if choosing L, next y will stay the same, we only need
                        // to update d by dL
                        if (d <= 0) {
                                d += dL;
                        // otherwise choose U, y moves up 1
                        } else {
                                y++;
                                d += dU;
                        }
                }
        }
} else {
        if (-dy > dx){
                cout << "-steep\n";
                //-steep
                d = dy - 2*dx;
                //south
                dL = 2*dx;
                //southeast
                dU = 2*dy - 2*dx;

                for (int x = start.x, y = start.y; y >= end.y; --y){
                        Vertex v(x,y);
                        drawPoint(v);

                        //if choosing L, next x will stay the same, we only need
                        //to update d
                        if (d >= 1){
                                d -= dL;
                        } else {
                                x++;
                                d -= dU;
                        }
                }

        } else {
                cout << "-shallow\n";
                //-shallow
                d = 2*dy - dx;
                dL = 2*dy;
                dU = 2*dy - 2*dx;

                for (int x = start.x, y = start.y; x <= end.x; x++){
                        Vertex v(x,y);
                        drawPoint(v);

                        if (d >= 0){
                                d += dL;
                        } else {
                                --y;
                                d -= dU;
                        }
                }
        }
} 
```

我知道我的错误会很愚蠢，但老实说，我无法弄清楚我做错了什么。为什么有些线条画错如上图？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-05-06T18:52:35.303

```
/*BRESENHAAM ALGORITHM FOR LINE DRAWING*/
#include<iostream.h>
#include<graphics.h>
#include<stdio.h>
#include<conio.h>
#include<stdlib.h>
#include<math.h>
#include<dos.h>
void bhm_line(int,int,int,int,int);
void main()
{
 int ghdriver=DETECT,ghmode,errorcode,x1,x2,y1,y2;
 initgraph(&ghdriver,&ghmode,"..\\bgi");
 errorcode = graphresult();
 if(errorcode !=grOk)
 {
  cout<<"Graphics error:%s\n"<<grapherrormsg(errorcode);
  cout<<"Press any key to halt:";
  getch();
  exit(1);
 }
 clrscr();
 cout<<"Enter the coordinates (x1,y1): ";
 cin>>x1>>y1;
 cout<<"Enter the coordinates (x2,y2): ";
 cin>>x2>>y2;
 bhm_line(x1,y1,x2,y2,1);
 getch();
}
void bhm_line(int x1,int y1,int x2,int y2,int c)
{
 int x,y,dx,dy,dx1,dy1,px,py,xe,ye,i;
 dx=x2-x1;
 dy=y2-y1;
 dx1=fabs(dx);
 dy1=fabs(dy);
 px=2*dy1-dx1;
 py=2*dx1-dy1;
 if(dy1<=dx1)
 {
  if(dx>=0)
  {
   x=x1;
   y=y1;
   xe=x2;
  }
  else
  {
   x=x2;
   y=y2;
   xe=x1;
  }
  putpixel(x,y,c);
  for(i=0;x<xe;i++)
  {
   x=x+1;
   if(px<0)
   {
    px=px+2*dy1;
   }
   else
   {
    if((dx<0 && dy<0) || (dx>0 && dy>0))
    {
     y=y+1;
    }
    else
    {
     y=y-1;
    }
    px=px+2*(dy1-dx1);
   }
   delay(0);
   putpixel(x,y,c);
  }
 }
 else
 {
  if(dy>=0)
  {
   x=x1;
   y=y1;
   ye=y2;
  }
  else
  {
   x=x2;
   y=y2;
   ye=y1;
  }
  putpixel(x,y,c);
  for(i=0;y<ye;i++)
  {
   y=y+1;
   if(py<=0)
   {
    py=py+2*dx1;
   }
   else
   {
    if((dx<0 && dy<0) || (dx>0 && dy>0))
    {
     x=x+1;
    }
    else
    {
     x=x-1;
    }
    py=py+2*(dx1-dy1);
   }
   delay(0);
   putpixel(x,y,c);
  }
 }
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2018-10-17T16:43:29.993

我在 C++ 中实现了原始的 Bresenham 算法，并尝试尽可能多地优化（尤其是关于从内部循环中删除 IF）。

它绘制线性缓冲区而不是表面，就此而言，此实现几乎与[EFLA（极快线算法）](http://www.edepot.com/algorithm.html)一样快（可能慢 5%）。

```
#include <vector>
#include <math.h>
using namespace std;

vector<unsigned char> buffer;

int imageSide = 2048; // the width of the surface

struct Point2Di
{
    int x;
    int y;
    Point2Di(const int &x, const int &y): x(x), y(y){}
    Point2Di(){}

};

void drawLine(const Point2Di &p0, const Point2Di &p1)
{
    int dx = p1.x - p0.x;
    int dy = p1.y - p0.y;

    int dLong = abs(dx);
    int dShort = abs(dy);

    int offsetLong = dx > 0 ? 1 : -1;
    int offsetShort = dy > 0 ? imageSide : -imageSide;

    if(dLong < dShort)
    {
        swap(dShort, dLong);
        swap(offsetShort, offsetLong);
    }

    int error = dLong/2;
    int index = p0.y*imageSide + p0.x;
    const int offset[] = {offsetLong, offsetLong + offsetShort};
    const int abs_d[]  = {dShort, dShort - dLong};
    for(int i = 0; i <= dLong; ++i)
    {
        buffer[index] = 255;  // or a call to your painting method
        const int errorIsTooBig = error >= dLong;
        index += offset[errorIsTooBig];
        error += abs_d[errorIsTooBig];
    }
} 
```

我正在使用的 EFLA 实现是：

```
void drawLine(Point2Di p0,  Point2Di p1)
{
    bool yLonger=false;
    int shortLen=p1.y-p0.y;
    int longLen=p1.x-p0.x;
    if (abs(shortLen)>abs(longLen)) {
        swap(shortLen, longLen);
        yLonger=true;
    }
    int decInc = longLen==0 ?  decInc=0 : ((shortLen << 16) / longLen);

    if (yLonger) {
        p0.y*=imageSide;
        p1.y*=imageSide;
        if (longLen>0)
            for (int j=0x8000+(p0.x<<16);p0.y<=p1.y;p0.y+=imageSide, j+=decInc)
                buffer[p0.y + (j >> 16)] = 255;  // or a call to your painting method
        else
            for (int j=0x8000+(p0.x<<16);p0.y>=p1.y;p0.y-=imageSide, j-=decInc)
                buffer[p0.y + (j >> 16)] = 255;  // or a call to your painting method
    }
    else
    {
        if (longLen>0)
            for (int j=0x8000+(p0.y<<16);p0.x<=p1.x;++p0.x, j+=decInc)
                buffer[(j >> 16) * imageSide + p0.x] = 255;  // or a call to your painting method
        else
            for (int j=0x8000+(p0.y<<16);p0.x>=p1.x;--p0.x, j-=decInc)
                buffer[(j >> 16) * imageSide + p0.x] = 255;  // or a call to your painting method
    }
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-12T05:16:11.183

如果有人想知道问题是什么，我仍然不知道它是什么。我最终做的是重构我的代码，以便 -shallow 和 -steep 分别使用与 +shallow 和 +steep 相同的算法。在调整 x,y 坐标（否定 x 或 y 坐标）后，当我去绘制它们时，我否定了我原来的否定，以便它绘制在正确的位置。

# svn - 日期格式的“svn：修订参数中的语法错误”

> ID：10060047
> 
> 赞同：4
> 
> 时间：2012-04-08T03:01:30.360
> 
> 标签：svn, date, syntax, formats

谁能告诉我在 OS 10.7.3 上使用 svn 和**tcsh** shell 可以接受哪些日期格式？我试图做一个`svn up -r {DATE}`，每次我得到这个：

```
svn: Syntax error in revision argument 
```

此处描述的格式不被接受： [http ://svnbook.red-bean.com/en/1.2/svn.tour.revs.html](http://svnbook.red-bean.com/en/1.2/svn.tour.revs.html)

我最后一次尝试是尝试结帐：

```
svn checkout --revision {2012-02-17} svn+ssh://blah/blah blah
svn: Syntax error in revision argument '2012-02-17' 
```

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T03:10:39.283

**tcsh在这方面与****bash**不同：问题在于花括号。

尝试：

```
svn checkout --revision \{2012-02-17\} svn+ssh://blah/blah blah 
```

# c# - 哪个性能更高，将方法传递给整个对象，还是传递该对象的属性？

> ID：10060050
> 
> 赞同：4
> 
> 时间：2012-04-08T03:02:34.187
> 
> 标签：c#, .net, object, value-type, reference-type

考虑以下示例。

我需要检查 CouponModel 是否具有唯一的序列号。

我有两个选择：

```
CouponModel model = GetFromSomewhere();

if (!CouponHasUniqueKey(model))
{
}

//or

if (!CouponHasUniqueKey(model.SerialKey))
{
} 
```

当然，在我传入整个对象的方法中，我必须访问字符串属性，而不是直接使用字符串。

哪个选项更好，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T03:10:41.833

我相信性能会是一样的。

我也更愿意将责任交给对象本身：

```
CouponModel coupon = GetFromSomewhere();
if (!coupon.HasUniqueKey()) {
  // ...
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T03:45:51.333

1.答案已经贴出来了，虽然作者心中隐藏着“问题”：

“我应该通过整个对象吗”？当他这样说时，他认为需要将一些巨大的地球传递给方法。

大多数面向对象的编程语言（C#、java、c++ ..）并非如此

当您将对象的实例传递给方法时，您只传递了一个引用而不是其他任何东西。

2.请注意，对象本身的属性可以是整个对象，并且可能是该属性的大小大于对象的大小。

因此，回答您的问题是为了性能优势，您通过什么并不重要。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T05:33:25.067

第二种选择更好。正如得墨忒耳法则所说。在这种情况下，不是从优化的角度来看，而是从设计的角度来看。

[http://en.wikipedia.org/wiki/Law_of_Demeter](http://en.wikipedia.org/wiki/Law_of_Demeter)

# windows-phone-7 - Windows phone 为图像添加边框

> ID：10060051
> 
> 赞同：2
> 
> 时间：2012-04-08T03:02:59.040
> 
> 标签：windows-phone-7, bitmapimage

我想在图像上添加边框（20px 白色），另存为新的 jpeg 图像（带边框的原始图像），我不知道如何开始。谁能给我一个方向或代码示例？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T04:47:44.213

你有两种方法可以做到：

1.  在您的 UI 上，使用具有正确设置的 Border 元素包装图像，并使用`new WriteableBitmap(borderElement, null)`它创建一个新的 WriteableBitmap，然后您可以使用[SaveJpeg](http://msdn.microsoft.com/en-us/library/system.windows.media.imaging.extensions.savejpeg%28v=VS.92%29.aspx)扩展方法保存它。

2.  您的另一个选择是使用[WriteableBitmapEx 类库](http://writeablebitmapex.codeplex.com/)以图形方式添加您想要的图形元素。

我都用过。(1) 的优点是在添加对另一个 DLL 的依赖方面的麻烦更少。(2) 的优点是您不需要弄乱您的 UI 来创建图像。

# php - 仅包括已输入的数据

> ID：10060052
> 
> 赞同：-1
> 
> 时间：2012-04-08T03:03:57.067
> 
> 标签：php, mysql, codeigniter

目前，我的代码正在使用从数据库中提取数据

`$this->model->function()->value;`在控制器中，然后通过 转移`$data['value'] = "";`到我的视图中，然后我有一个列表来回显数据库给出的值。

仅包含客户端输入的数据的最佳方法是什么。有些人不会添加传真号码，那么为什么要将其添加到文档等中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:34:47.277

如果您的控制器将模型中的属性直接传递给您的视图，您可以在打印字段之前检查视图中是否存在数据：

```
<?php if (strlen($fax_num) > 0) { echo 'Fax number: ' . $fax_num; } ?> 
```

视图可以包含*一些*表示逻辑，以确定在给定数据的情况下应该显示什么以及如何显示信息。

# php - 在 PHP 中实现总小时、分钟和秒时需要帮助

> ID：10060053
> 
> 赞同：1
> 
> 时间：2012-04-08T03:04:09.237
> 
> 标签：php

我对 PHP 很陌生，我需要帮助来实现 PHP 中的总小时数和分钟数。

我在 PHP 中有一个以小时、分钟和秒为单位的时间数组

```
(array) Array
(
    [0] => 01:10:00
    [1] => 01:20:30
    [2] => 00:00:10
) 
```

我的预期输出应该是以小时、分钟和秒为单位的总时间（例如 2:30:40）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T03:08:35.307

```
$hours;
$minutes;
$seconds;

foreach( $thatArray as $v )
{
  $subArray = explode(':', $v);

  $hours   += $subArray[0];
  $minutes += $subArray[1];
  $seconds += $subArray[2];
}

// output $hours / $minutes / $seconds, correctly formatting, etc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T03:09:24.330

不会给你codez。你可以这样做：

使用获取时间的各个组件[`explode()`](http://php.net/manual/en/function.explode.php)

从添加秒数开始。如果结果大于 60，则增加分钟数，依此类推。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T03:10:41.223

最简单的方法可能是将它们全部转换为秒表示，对它们求和，然后将它们转换回来。例如：

```
function timeToSeconds($time) {
    $parts = explode(':', $time);

    return $parts[0] * 3600 + $parts[1] * 60 + $parts[2];
}

function secondsToTime($seconds) {
    $hours = floor($seconds / 3600);
    $minutes = floor($seconds / 60) % 60;
    $seconds %= 60;

    return str_pad($hours, 2, '0', STR_PAD_LEFT) . ':' . str_pad($minutes, 2, '0', STR_PAD_LEFT) . ':' . str_pad($seconds, 2, '0', STR_PAD_LEFT);
}

$times = array('01:10:00', '01:20:30', '00:00:10');
$total = secondsToTime(array_sum(array_map('timeToSeconds', $times))); 
```

[这是一个演示。](http://codepad.org/LiktohG4)

# android - Android + saxParser endElement 完成循环？

> ID：10060054
> 
> 赞同：0
> 
> 时间：2012-04-08T03:04:12.433
> 
> 标签：android, saxparser

使用 saxParser，我如何判断 endElement 何时完成？不幸的是，我有一个相当大的 XML 文件，需要将所有数据存储到 ArrayList 中，然后再将其传递给 InsertHelper 实用程序。如何测试 saxParser 是否已完成循环？

```
/**
 * Called when tag opening ( ex:- <name>AndroidPeople</name> -- <name> )
 */
public void startElement(String uri, String localName, String qName, Attributes attributes) throws SAXException {
    currentElement = true;

    if (localName.equals("StoreDetails")) {
        //Log.i("TAG", "Store Details");
        newKOPStoreVersion = attributes.getValue("stores_version");
        //if (!dBHelper.getStoreXMLVersion().equals(newKOPStoreVersion)) { BUT BACK
        Log.i("TAG", "Store Details Changed");
        isStoreDetailsVersionChanged = true;
        //dBHelper.deleteStoreDetail();
        //currentValue = "";
        //buffer = new StringBuffer();
        dBHelper.setStoreXMLVersion(newKOPStoreVersion);
        /*}
        else BUT PACK
        {
            Log.i("TAG", "no change for KOP store version");
            throw new KOPSAXTerminatorException();
        }*/
    }

}

/**
 * Called when tag closing ( ex:- <name>AndroidPeople</name> -- </name> )
 */
@Override
public void endElement(String uri, String localName, String qName) throws SAXException {

    currentElement = false;     

    //if (isStoreDetailsVersionChanged == true) { PUT BACK
    if (localName.equals("StoreID")) {
        buffer.toString().trim();
        storeDetails.setStoreId(buffer.toString());
    } else if (localName.equals("StoreName")) {
        buffer.toString().trim();
        storeDetails.setStoreName(buffer.toString());
    } else if (localName.equals("StoreDescription")) {
        buffer.toString().trim();
        storeDetails.setStoreDescription(buffer.toString());
    } else if (localName.equals("Location")) {
        buffer.toString().trim();
        storeDetails.setLocation(buffer.toString());
    } else if (localName.equals("Phonenumber")) {
        buffer.toString().trim();
        storeDetails.setPhoneNumber(buffer.toString());
    } else if (localName.equals("VisualmapID")) {
        buffer.toString().trim();
        storeDetails.setVisualMapId(buffer.toString());
    } else if (localName.equals("x")) {
        buffer.toString().trim();
        storeDetails.setCartX(buffer.toString());
    } else if (localName.equals("y")) {
        buffer.toString().trim();
        storeDetails.setCartY(buffer.toString());
    } else if (localName.equals("ClosestParkingLot")) {
        buffer.toString().trim();
        storeDetails.setClosestParkingLot(buffer.toString());
    } else if (localName.equals("RelatedCategory")) {
        buffer.toString().trim();
        storeDetails.setRelatedCategory(buffer.toString());
        //add buffer to arraylist - then loop array do the ih dance
        dataList.add(storeDetails);
//this is my arraylist and I'm attempting to loop over it outside of this class, but it seems to only contain the last value of the xml, not all the values.

    }

    buffer = new StringBuffer();

    //}
    if (localName.equals("StoreDetails")) {
        //Log.i("TAG","End StoreDetails");
        isStoreDetailsVersionChanged = false;
        //throw new KOPSAXTerminatorException();
    }
}

/**
 * Called to get tag characters ( ex:- <name>AndroidPeople</name> -- to get
 * AndroidPeople Character )
 */
@Override
public void characters(char[] ch, int start, int length) throws SAXException {
    if (currentElement) {
        buffer.append(ch, start, length);
        currentElement = false;
    }
} 
```

如果你愿意看，我可以把完整的代码发给你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:07:50.667

当 SAX 解析器完成时，将调用结束文档。您所要做的就是覆盖处理程序中的方法（具有元素方法的同一类。

```
 @Override
 public void endDocument() throws SAXException {

 } 
```

# asp.net-mvc-4 - 如何使用 ASP.NET MVC 进行等效的“rake routes”

> ID：10060056
> 
> 赞同：5
> 
> 时间：2012-04-08T03:04:23.343
> 
> 标签：asp.net-mvc-4

我想检查我的 ASP.NET MVC 应用程序的定义路由。我如何才能看到所有的 URL、可接受的动词和相应的操作方法都和我想的一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T20:50:58.997

您可以结帐的一件事是[一瞥](http://getglimpse.com/)。它可以向您展示路由引擎如何为给定的 URL 选择路由。

如果你想断言路由是根据你给定 URL 模式的期望设置的，你可以[为你的 routes 编写单元测试](https://www.google.com/search?q=mvc%20unit%20test%20routes)。

**回复评论**

你如何在 MVC 中以声明方式实现路由？我一直认为他们必须从 C# 编译，但也许你正在使用一些我从未听说过的库。

此外，您可以断言您不打算路由的给定（一组）URL 是（不）路由的。

# node.js - S3 随机给我“BadDigest”错误

> ID：10060058
> 
> 赞同：3
> 
> 时间：2012-04-08T03:04:40.633
> 
> 标签：node.js, amazon-s3

我有一个 node.js 应用程序，它会定期将一些数据推送到 Amazon S3。我正在使用 Put 请求将缓冲区推送到 S3。

我知道 S3 请求的“content-md5”参数需要是我正在推送的内容的 base64 编码 Md5 哈希。 **让我感到困惑的是，90% 的情况下，我的请求都会成功。** 另外 10% 的时间，我的散列方法根本没有改变，亚马逊给了我“badDigest”错误：

```
{ [Error: API error with HTTP Code: 400]
  headers: 
   { 
     'content-type': 'application/xml',
     'transfer-encoding': 'chunked',
     date: 'Fri, 06 Apr 2012 02:20:14 GMT',
     connection: 'close',
     server: 'AmazonS3' },
  code: 400,
  document: 
   { Code: 'BadDigest',
     Message: 'The Content-MD5 you specified did not match what we received.',
     ExpectedDigest: 'fPRrmxapcSHmI2gljme1Fg==',
     CalculatedDigest: 'w6PoDxh2ty478+Mw2UwTrA==',
     RequestId: '1018E7A80A8B0B00',
     HostId: 'W/SK/OovQHlsi593DJ154pkHdOrUk3oMWmIGNdOKj3WaHa8cBknhB+7H5IdZLUjt' } } 
```

以前有没有其他人经历过 S3 的这种随机性？我错过了一些明显的东西吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-27T13:49:07.047

您可能忘记指定`'utf8'`为`update`.

```
var status = 'काक्नोम्यत्क्नोम्यत्चं शक्नोम्यत्तुमतुम् ।तुम् ।् । नोपहिनस्ति माम् ॥';
var contentMd5 = crypto
                  .createHash('md5')
                  .update(status, 'utf8')
                  .digest('base64'); 
```

没有它在大多数情况下都有效，但当您的字符串包含多字节字符时则无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-01-26T22:32:43.517

aws-sdk 将自动为您计算 ContentMD5 和 ContentLength 值。如果您有一个 UTF-8 字符串并且您正在使用 '।्'.length 设置 ContentLength 值 S3 将返回 BadDigest 错误。所以我的解决方案就是让 aws-sdk 计算 ContentMD5 和 ContentLength 值。

# paypal - Paypal PDT - 无法获取交易 ID

> ID：10060062
> 
> 赞同：4
> 
> 时间：2012-04-08T03:05:03.000
> 
> 标签：paypal, paypal-sandbox

客户从 Paypal 付款后，他可以在自动返回和 pdt 功能开启的情况下自动重定向回我的网站。当客户等待 10 秒进行自动重定向时一切正常，事务 ID 通过 get 发送，但是当客户选择“单击此处”而不是等待 10 秒进行自动重定向时，事务 ID 不是发送。

任何人都知道解决此问题的方法吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:17:11.877

首先，您只是想显示交易 ID，还是尝试将其添加到数据库中或将其用于电子邮件收据等？

如果您只是想显示它，那么 PDT 就可以了。否则，我强烈建议您改用 IPN。它非常相似，只是无论用户是否将其返回您的站点，数据都将始终发布给它，即使启用了自动返回，也不能始终保证这一点。

如果您只需要 PDT，那么无论他们如何恢复，它都应该可以正常工作。不过，我很少使用 PDT，以至于我最近真的没有对它进行太多测试。我必须在沙箱中运行一些测试，看看我是否可以重现它并弄清楚如何让它按照你的意愿工作。

不过，请告诉我，因为如果 IPN 是更好的解决方案，我不想浪费时间弄乱 PDT。

# php - 在不更改 URL 的情况下加载页面并保持相对路径正常工作

> ID：10060064
> 
> 赞同：1
> 
> 时间：2012-04-08T03:05:14.167
> 
> 标签：php, javascript, url

我在这里的第一篇文章...我希望我不会违反任何规则，如果我这样做了，请放轻松:-) 我有一个页面 a.php 有一个带有一个字段的简单表单：名称

用户输入他/她的名字并提交。文件 b.php 位于表单的 action 字段中，因此它获取表单。

b.php 需要根据用户输入加载幻灯片。假设有一个文件夹“clients”，它有文件夹 John 和 Mary。这些文件夹中的每一个都有一个索引文件和图像、CSS、JS 等的其他子文件夹。索引文件具有子文件夹的相对路径，例如：./images/pic1.jpg ./display.css 等。

这是我的问题：我想加载，比如 John/index.html，而不更改 URL，即 xyz.com/b.php 如果我使用 iFrame，源代码将显示 xyz.com/clients/John/index .html 已加载，如果我使用 PHP include("xyz.com/clients/John/index.html") 那么 John/index.html 中的相对路径将不起作用。

我试图隐藏幻灯片的物理位置，以便在用户可以看到的情况下始终在相同的 URL 下为它们提供服务。将相对路径更改为绝对路径将不起作用，因为这会泄露我试图隐藏的所有内容！

我已经简化了表格、文件夹名称等来解释问题。有人可以提出任何解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T03:12:05.870

我不完全理解这个问题，但 `<base>`可能会有所帮助。它告诉浏览器使页面中的所有链接都相对于另一个 URL，而不是页面的加载位置

```
<base href="http://mydomain.com/mybaseurl/" /> 
```

# matlab - 如何获取出现在命令窗口中的matlab输出

> ID：10060067
> 
> 赞同：2
> 
> 时间：2012-04-08T03:06:14.333
> 
> 标签：matlab, command-window

如何获得matlab的输出？**不是**整个输出（我知道**日记**可以提供帮助）

**一个简单的例子**：

```
>> st = rng
st = 
     Type: 'twister'
     Seed: 0
    State: [625x1 uint32] 
```

我想要的是将输出复制到剪贴板。当我使用**剪贴板**功能时，出现错误：

```
>> clipboard('copy', st)
Error using mat2str (line 54)
Input matrix must be numeric.
Error in clipboard (line 56)
        stuff = mat2str(stuff); 
```

我可以轻松地将输出字符串获取到剪贴板，而不是使用鼠标选择...复制...

谢谢！

**添加**：

谢谢，好！复制 DISP 表示是我想要的。

但是在我运行命令**toString1(rng)**之后，我可以在剪贴板中得到这样的东西吗：

```
 >> rng
   ans = 
       Type: 'twister'
       Seed: 11284109
      State: [625x1 uint32] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:15:48.353

要将矩阵复制到剪贴板，我建议提交[MAT2CLIP FileExchange](http://www.mathworks.com/matlabcentral/fileexchange/8559-mat2clip)。它不仅支持字符串或数字矩阵，还支持混合元胞数组、逻辑等。

虽然它不支持结构。如果您需要复制单个字段，您仍然可以使用 mat2clip。您可以通过结构字段设置 for 循环并用于`pause`从剪贴板粘贴字段。

如果您有兴趣复制整个结构或其 DISP 表示，请检查这个 SO 问题 -[如何将 DISP 的结果作为返回参数获取到变量中？](https://stackoverflow.com/q/3862815/163080)

这个问题的一个解决方案是将 DISP 输出到一个字符串，您可以使用 mat2clip 将其复制到剪贴板（对于任何具有`display`方法的对象都是通用的）：

```
toString = @(x) evalc('disp(x)');
mystring = toString(mystruct); 
```

另一个答案推荐来自[FileExchange](http://www.mathworks.com/matlabcentral/fileexchange/15017-struct2str)的 STRUCT2STR。还要检查[STRUCT2STR recursive](http://www.mathworks.com/matlabcentral/fileexchange/18895)。

# c# - 当Image为null时，设置另一个默认图像？

> ID：10060068
> 
> 赞同：1
> 
> 时间：2012-04-08T03:06:28.790
> 
> 标签：c#, wpf, xaml, styles, datatemplate

你能看到这个标签：

```
<Image Source="{Binding Image}" Stretch="UniformToFill"/> 
```

但在下面？我想要做的是，当 Image 为空时，设置另一个默认图像。这可能吗？

```
<!-- Grid-appropriate 250 pixel square item template as seen in the GroupedItemsPage and ItemsPage -->
<DataTemplate x:Key="Standard250x250ItemTemplate">
    <Grid HorizontalAlignment="Left" Width="320" Height="240">
        <Border Background="{StaticResource ListViewItemPlaceholderRectBrush}">
            <Image Source="{Binding Image}" Stretch="UniformToFill"/>
        </Border>
        <StackPanel VerticalAlignment="Bottom" Background="{StaticResource ListViewItemOverlayBackgroundBrush}">
            <TextBlock Text="{Binding ShortTitle}" Foreground="{StaticResource ListViewItemOverlayTextBrush}" Style="{StaticResource TitleTextStyle}" Height="48" Margin="15,0,15,0"/>
        </StackPanel>
    </Grid>
</DataTemplate> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T03:11:46.903

用. `Style`_ `DataTrigger`例如类似的东西

```
<Image Stretch="UniformToFill">
     <Image.Style>
         <Style TargetType="Image">
             <Setter Property="Source" Value="{Binding Image}"/>
             <Style.Triggers>
                 <DataTrigger Binding="{Binding Image}" Value="{x:Null}">
                     <Setter Property="Source" Value="Images/Default.png"/>
                 </DataTrigger>
             </Style.Triggers>
         </Style>
    </Image.Style>
</Image> 
```

注意**局部值**的[优先级](https://msdn.microsoft.com/en-us/library/ms743230%28v=vs.100%29.aspx)。

 *** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T14:09:29.913

我不确定您是否需要一个触发器，当我需要在绑定值不会转换时指定一个值时，我通常使用如下所示的后备值。

```
<Image Source="{Binding Path=ImageURI, FallbackValue='SomeImageURI'}" /> 
```

[Microsoft FallbackValue 属性](http://msdn.microsoft.com/en-us/library/system.windows.data.bindingbase.fallbackvalue.aspx)**

# python - 使用 Python 安全地提取 zip 或 tar

> ID：10060069
> 
> 赞同：29
> 
> 时间：2012-04-08T03:07:46.900
> 
> 标签：python, zip, tar, zipfile, tarfile

我正在尝试将用户提交的 zip 和 tar 文件提取到目录中。zipfile 的[extractall](http://docs.python.org/library/zipfile.html#zipfile.ZipFile.extractall)方法（与 tarfile 的 extractall 类似[）](http://docs.python.org/library/tarfile.html#tarfile.TarFile.extractall)的文档指出，路径可能是绝对`..`路径或包含超出目标路径的路径。相反，我可以使用`extract`自己，如下所示：

```
some_path = '/destination/path'
some_zip = '/some/file.zip'
zipf = zipfile.ZipFile(some_zip, mode='r')
for subfile in zipf.namelist():
    zipf.extract(subfile, some_path) 
```

这安全吗？在这种情况下，档案中的文件是否有可能结束`some_path`？如果是这样，我怎样才能确保文件永远不会在目标目录之外结束？

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-04-09T17:44:16.187

**注意：**从 python 2.7.4 开始，这对于 ZIP 档案来说不是问题。答案底部的详细信息。这个答案侧重于 tar 档案。

要找出路径真正指向的位置，请使用`os.path.abspath()`（但请注意关于将符号链接作为路径组件的警告）。如果您规范化 zipfile 中的路径`abspath`并且它不*包含*当前目录作为前缀，则它指向它之外。

但是您还需要检查从存档中提取的任何符号链接的*值（tarfile 和 unix zipfile 都可以存储符号链接）。*如果您担心众所周知的“恶意用户”会故意绕过您的安全性，而不是简单地将自身安装在系统库中的应用程序，这一点很重要。

这就是前面提到的警告：`abspath`如果您的沙箱已经包含指向目录的符号链接，则会被误导。即使是指向沙箱内的符号链接也可能很危险：符号链接`sandbox/subdir/foo -> ..`指向，因此应该禁止`sandbox`该路径。`sandbox/subdir/foo/../.bashrc`最简单的方法是等到之前的文件被提取并使用 `os.path.realpath()`. 幸运的是`extractall()`接受了一个生成器，所以这很容易做到。

由于您要求提供代码，因此这里有一些解释算法的内容。它不仅禁止将文件提取到沙箱外的位置（这是所要求的），而且还禁止在沙*箱内*创建指向沙箱外位置的链接。我很想知道是否有人可以将任何杂散文件或链接偷偷溜过去。

```
import tarfile
from os.path import abspath, realpath, dirname, join as joinpath
from sys import stderr

resolved = lambda x: realpath(abspath(x))

def badpath(path, base):
    # joinpath will ignore base if path is absolute
    return not resolved(joinpath(base,path)).startswith(base)

def badlink(info, base):
    # Links are interpreted relative to the directory containing the link
    tip = resolved(joinpath(base, dirname(info.name)))
    return badpath(info.linkname, base=tip)

def safemembers(members):
    base = resolved(".")

    for finfo in members:
        if badpath(finfo.name, base):
            print >>stderr, finfo.name, "is blocked (illegal path)"
        elif finfo.issym() and badlink(finfo,base):
            print >>stderr, finfo.name, "is blocked: Hard link to", finfo.linkname
        elif finfo.islnk() and badlink(finfo,base):
            print >>stderr, finfo.name, "is blocked: Symlink to", finfo.linkname
        else:
            yield finfo

ar = tarfile.open("testtar.tar")
ar.extractall(path="./sandbox", members=safemembers(ar))
ar.close() 
```

**编辑：**从 python 2.7.4 开始，这对 ZIP 档案来说不是问题：该方法[`zipfile.extract()`](http://docs.python.org/2/library/zipfile#zipfile.ZipFile.extract)禁止在沙箱外创建文件：

> **注意：**如果成员文件名是绝对路径，驱动器/UNC 共享点和前导（反）斜杠将被剥离，例如：在 Unix 上`///foo/bar`变为在Windows 上。并且成员文件名中的所有组件都将被删除，例如：变成. 在 Windows 上，非法字符 ( , , , , , , 和) [被] 替换为下划线 (_)。`foo/bar``C:\foo\bar``foo\bar``".."``../../foo../../ba..r``foo../ba..r``:``<``>``|``"``?``*`

该`tarfile`课程尚未经过类似的消毒，因此上述答案仍然适用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-15T11:57:50.483

将 zip 文件复制到一个空目录。然后使用`os.chroot`使该目录成为根目录。然后在那里解压。

或者，您可以使用忽略目录的标志调用`unzip`自身：`-j`

```
import subprocess
filename = '/some/file.zip'
rv = subprocess.call(['unzip', '-j', filename]) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T03:19:54.560

使用`ZipFile.infolist()`//获取归档中每个条目的信息，规范化路径，自己打开文件，使用`TarFile.next()`/获取条目的类文件，并自己复制条目数据。`TarFile.getmembers()``ZipFile.open()``TarFile.extractfile()`

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-04-12T20:53:56.830

与流行的答案相反，从 Python 2.7.4 开始，安全地解压缩文件并没有完全解决。extractall 方法仍然很危险，并且可能导致路径遍历，无论是直接还是通过解压缩符号链接。这是我的最终解决方案，它应该可以防止所有版本的 Python 中的两种攻击，甚至是 Python 2.7.4 之前的版本，其中 extract 方法很容易受到攻击：

```
import zipfile, os

def safe_unzip(zip_file, extract_path='.'):
    with zipfile.ZipFile(zip_file, 'r') as zf:
        for member in zf.infolist():
            file_path = os.path.realpath(os.path.join(extract_path, member.filename))
            if file_path.startswith(os.path.realpath(extract_path)):
                zf.extract(member, extract_path) 
```

**编辑 1：**固定变量名称冲突。感谢 Juuso Ohtonen。

**编辑2** `s/abspath/realpath/g`：。谢谢TheLizzard

# algorithm - 在 Fortran 中绘图，需要算法帮助

> ID：10060071
> 
> 赞同：-1
> 
> 时间：2012-04-08T03:08:15.800
> 
> 标签：algorithm, graph, plot, fortran, fortran90

我正在尝试创建一个将 X，Y 坐标绘制到屏幕上的 fortran 程序。我让程序从输入文件中接收绘图。在输入文件中，第一个条目是点数。之后的每一行都有一个 x 值，然后是一个空格，然后是相应的 y 值。然后我让程序对 x 值从最小到最大进行冒泡排序。接下来我想绘制这些值。我想绘制它们以使 x 轴的比例为 xmax-xmin/#of 点并且 y 轴相同。我将如何将点打印为“*”作为脏图？？？我不是在寻找完整的答案，只是寻找如何形成写入算法的一些方向。下面列出的是我到目前为止的代码和一个示例输入文件

输入文件

```
 10
 -4 16
 -3 9
 -2 4
 -1 1
 0 0
 1 1
 2 4
 3 9
 4 16
 5 25 
```

代码

```
 *START OF CODE
  PROGRAM MAIN

 *DECLARATIONS
  INTEGER EXISTS, DONE, POINTS, USED, I, E
  REAL XSTEP, YSTEP, XMIN, XMAX, YMIN, YMAX
  REAL    X(100), Y(100), A, B
  CHARACTER INNAME*30, OUTNAME*30
  LOGICAL MORE
  CHARACTER (70) LINE

 *INITIALIZATIONS
  INNAME='NULL.DOC'
  EXISTS=0
  DONE=0
  POINTS=0
  USED=0
  I=0
  E=0
  MORE = .TRUE.
  A=0
  B=0
  XSTEP = 0
  YSTEP = 0
  XMIN=0
  XMAX=0
  YMIN=0
  YMAX=0

 *CLEAR THE ARRAYS     
  DO I=1,100
  X(I)=0
  Y(I)=0
  END DO
  I=0

 *FORMATS
 5     FORMAT(' ','POINT #', I3, ' X=', F5.2,' Y=', F5.2)
 10    FORMAT(' ','XMIN=',F5.2, ' XMAX=', F5.2)
 15    FORMAT(' ','YMIN=',F5.2, ' YMAX=', F5.2)
 20    FORMAT(' ','X STEP=',F5.2, ' Y STEP=', F5.2)

 *MAIN CODE
 ****************************************************************

 *PROMPT FOR NAME OF FILE AND INPUT
PRINT *,'PLEASE INPUT A FILE NAME INCLUDING AN EXTENSION'
PRINT *,'ENTER QUIT OR Q TO EXIT'
READ (*,*) INNAME

 *OPEN IF(0)                    
IF(INNAME.EQ.'Q'.OR.INNAME.EQ.'QUIT')THEN
PRINT *,'GOODBYE'
ELSE     

 *TEST FOR FILE
INQUIRE(FILE=INNAME, EXIST=EXISTS)

 *IF EXIST=FALSE, DISPLAY MESSAGE 
IF(.NOT.EXISTS) THEN
PRINT *,'FILE DOES NOT EXIST, PLEASE TRY AGAIN'    

 *ELSE EXIST=TRUE, OPEN (UNIT=1)
ELSE 
OPEN(UNIT=1, FILE=INNAME, STATUS='OLD')
END IF

 *************************************************************

 *ASK CHOICES FOR OUTPUT
PRINT *,'PLEASE ENTER A NAME FOR AN OUTPUT FILE W/ EXTENSION'
PRINT *,'ENTER QUIT OR Q TO EXIT'
READ(*,*)OUTNAME

IF(OUTNAME.EQ.'Q'.OR.OUTNAME.EQ.'QUIT')THEN
PRINT *,'GOODBYE'
ELSE

 *************************************************************
 *CHECK IF DONE (IF 1)
IF(DONE.EQ.0)THEN

 *OPEN THE OUTPUT FILE DO(2)
DO WHILE(USED.EQ.0)
INQUIRE(FILE=OUTNAME,EXIST=EXISTS)

 *OPEN IF(2) FOR IF FILE ALREADY EXISTS
IF(EXISTS.EQ.1)THEN
OPEN(UNIT=2,FILE=OUTNAME,STATUS='OLD')

 *END IF FOR IF FILE ALREADY EXISTS AMD OPEN IF DID NOT EXIST,              
ELSE
OPEN(UNIT=2,FILE=OUTNAME,STATUS='NEW')

 *END IF (2)                   
END IF

 *READ IN 1 INTEGER (MAXIMUM VALUE OF 100) FOR # OF POINTS IN FILE
READ(1,*, END=111),POINTS

 *READ IN X AND Y VALUES WITH MAX OF 100
DO I=1, POINTS
READ(1,*,END=111) X(I),Y(I)
END DO

 *SORT POINTS
E = POINTS - 1
MORE = .TRUE.
DO WHILE (MORE .EQ. .TRUE.)
MORE = .FALSE.
DO I=1, E
IF(X(I).GT.X(I+1)) THEN
MORE = .TRUE.
A=X(I)
B=y(I)
X(I)=X(I+1)
Y(I)=Y(I+1)
X(I+1)=A
Y(I+1)=B
END IF
END DO
E=E-1
END DO

 *FIND MIN AND MAX OF X AND Y
I=1
XMIN = X(I)
XMAX = X(POINTS)
YMIN = Y(I)
YMAX = Y(I)
DO I=1, POINTS
IF(Y(I) .LT. YMIN) THEN
YMIN = Y(I)
END IF
IF(Y(I) .GT. YMAX) THEN
YMAX = Y(I)
END IF
END DO

 *fIND X AND Y STEPS    
XSTEP = (XMAX-XMIN)/POINTS
YSTEP = (YMAX-YMIN)/POINTS

 *PRINT TO THE OUTPUT FILE
DO I=1, POINTS
WRITE(2,5)I,X(I),Y(I)
END DO
WRITE(2,10)XMIN,XMAX
WRITE(2,15)YMIN,YMAX
WRITE(2,20)XSTEP,YSTEP
 *PRINT GRAPH

 *END DO (2)
END DO

 *END IF (1)
END IF

 *END IF QUIT(S)
END IF
END IF

 *CLOSE THE FILES
  CLOSE(UNIT=1)
  CLOSE(UNIT=2)

 111   PRINT * , 'The Program Has Now Ended'

 *STOP
  STOP

 *END
  END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:57:34.257

如果您想要快速而肮脏的东西，到目前为止最简单的方法是横向绘制图形（如果您要打印到纸上，不如听起来那么糟糕）。然后你可以打印每一行，其长度与 y（现在是 x）值成正比（最后是 a ，或者是直方图的`*`所有s）：`*`

```
+-------------------------------------> y
|         *
|            *
|          *
. etc 
```

否则，如果您不想使用库，事情会很快变得复杂。下一个最简单的方法是制作一个二维字符数组（屏幕大小），最初用空格填充，然后“绘制”到那个；完成后，您可以通过逐行读取字符并打印它们来打印它。这样做的好处是它将轴与数据分开 - 如果您尝试在打印一行时执行所有操作，则不同的任务会混淆。

但是绘图很快变得比您预期的要复杂。例如，选择刻度线和打印标签本身就是一项要做好的主要任务。你真的更好地使用图书馆（这就是为什么我首先建议使用横向方法 - 如果这比你不想使用图书馆那么快+脏，那么这通常就足够了）。

（如果你能很快做到[这一点，这就是那种](http://acooke.org/cute/RXPYBenchm0.html)- 我在几分钟内把它放在一起）

更新：对于刻度线（它变得太复杂了！）你想要图形 gem 算法——[它几乎是标准的，而且论文很容易理解](http://books.google.cl/books?id=fvA7zLEFWZgC&pg=PA61&lpg=PA61&redir_esc=y#v=onepage&q&f=false)。这为您提供了您的总范围（以及刻度间距），然后缩放很容易（`(xmax-xmin)/nchars`正如您所说，一个字符是“值得”的 - 不知道还有什么要解释的？）。

# javascript - 严格搜索字符串以在 javascript 中验证月份

> ID：10060073
> 
> 赞同：0
> 
> 时间：2012-04-08T03:08:19.010
> 
> 标签：javascript

我想做的是严格搜索月份 jan feb mar apr ...等输入到格式为的文本字段中

mmmyyyy（例如：jan1993）。

我想验证这一点，以便用户可以输入全部小写或全部大写（jan/JAN）。

我所做的似乎不起作用。

```
 var firstM =month.charAt(0,2);
     var months = 
         {
           "jan" : "JAN",
           "feb" : "FEB",
           "mar" : "MAR",
           "apr" : "APR",
           "may" : "MAY", 
           "jun" : "JUN",
           "jul" : "JUL",
           "aug" : "AUG",
           "sep" : "SEP",
           "oct" : "OCT",
           "nov" : "NOV",
           "dec" : "DEC"
         };

 else if (firstM !== months[firstM])
        {
          errMessages += "<li class='b1'> Date of Birth must start with 3 letter month</li>\n";
          errMessages += "<li class='b2'> ex: mmmyyy / JAN1993</li>\n";
        } 
```

我仍然习惯于弄清楚如何将 .charAt 与“jan”一起使用：“JAN”我想如果我这样做，用户可以输入全部小写或全部大写，它会验证，但是错误无论我做什么，都会不断出现。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:15:19.413

根据文档，[`charAt`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/charAt)只接受一个参数并返回一个长度为 1 的字符串。您正在寻找的是[`substring`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/substring)和[`toLowerCase`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/String/toLowerCase)

```
var month = "January",
    check = month.toLowerCase().substring(0, 3);

if( months[check] ) {
   //valid month
} 
```

`months[check]`如果前三个字母与您的对象中的某些内容匹配，则将返回一个真实值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T03:41:05.550

为了简化代码，您可以使用正则表达式吗？

```
function checkInput(input) {
   var months = /^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i;

   if (months.test(input) == false) {
    // TODO: Show validation error message
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T21:37:20.327

如果没有正则表达式，函数可能如下所示：

```
function checkInput(input) {
    var months = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"];

    var monthPartOfInput = input.substring(0, 3).toLowerCase();                         

    if (months.indexOf(monthPartOfInput) == -1){
        // TODO: Show validation error
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T03:14:42.907

`charAt()`返回指定位置的字符，而不是子字符串，我不知道你是如何得到的`month`，但如果你想取前 3 个字符，请使用`substr`

```
var firstM = month.substr(0, 3); 
```

# java - Java二维对象数组——如何检查某个索引是否存在？

> ID：10060081
> 
> 赞同：0
> 
> 时间：2012-04-08T03:09:03.467
> 
> 标签：java, arrays, if-statement, multidimensional-array, null

我尝试使用 if 语句查看索引是否返回 null，如果返回则跳过，但它仍然不断获取数组索引超出范围异常。

```
...

    if(tiles[x+a][y+b] == null){
        System.out.println("Would have been an error");
            } else if(tiles[x+a][y+b].getType() == type) {
                tiles[x+a][y+b].setTile(type);
            } else {
                System.out.println("Not found");
            }
... 
```

主要是前两行是问题的内容。我试图让它通过数组，但跳过任何会使数组索引超出范围的异常。如果您需要更多背景信息，请告诉我。我试图尽可能地减少它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:12:20.367

怎么样：

`if ( ( (x+a) >= tiles.length ) || ( (y+b) >= tiles[x+a].length ) )`

作为你的测试？

# java - JXTA 入门

> ID：10060083
> 
> 赞同：0
> 
> 时间：2012-04-08T03:09:21.093
> 
> 标签：java, p2p, jxta

拜托，这里有人可以帮帮我吗，我一直在努力学习 JXTA，但我无法让代码工作。有人可以给我关于如何使用 JXTA 2.6 或 2.7 的分步指南，即使是 2.5 步也将不胜感激。请简而言之，我已经阅读了程序员指南等电子书，例如精通 jxta、java p2p、jxta。请我需要一些简单的例子，比如一个 jxta 对等体，它可以传达我需要解决的所有问题。我真的需要如何在单台电脑上测试它的步骤

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-24T22:35:20.510

您是否看过 Scribd 上可在线阅读的实用 JXTA II 书籍？

# post - cURL POST 数据中的特殊字符，如 @ 和 &

> ID：10060093
> 
> 赞同：74
> 
> 时间：2012-04-08T03:11:27.897
> 
> 标签：post, curl

如何在 cURL POST 数据中包含 @ 和 & 等特殊字符？我正在尝试传递一个名称和密码，例如：

```
curl -d name=john passwd=@31&3*J https://www.mysite.com 
```

这将导致`@`用于加载文件和`&`指定多个键/值的问题。有什么方法可以逃脱这些角色吗？`\@`并且`\&`似乎不起作用。

* * *

## 回答 #1

> 赞同：82
> 
> 时间：2012-04-23T11:07:41.680

cURL > 7.18.0 有一个选项[`--data-urlencode`](http://curl.haxx.se/docs/manpage.html#--data-urlencode)可以解决这个问题。使用它，我可以简单地发送一个 POST 请求

```
curl -d name=john --data-urlencode passwd=@31&3*J https://www.example.com 
```

总结评论，如果我们可以在 Windows 上使用混合的“好”和“坏”数据和感叹号：

```
curl -d "grant_type=client_credentials&client_id=super-client&acr_values=tenant:TNT123" --data-urlencode "client_secret=XxYyZ21D8E&%fhB6kq^mXQDovSZ%Q*!ipINme"  https://login.example.com/connect/token 
```

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-04-08T03:17:54.403

如何使用实体代码...

`@ = %40`

`& = %26`

因此，您将拥有：

`curl -d 'name=john&passwd=%4031%263*J' https://www.mysite.com`

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-03-04T10:37:07.850

整个 . 它的双引号（“”）`URL`。

```
curl "http://www.mysite.com?name=john&passwd=@31&3*J" 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2017-09-13T13:47:29.630

刚刚发现另一种解决方案对我有用。您可以在您的特别款之前使用“\”号。

```
passwd=\@31\&3*J 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-02-17T10:39:33.547

尝试这个：

```
export CURLNAME="john:@31&3*J"
curl -d -u "${CURLNAME}" https://www.example.com 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2021-04-30T00:28:00.887

如果密码中包含特殊字符，只需用单引号将密码四舍五入即可。

```
curl -u username:'this|!Pa&*12' --request POST https://www.example.com 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-19T09:36:34.270

我做了这个

```
~]$ export A=g

~]$ export B=!

~]$ export C=nger

   curl http://<>USERNAME<>1:$A$B$C@<>URL<>/<>PATH<>/ 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2022-02-22T16:58:38.843

这里没有解决我的问题，我们在数据中有一个“&”，它们都只是有效负载中的有效字符，而不是试图逃避任何东西。有任何想法吗？

curl --data-urlencode '{"mrn":"23343","hl7_payload":"MSH|^~&|EPIC|AHS|||20220222113538|LFESTA01|ADT^A08|165616314|P|2.5|||AL |NE","event_type":"ADT^A03","tracking_id":"123432342"}' [https://myapi.com](https://myapi.com)

没用，python/flask 仍然返回 404 错误请求。

# php - array_unique 不适用于从文本文件导入的文件名字符串

> ID：10060096
> 
> 赞同：0
> 
> 时间：2012-04-08T03:11:52.457
> 
> 标签：php, text-files, array-merge, array-unique

**过程：**

1.  用户选中复选框以与客户帐户共享文件
2.  复选框值与存储在客户文件夹中的 txt 文件中的数组进行比较
3.  数组通过使用 array_merge() 合并为一个数组进行比较
4.  使用 array_unique() 消除重复项
5.  写入 txt 文件的新数组

**问题：**

如果我的文本文件已经包含以下数据：（代表文本文件行的数字）

1.  M HTH A277 Frame Off STD 规格 02-01-12.pdf
2.  M HTH A277 框架标准规格 02-01-12.pdf
3.  M HTH 期权罐价格表 02-02-2012.xls

然后我尝试共享更多文件，包括那些已经共享的文件。我的新文本文件如下所示：（代表文本文件行的数字）

1.  M HTH A277 Frame Off STD 规格 02-01-12.pdf
2.  （空白的）
3.  M HTH A277 框架标准规格 02-01-12.pdf
4.  （空白的）
5.  M HTH 期权罐价格表 02-02-2012.xls
6.  （空白的）
7.  （空白的）
8.  M HTH A277 Frame Off STD 规格 02-01-12.pdf
9.  M HTH A277 框架标准规格 02-01-12.pdf
10.  M HTH 期权罐价格表 02-02-2012.xls
11.  谷溪庄园 - 2010.pdf

上面的值是我正在处理的确切值。我试图尽可能彻底地解释这个可能会使事情变得混乱的解释。如果有人可以向我提供任何建议，他们将不胜感激。提前致谢。到目前为止，这就是我所拥有的代码：

**编码：**

```
$arr = $_POST['checked'];
$cust = $_POST['custname'];

    if ($cust != ""){

        $myFile = "CONTA.txt";

        //If file exists get previous array from file
        if (file_exists("customer/" . $cust . "/" . $myFile)) {         

            $fh = fopen("customer/" . $cust . "/" . $myFile, 'r') or die("");

                while (!feof($fh) ) {
                        $compare[] = fgets($fh);
                }

            fclose($fh);

            //Combine checkbox array with previous array & eliminate duplicates

            $combined = array_unique(array_merge($compare,$arr));

        }
        else
        {

            //Since no previous file or array existed. Just use current checkbox array.     
            $combined = $arr;

        }

        //Input array into file
        $fh = fopen("customer/" . $cust . "/" . $myFile, 'w') or die("can't open file");

            foreach ($combined as $value) {

                    fwrite($fh, $value . "\n");

            }
        echo "<span class='message'>Items shared successfully!</span>";
        fclose($fh);
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T03:36:57.320

对我来说，问题似乎是“\n”字符。每行末尾都有一个新行，当您比较具有换行符的一行和没有换行符的同一行时，它们是不一样的。我会通过回显 fgets 中的每一行来确认这一点。如果它们是断行的，那么你知道你正在获得新的换行符。

编辑：
我会尝试默认放置
trim(fgets($fh))
它应该去除换行符
[修剪规范](http://php.net/manual/en/function.trim.php)

# javascript - 调整 DIV 大小但在调整窗口大小时保持纵横比

> ID：10060097
> 
> 赞同：3
> 
> 时间：2012-04-08T03:11:54.923
> 
> 标签：javascript, css

我的页面中有一个 DIV 元素，我想在调整窗口大小时调整它的大小，但保持方形纵横比。我想将宽度设置为浏览器宽度的 50%，高度等于宽度。我怎样才能做到这一点？

如果解决方案需要 Javascript，那很好，但我不想使用 jQuery。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T04:04:24.567

在 css 和 window.onresize 事件中使用 width:50% 来调整大小。看一看

[http://jsfiddle.net/536UJ/](http://jsfiddle.net/536UJ/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T03:31:09.353

我不确定您是否可以在 CSS 中使一个属性（高度）等于其他属性（宽度）......好吧，至少在 CSS 2 中。

但是你当然可以在 JavaScript 中做到这一点。

```
<div id = "myDiv"></div>
<script>
    document.onresize = function() {
        var element = document.getElementById('myDiv');      // the element
        var size = Math.floor(window.innerWidth / 2) + 'px'; // 50% window width

        element.style.width = size;  // set the width
        element.style.height = size; // set the height
    };
</script> 
```

请注意，该`window.innerWidth`属性在 IE 中不存在。在那里，您必须使用`document.documentElement.clientWidth`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T03:51:37.273

您可以在css中将宽度设置为窗口的50%；你只需要调整高度-

```
window.onresize=function(){
  var who= document.getElementById('divtoresize');
  who.style.height=who.offsetWidth+'px';
} 
```

# post - 使用 cURL 仅从 HTTP POST 获取响应标头

> ID：10060098
> 
> 赞同：652
> 
> 时间：2012-04-08T03:12:04.230
> 
> 标签：post, curl, http-headers

可以使用 HTTP HEAD 仅请求标头，`-I`作为`curl(1)`.

```
$ curl -I / 
```

冗长的 HTML 响应正文很难在命令行中获取，因此我只想获取标头作为我的 POST 请求的反馈。但是，HEAD 和 POST 是两种不同的方法。

如何让 cURL 仅显示 POST 请求的响应标头？

* * *

## 回答 #1

> 赞同：863
> 
> 时间：2012-04-08T04:18:14.307

```
-D, --dump-header <file>
       Write the protocol headers to the specified file.

       This  option  is handy to use when you want to store the headers
       that a HTTP site sends to you. Cookies from  the  headers  could
       then  be  read  in  a  second  curl  invocation by using the -b,
       --cookie option! The -c, --cookie-jar option is however a better
       way to store cookies. 
```

和

```
-S, --show-error
       When used with -s, --silent, it makes curl show an error message if it fails. 
```

和

```
-L/--location
      (HTTP/HTTPS) If the server reports that the requested page has moved to a different location (indicated with a Location: header and a 3XX response
      code), this option will make curl redo the request on the new place. If used together with -i/--include or -I/--head, headers from  all  requested
      pages  will  be  shown.  When authentication is used, curl only sends its credentials to the initial host. If a redirect takes curl to a different
      host, it won’t be able to intercept the user+password. See also --location-trusted on how to change this. You can limit the amount of redirects to
      follow by using the --max-redirs option.

      When curl follows a redirect and the request is not a plain GET (for example POST or PUT), it will do the following request with a GET if the HTTP
      response was 301, 302, or 303\. If the response code was any other 3xx code, curl will re-send the following  request  using  the  same  unmodified
      method. 
```

从手册页。所以

```
curl -sSL -D - www.acooke.org -o /dev/null 
```

遵循重定向，将标头转储到标准输出并将数据发送到 /dev/null（这是 GET，而不是 POST，但您可以使用 POST 做同样的事情 - 只需添加您已经用于 POST 数据的任何选项）

注意`-`后面的`-D`表示输出“文件”是标准输出。

* * *

## 回答 #2

> 赞同：228
> 
> 时间：2016-07-31T00:12:53.873

其他答案需要下载响应正文。但是有一种方法可以发出仅获取标头的 POST 请求：

```
curl -s -I -X POST http://www.google.com 
```

An`-I`本身执行一个 HEAD 请求，该请求可以被`-X POST`执行 POST（或任何其他）请求覆盖，并且仍然只获取标头数据。

* * *

## 回答 #3

> 赞同：93
> 
> 时间：2016-05-09T03:09:12.457

以下命令显示额外信息

```
curl -X POST http://httpbin.org/post -v > /dev/null 
```

您可以要求服务器仅发送 HEAD，而不是完整响应

```
curl -X HEAD -I http://httpbin.org/ 
```

`Note:`在某些情况下，服务器可能会为 POST 和 HEAD 发送不同的标头。但在几乎所有情况下，标题都是相同的。

* * *

## 回答 #4

> 赞同：60
> 
> 时间：2014-11-05T13:44:44.760

对于长响应体（以及各种其他类似情况），我使用的解决方案始终是管道到`less`，所以

```
curl -i https://api.github.com/users | less 
```

或者

```
curl -s -D - https://api.github.com/users | less 
```

将完成这项工作。

* * *

## 回答 #5

> 赞同：32
> 
> 时间：2019-03-14T14:10:34.510

也许这有点极端，但我使用的是这个超短版本：

```
curl -svo. <URL> 
```

解释：

`-v`打印调试信息（包括标题）

`-o.`将网页数据（我们想忽略）发送到某个文件，`.`在这种情况下，该文件是一个目录，并且是一个无效的目标，并使输出被忽略。

`-s`没有进度条，没有错误信息（否则你会看到`Warning: Failed to create the file .: Is a directory`）

*警告：*结果总是失败（就错误代码而言，是否可达）。不要在 shell 脚本中的条件语句中使用...

* * *

## 回答 #6

> 赞同：19
> 
> 时间：2016-03-10T21:18:03.660

更容易——这是我用来[避免短链接跟踪](https://twitter.com/unserkaiser/status/702772546282754048)的方法——如下：

```
curl -IL http://bit.ly/in-the-shadows 
```

*…它也遵循链接*。

* * *

## 回答 #7

> 赞同：14
> 
> 时间：2016-02-14T09:23:06.573

虽然其他答案在所有情况下都不适用于我，但我能找到的最佳解决方案（也可以使用`POST`），取自[这里](http://www.lornajane.net/posts/2014/view-only-headers-with-curl)：

`curl -vs 'https://some-site.com' 1> /dev/null`

* * *

## 回答 #8

> 赞同：9
> 
> 时间：2019-11-29T08:31:45.460

**headcurl.cmd** (windows 版)

```
curl -sSkv -o NUL %* 2>&1 
```

*   我不想要进度条`-s`，
*   但我确实想要错误`-S`，
*   不用担心有效的 https 证书`-k`，
*   变得冗长`-v`（这是关于故障排除，是吗？），
*   没有输出（以干净的方式）。
*   哦，我想将[**stderr**](https://stackoverflow.com/a/1420981/444255)[转发到**stdout**](https://stackoverflow.com/a/1420981/444255)****，所以我可以对整个事情进行 grep（因为大多数或所有输出都来自 stderr）****
*****   `%*`表示[将所有参数传递给此脚本]（嗯（[https://stackoverflow.com/a/980372/444255](https://stackoverflow.com/a/980372/444255)），通常这只是一个参数：您正在测试的 url****

 ******实际示例（关于解决代理问题）：**

```
C:\depot>headcurl google.ch | grep -i -e http -e cache 
```

```
Hostname was NOT found in DNS cache
GET HTTP://google.ch/ HTTP/1.1
HTTP/1.1 301 Moved Permanently
Location: http://www.google.ch/
Cache-Control: public, max-age=2592000
X-Cache: HIT from company.somewhere.ch
X-Cache-Lookup: HIT from company.somewhere.ch:1234 
```

* * *

**Linux 版本**

对于您的`.bash_aliases`/ `.bash_rc`：

```
alias headcurl='curl -sSkv -o /dev/null $@  2>&1' 
```****

# android - 如何将listview的内容保存到android中的文本文件？

> ID：10060105
> 
> 赞同：0
> 
> 时间：2012-04-08T03:12:37.120
> 
> 标签：android, listview, android-sdcard

我有一个包含大量内容的列表视图，我想知道如何将列表视图中的内容保存为文本文件？我正在从数据库中提取所有内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T23:55:51.583

尝试数组序列化（可以序列化并取回对象）

```
 ObjectOutputStream out;
    Object[] objs = new Object[yourListView.getCount()];

    for (int i = 0 ; i < youeListView.getCount();i++) {
        Object obj = (Object)yourListView.getItemAtPosition(i);
        objs[i] = obj;
    }
    try {
        out = new ObjectOutputStream(
                new FileOutputStream(
                        new File(yourFile.txt)));
        out.writeObject(objs);
        out.flush();
        out.close();
    } catch (FileNotFoundException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T04:14:14.390

我假设您要保存用户单击的行的内容：

如果使用 ListActivity 覆盖 onListItemClick (ListView lv, View v, int position, long id)。然后 String str = lv.getItemAtPosition(position).toString() 可以给你包含在行中的字符串。根据您的具体实施，存在其他可能性。您还可以访问被单击的视图。

我认为您不想保存所有行的内容，因为您已经在数据库中拥有这些内容，并且可以从那里简单地查询和保存。

一旦你有了字符串。创建一个新文件并写入它。

一种写入文件的方法：

```
 try {
            File f = File.createTempFile("file", ".txt", Environment.getExternalStorageDirectory ());
            FileWriter fw = new FileWriter(f);
            fw.write(str);
            fw.close();

        } catch (IOException e) {
            e.printStackTrace();
            Toast.makeText(getApplicationContext(), "Error while saving file", Toast.LENGTH_LONG).show();
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-06-21T17:57:00.957

写入文件的机制已经很好地涵盖了，但我想添加更多关于：

> 我正在从数据库中提取所有内容

在这种情况下，您可以从 ListView 中获取光标，然后使用`SQLiteCursor.getItemAtPosition()`.

```
private String getCsvFromViewCursor(ListView myListView) {
    StringBuilder builder = new StringBuilder();
    SQLiteCursor cursor;
    builder.append("\"Field 1\",\"Field 2\"\n");
    for (int i = 0; i < myListView.getCount(); i++ ){
        cursor = (SQLiteCursor) myListView.getItemAtPosition(i);
        builder.append("\"").append(cursor.getString(0)).append("\",");
        builder.append("\"").append(cursor.getString(1)).append("\"\n");
    }
    return builder.toString();
} 
```

# mainframe - 使用 DFSORT，根据条件将多行写入一个

> ID：10060107
> 
> 赞同：0
> 
> 时间：2012-04-08T03:13:13.627
> 
> 标签：mainframe, dfsort

我有一个每日报告数据集，其中存在多个市场的详细信息；每个市场一排。记录格式看起来像

```
+---+---+---+---+---+---+---+---+---+---+---+--- 
MARKET NAME1     valm1       valm2
MARKET NAME2     valm1       valm2
MARKET NAME3     valm1       valm2
MARKET NAME4     valm1       valm2 
```

现在，我需要将上述所有行拉到月度报告文件的一行中，记录格式可以是：

```
+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---+---
DATE    MARKET NAME1     MARKET NAME2     MARKET NAME3     MARKET NAME4     
DATE1   valm1   valm2    valm1   valm2    valm1   valm2    valm1   valm2 
```

我们怎样才能实现它？现在有一个选择是通过使用 DFSORT 的工作。感谢您的兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T05:04:26.413

ICEtool 有一个选项 Splice，可用于将多行合并为一行。请参阅一些 icetool 手册以了解确切的语法。

# java - 从静态方法访问非静态成员变量

> ID：10060109
> 
> 赞同：2
> 
> 时间：2012-04-08T03:14:10.720
> 
> 标签：java, static, non-static

我刚刚开始使用 Java，我需要一些帮助。我知道我不能对静态方法进行非静态引用，但我需要帮助来解决它。我正在阅读您可以通过创建对象的实例来访问非静态成员变量，但我不确定该怎么做。这是一些关于代码的。任何帮助或指示将不胜感激。

```
package tweetClassification;        

public class PriorityRules {    

    public static void prioritize( final String userInput ){

            ClassificationRule.apply( aUserInput ); //ERROR
                            // Cannot make a static reference to 
                            // the non-static method apply(String)
                            // from the type ClassificationRule
        }
} 

*----------------------------------------------------------------
package tweetClassification;

public class ClassificationRule {

        public void apply (final String aUserInput) {   

            apply( aUserInput );
        }
    }

*----------------------------------------------------------------
package tweetClassification;

import java.util.ArrayList;

public class RuleFirstOccrnc extends ClassificationRule {

    public void apply ( final String aUserInput ){

        for( TweetCat t: TwtClassif.tCat )
            applyFirstOccurrenceRuleTo( t, aUserInput );
    }

*----------------------------------------------------------------
package tweetClassification;

public class RuleOccrncCount extends ClassificationRule {

    public void apply ( final String aUserInput ){

        for( TweetCat t: TwtClassif.tCat )
            applyOccurrenceCountRuleTo( t, aUserInput );
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T03:23:14.273

您不能从静态方法引用非静态变量，因为该静态方法附加到类，而不是任何特定实例。从它的角度来看，那些非静态变量甚至都不存在。但是，您的问题具有误导性，因为无论如何您的代码中都没有显示任何非静态变量成员。您的问题似乎更像是如何实例化适当的分类规则并将其应用于静态方法参数。有很多方法可以做到这一点，最简单的方法是简单地实例化一个规则的实例：

```
ClassificationRule rule = new RuleFirstOccrnc();
rule.apply(userInput); 
```

但鉴于您有多个分类规则子类，您可能需要更复杂的方法来实例化它们。工厂在这里可能很有用，或者您可以使用一些更高级的对象创建模式，例如注入。

# c++ - gtest 如何比较两个数组中的值？

> ID：10060110
> 
> 赞同：7
> 
> 时间：2012-04-08T03:14:22.733
> 
> 标签：c++, googletest

我已经阅读[了这个官方文档](https://github.com/google/googletest/blob/master/googletest/docs/primer.md#assertions)，学习如何进行二进制比较和字符串比较。

ASSERT_EQ 和 ASSERT_STREQ 在数组比较的情况下不能工作。

例如

```
li@li:~/poc$ g++ -I${GTEST_DIR}/include insertion_sort.cpp insertion_sort_unittest.cpp /home/li/libgtest.a -lpthread -o inser_unit
li@li:~/poc$ ./inser_unit 
[==========] Running 1 test from 1 test case.
[----------] Global test environment set-up.
[----------] 1 test from InsertionSortTest
[ RUN      ] InsertionSortTest.Two
insertion_sort_unittest.cpp:18: Failure
Value of: two_sorted
  Actual: { 2, 5 }
Expected: two
Which is: { 2, 5 }
[  FAILED  ] InsertionSortTest.Two (1 ms)
[----------] 1 test from InsertionSortTest (1 ms total)

[----------] Global test environment tear-down
[==========] 1 test from 1 test case ran. (1 ms total)
[  PASSED  ] 0 tests.
[  FAILED  ] 1 test, listed below:
[  FAILED  ] InsertionSortTest.Two

 1 FAILED TEST 
```

插入排序单元测试.cpp

```
#include <limits.h>
#include "insertionsort.h"
#include "gtest/gtest.h"

namespace{
    class InsertionSortTest : public ::testing::Test{
        protected:
            InsertionSortTest() {}
            virtual ~InsertionSortTest() {}
            virtual void SetUp() {}
            virtual void TearDown() {}
    };

    TEST(InsertionSortTest, Two){
        int two[] = {5, 2};
        int two_sorted[] = {2, 5};
        insertionSort(two, 2);
        EXPECT_EQ(two, two_sorted);
    }
}

int main(int argc, char **argv){
    ::testing::InitGoogleTest(&argc, argv);
    return RUN_ALL_TESTS();
} 
```

插入排序.cpp

```
#include "insertionsort.h"
void insertionSort(int *data, int size){
    for (int i=1,j; i<size; i++){
        int key = data[i];
        for (j=i-1; j>=0; j--){
            if (data[j] > key){
                data[j+1]=data[j];
                data[j]=key;
            }
        }
    }
} 
```

插入排序.h

```
#ifndef INSERTIONSORT_H_
#define INSERTIONSORT_H_
void insertionSort(int *data, int size);
#endif 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-08T10:11:11.293

如果你不想要，你不需要添加对 googlemock 的依赖，你可以编写自己的简单函数来返回 a `testing::AssertionResult`，例如

```
 template<typename T, size_t size>
    ::testing::AssertionResult ArraysMatch(const T (&expected)[size],
                                           const T (&actual)[size]){
        for (size_t i(0); i < size; ++i){
            if (expected[i] != actual[i]){
                return ::testing::AssertionFailure() << "array[" << i
                    << "] (" << actual[i] << ") != expected[" << i
                    << "] (" << expected[i] << ")";
            }
        }

        return ::testing::AssertionSuccess();
    } 
```

然后在您的测试中，调用：

```
 EXPECT_TRUE(ArraysMatch(two_sorted, two)); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-08T20:41:22.510

`ASSERT_EQ`使用 比较其参数`operator==`。比较`operator==`适用于`std::vector`'s 但不适用于 C++ 中的 C 数组。原因是，当您尝试在表达式中使用 C 数组的值时，在大多数情况下，该值会衰减为指向存储数组的内存开头的指针。你最终会比较两个指针。在两个不同的 C 数组的情况下，这些指针永远不会具有相同的值。

您最简单的方法是使用 Google Mock 的`ASSERT_THAT`宏和[ContainerEq](https://github.com/google/googletest/blob/master/googlemock/docs/CheatSheet.md#container-matchers)匹配器。而不是`ASSERT_EQ`，写

```
ASSERT_THAT(two, ContainerEq(two_sorted)); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-09-14T10:24:14.677

我觉得这样写就够了。

`EXPECT_EQ(memcmp(two, two_sorted, 2 * sizeof(int)), 0);`

# php - 如何定位特定的 XSS 漏洞？

> ID：10060112
> 
> 赞同：4
> 
> 时间：2012-04-08T03:15:06.023
> 
> 标签：php, xss

最近我注意到一些奇怪的东西。在我网站上的每个公共 JavaScript 文件中，每个文件的末尾都添加了重定向脚本。

我可以访问 access.logs 和所有这些东西。

人们是通过什么方法插入这些东西的，如何定位？

他们如何能够访问我所有 JavaScript 文件的写权限？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T03:27:15.747

由于您的 JavaScript 文件已更改，我认为这不是 XSS 漏洞。

我认为他们入侵了您的 Web 服务器，可能您的 Web 应用程序有一些上传漏洞，或者您的 Web 服务器有一些 0-day 漏洞。

有很多方法可以做到这一点。

检查您的 Web 服务器的文件系统，JavaScript 文件被修改的时间戳是什么？哪个用户有权访问这些文件？

# import - Scorm“课程导入错误”

> ID：10060122
> 
> 赞同：1
> 
> 时间：2012-04-08T03:17:30.233
> 
> 标签：import, scorm1.2

我正在尝试制作一门符合 scorm 的课程，当我将包含所有内容的 zip 文件上传到 scorm 时，我收到此错误“课程导入失败：zip 文件不包含任何课程”。我并不怀疑我的某些配置不正确，但令我失望的是，scorm 在收到此回调后没有提供任何进一步的调试错误。我认为这与我的 ismanifest.xml 文件有关。

我希望有人可以阐明发生这种情况的可能原因？

我不是要求你调试我的错误，因为我意识到我没有给你足够的信息，但如果你能帮助列出一些可能发生这种情况的原因，它将有助于我将来参考。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:06:37.433

也许 zip 文件包含一个包含所有 scorm 文件的文件夹？如果是这种情况，请尝试压缩文件夹内容并再次上传

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T09:15:21.213

扩展 periklis 的帖子：

SCORM 包要求 imsmanifest.xml 文件位于包的根目录 (ZIP)。有时，在压缩课程文件时，开发人员无意中压缩了包含文件的*文件夹*，这导致清单只有一层文件夹，而不是根目录。这是一个很常见的错误。

检查您的 ZIP 以确保清单和其他文件没有嵌套在子文件夹中。

# ajax - 我的 javascript/jquery 代码有什么问题？

> ID：10060128
> 
> 赞同：1
> 
> 时间：2012-04-08T03:20:09.593
> 
> 标签：ajax, jquery

* * *

HTML

* * *

```
<form method="GET">
<input type="text" name="txt"/>
<input type="button" onclick="get()"/>
</form> 
```

返回

* * *

## Javascript

* * *

返回

```
function get(){
var ik=$('#txt').value();
$.get('action.php',{text:ik});
} 
```

* * *

## PHP

* * *

```
<?php $text=$_GET['txt']; print $text?> 
```

> 当我查看萤火虫时，我收到一条通知说 index txt 未定义，我尝试了所有方法，但它不起作用。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T03:29:15.640

$('#txt') 将搜索 id=txt 的元素，并且您的 HTML 代码中没有任何 id 为“txt”的元素。

要获取字段的值，您应该使用 .val() 方法。

应该为您工作的代码是：

```
$('input[name="txt"]').val(); 
```

或者为您的字段定义一个 id，您的代码应该是这样的：

```
$('#txt').val(); 
```

在您的 PHP 代码中，您正在寻找一个名为“txt”的变量，而在您的 Javascript 代码中，您将“text”定义为您的变量，所以......您应该阅读**$_GET['text']** ;

[]的伊戈尔。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T03:21:42.713

你正在通过`{text:ik}`，所以在你的`action.php`你应该得到你想要的价值，`$_GET['text']`而不是`$_GET['txt']`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T03:21:56.163

你的`#txt`元素在哪里？

尝试

```
<form method="GET">
<input type="text" id="txt" name="txt"/>
<input type="button" onclick="get()"/>
</form> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T03:22:56.397

好的，所以出现**了三个**问题。

首先，您可能想要`id=txt`在 HTML 中。您目前拥有`name=txt`. 将`#txt`检索 HTML 中的 ID 属性（而不是 Name 属性）。

在这里，将其用于 HTML：

```
<form method="GET"> 

  <!-- You need to have an ID value, if you are using #txt in jQuery -->
  <!-- I assign both ID and Name to the same value -->
  <input type="text" id="txt" name="txt"/>

  <input type="button" onclick="get()"/> 
</form> 
```

其次，您对 action.php 的调用传递的是键“text”，而不是“txt”，第三，您需要使用 val()。

这可能适用于 JavaScript：

```
function get(){  

  // The #txt is getting an ID value
  // You also need to use val() instead of value()  ... according to @Igor
  var ik=$('#txt').val(); 

  // If PHP is looking for a txt key, you'll want that here as well
  // The key could by "mykey" as long as PHP expects "mykey".
  $.get('action.php',{txt:ik});

} 
```

因此，您需要更正这两个错误。

PHP 看起来不错。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T03:32:10.057

使用`val()`方法代替 off `value()`;

**HTML**

```
<input type="button" id="go"/> 
```

**脚本**

```
$(function(){
  var ik=$(input'[name=txt]').val();
  $.get('action.php',{txt : ik},function(data){
      //do whatever with the response from get call
  });
}); 
```

# c++ - 使用 atoi 和错误：未解析的外部符号

> ID：10060139
> 
> 赞同：1
> 
> 时间：2012-04-08T03:23:33.710
> 
> 标签：c++, visual-c++

我一直在为我的班级编写这段代码，但我不确定这些错误是什么意思或如何修复它们。另外，我不确定下一步是什么或如何完成该程序。我只用了一个月的 C++，对其中的任何一个都不是很熟悉。先感谢您！

```
error LNK2019: unresolved external symbol "int __cdecl parseDate(class std::basic_string<char,struct std::char_traits<char>,class std::allocator<char> >)" (?parseDate@@YAHV?$basic_string@DU?$char_traits@D@std@@V?$allocator@D@2@@std@@@Z) referenced in function _main
: fatal error LNK1120: 1 unresolved externals 
```

**我的任务是：**
停车场收取 2.00 美元的最低停车费，最多可停放三个小时。超过三个小时，车库每小时或部分每小时额外收费 0.50 美元。任何给定 24 小时期间的最高费用为 10.00 美元。停车超过 24 小时的人每天将支付 8.00 美元。
编写一个计算并打印停车费的程序。程序的输入是汽车进入停车场的日期和时间，以及同一辆车离开停车场的日期和时间。两个输入的格式为：YY/MM/DD hh:mm

```
#include <iostream>
#include <fstream>
#include <iomanip>
#include <string>
#include <cmath>
#include <algorithm>
#include <sstream>
using namespace std;

string startDateString;
string endDateString;
string dateStr;
int parseDate( string dateStr );

int main ()

{

string enter_date;
string enter_time;
string exit_date;
string exit_time;
cout << "Please enter the date and time the car is entering "<< endl
    << "the parking garage in the following format: YY/MM/DD hh:mm"<< endl;
getline (cin,dateStr);//cin >> enter_date >> enter_time;

cout<< "Please enter the date and time the car is exiting "<< endl
    << "the parking garage in the following format: YY/MM/DD hh:mm"<< endl;
getline (cin,dateStr);//cin >> exit_date >> exit_time;

{
    // Format: YY/MM/DD hh:mm
    int year  = atoi( dateStr.substr( 0, 2 ).c_str() );
    int month = atoi( dateStr.substr( 3, 2 ).c_str() );
    int day   = atoi( dateStr.substr( 6, 2 ).c_str() );
    int hour  = atoi( dateStr.substr( 9, 2 ).c_str() );
    int min   = atoi( dateStr.substr( 12, 2 ).c_str() );

    // Now calculate no. of mins and return this
    int totalMins = 0;
    totalMins += ( year * 365 * 24 * 60 ); 
    totalMins += ( month * 30 * 24 * 60 ); 
    totalMins += ( day * 24 * 60 );        
    totalMins += ( hour * 60 );
    totalMins += ( min );

    return totalMins;
}
int startTime = parseDate( startDateString );
int endTime   = parseDate( endDateString );
int elapsedTime = endTime - startTime; // elapsedTime is no. of minutes parked

return 0;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T05:12:40.903

看起来您从未`parseDate()`单独定义，而是将其放入您的`main()`. 我认为你需要拿出：

```
{
    // Format: YY/MM/DD hh:mm
    int year  = atoi( dateStr.substr( 0, 2 ).c_str() );
    int month = atoi( dateStr.substr( 3, 2 ).c_str() );
    int day   = atoi( dateStr.substr( 6, 2 ).c_str() );
    int hour  = atoi( dateStr.substr( 9, 2 ).c_str() );
    int min   = atoi( dateStr.substr( 12, 2 ).c_str() );

    // Now calculate no. of mins and return this
    int totalMins = 0;
    totalMins += ( year * 365 * 24 * 60 ); 
    totalMins += ( month * 30 * 24 * 60 ); 
    totalMins += ( day * 24 * 60 );        
    totalMins += ( hour * 60 );
    totalMins += ( min );

    return totalMins;
} 
```

并将其放在代码末尾的单独函数中：

```
int parseDate (string dateStr) 
{
    // Format: YY/MM/DD hh:mm
    int year  = atoi( dateStr.substr( 0, 2 ).c_str() );
    int month = atoi( dateStr.substr( 3, 2 ).c_str() );
    int day   = atoi( dateStr.substr( 6, 2 ).c_str() );
    int hour  = atoi( dateStr.substr( 9, 2 ).c_str() );
    int min   = atoi( dateStr.substr( 12, 2 ).c_str() );

    // Now calculate no. of mins and return this
    int totalMins = 0;
    totalMins += ( year * 365 * 24 * 60 ); 
    totalMins += ( month * 30 * 24 * 60 ); 
    totalMins += ( day * 24 * 60 );        
    totalMins += ( hour * 60 );
    totalMins += ( min );

    return totalMins;
} 
```

# git - 如何让 Github 项目显示在两个配置文件中？

> ID：10060141
> 
> 赞同：1
> 
> 时间：2012-04-08T03:24:29.607
> 
> 标签：git, github

我和一个朋友正在 Github 上开展一个项目，我们希望它出现在我们的简历和资料的个人资料中。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-06T13:49:10.950

您还可以设置组织并在该组织中创建存储库。您的两个个人资料都将显示您为组织的存储库做出贡献，因此链接到存储库。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:18:58.157

为了使这个项目被视为一个项目，你们中的一个必须创建它，而另一个应该分叉它（不是真的必要）。你们俩都应该对原始存储库拥有完整的权限，因此双方都可以直接访问它。

使用 README 页面（项目的主页）给你们两个应得的荣誉。这东西适用于你的简历和其他东西。

我认为不可能在两个配置文件上拥有相同的项目，并且仍然将它们视为一个。虽然您可以单独创建它们，但管理它们可能比它的价值更令人头疼。

# c - C 编程链表和删除

> ID：10060143
> 
> 赞同：2
> 
> 时间：2012-04-08T03:25:04.130
> 
> 标签：c, list, linked-list, malloc, free

我有一个带有双链表的文件，其中包含一组进程标识符和一些状态信息。

```
struct pr7_process 
{ 
  pid_t pid;        /* process ID, supplied from fork() */ 
                /* if 0, this entry is currently not in use */ 
  int   state;      /* process state, your own definition */ 
  int   exit_status;    /* supplied from wait() if process has finished */
  struct pr7_process *next;   // a pointer to the next process
  struct pr7_process *prev;
};

/* the process list */

struct process_list
{
   struct pr7_process *head;
   struct pr7_process *tail;
}; 
```

我有一个方法来删除我的列表中的一个元素：

```
{
struct pr7_process *cur;
  for(cur = list->head; cur != NULL; cur = cur->next)
    {
      if (cur->pid == pid)
        {
          printf("cur pid: %d\n", cur->pid);
          cur->state = STATE_NONE;
          if(list->head == list->tail)
         {
           free(cur);
         }
         else
          {
            cur->prev->next = cur->next;
            cur->next->prev = cur->prev;
            free(cur);
          }
          break;
        }
     } 
  } 
```

我的删除功能有什么问题？当我尝试打印我的列表时，我似乎得到了一个无限循环。以前我认为这是我使用 free() 的方式，但显然不是来自回复:)

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:33:06.053

当您添加一个节点集`next`为`NULL`.

然后当你全部释放时，释放直到下一个 == NULL。

删除节点时。更新链接和免费节点。

还; NULL 上的免费是一个 noop。

在处理此类事情时，Valgrind 是一个非常宝贵的工具。

* * *

相信你必须做更多的检查；IE：

```
struct pr7_process {
    int pid;
    ...
} const new_proc = {
    0, 44, 0, NULL, NULL
};

void del(struct process_list *list, int pid)
{
    struct pr7_process *cur;

    for (cur = list->head; cur != NULL; cur = cur->next) {
        if (cur->pid == pid) {

            printf("cur pid: %d\n", cur->pid);

            if(list->head == list->tail) {
                free(cur);
                list->head = NULL;
                list->tail = NULL;
            } else if (cur == list->head) {
                list->head = list->head->next;
                free(cur);
                list->head->prev = NULL;
            } else if (cur == list->tail) {
                list->tail = cur->prev;
                free(cur);
                list->tail->next = NULL;
            } else {
                cur->prev->next = cur->next;
                cur->next->prev = cur->prev;
                free(cur);
            }
            break;
        }
    }
} 
```

* * *

鉴于您构建的列表*类似于*ie：

```
int push(struct process_list *list, int pid, int state)
{
    if (list->head == NULL) { /* or move this to where ever you see fit */
        if ((list->head  = malloc(sizeof(struct pr7_process))) == NULL)
            return -1;
        list->tail  = list->head;
        *list->tail = new_proc;
    } else {
        if ((list->tail->next  = malloc(sizeof(struct pr7_process))) == NULL)
            return -1;
        *list->tail->next = new_proc;
        list->tail->next->prev = list->tail;
        list->tail = list->tail->next;
    }
    list->tail->pid = pid;
    list->tail->state = state;

    return 0;
}

void wipe(struct process_list *list)
{
    struct pr7_process *node = list->tail;

    while (node != list->head) {
        node = list->tail->prev;
        free(list->tail);
        list->tail = node;
    }
    free(list->head);
    list->head = NULL;
    list->tail = NULL;
}

void prnt(struct process_list list, int dir)
{
    if (dir == 1) {
        while (list.head != NULL) {
            printf("%4d: %d\n", list.head->pid, list.head->state);
            list.head = list.head->next;
        }
    } else {
        while (list.tail != NULL) {
            printf("%4d: %d\n", list.tail->pid, list.tail->state);
            list.tail = list.tail->prev;
        }
    }
}

int main(void)
{
    struct process_list list = {NULL, NULL};

    push(&list, 331, 2); /* if(push() != -1) ... */
    push(&list, 332, 66);
    push(&list, 333, 47);

    prnt(list, 1);

    del(&list, 332);
    prnt(list, 1);

    wipe(&list);
    prnt(list, 1);

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T03:28:01.053

> 我知道你不能 free() 不是由 malloc 分配的东西，我该如何克服这个问题？

有什么要克服的？要么是动态分配的，你需要`free()`它，要么是用自动存储持续时间分配的，而你不需要。这里没有问题。

通常，使用这样的灯，您将完成`malloc`所有工作，以便您可以可靠地释放东西。否则，您不知道它们是如何分配的，并且可能会遇到未定义的行为。

# java - 计算广度优先搜索中遍历的边数？

> ID：10060144
> 
> 赞同：2
> 
> 时间：2012-04-08T03:25:09.077
> 
> 标签：java, breadth-first-search

这是我的 bfs 算法。我想存储我在字段边中遍历的边数，但我不知道在哪里放置变量以为每个边添加一个。我不断得到太长的答案，所以我认为这比简单地增加边缘更难。

应该注意的是，这应该只计算沿着真实路径的边缘，而不是额外的边缘。

```
public int distance(Vertex x, Vertex y){
        Queue<Vertex> search = new LinkedList<Vertex>();
        search.add(x);
        x.visited = true;
        while(!search.isEmpty()){
            Vertex t = search.poll();
            if(t == y){
                return edges;
            }
            for(Vertex n: t.neighbours){
                if(!n.visited){
                    n.visited = true;
                    search.add(n);
                }

            }
            System.out.println(search + " " + t);
        }
        return edges;   
    } 
```

任何和所有的帮助表示赞赏。如果您需要更多课程/方法，请告诉我

编辑

```
import java.util.ArrayList;

public class Vertex {

    public static char currentID = 'a';
    protected ArrayList<Vertex> neighbours;
    protected char id;
    protected boolean visited = false;
    protected Vertex cameFrom = null;
    public Vertex(){
        neighbours = new ArrayList<Vertex>();
        id = currentID;
        currentID++;
        Graph.all.add(this);
    }
    public void addNeighbour(Vertex x){
        int a;
        while(x == this){
             a = (int) (Math.random()*(Graph.all.size()));
             x = Graph.all.get(a);
        }           
            if(!(neighbours.contains(x))){
                neighbours.add(x);
                x.addNeighbour(this);
                //System.out.println(this + " Linking to " + x);
            }
    }
    public void printNeighbours(){
        System.out.println("The neighbours of: " + id + " are: " + neighbours);
    }
    public String toString(){
        return id + "";
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T04:06:55.120

在您的`Vertex`班级中，创建一个`Vertex cameFrom`您设置为指向`Vertex`您在访问该节点时来自的字段。你甚至可以`boolean visited`用这个替换你的字段（如果它还没有被访问过）`null`。`Vertex`

然后，当您找到时，`Vertex y`只需按照指针返回`Vertex x`计算您走的步数。

如果您不想更改您的`Vertex`类，那么只需在搜索期间保留一个`Map<Vertex,Vertex>`，它存储从您正在访问的顶点到您来自的顶点的映射。当你到达终点时，你可以以同样的方式沿着路径到达起点。

* * *

可能是这样的：

```
 public int distance(Vertex x, Vertex y){
        Queue<Vertex> search = new LinkedList<Vertex>();
        search.add(x);
        while(!search.isEmpty()){
            Vertex t = search.poll();
            if(t == y){
                return pathLength( t );
            }
            for(Vertex n: t.neighbours){
                if(n.cameFrom == null || n != x){
                    n.cameFrom = t;
                    search.add(n);
                }

            }
            System.out.println(search + " " + t);
        }
        return -1;  
    }

    public int pathLength( Vertex v )
    {
       int path = 0;

       while ( v.cameFrom != null )
       {
         v = v.cameFrom;
         path++;
       }

       return path;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T03:47:29.940

在这个例子中，边的数量就是`search`. 队列。

编辑：

一种可能的解决方案是逐层进行。假设您询问顶点 A，F 之间的距离

图表看起来像：

```
A
|\
B C
|
D
|\
E F 
```

首先计算A和B，C之间的距离（这很容易，因为B和C是A的直接邻居。然后计算A和D之间的距离（这很容易，因为D是B的直接邻居，然后是A和E， F. 将距离存储在 A 顶点节点中。现在运行 BFS 并确定搜索结果后，您可以简单地询问距离。看[这个](http://seed.ucsd.edu/mediawiki/images/b/b2/Lec5.pdf)可视化图表。

# python - Python：如何替换文本中出现的 N 个随机字符串？

> ID：10060149
> 
> 赞同：4
> 
> 时间：2012-04-08T03:26:17.037
> 
> 标签：python

假设我有 10 个不同的标记，“（TOKEN）”在一个字符串中。如何用其他字符串替换随机选择的 2 个标记，而其他标记保持不变？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T05:52:01.150

```
>>> import random
>>> text = '(TOKEN)__(TOKEN)__(TOKEN)__(TOKEN)__(TOKEN)__(TOKEN)__(TOKEN)__(TOKEN)__(TOKEN)__(TOKEN)'
>>> token = '(TOKEN)'
>>> replace = 'foo'
>>> num_replacements = 2
>>> num_tokens = text.count(token) #10 in this case
>>> points = [0] + sorted(random.sample(range(1,num_tokens+1),num_replacements)) + [num_tokens+1]
>>> replace.join(token.join(text.split(token)[i:j]) for i,j in zip(points,points[1:]))
'(TOKEN)__(TOKEN)__(TOKEN)__(TOKEN)__foo__(TOKEN)__foo__(TOKEN)__(TOKEN)__(TOKEN)' 
```

函数形式：

```
>>> def random_replace(text, token, replace, num_replacements):
        num_tokens = text.count(token)
        points = [0] + sorted(random.sample(range(1,num_tokens+1),num_replacements)) + [num_tokens+1]
        return replace.join(token.join(text.split(token)[i:j]) for i,j in zip(points,points[1:]))

>>> random_replace('....(TOKEN)....(TOKEN)....(TOKEN)....(TOKEN)....(TOKEN)....(TOKEN)....(TOKEN)....(TOKEN)....','(TOKEN)','FOO',2)
'....FOO....(TOKEN)....(TOKEN)....(TOKEN)....(TOKEN)....(TOKEN)....(TOKEN)....FOO....' 
```

测试：

```
>>> for i in range(0,9):
        print random_replace('....(0)....(0)....(0)....(0)....(0)....(0)....(0)....(0)....','(0)','(%d)'%i,i)

....(0)....(0)....(0)....(0)....(0)....(0)....(0)....(0)....
....(0)....(0)....(0)....(0)....(1)....(0)....(0)....(0)....
....(0)....(0)....(0)....(0)....(0)....(2)....(2)....(0)....
....(3)....(0)....(0)....(3)....(0)....(3)....(0)....(0)....
....(4)....(4)....(0)....(0)....(4)....(4)....(0)....(0)....
....(0)....(5)....(5)....(5)....(5)....(0)....(0)....(5)....
....(6)....(6)....(6)....(0)....(6)....(0)....(6)....(6)....
....(7)....(7)....(7)....(7)....(7)....(7)....(0)....(7)....
....(8)....(8)....(8)....(8)....(8)....(8)....(8)....(8).... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T04:20:04.520

有很多方法可以做到这一点。我的方法是编写一个函数，该函数采用原始字符串、令牌字符串和一个函数，该函数返回原始令牌中出现的令牌的替换文本：

```
def strByReplacingTokensUsingFunction(original, token, function):
    outputComponents = []
    matchNumber = 0
    unexaminedOffset = 0
    while True:
        matchOffset = original.find(token, unexaminedOffset)
        if matchOffset < 0:
            matchOffset = len(original)
        outputComponents.append(original[unexaminedOffset:matchOffset])
        if matchOffset == len(original):
            break
        unexaminedOffset = matchOffset + len(token)
        replacement = function(original=original, offset=matchOffset, matchNumber=matchNumber, token=token)
        outputComponents.append(replacement)
        matchNumber += 1
    return ''.join(outputComponents) 
```

（你当然可以改变它以使用更短的标识符。我的风格比典型的 Python 风格更冗长。）

鉴于该功能，很容易替换十分之二的随机事件。这是一些示例输入：

```
sampleInput = 'a(TOKEN)b(TOKEN)c(TOKEN)d(TOKEN)e(TOKEN)f(TOKEN)g(TOKEN)h(TOKEN)i(TOKEN)j(TOKEN)k' 
```

random 模块有一种方便的方法可以从总体中选择随机项目（不是两次选择相同的项目）：

```
import random
replacementIndexes = random.sample(range(10), 2) 
```

然后我们可以使用上面的函数来替换随机选择的事件：

```
sampleOutput = strByReplacingTokensUsingFunction(sampleInput, '(TOKEN)',
    (lambda matchNumber, token, **keywords:
        'REPLACEMENT' if (matchNumber in replacementIndexes) else token))
print sampleOutput 
```

这是一些测试输出：

```
a(TOKEN)b(TOKEN)cREPLACEMENTd(TOKEN)e(TOKEN)fREPLACEMENTg(TOKEN)h(TOKEN)i(TOKEN)j(TOKEN)k 
```

这是另一个运行：

```
a(TOKEN)bREPLACEMENTc(TOKEN)d(TOKEN)e(TOKEN)f(TOKEN)gREPLACEMENTh(TOKEN)i(TOKEN)j(TOKEN)k 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T03:31:45.053

如果您恰好需要两个，那么：

1.  检测令牌（保留一些指向它们的链接，例如字符串的索引）
2.  随机选择两个（`random.choice`）
3.  更换它们

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T03:35:44.777

你到底想做什么？一个好的答案将取决于...

也就是说，想到的蛮力解决方案是：

1.  将这 10 个标记存储在一个数组中，例如 tokens[0] 是第一个标记，tokens[1] 是第二个标记，……以此类推
2.  创建一个字典，将每个唯一的“（TOKEN）”与两个数字相关联：start_idx、end_idx
3.  编写一个小解析器，遍历您的字符串并查找 10 个标记中的每一个。每当找到一个时，在该标记出现的字符串中记录开始/结束索引（如 start_idx、end_idx）。
4.  完成解析后，生成范围 [0,9] 内的随机数。让我们称之为**R**
5.  现在，你的随机 "(TOKEN)" 是 tokens[ **R** ];
6.  使用步骤（3）中的字典查找字符串中的start_idx、end_idx值；用“其他字符串”替换那里的文本

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-08T03:47:59.370

我的代码解决方案：

```
import random

s = "(TOKEN)test(TOKEN)fgsfds(TOKEN)qwerty(TOKEN)42(TOKEN)(TOKEN)ttt"
replace_from = "(TOKEN)"
replace_to = "[REPLACED]"
amount_to_replace = 2

def random_replace(s, replace_from, replace_to, amount_to_replace):
    parts = s.split(replace_from)
    indices = random.sample(xrange(len(parts) - 1), amount_to_replace)

    replaced_s_parts = list()

    for i in xrange(len(parts)):
        replaced_s_parts.append(parts[i])
        if i < len(parts) - 1:
            if i in indices:
                replaced_s_parts.append(replace_to)
            else:
                replaced_s_parts.append(replace_from)

    return "".join(replaced_s_parts)

#TEST

for i in xrange(5):
    print random_replace(s, replace_from, replace_to, 2) 
```

解释：

1.  使用将字符串拆分为几个部分`replace_from`
2.  使用 选择要替换的标记索引`random.sample`。此返回的列表包含唯一编号
3.  为字符串重建构建一个列表，用生成的索引替换标记`replace_to`。
4.  将所有列表元素连接成单个字符串

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-08T04:04:11.093

试试这个解决方案：

```
import random

def replace_random(tokens, eqv, n):
    random_tokens = eqv.keys()
    random.shuffle(random_tokens)
    for i in xrange(n):
        t = random_tokens[i]
        tokens = tokens.replace(t, eqv[t])
    return tokens 
```

假设存在带有标记的字符串，并且可以通过替换每个标记来构造合适的等价表：

```
tokens = '(TOKEN1) (TOKEN2) (TOKEN3) (TOKEN4) (TOKEN5) (TOKEN6) (TOKEN7) (TOKEN8) (TOKEN9) (TOKEN10)'

equivalences = {
    '(TOKEN1)' : 'REPLACEMENT1',
    '(TOKEN2)' : 'REPLACEMENT2',
    '(TOKEN3)' : 'REPLACEMENT3',
    '(TOKEN4)' : 'REPLACEMENT4',
    '(TOKEN5)' : 'REPLACEMENT5',
    '(TOKEN6)' : 'REPLACEMENT6',
    '(TOKEN7)' : 'REPLACEMENT7',
    '(TOKEN8)' : 'REPLACEMENT8',
    '(TOKEN9)' : 'REPLACEMENT9',
    '(TOKEN10)' : 'REPLACEMENT10'
} 
```

你可以这样称呼它：

```
replace_random(tokens, equivalences, 2)
> '(TOKEN1) REPLACEMENT2 (TOKEN3) (TOKEN4) (TOKEN5) (TOKEN6) (TOKEN7) (TOKEN8) REPLACEMENT9 (TOKEN10)' 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-08T05:57:50.753

```
from random import sample

mystr = 'adad(TOKEN)hgfh(TOKEN)hjgjh(TOKEN)kjhk(TOKEN)jkhjk(TOKEN)utuy(TOKEN)tyuu(TOKEN)tyuy(TOKEN)tyuy(TOKEN)tyuy(TOKEN)'

def replace(mystr, substr, n_repl, replacement='XXXXXXX', tokens=10, index=0):
    choices = sorted(sample(xrange(tokens),n_repl))
    for i in xrange(choices[-1]+1):
        index = mystr.index(substr, index) + 1
        if i in choices:
            mystr = mystr[:index-1] + mystr[index-1:].replace(substr,replacement,1)
    return mystr

print replace(mystr,'(TOKEN)',2) 
```

# php - 使用objective-c执行PHP脚本

> ID：10060152
> 
> 赞同：1
> 
> 时间：2012-04-08T03:27:40.027
> 
> 标签：php, iphone, objective-c, ios

我正在尝试执行一个 PHP 脚本来增加数据库中的一个字段。我有脚本工作，我目前正在使用 ASIHTTPRequest 完美地修改数据库，但我觉得我应该使用不同的方法，因为我不需要返回。

这就是所谓的 HTTP POST 吗？

```
 incrementOrDecrementURL = [[NSString alloc] initWithFormat:@"http://myURL/doScript.php"];

NSURL *requestURL = [[NSURL alloc] initWithString:incrementOrDecrementURL];

//The actual request
ASIHTTPRequest *request = [ASIHTTPRequest requestWithURL:requestURL];
// Becoming the request delegate
//To get callbacks like requestFinished: or requestFailed:
[request setDelegate:self];    

// Start request
[request startAsynchronous]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T03:33:42.650

形成[文档：使用 ASIFormDataRequest 发送表单 POST](http://allseeing-i.com/ASIHTTPRequest/How-to-use#sending_a_form_post_with_ASIFormDataRequest)

```
ASIFormDataRequest *request = [ASIFormDataRequest requestWithURL:url];
[request setPostValue:@"Ben" forKey:@"first_name"];
[request setPostValue:@"Copsey" forKey:@"last_name"];
[request setFile:@"/Users/ben/Desktop/ben.jpg" forKey:@"photo"]; 
```

但也要注意，ASIHTTPRequest[不再由其原作者维护。](http://allseeing-i.com/%5Brequest_release%5D)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T03:34:02.580

`ASIHTTPRequest`默认情况下发送 GET 请求，而不是 POST。GET 不会在服务器上更新任何内容是正确的，因此您应该使用 POST: `[request setRequestMethod:@"POST"]`。您可以只`doScript.php`返回一个 HTTP 204 No Content 响应。PHP [header()](http://php.net/manual/en/function.header.php)函数。但最好的设计是至少返回某种特定于协议的状态代码，这些状态代码与服务器上实际发生的事情有关。我经常只返回一个简单的 JSON 响应，例如`{"status":"OK"}`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T03:36:45.113

这将是一个单向请求，而不是 POST。

但是，您永远不应该使用 GET 请求更新任何数据库，因此您应该使用 POST。

一种方法是立即返回响应，然后更新数据库，但更好的方法是，由于不再维护此库 ( [http://allseeing-i.com/ASIHTTPRequest/](http://allseeing-i.com/ASIHTTPRequest/) )，您可能希望使用 NSUrlConnection并忽略响应，然后继续。

# html - 哪种方法是加载图像的快速性能立场？

> ID：10060154
> 
> 赞同：-1
> 
> 时间：2012-04-08T03:28:04.533
> 
> 标签：html, css

我想要 HTML 页面中的图像。我想知道什么方法可以提供最佳优化性能的观点。我有两个选项来加载图像。

1.  使用 html 的 div 内的图像标签直接加载图像。
2.  使用 css 背景将图像获取到 div 背景。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T08:50:37.030

它们大致相同，至少如果有差异，它会很小，你永远不会注意到它。

加载速度主要取决于图像的大小，无论是在css中设置为背景还是直接放置在标记中。我认为这是在回答你的问题，但它很模糊......

# java - 将所有 BigDecimal 操作设置为特定精度？

> ID：10060158
> 
> 赞同：15
> 
> 时间：2012-04-08T03:29:42.210
> 
> 标签：java, math, rounding, bigdecimal, floating-accuracy

我的 Java 程序以高精度计算为中心，需要精确到至少 120 位小数。
因此，程序中的所有非整数都将由 BigDecimals 表示。

显然，我需要指定 BigDecimal 的舍入精度，以避免无限小数表达式等。
目前，我发现必须在 BigDecimal 的每个实例化或数学运算中指定精度是一件非常麻烦的事情。

有没有办法为所有 BigDecimal 计算设置“全局精度”？
（如python`Context.prec()`中的*Decimal模块）*

谢谢

* * *

规格：
Java jre7 SE
Windows 7 (32)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-08T03:39:24.613

**（几乎）原创**

没那么简单，但您可以创建一个[`MathContext`](http://docs.oracle.com/javase/7/docs/api/java/math/MathContext.html)并将其传递给您的所有`BigDecimal`构造函数和执行操作的方法。

**修改**

或者，您可以通过提供正确的 并使用 的舍入版本来扩展`BigDecimal`和覆盖您想要使用的任何操作：`MathContext``divide`

```
public class MyBigDecimal extends BigDecimal {

      private static MathContext context = new MathContext(120, RoundingMode.HALF_UP);

      public MyBigDecimal(String s) {
           super(s, context);
      }
      public MyBigDecimal(BigDecimal bd) {
           this(bd.toString()); // (Calls other constructor)
      }
      ...
      public MyBigDecimal divide( BigDecimal divisor ){
           return new MyBigDecimal( super.divide( divisor, context ) );
      }
      public MyBigDecimal add( BigDecimal augend ){
           return new MyBigDecimal( super.add( augend ) );
      }
      ...
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T03:45:21.193

`BigDecimalFactory`使用与所有接受的构造函数匹配的静态工厂方法创建一个类`MathContext`- 除了`MathContext`实例在工厂内部并在启动时静态初始化。这是一个片段：

```
public class BigDecimalFactory {
    public static BigDecimal newInstance (BigInteger unscaledVal, int scale) {
        return new BigDecimal (unscaledVal, scale, _mathContext);
    }

    // . . . other factory methods for other BigDecimal constructors

    private static final MathContext _mathContext = 
        new MathContext (120, BigDecimal.ROUND_HALF_UP);
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T04:28:25.820

> 有没有办法为所有 BigDecimal 计算设置“全局精度”？

不。

您必须创建一个具有`MathContext`额外属性的包装类。它需要：

*   将其`mc`用于每个将使用默认语义的数学运算，并且

*   每次包装操作返回一个常规实例时，创建并返回另一个包装实例。

（作为一种变体，您可以`MathContext`使用静态实现“全局”，但您仍然需要使用包装来确保`mc`使用 。）

（扩展`BigDecimal`也可以，这可以说比包装类更整洁。）

* * *

你在评论中这样说：

> 我真的不想编写自己的 Decimal 模块，我只想了解 BigDecimal 为何如此不合作。

（设计问题只能由设计团队*明确*回答。但是......）

与所有复杂的实用程序类一样，BigDecimal 的设计是一种折衷方案，旨在满足各种用例的要求。这也是“强大”和“简单”这两个相互竞争的元要求（错误的词）之间的妥协。

您所拥有的是一个没有得到特别好的支持的用例。但我怀疑，如果它得到很好的支持（例如，全局`MathContext`控制一切或`MathContext`附加到每个`BigDecimal`），那么这将引入各种其他复杂性；例如，处理需要考虑两个或多个竞争上下文对象的操作。这样的问题是可以解决的……但它们很容易给程序员带来“惊喜”，这不是一件好事。

当前的方法简单易懂，如果您需要更复杂的东西，您可以实现它……通过`MathContext`为需要它的操作显式提供 a 。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T03:40:27.150

您可以创建一个`BigDecimal`自动为您扩展和设置精度的类。然后你就用你那个类。

```
public class MyBigDecimal extends BigDecimal {
      public MyBigDecimal(double d) {
           super(d);
           this.setScale(120, BigDecimal.ROUND_HALF_UP);
      }
      ...
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T03:40:45.393

您可以为 BigDecimals 创建一个包装器，它将完成这项工作：

```
 class BigDecimalWrapper {
     BigDecimal bd;   

     BigDecimalWrapper add(BigDecimalWrapper another) {
         BigDecimal r = this.bd.add(another.bd);
         r.setScale(...);
         bd = r;
         return this;
     }
     // and so on for other operations
 } 
```

在这种情况下，您不必重写 BigDecimal 的所有操作（在扩展情况下），只需使用您使用的操作即可。它使您可以控制所有实例，并且不会强制遵循 BigDecimal 合同。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-22T13:43:48.520

您必须创建自己的包装类，该类具有默认的 MathContext，如下面的完整示例：

在此示例中，我使用了库 ( [https://projectlombok.org](https://projectlombok.org) )

```
import lombok.AccessLevel;
import lombok.NoArgsConstructor;

import java.math.BigDecimal;
import java.math.MathContext;
import java.math.RoundingMode;

@NoArgsConstructor(access = AccessLevel.PRIVATE)
public class BigDecimalFactory {

    //Seguindo a precisão máxima do PowerBuilder e Oracle Database
    public static final MathContext DEFAULT_CONTEXT = new MathContext(120 , RoundingMode.HALF_UP);
    private static final BigDecimalFactory FACTORY = new BigDecimalFactory();

    private class SBigDecimal extends BigDecimal {

        public SBigDecimal(BigDecimal bdNumber) {
            super(bdNumber.toPlainString());
        }

        public SBigDecimal(String stringNumber) {
            super(stringNumber);
        }

        @Override
        public BigDecimal divide(BigDecimal divisor) {
            return new SBigDecimal(super.divide(divisor, DEFAULT_CONTEXT).stripTrailingZeros());
        }

        @Override
        public BigDecimal divide(BigDecimal divisor, MathContext mc) {
            return new SBigDecimal(super.divide(divisor, mc));
        }

        @Override
        public BigDecimal divideToIntegralValue(BigDecimal divisor) {
            return new SBigDecimal(super.divideToIntegralValue(divisor));
        }

        @Override
        public BigDecimal divideToIntegralValue(BigDecimal divisor, MathContext mc) {
            return new SBigDecimal(super.divideToIntegralValue(divisor, mc));
        }

        @Override
        public BigDecimal remainder(BigDecimal divisor) {
            return new SBigDecimal(super.remainder(divisor));
        }

        @Override
        public BigDecimal remainder(BigDecimal divisor, MathContext mc) {
            return new SBigDecimal(super.remainder(divisor, mc));
        }

        @Override
        public BigDecimal pow(int n) {
            return new SBigDecimal(super.pow(n));
        }

        @Override
        public BigDecimal pow(int n, MathContext mc) {
            return new SBigDecimal(super.pow(n, mc));
        }

        @Override
        public BigDecimal abs() {
            return new SBigDecimal(super.abs());
        }

        @Override
        public BigDecimal abs(MathContext mc) {
            return new SBigDecimal(super.abs(mc));
        }

        @Override
        public BigDecimal negate() {
            return new SBigDecimal(super.negate());
        }

        @Override
        public BigDecimal negate(MathContext mc) {
            return new SBigDecimal(super.negate(mc));
        }

        @Override
        public BigDecimal plus() {
            return new SBigDecimal(super.plus());
        }

        @Override
        public BigDecimal plus(MathContext mc) {
            return new SBigDecimal(super.plus(mc));
        }

        @Override
        public BigDecimal round(MathContext mc) {
            return new SBigDecimal(super.round(mc));
        }

        @Override
        public BigDecimal setScale(int newScale, RoundingMode roundingMode) {
            return new SBigDecimal(super.setScale(newScale, roundingMode));
        }

        @Override
        public BigDecimal setScale(int newScale, int roundingMode) {
            return new SBigDecimal(super.setScale(newScale, roundingMode));
        }

        @Override
        public BigDecimal setScale(int newScale) {
            return new SBigDecimal(super.setScale(newScale));
        }

        @Override
        public BigDecimal movePointLeft(int n) {
            return new SBigDecimal(super.movePointLeft(n));
        }

        @Override
        public BigDecimal movePointRight(int n) {
            return new SBigDecimal(super.movePointRight(n));
        }

        @Override
        public BigDecimal scaleByPowerOfTen(int n) {
            return new SBigDecimal(super.scaleByPowerOfTen(n));
        }

        @Override
        public BigDecimal stripTrailingZeros() {
            return new SBigDecimal(super.stripTrailingZeros());
        }

        @Override
        public BigDecimal min(BigDecimal val) {
            return new SBigDecimal(super.min(val));
        }

        @Override
        public BigDecimal max(BigDecimal val) {
            return new SBigDecimal(super.max(val));
        }

        @Override
        public BigDecimal ulp() {
            return new SBigDecimal(super.ulp());
        }

        @Override
        public BigDecimal add(BigDecimal augend, MathContext mc) {
            return new SBigDecimal(super.add(augend, mc));
        }

        @Override
        public BigDecimal subtract(BigDecimal subtrahend) {
            return new SBigDecimal(super.subtract(subtrahend));
        }

        @Override
        public BigDecimal subtract(BigDecimal subtrahend, MathContext mc) {
            return new SBigDecimal(super.subtract(subtrahend, mc));
        }

        @Override
        public BigDecimal multiply(BigDecimal multiplicand) {
            return new SBigDecimal(super.multiply(multiplicand));
        }

        @Override
        public BigDecimal multiply(BigDecimal multiplicand, MathContext mc) {
            return new SBigDecimal(super.multiply(multiplicand, mc));
        }

        @Override
        public BigDecimal divide(BigDecimal divisor, int scale, int roundingMode) {
            return new SBigDecimal(super.divide(divisor, scale, roundingMode));
        }

        @Override
        public BigDecimal divide(BigDecimal divisor, int scale, RoundingMode roundingMode) {
            return new SBigDecimal(super.divide(divisor, scale, roundingMode));
        }

        @Override
        public BigDecimal divide(BigDecimal divisor, int roundingMode) {
            return new SBigDecimal(super.divide(divisor, roundingMode));
        }

        @Override
        public BigDecimal divide(BigDecimal divisor, RoundingMode roundingMode) {
            return new SBigDecimal(super.divide(divisor, roundingMode));
        }

        @Override
        public BigDecimal add(BigDecimal augend) {
            return new SBigDecimal(super.add(augend));
        }
    }

    public BigDecimal internalCreate(String stringNumber) {
        return new SBigDecimal(stringNumber);
    }

    public static BigDecimal create(BigDecimal b) {
        return FACTORY.internalCreate(b.toString());
    }

    public static BigDecimal create(String stringNumber) {
        return FACTORY.internalCreate(stringNumber);
    }

    public static BigDecimal create(Long longNumber) {
        return FACTORY.internalCreate(longNumber.toString());
    }

    public static BigDecimal create(Integer doubleNumber) {
        return FACTORY.internalCreate(doubleNumber.toString());
    }

    public static BigDecimal create(Double doubleNumber) {
        return FACTORY.internalCreate(doubleNumber.toString());
    }

} 
```

测试：

```
import java.math.BigDecimal;
import java.math.MathContext;
import java.math.RoundingMode;

public class JavaTeste {

    public static void main(String args[]){

        //1) With your own BigDecimal
        BigDecimal b1 = BigDecimalFactory.create("100");
        BigDecimal b2 = BigDecimalFactory.create("25");
        BigDecimal b3 = BigDecimalFactory.create("13");
        System.out.println(b1.divide(b2));
        System.out.println(b1.divide(b3));

        //2) Without your own BigDecimal
        MathContext mathContext = new MathContext(38, RoundingMode.HALF_UP);
        BigDecimal b01 = new BigDecimal("100", mathContext);
        BigDecimal b02 = new BigDecimal("25", mathContext);
        BigDecimal b03 = new BigDecimal("13", mathContext);
        System.out.println(b01.divide(b02));
        System.out.println(b01.divide(b03, mathContext));

        //3) And this just not work
        BigDecimal b001 = new BigDecimal("100");
        BigDecimal b002 = new BigDecimal("25");
        BigDecimal b003 = new BigDecimal("13");
        System.out.println(b001.divide(b002));
        System.out.println(b001.divide(b003));

    }

} 
```

* * *

## 回答 #7

> 赞同：-4
> 
> 时间：2012-04-08T03:38:15.570

您可以使用 BigDecimal setScale 函数！

```
BigDecimal db = new BigDecimal(<number>).setScale(120, BigDecimal.ROUND_HALF_UP); (or down) 
```

# android - Android - ICS 4.0 中的 MediaPlayer 缓冲区大小

> ID：10060165
> 
> 赞同：42
> 
> 时间：2012-04-08T03:32:05.270
> 
> 标签：android, audio, streaming, audio-player, android-music-player

我使用套接字作为 MediaPlayer 的代理，因此我可以在将 mp3 音频写入套接字之前下载和解密它。这类似于 NPR 新闻应用程序中显示的示例，但是我将其用于所有 Android 版本 2.1 - 4 atm。

NPR StreamProxy 代码 - [http://code.google.com/p/npr-android-app/source/browse/Npr/src/org/npr/android/news/StreamProxy.java](http://code.google.com/p/npr-android-app/source/browse/Npr/src/org/npr/android/news/StreamProxy.java)

我的问题是 2.1 - 2.3 的播放速度很快，但在 Android 4.0 ICS 中，MediaPlayer 在触发 onPrepared 侦听器之前缓冲了太多数据。

在 onPrepared() 之前写入 Socket OutputStream 的示例数据量：

在带有 2.3.4 的 SGS2 上 - 约 133920 字节后的 onPrepared()

在带有 4.0.4 的 Nexus S 上 - onPrepared() 在 ~ 961930 字节之后

这也发生在 Galaxy Nexus 上。

奇怪的是，4.0 仿真器缓冲的数据不如 4.0 设备多。有人在 ICS 上使用 MediaPlayer 遇到过类似问题吗？

编辑

这是代理写入套接字的方式。在此示例中，它来自从文件加载的 CipherInputStream，但从 HttpResponse 加载时也会发生同样的情况。

```
final Socket client = (setup above)

// encrypted file input stream
final CipherInputStream inputStream = getInputStream(file);

// setup the socket output stream
final OutputStream output =  client.getOutputStream();

// Writing the header
final String httpHeader = buildHttpHeader(file.length());
final byte[] buffer = httpHeader.getBytes("UTF-8");
output.write(buffer, 0, buffer.length);

int writtenBytes = 0;
int readBytes;
final byte[] buff = new byte[1024 * 12]; // 12 KB

while (mIsRunning && (readBytes = inputStream.read(buff)) != -1) {
    output.write(buff, 0, readBytes);
    writtenBytes += readBytes;
}

output.flush();
output.close(); 
```

在音频之前写入 MediaPlayer 的 HTTP 标头。

```
private String buildHttpHeader(final int contentLength) {
    final StringBuilder sb = new StringBuilder();

    sb.append("HTTP/1.1 200 OK\r\n");
    sb.append("Content-Length: ").append(contentLength).append("\r\n");
    sb.append("Accept-Ranges: bytes\r\n" );
    sb.append("Content-Type: audio/mpeg\r\n");
    sb.append("Connection: close\r\n" );
    sb.append("\r\n");

    return sb.toString();
} 
```

我四处寻找替代实现，但由于我加密了音频并且 MediaPlayer 不支持 InputStreams 作为数据源，我唯一的选择（我认为..）是使用这样的代理。

同样，这在 Android 2.1 - 2.3 中运行良好，但在 ICS 中，MediaPlayer 在播放之前缓冲了大量此类数据。

编辑 2：

进一步的测试表明，这也是 SGS2 升级到 Android 4.0.3 后的问题。因此，MediaPlayer 的缓冲实现似乎在 4.0 中发生了重大变化。这令人沮丧，因为 API 没有提供改变行为的方法。

编辑 3：

已创建 Android 错误。请在此处添加评论并加注星 [标 http://code.google.com/p/android/issues/detail?id=29870](http://code.google.com/p/android/issues/detail?id=29870)

编辑 4：

我的播放代码是相当标准的。我在 onPrepared() 方法中对 MediaPlayer 进行了 start() 调用。

```
mCurrentPlayer.setAudioStreamType(AudioManager.STREAM_MUSIC);
mCurrentPlayer.setDataSource(url);
mCurrentPlayer.prepareAsync(); 
```

仅使用 prepare() 以及 ajacian81 的推荐方式进行了尝试，但无济于事。

我应该补充一点，最近一位 Google 员工就我的问题回复了我，并确认 ICS（用于高清内容）中的缓冲区大小是故意增加的。已要求 API 开发人员添加在 MediaPlayer 上设置缓冲区大小的功能。

虽然我认为这个 API 更改请求在我出现之前就已经存在，所以我不建议任何人屏住呼吸。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-17T17:31:21.950

是否可以看到您开始（）使用 MediaPlayer 的代码？

您使用的是`STREAM_MUSIC`音频流类型吗？

```
player.setAudioStreamType(AudioManager.STREAM_MUSIC); 
```

你是否也尝试过 player.prepareAsync(); 和 player.prepare();?

我记得去年有一个类似的问题，解决方案是：启动、暂停，然后 onPrepared 到 start()：

```
player.setAudioStreamType(AudioManager.STREAM_MUSIC); 
player.setDataSource(src); 
player.prepare(); 
player.start(); 
player.pause(); 
player.setOnPreparedListener(new OnPreparedListener() {     
@Override
                public void onPrepared(MediaPlayer mp) {
                    player.start();                
                }
          }); 
```

在这种情况下不太可能是解决方法，但是当您旋转车轮时，这可能值得一试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-01T16:01:50.373

对我来说，解决方案是将 MediaCodec 与 AudioTrack 结合使用，我在这里找到了所有我需要知道的信息：

这可能是一个解决方案：[http ://www.piterwilson.com/blog/2014/03/15/mediacodec-mediaextractor-and-audiotrack-to-the-rescue/](http://www.piterwilson.com/blog/2014/03/15/mediacodec-mediaextractor-and-audiotrack-to-the-rescue/)

# c - 从程序集中调用 ac 函数是否需要“asmlinkage”？

> ID：10060168
> 
> 赞同：18
> 
> 时间：2012-04-08T03:32:55.030
> 
> 标签：c, assembly, linux-kernel, system-calls, calling-convention

我正在编写一个将从汇编代码中调用的 C 函数。

（具体来说，我想在linux内核中系统调用处理的路径做一些检查工作，所以我会在entry_32.S中调度系统调用之前调用c函数）

在定义我的 c 函数时，我对“asmlinkage”修饰符感到困惑。

我知道 asmlinkage 是告诉编译器参数将通过堆栈传递。

`#define asmlinkage CPP_ASMLINKAGE __attribute__((regparm(0)))`

问题：

(1) 在定义这样一个将从汇编代码中调用的函数时，是否需要 asmlinkage？

(2) gcc 中的默认调用约定是什么。如果我在定义 ac 函数时省略了“asmlinkage”，它是否意味着 _cdecl 或 fastcall？

(3) 如果默认调用约定是 cdecl，为什么需要 asmlinkage，考虑到 cdecl 等于 asmlinkage 修饰符？（我在这里正确吗？）

(4) 为什么那些系统调用函数都是用asmlinkage声明的。我们可以先将参数复制到寄存器中，然后调用那些系统调用函数吗？在我看来，在 x86 中，当发出系统调用时，参数很容易保存在寄存器中；那么为什么还要费心将 then 保存在堆栈中以通过堆栈约定强制执行此类传递参数呢？

最后，任何人都可以推荐一些我可以参考的资源/书籍来进行这种混合汇编/c编程吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-08T14:37:43.673

经过几个小时的研究，我得到以下经验要点：

**(1) 在定义这样一个将从汇编代码中调用的函数时，是否需要 asmlinkage？**

不，实际上fastcall是经常使用的。

例如在entry_32.S中，如果搜索“call”，则可以得到从这个汇编文件中调用的所有c函数。然后你可以看到，很多使用fastcall而不是asmlinkage作为调用约定。例如，

```
 /*in entry_32.S*/
    movl PT_OLDESP(%esp), %eax
    movl %esp, %edx
    call patch_espfix_desc

    /*in traps_32.c*/
    fastcall unsigned long patch_espfix_desc(unsigned long uesp,
                  unsigned long kesp) 
```

**(2) gcc 中的默认调用约定是什么。如果我在定义 ac 函数时省略了“asmlinkage”，它是否意味着 _cdecl 或 fastcall？**

**(3) 如果默认调用约定是 cdecl，为什么需要 asmlinkage，考虑到 cdecl 等于 asmlinkage 修饰符？（我在这里正确吗？）**

For C functions not invoked from assembly code, we can safely assume the default calling convention is cdecl (or fast call; it doesn't matter, because gcc will take care of the caller and callee for parameter passing. The default calling convention can be specified when compiling). However, for C functions invoked from assembly code, we should explicitly declare the function's calling convention, because the parameter passing code in assembly side has been fixed. For example, if patch_espfix_desc is declared as asmlinkage, then gcc will compile the function to retrieve parameters from stack. This is inconsistent with the assembly side, which put the parameters into registers.

*But I am still not clear when to use asmlinkage and when to use fastcall. I really need some guideline and resources to refer to.*

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-08T05:29:59.630

我想尝试自己回答问题（4）：

**为什么所有的系统调用函数sys_*，例如sys_gettimeofday，都使用栈来传递参数？**

原因是内核在处理来自用户空间的系统调用请求时，无论如何都需要将所有寄存器保存到堆栈上（以便在返回用户空间之前恢复环境），因此之后参数在堆栈上可用。即，它不需要额外的努力。

另一方面，如果要使用 fastcall 进行调用约定，则需要做更多的工作。我们首先要知道，当用户程序发出系统调用时，在x86-linux中，%eax代表系统调用号，*%ebx, %ecx, %edx, %esi, %edi, %ebp*用于传递6系统调用的参数（在“int 80h”或“sysenter”之前）。但是，fastcall 的调用约定是第一个参数传入 %eax，第二个传入 %edx，第三个传入 %ecx，其他的从右到左压入堆栈。这样，为了在内核中强制执行这种快速调用约定，除了将所有寄存器保存在堆栈上之外，您还需要以某种方式安排这些约定。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-08T04:04:14.603

我相信这个想法是允许使用 gcc 选项编译内核，这会将默认调用约定更改为更有效的方式（即在寄存器中传递更多参数）。但是，不能允许需要从 asm 调用的函数根据正在使用的 gcc 选项在调用约定中有所不同，或者必须为每个受支持的 gcc 选项集提供单独的 asm 版本。因此，需要使用固定调用约定（恰好与没有特殊 gcc 选项的默认值匹配）的函数使用特殊属性声明，以便它们的调用约定将保持固定。

# ruby - 如何定义 Array[] 样式初始值设定项？

> ID：10060169
> 
> 赞同：2
> 
> 时间：2012-04-08T03:33:02.427
> 
> 标签：ruby, initialization

可以使用以下方法初始化 ruby​​ 数组：

```
irb(main):01:0> Array[1,2,3]
=> [1, 2, 3] 
```

我如何在自己的课堂上模仿这种行为？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T03:34:31.410

您可以实现公共`[](*args)`类方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T03:41:10.120

```
class Foo
  def self.[] *args
    new *args
  end
  # ...
end 
```

# asp.net - 如何发布 ASMX Web 服务

> ID：10060171
> 
> 赞同：0
> 
> 时间：2012-04-08T03:33:15.783
> 
> 标签：asp.net, visual-studio, web-services

我在 Visual Studio 11 中创建了一个 asmx Web 服务。我想发布该 Web 服务。有人知道免费的虚拟主机服务器 URL 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T03:41:48.573

你是对的，只需发布​​到计算机上的文件夹，然后将该文件夹上传到您的 ftp，那么您的服务应该可以工作。它对我来说有很多次（包括我不久前没有的快速“聊天”窗口）。我的主机是godaddy，但这应该与它无关。

# python - GAE SDK 1.6.4 dev_appserver 数据存储刷新

> ID：10060172
> 
> 赞同：1
> 
> 时间：2012-04-08T03:33:29.943
> 
> 标签：python, google-app-engine, django-nonrel

希望得到 GAE python 团队对此的评论。

关于 dev_appserver 数据存储在应用退出时刷新到磁盘的方式，在 1.6.3 和 1.6.4 之间是否发生了一些变化？

我正在使用 django-nonrel，在 1.6.3 及之前，我曾经能够加载 python shell：python manage.py shell（manage.py 由 django-nonrel 提供）

然后我可以导入我的模型并访问数据存储、修改实体并退出。

在 1.6.4 上，我可以这样做，但是当我退出时，更改不会保存到数据存储区。当我将 django-nonrel 作为 WSGI 应用程序运行时，它会正确保存，并且我在退出时看到一条消息（“应用所有待处理的事务并保存数据存储区”）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-10T22:18:20.697

感谢 Dragonx 的解决方案和信息。我从 Eclipse 运行我的开发服务器，我很惊讶地看到我的数据在升级到 1.6.4 后没有保存我在每个 Web 请求后向数据库添加了一个刷新，为此我为所有请求实现了一个基类并覆盖调度：

```
developmentServer = False

if os.environ.get('SERVER_SOFTWARE','').startswith('Development'):
    developmentServer = True

class BaseRequestHandler(webapp2.RequestHandler):
    def dispatch(self):
        retValue = super(BaseRequestHandler, self).dispatch()
        if developmentServer:
                from google.appengine.tools import dev_appserver 
                dev_appserver.TearDownStubs()

        return retValue 
```

在发行说明中告知类似行为的变化，我可以节省两天时间搜索升级中出现的问题。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T04:11:22.313

似乎发生了一些变化。我已经能够解决以下问题：

```
from google.appengine.tools import dev_appserver
import atexit
atexit.register(dev_appserver.TearDownStubs) 
```

这可确保数据存储在退出时被刷新。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T05:30:37.960

在 1.6.4 之前，我们在每次写入后保存数据存储。此方法在模拟 High Replication Datastore 中的事务模型时不起作用（您将丢失最后几次写入）。它也非常低效。我们对其进行了更改，以便数据存储开发存根刷新所有写入并在关闭时保存其状态。

按照代码：

1.  [https://bitbucket.org/wkornewald/djangoappengine/src/60c2b3339a9f/management/commands/runserver.py#cl-154](https://bitbucket.org/wkornewald/djangoappengine/src/60c2b3339a9f/management/commands/runserver.py#cl-154)
2.  [http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/dev_appserver_main.py#683](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/dev_appserver_main.py#683)

如果服务器完全关闭（使用 TERM 信号或 KeyInterrupt），那么 manage.py 应该可以工作。

# python - 在 Cython 和 NumPy 中包装 C 函数

> ID：10060174
> 
> 赞同：10
> 
> 时间：2012-04-08T03:33:45.877
> 
> 标签：python, c, numpy, cython, word-wrap

我想从 Python 调用我的 C 函数，以便操作一些 NumPy 数组。函数是这样的：

```
void c_func(int *in_array, int n, int *out_array); 
```

结果在 out_array 中提供，我事先知道其大小（实际上不是我的函数）。我尝试在相应的 .pyx 文件中执行以下操作，以便能够将输入从 NumPy 数组传递给函数，并将结果存储在 NumPy 数组中：

```
def pyfunc(np.ndarray[np.int32_t, ndim=1] in_array):    
    n = len(in_array)
    out_array = np.zeros((512,), dtype = np.int32)
    mymodule.c_func(<int *> in_array.data, n, <int *> out_array.data)
    return out_array 
```

但是我得到 `"Python objects cannot be cast to pointers of primitive types"`输出分配的错误。我该如何做到这一点？

（如果我要求 Python 调用者分配正确的输出数组，那么我可以这样做

```
def pyfunc(np.ndarray[np.int32_t, ndim=1] in_array, np.ndarray[np.int32_t, ndim=1] out_array):  
    n = len(in_array)
    mymodule.cfunc(<int *> in_array.data, n, <int*> out_array.data) 
```

但是我可以通过调用者不必预先分配适当大小的输出数组的方式来做到这一点吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-10T08:09:25.743

您应该在分配`cdef np.ndarray`之前添加`out_array`：

```
def pyfunc(np.ndarray[np.int32_t, ndim=1] in_array):    
    cdef np.ndarray out_array = np.zeros((512,), dtype = np.int32)
    n = len(in_array)
    mymodule.c_func(<int *> in_array.data, n, <int *> out_array.data)
    return out_array 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T17:03:48.173

这是一个如何使用 C/C++ 编写的代码通过 ctypes 操作 NumPy 数组的示例。我用 C 语言编写了一个小函数，从第一个数组中取出数字的平方并将结果写入第二个数组。元素的数量由第三个参数给出。此代码被编译为共享对象。

squares.c 编译为 squares.so：

```
void square(double* pin, double* pout, int n) {
    for (int i=0; i<n; ++i) {
        pout[i] = pin[i] * pin[i];
    }
} 
```

在 python 中，您只需使用 ctypes 加载库并调用该函数。数组指针是从 NumPy ctypes 接口获得的。

```
import numpy as np
import ctypes

n = 5
a = np.arange(n, dtype=np.double)
b = np.zeros(n, dtype=np.double)

square = ctypes.cdll.LoadLibrary("./square.so")

aptr = a.ctypes.data_as(ctypes.POINTER(ctypes.c_double))
bptr = b.ctypes.data_as(ctypes.POINTER(ctypes.c_double))
square.square(aptr, bptr, n)

print b 
```

这适用于任何 c-library，您只需要知道要传递哪些参数类型，可能使用 ctypes 在 python 中重建 c-structs。

# ruby-on-rails - 骨干js模型/控制器将json数据分配给变量

> ID：10060178
> 
> 赞同：0
> 
> 时间：2012-04-08T03:34:38.603
> 
> 标签：ruby-on-rails, backbone.js, coffeescript

我在使用主干 js 时遇到了一些困难。目前，我有一个通过 json 向骨干网提供信息的 rails 应用程序。看来这一切正常，因为当我导航到 URL 时，会显示 json 数据。我在使用 fetch 方法时遇到了困难。下面是我的代码：

```
jQuery ->
  class Event extends Backbone.Model
    url: '/events/get_last'
    defaults:
      name: 'This isnt from the server'
      date_of: '2012-03-01'
      max_attendees: '300'

  class EventList extends Backbone.Collection
    url: '/events/get_events'
    model: Event

  class EventView extends Backbone.View
    el: $ 'body'
    model: Event
    initialize: (options) -> 
      _.bindAll @
      @event = new Event
      @event.fetch()
      @render()
    render: ->
      $(@el).append "<span>#{@event.get 'name'}"

  class EventRouter extends Backbone.Router
    routes : 
        '' : 'home'
        'dashboard' : 'render_data_view'
        'default' : 'default_view'
    home: -> 
      console.log "home"

    render_data_view: ->
      event_view = new EventView

    default_view: ->
      console.log 'the default view was hit'

    initialize: ->
      Backbone.history.start(pushState: true)

  event_router = new EventRouter 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T17:17:26.557

查看主干文档：[http ://documentcloud.github.com/backbone/#Model-fetch](http://documentcloud.github.com/backbone/#Model-fetch)

```
model.fetch({
 success: function(model, response) {...}, 
 error: function(model, response) {...}
}); 
```

您应该为 fetch 方法设置成功和错误方法。当你得到一个成功事件时，你可以调用 render()。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-26T19:36:28.797

您的 EventView 应该绑定到其模型的`"change"`事件，以便[`fetch`](http://documentcloud.github.com/backbone/#Model-fetch)自动触发事件：

> **拿来** `model.fetch([options])`
> 
> [...]`"change"`如果服务器的状态与当前属性不同，将触发一个事件。

所以你的视图应该更像这样：

```
class EventView extends Backbone.View
  el: 'body'
  initialize: (options) ->
    @model = new Event
    @model.on 'change', @render
    @model.fetch() # This will call `render` automatically.
  render: =>
    @$el.append "<span>#{@model.get 'name'}</span>" 
```

几点注意事项：

1.  您很少需要[`bindAll`](http://documentcloud.github.com/underscore/#bindAll)与 CoffeeScript一起使用，请改用粗[箭头 ( `=>`)](http://coffeescript.org/#fat_arrow)。
2.  视图上的`model`属性应按实例设置为单个模型（因此`@event`->`@model`名称更改）。`model`集合在类定义中设置它们的属性，并且`@model`集合应该是模型类。
3.  绑定到`"change"`模型上的事件意味着当*任何人*`@render`更改模型时，您的视图将被通知（即将被调用），此事件行为是 Backbone 的全部内容，因此您应该使用它，成功和错误处理程序更多的是用于错误处理和向用户报告成功。*`fetch`*
**   你真的应该关闭你的`<span>`元素。*   该视图已经具有[`@$el`](http://documentcloud.github.com/backbone/#View-%24el)，因此您不妨使用它而不是`$(@el)`.*   您可以使用`el: 'body'`代替`el: $ 'body'`并将 jQueryification 留给 Backbone。*   如果您使用的是较旧的 Backbone，则：
    1.  您可能必须使用`bind`而不是`on`.
    2.  你可能没有，`@$el`所以`$(@el)`可能需要。*

# django - 重复 SYNCDB 会产生不同的结果？

> ID：10060179
> 
> 赞同：1
> 
> 时间：2012-04-08T03:35:03.163
> 
> 标签：django, django-models

当我运行`syncdb`它时，它给了我一个`MySQL 150`错误，可能与 FK 有关。但是，当我反复运行时`syncdb`，它最终会起作用（下面的整个跟踪）。为什么会出现这种情况？

```
 david-MacBook-Pro$ syncdb
    Creating tables ...
    Creating table jobs_company
    Creating table jobs_job
    Traceback (most recent call last):
      File "manage.py", line 14, in <module>
        execute_manager(settings)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
        utility.execute()
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
        self.fetch_command(subcommand).run_from_argv(self.argv)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
        self.execute(*args, **options.__dict__)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
        output = self.handle(*args, **options)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 351, in handle
        return self.handle_noargs(**options)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 101, in handle_noargs
        cursor.execute(statement)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/backends/util.py", line 34, in execute
        return self.cursor.execute(sql, params)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 86, in execute
        return self.cursor.execute(query, args)
      File "build/bdist.macosx-10.6-intel/egg/MySQLdb/cursors.py", line 174, in execute
      File "build/bdist.macosx-10.6-intel/egg/MySQLdb/connections.py", line 36, in defaulterrorhandler
    _mysql_exceptions.OperationalError: (1005, "Can't create table 'david542.#sql-2c3_57e' (errno: 150)")
    david-MacBook-Pro:$ syncdb
    Creating tables ...
    Creating table jobs_jobposition
    Creating table jobs_externaljob
    Creating table jobs_externalsite
    Creating table jobs_sitevisit
    Traceback (most recent call last):
      File "manage.py", line 14, in <module>
        execute_manager(settings)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
        utility.execute()
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
        self.fetch_command(subcommand).run_from_argv(self.argv)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
        self.execute(*args, **options.__dict__)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
        output = self.handle(*args, **options)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 351, in handle
        return self.handle_noargs(**options)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 101, in handle_noargs
        cursor.execute(statement)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/backends/util.py", line 34, in execute
        return self.cursor.execute(sql, params)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 86, in execute
        return self.cursor.execute(query, args)
      File "build/bdist.macosx-10.6-intel/egg/MySQLdb/cursors.py", line 174, in execute
      File "build/bdist.macosx-10.6-intel/egg/MySQLdb/connections.py", line 36, in defaulterrorhandler
    _mysql_exceptions.OperationalError: (1005, "Can't create table 'david542.#sql-2c3_57f' (errno: 150)")
    david-MacBook-Pro$ syncdb
    Creating tables ...
    Creating table jobs_application
    Traceback (most recent call last):
      File "manage.py", line 14, in <module>
        execute_manager(settings)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 438, in execute_manager
        utility.execute()
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/__init__.py", line 379, in execute
        self.fetch_command(subcommand).run_from_argv(self.argv)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 191, in run_from_argv
        self.execute(*args, **options.__dict__)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 220, in execute
        output = self.handle(*args, **options)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/base.py", line 351, in handle
        return self.handle_noargs(**options)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/core/management/commands/syncdb.py", line 101, in handle_noargs
        cursor.execute(statement)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/backends/util.py", line 34, in execute
        return self.cursor.execute(sql, params)
      File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/django/db/backends/mysql/base.py", line 86, in execute
        return self.cursor.execute(query, args)
      File "build/bdist.macosx-10.6-intel/egg/MySQLdb/cursors.py", line 174, in execute
      File "build/bdist.macosx-10.6-intel/egg/MySQLdb/connections.py", line 36, in defaulterrorhandler
    _mysql_exceptions.OperationalError: (1005, "Can't create table 'david542.#sql-2c3_580' (errno: 150)")
    david-MacBook-Pro$ syncdb
    Creating tables ...
    Installing custom SQL ...
    Installing indexes ...
    No fixtures found. 
```

它有效吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T03:41:20.870

它正在工作，因为没有创建 FK。分析生成的 SQL 以验证错误发生的原因，并`settings.INSTALLED_APPS`根据需要重新排序。

# php - 为什么 html 没有显示在我使用 php mail() 函数发送的电子邮件中？

> ID：10060180
> 
> 赞同：0
> 
> 时间：2012-04-08T03:35:07.190
> 
> 标签：php, html, email

我使用 php mail() 函数发送了电子邮件确认消息，但它没有处理 html 标签。知道为什么吗？

```
 $content="Dear $name, <br /><br />Thank you for registering at NAME. Before we can activate your account one last step must be taken to confirm your email address .";
            $content.="<br /><br />Please note - you must complete this last step. You will only need to visit this URL once to confirm your email address.<br /><br />To complete your registration,";
            $content.=" please visit this URL:<br /><a href='$link1' target='_blank'> $link1 </a><br /><br /><br />";
            $content.="If you are still having problems signing up please contact a member of our support staff at&nbsp;<a href='mailto:email@gmail.com'>email</a> or contact our <a href='$link2'>customer care</a>. <br /><br />";
            $content.="All the best,<br />NAME<br />";
            mail($custArray['email'],"Please Confirm Your Email",$content); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T03:40:28.980

您可能需要为 html 电子邮件添加标题。这是来自 php 网站 ( [http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php) ) 的示例：

```
// To send HTML mail, the Content-type header must be set
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

// Additional headers
$headers .= 'To: Mary <mary@example.com>, Kelly <kelly@example.com>' . "\r\n";
$headers .= 'From: Birthday Reminder <birthday@example.com>' . "\r\n";
$headers .= 'Cc: birthdayarchive@example.com' . "\r\n";
$headers .= 'Bcc: birthdaycheck@example.com' . "\r\n";

// Mail it
mail($to, $subject, $message, $headers); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T03:42:40.177

您需要在标题中指定这是一封 html 电子邮件，以便将其解释为 html 而不是纯文本。

[http://php.net/manual/en/function.mail.php](http://php.net/manual/en/function.mail.php)

```
$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";

$content="Dear $name, <br /><br />Thank you for registering at NAME. Before we can activate your account one last step must be taken to confirm your email address .";
$content.="<br /><br />Please note - you must complete this last step. You will only need to visit this URL once to confirm your email address.<br /><br />To complete your registration,";
$content.=" please visit this URL:<br /><a href='$link1' target='_blank'> $link1 </a><br /><br /><br />";
$content.="If you are still having problems signing up please contact a member of our support staff at&nbsp;<a href='mailto:email@gmail.com'>email</a> or contact our <a href='$link2'>customer care</a>. <br /><br />";
$content.="All the best,<br />NAME<br />";
mail($custArray['email'],"Please Confirm Your Email",$content, $headers); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T08:51:24.863

您可以考虑使用外部库来处理 HTML 电子邮件。我过去曾成功使用过[http://swiftmailer.org/](http://swiftmailer.org/)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-08T05:58:26.060

```
$headers  = "From: $email\r\n" . "Reply-To: $email\r\n" . "CC: $cc\r\n";

$message  = "$logmsg \r\n\n";
$message .= "Name : $name \r\n\n";
$message .= "Email : $email \r\n\n";
$message .= "Phone No : $phone \r\n\n"; 
```

# qt - 无法在 Windows 上使用 Qt Creator 进行调试

> ID：10060188
> 
> 赞同：8
> 
> 时间：2012-04-08T03:37:09.027
> 
> 标签：qt, qt-creator

我是 Qt 的新手。我刚刚安装了 Qt SDK 1.2 版。

我的平台是安装了 Windows 7 64 位
Visual Studio 2010 pro 32 位..
现在我已经安装了 Qt SDK 1.2（它有 Qt creator）

我创建了一个测试项目，它运行良好，但我无法调试它。当我调试程序时，我收到此错误消息

*   用于调试“x86-windows-msvc2010-pe-32bit”类型的二进制文件的首选调试器引擎不可用。
*   调试器引擎“Gdb 引擎”将用作后备。
*   详细信息：没有可用于格式为“x86-windows-msvc2010-pe-32bit”的二进制文件的 CDB 二进制文件

正如我在项目构建设置中看到的那样，它似乎自动选择了我的 vs 2010 编译器，但似乎由于某种原因它无法使用调试器..

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T08:13:18.230

根据[此文档](http://doc.qt.nokia.com/qtcreator-2.4/creator-debugger-engines.html)，您需要下载并安装[适用于 Windows 的调试工具](http://msdn.microsoft.com/en-us/windows/hardware/gg463009)。

# java - Android：查看鳍状肢视图

> ID：10060191
> 
> 赞同：0
> 
> 时间：2012-04-08T03:37:52.460
> 
> 标签：java, android, viewflipper

如何从另一个班级查看某个视图。例子：

我有 2 个 .java 类都是 viewflipper 并且有 10 个视图。

如果我在第一个 1.java 类上并且想要转到某个视图，例如 2.java 类中的第 8 个视图，这可能吗？我有这个代码：

```
 VF.setDisplayedChild(8); 
```

但是只有当你已经在课堂上时，这段代码才会出现。如果我不在盒子里怎么办:(

谢谢

瓦希德

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-31T16:04:29.543

首先，确保你初始化了你的两个类，否则你会抛出一个 NPE。

然后，如果您在第一个脚蹼中，则需要将内容视图设置为第二个脚蹼，然后一旦完成，您就可以调用`VF.setDisplayedChild(x);`（甚至之前调用它，然后切换视图）。

如果您的内容视图仍然是第一个，则翻转第二个只会翻转它，但不会实际显示它。

# c - 结构中的成员太多？？（程序运行正常，但错误退出）

> ID：10060192
> 
> 赞同：1
> 
> 时间：2012-04-08T03:37:58.617
> 
> 标签：c, size, structure, members

我有一个明显的问题，但我对这个问题感到困惑。

好的，首先让我概述一下情况。我有一个名为 ENTITY 的结构，用于保存游戏中实体的属性。我最近在结构中添加了更多成员。该程序运行完美，但当我退出时，Windows 会弹出一个错误屏幕，显示“XXX.exe 已停止工作...在线检查解决方案...等等等等”。

因此，为了排除故障，我从 ENTITY 结构中删除了一些成员，程序运行正常并退出正常。？？？

（使用 Dev-cpp 编译）

编码：

```
typedef struct _ENTITY
{
    char classname[16];
    int health;
    int vel_x;
    int vel_y;
    int direction;
    int frame;
    int flag;
    SDL_Rect bbox;
    struct _ENTITY *next;
    struct _ENTITY *owner;
    struct _ENTITY *goal;
    void (*think) ();
    float nextthink;
} ENTITY; 
```

## 为实体结构分配内存的函数

```
ENTITY *ENTITY_spawn (void)
{
    ENTITY *node, *old_node;
    int i;

    node = ENTITY_head; // Top of list

    // Find end of list
    for (i = 0; node; i++)
    {
        old_node = node;
        node = node->next;
    }

    // Allocate
    node = (ENTITY*)calloc (1, sizeof (ENTITY));

    if (i)
        old_node->next = node;
    else
        ENTITY_head = node;

    return node;
} 
```

（编辑 4/8/12） - 使用 calloc 而不是 malloc - 在函数参数中插入 void - 摆脱 NULL_void - 无法摆脱 (ENTITY*) 强制转换，编译器抱怨它无法转换类型 void（因为我不包括stdlib.h？）

以下是我在退出程序时删除 ENTITY(s) 的方法：

```
void ENTITY_cleanup (void)
{
    ENTITY *node, *old_node;

    node = ENTITY_head;

    while (node)
    {
        old_node = node->next;
        free (node);
        node = old_node;
    }
} 
```

# php - 如何发布选中的单选按钮

> ID：10060196
> 
> 赞同：0
> 
> 时间：2012-04-08T03:38:31.403
> 
> 标签：php, javascript, post

[我这里](http://jsfiddle.net/fPtMq/31/)有一个 jsfiddle 。它的作用是当用户单击“添加问题”按钮时，它会在每一行中添加一个单选按钮。但我想要做的是使用 $_POST 将每行中选定的单选按钮发布到 insertQuestions.php 页面（表单使用的操作）。

所以我想知道的是如何编写 $_POST 语句才能粘贴选中的单选按钮？

更新：

下面的代码在通过使用 z case 语句然后查询来查找所选收音机的回复 ID 方面是否正确：

```
$i = 0;
$c = count($_POST['reply']);

$insertquestion = array();

for($i = 0;  $i < $c; $i++ ){

    switch ($_POST['reply'][$i]){

    case "Single": 
    $selected_option = "Single";
    break;

    case "Multiple": 
    $selected_option = "Multiple";
    break;

    default:
    $selected_option = "";
    break;

    }      

    $replyquery = "SELECT ReplyId FROM Reply WHERE (ReplyType = '". mysql_real_escape_string($_POST['reply'])."')";
    $replyrs = mysql_query($replyquery);
    $replyrecord = mysql_fetch_array($replyrs);
    $replyid = $replyrecord['ReplyId']; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:31:12.343

您需要做的就是在运行 AJAX 脚本时。在流程页面上，您将使用类似

```
<?PHP
$reply1 = $_POST['reply1'];
$reply2 = $_POST['reply2']; 
```

~~但是，您需要更改输入字段的名称，以`name="reply[]"`使发布的数据成为数组~~

更新：在这种情况下，前一个仅对复选框有效（没有复选框）对于同名的复选框，复选框 1 被选中，然后复选框 2 被选中，您只会在帖子上获得复选框 2 的值。

由于reply 是重复问题后带有数字的名称，因此您始终可以通过使用来获取所有发布的变量`$_POST`。这样做会给你一个所有发布数据的数组

如果您想查看每个回复，因为它是动态的，只需执行一个 foreach 语句

```
foreach($_POST as $k=>$v) {
    //Run script to process each posted reply 
} 
```

# html - 如何使用 CSS3 @keyframes 将元素动画化回其原始位置

> ID：10060207
> 
> 赞同：0
> 
> 时间：2012-04-08T03:40:44.540
> 
> 标签：html, css, hover, css-transitions

我知道如果我正在使用我会怎么做，`transition`但我需要一个无限重复的动画（我也想知道是否可以进行无限过渡；呵呵）。访问[www.terrasoftlabs.com](http://www.terrasoftlabs.com)了解实际问题。当您将鼠标悬停在图像上时，会完美地过渡到旋转。但是，当您的鼠标离开该区域时，该元素会*弹*回原位。解决方案是什么？我在这里看到了许多类似的问题，但似乎没有一个解决方案符合要求。我很感激任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:44:11.937

无限动画是可能的：查看这个演示： http: [//ludonaut.de/mario/](http://ludonaut.de/mario/)

# c# - C#并发字典不保存我的列表 页面加载之间的值

> ID：10060216
> 
> 赞同：2
> 
> 时间：2012-04-08T03:42:41.567
> 
> 标签：c#, concurrentdictionary

自从我被难住以来已经有一段时间了。疯狂的是，我已经在我的代码的其他区域多次这样做了，所以它几乎是完整的复制和粘贴，但除了这段代码不能正常工作。所以我不知何故错过了一些非常明显的东西。

```
public class RoomCache
{
    private ConcurrentDictionary<string, List<string>> _dicOnlineTraders;
    ILoggingService _logService = new LoggingService();

    public RoomCache()
    {
        _dicOnlineTraders = new ConcurrentDictionary<string, List<string>>();
    }
    public void UpdateTraderCurrentRoom(string sRoom, string sTrader)
    {
        _dicOnlineTraders.AddOrUpdate(sRoom, new List<string>() { sTrader }, (x, y) => UpdateRoomOnlineTraderList(sTrader, y));
    }

    private List<string> UpdateRoomOnlineTraderList(string sTrader, List<string> aryTraderList)
    {
        try
        {
            if (!aryTraderList.Contains(sTrader))
            aryTraderList.Add(sTrader);

            return aryTraderList;
        }
        catch (Exception ex)
        {
            _logService.LogError(ex);
            return aryTraderList;
        }
    }
} 
```

上面的类在 Application_Start() global.asax.cs 中实例化，如下所示：

```
public static RoomCache RoomCache;
RoomCache = new RoomCache(); 
```

所以现在在页面加载之间，我的字典没有保留我在调用 UpdateRoomOnlineTraderList 时添加到列表中的值。当我通过时，列表就在那里。下次我加载页面时它就消失了，我是 100% 没有其他东西从字典中删除这个值。

我的字典如何在页面加载之间不保留值？密钥仍然保留，但价值消失了。我很困惑。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:03:14.090

如果您绝对确定在其他地方没有重新初始化 RoomCache 或从中删除预期数据的代码，我最好的猜测是您有两个 AppDomains 正在为您的 IIS 应用程序运行......所以您实际上有两个静态RoomCache 在一个 w3wp 工作进程下的两个不同的 AppDomain 中。

您可以通过在监视或即时窗口中打印来自行检查：AppDomain.CurrentDomain.Id

如果这两个页面加载实际上发生在不同的 AppDomain 中，则结果将是两个不同的 int 值。

一般来说，如果 ASP .NET 决定为您托管两个不同的 AppDomain，这符合您的最大利益……因此，如果您确实需要在页面加载时可靠地持久保存信息，您可能会考虑为您的信息使用进程外存储。

或者，您可以使用您的 web.config 来坚持 ASP .NET 将您的应用程序限制为只有一个 AppDomain。如果 ASP .NET 决定在页面加载之间回收您的 AppDomain（这可能一直发生），这仍然不会保护您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T06:09:53.800

鉴于提供的代码，我没有看到错误。不过，我有个主意。

如果列表曾经返回给调用者，那么调用者可能会设置为 null ......然后将集合中的列表也设置为 null （因为它们当然是相同的列表）。

`GetOnlineTradersWithSideEffects`如果存在，这将导致该问题。

```
public class RoomCache
{
    private ConcurrentDictionary<string, List<string>> _dicOnlineTraders;
    ILoggingService _logService = new LoggingService();
    private static readonly object SynchronousReadLock = new object();

    // This is bad because the reference is passed out to the
    // caller and we can't be sure that callers will behave. Any
    // modifications to that list will change our list too.
    private List<string> GetOnlineTradersWithSideEffects(string sRoom)
    {
        List<string> theseTraders = null;
        _dicOnlineTraders.TryGetValue(sRoom, out theseTraders);
        return theseTraders; 
    }

    // A side-effect-free method of returning the list to a caller.
    private List<string> GetOnlineTraders(string sRoom)
    {
        List<string> theseTraders = null;
        _dicOnlineTraders.TryGetValue(sRoom, out theseTraders);
        lock (SynchronousReadLock)
        {
            // Create a new list to return to a caller, that has 
            // copies of the elements of the list in the dictionary.
            var localCopy = new List<string>(theseTraders);
            return localCopy;
        }
    }

    public RoomCache()
    {
        _dicOnlineTraders = new ConcurrentDictionary<string, List<string>>();
    }
    public void UpdateTraderCurrentRoom(string sRoom, string sTrader)
    {
        _dicOnlineTraders.AddOrUpdate(sRoom, new List<string>() { sTrader }, (x, y) => {});
    }

    private List<string> UpdateRoomOnlineTraderList(string sTrader, List<string> aryTraderList)
    {
        try
        {
            // Lock here too, when modifying the list so that our reads 
            // wait for writes and vice-versa.
            lock (SynchronousReadLock)
            {
                if (!aryTraderList.Contains(sTrader))
                    aryTraderList.Add(sTrader);
                return aryTraderList;
            }
        }
        catch (Exception ex)
        {
            _logService.LogError(ex);
            return aryTraderList;
        }
    }
} 
```

# c - C中的点对点linux身份验证

> ID：10060218
> 
> 赞同：1
> 
> 时间：2012-04-08T03:43:26.893
> 
> 标签：c, authentication, openssl, p2p, embedded-linux

我有两个运行 Angstrom Linux 的嵌入式系统，它们通过以太网交叉电缆连接。我正在开发一个允许两个系统相互通信的 C 程序。

当两台计算机相互通信时，它们首先需要验证对方的身份并加密连接。我正在尝试使用 openssl 来完成身份验证和加密，但我不完全确定该怎么做。所有点对点问题都与其他语言相关或与 openssl 无关。我一直在尝试修改 OpenSSL 编程简介 [http://www.linuxjournal.com/article/4822](http://www.linuxjournal.com/article/4822)中的代码，以使我的嵌入式系统正常工作，但没有成功。在 common.c 中的 SSL_CTX *initialize_ctx 和 server.c 中的 load_dh_params(ctx,file) 似乎是问题区域。这是我的 common.c 代码以及我的一些修改。

```
SSL_CTX *initialize_ctx(keyfile,password)
char *keyfile;
char *password;
{
SSL_METHOD *meth;
SSL_CTX *ctx;
char buffer[200];
if (!bio_err)
{
    /* Global system initialization*/
    SSL_library_init();
    SSL_load_error_strings();

    /* An error write context */
    bio_err=BIO_new_fp(stderr,BIO_NOCLOSE);
}

debuglocation(__LINE__,__FILE__);
/* Set up a SIGPIPE handler */
signal(SIGPIPE,sigpipe_handle);

/* Create our context*/
meth=SSLv23_method();
ctx=SSL_CTX_new(meth);  

debuglocation(__LINE__,__FILE__);
/* Load our keys and certificates*/

//    if (!(SSL_CTX_use_certificate_chain_file(ctx,keyfile)))
//        berr_exit("Can't read certificate file");

debuglocation(__LINE__,__FILE__);

pass=password;
/* TODO need to put a password on the key*/
//SSL_CTX_set_default_passwd_cb(ctx,password_cb);
//if (!(SSL_CTX_use_PrivateKey_file(ctx,keyfile,SSL_FILETYPE_PEM)))

//http://www.openssl.org/docs/ssl/SSL_CTX_use_certificate.html#NOTES

if(!(SSL_CTX_use_RSAPrivateKey_file(ctx,"private.pem", SSL_FILETYPE_PEM)))
    berr_exit("Can't read priveate rsa");

debuglocation(__LINE__,__FILE__);
//berr_exit("Can't read key file");

//    /* Load the CAs we trust*/
//    if (!(SSL_CTX_load_verify_locations(ctx,
//                                        CA_LIST,0)))
//        berr_exit("Can't read CA list");
#if (OPENSSL_VERSION_NUMBER < 0x00905100L)
SSL_CTX_set_verify_depth(ctx,1);
#endif

return ctx;
} 
```

这是server.c

```
void load_dh_params(ctx,file)
SSL_CTX *ctx;
char *file;
{
DH *ret=0;
BIO *bio;

//http://www.openssl.org/docs/crypto/BIO_s_file.html
// opens a file just like fopen with the second parameter as the type of open. Here it is read 'r'.
if ((bio=BIO_new_file(file,"r")) == NULL)
 berr_exit("Couldn't open DH file");

//http://www.openssl.org/docs/crypto/pem.html
ret=PEM_read_bio_DHparams(bio,NULL,NULL,
 NULL);
BIO_free(bio);

if(SSL_CTX_set_tmp_dh(ctx,ret)<0)
 berr_exit("Couldn't set DH parameters");
} 
```

我的调试功能看起来像这样。

```
int debuglocation(int line, char * file)
{
static char c = 'A';
printf("Made it to line %d in %s call it %c\n",line,file, c);
c++;
return 0;
} 
```

因此，当我运行从服务器获得的所有内容时。

```
2535:error:1408A0C1:SSL routines:SSL3_GET_CLIENT_HELLO:no shared cipher:s3_srvr.c:1075: 
```

这是来自客户的。

```
SSL connect error
2616:error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure:s23_clnt.c:596: 
```

另外我不确定使用什么 ssl 命令来制作所需的证书。如果两个嵌入式设备都有一个公钥和一个私钥，似乎 RSA 会很好地工作，所以我尝试遵循[http://www.devco.net/archives/2006/02/13/public_-_private_key_encryption_using_openssl.php](http://www.devco.net/archives/2006/02/13/public_-_private_key_encryption_using_openssl.php) 并制作了一个脚本为我制作它们。

```
openssl genrsa -out private.pem 1024
openssl rsa -in private.pem -out public.pem -outform PEM -pubout 
```

在此先感谢您的帮助。如果您需要更多信息，请告诉我。我认为这个问题的答案对于使用 C 语言开发嵌入式系统并需要一些身份验证的任何人都非常有帮助。

安东尼

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-04T20:09:29.220

我最终使用 ssh 而不是尝试使用 openssl。它确实让生活变得简单多了。也许当我有更多时间时，我会以另一种方式解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T03:53:42.250

作为运行 comm 进程的用户，执行 ssh_keygen。

将输出的公共部分 id_rsa.pub 附加到另一台机器上的 ~/.ssh/authorized_keys 中。现在您无需登录即可使用 ssh 运行远程程序。

编辑。由于使用证书的麻烦，我提出了上述建议。您需要有一个信任存储、正确的目录权限等。我认为您缺少的第一件事是[在受信任的证书上加载数据](http://www.ibm.com/developerworks/linux/library/l-openssl/index.html)。请参阅有关如何执行此操作的链接。使用 openssl 中的命令行工具检查授权然后调试程序并同时设置 SSL 会更容易。

# c++ - 回调非静态 C++ 成员函数

> ID：10060219
> 
> 赞同：2
> 
> 时间：2012-04-08T03:43:31.540
> 
> 标签：c++, function, pointers, callback

我希望有人能阐明这段代码片段，这让我感到困惑。

```
 //-------------------------------------------------------------------------------
   // 3.5 Example B: Callback to member function using a global variable
   // Task: The function 'DoItB' does something that implies a callback to
   //       the member function 'Display'. Therefore the wrapper-function
   //       'Wrapper_To_Call_Display is used.

   #include <iostream.h>   // due to:   cout

   void* pt2Object;        // global variable which points to an arbitrary object

   class TClassB
   {
   public:

      void Display(const char* text) { cout << text << endl; };
      static void Wrapper_To_Call_Display(char* text);

      /* more of TClassB */
   };

   // static wrapper-function to be able to callback the member function Display()
   void TClassB::Wrapper_To_Call_Display(char* string)
   {
       // explicitly cast global variable <pt2Object> to a pointer to TClassB
       // warning: <pt2Object> MUST point to an appropriate object!
       TClassB* mySelf = (TClassB*) pt2Object;

       // call member
       mySelf->Display(string);
   }

   // function does something that implies a callback
   // note: of course this function can also be a member function
   void DoItB(void (*pt2Function)(char* text))
   {
      /* do something */

      pt2Function("hi, i'm calling back using a global ;-)");   // make callback
   }

   // execute example code
   void Callback_Using_Global()
   {
      // 1\. instantiate object of TClassB
      TClassB objB;

      // 2\. assign global variable which is used in the static wrapper function
      // important: never forget to do this!!
      pt2Object = (void*) &objB;

      // 3\. call 'DoItB' for <objB>
      DoItB(TClassB::Wrapper_To_Call_Display);
   } 
```

**问题1：**关于这个函数调用：

```
DoItB(TClassB::Wrapper_To_Call_Display) 
```

为什么不`Wrapper_To_Call_Display`接受任何参数，尽管它应该`char*`根据它的声明接受一个参数？

**问题2：** `DoItB`声明为

```
void DoItB(void (*pt2Function)(char* text)) 
```

到目前为止我所理解的是`DoItB`将函数指针作为参数，但是为什么函数调用`DoItB(TClassB::Wrapper_To_Call_Display)`作为`TClassB::Wrapper_To_Call_Display`参数甚至很难它不是指针？

提前感谢

代码片段来源：http: [//www.newty.de/fpt/callback.html](http://www.newty.de/fpt/callback.html)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T04:57:21.127

在 C/C++ 中，当使用不带参数的函数名（即没有括号）时，它是指向函数的指针。`TClassB::Wrapper_To_Call_Display`指向实现函数代码的内存地址的指针也是如此。

因为`TClassB::Wrapper_To_Call_Display`是一个指向一个`void`函数的指针，它需要一个`char*`它的时间，`void (*)(char* test)`所以它匹配所需的类型`DoItB`。

# c++ - 从 const 用户定义的类转换为 C++ 中的内置类型

> ID：10060220
> 
> 赞同：0
> 
> 时间：2012-04-08T03:43:54.923
> 
> 标签：c++, types, casting, constants

我有一个类，其唯一的数据成员是 32 位无符号整数。也就是说，这个类看起来像这样：

```
class A {
protected:
    unsigned int bits;
    /* ... some methods ... */
public:
    /* ... some methods ... */
}; 
```

但我希望它也能够隐式转换为 32 位无符号整数。所以我添加了一个复制构造函数以及一个强制转换运算符：

```
class A {
protected:
    unsigned int bits;
    /* ... some methods ... */
public:
    A(): bits(0) {} // default constructor
    A(const unsigned int i): bits(i) {} // convert from unsigned int to A
    operator unsigned int() { return bits; } // convert from A to unsigned int
    /* ... some methods ... */
}; 
```

所以现在例如，我可以做以下事情：

```
int main () {
    // default constructor
    A a0 = A();
    // convert from unsigned int
    A a1 = 1 + 2;
    // conversions between the two types:
    unsigned int result = (a0 & a1 + 5) / 2;
} 
```

但是我正在努力让它与`const`类型一起工作。特别是，以下不起作用：

```
int main () {
    const A a = 5;      // works
    unsigned int i = a; // compiletime error
} 
```

它说“不存在从 'const A' 到 'unsigned int' 的合适转换函数。”。我将 Visual Studio 2010 与 Microsoft 提供的默认编译器一起使用。

我需要创建什么转换函数才能使其正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T03:48:39.757

声明转换运算符 const：

```
operator unsigned int() const { return bits; } 
```

警告：隐式转换运算符几乎总是一个坏主意。危险通常远远超过调用普通旧成员函数的轻微不便：

```
unsigned int asInt() const { return bits; }
⋮
unsigned int i = a.asInt(); 
```

如果你有 C++11，最终的解决方案是声明一个*显式*转换运算符：

```
explicit operator unsigned int() const { return bits; }
⋮
unsigned int i = static_cast<int>(a); 
```

# ruby-on-rails - 为 ruby on rails 配置 Notepad++

> ID：10060221
> 
> 赞同：7
> 
> 时间：2012-04-08T03:44:00.783
> 
> 标签：ruby-on-rails, ruby

我是 ruby​​ on rails 和一般编程的新手。我想使用记事本++。我已经安装了它，但我不知道如何启用语法突出显示。我已经通过谷歌搜索，但我只找到了如何修复 erb 文件（显然这些文件类型存在错误）。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T03:47:50.473

进入 Settings > Style Configurator 并选择您的语言（Ruby）：

![Notepad++ 中的样式配置器](../Images/f92765a74fbeb5a775e565b158ae4489.png)

在标有“用户分机”的框中。在左下角，添加您希望突出显示为 Ruby 的扩展，用空格分隔。然后只需保存并关闭。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-15T12:01:56.373

如果您转到“语言”选项卡，请转到“R”，然后转到“Ruby”，这也将启用语法突出显示，但仅在您的会话期间。

# php - 基于 xmlhttp.responseText 更改 css 样式

> ID：10060222
> 
> 赞同：0
> 
> 时间：2012-04-08T03:44:33.420
> 
> 标签：php, javascript, jquery, xmlhttprequest

好的，这是我的问题。我正在尝试使用 jQuery 根据 xmlhttpRequest 的 responseText 更改文本字段的 css 样式。如果公司名称已被采用，则 php 文件将回显“公司名称已采用”。我希望 comp_stat 框背景变成红色。如果公司名称是唯一的，php 文件将回显“公司名称确定”，我希望 comp_stat 框背景变为绿色。

这是 javascript - 所选文本是不起作用的部分。

```
xmlhttp.onreadystatechange = function(){
    if (xmlhttp.readyState == 4 && xmlhttp.status == 200){
        document.getElementById("comp_stat").value = xmlhttp.responseText;

        /*Not working part*/
        if(xmlhttp.responseText == 'Company Name Already Taken.'){
            document.getElementById("comp_stat").style.backgroundColor = "red";
        }
        if(xmlhttp.responseText == 'Company Name OK!'){
            document.getElementById("comp_stat").style.backgroundColor = "green";
        }
        /*----------------*/
} 
```

一直在为此挠头好几个小时，这可能是一个简单的修复......任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:15:29.180

> 您突出显示的部分似乎没有任何问题。

但是，也许它在您的代码中的其他地方有错误。我建议您使用 Web 检查器或调试器进行调试。我真的很喜欢 Chrome 的开发者工具（它真的是 Apple 的），它真的很容易使用。如果有任何错误，它将显示错误，您还可以看到行号。 ![在此处输入图像描述](../Images/65508ad469f2fc7669e2f7dd4e0cfeaa.png)

> 它将显示错误在哪里。很有用。

# php - 锁定两次更新的行

> ID：10060223
> 
> 赞同：0
> 
> 时间：2012-04-08T03:44:34.603
> 
> 标签：php, mysql, sql, innodb

我需要对行进行两次更新，但我需要确保它们一起完成，并且其他用户的其他查询不会干扰它们。我知道，`SELECT...FOR UPDATE`但我想在第一次更新后它当然会被解锁，这意味着有人可能会干扰第二次更新。如果其他人先更新该行，则更新将起作用，但会弄乱数据。有没有办法确保这两个更新按照他们应该的方式发生？我被告知有关事务，但据我所知，它们仅有助于确保两个更新实际发生，而不是它们是否“一起”发生，除非我弄错了并且行将被锁定直到事务提交？

以下是查询：

`SELECT z FROM table WHERE id='$id'`

`UPDATE table SET x=x+2 WHERE x>z`

`UPDATE table SET y=y+2 WHERE y>z`

我犯了一个错误，没有提供完整的信息。那是我的错。我已经更新了查询。我遇到的问题是 z 也可以更新。如果 z 在 SELECT 之后但在其他两个更新之前更新，则数据可能会混乱。进行事务 BEGIN/COMMIT 是否适用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T03:54:59.440

了解事务 [http://dev.mysql.com/doc/refman/5.0/en/commit.html](http://dev.mysql.com/doc/refman/5.0/en/commit.html)

```
[... connect ...]

mysql_query("BEGIN");

$query1 = mysql_query('UPDATE table SET x=x+2 WHERE x>y');
$query2 = mysql_query('UPDATE table SET y=y+2 WHERE y>y');

if($query1 && $query2) {
    mysql_query("COMMIT");  
    echo 'Save Done. All UPDATES done.';  
} else {
    mysql_query("ROLLBACK");  
    echo 'Error Save. All UPDATES reverted, and not done.';  
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:08:46.603

有各种级别的事务，但基本上根据[ACID](http://en.wikipedia.org/wiki/ACID)属性，您应该期望在给定事务中，所有读取和更新都是**一致**执行的，这意味着它将保持在有效状态，但更重要的是，事务在该工作中是**隔离**的在另一个事务（线程）中完成不会干扰您的事务（您的选择和更新 SQL 语句的分组）：这允许您广泛假设您是系统内唯一允许您提交该组的执行线程工作（**原子地**）或*全部*回滚。

每个数据库可能会以不同的方式处理语义（有些可能会锁定行或列，有些可能会重新排序，有些可能会序列化），但这就是声明式数据库接口的美妙之处：您担心要完成的工作。

如前所述，在 MySQL 上，InnoDB 是事务性的，将支持上面提到的内容，因此请确保您的表是使用 InnoDB 组织的，其他非事务性引擎（例如 MyISAM）不是事务性的，因此将迫使您手动管理这些事务语义（锁定） .

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T07:44:04.133

一种方法是锁定整个表：

```
LOCK TABLE `table` WRITE;
SELECT z FROM `table` WHERE id='$id';
UPDATE `table` SET x=x+2 WHERE x>z;
UPDATE `table` SET y=y+2 WHERE y>z;
UNLOCK TABLES; 
```

`table`这将防止其他会话在 SELECT 和 UPDATE 期间从表中写入和读取。

这是否是一个合适的解决方案确实取决于会话等待从表中读取或写入的合适程度。

# css - 需要帮助在 IE 中使用页脚

> ID：10060229
> 
> 赞同：0
> 
> 时间：2012-04-08T03:46:56.123
> 
> 标签：css, internet-explorer

作为一名网页设计师，我希望制作的网站至少可以在尽可能多的浏览器中运行。我仍然尝试为那些只使用 IE 而一无所知的访问者设计 IE 7。但是我不太熟悉 id IE，它的间距和 hacks。

我的网站看起来不错，[你可以在这里查看](http://ambergoodwin.com/averylawoffice/averytest/)，除了 IE 之外的所有浏览器。:s 谢天谢地，它现在只是页脚。

我希望有人能给我建议并帮助我解决这个问题，然后可能会给我一些关于 IE 的参考或文章以及它的间距问题和黑客。

我的页脚在 IE 7 或 8 中都不起作用。

即 7： ![在此处输入图像描述](../Images/4a2e8e61d067aa306f39328ef36c8404.png)

即 8： ![在此处输入图像描述](../Images/acd402801cee3a910445d2a0da8d1d67.png)

CSS

```
#footer { width: 100%; height: 503px; background: url(img/FOOTER-bg.jpg) repeat-x; background-color: #821d20; margin-top: 100px;/*border: 1px solid #0C0;*/}
#footer a { text-decoration: underline; color: #c7bd89 !important; }
#footer a:hover { text-decoration: none; color: #fff; }

#footer h6 { background: url(img/FOOTER-HR-BG.jpg) left center repeat-x; text-align: left;}
#footer h6 span { background: #8e2023; display: inline-block; padding-right: 5px; } 
```

我尝试了很多不同的方法，但我不确定 IE 中使用此页脚发生了什么。如果有人能对可能发生的事情有所了解，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:33:48.723

我不确定问题的根源，但不是使用“float：right;”，而是使用“position：absolute; right：-2px;” 似乎解决了这个问题（还要确保#searchform 有一个相对位置）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T05:34:30.010

对于初学者，您有一个未封闭的旁白元素。如果您在 ie8 中查看它并使用 f12 开发人员工具，您可以看到页脚现在是元素的子元素。关闭那个家伙....应该帮忙。

# android - moto-razr 录音机问题

> ID：10060232
> 
> 赞同：1
> 
> 时间：2012-04-08T03:47:41.850
> 
> 标签：android, video, motorola

我是一名学生，正在做我的 Android APP 任务。我遇到了一个无法解决的问题。请给我一些建议，谢谢。我想要进行视频录制活动，并且我已经使用此代码完成了。 [使用媒体录像机录制视频](https://stackoverflow.com/questions/6134624/video-recording-with-media-recorder/6135219#6135219) 这是我的代码，它在其他手机中运行良好，但在 moto-razr 中无法正常运行，这是 HTC 渴望和 MOTO razr 拍摄的两个视频。愿望：http: //youtu.be/suPF9Hk6iYk [razr](http://youtu.be/suPF9Hk6iYk)：http: [//youtu.be/wLvH7SXdcIs](http://youtu.be/wLvH7SXdcIs) 谁能帮我解决我的问题？

```
package video.pac;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.pm.ActivityInfo;
import android.media.MediaRecorder;
import android.os.Bundle;
import android.os.CountDownTimer;
import android.view.Display;
import android.view.Surface;
import android.view.SurfaceHolder;
import android.view.SurfaceView;
import android.view.Window;
import android.view.WindowManager;
public class video extends Activity{

private MediaRecorder recorder;
private Preview mPreview;

boolean flag=false; 
boolean startedRecording=false;
boolean stoppedRecording=false;
boolean key = false;

public void onCreate(Bundle savedInstanceState) {
  super.onCreate(savedInstanceState);
  requestWindowFeature(Window.FEATURE_NO_TITLE);
  getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
      WindowManager.LayoutParams.FLAG_FULLSCREEN);
  WindowManager wm = (WindowManager) getSystemService(Context.WINDOW_SERVICE);

  recorder = new MediaRecorder();
  recorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);
  recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
  recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
  recorder.setVideoSize(640,480);
  recorder.setVideoFrameRate(20);
  recorder.setVideoEncodingBitRate(3000000);
  recorder.setVideoEncoder(MediaRecorder.VideoEncoder.H264);
  recorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
  //recorder.setMaxDuration(5000);
  mPreview = new Preview(video.this,recorder);
  setRequestedOrientation(ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE);
  setContentView(mPreview);

 } 

private CountDownTimer mCountDownTimer = new CountDownTimer(9000, 1000) {

    public void onTick(long millisUntilFinished) {}

    public void onFinish() {

        recorder = null;
        System.out.println("stop");
        video.this.finish();
    }
};

class stopThread implements Runnable {   
    public void run() {  

          try {
              mCountDownTimer.start();  
               Thread.sleep(100);    
          } catch (InterruptedException e) {   
               Thread.currentThread().interrupt();   
          }   

    }   
}

class Preview extends SurfaceView implements SurfaceHolder.Callback{
  //Create objects for MediaRecorder and SurfaceHolder.
  SurfaceHolder mHolder;
  MediaRecorder tempRecorder;

  public Preview(Context context,MediaRecorder recorder) {
    super(context);
    tempRecorder=recorder;
    mHolder=getHolder();
    mHolder.addCallback(this);
    mHolder.setType(SurfaceHolder.SURFACE_TYPE_PUSH_BUFFERS);
    // TODO Auto-generated constructor stub
  }

  public Surface getSurface(){
    return mHolder.getSurface();
  }

  public void surfaceCreated(SurfaceHolder holder){

    tempRecorder.setOutputFile("/sdcard/test" + ".3gpp");
    tempRecorder.setPreviewDisplay(mHolder.getSurface());
    try{
      tempRecorder.prepare();
      recorder.start();
     new Thread(new stopThread()).start();

      System.out.println("start");
    } catch (Exception e) {
      tempRecorder.release();
      tempRecorder = null;
    }
  }

  public void surfaceDestroyed(SurfaceHolder holder) {
    if(tempRecorder!=null){
      tempRecorder.stop();
      tempRecorder.release();
      tempRecorder = null;
      System.out.println("release");
    }
  }

  public void surfaceChanged(SurfaceHolder holder, int format, int w, int h) {}
}   
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T19:15:11.023

我认为这个问题是一个安全问题：

您需要设置录像机预览，否则某些设备会将其视为捕获视频而不在屏幕上显示您的捕获/预览的安全漏洞。尝试将此添加到您的录音机设置中：

```
 .
 .
 recorder.setPreviewDisplay(mHolder.getSurface());
 .
 . 
```

# javascript - HTML5 Canvas globalCompositeOperation 用于叠加渐变而不增加强度？

> ID：10060242
> 
> 赞同：14
> 
> 时间：2012-04-08T03:49:08.667
> 
> 标签：javascript, canvas, html5-canvas, heatmap

我目前正在修复[heatmap.js](https://github.com/pa7/heatmap.js)，我想知道是否有人知道是否可以使用`<canvas>`2d 渲染上下文实现以下效果。

*   我有一个从黑色（alpha 0.5）到透明 40 像素半径的径向渐变。径向梯度的中心在 x=50, y=50
*   我有另一个从黑色（alpha 0.5）到透明的径向渐变，半径为 40 像素。径向梯度的中心在 x=80, y=50

两个渐变重叠。我现在的问题是：重叠区域加在一起导致比径向梯度中心更高的 alpha 值，从而显示错误的数据（例如，由于梯度之间的这些添加，热图中的较热区域）

查看以下[要点](https://gist.github.com/2316563)，通过在控制台中执行它，您可以看到问题。

预期的行为是：最暗的区域是渐变中心，两个渐变的重叠区域合并但不加起来。

在看到没有任何 globalCompositeOperations 导致预期的行为后，我尝试了这些操作的组合。我认为可能的一种方法如下：

*   绘制第一个渐变
*   使用复合操作'destination-out'
*   绘制第二个渐变 -> 从第一个渐变中减去重叠区域
*   使用复合操作'source-over'
*   再次绘制第二个渐变

但不幸的是，我没有找到有效的组合。我很想听听您的反馈，在此先感谢！

PS：我知道这可以通过手动操作像素来完成，但我想知道是否有更简单、更优雅和更快的解决方案。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-15T23:12:16.973

这真的很古怪，但它可以在不涉及 imageData 的情况下做你想做的事。

想到的事情是，当您抚摸它们时，您想要路径本身在画布上具有的确切功能。引用规范：

> 由于跟踪路径的算法是如何定义的，因此一次笔划操作中路径的重叠部分被视为它们的并集是绘制的。

您可以[在此处阅读更多相关信息。](http://www.whatwg.org/specs/web-apps/current-work/multipage/the-canvas-element.html#trace-a-path)

无论如何，本质上，你想要的是一条模糊的路径，只有你可以划过一次的弧线，你会完美地得到你想要的效果。

唯一的问题是无法在画布中制作模糊路径。或者几乎没有办法。

除了使用路径本身，我们可以使用*路径的阴影*来模拟遵循与路径相同的规则的模糊圆圈。

那么，唯一的问题是你不想看到实际的路径，你只想看到它的影子。使描边透明不起作用：阴影只会绘制不会以比它正在阴影的东西更高的不透明度绘制。

但是阴影确实具有 和 的属性`shadowOffsetX`，`shadowOffsetY`它们通常用于将阴影移动一个或两个像素以产生光源的错觉。

但是，如果我们将阴影画得太远以至于您看不到它们怎么办？或者更确切地说，如果我们把*路径*画得很远以至于你看不到它们，你能看到的只有阴影吗？

好吧，这恰好可以解决问题。这是一个快速的结果，您的原始代码在顶部，阴影是第二个画布：

![在此处输入图像描述](../Images/04ddb410f80ee88d39f6553c2da01a78.png)

就渐变和大小而言，它并不完全是您以前所拥有的，但它非常接近，我相信通过摆弄这些值，您可以让它更接近。一些console.log 确认我们想要的东西，一个不超过124（255 个）的alpha 正确地出现在它曾经是143 和134 的地方以旧方式进行。

查看实际代码的小提琴：http: [//jsfiddle.net/g54Mz/](http://jsfiddle.net/g54Mz/)

所以你有它。`imageData`如果您使用阴影并将实际路径偏移太多以至于它们不在屏幕上，则可以获得两个径向渐变的联合效果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-22T02:04:05.203

我正在开发一个基于 HTML5 的游戏，我想在其中混合在网格中数百个方形单元格上绘制的不同颜色的半圆形区域。效果类似于热图。经过一番研究，我发现了上面由 Simon Sarris 记录的“阴影”技术。

实施这项技术提供了我想要的外观。我喜欢它很容易理解。然而，在实践中，我发现与我之前绘制数千个填充矩形的技术（但没有吸引力）相比，即使渲染几个（~150）阴影也要慢得多。

所以我决定做一些分析。我编写了一些基本的 JavaScript（其修改版本可以在[https://jsfiddle.net/Flatfingers/4vd22rgg/](https://jsfiddle.net/Flatfingers/4vd22rgg/)看到）将五种不同形状类型中的每一种绘制 2000 个副本到 1250x600 画布的非重叠部分，记录在五个主要桌面浏览器和移动 Safari 的最新版本中，这五个操作中的每一个的经过时间。（抱歉，桌面 Safari。我也没有手边的 Android 来测试。）然后我尝试了不同的效果组合并记录了经过的时间。

这是我如何绘制两个渐变的简化示例，其外观类似于阴影填充弧：

```
var gradient1 = context.createRadialGradient(75,100,2,75,100,80);
gradient1.addColorStop(0,"yellow");
gradient1.addColorStop(1,"black");

var gradient2 = context.createRadialGradient(125,100,2,125,100,80);
gradient2.addColorStop(0,"blue");
gradient2.addColorStop(1,"black");

context.beginPath();
context.globalCompositeOperation = "lighter";
context.globalAlpha = 0.5;
context.fillStyle = gradient1;
context.fillRect(0,0,200,200);
context.fillStyle = gradient2;
context.fillRect(0,0,200,200);
context.globalAlpha = 1.0;
context.closePath(); 
```

**时间安排**

（2000 个不重叠的形状，设置 globalAlpha，drawImage() 用于渐变，但不用于阴影）

```
IE 11 (64-bit Windows 10)
 Rects     =   4 ms
 Arcs      =  35 ms
 Gradients =  57 ms
 Images    =   8 ms
 Shadows   = 160 ms

Edge (64-bit Windows 10)
 Rects     =   3 ms
 Arcs      =  47 ms
 Gradients =  52 ms
 Images    =   7 ms
 Shadows   = 171 ms

Chrome 48 (64-bit Windows 10)
 Rects     =   4 ms
 Arcs      =  10 ms
 Gradients =   8 ms
 Images    =   8 ms
 Shadows   = 203 ms

Firefox 44 (64-bit Windows 10)
 Rects     =   4 ms
 Arcs      =  21 ms
 Gradients =   7 ms
 Images    =   8 ms
 Shadows   = 468 ms

Opera 34 (64-bit Windows 10)
 Rects     =   4 ms
 Arcs      =   9 ms
 Gradients =   8 ms
 Images    =   8 ms
 Shadows   = 202 ms

Mobile Safari (iPhone5, iOS 9)
 Rects     =  12 ms
 Arcs      =  31 ms
 Gradients =  67 ms
 Images    =  82 ms
 Shadows   =  32 ms 
```

**观察结果**

1.  在填充形状中，填充矩形始终是所有浏览器和测试环境中最快的操作。
2.  在 IE 11 和 Edge 中，填充的完整圆弧（圆形）比填充的矩形慢约 10 倍，而在其他主要浏览器中则慢约 3.5 倍。
3.  在 IE 11、Chrome 48 和 Opera 34 中，渐变大约比矩形慢 3 倍，但在 Firefox 44 中慢了 100 倍（参见[Bugzilla 报告 728453](https://bugzilla.mozilla.org/show_bug.cgi?id=728453)）。
4.  在所有桌面浏览器中，通过 drawImage() 生成的图像大约是填充矩形的 1.5 倍。
5.  阴影填充弧是最慢的，从 IE、Edge、Chrome 和 Opera 中的填充矩形慢约 50 倍到 Firefox 中的 100 倍慢。
6.  Chrome 48 和 Opera 34 在除阴影填充弧外的所有形状类别中都非常快速，但它们并不比那里的其他浏览器差。
7.  当 drawImage() 绘制 1000 个形状时，Chrome 和 Opera 崩溃，其中 shadowOffsetX 或 shadowOffsetY 的值超出了物理屏幕分辨率。
8.  IE 11 和 Edge 绘制弧线和渐变的速度比其他桌面浏览器慢。
9.  drawImage() 在移动 Safari 上运行缓慢。实际上，绘制多个渐变和阴影弧线比使用 drawImage() 绘制一个副本多次要快。
10.  在 Firefox 中绘图对先前的操作很敏感：绘制阴影和渐变会使绘制弧线变慢。显示最快的时间。
11.  Mobile Safari 中的绘图对先前的操作很敏感：阴影使渐变变慢；渐变和弧线使 drawImage() 甚至比通常更慢。显示最快的时间。

**分析**

虽然 shadowOffset 功能是一种简单且视觉上有效的混合形状的方法，但它比所有其他技术慢得多。这限制了它对只需要绘制少量阴影并且不需要快速重复绘制很多阴影的应用程序的有用性。此外，当使用 drawImage() 加速时，给 shadowOffsetX 或 shadowOffsetY 一个大于大约 3000 的值会导致 Chrome 48 和 Opera 34 挂起近一分钟，消耗 CPU 周期，然后使我的 nVidia 显示驱动程序崩溃，即使在更新它之后也是如此到最新版本。（谷歌搜索没有发现 Chromium 的错误报告描述了当一个大的 shadowOffset 和 drawImage() 一起使用时这个错误。）

对于需要混合模糊形状的应用程序，与阴影最相似的视觉方法是将 globalCompositeOperation 设置为“更轻”并使用带有 globalAlpha 值的 drawImage() 重复绘制预先绘制的径向渐变，或者在需要时绘制单独的渐变是不同的颜色。这不是重叠阴影的完美匹配，但它很接近并且避免了按像素计算。（但是，请注意，在移动 Safari 中，直接绘制阴影填充弧实际上比渐变和 drawImage() 更快。）虽然将 globalCompositeOperation 设置为“lighter”，但使用径向渐变会导致 IE 11 和 Edge 在绘制弧时慢约 10 倍仍然比在所有主要桌面浏览器中使用阴影填充弧更快，

**结论**

如果您唯一的目标平台是 iPad/iPhone，那么获得漂亮混合形状的最快方法是阴影填充弧。否则，到目前为止，我发现在所有主要桌面浏览器中都可以使用的具有可比外观的最快方法是绘制径向渐变，并将 globalCompositeOperation 设置为“更轻”并使用 globalAlpha 控制不透明度。

**注意：**在我执行的绘图测试中，有一些明显的方法可以提高性能。特别是，将每个形状的每个实例都绘制到屏幕外缓冲区，然后将整个缓冲区绘制到可见画布上一次，这将产生显着的性能改进。但这会否定此测试的目标，即比较在可见画布上绘制不同类型形状的相对速度。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-16T09:52:44.630

这个小提琴[http://jsfiddle.net/2qQLz/](http://jsfiddle.net/2qQLz/)试图提供一个解决方案。如果它接近您的需要，则可以进一步开发。它将渐变填充限制为一个边界矩形，该矩形的一侧是“圆圈”的相交线。对于位于水平线上的两个相同半径的“圆”，很容易找到“圆”交点的 x 值，并为每个“圆”绘制渐变填充的边界矩形。

两个任意的“圆”会更困难，但仍然可以找到相交线，并且仍然可以为每个“圆”绘制一个边界矩形。随着更多“圆圈”的添加，它会变得越来越复杂。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-12T12:46:30.607

[复合模式](https://developer.mozilla.org/samples/canvas-tutorial/6_1_canvas_composite.html)与您找到的一样。[据我所知，如果不手动设置像素](https://stackoverflow.com/questions/4899799/whats-the-best-way-to-set-a-single-pixel-in-an-html5-canvas)，您无法合成比这更好的。如果您通过明确描述您想要如何混合像素来更新您的问题，我将相应地更新我的答案。

那么每像素解决方案是什么？

我可以看到有两种主要的基于像素的方法可以开始解决这个问题

1.  绘制到隐藏的上下文并与手动功能混合

2.  编写一个手动计算梯度并应用自定义混合函数的函数。

你的第一个选项比第二个选项更通用，因为你可以使用普通的画布方法绘制任何你喜欢的东西，然后将这个画布混合到你的可见画布上。有关如何将一个上下文混合到另一个上下文的好主意，请参阅@Phrogz[上下文混合器项目](https://github.com/Phrogz/context-blender)

当您需要以默认情况下画布不方便的方式进行绘制时，第二个选项是必需的。

最大的困难是 alpha 透明度，因为你可以在径向渐变后面有内容。在背景图像上绘制后，几乎不可能看到在其顶部绘制之前的内容，除非您保留该背景的副本。即使在每个像素的基础上，您也会遇到困难：**将图像混合到另一个图像的顶部是行不通的**。

从本质上讲，这意味着在可见画布上合成多个半透明渐变的图像，无论您选择通用合成功能如何，除非该画布一开始就具有透明背景，否则将无法正常工作。

本着选项 1 的精神，您可以创建一个空白上下文并在其上渲染多个渐变。然后在上面渲染它。

并且本着选项 2 的精神，如果您能够在渲染之前定义**所有**点，您可以在一次通过中从这些点计算图像和混合。

将一次性渲染技术与背景上下文相结合，将允许您在可见画布顶部绘制轮廓，而无需手动读取单个像素，仅写入像素。

远不及我所知道的优雅，但这可能是在 2D 画布上实现我所说的 alpha 混合轮廓效果的唯一真正方法。

* * *

我认为您需要的每像素混合功能会从源和目标中选择具有最大 alpha 值的像素。

```
if (src.a <= dst.a) {
    result = dst;
} else {
    result = src;
} 
```

# c# - 如何解决：在网格应用程序的样式中找不到可附加属性触发器

> ID：10060243
> 
> 赞同：1
> 
> 时间：2012-04-08T03:49:48.207
> 
> 标签：c#, xaml, windows-8, microsoft-metro, datatrigger

我在 Windows8 中使用 Visual Studio 11。在网格应用程序（Metro）中设置数据触发器在 XAML 中显示了这个错误：

> 在样式中找不到可附加属性触发器

```
<Image Stretch="UniformToFill">
     <Image.Style>
         <Style TargetType="Image">
             <Setter Property="Source" Value="{Binding Image}"/>
             <Style.Triggers>
                 <DataTrigger Binding="{Binding Image}" Value="{x:Null}">
                     <Setter Property="Source" Value="Images/Default.png"/>
                 </DataTrigger>
             </Style.Triggers>
         </Style>
    </Image.Style>
</Image> 
```

为什么要给我看这个？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T05:00:25.493

[Windows 8 Metro 风格应用不支持](http://social.msdn.microsoft.com/Forums/en-GB/winappswithcsharp/thread/77604041-b991-4f1e-9adb-78c701ac4d9a)触发器。我建议您编写一个[转换器](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.ivalueconverter.aspx)，将空值替换为默认值。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-12T19:27:42.660

您可以在 Windows 8 中使用 VisualState 而不是 object.Triggers 这是代码

```
 <ControlTemplate TargetType="Button">
<VisualStateGroup.Transitions>

  <!--Take one half second to transition to the PointerOver state.-->
  <VisualTransition To="PointerOver" 
                      GeneratedDuration="0:0:0.5"/>
</VisualStateGroup.Transitions>

<VisualState x:Name="Normal" />

<VisualState x:Name="PointerOver">
<Storyboard> 
<ColorAnimation Storyboard.TargetName="ButtonBrush" 
Storyboard.TargetProperty="Color" To="Red" />
 </Storyboard> 
</VisualState> 
</VisualStateGroup>
</VisualStateManager.VisualStateGroups> 
  <Grid.Background>
<SolidColorBrush x:Name="ButtonBrush" Color="Green"/>
 </Grid.Background>
</Grid>
 </ControlTemplate> 
```

# scala - protected[session] 在 Scala 中是什么意思？

> ID：10060247
> 
> 赞同：1
> 
> 时间：2012-04-08T03:50:17.273
> 
> 标签：scala, protected

浏览[ScalaQuery](http://scalaquery.org/)源代码时，我发现了这样的声明（实际上有很多）：

```
private[session] val dyn = new DynamicVariable[Session](null) 
```

和

```
def forDataSource(ds: DataSource): Database = new Database {
  protected[session] def createConnection(): Connection = ds.getConnection
} 
```

那是什么`[session]`意思？而且我认为在函数内部定义的函数不能`protected`......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T05:15:42.317

但`createConnection`不是 inside `forDataSource`，它在里面`Database`-- 看到`new Database {`上一行的？

这意味着范围内的所有内容`session`（可能是类、对象或包——我不知道）都可以看到该定义，以及扩展的类`Database`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T20:54:14.313

`private[<scope>]`修饰符的意思是“私有的*范围*”，即只有属于（包或类）*范围*的类才能访问该成员。

`protected[<scope>]`意味着只有扩展此类**并**属于该*范围*的类才能访问该成员。

除此之外，还有`private[this]`，这意味着该成员仅在类的具体实例中可见。

# java - JPanel 不需要的位置和/或大小

> ID：10060252
> 
> 赞同：1
> 
> 时间：2012-04-08T03:51:18.353
> 
> 标签：java, swing, size, border, jpanel

我正在创建一个程序，其中有三个 JPanel - 屏幕上半部分有 2 个，下半部分有 1 个。下面是这样定位它们的代码：
`people.setBounds(0, 0, Math.round(getWidth() / 3), Math.round(getHeight() / 2));`
`resources.setBounds(people.getX() + people.getWidth(), 0, Math.round(getWidth() / 3), Math.round(getHeight() / 2));`
`neighboring.setBounds(resources.getX() + resources.getWidth(), 0, Math.round(getWidth() / 3), Math.round(getHeight() / 2));`
但不幸的是，这是我得到的结果：![在此处输入图像描述](../Images/95e7c59621e9eec2b8f0d49aec0c226a.png)
我试图让面板完美地适合窗口，但正如你所看到的，它们比预期的要大一些。请帮忙？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T03:53:06.987

使用布局管理器，而不是 setBounds，让布局为您完成工作。通过嵌套一些使用简单 GridLayout 的 JPanel，可以用最少的代码创建您的 GUI。有关这方面的更多信息，请查看[课程：在容器中布置组件](http://docs.oracle.com/javase/tutorial/uiswing/layout/index.html)

# mysql - mysql 根据行名选择/创建唯一ID

> ID：10060260
> 
> 赞同：0
> 
> 时间：2012-04-08T03:54:25.073
> 
> 标签：mysql, select

这是我的数据库表。我如何能够从数据库表中选择底部表？

是否可以从唯一的名称和类型创建 NameID 和 TypeID？

编辑---我已经有了使用案例的类型，因为只有 3 种类型。

```
SELECT 
  name, type, spending, 
    CASE type 
       WHEN 'Credit Card' THEN 1 
       WHEN 'Cash' THEN 2 
       WHEN 'Cheque' THEN 3 
    END AS typeID_  
FROM spendtable 
```

是否可以在名称列上做同样的事情？

谢谢！

----数据库表----

> 姓名 类型 消费
> John Credit Card 550
> Brian Cash 200
> Frank Check 600
> John Cash 150
> John Cash 300
> Frank Credit Card 200

----需要桌子----

> NameID 名称 TypeID 类型 支出
> 1 John 1 信用卡 550
> 2 Brian 2 Cash 200
> 3 Frank 3 Check 600
> 1 John 2 Cash 150
> 1 John 2 Cash 300
> 3 Frank 1 信用卡 200

- - - -编辑

我最终使用 2 个查询和 php 来获取所需的表

```
 function getInfo(){   
     SELECT 
       name, type, spending, 
         CASE type 
            WHEN 'Credit Card' THEN 1 
            WHEN 'Cash' THEN 2 
            WHEN 'Cheque' THEN 3 
         END AS typeID_  
     FROM spendtable 
 }

 function getName(){   
       SELECT name    
       FROM spendtable   
       GROUP BY share_ ASC           
 }

$info_array = $this->getInfo(); 
$name_array = $this->getName(); 

 for($i=0; $i<count($info_array); $i++){   
   $info_array[$i]['nameID'] = '';   
     for($j=0; $j<count($name_array); $j++){
     if($info_array[$i]['nameID'] == $name_array[$j]){
       $info_array[$i]['nameID'] = $j;
     }   
   }         
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:25:22.260

我能够扩展您现有的查询以支持该`NameID`列：

```
SELECT 
  name, type, spending, 
    CASE type 
       WHEN 'Credit Card' THEN 1 
       WHEN 'Cash' THEN 2 
       WHEN 'Cheque' THEN 3 
    END AS TypeID, 
    CASE name 
       WHEN 'John' THEN 1 
       WHEN 'Brian' THEN 2 
       WHEN 'Frank' THEN 3 
    END AS NameID
FROM spendtable 
```

作为设计限制，存储在数据库中的人只允许命名为 John、Brian 或 Frank :)

认真起来，假设可能存在未知数量的名称，我不确定您是否可以（或想要）在查询中进行这种处理。相反，请考虑维护一个单独的`Name`表来跟踪唯一名称：

```
NameID   Name
1        John
2        Brian
3        Frank 
```

然后您的查询可以加入此表：

```
SELECT 
  s.name, s.type, s.spending, 
    CASE s.type 
       WHEN 'Credit Card' THEN 1 
       WHEN 'Cash' THEN 2 
       WHEN 'Cheque' THEN 3 
    END AS TypeID, 
    n.nameid
FROM spendtable s
JOIN Name n on n.name = s.name 
```

当然，这意味着您需要使`Name`表格保持最新，确保为新名称插入行。

# java - 如何让 Java 使用我的安全提供程序？

> ID：10060261
> 
> 赞同：17
> 
> 时间：2012-04-08T03:54:25.587
> 
> 标签：java, security

我为 AES/CBC/PKCS5Padding 编写了一个自定义安全提供程序。这很好用。

`Provider`为了让 Java 将其识别为上述算法的有效提供程序，我需要添加哪些设置？我已经有了

```
public class FooBarProvider extends Provider {
  public FooBarProvider() {
    super("FooBar", 1.0, "Provider for AES.");
    put("Cipher.AES", "foo.bar.AESCipher");
  }
} 
```

后一个参数是实际`CipherSpi`工作的参数。我在哪里注册它支持 CBC 和 PKCS5Padding 的事实？目前要求相关`Cipher`不返回我的类的实例：

```
Security.insertProviderAt(new FooBarProvider(), 1);
Cipher cip = Cipher.getInstance("AES/CBC/PKCS5Padding");
System.out.println(cip.getProvider()); //prints "SunJCE version 1.7" 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T07:01:58.500

编写代码是该过程中最简单的部分。您已经声明您的类为 AES 提供了 Cipher 实现。这一行：

```
put("Cipher.AES", "foo.bar.AESCipher"); 
```

几乎是完成任务所需的一切。另请注意，您的实现将自动为*mode*和*padding*的所有组合调用，因为您已在算法级别注册密码实现。

Having said that, writing the code was the easy part. You are creating a cipher, so you will need to sign your JAR before it can be installed and configured as a provider. Because the process is somewhat involved I will not copy it all here, rather I will refer you to the [Oracle Guide on How to implement a Provider](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/HowToImplAProvider.html#Step4). It's an excellent source for this task.

If you follow the guide and still have issues, you may need to download and install the [JCE Unlimited Strength Policy](http://www.oracle.com/technetwork/java/javase/downloads/jce-6-download-429243.html) appropriate to your installed JDK.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T04:34:30.030

Java Crypto 文档描述了注册`Provider`类的机制：

*   [http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html#Provider](http://docs.oracle.com/javase/6/docs/technotes/guides/security/crypto/CryptoSpec.html#Provider)

简短的版本是：

1.  将提供程序 JAR 放在类路径或 Java 安装的扩展目录中。
2.  注册提供者：
    *   手动将详细信息编辑到`java.security`配置文件 ( `$JAVA_HOME/lib/security/java.security`) 中，或者
    *   在运行时，调用`Security.addProvider`或`Security.insertProviderAt`.

# emacs - 使 Alt_R 成为 Alt (A-) 修饰键（而不是 Meta (M-) 修饰键）

> ID：10060262
> 
> 赞同：8
> 
> 时间：2012-04-08T03:54:54.663
> 
> 标签：emacs, x11, xmodmap

我想设置`Alt_L`为**META**（即 emacs 中的 M- ）但设置`Alt_R`为**ALT**。我如何修改`.Xmodmap`和/或`.emacs`实现这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T09:24:08.287

下面是我的`.Xmodmap`。它并没有完全实现您的规范，但应该让您了解如何实现它。在您的情况下，只有 Sec-2 需要修改；假设您的键盘与我的键盘相似，则本节中您只需要 1 行：`keycode 108 = Alt_R`，因为`Alt_L`已被`Meta_L`X-server 识别为。

这是我的`.Xmodmap`，它使 Emacs 识别的所有修饰符都可用（Alt、Meta、Super、Hyper、Control、Shift）：

```
!!! Implement the following layout:
!!!     Alt  A S D F ...
!!!     Shift Z     X    C V B N M ...
!!!     Hyper Super Meta --Space-- Control Super Hyper

!!! by transforming from the conventional layout:
!!!     Caps:66
!!!     Shift
!!!     Ctrl:37 Win:133 Alt:64 Space AltGr:108 Menu:135 Ctrl:105

!! Sec-1.
clear Control
clear Lock
clear mod1
clear mod2
clear mod3
clear mod4
clear mod5

!! Sec-2\. System dependent; use xev to find the exact keycodes:
keycode  37 = Hyper_L
keycode  64 = Meta_L
keycode  66 = Alt_L
keycode 105 = Hyper_R
keycode 108 = Control_R
keycode 135 = Super_R

!! Sec-3.
add Control = Control_L Control_R
add mod1 = Meta_L Meta_R
add mod2 = Hyper_L Hyper_R
add mod3 = Num_Lock
add mod4 = Alt_L Alt_R Multi_key
add mod5 = Super_L Super_R Mode_switch 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T20:03:06.493

这是我当前的 .xmodmaprc，它可能需要一些工作，但说明了如何使用不同的修饰符更改特定的键（使用 ksysym 关键字）。我关闭了 cedilla（西班牙语键盘）并在其中放置了一个斜杠/反斜杠等。

```
pointer = 3 2 1 4 5 6 7 8 9 10

clear Mod4
remove Lock = Caps_Lock
remove Control = Control_L
remove Mod5 = ISO_Level3_Shift

keysym ccedilla = slash backslash NoSymbol NoSymbol braceright
keysym 3 = 3 numbersign NoSymbol NoSymbol periodcentered
keysym 1 = 1 exclam NoSymbol NoSymbol masculine

keysym 0xba = bar
! the next one is neccesary becuase the above command
! modifies the m key too!
keysym 0x6d = m

keysym Control_L = Super_L
keysym Caps_Lock = Control_L
keysym ISO_Level3_Shift = Hyper_L
keysym Super_L = ISO_Level3_Shift

add Lock = Caps_Lock
add Control = Control_L
add Mod4 = Super_L
add Mod4 = Super_R
add Mod3 = Hyper_L
add Mod3 = Hyper_R
add Mod5 = ISO_Level3_Shift 
```

# node.js - Sequelize：如何从现有数据库中导入定义

> ID：10060265
> 
> 赞同：56
> 
> 时间：2012-04-08T03:55:46.370
> 
> 标签：node.js, sequelize.js

即使我正在使用现有数据库，我是否需要手写 Sequelize 的模型定义。

如果不需要，那么如何将 Sequelize 与现有数据库一起使用？

我已经在 Doctrine 中定义了数据库的模式，所以我宁愿不必再次编写另一组模型定义。

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2014-09-22T21:52:18.360

该项目旨在从现有模式[https://github.com/sequelize/sequelize-auto创建 Sequelize 模型](https://github.com/sequelize/sequelize-auto)

## 续集-自动

`SequelizeJS`通过命令行自动生成模型的工具。

## 安装：

```
npm install -g sequelize-auto 
```

## 用法：

```
sequelize-auto -h <host> -d <database> -u <user> -x [password] -p [port]  --dialect [dialect] -c [/path/to/config] -o [/path/to/models] 
```

## 选项：

```
 -h, --host      IP/Hostname for the database.                                      [required]
  -d, --database  Database name.                                                     [required]
  -u, --user      Username for database.                                             [required]
  -x, --pass      Password for database.
  -p, --port      Port number for database.
  -c, --config    JSON file for sending additional options to the Sequelize object.
  -o, --output    What directory to place the models.
  -e, --dialect   The dialect/engine that you're using: postgres, mysql, sqlite 
```

**例子**

```
sequelize-auto -o "./models" -d sequelize_auto_test -h localhost -u daniel -p 5432 -x my_password -e postgres 
```

生成一个文件/文件，**`./models/Users.js`**如下所示：

```
/* jshint indent: 2 */

module.exports = function(sequelize, DataTypes) {
  return sequelize.define('Users', {
    username: {
      type: DataTypes.STRING,
      allowNull: true,
      defaultValue: null
    },
    touchedAt: {
      type: DataTypes.DATE,
      allowNull: true,
      defaultValue: null
    },
    aNumber: {
      type: DataTypes.INTEGER,
      allowNull: true,
      defaultValue: null
    },
    id: {
      type: DataTypes.INTEGER,
      primaryKey: true
    },
    createdAt: {
      type: DataTypes.DATE,
      allowNull: false,
      defaultValue: null
    },
    updatedAt: {
      type: DataTypes.DATE,
      allowNull: false,
      defaultValue: null
    }
  });
}; 
```

这使您可以轻松简单地完成**`Sequelize.import`**它。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-04-08T09:27:11.453

使用 Sequelize，您必须在代码中定义模型的结构。这样做，Sequelize 假定特定的数据库模式，除非某些内容被覆盖。简而言之：不，sequelize 不能镜像数据库。

希望有帮助:)

# android - Android：广播演示不起作用

> ID：10060270
> 
> 赞同：0
> 
> 时间：2012-04-08T03:57:47.643
> 
> 标签：android, android-intent, android-emulator

我是 android 新手，我正在尝试广播演示，我尽我最大的努力阅读了文档，但它不起作用。请看一下我的代码：

**BroadcastDemoActivity.java**

```
package com.broadcastdemo;
import android.app.Activity;
import android.content.Intent;
import android.os.Bundle;

public class BroadcastDemoActivity extends Activity {
    /** Called when the activity is first created. */
    public static final String PUBLIC_HOLIDAYS = "com.paad.action.PUBLIC_HOLIDAYS";
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        Intent intent = new Intent(PUBLIC_HOLIDAYS);
        intent.putExtra("Holiday", "8th April is a holiday");
        sendBroadcast(getIntent());
    }
} 
```

**接收.java**

```
package com.broadcastdemo;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.widget.Toast;

public class Receive extends BroadcastReceiver {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        String message = intent.getStringExtra("Holiday");
        Toast.makeText(context, message, Toast.LENGTH_SHORT).show();

    }

} 
```

**清单.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.broadcastdemo"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="15" />

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name" >
        <activity
            android:name=".BroadcastDemoActivity"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <receiver android:name=".Receive">
            <intent-filter>               
                <action android:name="com.paad.action.PUBLIC_HOLIDAYS"/>
            </intent-filter>            
        </receiver>
    </application>
</manifest> 
```

我知道我遗漏了一些我不知道的东西，请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T04:08:22.593

我相信您的问题在于对 sendBroadcast 的调用。

```
 Intent intent = new Intent(PUBLIC_HOLIDAYS);
    intent.putExtra("Holiday", "8th April is a holiday");
    sendBroadcast(getIntent()); 
```

您不是在发送您构建的意图，而是在发送从 getIntent() 返回的意图，这将是活动开始时的意图。

它应该是

```
 Intent intent = new Intent(PUBLIC_HOLIDAYS);
    intent.putExtra("Holiday", "8th April is a holiday");
    sendBroadcast(intent); 
```

# php - 如何识别用户更新后的时间？

> ID：10060271
> 
> 赞同：1
> 
> 时间：2012-04-08T03:58:00.260
> 
> 标签：php, mysql, time, timestamp

如何确定用户在我的 MySQL 数据库中更新他的帐户后经过的时间？我的 MySQL 表中有一个时间戳（用于存储用户更新时间），那么现在如何使用 PHP 识别上次用户更新所经过的时间？

例如：

> 用户最后更新时间：2012-04-08 00:20:00；
> 
> 现在：2012-04-08 00:40:00；
> 
> 自上次更新以来经过的时间：20（分钟）←我需要使用 PHP

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T04:18:26.357

如果你有数据

```
$last_update_time = '2012-04-08 00:20:00';
$now = time(); //this gets you the seconds since epoch 
```

你可以做

```
$last_update_since_epoch = strtotime($last_update_time); //this converts the string to the seconds since epoch 
```

aand...现在，因为您对这两个变量都有几秒钟的时间

```
$seconds_passed = $now - $last_update_since_epoch; 
```

现在，您可以`$seconds_passed / 60`获取自上次更新以来经过的分钟数。

希望这可以帮助 ;）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T04:18:22.920

在伪代码中：

```
$get_user_time = mysql_query("SELECT timestamp FROM table");
$row = mysql_fetch_array($get_user_time);
$user_time = $row['timestamp'];  //This is the last update time for the user

$now_unformatted = date('m/d/Y h:i:s a', time());
$now = date("m/d/y g:i A", $now_unformatted); // This is the current time

$difference = $now->diff($user_time); // This is the difference

echo $difference; 
```

>= PHP 5.3 支持[diff() 。](http://au.php.net/manual/en/datetime.diff.php)否则你可以这样做：

```
$difference = time() - $user_time; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T04:17:23.360

```
$secs=time()-strtotime($timestamp); 
```

会在更新之前给你秒数，然后你可以将这个秒数转换成你需要的时间格式，比如 `echo $secs/60." minutes ago";`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T04:17:59.367

为什么不用 mysql 来做：

```
select TIMEDIFF(NOW(),db_timestamp) as time_past 
```

# jquery - 将事件处理程序附加到谷歌地图信息气泡内的元素

> ID：10060275
> 
> 赞同：5
> 
> 时间：2012-04-08T04:00:49.457
> 
> 标签：jquery, google-maps-api-3, google-maps-markers

我有一个关于谷歌地图和事件处理/监听的问题。

使用 jQuery 和谷歌地图 v3，我可以放置一个地图标记和一个事件侦听器，当用户单击标记时，它会打开一个信息气泡。我想做的（但到目前为止还没有弄清楚）是将另一个事件处理程序添加到信息气泡的内容中。例如，如果用户单击地图标记打开信息气泡（该部分有效），然后如果他们单击信息气泡内的某些内容，则执行其他操作。我已经在下面粘贴了我的代码，在此先感谢您的帮助

```
function addMarker(data) {
    var myLatlng = new google.maps.LatLng(data.Latitude, data.Longitude);
    var title = data.title? data.title: "";
    var icon = $('#siteUrl').val() + 'img/locate.png';

var bubbleContentString = "<span class=\"bubble-details-button\">Get Details about " + title+ "</span>";

myInfoBubble = new InfoBubble({
    content: bubbleContentString,
    hideCloseButton: true,        
    backgroundColor: '#004475',
    borderColor: '#004475'
});

var myMarker =  new google.maps.Marker({
        position: myLatlng,
        map: map,
        title: title,
        icon: icon
    });    
addListenerToMarker(myMarker, myInfoBubble);
markerSet.push(myMarker, myInfoBubble);    
}
function addListenerToMarker(marker, bubble){
    console.log($(bubble.getContent()).find('.bubble-details-button')[0]);
    google.maps.event.addListener(marker, 'click', function() { 
        if (!bubble.isOpen()) {  
            google.maps.event.addListenerOnce(bubble, 'domready', function(){ 
                console.log($(bubble.getContent()).find('.bubble-details-button')[0]);
                google.maps.event.addDomListener($(bubble.getContent()).find('.bubble-details-button')[0], 'click', function(){ 
                    alert("hi"); 
                }); 
            });
            bubble.open(map, marker); 
        }     
    });
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T17:20:16.170

您正在尝试`"click"`在元素上添加事件，但事实并非如此`DOM Element`。`$('.bubble-details-button')`不是`DOM Element`（它是 的包装器`DOM Element`），而是`$('.bubble-details-button')[0]`。

另一方面，当您尝试添加`"click"`事件时，尚未创建内容。您可以使用内容的元素（例如添加事件），只有当它们已经创建时。将`InfoBubble`触发`"domready"`事件，当它的内容将被创建时。所以你需要处理它：

```
 if (!bubble.isOpen()) {
    google.maps.event.addListenerOnce(bubble, 'domready', function(){
        google.maps.event.addDomListener($(bubble.getContent()).find('.bubble-details-button')[0], 'click', function(){
            alert("hi");
        });
    });
    bubble.open(map, mymarker);        
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T18:32:16.847

在我必须执行您所描述的情况下，我会直接在 InfoBubble 内容中包含一个 JavaScript 函数调用。我经常在 InfoBubble 中包含超链接，所以在这种情况下，我会执行以下操作： 1 - 编写一个 JavaScript 函数来处理超链接点击。2 - 创建标记。3 - 将单击事件处理程序附加到打开 InfoBubble 的标记。4 - 定义 InfoBubble 的内容，以便将直接嵌入在 InfoBubble 内容中的 JavaScript 设置为通过调用在步骤 #1 中定义的 JavaScript 函数来处理点击事件 - 类似于：

```
"<span>" +
     "<a href='javascript:showDetail(" + param1 + "," + param2 + ");'>" + 
      displayTextContent + "</a>" +
"</span>" 
```

# c# - 在位数组中拆分字节数组

> ID：10060276
> 
> 赞同：2
> 
> 时间：2012-04-08T04:01:05.863
> 
> 标签：c#, bytearray, bit-manipulation

我有一个长度为 64 的字节数组。我有这个字节数组中的数据对应的顺序列表。这个列表告诉我每个值的大小（以位为单位）。大多数值是 8 位或 16 位，这很容易解析出来。但是，大约在列表的中途，我开始获得 12 位或 5 位的长度。遍历这些并取出我需要的位的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:19:54.943

以下代码应从存储*为*`uint[]`. 我还没有测试过，所以*请注意讲师*。

```
uint GetBits(uint[] data, ref uint pos, uint n) {
    uint a = pos/32;
    uint off = pos%32;
    uint mask = (1 << n) - 1;
    pos += n;
    return (data[a] << off)&mask | (data[a + 1] >> (32 - off))&mask;
} 
```

请注意，它假定小端存储，因此未对齐的值从一个字的高位流到下一个字的低位。

# .net - IIS7 上 ASMX Web 服务的性能调整和优化

> ID：10060277
> 
> 赞同：1
> 
> 时间：2012-04-08T04:01:07.577
> 
> 标签：.net, performance, web-services, iis-7

我的环境是：Windows Server 2008、SQL Server 2008、IIS 7、.NET 4.0 和 .ASMX Web 服务。

我目前只是将 IIS 7 上的所有默认设置用于 ASMX Web 服务站点。但我认为可能会有一些**调整和优化**，可能会进一步提高其性能。

我在 MSDN 上找到[了这篇文章。](http://msdn.microsoft.com/en-us/library/ff647786.aspx)只是不确定它是否也适用于 IIS 7。那么关于 IIS 7 设置和配置，我需要在这里做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:19:21.110

IIS 7 的两个主要性能特性是

*   压缩

*   输出缓存

> “IIS 7 通过将 ASP.NET 的动态输出缓存功能与 IIS 6.0 中存在的静态输出缓存功能集成在一起，为输出缓存提供了强大、统一的工具。IIS 还允许您通过使用Gzip 和 Deflate 等常见的压缩机制”

*   [在 IIS 7 中配置 HTTP 压缩](http://technet.microsoft.com/en-us/library/cc771003%28v=ws.10%29.aspx)

> IIS 提供以下压缩选项： - 仅静态文件 - 仅动态应用程序响应 - 静态文件和动态应用程序响应

*   [在 IIS 7 中配置输出缓存](http://technet.microsoft.com/en-us/library/cc732475%28v=ws.10%29.aspx)

> 在 IIS 7 中，您可以配置输出缓存以提高 Web 服务器、站点或应用程序的性能。当用户请求一个网页时，IIS 处理该请求并将一个页面返回给客户端浏览器。如果您启用输出缓存，则该已处理网页的副本将存储在 Web 服务器的内存中，并在对同一资源的后续请求中返回给客户端浏览器。这消除了每次请求页面时重新处理页面的要求。当您的内容依赖于外部程序进行处理（例如使用通用网关接口 (CGI) 程序）或包含来自外部源（例如来自远程共享或数据库）的数据时，这将很有帮助。

# jquery - Jquery 可选择滚动

> ID：10060279
> 
> 赞同：1
> 
> 时间：2012-04-08T04:01:31.790
> 
> 标签：jquery, jquery-ui, select, jquery-plugins, scroll

我在选择滚动时遇到了一个主要问题。票是很久以前提交给Jquery UI的，我认为它没有得到解决。

我在滚动可选 div 上有许多可选项目。如果我开始选择，然后向上滚动 20 个像素，则选择框的实际选择区域在可视选择框顶部下方 20 个像素处。基本上，可视可选框随着滚动而移动，但选择区域保持在原来的位置，这会产生差异。

Jquery 错误日志：- [http://bugs.jqueryui.com/ticket/3223](http://bugs.jqueryui.com/ticket/3223)

问题示例（jfiddle）： - [http://jsfiddle.net/bY3pE/5/](http://jsfiddle.net/bY3pE/5/)

几个星期前，我遇到了同样的问题，我在这里找到了一篇关于 stackoverflow 的帖子，解决了这个问题。一位回答者提出了一个他编写的插件，该插件允许通过单击第一个来选择“可选”列表，然后单击最后一个进行选择。也可以控制单击以选择非连续项目。

由于我的笔记本电脑崩溃了，我丢失了我正在使用的插件，我花了 2 个多小时在网上搜索它，但没有运气。

有人可以推荐一个我可以用来创建类似功能的插件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-01T00:15:56.137

这就是你要找的： http: [//plugins.jquery.com/ui-selectableScroll/](http://plugins.jquery.com/ui-selectableScroll/)

正如描述所说，它是“一个扩展的 jQuery-ui 可选择滚动功能”。这意味着，使用这个可选择的而不是原始的将你的容器滚动到两个方向。

我也需要它，所以我编码了它，你可以拥有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:40:41.817

我找到了我说的帖子！

对于需要Shift-click功能和滚动选择的人来说，这可能是一个有效的选择。看看下面的帖子。

[在 jQuery UI Selectable 中启用 Shift-Multiselect](https://stackoverflow.com/questions/9374743/enable-shift-multiselect-in-jquery-ui-selectable)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-12T18:42:14.647

或者，@battlehorse 可以很好地[替代 jQuery UI Selectable](http://battlehorse.github.com/jquery-xselectable/)，它支持在选择时滚动。为我节省了几天的工作时间（如果不是几周的话）

# liferay - Liferay - 在 javascript 中获取本地化名称

> ID：10060280
> 
> 赞同：4
> 
> 时间：2012-04-08T04:01:42.273
> 
> 标签：liferay, liferay-6

考虑以下代码

```
function populateLayout(scopeGroupId){
    Liferay.Service.Portal.Layout.getLayouts(
        {
            groupId: scopeGroupId,
            privateLayout: false
        },
        function(layouts){
            for(var i=0;i<layouts.length;i++){
                var layout = layouts[i];
                alert(layout.name);
            }
        }
    );
} 
```

从上面的 Liferay 的 JSON 服务 API 中可以看到，获取所有的布局。我特别需要布局名称来填充选择框中。我知道名称存储为 xml 字符串以支持不同的语言环境。我想知道是否有 javascript api 使用这个 xml 字符串和语言 id 来获取布局的名称。有一个 java api 可以执行以下相同操作。如果有的话，我需要等效的 javascript API。

```
layout.getName(locale) 
```

或者

```
LocalizationUtil.getLocalization(String xml, String languageId) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-18T20:01:59.313

我相信 Liferay 的 JavaScript 库中没有这样的实用程序。

大多数时候人们需要在 Liferay 中做，他们只是在服务器端解析内容，然后将解析后的内容发送给客户端。通常，客户端只需要默认语言环境中的值；如果它需要更多，开发人员会找到一种方法来用 HTML 本身编写它。例如，请参见开发人员编写代码以直接在输出中创建 JS 对象[的`input-localized`标签。](http://tinyurl.com/klwohc6)

这是有道理的：解析 XML 会耗费大量资源，因此人们宁愿在客户端 JavaScript 上避免它。甚至在 Liferay 中可能有一个实用程序可以做到这一点，但我会提出另一种方法：只需询问您想在 JavaScript 中使用什么并将其写入 HTML。例如，不要编写以下*JavaScript*代码

```
var names = Liferay.Util.Localization.nonExistentMethodToGetLocaleMap(layout.name);
for (var locale : names) {
     alert(names[locale]);
} 
```

*在服务器端*决定显示哪些布局并编写以下*JSP*代码：

```
Map<Locale, String> names = layout.getNameMap();

<script>
    <% for (String name : names.values()) { %>
    alert('<%= name %>');
    <% } %>
</script> 
```

不太清楚，我同意，但相当有效。

# objective-c - 基于 xcode 页面的应用程序

> ID：10060281
> 
> 赞同：1
> 
> 时间：2012-04-08T04:01:59.517
> 
> 标签：objective-c, ios, xcode, xcode4, uiviewcontroller

我正在尝试基于 xcode 4 中基于页面的应用程序模板创建一个应用程序，该应用程序具有标题页、目录页和内容页，所有格式都不同。我是 ios 编程新手，完成了 3 个苹果教程并阅读了大量文档，但这基本上是我的第一个非教程应用程序。

我非常感谢显示如何正确执行此操作的代码示例或说明。这个特定的模板似乎没有很多例子。

具体来说：

1.  我创建了一个新的 xcode 项目并选择了基于页面的应用程序模板（我不包括这里的源代码，因为它应该很容易为任何使用 xcode 4 的人生成）
2.  该模板创建了一个 AppDelegate、一个 RootViewController、一个 DataViewController 和一个 ModelController
3.  现在，我不关心显示动态数据。我希望第一页显示一个带有“标题”标签的视图，第二页以及之后显示一个充满 lorem ipsum 的文本区域。
    我在故事板和相应的 ViewController 文件中创建了 TitlePageView 和 ChapterView，但不知道如何将它们绑定到 DataViewController 以便显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-15T01:24:37.057

这就是我最终在每个页面上放置不同视图的方式。

1.  为情节提要中的每个页面创建视图，并让它们与主页没有转场或连接。（你会收到黄色警告）
2.  将每个新视图的“标识符”属性设置为某个唯一的字符串，例如“titlePage”
3.  在 DataViewController 中为名为“contentArea”的默认页面视图的白色大部分创建一个插座
4.  更新 DataViewController 类 viewWillAppear 方法以创建您的页面视图并将它们作为子视图添加到 contentArea：

    ```
    - (void)viewWillAppear:(BOOL)animated
    {
        [super viewWillAppear:animated];

        if (_contentArea.subviews.count == 0)
        {
            UIView *pageSubView;
            UIViewController *pageSubViewController;

            pageSubViewController = [self.storyboard instantiateViewControllerWithIdentifier:@"titlePage"];

            [self addChildViewController: pageSubViewController];
            [pageSubViewController didMoveToParentViewController:self];

            pageSubView = pageSubViewController.view;

            [_contentArea addSubview:pageSubView];
            CGRect pageViewRect = _contentArea.bounds;
            pageSubView.frame = pageViewRect;
         }

    } 
    ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-10T18:09:03.917

是的，我不知道如何使用情节提要，但如果你想要一个使用笔尖的简单剪切和粘贴解决方案，我在这里发布了一个：[https ://stackoverflow.com/a/9687639/542400](https://stackoverflow.com/a/9687639/542400)

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-09-26T18:24:06.590

这是创建页面的代码片段

```
pageInfoLabel.text = [NSString stringWithFormat:@"Some really useless information on page %d", pageNumber + 1]; 
```

# symfony - Symfony2 在运行时注册包及其路由

> ID：10060282
> 
> 赞同：1
> 
> 时间：2012-04-08T04:02:15.130
> 
> 标签：symfony

我是 symfony2 的新手，正在尝试弄清楚如何实现数据库驱动的插件系统。数据库部分没问题，但我不知道如何在运行时动态注册捆绑包及其路由；我只知道如何将它们硬编码到应用程序内核和路由配置文件中。我最好的猜测是我会监听 kernel.request 事件并在我的监听器中注册捆绑包/路由......？但是，我不知道如何做到这一点，并且想看看社区将如何做到这一点。

# lamp - 什么是 LAMP 堆栈？

> ID：10060285
> 
> 赞同：92
> 
> 时间：2012-04-08T04:03:06.113
> 
> 标签：lamp

LAMP Stack 一词是什么意思？

我在职位发布中看到过这个参考，但我并不完全理解它的含义。

我觉得在我的开发中我相当普遍地使用 LAMP，但是当我听到“堆栈”时，我觉得我没有像我应该使用的那样使用 LAMP 环境。

* * *

我知道 LAMP 是什么意思，只是想知道附加的“堆栈”一词是什么意思。

* * *

## 回答 #1

> 赞同：145
> 
> 时间：2012-04-08T04:08:34.460

他们称其为堆栈的原因是因为每个级别都源自其基础层。您的操作系统 Linux 是基础层。然后是 Apache，您的 Web 守护程序位于您的操作系统之上。然后，您的数据库存储您的 Web 守护程序提供的所有信息，PHP（或任何 P* 脚本语言）用于驱动和显示所有数据，并允许用户交互。

不要过分关注“堆栈”一词。人们实际上只是指软件套件或捆绑软件，但您使用它就很好，我相信您也是。

* * *

## 回答 #2

> 赞同：42
> 
> 时间：2012-04-08T04:05:33.950

**Linux**操作系统

**阿帕奇**网络服务器

**MySQL**数据库

和**PHP**

参考：*[LAMP（软件包）](http://en.wikipedia.org/wiki/LAMP_%28software_bundle%29)*

“*堆栈”*一词的意思是*堆栈*！这意味着您是否有使用这些技术/框架的经验。由于所有这些都集中在一个 LAMP 包中，您可以下载和安装它，因此他们将其称为堆栈。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2012-04-08T04:04:51.433

这仅仅意味着分别使用[Linux](https://en.wikipedia.org/wiki/Linux)、[Apache](https://en.wikipedia.org/wiki/Apache_HTTP_Server)、[MySQL](https://en.wikipedia.org/wiki/MySQL)和[PHP](https://en.wikipedia.org/wiki/PHP)作为您的*[操作系统](https://en.wikipedia.org/wiki/Operating_system)*、*[Web 服务器](https://en.wikipedia.org/wiki/Web_server)*、*[数据库](https://en.wikipedia.org/wiki/Relational_database_management_system)*和*[编程语言](https://en.wikipedia.org/wiki/Programming_language)*。

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2014-04-20T07:46:01.117

LAMP 表示： L = [Linux](https://en.wikipedia.org/wiki/Linux) ( [OS](https://en.wikipedia.org/wiki/Operating_system) ) A = [Apache](https://en.wikipedia.org/wiki/Apache_HTTP_Server) ( [Web 服务器](https://en.wikipedia.org/wiki/Web_server)) M = [MySQL](https://en.wikipedia.org/wiki/MySQL) ([数据库](https://en.wikipedia.org/wiki/Relational_database_management_system)) P = [PHP](https://en.wikipedia.org/wiki/PHP) ([语言](https://en.wikipedia.org/wiki/Programming_language))

来自*[LAMP](http://www.webopedia.com/TERM/L/LAMP.html)*（维基百科）：

> Linux、Apache、MySQL 和 PHP 的缩写，一种开源 Web 开发平台，也称为 Web 堆栈，使用 Linux 作为操作系统，Apache 作为 Web 服务器，MySQL 作为 RDBMS，PHP 作为面向对象的脚本语言。Perl 或 Python 经常替代 PHP。

* * *

## 回答 #5

> 赞同：12
> 
> 时间：2015-11-05T23:02:59.947

对于仍在研究这个以具体了解堆栈是什么的人来说，术语“堆栈”是指“解决方案堆栈”。解决方案堆栈只是解决给定问题的一整套软件，通常通过组合来提供必要的平台或基础设施。该术语是“服务器堆栈”和“Web 堆栈”的父项。因此，LAMP 堆栈是一套特定且完整的软件，专门用于通过 Web 提供动态内容。

一些额外的阅读：

[https://www.techopedia.com/definition/28154/solution-stack](https://www.techopedia.com/definition/28154/solution-stack) [https://en.wikipedia.org/wiki/Solution_stack](https://en.wikipedia.org/wiki/Solution_stack)

* * *

## 回答 #6

> 赞同：7
> 
> 时间：2017-02-19T18:04:50.513

准确而清晰

LAMP 是 L(Linux) A(Apache) M(Mysql) P(PHP5) 是一个用于 Web 应用程序开发的组合包。

Lamp最简单的安装方法如下

1）使用taskel

以下是命令列表

sudo apt-get update sudo apt-get install tasksel sudo tasksel（会提示您检查 LAMP 服务器并选择 Ok）

就是这样，LAMP 已准备好让您的知识焕发光彩。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2016-01-06T18:17:38.073

Lamp stack 代表**L** inux **A** pache **M** ysql **P** HP

还有 Mean Stack **M** ongoDB **E** xpressJS **A** ngularJS **N** odeJS

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2016-05-11T03:30:04.980

Linux、Apache、MySQL 和 PHP。免费和开源软件。例如，Microsoft Windows 系列操作系统上的等效安装称为 WAMP。对于 Mac 作为 MAMP。和他们两个的 XAMPP

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2016-09-19T06:16:18.780

L for Linux 操作系统 A for apache web server M for Mysql database p for php for scripting and php modules

我们可以在 LAMP 系统中托管 php 程序和 cgi 程序。

例如：在 ubuntu apt-get install apache2 for web server apt-get install mysql-server php5-mysql for database and php apt-get install php5 and got to your web server [http://localhost](http://localhost)

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2021-02-07T17:53:13.543

存在各种技术堆栈。看一看：

灯：

**L** inux
**A** pache
**M** ySQL
**P** HP

WAMP：

**Windows
**A**补丁
**M** **ySQL**
**P** HP _** 

 **MAMP：

**Mac操作系统
**A** pache Web 服务器**M**
**ySQL**作为数据库
**P** HP 用于脚本**

 **XAMPP：

**X**是跨平台
**的 A** pache
**M** ySQL
**P** HP
**P** erl

意思是：

**MongoDB
**E** **xpress.js**
**一个**ngular Node.js _
**_**** 

 **梅尔：

**MongoDB
**E** **xpress.js** React Node.js _
**_**
**_**** 

 *** * *

## 回答 #11

> 赞同：1
> 
> 时间：2020-09-18T19:14:32.523

我将尝试回答堆栈是什么的实际问题。

在 Internet 架构（[TCP/IP](https://en.wikipedia.org/wiki/Internet_protocol_suite)、[OSI](https://en.wikipedia.org/wiki/OSI_model)等）中，协议和软件通常相互“堆叠”在一起，因为它们相互依赖以获得支持。例如，TCP 在 IP 之上提供可靠的数据传输。LAMP 也是如此，您的 Apache 服务器需要“在 Linux 之上”运行。把这个“堆栈”想象成你最喜欢的一堆煎饼，每个煎饼都是不同的层。

![灯煎饼堆栈](../Images/299713258ee009f65f3908128a27bb54.png)

好吃。********

# c++ - 如何使用模板初始化类中的静态成员数组

> ID：10060287
> 
> 赞同：2
> 
> 时间：2012-04-08T04:03:36.297
> 
> 标签：c++, templates, static-members

> **可能重复：**
> [我必须在哪里以及为什么要放置“模板”和“类型名称”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)

```
#include <iostream>
using namespace std;

template <class T>
class Test
{
    union obj
    {
        union obj* next;
        int num;
    };

    static const int SZ=3;
    static obj* volatile list[SZ];
};

template <class T>
Test<T>::obj* volatile
Test<T>::list[SZ]=
{
    0, 0, 0
};

int main()
{
    return 0;
} 
```

使用 g++，我得到的错误是：

```
18|错误：“*”标记之前的预期构造函数、析构函数或类型转换

```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T04:14:41.997

`Test<T>::obj*`在成员的定义之前添加关键字 typename 。

# php - PHP中类的静态方法/函数

> ID：10060296
> 
> 赞同：0
> 
> 时间：2012-04-08T04:05:05.413
> 
> 标签：php, class, function, methods, static

我尝试使用静态方法（我不想实例化一个类）。我举了这个例子。

```
<?php
  class RootClass {
    const Member = 20;
    public static function Member() {
      return self::Member;
    }
  }

  class NewClass {
    private $ValNewClass = "";
    private function InitNewClass() {
      $this->ValNewClass = RootClass::Member();
    }
    public static function GetNewVal() {
      $this->InitNewClass();
      $Validation = true;
      if ($this->ValNewClass>10){
        echo "greater than 10";
        $Validation = false;
      } else {
        echo "Not greater than 10";
      }
      return $Validation;
    }
  }
  $Val2 = NewClass::GetNewVal();  //It must print "greater than 10"
?> 
```

**我需要知道我的错误在哪里。** 这不是真正的代码，只是询问的简单形式。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:20:14.673

在 PHP 中，$this 变量在声明为静态的方法中不可用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T11:42:46.717

您不能在静态方法中引用非静态字段。这种类中的值不能依赖于对象。当您使用 $this->field 时，您指的是类实例中的值。如果你想修改静态字段，你应该使用 self::field。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-10T04:04:48.963

```
<?php
  class Rootclass {
    const MEMBER = 20;
    public static function member() {
      return self::MEMBER;
    }
  }

  class Newclass {
    private static $valnewclass = "";
    private function initnewclass() {
      self::$valnewclass = Rootclass::member();
    }
    public static function getnewval() {
      self::initnewclass(); //Initialice Val for make comparation
      $validation = true;
      if (self::$valnewclass>10){
        echo "<br>greater than 10";
        $Validation = false;
      } else {
        echo "<br>Not greater than 10";
      }
      return $validation;
    }
  }
  $Val2 = Newclass::getnewval();  //It must print "greater than 10"
  echo "<br>After";
?> 
```

**谢谢** 代码正在运行。

切佩。

# html - 正则表达式匹配html标签之间长于x个字符的文本？

> ID：10060298
> 
> 赞同：0
> 
> 时间：2012-04-08T04:05:15.407
> 
> 标签：html, regex, preg-match

我的任务是迁移您将遇到的最糟糕的 HTML 产品描述。它由表格和段落的混合组成。大多数甚至不是 100% 有效的 HTML，并且有很多 Microsoft 标签由 MS Word 提供。它充满了线条样式标签，其中大部分依赖于您将见过的最疯狂的 CSS 规则集。

基本上我已经意识到唯一有用的是文本段落。我不能只抓住`<p>`标签，因为有时段落不使用它们，有时标题或单个单词有自己的`<p>`标签。

所以我的问题是我可以在html标签之间匹配比*x字符长的文本吗？*

理想情况下，它也会忽略`<br/>`和`<br>`

[这是](http://www.towequipe.co.uk/products//754-869-1594-thule-aero-roof-bars-fits-skoda-octavia-iii-2009-on.html)我正在处理的 html 示例的链接

请注意，这只是我正在处理的描述，而不是整个页面。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T04:23:26.240

此正则表达式的组`1`将匹配`n+`标签之间的字符（`100`在此示例中为 n =）：

```
<[^>]+>([^<]{100,})<[^>]+> 
```

笔记：

*   由于 OP 的草率 HTML，我故意*不*匹配匹配的结束标记 ( `<([^>]+)>([^<]{100,})<\1>`) - 标记就是标记
*   我避免使用lookbehind ( `(?<=<[^>]+>)`)，因为匹配是任意长度的，这可能会导致回溯问题（某些语言，如java，甚至不支持它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:35:43.540

稍微浏览一下网站，看起来很多描述都不足 100 个字符。您可以尝试多通道方法，在第一次迭代中，您从“ `div id="tab1"`”之后的第一个表中捕获所有内容。从这个起点开始，识别和消除您***不***想要的部分可能比提取您想要的部分更容易。

# python - 批处理文件下载器：名称生成器

> ID：10060299
> 
> 赞同：0
> 
> 时间：2012-04-08T04:05:22.587
> 
> 标签：python, batch-file

我正在用 python 开发一个程序来下载文件列表。被命名为：

```
2012-01-01-01.html
2012-01-01-02.html
...
...
2012-12-30-99.html 
```

问题是我不知道该文件是否存在。所以我必须检查 404 中的所有 url 我如何制作一个生成器，`'year'-'month'-'date'-'num` 如果一个链接失败然后跳过日期，如果特定月份的所有链接都失败跳过月份等等我只能编写具有很多“如果”有什么更好的主意吗

```
wset_fail=[]
for year in [2012,2011]:
    for month in range(1,12):
        for day in range(1,31):
            for num in range(1,100):   
                check = str(year)+'-'+str(month)+'-'+str(day)
                if check not in wset_fail:
                    link = generate_name(year,month,day,num)
                    if link!='':
                        if download(link)==False:   
                            wset_fail.append(str(year)+'-'+str(month)+'-'+str(day)) 
```

它的工作我要求一些更好的解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T11:28:48.587

如 [迭代 Python 中的一系列日期中](https://stackoverflow.com/questions/1060279/iterating-through-a-range-of-dates-in-python)所述，为日期创建一个单独的生成器。然后使用日期下载文件。

# php - 将 Sphinx 索引数据导出到 SQL

> ID：10060301
> 
> 赞同：0
> 
> 时间：2012-04-08T04:05:39.337
> 
> 标签：php, mysql, sphinx

是否可以将 sphinx 索引数据导出到 SQL，以便可以将其导入到原始表中？在开发环境中删除了一张表，我们忽略了备份。它适用于 vBulletin。需要恢复 pm 和 pmtext 表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:52:13.090

如文档中所述：

> 请注意，字段的原始内容不存储在 Sphinx 索引中。您发送给 Sphinx 的文本会得到处理，并且会根据该文本构建全文索引（一种可以快速搜索关键字的特殊数据结构）。但是原始文本内容随后被简单地丢弃。Sphinx 假设您将这些内容存储在其他地方。

对不起。

# javascript - 验证指数方程的Javascript函数

> ID：10060303
> 
> 赞同：4
> 
> 时间：2012-04-08T04:06:24.600
> 
> 标签：javascript, recursion

这是一个硬件任务。我想要的答案/输出是正确的。我只是不明白为什么。如果幂函数与我正在检查的数字匹配，我希望输出为真。对于这些示例，我确实得到了正确的答案，但我不明白这个递归函数是如何工作的。

在这个函数的 else 中，我说的是 base * 函数本身。这甚至代表什么？怎么可能`base * power(base, exponent - 1);`连计算？它不应该只是转了一圈然后最终结束吗？

```
console.log(power(2,4) === 16);
console.log(power(2,3) === 8);
console.log(power(2,2) === 4);

var power = function(base, exponent) {
    if(exponent === 0) {
        return 1; 
    }
    else {
        return base * power(base, exponent - 1);
    }
}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T04:15:22.817

函数 power 返回一个整数，因此函数返回时`base * <some_integer>`是一个完全有效的表达式。追踪这些东西的最好方法是用笔和纸：

电源调用堆栈（2,4）：

```
power(2, 4) = 2 * power(2, 3)
power(2, 3) = 2 * power(2, 2)
power(2, 2) = 2 * power(2, 1)
power(2, 1) = 2 * power(2, 0)
power(2, 0) = 1 <--base case 
```

现在您所要做的就是将值替换为调用堆栈

```
power(2, 4) = 2 * 8 = 16
power(2, 3) = 2 * 4 = 8
power(2, 2) = 2 * 2 = 4
power(2, 1) = 2 * 1 = 2 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:13:11.227

使用 Javascript 的语法糖声明风格编写函数可能会有所帮助：

```
console.log(power(2,4) === 16);
console.log(power(2,3) === 8);
console.log(power(2,2) === 4);

function power(base, exponent) {
    if(exponent === 0) {
        return 1; 
    }
    else {
        return base * power(base, exponent - 1);
    }
}; 
```

如果需要，您还可以添加该行

```
console.log("power("+base+", "+exponent+")"); 
```

在函数的头部，观察递归调用序列。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T04:16:11.753

每次递归调用都会减少指数，直到它等于`0`它将返回一个 constant`1`的位置，并且函数停止递归。

[js小提琴](http://jsfiddle.net/9DZWM/)。

另外，如果这不是家庭作业，还有[`Math.pow()`](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Math/pow):)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T04:28:40.363

对于幂（2,4）的例子，我们有

*   4 != 0 所以 else 执行，它执行 2*power(2,3)。
*   3 != 0 所以 else 执行，它执行 2*power(2,2)。
*   2 != 0 所以 else 执行，它执行 2*power(2,1)。
*   1 != 0 所以 else 执行，它执行 2*power(2,0)。
*   最后 0 == 0 所以它返回 1 并且它不执行另一个递归调用。

所以它通过调用返回到 2*power(2,0)，我们知道 power(2,0) == 1。它返回为 2。然后它返回 2*power(2,1) 和我们知道 power(2,1) == 2，因为 [2*power(2,0)]。这返回为 4。

* * *

看到图案了吗？依此类推，直到我们回到 2*power(2,3) ==16 因为我们有 power(2,3) == 8 因为 [power(2,2) * power(2,1) * power(2 ,0) * 1]。希望这有帮助！

# javascript - 如何使用 Sencha Touch 2 在浏览器中显示加载屏幕

> ID：10060304
> 
> 赞同：0
> 
> 时间：2012-04-08T04:06:44.550
> 
> 标签：javascript, html, extjs, sencha-touch-2

**免责声明：我知道如何在移动设备上创建启动屏幕。**

如果通过浏览器访问，是否可以显示 Sencha Touch 2 应用程序的加载屏幕？

*如果是，请给出一个简洁的工作示例。*概念验证应用程序，要点，来源，你知道的。

我说的是像 Sencha Docs 加载屏幕这样的东西：

![Sencha Docs 载入画面](../Images/ea4dff1d49b6ca69206ff641d126b696.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-09T17:16:49.977

您可以在 index.html 中添加加载指示器。只需确保它加载速度快，以便用户立即获得正在发生的事情的反馈。

```
<div id="appLoadingIndicator"></div> 
```

一旦应用程序启动呼叫

```
// Destroy the #appLoadingIndicator element
Ext.fly('appLoadingIndicator').destroy(); 
```

[如果您使用 Sencha Cmd 生成新的应用程序](http://docs.sencha.com/touch/2.3.1/#!/guide/command_app)，这是为您完成的。

也可以看看这些[流畅的 CSS3 指标](http://tobiasahlin.com/spinkit/)以获得灵感。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T22:47:47.703

```
yourContainer.setMasked({
    xtype: 'loadmask',
    message: 'Loading...'
}); 
```

然后添加一个计时器

```
setTimeout(function() {
    // code to be executed when loading
    // Unmask the container
    form.setMasked(false);
}, 5000); 
```

# java - 支持 Javascript 注入的代理服务器

> ID：10060311
> 
> 赞同：2
> 
> 时间：2012-04-08T04:08:42.067
> 
> 标签：java, javascript, python, proxy

我目前正在使用 Python，并且已经开始使用代理服务器。我有一个使用 spynner 编写的小应用程序。我想做的是找到某种形式的代理软件或 python 代理服务器库，它允许我将 javascript 代码注入到通过服务器的每个页面中。

有没有人听说过这样的事情？我已经在谷歌上搜索了几个小时，但我能找到的最好的是 selenium 服务器，它似乎无法正常工作，无法满足我的需求。

任何帮助表示赞赏，谢谢！

# php - 使用 implode()、join() 或 json_encode() 将 PHP 数组传递给 Javascript 数组

> ID：10060313
> 
> 赞同：1
> 
> 时间：2012-04-08T04:09:00.323
> 
> 标签：php, javascript, arrays, wordpress

我正在开发一个 Wordpress 插件，我需要将 PHP 数组传递给 Javascript 数组。我尝试过使用 join()、implode() 甚至 Json_encode。但是，wordpress 没有显示任何值。

使用 join() 时，我使用了以下代码：

```
<?php
$php1 = array(1,2,3);

?>
<script language='Javascript'>
var lat = ["<?php echo join("\", \"", $php1); ?>"];
document.write(lat[1]);
</script> 
```

如果在 localhost（没有 wordpress）上使用，上面的代码提供了一个有效的输出。但是，不知何故，它不适用于 Wordpress。“apache 错误日志”显示此消息：

PHP 警告：join() [function.join]：在第 129 行的 \wp-content\plugins\Animation\animation.php 中传递的参数无效，引用：[http://localhost/Website/wp-admin/options-general。 php?page=js](http://localhost/Website/wp-admin/options-general.php?page=js)

implode() 也是如此。服务器错误日志显示与 implode() 相同的上述警告。

然后我使用下面的代码尝试了 json_encode：

```
var lat = <?php echo json_encode($php1); ?>; 
```

但是没有返回值。

编辑：我用于 JSON 的代码：

```
<?php
/*
Plugin Name: PHPToJavascript
*/
$arr = array(1,2,3,4,5,6,7,8,9);            //array to pass

add_action('admin_menu','admin_jav');

function admin_jav(){
add_submenu_page('options-general.php','Javarray','Javarray','manage_options','javarray',jav_handler);
}

function jav_handler(){
echo 'Into handler';

?>
<SCRIPT LANGUAGE = 'Javascript'><!--
var sm=<?php echo json_encode($arr); ?>;      //using Json  

document.write(sm[1]);                       //doesnt display any output!!!

</SCRIPT>
<?php
}
?> 
```

请指导我完成这个。我很感激任何帮助。如果您能帮我将此 PHP 数组传递给 javascript 数组，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T04:44:12.103

**改变：**

```
var lat = ["<?php echo join("\", \"", $php1); ?>"];
document.write(lat[1]); 
```

**到：**

```
var lat = ["<?php echo join('", "', $php1); ?>"];
document.write(lat[0]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:51:40.237

`$arr`变量超出范围。如果要使用全局`$arr`变量，则需要修改`jav_handler()`函数以将变量带入局部范围：

```
function jav_handler(){
    global $arr;
    // ... 
```

但是，最好的做法是尽可能避免使用全局变量，因此最好的做法是更改函数以将数组作为参数并在调用函数时显式传递它：

```
function jav_handler($arr){
    // ...
}

jav_handler($arr); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T04:58:28.013

代替：

```
var lat = ["<?php echo join("\", \"", $php1); ?>"]; 
```

我会尝试：

```
var lat = "<?php echo json_encode($php1); ?>"; 
```

此外，您可能希望使用提供适当 JS 调试的浏览器。在 chrome 中，您可以使用`console.log(lat);`来查看 lat 的确切内容

# css - 垂直对齐不同大小的文本

> ID：10060316
> 
> 赞同：2
> 
> 时间：2012-04-08T04:13:15.087
> 
> 标签：css, vertical-alignment, font-size

 我想对齐一个加号（加号）标记和它旁边的文本，但是，由于“+”太小，它被一个标签放大了。这会导致角色变得太大，让我很难对齐它们。我如何将 + 字符和 Text 均匀地对齐？ 

这是代码：http: [//jsfiddle.net/rs75V/](http://jsfiddle.net/rs75V/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T04:22:40.910

你有没有尝试过

```
vertical-align:middle; 
```

或者

```
vertical-align:-10%; 
```

? [这](http://jsfiddle.net/rs75V/33/)在我看来没问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:23:12.013

试着玩这个：
[http](http://www.w3schools.com/cssref/pr_pos_vertical-align.asp)
://www.w3schools.com/cssref/pr_pos_vertical-align.asp我认为这就是你要找的，它有很多不同的方式来向上或向下移动文本对齐。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T04:39:13.393

这很骇人听闻，但这应该可以。

```
a{
    font-family: arial, sans-serif;    
    background-color: #EEEEEE;

    border: 1px solid #DDDDDD;
    border-bottom: 1px solid #BBB;

    color: #333;
    padding: 4px 10px;
    text-align: center;
    text-shadow: 0 1px 0 #EEE;
    font-weight:bold;
    font-size:20px;
    line-height:40px;
    display:inline-block;
    cursor:pointer; 
}
span{
    font-size:40px;
    vertical-align:-15%;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T04:51:25.773

试试这个：

```
span {
    font-size: 40px;
    line-height: 0;
    vertical-align: middle;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T07:21:11.850

尝试浮动你的`a`and `span`。

```
a{
    font-family: arial, sans-serif;    
    background-color: #EEEEEE;

    border: 1px solid #DDDDDD;
    border-bottom: 1px solid #BBB;

    color: #333;
    padding: 4px 10px;
    text-align: center;
    text-shadow: 0 1px 0 #EEE;
    font-weight:bold;
    font-size:20px;
    cursor:pointer; 
    line-height: 40px;
    float: left;
}
span {
    font-size:40px;
    float: left;
    margin: 0 .1em 0 0;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T08:18:24.483

您可以将跨度显示为内联块，然后在其上使用填充...

```
a{
    font-family: arial, sans-serif;    
    background-color: #EEEEEE;

    border: 1px solid #DDDDDD;
    border-bottom: 1px solid #BBB;

    color: #333;
    padding: 4px 10px;
    text-align: center;
    text-shadow: 0 1px 0 #EEE;
    font-weight:bold;
    font-size:20px;
    display:inline-block;
    cursor:pointer; 

}
span{
    font-size:40px;
    line-height: 0;
    display: inline-block;
    padding-bottom: 9px;
} 
```

# mysql - mysql查询连接/内连接

> ID：10060325
> 
> 赞同：4
> 
> 时间：2012-04-08T04:14:55.153
> 
> 标签：mysql, join, left-join, inner-join

我的 mysql 中有两个表我想根据两个表的组合查询来提取结果。我尝试加入以及内部加入，但没有成功的结构

表A是

```
id   userid   topic

1     34       love
3     64       friendship
35    574      romance
32    253      games
95    633      football
54    26       cricket
648    63      music 
```

表B是

```
id    location     username
34      Australia    krkrff
64      india        dieiei
574     pakistan     frkfrf
253     japan        frfffrk
633     india        ifirf
26      Australia    riiri
63      Australia    frffjrr 
```

请注意，tableA 中的 userid 和 TableB 中的 id 相同。两者都反映了相同用户的数据。我想通过从 tableB 中过滤位置列来显示 tableA 数据。假设我想显示 tableB 的主题并且用户属于澳大利亚，那么它应该给出输出：love cricket music

您可以在表 B 中看到 34,26 和 63 属于澳大利亚，所以输出是这样的。如果位置是印度，那么输出将是

友谊和足球。请告诉如何编写 sql 查询。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T04:19:16.347

以下应选择您所描述的内容：

```
select a.topic
from tableA a
join tableB b on b.id = a.userid
where b.location = 'Australia' -- or whichever location you filter on 
```

这相当于：

```
select a.topic
from tableA a
join tableB b on b.id = a.userid and b.location = 'Australia' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T04:20:01.427

```
SELECT a.topic, b.topic FROM tableA a, tableB b WHERE a.id = b.id AND b.location = 'Australia' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T04:22:15.063

您能否详细说明“tableA userid 和 TableB id 相同”的含义，因为它们可见不同，因此我们不能将它们用作键。

但是，据我了解，您可能只想对主题进行 JOIN 和 SELECT 操作。

因此，您的查询应该是：

```
SELECT t1.topic from table1 t1 JOIN tableB t2 on t2.id = t1.id WHERE t2.location = 'Australia' 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T04:24:35.073

试试这个：

```
SELECT tableA.topic FROM tableA JOIN tableB
ON tableA.userid = tableB.id
WHERE tableB.location = 'Australia'; 
```

# visual-studio-2010 - MVC3 代码优先，找不到元数据

> ID：10060335
> 
> 赞同：1
> 
> 时间：2012-04-08T04:16:41.647
> 
> 标签：visual-studio-2010, asp.net-mvc-3, entity-framework

我正在学习一个教程（[http://weblogs.asp.net/scottgu/archive/2011/05/05/ef-code-first-and-data-scaffolding-with-the-asp-net-mvc-3 -tools-update.aspx](http://weblogs.asp.net/scottgu/archive/2011/05/05/ef-code-first-and-data-scaffolding-with-the-asp-net-mvc-3-tools-update.aspx) ) 来构建一个简单的 MVC 3 Web 应用程序。我正在使用代码优先的方法，事情进展顺利，直到我不得不返回并在我的一个模型中添加一个字段。

我收到错误“无效的列名'摘要'”。这是有道理的，因为这是我添加到模型中的新字段。

我的理解是，每当 Visual Studio 意识到现有数据库与其连接的数据库不同时，Visual Studio 都会尝试重新创建数据库。这是我想要的行为，所以我在 global.asax 文件中的 Application_start 中添加了以下行。

```
Database.SetInitializer<MyDBContext>(new DropCreateDatabaseIfModelChanges<MyDBContext>()); 
```

现在，当我尝试运行程序时，出现错误“无法检查模型兼容性，因为数据库不包含模型元数据。只能检查使用 Code First 或 Code First 迁移创建的数据库的模型兼容性。”

我什至删除了我一直在使用的现有数据库，这样 Visual Studio 就不会感到困惑。

每次更改模型时，为了让 Visual Studio 对 DB 进行核对，我需要做什么？

# hibernate - Hibernate：将多个类映射到具有不同主键的同一个表

> ID：10060337
> 
> 赞同：1
> 
> 时间：2012-04-08T04:16:44.137
> 
> 标签：hibernate

如标题中所述，我看到了我试图将两个不同的类映射到同一个表的问题。每个类都有不同的主键；一个的主键与物理表上的主键相同，另一个使用 2 个不同字段的组合。

我尝试这样做的原因是因为我们最近切换了表上的主键，并且我们希望能够支持旧类和新类。

有人可以确认我在做什么是不可能的吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:56:54.783

当您声明具有两个不同类的同一张表时，它会起作用，但您应该认真考虑这个想法，因为它可能会在未来产生许多问题。

由于**表中的主键已更改，因此使用旧 bean 向表中插入数据将不再起作用**。所以，基本上你的旧课程没有多大用处。

我的建议是更改旧班级的`id`映射以反映您在表格中所做的新更改。难点在于管理数据库中的变化，既然你已经做到了，那么对应的Java变化一定更简单，试一试吧。

# php - 以 HTML 表的形式在 MySQL 数据库输出旁边插入复选框

> ID：10060338
> 
> 赞同：-1
> 
> 时间：2012-04-08T04:17:21.740
> 
> 标签：php, html, mysql, checkbox, html-table

我一直在尝试在从 MySQL 表中检索的值旁边插入复选框，并且输出采用 HTML 表的形式。

![](../Images/0c3b6ae3d9c7a6dc0ac5476237b161fc.png)

输出与查询表单在同一页面上，查询表单将以上表的形式检索值。现在，我希望在从数据库接收到的每一行/条目旁边插入复选框，并使用它来更新数据库中的 notification_sent 列，但到目前为止，我遇到了一个障碍。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:31:24.537

Just add one more td with the checkbox code:

```
<td><input type="checkbox" name="notification_sent[]"/></td> 
```

# algorithm - 计算前缀和的并行算法

> ID：10060346
> 
> 赞同：3
> 
> 时间：2012-04-08T04:19:04.120
> 
> 标签：algorithm, prefix-sum

我在实现并行计算前缀和的算法时遇到问题。即使这个算法有 3 个步骤，我也无法编写代码，因为没有给出伪代码。

我浏览了网络上的各种材料以及堆栈溢出，但我没有得到[wiki](http://en.wikipedia.org/wiki/Prefix_sum)上给出的算法的确切实现。维基提到以下内容：

> 前缀和可以通过以下步骤并行计算：
> 
> 1.  计算连续项目对的总和，其中该对的第一项具有偶数索引：z0 = x0 + x1、z1 = x2 + x3 等。
> 2.  递归计算序列 z0, z1, z2, ... 的前缀和 w0, w1, w2, ...
> 3.  将序列 w0, w1, w2, ... 的每一项展开为总前缀和的两项：y0 = x0, y1 = w0, y2 = w0 + x2, y3 = w1 等。在第一个值之后，每个连续数 yi 要么从 w 序列一半的位置复制，要么将前一个值添加到 x 序列中的一个值

有人可以建议一个伪代码实现供我检查和实现吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-13T15:00:09.550

I believe the provided answer is not enough to understand the algorithm, so I provided an actual answer with more comprehensive pseudocode here: [https://stackoverflow.com/a/12874227/697862](https://stackoverflow.com/a/12874227/697862) based on [Parallel Prefix Sum (Scan) with CUDA](https://developer.nvidia.com/gpugems/GPUGems3/gpugems3_ch39.html) which is a complete article describing the optimum parallel algorithm according to:

> Blelloch, Guy E. 1990\. "Prefix Sums and Their Applications." Technical Report CMU-CS-90-190, School of Computer Science, Carnegie Mellon University.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T11:01:37.800

你写的几乎是伪代码，但我希望这会有所帮助。

```
prefix_sum(List x):List
begin
   //This step is split in multiple tasks that are running in paralell
   //build z, be careful around the end
   w = prefix_sum(z)

   //This step should also be split in multiple tasks
   //build y, using w and x
   return y
end 
```

编辑： y [i]是我们想要得到的总和，如果 i%2 == 1， y [i] = w [i/2 ，否则 w] [i/2-1] + [x]。这里我们假设 w [-1] =0

# ios - 如何让我的应用支持视网膜显示

> ID：10060351
> 
> 赞同：-1
> 
> 时间：2012-04-08T04:19:55.093
> 
> 标签：ios, ipad, retina-display

我正在开发 ipad 应用程序并希望支持新的视网膜显示。为了使我的应用程序支持视网膜，我需要做什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:14:55.270

如果您在门户网站上查看来自 Apple 的文档，您会发现需要支持的新图标大小才能针对该平台。如果您在应用程序中使用图像，重要的部分是大分辨率的图标。确保使用高 dpi

希望这有助于干杯

# asp.net - 为网格视图中的特定列着色

> ID：10060355
> 
> 赞同：0
> 
> 时间：2012-04-08T04:20:44.667
> 
> 标签：asp.net, gridview

我要做的就是将网格视图的最后三列设为黄色。因为我正在使用 css，我不能在 boundfield 中使用 itemstyle 吗？如果不是，我怎么能轻松做到这一点？谢谢！

```
 <asp:GridView 
        ID="grdMyProducts"
        DataSourceID = "srcGetMyProducts" 
        CssClass="GridViewStyle"
        AutoGenerateColumns = "false"
        AllowPaging = "false"
        GridLines="None"
        runat="server" >
        <RowStyle CssClass="RowStyle" />    
        <EmptyDataRowStyle CssClass="EmptyRowStyle" />    
        <PagerStyle CssClass="PagerStyle" />    
        <SelectedRowStyle CssClass="SelectedRowStyle" />    
        <HeaderStyle Wrap="false" CssClass="HeaderStyleFilter" />   
        <EditRowStyle CssClass="EditRowStyle" />    
        <AlternatingRowStyle CssClass="AltRowStyle" />
        <Columns>
        <asp:BoundField
            DataField="DistributorName"
            HeaderText="Distributor" />
        <asp:BoundField
            DataField="Size"
            HeaderText="Size" />
        <asp:BoundField
            DataField="Description"
            HeaderText="Description" />
        <asp:BoundField
            DataField="Category"
            HeaderText="Category" />
            <ItemStyle BackColor="#f6f17c"/>
        <asp:BoundField
            DataField="Amount"
            HeaderText="Amount" />
            <ItemStyle BackColor="#f6f17c"/>
        <asp:BoundField
            DataField="Unit"
            HeaderText="Unit" />
            <ItemStyle BackColor="#f6f17c"/>
        </Columns>
       </asp:GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T04:40:42.947

BoundField 的用户**ItemStyle-CSSClass**属性。

```
<asp:BoundField  DataField="Category" ItemStyle-CssClass="myStyle"  HeaderText="Category" /> 
```

并在你的样式表中有这个 CSS 类

```
.myStyle
{
  background-color:Gray;
  color:Red;
} 
```

它应该工作。我测试了它。

# c# - 找不到 MVC 3 Html.BeginForm 表达式重载

> ID：10060365
> 
> 赞同：2
> 
> 时间：2012-04-08T04:24:10.197
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, razor, lambda

在 MVC3 (razor) web 应用程序中，我想使用表达式语法作为开始表单，例如。@Html.BeginForm(c => c.ActionName(null))。但是，我没有看到采用表达式的重载，并且当我尝试它时页面会引发错误。

我是不是忘记了一步？我是否需要包含一个额外的命名空间或一些第 3 方资源？我正在使用 MvcContrib.FluentHtml，但我也没有在其中看到它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T06:15:36.653

的 lambda 重载`BeginForm`是 ASP.NET MVC Futures 的一部分，对于 MVC 3，可以在此处下载：http: [//aspnet.codeplex.com/releases/view/58781](http://aspnet.codeplex.com/releases/view/58781)

# codeigniter - CodeIgniter：从数据库中提取的 Constants.php 常量

> ID：10060372
> 
> 赞同：0
> 
> 时间：2012-04-08T04:26:24.153
> 
> 标签：codeigniter, routes

我的控制器`squad`管理 CMS 更大社区内的内部组的所有功能。我想为管理员提供更改引用该组的动词的能力。这样的例子可能是：`team`, `wing`, `platoon`, 或者即使`dogfood`它满足它们。

我遇到的问题是需要从数据库字符串中提取路由，因此`site.com/squad`成为管理员设置的值。然而。如果没有 a) 破解核心或 b) 扩展 CI_Router，就无法做到这一点。

我已经开始了扩展，但只到了这一步：

```
class MY_Router extends CI_Router {
    function MY_Router()
    {
        $this->config =& get_config();
        parent::__construct();
    }
} 
```

我想要完成的是：

```
define('UNIT', $this->get_setting('squad-term'));
$route[UNIT] = "squad"; 
```

有没有人有办法解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T17:45:44.270

我通常这样做的方法是将字符串（例如：squad_）添加到段中，然后您可以将其与 routes.php 中的正则表达式匹配

```
site.com/squad_team
site.com/squad_squad
site.com/squad_dogfood 
```

或者更简洁一些，添加另一个“级别”，然后您可以在 routes.php 中通过`$route['s/(:any)']`

```
site.com/s/team
site.com/s/squad
site.com/s/food 
```

说了这么多，我不知道你为什么

> 需要改写班长的名字

?

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T16:50:11.127

我的朋友找到[了这篇文章](http://osvaldas.info/blog/smart-database-driven-routing-in-codeigniter)，并且该解决方案非常有效。当然它需要另一个数据库请求，但这是要付出的代价。

`config/routes.php`

```
require_once( BASEPATH .'database/DB'. EXT );
$db =& DB();
$query = $db->where('setting_slug', 'squad-term')->get( '_settings' );
$result = $query->result();
$term = lcfirst($result[0]->setting_value);

$route[$term] = "squad";
$route[$term . 's'] = "squads"; 
```

# windows - [Windows Driver Development]How to Disable F8 during the boot process of Windows?

> ID：10060373
> 
> 赞同：1
> 
> 时间：2012-04-08T04:26:47.023
> 
> 标签：windows, security, kernel, device-driver

Microsoft ENFORCE all kinds of kernel drivers running under Windows 7 64-bit must be signed by VeriSign. This is a vital feature to keep OS integrity.

However, there remains an only backdoor: If the user presses F8 during the boot process, then the user can choose an option to allow unsigned drivers to be loaded.

I know the backdoor is indispensable for driver development and testing; but for general users, this option is not only useless but also dangerous. For example, a malicious guy can intrude an encrypted system and intercept decrypted data via an unsigned filter driver.

If there is a way for the administrator to disable F8, then the backdoor will be blocked perfectly. To my knowledge, however, currently Microsoft offers no way to do this.

This page ( [http://guino.home.insightbb.com/nosafefaq.html](http://guino.home.insightbb.com/nosafefaq.html) ) says their NoSafeMode.exe can do that. I tested NoSafeMode.exe and found it indeed can do that.

I am really very curious how NoSafeMode.exe does that. I am astounded by their declarations as follows:

> (1) Does it modify my Operating System Files? NO. This tool was designed to be 100% legal and as such, it does not modify, edit, replace or remove any operating system files.
> 
> (2) Does it modify my Operating System Settings? NO. This tool was designed to work independent of Operating System settings and as such, it does not modify, edit, replace or remove any settings or registry data.
> 
> (3) How long does the Lock/Unlock process take? The Lock/Unlock process takes merely seconds, and can be automated by using of command line parameters for your convenience.
> 
> (4) How long does the Lock protection last? The Lock will remain in place indefinitely until you choose to unlock it or until you completely re-install the Operating System on the machine.
> 
> (5) Does it use any memory or hard disk space? NO. This tool simply sets up your computer in a one-time process after which you don’t need to have it running or even saved in the computer for it to continue working. In fact I recommend you do not leave a copy of the software in the machine in order to prevent attempts to remove the Lock from the machine.

I don't intend to advertise the tool. I just want know how to program to disable F8 as NoSafeMode.exe does.

Any help will be highly appreciated. Many thanks in advance.

# java - 如何在 Java 代码中使用 Scala 可变参数

> ID：10060377
> 
> 赞同：19
> 
> 时间：2012-04-08T04:27:56.103
> 
> 标签：java, scala, console, scala-java-interop

有很多关于从 Scala 代码调用 Java varargs 的文章，但我唯一能找到相反的方法是这个问题：[Using scala vararg methods in java](https://stackoverflow.com/questions/8309480/using-scala-vararg-methods-in-java)，它没有任何具体的例子。

我正在尝试使用`scala.Console`一些 Java 代码，因为它`java.io.Console`在 Eclipse 中不起作用，而 Scala 则可以。但我无法获得方法

```
def readLine (text: String, args: Any*): String 
```

工作，因为它似乎期待`scala.collection.Seq[Any]`第二个参数，我不知道如何 `Seq`在 Java 中创建。我该如何解决这个问题？

我尝试过的事情：

1）使用空

```
// Java
String s = scala.Console.readLine("Enter text: ", null); 
```

- 获得奖励`NullPointerException`。

2) 替换了`null`with `scala.collection.Seq.empty()`，但是 javac 报各种错误，比如`Seq`没有`empty`方法。

3）使用包对象`Nil`中的对象，但是[这里](https://stackoverflow.com/questions/4553173/how-to-access-an-object-foo-contained-in-a-scala-package-object-from-java)`scala.collection.immutable`建议的语法是，但无法解决。`scala.collection.immutable.package$Nil$.MODULE$`

当然我可以只使用`readLine()`不带可变参数的方法，但这太容易了。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-04-08T08:27:53.223

您可以使用：

```
scala.collection.Seq$.MODULE$.empty(); 
```

从 Java 代码创建一个空序列。否则，您可以使用：

```
new scala.collection.mutable.ArrayBuffer(); 
```

创建一个空数组缓冲区，然后您可以在其中添加元素并将其用作 Scala 可变参数方法的参数。

否则，如果您设计一个带有可变参数方法的 Scala 库，并且您想从 Java 代码中使用这些方法，那么请使用`varargs`注解。它将生成该方法的 Java 版本，该方法采用数组而不是`Seq`.

```
scala> class A {
     |   @annotation.varargs def foo(x: Int*) { println(x) }
     | }
defined class A

scala> println(classOf[A].getMethods.toList)
List(public void $line1.$read$$iw$$iw$A.foo(scala.collection.Seq), public void $line1.$read$$iw$$iw$A.foo(int[]), ...) 
```

上面，反射显示`foo`生成了 2 个版本的方法 - 一个采用 a `Seq[Int]`，另一个采用`int[]`.

# performance - 使用回溯和分支定界的优点

> ID：10060379
> 
> 赞同：1
> 
> 时间：2012-04-08T04:28:17.983
> 
> 标签：performance, algorithm, complexity-theory, backtracking, branch-and-bound

我知道 DP 为许多 NP 完全问题（如 TSP）提供了更好的性能。虽然所需的空间很大，但它很好地降低了复杂性。

但是与蛮力搜索相比，我无法理解分支定界和回溯的效率。

在最坏的情况下，蛮力是否等于 b&b 或回溯？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:35:00.203

通过穷举搜索，您将计算所有 N! 节点之间的可能路径。使用回溯，您可能会计算出访问一半节点的路线，注意到它已经比目前找到的最佳路线更昂贵，然后停止调查该部分路线。通过这样做，您跳过了计算通过完成该部分路线产生的所有路线，从而节省了详尽搜索的时间，这将继续检查它们。

# gwt - File upload works in my development environment, but not when deployed

> ID：10060383
> 
> 赞同：2
> 
> 时间：2012-04-08T04:28:45.963
> 
> 标签：gwt, file-upload, upload

I am using GWT and Google Apps to host my app. As I am new to both GWT and Web Programming (Spent most of my life doing drivers), hopefully I am simply missing something. I found some sample code online which works perfectly well in development mode. When I deploy, it does not work. I have put code in the Upload classes to write data to the DB when called, but it looks like the call to my service is never made as the DB never changes. Included is the code I am using. It would be great if I could get rid of the JSP code, but I can't instantiate the Blobstore stuff. It would be great to move this into Java, but first things first.

```
FileUpload.jsp:

<%@ page import="com.google.appengine.api.blobstore.BlobstoreServiceFactory" %>
<%@ page import="com.google.appengine.api.blobstore.BlobstoreService" %>
<%
    BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();
%>

<html>
    <head>
        <title>Upload Test</title>
    </head>
    <body>
        <form action="<%= blobstoreService.createUploadUrl("/upload") %>" method="post" enctype="multipart/form-data">
            <input type="text" name="foo">
            <input type="file" name="myFile" size="50">
            <input type="submit" value="Submit">
        </form>
    </body>
</html> 
```

Ugly dialog that needs replacing, but essentially this works. The user enters a file name and hits submit. Now, on the server side I have the following code:

```
// Upload.java
public class Upload extends HttpServlet {
    private static final long serialVersionUID = 1L;
    private BlobstoreService blobstoreService = BlobstoreServiceFactory.getBlobstoreService();

    public void doPost(HttpServletRequest req, HttpServletResponse res) throws ServletException, IOException {
        DebugViaDb.writeDebugData("AA"); // I know my DB write code works as other parts of the code work with the DB
        HttpSession session = req.getSession(true);
        System.out.println("Session is " + session);

        Map<String, BlobKey> blobs = blobstoreService.getUploadedBlobs(req);
        BlobKey blobKey = blobs.get("myFile");

        if(blobKey == null) {
            res.sendRedirect("/");
        } 
        else {
            res.sendRedirect("/uploadServlet?blob-key=" + blobKey.getKeyString());
        }
    }
} 
```

This is called by the JSP, which in turn calls my upload servlet:

```
// UploadServlet.java
public class UploadServlet extends HttpServlet {    
            <edited>

        public void doGet(HttpServletRequest req, HttpServletResponse res) throws IOException {
            DebugViaDb.writeDebugData("BB");
            BlobKey blobKey = new BlobKey(req.getParameter("blob-key"));

        ...
        }
} 
```

My web.xml:

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
     xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
          http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd"
     version="2.5"
     xmlns="http://java.sun.com/xml/ns/javaee">

<!-- Servlets -->
<servlet>
  <servlet-name>myDataServiceImpl</servlet-name>
  <servlet-class>com.blah.server.MyDataServiceImpl</servlet-class>
</servlet>

<servlet>
  <servlet-name>Upload</servlet-name>
  <servlet-class>com.blah.server.Upload</servlet-class>
</servlet>

<servlet>
  <servlet-name>UploadServlet</servlet-name>
  <servlet-class>com.blah.server.UploadServlet</servlet-class>
</servlet>

<servlet-mapping>
  <servlet-name>myDataServiceImpl</servlet-name>
  <url-pattern>/my/myData</url-pattern>
</servlet-mapping>

<servlet-mapping>
  <servlet-name>Upload</servlet-name>
  <url-pattern>/upload</url-pattern>
</servlet-mapping>

<servlet-mapping>
  <servlet-name>UploadServlet</servlet-name>
  <url-pattern>/uploadServlet</url-pattern>
</servlet-mapping>

<!-- Default page to serve -->
<welcome-file-list>
  <welcome-file>my.html</welcome-file>
</welcome-file-list>

</web-app> 
```

So, the issue is, everything works perfectly when I run this in development mode. When I deploy, it does not appear as though the "upload" is ever called. I am stuck as far as debugging this on the server, so I am not sure what is going on. No luck getting logfiles.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:22:46.267

首先想到的是开发模式下的任何 URL 都缺少上下文根。因此，如果您的 war 文件名为 myapp.war，则 url 看起来会有所不同。有点像这样：

```
http://127.0.0.1:8888/index.jsp
http://localhost:8080/myapp/index.jsp 
```

刷新页面时表单提交返回什么http代码，假设它确实尝试连接到某个地方？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-09T03:55:40.013

问题似乎出在标签中设置的 URL`action`上。`form`

尝试打印的值

```
 <%= blobstoreService.createUploadUrl("/upload") %> 
```

在开发和部署模式中。

# objective-c - How to locate SubView in MainView for iOS?

> ID：10060384
> 
> 赞同：-1
> 
> 时间：2012-04-08T04:28:49.450
> 
> 标签：objective-c, ios

I want to locate the subView in MainView when i clicked UIButton. But when i clicked that Button,that subView is only appear at the top of the MainView. I want to appear that subView in the below of the mainView with Slide that like keyboard. In iOS,keyboard appears in the below of the mainView with slide. I want to appear my SubView like that. How can i do that? Please help me!.

Best Regards,

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:30:50.253

首先阅读[UIView 的文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/uiview_class/uiview/uiview.html)。iOS 中几乎所有的绘图都是由派生自 UIView 的类完成的，因此您需要非常熟悉它。在 UIView 中，您会找到该[`-addSubview:`](http://developer.apple.com/library/ios/documentation/uikit/reference/uiview_class/uiview/uiview.html#//apple_ref/occ/instm/UIView/addSubview%3a)方法，您可以使用该方法将子视图添加到任何视图。

如果您希望子视图滑入到位，您将需要阅读有关 Core Animation 的内容。

如果子视图用于输入，例如键盘替换，您可以查看`inputView`某些视图（例如 UITextField 和 UITextView）提供的属性。例如，如果您`inputView`拥有视图的文本字段的属性，那么当该文本字段成为第一响应者时，系统将负责呈现您的视图。

# database - Two way multiway merge sort

> ID：10060386
> 
> 赞同：3
> 
> 时间：2012-04-08T04:29:39.860
> 
> 标签：database, algorithm, memory

This is a question from the book 'Database Systems The complete book, 2nd Edition' - Chapter 15: Two-pass algorithm based on sorting. "Sometimes, it is possible to save some disk I/O ’s if we leave the last sublist in memory. It may even make sense to use sublists of fewer than blocks to take advantage of this effect. How many disk I/O ’s can be saved this way?"

I figured out that you divide the original relation into sub-lists and and sort them in the first pass, and keep the last list in memory, which will occupy fewer than M-1 block. Then how do you progress with sorting?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-20T23:35:52.433

这只是一个猜测，但我怀疑答案可以描述如下。标准的“一次级别”合并排序如下所示：

```
1 1 1 1 1 1 1 1
--- --- --- ---  -- pass 1
 2   2   2   2
 -----   -----   -- pass 2
   4       4
   ---------     -- pass 3
       8 
```

请注意，在进入下一个级别之前，我们会执行完整的输入数据传递。

另一种方法是“一次子树”合并排序，如下所示：

```
1 1 1 1 1 1 1 1
--- | | | | | |
 2  --- | | | |
 |   2  | | | |
 -----  | | | |
   4    --- | |
   |     2  ---
   |     |   2
   |     -----
   |       4
   ---------
       8 
```

在这里，一旦构建了邻居，我们就将每个子树与其具有相同高度的邻居合并。我们做了同样多的工作，但局部性得到了改善。

干杯。

# asp.net-mvc - MVC JSON 数据对象

> ID：10060388
> 
> 赞同：1
> 
> 时间：2012-04-08T04:30:46.173
> 
> 标签：asp.net-mvc, json

我正在尝试从以下类中获取数据：

```
 public class SalesData
    {
        public string RepName { get; set; }

        public string DateString { get; set; }

        public decimal TotalSales { get; set; }

        public decimal RepSales { get; set; }
    }

    public static class SalesDataBuilder
    {
        public static List<SalesData> GetCollection()
        {
            return new List<SalesData>
            {
                new SalesData
                {
                    RepName = "Nancy Davolio",
                    DateString = "Aug 2010",
                    TotalSales = 10458,
                    RepSales = 2015
                },

                new SalesData
                {
                    RepName = "Nancy Davolio",
                    DateString = "Sept 2010",
                    TotalSales = 21598,
                    RepSales = 6003
                },  };
        } 
```

在我的控制器中使用 Json，我尝试了以下操作：

```
 public JsonResult IndexJson()
        {
            IEnumerable<SalesData> person = (from e in SalesData

                                                    select new SalesData
                                                {
                                                    RepName = e.RepName,
                                                    RepSales = e.RepSales 
                                                });
            return Json(person);
        } 
```

当然，我做错了什么，对 json 很陌生。我会很感激你的建议。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:42:46.467

您的代码甚至无法编译。您永远不会调用该`SalesDataBuilder.GetCollection`方法。试试这样：

```
public ActionResult IndexJson()
{
    IEnumerable<SalesData> person = 
        from e in SalesDataBuilder.GetCollection()
        select new SalesData
        {
            RepName = e.RepName,
            RepSales = e.RepSales
        };
    return Json(person, JsonRequestBehavior.AllowGet);
} 
```

`JsonRequestBehavior.AllowGet`请注意，如果您使用 GET 动词调用此操作，我将传递给 Json 方法，这是必需的。

# ios - Building an iPad App with HTML5 content using Xcode 4.3.2

> ID：10060396
> 
> 赞同：0
> 
> 时间：2012-04-08T04:33:12.027
> 
> 标签：ios

I'm a rookie in iOS development. I want to insert an HTML5 local page into an iPad App. I tried some tutorials but they didn't work.

I'm using Xcode 4.3.2\. Could anyone help me?

Thanks in advance.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T04:39:57.313

按照本教程[http://dblog.com.au/iphone-development/loading-local-files-into-uiwebview/](http://dblog.com.au/iphone-development/loading-local-files-into-uiwebview/)

综上，做一个uiwebview，从NSFileManager获取本地文件URL，加载URL。

# objective-c - 如何使用位图上下文进行绘制

> ID：10060404
> 
> 赞同：1
> 
> 时间：2012-04-08T04:35:35.930
> 
> 标签：objective-c, core-graphics, quartz-graphics, quartz-2d

我遵循了[Apple 的 Quartz 编程指南](http://developer.apple.com/library/mac/#documentation/GraphicsImaging/Conceptual/drawingwithquartz2d/dq_context/dq_context.html#//apple_ref/doc/uid/TP30001066-CH203-TPXREF101)（清单 2-5）中的示例代码，并且（在更正了代码中的几个错别字之后，比如`calloc`只使用一个应该是的参数`malloc`）我在我的上面定义了这个函数`@implementation`：

```
CGContextRef MyCreateBitmapContext (int pixelsWide, int pixelsHigh){

CGContextRef    context = NULL;
CGColorSpaceRef colorSpace;
void *          bitmapData;
int             bitmapByteCount;
int             bitmapBytesPerRow;

bitmapBytesPerRow   = (pixelsWide * 4);// 1
bitmapByteCount     = (bitmapBytesPerRow * pixelsHigh);

colorSpace = CGColorSpaceCreateDeviceRGB();
bitmapData = malloc( bitmapByteCount );// 3
if (bitmapData == NULL)
{
    fprintf (stderr, "Memory not allocated!");
    return NULL;
}
context = CGBitmapContextCreate (bitmapData,// 4
                                 pixelsWide,
                                 pixelsHigh,
                                 8,      // bits per component
                                 bitmapBytesPerRow,
                                 colorSpace,
                                 kCGImageAlphaPremultipliedLast);
if (context== NULL)
{
    free (bitmapData);// 5
    fprintf (stderr, "Context not created!");
    return NULL;
}
CGColorSpaceRelease( colorSpace );// 6

return context;// 7
 } 
```

然后我有一个方法如下：

```
-(void)testDrawCG{

CGRect myBoundingBox;// 1

CGContextRef myBitmapContext;
CGImageRef myImage;

myBoundingBox = CGRectMake (100, 100, 100, 100);// 2
myBitmapContext = MyCreateBitmapContext (400, 300);// 3
// ********** Your drawing code here ********** // 4
CGContextSetRGBFillColor (myBitmapContext, 1, 0, 0, 1);
CGContextFillRect (myBitmapContext, CGRectMake (0, 0, 200, 100 ));
CGContextSetRGBFillColor (myBitmapContext, 0, 0, 1, .5);
CGContextFillRect (myBitmapContext, CGRectMake (0, 0, 100, 200 ));
myImage = CGBitmapContextCreateImage (myBitmapContext);// 5
CGContextDrawImage(myBitmapContext, myBoundingBox, myImage);// 6
char *bitmapData = CGBitmapContextGetData(myBitmapContext); // 7
CGContextRelease (myBitmapContext);// 8
if (bitmapData) free(bitmapData); // 9
CGImageRelease(myImage);

 } 
```

一切都编译得很好，但是当我调用该方法时什么都没有出现。

我的理解是，与`drawInRect`要求 UIView 在图片中（没有双关语）不同，即使您不使用 UIKit，此位图绘制也可以从任何类型的类中进行。

在这个例子中，我只是简单地调用方法 from`viewDidLoad`作为测试，但我想我可以从任何地方调用它，甚至是 NSObject 子类，并期望看到一些东西；至少，这是 Apple 文档所建议的。有什么想法吗？

**更新**：在 Apple 文档中的进一步阅读使我尝试创建上下文，而不是使用之前定义的自定义函数：

```
 //    myBitmapContext = MyCreateBitmapContext (400, 300);// 3
UIGraphicsBeginImageContext(myBoundingBox.size);
myBitmapContext=UIGraphicsGetCurrentContext(); 
```

但是，结果仍然没有出现在屏幕上。此外，即使我没有直接调用，我也会在日志中得到这个`malloc`：

```
 malloc: *** error for object 0x102b1020: pointer being freed was not allocated*** set a breakpoint in malloc_error_break to debug 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T05:08:15.837

你对在屏幕上绘制东西需要什么感到困惑。你需要某种视图——要么是`UIView`在 iOS 应用程序中，要么是`NSView`在 Cocoa 应用程序中。

这两种视图通常都需要您通过实现`-drawRect:`方法来绘制它们。你不能（轻易地）在其他时候吸引他们。（这确实是一个巨大的过度概括，但它已经足够接近了。）

或者，将图像保存到文件中，然后打开该文件。（例如，将 包装`CGImageRef`在 a 中`UIImage`，然后用于`UIImagePNGRepresentation`创建 PNG 数据，然后`-[NSData writeToFile:atomically:]`将其写入文件。）

您的代码也有一些问题。 `-testDrawCG`直到这里都可以：

```
 myImage = CGBitmapContextCreateImage (myBitmapContext);// 5 
```

您已经获取了位图上下文的内容——您之前绘制的两个矩形——并`CGImageRef`从中创建了一个。将此图像视为上下文的快照。

```
 CGContextDrawImage(myBitmapContext, myBoundingBox, myImage);// 6 
```

现在您正在将该图像*重新绘制到*相同的上下文中。我不知道你为什么要这样做。跳过它。

```
 char *bitmapData = CGBitmapContextGetData(myBitmapContext); // 7 
```

现在您将获得支持位图上下文的原始数据。你不需要这样做。

```
 CGContextRelease (myBitmapContext);// 8 
```

好的，你已经完成了上下文，是有道理的。

```
 if (bitmapData) free(bitmapData); // 9 
```

不要这样做！您没有使用名称`Create`或`Copy`名称中的方法获取数据，因此您不拥有它，也不应该释放它。

```
 CGImageRelease(myImage); 
```

好的，好的，你已经完成了图像，所以你释放它。但是由于您对图像没有做任何有用的事情，因此您没有看到它出现在任何地方也就不足为奇了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:58:23.303

您需要将图像 ( `myImage`) 绘制到在屏幕上绘制的上下文中。创建一个子类`UIView`并将您的`testDrawCG`代码放入它的`drawRect:`方法中。然后，仍然在 中`drawRect:`，像这样绘制`myImage`到视图的上下文：

```
CGContextDrawImage(UIGraphicsGetCurrentContext(), self.bounds, myImage); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T05:06:16.147

您可以随时绘制位图，但绘图会出现在位图上。如果您想查看您绘制的内容，您仍然需要在常规绘制周期中将其绘制到 UIView 或 CALayer。

要完全控制您的绘图，请遵循 rob mayoff 的建议。如果您只想查看当前正在绘制的内容，可以将您的`CGImageRef`转为 a `UIImage`，并将其显示在 a 中`UIImageView`：

UIImage *image = [UIImage imageWithCGImage:myImage]; [someImageView setImage:image];

~~然而，这仅仅意味着绘制到屏幕是使用该`UIImageView` `drawRect:`方法发生的。~~ 我怀疑是否有任何 Apple 认可的方式可以在外面的屏幕上绘制`drawRect:`。

# sql - SQL Server 2008 更改数据捕获与审计跟踪中的触发器

> ID：10060408
> 
> 赞同：12
> 
> 时间：2012-04-08T04:36:19.543
> 
> 标签：sql, sql-server-2008, triggers

我们在 Web 应用程序上使用触发器实现了审计跟踪。这些触发器日志字段级别更新。因此，在一个表中，如果您更改了 5 列值，我们在审计跟踪中有 5 条记录，每一列都有旧值和新值。

最近我们已经升级到 SQL Server 2008。我一直在考虑使用新的更改数据捕获功能，因为它提供了非常简洁的行级更新，并且非常容易实现。只是想从一直使用更改跟踪的人那里获得一些意见，以获取任何警告或任何其他现实世界的有用信息。

任何意见将是有益的。

编辑：- [http://technet.microsoft.com/en-us/magazine/2008.11.sql.aspx?pr=blog](http://technet.microsoft.com/en-us/magazine/2008.11.sql.aspx?pr=blog)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-12T10:40:49.660

我在我的 WPF 应用程序中使用 CDC。效果很好，但我发现了三个问题：

*   您需要经常备份更改表（我使用`MERGE`语句将记录添加到历史表）。因为我发现记录仅在更改表中保留大约 2-3 天。不要忘记备份**cdc.lsn_time_mapping**表。
*   您不能在启用 CDC 的情况下截断表。
*   禁用 cdc 和重新启用存在问题（应在新服务包中解决，如 MS 所说）。我只遇到过一次这个问题，所以它不是那么烦人。

    > [http://blogs.technet.com/b/claudia_silva/archive/2010/06/04/cdc-cdc-hangs-when-i-try-to-disable-it.aspx](http://blogs.technet.com/b/claudia_silva/archive/2010/06/04/cdc-cdc-hangs-when-i-try-to-disable-it.aspx)

无论如何，CDC 是一种非常有用的机制，它可以帮助我跟踪数据库上的所有更改。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-02-17T11:43:50.350

# html - Change DIV background when INPUT filed has data. How?

> ID：10060409
> 
> 赞同：-2
> 
> 时间：2012-04-08T04:36:31.193
> 
> 标签：html

I have an input field inside a div, and I would like the div background to change when the input field has data typed inside.

How is this done?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T04:42:26.917

你可以尝试使用 jQuery 来解决这个问题。`<head>`通过在包含 jQuery .

```
$(document).ready(function() {
    $("#myInput").keypress(function() {
        if($("#myInput").val().length > 0) $("#myDiv").css("background-color", "red");
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:42:51.257

```
$('div input').keypress(function() {
    $(this).val().length > 0) {
        $(this).parent().css("background-color","red");
    } else {
        $(this).parent().css("background-color","none"); 
    }
}); 
```

如果您想善待您的网页设计师并与他们交朋友，您还可以动态应用和删除类属性：

```
$('div input').keypress(function() {
    $(this).val().length > 0) {
        $(this).parent().addClass("background");
    } else {
        $(this).parent().removeClass("background");
    }
}); 
```

然后，您的设计师可以使用 CSS“背景”类挂钩调整 CSS 文件中的外观和感觉，而不必担心弄乱您美丽的 JavaScript 杰作。它还为他们提供了更大的灵活性来进行更改，而无需将所有表示逻辑放入您的业务逻辑代码中。

```
/* Example CSS rule */
input.background {
    background-color: red;
    border-radius: 2px;
    -webkit-box-shadow: 0 0 6px 4px red;
} 
```

# python - 字节字符串与 Unicode 字符串。Python

> ID：10060411
> 
> 赞同：42
> 
> 时间：2012-04-08T04:37:09.700
> 
> 标签：python, string, unicode

您能否详细解释一下 Python 中字节字符串和 Unicode 字符串之间的区别。我读过[这个](http://www.coolinterview.com/interview/5512/)：

> 字节码只是将源代码转换为字节数组

这是否意味着 Python 有自己的编码/编码格式？还是使用操作系统设置？我不明白。你能解释一下吗？谢谢！

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-04-08T04:52:04.783

没有 python 不使用自己的编码。它将使用它有权访问和您指定的任何编码。a 中的一个字符`str`代表一个 unicode 字符。然而，为了表示超过 256 个字符，单独的 unicode 编码每个字符使用一个以上的字节来表示许多字符。`bytearray`对象使您可以访问底层字节。`str`对象具有`encode`接受表示编码的字符串并返回表示该编码中的字符串的对象的方法`bytearray`。`bytearray`对象具有`decode`接受表示编码的字符串并返回将`str`解释`bytearray`为以给定编码编码的字符串的方法。这是一个例子。

```
>>> a = "αά".encode('utf-8')
>>> a
b'\xce\xb1\xce\xac'
>>> a.decode('utf-8')
'αά' 
```

我们可以看到 UTF-8 使用四个字节，\xce、\xb1、\xce 和 \xac 来表示两个字符。在 Ignacio Vazquez-Abrams 提到的 Spolsky 文章之后，我会阅读[Python Unicode Howto](http://docs.python.org/release/3.2/howto/unicode.html)。

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2016-01-09T15:37:41.727

这是一个仅适用于 Python 3 的简单解释的尝试。我希望来自外行，这将有助于为完全没有经验的人消除一些困惑。如果有任何技术上的不准确之处，请原谅我并随时指出。

假设您以通常的方式使用 Python 3 创建一个字符串：

```
stringobject = 'ant' 
```

`stringobject`将是一个 unicode 字符串。

unicode 字符串由 unicode 字符组成。在`stringobject`上面，unicode 字符是单个字母，例如 a、n、t

每个 unicode 字符都分配有一个代码点，它可以表示为一系列十六进制数字（一个十六进制数字可以取 16 个值，范围从 0-9 和 AF）。例如，字母`'a'`等价于`'\u0061'`，而 'ant' 等价于`'\u0061\u006E\u0074'`。

所以你会发现，如果你输入，

```
stringobject = '\u0061\u006E\u0074'
stringobject 
```

您还将获得输出`'ant'`。

现在， unicode在一个称为**encoding的过程中被****转换为 bytes**。**将字节转换为 unicode**的逆过程称为**解码**。

 ******这是怎么做到的？由于每个十六进制数字可以取 16 个不同的值，因此可以体现为一个 4 位二进制序列（例如十六进制数字 0 可以二进制表示为 0000，十六进制数字 1 可以表示为 0001 等等）。如果一个 unicode 字符有一个由四个十六进制数字组成的代码点，则它需要一个 16 位二进制序列来对其进行编码。

不同的编码系统规定了将 unicode 转换为位的不同规则。最重要的是，编码用于表示每个 unicode 字符的位数不同。

例如，ASCII 编码系统每个字符仅使用 8 位（1 个字节）。因此，它只能对码点最长为两个十六进制数字的 unicode 字符进行编码（即 256 个不同的 unicode 字符）。UTF-8 编码系统每个字符使用 8 到 32 位（1 到 4 个字节），因此它可以对 unicode 字符进行编码，其代码点最长为 8 个十六进制数字，即一切。

运行以下代码：

```
byteobject = stringobject.encode('utf-8')
byteobject, type(byteobject) 
```

使用 utf-8 编码系统将 unicode 字符串转换为字节字符串，并返回`b'ant', bytes'`.

请注意，如果您使用 'ASCII' 作为编码系统，则不会遇到任何问题，因为 'ant' 中的所有代码点都可以用 1 个字节表示。但是，如果你有一个 unicode 字符串，其中包含的字符的代码点长于两个十六进制数字，你会得到一个`UnicodeEncodeError`.

相似地，

```
stringobject = byteobject.decode('utf-8')
stringobject, type(stringobject) 
```

给你`'ant', str`。******

# windows - 各种平台上的用户私有临时存储在哪里？

> ID：10060412
> 
> 赞同：1
> 
> 时间：2012-04-08T04:37:10.527
> 
> 标签：windows, linux, macos, solaris

我需要创建一个充满数据文件的目录。这些文件是临时的、**用户私有的**文件。

虽然这些文件是临时的，如果它们被系统删除也没关系，但它们有很多，如果可以的话，我想重用它们。此外，我希望其他应用程序（以同一用户身份运行）也可以访问/创建这些文件。这意味着我需要一个可以跨不同编程语言工作的标准协议。

因为我知道有人会建议它，所以我不想使用 '/tmp' 或 '%TEMP% 或 java system property `java.io.tmpdir`。这些目录是**系统范围的**。我也非常有兴趣找到平台标准或平台认可的方法，而不是仅仅找到一个可行的解决方案。

我正在尝试为各种平台收集这些文件的位置列表。以下是我到目前为止所拥有的，但我非常感谢其他平台和/或对我已经找到的内容的验证。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T08:46:04.687

在 Mac OS X 上，您有几个选择：

`$TMPDIR`实际上是用户范围的。它是 /var/folders 中的一个目录，但是。在那里，有一个特定于用户的目录层次结构。指向的特定目录`$TMPDIR`不允许除用户之外的任何人阅读。这就是 Cocoa 函数`NSTemporaryDirectory()`返回的内容。

您也可以使用 ~/Library/Caches/CompanyOrProductName。系统不会自发清除它，但它不会包含在 Time Machine 备份中，用户可以随意对其进行核对。

您不应该使用 ~/Library/CompanyName。也许您在考虑 ~/Library/Application Support/CompanyName？这可能是合适的，但通常不适用于临时的东西。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-09T05:31:25.113

*   如果您正在运行 Solaris，并且您不介意这些文件在操作系统重新启动时丢失，您可以将文件存储在其中`/tmp/.<username>-<company>/`并更改目录权限以保护它。
*   如果您希望这些临时文件在重新启动后仍然存在，请使用`/var/tmp/.<username>-<company>/`或`~/.<company>`
*   如果用户的主目录被远程挂载并在多台机器之间共享，并且您希望临时文件也以相同的方式共享，则可以使用`~/.<company>/`.

当然，`.username-company`也`.company`只是建议。您可以使用不会与其他应用程序和用户冲突的任何名称。

`~/.<company>`是迄今为止最常见的选择，例如`~/.mozilla`, `~/.openoffice.org`, `~/.adobe`, `~/.mysql`, `~/.netbeans`, `~/.thunderbird`,`~/.VirtualBox`等等。

在任何情况下，在 Solaris 以及可能大多数其他 Unix 和 Unix 类系统上，除了主目录`/tmp`和`/var/tmp`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-06T21:41:37.663

这是我找到的最好的清单。如果您有任何更正/建议，请告诉我。

在 Windows 上：

1.  在“本地应用数据”目录中创建目录“CompanyName”。通过以下方式查找：

    1.  系统环境变量`LOCALAPPDATA`，或
    2.  通过执行以下命令行查询注册表：

        ```
        reg query "HKCU\Software\Microsoft\Windows\CurrentVersion\Explorer\Shell Folders" /v Local AppData 
        ```

在 MacOSX 上：

1.  `$TMPDIR`或可可函数`NSTemporaryDirectory()`
    *   每三天自动清零
2.  `mkdir -m 700 ~/Library/Caches/CompanyOrProductName`
    *   不会被系统自动删除（适合我的用例）
    *   没有 TimeMachine 支持
3.  `mkdir -m 700 ~/Library/Application Support/CompanyOrProductName`
    *   不会被系统自动删除（适合我的用例）
    *   由 TimeMachine 支持

在 Linux 上：

1.  `mkdir -m 700 ~/.company-name`

在 Solaris/OpenSolaris 上：

1.  ?

参考：

*   [Cocoa with Love](http://cocoawithlove.com/2009/07/temporary-files-and-folders-in-cocoa.html)解释了上面的三个 MacOSX 选项，还讨论了几个安全问题。

# maven - jboss-common-core maven dependencies

> ID：10060413
> 
> 赞同：3
> 
> 时间：2012-04-08T04:37:13.727
> 
> 标签：maven, jboss, dependencies

Does anyone know repositories where we can download jboss-common-core and all its dependencies. The dependencies are the ones which cant be found.

```
<dependency>
    <groupId>jboss</groupId>
    <artifactId>jboss-common-core</artifactId>
    <version>2.0.4.GA</version>
</dependency> 
```

I have tried [http://mvnrepository.com/artifact/jboss/jboss-common-core/2.0.4.GA](http://mvnrepository.com/artifact/jboss/jboss-common-core/2.0.4.GA) and [https://repository.jboss.org/nexus/content/groups/public/jboss/jboss-common-core/2.0.4.GA/](https://repository.jboss.org/nexus/content/groups/public/jboss/jboss-common-core/2.0.4.GA/) .

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:40:17.203

看起来它在 Maven 中心：

[http://search.maven.org/#artifactdetails%7Cjboss%7Cjboss-common-core%7C2.0.4.GA%7Cjar](http://search.maven.org/#artifactdetails%7Cjboss%7Cjboss-common-core%7C2.0.4.GA%7Cjar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-02T16:16:19.790

现在是 2016 年，回答这个问题可能为时已晚，但这可能对其他人有所帮助。

要获得该特定 jar/pom 的极简版本，您可以从这里获得它：

[https://repo.spring.io/libs-milestone](https://repo.spring.io/libs-milestone)

有趣的是，如果您尝试从其他 repos 中获取它，pom 文件会有所不同，并且具有更多如上所述无法找到的依赖项。

目前，我正在使用极简主义的，它正在工作 - 但如果我查看其他几个回购，它们都有更长、更难解决的 pom ......所以我认为使用极简主义可能很危险。

希望这可以帮助那里的人。

# java - Java Bit Shift Left Returns Wrong Value

> ID：10060416
> 
> 赞同：1
> 
> 时间：2012-04-08T04:38:15.280
> 
> 标签：java, bit-manipulation, long-integer, shift

I'm having problems with left bit shifts in Java returning incorrect values...

Take 108 << 60 for instance. The answer should be*:

```
124515522497539473408 
```

Java is returning this value

```
-4611686018427387904 
```

for this statement:

```
System.out.println(108L << 60L); 
```

Why??? Both values are forced longs... so I see no reason why any bit values should be truncated. What am I missing here?

*Citation: [Wolfram Alpha](http://www.wolframalpha.com/input/?i=108%20%3C%3C%2060)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T04:41:23.020

`long`您正在移动超出 a （64 位）的长度。108 占用 7 位，所以`108L << 60L`需要 67 位才能正确表示。实际上，由于它是有符号类型，因此您需要 68 位以避免将其解释为负数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T04:42:08.733

108 是 7 位，所以 << 60 是 67 位数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T04:50:08.307

表示的数字`108L << 60`太大，无法表示为`long`。所以你会溢出，并丢失高位。

如果你想表示这么大的数字（没有截断），最简单的方法是使用`BigInteger`.

顺便说一句，移位运算符的第二个操作数不需要是`long`. 实际移位计数是通过将操作数截断为 0 到 63 范围内的数字（对于`long`移位）来计算的 - 请参阅[JLS 15.19](http://docs.oracle.com/javase/specs/jls/se7/html/jls-15.html#jls-15.19)。

# python - Python - Firefox Headless

> ID：10060417
> 
> 赞同：17
> 
> 时间：2012-04-08T04:38:29.540
> 
> 标签：python, firefox, selenium, headless, tor

I've spent the last few days messing around with Selenium, Tor, and Firefox as a combination for multiple tasks. I've managed to write a simple script in Python that takes control of Firefox through Selenium, while Firefox is connected to Tor for privacy.

Now, I'm looking for a way to save resources, so I thought of running Firefox in headless mode, which I thought was a common feature but it doesn't seem to be that. I'm looking for a method to do just that. The reason for it being Firefox and not some terminal based browser is because of the extension "TorButton" that I'm using within Firefox. It has javascript injections built in to it that help with privacy.

If anyone has done this before (which I'm sure many have!), some tips would be greatly appreciated, thank you!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T05:16:53.610

xvfb 是执行此操作的常用方法。搜索“selenium xvfb”应该会找到很多，例如：

*   [是否也可以在不运行 X 服务器的情况下运行 Selenium 脚本？](https://stackoverflow.com/questions/9207320/is-it-possible-to-run-selenium-scripts-without-having-an-x-server-running-too)
*   [如何在 Xvfb 中运行 Selenium？](https://stackoverflow.com/questions/6183276/how-do-i-run-selenium-in-xvfb)
*   [http://www.alittlemadness.com/2008/03/05/running-selenium-headless/](http://www.alittlemadness.com/2008/03/05/running-selenium-headless/)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2017-11-25T01:14:34.543

### 自 2017 年 9 月 28 日版本 56 发布以来，Firefox 无头模式可在所有三个主要操作系统中使用。

您可以通过 设置无头模式`webdriver.FirefoxOptions()`，就像使用 Chrome 一样：

```
from selenium import webdriver

options = webdriver.FirefoxOptions()
options.add_argument('headless')
driver = webdriver.Firefox(options=options) 
```

PS 如果您使用 Selenium < 3.8.0，则必须替换`webdriver.FirefoxOptions()`为`webdriver.firefox.options.Options()`（请参阅 PR [#5120](https://github.com/SeleniumHQ/selenium/pull/5120)）。

此外，使用环境变量`MOZ_HEADLESS`也会做同样的事情：

```
import os
from selenium import webdriver

os.environ['MOZ_HEADLESS'] = '1'  # <- this line
driver = webdriver.Firefox() 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-07-29T05:07:38.890

或者使用真正的无头浏览器，例如轻量级且与 selenium 完美集成的**Phantomjs**

```
from selenium import webdriver
driver=webdriver.PhantomJS('your pahtomjs exe file locaiton') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-09-14T08:04:24.043

如果终于找到答案：

首先，首先要做这些：
注意正确设置火狐驱动路径。

接着：

> sudo apt-add-repository ppa:mozillateam/firefox-next
> sudo apt-get update
> sudo apt-get install firefox xvfb
> Xvfb :10 -ac &
> export DISPLAY=:10

最后运行这个命令，看看我们的实现是否有任何错误。

> 火狐

如果没有任何输出，只需单击**ctrl+c**。
好的，然后编写此代码。

```
from selenium import webdriver

class FireFoxLoadTest:
    def __init__(self):
        # 1 - Load a fire fox web driver
        self.driver = webdriver.Firefox()

    def do_test(self, url):
        # 2 - Start to check url on the fire fox browser
        result = self.driver.get(url)
        self.driver.quit()
        return self.result

fire_fox = FireFoxLoadTest()
res = fire_fox.do_test('http://www.google.com')
print(res) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-03T08:56:35.577

无头 Firefox 正在取得进展。

从 2017 年 4 月 21 日起，[https://adriftwith.me/coding/2017/04/21/headless-slimerjs-with-firefox/](https://adriftwith.me/coding/2017/04/21/headless-slimerjs-with-firefox/)

> tl;dr Firefox Nightly on Linux 支持无头运行 SlimerJS。
> 更多平台和完整的无头 Firefox 即将推出。

# bash - What is the meaning of !# (bang-pound) in a sh / Bash shell script?

> ID：10060419
> 
> 赞同：15
> 
> 时间：2012-04-08T04:39:21.697
> 
> 标签：bash, shell, scala, command-line

I want to understand how this Scala script works:

```
#!/usr/bin/env bash
exec scala "$0" "$@"
!#
object HelloWorld {
    def main(args: Array[String]) {
        println("Hello, world! " + args.toList)
    }   
}
HelloWorld main args 
```

On line 3, what is "!#" doing? Is the remainder of the file then fed to [standard input](http://en.wikipedia.org/wiki/Standard_streams#Standard_input_.28stdin.29) of the Scala program? Also, is '!#' documented anywhere?

NB: The nearest thing I could find, although it is not directly relevant in any way is Stack Overflow question *[Why do you need to put #!/bin/bash at the beginning of a script file?](https://stackoverflow.com/questions/8967902)* (about the beginning of a [Bash](http://en.wikipedia.org/wiki/Bash_%28Unix_shell%29) script).

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-04-08T04:48:04.580

从[原始文档](http://www.scala-lang.org/docu/files/tools/scala.html)：

> 脚本文件可能有一个可选的标头，如果存在则被忽略。有两种方式来格式化标题：要么以#开头！并以 !# 结尾，或以 ::# 开头！并以 ::!# 结尾。

因此，以下代码只是 Scala 脚本的标头：

```
#!/usr/bin/env bash
exec scala "$0" "$@"
!# 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T19:40:14.097

Based purely on experimentation (I assume this is described somewhere):

Beginning with Scala 2.10.0, the non-standard (from a POSIX scripting POV) pound-bang (!#) is no longer required in a POSIX shell environment. The following single line works (but must be the first line of the script, with no leading spaces):

```
#!/usr/bin/env scala 
```

However, the only way to provide a shebang in a windows batch file is to trick it into calling Scala with itself as the first argument. Consequently, Scala needs to know where the last line of the batch file is, and therefore requires the closing ::!# line. Here's a working example:

```
::#!
call scala %0 %*
goto :eof
::!# 
```

Correction: I originally had #!/usr/bin/env scalav (notice the trailing v), which is my script to define property "scala.script", add some libraries to the classpath, before 'exec scala' itself. That way it's possible to determine the name of the script that is being executed, although scalav must then be in your PATH.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T06:20:15.903

当我在[BluesRockAddict's answer](https://stackoverflow.com/questions/10060419/what-is-the-meaning-of-bang-pound-in-a-sh-bash-shell-script/10060452#10060452)`!#`的示例程序中删除时，我在控制台中收到以下错误：

> 错误：脚本文件没有用 !# 或 ::!# 关闭其标题 发现一个错误

从上面的错误信息中，我明白了以下几点：

1.  `!#`是 header 的结束标记`exec scala "$0" "$@"`，它可能告诉 Scala 后面`!#`的内容是要执行的 Scala 代码。
2.  `!#`可以替换为`::!#`。

# php - Is MIME type detection the best way to detect a kind of file?

> ID：10060421
> 
> 赞同：8
> 
> 时间：2012-04-08T04:39:33.220
> 
> 标签：php, mp3, mime-types

I’m working on an upload form in PHP that must allow only MP3 files.

When the upload is done, I analyze the file to check whether is it really an MP3\. The first step is to detect the mime type as `audio/mpeg`. I use the libraries `finfo_file()` and works fine except that during the tests some MP3 files are rejected because their MIME type results as `application/octet-stream`.

My questions are:

*   Should my app definitely refuse those MP3 files? They actually play audio.
*   Is there any reason why this MIME type is an MP3?
*   is the detection of MIME type the most sure way to know the kind of file?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-15T02:30:49.910

在大多数需要上传的应用程序中，我有时会根据预定义的 MIME 类型列表验证浏览器（客户端）传递的 MIME。这种方法一般假设如果浏览器无法传达正在上传文件的 MIME 类型的可疑情况，我可能不想在此时处理它。

```
<?php

$valid_mp3_mimes = array(
    'audio/mpeg',
    'audio/x-mpeg',
    'audio/mp3',
    'audio/x-mp3',
    'audio/mpeg3',
    'audio/x-mpeg3',
    'audio/x-mpeg-3',
    'audio/mpg',
    'audio/x-mpg',
    'audio/x-mpegaudio',
    'video/mpeg',
    'video/x-mpeg',
);

$uploaded_file_mime = $_FILES['upload_field_name']['type'];

if(!in_array($uploaded_file_mime, $valid_mp3_mimes))
{
    die('Upload is not a valid MP3 file.');
} 
```

您可能会或可能不会觉得这对您的目的来说已经足够了。PHP 手册明确指出，**如果浏览器提供了此信息**，则此信息可用，并且 MIME 类型未在服务器端检查，因此不应视为理所当然。

需要考虑的一件事是服务器上允许您验证文件的真正 MIME 类型的资源的可用性。

作为 PHP 开发人员，我们喜欢在大多数情况下创建独立于平台的代码的灵活性（例如，我们构建在运行 XAMPP 的 Windows 系统上的 Web 应用程序可以部署到 Linux 托管环境，只需很少的修改）。但是，在验证 MIME 类型时，我们开始引入需要验证这些工具是否存在的平台相关方法（例如“file”或“finfo_file”）。

这可能是一个值得研究的实现（取自 CodeIgniter GitHub 存储库），它利用了这些工具，并且与您将在 PHP 范围内获得的工作示例一样彻底：

**如果可能，文件 MIME 类型会检测上载文件的（实际）MIME 类型。** [https://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Upload.php#L983](https://github.com/EllisLab/CodeIgniter/blob/develop/system/libraries/Upload.php#L983)

* * *

**来源**

PHP 手动 POST 方法上传 - [http://www.php.net/manual/en/features.file-upload.post-method.php](http://www.php.net/manual/en/features.file-upload.post-method.php)

网站管理员工具包 Mime 类型 - [http://www.webmaster-toolkit.com/mime-types.shtml](http://www.webmaster-toolkit.com/mime-types.shtml)

FILExt .MP3 文件 - [http://fileext.com/file-extension/MP3](http://filext.com/file-extension/MP3)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:08:56.590

除了 MIME 之外，最好的文件检测方法是使用“魔术字节”或“魔术数字”方案。Unix `file`（以及`finfo_file`）实际上使用“魔术字节”来执行此文件检测。所以，简而言之：是的。

不要太担心你的文件是什么样子，更多的是你可以用它做什么。只要它播放，文件应该没问题。

如果你*真的*想做更多，你可以自己检查魔术字节。这里有[一个它们的列表](http://www.garykessler.net/library/file_sigs.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T04:49:30.463

如果您想要一种非常健壮的方法来检测文件类型，而不仅仅是信任客户端提供正确的 MIME 类型，请使用UNIX 上的[文件实用程序。](http://unixhelp.ed.ac.uk/CGI/man-cgi?file)

```
$ file Black\ Sands\ 01\ Prelude.mp3
Black Sands 01 Prelude.mp3: Audio file with ID3 version 2.2.0, contains: MPEG ADTS, layer III, v1, 320 kbps, 44.1 kHz, Stereo

$ file homework/math475-hw8.docx
homework/math475-hw8.docx: Microsoft Word 2007+ 
```

在 PHP 中，您可以使用[exec](http://php.net/manual/en/function.exec.php)函数来调用它。

# android - 在同一活动中再次使用无线电组时重置我检查的无线电组

> ID：10060423
> 
> 赞同：5
> 
> 时间：2012-04-08T04:40:00.337
> 
> 标签：android, android-layout, radio-group

我正在制作一个测验应用程序...我正在通过“id”访问问题...每次回答一个问题（选中任何单选按钮）时，id 都会增加并调用 doInBackground() 函数来加载下一个问题....但是当下一个问题被加载时，我希望我的无线电组完全刷新（没有检查无线电，原始白色文本）...怎么做？？？？

这是我的活动....

```
 public class JsonDemo extends Activity 
 {
JSONObject json;
HttpClient client;
TextView q_desc,c_or_w,id_check;
RadioButton rb_a,rb_b,rb_c,rb_d;
RadioGroup rg;
String ans;
int id=1;
int score=0;

@Override
protected void onCreate(Bundle savedInstanceState) {

    // TODO Auto-generated method stub

    super.onCreate(savedInstanceState);

    setContentView(R.layout.result_json);

    q_desc=(TextView)findViewById(R.id.q_desc);
    c_or_w=(TextView)findViewById(R.id.corr_incorrect);
    id_check=(TextView)findViewById(R.id.id_check);
    rg=(RadioGroup)findViewById(R.id.rg_option);
    rb_a=(RadioButton)findViewById(R.id.opt_a);
    rb_b=(RadioButton)findViewById(R.id.opt_b);
    rb_c=(RadioButton)findViewById(R.id.opt_c);
    rb_d=(RadioButton)findViewById(R.id.opt_d);

    client=new DefaultHttpClient();

    new Read().execute(Integer.toString(id));

}
 public  JSONObject getData(String id)throws     ClientProtocolException,IOException,JSONException
   {
     String url = "http://10.0.2.2:7001/proj/json.jsp";
     HttpPost post = new HttpPost(url);
     List<NameValuePair> pairs = new ArrayList<NameValuePair>();
     pairs.add(new BasicNameValuePair("id",id));
     post.setEntity(new UrlEncodedFormEntity(pairs));

    HttpResponse r=client.execute(post);
    int status=r.getStatusLine().getStatusCode();

    if(status == 200)
    {
        HttpEntity e=r.getEntity();
        String data=EntityUtils.toString(e);
        JSONObject last=new JSONObject(data);
        return last;

    }
    else
    {
        Toast.makeText(JsonDemo.this, "error", Toast.LENGTH_SHORT);
        return null;
    }

}

 public class Read extends AsyncTask<String,Integer,JSONObject> implements     OnCheckedChangeListener
{
ProgressDialog dialog = ProgressDialog.show(JsonDemo.this, "", "Loading Question,   Please wait...");

@Override
protected void onPreExecute() {

    dialog.show();

}

@Override
protected void onProgressUpdate(Integer... values) {
    // TODO Auto-generated method stub
    rg.clearCheck();
}

@Override
protected void onPostExecute(JSONObject result) {
    // TODO Auto-generated method stub
    try {
        String desc=json.getString("desc");
        String option_a=json.getString("a");
        String option_b=json.getString("b");
        String option_c=json.getString("c");
        String option_d=json.getString("d");
        ans=json.getString("ans");
        q_desc.setText(desc);
        rb_a.setText(option_a);
        rb_b.setText(option_b);
        rb_c.setText(option_c);
        rb_d.setText(option_d);
        rg.clearFocus();
        if(dialog!=null)
        {
            dialog.dismiss();
        }

        rg.setOnCheckedChangeListener(this);

    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
 }

 @Override
 protected JSONObject doInBackground(String... params) {
    try {
        json=getData(params[0]);
        return json;
    } catch (ClientProtocolException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } catch (JSONException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    return null;
 }

 public void onCheckedChanged(RadioGroup rg, int checkedId) {

    switch(checkedId)
    {
    case R.id.opt_a:
    {
        if(ans.equalsIgnoreCase("a"))
        {

            id=id+1;
            c_or_w.setText("Correct");
            id_check.setText(Integer.toString(id)); 
            rb_a.setTextColor(Color.parseColor("#33ff99"));
            if(id>10)
            {

            }
            else{
                score=score+1;
            new Read().execute(Integer.toString(id));
            }
        }
        else
        {
            id=id+1;
            c_or_w.setText("InCorrect");
            id_check.setText(Integer.toString(id));
            if(id>10)
            {

            }
            else{
            new Read().execute(Integer.toString(id));
            }

        }
        break;

    }
    case R.id.opt_b:
    {
        if(ans.equalsIgnoreCase("b"))
        {

            id=id+1;
            c_or_w.setText("Correct");
            id_check.setText(Integer.toString(id));
            rb_b.setTextColor(R.color.green);
            if(id>10)
            {

            }
            else{
                score=score+1;
            new Read().execute(Integer.toString(id));
            }   
        }
        else
        {
            id=id+1;
            c_or_w.setText("InCorrect");
            id_check.setText(Integer.toString(id));
            if(id>10)
            {

            }
            else{

            new Read().execute(Integer.toString(id));
            }   
            }
        break;
    }
    case R.id.opt_c:
    {
        if(ans.equalsIgnoreCase("c"))
        {

            id=id+1;
            rb_a.setTextColor(666);
            c_or_w.setText("Correct");
            id_check.setText(Integer.toString(id));         
            if(id>10)
            {

            }
            else{
                score=score+1;
            new Read().execute(Integer.toString(id));
            }
        }
        else
        {
            id=id+1;
            c_or_w.setText("InCorrect");
            id_check.setText(Integer.toString(id));
            if(id>10)
            {

            }
            else{
            new Read().execute(Integer.toString(id));
            }

        }
        break;
    }
    case R.id.opt_d:
    {
        if(ans.equalsIgnoreCase("d"))
        {

            id=id+1;
            c_or_w.setText("Correct");
            id_check.setText(Integer.toString(id)); 
            if(id>10)
            {

            }
            else{
                score=score+1;
            new Read().execute(Integer.toString(id));
            }
        }
        else
        {
            id=id+1;
            c_or_w.setText("InCorrect");
            id_check.setText(Integer.toString(id));
            if(id>10)
            {

            }
            else{

            new Read().execute(Integer.toString(id));
            }

        }
        break;
    }

    }

}

}

} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-08T04:49:03.077

我认为你应该清楚地检查你`RadioGroup`的`onPostExecute()`

```
this.radioGroup.clearCheck();
this.radioGroup.setOnCheckedChangeListener(this); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-03-10T16:00:45.397

如果有人仍在尝试为类似问题找到解决方案而无需创建新活动，请尝试在每次重新使用单选组时设置每个单选按钮 ID。

```
RadioButton radioButton = findViewById(R.id.radio_button);
radioButton.setId(0); 
```

# ios - 从 UITableView 委托类调用父级中的选择器

> ID：10060428
> 
> 赞同：0
> 
> 时间：2012-04-08T04:41:00.943
> 
> 标签：ios, objective-c, uitableview, cocoa-touch, delegates

好的，我已经为此工作了几个小时，并认为是时候伸出援手了。我第一次在一个故事板上使用多个 tableviews (2)。我使用自己的视图控制器（主视图控制器）设置故事板。我委托给主视图控制器的第一个表作为通用模式。对于第二个表视图，我设置了一个单独的类作为委托，并委托给表视图和数据源。

事情看起来不错，每个 tableview 加载并显示正确的数据等。到目前为止一切都很好。

这是第二个表视图的问题 - 外部委托的表视图，我想在通过以下方式选择一行时采取行动： - (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath blah,blah,废话。

所需的操作是启动到连接到“主视图控制器”的新视图控制器的 segue。我在主视图控制器中有一个选择器，它具有执行 segue 操作（否则有效）

我不知道如何建立从代理到主视图控制器的连接，所以我可以调用正确的选择器，然后启动segue。通常在segues之间我使用segue.parent..segue.destination....等。它们在这种情况下不起作用。我无法从委托类中转义，因为转义未连接到委托。

我已经尝试过这种方法，但它不起作用：StartViewController：

```
VisitListDelegate = [[VisitsMainPageDelegate alloc] init];
[self.iboVisitsTableView  setDelegate:self.VisitListDelegate];
[self.iboVisitsTableView  setDataSource:self.VisitListDelegate];

LocalVisits *LV = [[LocalVisits alloc] init]; //datasource
VisitListDelegate.visits = [LV getLocalVisits]; //sets variable in delagate 
```

名为 VisitsMainPageDelegate 的委托类

```
#import <UIKit/UIKit.h>
@class StartViewController;

@interface VisitsMainPageDelegate : UIViewController
    <UITableViewDelegate,UITableViewDataSource>  {

StartViewController *sourceParent;

}
@property (nonatomic,retain) StartViewController *sourceParent;
@property (nonatomic,strong) NSMutableArray *visits;
@end 
```

然后尝试像这样引用它：

```
[sourceParent jumpToVistDetailsForThisVisit:@"test"]; 
```

我没有收到错误，但它不起作用。

对解决此问题的任何帮助将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:35:20.193

当你实例化委托类时，你需要给它一个 ViewController 的引用，如下所示：

```
[[VisitsMainPageDelegate alloc] init];
[self.iboVisitsTableView setDelegate:self.VisitListDelegate]; 
delegate.sourceParent = self; 
```

您已经拥有的前两行 - 这是您需要添加的最后一行。

# php - PHP中的后期静态绑定

> ID：10060431
> 
> 赞同：4
> 
> 时间：2012-04-08T04:41:37.220
> 
> 标签：php, late-static-binding

我正在阅读有关 LSB 功能的 php 手册，我了解它在静态上下文中的工作原理，但在非静态上下文中我不太了解它。手册中的示例是这样的：

```
<?php
class A {
    private function foo() {
        echo "success!\n";
    }
    public function test() {
        $this->foo();
        static::foo();
    }
}

class B extends A {
   /* foo() will be copied to B, hence its scope will still be A and
    * the call be successful */
}

class C extends A {
    private function foo() {
        /* original method is replaced; the scope of the new one is C */
    }
}

$b = new B();
$b->test();
$c = new C();
$c->test();   //fails
?> 
```

输出是这样的：

```
success!
success!
success!

Fatal error:  Call to private method C::foo() from context 'A' in /tmp/test.php on line 9 
```

我不明白B类，A中的私有方法如何继承给B？谁能带我了解这里发生了什么？非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T05:07:16.553

使用后期静态绑定只会更改为调用选择的方法。一旦选择了方法，就会应用可见性规则来确定是否可以调用它。

对于`B`,`A::test`查找和调用`A::foo`。中的评论`B`不正确`foo`- 未复制到`B`. 由于它是私有的，因此只能从其他方法调用，`A`例如`A::test`.

`C`失败，因为后期静态绑定机制定位*新*的私有方法`C::foo`，但`A`'s 的方法无权访问它。

我建议您为静态字段和方法保留后期静态绑定以避免混淆。

# c - 多维数组和传输缓冲区

> ID：10060438
> 
> 赞同：-2
> 
> 时间：2012-04-08T04:43:47.307
> 
> 标签：c, arrays, string, debugging

我正在尝试将缓冲区保存到 1800 个字符的数组段中。当我能够传输缓冲区但当我尝试打印每个新缓冲区时。我的输出为空。我到底做错了什么？

* * *

编辑-我将循环更改为此以将空终止添加到第二维的末尾。现在输出告诉我它是空的。但是`printf("%c")`说数据已经转移了。

```
while(buf_pos < msg_size+1){
    if(buf_pos % 1800 == 0){
        msg_buff[key_num][cbuf_pos]='\0';
        key_num++;
        cbuf_pos=0;
        msg_buff[key_num][cbuf_pos]=buf[buf_pos];
    }else
        msg_buff[key_num][cbuf_pos]=buf[buf_pos];

    printf("%c",msg_buff[key_num][cbuf_pos]);
    cbuf_pos++;
    buf_pos++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:55:18.330

`cbuf_pos`分配给 时，您在哪里增加`msg_buff`？此外，在`if(buf_pos % 1800 ==0)`, 中`msg_buff[key_num][cbuf_pos]`以 '\0' 结束（检查是否还有一个字符）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:51:32.147

你期望这会做什么？

```
 printf("KEY%d DATA:%.*s\n",count,msg_buff[count][0],1800); 
```

`msg_buff[count][0]`是数组的第一个字符。您需要通过`msg_buff[count]`才能打印整个字符串。

此外， * 修饰符定义为*格式字符串中未指定宽度，而是作为必须格式化的参数之前的附加整数值参数*。我将此解释为您的第三个参数 ( `1800`) 必须在您的第二个参数 ( `msg_buff[count]`) 之前。为简单起见，请确保所有字符串都以 NULL 结尾，并且不要使用宽度修饰符。

要实际创建键数组，请不要在循环中一个一个地复制每个字符。改为使用`strncpy`。确保缓冲区中有空终止符的空间（分配 1801 个字节而不是 1800 个字节）。现在你的复制循环无论如何都被打破了，因为你永远不会递增`cbuf_pos`，所以每个字符都被写入数组中的第一个位置。

# java - 控制序列化

> ID：10060440
> 
> 赞同：-1
> 
> 时间：2012-04-08T04:44:31.627
> 
> 标签：java

我正在阅读一篇文章，其中指出..如果一个类的超类已经在 J​​ava 中实现了可序列化接口，那么它已经在 J​​ava 中可序列化，因为你不能未实现一个接口，它实际上不可能使它成为非可序列化类，但是是的一种避免新类序列化的方法。为避免 java 序列化，您需要在 Class 中实现 writeObject () 和 readObject () 方法，并且需要从这些方法中抛出 NotSerializableException。这是自定义 java 序列化过程的另一个好处，如上述问题中所述，通常它会随着面试的进行而作为后续问题提出。

例如 .. 有一个超类 ..

```
class Animal implements Serializable
 { 
int weight = 42;
}

and there is a subclass...

class Dog extends Animal
{
    private void writeObject(ObjectOutputStream o)   
                           throws IOException, ClassNotFoundException  
    {  
       //throw nonserializable exception
    }  

  private void readObject(ObjectInputStream o)   
        throws IOException, ClassNotFoundException  
    {  
            //throw nonserializable exception
    }  

} 
```

您能否如上面在 readobject() 和 writeobject() 中的 Dog 类中看到的那样告诉我，我如何编写指示抛出 nonserilizable 异常的代码......它是否像抛出 nonseriliable 异常......请告知..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:47:59.900

```
class Dog extends Animal
{
    private void writeObject(ObjectOutputStream o)   
                           throws IOException, ClassNotFoundException 
    {  
       throw new NotSerializableException();
    }  

  private void readObject(ObjectInputStream o)   
        throws IOException, ClassNotFoundException  
    {  
        throw new NotSerializableException();
    }  

} 
```

# javascript - 为什么在使用样式标签而不是没有样式标签填充 iframe 时，jQuery 会删除 body 和 head 标签？

> ID：10060446
> 
> 赞同：7
> 
> 时间：2012-04-08T04:47:14.340
> 
> 标签：javascript, jquery, iframe

如果我运行以下代码，则会删除 body 和 head 标签。

```
<iframe src='blank.htm'>
    <html>
    <head>
        <style type="text/css">

        </style>
    </head>
    <body>
        test
    </body>
    </html>
</iframe>
<script>
    $('iframe').load(function () {
        var contents = $('iframe').text();
        $('iframe').contents().find('html').html(contents);
    });
</script> 
```

如果我然后删除样式标签，一切都会正确显示。为什么会这样，我怎样才能让它停止删除头部和身体标签？我希望内容按原样填充，无需任何操作。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-22T21:25:29.127

我遇到了同样的问题，并从[这个 SO question](https://stackoverflow.com/questions/2488839/does-jquery-strip-some-html-elements-from-a-string-when-using-html)中了解到，实际上是浏览器进行了剥离，作为其`innerHTML`属性解析的一部分，这是`jQuery`在`.html()`.

相反，问题实际上是`jQuery`使用中间新 DIV，我认为不允许包含某些标签，从而导致剥离。

那么解决方案。就像直接设置元素的`innerHTML`属性一样简单，如下所示：`html`

```
// This forcibly removes head, body, and other tags, since it internally uses an empty DIV and its innerHTML property
jQuery(targetElement).html(exitHtml);

// This works fine
h = document.getElementsByTagName('html')[0];
h.innerHTML = htmlString; 
```

对于您的特定情况，`html`只需**将**`iframe`. 您的最终代码可能是：

```
<script>
    $('iframe').load(function () {
        var contents = $('iframe').text();
        iframeHtml = $('iframe').contents().find('html').get(0);
        iframeHtml.innerHTML = contents;
    });
</script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T06:29:51.660

您可以按照以下步骤了解如何将 iframe 内容复制到字符串、修改它并在 iframe 中替换它。这些步骤旨在在您的 Chrome 调试器中执行，仅用于教育/演示目的。一旦你了解了这个过程，你就可以尝试在你的网站上复制你的代码。

**在 Chrome 调试器中一次运行每个函数：**

```
// test iframe I loaded in a sandbox also at http://example.com
$('body div:first').before('<iframe src="http://example.com/company"></iframe>');

// retrieved the body of the iframe - I cloned it so I could perform operations
  // on the copy without bothering the iframe content.
iBody = $('iframe:first').contents().find('body').clone();

// got the head
iHead = $('iframe:first').contents().find('head').html();

// if there is script in the body, it really messes things up. So in my tests, 
  // I had to remove it before adding it back to the iframe.
iBody.find("script").remove();

// verify there are no script elements
ibody.html(); 

// replace the iframe head
$('iframe:first').contents().find('head').html(iHead);

// replace the iframe body first with a placeholder. The body is the sensitive 
  // part. If you destroy the DOM, it can make the entire page, including 
    // the parent, turn completely white.
$('iframe:first').contents().find('body').html('<div></div>');

// ** inserted something in the copy to prove we modified it!!
iBody.append("<div style='position:absolute;z-index:5000; color:red; " + 
    "background-color:white;'>JAMES WAS HERE</div>");

// now replace the body
$('iframe:first').contents().find('body').html(iBody); 
```

> **在网站底部，在 iframe 内，我看到我的消息在白色背景上显示为红色。我也可以在源代码中看到它：**

```
$('iframe:first').contents().find('body').html(); 
```

我在一个匿名网站上执行了这些操作，使用 Chrome 的调试器控制台运行命令。第一个命令在主页中创建一个 iframe，该 iframe 中包含网站的公司页面。其余命令获取该 iframe 的头部和主体，克隆主体，添加一些内容，例如“JAMES WAS HERE”消息，到主体克隆，然后用该副本替换 iframe 主体。

我还通过在浏览器中加载[http://getsatisfaction.com](http://getsatisfaction.com/explore/product-innovation)并在 iframe 中加载[http://getsatisfaction.com/explore/product-innovation来验证相同的结果。](http://getsatisfaction.com)通过重复上述步骤，我看到了我的消息“JAMES WAS HERE”。

**我遇到的最严重的问题是无法将 JavaScript 或 CSS 样式标签留在副本中。样式的解决方案是在将主体添加回 iframe*之前*进行所有样式修改。**

出于某种原因，浏览器试图运行 JavaScript 并抛出错误。这些错误的上下文让我认为 JavaScript 是在顶级上下文而不是 iframe 上下文中运行的！这对你来说可能是个大事。您可能需要想出另一个计划来在弹出窗口或内联中显示预览。此外，这可能在具有不同 JavaScript 的不同网站上表现不同。它也可能在 IE 中表现得很奇怪。

简而言之，我实际上并不认为该解决方案可以支持生产网站，因为必须在 iframe 中删除 JavaScript；但是，根据您的需要，如果您不需要 iframe DOM 来使用任何 JavaScript，则可以在生产中使用此功能。

然而，这是一个值得探索的有趣问题！

# javascript - 是否可以从 javascript if 语句中将变量传递/比较到 SQL 数据库？

> ID：10060447
> 
> 赞同：3
> 
> 时间：2012-04-08T04:47:16.917
> 
> 标签：javascript, html, sql, database

基本上，我的代码声明了一个变量，该变量检查是否将特定字符串输入到文本框中，当用户按下回车键，然后使用子字符串时，它声明了一个变量，该变量在输入的特定单词之后包含一个字符串（如下所示）。

我想将此变量传递给 php 并最终将其与 SQL 数据库进行比较，或者（但我听说这是不安全/不可能的）直接将其与来自 javascript 的 SQL 数据库进行比较。

这可能吗？

```
var match = textInput.value.indexOf("string");

if (keycode == 13 && match != -1) { <- checks to see if enter is pressed + "string" has been typed.
    var some_string = text.input.value.substring(7); <- takes everything after the word "string" 
```

这就是我想将变量“some_string”传递给 SQL 数据库的地方，以执行检查并返回 true 或 false。

我希望这很清楚，并提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T04:53:27.643

使用 AJAX 将值传递给 PHP 请求处理程序，该处理程序在适当的数据库调用中使用该值。为安全起见，在构建 SQL 时使用[mysql_real_escape_string](http://www.w3schools.com/php/func_mysql_real_escape_string.asp)转义参数。然后让处理程序返回响应以指示结果（JSON/XML/text/...）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T19:22:14.620

您将不得不使用[ajax 请求](https://developer.mozilla.org/En/XMLHttpRequest/Using_XMLHttpRequest)。您应该异步执行此操作，否则浏览器将挂起。

但是异步请求与回调一起使用，并且不会返回比承诺更多的东西。所以，而不是

```
function synchronous(){
    // init xhr and send
    return xhr.response; // or json-parse of response-text or something
}
try {
    if (synchronous() == "wanted value")
        // do something
    else
        // do something else
} catch(e) {
    // alert a problem
} 
```

你需要使用

```
function asychronous(success, error) {
    // init xhr, register handlers and send
    // return nothing
}
asynchronous(function scb(data) {
    if (data == "wandted value")
        // do something
    else
        // do something else
}, function ecb(e) {
    // alert a problem
}); 
```

# asp.net-mvc-3 - RedirectToAction 返回调用 Action

> ID：10060450
> 
> 赞同：0
> 
> 时间：2012-04-08T04:47:48.353
> 
> 标签：asp.net-mvc-3, razor

在我的索引操作中，我调用了我的 NotFound 操作。我跟着调试，如果条件测试为真，它转到“return RedirectToAction("NotFound");” 语句，然后转到 Dispose，然后返回 Index Action 而不是 NotFound Action。如果我重定向到详细信息操作，它工作正常。这些都在同一个控制器中。NotFound 视图只包含文本。

```
if (condition tests true) { return RedirectToAction("NotFound"); } 

public ActionResult NotFound()
{ return View(); } 
```

我也尝试过将 NotFound 作为 ViewResult。它仍然失败。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T04:52:30.673

您可以`NotFound`直接从索引操作返回视图

```
public ActionResult Index()
{      
  if(yourcondition)
  {
     return View("NotFound");
  }
  else
  {
     // Return the Index View.
     return View();
  }  
} 
```

只要有一个名为“NotFound.cshtml”的视图，这将起作用

# linux - 我怎样才能找到系统调用（一些数字）例程？

> ID：10060458
> 
> 赞同：1
> 
> 时间：2012-04-08T04:49:53.747
> 
> 标签：linux, linux-kernel, system-calls

我正在开发一个自编译的 linux 内核。修改内核的人添加了一些系统调用。我想要做的是知道该特定数字的实际例程（.c 文件）在哪里，即 syscall(300)，那么我怎么知道 300 的例程在哪里？

详细说明： syscall 应该知道当我执行 syscall (300) 时要调用哪个文件，这是一个已编译的 .c 文件，我想查看那个 .c 文件。

我正在使用 Ubuntu 9.10 期待您的意见，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:47:59.673

该文件`syscall_table.S`应包含列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:52:13.583

让我们看看系统调用是如何在 x86_32 上实现的（看[那里](http://lxr.linux.no/linux+v3.3.1/arch/x86/kernel/entry_32.S#L500)）：

```
 500 ENTRY(system_call)
 501        RING0_INT_FRAME                 # can't unwind into user space anyway
 502        pushl_cfi %eax                  # save orig_eax
 503        SAVE_ALL
 504        GET_THREAD_INFO(%ebp)
 505                                        # system call tracing in operation / emulation
 506        testl $_TIF_WORK_SYSCALL_ENTRY,TI_flags(%ebp)
 507        jnz syscall_trace_entry
 508        cmpl $(NR_syscalls), %eax
 509        jae syscall_badsys
 510 syscall_call:
 511        call *sys_call_table(,%eax,4)
 512        movl %eax,PT_EAX(%esp)          # store the return value
 [...] 
```

如您所见，第 511 行有一个系统调用调度指令：

```
call *sys_call_table(,%eax,4) 
```

因此，您需要做的第一件事就是获取`sys_call_table`地址。接下来就是获取`$(NR_syscalls)`价值。最后一件事很简单——遍历所有的`sys_call_table`值。

如果您有，`gdb`您可以执行以下操作：`vmlinux``/proc/kcore`

```
# gdb vmlinux /proc/kcore 
```

除此之外，您还可以使用`objdump -rd vmlinux`转储内核的反汇编。

# php - CodeIgniter 路由将所有 URI 段映射到一个控制器/方法

> ID：10060460
> 
> 赞同：3
> 
> 时间：2012-04-08T04:50:30.367
> 
> 标签：php, codeigniter, url-routing

我有一个带有“主要”控制器的 CI 应用程序。

我想将所有请求映射到方法 primary->index() 并将段作为参数传递给 index 方法。

我尝试在 config/routes.php 中设置路由： $route['(:any)'] = "primary/index/$1";

但由于某种原因，这不起作用例如：（我想要）www.example.com/test/delta ---（路由）---> www.example.com/primary/index/test/deta

有人知道我错过了什么吗？

**弄清楚了！** $route['(.*)'] = 'primary/index/$1'; 我也忘了用 .htaccess 删除 index.php

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-04-08T04:53:38.370

尝试这个

```
$route['(.*)'] = "primary/$1"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-30T02:55:51.680

也可以通过控制器上的[重新映射来实现](https://ellislab.com/codeigniter/user-guide/general/controllers.html#remapping)

# java - Java if() 不工作

> ID：10060463
> 
> 赞同：3
> 
> 时间：2012-04-08T04:51:19.813
> 
> 标签：java, numbers

当我运行一些代码（稍后显示）时，我告诉它检查字符串是否 == "1"，如果是，则输出 "It's 1!"，否则，输出字符串。

代码：

```
double shirt3 = Math.random() * 9;
String shirt2 = Double.toString(shirt3);
char shirt1 = shirt2.charAt(0);
String shirt = Character.toString(shirt1);

if(shirt == "1") {
    System.out.println("It's 1!");
} else {
    System.out.println(shirt);
} 
```

输出：

7
4
8
1
7
1
7
7
6
0

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T04:53:57.880

你需要使用

```
if (shirt.equals("1"))
    ... 
```

这将比较 String 对象的实际内容，而不是它们的身份。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T04:54:03.547

您犯了 Java 初学者使用`==`测试字符串相等性的错误。请改用该`equals`方法。

更长的解释是，`==`Java 中的运算符测试两个对象引用是否相同；即它测试左右操作数是否是同一个对象。但是您拥有的是两个不同的字符串，它们包含相同的字符序列。它们是“相等”的字符串，但不是同一个对象。

作为一般经验法则，您应该始终使用`equals`来比较字符串。

（在某些情况下`==`可行，但您确实需要了解自己在做什么才能确定。而且在绝大多数用例中，这根本不值得付出努力/冒险。）

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-04-08T04:54:06.930

要检查 Java 中的两个字符串是否相同，请使用`.equals()`：

```
"1" == new String("1") //returns false
"1".equals(new String("1")) //returns true 
```

编辑：添加了 new String("1") 以确保我们正在谈论一个新字符串。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-08T05:03:21.370

除了你需要使用equals方法来比较java中的字符串这一事实

```
// it't allways a good idea to use constant.equals(...)
// to avoid possible NullPointerExceptions
if ("1".equals(shirt))
    ... 
```

在您的情况下，您不必将角色转换为字符串，您也可以比较单个字符。在不创建额外的 String 对象的情况下执行相同的操作，并且您不必处理 equals 方法。

```
if (shirt1 == '1')
        ... 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-04-08T04:54:31.060

要比较字符串，请使用等于。

```
if(shirt.equals("1"))
     System.out.println("It's 1!");
    }else{
        System.out.println(shirt);
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-04-08T09:47:24.343

一个更一般的规则是不要让代码变得比它需要的更复杂。

```
int shirt = (int)(Math.random() * 10); // shirt numbers from 0 to 9.
if(shirt == 1) 
    System.out.println("It's 1!");
else 
    System.out.println(shirt); 
```

这说明`==`可用于比较原语。它也可以用来比较引用，但不能比较对象的内容。

```
Double d = 0.1;
Double e = 0.1;
System.out.println("(Double) 0.1 == (Double) 0.1 is " + (d == e));

double x = 0.1;
double y = 0.1;
System.out.println("0.1 == 0.1 is " + (x == y)); 
```

印刷

```
(Double) 0.1 == (Double) 0.1 is false
0.1 == 0.1 is true 
```

这表明在比较时`Double`，像字符串一样，对象`==`不会比较内容。

当使用缓存时，所有这一切都会造成混淆，就像字符串文字一样。这意味着出于性能原因，在不同位置引用的值实际上使用相同的对象。

```
Integer d = 10;
Integer e = 10;
System.out.println("(Integer) 10 == (Integer) 10 is " + (d == e));

int x = 10;
int y = 10;
System.out.println("10 == 10 is " + (x == y)); 
```

印刷

```
(Integer) 10 == (Integer) 10 is true
10 == 10 is true 
```

第一个示例有效，因为 Java 5.0+ 使用小整数缓存。（小整数的大小因命令行参数而异：}）

```
Integer d = -129;
Integer e = -129;
System.out.println("(Integer) -129 == (Integer) -129 is " + (d == e));

int x = -129;
int y = -129;
System.out.println("-129 == -129 is " + (x == y)); 
```

印刷

```
(Integer) -129 == (Integer) -129 is false
-129 == -129 is true 
```

至于字符串，使用字符串文字缓存。此外，编译器将简化常量表达式，因此以不同方式编写的字符串可以相同。

```
final int one = 1;
int oneB = 1;
String a = "1";
String b = "" + 1;
String c = "" + one;
String d = "" + oneB;

System.out.println(a == b);
System.out.println(a == c);
System.out.println(a == d); 
```

印刷

```
true
true
false 
```

每个字符串的内容是相同的，但`oneB`不是一个常量，所以表达式在运行时被计算并产生一个不同的字符串。

恕我直言：Java 试图向开发人员隐藏详细信息，如果您真的想比较实际引用，则可以使用操作员进行`==`调用，这将是一个更好的选择。`equals``===`

# jquery - Jquery将行添加到表中

> ID：10060468
> 
> 赞同：0
> 
> 时间：2012-04-08T04:51:47.083
> 
> 标签：jquery

我正在尝试将行动态添加到我的网站上具有许多表的特定表中。我使用以下 jquery 来执行该任务。但是，在 appendto 方法中，如果我放入传递的 addrow 变量，它会将行添加到我的所有表中，但如果我用文本指定 id 它工作正常。

```
function addrow(id){

    $("<tr><td><input type = 'text' value = 'Equipo 1' /></td><td></td><td></td><td></td><td></td></tr>").appendTo("[id] tbody");  

} 
```

id 是“#5a7”

这样一行就被添加到我的所有表格中

```
function addrow(id){

    $("<tr><td><input type = 'text' value = 'Equipo 1' /></td><td></td><td></td><td></td><td></td></tr>").appendTo("#5a7 tbody");

} 
```

如果我这样做，它可以正常工作，并且只会将行添加到该表中。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:02:35.463

像这样更改您的 addrow 函数

```
function addrow(id){
    $("<tr><td><input type = 'text' value = 'Equipo 1' /></td><td></td><td></td><td></td><td></td></tr>").appendTo("#"+id+" tbody"); 
} 
```

工作样本[http://jsfiddle.net/5SVAJ/11/](http://jsfiddle.net/5SVAJ/11/)

您元素的 ID 对于元素应该是唯一的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:54:50.590

这就是我所做的：

```
$('#my_table > tbody:last').find('tr:last').after(/*data to append*/); 
```

# android - Android在文本周围画圈

> ID：10060470
> 
> 赞同：17
> 
> 时间：2012-04-08T04:52:02.357
> 
> 标签：android, textview

我有一个文本视图，其中包含一个字符（所有单个数字，数字 0-9）。我想在数字周围画一个圆圈或一个正方形。我看到一个线程提到使用九个补丁来围绕它设置样式，但我不确定如何做到这一点（或者它是否是最好的方法）。我怎样才能在数字周围有一个圆圈？

谢谢

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-04-08T05:20:07.680

只需要像这样创建一个圆形可绘制对象

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android" 
    android:shape="oval">
    <corners android:radius="10dip"/>
    <stroke android:color="@color/red" android:width="2dip"/>
    <solid android:color="@android:color/transparent"/>
</shape> 
```

并将此可绘制对象设置为您的 TextView 背景。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-03-05T23:14:19.387

```
<?xml version="1.0" encoding="utf-8"?>
<shape xmlns:android="http://schemas.android.com/apk/res/android"
    android:shape="oval">
    <stroke android:color="@color/teal_200" android:width="2dip"/>
    <solid android:color="@android:color/transparent"/>
    <size
        android:width="10dp"
        android:height="10dp" 
    />
</shape> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T05:06:42.433

您应该能够只给 TextView 一个 Shape drawable，它是一个圆形作为背景。

[http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape](http://developer.android.com/guide/topics/resources/drawable-resource.html#Shape)

# django - Django：将用户与模型实例相关联

> ID：10060473
> 
> 赞同：0
> 
> 时间：2012-04-08T04:52:20.830
> 
> 标签：django, many-to-many

假设我有一个处理食谱的模型，我想允许用户通过表单输入他们自己的食谱。然后我想将该食谱条目与输入它的用户的用户 ID 相关联。我的猜测是我的模型看起来像这样：

```
class Recipe(models.Model):
    name = models.CharField(max_length=100)
    body = models.TextField()
    creator = models.ManyToManyField(User)

    def __unicode__(self):
        return self.creator 
```

那是对的吗？如果我创建了一个模型表单，它看起来像这样：

```
class RecipeForm(ModelForm):
    class Meta:
        model = Recipe 
```

但是，我将如何在提交时自动将用户信息传递给 Recipe 模型？在我看来这会发生吗？

我目前的看法是这样的：

```
def recipe(request):
    if request.method == 'POST':
        form = RecipeForm(request.POST) #if POST method, bound form to POST data
        if form.is_valid():         
            form.save()
    else:
        form = RecipeForm() #unbound form.
    recipe_list = Recipe.objects.all()
    return render_to_response('forms/recipes.html',
        {'form': form, 'recipe_list': recipe_list},
        context_instance = RequestContext(request)) 
```

在保存之前如何将用户设置为模型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T04:54:46.087

是的，您的视图需要在保存之前在配方模型上设置用户。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T05:18:22.477

### 编辑：

*您应该接受 Ignacio 的回答，因为他在评论中添加了它。*

以下是添加用户的方法：

```
from django.shortcuts import render

def recipe(request):
    if request.method == 'POST':
        form = RecipeForm(request.POST) #if POST method, bound form to POST data
        if form.is_valid():         
            obj = form.save(commit=False) # don't save to DB
            obj.creator = request.user # adds the user
            obj.save()
    else:
        form = RecipeForm() #unbound form.
    recipe_list = Recipe.objects.all()
    return render(request,'forms/recipes.html',
        {'form': form, 'recipe_list': recipe_list}) 
```

# mysql - MySQL逻辑计数操作

> ID：10060476
> 
> 赞同：0
> 
> 时间：2012-04-08T04:52:38.860
> 
> 标签：mysql, sql, count

我在 MySQL 中运行了三个 SQL 查询，但存在逻辑问题。

```
select count(*) from keeper where code!=''; -- result1=2893193
select count(*) from keeper where code=''; -- result2=66
select count(*) from keeper; -- result3=3481069 
```

我预料到了`result1 + result2 = result3`，但事实上，`result1 + result2 < result3`。为什么是这样？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T04:56:38.710

使用`IS NOT NULL`AND`IS NULL`除了`=''`将确保您获得所有空行，就像您正在寻找的那样，或者将列设置为 NULL

```
SELECT count(*) FROM keeper WHERE code!='' OR code IS NOT NULL;
SELECT count(*) FROM keeper WHERE code = '' OR code IS NULL 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T04:55:20.517

始终使用`IS NuLL`ans`IS NOT NULL`分别获取准确的空记录和非空记录。它检查空值和空值。

试试下面：

```
select count(*) from keeper where code is NULL; 
```

和

```
select count(*) from keeper where code is NOT NULL 
```

或者，您可以使用：

```
select  count(*) from keeper where LENGTH(COALESCE(code ,'')) = 0 
```

将为您提供所有带有“空”值的记录 code ，将 NULL 视为空。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T04:58:56.047

[三值逻辑](http://en.wikipedia.org/wiki/Three-valued_logic)攻击！

NULL 和 "" 是两个不同的东西。NULL 被认为既不等于也不不等于`""`，因此您的任何查询都不会返回它。我猜您的第三个查询返回的额外 500,000 条记录已`code`设置为 NULL。`IS NULL`您可以使用或测试空字段`IS NOT NULL`。如果你这样做：

```
SELECT count(*) from keeper where code!='';
SELECT count(*) from keeper where code='';
SELECT count(*) from keeper where code IS NULL; 
```

这三个结果应该加起来就是表中的总行数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-08T05:00:01.110

```
1\.   select count(*) from keeper where code!=''
2\.   select count(*) from keeper where code=''
2.5\. select count(*) from keeper where code is null
3\.   select count(*) from keeper 
```

注意之前插入的那个`3`。NULL 被视为与任何其他值不同的情况，既不等于也不等于任何其他值（包括另一个 NULL）。

# lwuit - 如何减小 lwit 中的字体大小/命令区域？

> ID：10060478
> 
> 赞同：0
> 
> 时间：2012-04-08T04:52:59.220
> 
> 标签：lwuit, lwuit-form, lwuit-textarea, lwuit-button

在 LWUIT..如何减少命令区域大小（屏幕底部添加命令的区域）。

基本上，我希望减小命令文本的字体大小和命令区域的大小。

另外，一般来说，如何一次减少 LWUIT 应用程序中整个文本的字体大小，而不是单独为每个组件做呢？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T12:14:35.220

在 Codename One Designer 或 Resource Editor 中打开主题，然后单击默认条目。将字体大小编辑为小。

仅对软键和 SoftButton 样式执行此操作。

# android - 2d WebGL 库和移植到 IOS/Android

> ID：10060479
> 
> 赞同：0
> 
> 时间：2012-04-08T04:53:18.830
> 
> 标签：android, ios, webgl

我知道这是一个多管齐下的问题，但我即将着手开发 WebGL 2D 游戏，并且将来我想将其移植到 IOS 和 android。我有一点 OpenGL 经验，但我宁愿从一开始就使用已建立的 2d WebGL 库，所以有人对这些有任何经验吗？你知道将来哪种方法最容易移植到 IOS/Android 上吗？

我知道 IOS 目前不支持 webGL，所以移植它的过程可能需要重写所有非 openGL 代码，这就是为什么我想知道是否有任何 WebGL 库是在考虑到这一点的情况下构建的。

我也离开了 IOS 将来可能会支持 WebGL，所以也许我应该认为这是一个静音点，只是假设它会在我准备好移植之前得到支持..

任何可能帮助我开始创业的资源也非常受欢迎！

谢谢！

TLDR：**有什么好的 2D WebGL 库可以让我在长期移植到其他设备时省去心痛？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-24T06:31:30.320

[ChesterGL](https://github.com/funkaster/ChesterGL)看起来很有前途。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T06:22:31.597

我认为您可能选择了错误的技术。HTML5 Canvas 也是 2D 的**，但**它适用于 iOS 和 Android！

并且不要忘记首先尝试一些高级游戏专用库，或者准备使用游戏引擎。这样会容易很多。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-18T02:15:40.833

[Easle JS](http://www.createjs.com/#!/EaselJS)（属于 CreateJS 套件）是一个出色的 webGL 图形/游戏库，由 Microsoft 和 Adob​​e 等大公司提供支持。

似乎最好。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-09T06:28:07.413

老实说，这听起来很适合 Unity。

# ruby-on-rails - ruby rails - 保存方法

> ID：10060490
> 
> 赞同：0
> 
> 时间：2012-04-08T04:55:04.960
> 
> 标签：ruby-on-rails, ruby-on-rails-3, soap, savon

我创建了一个数据模型，我使用的是 mysql 数据库。我使用 savon 来处理 SOAP 请求。在控制台上，我可以看到 SOAP 控制器调试创建数据。部分的大部分都在工作，期待保存创建的信息。

如何引入`save`方法？我想保存从肥皂请求中成功接收到的响应。实际代码很大，因此请尝试在此处跳过发布。如果需要，我会发布。

```
rails g model ticket ticket_num:string t_status:string priority:string solution:string  misc:string
rails generate controller ticket create
rake db:migrate 
```

### 控制器代码：

```
class TicketController < ApplicationController
  def create
    ticket = Ticket.createticket(params[:caller], current_user.user_id, current_user.firstname, current_user.lastname, current_user.email)
    ticket.save
  end
end 
```

### 错误信息：

```
NoMethodError in TicketController#create

undefined method `save' for #<Savon::SOAP::Response:0xaed6da4> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:23:40.247

没有看到代码很难说，但我猜问题是你没有`Ticket`在方法结束时返回新创建的对象`Ticket.createticket`。您可能在方法的最后一行对您的 Savon 客户端执行了某些操作，因此它返回的是该方法而不是新`Ticket`对象。

# google-chrome - Watir自动化后如何备份浏览器状态

> ID：10060493
> 
> 赞同：2
> 
> 时间：2012-04-08T04:55:37.370
> 
> 标签：google-chrome, cookies, selenium, watir, watir-webdriver

```
工具总结：
 Watir-webdriver 1.8.17
 Mac OS X 10.7.3
 铬 18.0.1025.151
```

我目前正在使用 Watir WebDriver 在多个网站上自动执行 Chrome 会话。我需要在整个会话期间的某些时间点备份 Web 浏览器的状态（cookie、缓存等）。最初，我想我可以通过复制`~/Library/Application Support/Google/Chrome/Default`必要的点来使用 Ruby 的文件 IO 库来做到这一点。但是，使用 Watir WebDriver 创建的 Chrome 会话似乎并未将所需信息存储在此默认位置。我怎样才能找到这些数据来备份它？这些信息是否存储在其他地方？除了 Watir 之外，还有什么东西可以让这件事变得更容易吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T20:26:25.597

我终于有办法了！

看来 watir-webdriver 将浏览器状态/用户数据存储在随机路径中。默认情况下，可以在此处找到（其中 XXXXXX 是随机标识符）：

`/private/var/folders/2v/vkd2v3vs5njf69m59nqzc16m0000gn/T/.com.google.Chrome.XXXXXX/Default/`

您可以使用以下标志指定用户数据的精确位置，而不是依赖此默认和随机路径：

`Watir::Browser.new :chrome, :switches => %w[--user-data-dir=/path/to/user/data]`

然后可以使用 Ruby 的标准库对缓存、cookie 等进行备份、删除等操作。希望这对其他人有帮助。

**编辑：**如果您无法找到 watir-webdriver 默认存储用户数据的位置，请通过运行 watir-webdriver 和`top`. 获得 pid 后，`lsof -p <pid>`在终端中键入以查找用户数据的路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-02T20:21:17.493

我喜欢做的另一件事是使用 YAML 将 Watir::Browser 对象序列化（保存）到一个文件中，如下所示：

```
require "yaml"
 File.open("browserObj.yaml", 'w').write YAML::dump(@browser) 
```

然后，此**browserObj.yaml**文件将以易于阅读/可解析的文本包含各种内部详细信息，包括任何浏览器的 PID、临时配置文件的路径等。

```
profile_dir: /tmp/webdriver-rb-profilecopy20121201-1981-9o9t9a 
```

# sql - 我需要在我的 SQL Server 2008 数据库中使用这么多索引吗？

> ID：10060494
> 
> 赞同：2
> 
> 时间：2012-04-08T04:56:08.020
> 
> 标签：sql, sql-server, sorting, indexing

我会在这里感谢 SQL Server 专家的一些建议。让我解释...

我有一个包含 21 列的 SQL Server 2008 数据库表。这是其中的一种快速类型：

*   INT 主键
*   已经是索引的其他几个 INT（用于引用此表和其他表）
*   几个 NVARCHAR(64) 来保存用户提供的文本
*   几个 NVARCHAR(256) 来保存更长的用户提供的文本
*   几个 DATETIME2
*   一个 BIGINT
*   几个UNIQUEIDENTIFIER，一个已经是索引

该表的使用方式是将其作为可排序表呈现给用户，并且用户可以选择对其进行排序的列。该表可能包含数千条记录（如目前有 21,000 条记录，并且还会不断增长。）

所以我的问题是，我是否需要将每一列设置为 INDEX 以实现更快的排序？

PS。忘了说。输出显然支持分页，因此用户一次看到的行数不超过 100 行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T07:21:48.590

与流行的看法相反，仅在列上建立索引并**不能保证**任何查询都会更快！

如果您经常从该表中使用，则很可能**根本不会使用**`SELECT *..`单个列上的这些非聚集索引。

 **一个好的非聚集索引是一个**覆盖索引**，这意味着它包含满足一个或多个给定查询所需的所有列。如果您遇到这种情况，那么非聚集索引可能有意义 - 否则，在更多情况下，查询优化器可能会忽略非聚集索引。这样做的原因是：如果您无论如何都需要所有列，则查询必须从非聚集索引到找到的每一行的实际数据（聚集索引）进行键查找 - 键查找是一项非常昂贵的操作**，**因此，对大量命中执行此操作变得过于昂贵，并且查询优化器将很快切换到索引扫描（可能是聚集索引扫描）来获取数据。

**不要过度索引**- 使用设计良好的聚集索引，将索引放在外键列上以加快连接速度 - 然后暂时搁置它。观察你的系统，衡量性能，*也许*在这里或那里添加一个索引 - 但不要只是用大量索引使系统过载！

拥有太多索引可能比没有更糟糕 - 每个索引都必须维护，例如为每个`INSERT`,`UPDATE`和`DELETE`语句更新 - 这需要时间吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T05:41:20.307

> 这张表......作为可排序的表格呈现给用户...... [可能包含数千条记录

如果您订购了数千条记录以供显示，那么您做错了。典型用户最多可以合理处理500条左右的典型记录。优秀的用户可以处理几千个。不仅如此，**您还会误导您的用户**，使他们误以为他们已经看到了具有代表性的样本。这会导致糟糕的决策制定和低效的用户工作流程。相反，您需要专注于一个好的搜索算法。

另一个要记住的是，更多的索引意味着更慢的插入和更新。这是一个平衡的行为。Sql Server 保留有关它实际执行的查询和排序的统计信息，并使这些统计信息可供您使用。您可以运行一些查询来准确地告诉您 Sql Server 认为它可以使用哪些索引。我会在没有任何排序索引的情况下进行部署，并让它以这种方式运行一两个星期。然后查看数据并查看用户实际对这些列进行排序和索引。

查看此链接以获取有关查找缺失索引的示例和介绍：http:
[//sqlserverpedia.com/wiki/Find_Missing_Indexes](http://sqlserverpedia.com/wiki/Find_Missing_Indexes)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T05:03:22.280

通常索引用于加速`WHERE`条件（在某些情况下`JOINS`）。`PRIMARY KEY`所以我认为除了加速排序之外不要在列上创建索引。您可以在客户端（如果您使用 win 表单或 wpf）或数据库中进行排序以用于 Web 场景

祝你好运**

# php - 图表/图表建议。使用 PHP、jQuery - silverlight？

> ID：10060496
> 
> 赞同：0
> 
> 时间：2012-04-08T04:56:19.383
> 
> 标签：php, jquery, silverlight, graph, charts

我正在使用 PHP、mysql 和 jQuery 编写网站。我真的很感激并希望对我可以使用什么来创建饼图、条形图和折线图提出一些建议，我可以在其中更改正在显示的实际图形。例如，如果我想让条形图使用陆军迷彩图形，而另一个使用花卉像素。我环顾四周，但总是发现向其他人询问他们使用或看到的内容很有帮助。

还有任何关于在任何现有的 PHP 和 jQuery 扩展上使用 silverlight 的建议吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T06:29:44.553

看看[FusionCharts XT](http://www.fusioncharts.com/products/suite/fusioncharts-xt/)对你有好处。它在 JavaScript 中呈现图表，这意味着您的图表也可以在 iOS 设备上很好地工作。

有了 Silverlight，iOS 设备就出来了。

FusionCharts XT 也可以与 jQuery 一起使用，使用 jQuery 的语法：[http ://docs.fusioncharts.com/charts/contents/?jQuery/Overview.html](http://docs.fusioncharts.com/charts/contents/?jQuery/Overview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T06:25:04.610

当您现在正在使用 jQuery 时，我认为这些必须是供您使用的好库。此外，jQuery 会将您的页面大小扩展到 77kbs，因此请尝试使用它的所有优点。

[http://www.1stwebdesigner.com/css/top-jquery-chart-libraries-interactive-charts/](http://www.1stwebdesigner.com/css/top-jquery-chart-libraries-interactive-charts/)

[http://www.jqplot.com/](http://www.jqplot.com/)

# ruby - Ruby 安装问题

> ID：10060498
> 
> 赞同：1
> 
> 时间：2012-04-08T04:56:56.970
> 
> 标签：ruby, installation, rvm

我正在使用 ubuntu 11.10，但在安装 ruby​​ 时遇到了麻烦。当我尝试安装它时，它给出了这个：

```
Installing Ruby from source to: /usr/share/ruby-rvm/rubies/ruby-1.9.3-p125, this may take a while depending on your cpu(s)...

ruby-1.9.3-p125 - #fetching 
ruby-1.9.3-p125 - #extracted to /usr/share/ruby-rvm/src/ruby-1.9.3-p125 (already extracted)
Applying patch 'xcode-debugopt-fix-r34840' (located at /usr/share/ruby-rvm/patches/ruby/1.9.3/p125/xcode-debugopt-fix-r34840.diff)
Error running 'patch -F 25 -p1 -N -f <"/usr/share/ruby-rvm/patches/ruby/1.9.3/p125/xcode-debugopt-fix-r34840.diff"', please read /usr/share/ruby-rvm/log/ruby-1.9.3-p125/patch.apply.xcode-debugopt-fix-r34840.log
ruby-1.9.3-p125 - #autoreconf
ruby-1.9.3-p125 - #configuring 
ruby-1.9.3-p125 - #compiling 
ruby-1.9.3-p125 - #installing 
Removing old Rubygems files...
Installing rubygems-1.8.21 for ruby-1.9.3-p125 ...
Installation of rubygems completed successfully.
ruby-1.9.3-p125 - adjusting #shebangs for (gem irb erb ri rdoc testrb rake).
ruby-1.9.3-p125 - #importing default gemsets (/usr/share/ruby-rvm/gemsets/)
Install of ruby-1.9.3-p125 - #complete 
```

之后我测试了 ruby​​ 并返回：

```
The program 'ruby' can be found in the following packages:
 * ruby1.8
 * ruby1.9.1
Try: sudo apt-get install <selected package> 
```

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T05:49:24.240

我以前也遇到过这个问题。它失败的原因是缺少依赖包。

运行`rvm requirements`，查看要求并安装所有包，包括下面的一个`ruby-head`

对我来说，我必须安装：

`sudo apt-get install curl patch build-essential openssl libreadline6 libreadline6-dev curl git-core zlib1g zlib1g-dev libssl-dev libyaml-dev libsqlite3-dev sqlite3 libxml2-dev libxslt-dev autoconf libc6-dev ncurses-dev automake libtool bison subversion`

运行所有软件包后，输入以下命令安装 1.9.3 或 Rubinius：

`rvm install 1.9.3`或者`rvm install rbx`

它应该顺利进行。

安装后，进入终端->编辑->配置文件首选项->标题和命令，勾选`Run command as login shell`. 关闭，也关闭终端窗口。打开一个新的终端窗口，运行`rvm --default use 1.9.3`（或其他），然后再次关闭终端。

现在打开一个新终端，输入 ruby​​，它现在应该给你正确的 ruby​​。

# c - perror：没有这样的文件或目录

> ID：10060499
> 
> 赞同：0
> 
> 时间：2012-04-08T04:57:03.610
> 
> 标签：c, fwrite, temp, assertion

我有功能。FA->file_temp 是 FA->file 的副本。FA->file_temp 位于 TEMP 目录中。(C:\Users\User\AppData\Local\Temp)

```
stat(FA->file, &st_file);
filesize = st_file.st_size;
ffile = fopen(FA->file_temp, "rb");
if (ffile == NULL) perror("NULL!!!!!!!!!!!!!1\n");

strcpy(str, FA->file_dir);
strcat(str, "packed");
temp_name(str) ;
strcpy( FA->tmpname , str);
ftmpname = fopen(FA->tmpname, "wb");
if (ftmpname == NULL) perror("NULL!!!!!!!!!!!!!1\n");
 if (rc = encode(ffile, ftmpname, filesize)!=0) 
     longjmp(Berror, rc); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:04:26.953

或许，您的程序`'NULL!!!!!!!!!!!!'`之前 是否会大喊大叫`assertion failed`？关于断言的消息说它`fo`是空的。

当我在这里时，

```
if (rc = encode(ffile, ftmpname, filesize)!=0) 
```

可能不是你想要的。这将所有存储`encode(ffile, ftmpname, filesize)!=0`到`rc`. 你可能的意思是：

```
if ((rc = encode(ffile, ftmpname, filesize))!=0) 
```

# bash - bash：如何评估 PS1、PS2、...？

> ID：10060500
> 
> 赞同：8
> 
> 时间：2012-04-08T04:57:03.997
> 
> 标签：bash, evaluate, ps1

> **可能重复：**
> [Echo 扩展 PS1](https://stackoverflow.com/questions/3451993/echo-expanded-ps1)

有没有办法从 bash 脚本中“评估”、等等`PS1`？`PS2`

虽然，我可以使用替代方法来获取我 current 的所有元素`PS1`，但我真的希望能够重用它的定义，而不是使用这些替代方法。

例如，

```
=====================================
 PS1 element -->     Alternate means
=====================================
 \u          -->     $USER
 \h          -->     $HOSTNAME
 \w          -->     $PWD
 ...
===================================== 
```

我可以很好地使用脚本中的“替代方法”列，但我不想这样做。例如，在我的`PS1`中，我通过终端转义序列使用粗蓝色，我希望能够通过评估简单地重用`PS1`.

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-08T05:17:30.727

开源软件的一大优势是源代码是开放的 :-)

如果您下载`bash`（我正在查看版本 4.2）的代码，则有一个`y.tab.c`包含该`decode_prompt_string()`函数的文件：

```
char *decode_prompt_string (string) char *string; { ... } 
```

您可以尝试提取它（连同任何所需的支持例程并构建一个可执行文件来为您完成这项工作。尽管粗略尝试，这些支持例程似乎很多，所以这可能是一项艰巨的任务。

* * *

除此之外，您可能可以通过以下方式“欺骗”`bash`为您扩展它：

```
expPS1=$(echo xyzzyplughtwisty | bash -i 2>&1
         | grep xyzzyplughtwisty
         | head -1
         | sed 's/xyzzyplughtwisty//g') 
```

现在，为了便于阅读，我已经将它放在多行中，但它是在一行中完成的。

这样做是运行 的交互式实例`bash`，传递（希望是）无效命令。

因为它是交互式的，所以它会打印提示，所以我抓住第一行的命令字符串并删除该命令字符串。剩下的应该是提示。

在我的系统上，这是我得到的：

```
pax> expPS1=$(echo xyzzyplughtwisty | bash -i 2>&1 | grep xyzzyplughtwisty | head -1 | sed 's/xyzzyplughtwisty//g')

pax> echo "[$expPS1]"
[pax> ]

pax> 
```

但是，这对多行提示有问题，实际上会给您常规提示，而不是当前的 shell 提示。

* * *

如果你想*正确地做到这一点，*它可能涉及到自己添加一点点`bash`。以下是添加内部命令的步骤`evalps1`。

首先，进行更改`support/mkversion.sh`，以免将其与“真实”混淆`bash`，并且 FSF 可以出于保修目的否认所有知识 :-) 只需更改一行（我添加了`-pax`一点）：

```
echo "#define DISTVERSION \"${float_dist}-pax\"" 
```

其次，更改 `builtins/Makefile.in 以添加新的源文件。这需要许多步骤。

(a) 添加`$(srcdir)/evalps1.def`到`DEFSRC`.

(b) 添加`evalps1.o`到`OFILES`.

(c) 添加所需的依赖项：

```
evalps1.o: evalps1.def $(topdir)/bashtypes.h $(topdir)/config.h \
           $(topdir)/bashintl.h $(topdir)/shell.h common.h 
```

第三，添加`builtins/evalps1.def`文件本身，这是运行`evalps1`命令时执行的代码：

```
This file is evalps1.def, from which is created evalps1.c.
It implements the builtin "evalps1" in Bash.

Copyright (C) 1987-2009 Free Software Foundation, Inc.

This file is part of GNU Bash, the Bourne Again SHell.

Bash is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

Bash is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with Bash.  If not, see <http://www.gnu.org/licenses/>.

$PRODUCES evalps1.c

$BUILTIN evalps1
$FUNCTION evalps1_builtin
$SHORT_DOC evalps1
Outputs the fully interpreted PS1 prompt.

Outputs the PS1 prompt, fully evaluated, for whatever nefarious purposes
you require.
$END

#include <config.h>
#include "../bashtypes.h"
#include <stdio.h>
#include "../bashintl.h"
#include "../shell.h"
#include "common.h"

int
evalps1_builtin (list)
     WORD_LIST *list;
{
  char *ps1 = get_string_value ("PS1");
  if (ps1 != 0)
  {
    ps1 = decode_prompt_string (ps1);
    if (ps1 != 0)
    {
      printf ("%s", ps1);
    }
  }
  return 0;
} 
```

其中大部分是 GPL 许可证（因为我从 修改它`exit.def`），最后有一个非常简单的函数来获取和解码`PS1`。

最后，只需在顶级目录中构建东西：

```
./configure
make 
```

出现的`bash`可以重命名为`paxsh`，尽管我怀疑它是否会像它的祖先一样流行:-)

运行它，你可以看到它的实际效果：

```
pax> mv bash paxsh

pax> ./paxsh --version
GNU bash, version 4.2-pax.0(1)-release (i686-pc-linux-gnu)
Copyright (C) 2011 Free Software Foundation, Inc.
License GPLv3+: GNU GPL version 3 or later <http://gnu.org/licenses/gpl.html>

This is free software; you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

pax> ./paxsh

pax> echo $BASH_VERSION
4.2-pax.0(1)-release

pax> echo "[$PS1]"
[pax> ]

pax> echo "[$(evalps1)]"
[pax> ]

pax> PS1="\h: "

paxbox01: echo "[$PS1]"
[\h: ]

paxbox01: echo "[$(evalps1)]"
[paxbox01: ] 
```

现在，当然，更改代码`bash`以添加内部命令可能被某些人认为是矫枉过正，但是，如果您想要准确评估`PS1`，这当然是一种选择。

# java - 在失去焦点之前，JFrame 标题不会改变

> ID：10060502
> 
> 赞同：1
> 
> 时间：2012-04-08T04:57:19.517
> 
> 标签：java, swing, focus, jframe, title

基本上我有一个用于简单文本编辑器的 JFrame。您正在处理的文件名出现在标题中。因此，我设置了一些代码以在必要时更改标题，并且可以正常调用。

问题是代码被调用后，JFrame 标题不会改变。getTitle() 函数和所有内容都显示标题正在更改。只有当您放松对 JFrame 的关注时，标题才会真正以图形方式更改。

我实施的一个快速而肮脏（非常如此）的修复是 toBack() 后跟 toFront() 有效地迫使你失去焦点 - 这以一种非常丑陋的方式解决了问题。

我尝试过 invalidate() 和 validate()、各种 repaint() 调用和 setVisible(true)，但它们都没有成功。

我做了一些搜索，似乎找不到解决方案，这是一个小错误，但很烦人。有没有人有一些见识？

这是我使用的代码

```
private void() updateTitle() {
    setTitle(((filename == null) ? "untitled" : filename) + ((unsaved) ? "*" : ""));
    toBack();
    toFront();
} 
```

而这一切都在一个扩展 JFrame 的类中。

编辑：

值得一提的是，没有任何循环或线程或任何占用 EDT 的东西。只是简单明了的东西。禁用所有侦听器和一切以尝试调试它。SetTitle 在程序中的其他地方被调用。如果我将 getTitle() 结果打印到控制台，它会告诉我*应该*显示的标题，但直到焦点在窗口上丢失时*才会显示*

编辑2：

事实证明这只是我的 jdk 中的一个错误。重新安装jdk解决了这个问题。很抱歉误导了大家，感谢您的回复。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T05:12:18.727

这个简单的例子（只是调用`setTitle()`）对我有用：

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;

public class Frame2
{
    public static void main( String[] args )
    {
        final JFrame frame = new JFrame( );

        JButton button = new JButton( "press me" );
        button.addActionListener( new ActionListener( )
        {

            @Override
            public void actionPerformed( ActionEvent e )
            {
                frame.setTitle( "New Title" );
            }

        } );

        frame.setTitle( "Title" );
        frame.add( button );
        frame.setSize( 400, 400 );
        frame.setVisible( true );
    }
} 
```

需要注意的一件事：您应该`setTitle()`在[Event Dispatch Thread](http://docs.oracle.com/javase/tutorial/uiswing/concurrency/dispatch.html)上调用。

如下调整您的方法可能会有所帮助：

```
private void() updateTitle() {
  SwingUtilities.invokeLater( new Runnable()
  {
    @Override
    public void run( )
    {
      setTitle(((filename == null) ? "untitled" : filename) + ((unsaved) ? "*" : ""));
    }
  });
} 
```

# string - 为什么我用 Perl 编写的词频计数器示例无法产生有用的输出？

> ID：10060505
> 
> 赞同：3
> 
> 时间：2012-04-08T04:57:37.660
> 
> 标签：string, perl, comparison, word-frequency

我对 Perl 很陌生，我正在尝试编写一个词频计数器作为学习练习。

但是，在处理之后，我无法找出下面代码中的错误。这是我的代码：

```
$wa = "A word frequency counter."; 
@wordArray = split("",$wa);
$num = length($wa);
$word = "";
$flag = 1; # 0 if previous character was an alphabet and 1 if it was a blank.
%wordCount = ("null" => 0);
if ($num == -1) {
    print "There are no words.\n";
} else {
    print "$length";
    for $i (0 .. $num) {
        if(($wordArray[$i]!=' ') && ($flag==1)) { # start of a new word.
            print "here";
            $word = $wordArray[$i];
            $flag = 0;
        } elsif ($wordArray[$i]!=' ' && $flag==0) { # continuation of a word.
            $word = $word . $wordArray[$i];
        } elsif ($wordArray[$i]==' '&& $flag==0) { # end of a word.
            $word = $word . $wordArray[$i];
            $flag = 1;
            $wordCount{$word}++;
            print "\nword: $word";
        } elsif ($wordArray[$i]==" " && $flag==1) { # series of blanks.
            # do nothing.
        }
    }
    for $i (keys %wordCount) {
        print " \nword: $i - count: $wordCount{$i} ";
    }
} 
```

它既不是打印“这里”，也不是单词。在这一点上，我并不担心优化，尽管在这个方向上的任何输入也将不胜感激。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T07:28:12.157

这是一个很好的例子，Perl 将帮助您找出问题所在，如果您只是寻求帮助。习惯于总是添加行：

```
use strict;
use warnings; 
```

到您的 Perl 程序的顶部。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T05:13:51.993

拳头，

```
$wordArray[$i]!=' ' 
```

应该

```
$wordArray[$i] ne ' ' 
```

根据用于比较字符串和字符的[Perl 文档。](http://perldoc.perl.org/perlop.html#Equality-Operators)基本上对数字使用数字运算符 ( `==`, `>=`, ...)，对文本使用字符串运算符 ( `eq`, `ne`, `lt`, ...)。

另外，你可以做

```
@wordArray = split(" ",$wa); 
```

代替

```
@wordArray = split("",$wa); 
```

然后`@wordArray`不需要进行不稳定的字符检查，你永远不会遇到问题。`@wordArray`将被拆分成单词，您只需要计算出现次数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T13:19:19.683

您似乎正在用 Perl 编写 C。不同之处不仅仅是一种风格。通过将字符串分解为单个字符的数组，您的脚本的内存占用也会爆炸。

此外，您需要考虑什么是单词。下面，我并不是说 any`\w+`是一个词，而是指出`\S+`和之间的区别`\w+`。

```
#!/usr/bin/env perl

use strict; use warnings;
use YAML;

my $src = '$wa = "A word frequency counter.";';

print Dump count_words(\$src, 'w');
print Dump count_words(\$src, 'S');

sub count_words {
    my $src = shift;
    my $class = sprintf '\%s+', shift;
    my %counts;

    while ($$src =~ /(?<sequence> $class)/gx) {
        $counts{ $+{sequence} } += 1;
    }

    return \%counts;
} 
```

输出：

```
---
答：1
计数器：1
频率：1
瓦：1
词：1
---
''A'：1
$wa: 1
=: 1
计数器。”;：1
频率：1
词：1
```

# regex - Vim 语法文件。在 'foobar' 中独立匹配 'foo' 和 'bar'

> ID：10060514
> 
> 赞同：3
> 
> 时间：2012-04-08T05:00:14.777
> 
> 标签：regex, vim

在我想要的 vim 语法文件中

*   命名一场比赛`foo`，然后`bar`
*   另一个`bar`紧随其后`foo`

让他们都工作。

这是我到目前为止所拥有的

```
 syn match myFoo /foo\zebar/ display

 syn match myBar /foo\zsbar/ display 
```

当我这样做时，它只匹配后一个。我不能同时得到`foo`和`bar`匹配。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T07:11:54.030

试试这个：

```
syn match myFoo /foo/ contained
syn match myBar /bar/ contained
syn match myFooBar /foobar/ contains=myFoo,myBar 
```

我已经确认它有效。我有 Vim 为 foobar 着色，其中 foo 是一种颜色，而 bar 是另一种颜色。只有当他们作为 foobar 在一起时才会发生这种情况；否则它们不会着色。我将它们分配到不同的类别，如下所示：

```
hi def link myFoo Keyword
hi def link myBar Type 
```

您可能已经涵盖了这一点。

# android - 我需要为 flex air 移动项目（如 as3）加载 jpg 文件吗？

> ID：10060516
> 
> 赞同：0
> 
> 时间：2012-04-08T05:01:15.343
> 
> 标签：android, xml, actionscript-3, apache-flex, air

在典型的 as3 或 flex 项目中，加载 xml 文件后，我手动加载 jpg 文件（缩略图等），因此我可以在精灵/电影剪辑等中使用它们。目前我正在从事空中移动项目。我正在尝试将一些缩略图（jpg）文件加载到列表视图（火花）并使用自定义项目渲染器。itemrenderer 中有一个 spark 图像组件。并且它的 data 属性设置为 Image 对象。我可以检查文件应用程序目录中是否存在图像文件。我需要将所有这些缩略图加载到内存中吗？然后使用它们？图像对象将自动加载源文件对象？？一旦分配？我必须明确告诉它加载文件对象吗？我应该使用什么事件来确保图像文件对象已加载。？

有任何想法吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:40:04.813

Spark 图像非常易于使用。您只需要一个网址。

```
 <s:Image source="http://someimagesite.com/someimage.png" width="100%" height="100%" /> 
```

您还可以使用位图数据，甚至直接嵌入到源标签中。

```
 [Embed(source="image.png")] private var myImage:Class
 mySparkImage.source = new myImage() as BitmapData;

 <s:Image source="@Embed('image.png')" /> 
```

看看： [http ://help.adobe.com/en_US/flex/using/WSc5cd04c102ae3e97-33ad5caa12c719dc7c8-8000.html](http://help.adobe.com/en_US/flex/using/WSc5cd04c102ae3e97-33ad5caa12c719dc7c8-8000.html)

# haskell - 文本编码的问题

> ID：10060519
> 
> 赞同：3
> 
> 时间：2012-04-08T05:02:18.903
> 
> 标签：haskell

我在文本编码方面遇到了一些麻烦。解析网站给了我一个 Data.Text 字符串

> “项目 - Fran\195\167ois Dubois”，

我需要写入文件。所以我使用 Data.Text.Lazy.Encoding.encodeUtf8 将其转换为字节串。问题是这会产生乱码输出：

> “项目 - François Dubois”。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T10:05:17.613

如果你已经`Fran\195\167ois`进入你`Data.Text`的`François`.

这很不方便，因为`Data.Text[.Lazy]`应该是 UTF-16 编码的文本，并且两个代码单元 195 和 167 分别被解释为 unicode 代码点 195。167 分别是 'Ã' 。'§'。如果您对文本进行 UTF-8 编码，则会将它们分别转换为字节`c383 ([195,131])`序列`c2a7 ([194,167])`。

遇到这种情况的最可能的方法是您从网站获得的数据是 UTF-8 编码的，但被解释为 ISO-8859-1（拉丁 1）编码（或其他 8 位编码；8859-15 是也很普遍）。

处理它的正确方法是完全避免这种情况[不幸的是，这可能是不可能的]。

如果您的数据源正确地说明了它的编码 - 作为一个网站应该 - 找出编码并相应地解释数据。如果声明了不正确的编码，那么您当然不走运，如果没有指定编码，您必须猜对（现在自然猜测是 UTF-8，至少对于使用拉丁字母变体的语言而言）。

* * *

如果无法避免这种情况，最简单的解决方法是

1.  在编码之前用所需的序列替换出现的违规序列：

    ```
    encodeUtf8 $ replace (pack "Fran\195\167ois") (pack "Fran\231ois") contents 
    ```

2.  假设其他一切都是 ASCII 或无意的 UTF-8，将`Text`代码单元解释为字节：

    ```
    Data.ByteString.Lazy.Char8.pack $ Data.Text.Lazy.unpack contents 
    ```

前者效率更高，但如果有许多不同的错误编码（例如，由不同的重音字母引起），就会变得不方便。后者仅在假定的情况下有效（ 中没有超过 255 的代码单元`Text`）并且对于长文本效率很低。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:22:26.433

我不完全确定是否`less`可以正确显示 UTF-8 编码的字符。GVim 可以。您可以在 SO 上查看[此](https://stackoverflow.com/questions/5166652/how-to-view-utf-8-characters-in-vim-or-gvim)链接以了解如何在 gVim 中查看 UTF-8 数据。

关于能够将其传递给 graphviz 的另一个问题，我认为您需要在命令行上设置编码，如[Graph NonAscii FAQ](http://www.graphviz.org/content/FaqNonAscii)中所述。

根据您的解释，我认为数据的持久化方式没有问题。如果您将编码正确传递给graphviz，我认为您的问题将得到解决。

PS：创建答案，因为创建描述性链接更容易

# java - 在 Eclipse 中使用具有不可运行 Jar 的外部 Jar 依赖项

> ID：10060520
> 
> 赞同：0
> 
> 时间：2012-04-08T05:02:23.260
> 
> 标签：java, eclipse, jar, applet, japplet

我在 Eclipse 中制作了一个 Jar 文件来运行 Applet，并且该程序使用了一个外部 jar 文件（jxl.jar）。当我运行小程序时，它告诉我找不到我要使用的 jxl 文件。

当我制作 jar 文件时，我右键单击项目并选择导出，然后选择 JAR 文件。我在对话框中没有看到包含依赖项的选项。如何确保它包含我的外部 jar 文件，该文件作为外部 Jar 文件添加到我的项目属性中的外部 Java 构建路径中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:18:16.763

有两种方法可以做到这一点：

*   在“archive”参数中指定依赖的JAR；例如

    ```
    ARCHIVE="myapplet.jar,jxl.jar" 
    ```

*   在您的小程序 JAR 的清单中指定依赖的 JAR；例如在 manifest.mf 文件中添加这一行：

    ```
    Class-Path: jxl.jar 
    ```

# c# - 移动图像以反弹或旋转一圈

> ID：10060523
> 
> 赞同：1
> 
> 时间：2012-04-08T05:02:37.227
> 
> 标签：c#, winforms

我发现了这个我在过去一段时间里一直在玩的小应用程序。我想知道，如果我想简单地将图像旋转一圈？或者让整个图像上下反弹，我将如何修改这个程序来做到这一点？我尝试过的一切都只会拉伸图像 - 即使我确实让它向左或向右移动。关于我能做什么的任何想法？代码如下

```
 public partial class Form1 : Form
   {
          private int width = 15;
          private int height = 15;

          Image pic = Image.FromFile("402.png");
          private Button abort = new Button();
          Thread t;

          public Form1()
          {
            abort.Text = "Abort";
            abort.Location = new Point(190, 230);
            abort.Click += new EventHandler(Abort_Click);
            Controls.Add(abort);

            SetStyle(ControlStyles.DoubleBuffer| ControlStyles.AllPaintingInWmPaint| ControlStyles.UserPaint, true);

            t = new Thread(new ThreadStart(Run));
            t.Start();
          }
          protected void Abort_Click(object sender, EventArgs e) 
          {
            t.Abort();
          }

          protected override void OnPaint( PaintEventArgs e )   
          {
             Graphics g = e.Graphics;
             g.DrawImage(pic, 10, 10, width, height);
             base.OnPaint(e);
          }

          public void Run() 
          {

              while (true) 
              {
                for(int i = 0; i < 200; i++) 
                {
                    width += 5;

                  Invalidate();
                  Thread.Sleep(30);
                }

              }
          }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:20:16.913

所以我不知道你想要实现什么，但为了让基金们摆脱困境，WinForms 是一个 GDI+ 库，它更多地用于 GUI 的东西，所以像动画这样的东西可能会更好地由图形库处理像[SFML](http://www.sfml-dev.org/)一样。

无论如何，有一百万种方法可以实现您想要的。就在圆周上移动某些东西而言，您需要一些简单的触发。对于弹跳运动，我会说遵循正弦曲线将是最简单的方法。

这是一些用于弹跳的伪代码（不确定这是否语法完美）：

字段定义：

```
private double frame = 0; 
```

上漆：

```
Graphics g = e.Graphics;
g.DrawImage(pic, 10, 10 + Math.sin(frame)*10, width, height);
frame+=.01;
base.OnPaint(e); 
```

这样，每次触发绘制事件时，t 都会增加 0.01 弧度。sin 有一个在 -1 和 1 之间波动的域，你可以将它乘以 10 以获得弹跳效果。

Frame 代表你的“关键帧”。如果要加快速度，请将`frame+=__`增加到更高的值。如果要增加范围，请更改偏移量`Math.sin(frame)*__`

# delphi - 将接口传递给不同的进程

> ID：10060528
> 
> 赞同：5
> 
> 时间：2012-04-08T05:03:50.550
> 
> 标签：delphi, com, interface, ipc, idispatch

我使用WM_COPYDATA来启用我的两个进程A和B之间的通信。与基本数据类型交换数据没有问题。

现在我有一个问题，在某些情况下，我想将一个接口（IDispatch）从我的进程 A 传递给我的进程 B。这可能吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-04-08T05:35:51.400

不能直接将接口指针传递给另一个进程。与任何其他指针一样，接口仅在运行时实例化它的进程地址空间中有效。COM 有自己的机制，用于跨进程边界编组接口和数据，甚至跨同一进程中的不同单元。在接口的情况下，这涉及代理和存根，它们在每个进程/单元中运行并使用各种 IPC 机制（例如管道、RPC 或 TCP/IP）相互通信。查看这些文章，了解如何跨流程/单元使用接口：

[对象间通信](http://msdn.microsoft.com/en-us/library/ms693719.aspx)

[了解自定义编组第 1 部分](http://www.codeproject.com/Articles/15223/Understanding-Custom-Marshaling-Part-1)

要执行您的要求，而不采用实现自定义封送处理，您必须使其中一个进程充当进程外 COM 服务器，然后另一个进程可以使用`CoCreateInstance()`或`GetActiveObject()`获取指向服务器的对象在其本地地址空间中工作，并让 COM 为您处理封送细节。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-04-08T06:24:17.790

它不能直接完成，但您可以使用客户端-服务器服务框架，它可能是基于接口的。

例如，请参阅我们的开源*mORMot 框架*的最后一个功能：[基于接口的服务示例代码](http://blog.synopse.info/post/2012/03/07/Interface-based-services-sample-code)和[此链接](http://blog.synopse.info/post/2012/03/07/Interface-based-services)。

您可以`interface`在远程进程上执行。该功能处理框架的所有通信方式，即进程内调用、GDI 消息、命名管道和 TCP/HTTP。在内部，它将`WM_COPYDATA`用于 GDI 消息，然后将参数和结果作为 JSON 传输。使用[此链接](http://synopse.info/fossil/wiki?name=Downloads)下载源代码（使用[http://synopse.info/fossil](http://synopse.info/fossil) 1.16+ 版本）和文档（有几页关于如何实现这些服务）。

它是一个开源项目，可使用 Delphi 6 到 XE2。

您还可以使用 SOAP 或 DataSnap 客户端-服务器（如果您有相应版本的 Delphi）或 n-Tier 商业包（如[http://www.remobjects.com/da](http://www.remobjects.com/da)）公开您的接口。这类似于在 mORMot 中实现的方法。

COM 也是一个很好的候选者，原生于 Windows，但它更难初始化：您必须在每台 PC 上注册 COM（具有管理员权限），并且您无法使其通过网络工作（DCOM 已弃用，请记住）。如果您希望与其他语言（如 .Net）共享您的服务，但仅在本地共享，那么 COM 是很好的选择。

# linux - 我使用什么命令来查看我的服务器的 ECDSA 密钥指纹是什么？

> ID：10060530
> 
> 赞同：92
> 
> 时间：2012-04-08T05:04:51.497
> 
> 标签：linux, security, ssh, rsa, openssh

我在 Google 上看到有关如何查看 RSA 密钥指纹而不是 ECDSA 指纹的资料。

* * *

## 回答 #1

> 赞同：142
> 
> 时间：2012-04-08T05:06:33.400

等等，我找到了。运行命令：

```
ssh-keygen -l -f /etc/ssh/ssh_host_ecdsa_key.pub 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2012-07-23T09:31:55.463

使用最近的 ssh（OpenSSH_6.0p1，OpenSSL 1.0.0j 2012 年 5 月 10 日），我编写了这样的脚本：

```
ssh-keyscan -t ecdsa localhost 2>&1 | grep ecdsa
localhost ecdsa-sha2-nistp256 AAAAE2VlongKey...= 
```

笔记：

*   如果您的 sshd 在自定义端口上运行，请在命令中添加“ `-p portNumber`” ）`ssh-keyscan`
*   `ssh-keyscan`写在 上`stderr`，而不是`stdout`(!)，因此`bash`重定向 ' `2>&1`' （可能因您的外壳而异）

这是我添加到`~/.ssh/known_hosts`文件中的行，以便授权来自 localhost 的 ssh 请求以进行我的测试（主要用于[使用 ssh 的 gitolite](http://sitaramc.github.com/gitolite/glssh.html)）。

* * *

[Daniel Böhmer](https://stackoverflow.com/users/498634/daniel-b%C3%B6hmer)[在评论中](https://stackoverflow.com/questions/10060530/what-command-do-i-use-to-see-what-the-ecdsa-key-fingerprint-of-my-server-is/11609840#comment54872151_11609840)证实：

> *   `ssh-keyscan`提供 SSH 服务器的完整公钥
> *   的输出`ssh-keygen`几乎与公钥文件的格式相同。
>     只需删除第一列（IP 地址或主机名）并将其保存或通过管道将其传输到`ssh-keygen -l`显示指纹的位置。

丹尼尔补充道：

> 显示存储在以下位置的所有服务器公钥的指纹`~/.ssh/know_hosts`：

```
cut -d' ' -f2- ~/.ssh/known_hosts | while read line; do echo "$line" | ssh-keygen -lf-; done 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-05-27T06:57:28.153

**使用的命令**

*   **显示存储在服务器上的公共主机密钥的 ascii-art（在服务器端完成，通过 ssh 连接到的那个）：**

    ```
    ssh-keygen -l -v -f /etc/ssh/ssh_host_ecdsa_key.pub 
    ```

    **-l**：显示指定公钥文件的指纹。

    **-v**：视觉（ascii-art）

    **-f** : 文件

*   **显示远程服务器公共主机密钥的 ascii-art（在客户端完成，您通过 ssh 连接的那个）：**

    ```
    ssh -o visualhostkey=yes -o FingerprintHash=md5 <host_server_to_connect> 
    ```

    **-o** : 选项

    **visualhostkey** : 视觉 (ascii-art)

    **FingerprintHash**：要使用的哈希算法

**如何检查主机/服务器的真实性**

首先，1\. 将在服务器上本地完成（您想通过 ssh 连接到的服务器）：它将为您提供第一个 ascii-art。打印或拍照。

其次，2.是在第一次SSH连接时完成的；它将显示第二个 ascii-art。如果 ascii-art 相同，那么您可以对*“我信任吗？”回答“**是”。*问题（即）。*`Are you sure you want to continue connecting (yes/no)`*

 ***例子**

*   **服务器端**

```
$ ssh-keygen -l -v -f /etc/ssh/ssh_host_ecdsa_key.pub
256 2e:a6:b3:27:14:12:0b:79:df:9a:7f:bd:4d:b1:e0:b6   (ECDSA)
+--[ECDSA  256]---+
| .               |
|o o              |
| o + .           |
|  o o .          |
|   . +  S . .    |
|    +  . . . o   |
|   . .o ..o o    |
|    ooo....+     |
|    o= .  E..    |
+-----------------+ 
```

*   **客户端**

```
$ ssh -o visualhostkey=yes -o FingerprintHash=md5 192.168.12.211
The authenticity of host '192.168.12.211 (192.168.12.211)' can't be established.
ECDSA key fingerprint is MD5:2e:a6:b3:27:14:12:0b:79:df:9a:7f:bd:4d:b1:e0:b6.
+---[ECDSA 256]---+
| .               |
|o o              |
| o + .           |
|  o o .          |
|   . +  S . .    |
|    +  . . . o   |
|   . .o ..o o    |
|    ooo....+     |
|    o= .  E..    |
+------[MD5]------+
Are you sure you want to continue connecting (yes/no)? 
```

**更多解释**

第一个命令将显示与您作为输入提供的文件的指纹相对应的 ascii-art。您作为输入提供的文件是服务器的公共**主机**密钥。当客户端连接时（不仅是第一次），服务器将发送其公共主机密钥。此公共主机密钥将在`~/.ssh/known_hosts`. 如果公钥在文件中，那么没关系：主机（服务器）是已知的，所以我们继续下一步对用户进行身份验证（本文没有描述用户身份验证）。如果公钥不在文件中，则客户端将使用散列算法计算此公钥的指纹（不同的散列算法将给出不同的指纹）。显示之前计算的这个指纹（如果提供了相应的选项，连同 ascii-art），您必须根据您识别此指纹或否来回答是或否（此指纹是公共主机密钥的图像/散列）服务器）。如果你说是，那么服务器的公钥（不是它的指纹）将被添加到文件`~/.ssh/known_hosts`中。

我们可以注意到它`~/.ssh/known_hosts`位于您的主 (~) 目录下，因为*您*信任此主机（服务器），但不同的用户可能不信任与您相同的用户。此外，服务器的主机公钥不依赖于用户，因此存储在`/etc/ssh/`.

第二个命令将显示从*host_server_to_connect*接收到的公钥的指纹和 ascii-art （根据选项中给出的哈希算法）。它与只使用 ssh 相同，但具有更多视觉选项，因此连接将继续以与正常 ssh 连接相同的方式。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2015-11-17T18:51:38.970

在我的系统上，我需要指定一个 MD5 密钥而不是默认的 SHA256：

```
ssh-keygen -l -E md5 -f /etc/ssh/ssh_host_ecdsa_key.pub 
```

这会以与我在客户端看到的错误相匹配的格式输出一个字符串。*

# java - 关于扫描仪类

> ID：10060533
> 
> 赞同：0
> 
> 时间：2012-04-08T05:06:05.487
> 
> 标签：java

我目前正在使用 StringTokennizer 类将字符串拆分为不同的标记，如定义的分隔符..

```
public class App {  
    public static void main(String[] args) {  

        String str = "This is String , split by StringTokenizer, created by Neera";  
        StringTokenizer st = new StringTokenizer(str);  

        System.out.println("---- Split by comma ',' ------");  
        StringTokenizer st2 = new StringTokenizer(str, ",");  

        while (st2.hasMoreElements()) {  
            System.out.println(st2.nextElement());  
        }  
    }  
} 
```

我的疑问是，同样的事情也可以通过扫描仪类来实现......！！自从我阅读以来，使用扫描仪类是否正确？ t工作...请告诉我..!!!

```
public class App1 {  

    public static void main(String[] args)    
    {  
        Scanner scanner =  new Scanner("This is String , split by StringTokenizer, created by Neera").useDelimiter(", ");    

        while (scanner.hasNextLine()) { 
            System.out.println(scanner.nextLine());
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:12:23.820

用于[`scanner.next()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#next%28%29)返回下一个标记[`scanner.nextLine()`](http://docs.oracle.com/javase/6/docs/api/java/util/Scanner.html#nextLine%28%29)，而不是返回下一个完整行（并且您的输入只有一个）。当然，你会想`hasNext()`在你的`while`而不是`hasNextLine()`.

**回应您的评论：**

您的代码有语法错误，我最初认为这是一个错字并在问题中更正。你在写：

```
while (scanner.hasNext()) ;
    System.out.println(scanner.next()); 
```

哪个格式正确应该告诉你真正发生了什么：

```
while (scanner.hasNext())
    ; // empty statement
System.out.println(scanner.next()); 
```

它应该是：

```
while (scanner.hasNext()) {
    System.out.println(scanner.next());
} 
```

# javascript - jQuery 自动完成 @提及

> ID：10060536
> 
> 赞同：1
> 
> 时间：2012-04-08T05:06:31.047
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins, jquery-events

我有来自 Andrew Whitaker 的这个自动完成插件 - **[DEMO](http://jsfiddle.net/LHNky/)**假设我有一个字符串`textarea`

> “@peterwateber 欢迎”

我希望它在隐藏标签中输出为

> “@[彼得瓦特伯] 欢迎”

我该怎么做？我不是很擅长 Javascript...

我试过 从 Hawkee**[看这段代码](http://jsfiddle.net/Hawkee/vq6MH/12/)**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T05:40:36.687

Hiya在这里**工作演示**：http : [//jsfiddle.net/67dxH/](http://jsfiddle.net/67dxH/)

已经在上面进行了很好的讨论，就像你说的行为是这样的：`value of the hidden tag as = @[C#] and the textarea as @C#`

乔佩这是个乐于助人的人，让我知道进展如何，干杯！:)

**jQuery代码**

```
function split(val) {
    return val.split(/@\s*/);
}

function extractLast(term) {
    return split(term).pop();
}

function getTags(term, callback) {
    $.ajax({
        url: "http://api.stackoverflow.com/1.1/tags",
        data: {
            filter: term,
            pagesize: 5
        },
        type: "POST",
        success: callback,
        jsonp: "jsonp",
        dataType: "jsonp"
    });    
}

$(document).ready(function() {

    $("#tags")
    // don't navigate away from the field on tab when selecting an item
    .bind("keydown", function(event) {
        if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {

            event.preventDefault();
        }
    }).autocomplete({
        source: function(request, response) {
            if (request.term.indexOf("@") >= 0) {
                $("#loading").show();
                getTags(extractLast(request.term), function(data) {
                    response($.map(data.tags, function(el) {
                        return {
                            value: el.name,
                            count: el.count
                        }
                    }));
                    $("#loading").hide();                    
                });
            }
        },
        focus: function() {
            // prevent value inserted on focus
            return false;
        },
        select: function(event, ui) {
            var terms = split(this.value);
            // remove the current input
            terms.pop();
            // add the selected item
            ui.item.value = "@" + ui.item.value;   
            terms.push(ui.item.value);
            // add placeholder to get the comma-and-space at the end
            terms.push("");
            this.value = terms.join("");
            return false;
        }
    }).data("autocomplete")._renderItem = function(ul, item) {
        return $("<li>")
            .data("item.autocomplete", item)
            .append("<a>@[" + item.label + "]&nbsp;<span class='count'>(" + item.count + ")</span></a>")
            .appendTo(ul);
    };
});​ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T19:46:48.653

我编写了此处提到的原始代码并修复了彼得遇到的菜单问题：

[http://www.hawkee.com/snippet/9391/](http://www.hawkee.com/snippet/9391/)

# c# - Windows 8 XAML 不支持触 发器？

> ID：10060539
> 
> 赞同：5
> 
> 时间：2012-04-08T05:06:44.877
> 
> 标签：c#, silverlight, xaml, silverlight-4.0, microsoft-metro

好的，如果 DataTriggers 在 Silverlight 和 Windows 8 中不再工作，谁能告诉我如何替换此功能？

例如;

在 ListView 或 GridView 中，如果一个项目的值为 x，

```
if x == "True"
 StackPanel style= "MakeBackgroundGreen"
else
 StackPanel style="MakeBackgroundRed" 
```

有没有办法使用 XAML 和 C#（首选 C#，但任何语言都可以）在 Windows 8 Metro 风格应用程序中创建类似的东西。

我听说有人提到使用 VSM（视觉状态管理器），我该怎么做？

提前非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-21T07:06:40.847

您必须像这样使用 Visual State Manager：

```
 <VisualStateManager.VisualStateGroups>

        <!-- Visual states reflect the application's view state -->
        <VisualStateGroup>
            <VisualState x:Name="FullScreenLandscape"/>
            <VisualState x:Name="Filled"/>

            <!-- The back button respects the narrower 100-pixel margin convention for portrait -->
            <VisualState x:Name="FullScreenPortrait">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource PortraitBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                </Storyboard>
            </VisualState>

            <!-- The back button and title have different styles when snapped -->
            <VisualState x:Name="Snapped">
                <Storyboard>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="backButton" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedBackButtonStyle}"/>
                    </ObjectAnimationUsingKeyFrames>
                    <ObjectAnimationUsingKeyFrames Storyboard.TargetName="pageTitle" Storyboard.TargetProperty="Style">
                        <DiscreteObjectKeyFrame KeyTime="0" Value="{StaticResource SnappedPageHeaderTextStyle}"/>
                    </ObjectAnimationUsingKeyFrames>

                </Storyboard>
            </VisualState>
        </VisualStateGroup>
    </VisualStateManager.VisualStateGroups> 
```

之后，您可以像这样以编程方式更改状态：

```
 VisualStateManager.GoToState(this, "stateName", true); 
```

# jquery - 如何使用主页进行模态滚动

> ID：10060541
> 
> 赞同：6
> 
> 时间：2012-04-08T05:07:33.833
> 
> 标签：jquery, css, modal-dialog

我有一个内容高于浏览器高度的模式，因此我有一些内容无法显示。（好像模态位置是固定的，不能整体滚动）

![在此处输入图像描述](../Images/992a2444ee2c0e3f4867948b529c18c4.png)

如何使模式与主页一起滚动，以便我可以实际查看下面的内容？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-08T05:38:39.460

您可以做的是将模态的 CSS 设置`position`为绝对而不是固定。

为此，只需像这样获取模态或 ID 的类名并将其设置为`absolute`：

```
.modal {
position: absolute !important;
} 
```

或者，更好的是，为您的模式编辑主 CSS（如果可以的话）并将`position`from更改`fixed`为`absolute`.

jsFiddle 示例：http: [//jsfiddle.net/hUNZs/](http://jsfiddle.net/hUNZs/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T05:14:27.487

我试过了`<div class="modal myModal"></div>`

CSS

```
.myModal {
      overflow: auto !important; 
      height: 300px; //set a height to a modal so it wont overlapped when the body tag's height is smaller than the modal
} 
```

# ruby-on-rails-3 - 在 Rails 3 上设计如何在用户注册后立即触发自定义代码运行？

> ID：10060542
> 
> 赞同：0
> 
> 时间：2012-04-08T05:07:54.010
> 
> 标签：ruby-on-rails-3, devise

我有一个动作 ( `send_confcode`) 将在新用户注册后立即通过短信发送确认码。我想知道这个动作应该放在哪里。是在`User`Devise生成的模型下吗？

```
def send_confcode     
  @confcode = (Time.now.to_i).to_s.slice(6,9)
  # more code here for sending code via an sms api
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:28:36.490

在您的用户模型中使用`after_create`回调方法。将此添加到您的用户模型中：

```
after_create :send_confcode 
```

创建用户后，它将调用该`send_confcode`方法。

您可以在此处阅读有关 Rails 回调的更多信息：http: [//guides.rubyonrails.org/active_record_validations_callbacks.html#callbacks-overview](http://guides.rubyonrails.org/active_record_validations_callbacks.html#callbacks-overview)

# c - 如何在 .bundle 文件中模拟 objdump --dwarf=decodedline？

> ID：10060544
> 
> 赞同：1
> 
> 时间：2012-04-08T05:08:24.687
> 
> 标签：c, macos, gdb, dwarf

我已经成功地用于在 Linux 上`objdump --dwarf=decodedline`的文件中查找每个偏移量的源位置。`.so`

不幸的是，在 Mac-OS X 上。似乎`.bundle`文件（用作共享库）不能以这种方式查询。

我很乐观地认为我可以做一些事情，因为`gdb`能够正确调试和单步调试这些包中的代码——有人知道它在做什么吗？

更多信息：

该`dwarfdump`实用程序声称 .bundle 文件不包含 DWARF 数据，但它确实包含 STABS 数据；但是`objdump --stabs`也找不到任何刺伤数据。

（如果它使问题更容易回答，我实际上并不需要所有的偏移量；能够查询任何给定偏移量的源位置就足够了）。

我一直在测试的捆绑文件是使用以下方法生成的：

```
cc -dynamic -bundle -undefined suppress -flat_namespace -g -o c_location.bundle c_location.o -L. -L/Users/User/.rvm/rubies/ruby-1.8.7-p357/lib -L.     -lruby  -ldl -lobjc 
```

原始 c_location.o 文件确实包含工作所需的信息`objdump --dwarf=decodedline`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T00:28:46.007

所以事实证明，这样做的一种方法是使用 Apple`nm -pa *.bundle`来查找符号名称和给定偏移量的原始目标文件。

一旦你有了它，你可以首先使用`objdump -tT`在原始目标文件中找到符号名称的偏移量；然后`objdump --dwarf=decodedline`像以前一样使用。

每个步骤都需要一些简单的输出解析，但它似乎确实有效™。如果有更强大的方法，我会很感兴趣。

# php - PHP Tidy：打破文本区域

> ID：10060545
> 
> 赞同：1
> 
> 时间：2012-04-08T05:08:32.963
> 
> 标签：php, htmltidy

我有一个带有 2 个文本区域和一个提交按钮的 html 表单页面 (test.php)。我没有每次都复制我想要格式化和硬编码的源代码，而是创建了第一个文本区域，以便我可以将要清理的代码复制到其中。然后在按下提交按钮时，表单会发布到同一页面，并在第二个文本区域中显示整理好的源代码。**显示这个整理好的源代码是问题所在。** 通过 HTML tidy 传递以下代码并尝试在文本区域中显示输出，会破坏输出显示。我的意思是，如果你注意到，我有`</textarea>`在以下 html 代码中。一旦 Tidy 遇到它，它就会关闭 textarea 并解析源代码的其余信息，就好像它是 HTML 文档的一部分一样，从而破坏了我的整个 html 表单页面（test.php）。

**我传递给 HTML TIDY 的示例源代码：**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Hi</title>
<link href="css/styles.css" rel="stylesheet" type="text/css" />
</head>

<body>
<div id="wrapper">

<h1 data-title="Hi"> <a href="<?php echo $_SERVER['PHP_SELF']; ?>"> Hi </a> </h1>  

<form name="form1" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">

  <textarea name="comments" id="comments" cols="150" rows="15"><?php echo (isset($_POST['comments']) ? $_POST['comments'] : '' ); ?></textarea>
  <br>
  <input type="submit" name="sbt_process" id="sbt_process" value="Submit">
</form>

<textarea name="css" id="css" cols="150" rows="18"><?php echo (isset($text) ? $text : ''); ?></textarea>

</div><!-- #wrapper -->
</body>
</html> 
```

**HTML 整洁参数：**

```
$params_body = array(
    'break-before-br'       => 'no',
    'clean'                 => 'clean',
    'doctype'               => 'strict',
    'drop-empty-paras'      => 'yes',
    'drop-font-tags'        => 'yes',
    'force-output'          => 'yes',
    'indent'                => TRUE, //'yes',
    'indent-attributes'     => FALSE,
    'indent-spaces'         => 4,
    'input-encoding'        => 'utf8',
    'join-styles'           => 'yes',
    'literal-attributes'    => 'yes', //This option specifies if Tidy should ensure that whitespace characters within attribute values are passed through unchanged.
    'logical-emphasis'      => 'yes',
    'lower-literals'        => 'yes',
    'merge-divs'            => 'no',
    'merge-spans'           => 'yes',
    'output-encoding'       => 'ascii',
    'output-xhtml'          => 'yes',
    //'output-xml'          => true,
    'output-bom'            => 'no',
    'preserve-entities'     => 'yes',
    'quiet'                 => 'yes',
    'quote-ampersand'       => 'yes',
    'quote-marks'           => 'no',
    'quote-nbsp'            => TRUE, 
    'show-body-only'        => FALSE,
    'show-errors'           => 0,
    'show-warnings'         => 0,
    'sort-attributes'       => 'alpha',
    'vertical-space'        => TRUE, //'yes',
    'wrap'                  => 0, //This option specifies the right margin Tidy uses for line wrapping. Tidy tries to wrap lines so that they do not exceed this length. Set wrap to zero if you want to disable line wrapping.
    'wrap-attributes'       => FALSE,
    'tab-size'              => 20, //This option specifies the number of columns that Tidy uses between successive tab stops. It is used to map tabs to spaces when reading the input. Tidy never outputs tabs.
    'wrap-php'              => 0,
    'wrap-script-literals'  => TRUE,
    'escape-cdata'          => TRUE,
    'indent-cdata'          => TRUE,
    'numeric-entities'      => FALSE,
    'fix-uri'               => FALSE,
    'markup'                => TRUE
); 
```

我一直在搞乱 php tidy 的不同参数，但它没有用。我什至尝试将其输出为 XML，但这并没有帮助。如何让 Tidy 在第二个文本区域中正确显示已清理的源代码，而不会破坏/解析`</textarea>`我要清理的源代码的标签？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-06T10:27:27.557

诀窍是让浏览器根本不将输出的文本视为标签（因为您知道它真的想要），相反，您可以替换`<`为`&lt;`和。浏览器将运行并呈现为，但由于浏览器不知道这是 HTML 标记的打开，我们现在已将浏览器欺骗为纯文本响应。试一试：`>``&gt;``&lt;``<`

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Hi</title>
</head>    
<?PHP
$text = "</textarea>What's up?"; //Setting a potentially problematic string.

$text = str_replace("<", "&lt;", $text); //Do a find and replace for the < and save it back to the final variable to be rendered later
$text = str_replace(">", "&gt;", $text); //Do a find and replace for the > and save it back to the final variable to be rendered later.
?>
<body>
<div id="wrapper">
<textarea name="css" id="css" cols="150" rows="18">
<?php echo (isset($text) ? $text : ''); ?>
</textarea>

</div><!-- #wrapper -->
</body>
</html> 
```

如果一切顺利，这个过于简单化的示例将证明您可以使用 str_replace() 解决所有问题，而无需牺牲代码，也无需将头撞到墙上。...我的桌子旁边的墙上有一个很大的凹痕。

这个过程应该仍然可以使用 tidy 和您的 POST 变量，只需在表单提交后收集所有信息，通过 tidy 运行它，然后通过 str_replace 函数运行它。那应该完成它。万岁！

# java - Java Google App Engine 在线程安全模式下的效率高多少？

> ID：10060549
> 
> 赞同：2
> 
> 时间：2012-04-08T05:09:02.837
> 
> 标签：java, google-app-engine

在 Java Google App Engine 中，您可以打开并发请求/线程安全模式：[https ://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests](https://developers.google.com/appengine/docs/java/config/appconfig#Using_Concurrent_Requests)

这样做的唯一原因是，Google 服务器将需要启动更少的应用程序实例来服务给定数量的请求，因此可能会为您节省资金。当然，这样做也意味着您必须编写线程安全代码。

所以有趣的问题是：这会节省多少钱？有没有人试图在一些基准配置/应用程序功能/负载下测量它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:30:35.643

这实际上取决于您的代码：

1.  在单请求模式下，您可以轻松计算每秒的请求数：如果一个请求平均需要 100 毫秒才能完成，那么一个实例每秒可以执行 10 个请求。

2.  在并发请求模式下，这取决于两个因素：

    A. 您使用的实例类型 - AFAIK 它们都是相同的，您只是获得不同数量的核心。更多内核意味着更高的并发性能。

    B. 请求正在执行的 CPU 绑定代码与 IO 绑定代码的比率。如果您的代码更受 IO 限制（= 等待 Datastore 或其他外部服务），那么 CPU 将能够并行运行更多代码。

在我的应用程序中，我在基本实例上看到每个请求 200 毫秒时 15-20 rps，所以我可以说单请求和多请求模式之间的因子约为 3-4。

# objective-c - CCSprite runAction：崩溃。

> ID：10060551
> 
> 赞同：0
> 
> 时间：2012-04-08T05:09:34.103
> 
> 标签：objective-c, ios, animation, cocos2d-iphone

我正在尝试为静态设置动画，例如在电视上。我有 5 帧，我正在尝试快速切换它们。每次运行它时，我都会收到无法识别的选择器错误和崩溃。它崩溃了`[staticSprite runAction:repeat];`。我是 cocos2d 的新手。

```
CCLayer *staticlayer = [[CCLayer alloc]init];
staticlayer.contentSize = CGSizeMake(640, 960);
staticlayer.position = CGPointMake(winSize.width/2, winSize.height/2);
staticlayer.isRelativeAnchorPoint = YES;

NSArray *staticFrames = [[NSArray alloc]initWithObjects:@"static_0.jpg",
      @"static_1.jpg",@"static_2.jpg",@"static_3.jpg",@"static_4.jpg",nil];

CCSprite *staticSprite = [CCSprite spriteWithFile:@"static_0.jpg"];
staticSprite.position = ccp(winSize.width/2, winSize.height);

CCAnimation *staticAnimation = [CCAnimation animationWithFrames:staticFrames delay:0.1f];       
CCAnimate *staticAnimate = [CCAnimate actionWithAnimation:staticAnimation];

CCRepeatForever *repeat = [CCRepeatForever actionWithAction:staticAnimate];

[staticlayer addChild:staticSprite];
[self addChild:staticlayer z:0];
[staticSprite runAction:repeat]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T13:43:07.050

您的帧数组应该是 CCSpriteFrame 对象（因为您拥有它们，它们是 NSString，并且没有 CCSpriteFrame 提供的方法，因此是无法识别的选择器）。[在此处](http://www.raywenderlich.com/1271/how-to-use-animations-and-sprite-sheets-in-cocos2d)查找有关精灵动画的良好介绍性教程。

# backbone.js - Backbone.js - 在模型默认值中使用 new() - 循环引用

> ID：10060561
> 
> 赞同：3
> 
> 时间：2012-04-08T05:14:51.650
> 
> 标签：backbone.js

采用以下模型：

```
MyModel= Backbone.Model.extend({
  defaults : {
    myNestedModel:undefined,
  },
  initialize: function() {
    this.set({myNestedModel: new MyNestedModel());
  }
}); 
```

它有一个名为“myNestedModel”的属性，其定义如下：

```
MyNestedModel= Backbone.Model.extend({
  defaults : {
    myModel:undefined,
  }
}); 
```

它也有一个单一的属性名称“myModel”。现在，如果我创建 MyModel 的一个实例：

aModel = new MyModel();

嵌套模型将在 MyModel 的初始化方法中设置。然后我在两步过程中使用 JSON.stringify：

```
// Use Backbone.js framework to get an object that we can use JSON.stringfy on
var modelAsJson = aModel.toJSON();

// Now actually do stringify 
var modelAsJsonString = JSON.stringify(modelAsJson); 
```

这工作正常，我得到了 MyModel 的 JSON 表示，它是 MyNestedModel 的属性。当我使用默认值时会出现问题，例如：

```
MyModel= Backbone.Model.extend({
      defaults : {
        new MyNestedModel(),
      }
    }); 
```

这会导致 JSON.stringify 出现问题，因为它不支持循环引用。我假设正在创建循环引用，因为 MyModel 的所有实例共享同一个 MyNestedModel 实例。而 initialize 方法为每个实例创建一个新的嵌套模型。

## **问题：**

1.  我对`defaults:{}`成为问题“原因”的理解是否正确？
2.  [从我最近发布的一个问题中，](https://stackoverflow.com/questions/10040128/backbone-js-model-property-constants-is-this-good-practice/10050603#10050603)我得到的印象是我应该对所有属性使用默认值。如果是这种情况，我应该如何在这篇文章/问题中提出的场景中使用默认值？
3.  有人可以澄清`defaults:{}` 关于值何时适用、何时被覆盖以及实例是否共享相同的默认“实例”的用法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T07:17:32.667

默认值仅用于模型内部的属性（模型中的数据），并且无论何时创建模型，它都会从默认值中获取值并设置属性。例如

```
User = Backbone.Model.extend({
     defaults : {
         rating : 0
     }
})

User1 = new User({ name : 'jack', email : 'jack@gmail.com' });
User2 = new User({ name : 'john', email : 'john@gmail.com' });

User1.set({ rating : 2 }); 
```

现在，当使用 toJSON 调用您的两个模型时，将打印

```
{
   rating: 2,
   name: 'jack',
   email: 'jack@gmail.com'
}
{
   rating: 0,
   name: 'john',
   email: 'john@gmail.com'
} 
```

由于 defaults 是一个对象，因此您放置在那里的每个值都会立即进行评估：

```
defaults : {
    rating : defaultRating()
} 
```

将调用 defaultRating() - 不是每次初始化模型时，而是立即（在扩展方法中）

对于在创建模型时需要存在一些数据的模型（例如 new myModel() ），您应该使用默认值

在您的示例中，您有以下错误：

1.设置一个没有属性的值

```
 defaults : {
      PROPERTY : new Model() 
 } 
```

2.您的默认值不需要这样的选项 - 您应该只放置模型的属性（数据）

默认值始终适用，只要它没有被扩展模型中的新默认值替换，例如

```
 var Model = Backbone.Model.extend({ defaults : { alpha : 'beta' } });
 var myModel = Model.extend({ defaults : { beta : 'gama' } }); 
```

现在你的 myModel 初始化时将有

```
 { beta : 'gama' } // alpha : 'beta' will not be set as value, because it is replaced 
```

# c++ - 用于从汇编代码中提取 API 调用序列和控制流图的开源代码

> ID：10060565
> 
> 赞同：3
> 
> 时间：2012-04-08T05:15:09.523
> 
> 标签：c++, api, assembly

是否有任何用于从汇编代码中提取 API 调用序列和控制流图的开源代码？

我首先使用反汇编程序来生成 PE 文件的汇编代码。现在我需要提取 API 调用序列，当然还有 cfg.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-28T09:25:27.663

我建议您结合[clang](http://clang.llvm.org/)来看看[LLVM](http://llvm.org/)。在那里，您可以解析 clang 生成的位代码的调用树，这是一种中间语言，之后可以编译为目标架构。CallGraphSCCPass应该会有所帮助[。](http://llvm.org/docs/WritingAnLLVMPass.html#CallGraphSCCPass)

**编辑**由于您首先需要反汇编，因此带有 LLVM 的[x86 Disassembler](http://blog.llvm.org/2010/01/x86-disassembler.html)可能更有用。

# android - Android-SQLite：如何计算列中的特定值？

> ID：10060567
> 
> 赞同：0
> 
> 时间：2012-04-08T05:15:38.857
> 
> 标签：android, sqlite, count

我有两个表（TABLE_EXAM，TABLE_RESULT）。这是我的 TABLE_RESULT 的值。

```
result_id   exam_id   question_id   correct_answer  
  1            2            4              y     
  2            2            5              y       
  3            2            6              n         
  4            2            7              y 
```

我需要计算exam_id=2 的正确答案='y'。
我尝试以下代码，但它返回 0。

```
public int calculateResult(int examId,String confirmAnswer)
{
    int correctAnswer=0;
    try
    {
        SQLiteDatabase db=this.getWritableDatabase();

         String selectQuery=("select count(correctAnswer) from result where exam_id ='" + examId + "' and correctAnswer ='" + 'y' +"'" );
        // String selectQuery=("SELECT COUNT(*)FROM result WHERE exam_id ='" + examId + "' and correctAnswer ='" + confirmAnswer +"'" );            
          Cursor cursor = db.rawQuery(selectQuery, null);
        if(cursor.moveToLast())
        {
            correctAnswer=cursor.getInt(3);
        }
    }
    catch(Exception e)
    {
        e.printStackTrace();
    }
    return correctAnswer;
} 
```

在变量 confirm_answer 我通过“y”。
给我一些提示或参考。
任何帮助表示赞赏。
提前致谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T05:23:55.383

```
select count(*) from TABLE_RESULT where correct_answer="y" and exam id=2; 
```

这是值为 y 且考试 id=2 的总行数

只需尝试运行此查询，然后将您的参数添加到它。

```
SELECT COUNT(*)FROM result WHERE exam_id =" + examId + " and correctAnswer ='" + confirmAnswer +"'"); 
```

以上是我已格式化的您的查询。

希望这对您有所帮助。

# php - 一切正常，除了 if($_POST['submit']=='Update')

> ID：10060569
> 
> 赞同：0
> 
> 时间：2012-04-08T05:16:03.173
> 
> 标签：php, mysql

我有一个有效的注册和登录系统。我正在尝试创建一个表单，用户可以在其中添加产品注册信息（通过 mysql 更新）。我似乎无法让数据库真正更新字段。我在这里错过了什么？！？

```
<?php 

define('INCLUDE_CHECK',true);

require 'connect.php';
require 'functions.php';
// Those two files can be included only if INCLUDE_CHECK is defined

session_name('tzLogin');
// Starting the session

session_set_cookie_params(2*7*24*60*60);
// Making the cookie live for 2 weeks

session_start();

if($_SESSION['id'] && !isset($_COOKIE['tzRemember']) && !$_SESSION['rememberMe'])
{
    // If you are logged in, but you don't have the tzRemember cookie (browser restart)
    // and you have not checked the rememberMe checkbox:

    $_SESSION = array();
    session_destroy();

    // Destroy the session
}

if(isset($_GET['logoff']))
{
    $_SESSION = array();
    session_destroy();

    header("Location: index_login3.php");
    exit;
}

if($_POST['submit']=='Login')
{
    // Checking whether the Login form has been submitted

    $err = array();
    // Will hold our errors

    if(!$_POST['username'] || !$_POST['password'])
        $err[] = 'All the fields must be filled in!';

    if(!count($err))
    {
        $_POST['username'] = mysql_real_escape_string($_POST['username']);
        $_POST['password'] = mysql_real_escape_string($_POST['password']);
        $_POST['rememberMe'] = (int)$_POST['rememberMe'];

        // Escaping all input data

        $row = mysql_fetch_assoc(mysql_query("SELECT * FROM electrix_users WHERE usr='{$_POST['username']}' AND pass='".md5($_POST['password'])."'"));

        if($row['usr'])
        {
            // If everything is OK login

            $_SESSION['usr']=$row['usr'];
            $_SESSION['id'] = $row['id'];
            $_SESSION['email'] = $row['email'];
            $_SESSION['first'] = $row['first'];
            $_SESSION['last'] = $row['last'];
            $_SESSION['address1'] = $row['address1'];
            $_SESSION['address2'] = $row['address2'];
            $_SESSION['city'] = $row['city'];
            $_SESSION['state'] = $row['state'];
            $_SESSION['zip'] = $row['zip'];
            $_SESSION['country'] = $row['country'];
            $_SESSION['product1'] = $row['product1'];
            $_SESSION['serial1'] = $row['serial1'];
            $_SESSION['product2'] = $row['product2'];
            $_SESSION['serial2'] = $row['serial2'];
            $_SESSION['product3'] = $row['product3'];
            $_SESSION['serial3'] = $row['serial3'];
            $_SESSION['rememberMe'] = $_POST['rememberMe'];

            // Store some data in the session

            setcookie('tzRemember',$_POST['rememberMe']);

        }

        else $err[]='Wrong username and/or password!';
    }

    if($err)
    $_SESSION['msg']['login-err'] = implode('<br />',$err);
    // Save the error messages in the session

    header("Location: index_login3.php");
    exit;

}
else if($_POST['submit']=='Register')
{
    // If the Register form has been submitted

    $err = array();

    if(strlen($_POST['username'])<4 || strlen($_POST['username'])>32)
    {
        $err[]='Your username must be between 3 and 32 characters!';
    }

    if(preg_match('/[^a-z0-9\-\_\.]+/i',$_POST['username']))
    {
        $err[]='Your username contains invalid characters!';
    }

    if(!checkEmail($_POST['email']))
    {
        $err[]='Your email is not valid!';
    }

    if(!count($err))
    {
        // If there are no errors

        $pass = substr(md5($_SERVER['REMOTE_ADDR'].microtime().rand(1,100000)),0,6);
        // Generate a random password

        $_POST['email'] = mysql_real_escape_string($_POST['email']);
        $_POST['username'] = mysql_real_escape_string($_POST['username']);
        $_POST['first'] = mysql_real_escape_string($_POST['first']);
        $_POST['last'] = mysql_real_escape_string($_POST['last']);
        $_POST['address1'] = mysql_real_escape_string($_POST['address1']);
        $_POST['address2'] = mysql_real_escape_string($_POST['address2']);
        $_POST['city'] = mysql_real_escape_string($_POST['city']);
        $_POST['state'] = mysql_real_escape_string($_POST['state']);
        $_POST['zip'] = mysql_real_escape_string($_POST['zip']);
        $_POST['country'] = mysql_real_escape_string($_POST['country']);
        // Escape the input data

        mysql_query("   INSERT INTO electrix_users(usr,pass,email,first,last,address1,address2,city,state,zip,country,regIP,dt) 
                        VALUES(

                            '".$_POST['username']."',
                            '".md5($pass)."',
                            '".$_POST['email']."',
                            '".$_POST['first']."',
                            '".$_POST['last']."',
                            '".$_POST['address1']."',
                            '".$_POST['address2']."',
                            '".$_POST['city']."',
                            '".$_POST['state']."',
                            '".$_POST['zip']."',
                            '".$_POST['country']."',
                            '".$_SERVER['REMOTE_ADDR']."',
                            NOW()

                        )");

        if(mysql_affected_rows($link)==1)
        {
            send_mail(  'noreply@electrixpro.com',
                        $_POST['email'],
                        'Your New Electrix User Password',
                        'Thank you for registering at www.electrixpro.com. Your password is: '.$pass);

            $_SESSION['msg']['reg-success']='We sent you an email with your new password!';
        }
        else $err[]='This username is already taken!';
    }

    if(count($err))
    {
        $_SESSION['msg']['reg-err'] = implode('<br />',$err);
    }   

    header("Location: index_login3.php");
    exit;
}

if($_POST['submit']=='Update')

{   

    {
      mysql_query(" UPDATE electrix_users(product1,serial1,product2,serial2,product3,serial3) WHERE usr='{$_POST['username']}' 
              VALUES(

              '".$_POST['product1']."',
              '".$_POST['serial1']."',
              '".$_POST['product2']."',
              '".$_POST['serial2']."',
              '".$_POST['product3']."',
              '".$_POST['serial3']."',                          

          )");          

        if(mysql_affected_rows($link)==1)
        {
            $_SESSION['msg']['upd-success']='Thank you for registering your Electrix product';
        }
        else $err[]='So Sad!';
    }

    if(count($err))
    {
        $_SESSION['msg']['upd-err'] = implode('<br />',$err);
    }   

    header("Location: index_login3.php");
    exit;

}

if($_SESSION['msg'])
{
    // The script below shows the sliding panel on page load

    $script = '
    <script type="text/javascript">

        $(function(){

            $("div#panel").show();
            $("#toggle a").toggle();
        });

    </script>';

}
?> 
```

以下是表格：

```
 <!-- Panel -->
<div id="toppanel">
    <div id="panel">
        <div class="content clearfix">
            <div class="left">
                <h1>My Electrix Account </h1>
                <p class="grey">View and edit your contact information and product registrations</p>
            </div>

            <?php

            if(!$_SESSION['id']):

            ?>

            <div class="left">
                <!-- Login Form -->
                <form class="clearfix" action="" method="post">
                    <h1>Member Login</h1>

                    <?php

                        if($_SESSION['msg']['login-err'])
                        {
                            echo '<div class="err">'.$_SESSION['msg']['login-err'].'</div>';
                            unset($_SESSION['msg']['login-err']);
                        }
                    ?>

                    <label class="grey" for="username">Username:</label>
                    <input class="field" type="text" name="username" id="username" value="" size="23" />
                    <label class="grey" for="password">Password:</label>
                    <input class="field" type="password" name="password" id="password" size="23" />
                    <label><input name="rememberMe" id="rememberMe" type="checkbox" checked="checked" value="1" /> &nbsp;Remember me</label>
                    <div class="clear"></div>
                    <input type="submit" name="submit" value="Login" class="bt_login" />
                </form>
            </div>
            <div class="left right">            
                <!-- Register Form -->
                <form action="" method="post">
                    <h1>Not a member yet? Sign Up!</h1>     

                    <?php

                        if($_SESSION['msg']['reg-err'])
                        {
                            echo '<div class="err">'.$_SESSION['msg']['reg-err'].'</div>';
                            unset($_SESSION['msg']['reg-err']);
                        }

                        if($_SESSION['msg']['reg-success'])
                        {
                            echo '<div class="success">'.$_SESSION['msg']['reg-success'].'</div>';
                            unset($_SESSION['msg']['reg-success']);
                        }
                    ?>

                    <label class="grey" for="username">Username*:</label>
                    <input class="field" type="text" name="username" id="username" value="" size="23" />
                    <label class="grey" for="email">Email*:</label>
                    <input class="field" type="text" name="email" id="email" size="23" />
                    <label class="grey" for="first">First Name:</label>
                    <input class="field" type="text" name="first" id="first" size="23" />
                    <label class="grey" for="last">Last Name:</label>
                    <input class="field" type="text" name="last" id="last" size="23" />
                    <label class="grey" for="address1">Address line 1:</label>
                    <input class="field" type="text" name="address1" id="address1" size="23" />
                    <label class="grey" for="address2">Address line 2:</label>
                    <input class="field" type="text" name="address2" id="address2" size="23" />
                    <label class="grey" for="city">City:</label>
                    <input class="field" type="text" name="city" id="city" size="23" />
                    <label class="grey" for="state">State/Province:</label>
                    <input class="field" type="text" name="state" id="state" size="23" />
                    <label class="grey" for="zip">Zip/Postal Code:</label>
                    <input class="field" type="text" name="zip" id="zip" size="23" />
                    <label class="grey" for="country">Country:</label>
                    <input class="field" type="text" name="country" id="country" size="23" />
                    <p>
                    <label>A password will be e-mailed to you.</label>
                    <input type="submit" name="submit" value="Register" class="bt_register" />
                    </p>
                </form>
            </div>

            <?php

            else:

            ?>

            <div class="left">

            <h1>User Information</h1>            

            <p>
            <?php echo $_SESSION['first']; ?>
            <?php echo $_SESSION['last']; ?><br />
            <?php echo $_SESSION['address1']; ?>
            <?php echo $_SESSION['address2']; ?><br />
            <?php echo $_SESSION['city']; ?>,
            <?php echo $_SESSION['state']; ?>
            <?php echo $_SESSION['zip']; ?><br />
            <?php echo $_SESSION['country']; ?>
            </p>
            <p>Email: <?php echo $_SESSION['email']; ?></p>
            <p><a href="downloads.php">Downloads</a></p>
            <a href="?logoff">Log off</a>

            </div>

            <div class="left right">

                <!-- Product Registration Form -->

                <form class="clearfix" action="" method="post">
                    <h1>Product Registration</h1>

                    <?php

                        if($_SESSION['msg']['upd-err'])
                        {
                            echo '<div class="err">'.$_SESSION['msg']['upd-err'].'</div>';
                            unset($_SESSION['msg']['upd-err']);
                        }

                        if($_SESSION['msg']['upd-success'])
                        {
                            echo '<div class="success">'.$_SESSION['msg']['upd-success'].'</div>';
                            unset($_SESSION['msg']['upd-success']);
                        }
                    ?>

                    <label class="grey" for="product1">Product 1:</label>
                    <input class="field" type="text" name="product1" id="product1" value="<?php echo $_SESSION['product1']; ?>" size="23" />
                    <label class="grey" for="serial1">Serial 1:</label>
                    <input class="field" type="text" name="serial1" id="serial1" value="<?php echo $_SESSION['serial1']; ?>" size="23" />
                    <label class="grey" for="product2">Product 2:</label>
                    <input class="field" type="text" name="product2" id="product2" value="<?php echo $_SESSION['product2']; ?>" size="23" />
                    <label class="grey" for="serial2">Serial 2:</label>
                    <input class="field" type="text" name="serial2" id="serial2" value="<?php echo $_SESSION['serial2']; ?>" size="23" />
                    <label class="grey" for="product3">Product 3:</label>
                    <input class="field" type="text" name="product3" id="product3" value="<?php echo $_SESSION['product3']; ?>" size="23" />
                    <label class="grey" for="serial3">Serial 3:</label>
                    <input class="field" type="text" name="serial3" id="serial3" value="<?php echo $_SESSION['serial3']; ?>" size="23" />
                    <div class="clear"></div>
                    <input type="submit" name="submit" value="Update" class="bt_login" />
                </form>

            </div>

            <?php
            endif;
            ?>
        </div>
    </div> <!-- /login -->  

    <!-- The tab on top --> 
    <div class="tab">
        <ul class="login">
            <li class="left">&nbsp;</li>
            <li>Hello <?php echo $_SESSION['usr'] ? $_SESSION['usr'] : 'Guest';?>!</li>
            <li class="sep">|</li>
            <li id="toggle">
                <a id="open" class="open" href="#"><?php echo $_SESSION['id']?'Open Panel':'Log In | Register';?></a>
                <a id="close" style="display: none;" class="close" href="#">Close Panel</a>         
            </li>
            <li class="right">&nbsp;</li>
        </ul> 
    </div> <!-- / top -->

</div> <!--panel --> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:27:39.133

您的更新查询已结束。您需要以以下形式进行

```
UPDATE `tablename` 
SET col1=`value`,col2=`val2`
WHERE wherecol=`whereval` 
```

更改您的查询，看看是否有帮助。

你的查询应该是

```
UPDATE electrix_users
SET 
    product1= $_POST['product1'],
    serial1 = $_POST['serial1'],
    product2 = $_POST['product2'],
    serial2 = $_POST['serial2'],
    product3 = $_POST['product3'],
    serial3 = $_POST['serial3']
WHERE usr=$_POST['username'] 
```

但是，您应该始终清理任何用户输入的数据上的 sql 注入。我在示例中没有这样做，因为这是您应该以自己的方式做的事情。这个例子是作为一个例子提供给你的，并不会像现在这样阻止任何类型的 sql 注入。

始终尽你所能防止 SQL 注入！

# java - Java ExecutorService 堆空间问题

> ID：10060570
> 
> 赞同：5
> 
> 时间：2012-04-08T05:16:07.093
> 
> 标签：java, multithreading, exception, executorservice

我有一个 Java 多线程问题。我有以下工人阶级：

```
public class ThreadWorker implements Runnable {

    //some code in here

    public void run(){
      // invokes some recursion method in the ThreadWorker itself,
      // which will stop eventually
    {
} 
```

要使用线程，我使用的是`ExecutorService`：

```
public static int THREAD_NUMBER = 4;
public static ExecutorServide es = Executors.newFixedThreadPool(THREAD_NUMBER); 
```

添加类的实例`ThreadWroker`发生在这里：

```
public void recursiveMethod(Arraylist<Integers> elements, MyClass data){
     if (elements.size() == 0 && data.qualifies()){
         ThreadWorker tw = new ThreadWorker(data);
         es.execute(tw);
         return;
     }

     for (int i=0; i< elements.size(); i++){
          // some code to prevent my problem
          MyClass data1 = new MyClass(data);
          MyClass data2 = new MyClass(data); 
          ArrayList<Integer> newElements = (ArrayList<Integer>)elements.clone();
          data1.update(elements.get(i));
          data2.update(-1 * elements.get(i));
          newElements.remove(i);
          recursiveMethod(newElements, data1);
          recursiveMethod(newElements, data2);     
     {    
} 
```

问题是递归树的深度很大，因为它的宽度，所以很多`ThreadWorkers`都添加到了`ExecutorService`，所以在大输入上一段时间后得到

```
Exception in thread "pool-1-thread-2" java.lang.OutOfMemoryError: Java heap space 
```

这是造成的，我认为是因为要执行的`ThreadWorkers`i数量庞大，所以内存不足。`ExecutorSirvice`每个都`ThreadWorker`需要大约 40 Mb 的 RAM 来满足它的所有需求。

有没有一种方法可以获取添加了多少线程（实现可运行接口的类的实例）`ExecutorService`？所以我可以在上面显示的代码中添加它（int the " // some code to prevent my problem"），如

```
while ("number of threads in the ExecutorService" > 10){
    Thread.sleep(10000);
} 
```

所以我不会深入或广泛地使用递归并防止那些抛出异常的情况。

此致， 谢尔盖·阿加尼佐夫 jr。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T05:22:23.833

如何创建一个使用[ThreadPoolExecutor.CallerRunsPolicy](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)支持的[ThreadPoolExecutor](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.CallerRunsPolicy.html)。`BlockingQueue`

这样，当没有可用于运行任务的工作线程时，主线程（正在添加新作业）会自行运行任务，从而阻止添加更多作业。

在其 Javadoc 页面上有更多关于[ThreadPoolExecutor的构造函数选项的详细信息。](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/ThreadPoolExecutor.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-09T15:30:22.047

我认为您的案例非常适合 Java JDK 的“fork-join”框架。（谷歌搜索该关键字。）

Fork-Join 通过尽可能延迟“拆分”来帮助您减少队列中的作业数量。

不过，您必须将您的代码重新表述为该理念。

# php - php正则表达式问题

> ID：10060571
> 
> 赞同：0
> 
> 时间：2012-04-08T05:16:08.883
> 
> 标签：php

这是我的正则表达式，它只接受字符串和数字字符。否则它会说“只允许字符串字符。例如；az 或 0-9”。

```
preg_match("/^[a-zA-Z0-9]+$/", $uname) != 1
$err[] = "Only string charactes are allow. ex; a-z or 0-9"; 
```

但是，如果我写一个带有空格的文本（文本空格），那么它会说“只允许字符串字符。例如；az 或 0-9”。

我的代码哪里错了。？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T05:18:58.623

将 \s 放入您的模式匹配 [a-zA-Z0-9\s]，\s 是空格

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:23:47.757

如果值中有空格，则它与您定义的类不匹配。尝试在您的角色类中包含 \s。你想找到什么模式？

[http://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

# java - 使用 jquery 根据 servlet 的结果更改 div 背景颜色

> ID：10060572
> 
> 赞同：1
> 
> 时间：2012-04-08T05:16:15.783
> 
> 标签：java, javascript, jquery, jsp, servlets

**Java 脚本代码片段**

```
$(document).ready(function() {
$("#button").click(function(){
    $cityName = document.getElementById("name").value;
    $.post("AddServlet", {
        name:$cityName
    }, function(xml) {
        $("#feedback").html(
            $("result", xml).text()
            );         
    });
});
}); 
```

**在 Servlet 中**

```
 String name= request.getParameter("name");
        if (name.equals("shahid")) {

            response.setContentType("text/xml");
            out.println("<result>You are shahid</result>");

        }
        else{

            response.setContentType("text/xml");
            out.println("<result>You are not shahid</result>");

        } 
```

这工作正常！但我想相应地更改 div 的背景颜色（反馈），这意味着如果条件为真，背景颜色应为绿色，否则背景颜色应为红色（否则）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:23:40.073

我认为 XML 仅用于承载数据或表示 DTD 等元数据，

如果你想做一些改变你的颜色等的事情，那么你可以使用

```
 response.setContentType("text/html");
  out.println("<div id="result" style="color: blue">You are not shahid</div>"); 
```

希望这可以帮助你。

# objective-c - UILocalNotification 立即触发，而不是在预定时间触发

> ID：10060578
> 
> 赞同：2
> 
> 时间：2012-04-08T05:17:50.440
> 
> 标签：objective-c, iphone, uilocalnotification

我有一个将 NSArray 中的时间存储为 NSString 的对象。我选择了 NSString，因为那是我最终显示的而不是 NSDate。我正在尝试为它设置一个 UILocalNotification 。我所做的是：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.timeZone = [NSTimeZone systemTimeZone];
dateFormatter.dateFormat = @"h:mm a";

for (NSString *s in _times) {
    NSDate *date = [dateFormatter dateFromString:s];
    NSCalendar *calendar = [NSCalendar currentCalendar];
    NSDateComponents *dateComponents = [calendar components:(NSYearCalendarUnit | NSMonthCalendarUnit |  NSDayCalendarUnit)
                                                   fromDate:date];
    NSDateComponents *timeComponents = [calendar components:(NSHourCalendarUnit | NSMinuteCalendarUnit) fromDate:date];
    NSDateComponents *dateComps = [[NSDateComponents alloc] init];
    [dateComps setDay:[dateComponents day]];
    [dateComps setMonth:[dateComponents month]];
    [dateComps setYear:[dateComponents year]];
    [dateComps setHour:[timeComponents hour]];
    [dateComps setMinute:[timeComponents minute]];

    NSDate *itemDate = [calendar dateFromComponents:dateComps];

    NSLog(@"%@", [dateFormatter stringFromDate:itemDate]);
    UILocalNotification *note = [[UILocalNotification alloc] init];
    note.alertAction = thePill.name;
    note.alertBody = thePill.note;
    note.fireDate = itemDate;
    note.timeZone = [[NSCalendar currentCalendar] timeZone];

    if (note.fireDate == nil) {
        NSLog(@"nil firedate");
    }

//        note.repeatInterval = NSDayCalendarUnit;

    NSData *data = [self archivePill:thePill];
    NSDictionary *infoDict = [NSDictionary dictionaryWithObject:data forKey:PILL_NOTIFICATION];
    note.userInfo = infoDict;

    [[UIApplication sharedApplication] scheduleLocalNotification:note];
} 
```

当我 NSLog itemDate 时间时，这就是我想要的。在方法结束时，本地通知会立即触发。我不确定为什么，因为我的日期是正确的时间，我以为我只是将 fireDate 设置为那个日期？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-08-07T07:03:45.113

```
// Fire notification immediately after 1 sec 
UILocalNotification* localNotification = [[UILocalNotification alloc] init];
localNotification.fireDate = [NSDate dateWithTimeIntervalSinceNow:1];
localNotification.alertBody = @"Your alert message";
localNotification.timeZone = [NSTimeZone defaultTimeZone];
[[UIApplication sharedApplication] scheduleLocalNotification:localNotification]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2015-09-24T07:52:57.270

要立即触发通知，您应该使用

```
presentLocalNotificationNow 
```

代替

```
scheduleLocalNotification 
```

# mysql - 为什么我会收到 MySQL 错误？

> ID：10060579
> 
> 赞同：0
> 
> 时间：2012-04-08T05:18:02.723
> 
> 标签：mysql, sql

这是我的查询。它的目的是允许访问`animals`构成两个动物匹配的属性。

匹配表包含 animal1ID 和 animal2ID 列，用于存储构成匹配的动物。

```
SELECT id, 
    (SELECT * 
    FROM animals 
    WHERE animals.id=matches.animal1ID) AS animal1, 

    (SELECT * 
    FROM users 
    WHERE animals.id=matches.animalID) AS animal2 
FROM matches WHERE id=5 
```

但是，MySQl 返回此错误：`Operand should contain 1 column(s)`。

为什么？有没有另一种方法可以做到这一点，也许使用 JOIN 语句？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T05:22:45.250

您不应该在 SELECT 子句的子查询中使用 *。以这种方式重写您的查询：

```
SELECT m.id, a1.*, a2.*
FROM matches as m
LEFT JOIN animals as a1
    on a1.id=m.animal1ID 
LEFT JOIN users as a2
    on a2.id=m.animalID
WHERE m.id=5 
```

或者，只需将 * 替换为单个列名。但是，在这种情况下，您必须确保您的子查询将始终只返回一行。

您也可以使用别名以如下方式分隔字段：

```
SELECT m.id, a1.name as an1_name, a2.name as a2_name, a1.some_field as blabla ... 
```

并且您可以在使用 PHP 获取查询之前比较查询的结果，只需在 WHERE 子句中添加类似这样的内容：

```
...
WHERE m.id=5 
    AND a1.name <> a2.name    -- or what you want 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T05:21:55.243

更像这样的东西怎么样：

```
SELECT id, 
 animals.*, 
 users.* 
FROM matches 
    JOIN animals 
        ON animals.id=matches.animal1ID
    JOIN users 
        ON users.id=matches.animalID
WHERE id=5 
```

如果`animals`或`users`不能保证，您可以使用`LEFT JOIN`

```
SELECT id, 
 animals.*, 
 users.* 
FROM matches 
    LEFT JOIN animals 
        ON animals.id=matches.animal1ID
    LEFT JOIN users 
        ON users.id=matches.animalID
WHERE id=5 
```

使用这些 JOINS，您可以从中选择所需的任何列，`animals`并且`users`

```
SELECT id, 
 animals.animalName AS AnimalName, 
 users.animalName AS UserAnimalName
FROM matches 
    (LEFT) JOIN animals 
        ON animals.id=matches.animal1ID
    (LEFT) JOIN users 
        ON users.id=matches.animalID
WHERE id=5 
```

# java - 有什么方法可以根据用户输入编辑 URI？

> ID：10060582
> 
> 赞同：3
> 
> 时间：2012-04-08T05:18:31.113
> 
> 标签：java, android, android-edittext, uri

我有一个从 URI 接收信息的 HTTP GET。URI 用于 Google 购物。

```
https://www.googleapis.com/shopping/search/v1/public/products?key=key&country=US&q=digital+camera&alt=atom 
```

（把我的钥匙放在外面）。

有没有办法可以改变它

```
q=digital+camera 
```

用户放入 EditText 的任何内容？

所以基本上，我希望 EditText 更改在 Google 购物上搜索的内容。

**第一个屏幕，带有 EditText 的 ProductSearchEntry 用于搜索查询：**

![在此处输入图像描述](../Images/3179b4c9cc284733b76fce06a03a631f.png)

**ProductSearchEntry 的代码**

```
public class ProductSearchEntry extends Activity{
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.productsearchentry);

    Button search = (Button) findViewById(R.id.searchButton);

    search.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {
            Intent searchIntent = new Intent(getApplicationContext(), ProductSearch.class);
                startActivity(searchIntent);
        }
    });
    }
} 
```

**然后，我有第二堂课 ProductSearch，没有图片，只有这段代码：**

```
public class ProductSearch extends Activity{
protected void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.productsearchresults);
     EditText searchQuery = (EditText) findViewById(R.id.searchQuery);

        ProductSearchMethod test = new ProductSearchMethod();
        String entry;
        TextView httpStuff = (TextView) findViewById(R.id.httpTextView);
        try {
            entry = test.getSearchData(searchQuery.getText().toString());
            httpStuff.setText(entry);
              } catch (Exception e) {
                        e.printStackTrace();
    }
}
} 
```

**其中引用了 ProductSearchMethod 类，该类由一个 TextView 组成，该 TextView 更改为 HTTP GET 中收到的代码：**

![在此处输入图像描述](../Images/4ddee4b93ce76070fb5a495edb9a2180.png)

代码：

```
public class ProductSearchMethod {

public String getSearchData(String query) throws Exception{
    BufferedReader in = null;
    String data = null;
    try{
        HttpClient client = new DefaultHttpClient();
        URI site = new URI("https://www.googleapis.com/shopping/search/v1/public/products?key=key&country=US&q="+query.replace(" ","+")+"&alt=atom");
     HttpGet request = new HttpGet();
    request.setURI(site);
    HttpResponse response = client.execute(request);
    in = new BufferedReader(new InputStreamReader(response.getEntity().getContent()));
    StringBuffer sb = new StringBuffer("");
    String l = "";
    String nl = System.getProperty("line.seperator");
    while((l = in.readLine()) !=null){
        sb.append(l + nl);
    }
    in.close();
    data = sb.toString();
    return data;
    }finally{
        if (in != null){
            try{
                in.close();
                return data;
            }catch (Exception e){
                e.printStackTrace();
                }
            }
        } 
    }
} 
```

ProductSearchMethod 很好，但它不会将文本从“加载项”更改为网站代码。我之前有它工作，但后来我尝试编辑它搜索的内容（所有这些 ^），现在它没有改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-14T10:29:34.273

在您的代码中进行更改，例如

```
public class ProductSearchEntry extends Activity{ 
protected void onCreate(Bundle savedInstanceState){ 
    super.onCreate(savedInstanceState); 
    setContentView(R.layout.productsearchentry); 
    EditText etSearch = (EditText) findViewById(id of your edittext);
    Button search = (Button) findViewById(R.id.searchButton); 

    search.setOnClickListener(new View.OnClickListener() { 

        @Override 
        public void onClick(View v) { 
            //while calling intent 

            Intent searchIntent = new Intent(getApplicationContext(), ProductSearch.class); 
            searchIntent.putExtra("searchText",etSearch.getText().toString());
            startActivity(searchIntent); 
        } 
    }); 
    } 
} 
```

还有这样的活动，

```
public class ProductSearch extends Activity{     
protected void onCreate(Bundle savedInstanceState){     
    super.onCreate(savedInstanceState);     
    setContentView(R.layout.productsearchresults);     
        String searchQuery = getIntent().getStringExtra("searchText");     
        ProductSearchMethod test = new ProductSearchMethod();     
        String entry;     
        TextView httpStuff = (TextView) findViewById(R.id.httpTextView);     
        try {     
            entry = test.getSearchData(searchQuery);     
            httpStuff.setText(entry);     
              } catch (Exception e) {     
                        e.printStackTrace();     
    }     
}     
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:47:03.567

是的...更改您的 getSearchData() 方法以包含一个字符串作为参数

`public String getSearchData(String query) throws Exception{`

然后，将该字符串插入查询 URL，用“+”替换空格。您可能希望对字符串进行进一步的调节，例如对其进行 URL 编码。

`URI site = new URI("https://www.googleapis.com/shopping/search/v1/public/products?key=key&country=US&q="+query.replace(" ","+")+"&alt=atom");`

在您的 XML 中，创建一个包含以下行的按钮：

`android:onClick="search"`

在您的 ProductSearch 活动中，添加以下方法，并将 onCreate 中的代码移入其中。您还需要在 XML 中创建一个 EditText 以供输入。

```
public void search(View v)
{
    EditText searchQuery = (EditText) findViewById(R.id.searchQuery);

    ProductSearchMethod test = new ProductSearchMethod();
    String returned;
    try {
        returned = test.getSearchData(searchQuery.getText().toString());
        httpStuff.setText(returned);
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();

    }
} 
```

最后，您可能需要阅读正在运行的异步任务，以便查询不会在执行时冻结您的应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T05:53:34.563

可能是我弄错了，但你为什么不把它作为参数传递给

```
getSearchData() => getSearchData(string query) 
```

然后你可以换行

```
URI site = new URI("https://www.googleapis.com/shopping/search/v1/public/products?key=key&country=US&q=digital+camera&alt=atom"); 
```

到

```
URI site = new URI("https://www.googleapis.com/shopping/search/v1/public/products?key=key&country=US&q=+ URLEncoder.encode(query, "UTF-8")+&alt=atom"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-13T07:15:42.130

查看[http://androidforums.com/developer-101/528924-arduino-android-internet-garage-door-works-but-could-use-input.html](http://androidforums.com/developer-101/528924-arduino-android-internet-garage-door-works-but-could-use-input.html)我使用 Asynctask 在本地 Arduino 服务器上触发 get 命令. 它将 Arduino 的 pin 号附加到 URL 的末尾，具体取决于是否需要。我相信你可以用它来帮助你。

# entity-framework - 使用 IQueryable 在另一个列表中搜索列表

> ID：10060587
> 
> 赞同：1
> 
> 时间：2012-04-08T05:19:46.483
> 
> 标签：entity-framework, lambda

```
 public static IQueryable<Institution> WithFunds(this IQueryable<Institution> query, IEnumerable<Fund> allowedFunds)
    {
        return query.
    } 
```

我希望查询返回所有机构，该机构在机构.基金的“允许基金”列表中提供任何基金。请帮忙。

我的班级层次结构是这样的。

```
 public partial class Institution 
   {
   public int Id { get; set; }
   public virtual ICollection<Fund> Funds { get; set; }
   }

   public partial class Fund
   {
   public int Id { get; set; }
   public virtual Institution Institution { get; set; }
   } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:23:49.417

您可以使用`Contains`查询：

```
Fund[] funds = allowedFunds.ToArray();
return query.Where(x => x.Funds.Any(f => funds.Contains(f))); 
```

# java - Java包路径与eclipse中的类路径相同

> ID：10060588
> 
> 赞同：0
> 
> 时间：2012-04-08T05:19:55.780
> 
> 标签：java, eclipse, class, package, conflict

我有一个包 com.ab，它有类 com.aba、com.abb、com.abc 我在包 com.a 中也有一个名为 b 的类（所以它的路径也是 com.ab）

我的类只依赖于包 com.ab 中的类，但它们依赖于 CLASS com.ab 我可以使用 javac 编译它，因为它不关心我的依赖项的依赖关系。但是，eclipse 不允许我编译给我“无法解析类型 com.ab。它是从所需的 .class 文件中间接引用的”。Javac 让我可以很好地编译而不用关心它（它只是更麻烦），那么为什么不 Eclipse 呢？

编辑：我应该提到我已经从构建路径中删除了 com.ab，因为 Eclipse 不允许我访问 com.aba/b/c 否则（它将 com.ab 解析为一个类而不是一个包）。这就是为什么 eclipse 无法解析 com.ab 的原因，问题是，它不应该为了构建而必须，因为我直到运行时才使用它。

# java - 为什么 FileInputStream 中的 read() 返回一个整数？

> ID：10060589
> 
> 赞同：10
> 
> 时间：2012-04-08T05:19:56.267
> 
> 标签：java, byte, fileinputstream

[该](http://docs.oracle.com/javase/tutorial/essential/io/bytestreams.html)页面显示，当它想要指示没有更多字节要读取时，该方法可以返回-1。

但是一个字节的范围是 -128 到 127，对吧？read() 的返回类型是 byte 不是更有意义吗，因为它返回一个字节？

感谢您的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T05:23:54.933

它将值作为 an 返回的原因`int`是它需要返回一个介于 0-255 之间的值，以及能够指示何时没有更多字节可从文件中读取。通过使用`int`，您可以返回 0-255 的所有正无符号值，并指示文件何时完成。它不能只为一个值提供 256 个不同的`byte`值，其中一半在 Java 默认情况下是负数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T05:24:49.523

当然，但是[JavaDocs](http://docs.oracle.com/javase/7/docs/api/java/io/FileInputStream.html#read%28byte%5b%5d%29)继续说..

> **返回：**
> ***读***入缓冲区的总字节数，如果由于到达文件末尾而没有更多数据，则返回 -1。

希望一次可以从流中读取超过 127 个字节。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T05:21:50.087

一个字节的数据是一个范围从`0`to的无符号值`255`，而`byte`java 中的 a 定义为范围 from `-128`to `127`，这在读取二进制数据时没有意义。 `read()`返回一个整数以允许它使用所有非负值来表示有效数据，并返回一个负值来表示数据结束。

一般来说，一个函数应该使用与其用于返回数据的机制*不同的机制来指示错误条件或异常。*在最简单的情况下，它可以返回一个不能用来表示有效数据的值，以确保其含义明确。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T05:29:15.027

> 问：read() 的返回类型是字节不是更有意义吗？

A：不，因为“byte”不能返回整个范围 0..255（无符号），而“short”只是一个 PITA。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-08T05:30:06.750

FileInputStream 类可以将文件内容作为字节流读取。这是一个简单的例子：

```
InputStream input = new FileInputStream("c:\\data\\input-text.txt");

int data = input.read();
while(data != -1) {
  //do something with data...
  doSomethingWithData(data);

  data = input.read();
}
input.close(); 
```

注意：为清楚起见，此处跳过了正确的异常处理。要了解有关正确异常处理的更多信息，请转到 Java IO 异常处理。

FileInputStream 的 read() 方法返回一个 int，其中包含所读取字节的字节值。如果 read() 方法返回 -1，则流中没有更多数据要读取，可以关闭它。也就是说，-1 作为 int 值，而不是 -1 作为字节值。这里有区别！

# mvp - 在我的 MVP 应用程序中获取对象引用错误

> ID：10060590
> 
> 赞同：0
> 
> 时间：2012-04-08T05:20:00.727
> 
> 标签：mvp, wcsf

我在我的应用程序的不同模块中收到随机对象引用错误。我面临的错误是间歇性的。我对我的代码进行了调试，它看起来都是正确的。此外，每当我遇到该错误并且我再次尝试（在我遇到错误后立即）使用相同的步骤和相同的输入条件时不会出现错误。这种情况不仅发生在开发区，也发生在生产区。我试图分析并得到一些线索，表明临时 ASP 可能存在问题。但我不知道这会如何导致对象引用错误。有时我会看到诸如 App_Web_ighjds [我猜是某种 ID] 之类的源错误信息。不知道问题到底出在哪里？就我的代码而言，它看起来一切都很好。我相信如果我的代码有问题，那么它应该每次都可以重现。有谁知道为什么会发生这样的错误？如果临时 asp.net 文件有问题，那么我应该怎么做才能避免此类错误？任何帮助深表感谢。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T14:42:10.800

您正在寻找想法：我怀疑您的模块初始化程序或任何 DI 容器初始化。

查找仅在应用程序启动时运行的代码。我建议在开始新的调试会话之前完全重置您的 Web 服务器。

我还建议将 Visual Studio 调试器设置为“**抛出**异常时中断”，方法是转到“异常”设置 (Ctrl-Alt-E) 并选中“CLR 异常”“抛出”复选框。

# php - PHP MySQL：更新连接表？

> ID：10060594
> 
> 赞同：0
> 
> 时间：2012-04-08T05:20:22.660
> 
> 标签：php, mysql, sql, relationship

我对如何最好地更新连接表有点困惑。

```
Presentaion
id PK

Asset
id PK

PresentationAsset
presentationid
assetid 
```

因此，当更新 PresentationAsset 中的 Presentation 及其关联资产时，我是否首先搜索所有关系，删除这些关系然后创建新关系？

处理这种情况的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:55:08.400

至少，将它们全部删除并创建新的肯定是*最简单的。*毕竟，这只是两个查询。

```
DELETE FROM PresentationAsset WHERE presentationid = 1
INSERT INTO PresentationAsset VALUES (1, 1), (1, 2), (1, 3) 
```

假设这些确实是该表中仅有的两列（例如，没有时间戳或其他任何内容），我无法想象您需要将其复杂化的任何原因。

毕竟，擦除现有行并插入所有新行的替代方法是保留已经存在的行，但删除不再存在的行，然后插入新行。本质上，您仍然至少会得到 one`DELETE`和 one `INSERT`，因此在大多数现实世界的应用程序中应该不会有太大的性能差异。第一种方法的性能甚至可能更好，因为它需要较少的值检查每个操作。

当然，如果您正在处理一个足够大的场景，其中如此微小的性能差异很重要，您可能希望对所有选项进行真正的测试并自己测量性能。

当然，如果这些*不是*表中仅有的两列，则需要正确保留要更新的行的其他列的值，因此删除所有列并插入新列将不是一个选项反正。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:49:33.820

您有 2 个选项：

1）删除所有资产并按照您所说的创建新资产（def更易于编码且更易于调试。如果您在 PresentationAsset 中没有 PK，您可能遇到的唯一问题是多次删除可能会留下大量数据在 PresentationAsset PK 上。）

2）这样做（在伪代码中）

*   从当前与演示文稿关联的资产中获取所有 id（旧值）。我将其称为 array1
*   对于新值中的每个资产：
    *   如果它已经存在，用它的新值更新它并从 array1 中删除它的 id
    *   如果不是，请创建它
*   删除所有 PresentationId = currentPresentationId AND AssetId IN array1 的 PresentationAsset

希望它足够清楚，并希望我正确理解了您的问题；）我认为我可以接受 1），但 2）可能更好。您更新需要更新的值并删除那些已删除的值。

# javascript - 如何在 LabVIEW 中使用 IWebBrowser2 读取 Web 浏览器隐藏文档值？

> ID：10060595
> 
> 赞同：2
> 
> 时间：2012-04-08T05:21:10.283
> 
> 标签：javascript, .net, forms, labview

我已经在互联网上搜索了几个小时，但找不到与我正在尝试做的事情相关的任何内容。我编写了一个 HTML 文档，它从用户那里收集数据并将其存储在 javascript 数组中。然后将该数组连接在一起并作为字符串存储在隐藏的文档中。最初，我打算将此字符串传输到我用 C# 编写的程序中，但现在我使用的是 LabVIEW。

在 C# 中，我使用了两行简单的代码来做我想做的事：

```
System.Windows.Forms.HtmlElement hidden = webBrowser1.Document.GetElementById("hiddenfield1");
List<latlng> data = formharvest.extract(hidden.GetAttribute("value")); 
```

但现在我找不到访问此隐藏文档中数据的方法。我正在使用 IWebBrowser2 块将我的 HTML 代码嵌入到我的 VI 中。任何帮助将不胜感激。感谢您的时间！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T08:40:17.030

一个解决方案是在您的 LabVIEW 程序中启动一个 Web 服务器，并从中提供您的 HTML 表单。我想那时检索表单数据不会太难，但我自己没有做过这样的事情。

这是一个带有示例代码[的有趣讨论。](http://forums.ni.com/t5/LabVIEW/How-to-send-a-URL-from-within-LabView/m-p/791309?view=by_date_ascending#M361394)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:58:09.743

我不确定我是否真的理解您在上面所做的事情：在 C# 中，您似乎正在将 HTML 渲染引擎嵌入到 Windows 窗体（即窗口）中。

您可以将 .NET 嵌入到您的 labview 代码中，因此您应该能够在 LabView VI 中嵌入相同的 HTML 渲染引擎，但您可能会考虑将您的方法更改为更传统的方法，正如 CharlesB 建议的那样，服务器提供一些 HTML 到Web 浏览器，然后通过 HTTP GET 或 POST 将一些数据发送回服务器。

# iphone - GKSession sendDataToAllPeers 获取无效参数

> ID：10060599
> 
> 赞同：0
> 
> 时间：2012-04-08T05:22:00.227
> 
> 标签：iphone, objective-c, ios, bluetooth, gamekit

这是我的第一篇文章，我想首先感谢许多 stackoverflow 贡献者，他们永远不知道过去几天在我努力完成我的第一个 iOS 应用程序时他们帮助了我多少。我感谢他们和这个网站给他们一个发帖的地方。为了“还清”一些债务，我希望这会帮助其他人，因为我得到了帮助......

因此，我的应用程序使用 GKPeerPickerController 连接到第二台设备。连接后，设备可以相互发送短信。接收对等方的消息显示在 UIAlertView 中。一切正常。

然后我决定尝试位置并添加代码以获取当前位置。我将其转换为以度、分和秒为单位的纬度和经度，并将它们放入一个 NSString 中。我在我的故事板中添加了一个名为“发送位置”的按钮，点击该按钮时，会将位置发送给连接的对等方。这就是我遇到问题的地方。

btnSendLocation 使用 NSString 调用 sendPacket。sendPacket 将字符串转换为 NSData 并调用失败的 sendDataToAllPeers。当我了解如何捕获错误时，它是“无效参数 - sendDataToAllPeers:withDataMode:error:”。为什么会发生错误？我还有另外两种方法，它们也调用 sendPacket 并且工作正常。

```
 -(IBAction)btnSendLocation: (id)sender
    {
// Put latitude, longitude into string, then convert to NSData for sending
NSMutableString *tmp = [[NSMutableString alloc] initWithString:@"Latitude: "];
// Build the location string to send
[tmp appendString:slatitude];
    // …code for longitude
strToSend = [tmp copy];
bool sentPkt = false;
sentPkt = [self sendPacket:strToSend  failedWithError:nil];
}

    - (bool)sendPacket: (NSString *)strToSend failedWithError: (NSError *)error
{
bool sendPktOK = false;
packet = [strToSend dataUsingEncoding:NSASCIIStringEncoding];
// Send the packet.
sendPktOK = [self.currentSession sendDataToAllPeers:packet 
                       withDataMode:GKSendDataReliable error:&error];
// If there was an error, log it.
if (!sendPktOK) {
    NSLog(@"Error Domain: %@", [error domain]);
    NSLog(@"Error Descr: %@", [error localizedDescription]);
    NSLog(@"Error Code: %@", [error code]);
    return NO;
}    
return YES;
}

    - (void)locationManager:(CLLocationManager *)manager
didUpdateToLocation:(CLLocation *)newLocation
       fromLocation:(CLLocation *)oldLocation
    {
//  Location default is decimal degrees notation; convert to deg-min-secs
    int degrees = newLocation.coordinate.latitude;
    double decimalPart = fabs(newLocation.coordinate.latitude - degrees);
    int minutes = decimalPart * 60;
    double seconds = decimalPart * 3600 - minutes * 60;
    NSString slatitude = [NSString stringWithFormat:@"%d° %d' %1.1f\"",
                  degrees, minutes, seconds];
 // rest of code...
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T20:32:00.307

我能够进行更多测试并找到答案。问题不在 sendDataToAllPeers 中，而是在 NSString (strToSend) 到 NSData 的转换中：

```
packet = [strToSend dataUsingEncoding:NSASCIIStringEncoding]; 
```

具体来说，它是度数符号字符（小圆圈，ASCII 176）。NSASCIIStringEncoding 仅包含最多 127 个 ASCII 字符，这在 NSString.h (Foundation.framework) 中的注释中得到确认。我确信有一种更快的方法可以找到问题，但我还不太了解 Objective-C 或 Xcode 的调试工具。

# python - wsgi django 不工作

> ID：10060610
> 
> 赞同：0
> 
> 时间：2012-04-08T05:24:06.820
> 
> 标签：python, django, wsgi

我正在安装 django，

wsgi 的测试没问题，但是当我将默认文件指向 django 测试时，它不起作用，

这是运行良好的测试：

默认： `/etc/apache2/sites-available/default`

```
<VirtualHost *:80>
    ServerName www.example.com
    ServerAlias example.com
    ServerAdmin webmaster@example.com
    DocumentRoot /var/www

    <Directory /var/www/documents>
    Order allow,deny
    Allow from all
    </Directory>
    WSGIScriptAlias / /home/ubuntu/djangoProj/micopiloto/application.wsgi
    <Directory /home/ubuntu/djangoProj/mysitio/wsgi_handler.py>
    Order allow,deny
    Allow from all
    </Directory> 
</VirtualHost> 
```

应用程序.wsgi::`~/djangoProj/micopiloto`

```
import os 
import sys 

sys.path.append('/srv/www/cucus/application') 
os.environ['PYTHON_EGG_CACHE'] = '/srv/www/cucus/.python-egg' 

def application(environ, 
start_response):

     status = '200 OK'

     output = 'Hello World!MK SS9 tkt kkk'

     response_headers = [('Content-type', 'text/plain'),

                                     ('Content-Length', str(len(output)))]

     start_response(status, response_headers)

     return [output] 
```

但是如果我将默认值更改为指向`application_sa.wsgi`django 测试，它就不起作用:(

`application_sa.wsgi`

```
import os, sys

sys.path.append('/home/ubuntu/djangoProj/micopiloto') 

os.environ['DJANGO_SETTINGS_MODULE'] = 'micopiloto.settings'
import django.core.handlers.wsgi
application = django.core.handlers.wsgi.WSGIHandler() 
```

每次我将 wsgi 更改为测试时，我都会重新启动 apache 服务器，

所以我错过了什么？

多谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:31:08.053

尝试将您的 apache 配置更改为以下内容：

```
AddHandler wsgi-script .wsgi

WSGISocketPrefix /var/run/wsgi
WSGIRestrictEmbedded On

<VirtualHost *:80>
    ServerName www.mydomain.com

    WSGIDaemonProcess myprocess processes=2 threads=15
    WSGIProcessGroup myprocess

    WSGIScriptAlias / /home/ubuntu/djangoProj/micopiloto/application_sa.wsgi
</VirtualHost> 
```

然后将项目的根文件夹添加到 sys.path 以及 application_sa.wsgi 中：

```
sys.path.append('/home/ubuntu/djangoProj') 
sys.path.append('/home/ubuntu/djangoProj/micopiloto') 
```

# python - 在这种情况下 eval 的替代方法是什么？

> ID：10060612
> 
> 赞同：0
> 
> 时间：2012-04-08T05:26:19.337
> 
> 标签：python, django, django-views

我很不擅长清楚地说明我的问题。对不起。

基本上，我有许多功能非常相似的视图函数。其中一部分是使用`reverse`. 但是，这些视图函数中的每一个都执行不同的`reverse`操作，因此我无法在新的“通用视图”中一一编写它们。这太疯狂了。

当时，我正在尝试减少我正在编写的重复代码的数量（超过 500 行重复！！！！！！）

为了解决这个问题，我有一些辅助函数，其中之一是评估`reverse`给出的任何视图函数以及传递给辅助函数的任何参数。

```
def render_reverse(f, args):
    return eval(...) 
```

但`eval`它是邪恶的，而且是缓慢的。有什么替代品`eval`吗？在 Django 中解决这个问题的更好方法？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:31:34.543

为什么你首先需要这样做`eval`？`reverse()`正常打电话吗？

```
return reverse(f, *args) 
```

[允许您将`*`参数列表解压缩为实际的参数。](http://docs.python.org/tutorial/controlflow.html#unpacking-argument-lists)

* * *

也就是说，你为什么需要这个助手？为什么不直接放在`return reverse(...`你的视野里呢？

# c++ - C++ 向量和分段错误

> ID：10060613
> 
> 赞同：1
> 
> 时间：2012-04-08T05:26:36.630
> 
> 标签：c++, vector, segmentation-fault, binary-tree, abstract-syntax-tree

我正在研究一个简单的数学解析器。刚刚读到的东西`number = 1 + 2;`

我有一个包含这些标记的向量。它们存储字符的类型和字符串值。我试图逐步通过向量来构建这些令牌的 AST，并且我不断收到分段错误，即使我认为我的代码应该防止这种情况发生。

这是构建 AST 的代码：

```
struct ASTGen
{
    const vector<Token>            &Tokens;
    unsigned int                   size,
                                   pointer;

    ASTGen(const vector<Token> &t) : Tokens(t), pointer(0) 
    {
        size = Tokens.size() - 1;
    }

    unsigned int next()
    {
        return pointer + 1;
    }

    Node* Statement()
    {
        if(next() <= size)
        {
            switch(Tokens[next()].type)
            {
                case EQUALS
                :
                    Node* n = Assignment_Expr();
                    return n;
            }
        }

        advance();
    }

    void advance()
    {
        if(next() <= size) ++pointer;
    }

    Node* Assignment_Expr()
    {
        Node* lnode = new Node(Tokens[pointer], NULL, NULL);
        advance();
        Node* n = new Node(Tokens[pointer], lnode, Expression());
        return n;
    }

    Node* Expression()
    {
        if(next() <= size)
        {                        
            advance();
            if(Tokens[next()].type == SEMICOLON)
            {
                Node* n = new Node(Tokens[pointer], NULL, NULL);
                return n;
            }

            if(Tokens[next()].type == PLUS)
            {
                Node* lnode = new Node(Tokens[pointer], NULL, NULL);
                advance();
                Node* n = new Node(Tokens[pointer], lnode, Expression());
                return n;
            }
        }
    }
}; 
```

`...`

```
ASTGen AST(Tokens);
Node* Tree = AST.Statement();
cout << Tree->Right->Data.svalue << endl; 
```

我可以访问`Tree->Data.svalue`并获取`=`节点的令牌信息，所以我知道节点正在生成，我还可以获取`Tree->Left->Data.svalue`并获取左侧的变量`=`

我已经重写了很多次，尝试了不同的方法来遍历向量，但是当我尝试访问`=`正确的节点（应该是`+`节点）时，我总是遇到分段错误

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T05:35:37.420

还有很多我们没有看到的代码，所以我不能准确地告诉你发生了什么，但我看到了一些值得关注的事情。一是 Statement() 方法并不总是返回一个值。如果第一个`if`测试没有通过，那么我们调用`advance()`并从例程的底部跌落而没有明确的返回。调用者将尝试获取函数的返回值，但它会得到垃圾。这可能会导致各种问题，包括双重`free()`调用等，很容易导致段错误。

`Expression()`有同样的问题。

# .net - 如何自动设置某些实体属性。每当将实体保存到数据库时使用 EF Code First？

> ID：10060614
> 
> 赞同：0
> 
> 时间：2012-04-08T05:26:44.417
> 
> 标签：.net, entity-framework, entity-framework-4, ef-code-first

在某些情况下，当对象持久保存到数据库时，值应该始终更新。`DbContext.ValidateEntity`除了覆盖和修改属性集合之外，我找不到执行此操作的入口点`CurrentValues`，但在我看来，使用验证方法来修改对象属性带有非常难闻的气味。有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-23T04:51:51.950

感谢[Eranga](https://stackoverflow.com/users/60108/eranga)上面的评论，我发现[这个答案](https://stackoverflow.com/questions/7641552/overriding-savechanges-and-setting-modifieddate-but-how-do-i-set-modifiedby/7642041#7642041)非常适合我的问题。

它描述了如何覆盖`SaveChanges`我的 dbcontext 并设置我想要的属性。

# php - og:image 获取 php 变量

> ID：10060620
> 
> 赞同：0
> 
> 时间：2012-04-08T05:28:17.433
> 
> 标签：php, facebook-opengraph

我有一个从另一个页面获取 php 变量的图像标签，

```
 <img src="<?php echo urldecode($_GET['pic']); ?>" width="100%" alt="" />. 
```

它工作正常。我想知道如何使用它并使其与元标记 og:image 和 itemprop="image" 一起使用。我尝试了几种方法，但没有运气。

谢谢，达雷尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:55:08.053

它需要在 HTML 头中。

这是来自[http://ogp.me/的修改示例](http://ogp.me/)

```
<html prefix="og: http://ogp.me/ns#">
<head>
<title>The Rock (1996)</title>
<meta property="og:title" content="The Rock" />
<meta property="og:type" content="video.movie" />
<meta property="og:url" content="http://www.imdb.com/title/tt0117500/" />
<meta property="og:image" content="<?php echo urldecode($_GET['pic']); ?>" />
...
</head>
...
</html> 
```

# d - 如何对关联数组进行排序？

> ID：10060625
> 
> 赞同：3
> 
> 时间：2012-04-08T05:29:50.407
> 
> 标签：d

```
float[float] aa = [2.2:7.7, 3.3:6.6, 1.1:4.4];
std.sort(aa);
assert(aa == [1.1:4.4, 2.2:7.7, 3.3:6.6]); 
```

以上不起作用。怎么排序`aa`到位？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T06:12:56.253

D 的内置关联数组是[哈希表](http://en.wikipedia.org/wiki/Hash_table)。它们是未排序的，对它们进行排序是没有意义的。唯一有意义的排序是在遍历 AA 时，并且要做到这一点需要将它们放入一个新容器中。所以，你可以做类似的事情

```
auto keys = aa.keys;
sort(keys); 
```

但你不能对 AA 本身进行排序。如果你想要一个排序的地图，那么你需要使用类似的东西[`std.container.RedBlackTree`](http://dlang.org/phobos/std_container.html#RedBlackTree)- 虽然它确实需要一些工作才能使它作为一个地图而不是一个集合（例如，排序功能必须只对键进行排序，并且在传递时一些函数的东西，你需要一个带有虚拟值的元组）。

这就是为什么 Java 有 a`HashMap`和 a`SortedMap`以及为什么 C++ 有`unordered_map`(C++11) 和`map`. 它们都是地图，它们具有非常不同的特征——尤其是在排序和查找时间方面。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T05:36:50.793

你不能——这没有意义。

关联数组也称为“字典”或“地图”；D 中的特殊变化是哈希表。它们**不是**数组。对它们进行排序会*破坏*它们为您提供快速查找时间的能力。

如果您需要快速查找时间，请考虑[`RedBlackTree`](http://dlang.org/phobos/std_container.html#RedBlackTree)改用。

# javascript - 如何在javascript中启用/禁用链接按钮？

> ID：10060634
> 
> 赞同：5
> 
> 时间：2012-04-08T05:31:22.877
> 
> 标签：javascript, asp.net

我在页面中有一个链接按钮，例如：

```
<asp:LinkButton ID="edit" runat="server" OnClick="edit_Click" Enabled="False">ویرایش</asp:LinkButton> 
```

我想在 javascript 中启用/禁用它。

我使用此代码但设置为可见

```
var objedit = document.getElementById('<%= edit.ClientID.ToString() %>');
objedit.style.display = "none"; 
```

我使用此代码但未启用

```
if (count == 1) {
    objedit.disabled = false;
} else {
    objedit.disabled = true;
} 
```

我可以点击，但链接按钮被禁用。

![在此处输入图像描述](../Images/e4e4313f0a65582bc1d9a059b5478b3f.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:58:25.467

那么，这是你想要的吗？-- 更新，在 Chrome 和 Firefox 中测试
[***`http://jsfiddle.net/hzaR6/`***](http://jsfiddle.net/hzaR6/)
[***`http://jsfiddle.net/hzaR6/2/`***](http://jsfiddle.net/hzaR6/2/)

## 更新的方式

您可以使用`class`名称来定义禁用元素，您可以对其样式进行更多控制......等等。

```
$("#link").toggleClass("disabled"); //This will simply toggle the class 
```

对于CSS

```
#link.disabled{
    z-index:-1;            /*Make it not clickable*/
    position:relative;
    opacity: .5;           /*Lighter*/
}​ 
```

你可以在这里做任何你想做的事。

## 好的旧`form`元素方式

```
$("#edit").attr("disabled", false);
 -or-
document.getElementBy("edit").disabled = false; 
```

这将禁用任何表单元素。如果要启用它们，只需更改`false`为`true`.

* * *

```
var a = document.getElementBy("edit").disabled; 
```

`a`将是`true`如果元素被禁用。否则会`false`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:58:35.617

[此链接](http://forums.asp.net/t/1148848.aspx/1)应为您提供所需的一切。您不能真正“禁用”链接按钮，因为它只是一个附加了一些 javascript 的链接。基本上，您需要[将点击处理程序重新分配](https://stackoverflow.com/questions/5376444/how-to-disable-a-href-link-in-javascript)给返回 void 或 false 的内容。

您可以使用以下脚本引用链接的 ID：

```
<script runat="server">
   var a = document.getElementById('<%= edit.ClientID.ToString() %>')
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T05:34:11.890

尝试这个

```
var objedit = document.getElementById("edit"); //not editid (editid is a variable)
objedit.disabled = true; //if I'm not mistaken its true/false or disabled 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-06T00:38:27.403

要禁用元素：

```
document.getElementById('<%# edit.ClientID %>').disabled = 'disabled';
//.ToString() is not necessary; ClientID is a string. 
```

重新启用：

```
document.getElementById('<%# edit.ClientID %>').disabled = ''; 
```

当然，也可以在加载文档（DOM）之后完成。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-05T05:43:46.790

```
document.getElementById("lnk").style.display = "none"; 
```

# python - 使用 Facebook 注销的错误

> ID：10060637
> 
> 赞同：0
> 
> 时间：2012-04-08T05:32:02.970
> 
> 标签：python, facebook, facebook-graph-api

我正在尝试使用 Facebook 注销，我在我的 Web 应用程序中使用 facebook 登录，但它没有成功注销用户，当我按下重新加载时，用户被注销，这很奇怪。我尝试清除 cookie 的注销代码是

```
class LogoutHandler(webapp2.RequestHandler):

    def get(self):
        current_user = main.get_user_from_cookie(self.request.cookies,
                facebookconf.FACEBOOK_APP_ID,
                facebookconf.FACEBOOK_APP_SECRET)
        if current_user:
            graph = main.GraphAPI(current_user['access_token'])
            profile = graph.get_object('me')
            accessed_token = current_user['access_token']
        self.set_cookie('fbsr_' + facebookconf.FACEBOOK_APP_ID, None,
                        expires=time.time() - 86400)
        self.set_cookie('fbs_' + facebookconf.FACEBOOK_APP_ID, None,
                        expires=time.time() - 86400)
        self.set_cookie('fbm_' + facebookconf.FACEBOOK_APP_ID, None,
                        expires=time.time() - 86400)
        self.redirect('https://www.facebook.com/logout.php?next=http://%s&access_token=%s'
                       % (self.get_host(), accessed_token)) 
```

你能告诉我我应该怎么做才能实现注销用户吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:09:31.530

我很确定修改 facebook cookie 对你没有帮助，从他们的 API 看起来你可以将它们重定向到 URL，它应该解析他们的 cookie。

# c++ - 从 MathInputControl 节省墨水

> ID：10060638
> 
> 赞同：1
> 
> 时间：2012-04-08T05:32:05.050
> 
> 标签：c++, windows, microsoft-ink

我正在使用 a`MathInputControl`来接收解决数学练习所涉及步骤的手写输入。我想让用户回到解决方案中的上一步并编辑该步骤的输入。`MathInputControl` [允许加载以前保存的 ink](https://stackoverflow.com/questions/3693469/load-ink-to-a-mathinputcontrol-in-c-sharp)，但它不提供保存它的方法。

我可以通过处理 Insert 事件来接收其处理后的输出（在 MathML 中），但我无法从中恢复用户的笔迹。

我尝试`QueryInterface`了一个`IInkPicture`,`IInkEdit`或一个`IInkCollector`允许节省墨水的，但`MathInputControl`没有实现它们中的任何一个。

具体来说，有没有办法从 a 中保存用户的笔迹`MathInputControl`（除了接收 MathML 输出）？

# c - 使用多维数组传输缓冲区

> ID：10060640
> 
> 赞同：-3
> 
> 时间：2012-04-08T05:33:19.497
> 
> 标签：c, arrays

> **可能重复：**
> [多维数组和传输缓冲区](https://stackoverflow.com/questions/10060438/multidimensional-arrays-and-transferring-buffers)

我正在尝试将缓冲区保存到 1800 个字符的数组段中。当我能够传输缓冲区但当我尝试打印每个新缓冲区时。我的输出为空。我到底做错了什么？

我将循环更改为此以将空终止添加到第二维的末尾。现在输出告诉我它是空的。但是`printf("%c")`说数据已经转移了。

```
while(buf_pos < msg_size+1){
    if(buf_pos % 1800 == 0){
        msg_buff[key_num][cbuf_pos]='\0';
        key_num++;
        cbuf_pos=0;
        msg_buff[key_num][cbuf_pos]=buf[buf_pos];
    }else
        msg_buff[key_num][cbuf_pos]=buf[buf_pos];

    printf("%c",msg_buff[key_num][cbuf_pos]);
    cbuf_pos++;
    buf_pos++;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:11:36.333

尽量遵循 DRY（Don't Repeat Yourself）原则：

```
key_num = 0;
cbuf_pos = 0;
for (buf_pos = 0; buf_pos < msg_size+1; buf_pos++)
{
    if (buf_pos % 1800 == 0 && buf_pos > 0)
    {
        msg_buff[key_num][cbuf_pos] = '\0';
        key_num++;
        cbuf_pos = 0;
    }
    msg_buff[key_num][cbuf_pos] = buf[buf_pos];
    printf("%c", msg_buff[key_num][cbuf_pos]);
    cbuf_pos++;
} 
```

请注意，修改后的代码避免在第一个字符上递增（但仅在为零`buf_pos > 0`时进行测试，避免在 1800 次中测试明显​​的 1799 次。`buf_pos % 1800`

如果没有诊断打印，我会在后面写一行而不是两三行`if`：

```
 msg_buff[key_num][cbuf_pos++] = buf[buf_pos]; 
```

您也可以使用以下方法改进诊断打印：

```
printf("m[%d][%d] = %c\n", key_num, cbuf_pos, msg_buf[key_num][cbuf_pos]); 
```

这可能会突出问题（尽管我承认它很快就会变得过于冗长）。

`key_num == 1`这并不能真正解释您的问题，除非您在第一次通过循环时跳到的事实是麻烦。

# postgresql - 在停止/关闭的 postgresql db 上执行 VACUUM FULL

> ID：10060644
> 
> 赞同：2
> 
> 时间：2012-04-08T05:34:28.920
> 
> 标签：postgresql

我正在尝试重新启动一个已停止/已关闭并需要`VACUUM`.

[http://suwala.eu/blog/2010/10/09/how-to-vacuum-postgresql/](http://suwala.eu/blog/2010/10/09/how-to-vacuum-postgresql/)

按照上述命令序列，我似乎无法正确执行最后一行。

```
$ postgres -D /var/lib/pgsql/data YOUR_DATABASE_NAME < /tmp/fix.sql 
```

这给了我一个错误，上面写着

```
postgres: invalid argument: "YOUR_DATABASE_NAME"
Try "postgres --help" for more information. 
```

知道为什么吗？

澄清

我在服务器上使用的“YOUR_DATABASE_NAME”和数据目录是正确的。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T12:35:58.547

问题中引用的“how-to-vacuum-postgresql”页面在推荐时给出了一些非常糟糕的建议`VACUUM FULL`。所需要的只是一个完整的数据库真空，它只是`VACUUM`作为数据库超级用户对整个数据库运行（即，您不指定任何表名）。

A 的`VACUUM FULL`工作方式因版本而异，但它消除了数据库为快速重用而保存的堆文件中的所有空间，并将其释放到操作系统。这可能比返回可用数据库所需的最小值要慢几个数量级。`VACUUM FULL`并且由于在需要操作系统调用以重新分配数据库空间之后的任何插入或更新，它可能会导致之后的执行速度变慢，除非您的数据库有很多膨胀。（虽然，如果你关闭了 autovacuum，它的状态可能很糟糕，但你可能想先重新站起来，然后再解决。）

9.0 之前版本的另一个问题`VACUUM FULL`是，虽然它消除了表的堆文件中的膨胀，但它往往会*增加*其索引文件中的膨胀，有时甚至是显着的。如果您发出 a `VACUUM FULL`，您通常应该在它后面加上 a`REINDEX`以使索引恢复良好状态。

问题中引用的页面也没有注意 PostgreSQL 文档中给出的建议，网址为[http://www.postgresql.org/docs/8.3/interactive/routine-vacuuming.html#VACUUM-FOR-WRAPROUND](http://www.postgresql.org/docs/8.3/interactive/routine-vacuuming.html#VACUUM-FOR-WRAPAROUND)使用单用户模式：

> 由于系统一旦进入安全关闭模式就不会执行命令，唯一的方法是停止服务器并使用单用户后端执行 VACUUM。单用户后端不强制执行关闭模式。有关使用单用户后端的详细信息，请参阅 postgres 参考页面。

正如其他人所提到的 - 几乎没有关闭 autovacuum 有益的用例。*在大型表上通过显式清理来补充*自动清理活动可能很有用，或者您可能想要调整自动清理配置，但实际上 - 不要关闭它，否则您会看到膨胀，这会降低性能并且您会遇到事务定期出现 ID 环绕问题。在 autovacuum 执行维护时注意到性能下降的人有时会本能地降低触发时的积极性，但这通常会适得其反。通常最好调整 autovacuum 成本限制参数以加快工作速度，而不是让它忽略需要维护的表。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-04-08T05:44:52.337

这似乎是 PostgreSQL 中的一个问题，根据[9.0](http://www.postgresql.org/docs/9.0/static/app-postgres.html)和[8.3](http://www.postgresql.org/docs/8.3/static/app-postgres.html)的文档，它应该适用于这些版本，但不能。

但是，使用 --single 开关使其工作：

```
postgres --single -D [path-to-data-dir] [db-name] < /tmp/fix.sql 
```

# shell - 监控（跟随）和 grep 系统日志文件

> ID：10060646
> 
> 赞同：2
> 
> 时间：2012-04-08T05:34:40.440
> 
> 标签：shell, grep, voip, tail, syslog

当有来电时，我的 voip 电话适配器会生成一个日志条目。我设法将它转发到我本地 ubuntu 机器的系统日志，到一个名为 /var/log/linksys.log 的文件。

现在我想用它作为即时来电显示。重要的行包括字符串“INVITE sip”，所以我尝试了：

```
tail /var/log/linksys.log -f | grep "INVITE sip" 
```

但这带来了整条线。我只对来电者姓名和电话的部分感兴趣，在字符串“From：”和它之后的第一个@符号之间。

我的目标是能够使用 tail -f 或类似命令（也尝试过 multitail）跟踪文件，但只有在将新的相关行添加到日志时才显示名称和电话号码。（日志也收到其他行）

这是一个示例行：

```
Apr  8 01:06:10 INVITE sip: 999999@192.168.0.102:5060 SIP/2.0#015#012Via: SIP/2.0/UDP 111.111.11.111:5060;branch=z9hG4bK5f142476;rport#015#012From: "SMITHSON D" <sip:8885551234@111.111.11.111>;tag=as410515ed#015#012To: <sip:999999@192.168.0.102:5060>#015#012Contact: <sip:8885551234@111.111.11.111>#015#012Call-ID: 50354db42555555555aab68633cbb2e4@111.111.11.111#015#012CSeq: 102 INVITE#015#012User-Agent: VoIPMS/SERAST#015#012Max-Forwards: 70#015#012Remote-Party-ID: "SMITHSON D" <sip:8885551234@111.111.11.111>;privacy=off;screen=no#015#012Date: Sun, 08 Apr 2012 05:06:10 GMT#015#012Allow: INVITE, ACK, CANCEL, OPTIONS, BYE, REFER, SUBSCRIBE, NOTIFY, INFO#015#012Supported: replaces#015#012Content-Type: application/sdp#015#012Content-Length: 291#015#012#015#012v=0#015#012o=root 18702 18702 IN IP4 111.111.11.111#015#012s=session#015#012c=IN IP4 111.111.11.111#015#012t=0 0#015#012m=audio 33100 RTP/AVP 0 18 101#015#012a=rtpmap:0 PCMU/8000#015#012a=rtpmap:18 G729/8000#015#012a=fmtp:18 annexb=no#015#012a=rtpmap:101 telephone-event/8000#015#012a=fmtp:101 0-16#015#012a=silenceSupp:off - - - -#015#012a=ptime:20#015#012a=sendrecv#015 
```

非常感谢您的帮助...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T05:53:37.933

尝试使用`awk`.

这是我的 gawk 单线（使用 gawk 第三个参数扩展来匹配）：

```
gawk -v FS=';' '{match($3, /From: (.*)@/, m); print m[1]}' 
```

打印更漂亮的相同脚本：

```
gawk -v FS=';' -v OFS='/' '{match($3, /From: "(.*)" <(.*)@/, m); print m[1], m[2]}' 
```

只需将 grep 的输出通过管道传输到这个 gawk 脚本中：

```
gawk -v FS=';' -v OFS='/' '{match($3, /From: "(.*)" <(.*)@/, m); print m[1], m[2]}' | gawk -v FS=';' -v OFS='/' '{match($3, /From: "(.*)" <(.*)@/, m); print m[1], m[2]}' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T05:40:26.740

如果这是在 Gnu/Linux 上，您可以使用 inotifywait 来监视对文件的更改，然后触发一个脚本来提取您感兴趣的行部分并执行您需要的操作。

# java - 孙解释插

> ID：10060655
> 
> 赞同：0
> 
> 时间：2012-04-08T05:37:08.920
> 
> 标签：java, proxy

请参考[http://java.sun.com/developer/technicalArticles/JavaLP/Interposing/](http://java.sun.com/developer/technicalArticles/JavaLP/Interposing/)

然后是下面的解释：

> 在类加载时，必须在原始类之前找到插入的类...插入的类必须与原始类具有相同的全名。例如，类 Foo 可能存在于包 pub.foo 中，并从包 pub.bar 创建类 Bar 的实例。在另一个目录中创建文件 Bar.java，例如 fake/pub/bar 并将 /fake 添加到类路径，确保 JVM 将加载我们对类 pub.bar.Bar 的定义，而不是原来的。通过这种方式，我们可以将我们对 Bar 方法的定义插入到原件上。

在 Bar.java 之后的示例中是接口 - 其对象将被插入。

我无法理解 Sun 在上面的引用中解释了什么用例。具体疑惑： 1\. 原来提到的类是哪个？2\. 在什么情况下我需要拥有自己的 fake/pub.bar.Bar 而不是使用原始的（以防我正确解释了原始的含义）。如果可能，请举例说明。

预先感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:46:35.163

我相信您混合了两种创建代理的方式：CGLib 和运行时代理。第一个在加载您的类时创建代理，而第二个顾名思义是在运行时创建的。它们在某种程度上是相同的，它们都在您的对象周围创建透明代理，但它们之间存在一些显着差异。例如，CGlib 要求类是非最终的并且具有默认构造函数。或者让我们考虑以下示例。假设您有一项服务`MyService`：

```
public class MyService {
    @Transactional
    public void proxifiedMethod(){
         // some logic here    
    }

    public void pureMethod(){
        // some logic here...
        proxifiedMethod();
        // ...and here
    }
} 
```

假设您需要`proxifiedMethod`在事务中运行，并提示您与`@Transactional`注释一起使用的框架。如果框架（比方说 Spring）被配置为使用运行时代理，则不会创建`proxifiedMethod`从中调用的事务，在 CGLib 的情况下它会创建。`pureMethod`

回答您的问题：

1.  原始类是围绕其创建代理对象的实例的类。

2.  当涉及诸如事务或安全性等[横切关注点](http://en.wikipedia.org/wiki/Cross-cutting_concern)时，您所指的运行时代理在 Java 企业世界中被广泛使用。通常你不想用手动事务管理来弄乱你的代码，这是由像 Spring 这样的框架甚至像 JBoss 这样的应用程序容器来完成的。因此，您添加了一些元信息，例如`@Transactional`注释，框架会围绕您的注释服务创建一个代理来处理那里的事务管理逻辑。

# php - Html选择标签问题

> ID：10060656
> 
> 赞同：0
> 
> 时间：2012-04-08T05:37:29.347
> 
> 标签：php

我的表单中有两个字段。

1）Html 选择字段项（来自 mysql 数据库）
2）名称框。

如果用户从 html 选择标签中选择一个项目并忘记写他/她的名字，那么用 php 说..

```
* Your username required 
```

但是然后它没有显示用户**选择**的选择项目..它再次显示**选择...**这就是为什么会出现另一条错误消息..

```
* Please select your item. 
```

我如何用 php 显示这个选定的项目？

**html格式：**

```
<tr>    
<td>Class</td>
<td>
<select class="td" name="class">
    <option selected="selected" value="">Select..</option>
    <?php
    include_once("../../toplevel/content/manage/dbcon/dbcon.php");
    $sql = mysql_query("SELECT * FROM class");
    while($re = mysql_fetch_array($sql))
    {
$re_class = mysql_real_escape_string(trim($re['c_name']));      
        echo "<option value='$re_class'> $re_class </option>";
    }
    ?>  
</select>
</td>
</tr>

<tr>
<td>Name</td>
<td><input type="text" value="<?php if(isset($_POST['uname'])) echo 
$_POST['uname']; ?>" name="uname" class="td" /></td>
</tr>
<tr> 
```

我可以为 Name 字段执行此操作，但我如何为 select 字段执行此操作？
非常感谢。
希比尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T05:43:45.693

```
 <tr>    
  <td>Class</td>
<td>
<select class="td" name="class" onchange="this.form.submit();">
<option selected="selected" value="">Select..</option>
<?php
include_once("../../toplevel/content/manage/dbcon/dbcon.php");
$sql = mysql_query("SELECT * FROM class");
while($re = mysql_fetch_array($sql))
{
$re_class[] = mysql_real_escape_string(trim($re['c_name']));      

}
?>  
<?php for($i = 0; $i < count($re_class); $i++) { ?>

<?php echo "<option value='$re_class[$i]'";
if($re_class[$i] == $_POST['class']) { echo "selected=selected"; } ?> <?php echo ">" . $re_class[$i] . </option>"; ?>

<?php } ?>
   </select>
   </td>
   </tr>

 <tr>
 <td>Name</td>
 <td><input type="text" value="<?php if(isset($_POST['uname'])) echo 
     $_POST['uname']; ?>" name="uname" class="td" /></td>
 </tr>
 <tr> 
```

**编辑**`$_POST`如果当前变量等于`$re_class`数组中的选项，您似乎希望选择选项值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:55:57.323

```
<tr>    
<td>Class</td>
<td>
<select class="td" name="class">
    <option value="">Select..</option>
    <?php
    include_once("../../toplevel/content/manage/dbcon/dbcon.php");
    $sql = mysql_query("SELECT * FROM class");
    while($re = mysql_fetch_array($sql))
    {
        $re_class = mysql_real_escape_string(trim($re['c_name']));
        if(isset($_POST['class'])){
            echo '<option '.($_POST['class']==$re_class?'selected':'').' value='.$re_class.'>'.$re_class.'</option>';
        }else{
            echo '<option value='.$re_class.'>'.$re_class.'</option>';
        }
    }
    ?>  
</select>
</td>
</tr>

<tr>
<td>Name</td>
<td><input type="text" value="<?php if(isset($_POST['uname'])) echo 
$_POST['uname']; ?>" name="uname" class="td" /></td>
</tr>
<tr> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T05:59:01.653

```
 <tr>    
    <td>Class</td>
    <td>
    <select class="td" name="class">
        <option value="">Select..</option>
        <?php
        include_once("../../toplevel/content/manage/dbcon/dbcon.php");
        $sql = mysql_query("SELECT * FROM class");
        while($re = mysql_fetch_array($sql))
        {
           $re_class = mysql_real_escape_string(trim($re['c_name'])); 
           $sel='';
           if($re_class==$_POST['class'])  {
             $sel='selected="selected"';
           }   
            echo "<option value='$re_class' ".$sel."> $re_class </option>";
        }
        ?>  
    </select>
    </td>
    </tr>

    <tr>
    <td>Name</td>
    <td><input type="text" value="<?php if(isset($_POST['uname'])) echo 
    $_POST['uname']; ?>" name="uname" class="td" /></td>
    </tr>
    <tr> 
```

你是这个意思吗？

# ios - IOS镜像内存使用

> ID：10060657
> 
> 赞同：3
> 
> 时间：2012-04-08T05:37:37.707
> 
> 标签：ios, image, memory, memory-leaks, cocos2d-iphone

我想知道iOS在显示图像时如何利用内存...

例如：我有一个 2000w、2000h 的图像，但是在这种特殊情况下，iphone、ipod 有一个 460x920 的矩形（只是一个例子）......如果图像对于 iOS 设备的矩形是可见的，我确定正在使用内存，但是矩形中当前未绘制的图像的其余部分会发生什么？内存被消耗了吗？还是 iOS 足够聪明，不会仅将内存用于绘制部分？或者这被认为是内存泄漏？

我想知道这一点，因为在某些游戏中，您需要更长的场景和大图像，在这些场景中使用视差节点或任何类似的东西会有所帮助。但我开始怀疑这会如何影响我的记忆。

提前感谢您的回答。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-08T05:52:37.710

在 iPhone 4 上，您有 512MB 的 RAM。它在 CPU 和 GPU 之间共享，这意味着 Video RAM 会消耗其中的一部分。

如果您谈论的是`UIImage`分配的 2000 x 2000 像素。即使它不在屏幕上，它**也会**消耗 RAM。准确地说，它消耗2000*2000*4，大约16MB。这是由 Objective-c 运行时管理的。这是一个相当大的数额。据我所知，`UIImage`4系设备上a的最大尺寸是2048x2048，3系上是1024x1024。

查看矩形或您正在谈论的屏幕是视频 RAM 的一部分。典型的显示过程包括在视频 RAM 中合成图像，以便图形硬件可以显示它。

因此，您在这 512MB 的 RAM 中有两个图像副本。一个您可以通过代码 (RAM) 加载和修改，另一个较小的用于显示 (VRAM)。尽管在 VRAM 中，仅使用屏幕的大小。

不，这不是内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T14:24:00.760

是的，整个图像都加载到内存中。您可以使用诸如 CATiledLayer 之类的东西来更好地管理图像。

# ios - 准备使用油漆库

> ID：10060658
> 
> 赞同：0
> 
> 时间：2012-04-08T05:38:26.433
> 
> 标签：ios, uiview, drawing, paint

我正在寻找一个易于使用的绘画库。

我只想说类似的东西`- (void)drawLineWithColor:(UIColor *)color inView:(UIView *)view`。我想画线条、自由形式和一些类似的基本图纸。

我想通过 UIButton“激活”绘图并通过再次按下来停用它......有没有像我想象的那样易于使用的库或实现？

我在 google 上阅读了很多关于在 iOS 中绘画的内容。但这对我来说似乎很复杂，我认为有人可以构建某种非常易于使用的实现......

希望有人知道这样的事情。

谢谢，亲切的问候，朱利安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:25:02.850

如果您还没有机会查看[GLPaint](http://developer.apple.com/library/ios/#samplecode/GLPaint/Introduction/Intro.html)，我强烈推荐它。它可能有点复杂（GL 是出了名的难学），但它是一次很棒的学习体验。开头甚至直接在屏幕上绘制了“摇晃清除”字样，从而解决了您在屏幕上绘图的要求。它绘制了 4 种颜色（最后一次检查）。

# iphone - 如何使用 iPhone 中的核心图形制作思想泡泡

> ID：10060660
> 
> 赞同：1
> 
> 时间：2012-04-08T05:39:06.677
> 
> 标签：iphone, ios

我正在使用核心图形制作各种形状的气泡。

但是，我不确定如何制造思想泡沫。

我从矩形制作了圆角矩形。我是否使用相同的方法

做一个思想泡泡还是有其他方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T06:00:17.050

我认为您可以将其用作初始指导，然后以此为基础：

[如何在 iPhone 上以编程方式绘制椭圆形气泡？](https://stackoverflow.com/questions/7509348/how-to-draw-an-oval-speech-bubble-programmatically-on-iphone)

这是**samfu_1**对该帖子的回答

> 我会在两次迭代中完成。首先获取上下文并开始一条路径。填充一个椭圆，然后填充一个自定义路径，该路径用三条线包围一个三角形。我假设以下尺寸：70 宽，62 高。在 UIView 的子类中覆盖 draw rect 并在子类 UIViewController 中实例化：
> 
> ```
> -(void)drawRect:(CGRect)rect {
>     CGContextRef ctx = UIGraphicsGetCurrentContext();
>     CGContextSetRGBFillColor(ctx, 0.0, 0.0, 1.0, 1.0);
>     CGContextFillEllipseInRect(ctx, CGRectMake(0.0, 0.0, 70.0, 50.0)); //oval shape
>     CGContextBeginPath(ctx);
>     CGContextMoveToPoint(ctx, 8.0, 40.0);
>     CGContextAddLineToPoint(ctx, 6.0, 50.0);
>     CGContextAddLineToPoint(ctx, 18.0, 45.0);
>     CGContextClosePath(ctx);
>     CGContextFillPath(ctx);
> } 
> ```
> 
> 当在灰色背景下添加时，在 iPhone 模拟器中生成：
> 
> ![在此处输入图像描述](../Images/292a38fed1ee6900bc1b7512a6f83942.png)
> 
> 第二个代码示例将几乎复制您在上面生成的内容。我使用灵活的尺寸实现了这一点，当你实例化它时可以提供给 UIView 框架。本质上，对话气泡的白色部分是用黑色笔划绘制的。
> 
> ```
> -(void)drawRect:(CGRect)rect {
>     CGContextRef ctx = UIGraphicsGetCurrentContext();
>     CGRect aRect = CGRectMake(2.0, 2.0, (self.bounds.size.width * 0.95f), (self.bounds.size.width * 0.60f)); // set the rect with inset.
>     CGContextSetRGBFillColor(ctx, 1.0, 1.0, 1.0, 1.0); //white fill
>     CGContextSetRGBStrokeColor(ctx, 0.0, 0.0, 0.0, 1.0); //black stroke
>     CGContextSetLineWidth(ctx, 2.0); 
> 
>     CGContextFillEllipseInRect(ctx, aRect); 
>     CGContextStrokeEllipseInRect(ctx, aRect);    
> 
>     CGContextBeginPath(ctx);
>     CGContextMoveToPoint(ctx, (self.bounds.size.width * 0.10), (self.bounds.size.width * 0.48f));
>     CGContextAddLineToPoint(ctx, 3.0, (self.bounds.size.height *0.80f));
>     CGContextAddLineToPoint(ctx, 20.0, (self.bounds.size.height *0.70f));
>     CGContextClosePath(ctx);
>     CGContextFillPath(ctx);
> 
>     CGContextBeginPath(ctx);
>     CGContextMoveToPoint(ctx, (self.bounds.size.width * 0.10), (self.bounds.size.width * 0.48f));
>     CGContextAddLineToPoint(ctx, 3.0, (self.bounds.size.height *0.80f));
>     CGContextStrokePath(ctx);
> 
>     CGContextBeginPath(ctx);
>     CGContextMoveToPoint(ctx, 3.0, (self.bounds.size.height *0.80f));
>     CGContextAddLineToPoint(ctx, 20.0, (self.bounds.size.height *0.70f));
>     CGContextStrokePath(ctx);
>  } 
> ```
> 
> ![在此处输入图像描述](../Images/0bf98c6cc5178c7bffef7a9587de42d3.png)

**编辑：**

您也可以在这篇文章中参考**Brad Larson**的回答

[如何在 iPhone 上画出“讲话泡泡”？](https://stackoverflow.com/questions/4442126/how-to-draw-a-speech-bubble-on-an-iphone)

希望这对您有所帮助。

如果您需要更多帮助，请告诉我。

# python - 如何将带有值和表名的参数化语句传递给 Psycopg2？

> ID：10060663
> 
> 赞同：2
> 
> 时间：2012-04-08T05:40:24.320
> 
> 标签：python, psycopg2

我基本上是在尝试完成回答者在此处指出的内容：[psycopg2 cursor.execute() with SQL query parameter cause syntax error](https://stackoverflow.com/questions/9354392/psycopg2-cursor-execute-with-sql-query-parameter-causes-syntax-error)

我的声明是：

```
 cursor.execute('SELECT %s FROM %s WHERE %s = %s' % (pkey,table,field, "%s"), (value)) 
```

但是当我运行它时，我得到了错误：

```
---> 89         cur.execute('SELECT %s FROM %s WHERE %s = %s' % (pkey,table,field, "%s"), (value))
     90         res=cur.fetchone()
     91         if res==None:

TypeError: not all arguments converted during string formatting 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T05:50:36.577

尝试以下操作，db 模块应该注意正确的引用：

```
sql = 'SELECT %s FROM %s WHERE %s' % (pkey, table, field) + ' = %s'
cursor.execute(sql, (value, )) 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T22:45:08.613

您的问题**不**在于引用，而在于 Python 的元组语法。

*正如您在上面已经评论过的，表示单*元素元组的正确方法是`(value,)`. 一般来说，元组语法是（非正式地）：

```
()
(value,)
(value, value)
(value, value, value) 
```

对于多元素元组，依此类推。

接受的答案并不正确，其中建议的更改纯粹是口味问题（在替换后附加最后一个 '%s' 与您的尝试相比）。

* * *

记住这一点：在 Python 中进行常见的字符串替换时，当你有一个只有一个的字符串时`%s`，你可以删除元组并简单地传递单个替换字符串本身：

```
'foo %s' % 'bar' 
```

这将导致`foo bar`.

`psycopg`你可以用's尝试同样的方法`cursor.execute`，*也许*它可以工作（我会在发布之前自己测试它，但我不能）。

# java - 我无法运行 JAR 文件？

> ID：10060667
> 
> 赞同：0
> 
> 时间：2012-04-08T05:41:17.290
> 
> 标签：java, netbeans, jar

我在 NetBeans 中创建了一个 Java JAR 文件。我已经在程序上运行*干净并构建*，一切都很成功。当我在 NetBeans 中运行程序时也成功了，但是当我在 NetBeans dist 文件夹中找到 JAR 文件并运行它时，什么也没有发生。该程序没有运行，也没有异常或消息。你能帮我理解为什么吗？

编辑：我已经解决了这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:47:39.320

你想制作可执行的 jar 吗？你可能想把你的主类放在 jar 文件的清单中。

就像是 ：

```
Main-Class : file_name_with_main_method 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T05:48:10.820

听起来你可能在 Windows 上:)

“运行” .jar 文件的一种方法是为“.jar”后缀和“javaw.exe”命令创建 Windows 文件关联：

1) 进入 Windows 资源管理器并 [浏览...] 到您的 .jar 文件

2) 右键单击​​ .jar 文件，然后选择“打开方式...”选项。

3）如上选择javaw.exe，看是否运行。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T05:46:59.263

如果您使用的是 Mac，我建议您检查控制台。您可以查看 Jar 启动中的错误以了解它失败的原因。

# html - 使用一个 DIV 屏蔽另一个 DIV

> ID：10060669
> 
> 赞同：5
> 
> 时间：2012-04-08T05:41:26.167
> 
> 标签：html, css, mask

这个问题最好用截图来解释：http: [//i42.tinypic.com/2ccvx91.jpg](http://i42.tinypic.com/2ccvx91.jpg)

包装器 div 有一个城市的背景图像。

```
#wrapper {
    background:url('city.jpg');
} 
```

在那个 div 里面是一堆“square”类的其他 div：

```
.square {
    width:40px;
    height:40px;
    background-color:#27272f;
    opacity:.8;
    margin:2px;
} 
```

由于不透明，您可以透过广场看到城市。但是你也可以看穿正方形之间的空间，我不希望它这样做。我只想能够通过 div 看到它后面的元素，它们之间的空间是纯黑色的。我怎样才能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:48:23.080

如何设置`border` 和使用包装器 div 来隐藏角落。您必须有一个负边距才能使重叠起作用

[这是改编自 animuson 的 jsfiddle](http://jsfiddle.net/8aRAm/1/)：

```
<div id="wrapper">
    <div class="hidingborder">
      <div class="square"></div>
    </div>
    <div class="hidingborder">
      <div class="square"></div>
    </div>
    <div class="hidingborder">
      <div class="square"></div>
    </div>
    <div class="hidingborder">
      <div class="square"></div>
    </div>
    <div class="hidingborder">
      <div class="square"></div>
    </div>
</div>​ 
```

这是CSS

```
#wrapper {
    background:Green;
    font-size:0;
}
.square {
    width:40px;
    height:40px;
    background-color:#27272f;
    opacity:.8;
    border:2px solid black;
    border-radius:5px;
    display:inline-block;
    margin:-2px;
}
.hidingborder
{
   border:#27272f solid;
   display:inline-block; 
}
​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T05:51:24.950

最好的选择是删除边距......并给你的 div 边框 2 px ..

# php - 我如何从一个简单的帖子中获取一个 ID，以便以后查找它？

> ID：10060672
> 
> 赞同：1
> 
> 时间：2012-04-08T05:41:47.907
> 
> 标签：php, simplepie

我最近开始开发一个投资组合网站，我想使用 simplepie 链接到我的 wordpress 博客。到目前为止，这是一个非常顺利的过程 - 加载帖子的名称和描述，并将它们链接到完整的帖子非常容易。但是，我也希望可以选择在我自己的网站上呈现这些帖子。获取给定帖子的全部内容很简单，但我想做的是提供最近的帖子列表，这些帖子链接到我的投资组合网站上的 php 页面，该页面采用某种 GET 变量来识别帖子，以便我可以在那里渲染全部内容。

那就是我遇到问题的地方-似乎没有任何方法可以根据特定的 ID 或名称或类似名称查找帖子。有什么方法可以从一个页面上的帖子对象中提取一些唯一标识符，然后将标识符传递到另一个页面并在那里查找特定的帖子？如果那不可能，我有什么办法可以简单地传递整个帖子对象，或者将其临时存储在某个地方以便其他页面可以使用？

感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-20T12:57:25.670

我偶然发现了您的问题，正在寻找有关 simplepie 的其他内容。但是我在使用 simplepie 时确实使用了标识符。所以这似乎是你问题的答案：

我在 PHP 中的 getFeedPosts 函数如下所示：

```
public function getFeedPosts($numberPosts = null) {
    $feed = new SimplePie();    // default options
    $feed->set_feed_url('http://yourname.blogspot.com');    // Set the feed
    $feed->enable_cache(true);  /* Enable caching */
    $feed->set_cache_duration(1800);    /* seconds to cache the feed */         
    $feed->init();  // Run SimplePie.
    $feed->handle_content_type();
    $allFeeds = array();
    $number = $numberPosts>0 ? $numberPosts : 0;
    foreach ($feed->get_items(0, $number) as $item) {
        $singleFeed = array(
            'author'=>$item->get_author(),
            'categories'=>$item->get_categories(),
            'copyright'=>$item->get_copyright(),
            'content'=>$item->get_content(),
            'date'=>$item->get_date("d.m.Y H:i"),
            'description'=>$item->get_description(),
            'id'=>$item->get_id(),
            'latitude'=>$item->get_latitude(),
            'longitude'=>$item->get_longitude(),
            'permalink'=>$item->get_permalink(),
            'title'=>$item->get_title()
        );
        array_push($allFeeds, $singleFeed);
    }
    $feed = null;
    return json_encode($allFeeds);
} 
```

如您所见，我构建了一个关联数组并将其作为 JSON 返回，这使得在客户端使用 jQuery 和 ajax（在我的例子中）变得非常容易。

“id”是我博客中每篇文章的唯一标识符。所以这是在另一个功能/另一个页面上识别相同帖子的关键。您只需要迭代帖子并比较此 ID。据我所知，没有 get_item($ID) 函数。有一个 get_item($key) 函数，但它也只是从数组位置的所有帖子列表中取出一个特定帖子（这几乎与我建议的方式相同）。

# java - 在 Java 中运行 JavaScript

> ID：10060674
> 
> 赞同：2
> 
> 时间：2012-04-08T05:42:49.963
> 
> 标签：java, javascript, html

我有一个 javaScript 标签：

```
<!-- Begin ParsTools.com Prayer Times Code -->
<script type="text/javascript" language="javascript" src="http://www2.parstools.com/oghat/oghatwhite.php"></script>
<script language="javascript">
    var CurrentDate= new Date(); 
    var JAT= 1;  
    function pz() {};
    init();
    document.getElementById("cities").selectedIndex=12;
    coord();
    main();
</script>
<!-- End Prayer Times code --> 
```

我想在 java 中运行这个脚本并接收服务器发送的 html 文档作为响应。我怎样才能做到这一点？我还需要解析收到的文档并提取一些特殊标签。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T05:57:09.880

我知道的最简单的方法是使用 HtmlUnit。

```
WebClient htmlunit = new WebClient();
HtmlPage page = htmlunit.getPage("http://www.google.com");

//executing the javascript and getting the new page
page = page.executeJavaScript("<JS code here>").getNewPage(); 
```

更多信息：[http ://www.aviyehuda.com/2011/05/htmlunit-a-quick-introduction/](http://www.aviyehuda.com/2011/05/htmlunit-a-quick-introduction/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-28T06:15:46.317

Sajad/Future 访问者，如果使用较旧的 java 版本（< 1.6，更高版本的 java 已嵌入），您可以查看[Jakarta Bean 脚本框架 (BSF)以运行您的 javascript，即使作为独立代码也是如此](http://commons.apache.org/proper/commons-bsf/)

# ruby-on-rails - 启用身份映射时，Mongoid 仅在 has_many 关系中返回 _id 字段

> ID：10060676
> 
> 赞同：0
> 
> 时间：2012-04-08T05:43:42.680
> 
> 标签：ruby-on-rails, mongodb, mongoid, has-many, identity-map

Mongoid 2.4.4 Rails 3.2.1 MongoDB 2.0.1

**我有 3 个模型：**

认证、收藏和内容。</p>

它就像从身份验证到内容到收藏夹的多对多关系。

**当我这样查询时：**

@favorites = Favorite.any_in(authentication_id: list).includes(:content, :authentication).desc(:collected_at).page params[:page]

@favorites 工作正常

@favorites 的内容也可以正常工作。

但是@favorites 的身份验证只有_id，所有其他字段都为零

当我设置 identity_map_enabled: false 时，它​​已修复。

这是 identity_map 的错误吗？

这是tracert的一些信息，
**当启用身份映射时，您可以看到 f.weibo.name 为 nil。**

**当 identity_map_enabled: true 时如何解决这个问题？**

- - - - - - - - - - - 楷模 - - - - - - - - - - - - - - -----

```
class Authentication
 include Mongoid::Document
 include Mongoid::Timestamps
 include Service::Weibo::Api::Oauth
 cache

 field :_id, :type => Integer
 field :uid, :type => Integer
 field :name, :type => String

 has_many :favorites
end

class Favorite
 include Mongoid::Document
 include Mongoid::Timestamps
 cache
 paginates_per 20

 field :collected_at, :type => Time, :default => Time.now

 belongs_to :authentication
 belongs_to :content

 def weibo
   self.authentication
 end

 def weibo_ids
   self.authentication_ids
 end

end

class Content
 include Mongoid::Document
 include Mongoid::Timestamps
 cache

 field :text, :type => String

 has_many :favorites
end 
```

-------------- 调试代码：------------

```
 logger.debug "list: #{list}"
   @favorites = Favorite.any_in(authentication_id:
list).includes(:content, :authentication).desc(:collected_at).page
params[:page]
   @favorites.each do |f|
     logger.debug f
     logger.debug "name: #{f.weibo.name}"

    logger.debug "before name: #{@favorites.first.weibo.name}"
    clist =  [764826410]
 #    cf = Favorite.any_in(content_id:
clist).includes(:content, :authentication)
    logger.debug "after query name: #{@favorites.first.weibo.name}"
 #   cf.each {|f| logger.debug "cname: #{f.weibo.name}" }
    logger.debug "after logger name: #{@favorites.first.weibo.name}" 
```

--------- 调试代码结束 ---------

--------- LOG identity_map_enabled: true --------

```
[0408 12:42:38(3129)DEBUG] list: [1751951491]
 15 [0408 12:42:38(3129)DEBUG] MONGODB
weibofav_development['system.namespaces'].find({})
 16 [0408 12:42:38(3129)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(20).sort([[:collected_at, :desc]])
 17 [0408 12:42:38(3129)DEBUG] #<Favorite _id:
4f80c04953cd210b56000003, _type: nil, created_at: 2012-04-07 22:31:37
UTC, updated_at: 2012-04-07 22:31:37 UTC, collected_at
   : 2012-04-07 20:46:37 UTC, authentication_id: 1751951491,
content_id: 3418929751988429>
 18 [0408 12:42:38(3129)DEBUG] name:
 19 [0408 12:42:38(3129)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 20 [0408 12:42:38(3129)DEBUG] before name:
 21 [0408 12:42:38(3129)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 22 [0408 12:42:38(3129)DEBUG] after query name:
 23 [0408 12:42:38(3129)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 24 [0408 12:42:38(3129)DEBUG] after logger name:
 25 [0408 12:42:38(3129)DEBUG] #<Favorite _id:
4f80c04953cd210b56000005, _type: nil, created_at: 2012-04-07 22:31:37
UTC, updated_at: 2012-04-07 22:31:37 UTC, collected_at
   : 2012-04-07 20:46:37 UTC, authentication_id: 1751951491,
content_id: 3418840442279122>
 26 [0408 12:42:38(3129)DEBUG] name:
 27 [0408 12:42:38(3129)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 28 [0408 12:42:38(3129)DEBUG] before name:
 29 [0408 12:42:38(3129)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 30 [0408 12:42:38(3129)DEBUG] after query name:
 31 [0408 12:42:38(3129)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 32 [0408 12:42:38(3129)DEBUG] after logger name:
 33 [0408 12:42:38(3129)DEBUG] #<Favorite _id:
4f80c04953cd210b56000007, _type: nil, created_at: 2012-04-07 22:31:37
UTC, updated_at: 2012-04-07 22:31:37 UTC, collected_at
   : 2012-04-07 20:46:37 UTC, authentication_id: 1751951491,
content_id: 3368827987931269> 
```

--------- LOG identity_map_enabled: false --------------------

```
17 [0408 12:37:53(3092)DEBUG] list: [1751951491]
 18 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['system.namespaces'].find({})
 19 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(20).sort([[:collected_at, :desc]])
 20 [0408 12:37:53(3092)DEBUG] #<Favorite _id:
4f80c04953cd210b56000003, _type: nil, created_at: 2012-04-07 22:31:37
UTC, updated_at: 2012-04-07 22:31:37 UTC, collected_at
   : 2012-04-07 20:46:37 UTC, authentication_id: 1751951491,
content_id: 3418929751988429>
 21 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['authentications'].find({:_id=>1751951491}).limit(-1).sort([[:_id, :asc]])
 22 [0408 12:37:53(3092)DEBUG] name: magazine
 23 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 24 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['authentications'].find({:_id=>1751951491}).limit(-1).sort([[:_id, :asc]])
 25 [0408 12:37:53(3092)DEBUG] before name: magazine
 26 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 27 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['authentications'].find({:_id=>1751951491}).limit(-1).sort([[:_id, :asc]])
 28 [0408 12:37:53(3092)DEBUG] after query name: magazine
 29 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 30 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['authentications'].find({:_id=>1751951491}).limit(-1).sort([[:_id, :asc]])
 31 [0408 12:37:53(3092)DEBUG] after logger name: magazine
 32 [0408 12:37:53(3092)DEBUG] #<Favorite _id:
4f80c04953cd210b56000005, _type: nil, created_at: 2012-04-07 22:31:37
UTC, updated_at: 2012-04-07 22:31:37 UTC, collected_at
   : 2012-04-07 20:46:37 UTC, authentication_id: 1751951491,
content_id: 3418840442279122>
 33 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['authentications'].find({:_id=>1751951491}).limit(-1).sort([[:_id, :asc]])
 34 [0408 12:37:53(3092)DEBUG] name: magazine
 35 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 36 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['authentications'].find({:_id=>1751951491}).limit(-1).sort([[:_id, :asc]])
 37 [0408 12:37:53(3092)DEBUG] before name: magazine
 38 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 39 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['authentications'].find({:_id=>1751951491}).limit(-1).sort([[:_id, :asc]])
 40 [0408 12:37:53(3092)DEBUG] after query name: magazine
 41 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['favorites'].find({:authentication_id=>{"$in"=>[1751951491]}}).limit(-1).sort([[:collected_at, :desc]])
 42 [0408 12:37:53(3092)DEBUG] MONGODB
weibofav_development['authentications'].find({:_id=>1751951491}).limit(-1).sort([[:_id, :asc]])
 43 [0408 12:37:53(3092)DEBUG] after logger name: magazine 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-13T19:44:08.677

Rails 3.2.1、Mongoid 2.4.8、MongoDB 2.0.4

我复制了你的代码，除了我没有 Service::Weibo::Api::Oauth 也没有工作微博帐户来尝试测试这方面。但是，我有以下结果和说明，希望对您有所帮助。

authentication_id 和 content_id 是 Mongoid 生成的参考关系，其类型为 BSON::ObjectId，具有十六进制标识符字符串。在您的调试代码和日志中，显示了（不正确的）fixnum，因此您可能需要检查它并确保您的查询是正确的。

以下对我有用，结果符合预期，除了 _type 之外没有任何 nil 字段，无需修改 identity_map。您可能应该怀疑没有使用正确的 BSON::ObjectId 或您的微博代码。希望这会有所帮助。

-加里

```
list = [1751951491]
Rails.logger.debug "list.first: #{list.first}"
auth = Authentication.create(uid: list.first, name: 'authenication name')
content = Content.create(text: 'content text')
favorite = Favorite.new
auth.favorites << favorite
Rails.logger.debug "auth.favorites:#{auth.favorites.inspect}"
assert_equal(1, auth.favorites.length)
content.favorites << favorite
Rails.logger.debug "content.favorites:#{content.favorites.inspect}"
assert_equal(1, content.favorites.length)
auth_list = [auth._id.to_s]
Rails.logger.debug "auth_list:#{auth_list.inspect}"
@favorites = Favorite.any_in(authentication_id: auth_list).to_a
assert_equal(1, @favorites.length)
Rails.logger.debug "@favorites:#{@favorites.inspect}"
@favorites = Favorite.any_in(authentication_id: auth_list).includes(:content, :authentication).desc(:collected_at).to_a
assert_equal(1, @favorites.length)
Rails.logger.debug "@favorites:#{@favorites.inspect}"
@favorites.each do |f|
  Rails.logger.debug f.inspect
  Rails.logger.debug f.authentication.inspect
  Rails.logger.debug f.content.inspect
end 
```

# android - 从列表中添加或删除时不支持获取操作 ?

> ID：10060680
> 
> 赞同：1
> 
> 时间：2012-04-08T05:45:05.943
> 
> 标签：android, list, arraylist, listactivity, invalidoperationexception

初学者 android 程序员，我想在用户单击 listitem 时从字符串列表中添加和删除项目，但是在尝试执行此操作时出现操作不支持错误。请参阅以下代码以了解我想要做什么。

```
@Override
    protected void onListItemClick(ListView l, View v, int position, long id) {
        super.onListItemClick(l, v, position, id);
        if(myList != null)
        {
            StringBuilder stringBuilder = new StringBuilder();
            if(myList.contains(mylist1.get(position).getPackageName()))
            {
                for(int i = 0; i < myList.size(); i++)
                {
                    if(myList.get(i).equals(mylist1.get(position).getPackageName()))
                        continue;
                    if((myList.size() - 1) != i)
                        stringBuilder.append(myList.get(i)).append(separator);
                    else
                        stringBuilder.append(myList.get(i));
                }
                editor.putString("mypreference", stringBuilder.toString());
                mylistt1.get(position).setDisabled(false);
       //error happens in following
                myList.remove(mylist1.get(position).getPackageName());
            }
      }
} 
```

这是日志猫

```
04-08 11:33:00.030: ERROR/AndroidRuntime(533): FATAL EXCEPTION: main
        java.lang.UnsupportedOperationException
        at java.util.AbstractList.remove(AbstractList.java:638)
        at java.util.AbstractList$SimpleListIterator.remove(AbstractList.java:75)
        at java.util.AbstractCollection.remove(AbstractCollection.java:229)
        at com.mypackage.myActivity.onListItemClick(myActivity.java:82)
        at android.app.ListActivity$2.onItemClick(ListActivity.java:319)
        at android.widget.AdapterView.performItemClick(AdapterView.java:292)
        at android.widget.AbsListView.performItemClick(AbsListView.java:1058)
        at android.widget.AbsListView$PerformClick.run(AbsListView.java:2514)
        at android.widget.AbsListView$1.run(AbsListView.java:3168)
        at android.os.Handler.handleCallback(Handler.java:605)
        at android.os.Handler.dispatchMessage(Handler.java:92)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4340)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
        at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T05:55:51.143

如果 myList 的数据类型为**List**，则它是不可变的。您无法对其进行更改。所以你会得到 **操作不支持**的异常。在尝试进行更改之前将myList 数据类型更改为**ArrayList 。**

# linux - 如何使用克隆系统调用分配新的 TLS 区域

> ID：10060684
> 
> 赞同：4
> 
> 时间：2012-04-08T05:46:24.173
> 
> 标签：linux, pthreads, system-calls

**问题的简短版本：**`clone`如果我想为我正在创建的线程分配一个新的 TLS 区域，我需要将什么参数传递给 x86_64 Linux 系统上的系统调用。

**长版**：

我正在做一个研究项目，对于我正在试验的东西，我想使用`clone`系统调用而不是使用`pthread_create`. 但是，我也希望能够使用线程本地存储。我现在不打算创建很多线程，所以我可以为使用 clone 系统调用创建的每个线程创建一个新的 TLS 区域。

我正在查看手册页，`clone`其中包含有关 TLS 参数标志的以下信息：

```
CLONE_SETTLS (since Linux 2.5.32)
   The newtls argument is the new TLS (Thread Local Storage) descriptor.
   (See set_thread_area(2).) 
```

因此，我查看了手册页`set_thread_area`并注意到以下内容看起来很有希望：

```
 When  set_thread_area()  is  passed  an  entry_number  of -1, it uses a 
 free TLS entry. If set_thread_area() finds a free TLS entry, the value of
 u_info->entry_number is set upon return to show which entry was changed. 
```

但是，在对此进行试验后，似乎`set_thread_area`在我的系统中没有实现（在 x86_64 平台上的 Ubunut 10.04）。当我运行以下代码时，我收到一条错误消息：`set_thread_area() failed: Function not implemented`

```
#include <stdlib.h>
#include <stdio.h>
#include <unistd.h>
#include <errno.h> 
#include <sys/syscall.h>
#include <sys/types.h>
#include <linux/unistd.h>

 #include <asm/ldt.h>

int main()
{
  struct user_desc u_info;
  u_info.entry_number = -1; 
  int rc = syscall(SYS_set_thread_area,&u_info);
  if(rc < 0) {
    perror("set_thread_area() failed");
    exit(-1);
  }

  printf("entry_number is %d",u_info.entry_number);
} 
```

我还看到，当我使用 strace 时，看到`pthread_create`调用时会发生什么，但我没有看到对`set_thread_area`. 我也一直在查看 nptl pthread 源代码，试图了解它们在创建线程时做了什么。但我还没有完全理解它，我认为它比我想要做的更复杂，因为我不需要在 pthread 实现中那么健壮的东西。我假设`set_thread_area`系统调用是针对 x86 的，并且有不同的机制用于`x86_64`. 但目前我无法弄清楚它是什么，所以我希望这个问题能帮助我对我需要看的东西有所了解。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T06:32:52.590

> 我正在做一个研究项目，对于我正在试验的东西，我想使用 clone 系统调用而不是使用 pthread_create 创建线程

在*极*不可能的情况下，您的新线程*从不*调用任何 libc 函数（直接或通过调用其他调用 libc 的函数；这还包括通过 PLT 进行动态符号解析），然后您可以将所需的任何 TLS 存储作为 new_tls 传递参数为`clone`。

您应该忽略所有对`set_thread_area`-- 它们仅适用于 32 位/ix86 情况的引用。

如果您*打算*在新创建的线程中使用 libc，则应该*放弃*您的方法：`libc` *期望*TLS 以某种方式设置，而当您直接调用时，您*无法*安排此类设置`clone`。当发现您没有正确设置 TLS时，您的新线程会*间歇性地*崩溃。`libc`调试此类崩溃非常困难，唯一可靠的解决方案是......使用`pthread_create`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-20T22:30:20.433

另一个答案是绝对正确的，因为在 libc 控制之外设置线程肯定会在某个时候造成麻烦。你可以做到，但你不能再依赖 libc 的服务，绝对不能依赖任何`pthread_*`函数或线程局部变量（使用`__thread`or定义`thread_local`）。

话虽如此，即使在 x86-64 上，您也可以设置用于 TLS（GS 和 FS）的段寄存器之一。要查找的系统调用是`prctl(ARCH_SET_GS, ...)`.

[您可以在这段代码](https://github.com/darlinghq/darling/blob/master/src/kernel/emulation/linux/machdep/tls.c)中看到一个比较在 i386 和 x86-64 上设置 TLS 寄存器的示例。

# c# - 找不到 ContentTypeReader

> ID：10060696
> 
> 赞同：0
> 
> 时间：2012-04-08T05:49:09.623
> 
> 标签：c#, windows, xna

我在这个错误上找到了很多线程，但我还没有找到解决方案。我正在使用来自 XNAExpert.com 的许多类库，这些类库旨在为蒙皮网格设置动画。我正在为 Windows 使用 XNA 4.0、Win Xp 和编程游戏。这是完整的错误：

找不到 ContentTypeReader SkinnedModel.SkeletonReader、SkinnedModel、Version=1.0.0.0、Culture=neutral、PublicKeyToken=null。

该教程可以在[这里](http://www.xnaexpert.com/English/tutorials.html)找到。这是 SkinnedModel 项目中 reader 类的代码：

```
using System;
using System.Collections.Generic;
using System.Text;
using Microsoft.Xna.Framework;
using Microsoft.Xna.Framework.Content;

namespace SkinnedModel
{
    public class SkeletonReader : ContentTypeReader<Skeleton>
    {
        protected override Skeleton Read(ContentReader input, Skeleton existingInstance)
        {
            List<Bone> boneList = input.ReadObject<List<Bone>>();
            return new Skeleton(boneList);
        }
    }
} 
```

这是 SkinnedModelProcessor 项目中 writer 类的代码：

```
[ContentTypeWriter]
    public class SkeletonWriter : ContentTypeWriter<Skeleton>
    {
        protected override void Write(ContentWriter output, Skeleton value)
        {
            output.WriteObject(value.BoneList);
        }

        public override string GetRuntimeReader(TargetPlatform targetPlatform)
        {
            return typeof(SkeletonReader).AssemblyQualifiedName;
        }
    } 
```

如您所见，返回的类型是每个读者的程序集限定名称......有人知道我可能遇到麻烦的另一个原因吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T20:32:11.583

我的解决方案是删除 ContentTypeReader 并创建一个新的。

我的问题似乎是由镜像项目引起的（我有 Windows 游戏库和 Windows Phone 游戏库）。在 Windows 客户端上成功找到了 ContentReader，但在 Windows Phone 客户端上没有。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-22T14:10:16.963

当我读到它时，SkeletonWriter 知道 SkeletonReader。我想不出一种有效的方法来设置项目，以便这是真的。

*   项目主要（内容链接）
    *   骷髅阅读器
    *   骨骼

* * *

*   项目内容（指向 ContentExtendion 的链接）
    *   SkeletonFile（已将处理器设置为 SkeletonProcessor）

* * *

*   项目内容扩展*（无法链接循环）*
    *   SkeletonContent（是 Writer 的输入）
    *   骷髅作家
    *   骨架处理器

查看您的 ProjectSetup，我认为您的程序集未正确链接。并在 GetRuntimeReader 中返回一个固定字符串 - 如果您正确设置项目，您将失去与 SkeletonReader 的连接。

互联网上有一个[关于内容管道的非常完整的教程](http://rbwhitaker.wikidot.com/content-pipeline-extension-1)。

# java - 使用字符串作为实例对象名称

> ID：10060700
> 
> 赞同：0
> 
> 时间：2012-04-08T05:49:40.777
> 
> 标签：java

我有这个从其他类获取信息的代码，但我必须为每个实例对象添加另一行其他代码。

```
public static int giveShipData(String shipName,int Data){
    if(shipName.equals("Player")){i = Player.getData(Data);}
    return i;
} 
```

是否有可能有类似的东西：

```
public static int giveShipData(String shipName,int Data){
    i = shipName.getData(Data);
    return i;
} 
```

抱歉，如果我使用了错误的术语，我是自学成才的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T06:22:16.330

我认为你最好重新考虑你的设计。如果你有船名和船数据，我假设你必须有一个 Ship 类，它看起来像这样：

```
public class Ship {
    private String name;
    private int data;

    public Ship(String name, int data) {
        this.name = name;
        this.data = data;
    }

    public String getName() {
        return name;
    }

    public int getData() {
        return data;
    }
} 
```

除了这个类之外，应该还有一个类`Shipyard`：

```
 public class Shipyard {
    private Map<String, Ship> shipsByNameMap = new HashMap<String, Ship>();

    public void registerShipByName(String name, Ship ship){
        shipsByNameMap.put(name, ship);
    }

    public Ship getShipByName(String name){
        return shipsByNameMap.get(name);
    }
} 
```

因此，首先您调用 shipyard.getShip("Player") 方法来获取`ship`对象，然后您可以调用`ship.getData()`方法来检索船舶数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:55:01.703

你也许可以做这样的事情......

```
int[] ships = new int[3]; // 3 ships

public void populateShips(){
  for (int i=0;i<ships.length;i++){
    ships[i] = giveShipData(shipname,data);
    }
  }

public int giveShipData(String shipName,int data){
    return shipName.getData(data);
} 
```

这将允许您创建任意数量的船只，只需将`ships[]`数组的大小增加到您想要的任意数量的船只。

这就是你所追求的吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T05:59:52.830

根据您的代码，“shipName”是一个字符串......并且它没有 getData() 方法。以及为什么要将 Data 传递给 getData() ...您可以改为编写类似这样的内容-

```
 i = ClassObj.getData(shipname); 
```

并在 getData 方法中返回有关“船名”的信息。

# c# - 从 C# 执行 SQL 存储过程时遇到问题

> ID：10060701
> 
> 赞同：1
> 
> 时间：2012-04-08T05:50:04.450
> 
> 标签：c#, sql-server, stored-procedures

我在 SQL Server 中有一个现有的存储过程，我需要从我的 C# 代码中调用它并获取结果。这是这个 SP 的样子

```
CREATE PROCEDURE [dbo].[sp_MSnextID_DDB_NextID]
@tablesequence varchar(40)
AS
declare @next_id integer
begin transaction
update DDB_NextID
set DDB_SEQUENCE = DDB_SEQUENCE + 1
where DDB_TABLE = @tablesequence
select @next_id = DDB_SEQUENCE from DDB_NextID 
where DDB_TABLE = @tablesequence
commit transaction
RETURN @next_id 
```

这是我的 C# 代码

```
using (OdbcConnection connection = new OdbcConnection(GetConnectionString()))
{
   using (IDbCommand command = new OdbcCommand())
   {
      command.CommandText = "sp_MSnextID_DDB_NEXTID";
      command.CommandType = CommandType.StoredProcedure;
      IDbDataParameter parameter1 = command.CreateParameter();
      parameter1.DbType = DbType.String;
      parameter1.ParameterName = "@tablesequence";
      parameter1.Value = "ddb_dc_document";
      parameter1.Direction = ParameterDirection.Input;
      command.Parameters.Add(parameter1);

      IDbDataParameter parameter2 = command.CreateParameter();
      parameter2.DbType = DbType.Int32;
      parameter2.ParameterName = "@Return_Value";
      parameter2.Direction = ParameterDirection.ReturnValue;
      command.Parameters.Add(parameter2);
      command.Connection = connection;
      connection.Open();
      command.ExecuteNonQuery();
      IDbDataParameter o = (command.Parameters)["@Return_Value"] as IDbDataParameter;
      //Got return value from SP in o.Value
   }
} 
```

问题是我遇到了异常

> [42000] [Microsoft][SQL Native Client][SQL Server]过程或函数“sp_MSnextID_DDB_NextID”需要参数“@tablesequence”，但未提供该参数。

我无法解释或修复。我错过了什么？

为了找到解决方法，我尝试了不同的方法：执行以下查询，在临时表中设置数据

```
create table #temp  (i integer); insert into #temp exec sp_MSNextID_DDB_NEXTID @tablesequence='ddb_dc_document';select * from #temp; 
```

在这种情况下 SP 正确执行，但 select 返回零行！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T05:58:36.743

不幸的是，[您不能将命名参数与`OdbcCommand`](http://msdn.microsoft.com/en-us/library/system.data.odbc.odbccommand.parameters%28v=vs.90%29.aspx). [您将需要改为对存储过程执行调用语句。](http://msdn.microsoft.com/en-us/library/yy6y35y8%28v=vs.71%29.aspx)

```
using (OdbcConnection connection = new OdbcConnection(GetConnectionString()))
{
   using (IDbCommand command = new OdbcCommand())
   {
      command.CommandText = "{ ? = CALL sp_MSnextID_DDB_NEXTID(?) }";
      command.CommandType = CommandType.StoredProcedure;

      IDbDataParameter parameter2 = command.CreateParameter();
      parameter2.DbType = DbType.Int32;
      parameter2.ParameterName = "@Return_Value";
      parameter2.Direction = ParameterDirection.ReturnValue;
      command.Parameters.Add(parameter2);

      IDbDataParameter parameter1 = command.CreateParameter();
      parameter1.DbType = DbType.String;
      parameter1.ParameterName = "@tablesequence";
      parameter1.Value = "ddb_dc_document";
      parameter1.Direction = ParameterDirection.Input;
      command.Parameters.Add(parameter1);

      command.Connection = connection;
      connection.Open();
      command.ExecuteNonQuery();
      IDbDataParameter o = (command.Parameters)["@Return_Value"] as IDbDataParameter;
      //Got return value from SP in o.Value
   }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T05:57:37.353

为了使您的解决方法起作用，您应该更换

```
RETURN @next_id 
```

在您的程序中

```
SELECT @next_id 
```

# java - java中各种声明形式的区别

> ID：10060707
> 
> 赞同：0
> 
> 时间：2012-04-08T05:51:38.263
> 
> 标签：java, variable-declaration

我是Java的菜鸟，并且是在python之后学习Java的人。无论如何，我很难弄清楚这一点。假设我有课

```
class Bicycle{
      ....
 } 
```

和

```
 public class Bicycle{
    ....} 
```

有什么不同。还有呢

```
 public static class Bicycle{
              // if this can be a valid class def in first place
   } 
```

然后，在这之后..让我们谈谈变量。

```
 class Bicycle{
     int Gear or public int Gear // whats the difference
    } 
```

什么时候用哪一个？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T05:54:07.933

这些关键字（或缺少关键字）称为访问修饰符 - 简而言之，它们控制类或成员的可访问性。

类具有以下修饰符：

*   `public`- 可在任何地方访问
*   （无修饰符）- 只能在同一个包中访问

类成员有更多的可能性：

*   `public`- 可在任何地方访问
*   `protected`- 只能在同一个包*或*扩展类中访问
*   （无修饰符）- 只能在同一个包中访问
*   `private`- 只能在同一个类文件中访问^*

^(*请注意，[嵌套类](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)可以访问其外部类的`private`成员，反之亦然。)

可以在[此处找到有关访问修饰符的更多信息。](http://docs.oracle.com/javase/tutorial/java/javaOO/accesscontrol.html)另请参阅[这篇有用](http://javapapers.com/core-java/access-modifiers-in-java-explain/#&slider1=1)的文章了解基础知识。

* * *

**编辑：**我错过了你的中间例子，`public static class Bicycle`这里`static`必须意味着这`Bicycle`是一个嵌套类。有关嵌套类的说明，请参阅[此页面](http://docs.oracle.com/javase/tutorial/java/javaOO/nested.html)（我已经在下标中链接了该页面），嵌套类分为静态类和非静态（也称为内部）类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T06:25:52.790

修饰符是 Java 关键字，向编译器提供有关代码、数据和类的性质的信息。它分为两类。

1.  访问修饰符：public、protected、private。
2.  非访问修饰符（final、Abstract、Synchronized、Native、stricfp）。

如果您没有在类之前指定任何访问修饰符，它将把它作为“默认”访问说明符。

```
public class A     : //access specification would be public. This class can be access any where.

class A            : //access specification would be default. This class can be used only in the same package. So, default is called as package level specification 
```

我们不能将一个类声明为静态的

```
public static class A{
} 
```

但是我们可以将内部类声明为静态的

```
public class A
{    
     static class B{

     }    
} 
```

为了更清楚，请参阅 kathy sierra 的“SCJP”中的 Java 中的访问修饰符

# android - 如何在不创建对象的情况下最小化 Android 中的重复代码

> ID：10060709
> 
> 赞同：0
> 
> 时间：2012-04-08T05:52:14.130
> 
> 标签：android

我有多个活动，我想在这些活动中使用相同的代码。我在每个活动中都有相同的代码来完成它。怎样才能最大限度地减少这种冗余代码。为此，我不想创建对象并使用它的方法来消除冗余......

请帮助...谢谢你....

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T06:07:44.537

解决方案很简单：扩展类Activity，并为他添加你想要的所有方法。（例如，我通常将此类称为 BaseActivity ）
然后，当您开发新活动时 - 而不是扩展类 Activity - 扩展您创建的类 BaseActivity，其中包含您添加的方法..

```
public class BaseActivity extends Activity
{
protected int mSomeValue;

protected void someMethod1()
{

}

protected void someMethod2()
{

}

protected void someMethod3()
{

}

}

class SomeActivity extends BaseActivity
{
@Override
protected void onCreate(Bundle savedInstanceState)
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    someMethod1();
}
}

class SomeActivity2 extends BaseActivity
{
@Override
protected void onCreate(Bundle savedInstanceState)
{
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);
    someMethod1();
}
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-04-08T06:09:50.540

您可以创建一个“BaseActivity”并在该单个类中包含很多代码，然后简单地创建类并扩展该“BaseActivity”。

这是我认为您正在寻找的内容：

```
public class BaseActivity extends Activity {

public boolean onCreateOptionsMenu(Menu menu) {
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.menu, menu);
    return true;
}   

public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()){

    case R.id.donate:  
        //something
        break;

    case R.id.about_menuitem:  
        //something
        break;

    case R.id.exit:  
        finish();
        break;         

    default:
        return true;
    }
    return true;
}   
} 
```

我创建了一个名为“BaseActivity”的类，在这个类中我有我的 Android 选项菜单，我还扩展了“Activity”。由于我扩展了“活动”并在此类中有我的选项菜单，因此我现在可以对所有其他类使用相同的菜单代码。

我只是简单地创建我的新类并使用“BaseActivity”扩展它们：

```
public class SomeOtherActivity extends BaseActivity {
 //new code here
} 
```

现在名为“SomeOtherActivity”的类将继承我的菜单代码和“Activity”。

请尝试一下，让我知道这是否有帮助！

# google-chrome - 使用 Chrome 扩展程序在每个页面加载时创建警报

> ID：10060710
> 
> 赞同：0
> 
> 时间：2012-04-08T05:52:26.447
> 
> 标签：google-chrome, google-chrome-extension

这是我第一次搞乱扩展，我想做的很简单，但我似乎无法让它工作。

我只想在每次加载谷歌页面时调用一个警报。

在我的 manifest.json 我有：

```
{
"name": "Bypass shib",
"version": "1.0",
"content_scripts": [
  {
  "matches": ["http://www.google.com/*"],
  "js": ["secondScript.js"]
}
],
"manifest_version": 2
} 
```

好的，现在在我的 secondScript.js 中我有：

```
chrome.tabs.executeScript(null, {code: "alert('test')"}); 
```

这不应该在加载页面时执行警报吗？如果没有，有人可以解释为什么不是吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T07:55:32.050

控制台显示以下消息：

> ```
> Uncaught Error: "executeScript" can only be used in extension processes.
> See the content scripts documentation for more details. 
> ```

[这篇文章](https://stackoverflow.com/questions/8223233/chrome-webrequest-apis-example-error-onbeforerequest-can-only-be-used-in-exte)建议“Chrome 扩展功能不能在内容脚本中使用”，这可能是您遇到的问题。

为了完整`secondScript.js`起见，对我有用的方法如下：

```
console.log("test");
//chrome.tabs.executeScript(null, {code: "alert('test')"});
alert("test"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T10:07:36.833

[内容脚本](http://code.google.com/chrome/extensions/content_scripts.html)无权访问**任何****API**`chrome.tabs.*`方法。

要在每个页面上显示警报，请删除该[`chrome.tabs.executeScript`](http://code.google.com/chrome/extensions/tabs.html#method-executeScript)方法，并让您`secondScript.js`只包含：

```
alert('Test'); 
```

在 Chrome 扩展程序中，JavaScript 可以在**三种**不同的范围内运行。理解这种分离对于编写 Chrome 扩展是必不可少的，请参阅[这个答案](https://stackoverflow.com/a/9916089/938089?chrome-extension-auto-run-a-function)。

# cloud-foundry - 在微云代工厂上部署应用程序的必要步骤是什么？

> ID：10060719
> 
> 赞同：2
> 
> 时间：2012-04-08T05:54:21.133
> 
> 标签：cloud-foundry

我想正确配置 cloudfoundry 环境并测试一些小应用程序。如果有人知道，请帮助我正确配置此环境，并让我知道任何使用完整的参考文档可用，非常感谢。

我已经在 cloudfoundry 注册并下载了以下内容：1）micro-1.2.0.zip 2）VMware-Player-4.0.2-591240.x86_64.bundle 3）springsource-tool-suite-2.9.1.RELEASE-e3 .7.2-linux-gtk-x86_64.tar.gz

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-17T17:49:31.860

你有你需要的一切。简而言之，您将需要：

*   安装 Ruby，然后为 CF 安装 VMC 或 STS 插件
*   安装 VMWare 播放器并在其中运行微实例。基本上，您将通过 VMWare 播放器在 micro 中打开 *.vmx 文件。您的机器必须为此支持并启用虚拟化
*   进行必要的配置并使用创建帐户和域时在线收到的令牌验证您的 CF
*   打开 vmc 并将目标更改为指向本地 CF 使用命令“vmc target CFM_ADDRESS”
*   部署和测试您的应用程序

如果对您有帮助，您可以按照本教程进行操作：http: [//cloudspring.com/get-in-the-cloud-with-cloudfoundry/](http://cloudspring.com/get-in-the-cloud-with-cloudfoundry/)

# linux - vala 是跨平台语言吗？

> ID：10060720
> 
> 赞同：18
> 
> 时间：2012-04-08T05:54:41.580
> 
> 标签：linux, windows, cross-platform, vala

Vala 是一种与 C# 相同语法的编程语言，valac 将 vala 程序编译为 C 源代码，是否可以在 windows 操作系统上运行我的 vala 程序？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-08T08:25:56.083

您可以通过两种方式轻松地将 Vala 应用程序移植到 Windows 上：

1.  在 Windows 上使用 mingw 编译器在 Windows 上运行 valac
2.  在 Linux 上使用 mingw 为 Windows 交叉编译生成的 C 源代码

两者都工作得很好，但我建议做第二个，因为 Linux 上的 Vala 比 Windows 上的更新。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-08T06:01:00.007

如果您的意思是“它可以在 Windows 上编译吗？”，请参阅此处右侧信息框中的“操作系统”部分：[http://en.wikipedia.org/wiki/Vala_(programming_language)](http://en.wikipedia.org/wiki/Vala_%28programming_language%29)，以下是说明：[http ://live.gnome.org/Vala/ValaOnWindows](http://live.gnome.org/Vala/ValaOnWindows)

# php - PDO MySQL：在一个查询中插入多行

> ID：10060721
> 
> 赞同：16
> 
> 时间：2012-04-08T05:54:43.237
> 
> 标签：php, mysql, pdo

您好，我正在创建一个用于在 pdo 中进行多次插入的类。

是这样的

```
INSERT INTO $table (key1,key2,key3,etc) VALUE (value1,value2,value3,etc), (value1,value2,value3,etc), (value1,value2,value3,etc) 
```

搜索后我发现我必须构建类似的东西

```
INSERT INTO $table (key1,key2,key3,etc) VALUE (:key1,:key2,:key3,etc), (:key1,:key2,:key3,etc), (:key1,:key2,:key3,etc) 
```

然后执行这个`$this->execute($data);` where `$data`is

```
 0 => 
    array
      'key1' => 'value1'
      'key2' => 'value2'
      'key3' => 'value3'
 1 => 
    array
      'key1' => 'value1'
      'key2' => 'value2'
      'key3' => 'value3'

 etc 
```

**问题是我仍然收到`Array to string conversion`关于`$insert->execute($data);`如何解决此问题的错误？**

这是我正在制作的片段。

```
public function multipleInsert($table, $data = array()) 
{

    # INSERT (name) VALUE (value),(value)
    if (count($data) > 1) 
    {
        $fieldnames = array_keys($data[0]);
        $count_inserts = count(array_values($data));
        $count_values = count(array_values($data[0]));

        # array(????) untill x from first data
        for($i = 0; $i < $count_values; $i++)
        {
            $placeholder[] = '?';
        }

        # array((????),(????),(????)) for query
        for ($i=0; $i < $count_inserts; $i++) 
        { 
            $placeholders[] = '('. implode(',',$placeholder) . ')';
        }

        $query  = 'INSERT INTO '. $table;
        $query .= '(`'. implode('`, `', $fieldnames) .'`)';
        $query .= ' VALUES '. implode(', ', $placeholders);

        $insert = $this->start->prepare($query);

        $i = 1;
        foreach($data as $item) 
        {
            foreach ($item as $key => $value) 
            {
               $insert->bindParam($i++, $item[$key]);
            }
        }

        echo $query;
        $insert->execute();

        $return['status'] = true;
        $return['lastid'] = $this->start->lastInsertId();

        return $return;
    } 
    else 
    {
        die('$data is less then two array, use single insert instead.');
    }
} 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-04-08T06:00:47.027

避免并发症的一种简单方法是这样的

```
$stmt = $pdo->prepare('INSERT INTO foo VALUES(:a, :b, :c)');
foreach($data as $item)
{
    $stmt->bindValue(':a', $item[0]);
    $stmt->bindValue(':b', $item[1]);
    $stmt->bindValue(':c', $item[2]);
    $stmt->execute();
} 
```

但是，这会多次执行该语句。因此，如果我们创建一个长的单个查询来执行此操作会更好。

这是我们如何做到这一点的示例。

```
$query = "INSERT INTO foo (key1, key2) VALUES "; //Prequery
$qPart = array_fill(0, count($data), "(?, ?)");
$query .=  implode(",",$qPart);
$stmt = $dbh -> prepare($query); 
$i = 1;
foreach($data as $item) { //bind the values one by one
   $stmt->bindValue($i++, $item['key1']);
   $stmt->bindValue($i++, $item['key2']);
}
$stmt -> execute(); //execute 
```

# java - Java ArrayList 的等价物是什么 在戈朗？

> ID：10060728
> 
> 赞同：24
> 
> 时间：2012-04-08T05:55:34.173
> 
> 标签：java, arraylist, go

在我的特定用例中，我想知道如何在 Go 中实现以下 Java 代码 -

```
class Channel {
    public String name;
    public Channel(){}
}

ArrayList<Channel> channels = new ArrayList<Channel>(); 
```

我已经开始了，我认为这将是 Go 中 Channel 的合适结构 -

```
struct Channel {
    name string
} 
```

我只需要知道 ArrayList 在 Go 中是如何工作的

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-04-08T06:29:04.253

使用切片：

```
var channels []Channel  // an empty list
channels = append(channels, Channel{name:"some channel name"}) 
```

此外，您的 Channel 声明稍有偏差，您需要 'type' 关键字：

```
type Channel struct {
    name string
} 
```

这是一个完整的例子：[http ://play.golang.org/p/HnQ30wOftb](http://play.golang.org/p/HnQ30wOftb)

有关详细信息，请参阅[切片文章](http://golang.org/doc/articles/slices_usage_and_internals.html)。

还有 go tour (tour.golang.org) 和语言规范 (golang.org/ref/spec，参见 #Slice_types、#Slices 和 #Appending_and_copying_slices)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-10T01:16:04.487

使用切片。

有关常见切片习语的详细信息，请参阅[“切片技巧”wiki 页面](http://code.google.com/p/go-wiki/wiki/SliceTricks)。

# facebook-graph-api - 来自 devise+omniauth-facebook 身份验证的访问令牌，用于在 fb-graph 中使用

> ID：10060738
> 
> 赞同：7
> 
> 时间：2012-04-08T05:57:49.743
> 
> 标签：facebook-graph-api, ruby-on-rails-3.1, devise, omniauth, fb-graph

我在 Rails 3 应用程序中使用 devise 和 omniauth-facebook 进行 Facebook 身份验证，基于本教程：[将 Facebook auth 添加到 Rails 3.1 应用程序](http://www.ruby-on-rails-outsourcing.com/articles/2012/01/20/adding-facebook-auth-to-rails-3-1-app/)，效果很好！

但现在我想在我的应用程序中完全集成 Facebook，通过它我可以访问用户的照片、朋友等，为此我正在考虑使用 fb_graph。fb_graph 需要一个令牌，我想知道如何编辑我的用户模型以保存令牌并在 fb_graph 中使用它。任何有关此事的帮助将不胜感激。

这就是我的用户模型现在的样子：

```
class User < ActiveRecord::Base

# Include default devise modules. Others available are:
# :token_authenticatable, :encryptable, :confirmable, :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable,
     :recoverable, :rememberable, :trackable, :validatable, :omniauthable

# Setup accessible (or protected) attributes for your model
  attr_accessible :email, :password, :password_confirmation, :remember_me

  has_many :photos
  has_many :scrapbooks

  def self.find_for_facebook_oauth(access_token, signed_in_resource=nil)
    data = access_token.extra.raw_info
    if user = User.where(:email => data.email).first
      user
    else # Create a user with a stub password.
      User.create!(:email => data.email, :password => Devise.friendly_token[0,20])
    end  
  end

  def self.new_with_session(params, session)
    super.tap do |user|
      if data = session["devise.facebook_data"] && session["devise.facebook_data"]["extra"]["raw_info"]
        user.email = data["email"]
      end
    end
  end
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-11T10:01:06.920

你可以这样做：

```
User.create!(:email => data.email, :password => Devise.friendly_token[0,20], :authentication_token => access_token.credentials.token) 
```

您还需要将 :authentication_token 或您命名的任何内容添加到 attr_accessible

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-22T00:37:19.420

我一直在寻找同样的东西。我试图实施[James Robey](https://stackoverflow.com/users/994764/james-robey) {s 的回答，但也遇到了同样的错误：`OAuthException :: An active access token must be used to query information about the current user`。然后我意识到 authentication_token 没有以这种方式保存。看了一段时间后，我在[FbGraph + OmniAuth + Facebook Graph API on Rails 应用程序](http://www.catespotr.com/2012/02/fbgraph-omniauth-facebook-graph-api-on.html)中发现了一种使用会话变量的方法，通过在omniauth 回调期间实现令牌保存，然后在调用 fb_graph 时使用它。所以它可能是这样的：

omn​​iauth 回调（app/controllers/users/omniauth_callbacks_controller.rb）

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def facebook
    @user = User.find_for_facebook_oauth(request.env["omniauth.auth"], current_user)

    if @user.persisted?
      flash[:notice] = I18n.t "devise.omniauth_callbacks.success", :kind => "Facebook"
# this part is where token is stored
        auth = request.env['omniauth.auth']
        token = auth['credentials']['token']
        session[:fb_access_token] = token
#
      sign_in_and_redirect @user, :event => :authentication
    else
      session["devise.facebook_data"] = request.env["omniauth.auth"]
      redirect_to new_user_registration_url
    end
  end
end 
```

然后在调用 fb_graph 时

```
@fb_user = FbGraph::User.new('me', access_token: session[:fb_access_token]).fetch 
```

我不知道这是否是最好的方法，但到目前为止有效。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-09T08:54:53.357

我建议您参考[https://github.com/nov/fb_graph/wiki/Page-Management](https://github.com/nov/fb_graph/wiki/Page-Management)

其中 nov 声明：您需要页面的访问令牌来管理您的页面。您（用户的）访问令牌在这里不起作用。

按照他的链接到 facebook 开发者网站了解更多信息

您将需要用户 access_token，我通过omniauth-facbook [https://github.com/mkdynamic/omniauth-facebook执行此操作](https://github.com/mkdynamic/omniauth-facebook)

您可以通过首先将此初始化程序输入到您的应用程序来检索使用情况

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, ENV['FACEBOOK_KEY'], ENV['FACEBOOK_SECRET'],
           :scope => 'email,user_birthday,read_stream', :display => 'popup'
end 
```

（请注意，您可以在此处更改范围的权限，检查 facebook 开发人员登录权限以获取更多信息

omn​​iauth 和 omniauth-facebook 有一些内部工作原理，但要点是当您从 facebook 收到回调时，您会从请求中获得机架 omniauth 哈希

```
omniauth = request.env["omniauth.auth"] 
```

从那里你可以像这样访问用户访问令牌

```
facebook_user_token = omniauth['credentials']['token'] 
```

然后，您可以将该令牌输入您的 fb_graph 页面调用

```
page = FbGraph::Page.new('FbGraph').fetch(
  :access_token => facebook_user_token,
  :fields => :access_token
) 
```

那么您只需调用所需的方法即可创建便笺，而无需引用访问令牌

```
note = page.note!(:subject => @title, :message => @message, :link => @url) 
```

# c++ - 制作文件链接问题架构x86_64的未定义符号

> ID：10060748
> 
> 赞同：1
> 
> 时间：2012-04-08T05:58:52.297
> 
> 标签：c++, linker, makefile, undefined-symbol

我正在使用我的 make 文件和 c++ 将一些文件链接在一起，并且在运行 make 时出现以下错误。

```
g++ -bind_at_load `pkg-config --cflags opencv`   -c -o compute_gist.o compute_gist.cpp
g++ -bind_at_load `pkg-config --cflags opencv`   -c -o gist.o gist.cpp
g++ -bind_at_load `pkg-config --cflags opencv`   -c -o standalone_image.o standalone_image.cpp
g++ -bind_at_load `pkg-config --cflags opencv`   -c -o IplImageConverter.o IplImageConverter.cpp
g++ -bind_at_load `pkg-config --cflags opencv`   -c -o GistCalculator.o GistCalculator.cpp
g++ -bind_at_load `pkg-config --cflags opencv` `pkg-config --libs opencv` compute_gist.o gist.o standalone_image.o IplImageConverter.o GistCalculator.o -o rungist
Undefined symbols for architecture x86_64:
    "color_gist_scaletab(color_image_t*, int, int, int const*)", referenced from:
    _main in compute_gist.o
ld: symbol(s) not found for architecture x86_64
collect2: ld returned 1 exit status
make: *** [rungist] Error 1 
```

我的makefile如下（注意，我还不需要opencv绑定，但稍后会在opencv中编码。

```
CXX = g++
CXXFLAGS = -bind_at_load `pkg-config --cflags opencv`
LFLAGS = `pkg-config --libs opencv`

SRC = \
compute_gist.cpp \
gist.cpp \
standalone_image.cpp \
IplImageConverter.cpp \
GistCalculator.cpp

OBJS = $(SRC:.cpp=.o)

rungist: $(OBJS)
$(CXX) $(CXXFLAGS) $(LFLAGS) $(OBJS) -o $@
all: rungist

clean:
rm -rf $(OBJS) rungist 
```

方法头位于 gist.h

```
float *color_gist_scaletab(color_image_t *src, int nblocks, int n_scale, const int *n_orientations); 
```

并且方法在 gist.cpp 中定义

```
float *color_gist_scaletab(color_image_t *src, int w, int n_scale, const int *n_orientation) { 
```

最后是 compute_gist.cpp（主文件）

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "gist.h"

static color_image_t *load_ppm(const char *fname) {
  FILE *f=fopen(fname,"r");
  if(!f) {
    perror("could not open infile");
    exit(1);
  }
  int width,height,maxval;
  if(fscanf(f,"P6 %d %d %d",&width,&height,&maxval)!=3 || maxval!=255) {
  fprintf(stderr,"Error: input not a raw PPM with maxval 255\n");
  exit(1);    
  }
  fgetc(f); /* eat the newline */
  color_image_t *im=color_image_new(width,height);

  int i;
  for(i=0;i<width*height;i++) {
    im->c1[i]=fgetc(f);
    im->c2[i]=fgetc(f);
    im->c3[i]=fgetc(f);    
  }

  fclose(f);
  return im;
}

static void usage(void) {
  fprintf(stderr,"compute_gist options... [infilename]\n"
      "infile is a PPM raw file\n"
      "options:\n"
      "[-nblocks nb] use a grid of nb*nb cells (default 4)\n"
      "[-orientationsPerScale o_1,..,o_n] use n scales and compute o_i orientations for scale i\n"
      );

  exit(1);
}

int main(int argc,char **args) {

const char *infilename="/dev/stdin";
int nblocks=4;
int n_scale=3;
int orientations_per_scale[50]={8,8,4};

while(*++args) {
  const char *a=*args;

  if(!strcmp(a,"-h")) usage();
  else if(!strcmp(a,"-nblocks")) {
    if(!sscanf(*++args,"%d",&nblocks)) {
      fprintf(stderr,"could not parse %s argument",a); 
      usage();
    }
  } else if(!strcmp(a,"-orientationsPerScale")) {
    char *c;
    n_scale=0;
    for(c=strtok(*++args,",");c;c=strtok(NULL,",")) {
      if(!sscanf(c,"%d",&orientations_per_scale[n_scale++])) {
        fprintf(stderr,"could not parse %s argument",a); 
        usage();         
      }
    }
  } else {
    infilename=a;
  }
}

color_image_t *im=load_ppm(infilename);

//Here's the method call -> :(
float *desc=color_gist_scaletab(im,nblocks,n_scale,orientations_per_scale);

int i;

int descsize=0;
//compute descriptor size
for(i=0;i<n_scale;i++) 
  descsize+=nblocks*nblocks*orientations_per_scale[i];

  descsize*=3; // color

  //print descriptor
  for(i=0;i<descsize;i++) 
    printf("%.4f ",desc[i]);

    printf("\n");

    free(desc);

    color_image_delete(im);

    return 0; 
} 
```

任何帮助将不胜感激。我希望这是足够的信息。让我知道是否需要添加更多。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T11:58:02.433

我怀疑`color_gist_scaletab`应该`extern "C"`在你的头文件中声明：

```
extern "C" {
  float *color_gist_scaletab(color_image_t *src, int nblocks, int n_scale, const int *n_orientations);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T14:31:48.517

您的链接命令行不正确。看到[这个答案](https://stackoverflow.com/a/7816668/50617)。

但是，这可能不是您在这里看到的问题。

以下命令打印什么？

```
file gist.o
nm gist.o | grep color_gist_scaletab 
```

我也看到[了这个](https://stackoverflow.com/questions/10051221/lear-gist-descriptor-c-code-used-with-c)非常相似的问题。但那里，`color_gist_scaletab`来自`gist.c`，不是`gist.cpp`。你不只是重命名`gist.c`为`gist.cpp`，是吗？不要那样*做*。

# windows - 在窗口中拦截鼠标事件

> ID：10060753
> 
> 赞同：-1
> 
> 时间：2012-04-08T06:00:39.097
> 
> 标签：windows, mouse, routines

好吧，标题似乎很清楚我想要做什么。更准确地说：我想创建一个以两种方式操作鼠标的程序（首选 c++ 或 java），例如：更改其位置和进行点击。我正在考虑使用 allegro（它有鼠标例程来操作上面提到的东西）或 sdl（我不知道是否有那种例程）。我尝试使用 allegro 失败。我的问题是我几乎不能“做”点击。我也无法将程序更改的内容重定向到其他窗口。

有小费吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-09T10:03:55.223

有几种方法可以尝试在 Windows 上自动化其他应用程序...

在最简单的级别上，可以使用`PostMessage`将键盘和鼠标消息发布到另一个应用程序的窗口。这样做的好处是，即使其他应用程序被最小化，它*也可以工作。*不幸的是，这种方法跳过了大部分输入处理逻辑，因此无论您发送多少消息，直接访问键状态的应用程序`GetAsyncKeyState`都不会看到（例如）控制键处于“关闭”状态。`WM_KEYDOWN, vk=VK_CONTROL`

正如 Hans Passant 评论的那样，`SendImput`将输入事件放在较低级别的输入事件队列中，因此可以完全模拟修饰键。然而，这些输入事件不会发布到窗口，因此要成功传递输入事件，需要遵循正常的窗口激活和焦点规则。也就是说，这是大多数测试自动化软件使用的方法（这也是为什么大多数测试自动化软件要求被测试的应用程序是活动应用程序的原因）。

我将提到的最后一种自动化方法——遗憾的是最不可能工作的方法——是`Microsoft UI Automation`框架。该框架旨在允许残疾和/或特殊需要用户使用应用程序。可悲的是 - 很少有软件提供商会费心在他们的产品中实现这个 API。

# google-app-engine - 如何在命令行工具中使用 OAuth2 来访问托管在 Google Appengine 上的应用程序？

> ID：10060758
> 
> 赞同：6
> 
> 时间：2012-04-08T06:01:01.970
> 
> 标签：google-app-engine, oauth-2.0

我有一个托管在 google app-engine (http://spittan.appspot.com) 上的应用程序。我还有一个命令行工具可以通过 ClientLogin 访问该应用程序。代码片段如下：

```
138   # get an AuthToken from Google accounts
139   auth_uri = 'https://www.google.com/accounts/ClientLogin'
140   authreq_data = urllib.parse.urlencode({ "Email":   email_address,
141                                     "Passwd":  password,
142                                     "service": "ah",
143                                     "source":  appname,
144                                     "accountType": "HOSTED_OR_GOOGLE" })
145   request = urllib.request.Request(auth_uri, data=authreq_data)
146   response = opener.open(request)
147   response_body = str(response.read(), 'utf-8')
148   response_dict = dict(x.split("=") for x in response_body.split("\n") if x)
149   return response_dict["Auth"]

...
...

112   # Send the auth token to the AppEngine to login
113   continue_location = "http://localhost/"
114   args = {"continue": continue_location, "auth": auth_token}
115   host = "spititan.appspot.com" % appname 
116   url = "https://spititan/_ah/login?%s" % urllib.parse.urlencode(args)
...
... 
```

这个工具对我来说很好用了很长一段时间，但我需要每隔几天提供一次密码。我注意到 OAuth2 是当前推荐的身份验证方式，因此我设法学习使用它并按照文档（http://code.google.com/p/google-api-python-client）编写以下代码片段/wiki/OAuth2):

```
 59   storage = oauth2client.file.Storage(
 60       os.path.join(FLAGS.data_dir, 'confidential.dat'))
 61 
 62   credentials = storage.get()
 63 
 64   if credentials is None or credentials.invalid == True:
 65     flow = oauth2client.client.OAuth2WebServerFlow(
 66         client_id='<xxxxx>',
 67         client_secret='<xxxxx>',
 68         scope='<xxxxx>',
 69         user_agent='<xxxx>')
 70 
 71     credentials = oauth2client.tools.run(flow, storage)
 72 
 73   http = httplib2.Http(cache=".cache")
 74   http = credentials.authorize(http) 
```

我的理解是'client_id'和'client_secret'是在我注册应用程序时获取的，user_agent是一个自由格式的字符串，问题是：我应该在'范围'中放什么？我试过[http://spittan.appspot.com/spittan](http://spititan.appspot.com/spititan)但没有运气，有人知道吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T13:41:08.427

试试`scope='https://www.googleapis.com/auth/appengine.admin'`。我曾经也在寻找 appengine 范围，并在这里找到了它：

[http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/appcfg.py#143](http://code.google.com/p/googleappengine/source/browse/trunk/python/google/appengine/tools/appcfg.py#143)

如果您尝试以管理员身份登录以外的其他操作，这将不起作用。AFAIK GAE 支持 ClientLogin、OAuth 1.0 和 OpenID ATM。所以，没有 OAuth 2.0。我想知道他们什么时候会。

# python - Python 尊重符号链接吗？

> ID：10060759
> 
> 赞同：3
> 
> 时间：2012-04-08T06:01:16.853
> 
> 标签：python, symlink, moinmoin, openshift

我很难找到任何描述 Python 预期符号链接行为的文档。

我自己尝试过测试，但我得到了奇怪的结果——有时它似乎工作了一段时间然后停止工作。

无论如何，我有一种情况，MoinMoin 将它的数据文件和插件模块保存在同一个目录中，但我需要将数据文件保存在我的 git 存储库之外（我使用的是 Openshift PaaS）以便它持续存在。所以我想创建这个符号链接：

~/data/plugins/theme/ -> ~/repo/plugins/theme/

我应该期望这行得通吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T06:09:10.423

应该可以正常工作 - 符号链接是在操作系统级别处理的，这意味着只要 python 不试图确定某个东西是否是符号链接，调用`open`它应该只打开它指向的文件。

有什么特别不起作用的吗？当它停止工作时你看到了什么？

# c++ - 设置一个for循环循环直到检测到空字节

> ID：10060760
> 
> 赞同：1
> 
> 时间：2012-04-08T06:01:34.087
> 
> 标签：c++

我对 C++ 中的字符串有疑问。根据下面的代码，我想知道循环将在哪里停止。它会在索引 3 或索引 4 中取 null 吗？

```
#include <cstdio>

int main ( ) {

  char name [20] = "Foo";

  name [4] = '\0';

  for (int i = 0; name[i] != '\0'; i++) {

       printf("This is the value of i so far in the loop : %d \n",i);
  }

  printf("This is the value of i : %d \n",i);

 return 0;

} 
```

我问这个的原因是，我不明白为什么在我的作业中他们给了我们这样的东西。是否有任何理由在索引 4 中添加“\0”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T06:34:40.530

“Foo”实际上是 {'F','o','o','\0'}，适合索引 0,1,2,3。索引 4 到 19 是默认初始化的（因此为 0-ed）。并且索引 4 稍后分配有 '\0'。

当第一个 '\0' 匹配时循环结束，因此打印值 0,1,2。在循环之外保持`i`...咳咳..未定义！（它在循环范围内声明），但如果你的编译器没有清理你很可能会打印 3。

一个典型的 C++ 示例（注意`#include<cstdio>`，但从未引用过 std...），由一位 C 语言教师教授。向他表示祝贺！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T06:37:41.110

> 是否有任何理由在索引 4 中添加“\0”？

绝对没有。

这一行：

```
char name [20] = "Foo"; 
```

初始化数组如下：

```
name[0] <-- 'F'    First char of "Foo"
name[1] <-- 'o'    Second char of "Foo"
name[2] <-- 'o'    Third char of "Foo"
name[3] <-- '\0'   Fourth char of "Foo"
name[4..19] <-- 0  Extra spaces in array get zero-filled 
```

所以，这一行：

```
 name [4] = '\0'; 
```

将零写入*已经保证*为零的位置。

因此，索引 3 处有一个零（它是“Foo”中的最后一个字符）。在所有位置 4-19 中都有一个零（因为初始化器小于数组）。而且，冗余地，有一个零写入索引 4。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-08T06:06:02.260

我认为应该是3：

```
name[0]='F' name[1]='o' name[2]='o' name[3]='\0' name[4]='\0' 
```

# css - 图像在最小化的 Firefox 窗口中没有正确调整大小

> ID：10060762
> 
> 赞同：1
> 
> 时间：2012-04-08T06:02:44.593
> 
> 标签：css, image, firefox, resize

我在一个网站上工作。有问题的问题页面在这里：

[http://bit.ly/I4YR2T](http://bit.ly/I4YR2T)

目前我有一张桌子上的图像。我也在为这些图像使用 Shadowbox。

当我在 Chrome 和 Safari 中最小化浏览器窗口时，图像可以很好地缩小。

但是，当我在 Firefox 中最小化窗口时，图像并没有很好地缩小。

这个页面有最多的图像，也是最令人不安的，尽管我注意到整个站点在 Firefox 中的缩小不如在 Chrome 和 Safari 中那样好。我还没有检查IE。

我知道这一定是由于我的一些劣质 CSS 造成的。

谁能指导我如何解决这个问题？

太感谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:42:53.500

看到[这个答案](http://www.google.com.au/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CCsQFjAA&url=https://stackoverflow.com/questions/2923710/why-do-firefox-and-opera-ignore-max-width-inside-of-display-table-cell&ei=wkCBT6XzAeSUiAed4M2nBA&usg=AFQjCNHHC_gyN1mRmjKDeT2Cozx1surFGw&sig2=IZhsueSQhNNzC-AZ7nhMHA)“最大宽度不适用于内联元素，所以你会得到不一致的行为跨浏览器......如果你设置 div img { display:block } 然后将 img... 标记与浮动对齐，你可以实现它标准内联。” 这可能意味着摆脱您的表格或将表格单元格设置为显示为块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-06T02:15:11.597

火狐也有同样的问题。我让它在 Chrome 中工作，但 Firefox 不会显示代码。所以这就是我所做的：

```
/* begin HeaderObject */
.banner-img {
  display: block; 
  margin: 0 auto; 
  max-width: 99%;
  left: 50%; 
}
/* end HeaderObject */ 
```

我将其更改`max-width`为 99%，它正确显示并正确调整大小。header 对象被放置在 CSS 的 header 内，所以我偶然测试了是否可以让它以更小的宽度工作，因为它“嵌套”在 header 内。然后我添加了`left: 50%;`代码，因为我希望我的图像居中显示。现在工作得很好。

# python - 创建没有 MSVCP90.dll 的 Python EXE

> ID：10060765
> 
> 赞同：8
> 
> 时间：2012-04-08T06:03:07.073
> 
> 标签：python, py2exe

我正在尝试使用 Py2Exe 将 python 程序（使用 wxPython）带到 Windows exe，但有一个关于 MSVCP90.dll 的错误。在读取[py2exe 无法](https://stackoverflow.com/questions/323424/py2exe-fails-to-generate-an-executable)在 StackOverflow 上生成可执行文件后，它说我需要下载此文件。但是，它还说所有目标用户都必须下载此文件。这对我的用户（主要是不知道如何下载文件的企业客户）来说将是一个巨大的不便，那么有没有办法将其与程序打包？

谢谢！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-08T06:24:23.533

## 什么是 MSVCP90.dll

MSVCP90.dll 是多线程、动态的 Visual Studio 2008 C 运行时库。通常你的应用程序应该打包 MSVCP90.dll，除非你确定目标机器有匹配的 CRT。您可以使用任何打包软件来打包必要的 DLL 和您的软件并分发它。

## MSVCP90.dll 的用途

您可能想知道为什么需要这个奇怪的 dll？好吧，CRT 对 python 来说并不是什么新鲜事。所有基于 C 的应用程序都严重依赖于 C 库函数。标准 C 库函数的所有实现，例如（malloc、strcpy ..）等等，都是在这些库中实现的。有不同的种类，具体的[MSDN 网站上](http://msdn.microsoft.com/en-us/library/abx4dbyh%28VS.100%29.aspx)有更多详细信息。 ![在此处输入图像描述](../Images/aace4351bb6b82bd03340e755cf49425.png)

## 分发 MSVCP90.dll

在分发 CRT 时，您应该了解，根据您使用的 CRT，带有 CRT 名称后缀的版本号会有所不同。例如 MSVCP90.DLL 是 Visual Studio 2008 中的 CRT。一台机器可以包含多个 CRT，或者在应用程序安装路径的系统文件夹中。

如果您计划打包您的应用程序，则需要重新验证您的应用程序使用哪个 CRT 版本。包装错误的 CRT 或使用一个可能会导致不希望的和不确定的效果。一般来说，您的 Python 安装使用的 CRT 应该与您应该打包的 CRT 相同。

## 确定正确的 MSVCRT

由于不同版本的 CRT 版本不同，因此很难确定应该打包哪个 CRT。如果您有一个正在运行的应用程序（可执行文件），您可以使用[dependencywalker](http://www.dependencywalker.com/)来确定正确的版本。右键单击任何 DLL，然后单击属性，它将显示从中选择该 DLL 的位置。 ![在此处输入图像描述](../Images/d3600b9a6a2c1a8bb8b05bb5e356ebdf.png)

## 打包您的应用程序。

您可以尝试使用[PyInstaller](http://www.pyinstaller.org/)来打包您的应用程序。这将是一种将 DLL 导入目标机器的便捷方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:16:03.677

您必须在与您的 exe 文件相同的文件夹中使用该 dll 交付您的应用程序。

# ruby-on-rails - HTTP_IF_MODIFIED_SINCE 标头未传递给 Rails 应用程序（Nginx，Passenger）

> ID：10060767
> 
> 赞同：1
> 
> 时间：2012-04-08T06:03:50.157
> 
> 标签：ruby-on-rails, nginx, http-headers, passenger

我正在尝试在我的应用程序中使用 HTTP_IF_MODIFIED_SINCE 标头来确定资源是否过时/新鲜并在这些情况下呈现 200/304。在我的开发环境中，一切正常，但我一生都无法让它在生产中工作。

我正在使用乘客 3.0.11 和 Nginx 1.0.13。

正如你在下面看到的，我尝试了proxy_pass_header、proxy_set_header、passenger_pass_header 和passenger_set_cgi_param。最后一个实际上设置了 HTTP_IF_MODIFIED_SINCE 标头，但它是空的...任何帮助/想法将不胜感激！

我的配置：

```
server {
  listen             80 default_server;
  root               /home/rails/myapp/current/public;
  passenger_enabled  on;
  charset            utf-8;

  proxy_pass_header If-Modified-Since;
  proxy_set_header If-Modified-Since $http_if_modified_since;
  passenger_pass_header If-Modified-Since;
  passenger_set_cgi_param HTTP_IF_MODIFIED_SINCE $http_if_modified_since;

  if (-f $document_root/system/maintenance.html) {
    rewrite ^(.*)$ /system/maintenance.html break;
  }

  location ~ \.(aspx|jsp|cgi)$ {
    return 410;
  }

  location ~ ^/(assets)/ {
    # http://guides.rubyonrails.org/asset_pipeline.html#server-configuration
    # gzip_static on;
    expires     1y;
    add_header  Cache-Control public;

    add_header Last-Modified "";
    add_header ETag "";
    break;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T04:05:17.520

要使其与包含下划线的非标准标头一起使用，请在 nginx.conf 文件中的 http 或 server 块中执行此操作：

```
underscores_in_headers on;
ignore_invalid_headers off; 
```

在服务器块中：

```
proxy_pass_header HTTP_IF_MODIFIED_SINCE 
```

如果您有需要处理的旧 HTTP 标头并且包含下划线，这将很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-19T05:37:15.087

毕竟这是一个用户错误。`IF_MODIFIED_SINCE`我以错误的格式（而不是）将标头发送到应用程序`If-Modified-Since`。修复后，它在没有任何额外指令的情况下工作。

# asp.net-mvc-3 - 在 ASP.NET MVC 3 中处理路由

> ID：10060768
> 
> 赞同：1
> 
> 时间：2012-04-08T06:04:14.467
> 
> 标签：asp.net-mvc-3, routes, asp.net-mvc-routing

我正在尝试为某个区域设置路线，并且我需要允许以下 URL：

1.  [http://localhost/审查/设置](http://localhost/Review/Setup)
2.  [http://localhost/Review/Setup/65](http://localhost/Review/Setup/65)
3.  [http://localhost/Review/Setup/_AjaxGetMember?ReviewId=53](http://localhost/Review/Setup/_AjaxGetMember?ReviewId=53)

面积 = 评论 | 控制器 = 设置 | 行动=索引

因此，对于 URL，它们应该转到：

1.  [http://localhost/Review/Setup/Index](http://localhost/Review/Setup/Index)
2.  [http://localhost/Review/Setup/Index/65](http://localhost/Review/Setup/Index/65)
3.  [http://localhost/Review/Setup/_AjaxGetMember?ReviewId=53](http://localhost/Review/Setup/_AjaxGetMember?ReviewId=53)

这是当前为该区域注册的路线。

```
context.MapRoute(
    "Review_default",
    "Review/{controller}/{action}/{id}",
    new
    {
        action = "Index",
        id = UrlParameter.Optional
    }
); 
```

现在，我的第一个列表中的 1 和 3 有效，但 2 没有将 Index 放入 URL 中。我还可以添加什么来使这些 URL 正常工作，以便不必在 URL 中添加或显示索引？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:12:47.123

解决了。我需要添加更多路线。可能有一种更优雅的方法可以做到这一点，但我刚刚测试过并且它有效。

```
context.MapRoute(
    "Review_default",
    "Review/{controller}/{id}",
    new
    {
        action = "Index",
        id = UrlParameter.Optional
    },
    new
    {
        id = @"\d*"
    }
);

context.MapRoute(
    "Review_default2",
    "Review/{controller}/{action}/{id}",
    new
    {
        action = "Index",
        id = UrlParameter.Optional
    },
    new
    {
        action = @"[A-Za-z]+",
        id = @"\d*"
    }
);

context.MapRoute(
    "Review_default3",
    "Review/{controller}/{action}/{id}",
    new
    {
        action = "Index",
        id = UrlParameter.Optional
    },
    new
    {
        action = @"_[A-Za-z]+",
        id = @"\d*"
    }
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:17:45.207

我没有测试它，但这就是我尝试的方式：

```
context.MapRoute(
    "Review_setup_directId",
    "Review/Setup/{id}",
    new
    {
        controller = "Setup",
        action = "Index",
        id = UrlParameter.Optional
    }
); 
```

# php - 在这种情况下，&（和号）符号是什么意思？

> ID：10060770
> 
> 赞同：3
> 
> 时间：2012-04-08T06:04:20.100
> 
> 标签：php, mysql, html, send

我是 php 和 mysql 的新手。我在 youtube 上关注 phpacademy 的教程。有一个部分是表单数据，但是每个遵循教程的人（包括我自己）都遇到了未定义的索引错误。我用`&`（和号）符号修复了它。但是在以下情况下它会做什么？为什么将 & 符号放在 $ 前面会停止错误？它与@相同吗，它只是抑制错误还是实际上修复了它？

```
$submit = &$_POST['submit']; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T06:06:05.960

这意味着不是将值分配给`$submit`，而是将值的引用分配给`$submit`。

如果您熟悉 C 和指针，它就像一个指向值的指针，当您访问它时会自动取消引用。但是，PHP 不允许指针算术或获取实际内存地址（与 C 不同）。

```
$a = 7;
$b = $a;
$c = &$a;
$c = 5;

echo $a, $b, $c; // 575 
```

[键盘](http://codepad.org/OzNGq9Dt)。

要停止您提到的错误，您可以使用诸如...

```
$submit = isset($_POST['submit']) ? $_POST['submit'] : 'default_value'; 
```

...或者...

```
$submit = filter_input(INPUT_POST, 'submit'); 
```

# eclipse - QxOrm 给出“无法解决”错误

> ID：10060772
> 
> 赞同：0
> 
> 时间：2012-04-08T06:04:53.170
> 
> 标签：eclipse, qt, qxorm

我正在使用 Eclipse IDE 和 Qt 插件。我在我的 Qt 项目中使用 QxOrm。我已经下载了库文件并编译了它们，当我开始使用宏时，它会出现很多错误，例如：

```
C_str could not be resolved
macro could not be resolved
string could not be resolved 
```

所以我尝试调试它，发现当我打开定义了我使用的宏的头文件时，同样的错误也存在。什么可能导致这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-10T09:11:18.757

您是否尝试从QxOrm 库包的*./test/目录构建所有示例？*我强烈建议在开始您自己的项目之前测试所有示例以验证您的开发环境。

您能否提供持久类的源代码（*.hpp*和*.cpp*文件）？用一些代码帮助你会更容易......

# notepad++ - Notepad++ 不同文件类型的标签栏图标

> ID：10060773
> 
> 赞同：3
> 
> 时间：2012-04-08T06:04:59.207
> 
> 标签：notepad++

EditPad Lite 有一个功能，它显示选项卡上每个文件的关联应用程序的图标。（例如，html 文件显示 chrome 图标，txt 文件显示记事本图标等。有关屏幕截图，请参见[http://www.editpadlite.com/screens/editpadlite.png](http://www.editpadlite.com/screens/editpadlite.png)。）

反正有没有让 NotePad++ 做同样的事情？

# iphone - 为什么 iOS 通用应用程序需要有两个不同的 xib 文件？

> ID：10060788
> 
> 赞同：0
> 
> 时间：2012-04-08T06:10:17.870
> 
> 标签：iphone, ios, ipad, ios-universal-app

我是 iOS 开发的新手，我对通用应用程序感到困惑。

我们可以为 iPhone 4(retina) 和以前的 iPhone 使用相同的代码、相同的 xib 文件，但为什么我们要为 iPhone 和 iPad 编写两个不同的 xib？有什么不同？

对于 iPhone 和视网膜 iPhone，我们使用“点”而不是像素作为坐标。为什么我们不能对 iPhone 和 iPad 使用类似的方法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T06:33:07.540

对于一些简单的应用程序，可以设计您的 iPhone UI 并为 iPad 重用相同的 xib 文件。只需在 XCode 中选择您的 Target 并将**Main Interface**文本从**iPhone / iPod Deployment Info**复制到**iPad Deployment Info**。如果您使用的是**Main Storyboard**，请也复制它。然而，iPad 并不是简单地将 iPhone 屏幕从 320*480 / 640*960 扩大到 768*1024 / 1536*2048 的 iPad 屏幕。@elgarva 正确地说这看起来很糟糕。相反，iPad 版本使用您的自动调整大小的蒙版来调整每个视图的大小或重新定位。

如果您的所有视图都可以被认为是左中右或上中下，这可能会起作用。如果你有更复杂的东西，你需要设计一个单独的 iPad 界面。

复制你的 iPhone UI 不仅仅是出于美观的原因——iPhone 通常最终包含一个很深且令人困惑的导航树，用于 iPad 可以在单个屏幕上放置的任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:17:47.113

主要原因是，如果你只是缩放 UI 上的元素以适应更大的屏幕，它看起来不会很好......而且你不需要做任何事情来让它工作，它会自动为你做如果您的应用程序仅适用于 iPhone 并安装在 iPad 上（如果用户选择）。

拥有不同的 XIB 可以让您重新排列您的应用程序，并进行思考，以便您可以利用更大的屏幕。您可能可以在一个 iPad 视图上显示比在 iPhone 上的 3 个不同屏幕上更多的信息.​​.....所以，您的 iPhone 应用程序可以显示基本信息并在用户点击它时展开它，而您的 iPad 版本可以显示所有信息加载，加上看起来不错但不需要的额外图形，并且在 iPhone 屏幕上没有意义。

PS：如果你正在开始一个新的应用程序，如果你的应用程序没有很多视图，我强烈建议你使用故事板......它真的很容易上手，它让你一目了然地看到你的应用程序流程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T06:28:13.300

ratina 显示屏只是原始 iPhone 分辨率的两倍。如果您不为视网膜显示提供单独的图形，那么系统只会将资源的分辨率加倍。

这些点与屏幕的物理尺寸有关，这在新旧 iPhone 中是相似的。

对于 iPad，屏幕尺寸会发生变化。这意味着它的点数尺寸将与 iPhone 不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T05:59:04.183

复制`xib`文件并重命名`filename~ipad.xib`它对我来说非常有用`ios6.1`

# matlab - 尺寸不匹配 MatLab；无法弄清楚为什么它不匹配

> ID：10060792
> 
> 赞同：1
> 
> 时间：2012-04-08T06:12:03.237
> 
> 标签：matlab, for-loop, dimension, mismatch

我认为这可能是语法问题，这是代码。

```
 load ([ 'C:\Users\Abid\Desktop\Inquiry Runs\dtS' ])
 dtS((dtS==0))=nan;
 for j=2:9;
maxS=max(dtS(j,:));
minS=min(dtS(j,:));

maxval(j,:)=dtS((dtS>(maxS-.1*maxS)));
minval(j,:)=dtS((dtS<(minS+.1*minS)));

avmax(j)=mean(maxval(j,:));
avmin(j)=mean(minval(j,:));

avs(j,:)=[avmax(j) avmin(j)]
 end 
```

所以我知道每个循环的行矩阵大小不同。例如 maxval(j,:) 将根据它正在查找某些值的一行而改变。

我手动执行此操作，我看到在第一个循环中矩阵的大小为 (1,1)，但是，如果我将循环设置为仅运行 j=2，则行长为 13。

通常，如果矩阵在循环中改变大小，我只会收到警告，但这次我认为这是由于我不明白的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:39:59.093

你是对的，问题在于 maxval(j, :) 的大小不同。`length(maxval(j, :))`不是`length(dtS((dtS>(maxS-.1*maxS))))`；这会导致一个问题，因为 maxval 必须是“矩形”，但如果它被这行代码扩展，它的一些值将不会被定义。考虑：

```
x = [1, 2; 3, 4];
x(3, :) = [5, 6, 7]; 
```

如果此代码合法，则结果将是：

```
x: [1, 2, ?;
    3, 4, ?;
    5, 6, 7] 
```

由于这些未定义的值，matlab 不会让你这样做。您可以改用元胞数组：

```
maxval = cell(9, 1);
avmax = zeros(9, 1);
avs = zeros(9, 2);
for j=2:9;
  maxS=max(dtS(j,:));
  minS=min(dtS(j,:));

  maxval{j} = dtS((dtS>(maxS-.1*maxS)));
  minval{j} = dtS((dtS<(minS+.1*minS)));

  avmax(j)=mean(maxval{j});
  avmin(j)=mean(minval{j});

  avs(j,:)=[avmax(j) avmin(j)]
end 
```

# c++ - aes加密实现

> ID：10060795
> 
> 赞同：-2
> 
> 时间：2012-04-08T06:13:54.867
> 
> 标签：c++, c, aes

由于某种原因，我的 AES 加密实现无法解析/加密/解密超过 100 字节的数据量。

每当我在上面加密和解密时说 100 字节，它并没有完成关于这些字节的其余部分。

我使用相同的方法进行加密。但超过 100 字节时，无论出于何种原因，它都出现了错误。

我不知道为什么。也许其他人可以告诉我如何解决它。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T06:22:08.743

提示：strlen、strcat、str...都使用空终止来确定数据的结尾，这意味着你的真实数据不能嵌入0。

# php - MySQL 查询在本地服务器上工作正常，但在现场给出错误

> ID：10060796
> 
> 赞同：1
> 
> 时间：2012-04-08T06:14:53.703
> 
> 标签：php, mysql, sql

我刚刚完成了我的网站。下面是简单的查询；它在我的本地主机上运行良好，但在实时服务器上运行良好。

```
 select * from friends where action='chating' 
```

它给出了错误“你必须在 where 附近使用正确的语法”。

请帮助我：为什么会发生这种情况，我该如何解决？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T06:17:05.037

我猜你的mysql版本在本地和现场是不同的。请检查一下。

我确信它`Mysql5.5`是`ACTION`新的[**Reserved Keyword**](http://dev.mysql.com/doc/refman/5.0/en/reserved-words.html)。因此，如果您将其用作列名，则在查询中使用时需要在其周围使用**bacticks(`) 。**

试试下面：

```
 select * from friends where `action`='chating' 
```

# java - 即使我关闭了 netbeans，你如何在 JavaDB 中“启动服务器”？

> ID：10060797
> 
> 赞同：1
> 
> 时间：2012-04-08T06:15:07.730
> 
> 标签：java, database, if-statement

我已经使用 Java DB 或数据库创建了一个程序，我想要的最后一件事是在不单击 Java DB 中的“启动服务器”的情况下运行该程序我希望服务器需要与我创建的程序一起运行。你知道怎么做吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:30:50.407

在服务器上部署应用程序后，您可以在启动服务器（从命令行）并将浏览器指向“http://localhost:8080/app_name”后随时运行该应用程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T08:02:53.253

您只需要为您的项目创建一个 jar 文件。如果您使用的是 java 嵌入式数据库，它是 Java 虚拟机的一部分。并且您创建的 jar 文件是一个产品。为此不需要客户端服务器模型。对于 netbeans 去`Run->Clean and build project`创建 Jar 文件，然后去项目文件夹检查它。而且您不再需要单独连接数据库。

# objective-c - 识别用户何时关闭窗口（单击关闭按钮时）

> ID：10060798
> 
> 赞同：3
> 
> 时间：2012-04-08T06:15:16.660
> 
> 标签：objective-c, xcode, macos, cocoa, nswindow

我如何识别用户何时关闭窗口？

我想在关闭窗口之前做点什么。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-08T06:37:16.520

我在视图控制器中使用它

```
//initWithNibName

[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(windowWillClose:) name:NSWindowWillCloseNotification object:self.view.window]; 
```

* * *

```
- (void)windowWillClose:(NSNotification *)notification
    {
        NSWindow *win = [notification object];
        //...
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T06:21:01.383

您可以声明您的自定义类以符合`NSWindowDelegate`协议。

将自定义类的实例设置为窗口的委托

然后使用这些方法之一（可能是 windowWillClose: one）在窗口关闭之前做一些事情。

```
- (BOOL)windowShouldClose:(id)sender
- (void)windowWillClose:(NSNotification *)notification 
```

# sql - 如何从 Django 连接中的两个不同表中选择两个字段？

> ID：10060799
> 
> 赞同：0
> 
> 时间：2012-04-08T06:15:19.250
> 
> 标签：sql, django, join, foreign-key-relationship

假设我有以下由表中的节点表示的非常简单的树结构：

```
class Nodes(models.Model):
    name = models.CharField(max_length=50)
    flags = models.CharField(max_length=50)
    parent = models.ForeignKey('self') 
```

我想知道的是，如何在 Django 中模拟以下 SQL 语句？

```
SELECT parent.name, child.name
FROM Nodes as child
JOIN Nodes as parent ON child.parent == parent.id
WHERE parent.flags == 'STRING1' AND child.flags == 'STRING2'; 
```

我得到的最接近的似乎效率很低：

```
for parent in Nodes.objects.filter(flags='STRING1'):
    for child in Nodes.objects.filter(flags='STRING2', parent=parent.id):
        print parent.name, child.name 
```

有人可以帮助我了解是否有更好的方法来执行此 SQL 查询吗？

谢谢，
-B

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:50:50.273

尝试这个：

```
for node in Nodes.objects.filter(flags='STRING2', parent__flags='STRING1'):
    print node.parent.name, node.name 
```

# jsp - 在没有用户输入的情况下加载 JSP 时从 JSP 向 servlet 发送请求（如按钮）

> ID：10060801
> 
> 赞同：0
> 
> 时间：2012-04-08T06:15:35.617
> 
> 标签：jsp, servlets

我想在 JSP 加载时自动从 JSP "MyJsp.jsp" 向 servlet "MyServlet" 发送请求，而不需要用户提供任何输入，例如按下按钮等。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:33:23.183

您可以将 onLoad 事件添加到 HTML 页面，然后使用 Javascript 提交所需的值。这将在页面加载后将值提交到服务器而无需用户干预

# java - 如何检查字符串是否包含“+”字符

> ID：10060804
> 
> 赞同：41
> 
> 时间：2012-04-08T06:16:00.747
> 
> 标签：java, string, match

我想检查我的字符串是否包含 + 字符。我尝试了以下代码

```
s= "ddjdjdj+kfkfkf";

if(s.contains ("\\+"){
 String parts[] = s.split("\\+);
  s=  parts[0]; // i want to strip part after  +

} 
```

但它没有给出预期的结果。知道吗？

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-04-08T06:17:26.920

你需要这个：

```
if(s.contains("+")) 
```

[`contains()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#contains%28java.lang.CharSequence%29)类的方法[`String`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html)不接受正则表达式作为参数，它接受普通文本。

* * *

**编辑：**

```
String s = "ddjdjdj+kfkfkf";

if(s.contains("+"))
{
    String parts[] = s.split("\\+");
    System.out.print(parts[0]);
} 
```

**输出：**

```
ddjdjdj 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-04-08T06:17:32.007

为什么不只是：

```
int plusIndex = s.indexOf("+");
if (plusIndex != -1) {
    String before = s.substring(0, plusIndex);
    // Use before
} 
```

目前尚不清楚为什么您的原始版本不起作用，但是您没有说出实际发生的情况。如果您想*不*使用正则表达式进行拆分，我个人会使用[Guava](http://guava-libraries.googlecode.com)：

```
Iterable<String> bits = Splitter.on('+').split(s);
String firstPart = Iterables.getFirst(bits, ""); 
```

如果您要使用`split`（内置版本或 Guava），则无需检查它是否首先包含`+`- 如果不包含，则无论如何只会有一个结果。显然存在效率问题，但它是更简单的代码：

```
// Calling split unconditionally
String[] parts = s.split("\\+");
s = parts[0]; 
```

请注意，写作`String[] parts`是首选`String parts[]`——它是更惯用的 Java 代码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T06:25:58.960

[+]更简单

```
 String s = "ddjdjdj+kfkfkf";

    if(s.contains ("+"))
    {
        String parts[] = s.split("[+]");
        s =  parts[0]; // i want to strip part after  +
    }
    System.out.println(s); 
```

# php - 如何通过 PHP-cURL POST 请求请求 xml

> ID：10060807
> 
> 赞同：-1
> 
> 时间：2012-04-08T06:16:52.947
> 
> 标签：php, xml, post, curl

我想要一个 PHP-cURL 脚本来执行以下请求。

```
http://site5.way2sms.com/QuickContacts
POST /QuickContacts HTTP/1.1
Host: site5.way2sms.com
User-Agent: Mozilla/5.0 (Windows NT 6.1; rv:8.0) Gecko/20100101 Firefox/8.0
Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Language: en-us,en;q=0.5
Accept-Encoding: gzip, deflate
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.7
Connection: keep-alive
X-Requested-With: XMLHttpRequest
Content-Type: application/x-www-form-urlencoded; charset=UTF-8
Referer: http://site5.way2sms.com/Main.action?id=0CD36BD332A5C7AE77FDBA1CBDBFFBB6.w809
Content-Length: 16   
gads=ID=e2cdae9b764355fa:T=1333862873:S=ALNI_MYvxochQ56ILMvBDr4oyyqCIDVn3w
Pragma: no-cache
Cache-Control: no-cache
folder=DashBoard
HTTP/1.1 200 OK
Server: Apache-Coyote/1.1
Content-Type: text/html
Content-Length: 1901
Date: Sun, 08 Apr 2012 06:07:52 GMT
Connection: close 
```

我认为返回的内容是 XML 格式。如何处理它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T08:07:48.710

如果要生成对 URL 的发布请求并使用 cURL 捕获返回的数据，可以使用以下函数。

```
function cURL($url, $header=NULL, $cookie=NULL, $p=NULL)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_HEADER, $header);
    curl_setopt($ch, CURLOPT_NOBODY, $header);
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_SSL_VERIFYHOST, 0);
    curl_setopt($ch, CURLOPT_COOKIE, $cookie);
    curl_setopt($ch, CURLOPT_USERAGENT, $_SERVER['HTTP_USER_AGENT']);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, 0);
    if ($p) {
        curl_setopt($ch, CURLOPT_CUSTOMREQUEST, "POST");
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $p);
    }
    $result = curl_exec($ch);
    if ($result) {
        return $result;
    } else {
        return curl_error($ch);
    }
    curl_close($ch);
} 
```

喜欢，

```
 $data = cURL("http://site5.way2sms.com/QuickContacts", NULL, NULL, array("post_var" => value, "another_post_var" => val2)); 
```

# ruby - 发送电子邮件：Devise、Heroku 和 Rails 3

> ID：10060809
> 
> 赞同：1
> 
> 时间：2012-04-08T06:17:08.043
> 
> 标签：ruby, ruby-on-rails-3, email, heroku, devise

1）我不确定这是如何工作的，但我已经在heroku上部署了我的应用程序并使用设计进行身份验证，现在我希望能够从我的应用程序向#confirmable模块的用户发送电子邮件。我怎样才能做到这一点？

我正在使用：Rails 3.2、Heroku 和 Devise for . 如果有帮助的话，我已经从 godaddy.com 购买了域名。

2) 另外，我正在使用谷歌应用程序在我的自定义域上管理我的电子邮件。我遵循了他们的基本设置，但我只能在 some@some.com 上接收电子邮件。如何在谷歌应用上启用发送电子邮件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T16:45:40.867

Devise 已经设置了邮件程序和生成邮件所需的视图。

您可以使用 gmail 或查看 Sendgrid 等事务性电子邮件提供商之一来发送邮件，他们通常有免费选项。

您只需要在 config/environments/production.rb 中配置 SMTP 设置。

```
MyApp::Application.configure do
...
end

ActionMailer::Base.smtp_settings = {
  address: "smtp.sendgrid.net",
  port: 587,
  domain: "domainname.com",
  authentication: :plain,
  user_name: ENV['SENDGRID_USERNAME'],
  password: ENV['SENDGRID_PASSWORD']
} 
```

（虽然您可以将它放在初始化程序或 environment.rb 中，但您可能只希望在生产环境中使用它。）

最后将您的用户名和密码添加为 Heroku 上的配置变量。

# visual-studio - 如何使用 Coded UI Test (CUIT) 在多个浏览器上测试 Web 应用程序？

> ID：10060810
> 
> 赞同：0
> 
> 时间：2012-04-08T06:17:11.860
> 
> 标签：visual-studio, tfs, automation, coded-ui-tests

我想知道如何使用编码的 UI 测试在多个版本的浏览器上测试 Web 应用程序？例如 IE 7-9、Firefox 9-11 和最新的 Chrome。

我的第一个想法是我将这些浏览器安装在我的开发箱或构建服务器上。但这听起来并不正确，即使在技术上是可行的。

我可能需要一些关于如何在多个浏览器和多个版本上测试 Web 应用程序的指示。

视觉工作室 2010 TFS 2008

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:16:04.913

好的，首先查看 Coded UI 支持的平台如下，

![在此处输入图像描述](../Images/dec19177f2cc409f2914d6e95b558275.png)

其次，要为支持的平台创建矩阵测试，请参见以下帖子，

[使用 Visual Studio Lab Management 进行配置矩阵测试](http://blogs.msdn.com/b/lab_management/archive/2011/05/26/configuration-matrix-testing-using-visual-studio-lab-management.aspx)

# liferay - Liferay 6：一旦用户登录，如何显示我们所有开发的 Portlets 页面？

> ID：10060813
> 
> 赞同：1
> 
> 时间：2012-04-08T06:17:38.747
> 
> 标签：liferay

我正在使用 Liferay 6 来开发 Portlets。我的问题是，在 liferay 启动时，我正在显示我的自定义登录页面，一旦用户成功登录，我想显示/重定向用户我们开发的 6 个 Portlet

请告诉我如何实现这一目标？？或者实现这个的概念名称？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T10:09:45.620

您可以创建新的 liferay 页面，例如`.../web/guest/start`并将您的 6 个 portlet 放到此页面。然后在portal-ext.properties中配置起始页

```
default.guest.public.layout.friendly.url = /start 
```

# jquery - 带有背景颜色的动态jQuery div

> ID：10060817
> 
> 赞同：3
> 
> 时间：2012-04-08T06:18:55.703
> 
> 标签：jquery, html, properties, background-color

我想知道是否有人可以解释为什么在第一个创建的 div 中背景颜色不起作用，而在第二个示例中它起作用。

```
$("<div/>", {
width:300,
height:400,
backgroundColor:"#425412", //background-color does not work
text: "hello there"
}).appendTo("body"); 
```

注意：如果没有 background-color 属性，将创建 div。

```
// works as defined including background-color
$("<div style='width:300; height:400; background-color:#425412;'>hello there</div>").appendTo("body"); 
```

第一种方法有限制吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-08T06:23:14.457

您需要使该`backgroundColor`属性成为`css`对象的键。

```
$("<div/>", {
    width:300,
    height:400,
    css: {
        backgroundColor:"#425412"
    },
    text: "hello there"
}).appendTo("body"); 
```

[js小提琴](http://jsfiddle.net/zatcZ/)。

# iframe - 在 Safari 的 iframe 中设置第三方 cookie 的技术是否仍然有效？

> ID：10060820
> 
> 赞同：11
> 
> 时间：2012-04-08T06:20:12.860
> 
> 标签：iframe, cookies, safari

我正在尝试找到一种在 Safari 的 iframe 中设置 cookie 的方法。Safari 的政策是不允许 iframe 设置 cookie，除非用户单击 iframe 中的某些内容。

我已阅读有关 Stackoverflow 和其他文章的问题/答案。以下是一些链接：

*   [Safari 会话变量中具有多个页面的 Facebook Iframe 应用程序不持久](https://stackoverflow.com/questions/2691864/facebook-iframe-app-with-multiple-pages-in-safari-session-variables-not-persisti#4262572)
*   [http://lightyearsoftware.com/2009/11/on-the-pain-of-developing-for-facebook/](http://lightyearsoftware.com/2009/11/on-the-pain-of-developing-for-facebook/)
*   [http://saizai.livejournal.com/897522.html](http://saizai.livejournal.com/897522.html)
*   [http://anantgarg.com/2010/02/18/cross-domain-cookies-in-safari/](http://anantgarg.com/2010/02/18/cross-domain-cookies-in-safari/)

他们都提到了实现这一目标的技术变体。基本思想是创建一个表单元素并使其通过 JavaScript 调用或通过用户单击按钮来提交 POST 请求。一旦发送了 POST 请求，Safari 就会认为用户已经与站点进行了交互，然后允许设置 cookie。

我做了一些尝试来实现这种技术。我失败了。

我在《华尔街日报》上找到了一篇文章 ( [http://online.wsj.com/article/SB10001424052970204880404577225380456599176.html )，其中谈到了 Google 如何使用这种技术将他们的 +1 按钮放入他们的 DoubleClick 广告中。](http://online.wsj.com/article/SB10001424052970204880404577225380456599176.html)这篇文章还引用了 Anant Garg 的博客文章（上面的链接）关于如何解决这个限制。

这是文章的引述：

> 为了绕过 Safari 的默认拦截，谷歌利用了浏览器隐私设置中的漏洞。虽然 Safari 确实阻止了大多数跟踪，但它对人们以某种​​方式与之交互的网站（例如，通过填写表格）进行了例外处理。因此，谷歌在其一些广告中添加了编码，使 Safari 认为有人正在向谷歌提交不可见的表单。然后 Safari 会让谷歌在手机或电脑上安装一个 cookie。

另一个引用：

> 一位苹果官员表示：“我们正在努力制止”绕过 Safari 隐私设置的行为。

我正在使用 2012 年 3 月 26 日发布的 Safari 5.1.5。《华尔街日报》的文章于 2012 年 2 月 17 日发布。Apple 是否有可能更改了 Safari，使这种解决方法不再有效？谁能确认这种技术适用于 Safari 5.1.5？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-10T08:49:22.583

请参阅此线程：[Safari 3rd 方 cookie iframe 技巧不再起作用？](https://stackoverflow.com/questions/9930671/safari-3rd-party-cookie-iframe-trick-no-longer-working/10027429#10027429)

Safari 已在 5.1.4 中强制执行其 cookie 策略。

# php - 有没有办法防止重复？

> ID：10060822
> 
> 赞同：0
> 
> 时间：2012-04-08T06:20:14.923
> 
> 标签：php, template-lite

我有一个这样的查询：

```
 $mp = NCore::db()->query("SELECT DISTINCT TOWN,NAME FROM CINEMA WHERE CITY_ID = ".$_POST['town'].""); 
```

我想要的是这样的东西

格林维尔……………………富兰克林………………………………………………………………………………………………………………………………………………………………………………………………………………………………

我有以下代码，但它写了所有城镇名称。我想要的是我只想写一次城镇名称。有没有办法做到这一点？

```
<h1>Son eklenen sinema salonları</h1>
    <form action="#" method="post">
        <table border ="1">

            {foreach value=mp from=$mpbycity}

            <tr>
                <td> 

                    {$mp.TOWN}
                </td>
            </tr>
            <tr>
                <td>
                    {$mp.NAME}
                </td>
            </tr>

            {/foreach}
        </table>

</form> 
```

![在此处输入图像描述](../Images/e4b6710d6dfe9f63013613602aa45dda.png)

我想给你看重复的。有没有办法只打印一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:22:52.897

```
$mp = NCore::db()->query("SELECT TOWN, NAME FROM CINEMA WHERE CITY_ID = ".$_POST['town']." GROUP BY TOWN, NAME"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:50:14.330

```
 $mp = NCore::db()->query("SELECT TOWN,NAME FROM CINEMA WHERE CITY_ID = ".$_POST['town']." GROUP BY TOWN"); 
```

仅当您想要独特的 TOWN 时

如果它同时适用于 NAME 和 TOWN

```
$mp = NCore::db()->query("SELECT TOWN,NAME FROM CINEMA WHERE CITY_ID = ".$_POST['town']." GROUP BY TOWN,NAME"); 
```

# c# - 如何在c#中绘制具有主轴和次轴的图表

> ID：10060826
> 
> 赞同：1
> 
> 时间：2012-04-08T06:21:10.120
> 
> 标签：c#, visual-studio, visual-studio-2010, mschart

我想绘制一个包含主 Y 轴和辅助 Y 轴以及公共 X 轴的 mschart。以下是可能的重复项，但我没有找到我正在寻找的解释：

[图表多类型和辅助 Y 轴](https://stackoverflow.com/questions/9180606/charts-multi-type-and-secondary-y-axis)

[MS 图表控制两个 Y 轴](https://stackoverflow.com/questions/3458791/ms-chart-control-two-y-axis)

我需要一些关于如何使用绘制这样的图表的帮助`MSChart`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T08:58:45.500

```
ChartArea chartarea = new ChartArea();

Series Memory = new Series();

RepeatsMemoryPlot.Series.Add(Memory);

//Add points to series Memory

Memory.Points.AddXY(a, b);

Series Time = new Series();

RepeatsMemoryPlot.Series.Add(Time);

Time.ChartArea = Memory.ChartArea;

Time.YAxisType = AxisType.Secondary;

//Add Points to time series
Time.Points.AddXY(a, b); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-07T09:59:38.380

在 ChartArea 中，选择 Axis 然后选择 Secondary Y(values) axis 并将 Enabled 从 Auto 更改为 True

第二个轴将显示

# python - SimpleCv - IOError（“无法识别图像文件”） - 来自 JpegStreamCamera（） - Android 的 IP 网络摄像头

> ID：10060828
> 
> 赞同：1
> 
> 时间：2012-04-08T06:21:28.903
> 
> 标签：python, opencv, simplecv

我正在尝试使用带有 IP 网络摄像头应用程序的 Android 2.3 手机来使用 SimpleCV 进行显示。以下似乎很好。

```
from SimpleCV import *
import time

cam = JpegStreamCamera("http://192.168.1.3:1025/videofeed") 
img = cam.getImage() 
img.show() 
```

但是，在运行时出现以下错误。手机上的应用程序虽然检测到连接。

```
Traceback (most recent call last):
  File "D:\cam.py", line 5, in <module>
    img = cam.getImage()
  File "build\bdist.win32\egg\SimpleCV\Camera.py", line 540, in getImage
    return Image(pil.open(StringIO(self.camthread.currentframe)), self)
  File "C:\Python27\lib\site-packages\pil-1.1.7-py2.7-win32.egg\Image.py", line 1980, in open
    raise IOError("cannot identify image file")
IOError: cannot identify image file 
```

有什么方法可以检测网络摄像头流的格式并将此流转换为 jpeg？还有其他建议吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T13:34:56.433

它实际上应该已经是 Jpeg 格式。您能否再次启动 IP 网络摄像头软件，然后验证 URL 在 chrome 或 firefox 中是否有效。如果不是，则 URL 有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-13T18:03:00.583

这是一个错误，现在实际上已在 master 分支中修复： [https ://github.com/ingenuitas/SimpleCV](https://github.com/ingenuitas/SimpleCV)

# iphone - iPhone IOS 5 上的中断通话/短信

> ID：10060834
> 
> 赞同：0
> 
> 时间：2012-04-08T06:22:51.133
> 
> 标签：iphone, objective-c, ios, ios5

我们可以在 iPhone IOS 5 上中断通话/短信吗？任何代码示例？我正在为一个应用程序寻找一些代码示例，该应用程序在电话传入/传出时收到通知，并获取来电者号码。短信也是如此。

我知道这看起来像是间谍活动，但最终的目的远非如此。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T06:40:24.950

我将从一个非越狱的位置来考虑这个（因为你没有在你的问题中指定它）。

> 我们可以在 iPhone IOS 5 上中断通话/短信吗？

不，绝对不是。这样做，你需要 3 件事：

1.  来电/短信的监听器
2.  来电或短信时调用的事件。
3.  能够切断所述呼叫的响应者

如果不突破应用程序沙箱，第一个是不可能的，这在 iOS 开发中是一个明确的禁忌。它还为整个操作系统带来了重大的安全风险。如果应用程序可以相互倾听并以任何他们想要的方式做出反应，那将会造成混乱！用户不会有任何隐私。第二个需要某种监听器，该监听器始终存在并且能够唤醒/启动您的应用程序以中断呼叫，这再次是走出沙箱的明显案例。事实上，启动应用程序以中断调用的唯一方法是发送一个 URL，这本身就需要一个应用程序……哎呀！第三个是完全不切实际的。如果你在决定是否切断电话或短信的方式上犯了一个小错误，

> 我知道这看起来像是间谍活动

因为它是！您需要一个侦听器才能从您的应用程序中调用一些操作。

当然，这并不是说不可能，而是需要越狱设备。

# python - 检查当前用户是否投票

> ID：10060836
> 
> 赞同：2
> 
> 时间：2012-04-08T06:22:55.733
> 
> 标签：python, django, view

在我的索引页面上，我需要知道当前用户是否对一本书进行了投票，因此我可以`<li>`在当前用户已经投票的元素上设置一个类。

**模板（片段）**

```
{% if top_books %}
<ul>
    {% for book in top_books %}
        <li id="{{ book.id }}" class="book">
                <img class="upvote {% ifequal thisUserUpVote 1 %}selected{% endifequal %}" title="Upvote book (click to undo)" src="{{ STATIC_URL }}images/upvote.png" />
                {{ book.score|floatformat }}
                <img class="downvote {% ifequal thisUserDownVote 1 %}selected{% endifequal %}" title="Downvote book (click to undo)" src="{{ STATIC_URL }}images/downvote.png" />
            <a href="/p/{{ book.id }}/">{{ book.title }}</a>
        </li>
    {% endfor %}
</ul> 
```

**Views.py（片段）**

```
from django.http import HttpResponse
from django.shortcuts import render_to_response, get_object_or_404
from django.template import RequestContext
from books.models import Book

def index(request):
    latest_book = Book.objects.all().order_by('-pub_date')[:5]
    top_items = Book.objects.all().order_by('-score')[:100]
    return render_to_response('books/index.html', {
                            'latest_books': latest_books,
                            'top_books' : top_books},
                            context_instance=RequestContext(request)) 
```

**模型.py（片段）**

```
class Book(models.Model):
    title = models.CharField(max_length=500)
    pub_date = models.DateField()
    author = models.ManyToManyField(Author)
    userUpVotes = models.ManyToManyField(User, blank=True)
    userDownVotes = models.ManyToManyField(User, blank=True) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:42:48.053

首先，您的代码将无法正确呈现，因为您将变量传递给视图中不存在的模板 - 我希望这只是一个错字。

```
def index(request):
    latest_book = Book.objects.all().order_by('-pub_date')[:5]
    top_items = Book.objects.all().order_by('-score')[:100]
    return render_to_response('books/index.html', {
                            'latest_books': latest_books, # latest_book
                            'top_books' : top_books}, # top_items
                            context_instance=RequestContext(request)) 
```

对于您的问题-您需要在模板的循环中检查用户是否是模型`userUpVotes`或`userDownVotes`模型：

```
{% for book in top_books %}
   {% if user in book.userupvotes.all %}
       {{ user }} has upvoted
   {% endif %}
   {% if user in book.userdownvotes.all %}
       {{ user }} has downvoted
   {% endif %}
{% endfor %} 
```

# ruby-on-rails - 在使用击中数据库的类方法的模型上使用 devise_for 时，rake db:migrate 失败

> ID：10060839
> 
> 赞同：3
> 
> 时间：2012-04-08T06:23:46.540
> 
> 标签：ruby-on-rails, ruby, devise

我的用户模型使用 column_names 方法允许管理员在所有列上进行 mass_assignment。

```
class User < ActiveRecord::Base

  attr_accessible :email, :password, :password_confirmation, :remember_me
  attr_accessible *column_names, as: :admin 

end 
```

但是，这不适用于我的已配置设计的路由文件

```
Sandbox::Application.routes.draw do
  devise_for :users
end 
```

也就是说，当我想通过“rake db:migrate RAILS_ENV=test”创建我的用户表时。我明白了

```
rake aborted!
Mysql2::Error: Table 'sandbox_test.users' doesn't exist: SHOW FULL FIELDS FROM `users` 
```

完整跟踪[http://pastie.org/3748502](http://pastie.org/3748502)

我知道该表不存在，这就是我需要运行迁移的原因，但不知何故，rake db:migrate RAILS_ENV=test 重新加载路由，从而调用 devise_for，并且 devise_for 在添加设计映射时加载用户类，从而调用 column_names 方法在一张还不存在的桌子上。

所以我不确定如何干净地处理这个？如果 table_exists 我应该添加 add 吗？每次我想使用 column_names 方法？还是有更好的方法来处理这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T09:46:37.900

我认为最简洁的方法是列出您希望管理员可以使用的属性。测试表是否存在或使用救援可能会掩盖您的意图。

# python - python - 选择性处理异常回溯

> ID：10060840
> 
> 赞同：1
> 
> 时间：2012-04-08T06:24:10.713
> 
> 标签：python, logging, exception-handling, error-logging

我正在尝试使用 python 的日志记录模块建立一个包含多层信息的异常处理机制，以向用户显示我的应用程序。

在应用程序中，日志记录模块有 2 个处理程序：一个用于保存 DEBUG 信息的文件处理程序和一个用于保存 INFO 信息的流处理程序。默认情况下，日志记录级别设置为 INFO。我想要实现的是一个设置，如果发生任何异常，默认情况下会向用户显示一个简单的错误消息，没有任何回溯。如果日志级别设置为 DEBUG，用户仍然应该**只**收到简单消息，但是这次异常回溯通过文件处理程序记录到日志文件中。

有可能实现这一目标吗？

我尝试使用`logger.exception(e)`，但它总是将回溯打印到控制台上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:18:57.437

该`traceback`模块可能会对您有所帮助。在您的应用程序的顶层，您应该放置一条 catch all 语句：

```
setup_log_and_other_basic_services()
try:
    run_your_app()
except Exception as e:
    if is_debug():
        traceback.print_stack()
    else:
        traceback.print_stack(get_log_file())
    print e 
```

不应允许 try/catch 块之外的代码崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:55:27.030

编写您的自定义异常处理函数，并在每次编写 catch 时使用它。

在这个函数中，您应该检查哪个模式处于打开状态（INFO 或 DEBUG），然后提取有关异常的信息并在需要时将其手动提供给记录器。

# java - 关于arrayList

> ID：10060843
> 
> 赞同：0
> 
> 时间：2012-04-08T06:24:36.463
> 
> 标签：java

我使用了扫描仪而不是字符串标记器，下面是一段代码......

```
Scanner scanner =  new Scanner("Home,1;Cell,2;Work,3");
scanner.useDelimiter(";");
while (scanner.hasNext()) {
    // System.out.println(scanner.next());
    String phoneDtls = scanner.next();

    // System.out.println(phoneDtls);
    ArrayList<String> phoneTypeList = new ArrayList<String>();
    if(phoneDtls.indexOf(',')!=-1) {

        String value = phoneDtls.substring(0, phoneDtls.indexOf(','));

        phoneTypeList.add(value);

    }

    Iterator itr=phoneTypeList.iterator();
    while(itr.hasNext())
        System.out.println(itr.next());
} 
```

我在执行此操作时得到的输出...家庭单元工作

从上面的代码可以看出，我们最终在数组列表phoneTypeList中存储了值..但是根据'，'找出值的逻辑并没有那么好..那就是..

```
if(phoneDtls.indexOf(',')!=-1) {
    String value = phoneDtls.substring(0, phoneDtls.indexOf(','));
    phoneTypeList.add(value);
} 
```

你能告诉我其他的选择吗..!! 实现同样的目标...!!提前非常感谢..!!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T06:41:53.167

好吧，既然您问是否有其他方法可以做到这一点，那么这里有一个替代方法：您可以直接拆分字符串，并使用以下[`foreach`](http://docs.oracle.com/javase/1.5.0/docs/guide/language/foreach.html)语句用更少的代码来做：

```
String input = "Home,1;Cell,2;Work,3";

String[] splitInput = input.split(";");

for (String s : splitInput ) {

    System.out.println(s.split(",")[0]);

} 
```

无需使用，`ArrayList<T>`因为您也可以遍历数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T06:37:53.023

您可以尝试根据'，'进行拆分吗 STIRNG_VALUE.split(','); 将返回一个数组，其中的字符串用 分隔，这可能会有所帮助

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T06:38:10.060

如果我理解正确。问题陈述是您要维护电话类型列表的列表。像这样：[“家”，“细胞”，“工作”]。

我建议您将其保存在有意义的属性文件/配置文件/数据库中，并在您的应用程序启动时将其加载到内存中。

如果无法更改输入，那么至于算法，我想不出更好的算法。看起来不错。

如果有意义，您可以使用字符串的拆分功能。首先在“;”上使用拆分 然后拆分“，”

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-04-08T06:40:34.650

```
declare the arraylist outside the while loop. 
```

试试这个，我也做了一些改变以获得更好的性能。希望你能比较和理解变化。

```
 ArrayList<String> phoneTypeList = new ArrayList<String>();
    Scanner scanner = new Scanner("Home,1;Cell,2;Work,3");
    scanner.useDelimiter(";");
    String phoneDtls = null;
    String value = null;
    while (scanner.hasNext()) {
        phoneDtls = scanner.next();
        if (phoneDtls.indexOf(',') != -1) {
            value = phoneDtls.split(",")[0];
            phoneTypeList.add(value);
        }
    }

    Iterator itr = phoneTypeList.iterator();
    while (itr.hasNext())
        System.out.println(itr.next()); 
```

我已经执行 n 得到结果，检查屏幕截图。

![在此处输入图像描述](../Images/ef755a3d39ffff07c770b483fa0db4d7.png)

# apache - 将一个子域发送到子目录，将其他所有内容发送到带有参数的文件

> ID：10060844
> 
> 赞同：0
> 
> 时间：2012-04-08T06:24:41.387
> 
> 标签：apache, mod-rewrite, redirect

哎呀，我整天都在为此苦苦挣扎。

从子域重定向到带有作为参数传入的子域的脚本文件可以正常工作。

当一个特定的子域实际上是一个真正的文件夹 (phpmyadmin) 时，我似乎无法让它工作，至少没有前面提到的规则。

这是我的东西：

```
<VirtualHost *.domain.com:443>
ServerName *.domain.com
ServerAlias *.domain.com
DocumentRoot /home/domain/web
RewriteEngine On
RewriteCond %{HTTP_HOST} !^www.* [NC]
RewriteCond %{HTTP_HOST} ^(phpmyadmin)\.domain\.com
RewriteCond %{REQUEST_URI} !^phpmyadmin
RewriteRule ^(.*)$ /phpmyadmin [L]
RewriteCond %{HTTP_HOST} ^([^\.]+)\.domain\.com
RewriteRule ^\/script2$ /public/script2.php?param1=%1 [L]
RewriteCond %{HTTP_HOST} ^([^\.]+)\.domain\.com
RewriteRule ^(.*) /public/script1.php?param1=%1 [L]
<Directory /home/domain/web>
Options -Indexes IncludesNOEXEC FollowSymLinks -MultiViews
AllowOverride All
Order allow,deny
Allow from all
</Directory>
SSLEngine on
SSLCertificateFile /home/domain/crt
SSLCertificateKeyFile /home/domain/key
</VirtualHost> 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T09:19:16.330

2个问题：

```
RewriteCond %{HTTP_HOST} !^www.* [NC]
RewriteCond %{HTTP_HOST} ^(phpmyadmin)\.domain\.com
RewriteCond %{REQUEST_URI} !^phpmyadmin
RewriteRule ^(.*)$ /phpmyadmin [L] 
```

1.  在您的目标重定向中，您不会更改域。通过仅使用 /phpmyadmin，您不会指向**www.domain.com/phpmyadmin**，而是指向**phpmyadmin.domain.com/phpmyadmin**，这可能会导致无限重定向循环，因为它将继续匹配 phpmyadmin 子域每个重定向。采用：

    `RewriteRule ^(.*)$ [http://www.domain.com/phpmyadmin](http://www.domain.com/phpmyadmin) [L]`

2.  与`RewriteRule`不使用初始 / 的地方不同，`RewriteCond %{REQUEST_URI}`确实需要像这样的前导斜杠：

    `RewriteCond %{REQUEST_URI} !^/phpmyadmin`

不这样做意味着它与定向 /phpmyadmin 不匹配，从而导致另一个潜在的自匹配无限重定向循环。

你也不需要

`RewriteCond %{HTTP_HOST} !^www. [NC]`

因为您的网址永远不会以 www 开头，也不会以 phpmyadmin 开头。匹配

`RewriteCond %{HTTP_HOST} ^(phpmyadmin)\.domain\.com`

自动暗示 NOT www 匹配条件也为真

# php - Zend Framework如何添加路径

> ID：10060845
> 
> 赞同：0
> 
> 时间：2012-04-08T06:24:41.553
> 
> 标签：php, zend-framework

嗨，当我尝试包含任何标准库时，我遇到了问题。我已经将 Zend 文件夹导入此路径

```
/project
    /library
        / 
```

这是我的脚本：

```
 require_once 'Zend/Db/Table/Abstract.php';

 require_once APPLICATION_PATH.'/models/ContentNode.php';

class Application_Model_Page extends Zend_Db_Table_Abstract
{

    public function createPage ($name, $namespace, $parentId = 0)
    {
        //create the new page
        $row = $this->createRow();
        $row->name = $name;
        $row->namespace = $namespace;
        $row->parent_id = $parentId;
        $row->date_created = time();
        $row->save();
        // now fetch the id of the row you just created and return it 
        $id = $this->_db->lastInsertId();
        return $id;
    } 
```

这是我收到的错误消息

> 警告：include_once(Zend\Db\Table\Abstarct.php) [function.include-once]：无法打开流：C:\Zend\Apache2\htdocs\zendproject\library\Zend\Loader 中没有这样的文件或目录。第 146 行的 php

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:33:46.570

根据您的错误，您拼写错误**“抽象”**。

```
Warning: include_once(Zend\Db\Table\Abstarct.php) [function.include-once]:
 failed to open stream: No such file or directory in
 C:\Zend\Apache2\htdocs\zendproject\library\Zend\Loader.php on line 146 
```

如果您将 Zend 框架用作 mvc 应用程序，也不需要在模型中添加包含文件。自动加载器应自动包含所需的文件。
确保您`application.ini`包含以下行：
`includePaths.library = APPLICATION_PATH "/../library"`
我不记得当 ZF 在库中时是否需要添加命名空间，所以我假设它是必需的。您可以尝试将该行添加`autoloaderNamespaces[] = "Zend_"`到您的 application.ini 中，这不会有任何影响，并且可能有助于确保 Zend 库被包含在内。以便正确包含库。然后您的库文件夹应如下所示：

```
/project_path
    /library
        /Zend 
```

看起来您正在运行*“Pro Zend 框架技术”*一书中的代码。本书使用 Zend Framework 1.8 版。您可能正在使用 ZF 1.11。如果是这样，则需要注意几件事，因为自 1.8 版以来已经发生了一些变化。如果您是 ZF 的新手，这不应该是您的第一本书，因为它会让您发疯，如果您熟悉 ZF，那么它包含一些很棒的信息。

我有这本书的更新代码，所以如果你需要更多帮助......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T06:28:31.100

```
set_include_path(get_include_path() . PATH_SEPARATOR . 'ZEND/FRAMEWORK/PATH'); 
```

# restful-authentication - 移动客户端的asp.net Web Api自定义身份验证要求

> ID：10060846
> 
> 赞同：0
> 
> 时间：2012-04-08T06:24:45.577
> 
> 标签：restful-authentication, asp.net-mvc-4, asp.net-web-api

请根据以下要求提供您对我的解决方案的反馈。

**要求（类似）：**

1.假设身份验证令牌由电子邮件和日期制成并已加密

1.b authentication Token通过header发回给客户端

1.c authentication Token存储在客户端和服务器上

**我的解决方案：**

1) 通过 header 将 authentication Token 发送回客户端。我使用了 cookie 和以下代码。

```
 HttpCookie cookie = new HttpCookie("AuthenticationToken");
      cookie.Value = "EncryptedToken";
      Response.Cookies.Add(cookie); 
```

2）我将身份验证令牌存储在数据库中，并且对于每个请求，我将保存在 cookie 中的令牌与存储在数据库中的令牌进行比较。（假设加密、解密操作正确完成）

**您的反馈/意见？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T09:04:01.477

It looks to me OK. However, if you are encrypting (so you can decrypt back) and can find out email (identifying user) and time token issued (hence verify whether expired or not), do you still need to store it in database? I would, only if i had other requirements such tracking, etc.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T08:57:36.657

我没有安全方面的专业知识。对我来说，你的想法听起来可行。

但是，我很好奇您为什么要像这样进行**“自定义”**身份验证？您是否看过在 Web.API 中完成的**“构建它” ASP.NET 身份验证？**

然后，您可以使用标准的 .net 内容[创建自定义 HttpOperationHandler ，例如：](http://codebetter.com/howarddierking/2011/10/11/oauth-2-0-in-web-api/)

```
var ticket = FormsAuthentication.Decrypt(val);
var ident = new FormsIdentity(ticket);
...
var principle = new GenericPrincipal(identity, new string[0]);
Thread.CurrentPrincipal = principle;
...
if (!principal.Identity.IsAuthenticated)
    return false; 
```

此外，您可能想了解[Thread.CurrentPrincipal 和 Current.User](http://www.hanselman.com/blog/SystemThreadingThreadCurrentPrincipalVsSystemWebHttpContextCurrentUserOrWhyFormsAuthenticationCanBeSubtle.aspx)

优点是您不需要将身份验证令牌存储在服务器上的某个数据库中并在每次请求时检索它。

# header - ExtJs 4 如何更改手风琴标题的高度

> ID：10060851
> 
> 赞同：1
> 
> 时间：2012-04-08T06:25:25.907
> 
> 标签：header, styles, extjs4, accordion

我想更改 Accordion 的标题高度，我使用 css 设置标题的高度。

```
#panel1 .x-accordion-hd{ height: 40px;} 
```

高度发生了变化，但面板的内容被标题覆盖，当面板折叠时，下一个标题将覆盖前一个标题的一部分。这是图片。任何帮助将不胜感激。

![效果](../Images/e87a6cf37bf489f6ce9e9d2007b9e1a1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T22:22:58.390

您可以在手风琴面板内放置一个容器并在容器中设置填充

```
items: [{
        title: 'Panel 1',
        items:[{
                xtype:'container',
                padding:'25px 0 0 0',
                html:'panel content'
              }]
        },{
        title:'Panel 2',
        items:[{
                xtype:'container',
                padding:'25px 0 0 0',
                html:'panel content'
              }]
        }] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-12T14:51:40.737

这是个好主意，我还在[http://ext4all.com/post/how-to-change-the-header-s-height-of-accordion](http://ext4all.com/post/how-to-change-the-header-s-height-of-accordion)找到了另一个解决方案，谢谢！

# git - git 合并时始终使用文件的本地版本（即使合并的一侧没有更改）

> ID：10060853
> 
> 赞同：3
> 
> 时间：2012-04-08T06:25:48.920
> 
> 标签：git, version-control, git-merge

这个问题非常类似于：[如何告诉 git 始终选择我的本地版本以在特定文件上进行冲突合并？](https://stackoverflow.com/questions/928646/how-do-i-tell-git-to-always-select-my-local-version-for-conflicted-merges-on-a-s)有一个重要的区别。

我已经按照 VonC 对上述问题的回答中的出色步骤进行了操作，并且几乎一切正常。但是，在我的情况下，我只更改了文件的*传入*版本（不是*本地*版本和*传入*版本）。

不需要合并，因为只有一个分支有变化。在这种情况下，git 似乎不需要运行合并驱动程序，而是简单地用传入的版本覆盖*本地*版本，*这正是我的自定义合并驱动程序应该阻止的。*

有什么方法可以从本质上告诉 git 在合并期间它永远不应该更改特定文件（即使在上述 VonC 的答案似乎不太有效的情况下）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T15:04:17.527

当 Git 决定没有冲突时，似乎其他人已经尝试并未能强制冲突。

这个 SO 问题“ [Git 合并 - 手动合并 - 强制冲突具有整个旧文件和新文件版本](https://stackoverflow.com/questions/8969295/git-merge-manual-merge-forcing-conflic-having-whole-old-and-new-file-version)”在评论中得出结论：

> 我最害怕的是那个答案：“这是不可能的，因为这是 git 的工作方式”。

并且“[需要 GIT 工作流程建议](https://stackoverflow.com/questions/3091581/need-git-workflow-suggestion)”提到尝试：

> `*.xml merge=Unset`进入我的`.gitattributes`档案。
> 或自定义合并驱动程序`~/.gitconfig`试图导致自动合并失败

换句话说，这可能不是正确的方法。

如果您确定合并引入的所有修改不应该在这里，那么您可以尝试：

```
git clone yourRepo aCloneRepo
cd aCloneRepo
git merge --no-commit --no-ff origin/source_branch
# simply overwrite any change file by the ones in ..\yourRepo
git add .
git commit -m "merge" 
```

请注意，`git merge`即使您`git status`提到没有要提交的内容，最后的 " " 也将起作用（因为您恢复了所有修改文件的内容）。
它将在新的提交中记录合并。

这会给你：

```
C:\Users\VonC\prog\git\tests\mergekeep\r4>git lg
*   a6a1588 - (HEAD, master) merge (2 minutes ago) <VonC>
|\
| * 1bcd75d - (origin/b) addition (2 hours ago) <VonC>
|/
* 9d2e8fb - (origin/master, origin/HEAD) first file (2 hours ago) <VonC> 
```

但是本地文件不变。

如果您再次尝试合并您的分支，您将获得：

```
C:\Users\VonC\prog\git\tests\mergekeep\r4>git merge origin/b
Already up-to-date. 
```

但是，这种解决方法很麻烦，涉及从一个工作树到另一个工作树的克隆和一些手动复制或 rsynch。
我尝试使用各种 git reset 命令或管道命令，如[git update-index](http://linux.die.net/man/1/git-update-index)，但没有太大成功。

# javascript - 是否可以在不使用 eval 的情况下在 JavaScript 中实现动态范围？

> ID：10060857
> 
> 赞同：28
> 
> 时间：2012-04-08T06:26:06.273
> 
> 标签：javascript, eval, dynamic-scope

JavaScript 具有词法作用域，这意味着从函数内访问的非局部变量在定义时解析为该函数的父级作用域中存在的变量。这与动态作用域形成对比，在动态作用域中，从函数内访问的非局部变量在调用时解析为该函数的调用作用域中存在的变量。

```
x=1
function g () { echo $x ; x=2 ; }
function f () { local x=3 ; g ; }
f # does this print 1, or 3?
echo $x # does this print 1, or 2? 
```

上面的程序在词法范围的语言中打印 1 然后 2，在动态范围的语言中打印 3 然后 1。由于 JavaScript 是词法范围的，它会先打印 1，然后再打印 2，如下所示：

```
var print = x => console.log(x);

var x = 1;

function g() {
    print(x);
    x = 2;
}

function f() {
    var x = 3;
    g();
}

f();           // prints 1

print(x);      // prints 2
```

尽管 JavaScript 不支持动态作用域，但我们可以使用`eval`如下方式实现它：

```
var print = x => console.log(x);

var x = 1;

function g() {
    print(x);
    x = 2;
}

function f() {
    // create a new local copy of `g` bound to the current scope
    // explicitly assign it to a variable since functions can be unnamed
    // place this code in the beginning of the function - manual hoisting
    var g_ = eval("(" + String(g) + ")");
    var x = 3;
    g_();
}

f();                         // prints 3

print(x);                    // prints 1
```

我想知道是否存在另一种可能的方法来实现相同的结果而不诉诸`eval`.

**编辑：**这是我试图在不使用的情况下实现的`eval`：

```
var print = x => console.log(x);

function Class(clazz) {
    return function () {
        var constructor;
        var Constructor = eval("(" + String(clazz) + ")");
        Constructor.apply(this, arguments);
        constructor.apply(this, arguments);
    };
}

var Rectangle = new Class(function () {
    var width, height;

    constructor = function (w, h) {
        width = w;
        height = h;
    };

    this.area = function () {
        return width * height;
    };
});

var rectangle = new Rectangle(2, 3);
print(rectangle.area());
```

我知道这不是一个很好的例子，但总体思路是使用动态范围来创建闭包。我认为这种模式有很大的潜力。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-05-10T15:48:53.587

要添加有关此主题的注释：

在 JavaScript 中，每当您使用：

*   函数声明语句或函数定义表达式然后局部变量将具有*词法作用域*。

*   **函数**构造函数然后局部变量将引用全局范围（顶级代码）

*   `this`是 JavaScript 中唯一具有动态范围并通过执行（或调用）上下文设置的内置对象。

因此，要回答您的问题，在 JS 中**`this`**，该语言已经是动态范围的功能，您甚至不需要模拟另一种功能。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-04-08T07:08:54.223

属性查找贯穿原型链，它与动态范围非常匹配。只需传递您自己的动态范围变量环境即可使用，而不是使用 Javascript 的词法范围。

* * *

```
// Polyfill for older browsers.  Newer ones already have Object.create.
if (!Object.create) {
  // You don't need to understand this, but
  Object.create = function(proto) {
    // this constructor does nothing,
    function cons() {}
    // and we assign it a prototype,
    cons.prototype = proto;
    // so that the new object has the given proto without any side-effects.
    return new cons();
  };
} 
```

* * *

```
// Define a new class
function dyn() {}
// with a method which returns a copy-on-write clone of the object.
dyn.prototype.cow = function() {
  // An empty object is created with this object as its prototype.  Javascript
  // will follow the prototype chain to read an attribute, but set new values
  // on the new object.
  return Object.create(this);
} 
```

* * *

```
// Given an environment, read x then write to it.
function g(env) {
  console.log(env.x);
  env.x = 2;
}
// Given an environment, write x then call f with a clone.
function f(env) {
  env.x = 3;
  g(env.cow());
} 
```

* * *

```
// Create a new environment.
var env = new dyn();
// env -> {__proto__: dyn.prototype}
// Set a value in it.
env.x = 1;
// env -> {x: 1}  // Still has dyn.prototype, but it's long so I'll leave it out.

f(env.cow());
// f():
//   env -> {__proto__: {x: 1}}  // Called with env = caller's env.cow()
//   > env.x = 3
//   env -> {x: 3, __proto__: {x: 1}}  // New value is set in current object
//   g():
//     env -> {__proto__: {x: 3, __proto__: {x: 1}}}  // caller's env.cow()
//     env.x -> 3  // attribute lookup follows chain of prototypes
//     > env.x = 2
//     env -> {x: 2, __proto__: {x: 3, __proto__: {x: 1}}}

console.log(env.x);
// env -> {x: 1}  // still unchanged!
// env.x -> 1 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-08T06:34:06.693

我不这么认为。

这不是语言的工作方式。您必须使用变量以外的东西来引用此状态信息。`this`我猜最“自然”的方式是使用 的属性。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-04-08T07:58:35.770

在您的情况下，与其尝试使用动态范围设置构造函数，不如使用返回值怎么办？

```
function Class(clazz) {
    return function () {
        clazz.apply(this, arguments).apply(this, arguments);
    };
}

var Rectangle = new Class(function () {
    var width, height;

    this.area = function () {
        return width * height;
    };

    // Constructor
    return function (w, h) {
        width = w;
        height = h;
    };
});

var rectangle = new Rectangle(2, 3);
console.log(rectangle.area()); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-06-12T14:11:47.310

为什么没人说`this`？

您可以通过绑定上下文将变量从调用范围传递到被调用函数。

```
function called_function () {
   console.log(`My env ${this} my args ${arguments}`, this, arguments);
   console.log(`JS Dynamic ? ${this.jsDynamic}`);
}

function calling_function () {
   const env = Object.create(null);
   env.jsDynamic = 'really?';

   ... 

   // no environment
   called_function( 'hey', 50 );

   // passed in environment 
   called_function.bind( env )( 'hey', 50 ); 
```

或许值得一提的是，在严格模式下，所有函数都没有默认发送给它们的“环境”（`this`为 null）。在非严格模式下，全局对象是被`this`调用函数的默认值。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-08T06:34:23.687

如果你有办法做语法糖（例如带有 gensyms 的宏）并且你有 unwind-protect，你可以使用全局变量来模拟动态范围。

宏可以通过将动态变量的值保存在隐藏的词法中然后分配一个新值来重新绑定动态变量。unwind-protect 代码确保无论该块如何终止，都将恢复全局的原始值。

Lisp 伪代码：

```
(let ((#:hidden-local dynamic-var))
  (unwind-protect
    (progn (setf dynamic-var new-value)
           body of code ...)
    (set dynamic-var #:hidden-local))) 
```

当然，这不是做动态作用域的线程安全方式，但如果你不做线程，它会做！我们会将它隐藏在一个宏后面，例如：

```
(dlet ((dynamic-var new-value))
   body of code ...) 
```

因此，如果您在 Javascript 中有 unwind-protect 和一个宏预处理器来生成一些语法糖（这样您就不必手动打开所有保存和 unwind-protected 恢复的编码），它可能是可行的。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-08T09:27:45.673

我知道这并不能完全回答这个问题，但是要在评论中添加太多代码。

作为一种替代方法，您可能需要查看 ExtJS 的`extend`函数。这是它的工作原理：

```
var Rectangle = Ext.extend(Object, {
    constructor: function (w, h) {
        var width = w, height = h;
        this.area = function () {
            return width * height;
        };
    }
}); 
```

使用公共属性而不是私有变量：

```
var Rectangle = Ext.extend(Object, {
    width: 0,
    height: 0,  

    constructor: function (w, h) {
        this.width = w;
        this.height = h;
    },

    area: function () {
        return this.width * this.height;
    }
}); 
```

# algorithm - 嵌套循环中的乘法数：Big O

> ID：10060861
> 
> 赞同：0
> 
> 时间：2012-04-08T06:27:31.787
> 
> 标签：algorithm, big-o, time-complexity

```
if x:
    for i in range(a):
       for z in range(a):
          for k in range(z):
             for p in range(i):
                c = (i * z) + (k * p)
else:
    for i in range(a):
       for z in range(a):
          for k in range(z):
              c = (i * z) + (k * p) 
```

这会是 O(n^4) 吗？另外，会发生多少次乘法？

编辑：更新了代码。另外，由于下限捕获了有效输入将强制执行的最大步数，所以大欧米茄不也是 n^4 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:35:09.770

如果所有数字、和均为 O(n) ，则以下代码仅为 O(n ^(4 )。)`a``z``i`

```
for i in range(a):
   for z in range(a):
      for k in range(z):
         for p in range(i):
            c = (i * z) + (k * p) 
```

正如你所写的，我们只知道那个代码块是 O(a ² zi)。同样，将发生的乘法总数为：2a ² zi。并且，再次，如果`a`、`z`和`i`都是 O(n)，则乘法数将为 O(n ⁴ )。

我不确定你想知道关于第二个代码块的什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:38:57.347

是的，复杂性仍然是`O(n^4)`. 为简单起见，这里是重新排列代码的技巧

```
for i in range(a):
   for p in range(i):
       f(i, p) 
```

`f(i, p)`在哪里

```
for z in range(a):
    for k in range(z):
        c = (i * z) + (k * p) 
```

在第一部分中，`f(i, p)`已执行`O(n^2/2)`到最大订单（因为求和`sum_i (i^2)`，请自己计算）。同样，`f(i, p)`的复杂度`f(i, p)`又等于`O(n^2/2)`。

所以组合的结果顺序是`O(n^4/4)`。并且每个操作有两次乘法，所以乘法的次数是`O(n^4/2)`

# php - 如何在 CakePHP 中获取当前时间戳并为其添加分钟？

> ID：10060874
> 
> 赞同：0
> 
> 时间：2012-04-08T06:33:58.643
> 
> 标签：php, cakephp, cakephp-2.0

我正在尝试在 CakePHP 中为时间戳添加分钟。我希望在处理表单时获取时间戳。

请记住，我只是在学习这些东西。

这是我的索引视图中的表单代码...

```
<?php
echo $this->Form->create('Text');
$expirations = array('9999999'=>'Never','10'=>'10 Minutes','60'=>'1 Hour','1440'=>'1 Day','10080'=>'1 Week','40320'=>'1 Month','525600'=>'1 Year');
echo $this->Form->input('expiration', array('options' => $expirations), array('empty'=>false));
echo $this->Form->input('title');
echo $this->Form->input('body', array('rows' => '3'));
echo $this->Form->end('Upload');
?> 
```

我想从我的“过期”输入中获取值并将该分钟数添加到当前时间。

我目前使用的 PHP 代码是：

```
DATE_ADD(CURRENT_TIMESTAMP, INTERVAL $expiration MINUTE) 
```

其中 $expiration 是要添加的分钟数。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:46:00.753

惯于

```
$expiration += ($minutes * 60); 
```

做这个把戏，还是我错过了什么？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:03:10.610

您从哪里得到输入具有更多参数的想法？

它应该是（如记录）：

```
 echo $this->Form->input('expiration', array('options' => $expirations, 'empty'=>false)); 
```

PS：一个好的IDE会通过代码完成告诉你没有这样的参数。

至于您的问题：您可以通过几种方式在保存之前修改数据：

a) 在控制器级别

```
if ($this->request->is('post') || $this->request->is('put')) {
    $this->request['Text']['expiration'] += $yourValue; // we modify it first and then save it 
    if ($this->Text->save($this->request->data)) {...}
} 
```

b) 在模型中作为回调（推荐）

```
public function beforeValidate($options = array()) {
    if (isset($this->data[$this->alias]['expiration'])) {
         $this->data[$this->alias]['expiration'] += $yourValue;
    }
    return true;
} 
```

# c# - 使用大型数据集进行分页 - Linq2Sql、Repeater

> ID：10060882
> 
> 赞同：1
> 
> 时间：2012-04-08T06:35:55.713
> 
> 标签：c#, asp.net, linq-to-sql, repeater, custompaging

我知道这样的问题在 SO 上很多，但我的问题有点不同。一般来说，我在 SO，使用 Linq2Sql/Sql 的自定义分页中找到了。不，我不是在问同样的问题，我已经完成了，我的问题是我的 asp.net 页面上显示的页面（数据寻呼机）。在我的表中，我有大约 640 行，将来会增长到数千甚至一万甚至更多。

**我做了什么：**

1.  为了实现自定义分页，我按照 Mikes[这篇文章](http://www.mikesdotnetting.com/Article/71/Search-Engine-Friendly-Custom-Paging-with-the-GridView-and-LINQ-to-SQL)成功地在我的记录上实现了自定义分页。我在页面上有一个中继器，我按照 Mike 的指示使用 Take and Skip 绑定数据。

2.  实现分页后，我发现它每页创建 10 条记录，所以在这种情况下，我的寻呼机中显示了 64 页，这看起来很尴尬。它像这样 1 2 3 4 5 6 7 8 9 10 upto 64，杀死我的页面 css 和 ui。从用户的角度来看，这也不好。所以

**我想要的是：**

我需要像寻呼机这样的用户部分......看[这里](https://stackoverflow.com/users)

**最后我得到了解决方案**

谢谢大家，我得到了我需要的东西。我将其发布为下面的答案，以便对其他需要相同的人有所帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T13:58:23.187

**我回答了我自己的问题，因为这将帮助其他正在寻找相同的人,,,,**

[http://www.codeproject.com/Articles/11418/Pager-Control-for-ASP-NET](http://www.codeproject.com/Articles/11418/Pager-Control-for-ASP-NET)：这是我在 CodeProject 上获得的自定义控件。对于那些需要在 ASP.Net 中自定义分页的人来说非常有用，轻量级且易于实现。

# java - 需要帮助从 Arraylist 中删除

> ID：10060883
> 
> 赞同：0
> 
> 时间：2012-04-08T06:36:08.380
> 
> 标签：java, arraylist, contact

好的，这是家庭作业。我有一个`arraylist`添加、显示、搜索和删除联系人的任务。我的代码可以编译，并且我拥有所有可以正常工作的正确方法，但该`deleteMatch()`方法除外。它编译并运行，但实际上并没有从我的`arrayList`. 我还需要在完成后返回并验证输入并检查我知道的空值，但我可以很容易地做到这一点，我只是想先了解基础知识。对此方法的任何帮助将不胜感激。

```
import java.util.ArrayList;
import java.util.Scanner;

public class ContactDatabase
 {
private ArrayList<Contact> contacts;        // ArrayList of contact
private static final int QUIT = 0;          // Menu choices
private static final int ADD = 1;
private static final int LISTALL = 2;
private static final int SEARCH = 3;
private static final int DELETE = 4;

/**
* Default constructor - make a new ArrayList object with parameter type Contact,,
*/
ContactDatabase()
{     // Initialize the categories.// instantiate your ArrayList here
    contacts = new ArrayList<Contact>();

}

/**
* inputContact inputs contact information from the keyboard.
* It then stores this new contact in the contacts ArrayList.
*/
public void inputContact()
{
        Contact myContact;

        Scanner input = new Scanner(System.in);

        System.out.println("Please enter first name of new person");
         String first = input.nextLine();

        System.out.println("Please enter last name of new person");
         String last = input.nextLine();

        System.out.println("Please enter phone number xxxxxxxxxx");
         String phone = input.nextLine();

        System.out.println("Please enter e-mail");
         String email = input.nextLine();

        myContact = new Contact(first, last, phone, email);
         contacts.add(myContact);

        System.out.println("Details recorded:");
         System.out.println(contacts);

}

/**
* displayAll iterates through the ArrayList of contacts and outputs each one
* to the screen.
*/
public void displayAll()
{
    for (Contact entry : contacts)
         System.out.println (entry);

}

/**
* displayMatch inputs a keyword from the user.
* It then iterates through the ArrayList of contacts and outputs each one
* to the screen if the contact information contains the keyword.
*/
public void displayMatch()
{

    if(contacts.isEmpty())
        {
            System.out.println("Sorry, there is no contact information to search.");
        }
    else
        {

            Scanner input = new Scanner(System.in);
            System.out.print("Please enter the search keyword for or 0 to quit: ");
            String search = input.next().trim().toUpperCase();
            if (search.equals("0") == false)
                {
                    boolean found = false;
                    for(Contact a: contacts)
                        {
                            if((a.getFirst().toUpperCase().equals(search))||(a.getLast().toUpperCase().equals(search))||(a.getPhone().toUpperCase().equals(search))||(a.getEmail().toUpperCase().equals(search)))
                                {
                                   System.out.println("that contact info is: ");
                                   System.out.println("name: " + a.getFirst());
                                   System.out.println("name: " + a.getLast());
                                   System.out.println("phone number: " + a.getPhone());
                                   System.out.println("email: " + a.getEmail());
                                   found = true;
                                 }

                            else
                                {
                                    found = false;
                                    System.out.println("Sorry, that contact can not be found!");
                                }
                        }
                }
        }
}

/**
* deleteMatch inputs a keyword from the user.
* It then iterates through the ArrayList of contacts and asks the user
* if the contact should be deleted, if the contact information contains the keyword.
*/
public void deleteMatch()
{
    if(contacts.isEmpty())
        {
            System.out.println("Sorry, there is no contact information to search.");
        }
    else
        {

            Scanner input = new Scanner(System.in);
            System.out.print("Please enter the search keyword for or 0 to quit: ");
            String search = input.next().trim().toUpperCase();
            if (search.equals("0") == false)
                {
                    boolean found = false;
                    for(Contact a: contacts)
                        {
                            if((a.getFirst().toUpperCase().equals(search))||(a.getLast().toUpperCase().equals(search))||(a.getPhone().toUpperCase().equals(search))||(a.getEmail().toUpperCase().equals(search)))
                                {
                                   System.out.println("that contact info is: ");
                                   System.out.println("name: " + a.getFirst());
                                   System.out.println("name: " + a.getLast());
                                   System.out.println("phone number: " + a.getPhone());
                                   System.out.println("email: " + a.getEmail());
                                   found = true;
                                   Scanner inp = new Scanner(System.in);
                                   System.out.println("Are you sure you would like to remove this contact?");
                                   String sure = inp.next().toUpperCase();
                                   if (sure.equals("YES"))
                                   {

                                        contacts.remove(a);
                                        System.out.println("Contact removed... ");
                                        displayAll();

                                   }
                                  }

                            else
                                {
                                    found = false;
                                    System.out.println("Sorry, that contact can not be found!");
                                }
                        }
                }
        }
}

// run through the array and look for an item that matches e

    // get keyword input from user to be used in search
    // run through list and look for any Contact that has
    //     the keyword
    // prompt user to make sure they want to delete the
    //     (next/current) Contact you found
    // if yes, delete the Contact

// Main class
public static void main(String[] args)
{
    ContactDatabase cdb = new ContactDatabase();
    Scanner scan = new Scanner(System.in);
    int choice = ADD;

    // Main menu
    while (choice != QUIT)
    {
        System.out.println();
        System.out.println("Choose from the following:");
        System.out.println("0) Quit");
        System.out.println("1) Add new contact");
        System.out.println("2) List all contacts");
        System.out.println("3) Search contacts by keyword and display");
        System.out.println("4) Search contacts by keyword and remove");
        choice = scan.nextInt();
        switch (choice)
        {
            case ADD:   cdb.inputContact();
                        break;
            case LISTALL: cdb.displayAll();
                        break;
            case SEARCH: cdb.displayMatch();
                        break;
            case DELETE: cdb.deleteMatch();
                        break;
        }
    }
}

    class Contact
{
   private String first, last, phone, email;

   /**
    * Constructors.
    */
   public Contact()
   {
   }

   public Contact(String first, String last, String phone, String email)
   {
      this.first = first;
      this.last = last;
      this.phone = phone;
      this.email = email;
   }

   /*
    * Accessor Methods
    */

   public String getFirst()
   {
      return first;
   }

   public String getLast()
   {
      return last;
   }

   public String getPhone()
   {
      return phone;
   }

   public String getEmail()
   {
      return email;
   }

   /*
    * Mutator Methods
    */
   public void setFirst(String first)
   {
      this.first = first;
   }

   public void setLast(String last)
   {
      this.last = last;
   }

   public void setPhone(String phone)
   {
      this.phone = phone;
   }

   public void setEmail(String em)
   {
      this.email = em;
   }

   /*
    * Return all fields concatenated into a string
    */
   public String toString()
   {
      return last + ", " + first + ". " + phone + ", " + email;
   }

   public boolean equals(Object otherObject)
   {
      if (otherObject ==null)
      {
         return false;
      }
      else if (getClass() != otherObject.getClass())
      {
         return false;
      }
      else
      {
         Contact otherContact = (Contact)otherObject;
         return (first.equals(otherContact.first) &&
               last.equals(otherContact.last)&&
               phone.equals(otherContact.phone)&&
               email.equals(otherContact.email));
      }
   }

} // end inner class, Contact
} // end class, ContactDatabase 
```

感谢大家的帮助。我终于让它工作了！！！这是最终代码：

```
import java.util.ArrayList;
import java.util.Scanner;
import java.util.regex.Matcher;
import java.util.regex.Pattern;

/**
* The ContactDatabase class stores each contact in an arraylist.
* Methods exist to add new contacts, search contacts, delete, and print contacts
* to the console.
*/
public class ContactDatabase
{
private ArrayList<Contact> contacts;        // ArrayList of contact
private static final int QUIT = 0;          // Menu choices
private static final int ADD = 1;
private static final int LISTALL = 2;
private static final int SEARCH = 3;
private static final int DELETE = 4;

/**
* Default constructor - make a new ArrayList object with parameter type Contact,,
*/
ContactDatabase()
{
    contacts = new ArrayList<Contact>();
}
/**
* inputContact inputs contact information from the keyboard.
* It then stores this new contact in the contacts ArrayList.
*/
public void inputContact()
{
    Contact myContact;
    String first = "null";
    String last = "null";
    String phone = "000-0000000";
    String email = "xxx@example.com";
    Scanner input = new Scanner(System.in);

    while (true)
    {
        System.out.println("Please enter first name of new person");
        first = input.nextLine();
        if (first == null)
        {
            System.out.println("Sorry, first name cannot be null!");
        }
        else
        {
        break;
        }
    }

    while (true)
    {
        System.out.println("Please enter last name of new person");
        last = input.nextLine();
        if (first == null)
        {
            System.out.println("Sorry, last name cannot be null!");
        }
        else
        {
        break;
        }
    }

    while (true)
    {
        System.out.println("Please enter phone number 540-555-1212");
        String vphone = input.nextLine();
        Pattern pattern = Pattern.compile("\\d{3}-\\d{3}-\\d{4}");
        Matcher matcher = pattern.matcher(vphone);
        if ((matcher.matches())|| vphone != null)
        {
            System.out.println("Thank you.");
            phone = vphone;
            break;
        }
        else
        {
            System.out.println("Sorry, that entry is incorrect or null");
        }
    }

    while (true)
    {
        System.out.println("Please enter e-mail xyz@xyz.com");
        String vemail = input.nextLine();
        Pattern pattern = Pattern.compile(".+@.+\\.[a-z]+");
        Matcher matcher = pattern.matcher(vemail);
        if ((matcher.matches())||(vemail != null))
        {
            System.out.println("Thank you.");
            email = vemail;
            break;
        }
        else
        {
            System.out.println("Sorry, that entry is incorrect");
        }
    }

    myContact = new Contact(first, last, phone, email);
    contacts.add(myContact);

    System.out.println("Details recorded:");
    System.out.println(contacts);

}

/**
* displayAll iterates through the ArrayList of contacts and outputs each one
* to the screen.
*/
public void displayAll()
{
    System.out.println("Current contact list entries:");
    for (Contact entry : contacts)
    System.out.println (entry);
}
/**
* displayMatch inputs a keyword from the user.
* It then iterates through the ArrayList of contacts and outputs each one
* to the screen if the contact information contains the keyword.
*/
public void displayMatch()
{
    boolean found = false;
    Scanner input = new Scanner(System.in);
    System.out.print("Please enter the search keyword for or 0 to quit: ");
    String search = input.next().trim().toUpperCase();
    if (search.equals("0") == false)
    {
        for(Contact a: contacts)
        {
            if((a.getFirst().toUpperCase().equals(search))||(a.getLast().toUpperCase().equals(search))||(a.getPhone().toUpperCase().equals(search))||(a.getEmail().toUpperCase().equals(search)))
            {
                System.out.println("that contact info is: ");
                System.out.print("name: " + a.getFirst());
                System.out.println(" " + a.getLast());
                System.out.println("phone number: " + a.getPhone());
                System.out.println("email: " + a.getEmail());
                found = true;
            }
            if(contacts.isEmpty())
            {
                System.out.println("Sorry, there is no contact information to search.");
            }
        }
    }
    if (found == false)
    {
        System.out.println("Sorry, no such contact");
    }
}
/**
* deleteMatch inputs a keyword from the user.
* It then iterates through the ArrayList of contacts and asks the user
* if the contact should be deleted, if the contact information contains the keyword.
*/
public void deleteMatch()
{
    for (int i=0; i< contacts.size(); i++)
    {
        displayMatch();
        Scanner inp = new Scanner(System.in);
        System.out.println("Are you sure you would like to remove this contact?");
        String sure = inp.next().toUpperCase();
        if (sure.equals("YES"))
        {
            contacts.remove(i);
            System.out.println("Thank you. Contact removed.");
            displayAll();
        }
    }
}

// Main class
public static void main(String[] args)
{
    ContactDatabase cdb = new ContactDatabase();
    Scanner scan = new Scanner(System.in);
    int choice = ADD;

    // Main menu
    while (choice != QUIT)
    {
        System.out.println();
        System.out.println("Choose from the following:");
        System.out.println("0) Quit");
        System.out.println("1) Add new contact");
        System.out.println("2) List all contacts");
        System.out.println("3) Search contacts by keyword and display");
        System.out.println("4) Search contacts by keyword and remove");
        choice = scan.nextInt();
        switch (choice)
        {
            case ADD:   cdb.inputContact();
                        break;
            case LISTALL: cdb.displayAll();
                        break;
            case SEARCH: cdb.displayMatch();
                        break;
            case DELETE: cdb.deleteMatch();
                        break;
        }
    }
}

/**
 * The inner class, Contact, stores the details for a single contact.
 *  There is no error checking on any of the input.  Whatever string is
 *  passed in for a given attribute is accepted.
 */
class Contact
{
   private String first, last, phone, email;

   /**
    * Constructors.
    */
   public Contact()
   {
   }

   public Contact(String first, String last, String phone, String email)
   {
      this.first = first;
      this.last = last;
      this.phone = phone;
      this.email = email;
   }

   /*
    * Accessor Methods
    */

   public String getFirst()
   {
      return first;
   }

   public String getLast()
   {
      return last;
   }

   public String getPhone()
   {
      return phone;
   }

   public String getEmail()
   {
      return email;
   }

   /*
    * Mutator Methods
    */
   public void setFirst(String first)
   {
      this.first = first;
   }

   public void setLast(String last)
   {
      this.last = last;
   }

   public void setPhone(String phone)
   {
      this.phone = phone;
   }

   public void setEmail(String em)
   {
      this.email = em;
   }

   /*
    * Return all fields concatenated into a string
    */
   public String toString()
   {
      return last + ", " + first + ". " + phone + ", " + email;
   }

   public boolean equals(Object otherObject)
   {
      if (otherObject ==null)
      {
         return false;
      }
      else if (getClass() != otherObject.getClass())
      {
         return false;
      }
      else
      {
         Contact otherContact = (Contact)otherObject;
         return (first.equals(otherContact.first) &&
               last.equals(otherContact.last)&&
               phone.equals(otherContact.phone)&&
               email.equals(otherContact.email));
      }
   }

} // end inner class, Contact
} // end class, ContactDatabase 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T06:44:06.877

如果您覆盖了不需要检查单个字段的 equals 方法，则可以简单地使用新信息创建一个新联系人，然后调用 arrayList.remove(contact_ob); 如果存在，它将删除，

也用于比较您正在使用的字符串 string.toUpper().equals(other_str); 相反，您可以使用 string.equalsIgnoreCase(otherString) ，无论大小写如何，都会进行比较

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:46:46.180

您正在尝试删除不正确的（对象）。根据索引或计数器删除对象...这肯定会解决您的问题。

在您尝试根据对象删除对象之间

这将暂时解决您的问题，但请考虑覆盖 equals 方法并删除该对象

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T07:01:08.410

您需要在此代码中更改的内容很少。

1] 与 equalsIgnoreCase 匹配。切勿将值转换为大写或小写然后匹配它。它限制用户输入特定的案例。

2]输入时，您需要检查已输入的重复值。

3] 搜索特定联系人并将其删除后，您需要中断。

4]始终制作一个联系人对象，然后将其用于匹配。

# ruby-on-rails - Rails 3 / Recaptcha 安装 - 未定义的局部变量或方法“recaptcha_tags”

> ID：10060885
> 
> 赞同：5
> 
> 时间：2012-04-08T06:36:52.650
> 
> 标签：ruby-on-rails, recaptcha

当我尝试在我的 Rails 3 应用程序上安装 Recaptcha 时出现以下错误。我已将 recaptcha 标记放在我的 _form 文件中（见下文附件）。

```
Showing /Users/fkhalid2008/loand/app/views/posts/_form.html.erb where line #20 raised:

undefined local variable or method `recaptcha_tags' for #<# <Class:0x12d4e1870>:0x12d4dac78>
Extracted source (around line #20):

17:   <div class="actions">
18:     <%= f.submit %>
19:   </div>
20:   <%= recaptcha_tags %>
21: <% end %> 
```

您能否提一些建议？

* * *

**_FORM.HTML.ERB 文件**

```
<%= form_for(@post) do |f| %>
<% if @post.errors.any? %>
<div id="error_explanation">
<h2><%= pluralize(@post.errors.count, "error") %> prohibited this post from being saved:</h2>

<ul>
<% @post.errors.full_messages.each do |msg| %>
<li><%= msg %></li>
<% end %>
</ul>
</div>
<% end %>

<div class="field">
I am a <%= f.text_field :title %> getting married in <%= f.text_field :job %> in <%= f.text_field :location %>, and looking for a wedding photographer. My budget is <%= f.text_field :salary %>.
</div>
<div class="actions">
<%= f.submit %>
</div>
<%= recaptcha_tags %>
<% end %> 
```

**帖子控制器**

```
def create
@post = Post.new(params[:post])

respond_to do |format|
if verify_recaptcha && @post.save
format.html { redirect_to :action=> "index"}
format.json { render :json => @post, :status => :created, :location => @post }
else
format.html { render :action => "new" }
format.json { render :json => @post.errors, :status => :unprocessable_entity }
end
end
end 
```

**宝石文件**

```
source 'http://rubygems.org'

gem 'rails', '3.1.1'
gem "twitter-bootstrap-rails", "~> 2.0.1.0"
gem 'recaptcha', :require => 'recaptcha/rails'

group :production do
gem 'pg'
end

group :development, :test do
gem 'sqlite3'
end

gem 'json'

group :assets do
gem 'sass-rails',   '~> 3.1.4'
gem 'coffee-rails', '~> 3.1.1'
gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails' 
```

**RECAPTCHA.RB**

```
Recaptcha.configure do |config|
config.public_key  = '6LdR......'
config.private_key = '6LdR7.....'
end 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-08T07:36:27.193

我试图重现您的错误，但在阅读[自述文件](https://github.com/ambethia/recaptcha/blob/master/README.rdoc)后一切正常。

你重启服务器了吗？

我做的步骤：

1.  生成 api 密钥
2.  使用您的代码和我的密钥创建 config/initializers/recaptcha.rb
3.  用 <%= recaptcha_tags %> 改变了我的表单
4.  重新启动服务器，初始化器正在加载

就是这样……也许再试一次。

# search - 如何在 Lucene.net 中使用 RegexQuery？

> ID：10060887
> 
> 赞同：1
> 
> 时间：2012-04-08T06:37:08.600
> 
> 标签：search, expression, lucene.net

我正在使用 C# 在搜索引擎上做一个简单的项目。为此，我正在使用 lucene.net。现在我完成了索引和简单的搜索。我的项目有一个模块，它可以提取特定页面上的所有电子邮件 ID。为此，我需要使用一些正则表达式的逻辑。我在网上搜索和搜索，但找不到任何关于如何使用 RegexQuery 或任何其他正则表达式工具搜索索引的示例。请帮忙！

我正在使用 lucene.net 2.9.2 版

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-04T11:42:18.530

我刚开始研究同样的事情，并得出结论，2.9.2 不支持正则表达式搜索。

从好的方面来说，最新版本似乎确实进行了正则表达式搜索。

[http://incubator.apache.org/lucene.net/](http://incubator.apache.org/lucene.net/)

引用站点 2.9.4 版“一些新功能：Search.Regex、Simple Faceted Search 和 Fast Vector Highlighter 中的简单短语分析”

# java - sts/eclipse 锁定版本化的 jar，因此常春藤不解决依赖关系

> ID：10060891
> 
> 赞同：1
> 
> 时间：2012-04-08T06:37:42.667
> 
> 标签：java, eclipse, ivy

在我的项目中，我正在使用引用其他项目的 jar 的快照修订，例如：

> <依赖组织=“com.myproject”名称=“edo-common”rev=“3.0.0-SNAPSHOT”传递=“假”改变=“真”>

当我尝试解析 ivy 时，它会尝试删除旧版本的 jar 并用新的 jar 替换它。但是 STS 会锁定版本化的 jar，并且不允许删除旧的 jar。所以常春藤给出了不解决依赖关系的错误。

有什么方法可以使 STS/eclipse 不锁定 jar？

请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-10T13:49:04.460

我通过更新 ivy 版本得到了解决方案，我在那里有一个选项：删除 ivy.xml 的类路径中的旧 retreive artifacts 而且如果你想从你的 lib 中加载 jar，你可以选择选项： Build the classpath with：选择检索的工件在进行更新时它不会锁定 jar。

# scheme - Scheme中的ALU-n过程

> ID：10060896
> 
> 赞同：0
> 
> 时间：2012-04-08T06:38:10.640
> 
> 标签：scheme, racket, alu

我是 Scheme 语言的初学者，所以我在编写一个程序来接收一个 n 位数字并将其放入 ALU 时遇到了麻烦。ALU 应该使用 1 位 ALU 构建。

这是 1 位 ALU：

```
(define ALU1
  (lambda (sel a b carry-in)
    (multiplexor4 sel
                  (cons (andgate a b) 0)
                  (cons (orgate a b) 0)
                  (cons (xorgate a b) 0)
                  (multiplexor2 sub
                                (full-adder a b carry-in)
                                (full-adder a (notgate b) carry-in))))) 
```

它与多路复用器和全加器一起工作。

这是我尝试使用几个程序来模拟 n 位 ALU：

```
(define ALU-helper
  (lambda (selection x1 x2 carry-in n)
    (if (= n 0)
        '()
        (ALU1 (selection x1 x2 carry-in)))))

(define ALUn
  (lambda (selection x1 x2 n)
    (ALU-helper (selection x1 x2 c n)))) 
```

完成后，它应该根据“选择”取 2 个 n 位数字并将它们相加或相减等。这将是输入：

```
(define x1 '(0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0   0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0) )   
(define x2 '(1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1   1 1 1 1 1 1 1 1 1 1 1 1 1 1 1 1) )
(ALUn 'add x1 x2 32) 
```

而且我在运行它时遇到错误，这似乎是由于“选择”参数而发生的。我确定我只是对所有参数感到困惑，但我不确定如何解决问题并让 ALU 工作。我正在使用 Dr. Racket 程序，语言 R5RS 运行它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T17:08:58.030

通过在 ALU-helper 中为 ALU1 的参数加上括号，您要求将选择视为一个函数，并且只将 1 个参数传递给 ALU-helper。尝试：

```
(ALU1 selection x1 x2 carry-in)))) 
```

在 ALUn 中调用 ALU-helper 也是如此。

# c++ - 返回一个常量引用

> ID：10060897
> 
> 赞同：1
> 
> 时间：2012-04-08T06:38:22.197
> 
> 标签：c++, operator-overloading

我现在正在学习C++。我正在尝试从此[***链接***](http://newdata.box.sk/bx/c/index.htm)研究它。在第 10 章中，当我研究运算符重载时，在示例程序中，“*this”作为常量引用返回。[***这里是***](http://newdata.box.sk/bx/c/htm/ch10.htm#Heading38)

在这个程序中，我们使用“*this”取消引用当前对象，返回值意味着当前的 Counter 对象作为常量引用。

所以当我这样做时：

```
Counter a = ++i; 
```

是否将当前对象分配给常量引用，并且将常量引用的值复制到使用默认复制构造函数创建的新对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:50:50.350

当你写

```
Counter a = ++i; 
```

您只是`const Counter &`从函数返回的内容中复制。你正在做的相当于（从的角度来看`a`）：

```
const Counter & ref = ++i;
Counter a = ref; 
```

只要您定义`a`为一个`Counter`对象，它将被创建为一个全新的`Counter`对象（或者如果无法访问复制构造函数，您将收到编译器错误）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:49:25.610

好吧，实际上这个类有一个 operator++ 函数，它适用于 ++var 或 var++。

```
26:    const Counter& Counter::operator++()
27:    {
28:       ++itsVal;
29:       return *this;
30:    } 
```

由于 i 是一个对象，我们可以肯定地完成这个任务。所以在这种情况下，我们可以在这里看到：

```
Counter a = ++i; 
```

我们只是将一个递增对象分配给另一个相同类型（计数器）。

这回答了你的问题吗？如果没有，我`m sorry, i think i didn`不会解决你的问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T07:37:21.067

您提到的案例非常简单。

```
Counter a = ++i; 
```

会被翻译成...

```
++i;
Counter a = i; 
```

参考文献等 完全不参与……

# php - 如何使用 PHP 截断 MySQL 数据库中的文本？（限制字符后添加“...”）

> ID：10060898
> 
> 赞同：0
> 
> 时间：2012-04-08T06:38:27.363
> 
> 标签：php, html, text, truncate

我想在主页上显示 2 个帖子的片段。这是我的代码：

```
 function getPostsHome() {
    $query = mysql_query("SELECT * FROM posts LIMIT 0,2") or die(mysql_error());
    while($post = mysql_fetch_assoc($query)) {
        echo "<h3>" . $post['Title'] . "</h3>";
        echo "<p>" . $post['Content'] . "</p><br /><br />";

    }
} 
```

如何将标题截断为 25 个字符，然后是“...”，将内容截断为 100 个字符，然后是“...”？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:43:01.733

试试这个

```
function getPostsHome() {
    $query = mysql_query("SELECT * FROM posts LIMIT 0,2") or die(mysql_error());
    while($post = mysql_fetch_assoc($query)) {
      echo "<h3>" . (strlen($post['Title']) > 25 ? substr($post['Title'], 0, 25)."..." : $post['Title']) . "</h3>";
      echo "<p>" . (strlen($post['Content']) > 100 ? substr($post['Content'], 0, 100)."..." : $post['Content']) . "</p><br /><br />";
    }
} 
```

抱歉，现在已修复

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T06:43:06.723

用途 `substr()`及`strlen()`作用：

代替：

```
 echo "<h3>" . $post['Title'] . "</h3>"; 
```

和：

```
if(strlen($post['Title']) >25)
  echo "<h3>" . substr($post['Title'],0,25)."....</h3>";
else
   echo "<h3>" . $post['Title'] . "</h3>"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-08T06:44:45.423

希望这有帮助：D

```
<?php
    function trunc($str, $len) {
        if (strlen($str) > $len) {
            $str = substr($str, 0, $len) . "...";
        }
        return $str;
    }

    $title = trunc($title, 25);
    $content = trunc($content, 100);

    echo $title;

?> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T22:44:16.467

其他答案可能会产生奇怪的结果。考虑一个 26 个字符的字符串。在其他答案中，此字符串被截断为 25 个字符 + 3 个“...”。字符串 26 的 28 个字符。这不是您想要的。因此，好的答案是：

```
<?php
    function trunc($str, $len) {
        if (strlen($str) > $len+3) {
            $str = substr($str, 0, $len) . "...";
        }
        return $str;
    }

    $title = trunc($title, 25);
    $content = trunc($content, 100);

    echo $title;

?> 
```

# wcf - WPF 客户端使用 WCF 服务

> ID：10060900
> 
> 赞同：0
> 
> 时间：2012-04-08T06:38:36.067
> 
> 标签：wcf, consuming

我创建了一个 wcf 服务并尝试由 wpf 客户端使用。我无法在我的 wpf 客户端的数据网格中看到数据。这是 wcp 和 wpf 的代码

我已在以下网址中附加了所有详细信息..请检查一下 n 帮助我.. [http://pastebin.com/8cVKrqci](http://pastebin.com/8cVKrqci)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T09:36:56.293

这里有 4 种基本可能性：

*   您没有调用 WCF 服务
*   您正在调用 WCF 服务，但它没有返回任何数据
*   您没有将数据绑定到数据网格
*   数据绑定后数据网格不刷新

您需要在代码中添加一些日志来识别问题。

**编辑**

根据评论，您的问题是该服务未在您使用的地址上运行。

# matlab - 为信号添加谐波

> ID：10060901
> 
> 赞同：1
> 
> 时间：2012-04-08T06:38:39.357
> 
> 标签：matlab, signal-processing

如何添加输入信号的谐波？

*   不进行频率估计（提供频率）
*   通过进行频率估计

输入：信号的矢量化形式输出：与输入相同的格式

注意：如果你知道答案，你能给我算法或链接，这将帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:03:09.610

*   `A`假设您的输入是具有间隔为 的幅度数组的时域信号`[0, t0]`。然后循环`i`使用

    A[i] = A[i] + A0 * sin (2 pi f dt)

其中 dt 是每个数组元素之间的时间差，即`dt = N/t0`。

*   如果先进行傅里叶变换，只需`A0`在频率对应的位置添加`f`，然后进行傅里叶逆变换，以下链接@L7ColWinters

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-11T13:47:56.980

如果您查看[三角恒等式](http://en.wikipedia.org/wiki/List_of_trigonometric_identities#Double-.2C_triple-.2C_and_half-angle_formulae)，您会看到

cos(2x) = 2 * (cos(x))^2 -1

由于一次谐波是基频的两倍，您可以简单地对输入进行平方，根据需要进行缩放并消除直流偏移。频率不需要知道或估计。

请记住，奈奎斯特仍然适用，因此您可能必须低通输入以防止混叠。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T06:59:36.150

如果频率已知，那么您大概可以通过将适当频率的正弦波（即已知频率的两倍）添加到信号中来添加谐波。就像是：

```
result = signal .* sin((0:(1/sample_rate):length_of_signal) * freq)); 
```

当频率未知时，您可以使用 FFT（链接到文档的@L7ColWinters）来查找频率。由于您可以将信号从频域转换回时域（[ifft](http://www.mathworks.co.uk/help/techdoc/ref/ifft.html)为逆），因此执行 FFT、添加谐波然后执行逆 FFT 可能更容易，或者一旦您知道 FFT 的频率您可以像第一种情况一样将正弦波添加到原始输入中。

# ms-access - ms 访问数据透视列名称

> ID：10060904
> 
> 赞同：1
> 
> 时间：2012-04-08T06:39:27.553
> 
> 标签：ms-access

您好，我有一个 sql 语句，它在访问中创建一个交叉表，它工作得很好，但是我希望列的顺序不同。它们按字母顺序显示我希望它们根据不同字段的顺序显示。那我该怎么做；

PIVOT RoleTable.Role_Descr IN(SELECT Role_Descr From RoleNames order by displayorder);

我做了一些研究，发现在 IN 子句中我必须手动列出所有列名称。这个对吗

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T09:20:13.157

是的，您必须列出所有列，此外，如果您列出没有数据的列，它仍会显示在交叉表中，如果您错过列出有数据的列，它将不会包含在交叉表中.

# objective-c - iOS游戏模型变更通知设计

> ID：10060906
> 
> 赞同：2
> 
> 时间：2012-04-08T06:39:58.880
> 
> 标签：objective-c, model-view-controller, oop, cocos2d-iphone

我正在开发一款流氓游戏（iOS/Cocos2d）。我有一个类 Map 的对象，它有一堆 GameObjects。

我有 GameViewController 类。当模型中发生某些事情（生物被杀、玩家移动等）时，我需要通知 GameViewController 这个变化。怎么做？

我看到两个选项：

1.  GameViewController 实例可以是 Map 的委托和每个 GameObject 的委托。
2.  GameViewController 将监听来自 Map 和 GameObjects 的 NSNotifications。

哪种方式更好？为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-09T01:39:49.343

Cocos 是一个强基于单例的库，所以单例方法在 Cocos 游戏中相当普遍。然而，这并不意味着它是合乎逻辑的默认选择。

对于任何程序，您的第二种选择通常是一种更明智、更安全的方法，而不仅仅是 Cocos。NSNotifications 允许您从其他对象通知对象，而不会陷入在程序中传递大量引用或单例的潜在错误状态。如果您可以通过一些通知来实现您的目标，那么这就是您要走的路。

如果你发现你在极端程度上使用 NSNotifications，比如每秒多个通知，那么你应该考虑通过指针在对象之间传递引用，或者将父类或主 Cocos 场景类创建为单例。

请记住，当您涉及单例时，虽然它们很容易实现，但也很容易滥用它们。您不想养成让子类控制其兄弟姐妹的行为的习惯，因为它们可以轻松访问父类和父类的方法。

# php - 匹配字符串中的子字符串

> ID：10060908
> 
> 赞同：0
> 
> 时间：2012-04-08T06:40:04.917
> 
> 标签：php, substring

```
<?php
$a[0]["streamtitle"]= "SEM-VI";
$a[1]["streamtitle"]= "CE";
$a[2]["streamtitle"]= "B.E.";

$b[0]["streamtitle"] = "SEM-VI,CE,B.E.";
$b[1]["streamtitle"] = "SEM-VII,CE,B.E.";
$b[2]["streamtitle"] = "SEM-VIII,CE,B.E.";
$b[3]["streamtitle"] = "SEM-VI,EC,B.E.";
$b[4]["streamtitle"] = "SEM-VI,CE,B.E.";

$i=0;
for($i=0; $i<sizeof($b); $i++) {
    if (strstr($b[$i]["streamtitle"], $a[0]["streamtitle"]) && strstr($b[$i]["streamtitle"], $a[1]["streamtitle"]) && strstr($b[$i]["streamtitle"], $a[2]["streamtitle"]))
       print "found ".'</br>';
    else
       print "not found".'</br>';
} 
```

?>

大家好，我正在过滤数组 $b 中的值，它的值与 $a 相同。上面的代码在一段时间内运行良好，但在我给出 SEM-V 时失败。当我拿

```
$a[0]["streamtitle"]= "SEM-V";
$a[1]["streamtitle"]= "CE";
$a[2]["streamtitle"]= "B.E."; 
```

它匹配 $b 中的四个元素，因为每个字符串都包含“SEM-V”作为子字符串，CE、BE 也很常见，不管是 SEM-V、SEM-VI、SEM-VIII 等......

请建议我一些仅匹配“SEM-V”的想法....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:56:13.630

如果流标题的格式始终使用逗号作为分隔符，您可以匹配“SEM-V”而不是“SEM-V”。

其他选项包括分解流标题和检查不同部分。

```
$parts = explode(",", $b[1]["streamtitle"]);
if($parts[0] == $a[0]["streamtitle"]
   && $parts[1] == $a[1]["streamtitle"]
   && $parts[2] == $a[2]["streamtitle"])
{
   print "found<br />";
}
else print "not fond<br />"; 
```

# android-sdcard - 如何检查安卓手机内存中的正确文件？

> ID：10060909
> 
> 赞同：0
> 
> 时间：2012-04-08T06:40:18.737
> 
> 标签：android-sdcard, android-file

我需要一种下载图片并将其保存在 SD 卡中供以后使用的方法。我终于明白了，我只需要一个检查文件是否已经存在的操作。如果没有，该应用程序将下载它。如果它是 exitsts，我的图像视图将使用它。

所以我的问题很简单：

如何检查 SD 中的文件？

例如，如果我得到这个地方：

```
String imageInSD = "/sdcard/1.png"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:44:24.070

您可以使用以下代码

```
String sdcardState = android.os.Environment.getExternalStorageState();
String fileName = "yourfilename" + ".png";
if (sdcardState.contentEquals(android.os.Environment.MEDIA_MOUNTED))
  {
     String destPath = android.os.Environment.getExternalStorageDirectory().toString()+ File.separator +fileName;
     File output =new File(destPath);

     if(output.exists())
       \\it exists-use Imageview
      else
       \\Download the file accordingly
  }
else
  \\SDCARD not mounted 
```

# objective-c - CALayer 不呈现内容

> ID：10060912
> 
> 赞同：1
> 
> 时间：2012-04-08T06:41:03.183
> 
> 标签：objective-c, ios, cocoa-touch, calayer

这个难倒我。我有一个我在 a的方法`CALayer`中创建的，如下所示：`UIViewController``viewDidLoad`

```
- (void)viewDidLoad {

    [super viewDidLoad];

    UIImage* img = [UIImage imageNamed:@"foo.png"];

    _imageLayer = [[CALayer alloc] init];

    _imageLayer.bounds = CGRectMake( 0, 0, img.size.width, img.size.height);
    _imageLayer.position = CGPointMake( self.view.bounds.size.width/2.0, self.view.bounds.size.height/2.0 );

    _imageLayer.contents = (id)img.CGImage;
    _imageLayer.contentsScale = img.scale;

    [self.view.layer addSublayer:_imageLayer];
    [_imageLayer setNeedsDisplay];
} 
```

从`UIViewController`nib 加载并放入`UITabBarController`在代码中创建的 a 中。

我的问题是当它变得可见时`CALayer`它不会呈现它的`UIImage`内容。`UIViewController`我可以`CALayer`渲染的唯一方法`UIImage`是将其内容设置为可见`UIImage`之后`UIViewController`，例如在`viewDidAppear:`方法中。

我真的更愿意在方法中完成我的所有设置`viewDidLoad`（这不是它的用途吗？）。我如何获得`CALayer`渲染其内容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T07:10:08.803

您不需要`setNeedsDisplay`在图层或超级视图上使用它。

`setNeedsDisplay`告诉图层或视图它需要重绘其内容。（对于视图，它将调用`drawRect:`以获取新内容；对于 CALayer，它将询问其委托。）请注意，这仅影响视图或图层本身，而不影响其子级。

由于您直接为图层提供内容，因此您不希望 CA 丢弃该内容并要求替换。

# c# - 安全支持提供程序接口 (SSPI) 身份验证失败

> ID：10060917
> 
> 赞同：1
> 
> 时间：2012-04-08T06:43:04.620
> 
> 标签：c#, asp.net-mvc, web-services, web-config

我的网站调用网络服务。

网络配置：

```
<system.serviceModel>
    <bindings>
        <basicHttpBinding>
          <binding name="soap" closeTimeout="00:11:00" openTimeout="00:11:00"
receiveTimeout="00:10:00" sendTimeout="00:11:00" allowCookies="false"
bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
maxBufferSize="2097152" maxBufferPoolSize="2097152" maxReceivedMessageSize="2097152"
messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"
useDefaultWebProxy="true">
            <readerQuotas maxDepth="32" maxStringContentLength="2097152" maxArrayLength="2097152"
                maxBytesPerRead="2097152" maxNameTableCharCount="2097152" />
            <security mode="None">
              <transport clientCredentialType="None" proxyCredentialType="None"
                  realm="" />
              <message clientCredentialType="UserName" algorithmSuite="Default" />
            </security>
          </binding>  
          <binding name="SoapBinding" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00" allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard" maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536" messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered" useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384" maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="Transport">
                    <transport clientCredentialType="None" proxyCredentialType="None" realm="" />
                    <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
            </binding>
            <binding name="GetTemplateParamSoap" closeTimeout="00:01:00" openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
                        allowCookies="false" bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"  maxBufferSize="65536" maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
                        messageEncoding="Text" textEncoding="utf-8" transferMode="Buffered"  useDefaultWebProxy="true">
                <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                    maxBytesPerRead="4096" maxNameTableCharCount="16384" />
                <security mode="None">
                  <transport clientCredentialType="None" proxyCredentialType="None"
                      realm="" />
                  <message clientCredentialType="UserName" algorithmSuite="Default" />
                </security>
              </binding> 
        </basicHttpBinding>
        <customBinding>
            <binding name="SoapBinding" closeTimeout="00:30:00" openTimeout="00:30:00" receiveTimeout="00:30:00" sendTimeout="00:30:00">
                <security authenticationMode="UserNameOverTransport">
                    <secureConversationBootstrap />
                </security>
                <textMessageEncoding messageVersion="Soap11WSAddressingAugust2004" />
                <httpsTransport maxReceivedMessageSize="655360000" />
            </binding>
            <binding name="GetTemplateParamSoap">
            <textMessageEncoding maxReadPoolSize="64" maxWritePoolSize="16"
                messageVersion="Soap12" writeEncoding="utf-8">
              <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
                  maxBytesPerRead="4096" maxNameTableCharCount="16384" />
            </textMessageEncoding>
            <httpTransport manualAddressing="false" maxBufferPoolSize="524288"
                maxReceivedMessageSize="65536" allowCookies="false" authenticationScheme="Anonymous"
                bypassProxyOnLocal="false" hostNameComparisonMode="StrongWildcard"
                keepAliveEnabled="true" maxBufferSize="65536" proxyAuthenticationScheme="Anonymous"
                realm="" transferMode="Buffered" unsafeConnectionNtlmAuthentication="false"
                useDefaultWebProxy="true" />
          </binding>
        </customBinding>

        <wsHttpBinding>
    <binding name="WSHttpBinding_IBundlatorService" closeTimeout="00:01:00"
        openTimeout="00:01:00" receiveTimeout="00:10:00" sendTimeout="00:01:00"
        bypassProxyOnLocal="false" transactionFlow="false" hostNameComparisonMode="StrongWildcard"
        maxBufferPoolSize="524288" maxReceivedMessageSize="65536"
        messageEncoding="Text" textEncoding="utf-8" useDefaultWebProxy="true"
        allowCookies="false">
      <readerQuotas maxDepth="32" maxStringContentLength="8192" maxArrayLength="16384"
          maxBytesPerRead="4096" maxNameTableCharCount="16384" />
      <reliableSession ordered="true" inactivityTimeout="00:10:00"
          enabled="false" />
      <security mode="Message">
        <transport clientCredentialType="Windows" proxyCredentialType="None"
            realm="" />
        <message clientCredentialType="Windows" negotiateServiceCredential="true"
            algorithmSuite="Default" />
      </security>
    </binding>
  </wsHttpBinding>

    </bindings>
    <client>
      <endpoint address="http://upload.webapp.qasite-services.com/UploadService.svc/soap" binding="basicHttpBinding" bindingConfiguration="soap" contract="WebAppUploadService.IUploadService" name="soap" />  
      <endpoint address="https://webservice.s4.exacttarget.com/Service.asmx"
            binding="customBinding" bindingConfiguration="SoapBinding"
            contract="ExactTargetClient.Soap" name="Soap" />
        <endpoint address="http://accounts5.qasite.com/toolbar/ClientServices/TemplateParams.asmx" 
        binding="basicHttpBinding" bindingConfiguration="GetTemplateParamSoap" 
        contract="ServiceReference.GetTemplateParamSoap" name="GetTemplateParamSoap" />
              <endpoint address="http://qa-srv07.MyCompany-il.com:81/CPServices/BundlatorManagerService.svc"
binding="wsHttpBinding" bindingConfiguration="WSHttpBinding_IBundlatorService"
contract="BundlatorManagerService.IBundlatorService" name="WSHttpBinding_IBundlatorService">
    <identity>
      <servicePrincipalName value="host/QA-SRV07.MyCompany-IL.com" />
    </identity>
  </endpoint>
</client>
</system.serviceModel> 
```

但我收到以下错误：

```
Server Error in '/' Application.

Security Support Provider Interface (SSPI) authentication failed. The server may not be running in an account with identity 'host/QA-SRV07.Conduit-IL.com'. If the server is running in a service account (Network Service for example), specify the account's ServicePrincipalName as the identity in the EndpointAddress for the server. If the server is running in a user account, specify the account's UserPrincipalName as the identity in the EndpointAddress for the server.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.ComponentModel.Win32Exception: Security Support Provider Interface (SSPI) authentication failed. The server may not be running in an account with identity 'host/QA-SRV07.Conduit-IL.com'. If the server is running in a service account (Network Service for example), specify the account's ServicePrincipalName as the identity in the EndpointAddress for the server. If the server is running in a user account, specify the account's UserPrincipalName as the identity in the EndpointAddress for the server.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace: 

[Win32Exception (0x80004005): Security Support Provider Interface (SSPI) authentication failed. The server may not be running in an account with identity 'host/QA-SRV07.Conduit-IL.com'. If the server is running in a service account (Network Service for example), specify the account's ServicePrincipalName as the identity in the EndpointAddress for the server. If the server is running in a user account, specify the account's UserPrincipalName as the identity in the EndpointAddress for the server.]
   System.ServiceModel.Security.WindowsSspiNegotiation.GetOutgoingBlob(Byte[] incomingBlob, IExtendedProtectionSupport extendedProtectionSupport) +5902777
   System.ServiceModel.Security.SspiNegotiationTokenProvider.GetNextOutgoingMessageBody(Message incomingMessage, SspiNegotiationTokenProviderState sspiState) +1146
   System.ServiceModel.Security.IssuanceTokenProviderBase`1.GetNextOutgoingMessage(Message incomingMessage, T negotiationState) +83
   System.ServiceModel.Security.IssuanceTokenProviderBase`1.DoNegotiation(TimeSpan timeout) +431

[SecurityNegotiationException: SOAP security negotiation with 'http://qa-srv07.conduit-il.com:81/CPServices/BundlatorManagerService.svc' for target 'http://qa-srv07.conduit-il.com:81/CPServices/BundlatorManagerService.svc' failed. See inner exception for more details.]
   System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) +10257978
   System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) +539
   BrandToolbar.Manager.TrackingChannels.BundlatorManagerService.IBundlatorService.GetBundleItemsBySsoId(Guid ssoId) +0
   BrandToolbar.Manager.TrackingChannels.TrackingChannelsManager.GetAllBundlesForSsoId(Guid ssoId, IList`1& bundleItems) in d:\Conduit\RnD\Server\WebSites\Writers\Dev-Accounts-4.2-TC\Accounts\Managers\TrackingChannels\BrandToolbar.Manager.TrackingChannels\TrackingChannelsManager.cs:311
   BrandToolbar.Manager.TrackingChannels.TrackingChannelsManager.GetAllToolbarsAndBundlesForSsoId(Guid ssoId) in d:\Conduit\RnD\Server\WebSites\Writers\Dev-Accounts-4.2-TC\Accounts\Managers\TrackingChannels\BrandToolbar.Manager.TrackingChannels\TrackingChannelsManager.cs:141
   BrandToolbar.Account.Controllers.DistributionTools.TrackingChannelsController.Index() in d:\Conduit\RnD\Server\WebSites\Writers\Dev-Accounts-4.2-TC\Accounts\BrandToolbar.Account\Controllers\DistributionTools\TrackingChannelsController.cs:102
   lambda_method(ExecutionScope , ControllerBase , Object[] ) +30
   System.Web.Mvc.ReflectedActionDescriptor.Execute(ControllerContext controllerContext, IDictionary`2 parameters) +236
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethod(ControllerContext controllerContext, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +31
   System.Web.Mvc.<>c__DisplayClassd.<InvokeActionMethodWithFilters>b__a() +85
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodFilter(IActionFilter filter, ActionExecutingContext preContext, Func`1 continuation) +657347
   System.Web.Mvc.ControllerActionInvoker.InvokeActionMethodWithFilters(ControllerContext controllerContext, IList`1 filters, ActionDescriptor actionDescriptor, IDictionary`2 parameters) +288
   System.Web.Mvc.ControllerActionInvoker.InvokeAction(ControllerContext controllerContext, String actionName) +658084
   System.Web.Mvc.Controller.ExecuteCore() +125
   System.Web.Mvc.<>c__DisplayClass8.<BeginProcessRequest>b__4() +48
   System.Web.Mvc.Async.<>c__DisplayClass1.<MakeVoidDelegate>b__0() +21
   System.Web.Mvc.Async.<>c__DisplayClass8`1.<BeginSynchronous>b__7(IAsyncResult _) +15
   System.Web.Mvc.Async.WrappedAsyncResult`1.End() +85
   System.Web.Mvc.MvcHandler.EndProcessRequest(IAsyncResult asyncResult) +51
   System.Web.CallHandlerExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +454
   System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +263 
```

# servicestack - 如何使用 ServiceStack 发送命令？

> ID：10060919
> 
> 赞同：2
> 
> 时间：2012-04-08T06:43:11.017
> 
> 标签：servicestack

我刚刚进入 REST 和 ServiceStack，现在我的 GET 正在返回可能是 XML 或 Json 的字符串。

我现在需要处理更改我的域模型的 PUT 或 POST 命令。

对于单个资源，我可以在我的域模型上有许多命令（即对于客户资源，我可以更改名称、更改地址、更改帐单地址等）。对域模型的每次更改将仅包含这些更改中的一项（不是全部）。

使用 ServiceStack，我是否可以创建一个 DTO，其中包含一个标志/枚举来指示更改是什么？这意味着我有一个带有 case 语句的 REST 服务来指示我应该在域上做什么。这也意味着我有一个非常大的 DTO 对象，其中包含需要发布以更改我的域的数据（其中很多属性将为空）。

或者我是否创建了很多 DTO 和 REST 服务，每个服务都特定于我的模型上的更改？在这种情况下，我需要将 ?Command=changeAddress 添加到 URL 吗？不确定这是否正确。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-09T14:45:20.050

> 这也意味着我有一个非常大的 DTO 对象，其中包含需要发布以更改我的域的数据（其中很多属性将为空）。

具有空属性的非常大的 DTO 对象不是性能问题，因为 ServiceStack 的文本序列化程序（即 JSON/JSV）仅发出非空值的数据，并且不会花时间反序列化有效负载中没有的内容 - 所以它应该从性能的角度来看，这不是一个问题。

除了要求为每个 REST 服务动词使用相同的请求 DTO 之外，没有关于如何设计服务的“ServiceStack 方式”，并且 ServiceStack 不会强制采用设计风格。

如果您想更喜欢 REST-ful 设计，您可以将您的客户拆分为可单独修改的可管理实体，例如更改客户帐单地址，我会执行以下操作：

```
PUT /customers/address/billing
{
    "Line1": "123 Street",
    "City": "Brooklyn",
    "State": "NY"
} 
```

并有一个单独的 REST 服务来管理客户地址，例如：

```
Register<CustomerAddress>("/customers/address/{AddressType}"); 
```

# android - android.os.NetworkOnMainThreadException 在一个单独的进程中的服务

> ID：10060924
> 
> 赞同：5
> 
> 时间：2012-04-08T06:44:26.913
> 
> 标签：android, networkonmainthread

在 ICS 上，我在使用 UrlConnection 时遇到 android.os.NetworkOnMainThreadException 错误 - 即使我在运行在它自己的进程上的服务中发出此请求，并且被异步调用以通过 Messenger 完成。

更改 StrictPolicy 没有效果，我仍然得到错误。

我能做些什么？

编辑：此服务在单独的进程中运行 - 具有不同的 pid 和所有内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T07:06:43.123

根据[文档](http://developer.android.com/reference/android/app/Service.html)，服务仍然在主线程上运行：

> 请注意，服务与其他应用程序对象一样，在其托管进程的主线程中运行。这意味着，如果您的服务要执行任何 CPU 密集型（例如 MP3 播放）或阻塞（例如网络）操作，它应该生成自己的线程来完成这项工作。更多信息可以在进程和线程中找到。IntentService 类可作为 Service 的标准实现使用，它有自己的线程来安排要完成的工作。

因此，对于长时间运行的任务（例如使用 UrlConnection），您应该使用[IntentService 之](http://developer.android.com/reference/android/app/IntentService.html)类的东西或自己生成一个新线程。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:14:28.670

在那里做网络的东西`Thread`。抛出此异常是为了防止一些问题，例如 UI 冻结（由于网络作业，这可能需要一些时间。）

# linux - 关于 apache 文件的权限

> ID：10060929
> 
> 赞同：0
> 
> 时间：2012-04-08T06:44:59.403
> 
> 标签：linux, apache, permissions

关于 Apache 的许可，我有一个非常奇怪的问题。当我将目录或文件复制到 /var/www/html 并从浏览器访问它时，它说我没有权限。但是当我创建一个名称、路径、所有者、组和权限完全相同的新目录或文件时，我可以从浏览器访问它。

该文件的所有者是root，它的权限是-rw-r--r--。我曾经尝试过一些更开放的权限，但也不起作用。

顺便说一下，我的系统是centos 6.0。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-10T18:05:22.590

检查 apache 配置文件中的目录设置。您可以在这里查看详细信息；[http://httpd.apache.org/docs/current/mod/core.html#directory](http://httpd.apache.org/docs/current/mod/core.html#directory)

# javascript - jquery自动完成使用'@'

> ID：10060931
> 
> 赞同：1
> 
> 时间：2012-04-08T06:45:38.690
> 
> 标签：javascript, jquery, jquery-ui, jquery-plugins

不过，我想使用 jQuery UI Autocomplete来实现这种[输出（提琴手演示）。](http://jsfiddle.net/peterwateber/gucPn/12/)

我的示例的唯一问题是箭头键事件中存在与 jquery Autocomplete 不同的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T19:37:17.513

我写了这个问题中提到的小部件并解决了这个问题：

[http://www.hawkee.com/snippet/9391/](http://www.hawkee.com/snippet/9391/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T07:26:38.150

在这里工作演示：http: [//jsfiddle.net/cH4p4/](http://jsfiddle.net/cH4p4/) **&&** [http://jsfiddle.net/LxpQQ/](http://jsfiddle.net/LxpQQ/)

就像您提到的使用自动完成功能：

> “所以我的 textarea 输出将是“@c#”，输入标签输出将是“@[c#]”

**HTML**

```
<textarea id='inputbox' placeholder='When @mentions is called its output is put on the input box as well as updated when textarea is blur and submitted'></textarea>
<br/>
<input id="tags" />
<span id="loading" class="hidden">Loading...</span>
​ 
```

**jQuery代码**

```
function split(val) {
    return val.split(/@\s*/);
}

function extractLast(term) {
    return split(term).pop();
}

function getTags(term, callback) {
    $.ajax({
        url: "http://api.stackoverflow.com/1.1/tags",
        data: {
            filter: term,
            pagesize: 5
        },
        type: "POST",
        success: callback,
        jsonp: "jsonp",
        dataType: "jsonp"
    });    
}

$(document).ready(function() {

    $("#inputbox")
    // don't navigate away from the field on tab when selecting an item
    .bind("keydown", function(event) {
        if (event.keyCode === $.ui.keyCode.TAB && $(this).data("autocomplete").menu.active) {

            event.preventDefault();
        }
    }).autocomplete({
        source: function(request, response) {
            if (request.term.indexOf("@") >= 0) {
                $("#loading").show();
                getTags(extractLast(request.term), function(data) {
                    response($.map(data.tags, function(el) {
                        return {
                            value: el.name,
                            count: el.count
                        }
                    }));
                    $("#loading").hide();                    
                });
            }
        },
        focus: function() {
            // prevent value inserted on focus
            return false;
        },
        select: function(event, ui) {
            var terms = split(this.value);
            // remove the current input
            terms.pop();
            // add the selected item
            $("#tags").val("@["+ui.item.value+"]");
            ui.item.value = "@" + ui.item.value;                
            terms.push(ui.item.value);
            // add placeholder to get the comma-and-space at the end
            terms.push("");
            this.value = terms.join("");
            return false;
        }
    }).data("autocomplete")._renderItem = function(ul, item) {
        return $("<li>")
            .data("item.autocomplete", item)
            .append("<a>@[" + item.label + "]&nbsp;<span class='count'>(" + item.count + ")</span></a>")
            .appendTo(ul);
    };
});​ 
```

**CSS**

```
span.count { 
    font-style: italic; 
    color: #C0C0C0;
}
.hidden { display: none; }

textarea { width: 300px; height: 100px; resize: none; }
​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-05T22:10:56.893

你可以试试下面我们刚刚在GitHub开源的jquery插件：[https ://github.com/tactivos/jquery-sew](https://github.com/tactivos/jquery-sew)

# c# - 从类型类列表访问字符串参数数据

> ID：10060932
> 
> 赞同：1
> 
> 时间：2012-04-08T06:45:44.333
> 
> 标签：c#, list, class, subclass, custom-data-type

我目前有一个自定义类型列表

```
Eg: List<CustomDataType> myList = new List<CustomDataType>(); 
```

它的数据类型是一个类。存储在列表中的每个类都包含子类，这些子类包括额外的重载参数以及基类参数。

```
Eg(general form): CustomDataType listItem = new Subclass(data1, data2, data3, overloadedData1, overloadedData2) etc...
myList.Add(listItem); 
```

创建后，我需要从列表中获取每个元素的数据并将其保存为文本文件中的字符串为此我设置了一个 foreach 循环

```
foreach (CustomDataType listNum in myList)
    {
       //Code to extract data goes here here

       //Should have all of the class data in a string to be ready for writing
       txtFile.WriteLine(theDataFromClass)

    }

txtFile.Close(); 
```

我还需要将列表元素内的所有数据转换为字符串，以便可以将其正确地写在文件中。

如果有什么不清楚的地方，我很乐意提供源代码，尽管这次我想以一般格式重写它

PS确实有数据被正确分配。我的问题是关于能够访问这些数据。

我希望一切都清楚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T06:49:20.067

> 我还需要将列表元素内的所有数据转换为字符串，以便可以将其正确地写在文件中。

所以你需要编写一个方法来做到这一点。将事物转换为字符串的方法有很多种——您需要编写代码来完成它，很可能在`CustomDataType`. 您可以覆盖`ToString`或创建另一个在子类中覆盖的虚拟方法。请注意，如果您希望能够解析结果，则可能需要考虑转义数据的某些元素。

如果您*只*使用文本文件来序列化和反序列化数据，您可能需要考虑使用 XML 序列化或 JSON 序列化，而不是手动执行。

（小提示：我认为您的意思是各种类包含*字段*或*属性*- 只有*方法*或索引器声明参数。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T10:32:15.453

最基本的解决方案是覆盖 ToString()`CustomDataType`并生成某种对您有用的格式化输出：

```
public override string ToString()
{
  return string.Format(
    "{0}, {1}, {2}",
    this.data1,
    this.data2,
    this.data3);
} 
```

在派生类型中，您还重写 ToString() 以提供任何附加输出，并调用基类以包含这些值：

```
public override string ToString()
{
  return string.Format(
    "{0}, {1}, {2}",
    base.ToString(),
    this.derivedData1,
    this.derivedData2);
} 
```

现在，您的输出循环应该像这样工作：

```
foreach (CustomDataType listNum in myList)
{
    txtFile.WriteLine(listNum.ToString());
} 
```

# c++ - 在 LLVM 下的 Makefile 中通过 LDFLAGS 加载 zlib 的正确方法是什么？

> ID：10060938
> 
> 赞同：3
> 
> 时间：2012-04-08T06:47:24.817
> 
> 标签：c++, ios, makefile

我的 CFLAGS 有

```
-I../../usr/local/sys/usr/include 
```

正确加载 zlib.h

LDFLAGS 是

```
LDFLAGS = -L../../usr/local/sys/usr/lib -lxml2 -lzlib 
```

但是当链接器尝试链接以下发生时

```
1>   + Linking project files...
1>  ld: library not found for -lzlib
1>  collect2: ld returned 1 exit status
1>  make: *** [link] Error 1 
```

可能是什么问题呢？

环境是windows7下的iosdevenv（所以目录结构和mac os上的不一样）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-09T03:47:00.500

解决方案是使用 -lz 标志而不是 -lzlib。

测试，项目链接。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T06:52:55.607

`libz.dylib`位于 iPhone SDK 的 /usr/lib 中。

找出正确的路径`libz.dylib`，然后更改您的“ `-L`”路径`LDFLAGS`以匹配它。

在我的机器上是`/Application/Xcode.app/Contents/Developer/Platforms/iPhoneOS.platform/Developer/SDKs/iPhoneOS5.1.sdk/usr/lib/libz.dylib`

# ruby - Perl：如何模拟 Ruby 的“包含/扩展”机制？

> ID：10060939
> 
> 赞同：2
> 
> 时间：2012-04-08T06:47:28.033
> 
> 标签：ruby, perl, include, extend, emulation

如何在我的 Perl 代码中模拟 Ruby 的“包含”/“扩展”机制？

让我们以 Ruby 中的以下代码为例：

```
module ActiveRecord
  class Base

    class << self
      #...
    end

    #...
  end

  Base.class_eval do
    include ActiveRecord::Persistence
    extend ActiveModel::Naming
    extend QueryCache::ClassMethods
    extend ActiveSupport::Benchmarkable
    extend ActiveSupport::DescendantsTracker

    include ActiveModel::Conversion
    include Validations
    extend CounterCache
    include Locking::Optimistic, Locking::Pessimistic
    include AttributeMethods
    ...
  end
end 
```

这导致我问这个问题，因为在几天的研究中我找不到任何明确的想法。那么，也许存在一些在 Perl 中组织它的好方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-08T07:54:53.120

这看起来像*traits/mixins*与*继承*，两者都是在运行时完成的。

特征/混合部分被称为角色的 Perl6 概念所涵盖。

如何在 Perl 5 中实现？看看[Moose](http://moose.iinteractive.com/)就知道了（另请参阅 Moose 的[perldoc](http://search.cpan.org/perldoc?Moose)）

我相信它开始是作为面向 Perl 6 的 OO/元语言支持特性的试验场，但在 Perl 5 中。现在它已经有了自己的生命，许多 CPAN 包都依赖于 Moose。

Moose 实现了多种面向对象的语言结构（来自几个不同的 OO 范例），并且具有很强的可扩展性。

Moose 中的概念以及它们如何映射到其他语言的结构的解释可以在[Moose 手册的概念部分找到](http://search.cpan.org/perldoc?Moose%3a%3aManual%3a%3aConcepts)

此外，CPAN 上的`Moose`和`MooseX`命名空间充满了免费的（或实验性的）包，以增加对更多 OO 结构的支持。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-08T14:02:13.190

这是一个小例子：

```
#!/usr/bin/env perl

use 5.014;

package My::Quoted {
    use Role::Tiny;
    sub quoted_name {
        my $self = shift;
        return sprintf q{"%s"}, $self->name;
    }
}

package My::One {
    use Moo;
    has name => (is => 'ro');

    sub greet {
        my $self = shift;
        return sprintf 'Hello %s', $self->name;
    }
}

package My::Two {
    use Moo;

    extends 'My::One';
    with 'My::Quoted';

    sub greet {
        my $self = shift;
        return sprintf 'Merhaba %s', $self->quoted_name;
    }
}

package main {
    run('Perl');
    sub run {
        my $name = shift;

        my $x = My::Two->new({name => $name});
        my $y = My::One->new({name => $name});

        say $_->greet for $x, $y;
    }
} 
```

输出：

```
梅尔哈巴“Perl”
你好 Perl
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-19T14:40:32.853

*将此代码直译*为Perl/Moose 会（有点）如下所示：

```
package ActiveRecord::Base;
use Moose;
use namespace::autoclean;

with qw(
    ActiveRecord::Persistence
    ActiveModel::Naming
    QueryCache::ClassMethods
    ActiveSupport::Benchmarkable
    ActiveSupport::DescendantsTracker
    ActiveModel::Conversion
    Validations
    CounterCache
    Locking::Optimistic
    Locking::Pessimistic
    AttributeMethods
);

__PACKAGE__->meta->make_immutable;
1; 
```

上面使用了相当于 Ruby 的 mixin 的[Moose Roles 。](https://metacpan.org/module/Moose%3a%3aRole)

在 Ruby`include`中用于混合实例方法，而`extend`用于类混合。在 Perl 中，所有方法都可以由类或实例调用，因此使用`with`.

# asp.net-mvc - asp.net mvc dataannotions 附加属性

> ID：10060940
> 
> 赞同：1
> 
> 时间：2012-04-08T06:47:35.303
> 
> 标签：asp.net-mvc, data-annotations

在这种情况下，我试图将一个属性附加到特定属性，但问题出在此代码中，它也附加到了生日日期时间属性。这可能是什么问题

```
 public class CustomMetadataValidationProvider : DataAnnotationsModelValidatorProvider
{
    protected override IEnumerable<ModelValidator> GetValidators(ModelMetadata metadata, ControllerContext context, IEnumerable<Attribute> attributes)
    {
        if ( metadata.PropertyName == "FirstName")
            attributes = new List<Attribute>() { new RequiredAttribute() };

        return base.GetValidators(metadata, context, attributes);
    }
}

public class User
{
    public int UserId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime Birthday { get; set; }
}

 protected void Application_Start()
    {

        //ModelValidatorProviders.Providers.Clear();
        //ModelValidatorProviders.Providers.Add(new CustomMetadataValidationProvider()); 
        ModelValidatorProviders.Providers.Add(new CustomMetadataValidationProvider());
        AreaRegistration.RegisterAllAreas();

        RegisterRoutes(RouteTable.Routes);
    } 
```

有人可以解释 GetValidators 是如何工作的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T06:54:46.043

`GetValidators`您的问题与您的方法无关。

默认情况下需要像 ( `int, decimal, DateTime, etc.`) 这样的值类型。因为否则模型绑定器无法设置它们的值，如果它们没有随请求一起发送。

因此，`Birtday`如果您不想被要求，则需要将您的属性更改为可为空：

```
public class User
{
    public int UserId { get; set; }
    public string FirstName { get; set; }
    public string LastName { get; set; }
    public DateTime? Birthday { get; set; }
} 
```

# ruby - 在需要匹配大量 * 和 / 的 ruby 中使用正则表达式

> ID：10060943
> 
> 赞同：0
> 
> 时间：2012-04-08T06:48:04.517
> 
> 标签：ruby, regex

我需要使用 reg-exes 查找带有 * 和 / 的字符串，我正在用 Ruby 编写。需要找到很多 * 和 / 的原因是我正在为一种语言构建一个标记器，并且有多行注释使用 C 风格的多行注释 (/* */)。我已经处理了单行注释。

有没有一种方法可以使用 reg-ex 而不必使用两个前言斜杠来表示一些正则表达式，因为我发现由于大量的转义而无法找到我的错误。或者有人可以就如何在理智的情况下处理逃逸问题给我建议？我已经尝试过先编写序列然后转义它。

感谢您的时间和建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:07:19.537

一个可能有帮助的技巧是`%r`文字：

```
%r{http://www\.google\.com} 
```

当管道不在正则表达式中时，我喜欢自己使用管道。

```
%r|http://www\.google\.com| 
```

您还可以通过创建 Regexp 的新实例`Regexp.new`并传递一个字符串。

最后，您还可以[查看`Regexp.quote`](http://www.ruby-doc.org/core-1.9.3/Regexp.html#method-c-quote)：

> 转义任何在正则表达式中具有特殊含义的字符。返回一个新的转义字符串，如果没有转义字符，则返回 self。对于任何字符串，`Regexp.new(Regexp.escape(str))=~str`都将是真的。

# android - 如何知道我的 Android 上哪个应用有病毒？

> ID：10060945
> 
> 赞同：0
> 
> 时间：2012-04-08T06:48:57.330
> 
> 标签：android

我刚刚收到一条推送通知，要从 maeu.net 下载一些“ICQ 客户端”，但不知道一种简单的方法来获取收到它的错误应用程序的包名称，我该如何不以编程方式做到这一点？pid 在日志中：

```
I/ActivityManager( 2695): Starting: Intent { act=android.intent.action.VIEW cat=[android.intent.category.BROWSABLE] dat=http://maeu.net/jimm/3220/jimm.apk cmp=com.android.browser/.BrowserActivity } from pid 6434 
```

我认为 FLV Player 已写在通知上，但单击它后，我无法再次找到它以验证这一点。我下载了终端模拟器，但`ps`再也看不到那个过程了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:19:48.267

最近我也看到了这样的东西，立刻被吓到了。某些应用程序具有某些在应用程序内运行的“广告”，可以向您发送通知或创建快捷方式。

因此，我确保我有一个好的“防病毒”，例如：

```
https://play.google.com/store/apps/details?id=com.lookout
https://play.google.com/store/apps/details?id=com.symantec.mobilesecurity 
```

我倾向于使用这两个应用程序，因为在涉及在线数据安全时，我对安全性感到偏执:)

此外，您还需要能够扫描和搜索带有“广告”的其他应用的应用，例如：

```
https://play.google.com/store/apps/details?id=com.denper.addonsdetector
https://play.google.com/store/apps/details?id=com.brosmike.airpushdetector
https://play.google.com/store/apps/details?id=com.lookout.addetector 
```

这些应用程序将快速找到您手机上可以通过“广告”执行“某些”事情的应用程序，例如特殊权限。

找到可能导致问题的应用程序后，只需将其卸载即可！

请让我知道这可不可以帮你！

# image - 同一图像中的多作物

> ID：10060948
> 
> 赞同：0
> 
> 时间：2012-04-08T06:49:26.437
> 
> 标签：image, image-processing, opencv

我有一张图片，里面有 6 张图片。我的任务是从这张图片中裁剪出 6 张图片。

目前我遵循这个程序..
1\. 保存原始图像的副本
2\. 使用任何工具（Picasa）裁剪图像以获得第一张图像
3\. 将裁剪后的图像另存为图像 1
4\. 打开原始图像以裁剪图像 2
5.重复此操作 6 次

有没有一种方法可以一次性提取出所有 6 张图像？多作物？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-09T12:58:01.270

是的，这是可能的。您需要熟悉 ROI [（感兴趣区域）](http://nashruddin.com/OpenCV_Region_of_Interest_%28ROI%29)概念。

[这个**C**示例](http://areshopencv.blogspot.com.br/2010/12/region-of-interest-selection-roi.html)显示了如何在图像中设置 ROI。基本上，它在相机的帧中设置 ROI，从中创建新图像，在图像中进行一些处理（反转颜色），然后将图像复制回原始帧以进行显示。

[这个**Python**示例](https://stackoverflow.com/a/10055843/176769)还展示了如何使用 ROI。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-27T23:03:02.823

从 OP 的描述来看，听起来 OP 只是想以自动化的方式将图像裁剪成 6 块。

Google 搜索“irfanview 批量裁剪”或“ImageMagick 批量裁剪”

如果需要更复杂的裁剪逻辑/过程，则 OP 选择的语言的 gfx 库应该具有他们可以编码的裁剪功能。

对于这项任务，OpenCV 将是多余的。

如果 OP 坚持使用 OpenCV，则设置 ROI

Mat image = imread("src_image_path"); 矩形 roi = 矩形 (x, y, w, h); Mat image_roi = image(roi);

imwrite("dest_image_path", image_roi);

# c# - ASP.net 通过检查 Session 在 masterpage 中显示 LoginStatus

> ID：10060949
> 
> 赞同：0
> 
> 时间：2012-04-08T06:49:41.380
> 
> 标签：c#, asp.net, logging, session-state

我只想将`LogIn Status`文本放在我的 ASP 母版页中。当用户未登录时，它将显示`LogIn`，如果用户已经登录`logged In`，它将显示`LogOut`。一旦用户点击`logOut`，会话将被清除。

```
<asp:LoginView ID="LoginView1" runat="server" onviewchanged="LoginView1_ViewChanged">
       <AnonymousTemplate>
              <asp:LoginStatus ID="LoginStatus1" runat="server" LoginText="logIn" />
       </AnonymousTemplate>
       <LoggedInTemplate>
              <asp:LoginStatus ID="LoginStatus2" runat="server" LogoutText="loggedout"  />
       </LoggedInTemplate>
</asp:LoginView> 
```

我`using System.Web.SessionState;`用来管理会话。我可以使用下面的代码检查用户是否登录。

```
If (Session["logged"] == true) 
```

请帮助我根据当前会话状态动态地在母版页中显示`LogIn`或`logOut`状态。先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T07:02:37.993

`LoginView`控制使用当前请求的身份来确定他们是否已登录，以及主体的角色成员资格，如果您使用可以为不同角色显示不同模板的功能。因此，您将无法使用`LoginView`. 与`LoginStatus`.

你可以滚动你自己版本的这些控件来做你想做的事情，或者尝试从这些控件中派生出你自己的控件，并简单地覆盖它确定你是否登录的部分。

或者，您可以在母版页中放置类似的内容。

```
<% if (Session["logged"] is bool && (bool)Session["logged"]) {%>
 Logged in
%> } else { %>
 Logged out
<% } %> 
```

但是，我建议您仅依靠请求的身份来确定用户是否已登录。A）它是内置的，完全受支持，您无需做任何额外的事情 B）会话不持久. 您可以通过访问该`User.Identity.IsAuthenticated`属性在页面、控件等中访问请求的用户。

# php - php select语句没有给出答案

> ID：10060950
> 
> 赞同：1
> 
> 时间：2012-04-08T06:49:45.327
> 
> 标签：php, mysql

我使用了教程中的 php 代码，它运行良好。但是当我将它重写给我时，它给了我空值。这段代码给了我想要的东西，我的意思是它以 JSON 格式提供数据：

```
$q=mysql_query("SELECT * FROM people WHERE birthyear>'".$_REQUEST['year']."'");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output)); 
```

但是这段代码即使看起来完全一样也不起作用，它给出了 null：

```
$q=mysql_query("SELECT username, firstname, lastname, email, phone1, skype, city, description 
FROM mdl_user WHERE username LIKE'".$_REQUEST['usern']."'");
while($e=mysql_fetch_assoc($q))
    $output[]=$e;
print(json_encode($output)); 
```

如果我不使用 $_REQUEST['usern'] 并以 JSON 格式获取数据。但我需要使用 request 来搜索特定数据。那么问题可能出在哪里。因为我完全不明白。在我看来是一样的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T06:57:35.920

`LIKE`使用`%`. _ 把它放在周围或任何一端，开始或结束。

```
$username = mysql_real_escape_string($_REQUEST['usern']);

$q=mysql_query("SELECT username, firstname, lastname, email, phone1, skype, city, description 
FROM mdl_user WHERE username LIKE '$username%'");
                                 ^
                                 |
 // You also missed this space --+ 
```

**请注意**，您的查询对 SQL 注入开放。想想如果有人将年份插入为`'; drop table people; --`. 使用[mysql_real_escape_string](http://php.net/mysql_real_escape_string)清理这些字段。

![在此处输入图像描述](../Images/d58947df8656ab479517cbc39c2d873e.png)

最好明确使用 $_POST 或 $_GET，这样可以确保您的数据来自正确的来源。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:00:18.117

您可以在`LIKE`模式中使用以下两个通配符。

```
%   Matches any number of characters, even zero characters
_   Matches exactly one character 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-04-08T06:54:00.910

我假设您没有得到任何结果，因为您的用户名与 $_REQUEST['usern'] 不完全相同，这就是您首先使用 LIKE 的原因。因此，您应该放置通配符来告诉 MySQL 在您的字符串之前或之后查找任何字符 (%)，例如：

```
LIKE '%".$_REQUEST['usern']."%' 
```

请记住，这是低效的，您应该尝试在字符串后仅使用 % （如果这对您有用），或者更好的是，找到另一种搜索表格的方法。

编辑：同样作为评论中的用户，我没有提到，这个特定的代码容易受到 SQL 注入的攻击。您应该在将变量 $_REQUEST['usern'] 传递给查询之前对其进行清理。

# php - NetBeans IDE 中 PyroCMS 的自动完成功能

> ID：10060952
> 
> 赞同：-1
> 
> 时间：2012-04-08T06:50:09.650
> 
> 标签：php, codeigniter, netbeans, autocomplete, pyrocms

我通过在 nbproject 文件夹中创建一个类似这样的文件，在 NetBeans IDE 中为 Codeigniter 框架完成了自动完成...

```
<?
/**
* @property CI_Loader $load
* @property CI_Form_validation $form_validation
* @property CI_Input $input
* @property CI_Email $email
* @property CI_DB_active_record $db
* @property CI_DB_forge $dbforge
* @property CI_Table $table
* @property CI_Session $session
* @property CI_FTP $ftp
* ....
*/
Class Controller {
}
?> 
```

但是现在我正在使用 PyroCMS，我是否也可以在 NetBeans IDE 中为 PyroCMS 使用自动完成功能？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-26T04:07:18.457

转到`File`> `Project Properties`：选择`PHP Include Path`然后`Add Folder`添加包含该文件夹的相应文件`system`夹。

![在此处输入图像描述](../Images/9c5461cad050c86a76afaf0f13b69f78.png)

# slf4j - slf4j 登录单独的文件

> ID：10060956
> 
> 赞同：1
> 
> 时间：2012-04-08T06:50:42.343
> 
> 标签：slf4j

在我们正在工作的spring mvc应用程序中，有很多模块，每个模块都有不同的子模块，我想要模块明智的日志记录，slf4j可以做到吗，我们怎么能做到这一点，例如：= A是控制器类，然后B委托层，C服务层，D dao实现层，对于单个模块。我们使用的是spring的jdbc模板，如何在日志中获取查询执行。

请帮我详细的例子。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-11T06:45:19.620

slj4f 是日志 API，本身不是框架。您需要配置您选择执行此操作的日志记录框架。

如果您使用 logback，请查看 SiftingAppender。 [http://logback.qos.ch/manual/appenders.html#SiftingAppender](http://logback.qos.ch/manual/appenders.html#SiftingAppender)

# matlab - 将 GPUArray 传递给 feval

> ID：10060963
> 
> 赞同：1
> 
> 时间：2012-04-08T06:53:02.253
> 
> 标签：matlab, cuda, gpgpu, gpu

我有以下内核

```
__global__ void func( float * arr, int N ) {

     int rtid = blockDim.x * blockIdx.x + threadIdx.x;

     if( rtid < N )
    {
        float* row = (float*)((char*)arr + rtid*N*sizeof(float) ); 
        for (int c = 1; c < N; ++c) 
        { 
            //Manipulation
        } 
    } 

} 
```

当我使用 MATLAB 从 MATLAB 调用内核时

```
gtm= parallel.gpu.GPUArray(ones(a,b,'double')); 
OR gtm= parallel.gpu.GPUArray(ones(1,b,'double'));

gtm=k.feval(gtm,b); 
```

它给出了以下错误：

```
Error using ==> feval
parallel.gpu.GPUArray must match the exact input type as specified on the kernel
prototype.

Error in ==> sameInit at 65 gtm=k.feval(gtm,b); 
```

有人可以告诉我我哪里出错了。

感谢您，

维哈里 PL V.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-12T04:41:31.313

在 MATLAB 中创建的内核对象“k”具有以下结构：

```
 MaxNumLHSArguments: 1
 NumRHSArguments: 2
 ArgumentTypes: {'inout single'  'in int32 scalar'} 
```

使用上面提到的 CUDA 内核原型，即

```
__global__ void func( float * arr, int N ) 
```

因此，出现了不匹配错误。我们需要将 CUDA 内核的原型更改为

```
__global__ void func( double * arr, int N ) 
```

或创建具有“单一”类型的 MATLAB 数组。

```
gtm= parallel.gpu.GPUArray(ones(a,b,'single')); 
```

# objective-c - 将对象添加到自定义可重用单元格

> ID：10060964
> 
> 赞同：1
> 
> 时间：2012-04-08T06:53:02.677
> 
> 标签：objective-c, xcode, cocoa-touch, uitableview

我确实有这个工作，但我想知道为什么我认为应该工作的方法不起作用。我有一个带有 uitableviewcell 和 WirelessCell.h/.m 的 .xib 作为类。我想向单元格添加一个名为 ADVPercentProgressBar 的对象。我的 cellForRowAtIndexPath 看起来像这样：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    int section = indexPath.section;
    int row = indexPath.row;

    if (section == 6) {
        // Make dynamic rows cell
        static NSString *CellIdentifier = @"wireless3";
        WirelessCell *cell = (WirelessCell *)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (!cell) {
            NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"WirelessCell" owner:nil options:nil];
            cell = [topLevelObjects objectAtIndex:0];
            cell.progressBar = [[ADVPercentProgressBar alloc] initWithFrame:CGRectMake(10, 22, 300, 28) andProgressBarColor:ADVProgressBarBlue];
            [cell addSubview:cell.progressBar];
        }

        // Set labels here
        NSDictionary *tmpDict = [[[DataSingleton sharedSingleton] sharedWirelessClients] objectAtIndex:row];
        cell.labelUptime.text = [tmpDict objectForKey:@"uptime"];
        [cell.progressBar setProgress:[[tmpDict objectForKey:@"signal"] intValue]*0.001];

        return cell;

    } else {
        return [super tableView:tableView cellForRowAtIndexPath:indexPath];
    }

} 
```

在单元格初始化期间添加 ADVPercentProgressBar 可以正常工作，但我认为我可以将 ADVPercentProgressBar 放在单元格 initWithStyle 中，如下所示：

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
    self = [super initWithStyle:style reuseIdentifier:reuseIdentifier];
    if (self) {
        // Initialization code
        progressBar = [[ADVPercentProgressBar alloc] initWithFrame:CGRectMake(10, 22, 300, 28) andProgressBarColor:ADVProgressBarBlue];
        [self.contentView addSubview:progressBar];

    } 
```

而不是在 ViewController 单元初始化中。但这不起作用。我只是想知道为什么，因为在我看来将对象添加到单元类初始化中似乎是合乎逻辑的。回归自我；}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-08T14:27:10.167

如果您从 Xib 加载单元格，则不会调用 init 方法 use [`awakeFromNib`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSNibAwaking_Protocol/Reference/Reference.html)。同样，所有对象都被实例化并设置了任何出口。

# linux - Vala中是否有某种相当于.NET的BackgroundWorker？

> ID：10060965
> 
> 赞同：1
> 
> 时间：2012-04-08T06:53:09.240
> 
> 标签：linux, multithreading, gtk, vala

我正在尝试学习 Vala，所以我正在制作一个小型 GUI 应用程序。我之前的主要语言是 C#，所以一切进展顺利。

但是，我现在已经碰壁了。我需要连接到不会立即回答我的客户的外部网络服务器（使用 GIO）。这会使 GUI 在程序连接并执行其操作时冻结。

在 C# 中，在这种情况下我可能会使用 BackgroundWorker。不过，我似乎无法为 Vala 找到类似的东西。

基本上，我有一个 MainWindow.vala，我在其中将用于单击某个按钮的信号连接到创建 ProcessingDialog.vala 的新实例的方法。这在 MainWindow 上显示了一个对话框，我希望用户在程序执行工作（连接到服务器、通信）时看到该对话框。

我有哪些替代方案可以使这种情况发挥作用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T08:34:28.263

GIO 提供异步方法，例如查看异步客户端：[https ://live.gnome.org/Vala/GIONetworkingSample](https://live.gnome.org/Vala/GIONetworkingSample)

如果您不了解 Vala 中的异步方法，请尝试查看教程：[https ://live.gnome.org/Vala/Tutorial#Asynchronous_Methods](https://live.gnome.org/Vala/Tutorial#Asynchronous_Methods)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-26T22:41:26.637

上面 lethalman 的回答可能是最有意义的，如果您正在进行网络通话，异步请求确实是您最好的选择。在其他情况下，您可以使用 Vala 的内置[线程支持](http://live.gnome.org/Vala/ThreadingSamples)来完成后台任务。看起来很快就会有更好的库可用，但这是稳定的。

```
// Create the function to perform the task
public void thread_function() {
    stdout.printf("I am doing something!\n");
}

public int main( string[] args ) {
    // Create the thread to start that function
    unowned Thread<void*> my_thread = Thread.create<void*>(thread_function, true);

    // Some time toward the end of your application, reclaim the thread
    my_thread.join();

    return 1;
} 
```

请记住使用“--thread”选项进行编译。

# jquery - 如何做这种渐变的悬停效果

> ID：10060966
> 
> 赞同：1
> 
> 时间：2012-04-08T06:53:16.673
> 
> 标签：jquery, html, css, hover

这是一个链接：[http ://www.45royale.com/work/](http://www.45royale.com/work/)

在他的页面上，当您将鼠标悬停在他已经完成的工作上时，他会很酷地悬停在它上面。它用另一个替换图像。这是jquery还是css？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T06:57:04.243

jquery 以及两个单独的图像，在悬停时淡入淡出。

您应该学习使用可能内置在浏览器中的查看源代码/开发人员工具（尝试按 F12）。

以下是相关代码：

```
$("div.casestudy img.hovered").hide();
$("div.casestudy").hover(function() {
$(this).find('img').fadeIn(200);
}, function() {
$(this).find('img.hovered').fadeOut(200);
}); 
```

[http://www.45royale.com/wp-content/themes/45v6_sandbox/images/work/img_dww.jpg](http://www.45royale.com/wp-content/themes/45v6_sandbox/images/work/img_dww.jpg)

[http://www.45royale.com/wp-content/themes/45v6_sandbox/images/work/img_dww_hovered.jpg](http://www.45royale.com/wp-content/themes/45v6_sandbox/images/work/img_dww_hovered.jpg)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T09:28:08.397

您可以坚持使用一张图片并通过以下任一方式获得相同的效果：

1.  使用 html5 画布和 jQuery从[灰度到彩色](http://webdesignerwall.com/tutorials/html5-grayscale-image-hover)（在 ie8 中不起作用）。
2.  只需调低不透明度并使用以下内容覆盖 html 标题：

    ```
    $("div.casestudy").hover(function() {
    $(this).find('caption').fadeIn(200);
    $(this).find('img.hovered').animate({"opacity": "0.3"}, "slow");
    }, function() {
    $(this).find('caption').fadeOut(200);
    $(this).find('img.hovered').animate({"opacity": "1"}, "slow");
    }); 
    ```

或者类似的东西

# java - IntelliJ IDE 无法使用空格键而不是 Tab 自动完成

> ID：10060970
> 
> 赞同：2
> 
> 时间：2012-04-08T06:55:02.783
> 
> 标签：java, ide, intellij-idea

我正在输入 IntelliJ IDEA 11.1.1 代码，然后输入了单词

```
public class AnimalTestDrive{
    public static void main(String args[]){
        MyAnimalList list = new MyAnimalList();
        Dog a = new Dog();
        Cat
    }

} 
```

但是当我去放置一个空间时，它会自动完成这个：

```
public class AnimalTestDrive{
    public static void main(String args[]){
        MyAnimalList list = new MyAnimalList();
        Dog a = new Dog();
        Catalog
    }

} 
```

我花了几个小时试图找到停止这种行为的地方，因为我只想使用 Tab 自动完成。还有其他人经历过吗？

因为显然我太新了，我无法回答自己的问题，但我确实弄清楚了。

解决方案：我已经设法解决了这个问题。***在File*** > ***Settings...*** > ***Editor*** > ***Code Completion*** > Change ***Preselect 第一个建议***下有一个选项： From ***Smart*** to ***Never***。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T07:24:41.900

可以禁用此行为：

![预选](../Images/3083199aea770b2a7783f82d1d0d1820.png)

另一种选择是增加**Autopopup 代码完成**延迟。

# c# - 锯齿状的类数组（Nexus Mod Manager 的安装脚本）

> ID：10060972
> 
> 赞同：0
> 
> 时间：2012-04-08T06:55:52.937
> 
> 标签：c#, jagged-arrays

我正在尝试为游戏 Skyrim 的 Nexus Mod Manager (nmm) 制作安装脚本。如果您不熟悉 nmm，您可以编写脚本使 mod 安装变得简单和动态。您可以选择使用 xml 或 c#。我正在做后者。我无法编译以下代码（通过编译我的意思是 nmm 会给我一个错误）。我是 c# 的新手，所以我可能在做一些根本错误的事情。我收到一个错误：“对象引用未设置为对象的实例”。我已经阅读了一些有关此错误的信息，但不明白我做错了什么。

无论如何，这是我的一些代码：

```
static int maxRaceMods = 100;
static Race[][] raceOption = new Race[maxRaceMods][];
class Race
{
    public string Name { get; set; }
    public string PathMeshes { get; set; }
    public string PathTextures { get; set; }
}
static void GetRaces()
{
    for (int i = 0; i < raceOption.Length; i++)
    {
        raceOption[i] = new Race[1];
        raceOption[i][0].Name = "unknown";
        raceOption[i][0].PathMeshes = "unknown";
        raceOption[i][0].PathTextures = "unknown";
    }
} 
```

当我尝试分配类变量时，我的问题发生了。如果我注释掉 for 循环中的最后三行，代码编译得很好。显然，我计划扩展 GetRaces，但我需要先让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:08:02.323

您正在创建一个长度为 1 的 Races 数组，但您仍然必须在数组内创建一个 Race 对象：

```
 raceOption[i] = new Race[1];
    raceOption[i][0] = new Race();
    raceOption[i][0].Name = "unknown"; 
```

# java - 如何修复netbeans中的错误“包weka不存在”？

> ID：10060973
> 
> 赞同：0
> 
> 时间：2012-04-08T06:56:02.357
> 
> 标签：java, netbeans, weka

我想在 java 中使用 weka。

我下载并安装了 weka，还下载了 api weka-oneclass.jar。我正在使用 netbeans IDE，因此添加了这个外部 jar 文件。但是现在当我开始导入这个weka包时，它说weka包不存在。该包也列在类路径中。谁能帮我解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:19:20.587

您能在 Netbeans 主屏幕左侧的“库”部分看到它吗？

如果您右键单击您的项目，然后转到库部分，您的 jar 文件是否列在编译选项卡中？

最后，如果你在库部分打开 jar 文件，它是否有你想要的类？

如果这一切都正确，我会尝试清理并再次构建您的项目。

# database - EF 4.1 代码优先错误 - IDENTITY_INSERT 设置为 OFF

> ID：10060976
> 
> 赞同：0
> 
> 时间：2012-04-08T06:56:21.533
> 
> 标签：database, entity-framework, model, ef-code-first, entity

我对 EF 4.1 很陌生。我在 EF 4.1 中的 Code First 开发中遇到错误。

**“当 IDENTITY_INSERT 设置为 OFF 时，无法为表‘表’中的标识列插入显式值。”**

我在互联网上搜索并了解了abt的用法

```
[Required, Key, DatabaseGenerated(DatabaseGeneratedOption.Identity)]. 
```

但是没有用。我也将选项从 Identity 更改为 None。但是没有用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:11:15.443

您正在尝试将新行插入到具有自动增量 PK 的表中，当您尝试将其添加到数据库时，您不应该在此处设置 ID 属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T17:52:11.947

我有同样的错误，因为我在我的类中以错误的方式定义了外键关系：

```
public partial class Student
{
    [Key]
    public int StudentId { get; set; }

    public string StudentName { get; set; }
    public int StudentAge { get; set; }
    public int GradeNumber { get; set; }
    public string LockerNumber { get; set; }
    public string TeacherID { get; set; }
    public string StudentComments { get; set; }

    // Navigation properties
    [ForeignKey("TeacherID")]
    public virtual Teacher Teacher { get; set; }

    public virtual GradeLevel GradeLevel { get; set; }

    // the code below is incorrect, the StudentClass should have the StudentId 
    // as the FK entity:

    [ForeignKey("StudentId")]
    public virtual StudentClass StudentClass { get; set; }
} 
```

StudentClass 类

```
public partial class StudentClass
{
    [Key]
    public int RowId { get; set; }
    public int StudentId { get; set; }
    public int ClassSubjectId { get; set; }

    // Navigation properties
    [ForeignKey("ClassSubjectId")]
    public virtual ClassSubject ClassSubject { get; set; }

    // this is the way the relationship should be defined: 

    [ForeignKey("StudentId")]
    public virtual Student Student { get; set; }
} 
```

# emacs - 在elisp中按值添加两个alist

> ID：10060980
> 
> 赞同：2
> 
> 时间：2012-04-08T06:57:15.950
> 
> 标签：emacs, lisp, elisp, associative-array

我有两个形式的点对列表：

```
(((key1 . value1) . 5)
 ((key2 . value2) . 7))

(((key2 . value2) . 3)
 ((key3 . value3) . 9)) 
```

我希望结果是一个关联列表：

```
(((key1 . value1) . 5)
 ((key2 . value2) . 10)
 ((key3 . value3) . 9)) 
```

如何在 emacs lisp 中按值添加两个关联列表？换句话说，如果两个 alist 具有相同的键，则该键的值应加在一起以生成 alist。

最可能的答案是一些 elisp 片段，但我也更喜欢漂亮的 emacs 宏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-08T10:50:43.013

使用 CL 模块的解决方案（编写时考虑到可读性而不是效率）：

```
(require 'cl)

(defun merge-alists (function default alist1 alist2)
  (flet ((keys (alist) (mapcar #'car alist))
         (lookup (key alist) (or (cdr (assoc key alist)) default)))
    (loop with keys = (union (keys alist1) (keys alist2) :test 'equal)
          for k in keys collect
          (cons k (funcall function (lookup k alist1) (lookup k alist2)))))) 
```

你可以像这样使用它：

```
elisp> (merge-alists '+ 0 '((foo . 1) (bar . 2)) '((foo . 11) (baz . 22)))
((baz . 22)
 (foo . 12)
 (bar . 2))

elisp> (merge-alists '* 1 '((foo . 1) (bar . 2)) '((foo . 11) (baz . 22)))
((baz . 22)
 (foo . 11)
 (bar . 2))

elisp> (merge-alists 'append '() '((foo a b) (bar c)) '((foo d e) (baz f g)))
((baz f g)
 (foo a b d e)
 (bar c))

elisp> (setq my-alist1 '(((key1 . value1) . 5) ((key2 . value2) . 7)))
(((key1 . value1) . 5)
 ((key2 . value2) . 7))

elisp> (setq my-alist2 '(((key2 . value2) . 3) ((key3 . value3) . 9)))
(((key2 . value2) . 3)
 ((key3 . value3) . 9))

elisp> (merge-alists '+ 0 my-alist1 my-alist2)
(((key3 . value3) . 9)
 ((key1 . value1) . 5)
 ((key2 . value2) . 10)) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T08:36:05.173

它可能是这样的：

```
(defun merge-alists (a1 a2)
   (let ((ac (copy-alist a1)))
      (dolist (x a2)
         (when (null (assoc (car x) ac))
        (add-to-list 'ac x)))
      ac)) 
```

它将返回第一个列表的副本，其中包含从第二个列表添加的数据...

但是如果你使用简单的`append`函数，那么无论如何都不会找到重复项，因为函数通常返回第一个找到的值，而不是所有存在的值。

更新：对不起，错误地阅读了问题，另一个答案正确，并且以更一般的方式......虽然，这是我的这个函数的变体，没有使用 CL 包：

```
(defun merge-alists (a1 a2)
  (let ((ac (copy-alist a1)))
    (dolist (x a2)
      (let ((r (assoc (car x) ac)))
    (if (null r)
      (add-to-list 'ac x)
      (setf (cdr r) (+ (cdr x) (cdr r))))))
    ac)) 
```

PS在你的例子中，括号是不平衡的:-)

# android - 按钮动作-Android 应用

> ID：10060981
> 
> 赞同：0
> 
> 时间：2012-04-08T06:57:30.807
> 
> 标签：android, android-layout

我正在练习你好，Android ed3 这本书。有一个关于创建操作按钮以显示“关于”游戏的示例代码。我已经编辑了所有必要的 xml 文件。我在下面的代码中遇到错误。正在显示 logcat第 10 行中的 nullpointer 异常：about.Button.setClickListener(this)。请帮助。另外我无法理解“this”参数。有什么问题吗？

```
public class Sudoku extends Activity implements OnClickListener {
private static final String TAG = "Sudoku";
   /** Called when the activity is first created. */
   @Override
   public void onCreate(Bundle savedInstanceState) {
      super.onCreate(savedInstanceState);
      setContentView(R.layout.main);
      // Set up click listeners for all the button
      View aboutButton = findViewById(R.id.about_button);
      aboutButton.setOnClickListener(this);

   }

   public void onClick(View v) {
          switch (v.getId()) {
          case R.id.about_button:
             Intent i = new Intent(this, About.class);
             startActivity(i);
             break;
    } 
```

} }

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:03:14.750

看起来您在 xml 文件中没有“about_button”按钮。您是否为 xml 中的按钮提供了相同的名称？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-08T07:19:52.510

```
public class Sudoku extends Activity implements OnClickListener {
private static final String TAG = "Sudoku";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
   super.onCreate(savedInstanceState);
   setContentView(R.layout.main);
   // Set up click listeners for all the button
   Button aboutButton = (Button) findViewById(R.id.about_button);
  aboutButton.setOnClickListener(this); 
```

}

```
public void onClick(View v) {
      if(v == aboutButton){
         Intent i = new Intent(this, About.class);
         startActivity(i);
         break;
} 
```

试试这个……刚改了2-3行……

# android - Android中的自定义列表视图，顶部有图像

> ID：10060984
> 
> 赞同：2
> 
> 时间：2012-04-08T06:57:45.080
> 
> 标签：android, listview

我有一个使用简单列表视图显示结果的 Android 项目。我需要的是在列表视图的顶部显示一个图像，如下所示：

![滚动前](../Images/8bd709f538bac83fda326e3632209e0e.png)

![滚动后](../Images/2e32692b37ddd2065dc7295941cf68a0.png)

请注意，顶部的图像应该是可滚动的。请你帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-08T07:01:39.663

使用[ListView.addHeaderView()](http://developer.android.com/reference/android/widget/ListView.html#addHeaderView%28android.view.View%29)将标题视图添加到 ListView 的顶部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T08:25:46.207

列表视图具有页眉和页脚选项。您可以将可滚动的图像视图放在一个 XML 布局中，膨胀并将其用作列表视图标题。

如果您搜索列表视图标题，您可以获得更多信息。我能得到的最快的是

[带有页眉和页脚按钮的 Android 列表视图](https://stackoverflow.com/questions/6121186/android-listview-with-header-and-footer-buttons)

# c++ - 为什么c ++ ifstream读取具有重复记录的文件

> ID：10060991
> 
> 赞同：0
> 
> 时间：2012-04-08T06:59:27.120
> 
> 标签：c++, file-io, fstream

> **可能重复：**
> [从文本文件读取直到 EOF 重复最后一行](https://stackoverflow.com/questions/21647/reading-from-text-file-until-eof-repeats-last-line)
> [c++ EOF 运行了太多次？](https://stackoverflow.com/questions/8236006/c-eof-running-one-too-many-times)

我正在编写一个简单的 c++ 代码来读取和写入二进制文件，但我发现 ifstream 将读取记录两次。我不知道这是怎么发生的，但我尝试在 windows 和 linux 中用 mingw32 编译代码，同样的情况

```
ofstream outfile;
int data[5];
outfile.open("abc.out", ios::out | ios::trunc | ios::binary);
data[0] = data[1] = 1;
data[2] = data[3] = 2;
data[4] = -1;
cout << "ORIGINAL DATA:" << data[0] << " " << data[1] << " "  << data[2] << " "  << data[3] << " "  << data[4] << endl << endl;
outfile.write((char *)&data[0], 5*sizeof(int));
outfile.close();    

ifstream infile;
infile.open("abc.out", ios::in | ios::binary);
data[0] = data[1] = data[2] = data[3] = data[4] = 0;
while (!infile.eof())
{
  infile.read((char *)&data[0], 5*sizeof(int));
  cout << data[0] << " " << data[1] << " "  << data[2] << " "  << data[3] << " "  << data[4] << endl;
} 
```

这是输出

原始数据：1 1 2 2 -1

1 1 2 2 -1

1 1 2 2 -1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-08T07:19:56.440

永远不要使用`.eof()`or`.good()`作为循环条件。它几乎总是会产生错误的代码（就像在这种情况下一样）。

读取数据的惯用模式是 C++：

```
while (infile.read((char *)&data[0], 5*sizeof(int)))
{  
  cout << data[0] << " " << data[1] << " "  << data[2] << " "  
       << data[3] << " "  << data[4] << endl;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-08T07:20:17.863

正如@BoPersson 已经指出的那样，问题源于 using `while (!infile.eof())`，这*实际上*总是一个错误。相反，您想检查读取数据的结果。第一个近似值如下所示：

```
// prefer 1-step initialization -- supply parameters to ctor.
ifstream infile("abc.out", ios::in | ios::binary); 

while (infile.read((char *)&data[0], 5*sizeof(int))
    cout << data[0] << " " 
         << data[1] << " "  
         << data[2] << " "  
         << data[3] << " "  
         << data[4] << endl; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T07:21:37.170

由于当读取失败时流变坏并且*坏**流*可以被视为假布尔值，并且由于 read 返回流 istelf，您可以这样做

```
while(infile.read((char *)&data[0], 5*sizeof(int)))
  cout << data[0] << " " << data[1] << " "  << data[2] << " "  << data[3] << " "  << data[4] << endl; 
```

因此只在读取失败时留下循环。

# javascript - getElementsByTagName('head') 返回一个头部，即使页面中定义了更多头部

> ID：10060992
> 
> 赞同：-1
> 
> 时间：2012-04-08T06:59:30.913
> 
> 标签：javascript, html, dom, browser

我知道一个网页有一个隐含的`<head>`标签，即使文件中没有声明。我只是对`getElementsByTagName('head')`没有测试的测试感到好奇，它确实返回了一个`<head>`标签。

但是，当我在页面中放置多个时`<head>`......它会返回一个统一的头部。为什么是这样？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:01:01.193

这是因为浏览器“更正”您的 HTML 以始终包含单个`<head>`. 否则您的 HTML 无效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:14:43.007

据说 HTML 解析器对解析和评估 HTML 时的错误非常宽容（我听说这个功能使它们更快，不确定）。无论你给出什么，它都会解析它而不会出现任何错误，试图接近你的意思。所以你应该只有一个头部元素。浏览器会将其更改为正确的形式，具体取决于实现。因此，当 javascript 执行时，它会在更正后返回现有`head`元素。

# iphone - backgroundTouched 在 uitableviewcontroller iphone 中不起作用

> ID：10060994
> 
> 赞同：0
> 
> 时间：2012-04-08T06:59:41.210
> 
> 标签：iphone, objective-c, keyboard, uitextfield

我的代码：

。H：

```
- (IBAction)backgroundTouched:(id)sender; 
```

.m

```
- (IBAction)backgroundTouched:(id)sender {
    [textField resignFirstResponder];
    [self.view endEditing:YES];

    NSLog(@"backgound taped");
} 
```

我不知道为什么当我点击背景并且键盘没有隐藏时没有调用 backgroundTouched。我认为由于接线代码问题而从未调用过。textField resignFirstResponder 和 self.view endEditing:YES 和 NSLog 都不起作用。谁能让我知道该怎么做？或者我在这里错过了什么？在 uitextfield 中完成写入后，我试图隐藏键盘，文本字段位于 uitableview 单元格内。

PS我在没有xib文件的uitableviewcontroller中制作了它

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:04:16.553

而不是一个`backgroundTouched`方法（我不知道它是如何被实际调用的），考虑使用委托方法`UITextField`，即[`textFieldDidEndEditing:`](https://developer.apple.com/library/ios/documentation/UIKit/Reference/UITextFieldDelegate_Protocol/UITextFieldDelegate/UITextFieldDelegate.html#//apple_ref/occ/intfm/UITextFieldDelegate/textFieldDidEndEditing%3a)（我已经为你链接了 Apple 的文档）。

# c - 访问C中的字符串数组

> ID：10060995
> 
> 赞同：0
> 
> 时间：2012-04-08T06:59:54.997
> 
> 标签：c, string, initialization

如何在 C 中声明字符串数组。是否像

```
char str[100][100] ={"this","that","those"}; 
```

如果是这样，如何访问这些值..我可以这样遍历吗？（它没有给出任何编译错误..但显示了一些额外的垃圾字符）

```
int i ,j;
char  c[100][100] = {"this","that"};
for(i = 0 ;c[i] != '\0';++i)
 for(j = 0; c[i][j] != '\0';++j)
   printf("%c",c[i][j]); 
```

是否有必要在 eac 字符串的末尾添加 '\0' ..例如：

```
 char c[100][100]={"this\0","that\0"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-08T07:02:25.030

1.  是的，你可以这样声明一个字符串数组。

2.  不，你不能那样遍历它，你的外部循环的条件很糟糕——一个 string ( `char *`) 永远不会等于一个 character `'\0'`。内循环很好。

3.  不，您不需要添加`'\0'`，这将自动发生。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-08T07:03:45.980

> 如何在C中声明字符串数组

没关系，但是在处理这些字符串时必须非常小心[缓冲区溢出](http://en.wikipedia.org/wiki/Buffer_overflow)

> 我可以这样穿越吗？

请注意，第一个 for 循环中的条件：`for(i = 0 ;c[i] != '\0';++i)`可能是错误的，并且会失败，因为`c[i]`它是一个地址不为 0 的数组。您可能应该按数字迭代外部数组 [直到您读取所有元素]，而不是直到您找到一些特定的字符。您可以通过维护一个不同的变量来做到这一点，该变量`n`将指示数组当前有多少元素。

> 是否有必要在 eac 字符串的末尾添加 '\0' ..例如：

不 - 编译器将它添加给您，不添加`'\0'`到字符串就可以了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-08T07:06:07.987

c[i] 是一个指针，所以它与 '\0' 无关，
所以你应该检查 c[i][0]
当你输入一个像 "this" 这样的字符串时，编译器会为你添加 '\0'

```
char str[100][100] ={"this","that","those"};
int main()
{
    int i ,j;
    char  c[100][100] = {"this","that"};
    for(i = 0 ;c[i][0] != '\0';++i)
    {
        for(j = 0; c[i][j] != '\0';++j)
            printf("%c",c[i][j]);
    }
} 
```

# java - Apache POI“addPicture”方法对我不起作用

> ID：10060996
> 
> 赞同：4
> 
> 时间：2012-04-08T07:00:10.023
> 
> 标签：java, apache-poi

我在使用 Apache POI（版本 3.7）将图片插入 Excel 工作簿时遇到问题。这是我的代码：

```
private static void createAndFillWorkbook() {
    FileOutputStream out = null;
    FileInputStream in = null;
    try {
        HSSFWorkbook workbook = new HSSFWorkbook();
        File picture = new File("D:\\pngPict.png");
        byte[] buf = new byte[(int) picture.length()];
        in = new FileInputStream(picture);
        in.read(buf);
        workbook.addPicture(buf, Workbook.PICTURE_TYPE_PNG);
        out = new FileOutputStream("D:\\Book3.xls");
        workbook.write(out);
    } catch (Exception e) {
    } finally {
        try {
            if (out != null) {
                out.close();
            }
            if (in != null) {
                in.close();
            }
        } catch (Exception e) {
            throw new RuntimeException(e);
        }
    }
} 
```

它不起作用（我使用的是 .xls 文件格式），我不知道为什么。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-08T09:16:36.997

主要问题是 Apache poi `addPicture`api 依赖于 apache 通用编解码器。`commons-codec-1.6`从这个位置[http://commons.apache.org/codec/download_codec.cgi](http://commons.apache.org/codec/download_codec.cgi)下载 jar 并将 jar 放在你的类路径中。

它应该工作。还可以尝试将图片添加到 Excel 的示例

[http://poi.apache.org/spreadsheet/quick-guide.html#Images](http://poi.apache.org/spreadsheet/quick-guide.html#Images)

这里还有一个示例工作代码

[http://www.codemiles.com/java/image-insert-in-excel-file-using-poi-t1340.html](http://www.codemiles.com/java/image-insert-in-excel-file-using-poi-t1340.html)

希望这可以帮助 ！！