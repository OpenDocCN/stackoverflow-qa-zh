# StackOverflow 问答 11918000-11918999

# java - 从 Linux 上的 Java 迁移到 Eclipse/远程系统资源管理器

> ID：11918006
> 
> 赞同：0
> 
> 时间：2012-08-11T22:01:33.280
> 
> 标签：java, linux, eclipse

简介：如何在远程服务器上设置项目？

我一直在尝试在远程服务器上处理 Java 代码，方法是使用 Windows 上的 Putty 登录并使用基本文本编辑器对其进行编辑。我打算转移到 Eclipse/Remote 系统资源管理器。我就是这样做的，我可以使用 Eclipse 作为编辑器，但在远程服务器上编译。

问题： 1\. 我正在尝试获取 Eclipse 的功能，它会向我建议对象的可用方法；但是，我收到此错误：此编译单元不在 java 项目的构建路径中”

据我了解，我还没有将其设置为项目。有人可以指出我正确的方向吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:06:16.900

我个人没有尝试过，但这可能对你有用:)

[http://www.patrickjwaters.com/blog/2011-07-24/how-setup-eclipse-php-pdt-remote-system-explorer-theme-manager-and-drupal-plugins/35](http://www.patrickjwaters.com/blog/2011-07-24/how-setup-eclipse-php-pdt-remote-system-explorer-theme-manager-and-drupal-plugins/35)

# objective-c - 具有多个日期条目（每年大约 800 多个）的核心数据或 NSDictionary？什么是最容易实现的？

> ID：11918007
> 
> 赞同：0
> 
> 时间：2012-08-11T22:01:33.477
> 
> 标签：objective-c, ios, core-data, nsdictionary

我试图找出解决这个问题的最佳方法。

--

我有一个“**历史**”表，列出了**所有**有数据的年份。

如果用户单击给定的年份，它会转到一个新表并列出所有有数据的**月份。**

单击给定月份，将显示一个新表格，其中列出了**所有**有数据的日期。

单击特定日期，显示一个或多个时间戳的列表。

--

解决这个问题的最佳方法是什么？

如果用户创建时间戳。我需要用今天的日期插入它。

我还需要具有删除给定年份的用户的能力。那一年的一切都被删除了。

同样，删除一个月会删除该月的所有内容，因为它是特定的年份。

依此类推，直到用户应该能够删除单个时间戳。

--

我想我会使用带有“年份”键的**字典。**2012 年，2013 年，...

并且每个检索另一个带有“月份”键的字典，1、2、3、4，...

等等等等 ...

我还认为我可以使用 Core Data 制作模型。

**表示“年**”实体的类 Year ，与许多可能的**Months**相关，并且每个月与许多可能的**days**相关，并且 days 与**Time** * *Stamps* * 相关。

最后，

我想创建一个只有两个实体的模型。

**条目**，只有一个属性“**日期**”，与“**时间戳”具有****一对多关系**，接收该给定日期的所有可能时间戳。

 **我是 iOS 编程的新手。所以这对我来说都是理论。但我确实遵循了一些核心数据教程和其他使用 NSDictionaries、协议委托等的教程。

当我进入低谷时，“挖掘”方法似乎更优雅。特别是因为我认为我可以以级联方式删除特定的给定对象？

这些有意义吗？还是有更明显的简单方法来解决它？另外，请在答案中考虑如果用户选择删除“树”中的给定条目**会更容易实现**

非常感谢任何帮助。

谢谢提前！

努诺

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:38:59.187

如果你打算依赖 Core Data 或任何数据库引擎，解决这个问题的最好方法是使用数据库本身。

我看到了两种可能的解决方案（当然还有更多）。第一个，最简单的：

```
Entity
- timestamp
- year
- month
- day
- all_the_stuff_you_need 
```

使年、月和日只读，并沿时间戳更新。索引：年、年+月、年+月+日。轻松通话。

这样，您可以非常简单地查询数据库，要求它返回您需要的实体，并且只返回您需要的实体。

更复杂的设置是：

```
Entity
- timestamp
- all_the_stuff_you_need
- year -> Year
- month -> Month
- day -> Day

Year
- year
- entities ->> Entity

Month
- month
- entities ->> Entity

Day
- day
- entities ->> Entity 
```

所以基本上，年、月和日、月和日的 3 个数据域是不可变的。

该结构更复杂，但它可以更好地查看您的数据。您可以直接访问有关您的数据的更多信息，因为数据域是明确且定义明确的。

第三种解决方案是创建一个包含年、月和日的日期实体，每天输入一个条目。上述两种解决方案之间的中间地带。我认为不那么有趣，但是，嘿，无论如何它可能适合您的需求。**

# php - PHP在静态函数中获取子类的名称

> ID：11918010
> 
> 赞同：0
> 
> 时间：2012-08-11T22:01:48.400
> 
> 标签：php, class

这样的事情可能吗？

```
<?
class A
{
   public static function fun()
   {
      var_dump(get_class(child)); //bool(false) //should return B
   }
}
class B extends A
{
   public static function fun()
   {
      parent::fun();
   }
}

B::fun();
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:09:36.967

自 PHP 5.3 起，有用[`get_called_class()`](http://php.net/get_called_class)于此目的：

```
echo get_called_class(); // yields "B" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T22:09:45.917

```
<?php
class B extends A
{
   public static function fun()
   {
      parent::fun();
   }
}
class A
{
   public static function fun()
   {
      var_dump(get_called_class());
   }
}

B::fun(); 
```

[http://php.net/manual/en/function.get-call-class.php](http://php.net/manual/en/function.get-called-class.php)

# java - 如何在Java中将整个内容从一个目录复制到另一个目录？

> ID：11918013
> 
> 赞同：0
> 
> 时间：2012-08-11T22:02:18.397
> 
> 标签：java

```
File content[] = new File("C:/FilesToGo/").listFiles();

for (int i = 0; i < content.length; i++){                       

    String destiny = "C:/Kingdoms/"+content[i].getName();           
    File desc = new File(destiny);      
    try {
        Files.copy(content[i].toPath(), desc.toPath(), StandardCopyOption.REPLACE_EXISTING);
    } catch (IOException e) {
        e.printStackTrace();
    }                   
} 
```

这就是我所拥有的。它复制一切都很好。但在内容中有一些文件夹。文件夹会被复制，但文件夹的内容不会。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T22:12:38.270

建议在 Apache Commons IO 中使用[FileUtils ：](https://commons.apache.org/io/apidocs/org/apache/commons/io/FileUtils.html)

```
FileUtils.copyDirectory(new File("C:/FilesToGo/"),
                        new File("C:/Kingdoms/")); 
```

复制目录和内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:08:31.893

递归。这是一种使用递归删除文件夹系统的方法：

```
public void move(File file, File targetFile) {
    if(file.isDirectory() && file.listFiles() != null) {
        for(File file2 : file.listFiles()) {
            move(file2, new File(targetFile.getPath() + "\\" + file.getName());
        }
    }
    try {
         Files.copy(file, targetFile.getPath() + "\\" + file.getName(),  StandardCopyOption.REPLACE_EXISTING);
    } catch (IOException e) {
        e.printStackTrace();
    } 
} 
```

没有测试代码，但它应该可以工作。基本上，它深入到文件夹中，告诉它移动项目，如果它是一个文件夹，则遍历它的所有子项，然后移动它们，等等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-01T09:31:00.417

只是为了澄清 Alex Coleman 的回答中需要更改的内容，以使代码正常工作。这是我测试的亚历克斯代码的修改版本，对我来说效果很好：

```
private void copyDirectoryContents(File source, File destination){
    try {
        String destinationPathString = destination.getPath() + "\\" + source.getName();
        Path destinationPath = Paths.get(destinationPathString);
        Files.copy(source.toPath(), destinationPath, StandardCopyOption.REPLACE_EXISTING);
    }        
    catch (UnsupportedOperationException e) {
        //UnsupportedOperationException
    }
    catch (DirectoryNotEmptyException e) {
        //DirectoryNotEmptyException
    }
    catch (IOException e) {
        //IOException
    }
    catch (SecurityException e) {
        //SecurityException
    }

    if(source.isDirectory() && source.listFiles() != null){
        for(File file : source.listFiles()) {               
            copyDirectoryContents(file, new File(destination.getPath() + "\\" + source.getName()));
        }
    }

} 
```

# jquery - 用淡入淡出改变按钮值？jQuery？

> ID：11918014
> 
> 赞同：0
> 
> 时间：2012-08-11T22:02:28.437
> 
> 标签：jquery, css, button, jquery-animate

我正在像这样更改按钮的值

```
$('#slideButton').val("Expand"); 
```

然后像这样回来

```
$('#slideButton').val("Collapse"); 
```

如果可能的话，我怎样才能让按钮的值淡出/淡入，而不是淡出整个按钮？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:09:23.503

## HTML

使用`button`而不是`input`.

```
<button id="slideButton" type="button"><span>Expand</span></button>​ 
```

## jQuery

```
$('#slideButton').click(function()
{
    $(this).find('span').html('Collapse').hide().fadeIn('slow');
}); 
```

示例：http: [//jsfiddle.net/sKcE3/](http://jsfiddle.net/sKcE3/)

# scala - Scala：如何使案例类副本保留清单信息

> ID：11918016
> 
> 赞同：8
> 
> 时间：2012-08-11T22:02:37.087
> 
> 标签：scala, manifest, type-erasure, type-parameter

案例类`copy()`方法应该制作实例的相同副本，并按名称替换任何字段。当案例类具有带有清单的类型参数时，这似乎失败了。副本丢失了其参数类型的所有知识。

```
case class Foo[+A : Manifest](a: A) {
  // Capture manifest so we can observe it
  // A demonstration with collect would work equally well
  def myManifest = implicitly[Manifest[_ <: A]]
}

case class Bar[A <: Foo[Any]](foo: A) {
  // A simple copy of foo
  def fooCopy = foo.copy()
}

val foo = Foo(1)
val bar = Bar(foo)

println(bar.foo.myManifest)     // Prints "Int"
println(bar.fooCopy.myManifest) // Prints "Any" 
```

为什么会`Foo.copy`丢失参数清单，我该如何让它保留它？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-11T22:02:37.087

几个 Scala 特性相互作用以产生这种行为。第一件事是`Manifest`s 不仅附加到构造函数的秘密隐式参数列表中，而且还附加到复制方法上。众所周知，

`case class Foo[+A : Manifest](a: A)`

只是语法糖

`case class Foo[+A](a: A)(implicit m: Manifest[A])`

但这也会影响复制构造函数，看起来像这样

`def copy[B](a: B = a)(implicit m: Manifest[B]) = Foo[B](a)(m)`

所有这些`implicit m`s 都由编译器创建并通过隐式参数列表发送到方法。

只要在编译器知道s 类型参数`copy`的地方使用该方法就可以了。`Foo`例如，这将在 Bar 类之外工作：

```
val foo = Foo(1)
val aCopy = foo.copy()
println(aCopy.myManifest) // Prints "Int" 
```

这是有效的，因为编译器推断这`foo`是 a`Foo[Int]`所以它知道这`foo.a`是 a`Int`所以它可以`copy`像这样调用：

`val aCopy = foo.copy()(manifest[Int]())`

（请注意，这`manifest[T]()`是一个创建类型的清单表示的函数`T`，例如`Manifest[T]`使用大写的“M”。未显示将默认参数添加到`copy`中。）它也可以在`Foo`类中工作，因为它已经具有传递的清单在创建类时。它看起来像这样：

```
case class Foo[+A : Manifest](a: A) {
  def myManifest = implicitly[Manifest[_ <: A]]

  def localCopy = copy()
}

val foo = Foo(1)
println(foo.localCopy.myManifest) // Prints "Int" 
```

然而，在原始示例中，`Bar`由于第二个特性，它在类中失败了：虽然 的类型参数`Bar`在类中是已知的`Bar`，但类型参数的类型参数却不知道。它知道`A`in`Bar`是 a`Foo`或 a `SubFoo`or `SubSubFoo`，但不知道 in 是 a`Foo[Int]`或 a `Foo[String]`。这当然是 Scala 中众所周知的类型擦除问题，但即使看起来类似乎没有对`foo`s 类型参数的类型做任何事情，它也会在这里出现问题。但它是，记住每次`copy`调用时都会秘密注入清单，这些清单会覆盖之前存在的清单。由于`Bar`该类不知道类型参数是`foo`是，它只是创建一个清单`Any`并将其发送如下：

`def fooCopy = foo.copy()(manifest[Any])`

如果一个人可以控制`Foo`该类（例如它不是`List`），那么一个解决方法是通过添加一个将执行正确复制的方法在 Foo 类中完成所有复制，就像`localCopy`上面一样，并返回结果：

```
case class Bar[A <: Foo[Any]](foo: A) {
  //def fooCopy = foo.copy()
  def fooCopy = foo.localCopy
}

val bar = Bar(Foo(1))
println(bar.fooCopy.myManifest) // Prints "Int" 
```

另一种解决方案是将`Foo`s 类型参数添加为 的显示类型参数`Bar`：

```
case class Bar[A <: Foo[B], B : Manifest](foo: A) {
  def fooCopy = foo.copy()
} 
```

但是，如果类层次结构很大（即更多成员具有类型参数，并且这些类也具有类型参数），则这种扩展性很差，因为每个类都必须具有其下每个类的类型参数。在尝试构造 a 时，它似乎也使类型推断变得异常`Bar`：

```
val bar = Bar(Foo(1)) // Does not compile

val bar = Bar[Foo[Int], Int](Foo(1)) // Compiles 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T11:45:18.740

您发现有两个问题。第一个问题是里面的类型擦除问题`Bar`，`Bar`不知道`Foo`'s manifest 的类型。我会亲自使用`localCopy`您建议的解决方法。

第二个问题是另一个隐式被偷偷注入`copy`. 通过将值再次显式传递到`copy`. 例如：

```
scala> case class Foo[+A](a: A)(implicit val m: Manifest[A @uncheckedVariance])
defined class Foo

scala> case class Bar[A <: Foo[Any]](foo: A) {
     | def fooCopy = foo.copy()(foo.m)
     | }
defined class Bar

scala> val foo = Foo(1)
foo: Foo[Int] = Foo(1)

scala> val bar = Bar(foo)
bar: Bar[Foo[Int]] = Bar(Foo(1))

scala> bar.fooCopy.m
res2: Manifest[Any] = Int 
```

我们看到该副本保留了`Int`清单，但类型`fooCopy`和`res2`是`Manifest[Any]`由于擦除。

因为我需要访问隐含的证据才能做到这一点，所以`copy`我不得不使用显式`implicit`(hah) 语法而不是上下文绑定语法。但是使用显式语法会导致错误：

```
scala> case class Foo[+A](a: A)(implicit val m: Manifest[A])
<console>:7: error: covariant type A occurs in invariant position in type => Manifest[A] of value m
       case class Foo[+A](a: A)(implicit val m: Manifest[A])
                                         ^
scala> case class Foo[+A](a: A)(implicit val m: Manifest[_ <: A])
defined class Foo

scala> val foo = Foo(1)
<console>:9: error: No Manifest available for Int. 
```

怎么回事？上下文绑定语法如何起作用而显式语法`implicit`不起作用？我四处挖掘并找到了解决问题的方法：`@uncheckedVariance`注释。

**更新**

我又挖了一些，发现在 Scala 2.10 中，案例类已更改为*仅从*`copy()`.

> Martin 说：case class ness 只赋予第一个参数列表，其余的不应该被复制。

[在https://issues.scala-lang.org/browse/SI-5009](https://issues.scala-lang.org/browse/SI-5009)中查看此更改的详细信息。

# java - JTextField 只接受有效的未签名短裤？（使用 KeyAdapter）

> ID：11918021
> 
> 赞同：1
> 
> 时间：2012-08-11T22:03:41.203
> 
> 标签：java, swing, adapter, jtextfield, short

下面是我试图开始工作以仅接受小于 65535 的值的 KeyAdapter。似乎它在实际应该的位置后面敲击了一个键。例如，如果我输入“55”，System.out.println 将产生“5”，执行“3298”将产生“329”，等等。

```
// Allows for unsigned short values only
KeyAdapter unsignedShortAdapter = new KeyAdapter() {

    public void keyTyped(KeyEvent e) {
        char c = e.getKeyChar();
        int tempInt = 0;
        JTextField temp = null;

        if (!((Character.isDigit(c) || (c == KeyEvent.VK_BACK_SPACE) || (c == KeyEvent.VK_DELETE)))) {
            getToolkit().beep();
            e.consume();
        }
        try {
            temp = (JTextField) e.getSource();
            System.out.println(temp.getText());
            tempInt = (Integer.parseInt(temp.getText().toString()));
        } catch (NumberFormatException e1) {

        } finally {
            if (tempInt > (Short.MAX_VALUE * 2)) {
                 getToolkit().beep();
                 e.consume();
                temp.setText(temp.getText().substring(0, temp.getText().length() - 1));

                invalidate();
            }

        }
    }

}; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T22:29:17.477

因此，`KeyListener`我们应该使用 a ，而不是您发现的 a ，它不可靠并且会导致许多令人讨厌的副作用（以及可能的文档突变异常：P），`DocumentFilter`因为这就是它的设计目的

```
public class ShortFilter extends DocumentFilter {

    protected boolean valid(String text) {

        boolean valid = true;
        for (char check : text.toCharArray()) {

            if (!Character.isDigit(check)) {

                valid = false;
                break;

            }

        }

        if (valid) {

            int iValue = Integer.parseInt(text);

            valid = iValue <= (Short.MAX_VALUE * 2);

        }

        return valid;

    }

    @Override
    public void insertString(FilterBypass fb, int offset, String text, AttributeSet attr) throws BadLocationException {

        StringBuilder sb = new StringBuilder(fb.getDocument().getText(0, fb.getDocument().getLength()));
        sb.insert(offset, text);

        if (valid(sb.toString())) {

            super.insertString(fb, offset, text, attr);

        }

    }

    @Override
    public void replace(FilterBypass fb, int offset, int length, String text, AttributeSet attrs) throws BadLocationException {

        if (length > 0) {

            StringBuilder sb = new StringBuilder(fb.getDocument().getText(0, fb.getDocument().getLength()));

            sb.delete(offset, length);
            sb.insert(offset, text);

            if (valid(sb.toString())) {

                super.replace(fb, offset, length, text, attrs);

            }

        } else {

            insertString(fb, offset, text, attrs);

        }

    }
} 
```

您需要将此应用于该字段的文档

```
((AbstractDocument) field.getDocument()).setDocumentFilter(new ShortFilter()); 
```

我会检查

*   [http://www.jroller.com/dpmihai/entry/documentfilter](http://www.jroller.com/dpmihai/entry/documentfilter)
*   [http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html](http://docs.oracle.com/javase/7/docs/api/javax/swing/text/DocumentFilter.html)

有关更多信息

**更新小数包含**

基本上，如果要允许包含小数，则需要在`valid`方法中允许字符。

您还需要检查当前文档的内容

```
StringBuilder sb = new StringBuilder(fb.getDocument().getText(0, fb.getDocument().getLength()));

// Update the StringBuilder as per noraml
// Check valid as per normal

if (text.contains(".") && sb.contains(".")) {
  // already have decimal place
} else {
  // Business as usual...
} 
```

# css - 元素未在 twitter bootstrap tabbable 中显示完整尺寸

> ID：11918023
> 
> 赞同：-1
> 
> 时间：2012-08-11T22:04:13.613
> 
> 标签：css, twitter-bootstrap

我有一个谷歌图表，它在自己的页面中显示良好，`/graph/map_freq`但当我将其显示为选项卡内容时缩小了尺寸。

这是可选项卡的代码：

```
<div class="tab-pane" id="map_freq">
<%= render "graph/map_freq" %>
</div> 
```

这是 graph/map_freq.html.erb 中的代码：

```
<div id="chart_div" style="width: 900px; height: 500px;"></div> 
```

我很确定这与 Bootstrap 的 tabbable 组件有关。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:43:28.753

你应该像这样标记它......

```
<ul class="nav nav-tabs" id="map_freq">
     <li class="active"><a data-toggle="tab" href="#featured-members">Your Tab Name</a></li>
</ul>

<div class="tab-content" id="yourId">
     <div id="map_freq" class="tab-pane active fade in">
       Your Content Here.
     </div>
</div> 
```

该代码应输出类似于[THIS ONE 的页面。](http://easycaptures.com/fs/uploaded/625/3105008099.png)

# sql - #1045 无法登录 MySQL 服务器

> ID：11918034
> 
> 赞同：0
> 
> 时间：2012-08-11T22:05:21.033
> 
> 标签：sql, zend-framework, phpmyadmin

我在 Mac OSX 上使用 Zend Studio，突然有一天我收到错误 #2002，然后当我尝试将设置从 localhost 更改为 127.0.0.1 时，我开始收到错误 #1045。

我到处寻找答案，但对我没有任何帮助。我最后的希望是重新安装一个新副本，但我想检索我的数据库表，任何想法如何做到这一点将不胜感激。

我应该提一下，输入默认用户和密码“root”和“”时会出现错误。我尝试输入我的计算机密码并且它有效，但它与我没有看到我正在处理的表的安装不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:07:11.110

要 100% 确定问题不是来自 Zend Studio，请尝试使用[Sequel Pro](http://www.sequelpro.com/)访问和备份您的数据库。

# php - 谷歌地图、PHP 和 Postgres

> ID：11918035
> 
> 赞同：-1
> 
> 时间：2012-08-11T22:05:35.997
> 
> 标签：php, javascript, mysql, postgresql, google-maps

我想问一下是否可以沿着 PHP 和 Postgres 使用谷歌地图地理编码服务，比如 Pamela Fox（和 Lary Stucker）在这里制作的东西：

[https://developers.google.com/maps/articles/phpsqlajax?hl=pt-BR](https://developers.google.com/maps/articles/phpsqlajax?hl=pt-BR)

考虑改变 MySQL/Postgres 的原因是因为我一直在与一些人交谈，他们建议我不应该使用 MySQL，因为用他们自己的话来说，它是“令人困惑和过时的”。

基本上，我想创建一个允许我从表中对地址进行地理编码的项目。我知道使用 Fusion Tables 很容易做到这一点，但我需要能够在地图中拖动标记，然后在同一个表中获取它的新地址。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T22:54:32.620

您提供的文章使用 MySQL :) MySQL 绝对没有问题，它在全球范围内被用于比您的示例大得多的数据库中。它也没有什么令人困惑的地方，而且肯定不会过时。

Postgres 有自己的优点和缺点。一般来说，如果你对两者都不熟悉，我会说 MySQL 很容易上手，而 P​​ostgres 可能有相当陡峭的学习曲线。

我的建议是 - 不要打扰，按照文章所说的去做（除了可能创建 InnoDB 格式的表，而不是 MyISAM）。

# c# - 修改内置的 .NET 集合 int.MaxValue 多次 - 潜在的溢出错误

> ID：11918038
> 
> 赞同：5
> 
> 时间：2012-08-11T22:05:54.903
> 
> 标签：c#, .net, iteration, reliability

回到 .NET Reflector 是免费的时候，我用它来喘口气进入 .NET 框架代码。我注意到 .NET 2.0 中的大多数集合（我相信这也适用于当前版本）使用以下机制来识别循环期间的集合修改：

```
public class SomeCollection<T>
{
    internal int version = 0;

    // code skipped for brevity

    public void Add(T item)
    {
        version++;

        // add item logic ...
    }

    public IEnumerator<T> GetEnumerator()
    {
         return new SomeCollectionEnumerator<T>(this);
    }
}

public class SomeCollectionEnumerator<T> : IEnumerator<T>
{
     private SomeCollection<T> collection;
     private int version;

     public SomeCollectionEnumerator(SomeCollection<T> collection)
     {
         this.version = collection.version;
         this.collection = collection;
     }

     public bool MoveNext()
     {
         if (this.version != this.collection.version)
         {
             // collection was modified while iterated over
             throw SomeException(...);
         }
         // iteration logic here...
     }
} 
```

现在想象一个长时间运行的应用程序（一个频繁使用的 Web 服务，必须有最少的停机时间并且应该是稳定和可靠的）的假设情况，它将给定的集合实例（.NET 框架中的内置集合类型之一）保存在内存中只要它运行。集合被频繁地修改，以便`int.MaxValue`可能发生修改。集合的每个修改方法中的行是否存在引发溢出异常的风险`version++`（假设溢出检查未全局禁用）。

我必须承认我对反射代码的细节记忆很差，但我不记得操作`unckecked`周围的块的用法`version++`。这是否意味着.NET 中的内置集合类型不适合这种长时间运行的应用场景？只是出于好奇，有人遇到过这种情况可能发生的现实场景吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T22:08:28.090

不，因为 c# 编译器[默认不选中整数算术。](http://msdn.microsoft.com/en-us/library/h25wtyxf.aspx)（这包括编译的 BCL。）

# javascript-events - 是否可以在不触发模糊事件的情况下模糊输入？

> ID：11918042
> 
> 赞同：3
> 
> 时间：2012-08-11T22:06:25.503
> 
> 标签：javascript-events, jquery

我遇到了错误，因为 jquery 中的事件绑定器附加到“keyup”和“blur”。但是当我从似乎触发模糊事件的 DOM 中删除输入时，因此在不存在的 DOM 输入上重新运​​行处理程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:09:33.917

如果事件监听器是用 jQuery 添加的，你可以使用[`unbind`](http://api.jquery.com/unbind/)：

```
$(/* ... */).unbind('blur'); 
```

在较新版本的 jQuery 中，[`off`](http://api.jquery.com/off/)首选：

```
$(/* ... */).off('blur'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:10:55.110

您可以`this`在触发事件时在处理程序中进行验证

`if (this && $(this).length > 0 ) { /*do stuff*/ }`

# javascript - CSS 不断刷新

> ID：11918043
> 
> 赞同：0
> 
> 时间：2012-08-11T22:06:33.050
> 
> 标签：javascript, html, css

我的网站在桌面浏览器上运行良好，但在移动设备（iOS、Android 等）上，它会在我放大或缩小时重新加载背景并似乎刷新整个页面。我想知道是什么原因造成的，但到目前为止，我一直无法找到问题的原因。它使移动浏览非常烦人。

[http://www.zombiesquirrel.com](http://www.zombiesquirrel.com)

所有的 CSS 和 JavaScript 文件都应该链接到我的页面的源代码中。什么可能导致此问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:13:53.517

刚刚检查了我的 iPhone，我明白你在说什么，但是我没有看到页面重新加载本身，它可能只是重新加载 CSS 以调整到新的大小。

如果您尝试启用轻松的移动查看，您应该创建一个移动样式表并使用 javascript 和 php 来更改 css 样式表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T17:13:42.590

我能够解决这个问题。问题出在以下 CSS 中：

```
body
{
    background-color:black;
}

div.back3
{

background-image:url("back.png");
position:fixed;
z-index:-1;
margin-left:-2%;
margin-top:-100%;
padding:0;
height:400%;
width:104%;
} 

div.back2
{

background-image:url("back.png");
background-position:250px 250px;
position:fixed;
z-index:-1;
margin-left:-2%;
margin-top:-28%;
padding:0;
height:400%;
width:104%;
}

div.main
{
position:static;
} 
```

我不确定到底是哪一部分导致了问题，我会做更多的挖掘，但现在我只是使用以下内容来指定这个 CSS 样式表只能在非移动设备上使用：

`<link rel='stylesheet' href='/z/styles/main-style.css' media='screen and (min-device-width:770px)'>`

min-device-width 属性设置为那个高的数字，以确保 iPad 也不使用此样式表（尽管如果机器接近 iPad 尺寸，我可能会遇到问题，但此样式表不是超级关键无论如何，我的网站的操作）。

谢谢！编辑：特别感谢 Andrew Manson 建议仅针对移动设备禁用样式表。

# php - 无法将弹出窗口中的数据保存到数据库

> ID：11918047
> 
> 赞同：0
> 
> 时间：2012-08-11T22:07:24.403
> 
> 标签：php, jquery

我有一个屏幕，用户可以从中单击一个按钮，该按钮会弹出一个弹出窗口。当用户从弹出窗口点击保存时，数据将被保存。它不保存任何东西，就好像它没有看到数据库一样。这不可能是因为我能够从中调用数据并显示它。

用户页面上的 jQuery：

```
$(".up").click(function(){
    var code = '1234';
    var id = '24';
    var who = 'someone';
    $("#ui").html('loading...').show();
var url = "box.php";
    $.post(url, {code: str, g:id, u:who} ,function(data) {
        $("#ui").html(data).show();
    });
}); 
```

弹出 bx 上的 php：

```
//link db  {...........}
// grab post
$click = $_POST[code];
$id = $_POST['g'];
$u = $_POST['u'];

// query php {........} 
```

弹出框上的 jQuery：

```
$("#process").click(function(){
    var ID = '24';
    var who = "someone";
    var pla = "place";
    $.ajax({
        type: "POST",
        url: "member.php", //contains function 
        data: 'user='+ who+ '&dept='+ pla+ '&sure='+ ID, 
        cache: false,
        success: function(html) {   
            //do something
        }
    });
}); 
```

当我点击提交时，它不会发布到数据库。也许它没有将数据传递给 member.php 页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:24:04.963

尝试改变：

```
$('#process').click(function()
{
    ...
}); 
```

到：

```
$(document).on('click','#process',function()
{
    ...
}); 
```

## 编辑：

顺便说一句，您还需要更改：

```
$click = $_POST[code]; 
```

到：

```
$click = $_POST['code']; 
```

也许您还应该看看 jQuery 的`serialize()`函数，它可以让您更轻松地将所有表单值传递给您的 Ajax 请求。

更多信息：[http ://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

# android - 将listview链接到sqlite数据库

> ID：11918048
> 
> 赞同：0
> 
> 时间：2012-08-11T22:07:39.710
> 
> 标签：android, sqlite, listview

这是我正在尝试做的事情，并希望获得一些关于最佳方法的建议：

*   有一个包含单词的数据库，以及与该单词关联的图像文件的名称。
*   数据库中的单词将显示在列表视图中
*   选择单词时，新活动将开始在图像视图中显示单词和图像。

最好将术语存储在一个数组中，然后从这个数组中填充列表视图，然后从数据库 onitemclick 中提取？或者可以用数据库中的术语填充列表视图吗？

如果文件名存储在db中，android是否能够显示图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:36:36.593

实现您要查找的内容的最佳方法是将术语和图像路径存储在数据库中，然后使用该路径从您放入的任何位置获取图像。

图像*可以*存储在数据库中，但普遍的共识是，最好将图像存储在数据库之外，并将该图像的路径存储在数据库中。

然后，您的数据库可以像三列一样简单...“_id”、“term”和“term_image”。

您可以执行一个简单的查询来一次获取所有信息（因此只查询一次数据库）。

然后使用该查询返回的光标填充您的术语列表，并`onListItemClick`启动一个新活动以使用列表中的路径显示关联的图像，该路径与列表中的术语在同一记录中。

查询以获取数据：

```
public Cursor fetchAllTerms() {
    return mDb.query(TERMS_TABLE, new String[] { "_id", "term", "term_img" }, null, null, null, null, null);
} 
```

在您的列表中使用它：

```
 mTermCursor = mDbHelper.fetchAllTerms();
    getActivity().startManagingCursor(mTermCursor);

    String[] from = new String[] { YourDBClass.term };
    int[] to = new int[] { android.R.id.Text1 };
    SimpleCursorAdapter ranks = new SimpleCursorAdapter(getActivity(),
            android.R.layout.simple_list_item_1, mRankCursor, from, to);
    setListAdapter(ranks);

@Override
public void onListItemClick(ListView l, View v, int position, long id) {
     String imagePath = mTermCursor.getString(mTermCursor.getColumnIndexOrThrow("term");
     // code to start your new activity and put the image path into the bundle to be passed
} 
```

# objective-c - 使用选择器作为参数时出错

> ID：11918050
> 
> 赞同：0
> 
> 时间：2012-08-11T22:08:11.133
> 
> 标签：objective-c, xcode

我正在设置 UINavigationBar 并且按钮出现问题。当我这样做时：

```
-(void)addLeftButton:(NSString *)titl
{
UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithTitle:titl style:UIBarButtonItemStyleBordered target:self action:@selector(haikuInstructions)];
self.titleOfNavItem.leftBarButtonItem = button;
} 
```

然后一切都很好。但如果我这样做：

```
-(void)addLeftButton:(NSString *)titl callingMethod:(NSString *)method
{
UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithTitle:titl style:UIBarButtonItemStyleBordered target:self action:@selector(method)];
self.titleOfNavItem.leftBarButtonItem = button;
} 
```

并在另一个方法中调用该方法，如下所示：

```
[self addLeftButton:@"Instructions" callingMethod:@"haikuInstructions"]; 
```

我得到一个`unrecognized selector`错误。关于我做错了什么有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T22:12:05.963

你应该使用`NSSelectorFromString(NSString *aSelectorName)`：

```
UIBarButtonItem *button = [[UIBarButtonItem alloc] initWithTitle:titl style:UIBarButtonItemStyleBordered target:self action:NSSelectorFromString(method)]; 
```

**编辑：** 详细说明，`@selector`指令将按字面意思对待括号之间的名称。更重要的是，它不会检查该方法是否真的存在。这意味着如果您使用`@selector(method)`并且还有变量`NSString *method = @"haikuInstructions"`，您将不会指向选择器命名`"haikuInstructions"`，而是指向选择器命名`"method"`。

# java - Java\Android 时间戳返回错误的小时值

> ID：11918052
> 
> 赞同：0
> 
> 时间：2012-08-11T22:08:20.837
> 
> 标签：java, android, timestamp

出于某种原因，我的时钟只有 2 个小时，而我只运行了几秒钟。以下是时间戳和代码的结果：

```
08-12 01:03:47.858: I/System.out(2856): 1344722627872
08-12 01:03:51.198: I/System.out(2856): 1344722631206
08-12 01:03:54.698: I/System.out(2856): 3334
08-12 01:03:54.758: I/System.out(2856): 02:00:03

public static String getDate(long milliSeconds, String dateFormat)  {

    DateFormat formatter = new SimpleDateFormat(dateFormat);

     Calendar calendar = Calendar.getInstance();
     calendar.setTimeInMillis(milliSeconds);
     return formatter.format(calendar.getTime());   } 
```

这是调用的完整代码：

```
// Click Listener for Check In\Out Button

    checkIn.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // Check Out
            myVib.vibrate(10);
            if (clicked == true) {
                timeStampWhenOut = System.currentTimeMillis();
                killcheck = true;
                checkedStatus = "Check In";
                checkIn.setText(checkedStatus);
                long getShiftLength = ShiftLength(timeStampWhenIn,
                        timeStampWhenOut);
                System.out.println(timeStampWhenOut);
                System.out.println(getShiftLength);
                System.out.println(getDate(getShiftLength, "hh:mm:ss"));
                clicked = false;
                wasShift = true;

                // Check In
            } else if (clicked == false) {

                timeStampWhenIn = System.currentTimeMillis();
                System.out.println(timeStampWhenIn);
                checkedStatus = "Check Out";
                checkIn.setText(checkedStatus);
                killcheck = false;
                clicked = true;

            }
        }
    }); 
```

为什么时间错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:20:59.440

假设`3334`是经过的时间，您将日历设置为自纪元以来的 3.334 秒（大约 1970 年 12 月 31 日格林威治标准时间午夜）。然后，您正在格式化该日历。它告诉你，你的时区是凌晨 2 点加 3 秒，我猜你的时区是 GMT+2。

不要将 Calendar 和 SimpleDateFormatter 用于经过的时间——它不是适合这项工作的工具。请查看 Apache-Commons 中的 DurationFormatUtils 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:10:39.520

该代码对我来说工作正常。你能显示你在哪里调用 getDate 方法吗？这是我如何使用它：

```
System.out.println(getDate(System.currentTimeMillis(), "hh:mm:ss")); 
```

那是记录正确的时间（对我来说当前是 6:10:29）

编辑：你为什么还要在中间使用日历？您将您的方法交给毫秒，它会放入日历中，然后立即取出。

```
public static String getDate(long milliSeconds, String dateFormat)  {

    DateFormat formatter = new SimpleDateFormat(dateFormat);

     return formatter.format(milliSeconds);
} 
```

^ 那会好很多

# .net - 如何在 .NET 应用程序设置系统中以往返格式存储日期时间

> ID：11918065
> 
> 赞同：0
> 
> 时间：2012-08-11T22:10:07.587
> 
> 标签：.net, datetime, application-settings

所以今晚我问了一个关于在.NET的[应用程序设置系统中存储日期时间格式的问题。](http://msdn.microsoft.com/en-us/library/k4s6c3a0.aspx)我得到的答案是有道理的，但让我想到了另一种情况。

这只是假设，我可能发现自己不需要使用它，但知道常见答案是什么会很有趣。

似乎设置系统将日期时间转换为“通用日期长时间（“G”）”格式（请参阅MSDN 上的[标准日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/az4se3k1.aspx)），如果这就是你想要的，但如果你想存储怎么办使用“往返（“O”，“o”）”格式的值？

据我目前所见，您需要将其存储为字符串并自己解析。这是使用设计器时的唯一方法吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-08-11T22:33:46.200

无损序列化 a 的最快和最有效的方法`DateTime`是使用[ToBinary](http://msdn.microsoft.com/en-us/library/system.datetime.tobinary.aspx)和[FromBinary](http://msdn.microsoft.com/en-us/library/system.datetime.frombinary.aspx)方法。

```
settings.Timestamp = date.ToBinary();
// ...
DateTime date = DateTime.FromBinary(settings.Timestamp); 
```

# java - log4j 冲突？

> ID：11918069
> 
> 赞同：1
> 
> 时间：2012-08-11T22:10:47.450
> 
> 标签：java, log4j, htmlunit

我有一个 htmlunit 应用程序，我通过以下几行关闭了它的日志记录，因为它在控制台中打印了太多我不需要的消息。

```
LogFactory.getFactory().setAttribute(
    "org.apache.commons.logging.Log",
    "org.apache.commons.logging.impl.NoOpLog");
java.util.logging.Logger.getLogger("com.gargoylesoftware.htmlunit")
    .setLevel(Level.OFF);   
java.util.logging.Logger.getLogger("org.apache.commons.httpclient")
    .setLevel(Level.OFF); 
```

然后我将最新的 log4j jar 添加到我的项目中并对其进行配置，以便我可以拥有自己的自定义日志消息。但是现在来自 htmlunit 的所有内容也都进入了我的日志文件。我怎样才能防止这种情况？我只希望我自己的日志消息进入日志文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:08:30.357

关于 log4j 要了解的一件重要事情是它的“记录器层次结构”的概念，以及它如何影响它的设置。引用 log4j 文档，

> 如果一个记录器的名称后跟一个点是后代记录器名称的前缀，则称该记录器是另一个记录器的祖先。如果在它自己和后代记录器之间没有祖先，则称记录器是子记录器的父级。
> 
> 例如，名为“com.foo”的记录器是名为“com.foo.Bar”的记录器的父级。同样，“java”是“java.util”的父级和“java.util.Vector”的祖先。大多数开发人员应该熟悉这种命名方案。

记录器继承其父级的设置，并且“根记录器”始终位于层次结构的顶部。因此，在某种程度上，您可以将根记录器视为“默认”记录器设置，然后您可以仅为代码中包含的记录器添加这些设置。

我不知道如何在代码中进行设置，但这是我将使用 log4j.properties 文件执行的操作：

```
# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=logs/springapp.log
log4j.appender.file.MaxFileSize=1MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Direct log messages to console
log4j.appender.console=org.apache.log4j.ConsoleAppender
log4j.appender.console.Target=System.out
log4j.appender.console.layout=org.apache.log4j.PatternLayout
log4j.appender.console.layout.ConversionPattern=%d{ABSOLUTE} %5p %c{1}:%L - %m%n

# Root logger settings: by default only log messages at level "ERROR" and above 
# will be logged. These messages will be written to console
log4j.rootLogger=error, console

# All loggers with names starting with "org.somecompany.someproject"
# will log messages at all levels "DEBUG" and above.
# They will be written to file as well as console; writing to console
# is enabled since that setting is inherited from the root logger.
log4j.logger.org.somecompany.someproject=debug, file 
```

然后，假设每个类的记录器被命名为该类的完全限定名称，那么只需将上述配置中的“org.somecompany.someproject”替换为项目中包的根包名称，这应该给出你想要的行为。

有关更多信息，请查看[log4j 文档](http://logging.apache.org/log4j/1.2/manual.html)。

# jquery - 在 jQuery Datepicker 中选择日期范围并突出显示

> ID：11918071
> 
> 赞同：1
> 
> 时间：2012-08-11T22:11:07.200
> 
> 标签：jquery, jquery-ui, datepicker, range, highlight

我正在尝试在 jQuery Datepicker 中突出显示或更改一系列日期的 CSS。我希望用户能够单击开始日期和结束日期，并突出显示该范围之间的所有日期。单击时，我能够创建该范围内的日期数组，但由于某种原因，我无法向其中添加类来更改 CSS。

我如何获取该日期数组，然后为它们添加一个 CSS 类以更改背景/突出显示？

任何帮助将不胜感激！

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-03-17T14:46:16.203

我已经成功地使用了一个用于起始日期的日期选择器和一个用于截止日期的日期选择器，所以我为一个日期选择器修改了它。这是代码：

```
 $(function () {
                var today = new Date();
                var thisYear = (today).getFullYear();
                var fromDate = '1/1/2000'   //this is the initial from date to set the datepicker range
                var toDate = '1/7/2000' // this is the initial to date to set the datepicker range

//... initialize datepicker....
      },
      beforeShowDay: function(date){
            //if the date is in range
            if (date >= fromDate && date <= toDate) { 
               return [true, 'ui-individual-date', '']; //applies a css class to the range
             }
             else {
                return [true, '', ''];
              }
        },
       onSelect: function (dateText, obj) {

    //sets the new range to be loaded on refresh call, assumes last click is the toDate              
         fromDate = toDate; 
         toDate = new Date(dateText); 

        $(".classDp1").datepicker("refresh"); 
        $(".classDp2").datepicker("refresh"); 
      }, 
```

每次刷新 beforeShowDay 函数时都会使用新的 fromDate 和 toDate 范围调用。将变量放在函数之外并在其中修改它们可以在每次单击时应用 css 的突出显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:34:34.277

好的，假设您已经在数组中选择了用户选择的日期。您可以使用“beforeShowDay”选项指定一个函数，该函数将遍历当前可见月份中的每一天，然后您的函数可以将每个日期与您的数组进行比较，并在匹配的地方应用一个 css 类。

所以例如像这样初始化日期选择器......

```
jQuery(".cal").datepicker({
    beforeShowDay: checkDates
}) 
```

并且函数 checkDates() 看起来像这样（假设您的数组称为 dateArray....

```
function checkDates(theDate){
    for(i=0;i<dateArray.length;i++){
        if(dateArray[i].valueOf()===thedate.valueOf()){
            return [false,"cssClass","title"];
        }else return [true,""]
    }
}) 
```

如果日期包含在 dateArray 中，这会将“cssClass”类应用于日期

return 语句中的 true/false 位决定日期是否可选，标记为 'title' 的位是 html 标题属性（工具提示）

NB。这会将日期与最接近的毫秒进行比较，因此您可能希望将其修改为仅匹配天数

# php - 连接对象项

> ID：11918075
> 
> 赞同：2
> 
> 时间：2012-08-11T22:11:28.893
> 
> 标签：php

我有以下工作正常的功能。

```
function ($objects, $items = array())
{
  $result = array();
  foreach ($objects as $object) {
    $result[$object->id] = $object->first_name . ' ' . $object->last_name; 
  }
  return $result;
} 
```

但是，我想将一个数组传递给 $items，并将其分解，这样我就不必手动指定 first_name 和 last_name。

如果 $item 只是一个值（而不是数组），那么它会很简单：

```
$result[$object->id] = $object->$item; 
```

但是如果 $items 包含多个值并且我想用空格连接它们，我不知道如何使这项工作。类似于以下内容，但我需要在其中获取 $object

```
$items = array('first_name', 'last_name');
$result[$object->id] = implode(' ', $items); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T09:51:34.987

我说得对吗，您想使用 $item 中的字符串作为 $object 的属性名称？

```
function ($objects, $items = array())
{
  $result = array();
  foreach ($objects as $object) {
    $valuesToAssign = array();
    foreach ($items as $property) {
        $valuesToAssign[] = $object->$property;
    }
    $result[$object->id] = implode(' ', $valuesToAssign);
  }
  return $result;
} 
```

我不知道要避免第二次 foreach，但这会给你想要的结果。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:17:29.470

不知道我说得对不对，但是这个怎么样：

```
function foo($objects, $items = array()) {
    $result = array();
    $keys = array_flip($items);

    foreach ($objects as $object) {
        // Cast object to array, then omit all the stuff that is not in $items
        $values = array_intersect_key((array) $object, $keys);

        // Glue the pieces together
        $result[$object->id] = implode(' ', $values);
    }

    return $result;
} 
```

演示：[http ://codepad.viper-7.com/l8vmGr](http://codepad.viper-7.com/l8vmGr)

# r - 如何从 ggplot2 中的汇总数据创建堆积条形图

> ID：11918080
> 
> 赞同：5
> 
> 时间：2012-08-11T22:12:16.523
> 
> 标签：r, ggplot2, bar-chart

我正在尝试使用 ggplot 2 创建一个堆积条形图。我的宽格式数据看起来像这样。每个单元格中的数字是响应的频率。

```
activity                         yes    no  dontknow
Social events                     27    3   3
Academic skills workshops         23    5   8
Summer research                   22    7   7
Research fellowship               20    6   9
Travel grants                     18    8   7
Resume preparation                17    4   12
RAs                               14    11  8
Faculty preparation               13    8   11
Job interview skills              11    9   12
Preparation of manuscripts        10    8   14
Courses in other campuses          5    11  15
Teaching fellowships               4    14  16
TAs                                3    15  15
Access to labs in other campuses   3    11  18
Interdisciplinary research         2    11  18
Interdepartamental projects        1    12  19 
```

我使用 reshape2 融化了这张桌子，

```
 melted.data(wide.data,id.vars=c("activity"),measure.vars=c("yes","no","dontknow"),variable.name="haveused",value.name="responses") 
```

这是我所能得到的。我想创建一个堆积条形图，其中 x 轴为活动，y 轴为响应频率，每个条形图显示是、否和不知道的分布

我试过了

```
ggplot(melted.data,aes(x=activity,y=responses))+geom_bar(aes(fill=haveused)) 
```

但恐怕这不是正确的解决方案

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-13T00:12:11.167

你还没有说你的解决方案有什么不对的地方。但是一些可以被解释为问题的问题，以及每个问题的一种可能的解决方案是：

*   x 轴刻度线标签相互碰撞。解决方案 - 旋转刻度线标签；
*   标签（及其相应的条）出现的顺序与原始数据框中的顺序不同。解决方案 - 重新排列因素“活动”的水平；
*   要将文本定位在条形内，请将`vjust`参数 in设置`position_stack`为 0.5

以下可能是一个开始。

```
 # Load required packages
library(ggplot2)
library(reshape2)

    # Read in data
df = read.table(text = "
activity                         yes    no  dontknow
Social.events                     27    3   3
Academic.skills.workshops         23    5   8
Summer.research                   22    7   7
Research.fellowship               20    6   9
Travel.grants                     18    8   7
Resume.preparation                17    4   12
RAs                               14    11  8
Faculty.preparation               13    8   11
Job.interview.skills              11    9   12
Preparation.of.manuscripts        10    8   14
Courses.in.other.campuses          5    11  15
Teaching.fellowships               4    14  16
TAs                                3    15  15
Access.to.labs.in.other.campuses   3    11  18
Interdisciplinay.research          2    11  18
Interdepartamental.projects        1    12  19", header = TRUE, sep = "")

    # Melt the data frame
dfm = melt(df, id.vars=c("activity"), measure.vars=c("yes","no","dontknow"),
    variable.name="haveused", value.name="responses")

    # Reorder the levels of activity
dfm$activity = factor(dfm$activity, levels = df$activity)

    # Draw the plot
ggplot(dfm, aes(x = activity, y = responses, group = haveused)) + 
geom_col(aes(fill=haveused)) +
theme(axis.text.x = element_text(angle = 90, hjust = 1, vjust = 0.25)) +
geom_text(aes(label = responses), position = position_stack(vjust = .5), size = 3)  # labels inside the bar segments 
```

# ios - 如何从父视图控制器后面播放修复 uiwebview 中的 youtube 视频

> ID：11918082
> 
> 赞同：1
> 
> 时间：2012-08-11T22:12:34.900
> 
> 标签：ios, youtube, three20, autorotate, ttphotoviewcontroller

我已经在我的应用程序中实现了 TTPhotoViewController，它工作正常。但是，它似乎破坏了在我的 tabbarcontroller（子类）中旋转的唯一视图控制器上的横向。我还在`- (BOOL)shouldAutorotateToInterfaceOrientation:`我的子类 TTphotoviewcontroller 和 TTThumbviewcontrollers 中返回 NO 以停止照片库的横向方向。

以前能够定向到横向的视图控制器播放 youtube 视频。视图控制器加载了一个视频列表（youtube 移动页面），但是现在当您选择一个视频来播放文件时，文件会在 iOS 电影播放器​​中以横向方式播放（这是一件好事），但在父视图控制器的后面仍然是纵向的。

我删除了强制视频视图控制器定向为横向的代码，并且行为仍然存在，这让我认为这与 Three20 库中的文件有关。

有任何想法吗？

# magento - 覆盖 Magento 中的覆盖类

> ID：11918088
> 
> 赞同：1
> 
> 时间：2012-08-11T22:13:41.953
> 
> 标签：magento, magento-1.4, magento-1.5, magento-1.6

是否可以普遍覆盖 Magento 中所有被覆盖的类？

例如，如果我重写了 class `Mage_Catalog_Model_Layer_Filter_Attribute`，我应该能够重写所有已经被其他类重写的类。

# javascript - 为什么即使两个 URL 都来自 XXXX.com，我仍然会收到 405 错误？

> ID：11918091
> 
> 赞同：0
> 
> 时间：2012-08-11T22:13:57.803
> 
> 标签：javascript, jquery, xss

我有一个网站，我正在开发我的 REST 端点：

[https://prefixone.somesite.com](https://prefixone.somesite.com)

我还有另一个网站正在开发我的 UI 框架：

[https://prefixtwo.somesite.com](https://prefixtwo.somesite.com)

我可以成功登录并在 IE 中获得 200 响应。在 FF 和 Chrome 中，我得到一个“不允许的 405 方法”。Chrome 通过说“XMLHTTPRequest 无法加载 XXXXXXXXXXX。Access-Control-Allow-Origin 不允许来源 xxxxxxxxxxx 来阐明这种情况。

这两个网站都在 somesite.com

这种情况是否仍然符合 XSS 的条件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T22:10:14.097

您的问题是“为什么我仍然会收到 405，即使两个网址都是 XXXX.com 的形式？”，但实际上，您的网址**不是**来自同一个域。

`xxx.yyyy.com`并且`zzz.yyyy.com`不是同一个域。他们可能共享他们名字的重要部分，但他们并不相同。

这是因为域内子域的所有者完全有可能由完全独立的人操作。考虑`uk.com`。该域名的所有者将其中的三级域名作为标准英国国家级域名的竞争对手出售`co.uk`。

位于`xxx.uk.com`和的站点`zzz.uk.com`是完全不同的站点，您不会期望前者能够在不违反相同来源策略规则的情况下从后者加载内容。

浏览器不知道哪些域会执行此操作，哪些域不会执行此操作，因此它会安全行事并假设任何两个子域都可以由不同的人操作。

甚至`yyyy.com`和`www.yyyy.com`不被认为是一回事。

我希望这能回答你的问题。

至于该怎么办......

1）将所有内容放在同一个子域上。将站点拆分为多个子域的最常见原因是为了提高性能，但除非您使用的是 Google 或 Facebook，否则它不太可能对您的性能至关重要，而且您可能首先可以做的其他事情会更有帮助。此外，新的 SPDY 协议（即将演变为 HTTP v2）将使该技术过时。

2) 如果您必须将其拆分为多个子域，您可能需要考虑使用可以放置在每台服务器上的[crossdomain.xml 文件](http://webdev-il.blogspot.co.uk/2011/07/what-is-crossdomainxml-file.html)，以授予它们访问彼此内容的显式权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:44:43.967

基本上在您的代码中，您需要在 JavaScript 中运行以下命令：

```
document.domain = "somesite.com"; 
```

这将告诉浏览器，出于同源策略的目的，应该重要的部分`somesite.com`不是前缀部分。

在 Google 上查找“文档域”以获取更多信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T21:36:50.693

同源政策限制了这一点。顾名思义，它适用于起源，而不是域。来源是一个完整的域名+协议+端口号。因此，如果它们在不同的端口或协议上，即使在同一主机上运行的两个页面也无法通信。

如果您计划仅支持较新的浏览器，请考虑添加 x-access-control 标头。如果您需要支持较旧的浏览器，请查看 easyXDM 之类的东西。

# java - 选择哪个ChoiceBox-Event？

> ID：11918095
> 
> 赞同：5
> 
> 时间：2012-08-11T22:16:05.837
> 
> 标签：java, javafx, javafx-2, fxml

我使用 JavaFX Scene Builder 在 fxml 中放置了一个 ChoiceBox。

FXML 具有分配给它的控制器。

我的问题是：如果我想知道更改的值，我需要注册哪个事件？

```
onInputMethodTextChanged="#languageSelectionModified" 
```

这不适用于以下代码

```
public void languageSelectionModified(Event event) {
    ChoiceBox<String> box = (ChoiceBox<String>) event.getSource();
    System.out.println(box.getValue());
} 
```

这仅适用于初始点击（即打开列表，而不是选择项目时）：

```
onMouseClicked="#languageSelectionModified" 
```

尽管由于触摸或键盘是输入方法的情况，鼠标事件永远不会是一个好的选择，但它仍然证明可以访问 System.out。

我完全不知道这些东西记录在哪里（在默认的 Java-API 中它们不是）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T22:28:46.320

向控制器中的@FXML 注入选择框添加一个侦听器：

```
choicebox.getSelectionModel().selectedItemProperty().addListener(choiceboxSelectionChangeListener); 
```

您还可以绑定到所选项目：

```
label.textProperty().bind(choicebox.getSelectionModel().selectedItemProperty()); 
```

这是在控制器中为 FXML 中定义的 ComboBox 连接侦听器的[示例。](https://gist.github.com/3062859)ChoiceBox 的逻辑几乎相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-28T01:06:08.353

您还可以使用 FXML`onAction`属性：

```
<ChoiceBox onAction="#languageSelectionModified" /> 
```

# javascript - 文字掩盖了背景

> ID：11918101
> 
> 赞同：3
> 
> 时间：2012-08-11T22:16:56.957
> 
> 标签：javascript, html, css

您有一个带有文本的对象（例如跨度或 div）。并且此文本应遮盖对象的彩色背景，以便您可以看到背景（例如主体元素）。

我知道有“面具图像”。但他们不想进一步开发这种 CSS3 技术。是否有一个 Javascript 解决方案，所以任何人都可以看到这个？

有没有机会做这个跨浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:48:17.493

看起来最接近完整的跨浏览器支持（不为文本中的每个字符使用图像）是[此处](http://webdesignerwall.com/tutorials/css-gradient-text-effect)显示的非常有限的技巧。但是，这些技巧不适用于摄影背景图像。

如果您不需要 IE8 或更早版本的支持，您可以研究在 SVG 或 Canvas 中执行此操作。但请注意，3.0 之前的 Android 不支持 SVG，这排除了多达 85% 的现有 Android 设备。

Webkit 有一个专有的`background-clip:text`风格，但它只适用于 Chrome 和 Safari。

`color:transparent`事实证明，使用文本完全没有用。

总的来说，最好的选择可能是画布，特别是如果您可以找到为 IE8 及更早版本提供 VML 替代方案的 JS 库或 jQuery 插件（假设 VML 解决方案支持文本掩码），或者如果您可以提供优雅的-degradation IE8 和更早版本的后备选项，即使没有文本掩码，它看起来也足够了。

另一个容易被忽视的解决方案：如果您可以使用页面上的当前文本在服务器上动态呈现图像（根据需要缓存它），然后将该图像提供给客户端，那么就没有跨浏览器问题需要处理. 例如，这可以使用 GD 图形库在 PHP 中完成。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:34:13.600

想不出在 javascript 或 html 中执行此操作的技术。但是，可以使用的一种方法（尽管并不完全可取 - 我意识到这将非常耗时）将为`.png`每个字母创建一个透明的，将字母的背景设置为透明，将图像的其余部分设置为一些颜色，然后使用那些。您必须为您希望使用的每种颜色制作一整套。您也可以只制作一个包含一个单词的图像，`.png`然后使用更容易的图像。这将是使其适用于所有浏览器的唯一当前方法，包括较旧的浏览器，例如 IE6，其中新技术不可用。

在我看来，这目前不起作用的原因是，当您在 a 内有文本时，`<div>`或者`<span>`即使文本是透明的，它也只会默认为`<div>`or的颜色`<span>`。如果他们的背景设置为透明，那么甚至什么都不会出现。相反，如果设置了它们的颜色，则文本不会显示，因为它只会继承该颜色。

# java - 不幸的是（我的应用程序）已停止工作

> ID：11918105
> 
> 赞同：0
> 
> 时间：2012-08-11T22:17:29.673
> 
> 标签：java, android

好的，这发生在我创建一个简单的 ImageButton 时。我看不出我做错了什么......这是我的代码：

（我的 Activity.Xml 文件）：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/LinearLayout1"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="@drawable/tapbgh"
    android:orientation="vertical" >
    <TextView
        android:id="@+id/editText1"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:gravity="center"
        android:text="@string/level01"
        android:textColor="#FFFFFF" />
    <TextView
        android:id="@+id/Score"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:gravity="center"
        android:text="@string/click0"
        android:textColor="#FFFFFF"
        android:textSize="16pt" />
    <Chronometer
        android:id="@+id/Timer"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:gravity="center_horizontal"
        android:text="01:00"
        android:textColor="#FFFFFF" />

    <Button
        android:id="@+id/Tap"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="0.81"
        android:background="@drawable/buttonbg" />
    <Button
        android:id="@+id/Menu"
        android:layout_width="270dp"
        android:layout_height="wrap_content"
        android:layout_gravity="center_horizontal"
        android:text="Menu" />

    <ImageButton
        android:id="@+id/Reset"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:contentDescription="@string/resetbtn"
        android:src="@drawable/resetbtn" />
</LinearLayout> 
```

（我的 .Java 文件）：

```
package my.first.app;
import android.os.Bundle;
import android.app.Activity;
import android.app.AlertDialog;
import android.content.DialogInterface;
import android.view.ContextMenu;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.TextView;
import android.widget.Toast;
import android.view.ContextMenu.ContextMenuInfo;
import android.view.View.OnClickListener;
import android.widget.Button;
//Click Events Below This Line
public class Tap_Game_Activity extends Activity {
    private Button tapBtn;
    private Button rstBtn;
    int scr = 0;
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Button Menu = (Button) findViewById(R.id.Menu);
        registerForContextMenu(Menu);
        tapBtn = (Button) findViewById(R.id.Tap);
        rstBtn = (Button) findViewById(R.id.Reset);
        rstBtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                TextView Score = (TextView) findViewById(R.id.Score);
                Score.setText("0");
                scr = 0;
            }
        });
        tapBtn.setOnClickListener(new OnClickListener() {
            @Override
            public void onClick(View v) {
                // TODO Auto-generated method stub
                scr = scr + 1;
                TextView Score = (TextView) findViewById(R.id.Score);
                Score.setText(String.valueOf(scr));
            }
        });
    }

// Options Menu

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

    @Override
    public void onCreateContextMenu(ContextMenu menu, View view, ContextMenuInfo menuInfo) {
        super.onCreateContextMenu(menu, view, menuInfo);

        menu.setHeaderTitle("Menu");
        menu.add(0, view.getId(), 0, "Resume");
        menu.add(0, view.getId(), 0, "Quit");
    }

    @Override
    public boolean onContextItemSelected(MenuItem item) {
        if(item.getTitle()=="Invoke Context Function 1") {
            contextFunction1(item.getItemId());
        }
        else if(item.getTitle()=="Invoke Context Function 2") {
            contextFunction2(item.getItemId());
        }
        else {
            return false;
        }
        return true;
    }

    public void contextFunction1(int id){
        Toast.makeText(this, "function 1 invoked!", Toast.LENGTH_SHORT).show();
    }

    public void contextFunction2(int id){

            new AlertDialog.Builder(this)
                   .setMessage("Are you sure you want to exit?")
                   .setCancelable(false)
                   .setPositiveButton("Yes", new DialogInterface.OnClickListener() {
    @Override
    public void onClick(DialogInterface dialog, int id) {
                            Tap_Game_Activity.this.finish();
                       }
                   })
                   .setNegativeButton("No", null)
                   .show();
        }

 } 
```

我觉得它可能在这一行：

```
rstBtn = (Button) findViewById(R.id.Reset); 
```

但我还是不明白，任何帮助都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:22:49.373

[API 告诉我](http://developer.android.com/reference/android/widget/ImageButton.html)，我们不能`ImageButton`转换为`Button`. 尝试声明`rstBtn`为 `ImageButton`并调整演员表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:25:15.010

`rstBtn = (Button) findViewById(R.id.Reset);` 您正在转换`ImageButton`为`Button`when`ImageButton`不**继承**自`Button`.

[http://developer.android.com/reference/android/widget/ImageButton.html](http://developer.android.com/reference/android/widget/ImageButton.html)

顺便说一句：请选择一个能更好地描述您的问题的标题，并包含您在问题中收到的每条错误消息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T22:45:31.620

```
private ImageButton rstBtn;

....

rstBtn = (ImageButton) findViewById(R.id.Reset);
rstBtn.setOnClickListener(........ 
```

# perforce - 将 perforce depot 从 windows 迁移到 linux

> ID：11918109
> 
> 赞同：2
> 
> 时间：2012-08-11T22:18:21.667
> 
> 标签：perforce

我正在尝试将 Perforce depot 从 Windows 迁移到 Linux，并且在迁移后访问 linux 中的文件时遇到问题。以下是我迁移所遵循的步骤： 在 Windows 上，我运行了以下命令：

```
p4d -r P4ROOT -xv
p4d -r P4ROOT -jc finalcheckpoint 
```

然后将 depot 复制到 Ubuntu 上并运行以下命令：

```
p4d -r P4ROOT -jr finalcheckpoint
p4d -r . -p localhost:1666
p4 verify -q //... 
```

运行 p4 verify 时我没有收到任何错误，但是当我尝试签出文件时出现错误 - 找不到路径。

我在这里错过任何步骤吗？如果有人从 Windows 迁移到 Linux，请分享迁移步骤。

谢谢，维杰

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:19:50.757

从 Windows 迁移到 Linux 有很大的不同——您通常是从不区分大小写的平台迁移到区分大小写的平台。在 perforce.com 主网站上有一篇非常好的和详细的知识库文章详细说明了这一点：http: [//kb.perforce.com/article/75/cross-platform-perforce-server-migration](http://kb.perforce.com/article/75/cross-platform-perforce-server-migration)

尽管您从未更新文件的内部行尾，但您的步骤看起来或多或少是正确的。知识库文章推荐了这个简短的 shell + perl 脚本：

```
find . -type f -name '*,v' -print -exec perl -p -i -e 's/\r\n/\n/' {} \; 
```

您的未找到路径错误可能与您的客户端工作区定义不匹配。我建议创建一个新的来测试并确保正确指定您使用的路径，特别注意任何大写或小写字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-05T15:57:24.200

您将需要使用 p4migrate 工具 [ftp://ftp.perforce.com/perforce/tools/p4-migrate/p4migrate.html](ftp://ftp.perforce.com/perforce/tools/p4-migrate/p4migrate.html)

检查零件

**从 Windows 迁移到 Unix**

# delphi - Delphi编辑文本整数：减号错误

> ID：11918113
> 
> 赞同：5
> 
> 时间：2012-08-11T22:19:22.107
> 
> 标签：delphi, sign

嗨，我是德尔福的初学者。但让我感到困惑的是，我有 Edit1.Text 和变量“i”，它使用 StrToInt(Edit1.Text); 一切正常，直到我输入减号

如果我用数字复制/粘贴减号（例如-2），它可以工作任何人都可以帮助我！问候， 奥马尔

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T23:10:28.520

当[`StrToInt`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.StrToInt)您不能 100% 确定输入字符串是否可以转换为整数值时，使用转换函数是不安全的。而编辑框就是这样一个不安全的案例。您的转换失败，因为您输入了`-`无法转换为整数的符号作为第一个字符。当您清除编辑框时也会发生同样的情况。为了使这种转换安全，您可以使用[`TryStrToInt`](http://docwiki.embarcadero.com/Libraries/en/System.SysUtils.TryStrToInt)为您处理转换异常的函数。你可以这样使用它：

```
procedure TForm1.Edit1Change(Sender: TObject);
var
  I: Integer;
begin
  // if this function call returns True, the conversion succeeded;
  // when False, the input string couldn't be converted to integer
  if TryStrToInt(Edit1.Text, I) then
  begin
    // the conversion succeeded, so you can work
    // with the I variable here as you need
    I := I + 1;
    ShowMessage('Entered value incremented by 1 equals to: ' + IntToStr(I));
  end;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T22:25:51.040

很明显，你会得到一个错误，因为`-`它不是整数。您可以改用 TryStrToInt。

# javascript - “var self = this”方法背后的基本原理是什么？

> ID：11918115
> 
> 赞同：6
> 
> 时间：2012-08-11T22:19:38.053
> 
> 标签：javascript

> **可能重复：**
> [JS：var self = this？](https://stackoverflow.com/questions/337878/js-var-self-this)

在查看用 JavaScript 编写的任意代码时（例如在 GitHub 上），许多开发人员使用`var self = this`然后使用`self`而不是`this`来引用当前对象。

这种方法背后的基本原理是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-11T22:24:50.407

The value of `this` is contextual. Writing `var self = this` is a way to save the value of `this` in one context so that it can be used in another.

Example:

```
function Test() {
    var self = this;
    console.log(this);
    setTimeout(function() {
        console.log(this);
        console.log(self);
    }, 1000);
} 
```

Prints:

```
Test {}
Window 11918143#comment15869603_11918143
Test {} 
```

Notice that the value of `this` has changed, but we can still refer to the original value using `self`.

This works because functions in JavaScript "close over" the variables in their lexical scope (which is just a more technical way of saying that the inner function can see variables declared in the outer function). This is why we write `var self = this`; the variable `self` is available to all inner functions, even if those functions don't execute until long after the outer function has returned.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T22:23:35.770

例如，当您在 jQuery 中使用回调时，您可能希望引用父函数的`this`变量，一旦您在另一个函数中，该变量将采用不同的值：

```
$('#foo').click(function() {
  var self = this;

  $.get('foo.php', function(data) {
    // In here, self != this

    $(self).text(data);
  });
}); 
```

In this case, replacing `$(self)` with `$(this)` would not work. Basically, you're storing `this` in a variable for later use.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T22:21:54.287

通常当您在某些代码中有嵌套函数声明但您想从“子”函数内部引用“父”函数时。

```
Ext.define('MyPanel', {
    extend: 'Ext.panel.Panel',

    title: 'My Panel',

    initComponent: function() {

        var self = this;

        Ext.applyIf(self, {
            items: [
                {
                xtype: 'button',
                text: 'MyButton',
                handler: function() {
                    console.log(this); //the button
                    console.log(self); //the panel
                }}
            ]
        });

        self.callParent(arguments);
    }
});

Ext.onReady(function() {

    var p = new MyPanel({
        renderTo: Ext.getBody()
    });

});​ 
```

例子：

[http://jsfiddle.net/8F4UN/](http://jsfiddle.net/8F4UN/)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-11T23:16:14.240

Let me give a somewhat more technical explanation. When you access a variable in Javascript, the interpreter looks for the value of the variable in what's known as the scope stack. You can think of it as a stack of Objects. The interpreter will look first at the top of the stack. If the variable isn't defined in that scope object, it will look at the object beneath it. If it's not there, the interpreter looks another level down until it hits the bottom of the stack.

Initially, the only scope object in the stack is the global object. A variable is either there or not. When you call a function, the interpreter pushes a new object onto the scope stack--to be used for storing local variables. When you access *var1*, the interpreter will first look in the local scope object. If it's there, then it'll use the value stored there. If it's not, it moves on to the scope object further down the stack--which happens to be the global scope.

When you create a function within a function, something interesting happens. The interpreter will create what's known as an "activation object". It's basically a snapshot of the local scope object of the outer function. This activation object becomes associated with the inner function. When the inner function is called, the activation object is push onto the scope stack before the local scope (i.e. the local scope would still be at the top). Access of a variable in the inner function means the interpreter will first check the local scope object, then the activation object, then the global scope object.

By definition, the *this* variable always exists in the local scope of a function. It always refers to the implicit first argument. When you call a plain-o function, the compiler passes null as *this*. The variable exists, but points to null. A search for *this* would never look beyond the local scope object.

The purpose of the assignment to *self* is basically to fool the interpreter, so that it would look beyond the local scope of the inner function. When you access *self* in the inner function, the interpreter wouldn't find it in the local scope. So it checks the activation object. Provided that the self = this statement occurs before the creation of the inner function, *self* would exist in the activation scope object, pointing to the *this* object seen by the outer function.

# javascript - WebGL 中的相同旋转

> ID：11918120
> 
> 赞同：0
> 
> 时间：2012-08-11T22:20:38.717
> 
> 标签：javascript, webgl

我想以与相机旋转相同的方式旋转飞机（看起来它根本不动）

我的相机 animate() 函数：

```
camera.position.x = Math.sin(t/1500)*200;
    camera.position.y = 250;
    camera.position.z = Math.cos(t/1500)*200; 
```

和飞机（用 CubeGeometry 完成）：

```
var plane = new THREE.Mesh(
    new THREE.CubeGeometry(100, 1, 50),
    new THREE.MeshBasicMaterial({color: 0xFF00FF}));
    plane.position.y = 115;
    plane.position.z = 25; 
```

飞机看起来像静止不动需要哪些参数？

谢谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T04:14:20.457

希望包括以下代码可以帮助您。随着相机旋转，平面也会旋转以朝向相机。

plane.lookAt(camera.position);

# java - 如何在 Java 中将 BigInteger 值转换为十六进制

> ID：11918123
> 
> 赞同：19
> 
> 时间：2012-08-11T22:21:29.263
> 
> 标签：java

我有一个 BigInteger 数字，我需要将其转换为十六进制。我尝试了以下方法：

```
 String dec = null;
    System.out.println("Enter the value in Dec: ");
    BufferedReader br = new BufferedReader(new InputStreamReader(System.in));
    dec = br.readLine();  
    BigInteger toHex=new BigInteger(dec,16);
    String s=toHex.toString(16);
    System.out.println("The value in Hex is: "+ s); 
```

但这并没有给我转换后的正确值。任何人都可以帮忙。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-11T22:24:56.907

你应该改变

```
BigInteger toHex=new BigInteger(dec,16); 
```

到

```
BigInteger toHex=new BigInteger(dec,10);
                                     ^ 
```

目前，您向用户询问十进制值，然后将输入解释为十六进制值。（这就是输出与输入相同的原因。）

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-19T11:08:59.390

```
String hexValue = "FFF";
    System.out.println("HexaDecimal Value :"+hexValue);
    BigInteger bigint = new BigInteger(hexValue ,16);
    System.out.println("Big Int Value :"+bigint);
    BigInteger s = new BigInteger("4");
    bigint = bigint.add(s);
    System.out.println("After Addition :"+bigint);
    String hexNewValue = bigint.toString(16);
    System.out.println("HexaDecimal Value after Addition :"+hexNewValue); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-11T22:25:04.400

我想我看到了问题：

```
BigInteger toHex=new BigInteger(dec,16); 
```

您正在使用基数 16 将您键入的数字转换为整数。尝试`10`在此处使用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-11T22:25:56.863

采用

```
 BigInteger toHex=new BigInteger(dec,10); 
```

# python - mysql加载本地infile权限问题

> ID：11918124
> 
> 赞同：0
> 
> 时间：2012-08-11T22:21:30.470
> 
> 标签：python, mysql, ubuntu

我无法使用本地 infile 将数据加载到 mysql 中。我得到的错误是`Can't get stat of 'filename' (Errorcode:13)`.

我试图修改我的文件使用的目录的权限，`chmod -R 755 dir_name'`但仍然得到同样的错误。有任何想法吗？我首选的解决方案是以某种方式修改包含我的文件的目录的权限，以便可以读取我的 mysql - 但如果需要，我也愿意接受其他解决方案。

我正在使用的python代码如下。

```
def csv_todb(filename, cursor):
    query = "load data local infile '%s' into table mytable fields terminated by ',' lines terminated by '\n' ; " % (filename) 
    cursor.execute(query) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:03:49.903

`LOAD DATA LOCAL INFILE`出于安全原因，可能已禁用。请参阅[--local-infile](http://dev.mysql.com/doc/refman/5.5/en/privileges-options.html#option_mysqld_local-infile)。

# php - 如何使用 PHP 获取 h1 的内容以在 Twitter 数据文本参数中使用

> ID：11918130
> 
> 赞同：0
> 
> 时间：2012-08-11T22:23:07.017
> 
> 标签：php, javascript, html, twitter

这是我的 twitter.php 的内容包括：

```
<?php
$tags = get_meta_tags();
echo $tags;
$dynamic_tweet_text="Episode Title by @OurCityOurStory: http://$_SERVER[HTTP_HOST]$_SERVER[REQUEST_URI]";
?>

<a href="https://twitter.com/share" class="twitter-share-button" rel="canonical" data-text="<?php print $dynamic_tweet_text ?>">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

阅读“剧集标题”的部分`$dynamic_tweet_text`需要是动态的。我需要从`h1#title`.

我该怎么做呢？由于 Twitter 的 JS 工作方式，它必须在服务器端完成，而且我对 PHP 不是很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:42:15.650

如果您熟悉 jquery，您可以使用允许您通过选择器、id、元素等获取内容的库 - 就像在 jquery 中一样。看看这个[http://simplehtmldom.sourceforge.net/](http://simplehtmldom.sourceforge.net/)

# java - 绘制方法的问题

> ID：11918133
> 
> 赞同：0
> 
> 时间：2012-08-11T22:23:49.793
> 
> 标签：java, nullpointerexception, draw

所以我对我目前正在制作的塔防游戏有疑问。我已经在下面发布了我遇到错误的部分代码。

它的概要是我用 mainMenu 开始游戏，它有一个按钮可以进入 charMenu 或退出游戏。这个屏幕加载得很好。

现在，当我单击进入 charMenu 时，我在“charMenu.draw(g)”行上收到 NullPointerException。如果我只创建一个菜单并删除另一个菜单的代码，那么两者都可以正常工作，但是如果我尝试为它们都启用代码，我会收到错误并且无法调试它可以做什么是。

```
public class Screen extends JPanel implements Runnable {

public static boolean isMainMenu = true;
public static boolean isCharacterMenu = false;
public static MainMenu mainMenu;
public static CharMenu charMenu;

public void paintComponent(Graphics g) {

if(isMainMenu && !isCharacterMenu){ // Draws the Main Menu
        mainMenu.draw(g);
    }
    if(isCharacterMenu && !isMainMenu){
        charMenu.draw(g);
    }
    if(!isMainMenu && !isCharacterMenu){
        //draws the actual game board.
    }
}

public void run() {
    while(true) {
        if(isMainMenu && !isCharacterMenu){//The Main Menu
            mainMenu = new MainMenu();
        }
        if(isCharacterMenu && !isMainMenu)
            charMenu = new CharMenu();
        if(!isMainMenu && !isCharacterMenu) {
             //runs the game board
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:30:22.817

您正在对空引用 ( charMenu ) 调用方法 (draw () )，这就是触发 NPE 的原因。

在开始时声明它们应该这样做。

```
public static MainMenu mainMenu =  new MainMenu();
public static CharMenu charMenu = new CharMenu(); 
```

**更新**

您还应该更新您的变量`isCharactereMenu`并`isMainMenu`使用 run 函数 - 例如在声明之后`charMenu`- 设置`isCharactereMenu`为 true

# linux - Apache - 限制子文件夹文件，列出或包括父文件夹或文件

> ID：11918134
> 
> 赞同：1
> 
> 时间：2012-08-11T22:23:52.383
> 
> 标签：linux, apache, permissions

我在一个共享主机中，我为我的朋友腾出一些空间来托管他的网站。我知道一个简单的 php 脚本的强大功能，我想限制子文件夹文件访问我的父文件夹。这实际上意味着“我的朋友只能访问他的域文件夹”。他既不能在他的根目录之外包含任何文件，也不能列出这些文件。

public_html/ 是我的目录的根目录
public_html/myfriend.com/ 是我朋友目录的根目录

我想两个都学。
01：public_html/ 可以被除myfriend.com/ 文件夹下的文件以外的所有文件访问
02：public_html/ 子目录下没有文件可以访问。

这对我有很大帮助。
提醒：作为共享主机持有者，我无法通过
任何方式访问 httpd.conf 使用 httpd.conf 或没有 httpd.conf？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:29:06.730

好吧，这一切都是在服务器端完成的，所以为什么不给你的朋友创建单独的 FTP 用户、MySQL 用户，限制对 SSH 的访问，并在 FTP 设置中创建`/public_html/friendzone`他的 FTP 用户的根文件夹？

# c++ - C++11 不使用 Macports gcc47

> ID：11918138
> 
> 赞同：1
> 
> 时间：2012-08-11T22:24:29.323
> 
> 标签：c++, c++11, g++, macports

我最近在我的 Macbook Pro 上安装了 Macports，并安装了该`gcc47`端口。在添加`alias g++="g++-mp-4.7"`到我`.profile`并确保我正在使用`g++-4.7`之后，我尝试构建我的一个使用 C++11 的项目。但是，我收到此错误：

```
cc1plus: error: unrecognized command line option "-std=c++11" 
```

我觉得这很奇怪，因为 Macports 构建了支持 C++ 的 gcc，所以我希望 C++11 应该可以正常工作。我已经粘贴了`g++ -v`下面的输出。您对为什么`g++-mp-4.7`不将其识别`-std=c++11`为有效选项有任何想法吗？

```
COLLECT_GCC=g++-mp-4.7
COLLECT_LTO_WRAPPER=/opt/local/libexec/gcc/x86_64-apple-darwin12/4.7.1/lto-wrapper
Target: x86_64-apple-darwin12
Configured with: ../gcc-4.7.1/configure --prefix=/opt/local --build=x86_64-apple-darwin12 --enable-languages=c,c++,objc,obj-c++,lto,fortran,java --libdir=/opt/local/lib/gcc47 --includedir=/opt/local/include/gcc47 --infodir=/opt/local/share/info --mandir=/opt/local/share/man --datarootdir=/opt/local/share/gcc-4.7 --with-libiconv-prefix=/opt/local --with-local-prefix=/opt/local --with-system-zlib --disable-nls --program-suffix=-mp-4.7 --with-gxx-include-dir=/opt/local/include/gcc47/c++/ --with-gmp=/opt/local --with-mpfr=/opt/local --with-mpc=/opt/local --with-ppl=/opt/local --with-cloog=/opt/local --enable-cloog-backend=isl --enable-stage1-checking --disable-multilib --enable-lto --with-as=/opt/local/bin/as --with-ld=/opt/local/bin/ld --with-ar=/opt/local/bin/ar --with-bugurl=https://trac.macports.org/newticket --disable-ppl-version-check --with-pkgversion='MacPorts gcc47 4.7.1_2'
Thread model: posix
gcc version 4.7.1 (MacPorts gcc47 4.7.1_2) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T10:40:40.130

为了将来参考，如果你安装 gcc_select 你可以这样做：

```
 sudo port select gcc mp-gcc47
 hash gcc 
```

这应该设置你的 Macports 安装的 gcc；如果您需要重置为 Xcode 的默认值，只需使用 'none' 重新运行它

编辑：Xcode 4.4.x 带有一个不错的 Clang 版本；如果您安装它，然后从 Preferences->Downloads: Command Line Tools 单击“Install”

运行 clang 为：

```
clang++ -std=c++11 -stdlib=libc++ ... 
```

请注意，如果未安装 mp-gcc47，您需要先执行此操作：

```
 sudo port install mp-gcc47 
```

要获取可用 gcc 端口的完整列表：

```
 sudo port list | grep gcc | less 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:18:15.080

我的问题是，由于 GNU Make 在不同的 shell 中执行命令，`alias g++="g++-mp-4.7"`对`make`.

# java - 在 Git 中显示特定人员的日志信息

> ID：11918140
> 
> 赞同：1
> 
> 时间：2012-08-11T22:24:39.607
> 
> 标签：java, git

我正在研究 Java 以显示来自 Git 存储库的一些信息。我正在使用“Runtime.getRuntime().exec”来执行命令。

所以当我写

```
Process process = Runtime.getRuntime().exec("git --git-dir=/home/gh/git/.git --work-tree=/home/gh/git log"); 
```

它完美无缺

但是，我需要获取特定人的日志信息，所以当我编写以下语句时，它没有显示任何结果

```
String activeDeveloper = "Carlos Rica";
Process process = Runtime.getRuntime().exec("git --git-dir=/home/ghadeer/git/.git --work-tree=/home/ghadeer/git log --author=" + activeDeveloper); 
```

有谁知道怎么回事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:48:57.853

按照[mazaneicha](https://stackoverflow.com/users/638764/mazaneicha)的[建议](https://stackoverflow.com/questions/11918140/display-log-information-for-a-specific-person-in-git#comment15869650_11918140)，在作者姓名周围添加这些引号的常用方法是：

```
Process process = Runtime.getRuntime().exec("git --git-dir=/home/ghadeer/git/.git --work-tree=/home/ghadeer/git log --author=\"" + activeDeveloper + "\""); 
```

但是，如果这仍然不起作用，则需要标记所有命令，如“ [`Runtime.getRuntime().exec()`](https://stackoverflow.com/questions/2146727/runtime-getruntime-exec/2147562#2147562)” SO 问题中所示。

# c++ - 涉及嵌套模板的 MSVC 编译器错误

> ID：11918142
> 
> 赞同：2
> 
> 时间：2012-08-11T22:24:46.970
> 
> 标签：c++, templates, visual-c++, compiler-errors, nested-class

以下代码可使用 GCC 4.7 和 clang 3.0 编译，但不能使用 MSVC 10：

```
template <typename X>
struct point
{
    template <typename Seq>
    struct point_iterator
    {
        template <typename T> 
        struct deref;

        template <typename Sq>
        struct deref<point_iterator<Sq> >
        {
        };
    };
};

int main()
{
    typedef point<int> point_t;
    typedef point_t::point_iterator<point_t> Iterator;
    Iterator::deref<Iterator> m;
} 
```

MSVC 给出的编译器错误是：

```
test.cpp
testcpp(21) : error C2079: 'm' uses undefined struct 'point<X>::point_iterator<Seq>::deref<T>'
        with
        [
            X=int,
            Seq=point_t
        ]
        and
        [
            T=Iterator
        ] 
```

我认为应该定义有问题的类型，因为它应该与`deref`.

1.  这是有效的代码吗？如果是这样，并且拒绝它是 MSVC 的一个错误，有谁知道这个错误是否已经被报告？
2.  如果它是一个错误，有没有人知道它的解决方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:58:49.837

问题是 MSVC10 不同意你专门化了这个类。如果你试试这个

```
 template <typename Sq>
    struct deref
    {
       typedef int basic;
    };

    template <typename Sq>
    struct deref<point_iterator<Sq> >
    {
       typedef int special;
    }; 
```

你会发现它`Iterator::deref<Iterator>::special`存在于 gcc 中，但只有 MS`basic`存在。

我确实认为您的代码是正确的。

似乎只有部分专业化受到影响。专门从事`int`预期的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T09:28:49.547

**您的原始代码**

以下在 Visual C++ Express 2010 上编译但生成错误答案：

```
#include <iostream>

template <typename X>
struct point
{
    template <typename Seq>
    struct point_iterator
    {
        template <typename> 
        struct deref 
        {
                static const int value = 0;
        };

        template <typename Sq>
        struct deref< point_iterator<Sq> > 
        { 
                static const int value = 1; 
        };
    };
};

int main()
{
    typedef point<int> point_t;
    typedef point_t::point_iterator<point_t> Iterator;
    int v = Iterator::deref<Iterator>::value;
    std::cout << v << "\n"; // prints 1 on gcc 4.5.1, prints 0 on VC++ 2010
    return 0;
} 
```

这解释了你得到的编译错误：VC++ 试图实例化`deref`你没有定义的主模板。在这一点上，看起来 VC++ 是错误的，而 gcc / clang 是优秀的编译器。

**中间“解决方案”**

但是，将`point_iterator`及其嵌套移动`deref`到外部命名空间`detail`会为 gcc 和 VC++ 提供相同但错误的结果。调用`detail::point_iterator::deref`给出了你想要的，但是现在调用嵌套的`point_iterator`内部`point`会为 gcc 和 VC++ 提供错误的结果！显然，嵌套模板通常对编译器来说很难。

```
#include <iostream>

namespace detail {
    template <typename Seq>
    struct point_iterator
    {
        template <typename> 
        struct deref 
        {
                static const int value = 0;
        };

        template <typename Sq>
        struct deref< point_iterator<Sq> > 
        { 
                static const int value = 1; 
        };
    };
}

template<typename X>
struct point
{
        template<typename Seq>
        struct point_iterator
        :
                public detail::point_iterator<Seq>
        {};
};

int main()
{
    typedef point<int> point_t;

    typedef point_t::point_iterator<point_t> Iterator1;
    int v1 = Iterator1::deref<Iterator1>::value;
    std::cout << v1 << "\n"; // prints 0 on both gcc 4.5.1 and VC++ 2010

    typedef detail::point_iterator<point_t> Iterator2;
    int v2 = Iterator2::deref<Iterator2>::value;
    std::cout << v2 << "\n"; // prints 1 on both gcc 4.5.1 and VC++ 2010

    return 0;
} 
```

**推荐的方法**

嵌套模板还有其他问题：如果不专门化外部模板，就不能明确专门化内部模板（具有讽刺意味的是，VC++ 确实允许这种非标准功能！）。这可以通过使用虚拟模板参数并部分专门化它们来解决（尽管如果您给这个虚拟模板参数一个默认值，VC++ 将需要抑制虚假的编译器警告）。

因此，我的建议是解开您获得的整个嵌套模板层次结构，并简单地定义 3 个单独的模板，并根据您的喜好对它们进行专门化。这将产生最简单的代码并且不会产生任何意外。

```
#include <iostream>

template<typename X>
struct point {};

template <typename Seq>
struct point_iterator {};

template <typename> 
struct deref 
{
        static const int value = 0;
};

template <typename Sq>
struct deref< point_iterator<Sq> > 
{ 
        static const int value = 1; 
};

int main()
{
    typedef point<int> point_t;
    typedef point_iterator<point_t> Iterator1;
    int v = deref<Iterator1>::value;
    std::cout << v << "\n"; // prints 1 on both gcc 4.5.1 and VC++ 2010

    return 0;
} 
```

# php - 我正在使用 iframe 表单 miniclip.com。我需要我自己的排行榜。我应该如何实施？

> ID：11918148
> 
> 赞同：0
> 
> 时间：2012-08-11T22:25:07.360
> 
> 标签：php, mysql, shockwave

iframe 代码是

```
<iframe src="http://www.miniclip.com/games/london-2012-olympic-games/en/webgame.php" frameborder="0" style="border:none;" width="590" height="443" scrolling="no"></iframe><br /><a href="http://www.miniclip.com/">Play Games on Miniclip.com</a> 
```

现在当用户完成游戏时。它的分数应该提交给我自己的排行榜。帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:28:33.603

除非 Miniclip 专门实施了某种方式让您这样做，否则这是不可能的。

# javascript - jQuery 动画最大宽度溢出问题

> ID：11918157
> 
> 赞同：0
> 
> 时间：2012-08-11T22:26:23.480
> 
> 标签：javascript, jquery, css, html

我正在使用一小段 jquery，它只不过是为一个似乎从屏幕外移动到父 div 中所需位置的 div 设置动画。

```
$(document).ready(function()
{$(".tv").animate({marginLeft:"50px"},700); 
```

为了在屏幕外开始，我确保父 div 会以最大宽度值和最小宽度值到达屏幕一侧。然后我将子 div 设置为 margin-left 100%，我假设这与父级的当前宽度相关，但显然不是。使用最大宽度，子级从父级的边缘开始，没有溢出问题。但是，当使用最小宽度或窗口不那么宽时，孩子仍然从最大宽度位置开始动画，并创建溢出。

```
.col2 {
position:relative;
max-width:1200px;
min-width:400px;
height:600px;
margin-left:0px;
float:left;
overflow:hidden;
}

.tv {
margin-left:100%;
height:224px;
width:374px;
background-image:url('image/tv.png');
display:block;
} 
```

虽然我知道这可以通过使用百分比无缝工作，但屏幕左侧有一列必须保持相同的宽度，据我所知，这不是一个选项。我还想避免删除整个文档的溢出。

我想我可以使用几行 jQuery 或 javascript 来设置子项的属性以匹配父项的当前宽度而不是父项的最大宽度，但我不知道如何测量当前宽度。除此之外，除了在制作动画时禁用溢出之外，我没有看到其他解决方案，但这似乎并不理想。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T13:40:31.483

将您的 .tv 设置为 position:absolute 会将其从盒子模型中删除，并使其无法调整其父 div 的大小。给它一个荒谬的左值将确保它在页面加载时呈现在屏幕之外。

```
.tv {
height:224px;
width:374px;
background-image:url('image/tv.png');
position: absolute;
left: 10000px
} 
```

然后使用 JS 为您的左值设置动画应该会给您相同的效果而不会导致溢出问题。在动画之前，它会将 left 值设置为父 div 的宽度，因此它不会从初始化时使用的荒谬的 left 值开始动画。

```
$(document).ready(function () {
    $(".tv")
        .css("left", $(".col2").width())
        .animate({left:"50px"},700);
}); 
```

# php - 我有一个重定向错误

> ID：11918159
> 
> 赞同：-2
> 
> 时间：2012-08-11T22:26:54.033
> 
> 标签：php

我正在处理一个简单的登录表单，并且我有这个重定向 URL：

```
<form method="post" action="/incs/login.php?redirect=<?php echo $_SERVER['PHP_SELF'];?>"> 
```

但是当我填写表格并点击提交按钮时，我被重定向到错误的 URL：

```
http://site/incs/login.php?redirect=/admin/index.php 
```

它应该是这样的：

```
http://site/admin/index.php 
```

我正在遵循一个旧指南，并且我在互联网上寻找了这个（重定向）功能，但我找不到任何东西。这现在仍然有效还是不再支持？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:42:35.540

除非您在服务器端代码中实际使用它，否则只需将[查询字符串](http://en.wikipedia.org/wiki/Query_string)添加到您的 URL 不会做任何事情。在您的 php 脚本中，您需要处理实际的重定向，如下所示：

```
<?php

/* Process form data */

if(isset($_REQUEST['redirect'])){
   $url = preg_replace('/[\?\&].*/','',$_REQUEST['redirect']);
   if ($url == '') $url='/';
}

header("Location: $url"); // <-- this is what actually redirects

?> 
```

上面是一个很大的简化，但它显示了一般的想法。在实际应用程序中，您可能只会在表单数据有效的情况下进行重定向（例如，成功登录）。您可能还想验证重定向 URL，以确保它是您网站中的有效 URL。

如果您使用某种 php 框架，那么它将处理所有这些细节，您只需要正确配置它即可。

# scheme - 将哈希函数导入 Lazy Racket

> ID：11918160
> 
> 赞同：1
> 
> 时间：2012-08-11T22:27:09.760
> 
> 标签：scheme, racket

如何将哈希函数导入惰性 Racket？

到目前为止，我有以下内容：

```
#lang lazy
(require (only-in racket/base
              hash
              hash-set)) 
```

我收到以下错误：

```
only-in: bad module path in: (only-in racket/base hash hash-set) 
```

我哪里错了？正确的模块路径是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T14:13:35.340

你知道你用的是什么版本的球拍吗？我无法在 Racket 5.3 下重现您的错误：当我尝试时，您的代码符合您的预期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-25T14:58:00.700

解释一下，Lazy Racket 的实现是一个旧的实现，基于现在是一种兼容语言的“MzScheme”。在 v5.3 中，它进行了现代化改造，更符合通常的`racket`语言。

# php - 当浏览器呈现 PHP 文件时，加载以前在另一个文件中设置的变量？

> ID：11918162
> 
> 赞同：0
> 
> 时间：2012-08-11T22:27:40.500
> 
> 标签：php, variables, post, global-variables

**一般查询**：有没有办法从另一个 PHP 文件中读取一个变量，而不运行该文件（因为该变量是在另一个时间点设置的，使用第三个 PHP 文件），并且不使用数据库？

**具体实例**：我创建了一个我的老板每天都想改变的网页。他不想访问原始的 HTML 和 CSS 编码，因为任何错误都会让我头疼。所以我想我可能会创建一个小型门户，允许他每天更改网页中的特定字符串数据，从而限制他对代码的访问。

我构想的框架是这样工作的：

*   index.php 是互联网上每个人都可以查看的页面。当它被渲染时，我希望它请求之前保存在另一个文件中的 $Category 变量。
*   edit.php 是一个显示带有两个输入框的简单表单的网页：类别和密码。单击提交按钮时，它将数据发布到下面的文件中。
*   configuration.php 是 edit.php 将表单信息传递给的文件。提交表单信息后，它会检查输入密码的 crypt() 版本是否匹配，然后将类别信息存储在名为 $Category 的变量中。

现在，我需要一种方法让 index.php 读取先前保存在 configuration.php 文件中的 $Category 值，无需运行它，也无需使用数据库（因为我无权访问数据库）。我不认为我可以使用会话值，因为这个值对于所有用户和所有会话应该是相同的，直到我的老板再次更改它。有什么方法可以实现这一点，还是我应该使用不同的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:30:31.910

考虑只[将数据写入文件](http://us.php.net/manual/en/ref.filesystem.php)，然后从那里读取。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:32:47.480

您的站点应该有一个私有区域，您可以在其中上传文件，它们不作为站点的一部分提供，但您可以从您的 PHP 代码中读取它们。然后你的老板可以简单地上传一个包含适当值的新文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-13T22:19:33.867

因此，我决定在运行脚本时（因此变量发生更改）动态覆盖需要信息的原始文件，而不是将数据写入它自己的文件来拥有和存储。

当点击edit.php 上的提交按钮时，它会将信息传递给configuration.php，它会在运行完成时重写index.php。下面是我使用的代码的一部分，以防有人想要实现类似的东西，而不必将数据写入完全独立的文件。

```
// Read the contents of the file you want to change, into a variable
$indexContents = file_get_contents('index.php');

// Edit the contents with srt_replace or preg_replace
$indexContents = preg_replace('#<h2>(.*?)\?</h2>#i', '<h2>'.$title.'?</h2>', $indexContents);
$indexContents = preg_replace('#best-(.*?)"#', $url.'"', $indexContents);

// Write the contents of the variable back to the same file name, overwriting it
file_put_contents('index.php', $indexContents);

echo '<h1>Success!</h1>';</code> 
```

# php - CodeIgniter 的示例模型中的属性是什么？

> ID：11918167
> 
> 赞同：2
> 
> 时间：2012-08-11T22:28:58.033
> 
> 标签：php, codeigniter, database-abstraction

在 CodeIgniter 用户指南中，[示例模型](http://codeigniter.com/user_guide/general/models.html)具有对应数据库表中每个字段的属性：

```
 class Blogmodel extends CI_Model {

        var $title   = '';
        var $content = '';
        var $date    = '';
        //... 
```

但是，当它返回一组博客文章时，它们只是通用对象。

```
 function get_last_ten_entries()
    {
        $query = $this->db->get('entries', 10);
        return $query->result();
    } 
```

如果每篇博文都只是一个通用对象，那么类开头的属性的目的是什么？

将每篇博客文章作为一个完整的模型对象填充其内容似乎会很好。然后你可以编写在内部获取值的方法。但是，用户指南中的所有示例似乎都显示每个控制器都有每个模型的一个实例，并使用该对象来获取包含数据库值的通用对象。此外，示例实例化模型 ( `$this->load->model('Blog');`) 的方式很明显，您只希望在控制器中拥有一个模型实例。

如果我的博客文章有一个`status`以整数形式存储在数据库中的值，但在几个不同的控制器中，我想将该值显示为人类可读的字符串，那么该函数/方法应该放在哪里？由于我在多个控制器中需要它，并且它特定于一个对象，我认为它应该是模型对象的一种方法。如果每篇博文都是模型的一个实例，我可以这样写：

```
 function get_human_status()
    {
        $lookup = array(
            1 => 'Active',
            2 => 'Hidden',
            3 => 'Pending');
        return $lookup[$this->status];
    } 
```

但是，如果每篇博文都是一个通用对象，则它必须如下所示：

```
 function get_human_status($data)
    {
        $lookup = array(
            1 => 'Active',
            2 => 'Hidden',
            3 => 'Pending');
        return $lookup[$data->status];
    } 
```

CodeIgniter 哪种方式更惯用？假设是第二个，为什么示例模型定义了这些内部属性？

最后，对于加分，如果我还有其他类似的问题，我应该看哪些书籍、文章或示例？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T22:57:18.390

嗯..名为“CodeIgniter”的灾难。

在那个糟糕的框架的文档中，他们将“模型”描述为实现活动记录模式的实例。这就是为什么您在该类的定义中获得无意义的属性的原因。这只是 AR 模式下两个职责（存储和逻辑）之间冲突的另一个副作用。此外，您可能会注意到`var`关键字，它是 PHP4 的产物。

你所谓的“模型”不是。它们是简单的[领域对象](http://c2.com/cgi/wiki?DomainObject)，后来又成为模型的一部分。模型层是一种心理构造，就像 MVC 设计模式中的另一层——表示层一样。

该[`$this->load->model()`](https://github.com/EllisLab/CodeIgniter/blob/develop/system/core/Loader.php#L236)方法不初始化“模型”实例。这只是 CodeIgniters 缺乏适当的自动加载器的另一个例子。这个方法只是为了包含包含`Blog`类的文件。因此，你不能断定“博客”我应该是一个单一的对象。

控制器不应该“显示”任何东西。可以更改当前视图实例和模型层的状态。视图应该处理表示逻辑，选择如何显示某些内容以及使用哪些模板。视图不应该是愚蠢的模板。

至于教育材料，你会在[这篇文章](https://stackoverflow.com/a/9855170/727208)的末尾找到大量的讲座和书籍。你可能也[this](https://stackoverflow.com/a/5864000/727208)和[this](https://stackoverflow.com/a/9685039/727208)有点相关。

# jquery - 如果成功则形成并替换图像

> ID：11918169
> 
> 赞同：0
> 
> 时间：2012-08-11T22:29:15.403
> 
> 标签：jquery, forms

我在模态窗口中有多个表单。当有人点击提交按钮时，数据会正确发送到服务器。为了让人们清楚，我想在单击时将提交按钮更改为加载图像，并且在提交数据时，我希望它改回文本，如“发送”或“成功！” 管他呢。问题是我的表单是动态生成的，并以旧方式提交。

简而言之：如何创建成功功能，以便在提交数据时加载图像可以更改回一些成功文本。

我的脚本：

```
 $.each(data.product.variants, function(index, variant){     

        contentHtml = contentHtml +
          '<div id="form">' +
          '<form class="formProduct" id="formProduct'+variant.id+'" action="{{ 'cart/add/' }}'+variant.id+'" >' + //method="post" delete this cause it needs to be GET
          '<div class="variants">' +
          '<div class="pop_variantTitle"><label><input type="hidden" id="variantId" value="' + variant.id + '" />' + variant.title + '</label></div>' +
          '<div class="pop_variantQuantity"><label">{{ 'Quantity' | t }}: <input type="text" name="quantity" id="formProductQuantity" value="1" /></label></div>' +
          '<div class="pop_variantAdd"><input type="submit" class="submit button green" id="submitter" value="In winkelwagen"/></div>' +
          '<div id="divMsg" style="display:none;"><img src="https://webshop.com/ajax-loader.gif" alt="Even geduld..." /></div>' +
          '</div>' +
          '</form>' +
          '</div>';
      });     
      $('.formProductContent').html(contentHtml);
    });     
    $().ready(function(){

      var form = $('form').attr('id');

      $(form).submit(function() {
        return false;
      });

       $('form').live('submit', function(){      

        $(this).replaceWith("<img src='https://webshop.com/ajax-loader.gif'>");
        $.get($(this).attr('action'), $(this).serialize(), function(response){

          // if succes

        },'json');
        return false;
      });
    });
   }
 });
return false;
 })
 </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:32:56.140

为什么不使用 ID 或类？

尝试这个：

```
$('form').live('submit', function(){      

        $(this).replaceWith("<img id=loading src='https://webshop.com/ajax-loader.gif'>");
        $.get($(this).attr('action'), $(this).serialize(), function(response){

          // if succes
         $('#loading').replaceWith("<img  src='https://webshop.com/success.jpg'>");  
        },'json');
        return false; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T22:46:13.353

我建议您*不要*在这些“非标准”情况下使用标准的 jquery-ui 小部件，否则您很快就会遇到大量骇人听闻的代码，它们的工作方式过于复杂。

相反，我建议您编写自己的表单提交对话框小部件，其“保存”按钮实际上是表单“提交”按钮等。

`.draggable()`您可以使用一些 jquery.ui 工具轻松创建对话框，例如`.resizable()`和`.position()`。

**处理对话框表单提交**

简而言之，一旦您创建了对话框，您就可以执行以下操作：

```
// $your_dialog is the main container for the whole dialog thing..
$('form', $your_dialog).submit(function(event){
    event.preventDefault();
    var dialog = this;

    // load data from the form to "data"

    $("button[type=submit]", this).html("Submitting...");

    $.ajax('/submission/url', {
        type:"POST",
        data:data,
    })
    .success(function(data){
        $("button[type=submit]", dialog).html("Success");
    })
    .error(function(data){
        $("button[type=submit]", dialog).html("Failure");
    });
}); 
```

**关于您的代码的其他一些注释**

```
 var form = $('form').attr('id');
  $(form).submit(function() {
    return false;
  }); 
```

这段代码的作用是.. 检索`<form>`页面上（第一个）的 id。幸运的是，它实际上是 ，因此`form`第二个 jQuery 调用将是..`$('form')`

你为什么不改用这个？

```
 $('form').submit(function() {
    return false;
  }); 
```

此外，出于多种原因，建议使用`.preventDefault()`以防止默认事件处理，而不是使处理程序返回 false。所以：

```
 $('form').submit(function(event) {
    event..preventDefault();
    // .. rest of your code ..
  }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T22:33:21.543

提交表单将导致回发，因此您必须在 .ready() 事件中添加一些内容，或者可能使用 ajax 并提供成功回调

# c# - 如何在 Visual c# express 中获取表单

> ID：11918181
> 
> 赞同：1
> 
> 时间：2012-08-11T22:31:46.107
> 
> 标签：c#, winforms, visual-studio, visual-studio-express

每当我在项目视图中单击表单时，我都会得到代码，我想在设计视图中打开表单。我知道它在那里，因为当我运行它时，表格会出现。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T22:34:03.263

当您突出显示文件时，您可以按 SHIFT + F7（或右键单击并选择查看设计器）打开表单设计器。

![在此处输入图像描述](../Images/80e05ac41fe85c40d014a73afefb148b.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T22:34:05.847

您需要右键单击它并选择“视图设计器”，至少我在 VS2010 中是这样做的，除非它被更改。让我知道这是否有帮助？

# vba - Excel VBA：循环通过 ActiveSheet 中的单元格

> ID：11918189
> 
> 赞同：0
> 
> 时间：2012-08-11T22:32:42.267
> 
> 标签：vba, loops, excel, cells

我正在尝试遍历指定数量的单元格（由宽度和高度定义），但我在这里遇到了问题。它一直在我身上停滞不前，然后对以下内容感到不安：

```
If .Cells(11 + row, col).Value > maxVal Then 
```

它给了我一个“应用程序定义或对象定义错误”

谁能告诉我我的代码哪里出错了：

```
Sub ApplyFilter()

    Dim maxVal As Double
    Dim minVal As Double

    maxVal = ActiveSheet.Range("D10").Value
    minVal = ActiveSheet.Range("D11").Value

    Dim width As Integer
    Dim height As Integer

    width = ActiveSheet.Range("L3").Value
    height = ActiveSheet.Range("L4").Value

    Dim row As Integer
    Dim col As Integer
    ActiveSheet.Select
    With Selection
        row = 1
        Do
            col = 1
            Do

                If .Cells(11 + row, col).Value > maxVal Then
                    .Cells(11 + row, col).Value = 0
                End If
                If .Cells(11 + row, col).Value < minVal Then
                     .Cells(11 + row, col).Value = 0
                End If
                col = col + 1
                width = width - 1
            Loop Until width = 1
            row = row + 1
            height = height - 1
        Loop Until height = 1
    End With

End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-13T18:34:38.400

这里的问题是我没有为每个新行重置宽度值。我应该一直使用 For 循环，这样可以更直观地处理问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:07:30.590

有时 Excel 会无缘无故地给出“应用程序定义或对象定义错误”，[因为这正是 Excel 的方式](https://stackoverflow.com/questions/6470263/excel-is-calculating-a-formula-with-a-vba-function-as-an-error-unless-it-is-re-e)，但这里可能不是这种情况。

不要使用`Select`或`Selection`与对象交互。直接命名对象。

```
Dim ws As Worksheet
Set ws = ActiveSheet

With ws
  ...
End With 
```

# css - 为什么我必须在我的 CSS 选择器中指定父 ID 才能重新定义边距？

> ID：11918194
> 
> 赞同：1
> 
> 时间：2012-08-11T22:33:28.207
> 
> 标签：css, css-selectors

例如，假设我有这个 HTML：

```
<ul id="nav">
  <li>one</li>
  <li id="my_item">two</li>
  <li>three</li>
  <li>four</li>
</ul> 
```

然后是 CSS：

```
#nav li {
  margin-bottom:10px;
}

#nav #my_item {
  margin-bottom:30px;
} 
```

为什么我不能只使用`#my_item`最后一个选择器？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T22:36:12.823

因为 CSS 使用一个称为[特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)的概念来确定哪些规则适用于哪些元素。

*   1 个 ID + 1 个标签比 1 个 ID 更具体
*   2 个 ID 比 1 个 ID + 1 个标签更具体

在检查哪个规则优先时，请在此处查看列表**并在第一个适用的规则上停止**：

1.  内联样式胜过非内联样式。
2.  在其规范中具有更多 ID 的样式优于具有更少 ID 的样式。
3.  在其规范中具有更多类/属性的样式胜过具有更少的样式。
4.  在其规范中具有更多标签的样式胜过具有更少标签的样式。
5.  *在其他条件相同*的情况下，规范中较晚出现的规则优于较早出现的规则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:37:12.417

因为[特异性](http://coding.smashingmagazine.com/2007/07/27/css-specificity-things-you-should-know/)：第一条规则的特异性为 101，而`#my_item`只有特异性 100。使用`!important`关键字或（如您所做的那样）增加您要使用的选择器的特异性。如果两条规则具有相同的特异性，则“最新”的一条获胜。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T22:42:46.497

自从您问“为什么我不能将#my_item 用于最后一个选择器？” 并且您已经从专家那里得到了答案（关于特异性），但您也可以按照以下方式进行操作

```
#my_item {
    margin-bottom:30px !important;
}​ 
```

[**演示**](http://jsfiddle.net/heera/FLsn8/)。

# c# - 试图在 IIS 和 ASP.NET 中达到 100% 的 CPU 利用率

> ID：11918196
> 
> 赞同：3
> 
> 时间：2012-08-11T22:33:50.033
> 
> 标签：c#, asp.net, iis-7.5, cpu-usage

我正在开发一个大量使用 CPU 的 ASP.NET Web 服务应用程序。我注意到在 4 核服务器上，CPU 未得到充分利用。所以我想出了一个简单的服务来看看是否有可能达到 100% CPU。这里是。

调用客户端使用并发线程和重复消息攻击此服务器。每个请求需要 0.5 到 2 秒才能完成（取决于线程数）。它达到的最高 CPU 使用率是所有 4 个内核的 80%。如果我使用 4 个线程或 16 个线程、1 个客户端或 2 个客户端，我会得到相同的结果。2芯盒子也有同样的问题。

那么，是否有可能在多核 IIS 服务器上使用非无限循环的代码达到 100% 的 CPU？

```
public class MyHttpHandler : IHttpHandler
{
    public bool IsReusable  { get { return true; } }

    public void ProcessRequest( HttpContext context )
    {
        switch( context.Request.HttpMethod )
        {
            case "GET":
            {
                string s = "";
                for( int i = 0; i < 999999; ++i )
                {

                    s = s.Substring( s.Length / 2 );
                    s += i.ToString();
                }
                context.Response.Output.WriteLine( "<html><body><h1>Web Service - " + s + "</h1></body></html>" );
                context.Response.StatusCode = 200;
                break;
            }
            default:
            {
                context.Response.StatusCode = 405;
                break;
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T23:48:29.783

您正在全速生成垃圾。这会触发大量 GC。在可能发生 GC 之前和之后，必须在短时间内停止所有线程。这可以防止进程使 CPU 饱和。

放入算术循环。`Thread.SpinWait`不保证 CPU 使用率，因为它在内部要求 Windows 取消调度当前线程。这不是一个简单的“无限”循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T22:42:10.273

您可以将线程放入 a[`SpinWait`](http://msdn.microsoft.com/en-us/library/system.threading.thread.spinwait.aspx)进行大量迭代。这不是一个无限循环，但它可能会运行很长时间。

```
Thread.SpinWait(Int32.MaxValue); 
```

# image - Jquery ui 滑块事件

> ID：11918197
> 
> 赞同：0
> 
> 时间：2012-08-11T22:33:53.023
> 
> 标签：image, jquery-ui, events, slider

我正在尝试制作一个简单的 4 图像库，并带有一个滑块来浏览它们。

我正在使用来自[http://jqueryui.com/demos/slider/side-scroll.html](http://jqueryui.com/demos/slider/side-scroll.html)的代码。一切都很顺利，直到我尝试为每张幻灯片制作一些外部处理程序。我有 4 个图像，所以我想制作 4 个按钮来导航到每个图像。所以我所做的是：

```
$("#slide_to_1").click(function(e) {
    var c = $( ".scroll-bar" ).slider("value");
    $(".scroll-bar").slider("value", c + 25);
    e.preventDefault();
}); 
```

它控制滑块，但不更新内容容器。谁能指出我解决这个问题的方法？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T13:32:17.423

尝试

```
 alert(c); 
```

看看 c 是否正确填写，我想你可能需要更改为

```
var c = $( ".scroll-bar" ).slider.attr("value"); 
```

新值将是

```
 $( ".scroll-bar" ).slider.attr("value","newvalue"); 
```

[http://api.jquery.com/attr/](http://api.jquery.com/attr/)

# java - 使用 AND/OR 运算符的 SQL WHERE 子句

> ID：11918201
> 
> 赞同：0
> 
> 时间：2012-08-11T22:34:28.533
> 
> 标签：java, android, sql, sqlite

我有下面的数据库，当我尝试运行 SQL 命令时，它并没有完全完成它应该做的事情（下面的代码应该有`cursorSize`1，但它显示为 0）。

我运行的代码是：

```
SQLiteDatabase db = this.getReadableDatabase();

String countQuery = "SELECT  songid FROM TABLE_TRACKS WHERE (tagid = 7 OR tagid = 10) AND tagid = 9";
Cursor cursor = db.rawQuery(countQuery, null);
int cursorSize = cursor.getCount(); 
```

它与 where 子句有关，因为当我更改括号并制作它时

```
WHERE (tagid=9 AND tagid = 7) OR tagid=10 
```

它之所以有效，`int cursorSize`是因为 2。我是否遗漏了一些愚蠢的东西，或者我对 SQL WHERE 子句或 AND/OR 运算符不了解的东西？

如果有人可以为我解释这一点*以及*如何获得我想要的结果，我将不胜感激。（下面我想返回一行`songid`等于`3`。）

![在此处输入图像描述](../Images/9aa43d7d806252ff703ce31e4fe37453.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:38:43.540

结果没有错。它应该给你零，因为：

*   您不可能同时拥有 tagid = 7 和 9 的行。
*   您不可能同时拥有 tagid = 10 和 9 的行。

您需要检查您的应用程序逻辑以及您要在这里完成什么。

**编辑：**

`So think of songIDs as songs and tagIDs as Tags (guitar, piano, romantic and so on) so if I want to find the songs which has (piano AND guitar) OR romantic tag how is it possible ? do I have to change my db (table) or can I reformulate my sql ?`

如果这是您的应用程序的上下文，并且您希望用户提供一些输入组合，我建议您更改您的数据库方案。尝试为每个标签添加布尔列。如果您期望这样的组合，这将更容易，并且在空间方面不会有太大差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T22:39:06.033

它按预期工作。

首先执行`tagid = 7 OR tagid = 10`

所以结果将是

```
7  2
7  3
10 4 
```

然后`AND tagid = 9`

现在检查`tagid 9`上述结果

没有什么可用的。所以，光标大小是`ZERO`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T22:39:06.393

CursorSize 为 0 的原因是因为您的查询包含逻辑错误。您的查询说：`(tagid = 7 OR tagid = 10) AND tagid = 9`。

将此查询视为由 AND 运算符连接的两个不同的条件语句，这意味着如果您`tagid`是 7 AND，`tagid = 9`那么您的将`cursorSize`被更新。你怎么能`tagid`同时是 7 和 9？我认为如果你想使用`songid`from`tagid 7`和 ，你需要做的是使用 7 OR 9 `tagid 9`。

`(tagid=9 AND tagid = 7) OR tagid=10`给你一个非零的原因`cursorSize`是因为现在你正在使用我上面建议的 OR 运算符，所以至少在`tagid == 10`你取回数据库条目的情况下。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T22:39:28.100

这个布尔语句：

```
(tagid = 7 OR tagid = 10) AND tagid = 9 
```

意味着`tagid`必须同时是 7（或 10）和 9。那是行不通的。

这个布尔语句的原因：

```
(tagid=9 AND tagid = 7) OR tagid=10 
```

有效是因为有两行值为 10 in `tagid`。

# ruby-on-rails - Rails 动作缓存和 json 响应

> ID：11918207
> 
> 赞同：12
> 
> 时间：2012-08-11T22:34:59.623
> 
> 标签：ruby-on-rails, json, memcached

我在使用 JSON 响应 json 请求时遇到问题，同时启用了动作缓存。

我有一个相当简单的控制器，它同时响应 JSON 和 HTML，并且缓存适用于 HTML 响应，但我注意到当我请求 JSON 时，通常会使用 JSON 响应，但启用动作缓存后，它将 JSON 输出包装在布局中！

当我清除缓存时，它给了我一个不存在默认布局的错误：

> ClipsController#index 中的参数错误
> 
> ClipsController 在...中没有默认布局

如何为缓存的操作返回 JSON？

更新，我怀疑有关布局的错误与我缓存操作的方式有关：

`caches_action :index, :layout => false`

不过我不确定，为什么在 JSON 响应的情况下它仍然需要布局，因为没有缓存就没有问题。

暂时我已将缓存过滤器修改为不缓存 JSON 请求，但这不是一个理想的解决方法，如果我确实想缓存 JSON，我该怎么办？

`caches_action :index, :layout => false, :if => Proc.new { |c| !c.request.format.json? }`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T10:21:47.367

似乎这实际上可能是动作缓存的错误，但也许有一些我不理解的东西。

看到[这条线](https://github.com/rails/rails/blob/3-2-stable/actionpack/lib/action_controller/caching/actions.rb#L152)，看看哪里出错了。基本上，如果您将布局选项设置为 false，它并不关心，并且无论如何都会尝试使用布局来呈现它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-24T10:48:24.297

我遇到了类似的问题（通过 ajax 请求呈现 HTML，布局设置为 false 但存在）

这是一个解决方法：创建一个空布局并使用它来服务 ajax 请求

```
# app/views/layout/empty.html.erb
<%= yield %>

# controller
class FooController ...
  layout Proc.new { |controller| controller.request.xhr? ? "empty" : "your normal html layout" }
  caches_action ...
end 
```

# css - 正则表达式匹配 CSS 中的任何“未使用”规则（类、id 等）

> ID：11918214
> 
> 赞同：2
> 
> 时间：2012-08-11T22:36:50.853
> 
> 标签：css, regex, code-cleanup

我有一个巨大的 CSS 文件，我想将其缩减为仅使用的 CSS 规则。

我通过使用[CSS Usage Add-on](https://addons.mozilla.org/en-US/firefox/addon/css-usage/) for Firebug 做到了这一点。它为每个未使用的规则添加一个“未使用”标签。现在我想摆脱这些。

CSS 代码如下所示：

```
body {
line-height: 1;
text-align: left;
}
UNUSED.multiple-list {
font-weight: bold;
line-height: 1.4;
list-style: disc;
margin-left: 20px
}

UNUSEDmenu, UNUSEDol, ul {
list-style: none
}
UNUSEDblockquote, UNUSEDq {
quotes: none
} 
```

我尝试使用 RegExr 在线服务找到我自己的 Regex，但我只能选择大括号之间的部分。

到目前为止我的正则表达式：

```
\{([^}]+)\} 
```

如何修改表达式以选择从“未使用”到右花括号的任何内容？但只有事情以“未使用”开头？不应标记所有其他规则。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T23:04:31.643

**此 Regex 将匹配任何 UNUSED 属性：** `UNUSED.*\{[^}]*\}|UNUSED.*[}]*`

正则表达式的第一部分匹配任何包含块的 UNUSED 属性，而正则表达式的第二部分（在 之后`|`）匹配任何不包含块的 UNUSED 属性 - 所以你完全被覆盖了。它将匹配类、id、块、单行——每个 UNUSED 属性。

[正则表达式测试](http://regexr.com?31t9q)

* * *

**** [jdlx 的正则表达式](https://stackoverflow.com/a/15318650/1380370)稍微复杂一些，但更好更安全。看看它。***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-10T03:41:27.127

**[上面](https://stackoverflow.com/a/11918357/668767)**amiregelz**的正则表达式将匹配具有*有效*选择器的规则.. 从而破坏 CSS。
这是关于正则表达式的 my2¢：**

 **第 1 步 -*仅将整个***规则**与未使用的选择器匹配并删除整个规则：

 *`(?<=}|/)\s*(UNUSED[.#:<>\+\w\d\s_-]+)(,\s*UNUSED[.#:<>\+\w\d\s_-]+)*\{[^\}]+}`

第 2 步 -在具有有效/使用选择**器**的规则上匹配所有未使用的选择器：

`(UNUSED[.#:<>\+\w\d\s_-]+,\s)|(,\s*UNUSED[.#:<>\+\w\d\s_-]+)`

RegExr 测试：[第 1](http://regexr.com?342kg)步-[第 2 步](http://regexr.com?342km)

hth***

# variables - 具有可变大小内容的 CSS3 翻转效果

> ID：11918215
> 
> 赞同：2
> 
> 时间：2012-08-11T22:36:52.323
> 
> 标签：variables, css, size, flip

我已经阅读了一些关于使用 CSS3 属性在块元素上制作翻转效果的教程，并尝试重现它。

我的问题是，在这些教程中的每一个中，所有“脚蹼”都有固定的尺寸，我想根据它的内容使用可变尺寸。

这是我的代码：

```
<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <style type="text/css">
        html * {
            margin: 0;
            padding: 0;
        }
        /*===============================================*/
        /* FLIPPER REQUIRED CSS                          */
        /*===============================================*/
        .Flipper
        {
            position: relative;
            /*overflow: auto;/**/

            -webkit-perspective: 600px;
               -moz-perspective: 600px;
                -ms-perspective: 600px;
                 -o-perspective: 600px;
                    perspective: 600px;
        }
        .Flipper > .Content
        {
            position: absolute;
            /*overflow: auto;/**/
            width: 100%;
            height: 100%;

            -webkit-transform: rotateX(0deg);
               -moz-transform: rotateX(0deg);
                -ms-transform: rotateX(0deg);
                 -o-transform: rotateX(0deg);
                    transform: rotateX(0deg);

            -webkit-transform-style: preserve-3d;
               -moz-transform-style: preserve-3d;
                -ms-transform-style: preserve-3d;
                 -o-transform-style: preserve-3d;
                    transform-style: preserve-3d;

            -webkit-transition: all 1s ease-in-out;
               -moz-transition: all 1s ease-in-out;
                -ms-transition: all 1s ease-in-out;
                 -o-transition: all 1s ease-in-out;
                    transition: all 1s ease-in-out;
        }
        .Flipper:hover > .Content, .Flipper .Back
        {
            -webkit-transform: rotateX(180deg);
               -moz-transform: rotateX(180deg);
                -ms-transform: rotateX(180deg);
                 -o-transform: rotateX(180deg);
                    transform: rotateX(180deg);
        }
        .Flipper .Front, .Flipper .Back
        {
            position: absolute;
            width: 100%;
            height: 100%;
            /*overflow: auto;/**/

            -webkit-backface-visibility: hidden;
               -moz-backface-visibility: hidden;
                -ms-backface-visibility: hidden;
                 -o-backface-visibility: hidden;
                    backface-visibility: hidden;
        }
        /*===============================================*/
        /* FLIPPER CUSTOM CSS                            */
        /*===============================================*/   
        .Flipper
        {
            /*
            width: 400px;
            height: 400px;
            */
        }
        .Flipper {
            background: #00F;
        }
        .Flipper .Front {
            background: #0F0;
        }
        .Flipper .Back {
            background: #F00;
        }

        </style>
    </head>
    <body>
        <div class="Flipper">
            <div class="Content">
                <div class="Front">
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </div>
                <div class="Back">
                    Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.
                </div>
            </div>
        </div>
    </body>
</html> 
```

如果我为 .Flipper 元素提供固定的宽度和高度（或最小宽度和最小高度），它可以正常工作，但如果我不这样做，则不会出现脚蹼。

我想这是因为每个人都处于绝对的位置。所以我尝试使用：溢出：自动；在每个包含绝对定位元素的块上，但它没有帮助。然后我尝试删除所有宽度：100%; 和高度：100%；并使用溢出：自动；但我得到了同样的结果。你知道如何让 .Flipper 元素适合 .Front 和 .Back 元素内容的大小吗？

提前致谢。

# java - 有没有办法存储在 Java Swing 中同时单击的每个标签的名称？

> ID：11918218
> 
> 赞同：0
> 
> 时间：2012-08-11T22:36:55.960
> 
> 标签：java, swing, jlabel

![在此处输入图像描述][1]我创建了一个 java swing 应用程序，它检测标签点击并在链接列表中搜索与标签名称匹配的对象。

现在我已经实现了这个假设只有一个标签被点击。

但是，让我们说，如果用户一次单击 5 个标签，我想同时捕获所有 5 个标签以进行比较。

现在我想澄清一件事，标签是根据链表中的记录数动态生成的。例如，如果链表只有 5 个作者字段，则只创建 5 个标签。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:43:45.750

在不知道“如何”显示标签或“如何”捕获鼠标点击或“如何”搜索列表的情况下，我的次要建议是在点击之间添加“延迟”然后搜索，允许用户是时候进行选择了，假设您希望搜索实时发生（即，无需按下另一个按钮即可开始搜索）

显然，您还需要考虑如果用户改变主意会发生什么，您将如何停止和重新启动搜索，但是如果没有任何实际的想法，您是如何做到这一点的，就不可能提出建议。

基本上我会使用一个[javax.swing.Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)设置为合理的延迟（比如 500 毫秒到一秒），当计时器触发时，它会开始搜索。

在标签的每次“点击”上，我只需重新启动计时器，插入一个新的延迟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T22:53:34.997

可能这就是你要找的...

```
final List<String> labelNames = new ArrayList<String>();
MouseListener listener = new MouseAdapter() {
  @Override
  public void mouseClicked(MouseEvent e) {
    if (e.getSource() instanceof JLabel){
      labelNames.add(((JLabel) e.getSource()).getText());
    }
  }
};
JLabel label1 = new JLabel();
label1.addMouseListener(listener);
JLabel label2 = new JLabel();
label1.addMouseListener(listener);
JLabel label3 = new JLabel();
label1.addMouseListener(listener); 
```

# shell - shell脚本中的日期格式

> ID：11918219
> 
> 赞同：1
> 
> 时间：2012-08-11T22:36:58.140
> 
> 标签：shell, unix

一个简单的句法问题可能是

在尝试以我的自定义格式显示日期时，我正在使用

```
date '+DATE %m-%y%nTIME %H:%M:%S' 
```

在指定日期格式之前，“+”符号的目的是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T22:40:59.140

`+`告诉日期您希望它采用该格式。从手册页：

```
SYNOPSIS
   date [OPTION]... [+FORMAT]
   date [-u|--utc|--universal] [MMDDhhmm[[CC]YY][.ss]] 
```

否则， date 认为您正在尝试向其发送日期字符串 ( `[MMDDhhmm[[CC]YY][.ss]]`)，而不是格式字符串。

# javascript - javascript类型未定义错误

> ID：11918223
> 
> 赞同：0
> 
> 时间：2012-08-11T22:37:24.343
> 
> 标签：javascript, javascript-events

你好。这是我的代码片段。它来自一个 HTML 表单页面：

```
Phone Number:<input type="text" id="Phone" name="Phone" onkeyup="checkFirst();" /><br />

<p id="rabbit"></p> <!-- for testing --> 
```

这是输入文本字段，我想调用位于 html 头部的 checkFirst 函数，这是我的`checkFirst`函数

```
<script type="text/javasciprt">
        document.getElementById("rabbit").innerHTML = "When";
        function checkFirst(){
            var numbers = 3; //document.getElementById("Phone").value.length;
            document.getElementById("rabbit").innerHTML="Hello";

            if (numbers <= 3) {
                document.Phone.focus();
            } else {
                document.info_open.focus();
            }
        }
</script> 
```

当我运行它时，IP为“兔子”的元素没有任何反应。它没有改变。我用 chrome 调试器运行它，它在右侧面板中显示我有一个参考错误，它说：

类型：“未定义”

错误出现在电话输入元素的行上，为什么会出现此错误？我以为我将类型定义为“文本”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T22:41:53.617

改变

```
<script type="text/javasciprt"> 
```

到

```
<script type="text/javascript"> 
```

因为代码在 jsfiddle ( [http://jsfiddle.net/yhFfc/](http://jsfiddle.net/yhFfc/) ) 中完美运行。

# php - 从 Zend Framework 1.5 迁移到 1.11

> ID：11918225
> 
> 赞同：2
> 
> 时间：2012-08-11T22:37:28.403
> 
> 标签：php, zend-framework, zend-db

我有大约 3 年前使用在 PHP 5.3 上运行的 Zend Framework 1.5 编写的应用程序 [早期版本？5.3`goto`作为关键字引入]。

我不得不将我的应用程序移动到一个新的 Web 主机上，该主机在具有`goto`关键字的较新版本的 PHP 上运行。我现在`goto()`在 ZF 1.5 中实现的功能出现错误。所以我决定将我的应用程序移到 ZF 1.11 上，希望最新版本能让我摆脱这些错误。但是，通过这样做，我只在应用程序的 Zend 与数据库通信的方式中遇到了重大错误。还有一些错误，例如

> 在非对象上调用成员函数 setMessage()

在一条线上

```
$form->caller_id->getValidator('Zend_Validate_NotEmpty')->setMessage('Please select your name from the caller list!', 'isEmpty'); 
```

我对 Zend 不太熟悉。我曾使用 CakePHP 并了解 MVC 架构。

有人可以建议我应该如何解决这个问题吗？我感觉有点失落！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T08:44:33.173

您只需要更改验证器的字符串名称（我在自己的表单上尝试过，短名称“NotEmpty”返回对象，“Zend_Validate_NotEmpty”返回 false）：

当前的：

```
$form->caller_id->getValidator('Zend_Validate_NotEmpty')->setMessage('Please select your name from the caller list!', 'isEmpty'); 
```

新的：

```
$form->caller_id->getValidator('NotEmpty')->setMessage('Please select your name from the caller list!', 'isEmpty'); 
```

# windows - 什么决定了 Windows 7 中的目录顺序或默认顺序？

> ID：11918230
> 
> 赞同：0
> 
> 时间：2012-08-11T22:38:27.830
> 
> 标签：windows, dir

我正在为我的汽车加载一个带有音乐的拇指驱动器。文件夹播放乱序。我从命令行对文件夹进行了“目录”，并且顺序匹配 - 但两者都不是字母顺序。Windows 资源管理器按字母顺序显示它们。

1.  为什么是这样？
2.  这怎么发生的？
3.  我该如何解决？

这是我从命令行键入“dir”时得到的结果（不包括完整的文件夹名称）。我的第一个想法是 8.3 有问题，但它也有问题。

> Adebisi Sh
> Anathema-W
> Chrome Hoo
> cloudkicke
> Echolyn-Ec
> Magma - Em
> Red Sparow
> Rocky's Fi
> SKE - 1000 wobbler
> -
> Porcupine
> Blackfield
> Angragard
> Nicklas Ba
> Uzva-Uoma
> Sanhedrin
> Russian Ci
> 返回

# php - 错误：无效的路径表达式。必须是 StateFieldPathExpression

> ID：11918236
> 
> 赞同：6
> 
> 时间：2012-08-11T22:39:38.737
> 
> 标签：php, forms, symfony, doctrine

我是 Symfony2 查询生成器的新手，这就是我所做的：

```
 $builder
        ->add('access', 'entity', array(
            'label' => 'Behörigheter',
            'multiple' => true,   // Multiple selection allowed
            'expanded' => true,   // Render as checkboxes
            'property' => 'name', // Assuming that the entity has a "name" property
            'class'    => 'BizTV\ContainerManagementBundle\Entity\Container',
            'query_builder' => function(\Doctrine\ORM\EntityRepository $er) use ($company) {
                $qb = $er->createQueryBuilder('a');
                $qb->where('a.containerType IN (:containers)', 'a.company = :company');
                $qb->setParameters( array('containers' => array(1,2,3,4), 'company' => $company) );

                return $qb;
            }
        )); 
```

它工作正常，除了我想按 containerType （这是一个关系字段，FK）对我的实体进行排序。

当我添加这一行时：

```
$qb->orderBy('a.containerType', 'ASC'); 
```

我得到错误：无效的路径表达式。必须是 StateFieldPathExpression。

那么这是什么 - 我可以在 where 子句中使用关系字段 containerType 但不能在我的 sort 子句中使用？还是我错过了其他东西？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T13:47:58.740

```
'query_builder' => function(\Doctrine\ORM\EntityRepository $er) use ($company) {
      $qb = $er->createQueryBuilder('a');
      $qb->innerJoin('a.containerType', 'ct');
      $qb->where('a.containerType IN (:containers)', 'a.company = :company');
      $qb->orderBy('ct.id', 'ASC'); // Or the field you want from containerType
      $qb->setParameters( array('containers' => array(1,2,3,4), 'company' => $company));

      return $qb;
} 
```

您不能将 containerType 与 sort 子句一起使用，因为这是一个与当前 ! 查询生成器不知道要使用的字段（甚至 containerType 代表实体的 id！）。因此，您需要手动加入实体并按其字段排序！

# networking - 防火墙如何影响 3G 网络下移动设备的自定义应用网络协议？

> ID：11918238
> 
> 赞同：2
> 
> 时间：2012-08-11T22:39:58.567
> 
> 标签：networking, mobile, network-protocols

我正在设计一个同时针对 android 和 iphone 的应用程序。

该应用程序将在全双工通道上传输大量数据。如果这个应用程序只针对 WIFI 用户，我会选择“自定义”应用程序协议。不幸的是，我需要支持 3G，而且我听说很多用户抱怨使用某些“自定义”应用程序协议（在 TCP 或 UDP 之上）的应用程序无法正常工作。这似乎是手机运营商的一种常见做法，即只允许连接到“知名”端口（例如 80,443）。

你有什么建议？我应该将我的应用程序协议建立在 HTTP 之上以避免这种“类似防火墙”的问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:58:33.770

尽管不可能对每个 3G 网络都确定地回答这个问题，但我认为使用 HTTP/S 以外的协议应该不会出现*防火墙问题。*

如果您的协议需要在很长一段时间内通过套接字流发送和接收信息保持持久性，我不会使用 HTTP。我会使用一些*自定义协议*或一些**XMPP**扩展。

另一方面，如果您只需要在短时间内发送和接收信息，HTTP 是理想的（大量的 CLIENT 和 SERVER SIDE 支持，更易于实现）。

# ios - iOS - 视图定位和大小

> ID：11918240
> 
> 赞同：0
> 
> 时间：2012-08-11T22:40:55.333
> 
> 标签：ios, view, position, positioning

我想问你，当你不知道它们必须是什么尺寸才能适合内容时，放置某些视图的最佳方式是什么（在 iOS 中）。

下面是示例：我想制作一个页面，其中有多个文本垂直排序，它们之间有一些空格，其中一些可以是多行的。您还不知道这些标签的内容，您可以从 JSON 中获取它们。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T22:44:53.057

如果您的问题是关于如何显示未知字符串的集合，那么答案可能是使用 UITableView。[这是](http://www.mobisoftinfotech.com/blog/iphone/introduction-to-table-view/)一个很好的教程。

但是，如果您要问一个关于视图的定位和大小的问题，那么这个问题太笼统了，无法真正得到正确回答。

# php - 连接内部的 html

> ID：11918244
> 
> 赞同：0
> 
> 时间：2012-08-11T22:41:37.023
> 
> 标签：php, html, forms

什么是正确的写法：

```
<input type="hidden" name="recipient" value="<?php $user_id; ?>"/> 
```

我似乎无法获得提交价值的表格。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T22:42:56.973

您可能想要[`echo`](http://php.net/echo)该值：

```
<?php echo $user_id ?> 
```

此外，在填写 HTML 属性时，您应该始终对这些值进行转义：

```
<?php echo htmlspecialchars($user_id) ?> 
```

因此，输出变量的正确方法是：

```
<input type="hidden" name="recipient" value="<?php echo htmlspecialchars($user_id) ?>"/> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T22:45:03.283

`<input type="hidden" name="recipient" value="<?php echo $user_id; ?>"/>`

[echo](http://php.net/echo)用于打印变量的值

# ruby - Right_aws 从 S3 获取 .tar.gz

> ID：11918245
> 
> 赞同：2
> 
> 时间：2012-08-11T22:41:38.457
> 
> 标签：ruby, amazon-s3, rake

我正在编写一个 rake 任务，以从存储在 S3 中的 .tar.gz 备份文件中恢复数据库。

第 1 步，从 S3 下载文件，对吗？我正在使用[right_aws 的 S3Interface](http://rightaws.rubyforge.org/right_aws_gem_doc/classes/RightAws/S3Interface.html#M000198)。我尝试了简单的 get 方法，它在 :object 中返回文件内容。

```
obj = s3.get(s3_config[:s3_bucket], s3_file_name)
temp_file.write obj[:object] 
```

错误：耙子中止！"\x8B" 从 ASCII-8BIT 到 UTF-8

我看到了一些关于使用 GzipWriter 和 String#unpack 的帖子，但无法成功应用它们。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T21:04:09.317

使用“wb”标志打开文件就可以了。

```
 temp_file = File.new(File.join(tmp_dir, 'temp.tar.gz'), 'wb')
  obj = s3.get(s3_config[:s3_bucket], s3_file_name)
  temp_file.write obj[:object]
  temp_file.close 
```

# rest - 在 REST 中，为每个资源表示创建单个内容类型还是具有单独的内容类型？

> ID：11918250
> 
> 赞同：2
> 
> 时间：2012-08-11T22:42:02.413
> 
> 标签：rest

如果我想遵循为我的 REST API 使用自定义内容类型的做法，我应该为我的整个项目定义一个自定义内容类型还是为每个资源表示定义自定义内容类型（发送到/从我的REST API）在我的项目中使用？

也就是说，如果我正在构建一个“书店”REST API，其中服务位于命名空间 com.mycompany.mybookstoreapp 中，我是否创建一个单一的内容类型：

```
Content-Type: application/com.mycompany.mybookstoreapp+xml 
```

或者我是否为可以通过我的书店 REST API 发布/检索的每种类型的数据创建一个内容类型？

```
Content-Type: application/com.mycompany.mybookstoreapp.user+xml
Content-Type: application/com.mycompany.mybookstoreapp.order+xml
Content-Type: application/com.mycompany.mybookstoreapp.book+xml 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-15T17:41:40.303

为每个数据描述内容类型似乎是最安全的解决方案。如果您以后出于某些原因想符合 HATEOAS，那会更容易。另一方面，对所有内容都使用一种内容类型并没有多大意义。内容**类型**描述了特定数据的类型。

关于版本控制，您可以通过三种不同的方式将版本控制添加到您的 API。首先，您可以在 URI 中添加版本号，这是一种简单的方法：

```
/api/v1/users 
```

或者您可以使用新的内容类型：

```
application/vnd.acme.user-v1+xml 
```

或者您也可以在 Accept 标头中使用限定符，这样您就不会触及您的内容类型：

```
application/vnd.acme.user+xml;v=1 
```

这真的取决于你。第一个解决方案很简单，但不像其他两个解决方案那样 RESTful。但这些解决方案需要更聪明的客户。

# mysql - 更新表，然后在 mySQL 中返回更新的行

> ID：11918251
> 
> 赞同：3
> 
> 时间：2012-08-11T22:42:08.303
> 
> 标签：mysql, select

我有以下查询：

```
SELECT script FROM d_stages WHERE id IN
(SELECT g.stage + :i FROM games g INNER JOIN sessions s ON
g.expired = 0 AND s.user = g.user AND s.token = :token) 
```

1.  Inner SELECT 通过给定的令牌在“会话”表中查找用户 ID，然后为该用户查找未过期的游戏。
2.  它返回被修改的游戏阶段（增加、减少或保持不变，取决于 :i 值）。
3.  外部 SELECT 为从字典中找到的阶段返回一个唯一的脚本。

显然，修改后的阶段编号（g.stage + :i）应该写回数据库，因为游戏已经进化了。我可以替换`SELECT script`为`SELECT script, g.stage + :i`，并在另一个 ( `UPDATE`) 查询中使用修改后的数字，但也许我可以在单个查询中做同样的事情？

我的 DBMS 是 mySQL 5.5。

问候，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:31:06.627

您只能使用 UPDATE 查询进行更新。UPDATE 查询只能返回一件事：然后是受影响的行数。因此，您无法在单个查询中更新和选择所需的值。

因此，您必须使用额外的 UPDATE 查询来更新数据。您可以在 SELECT 查询之前或之后执行此操作，具体取决于代码中应该提交新值的简单性或实际点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-19T11:44:17.893

我认为，只有一种方法：

```
CREATE DEFINER=`root`@`localhost` PROCEDURE `goto_stage`(IN `inc` INT, IN `session_token` VARCHAR(64))
    LANGUAGE SQL
    NOT DETERMINISTIC
    MODIFIES SQL DATA
    SQL SECURITY DEFINER
    COMMENT ''
BEGIN
    DECLARE new_stage INT;
    SELECT g.stage + inc INTO new_stage FROM games g INNER JOIN sessions s ON
            g.expired = 0 AND s.user = g.user AND s.token = session_token;
    UPDATE games SET stage = new_stage;
    SELECT script FROM d_stages WHERE id = new_stage;
END 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-03-03T06:43:38.060

mysql没有单一的查询解决方案。但是如果你的数据库使用 innodb 作为引擎，你可以试试

```
select ... for update 
```

锁定行，然后对其进行更新。查看 mysql 手册“14.3.9.3\. SELECT ... FOR UPDATE and SELECT ... LOCK IN SHARE MODE Locking Reads”了解详细信息。

# c++ - 不再在 cstdlib 中休眠？

> ID：11918260
> 
> 赞同：1
> 
> 时间：2012-08-11T22:43:54.190
> 
> 标签：c++, linux

我有一个通常编译良好的应用程序。它使用两个“非标准”函数（如果我没记错的话，都在 cstdlib 中）：sleep() 和 daemon()。更新我的系统后，我发现我的程序将不再编译（它仍然可以在我的旧系统上编译）。GCC 给了我这个信息：

```
error: 'daemon' was not declared in this scope
error: 'sleep' was not declared in this scope 
```

我记得过去曾经我在 sleep() 上遇到过同样的问题，包括 cstdlib 解决了这个问题。我找不到 cstdlib 的更改日志，也不知道该函数被移动到哪里（如果没有删除）。我还假设 daemon() 也发生了同样的事情。我在谷歌中找不到与此相关的任何内容。

有谁知道这些去了哪里，或者更好地知道我将来可以在哪里找到，以防我再次遇到这个问题？

我知道 daemon() 是一种懒惰的做事方式，并且可以自己编写一个适当的方法来守护这个程序（使用 fork 等），但是使用它非常方便。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T22:49:01.720

既不`sleep`是也不`daemon`是 C 标准库 (cstdlib) 的一部分。`sleep`是 POSIX.1-2001 中定义的函数，`unistd.h`并且`daemon`是非 POSIX 函数，`unistd.h`在 linux 上也可用。

作为非标准函数，您可能必须先定义`_GNU_SOURCE`才能`#include <unistd.h>`获得`daemon`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-11T22:51:49.187

Linux 手册页通常包含大多数功能所需的头文件

```
man daemon 
```

或者

```
man 3 sleep 
```

两者都可能说你需要`#include <unistd.h>`

# ruby - 是否可以在 Ruby 的方法调用中解包数组？

> ID：11918261
> 
> 赞同：0
> 
> 时间：2012-08-11T22:44:37.323
> 
> 标签：ruby, arrays

我有这个代码：

```
def foo( arg_array ) 
  arg_array.each do |ar|
    puts ar
  end
end 

my_array = ["Hello", "Bye", "Please"]

foo my_array # Works fine
foo "Thanks", my_array # And this not 
```

有没有办法在不直接加入的情况下进行第二个方法调用`"Thanks"`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:23:06.980

Splat 数组解包：

```
foo ["Thanks", *my_array] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T22:51:24.450

如果您正在寻找一种快速而干净的方式将元素添加到现有数组中，您可以使用：

```
foo ["Thanks"] + my_array 
```

它创建一个包含 的单元素数组`"Thanks"`，然后将 的内容连接`my_array`到它上面。如果您愿意，可以在 IRB 中查看：

```
my_array = ["Hello", "Bye", "Please"]
=> ["Hello", "Bye", "Please"]
["Thanks"] + my_array
=> ["Thanks", "Hello", "Bye", "Please"] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T22:58:18.233

如果你想接受任意数量的`String`or`Array`并将它们视为一个数组，你可以使用这个：

```
def foo(*arg_array)
  arg_array = arg_array.map { |arg| arg.is_a?(Array) ? arg : [arg] }.flatten(1)
  arg_array.each do |ar|
    puts ar
  end
end 

my_array = ["Hello", "Bye", "Please"]

foo my_array # print Hello Bye Please
foo "Thanks", my_array # prints Thanks Hello Bye Please 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T08:57:16.353

如果您接受更改方法，此方法将适用于数组或单个对象：

```
def foo(*args)
  args.each do |ar|
    puts ar
  end
end 
```

* **args**将单个对象转换为数组

```
foo 'thanks'
# => prints 'thanks'
foo ['bar', 'baz', 'foobar']
# => prints 'bar'
# => prints 'baz'
# => prints 'foobar' 
```

如果您不想更改方法，可以在每次调用中添加感谢数组

```
foo ['Thanks'] + ['to','you'] 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-12T10:05:06.757

简单的！只需在方法定义中添加 splat 运算符 ( `*`)即可：`arg_array`

```
def foo( *arg_array ) 
  arg_array.each do |ar|
    puts ar
  end
end 

my_array = ["Hello", "Bye", "Please"]

foo my_array             # Works fine
foo "Thanks", my_array   # And this also 
```

# wordpress - 如何编辑 Wordpress 主题的图库模板以使用自定义帖子类型？

> ID：11918263
> 
> 赞同：2
> 
> 时间：2012-08-11T22:44:57.620
> 
> 标签：wordpress, wordpress-theming, gallery, custom-post-type

如果您能提供帮助，我将不胜感激。我有一个模板可以显示博客帖子的图片库，但我想创建另一个单独的画廊来显示来自我创建的自定义帖子类型的图像，称为“套件”。我要编辑其中的哪些部分？

```
<?php /* Template Name: Top Kits */ ?>

<?php get_header(); ?>

    <div id="main">

        <?php do_action( 'bp_before_blog_page' ) ?>

        <?php if (have_posts()) : while (have_posts()) : the_post(); ?>

            <div class="post" id="post-<?php the_ID(); ?>">
                <h2 class="post-title page-title"><?php the_title(); ?></h2>
                <div class="post-content">
                    <?php the_content(); ?>
                </div>

        <?php endwhile; endif; ?>

                <div class="image-gallery"> 

                    <?php
                    $total = $wpdb->get_var('SELECT count(p.id) FROM '.$wpdb->prefix.'posts p LEFT JOIN '.$wpdb->prefix.'postmeta pm ON p.id = pm.post_id WHERE p.post_status = \'publish\' AND post_type = \'post\' AND pm.meta_key = \'_thumbnail_id\'');

                    load_template( TEMPLATEPATH . '/functions/paginate.php' );

                    $pages = new paginate(array(
                        'total'         =>  $total,
                        'nr_per_page'   =>  of_get_option( 'gallery_count', 5 ) + 1
                    ));

                    $thumbs = $wpdb->get_results('SELECT p.ID,p.post_title FROM '.$wpdb->prefix.'posts p LEFT JOIN '.$wpdb->prefix.'postmeta pm ON p.id = pm.post_id WHERE p.post_status = \'publish\' AND post_type = \'post\' AND pm.meta_key = \'_thumbnail_id\' ORDER BY p.post_date DESC LIMIT '.$pages->limit());

                    foreach ($thumbs as $thumb) : ?>

                        <div class="one_third">
                            <div class="post-img-medium">
                                <a href="<?php echo get_permalink($thumb->ID); ?>" rel="bookmark" title="<?php echo $thumb->post_title; ?>"><?php echo get_the_post_thumbnail($thumb->ID, 'post-medium'); ?></a>
                            </div>
                        </div>

                    <?php endforeach; ?>

                    <div class="clear"></div>

                    <div id="pagination">
                        <?php echo $pages->nav() ?>
                    </div>

                </div>

            </div><!--post-->

        <?php do_action( 'bp_after_blog_page' ) ?>

    </div><!--#main-->

<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T07:31:16.573

使用 query_posts：

```
<?php query_posts(array('post_type' => 'kits', 'posts_per_page' => -1 ))
          if (have_posts()) : while (have_posts()) : the_post(); ?> 
```

更多信息在这里：[http ://codex.wordpress.org/Function_Reference/query_posts](http://codex.wordpress.org/Function_Reference/query_posts)

# javascript - 没有复制权限的 HTML 选择

> ID：11918269
> 
> 赞同：0
> 
> 时间：2012-08-11T22:46:26.670
> 
> 标签：javascript, html, selection

是否可以在没有复制权限的情况下选择 html？

我需要使文本（复杂的 HTML）能够选择，但是：1）我只需要选择整个单词（不是字符 2）选择不应该复制文本（使用 Ctrl+C）

有趣的例子是在 kindle 云阅读器中。但似乎他们实践了火箭科学来实施它。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:12:40.533

无论您做什么，传输到浏览器的文本都会以一种或另一种方式被用户复制。即使您禁用了右键单击复制和 ctrl-c 复制（可以通过禁用 javascript 轻松解决），用户仍然可以选择使用他们的浏览器或插件查看页面的源代码，更聪明的是，他们可以抓取文本，因为它被传输到他们的浏览器。最好的办法是将文本转换为图像服务器端，但即便如此，OCR 程序也可以将其转换为纯文本。

# ruby-on-rails - Rails 3 - 在提交表单之前进行人工检查

> ID：11918270
> 
> 赞同：0
> 
> 时间：2012-08-11T22:46:49.317
> 
> 标签：ruby-on-rails, ruby-on-rails-3, forms, session

我有一个简单的消息表单（：name，：title，：body），它有一个recaptcha。当我在同一页面上同时拥有我的表单和recaptcha 时，我不会获得相同的用户体验，因为我的服务器端表单模型验证不像我希望的那样工作。所以我正在考虑在表单属性保存到我的数据库之前实现重定向到一个单独的 recaptcha 页面。

我想知道这种情况的最佳做法是什么？我应该将消息属性的会话发送到另一个处理 recaptcha 的控制器吗？如果是这样的话，我对如何去做有点迷茫。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:36:41.507

另一种方法是创建一个额外的模型属性，一个名称为 的整数`submission_step`，其值对应于用户在提交过程中到达的步骤。在这种情况下，只有两个：

```
0: before recaptcha
1: after successful recaptcha 
```

`submission_step`因此，当用户首次提交表单时，会使用of实例化一条新消息`0`，运行验证并假设它们通过了“uncaptcha'd”消息。然后向用户发送recaptcha 页面。如果他们成功进行了 recaptcha，则更新记录以将`submission_step`属性更改为`1`.

然后，您可以将其`submission_step`用作过滤已通过 recaptcha 步骤的表单的范围。`:if`您还可以使用 中的或`:unless`条件选项基于步骤进行验证`validate`。

当然，这会在数据库中为尚未通过 recaptcha 步骤的表单创建记录，这可能是一个问题——尽管您可以定期清除它们。但是我发现它是一个相当干净的解决方案，如果您想在将来向该过程添加其他步骤，它会变得很容易。

# iphone - 使用位于文档目录中的 plist

> ID：11918272
> 
> 赞同：0
> 
> 时间：2012-08-11T22:47:28.073
> 
> 标签：iphone, objective-c, ios, xcode

我将字典的 plist 数组复制到设备上的文档目录中，如下所示：

AppDelegate.m:

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self performSelector:@selector(copyPlist)];
    return YES;
}

- (void)copyPlist {

    NSError *error;

    NSFileManager *fileManager=[NSFileManager defaultManager];
    NSArray *pathsArray = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,NSUserDomainMask,YES);

    NSString *doumentDirectoryPath=[pathsArray objectAtIndex:0];
    NSString *destinationPath= [doumentDirectoryPath stringByAppendingPathComponent:@"Wine.plist"];

    if ([fileManager fileExistsAtPath:destinationPath]){
        NSLog(@"database localtion %@",destinationPath);
        return;
    }

    NSString *sourcePath= [[NSBundle mainBundle] pathForResource:@"Wine" ofType:@"plist"];
    NSLog(@"source path %@",sourcePath);
    [fileManager copyItemAtPath:sourcePath toPath:destinationPath error:&error];
    } 
```

数据库位置的日志：

```
/var/mobile/Applications/832E16F4-A204-457E-BFF0-6AEA27915C25/Documents/Wine.plist 
```

* * *

然后，我尝试访问 plist 并用字典填充 sortedWines 数组以填充 TableView：

表视图控制器.h

```
#import <UIKit/UIKit.h>

@interface WinesViewController : UITableViewController <UIActionSheetDelegate> {
     NSMutableArray *sortedWines;
}

@end 
```

表视图控制器.m

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString *path = [documentsDirectory stringByAppendingPathComponent:@"Wine.plist"];
    NSLog(@"plist path %@", path);

    sortedWines = [[NSMutableArray alloc] initWithContentsOfFile:path];
    NSLog(@"objects %@", sortedWines);

    NSSortDescriptor * sortDesc = [[NSSortDescriptor alloc] initWithKey:@"Popularity" ascending:YES];
    [sortedWines sortUsingDescriptors:[NSArray arrayWithObject:sortDesc]];

    [super viewDidLoad];
} 
```

plist 路径的日志：

```
/var/mobile/Applications/832E16F4-A204-457E-BFF0-6AEA27915C25/Documents/Wine.plist 
```

和对象的日志：

（无效的）

现在如何用对象填充 sortedWines 数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:00:11.980

所以解决方案是你的包中的原始 plist 文件不是字典数组。

要解决此断言，请在您的 copyPlist 方法中添加几行：

```
NSString *sourcePath= [[NSBundle mainBundle] pathForResource:@"Wine" ofType:@"plist"];
NSLog(@"source path %@",sourcePath);
NSMutableArray *sortedWines = [[NSMutableArray alloc] initWithContentsOfFile:sourcePath];
NSLog(@"objects %@", sortedWines); // bet this is nil too 
```

编辑

所以一旦你知道你有上面的文件，那么你需要查看/测试

    [fileManager copyItemAtPath:sourcePath toPath:destinationPath error:&error];

这里的问题是您不检查返回码，而是盲目地假设成功。因此，请查看返回代码并在其中记录错误失败。一旦你知道它正在工作，然后在复制之后添加另一行，以将文件加载到数组中，就像你的 viwDidLoad 一样（复制代码）。

如果可行，但 viewDidLoad 中缺少文件，那么唯一可能的是您或系统正在删除文档目录中的所有文件（我听说如果您的应用程序使用 iCloud，则此文件夹更改的规则。

PS：你为什么这样做：

```
[self performSelector:@selector(copyPlist)]; 
```

代替：

```
[self copyPlist]; 
```

# ubuntu - 如何在 ubuntu 中运行和编译一个 cairo 文件

> ID：11918274
> 
> 赞同：3
> 
> 时间：2012-08-11T22:47:43.150
> 
> 标签：ubuntu, graphics, compiler-errors, cairo

我想将 cairo 库用于 c++ 图形。我包括使用的库

```
sudo apt-get install libcairo2-dev 
```

进一步我使用 Ubuntu 开放软件中心安装了 GLX-Dock(Cairo Dock with OpenGL) 并使用[http://cairographics.org/FAQ/](http://cairographics.org/FAQ/)中的代码并使用命令编译

```
g++ trial.cpp 
```

但它给了我以下错误

```
fatal error: cairo.h: No such file or directory
compilation terminated. 
```

我应该如何编译和运行该文件？

此外，有人可以推荐易于学习的具有更多功能的图形库。我尝试使用 OpenGL，但发现它很难理解。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T22:59:53.220

再次阅读常见问题解答：http: [//cairographics.org/FAQ/#compilation_flags](http://cairographics.org/FAQ/#compilation_flags)

这将使您开始：

```
g++ test.c \`pkg-config --libs --cflags cairo\` -o test 
```

运行它：

```
./test 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-08-25T10:31:34.720

我希望这个解决方案有效

```
sudo apt-get install libcairo2-dev 
```

进而：

```
sudo npm install processing -g 
```

# oop - Grails：当我不想保存任何东西时，我可以使用域对象吗？

> ID：11918276
> 
> 赞同：11
> 
> 时间：2012-08-11T22:48:11.793
> 
> 标签：oop, grails, grails-orm, dto, pojo

我的一些领域类变得相当丰富：它们实现了一个有趣的可比性，可能有加、减、乘和 div，许多都有一些方便的 getter，它们调用服务并确定复杂的事情。最重要的是，它们具有正确的属性。我将它们用于正常的“数据库事务”，并且有时我只想要一个具有所有这些方法但可能不想保存它的对象。

我的队友确信这非常糟糕，并建议我应该使用 DTO（数据传输对象），据我所知，这将是一个 POGO/POJO，其中一个域类的代码复制/粘贴。这似乎真的不干，我看不到好处。不时将域对象用作常规对象有什么问题吗？我错过了 DTO 的重点吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T04:28:38.963

Grails 域类的命名有些错误，因为应用程序的域层通常由持久类和非持久类组成。但 Grails 域类始终是持久的。您可以拥有非持久域（传统意义上的）类，但它们必须位于 src/groovy 或 src/java 中。这可能令人沮丧，因为域层在应用程序中被分成两个地方。我们已经请求了非持久域类，例如类似`static persistent = false`或类似的东西，但它还没有实现。

我认为，如果您想利用域类的非持久性特性（例如验证、依赖注入等），那么最好有一些可以由数据库支持但不是的类。您只需要在代码中记录它或有某种约定，例如特殊的包结构或命名约定。`save()`如果您从不调用、`list()`、等GORM 方法，`findAllByFoo()`则不会有任何数据库访问。

就 DTO 而言，它们可以是 un-DRY，但有一个插件可以提供帮助 - 请参阅[http://grails.org/plugin/dto](http://grails.org/plugin/dto)。它已经有一段时间没有更新了，但我很确定它仍然有效。它有一个很好的特性，它将使用语法从持久域类实例创建 DTO 实例`domainObj as DTO`。您确实需要在类之间保持更改同步，但最初的 DTO 生成是通过脚本自动生成的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:31:28.533

我认为你在正确的道路上。

1 - 当你必须创建一个类来处理一个域类时，你使你的模型更加耦合。您正在创建更多依赖项，这显然很糟糕。您的对象应该能够照顾自己。

2 - 你的朋友正在谈论的模型实际上被称为[贫血域模型](http://martinfowler.com/bliki/AnemicDomainModel.html)，其中你的数据与程序的逻辑分离，它首先被 Martin Fowler 描述为反模式。逻辑和数据之间的这种分离在过程编程中非常有用，但在面向对象编程中却没有（OOP 的目的正好相反）。

3 - 减少代码重用。

4 - 一旦您必须初始化与数据分离的逻辑，就更难测试。同时，数据会通过您的系统泄漏。

DTO 是你可以使用的东西，当然。但不建议您这样做。它最初的设计目的是通过流程或层来传输数据（对象）。然后，由于某种原因，人们开始在层之间使用它，这是不值得的。使您的程序更加复杂（一旦您将这些实体分布在您的应用程序中）并且它允许全局访问。

您所做的称为富域模型，使用它没有问题。但是，你当然应该小心。如果你发现你的类承担了太多的责任，那么也许是时候设计另一个类来提供帮助了（也许你违反了[SRP](http://www.objectmentor.com/resources/articles/srp.pdf)原则）。

看看如何在 Grails 中设计域对象。他们鼓励您编写丰富的模型（验证、数据库事务等）。

# php - 遍历一组数据的最佳方法

> ID：11918278
> 
> 赞同：2
> 
> 时间：2012-08-11T22:48:13.967
> 
> 标签：php, arrays, foreach

我正在查看一些成本信息，我需要一种显示所有组合的好方法。我不确定我是否必须使用嵌套`foreach`循环或其他东西。

我有 25 种不同的物品。**项目** 1 -**项目 2** ..**项目 25**

我有 6 个螺栓用于构建我的物品。**bolt1** - **bolt2** - **bolt3** - **bolt4** - **bolt5** - **bolt6**每个螺栓都有不同的成本。

所有物品只能使用**一种**螺栓。不是混合物，例如螺栓 1 的 3 和螺栓 2 的 3。

*   25 个项目中有 7 个需要 6 个螺栓。
*   其余 6 个需要 5 个螺栓。
*   其余 3 个需要 4 个螺栓。
*   其余 5 个需要 3 个螺栓。
*   其余 3 个需要 2 个螺栓。
*   最后 1 个需要 1 个螺栓。

这就是棘手的地方。

每件带有螺栓数量的物品都需要 4 个配件包中的一个，这些配件包的价格不同。

**acc1** - **acc2** - **acc3** - **acc4**

每个项目还需要 4 个盒子填充器之一。每个，都有不同的成本

**填充**器 1 -**填充器 3** -**填充器 3** -**填充器 4**

最后，每个项目都需要 3 个包装器之一。每个，都有不同的成本。

**包装器1** -**包装器2** -**包装器3**

例如，我需要 PHP 给我所有可能的价格组合。

```
foreach 6 bolt item{
(6 bolt1 * $cost) +  ($acc1Cost + $stuffer1Cost + $wrapper1Cost) = item1acc1stff1wra1COST
(6 bolt1 * $cost) +  ($acc2Cost + $stuffer1Cost + $wrapper1Cost) = item1acc2stff1wra1COST
(6 bolt1 * $cost) +  ($acc3Cost + $stuffer1Cost + $wrapper1Cost)  ..
(6 bolt1 * $cost) +  ($acc4Cost + $stuffer1Cost + $wrapper1Cost)  ..
(6 bolt1 * $cost) +  ($acc1Cost + $stuffer2Cost + $wrapper1Cost)  ..
(6 bolt1 * $cost) +  ($acc1Cost + $stuffer3Cost + $wrapper1Cost)
(6 bolt1 * $cost) +  ($acc1Cost + $stuffer4Cost + $wrapper1Cost)
(6 bolt1 * $cost) +  ($acc1Cost + $stuffer1Cost + $wrapper2Cost)
(6 bolt1 * $cost) +  ($acc1Cost + $stuffer1Cost + $wrapper3Cost)
(6 bolt2 * $cost) +  ($acc1Cost + $stuffer1Cost + $wrapper3Cost)
(6 bolt2 * $cost) +  ($acc1Cost + $stuffer1Cost + $wrapper3Cost)
..... all combinations
foreach 5 bolt item{
(5 bolts * $cost) +  (**$acc1Cost** + **$stuffer1Cost** **$wrapper1Cost**)
(5 bolts * $cost) +  (**$acc2Cost** + **$stuffer1Cost** **$wrapper1Cost**)
(5 bolts * $cost) +  (**$acc3Cost** + **$stuffer1Cost** **$wrapper1Cost**)
(5 bolts * $cost) +  (**$acc4Cost** + **$stuffer1Cost** **$wrapper1Cost**)

..so on to the end..
} 
```

每种类型的项目都被分类到不同的数组中，这些数组除以它们需要多少个螺栓。

```
$oneBolt = array(
bolt1 => cost,
...
); 
```

其他每个项目组都保存在各自的价格数组中。

我意识到我可以像上面一样写出所有组合，但是如何使用循环来做到这一点？以一种或另一种方式做到这一点是否明智？PHP 有这样的内置函数吗？请，您可以提供的任何见解都将受到赞赏。我应该这样做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:44:10.487

按照您的建议，让我们看看如何使用数组来做到这一点。我们将使用多维数组，以便您可以存储除价格之外的每个部分的更多信息（如名称、提供者、url 等）。

```
$bolts = array();
$bolts[1] = array('price'=> 25);
$bolts[2] = array('price'=> 12);
$bolts[3] = array('price'=> 45);
$bolts[4] = array('price'=> 33);
$bolts[5] = array('price'=> 32);
$bolts[6] = array('price'=> 31);

$accessories = array();
$accessories[1] = array('price'=> 140);
$accessories[2] = array('price'=> 120);
$accessories[3] = array('price'=> 134);
$accessories[4] = array('price'=> 136);

$stuffer = array();
$stuffer[1] =array('price'=> 12);
$stuffer[2] =array('price'=> 12);
$stuffer[3] =array('price'=> 12);
$stuffer[4] =array('price'=> 12);

$wrapper = array();
$wrapper[1] =array('price'=> 12);
$wrapper[2] =array('price'=> 12);
$wrapper[3] =array('price'=> 12);

$items = array();
$items[1] = array('bolt'=> 3, 'bolt_amount'=>7, 'accessory'=>2, 'stuffer'=>4, 'wrapper'=>2);
// Do that for 25 items, each item is an array containing its relationships. Store the Index of the part in its own array so you can reference it when calculating the price.

$items[1]['price'] = ($items[1]['bolt_amount'] * $bolts[$items[1]['bolt']]['price']) + $accessories[$items[1]['accessory']]['price'] + $stuffer[$items[1]['stuffer']]['price'] + $wrapper[$items[1]['wrapper']]['price'];

echo $items[1]['price'];

// 7*45 + 120 + 12 + 12 = 459 
```

那将是最简单但可维护的编写方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T23:21:07.177

我认为您的问题更多是关于内容建模而不是实际编程。

您是否考虑过使用 mysql 数据库来存储这些关系？您将有一张用于物品的桌子，一张用于螺栓的桌子，一张用于附件的桌子，一张用于填充物的桌子和一张用于包装纸的桌子。

然后，您应该定义每个对象之间的关系：

*   1对1：例如：“一个人作为一组眼睛。一组眼睛只能属于一个人”
*   一对多：例如：“一个人只能有一个家庭”
*   多对一：例如：“一个家庭可以有很多人。”
*   多对多：例如：“一个食谱可以有很多成分。一个成分可以有很多食谱”

所以，在你的情况下：

物品/螺栓关系是：多对一物品/配件是：一对一（afaik）等。

设置完成后，您需要生成实现“业务逻辑”的中间件代码（例如 php）：确保遵守您的限制，然后根据这些限制计算每个项目的价格。

我意识到我正在通过将您带入一个完全不同的方向来回应您的要求，但这就是我会这样做的方式。我会使用 MVC 框架来加速开发（cakephp、yii、codeigniter 等）。如果您需要有关此方法的更多信息，请告诉我。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T00:22:38.207

正如pixeline所写，如果您使用数据库会更好。但是如果你想使用数组，我写了几行对你有用的代码。

```
// make combinations array
function combinations($data, &$all = array(), $group = array(), $val = null, $i = 0) {
    if (isset($val))
    {
        array_push($group, $val);
    }

    if ($i >= count($data))
    {
        $combination_price = array_product($group);
        array_push($all, array('combination' => $group, 'combination_price' => $combination_price));
    }
    else {
        foreach ($data[$i] as $v)
        {
            combinations($data, $all, $group, $v, $i + 1);
        }
    }

    return $all;
}

$bolts = array(
    25, // bolt 1 price
    30, // bolt 2 price
    40  // bolt 3 price
);

// array of items contains number of bolts and price
$items = array (
    array(
        'bolts_num' => 6,
        'bolt_price' => $bolts[0]
    ), 
    array(
        'bolts_num' => 6,
        'bolt_price' => $bolts[1]
    ), 
    array(
        'bolts_num' => 6,
        'bolt_price' => $bolts[2]
    ),  
);

$accessories = array(
    12, 16, 18, 20 //accessories prices
);

$stuffers = array(
    20, 10, 30, 40  //stuffers prices
);

$wrapper = array(
    11, 13, 17  //wrapper prices
);

// all combinations, use var_dump if you dont know what is inside
$combinations = combinations(array($accessories, $stuffers, $wrapper));

$item_combinations = array();

// join combinations and items and calculate final price
foreach ($items as $item_key => $item) {
    foreach($combinations as $combination) {
        $item_price = array_product($item);
        $item_combinations[] = array(
            'item_id' => $item_key,
            'combination' => $combination['combination'],
            'price' => $combination['combination_price'] + $item_price
        );
    }
}

var_dump($item_combinations); 
```

**我们所做的：**

1.  创建所有配件 - 填充物 - 包装组合并计算每个组合的价格（配件*填充物*包装）。我使用了 array_product 函数。
2.  加入组合和项目。我计算了每件商品的价格（螺栓 * 数量）并添加到组合价格中。我忘记了商品价格，所以您也应该添加商品价格。

如果您有任何问题 - 问。

查看实际操作：[http ://codepad.viper-7.com/8fsVp6](http://codepad.viper-7.com/8fsVp6)

# iphone - 使用 HTML5 和 JS 从智能手机上传图像

> ID：11918283
> 
> 赞同：0
> 
> 时间：2012-08-11T22:48:40.607
> 
> 标签：iphone, html, cordova, smartphone

是否可以使用 HTML5 和 JS 从智能手机的库（如 iPhone）上传图像？我正在开发一个 HTML5 网站，我需要让用户使用标准表单和多部分上传图像。我听说 Phonegap API 支持这样的功能，但问题是，不使用包装器和本机应用程序是否可能？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T15:36:45.230

不在浏览器中，不。Phonegap API 在浏览器中加载的网站中不起作用。它需要应用程序的 Java 端才能工作，因此需要一个完整的 Phonegap 应用程序。

# bash - 我的 .bashrc 文件未在 Git Bash 启动时执行（Windows 7）

> ID：11918285
> 
> 赞同：13
> 
> 时间：2012-08-11T22:48:57.847
> 
> 标签：bash, mingw32, git-bash

这就是我所做的：

```
cd ~
touch .bashrc
notepad .bashrc 
```

我的 .bashrc 的内容是（在网上某处找到）：

```
SSH_ENV="$HOME/.ssh/environment"

# start the ssh-agent
function start_agent {
    echo "Initializing new SSH agent..."
    # spawn ssh-agent
    ssh-agent | sed 's/^echo/#echo/' > "$SSH_ENV"
    echo succeeded
    chmod 600 "$SSH_ENV"
    . "$SSH_ENV" > /dev/null
    ssh-add
}

# test for identities
function test_identities {
    # test whether standard identities have been added to the agent already
    ssh-add -l | grep "The agent has no identities" > /dev/null
    if [ $? -eq 0 ]; then
        ssh-add
        # $SSH_AUTH_SOCK broken so we start a new proper agent
        if [ $? -eq 2 ];then
            start_agent
        fi
    fi
}

# check for running ssh-agent with proper $SSH_AGENT_PID
if [ -n "$SSH_AGENT_PID" ]; then
    ps -ef | grep "$SSH_AGENT_PID" | grep ssh-agent > /dev/null
    if [ $? -eq 0 ]; then
    test_identities
    fi
# if $SSH_AGENT_PID is not properly set, we might be able to load one from
# $SSH_ENV
else
    if [ -f "$SSH_ENV" ]; then
    . "$SSH_ENV" > /dev/null
    fi
    ps -ef | grep "$SSH_AGENT_PID" | grep -v grep | grep ssh-agent > /dev/null
    if [ $? -eq 0 ]; then
        test_identities
    else
        start_agent
    fi
fi 
```

不知何故，该脚本根本没有执行。我没有看到任何应该回显的字符串。我熟悉 Linux 和 Mac OS X 中的 Unix 命令行，但我不知道它在 Windows 下是如何工作的。请问有什么建议吗？

编辑：好的，我的错误......这个脚本已执行，但我不完全理解它的作用。我希望避免每次推送到远程仓库时都被要求输入密码。就目前而言，我仍然每次都被问到。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-12T00:17:54.477

答对了！ssh-agent 在那个 .bashrc 中运行的方式显然有问题。[我从这里](http://www.cygwin.com/ml/cygwin/2001-06/msg00537.html)复制了一个，它很管用！现在我只需要在 git bash 启动时输入一次密码，任何后续推送都不再需要它。

这是脚本的实际内容：

```
SSH_ENV=$HOME/.ssh/environment

function start_agent {
     echo "Initialising new SSH agent..."
     /usr/bin/ssh-agent | sed 's/^echo/#echo/' > ${SSH_ENV}
     echo succeeded
     chmod 600 ${SSH_ENV}
     . ${SSH_ENV} > /dev/null
     /usr/bin/ssh-add;
}

# Source SSH settings, if applicable

if [ -f "${SSH_ENV}" ]; then
     . ${SSH_ENV} > /dev/null
     #ps ${SSH_AGENT_PID} doesn't work under cywgin
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
         start_agent;
     }
else
     start_agent;
fi 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-09-19T20:52:41.073

Windows 上最简单的机制是[http://anterence.blogspot.co.uk/2012/01/ssh-agent-in-msysgit.html](http://anterence.blogspot.co.uk/2012/01/ssh-agent-in-msysgit.html)

修改为显示除 'id_rsa' 以外的键名，.bashrc 文件如下所示：

```
#! /bin/bash 
eval `ssh-agent -s` 
ssh-add ~/.ssh/github_rsa
ssh-add ~/.ssh/otherkey_rsa 
```

系统会依次提示您输入每个密钥的密码，但仅在机器启动后第一次出现。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-24T03:43:18.803

试试这个，对我有用。

```
SSH_ENV=$HOME/.ssh/environment

function start_agent {
     echo "Initialising new SSH agent..."
     /usr/bin/ssh-agent | sed 's/^echo/#echo/' > ${SSH_ENV}
     echo succeeded
     chmod 600 ${SSH_ENV}
     . ${SSH_ENV} > /dev/null
     /usr/bin/ssh-add;
}

# Source SSH settings, if applicable

if [ -f "${SSH_ENV}" ]; then
     . ${SSH_ENV} > /dev/null
     #ps ${SSH_AGENT_PID} doesn't work under cywgin
     ps -ef | grep ${SSH_AGENT_PID} | grep ssh-agent$ > /dev/null || {
         start_agent;
     }
else
     start_agent;
fi 
```

# android - tabhost 内的滚动视图，tab2 禁用 tab1 中的按钮

> ID：11918289
> 
> 赞同：1
> 
> 时间：2012-08-11T22:49:46.930
> 
> 标签：android, scrollview, android-tabhost

我遇到了一些奇怪的问题。我有一个带有 3 个不同标签的标签主机。

tab1：一个大按钮 tab2：非常多的文本（需要滚动视图才能看到全部） tab3：只是一个小文本

所以当我在tab2中实现滚动视图时，它禁用了tab1中的按钮......

即使 tab1 和 tab3 无法滚动，也会显示右侧的这个小滚动图标。但是，如果我在 tab1 或 tab3 中滚动，则 tab2 将被滚动。

继承人我的代码阵容的一个例子：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:background="@drawable/carbonfibre"
android:orientation="vertical" >

<TabHost
    android:id="@+id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical" >

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:layout_weight="1" >

            <LinearLayout
                android:id="@+id/tab1"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <ImageView
                    android:id="@+id/imageView1"
                    android:layout_width="wrap_content"
                    android:layout_height="95dp"
                    android:src="@drawable/headerwithtext" />

                <TextView
                    android:id="@+id/textView1"
                    android:layout_width="wrap_content"
                    android:layout_height="20dp"
                    android:text=""
                    android:textAppearance="?android:attr/textAppearanceLarge" />

                <Button
                    android:id="@+id/bRingTaxi"
                    android:layout_width="275dp"
                    android:layout_height="275dp"
                    android:layout_gravity="center_vertical|center_horizontal|center"
                    android:background="@drawable/button_callcab"
                    android:gravity="center_vertical|center_horizontal"
                    android:onClick = "minKlass"
                     />
            </LinearLayout>

            <ScrollView
                xmlns:android="http://schemas.android.com/apk/res/android"
                android:id="@+id/scroller"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:fillViewport="true" >

                <LinearLayout
                    android:id="@+id/tab2"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:orientation="vertical"
                     >

                    <TextView
                        android:id="@+id/textView1"
                        android:layout_width="wrap_content"
                        android:layout_height="15dp"
                        android:text="blahblahblah"
                        android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

然后是与 tab1 具有相似属性的第三个选项卡。有人知道为什么 tab2 中的这个滚动视图会禁用我在 tab1 中的按钮，为什么当我在 tab1 和 tab2 中时我可以滚动第二个选项卡？

最好的问候拉兹

# html - div根据页面宽度自动调整高度

> ID：11918290
> 
> 赞同：1
> 
> 时间：2012-08-11T22:50:03.307
> 
> 标签：html, css

我有一个宽度为 100% 的 div，我需要根据页面宽度的像素数来调整同一 div 的高度。原因是图像在 div 的整个宽度上被拉伸，如果我设置了一个实心高度，不同的分辨率会以不同的方式呈现它，并且图像看起来被拉伸了。

有没有解决这个问题的css？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:56:41.543

您可以将其保留为`auto`：

```
<div id="mydiv"><img src="..." /></div>

#mydiv,#mydiv>img{width:100%; /*height:auto;*/} 
```

您可以省略`height:auto`，因为它是默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T22:57:33.153

您可以使用 css 媒体查询来做到这一点，请参阅[http://www.w3.org/TR/css3-mediaqueries/](http://www.w3.org/TR/css3-mediaqueries/)

基本上你会有一堆媒体查询，如下所示：

```
@media (min-width: 1024px) { 
  div {height: 200px;}
} 
```

显然将宽度和高度组合更改为您需要的任何内容，您还可以根据需要使用 max-width 或 width

# html - 防止 Googlebot 频繁地重新索引某些页面

> ID：11918292
> 
> 赞同：2
> 
> 时间：2012-08-11T22:50:49.317
> 
> 标签：html, caching, meta-tags, googlebot

我们可以使用 robots.txt 更改机器人的抓取速度。但 Googlebot 没有考虑 robots.txt，所以我寻找另一种方法。

在我的网站中，我有一些页面非常频繁地更改，并且更改很小。一天说 20-30 个字符。但我不希望 Googlebot 经常重新索引它们。比如说，我希望 Googlebot 每个月都对其进行索引。是否可以使用这样的元标记来制作它：

```
<META HTTP-EQUIV="expires" CONTENT="Wed, 26 Feb 1997 08:21:57 GMT"> 
```

Googlebot 会忽略这一点吗？或者您能推荐其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:55:38.157

您可以使用这些 URL 创建[站点地图](http://www.sitemaps.org/)并将[`<changefreq>`](http://www.sitemaps.org/protocol.html#changefreqdef)元素设置为`monthly`. 这些只是对搜索引擎的提示，但这可能是您最好的选择。

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
   <url>
      <loc>http://www.example.com/latest-updates.html</loc>
      <changefreq>monthly</changefreq>
   </url>
</urlset> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T22:57:10.590

我建议你生成一个 XML 站点地图。

站点地图将允许您指定要传递给搜索引擎的参数，即您赋予页面的重要性（或权重）以及页面（通常）更新的速率。

这并不意味着搜索引擎只会坚持这一点。可能是您说页面每年更新一次，并且该年被抓取 3 次，或者它设置为每天，并且每月只被抓取一次。

[谷歌在站点地图上](http://support.google.com/webmasters/bin/answer.py?hl=en&answer=156184)

# jquery - 如何通过jQuery动态更新隐藏的表单域

> ID：11918293
> 
> 赞同：1
> 
> 时间：2012-08-11T22:51:09.503
> 
> 标签：jquery, dynamic, hidden-field

我有一个隐藏的表单字段，用于存储 jQuery UI 可排序列表的值。

```
<input name="asw_options[asw_icon_order]" type="hidden" value="<?php echo $aswicons ?>" /> 
```

我有一个保存排序列表顺序的 jQuery 函数。

```
/* Social Networking Icon Sorter */
var itemList = $('#asw-sortable');

itemList.sortable({
    update: function(event, ui) {
        $('#loading-animation').show(); // Show the animate loading gif while waiting

        opts = {
            url: ajaxurl, // ajaxurl is defined by WordPress and points to /wp-admin/admin-ajax.php
            type: 'POST',
            async: true,
            cache: false,
            dataType: 'json',
            data:{
                action: 'item_sort', // Tell WordPress how to handle this ajax request
                order: itemList.sortable('toArray').toString() // Passes ID's of list items in  1,3,2 format

            },
            success: function(response) {
                $('#loading-animation').hide(); // Hide the loading animation
                //$('#asw_options[asw_icon_order]').val(itemList.sortable('toArray').toString()); // Update hidden field with new values
                $('input[name=asw_options[asw_icon_order]]').val(itemList.sortable('toArray').toString());
                return; 
            },
            error: function(xhr,textStatus,e) {  // This can be expanded to provide more information
                alert(e);
                // alert('There was an error saving the updates');
                $('#loading-animation').hide(); // Hide the loading animation
                return; 
            }
        };
        $.ajax(opts);
    }
}); 
```

存储的数据保存如下：

**美味，Twitter，Facebook，Googleplus，Stumbleupon，Pinterest，LinkedIn，Youtube**

一切运作良好。您重新排序字段并通过 jQuery 自动进行保存。

我的问题是存储在上面的隐藏字段，在 jQuery 成功完成订单的新保存后，我需要能够通过 jQuery 动态更新它。

这是一个 WordPress 插件，所以我需要更新隐藏的输入字段，因为如果用户点击“保存”按钮，它会保存旧值，因为这就是隐藏字段的初始“值”。

正如您在 jQuery 代码中看到的那样，我认为我可以将代码添加到“成功”函数中，然后更新隐藏字段，但是它不起作用。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T22:55:02.493

您在选择器中缺少一些引号，试试这个：

```
$('input[name="asw_options[asw_icon_order]"]').val(itemList.sortable('toArray').toString()); 
```

# java - Java & JavaScript WebSockets

> ID：11918300
> 
> 赞同：2
> 
> 时间：2012-08-11T22:52:56.553
> 
> 标签：java, javascript, websocket

我使用 WebSockets 创建了一个 Java 和 JavaScript 应用程序。对于 Java 服务器，我使用以下库：[https](https://github.com/TooTallNate/Java-WebSocket) ://github.com/TooTallNate/Java-WebSocket 。

那么关于应用程序：

首先，会话以两条消息开始。第一个是从浏览器发送的，第二个是来自 Java 服务器的回复。之后，Java 服务器开始以 50 毫秒的间隔发送消息。这些消息非常大（每个大约 500 KB）。

当我尝试将消息从浏览器发送回服务器时，客户端只是停止接收消息。什么都没有发生，甚至没有调用 WebSockets API 的 onclose、onerror 回调（在客户端和服务器端）。我在 chrome 开发工具中检查了网络，没有任何异常发生；我只是停止接收来自服务器的消息......

你能告诉我问题可能是什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:03:43.327

The problem is because the output stream of the server blocks.

Usually you can fix it by doing the output in separate thread.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T09:46:44.077

我有类似的问题，并在几天前解决了它。只需将来自服务器的流放在不同的线程中即可。这将解决所有问题。

# objective-c - UIButton 动作不起作用

> ID：11918302
> 
> 赞同：0
> 
> 时间：2012-08-11T22:53:12.963
> 
> 标签：objective-c, cocoa, uibutton

我在使用 UIButton 时遇到了一些问题。

这是我的代码：

![在此处输入图像描述](../Images/ae05c5b733977321328693fbf9237052.png)

我没有使用 Interface Builder，我是一名新程序员。

What I want is that when the button is selected the title changes and the button's transparency changes from half visible to fully visible.

提前致谢，-Marnix

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:14:56.723

问题是该`if`语句只执行一次，当您创建按钮时。在里面`MyCode2`，添加这一行：

```
[Button1 addTarget:self action:@selector(buttonAction:) forControlEvents:UIControlEventTouchDown]; 
```

每次按下按钮时，`buttonAction`都会执行该方法，因此：

```
- (IBAction)buttonAction:(id)sender {
    if(Button1.selected == NO) {
        // Do your "NO" stuff
    }else if(Button1.selected == YES) {
        // Do your "YES" stuff
    }
} 
```

您必须在您的文件中声明此 IBAction`.h`并将此方法添加到您的`.m`文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:14:59.380

首先，您应该为不同的控件状态设置标题，例如

```
[Button1 setTitle:@"UnTapped" forState:UIControlStateSelected]; 
```

其次，您不需要将`setTitle`方法放在此检查中。

此外，您需要将此检查放在按钮的方法中以使其工作。如果你没有使用 IB，那么就使用`addTarget: action: forControlEvent`like

```
[Button1 addTarget:self actoin:@selector(changeButtonState:) forControlEvent:UIControlEventTouchUpInside]; 
```

最后，您是否让按钮在触摸后保持选中状态？如果没有，请添加

```
Button1.selected = !Button1.selected 
```

在方法中。总而言之，你的方法应该是这样的

```
- (IBAction)buttonAction:(id)sender {
    Button1.selected = !Button1.selected
    if(Button1.selected == NO) {
        Button1.alpha = 0.5
    }else if(Button1.selected == YES) {
        Button1.alpha = 1.0
    }
} 
```

# php - 如何限制 wordpress 中自定义帖子类型的内容框中的字符数？

> ID：11918306
> 
> 赞同：0
> 
> 时间：2012-08-11T22:54:08.423
> 
> 标签：php, javascript, jquery, wordpress

我有一个自定义帖子类型：事件

如何将此自定义帖子类型的主要内容框中允许的字符数限制为 500？

**更新：** 我发现了这个： http: [//konstruktors.com/blog/wordpress/3685-limit-number-words-characters-in-wordpress-editor/](http://konstruktors.com/blog/wordpress/3685-limit-number-words-characters-in-wordpress-editor/)

它很接近，虽然它不只针对一种类型的内容，关于如何改变它的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:13:41.573

未经测试。但是尝试：

```
<?php echo apply_filters( 'the_content', limit_text( get_the_content(), 15 ) ); ?>

function limit_text($text, $limit) {
    if (strlen($text) > $limit) {
        $words = str_word_count($text, 2);
        $pos = array_keys($words);
        $text = substr($text, 0, $pos[$limit]) . '...';
    }

    return $text;
} 
```

如果你想在代码上方使用字符限制并且你想要字数限制然后使用下面的代码

15 是字符限制还是字数限制？如果的话，使用 strlen 是不正确的。

尝试改用 WP wp_trim_words()。

将文本修剪为 15 个单词：

```
<?php echo apply_filters( 'the_content', wp_trim_words( get_the_content(), 15, '&hellip;' ) ); ?> 
```

# ruby - Ruby 中 Module 中的自身值

> ID：11918309
> 
> 赞同：0
> 
> 时间：2012-08-11T22:54:46.193
> 
> 标签：ruby, module

为什么给出这样的模块：

```
module TestModule
  module Configuration
    # Return the configuration values set in this module
    def options
      puts "OPTIONS IS IN"
      puts self.inspect
    end
  end
end 
```

我知道 options 方法在 TestModule 中而不是在 Configuration 中？

编辑：我添加了我正在查看的宝石，以及让我感到困惑的宝石：

检查此文件：第 37 行的[configuration.rb](https://github.com/gregmoreno/awesome/blob/master/lib/awesome/configuration.rb) `options` 定义了该方法。

[然而，在Client](https://github.com/gregmoreno/awesome/blob/master/lib/awesome/client.rb)类中，当调用选项（第 11 行）时，使用了 Awesome 而不是 Configuration。这是为什么？我没有看到任何名为 Awesome 的类混合了这些模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:57:22.390

有问题的宝石确实（在 awesome.rb 中）

```
module Awesome
  extend Configuration
end 
```

因此`Awesome::Configuration`（例如`options`）上的所有方法都成为`Awesome`模块上的单例方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:14:47.933

从技术上讲，它不是两者的一部分。它必须混合到一个类中才能使其成为一个类的一部分。要使其可直接在模块上调用，您需要`self.`在定义中为其添加前缀以使其成为模块方法而不是实例方法：

```
def self.options
  self #=> TestModule::Configuration
end 
```

这是一个很好的 mixins 教程，它允许您使用实例方法：[http ://rubylearning.com/satishtalim/modules_mixins.html](http://rubylearning.com/satishtalim/modules_mixins.html)

# ruby-on-rails - 使用rails中的会话变量在模型中评分算法

> ID：11918311
> 
> 赞同：0
> 
> 时间：2012-08-11T22:55:17.260
> 
> 标签：ruby-on-rails, algorithm, session, rails-activerecord, scoring

我想将结果返回给按评分算法排序的用户，该评分算法根据用户的朋友个性化。就上下文而言，在我的应用程序中，用户可以将事件添加到他们的日历中。Myevents 是用户和事件之间的连接表。我想根据活动的总参加者人数以及有多少用户的朋友参加该活动来计算分数。

我想做这样的事情：

```
class Event < ActiveRecord::Base

after_initialize :calculate_score
attr_accessor :score

  def calculate_score(user_id)

     User.find_by_id(user_id).friends.each do |friend|

                        if @id = Myevents.find_by_user_id_and_flier_id(friend.id, self.id)

                            friends_attending_list << @id
                        end

      end

    friends_attending_count = friends_attending_list.count

    total_attendees_count = Myevents.where(:flier_id => self.id, :attending_status => "1").count

     self.score = 100*(friend_attending_count) + 50*(total_attendees_count)

  end

end 
```

不幸的是，我找不到将会话的 user_id 传递给模型的好方法......理想情况下，我不想违反 MVC，但我希望能够通过这个计算的分数对结果进行排序。有什么建议吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T23:38:34.237

首先，要扩展，您需要将此分数缓存在某个地方。这种方法在这里会非常昂贵。但这不是一个简单的问题，因为它是每个用户每个事件的分数。

我看不出将分数存储在事件中有何意义。

在不考虑性能的情况下，我会`score_for_event(event)`在 User 模型上有一个方法，您可以在任何需要的地方调用它。

# c++ - 如何使用 RE2 找到匹配字符串的偏移量？

> ID：11918314
> 
> 赞同：6
> 
> 时间：2012-08-11T22:56:00.700
> 
> 标签：c++, regex, re2

[RE2](http://code.google.com/p/re2/)是 Google 提供的现代正则表达式引擎。我想在当前使用 gnuregex 的程序中使用 RE2。我遇到的问题与找出匹配的内容有关。RE2 返回的是匹配的字符串。我需要知道匹配的偏移量。我目前的计划是获取 RE2 返回的内容，然后`find`在 C++ 字符串上使用 a 。但这似乎很浪费。我已经阅读了 RE2 手册，但不知道该怎么做。有任何想法吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-12T09:20:00.993

将结果存储在 a`re2::StringPiece`而不是 a 中`std::string`。的值`.data()`将指向原始字符串。

考虑这个程序。在每个测试中，`result.data()`是指向原始`const char*`or的指针`std::string`。

```
#include <re2/re2.h>
#include <iostream>

int main(void) {

  { // Try it once with character pointers
    const char *text[] = { "Once", "in", "Persia", "reigned", "a", "king" };

    for(int i = 0; i < 6; i++) {
      re2::StringPiece result;
      if(RE2::PartialMatch(text[i], "([aeiou])", &result))
        std::cout << "First lower-case vowel at " << result.data() - text[i] << "\n";
      else
        std::cout << "No lower-case vowel\n";
    }
  }

  { // Try it once with std::string
    std::string text[] = { "While", "I", "pondered,", "weak", "and", "weary" };

    for(int i = 0; i < 6; i++) {
      re2::StringPiece result;
      if(RE2::PartialMatch(text[i], "([aeiou])", &result))
        std::cout << "First lower-case vowel at " << result.data() - text[i].data() << "\n";
      else
        std::cout << "No lower-case vowel\n";
    }
  }
} 
```

# opencv - 较小的重投影误差是否总是意味着更好的校准？

> ID：11918315
> 
> 赞同：24
> 
> 时间：2012-08-11T22:56:03.423
> 
> 标签：opencv, camera-calibration

在相机校准期间，通常的建议是使用许多图像 (>10)，其姿势、深度等都有变化。但是我注意到，通常我使用的图像越少，重投影误差就越小。例如，对于 27 张图像，cv::calibrateCamera 返回 0.23，而只有 3 张我得到 0.11。这可能是由于在校准期间我们正在解决超定系统的最小二乘问题。

问题：

1.  我们是否真的使用重投影误差作为校准好坏的绝对量度？例如，如果我用 3 张图像校准得到 0.11，然后用其他 27 张图像校准得到 0.23，我们真的可以说“第一次校准更好”吗？

2.  OpenCV 使用相同的图像进行校准和计算误差。这不是某种形式的过拟合吗？如果我实际上使用了 2 个不同的集合——一个用于计算校准参数，一个用于计算误差——不是更正确吗？在这种情况下，我将使用相同的（测试）集来计算来自不同（训练）集的所有校准结果的误差。那不是更公平吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-22T19:31:05.527

抱歉，如果为时已晚 - 刚刚看到它。

错误是拟合的重投影。因此，在图像上找到点，计算真实世界模型，重新计算这些点在给定模型的图像上的位置 - 报告差异。在某种程度上，这有点循环，你可能有一个模型只对那些少数图像是正确的，然后会报告一个非常好的错误，同时给它很多图像会产生一个更普遍正确的模型 - 但会有更大的错误，只是因为您试图将其拉伸以适应更大的空间。

确实有一点，添加更多图像并不能改善拟合，并且可能会增加噪音，因为点永远不会被完美地检测到。重要的是提供更大的参数集、更多的角度和位置，而不是等效的数据

使用相同的图像集来预测误差并不是真正的问题，因为就实际的物理镜头参数而言，拟合确实具有真正的意义——它不像在相同的数据上训练/测试神经网络。

编辑：比opencv更好的校准程序（尽管基于相同的概念）包含在[3D-DIC](http://opticist.org/node/73)中（免费但不是OSS，注册该站点以获得下载链接）具体参见[校准手册](http://faculty.cua.edu/wangz/publications/advanced_camera_calibration.pdf)。

# php - 将表的列与当前会话匹配

> ID：11918316
> 
> 赞同：0
> 
> 时间：2012-08-11T22:56:10.233
> 
> 标签：php, mysql

我正在尝试将 $username 变量与当前会话用户名（登录帐户的用户名）匹配。

我正在使用以下代码，但出现解析错误：语法错误，意外 T_ENCAPSED_AND_WHITESPACE，期望 T_STRING 或 T_VARIABLE 或 T_NUM_STRING

```
$result = mysql_query("SELECT * FROM settings WHERE $username = $_SESSION['username']") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:00:10.870

我在这里看到三个非常明显的错误：

`$username`在查询中将由 PHP 评估为 PHP`$username`变量的值，您显然没有该值，然后将其评估为“”。

`$_SESSION['username']`应该用引号引起来（“”或“'”），因为它显然是一个字符串值。

此外，我将其重写为：

```
$result = mysql_query("SELECT * FROM settings WHERE username = '" . $_SESSION['username'] . "'"); 
```

话虽如此，您不想在不先清理它们的情况下将任何变量从 PHP 直接传递给查询。这是一个注射天堂。

[编辑]

此外，看到您的错误消息，错误可能在其他地方。除非你真的错过了`;`你的行尾。此外，该错误应该为您提供发生解释错误的确切 PHP 行号。

# button - 带有状态 android 的按钮

> ID：11918317
> 
> 赞同：0
> 
> 时间：2012-08-11T22:56:13.353
> 
> 标签：button, jbutton, imagebutton

晚上好，

我问自己以下问题：

我想创建一个具有以下两种状态的收藏夹按钮：

第一个状态：“添加到收藏夹”

第二状态（在 OnClick 事件上）：“从收藏夹中删除”

但我也可以通过第二个 OnClick 事件等返回到第二个状态：“添加到收藏夹”。

有没有人有一个简单的 OnClickListener 解决方案，这似乎是不可能的。

我终于使用自定义复选框解决了我的问题！是使用最喜欢的东西的最佳方式，因为您可以获得可绘制的状态！

像那样 ：

```
favoris_button = (CheckBox) findViewById(R.id.star);

            favoris_button.setOnClickListener(new OnClickListener() {

                public void onClick(View v) {
                    if (((CheckBox) v).isChecked()) {
                        favoris_button.setText("Supprimer des categories");
                    }
                    else
                        favoris_button.setText("Ajouter aux favoris");
                }
            }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:04:39.967

在您的侦听器中运行此代码或在其周围包装一个函数并将其传递给布尔值并在需要时调用它。启动、重置或任何时候你想改变状态。如果单击按钮，则需要翻转状态。

```
 private Boolean check;
favoris_button = (Button) findViewById(R.id.promotion_favoris);      

            favoris_button.setOnClickListener(new View.OnClickListener() 
            {
                public void onClick(View v) 
                {

            if (check == true)
            {
                favoris_button.setBackgroundColor(R.drawable.btn_orange9);
                favoris_button.setText("Supprimer des favoris");
            }
            else
            {
                favoris_button.setBackgroundColor(R.drawable.btn_red9);
                favoris_button.setText("Ajouter aux favoris");
            }
            check ^= true;

                }
            }); 
```

# authentication - LS 2011 Web 应用程序中自己的 AD 表单身份验证问题

> ID：11918318
> 
> 赞同：1
> 
> 时间：2012-08-11T22:56:29.187
> 
> 标签：authentication, web, visual-studio-lightswitch

我遇到了使用表单身份验证的 LightSwitch 2011 Web 应用程序的问题。

我已经实现了我自己的登录屏幕，它根据活动目录对用户进行身份验证。我的代码还检查用户是否被分配到特定的活动目录组，以决定他们是否可以添加/编辑/删除数据。

登录表单放置在 Login.aspx 页面上。登录按钮包含以下代码：

```
protected void buttonLogin_Click(object sender, EventArgs e)
{
    LdapAuthentication authentication = new LdapAuthentication();

    try
    {
        bool isUserAdmin = false;
        if (authentication.IsUserAuthenticated(textBoxUserName.Text, textBoxPassword.Text, ref isUserAdmin))
        {
            FormsAuthenticationTicket authenticationTicket = new FormsAuthenticationTicket(1,
            textBoxUserName.Text, DateTime.Now, DateTime.Now.AddSeconds(1), false, String.Empty);

            //Encrypt the ticket.
            string encryptedTicket = FormsAuthentication.Encrypt(authenticationTicket);

            //Create a cookie, and then add the encrypted ticket to the cookie as data.
            HttpCookie authCookie = new HttpCookie(FormsAuthentication.FormsCookieName, encryptedTicket);

            //Add the cookie to the outgoing cookies collection.
            Response.Cookies.Add(authCookie);

            //If the everyoneAdmin is set to true the validation of the administratorgroup
            //is decativated so we have to grant the current user administrator rights
            if (everyoneAdmin)
                isUserAdmin = true;

            Session["isUserAdmin"] = isUserAdmin ;

            Response.Redirect("default.htm");
        }
    }
    catch (Exception ex)
    {
        labelError.Text = ex.Message;
        labelError.Visible = true;
        textBoxPassword.Text = String.Empty;
    }
}

public bool IsUserAuthenticated(String userName, String password, ref bool isUserAdmin)
{
    if (String.IsNullOrEmpty(userName) || String.IsNullOrEmpty(password))
        return false;

    String domain = String.Empty;
    if (!String.IsNullOrEmpty(ConfigurationManager.AppSettings["Domain"]))
        domain = Convert.ToString(ConfigurationManager.AppSettings["Domain"]).Trim();
    else
        throw new NullReferenceException("The Domain in the configuration must not be null!");

    String ldpa = String.Empty;
    if (!String.IsNullOrEmpty(ConfigurationManager.AppSettings["LDPA"]))
        ldpa = String.Format("LDAP://{0}", Convert.ToString(ConfigurationManager.AppSettings["LDPA"]).Trim());
    else
        throw new NullReferenceException("The LDPA in the configuration must not be null!");

    String administrationGroup = String.Empty;
    if (!String.IsNullOrEmpty(ConfigurationManager.AppSettings["AdministratorGroup"]))
        administrationGroup = Convert.ToString(ConfigurationManager.AppSettings["AdministratorGroup"]).Trim();
    else
        throw new NullReferenceException("The AdministrationGroup in the configuration must not be null!");

    String domainUserName = String.Format(@"{0}\{1}", domain.Trim(), userName.Trim());
    DirectoryEntry directoryEntry = new DirectoryEntry(ldpa, domainUserName, password);

    try
    {
        //Bind to the native AdsObject to force authentication.
        object obj = directoryEntry.NativeObject;
        DirectorySearcher directorySearcher = new DirectorySearcher(directoryEntry);

        directorySearcher.Filter = String.Format("(SAMAccountName={0})", userName.Trim());
        directorySearcher.PropertiesToLoad.Add("cn");
        directorySearcher.PropertiesToLoad.Add("memberOf");
        SearchResult directorySearchResult = directorySearcher.FindOne();

        //unable to find a user with the provided data
        if (directorySearchResult == null)
            return false;

        if (directorySearchResult.Properties["memberof"] != null)
        {
            //If the memberof string contains the specified admin group
            for (int i = 0; i < directorySearchResult.Properties["memberof"].Count; i++)
            {
                string temp = directorySearchResult.Properties["memberof"].ToString();
                // get the group name, for example:
                if (directorySearchResult.Properties["memberof"].ToString().ToLower().Contains(administrationGroup.ToLower()))
                {
                    isUserAdmin = true;
                    break;
                }
            }
        }
    }
    catch (Exception ex)
    {
        throw new Exception(String.Format("Error authenticating user.\n\rMessage:\n\r {0}", ex.Message));
    }

    return true;
} 
```

**在包含`CanExcecute`（服务器层）方法的类中，我实现了以下方法：**

```
public bool IsCurrentUserAdmin()
{
    if (HttpContext.Current.Session["isUserAdmin"] == null)
        return false;

    return (bool)(HttpContext.Current.Session["isUserAdmin"]);
} 
```

**例如，`CanExcecute`一张表的方法**

```
partial void dtFacilities_CanDelete(ref bool result)
{
    result = this.IsCurrentUserAdmin();
}

partial void dtFacilities_CanInsert(ref bool result)
{
    result = this.IsCurrentUserAdmin();
}

partial void dtFacilities_CanUpdate(ref bool result)
{
    result = this.IsCurrentUserAdmin();
} 
```

**网络配置**

```
<authentication mode="Forms">
  <form>s name=".ASPXAUTH"
       loginUrl="Login.aspx"
       protection="All"
       timeout="30"
       path="/"
       requireSSL="false"
       slidingExpiration="true"
       defaultUrl="Home.aspx"
       cookieless="UseUri" />
</authentication>
<authorization>
  <deny users="?">
</deny></authorization> 
```

**问题**：

1.  问题是，如果用户空闲时间超过`timeout`会话超时。所以，会话令牌`isUserAdmin`是`NULL`. 此时我希望应用程序返回登录屏幕。A`Response.Redirect`和 a在该方法`Server.Transfer`中不起作用。如果会话令牌是`IsCurrentUserAdmin()`，我如何让应用程序将用户返回到登录屏幕？！请记住，会话令牌是在后面的页面代码中设置的`isUserAdmin``NULL``login.aspx`

2.  当用户关闭 Lightswitch 应用程序的最后一个选项卡时，应用程序会打开一个新选项卡并导航到登录页面，他们会自动登录，而无需处理页面上的登录过程`login.aspx`。这意味着会话令牌`isUserAdmin`是`NULL`. 即使用户在关闭应用程序的最后一个选项卡之前没有登录，也会发生这种情况。这再次导致问题 1。

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T12:57:42.783

如果我正确理解您的问题，如果出于某种原因`isUserAdmin`设置为`NULL`，则您希望将用户返回到登录屏幕。

在我的应用程序中，我只需使用一个用户可以单击以注销的按钮。但在你的情况下，底层方法应该是一样的。

首先创建一个名为 LogOff.aspx 的新页面。页面本身，您可以保留默认生成的代码：

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    </form>
</body>
</html> 
```

对于后面的代码，你会想要这样的东西（请检查这个，我从我在 VB 中的项目转换而来）：

```
using System.Web.Security;

namespace LightSwitchApplication
{
  public partial class LogOff : System.Web.UI.Page
  {
    protected void Page_Load(object sender, EventArgs e)
    {
      FormsAuthentication.SignOut();
      Response.Redirect("default.htm");
    }
  }
} 
```

这是我使用按钮的代码。但是，如果您将`Dispatcher`调用部分`Navigate`放在您的`IsCurrentUserAdmin()`方法中，它应该执行相同的技巧（再次检查 C#）：

```
using Microsoft.LightSwitch.Threading;
using System.Windows.Browser;

        partial void btnLogOff_Execute()
        {
            Dispatchers.Main.Invoke(() =>
            {
                HtmlPage.Window.Navigate(new Uri("LogOff.aspx", UriKind.Relative));
            });
        } 
```

根据我的经验，Lightswitch 中存在一些问题。如果您按原样执行，您可能会收到以下信息：

> **“/”应用程序中的服务器错误。**
> 
> *无法找到该资源。*
> 
> **说明：** HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。
> 
> **请求的 URL：** /LogOff.aspx

修复是这样的：

首先在解决方案资源管理器中右键单击您的项目名称并卸载项目。卸载项目后，右键单击它并编辑 project_name.lsproj。`Ctrl+F`为`default.htm`. 您正在寻找由`_BuildFile`. 将该部分从 复制`_BuildFile`到`/_BuildFile`，粘贴到该部分下方并进行如下修改。

```
<_BuildFile Include="Server/LogOff.aspx">
  <SubFolder>
  </SubFolder>
  <PublishType>
  </PublishType>
</_BuildFile> 
```

现在右键单击并重新加载您的项目。如果您在尝试构建时遇到错误，请尝试构建 | 清理并重新构建。如果您在 Debug 中运行应用程序，此代码只会重新加载页面。但是，一旦您发布并随后导致`isUserAdmin`成为`NULL`代码，您应该退出并带您回到登录屏幕。

**参考：**

[原始 MSDN 论坛主题](http://social.msdn.microsoft.com/Forums/en-US/lightswitchgeneral/thread/13b2adcf-aacc-49fb-83b8-7c0c70466a85)

[我实施它的经验](http://social.msdn.microsoft.com/Forums/en-US/lightswitch/thread/eebdcafe-b967-43cd-bab8-6b85524f9d05)

# linux - 使用 bash 提取 JSON 变量

> ID：11918326
> 
> 赞同：3
> 
> 时间：2012-08-11T22:57:42.357
> 
> 标签：linux, json, bash, grep

我需要从 JSON 编码文件中提取变量并将其分配给 Bash 中的变量。

摘录...来自 file.json

```
 "VariableA": "VariableA data", 
    "VariableB": [
        "VariableB1", 
        "VariableB2", 
        "VariableB3", 
        "VariableB3"
    ], 
```

我已经有了这个

```
variableA=$(fgrep -m 1 "VariableA" file.json ) 
```

但它返回整行。我只想要数据

对于 VariableB，我需要用逗号分隔值替换列表。

我查看了 awk、sed、grep、regexpressions 并确实给出了学习曲线……需要知道使用哪一个或更好的解决方案。

感谢您的建议...但这是完美的 git://github.com/kristopolous/TickTick.git

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-11T23:01:35.067

你最好使用 JSON 解析器。[在http://json.org/](http://json.org/)上列出了很多，其中两个用于 BASH shell。

*   [http://kmkeen.com/jshon/](http://kmkeen.com/jshon/)
*   [https://github.com/dominictarr/JSON.sh](https://github.com/dominictarr/JSON.sh)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-07-13T15:03:14.457

有强大的命令行 JSON 工具 [`jq`](https://stedolan.github.io/jq/)。

提取单个值很容易：

```
variableA=$(jq .VariableA file.json) 
```

对于逗号分隔的数组内容，试试这个

```
variableB=$(jq '.VariableB | @csv' file.json) 
```

或者

```
variableB=$(jq '.VariableB | .[]' file.json | tr '\n' ',' | head -c-1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T23:17:43.823

如果您愿意使用 Perl，他们有一个“open()”函数，该函数将使用 json 函数“to_json”传递一个文件。如果你想提取 json，你可以使用 'from_json' 函数。你可以在这里查看：

[http://search.cpan.org/~rjbs/perl-5.16.0/lib/open.pm](http://search.cpan.org/~rjbs/perl-5.16.0/lib/open.pm)

[http://metacpan.org/pod/JSON#to_json](http://metacpan.org/pod/JSON#to_json)

[http://metacpan.org/pod/JSON#from_json](http://metacpan.org/pod/JSON#from_json)（您也可以尝试使用 decode json）

# python - Python - 将秒数添加到时间对象

> ID：11918338
> 
> 赞同：2
> 
> 时间：2012-08-11T23:00:35.423
> 
> 标签：python, time, seconds

我有一个看起来像这样的时间对象：

```
time.struct_time(tm_year=2012, tm_mon=8, tm_mday=11, tm_hour=18, tm_min=48, tm_sec=23, tm_wday=5, tm_yday=224, tm_isdst=0) 
```

我想知道是否有一种简单的方法可以增加秒数。

我想添加 4497 秒。

我以前尝试将每个单独的组件转换为秒并添加它们。

谢谢，

帕思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:06:25.393

**注意：**此答案适用于询问如何将 a`time.struct_time`转换为`int`代表秒数的问题的旧版本，并且不回答当前所问的问题（如何将秒数添加到 a `time.struct_time`）。

* * *

假设您想转换为**自 January 1, 1970 以来**的秒数，您可以使用：

*   [`time.mktime`](http://docs.python.org/library/time.html#time.mktime)当地时间。
*   [`calendar.timegm`](http://docs.python.org/library/calendar.html#calendar.timegm)对于 UTC 时间。

这些转换（及其逆转换）在[模块](http://docs.python.org/library/time.html)[的文档中`time`](http://docs.python.org/library/time.html)有详细说明。

# image - ImageScaleToFit - 如何实现？

> ID：11918340
> 
> 赞同：0
> 
> 时间：2012-08-11T23:01:13.223
> 
> 标签：image, coldfusion, railo, cfimage

我是[Railo](http://getrailo.org)的新手，离开了我的站点曾经使用 cfx_imagecr3 的 ColdFusion 8。

我相信 Railo 有[ImageScaleToFit](http://wiki.getrailo.org/wiki/3-1-Functions%3aImageScaleToFit)但我不确定我是否正确使用它或者我是否需要添加某种类/组件？我已经在 cfscript 之间添加了它，但我得到了“无效的变量声明”，这对我来说没有任何意义。任何帮助表示赞赏。

我在 ubuntu 12.04 上运行 railo-4.0.0.013

```
<cfscript>
        imageScaletoFit('/home/images/testimage.jpg','90','114','highestPerformance');
</cfscript> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T18:54:04.817

您需要首先将图像加载到变量中，然后在 ImageScaletoFit 中使用该变量名称，如下所示：

```
<cfimage name="ImgVariable" source="/home/images/testimage.jpg" />

<cfset imageScaletoFit(ImgVariable,'90','114','highestPerformance') /> 
```

（这不是 Railo 特有的 - 该功能存在并且在 CF8+ 中以相同的方式工作）

# python - 在 Pandas 中转换日期/时间

> ID：11918342
> 
> 赞同：4
> 
> 时间：2012-08-11T23:01:25.753
> 
> 标签：python, pandas

我有以下格式的股票代码数据：

```
40289.65972
40289.66319
40289.66667 
```

Excel 能够*神奇地*将它们转换为：

```
4/22/14 3:50 PM
4/22/14 3:55 PM
4/22/14 4:00 PM 
```

通过“格式化单元格”

如何在 中进行相同的转换`pandas`？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T02:14:37.443

上面链接中提到的解决方案有效，所以我将在这里重新发布代码段。谢谢！

```
import datetime

def minimalist_xldate_as_datetime(xldate, datemode):
    # datemode: 0 for 1900-based, 1 for 1904-based
    return (
        datetime.datetime(1899, 12, 30)
        + datetime.timedelta(days=xldate + 1462 * datemode)
    ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-06-30T16:32:44.627

要留在 pandas 中（速度很快），请使用`to_timedelta()`

```
import pandas as pd
# should get  7/7/1988 1:26:24 a.m. (https://support.microsoft.com/en-us/kb/214094)
pd.to_datetime('1899-12-30') + pd.to_timedelta(32331.06, 'D') 
```

产生 `Timestamp('1988-07-07 01:26:24')` 如果你有一个充满 excel-float-dates 的数据框，你可以转换整个东西：

```
df['BetterDT'] = pd.to_datetime('1899-12-30') + pd.to_timedelta(df.ExecDate, 'D') 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-08-29T11:38:15.773

Excel 将 1900 年视为闰年，因此请注意您要翻译的确切内容：http: [//spreadsheetpage.com/index.php/oddity/the_intentional_date_bug/](http://spreadsheetpage.com/index.php/oddity/the_intentional_date_bug/)

# iphone - 添加 ViewController 与编辑 ViewController

> ID：11918346
> 
> 赞同：4
> 
> 时间：2012-08-11T23:02:09.040
> 
> 标签：iphone, ios, core-data

我正在尝试决定一种设计模式。我有一个应用程序，用户在其中向核心数据数据库添加条目。他们还应该能够在以后编辑该条目。两个视图基本上显示相同的数据，只有一个用于编辑已添加的内容。

我不确定我是否应该有两个非常相似的独立视图控制器，或者我是否应该使用某种继承来设置它，或者是否还有其他一些我没有想到的想法。

感谢您的意见。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T00:51:35.983

我遇到了一个类似的项目来解决并最终使用相同的项目`UIViewController`来执行这两项操作。这两个用例基本相同：用户输入信息然后保存。数据的验证是一样的，保存是一样的，呈现是一样的。它们仅取决于您的模型对象是否已经存在。考虑以下示例：

.h 文件：

```
@interface WHItemViewController : UITableViewController

//  This is the only attribute we really need to expose in our header
//  so that the presenting view controller can set the model object when editing
@property (nontatomic, retain) WHItem* item;

@end 
```

.m 文件：

```
@interface WHItemViewController()

// Other 'private' properties and methods

- (void)didSelectSaveButton:(id)sender;

@end

@implementation WHItemViewController

- (void)viewDidLoad {
    [super viewDidLoad];

    if (self.item) { // setup the UI with the model object, if present.
        self.fooText.text = self.item.foo;
        self.barText.text = self.item.bar;
        self.bazText.text = self.item.baz;
    }
}

- (void)didSelectSaveButton:(id)sender {
    if (!self.item) {
        WHItem* item = nil;

        //  create a new instance from your managed object context 
        //  and set it to the item property

        self.item = item;
    }

    self.item.foo = self.fooText.text;
    self.item.bar = self.barText.text;
    self.item.baz = self.bazText.text

    NSError* error = nil;
    [WHDataAccess sharedInstance].managedObjectContext save:&error];

    // Error handling, etc.
}

//  Other methods

@end 
```

此视图控制器的唯一目的是创建用于编辑和保存模型对象数据的表示。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T00:13:27.733

我处于同样的情况，我对两者都使用一个视图控制器。如果我传递一个实体，它将编辑该实体。如果我不这样做，它就是一个新实体。在 viewDidLoad 我检查是否设置了一个实体，如果没有，我创建一个。然后我继续填写文本字段和其他信息。如果它是一个新实体，属性将为空或具有默认值，我的视图控制器中的视图也是如此。当用户准备好时，我不必检查是更新还是插入，因为一开始就已经插入了一个实体。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T23:41:30.100

我使用这样的模式：

```
#import "ItemViewController.h"

@protocol AddItemViewControllerDelegate;

@interface AddItemViewController : ItemViewController
{
    id <AddItemViewControllerDelegate> delegate;
}
@property (nonatomic, assign) id <AddItemViewControllerDelegate> delegate;

-(IBAction)cancel:(id)sender;
-(IBAction)save:(id)sender;
@end

@protocol AddItemViewControllerDelegate
    - (void)addItemViewController:(AddItemViewController *)controller didFinishWithSave:   (BOOL)save;
@end 
```

AddItemController 只是子类化了我用于编辑和显示现有对象的 ItemViewController。

然后在实现中我做这样的事情：

```
#import "AddItemViewController.h"

@implementation AddItemViewController
@synthesize delegate;

-(void)viewDidLoad
{
    [super viewDidLoad];
    ...
    // Set up the undo manager and set editing state to YES.
    [self setUpUndoManager];
    self.editing = YES;
}

-(void)viewDidUnload
{
    [self cleanUpUndoManager];
    [super viewDidUnload];  
}

-(IBAction)cancel:(id)sender
{
    [delegate addItemViewController:self didFinishWithSave:NO];
}

-(IBAction)save:(id)sender
{
    [delegate addItemViewController:self didFinishWithSave:YES];
}

// ... other stuff.

@end 
```

# java - Java 安卓谷歌地图。只显示网格

> ID：11918347
> 
> 赞同：0
> 
> 时间：2012-08-11T23:02:29.493
> 
> 标签：java, android, google-maps

没有地图显示，但一个网格。所以我查找了一些示例修复并来到了这个

[在市场上发布 android 应用程序需要帮助](https://stackoverflow.com/questions/7315635/help-needed-to-publish-android-app-in-market)

我按照说明完成了这些步骤，但我的地图仍然没有显示。有什么我可能在这里遗漏的想法吗？

# 更新

我刚刚第三次重新创建了密钥，我遇到了同样的问题。错误信息如下。

```
08-12 00:16:51.081: W/PackageManager(52): Unknown permission com.google.android.googleapps.permission.GOOGLE_AUTH.cp in package com.android.providers.contacts    
08-12 00:16:52.281: E/EventHub(52): could not get driver version for /dev/input/mouse0, Not a typewriter
08-12 00:16:52.281: E/EventHub(52): could not get driver version for /dev/input/mice, Not a typewriter
08-12 00:16:52.951: E/System(52): Failure starting core service
08-12 00:16:52.951: E/System(52): java.lang.SecurityException
08-12 00:16:52.951: E/System(52):   at android.os.BinderProxy.transact(Native Method)
08-12 00:16:52.951: E/System(52):   at android.os.ServiceManagerProxy.addService(ServiceManagerNative.java:146)
08-12 00:16:52.951: E/System(52):   at android.os.ServiceManager.addService(ServiceManager.java:72)
08-12 00:16:52.951: E/System(52):   at com.android.server.ServerThread.run(SystemServer.java:176)
08-12 00:16:52.951: E/AndroidRuntime(52): Crash logging skipped, no checkin service
08-12 00:17:00.831: W/ActivityManager(52): Unable to start service Intent { act=com.android.ussd.IExtendedNetworkService }: not found 
```

在清单中，我指定了这些

```
 <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>
 <uses-permission android:name="android.permission.INTERNET"/> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T23:06:38.513

任何一个：

*   您没有[与您正在使用的应用签名密钥相对应的有效 Maps API 密钥](https://developers.google.com/maps/documentation/android/mapkey)，或者
*   您没有`INTERNET`权限，或
*   您没有 Internet 连接

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:41:50.480

我您正在将您的应用程序从 eclipse 运行到通过 USB 连接的模拟器 a 设备上，您必须使用使用**调试**密钥的 MD5 指纹生成的映射密钥。如果您使用自己的密钥而不是必须导出项目，请使用您的密钥对其进行签名，然后您将能够看到地图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-05T11:16:11.063

我认为您应该使用正确的 Api_key 和您从[https://console.developers.google.com/project?pli=1的谷歌开发者帐户获得的相同包名称](https://console.developers.google.com/project?pli=1)

# ruby-on-rails - 设计和 Rspec 测试集成

> ID：11918348
> 
> 赞同：0
> 
> 时间：2012-08-11T23:02:39.353
> 
> 标签：ruby-on-rails, ruby, testing, rspec, devise

我正在尝试使用 Devise 和 Rspec 运行测试，但到目前为止没有成功 - 任何帮助将不胜感激。

```
rake spec:requests --trace 
```

给我这个错误

```
`/Users/carl/.rvm/rubies/ruby-1.9.2-head/bin/ruby -S rspec ./spec/requests/users_spec.rb
/Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:503:in ‘load_missing_constant': Expected /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/devise-2.1.2/app/controllers/devise_controller.rb to define DeviseController (LoadError)
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:192:in ‘block in const_missing'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in ‘each'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in ‘const_missing'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/devise-2.1.2/app/controllers/devise/sessions_controller.rb:1:in ‘&lt;top (required)>'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘block in require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in ‘load_dependency'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in ‘require_or_load'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:502:in ‘load_missing_constant'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:192:in ‘block in const_missing'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in ‘each'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in ‘const_missing'
    from /Users/carl/rails_projects/my_rails_app_name/app/controllers/application_controller.rb:14:in ‘&lt;class:ApplicationController>'
    from /Users/carl/rails_projects/my_rails_app_name/app/controllers/application_controller.rb:1:in ‘&lt;top (required)>'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘block in require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in ‘load_dependency'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in ‘require_or_load'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:502:in ‘load_missing_constant'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:192:in ‘block in const_missing'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in ‘each'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in ‘const_missing'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:229:in ‘block in constantize'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in ‘each'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/inflector/methods.rb:228:in ‘constantize'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/core_ext/string/inflections.rb:54:in ‘constantize'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/devise-2.1.2/app/controllers/devise_controller.rb:2:in ‘&lt;top (required)>'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘block in require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in ‘load_dependency'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in ‘require_or_load'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:502:in ‘load_missing_constant'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:192:in ‘block in const_missing'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in ‘each'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:190:in ‘const_missing'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/devise-2.1.2/app/controllers/devise/confirmations_controller.rb:1:in ‘&lt;top (required)>'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘block in require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:236:in ‘load_dependency'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:251:in ‘require'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:359:in ‘require_or_load'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:313:in ‘depend_on'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/activesupport-3.2.3/lib/active_support/dependencies.rb:225:in ‘require_dependency'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/engine.rb:439:in ‘block (2 levels) in eager_load!'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/engine.rb:438:in ‘each'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/engine.rb:438:in ‘block in eager_load!'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/engine.rb:436:in ‘each'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/engine.rb:436:in ‘eager_load!'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/application/railties.rb:8:in ‘each'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/application/railties.rb:8:in ‘all'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/engine.rb:434:in ‘eager_load!'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/application/finisher.rb:53:in ‘block in <module:Finisher>'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/initializable.rb:30:in ‘instance_exec'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/initializable.rb:30:in ‘run'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/initializable.rb:55:in ‘block in run_initializers'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/initializable.rb:54:in ‘each'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/initializable.rb:54:in ‘run_initializers'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/application.rb:136:in ‘initialize!'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/railties-3.2.3/lib/rails/railtie/configurable.rb:30:in ‘method_missing'
    from /Users/carl/rails_projects/my_rails_app_name/config/environment.rb:5:in ‘&lt;top (required)>'
    from /Users/carl/rails_projects/my_rails_app_name/spec/spec_helper.rb:3:in ‘require'
    from /Users/carl/rails_projects/my_rails_app_name/spec/spec_helper.rb:3:in ‘&lt;top (required)>'
    from /Users/carl/rails_projects/my_rails_app_name/spec/requests/users_spec.rb:1:in ‘require'
    from /Users/carl/rails_projects/my_rails_app_name/spec/requests/users_spec.rb:1:in ‘&lt;top (required)>'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in ‘load'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in ‘block in load_spec_files'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in ‘map'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/rspec-core-2.11.1/lib/rspec/core/configuration.rb:780:in ‘load_spec_files'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/rspec-core-2.11.1/lib/rspec/core/command_line.rb:22:in ‘run'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:69:in ‘run'
    from /Users/carl/.rvm/gems/ruby-1.9.2-head/gems/rspec-core-2.11.1/lib/rspec/core/runner.rb:8:in ‘block in autorun'
rake aborted!
/Users/carl/.rvm/rubies/ruby-1.9.2-head/bin/ruby -S rspec ./spec/requests/users_spec.rb failed
/Users/carl/.rvm/gems/ruby-1.9.2-head/gems/rspec-core-2.11.1/lib/rspec/core/rake_task.rb:137:in ‘block (2 levels) in initialize'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/file_utils_ext.rb:60:in ‘verbose'
/Users/carl/.rvm/gems/ruby-1.9.2-head/gems/rspec-core-2.11.1/lib/rspec/core/rake_task.rb:127:in ‘block in initialize'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in ‘call'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/task.rb:205:in ‘block in execute'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in ‘each'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/task.rb:200:in ‘execute'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/task.rb:158:in ‘block in invoke_with_call_chain'
/Users/carl/.rvm/rubies/ruby-1.9.2-head/lib/ruby/1.9.1/monitor.rb:201:in ‘mon_synchronize'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/task.rb:151:in ‘invoke_with_call_chain'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/task.rb:144:in ‘invoke'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/application.rb:116:in ‘invoke_task'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in ‘block (2 levels) in top_level'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in ‘each'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/application.rb:94:in ‘block in top_level'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in ‘standard_exception_handling'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/application.rb:88:in ‘top_level'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/application.rb:66:in ‘block in run'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/application.rb:133:in ‘standard_exception_handling'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/lib/rake/application.rb:63:in ‘run'
/Users/carl/.rvm/gems/ruby-1.9.2-head@global/gems/rake-0.9.2.2/bin/rake:33:in ‘&lt;top (required)>'
/Users/carl/.rvm/gems/ruby-1.9.2-head/bin/rake:19:in ‘load'
/Users/carl/.rvm/gems/ruby-1.9.2-head/bin/rake:19:in ‘&lt;main>'
` 
```

Gemfile 用于：开发，：测试 `gem 'sqlite3'` `gem 'rspec-rails'` `gem 'capybara'`

规范/请求/user_spec.rb

```
> `require 'spec_helper'
> 
> describe "Users" do
>   describe "GET /" do
>     it "goes to homepage" do
>       visit '/'
>       response.status.should be(200)
>     end   
>   end 
> end` 
```

规范/spec_helper.rb

```
# This file is copied to spec/ when you run 'rails generate rspec:install'
ENV["RAILS_ENV"] ||= 'test'
require File.expand_path("../../config/environment", __FILE__)
require 'rspec/rails'
require 'rspec/autorun'
require 'capybara/rspec'
#require 'capybara/rails'

# Note: To create integration test: $rails g integration_test blah --integration-tool=rspec

# Requires supporting ruby files with custom matchers and macros, etc,
# in spec/support/ and its subdirectories.
Dir[Rails.root.join("spec/support/**/*.rb")].each {|f| require f}

RSpec.configure do |config|

  # Include devise in Rspec tests
  config.include Devise::TestHelpers, :type => :controller

  # ## Mock Framework
  #
  # If you prefer to use mocha, flexmock or RR, uncomment the appropriate line:
  #
  # config.mock_with :mocha
  # config.mock_with :flexmock
  # config.mock_with :rr

  # Remove this line if you're not using ActiveRecord or ActiveRecord fixtures
  config.fixture_path = "#{::Rails.root}/spec/fixtures"

  # If you're not using ActiveRecord, or you'd prefer not to run each of your
  # examples within a transaction, remove the following line or assign false
  # instead of true.
  config.use_transactional_fixtures = true

  # If true, the base class of anonymous controllers will be inferred
  # automatically. This will be the default behavior in future versions of
  # rspec-rails.
  config.infer_base_class_for_anonymous_controllers = false

  # Run specs in random order to surface order dependencies. If you find an
  # order dependency and want to debug it, you can fix the order by providing
  # the seed, which is printed after each run.
  #     --seed 1234
  config.order = "random"
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T04:19:36.850

我不知道到底出了什么问题，但是快速搜索 LoadError 和“预期......要定义”模式引发了一些相关的讨论。

*   [预期...定义](http://www.ruby-forum.com/topic/107385)
*   [Rails 3.1 — 'load_missing_contant': 期望 ... 定义 ... (LoadError)](http://tesoriere.com/2011/05/28/rails-3.1---%27load_missing_contant%27--expected-...-to-define-...--loaderror-/)
*   [期望 x.rb 定义 X (LoadError)](http://icebergist.com/posts/expected-xrb-to-define-x-loaderror)
*   [Rails：为什么 RSpec 在我重写的 Devise 控制器请求规范上崩溃？](https://stackoverflow.com/questions/8560726/rails-why-does-rspec-crash-on-my-overridden-devise-controller-request-spec)

从第一个链接：

> 错误消息具有误导性。期望 foo.rb 来定义 Foo 通常只是意味着在加载 foo.rb 时发生了一些不好的事情（语法错误，缺少常量等......）。您通常只需在脚本/控制台中输入 Foo 即可获得更好的错误消息

该错误直接来自设计，因此您的控制器与设计控制器可能存在一些命名冲突？我不使用设计，所以我不太了解它是如何工作的。虽然我怀疑这是问题所在，但请查看文件`/Users/carl/.rvm/gems/ruby-1.9.2-head/gems/devise-2.1.2/app/controllers/devise_controller.rb`并确保它没有损坏。您可以尝试在 rvm 中重新安装 gem。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T11:47:36.077

一位朋友帮我解决了这个问题。在我的应用程序控制器中，我使用以下代码覆盖了设计。注释掉这个允许`rake spec:requests`成功通过。

```
# ===============================================
  # == Commented this out to make rspec tests work
  # ===============================================
  # Override Devise create session controller
  # Devise::SessionsController.class_eval do
    # def create
    #  resource = warden.authenticate!(auth_options)
    #     set_flash_message(:notice, :signed_in) if is_navigational_format?
    #     sign_in(resource_name, resource)
    #     @sign_in_path = after_sign_in_path_for(resource)
    #  end
    # end 
```

再次感谢您的时间和帮助！

# css - 为word中的单个字母设置样式

> ID：11918349
> 
> 赞同：7
> 
> 时间：2012-08-11T23:02:54.613
> 
> 标签：css, css-selectors

我目前正在尝试为“Siterip”这个词设置样式。我希望每个字母都有不同的颜色。如[本页](http://www.mobile.siteripe.com)所示，我可以使用下面的 CSS 代码行设置第一个字母的样式

```
#namer:first-letter {
  color:#09C;
  font-size:1.1em;
  font-weight:bold;
} 
```

由于单词中有八（8）个字母，我如何设置其余七个字母的样式？我确实尝试了下面的造型，但没有奏效。有没有办法单独设置字母的样式而不使用跨度包装每个字母。

```
 #namer:(1)-letter {
      color:#09C;
      font-size:1.1em;
      font-weight:bold;
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:10:48.537

请记住，CSS 是**级联**的。您可以将整个#namer 元素与第一个字母分开设置样式 - 更具体的样式将覆盖更通用的样式。

```
#namer:first-letter {
    color:#09C;
    font-size:1.1em;
    font-weight:bold;
}

#namer {
    color:red;
} 
```

**更新：**

[Lettering.js](http://letteringjs.com/)允许对单个字母进行样式设置。有关其他信息，请参阅下面的评论。上面的信息仅用于设置初始字符的样式，并且在对其进行编辑以使其更清晰之前回答了 OP 的原始问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:08:18.950

您应该能够使用选择器选择整个文本而无需索引

```
#namer:first-letter {
    color:#09C;
    font-size:1.1em;
    font-weight:bold;
}

#namer {
    color:red!important;
} 
```

然后您可以使用上面的索引方法选择第一个字母

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-08-11T23:18:23.833

伪元素“first-letter”是不言自明的，它仅用于第一个字母。其余的每个字母是否会有不同的样式？如果没有，您可能希望将每个字母包装在一个跨度标记中并为其分配一个 CSS 规则。

现在您可以将其余字母作为一个整体进行样式设置。然后在你的 CSS 中：

```
#namer:first-letter {
color:#09C;
font-size:1.1em;
font-weight:bold;
}

span {
color:red;
.
.
.
} 
```

如果您想为每个字母设置样式，您可以尝试使用跨度包装每个字母。但是，它在视觉上可能看起来一团糟。注意：为你的班级想一个更好的名字#LOL

# django - 如何使用来自 UserProfile 的字段扩展 UserCreationForm

> ID：11918355
> 
> 赞同：2
> 
> 时间：2012-08-11T23:03:53.723
> 
> 标签：django, django-models, django-forms, django-views, django-users

我发现这篇关于如何使用额外字段（例如“电子邮件”）扩展 UserCreationForm 的帖子[。](http://jessenoller.com/2011/12/19/quick-example-of-extending-usercreationform-in-django/)但是，电子邮件字段已在预构建的用户模型中定义。

我创建了一个额外的模型（称为 UserProfile），它进一步扩展了 Django 的预构建用户类。如何让我在 UserProfile 中定义的这些字段出现在我的 UserCreationForm 中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-11T23:21:45.693

根据您的模型添加字段`UserProfile`（不幸的是，使用 a 来避免重复自己不太容易`ModelForm`），然后`UserProfile`在覆盖的`save()`函数中创建并保存一个新实例。改编自您链接到的帖子：

```
from django import forms
from django.contrib.auth.models import User
from django.contrib.auth.forms import UserCreationForm

class UserCreateForm(UserCreationForm):
    job_title = forms.CharField(max_length=100, required=True)
    age = forms.IntegerField(required=True)

    class Meta:
        model = User

    def save(self, commit=True):
        if not commit:
            raise NotImplementedError("Can't create User and UserProfile without database save")
        user = super(UserCreateForm, self).save(commit=True)
        user_profile = UserProfile(user=user, job_title=self.cleaned_data['job_title'], 
            age=self.cleaned_data['age'])
        user_profile.save()
        return user, user_profile 
```

# c# - ASP.NET MVC 自定义用户类与 System.Security.Principal.iPrinciapl 冲突

> ID：11918359
> 
> 赞同：0
> 
> 时间：2012-08-11T23:05:01.667
> 
> 标签：c#, asp.net, asp.net-mvc, namespaces

嘿伙计们，我声明了我自己的类用户，当我想使用它时，我将其命名为 MyProj.Models；

但是 System.Web.Security.Principal.iPrinciapl (Controller.User) 妨碍了我，如果我想使用它，我必须写出我的班级的整个路径。IE MyProj.Models.User.DoSomething()。

我怎样才能解决这个问题？给我的优先权或类似的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:13:59.177

我解决这个问题的方法是使用别名：

```
using mUser = MyProj.name.space.User;

public class MyController : Controller {
    public void foo() {
        var user = new mUser(...);
    }
} 
```

# c - 尝试设置取消引用的指针时出现分段错误？

> ID：11918360
> 
> 赞同：0
> 
> 时间：2012-08-11T23:05:18.383
> 
> 标签：c, pointers

此代码在最后一行引发分段错误。标头是指向一个连续的内存块的指针，该内存块全为 0，取消引用其余部分返回 0，这可能与问题有关。我仍然觉得这应该可以工作，有什么问题？

```
void setHeader(void *header, size_t payload) {
   size_t *remainder = (size_t*)((char *)header + (payload + 4));
   *remainder = payload;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:08:24.560

为什么你认为这应该有效？除非指向的对象足够大以至于相加`payload + 4`不会超过对象的大小，否则指针算术具有未定义的行为。即使定义了算术（例如，如果对象大小正好是`payload + 4`），取消引用数组末尾之后的插槽也有 UB。您需要确保您要传递其地址的对象足够大，以便您的代码能够正常工作。

# php - 创建具有特定键值的数组

> ID：11918363
> 
> 赞同：1
> 
> 时间：2012-08-11T23:05:54.410
> 
> 标签：php, arrays, foreach, return-value, var-dump

为了有一个像这样的数组输出

```
array(2) { ["2012-08-16"]=> array(1) { [0]=> array(2) { ["title"]=> string(24) "RLI Class #42 Graduation" ["event_date"]=> string(10) "2012-08-16" } } ["2012-08-24"]=> array(1) { [0]=> array(2) { ["title"]=> string(10) "Test Event" ["event_date"]=> string(10) "2012-08-24" } } } 
```

我正在尝试以下

```
$array = array('title' => $mytitle, 'event_date' => $myyear."-".$mymonth."-".$myday);
$events[$array['event_date']] = $array['title']; 
```

但是我得到的输出是

```
array(1) { [""]=> NULL } array(1) { ["2012-8-24"]=> string(10) "Test Event" } array(1) { ["2012-8-16"]=> string(25) "RLI Class #42 Graduation" } 
```

我应该如何更改代码以让 $events 以所需的数组格式输出？

***编辑*** 以防万一代码的一些背景将有助于找到解决方案，这里是

```
while ( $query->have_posts() ) : $query->the_post();
$mytime = get_post_meta($post->ID, 'wpcf-start-date', true); // this has 2 entries: 1>1347408000 and 2>1347408000
$mydate = date("Y-m-D",$mytime);
$mydatearr = getdate($mytime);
$myday = $mydatearr['mday'];  // returns values 16 and 24
$mymonth = $mydatearr['mon']; // returns values 8 and 8
$myyear = $mydatearr['year']; // returns values 2012 and 2012
$mytitle = $post->post_title;
if (($myyear == $year) &&  ($mymonth == $month)) //The $year is declared earlier as 2012 and $month as  8 
```

接下来是我替换为的代码

```
 $events = array(); ## Declare the new array.
     foreach ($array as $line) {
   $event_date = $line['event_date']; ## Set event_date to a variable
   $events[$event_date] = array( 'title' => $line['title'], 'event_date' => $event_date );  ###add new value to new array with key value            }
 var_dump($events); 
```

而最后

```
 endwhile; 
```

**编辑** 好。我似乎错误地删除了我的 $array 声明，并早先在循环内声明了 $events 数组。所以我正在更新新代码

```
$events = array(); ## Declare the new array.
while ( $query->have_posts() ) : $query->the_post();
$mytime = get_post_meta($post->ID, 'wpcf-start-date', true);
$mydate = date("Y-m-D",$mytime);
$mydatearr = getdate($mytime);
$myday = $mydatearr['mday'];
$mymonth = $mydatearr['mon'];
$myyear = $mydatearr['year'];
$mytitle = $post->post_title;
if (($myyear == $year) &&  ($mymonth == $month))
$array = array('title' => $mytitle, 'event_date' => $myyear."-".$mymonth."-".$myday);
foreach ($array as $line) {
$event_date = $line['event_date']; ## Set event_date to a variable
$events[$event_date] = array( 'title' => $line['title'], 'event_date' => $event_date );  ###add new value to new array with key value
}
var_dump($events);
endwhile; 
```

$array 的 var_dump 给出

```
NULL
Warning: Invalid argument supplied for foreach() in /home/newmedia/public_html/dev/wp-gallerific/wp-content/themes/lajcc-theme/calendar.php on line 165
array(2) { ["title"]=> string(10) "Test Event" ["event_date"]=> string(9) "2012-8-24" } array(2) { ["title"]=> string(25) "RLI Class #42 Graduation " ["event_date"]=> string(9) "2012-8-16" } 
```

和 $events 输出的 var_dump

```
Warning: Invalid argument supplied for foreach() in /home/newmedia/public_html/dev/wp-gallerific/wp-content/themes/lajcc-theme/calendar.php on line 165
array(0) { } array(2) { ["T"]=> array(2) { ["title"]=> string(1) "T" ["event_date"]=> string(1) "T" } [2]=> array(2) { ["title"]=> string(1) "2" ["event_date"]=> string(1) "2" } } array(3) { ["T"]=> array(2) { ["title"]=> string(1) "T" ["event_date"]=> string(1) "T" } [2]=> array(2) { ["title"]=> string(1) "2" ["event_date"]=> string(1) "2" } ["R"]=> array(2) { ["title"]=> string(1) "R" ["event_date"]=> string(1) "R" } } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:11:52.440

你为什么要执行

```
$events = array(); ## Declare the new array. 
```

在你的里面`while`？每次迭代基本上都会擦除先前迭代中的所有数据集。只需将那条线放在你的上方`while`（外面，一个住在上面）和`var_dump($events)`你的`endwhile`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:32:23.700

我认为您需要`foreach()`通过数组来获得所需的输出。

试试这个：

```
$events = array(); ## Declare the new array.
foreach ($array as $line) {
   $event_date = $line['event_date']; ## Set event_date to a variable
   $events[$event_date] = array( 'title' => $line['title'], 'event_date' => $event_date );  ###add new value to new array with key value
}
var_dump($events);  ##display the reults 
```

祝你好运！

# list - android：无法访问自定义列表的方法

> ID：11918374
> 
> 赞同：0
> 
> 时间：2012-08-11T23:07:34.970
> 
> 标签：list, methods, arraylist, call, custom-lists

我遇到了以下问题：

我制作了一个自定义列表 CustomList ，它扩展了 ArrayList 并向其添加了一个新方法：

```
public class CustomList extends ArrayList<CustomObj> {

    public CustomObj get(String searchName) {
    ...
    }
} 
```

现在在我的 MainActivity.java 中，我创建了这个 CustomList 的新对象，但我正在使用：

```
List<CustomObj> list = new CustomList();    (1) 
```

并不是：

```
CustomList list = new CustomList();         (2) 
```

到目前为止，一切都很好！但是当我尝试访问函数 get(String searchName) 时，没有可以使用的函数！

为什么？因为当我通过 (2) 创建 CustomList 时调用它时，它会完全起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:19:10.220

这是因为您正在制作 List(Interface) 没有定义任何此类方法，您正在制作 CustomList 的对象但引用类型是 List 。所以如果您强制在 List 引用上调用此方法，它会给您编译时间错误。这是一个简单多态的例子。

您可以想象一个现代汽车扩展旧车和现代汽车具有 GPS 导航系统的情况，如果您尝试通过不了解 GPS 的旧车参考来获取导航系统的详细信息，那么在这种情况下旧车没有，你不会得到任何东西。

# c++ - C ++中静态类的目的是什么？

> ID：11918375
> 
> 赞同：4
> 
> 时间：2012-08-11T23:07:39.473
> 
> 标签：c++

最近在翻ns2模拟器的源码时遇到了C++中静态类的定义：

```
static class TCPHeaderClass : public PacketHeaderClass {
public:
        TCPHeaderClass() : PacketHeaderClass("PacketHeader/TCP",
                         sizeof(hdr_tcp)) {
        bind_offset(&hdr_tcp::offset_);
    }
} class_tcphdr; 
```

我以前从未在 C++ 中遇到过静态类。它们的特性和用途是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-11T23:09:09.107

这是一种不寻常的语法来声明被调用的静态*实例*，相当于`TCPHeaderClass``class_tcphdr`

```
class TCPHeaderClass : public PacketHeaderClass {
public:
        TCPHeaderClass() : PacketHeaderClass("PacketHeader/TCP",
                         sizeof(hdr_tcp)) {
        bind_offset(&hdr_tcp::offset_);
    }
};

static TCPHeaderClass class_tcphdr; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T23:09:29.410

不是静态的类，而是变量`class_tcphdr`。

您的代码相当于：

```
class TCPHeaderClass : public PacketHeaderClass { /* etc. */ };

static TCPHeaderClass class_tcphdr; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T23:10:35.033

变量`class tcphdr`是静态的，而不是类。C++ 没有静态类的概念，只有命名空间。在 C# 和类似语言中查找静态类。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T23:11:02.337

类不是静态的，它`class_tcphdr`是静态的。

# android - Android 百分比布局

> ID：11918383
> 
> 赞同：0
> 
> 时间：2012-08-11T23:09:11.720
> 
> 标签：android, android-layout

我想创建一个具有两个 LinearLayout（垂直位置）的布局。

第一个线性布局有 80% 来自空间，另外 20%（我使用 weightSum=10）。

在第二个布局上，我有一个文本输入，当键盘出现时，屏幕尺寸会减小，所以第二个线性布局有 20% 太小了。

我希望我的 secondLayout 至少具有 100dp，而第一个布局具有其余部分，但我不知道如何实现这一点。

谢谢 ！

![打印屏幕](../Images/bc6c95a6e71d94bf3f3dfb22b17f8b9d.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:20:50.357

当总和大于 LinearLayout 时，权重用于分配剩余的空白空间或带走空间。将您的宽度设置为 0dip ，它将起作用。

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical"
    android:weightSum:"10" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="0dip"
        android:layout_weight="8" >
    </LinearLayout>

    <LinearLayout
        android:layout_width="wrap_content" 
        android:layout_height="0dip" 
        android:layout_weight="2">
    </LinearLayout>

</LinearLayout> 
```

# java - 让我的 jProgressBar 在 1 到 100 的计时器上运行

> ID：11918384
> 
> 赞同：4
> 
> 时间：2012-08-11T23:09:27.900
> 
> 标签：java, swing, jprogressbar

我正在看这个线程

[如何使计时器倒计时和进度条一起？](https://stackoverflow.com/questions/5931933/how-to-make-timer-countdown-along-with-progress-bar)

我想将此添加到我的代码中，这样我就可以获得一个 jProgressBar 和一个按钮，（最好使用 netbeans）

因此，当我按下按钮时，它会稳定地从 0 运行到 100，我真的尝试过自己去做并且真的很生气，任何帮助都会很好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T01:33:32.213

利用@Andrew 的[示例](https://stackoverflow.com/a/5932222/230513)，

![图片](../Images/e1a270e1bbfa4f2e917772ed3f942816.png)

```
import java.awt.GridLayout;
import java.awt.event.*;
import javax.swing.*;

class CountUpProgressBar extends JPanel {

    private JProgressBar bar = new JProgressBar(JProgressBar.HORIZONTAL, 0, 100);
    private JLabel label = new JLabel("", JLabel.CENTER);
    private Timer timer = new Timer(100, new ActionListener() {

        private int counter = 1;

        @Override
        public void actionPerformed(ActionEvent ae) {
            label.setText(String.valueOf(counter));
            bar.setValue(++counter);
            if (counter > 100) {
                timer.stop();
            }
        }
    });

    CountUpProgressBar() {
        super.setLayout(new GridLayout(0, 1));
        bar.setValue(0);
        timer.start();
        this.add(bar);
        this.add(label);
        JOptionPane.showMessageDialog(null, this);
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            public void run() {
                CountUpProgressBar cdpb = new CountUpProgressBar();
            }
        });
    }
} 
```

# java - Android 应用程序架构

> ID：11918388
> 
> 赞同：1
> 
> 时间：2012-08-11T23:09:52.497
> 
> 标签：java, android

我身后有很多 .Net 开发，我的大多数应用程序都分层在 UI、服务、BL 和 DAL .. 和数据库层中。每一层通常都是它自己的项目，都相互引用以使数据流通过解决方案。

我是 Java 和 Android 的新手。看起来我们开发了一个输出文件，因此开发了一个项目。我会简单地为每一层使用不同的文件夹吗？也许是一个 ServiceLayer 文件夹，里面有类，然后是一个 BusinessLayer 文件夹，里面有业务类？

保持代码清洁和可维护的通常结构是什么？我不是出于专业原因这样做（还）。纯粹是为了学习。

编辑：该应用程序只是一个简单的应用程序，允许用户每天输入有关某事的数据（简单的 UI，可能有一些下拉查找从数据库中获取“参考数据”），并允许用户选择某事，输入一些详细信息，并存储到内置的 SQLite 数据库中。

一旦工作正常，我想将数据同步到在线数据库（我将编写一个托管在 .Net 托管系统（目前为 GoDaddy）上的 web 服务），它将存储最新数据，并提供一个 web 前端以提供更容易如果用户可以访问笔记本电脑或 PC，则数据输入）。因此，某种网络服务刷新了我的应用程序，并将更新发送到服务器。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:12:34.147

首先，这取决于您在做什么应用程序。

您应该对用户如何使用应用程序进行文字或示意图描述。解决所有可能的情况。写下稍后将用于测试的示例。

决定什么属于功能，什么 - 属于可变配置。从场景中提取功能和数据实体。

从场景中决定您的应用程序将是什么。是服务、活动、小部件，甚至是内容提供者还是复杂的系统，包括一些不同的组件。根据情景测试您的决定。

在复杂系统的情况下，在应用程序组件之间分配功能和数据实体。列出组件及其是什么（活动或其他）。

制作 UI 组件列表，并描述它们做什么（还不是 HOW） 这些将是稍后的小部件和活动或片段或布局。

为 UI 组件制作草稿布局。从一个到另一个进行简单的传递。看看用户界面。返回场景并使用您的草稿 UI 播放所有场景。所有 UI 组件和类都放入一个包或包的层次结构中。

制作数据实体列表。决定什么是什么。将它们计划为数据库或不同数据库中的集合或表。将它们作为类，将它们放入另一个包层次结构或另一个包中。这里还放了 DB 助手——通过 SQL 与 DB 对话的类。

制作一个测试类，用于用测试数据填充 UI 和数据实体并启动它们。

适配器不必是公共的，因为它们仅在其父 GroupView 中使用。因此，通常没有适配器文件。

不要将所有全局变量放入特殊的静态类中——这是一种不好的做法。您正在混合代码和配置。

Configuration data put into recources. If some of them are complex, use XML sources and parser(s). Make readers of resource data into global variables. Not all of them will be static! They could belong to the main Activity instance, for example.

Do not use unconfigurable constants in the code! May be, your name only :-). Every other constant becomes non-constant sometimes.

Always do so:write something - connect something to a bulk - add test(s) for this new thing - test this new one - test the bulk - repeat. Small steps only!

# python - Python3 - 继承异常

> ID：11918389
> 
> 赞同：-1
> 
> 时间：2012-08-11T23:10:01.207
> 
> 标签：python, exception, inheritance, python-3.x

我为解析网站创建了一个小类。

有 URLError 异常：

```
def visit(self, url, referer=None, data=None):

    (...)

    # Return BeautifulSoup instance.
    try:
        return BeautifulSoup(self.opener.open(self.request))
    # URLError.
    except urllib.error.URLError as error:
        return error 
```

一切正常。但我需要创建这个函数的包装器。

```
def get_links(self, *args, **kwargs):

    # Get links with BeautifulSoup.
    self.links = self.visit(*args, **kwargs).find_all('a') 
```

Get_links 函数也可以正常工作，直到出现 URLError（403、404，无论...）。我怎么解决这个问题？有继承异常吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:19:18.187

您的`visit()`函数捕获异常并返回您`URLError`正在调用的对象，`find_all()`但它没有该对象。

内容如下：

```
self.links = self.visit(*args, **kwargs)
if not isinstance(self.links, urllib.error.URLError):
    self.links = self.links.find_all('a')
else:
    # Do something with an HTTP Error 
```

应该给你一个流程的想法。您无法在外部捕获该异常，`get_links()`因为它已经被捕获`visit()`并简单地返回。

如果你想抓住它`get_links()`，改变

```
return error 
```

到

```
raise error 
```

在您的`visit()`方法中，尽管您将再次抛出刚刚捕获的异常，但我不确定这是否是您想要的行为。

# php - 使用 PHP/MySQL 将信息插入 DIV

> ID：11918396
> 
> 赞同：0
> 
> 时间：2012-08-11T23:11:25.897
> 
> 标签：php, mysql, select

好的，所以我想要实现的是使用 PHP 和 MySQL 数据库的“新闻提要”类型的东西。我有数据库和表设置，以及将信息插入数据库的 CMS 设置，并已使用 SELECT 语句成功地将表的各个行调用到我的 HTML 布局中。

现在，我要做的是有一个主页，其中包含 12 个 div，每个 div 都是链接到单个帖子页面的图像，并以 DESC 顺序从我的表中动态生成。这样，12 个最新的设计就会显示在主页上。

然后，我想在按类别排序的页面上实现相同类型的东西，我假设这将通过在我的 SELECT 语句中添加 WHERE category=categoryname 来完成。只是希望有更多知识的人能给我一些关于如何进行此操作的指导。

这是我的 HTML（我插入的*需要*在链接和 img src 中动态生成）：

```
/* Other relevant Code */
<div class="homeContent">
    <div class="newsItems">
        <div class="newsItem1">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem2">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem3">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem4">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem5">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem6">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem7">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem8">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem9">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem10">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem11">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
        <div class="newsItem12">
            <a href="**Needs to be dynamically generated**"><img src="**Needs to be dynamically generated**" alt="" class="newsItem" /></a>
        </div>
    </div>
</div> 
```

我在这部分的 PHP 方面还没有走得太远，因为我不确定该往哪个方向发展，而且我慢慢了解到，如果你用 PHP 选择了错误的方向，通常需要重新开始。提前感谢您的帮助！

长话短说，如何使用 PHP 从 MySQL 表中将 img src 和链接动态生成到这些预定义的 DIV 中，并使它们按 DESC 顺序排列？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:43:04.513

此答案假设您具备以下条件：

1.  PHP 中的 MySQL 连接（这里，它存储在`$sql`变量中）。
2.  `image_src`, `url`, 和`created_at`MySQL 表中的列（我们称之为表`my_table`）。

## 查询一切

首先，让我们回顾一下查询。

我们希望同时获取所有十二行的所有数据，因此我们不必多次查询。我们还希望所有东西都以降序排列，这就是`created_at`发挥作用的地方。

它可能看起来像这样：

```
SELECT m.image_src, m.url, m.created_at
FROM my_table AS m
ORDER BY m.created_at DESC
LIMIT 12 
```

让我们将此查询存储在一个变量中。我们会让它变得简单并称之为`$query`

```
$query = /* The query we just wrote above */ 
```

## 显示结果

现在我们只需要弄清楚如何使结果看起来不错。我假设你知道如何运行查询，看看你是如何管理它的。

查看您的示例，我们希望每个结果都在它自己的`div`元素中，并具有唯一的`class`属性。我建议将它们`ids`改为，因为它们将是独一无二的。我们可以`newsItem`为每个类添加一个类。

为了做我们想做的事，我们将创建一个`while`循环来遍历每一行并打印出适当的 HTML。它可能看起来像这样：

```
<div class="newsItems">
  <?php
    $result = $sql->query($query);

    $count = 0;
    while(null !== ($r = $result->fetch_assoc()): ?>
      <div id="newsItem<?php echo ++$count; ?>" class="newsItem">
        <a href="<?php echo $r['url']; ?>"><img src="<?php echo $r['image_src']; ?>" alt="" /></a>
      </div>
  <?php
    endwhile;
  ?>
</div> 
```

## 几件事

1.  仔细注意`while`病情。对于新版本的 PHP，将`$r`变量与`null`值进行比较很重要。以前可以`false`改用，但现在不行了，这样的语句会抛出错误：

    ```
    while(false !== ($r = $result->fetch_assoc())): 
    ```

    小心你的陈述。

2.  请注意我们如何只将`newsItem`类放在`div`元素上。因为`a`and`img`标记在 内部`div`，您可以使用`.newsItem a`或`.newsItem img`在您的样式中选择它们中的任何一个。

3.  如果您有一系列独特的课程，最好制作它们`ids`而不是`classes`为了清晰。拥有一个只使用一次的类是没有意义的。

享受您的项目并祝您好运！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:25:49.627

以下代码将从您的数据库中获取数据并显示一个新的`<div>`、链接和图像。

图片.php：

```
<?php
$query = "SELECT id, link, image FROM images ORDER BY id DESC";
?>

<html>
   <body>
      <?php while($row = mysql_fetch_assoc($query)): ?>
          <div class="NewsItem<?php echo $row['id']; ?>">
              <a href="<?php echo $row['link']; ?>"><img src="<?php echo $row['image']; ?>" alt="" class="newsItem" /></a>
          </div>
      <?php endwhile; ?>
   </body>
</html> 
```

这假设您有一个包含以下列的表：

*   ID（自动增量）INT
*   image TINYTEXT - 图像文件的 URL
*   link TINYTEXT - 链接到您想要链接的位置。

# jquery - jQuery：隐藏和显示输入元素

> ID：11918397
> 
> 赞同：16
> 
> 时间：2012-08-11T23:11:42.850
> 
> 标签：jquery, input, hide, show

如果选中了一个选择值，我想做的是隐藏/显示某个输入对象。

[JSFiddle 中的代码](http://jsfiddle.net/FarVX/17/)

代码的 HTML 部分在这里：

```
<label for="add_fields_placeholder">Placeholder: </label>
<select name="add_fields_placeholder" id="add_fields_placeholder">
    <option value="50">50</option>
    <option value="100">100</option>
    <option value="Other">Other</option>
</select>
<div id="add_fields_placeholderValue">
    Price:
    <input type="text" name="add_fields_placeholderValue" id="add_fields_placeholderValue">
 </div>​ 
```

jQuery 部分在这里：

```
$(document).ready(function()
{
    $("#add_fields_placeholder").change(function() {
        if($(this).val() == "Other") {
            $("#add_fields_placeholderValue").show();
        }
        else {
            $("#add_fields_placeholderValue").hide();
        }
    });
}); 
```

​ 所以如果用户选择“其他”，它会显示另一个输入对象。

现在的问题是这样的。首先，当您打开页面时，默认选择第一个选项，并显示可选的输入对象。一旦您选择另一个选项，它就会隐藏。

当您第一次加载页面时，是否有任何技巧可以使其隐藏？不仅仅是当您手动选择一个值时。

谢谢你们。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-11T23:15:20.683

只需添加：

```
$("#add_fields_placeholderValue").hide(); 
```

在页面加载时声明更改事件之后。

*IE*

```
$(document).ready(function()
{
 $("#add_fields_placeholder").change(function()
 {
  if($(this).val() == "Other")
  {
   $("#add_fields_placeholderValue").show();
  }
  else
  {
   $("#add_fields_placeholderValue").hide();
  }
 });
 $("#add_fields_placeholderValue").hide();
}); 
```

工作示例：http: [//jsfiddle.net/bZXYR/](http://jsfiddle.net/bZXYR/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T23:18:08.543

您可以使用 css 最初隐藏它

```
#add_fields_placeholderValue{display:none;} 
```

[http://jsfiddle.net/FarVX/20/](http://jsfiddle.net/FarVX/20/)

此外，您有多个具有相同 id 的元素（布兰登指出），这是无效的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T23:17:23.773

我通常会考虑隐藏/显示逻辑：

```
function foobar(){
    if($(this).val() == "Other"){
        $("#add_fields_placeholderValue").show();
    }
    else{
        $("#add_fields_placeholderValue").hide();
    }
} 
```

并在页面加载时调用它。

```
$(document).ready(function(){
    foobar();
    $("#add_fields_placeholder").change(function(){
        foobar();
    });
}); 
```

但我很想知道其他人通常会做什么。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-11T23:19:11.913

你可以简单地用 CSS 来做：

在此处更改 ID：

```
<input type="text" name="add_fields_placeholderValue" id="add_fields_placeholderValue"> 
```

因为你已经在这里使用了

```
<div id="add_fields_placeholderValue"> 
```

然后添加这个CSS：

```
#add_fields_placeholderValue {
  display: none;       
}​ 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-11T23:21:32.397

如果您将匿名方法更改为可调用函数，您应该可以在 Ready() 上调用它

例如

```
$(document).ready(function () {
    $("#add_fields_placeholder").change(ShowIfOther);
    ShowIfOther();
});

function ShowIfOther() {
    if ($("#add_fields_placeholder").val() == "Other") {
        $("#add_fields_placeholderValue").show();
    } else {
        $("#add_fields_placeholderValue").hide();
    }
}​ 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-11T23:23:44.763

将以下代码放在占位符元素下方：

```
<script>$('#add_fields_placeholderValue').hide();</script> 
```

在某些情况下，在就绪处理程序中执行此操作可能会导致元素“闪烁”：

[在文档就绪时调用 hide() 时闪烁](https://stackoverflow.com/questions/8688363/twinkling-when-call-hide-on-document-ready)

# java - Java-如何将我正在运行的 jar 的内容提取到目录中？

> ID：11918398
> 
> 赞同：0
> 
> 时间：2012-08-11T23:11:55.177
> 
> 标签：java, jar, path, directory, extract

我的目标是将我正在运行的 Jar 中的文件夹提取到特定位置。

我可以使用相同的代码将文件从一个文件夹复制到另一个文件夹，但是当涉及到 jar 时，它不起作用：看看 jar 的图片：

[罐子图片](http://i.imgur.com/ZVQTu.png)

现在在代码处

[代码图片](http://i.imgur.com/Gx1kH.png)

如果您无法阅读代码：

```
File f1;
        f1 = new File("/Kingdoms/");

        File f3 = new File("C:\\Cavedog\\Kingdoms");
        move(f1, f3); 
```

我认为问题出在 f1 路径上，这就是我需要知道的。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:58:10.117

使用 paulsm4 的方法将文件读入 byte[]，然后将该 byte[] 写入要移动到的任何文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:15:30.830

要从.jar 中*读取*资源，您可能会使用如下内容：

```
BufferedReader r = 
  new BufferedReader(
    new InputStreamReader(
       getClass().getResourceAsStream("Kingdoms/myfile.png") )); 
```

# asp.net-mvc - 启用迁移错误：项目无法构建

> ID：11918401
> 
> 赞同：10
> 
> 时间：2012-08-11T23:12:22.007
> 
> 标签：asp.net-mvc, entity-framework

将 ASP.NET MVC4 与 EF4.3 一起使用

`Enable-Migrations`从 PM 控制台运行

> System.Management.Automation.RuntimeException：项目“MyProj”构建失败。项目“MyProj”未能构建。

项目构建（control-shift-B）

有什么方法可以获取有关此错误的更多详细信息以进行诊断？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-03-03T14:59:52.573

如果您正在构建 64 位应用程序，也会发生这种情况。至少在构建迁移时暂时切换到“任何 CPU”，问题可能会消失。不过，这只是可能导致该错误的*一*件事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-19T19:01:16.060

从包管理器控制台执行“Enable-Migrations”需要对特定 DbContext 的引用。例如

```
PM> Enable-Migrations -ContextTypeName myMvcApp.Web.Infrastructure.ContextDb 
```

您不需要安装第 3 方程序集或除 EntityFramework 4.3+ 以外的任何其他程序集（上面的命令适用于 EF 5.0。这不是 EF 的一个有据可查但必不可少的功能。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T23:35:33.497

原来我之前在一个没有 dbContext 的项目上运行过这个。这创建了一个迁移配置类，上面写着“填写类的名称”，但未能构建。

这导致我的一个项目无法编译。

删除配置类解决了我的问题。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-05-25T03:29:24.920

让我们清楚一点。这个错误是一个令人困惑的错误，因为该消息表明该项目不会构建，而它显然可以在 Visual Studio 中编译。

在重构 ApplicationDbContext 和其他安全类的命名空间以匹配来自

```
namespace {projectname}.Models 
```

到

```
namespace {projectname}.Models.Account 
```

还原此命名空间重构解决了该问题。

有时，很少，ReSharper 不是您的朋友。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-03T04:28:16.383

就我而言，我的项目中有错误。我已清除项目中的所有其他错误。然后它运作良好。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-01-09T01:49:30.897

就我而言，Visual Studio 输出窗口中有一条更有意义的消息。

> PosmasterDBContext'不包含'Products'的定义，并且找不到接受'PosmasterDBContext'类型的第一个参数的扩展方法'Products'（您是否缺少 using 指令或程序集引用？）

我马上就知道在我的代码中的某个地方，我将**Products**更改为**Product**

一旦我将其恢复为**Products**，错误就消失了。

# continuous-integration - Jenkins/Hudson Java.IO 错误无法清理工作区 - Windows 服务器

> ID：11918407
> 
> 赞同：0
> 
> 时间：2012-08-11T23:13:26.947
> 
> 标签：continuous-integration, jenkins

我有一个 Jenkins/Hudson CI 服务器，托管在专用服务器上（请由其他人托管）。我们遇到了一个我们无法解决的问题，需要可能知道解决方案的人的帮助：

当我们尝试运行构建时，我们得到一个构建失败，并且

```
java.io.IOException: Unable to delete C:\Program Files (x86)\Jenkins\jobs\JumpPorts-2\workspace 
```

詹金斯能够创建文件，所以它肯定可以删除它们吗？它作为服务运行，并且正在从 GitHub 克隆源代码（Maven - Java）。这是在 Windows 服务器上。我在我的 VPS (Centos5) 上对其进行了测试，它工作正常，但是由于它是一个 VPS，java 不能很好地与我的其他服务一起运行，所以我无法在那里托管它。

完全错误： http: [//pastebin.com/0tWVVdiH](http://pastebin.com/0tWVVdiH)

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T08:38:49.600

您很可能正在使用 Maven 项目类型。

Maven 项目类型可以在构建之前和访问 GUI 时解析磁盘上的 pom。因此，在 Windows 上构建时，window 的严格版本的文件锁定可能会妨碍，将文件标记为正在使用，直到绝对每个文件句柄都被释放。

减少此问题的一种方法是让 Windows 构建在从节点而不是主节点上运行（请注意，从节点可以是同一台物理机器，但由于需要远程通道才能查看从节点的文件系统，文件句柄可能问题不大）

减少此问题的另一种方法是切换到具有 Maven 构建步骤的 FreeStyle 项目。请注意，我个人的偏好是避免 Maven 项目类型上的死亡痛苦。;-)

# iphone - 如何在 Xcode 中以编程方式更改 UITableViewController 的样式

> ID：11918408
> 
> 赞同：3
> 
> 时间：2012-08-11T23:13:32.223
> 
> 标签：iphone, xcode, styles, uitableview

我正在尝试将 a 的样式更改`UITableViewController`为分组。我知道你可以在创建新的表格视图时这样做，但是我有一个扩展类`UITableViewController`，所以我不需要创建一个新的表格视图。这是我的代码：

```
#import "DetailViewController.h"
#import "NSArray-NestedArrays.h"

@implementation DetailViewController

@synthesize steak, sectionNames, rowControllers, rowKeys, rowLabels;

- (void)viewDidLoad {
    sectionNames = [[NSArray alloc] initWithObjects:[NSNull null], NSLocalizedString(@"General", @"General"), nil];
    rowLabels = [[NSArray alloc] initWithObjects:
             [NSArray arrayWithObjects:NSLocalizedString(@"Steak Name", @"Steak Name"), nil],
             [NSArray arrayWithObjects:NSLocalizedString(@"Steak Wellness", @"Steak Wellness"), NSLocalizedString(@"Steak Type", @"Steak Type"), NSLocalizedString(@"Other", @"Other"), nil]
             , nil];
    rowKeys = [[NSArray alloc] initWithObjects:
           [NSArray arrayWithObjects:@"steakName", nil],
           [NSArray arrayWithObjects:@"steakWellness", @"steakType", @"other", nil]
           , nil];

    // TODO: Populate row controllers array

    [super viewDidLoad];

}
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView {
    return [sectionNames count];
}
- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section {
    id theTitle = [sectionNames objectAtIndex:section];
    if ([theTitle isKindOfClass:[NSNull class]]) {
        return nil;
    }
    return theTitle;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
    return [rowLabels countOfNestedArray:section];
}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {
    static NSString *CellIdentifier = @"SteakCellIdentifier";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue2 reuseIdentifier:CellIdentifier];
    }

    NSString *rowKey = [rowKeys nestedObjectAtIndexPath:indexPath];
    NSString *rowLabel = [rowLabels nestedObjectAtIndexPath:indexPath];

    cell.detailTextLabel.text = rowKey;
    cell.textLabel.text = rowLabel;
    cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    return cell;
}
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath {
    // TODO: Push editing controller onto the stack
} 
@end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-12-22T06:16:09.623

```
- (instancetype)init
{
   self = [super initWithStyle:UITableViewStyleGrouped];
   if (self) {
   }
   return self;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T23:21:28.913

不关注？您不必“制作新的表格视图”是什么意思？您仍然必须实例化一个。

要么您已经创建了一个并且它具有您想要的样式，要么您必须实例化一个新的并在其上设置属性。

tableView.style 是只读的。因此，您无法更改现有样式的样式。您将不得不执行以下操作：

```
[MyTableViewSubClass initWithFrame:aFrame style:UITableViewStyleGrouped]; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-11T23:28:07.863

您不能只更改`UITableView`. 所以你只有两个选择：

1.  制作另一个`UITableView`分组的
2.  使用自定义单元格

希望能帮助到你

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-11T23:33:27.857

当你实例化你的视图控制器时，你会处理这个问题。

例如，要实例化一个普通的 UITableViewController，你需要执行以下操作。

```
UITableViewController *tblCtr = [[UITableViewController alloc]initWithStyle:UITableViewStyleGrouped]; 
```

因此，如果您扩展了 UITableViewController，那么您的 init 代码应该负责这一点。

```
MyCustomTableViewController *mctvc = [[MyCustomTableViewController alloc]initWithStyle:UITableViewStyleGrouped]; 
```

为此，您需要在 .m 文件中实现此方法。下面是一个示例，说明您的头文件和实现文件应包含的实例化内容。

标题

```
@interface MyCustomTableViewController : UITableViewController
{
  -(id)initWithStyle:(UITableViewStyle)style;
} 
```

执行

```
@implementation MyCustomTableViewController

-(id)initWithStyle:(UITableViewStyle)style
{
   self = [super initWithStyle:style];

   if(self)
   {
     ...
     return self;
   }
   return nil;
 }
 @end 
```

当您调用 [super initWithStyle:style] 时，Apple 提供的代码将负责使用请求的视图样式为您构建表格视图。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-05-09T06:52:58.203

您可以像这样创建一个新的 tableview 来覆盖`UITableviewController`的 tableview：

```
UITableView *tableView = [[UITableView alloc] initWithFrame:self.tableView.frame style:UITableViewStyleGrouped];
self.tableView = tableView; 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-08-12T09:34:43.817

只需伙计分配设置表格的框架和样式..示例代码写下来。

```
[tableObject initWithFrame:CGRectMake(x,y,width,height) style:UITableViewStyleGrouped]; 
```

# php - 使用 Facebook 登录，无需数据库

> ID：11918413
> 
> 赞同：0
> 
> 时间：2012-08-11T23:13:59.763
> 
> 标签：php, javascript, facebook, facebook-javascript-sdk

我正在尝试创建一个允许用户使用其 Facebook 帐户登录的网站。当他们不在网站上时，我不需要提出任何请求或存储任何信息，因此我不需要数据库。

我只接受 Facebook 登录，不需要其他登录类型。我需要在登录页面上使用 Facebook 按钮进行典型登录，并能够让他们跨多个页面登录。我还想添加注销功能。

我已经下载了 PHP SDK，并且在我的页面上一起使用了 JavaScript SDK，但是我遇到了很多麻烦。

只是我还是 Facebook SDK 完全烂透了？

我的第一个问题是登录页面上的 JavaScript SDK 在身份验证后不会将用户重定向到主页。我目前正在手动刷新页面（PHP SDK意识到用户已登录并将用户发送到主页）。

另一个问题是注销。我正在使用 PHP SDK 的 getLogoutURL() 函数，它将用户从 Facebook 注销，但我的访问令牌仍然完全有效，并且 PHP 拒绝将用户发送到登录页面。为什么？我不知道。就个人而言，我希望用户退出我的网站而不是 Facebook。

我正在尝试使用 Facebook 制作无缝登录系统，但我遇到了麻烦！我似乎根本无法在 Facebook Connect 上找到任何好的文档。我正在使用他们的例子，这样的问题正在发生。也许他们只是无法制作出好的 SDK。我想使用 PHP SDK 和 JavaScript SDK 来提供非常好的用户体验，但这似乎是不可能的。

login.php 的 PHP 代码

```
require_once("../fb-sdk/src/facebook.php");

$Facebook = new Facebook(array(
  'appId'  => 'xx',
  'secret' => 'xx',
));

$User = $Facebook->getUser();

if ($User)
{
  try
  {
    // Proceed knowing you have a logged in user who's authenticated.
    $UserProfile = $Facebook->api("/me");
  } catch (FacebookApiException $e) {
    error_log($e);
    $User = null;
  }
}

if ($User)
{
  header("Location: index.php");
}

?> 
```

login.php 的 JavaScript 代码

```
<div id="fb-root"></div>
<script>
  window.fbAsyncInit = function() {
    FB.init({
      appId      : 'xx', // App ID
      channelUrl : '//WWW.YOUR_DOMAIN.COM/channel.html', // Channel File
      status     : true, // check login status
      cookie     : true, // enable cookies to allow the server to access the session
      xfbml      : true  // parse XFBML
    });
  };
  // Load the SDK Asynchronously
  (function(d){
     var js, id = 'facebook-jssdk', ref = d.getElementsByTagName('script')[0];
     if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
     js.src = "//connect.facebook.net/en_US/all.js";
     ref.parentNode.insertBefore(js, ref);
   }(document));
</script>
<div class="fb-login-button">Login with Facebook</div> 
```

index.php 的 PHP 代码

```
require_once("../fb-sdk/src/facebook.php");

$Facebook = new Facebook(array(
  "appId"  => "xx",
  "secret" => "xx",
));

$User = $Facebook->getUser();

if ($User)
{
  try
  {
    // Proceed knowing you have a logged in user who's authenticated.
    $UserProfile = $Facebook->api("/me");
  } catch (FacebookApiException $e) {
    error_log($e);
    $User = null;
  }
}

if (!$User)
{
  header("Location: login.php");
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:11:11.023

您必须订阅登录事件才能获得回调，然后您才能刷新页面。此外，对于注销，您应该使用您自己的 SESSION 站点在 facebook 登录旁边进行登录注销，所以可以说如果您通过调用此函数从 facebook 获取用户 ID（意味着用户使用 facebook 登录）

```
$User = $Facebook->getUser(); 
```

然后在您的会话中设置类似的内容，并使用此变量检查用户在您的网络上的登录状态。

```
$_SESSION['LOGIN'] = 1; 
```

当您注销时，您可以简单地取消设置此变量或销毁会话。

这是教程的链接，它为您提供有关 PHP / JS 中 facebook SDK 的更多详细信息

[http://thinkdiff.net/facebook/graph-api-javascript-base-facebook-connect-tutorial/](http://thinkdiff.net/facebook/graph-api-javascript-base-facebook-connect-tutorial/)

[http://thinkdiff.net/facebook/php-sdk-3-0-graph-api-base-facebook-connect-tutorial/](http://thinkdiff.net/facebook/php-sdk-3-0-graph-api-base-facebook-connect-tutorial/)

# windows-phone-7 - WP7 按钮内容未显示

> ID：11918415
> 
> 赞同：0
> 
> 时间：2012-08-11T23:14:36.493
> 
> 标签：windows-phone-7, button, hyperlink, textblock

我正在创建一个像这样的超链接按钮：

```
HyperlinkButton hlbMail = new HyperlinkButton();
        hlbMail.Height = 89;
        hlbMail.HorizontalAlignment = System.Windows.HorizontalAlignment.Center;
        hlbMail.VerticalAlignment = System.Windows.VerticalAlignment.Top;
        hlbMail.Margin = new Thickness(60, -70, 0, 0);
        hlbMail.Width = 290;      
        hlbMail.FontSize = 22;

        TextBlock btnContent = new TextBlock();

        btnContent.TextWrapping = TextWrapping.Wrap;
        btnContent.Text = message;
        btnContent.Visibility = System.Windows.Visibility.Visible;
        hlbMail.Content = btnContent;

        hlbMail.Visibility = System.Windows.Visibility.Visible;
        mailStackPanel.Children.Add(hlbMail);

        mailscrollViewer.Content = mailStackPanel;
        PIMail.Content = mailscrollViewer; 
```

但是我有一个问题，按钮的内容没有显示出来。可以看出，内容应该是 TextBlock 的文本（message var 是一个非空字符串）。内容未显示的原因可能是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:22:11.730

你需要使用这个：hlbMail.Content= btnContent.Text; 我想你忘了添加.Text。

您不能有一个以文本块为内容的超链接按钮。但是您可以将文本块的文本作为超链接的内容

正如您还提到的，您需要 textblock 的文本，而不是通过添加 btnContent.Text 来指定您需要文本；

# python - 在 Xcode 中找不到使用 Python 的输出文件

> ID：11918421
> 
> 赞同：0
> 
> 时间：2012-08-11T23:15:48.473
> 
> 标签：python, xcode, pyobjc

我大约一周前才开始学习 Python。感谢所有提问和回答问题的人，我取得了长足的进步。昨晚遇到一个问题，经过一番搜索和思考，我仍然无法弄清楚。

我尝试在 xcode 中制作 Python 项目，但找不到输出文件。我通过从“选择模板菜单：”中选择“Cocoa-Python 应用程序”来启动项目：在 main.py 文件中，我有以下代码：

```
import objc
import Foundation
import AppKit
from PyObjCTools import AppHelper

file = open('test.txt', 'w')

print >> file, 'Test of the emergency broadcast system.'
print 'This is merely a test...'

file.close() 
```

控制台显示“这只是一个测试......”语句，但我无法在任何地方找到输出文件“test.txt”。我搜遍了电脑，没有找到。我确定这很愚蠢，但我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:33:40.683

将其打印到您的控制台，您将看到文件名：

```
print file 
```

[http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files](http://docs.python.org/tutorial/inputoutput.html#reading-and-writing-files)

* * *

如果这只是向您显示相对路径，请像这样打印 cwd：

```
from os import getcwd
print 'Current directory:', getcwd() 
```

[http://docs.python.org/library/os#os.getcwd](http://docs.python.org/library/os#os.getcwd)

# html - 使用 CSS 垂直居中和拉伸

> ID：11918429
> 
> 赞同：0
> 
> 时间：2012-08-11T23:18:10.693
> 
> 标签：html, css

我有这样的设置：

HTML：

```
<div class="wrapper">
  <header> ... </header>
  <div class="home">
    <div class="inner"> ... </div>
  </div>
</div> <!-- /wrapper -->
<footer> ... </footer> 
```

页脚是一个粘性页脚，我正在使用 Ryan Fait 的粘性页脚技术 (http://ryanfait.com/sticky-footer/) 来实现这一点。标题有一个固定的高度，但我需要以某种方式让“home”div 拉伸到“wrapper”div 的底部，然后在 div.home 中垂直居中 div.inner。我尝试了许多涉及相对/绝对定位和最小高度的技术来实现这一点，但没有一个奏效。有没有人有类似问题的经验？

# c# - 适用于 MVC 应用程序的 .NET 4.0 集成管道

> ID：11918451
> 
> 赞同：0
> 
> 时间：2012-08-11T23:21:52.500
> 
> 标签：c#, asp.net-mvc

我的应用程序在不使用集成管道时运行良好。

使用集成管道时如何在服务器上调试我的应用程序？

我什至无法让控制器初始化——它永远不会到达它（通过日志记录发现）。

我正在使用 facebook sdk 和 Unity，如果这有什么不同的话。

# jquery - jQuery UI Datepicker 样式损坏

> ID：11918453
> 
> 赞同：1
> 
> 时间：2012-08-11T23:22:13.843
> 
> 标签：jquery, html, css, jquery-ui, uidatepicker

当我在文本框内单击时，会弹出一个 jQuery UI Datepicker 对象。这是HTML：

```
<tr>
    <td class="label-td"><label for="dateOpen_add">Date Opened</label></td>
    <td><input type="text" id="dateOpen_add" name="dateOpen_add" maxlength="10" size="10" /></td>
</tr> 
```

这是jQuery：

```
$('#dateOpen_add').datepicker({
    dateFormat: 'yy-mm-dd',
    date: $('#dateOpen_add').val(),
    current: $('#dateOpen_add').val(),
    starts: 1,
    position: 'bottom',
    onBeforeShow: function(){
            $('#dateOpen_add').setDate($('#dateOpen_add').val(), true);
    },
    onChange: function(formated, dates){
            $('#dateOpen_add').val(formated);
    }
}); 
```

出于某种原因，当我单击`dateOpen_add`文本框时，日期选择器显示如下：

![日期选择器搞砸了](../Images/88ba6a671b559e72b49cf6ea1cfe13cd.png)

此外，这里是实际问题的链接：[LINK](http://xtracktech.com/xtrack/fasttrack/test-page.php)

有谁知道为什么会这样？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T00:03:21.460

您在 Global.css（第 97 和 125 行）中的样式 #selected-folders-table td, th 将所有 th 元素的最小宽度设置为 125px

您可以将此 css 选择器重写为 #selected-subfolders-table td, #selected-subfolders-table th {...} 以使选择器更具体并修复错误

# jquery - jQuery Datapicker - 为什么语言没有改变？

> ID：11918456
> 
> 赞同：1
> 
> 时间：2012-08-11T23:22:43.250
> 
> 标签：jquery, jsf-2

我已经尝试了一切，但没有任何效果......这是我最后一次尝试的代码：

头

```
<link type="text/css" href="css/smoothness/jquery-ui-1.8.20.custom.css" rel="stylesheet" />

<script type="text/javascript" src="js/jquery-1.7.2.min.js"></script>
<script type="text/javascript" src="js/jquery-ui-1.8.20.custom.min.js"></script>
<script type="text/javascript">

     $(function() {      

           $('#datepicker').datepicker($.extend({

               dateFormat: 'dd/mm/yy',
               inline: true,
               showOtherMonths: true,
               selectOtherMonths: true

           },$.datepicker.regional['pt']));

           $('#datepicker2').datepicker($.extend({
                dateFormat: 'dd/mm/yy',
                inline: true,
                showOtherMonths: true,
                selectOtherMonths: true                    

           },$.datepicker.regional['pt']));   
 }); 
```

XHTML

```
<p>Data de admissão: <br></br>
<input id="datepicker" rendered="true" value="#{professor.admissao}"></input>
</p>

<p>Data de exoneração:<br></br>
<input id="datepicker2" rendered="true" value="#{professor.exoneracao}"></input>
</p> 
```

任何人都知道为什么它不起作用？

Ps：在这个项目中，我使用的是 JSF 2.0、Glassfish 3.0.1、Primefaces 3.3 和 jQuery。

# iphone - iOS5 JSON 基础

> ID：11918457
> 
> 赞同：3
> 
> 时间：2012-08-11T23:22:49.523
> 
> 标签：iphone, ios, arrays, json, ios5

我是 JSON 的新手，在阅读完每篇文章后，我仍然无法从 php 编码数组中解析数组

如果它只有一个项目 init，我已经设法让它解析数组。但是如果有多个项目，它会输出 null，因为它存储了太多的值。

我将如何从这个数组中列出第二个“消息”

> {"date":"Friday 10 Aug 2012","time":"2:08","message":"好吧，伙计们，新网站几乎要竞争了'然后它永远不会完成，它将建立和建立直到它接管了！"}{"date":"Wednesday 8 Aug 2012","time":"9:08","message":"昨天洗脑先生的采访让我崩溃了。太好了，我压力很大等待得到它。是的 55rocks！“}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T17:08:12.397

您的数组不是**有效的 JSON 变量**。

您需要用**逗号**(,) 分割每条记录。并添加**方括号**

> [ /你的代码/ ]

**试试这个代码**，

```
[
{
  "date": "Friday 10 Aug 2012",
  "time": "2:08",
  "message": "Well guys the new website is almost compete' then again its never going to be complete it will build and build until it takes over!"
}
,

{
  "date": "Wednesday 8 Aug 2012",
  "time": "9:08",
  "message": "Mr brainwash interview yesterday left my shattered. Was so good and I had been so stressed waiting to get it. Yes 55rocks! "
}
] 
```

使用此[链接](http://jsonviewer.stack.hu/)查看每个 json 值数组。

# php - 使用 ajax / 动态注入内容，但使用 php 而不是 html

> ID：11918458
> 
> 赞同：0
> 
> 时间：2012-08-11T23:23:01.663
> 
> 标签：php, ajax

最近一直在用 chris coyier 的代码构建网站。Ajax jquery .load() 等

一切都很好。

在此处查看代码转储[http://css-tricks.com/dynamic-page-replacing-content/](http://css-tricks.com/dynamic-page-replacing-content/)

```
$(function() {

var newHash      = "",
    $mainContent = $("#main-content"),
    $pageWrap    = $("#page-wrap"),
    baseHeight   = 0,
    $el;

$pageWrap.height($pageWrap.height());
baseHeight = $pageWrap.height() - $mainContent.height();

$("nav").delegate("a", "click", function() {
    window.location.hash = $(this).attr("href");
    return false;
});

$(window).bind('hashchange', function(){

    newHash = window.location.hash.substring(1);

    if (newHash) {
        $mainContent
            .find("#guts")
            .fadeOut(200, function() {
                $mainContent.hide().load(newHash + " #guts", function() {
                    $mainContent.fadeIn(200, function() {
                        $pageWrap.animate({
                            height: baseHeight + $mainContent.height() + "px"
                        });
                    });
                    $("nav a").removeClass("current");
                    $("nav a[href='"+newHash+"']").addClass("current");
                });
            });
    };

});

$(window).trigger('hashchange');

}); 
```

但是 - 我现在已经将我所有的页面都变成了 php - 我似乎无法将它破解在一起......我想我可以在 jQuery 中将“html”更改为“php”......但这不是在职的...

有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:05:47.770

很抱歉浪费你们的时间，伙计们——我在这台电脑前呆了很长时间。

我急忙用php替换了href ...（以为是html）

记得让每个人都休息一下 - 或者看起来像个傻瓜（像我一样）

-谢谢你的时间...

# download - 在哪里可以获得 mime.types 文件的副本？

> ID：11918460
> 
> 赞同：5
> 
> 时间：2012-08-11T23:23:30.700
> 
> 标签：download, mime, file-type

想知道是否有人开发过任何处理 mime 类型的东西，并且知道在哪里可以获得最新的 mime.types 的副本。包含所有 MIME 类型/扩展名的文件。

[iana.org](http://www.iana.org/assignments/media-types/index.html)上的ftp 目录似乎不再可访问。

我有一个 java 程序，它需要列出所有 mime 类型和扩展名以进行文件类型验证的文件。

```
MimetypesFileTypeMap mmp = new MimetypesFileTypeMap("path/to/mime.types"); 
```

mime.types 内容示例

```
# MIME type         Extension
application/vnd.motorola.flexsuite.ttc
application/vnd.motorola.flexsuite.wem
application/vnd.mozilla.xul+xml
application/vnd.ms-artgalry
application/vnd.ms-asf
application/vnd.ms-excel    xls
application/vnd.ms-lrm
application/vnd.ms-powerpoint   ppt 
```

更新：

在 Apache HTTPD 存储库中找到此文件的有效[副本](http://svn.apache.org/viewvc/httpd/httpd/branches/2.2.x/docs/conf/mime.types?view=markup)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-11-19T01:43:49.257

最新的总是在这个存储库的主干 [http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/conf/mime.types?view=markup](http://svn.apache.org/viewvc/httpd/httpd/trunk/docs/conf/mime.types?view=markup)

# c# - 如何加载或绑定 RTF 文件并在 Silverlight RichTextBox 或 RichTextBoxOverflow 中显示它

> ID：11918461
> 
> 赞同：0
> 
> 时间：2012-08-11T23:23:39.140
> 
> 标签：c#, silverlight, data-binding, rtf, silverlight-5.0

我正在 Silverlight 中编写我的第一个应用程序，我想从 RTF 文件加载文本并将其显示在 RichTextBlock 控件中。

在此 Silverlight 控件中，不是WinForms 富文本框中的*Text*属性或*LoadFile*属性。

请问有人知道如何在没有外部工具包的情况下加载或绑定一些 RTF 文件并在 Silverlight 中将其可视化吗？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T08:41:21.697

Silverlight 不支持 RTF 格式。Silverlight`RichTextBox`只有一个 Xaml 属性，您可以将已采用 Xaml 格式的富文本分配给该属性。

为了加载 RTF，您需要编写代码来加载 RTF 文件并将其解析为适合分配给`RichTextBox`. 没有简单的方法可以做到这一点，即使有第三方的帮助，比如[NRTFTTree](http://www.codeproject.com/Articles/11306/NRTFTree-A-class-library-for-RTF-processing-in-C)。您仍然需要遍历生成的树以将其编码为 Xaml。

# shared - ccache 基于（共 享）配置

> ID：11918463
> 
> 赞同：3
> 
> 时间：2012-08-11T23:23:46.310
> 
> 标签：shared, cyanogenmod, ccache

环境是 Ubuntu 12

我有相同版本的两个不同版本。

一个位于 /media/CM10/custom 另一个位于 /home/malachi/CM10/android/system

我有一个专门的 build-setup.sh，它由主构建过程调用，它们每个都有：

CCACHE_BASEDIR=/媒体/CM10/自定义

和

CCACHE_BASEDIR=/home/malachi/CM10/android/system

但是，这绝对不是两者之间的共享。缓存大小约为 3.9GB，如果我重复的话，它会保留在那里。如果我做另一个，它会增长到超过 7GB。

当我检查 ccache 日志时，它似乎正在拾取基本目录并重写相对路径。任何线索如何让 ccache 在这两者之间正确共享？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-04T13:03:26.030

尝试 CCACHE_BASEDIR=/media 两者

[1] [http://jlebar.com/2011/4/19/Set_CCACHE_BASEDIR_to_share_object_files_between_trees.html](http://jlebar.com/2011/4/19/Set_CCACHE_BASEDIR_to_share_object_files_between_trees.html)

# ios - 故事板中的 Facebook SSO 实现 - 登录后的空白屏幕

> ID：11918464
> 
> 赞同：1
> 
> 时间：2012-08-11T23:23:58.167
> 
> 标签：ios, facebook, storyboard

我正在尝试在故事板（Xcode 4.2）中实现 Facebook SSO，并且 AUTH 对话框完美运行，直到登录完成。那时，Facebook 似乎回到了我的应用程序，但实际上出现的是一个白屏，尽管我尽了最大的努力，但我无法关闭它。从 Stack Overflow 上的搜索来看，这似乎是其他平台上也很少遇到的问题，但我没有找到 IOS 的任何答案。

我最好的猜测是，这是由于我在实施 facebook 教程时的一些失误造成的：[https](https://developers.facebook.com/docs/mobile/ios/build/) ://developers.facebook.com/docs/mobile/ios/build/在故事板中，而不是 XIB。不幸的是，我发现的唯一 facebook 示例项目使用 Xib 的。但老实说，我不太了解这个问题或 AUTH 对话。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:54:46.470

如果您仍在查看最新的 Facebook SDK 3.1 和使用故事板的示例：[https ://github.com/fbsamples/ios-social-cafe](https://github.com/fbsamples/ios-social-cafe)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T18:05:36.140

这类似于我遇到的问题。. . 您是否检查过以确保您的 segue 转到正确的视图控制器？

# javascript - 创建一个独立的 JavaScript “滑块”

> ID：11918467
> 
> 赞同：0
> 
> 时间：2012-08-11T23:24:31.133
> 
> 标签：javascript, jquery, slider, gallery

冒着向世界展示我是个新手的风险，这里是：

我正在一个具有流畅（100%）宽度布局的网站上工作。在特定页面上，我希望有一个滑块（尽管我猜它实际上更像是一个推子），其中包含文本和 HTML 的幻灯片，因此它们看起来像是页面的一部分，但是当用户单击特定单词时或一张幻灯片上的图像，这将跳到另一张指定的幻灯片。这是一张图表，希望能解释我的目标：

![在此处输入图像描述](../Images/f5faa32805fb18c3d79101cc7d4ba709.png)

[http://marcectura.com/wp-content/uploads/2012/08/Slider-graphic.jpg](http://marcatectura.com/wp-content/uploads/2012/08/Slider-graphic.jpg)

几天来我一直在搞乱 JSfiddle，但似乎无法达到预期的效果：http: [//jsfiddle.net/Koubenec/yxPQV/50/](http://jsfiddle.net/Koubenec/yxPQV/50/)

非常感谢stackoverflow上更有经验的人提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:13:30.913

试试这个：

[http://jsfiddle.net/PV7jA/9/](http://jsfiddle.net/PV7jA/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:20:26.470

基于[http://jqueryfordesigners.com/coda-slider-effect/](http://jqueryfordesigners.com/coda-slider-effect/)的 Coda Slider 的代码正是我想要的！

# c# - 如何将列表的最后更新索引添加到文本框 比较后？

> ID：11918468
> 
> 赞同：-1
> 
> 时间：2012-08-11T23:24:39.363
> 
> 标签：c#

```
private void backgroundWorker1_DoWork(object sender, DoWorkEventArgs e) 
        {
            BackgroundWorker worker = sender as BackgroundWorker; 
            while (true)
            {
                List<string> tempNamesAndTexts = new List<string>();
                if ((worker.CancellationPending == true))
                {
                    e.Cancel = true;
                    break;
                }
                else
                {

                    string content = downloadContent();
                    GetProfileNames(content);
                    GetTextFromProfile(content);
                    for (int i = 0; i < names.Count; i++)
                    {
                        tempNamesAndTexts.Add(names[i] + " " + texts[i]);
                         namesAndTexts.Add(names[i] + " " + texts[i]);
                    }
                    if (InvokeRequired)
                    {
                        bool result = tempNamesAndTexts.SequenceEqual(namesAndTexts);
                        if (result == true)
                        {
                        }
                        else
                        {
                            foreach (string com in tempNamesAndTexts)
                            {
                                if (!namesAndTexts.Contains(com))
                                {
                                    MessageBox.Show(com);
                                }
                            }

                            //BeginInvoke(new Action(() => namesAndTexts.ForEach(Item => textBox1.AppendText(Item + Environment.NewLine))));
                        }

                    }
                    reader.Close();
                    response.Close();
                    Thread.Sleep(1000);
                }
            }
        } 
```

我有一个`List<string> namesAndTexts`在 Form1 级别。另一个临时本地`List<string> tempNamesAndTexts`

我需要做的是在 DoWork 中，我每隔 n 秒使用 DoWork 中的两个函数从网站更新 namesAndTexts。

最后，我有 namesAndTexts 列表，例如：

[0] 丹尼尔你好
[1] 摩西你好

我需要将此 namesAndTexts 与 tempNamesAndTexts 列表进行比较，并且每次更新列表时，如果它们相同，则不执行任何操作。

但是，如果它们不一样，则在两个列表中找到不同的部分，而这个不同的部分只会添加到文本框中。

现在的问题是，namesAndTexts 一直在增长，然后增长 18，然后是 36，然后是 72 索引，它不断地一遍又一遍地添加相同的字符串。

* * *

我需要做的是：

1.  每 n 秒从网站下载内容 (downloadContent();)

2.  使用 GetProfileNames 函数创建名称列表。

3.  创建一个文本列表 GetTextFromProfile 函数。

4.  创建一个包含 2\. 和 3\. 中的两个列表的列表，其中包含名称和文本。

5.  将旧列表存储在 4\. 中以记住上次更新。

6.  将上次更新与新更新进行比较。将 5 中的列表与 4 中的列表进行比较。

7.  如果比较结果是真的相同，则不做任何事情。

8.  如果比较不相同，则查找两个列表中的哪些索引不相同，并将列表中与另一个不同的字符串添加到文本框中。

所以文本框应该看起来像这样，首先将列表添加到文本框，例如：

丹尼尔来了
模式在那儿
丹妮拉出去了

比较后的第二次，如果它不相同，则查找哪个 index/s 不相同，并仅将此 index/s 中的字符串添加到 textBox。

所以现在文本框看起来像：

丹尼尔在
吗 模式在
吗 丹妮拉出去了
亚龙你好

所以唯一的变化是 Yaron hell 现在被添加到了 textBox 中。

但我不知道该怎么做。无法比较哪些索引不相同并将它们取出并将它们添加到 textBox 无法弄清楚为什么其中一个列表不断增长所以在下一次迭代中这两个列表不相同但也没有新的索引带有要添加到文本框中的名称和文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:14:47.540

您可以通过以下方式找到添加或删除的项目`Exept`

```
 var list1 = new List<string> {"a", "b"};
        var list2 = new List<string> {"a", "c"};

        List<string> addedItems = list2.Except(list1).ToList();
        addedItems.ForEach(x => Console.WriteLine("Added items: {0}", x));

        List<string> removedItems = list1.Except(list2).ToList();
        removedItems.ForEach(x => Console.WriteLine("Removed items: {0}", x)); 
```

控制台输出：

```
Added items: c
Removed items: b 
```

# c++ - DevC++ 编译器错误

> ID：11918470
> 
> 赞同：0
> 
> 时间：2012-08-11T23:24:45.953
> 
> 标签：c++, dev-c++

我要编写一个测试程序，测试上一个问题中设计的类上的各种操作；显示`clockType`重载作为成员函数的定义。使用 Dev C++ 编译器编译时出现以下错误。

错误内容如下：

```
[link error] undefined reference "WinMain@16'
Id returned 1 exit status 
```

这是我的代码：

```
#include <iostream>

using namespace std;

class clockType
{
public:
      void setTime (int hours, int minutes, int seconds);
      void getTime (int& hours, int& minutes, int& seconds) const;     
      clockType operator++();
      bool operator==(const clockType& otherClock) const;
      bool operator!= (const clockType& otherClock) const;
      bool operator<=(const clockType& otherClock) const;
      bool operator<(const clockType& otherClock) const;
      bool operator>=(const clockType& otherClock) const;
      bool operator>(const clockType& otherClock) const;
      clockType ();
      clockType (int hours = 0, int minutes = 0, int seconds = 0);
private:
        int hr;
        int min;
        int sec;
};
clockType clockType::operator++()
{
          sec++;
          if (sec > 59)
          {
                  sec = 0;
                  min++;
                  if (min > 59)
                  {
                          min = 0;
                          hr++;
                          if (hr > 23)
                          hr = 0;
                  }
          }
          return *this;
}
bool clockType::operator==(const clockType& otherClock) const
{
     return (hr == otherClock.hr && min == otherClock.min && sec == otherClock.sec);
}
bool clockType::operator<=(const clockType& otherClock) const
{
     return ((hr < otherClock.hr) || (hr == otherClock.hr && min < otherClock.min) || (hr == otherClock.hr && min == otherClock.min && sec <= otherClock.sec));
}
bool clockType::operator!=(const clockType& otherClock) const
{
          return (hr != otherClock.hr || min != otherClock.min || sec != otherClock.sec);
}
bool clockType::operator<(const clockType& otherClock) const
{
     return ((hr < otherClock.hr) || (hr == otherClock.hr && min < otherClock.min) || (hr == otherClock.hr && min == otherClock.min && sec < otherClock.sec));
}
bool clockType::operator>=(const clockType& otherClock) const
{
     return ((hr > otherClock.hr) || (hr == otherClock.hr && min > otherClock.min) || (hr == otherClock.hr && min == otherClock.min && sec >= otherClock.sec));
}
bool clockType::operator>(const clockType& otherClock) const
{
     return ((hr > otherClock.hr) || (hr == otherClock.hr && min > otherClock.min) || (hr == otherClock.hr && min == otherClock.min && sec > otherClock.sec));
}

void clockType::setTime(int hours, int minutes, int seconds)
{
     if (0 <= hours && hours < 24)
     hr = hours;
     else
     hr = 0;
     if (0 <= minutes && minutes < 60)
     min = minutes;
     else
     min = 0;
     if (0 <= seconds && seconds < 60)
     sec = seconds;
     else
     sec = 0;
}
void clockType::getTime(int& hours, int& minutes, int& seconds)const
{
   hours = hr;
   minutes = min;
   seconds = sec;
}
clockType::clockType(int hours, int minutes, int seconds)
{
 setTime(hours, minutes, seconds);
} 
```

对此问题的任何帮助将不胜感激。我并不擅长编程，我只是不知道为什么会出现这种错误。到目前为止，我还没有为课堂编写的其他程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:45:08.460

绝对有一个由 Bloodshed 公司制造的称为 Dev-C++ 的 IDE，我相信它已经停产，但仍然相当兼容和受欢迎，因为它免费且易于使用，界面美观。

至于 OP 的问题，你需要确保你有一个应用程序入口点，在你的项目设置中（我多年没有使用 Dev-C++，所以看看周围），你会发现一些东西说应用程序类型，选项列出将类似于

```
Console Application
GUI Application or maybe Win32 Application
Static Library
Dynamic Library 
```

这些都是不同类型的应用程序，默认情况下，您的程序似乎具有 Win32 应用程序设置，在这种情况下，链接器正在寻找 WinMain 但是您没有在项目中提供一个，如果您希望一个简单的控制台应用程序更改应用程序类型到该设置，这将需要一个简单的主函数，Win32 和控制台的应用程序入口点函数的示例是

```
int WINAPI WinMain(HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, int iShow)
{
return 0;
} 
```

或者对于一个简单的控制台应用程序

```
int main(int argc, char* argv[])
{
return 0;
} 
```

这些函数是您需要插入应用程序的其余部分以使其执行任何操作的地方，如果没有此入口点，您的应用程序甚至无法正确编译和链接。

使您的应用程序实际使用您的类的示例（不使用任何函数）

```
int main(int argc, char* argv[])
{
   clockType  myClockType;
   myClockType.setTime(12, 30, 45);

   return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:26:05.520

您缺少该`int main()`功能。一个类本身并不能真正编译成程序，您可以将其编译成，但不能编译成没有该函数`DLL`的可执行文件。`main`更具体地说，程序将编译，但链接器抱怨它需要有一个程序的入口点。

如果你把它放在程序的底部：但是这只会导致未定义的引用消失。

```
int main(){
    return 0;
} 
```

为了实际测试您的程序，您需要运行一些测试，可能是这样的：

```
#include <iostream>

// your class code here.

int main(){
    Clocktype clock;
    clock.setTime(15, 42, 13);
    int h, m, s;
    clock.getTime(&h, &m, &s);
    std::cout << h << m << s << std::endl;
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T23:27:53.773

它不是编译器而是链接错误，它表示链接器正在尝试查找主函数（为 Windows 应用程序提供入口点）。

编译本身运行良好（编译成功后链接步骤工作）。

# php - MYSQL 从 5 个相同的值中仅选择 1 个

> ID：11918474
> 
> 赞同：3
> 
> 时间：2012-08-11T23:25:53.430
> 
> 标签：php, mysql, duplicates

我想从 5 个值中得到一个相同的值，假设 5 条记录在某些列中具有相同的值。

我怎样才能只得到一个而不是 5 个？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-11T23:27:36.493

添加`DISTINCT`到您的查询：

```
SELECT DISTINCT field FROM table; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T23:29:38.517

你可以使用

`"SELECT * WHERE column = 'Term' ORDER BY column2 LIMIT 1"`

然后是一个简单的while循环来输出数据

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-11T23:28:49.050

您可以使用 MySQl 的 GROUP BY 函数对它们进行分组。

```
SELECT field FROM table GROUP BY field 
```

# mysql - MYSQL 在一个查询中语法多个计数和表

> ID：11918475
> 
> 赞同：0
> 
> 时间：2012-08-11T23:25:58.327
> 
> 标签：mysql, syntax, count

我正在尝试使用正确的语法对多个带有连接的表进行多次计数。

表：

跟随表

```
id|follower_id|followed_id 
```

相片

```
id|photoname|userid 
```

这是起点（感谢 ypercube）：

```
 SELECT f1.followed_id
          , p.*                     
          , COUNT(*) AS followers       
     FROM follow_table AS f1
     JOIN follow_table AS f2
       ON f2.followed_id = f1.followed_id
LEFT JOIN (SELECT COUNT(p.*) AS numphotos
             FROM `photos` p
            GROUP BY p.userid) p2 
       ON p2.userid = f1.followed_id
    WHERE f2.follower_id = $userid          
    GROUP BY f1.followed_id; 
```

错误：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 2 行的“COUNT(*) AS Followers FROM follow_table AS f1 JOIN follow_table AS”附近使用正确的语法

# c++ - 在 C++ 中删除字符

> ID：11918477
> 
> 赞同：0
> 
> 时间：2012-08-11T23:26:07.270
> 
> 标签：c++, xcode, string, memory, random

我正在使用 Xcode 在 C++ 中制作一个程序，该程序将生成随机字符串，但是当我这样做时，它会消耗大量的 RAM。我试过使用 .erase(); 和 .clear(); 但似乎都不起作用。

这是我的代码：

```
void randStringMake(char *s, int l)
{
    // AlphaNumaric characters
    static const char AlphaNumaric[] = "abcdefghijklmnopqrstuvwxyz" "ABCDEFGHIJKLMNOPQRSTUVWXYZ" "1234567890";

    for(int x = 0; x < l; x++) {
        s[x]=AlphaNumaric[rand() % (sizeof(AlphaNumaric) - 1)];
    }
    s[l] = 0;
}

char randString;

randStringMake(randString, 10);

std::cout << std::string(&randString) << "\n"; 
```

所以我想我的问题是，如何从内存中删除字符串？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:57:17.960

我对您的代码做了一些最小的更改，因此它可以编译和运行。当它应该是一个足够大以容纳生成的字符串和空终止符的数组时，主要问题被`randString`声明为单个问题。`char`

请注意，发布的代码不是必需的`std::string`，也不应该导致过多的内存使用。如果你仍然有问题，那是你没有显示的代码。

```
#include <iostream>
#include <cstdlib>

void randStringMake(char *s, int l)
{
    // AlphaNumaric characters
    static const char AlphaNumaric[] = "abcdefghijklmnopqrstuvwxyz" "ABCDEFGHIJKLMNOPQRSTUVWXYZ" "1234567890";

    for(int x = 0; x < l; x++) {
        s[x]=AlphaNumaric[rand() % (sizeof(AlphaNumaric) - 1)];
    }
    s[l] = 0;
}

int main()
{
    // randString should be an array to hold 10 chars + null terminator
    char randString[11];

    randStringMake(randString, 10);

    std::cout << randString << "\n";
} 
```

# php - 读取没有最后 x 个字节的文件

> ID：11918480
> 
> 赞同：3
> 
> 时间：2012-08-11T23:27:16.710
> 
> 标签：php, file

我想在php中读取没有最后x字节的文件，就像这样：

```
$size = filesize($filename) - $x;
$handle = fopen($filename, "rb");
$contents = fread($handle, $size);
fclose($handle); 
```

在我的应用程序中，我将大量使用此代码。

这可行，但是是否可以更简单、更灵活地执行此操作，而不是每次都使用 (filesize, fopen, fclose)？

可以`file_get_contents()`帮忙吗？如果是这样，我该如何使用它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-11T23:29:57.233

例如（非常简单的解决方案）

```
$contents = substr(file_get_contents($filename), 0, -$x); 
```

只需删除最后的字节/字符。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T23:31:09.673

它适用于[`file_get_contents()`](http://php.net/manual/en/function.file-get-contents.php)：

```
$contents = file_get_contents($filename, false, null, 0, filesize($filename) - $x); 
```

# ember.js - 如何在视图中显示带有 Ember 数据的 JSON 中的 findAll？

> ID：11918485
> 
> 赞同：0
> 
> 时间：2012-08-11T23:27:59.753
> 
> 标签：ember.js, ember-data

我想显示一个包含来自 JSON 文件的数据的列表。我会使用修改后的适配器。这是到目前为止[的代码](http://jsfiddle.net/besign/P3eUP/)，包括测试 json 文件的路径（因为我希望在不使用 FIXTURES 的情况下获得一些帮助）

我不确定如何使用 Ember-Data 为结果推送对象。我知道我可能仍然没有得到 Ember-Data 的一些概念。

我的问题是：如何根据以下代码从 JSON 文件中获取列表。

**JavaScript**

```
 App = Em.Application.create();

    App.store = DS.Store.create({
      revision: 4,
      adapter: App.adapter
    });

    App.adapter = DS.Adapter.create({

        findAll: function (store, type) {
            console.log('finding');
            var url = type.url;
            $.getJSON(url, function(data) {
                store.loadMany(type, data);
            });

        }

    });

    App.Person = DS.Model.extend({
        fName: DS.attr('string'),
        surname: DS.attr('string'),
        url: 'test.json',
    });
    App.personController = Ember.ArrayController.create({
        content: [],
        init: function(){
            this._super();// create an instance of the person model
            this.set('person', App.store.findAll(App.Person));
        },
    }); 
```

**HTML**

```
<script type="text/x-handlebars">
   {{#each App.personController}}            
        <p>{{fName}} {{surname}}</p>
    {{/each}}
</script> 
```

**编辑**

我已经在 @pauldechov 建议上更新了 jsfiddle 中的代码[，](http://jsfiddle.net/besign/P3eUP/2/)但仍然没有运气。

这是 test.json 的内容，因此可以重新创建整个应用程序：

```
 [{"name": "Bruce","surname": "Banner"}, 
   {"name": "Peter","surname": "Parker"},
   {"name": "Natasha","surname": "Romanoff"},
   {"name": "Steve","surname": "Rogers"},
   {"name": "Tony","surname": "Stark"}] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T16:17:12.060

*   url 属性应该这样定义：

    ```
    App.Person = DS.Model.extend({
        fName: DS.attr('string'),
        surname: DS.attr('string'),
    }).reopenClass({ url: 'test.json' }); 
    ```

    ...作为实例变量而不是作为类变量（参见示例：[https](https://github.com/emberjs/data#find) ://github.com/emberjs/data#find ）。您定义它的方式（或者如果您使用`.reopen({...})`而不是`.reopenClass({...})`，则可以通过（特定的）person.url 而不是 type.url 访问它。

*   AFAIK 你不能将 .json 文件添加到 jsfiddle 的资源中；它将无法访问。查询 test.json 的完整 url 产生了跨域问题。

*   您可能需要将模型放在 App.adapter 上方，App.store 上方。如果仍然失败，请尝试此操作。

*   外围观察：test.json 中的“name”与代码中的“fName”？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-02T13:27:51.100

```
App.personController = Ember.ArrayController.create({
    content: [],
    init: function(){
        this._super();// create an instance of the person model
        this.set('person', App.store.findAll(App.Person));
    },
}); 
```

为什么要设置`person`？不应该设置`content`吗？

# python - Google App Engine Python 2.7 教程错误

> ID：11918487
> 
> 赞同：0
> 
> 时间：2012-08-11T23:28:19.330
> 
> 标签：python, google-app-engine

我在此链接中关注 Google App Engine“Hello world”教程： [https ://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld](https://developers.google.com/appengine/docs/python/gettingstartedpython27/helloworld)

我想加载我的 helloworld.py 应用程序：

```
import webapp2

class MainPage(webapp2.RequestHandler):
  def get(self):
      self.response.headers['Content-Type'] = 'text/plain'
      self.response.out.write('Hello, Udacity!')

app = webapp2.WSGIApplication([('/', MainPage)],
                              debug=True) 
```

我设置了yaml文件：

```
application: helloworld
version: 1
runtime: python27
api_version: 1
threadsafe: true

handlers:
- url: /.*
  script: helloworld.app 
```

我没有使用 Google App Engine Launcher，只是想在控制台或命令行中执行所有操作。

我想使用 启动我的 helloworld 应用程序`dev_appserver.py --port=8888 helloworld`，但控制台抱怨`AppConfigNotFoundError`。控制台输出

```
C:\Documents and Settings\XXX\Desktop\helloworld>dev_appserver.py --port=8888
 helloworld
WARNING  2012-08-11 23:12:21,562 rdbms_mysqldb.py:74] The rdbms API is not avail
able because the MySQLdb library could not be loaded.
Traceback (most recent call last):
  File "C:\Program Files (x86)\Google\google_appengine\dev_appserver.py", line 1
33, in <module>
    run_file(__file__, globals())
  File "C:\Program Files (x86)\Google\google_appengine\dev_appserver.py", line 1
29, in run_file
    execfile(script_path, globals_)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\de
v_appserver_main.py", line 694, in <module>
    sys.exit(main(sys.argv))
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\de
v_appserver_main.py", line 582, in main
    root_path, {}, default_partition=default_partition)
  File "C:\Program Files (x86)\Google\google_appengine\google\appengine\tools\de
v_appserver.py", line 3217, in LoadAppConfig
    raise AppConfigNotFoundError
google.appengine.tools.dev_appserver.AppConfigNotFoundError 
```

这会是路径问题吗？我的`helloworld.py`和`app.yaml`位于我桌面上的一个文件夹中，而不是在谷歌应用引擎目录中。

如何修复此错误？任何建议表示赞赏！

注意：我使用的是 Python 2.7而**不是**2.5。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T04:23:54.557

当您调用`dev_appserver.py`时，最后一个参数应该是您的 app.yaml 所在目录的路径。在您的情况下，由于您是在项目目录中运行的，因此您可以只使用`dev_appserver.py --port=8888 .`，因为`.`它是当前目录的缩写。

# java - Android：如何设置 TabHost

> ID：11918488
> 
> 赞同：1
> 
> 时间：2012-08-11T23:28:30.360
> 
> 标签：java, android

当我将它添加到我的 xml 时，我正在尝试使用 tabhost，它看起来不正确，并且我相信需要在 java 中完成一些事情，我正在尝试使用三个不同的类设置三个选项卡这可能吗?

这是我的xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent" >

        <TabHost
            android:id="@android:id/tabhost"
            android:layout_width="match_parent"
            android:layout_height="match_parent"
            android:layout_weight="1" >

            <LinearLayout
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:orientation="vertical" >

                <TabWidget
                    android:id="@android:id/tabs"
                    android:layout_width="match_parent"
                    android:layout_height="wrap_content" >
                </TabWidget>

                <FrameLayout
                    android:id="@android:id/tabcontent"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent" >

                    <LinearLayout
                        android:id="@+id/tab1"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >

                        <TextView
                            android:id="@+id/textView1"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Browser History:"
                            android:textAppearance="?android:attr/textAppearanceLarge" />

                        <TextView
                            android:id="@+id/hello"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/tab2"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >

                        <TextView
                            android:id="@+id/textView2"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Call Log"
                            android:textAppearance="?android:attr/textAppearanceLarge" />

                        <TextView
                            android:id="@+id/call"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>

                    <LinearLayout
                        android:id="@+id/tab3"
                        android:layout_width="match_parent"
                        android:layout_height="match_parent" >

                        <TextView
                            android:id="@+id/textView3"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content"
                            android:text="Text Messages"
                            android:textAppearance="?android:attr/textAppearanceLarge" />

                        <TextView
                            android:id="@+id/tvSms"
                            android:layout_width="wrap_content"
                            android:layout_height="wrap_content" />
                    </LinearLayout>
                </FrameLayout>
            </LinearLayout>
        </TabHost>
    </LinearLayout>

</LinearLayout> 
```

我有三个不同的类，因为我试图使用每个选项卡来打开每个活动。

这是课程

```
 package com.johnnydicamillo.spybeta;

import android.app.Activity;
import android.app.TabActivity;
import android.content.Intent;
import android.content.res.Resources;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.Browser;
import android.widget.TabHost;
import android.widget.TextView;

public class AndroidSpybetaActivity extends TabActivity {
    /** Called when the activity is first created. */
    Resources res;
    TabHost tabHost;
    Intent intent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        res = getResources();
        tabHost = getTabHost();
        TabHost.TabSpec spec;

        intent = new Intent().setClass(this, Messaging.class);
        spec = tabHost.newTabSpec("messaging").setIndicator("Messaging")
                .setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, TestingData.class);
        spec = tabHost.newTabSpec("Calls").setIndicator("Calls")
                .setContent(intent);
        tabHost.addTab(spec);
        tabHost.setCurrentTab(0);

        TextView view = (TextView) findViewById(R.id.hello);
        Cursor mCur = managedQuery(android.provider.Browser.BOOKMARKS_URI,
                null, null, null, null);
        mCur.moveToFirst();
        int index = mCur.getColumnIndex(Browser.BookmarkColumns.TITLE);
        while (mCur.isAfterLast() == false) {
            view.append(" WebSite " + mCur.getString(index));
            mCur.moveToNext();
        }
    }
} 
```

第二

```
package com.johnnydicamillo.spybeta;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class Messaging extends TabActivity{
    static TextView messageBox;
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        messageBox = (TextView) findViewById(R.id.tvSms);

    }
    public static void updateMessageBox(String msg) {
        messageBox.append(msg);
    }

} 
```

第三个

```
package com.johnnydicamillo.spybeta;

import android.app.Activity;
import android.database.Cursor;
import android.os.Bundle;
import android.provider.CallLog;
import android.provider.CallLog.Calls;
import android.widget.TextView;

public class TestingData extends TabActivity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);
        TextView view = (TextView) findViewById(R.id.call);
        String[] projection = new String[] {

        Calls.NUMBER

        };
        Cursor mCur = managedQuery(CallLog.Calls.CONTENT_URI, projection,
                Calls.DURATION + "<?", new String[] { "60" }, Calls.DURATION
                        + " ASC");
        mCur.moveToFirst();

        while (mCur.isAfterLast() == false) {
            for (int i = 0; i < mCur.getColumnCount(); i++) {
                view.append(" Number " + mCur.getString(i));
            }
            mCur.moveToNext();
        }
    }
} 
```

这是我的日志：

```
08-12 15:19:16.368: D/AndroidRuntime(280): Shutting down VM
08-12 15:19:16.368: W/dalvikvm(280): threadid=1: thread exiting with uncaught exception (group=0x4001d800)
08-12 15:19:16.628: E/AndroidRuntime(280): FATAL EXCEPTION: main
08-12 15:19:16.628: E/AndroidRuntime(280): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.johnnydicamillo.spybeta/com.johnnydicamillo.spybeta.AndroidSpybetaActivity}: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.johnnydicamillo.spybeta/com.johnnydicamillo.spybeta.Messaging}; have you declared this activity in your AndroidManifest.xml?
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.os.Handler.dispatchMessage(Handler.java:99)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.os.Looper.loop(Looper.java:123)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.app.ActivityThread.main(ActivityThread.java:4627)
08-12 15:19:16.628: E/AndroidRuntime(280):  at java.lang.reflect.Method.invokeNative(Native Method)
08-12 15:19:16.628: E/AndroidRuntime(280):  at java.lang.reflect.Method.invoke(Method.java:521)
08-12 15:19:16.628: E/AndroidRuntime(280):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-12 15:19:16.628: E/AndroidRuntime(280):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-12 15:19:16.628: E/AndroidRuntime(280):  at dalvik.system.NativeStart.main(Native Method)
08-12 15:19:16.628: E/AndroidRuntime(280): Caused by: android.content.ActivityNotFoundException: Unable to find explicit activity class {com.johnnydicamillo.spybeta/com.johnnydicamillo.spybeta.Messaging}; have you declared this activity in your AndroidManifest.xml?
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.app.Instrumentation.checkStartActivityResult(Instrumentation.java:1404)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.app.ActivityThread.resolveActivityInfo(ActivityThread.java:2473)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.app.LocalActivityManager.startActivity(LocalActivityManager.java:277)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.widget.TabHost$IntentContentStrategy.getContentView(TabHost.java:651)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.widget.TabHost.setCurrentTab(TabHost.java:323)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.widget.TabHost.addTab(TabHost.java:213)
08-12 15:19:16.628: E/AndroidRuntime(280):  at com.johnnydicamillo.spybeta.AndroidSpybetaActivity.onCreate(AndroidSpybetaActivity.java:31)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-12 15:19:16.628: E/AndroidRuntime(280):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-12 15:19:16.628: E/AndroidRuntime(280):  ... 11 more
08-12 15:19:21.929: I/Process(280): Sending signal. PID: 280 SIG: 9 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:13:26.010

对的，这是可能的。

您可以通过以下方式为每个选项卡指定每个活动（启动意图）

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        res = getResources();
        tabHost = getTabHost();
        TabHost.TabSpec spec;

        intent = new Intent().setClass(this, CalendarActivity.class);
        spec = tabHost.newTabSpec("calendar").setIndicator("Calendar", res.getDrawable(R.drawable.ic_tab_calendar)).setContent(intent);
        tabHost.addTab(spec);

        intent = new Intent().setClass(this, ProfileActivity.class);
        spec = tabHost.newTabSpec("profile").setIndicator("Profile", res.getDrawable(R.drawable.ic_tab_profile)).setContent(intent);
        tabHost.addTab(spec);

        tabHost.setCurrentTab(0);
} 
```

每个活动都有自己的内容布局视图，因此在主布局中无需担心。

您的主要 XML 布局将小而简单，如

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:id/tabhost"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:padding="5dp" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"/>

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent"
            android:padding="5dp" />
    </LinearLayout>

</TabHost> 
```

我想这就是你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:18:07.707

不可能有一个选项卡对应于一个活动。选项卡的目的是在一个视图中显示太多信息时将一个活动分解为多少个视图（不要与活动混淆）。然而，这里是您设置 TabHost 的方式： 首先从 xml 开始：

```
<?xml version="1.0" encoding="UTF-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/tabhost"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >
 -

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" >

        <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content" />
 -

        <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent" >

            <AnalogClock
                android:id="@+id/tab1"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent" />

            <Button
                android:id="@+id/tab2"
                android:layout_width="fill_parent"
                android:layout_height="fill_parent"
                android:text="A semi-random button" />
        </FrameLayout>
    </LinearLayout>
</TabHost> 
```

抱歉，这很难阅读，但如果你将它复制到 eclipse 中，你应该没问题。然后是Java：

```
 import android.app.Activity;
import android.os.Bundle;
import android.widget.TabHost;

public class TabDemo extends Activity {
    @Override
    public void onCreate(Bundle icicle) {
        super.onCreate(icicle);
        setContentView(R.layout.main);

        TabHost tabs=(TabHost)findViewById(R.id.tabhost); //Id of tab host

        tabs.setup();

        TabHost.TabSpec spec=tabs.newTabSpec("tag1");//make a new tab

        spec.setContent(R.id.tab1);  //What is in the tab (not an activity but rather a view)
        spec.setIndicator("Clock"); //Name of tab
        tabs.addTab(spec); //Add it 

        spec=tabs.newTabSpec("tag2"); //Same thing here
        spec.setContent(R.id.tab2);
        spec.setIndicator("Button");
        tabs.addTab(spec);
    }
} 
```

这相对简单，我相信android开发网站有支持，当然只是在谷歌上搜索。这段代码是由 Grant Allen 从《Beginning Android 4》中复制而来的，这本书更详细地解释了这个主题。祝你好运！

# magento - 为输出类别添加新布局到magento

> ID：11918490
> 
> 赞同：0
> 
> 时间：2012-08-11T23:28:52.437
> 
> 标签：magento, layout

我有类别的自定义布局。

* * *

```
<CATEGORY_8>
       <reference name="root">
           <action method="setTemplate"><template>page/category_8.phtml</template></action>
       </reference>
       <reference name="left">
           <block type="catalog/category_view" name="catalog.leftnav.within" before="-" template="catalog/layer/within.phtml   "/>
       </reference>
       <reference name="category.products">
           <action method="setTemplate"><template>catalog/category/8/view.phtml</template></action>
       </reference>
       <reference name="catalog.leftnav">
           <action method="setTemplate"><template>catalog/layer/view_8.phtml</template></action>
       </reference>
       <reference name="product_list">
           <action method="setTemplate"><template>catalog/product/list_8.phtml</template></action>
       </reference>
   </CATEGORY_8> 
```

* * *

我想创建新的布局，我想将此布局应用于类别。我创建了新布局

```
<page_new_new module="page" translate="label">
<label>Layout new</label>
<template>page/category_8.phtml</template>
<layout_handle>page_new_new</layout_handle>
</page_new_new> 
```

如何为此布局设置模板？

我不想在管理员中使用“自定义布局更新”字段。我只想使用“页面布局”字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-19T12:58:03.127

我会将布局 xml 块（您的第一个带有 CATEGORY_8 的代码部分）插入`design/frontend/*/*/layout/page.xml`（您的实际前端设计文件夹，很可能是默认/默认）并创建一个简单的扩展`config.xml`，如下所示：

```
<?xml version="1.0"?>
<config>
  <global>  
    <page>
      <layouts>
        <page_new_new module="page" translate="label">
        <label>Layout new</label>
        <template>page/category_8.phtml</template>
        <layout_handle>page_new_new</layout_handle>
        </page_new_new>
      </layouts>
    </page>
  </global>
</config> 
```

要创建扩展，只需在您的`app/code/local`目录中创建文件夹结构：

```
 YourCompanyName/ModuleNameYouLike/etc 
```

并将此 [config.xml] 放入，您还需要一个 xml 文件在`app/etc/modules`目录中：

```
<?xml version="1.0" encoding="UTF-8"?>
<config>
  <modules>     
    <YourCompanyName_ModuleNameYouLike>
      <active>true</active>
      <codePool>local</codePool>
      <depends>
        <Mage_Page />
      </depends>
    </YourCompanyName_ModuleNameYouLike>
  </modules>
</config> 
```

刷新配置和布局缓存后，您将看到下拉列表`Layout new`中的页面。`Page layout`

# css - 在一个元素上使用两个 CSS 类

> ID：11918491
> 
> 赞同：326
> 
> 时间：2012-08-11T23:28:56.023
> 
> 标签：css, class

我在这里做错了什么？

我有一个`.social` `div`，但在第一个上我希望在顶部填充零，在第二个上我希望没有底部边框。

我试图为这个第一个和最后一个创建类，但我认为我在某处弄错了：

```
.social {
    width: 330px;
    height: 75px;
    float: right;
    text-align: left;
    padding: 10px 0;
    border-bottom: dotted 1px #6d6d6d;
}

.social .first{padding-top:0;}

.social .last{border:0;} 
```

和 HTML

```
<div class="social" class="first">
    <div class="socialIcon"><img src="images/facebook.png" alt="Facebook" /></div>
    <div class="socialText">Find me on Facebook</div>
</div> 
```

我猜不可能有两个不同的课程？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：583
> 
> 时间：2012-08-11T23:31:24.893

如果你想在一个元素上有两个类，这样做：

```
<div class="social first"></div> 
```

像这样在css中引用它：

```
.social.first {} 
```

例子：

[https://jsfiddle.net/tybro0103/covbtpaq/](https://jsfiddle.net/tybro0103/covbtpaq/)

* * *

## 回答 #2

> 赞同：34
> 
> 时间：2012-08-12T08:41:42.180

你可以试试这个：

***HTML***

```
<div class="social">
    <div class="socialIcon"><img src="images/facebook.png" alt="Facebook" /></div>
    <div class="socialText">Find me on Facebook</div>
</div> 
```

***CSS 代码***

```
.social {
  width:330px;
  height:75px;
  float:right;
  text-align:left;
  padding:10px 0;
  border-bottom:dotted 1px #6d6d6d;
}
.social .socialIcon{
  padding-top:0;
}
.social .socialText{
  border:0;
} 
```

要在同一个元素中添加多个类，您可以使用以下格式：

```
<div class="class1 class2 class3"></div> 
```

**[演示](http://jsfiddle.net/KDMfP/4/)**

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2017-05-17T18:22:26.623

请记住，您可以通过在其类属性中用空格分隔每个类来将多个类应用于一个元素。例如：

```
<img class="class1 class2"> 
```

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2017-11-06T17:15:02.283

如果您有 2 个类，即`.indent`和`.font`，则`class="indent font"`有效。

你不必有一个`.indent.font{}`CSS。

您可以在 css 中将这些类分开，并且仍然只使用`class="class1 class2"`html 中的 来调用两者。您只需要在一个或多个类名之间留一个空格。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2012-08-11T23:40:56.720

如果你只有两个项目，你可以这样做：

```
.social {
    width: 330px;
    height: 75px;
    float: right;
    text-align: left;
    padding: 10px 0;
    border: none;
}

.social:first-child { 
    padding-top:0;
    border-bottom: dotted 1px #6d6d6d;
} 
```

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2012-08-11T23:41:08.073

如果您只想将样式应用于作为其父母的第一个孩子的元素，最好使用`:first-child`伪类

```
.social:first-child{
    border-bottom: dotted 1px #6d6d6d;
    padding-top: 0;
}
.social{
    border: 0;
    width: 330px;
    height: 75px;
    float: right;
    text-align: left;
    padding: 10px 0;
} 
```

然后，该规则`.social`既有常见的样式，也有最后一个元素的样式。

并`.social:first-child`用第一个元素的样式覆盖它们。

您也可以使用`:last-child`选择器，但`:first-child`旧浏览器更支持：请参阅 [https://developer.mozilla.org/en-US/docs/CSS/:first-child#Browser_compatibility](https://developer.mozilla.org/en-US/docs/CSS/:first-child#Browser_compatibility)和[https://developer.mozilla.org/ es/docs/CSS/:last-child#Browser_compatibility](https://developer.mozilla.org/es/docs/CSS/:last-child#Browser_compatibility)。

* * *

## 回答 #7

> 赞同：6
> 
> 时间：2015-10-28T19:35:19.500

我知道这篇文章已经过时了，但这就是他们的要求。在您的样式表中：

```
.social {
    width: 330px;
    height: 75px;
    float: right;
    text-align: left;
    padding: 10px 0;
    border-bottom: dotted 1px #6d6d6d;
}
[class~="first"] {
    padding-top:0;
}
[class~="last"] {
    border:0;
} 
```

但这可能是使用选择器的坏方法。此外，如果您需要多个“第一个”扩展名，则必须确保设置不同的名称，或优化您的选择器。

```
[class="social first"] {...} 
```

我希望这会对某人有所帮助，在某些情况下它会非常方便。

例如，如果您有一小段 css 必须链接到许多不同的组件，并且您不想编写一百次相同的代码。

```
div.myClass1 {font-weight:bold;}
div.myClass2 {font-style:italic;}
...
div.myClassN {text-shadow:silver 1px 1px 1px;}

div.myClass1.red {color:red;}
div.myClass2.red {color:red;}
...
div.myClassN.red {color:red;} 
```

变成：

```
div.myClass1 {font-weight:bold;}
div.myClass2 {font-style:italic;}
...
div.myClassN {text-shadow:silver 1px 1px 1px;}

[class~=red] {color:red;} 
```

* * *

## 回答 #8

> 赞同：5
> 
> 时间：2016-03-23T06:23:21.390

另一种选择是使用[后代选择器](https://developer.mozilla.org/en-US/docs/Web/CSS/Descendant_selectors)

HTML：

```
<div class="social">
<p class="first">burrito</p>
<p class="last">chimichanga</p>
</div> 
```

参考 CSS 中的第一个：`.social .first { color: blue; }`

参考 CSS 中的最后一个：`.social .last { color: green; }`

jsfiddle：[https ://jsfiddle.net/covbtpaq/153/](https://jsfiddle.net/covbtpaq/153/)

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2016-10-04T01:00:25.017

`:focus`您可以使用伪选择器来解决您的潜在问题，而不是使用多个 CSS 类：

```
input[type="text"] {
   border: 1px solid grey;
   width: 40%;
   height: 30px;
   border-radius: 0;
}
input[type="text"]:focus {
   border: 1px solid #5acdff;
} 
```

# ios - 在 iOS / iPhone SDK 中控制第三方符号的导出

> ID：11918493
> 
> 赞同：3
> 
> 时间：2012-08-11T23:29:27.657
> 
> 标签：ios, static, export, symbols

如果您正在构建一个将包含在其他人的代码中的商业 iOS SDK，并且您拥有获得许可的第三方库，那么是否有一种有效的方法可以通过不导出这些 3rd 方符号来简化库/框架结构静态库？

我很感激我可以指导开发人员检查重叠的符号，但我想尽量减少指令。即，只是希望他们将 lib 放入他们的项目中然后离开。我也不想导出我的第三方符号，因为它们可能会在以后的项目中发生变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T23:53:42.850

请参阅[符号导出策略](https://developer.apple.com/library/mac/#documentation/DeveloperTools/Conceptual/DynamicLibraries/100-Articles/DynamicLibraryDesignGuidelines.html#//apple_ref/doc/uid/TP40002013-SW18)。你有几个选择：

1.  将符号标记为静态（在这种情况下可能不可能，因为它们来自第 3 方）
2.  使用导出的符号列表或未导出的符号列表
3.  直接设置符号的可见性属性（同样，在这种情况下可能是不可能的）
4.  编译时使用`-fvisibility`命令行选项（可能是你最好的选择）
5.  使用弱进口
6.  使用弱库

这些在上面的链接中进行了解释。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T02:57:55.967

不幸的是，这里没有很多事情可以轻松完成。静态库只是一堆粘在一起的 .o 文件。没有链接器步骤来确定 .o 之间实际需要哪些片段。直到最后的链接步骤（由您的客户）才完成。

也就是说，您可以考虑以下几点：

*   首先，尽可能避免在静态库中包含子库。如果客户有可能拥有同一个子库的其他副本，这真的很危险。由于您的子库已获得许可，因此您的情况似乎有所不同，因此客户不太可能拥有多个副本，但是例如，您永远不应该在静态库中包含 libcurl 的静态副本。您必须要求客户自己链接 libcurl，否则对他们来说事情会非常糟糕。（请参阅[链接静态库，共享另一个静态库](https://stackoverflow.com/questions/11750390/linking-static-libraries-that-share-another-static-library/11765890)。）同样，这听起来可能不适用于您，但如果您有通用的开源库，请记住这一点。

*   处理可见性的老派解决方案是将编译单元粘合在一起。这是“将所有 .c/.m 文件连接成一个大文件并编译它”的一种奇特方式。您标记为“静态”的任何函数在此编译单元之外都将不可见，因此不应导出。这也恰好增加了库内编译器内联和其他优化（特别是没有花哨的链接时优化）的可能性。

# php - 巨大的数组占用的内存空间超出了应有的范围

> ID：11918497
> 
> 赞同：8
> 
> 时间：2012-08-11T23:30:46.113
> 
> 标签：php, arrays, memory

目前我的应用程序使用大约 7 MB 内存。

如果我检查它的大小，该数组似乎使用 700 KB `strlen(serialize($array))))`。

*   如果在我的应用程序中使用这个数组，并检查内存使用情况（用`memory_get_peak_usage()`）我得到 14 MB。

*   如果我不使用它，我会得到 7 MB。

如果这个数组需要 700 KB 序列化，为什么 PHP 需要 7 MB 来存储这个变量？还是我以错误的方式进行基准测试？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-11T23:36:33.690

如果这让您感到困扰，您想远离 PHP：http: [//nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html](http://nikic.github.com/2011/12/12/How-big-are-PHP-arrays-really-Hint-BIG.html)。PHP 数组就像一些生活空间。

如果可能的话，您可以使用`SplFixedArray`，但又一次关心 PHP 数组占用的空间。如果您正在寻找干净/高性能的东西，为什么要首先使用 PHP（是的，这是来自 PHP 人）:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T09:03:23.730

序列化格式可以做一些内存优化，因为它们不需要让对象存在于内存中并使其完全可访问。他们只保持数据的完整性，而不是可访问性。如果这有助于回答您的问题。

# forms - cakephp 使用用户输入创建表单

> ID：11918502
> 
> 赞同：2
> 
> 时间：2012-08-11T23:31:27.173
> 
> 标签：forms, cakephp, formhelper

我试图创建一个视图，其中用户选择了他们创建的模板编号，然后被带到下一页，在那里它吐出他们为该模板创建的字段。我有我的 sql 语句做我想让他们做的事情，但我不确定如何让表单将这些`custom`字段打印`default_values`到输入框中

发票表包含`id sender_id receiver_id template_id` 字段表包含`id name default_value active template_id`

```
invoices hambt fields
fields hambt invoices 
```

连接表是fields_invoices，它包含`id invoice_id field_id entered value`

我不确定如何从发票表和字段表中获取 ID 以保存到连接表

```
 public function create($id)
    {   
    $this->set('title_for_layout', 'Create Invoice');
    $this->set('stylesheet_used', 'homestyle');
    $this->set('image_used', 'eBOXLogoHome.png');   
    $this->layout='home_layout';

     if (!is_numeric($id)) throw new BadMethodCallException('I need an ID');
     $this->Invoice->id = $id;
     if (!$this->Invoice->exists()) throw new NotFoundException('Invalid ID');

    $this->set('invoice_id',$id);

    $names = $this->Invoice->find('list',array(
    'fields'=>array('template_id'),
    'conditions'=>array('id'=>$id)));

    $fields = $this->Field->find('list', array(
     'conditions'=>array(
     'template_id'=>$names)));

    $this->set('field',$fields);

    $this->set('name',$names);

    if(empty($this->data)){
        $this->data= $this->Field->read($fields);
    } 
    else{
        if(($this->Field->save($this->data)))
        {
            $this->Session->setFlash('The field has been updated');
            $this->redirect(array('controller'=>'invoices', 'action'=>'index'));

        }
        }
} 
```

这是视图

```
<?php echo $this->Form->create('fields_invoices'); ?>
    <?php foreach ($field as $fields): ?>
    <?php echo $this->Form->Input($fields); ?>
    <?php endforeach ;?>
    <?php echo $this->Form->End('Submit');?> 
```

现在我不确定如何正确编码视图并获取它，以便`default_variables`将`fields`表格中的内容打印到`input boxes`. 任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:29:10.340

你能帮我们调试一下 $fields 数组吗？

您可以在自动生成的输入字段中指定您想要的内容...

即：$this->Form->input('field_name',array('label'=>'随便你叫什么','value'=>'value'));

# opencv - PCL、OpenCV 和 flann 冲突

> ID：11918504
> 
> 赞同：1
> 
> 时间：2012-08-11T23:31:45.447
> 
> 标签：opencv, point-cloud-library

我正在为我的程序（在 Qt 中）使用 PCL 1.6、OpenCV 2.4.2，并且我无法解决这个 flann (1.7.1) 冲突。

我已经在互联网上阅读了很多关于它的内容，并尝试了大多数解决方案（不使用`using namespace cv`，更新最新版本的 OpenCV 并将 PCL 包含在 OpenCV 包含等之前），但无论何时我一起使用 PCL 和 OpenCV， flann-lib（PCL 使用的）会导致问题，例如这行代码`typedef flann::Index<Dist> FLANNIndex;`

> /usr/include/pcl-1.6/pcl/kdtree/kdtree_flann.h:74：错误：“flann”没有命名类型

还有其他解决方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-28T12:12:07.900

遇到了同样的问题。

在opencv中有一个flann的实现，在pcl中有另一个（可能相同）。

最初，它们生活在不同的命名空间中，但如果你喜欢

```
using namespace cv;
using namespace pcl; 
```

你会在那里发生冲突。

因此，跳过该`using namespace cv;`行，而是在代码中使用 cv::anything 解决了它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-13T13:24:53.187

我似乎找到了解决方案，但我不确定它是否是最好的。

1.  我添加`#include <flann/flann.h>`到*../include/pcl-1.6/pcl/kdtree/kdtree_flann.h*，之后上面提到的错误就消失了。

2.  但是后来 OpenCV 无法找到它的*"flann/flann.h"*，所以我将 ../include/opencv2/flann 中的目录更改*为 flanncv*，*当然*我还必须为每个包含这个的 .h 文件执行此操作目录也是。

 *这不是一个非常简洁的解决方案，但它现在正在工作。*

# java - 在 NetBeans GUI Builder 中将组件添加到选项板

> ID：11918505
> 
> 赞同：1
> 
> 时间：2012-08-11T23:31:56.360
> 
> 标签：java, swing, user-interface, netbeans

我`JPanel`使用 NetBeans GUI Builder 创建了一些自定义类。接下来，我将它们添加到调色板中。然后我创建了一个自定义`JFrame`并能够将我`JPanel`的 s 拖到`JFrame`. 当我只是在 GUI 前端工作时，这很有效。现在我正在处理后端逻辑，其中包括一些 JDBC 代码。我创建了一个`BaseballCardIO`接口并实现了它`BaseballCardJDBCIO`以集中所有数据库的东西。

现在，我的一个 JPanel`AddCardsPanel`需要引用其中一个`BaseballCardIO`。`AddCardsPanel`我首先在构造函数中直接创建一个。（我知道，无论如何，这不是最好的设计决定……）在我`JFrame`在 NetBeans 中开设课程之前，一切都运行良好。它开始抱怨找不到 JDBC 驱动程序类。

我现在想继续使用 NetBeans GUI Builder。我有两个解决方案来解决我的问题：

1) 告诉 NetBeans 在哪里可以找到 JDBC 驱动程序并保持代码不变。我该怎么做呢？

2) 修改我的设计，使其`AddCardsPanel`具有一个以 a`BaseballCardIO`作为参数的构造函数。这实际上是可取的，因为由其他人负责创建`BaseballCardIO`, 而不是`AddCardsPanel`. 但是，我仍然需要`AddCardsPanel`很好地使用 NetBeans GUI Builder，这意味着它需要一个无参数的构造函数。我想我可以添加一些代码来检测`AddCardsPanel`NetBeans 是否将其用作 JavaBean，然后`JFrame`调用 noargs 构造函数。否则，如果我的应用程序实际上正在运行，则`JFrame`调用其他构造函数并将其发送给`BaseballCardIO`.

这是一个好方法吗？或者有人有其他可能的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T02:26:13.733

1.  将驱动程序 JAR 作为库添加到 NetBeans（[此处](https://stackoverflow.com/a/1976322/230513)显示）和您的项目中（[此处](https://stackoverflow.com/a/1975994/230513)显示）。

2.  在`Window > Services > Database > New Connections`中，填写必填字段。

3.  不要让 NetBeans GUI 构建器支配您的设计。`TableModel`隔离对您和其他组件模型的数据库访问。

4.  编辑您的问题以包含显示您遇到的任何问题的[sscce ；](http://sscce.org/)一个 。*不*`form`应该是必需的。

# java - 在Java中查找字符串数组或字符串数 组列表的交集

> ID：11918507
> 
> 赞同：-1
> 
> 时间：2012-08-11T23:32:04.050
> 
> 标签：java, data-structures

是否有任何函数可以在 Java 中查找字符串数组或字符串数​​组列表的交集？我不想使用 HashSet，因为我一定会出现内存不足错误。因为我有超过 10000 条记录。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T23:41:03.377

java.util.Collection 声明了一个可能有用的[retainAll()方法。](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html#retainAll%28java.util.Collection%29)我强烈建议您熟悉该[java.util 包](http://docs.oracle.com/javase/7/docs/api/java/util/package-summary.html)，尤其是[Collection 接口](http://docs.oracle.com/javase/7/docs/api/java/util/Collection.html)。事实上，学习如何导航和使用[Java API](http://docs.oracle.com/javase/7/docs/api/)是每个 Java 程序员的一项关键技能。

但是，我不认为 an`ArrayList`会给您带来优于 a 的优势`HashMap`。您可能会遇到与任何一个相同的内存问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T00:51:32.537

任何动态分配内存的集合都可能导致 OutOfMemoryError。您只需使用 -Xmx 标志为程序分配足够的最大堆空间。

处理好堆大小后，您可能会发现[Google Guava 的](http://code.google.com/p/guava-libraries) [Sets#intersection(Set, Set)](http://docs.guava-libraries.googlecode.com/git-history/v13.0/javadoc/com/google/common/collect/Sets.html#intersection%28java.util.Set,%20java.util.Set%29)方法很有用。

# html - 当我不想要它时，文本会在 html 中换行，但是当我使用 no wrap 标签时，它会沿着页面延伸。

> ID：11918508
> 
> 赞同：0
> 
> 时间：2012-08-11T23:32:10.890
> 
> 标签：html, resize

......这是有道理的。但是，有没有办法限制例如段落占用的空间量？现在，如果有人调整页面大小，文本换行和元素相互重叠，我知道它只是按设计工作。

我能够使用表格作为整个页面布局进行无包装成功设置，但这只会导致其他问题。

如果不使用 no-wrap 选项，我怎样才能得到它以使文本不会移动。我应该将 p 标签放在它自己的 div 中吗？或跨度？

对不起，这可能很简单，但我找不到一个好的答案。如果我换行，它们会重叠。如果我不换行，它...嗯...不换行，但我所寻找的只是让它保持在页面的参数范围内，而不是在页面调整大小时调整大小。想法？随意摇头——只是想从混乱中解脱出来哈哈

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-11T23:36:16.250

我不确定我是否完全理解这个问题，但您可以尝试选择周围的 div 并应用以下 css。

```
selector{
    display:inline-block;
    width: 100px;
} 
```

在换行之前将宽度设置为您想要的大小

# wpf - 用于视频流的控件？

> ID：11918511
> 
> 赞同：0
> 
> 时间：2012-08-11T23:32:36.733
> 
> 标签：wpf, wpf-controls, video-streaming, mediaelement, libvlc

我目前有一个 C# 项目的 LibVLC 设置，它使用面板输出视频流。由于 WPF 更适合我想要实现的一些 GUI 选项，我现在已经将我的项目切换到它。但是，我注意到 WPF 控件没有像 C# 控件那样的句柄。

我找到了这些... [http://wpfmediakit.codeplex.com/](http://wpfmediakit.codeplex.com/) http://videorendererelement.codeplex.com

但是我是 WPF 的新手，不知道如何实际集成它们。在 WPF 中从 LibVlC 输出视频流的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:33:15.423

我设法通过使用 WindowsFormsHost 控件解决了这个问题，并且只使用了一个面板，就像我之前在我的 Win Forms 应用程序中所做的那样。仍然似乎使用 WPF 原生的其他东西会更好，但现在这工作正常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T06:38:08.433

恐怕这不可能……

由于 WPF 控件不是幕后的 Win32 控件（MS 特定的 HWND 或更通用的 HANDLE），就像大多数 WinForms 控件一样，为 libvlc 提供 HANDLE 以进行渲染是不可能或不容易的。

看[这里](http://msdn.microsoft.com/en-us/library/ms742522.aspx)

> 屏幕上的所有 WPF 元素最终都由 HWND 支持。当您创建 WPF Window 时，WPF 会创建一个顶级 HWND，并使用 HwndSource 将 Window 及其 WPF 内容放入 HWND。应用程序中的其余 WPF 内容共享单个 HWND。一个例外是菜单、组合框下拉菜单和其他弹出窗口。这些元素创建自己的顶级窗口，这就是 WPF 菜单可能会超出包含它的窗口 HWND 边缘的原因。

您可以尝试使用 Window 并尝试像这样获取它的句柄：

```
IntPtr windowHandle = new WindowInteropHelper(windowInstance).Handle 
```

然后将此句柄传递给 libvlc。请记住在窗口的 Loaded 事件中获取此句柄，请参见[此处](https://stackoverflow.com/questions/562392/getting-the-handle-of-window-in-c-sharp)

但这将限制您使用顶级 Window 控件，这似乎不是您想要的。

# python - Python：UnicodeDecodeError：'utf8'编解码器无法解码字节

> ID：11918512
> 
> 赞同：13
> 
> 时间：2012-08-11T23:32:41.023
> 
> 标签：python, encoding, utf-8, scikit-learn

我正在将一堆 RTF 文件读入 python 字符串。在某些文本上，我收到此错误：

```
Traceback (most recent call last):
  File "11.08.py", line 47, in <module>
    X = vectorizer.fit_transform(texts)
  File "C:\Python27\lib\site-packages\sklearn\feature_extraction\text.py", line
716, in fit_transform
    X = super(TfidfVectorizer, self).fit_transform(raw_documents)
  File "C:\Python27\lib\site-packages\sklearn\feature_extraction\text.py", line
398, in fit_transform
    term_count_current = Counter(analyze(doc))
  File "C:\Python27\lib\site-packages\sklearn\feature_extraction\text.py", line
313, in <lambda>
    tokenize(preprocess(self.decode(doc))), stop_words)
  File "C:\Python27\lib\site-packages\sklearn\feature_extraction\text.py", line
224, in decode
    doc = doc.decode(self.charset, self.charset_error)
  File "C:\Python27\lib\encodings\utf_8.py", line 16, in decode
    return codecs.utf_8_decode(input, errors, True)
UnicodeDecodeError: 'utf8' codec can't decode byte 0x92 in position 462: invalid
 start byte 
```

我试过了：

1.  将文件的文本复制并粘贴到新文件中
2.  将 rtf 文件保存为 txt 文件
3.  在 Notepad++ 中打开 txt 文件并选择“转换为 utf-8”并将编码设置为 utf-8
4.  使用 Microsoft Word 打开文件并将其另存为新文件

没有任何效果。有任何想法吗？

它可能不相关，但这是您想知道的代码：

```
f = open(dir+location, "r")
doc = Rtf15Reader.read(f)
t = PlaintextWriter.write(doc).getvalue()
texts.append(t)
f.close()
vectorizer = TfidfVectorizer(sublinear_tf=True, max_df=0.5, stop_words='english')
X = vectorizer.fit_transform(texts) 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T00:58:48.227

这将解决您的问题：

```
import codecs

f = codecs.open(dir+location, 'r', encoding='utf-8')
txt = f.read() 
```

从那一刻起，txt 就是 unicode 格式，您可以在代码中的任何地方使用它。

如果要在处理后生成 UTF-8 文件，请执行以下操作：

```
f.write(txt.encode('utf-8')) 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T10:07:19.223

正如我在邮件列表中所说，使用该`charset_error`选项并将其设置为`ignore`. 如果文件实际上是 utf-16，您还可以在 Vectorizer 中将 charset 设置为 utf-16。请参阅[文档](http://scikit-learn.org/dev/modules/generated/sklearn.feature_extraction.text.CountVectorizer.html#sklearn.feature_extraction.text.CountVectorizer)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-07-09T07:47:56.693

您可以将 csv 文件行转储到 json 文件中，而不会出现任何编码错误，如下所示：

```
json.dump(row,jsonfile, encoding="ISO-8859-1") 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-05-15T09:47:16.333

保留这一行：

```
vectorizer = TfidfVectorizer(encoding='latin-1',sublinear_tf=True, max_df=0.5, stop_words='english') 
```

encoding = 'latin-1' 为我工作。

# javascript - jqGrid 的 loadComplete 和 onSelectRow 的 pre 和 post 方法调用如何通用？

> ID：11918519
> 
> 赞同：1
> 
> 时间：2012-08-11T23:34:32.937
> 
> 标签：javascript, jquery, jquery-plugins, jqgrid, extend

我的网格有特殊的实现。
为此，我在**jqGrid**`onSelectRow`和`loadComplete`方法中编写了一些代码。

 **在`onSelectRow`我需要更新一个全局数组并且在`loadComplete`方法中我必须访问全局数组并且需要在 jqGrid 中进行一些操作。

到那时我还好。我已经这样做了。现在我想以一种通用的方式扩展这两种方法（其他网格可以使用它而无需编写任何代码）。

为此，我想到了以下步骤。

1.  我想用 jqGrid.js 在我的 html 中添加一个新的 js（例如：jquery.jqGrid.additional.js）

2.  我想通过 jqGrid 的数据数组来分配我的全局变量

3.  在这个js中，我想检查网格的多选值

4.  如果该值为 true，那么我想扩展 onSelectRow、loadComplete 方法，以使 jqGrid 执行我的方法和在 onSelectRow、loadComplete 方法中编写的代码。

例如，我有`preLoadComplete`并且`postLoadComplete`需要在方法执行之前和之后`loadComplete` 执行。同样，这也适用于 onSelectRow 方法。

我在 jquery.jqGrid.additional.js 中编写了以下代码，然后在 jqGrid 加载后没有收到警报（1），警报（2）。

它只执行 jqGrid 的 loadComplete 方法中编写的代码。

```
var oldLoadComplete = $.fn.jqGrid.loadComplete;

$.jqGrid.extend({
   loadComplete: function (){
      var ret;
      // do someting before
      alert(1);

      ret = oldLoadComplete.call (this);

      // do something after
      alert(3);

      return ret; // return original or modified results
   }
}); 
```

我对此进行了很多尝试并花了很多时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:51:30.973

您正在尝试扩展`$.jqGrid`，而不是`$.fn.jqGrid`。在第一行中，这意味着它`$.jqGrid`甚至不存在，并且所有元素都无法访问您修改过的`.jqGrid`插件，但仍然是默认值。

尽管我尝试`$.fn`使用“新”附加方法进行扩展，但不起作用。您可能必须显式覆盖这些方法。我可以想象 jQuery 有一些自身的安全例程和`$.extend`方法中内置的插件。

```
var oldLoadComplete = $.fn.jqGrid.loadComplete;

$.fn.jqGrid.loadComplete = function( ) {
    alert('pre');
    var ret = oldLoadComplete.apply(this, arguments); // In case any arguments will be provided in future.
    alert('post');
    return ret;
}; 
```

编辑：

忘记这一切。这是无关紧要的。在 GitHub 上查看 jqGrid 的源代码后，很明显 jqGrid 甚至没有使用`$.fn.jqGrid.loadComplete`. 那是你自己编造的。相反，它会创建另一个对象，该对象提供可能的属性和默认值列表，然后被自定义默认值覆盖，最后被您调用 jqGrid 时传入的函数参数覆盖。

我发现 jqGrid分别在调用 loadComplete 回调之前和之后触发了两个事件`jqGridLoadComplete`并`jqGridAfterLoadComplete`在您的匹配元素集（即）上触发。`this`

所以基本上，你不能使用你的尝试。相反，我想到的唯一解决方案是`$.fn.jqGrid`使用相同的方法覆盖 jqGrid “构造函数”（即）并应用监听器来`this`喜欢这样：

```
var oldJqGrid = $.fn.jqGrid;

$.fn.jqGrid = function( ) {
    this.on('jqGridLoadComplete', function( jqEvt ) {
            alert('Pre');
        })
        .on('jqGridAfterLoadComplete', function( jqEvt ) {
            alert('Post');
        });
    return oldJqGrid.apply(this, arguments);
}; 
```

关于您的多选...我不知道您在说什么。我自己的时间非常有限，现在不得不拒绝进一步的协助。

真挚地。**

# macos - 安装 npm 时遇到问题

> ID：11918521
> 
> 赞同：1
> 
> 时间：2012-08-11T23:34:56.983
> 
> 标签：macos, node.js, coffeescript, npm

我用山狮在我的 mac book pro 上进行了全新安装。然后用 homebrew ie 安装了 nodejs `brew install nodejs`，但现在我无法安装 npm。例如。

```
 $ node -v
    v0.8.6
    $ curl -k https://npmjs.org/install.sh | sudo sh
    % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
                                 Dload  Upload   Total   Spent    Left  Speed
100  7882  100  7882    0     0  11359      0 --:--:-- --:--:-- --:--:-- 13803 
```

然后没有其他事情发生。未安装 NPM。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T03:22:11.837

不试一下`sudo`：

```
$ curl https://npmjs.org/install.sh | sh 
```

主要的一点`brew`是它会在你不需要 root 级别访问权限的地方安装东西，并且 npm 的安装程序旨在遵循 Node 安装的引导。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T01:29:22.543

Homebrew 目前不使用 Node 安装 NPM，根据[https://github.com/mxcl/homebrew/blob/6925f69e/Library/Formula/node.rb#L25-26](https://github.com/mxcl/homebrew/blob/6925f69e/Library/Formula/node.rb#L25-26)：

```
def install
  # Why skip npm install? Read https://github.com/mxcl/homebrew/pull/8784.
  args = ["--prefix=#{prefix}", "--without-npm"]

  ...

  system "./configure", *args
  system "make install"
end 
```

正如公式所承诺的，您可以在[https://github.com/mxcl/homebrew/pull/8784](https://github.com/mxcl/homebrew/pull/8784)阅读更多详细信息，[最近的拉取请求](https://github.com/mxcl/homebrew/pull/13053)（最近一次更新仅在 9 小时前）有更多讨论。

我个人更喜欢使用[NVM](https://github.com/creationix/nvm/)而不是 Homebrew 从源代码安装；[我的Node.js First Steps](http://nodecasts.net/episodes/2-nodejs-first-steps)的前半部分详细介绍了通过这种方法安装 Node。

值得注意的是，从 Node v0.8.6 开始，您可以下载某些发行版的预编译二进制文件，包括 OS X。只需单击[http://nodejs.org上](http://nodejs.org)[的下载链接](http://nodejs.org/#download)， 然后单击[“Other release files”](http://nodejs.org/dist/v0.8.6/)；从那里，您可以下载 Darwin 32 位或 64 位二进制文​​件并将它们解压到您的.`PATH`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-19T17:22:31.123

按回车，然后你会看到：

```
Sorry, try again.
Password: 
```

把你的密码和工作。

```
npm@1.1.71 /usr/local/lib/node_modules/npm
It worked 
```

# linux - 如何使用linux命令删除文件中字符串中的特殊字符

> ID：11918525
> 
> 赞同：0
> 
> 时间：2012-08-11T23:35:45.627
> 
> 标签：linux

我需要`:`从文件中删除字符。例如：我有以下格式的数字：

```
b3:07:4d 
```

我希望他们像：

```
b3074d 
```

我正在使用以下命令：

```
grep ':' source.txt | sed -e 's/://' > des.txt 
```

我是 Linux 新手。该文件很大，我想确保我使用的是 write 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:39:24.563

您可以不使用 grep：

```
sed -e 's/://g'  source.txt > des.txt 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:41:14.873

该`-i`选项在原地编辑文件。

```
sed -i 's/://' source.txt 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T23:41:28.040

第一部分不正确，因为它将完全省略不包含的行：

下面是未经测试的，但应该是正确的。正则表达式末尾的 g 是全局的，意味着它应该全部获取。

```
sed -e 's/://g' source.txt > out.txt 
```

从 Jon Lin 的回答中更新为更好的语法，但你仍然想要 /g 我想

# jquery - jQuery：从每个元素获取索引到 div 或 H4 标记之后

> ID：11918531
> 
> 赞同：0
> 
> 时间：2012-08-11T23:37:00.700
> 
> 标签：jquery, database, checkbox

根据以下代码：

```
$('#permisosPerfiles div').children('h4').length(); 
```

这个结果 = 5，但我会得到每个 h4 的索引和每个复选框的索引一段时间，并范围每个区域（查找、创建、删除、编辑）。

![在此处输入图像描述](../Images/1d9c9b474d8ce3b4a8caec15cc9279f0.png)

```
<h3>Asignación de permisos</h3>
    <div id="permisosPerfiles">
        <div id="leftPermisos">
        <h4 id="Usuarios">Usuarios</h4>
        <p>
        <label for="pCrearUsuario">Crear</label>
        <input id="pCrearUsuario" name="Usuarios[]" value="Crear" type="checkbox" />
        <label for="pBuscarUsuario">Buscar</label>
        <input id="pBuscarUsuario" name="Usuarios[]" value="Buscar" type="checkbox"/>
        <label for="pModificarUsuario">Modificar</label>
        <input id="pModificarUsuario" name="Usuarios[]" value="Modificar" type="checkbox"/>
        <label for="pEliminarUsuario">Eliminar</label>
        <input id="pEliminarUsuario" name="Usuarios[]" value="Eliminar" type="checkbox"/>
        </p>

        <h4 id="Clientes">Clientes</h4>
        <p>
        <label for="pCrearCliente">Crear</label>
        <input id="pCrearCliente" name="Clientes[]" value="Crear" type="checkbox"/>
        <label for="pBuscarCliente">Buscar</label>
        <input id="pBuscarCliente" name="Clientes[]" value="Buscar" type="checkbox"/>
        <label for="pModificarCliente">Modificar</label>
        <input id="pModificarCliente" name="Clientes[]" value="Modificar" type="checkbox"/>
        <label for="pEliminarCliente">Eliminar</label>
        <input id="pEliminarCliente" name="Clientes[]" value="Eliminar" type="checkbox"/>
        </p>

        <h4 id="Mps">Marca, Producto Subproducto</h4>
        <p>
        <label for="pCrearMPS">Crear</label>
        <input id="pCrearMPS" name="Mps[]" value="Crear" type="checkbox"/>
        <label for="pBuscarMPS">Buscar</label>
        <input id="pBuscarMPS" name="Mps[]" value="Buscar" type="checkbox"/>
        <label for="pModificarMPS">Modificar</label>
        <input id="pModificarMPS" name="Mps[]" value="Modificar" type="checkbox"/>
        <label for="pEliminarMPS">Eliminar</label>
        <input id="pEliminarMPS" name="Mps[]" value="Eliminar" type="checkbox"/>
        </p>
    </div>
    <div id="rightPermisos">
        <h4 id="Poliza">Póliza</h4>
        <p>
        <label for="pCrearPoliza">Crear</label>
        <input id="pCrearPoliza" name="Poliza[]" value="Crear" type="checkbox"/>
        <label for="pBuscarPoliza">Buscar</label>
        <input id="pBuscarPoliza" name="Poliza[]" value="Buscar" type="checkbox"/>
        <label for="pModificarPoliza">Modificar</label>
        <input id="pModificarPoliza" name="Poliza[]" value="Modificar" type="checkbox"/>
        <label for="pEliminarPoliza">Eliminar</label>
        <input id="pEliminarPoliza" name="Poliza[]" value="Eliminar" type="checkbox"/>
        </p>

        <h4 id="Servicio">Servicio</h4>
        <p>
        <label for="pCrearServicio">Crear</label>
        <input id="pCrearServicio" name="Servicio[]" value="Crear" type="checkbox"/>
        <label for="pBuscarServicio">Buscar</label>
        <input id="pBuscarServicio" name="Servicio[]" value="Buscar" type="checkbox"/>
        <label for="pModificarServicio">Modificar</label>
        <input id="pModificarServicio" name="Servicio[]" value="Modificar" type="checkbox"/>
        <label for="pEliminarServicio">Eliminar</label>
        <input id="pEliminarServicio" name="Servicio[]" value="Eliminar" type="checkbox"/>
        </p>
    </div> 
```

我希望我已经解释过了。问候！

**编辑**

这就是我对每个区域和复选框的索引所做的：

```
NumH4 = 0
NUmH4 = $('#permisosPerfiles div').children('h4').length(); //5
WHile <= NumH4
     numCheckBoxes = 0
     numCheckBoxes = //Code to get total of checkboxes after each $this H4
     while <= numCheckBoxes
         //Code to set checked/unchecked according to data obtained from the database 1 = checked, 0 = unchecked
     numCheckBoxes++;
numH4++; 
```

下图是我的数据库中的表结构，我得到 1 或 0 来检查或取消检查！

也许这个问题或标题写得不好但因为我的英语不是很好，无法正确解释这个问题！需要与某人聊天以使我更好地理解。

![在此处输入图像描述](../Images/9765aae3692223ed17c818b45a04c8d0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:17:16.950

如果您想要元素的索引，请使用以下命令：

```
$("#element").parent().index($("#element")); 
```

你总是取你需要索引的元素的父元素。

我为您制作了一个[jsFiddle](http://jsfiddle.net/DSRct/)，它将索引放在 HTML 中（只是为了显示它是哪些索引）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T05:14:44.980

如果您想要 H4 标签下的复选框 id（这就是您要问的对吗？？），您可以使用以下代码

```
$("#permisosPerfiles h4").each(function(index, elem) {
    console.log($(this).text());
    var h4id=$(this).attr('id');
    console.log($('#'+h4id+'+p input:checkbox').length);
}); 
```

您可以将 console.log 替换为您要执行的操作。这是我为它创建的[jsFiddle jsFiddle](http://jsfiddle.net/xajat007/vwNzp/)。

# groovy - 从 wicket 1.4 迁移到 1.5 现在无法导入包

> ID：11918532
> 
> 赞同：1
> 
> 时间：2012-08-11T23:37:13.997
> 
> 标签：groovy, wicket-1.5, wicket-1.4

我有一个在 Wicket 1.4 中构建的项目。当我转移到 1.5 以利用 IEvent 功能时，突然我无法编译，因为 wicket java 页面看不到我的服务层的包。我的服务层是在 groovy 2.0.0 中构建的，但我怀疑这是否是问题所在。我一定遗漏了一些明显的东西。以下是我的依赖项：其中 wicket 版本为 1.5.7

```
 <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-core</artifactId>
        <version>${wicket.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-extensions</artifactId>
        <version>${wicket.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-spring</artifactId>
        <version>${wicket.version}</version>
    </dependency>
    <dependency>
        <groupId>org.apache.wicket</groupId>
        <artifactId>wicket-ioc</artifactId>
        <version>${wicket.version}</version>
    </dependency> 
```

我的进口很好……进口

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:29:54.040

谢谢你的帮助 Don，但事实证明我已经对我的 pom 文件进行了更改，我`<goal>generateStubs</goal> <goal>generateTestStubs</goal>` 从我的 gmaven 插件执行中删除了该文件。问题没有浮出水面，因为我没有对我的 groovy 代码进行更改，然后当我进行更改时，它根本没有编译 groovy 代码，这就是导致缺少 groovy 包的原因。它恰好与我的检票口版本更改相吻合。

# ruby-on-rails - NoMethodError in RevisionsController#new /undefined method `[]' for nil:NilClass

> ID：11918533
> 
> 赞同：0
> 
> 时间：2012-08-11T23:37:18.167
> 
> 标签：ruby-on-rails, ruby

我正在尝试使用 rails 3 创建一个 WIKI 页面。我正在关注[http://garrickvanburen.com/archive/how-to-build-a-wiki-with-ruby-on-rails-part-1/的教程](http://garrickvanburen.com/archive/how-to-build-a-wiki-with-ruby-on-rails-part-1/)

我相信他的教程在 rails 2 中，所以我不得不改变编码。我在第 6 节，并在 app/views/revisions/new.html.erb 中输入了编码。一旦我在 localhost/revisions/new 中加载服务器，我得到以下错误 -

RevisionsController 中的 NoMethodError#new

nil:NilClass 的未定义方法“[]”

Rails.root：/home/whitey7/wiki 应用程序跟踪 | 框架跟踪 | 全跟踪

app/controllers/revisions_controller.rb:30:in `new'

当我拉起 revisions_controller 文件并查看第 30 行时，根据教程中的内容，它似乎正确或正确。其他一切似乎都很好，但这个。我似乎找不到答案或如何解决这个问题。任何帮助或一些指导将不胜感激。代码在 revisions_controller 文件中列出的代码下方。谢谢大家！！

```
 # GET /revisions/new
  # GET /revisions/new.json

def new
    @revision = Revision.new

    @revision.update_attribute('person_id', 
      Person.find_or_create_by_name(params[:person][:name]).id) **#Inputed from Tutorial.**

    respond_to do |format|
      format.html # new.html.erb
      format.json { render json: @revision }
    end
  end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:42:18.280

params[:person] 未设置。如果您只是想避免这种情况下的错误，请更改为：

```
unless params[:person].nil?
  @revision.update_attribute('person_id', 
    Person.find_or_create_by_name(params[:person][:name]).id)
end 
```

# c# - 设置 DataGridView 的选定行的问题：与 AutoResizeRows 冲突

> ID：11918544
> 
> 赞同：0
> 
> 时间：2012-08-11T23:38:49.947
> 
> 标签：c#, winforms, datagridview

我在 WinForms 中有一个 DataGridView。我正在使用以下方式以编程方式设置选定的行：

```
int index = CompoundListSource.Find("ID", previousAzeotrope.Compound1.ID);
CompoundListSource.Position = index; 
```

对于上下文：

```
BindingSource CompoundListSource = new BindingSource();
CompoundListSource.DataSource = [A DataTable]; 
```

选择工作正常。但是，我的 DataGridView 相当大，所以我让它通过监听它的 Scroll 事件来计算行高。当 DataGridView 滚动时，我调用：

```
GridView.AutoResizeRows(DataGridViewAutoSizeRowsMode.DisplayedCellsExceptHeaders) 
```

由于这种调整大小，所选行通常不再在显示的行中。

这不是一个严重的问题，但它是一个麻烦。这里有人知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:54:22.103

您可以设置 DataGridView`CurrentCell`以确保特定单元格在视图中：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentcell.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridview.currentcell.aspx)

您还可以设置：

```
DataGridView.FirstDisplayedScrollingRowIndex = <row index>; 
```

但是，这可能在滚动处理程序中不起作用，因为它实际上会引发滚动事件！我会让他们两个都试一试。

# php - 有没有办法在没有 $this 的情况下在类中使用类函数 ->

> ID：11918545
> 
> 赞同：1
> 
> 时间：2012-08-11T23:39:23.473
> 
> 标签：php, class

我想知道，是否有办法在另一个类函数中使用一个类函数而不使用 using `$this->`，例如：

```
class Example {
    public function sayhi() {
        echo "HI";
    }

    public function hi() {
        sayhi();
    }
} 
```

像这样的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-11T23:41:09.600

不，不是。PHP 知道函数，因此无法区分`sayhi()`是函数还是方法。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-11T23:56:16.860

你可以这样做

```
<?php

class test {

  public function hi() {

    self::say();
  }

  private function say() {

    echo 'hi';
  }
}

$t = new test();
$t->hi();
?> 
```

所以是的，有一种方法可以避免 $this，但我不推荐它。

# php - phpmailer 从单选按钮发送文件

> ID：11918549
> 
> 赞同：-2
> 
> 时间：2012-08-11T23:39:58.407
> 
> 标签：php, phpmailer

[查看和选择目录中的文件](http://i115.photobucket.com/albums/n282/CApO_MAfiOsO/a-1.png)

上图显示了目录中上传文件的列表。我可以查看和选择目录中的文件（使用 php），但我不知道如何将其作为附件发送/通过电子邮件发送（通过 phpmailer）。

有可能这样做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:43:50.417

列出文件并选择其中一个后，您将获得该文件的路径。获得路径后，您可以按照[此处](http://zainal.wordpress.com/2007/01/10/sending-email-attachments-in-php-using-phpmailer-class/)的说明将其作为附件发送。

**阅读原始问题的评论后进行编辑：**您选择了文件名“text.txt”，并且您知道这些文件在服务器中的位置。执行以下操作：

```
$filename = "text.txt";
$path = "/foo/bar/baz" . $filename;
send_email_with_attachment($path); 
```

send_email_with_attachment 是您需要自己创建的功能，使用我提供的链接上的信息。

# javascript - 通用异步回调函数

> ID：11918550
> 
> 赞同：0
> 
> 时间：2012-08-11T23:40:00.460
> 
> 标签：javascript

```
 this.init = function (onupgradeneeded, onsuccess) {

        var openRequest = indexedDB.open(dbName);

        openRequest.onupgradeneeded = function (e) {

            db = e.target.result;

            if (!db.objectStoreNames.contains(objectStoreName)) {

                console.log('Creating the ' + objectStoreName + ' objectstore');

                db.createObjectStore(objectStoreName, { keyPath: "id", autoIncrement: true });

            }

        };

        openRequest.onsuccess = function (e) {

            db = e.target.result;

            db.onerror = function (event) {
                // Generic error handler for all errors targeted at this database requests
                console.log("Database error: " + event.target.errorCode);
            };
        };

    }; 
```

调用者：

```
var idb = new Demo.IndexedDB();
idb.init(); 
```

`openRequest.onupgradeneeded`当 init 函数运行时，它要么以要么结束`openRequest.onsuccess`。

我想知道的是是否有可能创建一个在两个函数中都被调用的通用回调函数。因此，无论运行两个函数中的哪一个，我都可以通过使用知道它们何时完成

```
idb.init(function(){
    //onupgradeneeded or onsuccess completed
}); 
```

希望你明白这个想法，否则会详细说明。

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T23:47:42.233

只需传入一个回调函数并在两种情况下调用一个回调：

```
this.init = function (onFinish) {

    var openRequest = indexedDB.open(dbName);

    openRequest.onupgradeneeded = function (e) {

        db = e.target.result;

        if (!db.objectStoreNames.contains(objectStoreName)) {

            console.log('Creating the ' + objectStoreName + ' objectstore');

            db.createObjectStore(objectStoreName, { keyPath: "id", autoIncrement: true });

        }
        onFinish();

    };

    openRequest.onsuccess = function (e) {

        db = e.target.result;

        db.onerror = function (event) {
            // Generic error handler for all errors targeted at this database requests
            console.log("Database error: " + event.target.errorCode);
        };
        onFinish();
    };

}; 
```

# c# - 如何在 C# 中动态创建枚举？

> ID：11918551
> 
> 赞同：0
> 
> 时间：2012-08-11T23:40:34.377
> 
> 标签：c#, visual-studio-2010, enums

有没有一种方法可以用来动态创建枚举？我正在尝试获取数据库中表的名称并创建一个枚举列表，我将在 Visual Studio 中编码时使用该列表。甚至可能吗？

我想我可以得到数据库中表的名称，但后面的部分，我不知道。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:43:17.150

您无法在运行时轻松创建枚举。

但是，您可以使用[T4 模板](http://www.hanselman.com/blog/T4TextTemplateTransformationToolkitCodeGenerationBestKeptVisualStudioSecret.aspx)来查询数据库并创建可以编译的代码文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:44:18.730

没有办法做到这一点，您可以手动创建一个代表数据库的枚举，

如果你使用一个可能会更好`Dictionary<int, string>`

# clojure - 如果需要，clojure 可以评估一系列混合的 arity 函数并返回部分函数吗？

> ID：11918554
> 
> 赞同：5
> 
> 时间：2012-08-11T23:41:06.673
> 
> 标签：clojure, partial, lambda, combinators, arity

假设您具有以下三个函数，即 arity 1、2 和 3：

```
(defn I [x] x)
(defn K [x y] x)
(defn S [x y z] (x z (y z))) 
```

clojure 是否有评估函数或习语来评估：

```
(I K S I I) as (I (K (S (I (I))))) 
```

返回 arity 2 的偏函数？

我正在考虑创建一个宏，它可以采用上面的简单函数定义并将它们扩展为可以返回部分结果的多参数函数。如果已经有内置或惯用的方法来完成此操作，我不想创建宏。

以下是扩展宏对上述功能的要求：

```
(defn I
  ([x] I x)
  ([x & more] (apply (I x) more)))

(defn K
  ([x] (partial K x))
  ([x y] x)
  ([x y & more] (apply (K x y) more)))

(defn S
  ([x] (partial S x))
  ([x y] (partial S x y))
  ([x y z] (x z (y z)))
  ([x y z & more] (apply (S x y z) more))) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T00:55:33.173

我不确定我是否完全理解您要做什么，但是该[`comp`](http://clojuredocs.org/clojure_core/clojure.core/comp)功能对于执行您似乎在谈论的这种“功能链接”很有用。例如：

```
user> ((comp vec rest list) 1 2 3 4 5)
=> [2 3 4 5] 
```

这相当于：

```
user> (vec (rest (list 1 2 3 4 5)))
=> [2 3 4 5] 
```

在您的情况下，如果您有 list `(I K S I I)`，并且您想将其评估为`(I (K (S (I (I)))))`，我会使用`(reduce comp ...)`，但您也可以使用`(apply comp ...)`.

```
user> ((reduce comp [vec rest list]) 1 2 3 4 5)
=> [2 3 4 5]
user> ((apply comp [vec rest list]) 1 2 3 4 5)
=> [2 3 4 5] 
```

您可能还对[`->`](http://clojuredocs.org/clojure_core/clojure.core/-%3E)or[`->>`](http://clojuredocs.org/clojure_core/clojure.core/-%3E%3E)宏感兴趣。这些宏将它们的参数顺序嵌套到下一个参数中。宏将`->`嵌套到下一个表达式的第一个位置，而`->>`宏将嵌套到下一个表达式的最后一个位置。如果“下一件事”是一个函数，则两者的行为相同，并形成 的表达式`(function nested-things-so-far)`，然后继续。

真的，例子是最好的：

```
(-> 1 (+ 10) (- 100) inc)
;//Expands to...
(inc (- (+ 1 10) 100))
;//Evaluating in the REPL...
user> (-> 1 (+ 10) (- 100) inc)
=> -88

(->> 1 (+ 10) (- 100) inc)
;//Expands to...
(inc (- 100 (+ 10 1)))
;//Evaluating in the REPL...
user> (-> 1 (+ 10) (- 100) inc)
=> 90 
```

但是，您似乎更像是想做一些涉及自动柯里化的事情（尽管我认为我并不完全理解），为此我不知道任何预先存在的内置方式。

# scala - Play framework 2.0：在 Http.Context 中存储值

> ID：11918562
> 
> 赞同：4
> 
> 时间：2012-08-11T23:41:35.983
> 
> 标签：scala, playframework, httpcontext

我正在尝试在播放框架中的 scalaquery 中实现“基于请求”的会话。我使用 scalaquery 创建了一个会话，并尝试将其存储在当前的 http 上下文中，如下所示：

```
def withTransaction[A](bp: BodyParser[A])(f: Request[A] => Result): Action[A] = {
   Action(bp) {
     request =>
       val context = Http.Context.current()
       val session = createSession()
       session.conn.setAutoCommit(false)
       context.args.put("scalaquery.session", session)
       try {
         val result = f(request)
         session.conn.commit()
         result
       }
       catch {
         case t: Throwable =>
           session.conn.rollback()
           throw t
       }
       finally {
         session.close()
         context.args.remove("scalaquery.session")
       }
   }
} 
```

然后我将我的动作包装在我的控制器中，例如：

```
withTransaction(parse.anyContent) {
    Action {
       //code that produces a result here
    }
} 
```

但是，它在以下行中崩溃：

```
val context = Http.Context.current() 
[RuntimeException: There is no HTTP Context available from here.] 
```

那么，为什么上下文不可用？这段代码是由框架直接调用的，所以不应该在这段代码执行的时候设置上下文吗？还是我使用错误的方式访问上下文？

编辑：“会话”的类型为 org.scalaquery.session.Session。我想在 HttpContext 中设置它的原因是，包装的操作可以以“http 范围”的方式访问它，即每个请求单独存储它们的会话，但所有需要会话的服务都可以在公共中找到它每个请求分开的范围。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:16:48.827

我认为问题在于您将 Java API 与 Scala 控制器一起使用。`Http.Context`仅当您使用 Java 控制器时才设置。你考虑过使用[Scala Session API](http://www.playframework.org/documentation/2.0.2/ScalaSessionFlash)吗？

另外，另一个问题是，为什么需要将会话存储在上下文中？我看到你只是在最后删除它。如果您需要子操作能够访问会话，则可以将其传递到函数中。

我只是假设`session`是类型`Session`

```
def withTransaction[A](bp: BodyParser[A])(f: Session => Request[A] => Result): Action[A] = {
   Action(bp) {
     request =>
       val session = createSession()
       session.conn.setAutoCommit(false)
       try {
         val result = f(session)(request)
         session.conn.commit()
         result
       }
       catch {
         case t: Throwable =>
           session.conn.rollback()
           throw t
       }
       finally {
         session.close()
       }
   }
} 
```

你的子动作是

```
withTransaction(parse.anyContent) { session => request =>
    //code that produces a result here
} 
```

你不需要`Action`再把它包起来了，因为它已经被`withTransaction`

# mongodb - Mongo 使用 26GB 内存，是不是很糟糕？

> ID：11918563
> 
> 赞同：4
> 
> 时间：2012-08-11T23:41:40.367
> 
> 标签：mongodb

我最近试图对我的 mongodb 服务器进行基准测试，我猜它们有点过载，这是 serverStatus() 的结果：

```
SECONDARY> db.serverStatus().mem
{
    "bits" : 64,
    "resident" : 26197,
    "virtual" : 161106,
    "supported" : true,
    "mapped" : 79994,
    "mappedWithJournal" : 159988
} 
```

所以如果我理解正确的话，MongoDB 正在使用 26GB 的内存。如果我的服务器有 32GB，并且它只运行 mongoDb，那么获得一个新服务器并将我的数据分片是个好主意？？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T01:55:49.077

MongoDB 缓存的工作方式最终将使用任何可用的内存。当驻留部分与总内存发生冲突时，性能会显着下降，但这取决于您的数据访问模式。如果不是所有内容一直都在内存中，这通常没关系，但您希望为工作集留出空间。有关一般建议和详细信息，请参阅[工作集大小](http://www.mongodb.org/display/DOCS/Checking+Server+Memory+Usage#CheckingServerMemoryUsage-WorkingSetSize)和[serverStatus().mem 。](http://docs.mongodb.org/manual/reference/server-status/#server-status-memory)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-13T16:57:56.640

Joshua 所说的一切都有一个警告，你要始终确保启用了一些交换。否则您可能会遇到 OOM Killer 问题，请参见此处：

[http://www.mongodb.org/display/DOCS/The+Linux+Out+of+Memory+OOM+Killer](http://www.mongodb.org/display/DOCS/The+Linux+Out+of+Memory+OOM+Killer)

基本上，拥有足够数据的繁忙 MongoDB 将趋向于最大内存使用率，然后保持在那里。这本身并不表示问题，并且通常正是应该发生的事情。您应该[寻找](https://serverfault.com/questions/408100/mongodb-and-datasets-that-dont-fit-in-ram-no-matter-how-hard-you-shove/408182#408182) [其他地方](https://serverfault.com/questions/413315/diagnosing-mongodb-major-faulting-and-erratic-behavior/413457#413457)来[诊断](https://dba.stackexchange.com/questions/21026/mongodb-optimization-on-high-data/21048#21048)任何性能问题的根源。

# ruby-on-rails - 如果条件为真，则显示文本

> ID：11918564
> 
> 赞同：0
> 
> 时间：2012-08-11T23:41:45.857
> 
> 标签：ruby-on-rails, ruby, if-statement

我试图让文本“标签：”仅在标签存在时才显示，所以我在视图中执行了以下操作：

```
<% if @tags.present? %>  
    <%= puts "Tags:"%> 
    <% end %> 
```

哪个不起作用...我是初学者，不知道我做错了什么。

谢谢

编辑：

一个标签属于一篇文章。

标签在我的文章模型中定义为：

```
def tag_tokens
    self.tags.collect{|t| t.name}.join(", ")
  end

  def tag_tokens=(tags_delimited)
    tags_delimited.split(",").each do |string|
            self.article_tags.build(:tag => Tag.find_or_create_by_name(string.strip.downcase))
    end     
  end 
```

我正在努力做到这一点，当一篇文章有​​标签时，“标签：”这个词会出现在标签列表之前，而当一篇文章没有任何标签时，“标签：”这个词不会出现.

现在`<% if @tags.nil %>`只是导致“标签：”出现在每个帖子上。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T00:02:17.407

您不要在视图中使用 puts —— puts 会导致文本进入您的控制台。这将解决它：

```
<% if @tags.present? %>  
    <%= "Tags:"%> 
<% end %> 
```

您也不需要使用 .present？听它的声音。如果只想查看是否已设置，则应使用 .nil？反而。您也可以将其压缩为一行。

```
<%= "Tags:" unless @tags.nil? %> 
```

更新：看起来 tag_tokens 方法在 getter 和 setter 中都被破坏了。从外观上看，您的 setter 实际上并没有保存任何东西（.build 返回一个新对象，您需要保存它）。您的吸气剂也在引用标签，而不是 article_tags ，这是您试图通过其外观保存的内容。将其更改为此应该可以保存：

```
self.article_tags.build(:tag => Tag.find_or_create_by_name(string.strip.downcase)).save 
```

这是假设您有一条类似于以下内容的行：

```
has_many :article_tags
has_many :tags, through: :article_tags 
```

我假设你是根据你的二传手做的。

我假设这是一个多对多的关系，但看起来你正在使用 has_many :through，而不是 has_and_belongs_to_many。是否有一个原因？如果你使用 has_and_belongs_to_many 你应该可以这样做：

```
has_and_belongs_to_many :tags

def tag_tokens=(tags_delimited)
  self.tags = []
  tags_delimited.split(",").each do |string|
    self.tags << Tag.find_or_create_by_name(name: string)
  end
end 
```

如果你这样做，你根本就不应该有一个 ArticleTags 模型，你应该有一个没有主列的名为 article_tags 的表，以及一个 article_id 和 tag_id 列。

更新 2：

您没有将 @tags 设置为任何内容，这就是为什么它总是为零的原因。@tags 是一个变量，需要设置一个值，就像在控制器的 index 方法中设置 @articles 一样。无论如何，由于这是针对索引方法的，因此无论如何您都不希望它成为单个实例变量。您应该访问该特定实例的 tag_tokens 方法。app/views/articles/index.html.erb 第 53-55 行应更改为：

```
<%= "Tags:" if article.tags.any? %> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T10:20:38.043

通过 sgrif 检查答案，它包含很多优点。仅回答您的主要问题：

在 erb（Rails 中用于视图模板的“语言”）中，您可以使用`<%= ... %>`将一些 Ruby 代码的结果插入到视图模板中。

当你在做：

```
<%= puts "Tags:" %> 
```

发生以下情况：

1.  Ruby 评估/执行您的代码：“标签：”打印到 STDOUT 并`nil`返回，因为对 alsways 的调用`puts`返回`nil`
2.  erb 将结果插入到您的模板中，结果为`nil`，显示为“无”

要修复它，只需使用：

```
<% if @tags.present? %>  
  <%= "Tags:"%> 
<% end %> 
```

或者，因为你没有在 Ruby 中做任何事情，你可以使用：

```
<% if @tags.present? %>  
  Tags: 
<% end %> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T23:48:59.237

@tags 被定义为什么？你想在哪里检查它是否存在？

你想要`if @tags.nil?`

# bash - 附加文件内容作为 unix shell 命令的参数

> ID：11918580
> 
> 赞同：2
> 
> 时间：2012-08-11T23:45:13.760
> 
> 标签：bash, shell, unix

我正在寻找一个 unix shell 命令来附加文件的内容作为另一个 shell 命令的参数。例如：

```
command << commandArguments.txt 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T00:02:07.803

xargs 是专门为此构建的：

```
cat commandArguments.txt | xargs mycommand 
```

如果文件中有多行，则可以使用`xargs -L1 -P10`一次并行运行十个命令副本。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-11T23:52:50.873

[xargs](http://linux.die.net/man/1/xargs)采用其标准并将其格式化为 shell 命令的位置参数。它最初旨在处理较短的命令行限制，但它也可用于其他目的。

例如，在最后一分钟内，我使用它并行连接到 10 个服务器并检查它们的正常运行时间：

```
echo server{1..10} | tr ' ' '\n' | xargs -n 1 -P 50 -I ^ ssh ^ uptime 
```

此命令管道的一些有趣方面：

*   要连接的服务器的名称取自传入管道
*   需要将`tr`每个名称放在自己的行中。这是因为`xargs`需要以行分隔的输入
*   该`-n`选项控制每次命令调用使用多少传入行。 表示为每条传入线路`-n 1`创建一个新进程。`ssh`
*   默认情况下，参数附加到命令的末尾。使用`-I`，可以指定一个标记 ( `^`)，该标记将替换为参数。
*   控制同时`-P`运行多少子进程，极大地拓宽了有趣的可能性空间。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-11T23:46:59.477

```
command `cat commandArguments.txt` 
```

使用反引号将使用封闭命令的结果作为外部命令中的文字

# sql-server - 我可以在 1gb 数据库中拥有多少条记录/表？

> ID：11918585
> 
> 赞同：13
> 
> 时间：2012-08-11T23:46:31.720
> 
> 标签：sql-server, record

我正在考虑购买一个共享主机提供商，然后提供一个 1GB 的 MSSQL 数据库和这个包。

**这可能不是一门精确的科学**，但是我可以在 1GB 的数据库中保存多少记录/表？我将保存纯文本（*意思是：nvarchar、varchar、int、bool*）而不是二进制文件/blob。

对于这个问题，想象一下大约 20 个表，每个表有 9 个字段。每个字段都不为空。

在我需要升级到更昂贵的套餐之前，有没有办法衡量和预测这会让我坚持多久？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T00:01:18.940

没有真正的答案可以告诉您“记录和/或表”的“设定数量”是您可以在 1 GB MSSQL 数据库中保存的最大值，或者您何时达到该值。估算时有几个因素需要考虑：

1.  你认为平均排会占用多少？
2.  你会使用固定的还是可变的？
3.  添加和删​​除内容的频率如何？

最后，您正在查看（例如）最大行数，可能是 < 400 000 行或 > 3 500 000，这一切都归结为您在一行中放入的内容以及您使用的类型. 一旦您决定了单行将是什么（给予或接受）以及您希望添加多少行/频率，您就可以确定在不升级到另一个数据库包的情况下您能够执行多长时间。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-11T23:55:29.227

这是一个很好的问题。这取决于很多事情，表的数量，行，里面有什么等等。

编辑：好的，您进行了编辑。“对于这个问题，想象一下大约 20 个表，每个表有 9 个字段。每个字段都不为空。” 1 个数据库，20 个表，每个 9 个字段，我们说 varchar (16)。

我会说总共大约 300.000 (300K) 行，但这取决于数据库结构的类型（innoDB 或其他类型）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-11T23:52:19.700

我认为 EJ Brennan 是在讽刺——这有点像“一根绳子有多长？”

这取决于您的记录有多大，以及您的模式是否为每个字符串分配固定或可变的内存量。

# javascript - 导轨和骨干一起工作

> ID：11918586
> 
> 赞同：35
> 
> 时间：2012-08-11T23:46:54.003
> 
> 标签：javascript, ruby-on-rails, ruby, model-view-controller, backbone.js

我刚刚开始研究 MVC 结构，首先我研究了它是如何`backbone.js`工作的，现在我刚刚完成了 Code School 的[rails for zombies](http://railsforzombies.org/)。我知道我没有深入研究任何这些，但我有一个问题要开始。

**你可以一起使用这些库吗？**

我已经学会了如何在两者中创建`models`，`views`等等，但是在创建真正的应用程序时，您是否同时使用主干和导轨？

如果是这样的话...

**您何时使用`backbone.js`模型与`rails`模型？**

也许我只是超越了自己，需要继续练习和做教程，但我似乎无法直接找到任何东西。

谢谢！

* * *

## 回答 #1

> 赞同：74
> 
> 时间：2012-08-12T13:35:30.400

在其他任何事情之前，我建议先看看thoughtbot 的[Backbone.js on Rails](https://learn.thoughtbot.com/products/1-backbone-js-on-rails)书，这是一个很好的起点，尽管针对的是中高级读者。我买这本书时已经使用过 Rails，但作为一个完全的主干.js 初学者，它对我很有帮助。

除此之外，结合这些框架还有一些基本问题，这些问题超出了本书和其他书籍所涵盖的细节。以下是我建议您考虑的一些事情，来自我自己的经验，将 RoR 和主干.js 配对。这是一个很长的答案，与您的问题的细节有些偏离，但我希望它可以帮助您从“大局”的角度理解您面临的问题。

## Rails：Web 框架与 API

在 Rails 应用程序上使用backbone.js 时，您面临的第一件事是如何处理视图，但这实际上只是更深层次问题的表面。问题的核心是创建 RESTful Web 服务的意义所在。

Rails 开箱即用，鼓励其用户创建 RESTful 服务，方法是根据一组`routes.rb`通过标准 HTTP 操作在统一 URI（在您的文件中定义）访问的资源来构建路由。因此，如果您有`Post`模型，则可以：

*   `GET`通过发送请求获取所有帖子 `/posts`
*   通过向 发送`GET`请求`/posts/new`、填写表格并将其（`POST`请求）发送至`/posts`
*   `123`通过向 发送`GET`请求`/posts/123/edit`、填写表格并将其发送（`PUT`请求）来更新带有 id 的帖子`posts/123`
*   `123`通过发送`DELETE`请求来销毁具有 id 的帖子`/posts/123`

关于 Rails 的这一方面要记住的关键是它基本上是*无状态*的：无论我以前做什么，我都可以`Post`通过向正确的 URI 发送一个`POST`带有有效表单数据的请求来创建一个新的，比如`/posts`. 当然有一些警告：我可能需要登录（有一个会话 cookie 来识别我），但本质上 Rails 并不真正关心我在发送该请求之前在做什么。我可以通过更新另一个帖子来跟进它，或者通过向我可以使用的任何其他资源发送有效的操作。

Rails 设计的这一方面使得将（Javascript-light）Rails Web 应用程序转换为 API 相对容易：资源将相似或相同，Web 框架返回 HTML 页面，而 API（通常）返回数据JSON 或 XML 格式。

## Backbone.js：一个新的有状态层

Backbone 也基于 RESTful 资源。每当您创建、更新或销毁一个backbone.js 模型时，您都可以通过发送到假定上述类型的RESTful 架构的URI 的标准HTTP 操作来执行此操作。这使其非常适合与 RoR 等 RESTful 服务集成。

但这里有一点需要强调：backbone.js**作为 API**与 Rails 无缝集成。也就是说，如果你去掉 HTML 视图，*只使用 Rails*来提供 RESTful 资源、与数据库集成、执行会话管理等，那么它可以很好地与骨干网为客户端提供的结构集成。代码。许多人认为[以这种方式使用 Rails 并没有错](http://blog.alexmaccaw.com/rails-is-just-and-api-and-that-s-ok)，我认为在很多方面他们是正确的。

复杂性来自于如何处理我们刚刚丢弃的 Rails 的其他部分：视图及其代表的内容。

## 有状态的人，无状态的机器

这实际上比最初看起来更重要。HTML 视图表示人类用于访问您的服务提供的 RESTful 资源的无状态接口。取消它们会给您留下两个访问点：

1.  对于人类：backbone.js 层提供的丰富的客户端接口（有状态）
2.  对于机器：rails层提供的面向资源的RESTful API（无状态）

请注意，人类不再有无状态（RESTful）接口。相比之下，在带有 API 的传统 Rails 应用程序中，我们有一些更接近于这个的东西：

1.  人类的 HTML 资源（无状态）
2.  机器的 JSON/XML 资源 (API)（无状态）

后两个用于访问资源的接口在本质上比前两个更接近*。*以 rails 的[respond_with](http://apidock.com/rails/ActionController/MimeResponds/respond_with)为例，它利用相似性将各种 RESTful 响应程序包装在一个统一的方法中。

## 一起工作

我知道，这一切似乎都非常抽象而且无关紧要。为了使它更具体，请考虑以下问题，它回到您关于让 rails 和主干.js 一起工作的问题。在这个问题中，您希望：

*   使用backbone.js 创建具有丰富客户端体验的Web 服务，并将rails 作为JSON 格式的后端服务资源。
*   用于[`pushState`](http://zachlendon.github.com/blog/2012/02/21/backbone-dot-js-from-hashbangs-to-pushstate/)为应用程序中的每个页面提供一个 URL（例如`/posts/123`），该 URL 可以直接访问（通过在浏览器栏中输入）。
*   对于这些 URL 中的每一个，还为没有 javascript 的客户端提供 HTML 页面。

这些对于现代 Web 服务的需求并不罕见，但它们带来了复杂的挑战。长话短说，您现在必须创建*两个*“以人为本”的层：

1.  有状态的客户端界面（backbone.js 模板和视图）
2.  无状态 HTML 资源（Rails HTML 视图）

实际这样做的复杂性导致现在许多人放弃这两者中的后者，而只提供丰富的客户端界面。你决定做什么取决于你的目标和你想要实现的目标，但值得仔细考虑这个问题。

作为另一个可能的参考，我建议看看 O'Reilly 的[RESTful Web Services](http://shop.oreilly.com/product/9780596529260.do)。在一个关于 Rails 和 Backbone.js 的问题中推荐一本关于 REST 的书可能看起来很奇怪，但实际上我认为这是将这些非常不同的框架结合在一起的关键部分，更全面地理解它将帮助你利用两者的强项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T00:10:07.033

是的，您可以同时使用两者。Backbone 用于在客户端浏览器中存储和操作数据。它通常需要一个服务器与之交谈并**从中**获取数据。这就是 Rails 的用武之地。您可以拥有一个没有繁重客户端代码的 Web 应用程序。Backbone 用于构建感觉更像应用程序的网站——想想 Gmail 或 Pandora。

我建议先学习 Rails。一旦您可以根据需要加载静态页面并设置样式，那么了解 Backbone 的位置将更有意义

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T00:14:05.097

我使用 Rails 作为后端服务器来为一个相当大的网站提供服务，其中包括一些单页应用程序（内置主干）。

我会建议`backbone-on-rails`宝石。这个想法是您的 Rails 服务器将在您的一个视图中将主干应用程序作为脚本标记提供服务。您将主干应用程序本身保存在 rails`app/assets`文件夹中。

Backbone 了解 rails 路由约定，您只需为其提供一个 json api 的路径，rails 几乎可以为您生成`rails generate resource`.

除了模型之间的同步之外，您的主干应用程序和 Rails 应用程序是相当独立的。Backbone 和 Rails 没有完全相同的 MVC 模型，但让它们合作很容易。

# c# - C# - 使用“滞后”调整 ListView 的大小

> ID：11918590
> 
> 赞同：0
> 
> 时间：2012-08-11T23:47:44.900
> 
> 标签：c#, listview, resize, lag, blink

我正在尝试均匀调整 a 的所有列的大小`ListView`，它应该可以正常工作，但是我制作的代码使屏幕闪烁和闪烁太多......我想知道我可以对代码进行什么修复以使其顺利运行？这是代码：

```
using System;
using System.Collections.Generic;
using System.Collections;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Linq;
using System.Text;
using System.Windows.Forms;
using System.IO;
using System.Runtime.InteropServices;

namespace Test_ListViews
{
    public partial class Form1 : Form
    {
        Double[] pesos;
        private bool resizing = false;
        private bool limpando = false; 

        public Form1()
        {
            InitializeComponent();

            int i = 0;

            float dx = 96;

            Graphics g = this.CreateGraphics();
            try
            {
                dx = g.DpiX;
            }
            finally
            {
                g.Dispose();
            }

            pesos = new Double[listView1.Columns.Count]; // usado para o resize das colunas da ListView ser proporcional.
            for (i = 0; i < listView1.Columns.Count; i++)
                pesos[i] = ((Double)listView1.Columns[i].Width * dx) / (listView1.Width * 96);
            _listView1_Resize();

            listView1.FullRowSelect = true;

            this.listView1.Resize += new System.EventHandler(this.listView1_Resize);
            this.listView1.ColumnWidthChanged += new System.Windows.Forms.ColumnWidthChangedEventHandler(this.listView1_ColumnWidthChanged);   
        }

        private void bntFill_Click(object sender, EventArgs e)
        {
            int i = 0;

            for (i = 0; i < 5; i++)
            {
                ListViewItem item = new ListViewItem("Test 1");
                item.SubItems.Add("Test 2");
                item.SubItems.Add("Test 3");
                item.SubItems.Add("Test 4");
                item.SubItems.Add("Test 5");
                item.SubItems.Add("Test 6");
                item.SubItems.Add("Test 7");
                item.SubItems.Add("Test 8");
                item.SubItems.Add("Test 9");
                listView1.Items.Add(item);
            }            

            SetWindowTheme(listView1.Handle, "Explorer", null);
        }

        [DllImport("uxtheme.dll")]
        public static extern int SetWindowTheme([In] IntPtr hwnd, [In, MarshalAs(UnmanagedType.LPWStr)] string pszSubAppName, [In, MarshalAs(UnmanagedType.LPWStr)] string pszSubIdList);

        private void btnDelete_Click(object sender, EventArgs e)
        {
            ArrayList list = new ArrayList();

            foreach(ListViewItem item in listView1.SelectedItems )
            {
                list.Add(item);
            }

            foreach (ListViewItem item in list)
            {
                listView1.Items.Remove(item);
            }
        }

        private void listView1_Resize(object sender, System.EventArgs e)
        {
            _listView1_Resize();
        }
        private void _listView1_Resize()
        {
            if (resizing == false && pesos != null)
            {
                resizing = true;

                Int32 largura = listView1.Width;
                int i = 0;

                for (i = 0; i < listView1.Columns.Count; i++)
                {
                    listView1.Columns[i].Width = Convert.ToInt32(pesos[i] * largura);
                }

                if (listView1.Controls.Count > 0)
                {
                    Int32 x = listView1.Items[0].SubItems[listView1.Items[0].SubItems.Count - 1].Bounds.Location.X + 3;//pegando a referencia da ultima coluna.

                    for (i = 0; i < listView1.Controls.Count; i++)
                    {
                        listView1.Controls[i].Location = new System.Drawing.Point(x, listView1.Controls[i].Location.Y);
                        listView1.Controls[i].Width = listView1.Columns[listView1.Columns.Count - 1].Width - 9;
                    }
                }

                if (listView1.Items.Count > 8)
                {
                    listView1.Columns[listView1.Columns.Count - 1].Width -= 10;
                }

                listView1.Scrollable = false;
                listView1.Scrollable = true;

                resizing = false;
            }

            SetWindowTheme(listView1.Handle, "Explorer", null);

        }

        private void listView1_ColumnWidthChanged(object sender, ColumnWidthChangedEventArgs e)
        {
            _listView1_Resize();
            //int i = 0;
            //for (i = 0; i < listView1.Columns.Count; i++)
            //{
            //    if (listView1.Columns[i].Width < 20)
            //        listView1.Columns[i].Width = 20;
            //} 
        }

    }     
} 
```

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-11T23:53:11.357

在调整大小操作调用开始时`listView1.BeginUpdate()`，然后`listView1.EndUpdate()`在完成时调用

这样，每次对其或其任何子项进行更改时，窗口都不会重绘控件，并且在您调用 EndUpdate() 时将全部重绘它们

# ios - 音频单元：使用声音输出作为输入源

> ID：11918591
> 
> 赞同：3
> 
> 时间：2012-08-11T23:48:11.000
> 
> 标签：ios, core-audio, remoteio

我想处理来自 iOS 设备的立体声输出，无论是什么应用程序导致它们并实时可视化它。是否可以使用通用输出设备（或其他任何设备）来获取当前正在播放的音频数据？也许作为 remoteIO 单元的输入？

换句话说：我想做[aurioTouch2所做的](http://developer.apple.com/library/ios/#samplecode/aurioTouch2/Introduction/Intro.html)*事情*（仅限 FFT），但我不想使用麦克风作为输入源，而是想处理在给定时间从扬声器发出的所有内容。

亲切的问候

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-13T00:46:13.183

如果您自己的应用程序正在使用 RemoteIO 音频单元播放，您可以捕获该内容。您无法使用许多其他音频 API 捕获您的应用正在播放的音频。iOS 安全沙箱将阻止您的应用捕获任何其他应用正在播放的音频（除非该应用通过应用间音频 API 或同等功能显式导出音频）。

# mongodb - MongoDB map reduce函数语法

> ID：11918595
> 
> 赞同：2
> 
> 时间：2012-08-11T23:48:42.167
> 
> 标签：mongodb, mapreduce

好吧，我正在尝试将此 sql 查询翻译为 map reduce

```
select
    o_orderpriority, 
    count(*) as order_count
from 
    orders
where 
    o_orderdate >= date '1993-07-01'
    and o_orderdate < date '1993-07-01' + interval '3' month
    and exists (
        select 
        *
        from 
        lineitem
        where 
        l_orderkey = o_orderkey
        and l_commitdate < l_receiptdate
    )
group by 
    o_orderpriority
order by 
    o_orderpriority; 
```

我尝试了以下地图减少功能

```
 db.runCommand({
    mapreduce: "orders",
    query: {
        o_orderdate: {'$gte': new Date("July 01, 1993")},
        o_orderdate: {'$lt': new Date("Oct 01, 1993")}
    },
    map: function Map() {
            for(var i in this.o_lineitem) {
                if( this.o_lineitem[i].l_commitdate < this.o_lineitem[i].l_receiptdate) {
                    var o_orderpriority = this.o_lineitem[i].o_orderpriority;
                    emit( o_orderpriority, {count: 1} );
                }
            }
        },
    reduce: function(key, values) {
                var count= 0;
                for (var i = 0; i < values.length; i++) {
                    count+= values[i];
                }
                return count;
            },
    out: 'query004'
}); 
```

当 ai 运行时，我会收到以下警报

*Sat Aug 11 20:44:32 SyntaxError: missing ) after condition (shell):9*

对我来说，没有 ) 丢失，是吗？

我做了@Stenie指出的更正，但现在ai有以下问题

```
{
        "assertion" : "value too large to reduce",
        "assertionCode" : 13070,
        "errmsg" : "db assertion failure",
        "ok" : 0
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T21:19:19.087

问题是你的发射和你的减少函数不返回相同的东西。

您的 map 函数发出值：

```
{count: 1} 
```

这意味着您的 reduce 必须返回相同的格式。

您在 reduce 中返回一个简单的值：

```
return count; 
```

您可以将您的 emit 更改为仅发出 1 而不是 JSON 文档，然后您不必更改您的 reduce，否则更改您的 reduce 以返回 JSON 文档 {count: X}，其中 X 是计算的计数。

仅供参考，这导致错误“值太大而无法减少”的原因是，一旦你像这样混合你的类型，'+' 运算符开始连接你的值而不是添加它们，最终它变得太大。要了解如何调试它，我推荐 [MapReduce 故障排除](http://www.mongodb.org/display/DOCS/Troubleshooting+MapReduce)页面

# ruby-on-rails - 搜索流行的 Rails 插件的有用网站

> ID：11918600
> 
> 赞同：0
> 
> 时间：2012-08-11T23:49:30.090
> 
> 标签：ruby-on-rails, plugins

我习惯于使用acts_as_paranoid 进行逻辑删除。但它不支持最新的 Rails 版本。我想为它搜索流行的插件。并且不仅用于逻辑删除，还用于用户认证（Devise）、文件上传（回形针）等。

有人知道搜索流行的 Rails 插件的有用网站吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-11T23:53:09.540

我认为这就是您要寻找的东西[https://www.ruby-toolbox.com/](https://www.ruby-toolbox.com/)

# vim - 在 VIM 上到达某个地点的最有效方法是什么？

> ID：11918601
> 
> 赞同：6
> 
> 时间：2012-08-11T23:49:36.550
> 
> 标签：vim, navigation, keyboard-shortcuts

假设您在第 640 行，并在第 671 行注意到以下内容：

```
if (jumps_over(quick_fox[brown],the_lazy_dog)) the_lazy_dog.bark(); 
```

导航到“吠叫”的最关键有效方式是什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T00:28:16.633

**这是对 Vim 的一个常见误解：Vim 的设计目的不是高效。**

Vim 旨在使用可重复的、通常复杂的组合中的小构建块来实现您的目标。这不是一个固有的高效过程，但对于复杂任务的子集，它很有用。例如，[motion][macro] 或 [count][command]，这些都是以链形式组合在一起的小型构建块。单击屏幕是最有效的动作，但在您必须执行数千次的大型文本操作任务的子集中可能没有用。

以下是我记得的所有我通常使用的方式，你可以看到这些都不是对运动的有效使用，也不是我的认知处理能力。（IDE 通过执行下面列出的所有工作来有效地做事）。

一旦上线，我会亲自使用 `f``.``l`，因为快速扫描显示这是一个独特的角色。或者`T``.`如果你过去了。如果最终不止一个`.`，我会用它`;`来重复查找，直到找到它。或者，混搭`w`或`W`直到我接近为止，因为`w`在 Vim 中尝试猜测涉及标点符号时小写字母会带你到哪里基本上是不可能的。

如果你有`:set relativenumber`，你可以看到它有多少行，然后输入 n`j`去那里，然后输入`f``.`跳到它旁边

如果你有`:set number`你可以输入（因为你知道行号）`671``G`（或`:``671``Enter`）`f``.`

如果你用标记了那条线，说你可以用或确切的字符`m``a`跳到那一行（但大多数键盘都无用：（如果它是随机的需要修复的，你可能不会使用这个）跳。`'``a`````a````

如果您安装了[EasyMotion](http://www.vim.org/scripts/script.php?script_id=3526)，您可以键入`leader``leader``f``b``subchar`直接跳转到它

您可以按照@kev 的建议搜索它并使用它`n``N`来回弹，直到您得到它。如果`bark`很常见但`the_lazy_dog`很独特，您可以这样做`/dog.b/e``Enter`（e 将光标放在匹配的末尾）并向 Vim 之神祈祷，您的搜索足够具体，只能匹配该行。这更像是一个有趣的猜谜游戏。

根据线条在屏幕上的位置，您可以使用 (n offset)`H`或`M`( `L`high middle low) 来靠近它并`j``k`在那里使用一次。

或者，如果该行上方/下方有空行，您可以键入超级方便`{`或`}`帮助您跳近。

或者，如果您在触控板附近的笔记本电脑上使用鼠标 + 在 gvim 中。我对此很认真，即使我可能永远不会这样做。如果你玩过足够多的第一人称射击游戏，你的扳机指可能比任何键盘快捷键都更准确、更快速；）

尽管 Vim 拥有所有疯狂的键盘功能，但并不总是有直接或好的方法来做某事，比如非常具体的跳跃。您需要保留并不断构建一袋技巧，以帮助您四处走动并使用适当的技巧来完成工作。我相当均匀且经常地使用以上所有方法（我使用`relativenumber`），这取决于我认为最快的方法。EasyMotion 非常方便，只是 5 次击键来执行一个命令真的很尴尬并且容易输入错误。

因此，在我几年的 Vim 经验中，我会说没有好的方法可以做到，但是有很多平庸的方法，你可以组合成一个体面的方法。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-11T23:56:31.487

按`/bark``Enter`。（也许`n`是必需的）

（这取决于文本的形状。没有信息，我无法提供最佳方法。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T00:04:49.513

Kev 的回答假设`bark`是一个不常见的词。你可能会打好`n`几次。

我会去

`6``7``1``G`跳线，

`$`跳到行尾，并且

`2``b`将光标放在 b 上。

**编辑**：阅读安迪的回答，我真的必须同意这一点：

> > 尽管 VIM 拥有疯狂的键盘功能，但并不总是有直接或好的方法来做某事，比如非常具体的跳跃。

我会选择以大致的步骤导航，比如`9``j`走下 9 行。当您在反射上执行此操作时，您可以比读取行号或字符位置更快地导航。它可能最终会是更多的击键，但我更喜欢额外的速度。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T02:25:55.420

如果您想`n`使用@Kev 的建议增加命中的可能性（即减少必须命中的可能性），也许更改您的正则表达式以包含更多文本并从那里偏移您的光标。例如：

```
/dog\.bark/e-3 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-12T13:54:35.403

打开相对行号，`31j`变成一个非常自然的动作；这会让你到达你需要的线路。

然后，在你想去的地方附近寻找一个独特的角色。在这种情况下`.`是独一无二的，就在树皮之前。所以，`f.`。然后`l`你就好了。

**所以总的来说：** `31jf.l`。

（它并不总是这样工作的。有时，`/bark`一旦你跳到线路上，它就可以快速使用。有时它`/bark`最初使用会更快，而且只需`n`多次线路。Vim 为你提供工具，你的代码总会有所不同。）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-12T03:38:22.520

实际上，我不想说我认为最有效的方法是使用鼠标，

另一种方式使用命令行：/.*dog\&.*bark

与 /bark 相比，这将降低频率（可能还有很多）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-07T17:46:24.897

尚未提及在同一行跳转到 char 的一种方法。采用

```
61| 
```

61“管道”，在控制模式下直接跳转到[b]ark。

我没有将它纳入我的常规跳跃中，因为这个数字通常是一个猜测。每行固定 80 个字符，你可以习惯它，它会非常有效。但是管道键不方便imo。由于它的优雅和高效，我计划更频繁地使用它。

# java - Java JFrame - 在另一个线程完成之前不会重新绘制（）

> ID：11918605
> 
> 赞同：2
> 
> 时间：2012-08-11T23:50:43.430
> 
> 标签：java, multithreading, swing, event-dispatch-thread

我正在尝试创建一个游戏，我从加载屏幕开始，它将加载所有需要的文件。我想显示完成的百分比，但它不起作用。JPanel Loading 仅在 Loading_files 完成后 repaints() 。我不知道怎么了。

**主.java**

```
package Main;

import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.Toolkit;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JFrame;
import javax.swing.JPanel;

public class Main extends JFrame{

//-------------- Final Variables --------------
//Screen Related
public final static int JFRAME_WIDTH = 800;
public final static int JFRAME_HEIGHT = 600;
public final static Dimension SCREEN_SIZE = Toolkit.getDefaultToolkit().getScreenSize();
public final static int SCREEN_WIDTH = SCREEN_SIZE.width;
public final static int SCREEN_HEIGHT = SCREEN_SIZE.height;
//Game Related
public final static String NAME = "Xubris";
public final static String IMAGE_DIRECTORY = System.getProperty("user.dir") + "\\images\\";
public static final int FPS = 1000 / 36;

//-------------- Dynamic Variables --------------
//Global
public static JFrame main;

public static void main(String[] args) {
    //Start the Loading screen
    Loading load = new Loading();

    main = new JFrame(NAME);

    main.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

    main.setSize(JFRAME_WIDTH, JFRAME_HEIGHT);
    main.setLocation((SCREEN_WIDTH-JFRAME_WIDTH)/2, (SCREEN_HEIGHT-JFRAME_HEIGHT)/2);

    //Add Content
    main.getContentPane().add(load);

    main.setResizable(false);
    main.setUndecorated(false);
    main.setVisible(true);  
}

} 
```

**加载.java**

```
package Main;

import java.awt.Color;
import java.awt.Graphics;
import java.awt.image.BufferedImage;
import java.io.File;
import java.io.IOException;

import javax.imageio.ImageIO;
import javax.swing.JPanel;

public class Loading extends JPanel implements Runnable{

//Pictures
BufferedImage background;

//-------------- Final Variables --------------
private final int num_of_files = 32;

//-------------- Dynamic Variables --------------
//Global Variables
private double loading_percentage = 0;
private int num_of_loaded_files = 0;

public Loading(){
    try {
        background = ImageIO.read(new File(Main.IMAGE_DIRECTORY + "Background_Loading.jpg"));
    } catch (IOException e) {
        e.printStackTrace();
    }
    //Start the thread
    new Thread(new LoadingFiles()).start();
    new Thread(this).start();
}

public void paint(Graphics g){
    g.drawImage(background, 0, 0, this);
    for(int i = 0; i < loading_percentage; i=i+15){
        g.setColor(new Color(20,241,47));
        g.drawRect(180 + (i/15)*(50+10), 375, 50, 50);
    }
}

@Override
public void run(){
    while(true){
        repaint();
    }
}

class LoadingFiles implements Runnable{
    public void run() {
        try {
            Thread.sleep(100);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
        num_of_loaded_files++;
        loading_percentage = (num_of_loaded_files/num_of_files)*100;

        if(num_of_loaded_files!=32)
            run();
    }

}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T09:15:43.150

阻止 EDT 并重新绘制合并我的第一个想法（这就是我赞成评论的原因）。但是很好奇 - 真正的问题也不是:-)

*   从任何线程调用 repaint 都是完全有效的（尽管在紧凑的 while 循环中这样做肯定会减慢 ui 反应性）
*   即使经过一些清理也不会按预期重新绘制（见下文）。罪魁祸首纯粹是算术

以下行：

```
loading_percentage = (num_of_loaded_files/num_of_files)*100; 
```

这是 0 直到

```
num_of_loaded_files == num_of_files 
```

直到一切都加载完毕。我们都对草率下结论感到内疚:-)

一些清理：

*   遵循 java 命名约定使代码更易于阅读
*   不要覆盖paint，而是覆盖paintComponent
*   总是在 paintComponent 中调用 super（默认情况下，JPanel 报告为不透明的，也就是说，它*必须*填充其区域）
*   无需交织线程，只需在加载下一张图像后让加载线程调用重绘
*   得到正确的算术:-)

代码：

```
public class Loading extends JPanel { 

    // Pictures
    private BufferedImage background;

    // -------------- Final Variables --------------
    private final int numOfFiles = 32;

    // -------------- Dynamic Variables --------------
    // Global Variables
    private double loadingPercentage = 0;

    private int numOfLoadedFiles = 0;

    public Loading() {
        background = XTestUtils.loadDefaultImage("moon.jpg");
        // Start the thread
        new Thread(new LoadingFiles()).start();
    }

    @Override
    public void paintComponent(Graphics g) {
        super.paintComponent(g);
        g.drawImage(background, 0, 0, this);
        for (int i = 0; i < loadingPercentage; i = i + 15) {
            g.setColor(new Color(20, 241, 47));
            g.drawRect(180 + (i / 15) * (50 + 10), 375, 50, 50);
        }
    }

    class LoadingFiles implements Runnable {
        @Override
        public void run() {

            while (numOfLoadedFiles < 32) {
                numOfLoadedFiles++;
                loadingPercentage = (double) numOfLoadedFiles / numOfFiles
                        * 100;
                repaint();
                try {
                    // simulate the loading
                    Thread.sleep(200);
                } catch (InterruptedException e) {
                    e.printStackTrace();
                }
            }
        }

    }

    public static void main(String[] args) {
        JFrame frame = new JXFrame("", true);
        frame.add(new Loading());
        frame.setSize(600, 600);
        frame.setVisible(true);
    }
} 
```

# google-sheets - 调用两个范围联合的公式

> ID：11918606
> 
> 赞同：2
> 
> 时间：2012-08-11T23:51:02.490
> 
> 标签：google-sheets, google-sheets-formula

我在单元格中有一些数字，`A1:A10`在`B1:B7`.

我想运行一个函数，该函数采用一个范围（如`IRR`or `SUM`），以便它将对这两个范围的串联进行操作。谷歌电子表格中有没有办法进行这样的调用？

因为`SUM`有明显的解决方法`SUM(A1:A10)+SUM(B1:B7)`，但这不适用于像`IRR`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T20:18:56.490

`=IRR( SPLIT ( JOIN(",", A1:A10, B1:B7), ",") )`

演示：[https](https://docs.google.com/spreadsheet/ccc?key=0AmyXqCqKRFBKdDZwUjdGSEk5ekp2VUxPb3ZjTllzZWc) ://docs.google.com/spreadsheet/ccc?key=0AmyXqCqKRFBKdDZwUjdGSEk5ekp2VUxPb3ZjTllzZWc （查看公式，您必须复制）

# python - 制作新地图

> ID：11918608
> 
> 赞同：0
> 
> 时间：2012-08-11T23:51:27.777
> 
> 标签：python, pygame

今天我尝试在 pygame 中制作一个小平台游戏。我使用了一个非常漂亮和有用的教程中的很多代码，因为我不知道该怎么做。

到目前为止，通过处理屏幕的 32x32 部分并根据地图文本部分中的字符为其分配块类型来制作地图。到目前为止，我有一个平台块、一个边界块和一个出口块，我希望最终使游戏加载一个新的关卡。

我的问题是：如果我“通过关卡”并想让游戏加载一张新地图，我该怎么做？我试过从组中删除精灵，但我没有任何运气。我已经尝试了一段时间，但我有点气馁。

这是代码：

```
import pygame
import math
from pygame import *

DISPLAY = (800, 640)
DEPTH = 32
FLAGS = 0

def main():
    pygame.init()
    screen = display.set_mode(DISPLAY, FLAGS, DEPTH)
    display.set_caption("Square2")
    timer = time.Clock()

    up = down = left = right = False
    bg = Surface((32,32))
    bg.convert()
    bg.fill(Color("#000000"))
    entities = pygame.sprite.Group()
    player = Player(32,32)
    platforms = []

    x = y = 0
    level = [
    "PPPPPPPPPPPPPPPPPPPPPPPPP",
    "P                       P",
    "P                       P",
    "P                       P",
    "P                       P",
    "P                       P",
    "P                       P",
    "P                       P",
    "P                       P",
    "P                       P",
    "P                       P",
    "P                       P",
    "P                   pp  P",
    "P                       P",
    "P                       P",
    "P           pppppp      P",
    "P                       P",
    "P  pppppp               P",
    "P                       P",
    "PPPPPPPPPPPPPPPPPPPPPPPPP",
            ]

    #builds the level
    for row in level:
        for col in row:
            if col =="p":
                p = Platform(x, y)
                platforms.append(p)
                entities.add(p)
            if col == "E":
                e = ExitBlock(x, y)
                platforms.append(e)
                entities.add(e)
            if col == "P":
                P = Border(x, y)
                platforms.append(P)
                entities.add(P)
            x += 32
        y += 32
        x = 0
    entities.add(player)

    while 1:
        timer.tick(60)
        for e in pygame.event.get():
            if e.type == QUIT:
                pygame.quit()
                sys.exit()
                #raise SystemExit, "ESCAPE"
            if e.type == KEYDOWN and e.key == K_ESCAPE:
                pygame.quit()
                sys.exit()
                #raise SystemExit, "ESCAPE"
            if e.type == KEYDOWN and e.key == K_UP:
                up = True
            if e.type == KEYDOWN and e.key == K_DOWN:
                down = True
            if e.type == KEYDOWN and e.key == K_RIGHT:
                right = True
            if e.type == KEYDOWN and e.key == K_LEFT:
                left = True

            if e.type == KEYUP and e.key == K_UP:
                up = False
            if e.type == KEYUP and e.key == K_DOWN:
                down = False
            if e.type == KEYUP and e.key == K_RIGHT:
                right = False
            if e.type == KEYUP and e.key == K_LEFT:
                left = False

        #draw bg
        for y in range(20):
            for x in range(25):
                screen.blit(bg, (x * 32, y * 32))

        #update player, draw everything else
        player.update(up, down, left, right, platforms)
        entities.draw(screen)

        pygame.display.flip()

class Entity(pygame.sprite.Sprite):
    def __init__(self):
        pygame.sprite.Sprite.__init__(self)

class Player(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.xvel = 0
        self.yvel = 0
        self.onGround = False
        self.image = Surface((32, 32))
        self.image.convert()
        self.image.fill(Color("#FF0000"))
        self.rect = Rect(x, y, 32, 32)

        self.reset(150, 400)

    def reset(self,x,y):
        self.x = x
        self.y = y

        self.rect.center = (self.x, self.y)

    def update(self, up, down, left, right, platforms):
        if up:
            #only jump if on the ground
            if self.onGround:
                self.yvel = -8
        if down:
            pass
        if left:
            self.xvel = -5
        if right:
            self.xvel = 5
        if not self.onGround:
            #only accelerate wit gravity if in the air
            self.yvel +=0.3
            #max falling sapeed
            if self.yvel > 30:
                self.yvel = 30
        if not (left or right):
            self.xvel = 0

        # increment in x direction
        self.rect.left+= self.xvel
        # x-axis collisions
        self.collide(self.xvel, 0 , platforms)
        # increment in y direction
        self.rect.top +=self.yvel
        # assuming we're in the air
        self.onGround = False;
        # y-axis collisions
        self.collide(0, self.yvel, platforms)

    def collide(self, xvel, yvel, platforms):
        for p in platforms:
            if sprite.collide_rect(self, p):
                if isinstance(p, ExitBlock):
                    event.post(event.Event(QUIT))
                if xvel > 0:
                    self.rect.right = p.rect.left
                if xvel < 0:
                        self.rect.left = p.rect.right
                if yvel > 0:
                    self.rect.bottom = p.rect.top
                    self.onGround = True
                    self.yvel = 0
                if yvel < 0:
                    self.rect.top = p.rect.bottom
                    self.yvel = 0
                   # Player.rect.top =  Player.rect.top

class Platform(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.image = Surface((32, 32))
        self.image.convert()
        self.image.fill(Color("#DDDDDD"))
        self.rect = Rect(x, y, 32, 32)

        def update(self):
            pass

class Border(Entity):
    def __init__(self, x, y):
        Entity.__init__(self)
        self.image = Surface((32, 32))
        self.image.convert()
        self.image.fill((0,0,0))
        self.rect = Rect(x, y, 32, 32)

        def update(self):
            pass

class ExitBlock(Platform):
    def __init__(self, x, y):
        Platform.__init__(self, x, y)
        self.image.fill(Color("#0033FF"))

main() 
```

在此先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-22T02:36:51.400

创建一个算法来随机创建一个可行的关卡并为一个关卡输出一个可读的字符串。自动将其与边界对齐，制作一些随机平台，以及距离玩家最远的平台上的出口。您甚至可以计算是否可以从一个平台跳转到下一个平台，您可能应该这样做。要加载关卡，只需重新调用 main()。此外，实体似乎只是精灵的包装，您可能想保留它，但它似乎只是占用空间。因为算法可能是整个程序中最大的部分，所以我不会写一个例子，但是如果你正在寻找一种方法来加载一个新的关卡或一个开始算法的地方，这应该可以工作。

# jquery - 为什么 JSON.stringify() 不将数据传递给 $.cookie()

> ID：11918611
> 
> 赞同：3
> 
> 时间：2012-08-11T23:51:35.030
> 
> 标签：jquery, json, cookies, stringify

这是我得到的代码：

```
var tmp_kana_type = "hiragana";
var tmp_kana_set = "monographs";

cookie_symbols = {"symbols": []};

for (kana_row=0; kana_row<10; kana_row++) {
    for (kana_column=0; kana_column<5; kana_column++) {

        var tmp_JSON  = {
                "kana_type": tmp_kana_type,
                "kana_set": tmp_kana_set,
                "kana_row": kana_row,
                "kana_column": kana_column,
                "selected": 0,
                "correct": 0,
                "total": 0
        };

        cookie_symbols.symbols.push(tmp_JSON);
    }
}

console.log(cookie_symbols); // works

var to_string = JSON.stringify(cookie_symbols);
console.log(to_string); // works

var to_json = JSON.parse(to_string);
console.log(to_json); // works

$.cookie("test_cookie1", "test string"); 
console.log($.cookie("test_cookie1")); // works

$.cookie("test_cookie2", JSON.stringify(cookie_symbols)); // does not work (why?)
console.log($.cookie("test_cookie2")); // does not work (null)
console.log(JSON.parse($.cookie("test_cookie2"))); // does not work (null) 
```

JSON.stringfy() 不适用于 $.cookie() 而我认为它应该。我做错了什么，我该如何解决或使这项工作正常进行？我找到[了这个答案](https://stackoverflow.com/questions/4225030/jquery-save-json-data-object-in-cookie)，这几乎就是我所做的，但就我而言，由于某种原因它不起作用。我正在使用[这个 jQuery cookie 插件](https://github.com/carhartl/jquery-cookie/)。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T00:15:17.500

我相信你的主要问题是你已经超过了[最大 cookie 文件大小](https://stackoverflow.com/questions/3107140/what-is-the-maximum-size-of-a-cookie-file)。

# android - Android - 试图从下到上逐渐填充一个圆圈

> ID：11918620
> 
> 赞同：0
> 
> 时间：2012-08-11T23:53:22.787
> 
> 标签：android, android-canvas, android-ui

我正在尝试在 ImageView 中填充一个圆形（除了圆形的轮廓之外是透明的）。

我有代码工作：

```
public void setPercentage(int p) {
    if (this.percentage != p ) {
   this.percentage = p;
    this.invalidate();
   }
}
@Override public void onDraw(Canvas canvas) {
 Canvas tempCanvas;
        Paint paint;    
        Bitmap bmCircle = null;
        if (this.getWidth() == 0 || this.getHeight() == 0 ) 
            return ; // nothing to do
        mergedLayersBitmap = Bitmap.createBitmap(this.getWidth(), this.getHeight(), Bitmap.Config.ARGB_8888); 

        tempCanvas = new Canvas(mergedLayersBitmap);
        paint = new Paint(Paint.ANTI_ALIAS_FLAG);

        paint.setStyle(Paint.Style.FILL_AND_STROKE);
        paint.setFilterBitmap(false);

        bmCircle = drawCircle(this.getWidth(), this.getHeight());

        tempCanvas.drawBitmap(bmCircle, 0, 0, paint);

        paint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));

        tempCanvas.clipRect(0,0, this.getWidth(), (int) FloatMath.floor(this.getHeight() - this.getHeight() * ( percentage/100)));
        tempCanvas.drawColor(0xFF660000, PorterDuff.Mode.CLEAR);  

        canvas.drawBitmap(mergedLayersBitmap, null, new RectF(0,0, this.getWidth(), this.getHeight()), new Paint());
        canvas.drawBitmap(mergedLayersBitmap, 0, 0, new Paint());

    }
  static Bitmap drawCircle(int w, int h) {
        Bitmap bm = Bitmap.createBitmap(w, h, Bitmap.Config.ARGB_8888);
        Canvas c = new Canvas(bm);
        Paint p = new Paint(Paint.ANTI_ALIAS_FLAG);

        p.setColor(drawColor);    
        c.drawOval(new RectF(0, 0, w, h), p);
        return bm;

    } 
```

它有点工作。但是，我有两个问题：内存很快耗尽并且 GC 发疯了。我怎样才能为这个操作使用最少的内存？

我知道我不应该在 onDraw 中实例化对象，但是我不确定在哪里绘制。谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T00:15:20.607

伪看起来像这样。

```
 for each pixel inside CircleBitmap {

        if (pixel.y is < Yboundary && pixelIsInCircle(pixel.x, pixel.y)) {
           CircleBitmap .setPixel(x, y, Color.rgb(45, 127, 0));
        }
    } 
```

这可能很慢，但它会起作用，而且圆圈越小它走得越快。

只知道基础知识，位图的宽度和高度，例如 256x256，圆的半径，为了让事情变得简单，让圆以 128,128 为中心。然后逐个像素地检查像素 X 和 Y 以查看它是否落在圆圈内，并低于 Y 限制线。

然后只需使用：

```
 CircleBitmap .setPixel(x, y, Color.rgb(45, 127, 0)); 
```

编辑：为了加快速度，甚至不必费心查看高于 Y 限制的像素。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-07-23T05:07:48.283

如果您想查看其他解决方案（也许更清洁），请查看此链接，[从底部到顶部逐渐填充一个圆圈 android](https://stackoverflow.com/questions/24858531/filling-a-circle-gradually-from-bottom-to-top-android/24866667?noredirect=1#comment38644747_24866667)

# mysql - 选择具有许多子行的行

> ID：11918624
> 
> 赞同：1
> 
> 时间：2012-08-11T23:53:46.577
> 
> 标签：mysql, sql

我希望我能让自己足够了解！我有以下 SQL 查询

```
SELECT DATE_FORMAT(calendar_date,'%W %D, %M, %Y') AS calendar_date,calendar_entry_title,calendar_entry_teaser
        FROM calendar_month
        LEFT JOIN calendar_entry ON calendar_entry.calendar_id = calendar_month.calendar_id
        ORDER BY calendar_date 
```

这是我正在处理的表格详细信息。

```
CREATE TABLE IF NOT EXISTS `calendar_entry` (
  `calendar_entry_id` int(11) NOT NULL AUTO_INCREMENT,
  `calendar_id` int(11) NOT NULL,
  `school_id` int(11) NOT NULL,
  `calendar_entry_title` varchar(250) NOT NULL,
  `calendar_entry_teaser` varchar(250) NOT NULL,
  `calendar_entry_text` text NOT NULL,
  PRIMARY KEY (`calendar_entry_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `calendar_entry`
--

INSERT INTO `calendar_entry` (`calendar_entry_id`, `calendar_id`, `school_id`, `calendar_entry_title`, `calendar_entry_teaser`, `calendar_entry_text`) VALUES
(1, 1, 1, 'School Event 1', 'School event information 1', 'This would be the full body of the text that would show on the full page for this given entry'),
(2, 1, 1, 'School Event 2', 'School event information 2', 'This would be the full body of the text that would show on the full page for this given entry');

CREATE TABLE IF NOT EXISTS `calendar_month` (
  `calendar_id` int(11) NOT NULL AUTO_INCREMENT,
  `school_id` int(11) NOT NULL,
  `calendar_date` date NOT NULL,
  PRIMARY KEY (`calendar_id`)
) ENGINE=MyISAM  DEFAULT CHARSET=latin1 AUTO_INCREMENT=3 ;

--
-- Dumping data for table `calendar_month`
--

INSERT INTO `calendar_month` (`calendar_id`, `school_id`, `calendar_date`) VALUES
(1, 1, '2012-08-11'),
(2, 1, '2012-08-12'); 
```

我遇到的问题是，calendar_month 表中只有 2 行。其中一行在month_entry 表中有2 行与之相关。当我运行我拥有的查询时，它将显示 3 行。我需要它做的只是显示 2 行，有两行的月份我需要显示为一行。这可以通过我的设置来完成吗？

谢谢

结果 -

```
Saturday 11th, August, 2012     School Event 1  School event information 1
Saturday 11th, August, 2012     School Event 2  School event information 2
Sunday 12th, August, 2012   NULL    NULL 
```

我真正想要的——

```
Saturday 11th, August, 2012     School Event 1  School event information 1 School Event 2   School event information 2
Sunday 12th, August, 2012   NULL    NULL 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:24:01.983

您无法仅在 mysql 中获得这种结果，或者为每行使用 2 个子查询，这迟早会使您的服务器崩溃。相反，使用 php 对结果进行排序并将您所在的 calendar_entry_title 存储在其中。例子：

```
$query =" SELECT DATE_FORMAT(calendar_date,'%W %D, %M, %Y') AS calendar_date,
calendar_entry_title,
calendar_entry_teaser
        FROM calendar_month
        LEFT JOIN calendar_entry ON calendar_entry.calendar_id = calendar_month.calendar_id
        ORDER BY calendar_date, calendar_entry_title";

$result = mysql_query($query);
$events = array();
foreach($result as $r){
     $events[$r['calendar_date']][] = $r;
}
echo '<pre>';
print_r($events);
echo '</pre>'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T00:24:14.580

你试过了吗

```
SELECT DATE_FORMAT(calendar_date,'%W %D, %M, %Y') AS calendar_date, TMP.var1
FROM calendar_month
LEFT JOIN 
    (SELECT GROUP_CONCAT(calendar_entry_title, ' ',calendar_entry_teaser) AS var1, calendar_id
         FROM calendar_entry
     GROUP BY calendar_id) AS TMP ON TMP.calendar_id = calendar_month.calendar_id
ORDER BY calendar_date 
```

# php - 使用更新查询

> ID：11918628
> 
> 赞同：-5
> 
> 时间：2012-08-11T23:54:51.193
> 
> 标签：php, mysql

此更新查询可能有什么问题？

```
"UPDATE relationships SET status='4' WHERE user_1= $user_1, user_2= $user_2"; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-11T23:55:46.250

```
UPDATE relationships SET status='4' WHERE user_1 = :user_1 AND user_2= :user_2 
```

并且由于您已将此标记为 MySQL 问题，我建议您应该切换到 PDO 并使用准备好的语句，因为 PHP 社区已经开始弃用旧的 ext/mysql 扩展（它提供`mysql_*`功能）。

[这](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)是关于如何使用 PDO 的一个很好的链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T00:01:39.980

```
"UPDATE relationships " .
"SET status = '4' " .
"WHERE user_1 = '" . $user_1 . "' AND user_2 = '" . $user_2 . "'"; 
```

# php - 在 PHP 中更改 XML 字符串中的值

> ID：11918629
> 
> 赞同：1
> 
> 时间：2012-08-11T23:54:55.117
> 
> 标签：php, xml

我有这个 XML 字符串。我在其中连接了一些变量。我只是想澄清一下，当这些变量发生变化时，XML 字符串中的值是否也会发生变化？

```
 <?php
$nvpstr="
    <Source>
        <Company>".$company."</Company>
        <LeadId>".$leadid."</LeadId>
        <IpAddress>".$IP."</IpAddress>
</Source>";
?> 
```

考虑到他们提供的格式是这样的，它是通过 POST 发送的真正 XML。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:27:08.173

如果您在该块之后更改这些变量，它们不会。

或者简单地说：

```
$a = 'foo';
$b = 'my $a is: '.$a;
$a = 'bar'; 
```

不会更改`$b`为`'bar'`并且`echo $b;`会打印出来`my $a is: foo`

# objective-c - 'CLLocation' 没有可见的@interface 声明选择器'setDesiredAccuracy:'

> ID：11918635
> 
> 赞同：0
> 
> 时间：2012-08-11T23:56:20.003
> 
> 标签：objective-c, ios, core-location

我添加了 CoreLocation 框架，并不断重读书中的代码，以确保我正确地将其复制下来，但我遇到了一个持续性`No visible @interface for 'CLLocation' declares the selector 'setDesiredAccuracy:'`错误。

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

@interface WhereamiViewController : UIViewController {
    CLLocation *locationManager;
}

@end 
```

* * *

```
#import "WhereamiViewController.h"

@interface WhereamiViewController ()

@end

@implementation WhereamiViewController

-(id) initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil {
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];

    if (self) {
        locationManager = [[CLLocation alloc] init
        [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];
    }
    return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T00:00:24.380

你想要`CLLocationManager`，没有`CLLocation`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T00:00:29.817

我想你想用`CLLocationManager`...

```
CLLocationManager *locationManager; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T00:00:34.613

只`CLLocationManager`声明一个名为[-setDesiredAccuracy](http://developer.apple.com/library/ios/DOCUMENTATION/CoreLocation/Reference/CLLocationManager_Class/CLLocationManager/CLLocationManager.html#//apple_ref/occ/instp/CLLocationManager/desiredAccuracy)的选择器，而不是`CLLocation`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T00:12:07.997

```
CLLocation 
```

是一个位置对象，它拥有一个特定的坐标/位置，可以显示在地图视图上。但是，`CLLocationManager`它是一个管理位置和航向更新的对象。`setDesiredAccuracy`是您设置位置管理器位置和航向更新准确性的方法。如果您将准确度设置为高，位置管理器将更新您所在位置的非常准确的点，但速度相当慢。（不是真的，但是当您与其他精度进行比较时）。

位置更新它的委托方法：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation { 
```

要开始更新，您可以首先像您说的那样使用准确性和距离过滤器对其进行自定义。然后开始，只需编写：

```
[locationManager startUpdatingLocation]; 
```

而且，所以我可以猜到你会如何停止更新。

注意：如果您在 ARC 上，请将您的位置管理器设置为实例变量（在 .h 中声明），因为它会非常快速地释放位置管理器，并且让用户决定您的应用是否可以跟踪您的位置的弹出窗口会弹出然后消失不到一秒。当然，您的位置不会更新。

# ios - 将facebook好友列表存储在coredata中？

> ID：11918637
> 
> 赞同：0
> 
> 时间：2012-08-11T23:56:57.683
> 
> 标签：ios, facebook, core-data

我正在开发一个应用程序，它使用用户的 facebook 朋友进行某种交互。现在我正在使用核心数据来存储一些用户数据，但我不确定是否要将用户朋友也存储在数据库中以进行缓存。

这是一种存储速度超过存储的情况，因为存储方面它是 O(n) 存储超过连接速度，每次获取朋友列表然后根据需要对其进行操作。

当然，必须有一个处理程序来检查朋友列表是变大还是变小，但让我们假设我在应用程序加载时懒惰地在后台进行了验证。

任何想法将它保存到核心数据数据库是明智的，还是我应该在每次应用程序运行时获取它并重新填充数据库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:04:50.973

您的问题是关于在这种情况下什么是“明智的”的想法。实际上，我的回答对于每种情况都是一样的。

编写易于人类理解的代码。

然后，进行大量性能分析以确定您可能需要关注性能的地方。幸运的是，XCode 附带了一个非常好的工具（Instruments）。

因此，IMO，以最简单和最直接的方式实施它将是规模。然后运行性能分析。满足性能工具告诉您需要解决的需求。

# sharepoint-2010 - 是否可以在 SharePoint 2010 中使用直接 SQL（或 ORM）而不是 BCS

> ID：11918639
> 
> 赞同：0
> 
> 时间：2012-08-11T23:57:28.107
> 
> 标签：sharepoint-2010, sharepoint2010-bcs

我正在处理要查询并写入另一个数据库的自定义 Web 部件。

BCS 似乎比帮助它更复杂这个过程所以我想知道是否可以在不使用 BCS 的情况下直接使用访问 SQL Server？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T23:03:05.400

抱歉 - BCS 是错误的答案 - 您应该使用 Secure Store Service；这就是我们连接“外部”数据源和 SharePoint 的方式。否则，自定义 Web 部件必须以某种方式嵌入登录信息（通过属性、web.config 或注册表） - 否则，SSS 就是您想要去的地方。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T04:42:58.423

简短的回答......去吧 - 只使用 DB 而不要使用 BCS。

但这确实取决于...

如果您使用 BCS，则可以利用一些 Sharepoint 工具，例如搜索。

请在此处找到 BCS 的全部优势：http:
[//msdn.microsoft.com/en-us/library/ee556440.aspx](http://msdn.microsoft.com/en-us/library/ee556440.aspx)

但是这里有一个很大的问题......如果您使用的是 Sharepoint Foundation，则有许多您可以使用 BCS 做什么的限制，所以请记住这一点。

通过数据库访问的一个缺点是您不再有一个数据中心位置，这可能会产生问题。但是如果你设计好你的架构，你应该没问题。

所以总的来说，如果你不需要 BCS 的优势并且你可以设计一个可靠的架构（也许是面向服务的），那么我个人的建议是在你的 web 部件中使用数据库。

# php - 动态数据库表属性（最佳实践）

> ID：11918640
> 
> 赞同：3
> 
> 时间：2012-08-11T23:57:28.790
> 
> 标签：php, mysql, dynamic, database-design

我想创建一个带有自定义字段的 DVD 数据库 (MySQL)，这意味着用户应该能够添加他自己的信息字段来对他的 DVD 进行编目。我只是提供所需的属性，例如：

```
 - ID
 - Title 
```

用户可以添加自己使用的字段，例如

```
- Actors
- Year
- Genre
- Plot
- etc 
```

现在，应对这一挑战的最佳做法是什么？我有一些想法：

1.  更改表并添加属性（可能的数据丢失）
2.  使用临时表（性能较低）

有更好的主意吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-11T23:59:45.960

我会使用另一个包含 dvd_id、field_name、value 的表并将您的所有自定义字段存储在那里。这使您不必在每次添加或删除新字段时更改表​​。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T00:16:04.657

如果我要做那个任务，我会做一个像这样的布局

电影 move_id | 标题

movie_has_attribute 电影 ID | 属性ID

属性attribute_id | 姓名 | 价值

像这样，您可以使用 join 语句通过 movie_id 获取所有属性和值。我希望你的问题是正确的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-03T20:14:00.280

您应该试用 MySQL 5.7 及其[JSON 数据类型](https://dev.mysql.com/doc/refman/5.7/en/json.html)。

您可以使用它来定义用户定义属性的半结构化集合。

```
CREATE TABLE Dvd (
  id SERIAL PRIMARY KEY,
  title text NOT NULL,
  attr JSON NOT NULL
);

INSERT INTO Dvd
SET title = 'Wonder Woman', 
    attr = '{"Actors": ["Gal Godot", "Chris Pine"],
             "Year": "2017",
             "Genre": "Action",
             "Plot": "See Captain America: The First Avenger"
            }'; 
```

# javascript - 单输入表单 - 特殊情况 | 停止表单提交

> ID：11918643
> 
> 赞同：0
> 
> 时间：2012-08-11T23:58:10.020
> 
> 标签：javascript, html

我有 4 个表格。

但是，当您按下回车键时，只有一个表单提交。

这种形式最明显的区别是它只有一个输入字段。

当您按 Enter 时，是什么导致表单提交？

我尝试在其他 3 个的所有字段上按 Enter 键，但没有效果。

不确定要发布什么代码。

**单次入境**

```
 <form id="fo_at" >      
      <div id = 'at_gl_co'>
        <div id='at_in_wr'>
          <input id="at_go" name="tweet" type="text" maxlength="320" >
          <p id="at_lab" >Post a URL or Comment</p>
          <p id="at_but" >POST</p>
          <p id="at_rc" >POST</p>
        </div>
      </div>
    </form>

    <div id='at_rb'>      
      <div class="i_box_r1" ></div>
      <div class="i_box_r2">
        <p id="at_rt" >Default</p>
      </div>
    </div>

  </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:13:22.057

像这样将我的担忧分成两个事件监听器。一种用于特殊情况。

```
enter: function( event ) {
    if( event.keyCode === 13 ) {
        Co.Controller( Mo.o_p( 'AppTweet' ) ); 
    }
},
enter_one: function( event ) {      
    if( event.keyCode === 13 ) {
        event.preventDefault();
    }
}, 
```

# qt - 如何在 PCL（使用 Qt）中可视化一系列 TOF-Sensor 数据？

> ID：11918650
> 
> 赞同：2
> 
> 时间：2012-08-12T00:00:08.403
> 
> 标签：qt, vtk, point-cloud-library

我有这个 TOF 传感器，我想将传感器的数据可视化为 Qt 中的点云。我将数据转换为 a `pcl::PointCloud`，现在我想将其可视化。

每当创建一张图片时，传感器的 API 都会发出一张图片。我会把它发送`QVTKWidget`到可视化它。我用这段代码（我从[这里](http://www.pcl-users.org/QT-PCLVisualizer-mostly-working-td3285187.html)得到的）尝试了它：

```
pcl::visualization::PCLVisualizer pvis ("test_vis", false); 
// 'false' prevents PCLVisualizer's own window to pop up

pvis.addPointCloud<pcl::PointXYZ>(pc); // pc is my point cloud

vtkSmartPointer<vtkRenderWindow> renderWindow = pvis.getRenderWindow();
widget.SetRenderWindow(renderWindow); 
```

但这似乎只是为了可视化*一个稳定*的点云，而不是*一个不断变化的点云序列*。

**问题：**`cloud_xyz`每当我的传感器发出新图片时，有什么方法可以更新？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-13T17:59:11.350

好的，经过一番尝试，这是我的解决方案：

在我`VTKPointCloudWidget`继承自`QVTKWidget`：

```
pcl::visualization::PCLVisualizer vis ("vis", false); 

VTKPointCloudWidget::VTKPointCloudWidget(QWidget *parent) : QVTKWidget(parent)
{
   this->resize(500, 500);
   pcl::PointCloud<pcl::PointXYZ>::Ptr pc (new pcl::PointCloud<pcl::PointXYZ>);

   vis.addPointCloud<pcl::PointXYZ>(pc);
   vtkSmartPointer<vtkRenderWindow> renderWindow = vis.getRenderWindow();
   this->SetRenderWindow(renderWindow);
   this->show();
} 
```

每当发出新的传感器图像时，都会将其发送到：

```
void VTKPointCloudWidget::showPointCloud(SensorPicture pic)
{   
   // converts the sensor image to a point cloud
   pcl::PointCloud<pcl::PointXYZ>::Ptr pc = cvtSP2PC(pic);

   pc->width = pic.width;
   pc->height = pic.height;

   vis.updatePointCloud<pcl::PointXYZ>(pc); 

   this->update();
} 
```

# c - 在 C 中使用两组坐标（纬度和经度）的方位

> ID：11918654
> 
> 赞同：3
> 
> 时间：2012-08-12T00:00:44.027
> 
> 标签：c, coordinates, latitude-longitude, bearing

我已经开始在 c 中研究一架自主遥控直升机。我需要帮助找到一种计算方位 acuratley 的方法。我正在使用两组坐标（纬度和经度），一组是当前位置，另一组是目标点。我已经将纬度和经度转换为十进制格式，所以......

```
40°58'19.86"N = 40.972183
74°14'52.74"W = 74.247983 
```

谁能给我看c中的代码以找到我可以使用的轴承或公式？

我看过：[http](http://www.movable-type.co.uk/scripts/latlong.html) ://www.movable-type.co.uk/scripts/latlong.html ，当我将它转移到c时，结果毫无意义。

这是我尝试过的：

```
 double x = Sin(Longitude2 - Longitude1) * Cos(Latitude2);
 double y = Cos(Latitude1) * Sin(Latitude2) - Sin(Latitude1) * Cos(Latitude2) * Cos(Longitude2 - Longitude1);
 double heading = (Atan2(x, y) % 2 * 3.14159265) (180/3.14159265); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-15T19:17:23.470

您是否在计算之前将坐标从度数转换为弧度？

`angleRad = 3.14159265 * angleDeg / 180;` 和

`bearing = Atan2(y, x);` 在那个网站上。轴承应依次从 rad 转换为 deg：

`bearing = 180 * bearing / 3.14159265;` 如果最终为负值：

`bearing = bearing + 360;`

我不知道如何使用上面的约定（使用“%”）来编写这个。

Latitude1 和 Longitude1 是观察者的坐标 Latitude2 和 Longitude2 是目标点的坐标。

该网站的公式效果很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T01:55:08.833

对于您正在考虑的非常小的区域，您可以假设世界是平的。如果您也只需要它在本地工作，您可以预先计算以米（或英尺）为单位的地面纬度/经度值

然后只需将 delta lat/lon 转换为距离并进行正常触发。

要将距离转换为纬度/经度，您可以使用谷歌地球来测量它或 [如何将纬度或经度转换为米？](https://stackoverflow.com/questions/639695/how-to-convert-latitude-or-longitude-to-meters)

# c# - 从事件处理程序访问对象

> ID：11918656
> 
> 赞同：2
> 
> 时间：2012-08-12T00:00:50.650
> 
> 标签：c#, event-handling

我正在使用外部类来打开与远程应用程序的连接。此类接收来自远程应用程序的数据，这些数据通过处理程序进行处理。

在这个处理程序中，我添加了几个检查以在不同的方法中解析数据。但是，我现在被困在我需要再次访问触发事件以在其上调用方法的对象的地步。我确信这是一个非常基本的问题，但我只是从 OOP 开始。

```
public static void Main(string[] args) {
    IBattleNET b = new BattlEyeClient(loginCredentials);
    b.MessageReceivedEvent += HandleMessage;   
    b.Connect();
} 

private static void HandleMessage(BattlEyeMessageEventArgs args) {
    //call a method to analyze data parse
    PlayerList(args.Message);
}

private static void parsePlayerList(string playerList) { 
    // At this point I need to access the object b again to to call a method
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:13:20.193

通常，事件使用在其签名中具有两个参数的委托。一个对象“source”参数表示发送者，一个“args”参数表示事件参数。

如果您有权访问，`MessageReceivedEvent`则应更改委托以包含“对象”参数来表示发送者。然后您的`HandleMessage`方法将如下所示：

```
private static void HandleMessage(object sender, BatlEyeMessageEventArgs args)
{
        var battleNet = sender as IBattleNet;
        if (battleNet == null)
           return;

        battleNet.Foo();
        PlayerList(args.Message);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T00:13:44.517

由于您的传入方法是静态的，因此您面临一些挑战，特别是当多个消息在非常接近的时间内到达时会发生什么？如果您存储了以后要重复使用的信息，则很容易被收到的下一条消息覆盖。

在这种情况下，我通常会创建一个新类，负责解析和处理传入消息，并在事件处理程序中创建该类的新实例，将事件参数传递给构造函数。

从那时起，消息的所有处理都发生在类实例中。

例如，你可以有一个像这样的类来存储消息，验证它，然后对它执行一些解析：

```
public class PlayerListEvent
{
    private string m_sMessage;

    public PlayerListEvent(String sMessage)
    {
        m_sMessage = sMessage;
    }

    public Boolean MessageIsValid()
    {
        // Validate the incoming message

        return true;
    }

    public void ParseMessage() {
        // Perform the message parsing
    }
} 
```

您可以将所有传入消息存储在列表（或类或其他一些存储机制）中，以便可以根据需要对其进行处理：

```
 private static System.Collections.Generic.List<PlayerListEvent> m_cReceivedMessages = new System.Collections.Generic.List<PlayerListEvent>(); 
```

然后，当您的消息到达时，您可以创建该类的一个新实例，如果它有效，则将其添加到队列中以供稍后处理（您可以在这里做任何事情，包括触发后台工作进程来处理传入的消息， ETC）：

```
 private static void HandleMessage(BattlEyeMessageEventArgs args) {
    //call a method to analyze data parse

        var oPlayerListEvent = new PlayerListEvent(args.Message);
        if (oPlayerListEvent.MessageIsValid()) {
            lock (m_cReceivedMessages)  {
                m_cReceivedMessages.Add(oPlayerListEvent);
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T00:14:32.630

修改处理程序以传递对象：

```
b.MessageRecievedEvent += (e) => HandleMessage(b, e);
....
private static void HandleMessage(IBattleNet b, BattleMessageEventArgs args) {
.... 
```

lambda 表达式将 args 存储为“e”，然后通过传递对象和“e”来调用 HandleMessage。

但是，如果您可以访问并且可以在 IBattleNET 中更改事件本身，那么提出的约定 Pickles 是更好的做法。

# iphone - 通过 AVAssetExportSession 将元数据添加到 AAC M4A

> ID：11918657
> 
> 赞同：2
> 
> 时间：2012-08-12T00:00:59.713
> 
> 标签：iphone, ios, avaudiorecorder, avassetexportsession

我正在使用 AVAudioRecorder 创建和存储 AAC 编码的 .m4a 文件。这会产生一个可播放的 .m4a 文件就好了。然后我想使用 AVAssetExportSession 来处理文件，以便将元数据添加到文件中。下面的代码正在生成一个类似大小的 .m4a 文件（比源文件少 1 KB），但是当它播放时，只有静音。

```
NSURL* url = [NSURL fileURLWithPath:self.m4aPath];
AVURLAsset* asset = [AVAsset assetWithURL:url];
AVMutableMetadataItem* t = [AVMutableMetadataItem metadataItem];
t.key = AVMetadataCommonKeyTitle;
t.keySpace = AVMetadataKeySpaceCommon;
t.value = @"Unit Test";
NSArray* metadata = [NSArray arrayWithObject:t];

AVAssetExportSession *exportSession = [[AVAssetExportSession alloc] initWithAsset:asset presetName:AVAssetExportPresetAppleM4A];

exportSession.outputURL = [NSURL fileURLWithPath:[[NSFileManager  rawRecordingsDirectory] stringByAppendingPathComponent:@"test.m4a"]];
exportSession.outputFileType = AVFileTypeAppleM4A;
exportSession.metadata = metadata;

[exportSession exportAsynchronouslyWithCompletionHandler:^{....}]; 
```

还有一条信息：当我在 Finder 中查看源文件和导出文件时，源文件有黑色的 iTunes 图标，而导出的文件有白色的 iTunes 图标。不确定这在实践中意味着什么，但希望它可能会有所帮助。此外，双击源将其添加到 iTunes 并开始播放，而双击导出的打开 iTunes 但什么也不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T12:56:30.027

我有一个类似的问题，我的输出 m4a 文件有白色图标（而不是黑色）并且无法播放。虽然那是我从原始样本数据创建原始源文件的时候，而不是向它添加元数据的时候。

我的问题是我没有在我的代码中关闭导出的文件（我只是在调用 close 函数之前终止了应用程序）。一旦我调用了 close 函数，它就开始工作了。你可能想检查一下。

另外，我发现“使用-> Quicktime 打开”很有用，因为它在文件损坏时会出错，而在文件损坏时则可以正常播放。比 iTunes 默默地忽略错误更有用。

# javascript - Onclick 从一张图像切换到两张图像，然后再切换回一张

> ID：11918659
> 
> 赞同：0
> 
> 时间：2012-08-12T00:01:18.123
> 
> 标签：javascript, html, function, onclick, image

试图弄清楚如何从一张图像切换到两张图像，然后再通过 onlick 切换回一张。

到目前为止，我在下面有切换到一个图像并返回到原始图像的问题。最终，我试图让第一个 onclick 事件成为垂直的两个图像，然后再次单击回到第一个图像。

```
var play = false;
    function toggle() {
        var image = document.getElementById('image')
        var scan = document.getElementById('scan');
        play = !play;
        if (play) {
            image.src = "pause.png";image.width="182";image.height="182";image.border="0";
            scan.play();
        }
        else {
            image.src = "play.png";image.width="182";image.height="182";image.border="0";   
            scan.pause();
        }
    } 
```

和身体：

```
<a href="javascript:void(0)"><img onclick="toggle()" id="image" src="play.png" alt="image" width="182" height="182" style="margin:auto; position:absolute; top: 0; right: 0; bottom: 0; left: 0; border: 0;"></a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:19:09.583

这应该可以正常工作，除了从 javascript 中取出宽度、高度和边框，它们没有改变，所以为什么要放在那里并冒着被浏览器吓坏的风险呢？

我只是把它放在一起快速测试，它很有效。我当然已经注释掉了 scan.play 和 pause 但我假设你已经检查了浏览器中的控制台，看看这些是否抛出任何错误?

我也`<a>`取出并使用了可点击元素的样式`cursor=pointer`。无论哪种方式都可以，但这更整洁，而且我认为可以从 ie6 开始，ie7+ 肯定可以。

`edit: removed source block didn't achieve goal of question`

在评论中讨论之后，有很多方法可以做到这一点，我可能会使用 jQuery，但既然你不在这里，那就不是

```
<!doctype html>
<html>
<head>
    <script type="text/javascript">
        var play = true;
        function toggle() {
            //var scan = document.getElementById('scan');
            var playpause = document.getElementById('playpause');
            var btnplay = playpause.getElementsByClassName('play');
            var btnpause = playpause.getElementsByClassName('pause');
            play = !play;
            if (play) {
                btnplay[0].className = 'btn play active';
                btnpause[0].className = 'btn pause';
                //scan.play();
            }
            else {
                btnplay[0].className = 'btn play';
                btnpause[0].className = 'btn pause active';
                //scan.pause();
            }
        }
    </script>

    <style>
        .btn {
            width: 182px;
            height: 182px;
            cursor: pointer;
            position: absolute;
            visibility: hidden;
        }
        .btn.active { visibility: visible; }
        .btn.play { background: url('play.png') no-repeat 0 0; }
        .btn.pause { 
            background: url('pause.png') no-repeat 0 0;
            padding: 182px 0 0 0;
        }
    </style>
</head>
<body>
    <div id="playpause">
        <div class="btn play active" onclick="toggle()">
        </div>
        <div class="btn pause" onclick="toggle()">
            <img src="other.png" alt="other" />
        </div>
</body>
</html> 
```

# wpf - 环绕面板的替代行颜色

> ID：11918660
> 
> 赞同：1
> 
> 时间：2012-08-12T00:01:27.073
> 
> 标签：wpf, wrappanel

我正在尝试在列表框/包装面板上获得另一种行颜色效果。但是，由于方向是水平的，因此备用列正在获取备用颜色。我希望元素以侧面方式列出然后包装。如何基于此在行上设置备用颜色。

```
<ListBox ItemsSource="{Binding MySource}"  ItemContainerStyle="{StaticResource alternatingListItemStyle}" AlternationCount="2">
 <ListBox.ItemsPanel>
     <ItemsPanelTemplate>
         <WrapPanel Orientation="Horizontal" MaxWidth="300"/>
     </ItemsPanelTemplate>
 </ListBox.ItemsPanel>
 <ListBox.ItemTemplate>
     <DataTemplate>
         <CheckBox Content="{Binding MyCaption}"/>
     </DataTemplate>
 </ListBox.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:39:42.943

The possible reason for alternating color for columns is the 'MaxWidth'. As the MaxWidth for WrapPanel is 300, it's possible to hold more than one item. If you reduce the maxwidth, it may hold a single item. Hope this helps.

(Can you explain why you are using a wrap panel in ItemsPanelTemplate? I am not sure how you want the output to look like.)

# ruby-on-rails - 关于heroku部署的错误

> ID：11918667
> 
> 赞同：0
> 
> 时间：2012-08-12T00:02:18.487
> 
> 标签：ruby-on-rails, deployment, heroku

因此，我正在通过 heroku 部署我的代码，但最近在访问该站点时遇到了“很抱歉，但出了点问题”错误。不完全确定导致此问题的原因，我回去尝试使用“heroku rake db:reset 命令”（可能不是逐字记录），但我对如何解决这个问题有点困惑。

```
 2012-08-11T23:30:00+00:00 heroku[run.1]: Awaiting client
    2012-08-11T23:30:00+00:00 heroku[run.1]: Starting process with command `bundle exec                                 rake db:rollback`
    2012-08-11T23:30:01+00:00 heroku[run.1]: State changed from starting to up
    2012-08-11T23:30:06+00:00 heroku[run.1]: Process exited with status 0
    2012-08-11T23:30:06+00:00 heroku[run.1]: State changed from up to complete
    2012-08-11T23:30:17+00:00 heroku[run.1]: Awaiting client
    2012-08-11T23:30:17+00:00 heroku[run.1]: Starting process with command `bundle exec         rake db:migrate`
    2012-08-11T23:30:17+00:00 heroku[run.1]: State changed from starting to up
    2012-08-11T23:30:26+00:00 heroku[run.1]: Process exited with status 1
    2012-08-11T23:30:26+00:00 heroku[run.1]: State changed from up to complete
    2012-08-11T23:32:07+00:00 heroku[run.1]: Awaiting client
    2012-08-11T23:32:07+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:migrate`
    2012-08-11T23:32:07+00:00 heroku[run.1]: State changed from starting to up
    2012-08-11T23:32:15+00:00 heroku[run.1]: Process exited with status 1
    2012-08-11T23:32:15+00:00 heroku[run.1]: State changed from up to complete
    2012-08-11T23:32:53+00:00 heroku[run.1]: Awaiting client
    2012-08-11T23:32:53+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:migrate`
    2012-08-11T23:32:54+00:00 heroku[run.1]: State changed from starting to up
    2012-08-11T23:33:00+00:00 heroku[run.1]: Process exited with status 1
    2012-08-11T23:33:00+00:00 heroku[run.1]: State changed from up to complete
    2012-08-11T23:35:36+00:00 heroku[run.1]: Awaiting client
    2012-08-11T23:35:36+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:reset`
    2012-08-11T23:35:37+00:00 heroku[run.1]: State changed from starting to up
    2012-08-11T23:35:52+00:00 heroku[run.1]: Process exited with status 0
    2012-08-11T23:35:52+00:00 heroku[run.1]: State changed from up to complete
    2012-08-11T23:36:05+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:migrate`
    2012-08-11T23:36:05+00:00 heroku[run.1]: Awaiting client
    2012-08-11T23:36:05+00:00 heroku[run.1]: State changed from starting to up
    2012-08-11T23:36:17+00:00 heroku[run.1]: Process exited with status 0
    2012-08-11T23:36:17+00:00 heroku[run.1]: State changed from up to complete
    2012-08-11T23:37:07+00:00 app[web.1]: 
    2012-08-11T23:37:07+00:00 app[web.1]: 
    2012-08-11T23:37:07+00:00 app[web.1]: Started GET "/" for 71.201.189.216 at 2012-08-11         23:37:07 +0000
    2012-08-11T23:37:07+00:00 app[web.1]: Processing by MainController#home as HTML
    2012-08-11T23:37:07+00:00 app[web.1]:   Rendered main/home.html.erb within layouts/application (1.2ms)
    2012-08-11T23:37:08+00:00 app[web.1]: Completed 500 Internal Server Error in 671ms
    2012-08-11T23:37:08+00:00 app[web.1]: 
    2012-08-11T23:37:08+00:00 app[web.1]: ActionView::Template::Error (Unexpected token         name, expected punc (line: 10703, col: 9, pos: 383443)
    2012-08-11T23:37:08+00:00 app[web.1]: 
    2012-08-11T23:37:08+00:00 app[web.1]: Error
    2012-08-11T23:37:08+00:00 app[web.1]:     at new JS_Parse_Error (/tmp/execjs20120811-2-2siv6i.js:3096:22)
    2012-08-11T23:37:08+00:00 app[web.1]:     at js_error (/tmp/execjs20120811-2-2siv6i.js:3104:15)
    2012-08-11T23:37:08+00:00 app[web.1]:     at token_error (/tmp/execjs20120811-2-2siv6i.js:3564:17)
    2012-08-11T23:37:08+00:00 app[web.1]:     at croak (/tmp/execjs20120811-2-2siv6i.js:3557:17)
    2012-08-11T23:37:08+00:00 app[web.1]:     at expect_token (/tmp/execjs20120811-2-2siv6i.js:3577:17)
    2012-08-11T23:37:08+00:00 app[web.1]:     at expect (/tmp/execjs20120811-2-2siv6i.js:3580:40)
    2012-08-11T23:37:08+00:00 app[web.1]:     at object_ (/tmp/execjs20120811-2-2siv6i.js:3968:56)
    2012-08-11T23:37:08+00:00 app[web.1]:     at /tmp/execjs20120811-2-2siv6i.js:3929:51
    2012-08-11T23:37:08+00:00 app[web.1]:     at maybe_unary (/tmp/execjs20120811-2-2siv6i.js:4028:27)
    2012-08-11T23:37:08+00:00 app[web.1]:     at expr_ops (/tmp/execjs20120811-2-2siv6i.js:4055:32)
    2012-08-11T23:37:08+00:00 app[web.1]:   (in /app/app/assets/javascripts/application.js)):
    2012-08-11T23:37:08+00:00 app[web.1]:     26:   
    2012-08-11T23:37:08+00:00 app[web.1]:     25:   <title>Live Well Chicago L.L.C</title>
    2012-08-11T23:37:08+00:00 app[web.1]:     27:   <%= stylesheet_link_tag    "application", :media => "all" %>
    2012-08-11T23:37:08+00:00 app[web.1]:     28:   <%= javascript_include_tag "application" %>
    2012-08-11T23:37:08+00:00 app[web.1]:     30: </head>
    2012-08-11T23:37:08+00:00 app[web.1]:     29:   <%= csrf_meta_tags %>
    2012-08-11T23:37:08+00:00 app[web.1]:     31: <body><br />
    2012-08-11T23:37:08+00:00 app[web.1]:   app/views/layouts/application.html.erb:28:in `_app_views_layouts_application_html_erb___3454440193923948893_37164960'
    2012-08-11T23:37:08+00:00 app[web.1]: 
    2012-08-11T23:37:08+00:00 app[web.1]: 
    2012-08-11T23:37:08+00:00 heroku[router]: GET smooth-dusk-9878.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=680ms status=500 bytes=643
    2012-08-11T23:37:08+00:00 heroku[router]: GET smooth-dusk-9878.herokuapp.com/favicon.ico dyno=web.1 queue=0 wait=0ms service=4ms status=304 bytes=0
    2012-08-11T23:37:10+00:00 app[web.1]: 
    2012-08-11T23:37:10+00:00 app[web.1]: 
    2012-08-11T23:37:10+00:00 app[web.1]: Started GET "/" for 71.201.189.216 at 2012-08-11 23:37:10 +0000
    2012-08-11T23:37:10+00:00 app[web.1]: Processing by MainController#home as HTML
    2012-08-11T23:37:10+00:00 app[web.1]:   Rendered main/home.html.erb within layouts/application (1.4ms)
    2012-08-11T23:37:11+00:00 app[web.1]: Completed 500 Internal Server Error in 723ms
    2012-08-11T23:37:11+00:00 app[web.1]: 
    2012-08-11T23:37:11+00:00 app[web.1]: ActionView::Template::Error (Unexpected token name, expected punc (line: 10703, col: 9, pos: 383443)
    2012-08-11T23:37:11+00:00 app[web.1]: 
    2012-08-11T23:37:11+00:00 app[web.1]: Error
    2012-08-11T23:37:11+00:00 app[web.1]:     at new JS_Parse_Error (/tmp/execjs20120811-2-1und2hm.js:3096:22)
    2012-08-11T23:37:11+00:00 app[web.1]:     at croak (/tmp/execjs20120811-2-1und2hm.js:3557:17)
    2012-08-11T23:37:11+00:00 app[web.1]:     at js_error (/tmp/execjs20120811-2-1und2hm.js:3104:15)
    2012-08-11T23:37:11+00:00 app[web.1]:     at expect_token (/tmp/execjs20120811-2-1und2hm.js:3577:17)
    2012-08-11T23:37:11+00:00 app[web.1]:     at token_error (/tmp/execjs20120811-2-1und2hm.js:3564:17)
    2012-08-11T23:37:11+00:00 app[web.1]:     at object_ (/tmp/execjs20120811-2-1und2hm.js:3968:56)
    2012-08-11T23:37:11+00:00 app[web.1]:     at expect (/tmp/execjs20120811-2-1und2hm.js:3580:40)
    2012-08-11T23:37:11+00:00 app[web.1]:     at /tmp/execjs20120811-2-1und2hm.js:3929:51
    2012-08-11T23:37:11+00:00 app[web.1]:     at maybe_unary (/tmp/execjs20120811-2-1und2hm.js:4028:27)
    2012-08-11T23:37:11+00:00 app[web.1]:   (in /app/app/assets/javascripts/application.js)):
    2012-08-11T23:37:11+00:00 app[web.1]:     at expr_ops (/tmp/execjs20120811-2-        1und2hm.js:4055:32)
    2012-08-11T23:37:11+00:00 app[web.1]:     25:   <title>Live Well Chicago L.L.C</title>
    2012-08-11T23:37:11+00:00 app[web.1]:     26:   
    2012-08-11T23:37:11+00:00 app[web.1]:     27:   <%= stylesheet_link_tag    "application", :media => "all" %>
    2012-08-11T23:37:11+00:00 app[web.1]:     28:   <%= javascript_include_tag "application" %>
    2012-08-11T23:37:11+00:00 app[web.1]:     29:   <%= csrf_meta_tags %>
    2012-08-11T23:37:11+00:00 app[web.1]:     30: </head>
    2012-08-11T23:37:11+00:00 app[web.1]:     31: <body><br />
    2012-08-11T23:37:11+00:00 app[web.1]:   app/views/layouts/application.html.erb:28:in `_app_views_layouts_application_html_erb___3454440193923948893_37164960'
    2012-08-11T23:37:11+00:00 app[web.1]: 
    2012-08-11T23:37:11+00:00 app[web.1]: 
    2012-08-11T23:37:11+00:00 heroku[router]: GET smooth-dusk-9878.herokuapp.com/ dyno=web.1 queue=0 wait=0ms service=734ms status=500 bytes=643
    2012-08-11T23:37:11+00:00 heroku[router]: GET smooth-dusk-9878.herokuapp.com/favicon.ico         dyno=web.1 queue=0 wait=0ms service=5ms status=304 bytes=0
    2012-08-11T23:37:25+00:00 heroku[run.1]: Awaiting client
    2012-08-11T23:37:25+00:00 heroku[run.1]: Starting process with command `bundle exec rake db:migrate`
    2012-08-11T23:37:26+00:00 heroku[run.1]: State changed from starting to up
    2012-08-11T23:37:32+00:00 heroku[run.1]: Process exited with status 0
    2012-08-11T23:37:32+00:00 heroku[run.1]: State changed from up to complete 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T06:40:53.777

您的 javascript 文件中有语法错误吗？当您部署到 heroku 时，它是否表明它在部署期间无法预编译您的资产？

# windows - Powershell - 捕获套接字和进程

> ID：11918668
> 
> 赞同：2
> 
> 时间：2012-08-12T00:02:24.637
> 
> 标签：windows, powershell

我正在尝试使用这个小型 powershell 脚本每五秒查找一次 netstat -ano 输出，然后仅过滤任何 IP 地址上端口 80 上的传出连接，并捕获打开套接字的相关进程。我认为这里的问题是如果输出中有多个条目，那么它就无法处理数组。这里缺少什么？有更好的方法吗？

```
while(1) {netstat -ano | ? {$_ -like "*10.10.10.10:* *:80 *"} |
  % {
  $_ -match "\d+$";
$matches | ForEach-Object {
   Get-Process -id $matches[0] | Format-List *;
   (Get-Process -id $matches[0]).WaitForExit()
}
  Start-Sleep -s 5;
  }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:55:19.277

[Shay Levy](https://stackoverflow.com/users/9833/shay-levy)编写了一个处理`netstat`信息的函数，它可以帮助您过滤信息并以更容易过滤的方式输出信息：[如何查找正在运行的进程及其端口号](http://blogs.microsoft.co.il/blogs/scriptfanatic/archive/2011/02/10/How-to-find-running-processes-and-their-port-number.aspx)

注意：我知道大多数人可能会说如果页面丢失，请在此处发布代码。Shay 会随着事情的变化或改进（例如添加对 IPv6 连接的支持）更新此页面，所以我怀疑他会很快将其删除。

请参阅[Get-NetworkStatistics](https://gallery.technet.microsoft.com/scriptcenter/Get-NetworkStatistics-66057d71)：

```
> Get-NetworkStatistics | where Localport -eq 8000

ComputerName  : DESKTOP-JL59SC6
Protocol      : TCP
LocalAddress  : 0.0.0.0
LocalPort     : 8000
RemoteAddress : 0.0.0.0
RemotePort    : 0
State         : LISTENING
ProcessName   : node
PID           : 11552 
```

# java - Java ObjectOutputStream IOException

> ID：11918675
> 
> 赞同：0
> 
> 时间：2012-08-12T00:03:41.077
> 
> 标签：java, ioexception, objectoutputstream

我制作了一个简单的对象，我试图通过 OOS 发送，但每次我尝试发送我创建的类时都会抛出 IOException。但是，如果我尝试通过我知道可序列化的对象发送对象，它不会引发错误。

```
UserName userName = new UserName();
_out.write("Object is Made! \n");
serverOutput.writeObject(userName);
serverOutput.flush(); 
```

这是用户名代码：

```
public class UserName implements Serializable {

private String _userName;

public UserName(String userName) {
    _userName = userName;
}

public UserName(){
    _userName = "John Doe";
}

/**
 * @return the _userName
 */
public String get_userName() {
    return _userName;
}

/**
 * @param _userName the _userName to set
 */
public void set_userName(String userName) {
    _userName = userName;
}

} 
```

如果我这样做，那么它不会抛出错误：

```
UserName userName = new UserName();
_out.write("Object is Made! \n");
serverOutput.writeObject(new String());
serverOutput.flush(); 
```

我真的必须实现任何方法还是我忘记了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:34:58.117

接收端可能已经关闭了连接。也许那里也有例外？

# objective-c - 如何在没有协议的 2 个视图控制器之间传递值？

> ID：11918682
> 
> 赞同：0
> 
> 时间：2012-08-12T00:05:30.937
> 
> 标签：objective-c, ios, cocoa-touch

我有两个视图控制器，调用它们`viewA`并`ViewB`

*   所有动作都发生在主视图中 -`ViewA`
*   按下菜单按钮，弹出`ViewB`，一切正常，菜单出现

现在，用户触摸一个`IBAction`按钮，以编程方式只需要：

1.  改变 a 的值，`BOOL`调用它`myBOOL``YES`
2.  解雇`ViewB`
3.  将`myBOOL`变量的当前状态传递`YES`回`ViewA`

我已经`BOOL`在两个视图上声明了相同的 set 属性，但是根据我`NSLog`的解雇`ViewB`和加载备份`ViewA`，它恢复为`NO`

所以我知道我正在切线，我只想知道你是否可以`BOOL`在两个控制器之间发送 a 的值，如果可以，请给我看一个例子......因为搜索已经找到了带有`NSString`' 的协议和委托示例s，当我尝试使用 a 时，`BOOL`我陷入了一个导入循环，但是我已经读到它可以制作一个 global `BOOL`，尽管它是糟糕的设计，但我现在只需要克服这个障碍。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T08:47:42.190

关于这个主题的问题应该更多地关注`NSNotificationCenter`而不是`NSUserDefaults`，请注意两者都是单例。

`NSUserDefaults`：

此类的目的**不是**在类之间传递变量。它的目的是**存储**用户的默认值。（即偏好、设置等）。

`NSNotificationCenter`：

这个类非常方便，并且有许多不同的用途，其中之一就是**广播**一个变量让*任何*类接收。接收类称为观察者。这种模式被称为[观察者模式](http://en.wikipedia.org/wiki/Observer_pattern)。

**注意：**该`NSUserDefaults`方法的优点是允许您在初始化其他类之前设置变量，并且可以随时检索。然而，这真的很草率（恕我直言）并且被认为是不好的做法。

* * *

快速而肮脏的代码示例`NSNotificationCenter`：

```
// upon initializing the class that wants to observe the changes, we add it as an observer.
// So, somewhere in the A.m, upon being initialized (init, maybe?).

- (id)init {
    if (self = [super init]) {
        [[NSNotificationCenter defaultCenter] addObserver:self
                                                 selector:@selector(calledUponNotif:)
                                                     name:@"MyObserveKey"
                                                   object:nil];
    }
    return self;
}

// the selector should look something like this:
- (void)calledUponNotif:(NSNotification *)notif {
    id sentVar = [notif object];
} 
```

* * *

```
// Somewhere in the B.m
    [[NSNotificationCenter defaultCenter] postNotificationName:@"MyObserveKey"
                                                        object:varToSend]; 
```

**另一个注意事项**：调用 postNotification 方法后，其他类中注册的选择器会被同步调用，所以你不必担心。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T00:07:36.830

有独立于视图的保值工具。您可以使用：

```
[[NSUserDefaults standardUserDefaults]setObject:<#(id)#> forKey:<#(NSString *)#>] 
```

例如，您在 A 视图中输入字符串或数据，您可以将它们存储在上述变量中​​。然后，在 B 视图中，您可以通过以下代码使用它们：

```
 [[NSUserDefaults standardUserDefaults]objectOrKey:<#(NSString *)#>] 
```

这些是`NSUserDefaults`使用以下数据的示例：

![ss](../Images/15b4bb1f8d8102c9aec6e0f9dfc07d2a.png)

观点一：

```
- (void)textFieldDidEndEditing:(UITextField *)sender
    {
        if (sender == homepage) {
            [[NSUserDefaults standardUserDefaults]
             setURL:[NSURL URLWithString:homepage.text] forKey:Ever5secHomepagePrefKey];
            if( [homepage canResignFirstResponder] ) {
                [homepage resignFirstResponder];   
            }
        } else if (sender == userId) {
            [[NSUserDefaults standardUserDefaults]
             setObject:userId.text forKey:Ever5secUserIdPrefKey];
objectForKey:Ever5secUserIdPrefKey]);
            if( [userId canResignFirstResponder] ) {
                [userId resignFirstResponder];   
            }
        } else if (sender == password) {
            [[NSUserDefaults standardUserDefaults]
             setObject:password.text forKey:Ever5secPasswordPrefKey];
            if( [password canResignFirstResponder] ) {
                [password resignFirstResponder];   
            }
        }
    } 
```

视图 B：

```
userId.text = [[NSUserDefaults standardUserDefaults]
               objectForKey:Ever5secUserIdPrefKey];
password.text = [[NSUserDefaults standardUserDefaults]
                 objectForKey:Ever5secPasswordPrefKey];
homepage.text = [[[NSUserDefaults standardUserDefaults]
                  URLForKey:Ever5secHomepagePrefKey]
                 description]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T08:28:51.080

这不是一个好的封装答案，但由于无法使用协议或委托，我不相信它会有好的封装。

您还可以创建一个全局变量，您可以在一个视图控制器中设置该变量并在另一个视图控制器中访问。

ViewControllerOne.h

```
 extern NSString *globalVariable;

  @interface ViewControllerOne

  @end 
```

ViewControllerOne.m

```
 #import "ViewControllerOne.h"

 @implementation ViewControllerOne

 NSString *globalVariables = @"Some String in the variable to access in second controller";

 @end 
```

ViewControllerTwo.m

```
 #import "ViewControllerTwo.h"
 #import "ViewControllerOne.h"

 @implemetation ViewControllerTwo

 - (void)viewDidLoad
 {
     NSLog("%@", globalVariables);
 }

 @end 
```

这将打印到控制台

```
 ****CONSOLE****
 Some String in the variable to access in second controller 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-08T14:07:33.293

你不需要使用 NSNotificationCenter、NSUserDefaults 或全局变量。

只要视图控制器是相关的（并且查看 OP 的问题，它们肯定是相关的），您可以简单地设置视图控制器以保持对彼此的引用（其中一个引用当然是弱的，以便避免“保留”或“强参考”循环）。然后每个视图控制器可以根据需要在另一个视图控制器上设置属性。示例如下...

注意：这个概念适用于任何两个相关的视图控制器。但是，以下代码假定：

*   有问题的视图控制器通过导航控制器相关联，第二个视图控制器通过 push segue 连接到第一个视图控制器。
*   正在使用 iOS 5.0 或更高版本（因为它使用情节提要）。

第一视图控制器.h

```
@interface FirstViewController : UIViewController

/* Hold the boolean value (or whatever value should be
   set by the second view controller) in a publicly
   visible property */
@property (nonatomic, assign) BOOL someBooleanValue;

/* Provide a method for the second view controller to 
   request the first view controller to dismiss it */
- (void)dismissSecondViewController;

@end 
```

第一视图控制器.m

```
#import "FirstViewController.h"
#import "SecondViewController.h"

@implementation FirstViewController

-(void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    /* Get the reference to the second view controller and set
       the appropriate property so that the secondViewController
       now has a way of talking to the firstViewController */
    SecondViewController *vc = [segue destinationViewController];
    vc.firstViewController = self;
}

- (void)dismissSecondViewController
{
    // Hide the secondViewController and print out the boolean value
    [self.navigationController popViewControllerAnimated:YES];    
    NSLog(@"The value of self.someBooleanValue is %s", self.someBooleanValue ? "YES" : "NO");
}

@end 
```

SecondViewController.h

```
#import "FirstViewController.h"

@interface SecondViewController : UIViewController

// Create a 'weak' property to hold a reference to the firstViewController 
@property (nonatomic, weak) FirstViewController *firstViewController;

@end 
```

第二视图控制器.m

```
@implementation SecondViewController

/* When required (in this case, when a button is pressed),
   set the property in the first view controller and ask the
   firstViewController to dismiss the secondViewController */
- (IBAction)buttonPressed:(id)sender {
    self.firstViewController.someBooleanValue = YES;
    [self.firstViewController dismissSecondViewController];
}

@end 
```

当然，处理这种viewController 间通信的最正确方法是使用协议/委托/数据源，这样SecondViewController 就不需要知道其父/所有者对象的细节。但是，有时构建这样的解决方案只是为了证明这个概念会更快/更简单。然后，如果一切顺利并且代码值得保留，请重构以使用协议。

在视图控制器不 - 也不应该 - 相互了解的情况下，可能需要使用 NSNotificationCenter。不要使用全局变量或 NSUserDefaults 在视图控制器之间进行通信。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-02-08T14:11:57.187

在不同的视图控制器中存储和检索数据有两个选项。

1)`NSUserDefaults`是在任何其他视图控制器中存储数据和访问的最佳选择。

该类`NSUserDefaults`提供了方便的方法来访问常见类型，例如`float, double, integer, Boolean`.

默认对象必须是**属性列表**，即（或集合的实例组合）的实例：`NSData, NSString, NSNumber, NSDate, NSArray, or NSDictionary`。

这是存储和检索数据的非常简单和最佳的方法。

如果你想阅读`NSUserDefaults`，我在这里分享文档。[NsuserDefaults 文档。][1]

2) 当您希望它们可以在类或其他视图控制器之外访问时，您将创建属性。

以这种方式创建属性。`@property (nonatomic, retain) NSArray *arrayData;`然后你也可以在其他视图控制器中使用这个数组值。

属性替换了对象的访问器方法。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-02-08T14:15:58.577

在不同的视图控制器中存储和检索数据有两个选项。

1)`NSUserDefaults`是在任何其他视图控制器中存储数据和访问的最佳选择。

该类`NSUserDefaults`提供了方便的方法来访问常见类型，例如`float, double, integer, Boolean`.

默认对象必须是**属性列表**，即（或集合的实例组合）的实例：`NSData, NSString, NSNumber, NSDate, NSArray, or NSDictionary`。

这是存储和检索数据的非常简单和最佳的方法。

如果你想阅读`NSUserDefaults`，我在这里分享文档。 [NsuserDefaults 文档。](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)

2) 当您希望它们可以在类或其他视图控制器之外访问时，您将创建属性。

以这种方式创建属性。`@property (nonatomic, retain) NSArray *arrayData;`然后你也可以在其他视图控制器中使用这个数组值。

属性替换了对象的访问器方法。

你可以在这里看到我的答案。[将值从一个视图控制器传递到另一个视图控制器](https://stackoverflow.com/questions/11718632/how-to-save-data-from-different-view-controllers-and-load-it-in-another-view-con/14208947#14208947)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-25T10:18:43.263

我认为以以下方式使用块的强大功能的最佳方法。

在视图B.h

```
typedef void (^CompletionHandler)(BOOL myBool);
@interface ViewB : UIViewController {
    CompletionHandler completionHandler;
}
- (void)dismissHandler:(CompletionHandler)handler; 
```

在视图B.m

```
- (void)dismissHandler:(CompletionHandler)handler {
    completionHandler = handler;
}
- (IBAction)dismiss:(id)sender {
    completionHandler (YES); // your yes no logic here
} 
```

在 ViewA.m

```
- (IBAction)showPopup:(id)sender {
    ViewB *vc = [[ViewB alloc] init];
    [self.view addSubview:vc.view];
    [vc dismissHandler:^(BOOL myBool) {
        if (myBool) {
                //Do your work;
        }
    }];
} 
```

# numerical - 如何使用 CLN：数字类库

> ID：11918686
> 
> 赞同：0
> 
> 时间：2012-08-12T00:07:25.553
> 
> 标签：numerical

我需要进行高精度的数值计算。有一个名为“CLN”的 c++ 库，虽然我安装了这个包，但我不知道如何使用它。是否有显示如何使用它的示例程序？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:12:39.087

类似的东西？

[http://www.warrenweckesser.net/software/cln/](http://www.warrenweckesser.net/software/cln/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-10T14:36:49.980

[从这里](https://www.ginac.de/CLN/)下载 CLN 源代码，解压缩，然后查看`examples/`文件夹。或者，您可以使用[gitweb](https://www.ginac.de/CLN/cln.git/?p=cln.git;a=tree;f=examples)浏览相同的文件夹。

# java - 同步 Solr 提交

> ID：11918687
> 
> 赞同：2
> 
> 时间：2012-08-12T00:07:27.197
> 
> 标签：java, solr, lucene

我有多个 Java 任务可以访问 solr 并按顺序编写和提交一些文档。这些任务通常会更改同一个文档。我的问题是一个任务可能会触发提交、终止、将控制权传递给另一个任务，而另一个任务又会发出另一个提交。在第二个任务开始之前没有完成第一次提交时，我得到 solr lock timeout 异常。

我正在研究的一个解决方案是让这些任务中的每一个都简单地进行更新而不提交。然而，问题是早期任务的变化对后面的任务是不可见的。因此，后面的任务最终会覆盖之前所做的一些更改。

现在，我正在调查是否可以在触发下一个任务之前检测到每个提交的结束。任何的想法？

你们将如何解决这个问题？

这些任务是现成的重要组件，我无法真正改变。

谢谢，马克斯

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T01:21:08.280

听起来您正试图在“任务”终止后在后台进行提交。你最好同步进行提交；即在提交成功（或失败）之前不要终止任务。（我承认我不使用 Solr，而且我不知道您如何将这些想法映射到 Solr API。）

# java - Jibx Codegen：自定义文件 - 每个模式的包

> ID：11918691
> 
> 赞同：0
> 
> 时间：2012-08-12T00:07:46.203
> 
> 标签：java, maven, jibx

我在项目中使用 Jibx maven 插件从 XML 模式 (xsd) 文件生成 Java 源代码。我已将 pom.xml 中的插件配置为使用自定义 xml。在这个 xml 中，我为每个模式定义了一个 Java 包，如下所示：

```
<schema-set>
    <schema name="schema1.xsd" package="com.myApp.jibxgenerated.schema.schema1"/>
    <schema name="schema2.xsd" package="com.myApp.jibxgenerated.schema.schema2" includes="element1" />
    <schema name="schema3.xsd" package="com.myApp.jibxgenerated.schema.schema3" includes="element1 element2" />
</schema-set> 
```

我在这些模式中定义了命名空间。输出的 Java 源文件仍然使用模式中定义的命名空间来创建 Java 包，而忽略了自定义.xml 中的包属性。

我知道customization.xml 正在源代码生成中被读取和使用，因为还有一些其他的自定义可以正常工作。

这是一个错误还是我在这里做错了什么？

提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:24:04.260

在[http://jibx.sourceforge.net/fromschema/codegen-customs.html](http://jibx.sourceforge.net/fromschema/codegen-customs.html)他们将多个 s 嵌套`schema-set`在一个外部`schema-set`. 尝试这个：

```
<schema-set>
  <schema-set package="com.myApp.jibxgenerated.schema.schema1">
    <schema name="schema1.xsd"/>
  </schema-set>
  <schema-set package="com.myApp.jibxgenerated.schema.schema2">
    <schema name="schema2.xsd" includes="element1" />
  </schema-set>
  <schema-set package="com.myApp.jibxgenerated.schema.schema3">
    <schema name="schema3.xsd" includes="element1 element2" />
  </schema-set>
</schema-set> 
```

# php - 为免费服务器编写的 OCR 库

> ID：11918694
> 
> 赞同：0
> 
> 时间：2012-08-12T00:10:02.573
> 
> 标签：php, python, google-app-engine, ocr, openshift

我正在寻找能够在免费服务器上运行的 OCR 库（例如，免费的 Python/PHP 虚拟主机、Google App Engine、OpenShift）。Tesseract 似乎为我的使用提供了足够准确的结果（OCRing 一个简短的单词）。但是，它是用 C 语言编写的，并且无法在免费服务器上运行，或者至少是我目前遇到的那些。我无法提供自己的服务器，因为我没有资源（只有一台不总是打开的笔记本电脑）。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T00:35:13.327

**当我发布这个答案时，谷歌的转换服务似乎是一个很好的解决方案，但在 2012 年 8 月 15 日，谷歌宣布将在 2012 年 11 月放弃转换服务。**

Appengines 转换服务确实支持 OCR developers.google.com/appengine/docs/python/conversion/overview

只要您的实例启用了远程 api，您甚至不需要在服务器上运行它。这是一个通过 remote_api 调用 OCR 服务的示例，而不必在远程服务器上部署代码。

```
App Engine interactive console for qtrack-dev
>>> from google.appengine.api import conversion
>>> asset = conversion.Asset("text/html", "<b>some data</b>", "test.html")
>>> conversion_obj = conversion.Conversion(asset, "image/png")
>>> result = conversion.convert(conversion_obj)
Username:XXXXXg@gmail.com
Password:
>>> result.assets
[<google.appengine.api.conversion.conversion.Asset object at 0x9e4642c>]

>>> open('/tmp/x.png','w').write(result.assets[0].data)
>>> 
```

# objective-c - 通过多线程分配 CoreLocation 和 CoreMotion 更新的最佳设计？

> ID：11918699
> 
> 赞同：1
> 
> 时间：2012-08-12T00:10:40.007
> 
> 标签：objective-c, ios, design-patterns, core-location, core-motion

我有一个`Game`类，它有一个`-(void) play`方法，当用户单击设备上的“播放”按钮时将执行该方法。

在该`-(void) play`方法中，我有一个 while 循环，该循环将重复执行，直到用户单击 Quit 按钮。这个while循环基本上是我代码的核心，所有必要的方法都被调用，事情发生，对象交互等。

我还有一个 User 类（在其他类中..），我在我的 Game 类`User* player`的方法中创建了一个实例`-(void) play`来存储一些值并让这些值在游戏期间与其他事物交互..

现在我需要知道（在游戏中的任何时候......）设备与磁北的偏差以及用户在设备上锻炼的加速度

我已经编写了代码，一切**正常**。但是，作为编程新手，我对代码的整体**设计**有一些疑问，我认为这是**一团糟，尤其是在使用 CoreLocation 和 CoreMotion 框架时**。

Game 类的`-(void) play`方法（基本上是我的“主要”方法）在单独的线程上执行，如`[game performSelectorInBackground:@selector(play) withObject:nil];`这是正确的方法吗？

但是，我从`-(void) play`方法内部初始化 CoreMotion Acceleration 更新，`[motionManager startDeviceMotionUpdatesToQueue:[NSOperationQueue mainQueue]withHandler:^(CMDeviceMotion *motion, NSError *error){...}`这意味着更新将存储在主队列中，而初始化这些更新的方法是从在`-(void) play`单独线程上运行的 method() 内部执行的。那有意义吗？

当我初始化我的 Game 类的实例时，我也会初始化 CoreLocation 更新。更诡异？

我的观点是这样的。鉴于我将测量用户在设备上锻炼的加速度以及他/她给设备的方向（度数），我想将所有这些都封装在我的 User 类中并具有类似`[player getMyDegrees];`的`[player getMyAcceleration];`方法正确的设计方式？我应该在哪里初始化这些更新？从内部哪个特定的类方法？一切都应该运行在同一个主线程还是同一个单独的线程或不同的单独线程上？我很困惑..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:36:29.073

毫无疑问，线程是一个复杂的问题。

> Game 类的 -(void) play 方法（基本上是我的“main”方法）在单独的线程上执行，如 [game performSelectorInBackground:@selector(play) withObject:nil]; 这是正确的方法吗？

这取决于。您在方法中是否有任何工作`-play`必须从主线程中移除（即疯狂的数字运算、服务器请求、加载纹理等）以使 UI 更具响应性？这确实是在 iOS 上将方法分派到后台的唯一原因，是为了维护响应式 UI，因为 UIKit 类不仅是线程不安全的，而且如果您尝试这样做，它们会全心全意地从悬崖上跳下来并带走您的应用程序在后台做任何事情。

> 但是，我从 -(void) play 方法内部初始化 CoreMotion Acceleration 更新……这意味着……这些更新是从在单独线程上运行的方法(-(void) play) 内部执行的。那有意义吗？

好吧，这又取决于这里。线程化的最终目标不是让两个或多个线程尝试访问或改变另一个线程持有的一个对象，这只是一大堆问题的开始。我必须解决的一件事是，尽管[文档](http://developer.apple.com/library/ios/#documentation/CoreMotion/Reference/CMMotionManager_Class/Reference/Reference.html#//apple_ref/occ/instm/CMMotionManager/startAccelerometerUpdatesToQueue%3awithHandler%3a)中有一个非常明确和不祥的警告，但您仍在使用主队列：

> 因为处理的事件可能会以很高的速率到达，**所以不建议使用主操作队列。**

这是您应该将其扔给后台线程的高功率计算之一的示例，这是`NSOperationQueue`的强项。

> 我想将所有内容封装在我的 User 类中，并使用 [player getMyDegrees] 之类的方法；和[玩家getMyAcceleration]；这不是正确的设计方式吗？我应该在哪里初始化这些更新？从内部哪个特定的类方法？

这取决于您尝试的设计方式，以及您认为什么是好的设计。好的代码通常是您可以将其交给其他程序员并让他们从您开始的地方轻松获取的代码。话虽如此，听起来您的用户类将成为 MVC 的控制器部分。如果你的课程太庞大，就把它们删掉。Objective-c 中的类是令人惊讶的轻量级生物。即使在描述通用部分实现的多个类别中安排一个类也很好（例如 NSString 的标题）。

> 一切都应该运行在同一个主线程还是同一个单独的线程或不同的单独线程上？我很困惑..

所有 UI 和轻量级都应该在主线程中运行（或主队列，如果你喜欢这样看的话），所有重度和线程阻塞都应该放在后台线程中。

# c# - 从闪存应用程序捕获数据

> ID：11918700
> 
> 赞同：0
> 
> 时间：2012-08-12T00:10:45.853
> 
> 标签：c#, flash, capture

我正在实施用于赌场自动播放的软件。我正在使用 .NET 技术和 C# 语言。主要问题是如何从赌场游戏中获取数据（这里是游戏的链接 [http://www.bet-at-home.com/redirNetentCasino.aspx?game=lrblackjack2-3h&pff=True](http://www.bet-at-home.com/redirNetentCasino.aspx?game=lrblackjack2-3h&pff=True)）。我从来没有接触过Flash，所以我对这项技术了解不多。

好吧，我知道在游戏中我们有服务器和客户端。服务器正在向客户端发送数据，客户端正在响应。例如，服务器正在发送有关发牌的信息。我的问题是可以捕获服务器发送到客户端的数据，我想是吗？我现在需要知道我收到什么样的卡。此数据以可读格式发送或加密？你能给我一些提示吗？

第二种选择是使用屏幕截图。但这是一种非常慢的方法。你在想什么？？

谢谢你的帮助。

问候，巴勃罗

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:40:12.613

There are a couple of things you can do to interpret data from the game. First, you can use CheatEngine which is mostly the choice of Flash game hackers. The following links will help you get started:

[How to hack flash games with cheat engine 5.5](http://www.youtube.com/watch?v=Ucf-wO7Wqk0)
[How to Cheat and Hack Flash based Games](http://www.raymond.cc/blog/how-to-cheat-and-hack-flash-based-games/)

The above method will not work for server based games like the ones hosted on Facebook. So, your second choice is capturing the network traffic and see what you can gather to attain the required information. For capturing the network from C#, you can use [Pcap.NET](http://pcapdotnet.codeplex.com/). But before you try to do it programmatically, you should try it doing using Fiddler, which gathers plethora of information for you whenever you surf a website or when a plugin like Flash makes use of web.
[Get Fiddler](http://www.fiddler2.com/fiddler2/version.asp) and GL !

# python - 如何为通过外键关联的两个模型创建单个 ModelForm？

> ID：11918704
> 
> 赞同：1
> 
> 时间：2012-08-12T00:11:22.760
> 
> 标签：python, django, django-models, django-forms

我有两个模型：（`User`由 Django 定义）和`UserProfile`. 两者通过 ForeignKey 连接：

```
class UserProfile(models.Model):
  user = models.ForeignKey(User, unique=True)
  age = forms.IntegerField(required=True)
  quantity = forms.IntegerField(required=True) 
```

如何创建一个`Form/ModelForm`包含两个模型的字段属性的？例如，用户模型包含诸如 、 之类的`first_name`字段`last_name`。我将如何创建一个`ModelForm`地址名字、姓氏、年龄、数量的地址？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T07:55:01.767

只需创建一个模型表单

```
class Meta: 
    model=User 
```

并添加您需要的任何其他表单字段，例如**IntegerField**、**ChoiceField**、**CharField**或其他。

# jquery - zClip jQuery 插件没有复制文本输入的新值

> ID：11918705
> 
> 赞同：0
> 
> 时间：2012-08-12T00:11:40.433
> 
> 标签：jquery, input, zclip

在我的 CakePHP 应用程序中，我有一个带有此标记的视图：

```
<div class="copy" id="share-copy"></div>
<input type="text" value="http://site.com/v/<?php echo $imageInfo[0]['Image']['hash']; ?>" name="share" /> 
```

DIV 是一个 16x16的`share-copy`小 div，其中包含 zClip 的 flash 元素。我正在像这样使用 zClip：

```
$('#share-copy').zclip({
    path: '/swf/ZeroClipboard.swf',
    copy: $('input[name="share"]').val(),
    afterCopy: function(){}
}); 
```

现在，它成功复制了名为`share`. 但是，当我使用 jQuery 更改该输入元素中的文本时，如下所示：

```
$('input[name="share"]').attr('value', 'something'); 
```

并再次单击 zClip，它不会复制新值。如何让 zClip`share`在单击时准确复制输入中的内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:19:52.060

问题是

```
$('#share-copy').zclip({
    path: '/swf/ZeroClipboard.swf',
    copy: $('input[name="share"]').val(),
    afterCopy: function(){}
}); 
```

创建一个对象：

```
{path: '/swf/ZeroClipboard.swf', copy: $('input[name="share"]').val(), afterCopy: function(){}} 
```

并且属性的值`copy`是在创建对象时设置的，因此它不会更新。

我想我们可以使用一个函数来解决它：

```
$('#share-copy').zclip({
    path: '/swf/ZeroClipboard.swf',
    copy: function(){return $('input[name="share"]').val();},
    afterCopy: function(){}
}); 
```

# asp.net-mvc - HTTP 错误 500.19 - 内部服务器错误 0x8007052e

> ID：11918709
> 
> 赞同：0
> 
> 时间：2012-08-12T00:12:27.717
> 
> 标签：asp.net-mvc, iis, deployment, iis-7, virtual-directory

我将一个 MVC 项目从另一台开发 PC 复制到我的笔记本电脑，并尝试将其部署在出现此错误的笔记本电脑上。在此错误之前，最近更改了用户帐户密码。我尝试修改根文件夹的应用程序池权限，但没有效果。有任何想法吗？我被困住了。

**HTTP 错误 500.19 - 内部服务器错误**
无法访问请求的页面，因为该页面的相关配置数据无效。

详细的错误信息

**模块** IIS Web 核心
**通知** 未知
**处理**程序尚未确定
**错误代码** 0x8007052e
**配置错误** 无法使用虚拟目录密码
**配置文件**\?\C:\inetpub\temp\apppools作为用户 {MY ACCOUNT} 本地登录到 C:\inetpub\wwwroot \ASP.NET v4.0\ASP.NET v4.0.config
**请求的 URL** `http://localhost:80/hts`
**物理路径**
**登录方法** 尚未确定
**登录用户** 尚未确定

**配置源**

```
145: <application path="/" applicationPool="ASP.NET v4.0">
146:  <virtualDirectory path="/" physicalPath="%SystemDrive%\inetpub\wwwroot" userName="{MY ACCOUNT}" password="[enc:AesProvider:{etc etc etc}:enc]" />
147: </application> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2019-03-12T17:29:53.570

1.  打开 Internet 信息服务 (IIS) 管理器（开始 > 运行 > 键入“inetmgr”）。
2.  使用左侧的导航窗格，浏览到站点 > 默认网站。
3.  右键单击默认网站并选择管理网站 > 高级设置。
4.  将物理路径凭据字段设置为应用程序用户（您必须输入用户和密码）。
5.  单击确定，然后再次单击确定。
6.  右键单击默认网站并选择管理网站 > 重新启动以刷新刚刚所做的更改。
7.  此时，您应该能够在浏览器中重新加载页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-07-19T23:37:56.433

1.  打开 IIS 管理器
2.  选择站点。在我的情况下默认网站，然后单击“基本设置...”
3.  这将打开“编辑站点”对话框。单击“连接为”。
4.  在 Connect As 对话框中，单击 Set 并在 Set Credentials 对话框中提供新密码。
5.  返回编辑站点对话框并单击“测试设置...”
6.  连接成功后，您应该能够在浏览器中成功打开该站点。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-08T20:10:27.683

我最终重新安装了视觉工作室并最终使一切正常。

# visual-studio - 在 VS Postbuild 中使用 Robocopy - 移动文件时自动覆盖

> ID：11918713
> 
> 赞同：1
> 
> 时间：2012-08-12T00:12:54.503
> 
> 标签：visual-studio, robocopy

我在 VS 中尝试了以下 postbuild 命令将所有 dll 和其他相关文件复制到一个集中文件夹中：

```
robocopy $(TargetDir) $(TargetDir)Bin *.dll *.pdb *.xml  /MOVE 
```

如果 Bin 文件夹还没有这些文件，它会成功移动它们。但在第二次执行后，文件并没有移动。我怀疑它失败了，因为那里的文件已经存在。是否有在不提示的情况下强制覆盖的开关？我查看了 robocopy 的可能开关，但找不到我正在寻找的那个。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T00:23:52.653

我猜 Robocopy 拒绝移动它检测到的文件在后续运行中是相同的。您应该能够使用 /IS（包括相同）和 /IT（包括调整）标志强制它这样做 - 即，

```
robocopy $(TargetDir) $(TargetDir)Bin *.dll *.pdb *.xml /IS /IT /MOVE 
```

# android - 在行中居中gridview列

> ID：11918718
> 
> 赞同：1
> 
> 时间：2012-08-12T00:13:43.287
> 
> 标签：android, gridview, center, children

我有一个gridview，有一定数量的列（比如说5）。但是，如果我在图像适配器中设置了 6 个图像，则第 6 个图像会自动转到新行，并分配到第一列。我正在寻找的行为是自动（或以某种方式以编程方式）将额外的子元素居中在新行中......例如：

```
A B C D E
    F 
```

这是我为 gridview 提供的 XML：

```
<GridView android:id="@+id/gridview" android:layout_width="fill_parent"
android:layout_height="wrap_content" android:columnWidth="10dip"
android:numColumns="10" android:horizontalSpacing="10dip"
android:stretchMode="columnWidth"
xmlns:android="http://schemas.android.com/apk/res/android"
android:verticalSpacing="3dp"
android:layout_below="@+id/TopLayout"
android:layout_gravity="center"></GridView> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:46:15.977

您不能更改给定行的列数。我能想到的唯一技巧是使用奇数列并在您的适配器所基于的列表中插入 void 条目。例如，如果您有 5 个列和 6 个图像，则在位置 5 和 6 插入 2 个 void 条目，以便您的最后一个图像居中。

# c# - 在窗体上添加此控件后，在 Windows 窗体应用程序中控件的位置发生了变化

> ID：11918722
> 
> 赞同：0
> 
> 时间：2012-08-12T00:14:16.453
> 
> 标签：c#, .net, winforms, user-controls, position

我正在使用 Visual Studio 2010 和 C# 开发一个 Windows 窗体应用程序。我创建了一个用户控件来显示详细信息屏幕。当我将此用户控件添加到另一个表单或面板容器中的用户控件时，控件位置会更改。我使用了 doc 属性，但仍然看到这个问题。

```
PanelCancelledConainer.Controls.Clear();
InquiryDetailsCls.InquiryID = Convert.ToInt32(GridInquiry.SelectedRows[0].Cells[0].Value.ToString());
CtrlInqDetails inqDetails = new CtrlInqDetails(InquiryDetailsCls.InquiryID, 1);
inqDetails.Dock = DockStyle.Fill;
PanelCancelledConainer.Controls.Add(inqDetails); 
```

我该怎么做才能使用户控件看起来像在设计模式下一样？

从评论中添加的图像：

![在此处输入图像描述](../Images/5fad01816ff3fbb6934fc54003963a3a.png)

![在此处输入图像描述](../Images/450cb041c5eedf8a161c7055ae6ba204.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:47:59.980

尝试在容器上设置用户控件的索引位置，即：

```
PanelCancelledConainer.Controls.SetChildIndex(inqDetails, 0); 
```

你会确定这是第一个孩子。

# jquery - jquery 通过 id 选择器更改 css

> ID：11918724
> 
> 赞同：0
> 
> 时间：2012-08-12T00:14:32.407
> 
> 标签：jquery, css

我想通过 id 更改特定样式的 div。但是，它似乎根本不起作用。必要的代码如下：

查询：

```
$(document).ready(function () {

$(".a_10.08.201223:56:49").hover(function(){
        $("#10.08.201223:56:49").removeClass('arrow-up').addClass('arrow-up2');

    }).mouseout(function(){
        $("#10.08.201223:56:49").removeClass('arrow-up2').addClass('arrow-up2');        
    });
}); 
```

HTML：

```
 <div class = "a_10.08.201223:56:49">

    Something in here

        <div class="arrow-up" id="10.08.201223:56:49"></div>
</div> 
```

这个想法是这个ID是评论的日期。例如，10.08.201223:56:49 id 是特定评论的日期，a_10.08.201223:56:49 类表示要触发的区域。当它悬停在上面的 div 上时，将显示子 div(箭头)。当鼠标离开上层时，箭头会消失。到目前为止，我似乎无法做到这一点。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T00:21:14.917

您必须转义 jquery 选择器中使用的特殊字符，例如`:`等`.`。

**[现场演示](http://jsfiddle.net/rajaadil/8ZyUp/2/)**

```
$(document).ready(function () {

$(".a_10\\.08\\.201223\\:56\\:49").hover(function(){

        $("#10\\.08\\.201223\\:56\\:49").removeClass('arrow-up').addClass('arrow-up2');

    }).mouseout(function(){
        $("#10\\.08\\.201223\\:56\\:49").removeClass('arrow-up2').addClass('arrow-up2');        
    });
});​ 
```

# java - 格式化秒表以显示 00:00

> ID：11918729
> 
> 赞同：3
> 
> 时间：2012-08-12T00:15:25.250
> 
> 标签：java, android, stopwatch

我正在尝试在我的一个应用程序中使用秒表，我已经将它带到了它将开始计数秒数并停止计数停止的位置。我的问题是它会在 60 秒后继续。例如，如果我等了两分钟，我会得到 120 秒。

所以我的问题是我***怎样才能做到这一点，一旦秒数达到 60 分钟就会增加一秒并且秒数会重新开始？***

所以我会得到 2:00 而不是 :120。这是我的代码：

```
final int MSG_START_TIMER = 0;
final int MSG_STOP_TIMER = 1;
final int MSG_UPDATE_TIMER = 2;

Stopwatch timer = new Stopwatch();
final int REFRESH_RATE = 100;

Handler mHandler = new Handler()
{
    @Override
    public void handleMessage(Message msg) {
        super.handleMessage(msg);
        switch (msg.what) {
        case MSG_START_TIMER:
            timer.start(); 
            mHandler.sendEmptyMessage(MSG_UPDATE_TIMER);
            break;

        case MSG_UPDATE_TIMER:              
            tvTextView.setText(":"+ timer.getElapsedTimeSecs());                
            mHandler.sendEmptyMessageDelayed(MSG_UPDATE_TIMER,REFRESH_RATE); 
            break;                                  
        case MSG_STOP_TIMER:
            mHandler.removeMessages(MSG_UPDATE_TIMER); 
            timer.stop();
            tvTextView.setText("");
            break;

        default:
            break;
        }
    }
}; 
```

还有：

```
 public void start(View v) {
    mHandler.sendEmptyMessage(MSG_START_TIMER);
}

public void stop(View v) {
    mHandler.sendEmptyMessage(MSG_STOP_TIMER);
} 
```

顺便说一句，我查看了[这个问题](https://stackoverflow.com/questions/5709304/how-show-minutes-and-seconds-with-stopwatch)，但他的问题在于 TimeSpan，如果我理解正确，这与秒表不同（如果我错了，请纠正我）。感谢您的时间和精力。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T00:50:30.817

如果您从以秒为单位的时间开始：

```
display = String.format("%d:%02d", seconds / 60, seconds % 60); 
```

如果您不希望分钟数为 0：

```
if (seconds < 60)
    display = String.format("%02d", seconds);
else
    display = String.format("%d:%02d", seconds / 60, seconds % 60); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T00:30:12.940

您只需要创建一个为您创建字符串的函数。将其存放在可到达的地方。

```
 public String NumToStr(long i){
        if (i < 10 ) {
            return ("0" + Long.toString(i));
        }
        return Long.toString(i);
    } 
```

这将采用任何小于 10 的数字，并为您提供一个数字前面带有“0”的字符串。

即发送一个 7 并得到“07”，然后发送一个 55 并得到“55”，因为它不少于 10。最后发送它的秒数 5 并得到“05”。现在把字符串加在一起，

```
 Hour + ":" + Minute + ":" + Seconds; 
```

你会得到“07:55:05”

接下来就放一个

```
 if (seconds > 60) {
        seconds = 0
        minutes++; 
    }
    if (minutes > 60) {
        minutes = 0
        hours++;
    }
    if (hours > 12) {
        hours = 0
    } 
```

恕我直言，这是基本的东西。

作为回应，你应该把所有这些放在哪里？随你喜欢。但是您需要重做一些代码。

```
 case MSG_UPDATE_TIMER:
        long TimePassed;
        TimePassed = Seconds;
        if (Minutes > 0) {
            TimePassed = TimePassed  + (60 * Minutes);
        }
        if (Hours > 0) {
            TimePassed = TimePassed + (60 * 60 * Hours);
        }

        Seconds =  (timer.getElapsedTimeSecs()- TimePassed );

        if (Seconds > 60) {
            Seconds = 0
            Minutes++; 
        }
        if (Minutes > 60) {
            Minutes = 0
            hours++;
        }
        String timeSecs = NumToStr(Seconds);
        String timeMins = NumToStr(Minutes);
        String timeHours = NumToStr(Hours);

        String Time = timeHours + ":" + timeMins + ":" + timeSecs; 

        tvTextView.setText(Time);   

        mHandler.sendEmptyMessageDelayed(MSG_UPDATE_TIMER,REFRESH_RATE); 
        break; 
```

# jquery - IE 将 jQuery mousedown/mouseup 视为双击

> ID：11918730
> 
> 赞同：0
> 
> 时间：2012-08-12T00:15:30.587
> 
> 标签：jquery, internet-explorer

IE9 使我的 jQuery 中的 mouseup 命令行为异常。mousedown 命令会触发，但 mouseup 命令不会。相反，用户必须双击该按钮来触发 mouseup 命令。我可以点击一下，但它会删除我喜欢的按钮效果，所以我更愿意保留它。

jQuery;

```
$('#voteButton').live('mousedown', function(){

   $(this).replaceWith('<img src="files/images/voting_button_active.png" width="100" height="100" alt="Vote Button" id="voteButton">');

   }).live('mouseup', function(){
   $(this).replaceWith('<img src="files/images/voting_button.png" width="100" height="100" alt="Vote Button" id="voteButton">');
    $('#votePanel').load('template/votePanel.php');

}); 
```

注意： mouseup 命令上的 replaceWith 只是为了防止 mouseup 被取消

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:38:50.207

设置`html`元素的而不是替换整个元素似乎效果更好一些：

```
$('#voteButton').live('mousedown', function(){
    $(this).html('<img src="files/images/voting_button_active.png" width="100" height="100" alt="Vote Button" id="voteButton">');
}).live('mouseup', function(){
    $(this).html('<img src="files/images/voting_button.png" width="100" height="100" alt="Vote Button" id="voteButton">');
    $('#votePanel').load('template/votePanel.php');
}); 
```

显然，这将需要更改您的标记——基本上您将使用容器元素并换出内部内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:18:08.127

Andrew 提供的 jsfiddle 在 IE9 中为我工作。您是否检查过在提供第一张图像时是否不小心将光标移动到了调整大小的 div 的范围之外？仅当您仍在 div 中时才会触发 mouse-up 事件。您可能希望附加到 mouseout 事件并在 mousedown 上设置状态，以便如果在 mousedown 处于活动状态时将鼠标移出 div，它会将 mouseout 视为 mouseup。

编辑：将 prevent default 添加到 mousedown 事件，随后的 mouseup 应该在 IE9 中适当地触发。

```
$(function () {
    $("#vote").live("mousedown", function () {
        event.preventDefault();
        $(this).replaceWith("<img src='http://www.placekitten.com/100/100' id='vote' />");        
    }).live("mouseup", function () {
        $(this).replaceWith("<img src='http://www.placekitten.com/200/200' id='vote' />");
    });
});​ 
```

# python - 尝试使用 selenium 和 python 登录网页时出错

> ID：11918735
> 
> 赞同：5
> 
> 时间：2012-08-12T00:16:45.340
> 
> 标签：python, selenium, login

我得到一个元素不可见错误：

```
ElementNotVisibleException: Message: u'Element is not currently visible and so may 
not be interacted with' 
```

对于我运行此代码时的每个查找元素行：

```
from selenium import webdriver
browser = webdriver.Firefox()
browser.get('http://www.example.com')
browser.find_element_by_name('username').send_keys('myusername')
browser.find_element_by_name('password').send_keys('mypassword')
browser.find_element_by_class_name('welcomeLoginButton').click() 
```

页面登录部分的 HTML 如下所示：

```
<div class='welcomeLoginUsername'>
<div class='welcomeLoginUsernameLabel'><b>Username:</b></div>
<div class='welcomeLoginUsernameInput'><input type='text' name='username' tabindex='1'>
<br><a class='sf' href='javascript: void(0);' onclick='showUsernamePopup();'>
<b>Forgot Username?</b></a>
</div>
</div>
<div class='welcomeLoginPassword'>
<div class='welcomeLoginPasswordLabel'>
<b>Password:</b>
<br><span class='sf'>(It's cAsE sEnSitIvE!)</span>
</div>
<div class='welcomeLoginPasswordInput'>
<input type='password' name='password' tabindex='2'>
<br><a class='sf' href="javascript: void(0);" onclick="showPasswordPopup();">
<b>Forgot Password?</b></a>
</div>
</div>
</div>
<input type="submit" value="" class='welcomeLoginButton' style='border: 0px; 
padding: 0px; margin: 0px;) no-repeat;' onclick='document.forms["login"].submit()'> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T22:27:18.980

Selenium 以与用户类似的方式与 Web 浏览器交互。因此，如果您尝试与之交互的 html 元素不可见，那么最简单的解释是，当您编写 selenium 代码时，您不会像普通用户那样与网页交互。

最后，这与您的网页的 html 无关，而是与 DOM 和元素的隐藏属性有关。我建议您下载 firebug 或其他一些 html 查看器程序，然后突出显示您要按下的按钮。对 html 查看器使用 DOM 查找并手动完成登录过程。注意你必须做什么才能使元素可见以便与之交互，然后在你的 selenium 代码中模仿相同的步骤。

如果事实上您已经完成了您需要做的所有事情，但是 selenium 与网页的交互速度比 javascript 使元素可见的速度更快，那么您必须进行编程。

天真的方式：

```
import time
time.sleep(1) # this is done in seconds 
```

更具可扩展性的方式：

```
import time

welcome_button = browser.find_element_by_class_name('welcomeLoginButton')

wait_for_element_visibility(welcome_button).click()

def wait_for_element_visibility(element):
   if element.is_visible():
      return element
   else:
      for i in range(10):
         if not element.is_visible():
            time.sleep(.5)
         else:
            return element 
```

# php - while（使用数组游标）与 foreach

> ID：11918736
> 
> 赞同：1
> 
> 时间：2012-08-12T00:16:57.993
> 
> 标签：php, list, foreach, while-loop, iteration

我正在查看同时实现以下两种迭代方法的代码块。我想知道这两种迭代方法之间是否存在实际差异？

```
while (list($module) = each($module_list)) {
...
} 
```

和

```
foreach ($module_list as $module) {
...
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T00:18:40.510

后者更具可读性。使用隐式更改数组游标的函数可能是有原因的，但对所有值的简单迭代不是这种情况。

# spring-mvc - 在嵌入式码头中托管 Spring Web 服务

> ID：11918739
> 
> 赞同：0
> 
> 时间：2012-08-12T00:17:35.480
> 
> 标签：spring-mvc, embedded-jetty

问题：在嵌入式 Jetty 中托管一个 Spring Web 服务。
这需要适用于单元测试和产品环境。应用程序打包在一个 jar 中，入口点启动 Jetty 之外的其他服务。在 WEB-INF 上使用 WAR 文件/setwar/WebApplicationContext 不是一个选项，因为包是 jar。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:17:35.480

```
 Server jettyServer = new Server(8080);
    DispatcherServlet springServlet = new DispatcherServlet();
    springServlet.setContextConfigLocation("classpath:spring-servlet.xml");
    final ServletContextHandler contextHandler = new
            ServletContextHandler(ServletContextHandler.SESSIONS);
    contextHandler.setContextPath("/");
    contextHandler.addServlet(new ServletHolder(springServlet), "/*");
    jettyServer.setHandler(contextHandler);

    contextHandler.getInitParams().put("contextConfigLocation", "classpath:applicationContext.xml");
    ContextLoaderListener listener = new ContextLoaderListener();
    contextHandler.addEventListener(listener);

    jettyServer.start();
    jettyServer.join(); 
```

# jquery - 当拖到容器外时，如何使我的可分类物品消失？

> ID：11918745
> 
> 赞同：4
> 
> 时间：2012-08-12T00:18:09.733
> 
> 标签：jquery, jquery-ui

我想让 jquery UI 元素在拖出容器时消失。

例如说我有一个列表

```
<div class="myfavoritecontainer">
   <ul class="sortable">
   <li>item1</li>
   <li>item2</li
  </ul> 
</div> 
```

并且可排序变成了可排序的jquery ui ...现在，当我将这些项目拖出排序列表时，我想让它们消失...最好的方法是什么？

稍微澄清一下我正在尝试做的事情：参考这个 jsfiddle：http: [//jsfiddle.net/nveid/kQmWt/4/](http://jsfiddle.net/nveid/kQmWt/4/)

基本上，我将右侧列表中的项目添加到左侧列表中（部分已完成！），其次是列表左侧的项目，当我拖到左侧列表之外时，我想让它们消失。如果您在拖动左侧内容时查看您的 js 控制台，您会仔细看到我正在尝试完成的工作。但我只是没有完成它，因为在鼠标左键触发后立即触发了 mouseenter。事件触发发生的确切原因我不知道，但小提琴应该给出一些澄清。

最好我可以做到这一点，只要您将鼠标从其 div 容器外部的左侧拖动项目，它们就会消失，但我会设置为在它们恢复到原始位置后，li 项目将消失，但mouseenter/mouseleave 事件不适合我。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T02:07:30.433

我看起来您需要使用 beforeStop 删除项目并根据反复来维护哨兵，以确定您是否已移出容器边界。我基于上一篇文章：[Jquery Sortable, delete current Item by drag out](https://stackoverflow.com/questions/3377161/jquery-sortable-delete-current-item-by-drag-out)

jsFiddle 编辑在可排序的定义中看起来像这样：

```
 over: function(e, ui) { sortableIn = 1; },
        out: function(e, ui) { sortableIn = 0; },
        beforeStop: function (event, ui) {
            newItem = ui.item;
            if (sortableIn == 0) { 
              ui.item.remove(); 
           }
        }, 
```

# java - 读取txt文件内容并存储在数组中

> ID：11918747
> 
> 赞同：1
> 
> 时间：2012-08-12T00:18:33.533
> 
> 标签：java, android, eclipse

我一直在尝试读取 txt 文件。txt 文件包含行，例如

```
First Line
Second Line
Third Line
.
.
. 
```

现在我正在使用以下代码

```
InputStream is = null;
try {
    is = getResources().getAssets().open("myFile.txt");
} catch (IOException e) {
// TODO Auto-generated catch block
    e.printStackTrace();
}

ArrayList<String> arrayOfLines = new ArrayList<String>();

Reader reader;
//char[] buffer = new char[2048];
try {
    Reader = new BufferedReader(new InputStreamReader(is, "UTF-8"));
    int n;
    while   ((n = reader.read()) != -1) {

    }
}catch (Exception e) {
    e.printStackTrace();
} 
```

我的问题是，如何将每一行存储在 arrayList 中。Ofc 我们必须使用检查`"/n"`但是如何。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T00:23:34.697

您也可以使用[`Scanner`](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html)该类。

```
Scanner in = new Scanner(new File("/path/to/file.txt"));
while(in.hasNextLine()) {
    arrayOfLines.add(in.nextLine());
} 
```

您不必担心`\n`，因为[`Scanner.nextLine()`会跳过换行符。](http://docs.oracle.com/javase/7/docs/api/java/util/Scanner.html#nextLine%28%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-12T00:25:39.553

这段代码应该可以工作。

```
 ArrayList<String> arrayOfLines = new ArrayList<String>();
 FileInputStream fstream = new FileInputStream("myfile.txt");
  DataInputStream in = new DataInputStream(fstream);
  BufferedReader br = new BufferedReader(new InputStreamReader(in));
  String strLine;
  while ((strLine = br.readLine()) != null)   {
  arrayOfLines.add(strLine);
  } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T00:22:22.670

这个：

```
int n;
while   ((n = reader.read()) != -1) {

} 
```

应该看起来更像这样：

```
String line = reader.readLine();
while   (line!=null) {
    arrayOfLines.add(line);
    line = reader.readLine();
} 
```

由于您使用的是 a `BufferedReader`，因此您应该调用`readLine()`而不是读入 char 缓冲区。`Reader`声明也需要是`BufferedReader`.

# css - 如何将垂直空间添加到水平列表？

> ID：11918750
> 
> 赞同：0
> 
> 时间：2012-08-12T00:18:50.280
> 
> 标签：css, html-lists

我有一个无序列表，其中列表项已设置为 display:inline。我喜欢它的外观，但是当项目换行到下一行时，项目之间的垂直空间重叠。

我尝试在 li 项目、ul 项目和包含这些项目的 div 上设置边距。li 项目不会扩展，也不会使用我通过 div 提供的额外空间。

这是它目前的样子的屏幕截图： ![一组在垂直方向上靠得太近的菜单项](../Images/a57afce9cfcd2062525c077e876e5cb0.png)

HTML：

```
<div class="hometrailertypes">
 <ul>
  <li><a href="/utility/Box_Series">Box Series</a></li>
  <li><a href="/utility/Landscaper_Series">Landscaper Series</a></li>
  <li><a href="/utility/ATV/Utility_Series">ATV/Utility Series</a></li>
  <li><a href="/utility/Snowmobile_Hauler_Series">Snowmobile Hauler Series</a></li>
  <li><a href="/utility/Car_Hauler_Series">Car Hauler Series</a></li>
  <li><a href="/utility/Tandem_Flatbed_Series">Tandem Flatbed Series</a></li>
  <li><a href="/utility/Deckover_Series">Deckover Series</a></li>
  <li><a href="/utility/All_Purpose/Equipment_Floats">All Purpose/Equipment Floats</a></li>
  <li><a href="/utility/Dumps">Dumps</a></li>
  <li><a href="/utility/Mini_Series">Mini Series</a></li>
  <li><a href="/utility/Scissor_Lift_Series">Scissor Lift Series</a></li>
  <li><a href="/utility/Telescopic_Lift_Series">Telescopic Lift Series</a></li>
  <li><a href="/utility/Combo_Series">Combo Series</a></li>
 </ul>
</div> 
```

CSS：

```
.hometrailertypes>ul
{
    list-style-type: none;
    text-align: center;
}
.hometrailertypes>ul>li
{
    display: inline;
}
.hometrailertypes>ul>li>a
{
    padding: .2em .1em;
    background-color: #036;
    color: #fff;
    text-decoration: none;
}
.hometrailertypes>ul>li>a:hover
{
    background-color: #369;
    color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T00:24:08.087

你应该尝试`display:inline-block`而不是`inline`.

这样，项目不会换行到下一行，您也不会有问题。好吧，第一行会有一些项目，第二行会有一些项目......但是它们都不会中断，因为它们的行为就像块一样，前后没有换行符。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T00:26:14.500

尝试这个

```
.hometrailertypes>ul>li
{
    display: inline-block;
    margin:2px 0px;
}
.hometrailertypes>ul>li>a
{
    padding: .2em .1em;
    background-color: #036;
    color: #fff;
    text-decoration: none;
    display: inline-block;
} 
```

[**演示**](http://jsfiddle.net/heera/zTFbQ/1/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T00:36:33.863

我会这样：

```
.hometrailertypes>ul>li
{
    display:inline;
    line-height:24px; /*set your desired height that way*/
} 
```

除了其他答案所说的之外，我建议保留显示，`inline`因为`inline-block`在某些“旧”浏览器中不起作用，参见。[http://caniuse.com/inline-block](http://caniuse.com/inline-block)因此，如果您有等效的选项，`line-height`请改用，这不会花费您任何费用。

# c++ - 无法创建模板向量迭代器

> ID：11918756
> 
> 赞同：1
> 
> 时间：2012-08-12T00:19:59.113
> 
> 标签：c++, templates, generics, stl

我有一个模板类，我想在一个中添加这个类的实例`vector`，然后遍历它`vector`。

使用以下代码：

```
template <typename T>
class a { };

template <typename T>
void test(vector< a<T> >) {
    vector< a<T> >::iterator it;
} 
```

我得到错误：

```
In function ‘void test(std::vector<a<T>, std::allocator<a<T> > >)’:
error: expected `;' before ‘it’ 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:21:22.453

你需要

```
typename vector< a<T> >::iterator it; 
```

因为`iterator`在这种情况下是一个从属名称。这意味着编译器无法知道`something<template parameter>::iterator`是类​​型还是其他东西。显式添加`typeneme`关键字可以解决该问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T00:21:41.267

```
template <typename T>
void test(vector< a<T> >) {
    vector< a<T> >::iterator it;
} 
```

迭代器是`dependent-name`. 采用`typename vector<a<T> >::iterator it;`

n3337 14.6/2

> 在模板声明或定义中使用并且依赖于模板参数的名称被假定为不命名类型，除非适用的名称查找找到类型名称或该名称由关键字 typename 限定。

# ios - 将自定义字体动态加载到 iOS

> ID：11918758
> 
> 赞同：2
> 
> 时间：2012-08-12T00:20:47.357
> 
> 标签：ios, core-text, uifont

> **可能重复：**
> [iPhone - 将 CTFont 转换为 UIFont？](https://stackoverflow.com/questions/6714858/iphone-convert-ctfont-to-uifont)

你知道我如何能够在编译前将自定义字体动态添加到 iOS 而不将其添加到项目中吗？

我正在研究在应用程序运行时下载字体，然后动态加载以供使用的场景。

如果这是可能的，我想在加载它后将它用作 UIFont。

我已经搜索了一些可能性来做到这一点，发现我可以使用 CoreText 加载字体：

```
- (CTFontRef)newCustomFontWithFileName:(NSString *)fontFileName
                                ofType:(NSString *)type
                               andSize:(float)pointSize
{
    NSString *fontPath = [[NSBundle mainBundle] pathForResource:fontFileName ofType:type];
    NSData *data = [[NSData alloc] initWithContentsOfFile:fontPath];
    CGDataProviderRef fontProvider = CGDataProviderCreateWithCFData((CFDataRef)data);
    [data release];

    CGFontRef cgFont = CGFontCreateWithDataProvider(fontProvider);
    CGDataProviderRelease(fontProvider);

    CTFontRef font = CTFontCreateWithGraphicsFont(cgFont, pointSize, NULL, NULL);
    CGFontRelease(cgFont);
    return font;
} 
```

但是，这样做之后，是否可以将 CTFontRef 转换为 UIFont 以便在整个应用程序中使用？

请让我知道你们知道/想什么！:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:31:29.297

从 iOS 5.1 开始，没有`UIFont`从 a`CGFont`或 a创建 a 的公共 API `CTFont`。你运气不好。:(

如果您希望他们为此添加 API，请在[http://bugreport.apple.com](http://bugreport.apple.com)上打开功能请求。

# performance - AS3 瓦片地图渲染（包含 1000 个瓦片）

> ID：11918759
> 
> 赞同：6
> 
> 时间：2012-08-12T00:20:54.740
> 
> 标签：performance, actionscript-3, tiles, starling-framework

首先，我会说这里的上下文是 Actionscript 3.0 (IDE: Flashbuilder) 以及[Starling Framework](http://gamua.com/starling/)。

所以，我想创建一个可用于平台游戏或类似游戏的平铺地图。

我想在 800x600 像素舞台上使用 8x8 像素图块，我遇到的问题是我不知道如何在不显着降低帧速率的情况下将这些 7500 多个图块对象添加到舞台。

我发现性能下降来自于将每个图块添加到舞台，而不是初始化每个图块对象。

我知道我没有提供太多具体信息，但我要问的是是否有一种标准化的方法可以在不损失性能的情况下将数千个静态对象绘制到舞台上。我觉得有一种方法，我只是还没有找到它。

**更新：**

在您的所有善意帮助之后，我找到了似乎是一个很好的解决方案。起初我想实现 Amy 的解决方案，使用 copyPixels() 和 draw() 为整个地图制作一个大的位图数据，然后将其渲染到屏幕上。然后，虽然，我想知道是否有与此等效的 Starling，因为如果我不必将 Starling 与 Native Flash 混合，一切都会简单得多。

再次感谢 Amy，我进一步研究了 Starling 的 RenderTexture 类，发现使用它的“drawBundled()”和“draw()”方法，我可以轻松地将所有图块绘制到 RenderTexture 中，然后将 RenderTexture进入一个图像（Starling 的图像类），然后将该图像添加到屏幕上。

该解决方案比我之前尝试过的愚蠢的慢速解决方案快一百万倍，具有扁平化的精灵等。它的初始化时间更快，而且当 renderTexture 的图像在屏幕上时，帧率似乎没有下降。

我想测试的一件事是在游戏过程中是否可以轻松更新图块的图形。比如说，如果水从源头（或某物）扩散，并且“草”图块必须变成“水”图块，那么 RenderTexture 和它的图像是否能够在没有某种延迟峰值或性能故障的情况下改变它们的外观。我很快就会对此进行测试。

谢谢大家的帮助！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T02:07:57.290

不要在舞台上添加那么多对象。相反，创建一个与舞台大小相同的 BitmpaData 并使用 copyPixels() 或 draw() 在其上绘制。[这是一篇](http://www.developria.com/2010/02/dealing-with-bitmapdata.html)可以帮助您入门的文章。然后，您可以使用您在该帖子中学到的概念，并学习您需要做的任何具体未涉及的事情（flashandmath.com 有很多关于像素操作的好教程）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T00:37:18.977

您需要管理在游戏中移动时需要添加和删除的图块。仅添加到屏幕中心 800 像素内的舞台图块。一旦瓷砖距离中心超过 800 像素，将其移除。这应该使一切顺利进行。祝你好运。

或查看将您的图块绘制/复制到一个位图中。您将基本上将您的图块压印到新的位图上。以下是 adobe 中的示例：

```
import flash.display.Bitmap;
import flash.display.BitmapData;
import flash.geom.Rectangle;
import flash.geom.Point;

var bmd1:BitmapData = new BitmapData(40, 40, false, 0x000000FF);
var bmd2:BitmapData = new BitmapData(80, 40, false, 0x0000CC44);

var rect:Rectangle = new Rectangle(0, 0, 20, 20);
var pt:Point = new Point(10, 10);
bmd2.copyPixels(bmd1, rect, pt);

var bm1:Bitmap = new Bitmap(bmd1);
this.addChild(bm1);
var bm2:Bitmap = new Bitmap(bmd2);
this.addChild(bm2);
bm2.x = 50; 
```

[有关 bitmapData 类的更多信息。我认为 copyPixels 是您所追求的。](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/display/BitmapData.html#copyPixels%28%29)

# django - Django 中的 URL.py 意外行为

> ID：11918760
> 
> 赞同：0
> 
> 时间：2012-08-12T00:21:10.540
> 
> 标签：django, url, apache2, mod-wsgi, configuration-files

我已经按照 Django 文档的不同位置中的说明配置了 url.py，但是在连续访问之间，它的行为是完全异常的。在调试模式下并在查找 url 后，我收到“找不到页面”错误。奇怪的是，在访问之间给出的错误是不同的：

```
... Django tried these URL patterns, in this order:

    ^admin/?$
    ^cheqsim/?$
    ^login/?$
    ^logout/?$
    ^questions/?$ 
```

但是，如果我查看 url.py，我的最后一个元素是 ^searchquestions/?$ 并且在查看它之前我已经重新启动了服务器，但是错误表明我的 urlpattern 与 url.py 中的实际不同。

然后我继续查找 URL，当我删除所有 cookie 并尝试一些不存在的 URL 时，我得到了实际的 URL.py：

```
, Django tried these URL patterns, in this order:
    ^login/?$
    ^logout/?$
    ^admin/?$
    ^cheqsim/?$
    ^searchquestions/?$ 
```

好的，所以现在我尝试[http://mysite.com/myprojecturl/searchquestions/](http://mysite.com/myprojecturl/searchquestions/)瞧！似乎出现了一个新的模式错误，让我彻底崩溃：

```
, Django tried these URL patterns, in this order:
    ^admin/?$
    ^cheqsim/?$
    ^login/?$
    ^logout/?$ 
```

我在 5 或 6 小时前使用过的模式！！！

拜托，有没有人知道发生在我身上的事情，因为这真的很令人沮丧......

非常感谢

PS：顺便说一下，有些 URL 有时会神奇地匹配

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:41:25.807

1.  检查您是否有多个 runserver 实例正在运行。
2.  检查[ROOT_URLCONF](https://docs.djangoproject.com/en/dev/ref/settings/#std%3asetting-ROOT_URLCONF)设置

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:29:43.067

似乎解决方案正在更改 project.wsgi 文件，并在此处进行了很好的解释：[http ://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html](http://blog.dscpl.com.au/2010/03/improved-wsgi-script-for-use-with.html)

反正只有时间会知道... xD

# mysql - 无法连接到netbeans中的本地mysql服务器

> ID：11918765
> 
> 赞同：0
> 
> 时间：2012-08-12T00:22:13.923
> 
> 标签：mysql, netbeans

我正在为一个周末项目试验 netbeans 和 Java，我很难让 netbeans 连接到我的本地 mysql 服务器。

这是 my.cnf 的内容：

```
# MySQL config file for medium systems.
#
# This is for a system with little memory (32M - 64M) where MySQL plays
# an important part, or systems up to 128M where MySQL is used together with
# other programs (such as a web server)
#
# MySQL programs look for option files in a set of
# locations which depend on the deployment platform.
# You can copy this option file to one of those
# locations. For information about these locations, see:
# http://dev.mysql.com/doc/mysql/en/option-files.html
#
# In this file, you can use all long options that a program supports.
# If you want to know which options a program supports, run the program
# with the "--help" option.

# The following options will be passed to all MySQL clients
[client]
#password   = your_password
port        = 3306
socket      = /var/run/mysqld/mysqld.sock

# Here follows entries for some specific programs

# The MySQL server
[mysqld]
port        = 3306
socket      = /var/run/mysqld/mysqld.sock
datadir     = /var/lib/mysql
skip-external-locking
key_buffer_size = 16M
max_allowed_packet = 1M
table_open_cache = 64
sort_buffer_size = 512K
net_buffer_length = 8K
read_buffer_size = 256K
read_rnd_buffer_size = 512K
myisam_sort_buffer_size = 8M

# Don't listen on a TCP/IP port at all. This can be a security enhancement,
# if all processes that need to connect to mysqld run on the same host.
# All interaction with mysqld must be made via Unix sockets or named pipes.
# Note that using this option without enabling named pipes on Windows
# (via the "enable-named-pipe" option) will render mysqld useless!
# 

# Replication Master Server (default)
# binary logging is required for replication
log-bin=mysql-bin

# binary logging format - mixed recommended
binlog_format=mixed

# required unique id between 1 and 2^32 - 1
# defaults to 1 if master-host is not set
# but will not function as a master if omitted
server-id   = 1

# Replication Slave (comment out master section to use this)
#
# To configure this host as a replication slave, you can choose between
# two methods :
#
# 1) Use the CHANGE MASTER TO command (fully described in our manual) -
#    the syntax is:
#
#    CHANGE MASTER TO MASTER_HOST=<host>, MASTER_PORT=<port>,
#    MASTER_USER=<user>, MASTER_PASSWORD=<password> ;
#
#    where you replace <host>, <user>, <password> by quoted strings and
#    <port> by the master's port number (3306 by default).
#
#    Example:
#
#    CHANGE MASTER TO MASTER_HOST='125.564.12.1', MASTER_PORT=3306,
#    MASTER_USER='joe', MASTER_PASSWORD='secret';
#
# OR
#
# 2) Set the variables below. However, in case you choose this method, then
#    start replication for the first time (even unsuccessfully, for example
#    if you mistyped the password in master-password and the slave fails to
#    connect), the slave will create a master.info file, and any later
#    change in this file to the variables' values below will be ignored and
#    overridden by the content of the master.info file, unless you shutdown
#    the slave server, delete master.info and restart the slaver server.
#    For that reason, you may want to leave the lines below untouched
#    (commented) and instead use CHANGE MASTER TO (see above)
#
# required unique id between 2 and 2^32 - 1
# (and different from the master)
# defaults to 2 if master-host is set
# but will not function as a slave if omitted
#server-id       = 2
#
# The replication master for this slave - required
#master-host     =   <hostname>
#
# The username the slave will use for authentication when connecting
# to the master - required
#master-user     =   <username>
#
# The password the slave will authenticate with when connecting to
# the master - required
#master-password =   <password>
#
# The port the master is listening on.
# optional - defaults to 3306
#master-port     =  <port>
#
# binary logging - not required for slaves, but recommended
#log-bin=mysql-bin

# Uncomment the following if you are using InnoDB tables
#innodb_data_home_dir = /var/lib/mysql
#innodb_data_file_path = ibdata1:10M:autoextend
#innodb_log_group_home_dir = /var/lib/mysql
# You can set .._buffer_pool_size up to 50 - 80 %
# of RAM but beware of setting memory usage too high
#innodb_buffer_pool_size = 16M
#innodb_additional_mem_pool_size = 2M
# Set .._log_file_size to 25 % of buffer pool size
#innodb_log_file_size = 5M
#innodb_log_buffer_size = 8M
#innodb_flush_log_at_trx_commit = 1
#innodb_lock_wait_timeout = 50
tmpdir = "/tmp/"

[mysqldump]
quick
max_allowed_packet = 16M

[mysql]
no-auto-rehash
# Remove the next comment character if you are not familiar with SQL
#safe-updates

[myisamchk]
key_buffer_size = 20M
sort_buffer_size = 20M
read_buffer = 2M
write_buffer = 2M

[mysqlhotcopy]
interactive-timeout 
```

[这个问题](https://stackoverflow.com/questions/9594494/cannotestablishaconnection-to-mysql-in-netbeans-ide)的答案建议使用从[mysql 网站](http://dev.mysql.com/downloads/connector/j/)下载的用于 java 的 MySQL 连接器版本，我没有运气，我尝试停止服务器并删除 /var/lib/mysql 并重新安装它也没有运气。NetBeans 论坛上的帖子没有结果[。](http://forums.netbeans.org/topic44664.html)

我可以使用 MySQL Workbench 连接到服务器，所以我知道我的设置有效，这让我认为问题出在 NetBeans，但我不确定，有人可以指点我正确的方向吗？感谢您的时间和考虑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T22:19:52.430

我不知道为什么，但由于某种原因，添加命令来启动和停止 mysql 守护进程似乎可以解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-18T08:39:12.043

我遇到了同样的问题，但在互联网上花了几个小时后，我终于弄明白了。如果我同时运行包含 MYSQL 和 Netbeans IDE 的 XAMP，一切都运行良好。虽然我的用户名具有管理员权限很奇怪。但是现在一切都很好，所以一切都很好。希望它可以帮助未来的人。

# html - CSS/HTML 工具提示定位在 Mozilla Firefox 中不起作用

> ID：11918771
> 
> 赞同：1
> 
> 时间：2012-08-12T00:22:45.557
> 
> 标签：html, css, tooltip

因此，我继续在我一直在处理的一个小型潜在客户生成表单上添加了一个工具提示。一切进行得都很顺利; 但是，在 Mozilla Firefox 中，一个元素的定位似乎无法正常运行。在 Chrome、Internet Explorer 和 Safari 中进行测试时，一切正常。在 Firefox 中，工具提示不会放在调用它的图像上方，而是放在右侧和上方。

这是它的样子：

[http://img84.imageshack.us/img84/3930/correctx.jpg](http://img84.imageshack.us/img84/3930/correctx.jpg)

这是不应该的样子：

[http://img198.imageshack.us/img198/5223/incorrectw.jpg](http://img198.imageshack.us/img198/5223/incorrectw.jpg)

下面是相关代码，HTML：

```
 <div id="contact_container">
            <h1><a data-tooltip="Click to hide/display the content below." href="#"><img class="information_icons" src="images/information_icon.png"></a>How can we contact you?</h1>   
            <input id="phone_number" name="phone_number" type="text" />
            <input id="alternate_phone_number" name="alternate_phone_number" type="text" />
            <input id="email_address" name="email_address" type="text" />
            <div class="vertical_filler_small"></div>
            <h2 id="contact_time_subtitle"><a data-tooltip="Click to hide/display the content below." href="#"><img class="information_icons_small" src="images/information_icon_small.png"></a>When should we call?</h2>
            <fieldset id="contact_time">
                <div class="contact_time_containers" id="contact_time_morning"><input id="contact_time_radio_morning" name="contact_time" type="radio" value="morning" /><span class="contact_time_options">Morning</span></div>
                <div class="contact_time_containers" id="contact_time_afternoon"><input checked="checked" id="contact_time_radio_afternoon" name="contact_time" type="radio" value="afternoon" /><span class="contact_time_options">Afternoon</span></div>
                <div class="contact_time_containers" id="contact_time_evening"><input id="contact_time_radio_evening" name="contact_time" type="radio" value="evening" /><span class="contact_time_options">Evening</span>
            </fieldset>
        </div> 
```

和CSS：

```
 body{background:#0d2635 url('../images/background.jpg') no-repeat center top;font-family:Arial,Helvetica,sans-serif;margin:0;text-align:center;}
    h1{color:#fff;cursor:pointer;font-size:18px;font-weight:bold;margin:0;}
    h2{color:#ff0;cursor:pointer;font-size:14px;font-weight:bold;margin:0;text-indent:3px;}
    input[type="text"]{-khtml-border-radius:8px;-moz-border-radius:8px;-webkit-border-radius:8px;background-image:url('../images/background_text_inputs.jpg');border-color:#195d82 #11415c #6198b7 #1e74a6;border-radius:8px;border-width:1px;color:#aaa;float:left;font-size:12px;font-weight:bold;height:25px;line-height:100%;margin-top:8px;outline:none;padding:0;text-indent:5px;}
    input[type="text"]:focus{color:#fff;border:1px solid #ff0;}
    input[type="radio"]{cursor:pointer;}
    img{border:none;}
    img.information_icons{left:-2px;position:relative;top:4px;}
    img.information_icons_small{left:-2px;position:relative;top:3px;}

        div#contact_container{float:left;width:300px;}
            input#phone_number{float:left;margin-right:10px;width:140px;}
            input#alternate_phone_number{float:left;width:140px;}
            input#email_address{float:left;margin-right:10px;width:280px;}
            div.vertical_filler_small{float:left;height:10px;width:300px;}
            fieldset#contact_time{border:none;display:block;float:left;}
                div.contact_time_containers{cursor:pointer;float:left;margin-right:5px;}
                    span.contact_time_options{color:#ccc;font-size:14px;font-weight:bold;margin:0;}

    a[data-tooltip]:link,a[data-tooltip]:visited{position:relative;text-decoration:none;}
    a[data-tooltip]:before{content:"";visibility:hidden;}
    a[data-tooltip]:after{-moz-border-radius:10px;-moz-box-shadow:0 8px 6px -6px black;-webkit-border-radius:10px;-webkit-box-shadow:0 8px 6px -6px black;background-color:#294466;border:1px solid #0f2e4d;border-radius:10px;box-shadow:0 8px 6px -6px black;color:#ff0;content:attr(data-tooltip);left:-16px;font-size:12px;padding:5px 15px;position:absolute;top:-20px;visibility:hidden;white-space:nowrap;}
    a[data-tooltip]:hover:before,a[data-tooltip]:hover:after{-moz-transition:visibility 0s linear .1s;visibility:visible;} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-24T05:46:07.380

在 CSS 中尝试这样的事情：

```
 #contact_container { 位置：相对；}

 a[数据工具提示] {位置：绝对；顶部：0px；/* 根据你的风格设置顶部位置*/ Left:0px; /* 根据你的风格设置 LeftPosition*/ }

```

希望它对你有用...

# iphone - OpenGLES objective-c 屏幕没有出现

> ID：11918773
> 
> 赞同：0
> 
> 时间：2012-08-12T00:23:19.333
> 
> 标签：iphone, objective-c, opengl-es-2.0

我正在尝试使用 OpenGLES 2.0 显示绿屏，但是当我运行它时，它只是一个黑屏。我不确定我是否正确设置了 nib 文件，但是当我在 appdelegate 中添加 glView 的子视图时，它会从默认的白屏变为黑屏，因此 OpenGLView.m 可能有问题

OpenGLView.m

```
#import "OpenGLView.h"

@interface openGLView ()

@end

@implementation openGLView

+(Class)layerClass {
return [CAEAGLLayer class];
}

-(void)setupLayer {
_eaglLayer = (CAEAGLLayer*) self.layer;
_eaglLayer.opaque = YES;
}

-(void)setupContext{
EAGLRenderingAPI api = kEAGLRenderingAPIOpenGLES2;
_context = [[EAGLContext alloc] initWithAPI:api];
if (!_context) {
    NSLog(@"failed to initialize openGLES 2.0 context");
    exit(1);
}

if (![EAGLContext setCurrentContext:_context]) {
    NSLog(@"Failed to set current OpenGL Context");
    exit(1);
}
}

-(void)setupRenderBuffer {
glGenRenderbuffers(1, &_colorRenderBuffer);
glBindRenderbuffer(GL_RENDERBUFFER, _colorRenderBuffer);
[_context renderbufferStorage:GL_RENDERBUFFER fromDrawable:_eaglLayer];
}

-(void)setupFrameBuffer {
GLuint framebuffer;
glGenFramebuffers(1, &framebuffer);
glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, _colorRenderBuffer);
}

-(void)render {
glClearColor(0, 104.0/255.0, 55.0/255.0, 1.0);
glClear(GL_COLOR_BUFFER_BIT);
[_context presentRenderbuffer:GL_RENDERBUFFER];

}

- (id)initWithFrame:(CGRect)frame {
self = [super initWithFrame:frame];
if (self) {
    [self setupLayer];
    [self setupContext];
    [self setupRenderBuffer];
    [self setupFrameBuffer];
    [self render];
}
return self;
}

-(void) dealloc {
[_context release];
_context = Nil;
[super dealloc];
}
@end 
```

AppDelegate.m

```
@implementation AppDelegate
@synthesize glView = _glview;

- (void)dealloc
{
[_glview release];
[_window release];
[super dealloc];
}

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
CGRect screenBounds = [[UIScreen mainScreen] bounds];
self.glView = [[[openGLView alloc] initWithFrame:screenBounds] autorelease];
[self.window addSubview:_glview];
 self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T11:05:43.863

试试这个..我得到了答案

```
- (id)initWithFrame:(CGRect)frame
{
    self = [super initWithFrame:frame];
    if (self) {
        _eaglLayer = (CAEAGLLayer *)self.layer;
        _eaglLayer.opaque = YES;

        _context =[[EAGLContext alloc] initWithAPI:kEAGLRenderingAPIOpenGLES2];

        if (!_context) {
            NSLog(@"Failed to initialize OpenGLES 2.0 context");
            exit(1);
        }

        if (![EAGLContext setCurrentContext:_context]) {
            NSLog(@"Failed to set current OpenGL context");
            exit(1);
        }        // Initialization code

        glGenRenderbuffers(1, &_colorRenderBuffer);
        glBindRenderbuffer(GL_RENDERBUFFER, _colorRenderBuffer);
        [_context renderbufferStorage:GL_RENDERBUFFER fromDrawable:_eaglLayer];

        GLuint framebuffer;
        glGenFramebuffers(1, &framebuffer);
        glBindFramebuffer(GL_FRAMEBUFFER, framebuffer);
        glFramebufferRenderbuffer(GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, _colorRenderBuffer);

        glClearColor(1.0,1,0,1.0);
        glClear(GL_COLOR_BUFFER_BIT);
        [_context presentRenderbuffer:GL_RENDERBUFFER];
    }
    return self;
}
+(Class)layerClass{
    return [CAEAGLLayer class];
}
-(void)dealloc
{
    [_context release];
    _context = nil;
    [super dealloc];
} 
```

# ios - iOS- MKMapKit-我如何在用户位置上添加注释？

> ID：11918775
> 
> 赞同：2
> 
> 时间：2012-08-12T00:23:32.003
> 
> 标签：ios, annotations, mkmapview

我的应用程序上有用户位置，但是如何在当前用户位置上放置注释？我是否必须获取用户位置的经纬度并以这种方式删除注释？或者我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:07:08.950

1.  首先导入必要的框架（CoreLocation 和 MapKit）。
2.  然后创建Objective-C NSObject 类Annotation
3.  设置它的.h：

    ```
    #import <Foundation/Foundation.h>

    #import <CoreLocation/CoreLocation.h>

    #import <MapKit/MapKit.h>

    @interface Annotation : NSObject <MKAnnotation> 

    @property (nonatomic) CLLocationCoordinate2D coordinate;
    @property (nonatomic, copy) NSString *title;
    @property (nonatomic, copy) NSString *subtitle;

    @end 
    ```

4.  设置它的.m：

    ```
    #import "Annotation.h"

    @implementation Annotation
    @synthesize coordinate, title, subtitle;

    @end 
    ```

    1.  设置`viewDidLoad`

        ```
         if ([CLLocationManager locationServicesEnabled]) {

           locationManager = [[CLLocationManager alloc] init];

           [locationManager setDelegate:self];

           [locationManager setDesiredAccuracy: kCLLocationAccuracyBestForNavigation];

           [locationManager startUpdatingLocation];

           }

          self.mapView.delegate = self; 
        ```

    2.  设置`didUpdateToLocation`

        ```
         // IMPORT ANNOTATION

           - (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

           [locationManager stopUpdatingLocation];

           double miles = 3.10686;
           double scalingFactor = ABS((cos(2 * M_PI * newLocation.coordinate.latitude / 360.0)));

           MKCoordinateSpan span;

           span.latitudeDelta = miles/69.0;
           span.longitudeDelta = miles/(scalingFactor * 69.0);

           MKCoordinateRegion region;
           region.span = span;
           region.center = newLocation.coordinate;

           [self.mapView setRegion:region animated:YES];

           Annotation *annot = [[Annotation alloc] init];
           annot.coordinate = newLocation.coordinate;

           [self.mapView addAnnotation:annot];

             } 
        ```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:51:37.497

最简单的方法是设置`showsUserLocation`为`YES`您`MKMapView`并实施

```
- (void)mapView:(MKMapView *)mapView didUpdateUserLocation:(MKUserLocation *)userLocation {
    MKCoordinateRegion region = MKCoordinateRegionMake(userLocation.location.coordinate, MKCoordinateSpanMake(0.01, 0.01));
    [mapView setRegion:region animated:NO];
} 
```

在您`MKMapViewDelegate`找到用户的位置后，让地图视图移动到该位置。

这将在用户位置的地图视图上显示一个蓝点，就像地图应用程序一样。

# iphone - Cocos-2d iphone重置游戏板

> ID：11918778
> 
> 赞同：1
> 
> 时间：2012-08-12T00:23:48.323
> 
> 标签：iphone, objective-c, arrays, variables, cocos2d-iphone

我正在制作一款棋盘游戏，当一个人获胜时，我希望棋盘自行重置。如果有帮助，我正在为 iPhone 使用 cocos2d。我有一个重置方法，可以重置所有变量和数组。它会重置一次，然后在一个人获胜后的下一次它不会重置董事会。有想法该怎么解决这个吗？这是 .m 文件中的方法。//方法

```
-(void) resetGame {
self.isTouchEnabled = YES;

if( (self=[super init]) ) {

    self.isTouchEnabled = YES;

    turn = 2;

    pieces = [[NSMutableArray alloc] initWithObjects:
              [[Piece alloc] pieceWithType:1 player:1 row:1 col:3],    // bSphere1
              [[Piece alloc] pieceWithType:1 player:1 row:2 col:3],    // bSphere2
              [[Piece alloc] pieceWithType:2 player:1 row:1 col:2],    // bSquare1
              [[Piece alloc] pieceWithType:2 player:1 row:3 col:3],    // bSquare2
              [[Piece alloc] pieceWithType:2 player:1 row:0 col:3],    // bSquare3
              [[Piece alloc] pieceWithType:1 player:2 row:0 col:4],    // wSphere1
              [[Piece alloc] pieceWithType:1 player:2 row:2 col:4],    // wSphere2
              [[Piece alloc] pieceWithType:2 player:2 row:1 col:4],    // wSquare1
              [[Piece alloc] pieceWithType:2 player:2 row:3 col:4],    // wSquare2
              [[Piece alloc] pieceWithType:2 player:2 row:2 col:5],    // wSquare3
              nil];

    // add background before pieces
    CCSprite *bg = [CCSprite spriteWithFile:@"grid.png"];
    [bg setPosition:ccp(240, 160)];
    [self addChild:bg z:0];

    // add all the pieces
    for(Piece *piece in pieces) {
        [self addChild:piece];
    }

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-13T21:19:48.993

如果您要使用该层/CCScene 超过 1 轮（它不会被另一个中间 CCScene 代替，例如菜单），那么您应该尝试在 init 函数之外添加/删除精灵

你可以做类似的事情

```
- (void)resetLevel: {

//remove old children
[this removeAllChildrenWithCleanup:YES];

//Add new children
pieces = [[NSMutableArray alloc] initWithObjects:
     [[Piece alloc] pieceWithType:1 player:1 row:1 col:3],    // bSphere1
     .......
     nil];

    // add background before pieces
    CCSprite *bg = [CCSprite spriteWithFile:@"grid.png"];
    [bg setPosition:ccp(240, 160)];
[self addChild:bg z:0];

    // add all the pieces
    for(Piece *piece in pieces) {
       [self addChild:piece];
    } 
```

}

代码未经测试，您可能需要进行一些更改

您还应该避免保留 NsMutableArray 和 Piece 实例分配 (alloc)，因为您必须做额外的工作才能释放它们。您的图层通过添加它们来保留它们

# django - Django 模型变量 - 唯一

> ID：11918780
> 
> 赞同：-1
> 
> 时间：2012-08-12T00:23:55.193
> 
> 标签：django, models

对于这个问题的糟糕标题，我感到非常抱歉。我想不出如何在简单的上下文中表达它。

* * *

我正在制作一个简单的照片库。管理员可以创建图库页面并将图像上传到其中。对于每个画廊，我希望其中一张照片中有一个横幅图像。Photo 模型有一个 CharField 可以判断它是否是横幅。有没有办法让变量只允许属于画廊的每张照片有一个“B”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:08:11.290

您应该为您的类定义一个`unique_together`变量。如果您的字段名称是`album`and `banner`，您应该将此行添加到模型的 Meta 类中。

```
unique_together = (("album", "banner"),) 
```

[Django 文档，独一无二](https://docs.djangoproject.com/en/dev/ref/models/options/#unique-together)

而且我认为，使用 charfield 作为布尔值并不是一个正确的选择。您应该将您的`banner`字段更改为 BooleanField。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:26:02.020

为什么不创建一个[OneToOne](https://docs.djangoproject.com/en/1.4/ref/models/fields/#onetoonefield)字段？

```
class Gallery(models.Model):
...
banner = models.OneToOneField(Photo) 
```

这样，您就可以在画廊和照片之间建立独特的关系。

# java - Google App Engine Query Execute 只需要 3 个参数

> ID：11918784
> 
> 赞同：1
> 
> 时间：2012-08-12T00:24:10.130
> 
> 标签：java, google-app-engine

谁能告诉我为什么下面的代码在最后一行导致错误，命令“执行”和错误消息：

> Query 类型中的方法 execute(Object, Object, Object) 不适用于参数（Long、Long、Date、Date）

```
Query q = pm.newQuery(Appointment.class,"AdminID == AID"+
  " && EmployeeID == CEID"+
  " && Time > STime"+
  " && Time < ETime");
q.declareImports("import java.util.Date");
q.declareParameters("Long AID, Long CEID, Date STime, Date ETime");
q.setOrdering("Time");
Appointments = (List<Appointment>) q.execute(AdminID, CurrentEmployeeID, Time1, Time2); 
```

据我所知（由错误消息暗示，执行函数最多只能进行 3 次争论，如果是这种情况，谁能建议如何实现我想要做的事情？我尝试了以下代码，但每次运行时都会出现解析错误！

```
Query q = pm.newQuery(Appointment.class,"AdminID == "+AdminID+
  " && EmployeeID == "+CurrentEmployeeID+
  " && Time > "+Time1+
  " && Time < "+Time2);
q.declareImports("import java.util.Date");
q.setOrdering("Time");
Appointments = (List<Appointment>) q.execute(); 
```

我得到的解析错误是：

> org.datanucleus.store.query.QueryCompilerSyntaxException：无法解析表达式的一部分：BST 2012 年 8 月 13 日 11:44:55 && 时间 < Mon Aug 13 11:45:05 BST 2012

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T00:41:54.573

尝试[executeWithArray](http://db.apache.org/jdo/api30/apidocs/javax/jdo/Query.html#executeWithArray%28java.lang.Object...%29)或[executeWithMap](http://db.apache.org/jdo/api30/apidocs/javax/jdo/Query.html#executeWithMap%28java.util.Map%29)。

```
HashMap<String, Object> params = new HashMap<String, Object>();
params.put( "AID", adminId );
params.put( "CEID", currentEmployeeId );
params.put( "STime", startTime );
params.put( "ETime", endTime );

query.executeWithMap( params ); 
```

笔记：

1.  变量应该是 lowerCamelCase
2.  `startTime`并且`endTime`比 更具描述`Time1`性`Time2`
3.  “Id”通常比“ID”更受欢迎 - [id 的正确 Java 命名约定是什么？](https://stackoverflow.com/questions/1699944/what-is-correct-java-naming-convention-for-id)
4.  您的第二次尝试将不起作用，因为它隐式调用`..." && Time > " + Time1.toString() + ...`

# c++ - 如何正确访问向量的元素？

> ID：11918792
> 
> 赞同：-1
> 
> 时间：2012-08-12T00:25:57.457
> 
> 标签：c++

```
int main() {

    vector <int> multiples(1);

    cout << multiples[0];

} 
```

当我希望它为 1 时返回 0。当我用一个元素初始化向量时会发生这种情况，我可以访问第二个元素，但是：

```
int main() {

    vector <int> multiples(1, 4);

    cout << multiples[1]; // 4

} 
```

此外，当我尝试访问向量中不存在的元素时，我会得到最右边元素的值（在本例中为 4）。但是我似乎无法获得第一个元素。谁能解释为什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T00:28:31.377

这

```
vector <int> multiples(1); 
```

创建一个大小为 1 的 int 向量。单个元素是*value initialized*，这`ìnt`意味着零初始化。所以你得到一个带有一个条目的向量，带有 value `0`。和这个

```
vector <int> multiples(1, 4); 
```

创建一个大小为 1 的向量，这次使用 value `4`。如果您尝试访问`multiplies[1]`，您将超出 size-1 向量的范围，从而调用未定义的行为。如果你想用两个元素值`1`和初始化一个向量`4`，在 C++11 中你可以这样做：

```
vector <int> multiples{1, 4}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T00:28:46.537

```
int main() {

    vector <int> multiples(1);

    cout << multiples[0];

} 
```

[http://cplusplus.com/reference/stl/vector/vector/](http://cplusplus.com/reference/stl/vector/vector/)

创建具有 1 个 int 元素的向量，默认初始化（即 int() == 0）。

```
vector <int> multiples(1, 4); 
```

创建向量，其中 1 个 int 元素由 4 初始化。

```
cout << multiples[1]; // 4 
```

这是不正确的，因为向量中只有一个元素。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T00:33:39.147

看看这段代码。你应该看到问题。您没有按照预期的方式初始化向量。

```
int main()
{
    vector <int> multiples(2); // create a vector of size two with default value of 0.
    multiples[0] = 10; // set element at index 0 = 10
    multiples[1] = 20; // set element at index 0 = 10
    cout << multiples[0]; // 10
    cout << multiples[1]; // 20
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T01:29:23.113

实际上，您不需要指定向量的大小。您可以在需要时添加元素（具体的对象），这是矢量的主要优点和用途。向向量中添加元素可以通过以下方式轻松完成：

```
multiples.push_back(1);
multiples.push_back(4); 
```

希望能帮助到你。

# c++ - 在不调试正在运行的程序的情况下弄清楚对象的内存布局？

> ID：11918796
> 
> 赞同：4
> 
> 时间：2012-08-12T00:27:32.853
> 
> 标签：c++, reverse-engineering, ida

我正在对程序进行逆向工程。我正在使用 IDA Pro 和 Hex-Rays 反编译器。我遇到了一大堆代码，我知道有一个对象并且对象上有一个方法调用，但它以我无法弄清楚的方式显示。例如：

```
 if ( (*(*interfacePtr + 24))(interfacePtr, &v23) >= 0 ) 
```

我在这里知道 interfacePtr 指向一个 ICLRRuntimeHost 对象。（C++，.NET CLR 运行时）但是....我不知道 *(*interfacePtr + 24) 是什么。我可以说这是一种方法，但我如何弄清楚 +24 的位置是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T04:53:42.217

类的 vtable 只是指向函数的指针列表。它包含一个指向每个虚函数的指针，顺序为：非常非常顶级的基类，下一个基类，那个的子类，. . . 大多数派生类。

例子：

```
struct A {
    virtual ~A() {}
    virtual void foo() = 0;
}
struct B : public A {
    virtual void foo() { // do something }
    virtual void bar() { // do something else }
} 
```

B 的 vtable 将按以下顺序包含：

*   〜一个
*   富
*   酒吧

（对于 A 的那些必须先出现，以便具有指向该对象的 A 类型指针的部分代码可以使用相同的 vtable；该代码不知道底层对象实际上是 B。）

如果您正在查看 32 位源，指针是 4 个字节，所以 24 = 4 * 6，您正在查看第 7 个虚函数（索引从 0 开始）。如果您使用的是 64 位，则指针为 8 个字节，因此 24 = 8 * 3，您正在寻找第 4 个。实际上，我没有使用 IDA“转换为 C++”的功能，所以可能 24 实际上是表中的第 24 个条目。

简单的确认方法：编写自己的程序。声明一个 ICLRRuntimeHost 类型的变量。调用您怀疑的函数（基于查看头文件并计数到 7 或 4，具体取决于位数，或 24，如果我误解了您的示例）。查看生成的汇编代码，并确认您的索引是否正确。（在那种事情上我总是不喜欢，所以这将提供一个检查。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-12T08:14:35.113

看看 和`ICLRRuntimeHostVtbl` 的 `ICLRRuntimeHostVtbl`定义`mscoree.h`

大致翻译成hexrays可以理解的东西，它们看起来像这样：

```
struct ICLRRuntimeHost {
    ICLRRuntimeHostVtbl *vtbl;
};
struct ICLRRuntimeHostVtbl {
    _DWORD (*QueryInterface)(ICLRRuntimeHost*, _DWORD*, void**);
    _DWORD (*AddRef)(ICLRRuntimeHost*);
    _DWORD (*Release)(ICLRRuntimeHost*);
    _DWORD (*Start)(ICLRRuntimeHost*);
    _DWORD (*Stop)(ICLRRuntimeHost*);
    _DWORD (*SetHostControl)(ICLRRuntimeHost*, void*);
    _DWORD (*GetCLRControl)(ICLRRuntimeHost*, void**);
}; 
```

你的变量 interfacePtr 应该有类型：ICLRRuntimeHost，那么你的代码应该像这样反编译：

```
interfacePtr->GetCLRControl(&v23); 
```

# php - 如何检查使用旧 API 的 MySQL 查询是否成功？

> ID：11918797
> 
> 赞同：34
> 
> 时间：2012-08-12T00:27:47.247
> 
> 标签：php, mysql

除了使用之外，如何检查 MySQL 查询是否成功`die()`

我正在努力实现...

```
mysql_query($query);

if(success){
//move file
}
else if(fail){
//display error
} 
```

* * *

## 回答 #1

> 赞同：58
> 
> 时间：2012-08-12T00:29:43.093

这是手册页中的第一个示例[`mysql_query`](http://php.net/manual/en/function.mysql-query.php)：

```
$result = mysql_query('SELECT * WHERE 1=1');
if (!$result) {
    die('Invalid query: ' . mysql_error());
} 
```

如果您想使用 以外的东西`die`，那么我建议[`trigger_error`](http://php.net/manual/en/function.trigger-error.php)。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-12T00:52:22.983

你也可以用[`mysql_errno()`](http://www.php.net/manual/en/function.mysql-errno.php)这个。

```
$result = mysql_query($query);

if(mysql_errno()){
    echo "MySQL error ".mysql_errno().": "
         .mysql_error()."\n<br>When executing <br>\n$query\n<br>";
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-12T00:31:29.047

如果您的查询失败，您将收到 FALSE 返回值。否则，您将收到资源/TRUE。

```
$result = mysql_query($query);

if(!$result){
    /* check for error, die, etc */
} 
```

基本上只要不是假的就可以了。之后，您可以继续您的代码。

```
if(!$result) 
```

这部分代码实际上运行您的查询。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-12T11:40:56.030

`mysql_query`函数用于在 php 中执行 mysql 查询。`mysql_query`如果查询执行失败，则返回 false。或者，您可以尝试使用`mysql_error()`函数 例如

```
$result=mysql_query($sql) 
```

或者

```
die(mysql_error()); 
```

在上面的代码片段中，如果查询执行失败，那么它将终止执行并在执行 sql 查询时显示 mysql 错误。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-06-13T08:40:23.607

只放：

`or die(mysqli_error());`

在您查询后

它会将错误重新定义为`echo`

例子

```
// "Your Query" means you can put "Select/Update/Delete/Set" queries here
$qfetch = mysqli_fetch_assoc(mysqli_query("your query")) or die(mysqli_error()); 

    if (mysqli_errno()) {
        echo 'error' . mysqli_error();
        die();
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-03-23T00:01:21.780

如果使用`MySQLi`bind_param 尝试将此行放在查询上方

```
mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT); 
```

# mysql - MySQL“索引名称不正确...”错误（唯一外键）

> ID：11918798
> 
> 赞同：8
> 
> 时间：2012-08-12T00:28:09.483
> 
> 标签：mysql

我在使用 MySQL 时不断收到错误“不正确的索引名称 'f7'”，我已将其范围缩小到以下内容：

首先我创建表，

```
CREATE TABLE testTable (
    id INTEGER PRIMARY KEY AUTO_INCREMENT,
    f7 INTEGER NOT NULL,
    FOREIGN KEY (f7) REFERENCES testTable2 (id) ON DELETE CASCADE ON UPDATE CASCADE,
) ENGINE=InnoDB; 
```

然后在别处，

```
ALTER TABLE testTable ADD UNIQUE f7; 
```

[这](https://stackoverflow.com/questions/5312083/mysql-unique-foreign-key)使我相信这与重复索引（？）有关，我只是不知道如何解决它。非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T18:30:34.257

给它一个名字，这样它就不会和外键索引冲突

```
ALTER TABLE `testtable`  ADD UNIQUE INDEX `foo` (`f7`); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T18:33:22.163

`incorrect index name`当您尝试创建与现有索引同名的新索引时，会出现错误。

在 MySQL 中，当您创建外键时，正如您对 所做的那样`FOREIGN KEY (f7) REFERENCES testTable2 (id) ON DELETE CASCADE ON UPDATE CASCADE`，索引也会自动创建。在这种情况下，名称默认为`f7`。

外键创建为非唯一索引；您的第二个命令：`ALTER TABLE testTable ADD UNIQUE (f7);`将使该索引唯一-不添加第二个。

要验证表上已经存在哪些索引，可以使用以下命令：

```
SHOW INDEXES FROM testTable; 
```

如果您收到此错误，则其他地方可能有其他代码正在尝试创建名为`f7`. 您可以尝试找到它，或更改`CREATE TABLE`语法以将键命名为不同的名称，以免引起冲突：

```
FOREIGN KEY fk_testTable_f7 (f7) REFERENCES testTable2 (id) ON DELETE CASCADE ON UPDATE CASCADE 
```

在此示例中，我使用`fk_testTable_f7`了并且您现在应该在名为 的表上有一个非唯一索引`fk_testTable_f7`。为了使其唯一，您可以使用现有`ALTER`命令，因为您希望列是唯一的 - 而不是外键本身。

# iphone - 本地或推送通知

> ID：11918799
> 
> 赞同：0
> 
> 时间：2012-08-12T00:28:10.747
> 
> 标签：iphone, objective-c, push-notification, uilocalnotification

我有一个简单的应用程序，它显示来自 YouTube 频道的一些视频。当该 YouTube 频道有新视频时，我需要向我的用户发送通知。

我一直在想，我意识到如果我使用本地通知，应用程序将不得不每“5分钟”运行一次方法并检查是否有新视频，但是当用户关闭应用程序时，我的方法将停止运行并且应用程序将停止检查新视频。

否则，我将使用远程通知。我会将用户设备令牌存储到数据库中并使用 PHP 检查新视频。当它发生时，我会向我的所有用户发送推送。不幸的是，这种情况会使 PHP 所在的服务器超载。

我的问题是：最好的解决方案是什么？当我的应用程序关闭时，有什么方法可以让我继续执行一个方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T00:39:52.843

推送是您的最佳选择。没有足够好的方法来保持在后台检查以足够准确地使用本地通知。随时监控服务器上的新视频，并向用户发送推送通知。该模型存在于应用商店的许多应用中。祝你好运。

# javascript - 未捕获的 RangeError：最大调用堆栈大小超过了画布 requestAnimFrame

> ID：11918804
> 
> 赞同：0
> 
> 时间：2012-08-12T00:28:48.257
> 
> 标签：javascript, html, canvas

我目前正在开发一个 javascript canvas 2D 游戏引擎，我遇到了一些关于`requestAnimFrame`. 在我看来，我做得正确，但一段时间后我收到以下错误`(Uncaught RangeError: Maximum call stack size exceeded)`

您可以在这里查看源代码：http: [//snipt.org/vxij1](http://snipt.org/vxij1)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:33:08.667

我的猜测是这一行：

```
requestAnimFrame(this.mainGameLoop()); 
```

应该是这样的：

```
var self = this;
requestAnimFrame(function() {self.mainGameLoop()}); 
```

以便您的回调稍后作为回调调用，而不是立即执行。

# php - 解码部分 JSON，但不生成数组

> ID：11918810
> 
> 赞同：0
> 
> 时间：2012-08-12T00:29:57.397
> 
> 标签：php, arrays, json

所以我有一个非常大的 JSON 字符串，它表示一个包含 255 个条目的多维数组，每个条目是一个包含 255 个其他条目的数组，如下所示：

```
0 => array(0, 1, ..., 255),
1 => array(0, 1, ..., 255),

...
255 => array(0, 1, ..., 255), 
```

（唯一的区别是第二级的值是由 2-3 个字符组成的字符串，在我的例子中）

我可以根据一个键从这个编码的字符串中检索某个值，但实际上没有将它解码为一个数组吗？

例如，我可能想得到`$arr[37][78];`

目前要做到这一点，我必须：

```
$arr = json_decode($string);
$value = $arr[37][78]; 
```

我想避免这种情况，因为解码后的字符串需要大量内存作为数组......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:36:55.893

不，不是基于密钥。由于在您收到它时它是一个字符串，因此您唯一的选择是使用索引的正则表达式或 substr()。

# r - 从范围中提取整数

> ID：11918813
> 
> 赞同：11
> 
> 时间：2012-08-12T00:30:35.020
> 
> 标签：r, integer, range

在 R 中，从范围中提取整数的有效方法是什么？

假设我有一个范围矩阵（column1=start，column2=end）

```
1   5
3   6
10  13 
```

我想将矩阵中所有范围的包含唯一整数存储到一个对象中：

```
1
2
3
4
5
6
10
11
12
13 
```

这将应用于包含约 400 万个范围的矩阵，因此希望有人可以提供一种有效的解决方案。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T04:47:25.157

假设您有 start = 3，end = 7，并且您在从 1 开始的数轴上将每个标记为“1”

```
starts:     0 0 1 0 0 0 0 0 0 ...
ends + 1:   0 0 0 0 0 0 0 1 0 ... 
```

开始的累积和减去结束的累积和，两者之差为

```
cumsum(starts):   0 0 1 1 1 1 1 1 1 ...
cumsum(ends + 1): 0 0 0 0 0 0 0 1 1 ...
diff:             0 0 1 1 1 1 1 0 0 
```

差异中 1 的位置是

```
which(diff > 0): 3 4 5 6 7 
```

使用制表允许在同一位置有多个开始/结束，并且

```
range2 <- function(ranges)
{
    max <- max(ranges)
    starts <- tabulate(ranges[,1], max)
    ends <- tabulate(ranges[,2] + 1L, max)
    which(cumsum(starts) - cumsum(ends) > 0L)
} 
```

对于这个问题，这给出了

```
> eg <- matrix(c(1, 3, 10, 5, 6, 13), 3)
> range2(eg)
 [1]  1  2  3  4  5  6 10 11 12 13 
```

以安德烈为例，它非常快

```
 > system.time(runs <- range2(xx))
   user  system elapsed 
  0.108   0.000   0.111 
```

（这听起来有点像 DNA 序列分析，[GenomicRanges](http://bioconductor.org/packages/release/bioc/html/GenomicRanges.html)可能是你的朋友；你会在读取上使用`coverage`and`slice`函数，也许用 输入`readGappedAlignments`）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-12T00:38:23.690

我不知道它是否特别有效，但如果你的范围矩阵是`ranges`那么以下应该工作：

```
unique(unlist(apply(ranges, 1, function(x) x[1]:x[2]))) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-12T00:53:37.413

使用`sequence`和`rep`：

```
x <- matrix(c(1, 5, 3, 6, 10, 13), ncol=2, byrow=TRUE)

ranges <- function(x){
  len <- x[, 2] - x[, 1] + 1
  #allocate space
  a <- b <- vector("numeric", sum(len))
  a <- rep(x[, 1], len) 
  b <- sequence(len)-1
  unique(a+b)
}

ranges(x)
[1]  1  2  3  4  5  6 10 11 12 13 
```

* * *

由于这仅使用矢量化代码，因此即使对于大型数据集，这也应该非常快。在我的机器上，一个 100 万行的输入矩阵需要大约 5 秒才能运行：

```
set.seed(1)
xx <- sample(1e6, 1e6)
xx <- matrix(c(xx, xx+sample(1:100, 1e6, replace=TRUE)), ncol=2)
str(xx)
 int [1:1000000, 1:2] 265509 372124 572853 908206 201682 898386 944670 660794 629110 61786 ...

system.time(zz <- ranges(xx))
user  system elapsed 
   4.33    0.78    5.22 

str(zz)
num [1:51470518] 265509 265510 265511 265512 265513 ... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-12T10:04:54.013

是不是很简单：

```
x <- matrix(c(1, 5, 3, 6, 10, 13), ncol=2, byrow=TRUE)
do.call(":",as.list(range(x)))
[1]  1  2  3  4  5  6  7  8  9 10 11 12 13 
```

**编辑**

看起来我弄错了，但我的答案可以修改为使用`union`，虽然这只是一个包装`unique`：

```
Reduce("union",apply(x,1,function(y) do.call(":",as.list(y))))
[1]  1  2  3  4  5  6 10 11 12 13 
```

# c++ - 这段代码的编译是标准行为吗？

> ID：11918814
> 
> 赞同：6
> 
> 时间：2012-08-12T00:30:39.260
> 
> 标签：c++, templates

考虑以下代码：

```
struct Undefined;

template <typename T>
void TemplateFunction()
{
  Undefined obj;
}

int main()
{
  return 0;
} 
```

我一直认为模板函数和模板方法（或模板类的方法部分）只会检查语法（除非它们被实例化），在这种情况下上面的代码*应该*编译。

问题是，它不能用 Xcode（版本：4.3.2，使用 LLVM 编译器）编译，现在我想知道上面的代码是否是非标准的，即它不应该*在*符合 C++03 标准的编译器上编译? Xcode的错误是：

> 变量的类型不完整“未定义”

请注意，在原始代码中，未定义对象是静态断言的一部分。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-12T00:46:58.547

编译器拒绝代码是正确的，即使其他编译器会很乐意接受它。特别是报价将在 §14.6[temp.res]/8 内

> [...] 如果无法为模板定义生成有效的特化，并且该模板未实例化，则模板定义格式错误，无需诊断。[...]如果在非依赖名称中使用的类型在定义模板时不完整，但在实例化完成时是完整的，并且该类型的完整性是否会影响程序格式正确或影响程序的语义，程序格式错误；[...]

也就是说，尽管不需要编译器来诊断模板，但模板*格式错误。*

# json - 在 Windows Phone 上反序列化 JSON 对象

> ID：11918815
> 
> 赞同：2
> 
> 时间：2012-08-12T00:31:13.920
> 
> 标签：json, api, serialization, windows-phone-7.1

我需要帮助：

我的 JSON（来自暗黑破坏神 3 API）：

```
{
   "name":"Exsanguinating Chopsword of Assault",
   "icon":"mightyweapon1h_202",
   "displayColor":"blue",
   "tooltipParams":"item-data/COGHsoAIEgcIBBXIGEoRHYQRdRUdnWyzFB2qXu51MA04kwNAAFAKYJMD",
   "requiredLevel":60,
   "itemLevel":61,
   "bonusAffixes":0,
   "dps":{
       "min":206.69999241828918,
       "max":206.69999241828918
    }
} 
```

它不是完整的 JSON，但我正在尝试仅解析这一部分，因为我正在学习它。

我知道如何获取字符串名称、图标、显示颜色.....但我不知道如何获取 DPS。

我的模型类是：

```
namespace Diablo_III_Profile
{
[DataContract]
public class ItemInformation : INotifyPropertyChanged
{
    private string _name;

    [DataMember]
    public string name
    {
        get
        {
            return _name;
        }
        set
        {
            if (value != _name)
            {
                _name = value;
                NotifyPropertyChanged("name");
            }
        }
    }
    //others strings and ints here

    public event PropertyChangedEventHandler PropertyChanged;
    private void NotifyPropertyChanged(String propertyName)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (null != handler)
        {
            handler(this, new PropertyChangedEventArgs(propertyName));
        }
    }
} 
```

放在我的模型类中的 DPS 的“格式”是什么？

要读取我正在使用的字符串：

```
 MemoryStream ms = new MemoryStream();
 ItemInformation data = (ItemInformation)Deserialize(ms, typeof(ItemInformation));
 MessageBox.Show(data.name); 
```

应该和DPS一样吧？

编辑：

我做的！不知道是否是最好的方法，但是....

在我的模型课中，我放了

```
public class DPS
    {
        public float min { get; set; }
        public float max { get; set; }
    }

    private DPS _dps;

    [DataMember]
    public DPS dps
    {
        get
        {
            return _dps;
        }
        set
        {
            if (value != _dps)
            {
                _dps = value;
                NotifyPropertyChanged("dps");
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:09:01.363

您的解决方案很好，这正是我想要回复的。这样，您可以在任何地方重用 DPS，并且 JSON 解析器应将其正确反序列化为具有 DPS 最小值和最大值的适当值的“ItemInformation”。我使用相同的方法来填充对象和子对象。

您还可以使用 JSON.Net 序列化为 JSON 和反序列化 JSON 对象。

[http://james.newtonking.com/projects/json/help/index.html](http://james.newtonking.com/projects/json/help/index.html)

干杯

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-13T16:41:16.960

我做的！不知道是否是最好的方法，但是....

在我的模型课中，我放了

```
public class DPS  
 {  
     public float min { get; set; }  
     public float max { get; set; }  
 }  

private DPS _dps;  

[DataMember]  
public DPS dps  
{  
    get  
    {  
        return _dps;  
    }  
    set  
    {  
        if (value != _dps)  
        {  
            _dps = value;  
            NotifyPropertyChanged("dps");  
        }  
    }  
} 
```

# r - xts中的rollapply内存不足R

> ID：11918819
> 
> 赞同：2
> 
> 时间：2012-08-12T00:31:56.510
> 
> 标签：r, apply, xts, zoo

我有一个`xts`大约 2 百万行的对象。我正在尝试使用`rollapply`with `width=10000`。rollapply 似乎内存不足，我无法弄清楚为什么？（我试图通过键入来查看源代码，`> rollapply`但只显示以下内容：

```
function (data, ...) 
 UseMethod("rollapply")
 <environment: namespace:zoo> 
```

rollapply 是否会为每个块创建 200 万至 10,000 个副本，然后将它们一个一个传递？这肯定会导致它耗尽内存，但我认为创建者不`zoo`会这样做？如果是这样的话，那么有没有人知道一个更聪明的方法来做我的滚动申请。我目前的计划是简单地这样做：

```
m <- vector()
for (i in 10001:nrow(my_xts)) {
   m <- c(m, my_fun(my_xts[i-10000:i]))

} 
```

确定有更好的方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T01:10:17.683

看起来内存消耗是在`mapply`调用期间发生的`zoo:::rollapply.zoo`。有一个 xts`rollapply`方法但是它没有被导出，所以它不会被方法调度调用。也就是说，您可以显式调用它：

```
my_xts <- .xts(1:1e5*1,1:1e5)
m <- xts:::rollapply.xts(my_xts, width=10000, FUN=sum) 
```

用于`methods(foo)`查看遇到时可用的方法：

```
function(...)
  UseMethod("foo") 
```

# servlets - Java Play 2 - 部署

> ID：11918820
> 
> 赞同：0
> 
> 时间：2012-08-12T00:32:21.873
> 
> 标签：servlets, amazon-web-services, playframework-2.0, war, amazon-elastic-beanstalk

> 2012 年 8 月 18 日更新

我正在使用 Play 2.0.2，我想将我的应用程序部署到 Amazon Webservices。我认为最简单的方法是通过 Elasticbeanstalk。

我使用 Play2war 打包我的应用程序 [https://github.com/dlecan/play2-war-plugin/](https://github.com/dlecan/play2-war-plugin/)

我能够将它与

```
play war 
```

根据play2war的使用指南，我将文件重命名为ROOT.war，因为我使用的是Linux 32bit Tomcat7。

我还使用了 play2war 教程中描述的 servlet 3.0。（tomcat 7 -> servlet 3.0）。

文件大小为 31mb。

每次我使用 Elasticbeanstalk 时，我都会得到相同的日志。

```
2012-08-18 00:25 GMT+0200
WARN
Environment health has been set to RED
2012-08-18 00:25 GMT+0200
INFO
Launched environment: elosource. However, there were issues during launch. See event log for details.
2012-08-18 00:25 GMT+0200
INFO
Your health check URL may be misconfigured. If your application does not respond to requests at http://elosource.elasticbeanstalk.com:80/, modify the health check URL to a valid path. 
```

我使用 Linux 32/64 位、Tomcat7(servlet 3) 和 Tomcat6(servlet2.5) 对其进行了测试。我总是得到相同的结果。

我还尝试为运行状况检查器添加一个额外的 html 文件。

*   你会推荐我做什么？

*   我必须有哪些替代方案才能让我的应用在 ec2 上运行？

*   是否有指南解释了我如何手动将我的应用程序部署到 ec2 以及所有需要的依赖项，如 mongodb、play 等？

*   WAR文件也比较大~30mb，用我的dsl 1k上传这么大的文件真的很痛苦。有没有办法只用 Elasticbeanstalk 上传更改？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-21T20:15:41.580

好的，我知道这不是您问题的直接答案，因为我没有使用豆茎，但正如您在其中一条评论中要求的那样：

这是我在安装了 jvm**的 linux EC2 实例上运行我的 play2 应用程序的方法：**

1.  在您的本地机器上，在您的项目目录中，运行`play dist`
2.  将`dist/yourapp-1.0-SNAPSHOT.zip`文件（或您配置的任何 dist 名称）发送到 EC2 实例
3.  SSH 到您的实例
4.  将 dist 文件解压缩到您想要的目录`cd`中
5.  跑`chmod +x start`
6.  跑`nohup ./start &`

现在你的 play2 应用程序在 EC2 上本地运行，带有 websocket 和所有很酷的东西。我不需要配置任何特别的东西来让它工作。我正在使用配置为任何其他数据库的 RDS 数据库。

显然，这比 beanstalk 要麻烦一些，因为您必须自己配置服务器并手动设置自动缩放。但这是我目前发现的使用 AWS 上的所有功能运行 play2 的最佳方式。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-18T09:58:47.370

您不应该将您的应用程序打包为战争，除非您有义务这样做或有充分的理由，因为[您将失去框架的重要功能](https://groups.google.com/d/msg/play-framework/EPFZzWGm4Ro/r9tjH43x8H4J)（即使使用 servlet 3.0 [，您也会错过 websocket 支持](https://play.lighthouseapp.com/projects/82401/tickets/8-war-packaging#ticket-8-7)）。

一种选择是通过[dotCloud](https://github.com/playframework/Play20/wiki/Deploying-to-dotCloud)服务部署您的应用程序。该服务[在 Amazon EC2 之上](http://docs.dotcloud.com/faq/)运行，使您能够轻松选择堆栈和垂直扩展。当然，你必须决定它是否[物有所值](https://www.dotcloud.com/pricing.html)，但你可以免费测试。

还有其他 PaaS 提供商，可让您部署 play 2 应用程序：

*   [Heroku](https://github.com/playframework/Play20/wiki/ProductionHeroku)
*   [云代工](https://github.com/playframework/Play20/wiki/Deploying-CloudFoundry)
*   [开班](https://github.com/opensas/play2-openshift-quickstart)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T03:54:42.147

`INFO: The APR based Apache Tomcat Native...`不是重要的部分。Tomcat 将在没有它的情况下启动，并且编译它不会使您的实例健康。事实上，您的`catalina.out`日志记录看起来完全正常。

我的猜测是 Beanstalk 的错误消息是准确的：您的健康检查 URL 配置错误。无论出于何种原因，您的应用程序都没有在端口 80 上返回根文档，这可能会以多种方式出现。尝试将静态 html 或简单的 jsp 页面添加到应用程序的根目录（WAR 中的顶级），并让 Beanstalk 检查。Beanstalk 的默认端口配置应该可以工作（如果我没记错的话，它会通过 apache 将流量传递给 tomcat 并返回，但我有一段时间没看过了），但`$CATALINA_HOME/conf/server.xml`无论如何检查一下看看发生了什么也没有什么坏处。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-12-10T09:10:55.287

如果您愿意升级到 Play 2.3.x 或更新版本，[Boxfuse](https://boxfuse.com)有原生 Play 2 支持来解决这个问题。

您现在可以简单地执行此操作`boxfuse run my-play-app-1.0.zip -env=prod`，这将自动：

*   为您的 Play 2 应用程序量身定制一个最小的 AMI
*   创建弹性 IP
*   创建具有正确权限的安全组
*   启动您的应用程序的实例

所有未来的更新都作为**蓝/绿部署执行，停机时间为零**。

这也适用于 Elastic Load Balancer 和 Auto-Scaling Groups，Boxfuse 免费套餐旨在适应 AWS 免费套餐。

您可以在此处阅读更多相关信息：[https ://boxfuse.com/blog/playframework-aws](https://boxfuse.com/blog/playframework-aws)

*免责声明：我是 Boxfuse 的创始人兼 CEO*

# php - PHP exec() 可以返回嵌套数组吗？

> ID：11918822
> 
> 赞同：0
> 
> 时间：2012-08-12T00:32:35.863
> 
> 标签：php, unix, terminal, command-line-interface

我正在使用 PHP exec() 运行一个输出 3 列 5 行数据表的脚本。现在每一行都是我数组中的一个值，如下所示：

```
1 => "Nancy  Female   32   05/10/2012"
2 => "Drew   Male     32   06/16/2012"
3 => "Websy  Female   32   11/05/2012"
4 => "Namez  Male     32   09/20/2012" 
```

我可以让它为每行中的值返回一个嵌套数组吗？

```
1 => 
    1 => Nancy
    2 => Female
    3 => 32
    4 => 05/10/2012
2 => 
    1 => Drew
    2 => Male
    3 => 32
    4 => 06/16/2012 
```

我总是可以使用分隔符，然后重新排列数组，但如果不知道 exec() 有一些功能可以做到这一点。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T00:35:35.840

不[`exec`](http://us3.php.net/manual/en/function.exec.php)，只知道输出*线*；它对这些行中的内容没有进一步的了解。

# c# - c# 用于使用 GPU 的网页游戏？也许是 WebGL？

> ID：11918823
> 
> 赞同：1
> 
> 时间：2012-08-12T00:32:42.720
> 
> 标签：c#, silverlight, opengl, gpu, webgl

我正在将使用 OpenGL 为 windows 制作的游戏移植到 silverlight，目前它正在工作，但问题是 XNA/silverlight 没有足够的图形性能，我认为这是因为 XNA 不支持固定管道（OpenGL做）

Windows 版本比网页版本快 4 到 5 倍，而且我知道填充率是有限的，因为当我将浏览器变大时，游戏变得非常慢

您是否知道任何支持 GPU 和 .net 的 Web 平台或通过 silverlight 使用 OpenGL 的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:00:23.700

我会研究[Unity](http://unity3d.com/)，我已经看到大学的同事用它来制作精美的 3d 游戏。不幸的是，用户必须下载网络播放器，但如果您需要性能，它就在那里。

# xaml - WebMatrix 扩展：可以写入错误列表和输出窗格？

> ID：11918826
> 
> 赞同：0
> 
> 时间：2012-08-12T00:33:37.900
> 
> 标签：xaml, webmatrix

我目前正在为 2.0 版编写 WebMatrix 扩展。我有一个要执行的过程，并将输出流输出到输出窗格，并将错误解析到错误列表中。有什么方法可以自动执行此操作，或通过对象模型访问错误列表？在 Microsoft.WebMatrix.Extensibility 程序集上的文档或 ILSpy 中找不到任何内容。

如果这不起作用，我看到的唯一“workarround”是打开一个 XAML 窗口，并将进程的输出重定向到这个窗口。该窗口也可能包含一个错误列表。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T18:27:29.990

可悲的是，现在没有办法通过 SDK 访问错误列表（我们正在努力）。您可以做的一件事是在任务面板中创建您自己的选项卡并将您的错误传递给该选项卡。查看在[任务面板中添加/管理选项卡](https://github.com/microsoftwebmatrix/nodepowertools)的示例。

具体来说，查看[WebMatrixExtension.cs](https://github.com/MicrosoftWebMatrix/NodePowerTools/blob/master/NodePowerTools/WebMatrixExtension.cs)。

希望这会有所帮助！

# jquery - Paperfold CSS 的绑定键

> ID：11918832
> 
> 赞同：0
> 
> 时间：2012-08-12T00:34:14.327
> 
> 标签：jquery, css, bind

我有个问题。

我下载了 mrflix 的 Paperfold CSS [MDN](https://developer.mozilla.org/en-US/demos/detail/paperfold-css)并查看了代码。

我偶然发现了这段话：

```
// bind buttons
this.element.next('.seeMore').click( $.proxy(this, 'toggle') );
$('#go').click( $.proxy(this, 'toggle') ); 
```

我尝试将 .seeMore 更改为 a.link 因为当我单击站点上的特殊链接时应该触发折纸，但它不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T21:10:13.447

Use

```
$('.link').click( $.proxy(this, 'toggle') ); 
```

And you can remove quite some code that is used for the demo interaction (sliders, the go button `$('#go')` - all code you don't need).

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T00:42:06.383

不应该`a:link`代替`a.link`吗？

如果我这样做`document.getElementsByClassName('link')`，则只有一个带有 class 的元素`link`，并且是一个`li`元素而不是`a`.

**编辑**：

啊，这是一个例子！

所以在这里你有解决方案：

如果您查看代码，则启动动画的按钮具有 id`go`并且没有类。所以改变`.seeMore`你不会有一个可以作为那个按钮的锚。

您必须更改您发布的代码的最后一行：

```
$('#go').click( $.proxy(this, 'toggle') ); 
```

进入

```
$('a.link').click( $.proxy(this, 'toggle') ); 
```

# jsf-2 - Primefaces DataTable、延迟加载和每行命令按钮

> ID：11918834
> 
> 赞同：7
> 
> 时间：2012-08-12T00:34:32.843
> 
> 标签：jsf-2, primefaces, lazy-loading, datatables

我有这个简单的页面：

```
<h:form id="form">

    <p:dataTable value="#{testBean.unitTypeModel}" var="elem" lazy="true" rows="10">
        <p:column headerText="class">#{elem.class.simpleName}</p:column>
        <p:column headerText="code">#{elem.code}</p:column>
        <p:column headerText="description">#{elem.description}</p:column>
        <p:column headerText="action">
            <p:commandButton action="test2" icon="ui-icon ui-icon-wrench" value="edit">
                <f:setPropertyActionListener target="#{testBean.selection}" value="#{elem}"/>
            </p:commandButton>
        </p:column>
    </p:dataTable>

    <p:commandButton action="test2" icon="ui-icon ui-icon-wrench"/>

</h:form> 
```

内部不工作，只是刷新页面`CommandButton`。`DataTable`但是外面的那个正在工作。

如果我改变这种方式`value`：`lazy`

```
<h:form id="form">

    <p:dataTable value="#{testBean.unitTypeModel.load(0, 10, null, null, null)}" var="elem" lazy="false" rows="10">
        <p:column headerText="class">#{elem.class.simpleName}</p:column>
        <p:column headerText="code">#{elem.code}</p:column>
        <p:column headerText="description">#{elem.description}</p:column>
        <p:column headerText="action">
            <p:commandButton action="test2" icon="ui-icon ui-icon-wrench" value="edit">
                <f:setPropertyActionListener target="#{testBean.selection}" value="#{elem}"/>
            </p:commandButton>
        </p:column>
    </p:dataTable>

    <p:commandButton action="test2" icon="ui-icon ui-icon-wrench"/>

</h:form> 
```

内部就像一个魅力`CommanButton`。`DataTable`

有人知道为什么吗？

这是一个错误吗？

我上线了

*   玻璃鱼 3.1.2
*   JSF 2.1.11 (莫哈拉)
*   PrimeFaces 3.4-快照

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-17T09:55:07.400

发现延迟数据模型在回发请求中必须是相同的实例，即使具有相同值的新实例也不起作用。所以它必须至少由一个`@ViewScoped`bean 提供。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2017-03-05T11:24:39.430

自发布此问题以来已经过去了四年，但问题仍然存在于 PrimeFaces 6.0 中。

我将向那些不想（或不能）使用 ViewScoped bean 的人发布一个解决方法。

前提是：“您不能将任何“ajaxified”项目放在绑定到 RequestScoped 东西的惰性数据表中”。绝不。请记住，任何引发 ajax 调用的东西都不会起作用。

所以第一步是在数据表之外进行ajax调用。我们将使用 RemoteCommand 执行此操作。您可以将此 RemoteCommand 放置在 DataTable 之外的任何位置（当然是在表单内）

```
<p:remoteCommand name="remoteCall" action="#{bean.doStuff()}">
</p:remoteCommand> 
```

现在，我们所要做的就是从 DataTable 中调用这个 RemoteCommand。我正在使用一个链接来执行 javascript 调用，但你可以使用一个按钮或任何你喜欢的东西：

```
<p:column>
    <p:link value="#{item.id}" href="#" onclick="remoteCall([{name:'id', value:#{item.id}}])">
    </p:link>
</p:column> 
```

此链接提供了一种调用 javascript 函数“remoteCall”的方法，该函数将对“bean.doStuff()”执行 ajax 调用。

请注意，onClick 事件不仅包含对“remoteCall”的 javascript 调用，还包含一个只有一个参数的参数数组，名为“id”，值为“#{item.id}”。这将允许 RemoteCommand 向支持 bean 发送一个名为“id”的参数。

在“doStuff”方法中，您必须检索“id”参数值：

```
public void doStuff () {

    String id = FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("id");

} 
```

# php - PHP 分组/总计

> ID：11918840
> 
> 赞同：0
> 
> 时间：2012-08-12T00:36:28.653
> 
> 标签：php, grouping

我真的很想知道如何做到这一点，所以我不完全确定要问什么，但是就这样吧。

这是我到目前为止所拥有的：

```
foreach($order as $key => $ord){
   $attribute =  explode(":", $order[$key]);    
   echo sku($attribute[0],$attribute[2],$attribute[1],$attribute[4])." - ".$attribute[3].";    
} 
```

这将是这样的输出

```
SKU - QUANTITY
1001-01 - 5
1001-02 - 3
1001-01 - 1
1045-02 - 1
1001-02 - 8
1001-01 - 3
1003-01 - 4 
```

我需要一种汇总这些的方法，以便显示

```
SKU - QUANTITY
1001-01 - 9
1001-02 - 11
1003-01 - 4
1045-02 - 1 
```

这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T00:42:44.467

是的，这是可能的。只需使用以 sku 作为键的数组：

```
$totals = array();

foreach($order as $ord){
   $attribute =  explode(":", $ord);    

   $sku = sku($attribute[0],$attribute[2],$attribute[1],$attribute[4])

   $amt = $attribute[3];

    if (isset($totals[$sku])) {
        $totals[$sku] += $amt;
    } else {
        $totals[$sku] = $amt;
    }

} 
```

附带说明：`explode`被要求做这样的事情通常意味着数据没有以正确的格式存储。

此外，`$order[$key]`与 完全相同`$ord`，所以我不确定您为什么使用`$order[$key]`.

# c++ - 静态 const getter 的内联 vs constexpr？

> ID：11918846
> 
> 赞同：17
> 
> 时间：2012-08-12T00:37:55.997
> 
> 标签：c++, c++11, inline, constexpr

在下面的代码中，什么函数可以为外部使用提供最佳优化，为什么？C++ 2011 中是否允许“版本 4”？

```
template<unsigned int TDIM> class MyClass 
{
    public:
        static inline unsigned int size()           {return _size;} // Version 1
        static inline const unsigned int size()     {return _size;} // Version 2
        static constexpr unsigned int size()        {return _size;} // Version 3
        static inline constexpr unsigned int size() {return _size;} // Version 4
    protected:
        static const unsigned int _size = TDIM*3;
}; 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-08-12T01:56:00.700

我相信中的代码是`<random>`一个很好的例子，但也不必盲目地遵循。在`<random>`你看到这两种风格：

```
template<unsigned int TDIM> class MyClass 
{
    public:
        static constexpr unsigned int size() {return _size;}  // 1
        static constexpr unsigned int dim = TDIM;             // 2
    private:
        static const unsigned int _size = TDIM*3;
}; 
```

1 和 2 之间的选择很大程度上取决于风格。当以需要编译时结果的方式使用时，它们都会在编译时解析。你想让你的客户打字`()`还是不打字？是否存在需要使用一种或另一种样式的通用代码？满足通用代码的要求是这里的关键。

关键字的使用在`inline`这里没有影响。我认为它过于冗长，但如果您使用它，它不会造成任何伤害并且没有影响。

添加`const`到返回类型不会在这里产生影响。我认为它过于冗长，但如果您使用它，它不会造成任何伤害并且没有影响。

如果您使用函数样式，但不要使用`constexpr`：

```
 static unsigned int size() {return _size;} 
```

那么这个函数不能在编译时调用，因此不能在需要编译时常量的上下文中使用。如果您的应用程序或您的客户不需要此类功能，这可能不会对他们造成任何伤害。但是恕我直言，如果您有`constexpr`工具箱，那么这是使用它的理想场所。如果你做一个未来的客户可以做这样的事情：

```
template <unsigned N> struct B {};
constexpr auto myclass = MyClass<3>();
// ...
// lots of code here
// ...
B<myclass.size()> b; 
```

这两个是等价的：

```
 static constexpr unsigned int dim = TDIM;        // 2
        static const unsigned int dim = TDIM;            // 3 
```

但这只是因为所涉及的类型是整数。如果类型不是整数，那么你必须使用`constexpr`并且类型必须有一个`constexpr`构造函数：

```
class A
{
    unsigned _i;
public:
    constexpr A(unsigned i) : _i(i) {}
};

template<unsigned int TDIM> class MyClass 
{
    public:
        static constexpr unsigned int size() {return _size;}
        static constexpr unsigned int dim = TDIM;
        static constexpr A a = A(dim);
    private:
        static const unsigned int _size = TDIM*3;
}; 
```

这里的每个人，包括我自己，都还在学习如何使用`constexpr`. 所以+1的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:52:59.287

static const 整数值被编译器视为常量而不是变量。根据常数，它们最终可能根本不会占用任何内存。在您的所有示例中，该函数将返回一个常量值并且几乎总是被内联（如上所述，在这个示例中，inline 关键字不是必需的，因为所有声明都已经内联了）。

从编译器的角度来看，上面的代码与此没有什么不同：

```
static unsigned int size() { return 42; } 
```

版本 2 中的 'const' 关键字也不是必需的。我相信只有返回指针或引用才有意义。

# c - 如何将 LISP 代码翻译或转换为 C 代码？

> ID：11918851
> 
> 赞同：2
> 
> 时间：2012-08-12T00:39:33.507
> 
> 标签：c, lisp

我真的不喜欢 LISP，我很想将所有旧的 lisp 代码转换为 c。我是一个 C 初学者，甚至是 lisp 的初学者。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T00:46:23.717

两种语言*截然不同*。Lisp 依赖于大量机器的存在：

*   解析和评估 Lisp 代码的代码
*   具有特定语义的标准列表数据结构
*   垃圾收集器

当然，C 没有这些东西。当您将所有这些东西收集在一起并在 C 中提供它们时，您将拥有一个复杂的、难以理解的编程环境。学习 Lisp 会容易得多！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T00:46:04.770

这是我转换成 C 的一些 LISP。LISP 来自[“日历计算”](http://www.calendarists.com/)，并且转换是在很久以前完成的，可以来自本书的“千年版”（现在有一个第三版，你会得到它)，因此 C 中的所有名称都以“CCME”或“ccme”为前缀。

```
/*
Gregorian year corresponding to the fixed $date$.

Original LISP code
(defun alt-gregorian-year-from-fixed (date)
  ;; TYPE fixed-date -> gregorian-year
  (let* ((approx ; approximate year
          (quotient (- date gregorian-epoch -2)
                    146097/400))
         (start  ; start of next year
          (+ gregorian-epoch
             (* 365 approx)
             (quotient approx 4)
             (- (quotient approx 100))
             (quotient approx 400))))
    (if (< date start)
        approx
      (1+ approx))))

*/

CCME_GregorianYear ccme_alt_gregorian_year_from_fixed(CCME_FixedDate date)
{
        CCME_GregorianYear rv;
        /*S-CODE*/
        CCME_GregorianYear approx = ccme_quotient(date - ccme_gregorian_epoch() + 2, 146097.0/400.0);
        CCME_GregorianYear start = ccme_gregorian_epoch() + (365 * approx) +
                     ccme_quotient(approx, 4) -
                     ccme_quotient(approx, 100) +
                     ccme_quotient(approx, 400);

        if  (date < start)
                rv = approx;
        else
                rv = approx + 1;
        /*E-CODE*/
        return rv;
} 
```

然而，这不是典型的 LISP（也不是特别典型的 C），将 LISP 转换为 C 的一般转换绝不是微不足道的。当您处理字符串和列表（尤其是字符串列表）时，这将是双重事实，因为 C 中的内存管理变得……有趣（努力工作，有问题）。

# python - 使用列表中的项目更改嵌套字典的字典中的值？

> ID：11918852
> 
> 赞同：5
> 
> 时间：2012-08-12T00:39:34.057
> 
> 标签：python, recursion, dictionary, nested, list-comprehension

您将如何根据列表的值在嵌套字典的字典中修改/创建键/值，其中列表的最后一项是字典的值，而其余项则保存到字典中的键？这将是列表：

```
list_adddress = [ "key1", "key1.2", "key1.2.1", "value" ] 
```

这只会在解析命令行参数等情况下出现问题。很明显，在脚本中修改/创建这个值会很容易使用`dict_nested["key1"]["key1.2"]["key1.2.1"]["value"]`.

这将是字典的嵌套字典：

```
dict_nested = { 
    "key1": {
                "key1.1": { 
                            "...": "...",
                },
                "key1.2": { 
                            "key1.2.1": "change_this",
                },
            },

    "key2": {
                "...": "..."
            },
} 
```

我想在这种情况下，将需要递归函数或列表理解之类的东西。

```
def ValueModify(list_address, dict_nested):
    ...
    ...
    ValueModify(..., ...) 
```

此外，如果 in 中的项目`list_address`将冷藏到不存在的字典中的键，则应该创建它们。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-12T02:01:29.960

单线：

```
keys, (newkey, newvalue) = list_address[:-2], list_address[-2:]
reduce(dict.__getitem__, keys, dict_nested)[newkey] = newvalue 
```

注意：`dict.get`并且`operator.getitem`会在这里产生错误的异常。

[Joel Cornett 的答案](https://stackoverflow.com/a/11918901/4279)中的明确 for 循环可能更具可读性。

如果要创建不存在的中间字典：

```
reduce(lambda d,k: d.setdefault(k, {}), keys, dict_nested)[newkey] = newvalue 
```

如果您想覆盖不是字典的现有中间值，例如字符串、整数：

```
from collections import MutableMapping

def set_value(d, keys, newkey, newvalue, default_factory=dict):
    """
    Equivalent to `reduce(dict.get, keys, d)[newkey] = newvalue`
    if all `keys` exists and corresponding values are of correct type
    """
    for key in keys:
        try:
            val = d[key]
        except KeyError:
            val = d[key] = default_factory()
        else:
            if not isinstance(val, MutableMapping):
                val = d[key] = default_factory()
        d = val
    d[newkey] = newvalue 
```

### 例子

```
list_address = ["key1", "key1.2", "key1.2.1", "key1.2.1.1", "value"]
dict_nested = {
    "key1": {
                "key1.1": {
                            "...": "...",
                },
                "key1.2": {
                            "key1.2.1": "change_this",
                },
            },

    "key2": {
                "...": "..."
            },
}

set_value(dict_nested, list_address[:-2], *list_address[-2:])
assert reduce(dict.get, list_address[:-1], dict_nested) == list_address[-1] 
```

### 测试

```
>>> from collections import OrderedDict
>>> d = OrderedDict()
>>> set_value(d, [], 'a', 1, OrderedDict) # non-existent key
>>> d.items()
[('a', 1)]
>>> set_value(d, 'b', 'a', 2) # non-existent intermediate key
>>> d.items()
[('a', 1), ('b', {'a': 2})]
>>> set_value(d, 'a', 'b', 3) # wrong intermediate type
>>> d.items()
[('a', {'b': 3}), ('b', {'a': 2})]
>>> d = {}
>>> set_value(d, 'abc', 'd', 4)
>>> reduce(dict.get, 'abcd', d) == d['a']['b']['c']['d'] == 4
True
>>> from collections import defaultdict
>>> autovivify = lambda: defaultdict(autovivify)
>>> d = autovivify()
>>> set_value(d, 'abc', 'd', 4)
>>> reduce(dict.get, 'abcd', d) == d['a']['b']['c']['d'] == 4
True
>>> set_value(1, 'abc', 'd', 4) #doctest:+IGNORE_EXCEPTION_DETAIL
Traceback (most recent call last):
...
TypeError:
>>> set_value([], 'abc', 'd', 4) #doctest:+IGNORE_EXCEPTION_DETAIL
Traceback (most recent call last):
...
TypeError:
>>> L = [10]
>>> set_value(L, [0], 2, 3)
>>> L
[{2: 3}] 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T00:53:05.340

```
address_list = ["key1", "key1.1", "key1.2", "value"]

def set_value(dict_nested, address_list):
    cur = dict_nested
    for path_item in address_list[:-2]:
        try:
            cur = cur[path_item]
        except KeyError:
            cur = cur[path_item] = {}
    cur[address_list[-2]] = address_list[-1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T00:50:22.983

我认为这就像你追求的那样。

```
def ValueModify(l, d):
  if l[0] not in d:
    d[l[0]] = dict()
  if isinstance(d[l[0]], dict):
    ValueModify(l[1:], d[l[0]])
  else:
    d[l[0]] = l[1] 
```

我正在使用`isinstance`，这是类型检查，通常不是您在 Python 中执行的操作，但它确实按预期设置了值。

-- 已编辑 --

如果原始`nested_dict`未完全填充，则在缺少键检查中添加以设置嵌套值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T01:02:09.640

这是一个递归解决方案。

```
def unravel(d, keys):
    i = keys[0]
    keys = keys[1:]
    tmpDict = d[i]
    if type(tmpDict) != type({}):
        return tmpDict
    else:
        return unravel(tmpDict, keys) 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-02-13T17:42:07.150

要插入新的键值对或更新键值对的值：

```
import copy
def update_nested_map(d, u, *keys):
    d = copy.deepcopy(d)
    keys = keys[0]
    if len(keys) > 1:
        d[keys[0]] = update_nested_map(d[keys[0]], u, keys[1:])
    else:
        d[keys[0]] = u
    return d 
```

测试：

```
 >>> d = {'m': {'d': {'v': {'w': 1}}}}

    >>> update_nested_map(d, 999, ['m', 'd', 'v', 'w'])
    {'m': {'d': {'v': {'w': 999}}}}

    >>> update_nested_map(d, 999, ['m', 'd', 'v', 'z'])
    {'m': {'d': {'v': {'z': 999, 'w': 1}}}}

    >>> update_nested_map(d, 999, ['m', 'd', 'l'])
    {'m': {'d': {'v': {'w': 1}, 'l': 999}}}

    >>> update_nested_map(d, 999, ['m','d'])
    {'m': {'d': 999}} 
```

# ios - iOS：将身份验证数据永久存储在设备上

> ID：11918855
> 
> 赞同：3
> 
> 时间：2012-08-12T00:40:25.633
> 
> 标签：ios, wcf, login

我是一名 .Net 开发人员，对 Xcode 非常陌生。我将 WCF 用于服务器端进程，并在 iphone 应用程序和 WCF 之间发送/接收 JSON 数据。我希望本机 iPhone 应用程序执行以下操作：

1.  注册和登录视图
2.  一旦用户单击登录按钮，它将以 JSON 格式输入的用户名和密码发送到我的 WCF 服务进行身份验证，如果登录有效，WCF 将返回一个有效的成员 GUID 和一个令牌字符串
3.  iPhone 应用程序接收成员 guid 和令牌，并将它们存储在“持久变量”中，我将为经过身份验证的用户加载新视图。因此成员可以访问所有功能/视图。
4.  每次我在 iphone 应用程序和 WCF 之间发布数据时，我都需要使用变量中的成员 guid 和令牌，以便 WCF 服务知道哪个成员正在请求数据。
5.  每次用户关机或重启 iphone 时，我希望我的应用程序能记住会员 guid，这样他们就不必再次登录。
6.  用户可以单击注销按钮，它将清除变量并返回登录视图。

我不确定这是否是 iphone 应用程序登录过程的正确方式？

我已经完成了 WCF 身份验证并发送回 JSON，但现在我需要存储成员 GUID，有人可以指点我正确的方向吗？我应该用什么来存储以后可以使用的信息？一个例子会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-12T01:05:12.707

听起来像是 NSUserDefaults 的完美之选。像这样使用它们：

```
NSUserDefaults *myUserDefaults = [NSUserDefaults standardUserDefaults];
[myUserDefaults setObject: @"the key" forKey: @"key"]; 
```

您还可以使用其他功能来设置不同类型的数据，例如`setInteger:forKey:`或 `setValue:forKey:`。要调用您的数据，请使用此功能：

```
NSString *theKey = [myUserDefaults objectForKey:@"key"]; 
```

返回值将是您存储在其中的对象。`integerForKey:`其他数据类型与和等函数类似`valueForKey:`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T01:22:53.780

你应该知道你必须尊重你的应用程序的沙箱，这意味着你不能在设备上“永久”存储一些东西。

通常这种逻辑（保存令牌等）是通过将数据保存到`NSUserDefaults`.

这`NSUserDefaults`是应用程序的属性列表，您可以将数据存储为键值对。

例如，您可以通过执行以下操作来保存某些内容：

```
NSUserDefaults *ud = [NSUserDefaults standardUserDefaults];
[ud setObject:@"mylongtoken" forKey:@"com.myapp.apitoken"];
[ud synchronize]; 
```

如果您删除应用程序，此数据也会消失。当应用程序通过 App Store 更新时，这些数据会保留下来，并将作为设备备份的一部分备​​份到 iTunes/iCloud。

您还可以将此属性列表与 iCloud 同步，但请查看此帖子：[我可以使用 iCloud 同步 NSUserDefaults plist 文件吗](https://stackoverflow.com/questions/7810157/can-i-use-icloud-to-sync-the-nsuserdefaults-plist-file)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-04T22:36:57.923

实际上，如果您要存储凭据，您可能应该将其放入钥匙串中。NSUserDefaults 可以很容易地从设备上加载并以明文形式保存。

这是一个不错的钥匙串实用程序库，应该会有所帮助： [https ://github.com/ldandersen/STUtils/tree/master/Security](https://github.com/ldandersen/STUtils/tree/master/Security)

您可以像这样保存凭据：

```
[STKeychain storeUsername:@"username" andPassword:@"password" forServiceName:@"namespace" updateExisting:YES error:&error]; 
```

然后像这样检索它们：

```
NSString *password = [STKeychain getPasswordForUsername:@"username" andServiceName:@"namespace" error:&error]; 
```

# html - HTML5 视频只播放音频，不会在 Safari 上预加载？

> ID：11918856
> 
> 赞同：1
> 
> 时间：2012-08-12T00:40:35.277
> 
> 标签：html, video, safari, video-streaming, h.264

我正在将 videoJS 用于 html5 视频。它可以在除 Safari 之外的所有浏览器上完美运行。它不播放视频，只播放音频，并且在整个文件下载完成之前不会播放任何内容。我从 videojs.com 复制并粘贴了代码，所以我不知道该怎么做。任何帮助是极大的赞赏！

网站：[http ://bit.ly/P99RhM](http://bit.ly/P99RhM)

PS这些文件也不会在任何移动设备上播放......关于为什么的任何想法？我在想压缩有问题，但它已经在 h.264 中了。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-21T20:27:39.697

我认为您的视频是 webM，不是吗？我正在检查你的网站。

1 - 要在 iPhone 上播放，使用 MP4 格式的 h.264 并将 moov atom 放置在文件的开头。手刹是一个很好的软件。

2- h.264 文件有一个称为 moov atom 的索引部分。这是一个小的索引部分，它告诉播放器哪个字节是视频的哪一秒。

moov atom 可以位于文件的开头或结尾。通过将它放在开头，您的播放器将能够在整个视频下载之前在文件中搜索。

在 Handbrake 中，您可以通过选中复选框将 atom moov 放在开头：“网络优化”

或者如果您已经有 MP4 文件，请尝试使用[此](http://renaun.com/blog/code/qtindexswapper/).

# python - 如何仅选择 SQLAlchemy 中的某些列？

> ID：11918857
> 
> 赞同：6
> 
> 时间：2012-08-12T00:40:35.537
> 
> 标签：python, sql, select, sqlalchemy

**这是我的python代码：**

```
 cx=sqlalchemy.create_engine(u"mysql://username:password@ipaddress/database?charset=utf8")

 metadata=sqlalchemy.MetaData(cx)
 orm_obj=sqlalchemy.Table(u'I_POI',metadata,autoload=True)

 sql=orm_obj.select(u'poi_id,poi_name').where(u'poi_id>1 and poi_id>0').limit(3).offset(0)

 resultz=sql.execute()
 for i in resultz:
     print i 
```

* * *

[DB] I_POI表：poi_id,poi_name,poi_data1,poi_data2......poi_data10

我用现有的数据库来做，但是“select()”是行不通的。它仍然返回总列。
我只想得到一些专栏，请帮助我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T01:38:54.447

这是对我有用的代码：

```
from sqlalchemy import select
from sqlalchemy.sql import and_

results = select([orm_obj.c.poi_id, orm_obj.c.poi_name])\
    .where(and_(orm_obj.c.id > 1, orm_obj.c.id < 100)).execute()
for id, name in results:
    print id, name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-10T12:47:08.077

使用通用`select`而不是`Table.select`：

```
stmt = select([orm_obj.c.poi_id, orm_obj.c.poi_name]).\
where(and_(orm_obj.c.poi_id > 1, orm_obj.c.poi_id < 100)).\
limit(3)
result = conn.execute(stmt) 
```

# c# - 迭代器块的奇怪测试覆盖率结果，为什么这些语句没有执行？

> ID：11918858
> 
> 赞同：13
> 
> 时间：2012-08-12T00:40:40.923
> 
> 标签：c#, unit-testing, iterator, code-coverage, dotcover

我正在使用 dotCover 来分析我的单元测试的代码覆盖率，我得到了一些奇怪的结果......我有一个覆盖不完整的迭代器方法，但没有覆盖的语句只是右括号在方法结束时。

这是我正在测试的方法：

```
 public static IEnumerable<T> CommonPrefix<T>(
        this IEnumerable<T> source,
        IEnumerable<T> other,
        IEqualityComparer<T> comparer)
    {
        source.CheckArgumentNull("source");
        other.CheckArgumentNull("other");

        return source.CommonPrefixImpl(other, comparer);
    }

    private static IEnumerable<T> CommonPrefixImpl<T>(
        this IEnumerable<T> source,
        IEnumerable<T> other,
        IEqualityComparer<T> comparer)
    {
        comparer = comparer ?? EqualityComparer<T>.Default;

        using (IEnumerator<T> en1 = source.GetEnumerator(),
                              en2 = other.GetEnumerator())
        {
            while (en1.MoveNext() && en2.MoveNext())
            {
                if (comparer.Equals(en1.Current, en2.Current))
                    yield return en1.Current;
                else
                    yield break;
            }
        } // not covered
    } // not covered 
```

单元测试：

```
 [Test]
    public void Test_CommonPrefix_SpecificComparer()
    {
        var first = new[] { "Foo", "Bar", "Baz", "Titi", "Tata", "Toto" };
        var second = new[] { "FOO", "bAR", "baz", "tata", "Toto" };

        var expected = new[] { "Foo", "Bar", "Baz" };
        var actual = first.CommonPrefix(second, StringComparer.CurrentCultureIgnoreCase);
        Assert.That(actual, Is.EquivalentTo(expected));
    } 
```

和覆盖结果：

![覆盖结果](../Images/91c4061c740edc75337a84241ef3fb7d.png)

我假设块的右大括号`using`实际上是`Dispose`对枚举器的调用；但是，为什么不执行呢？我首先怀疑 NUnit 没有处理枚举器，但如果我在`actual`.

至于第二个未覆盖的右大括号，我不知道它代表什么......我想这与编译器如何转换迭代器块有关。

谁能阐明这两个“声明”是什么，以及为什么不执行它们？

* * *

*编辑：Peter 提出了一个非常好的问题：上面显示的结果是在**debug build**上运行测试时获得的。如果我在**release build**上运行测试，则该方法的覆盖率`CommonPrefixImpl`为 100%，因此它可能与编译器优化有关。*

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-15T02:14:36.557

迭代器方法的问题之一是编译器会生成一个相当大且复杂的状态机来管理迭代器方法中代码的延迟执行。这通常会生成一两个类。这些类旨在处理一般情况而不是您的特定情况，因此其中可能至少有一些从未使用过的代码。您可以通过使用 ILSpy、JustDecompile 或 Reflector 等工具查看程序集来查看生成的内容。它将显示由 C# 编译器生成的程序集中的类（通常包含“<”等的类名）

分析器所知道的是 PDB 如何与您的代码相关联，尽管*您编写*的所有代码都可能被执行，但仍有可能并非编译器生成的所有代码都被执行。分析器可能不知道这一点，只是说执行了特定百分比（小于 100）的特定迭代器方法。

可能生成的其中一件事是异常处理代码。因为编译器不知道您的代码不会或可能无法生成异常，它仍然会生成代码来补偿异常——它需要防止其状态被破坏。我敢打赌，如果您在迭代器方法中基于某个标志包含在不同位置抛出异常的方法并运行该方法两次（一次没有异常，一次在同一运行中出现异常），那么百分比会不同——可能更高因为生成的异常处理代码将被执行。

方法的结尾“似乎”没有被执行的事实可能是因为该代码是状态机中被执行的不同方法的一部分，并且编译器永远不会生成从生成的代码到您的类中的代码的关联.

**更新：**为了更好地理解编译器正在做什么并查看它生成的代码类型的示例，请参阅C# 规范中的第*10.14 节迭代器（* [http://www.microsoft.com/en-us/download/details .aspx?id=7029](http://www.microsoft.com/en-us/download/details.aspx?id=7029) )

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-09-22T14:32:14.770

除了您的问题和详细答案之外，我还有以下行为。

```
 // less than 100% coverage
    public static IEnumerable<T> ForEachYieldDo<T>(this IEnumerable<T> source, Action<T> action)
    {
        foreach (var x in source)
        {
            action(x);
            yield return x;
        }
    }

    // 100% code coverage
    public static IEnumerable<T> ForEachSelectDo<T>(this IEnumerable<T> source, Action<T> action)
    {
        return source.Select(x =>
        {
            action(x);
            return x;
        });
    } 
```

这两个函数具有相同的行为。仅在处理项目时才执行该操作。如果停止检索项目，则不执行操作。

# objective-c - 在 Xcode 中添加 CoreTelephony 框架

> ID：11918862
> 
> 赞同：0
> 
> 时间：2012-08-12T00:41:41.600
> 
> 标签：objective-c, xcode

我以前从未在 Xcode 中工作过，因为我只是统一地制作我的游戏；但是，我正在使用的其中一个广告插件希望我执行以下步骤。我究竟如何在 xcode 中添加该框架（我还需要在线下载该框架还是已经包含在内）？

*— 第 4 步：将 CoreTelephony 添加到您的 iOS 项目（仅限 iOS）

将`CoreTelephony`框架添加到 Unity 生成的 Xcode 项目中。*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:33:16.397

我写了一篇关于如何将框架添加到 Xcode 项目的帖子：

[http://cupsofcocoa.com/2012/06/16/adding-frameworks-to-an-xcode-project/](http://cupsofcocoa.com/2012/06/16/adding-frameworks-to-an-xcode-project/)

基本上：

1.  选择顶级项目
2.  转到 Build Phases，展开 Link Binaries with Library
3.  单击 +，选择所需的框架，然后单击添加

# iphone - 为什么这些“成员”变量表现得像静态变量？

> ID：11918863
> 
> 赞同：0
> 
> 时间：2012-08-12T00:41:51.183
> 
> 标签：iphone, objective-c, ios, pointers

我有`MyUnitClass`这样声明的实现：

```
@implementation MyUnitClass
Unit* _unit = NULL; 
```

在 for 循环中，我迭代了多次并创建了多个 MyUnitClass 实例。 `Unit`表现得像一个静态变量。我在 init 方法中设置了一个断点`MyUnitClass`，这是每次初始化类时得到的：

```
(gdb) print _unit
$4 = (Unit *) 0x112340
(gdb) print _unit
$5 = (Unit *) 0x112340 
```

**笔记：**

我已经通过将变量移动到`@interface`声明中解决了这个问题。如果您回答了这个问题，很高兴看到可以找到此信息的页面的链接。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T00:44:02.200

这是因为您没有用花括号将变量括起来，使其成为全局变量。要修复，请尝试像这样定义它：

```
@implementation MyObject {
   unsigned int myVar;
}

// rest of implementation

@end 
```

只能有一个 @implementation 块，因此如果它已在 .h 文件中声明，则需要在此处添加成员，否则需要将整个块移动到 .m 文件中。

这是 C 的残余，编译器不太清楚您希望它成为 iVar，而不是全局变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T07:23:43.800

正如理查德指出的那样，没有大括号将 var 定义为全局变量。在声明实例变量方面，有两种方法：

在[Objective-C 编程语言](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/objectivec/Chapters/ocDefiningClasses.html)中，讨论了在`@interface`或`@implementation`.

因此，您可以在 中定义一个实例变量，这是您历史上最常见的定义实例变量的地方`x`：`@interface`

```
@interface TestClass : NSObject
{
    NSInteger x;
}
@end

@implementation TestClass

// define the methods

@end 
```

但是，正如上面的链接描述的那样，您也可以在您的中定义它`@implementation`（尽管按照惯例，我认为您不会经常看到这种情况）：

```
@interface TestClass : NSObject

@end

@implementation TestClass
{
    NSInteger x;
}

// define the methods

@end 
```

实际上，您可以将实例变量放在第三个位置，在类扩展中（稍后在[同一文档](http://developer.apple.com/library/ios/documentation/cocoa/conceptual/objectivec/Chapters/ocCategories.html#//apple_ref/doc/uid/TP30001163-CH20-SW2)中讨论）。实际上，这意味着您可以将 .h 定义如下

```
// TestClass.h

@interface TestClass : NSObject

// define public properties and methods here

@end 
```

和你的 .m 如下：

```
// TestClass.m

// this is the class extension

@interface TestClass ()
{
    NSInteger x;
}
@end

// this is the implementation

@implementation TestClass

// define the methods

@end 
```

最后一种方法（带有 .h`@interface`的 .m 带有类扩展名和`@implementation`）现在是 Xcode 模板在您创建新类时使用的格式。实际上，这意味着您可以将公共声明放在 .h 文件中，并将私有`@property`和实例变量放在类扩展中。它只是让你的代码更简洁一些，避免你的 .h 文件（它实际上是你的类的公共接口）与私有实现细节混淆。对于实例变量，也许以前在 中定义实例变量的技术`@implementation`是等效的，但我认为这不适用于`@property`声明，在这种情况下，类扩展变得有用。

# c# - 有效处理多个“相似”事件

> ID：11918867
> 
> 赞同：0
> 
> 时间：2012-08-12T00:43:06.877
> 
> 标签：c#, events, xna-4.0

在我的 C#/XNA 项目中，我有一个管理输入的“静态”类。它看起来像这样：

```
internal sealed class InputManager
{
    public delegate void KeyboardHandler(Actions action);

    public static event KeyboardHandler KeyPressed;

    private static readonly Dictionary<Actions, Keys> KeyBindings = Main.ContentManager.Load<Dictionary<Actions, Keys>>("KeyBindings");

    private static KeyboardState currentKeyboardState;

    private InputManager()
    {
    }

    public static void GetInput()
    {
        currentKeyboardState = Keyboard.GetState();

        foreach (KeyValuePair<Actions, Keys> actionKeyPair in KeyBindings)
        {
            if (currentKeyboardState.IsKeyDown(actionKeyPair.Value))
            {
                OnKeyPressed(actionKeyPair.Key);
            }
        }
    }

    private static void OnKeyPressed(Actions action)
    {
        if (KeyPressed != null)
        {
            KeyPressed(action);
        }
    }
} 
```

因此，在整个游戏过程中，我获取输入并检查当前是否按下了字典中包含的任何键（我使用字典进行键绑定——一个动作绑定到一个键）。如果是这样，KeyPressed 事件将被触发，并将关联的操作作为参数。通过这样做，我可以为这个事件订阅一个外部类（例如相机）并根据动作（键）做适当的事情。

问题是我必须像这样测试每个订阅者的方法中的操作：

```
 if (action == Actions.MoveLeft)
        {
            DoSomething();
        } 
```

因此，无论按下哪个键（只要它是字典的一部分），每个订阅者的方法都会被调用，即使它实际上不需要。

我知道我可以为每个操作设置一个事件：事件 MoveLeft、事件 MoveRight 等……但是，有没有更好的方法来执行此操作，例如事件列表？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:25:23.707

您可以使用接口来处理：例如：

```
interface IExecuteAction
{
void doMoveLeftAction();
void doMoveRightAction(); 
}

ExecuteMoveLeftAction(Actions action,IExecuteAction execAction)
{
switch(action
 case Actions.MoveLeft :
        execAction.doMoveLeftAction(); 
        break; 
case Actions.MoveLeft :
        execAction.doMoveLeftAction(); 
        break;
} 
```

在您的代码中在您的订阅者上实现此接口

```
class subscriber1:IExecuteAction
{
void doMoveLeftAction()
{
//do what you want
}
void doMoveRightAction()
 {
 //do what you want
 }
} 
```

在你这样处理之后：

```
ExecuteMoveLeftAction(action,subscriber1); 
```

# php - 基于csv数据的php绘图

> ID：11918868
> 
> 赞同：1
> 
> 时间：2012-08-12T00:43:30.090
> 
> 标签：php, html, csv

我要做的是从 csv 文件中加载一些值，并将它们用作 x、y 值来绘制一些矩形。

我正在加载文件，但不是显示图像，而是输出原始图像数据。我知道在 html 代码中我可以使用

```
<img scr="foo.php"></script> 
```

正确显示图像，但我不知道如何使用它根据 csv 文件中的每一行数据绘制多个矩形。请帮忙。

csv代码

```
20,40,60,80
50,100,150,175 
```

索引 php 代码

```
<html>
    <body>
        <?php
            include("parse.php");
        ?>
    </body>
</html> 
```

解析php代码

```
<?php

include("draw.php");

$file = fopen("data.csv", "r");
while (!feof($file)) {
    $line = fgetcsv($file);

        drawGraph($line[0], $line[1], $line[2], $line[3]);

}
fclose($file);
?> 
```

绘制php代码

```
<?php

function drawGraph($xPos, $yPos, $xxPos, $yyPos) {

//create a 200 x 200 canvas image
$canvas = imagecreatetruecolor(200, 200);

//set canvas background to white
$white = imagecolorallocate($canvas, 255, 255, 255);
imagefill($canvas, 0, 0, $white);

//create colors
$pink = imagecolorallocate($canvas, 255, 105, 180);

//draw rectangles
imagerectangle($canvas, $xPos, $yPos, $xxPos, $yyPos, $pink);

//ERROR - following line displays raw data of image not the actural image
imagepng($canvas);

imagedestroy($canvas);
}

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:02:02.200

您需要传递一个 Content-Type 标头，告诉浏览器数据是图像。如果您使用 drawGraph 函数执行此操作，无论如何它都会输出原始数据。

```
<html>
    <body>
            <?php
                include("parse.php");
            ?>
        </body>
</html> 
```

您可能希望将 drawGraph 返回到图像本身。就像您最初展示的那样，然后确保使用 `header('Content-Type: image/png');` 或等同于您正在生成的内容。

如果你想直接在浏览器中测试它，你需要从你的示例中删除标签，并且只`<?PHP include("parse.php"); ?>`在 php 标签之外放置其他字符（如果你留下额外的空格或换行符，它会认为它是你图像的一部分。

**编辑：错过了循环问题。**

请记住，您的 drawGraph 函数会在 imagepng 中创建并显示单个 png，这意味着如果您在示例中多次调用它，它将是单独的 PNG 图像全部混合在一起。您可能想要实例化图像并在循环中绘制矩形，然后最终输出图像。

```
//create a 200 x 200 canvas image
$canvas = imagecreatetruecolor(200, 200);

//set canvas background to white
$white = imagecolorallocate($canvas, 255, 255, 255);
imagefill($canvas, 0, 0, $white);

//create colors
$pink = imagecolorallocate($canvas, 255, 105, 180);

$file = fopen("data.csv", "r");
while (!feof($file)) {
    $line = fgetcsv($file);

    //draw rectangles
    imagerectangle($canvas, $line[0], $line[1], $line[2], $line[3], $pink);

}

fclose($file);

/** finally output entire single png **/    
//ERROR - following line displays raw data of image not the actural image
imagepng($canvas);

imagedestroy($canvas); 
```

# android - 如何使用listview click的单一界面

> ID：11918871
> 
> 赞同：0
> 
> 时间：2012-08-12T00:44:39.803
> 
> 标签：android, android-intent

我正在开发一个将列表视图作为第一个活动的应用程序。问题是它是一个问答应用程序。无论单击（在列表视图中）是什么，启动界面都是相同的，唯一的区别是问题和答案（来自字符串数组的字符串）。问题是如何使用单个意图来帮助我区分在列表视图中单击的内容，以便我可以获取适当的 Q 和 A

**提前致谢**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:05:50.653

拿着这个

```
v =(ListView) this.findViewById(R.id.cenima);
v.setOnItemClickListener(new OnItemClickListener() {
    @Override
    public void onItemClick(AdapterView<?> parent, View view, int position,long id) 
    {
    Log.i("position ", ""+position);
        //do samthing
    }
}); 
```

# mysql - MySQL 错误地允许未加密的连接

> ID：11918875
> 
> 赞同：1
> 
> 时间：2012-08-12T00:46:10.970
> 
> 标签：mysql, ssl

我正在尝试配置 MySQL 5.1.63，使其仅允许通过 SSL 进行远程连接。我可以确认连接通过 SSL 工作，但是我似乎无法阻止未加密的连接。

我正在遵循 MySQL 文档中的说明，并运行以下命令：

```
CREATE USER 'a' IDENTIFIED BY 'a';
GRANT ALL ON *.* TO 'a' REQUIRE SSL;
FLUSH PRIVILEGES; 
```

然后，如果“protectme”是运行 MySQL 的计算机，我从远程计算机运行以下命令，

```
mysql -u a --password=a --host=protectme 
```

它连接！我可以验证我连接的 MySQL 确实是“protectme”上的 MySQL。为了更好地衡量，我尝试重新启动 MySQL，并确认用户已在 mysql.user 表中更新：

```
mysql> SELECT * FROM mysql.user WHERE User = "a";
+------+------+-------------------------------------------+-------------+-------------+-------------+-------------+-------------+-----------+-------------+---------------+--------------+-----------+------------+-----------------+------------+------------+--------------+------------+-----------------------+------------------+--------------+-----------------+------------------+------------------+----------------+---------------------+--------------------+------------------+------------+--------------+----------+------------+-------------+--------------+---------------+-------------+-----------------+----------------------+
| Host | User | Password                                  | Select_priv | Insert_priv | Update_priv | Delete_priv | Create_priv | Drop_priv | Reload_priv | Shutdown_priv | Process_priv | File_priv | Grant_priv | References_priv | Index_priv | Alter_priv | Show_db_priv | Super_priv | Create_tmp_table_priv | Lock_tables_priv | Execute_priv | Repl_slave_priv | Repl_client_priv | Create_view_priv | Show_view_priv | Create_routine_priv | Alter_routine_priv | Create_user_priv | Event_priv | Trigger_priv | ssl_type | ssl_cipher | x509_issuer | x509_subject | max_questions | max_updates | max_connections | max_user_connections |
+------+------+-------------------------------------------+-------------+-------------+-------------+-------------+-------------+-----------+-------------+---------------+--------------+-----------+------------+-----------------+------------+------------+--------------+------------+-----------------------+------------------+--------------+-----------------+------------------+------------------+----------------+---------------------+--------------------+------------------+------------+--------------+----------+------------+-------------+--------------+---------------+-------------+-----------------+----------------------+
| %    | a    | *667F407DE7C6AD07358FA38DAED7828A72014B4E | Y           | Y           | Y           | Y           | Y           | Y         | Y           | Y             | Y            | Y         | N          | Y               | Y          | Y          | Y            | Y          | Y                     | Y                | Y            | Y               | Y                | Y                | Y              | Y                   | Y                  | Y                | Y          | Y            | ANY      |            |             |              |             0 |           0 |               0 |                    0 |
+------+------+-------------------------------------------+-------------+-------------+-------------+-------------+-------------+-----------+-------------+---------------+--------------+-----------+------------+-----------------+------------+------------+--------------+------------+-----------------------+------------------+--------------+-----------------+------------------+------------------+----------------+---------------------+--------------------+------------------+------------+--------------+----------+------------+-------------+--------------+---------------+-------------+-----------------+----------------------+
1 row in set (0.00 sec) 
```

有谁知道我做错了什么？互联网上似乎没有其他人遇到这个问题，但它对我根本不起作用！非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T02:35:19.047

matthewnreid 这个答案值得称赞。谢谢！！

密钥和证书在 my.cnf 文件的 mysql-client 部分中提供。正如 matthewnreid 建议的那样，您可以通过查看 ssl_cipher 变量来诊断这一点。

# php - K2灯箱不会在保存时关闭

> ID：11918880
> 
> 赞同：0
> 
> 时间：2012-08-12T00:47:03.197
> 
> 标签：php, javascript, joomla, joomla-k2

所以这是一个比较常见的问题，问题是我有一个带有 K2 扩展并运行 JAWall 模板的 Joomla 网站。我的问题是当用户想要在我的网站前端发布一个项目并点击保存弹出的灯箱时不会关闭。该帖子已添加，并且有某种更新，但该框仍然存在。

[我在](http://getk2.org/community/New-to-K2-Ask-here-first/12931-Re-K2-front-end-save-and-close#160104)Joomla 论坛上一次又一次地在 K2 论坛中找到了一些讨论该问题和 Google 代码错误报告[的](http://code.google.com/p/getk2/issues/detail?can=2&start=0&num=100&q=&colspec=ID%20Type%20Status%20Priority%20Owner%20Summary%20Opened&groupby=&sort=&id=273)论坛，但它们都没有适合我情况的解决方案。我可以添加一个

```
window.parent.location.reload() 
```

这会起作用，但如果用户在他们的帖子中上传一些媒体，它不会等待。那么如何让这个函数等待上传呢？我尝试添加的代码很长，但主要部分位于顶部，因此我将在此处发布，希望能帮助人们更好地了解情况。

```
<?php

// no direct access
defined('_JEXEC') or die('Restricted access');

$document = & JFactory::getDocument();
$document->addScriptDeclaration("
Joomla.submitbutton = function(pressbutton){
    if (pressbutton == 'cancel') {
        submitform( pressbutton );
        return;
    }
    if (\$K2.trim(\$K2('#title').val()) == '') {
        alert( '".JText::_('K2_ITEM_MUST_HAVE_A_TITLE', true)."' );
    }
    else if (\$K2.trim(\$K2('#catid').val()) == '0') {
        alert( '".JText::_('K2_PLEASE_SELECT_A_CATEGORY', true)."' );
    }
    else {
        syncExtraFieldsEditor();
        \$K2('#selectedTags option').attr('selected', 'selected');
        submitform( pressbutton );
        //window.parent.location.reload();//this is what i added            
    }
}
");

?>

<form action="index.php" enctype="multipart/form-data" method="post"
 name="adminForm"    id="adminForm">
<?php if($this->mainframe->isSite()): ?>
<div id="k2FrontendContainer">
    <div id="k2Frontend">

        <table class="k2FrontendToolbar" cellpadding="2" cellspacing="4">
            <tr>

                <td id="toolbar-save" class="button">
                    <a class="toolbar" href="#" onclick="javascript: submitbutton('save'); return false;"> <span title="<?php echo JText::_('K2_SAVE'); ?>" class="icon-32-save"></span><?php echo JText::_('K2_SAVE'); ?> </a>
                </td>
                <td id="toolbar-cancel" class="button">
                    <a class="toolbar" href="#" > <span title="<?php echo JText::_('K2_CANCEL'); ?>" class="icon-32-cancel"></span> <?php echo JText::_('K2_CLOSE'); ?> </a>
                </td>
            </tr>
        </table> 
```

如果有人有想法为我指出正确的方向，我将不胜感激，因为这个问题，我周六在这里工作！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T00:54:50.007

由于这样的 K2 问题，我的工作切换到了 EasyBlog。问题似乎出在`submitForm()`功能上。可能有一个`$app->setRedirect()`没有重定向。

`window.parent.location.reload()`是多余的。如果您只想刷新页面，您需要做的就是删除`return false;`表单中的`onclick`.

# google-sheets - 通过 JavaScript 客户端 API Auth 使用 Google 电子表格作为“已验证”数据源的 Google 可视化 API

> ID：11918882
> 
> 赞同：2
> 
> 时间：2012-08-12T00:47:13.520
> 
> 标签：google-sheets, google-visualization, google-drive-api

Google Visualization API 文档指出，将 Google 电子表格用作数据源的最简单方法是发布它。在正常情况下，效果很好。但我正在使用 Drive API 动态创建 Google 电子表格。因此，即使我获得授权，然后创建电子表格，我也无法立即将该电子表格用作数据源。所以我需要两种解决方案之一：

1) 通过 Drive API 以编程方式“发布”Google 电子表格？

2) 向 Google Visualization API 验证查询？

代码如下所示：

```
var url = 'https://spreadsheets.google.com/tq?key=' + idOfSpreadsheet + '&headers=1&pub=1';
var query = new google.visualization.Query(url);
query.send(drawTable); 
```

您会认为我可以将身份验证令牌附加到 url 变量，但我找不到任何文档。这将是我的第一选择。

否则，我可以发布电子表格，但我无法从 JavaScript 中找到如何做到这一点。目前，我必须在 Google Drive UI 中打开新创建的电子表格并手动发布它。我不想向用户解释如何使用每个动态创建的电子表格来完成。

干杯詹姆斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T14:04:14.917

正如您所提到的，您可以尝试将 oauth 2 访问令牌附加到 url。

创建谷歌电子表格后，您可以通过授权查询其元数据：

```
GET https://www.googleapis.com/drive/v2/files/<file_key> 
```

[请参阅文档](https://developers.google.com/drive/v2/reference/files/get)。

在 ile 的元数据中，您将获得可能的导出格式列表：

```
...
"exportLinks": {
  "application/pdf": "https://docs.google.com/...&exportFormat=pdf",
  "application/x-vnd.oasis.opendocument.spreadsheet": "https://docs.google.com/...exportFormat=ods",
  "application/vnd.ms-excel": "https://docs.google.com/...&exportFormat=xls"
},
... 
```

CSV 未列出，因为它只允许您下载第一张工作表，但它受支持，因此您可以使用以下 URL：

```
https://docs.google.com/feeds/download/spreadsheets/Export?key=<file_key>&exportFormat=csv 
```

你必须做一个授权请求，所以你需要像这样附加你的身份验证令牌：

```
https://docs.google.com/feeds/download/spreadsheets/Export?key=<file_key>&exportFormat=csv&access_token=<auth_token> 
```

请注意，OAuth 2.0 访问令牌仅在 1 小时内有效，因此您最终需要刷新它们。

# java - Java 引用不能用作指针？

> ID：11918888
> 
> 赞同：2
> 
> 时间：2012-08-12T00:50:36.703
> 
> 标签：java, pass-by-reference

这是我算法中的一段代码：

```
public void insert(int element) {
    _insert(element, root);
    System.out.println(root);
}

private void _insert (int element, Node t) {
    if (t == null) {
        t = new Node(null, element);;
        return;
    }
} 
```

`Node`这是一个预定义的类。

当调用公共方法时`insert`，将调用私有方法并检查树是否为空。如果是这样，将在`root`位置创建一个新节点。

输出应该是一个节点。然而，实际的输出是`null`这意味着 root 虽然它作为 t 传递到私有方法中但没有更新。

这应该在带有指针的 C++ 下工作。也许我误解了Java中的某些东西？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-12T00:51:54.870

Java 总是对方法调用使用按值传递。当您将引用类型传递给方法时，会生成*引用的副本*。

以下行更改`t`为引用一个新对象，但它不会更改原始变量`root`：

```
t = new Node(null, element); 
```

* * *

您可以更改方法以返回插入的节点，如下所示：

```
private Node _insert (int element, Node t) {
    if (t == null) {
        t = new Node(null, element);
    }
    return t;
} 
```

并像这样调用：

```
root = _insert(element, root); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-12T04:41:51.623

在 Java 中，引用是 C++ 指针和引用的混合体。有时，它们的行为类似于 C++ 指针，而有时，它们的行为类似于 C++ 引用。在进行赋值、作为参数传递给函数或在相等性测试中使用时，它们的行为类似于指针，但在访问成员时，它们的行为类似于 C++ 引用。就是这样，在 Java 中编写 tx 总是被解释为相当于 t->x 用于 C/C++ 中的指针（或 tx 用于 C++ 引用，但与 Java 不同，C++ 引用永远不会像指针一样表现）。

此外，在 Java 和一般的面向对象编程中，大多数人不会认为用空变量表示一个空列表是一个好主意。一旦初始化，变量应该总是引用一个功能齐全的对象，因此，一个空列表应该由对象的内部状态来标识；不是通过使用空引用。使用函数的返回值重新分配一个节点，该节点本身作为参数传递给同一函数，这更像是一些老式的 C/C++ hacking，然后是正确的现代面向对象设计。因此，而不是：

```
root = _insert(root, element); 
```

你应该写这样的东西：

```
MyList root = new MyList();
root._insert (element); 
```

在你的班级 MyList 的某个地方：

```
private void _insert (int element) { 
  if (this.endNode == null) { 
      this.endNode = new Node(); 
  } else {
      this.endNode.nextNode = new Node();
      this.endNote = this.endNote.nextNode;
  }

  this.endNode.element = element;
} 
```

如果您希望您的 _insert 函数能够在链表中的任意位置插入元素，那么您应该越过节点的父节点（或 null 以将元素插入到第一个位置）或使用双精度链表。

顺便说一句，Java 已经有一套完整的集合（通用和非通用）来表示应该能够转换必须基本需求的树和列表。

# php - 爆炸字符串除了被括号包围的地方吗？

> ID：11918890
> 
> 赞同：2
> 
> 时间：2012-08-12T00:51:07.287
> 
> 标签：php

我正在尝试通过竖线来爆炸字符串。那是容易的部分。但是，我不希望拆分影响用括号括起来的子字符串。这意味着我需要一个字符串，例如：

```
Hello (sir|maam).|Hi there! 
```

爆炸成：

```
Array
(
    [0] => Hello (sir|maam).
    [1] => Hi there!
) 
```

通过使用正常的爆炸功能，我不相信有办法告诉它忽略括号包围的那个栏。不过，我有一些想法。

我知道可以通过正常分解字符串，然后循环遍历数组并将包含字符串之间的所有内容合并`(`到包含`)`. 但是，我觉得应该有一种更优雅的方式来实现这一点。

我对吗？考虑到这些限制，是否有一种代码密集度较低的方法可以将字符串拆分为数组？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-12T02:14:54.957

如果您可以保证括号是平衡的并且永远不会嵌套（也就是说，如果永远不会有 a`'Oops(!'`或 a `'(nested stuff (like this)|oops)'`），并且永远不会有`||`括号之外的括号可以匹配为空字符串，那么这应该会有所帮助：

```
preg_match_all('/(?:[^(|]|\([^)]*\))+/', $your_string, $matches);
$parts = $matches[0]; 
```

它将尽可能多次（但至少一次）匹配 [要么（一个不是 a`|`或的字符`(`），要么是 a`(`并`)`包含任何不是 a 的内容`)`（包括）]。`|`简短版本：它将`|`在括号之间作为匹配的一部分，而不是分隔符。

另一种可能性，稍微不那么神秘：

```
$parts = preg_split('/\|(?![^(]*\))/', $your_string); 
```

如果中间没有 a ，则使用前瞻断言来取消任何`|`后面跟着 a 的资格。仍然对parens有点无情，但它会匹配两个s之间的空字符串。`)``(``|`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T02:05:46.810

直到有人编写了一个基于正则表达式的解决方案，我怀疑这可以通过一次通过，这应该可以工作。它是将需求直接转换为代码。

```
<?php
function my_explode($str)
{
    $ret = array(); $in_parenths = 0; $pos = 0;
    for($i=0;$i<strlen($str);$i++)
    {
        $c = $str[$i];

        if($c == '|' && !$in_parenths) {
            $ret[] = substr($str, $pos, $i-$pos);
            $pos = $i+1;
        }
        elseif($c == '(') $in_parenths++;
        elseif($c == ')') $in_parenths--;
    }
    if($pos > 0) $ret[] = substr($str, $pos);

    return $ret;
}

$str = "My|Hello (sir|maam).|Hi there!";
var_dump(my_explode($str)); 
```

# php - 需要登录才能访问我的 Wordpress 网站

> ID：11918896
> 
> 赞同：0
> 
> 时间：2012-08-12T00:52:07.123
> 
> 标签：php, login, conditional

我有一个 Wordpress 网站，我想对公众开放，就像重定向到登录一样，除非你正在注册。所以现在我使用的代码是：

```
<?php
if ( is_user_logged_in() ) {

} else {
 $coolio=curPageURL();
 if (strpos($coolio,'register.php') !== false) {
 break;
 }
 else{
  echo "<script>window.location = 'http://example.com/wp-login.php'</script>";
  break;
 }
 if (strpos($coolio,'login.php') !== false) {
 break;
 }
 else{
  echo "<script>window.location = 'http://example.com/wp-login.php'</script>";
  break;
 }
}
?> 
```

似乎它应该可以工作，但它会在我访问的任何页面上创建一个无限循环。有人知道为什么吗？

注意：`curPageUrl`只返回当前页面 url。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T00:55:43.003

您发布的代码存在一些重大的安全问题：

*   用户可以简单地禁用 Javascript 以防止被重定向。
*   用户可以简单地添加`?register.php`到 URL 以避免触发重定向代码。

相反，使用服务器端会话变量检查。如果会话中未设置“登录”标志，则您将重定向到登录页面。

这有两个巨大的优势：

1.  登录状态保存在用户无法对其进行任何操作的地方，除了登录
2.  如果恶意用户只是破坏了会话 cookie，他们只会获得一个新的空白会话并被视为“未登录”，并且无论如何都会再次被重定向。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:06:38.520

我不会使用 JavaScript 进行重定向，而是使用 php。

其次做这个逻辑：

```
if(!($_SESSION["loggedin"]== 1))
{
    if(!(stripos($url,'register.php')))
    {
        header('Location: http://example.com/wp-login.php', true, 302);
        exit;
    }
} 
```

# ios - 使用通过 Cydia 分发的钥匙串服务的 iOS 应用程序

> ID：11918899
> 
> 赞同：2
> 
> 时间：2012-08-12T00:52:47.773
> 
> 标签：ios, keychain, cydia

我目前正在为 iOS 开发一个应用程序，并且我正在通过我为 Cydia 创建的存储库将该应用程序分发到我的手机。该应用程序下载并运行良好，但登录过程不起作用。当我在模拟器中运行应用程序时，登录过程完美无缺。当我通过 Xcode 分发应用程序并将应用程序放在沙箱中时，登录过程也可以正常工作。因此，安装我的应用程序`/Applications`显然会影响应用程序的 KeyChain 方面。

这里有没有人通过 Cydia 成功分发了一个`Security.framework`在 iOS SDK 中使用 KeyChain Services 的应用程序？

我找到了这个[SO 线程](https://stackoverflow.com/questions/11886362/settings-bundle-keychain-for-applications-from-cydia-doesnt-work)，但实际上并没有解释他如何让钥匙串服务在他的应用程序中工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T00:50:27.890

要使用钥匙串功能，您的应用程序必须同时进行代码签名并在 Xcode 项目中启用授权。

要对其进行代码设计，请从 Cydia 安装 ldid 并运行`ldid -S applocation`.

要启用权利，请选择您的项目，在摘要中向下滚动到底部并单击“权利”复选框，然后添加钥匙串访问组（如果默认情况下未启用）。

有关更多信息，请阅读[Saurik 的博客文章](http://www.saurik.com/id/8/)。

# c# - 如何为某些字段实现自定义反序列化？

> ID：11918900
> 
> 赞同：1
> 
> 时间：2012-08-12T00:52:49.040
> 
> 标签：c#, json, serialization, javascriptserializer

我正在尝试[反序列化](http://msdn.microsoft.com/en-us/library/system.web.script.serialization.javascriptserializer.aspx)我的 Firefox 书签，以便可以对它们进行处理。令人惊讶的是，这完美无缺：

```
class Bookmark
{
    public string title;
    public int? id;
    public int? parent;
    public string dateAdded;
    public string lastModified;
    public string type;
    public string root;
    public string uri;
    public List<Bookmark> children; 
}

class Program
{
    static void Main(string[] args)
    {
        var jss = new JavaScriptSerializer();
        var json = File.ReadAllText(@"T:\bookmarks-2012-08-08.json");
        var root = jss.Deserialize<Bookmark>(json);
    }
} 
```

我可以检查“根”对象，一切正常。然而，日期看起来像“1260492675000000”。我想将它们转换为`DateTime`对象。我猜这些只是存储为纪元的毫秒数，这[应该很容易转换](https://stackoverflow.com/questions/249760/how-to-convert-unix-timestamp-to-datetime-and-vice-versa)，但是我将如何为这两个日期字段实现自定义反序列化器而不影响其余字段，这些字段是为我完成的自动？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T14:11:31.010

您应该在 Bookmark 类中添加一个字段（就像 Daniel 所说的那样）。字段不影响 C# 中的序列化。

例子：

```
class Bookmark
{
    ...
    public DateTime ConvertedDateTime { get { return yourConversionMethod(dateAdded); } }
} 
```

# ruby - Ruby，哪个异常最好处理未设置的环境变量？

> ID：11918905
> 
> 赞同：8
> 
> 时间：2012-08-12T00:53:53.390
> 
> 标签：ruby, shell, environment

我编写的脚本在启动时运行并要求设置环境变量，但是 Ruby 的[Exceptions](http://www.ruby-doc.org/core-1.9.3/Exception.html)中哪个最好？我用过`LoadError`，我只是想尽可能地具有描述性并遵循适当的约定。

其次，除了检查环境变量的长度之外，我找不到其他方法来查看是否设置了环境变量，但这似乎并不那么优雅。

```
begin
  raise LoadError if ENV['FOO'].to_s.length == 0
  system "open http://example.com/" + ENV['FOO']
rescue Exception => e
  puts "=> #{e} FOO environment variable not set"
end 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-02-05T23:15:45.423

您可以执行以下操作：

```
ENV['SECRET_KEY_XXYY'] || raise('no SECRET_KEY_XXYY provided') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-08-12T01:04:32.893

根据[LoadError 的文档，](http://www.ruby-doc.org/core-1.9.3/LoadError.html)当“要求”出现问题时应该使用该文档。我认为更合适的方法是子类化`StandardError`并制作一个适合您使用的方法。如果这看起来有点多，我会`StandardError`使用描述性消息。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T03:55:35.747

制作自己的例外很容易：

```
MyError = Class.new(StandardError)
raise MyError, "FOO environment variable not set" unless ENV['FOO']
system "open http://example.com/" + ENV['FOO'] 
```

在这种情况下，捕获该代码块中的异常可能不合适，因为您似乎只是在用它打印一条消息。通常，除非您准备好终止程序，否则永远不要引发异常。换句话说，避免对预期条件使用异常。如果程序可以在没有设置 FOO 的情况下继续，最好简单地使系统语句的执行有条件：

```
system("open http://example.com/" + ENV['FOO']) if ENV['FOO'] 
```

或者

```
ENV['FOO'] && system("open http://example.com/" + ENV['FOO']) 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-12T23:20:39.193

[在http://bugs.ruby-lang.org/projects/ruby/wiki/ExceptionClassesDoc](http://bugs.ruby-lang.org/projects/ruby/wiki/ExceptionClassesDoc)有一个异常类型列表

我可能会选择 ArgumentError ，因为您说的值`ENV['FOO']`不是您期望的值。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-12-17T19:32:04.683

可以使用[ENV.fetch('FOO')](https://ruby-doc.org/core-2.6.5/ENV.html#method-c-fetch)如果未找到，则会引发 KeyError。

# netbeans - 更改 NetBean 输出窗口中使用的行分隔符？

> ID：11918906
> 
> 赞同：2
> 
> 时间：2012-08-12T00:54:08.260
> 
> 标签：netbeans, newline

我在 NetBeans 中遇到了一个问题，无论构建平台如何，输出窗口都只使用一种类型的行分隔符 (\n)。

我在 Windows 机器上，专门为 Windows 机器构建。据我所知，\r\n 是 Windows 的默认行分隔符，Java 运行时环境（从 Windows 控制台运行我的程序时）似乎尊重这一点。但是，当我调试时，netbeans 似乎在输出窗口中明确使用 \n 作为其行分隔符，因此使用 \r\n （或 System.getProperty("line.separator")）作为扫描仪的行当我需要输入一些东西时，分隔符是无用的。

除了必须记住在发布程序之前更改常量之外，我还能做什么？在这种情况下，NetBeans 显然忽略了 System.setProperty，而且 NetBeans 似乎不支持更改输出窗口中使用的行分隔符。

（一个类似的问题，[How to change the line ending used in Netbeans](https://stackoverflow.com/questions/3294451/how-to-change-the-line-ending-used-in-netbeans)似乎很有希望，尽管`-J-Dline.separator=CRLF`作为启动参数提供给 netbeans 不会影响输出窗口，并且显示和更改行尾插件只影响文件）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-07-16T21:36:06.510

转到项目属性 -> 运行 -> 控制台类型并选择“标准输出”

为我工作，也可能为你工作。

# c# - 安排 C# Windows 服务每天执行任务

> ID：11918907
> 
> 赞同：5
> 
> 时间：2012-08-12T00:54:37.427
> 
> 标签：c#, windows-services, scheduled-tasks

我找到[了这个答案](https://stackoverflow.com/questions/503564/how-might-i-schedule-a-c-sharp-windows-service-to-perform-a-task-daily)并尝试遵循它，但是在我开始服务时它没有给我带来任何工作。我无法理解的一件事是：`_timer = new Timer(10 * 60 * 1000); // 每 10 分钟

我想每天晚上 10:00 执行我的服务，我该怎么做？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T01:26:48.300

您可以找出`difference`介于`current time`和您的之间并`desired schedule time`相应地制作经过的间隔。这样`will fire once`在预定的时间发生定时器事件。将时间间隔设置为 24 小时。

```
private System.Timers.Timer _timer;    

private void SetTimer()
{
    DateTime currentTime = DateTime.Now;
    int intervalToElapse = 0;
    DateTime scheduleTime = new DateTime(currentTime.Year, currentTime.Month, currentTime.Day, 10,0,0);

    if (currentTime <= scheduleTime)
        intervalToElapse = (int)scheduleTime.Subtract(currentTime).TotalSeconds;
    else
        intervalToElapse = (int)scheduleTime.AddDays(1).Subtract(currentTime).TotalSeconds;

    _timer = new System.Timers.Timer(intervalToElapse);

    _timer.Elapsed += new System.Timers.ElapsedEventHandler(_timer_Elapsed);
    _timer.Start();
}

void _timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
       //do your work
       _timer.Interval = (24 * 60 * 60 * 1000);
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-12T01:09:31.983

您可以使用 Quartz.NET 来托管服务，而不是滚动您自己的计时器。它运行良好，并具有一些附加功能，例如追赶（如果需要）以及农场服务的能力。

[http://quartznet.sourceforge.net/](http://quartznet.sourceforge.net/)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T01:02:10.217

Windows 有一个内置的任务调度程序，可以更好地满足任何调度需求。在处理诸如系统重启、夏令时之类的计划任务时，有很多事情可能会出错。

可以参考 Ayende 的博客，了解制作自己的调度程序时的一些问题。 [烂调度：不要自己动手](http://ayende.com/blog/155489/rotten-scheduling-donrsquo-t-roll-your-own)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-12T00:59:57.507

即使计时器在您引用的答案中每十分钟轮询一次 - 它每天只处理一次：

```
private void timer_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
{
    // ignore the time, just compare the date
    if (_lastRun.Date < DateTime.Now.Date)
    { 
```

要使其在上午 10:00 发生，请添加另一个条件，例如：

_lastRun.Date < DateTime.Now.Date **&& DateTime.Now.Hour = 10**

> 十分钟是用作轮询频率的时间。

# python - 如何从两个并行字符串创建字典？

> ID：11918909
> 
> 赞同：8
> 
> 时间：2012-08-12T00:55:08.710
> 
> 标签：python, dictionary

我有两个文本文件，格式如下：

```
foo,bar,etc 
```

另一个是这样的：

```
1,2,3 
```

我想将这两个文本文件放入一个 Python 字典中，而不必手动完成每个文件。我希望输出将字符串连接到数字。有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-12T00:56:57.040

```
keys = first_string.split(',')
values = second_string.split(',')
output_dict = dict(zip(keys, values)) 
```

* * *

```
>>> first_string = "foo,bar,etc"
>>> second_string = "1,2,3"
>>> keys = first_string.split(',')
>>> values = second_string.split(',')
>>> output_dict = dict(zip(keys, values))
>>> output_dict
{'etc': '3', 'foo': '1', 'bar': '2'} 
```

* * *

如果您希望这些值是实际数字，您可以转换它们：

```
values = [int(v) for v in second_string.split(',')] 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-12T00:56:48.597

假设您知道如何从文件中读取数据并将行拆分为列表，并`int`根据需要将它们转换为 s。

```
s1 = ['foo', 'bar', 'etc']
n1 = [1, 2, 3]
dict(zip(s1, n1)) 
```

产量：

```
{'bar': 2, 'etc': 3, 'foo': 1} 
```

*备注*：

[zip()](http://docs.python.org/library/functions.html#zip)结合您的列表：

```
zip(s1, n1)
[('foo', 1), ('bar', 2), ('etc', 3)] 
```

如果您不习惯从行数据创建列表，对于使用[split()](http://docs.python.org/library/stdtypes.html?highlight=split#str.split)的给定行，您可以这样做

```
line = line.split(',') #'foo,bar,etc' => ['foo','bar','etc'] / '1,2,3' => ['1','2','3'] 
```

如果你想将你的数字数据转换为`int`s 使用[列表理解](http://docs.python.org/tutorial/datastructures.html#list-comprehensions)：

```
n1 = [int(n) for n in line] # ['1','2','3'] => [1, 2, 3] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T02:28:17.637

您可以直接从文本文件中读取值和键，示例代码如下：

```
import fileinput

keys = []
values = []

for line in fileinput.input(['v.txt']):
    values = values + [int(v) for v in line.split(',')]

for line in fileinput.input(['k.txt']):
    keys = keys + [k.replace("\n","") for k in line.split(',')]

the_dict = dict(zip(keys, values)) 
```

我假设您需要将值作为整数，并且文本文件可能包含多行但它们必须包含相同数量的元素。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2018-02-04T04:07:34.787

我刚刚开始，但将两者一起运行在一行中可能更简单：

```
string_dict = {'etc': '3', 'foo': '1', 'bar': '2'} 
```

# matplotlib - matplotlib：重绘前清除散点数据

> ID：11918910
> 
> 赞同：2
> 
> 时间：2012-08-12T00:55:31.220
> 
> 标签：matplotlib, scatter-plot

我在 imshow （地图）上有一个散点图。我想要一个点击事件来添加一个新的散点，我已经通过 scater(newx,newy)) 完成了。问题是，然后我想添加使用选择事件删除点的功能。由于没有 remove(pickX,PickY) 函数，我必须获取选中的索引并将它们从列表中删除，这意味着我不能像上面那样创建我的分散，我必须分散 (allx, ally)。

所以底线是我需要一种删除散点图并用新数据重新绘制它的方法，而不改变我的 imshow 的存在。我已经尝试并尝试过：只有一次尝试。

```
 fig = Figure()
 axes = fig.add_subplot(111)
 axes2 = fig.add_subplot(111)
 axes.imshow(map)
 axes2.scatter(allx,ally)
 # and the redraw
 fig.delaxes(axes2)
 axes2 = fig.add_subplot(111)
 axes2.scatter(NewscatterpointsX,NewscatterpointsY,picker=5)
 canvas.draw() 
```

令我惊讶的是，这也免除了我的 imshow 和斧头 :(。任何实现我梦想的方法都非常感谢。安德鲁

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T19:06:31.760

首先，您应该好好阅读[这里的事件文档](http://matplotlib.sourceforge.net/users/event_handling.html)。

您可以附加一个在单击鼠标时调用的函数。如果您维护一个可以选择的艺术家列表（在这种情况下为点），那么您可以询问鼠标单击事件是否在艺术家内部，并调用艺术家的`remove`方法。如果没有，您可以创建一个新艺术家，并将其添加到可点击点列表中：

```
import matplotlib.pyplot as plt

fig = plt.figure()
ax = plt.axes()

ax.set_xlim(0, 1)
ax.set_ylim(0, 1)

pickable_artists = []
pt, = ax.plot(0.5, 0.5, 'o')  # 5 points tolerance
pickable_artists.append(pt)

def onclick(event):
    if event.inaxes is not None and not hasattr(event, 'already_picked'):
        ax = event.inaxes

        remove = [artist for artist in pickable_artists if artist.contains(event)[0]]

        if not remove:
            # add a pt
            x, y = ax.transData.inverted().transform_point([event.x, event.y])
            pt, = ax.plot(x, y, 'o', picker=5)
            pickable_artists.append(pt)
        else:
            for artist in remove:
                artist.remove()
        plt.draw()

fig.canvas.mpl_connect('button_release_event', onclick)

plt.show() 
```

![在此处输入图像描述](../Images/4062b2af9e046ec78cbf64ab16ed998b.png)

希望这能帮助你实现你的梦想。:-)

# facebook-javascript-sdk - facebook登录 - 登录后歌剧不关闭窗口

> ID：11918913
> 
> 赞同：0
> 
> 时间：2012-08-12T00:55:52.357
> 
> 标签：facebook-javascript-sdk, opera, facebook-login

我使用 facebook javascript SDK 登录。当我使用 facebook 登录使用 Opera 登录时 - Opera 没有关闭。

我使用的是 Opera 12.00 版。

为什么不自动关闭Opera浏览器？

代码：

```
window.fbAsyncInit = function() {
            FB.init({
                appId      : 'KEY',
                status     : true, 
                cookie     : true,
                xfbml      : true,
                oauth      : true
            });

(function(d){
            var js, id = 'facebook-jssdk';
            if (d.getElementById(id)) {
                return;
            }
            js = d.createElement('script');
            js.id = id;
            js.async = true;
            js.src = "//connect.facebook.net/cs_CZ/all.js";
            d.getElementsByTagName('head')[0].appendChild(js);
        }(document));

$("#btnFBLogin").live("click", function(){
            FB.login(function(response) {
                if (response.authResponse) {
                    FB.api('/me', function(response) {

            //Loggin

                    });
                } else {
                }
            }, {
                scope: 'email user_photos user_birthday'
            });

            return false;
        });

    } 
```

# php - b、i 和 a 的正则表达式仅在字符串中标记或没有标记

> ID：11918914
> 
> 赞同：-1
> 
> 时间：2012-08-12T00:55:58.303
> 
> 标签：php, regex

我想知道适用于检查包含某些 HTML 标签的字符串的可能正则表达式，即 ,`<b>`和`<i>`/`<a>`或它没有任何标签。使用 PHP preg_match。

例如：

```
"This a text only.." return true
"This is a <b>bold</b> text" return true
"this is <script>alert('hi')</script>" return false
"this is <a href="#">some</a>and <h1>header</h1>" return false 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-12T01:01:52.857

尝试[`strip_tags()`](http://php.net/strip_tags)改用。正则表达式不适合解析 HTML 标签。

```
var_dump(isTextClean('This a text only..')); // true
var_dump(isTextClean('This is a <b>bold</b> text')); // true
var_dump(isTextClean('this is <script>alert(\'hi\')</script>')); // false
var_dump(isTextClean('this is <a href="#">some</a>and <h1>header</h1>')); // false

function isTextClean($input) {
    $result = strip_tags($input, '<b><i><a>');

    if ($result != $input) {
        return false;
    } else {
        return true;
    }
} 
```

# css - 为后备字体设置不同的字体大小

> ID：11918915
> 
> 赞同：9
> 
> 时间：2012-08-12T00:56:12.627
> 
> 标签：css, fonts

在我的网站上，我使用这些字体：`font-family: Segoe UI, Verdana, Geneva, sans-serif`

Verdana 看起来有点像 Segoe UI，是 Mac 和 iOS 设备的不错后备。现在的问题是 Verdana 比 Segoe UI 大很多，所以在某些设备上字体太大了。

我似乎无法弄清楚如何根据应用的字体设置字体大小；例如，segoe ui 为 18px，verdana 为 16px？

知道如何仅使用 css 来做到这一点吗？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:58:31.590

您可以使用该`ex`单元，但它的实现对于某些浏览器来说是错误的。
另一种选择是使用[Gecko 支持的浏览器](https://developer.mozilla.org/en-US/docs/CSS/font-size-adjust#Browser_Compatibility)[`font-size-adjust`](http://www.w3.org/TR/css3-fonts/#font-size-adjust-prop)支持的属性。

# apache-camel - Apache-Camel 2.10.0：Tomcat7 中的服务部署错误

> ID：11918920
> 
> 赞同：0
> 
> 时间：2012-08-12T00:57:41.003
> 
> 标签：apache-camel

我可以使用 Java JDK7 将我的 Web 服务（使用 Apache-Camel 2.9.2 设计）部署和运行到 Tomcat 7，而不会出现太多问题。但是，当我尝试切换到 Camel 2.10.0 时，在部署过程中出现错误 ====>：

```
Aug 11, 2012 5:20:58 PM org.apache.catalina.startup.HostConfig deployWAR  
INFO: Deploying web application archive C:\Tools\apache-tomcat-7.0.28\webapps\FacadeService.war  
Aug 11, 2012 5:20:59 PM org.apache.catalina.core.ContainerBase addChildInternal  
SEVERE: ContainerBase.addChild: start: 
org.apache.catalina.LifecycleException: Failed to start component     
[StandardEngine[Catalina].StandardHost[localhost].StandardContext[/FacadeService]]
at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:154) 
...  
...  
Caused by: java.lang.NoClassDefFoundError: org/springframework/web/context/WebApplicationContext
at java.lang.Class.getDeclaredFields0(Native Method)
at java.lang.Class.privateGetDeclaredFields(Class.java:2308)
at java.lang.Class.getDeclaredFields(Class.java:1760)
at org.apache.catalina.util.Introspection.getDeclaredFields(Introspection.java:87) 
```

我想知道是否有人见过类似的错误？以及对这个问题的任何建议？谢谢

# javascript - jquery动态下拉菜单 - 附加问题

> ID：11918921
> 
> 赞同：1
> 
> 时间：2012-08-12T00:58:16.557
> 
> 标签：javascript, jquery

我正在使用 JSON 信息进行动态下拉。基本上它可以工作，但我不能将子菜单附加到父菜单。谁能给个好建议？

json:

```
 "navigation":[
      {
         "title":"Home",
         "link":"index.html"
      },
      {
         "title":"Products",
         "link":"product.html",
         "subnav":[
            {
               "title":"Webapps",
               "link":"products/webapps.html"
            },
            {
               "title":"Mobile Apps",
               "link":"products/mobile-apps.html"
            }
         ]
      }
   ] 
```

我的功能：

```
var naviHandler = function (navi) {
    var localNaviData = navi, ul = '<ul>',naviLink="";
    $.map(localNaviData, function (val,i) {
        naviLink +='<li>'
        if(val.subnav){
            naviLink += naviHandler(val.subnav)
        }else{
            naviLink +='<a href='+val.link+'>'+val.title+'</a>'
        }

    })

    naviLink +='</li></ul>';
    $('header').find('nav').append(naviLink);
    }

naviHandler(localData[obj]); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:11:00.350

我会创建 jQuery 对象，而不是使用 jQuery 制作原始 HTML 代码：

```
var create_menu = function(navi) {
    var $ul = $('<ul />');

    $.map(navi, function(val, i) {
        var $li = $('<li />');

        if (val.subnav) {
            create_menu(val.subnav).appendTo($li);
        } else {
            $('<a />', {'href': val.link}).text(val.title).appendTo($li);
        }

        $li.appendTo($ul);
    });

    return $ul;
}

$('header nav').append(create_menu(localData[obj])); 
```

你的问题是这个函数`return`什么都没有，所以递归使用它是行不通的。

# android - 如何将操作栏置于标签栏上方并使用 actionbarsherlock 在操作栏中订购项目

> ID：11918927
> 
> 赞同：0
> 
> 时间：2012-08-12T01:01:08.157
> 
> 标签：android, actionbarsherlock

我想要一个没有标题和图标的操作栏，带有 2 个按钮：确定和擦除。我知道该怎么做，但我有两个问题：

1.  如果没有图像或标题，则该栏位于标签栏下方（或者至少这是演示所做的）。怎么能在标签栏上面呢？还是您认为在应用程序底部有此操作栏更好？如果是这样，你能解释一下如何放下它吗？因为看不懂demo（可能是太简单了）
2.  确定按钮怎么总是在右边，而擦除总是在左边？（就像演示中的拆分操作项，但搜索按钮的空间为空白）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T20:31:04.983

1.  最后我把它放在了底部。您必须在清单中添加：

    ```
    <activity android:name=".yourclass" android:uiOptions="splitActionBarWhenNarrow"></activity> 
    ```

2.  我删除了示例中按钮的代码，结果如我所愿

# gtk - 我需要释放从 gtk_builder_get_object 返回的对象吗？

> ID：11918933
> 
> 赞同：0
> 
> 时间：2012-08-12T01:02:24.147
> 
> 标签：gtk

我是 GTK 的新手，它的所有术语和文档可能会更好。我有以下控件需要在单击按钮时清除。

*   GTKTextView - 1
*   GTKEntry - 3
*   GTKL标签 - 16

所以我想我会遍历一个调用 gtk_builder_get_object 的对象名称表并保存返回的对象（这些就像 Windows 中的句柄？）。完成后我是否必须释放这些，或者当我的窗口关闭时它们会被破坏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:56:37.453

我不太了解您的问题，您是要销毁小部件吗？如果是这样，您应该使用[gtk_widget_destroy ()](http://developer.gnome.org/gtk/stable/GtkWidget.html#gtk-widget-destroy)。

> 当一个小部件被销毁时，它将破坏它对其他对象的任何引用。如果小部件位于容器内，则小部件将从容器中移除。如果小部件是顶层（从 GtkWindow 派生），它将从顶层列表中删除，并且 GTK+ 对它的引用将被删除。

如果你销毁一个窗口，它上面的小部件也会被销毁。如果您想销毁窗口中的某些小部件，请销毁它们的父级（例如，包装它们的盒子或桌子）。否则，您将不得不将它们一一销毁。

> 在大多数情况下，只有顶层小部件（窗口）需要显式销毁，因为当您销毁顶层时，它的子级也会被销毁。

在 gtk 中，如果这就是您的意思，您不会释放指向小部件的指针，Gtk 函数会适当地为您做到这一点。

如果我能提供更多帮助，请告诉我...

# ios - Theos：试图从 ChatKit 中的 CKContentEntryView 接管 UIView _subjectLine

> ID：11918934
> 
> 赞同：6
> 
> 时间：2012-08-12T01:03:18.877
> 
> 标签：ios, jailbreak

我正在尝试控制消息应用程序中的主题行。现在我只是想在主题字段中显示文本。

我的主要问题是让编译器将其识别`_subjectLine`为有效视图。这就是我尝试对/使用做任何事情时得到的结果`_subjectLine`：

```
Tweak.xm:8: error: ‘_subjectLine’ was not declared in this scope 
```

我不知道如何声明一个已经存在的项目以在调整中使用。我在 Xcode 中使用的标准声明（通常位于头文件中）似乎不一样。

我已经在谷歌上搜索了大约一个星期。我发现的最常见的教程或信息很简单：当方法激活时 - 显示警报。我能做到，没问题。但是，我需要使用一个已经存在的对象。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-17T13:17:30.907

It seems that in your case you are trying to use an **instance variable** of the class you are hooking. Modifying the instance variable does not work that way in tweaks. You have to use MSHookIvar to 'hook' an instance variable (aka ivar). Example:

[Tweak.xm/mm]

```
#import <substrate.h> // necessary
#import <Foundation/Foundation.h>

@interface TheClassYouAreHooking : NSObject {
    NSString *_exampleVariable;
}
- (void)doSomething;
@end

NSString *_exampleVariableHooked;

%hook TheClassYouAreHooking
- (void)doSomething 
{
    // 'Hook' the variable

    exampleVariableHooked = MSHookIvar<NSString *>(self, "_exampleVariable");

    // The name of the hooked variable does not need to be the same

    exampleVariableHooked = @"Hello World";

    // You can do ANYTHING with the object Eg. [exampleVariableHooked release];

}
%end 
```

MSHookIvar can also hook stuff like BOOLs and floats etc.

```
exampleVariableHooked = MSHookIvar<BOOL>(self, "_someBOOL"); 
```

Its declared in substrate.h so you need to import that otherwise you will not be able to compile your tweak. Also as a bonus tip, I'm just reminding you that you have to put the identifier of the app/framework you're hooking in your tweakname.plist.

So after you 'hook' the variable you can change it to suit your needs. Happy coding!

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-06T01:21:08.353

您还可以使用 Objective-C 运行时函数来访问实例变量，如下所示：

```
UIView *subjectLine;
object_getInstanceVariable(self, "_subjectLine", (void **)&subjectLine); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-06T01:40:59.320

您可以使用 KVC。示例：[object valueForKey:@"whatever"];

它可以在任何地方工作，并且比使用 Objective C 运行时方法或 Mobile Substrate 更干净。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-19T17:45:54.290

我不熟悉 ChatKit，但快速浏览了一下。您无法访问 _subjectLine 因为它是 ivar。你应该只访问

```
id subject = [myCKContentEntryView subject]; // should return a CKTextContentView
NSAssert([subject isKindOfClass:[CKTextContentView class]], @"ack");
CKTextContentView * myTextContentView = subject; 
```

CKTextContentView 有一个 setText 方法，但不知道它期望什么，因为参数是 id。可能是一个视图（UILabel？），也可能是一个字符串。你可以试试：

```
[myTextContentView setText:@"Hello World, w/ jimmies!"]; 
```

看看会发生什么。

# objective-c - 在协议中

> ID：11918935
> 
> 赞同：1
> 
> 时间：2012-08-12T01:03:39.927
> 
> 标签：objective-c, protocols

> **可能重复：**
> [为什么要将 NSObject 的协议附加到协议实现中](https://stackoverflow.com/questions/679822/why-tack-a-protocol-of-nsobject-to-a-protocol-implementation)

这是否意味着`Foo`符合`NSObject`'s 协议？是否`Foo`必须像其他类符合协议时那样实现`NSObject`协议方法？

```
@protocol Foo <NSObject> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T01:27:22.373

这只是确保您将`NSObject`成员添加到您的协议中，请查看此帖子：

[为什么要将 NSObject 的协议附加到协议实现中](https://stackoverflow.com/questions/679822/why-tack-a-protocol-of-nsobject-to-a-protocol-implementation)

# java - 无法卸载 Java JRE 1.7 32 位

> ID：11918936
> 
> 赞同：2
> 
> 时间：2012-08-12T01:03:50.170
> 
> 标签：java, uninstallation

出于某种原因，我的 Firefox 浏览器停止检测 java，现在我无法运行任何带有 java 的东西，因为它说它没有安装，所以我去添加/删除程序并尝试卸载 java，但它不会被删除.

[http://rcupload.com/images/IDSnu.png](http://rcupload.com/images/IDSnu.png)

因此，当我尝试卸载它（Java(TM) 7 Update 5）时，会出现一个带有进度条的小窗口，完成后它会消失，但 Java 仍然存在。

这是出现的窗口： [http ://rcupload.com/images/HLUwZ.png](http://rcupload.com/images/HLUwZ.png)

这是我试图做的：

1）使用CCleaner卸载它： - 我选择程序，按卸载它消失了，但是当我刷新列表时它仍然存在。我还尝试使用 CCleaner 中的“删除条目”按钮，但我只收到一条消息“无法删除 msi 安装程序”。

2) 我尝试使用 JavaRA： - 我以管理员身份运行它，单击“删除旧版本”，然后我收到 Java JDK 1.7 和所有文件已卸载的消息，但现在我看到它在“没有文件夹” C:\program files (x86)\Java\"（之前有一个，叫做 jre-7 之类的东西），安装程序中的图标看起来像一个白框，而不是看起来像 java 徽标。

3）我尝试下载java并安装它： - 我运行它，它下载并进入一个屏幕，询问我是否要安装工具栏，我单击下一步并收到以下消息： [http://rcupload。 com/images/xiCIu.png](http://rcupload.com/images/xiCIu.png)

*   我还尝试更改目标文件夹。同样的结果。

-- 已恢复：我需要删除 Java(TM) 7 Update 5，但卸载程序似乎无法正常工作并且文件丢失。

任何帮助将不胜感激！

谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-06T21:20:17.243

我遇到了同样的问题，并使用 Microsoft Fix it 工具解决了它，这里：http: [//support.microsoft.com/mats/program_install_and_uninstall](http://support.microsoft.com/mats/program_install_and_uninstall)

最后，一个真正有效的微软疑难解答！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T01:26:06.093

我以前没有经历过这种情况。这是我的猜测。有人可能会说这是一种删除并导致系统不稳定的“苛刻”方式。但我没有看到任何其他方式与给定的细节。

**如果您不了解每一步，请不要继续。这几乎是卸载程序在幕后所做的。您将不得不手动执行它们。**

*   首先卸载火狐。
    *   *由于某种原因，Java 安装程序没有检测到安装的 Java 版本。当一切正常时，您必须稍后重新安装它。*
*   在“程序文件”中删除（我的意思是备份）您的 JRE 文件夹
*   打开 regedit，在下面找到 Java Runtime 的密钥`HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Windows\CurrentVersion\Uninstall`并删除（先导出，以防万一）该密钥。（您必须检查每个键并查看`DisplayName`它们。）
    *   *这将删除添加/删除程序中的条目，Windows 会认为没有 Java。*
*   从系统的环境变量中删除 Java 路径。
    *   *这将导致一些检查 Java 的应用程序确定没有安装 Java。*
*   再次运行 un 安装程序（如果它在添加/删除程序中仍然可见）。
    *   *如果 Windows 仍然有对卸载程序的引用，这将导致它自行更新并删除任何引用，因为没有注册表项，也没有程序文件。*
*   重新启动机器。
    *   *这将刷新任何等待的更改，取消注册内容等。*

再次尝试安装 Java。（*安装程序不应该检测到安装了 Java，因为没有设置环境变量，也没有注册表项。*）

**请您自担风险尝试此操作。这可能会导致您的系统出现问题。**

[如果发布在超级用户](https://superuser.com/)网站上，您可能会得到更好的答案。

让我们知道结果。

# c++ - 如何重新定义/覆盖智能指针的行为和生命周期？

> ID：11918937
> 
> 赞同：1
> 
> 时间：2012-08-12T01:04:11.407
> 
> 标签：c++, smart-pointers, lifecycle

我总是阅读有关为智能指针行为重写新定义的可能性，但今天我仍然找不到一个真实的例子。

现在我想提出这个问题，看看能不能得到解决方案：

智能指针使用引用计数或引用链接来管理它们的生命周期，我的基本问题在于添加一个可能导致释放和删除我的指针的新状态，我想在触发事件时释放我的资源。

这或多或少就像在玩游戏时，通常当用户从关卡 1 到关卡 2 时，所有资源都会被加载和释放，所以当这种情况发生时，来自关卡 1 的资源会被释放。另外我想坚持这个例子，因为你不能等待自动引用计数，并且可能认为，如果在级别 2 中没有使用级别 1 的资源，它将被自动释放，因为它不再被请求; 这可能是真的，但是当用户在压力下使用机器时使用内存操作是一个非常糟糕的举动。

我想坚持使用智能指针，因为我也对它们提供的所有其他功能感兴趣，但它们对我来说有很大的缺点，我需要直接管理它们的生命周期。

我有什么选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-12T01:20:25.113

听起来您只是投入了一堆共享指针，而没有考虑正确考虑资源的所有权。从描述中我可以清楚地看出，关卡对象应该拥有所有这些资源。这意味着它们不应该*被共享*，因此根本不需要引用计数。

使用智能指针可以将您从在适当时间手动释放资源的负担中解放出来，但它并不能让您摆脱对适当时间的思考。

如果我是正确的并且级别应该拥有资源，请使用提供唯一所有权的智能指针，或者只使用自动对象，甚至不使用智能指针。除了需要访问这些对象的级别之外的所有其他对象都需要一个非拥有指针或对它的引用，即传统指针或引用。

如果我错了，资源确实应该共享，那么当关卡被销毁时它们不应该被释放：共享所有权的其他对象不会喜欢它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-12T01:18:06.087

如果您在关卡完成后仍有共享指针，那应该是因为共享指针没有作为自动变量分配在关卡生命周期内调用的函数堆栈上，而是被存储在某种类型的容器或一系列全球可访问的容器中。因此，您需要关注的主要问题是管理包含共享指针的容器的生命周期，这些共享指针管理每个级别的资源。

例如，在某个函数内部的堆栈上分配的智能指针`foo`的生命周期仅对应于函数调用的持续时间。一旦函数调用完成，共享指针就会被销毁。如果还有额外的共享指针仍然指向一个资源，那么资源本身不会被销毁，但是这些额外的共享指针需要驻留在被调用者的堆栈之外的其他位置。所以你的工作是管理那些“其他位置”，我猜这很可能是一些全球可访问的容器。

因此，刷新为每个级别管理数据的容器应该反过来完全破坏为每个级别分配的资源。如果需要，您可以使用事件驱动的接口或简单的观察者模式来触发容器的刷新，或者可以简单地由析构函数显式地为管理关卡资源生命周期的对象完成。

最后，尽管归结为资源管理......仅仅因为共享指针旨在防止内存泄漏并不意味着您不应该跟踪它们的分配方式或位置。如果您集中存储共享指针，那么销毁它们管理的资源将不是什么大问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-12T02:02:31.180

如前所述，针对您的特定问题的共享指针可能不是正确的解决方案。但是，如果您想按时间划分释放关卡，您仍然可以手动管理它们的销毁（或者，如果内存压力不太高或存在问题，甚至可以在有一些空闲 CPU 周期时等待）。一旦你完成了一个资源，简单地将它排队等待销毁在一个全局队列（或几个队列，可能每个类型或按优先级等）。稍后只需处理该队列并删除引用。如果它确实是对它的最后引用，这将触发对象的销毁。例如，您可以轻松地每隔几次迭代检查一次计时器，并检查一旦您花费了 1 毫秒释放东西，退出并继续下一帧。

在性能方面，每个级别（或每个资产包）使用内存池更有意义。它使内存管理更容易，有时您可以立即释放整个池并跳过对其中的所有对象调用析构函数（如果您知道它们什么都不做！）。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-12T01:44:10.777

听起来您根本不应该使用共享指针。有一些方法可以通过指定自定义释放器来覆盖行为，但我会考虑使用不同类型的“智能指针”。

Apache Web 服务器使用内存池通过让请求拥有一个内存池来释放与请求相关的所有资源。当您在服务器内部分配内存时，您需要确定要从中分配内存的池。服务器维护着几个内存池，每个内存池都有不同的生命周期——一个用于服务器实例，另一个用于模块，另一个用于每个请求，等等。这听起来更适合您的情况。

Apache 代码使用他们的[Apache Portable Runtime](http://apr.apache.org/docs/apr/1.4/modules.html)进行内存管理。它是用 C 语言编写的，可能不适合您正在做的事情。看起来 Boost 也有一个内存池库，尽管我从未使用过它。

# vb.net - 如何从 html 源中提取特定数据

> ID：11918938
> 
> 赞同：0
> 
> 时间：2012-08-12T01:04:17.597
> 
> 标签：vb.net

我想以编程方式从 HTML 页面中提取一些文本数据。我正在使用 vb.net 2008 webbrowser 控件以编程方式捕获该数据。网页的HTML代码如下

```
<div id="main-div"> <div id="top_header"> <div style="height: 85px;"> <div style="float: left; width: 400px; height: 80px;"><img src="cc/elance.png" width="318" height="80">1</div> <div style="float: left;"> <div class="trebuchet-23"><img src="images/logo.png"></div> <div style="height: 20px; padding-left: 315px;"> <div class="arial-12-left">Sitemap</div> <div class="arial-12-left">-</div> <div class="arial-12-left">Location</div> </div> </div> </div> </div> <div id="menu-div"> <div id="menu-left"></div> <div id="menu-middle"> <div id="menu-inside"> <div id="menu-ov"><a href="/">Home</a></div> <div class="menu-line"></div> <div id="menu-bt"><a href="abut.php">About Us</a></div> <div class="menu-line"></div> <div id="menu-bt"><a href="dflogin.html">Member Login </a></div> <div class="menu-line"></div> <div id="menu-bt"><a href="co.php">Contractors</a></div> <div class="menu-line"></div> <div id="menu-bt"><a href="cont.php">Contact</a></div> </div> <div id="search-bg"> </div> </div> <div id="menu-right"></div> </div> <div style="margin-bottom: 20px;"><img src="images/banner.jpg" width="890" height="336"></div> <div id="inside-div"> <div id="about-div"> <div id="about-left"></div> <div id="about-middle"> <div class="heading-div"> <div class="white-20">Welcom To</div> <div class="red-20"><img src="cc/elance.png" width="398" height="81"></div> </div> <div class="myriad-22"></div> <div style="height: 220px;"> <div style="float: left; margin-right: 10px;"> <font color="#ffffff" size="+2">Assignment Report</font><br><font color="#ffffff">Assignment No.1</font><br><font color="#ffffff">Total Posts 341</font><br><hr>
***<font color="#ffffff">Pin Code = HF5O6</font><br><font color="#ffffff">TITLE = Xbox 360 with 20GB HDD + 2 wireless controllers + 8 Games + Wireless Headset + Guitar in Eastry</font><br><font color="#ffffff">DATE = 09/08/2012</font><br><font color="#ffffff">Tracking Key = 85265E712050-15152226115354753</font><br>***

<form name="form1" method="post" action="/dflogin.php"><input name="txtId" value="E712050-15" type="hidden"><input name="txtassId" value="1" type="hidden"><input name="txtPsw" value="HH29" type="hidden"><input name="txtLog" value="0" type="hidden"><hr><font color="#ffffff">*Please copy tracking key exact as it is. We track your report through this key.</font><br><h6 align="right"><input name="btnSub" value="Next" style="background-color: rgb(0, 153, 0); color: rgb(255, 255, 255);" type="SUBMIT"></h6></form> </div> <div style="float: left;"> <div class="Tre-13-gray" style="width: 280px;"></div> <div class="bt-read2"></div> </div> </div> </div> <div id="about-right"></div> </div> </div> <div id="footer-div"> <div id="footer-left"></div> <div id="footer-middle"> <!--<div style="float:left; padding-top:35px; margin-right:15px;"> <div class="white-20">Contact</div> <div class="red-20">us</div> </div>--> <div style="float: left; padding-top: 15px;"> <div style="height: 30px;"> <!--<div class="Tre-13-red2" style="width:120px;">Mailing address:</div> <div class="Tre-13-gray2" style="width:400px;">admin@eoprojects.com</div>--> </div> <!-- <div class="Tre-13-gray3">General Pricing and Service information:<br /> </div> <div class="Tre-13-red2" style="width:255px;">General Operations Director/ Sales:</div> <div class="Tre-13-gray2" style="width:300px;">eoprojects.com</div>--> </div> <div style="float: left; padding-left: 312px;"> <div style="height: 69px; width: 90px;"> <div style="float: left; padding-top: 20px; padding-right: 15px;"><img src="images/icon_f.png" width="34" height="35"></div> <div style="float: left; padding-top: 20px;"><img src="images/icon_t.png" width="34" height="35"></div> </div> <div class="arial-11">© 2010 All Copyrights Reserved</div> </div> </div> <div id="footer-right">1</div> </div> </div> 
```

以星号开头的行是我要从以下代码中提取的行。

谁能告诉我我应该写什么代码来提取它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-17T05:46:27.657

下面的示例代码从网站中提取 IP 地址。

```
Option Explicit
' Add Microsoft Internet Transfer Control

Dim pubIPA As String, pos1 As Long, pos2 As Long, str As String

Private Sub Form_Load()
    str = Inet1.OpenURL("http://api.externalip.net/ip/", icString)
    pos1 = InStr(str, "var ip =")
    pos1 = InStr(pos1 + 1, str, "'", vbTextCompare) + 1
    pos2 = InStr(pos1 + 1, str, "'", vbTextCompare)
    pubIPA = Mid$(str, pos1, pos2 - pos1)
    MsgBox pubIPA, vbInformation
    Unload Me
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T09:21:08.140

您需要解析 HTML。.NET 中有一个名为[HtmlAgilityPack](http://htmlagilitypack.codeplex.com/)的免费工具，专门为您设计。类似下面的东西应该可以工作（假设您有一个`rawHtml`存储 HTML 代码的变量）：

```
Dim parsedHtml As New HtmlDocument()
parsedHtml.Load(rawHtml)

Dim fontNode As HtmlNode = parsedHtml.DocumentNode.Descendants("/font") 
```

# php - 从一个循环中获取分类并在另一个循环中使用它

> ID：11918939
> 
> 赞同：0
> 
> 时间：2012-08-12T01:04:22.980
> 
> 标签：php, wordpress

第一个循环中的代码：

```
 <?php
    $terms_as_text = get_the_term_list( $post->ID, 'produktkategori', '', ', ', '' ) ;
    echo strip_tags($terms_as_text);
    ?> 
```

结果为“Spanskt”。我希望在第二个循环中输入“Spanskt”，其中显示“Spanskt”。那可能吗？

提前致谢。

```
// First loop
<?php if (have_posts()) : while (have_posts()) : the_post(); ?>

    <h1><?php
$terms_as_text = get_the_term_list( $post->ID, 'produktkategori', '', ', ', '' ) ;
echo strip_tags($terms_as_text);
?> // The value of this...</h1> 

    <article <?php post_class() ?> id="post-<?php the_ID(); ?>">    
        Some content
    </article>

    <?php endwhile; endif; ?>

// Second loop  
<?php $loop = new WP_Query( array( 'post_type' => 'bocker', 'posts_per_page' => 4, 'produktkategori' => 'Spanskt // ...should be entered here', 'orderby' => 'rand', ) ); ?>

    <?php while ( $loop->have_posts() ) : $loop->the_post(); ?>

        Some content

    <?php endwhile; ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-16T14:06:46.600

这是我的解决方案：

```
// First loop
<?php $loop = new WP_Query( array( 'post_type' => 'forfattare', 'posts_per_page' => 10, 'orderby' => 'title', 'order' => 'ASC' ) ); ?>

<?php while ( $loop->have_posts() ) : $loop->the_post(); ?>

    <?php $string = get_the_title() ;
    $forfattare = createAlias( $string ); 
    ?>

         // Second loop 
         <?php $loop_2 = new WP_Query( array( 'post_type' => 'bocker', 'posts_per_page' => 10, 'forfattare' => ''.$forfattare.'', 'orderby' => 'rand', 'order' => 'ASC', ) ); ?>

         <?php while ( $loop_2->have_posts() ) : $loop_2->the_post(); ?>

            <div class="italic"><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></div>

         <?php endwhile; ?>

<?php endwhile; ?> 
```

# java - 运行 Cloudera 提供的 WordCount.java 需要帮助

> ID：11918942
> 
> 赞同：2
> 
> 时间：2012-08-12T01:05:15.223
> 
> 标签：java, hadoop, cloudera

大家好，我正在尝试运行 cloudera 提供的 WordCount.java 示例。我运行了下面的命令，并得到了我放在命令下面的异常。那么您对如何进行有任何建议。我已经完成了cloudera提供的所有步骤。

提前致谢。

```
hadoop jar ~/Desktop/wordcount.jar org.myorg.WordCount ~/Desktop/input
~/Desktop/output 
```

错误：

```
ERROR security.UserGroupInformation: PriviledgedActionException
as:root (auth:SIMPLE)
cause:org.apache.hadoop.mapred.InvalidInputException: Input path does
not exist: hdfs://localhost/home/rushabh/Desktop/input
Exception in thread "main"
org.apache.hadoop.mapred.InvalidInputException: Input path does not
exist: hdfs://localhost/home/rushabh/Desktop/input
        at org.apache.hadoop.mapred.FileInputFormat.listStatus(FileInputFormat.java:194)
        at org.apache.hadoop.mapred.FileInputFormat.getSplits(FileInputFormat.java:205)
        at org.apache.hadoop.mapred.JobClient.writeOldSplits(JobClient.java:977)
        at org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:969)
        at org.apache.hadoop.mapred.JobClient.access$500(JobClient.java:170)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:880)
        at org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:833)
        at java.security.AccessController.doPrivileged(Native Method)
        at javax.security.auth.Subject.doAs(Subject.java:416)
        at org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1177)
        at org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:833)
        at org.apache.hadoop.mapred.JobClient.submitJob(JobClient.java:807)
        at org.apache.hadoop.mapred.JobClient.runJob(JobClient.java:1248)
        at org.myorg.WordCount.main(WordCount.java:55)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:616)
        at org.apache.hadoop.util.RunJar.main(RunJar.java:197) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-22T11:02:31.613

您的输入和输出文件应位于 hdfs。至少输入应该在 hdfs。

使用以下命令：

```
hadoop jar ~/Desktop/wordcount.jar org.myorg.WordCount hdfs:/input 
```

hdfs:/输出

要将文件从 linux 复制到 hdfs，请使用以下命令：

```
hadoop dfs -copyFromLocal ~/Desktop/input hdfs:/ 
```

并使用以下命令检查您的文件：

```
hadoop dfs -ls hdfs:/ 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T01:15:35.890

错误消息说此文件不存在：“hdfs://localhost/home/rushabh/Desktop/input”。

检查该文件是否存在于您告诉它使用的位置。

检查主机名是否正确。您正在使用最有可能解析为环回 IP 地址的“localhost”；例如 127.0.0.1。这始终意味着“此主机”......在您**运行代码**的机器的上下文中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T01:50:08.947

所以我使用以下命令将输入​​文件夹添加到 HDFS

```
hadoop dfs -put /usr/lib/hadoop/conf input/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-18T10:28:48.933

当我尝试运行 wordcount MapReduce 代码时，出现以下错误：

`ERROR security.UserGroupInformation: PriviledgedActionException as:hduser cause:org.apache.hadoop.mapreduce.lib.input.InvalidInputException: Input path does not exist: file:/user/hduser/wordcount`

我试图执行 wordcount MapReduce java 代码，输入和输出路径为 /user/hduser/wordcount 和 /user/hduser/wordcount-output。我刚刚在这条路径之前从 core-site.xml 添加了“fs.default.name”，它运行得很好。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-10-30T02:23:18.837

该错误清楚地表明您的输入路径是本地的。请在 HDFS 而不是本地计算机上指定某些内容的输入路径。我猜

```
hadoop jar ~/Desktop/wordcount.jar org.myorg.WordCount ~/Desktop/input
~/Desktop/output 
```

需要改为

```
hadoop jar ~/Desktop/wordcount.jar org.myorg.WordCount <hdfs-input-dir>
<hdfs-output-dir> 
```

注意：要运行 MapReduce 作业，输入目录应该在 HDFS 中，而不是本地。

希望这可以帮助。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-22T14:19:00.587

检查 hdfs 中文件的所有权，以确保作业的所有者（root）对输入文件具有读取权限。Cloudera 提供了一个 hdfs 查看器，您可以使用它来查看文件空间；打开 Web 浏览器到 localhost:50075 或 {fqdn}:50075 并单击“浏览文件系统”以查看输入目录和输入文件。检查所有权标志；就像 *nix 文件系统一样。

# php - PHP如何检查文本字段是否匹配var

> ID：11918951
> 
> 赞同：0
> 
> 时间：2012-08-12T01:07:49.410
> 
> 标签：php, validation

那么，这可能是有人问这个问题的第 n 次了，但老实说，我在谷歌上花费了最后一个小时左右的时间并没有抓住任何有用的东西。我想做的只是琐事，至少我是这么想的。我有这个在 Java Script 中工作，但想把它移到 PHP 上。简单来说：

*   声明一个具有静态值的 var
*   添加要求用户输入上述var值的文本字段
*   检查字段是否为 a) 空、b) 非空不匹配或 c) 非空匹配

我的（有限的）PHP 智慧让我相信它应该像下面这样，但显然不是。我非常感谢您的任何见解。

```
<?php
$coconew = "blah";

if (isset ($_POST["cocosub"])) {
    if ($_POST["cocoval"] == "") {
        echo "empty";
    } else {
        if ($_POST["cocoval"] != $coconew) {
            echo "mismatch";
        } else {
            echo "match";
        }
    }
}
?>

<form action="<?php $_SERVER['PHP_SELF'] ?>" id="cocosub" method="post">
    <div>
        <?php echo $coconew; ?>
        <input type="text" id="cocoval">
        <input type="submit">
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:12:49.547

你需要改变

```
<input type="text" id="cocoval"> 
```

至

```
<input type="text" name="cocoval"> 
```

还有其他（可能更好）的方法可以做到这一点，但你走在正确的轨道上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T01:13:26.217

`$_POST`仅查找`name`表单元素的属性，因此请修改您的表单：

```
<?php
$coconew = "blah";

if (isset ($_POST["cocoval"])) {
    if ($_POST["cocoval"] === "") {
        echo "empty";
    } else {
        if ($_POST["cocoval"] !== $coconew) {
            echo "mismatch";
        } else {
            echo "match";
        }
    }
}
?>

<form  id="cocosub" method="post">
    <div>
        <?php echo $coconew; ?>
        <input type="text" id="cocoval" name="cocoval">
        <input type="submit">
    </div>
</form> 
```

（我做了一些其他的更改，你想检查`isset`元素，而不是表单，如果你不给它一个属性，它将 POST 到同一页面[所以不需要添加`echo`]，并添加更好的类型检查在你的 php 中）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-12T01:17:18.690

除了已经发布的其他答案之外，您可能还对 PHP 的会话支持感兴趣（取决于您需要静态变量的“静态”程度）。`$cocoval`如果您需要在同一用户对同一 URL 的多个请求中保存它们的值，那么这就是您放置和任何其他变量的位置。请参阅此处了解更多信息：

[http://php.net/manual/en/features.sessions.php](http://php.net/manual/en/features.sessions.php)和 [http://www.php.net/manual/en/book.session.php](http://www.php.net/manual/en/book.session.php)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-12T01:18:45.270

这有效：

```
<?php
session_start();

if(isset($_POST["cocosub"])){

    $input = trim($_POST["cocoval"]);

    if($input == ""){
        echo "empty";
    } elseif($input != $_SESSION["coconew"]){
        echo "mismatch";
    } else {
        echo "match";
    }
}

$_SESSION["coconew"] = substr(md5(uniqid()), 0, 5);

?>

<form action="<?php echo $_SERVER['PHP_SELF']; ?>" id="cocosub" method="post">
<div>
    <?php echo $_SESSION["coconew"]; ?>
    <input type="text" id="cocoval" name="cocoval">
    <input type="submit" name="cocosub">
</div>
</form> 
```

您需要将 name="cocosub" 添加到提交按钮元素，以使第一个 if(isset(...)) 条件为真。这就是脚本不起作用的原因。此外，您还需要在输入文本字段中使用 name="cocoval" 而不是 id，以便将其延续到 $_POST。

# c# - 使用正则表达式从 C# 字符串中提取“$x Million”？

> ID：11918954
> 
> 赞同：-1
> 
> 时间：2012-08-12T01:08:20.760
> 
> 标签：c#, regex

你能帮我为以下内容构建一个正则表达式：

我有一个字符串： `"This Tuesday $5 Million Jackpot 14/Aug/12, Draw 965"`我需要提取以下内容：`"$5 Million"`

短语中的数字可以是任意数字。但它总是看起来像`"$N Million"`。

**PS：**我试图解析的实际 HTML 是

```
<b>This Tuesday</b>
 $5 Million  Jackpot
<br />
14/Aug/12, Draw 965 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:13:50.257

我建议查看 MSDN 的文档，[`Regex`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.aspx)因为这一切都解释得很好。

```
static string GetJackpot(string content)
{
    Match match = Regex.Match(content, @"\$\d+ Million", RegexOptions.IgnoreCase);
    return match.Success ? match.Groups[0].Value : null;
} 
```

重要部分：

*   `@"\$\d+ Million"`查找一个文字`$`符号，后跟一个或多个数字，后跟文字字符串`Million`。
*   `RegexOptions.IgnoreCase`匹配时忽略大小写，因此这也将匹配“500 万美元”。
*   如果正则表达式无法匹配 ( `match.Success`)，则返回`null`。
*   如果头奖可以是几百万（例如“430 万美元”），那么您必须修改表达式。

祝你中大奖。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:49:03.750

```
public string ParseMoney(string Sauce)
{
    string Money = Regex.Match(Sauce, @"\$\d+\sMillion", RegexOptions.IgnoreCase | RegexOptions.Singleline).Value;
    return string.IsNullOrEmpty(Money) ? "Unable to find money." : Money;
} 
```

用法：

```
ParseMoney(HTML); 
```

# c - linux c mmap/mprotect问题

> ID：11918955
> 
> 赞同：2
> 
> 时间：2012-08-12T01:08:40.293
> 
> 标签：c, linux, mmap, mprotect

我需要做一个小 sw 需要保护一个页面进行读/写，然后当访问内存时，它需要增加一个计数器并允许读/写，然后它需要保护内存

我有这段代码，但它导致了无限循环

```
#include <fcntl.h>
#include <signal.h>
#include <stdio.h>
#include <string.h>
#include <sys/mman.h>
#include <sys/stat.h>
#include <sys/types.h>
#include <unistd.h>

static int alloc_size;
static char* memory;

void segv_handler (int signal_number) 
{
 printf ("memory accessed!\n");
 /* allow read and write */
 mprotect (memory, alloc_size, PROT_READ | PROT_WRITE);

 /* Protect memory back*/
 mprotect (memory, alloc_size, PROT_NONE);
} 

int main ()
{
 struct sigaction sa;

 /* Install segv_handler as the handler for SIGSEGV. */
 memset (&sa, 0, sizeof (sa));
 sa.sa_handler = &segv_handler;
 sigaction (SIGSEGV, &sa, NULL);

 alloc_size = 4096;
 memory = mmap (0, alloc_size, PROT_READ | PROT_WRITE, MAP_SHARED | MAP_ANONYMOUS, -1, 0);   /* anonymous mapping doesn't need a file desc */

 /* Write to the page to obtain a private copy. */
 memory[0] = 0;
 memory[1] = 0;

 /* Make the memory unwritable. */
 mprotect (memory, alloc_size, PROT_NONE);
 /* Write to the allocated memory region. */
 memory[0] = 1; //--> this should trigger the SIGSEGV
 memory[1] = 1;

 /* All done; unmap the memory. */
 printf ("all done\n");
 munmap (memory, alloc_size);
 return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T22:26:24.910

You said you want to basically (1) catch the invalid memory access, (2) temporarily unprotect the page, (3) allow the memory access, (4) reprotect the page, (5) resume normal execution. But that's not what your code does. Your `segv_handler` unprotects the page (step 2) and then immediately reprotects it again (step 4), so by the time your `segv_handler` returns it's too late for step 3\. The insruction faults again and you get an infinite loop.

Installing a signal handler does not support what you need to do. What you need to do is make some changes, execute a single instruction, then make some more changes. Only single-steping the program under a debugger will allow you to do this.

`ptrace` is the system call you will need to do this. There are [many](https://stackoverflow.com/questions/6125836/how-to-trace-a-program-execution-with-ptrace) [questions](https://stackoverflow.com/questions/7697344/why-doesnt-ptrace-singlestep-work-properly) on SO that talk about ptrace and single stepping, but I warn you: ptrace is not for the faint of heart, it's a lot more complicated than a signal handler.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-13T16:31:55.663

我认为您可以使用诸如[Libasm之](http://www.eresi-project.org/wiki/TheLibASM)类的反汇编库来实现此目的，但看起来不会那么好。

在你的`segv_handler`,

1.  允许读/写页面
2.  加载导致 SIGSEGV 的最后一条指令，将其放入可执行内存并运行它。
3.  应用保护回来
4.  做你想做的事（增加一个计数器）
5.  在`segv_handler`返回之前，将堆栈上的返回地址修改为下一条指令，这样您就不会运行该指令两次并再次捕获信号。

# java - 如何在 Eclipse 导出到战争时将所有外部 jar 添加到库中

> ID：11918957
> 
> 赞同：9
> 
> 时间：2012-08-12T01:09:13.470
> 
> 标签：java, eclipse, tomcat

现在我一直在做一些研究，我知道我需要将我的依赖外部 jar 放在 web-inf/lib 文件夹中，以便在 eclipse 中创建一个动态 web 项目。不幸的是，到目前为止，我只是将它们导入到 eclipse 中的构建路径中，然后再次导入到我的测试服务器的运行时配置中。

有没有一种简单的方法可以在导出时将所有依赖的 jar 复制到 web-inf/lib 文件夹中，还是我必须手动找到每个 jar 并将其放入文件夹中？在开发过程中是否有更好的方法来管理外部 jar，所以我不必担心将它们导入构建路径，然后是运行时，然后是库文件夹？我尝试使用 Project >> Properties >> Java Build Path >> Order and Export 并检查所有 jar，但它们似乎仍然没有随着战争导出。

我正在使用 tomcat 作为我的生产服务器，当我由于日志文件中的 defclassnotfounderror 无法启动项目时，我发现了所有这一切。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2015-09-29T03:09:44.723

右键单击项目-> 属性。在属性窗口

1.  选择左侧的“部署程序集”
2.  点击“添加”
3.  选择“Java 构建路径条目”。
4.  选择所有需要的库

右键单击项目-> 导出。选择 Web -> .war 文件。
您将在 /WEB-INF/lib 下找到库

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-12T02:15:53.180

将来，您应该始终在 web-inf/lib 文件夹中创建您的依赖项的副本。当它们在那里时，只需右键单击它们并选择“构建路径 - > 添加到构建路径”。

对于您当前的项目，我将禁用该文件夹之外的所有当前外部 jar，然后将它们复制到其中。

# php - 所见即所得 drupal 插件中 tinymce 的文本字段名称

> ID：11918959
> 
> 赞同：1
> 
> 时间：2012-08-12T01:09:48.730
> 
> 标签：php, javascript, drupal, tinymce, wysiwyg

所以我试图得到它，以便当我按下按钮时，它将变音符号插入文本区域。它是用javascript编写的，它完全适用于我给它的任何文本字段，除了我给我的正文编辑框的tinymce编辑器。我知道文本区域的 id 是“edit-body-und-0-value”。如果我禁用所见即所得并且只保留正常的文本字段，则此方法有效。但是，当我使用所见即所得启用 tinymce 编辑器并按下变音符号按钮时，不会将任何内容插入到 tinymce 编辑器中。你们知道我该如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:20:35.550

TinyMCE 一旦设置就不仅仅是一个`textarea`（它内置在一个`iframe`），因此它不能以相同的方式访问。

要在 TinyMCE 中做你想做的事情，你需要编写一个插件（见那里：[http](http://www.tinymce.com/wiki.php/Creating_a_plugin) ://www.tinymce.com/wiki.php/Creating_a_plugin ），或者幸运的是你有一个内置的-在 TinyMCE 按钮中已经存在插入特殊字符，它被称为“charmap”并且很容易添加到您的按钮列表中。

# parsing - 解析 AST < O(exp(n))？

> ID：11918961
> 
> 赞同：11
> 
> 时间：2012-08-12T01:10:47.983
> 
> 标签：parsing, antlr, abstract-syntax-tree, xtext, constraint-satisfaction

**抽象问题描述：**

在我看来，解解析意味着从 AST 创建一个令牌流，当再次解析时会产生一个相等的 AST。

所以 `parse(unparse(AST)) = AST`成立。

这等于找到会产生相同 AST 的有效解析树。

该语言由使用[eBNF](http://en.wikipedia.org/wiki/EBNF)变体的[上下文无关](http://en.wikipedia.org/wiki/Context-free_grammar) [S 属性语法描述。](http://en.wikipedia.org/wiki/S-attributed_grammar)

因此，解解析器必须通过遍历所有语法约束的节点找到有效的“路径”。这基本上意味着找到[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)节点到语法产生规则的有效分配。这通常是一个[约束满足问题 (CSP)](http://en.wikipedia.org/wiki/Constraint_satisfaction)，可以像解析一样通过O(exp(n)) 中的[回溯来解决。](http://en.wikipedia.org/wiki/Backtracking)

对于解析来说幸运的是，这可以使用[GLR](http://en.wikipedia.org/wiki/GLR_parser)（或更好地限制语法）在 O(n³) 中完成。因为[AST](http://en.wikipedia.org/wiki/Abstract_syntax_tree)结构与语法生成规则结构如此接近，我真的很惊讶看到运行时比解析更糟糕的实现：[XText](http://www.eclipse.org/Xtext/)使用[ANTLR](http://www.antlr.org/)进行解析，回溯用于反解析。

**问题**

1.  上下文无关的 S 属性语法是解析器和非解析器需要共享的所有内容，还是存在进一步的限制，例如解析技术/解析器实现？
2.  我感觉这个问题一般不是 O(exp(n)) - 有天才能帮我解决这个问题吗？
3.  这基本上是一种上下文相关的语法吗？

**示例 1：**

```
Area    returns AnyObject   -> Pedestrian | Highway
Highway returns AnyObject   -> "Foo" Car
Pedestrian  returns AnyObject   -> "Bar" Bike
Car     returns Vehicle     -> anyObjectInstance.name="Car"
Bike    returns Vehicle     -> anyObjectInstance.name="Bike" 
```

所以如果我有一个 AST 包含

`AnyObject -> AnyObject -> Vehicle [name="Car"]` 我知道根可以是区域，我可以解决它

```
Area    -> Highway  -> Car 
```

所以 (Highway | Pedestrian) 决策取决于子树决策。当叶子乍一看可能是几种类型中的一种时，问题会变得更糟，但必须是特定的叶子才能在以后形成有效路径。

**示例 2：**

因此，如果我有返回无类型对象的 S 属性规则，只需分配一些属性，例如

```
A -> B C   {Obj, Obj}
X -> Y Z   {Obj, Obj}
B -> "somekeyword"  {0}
Y -> "otherkeyword" {0}
C -> "C" {C}
Z -> "Z" {Z} 
```

因此，如果 AST 包含

```
 Obj
  /  \
"0"  "C" 
```

我可以将其解析为

```
 A
  / \
 B   C 
```

就在我可以将“C”解析为C之后。

在遍历 AST 时，我可以从语法生成的所有约束都满足规则 A 和 X，直到我点击“C”。这意味着对于

```
A -> B | C 
B -> "map"  {MagicNumber_42}
C -> "foreach" {MagicNumber_42} 
```

树的两种解决方案

```
 Obj
      |
 MagicNumber_42 
```

是有效的，并且认为它们具有相同的语义，例如句法糖。

**更多信息：**

*   [在 XText 中解析](http://www.eclipse.org/Xtext//documentation.html#serialization)

*   [用于反解析的语法约束，请参阅 Serializer: Concrete Syntax Validation](http://www.eclipse.org/Xtext//documentation.html#validation)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-14T16:27:46.010

问题1：不，语法本身可能还不够。以模棱两可的语法为例。如果您最终得到一个给定字符串的唯一最左（最右）推导（AST），那么您将不得不知道解析器如何消除歧义。想想字符串 'a+b*c' 和表达式 'E:=E+E|E*E|...' 的朴素语法。

问题 3：您给出的语法示例都不是上下文相关的。产生式的左侧是单个非终结符，没有上下文。

# mpi - 为什么我不能让 mpiexec 连接到另一个节点？

> ID：11918965
> 
> 赞同：1
> 
> 时间：2012-08-12T01:12:56.270
> 
> 标签：mpi, mpich, mpiexec

我正在尝试通过在 Windows XP 上运行的 MPI (MPICH2) 设置分布式计算集群。我正在尝试按照以下方式运行单个命令

```
>> mpiexec -hosts 2 localhost 1 other-computer 2 notepad.exe
Aborting: unable to connect to other-computer 
```

可能的原因是什么？我知道网络很好，因为 ping 有效：

```
>> ping other-computer
Pinging other-computer [IPADDRESS] ...
Reply from IPADDRESS: bytes=32 time<1ms TTL=128
... 
```

mpiexec.exe 和 smtpd.exe 在 Windows 防火墙中都被列为例外。

这个问题的可能原因是什么？我的 Google-fu 让我失望了！（这可能与身份验证有关吗？我尝试使用-logon，但这并没有改变任何事情。如果可能是身份验证问题，我怎样才能找到我自己的用户名/密码（或者它是否使用计算机用户名/密码）？）

请原谅无知，因为我不熟悉 MPI 的工作原理。

# javascript - 使用 select 动态更改谷歌地图脚本 src

> ID：11918972
> 
> 赞同：0
> 
> 时间：2012-08-12T01:14:05.543
> 
> 标签：javascript, jquery, html, google-maps

我想在单击我的下拉选项之一时更改 Google 地图脚本 src，因为在我的页面上搜索邮政编码时遇到问题。为了获得正确的结果，我相信我需要在 src url 中使用 Google 的区域本地化“®ion=”。（[https://developers.google.com/maps/documentation/javascript/basics#Localization](https://developers.google.com/maps/documentation/javascript/basics#Localization)）

我已经在`<head>`标签中加载了我的 google maps api：

`<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>`

我创建了一个下拉列表

```
<select id="country">  
   <option value="sel">Select</option>
   <option value="DK">Denmark</option>
   <option value="NL">Netherlands</option>
   <option value="SE">Sweden</option>
</select> 
```

我希望在单击其中一个选项时更改 google maps 脚本 src。

例如：如果我单击丹麦，则 src 将更改为： `http://maps.googleapis.com/maps/api/js?sensor=false&region=DK`

我已经通过查看这个[Dynamically change the src of a script 标签](https://stackoverflow.com/questions/8295394/dynamically-change-the-src-of-a-script-tag)尝试了一些东西， 但我仍然不知道如何使它工作。

目前我有这个：

```
$('#country option').click(function(e) {
    e.preventDefault();
    var region = $(this).attr('value');
    var url = 'http://maps.googleapis.com/maps/api/js?sensor=false&region=' + region;
}); 
```

当谈到 jQuery 和 javascript 时，我真的是新手，所以我想也许我可以在这里得到一些帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T08:02:34.430

您不应该那样做，因为删除脚本元素不会删除脚本创建的方法、变量等。你会收到这样的警告：

*警告：您已在此页面上多次包含 Google Maps API。这可能会导致意外错误*

相反，您应该在请求中使用区域参数，例如在地理编码时

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:37:34.773

如果您尝试根据用户选择为页面动态加载新脚本，那么您可能需要查看[getScript](http://api.jquery.com/jQuery.getScript/)。只是尝试更改该元素的值不会有所不同，因为它已经为您的页面加载。

实际上，如果您想要的脚本完全取决于下拉列表中的用户选择，我建议您将其完全从页面中删除，并在用户做出选择后才加载它。

# android - 如何在 Tabhost 中为 ICS 主题添加标签图标/文本？

> ID：11918976
> 
> 赞同：1
> 
> 时间：2012-08-12T01:15:16.053
> 
> 标签：android

在休息了一段时间后，我又回到了安卓。但是，从阅读看来，如果您使用 tabhost（甚至是操作栏），则无法在选项卡文本的顶部添加选项卡图标。

即你不能这样做`tabspec.setIndicator("Tab1",drawableIcon)`它只会显示没有图标的文本。无论如何，您可以在带有新 ICS 主题的文本顶部添加一个带有图标的选项卡吗？

PS。我正在用 tabhost 做片段。如果您想知道我是否以旧方式使用 tabhost（带有活动）

另外，我知道我可以制作自己的主题来模仿 ICS，但我不想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-18T03:55:35.393

让图像显示

```
 int imageViewIndex = 1;
    if (ifICS) {
        imageViewIndex = 0;
    }

    ViewGroup idView = (ViewGroup) mTabHost.getTabWidget().getChildAt(INDEX);
    ImageView imageView = (ImageView) idView.getChildAt(imageViewIndex);
    imageView.setImageResource(R.drawable...); 
```

然后，如果您在制作 tabhost 后设置图像视图，则将显示图像

# html - Right mime type for SVG images with fonts embedded

> ID：11918977
> 
> 赞同：212
> 
> 时间：2012-08-12T01:15:31.910
> 
> 标签：html, svg, font-face, mime-types

This is the usual SVG mime type:

```
image/svg+xml 
```

And it works great. However, when embedding an SVG font, chrome tells you the mime type is incorrect, obviously because you return a font instead of an image.

Is there any universal mime type? is chrome wrong? is `application/svg+xml` accepted somehow?

I guess this is still a gray area in HTML5 but someone here might know.

* * *

## 回答 #1

> 赞同：269
> 
> 时间：2012-08-13T08:20:29.017

There's only [one registered mediatype](http://www.w3.org/TR/SVG11/mimereg.html) for SVG, and that's the one you listed, `image/svg+xml`. You can of course serve SVG as XML too, though browsers tend to behave differently in some scenarios if you do, for example I've seen cases where SVG used in CSS backgrounds fail to display unless served with the `image/svg+xml` mediatype.

# ruby-on-rails - (:category_name/:id) 路由类型

> ID：11918980
> 
> 赞同：1
> 
> 时间：2012-08-12T01:16:20.893
> 
> 标签：ruby-on-rails, friendly-url

我有这些模型：

```
Category(:name)
Post(:category_id, :title, :body) 
```

类别模型只有少数类别，目前我可能的路线是：

```
/tasks/15015
/categories/5/posts/5641841 
```

我想有一个这种格式的友好网址，但我想不出一种不完全使用通配符并弄乱其他路线的方法：

```
/politics/518-obama-health-care 
```

正如我所说，我尝试了这个，但如果可能的话，我正在寻找更少的通配符并与当前类别更集成的东西：

```
match '(:category_name)/(:id)' => 'posts#show' 
```

欢迎任何其他想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T05:47:29.347

把它放在最后，这样它就不会干扰你的任何其他路线。然后在你的那个检查中放一个`before_filter`（仅用于`show`）`PostsController`以确保它`:category_name`是有效的，如果它没有引发`ActionController::RoutingError`

# java - 如何向 java 客户端公开 .net webservice 方法

> ID：11918985
> 
> 赞同：0
> 
> 时间：2012-08-12T01:17:20.190
> 
> 标签：java, web-services

我在 .Net 中有网络服务，我接触了一些外部系统。那个系统只有java。然后它将如何将该.net 方法访问到java。反之亦然。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-12T01:21:50.360

您应该能够在 java 端导入 WSDL 并使用客户端调用 Web 服务。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-12T01:22:19.267

如果它是一个 SOAP 服务，Java 客户端需要做您服务的每个客户端都会做的事情：访问 WSDL，创建 XML 消息，打包到 SOAP 信封中，然后向 URL 发布 HTTP 请求。

这就是基于 HTTP 的 Web 服务、SOAP 或 REST 的美妙之处：任何可以 GET 或 POST 适当的 HTTP 请求的客户端都可以使用它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-12T07:39:50.370

首先获取 WSDL 文件的 url。对于带有 Web 服务 URL 的附加“?wsdl”字符串。然后在java中创建一个Web服务客户端。使用以下说明在 java“netbeans”中创建 Web 服务客户端。

在您的 netbeans 项目中，右键单击 > 新建 > 其他

然后在 Web 服务 > Web 服务客户端

然后点击下一步

然后选择单选按钮 WSDL URL 然后粘贴 WSDL 文件的 url，然后单击 Finish

# jquery - 使用 jquery 更改背景图像

> ID：11918986
> 
> 赞同：0
> 
> 时间：2012-08-12T01:17:22.183
> 
> 标签：jquery

我正在从此代码更改我的背景图片

```
jQuery(window).load(function(){
var images = ['blaa.jpg','sdsd.jpg'];
var i = 0;
setInterval(function(){

    jQuery('#absolute-c').css('background-image', function() {
        if (i >= images.length) {
            i=0;
        }
        return 'url(' + images[i++] + ')';      
    });
}, 3000);
}) 
```

如何`.animate`立即加载第一个背景。由于`setInterval`我的第一个背景也在 3 秒后显示

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T01:32:40.997

您可以为此创建一个函数并在 setInterval 中使用它：

```
jQuery(window).load(function(){
    var images = ['blaa.jpg','sdsd.jpg'];
    var i = 0;

    function changeBackground() {
        jQuery('#absolute-c').css('background-image', function() {
            if (i >= images.length) {
                i=0;
            }
            return 'url(' + images[i++] + ')';      
        });
    }
    // Call it on the first time
    changeBackground();
    // Set an interval to continue
    setInterval(changeBackground, 3000);
}); 
```

我认为更好的另一种解决方案是使用`setTimeout`：

```
jQuery(window).load(function(){
    var images = ['blaa.jpg','sdsd.jpg'];
    var i = 0;
    var timeoutVar;

    function changeBackground() {
        clearTimeout(timeoutVar); // just to be sure it will run only once at a time

        jQuery('#absolute-c').css('background-image', function() {
            if (i >= images.length) {
                i=0;
            }
            return 'url(' + images[i++] + ')';      
        });

        // call the setTimeout every time to repeat the function
        timeoutVar = setTimeout(changeBackground, 3000);
    }

    // Call it on the first time and it will repeat
    changeBackground();        
}); 
```

# facebook - Facebook 应用程序上的 Facebook 用户可以匿名吗？

> ID：11918987
> 
> 赞同：0
> 
> 时间：2012-08-12T01:17:31.153
> 
> 标签：facebook

我正在尝试在 facebook 上为封闭和质疑青年创建一个应用程序，一个重要功能是在应用程序上匿名的能力。我一直在试图找出人们是否可以在 facebook 上匿名，但这听起来是不允许的。facebook 用户可以在 facebook 应用程序中创建一个新的用户帐户来保护他们的身份吗？

谢谢，科尔比

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T03:45:44.153

一些建议：

*   在*App Settings* > *Auth Dialog*中有设置**Default Activity Privacy**，您应该将其设置为**Only Me**。

*   当用户授权您的应用商店尽可能少的信息时，并在显着位置显示您的隐私政策，说明您存储的信息类型、原因以及您永远不会与任何人共享这些信息的方式。

*   *（可选）*将用户 ID 作为 md5 哈希存储在您的数据库中，这样即使有人获得了对该数据库的访问权限，他们也不会知道用户是谁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T01:39:55.553

不，他们不能从 facebook 应用程序创建新的 facebook 帐户。而 facebook 与使用户匿名无关，如果用户已授予您的应用程序所需的权限，那么您可以获得有关用户的所有信息，这取决于您是否想让该用户成为“匿名用户”或显示他的个人资料图片/信息。

# javascript - 类型错误：$.datepicker 未定义

> ID：11918991
> 
> 赞同：4
> 
> 时间：2012-08-12T01:18:09.167
> 
> 标签：javascript, jquery

我的 javascript 有代码，用于我网站上的一个页面：

```
$('#nmdt1').datetimepicker({
        dateFormat: $.datepicker.ATOM,
        minDate: nmsdt,
                  ...
                  ... 
```

当加载 id="nmdt1" 的页面时，这运行良好。我仅在加载该页面时才加载相关的 datetimepicker js 库（模块）。到目前为止，一切都很好。

但是当我在我的网站上加载任何其他页面时，我会收到此错误：从定义 dateformat 的行号。

编辑：这是萤火虫日志的正确错误：

```
TypeError: $.datepicker is undefined
http://myswbsite/jscript/myjsscript.js
Line 569 
```

第 569 行是：

```
dateFormat: $.datepicker.ATOM, 
```

是的，这个错误只出现在我没有加载相关 js 代码（jquery-ui-timepicker-addon.js）的页面上。我没有在每一页上加载这个 js 的原因是，我只需要在一页上。

更多细节：

在 lib 加载后的 HTML 标头中（在 seq 中）

```
<head>
    <script src="/jscript/jquery-1.8.0.min.js" type="text/javascript"></script>
    <script src="/jscript/myjsscript.js" type="text/javascript"></script>
...
...
    <script type="text/javascript">
    jQuery(document).ready(function(){
        var mid = "[% mid %]";
        alert('mid='+mid);
        $(".bvmainmenu #"+mid).css({"background":"url(/images/current-bg.gif) top left repeat-x", "color":"#ffffff"});
    });
    </script>
</head> 
```

每次未加载 jquery-ui-timepicker-addon.js 库时，您在上面看到的最后一个 javascript 代码（标题的底部）都不会运行（并且您会在 firebug 中看到错误 - 我可以忍受错误，但为什么会这样最后一个代码没有运行，我不确定）。我无法理解为什么这个例程不能运行只是因为我没有加载一个“附加”库

正确运行所有内容的页面在 BODY 中加载以下 js 脚本

```
<script src="/jscript/jquery-ui-1.8.21.custom.min.js" type="text/javascript"></script>
<script src="/jscript/jquery-ui-timepicker-addon.js" type="text/javascript"></script> 
```

在此页面上，您在标题中看到的最后一个 javascript 代码也会加载并显示警报！

我很难弄清楚这一点。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-12T01:48:52.057

您是否在应用程序中包含了[jQuery UI 。](http://jqueryui.com/)

```
<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
<script language="javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.22/jquery-ui.min.js"></script> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-03T05:22:35.447

确保 $ 是您的 jquery 快捷方式标识符。检查使用情况

```
var $J = jQuery.noConflict(); 
```

在这种情况下，尝试使用`$J.datepicker`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-12T02:22:39.040

您似乎在说这段代码：

```
$('#nmdt1').datetimepicker({
    dateFormat: $.datepicker.ATOM,
    minDate: nmsdt,
    ... 
```

...在每个页面上加载的通用`myjsscript.js`脚本中。如果是这样，这意味着它在每个页面上运行，因此您会在不包含额外插件脚本的页面上收到错误。

我上面引用的代码*并不*意味着“如果存在具有该 id 的元素调用该`datetimepicker()`方法”，它意味着“创建一个可能包含或可能没有任何元素的 jQuery 对象，然后调用该`datetimepicker()`方法，传递一个对象属性设置为`$.datepicker.ATOM`." 也就是说，即使页面上没有 nmdtd1 元素，它仍然会调用`datetimepicker`并引用`$.datepicker.ATOM`.

至少有三种方法可以解决这个问题：

1.  将该代码移出公共区域`myjsscript.js`，然后将其放在需要它的一页上。

2.  继续并在您网站上的所有页面上包含插件 JS 文件 - 它们将被浏览器缓存，因此假设您的用户访问您的多个页面，这并不是真正的性能损失。

3.  在条件内移动该代码，以便`.datetimerpicker()`除非需要，否则不会执行该部分。

对于选项 3：

```
var $nmdt1 = $('#nmdt1');
if ($nmdt1.length > 0) {
    $nmdt1.datetimepicker({
       dateFormat: $.datepicker.ATOM,
       minDate: nmsdt,
       ...
    });
} 
```

# performance - 添加位 mod n 的最简单方法？

> ID：11918995
> 
> 赞同：1
> 
> 时间：2012-08-12T01:19:54.690
> 
> 标签：performance, algorithm, math, bit-manipulation

给定一堆整数，我想将它们转换为以 n 为基数，并且对于每个位，将这些位相加并将它们修改为 n。

示例：设 n = 3，假设我想在 4、4、4、2 中添加 mod 3 位。以 3 为底的这些数字是 11、11、11、02。最低有效位加起来为 1 + 1 + 1 + 2 = 5 = 2 mod 3。第二个最低有效位加起来为 1 + 1 + 1 + 0 = 3 = 0 mod 3。答案是 02 base 3 = 2。或者，如果我们没有在加法之前转换为基数 3，并且只是以二进制形式进行，我们有 100、100、100、010。从最低有效位到最高有效位的结果位是：0 + 0 + 0 + 0 = 0 mod 3, 0 + 0 + 0 + 1 = 1 mod 3, 1 + 1 + 1 + 0 = 0 mod 3，所以答案是 010 = 2。

n = 2 的情况非常简单，您可以对所有内容进行 XOR。有没有办法概括这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T02:26:06.777

这是 ruby​​ 中的一首小曲：

```
#! /usr/bin/env ruby

def naryxor(n, terms)
  puts "Calculating the #{n}-ary XOR of #{terms.join(", ")}..."
  raise "Negative terms are forbidden" if terms.any? { |i| i < 0 }
  xor = []                    # "Digits" of our n-ary xor result

  done = false
  while not done
    done = true               # Assume we're done until proven otherwise
    xor.insert(0, 0)          # Insert a new total digit at the front

    terms = terms.select { |i| i > 0 }.collect do |i|
      done = false            # Not all remaining terms were zero

      digit = i % n           # Find the least n-ary digit
      rest = (i - digit) / n  # shift it off
      xor[0] += digit         # add it to our xor

      rest                    # Replace this integer with its remainder
    end

    xor[0] %= n               # Take the mod once, after summing.
  end

  xor[1..-1]                  # Drop untouched leading digit
end

raise "Usage: ./naryxor.rb arity term term..." if ARGV.size <= 1
puts naryxor(ARGV[0].to_i, ARGV[1..-1].collect(&:to_i)).join("") 
```

运行它：

```
$ ./naryxor.rb 3 4 4 4 2
Calculating the 3-ary XOR of 4, 4, 4, 2...
02 
```

这只是扩展`n-ary`传递的整数的表示并做一些愚蠢的事情。如果`n`被认为是 2 的幂，我们可以做一些更有趣的位旋转来避免整数除法，但你没有给出这样的保证。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-12T02:11:56.243

我不认为有一个数学属性可以导致有效的通用捷径。XOR 适用于 base 2 的原因是因为 XOR 具有方便的特性，即与进位丢弃相加。

一个简单的递归函数可以应用该算法，例如利用 Scala 的 BigInt 类进行基本转换：

```
def sums(radix: Int, digits: List[List[String]]): String =
  if(digits exists { _.nonEmpty }) // there's at least 1 bit left to add
    (digits.flatMap { _.headOption } // take the 1st bit of all numbers
      .map { BigInt(_, radix) } // convert to int representation
      .sum
      .toInt % radix // modulo by base
    ).toString +
    sums(radix, digits map { _.drop(1) }) // do next most significant bit
  else 
    "" // base case: no digits left to add

def sum(radix: Int, ns: List[Int]): Int =
  BigInt(
    sums(
      radix,
      ns // use BigInt to convert from int representation to string 
        .map { BigInt(_) }
        .map { _.toString(radix).split("").drop(1).toList.reverse }
    )
    .reverse,
    radix
  ).toInt

scala> sum(3, List(4,4,4,2))
res0: Int = 2 
```

您的问题被标记为“性能”，但没有列出任何关于内存或运行时的额外限制来告知改进的方法。

# python - 在单元测试中分配模拟变量值

> ID：11918997
> 
> 赞同：1
> 
> 时间：2012-08-12T01:20:34.727
> 
> 标签：python, unit-testing, mocking, python-unittest

在 Python 中，我创建了一个读取网页内容并对内容进行处理的方法。

我想使用特定的 http 地址对方法进行单元测试，但我不想在生产代码中手动分配地址然后对其进行测试。所以理想情况下，我想创建某种模拟对象（使用 Mock 库），它获取我需要的 http 地址的值，以便我可以使用该值运行我的测试。

附带说明一下，测试的目的是验证我的代码是否使用测试的 http 地址引发了正确的异常。

为了说明，我要测试的代码具有以下形式：

```
Class A

    method1()

        var1 = "wwww.something.com"
        read contents at address var1
        do stuff with contents (raise error if bad contents) 
```

我想在我的单元测试中使用 var1 = "wwww.somethingelse.com" 测试代码（最好使用 Mock 库）。

感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-12T03:46:24.523

如果您的方法不带参数，那么如何将无效的 URI 传递给它？您应该通过传入预期会导致您希望测试的行为的 URI 来测试您的方法。这样做不需要使用`mock`.

需要模拟的是，如果*这*是一个专门的单元测试，在这种情况下，您可能想要模拟出在网络上发出请求的整个代码块，（例如，`urllib2.urlopen`）用一些东西代替，而不是' t 执行任何网络活动，而是返回您想要测试的任何内容或 HTTP 错误。

作为旁注，以使其更可测试的方式构建实际生产代码是完全合理的（也是可取的）。

# python - python中的关键监听器？

> ID：11918999
> 
> 赞同：44
> 
> 时间：2012-08-12T01:20:35.190
> 
> 标签：python, keylistener

有没有办法在没有巨大臃肿模块的情况下在 python 中做关键监听器`pygame`？

一个例子是，当我按下`a`键时，它会打印到控制台

> a键被按下了！

它还应该监听箭头键/空格键/shift 键。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2017-03-30T00:34:17.670

我正在寻找一个没有窗口焦点的简单解决方案。Jayk 的回答[`pynput`](https://pynput.readthedocs.io)对我来说是完美的。这是我如何使用它的示例。

```
from pynput import keyboard

def on_press(key):
    if key == keyboard.Key.esc:
        return False  # stop listener
    try:
        k = key.char  # single-char keys
    except:
        k = key.name  # other keys
    if k in ['1', '2', 'left', 'right']:  # keys of interest
        # self.keys.append(k)  # store it in global-like variable
        print('Key pressed: ' + k)
        return False  # stop listener; remove this if want more keys

listener = keyboard.Listener(on_press=on_press)
listener.start()  # start to listen on a separate thread
listener.join()  # remove if main thread is polling self.keys 
```

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2012-08-12T01:39:43.790

不幸的是，要做到这一点并不容易。如果您正在尝试制作某种文本用户界面，您可能需要查看[`curses`](http://docs.python.org/library/curses.html). 如果您想像通常在终端中那样显示内容，但又想要这样的输入，那么您将不得不使用[`termios`](http://docs.python.org/library/termios.html)，不幸的是，这似乎在 Python 中记录得很差。不幸的是，这些选项都不是那么简单。此外，它们不能在 Windows 下工作；如果您需要它们在 Windows 下工作，则必须使用[PDCurses](http://pdcurses.sf.net/)代替[pywin32](http://starship.python.net/crew/mhammond/win32/)而`curses`不是.`termios`

* * *

我能够让这个工作得体。它打印出您键入的键的十六进制表示。正如我在您问题的评论中所说，箭头很棘手；我想你会同意的。

```
#!/usr/bin/env python
import sys
import termios
import contextlib

@contextlib.contextmanager
def raw_mode(file):
    old_attrs = termios.tcgetattr(file.fileno())
    new_attrs = old_attrs[:]
    new_attrs[3] = new_attrs[3] & ~(termios.ECHO | termios.ICANON)
    try:
        termios.tcsetattr(file.fileno(), termios.TCSADRAIN, new_attrs)
        yield
    finally:
        termios.tcsetattr(file.fileno(), termios.TCSADRAIN, old_attrs)

def main():
    print 'exit with ^C or ^D'
    with raw_mode(sys.stdin):
        try:
            while True:
                ch = sys.stdin.read(1)
                if not ch or ch == chr(4):
                    break
                print '%02x' % ord(ch),
        except (KeyboardInterrupt, EOFError):
            pass

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2016-08-30T03:21:28.757

有一种方法可以在 python 中进行关键侦听器。此功能可通过[pynput 获得](https://pypi.python.org/pypi/pynput)。

命令行：

```
$ pip install pynput 
```

Python代码：

```
from pynput import keyboard
# your code here 
```

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2014-04-16T03:08:24.580

以下是如何在 Windows 上执行此操作：

```
"""

    Display series of numbers in infinite loop
    Listen to key "s" to stop
    Only works on Windows because listening to keys
    is platform dependent

"""

# msvcrt is a windows specific native module
import msvcrt
import time

# asks whether a key has been acquired
def kbfunc():
    #this is boolean for whether the keyboard has bene hit
    x = msvcrt.kbhit()
    if x:
        #getch acquires the character encoded in binary ASCII
        ret = msvcrt.getch()
    else:
        ret = False
    return ret

#begin the counter
number = 1

#infinite loop
while True:

    #acquire the keyboard hit if exists
    x = kbfunc() 

    #if we got a keyboard hit
    if x != False and x.decode() == 's':
        #we got the key!
        #because x is a binary, we need to decode to string
        #use the decode() which is part of the binary object
        #by default, decodes via utf8
        #concatenation auto adds a space in between
        print ("STOPPING, KEY:", x.decode())
        #break loop
        break
    else:
        #prints the number
        print (number)
        #increment, there's no ++ in python
        number += 1
        #wait half a second
        time.sleep(0.5) 
```

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2017-10-28T20:03:28.967

## 键盘

*   `sudo pip install keyboard`
*   [https://github.com/boppreh/keyboard](https://github.com/boppreh/keyboard)

> 使用这个小型 Python 库完全控制您的键盘。挂钩全局事件、注册热键、模拟按键等等。
> 
> 所有键盘上的全局事件挂钩（无论焦点如何都捕获键）。监听并发送键盘事件。适用于 Windows 和 Linux（需要 sudo），具有实验性 OS X 支持（感谢@glitchassassin！）。纯 Python，无需编译 C 模块。零依赖。安装和部署很简单，只需复制文件即可。Python 2 和 3。具有可控超时的复杂热键支持（例如 Ctrl+Shift+M、Ctrl+Space）。包括高级 API（例如录制和播放、add_abbreviation）。映射键，因为它们实际上在您的布局中，具有完整的国际化支持（例如 Ctrl+ç）。在单独的线程中自动捕获事件，不会阻塞主程序。测试并记录在案。不会破坏带重音的死键（我在看着你，pyHook）。通过项目鼠标（pip install mouse）提供鼠标支持。

从[README.md](https://github.com/boppreh/keyboard/blob/master/README.md)：

```
import keyboard

keyboard.press_and_release('shift+s, space')

keyboard.write('The quick brown fox jumps over the lazy dog.')

# Press PAGE UP then PAGE DOWN to type "foobar".
keyboard.add_hotkey('page up, page down', lambda: keyboard.write('foobar'))

# Blocks until you press esc.
keyboard.wait('esc')

# Record events until 'esc' is pressed.
recorded = keyboard.record(until='esc')
# Then replay back at three times the speed.
keyboard.play(recorded, speed_factor=3)

# Type @@ then press space to replace with abbreviation.
keyboard.add_abbreviation('@@', 'my.long.email@example.com')
# Block forever.
keyboard.wait() 
```

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-25T19:03:41.987

虽然我喜欢使用键盘模块来捕获键盘事件，但我不喜欢它的`record()`功能，因为它返回一个类似 的数组`[KeyboardEvent("A"), KeyboardEvent("~")]`，我觉得它有点难以阅读。所以，为了记录键盘事件，我喜欢同时使用键盘模块和线程模块，像这样：

```
import keyboard
import string
from threading import *

# I can't find a complete list of keyboard keys, so this will have to do:
keys = list(string.ascii_lowercase)
"""
Optional code(extra keys):

keys.append("space_bar")
keys.append("backspace")
keys.append("shift")
keys.append("esc")
"""
def listen(key):
    while True:
        keyboard.wait(key)
        print("[+] Pressed",key)
threads = [Thread(target=listen, kwargs={"key":key}) for key in keys]
for thread in threads:
    thread.start() 
```