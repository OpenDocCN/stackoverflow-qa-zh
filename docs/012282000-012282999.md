# StackOverflow 问答 12282000-12282999

# javascript - onclick提交按钮JSP

> ID：12282005
> 
> 赞同：0
> 
> 时间：2012-09-05T12:59:20.213
> 
> 标签：javascript, jsp, onclick

> **可能重复：**
> [多个提交按钮点击问题？](https://stackoverflow.com/questions/3967287/multiple-submit-button-click-problem)

在 JSP 中有一个 type=Submit 按钮。要求是在单击时禁用此按钮。基本要求是如果多次单击同一表单的此按钮，则停止发布同一表单的多个请求。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:05:06.763

即使您禁用提交`button`，用户仍然可以通过按下甚至使用浏览器重新加载按钮来提交表单`F5`。`ctrl+F5`因此禁用提交`button`不会有太大用处。

为什么不使用**[Post/Redirect/Get](http://en.wikipedia.org/wiki/Post/Redirect/Get)**方法。

该`PRG`模式基本上将用户重定向到另一个页面`Posted`。

因此，现在当用户重新加载或尝试重新提交表单时，他正在调用 Get 方法，以防止重新提交表单。

然而，这也不是完全安全的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:05:30.453

看这里： http: [//www.developertutorials.com/tutorials/javascript/how-disable-submit-button-050416-1275/](http://www.developertutorials.com/tutorials/javascript/how-disable-submit-button-050416-1275/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:06:29.120

我使用了一个简单的 JS 函数，你可以调用`onlick()`：

```
<script type="text/javascript">
    var isSubmitted = false;

    function safeSubmit(entityName) {
        if (!isSubmitted) {
            isSubmitted = true;
            document.forms[0].submit;
        }
    }
</script> 
```

# java - 单例函数说明

> ID：12282007
> 
> 赞同：-1
> 
> 时间：2012-09-05T12:59:30.047
> 
> 标签：java, android

我搜索但没有找到 Java Singleton 函数或类的任何正常信息，那么任何人都可以解释我为什么需要它们吗？他与其他功能有什么区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:02:29.687

单例模式用于只应由一个实例存在的类。单例的用途及其值应该在整个应用程序中保持一致。

单例通常用于特殊环境变量、数据库连接、工厂和对象池。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:07:18.557

Singleton 用于只创建一个 Object 实例

```
public class Singleton {

    private static Singleton uniqueInstance;

    // other stuff
    private Singleton()
    {

    }
    public static Singleton getInstance()
    {
        if(uniqueInstance == null)
        {
            uniqueInstance = new Singleton();
        }
        return uniqueInstance;
    }
    // other methods
} 
```

这是让您了解单例模式的简单示例

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T13:03:25.917

`Sometimes it's appropriate to have exactly one instance of a class: window managers, print spoolers, and filesystems are prototypical examples. Typically, those types of objects—known as Singletons`

没有什么像`Singleton function`，我们通常使用`Singleton Classes`

[http://www.javapractices.com/topic/TopicAction.do?Id=46](http://www.javapractices.com/topic/TopicAction.do?Id=46)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T13:07:11.037

好的，这个类只有一个对象。为了制作一个单例类，将构造函数设为私有并定义一个静态方法来获取这样的类对象

```
 public class yourclassname{
   private yourclassname{}
   public static yourclassname getMySongAlarmdb(Context c)
            {
                if (myobject == null){
                    myobject = new yourclassname;
                }
                return myobject;
            }
    } 
```

# emacs - semantic-complete-jump-local 在 Emacs 中返回“No Match”

> ID：12282015
> 
> 赞同：10
> 
> 时间：2012-09-05T13:00:04.387
> 
> 标签：emacs, cedet, emacs-semantic

我正在使用 CEDET 1.1 运行 Emacs 23.3.1。该命令在正常工作时`semantic-complete-jump-local`总是返回。`"No Match"``semantic-complete-jump`

我调查了`semantic-complete.el`但我对 elisp 的了解还不足以理解正在发生的事情......

# javascript - 使用 javascript 动态创建 html 内容/元素

> ID：12282016
> 
> 赞同：0
> 
> 时间：2012-09-05T13:00:06.673
> 
> 标签：javascript, html, dynamic, onblur, createelement

我正在尝试建立一个登录页面。当您跳出第一个文本框（用户名）时，我希望页面在输入密码之前根据输入的文本显示一些信息。现在，我无法使用 onblur 事件显示任何内容。这是我到目前为止所拥有的。

```
<script type='text/javascript' language="javascript">
function createDiv()
{
var divTag = document.createElement("div");
divTag.style.position = "absolute";
divTag.style.top = "150px";
divTag.style.left = "450px";
divTag.style.zIndex = "20";
divTag.innerHTML = "This is information";
document.getElementByID('card').appendChild(divTag);
}
</script>

<body onload='init();'>
<div id="card" style="width:800px; z-index:10; height:600px; position:relative; margin-left:auto; margin-right:auto; text-align:center; margin-top:0px; background-image:url('customLoginBG.png'); background-repeat:no-repeat;">
<form method='post' action='/login'>
<ul style="list-style-type:none;">
<li> <input type='hidden' id='token' name='token' /> </li>
<li style="position:absolute; top:270px; left:260px;"> <input type='text' onblur="createDiv()" id='username' style="width:188px; height:27px; background-image:url('inputBar.png');" /> </li>
<li style="position:absolute; top:310px; left:260px;"> <input type='password' id='password' style="width:188px; height:27px; background-image:url('inputBar.png');" /> </li>
<li style="position:absolute; top:290px; left:455px;"> <input type='image' src="loginButton.png" value="Login" onclick='doLogin();' /> </li>          
</ul>  
</form>
</div>
</body> 
```

有什么想法和/或建议吗？只是让任何东西显示 onblur 将是一个好的开始。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:03:22.833

这`document.getElementById()`不是`document.getElementByID()`

在你的情况下：

```
// doesn't work
document.getElementByID('card').appendChild(divTag);
// works as expected
document.getElementById('card').appendChild(divTag); 
```

* * *

## 回答 #2

> 赞同：-5
> 
> 时间：2012-09-05T13:07:27.317

一个建议，（实际上更多的是一个问题）：为什么 vanilla js 而不是 jquery 或任何其他生产力库？

# regex - 使用正则表达式将表单输入转换为 [MyId,Form]

> ID：12282017
> 
> 赞同：0
> 
> 时间：2012-09-05T13:00:08.237
> 
> 标签：regex, dreamweaver

我有一些大表格，而不是手动将这些表格转换为电子邮件，我认为如果我可以使用 Dreamweavers RegEx 函数进行搜索和替换会更快 - http://www.adobe.com/devnet/dreamweaver/articles/regular_expressions_pt1 .html

基本上，我有一些输入值，我需要从中提取输入 id 并将其转换为 [MyId,Form] 之类的值

**示例输入：**

```
<input name="PreviousReading100" id="PreviousReading100" type="number" style="width:200px; color:#666;" class="clear-default ForceNumber html5" value="[|PreviousReading100]" /> 
```

**结果要求：**

[上一篇阅读100，表格]

**- 试过 -**

**寻找：**

```
<input\b(?=((?!(/>|id="?[0-9a-zA-Z]*")).)*id="?[0-9a-zA-Z]*").*?/> 
```

**代替：**

```
[$2,Form] 
```

**结果：**

```
[id="PreviousReading100",Form] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:00:46.997

尝试

替换为 [$3 `<input(\s+\w+="(.*?)")*\s+id="(.+?)"(\s+\w+="(.*?)")* />`
, **Form]**

# grails - 没有让 dijit.Tree 延迟加载

> ID：12282021
> 
> 赞同：0
> 
> 时间：2012-09-05T13:00:37.310
> 
> 标签：grails, lazy-loading, dijit.tree

我需要将目录延迟加载`dijit.Tree`到`dijit.form.Dialog`. 我得到了根目录，我可以将它们放入带有根节点“计算机”的树中，但我不知道如何让延迟加载工作。

当我单击一个节点时，我调用一个函数，该函数进行 ajax 调用以获取所选节点的子节点。我可以获取它们并将它们作为 JSON 呈现给 gsp（我认为它们格式正确）。但是当我尝试将它们放入商店时，它失败了。我不能`store.newItem()`去上班。我真的不知道这是否是正确和最简单的方法。我搜索并尝试并失败了，不幸的是，我被卡住了。

我用：

*   圣杯 1.3.9
*   道场工具包 1.6

我如何将数据存储到 gsp 的方式：

```
 File [] roots = File.listRoots()        
    def item = []

    roots.each{
        item << [
            name         : it.getAbsolutePath(),
            path         : it.getAbsolutePath(),
            children     : []
        ]
    }
    def store = [
        identifier: 'path',
        label: 'name',
        items: item
    ]

    def retVal = [store: store]

    render retVal as JSON 
```

store、model、tree的定义：

```
 function prepare(dataStore) {                           
        var store = new dojo.data.ItemFileWriteStore({
               data: dataStore
        });
        var treeModel = new dijit.tree.ForestStoreModel({
               store: store,
               rootId : "root",
               rootLabel : "Computer",
               childrenAttrs: ["children"]
       });
       var treeControl = new dijit.Tree({
               id: 'directoryTree',
               model: treeModel,
               autoExpand: false,
               onClick: loadDirectories
               },
               "treeOne");
       } 
```

这是我如何尝试编辑商店的代码，数据是一个列表：

```
 data = [
        [name: 'info', path: 'C:\temp\info', children: []]
        [name: 'grmpf', path: 'C:\temp\grmpf', children: []]
        ...
    ]

    for(i=0; i < data.length; i++){
      store.newItem({name: data[i].name, path: data[i].path, children: data[i].children}, {parent: parent.path[0], attribute: 'children'}); 
      store.save(); 
    } 
```

我尝试过这种方式，有一次，我删除了该项目，编辑了该项目并再次将其放入商店。但没有任何效果..

如果有人能给我任何见解，我将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-17T13:31:30.067

幸运的是，我发现了一个非常奇怪的问题......

好吧，我试过了：

```
 store.newItem(jsObj, parent);
    store.save(); 
```

解决方案：

```
 model.newItem(jsObj, parent); 
```

我没有将项目添加到存储中，而是将其放入模型中，然后它就可以工作了。我真的不知道为什么。也许有人可以向我解释。谢谢

# asp.net - 使用 asp.net 输出服务器时间

> ID：12282027
> 
> 赞同：0
> 
> 时间：2012-09-05T13:00:45.177
> 
> 标签：asp.net, time

我想在页面上显示真实的服务器时间，而不是来自用户 pc。使用递增秒数也很好，以我的语言显示星期几和我的语言的月份。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:02:21.187

`DateTime.Now`在后端 C# 或 VB 代码将为您提供服务器时间。

如果我理解正确，您的递增时钟是服务器时间的实时更新时钟。您可以做的是使用`DateTime.Now`将为您提供服务器端时间的值，然后使用客户端 javascript 来显示该值。

此链接将向您展示如何创建客户端 javascript 时钟：[http ://www.ricocheting.com/code/javascript/html-generator/digital-clock](http://www.ricocheting.com/code/javascript/html-generator/digital-clock)

此解决方案可能会出现一个问题，即服务器时间调用与 javascript 开始运行数字时钟之间的时间差。这可能以毫秒为单位或关闭 1-2 秒，除非您正在运行对时间敏感的应用程序，否则我看不到任何问题（我建议无论如何不要使用此解决方案）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:03:30.423

`DateTime.Now`是你想要的东西

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:40:04.817

我认为 Steven 对 DateTime 提出了一些建议。

由于您在页面中提到了多语言，您可以使用资源文件。这将提供多语言功能，您可以添加翻译而无需重新编译。

[你可以在这里](https://stackoverflow.com/questions/470366/multiple-languagesenglish-french-on-asp-net-page)找到详细信息

# java - 线程“main”中的异常 java.lang.NullPointerException - Java 错误

> ID：12282030
> 
> 赞同：-1
> 
> 时间：2012-09-05T13:00:47.570
> 
> 标签：java, exception, user-interface, main, graphics2d

当我运行我的代码时，我得到这个错误：

> 线程“主”java.lang.NullPointerException 中的异常

```
at Main.drawBlock(Main.java:48)
at Main.<init>(Main.java:43)
at Main.main(Main.java:58) 
```

我认为这是因为我绘制的图形，但以前从未发生过。我不知道为什么。这是我的代码：

```
Graphics2D g;
static JFrame jf = new JFrame();
Image Air;
Image Grass;
Image icon;

public Main() {
    icon = new ImageIcon(this.getClass().getResource("Icon.png")).getImage();
    Grass = new ImageIcon(this.getClass().getResource("Grass.png")).getImage();
    Air = new ImageIcon(this.getClass().getResource("Air.png")).getImage();

    jf.setIconImage(icon);
    drawBlock(Air,0,0);

}

private void drawBlock(Image img, int x, int y) {
    g.drawImage(img,x,y,null);
}

public static void main(String[] args) {
    jf.setSize(792,528);
    jf.setLocationRelativeTo(null);
    jf.setDefaultCloseOperation(jf.EXIT_ON_CLOSE);
    jf.setVisible(true);
    jf.setTitle("Minecraft 2D Adventure");

    new Main();

}} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:03:44.377

因为你还没有初始化`Graphics2D g`所以 g 是`null`

is的真正原因`NPE`是`Graphics2D`a`AbstractClass`并且您无法实例化它。

您可以创建实例的`Graphics2D`实例，如下所示

```
GraphicsEnvironment env =
        GraphicsEnvironment.getLocalGraphicsEnvironment();
 env.createGraphics(BufferedImage); 
```

或者你可以使用`createGraphics()`From`BufferedImage`

```
public Graphics2D createGraphics() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:02:32.740

您没有分配任何东西给`Graphics2D g`，因此是 NPE。

有关该问题的更详细分析以及如何解决它的指示，请参阅 AmitD 的答案。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T13:06:23.780

如果您不为分配的对象分配值，则其默认值为`null`. 因此，当您引用`g`.

# ios - iOS PhoneGap 应用因使用 localStorage 而被拒绝

> ID：12282032
> 
> 赞同：14
> 
> 时间：2012-09-05T13:00:55.767
> 
> 标签：ios, cordova, local-storage

Apple 刚刚拒绝了我提交的一个 PhoneGap 应用程序。我在应用程序中使用 HTML5 localStorage 来保存下载的数据以进行缓存：**2.23 应用程序必须遵循 iOS 数据存储指南，否则将被拒绝**。

我很困惑，因为如果我认为 5.1 中的 localStorage 实际上将数据保存在缓存中，而不是保存在 iCloud [[来源]](https://stackoverflow.com/questions/9664392/phonegap-ios-5-1-and-localstorage)备份的地方。这是我想要的行为 - 我不需要或不希望备份数据。

我错了还是苹果？我可以在 PhoneGap 应用程序中做些什么来保存这些缓存数据而不会违反？

**编辑：** PhoneGap 1.8.1 如果有帮助的话。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-07T17:02:09.480

事实证明我是对的，而苹果是错的。我确认我将所有内容都正确存储在 /Caches 目录中。他们没有评论我的问题——只是批准了我的应用程序。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-06T06:10:30.103

我知道有两件事：

1) 由您的应用程序生成的文件（而不是用户使用您的应用程序的结果），例如用于存储变量值的临时文本文件，那么这些文件必须放在 Library/Cache 而不是 Document 目录中。

2) 您还必须使用“skip-backup”属性标记文件，以告诉 iCloud 不要备份该文件。

我想你可能错过了第 2 步。

我编写了一个简单的 MediaDirectory 类，它可以快速为我提供 Library/Cache 文件夹中文件的路径，还添加了跳过备份属性。

将文件保存到 Libary/Cache 文件夹后，您只需执行以下操作：

```
[MediaDirectory addSkipBackupAttributeForFile:@"myTextFile.txt"]; 
```

这是完整的课程：

```
// Header File

// ----------------------------------------------------------------------
// This class takes a file name (including extension) and returns
// the path to that file in the Library/Cache folder
// ----------------------------------------------------------------------

#import <Foundation/Foundation.h>

@interface MediaDirectory : NSObject

+(NSString *) mediaPathForFileName:(NSString *) fileName;
+(NSString *) mediaPathForFileName:(NSString *) fileName inSubDirectory:(NSString *) subDirectory;
+ (BOOL)addSkipBackupAttributeToFile:(NSString *) fileName;
+ (BOOL)addSkipBackupAttributeToFile:(NSString *) fileName inSubDirectory:(NSString *) subDirectory;

@end

// Implementation File

#import "MediaDirectory.h"
#include <sys/xattr.h>

@implementation MediaDirectory

+(NSString *) mediaPathForFileName:(NSString *) fileName
{   
    NSArray *directoryPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *cachesDirectory = [directoryPaths objectAtIndex:0];
    NSString *filePath = [NSString stringWithFormat:@"%@/%@", cachesDirectory, fileName];

    return filePath;
}

// if an image needs to be stored in a sub folder called "images"
+(NSString *) mediaPathForFileName:(NSString *) fileName inSubDirectory:(NSString *) subDirectory
{   
    NSArray *directoryPaths = NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);
    NSString *cachesDirectory = [directoryPaths objectAtIndex:0];
    NSString *filePath = [NSString stringWithFormat:@"%@/%@/%@", cachesDirectory, subDirectory, fileName];

    return filePath;
}

//+ (BOOL)addSkipBackupAttributeToItemAtURL:(NSURL *)URL
+ (BOOL)addSkipBackupAttributeToFile:(NSString *) fileName
{
    const char* filePath = [[self mediaPathForFileName:fileName] fileSystemRepresentation];

    const char* attrName = "com.apple.MobileBackup";
    u_int8_t attrValue = 1;

    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    return result == 0;
}

+ (BOOL)addSkipBackupAttributeToFile:(NSString *) fileName inSubDirectory:(NSString *) subDirectory
{
    const char* filePath = [[self mediaPathForFileName:fileName inSubDirectory:subDirectory] fileSystemRepresentation];

    const char* attrName = "com.apple.MobileBackup";
    u_int8_t attrValue = 1;

    int result = setxattr(filePath, attrName, &attrValue, sizeof(attrValue), 0, 0);
    return result == 0;
}

@end 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-11-17T16:18:24.577

我刚刚提交的一个phonegap应用也因为同样的原因被苹果拒绝了，我只使用了localstorage。

我重新提交了在我的 config.xml 中设置的以下首选项

```
<preference name="BackupWebStorage" value="none" /> 
```

我了解这将解决问题

# php - PHP：包含的文件编码错误

> ID：12282033
> 
> 赞同：0
> 
> 时间：2012-09-05T13:01:06.977
> 
> 标签：php, character-encoding, include

我最近遇到的奇怪问题。我开发了一个简单的 php 网站引擎。所有可能的编码配置都已正确设置（`<meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>`以及 apache 虚拟主机位，因此内容类型 http 标头是正确的）。那怎么了？php 文件中被访问的所有内容（例如 index.php）都正常显示。但是外部文件中包含的内容显示为问号。 ![在此处输入图像描述](../Images/89f3f28cfd1ec5cfe1cc00199a8737c5.png)

看？中间框架是由 index.php 生成的，没关系，但顶部菜单栏是由包含文件生成的。如果我将菜单栏例程移至 index.php，它看起来也不错。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:11:25.613

如果它适用于生产环境，则可能是服务器配置错误。

首先，尝试检索包含在生产环境中的文件，以检查问题是否来自这里。这可能确实是一个编码问题。确保有 UTF-8 编码（最好没有 BOM）。Notepad++ 具有将文件从一种编码转换为另一种编码的功能。

其次，尝试将以下行添加到您的 Apache 配置中（如果尚未完成：如果它正确发送 HTTP 标头，它应该已经在这里）：

```
AddDefaultCharset utf-8 
```

不要忘记重新启动 Apache 服务器。

让我们知道它是否有效。:)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2016-02-28T11:42:43.017

1.  在 Windows 笔记本中打开文件
2.  将文件类型更改为所有文件类型
3.  将编码更改为 UTF-8
4.  保存您的文件
5.  再试一次！:O)

# backbone.js - 没有默认值的backbone.js model.clear

> ID：12282034
> 
> 赞同：3
> 
> 时间：2012-09-05T13:01:08.840
> 
> 标签：backbone.js

当我创建一个新的backbone.js 模型时，“默认值”中的属性不会被忽略，它们成为我模型的初始值。
为什么当我在模型上调用“清除”时它们会被忽略。
这背后有什么原因吗？
为什么我需要一个状态，当我有“默认值”时，我的模型的所有属性都是 0 或“”（空格）？
任何人都可以给我一个真实的例子吗？

例如，在我的一个模型中，有一个名为“status”的属性。初始值为“x”，但用户可以将其更改为“b”或“u”。""(空格) 不是有效值。因此在模型中，我有

```
 defaults: {
   "status":  "x"
 } 
```

在细节组件中，用户可以编辑模型的值，他有一个名为“擦除”的按钮。当他这样做时，模型将获得初始状态。在这种情况下，我永远不需要将所有属性设置为零或空格的函数。

如果模型具有“默认值”，那么对于主干.js 作者来说，检查“clear”方法会很容易，如果有，则删除所有值，然后获取默认值。

非常感谢
沃尔夫冈

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:37:22.133

有类似的需求。因为框架的作者自己不使用它们，所以他们无法预见所有现实世界的用例。最好直接问[https://github.com/documentcloud/backbone](https://github.com/documentcloud/backbone)

无论如何，它是javascript

```
Backbone.Model.prototype.resetToDefaults = function() {
    this.clear();
    this.set(this.defaults);
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:39:55.703

不喜欢就*覆盖吧*！

```
var Model = Backbone.Model.extend({
  clear: function(options) {
    Backbone.Model.prototype.clear.apply(this, arguments); // or something like this
    return this.set(_.clone(this.defaults));
  }
}); 
```

现在您可以使用您的自定义模型作为所有模型的基础

```
var MyModel = Model.extend({...}); 
```

如果做这个快速的事情让你感到困扰，你可以将它发布到backbone.js' git [issues](https://github.com/documentcloud/backbone/issues)。

希望这可以帮助！

# c++ - 将#ifdef 转换为 C++ 中的模板元程序

> ID：12282036
> 
> 赞同：6
> 
> 时间：2012-09-05T13:01:11.983
> 
> 标签：c++, template-meta-programming

我在 C++ 类中有以下代码：

```
class Features
{
    #define Feature_Size_A 12345
    #define Feature_Size_B 45678
    #define Feature_Size_C 78901
    //#define Feature_Size_D 14725

    const int Feature_Sum = 0
    #ifdef Feature_Size_A
        + Feature_Size_A
    #endif
    #ifdef Feature_Size_B
        + Feature_Size_B
    #endif
    #ifdef Feature_Size_C
        + Feature_Size_C
    #endif
    #ifdef Feature_Size_D
        + Feature_Size_D
    #endif
        ;

    #ifdef Feature_Size_A
        static float Feature_A[Feature_Size_A];
    #endif
    #ifdef Feature_Size_B
        static float Feature_B[Feature_Size_B];
    #endif
    #ifdef Feature_Size_C
        static float Feature_C[Feature_Size_C];
    #endif
    #ifdef Feature_Size_D
        static float Feature_D[Feature_Size_D];
    #endif
}; 
```

我曾经注释掉特性，比如第 4 行，以编译和运行不同的测试。但是现在我想把这个类作为一个模板，这样我就可以在同一个程序中实例化几个不同功能的版本。

我在想这样的事情：

```
template <bool Feature_A, bool Feature_B, bool Feature_C, bool Feature_D>
class Features
{
    ...
};

Features<true, true, true, false> f; 
```

我尝试了 boost::mpl:vector's 但我正在苦苦挣扎。

顺便说一句：这不是完整的代码。原始代码有 25 个特征。

我很感谢不涉及宏的每个想法:-)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:16:16.800

类型列表可以用来解决这个问题。

```
template<unsigned num, unsigned size, typename T>
class Feature : public T
{
public:
    static float feature[size];
    static const unsigned int feature_sum = size + T::feature_sum;
};
template<unsigned num, unsigned size, typename T>
float Feature<num, size, T>::feature[size];
class Tail { 
public:
    static const unsigned feature_sum = 0; 
};

template<unsigned num, unsigned size, typename T>
float* get_feature_arr(Feature<num, size, T>& ref) 
{
    return ref.feature;
}

int main() {
    Feature<1, 12345, Feature<2, 45678, Feature<4, 78901, Tail>>> TripleFeatures;
    auto first = get_feature_arr<1>(TripleFeatures);
    auto third = get_feature_arr<4>(TripleFeatures);
    auto size = TripleFeatures.feature_sum;
} 
```

这也可用于访问任何功能，无论列表中是否包含其他功能。

编辑：我细化了一些细节，比如不定义数组并尝试将“3features”作为标识符。勒固定。代码编译 GCC 4.7.1。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:09:31.107

为什么不使用静态分配的数组？

```
#include <stdio.h>

template <bool Feature_A, bool Feature_B, bool Feature_C, bool Feature_D>
class Features
{
    static const int Feature_Size_A = 12345;
    static const int Feature_Size_B = 45678;
    static const int Feature_Size_C = 78901;
    static const int Feature_Size_D = 14725;
    static const int Feature_Sum = 0
        + Feature_A ? Feature_Size_A : 0
        + Feature_B ? Feature_Size_B : 0
        + Feature_C ? Feature_Size_C : 0
        + Feature_D ? Feature_Size_D : 0
    ;

public:
    static float Feature_Vector_A[Feature_A ? Feature_Size_A : 0];
    static float Feature_Vector_B[Feature_B ? Feature_Size_B : 0];
    static float Feature_Vector_C[Feature_C ? Feature_Size_C : 0];
    static float Feature_Vector_D[Feature_D ? Feature_Size_D : 0];
};

Features<true, true, true, true> f1;
Features<true, true, true, false> f2;

int main()
{
    printf("%d %d\n", sizeof(f1.Feature_Vector_D), sizeof(f2.Feature_Vector_D));
} 
```

输出：

```
58900 0 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T14:15:53.283

目前尚不清楚这些功能究竟是什么，但这里有一个解决方案，允许您有条件地包含成员函数以及成员数据：

```
namespace mpl = boost::mpl;

// Define your features
struct FeatureA
{
    static const int size = 12345;
    static float Feature_A[size];

    static void methodA() {}
};
float FeatureA::Feature_A[12345];

struct FeatureB
{
    static const int size = 45678;
    static char Feature_B[size]; // possibly different types of data (?)

    static void methodB() {}
};
float FeatureB::Feature_B[45678];

struct FeatureC
{
    static const int size = 78901;
    static int Feature_C[size];

    static void methodC() {}
};
float FeatureC::Feature_C[78901];

// Helper metafunction
template <typename T>
struct get_size 
  : mpl::int_<T::size>
{};

template <typename FeaturesSeq>
struct Features_impl 
  : mpl::inherit_linearly<
        FeaturesSeq,
        mpl::inherit<mpl::_, mpl::_>
    >::type
{
    static const int Feature_Sum = 
        mpl::accumulate<
            FeaturesSeq,
            mpl::int_<0>,
            mpl::plus<
                mpl::_1,
                get_size<mpl::_2>
            >
        >::type::value;
};

template <typename... F>
using Features = Features_impl<mpl::vector<F...>>;

#include <iostream>

int main()
{
    typedef Features<FeatureA, FeatureC> F;

    std::cout << F::Feature_Sum << '\n';

    F::Feature_A[0] = 12.0f;
    F::methodA();

    F::methodC();
} 
```

如果您的所有功能实际上都只是浮点数组，如您的示例所示，则可以使用泛型`Feature`类

```
template <int Size>
struct Feature
{
    static float data[Size];
};
template <int Size>
float Feature::data[Size]; 
```

并将此类的特化存储到 mpl 向量中：

```
typedef mpl::vector<Feature<1234>, Feature<5678>> Features;

mpl::at_c<Features, 0>::type::data[0] = 12.0f;
// could be encapsulated into a helper function 
```

如果没有更多关于这些所谓功能用途的信息，很难提供更完整的答案。

# php - 在php中结合ucwords和substr

> ID：12282041
> 
> 赞同：1
> 
> 时间：2012-09-05T13:01:19.683
> 
> 标签：php

下面的回声目前都是大写的，我如何强制每个单词的第一个字母大写，其余的小写，但仍然使用 substr 或类似的东西限制长度？

```
<?php echo substr($row['fulladdress'],0,20); ?> 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T13:02:52.340

应该这样做。只需将其包装在 ucfirst 函数中

```
<?php echo ucfirst(strtolower(substr($row['fulladdress'],0,20))); ?> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T13:02:54.500

使用`ucfirst()`和`strtolower()`

```
<?php echo substr(ucfirst(strtolower($row['fulladdress'])),0,20); ?> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T13:03:35.393

喜欢：`<?php echo ucfirst(strtolower(substr($row['fulladdress'],0,20))); ?>`

# asp.net-mvc - 剑道 UI 饼图工具提示可以包含系列类别名称吗？

> ID：12282042
> 
> 赞同：5
> 
> 时间：2012-09-05T13:01:20.433
> 
> 标签：asp.net-mvc, razor, kendo-ui

我正在一个剃刀视图中构建一个剑道图表并且有

```
 .Tooltip(tooltip => tooltip.Visible(true)) 
```

我可以使用配置操作中的任何其他功能在工具提示中包含系列类别标题吗？

文档似乎适用于 JS 实现而不是 razor 实现`Template()`。`Format()`

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T13:08:32.033

您可以像这样添加特定的模板和格式：

```
.Tooltip(tooltip => tooltip
    .Template("#=category# - #=value #")
    .Format("{0}%")
    .Visible(true)
) 
```

这将为您提供如下所示的工具提示：

> 水电 - 22%

我相信同时使用 Template 和 Format 助手可能会导致一些冲突，但是您可以像这样在模板中添加格式：

```
.Template("#=category# - #=kendo.format('{0}', value)#") 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-09-12T19:50:33.697

**[模板](http://docs.telerik.com/kendo-ui/dataviz/chart/tooltip#templates)**

当需要更大的灵活性时，可以使用 Kendo 模板定义工具提示内容。该模板提供对与该点相关的所有信息的访问：

*   value - 点值。值维度可用作属性，例如 value.x 和 value.y
*   类别 - 类别名称。
*   系列 - 数据系列。
*   dataItem - 原始数据项（绑定到 dataSource 时）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-06-04T20:35:02.193

您可以使用：

```
.Tooltip(tooltip => tooltip
.Visible(true)
.Template("#= series.name #: #=kendo.format('{0:N0}', value)#")
) 
```

例如，它显示工具提示：

```
MySerie : 1.234.567 
```

如果只使用：

```
.Tooltip(tooltip => tooltip
.Visible(true)
.Format("{0:N0}")
.Template("#= series.name #: #= value #")
) 
```

表明：

```
MySerie : 1234567 
```

# objective-c - 游戏中心对接会不起作用

> ID：12282043
> 
> 赞同：1
> 
> 时间：2012-09-05T13:01:23.270
> 
> 标签：objective-c, ios, cocos2d-iphone, game-center, gkmatchmaker

这是我的 Menu.m 的 onEnter 方法：

```
GKMatchRequest *request = [[[GKMatchRequest alloc] init] autorelease];
request.minPlayers = 2;
request.maxPlayers = 2;
GKMatchmakerViewController *mmvc = [[[GKMatchmakerViewController alloc] initWithMatchRequest:request] autorelease];
mmvc.matchmakerDelegate = self;

tempVC = [[UIViewController alloc] init];
[[[CCDirector sharedDirector] view] addSubview:tempVC.view];
[tempVC presentModalViewController: mmvc animated: NO];
mmvc.view.frame = CGRectMake(150, 150, 510, 420); 
```

我尝试使用设备和模拟器，但它们无法匹配。

我还尝试按照 Ray Wenderlich 的[教程](http://www.raywenderlich.com/3276/how-to-make-a-simple-multiplayer-game-with-game-center-tutorial-part-12)进行操作：

但是后来，连matchmakerviewcontroller都没有出现。我不知道我做错了什么。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:24:09.250

您是否使用了两个不同的游戏中心 ID——一个用于您的模拟器，一个用于您的设备？

您的设备是否已登录游戏中心沙盒？

模拟器将使用游戏中心沙箱，您的设备也必须使用沙箱才能使两者连接。

您可以通过退出游戏中心，然后启动您的应用程序来登录游戏中心沙盒。您的应用程序应该要求您登录游戏中心。通过您未发布的应用程序执行登录将使您进入游戏中心沙箱。

# asp.net-mvc - ASP.Net MVC 中 ViewModel 的用途是什么

> ID：12282048
> 
> 赞同：0
> 
> 时间：2012-09-05T13:01:57.893
> 
> 标签：asp.net-mvc

> **可能重复：**
> [ASP.NET MVC ViewModel 模式](https://stackoverflow.com/questions/1361092/asp-net-mvc-viewmodel-pattern)

我是 ASP.Net MVC 的新手。我看到人们在 asp.net mvc 中谈论 ViewModel 的使用，但实际上我并不清楚为什么我应该创建 ViewModel 类。

如果有人对 ViewModel 的实际使用有所了解，并用简单的 ViewModel 代码进行解释，那就更好了。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:08:18.127

当您的模型实体与您想要在屏幕上显示的内容不一一对应时，ViewModel 非常有用。

一个简单的示例是存储有关人员信息的应用程序。想象一下你的领域模型有一个 Person 实体和一个 address 实体。每个人都有许多地址，但只有一个默认地址。在您的一个视图中，您希望显示人员的详细信息以及他们的默认地址的详细信息。如果您想让您的视图针对模型（您应该这样做）进行强类型化，那将是不可能的，因为您不能将视图键入到 2 个实体。

这就是 viewModel 发挥最大作用的地方。您创建一个新的视图模型类，该类具有 2 个属性，一个是 person 类型，一个是 address 类型，在您的控制器中，您用所需的信息填充这些属性，然后针对这个 Person+address 模型类键入您的视图。

至于它们的代码，它们就像任何其他模型一样。一个例子很快就会出现。

域模型（可能在您的数据访问层中找到，或者在单独的域模型项目中找到）：

```
public class Person{
    public int PersonId{get;set;}
    public string Name {get;set;}
    .
    .
    .
}
public class Address{
    public int AddressId{get;set;}
    public string Street1 {get;set;}
    public string Street2 {get;set;}
    .
    .
} 
```

然后你可以有一个像这样的 viewModel 类：

```
public class MyViewModel{
    public Person ThePerson{get;set;}
    public Address TheAddress{get;set;]}
} 
```

甚至

```
public class MyViewModel : Person{
    public Address TheAddress{get;set;]}
} 
```

但我更喜欢第一种解决方案，而同事经常选择第二种解决方案。然后，您的视图将针对 MyViewModel 进行强类型化，并通过以下语法访问视图中的值：@model.Person.PersonId

# php - 在谷歌地图中显示来自 db 的坐标

> ID：12282049
> 
> 赞同：2
> 
> 时间：2012-09-05T13:01:58.600
> 
> 标签：php, database, google-maps, coordinates

因此，在了解如何从我的数据库中检索 x 和 y 坐标并将它们显示在 Google 地图中之后：我开始工作了。所以要与我的 mySQL 数据库建立连接是这样写的：

```
<?php
  $server     = '132.3.2.1.';
  $username   = 'you';
  $password   = 'notyou';
  $database   = 'youapp';
  $dsn        = "mysql:host=$server;dbname=$database";

  (This is all made up) 
```

为了从我的数据库中检索坐标并将它们放入 JSON 字符串中，我写了这个：

```
<?php
  include 'config.php';
  try {
    $db = new PDO($dsn, $username, $password);
    $db->setAttribute( PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION );
    $sth = $db->query("SELECT * FROM youapp");
    $youapp = $sth->fetchAll();
    echo json_encode( $youapp );
  } catch (Exception $e) {
    echo $e->getMessage();
  } 
```

我很确定到目前为止我编写的代码是正确的。但我不确定谷歌地图部分。

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta name="viewport" content="width=device-width; height=device-height; user-scalable=no" />
    <meta http-equiv="Content-type" content="text/html; charset=utf-8">
    <title>Beer Me</title>
    <link rel="stylesheet" href="/master.css" type="text/css" media="screen" />
    <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=true"></script>
    var map;
    function init() {
      var mapOptions = {
        zoom: 13,
        center: center,
        mapTypeId: google.maps.MapTypeId.ROADMAP
      }
      map = new google.maps.Map(document.getElementById("map_canvas"), mapOptions);
      makeRequest('get_locations.php', function(data) {
        var data = JSON.parse(data.responseText);
        for (var i = 0; i < data.length; i++) {
          displayLocation(data[i]);
        }
      });
    }
    function makeRequest(url, callback) {
      var request;
      if (window.XMLHttpRequest) {
        request = new XMLHttpRequest();
      // IE7+, Firefox, Chrome, Opera, Safari
      } else {
        request = new ActiveXObject("Microsoft.XMLHTTP");
      // IE6, IE5
      }
      request.onreadystatechange = function() {
        if (request.readyState == 4 && request.status == 200) {
          callback(request);
        }
      }
      request.open("GET", url, true);
      request.send();
    }
  </script>
</head>
<body onload="init();">
  <div id="map_canvas" style="width:400px; height: 400px;"></div>
</body>
</html> 
```

所以该函数`makerequest`是一个标准的 Ajax 调用。但我不确定如何在 Google 地图中显示结果。如果有人可以查看我的代码以与我的数据库建立连接，并就如何在 Google 地图中显示结果提供一些建议或其他内容`makerequest`，我们将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T01:03:39.550

一切看起来都不错，只是您缺少该功能`displayLocation`。只需在其中添加：

```
function displayLocation(item) {
    var marker = new google.maps.Marker({
        // might need to change item.lat/item.lng
        //  to match the column name in your DB
        position: new google.maps.LatLng(item.lat, item.lng),
        map: map
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-12-06T09:47:05.880

尝试这个。

```
function displayLocation(item) {
    var marker = new google.maps.Marker({
        // might need to change item.lat/item.lng
        //  to match the column name in your DB
        position: new google.maps.LatLng(item.lat, item.lng),
        map: map
    });
} 
```

# single-sign-on - Jasig CAS：监控经过身份验证的用户

> ID：12282052
> 
> 赞同：2
> 
> 时间：2012-09-05T13:02:11.093
> 
> 标签：single-sign-on, cas, jasig

我正在尝试将 JASIG CAS 用作几个 webapps 的 SSO。我设法设置了一个自定义配置（maven 覆盖）并“casify”了几个 webapps。不过，我想添加一些监控功能，例如：

*   列出经过身份验证的用户：IP、主体身份
*   使会话用户过期
*   列出用户登录的应用程序

开箱即用的 JASIG CAS 中是否有类似的东西？

任何帮助将非常感激。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-02-29T21:34:40.707

您没有提到您正在使用的 CAS 版本，这个答案涵盖了 4.1 版。

我认为开箱即用的最接近的是：

## SSO 会话报告

CAS 还提供了一个 /statistics/ssosessions 端点，该端点生成所有活动的未过期 SSO 会话的报告。此端点的输出是 SSO 会话的 JSON 表示，它呈现为适度的可视化。

默认情况下，授予票证的票证 ID 不显示。这种行为可以通过 cas.properties 来控制：

```
##
# Reports
#
# Setting to whether include the ticket granting ticket id in the report
# sso.sessions.include.tgt=false 
```

链接：http: [//jasig.github.io/cas/4.1.x/installation/Monitoring-Statistics.html#sso-sessions-report](http://jasig.github.io/cas/4.1.x/installation/Monitoring-Statistics.html#sso-sessions-report)

# java - 在 JEasyOpc 中请求订阅

> ID：12282066
> 
> 赞同：1
> 
> 时间：2012-09-05T13:02:44.300
> 
> 标签：java, polling, subscription, opc, jeasyopc

是否可以使用 JEasyOpc 库请求将特定项目订阅到 OPC 服务器？使用 async20Read(Group group) 只会将该组订阅到 OPC 服务器，即在事件发生后，必须在客户端下载属于该组的所有项目。这会花费大量带宽，如果一个项目丢失事件，则必须下载数千个项目！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:26:14.693

我没有使用过 JEasyOPC，但 OPC 规范声明 AsyncIO::Read 和 AsyncIO2::Read 接受您要从服务器读取的项目列表。这使您可以准确指定要在更新中发送多少以及哪些项目的值。

# c# - Ninject 3.0 和 MVC4 通用绑定

> ID：12282071
> 
> 赞同：1
> 
> 时间：2012-09-05T13:02:53.940
> 
> 标签：c#, asp.net-mvc, ninject

我有一个要使用 Ninject 的 MVC 4 应用程序。我已经将 NuGet 用于 Ninject 3 包，但是我在配置时遇到了一些困难。NuGet 安装创建了文件：

```
public static class NinjectWebCommon 
{
     // Not included for brevity

    /// <summary>
    /// Load your modules or register your services here!
    /// </summary>
    /// <param name="kernel">The kernel.</param>
    private static void RegisterServices(IKernel kernel)
    {

    }
} 
```

我有一个类用于强输入我的网络配置。我把这个类叫做 AppEnvironment，它有一个 IAppEnvironment 接口用于单元测试。我知道在 RegisterServices 函数中我可以做到：

```
kernel.Bind<IAppEnvironment>().To<AppEnvironment>(); 
```

但是，这意味着我必须一次指定每个绑定。在之前的项目中，我们将 Ninject 配置为默认绑定到接口的新实例，只删除了接口类的 I。我已经查看了[Using NInject to bind a generic interface，如果未设置泛型类型的绑定，则使用默认值](https://stackoverflow.com/questions/6066692/using-ninject-to-bind-a-generic-interface-with-a-default-if-a-binding-for-the-g)但是我不确定 IService 的`.InheritedFrom(typeof(IService<>))`用途，以及我应该为我的配置使用什么.

关于如何使它工作的任何线索？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:27:32.130

`InheritedFrom(typeof(IService<>))`过滤由`SelectAllClasses()`（程序集中的所有类型）返回的类型以仅包含`IService<Something>`.

在您的场景中，您可能会使用约定扩展并执行以下操作：

```
kernel.Bind(x => x.FromThisAssembly()
                  .SelectAllClasses()
                  .BindDefaultInterface()); 
```

`BindDefaultInterface`假定您描述的命名约定（这是常见的）：例如`Foo`绑定到`IFoo`.

# ios5 - 如何使用 AudioToolbox 框架获取 mp3 作品？

> ID：12282077
> 
> 赞同：0
> 
> 时间：2012-09-05T13:03:05.517
> 
> 标签：ios5, audiotoolbox

我正在尝试使用这些代码行获取 mp3 文件的艺术作品。

```
 CFDataRef AlbumPic= nil;
    UInt32 picDataSize = sizeof(picDataSize);
    err =AudioFileGetGlobalInfo(kAudioFilePropertyAlbumArtwork, 0, NULL, &picDataSize, &AlbumPic);
    if( err != noErr ) {
        NSLog( @"error" );
    }

    NSData* imagedata= (__bridge NSData*)AlbumPic;
    UIImage* image=[[UIImage alloc]initWithData:imagedata]; 
```

如果我正在使用：

```
NSLog (@"image %@, image"); 
```

或者

```
NSLog (@"image %@, [image description]"); 
```

有NULL。

如何使用 kAudioFilePropertyAlbumArtwork 获取 mp3 文件的图稿？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-27T19:56:42.303

你想要的功能是`AudioFileGetProperty`，不是`AudioFileGetGlobalInfo`

# javascript - jQuery与导航菜单上的鼠标悬停事件冲突

> ID：12282079
> 
> 赞同：0
> 
> 时间：2012-09-05T13:03:10.970
> 
> 标签：javascript, jquery, magento, prototype

我在 Magento 中有一个导航菜单，在鼠标悬停时会显示子类别。还有一个使用 jQuery 插件的倒计时。

如果我删除倒计时菜单工作正常，但如果我添加倒计时，倒计时工作正常，但鼠标悬停时菜单将不再显示类别。

菜单项的代码：

```
<div id="menu10" class="menu popup-menu level-2" onmouseover="wpShowMenuPopup(this, 'popup10');" onmouseout="wpHideMenuPopup(this, event, 'popup10', 'menu10')">
<div class="parentMenu">
<a href="supertrash.html">
<span>SuperTrash</span>
</a>
</div>
</div>
<div id="popup10" class="popup child-2" onmouseout="wpHideMenuPopup(this, event, 'popup10', 'menu10')">
<div class="block1">
<div class="column"><div class="itemMenu level1"><a class="itemMenuName level1" href="supertrash/supertrash-rokjes.html">Rokjes</a></div></div><div class="column"><div class="itemMenu level1"><a class="itemMenuName level1" href="supertrash/stschoenen.html">Schoenen</a></div></div>
<div class="clearBoth"></div>
</div>
</div> 
```

鼠标悬停的javascript：

```
function wpShowMenuPopup(objMenu, popupId)
{
    objMenu = $(objMenu.id); var popup = $(popupId); if (!popup) return;
    popup.style.display = 'block';
    objMenu.addClassName('active');
    var popupWidth = CUSTOMMENU_POPUP_WIDTH;
    if (!popupWidth) popupWidth = popup.getWidth();
    var pos = wpPopupPos(objMenu, popupWidth);
    popup.style.top = pos.top + 'px';
    popup.style.left = pos.left + 'px';
    if (CUSTOMMENU_POPUP_WIDTH) popup.style.width = CUSTOMMENU_POPUP_WIDTH + 'px';
} 
```

用于倒计时的 jQuery 插件：

```
<!-- jquery framework from google api -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>

<!-- google font-family, you can add whatever font suits you -->
<link href='http://fonts.googleapis.com/css?family=Averia+Serif+Libre:300italic' rel='stylesheet' type='text/css'>

<!-- The stylesheet -->
<link rel="stylesheet" type="text/css" href="counter2/css/style2.css">

<!-- the countdown plugin -->
<script src="counter2/coffeetime/coffeetime.min.js"></script>
<!-- The countdown style -->
<link rel="stylesheet" type="text/css" href="counter2/coffeetime/ctstyle.css">
<script>

/* here u can set up different messages for the progress of the countdown
if no message is set for the current percent value, it takes the next message, bigger or equal to that percentage
*/
var message = new Array();
message[0] = "status: just started";
message[10] = "status: drinking a coffe";
message[20] = "status: just finished setting up the database";
message[30] = "status: brainstorming about the template";
message[50] = "status: choosing the color scheme";
message[80] = "status: thinking about the future";
message[90] = "status: nearly done";
message[100] = "status: finished";

$(document).ready(function() {

function callback() {
    alert("Sale is over");
}

$("#flipit").coffeetime({
                        /* COUNTDOWN SETTINGS */
                        message: message, // the message array with the array keys as percent values
                        startYear: 2012,
                        startMonth: 8,
                        startDay: 30,
                        endYear: 2012,
                        endMonth: 9,
                        endDay: 7,

                        callbackFinish : callback,
                            });

$(".flip-title-subheading").html(" we started on "+ window.startDate+ " and we`ll finish on "+ window.endDate);

});

$(document).ready(function () {
    setTimeout(function () {
        $(".flip-container").animate({
            "height" : 105 + "px"
        }, 1000, "swing");
    }, 1000);
});

</script> 
```

我尝试了几件事：

*   在标题中还包含一个（旧（1.4.3））版本的 jQuery，尝试用 1.8.0 版本替换它，但没有任何效果

*   我试过删除倒计时中包含的 1.8.0 版本，然后菜单可以正常工作，但没有倒计时

*   我尝试使用 jQuery.noConflict() 进行倒计时，菜单继续工作，但倒计时没有

我很茫然，我希望有人知道我做错了什么，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:05:48.203

毕竟是 noConflict() 。

在倒计时脚本之前添加以下内容

```
var $c = jQuery.noConflict(); 
```

并将倒计时中的所有`$`变量更改为`$c`有效。

我将`$i`and`$j`变量用于 noConflict（之前已声明），但创建一个新变量很有效。谢谢大家！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:20:52.777

将鼠标悬停功能添加为

```
jQuery.noConflict();

function wpShowMenuPopup(objMenu, popupId) 
```

{

```
objMenu = jQuery(objMenu.id); var popup = jQuery(popupId); if (!popup) return;
popup.style.display = 'block';
objMenu.addClassName('active');
var popupWidth = CUSTOMMENU_POPUP_WIDTH;
if (!popupWidth) popupWidth = popup.getWidth();
var pos = wpPopupPos(objMenu, popupWidth);
popup.style.top = pos.top + 'px';
popup.style.left = pos.left + 'px';
if (CUSTOMMENU_POPUP_WIDTH) popup.style.width = CUSTOMMENU_POPUP_WIDTH + 'px'; 
```

}

希望这可以帮助！！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:11:20.217

我会告诉你尝试 noConflict()，但你已经尝试过了。因此，尝试将 $ 更改为 jQuery，这个保证 magento 使用正确的 JS，因为原型也使用 $。如果不起作用，请在您的页面上查找 2 个 JS 脚本做同样的事情。并删除一个。

# php - str_replace 与主题作为关联数组

> ID：12282090
> 
> 赞同：0
> 
> 时间：2012-09-05T13:03:47.347
> 
> 标签：php, php-5.2

我有一个干草堆，它是一个关联数组：

```
$array['header']['title'] = 'MyTitle';
$array['header']['subtitle'] = 'MySubtitle';
$array['body'] = 'MyBody'; 
```

我希望用“你的”替换每次出现的“我的”。
我正在尝试这样的事情：

```
$new_array = str_replace('My', 'Your', $array); 
```

可悲的是，它只适用于第一级（即`body`关键）。
有什么问题吗？有解决方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:18:56.253

```
array_walk_recursive($array, 'replaceMy');

function replaceMy(&$item) {
    str_replace('My', 'Your', $item);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T13:08:04.967

试试这个：[array_walk_recursive](http://php.net/manual/en/function.array-walk-recursive.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:08:03.593

如果您的关联数组未知，则必须使用递归方法来遍历它并在值是字符串时进行替换。

否则，使用更多调用：

```
$new_array = str_replace('My', 'Your', $array);
$new_array = str_replace('My', 'Your', $array['header']); 
```

# shell - 当shebang引用不同的shell时奇怪的脚本行为

> ID：12282100
> 
> 赞同：0
> 
> 时间：2012-09-05T13:04:21.723
> 
> 标签：shell, unix, solaris, ksh, shebang

我最近切换到了 ksh93 shell。我通过在我的 .profile 文件中添加以下两行来做到这一点

```
export SHELL=/usr/local/bin/ksh93
exec $SHELL 
```

自从我这样做后，一些简单的脚本开始以我不理解的方式出现异常。我将其范围缩小到以下名为 say 的简单脚本`test.sh`

```
#!/bin/ksh
echo $0 $1 
```

如果我键入命令`test.sh fred`，我希望看到相同的输出`test.sh fred`。相反，我看到了`test.sh noglob`。如果我删除了 shebang 或者我将其更改为读取，`#!/usr/local/bin/ksh93`那么脚本将按预期工作。

谁能解释发生了什么，或者该怎么做？我难住了。

如果有什么不同，我正在使用 Solaris 5.9。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:20:05.427

我从评论中注意到你`.kshrc`有一个`set noglob`. 没有选项的`set`命令将设置命令行参数，这就是为什么`$1`是“noglob”，它应该是`set -o noglob`.

顺便说一句，设置`noglob`很奇怪，你确定要这样吗？

我怀疑（正如其他人所提到的）那`/bin/ksh`是 Korn shell
88。ksh88 和 ksh93 在`.kshrc`. 在 ksh88`.kshrc`上，每个 korn shell 进程都执行，甚至是非交互式进程（脚本）。在 ksh93`.kshrc`中*不*为 shell 脚本执行，只为交互式登录 shell。

当您这样做`exec $SHELL`不是登录 shell 时，最好将您的条目更改为`/etc/passwd`. 顺便说一句，使用变量`SHELL`是个坏主意，因为它是由登录 shell 设置的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:12:52.330

您的系统中的 ksh 上可能有一个别名，其中 noglob 设置为选项，或者在您的旧 shell 中默认情况下 noglob 作为默认参数传递。您还应该检查您真正调用的 ksh（检查 /bin/ksh 中是否有指向另一个 shell 的链接）。ksh --version 也应该提供一些见解。

最后一点，我建议不要直接调用 shell

```
 #!/usr/bin/env ksh 
```

# php - apache (lamp) htaccess php 允许访问特定表单

> ID：12282102
> 
> 赞同：1
> 
> 时间：2012-09-05T13:04:25.750
> 
> 标签：php, html, apache, .htaccess, lamp

我在服务器上有一些使用 htaccess 保护的文件。我的问题是我有一个表单（php），客户端将使用它来提交一些数据，并且这个表单访问一些受保护的文件（例如，我正在查询数据库以检查电子邮件是否在数据库和其他类型的功能）。

有没有办法指定如果从我的表单访问这些受保护的文件应该可以访问？否则要求密码或类似的东西？

为了能够保护我的文件，但仍允许通过表单（可供用户使用）访问它们，我有哪些选择？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:41:32.283

我认为您可以创建一个 RewriteCond 检查 HTTP-Referer 标头，如下面的链接中所述。

[http://www.kavoir.com/2010/05/use-htaccess-to-allow-access-only-from-a-single-http-referrer.html](http://www.kavoir.com/2010/05/use-htaccess-to-allow-access-only-from-a-single-http-referrer.html)

# php - 什么可能导致此布局问题？

> ID：12282104
> 
> 赞同：0
> 
> 时间：2012-09-05T13:04:34.540
> 
> 标签：php, css

当创建 5 个（最多）条目时，布局按预期工作，如下所示：

![在此处输入图像描述](../Images/2c6f0d18b9ef91ce4de0d76bce3dc30e.png)

但是，如果条目较少，布局就会变得一团糟：

![在此处输入图像描述](../Images/61cdd8014cccf2eee700abbecde25445.png)

什么可能导致此问题？生成每个条目的 PHP 代码如下：

```
echo '<div class="st_decor sk_decor rounded" style="clear:both">
',$v['name'],' of ',$l['serv_'.$serv[$v['server']]],'
<a style="float:right;margin-left:1em" href="delete/character/',$v['id'],'/">
<img src="img/x.png" alt="',$l['delete'],'"></a></div>'; 
```

使用的 CSS 类是：

```
.rounded {
    -moz-border-radius:5px;
    -webkit-border-radius:5px;
    border-radius:5px}

.st_decor{
    border-left-style:groove;
    border-width: 0 0 0 2px;
    margin-left: 15px;
    font-size:10px;
    padding: 3px}

.sk_decor{border-left-color:#ffdf8c}    
.sk_decor:hover{background-color:#333333;} 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:20:23.697

我找到了一个解决方案：只需将图像放在文本**之前：**

```
echo '<ul class="st_decor sk_decor rounded" style="clear:both">
<a style="float:right;margin-left:1em" href="delete/character/',$v['id'],'/">
<img src="img/x.png" alt="',$l['delete'],'"></a>
',$v['name'],' of ',$l['serv_'.$serv[$v['server']]],'
</ul>'; 
```

# android - 这是在 Android 应用程序中使用 ProGuard 的正确方法吗？

> ID：12282105
> 
> 赞同：2
> 
> 时间：2012-09-05T13:04:37.757
> 
> 标签：android, export, proguard

我在网上搜索了一个如何使用 ProGuard 保护您的 Android 应用免受“代码窃贼”侵害的简单示例。我结束了这样做，你告诉我这是否就是全部：我在 Eclipse 中打开了我的项目的**project.properties**文件，取消注释并留下这一行：`proguard.config=${sdk.dir}/tools/proguard/proguard-android.txt:proguard-project.txt`

然后我去了我的项目的**Android Tools => Export Signed Application Package...** 并使用我之前在导出应用程序以在我的手机中测试它时创建的现有密钥库导出它。

在我的项目中，上面的**project.properties**似乎创建了一个新文件**proguard-project.txt**，这是我所期望的，因为上面的行：`...proguard-android.txt:proguard-project.txt`.

就这样？或者没有？我是否必须添加其他内容，因为我已经看到其他人正在添加一些类以包含在文件中，... 不包括在内吗？

帮助我学习如何保护我的应用程序。提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:38:56.360

是的，如果您只想保护您的代码，这就是全部。

如果您拥有拥有版权的资源，请考虑使用 Android 复制保护。

发布您的应用程序时：转到“**发布选项**”小节**“复制保护”部分**

检查 ***复制保护：开***

这可以防止黑客导出 apk，顺便说一句，防止您的资源被大多数黑客攻击。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:36:57.500

在大多数情况下，这就是您需要做的所有事情。如果您使用任何外部库，您可能必须修改配置文件才能导出您的应用程序。您应该在发布之前在您的设备上测试受保护的应用程序。

# jquery - 用 jQuery 关闭对象

> ID：12282111
> 
> 赞同：0
> 
> 时间：2012-09-05T13:05:05.590
> 
> 标签：jquery, html

我需要帮助。我有这样的HTML代码，

```
<div class="close">Close</div>
<table class="table"><tr><td>One</td><td>Two</td></tr></table>

<div class="close">Close</div>
<table class="table"><tr><td>One</td><td>Two</td></tr></table>

<div class="close">Close</div>
<table class="table"><tr><td>One</td><td>Two</td></tr></table> 
```

如何在 jquery 上仅关闭当前表，其中用户单击关闭。谢谢 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:08:47.637

假设您的标记将保持原样（`table`紧随其后`div`）：

```
$(".close").on("click", function () {
    $(this).next().hide();
}); 
```

您可以通过将事件处理程序委托给 DOM 树的更高层来提高效率（将其绑定到一些共同的祖先元素并将`.close`选择器作为第二个参数传递给`.on()`）。

参考：

*   [`.on()`](http://api.jquery.com/on/)
*   [`.next()`](http://api.jquery.com/next/)
*   [`.hide()`](http://api.jquery.com/hide/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:11:32.640

试试这个

***HTML***

```
<div class="close">Close</div>
<table class="table"><tr><td>One</td><td>Two</td></tr></table>

<div class="close">Close</div>
<table class="table"><tr><td>One</td><td>Two</td></tr></table>

<div class="close">Close</div>
<table class="table"><tr><td>One</td><td>Two</td></tr></table> 
```

***JS***

```
$('div.close').on('click', function(){
    $(this).next().hide();
}); 
```

***[http://jsfiddle.net/F3EXf/6/](http://jsfiddle.net/F3EXf/6/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:11:12.870

您可以通过以下方式关闭它：

```
$(document).on('click', '.close', function() {
    $(this).next().hide();
}); 
```

# java - 如何控制我的数据对象的哪些属性被序列化为 Struts 2 中的 JSON 响应？

> ID：12282114
> 
> 赞同：0
> 
> 时间：2012-09-05T13:05:14.743
> 
> 标签：java, json, struts2

我使用 struts 已经有一段时间了，但从来没有想过很棒的“json”响应类型。

我有很多要返回给客户的对象。我在 UI 上只使用这些字段的一个子集（通常是“displayName”）。

有没有办法将序列化为 JSON 的字段限制回客户端？

我能想到的一种显而易见的方法是创建一个具有字段子集的视图对象。请在此处提出最佳做法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:07:47.540

您可以使用 json 插件的 exclude 属性来排除您不想序列化的属性。

```
<interceptor-ref name="json">
  <param name="enableSMD">true</param>
  <param name="excludeProperties">
    login.password,
    studentList.*\.sin
  </param>
</interceptor-ref> 
```

更多细节参考[json-plugin](http://struts.apache.org/2.2.3/docs/json-plugin.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:13:04.620

在我的实践中，我发现使用 JSON 对象最简单的方法是 GSON。有据可查，使用直观。在很多情况下帮助了我。

使用 GSON 很容易解决您的问题。

[https://sites.google.com/site/gson/gson-user-guide#TOC-Excluding-Fields-From-Serialization-and-Deserialization](https://sites.google.com/site/gson/gson-user-guide#TOC-Excluding-Fields-From-Serialization-and-Deserialization)

[https://sites.google.com/site/gson/gson-user-guide#TOC-Goals-for-Gson](https://sites.google.com/site/gson/gson-user-guide#TOC-Goals-for-Gson)

# objective-c - 将视图从横向转换为纵向？

> ID：12282119
> 
> 赞同：6
> 
> 时间：2012-09-05T13:05:26.717
> 
> 标签：objective-c, ios, cocoa-touch, uiinterfaceorientation

我已经开发了横向模式的应用程序，现在客户要求在横向和纵向模式下构建。

如何将横向视图转换为纵向视图？

现在我将此代码用于景观视图：

```
 - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{

 return (interfaceOrientation == UIInterfaceOrientationLandscapeLeft) || (interfaceOrientation == UIInterfaceOrientationLandscapeRight);

 } 
```

请帮我....

提前谢谢:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:55:25.277

很简单，支持所有方向只需`YES`返回`shouldAutorotateToInterfaceOrientation`.

```
- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation 
{
    return YES;
    //Or to support all but portrait upside down
    return interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T11:25:44.133

NSPostWhenIdle 是对的。您只需要返回 yes shouldAutorotateToInterfaceOrientation。这样您就可以支持所有方向。看看通过 XIB 调整属性大小。这也将使您的工作变得轻松。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:06:49.080

了解如何使用自动调整大小的蒙版。它们很简单，但在大多数情况下非常强大。

# c# - EWS 更新失败

> ID：12282121
> 
> 赞同：1
> 
> 时间：2012-09-05T13:05:28.953
> 
> 标签：c#, exchangewebservices, ews-managed-api

我正在使用 EWS 托管 API 来阅读和发送电子邮件。但是，当我尝试在特定的 EmailMessage 上设置 IsRead 属性时，在 Update 方法上出现以下异常：

> 预期的 XML 节点类型是 Element，但实际类型是 EndElement。

这是我用来更新 IsRead 属性的方法：

```
public void UpdateExchangeEmail(string _ID, bool _isRead)
{
  EmailMessage message = EmailMessage.Bind(ExchService, _ID);
  message.IsRead = _isRead;
  message.Update(ConflictResolutionMode.NeverOverwrite);
} 
```

其中 ExchService 是 ExchangeService 对象，适用于阅读和发送电子邮件。真正奇怪的是 IsRead 的值设置正确，因此尽管抛出了异常，它似乎仍然有效。

非常感谢任何有关如何修复它的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-12T22:46:30.693

我相信您必须先调用 .Load() 方法才能访问此类属性

```
public void UpdateExchangeEmail(string _ID, bool _isRead)
{
  EmailMessage message = EmailMessage.Bind(ExchService, _ID);
  message.Load(new PropertySet(BasePropertySet.IdOnly, EmailMessageSchema.IsRead)); // Do this first.
  message.IsRead = _isRead;
  message.Update(ConflictResolutionMode.NeverOverwrite);
} 
```

# actionscript-3 - 动作脚本中的多部分/混合 HTTP 请求

> ID：12282125
> 
> 赞同：1
> 
> 时间：2012-09-05T13:05:47.060
> 
> 标签：actionscript-3, flash, apache-flex, actionscript, odata

**有没有一种简单的方法可以在 as3 中发出多部分/混合 HTTP 请求？**

我正在尝试使用 Flash 中的 OData 协议访问 LightSwitch 服务器。要一次发送多个命令，您可以使用具有“多部分/混合”内容类型的 HTTP 请求将它们组合成一批。

下面是一个带有两个命令的 HTTP 请求示例：

```
Content-Type:multipart/mixed; boundary=batch

--batch
Content-Type: multipart/mixed; boundary=changeset

--changeset
Content-Type: application/http
Content-Transfer-Encoding: binary

PUT http://localhost:18065/ApplicationData.svc/Orders(3)/$links/User HTTP/1.1
Content-Type: application/json;odata=verbose

{"uri": "http://localhost:18065/ApplicationData.svc/Users(4)"}

--changeset
Content-Type: application/http
Content-Transfer-Encoding: binary

MERGE http://localhost:18065/ApplicationData.svc/Users(3) HTTP/1.1
Content-Type: application/json;odata=verbose
If-Match: W/"X'0000000000002715'"

{"Name": "User 3_"}
--changeset--
--batch-- 
```

每个部分都包含自己的 HTTP 标头和正文。响应格式相同，带有自己的 http 响应代码。如何在 actionscript 中处理多个 HTTP 请求？

# android - 无法从默认的 Facebook 应用程序或浏览器查看应用程序请求帖子

> ID：12282127
> 
> 赞同：-1
> 
> 时间：2012-09-05T13:05:47.170
> 
> 标签：android, facebook, facebook-graph-api, facebook-app-requests

我正在将应用请求发布到朋友的墙上。它工作正常。它在 PC 浏览器上显示得很好。见下图来自PC：

![在此处输入图像描述](../Images/a1dcd55c7467c1cdf37627f53fe91691.png)

现在，虽然我要从 Android 设备上看到同样的东西，但它没有显示正确的帖子。我看不到描述和它下面的一些文本。

见下图来自手机：

![在此处输入图像描述](../Images/03f2778c9c035b9d25ee9a91e9f5984e.png)

它出什么问题了 ？

我的代码有这个问题吗？如果是，那么为什么我只能从 PC 上看到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:43:41.110

> 我正在将应用请求发布到朋友的墙上。

首先，这并不是真正意义上的 FB API 的“应用程序请求”；看起来您只是发布了一个指向应用程序画布页面的*链接。*

> 现在，虽然我要从 Android 设备上看到同样的东西，但它没有显示正确的帖子。我看不到描述和它下面的一些文本。

由于通过移动设备访问 Facebook 时画布/页面选项卡应用程序**不可用**，因此 Facebook 不会向浏览移动版本的用户显示任何指向画布/页面选项卡的链接。

# tfs - TFS 2010：滚动 CI 构建

> ID：12282130
> 
> 赞同：0
> 
> 时间：2012-09-05T13:06:16.383
> 
> 标签：tfs, msbuild, continuous-integration

我一直在网上寻找改进构建时间的方法（目前约为 30-40 分钟，具体取决于哪个构建代理获得任务），我见过的一个常见主题是使用 CI 构建。

我理解这背后的逻辑，它会减少每次构建所花费的时间是有道理的。然而，我们的问题是，在每次签入时构建都是对我们资源的毫无意义的使用，因为在我们的开发分支中，我们只保留最新的成功构建。这意味着如果有 2 人在短时间内签到，那么最后签到的人将是保留构建的人。

正是这个原因（以及磁盘空间限制），我们改为使用滚动构建，因此我们最多每 45 分钟构建一次开发分支（显然我们可以手动触发 otp 上的构建）。

我想知道（并且无法在任何地方找到）是否有一种结合滚动构建和持续集成的方法。因此，每 45 分钟只构建一次，但只获取和构建已更改的文件。

我什至不确定这是否可能，如果没有，那么我会考虑其他方式，但这似乎应该是可能的。

# mongodb - mongodb - 子文档 id 值

> ID：12282133
> 
> 赞同：0
> 
> 时间：2012-09-05T13:06:28.220
> 
> 标签：mongodb, mongodb-java, mongodb-query

我有一个收藏。

```
look
 { "_id" : 13.0 , "tenantref" : { "$id" : 3.0}} 
```

我需要使用 java 检索 id 3.0 的值。我收到空指针异常。

```
 BasicDBObject field = new BasicDBObject();
    BasicDBObject field = new BasicDBObject();
    field.put("tenantref.$id", 1);

    DBCursor cursor = mongo.getDB("number").getCollection("testthree").find(query,field);   

    while (cursor.hasNext()) 
    {       
    System.out.println(cursor.next().get("tenantref.$id"));
    } 
```

我收到空指针异常。我需要如何获得价值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:13:34.667

```
cursor.next().get("tenantref.$id")); 
```

BasicDBObject 的 get() 函数不支持点语法。您必须手动遍历对象层次结构。尝试

```
((DBObject)cursor.next().get("tenantref")).get("$id"); 
```

# c++ - c++中的左派堆实现

> ID：12282139
> 
> 赞同：-2
> 
> 时间：2012-09-05T13:07:05.710
> 
> 标签：c++, leftist-tree

下午好，我正在尝试实现左派堆，这是我的头文件和头文件的源文件

```
#include<iostream>
template<class comparable>
class leftistheap;

template<class comparable>
class leftistnode
{
    comparable element;
    leftistnode *left;
    leftistnode *right;
    int  npl;
    leftistnode(const comparable  &theelement,leftistnode *lt=NULL,leftistnode *rt=NULL,int np=0):element(thelement),left(lt),right(rt),npl(np){}
    friend class leftistheap<comparable>;
    };
template<class comparable>
class leftistheap
{
public:
    leftistheap();
    leftistheap (const leftistheap &rhs);
    ~leftistheap();
    bool isempthy()const ;
    bool isfull() const;
    const comparable &findmin() const;
    void insert(const comparable &x);
    void deletemin();
    void deletemin(comparable &minitem);
    void makeempthy();
    void merge(leftistheap &rhs);

    const leftistheap & operator=(const leftistheap &rhs);
private:
    leftistnode<comparable>*root;
    leftistnode<comparable>*merge(leftistnode<comparable>*h1,leftistnode<comparable>*h2)const;
     leftistnode<comparable> * merge1( leftistnode<comparable> *h1,
                                              leftistnode<comparable> *h2 ) const;
            void swapchildren( leftistnode<comparable> * t ) const;
            void reclaimmemory( leftistnode<comparable> * t ) const;
            leftistnode<comparable> * clone( leftistnode<comparable> *t ) const;
        }; 
```

和源文件

```
#include<iostream>
#include "leftist.h"
using namespace std;
template<class comparable>
leftistheap<comparable>::leftistheap()
{
    root=NULL;
}
template<class comparable>
leftistheap<comparable>::leftistheap(const leftistheap<comparable>&rhs)
{
    root=NULL;
    *this=rhs;
}
template<class comparable>
leftistheap<comparable>::~leftistheap()
{
    makeempthy();
}
template<class comparable>
void leftistheap<comparable>::merge(leftistheap &rhs)
{
    if(this==&rhs)
         return;
    root=merge(root,rhs.root);
    rhs.root=NULL;

}
template<class comparable>
leftistnode<comparable>*leftistheap<comparable>::merge(leftistnode <comparable>*h1,leftistnode<comparable>*h2)const
{

    if(h1==NULL)
         return h2;
    if(h2==NULL)
         return h1;
    if(h1->element<h2->element)
        return merge1(h1,h2);
    else
        return merge1(h2,h1);

}

template<class comparable>
leftistnode<comparable>*leftistheap<comparable>::merge1(leftistnode<comparable>*h1,leftistnode<comparable>*h2)const
{

    if(h1->left==NULL)
        h1->left=h2;
    else
    {

        h1->right=merge(h1->right,h2);
        if(h1->left->npl<h1->right->npl)
            swapchildren(h1);
        h1->npl=h1->right->npl+1;

    }
     return h1;

}
template<class comparable>
void leftistheap<comparable>::swapchildren(leftistnode<comparable>*t)const
{
    leftistnode<comparable> *temp=t->left;
    t->left=t->right;
    t->right=emp;

}
template<class comparable>
void leftistheap<comparable>::insert(const comparable &x)
{
    root=merge(new leftistnode<comparable>(x),root);

}
template<class comparable>
const comparable &leftistheap<comparable>::findmin()const
    {
         if(isempty())
             throw Underflow();
    return root->element;

}
template<class comparable>
void leftistheap<comparable>::deletemin()
{
    if(isempty())
         throw Underflow();
    leftistnode<comparable>*oldroot=root;
    root=merge(root->left,root->right);
    delete oldroot;

}
template<class comparable>
void leftistheap<comparable>::deletemin(comparable & minitem)
{
    minitem=findmin();
    deletemin();

}
template<class comparable>
bool leftistheap<comparable>::isempthy() const
{

return root=NULL;
}
template<class comparable>
bool leftistheap<comparable>::isfull( ) const
        {
            return false;
        }

template <class comparable>
void leftistheap<comparable>::makeempthy()
        {
            reclaimmemory( root );
            root = NULL;
        }
        template<class comparable>
        const leftistheap<comparable>& leftistheap<comparable >::operator=(const leftistheap<comparable>& rhs)
        {
            if(this != &rhs)
            {
            makeempthy();
            root=clone(rhs.root);

            }
            return *this;
        }
        template<class comparable>
        void leftistheap<comparable>::reclaimmemory(leftistnode<comparable>*t) const
        {
            if(t!=NULL)
            {
                reclaimmemory(t->left);
                reclaimmemory(t->right);
                 delete t;

            }

        }
        template<class comparable>
        leftistnode<comparable>*leftistheap<comparable>::clone(leftistnode<comparable> *t)const
        {

            if(t==NULL)
                 return NULL;
            else
                return new leftistnode<comparable>( t->element, clone( t->left ),
                                              clone( t->right ), t->npl );
        }

int main()
{
    int numitems=100;
    leftistheap<int>h;
    leftistheap<int>h1;
    leftistheap<int>h2;
    int i=37;
    for(i=37;i!=0;i=(i+37)%numitems)
        if(i%2==0)
            h1.insert(i);
        else
            h.insert(i);
    h.merge(h1);
    h2=h;
     for( i = 1; i < numitems; i++ )
            {
                int x;
                h2.deletemin( x );
                if( x != i )
                    cout << "Oops! " << i << endl;
            }

            if (! h1.isempthy( ) )
                cout << "Oops! h1 should have been empty!" << endl;

    return 0;
} 
```

但我收到这些错误，请帮助我为什么会出现这些错误？我已将函数声明为 const，但我没有修改它，所以有什么问题？我只是想定义这个函数，这就是我不会做的做，同样的问题也与root有关，为什么编译器说，我正在尝试更改root的值？isempthy（）函数只是检查是否（root == NULL），但它不会改变它的值，所以我真的困惑，如果我删除 const 关键字，我的代码会编译吗？它不会改变代码的主要行为吗？我是新来的，很抱歉发布这么大的代码，但为了使代码更清晰，我将头文件和源文件一起发布为了简化您的任务，请帮助我，我很高兴有这么好的网站。如果您的错误有帮助，我会很高兴：

```
2010\projects\leftist_heap\leftist_heap\leftist_heap.cpp(115): error C3490: 'root' cannot be modified because it is being accessed through a const object
1>          2010\projects\leftist_heap\leftist_heap\leftist_heap.cpp(112) : while compiling class template member function 'bool leftistheap<comparable>::isempthy(void) const'
1>          with
1>          [
1>              comparable=int
1>          ]
1>          2010\projects\leftist_heap\leftist_heap\leftist_heap.cpp(169) : see reference to class template instantiation 'leftistheap<comparable>' being compiled
1>          with
1>          [
1>              comparable=int
1>          ]
1>2010\projects\leftist_heap\leftist_heap\leftist_heap.cpp(115): warning C4800: 'leftistnode<comparable> *const ' : forcing value to bool 'true' or 'false' (performance warning)
1>          with
1>          [
1>              comparable=int
1>          ]
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:11:59.560

将成员函数的实现更改`isempty`为（逻辑是检查树是否为空）：

```
template<class comparable>
bool leftistheap<comparable>::isempthy() const
{
return root==NULL;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T13:11:12.907

```
template<class comparable>
bool leftistheap<comparable>::isempthy() const
{

return root=NULL;
} 
```

这是你的问题 - 方法之后的 const 意味着它不会修改对象的状态，但它会通过更改 root 的值来实现。

# android - 活动管理器错误

> ID：12282147
> 
> 赞同：-2
> 
> 时间：2012-09-05T13:07:24.220
> 
> 标签：android

运行应用程序时出现此错误：

```
[2012-09-05 15:04:51 - ElarabyGroup] ActivityManager: Starting: Intent { act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] cmp=com.example.elarabygroup/.ElarabyGroup }
[2012-09-05 15:04:51 - ElarabyGroup] ActivityManager: Warning: Activity not started, its current task has been brought to the front 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:10:49.553

这表示您要运行的活动已经在屏幕上运行....

“Activity没有启动，它的当前任务已经被带到了最前面”

所以已经运行的活动被带到了前面！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:16:21.060

这意味着 Eclipse 没有在您的项目中发现需要更新设备上的应用程序的更改。相反，它只是将当前实例带到了前面。

每当您编辑您的应用程序并再次调试它时，eclipse 将终止您的应用程序的当前进程，重新安装该应用程序，然后启动您的主要活动。但是，如果 eclipse 认为您所做的更改没有效果，或者不知道更改（例如当您通过文件资源管理器将文件添加到 assets 文件夹而不是拖放到 eclipse 中时），它将带您的应用程序当前进程进入前台而不是杀死它以节省资源。

您可以通过进入 java 源文件、添加空格、删除空格和编译来告诉 eclipse 发生了变化。或者您可以在您的设备上卸载该应用程序，但这会删除其数据。有一种使用 adb 卸载的方法，它不会删除数据，但我不记得它是什么。

您还可以使用`Project -> Build Clean`从头开始重建项目并在设备上重新安装。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:29:00.317

您的应用程序正在模拟器上运行，并且您尝试再次运行相同的应用程序，而无需更改您得到此的代码。只需按下主页按钮并运行您的应用程序

# mysql - 无法注册新数据库

> ID：12282150
> 
> 赞同：3
> 
> 时间：2012-09-05T13:07:38.347
> 
> 标签：mysql, sql, hibernate, jakarta-ee, netbeans-7.1

我正在使用 netbeans 7.1，并且我在服务器上有一个数据库（不在我的计算机上）。我尝试将其注册到 netbeans 以用于我的应用程序目的。但是当我尝试注册数据库时，出现以下错误：

> 无法使用 com.mysql.jdbc.Driver 建立与 jdbc:mysql://69.144.150.5:3366/DCQ 的连接 (Communications link failure 最后一次成功发送到服务器的数据包是 0 毫秒前。驱动程序没有收到任何数据包来自服务器。）

请帮我摆脱它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-11T18:29:18.157

我正在寻找 JDBC 连接字符串。mysql 的默认端口是 3306。字符串应该是`jdbc:mysql://69.144.150.5:3306/DCQ`?

# salesforce - Salesforce CRM 的缺点

> ID：12282151
> 
> 赞同：-4
> 
> 时间：2012-09-05T13:07:41.950
> 
> 标签：salesforce, crm

> **可能的重复：**
> [Force.com 平台的缺点](https://stackoverflow.com/questions/1664503/disadvantages-of-the-force-com-platform)

与市场上可用的其他 CRM 系统相比，Salesforce CRM 的缺点是什么？在易用性、成本、与其他系统的集成等方面。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:11:01.153

Salesforce.com 的主要缺点包括：

*   过于简单的用户界面，很快就会被有经验的用户所超越。
*   大量的屏幕刷新和上下滚动；在多个屏幕之间转换以处理交易可能会带来乏味的体验。
*   营销管理功能极为有限。SFDC 指向为此目的的合作伙伴应用程序。这涉及额外的成本和供应商管理。
*   自定义工具包使用起来可能很麻烦，即使对于许多经验丰富的管理员来说也是如此。
*   如果没有大量的管理工作，仪表板可能无法反映特定用户的应用程序安全性。
*   标准合同中没有提供服务水平协议。
*   数据中心的可靠性受到质疑，一些重大的服务中断已被广泛宣传。

与 Microsoft Dynamics 相比

*   更贵
*   不是高度可配置的
*   仅在 SaaS 部署中可用

# android - Vuforia + 游戏套件 + 搅拌机

> ID：12282156
> 
> 赞同：2
> 
> 时间：2012-09-05T13:07:50.847
> 
> 标签：android, augmented-reality, gamekit

[https://github.com/airgames/vuforia-gamekit-integration](https://github.com/airgames/vuforia-gamekit-integration) 你能告诉我如何使用这些资源吗？

我想加载一个 3d 模型（例如，从搅拌机）并在检测到图像目标时显示它。我尝试使用这些资源，但我不明白如何`libogrekit.so`在`imageTargets`示例中使用，我可以调用`System.loadLibrary("ogrekit")`，`ImageTargets.java`但我如何以搅拌机格式加载 3d 模型？默认示例中的茶壶是在 cpp 代码中加载的。

# iphone - 部署到设备 (iPod Touch) 时应用程序崩溃，从设备打开有效

> ID：12282159
> 
> 赞同：2
> 
> 时间：2012-09-05T13:07:57.363
> 
> 标签：iphone, xcode, deployment, crash, ipod-touch

我刚刚购买了 iOS 开发程序，当我尝试将我的应用程序部署到设备时，它崩溃了。如果我在后台关闭应用程序并从设备打开它，触摸图标，应用程序可以完美运行而不会崩溃。

该设备是**iPod Touch 4G**，运行**iOS 5.0.1**。我的 xCode 版本是 4.3。

在管理器上，我可以找到崩溃日志，但在 xCode 控制台上没有日志。

**崩溃日志：**

```
Exception Type:  00000020
Exception Codes: 0xc00010ff
Highlighted Thread:  0

Application Specific Information:
Topmost application

Thermal Level:       16
Thermal Sensors:     11336 29078 5149 3419 3437

Thread 0 name:  Dispatch queue: com.apple.main-thread
Thread 0:
0   libsystem_kernel.dylib          0x35782010 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35782206 mach_msg + 50
2   AppSupport                      0x360d68c4 CPDMTwoWayMessage + 140
3   AppSupport                      0x360d52f0 -[CPDistributedMessagingCenter _sendMessage:userInfoData:oolKey:oolData:makeServer:receiveReply:nonBlocking:error:] + 408
4   AppSupport                      0x360d59a6 -[CPDistributedMessagingCenter _sendMessage:userInfo:receiveReply:error:toTarget:selector:context:nonBlocking:] + 870
5   AppSupport                      0x360d3cfc -[CPDistributedMessagingCenter _sendMessage:userInfo:receiveReply:error:toTarget:selector:context:] + 56
6   AppSupport                      0x360d3b8a -[CPDistributedMessagingCenter sendMessageAndReceiveReplyName:userInfo:] + 42
7   libstatusbar.dylib              0x01997c1c 0x1995000 + 11292
8   libstatusbar.dylib              0x01997da8 0x1995000 + 11688
9   libstatusbar.dylib              0x01997d88 0x1995000 + 11656
10  CoreFoundation                  0x33c337f8 __CFNotificationCenterAddObserver_block_invoke_0 + 116
11  CoreFoundation                  0x33c33904 ____CFXNotificationPostToken_block_invoke_0 + 124
12  CoreFoundation                  0x33c3bb2a __CFRUNLOOP_IS_CALLING_OUT_TO_A_BLOCK__ + 6
13  CoreFoundation                  0x33c3b158 __CFRunLoopDoBlocks + 152
14  CoreFoundation                  0x33c3a37a __CFRunLoopRun + 1426
15  CoreFoundation                  0x33bbd4d6 CFRunLoopRunSpecific + 294
16  CoreFoundation                  0x33bbd39e CFRunLoopRunInMode + 98
17  GraphicsServices                0x3832ffc6 GSEventRunModal + 150
18  UIKit                           0x3162073c UIApplicationMain + 1084
19  iTrainAlarm                     0x000ffffc main (main.m:16)
20  iTrainAlarm                     0x000fffa0 start + 32

Thread 1 name:  Dispatch queue: com.apple.libdispatch-manager
Thread 1:
0   libsystem_kernel.dylib          0x357823b4 kevent + 24
1   libdispatch.dylib               0x37fd3e78 _dispatch_mgr_invoke + 708
2   libdispatch.dylib               0x37fd3b96 _dispatch_mgr_thread + 30

Thread 2 name:  com.apple.NSURLConnectionLoader
Thread 2:
0   libsystem_kernel.dylib          0x35782010 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35782206 mach_msg + 50
2   CoreFoundation                  0x33c3b41c __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x33c3a154 __CFRunLoopRun + 876
4   CoreFoundation                  0x33bbd4d6 CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x33bbd39e CFRunLoopRunInMode + 98
6   Foundation                      0x31455bc2 +[NSURLConnection(Loader) _resourceLoadLoop:] + 302
7   Foundation                      0x31455a8a -[NSThread main] + 66
8   Foundation                      0x314e959a __NSThread__main__ + 1042
9   libsystem_c.dylib               0x37664c16 _pthread_start + 314
10  libsystem_c.dylib               0x37664ad0 thread_start + 0

Thread 3 name:  com.apple.CFSocket.private
Thread 3:
0   libsystem_kernel.dylib          0x35792570 __select + 20
1   CoreFoundation                  0x33c3f66a __CFSocketManager + 726
2   libsystem_c.dylib               0x37664c16 _pthread_start + 314
3   libsystem_c.dylib               0x37664ad0 thread_start + 0

Thread 4 name:  WebThread
Thread 4:
0   libsystem_kernel.dylib          0x35782010 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35782206 mach_msg + 50
2   CoreFoundation                  0x33c3b41c __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x33c3a154 __CFRunLoopRun + 876
4   CoreFoundation                  0x33bbd4d6 CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x33bbd39e CFRunLoopRunInMode + 98
6   WebCore                         0x32ce5128 _ZL12RunWebThreadPv + 396
7   libsystem_c.dylib               0x37664c16 _pthread_start + 314
8   libsystem_c.dylib               0x37664ad0 thread_start + 0

Thread 5 name:  AQClient
Thread 5:
0   libsystem_kernel.dylib          0x35782010 mach_msg_trap + 20
1   libsystem_kernel.dylib          0x35782206 mach_msg + 50
2   CoreFoundation                  0x33c3b41c __CFRunLoopServiceMachPort + 120
3   CoreFoundation                  0x33c3a154 __CFRunLoopRun + 876
4   CoreFoundation                  0x33bbd4d6 CFRunLoopRunSpecific + 294
5   CoreFoundation                  0x33bbd39e CFRunLoopRunInMode + 98
6   AudioToolbox                    0x34e5b29c GenericRunLoopThread::Entry(void*) + 116
7   AudioToolbox                    0x34de3aac CAPThread::Entry(CAPThread*) + 208
8   libsystem_c.dylib               0x37664c16 _pthread_start + 314
9   libsystem_c.dylib               0x37664ad0 thread_start + 0

Thread 6:
0   libsystem_kernel.dylib          0x35792cd4 __workq_kernreturn + 8
1   libsystem_c.dylib               0x3765f30a _pthread_wqthread + 610
2   libsystem_c.dylib               0x3765f09c start_wqthread + 0

Unknown thread crashed with unknown flavor: 5, state_count: 1

Binary Images:
   0xfe000 -   0x112fff +iTrainAlarm armv7  <3d15feff81623b82b86d382e90513a57> /var/mobile/Applications/94C7EE7F-4F26-4D4D-A5B4-466E2FA9A0CE/iTrainAlarm.app/iTrainAlarm
  0x12e000 -   0x12efff +MobileSubstrate.dylib armv6  <b8a484a95b5d30c5ab59f25362558e7c> /Library/MobileSubstrate/MobileSubstrate.dylib
  0x164000 -   0x165fff +SubstrateLoader.dylib armv6  <885b4713fd433c3996edfc3552109041> /Library/Frameworks/CydiaSubstrate.framework/Libraries/SubstrateLoader.dylib
  0x1a8000 -   0x1a9fff +BBSettingsLib.dylib armv6  <8592ee55aef439daba71a579db106326> /Library/MobileSubstrate/DynamicLibraries/BBSettingsLib.dylib
  0x1ac000 -   0x1affff  libsubstrate.dylib armv6  <65a35eed390832b08134c3cedc6eafa2> /usr/lib/libsubstrate.dylib
  0x300000 -   0x392fff +PhotoAlbumsPlus.dylib armv6  <281c09d89783d81602aa866930e3291d> /Library/MobileSubstrate/DynamicLibraries/PhotoAlbumsPlus.dylib
 0x196d000 -  0x197afff +iap.dylib arm  <b7c8c4c2ee0382813085fffd6c96239f> /Library/MobileSubstrate/DynamicLibraries/iap.dylib
 0x1995000 -  0x199bfff +libstatusbar.dylib armv6  <fe21097b2cb83481a70c9ab877af55e3> /Library/MobileSubstrate/DynamicLibraries/libstatusbar.dylib
0x2fefd000 - 0x2ff1efff  dyld armv7  <be7c0b491a943054ad12eb5060f1da06> /usr/lib/dyld
0x30748000 - 0x30748fff  libunwind.dylib armv7  <d21222aad8c93d6c9580f9bf47071946> /usr/lib/system/libunwind.dylib
0x30752000 - 0x30818fff  libobjc.A.dylib armv7  <ebbb32df194b331e9b3dc14e40f46833> /usr/lib/libobjc.A.dylib
0x30830000 - 0x3091efff  libiconv.2.dylib armv7  <6e858938edb93162ba8cf25702f08b16> /usr/lib/libiconv.2.dylib
0x30d24000 - 0x30d30fff  libCRFSuite.dylib armv7  <ea460e3f1ac338a9885d5752864dbffb> /usr/lib/libCRFSuite.dylib
0x30d31000 - 0x30e8efff  libmecabra.dylib armv7  <170c82a3c716372abe7ae0aae96d4805> /usr/lib/libmecabra.dylib
0x30ece000 - 0x30f03fff  SystemConfiguration armv7  <753be0ebdcb13b24b1a4adcdc94d6bd9> /System/Library/Frameworks/SystemConfiguration.framework/SystemConfiguration
0x30f04000 - 0x30f40fff  IMFoundation armv7  <d93ec1a0f854355da1e4f8aca176e749> /System/Library/PrivateFrameworks/IMCore.framework/Frameworks/IMFoundation.framework/IMFoundation
0x30f41000 - 0x30f4efff  libbsm.0.dylib armv7  <a6414b0a5fd53df58c4f0b2f8878f81f> /usr/lib/libbsm.0.dylib
0x30f4f000 - 0x30f60fff  DataAccessExpress armv7  <6bc443b0f87e338698cac9e5a96e8f8f> /System/Library/PrivateFrameworks/DataAccessExpress.framework/DataAccessExpress
0x30f78000 - 0x30f7bfff  CoreTime armv7  <e2f02260f2a63359b9a0a47c69f59c9e> /System/Library/PrivateFrameworks/CoreTime.framework/CoreTime
0x30f7c000 - 0x30f7ffff  CaptiveNetwork armv7  <c3a5b1659eb0302eb205498ffacb09f1> /System/Library/PrivateFrameworks/CaptiveNetwork.framework/CaptiveNetwork
0x3102e000 - 0x3102ffff  libdnsinfo.dylib armv7  <dbd1e77a4beb309d8f160d927d442467> /usr/lib/system/libdnsinfo.dylib
0x31038000 - 0x312f9fff  libLAPACK.dylib armv7  <5490a87fe5153771b9c67940292842ba> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libLAPACK.dylib
0x31361000 - 0x31366fff  libcopyfile.dylib armv7  <9072462f28af3665875b3ecaba002c00> /usr/lib/system/libcopyfile.dylib
0x31420000 - 0x3143ffff  libSystem.B.dylib armv7  <31a0ffbb18bf3a28b46fd286733e7d9f> /usr/lib/libSystem.B.dylib
0x31445000 - 0x315c3fff  Foundation armv7  <ce466f428d953caaac6641d186665809> /System/Library/Frameworks/Foundation.framework/Foundation
0x315ef000 - 0x31a88fff  UIKit armv7  <97b527cd6fba35c6bb39263e0f362223> /System/Library/Frameworks/UIKit.framework/UIKit
0x31a96000 - 0x31adbfff  GeoServices armv7  <6c9eb6372f723a57852cfc9ed7b78e31> /System/Library/PrivateFrameworks/GeoServices.framework/GeoServices
0x31b0c000 - 0x31b3ffff  Preferences armv7  <caa5c45e069a322480f19349edb59696> /System/Library/PrivateFrameworks/Preferences.framework/Preferences
0x31b40000 - 0x31b5dfff  libsystem_info.dylib armv7  <1e36ab94661c372bab5a801d68c79353> /usr/lib/system/libsystem_info.dylib
0x31ba0000 - 0x31ba4fff  Marco armv7  <526949ce76323de09ee69812383c2953> /System/Library/PrivateFrameworks/Marco.framework/Marco
0x31ba5000 - 0x31bf6fff  CoreText armv7  <23150093d39b393e9bc5f8230176df47> /System/Library/Frameworks/CoreText.framework/CoreText
0x31bf7000 - 0x31ca4fff  libxml2.2.dylib armv7  <78462273eb5b38d1a0873b02f0e35e23> /usr/lib/libxml2.2.dylib
0x31cf7000 - 0x31cf7fff  libCVMSPluginSupport.dylib armv7  <85582e1094633fccb52b50ca13c5a5d0> /System/Library/Frameworks/OpenGLES.framework/libCVMSPluginSupport.dylib
0x31cf8000 - 0x31d41fff  CoreMedia armv7  <d585cf4e0cfa34fa8beaa43b06a4bcd7> /System/Library/Frameworks/CoreMedia.framework/CoreMedia
0x31d63000 - 0x31d9efff  libCGFreetype.A.dylib armv7  <753daf497ca736739a30126661a522f1> /System/Library/Frameworks/CoreGraphics.framework/Resources/libCGFreetype.A.dylib
0x31da2000 - 0x31dc5fff  PrintKit armv7  <279fb51deec3377ab9f820af2da4d915> /System/Library/PrivateFrameworks/PrintKit.framework/PrintKit
0x31dc6000 - 0x31e70fff  libBLAS.dylib armv7  <9aabff01422f3cb8960f93d11d2b6de1> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libBLAS.dylib
0x31ec8000 - 0x31ecdfff  CrashReporterSupport armv7  <c3062554536438f9874c88363df7f60b> /System/Library/PrivateFrameworks/CrashReporterSupport.framework/CrashReporterSupport
0x31ee0000 - 0x31ee4fff  IOMobileFramebuffer armv7  <c2e6bd6dafde3097b47bc255a8c871ef> /System/Library/PrivateFrameworks/IOMobileFramebuffer.framework/IOMobileFramebuffer
0x31eed000 - 0x31ef0fff  libcompiler_rt.dylib armv7  <414332f9a55238bab2cbec323e0fc8da> /usr/lib/system/libcompiler_rt.dylib
0x31ef1000 - 0x32089fff  CoreData armv7  <dd6d139d99e5309f9df33f7b6a044b16> /System/Library/Frameworks/CoreData.framework/CoreData
0x320aa000 - 0x320b9fff  GenerationalStorage armv7  <c581bffc87013530b3c2d017142395e6> /System/Library/PrivateFrameworks/GenerationalStorage.framework/GenerationalStorage
0x32262000 - 0x327a6fff  FaceCoreLight armv7  <cc2edb3645d2390dbca5471d35f1bf6e> /System/Library/PrivateFrameworks/FaceCoreLight.framework/FaceCoreLight
0x327a7000 - 0x327a8fff  DataMigration armv7  <d067b65a904a3f438b5d9e13b208b117> /System/Library/PrivateFrameworks/DataMigration.framework/DataMigration
0x32839000 - 0x3297efff  CoreGraphics armv7  <641fb6e558f239588a8bd05dbefff99a> /System/Library/Frameworks/CoreGraphics.framework/CoreGraphics
0x32980000 - 0x32984fff  libcache.dylib armv7  <4511f0ec5b713636aaade7245a12553c> /usr/lib/system/libcache.dylib
0x3299b000 - 0x32b57fff  ImageIO armv7  <df300f66a317352e92354a8a48af3453> /System/Library/Frameworks/ImageIO.framework/ImageIO
0x32bf3000 - 0x32bfffff  CoreVideo armv7  <474c89eb09fe3464851a20d76052341b> /System/Library/Frameworks/CoreVideo.framework/CoreVideo
0x32c00000 - 0x32c01fff  CoreSurface armv7  <fcb6a869daef3a3abc4300c28b218e9f> /System/Library/PrivateFrameworks/CoreSurface.framework/CoreSurface
0x32c3d000 - 0x333f4fff  WebCore armv7  <7137e0ea008f3a3e8ae9e57f96d34d1d> /System/Library/PrivateFrameworks/WebCore.framework/WebCore
0x33453000 - 0x3359cfff  libicucore.A.dylib armv7  <1bc960f75d633190a09b093209a9f0c5> /usr/lib/libicucore.A.dylib
0x3360d000 - 0x33644fff  Security armv7  <b89c9f6373f037f2a4801558f97b9a95> /System/Library/Frameworks/Security.framework/Security
0x33645000 - 0x33690fff  CoreLocation armv7  <e959d4dd596b31eeaa49c8c0156b1e12> /System/Library/Frameworks/CoreLocation.framework/CoreLocation
0x337d5000 - 0x337ebfff  DictionaryServices armv7  <5bbab664f97932a79a1566fda3a4383e> /System/Library/PrivateFrameworks/DictionaryServices.framework/DictionaryServices
0x338ae000 - 0x338b4fff  liblockdown.dylib armv7  <bfaf7fb16e5a3b2ea07c47b8b2f2b64e> /usr/lib/liblockdown.dylib
0x338b5000 - 0x339d9fff  JavaScriptCore armv7  <24ff2747b3973aecb9c37960eba5ff4d> /System/Library/PrivateFrameworks/JavaScriptCore.framework/JavaScriptCore
0x339fb000 - 0x33a01fff  MobileKeyBag armv7  <f5633749a1c83058a28cd7d0b488e19f> /System/Library/PrivateFrameworks/MobileKeyBag.framework/MobileKeyBag
0x33b59000 - 0x33b59fff  Accelerate armv7  <a62771c826753815a5cae96eaa60ffd7> /System/Library/Frameworks/Accelerate.framework/Accelerate
0x33b63000 - 0x33badfff  CoreTelephony armv7  <1f4cacb552533c948122cb180f4192b3> /System/Library/Frameworks/CoreTelephony.framework/CoreTelephony
0x33bae000 - 0x33cc5fff  CoreFoundation armv7  <de9eefc6109735369cfd8f3de9895da0> /System/Library/Frameworks/CoreFoundation.framework/CoreFoundation
0x33db8000 - 0x33e8ffff  CFNetwork armv7  <6fbc9f187eaa30009780e70288c9f289> /System/Library/Frameworks/CFNetwork.framework/CFNetwork
0x33ea0000 - 0x33eacfff  libz.1.dylib armv7  <eef915ed9b2c3433b03fd9030957b945> /usr/lib/libz.1.dylib
0x3412f000 - 0x3412ffff  vecLib armv7  <106ef8294b0d3c2d89e9230527846227> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/vecLib
0x341ff000 - 0x34248fff  libc++.1.dylib armv7  <ad15503487243836b7c296f3439ba0c1> /usr/lib/libc++.1.dylib
0x3424a000 - 0x3428dfff  libcommonCrypto.dylib armv7  <be9a231cfe6e3ae387abb444a098bce9> /usr/lib/system/libcommonCrypto.dylib
0x343cd000 - 0x343cdfff  libkeymgr.dylib armv7  <791bb8b832943b2392c0c35228f52e09> /usr/lib/system/libkeymgr.dylib
0x343db000 - 0x343e3fff  MobileWiFi armv7  <f07cb8d6dadf36919bae8ef6e5ce1749> /System/Library/PrivateFrameworks/MobileWiFi.framework/MobileWiFi
0x34544000 - 0x34555fff  libxpc.dylib armv7  <7d49e385ee5d3e7eb08d06525abd6435> /usr/lib/system/libxpc.dylib
0x34556000 - 0x3458ffff  VideoToolbox armv7  <49f9f09f23f7396b94a29bb1280759fe> /System/Library/PrivateFrameworks/VideoToolbox.framework/VideoToolbox
0x345b0000 - 0x3460bfff  StoreServices armv7  <1463a9f90fbd3d349544cf016e1ddd46> /System/Library/PrivateFrameworks/StoreServices.framework/StoreServices
0x34c5f000 - 0x34c6afff  AccountSettings armv7  <090bb6a4f97433089b5cabc6a40c619a> /System/Library/PrivateFrameworks/AccountSettings.framework/AccountSettings
0x34dbc000 - 0x34de1fff  OpenCL armv7  <e1d5bfcdb59934b0923b9307c75e7457> /System/Library/PrivateFrameworks/OpenCL.framework/OpenCL
0x34de2000 - 0x34fbffff  AudioToolbox armv7  <da4f78fd20fb3b42b1a8be4f383d9c12> /System/Library/Frameworks/AudioToolbox.framework/AudioToolbox
0x34fc0000 - 0x34fc6fff  libnotify.dylib armv7  <1e374857ac68370095ddbafe94f021a1> /usr/lib/system/libnotify.dylib
0x34fc7000 - 0x35018fff  libstdc++.6.dylib armv7  <dc2061145c1a3307829d4f3bfc547c1a> /usr/lib/libstdc++.6.dylib
0x35019000 - 0x3501ffff  liblaunch.dylib armv7  <09f21c3e774c30b1aab1b56c2d6efbc3> /usr/lib/system/liblaunch.dylib
0x35020000 - 0x3506afff  libvDSP.dylib armv7  <d8489a4ce77933abac52394c43ff5513> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvDSP.dylib
0x35158000 - 0x351bbfff  IMCore armv7  <c235020b86123e95820f7323916023aa> /System/Library/PrivateFrameworks/IMCore.framework/IMCore
0x352f8000 - 0x353e8fff  QuartzCore armv7  <ff595b1a042933249466e92433e1af6f> /System/Library/Frameworks/QuartzCore.framework/QuartzCore
0x3546a000 - 0x3546bfff  libsystem_blocks.dylib armv7  <4bb9797771d037879bec814fe750d86d> /usr/lib/system/libsystem_blocks.dylib
0x3559a000 - 0x355a3fff  libMobileGestalt.dylib armv7  <bf8d7c30f11a393a8adf4c8277e65aa3> /usr/lib/libMobileGestalt.dylib
0x35781000 - 0x35797fff  libsystem_kernel.dylib armv7  <afd3cb06e20336dca2e5a6e11d080504> /usr/lib/system/libsystem_kernel.dylib
0x35870000 - 0x3587ffff  SpringBoardServices armv7  <79f1564c1b23303eb3b7db67f9375228> /System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices
0x358a6000 - 0x358e3fff  FTServices armv7  <fc9e7d223d3f33898603cfba115f5094> /System/Library/PrivateFrameworks/FTServices.framework/FTServices
0x358e4000 - 0x35990fff  MediaControlSender armv7  <4c0982b21ecf35aead8e0bef55d842b0> /System/Library/PrivateFrameworks/MediaControlSender.framework/MediaControlSender
0x35991000 - 0x35993fff  libCoreVMClient.dylib armv7  <6ddb7cf8a93830628787a5b83eea0f1d> /System/Library/Frameworks/OpenGLES.framework/libCoreVMClient.dylib
0x35994000 - 0x359aafff  VoiceServices armv7  <5bdff32282a33333b9c90582c854d82f> /System/Library/PrivateFrameworks/VoiceServices.framework/VoiceServices
0x359ab000 - 0x35a2efff  CoreMotion armv7  <f4365ff3974b3049b3f04b3f55a46ae6> /System/Library/Frameworks/CoreMotion.framework/CoreMotion
0x35a7f000 - 0x35a9ffff  libxslt.1.dylib armv7  <f37418b7e89137bba433677d61cd779d> /usr/lib/libxslt.1.dylib
0x35aca000 - 0x35ad9fff  OpenGLES armv7  <6d1afb451f50310895ec59864739e781> /System/Library/Frameworks/OpenGLES.framework/OpenGLES
0x35b89000 - 0x35b90fff  ProtocolBuffer armv7  <6ca7dca9370132a2a592356bf9f2170b> /System/Library/PrivateFrameworks/ProtocolBuffer.framework/ProtocolBuffer
0x35ba3000 - 0x35ba4fff  libsystem_sandbox.dylib armv7  <b8612b4ce18535aaa94f4b75c730e090> /usr/lib/system/libsystem_sandbox.dylib
0x35bd3000 - 0x35bd5fff  MobileInstallation armv7  <4ccf76f0e6cb3cd7b4e0087c2f284a1d> /System/Library/PrivateFrameworks/MobileInstallation.framework/MobileInstallation
0x35cbc000 - 0x35d3bfff  libsqlite3.dylib armv7  <af4718fee01734748c42f2214ab6883d> /usr/lib/libsqlite3.dylib
0x35d3e000 - 0x35d54fff  EAP8021X armv7  <16801802d86e3c479f3034034192faed> /System/Library/PrivateFrameworks/EAP8021X.framework/EAP8021X
0x35d79000 - 0x35fd3fff  MediaToolbox armv7  <ab91ec33f2b23606bd0443163beff710> /System/Library/PrivateFrameworks/MediaToolbox.framework/MediaToolbox
0x35fe3000 - 0x35fe7fff  libAccessibility.dylib armv7  <ee734c0e964934a887a66d170270b114> /usr/lib/libAccessibility.dylib
0x36078000 - 0x360c1fff  ManagedConfiguration armv7  <05711081dd883c58a844c5f9c251e8c9> /System/Library/PrivateFrameworks/ManagedConfiguration.framework/ManagedConfiguration
0x360c4000 - 0x36100fff  AppSupport armv7  <de0c2fbb95f8383db43acfb44e9c66fe> /System/Library/PrivateFrameworks/AppSupport.framework/AppSupport
0x3613e000 - 0x36142fff  AggregateDictionary armv7  <cfd957904957310381369729bfd9b2b0> /System/Library/PrivateFrameworks/AggregateDictionary.framework/AggregateDictionary
0x36157000 - 0x36157fff  libgcc_s.1.dylib armv7  <69d8dab7388b33d38b30708fd6b6a340> /usr/lib/libgcc_s.1.dylib
0x3619e000 - 0x361e2fff  MobileCoreServices armv7  <9a79a2d389ba35389a30782ed01c46dd> /System/Library/Frameworks/MobileCoreServices.framework/MobileCoreServices
0x36235000 - 0x3623bfff  MobileIcons armv7  <2f4c13053206306996726629b0b7eb01> /System/Library/PrivateFrameworks/MobileIcons.framework/MobileIcons
0x36283000 - 0x3634cfff  Celestial armv7  <c18e76311fc33016be930da83050b96d> /System/Library/PrivateFrameworks/Celestial.framework/Celestial
0x3639b000 - 0x3639bfff  liblangid.dylib armv7  <342170169bf232a0888912f5ef97112d> /usr/lib/liblangid.dylib
0x36a87000 - 0x36ab3fff  libtidy.A.dylib armv7  <f0eca72c10c537fa89b17fd97e003faf> /usr/lib/libtidy.A.dylib
0x36ab4000 - 0x36abefff  libvMisc.dylib armv7  <b93ee3136d1c3d44b1e513a56bb0f86c> /System/Library/Frameworks/Accelerate.framework/Frameworks/vecLib.framework/libvMisc.dylib
0x36ace000 - 0x36af1fff  Bom armv7  <0e6087f75a81345ea81751197ccb712c> /System/Library/PrivateFrameworks/Bom.framework/Bom
0x36d30000 - 0x36d70fff  libGLImage.dylib armv7  <9440420d838a382caa175399d74a5044> /System/Library/Frameworks/OpenGLES.framework/libGLImage.dylib
0x36db3000 - 0x36e8dfff  vImage armv7  <42a5e58ff1b9350cad90de36bd3ceb09> /System/Library/Frameworks/Accelerate.framework/Frameworks/vImage.framework/vImage
0x36e8e000 - 0x36f49fff  AVFoundation armv7  <c971a925b82934f8881283aabb2992f5> /System/Library/Frameworks/AVFoundation.framework/AVFoundation
0x36f99000 - 0x37069fff  WebKit armv7  <74661b1bf4613aafb827bfe0134ed92b> /System/Library/PrivateFrameworks/WebKit.framework/WebKit
0x370df000 - 0x370e9fff  libbz2.1.0.dylib armv7  <28583efb9f1b38e7ae83c667b07dbd08> /usr/lib/libbz2.1.0.dylib
0x370ea000 - 0x370eefff  libGFXShared.dylib armv7  <0a36fb9d60a43479943bafb2f81313b1> /System/Library/Frameworks/OpenGLES.framework/libGFXShared.dylib
0x370fc000 - 0x3716cfff  CoreImage armv7  <b1d0678497f43769840f173c0f9dce20> /System/Library/Frameworks/CoreImage.framework/CoreImage
0x371e4000 - 0x37221fff  IOKit armv7  <e5f727892ee034a4be04e6da608f413f> /System/Library/Frameworks/IOKit.framework/Versions/A/IOKit
0x373ba000 - 0x373bdfff  libmacho.dylib armv7  <3237bc9c109e3354bc4b38b957243f31> /usr/lib/system/libmacho.dylib
0x37655000 - 0x376e2fff  libsystem_c.dylib armv7  <1707c3cf3c5b3045af4bed38ff8420a6> /usr/lib/system/libsystem_c.dylib
0x37716000 - 0x3771afff  IOSurface armv7  <0f003f50b18e3dbf87607d819e0ac6b9> /System/Library/PrivateFrameworks/IOSurface.framework/IOSurface
0x37722000 - 0x3773bfff  libRIP.A.dylib armv7  <ad22ea5ee99a358691f9820e62c85058> /System/Library/Frameworks/CoreGraphics.framework/Resources/libRIP.A.dylib
0x3773d000 - 0x37753fff  libmis.dylib armv7  <fd046316dedc34dd81a6601ea3b1e8a6> /usr/lib/libmis.dylib
0x37754000 - 0x377cdfff  ProofReader armv7  <09d057676f6837cd9e7a735444b67e77> /System/Library/PrivateFrameworks/ProofReader.framework/ProofReader
0x37958000 - 0x3795dfff  libsystem_dnssd.dylib armv7  <4d8b38f1cb603f0d8af78c56c485f05a> /usr/lib/system/libsystem_dnssd.dylib
0x37991000 - 0x379a3fff  AssistantServices armv7  <e0385ea92a063c15ac0c952e89e020d5> /System/Library/PrivateFrameworks/AssistantServices.framework/AssistantServices
0x379a4000 - 0x379b8fff  PersistentConnection armv7  <81eb1b3e08cf3d7196313307ad60649d> /System/Library/PrivateFrameworks/PersistentConnection.framework/PersistentConnection
0x379c6000 - 0x379dbfff  libresolv.9.dylib armv7  <97d6ebbb53ae3e0480f51771c9665613> /usr/lib/libresolv.9.dylib
0x37a0a000 - 0x37d7bfff  TextInput armv7  <64d1227219b03c51ba4854ec2f79c335> /System/Library/PrivateFrameworks/TextInput.framework/TextInput
0x37e5f000 - 0x37e66fff  libc++abi.dylib armv7  <f769ce305c3033ee90e8c2ecc4846619> /usr/lib/libc++abi.dylib
0x37fc7000 - 0x37fddfff  libdispatch.dylib armv7  <defe319d1f4d3c1c8c4f18ebd96b396a> /usr/lib/system/libdispatch.dylib
0x37fe2000 - 0x37fe3fff  libremovefile.dylib armv7  <9c8cee9652453241ac1fc99eab05c40a> /usr/lib/system/libremovefile.dylib
0x381a1000 - 0x381fafff  IMAVCore armv7  <7bc289fcff2c38c7bb941c5e0bfb1178> /System/Library/PrivateFrameworks/IMAVCore.framework/IMAVCore
0x382cc000 - 0x382d3fff  AssetsLibraryServices armv7  <c0093954f6ee329aa6b4848215bcb8c0> /System/Library/PrivateFrameworks/AssetsLibraryServices.framework/AssetsLibraryServices
0x382d6000 - 0x3831ffff  AddressBook armv7  <0a858565acd03f28a1bc69a650b64a7b> /System/Library/Frameworks/AddressBook.framework/AddressBook
0x38320000 - 0x38321fff  libdyld.dylib armv7  <f1963e7ef64e39a58ec1e39ed7c74849> /usr/lib/system/libdyld.dylib
0x3832c000 - 0x38337fff  GraphicsServices armv7  <4ec745ffb2e039faab4b39a30268f707> /System/Library/PrivateFrameworks/GraphicsServices.framework/GraphicsServices
0x383e2000 - 0x38439fff  CoreAudio armv7  <2e4975a2156e328585f2a478e80704fc> /System/Library/Frameworks/CoreAudio.framework/CoreAudio
0x38466000 - 0x38469fff  libsystem_network.dylib armv7  <b18e0a845b1e317c8abcf6b5d06b29a0> /usr/lib/system/libsystem_network.dylib 
```

我不知道该怎么办，我没有找到类似的问题，除了[这个](https://stackoverflow.com/questions/7390124/ios-app-crashes-when-deployed-to-device)，他的答案对我没有帮助。

谢谢！

***编辑：***

这似乎只是 iPod Touch 的问题，因为我已经在运行 iOS 5.0.1 的 iPhone 4 上测试了该应用程序，并且运行良好。但是，我在 iPod Touch 上测试了其他应用程序，它们都有同样的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-30T08:17:14.603

好吧，我不知道问题发生一年后这值多少钱，但答案在崩溃日志的第二行。

```
Exception Codes: 0xc00010ff 
```

请注意，十六进制代码几乎说“冷静？” Apple 有一组[有趣](https://developer.apple.com/library/ios/technotes/tn2151/_index.html)的十六进制错误代码，您的特定代码表明您的设备在要求的温度范围之外运行。

尽管有更好的判断和可能的可能性，我认为你实际上有一个硬件错误。我只能推测，但很明显，插入您的设备（以部署新版本）要么使手机过热，要么使内部温度计跳闸。

我确定您已经有了，但仅供参考-解决此问题的唯一真正方法是修理您的设备或购买新设备。

# html - 手动进行小型大写字母以获得所需的外观而不是 font-variant: small-caps;

> ID：12282166
> 
> 赞同：4
> 
> 时间：2012-09-05T13:08:24.500
> 
> 标签：html, email, unicode, smallcaps

约束：
1\. 这是 HTML 时事通讯（没有 HTML5 或 JS）
2\. 字体系列是`{Lucida Sans, Lucida Grande, Lucida San Unicode, serif}`

我需要将现有的 PDF 时事通讯桅杆头（相当改进，但不是简短的）与文本而不是图像匹配（因为许多电子邮件客户端不会自动加载图像并且它是标头）

![标头 PDF](../Images/05b11377ad02cd20fb237a153447149d.png)

到目前为止我的代码（改编自[45royale 的名为 Classic 的](http://www.campaignmonitor.com/templates/all/)活动监视器的免费主题）是：

```
<h1 style="color: #fff; font: normal 33px Lucida Sans, Lucida Sans Unicode, Lucida Grande, sans-serif; margin: 0; padding: 0; line-height: 33px; letter-spacing: 16px; font-variant: small-caps;">Teeᴇᴇ</h1>
<p style="color: #dfa575; font: normal 11px Georgia, serif; margin: 0; padding: 0; line-height: 11px; letter-spacing: 2px">NEWSLETTER …&lt;/p> 
```

![结果](../Images/44a6af3172683117c1c122ed3dbc2225.png)

请注意，前两个“e”是小写字母，词干明显比“T”细，并且比 PDF 中的小写字母小得多。

后两个“E”是我在 Unicode 的语音部分找到的小型 Unicode 字符。它们具有相同的茎，但在高于基线的高度方面仍然有点太低。

`Lucida`编辑：我刚刚在手提箱融合中检查了 OS X 上的 3 个 Lucida Faces，并且在我正在查看的任何字体系列中都不存在完整字母的 Small Caps 。

包括“T”和“P”在内的所有字母似乎也比 PDF 版本厚，但这只是第二个问题。

有哪些手动选项可用。我在一个`<h1>`标签内，这意味着如果我在 'ERRA' 的 'T' 之后创建一个新标签来设置不同的字体大小，我会免费获得一个 LineFeed :-/

如何在同一行上设置多个字体大小，我应该只使用`<p>`标签和自定义类来设置 CSS 和`inline`字体大小吗？

谢谢阅读 ：-）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:58:48.177

您可以在同一行使用内联元素（如`<span></span>`. 所以在你的例子中......

```
<style>
h1 { color: #fff; font: normal 33px Lucida Sans, Lucida Sans Unicode, Lucida Grande, sans-serif; margin: 0; padding: 0; line-height: 33px; letter-spacing: 16px; }
h1 span { font-variant: small-caps; }
.newsletter { color: #dfa575; font: normal 11px Georgia, serif; margin: 0; padding: 0; line-height: 11px; letter-spacing: 2px }
</style>

<h1>Tee<span>ee</span>EE</h1>
<p class="newsletter">NEWSLETTER …&lt;/p> 
```

**编辑：**这是一个更新的片段，可能会有所帮助：

![哎呀！](../Images/5b69816d8aa179360e9c811ada72c820.png)

```
<style>
body { background:#658290 }
h1 { 
    color: #fff; 
    font: normal 33px Lucida Sans, Lucida Sans Unicode, Lucida Grande, sans-serif; 
    margin: 0; padding: 0; 
    line-height: 33px; letter-spacing: 16px; 
}
h1 span { font-variant: small-caps; letter-spacing:0.3em }
h1 span.upper { font-size:130%; }
</style>

<h1><span class="upper">ee</span><span class="lower">ee</span></h1> 
```

# java - 将序列化 java 对象保存到 Db 时出现问题

> ID：12282169
> 
> 赞同：0
> 
> 时间：2012-09-05T13:08:27.067
> 
> 标签：java, dom, serialization

我有可序列化的 Java 类配置。

我想创建一个包含字符串类型数据的配置实例，文档（org.w3c.dom.Document）并将其保存到 BLOB 类型的 Db 中。

但是当我要将它保存到数据库中时，它会抛出异常：

```
java.io.NotSerializableException: org.w3c.tidy.DOMElementImpl 
```

我的配置类是：

```
public class Configuration extends Tag implements Serializable{

    private Document doc = null ;
    private String checkpoint=null; 

} 
```

将配置对象保存到 DB 时，我使用了以下代码：

```
ByteArrayOutputStream bos = new ByteArrayOutputStream();
ObjectOutput out = new ObjectOutputStream(bos);   
out.writeObject(configuration);
byte[] confBytes = bos.toByteArray(); 
```

我首先将其转换为字节数组，然后保存。

谁能帮我摆脱这个问题..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:34:11.117

```
java.io.NotSerializableException: org.w3c.tidy.DOMElementImpl 
```

这就是说`DOMElementImpl`该类未标记为`Serializable`。即使你的`Configuration`类实现`Serializable`了，你类中的所有字段也需要这样做。我认为这`Document`是问题所在的领域。引用[此序列化教程](http://www.tutorialspoint.com/java/java_serialization.htm)：

> 请注意，要成功序列化一个类，必须满足两个条件：
> 
> *   该类必须实现 java.io.Serializable 接口。
>     
>     
> *   类中的所有字段都必须是可序列化的。如果字段不可序列化，则必须将其标记为瞬态。

看看这个[`DOMElementImpl`类](http://jtidy.sourceforge.net/apidocs/org/w3c/tidy/DOMElementImpl.html)，它确实实现了`Serializable`。如果您需要将其序列化到数据库，那么您需要在存储到数据库之前将其导出到另一个类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:46:16.103

你可能想用[Kryo绕过这些序列化问题](http://code.google.com/p/kryo/)

# sql-server - 如何使用curdate？

> ID：12282171
> 
> 赞同：0
> 
> 时间：2012-09-05T13:08:36.357
> 
> 标签：sql-server, date, stored-procedures

我想构建一个存储过程，它可以根据今天的日期是否在日期列表中返回值 0 或 1。我做了这样的事情：

```
USE [Alt_db]
GO
/****** Object:  StoredProcedure [dbo].[usp_ys]    Script Date: 09/05/2012 14:21:18 ******/
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE  PROCEDURE [dbo].[usp_Is_Holyday]
@Value varchar(50),
@Result bit OUTPUT
AS
Begin
If exists (select 1 from Holyday_Date where ISOCNTRYDESC=@Value and Holiday = CURDATE())
set @Result=1
Else
set @Result=0
End 
```

但我有一个错误语法。

你有什么想法 ？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:10:51.767

对于 SQL Server，请尝试：

```
Holiday = getdate() 
```

或仅适用于日期部分：

```
cast(Holiday as date) = cast(getdate() as date) 
```

对于 SQL Server 2005 或更早版本，请使用：

```
dateadd(day, 0, datediff(day, 0, Holiday)) = 
    dateadd(day, 0, datediff(day, 0, getdate())) 
```

# c# - Ajax 调用不工作

> ID：12282174
> 
> 赞同：0
> 
> 时间：2012-09-05T13:08:53.470
> 
> 标签：c#, javascript, jquery, ajax

我正在对 C# 函数进行 ajax 调用，但它没有被调用。

这是ajax调用：

```
$('#button1 button').click(function () {
    var username = "username_declared";
    var firstname = "firstname_declared";
    $.ajax({
        type: "GET",
        url: "practiced_final.aspx/ServerSideMethod",
        data:{username1:username,firstname1:firstname},
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (msg) {
            $('#myDiv').text(msg.d);
        },
        error: function (a, b, c) {
            alert(a + b + c);
        }
    });
    return false;
}); 
```

这是 C# 代码：

```
[WebMethod]
public static string ServerSideMethod(string username1, string firstname1)
{
    return "Message from server with parameter." + username1 + "hello" + firstname1;
} 
```

此方法未命中并显示如下错误消息：

```
object XMLHttpRequest]parsererrorundefined 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T06:09:59.130

最后它正在工作。这是最终的代码。感谢大家的明智答复。

```
 $.ajax({
                 type: "POST",
                 url: "practiced_final.aspx/hello_print",
                 data: "{}",
                 contentType: "application/json; charset=utf-8",
                 dataType: "json",
                 async: true,
                 cache: false,
                 success: function (msg) {
                 $('#myDiv').text(msg.d);
                 }
                 })
                 return false; 
```

享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:14:41.293

```
$('#button1 button').live('click', function () {
            var username = "username_declared";
            var firstname = "firstname_declared";
            $.ajax({
                url: "/practiced_final.aspx/ServerSideMethod", type: "GET", dataType: "json",
                data: JSON.stringify({ username1: username, firstname1: firstname }),
                contentType: "application/json; charset=utf-8",
                success: function (msg) {
                    $('#myDiv').text(msg.d);
                },
                error: function (a, b, c) {
                    alert(a + b + c);
                }
            });
        }); 
```

**$('button#button1') 或 $('#button1') 或 $('#button1 button')** 也检查你的选择器。在点击事件中放置一条警报消息并查看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:13:01.170

尝试更改此行：

```
data:{username1:username,firstname1:firstname}, 
```

至

```
data:JSON.stringify({username1:username,firstname1:firstname}), 
```

编辑：

我不确定这是否是问题的原因，但这是我注意到我们的 jQuery ajax 调用之间不同的一件事。此外，更改了结果字符串以反映@dana 在我的回答评论中的批评。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:14:48.800

在您的代码中，我可以看到：dataType：“json”，

但是您不是通过 C# 函数发送 Json ...当您告诉 ajax dataType 是 json 时，它将 JSON.parse() 响应。也许这就是失败的地方。尝试更改数据类型，或删除它（jQuery 会尝试猜测它）。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T13:15:46.240

```
 $('button#button1') //Or check selector put one alert inside onclick
  $('#button1').live('click', function () {
                var username = "username_declared";
                var firstname = "firstname_declared";
                $.ajax({
                    type: "GET",
                    url: "practiced_final.aspx/ServerSideMethod",
                    data: JSON.stringify({ username1: username, firstname1: firstname }),
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                    $('#myDiv').text(msg.d);
                    },
                    error: function (a, b, c) {
                        alert(a + b + c);
                    }
                    })
                    return false; 
```

它可能会有所帮助

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T13:16:17.317

请在 Jquery 函数中更改以下行。

数据：{用户名1：用户名，名字1：名字}，

至

数据："{'username1':'" + 用户名 + "','firstname1':'" + firstname + "'}",

希望这会帮助你。

# db2 - Zend 框架 2 Db2

> ID：12282178
> 
> 赞同：1
> 
> 时间：2012-09-05T13:09:09.070
> 
> 标签：db2, zend-db, zend-framework2

我最近开始使用 Zend Framework 2 rc7 开发一个新应用程序，但我找不到任何对 DB2 适配器的引用。

有谁知道有没有开发的计划？

到目前为止，我已经编写了自己的自定义 DB2 适配器，扩展了许多 Zend Db 类，但这并不像我希望的那样功能齐全。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:39:59.523

看看它是否有助于使用带有选项 pdoType = dblib (http://fr2.php.net/pdo-dblib) 的适配器 Pdo_Mssql

请参阅[http://framework.zend.com/manual/en/zend.db.adapter.html#zend.db.adapter.adapter-notes.pdo-mssql](http://framework.zend.com/manual/en/zend.db.adapter.html#zend.db.adapter.adapter-notes.pdo-mssql)

# arm - 添加命令定义时u-boot文本区域溢出

> ID：12282184
> 
> 赞同：0
> 
> 时间：2012-09-05T13:09:31.130
> 
> 标签：arm, u-boot

在我的`mx53_loco`板上我有一个问题：当我在板特定的标题中添加命令行帮助定义（`CONFIG_SYS_LONGHELP`）时，构建完成成功但是当我启动板时我发现环境损坏（所有命令都无法识别）。

即使我增加`CONFIG_EXTRA_ENV_SETTINGS`定义的大小，我也有这个问题。

所以这似乎是与`u-boot`某处溢出的代码大小有关的问题。( `memory map re-definition?`)

我将能够`u-boot`正确调整内部布局的大小。

谁能解释我发生了什么或建议一个有用的链接？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T22:47:13.103

u-boot 总是先读取保存的环境变量。这些环境变量通常位于非易失性存储器（NOR 或 NAND 闪存或其他）中。如果保存的环境变量的 CRC 正确，则使用保存的环境变量。如果您更改了 CONFIG_EXTRA_ENV_SETTINGS，它将不会被使用！

CONFIG_EXTRA_ENV_SETTINGS 中的值仅在您将环境变量重置为默认值并保存它们时使用：

```
$ env default -f
$ saveenv 
```

您还应该注意映射和大小。添加新环境变量时，请确保 CONFIG_ENV_SIZE 和 CONFIG_ENV_OFFSET 正确。

请阅读 u-boot 源码顶层目录中的 README 文件。并浏览邮件列表： http: [//news.gmane.org/gmane.comp.boot-loaders.u-boot](http://news.gmane.org/gmane.comp.boot-loaders.u-boot)

编辑：

您还应该验证 CONFIG_SYS_FLASH_BASE 和 CONFIG_SYS_MONITOR_LEN 是否正确。只要确保你没有重叠 u-boot 覆盖的闪存区域和你编写环境变量的闪存区域。

# javascript - JavaScript 代码中的安全性

> ID：12282186
> 
> 赞同：1
> 
> 时间：2012-09-05T13:09:37.737
> 
> 标签：javascript, security

我开始构建/设计一个新的单页 Web 应用程序，并且真的想主要使用客户端技术（HTML、CSS、JavaScript/CoffeScript）作为前端，同时拥有一个瘦 REST API 后端来提供数据到前端。出现的一个问题是关于 JavaScript 的安全性。例如，某些链接和 UI 元素将仅根据用户附加的角色和资源显示。当用户登录时，它将进行一个 REST 调用来验证凭据，然后返回一个 json 对象，该对象具有该用户的所有权限，该对象将存储在一个 JavaScript 对象中。

让我们来看看这段 javascript：

```
// Generated by CoffeeScript 1.3.3
(function() {
  var acl, permissions, root;

  root = typeof exports !== "undefined" && exports !== null ? exports : this;

  permissions = {
    //data…
  };

  acl = {
    hasPermission: function(resource, permission, instanceId) {
      //code….
    }
  };

  root.acl = acl;

}).call(this); 
```

现在这个代码设置确保即使通过控制台，也没有人可以修改变量权限。这里的问题是，由于这是一个单页应用程序，我可能想要更新权限而不必刷新页面（也许他们添加了一条记录，然后需要将其添加到他们的权限中）。我能想到的唯一方法是添加类似

```
setPermission: function(resource, permission, instanceId){
  //code…
} 
```

到 acl 对象，但是如果我这样做，这意味着浏览器控制台中的某个人也可以使用它来为自己添加他们不应该拥有的权限。有没有办法添加无法从浏览器控制台访问但可以从 JavaScript 文件中的代码访问的代码？

现在即使我可以防止上述问题，我仍然有一个更大的问题。无论我需要什么拥有 hasPermission 功能，但是当它以这种方式声明时，我可以在浏览器控制台中通过执行以下操作覆盖该方法：

```
acl.hasPermission(resource, permission, instanceId){return true;} 
```

现在我可以看到一切了。无论如何定义此方法是用户无法覆盖它的方式（例如将其标记为最终或其他东西）？

需要注意的是，每个 REST API 调用也会检查权限，所以即使他们看到了他们不应该看到的东西，他们仍然无法做任何事情，并且 REST API 会因为权限问题而后悔请求. 有人建议在服务器端生成模板，但我真的不喜欢这个想法，因为它在前端和后端技术堆栈之间创建了非常强的耦合。例如，如果出于某种原因我们需要将 PHP 迁移到 Python 或 Ruby，如果模板是在客户端用 JavaScript 构建的，我只需要重新构建 REST API，所有前端代码都可以保留相同，但如果我在服务器端生成模板，情况并非如此。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:13:23.137

无论您做什么：您**还必须**检查服务器端的所有权限（如您所述，在您的 REST 后端）。无论您跳过什么障碍，有人将能够进行他们不应该进行的 REST 调用。

这有效地使您的客户端安全系统成为优化：您尝试仅向用户显示允许的操作，并尝试避免往返服务器以获取允许的操作。

因此，您实际上并不需要关心用户是否可以“破解”它：如果他们破坏了您的应用程序，他们可以保留这两个部分。不会发生任何错误，因为服务器不会让他们执行未经授权的操作。

但是，我仍然会以期望“访问被拒绝”作为有效答案的方式编写客户端代码（并且不需要异常）。出现这种响应的原因有很多：如果登录用户在打开浏览器时更改了权限，那么客户端的安全描述不再与服务器匹配，应该优雅地处理这种情况（显示“抱歉，不允许此操作”并重新加载安全描述，例如）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:14:50.487

永远不要相信 Javascript 代码或一般的前端。人们甚至可以在代码到达您的浏览器（嗅探器等）之前对其进行修改，*并且*无论如何大多数变量都是可访问和可修改的……相信我：您在前端永远不会安全:)

*始终*在服务器端检查凭据，而*不仅仅是*在前端！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:39:15.110

在现代浏览器中，您可以使用`Object.freeze`or`Object.defineProperty`来确保该`hasPermission`方法不能被重新定义。

我还不知道如何克服这个问题`setPermission`。也许最好只依赖那里的服务器端安全性，正如你所说的那样，无论如何你都有。

# c# - 将 WPF ListView 中的选定项目保存到另一个变量

> ID：12282189
> 
> 赞同：2
> 
> 时间：2012-09-05T13:09:54.007
> 
> 标签：c#, .net, wpf, listview, selecteditem

我正在尝试从 ListView (WPF System.Windows.Controls.ListView) 中获取所选项目并将其传递给另一个变量以存储选择，但我得到了 NullReferenceException。

```
List<LViewItem> onlySelectedItems = null;
var selectedItems = listView1.SelectedItems;

foreach (var item in selectedItems)
{
    onlySelectedItems.Add((LViewItem)item);  // Throws NullReferenceException
} 
```

如何将所选项目保存到另一个变量以存储选择？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:12:29.537

问题是因为您没有初始化`onlySelectedItems`列表。

```
List<LViewItem> onlySelectedItems = new List<LViewItem>(listView1.SelectedItems.Count); 
```

构造函数中的参数指导为列表分配多少空间（初始容量）。哪个有意义是所选项目的数量。

无论如何，请注意还有其他方法试图在您的视图和模型 ( [MVVM](http://en.wikipedia.org/wiki/Model_View_ViewModel) ) 之间保持更清晰的相关性，如果您有时间，请尝试一下。它将回报您的生产力和清晰的关注点分离。它不需要从头开始。[MVVM Light](http://mvvmlight.codeplex.com)和[Caliburn Micro](http://caliburnmicro.codeplex.com)等框架将为您提供必要的管道。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T13:11:49.253

你`onlySelectedItems`是空的。先初始化一下

```
List<LViewItem> onlySelectedItems = new List<LViewItem>(); 
```

# javascript - 如何对将在 CSS transitionEnd 事件后执行的 JavaScript 进行单元测试

> ID：12282190
> 
> 赞同：3
> 
> 时间：2012-09-05T13:10:00.590
> 
> 标签：javascript, css, css-transitions, qunit, sinon

我有引导模式窗口。使用 qunit+sinonjs（假计时器），一个元素会留在页面上（`div class='modal-backdor'`）：

*   [http://jsfiddle.net/valuks/8xVCR/2/embedded/result/](http://jsfiddle.net/valuks/8xVCR/2/embedded/result/)
*   [http://jsfiddle.net/valuks/8xVCR/2/](http://jsfiddle.net/valuks/8xVCR/2/)

查看[twitter-bootstrap（第 95 行）](https://github.com/twitter/bootstrap/blob/v1.4.0/js/bootstrap-modal.js#L95)，触发了一个 transitionEnd 事件。如何测试事件触发后将执行的代码？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T11:26:35.490

问题是`this.clock.tick(1000);`不要让您的测试代码等待 1000 毫秒，而是调用`setTimeouts`此时应该发生的所有 JavaScript。因此，在您的情况下，启动动画`this.clock.tick(1000);`将无效，因为动画仍将持续 1000 毫秒。您正在寻找像 Jasmines 这样的东西[`waits()`](https://github.com/pivotal/jasmine/wiki/Asynchronous-specs)，它会在过去的时间内停止执行下面的所有测试代码。似乎在 qunit 和 sinon 中没有等价物。

顺便提一句。您要做的更多的是验收测试，而不是单元测试。您应该考虑[模拟您的 DOM 元素](http://tinnedfruit.com/2011/03/03/testing-backbone-apps-with-jasmine-sinon.html) ，这样您就可以在测试中触发 transitionEnd 事件，而不是启动真正的动画。同样启动动画并等待将在非常长时间运行的单元测试中结束。所以在我最新的项目中，我们有大约 200 个测试用例，它们将运行 1-2 秒。因此，请考虑在您开始`waits`在测试中使用时需要多长时间。

# java - 无法从另一个项目中找到字符串资源

> ID：12282191
> 
> 赞同：1
> 
> 时间：2012-09-05T13:10:00.503
> 
> 标签：java, android, resources

我有一个 Android 项目，我们在该项目中将其称为***SimpleProject***我以这种方式获取字符串，`getString(R.string.error)`我将所有字符串保存在项目中`/res/values/strings.xml`。此外***SimpleProject***不是库项目。现在我将我的***SimpleProject*** `src`文件夹作为链接资源添加到另一个项目中，让我们称之为***TestProject***，然后我尝试构建我的***TestProject*** Eclipse 给我他找不到的错误`R.string.error`。我能做些什么来解决这个问题？

***编辑：***

我考虑以下问题

如果我将所有应用程序包更改为相同，例如`com.android.victor`在这种情况下，所有 R 都将相同`com.android.victor.R`，并且如果我将一个项目添加到另一个项目，则不会导致找不到该 R。我对吗 ？在这种情况下会出现什么问题？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-05T13:44:21.490

我认为您需要更改顺序，
1\. 转到**Java 构建路径**
2\. 转到**Order and Export**并将**SimpleProject**引用移动到**TestProject** 文件夹上方

# asp.net-mvc - @Html.Action() 上的 StackOverflow 异常

> ID：12282194
> 
> 赞同：1
> 
> 时间：2012-09-05T13:10:04.123
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, razor

我试图让我的登录部分从我的数据库中读取用户的名字和姓氏。因此，我试图从我的布局而不是视图部分调用一个动作。

```
@If Request.IsAuthenticated Then

      @<text><div class="authBox">Welcome <strong>@User.Identity.Name</strong>!
      </div></text>

Else 
```

我的布局中的这一行出现堆栈溢出异常：

```
@Html.Action("RenderLogOnPartial", "Employee") 
```

这是我要调用的操作：

```
 ' 
    ' GET: /Employee/RenderLogOnPartial
    Public Function RenderLogOnPartial() As ViewResult

        Return View("_LogOnWithValidationPartial")

    End Function 
```

我该怎么做才能让名字和姓氏进入我的部分视图？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:16:54.740

视图将使用您的布局，这将再次调用您的操作，因此堆栈溢出。

尝试

```
Return PartialView("_LogOnWithValidationPartial") 
```

# mongodb - $all-query 考虑排序

> ID：12282197
> 
> 赞同：0
> 
> 时间：2012-09-05T13:10:09.380
> 
> 标签：mongodb

我的 MongoDB 数据库中有以下文档：

```
{"stats": [2,5,1]}
{"stats": [1,9,2]} 
```

现在我想找到那些具有`stats`包含值`2`和`1`（按该顺序）的 -array 的文档。所以应该只找到第一个文档。一个简单的`$all`-query 将返回两个文档。有没有办法用 MongoDB 的查询语言来做到这一点？

或者让我们假设以下文件：

```
{"stats": [{"val": 2, "position": 0},{"val": 5, "position": 1},{"val": 1, "position": 2}]}
{"stats": [{"val": 1, "position": 0},{"val": 9, "position": 1},{"val": 2, "position": 2}]} 
```

同样的问题 :-) 有没有办法查询这些文档以仅返回值 2 后跟值 1 的文档（考虑位置值）？

我可能会使用`$where`-query，但文档说这不是首选方式（而且速度很慢）:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:14:36.460

$all 和 $in 不考虑任何排序。意味着：不能使用标准查询语法。

# asp.net - 如何使用下拉列表选择值应用主题？

> ID：12282198
> 
> 赞同：1
> 
> 时间：2012-09-05T13:10:09.753
> 
> 标签：asp.net, themes

我想选择下拉列表值然后更改主题。两个主题绿色和红色

在我的代码中，我尝试在下拉列表中选择值，然后重定向到第一个值

例如..第一个已经选择的值是绿色下一个选择红色值然后它在下拉列表中显示绿色

以下代码：

```
protected void Page_PreInit(object sender, EventArgs e)
{
    if (!IsPostBack)
    {

        if (Session["theme"] != null)
        {
            Page.Theme = Session["theme"].ToString();
        }
        Page.Theme = "Green";
    }

}
protected void ddltheme_SelectedIndexChanged(object sender, EventArgs e)
{
    Session["theme"] = ddltheme.SelectedValue;
    Response.Redirect(Request.FilePath);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:12:29.160

执行以下操作并没有真正完成任何事情，因为您只是覆盖了会话值：

```
if (Session["theme"] != null)
{
    Page.Theme = Session["theme"].ToString();
}
Page.Theme = "Green"; 
```

如果有的话，你试图默认，所以这样说：

```
Page.Theme = "Green";
if (Session["theme"] != null)
{
    Page.Theme = Session["theme"].ToString();
} 
```

另外，我不太了解 Response.Redirect(Request.FilePath); 部分......你想用这个来完成什么？您是否尝试通过不执行回发来运行代码？更好的方法是像 Candie 解释的那样在 ddl 事件中简单地设置 Page.Theme，而不是执行 Response.Redirect。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:12:53.123

你可以试试

```
Session.Add("theme", ddltheme.SelectedValue); 
```

并且在您的委托中添加，因为当您发布数据时，您不会经过您的 (!IsPostBack)，因此您不会引用

```
Page.Theme = ddltheme.SelectedValue;

protected void ddltheme_SelectedIndexChanged(object sender, EventArgs e)
{
    Session["theme"] = ddltheme.SelectedValue;
    Page.Theme = ddltheme.SelectedValue;
    Response.Redirect(Request.FilePath);
} 
```

# vba - 带有 VBA 的 Word Doc 中的 PDF 片段？

> ID：12282199
> 
> 赞同：3
> 
> 时间：2012-09-05T13:10:18.427
> 
> 标签：vba, pdf, excel, ms-word

所以我有这个带有一堆 ActiveX 按钮的 Word 文档，每当按下一个按钮时，相应的图像就会在用户窗体中弹出。它看起来像这样：
![在此处输入图像描述](../Images/a16c5d88643c86cbd82c52387e5fdc4d.png)

我的问题是弹出的每个图像都是 PDF 一部分的屏幕截图，但我的用户实际上需要能够选择/复制呈现的文本。

有没有什么好的方法可以将 PDF 文件的一部分嵌入到用户表单中，以便可以选择文本？它不应该是可编辑的，只是可选择的。

或者，最坏的情况是，自己从 PDF 中复制文本并将其格式化为用户表单的最简单方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:07:47.417

如果您希望用户从 pdf 中选择文本，我不建议为此使用图像控件。

做这个。

1.  在您的电脑上安装 Adob​​e Pdf Reader。
2.  创建一个新的用户窗体并放置`AcroPDF1`和`CommandButton`控件，您就完成了。

要添加`AcroPDF1`控件，请参阅屏幕截图

![在此处输入图像描述](../Images/ccee04ee7d7b05d70531458a68ae3fa8.png)

接下来，在 Userform 上绘制控件并在窗体上放置一个 CommandButton

这就是您的用户表单的外观。

![在此处输入图像描述](../Images/09e462d58a1444eb3b68ede310574a2b.png)

将此代码放在 CommandButton1 的单击事件中。

```
Option Explicit

Private Sub CommandButton1_Click()
    '~~> Change filename as applicable
    AcroPDF1.LoadFile "C:\Sample.Pdf"
End Sub 
```

现在，当您运行它时，将显示 pdf，您可以选择文本。请参阅下面的屏幕截图。

![在此处输入图像描述](../Images/41bc5e4b8f5c91c57f06e10d34895e89.png)

# jsf-2 - 如何在 jsf 2 上显示成功消息

> ID：12282200
> 
> 赞同：2
> 
> 时间：2012-09-05T13:10:20.067
> 
> 标签：jsf-2

如何使成功消息显示出来？我有以下代码，但只出现警告消息。我必须进行哪些更改才能在我的成功页面中显示成功消息？

**用户bean.java**：

```
 public String Login() throws Exception {
     String status = "failure"; 
    current=userBo.validateUser(getLogin(),getPass()); 
    if(current!=null){ exist=false; status = "success"; 
    String message = "submitted successfully !!"; 
    FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(message)); }
     exist=true; return status; } 
```

* * *

**登录.xhtml：**

```
<f:view>
                    <h:form>
                        <table border="0" cellpadding="0" cellspacing="0">
                            <tr>
                                <th>Username</th>
                                <td><h:inputText value="#{user.login}"
                                        styleClass="login-inp" /></td>
                            </tr>
                            <tr>
                                <th>Password</th>
                                <td><h:inputSecret value="#{user.pass}"
                                        onfocus="this.value=''" styleClass="login-inp" /></td>
                            </tr>
                            <tr>
                                <th></th>
                                <!-- <td><input type="button" class="submit-login"  /> -->
                                <td><h:commandButton action="#{user.checkUser}"  styleClass="submit-login" />
                                <h:messages  globalOnly="true"  />
                                </td>
                            </tr>
                        </table>
                    </h:form>
                </f:view> 
```

* * *

**成功.xhtml：**

```
 <h:form>
    <h:body>

        <h1>heyyyy ,y sucseded  !!!</h1> <br/><br/>

        <h:commandLink  action ="#{user.logout}" > disconnect </h:commandLink>

    </h:body>
    </h:form> 
```

**警告信息 ：**

```
Infos: WARNING: FacesMessage(s) have been enqueued, but may not have been displayed.
sourceId=null[severity=(INFO 0), summary=(submitted successfully !!), detail=(submitted successfully !!)] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:14:43.993

您`<h:messages globalOnly="true" />`被放置在错误的视图中。您将其放置在 中`login.xhtml`，但您正在导航到`success.xhtml`成功而不是返回到`login.xhtml`。如果你把`<h:messages globalOnly="true" />`in `success.xhtml`，那么它将以你期望的方式显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:27:43.623

在您的操作方法上，即 action="#{user.checkUser}" 返回一个字符串，该字符串将决定使用您的 faces-config.xml 文件显示哪个页面。

例如。<导航规则>

```
 < from-view-id>*< /from-view-id>                
            < navigation-case>
               <from-outcome>ReturnedString</from-outcome>
               <to-view-id>success.xhtml(path of your file)</to-view-id>
            <redirect/>
        </navigation-case>
    < /navigation-rule> 
```

这肯定会奏效。

# google-maps - 如何在我的网站上显示特定商家的 google+ 本地评论和评分？

> ID：12282202
> 
> 赞同：0
> 
> 时间：2012-09-05T13:10:23.867
> 
> 标签：google-maps, google-places-api

我正在开发像[http://www.reputation.com/](https://plus.google.com/105836802564090875429/about)[这样](http://www.reputation.com/) 的应用程序我的屏幕。

所有过程都将自动化。由于我们有可用的谷歌地点详细信息 api（https://developers.google.com/places/documentation/#PlaceDetails），但在这里我们必须提供地点的参考。

现在我被困在如何从我的网址中找到参考（https://plus.google.com/105836802564090875429/about）？

# jquery-mobile - jquery mobile 在刷新时切换回索引

> ID：12282207
> 
> 赞同：1
> 
> 时间：2012-09-05T13:10:43.763
> 
> 标签：jquery-mobile, refresh, reload

我有点棘手。

我正在使用 jQuery mobile 1.1.1 开发一个移动网站。它是一个纯 javascript html5 实现。

**解剖结构如下：**

*   1 个 HTML 页面被称为`index.html`包含完整的 HTML 结构和标题，所有包括（javascript/css 等）、正文等。此页面重定向`$.mobile.changePage('login.hml')`到登录站点。

*   X 子站点仅包含`<div data-role="page" data-theme="a" id="x" data-title="x">`站点特定的 html/javascript 代码。

到目前为止，这工作正常。唯一的问题是，当我刷新页面时（`F5`例如），刷新后我总是被重定向到登录站点。

* * *

**例子：**

我在以下网站（网址）上：

```
http://mysite/mobile/web/#/mobile/web/list.html 
```

然后，我按下`F5`刷新页面。

刷新完成，然后我被重定向到：

```
http://mysite/mobile/web/#/mobile/web/login.html 
```

我怎样才能防止这种行为？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:47:54.457

刷新页面时，您的浏览器会将 URL 解释为您要显示的页面，`http://mysite/mobile/web/`这就是您打开的原因`index.html`，它会将您重定向到`login.html`.

有 2 个可能的修复方法：

1.  修改您的重定向，以便您解析目标 URL 并识别预期位置（在您的示例中，# 之后的所有内容`/mobile/web/list.html`）并重定向到此给定页面。您当然应该首先检查您的用户是否正确登录，以便在必要时重定向到 login.html。

2.  您还可以修改 list.html 页面使用的 URL，以便它正确使用`http://mysite/mobile/web/list.html`（如果确实是存储文件的位置）。我不赞成这种方法，因为它还需要您在此页面中添加所有正确的标题信息，而且我觉得通过为您的站点设置一个入口点来动态处理目标更容易符合 JQuery Mobile 精神你的用户

# bing-maps - 如何删除“在定义之前使用了 Microsoft””jslint 错误

> ID：12282213
> 
> 赞同：2
> 
> 时间：2012-09-05T13:10:52.387
> 
> 标签：bing-maps, jslint

错误：

> 在定义之前使用了 Microsoft'。

我正在使用 bing MAP API 在我的网页中实现 bing 地图。

```
var map;
function getMap() {
  map = new Microsoft.Maps.Map(document.getElementById('myMap'), {credentials: 'bing map key'});
} 
```

如何在没有 jslint 错误的情况下在 js 文件中使用函数？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:16:36.473

从 JSLint 的检查中排除 Microsoft 对象。

```
/*global Microsoft: false */ 
```

[http://www.jslint.com/lint.html](http://www.jslint.com/lint.html)

# html - 为什么我的内容在兼容模式下消失在我的标题后面？

> ID：12282214
> 
> 赞同：0
> 
> 时间：2012-09-05T13:10:58.757
> 
> 标签：html, css, ie8-compatibility-mode

在兼容模式下运行以下布局时，内容会消失在固定标题后面。有什么办法可以防止这种情况发生吗？

[请参阅此处](http://jsfiddle.net/tAPvu/2/)的 jsfiddle并在 IE 中的兼容模式之间切换。当不在兼容模式下时，布局在 chrome 和 IE9 中工作正常。

标题 css 基本上是：

```
#headerContainer
{
    position: fixed;    
    top:0px;   
    z-index:999;
    background:green;
    width: 100%;
} 
```

内容css是：

```
#container{
overflow:hidden;
padding-left:480px; /* The width of the rail */
margin-top: 135px;
background: red;
} 
```

它是带有固定头部的固定流体布局（左导轨是固定的）。向下滚动时，我希望页面的内容消失在标题下方。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:23:43.133

IE兼容模式快速修复：

```
#container{
    overflow:hidden;
    padding-left:480px; /* The width of the rail */
    margin-top: 135px;
    background: red;
    *position:relative;
    *top:135px;
} 
```

我已经`*`为 IE7 使用了 CSS hack (with )。小提琴：http: [//jsfiddle.net/keaukraine/phPAN/](http://jsfiddle.net/keaukraine/phPAN/)

# java - 我的表单上的 Spring WebFlow2 中的每个转换都需要隐藏按钮吗

> ID：12282220
> 
> 赞同：1
> 
> 时间：2012-09-05T13:11:16.380
> 
> 标签：java, javascript, spring, spring-mvc, spring-webflow

我的表单上的 Spring WebFlow2 中的每个转换都需要隐藏按钮吗？

如果这是真的，我开始不喜欢 Spring WebFlow2。有人告诉我，我希望表单具有的每个转换都需要一个隐藏按钮。示例如果我有一个带有提交和重置的表单，我知道我应该使用两个按钮。

但是，如果我有一个需要启动转换以在表单上加载一些数据的表单，我真的需要每个转换类型的按钮吗？我会觉得这很疯狂，但这是真的吗？

他是我的商店。我有一个用户开始填写的表格，一旦用户单击单选按钮，我需要将一些学校加载到下拉列表中供用户选择。我发现这样做的唯一方法是使用 javascript 和一个隐藏按钮来启动 loadschool 转换类型。例子：

**这是最好的方法吗？这是唯一的方法吗？我真的需要为每个过渡提供一个按钮吗？**

**我的流量：**

```
<view-state id="SchoolVisitReport" view="SchoolVisitReport.jsp" model="visit" >
<transition on="submit" to="addVisit">
<evaluate expression="flowActions.validateVisit(visit, messageContext)"/>
</transition>

<transition on="loadSchools" to="SchoolVisitReport" >
<evaluate expression="flowActions.initializeSelectableSchool s(visit)" result="flowScope.selectableSchools"/>
</transition>

<transition on="cancel" to="endState" bind="false"/>
</view-state> 
```

**我的 JavaScript：**

```
function loadSchools(strBorough)
{
alert("Loading Schools for borough " + strBorough);
document.visit._eventId_loadSchools.click();

} 
```

**我的单选按钮：**

```
<form:radiobutton tabIndex="9" onchange='loadSchools();' value="B" path="borough" />Bronx-X<BR>
<form:radiobutton tabIndex="10" onchange='loadSchools();' value="K" path="borough" />Kings-K<BR>
<form:radiobutton tabIndex="11" onchange='loadSchools();' value="M" path="borough" />Man.-M<BR> 
```

所以有人可以告诉我，如果我用 webflow2 做这件事是正确和最好的方式 .. 谢谢

我尝试了以下代码，但没有提交表单

```
<script type="text/javascript">
   Spring.addDecoration(new Spring.AjaxEventDecoration({
          elementId : "borough",
          formId : "visit",
           event : "onChange",
           params : {
                     _eventId : "loadSchools",
                      fragments : "body"}
                    }));
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:31:22.827

不，您不需要隐藏按钮来访问转换。您可以简单地加载流程执行 URL 并将其传递给一个`_eventId=loadSchools`参数。例如：

```
window.location='${flowExecutionUrl}&_eventId=loadSchools' 
```

编辑：由于您也需要传递表单字段，我认为您需要执行 JavaScript 表单提交，例如：

```
function loadSchools(strBorough)
{
    var form = document.forms['yourFormId'];
    form.elements['_eventId'].value = 'loadSchools';
    form.submit();
} 
```

（我不是发誓这是确切的语法，但希望你明白这一点。）

另一种选择是提前将所有学校加载到页面中，然后在您的 JavaScript 中简单地切换显示哪些学校。

最后，您可能希望[使用 AJAX](http://static.springsource.org/spring-webflow/docs/2.3.x/reference/html/ch12s05.html)而不是完整的表单提交来检索学校列表。

# c# - 为什么 Workflow Foundation 4.0 上的所有表达式都是 V isual Basic 语法？

> ID：12282221
> 
> 赞同：0
> 
> 时间：2012-09-05T13:11:18.213
> 
> 标签：c#, .net, vba, expression, workflow-foundation-4

在`Workflow Foundation 4.0`（甚至更旧的版本）中，`Visual Basic`即使我选择了`C#`项目，所有表达式都是语法？

为什么这些表达式不是 C# 语法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:17:04.293

我想，这是由于 office 和其他 vba 中的所有编程语法造成的。工作流基础具有接口，可以由非程序员在设计器应用程序中创建工作流。如ms excel、ms access等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T19:38:12.740

真正的原因是 Visual Basic 是唯一提供内存编译器的语言。对于 C# 表达式，我们必须采用不同的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T13:16:29.157

这就是旧版本中的方式。如果您可以使用 4.5，C# 表达式已经为 C# Workflow 项目实现：http: [//msdn.microsoft.com/en-us/magazine/hh781025.aspx](http://msdn.microsoft.com/en-us/magazine/hh781025.aspx)

# python - 在 Apache 上使用 Python ladon，为 web 服务加载一次

> ID：12282222
> 
> 赞同：0
> 
> 时间：2012-09-05T13:11:18.817
> 
> 标签：python, web-services, apache

因为我并不真正了解 Ladon、Webservices 和 Apache 使用的底层策略或协议（我在 Windows Apache 服务器上使用 Ladon 和 Python 以及 mod_wsgi.so - 切换到 Ubuntu 系统）

我想知道这是否可以一次为 python 加载一些资源，以便公开的方法使用 python 代码中的这些资源，而不必在考虑/向 Web 服务提供新查询时再次加载这些资源？

如果可能的话，您是否有任何关于如何实现这一目标的线索，或者如果没有任何解决方法？

通常我从需要太多时间来加载（I/O）的文件中加载一些巨大的字典，并且在接收每个新的 ladon 查询时加载它，WS 太慢了，我想告诉 Ladon：“加载这个当 apache 启动时，并在 Apache 运行期间将其作为字典提供给我的所有 python Web 服务/代码”。我不会修改这些数据，所以我只需要能够读取/访问它们。

最好的祝福

第一次编辑：如果这有帮助，看起来像在我的 Ubuntu 上（我已经从我的 Win 配置切换到 Ubuntu 以更“标准”，希望我这样做是对的），Apache2 设置为 prefork 模式而不是 MPM，（如Jakob Simon-Gaarde 建议）阅读自：

```
@: sudo /usr/sbin/apache2 -l
Compiled in modules:
  core.c
  mod_log_config.c
  mod_logio.c
  prefork.c
  http_core.c
  mod_so.c
@: sudo /usr/sbin/apache2 -l | grep MPM
@: 
```

我要检查如何做到这一点，也许我还在这里放了一些简化的代码，因为现在即使有你有用的答案，我也没有办法（我可以在这里做任何事情：/）

[安装 MPM 模式时，在此处](https://serverfault.com/questions/210423/switching-to-worker-mpm-for-apache-2-on-ubuntu)找到如何操作：`$ sudo apt-get install apache2-mpm-worker`

**最后编辑**：

这是我的 WS 代码的骨架：

```
MODEL_DIR = "/home/mydata.file"

import sys
import codecs
import glob
import os
import re

import numpy

from ladon.ladonizer import ladonize
from ladon.types.ladontype import LadonType
from ladon.compat import PORTABLE_STRING

class Singleton(type): 
    _instances = {} 
    def __call__(cls, *args, **kwargs): 
        if cls not in cls._instances: 
            cls._instances[cls] = super(Singleton, cls).__call__(*args, **kwargs) 
        return cls._instances[cls] 

class LDtest(object):
    __metaclass__ = Singleton
    modeldir = MODEL_DIR
    def __init__(self):
        self.load()

    def load(self):
        modeldir = LDtest.modeldir
        self.data = mywrapperfordata.mywrapperfordata(modeldir)
        b = datetime.datetime.now()
        self.features = self.mywrapperfordata.load() # loading is wrapped here
        c = datetime.datetime.now()
        print("loading: %s done." % (c-b))

    def letsdoit(self, myinput):
        return [] # actually main logic ie complex stuff involving accessing to self.features

    @ladonize(PORTABLE_STRING, [ PORTABLE_STRING ], rtype = [ PORTABLE_STRING ] )
    def ws(self, myinput):
        result = self.letsdoit(myinput)
        return result

import datetime
a = datetime.datetime.now()
myLDtest = LDtest()
b = datetime.datetime.now()
print("LDtest: %s" % (b-a)) 
```

关于加载时间：来自我的 apache2 日志：-注意模块 1 是必需的，并且由模块 2 导入，并且还作为单独的 Web 服务提供。看起来单例没有构建或不够快？

```
[Tue Jul 09 11:09:11 2013] [notice] caught SIGTERM, shutting down
[Tue Jul 09 11:09:12 2013] [notice] Apache/2.2.16 (Debian) mod_wsgi/3.3 Python/2.6.6 configured -- resuming normal operations
[Tue Jul 09 11:09:50 2013] [error] Module 4: 0:00:02.885693.
[Tue Jul 09 11:09:51 2013] [error] Module 0: 0:00:03.061020
[Tue Jul 09 11:09:51 2013] [error] Module 1: 0:00:00.026059.
[Tue Jul 09 11:09:51 2013] [error] Module 1: 0:00:00.012517.
[Tue Jul 09 11:09:51 2013] [error] Module 2: 0:00:00.012678.
[Tue Jul 09 11:09:51 2013] [error] Module (dbload): 0:00:00.402387 (22030)
[Tue Jul 09 11:09:54 2013] [error] Module 3: 0:00:00.000036.
[Tue Jul 09 11:13:00 2013] [error] Module 0: 0:00:03.055841
[Tue Jul 09 11:13:01 2013] [error] Module 1: 0:00:00.026215.
[Tue Jul 09 11:13:01 2013] [error] Module 1: 0:00:00.012600.
[Tue Jul 09 11:13:01 2013] [error] Module 2: 0:00:00.012643.
[Tue Jul 09 11:13:01 2013] [error] Module (dbload): 0:00:00.322444 (22030)
[Tue Jul 09 11:13:03 2013] [error] Module 3: 0:00:00.000035. 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T16:48:42.127

mod_wsgi 在启动时启动一个或多个 Python 进程并让它们运行以处理请求。如果你加载一个模块或设置一个全局变量，当你处理下一个请求时它们仍然存在 - 但是，每个 Python 进程都有自己单独的内存块，所以如果你将 mod_wsgi 配置为启动 8 个进程并加载一个 1G数据集，最终您将使用 8G 内存。也许您应该考虑使用数据库？

**编辑**：谢谢 Graham :-) 因此，只有一个进程和多个线程，您可以在所有工作线程之间共享一份庞大的字典。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T21:01:34.737

我们在所有网络项目的工作中都广泛使用 Ladon，并且我有能力开发我的私人项目（我是 Ladon 开发人员）并获得报酬 ;-) 我们的一些服务消耗大量资源，例如，我们有一个文本转语音服务，可以将每种支持的语言大约 1Gb 的数据加载到内存中，还有一个单词预测服务，可以为每种支持的语言加载大约 100Mb 的数据。

mod_wsgi 很好——我们也使用它——你需要做的是确保你的 apache 服务器被编译为 mpm-worker ( [http://httpd.apache.org/docs/2.2/mod/worker.html](http://httpd.apache.org/docs/2.2/mod/worker.html) )。在此配置中，您的服务在多线程环境而不是多进程环境中运行。效果是每个服务器进程只启动一个解释器，然后在共享资源的几个底层线程中运行您的服务。需要注意的是，您必须确保您的服务不会踩到自己的脚趾，这意味着您必须使用 mutex.acquire()/mutex.release() 保护服务类实例之间共享的全局变量和类静态变量.

除此之外，作为框架的 Ladon 是为多线程环境构建的。

最好的问候雅各布西蒙-加德

# c# - 使用 ServerController 和更新面板更新不起作用

> ID：12282226
> 
> 赞同：1
> 
> 时间：2012-09-05T13:11:30.177
> 
> 标签：c#, ajax, updatepanel, repeater, servercontrols

所以，我有一个中继器，它显示远程服务器上的自定义函数列表。中继器显示如下。

```
serverName   serviceName    serviceStatus   Button1 Button2
----------------------------------------------------------
 Carolina    StatsTracker      Running       update  stop
 ...
 ..
 . 
```

serviceStatus 在中继器内的更新面板中被敲击

```
<asp:UpdatePanel ID="statusUpdate" runat="server" UpdateMode="Conditional" ChildrenAsTriggers="false">
                <ContentTemplate>                           
                    <td><asp:Label ID="RowStatus" Width="100px" Text="Status..." runat="server"  /></td>
                </ContentTemplate>
           </asp:UpdatePanel> 
```

在后面的代码中，我通过 servercontroller 向服务器发送命令，并尝试实时更新 serviceStatus 或至少尽可能接近实时。像这样

```
 if (svc.Status != ServiceControllerStatus.Stopped)
                {
                    svc.Stop();
                    StatusLabel.Text = "Stopping";
                    statusUPdatePanel.Update();

                    while (svc.Status != ServiceControllerStatus.Stopped)
                    {
                        System.Threading.Thread.Sleep(1000);
                        svc.Refresh();
                    }
                    StatusLabel.Text = svc.Status.ToString();
                    statusUPdatePanel.Update();

                }
                System.Threading.Thread.Sleep(1000);
                if (svc.Status != ServiceControllerStatus.Running)
                {
                    svc.Start();
                    StatusLabel.Text = "Starting";
                    statusUPdatePanel.Update();

                    while (svc.Status != ServiceControllerStatus.Running)
                    {
                        System.Threading.Thread.Sleep(1000);
                        svc.Refresh();
                    }
                    StatusLabel.Text = svc.Status.ToString();
                    statusUPdatePanel.Update();

                } 
```

这个问题是状态不会实时更新。它只更新到运行或错误的最终值。但绝不会在发生时显示停止、启动或停止。同样在按钮上单击我在 serverController 运行时禁用按钮，这是一个小的用户校对步骤，这似乎不会导致按钮被禁用。我已经阅读了大量的更新面板问题帖子，并认为这可能是一个绑定问题，但我不确定，因为我已经厌倦了许多建议的解决方案，但无济于事。
提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T19:52:41.417

根据您的问题，您想**刷新**您的 updatePanel**两次**！这是不可能的。（部分）回发只会在您的方法完成时发生......此外，这些`while (...)`都是一个坏主意，imo。你宁愿**使用****_**

 **```
ServiceController.WaitForStatus(ServiceControllerStatus.Running, new TimeSpan(0, 0, 5)); 
```

但这不会解决您希望同时查看状态（xxxPending 和 xxx）的问题/问题。我认为只有一次机会 - 您必须重新向服务器询问给定服务的当前状态。所以我创建了一个例子

1.  我使用**JQUery AJAX 调用**来*更改服务的状态*
2.  *成功*后，我*会*立即获取*服务器响应*并将**其显示在客户端上**（通常为**xxxPending**）
3.  在客户端等待*5 秒，然后***重新向服务器询问此服务的当前状态**

对我来说效果很好 - 用我的本地服务对其进行了测试。

**serviceController_Repeater.aspx**

```
<head runat="server">
    <title></title>
    <script type="text/javascript" src="js/jquery-1.7.1.js"></script>
    <script type="text/javascript">
        $(document).ready(function () {
            console.log("Add AJAX calls to buttons\n");
            $('input[type=button]').click(
                    function () {
                        changeStatus($(this).attr("value"), $(this).parents("tr").find("span[id$=lblName]"), $(this).parents("tr").find("span[id$=lblStatus]"));
                    });
            });

            function changeStatus(newStatus, displayLabel, statusLabel) {
                var displayName = displayLabel.text();    
                console.log("change status to '" + newStatus + "' for service '" + displayName + "'");
                $.ajax({
                    type: "POST",
                    url: "serviceController_Repeater.aspx/ChangeStatus",
                    data: "{ 'newStatus': '" + newStatus + "', 'displayName' : '" + displayName + "'}",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    success: function (msg) {
                        console.log("server says\n\tnew status is now: " + msg.d);
                        statusLabel.text(msg.d);
                        if (newStatus != "")
                            window.setTimeout(function () { changeStatus("", displayLabel, statusLabel) }, 5000);
                    }
                });
            }
    </script>
</head>
<body>
    <form id="form1" runat="server">
    <div>
        <asp:Repeater ID="rptServices" runat="server">
            <HeaderTemplate>
                <table>
                    <thead>
                        <tr>
                            <th>
                                Name
                            </th>
                            <th>
                                Status
                            </th>
                            <th colspan="4">
                            </th>
                        </tr>
                    </thead>
                    <tbody>
            </HeaderTemplate>
            <FooterTemplate>
                </tbody></table></FooterTemplate>
            <ItemTemplate>
                <tr id="1">
                    <td>
                        <asp:Label ID="lblName" runat="server" Text='<%# Eval("DisplayName") %>'></asp:Label>
                    </td>
                    <td>
                        <asp:Label ID="lblStatus" runat="server" Text='<%# Eval("Status") %>'></asp:Label>
                    </td>
                    <td> 
                        <input type="button" <%# Eval("Status").ToString()=="Stopped" ? "" : "disabled" %> value="Start" />
                    </td>
                    <td>
                        <input type="button" <%# Eval("Status").ToString()=="Running" ? "" : "disabled" %> value="Stop" />
                    </td>
                    <td>
                        <input type="button" <%# Eval("Status").ToString()=="Running" ? "" : "disabled" %> value="Pause" />
                    </td>
                    <td>
                        <input type="button" <%# Eval("Status").ToString()=="Paused" ? "" : "disabled" %> value="Continue" />
                    </td>
                </tr>
            </ItemTemplate>
        </asp:Repeater>
    </div>
    </form>
</body> 
```

**serviceController_Repeater.aspx.cs**

```
protected void Page_Load(object sender, EventArgs e)
{
    if (!Page.IsPostBack)
        bindServices();
}
private void bindServices()
{
    ServiceController[] services = ServiceController.GetServices();
    rptServices.DataSource = services;
    rptServices.DataBind();
}

[WebMethod]
public static string ChangeStatus(string newStatus, string displayName)//
{
    Debug.WriteLine(string.Format("Service {0} new status {1}", displayName, newStatus));
    ServiceController sc = new ServiceController(displayName);

    switch (newStatus)
    {
        case "Start":
            sc.Start();
            // instead of waiting on the SERVER for xxx secondes 
            // immediately RETURN to CLIENT
            //sc.WaitForStatus(ServiceControllerStatus.Running, new TimeSpan(0, 0, 15));
            break;
        case "Stop":
            sc.Stop();
            break;
        case "Pause":
            sc.Pause();
            break;
        case "Continue":
            sc.Continue();
            break;
        default:
            break;
    }
    return sc.Status.ToString();
} 
```**

# python - 如何计算列表中唯一值的出现次数

> ID：12282232
> 
> 赞同：186
> 
> 时间：2012-09-05T13:11:47.260
> 
> 标签：python, arrays, variables, loops, unique

所以我正在尝试制作这个程序，它会要求用户输入并将值存储在数组/列表中。
然后当输入一个空行时，它会告诉用户这些值中有多少是唯一的。
我是出于现实生活的原因而不是作为问题集来构建它。

```
enter: happy
enter: rofl
enter: happy
enter: mpg8
enter: Cpp
enter: Cpp
enter:
There are 4 unique words! 
```

我的代码如下：

```
# ask for input
ipta = raw_input("Word: ")

# create list 
uniquewords = [] 
counter = 0
uniquewords.append(ipta)

a = 0   # loop thingy
# while loop to ask for input and append in list
while ipta: 
  ipta = raw_input("Word: ")
  new_words.append(input1)
  counter = counter + 1

for p in uniquewords: 
```

..这就是我到目前为止所得到的一切。
我不确定如何计算列表中的唯一单词数？
如果有人可以发布解决方案，以便我可以从中学习，或者至少向我展示它会如何，谢谢！

* * *

## 回答 #1

> 赞同：339
> 
> 时间：2012-09-05T19:04:36.810

此外，使用[collections.Counter](http://docs.python.org/library/collections.html#collections.Counter)重构您的代码：

```
from collections import Counter

words = ['a', 'b', 'c', 'a']

Counter(words).keys() # equals to list(set(words))
Counter(words).values() # counts the elements' frequency 
```

输出：

```
['a', 'c', 'b']
[2, 1, 1] 
```

* * *

## 回答 #2

> 赞同：282
> 
> 时间：2012-09-05T13:14:32.520

您可以使用[集合](https://docs.python.org/3/library/stdtypes.html#set-types-set-frozenset)删除重复项，然后使用[len](https://docs.python.org/3/library/functions.html#len)函数计算集合中的元素：

```
len(set(new_words)) 
```

* * *

## 回答 #3

> 赞同：59
> 
> 时间：2018-07-08T04:06:56.987

`values, counts = np.unique(words, return_counts=True)`

### 更多详情

```
import numpy as np

words = ['b', 'a', 'a', 'c', 'c', 'c']
values, counts = np.unique(words, return_counts=True) 
```

函数[numpy.unique](https://numpy.org/doc/stable/reference/generated/numpy.unique.html)返回输入列表中**排序**的唯一元素及其计数：

```
['a', 'b', 'c']
[2, 1, 3] 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2012-09-05T13:15:30.907

使用一[组](http://docs.python.org/library/stdtypes.html#set)：

```
words = ['a', 'b', 'c', 'a']
unique_words = set(words)             # == set(['a', 'b', 'c'])
unique_word_count = len(unique_words) # == 3 
```

有了这个，您的解决方案可能很简单：

```
words = []
ipta = raw_input("Word: ")

while ipta:
  words.append(ipta)
  ipta = raw_input("Word: ")

unique_word_count = len(set(words))

print "There are %d unique words!" % unique_word_count 
```

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2019-08-14T18:05:56.187

```
aa="XXYYYSBAA"
bb=dict(zip(list(aa),[list(aa).count(i) for i in list(aa)]))
print(bb)
# output:
# {'X': 2, 'Y': 3, 'S': 1, 'B': 1, 'A': 2} 
```

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2017-11-08T13:21:55.877

对于 ndarray 有一个名为[unique](https://docs.scipy.org/doc/numpy-1.14.0/reference/generated/numpy.unique.html)的 numpy 方法：

```
np.unique(array_name) 
```

例子：

```
>>> np.unique([1, 1, 2, 2, 3, 3])
array([1, 2, 3])
>>> a = np.array([[1, 1], [2, 3]])
>>> np.unique(a)
array([1, 2, 3]) 
```

对于 Series 有一个函数调用[value_counts()](https://pandas.pydata.org/pandas-docs/stable/generated/pandas.Series.value_counts.html)：

```
Series_name.value_counts() 
```

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2020-11-24T17:22:29.157

如果你想要一个唯一值的直方图，这里是 oneliner

```
import numpy as np    
unique_labels, unique_counts = np.unique(labels_list, return_counts=True)
labels_histogram = dict(zip(unique_labels, unique_counts)) 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2020-07-31T10:58:55.623

怎么样：

```
import pandas as pd
#List with all words
words=[]

#Code for adding words
words.append('test')

#When Input equals blank:
pd.Series(words).nunique() 
```

它返回列表中有多少个唯一值

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2012-09-05T13:20:51.353

```
ipta = raw_input("Word: ") ## asks for input
words = [] ## creates list
unique_words = set(words) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2016-06-10T17:54:33.967

尽管 set 是最简单的方法，但您也可以使用 dict 和 use`some_dict.has(key)`来填充仅具有唯一键和值的字典。

假设您已经填充`words[]`了来自用户的输入，请创建一个 dict 将列表中的唯一单词映射到一个数字：

```
word_map = {}
i = 1
for j in range(len(words)):
    if not word_map.has_key(words[j]):
        word_map[words[j]] = i
        i += 1                                                             
num_unique_words = len(new_map) # or num_unique_words = i, however you prefer 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2021-07-13T18:00:59.387

您可以使用`get`方法：

```
lst = ['a', 'b', 'c', 'c', 'c', 'd', 'd']

dictionary = {}
for item in lst:
    dictionary[item] = dictionary.get(item, 0) + 1

print(dictionary) 
```

输出：

```
{'a': 1, 'b': 1, 'c': 3, 'd': 2} 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2019-08-14T13:52:36.767

使用熊猫的其他方法

```
import pandas as pd

LIST = ["a","a","c","a","a","v","d"]
counts,values = pd.Series(LIST).value_counts().values, pd.Series(LIST).value_counts().index
df_results = pd.DataFrame(list(zip(values,counts)),columns=["value","count"]) 
```

然后，您可以以您想要的任何格式导出结果

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-09-05T13:31:41.717

我自己会使用一套，但这里还有另一种方式：

```
uniquewords = []
while True:
    ipta = raw_input("Word: ")
    if ipta == "":
        break
    if not ipta in uniquewords:
        uniquewords.append(ipta)
print "There are", len(uniquewords), "unique words!" 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2012-09-05T13:31:57.910

```
ipta = raw_input("Word: ") ## asks for input
words = [] ## creates list

while ipta: ## while loop to ask for input and append in list
  words.append(ipta)
  ipta = raw_input("Word: ")
  words.append(ipta)
#Create a set, sets do not have repeats
unique_words = set(words)

print "There are " +  str(len(unique_words)) + " unique words!" 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2012-09-05T13:26:55.623

以下应该工作。lambda 函数过滤掉重复的单词。

```
inputs=[]
input = raw_input("Word: ").strip()
while input:
    inputs.append(input)
    input = raw_input("Word: ").strip()
uniques=reduce(lambda x,y: ((y in x) and x) or x+[y], inputs, [])
print 'There are', len(uniques), 'unique words' 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-09-02T12:44:25.603

这是我自己的版本

```
def unique_elements():
    elem_list = []
    dict_unique_word = {}
    for i in range(5):# say you want to check for unique words from five given words
        word_input = input('enter element: ')
        elem_list.append(word_input)
        if word_input not in dict_unique_word:
            dict_unique_word[word_input] = 1
        else:
            dict_unique_word[word_input] += 1
    return elem_list, dict_unique_word
result_1, result_2 = unique_elements() 
# result_1 holds the list of all inputted elements
# result_2 contains unique words with their count
print(result_2) 
```

# ruby-on-rails - Kaminari 分页布局被破坏

> ID：12282240
> 
> 赞同：0
> 
> 时间：2012-09-05T13:12:01.423
> 
> 标签：ruby-on-rails, twitter-bootstrap, kaminari

我对 kaminari 分页和引导样式有疑问。分页工作正常，但样式被破坏了。有什么办法可以解决吗？或者还有其他用于kaminari分页的样式表吗？

这是截图[http://imageshack.us/photo/my-images/59/kaminari.png/](http://imageshack.us/photo/my-images/59/kaminari.png/)

浏览器谷歌浏览器

```
= paginate @activities, :theme => 'twitter-bootstrap' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-05T00:36:35.083

你也可以运行

```
rails g kaminari:views bootstrap 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:16:44.680

结帐 [https://github.com/gabetax/twitter-bootstrap-kaminari-views](https://github.com/gabetax/twitter-bootstrap-kaminari-views)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-28T05:19:24.787

这可能是由于缺少 i18n 翻译——它们创建了额外的标签，从而扰乱了引导分页。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-07T20:50:30.673

我遇到了同样的问题，经过一些实验，我最终在我的 gem 文件中找到了这个；

```
gem "kaminari", "~> 0.13.0"
gem "kaminari-bootstrap", "~> 0.1.2" 
```

页面链接按我认为应该的方式工作，尽管我不喜欢它们的外观。
如果我使用 Kaminari 0.14.0，我会收到一条错误消息，所以将其退回到 0.13.0。

另外......我注意到如果我生成 Kaminari 视图，它会搞砸事情。使用 gem 附带的视图是最稳定的，如果您可以使用它们的话。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-06-10T19:50:40.920

如果您使用的是**Bootstrap 3**，则需要执行以下操作。在控制台中：

```
rails g kaminari:views bootstrap 
```

然后，**将 app/views/kaminari/_pagination.html.erb 的内容替换为**以下内容：

```
<%= paginator.render do %>
    <ul class="pagination">
        <%= first_page_tag unless current_page.first? %>
        <%= prev_page_tag unless current_page.first? %>
        <% each_page do |page| -%>
            <% if page.left_outer? || page.right_outer? || page.inside_window? %>
                <%= page_tag page %>
            <% elsif !page.was_truncated? %>
                <%= gap_tag %>
            <% end %>
        <% end %>
        <%= next_page_tag unless current_page.last? %>
        <%= last_page_tag unless current_page.last? %>
    </ul>
<% end %> 
```

**将 app/views/_first_page.html.erb**替换为以下内容（注意对 li 类的更改以及从 link_to_unless 到 link_to）：

```
<li <%= "class=disabled" if current_page.first? %>>
    <%= link_to raw(t 'views.pagination.first'), url, :remote => remote %>
</li> 
```

还以类似的方式替换 _prev_page、_last_page 和 _next_page 的内容（您只需将“current_page.first?”更改为“current_page.last?”

# perl - Net::Telnet 使用 getline() 或 getlines() 未获取所有行

> ID：12282242
> 
> 赞同：0
> 
> 时间：2012-09-05T13:12:01.903
> 
> 标签：perl, telnet

如果我使用终端窗口远程登录到设备并输入`show`which prints config 它会打印一定数量的行并`-- more --`在底部，您可以按几次键盘上的 Return 或 Space 来获取命令的其余部分，直到全部显示在屏幕上，你知道它是怎么回事。

和

```
$t->print('show'); 
```

问题既不是

```
while (my $line = $t->getline()) {
    print $line;
} 
```

或者

```
my @lines = $t->getlines(All => 0); # or All => 1 
```

给了我所有的行，只是开始的几行，就像终端窗口一样。

我不能在那个盒子上使用`cmd()`or `Expect`or `Net::OpenSSH`（脚本运行的机器，我不是在谈论设备），没有 gcc 并且有一个残缺的包管理器。（阅读：无法安装`IO::Pty`）

我该怎么做才能获得命令的其余输出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-15T13:20:23.127

如果`show`您使用的没有关闭其分页的选项，在每页后等待按键，您必须`->print('')`在适当的时间发送续行字符。

# android - ScrollView 和 ListView 分别滚动

> ID：12282245
> 
> 赞同：-1
> 
> 时间：2012-09-05T13:12:22.467
> 
> 标签：android, android-layout, android-listview, android-scrollview, android-scroll

这个问题与我之前的问题有关

[Android列表视图不滚动](https://stackoverflow.com/questions/12276138/android-listview-not-scrolling/12279990#12279990)

如果可以在具有自己单独滚动条的单个布局中使用 ScrollView 和 ListView

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2012-09-05T13:29:42.033

是的，您可以同时显示两者。但这不会有任何区别。但是如果您想以不同的方式查看它，则需要相应地在 xml 中进行更改，例如..更改其高度`android:layout_height="120"`

# wix - 自定义引导程序仅显示 MSI 对话框

> ID：12282246
> 
> 赞同：2
> 
> 时间：2012-09-05T13:12:25.570
> 
> 标签：wix, bootstrapper

我正在使用 Wix 3.6，我想为我的先决条件和安装期间需要调用的某些 exe 实现一个引导程序。

我知道 Burn 存在并且已经玩过它，尽管我不喜欢它保持的对话框，即使你显示 MSI 对话框集。

我目前使用 C++ 自定义操作安装了我的先决条件和 exe 文件，但我希望我的用户有更好的安装过程并遵循 Windows Installer 最佳实践指南。

有谁知道制作一个显示 MSI 对话框并有任何示例的引导程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T17:21:01.483

首先，如果您想遵循安装程序的最佳实践，我不建议您使用自定义操作安装先决条件。

说到你的问题，这是我在 C# 中自定义引导程序的实现：

```
using System;
using System.Diagnostics;
using System.IO;
using System.Linq;
using System.Text;
using System.Windows.Forms;

namespace SetupBootstrapper
{
    class Program
    {
        [STAThread]
        static void Main(string[] args)
        {
            var currentDir = AppDomain.CurrentDomain.BaseDirectory;
            var parameters = string.Empty;
            if (args.Length > 0)
            {
                var sb = new StringBuilder();
                foreach (var arg in args)
                {
                    if (arg != "/i" && arg != "/x" && arg != "/u")
                    {
                        sb.Append(" ");
                        sb.Append(arg);
                    }
                }
                parameters = sb.ToString();
            }

            bool isUninstall = args.Contains("/x") || args.Contains("/u");

            string msiPath = Path.Combine(currentDir, "MyMsiName.msi");

            if(!File.Exists(msiPath))
            {
                MessageBox.Show(string.Format("File '{0}' doesn't exist", msiPath), "Error", MessageBoxButtons.OK, MessageBoxIcon.Error);
                return;
            }

            string installerParameters = (isUninstall ? "/x" : "/i ") + "\"" + msiPath + "\"" + parameters;

            var installerProcess = new Process { StartInfo = new ProcessStartInfo("msiexec", installerParameters) { Verb = "runas" } };

            installerProcess.Start();
            installerProcess.WaitForExit();
        }
    }
} 
```

To make it ask for **elevated permissions** I add application manifest file into project with desired access level.

The **drawback** of implementing bootstrapper in .NET is of course that you can't adequately process situation when .NET is a prerequisite itself and may be absent on target machine.

# android - android google map 不显示调试键

> ID：12282247
> 
> 赞同：0
> 
> 时间：2012-09-05T13:12:28.173
> 
> 标签：android, google-maps

我为我的应用程序生成了一个调试代码，并在谷歌地图上注册了它。但由于某种原因我的地图仍然拒绝显示..我只得到一张空白地图...

我检查了 AndroidMenifest 文件，它设置正确......

有人知道我还能尝试什么？

这是我的清单文件：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.WhosAround"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk android:minSdkVersion="10" />

    <uses-permission android:name="android.permission.INTERNET" />
    <uses-permission android:name="android.permission.GET_TASKS" />
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION" />
    <uses-permission android:name="android.permission.VIBRATE" />

    <application
        android:name="com.WhosAround.AppVariables"
        android:icon="@drawable/questionmark"
        android:label="Who&apos;s Around?"
        android:screenOrientation="unspecified"
        android:theme="@android:style/Theme.NoTitleBar"
        android:windowSoftInputMode="stateHidden" >
        <uses-library
            android:name="com.google.android.maps"
            android:required="true" />

        <activity
            android:name="com.WhosAround.Activities.Loader"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
        <activity android:name=".Activities.Map.Map" />
    </application>

</manifest> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-06T07:43:20.390

所以你用这样的东西生成了你的密钥：

```
"C:/Program Files/Java/jdk1.6.0_25/bin/keytool.exe" -list -alias androiddebugkey -keystore "C:/Users/YOURNAME/.android/debug.keystore" 
```

然后使用密码android？

问题是你总是可以生成一个密钥，它并没有真正告诉你你没有找到正确的路径（ye keytool 就是那样愚蠢）。

# asp.net - IIS 应用程序池崩溃，异常 0xc0000005

> ID：12282249
> 
> 赞同：7
> 
> 时间：2012-09-05T13:12:33.107
> 
> 标签：asp.net, iis, windows-server-2008

当我使用第三方编写的 .net 提供程序时，我的应用程序池不断崩溃。我不确定从哪里开始解决问题。

我使用事件查看器获取以下信息：

```
错误应用程序名称：w3wp.exe，版本：7.5.7601.17514，时间戳：0x4ce7a5f8
错误模块名称：ntdll.dll，版本：6.1.7601.17514，时间戳：0x4ce7b96e
异常代码：0xc0000005
故障偏移量：0x00052d94
错误进程ID：0x162c
错误的应用程序启动时间：0x01cd8ad4f6ad757b
错误的应用程序路径：c:\windows\system32\inetsrv\w3wp.exe
错误模块路径：C:\windows\SYSTEM32\ntdll.dll
报告 ID：36661c3b-f6c8-11e1-830c-180373c0a6cd  

```

```
 <Event xmlns="http://schemas.microsoft.com/win/2004/08/events/event">
  <System>
  <Provider Name="Application Error" /> 
  <EventID Qualifiers="0">1000</EventID> 
  <Level>2</Level> 
  <Task>100</Task> 
  <Keywords>0x80000000000000</Keywords> 
  <TimeCreated SystemTime="2012-09-04T19:39:17.000000000Z" /> 
  <EventRecordID>26328</EventRecordID> 
  <Channel>Application</Channel> 
  <Computer>my computer</Computer> 
  <Security /> 
  </System>
  <EventData>
  <Data>w3wp.exe</Data> 
  <Data>7.5.7601.17514</Data> 
  <Data>4ce7a5f8</Data> 
  <Data>ntdll.dll</Data> 
  <Data>6.1.7601.17514</Data> 
  <Data>4ce7b96e</Data> 
  <Data>c0000005</Data> 
  <Data>00052d94</Data> 
  <Data>162c</Data> 
  <Data>01cd8ad4f6ad757b</Data> 
  <Data>c:\windows\system32\inetsrv\w3wp.exe</Data> 
  <Data>C:\windows\SYSTEM32\ntdll.dll</Data> 
  <Data>36661c3b-f6c8-11e1-830c-180373c0a6cd</Data> 
  </EventData>
  </Event> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T14:10:36.920

请检查运行工作进程 w3wp.exe 的帐户是否具有您的托管文件夹的读/写权限。（例如 Inetpub）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-04-14T18:24:59.387

我有同样的问题。在我的代码中，我有以下一行 vb.net 代码：

```
Dim mPath as string = Environment.GetFolderPath(Environment.SpecialFolder.Desktop) 
```

我的整个 ASP.NET 崩溃了，因为它在运行时无法访问这个文件夹。错误处理不起作用。Clr 简直崩溃了。

用现有目录替换这一行解决了我的问题。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-10-31T19:52:38.660

我遇到了同样的问题，我花了两天时间才找到解决方案。所以即使这个帖子已经快三年了，我也会发布我的答案。也许它可以帮助其他人节省大量时间。

我不得不禁用 web.config 中的缓存功能。我使用了“缓存”以及“静态内容”标签。不得不删除两者。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-11-06T20:50:12.983

我刚刚遇到了同样的问题，但是通过手动删除我的 MVC 项目的 bin 和 obj 文件夹来解决。

# c# - 在文本框中输入双精度

> ID：12282250
> 
> 赞同：0
> 
> 时间：2012-09-05T13:12:33.750
> 
> 标签：c#, asp.net-mvc, entity-framework, asp.net-mvc-3, validation

> **可能重复：**
> [MVC3 - 带前导零的双精度类型的小数点后 3 位](https://stackoverflow.com/questions/7375729/mvc3-3-decimal-places-on-type-double-with-leading-zero)
> [无法在文本框中键入双精度](https://stackoverflow.com/questions/12251832/can-not-type-a-double-in-a-textbox)

我正在使用实体框架在 asp.net Web 应用程序中生成模型。我有包含双精度属性的类。我的问题是，当我使用：

```
@HTML.EditorFor(model => model.Double_attribute) 
```

并测试我的应用程序我无法`double`在该编辑器中输入 a，我只能输入整数。（我正在使用 Razor 视图引擎）如何解决这个问题？谢谢。

# bash - 如何使用 bash/expect 检查 SSH 登录是否有效

> ID：12282251
> 
> 赞同：9
> 
> 时间：2012-09-05T13:12:33.620
> 
> 标签：bash, shell, ssh, expect

我的团队管理着许多服务器，公司政策规定这些服务器上的密码必须每两周更改一次。有时，无论出于何种原因，我们的官方密码数据库都会过时（人们通常会忘记更新它），但有时我们要到几个月后才能确定这一点，因为我们不会一直使用每台服务器。

我想编写一个脚本，从数据库中抓取密码，并使用这些密码每晚尝试（ssh）登录到每台服务器，并将结果发送给团队的电子邮件。我能够从数据库中抓取登录信息，但**我不确定如何在 expect 中检查 ssh 登录是否成功**。

**我不能为此任务使用公钥身份验证**。我*想要*密码验证，所以我可以验证密码。

我通过指定以下文件禁用公钥身份验证：

```
PasswordAuthentication=yes
PubkeyAuthentication=no 
```

我对期望脚本的尝试：

```
# $1 = host, $2 = user, $3 = password, $4 = config file
expect -c "spawn ssh $2@$1 -F $4
expect -re \".*?assword.*?\"
send \"$3\n\"
...
send \'^D\'" 
```

我想也许退出状态可以表明成功？但是在手册页中找不到任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T14:55:02.050

我一直在使用类似下面的脚本来完成类似的任务。

```
#!/bin/sh
# Run using expect from path \
exec expect -f "$0" "$@"
# Above line is only executed by sh
set i 0; foreach n $argv {set [incr i] $n}
set pid [ spawn -noecho ssh $1@$3 $4 ]
set timeout 30
expect {
    "(yes/no)" {
        sleep 1
        send "yes\n"
        exp_continue
    }
    "(y/n)" {
        sleep 1
        send "y\n"
        exp_continue
    }
    password {
        sleep 1
        send "$2\n"
        exp_continue
    }
    Password {
        sleep 1
        send "$2\n"
        exp_continue
    }
    "Last login" {
        interact
    }
    "Permission denied" {
        puts "Access not granted, aborting..."
        exit 1
    }
    timeout {
        puts "Timeout expired, aborting..."
        exit 1
    }
    eof {
        #puts "EOF reached."
    }
}
set status [split [wait $pid]]
set osStatus [lindex $status 2]
set procStatus [lindex $status 3]
if { $osStatus == 0 } {
    exit $procStatus
} else {
    exit $procStatus
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:20:28.657

您是否特别需要检查是否可以获得 shell 或者是否正在尝试执行命令也可以？

如果您只想检查身份验证，您可能需要`ssh asimplecommand`（使用`echo`、`hostname`或类似的东西）并检查您是否得到预期的结果。

您可能还想使用`-v`选项启动 ssh，并查找`Authentication succeeded`（在 debug1 日志级别）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T15:47:09.303

crowbent 为您提供了一个期望脚本来测试 ssh 登录，但是我建议使用[非交互式 ssh 密码验证](http://sourceforge.net/projects/sshpass/)来测试 ssh/sftp。sshpass 比预期的更安全，更不容易出错。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:33:34.320

潜在问题（密码数据库不同步）的解决方案是使用公钥身份验证。给大家。当涉及到 SSH 时，不要为密码烦恼。

登录成功可以这样检查：

```
ssh -o PasswordAuthentication=no USER@HOST 'exit' || echo "SSH login failed." 
```

# android - 安卓的苹果卓悦

> ID：12282257
> 
> 赞同：3
> 
> 时间：2012-09-05T13:12:49.777
> 
> 标签：android, bonjour, jmdns

我正在寻找适用于 android 的苹果 bonjour。有推荐的罐子吗？

我搜索了一个苹果 bonjour 应用程序，发现了 Jmdns 应用程序[http://home.heeere.com/tech-androidjmdns.html](http://home.heeere.com/tech-androidjmdns.html)。

但在运行**DEMO**应用程序时，应用程序启动时出现错误。在 Eclipse LogCat 之后：

```
09-05 13:56:49.926: E/AndroidRuntime(13243): java.lang.NoClassDefFoundError: javax.jmdns.JmDNS
09-05 13:56:49.926: E/AndroidRuntime(13243):    at com.heeere.android.dnssdtuto.DnssdDiscovery.setUp(DnssdDiscovery.java:44)
09-05 13:56:49.926: E/AndroidRuntime(13243):    at com.heeere.android.dnssdtuto.DnssdDiscovery.access$0(DnssdDiscovery.java:38)
09-05 13:56:49.926: E/AndroidRuntime(13243):    at com.heeere.android.dnssdtuto.DnssdDiscovery$1.run(DnssdDiscovery.java:27)
09-05 13:56:49.926: E/AndroidRuntime(13243):    at android.os.Handler.handleCallback(Handler.java:587)
09-05 13:56:49.926: E/AndroidRuntime(13243):    at android.os.Handler.dispatchMessage(Handler.java:92)
09-05 13:56:49.926: E/AndroidRuntime(13243):    at android.os.Looper.loop(Looper.java:123)
09-05 13:56:49.926: E/AndroidRuntime(13243):    at android.app.ActivityThread.main(ActivityThread.java:4363) 
```

Java代码：

```
package com.heeere.android.dnssdtuto;

import java.io.IOException;

import javax.jmdns.JmDNS;
import javax.jmdns.ServiceEvent;
import javax.jmdns.ServiceInfo;
import javax.jmdns.ServiceListener;

import android.app.Activity;
import android.os.Bundle;
import android.widget.TextView;

public class DnssdDiscovery extends Activity {

    android.net.wifi.WifiManager.MulticastLock lock;
    android.os.Handler handler = new android.os.Handler();

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        handler.postDelayed(new Runnable() {
            public void run() {
                setUp();
            }
            }, 1000);

    }    /** Called when the activity is first created. */

    private String type = "_workspace._tcp.local.";
    private JmDNS jmdns = null;
    private ServiceListener listener = null;
    private ServiceInfo serviceInfo;
    private void setUp() {
        android.net.wifi.WifiManager wifi = (android.net.wifi.WifiManager) getSystemService(android.content.Context.WIFI_SERVICE);
        lock = wifi.createMulticastLock("mylockthereturn");
        lock.setReferenceCounted(true);
        lock.acquire();
        try {
            jmdns = JmDNS.create();
            jmdns.addServiceListener(type, listener = new ServiceListener() {

                public void serviceResolved(ServiceEvent ev) {
                    notifyUser("Service resolved: " + ev.getInfo().getQualifiedName() + " port:" + ev.getInfo().getPort());
                }

                public void serviceRemoved(ServiceEvent ev) {
                    notifyUser("Service removed: " + ev.getName());
                }

                public void serviceAdded(ServiceEvent event) {
                    // Required to force serviceResolved to be called again (after the first search)
                    jmdns.requestServiceInfo(event.getType(), event.getName(), 1);
                }
            });
            serviceInfo = ServiceInfo.create("_test._tcp.local.", "AndroidTest", 0, "plain test service from android");
            jmdns.registerService(serviceInfo);
        } catch (IOException e) {
            e.printStackTrace();
            return;
        }
    }

    private void notifyUser(final String msg) {
        handler.postDelayed(new Runnable() {
            public void run() {

        TextView t = (TextView)findViewById(R.id.text);
        t.setText(msg+"\n=== "+t.getText());
            }
            }, 1);

    }

    @Override
        protected void onStart() {
        super.onStart();
        //new Thread(){public void run() {setUp();}}.start();
    }

    @Override
        protected void onStop() {
        if (jmdns != null) {
            if (listener != null) {
                jmdns.removeServiceListener(type, listener);
                listener = null;
            }
            jmdns.unregisterAllServices();
            try {
                jmdns.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
            jmdns = null;
        }
        //repo.stop();
        //s.stop();
        lock.release();
        super.onStop();
    }
} 
```

AndroidManifest.xml

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
      package="com.heeere.android.dnssdtuto"
      android:versionCode="1"
      android:versionName="1.0">
    <application android:icon="@drawable/icon" android:label="@string/app_name">
        <activity android:name=".DnssdDiscovery"
                  android:label="@string/app_name">
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />
                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

    </application>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.CHANGE_WIFI_MULTICAST_STATE"/>

</manifest> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-22T04:36:48.427

我遇到了同样的问题，然后我用 maven jmdns 3.4.1.jar 替换了 jmdns.jar [点击下载](http://www.jarvana.com/jarvana/archive-details/javax/jmdns/jmdns/3.4.1/jmdns-3.4.1-sources.jar)

如果您在启动时遇到 dalvik 错误，请尝试从构建路径和其他文件夹中删除 jar 文件，将此文件保存在 libs 文件夹中，这可能对您有帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T07:37:24.640

创建一个名为“libs”的文件夹，将 jar 放入该文件夹，然后尝试。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-07T08:38:39.720

[Jmdns 示例站点](http://home.heeere.com/tech-androidjmdns.html)的作者发布了一个可以正常工作的 Jmdns 新示例。[我已经使用来自Maven 中央存储库](http://search.maven.org/#browse%7C1991004139)的 Jmdns 3.4.1 进行了测试，它可以工作

此[链接](https://github.com/twitwi/AndroidDnssdDemo/tree/master/AndroidDnssdDiscoveryCommandLine)是 Jmdns 的新示例

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:32:38.907

将此 jar 添加到您的项目中，清理构建并重试：

[http://repo1.maven.org/maven2/javax/jmdns/jmdns/3.2.2/jmdns-3.2.2.jar](http://repo1.maven.org/maven2/javax/jmdns/jmdns/3.2.2/jmdns-3.2.2.jar)

# php - PHP 查找和替换字符串的一部分

> ID：12282261
> 
> 赞同：0
> 
> 时间：2012-09-05T13:12:55.310
> 
> 标签：php, string, replace

我有一个输入字符串。格式如下：

```
This;is;my;long;string 
```

使用 PHP 获取此输出字符串的任何快速解决方案（大量字符串）：

```
This;is;my;long 
```

我需要删除这个附录：`;string`

*   我不知道附录的长度： ; 这里的任何字母。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:15:39.680

如果您一直使用`;`作为分隔符，您可以`explode()`使用字符串，删除最后一个索引，然后重新加入字符串`implode()`：

```
$str    = "This;is;my;long;string";
$strArr = explode(";", $str);

unset($strArr[count($strArr) - 1]);
$newStr = implode(";", $strArr); 
```

**更新**

为了使其适用于*任何*可搜索的字符串，您可以使用`array_keys()`：

```
$str             = "This;is;my;long;string";
$strArr          = explode(";", $str);
$searchStr       = "string";
$caseSensitive   = false;
$stringLocations = array_keys($strArr, $searchStr, $caseSensitive);

foreach ($stringLocations as $key) {
    unset($strArr[$key]);
}
$newStr = implode(";", $strArr); 
```

或者，甚至更快，您可以使用`array_diff()`：

```
$str       = "This;is;my;long;string";
$strArr    = explode(";", $str);
$searchStr = array("string");
$newArray  = array_diff($searchStr, $strArr);
$newStr    = implode(";", $newArray); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T13:17:35.210

```
$str = substr($string, 0, strrpos($string, ';')); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T13:14:26.583

[str_replace](http://php.net/manual/en/function.str-replace.php)

```
<?php 
$string='This;is;my;long;string';
str_replace(';string','',$string); ?> 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-05T13:17:01.550

```
$str = rtrim($str, ';string'); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-05T13:16:49.593

如果您知道它`;string`会一直存在（无论如何大部分时间），您可以使用 rtrim：

```
$trimmed = rtrim($text, ";string"); 
```

这将仅从`;string`字符串中删除尾随。除非它存在于字符串的末尾，否则它不会被删除。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-05T13:17:15.270

不确定您要删除的部分是否始终在开头。

```
$array = explode(";" , $string);
foreach ( $array as $key => $arr ) {
    if ( $arr == "string" ) {
        unset($array[$key]);
        break;
    }
    echo implode(";" , $array);
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-05T13:14:58.800

[如果字符串总是以这种方式格式化，那么substr](http://php.net/manual/en/function.substr.php)就不会出错- 可能是最快的方式

```
$str = 'This;is;my;long;string';
$str = substr( $str, 0, -7); 
```

# backbone.js - Backbone.js Uncaught TypeError: Object [object Object] has no method 'create'

> ID：12282265
> 
> 赞同：1
> 
> 时间：2012-09-05T13:13:03.837
> 
> 标签：backbone.js

为什么我会收到错误消息：“未捕获的 TypeError：Object [object Object] 没有方法 'create'”

我试图靠近这个[主干待办事项示例代码](http://documentcloud.github.com/backbone/docs/todos.html)。

[http://jsfiddle.net/GhaPF/4/](http://jsfiddle.net/GhaPF/4/)

```
$(document).ready(function() {

    var ToDo = Backbone.Model.extend({
        defaults: { "date": "today",
                    "task": ""
                },
        initialize: function() {}
    });

    var ToDoList = Backbone.Model.extend({
        model: ToDo
    });

    var ToDoListView = Backbone.View.extend({
        el: 'body',
        initialize: function(myTodoList) {
            this.todolist = myTodoList;
            this.todolist.bind('change', this.render, this);
        },
        render: function() {
            text = this.todolist.toJSON();
            string = JSON.stringify(text);
            $(this.el).append(string);
            return this;
        },
        events: {
            "keypress #new-todo":  "createOnEnter"
        },
        createOnEnter: function(e) {
          if (e.keyCode != 13) return;
          if (!$("#new-todo").val()) return;
          this.todolist.create({"task": $("#new-todo").val()});
          $("#new-todo").val('');
        }
    });

    var todolist = new ToDoList();
    var myToDoListView = new ToDoListView(todolist);

}); 
```

* * *

我在那里犯了两个错误：

1.  将 ToDoList 定义为模型而不是集合
2.  在集合上使用了 save() 而不是 add()，这触发了对不存在的 URL 的搜索

这是我想在这里实现的工作代码：

```
$(document).ready(function() {

    var ToDo = Backbone.Model.extend({
        defaults: { "date": "today",
                    "task": ""
                },
        initialize: function() {}
    });

    var ToDoList = Backbone.Collection.extend({
        model: ToDo
    });

    var ToDoListView = Backbone.View.extend({
        el: 'body',
        initialize: function(myTodoList) {
            this.todolist = myTodoList;
            this.todolist.bind('add', this.render, this);
        },
        render: function() {
            text = this.todolist.toJSON();
            string = JSON.stringify(text);
            $(this.el).append(string);
            return this;
        },
        events: {
            "keypress #new-todo":  "createOnEnter"
        },
        createOnEnter: function(e) {
          if (e.keyCode != 13) return;
          if (!$("#new-todo").val()) return;
          this.todolist.add({"task": $("#new-todo").val()});
          //this.render();
          $("#new-todo").val('');
        }
    });

    var todolist = new ToDoList();
    var myToDoListView = new ToDoListView(todolist);

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:34:37.237

看起来是因为您`ToDoList`正在扩展 Backbone.Model。它应该扩展 Backbone.Collection。

这是修复它的代码。

```
var ToDoList = Backbone.Collection.extend({
  model: ToDo,
  url: '/todos' 
}); 
```

# windows - 是否需要在 win32 程序中调用 DispatchMessage？

> ID：12282270
> 
> 赞同：12
> 
> 时间：2012-09-05T13:13:25.763
> 
> 标签：windows, winapi

Win32 程序一般都有一个消息循环，循环调用**GetMessage**或**PeekMessage**，然后调用**DispatchMessage**将消息分派到相关窗口的窗口进程。

但是有必要实际这样做吗？我是否可以直接在消息循环中查看**MSG**对象并在那里执行所需的操作而不调用**DispatchMessage**？我说的是我只有一个窗口而没有其他窗口控件的情况，例如，如果该窗口仅用作 direct3d 显示窗口，那么消息将始终指向唯一的窗口。

大多数情况下我只是好奇，但它也可能导致我的代码的某些方面也更干净。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-05T13:37:35.533

您调用`DispatchMessage`将消息传递到正确的窗口，即其“窗口进程”。你以为你只有一扇窗，但它真的只有一扇吗？`COM`将创建助手窗口，其他子系统也可能创建助手隐藏窗口，谁将传递发布到共享消息队列并寻址到这些窗口的消息。无需过多考虑这些细节，您就可以使用 API 来调度它们。你必须这样做，因为这些子系统依赖于消息泵的存在。

`Spy++`Windows SDK 工具可能会帮助您查看您真正拥有的窗口数量。

尽管如此，如果您确实有唯一的窗口，那么无论您的处理程序是从 DispatchMessage 内部调用还是直接由您的消息泵调用，都没有太大区别。

# c# - Entity Framework 5 空间数据和 WCF

> ID：12282272
> 
> 赞同：1
> 
> 时间：2012-09-05T13:13:35.473
> 
> 标签：c#, .net, wcf, silverlight, entity-framework-5

我目前正在尝试将现有数据层迁移到 EF5。

在迁移之前，我们没有将地理数据存储在 SQL 空间数据结构中；随着 EF 现在支持空间数据，我们正在重构我们的代码。

我们正在使用自我跟踪实体在 silverlight 客户端和 WCF 服务之间交换数据。问题在于，由于 DbGeometry 类型无法序列化，因此无法与客户端共享我们的实体。

我希望我遗漏了一点，因此存在直接的解决方案；另一方面，如果有人可以提供解决方法，我会很高兴。（我们可以使用 DTO，但可能需要大量的重构。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-24T08:53:30.410

实际上有两种选择：第一种是显而易见的；使用 DTO 传输数据。

第二个答案有点复杂；但我使用以下方法解决了这个问题：

首先，我使用反射器反编译了`DbGeometry`和类。`DbGeography`然后，我在 silverlight 中创建了一个名为 as 的程序集，`System.Data.Spatial`并将反编译的类添加到该程序集中。接下来是困难的部分；我删除了所有无法在 Silverlight 中编译的代码（例如与数据库连接相关的代码）。

然后我得到了一个 Silverlight 空间数据库，它只支持两个基本功能：将数据获取为 WKT 并将数据保存为 WKT。这两个函数足以使用相关数据并使用 WCF 服务将其保存回来。

# android - 从 AXIS2 WebService 接收一个对象，包括 ksoap2(Android) 中的对象列表/数组

> ID：12282274
> 
> 赞同：0
> 
> 时间：2012-09-05T13:13:46.207
> 
> 标签：android, web-services, ksoap2

我希望有人可以帮助我，因为这个问题需要很多时间而且我不知道解决方案。thx 提前很多......我尝试调用我的 AXIS2-Webservice，它返回一个像这样的对象：

```
public class TestObject{

private int zahl = 1;
private String name = "test";
SecondObject sec_object = new SecondObject("eins");
List <SecondObject> obj_list = new ArrayList<SecondObject>();
static SecondObject [] array;

public TestObject(){
    obj_list.add(new SecondObject("zwei"));
    obj_list.add(new SecondObject("drei"));
    array = obj_list.toArray(new SecondObject[2]); }
    //getter & setter

public class SecondObject {

private String wert;

public SecondObject(String wert) {
    this.wert = wert;
} 
```

在 Android 中，我将其称为：

```
androidHttpTransport.call(SOAP_ACTION, envelope);
SoapObject response = (SoapObject) envelope.getResponse();

int count = response.getPropertyCount();
        Log.v(TAG, "count :"+count);
        for (int y = 0; y < count; y++){
            if (response.getProperty(y)instanceof SoapObject){
                SoapObject sobj = (SoapObject) response.getProperty(y);
                Log.v(TAG, "soapOBJ "+sobj);
                Log.v(TAG, "count "+sobj.getPropertyCount());
                if (sobj.getProperty(0)!= null){
                    Log.v(TAG, "!=NULL"+sobj.getProperty(0)+"");
                }   
            }
        }

SoapObject array = (SoapObject) response.getProperty("array");
Log.v(TAG, "array "+array); 
```

我看到很多帖子，它们只调用一个对象数组。在这种情况下，我想调用一个包含对象数组的对象...问题是：数组仅包含一个元素，请参阅此日志：

```
09-05 14:58:31.120: V/ASYNCTASK(9314): count :7
09-05 14:58:31.120: V/ASYNCTASK(9314): soapOBJ SecondObject{wert=zwei; }
09-05 14:58:31.120: V/ASYNCTASK(9314): count 1
09-05 14:58:31.120: V/ASYNCTASK(9314): !=NULLzwei
09-05 14:58:31.120: V/ASYNCTASK(9314): soapOBJ SecondObject{wert=drei; }
09-05 14:58:31.120: V/ASYNCTASK(9314): count 1
09-05 14:58:31.120: V/ASYNCTASK(9314): !=NULLdrei
09-05 14:58:31.120: V/ASYNCTASK(9314): soapOBJ SecondObject{wert=zwei; }
09-05 14:58:31.120: V/ASYNCTASK(9314): count 1
09-05 14:58:31.120: V/ASYNCTASK(9314): !=NULLzwei
09-05 14:58:31.120: V/ASYNCTASK(9314): soapOBJ SecondObject{wert=drei; }
09-05 14:58:31.120: V/ASYNCTASK(9314): count 1
09-05 14:58:31.120: V/ASYNCTASK(9314): !=NULLdrei
09-05 14:58:31.120: V/ASYNCTASK(9314): soapOBJ SecondObject{wert=eins; }
09-05 14:58:31.120: V/ASYNCTASK(9314): count 1
09-05 14:58:31.120: V/ASYNCTASK(9314): !=NULLeins
09-05 14:58:31.120: V/ASYNCTASK(9314): array SecondObject{wert=zwei; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-16T01:25:17.043

您可以从顶层获取单个节点，`SoapObject`如下所示：

```
SoapObject response = (SoapObject) envelope.getResponse();
String name =  response.getPrimitivePropertySafelyAsString(NODE_NAME_FOR_NAME /* e.g. "name"? */);
int zahl = Integer.parseInt(response.getPrimitivePropertySafelyAsString(NODE_NAME_FOR_ZAHL /* e.g. "zahl"? */));
SoapObject obj_list = (SoapObject) response.getPropertySafely("obj_list");
for (int idx = 0; idx < obj_list.getPropertyCount(); idx++) {
    SoapObject secondObject = (SoapObject) forecastResultsNode.getProperty(idx);

    String wert=  forecastNode.getPrimitivePropertySafelyAsString("wert");
} 
```

如果您可以发布实际 SOAP 响应的片段（以 XML 格式），那就太好了，这样我就可以提供更具体的答案。

可以在[此博客文章](http://thiranjith.com/2012/10/15/introduction-to-working-with-ksoap2-in-android/#process-service-response)中找到解析与您描述的结构类似的响应的示例。

# r - 在 R 中使用 lmer() 正确格式化混合模型设计

> ID：12282276
> 
> 赞同：1
> 
> 时间：2012-09-05T13:13:51.537
> 
> 标签：r, lm, lme4

我正在尝试使用`lmer()`. 下面的三个模型都试图实现相同的目标——一个简单的固定效应模型——所以两个肯定是错的。

在模型中，`shoppers`是商业中心的消费者支出数据。有一个一般的平方反比距离关系描述了消费者是如何从中心分布的。这反映在一个`gravity`模型中，该矩阵将较近的区域加权高于较远的区域，以模拟距离的影响。 `Population`还给出了住宅区的大小。我认为这`r3`应该是正确的格式，但它产生的 AIC 分数高于`r2`. 知道为什么会这样，哪个是正确的？

```
> r1 <- lmer(shoppers / gravity ~ population + (1 | District), data = d)
> r2 <- lmer(shoppers * gravity ~ population + (1 | District), data = d)
> r3 <- lmer(shoppers ~ gravity / population + (1 | District), data = d)
> 
> summary(r1)@AICtab
      AIC      BIC    logLik deviance  REMLdev
 38154.25 38180.12 -19073.12 38132.84 38146.25
> summary(r2)@AICtab
      AIC     BIC    logLik deviance  REMLdev
 6504.574 6530.45 -3248.287 6470.837 6496.574
> summary(r3)@AICtab
      AIC     BIC    logLik deviance  REMLdev
 14965.16 14997.5 -7477.579 14933.57 14955.16 
```

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T15:12:35.297

您的模型`shoppers ~ gravity / population + (1 | District)`用作`shoppers`因变量，而和( )`gravity`之间的主效应和交互作用作为两个固定效应：`gravity``population``gravity:population`

```
model1 <- lmer(shoppers ~ gravity / population + (1 | District), data = d) 
```

如果你想测试交互，你的模型也应该包含相应的主效应。

如果您想测试`gravity`除以`population`作为单个固定效果的结果的效果，请使用以下公式：

```
model2 <- lmer(shoppers ~ as.numeric(gravity / population) + (1 | District), data = d) 
```

也许你想试试这个模型`shoppers ~ gravity * population + (1 | District)`。该模型存在三个固定效应： 两者的主效应`gravity`以及`population`这些变量之间的交互作用（`gravity:population`）：

```
model3 <- lmer(shoppers ~ gravity * population + (1 | District), data = d) 
```

模型的选择应取决于基础理论和您的问题/假设。

由于这些模型使用相同的因变量 ( `shoppers`)，即它们在`~`符号左侧相同，因此您可以比较 AIC 值。

```
anova(model1, model2, model3) 
```

# javascript - 使用 JavaScript 捕获基本身份验证凭据

> ID：12282277
> 
> 赞同：2
> 
> 时间：2012-09-05T13:13:52.697
> 
> 标签：javascript, capture, credentials

我有一个关于我们如何使用javascript（特别是与http基本身份验证相关的身份验证标头）在浏览器中捕获请求标头（仅请求而不是响应）的问题。你对这些有什么想法吗？谢谢大家

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:20:08.613

如果您正在谈论查看发送给您的请求标头，则无法完成。 [在 JavaScript 中访问网页的 HTTP 标头](https://stackoverflow.com/questions/220231/accessing-http-headers-in-javascript)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:21:28.143

由于 Javascript 在 HTTP 响应中执行，因此您只能访问通过内置浏览器/文档类（例如`document.referrer`，`navigator.language`和类似类）公开的标头。

其他您必须手动通过的方法，例如通过设置 cookie 或隐藏字段，或编写 XHR 代码。

# c# - 在 LINQPad 中引用同一程序集的两个不同版本

> ID：12282278
> 
> 赞同：1
> 
> 时间：2012-09-05T13:14:01.413
> 
> 标签：c#, namespaces, .net-assembly, linqpad

如何在 LINQPad 中引用同一程序集的两个不同版本？在标准 C# 应用程序上，我会依赖程序集别名，但 LINQPad 上的 AFAIK，这是不可能的。

你知道其他肮脏的方法吗？
当然，我不能重新编译程序集并更改它们的命名空间！

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:32:31.667

这是不可能的。事实上，LINQPad 非常努力地阻止这种情况的发生，因为引用同一程序集的不同版本（或副本）几乎总是偶然发生的事情。它对类型解析造成严重破坏（因为如果它们来自不同的程序集，相同的类型是不兼容的）。

# java - 从字符串中提取日期

> ID：12282279
> 
> 赞同：0
> 
> 时间：2012-09-05T13:14:03.260
> 
> 标签：java, regex, string, date

我有一个文件名列表，大致如下所示：Gadget1-010912000000-020912235959.csv，即它们包含两个日期，指示其数据的时间跨度。

用户输入日期格式和文件格式：

*   本例中的文件格式：*GADGET*-*DATE_FROM*-*DATE_TO*.csv
*   本例中的日期格式：ddMMyyHHmmss

我想要做的是使用给定的文件和日期格式从文件名中提取三个值。

我的问题是：由于日期格式可能有很大差异（小时、分钟和秒可以用冒号分隔，日期用点分隔，...）我不太清楚如何创建合适的正则表达式。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:01:36.043

您可以使用正则表达式删除非数字字符，然后解析值。

```
DateFormat dateFormat = new SimpleDateFormat("ddMMyyHHmmss");

String[] fileNameDetails = ("Gadget1-010912000000-020912235959").split("-");

/*Catch All non digit characters and removes it. If non exists maintains original string*/
String date = fileNameDetails[1].replaceAll("[^0-9]", "");

try{
    dateFormat.parse(fileNameDetails[1]);
}catch (ParseException e) {
} 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:18:04.137

**SimpleDateFormat**解决了您的问题。您可以使用逗号、空格等定义格式，并根据格式简单地解析：

[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

因此，您将您的格式（例如 ddMMyyHHmmss）映射到相应的 SimpleDateFormat。

```
SimpleDateFormat format = new SimpleDateFormat("ddMMyyHHmmss");
Date x = format.parse("010912000000"); 
```

如果格式发生变化，您只需更改 SimpleDateFormat

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:21:50.977

您可以使用一系列日期时间格式，尝试每种格式，直到其中一个有效。

您可能需要对格式进行排序以优先匹配。

例如，对于 Joda 时间，您可以对一系列模式中的每一个使用[DateTimeFormat.forPattern()](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormat.html#forPattern%28java.lang.String%29)和[DateTimeFormatter.getParser() 。](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeFormatter.html#getParser%28%29)尝试[DateTimeParser.parseInto()](http://joda-time.sourceforge.net/api-release/org/joda/time/format/DateTimeParser.html#parseInto%28org.joda.time.format.DateTimeParserBucket,%20java.lang.String,%20int%29)直到成功。

这种方法的一个好处是它很容易添加和删除模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:19:51.990

使用`Pattern`和`Matcher`分类。

看例子：

```
String inputDate = "01.09.12.00:00:00";
Pattern pattern = Pattern.compile(
  "([0-9]{2})[\\.]{0,1}([0-9]{2})[\\.]{0,1}([0-9]{2})[\\.]{0,1}([0-9]{2})[:]{0,1}([0-9]{2})[:]{0,1}([0-9]{2})");
  Matcher matcher = pattern.matcher(inputDate);
  matcher.find();
  StringBuilder cleanStr = new StringBuilder();
  for(int i = 1; i <= matcher.groupCount(); i++) {
    cleanStr.append(matcher.group(i));
  } 
  SimpleDateFormat format = new SimpleDateFormat("ddMMyyHHmmss");
  Date x = format.parse(cleanStr.toString());
  System.out.println(x.toString()); 
```

最重要的部分是线

```
Pattern pattern = Pattern.compile(
  "([0-9]{2})[\\.]{0,1}([0-9]{2})[\\.]{0,1}([0-9]{2})[\\.]{0,1}([0-9]{2})[:]{0,1}([0-9]{2})[:]{0,1}([0-9] 
```

在这里，您在括号中定义正则表达式并标记组，以便`([0-9]{2})`标记一个组。然后是可能的分隔符的表达式，`[\\.]*`在这种情况下为 0 或 1 个点，但您可以放置​​更多可能的分隔符，例如`[\\.|\]{0,1}`.

然后运行`matcher.find()`​​which 如果模式匹配则返回 true。然后使用`matcher.group(int)`您可以逐组获取。请注意，第一组的索引为 1。

然后我`String`使用`StringBuilder`. 然后解析日期。

干杯，迈克尔

# android - 如何将价值从第一个活动传递到第三个活动

> ID：12282288
> 
> 赞同：0
> 
> 时间：2012-09-05T13:14:34.867
> 
> 标签：android, android-intent, xml-parsing, sharedpreferences

我希望将值从第一个活动传递到第三个活动。

我的第一个活动：[CustomizedListview](http://pastie.org/4668043)

第二个活动是：[SingleMenuItemActivity](http://pastie.org/4668012)

第三个活动是：[插入示例](http://pastie.org/4668010)

在这里，我必须将 Orderid 值从 CustomisedListView (1st) 活动传递给 InsertionExample (3rd) 活动。

我怎么能通过这个？我已将 orderid 值从第一个活动传递到第二个活动。但我不能将它从第一个活动传递到第三个活动。请帮我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:25:23.457

试试这个

```
 Intent intent=new Intent(CustomizedListview.this,InsertionExample.class);
 intent.putExtra("orderid",getOrderid);
 startActivity(intent); 
```

在你的第三个活动中

```
 Bundle bundle = data.getExtras();
 String getOrderId = bundle.getString("orderid"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:16:49.003

> 我必须将 orderid 值从第一个活动传递到第二个活动

在发送到第二个活动时发送。只需将第二个活动的名称更改为第三个活动。

## 或者

只需在 Shared Preference 中存储 Order Id 并在第三个 Activity 中获取它。

## SharedPreference 示例

```
SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
SharedPreferences.Editor prefsEditor = myPrefs.edit();
prefsEditor.putString("order_id", "5");
prefsEditor.commit(); 
```

获取共享偏好。

```
 SharedPreferences myPrefs = this.getSharedPreferences("myPrefs", MODE_WORLD_READABLE);
 String prefName = myPrefs.getString("order_id", "0"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T13:21:31.227

您可以通过 2 种方式传递值：

1.  您可以创建一个全局类并在该类中设置值并在第三个活动中访问该类
2.  您可以使用 Intent 将您的值从第一个活动发送到第二个活动

* * *

```
Intent intent = new Intent (this, 2ndActivity.class); 
    intent.putExtra ("Value",Value);
    startActivity(intent); 
```

你可以对第二个活动到第三个活动做同样的事情

```
Bundle extras = getIntent().getExtras();
    if(extras!=null){
    Values=extras.getString("value");
    } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T13:22:12.543

您可以在第一个活动到第二个活动中使用额外的意图，然后在从第二个到第三个的另一个意图中通过额外的相同值传递。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T13:17:27.770

**将值设为静态，然后在第三个活动中使用它**

```
public static int i; 
```

然后，在第三个活动中调用它：

```
firstActivity.i; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-05T13:21:56.143

使用 SharedPreferences（用于小数据）来存储数据并在您 3 活动中获取此数据，否则使用内部存储或数据库（用于大数据）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-08-29T06:08:12.847

```
//your 1st activity (CustomizedListview)

String str=txtView.getText().toString();

Intent i=new Intent(getApplicationContext(),SingleMenuItemActivity.class);
i.putExtra("message",str);

startActivity(i);

    //your 2nd Activity (SingleMenuItemActivity)

String str= getIntent().getStringExtra("message");

Intent i = new Intent(getApplicationContext(), InsertionExample.class);

i.putExtra("message", str);

startActivity(i);

    //you 3rd Activity (InsertionExample)

Intent int=getIntent();

String str= int.getStringExtra("message");

txtView.setText(str); 
```

# android - 在 Android 上监控 WIFI 直接活动

> ID：12282290
> 
> 赞同：0
> 
> 时间：2012-09-05T13:14:37.980
> 
> 标签：android, wifi-direct

有没有办法监控 ICS 中的 wifi 直接活动？

就像一个列出所有开放端口和 ip 等的 netstat 命令......

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-07T21:16:00.500

wifi direct 只设置一个网络接口和IP。

所以是的，您可以使用 netstat 检查连接

# iphone - 将图像转换为像素格式并返回到 UIImage 格式更改 iPhone 中的图像

> ID：12282293
> 
> 赞同：1
> 
> 时间：2012-09-05T13:14:47.660
> 
> 标签：iphone, ios, core-graphics

我首先将图像转换为原始像素，然后再次将像素转换回 UIImage，在转换图像后它会改变颜色并变得透明，我尝试了很多但无法解决问题。这是我的代码：

> ```
> -(UIImage*)markPixels:(NSMutableArray*)pixels OnImage:(UIImage*)image{
> CGImageRef inImage = image.CGImage;
> // Create off screen bitmap context to draw the image into. Format ARGB is 4 bytes for each pixel: Alpa, Red, Green, Blue
> CGContextRef cgctx = [self createARGBBitmapContextFromImage:inImage];
> if (cgctx == NULL) { return nil; /* error */ }
>     size_t w = CGImageGetWidth(inImage);
> size_t h = CGImageGetHeight(inImage);
> CGRect rect = {{0,0},{w,h}};
> // Draw the image to the bitmap context. Once we draw, the memory
> // allocated for the context for rendering will then contain the
> // raw image data in the specified color space.
> CGContextDrawImage(cgctx, rect, inImage);
> // Now we can get a pointer to the image data associated with the bitmap
> // context.
> int r = 3;
> int p = 2*r+1;
> unsigned char* data = CGBitmapContextGetData (cgctx);
> int i = 0;
> while (data[i]&&data[i+1]) {
>     //        NSLog(@"%d",pixels[i]);
>     i++;
> }
> NSLog(@"%d %zd %zd",i,w,h);
> NSLog(@"%ld",sizeof(CGBitmapContextGetData (cgctx)));
> for(int i = 0; i< pixels.count-1 ; i++){
>     NSValue*touch1  = [pixels objectAtIndex:i];
>     NSValue*touch2  = [pixels objectAtIndex:i+1];
>     NSArray *linePoints = [self returnLinePointsBetweenPointA:[touch1 CGPointValue] pointB:[touch2 CGPointValue]];
>     for(NSValue *touch in linePoints){
>         NSLog(@"point = %@",NSStringFromCGPoint([touch CGPointValue]));
>         CGPoint location = [touch CGPointValue];
>         for(int i = -r ; i<p ;i++)
>             for(int j= -r; j<p;j++)
>             {
>                 if(i<=0 && j<=0 && i>image.size.height && j>image.size.width)
>                     continue;
>                 NSInteger index = (location.y+i) * w*4 + (location.x+j)* 4;
>                 index = 0;
>                 data[index +3] = 125;
>             }
>     }
> }
> // When finished, release the context
> CGContextRelease(cgctx);
> CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceRGB();
> CGDataProviderRef dp = CGDataProviderCreateWithData(NULL, data, w*h*4, NULL);
> CGImageRef img = CGImageCreate(w, h, 8, 32, 4*w, colorSpace, kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big, dp, NULL, NO, kCGRenderingIntentDefault);
> UIImage* ret_image = [UIImage imageWithCGImage:img];
> CGImageRelease(img);
> CGColorSpaceRelease(colorSpace);
> // Free image data memory for the context
> if (data) { free(data); }
> return ret_image;
> } 
> ```
> 
> ![在此处输入图像描述](../Images/a721abab07135b422645853bfabfb909.png)![在此处输入图像描述](../Images/07972b3cf482c9b30a863c7279843b84.png)
> 第一个是原始图像，第二个图像是应用此代码后的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:23:44.413

您必须询问 CGImageRef 是否使用 alpha，以及每个像素的组件格式 - 查看所有 CGImageGet... 函数。图像很可能不是 ARGB，而是 BGRA。

我经常创建和渲染纯绿色图像，然后打印出第一个像素以确保我做对了（BGRA -> 0 255 0 255）等等。它真的让主机顺序等和alpha首先或最后一个混淆（这是否意味着在主机之前订单是在之前还是之后应用？）

编辑：您告诉 CGDataProviderCreateWithData 使用 'kCGImageAlphaPremultipliedLast | kCGBitmapByteOrder32Big'，但我没有看到您询问原始图像的配置方式。我的猜测是，将 'kCGBitmapByteOrder32Big' 更改为 'kCGBitmapByteOrder32Little' 将解决您的问题，但 alpha 也可能是错误的。

图像可以具有不同的 alpha 值和字节顺序，因此您确实需要询问原始图像如何配置然后适应它（或将内存中的字节重新映射为您想要的任何格式。）

# groovy - gradle 执行顺序

> ID：12282297
> 
> 赞同：1
> 
> 时间：2012-09-05T13:14:59.047
> 
> 标签：groovy, gradle, build-script

我是新手。如果我没有使用 doFirst() 或 doLast()。插件（比如说）中的行以何种顺序执行。我可以观察到它们不是按顺序执行的吗？有人可以解释 gradle 文件的执行流程吗？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-06T02:47:47.720

Gradle 构建生命周期[在此处记录](http://gradle.org/docs/current/userguide/build_lifecycle.html)。

可以用“ICE”来概括：初始化、配置、执行。

您的问题集中在执行上。对于单项目构建，在上面链接的“48.5\. 单项目构建的配置和执行”一节中进行了描述。

对于插件，任务依赖图将取决于插件细节。例如，查看[Java 插件](http://gradle.org/docs/current/userguide/java_plugin.html#N11B1C)以获取其任务和依赖项的列表。

# eclipse - Eclipse 插件应用中资源文件和模型对象之间的映射

> ID：12282300
> 
> 赞同：2
> 
> 时间：2012-09-05T13:15:12.870
> 
> 标签：eclipse, eclipse-plugin, eclipse-rcp

请任何人帮助我理解和使用`IDE.openEditor(IWorkbenchPage, IFile)`.

我有一个资源文件（xml 格式），它包含我的模型对象。我正在编写一个向导来创建它，将其保存到工作区中，在树视图中查看它（我使用 CommonNavigator）并在编辑器中打开它。我需要知道这一切的控制流程。如何在资源文件和模型对象之间进行映射，导航器如何显示该对象以及如何打开与我的资源文件关联的编辑器。

对不起，我是 Eclipse 领域的新手。我知道我需要太多，但请至少给我一个想法。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T21:02:23.433

一位伟大的人物曾经说过……“年轻的学徒，你有很多东西要学”。

通过 Eclipse 插件/RCP 开发的基础知识，这里是您开始旅程的好地方...

[http://www.vogella.com/eclipse.html](http://www.vogella.com/eclipse.html)

如果您真的想深入了解 Eclipse 的内部，您可以使用 Eclipse 本身来教您关于真正发生的事情的肮脏细节。

1.  弄清楚如何在 Eclipse 中查看 Eclipse 源代码。
2.  在 Eclipse 源代码中您想了解更多的有趣点设置断点。
3.  使用“Eclipse Application”运行配置从主 Eclipse 中运行 Eclipse 实例。
4.  使用您新启动的 Eclipse 来执行您想要模仿的任务，并希望您会遇到一个断点，并了解 Eclipse 开发人员是如何完成您想做的事情的。

# c++ - C++中线程计数的静态类变量

> ID：12282301
> 
> 赞同：0
> 
> 时间：2012-09-05T13:15:13.713
> 
> 标签：c++, multithreading, boost, static, static-members

我正在用 C++ 编写一个基于线程的应用程序。以下是显示我如何检查线程数的示例代码。我需要确保在任何时间点，我的应用程序只产生 20 个工作线程：

```
#include<stdio.h>
using namespace std;
class ThreadWorkerClass
{
  private:
    static int threadCount;
  public:
    void ThreadWorkerClass()
    {
      threadCount ++;
    }
    static int getThreadCount()
    {
      return threadCount;
    }
    void run()
    {
      /* The worker thread execution
       * logic is to be written here */
      //Reduce count by 1 as worker thread would finish here
      threadCount --;
    }
}

int main()
{
  while(1)
  {
    ThreadWorkerClass twObj;
    //Use Boost to start Worker Thread
    //Assume max 20 worker threads need to be spawned
    if(ThreadWorkerClass::getThreadCount() <= 20) 
      boost::thread *wrkrThread = new boost::thread(
        &ThreadWorkerClass::run,&twObj);
    else
      break;
  }
  //Wait for the threads to join
  //Something like (*wrkrThread).join();
  return 0;
} 
```

这种设计是否需要我锁定变量`threadCount`？假设我将在多处理器环境中运行此代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:22:18.667

设计不够好。问题是您暴露了构造函数，因此无论您喜欢与否，人们都可以创建任意数量的对象实例。你应该做某种线程池。即，您有一个维护一组池的类，如果可用，它会发出线程。就像是

```
class MyThreadClass {
   public:
      release(){
        //the method obtaining that thread is reponsible for returning it
      }
};

class ThreadPool {
  //create 20 instances of your Threadclass
  public:
  //This is a blocking function
  MyThreadClass getInstance() {
     //if a thread from the pool is free give it, else wait
  }
}; 
```

所以一切都由池化类在内部维护。永远不要将那个类的控制权交给其他人。您还可以将查询函数添加到池类中，例如 hasFreeThreads()、numFreeThreads() 等...

您还可以通过提供智能指针来增强此设计，以便您可以跟踪仍有多少人拥有该线程。让获得负责释放它的线程的人有时是危险的，因为进程崩溃并且他们永远不会退缩，有很多解决方案，最简单的一个是在每个线程上维护一个时钟，当时间用完线程被强行收回。

# java - 基于逗号标记字符串 - 正则表达式

> ID：12282303
> 
> 赞同：2
> 
> 时间：2012-09-05T13:15:28.007
> 
> 标签：java, regex

我有一个要根据字符进行标记的字符串`,`。这里的问题是字符串是这样的

`-123 abc, 234 def (2,3,4), -456 zyx (4,5,6) and xyz (6,5,4), 789 final!`

标记化输出后应该看起来像......

```
-123 abc
234 def (2,3,4)
-456 zyx (4,5,6) and xyz (6,5,4)
789 final! 
```

如何为此编写正则表达式？TIA。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:18:31.933

Tokenizer 不行，你需要一个*parser*。正则表达式不是特别擅长计数，这就是您需要决定在哪里结束带有逗号的括号块。

一个简单的[*递归下降解析器*](http://en.wikipedia.org/wiki/Recursive_descent_parser)应该适用于您的情况。您可能想要花哨并尝试[ANTLR](http://antlr.org/)。它是一个伟大而强大的工具，但对于简单的表达（例如您的示例中的表达）来说，它可能是一种过度杀伤力。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:35:44.913

另一种方法是使用

```
Pattern p = Pattern.compile(", +");
for(String my : p.split("-123 abc,      234 def (2,3,4),  -456 zyx (4,5,6) and xyz (6,5,4), 789 final!"))
System.out.println(my); 
```

这将找到任何带有前导空格（一个或多个）的逗号。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:19:44.683

您可以通过“，”尝试不带数字的模式匹配：

```
Pattern pattern = Pattern.compile("^[\\d][,]^[\\d]");
Matcher matcher = pattern.matcher(line);
while (matcher.find()) {
    //Here you know where you have the separating ,
    start = matcher.start(); 
```

或者如何通过“，”进行标记？希望后面总有一个空格，你要标记化。

```
String test = "-123 abc, 234 def (2,3,4), -456 zyx (4,5,6) and xyz (6,5,4), 789 final!";
String[] tokens = test.split(", ");
System.out.println(Arrays.toString(tokens)); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:21:55.693

它可能就像这样工作：

> var string = "-123 abc, 234 def (2,3,4), -456 zyx (4,5,6) and xyz (6,5,4), 789 final!";
> 
> var tokens = string.split(', '); console.log(tokens);​</p>

演示：http: [//jsfiddle.net/HQgV8/](http://jsfiddle.net/HQgV8/)

# jquery - jQuery $.when() 其中一个参数来自异步“延迟管道”

> ID：12282309
> 
> 赞同：3
> 
> 时间：2012-09-05T13:15:46.177
> 
> 标签：jquery, asynchronous, jquery-deferred, decoupling

jQuery`Deferred`系统的一种用途是使用`$.when()`函数。它需要可变数量的`Promise's and will do something when they all`resolve `(or when the first`reject`s。）

因此，如果您想对两个 Ajax`JSON`查询进行操作，例如，您可以这样做：

```
var funkyPromise = $.getJSON('http://funky.json.service.com');
var awesomePromise = $.getJSON('http://awesome.json.service.com');

$.when(funkyPromise, awesomePromise).then(function() {
  /* do something amazing with the two objects */
}, function() {
  /* at least one of the services failed this time */
}); 
```

使用 jQuery 系统可以做的另一件事是在最终使用它之前，通过使用该方法将数据从一个到另一个`Deferred`“链接”来创建数据管道：`Deferred``pipe`

```
$.getJSON('http://funky.json.service.com')
  .pipe(funkytoFunkier);
}).done(function(funkyData) {
    /* we now have a funkier version of what the web service gave us */
}); 
```

一切都奇妙地异步和解耦。

但是，如果我想`$.when()`在两个 asynchronous `Promise`s 上使用，但我们还没有其中一个，因为它将`pipe`异步通过，会发生什么？

```
var funkyPromise = $.getJSON('http://funky.json.service.com');
var awesomePromise = $.getJSON('http://awesome.json.service.com');

// run "funky" through an asynchronous "pipe" to get "funkier"
//
// ... but ... how ??

$.when(funkyier, awesome).then(function() {
  /* do something amazing with the two objects */
}, function() {
  /* at least one of the services failed this time */
}); 
```

那么中间部分是什么？

*   是不是很明显，我就是看不到？
*   有没有可能，但有些微妙和棘手？
*   一些新的“倒置”等价物`pipe()`会`$.when()`让它更容易吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:36:48.467

[pipe()](http://api.jquery.com/deferred.pipe/)返回一个新的 Promise，当管道被解析时，它会被解析，所以你只需要写：

```
var funkyPromise = $.getJSON('http://funky.json.service.com');
var awesomePromise = $.getJSON('http://awesome.json.service.com');

$.when(funkyPromise.pipe(funkytoFunkier), awesomePromise).then(function() {
  /* do something amazing with the two objects */
}, function() {
  /* at least one of the services failed this time */
}); 
```

请注意，从 jQuery 1.8 开始，与 jQuery`then()`做同样的事情`pipe()`，因此这两种方法基本上是可以互换的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:06:51.613

[@Frédéric Hamidi 知道正确的答案](https://stackoverflow.com/a/12283911/527702)，但我必须弄清楚`(-:`这是一个小例子，我在 Frédéric 写下他的答案之后但在我阅读之前开始工作：

[>> jsFiddle ...](http://jsfiddle.net/hippietrail/Jxj7n/1/)

```
function foo() {
    var time = Math.floor(Math.random() * 3000),
        d = $.Deferred();

    console.log('foo starting: ' + time);
    setTimeout(function() {
        console.log('foo resolving');
        d.resolve(time);
    }, time);

    return d.promise();
}

function bar() {
    var time = Math.floor(Math.random() * 500),
        d = $.Deferred();

    console.log('bar starting: ' + time);
    setTimeout(function() {
        console.log('bar resolving');
        d.resolve(time);
    }, time);

    return d.promise();
}

function baz(previousTime) {
    var time = Math.floor(Math.random() * 500),
        d = $.Deferred();

    console.log('baz starting: ' + time);
    setTimeout(function() {
        console.log('baz resolving');
        d.resolve(previousTime + ' + ' + time + ' = ' + (previousTime + time));
    }, time);

    return d.promise();
}

$.when(foo(), bar().pipe(baz))
    .then(function(foo, barBaz) {
        console.log('when OK', [foo, barBaz]);
    });​ 
```

# vb.net - 我可以将 Excel 应用程序对象设置为指向已打开的 Excel 实例吗？

> ID：12282310
> 
> 赞同：1
> 
> 时间：2012-09-05T13:15:51.323
> 
> 标签：vb.net, excel

我目前正在尝试创建一个导出工具来将数据推送到 Excel 中。但是，在第一次推送之后，Excel 保持打开状态，有时用户可能希望在将更多数据推送到同一个 Excel 工作表中的另一个页面时让 Excel 保持打开状态。我通常会在导出完成后释放 COM 对象。我的方法现在的工作方式涉及每次导出时打开一个新的 excel 实例......

创建应用程序的全局实例以从我开始导出到 Excel 应用程序关闭时连续使用是否有益？

我是否应该使用事件处理程序来检测 Excel 何时关闭，以便我知道何时释放 COM 对象？

如果我确实尝试创建 Excel 应用程序的全局实例，我可以实例化它并等待释放它，这样我就不需要再次尝试查找打开的 excel 实例.. 但如果我需要查找，并且分配给一个变量，一个打开的 Excel 实例（以前存在于代码中，但释放了 COM 对象），我该怎么做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:11:09.243

我过去用过这个。tPath 是应该打开/重用的我的 excel 文件的路径。

```
Dim exApp As New Excel.Application

'finds the workbook.  If it is already open, then it uses that.  Otherwise, it opens in new instance
Dim wb As Excel.Workbook
wb = System.Runtime.InteropServices.Marshal.BindToMoniker(tPath)
exApp = wb.Parent 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T14:21:16.280

您可以使用互操作库指向打开的 excel-app

（此代码是用 C# 编写的，因此 VB.Net 可能会有一些小的变化）

```
oExcel = (Excel.Application)System.Runtime.InteropServices.Marshal.GetActiveObject("Excel.Application") 
```

# sql - 使用 Postgres 获取每个查询的单例值

> ID：12282313
> 
> 赞同：2
> 
> 时间：2012-09-05T13:15:58.307
> 
> 标签：sql, postgresql, plpgsql, postgresql-9.1, sql-server-mars

由于 Postgres 似乎没有每个 UDF 的多个结果集的功能（[SQL Server 有](http://msdn.microsoft.com/en-us/library/ms345109%28v=sql.90%29.aspx)）。返回查询范围的单例值的最佳方法是什么？例如，在对 FTS 搜索的结果进行分页时，如果我们可以获得与查询匹配的结果数量（无需使用分页遍历所有页面），它会简化逻辑。

**方法一：**将 post_count 粘贴在 SELECT 列表中。缺点：重复

**方法二：**编写一个单独的 UDF 来获取 post_count 缺点：多个 UDF 调用（我使用这种方法，它使能够呈现第一页的延迟加倍）。

**方法三：**对结果集使用数组，并将 post_count 作为结果集的兄弟放在顶层 缺点：慢得多 - 也许这是由于`array_agg()`函数（是的，我尝试了这种方法）。

那么这个问题是否有更务实的解决方案，如果没有，开发流程中是否有任何东西可以解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:19:25.910

我自己反复遇到这个问题，并没有找到*一个*解决方案。

我最新的方法是将返回的 SET 的***第一*行定义为元数据。**您的方法列表中还没有那个。该应用程序使用第一行进行簿记。实际数据从第二行开始。

明显的弱点：您必须处理必须压缩到元数据中的任何行定义。不过，一个简单的总数将适合任何数字或字符串类型。
当然，您必须对应用程序中的第一行进行特殊处理。

`foo`这个简单的示例从定义为的表中返回行

```
CREATE TABLE foo (
  foo_id serial PRIMARY KEY
 ,foo    text
 ); 
```

页面大小为 20 行，默认在函数标题中预设：

```
CREATE OR REPLACE FUNCTION f_paginate(_max_id int, _limit int = 20
                                                 , _offset int = 0)
  RETURNS TABLE(foo_id int, foo text) AS
$BODY$
BEGIN

SELECT INTO foo_id  count(*)::int
FROM   foo f
WHERE  f.foo_id < _max_id; -- get count

RETURN NEXT;               -- use first row for meta-data

RETURN QUERY               -- actual data starts with second row
SELECT f.foo_id, f.foo
FROM   foo f
WHERE  f.foo_id < _max_id
LIMIT  _limit
OFFSET _offset;

END;
$BODY$
  LANGUAGE plpgsql; 
```

称呼：

```
SELECT * FROM f_paginate(100); 
```

回报：

```
foo_id | foo
-------+----
86     | <NULL>    <-- first row = meta-data
1      | bar       <-- actual data
2      | baz
... 18 more ... 
```

显然这种方法可以通过更高的_limit（页面大小）节省一些带宽。只有几行，几乎不值得开销。

另一种方法是您的**“方法一” - 冗余添加一列**：

```
CREATE OR REPLACE FUNCTION f_paginate2(_max_id int, _limit int = 20
                                                  , _offset int = 0)
  RETURNS TABLE(foo_id int, foo text, ct bigint) AS
$BODY$
BEGIN

RETURN QUERY
SELECT f.foo_id, f.foo, count(*) OVER ()
FROM   foo f
WHERE  f.foo_id < _max_id
LIMIT  _limit
OFFSET _offset;

END;
$BODY$
  LANGUAGE plpgsql VOLATILE; 
```

称呼：

```
SELECT * FROM f_paginate2(100); 
```

回报：

```
foo_id | foo | ct
-------+-----+----
1      | bar | 86
2      | baz | 86
... 18 more ... 
```

在这个简单的情况下，性能非常相似。第一个查询稍微快一点，但可能只是因为`count(*) OVER ()`减慢了第二个查询。单独运行 just`count(*)`更快。

# ios - iphone 的 UIPickerView 替代品之类的组合框？

> ID：12282314
> 
> 赞同：1
> 
> 时间：2012-09-05T13:15:59.360
> 
> 标签：ios, ios4, combobox

是否有任何替代控件而`UIPickerView`不是**XCode**。如果是，它们是如何工作的？任何人都可以提出替代方案`UIPickerView`吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:29:21.790

使用 iPhone 界面，像网站一样启用组合框是不可行的。（我相信即使是苹果指南也会说不要这样做）。您需要做的是使用`UITableView`使用户能够选择一个选项。

您可以做的一件事是决定是否要在与其他控件共享的视图中进行选择。或者，如果您的列表太长，您可以选择推送一个仅包含选项的新视图，并且当用户选择一个时，视图将弹出一个级别。

这是我的意思的屏幕截图（也许不是最好的例子）：

![在此处输入图像描述](../Images/203444bdd7c761cb67990da4db453754.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:26:38.250

如果您下载免费的 One Stop Plus 应用程序（女装），您可以看到一个正在运行的应用程序，深入了解产品，直到您获得颜色、尺寸等的视图。点击这些按钮会在按钮之外为表格设置动画，并提供选择. 选择一个会使表格动画回到按钮中。如果您喜欢该帖子，请对此答案发表评论，我可以告诉您如何操作。

# ios - 如何修改 Rosywriter 演示以显示 1080p 视频的所有内容

> ID：12282324
> 
> 赞同：2
> 
> 时间：2012-09-05T13:16:20.927
> 
> 标签：ios, opengl-es

我正在开发一个来自 RosyWriter 演示的测试应用程序，通过原始代码，当我们拍摄 1920*1080 尺寸的视频时，实际上我们只能在预览中看到 1620*1080 区域（纵横比为 4/3、960*640 )，我想修改代码以显示视频的所有内容（窗口大小应为 960*540），视图上下有黑框。我可以弄清楚下面的代码实现了这个结果：

```
- (CGRect)textureSamplingRectForCroppingTextureWithAspectRatio:(CGSize)textureAspectRatio toAspectRatio:(CGSize)croppingAspectRatio
{
    CGRect normalizedSamplingRect = CGRectZero;
    CGSize cropScaleAmount = CGSizeMake(croppingAspectRatio.width / textureAspectRatio.width, croppingAspectRatio.height / textureAspectRatio.height);
    CGFloat maxScale = fmax(cropScaleAmount.width, cropScaleAmount.height);
    CGSize scaledTextureSize = CGSizeMake(textureAspectRatio.width * maxScale, textureAspectRatio.height * maxScale);

    if ( cropScaleAmount.height > cropScaleAmount.width ) {
        normalizedSamplingRect.size.width = croppingAspectRatio.width / scaledTextureSize.width;
        normalizedSamplingRect.size.height = 1.0;
    }
    else {
        normalizedSamplingRect.size.height = croppingAspectRatio.height / scaledTextureSize.height;
        normalizedSamplingRect.size.width = 1.0;
    }
    // Center crop
    normalizedSamplingRect.origin.x = (1.0 - normalizedSamplingRect.size.width)/2.0;
    normalizedSamplingRect.origin.y = (1.0 - normalizedSamplingRect.size.height)/2.0;

    return normalizedSamplingRect;
}

- (void)displayPixelBuffer:(CVImageBufferRef)pixelBuffer 
{
    if (frameBufferHandle == 0) {
        BOOL success = [self initializeBuffers];
        if ( !success ) {
            NSLog(@"Problem initializing OpenGL buffers."); 
        }
    }

    if (videoTextureCache == NULL)
        return;

    // Create a CVOpenGLESTexture from the CVImageBuffer
    size_t frameWidth = CVPixelBufferGetWidth(pixelBuffer);
    size_t frameHeight = CVPixelBufferGetHeight(pixelBuffer);
    CVOpenGLESTextureRef texture = NULL;
    CVReturn err = CVOpenGLESTextureCacheCreateTextureFromImage(kCFAllocatorDefault, 
                                                                videoTextureCache,
                                                                pixelBuffer,
                                                                NULL,
                                                                GL_TEXTURE_2D,
                                                                GL_RGBA,
                                                                frameWidth,
                                                                frameHeight,
                                                                GL_BGRA,
                                                                GL_UNSIGNED_BYTE,
                                                                0,
                                                                &texture);

    if (!texture || err) {
        NSLog(@"CVOpenGLESTextureCacheCreateTextureFromImage failed (error: %d)", err);  
        return;
    }

    glBindTexture(CVOpenGLESTextureGetTarget(texture), CVOpenGLESTextureGetName(texture));

    // Set texture parameters
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_LINEAR);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_S, GL_CLAMP_TO_EDGE);
    glTexParameteri(GL_TEXTURE_2D, GL_TEXTURE_WRAP_T, GL_CLAMP_TO_EDGE);   

    glBindFramebuffer(GL_FRAMEBUFFER, frameBufferHandle);

    // Set the view port to the entire view
    glViewport(0, 0, renderBufferWidth, renderBufferHeight);
    //NSLog(@"render width:%d height:%d",renderBufferWidth,renderBufferHeight);

    static const GLfloat squareVertices[] = {
        -1.0f, -1.0f,
        1.0f, -1.0f,
        -1.0f,  1.0f,
        1.0f,  1.0f,
    };

    // The texture vertices are set up such that we flip the texture vertically.
    // This is so that our top left origin buffers match OpenGL's bottom left texture coordinate system.

    CGRect textureSamplingRect = [self textureSamplingRectForCroppingTextureWithAspectRatio:CGSizeMake(frameWidth, frameHeight) toAspectRatio:self.bounds.size];

    GLfloat textureVertices[] = {
        CGRectGetMinX(textureSamplingRect), CGRectGetMaxY(textureSamplingRect),//0.078125, 1.0
        CGRectGetMaxX(textureSamplingRect), CGRectGetMaxY(textureSamplingRect),//0.921875, 1.0
        CGRectGetMinX(textureSamplingRect), CGRectGetMinY(textureSamplingRect),//0.078125, 1.0
        CGRectGetMaxX(textureSamplingRect), CGRectGetMinY(textureSamplingRect),//0.921875, 0.0
    };

    // Draw the texture on the screen with OpenGL ES 2
    [self renderWithSquareVertices:squareVertices textureVertices:textureVertices];
    //[oglContext presentRenderbuffer:GL_RENDERBUFFER];
    glBindTexture(CVOpenGLESTextureGetTarget(texture), 0);

    // Flush the CVOpenGLESTexture cache and release the texture
    CVOpenGLESTextureCacheFlush(videoTextureCache, 0);
    CFRelease(texture);
} 
```

我想我必须修改 textureSamplingRect 和 textureVertices 部分来获得我的效果，但我是 opengl 的新手，所以，谁能详细说明如何做到这一点？

# jquery - 检查特定元素是否附加了特定的 jquery 方法

> ID：12282325
> 
> 赞同：0
> 
> 时间：2012-09-05T13:16:21.347
> 
> 标签：jquery, slidetoggle

我有以下 jQuery 代码。我想做的是执行一个 if 语句来查看**$("#div3").slideToggle("slow");** 存在 - 如果是，则不执行它。基本上，在页面视图期间，从这个级别开始的代码会多次运行。所以如果#button被点击，在父“点击功能”被点击多次后，#div3会切换多次。我找到了其他解决方法，例如取消绑定元素。但是，由于各种原因，我不能这样做或其他解决方法，因为它会影响我的其他代码。在我展示的代码中，还有比这一个方法更多的方法。有没有办法检查**$("#div3").slideToggle("slow");** 当前页面中已经存在？谢谢！

```
$('#button').click(function() {
$("#div3").slideToggle("slow");
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:20:51.180

您可以使用以下方法检查函数是否存在：

```
$("#div3").slideToggle == null 
```

特别是您可以检查事件是否绑定：

```
$("#div3").data("events").click == null 
```

或者，您可以像这样向 $('#div3') 添加一个新属性：

```
$("#div3").clickEventHasBeenAdded = true;
if(!$("#div3").clickEventHasBeenAdded) {
  //Do something
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:30:11.947

试试这个

***HTML***

```
<div>
    <input type="submit" value="submit" id="button">
    <div id="div1">item 1</div>
    <div id="div2">item 2</div>
    <div id="div3">item 3</div>
    <script type="text/javascript">
      $('#div3').slideToggle("slow");
    </script>
</div> 
```

***JS代码***

```
$('#button').click(function() {
    if($('#div3').slideToggle("slow")!=null){
       alert('true');  
    } else{alert('false');}
}); 
```

***[http://jsfiddle.net/e3aHc/3/](http://jsfiddle.net/e3aHc/3/)***

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T15:34:46.680

使用 jQuery 的[one()](http://api.jquery.com/one/)方法。

```
$(document).one('click', '#button', function() {
    $("#div3").slideToggle("slow");
}); 
```

# ruby-on-rails - 仅在电话号码不为空时验证

> ID：12282327
> 
> 赞同：1
> 
> 时间：2012-09-05T13:16:27.393
> 
> 标签：ruby-on-rails, validation, activerecord

我可以在模型中验证 phone_number 的唯一性，如下所示：

```
validates :phone_number, :uniqueness => true 
```

问题是数据库中没有一个用户有电话号码，所以他们都是空的。在加载页面时，没有输入任何电话号码，我不断收到以下验证错误：

```
Validation failed: Phone number has already been taken 
```

似乎它甚至对空电话号码进行了验证。

如何修改验证以仅适用于 params 中的非空电话号码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:20:45.773

要么：

```
validates :phone_number, :uniqueness => true, :allow_nil => true 
```

如果 phone_number 为*nil*（或数据库中为 NULL），则通过，或者这样：

```
validates :phone_number, :uniqueness => true, :allow_blank => true 
```

如果 phone_number 为*nil*或空字符串，则通过

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:18:41.657

Rails 开箱即用。检查文档：[http ://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_uniqueness_of](http://api.rubyonrails.org/classes/ActiveRecord/Validations/ClassMethods.html#method-i-validates_uniqueness_of)

```
validates_uniqueness_of :phone_number, :allow_blank => true 
```

# regex - joomla 2.5 语言文件的正则表达式

> ID：12282329
> 
> 赞同：0
> 
> 时间：2012-09-05T13:16:31.137
> 
> 标签：regex, eclipse, notepad++

我有一个看起来像这样的 joomla 1.7 语言文件

```
LUOGO NASCITA="Luogo di nascita:"
NAZIONE="Nazione:" 
```

我需要将其更改为

```
LUOGO_NASCITA="Luogo di nascita:"
NAZIONE="Nazione:" 
```

由于 2.5 joomla 决定不允许键名中有空格（[http://docs.joomla.org/Specification_of_language_files](http://docs.joomla.org/Specification_of_language_files)），我正在使用 Eclipse 或 Notepad++ 搜索 [AZ] [AZ]。

如何在不删除左右字母的情况下使用下划线“_”更改空格“”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:18:30.463

为正则表达式使用捕获组：

```
/([A-Z])\s([A-Z])/g 
```

并替换为

```
$1_$2 
```

但请注意，这也会删除您语言本身中的任何此类字符串。

# android - API 8 NumberPicker 的替代品

> ID：12282337
> 
> 赞同：4
> 
> 时间：2012-09-05T13:16:50.187
> 
> 标签：android

> **可能重复：**
> [如何在 Android API 7 中实现 NumberPicker？](https://stackoverflow.com/questions/9205060/how-would-one-implement-a-numberpicker-in-android-api-7)

我需要在 0 到 12 范围内选择一个小整数。我的 UI 中的空间是有限的，并且必须比高度宽。API 8 中是否有可用的小部件允许我执行此操作？

**编辑：**重新可能重复以前的 SO 问题。我看到了一个密切相关的问题，但是 A）它没有“横向”限制和 B）关于可以从 api 11 复制代码的建议没有跟进具体如何做的解释。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T13:26:10.340

最简单（但也是最难看的）是带有 inputtype 编号的 edittext。

但是从头开始制作一个数字选择器并不难。

您只需要一个将变量作为文本的 Textview。添加一个 + 和 - 按钮，增加/减少变量并调用 Textview.setText(variable)

```
final int[] counter = {0};
Button add = (Button) findViewById(R.id.bAdd);
Button sub = (Button) findViewById(R.id.bSub);
TextView display = (TextView) findViewById(R.id.tvDisplay);

add.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
    counter[0]++;
    display.setText( "" + counter[0]);
    }
});

sub.setOnClickListener(new View.OnClickListener() {

    public void onClick(View v) {
    counter[0]--;
    display.setText( "" + counter[0]);
    }
}); 
```

在 xml 中只需添加 2 个 id 为 bAdd 和 bSub 的按钮以及一个 id 为 tvDisplay 的 textview 并按照您的意愿排列它们

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:14:07.050

试试看这个[Custom Number Picker](https://github.com/mrn/numberpicker)。我将从这个开始，简单地将控件的布局修改为水平方向。

另一种选择是找到 Android 2.3.4 NumberPicker 和 NumberPickerButton 的源代码并复制它。这还需要复制这些控件所需的资源。同样，您需要将按钮布局修改为水平方向。

我不建议使用 API 11 或更高版本的 NumberPicker。您会发现 API 8 无法使用的新类有很多依赖项。

# java - Android 如何计算网络使用数据包/数据

> ID：12282340
> 
> 赞同：7
> 
> 时间：2012-09-05T13:17:01.917
> 
> 标签：java, android, android-intent, network-programming

现在一天上网是非常昂贵的。提供商使用的收费像地狱一样。我们不使用无限的互联网计划。这就是为什么我想开发一个可以计算（管理）网络包/数据使用的工具。

假设我已经激活了 5GB 数据计划。所以我需要在上网之前检查，上传/下载东西。

我知道一些数据提供商提供了这些设施。我想通过我的应用程序在我的 android 设备上捕获网络数据包。但是我怎样才能在我自己的代码中做到这一点。任何帮助将不胜感激。谢谢提前

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:33:48.853

请检查一下。

```
TextView infoView = (TextView)findViewById(R.id.traffic_info);
String info = "";

info += "Mobile Interface:\n";
info += ("\tReceived: " + TrafficStats.getMobileRxBytes() + " bytes / " + TrafficStats.getMobileRxPackets() + " packets\n");
info += ("\tTransmitted: " + TrafficStats.getMobileTxBytes() + " bytes / " + TrafficStats.getMobileTxPackets() + " packets\n");

info += "All Network Interface:\n";
info += ("\tReceived: " + TrafficStats.getTotalRxBytes() + " bytes / " + TrafficStats.getTotalRxPackets() + " packets\n");
info += ("\tTransmitted: " + TrafficStats.getTotalTxBytes() + " bytes / " + TrafficStats.getTotalTxPackets() + " packets\n");

infoView.setText(info); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:43:11.503

从 APILevel 8 开始使用 TrafficStats 类。您可以获得每个无线接入技术和每个应用程序的总体使用情况。

见[http://developer.android.com/reference/android/net/TrafficStats.html](http://developer.android.com/reference/android/net/TrafficStats.html) 都是静态方法，例如调用 TrafficStats.getMobileRxBytes()

# file-upload - nginx 文件使用 proxy_pass 上传流式传输

> ID：12282342
> 
> 赞同：46
> 
> 时间：2012-09-05T13:17:04.927
> 
> 标签：file-upload, nginx

我将 nginx 配置为我的 node.js 应用程序的反向代理，用于使用 proxy_pass 指令上传文件。它可以工作，但我的问题是 nginx 等待整个文件主体上传，然后再将其传递到上游。这给我带来了问题，因为我想在我的应用程序中跟踪上传进度。知道如何配置 nginx 以便将文件主体实时流式传输到上游吗？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-09-07T00:10:19.000

没有办法（至少到目前为止）。在 nginx 开始将其发送到上游之前，完整的请求将始终被缓冲。要跟踪上传的文件，您可以尝试[上传进度](http://wiki.nginx.org/HttpUploadProgressModule)模块。

更新：在 nginx 1.7.11 中， [proxy_request_buffering](http://nginx.org/r/proxy_request_buffering)指令可用，它允许禁用请求正文的缓冲。不过应该小心使用，请参阅文档。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-11T09:12:23.783

Tengine（来自 nginx 的一个分支）通过将 proxy_request_buffering 设置为 off 来支持无缓冲上传。

[http://tengine.taobao.org/document/http_core.html](http://tengine.taobao.org/document/http_core.html)

**更新：**在 nginx 1.7.11 中， [proxy_request_buffering](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_request_buffering)指令可用，正如上面提到的[@Maxim Dounin](https://stackoverflow.com/users/1597813/maxim-dounin)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-05T13:39:11.600

我怀疑：

```
proxy_buffering off; 
```

是您需要的，请参阅[http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering](http://nginx.org/en/docs/http/ngx_http_proxy_module.html#proxy_buffering)

# .net - c#.net 中的增量 MapReduce

> ID：12282343
> 
> 赞同：1
> 
> 时间：2012-09-05T13:17:07.087
> 
> 标签：.net, mongodb, mongodb-.net-driver

我有以下格式的数据..

Type C_ID Assitor CollectionDate 粒度计数器

10 08-08-2012 00:00 15 0.9912378

乙 5 08-08-2012 00:00 15 0.1860929

C b 4 08-08-2012 00:00 15 0.5345317

直流 1 08-08-2012 00:15 15 0.8656529

E b 1 08-08-2012 00:15 15 0.3249502

10 08-08-2012 00:15 15 0.3743117

乙 5 08-08-2012 00:30 15 0.2608622

C b 4 08-08-2012 00:30 15 0.0079308

直流 1 08-08-2012 00:30 15 0.7094781

E b 1 08-08-2012 00:45 15 0.6133461

10 08-08-2012 00:45 15 0.3035875

乙 5 08-08-2012 00:45 15 0.6093015

C b 4 08-08-2012 01:00 15 0.4104008

直流 1 08-08-2012 01:00 15 0.1687753

E b 1 08-08-2012 01:00 15 0.6627076

一个 10 08-08-2012 01:15 15 0.1901386 .....

等等..

我想每小时在这张表上做增量mapreduce。在CollectionDate上是显示记录何时到来的字段。但是我想要的所有这些代码都在c#.net中

我已经完成了 mapReduce，但问题是我每 15 分钟获得 3 条记录，每小时获得 12 条记录，1 小时后，这 15 条记录将减少..在接下来的 1 小时后，其余记录将在相同的基础上减少..

我只能在 c#.net 中获得这方面的帮助吗？自过去 20 天以来，我遇到了很大的麻烦。

它多余的csv文件..我从哪里得到记录..n使用c＃插入mongodb..在mongodb中它看起来像这样：{“_id”：a324b2f89d2e98fa21f，“Type”：A，“C_ID”：a， “assitor”：10，“CollectionDate”：08-08-2012 00:00，“Granulity”：15，“Counter”：0.1901386 } {“_id”：a324b2f89d2e98a216f，“Type”：B，“C_ID”：a， “assitor”：10，“CollectionDate”：08-08-2012 00:00，“Granulity”：15，“Counter”：0.1233542 } {“_id”：a324b2f89d2e98a3f2c，“Type”：A，“C_ID”：b， “assitor”：12，“CollectionDate”：08-08-2012 00:15，“Granulity”：12，“Counter”：0.8134552 } {“_id”：a324b2f89d2e98b4e2d，“Type”：B，“C_ID”：b，“assitor”：12，“CollectionDate”：08-08-2012 00:15，“Granulity”：12，“Counter”：0.3218547 }

输出文件：{“_id”：a8f3e231d456a675b23c，“CollectionDate”：08-08-2012 00:00 “AvgCounter”：} {“_id”：a8f3e232456a675a42cd，“CollectionDate”：08-08-2012 01:00 “AvgCounter” {“_id”：a8f3e231d46a67a0b4d2，“CollectionDate”：08-08-2012 02:00“AvgCounter”：}

表示每小时汇总..

直到我做了什么...

```
private static void MapReduce(MongoDatabase db, String collName, BsonValue bsonValue, DateTime oldDateTime, DateTime newDateTime)
    {
        var collection = db.GetCollection<BsonDocument>(collName);
        Console.WriteLine(TotalReduction++); 
        String map = @"function() { 
                                var sample = this;
                                emit(sample.CollectionDate, {CID: sample.C_ID, count:1, CollectionTime: sample.CollectionDate});
                             }";
        String reduce = @"function(key, values) {
                                var result = {CID: '', count:0};
                                values.forEach(function(value){
                                    result.CID += value.CID;
                                    result.count += value.count;
                                    result.CollectionTime = value.CollectionTime;
                                });
                                return result;
                                }";
        var options = new MapReduceOptionsBuilder();
        IMongoQuery[] queries = { Query.EQ("CollectionTime", bsonValue) };
        options.SetOutput(MapReduceOutput.Inline);
        IMongoQuery query = Query.And(queries);
        var results = collection.MapReduce(queries[0], map, reduce);
        collection = db.GetCollection<BsonDocument>("MSS_REDUCE");
        IEnumerable<BsonDocument> bdoc = results.GetResultsAs<BsonDocument>();
        collection.InsertBatch<BsonDocument>(bdoc);
    } 
```

谢谢拉维夏尔马

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:16:58.470

所以，我还是有点不清楚你的数据集。我可以指出一件事，希望它会有所帮助......

在您的地图中，您不会发出要分组的实际日期，而是发出包含所有内容的日期。相反，您应该发出一个删除了分钟、秒和毫秒的密钥。此外，如果您打算按 _id 进行分组，您也需要发出它。

```
String map = @"function() { 
    var sample = this;
    var d = sample.CollectionDate;
    var newCollectionDate = new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), 0, 0, 0);
    emit({C_ID: sample.C_ID, CollectionDate: newCollectionDate}, {C_ID: sample.C_ID, Count: 1, CounterSum: sample.Counter, CounterAverage: 0, CollectionDate: newCollectionDate});
}"; 
```

然后，您的 reduce 函数需要跟踪值的计数和总和。

```
String reduce = @"function(key, values) {
    var result = {C_ID: key.C_ID, Count:0, CounterSum: 0, CounterAverage: 0, CollectionDate: key.CollectionDate};
    values.forEach(function(value){
        result.Count += value.Count;
        result.CounterSum += value.CounterSum;
    });
    return result;
}"; 
```

您还需要一个 finalize 方法来进行平均...

```
String finalize = @"function(key, value) {
    if(value.Count > 0) {
        value.CounterAverage = value.CounterSum / value.Count;
    }
    return value;
}"; 
```

希望这能让你到达你需要去的地方。

# php - Codeigniter 动态路由

> ID：12282346
> 
> 赞同：0
> 
> 时间：2012-09-05T13:17:11.963
> 
> 标签：php, codeigniter

在我的 CI 应用程序中，我有一些控制器来处理不同的用户类型功能：

1.  加州
2.  光盘
3.  DV
4.  CSC
5.  CB

所以目前当有人登录时，他会被他的角色重定向到（示例）：`localhost/CA`或`localhost/CD`等等。

我需要重写路由以根据他的角色重定向所有内容：

`$route['(:any)'] = 'CA/$1';` （CA 不应被硬编码）

*   使用登录控制器时也应该删除该规则（通过过滤一些 url）

谁能告诉我登录后如何挂钩规则？以及如何使用正则表达式来过滤一些应用规则的 url？

```
$route['^((?!auth/).)*$'] = '$1'; 
```

还有什么其他方法可以实现这一目标？.htaccess 是不可能的，因为我需要一些数据逻辑来创建路由。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T15:34:14.290

感谢[这个](http://darrenonthe.net/2011/05/06/dynamic-routing-from-database-in-codeigniter/)关于从数据库路由的精彩教程，我设法在用户登录后添加新路由（在我的 Auth 控制器中）：

```
class Auth extends CI_Controller {
function Auth() {
    parent::__construct();
}
function index()
{
    if ($this->ion_auth->logged_in())
    {
        $this->__checkRoles();
    }
function __checkRoles()
    {       
        $role=$this->ion_auth->get_group();
        $this->save_routes($role);

        redirect(base_url().'index');

    }
    public function save_routes($controller=null)
    {
            $output="<?php ";
                    //some uri's don't need routing
            $output.="\$route['auth']='auth';";         
            $output.="\$route['auth/(:any)']='auth/$1';";                       
            $output.="\$route['rest']='rest';";
            $output.="\$route['rest/(:any)']='rest/$1';";

                    //for the rest route trough the "user-type" controller
            $output.="\$route['(:any)']='".$controller."/$1';";

            $this->load->helper('file');
                    //write to the cache file
            write_file(APPPATH . "cache/routes.php", $output);
    } 
```

我的 routes.php 看起来像这样：

```
$route['404_override'] = '';
$route['default_controller'] = "auth";

include_once(APPPATH."cache/routes.php"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:46:47.883

听起来您想要实现[重新映射](http://codeigniter.com/user_guide/general/controllers.html#remapping)：标准路由系统并非旨在让您根据用户是否登录来更改路由。

但是，您可能（我从未见过这样的工作）能够将条件语句放在标准 routes.php 文件中，以检查用户是否已登录以及他们的角色是什么（查看会话 cookie 或类似的东西那）然后加载不同的路线选项。从未尝试过，但这可能对你有用。

# c++ - 将 truetype 字形转换为 OpenGL 多边形

> ID：12282349
> 
> 赞同：14
> 
> 时间：2012-09-05T13:17:23.800
> 
> 标签：c++, windows, opengl, truetype

我正在尝试为任何已安装的 truetype 字体创建一个转换库，将其转换为一系列可用于在 OpenGL 中显示文本的多边形。我使用 GetGlyphOutline 函数将字形转换为一系列轮廓，然后使用 glu 库对这些轮廓进行三角剖分（镶嵌）。

它通常有效，但并非总是有效，并且有一些奇怪的例外。GetGlyphOutline 应该首先以 CW 缠绕顺序返回外部轮廓，并以 CCW 缠绕顺序返回内部轮廓（孔）。不幸的是，根据字体和字形，情况并非如此。有时外轮廓是逆时针缠绕顺序，孔是顺时针，或者虽然缠绕顺序是正确的，但 GetGlyphOutline 返回的轮廓顺序是错误的（例如，我先得到“孔”，然后是外轮廓）。

我尝试调整转换以检查这些奇怪的情况，如有必要，颠倒轮廓的顶点和缠绕顺序，但似乎没有规则，如果一个带有 1 或 2 个孔的字符可以使用几种字体，我总是找到一个例外。例如，使用名为 MinionPro-BoldCn 的字体，即使是数字“8”的字形也由 GetGlyphOutline 返回错误，我最终只得到一个孔而不是两个孔。

我还尝试使用另一种方法而不是 GetGlyphOutline。我使用 GDI 将文本渲染到路径中，然后使用 GetPath 函数获取该路径的轮廓。结果是一样的。在某些字体中，GetPath 返回的某些字符具有错误的轮廓顺序和/或错误的缠绕。

有没有人有这方面的经验，有什么我能做的吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:25:46.960

也许不是一个完美的解决方法，但是一个想法（没有想到任何反例）：

1.  忽略缠绕顺序
2.  将所有字形绘制到模板缓冲区中，每次绘制片段时将模板值增加 1。
3.  在场景上绘制一个四边形，填充模板缓冲区 == 1 的任何像素。

我的想法是，字形未覆盖的任何区域的模板值 == 0，字形内的任何区域的模板值 == 1，字形内的任何孔的模板值 == 2（因为它们被原始字形和“洞”覆盖）。然后，您可以按此过滤以仅绘制模板等于 1 的区域。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-31T02:37:15.000

我已经找到了一个规则来确定轮廓是否划定了字形的外部或内部区域。对于内轮廓中的每条边，必须至少有一个点使得三角形按顺时针缠绕顺序。对于外轮廓中的边，必须没有点使得三角形按顺时针缠绕顺序。[请参阅TrueType 基础知识](http://www.microsoft.com/typography/tt/ttf_spec/ttch01.doc)中的大纲部分。

# qt - Qt：键盘焦点

> ID：12282351
> 
> 赞同：2
> 
> 时间：2012-09-05T13:17:26.457
> 
> 标签：qt, focus, keyboard-events, qwidget

我正在用 Qt 编写一个如下所示的程序：

![屏幕截图](../Images/751f9e94ea3d343e3336795edca03454.png)

主窗口是我的类`Window : QWidget`，它有一个`QGridLayout`包含四个其他小部件（`Input_Menu : QWidget`和`Output_Menu : QWidget`，然后是两个`Canvas : QWidget`）

我想在用户按键时触发某些事件。问题是，`Window`有时会失去焦点（它会说`Input_Menu`，或者可能是`Input_Menu`...中的一个按钮）

我尝试了以下解决方案，但它们似乎不令人满意（而且很脏）：

1.  `Window`每当它失去它时，给它焦点。
2.  告诉每个可能有焦点的小部件在收到键盘事件时触发`Window`'s功能（或它的克隆）。`KeyPressEvent`

理想情况下，我希望如果一个小部件接收到一个事件（比如键盘事件）并且不知道如何处理它，它应该自动调用其父级的事件处理程序。我希望这是 Qt 的默认功能，但它看起来不像。另一方面，我对整个焦点问题感到非常困惑，我真的不明白发生了什么。`std::cout << "key pressed" << std::endl;`有人可以向我解释一下吗：我的`Window::KeyPressEvent`函数中包含了 a 。当我第一次运行我的程序时，似乎焦点在顶部的 QComboBox 上`Input_Menu`：如果我按下向上/向下键，我会在该框中导航，并且在我的控制台中没有显示“按下键”。如果我击中大多数字母，则不会发生任何事情。但是，如果我按左/右键，我的控制台中确实会出现“按下键”！？

非常感谢您的见解。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:41:39.960

您可以安装一个事件过滤器来全局`QApplication`过滤相关事件。`QEvent::KeyPress`来自 Qt 文档：

> 还可以通过在 QApplication 或 QCoreApplication 对象上安装事件过滤器来过滤整个应用程序的所有事件。此类全局事件过滤器在特定于对象的过滤器之前调用。这非常强大，但它也减慢了整个应用程序中每个事件的事件传递；通常应使用所讨论的其他技术。

除了性能考虑之外，请记住在过滤键事件之前检查您的窗口当前是否具有焦点，否则您可能会破坏弹出对话框或输入到其他窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-10T19:06:00.270

实际上，我发现对于作为*修饰符*的键（例如 Shift、Control），Qt 支持查找它们是否被按下。

例如：`if(QApplication::keyboardModifiers() == Qt::ShiftModifier)`...

这已经足够好了。

# unit-testing - 测试具有授权过滤器的 WebAPI 操作

> ID：12282354
> 
> 赞同：2
> 
> 时间：2012-09-05T13:17:39.167
> 
> 标签：unit-testing, asp.net-web-api, dotnet-httpclient

我有一个添加了 [Authorize] 属性的 Web API，这意味着我之前的单元测试现在由于未经授权而失败。这是一个基本测试的示例以及一个初始化方法：

```
[TestInitialize]
public void CreateServer() {
    var config = new HttpConfiguration();
    WebApiConfig.Configure(config); // Create the routes
    var server = new HttpServer(config);
    this.client = new HttpClient(server);
}

[TestMethod]
public void MyThings_GET_Returns_All_MyThings() {
    var response = this.client.GetAsync("http://localhost/api/1.0/mythings").Result;

    var mythings = response.Content.ReadAsAsync<IEnumerable<MyThing>>().Result;

    Assert.AreEqual(HttpStatusCode.OK, response.StatusCode);
    Assert.AreEqual(4, mythings.Count());
} 
```

我想知道是否有任何方法可以让我的测试登录以便它通过授权过滤器，或者是否有任何方法可以作为 ASPXAUTH cookie 与 HttpClient 请求一起传递？还是我没有想到的另一种通过授权的方式？

我尝试过的任何方法似乎都不起作用，而且我很难在任何地方找到任何有用的信息。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T22:04:43.660

您的 Authorize 属性在执行授权检查时会做什么？有很多选择：

*   让授权过滤器支持多种获取所需“授权令牌”的方式（例如，通过 HTTP 标头或查询字符串参数等）
*   在您的测试初始化​​之后，立即从配置中清除过滤器（以便根本不调用它）。如果您选择走这条路线，那么您可能希望弹出一个新过滤器，该过滤器设置任何可能在管道中进一步使用的授权值
*   `IAuthorize`如果您使用依赖注入，请将“授权检查”移动到可以在配置中更新的某种位置

我还建议使用[RestSharp](http://restsharp.org/)对您的端点进行查询，因为它在指定标头、参数等方面做得非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-09T19:42:05.260

我认为我解决问题的方式根本上是错误的。将基于 cookie 的授权与 Web API 一起使用并不是一个好主意，因此我决定摆脱授权属性并改为执行基于 API-Key 的身份验证。这使得测试更容易，因为我可以在请求中传递正确的 API 密钥，但也意味着我不依赖 cookie 进行授权。

# ios - 如何在这样的代码中绘制可调整大小的 UIImage？

> ID：12282362
> 
> 赞同：1
> 
> 时间：2012-09-05T13:17:56.910
> 
> 标签：ios, core-graphics, uisegmentedcontrol

我想为 UISegmentedControl 使用自定义背景图像，例如“查找我的朋友”。以下是他们可调整大小的图像的样子：

[来源 http://feedzr.com/source.png](http://feedzr.com/source.png) [来源 http://feedzr.com/inwork.png](http://feedzr.com/inwork.png)

如何在 Core Graphics 中创建复杂的阴影效果？

**编辑**

底部图像是在真实 UISegmentedControl 中处理皮革背景时的样子。在可调整大小的图像中有很多效果，例如：底部光泽、顶部内阴影和从上到下的部分渐变。

我只是看不到这张图片中使用的效果和效果。我不是在问如何使用 UIEdgeInsets。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:33:15.790

这些只是 2 张图片。一个有影子一个没有……</p>

您必须使用 CapInsets 创建这些图像以使其可调整大小

例如

```
UIImage *buttonImage = [[UIImage imageNamed:@"yourImage"]  
   resizableImageWithCapInsets:UIEdgeInsetsMake(1, 11, 0, 20)]; 
```

要了解 UIEdgeInsets 的工作原理，请阅读： [UIEdgeInsetsMake 是如何工作的？](https://stackoverflow.com/questions/7628004/how-does-uiedgeinsetsmake-works)

或在 Apple Doc 中：

```
UIEdgeInsetsMake
Creates an edge inset for a button or view.

UIEdgeInsets UIEdgeInsetsMake (
   CGFloat top,
   CGFloat left,
   CGFloat bottom,
   CGFloat right
);
Parameters
top
The inset at the top of an object.
left
The inset on the left of an object
bottom
The inset on the bottom of an object.
right
The inset on the right of an object.
Return Value
An inset for a button or view

Discussion
An inset is a margin around the drawing rectangle where each side (left, right, top, and bottom) can have a different value.

Availability
Available in iOS 2.0 and later.
See Also 
```

[http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIKitFunctionReference/Reference/reference.html)

# php - SimpleXML 检查元素是否有子元素并获取子值

> ID：12282363
> 
> 赞同：1
> 
> 时间：2012-09-05T13:18:02.480
> 
> 标签：php, simplexml

我有这个 XML：

```
<?xml version="1.0" encoding="UTF-8"?>
<data>
    <header>
        <export_time>2012-08-28 08:13:36</export_time>
        <file_name>nameasd</file_name>
    </header>
    <shipping>
            <shipping_number>some data</shipping_number>
            <location_id>some data</location_id>
            <status>DONE</status>
                <shipping_line>
                    <article id="1257" />
                    <article id="1177" >
                        <product>5500070000126273</product>
                        <product>5500070000126264</product>
                        <product>5500070000126255</product>
                        <product>5500070000126246</product>
                        <product>5500070000126237</product>
                    </article>
                </shipping_line>
    </shipping>
</data> 
```

ii 可以像这样访问数据：

```
$shipping_number_array = $xml->xpath('/data/shipping/shipping_number');
$location_id_array = $xml->xpath('/data/shipping/location_id');
$shipping_status_array = $xml->xpath('/data/shipping/status');
$shipping_number = $shipping_number_array[0];
$location_id = $location_id_array[0];
$status = $shipping_status_array[0]; 
```

现在我想检查`article`元素是否有任何子元素，如果是，则将它们放入数组中。

这似乎不起作用，我收到错误：在非对象上调用成员函数 hasChildren()。

```
 if ($article_array->hasChildren()) {
                error_log('has children');
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:26:58.047

您可以使用 xpath 的`child::`位置路径来选择文章节点子节点并为文章节点备份一个，如下所示：

```
$article_array = $xml->xpath('//article/child::*/..'); 
```

这应该只返回具有子节点的文章节点（在您的示例中，id 为 1177）。

# c# - 带两个键的字典

> ID：12282367
> 
> 赞同：4
> 
> 时间：2012-09-05T13:18:06.670
> 
> 标签：c#, dictionary

通过字典中的两个键索引值的最佳方法是什么。例如：让具有唯一 ID（整数）和用户名（字符串）的学生创建一个字典，其中包含由 ID 和用户名索引的学生类型对象。然后在检索时使用 ID 或用户名。或者可能是字典不是一个很好的匹配？PS 我知道元组，但没有看到如何在这种情况下使用它们。

编辑：作为使用两个键的替代方法，我可以创建由唯一分隔符分隔的 id 和用户名的字符串表示，然后使用正则表达式匹配键？！例如：“1625|user1”

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-05T13:24:47.637

由于您希望能够通过其中任何一个进行检索，因此您需要两个字典。

假设`Student`类型是引用类型，每个学生仍然只有一个`Student`对象，所以不用担心。

最好将字典包装在一个对象中：

```
public class StudentDictionary
{
  private readonly Dictionary<int, Student> _byId = new Dictionary<int, Student>();
  private readonly Dictionary<string, Student> _byUsername = new Dictionary<string, Student>();//use appropriate `IEqualityComparer<string>` if you want other than ordinal string match
  public void Add(Student student)
  {
    _byId[student.ID] = student;
    _byUsername[student.Username] = student;
  }
  public bool TryGetValue(int id, out Student student)
  {
    return _byId.TryGetValue(id, out student);
  }
  public bool TryGetValue(string username, out Student student)
  {
    return _byUsername.TryGetValue(username, out student);
  }
} 
```

等等。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T13:20:12.280

您可以使用两个保持同步的字典，一个将姓名映射到学生，另一个将 ID 映射到学生。最简单的方法可能是将其包装在您自己的处理同步的类中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T13:20:56.987

不，`Tuple`只有当你总是同时拥有`Id`和时才对你有帮助`Username`。您可以`Dictionaries`为每个键使用 a 。您还可以实现自己的`Dictionary`，使您能够查询两个键，因为它们的类型不同：

```
class MyDictionary : IDictionary<int, Student>, IDictionary<string, Student> {
    // full implementation
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:21:48.687

使用 student 对象是您想要的一个不错的选择，但您必须重写相等函数（Equals 和 GetHashCode）才能使其正常工作。

在更仔细地阅读这部分之后进行编辑“然后在检索时使用 ID 或用户名”我认为我的回答不是最好的方法。我会带两本字典，所以 +1 给@JonHanna。

# php - 定义 PHP 常量 - 我的服务器名称是什么？

> ID：12282368
> 
> 赞同：-1
> 
> 时间：2012-09-05T13:18:06.580
> 
> 标签：php, mysql, localhost

我有：

```
<?php define('DB_SERVER', 'localhost') 
```

如果我把这个 constants.php 文件放在我的网络主机的服务器上，它仍然是“localhost”吗？或者是其他东西。

我使用 hostmonster.com 作为我的网站。这会取代本地主机吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:29:55.773

是的，您仍然应该使用“localhost”连接到数据库服务器。

查看 hostmonitor 帮助“使用数据库”。

[https://my.hostmonster.com/cgi/help/6](https://my.hostmonster.com/cgi/help/6)

使用数据库

> 完成所有这些步骤后，通过 phpMyAdmin、MySQL 软件或使用在线 PHP 或 Perl 脚本创建数据库表。
> 
> ```
> Version: MySQL 5
> Username: username_dbuser
> Database Name: username_dbname
> Hostaddress: localhost
> Port: 3306 
> ```

显然，使用您自己的数据库用户名和数据库名称 :) （创建数据库时获得的那些）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:20:01.510

这是一个字符串。一个简单的硬编码字符串。它不会神奇地改变，因为它不是一个变量。`'localhost'`永远都是`'localhost'`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:21:53.773

不，它没有。您在此处定义一个 PHP 常量，而不是来自服务器标头 (localhost) 的值

# linq - NHibernate：使用带有 IQueryOver 的 LINQ 表达式

> ID：12282369
> 
> 赞同：2
> 
> 时间：2012-09-05T13:18:06.507
> 
> 标签：linq, nhibernate

我正在尝试将 NHibernate 会话对象的 IQueryOver 接口与 LINQ 表达式一起用作在静态类中选择记录的标准。LINQ 表达式在映射类中定义为`Expression<Func<T, object>>`获取对象 T 的值：

```
public void SearchParameter(Expression<Func<T, object>>) 
```

这些参数是通过扩展映射类来添加的：

```
public MyMapping : FindMap<MyNHibernateMappedObject>
{
    public MyMapping()
    {
        this.SearchParameter(x => x.SomeColumn);
    }
} 
```

我的 Find 类定义了用于获取时间轴上相同类型的上一条和下一条记录的静态方法。两个记录中的每个搜索参数必须相同。

Find 类从映射配置中获取搜索参数并使用 .Compile() 编译表达式。所以我有 GetQueryWithSearchParameters 方法：

```
private static Func<T, object> searchParameter;

...

public static IQueryOver<T, T> GetQueryWithSearchParameters(ISession session, T current)
{
    var query = session.QueryOver<T>()
                       .Where(x => searchParameter(x) == searchParameter(current));
    return query;
} 
```

但是，在构建查询时，出现以下异常：

```
System.InvalidOperationException: variable 'x' of type MyNHibernateMappedObject' referenced from scope '', but it is not defined 
```

我不确切知道这里发生了什么，但我怀疑 x 在委托中不可用。我在这里做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:24:16.393

session.QueryOver().Where(...) 接受一个表达式，因此它将尝试评估您的表达式并将其转换为查询 - 即。它将尝试将 searchParameter(x) == searchParameter(current) 转换为 SQL 查询，但它不知道该怎么做。

要使其工作，您需要在代码中构造表达式（而不是使用 lambda 表达式）。但是我认为这将是一个痛苦的练习，我认为您会发现构建 Criterion 并将其添加到 QueryOver 会容易得多。

# sql-server-2008 - 按 id 检索数据

> ID：12282370
> 
> 赞同：1
> 
> 时间：2012-09-05T13:18:06.820
> 
> 标签：sql-server-2008

我通过在组合框中选择名称来检索数据，但如果它有重复的行，它不会显示表的正确 id，所以任何人都可以帮助我通过 id 检索数据，

```
emp_id      firstname    middlename    surname

88          sdf             sdf        sdf 
89          durga           dfg        dfg 
90          Durga           Muthu 
```

当我选择`Durga`或仅`durga`显示`emp_id`为 90时

但如果我选择`sdf`它显示正确的 id`88`

请任何人帮我解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:25:37.093

可能这个可以帮助你

```
SELECT Column1
FROM Table1
WHERE Column1 COLLATE Latin1_General_CS_AS = 'casesearch' 
```

SQL Server 安装 SQL_Latin1_General_CP1_CI_AS 的默认排序规则不区分大小写。

要更改任何表的任何列的排序规则，请永久运行以下查询。

```
ALTER TABLE Table1
ALTER COLUMN Column1 VARCHAR(20)
COLLATE Latin1_General_CS_AS 
```

要了解在存储过程之后运行的任何表的列的排序规则。

```
EXEC sp_help DatabaseName 
```

上面脚本设置的第二个结果将返回数据库 DatabaseName 的排序规则。

[区分大小写的 sql 查询搜索](http://blog.sqlauthority.com/2007/04/30/case-sensitive-sql-query-search/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:29:44.630

在我看来，您正在尝试进行“区分大小写”的选择，是吗？

您应该使用区分大小写的排序规则。

在您的选择查询中尝试：

```
select emp_id from YOUR_TABLE where firstname = 'durga' COLLATE SQL_Latin1_General_CP1_CS_AS;
 select emp_id from YOUR_TABLE where firstname = 'Durga' COLLATE SQL_Latin1_General_CP1_CS_AS; 
```

如果是您需要的，您可以在表格中更改：

```
alter table YOUR_TABLE alter column firstname varchar(20) COLLATE SQL_Latin1_General_CP1_CS_AS; 
```

顺便说一句，您确定按“名字”查询是最好的方法吗？

# actionscript-3 - 如何在 AS 3 的动态文本字段中更改一个单词的颜色

> ID：12282376
> 
> 赞同：1
> 
> 时间：2012-09-05T13:18:33.067
> 
> 标签：actionscript-3, flash, dynamic-text

我有这个功能：

```
private function boldVerb(_phrase:String, _verb:String):String
{
    var newHtmlText:String = "";

    var pattern:RegExp = new RegExp([_verb]);

    newHtmlText = _phrase.replace(pattern, "<b>" + _verb + "</b>");
    return newHtmlText;
} 
```

我想改变函数接收到的这个“动词”的颜色。AS3可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:27:10.880

当然。您可以使用样式表或使用`font`标签（假设它是一个 html 文本字段）。

```
<font color='#FF0000'>This is red</font> 
```

请参阅[此处的文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/text/TextField.html#htmlText)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:58:43.947

此外，由于这是 HTML 格式的文本，您可以有一个带有 .verb 类的样式表，然后带有类属性动词的标签跨度将根据您的需要进行绘制 - 这是为了更大的灵活性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T14:22:02.797

```
private function boldVerb(_phrase:String, _verb:String):String
{
    var newHtmlText:String = "";

    var format:TextFormat = new TextFormat();
    format.color = 0x990000;

    var pattern:RegExp = new RegExp([_verb]);

    newHtmlText = _phrase.replace(pattern, "<b>" + _verb + "</b>");
    textField.setTextFormat(format);

    return newHtmlText;
} 
```

如果 textField 是舞台上的文本字段，这应该可以工作，但这是您在 AS3 中进行文本格式化的方式，请在“AS3 TextFormat”上进行谷歌搜索以获取更多信息。首先，创建一个新的 TextFormat 对象，并给它一个属性，我选择了一个深红色的#990000（在 AS 中为 0x990000），然后将其应用于文本字段。我确定您想要格式化字符串本身，我不记得这在 Flash 中是否可行，但您当然可以编辑文本字段本身。因此，您可能必须将一些文本字段串在一起以获得带有一个重音单词的文本字符串。希望这能让你更近一步！祝你好运！

# jquery - jquery会成功不会出现在div中

> ID：12282382
> 
> 赞同：0
> 
> 时间：2012-09-05T13:18:39.700
> 
> 标签：jquery, ajax

我遇到的问题是我的 jquery 脚本没有将成功返回给 div，而是简单地重新加载页面（这应该是不可能的）。我的代码如下。任何帮助都会很棒，因为我花了很多时间试图让它发挥作用。

```
$(document).ready(function() {
var loader = "<img src='images/ajax-loader.gif' alt='loading...' />";
    $('#paging_container').pajinate({
    show_first_last: false,
    nav_label_next : '>',
    nav_label_prev : '<'    
    });

var loadUrl2 = "productadminprocess.php";
$(".action_buttons").click(function() {
    $("#rightcolumn").html(loader).load(loadUrl2, {productid: $(this).attr("id")});
  });

$("#thesubbie").submit(function(event) {

        /* stop form from submitting normally */
        event.preventDefault(); 

       /* get some values from elements on the page: */
        var loadUrl3 = "sortitems.php";
        var $form = $( this ),
            input = $form.find( 'input[name="sort_item"]' ).val();
        var myRadio = $('input[name=sorters]');
        var checkedValue =  myRadio.filter(':checked').val();

    $.post(loadUrl3, {radio: checkedValue, sort_item: input},
        function(data){
            var content = $(data);
            $('#thebox').html(content);

    });
  }); 
```

});

这是返回数据的 PHP 脚本（本质上是一种排序）

```
function secure($x) { 

  $x = mysql_real_escape_string($x);
   $x = stripslashes($x);
   return $x; 

} 

$sorters = secure($_GET['sorters']);
$sort_item = secure($_GET['sort_item']);

//Start main query
$products = "SELECT * FROM product_list WHERE name_family = '$sort_item'";
//echo $products;
$list = mysql_query($products);
//echo $list;

while($row = mysql_fetch_array($list))  {
    $id = $row['id'];
    $name = $row['product_name'];
?>

    <div class="products"><img src="images/Product_thumbail.png" width="200" height="220" title="<?php echo $name; ?>" alt="<?php echo $name; ?>"><div class="action_buttons" id="<?php echo $id;  ?>">Update</div></div>
<?php       
    } // end while

?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:25:17.187

在 $.post 块中试试这个：

```
$.post(
    loadUrl3,
    { radio: checkedValue, sort_item: input },
    function(data) {
        $('#thebox').html(data);
    }
); 
```

此外，检查您的 JS 错误日志是否有任何错误。

**编辑：**尝试`return false;`在 $("#thesubbie").submit() 块的末尾添加。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:06:07.530

我最终找到了解决方案。就像在表单 id 中放置引号一样简单，这会导致页面重新加载和整个脚本失败。谢谢。

# css - 背景大小的 CSS3 查询

> ID：12282385
> 
> 赞同：1
> 
> 时间：2012-09-05T13:18:41.480
> 
> 标签：css

我目前在 CSS 中使用 background-size 属性。我将它设置为 100%，但是我想要它，这样如果 div 达到 800px 的最小高度，它就会停止调整大小......无论如何我可以强制这样做吗？

提前致谢！

```
#test-bg {
   background:url('../images/test_bg.jpg') 0 0 no-repeat;
   background-size:100%;
   width:100%;
   height:1900px;
   min-height:800px;
   position:absolute;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:28:35.653

我已经通过应用最小宽度来修复它！不管怎么说，多谢拉 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:22:54.117

在 CSS2 中，您可以选择指定`min-height`.

看看下面的链接，看看它是否对你有帮助： http: [//www.w3schools.com/cssref/pr_dim_min-height.asp](http://www.w3schools.com/cssref/pr_dim_min-height.asp)

# c# - 为什么不总是 Dispose？

> ID：12282386
> 
> 赞同：2
> 
> 时间：2012-09-05T13:18:42.287
> 
> 标签：c#, dispose

我知道这个问题已经被问过了，但我的问题比我见过的其他问题更笼统。

当我在我的程序中检查我对控件的使用`Forms`以及`DB`（命令、阅读器等）的命令时，我想到了以下问题：

如果我有一个控件，我不应该`Dispose`在我使用它之后吗？

这样，我将确保我的程序仅使用所需的资源，如果我必须使用已经释放的控件，那么我将再次加载它。

也许有理由不总是处理所有东西，但这就是我问这个问题的原因。

感谢您的任何回答，我希望我说清楚了。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T13:30:56.283

您创建的非可视组件（命令、读取器、I/O 组件，基本上是任何实现的组件`IDisposable`）都应该在您完成它们之后被释放。

对于可视控件，`Form`'`Dispose`函数应该`Controls`自动处理其集合中的所有控件，因此您只需要担心`Controls`出于某种原因从表单中删除的控件。

除非您遇到严重的内存问题，否则尝试手动处理表单控件可能是一种微优化。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T13:31:20.900

是的，如果没有具体的理由反对它，您可能应该处置所有东西。控件在 a`Form`和中时会自动`Form`释放。

不处理 UI 资源并不是很有害。只是比必要的系统资源使用多一点内存。在大多数情况下，这不是功能问题。

当然，这与数据库连接和文件相反！处置它们至关重要。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:31:23.577

如果您使用的是非托管资源，那么可以。继续并实施[IDisposable](http://msdn.microsoft.com/en-us/library/system.idisposable.aspx)，使用[using](http://msdn.microsoft.com/en-us/library/yh598w02%28v=vs.80%29.aspx)将简化您的工作。但并非总是如此，至于你的问题。您的控件（UI 控件）已经实现了此 IDisposable，并且在关闭时将由其父级调用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:32:24.837

是的你应该。在 Windows 窗体窗口（或分别在容器内）中，窗体设计器会为您执行此操作：

```
protected override void Dispose(bool disposing)
{
    if(disposing && (components != null))
    {
        components.Dispose();
    }
    base.Dispose(disposing);
} 
```

# hadoop - com.cloudera.sqoop.SqoopOptions 与 org.apache.sqoop.SqoopOptions 之间有什么区别吗？

> ID：12282388
> 
> 赞同：1
> 
> 时间：2012-09-05T13:18:54.493
> 
> 标签：hadoop, sqoop

```
 Iam new in sqoop.Actual iam used sqoop import & export through command line arguments.But now iam trying to implment with java.I got compile time error when calling expTool.run(sqoopoptions) when using the org.apache.sqoop.SqoopOptions package.If i am trying to use cloudera package instead of apache sqoop package.there is no compile time execption.check the below code snippet 
```

> ```
>  SqoopTool expTool=new ExportTool();
>      SqoopOptions options=new SqoopOptions();
>      options.setConnectString("jdbc:mysql://localhost/sample_db");
>      options.setUsername("hive");
>      options.setPassword("hadoop");
>      options.setExportDir("hdfs://localhost:7002/user/warehouse/output1/part-00000");
>      options.setTableName("warehouse");
>      options.setInputFieldsTerminatedBy(',');
>      expTool.run(options); 
> ```

apache.sqoop 包有什么问题吗？请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-14T23:03:37.843

Sqoop 最初是在 Cloudera github 上公开开发的，因此所有代码都存储在 com.cloudera.sqoop 命名空间中。在 Apache Software Foundation 孵化期间，所有功能都被移至 org.apache.sqoop 命名空间。为了保持向后兼容性，Sqoop 没有删除 com.cloudera.sqoop 命名空间，但是建议用户改用 org.apache.sqoop 中的代码。有关命名空间迁移的详细信息可以在 Sqoop wiki [1] 上找到。

链接：

1：[https ://cwiki.apache.org/confluence/display/SQOOP/Namespace+Migration](https://cwiki.apache.org/confluence/display/SQOOP/Namespace+Migration)

# seo - 搜索引擎和跨两个站点的重复内容

> ID：12282390
> 
> 赞同：1
> 
> 时间：2012-09-05T13:18:58.170
> 
> 标签：seo, duplicate-content

我有一个客户，他提出了以下情况：

一家母公司与其产品的两个分销商合作。两个分销商都希望开发一个新网站。他们都销售相同的产品，因此希望共享内容和基本页面布局。例如，两个站点的产品列表将相同，它们提供的产品的副本也将相同。

我在这里担心的是搜索引擎优化和重复内容。Google 将重复内容定义为：

> 重复内容通常是指在域内或跨域的实质性内容块，它们要么完全匹配其他内容，要么明显相似。

在这种情况下，两个分销商销售相同的产品，每个分销商都有一个复制内容的网站，似乎是合法的。但是，我有一种感觉，任何一个网站都可能受到惩罚。因此，也许拥有两个站点会造成太大的破坏。

对此的任何想法都非常感谢。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:10:02.023

如果帮不上忙，也没关系。理想情况下，您会想要制作独特的描述和内容。

就在几个月前，我有一个登台站点错误地没有 noindex 标签。登台站点和实际站点的关键字排名都很好。

虽然您可能没问题，但您仍然应该考虑为内容开发分配时间。

# arrays - 在 VBScript 中对多维数组进行排序

> ID：12282392
> 
> 赞同：1
> 
> 时间：2012-09-05T13:19:12.930
> 
> 标签：arrays, sorting, vbscript

请问如何根据孔大小参数“排序”多维数组？

例如：一个简单的例子是（从文本文件加载）：

```
> Liv1.HoleSize[0] = 22 Liv1.HoleX[0] = 250 Liv1.HoleY[0] = -55
> Liv1.HoleSize[1] = 14 Liv1.HoleX[1] = 750 Liv1.HoleY[1] = 0
> Liv1.HoleSize[2] = 22 Liv1.HoleX[2] = 900 Liv1.HoleY[2] = -55 
```

然后必须导致：

```
> Liv1.HoleSize[0] = 14 Liv1.HoleX[0] = 750 Liv1.HoleY[0] = 0
> Liv1.HoleSize[1] = 22 Liv1.HoleX[1] = 250 Liv1.HoleY[1] = -55
> Liv1.HoleSize[2] = 22 Liv1.HoleX[2] = 900 Liv1.HoleY[2] = -55 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T20:45:42.943

由于 VBScript 没有原生排序，因此您必须推出自己的排序，或者从朋友那里获得一点帮助。

如果您的任务是按指定顺序将输入文件（给定的逐字）排序到输出文件，那么`sort.exe`您的朋友是：

```
 Dim sIn : sIn = "..\data\in00.txt"
  WScript.Echo readAllFromFile(sIn)
  WScript.Echo "-----------"
  Dim sCmd : sCmd = "sort /+19 " & qq(resolvePath(sIn))
  Dim aRet : aRet = goWSLib.Run(sCmd)
  If aRet(0) Then
     ' handle error
  Else
     WScript.Echo aRet(2)
  End If 
```

输出：

```
================================================================
Liv1.HoleSize[0] = 22 Liv1.HoleX[0] = 250 Liv1.HoleY[0] = -55
Liv1.HoleSize[1] = 14 Liv1.HoleX[1] = 750 Liv1.HoleY[1] = 0
Liv1.HoleSize[2] = 22 Liv1.HoleX[2] = 900 Liv1.HoleY[2] = -55

-----------
Liv1.HoleSize[1] = 14 Liv1.HoleX[1] = 750 Liv1.HoleY[1] = 0
Liv1.HoleSize[0] = 22 Liv1.HoleX[0] = 250 Liv1.HoleY[0] = -55
Liv1.HoleSize[2] = 22 Liv1.HoleX[2] = 900 Liv1.HoleY[2] = -55

================================================================ 
```

如果类似的东西解决了您的问题，请直接说出来，我们可以讨论库函数中的支持代码。

但是，如果您必须（要）将输入文件解析（d）为二维数组，那么您可以得到的最好的朋友是断开连接的 ADODB 记录集：

```
 Dim aData : aData = Split(Join(Array( _
          "22 250 -55" _
        , "14 750 0"   _
        , "22 900 -55" _
        , "11 222 333" _
  )))
  Dim afData(3, 2)
  Dim nRows : nRows = UBound(afData, 1)
  Dim nCols : nCols = UBound(afData, 2)
  Dim i, r, c
  For i = 0 TO UBound(aData)
      r = i \   nRows
      c = i Mod (nCols + 1)
      afData(r, c) = aData(i)
'      WScript.Echo i, r, c, aData(i)
  Next
  For r = 0 To nRows
      For c = 0 To nCols
          WScript.StdOut.Write vbTab & afData(r, c)
      Next
      WScript.Echo
  Next
  WScript.Echo "-----------------"
  Dim oRS : Set oRS = CreateObject("ADODB.Recordset")
  For c = 0 To nCols
      oRS.Fields.Append "Fld" & c, adInteger
  Next
  oRS.Open
  For r = 0 To nRows
      oRS.AddNew
      For c = 0 To nCols
          oRS.Fields(c).value = afData(r, c)
      Next
      oRS.UpDate
  Next
  oRS.Sort = "Fld0"
  WScript.Echo oRS.GetString(adClipString, , vbTab, vbCrLf)
  WScript.Echo "-----------------"
  oRS.Sort = "Fld2"
  WScript.Echo oRS.GetString(adClipString, , vbTab, vbCrLf) 
```

输出：

```
========================================
        22      250     -55
        14      750     0
        22      900     -55
        11      222     333
-----------------
11      222     333
14      750     0
22      250     -55
22      900     -55

-----------------
22      250     -55
22      900     -55
14      750     0
11      222     333

======================================== 
```

再说一遍：如果这看起来很有希望，我们可以讨论如何根据您的需要调整/简化此概念验证代码。

# c - 如何在没有连接的情况下同步管理器/工作线程？

> ID：12282393
> 
> 赞同：9
> 
> 时间：2012-09-05T13:19:14.630
> 
> 标签：c, pthreads, posix

我熟悉多线程，并且成功地用 Java 和 Objective-C 开发了许多多线程程序。但是如果不使用主线程的连接，我无法在 C 中使用 pthreads 实现以下目标：

```
#include <stdio.h>
#include <stdlib.h>
#include <pthread.h>

#define NUM_OF_THREADS 2

struct thread_data {
    int start;
    int end;
    int *arr;
};

void print(int *ints, int n);
void *processArray(void *args);

int main(int argc, const char * argv[])
{
    int numOfInts = 10;
    int *ints = malloc(numOfInts * sizeof(int));
    for (int i = 0; i < numOfInts; i++) {
        ints[i] = i;
    }
    print(ints, numOfInts); // prints [0, 1, 2, 3, 4, 5, 6, 7, 8, 9]

    pthread_t threads[NUM_OF_THREADS];
    struct thread_data thread_data[NUM_OF_THREADS];

    // these vars are used to calculate the index ranges for each thread
    int remainingWork = numOfInts, amountOfWork;
    int startRange, endRange = -1;

    for (int i = 0; i < NUM_OF_THREADS; i++) {

        amountOfWork = remainingWork / (NUM_OF_THREADS - i);
        startRange = endRange + 1;
        endRange   = startRange + amountOfWork - 1;

        thread_data[i].arr   = ints;
        thread_data[i].start = startRange;
        thread_data[i].end   = endRange;

        pthread_create(&threads[i], NULL, processArray, (void *)&thread_data[i]);

        remainingWork -= amountOfWork;      
    }

    // 1\. Signal to the threads to start working

    // 2\. Wait for them to finish

    print(ints, numOfInts); // should print [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

    free(ints);
    return 0;
}

void *processArray(void *args)
{
    struct thread_data *data = (struct thread_data *)args;
    int *arr  = data->arr;
    int start = data->start;
    int end   = data->end;

    // 1\. Wait for a signal to start from the main thread

    for (int i = start; i <= end; i++) {
        arr[i] = arr[i] + 1;
    }

    // 2\. Signal to the main thread that you're done

    pthread_exit(NULL);
}

void print(int *ints, int n)
{
    printf("[");
    for (int i = 0; i < n; i++) {
        printf("%d", ints[i]);
        if (i+1 != n)
            printf(", ");
    }
    printf("]\n");
} 
```

我想在上面的代码中实现以下目标：

在 main() 中：

1.  向线程发出信号以开始工作。
2.  等待后台线程完成。

在进程数组（）中：

1.  等待信号从主线程开始
2.  向主线程发出信号，表明您已完成

我不想在主线程中使用join，因为在[真正的应用程序](https://stackoverflow.com/q/12268514/408286)中，主线程会创建线程一次，然后它会多次向后台线程发出信号，我不能让主线程线程继续，除非所有后台线程都完成工作。在`processArray`函数中，我将放置一个无限循环，如下所示：

```
void *processArray(void *args)
{
    struct thread_data *data = (struct thread_data *)args;

    while (1)
    {
      // 1\. Wait for a signal to start from the main thread

      int *arr  = data->arr;
      int start = data->start;
      int end   = data->end;          

      // Process
      for (int i = start; i <= end; i++) {
          arr[i] = arr[i] + 1;
      }

      // 2\. Signal to the main thread that you're done

    }

    pthread_exit(NULL);
} 
```

请注意，我是 C 和 posix API 的新手，所以如果我遗漏了一些明显的东西，请原谅。但我真的尝试了很多东西，从使用互斥体、信号量数组以及两者的混合开始，但没有成功。我认为条件变量可能会有所帮助，但我不明白如何使用它。

谢谢你的时间。

**问题解决了：**

非常感谢你们！按照您的提示，我终于能够在不使用连接的情况下安全地工作。尽管该解决方案有些难看，但它完成了工作并且性能提升是值得的（如下所示）。对于任何感兴趣的人，这是对我正在开发的真实应用程序的模拟，其中主线程不断地为后台线程提供工作：

```
 #include <stdio.h>
 #include <stdlib.h>
 #include <pthread.h>

 #define NUM_OF_THREADS 5

 struct thread_data {
     int id;
     int start;
     int end;
     int *arr;
 };

 pthread_mutex_t currentlyIdleMutex = PTHREAD_MUTEX_INITIALIZER;
 pthread_cond_t  currentlyIdleCond  = PTHREAD_COND_INITIALIZER;
 int currentlyIdle;

 pthread_mutex_t workReadyMutex = PTHREAD_MUTEX_INITIALIZER;
 pthread_cond_t  workReadyCond  = PTHREAD_COND_INITIALIZER;
 int workReady;

 pthread_cond_t  currentlyWorkingCond = PTHREAD_COND_INITIALIZER;
 pthread_mutex_t currentlyWorkingMutex= PTHREAD_MUTEX_INITIALIZER;
 int currentlyWorking;

 pthread_mutex_t canFinishMutex = PTHREAD_MUTEX_INITIALIZER;
 pthread_cond_t  canFinishCond  = PTHREAD_COND_INITIALIZER;
 int canFinish;

 void print(int *ints, int n);
 void *processArray(void *args);
 int validateResult(int *ints, int num, int start);

 int main(int argc, const char * argv[])
 {
     int numOfInts = 10;
     int *ints = malloc(numOfInts * sizeof(int));
     for (int i = 0; i < numOfInts; i++) {
         ints[i] = i;
     }
 //   print(ints, numOfInts);

     pthread_t threads[NUM_OF_THREADS];
     struct thread_data thread_data[NUM_OF_THREADS];
     workReady = 0;
     canFinish = 0;
     currentlyIdle = 0;
     currentlyWorking = 0;

     // these vars are used to calculate the index ranges for each thread
     int remainingWork = numOfInts, amountOfWork;
     int startRange, endRange = -1;
     // Create the threads and give each one its data struct.
     for (int i = 0; i < NUM_OF_THREADS; i++) {

         amountOfWork = remainingWork / (NUM_OF_THREADS - i);
         startRange = endRange + 1;
         endRange   = startRange + amountOfWork - 1;

         thread_data[i].id    = i;
         thread_data[i].arr   = ints;
         thread_data[i].start = startRange;
         thread_data[i].end   = endRange;

         pthread_create(&threads[i], NULL, processArray, (void *)&thread_data[i]);
         remainingWork -= amountOfWork;
     }

     int loops = 1111111;
     int expectedStartingValue = ints[0] + loops; // used to validate the results
     // The elements in ints[] should be incremented by 1 in each loop
     while (loops-- != 0) {

         // Make sure all of them are ready
         pthread_mutex_lock(&currentlyIdleMutex);
         while (currentlyIdle != NUM_OF_THREADS) {
             pthread_cond_wait(&currentlyIdleCond, &currentlyIdleMutex);
         }
         pthread_mutex_unlock(&currentlyIdleMutex);

         // All threads are now blocked; it's safe to not lock the mutex.
         // Prevent them from finishing before authorized.
         canFinish = 0;
         // Reset the number of currentlyWorking threads
         currentlyWorking = NUM_OF_THREADS;

         // Signal to the threads to start
         pthread_mutex_lock(&workReadyMutex);
         workReady = 1;
         pthread_cond_broadcast(&workReadyCond );
         pthread_mutex_unlock(&workReadyMutex);      

         // Wait for them to finish
         pthread_mutex_lock(&currentlyWorkingMutex);
         while (currentlyWorking != 0) {
             pthread_cond_wait(&currentlyWorkingCond, &currentlyWorkingMutex);
         }
         pthread_mutex_unlock(&currentlyWorkingMutex);

         // The threads are now waiting for permission to finish
         // Prevent them from starting again
         workReady = 0;
         currentlyIdle = 0;

         // Allow them to finish
         pthread_mutex_lock(&canFinishMutex);
         canFinish = 1;
         pthread_cond_broadcast(&canFinishCond);
         pthread_mutex_unlock(&canFinishMutex);
     }

 //   print(ints, numOfInts);

     if (validateResult(ints, numOfInts, expectedStartingValue)) {
         printf("Result correct.\n");
     }
     else {
         printf("Result invalid.\n");      
     }

     // clean up
     for (int i = 0; i < NUM_OF_THREADS; i++) {
         pthread_cancel(threads[i]);
     }
     free(ints);

     return 0;
 }

 void *processArray(void *args)
 {
     struct thread_data *data = (struct thread_data *)args;
     int *arr  = data->arr;
     int start = data->start;
     int end   = data->end;

     while (1) {

         // Set yourself as idle and signal to the main thread, when all threads are idle main will start
         pthread_mutex_lock(&currentlyIdleMutex);
         currentlyIdle++;
         pthread_cond_signal(&currentlyIdleCond);
         pthread_mutex_unlock(&currentlyIdleMutex);

         // wait for work from main
         pthread_mutex_lock(&workReadyMutex);
         while (!workReady) {
             pthread_cond_wait(&workReadyCond , &workReadyMutex);
         }
         pthread_mutex_unlock(&workReadyMutex);

         // Do the work
         for (int i = start; i <= end; i++) {
             arr[i] = arr[i] + 1;
         }

         // mark yourself as finished and signal to main
         pthread_mutex_lock(&currentlyWorkingMutex);
         currentlyWorking--;
         pthread_cond_signal(&currentlyWorkingCond);
         pthread_mutex_unlock(&currentlyWorkingMutex);

         // Wait for permission to finish
         pthread_mutex_lock(&canFinishMutex);
         while (!canFinish) {
             pthread_cond_wait(&canFinishCond , &canFinishMutex);
         }
         pthread_mutex_unlock(&canFinishMutex);
     }

     pthread_exit(NULL);
 }

 int validateResult(int *ints, int n, int start)
 {
     int tmp = start;
     for (int i = 0; i < n; i++, tmp++) {
         if (ints[i] != tmp) {
             return 0;
         }
     }
     return 1;
 }

 void print(int *ints, int n)
 {
     printf("[");
     for (int i = 0; i < n; i++) {
         printf("%d", ints[i]);
         if (i+1 != n)
             printf(", ");
     }
     printf("]\n");
 } 
```

我不确定是否`pthread_cancel`足以清理！至于障碍，如果它不限于[@Jeremy](https://stackoverflow.com/a/12283817/408286)提到的某些操作系统，那将会有很大帮助。

**基准：**

我想确保这些条件实际上并没有减慢算法的速度，所以我设置了这个基准来比较两种解决方案：

```
 #include <stdio.h>
 #include <stdlib.h>
 #include <pthread.h>
 #include <unistd.h>
 #include <sys/time.h>
 #include <sys/resource.h>

 #define NUM_OF_THREADS 5
 struct thread_data {
     int start;
     int end;
     int *arr;
 };
 pthread_mutex_t currentlyIdleMutex = PTHREAD_MUTEX_INITIALIZER;
 pthread_cond_t  currentlyIdleCond  = PTHREAD_COND_INITIALIZER;
 int currentlyIdle;
 pthread_mutex_t workReadyMutex = PTHREAD_MUTEX_INITIALIZER;
 pthread_cond_t  workReadyCond  = PTHREAD_COND_INITIALIZER;
 int workReady;
 pthread_cond_t  currentlyWorkingCond = PTHREAD_COND_INITIALIZER;
 pthread_mutex_t currentlyWorkingMutex= PTHREAD_MUTEX_INITIALIZER;
 int currentlyWorking;
 pthread_mutex_t canFinishMutex = PTHREAD_MUTEX_INITIALIZER;
 pthread_cond_t  canFinishCond  = PTHREAD_COND_INITIALIZER;
 int canFinish;

 void *processArrayMutex(void *args);
 void *processArrayJoin(void *args);
 double doItWithMutex(pthread_t *threads, struct thread_data *data, int loops);
 double doItWithJoin(pthread_t *threads, struct thread_data *data, int loops);

 int main(int argc, const char * argv[])
 {
     int numOfInts = 10;
     int *join_ints = malloc(numOfInts * sizeof(int));
     int *mutex_ints = malloc(numOfInts * sizeof(int));
     for (int i = 0; i < numOfInts; i++) {
         join_ints[i] = i;
         mutex_ints[i] = i;
     }

     pthread_t join_threads[NUM_OF_THREADS];
     pthread_t mutex_threads[NUM_OF_THREADS];
     struct thread_data join_thread_data[NUM_OF_THREADS];
     struct thread_data mutex_thread_data[NUM_OF_THREADS];
     workReady = 0;
     canFinish = 0;
     currentlyIdle = 0;
     currentlyWorking = 0;

     int remainingWork = numOfInts, amountOfWork;
     int startRange, endRange = -1;
     for (int i = 0; i < NUM_OF_THREADS; i++) {
         amountOfWork = remainingWork / (NUM_OF_THREADS - i);
         startRange = endRange + 1;
         endRange   = startRange + amountOfWork - 1;

         join_thread_data[i].arr   = join_ints;
         join_thread_data[i].start = startRange;
         join_thread_data[i].end   = endRange;
         mutex_thread_data[i].arr   = mutex_ints;
         mutex_thread_data[i].start = startRange;
         mutex_thread_data[i].end   = endRange;

         pthread_create(&mutex_threads[i], NULL, processArrayMutex, (void *)&mutex_thread_data[i]);
         remainingWork -= amountOfWork;
     }

     int numOfBenchmarkTests = 100;
     int numberOfLoopsPerTest= 1000;

     double join_sum = 0.0, mutex_sum = 0.0;
     for (int i = 0; i < numOfBenchmarkTests; i++)
     {
         double joinTime = doItWithJoin(join_threads, join_thread_data, numberOfLoopsPerTest);
         double mutexTime= doItWithMutex(mutex_threads, mutex_thread_data, numberOfLoopsPerTest);

         join_sum += joinTime;
         mutex_sum+= mutexTime;      
     }

     double join_avg = join_sum / numOfBenchmarkTests;
     double mutex_avg= mutex_sum / numOfBenchmarkTests;

     printf("Join average : %f\n", join_avg);
     printf("Mutex average: %f\n", mutex_avg);

     double diff = join_avg - mutex_avg;
     if (diff > 0.0)
         printf("Mutex is %.0f%% faster.\n", 100 * diff / join_avg);
     else if (diff < 0.0)
         printf("Join  is %.0f%% faster.\n", 100 * diff / mutex_avg);
     else
         printf("Both have the same performance.");

     free(join_ints);
     free(mutex_ints);

     return 0;
 }

 // From https://stackoverflow.com/a/2349941/408286
 double get_time()
 {
     struct timeval t;
     struct timezone tzp;
     gettimeofday(&t, &tzp);
     return t.tv_sec + t.tv_usec*1e-6;
 }

 double doItWithMutex(pthread_t *threads, struct thread_data *data, int num_loops)
 {
     double start = get_time();

     int loops = num_loops;
     while (loops-- != 0) {
         // Make sure all of them are ready
         pthread_mutex_lock(&currentlyIdleMutex);
         while (currentlyIdle != NUM_OF_THREADS) {
             pthread_cond_wait(&currentlyIdleCond, &currentlyIdleMutex);
         }
         pthread_mutex_unlock(&currentlyIdleMutex);

         // All threads are now blocked; it's safe to not lock the mutex.
         // Prevent them from finishing before authorized.
         canFinish = 0;
         // Reset the number of currentlyWorking threads
         currentlyWorking = NUM_OF_THREADS;

         // Signal to the threads to start
         pthread_mutex_lock(&workReadyMutex);
         workReady = 1;
         pthread_cond_broadcast(&workReadyCond );
         pthread_mutex_unlock(&workReadyMutex);

         // Wait for them to finish
         pthread_mutex_lock(&currentlyWorkingMutex);
         while (currentlyWorking != 0) {
             pthread_cond_wait(&currentlyWorkingCond, &currentlyWorkingMutex);
         }
         pthread_mutex_unlock(&currentlyWorkingMutex);

         // The threads are now waiting for permission to finish
         // Prevent them from starting again
         workReady = 0;
         currentlyIdle = 0;

         // Allow them to finish
         pthread_mutex_lock(&canFinishMutex);
         canFinish = 1;
         pthread_cond_broadcast(&canFinishCond);
         pthread_mutex_unlock(&canFinishMutex);
     }

     return get_time() - start;
 }

 double doItWithJoin(pthread_t *threads, struct thread_data *data, int num_loops)
 {
     double start = get_time();

     int loops = num_loops;
     while (loops-- != 0) {
         // create them
         for (int i = 0; i < NUM_OF_THREADS; i++) {
             pthread_create(&threads[i], NULL, processArrayJoin, (void *)&data[i]);
         }
         // wait
         for (int i = 0; i < NUM_OF_THREADS; i++) {
             pthread_join(threads[i], NULL);
         }
     }

     return get_time() - start;
 }

 void *processArrayMutex(void *args)
 {
     struct thread_data *data = (struct thread_data *)args;
     int *arr  = data->arr;
     int start = data->start;
     int end   = data->end;

     while (1) {

         // Set yourself as idle and signal to the main thread, when all threads are idle main will start
         pthread_mutex_lock(&currentlyIdleMutex);
         currentlyIdle++;
         pthread_cond_signal(&currentlyIdleCond);
         pthread_mutex_unlock(&currentlyIdleMutex);

         // wait for work from main
         pthread_mutex_lock(&workReadyMutex);
         while (!workReady) {
             pthread_cond_wait(&workReadyCond , &workReadyMutex);
         }
         pthread_mutex_unlock(&workReadyMutex);

         // Do the work
         for (int i = start; i <= end; i++) {
             arr[i] = arr[i] + 1;
         }

         // mark yourself as finished and signal to main
         pthread_mutex_lock(&currentlyWorkingMutex);
         currentlyWorking--;
         pthread_cond_signal(&currentlyWorkingCond);
         pthread_mutex_unlock(&currentlyWorkingMutex);

         // Wait for permission to finish
         pthread_mutex_lock(&canFinishMutex);
         while (!canFinish) {
             pthread_cond_wait(&canFinishCond , &canFinishMutex);
         }
         pthread_mutex_unlock(&canFinishMutex);
     }

     pthread_exit(NULL);
 }

 void *processArrayJoin(void *args)
 {
     struct thread_data *data = (struct thread_data *)args;
     int *arr  = data->arr;
     int start = data->start;
     int end   = data->end;

     // Do the work
     for (int i = start; i <= end; i++) {
         arr[i] = arr[i] + 1;
     }

     pthread_exit(NULL);
 } 
```

输出是：

```
Join average : 0.153074
Mutex average: 0.071588
Mutex is 53% faster. 
```

再次感谢你。我真的很感谢你的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:33:13.473

您可以使用多种同步机制（例如条件变量）。我认为最简单的方法是使用 a`pthread_barrier`来同步线程的启动。

假设您希望所有线程在每次循环迭代时“同步”，您可以重用屏障。如果您需要更灵活的东西，条件变量可能更合适。

当您决定该线程结束时（您还没有说明线程将如何知道退出无限循环 - 一个简单的共享变量可能用于此；共享变量可以是原子类型或受保护使用互斥锁），`main()`线程应该`pthread_join()`用来等待所有线程完成。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T14:10:51.130

您需要使用与 不同的同步技术`join`，这很清楚。

不幸的是，你有很多选择。一个是“同步屏障”，基本上是每个到达它的线程都会阻塞，直到它们都到达它（您提前指定线程数）。看`pthread_barrier`。

另一种是使用条件变量/互斥对 ( `pthread_cond_*`)。当每个线程完成时，它获取互斥体，增加一个计数，向 condvar 发出信号。主线程在 condvar 上等待，直到计数达到它期望的值。代码如下所示：

```
// thread has finished
mutex_lock
++global_count
// optional optimization: only execute the next line when global_count >= N
cond_signal
mutex_unlock

// main is waiting for N threads to finish
mutex_lock
while (global_count < N) {
    cond_wait
}
mutex_unlock 
```

另一种方法是为每个线程使用一个信号量——当线程完成时，它发布自己的信号量，主线程依次等待每个信号量，而不是依次加入每个线程。

您还需要同步以重新启动下一个作业的线程——这可能是与第一个同步对象类型相同的第二个同步对象，但由于您有 1 个海报和 N 个服务员而不是其他方式而更改了详细信息大约。或者您可以（小心地）为这两个目的重复使用同一个对象。

如果您已经尝试过这些事情并且您的代码不起作用，那么可能会针对您尝试过的代码提出一个新的具体问题。所有这些都足以胜任这项任务。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T14:31:14.927

您在错误的抽象级别上工作。这个问题已经解决了。您正在重新实现工作队列 + 线程池。

[OpenMP](http://openmp.org/wp/)似乎很适合您的问题。它将`#pragma`注释转换为线程代码。我相信它会让你直接表达你想要做的事情。

使用[libdispatch](http://libdispatch.macosforge.org/)，您尝试执行的操作将表示为`dispatch_apply`针对并发队列。这隐含地等待所有子任务完成。在 OS X 下，它是使用不可移植的 pthread 工作队列接口实现的；在 FreeBSD 下，我相信它直接管理一组 pthread。

如果是可移植性问题驱使您使用原始 pthread，请不要使用 pthread 屏障。障碍是基本 POSIX 线程之上的附加扩展。例如 OS X 不支持它。有关更多信息，请参阅[POSIX](http://pubs.opengroup.org/onlinepubs/009695399/functions/pthread_barrier_init.html)。

阻塞主线程直到所有子线程都完成可以使用受条件变量保护的计数来完成，或者更简单地说，使用管道和阻塞读取，其中要读取的字节数与线程数匹配。每个线程在工作完成时写入一个字节，然后休眠直到它从主线程获得新的工作。一旦每个线程都写了“我完成了！”，主线程就会解除阻塞。字节。

可以使用保护工作描述符的互斥锁和发出新工作信号的条件将工作传递给子线程。您可以使用所有线程从中提取的单个工作描述符数组。收到信号后，每个人都试图抓住互斥锁。在获取互斥体时，它会将一些工作出列，如果队列非空则重新发出信号，然后处理其工作，之后它将向主线程发出完成信号。

您可以重用这个“工作队列”，通过将结果排入队列来解除对主线程的阻塞，主线程等待结果队列长度与线程数匹配；管道方法只是使用阻塞`read`来为你做这个计数。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T13:32:15.290

要告诉所有线程开始工作，它可以像初始化为零的全局整数变量一样简单，线程只需等待直到它非零。这样你就不需要`while (1)`线程函数中的循环了。

等待它们全部完成`pthread_join`是最简单的，因为它实际上会阻塞，直到它加入的线程完成。还需要在线程之后清理系统内容（否则线程的返回值将被存储用于程序的其余部分）。因为你有一个所有线程的数组，所以`pthread_t`只需一个接一个地循环它们。由于您程序的那部分不做任何其他事情，并且必须等到所有线程都完成，所以按顺序等待它们是可以的。

# c# - 在文件中书写形状和笔画

> ID：12282394
> 
> 赞同：0
> 
> 时间：2012-09-05T13:19:19.437
> 
> 标签：c#, wpf

我正在开发一个程序，`WPF`需要在文件中写入和读取`shapse`（矩形，椭圆，...）并读取它们。

有什么办法，或者我必须写它的规格，比如宽度、高度……加载它们？任何想法？

我用过：

```
 Stream stream = File.Open("mehdi.txt", FileMode.Create);
            BinaryFormatter bFormatter = new BinaryFormatter();
            ArrayList a = new ArrayList();
            a.Add(shapelist);  //shapelist is arraylist

            bFormatter.Serialize(stream, a);
            stream.Close(); 
```

但此代码有以下错误：

```
Type 'System.Windows.Shapes.Rectangle' in Assembly 'PresentationFramework, Version=4.0.0.0,
 Culture=neutral, PublicKeyToken=31bf3856ad364e35' is not marked as serializable. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:24:08.080

您可以将描述您的“设计”的 XAML（矩形、椭圆等）保留为单独的 .xaml 文件。

然后，您可以使用`XAMLReader.Load/Save`.

这将创建一个对象，然后您可以将其设置为内容/添加任何您希望它显示在 UI 中的位置。

*   [http://www.codeproject.com/Articles/115108/Lazy-Load-XAML-content-from-External-File-and-Vice](http://www.codeproject.com/Articles/115108/Lazy-Load-XAML-content-from-External-File-and-Vice)

*   [http://www.abhisheksur.com/2010/10/lazy-load-xaml-content-from-external.html](http://www.abhisheksur.com/2010/10/lazy-load-xaml-content-from-external.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T18:00:12.853

这行得通！

```
 FileStream f = new FileStream("mehdi.txt", FileMode.Create, FileAccess.Write); // 
        XamlWriter.Save(inkcanvas, f);
        foreach (var e1 in inkcanvas.Children) // 
        XamlWriter.Save(e1);
        foreach (var e1 in inkcanvas.Strokes)
               XamlWriter.Save(e1); 
```

# github - 为什么我的 Jekyll Bootstrap 博客没有更新？

> ID：12282399
> 
> 赞同：2
> 
> 时间：2012-09-05T13:19:39.747
> 
> 标签：github, jekyll, github-pages

我在几个小时前推送了它，但我的博客还没有改变。github.com服务器延迟还是我个人原因？它会在我的电脑上测试`localhost:4000`。

PS：所以，我删除了 repo 并在 github 中重新创建了 repo，但总是 404:-(

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-13T05:08:15.147

您是通过 username.github.com 还是在个人域访问该页面？

如果它位于个人域中，请确保您在 repo 的脚下有一个 CNAME 文件（具有该名称）。它应该只包含这个：`www.myfancydomain.com`. 还要检查您的[DNS 设置](https://help.github.com/articles/setting-up-a-custom-domain-with-pages)。

如果您使用任何插件，GitHub 不会在生成期间运行它们。这可能会导致问题？

还要确保推送的站点位于 gh-pages 分支中。检查基础知识总是很好。:)

# php - PHP删除脚本不起作用

> ID：12282413
> 
> 赞同：0
> 
> 时间：2012-09-05T13:20:29.683
> 
> 标签：php, delete-file

我有一个脚本（从 StackOverflow 的某个地方得到它，学分不归我！）来删除一个文件夹及其内容。但是，它对我不起作用。删除文件夹后，我的数据库中的一条记录应该被删除，这很好。但是，该文件夹不会被删除，它的内容也不会被删除！这是我的代码：

```
<?php

$filepath = dirname(__FILE__);
$gemeented = preg_replace( '#^(.*)/(.*?)/(.*?)/(.*?)/(.*?)/(.*?)$#', "$2", $filepath );
$plaatsd = preg_replace( '#^(.*)/(.*?)/(.*?)/(.*?)/(.*?)/(.*?)$#', "$4", $filepath );
$hrubriekd = preg_replace( '#^(.*)/(.*?)/(.*?)/(.*?)/(.*?)/(.*?)$#', "$5", $filepath );
$bedrijfn = preg_replace( '#^(.*)/(.*?)/(.*?)/(.*?)/(.*?)/(.*?)$#', "$6", $filepath );

$filepath2 = "http://".$gemeented.".url.nl/".$plaatsd."/".$hrubriekd."/".$bedrijfn."/";
$filepath3 = "http://".$gemeented.".url.nl/".$plaatsd."/".$bedrijfn."/";

echo $filepath2;

function Delete($filepath2)
{
    if (is_dir($filepath2) === true)
    {
        $files = array_diff(scandir($filepath2), array('.', '..'));

        foreach ($files as $file)
        {
            Delete(realpath($filepath2) . '/' . $file);
        }

        return rmdir($filepath2);
    }

    else if (is_file($filepath2) === true)
    {
        return unlink($filepath2);
    }

    return false;
}

?> 
```

为了确保我的 $filepath2 是正确的，我回应了它，结果是：

```
http://dongen.mydomain.nl/s-gravenmoer/aandrijvingenenbesturingen/bedrijfsnaam/ 
```

那正是我想要的文件夹，但是，它没有发生！文件夹有 CHMOD 755。

编辑：

仅使用 $filepath 也不起作用，回显给了我：

```
/vhosts/mydomain.nl/subdomains/dongen/httpdocs/s-gravenmoer/aandrijvingenenbesturingen/bedrijfsnaam 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:12:11.543

我无法使上述脚本正常工作，但我设法找到了另一个适合我的脚本！只需输入相对路径即可！

```
$dirname = "../".$bedrijfn."/";
delete_directory($dirname);

function delete_directory($dirname) {
if (is_dir($dirname))
      $dir_handle = opendir($dirname);
   if (!$dir_handle)
      return false;
   while($file = readdir($dir_handle)) {
      if ($file != "." && $file != "..") {
         if (!is_dir($dirname."/".$file))
            unlink($dirname."/".$file);
         else
            delete_directory($dirname.'/'.$file);    
      }
   }
   closedir($dir_handle);
   rmdir($dirname);
   return true;
} 
```

希望它可以帮助某人！

桑德

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:24:23.330

你不能使用 url 来删除文件，你应该给 unlink 一个文件系统路径。（编辑：rmdir 也是如此）

# python - 初始化模块python

> ID：12282415
> 
> 赞同：0
> 
> 时间：2012-09-05T13:20:32.990
> 
> 标签：python, module, initialization

我有一个[模块](https://github.com/rtaycher/second_hand_songs_wrapper)，它包装了一个 json api，用于查询歌曲封面/混音数据，并限制每小时/分钟的请求数。我想保留一个可选的 json 响应缓存，而不是强迫用户每次都调整缓存/上下文参数。在 python 中初始化库/模块的好方法是什么？或者你会建议我只做显式的事情，并在每次最终请求 json 数据的调用中使用缓存命名参数吗？

我正在考虑做

```
_cache = None

class LFU(object):
    ...

NO_CACHE, LFU = "NO_CACHE", "LFU"
def set_cache_strategy(strategy):
    if _cache == NO_CACHE:
        _cache = None
    else:
        _cache = LFU() 
```

* * *

```
import second_hand_songs_wrapper as s
s.set_cache_strategy(s.LFU)
l1 = s.ShsLabel.get_from_resource_id(123)
l2 = s.ShsLabel.get_from_resource_id(123,use_cache=Fale) 
```

编辑：我可能只打算制定两种策略，一种有/一种没有缓存。

我能想到的其他可能的替代初始化方案包括使用环境变量，在用户代码中手动将 _cache 初始化为 None/LFU()，以及在任何地方使用显式缓存（可能默认为具有缓存）。

请注意我没有在类的实例上设置缓存的原因是我目前使用从未实例化的类（使用类函数 + 类状态作为单例）来抽象下载 json 数据以及一些方便/方法来下载某些网址。我可以实例化下载器类，但是我必须将实例显式传递给每个函数，或者使用另一个全局变量来获得该类的便利版本。下载器类还跟踪请求数（网站每分钟/小时有限制），因此拥有多个下载器对象会导致更多麻烦。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:30:56.423

设置默认值并没有错，即使该默认值是`None`. 我会注意到，尽管拥有伪常量和条件（前提是您使用这些值）是多余的。尝试：

```
caching_strategies = {'NO_CACHE' : lambda: None,
                      'LFU' : LFU}
_cache = caching_strategies['NO_CACHE']

def set_cache_strategy(strategy):
    _cache = caching_methods[strategy]() 
```

如果您想为可用策略提供方便的方法，只需 wrap `caching_strategies.keys()`。但实际上，就您的策略而言，您可能应该让您的所有策略都从某个基本策略继承，并且只需创建一个继承自该基本策略的 no_cache 策略类，并为您的标准化缓存接口存根所有方法。

# python - sqlalchemy 不区分大小写的查询 sql alchemy

> ID：12282418
> 
> 赞同：0
> 
> 时间：2012-09-05T13:20:37.530
> 
> 标签：python, mysql, sqlalchemy

我正在使用 sqlalchemy 0.7 和 MySQL 服务器版本 5.1.63。

我的数据库上有下表：

```
CREATE TABLE `g_domains` (
`id` BIGINT(20) UNSIGNED NOT NULL AUTO_INCREMENT,
`name` VARCHAR(255) NOT NULL,
PRIMARY KEY (`id`),
UNIQUE INDEX `name` (`name`)
)
COLLATE='utf8_general_ci'
ENGINE=InnoDB 
```

对应的型号是：

```
class GDomain(Base):
    __tablename__ = 'g_domains'
    __table_args__ = {  
        'mysql_engine': 'InnoDB',  
        'mysql_charset': 'utf8',
        'mysql_collate': 'utf8_general_ci'  
    }

    id = Column(mysql.BIGINT(unsigned=True), primary_key=True)
    name = Column(mysql.VARCHAR(255, collation='utf8_general_ci'), 
                  nullable=False, unique=True) 
```

sql alchemy 中的以下查询不返回任何行：

```
session.query(GDomain).filter(GDomain.name.in_(domain_set)).
limit(len(domain_set)).all() 
```

其中 domain_set 是一个 python 列表，其中包含一些域名，例如

```
domain_set = ['www.google.com', 'www.yahoo.com', 'www.AMAZON.com'] 
```

尽管该表有一行 (1, www.amazon.com)，但上述查询仅返回 (www.google.com, www.yahoo.com)。

当我运行 sql 查询时：

```
SELECT * FROM g_domains 
WHERE name IN ('www.google.com', 'www.yahoo.com', 'www.AMAZON.com') 
```

你知道为什么会这样吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:31:24.620

`model_domain`变量是什么？通常它看起来像这样：

```
session.query(GDomain).filter(GDomain.name.in_(domain_set)).
limit(len(domain_set)).all() 
```

请注意，`GDomain`在两个地方都使用了。或者，您可以使用别名：

```
domains = orm.aliased(GDomain, name='domain')
session.query(domains).filter(domains.name.in_(domain_set)) 
```

您可以随时尝试调试，打印由 sqlalchemy 生成的查询（请参阅：[SQLAlchemy：打印实际查询](https://stackoverflow.com/questions/5631078/sqlalchemy-print-the-actual-query)）

# google-apps-script - 将两个谷歌表单数据合并到一个电子表格中

> ID：12282419
> 
> 赞同：4
> 
> 时间：2012-09-05T13:20:39.797
> 
> 标签：google-apps-script, google-sheets, google-forms

我想创建一个应用程序，它将两个不同的谷歌表单数据放入一个电子表格中，并在谷歌应用程序脚本的帮助下在一个电子表格上有两个不同的工作表。

我已经搜索了很多，但没有找到任何令人满意的解决方案。谁能告诉我用 google-apps-scripts 可以实现吗？

抱歉，这次我没有任何代码。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:48:32.580

在不涉及另外两个电子表格的情况下，不可能使用 GAS 将两个 Google 表单的数据直接插入到一个电子表格中，因为现在表单只能将数据部署到自己的电子表格中，而 GAS 没有任何服务可以访问这些表单。

有一种解决方法可以使用该函数将 Forms 电子表格合并到一个电子表格中`ImportRange`（请参见下面的段落），但它似乎不适合您。

电子表格具有允许将源电子表格范围导入到目标电子表格的功能，`ImportRange`例如，有一项任务是导入到`spreadsheet_1`列`A`、、、和的列`B`、、、和列。为了实现，必须将公式放置到单元格中，并且单元格应包含公式。`C``Sheet1``spreadsheet_2``B``C``Sheet2``spreadsheet_0``F``G``H``I``J``spreadsheet_0``F1``=ImportRange("spreadsheet_1_key", "Sheet1!A:C")``I1``=ImportRange("spreadsheet_2_key", "Sheet2!B:C")`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-08-05T01:43:39.087

对于最终遇到此问题的任何人，寻找一些一般知识，您*可以*更改表单目标。在表单编辑器中，选择 RESPONSES、CHANGE RESPONSE DESTINATION。表单响应*可以*发送到另一个电子表格。我不确定这是否是第一次提出这个问题时不存在的功能，但对于任何进行一般搜索的人来说，你可能会在这里结束。

# matlab - 同一图像的 OpenCV 和 MATLAB 灰度值不同

> ID：12282421
> 
> 赞同：1
> 
> 时间：2012-09-05T13:20:43.130
> 
> 标签：matlab, opencv

在 MATLAB 中，我读取了一个彩色视频，提取了某个帧并使用该函数将其转换为灰度图像。但是`rgb2gray`当我使用 OpenCV2.3.1 加载相同的视频时，提取相同的帧然后将其转换为灰度它没有'不给出与 MATLAB 相同的灰度值。这是为什么？

这是使用 OpenCV 的 C++ 代码：

```
VideoCapture cap(0);    
cap.open("Human sperm evaluation_0.avi");    

Mat image;    
Mat gray(480,640,CV_8U);    

for(int i=0;i<513;i++)
{
    cap>>image;
    cvtColor(image,gray,CV_RGB2GRAY);
}

for(int i=0;i<20;i++)
{
    for(int j=0;j<20;j++)
    {
        cout<<(int)gray.at<uchar>(i,j)<<' ';
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-07T03:54:35.063

首先，OpenCV 中的所有彩色图像都是 BGR 而不是 RGB，所以问题之一可能是 OpenCV 使转换错误。您应该使用 BGR2GRAY。其次，如果我在 matlab 中记得很清楚，你应该指定图像中的值范围。对于灰度图像，您必须在 0 到 255 之间输入。

我希望这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-04-17T15:45:36.050

我也遇到了这个问题，在 MATLAB 文档中我可以找到 rgb2gray 实现，它很简单，如下所示

```
gray_value = 0.2989 * R + 0.5870 * G + 0.1140 * B 
```

所以我在OpenCV中实现这个算法如下

```
cv::Mat rgb_image = imread("/what/ever/directory/that/was/optional.jpg" );

int nrows = rgb_image.rows;  // number of columns
int ncols = rgb_image.cols;  // number of rows

cv::Mat gray_image( nrows , ncols , CV_8UC1 ); // define one channel Mat with same size as rgb_image

for(int row = 0; row < rgb_image.rows ; row++)
{
    for(int col = 0 ; col < pic.cols ; col++)
    {

        //matlab algorithm for rgb2gray
        gray.at<unsigned char>( row , col ) =
                0.2989 * rgb_image.at<Vec3b>( row , col )[0]+
                0.5870 * rgb_image.at<Vec3b>( row , col )[1]+
                0.1140 * rgb_image.at<Vec3b>( row , col )[2];        
   }

} 
```

并且此代码将给出与 matlab 相同的结果，在 OpenCV 中，您可以使用以下代码重新生成它：

```
cv::cvtColor( rgb_image , gray_image , CV_BGR2GRAY );  //BLUE+GREEN+RED 
```

但是如果你使用下面的代码

```
cv::cvtColor( rgb_image , gray_image , CV_RGB2GRAY ); //RED+GREEN+BLUE 
```

那么这个算法将按照相反的顺序如下：

```
gray_value = 0.2989 * R->B + 0.5870 * G->G + 0.1140 * B->R 
```

并且输出与 MATLAB 输出不同

* * *

## 使用 cv::transform 函数

我在 opencv 中找到了一个方便且有用的函数，`cv::transform`它以最简单的方式实现上述功能。如果我们有三个以源图像和目标`Mat`矩阵命名的矩阵，并且是一个影响到每个通道的传输的矩阵。通过这个矩阵，我们可以实现如下`src``gray``m``CV_BGR2GRAY``CV_RGB2GRAY`

1-CV_BGR2GRAY

```
Mat src, gray, m ;
src=imread(" ");
m=(Mat_<float>(1,3)<<0.1140,0.5870,0.2989);
cv::transform(src,       //src
              gray,      //dst
              m );       //mtx 
```

输出如下图 [![在此处输入图像描述](../Images/7110f316c2c0cd9835181c6c4eea6cf0.png)](https://i.stack.imgur.com/BcIHz.png)

2-CV_RGB2GRAY

```
Mat src, gray, m ;
src=imread(" ");
m=(Mat_<float>(1,3)<<0.2989,0.5870,0.1140);
cv::transform(src,       //src
              gray,      //dst
              m );       //mtx 
```

输出如下 [![在此处输入图像描述](../Images/c1c9dba298c831bee61a66e346101e40.png)](https://i.stack.imgur.com/hrQl3.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-01-14T05:30:25.433

OpenCV 参考手册，版本 2.4.10.0，第 283 页：“请注意，OpenCV 中的默认颜色格式通常称为 RGB，但实际上是 BGR（字节反转）。因此标准中的第一个字节（24-位）彩色图像将是 8 位蓝色分量，第二个字节将是绿色，第三个字节将是红色。”

# javascript - 谷歌地图 v3：调用函数“失败”时添加新地图

> ID：12282424
> 
> 赞同：2
> 
> 时间：2012-09-05T13:20:49.930
> 
> 标签：javascript, jquery, html, google-maps-api-3, geolocation

在我网站的联系页面上，可能会发生两件事：

1.  用户启用了地理定位，地图 ( `map-canvas`) 将显示从他们的位置到预定义位置的路线`dest`。此功能运行良好。

2.  用户没有启用地理定位或选择不允许它。将显示一个警报（工作正常），并且一些文本将添加到`directions-panel`（工作正常）。在这种情况下，我想发生的第三件事是添加一个以`map-canvas`为中心的新地图`dest`，这个功能似乎不起作用，我不知道为什么。

下面的代码应该很好地表示上述内容：

```
<script type="text/javascript">
    var directionsDisplay;
    var directionsService = new google.maps.DirectionsService();
    var map;
    var dest = "Unit 20, Tallaght Business Centre, Whitestown Road, Tallaght Business Park, Ireland";//53.282882, -6.383155
    var ourLocation = {lat :  53.282882, lng :  -6.383155}//centre attribute of the map must be a LatLng object and not hardcoded as above

    function initGeolocation() {
       if(navigator.geolocation) {
          navigator.geolocation.getCurrentPosition( success, failure );
        }
    }

    //create a new map centered on user's location, display route and show directions
    function success(position) {
      directionsDisplay = new google.maps.DirectionsRenderer();
      coords = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
      var mapOptions = {
        mapTypeId: google.maps.MapTypeId.ROADMAP,
      }
      map = new google.maps.Map(document.getElementById("map-canvas"), mapOptions);
      directionsDisplay.setMap(map);
      directionsDisplay.setPanel(document.getElementById("directions-panel"));
      calcRoute();
    }

    //calculate the route from user's location to 'dest'
    function calcRoute() {
      var start = coords;
      var end = dest;
      var request = {
        origin:start,
        destination:end,
        travelMode: google.maps.TravelMode.DRIVING
      };
      directionsService.route(request, function(result, status) {
        if (status == google.maps.DirectionsStatus.OK) {
          directionsDisplay.setDirections(result);
        }
      });
    }

    //tell user geoloc isn't enabled and just plot 'ourLocation' on 'map-canvas'
    function failure() {
        alert("Your browser does not have geolocation enabled so we can't give you directions to our office. Enable geolocation and try again, or consult the map for our address.");
        $("#directions-error-message").css({
          visibility: 'visible'
        });     
        var destMapOptions = {
          zoom:13,
          mapTypeId: google.maps.MapTypeId.ROADMAP,
          center: new google.maps.LatLng(ourLocation.lat, ourLocation.lng)
        }
        map = new google.maps.Map(document.getElementById("map-canvas"), destMapOptions);
    }

    </script> 
```

任何人都知道为什么这不起作用？所有的帮助都得到了重视。

编辑：上面的工作版本

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:09:19.237

您需要为地图传递一个 LatLng 对象作为其中心，而不是地址。您将需要使用 Google 的 LocalSearch 服务来完成这项工作。

```
var dest = {
   lat :  53.282882,
   lng :  -6.383155
}

var destMapOptions = {
    zoom:12,
    mapTypeId: google.maps.MapTypeId.ROADMAP,
    center: new google.maps.LatLng(dest.lat,dest.lng)
} 
```

此外，由于您已经将 map 声明为 var，因此可能已经使用它而不是 map 的函数作用域变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T14:08:01.443

地图选项的中心属性必须是 LatLng 对象。您已将其硬编码为地址字符串。

# .net - 使用 Entity Framework 使用 SQL Azure 进行瞬态故障处理

> ID：12282427
> 
> 赞同：17
> 
> 时间：2012-09-05T13:20:50.963
> 
> 标签：.net, entity-framework, enterprise-library

我目前在我的应用程序中使用 SQL Azure 和 Entity SQL。

例如

```
Entities model = new Entities();
db_Item item = model.db_Item.First(); 
```

现在我想使用企业库之外的瞬态故障处理，但是我找不到可以让我执行诸如覆盖实体类之类的示例或解决方案，因此我不必更新数百个代码的地方。

有人可以提供更多关于如何做到这一点的信息吗？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-10-05T02:58:25.377

经历我到目前为止所拥有的。

1.  实体框架不提供对连接打开和将 SQL 发送到服务器的部分的访问权限，因此目前不可能围绕该区域提供重试逻辑。

2.  EF 团队意识到了这一不足，并计划将重试逻辑实际集成到 EF 中，以实现版本 6。

3.  根据 [1] 的案例 #3，您可以将 SQL 命令发送到 OnContextCreated 上的数据库。然而，这意味着对于您对数据库进行的每一次数据库调用，您都必须进行 2 次。除非您不关心性能，否则我几乎不建议在任何情况下这样做。

4.  到目前为止，唯一可行的选择是以企业库瞬态故障处理应用程序块 [2] 的形式围绕您对数据库的每次调用实施重试逻辑。在现有的应用程序中，这是非常乏味的。

5.  当我有时间时，我会进一步研究 EF 的源代码，看看是否可以做进一步的事情，同时我们等待 EF 6。我会密切关注 [3]

6.  一些希望，它目前正在由 EF 团队审查。[4]

**更新：** 2013-11-14

只是想我会更新这篇文章，让大家知道 EF6 已发布并支持开箱即用的连接弹性。[https://www.nuget.org/packages/EntityFramework/](https://www.nuget.org/packages/EntityFramework/)

不再需要解决方法。

**更新：** 2013-03-23

EF 6 Alpha 3 与连接弹性一起发布 - [http://entityframework.codeplex.com/wikipage?title=Connection%20Resiliency%20Spec](http://entityframework.codeplex.com/wikipage?title=Connection%20Resiliency%20Spec)

**更新：** 2012-11-04

EF 团队已正式宣布计划用于 EF 6。 [4]

[1] [http://blogs.msdn.com/b/appfabriccat/archive/2010/12/11/sql-azure-and-entity-framework-connection-fault-handling.aspx](http://blogs.msdn.com/b/appfabriccat/archive/2010/12/11/sql-azure-and-entity-framework-connection-fault-handling.aspx)

[2] [http://msdn.microsoft.com/en-us/library/hh680934(v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/hh680934(v=pandp.50).aspx)

[3] [http://entityframework.codeplex.com/wikipage?title=路线图](http://entityframework.codeplex.com/wikipage?title=Roadmap)

[4] [http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/2426525-automatically-perform-retry-logic-for-sql-azure](http://data.uservoice.com/forums/72025-entity-framework-feature-suggestions/suggestions/2426525-automatically-perform-retry-logic-for-sql-azure)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-27T00:41:25.063

值得庆幸的是，使用新的瞬态故障处理应用程序块非常简单。您需要的一切都可以在这里找到：

[http://geekswithblogs.net/ScottKlein/archive/2012/01/27/understanding-sql-azure-throttling-and-implementing-retry-logic.aspx](http://geekswithblogs.net/ScottKlein/archive/2012/01/27/understanding-sql-azure-throttling-and-implementing-retry-logic.aspx)

并以视频形式：

[http://channel9.msdn.com/Shows/Cloud+Cover/Episode-68-Throttling-in-SQL-Azure-with-Scott-Klein](http://channel9.msdn.com/Shows/Cloud+Cover/Episode-68-Throttling-in-SQL-Azure-with-Scott-Klein)

来自上述链接的示例：

```
using (NorthwindEntities dc = new NorthwindEntities())
{
    RetryPolicy myPolicy = new RetryPolicy<SqlAzureTransientErrorDetectionStrategy>(3);
    Employee e1 = myPolicy.ExecuteAction<Employee>(() =>
        (from x in dc.Employees
            where x.LastName == "King"
            select x).First());
} 
```

如您所见，您需要做的就是创建一个 RetryPolicy 并使用包装在操作中的查询调用其 ExecuteAction 函数。

* ***编辑**

示例上下文覆盖：

```
private RetryPolicy m_RetryPolicy = new RetryPolicy<SqlAzureTransientErrorDetectionStrategy>(....

public override int SaveChanges()
{
    return m_RetryPolicy.ExecuteAction<int>(() =>
    {
        return base.SaveChanges();
    });
}

// Pass anonymous query func in here
public T AutoRetryQuery<T>(Func<T> query)
{
    return m_RetryPolicy.ExecuteAction<T>(query);
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-17T02:14:24.433

由于这似乎是关于 Azure 瞬态处理的 SO 上最受欢迎的问题之一，因此我将在此处添加此答案。

实体框架确实内置了弹性代码（根据亚当的回答）

但：

1）您必须手动添加代码才能激活它

```
public class MyConfiguration : DbConfiguration
{
    public MyConfiguration()
    {
        this.SetExecutionStrategy(
            "System.Data.SqlClient",
            () => new SqlAzureExecutionStrategy());

        this.SetTransactionHandler(
            SqlProviderServices.ProviderInvariantName, 
            () => new CommitFailureHandler()); 
    }
... 
```

第一个方法调用激活重试，第二个调用设置一个处理程序以避免在重试发生时重复更新。

注意：将自动找到并实例化此类，如下所述：[https](https://msdn.microsoft.com/en-us/library/jj680699(v=vs.113).aspx) ://msdn.microsoft.com/en-us/library/jj680699(v=vs.113).aspx 。只需确保该类与您的 DbContext 类在同一个程序集中，并且具有不带参数的公共构造函数。

2) 内置的 SqlAzureExecutionStrategy**不够好**。它没有涵盖所有的瞬态错误。当您考虑到 SQL Server 团队独立于实体框架工作时，这并不奇怪，因此他们不太可能完全同步可能出现的瞬时错误。自己也很难弄清楚。

在另一家软件公司的建议的支持下，我们使用的解决方案是创建我们自己的执行策略，它会重试**每个**SqlException 和 TimeoutException，除了一些我们将不值得重试的白名单（例如权限被拒绝）。

```
public class WhiteListSqlAzureExecutionStrategy : DbExecutionStrategy
{
    public WhiteListSqlAzureExecutionStrategy()
    {
    }

    protected override bool ShouldRetryOn(Exception exception)
    {  
        var sqlException = exception as SqlException;

        // If this is an SqlException then we want to always retry
        // Unless the all the exception types are in the white list. 
        // With those errors there is no point in retrying.
        if (sqlException != null)
        {
            var retry = false;
            foreach (SqlError err in sqlException.Errors)
            {
                // Exception white list.
                switch (err.Number)
                {
                    // Primary Key violation
                    // https://msdn.microsoft.com/en-us/library/ms151757(v=sql.100).aspx
                    case 2627:

                    // Constraint violation
                    case 547:

                    // Invalid column name, We have seen this happen when the Snapshot helper runs for a column 'CreatedOn'
                    // This is not one of our columns and it appears to be using our execution strategy.
                    // An invalid column is also something that probably doesn't get resolved by retries.
                    case 207:
                        break;

                    // The server principal "username" is not able to access the database "dbname" under the current security context
                    // May occur when using restricted user - Entity Framework wants to access master for something
                    // probably not transient
                    case 916:
                        break;

                    // XXX permission denied on object. (XXX = select, etc)
                    // Should not occur if db access is correct, but occurred when using restricted user - EF accessing __MigrationHistory
                    case 229:
                        break;

                    // Invalid object name 'xxx'.
                    // Occurs at startup because Entity Framework looks for EdmMetadata, an old table
                    // (Perhaps only if it can't access __MigrationHistory?)
                    case 208:
                        break;

                    default:
                        retry = true;
                        break;
                }
            }
            return retry;
        }

        if (exception is TimeoutException)
        {
            return true;
        }

        return false;
    }       
} 
```

3) There used to be a kind of bug where EF would run the retries N^2 times instead of N, which made for much longer delays than you'd expect. (It's supposed to take up to about 26 seconds, but the bug made it take minutes.) However, this isn't so bad because in reality SQL Azure regularly has unavailability for more than a minute :( [https://entityframework.codeplex.com/workitem/2849](https://entityframework.codeplex.com/workitem/2849)

4) If you haven't been doing so already, you really need to dispose of your DbContext after it's used. It seems this is the point that the CommitFailureHandler runs it's purging to tidy up the __TransactionHistory table; if you don't dispose, this table will grow forever (although see next point).

5) 您可能应该在您的启动或后台线程中的某处调用 ClearTransactionHistory，以清除 __TransactionHistory 中的任何剩余部分。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-04T08:17:10.367

我也有同样的问题，就我而言，我使用的是 LINQ-To-SQL（我相信这也适用于实体框架），这就是我打算做的。

[使用存储库模式](http://martinfowler.com/eaaCatalog/repository.html)抽象 Linq-to-sql 查询，并使用重试机制包装生成数据库请求的 Linq-to-sql 代码。

为此，我建议创建一个名为的方法`ExecuteWithRetry(Action action)`，然后像这样调用此方法`ExecuteWithRetry(()=> { db_Item item = model.db_Item.First(); });`

该方法可以通过这种方式实现

```
private void  ExecuteWithRetry(Action action)
{
  var retryStrategy = new Incremental(5, TimeSpan.FromSeconds(1), 
  TimeSpan.FromSeconds(2));

  // Define your retry policy using the retry strategy and the Windows Azure storage
  // transient fault detection strategy.
  var retryPolicy =
  new RetryPolicy<StorageTransientErrorDetectionStrategy>(retryStrategy);

  // Receive notifications about retries.
  retryPolicy.Retrying += (sender, args) =>
  {
    // Log details of the retry.
    var msg = String.Format("Retry - Count:{0}, Delay:{1}, Exception:{2}",
        args.CurrentRetryCount, args.Delay, args.LastException);
    Trace.WriteLine(msg, "Information");
  };

  try
  {
    this.retryPolicy.ExecuteAction(action);
  }
  catch (Exception ex)
  {
     Trace.TraceError(ex.TraceInformation());
    throw;
  }
 } 
```

我也将尝试这种方法，希望它会奏效

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T21:38:33.487

实际上你想使用 MS 提供的扩展方法。参考： http: [//msdn.microsoft.com/en-us/library/hh680906 (v=pandp.50).aspx](http://msdn.microsoft.com/en-us/library/hh680906(v=pandp.50).aspx)

“此外，**SqlCommandExtensions**和**SqlConnectionExtensions**类提供了一组扩展方法，使 .NET 开发人员能够打开 SQL Azure 数据库连接并调用 SQL 命令。这些扩展方法在您无法调整代码以采用ReliableSqlConnection 类的优势。例如，您可能正在使用内部使用 SqlConnection 实例的企业库数据访问应用程序块或实体框架。**在这种情况下，扩展方法可帮助您添加瞬态故障处理应用程序块提供的重试功能对现有代码没有重大的返工。**

"

# ruby-on-rails - Rails：关联会变慢吗

> ID：12282428
> 
> 赞同：1
> 
> 时间：2012-09-05T13:20:55.097
> 
> 标签：ruby-on-rails, performance, associations

我所有的模型都使用关联进行连接。我发现自己，在所有控制器中，调用一个入口模型（商店模型）来获得我想要的一切：商店产品、产品评论、商店客户等。

因此，如果我只需要商店信息（位置、电话……），Rails 会为我提供我需要的所有商店信息，以及所有其他相关信息（客户、产品……）。但是我不需要它们用于该页面，并且我不使用它们。

**这（关联）是否会对我的应用程序的性能产生负面影响？**

如果是，最佳实践是什么？我可以指定我需要的深度关联（直到第 n 个孩子）？

感谢您分享您的知识和经验。

# javascript - 网址虚拟目录破坏了外部 javascript 链接，因此无法找到文件

> ID：12282443
> 
> 赞同：1
> 
> 时间：2012-09-05T13:21:42.380
> 
> 标签：javascript, asp.net, html

所以我有一个小问题，我的网址看起来有点像这样：

```
http://localhost:23425/dynamicName/Home.aspx 
```

dynamicName 部分很好......将被动态命名。所以正因为如此，它打破了我的

```
<script type="text/javascript" src="Scripts/jquery.js"> </script> 
```

脚本，因为它找不到它。但是，如果它

```
http://localhost:23425/Home.aspx 
```

然后javascript工作。

所以我的问题是我怎样才能让 javascript 在动态虚拟目录上工作而不让我的链接被破坏？

我试过这个：

```
<script type="text/javascript" src="<%=ResolveClientUrl("~/Scripts/Menu.js")%>"> </script> 
```

使用脚本链接和 css 链接，但似乎没有这样做。只是一个灰色框掉下来，没有内容。任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:24:34.017

尝试：

```
<%=ResolveUrl("~/Scripts/Menu.js") %> 
```

`ResolveClientUrl`创建一个包含`../`. 那可能是你的问题。

# php - 无法将 DateTime 对象保存到 MySQL 中的日期时间字段

> ID：12282445
> 
> 赞同：1
> 
> 时间：2012-09-05T13:21:45.710
> 
> 标签：php, mysql, datetime, redbean

这是我的 MySQL 数据库的数据库架构：

```
create table noticia 
(
    id int,
    imagen varchar(255),
    fecha datetime,
    titulo varchar(255),
    url varchar(255),
    descripcion varchar(255),
    contenido text
) 
```

我使用 RedBeanPHP 作为我的 ORM 将信息保存到数据库中。这是我根据[文档](http://nl3.php.net/manual/en/datetime.construct.php)`DateTime`将日期抓取并解析为对象的地方。

```
foreach ($element->find('span.fechanoticia') as $fecha) {
   $tmp = str_replace("/", "-", $fecha->innertext);
   print_r($tmp);

   $dateFoo = new DateTime($tmp);
   echo $dateFoo->format('Y-m-d H:i:s');

   $newItem->set_fechanoticia($dateFoo);
} 
```

例如`$tmp`变量 this 值：

```
05-09-2012 
```

对格式的`echo`调用返回：

```
2012-09-05 00:00:00 
```

一切都很好，而且工作正常。

但是，当我尝试使用 RedBeanPHP 将其保存到数据库时，出现此错误：

> 致命错误：C:\xampp\htdocs\blog-uvm\rb.php:4880 中未捕获的异常 'RedBean_Exception_Security' 和消息 'Invalid Bean: property fecha' 堆栈跟踪：#0 C:\xampp\htdocs\blog-uvm\ rb.php(5108): RedBean_OODB->check(Object(RedBean_OODBBean)) #1 C:\xampp\htdocs\blog-uvm\rb.php(5082): RedBean_OODB->storeBean(Object(RedBean_OODBBean)) #2 C :\xampp\htdocs\blog-uvm\rb.php(7005): RedBean_OODB->store(Object(RedBean_OODBBean)) #3 C:\xampp\htdocs\blog-uvm\index.php(60): RedBean_Facade:: store(Object(RedBean_OODBBean)) #4 {main} 在第 4880 行的 C:\xampp\htdocs\blog-uvm\rb.php 中抛出

RedBeanPHP 不能处理日期时间对象吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:27:40.933

根据[RedBean 的文档](http://www.redbeanphp.com/manual/)（*更多数据类型*），您只能保存`DateTime`字符串形式的对象。

例如：

```
// It's a string - not a DateTime.
$photo->created = '1995-12-05 19:00:00'; 
```

* * *

在这种情况下，解决方案应该是保存格式化的字符串，而不是`DateTime`对象本身：

```
$newItem->set_fechanoticia($dateFoo->format('Y-m-d H:i:s')); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:30:21.900

发现这个：[http ://groups.google.com/group/redbeanorm/browse_thread/thread/6961ac635e6886f6](http://groups.google.com/group/redbeanorm/browse_thread/thread/6961ac635e6886f6)

```
The Optimizer will now convert columns with datetime values to datetimefields. If a different value is inserted the column will be reverted by OODB in fluid mode. 
```

# eclipse - 我无法在 Eclipse 中通过 command+C 复制文本

> ID：12282448
> 
> 赞同：2
> 
> 时间：2012-09-05T13:21:50.697
> 
> 标签：eclipse, keyboard-shortcuts, key-bindings, setting

我在 Mac 上使用 Eclipse，JUNO 版本。从前几天开始，我无法通过 command+C 复制文本。在 Windows 中，在我的 Eclipse 的“键”设置中，“复制”的键绑定绑定到“命令+C”。我不明白出了什么问题...请告诉我出了什么问题。

*****重置Key Bind并重启Eclipse，问题解决！！*** *****

# php - codeigniter 和 cpanel 安装

> ID：12282450
> 
> 赞同：2
> 
> 时间：2012-09-05T13:21:54.867
> 
> 标签：php, codeigniter, codeigniter-routing

我对将 codeigniter 移动到我的网络服务器是全新的，并且我在配置时遇到了问题。我应该将我的 codeigniter 项目文件夹放在 www 下 myurl.com 的根目录中的什么位置？我应该移出应用程序和系统文件夹吗？

我正在尝试删除 index.php？从我的 URL 名称中，我应该将我的 .htaccess 文件放在根目录中还是与我的 codeigniter 目录相同的文件夹中？

我希望能够输入 (www.myurl.com) 并被重定向到我的 home_controller/index 这可能吗？

![在此处输入图像描述](../Images/16851e5c74538cd17235ce1a404681d3.png)

*下面是我的 .htaccess 文件的全部内容*

```
<IfModule mod_rewrite.c>
RewriteEngine On
RewriteBase /MMSFL/

#'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php/$1 [L]

#Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L,QSA]
</IfModule>

<IfModule !mod_rewrite.c>

ErrorDocument 404 /index.php
</IfModule> 
```

## 我还在配置/路由中进行了以下更改

```
 $config['index_page'] = "";
    $config['base_url'] = "http://myurl.com/";
    $config['server_root'] = $_SERVER['DOCUMENT_ROOT'];
    $config['uri_protocol'] = 'AUTO';

$route['default_controller'] = "home_controller"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T21:14:25.190

**目录结构**

如果可能的话，建议您将您的`system`和`application`文件夹保留在 Web 根目录之上。您的`index.php`文件需要可以从浏览器访问，所以它应该放在您的`public_html`文件夹中。这是您可以使用的可能的目录结构：

```
-/home/edd
    -public_html
        -index.html
        -.htaccess
    -system
    -application 
```

如果需要，您可以重命名系统和应用程序文件夹，或者创建另一个子目录来放置它们。

* * *

**索引.php**

`index.php`您需要在其中更新并`$system_path`反映`$application_folder`系统和应用程序文件夹的位置和名称。您可以使用绝对路径或相对路径。相对路径如下图：

```
$system_path = '../../system';
$application_folder = '../../application'; 
```

* * *

**.htaccess**

文件的前两个部分`.htaccess`用于防止用户访问您的系统和应用程序文件夹。如果您将它们存储在 Web 根目录之上，那么您实际上并不需要它。如果保留它们，则需要更新路径。此文件应位于您的`public_html`文件夹中。

* * *

**应用程序/config/config.php**

正如您已经正确完成的那样，`index.php`应该从`index_page`配置中删除该值，因此可以使用*.htaccess*文件从您的 url 中删除*index.php ；*

 *```
$config['index_page'] = 'index.php'; 
```

应改为：

```
$config['index_page'] = ''; 
```

您可能还必须进行此更改：

```
$config['uri_protocol'] = 'REQUEST_URI'; 
```

（如果您对这个值不满意，请尝试其他值。应该可以！）

* * *

**应用程序/config/routes.php**

```
$route['default_controller'] = "home_controller"; 
```

（假设这是您的控制器的名称。）

* * *

您的网站可能依赖于某些*资产*，例如 CSS 和 JavaScript。这些应该放在您的网络根目录中 - `public_html`. 您可以随意组织这些文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:50:40.900

将驻留在 CI 文件夹中的所有文件移动到`public_html`. 该`.htaccess`文件应位于`public_html`（应用程序、系统、index.php 等也驻留的位置）的根目录中。

旁注：不要把`$config`值放进去`/config/routes.php`——那些需要放进去`/config/config.php`*

# c# - 从 C 插件向 Unity3D 发送字节数据的任何正确方法？

> ID：12282454
> 
> 赞同：8
> 
> 时间：2012-09-05T13:22:10.247
> 
> 标签：c#, objective-c, c, unity3d, protobuf-net

这里只是一个好奇的问题。

当您在 iOS 平台上为 Unity 编写插件时，插件具有有限的本地到托管回调功能（从插件到 Unity）。基本上这个文档： [iOS 插件 Unity 文档](http://docs.unity3d.com/Documentation/Manual/PluginsForIOS.html)

声明您可以回调的函数签名是这样的：

> 只能从本机代码调用与以下签名相对应的脚本方法： function MethodName(message:string)

C 中定义的签名如下所示：

> void UnitySendMessage(const char* obj, const char* 方法, const char* msg);

所以这几乎意味着我只能将字符串发送回 Unity。

现在在我的插件中，我使用 protobuf-net 序列化对象并将它们发送回统一进行反序列化。我已经让它工作了，但是通过一个解决方案，我觉得它很丑陋，而且一点也不优雅：

```
Person* person = [[[[[Person builder] setId:123]
                    setName:@"Bob"]
                   setEmail:@"bob@example.com"] build];
NSData* data = [person data];

NSString *rawTest = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];

UnitySendMessage("GameObject", "ReceiveProductRequestResponse", [rawTest cStringUsingEncoding:NSUTF8StringEncoding]); 
```

基本上我只是将字节流编码成一个字符串。然后在 Unity 中获取字符串的字节并从那里反序列化：

```
System.Text.UTF8Encoding encoding=new System.Text.UTF8Encoding();
Byte[] bytes = encoding.GetBytes(message); 
```

这确实有效。但是真的没有别的办法了吗？也许有人知道如何以其他方式完成它？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T15:08:46.247

Base-64（或其他类似的基础）是这样做的正确方法；您**不能**在此处使用编码（例如 UTF8） - 编码旨在转换：

```
arbitrary string <===encoding===> structured bytes 
```

即字节具有定义的结构；protobuf 不是这种情况；你想要的是：

```
arbitrary bytes <===transform===> structured string 
```

在大多数情况下，base-64 是最方便的实现。严格来说，你有时可以比 64 高一点，但你可能不得不手动滚动它 - 不漂亮。Base-64 易于理解且支持良好，是一个不错的选择。我不知道你是如何在 C 中做到这一点的，但在 Unity 中应该是：

```
string s = Convert.ToBase64String(bytes); 
```

通常，您还可以在此处避免额外的缓冲区，假设您正在将内存中序列化为`MemoryStream`：

```
string s;
using(var ms = new MemoryStream()) {
    // not shown: serialization steps

    s = Convert.ToBase64String(ms.GetBuffer(), 0, (int)ms.Length);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-05-15T11:27:25.957

基于 Marc Gravell 回答的示例：

在 ios 方面：

```
-(void)sendData:(NSData*)data
{
    NSString* base64String = [data base64Encoding];
    const char* utf8String = [base64String cStringUsingEncoding:NSUTF8StringEncoding];
    UnitySendMessage("iOSNativeCommunicationManager", "dataReceived", utf8String);
} 
```

在团结方面：

```
public delegate void didReceivedData( byte[] data );
public static event didReceivedData didReceivedDataEvent;

public void dataReceived( string bytesString )
{
    byte[] data = System.Convert.FromBase64String(bytesString);

    if( didReceivedDataEvent != null )
        didReceivedDataEvent(data);
} 
```

# javascript - ipad 上的键盘未使用 phonegap 和 HTML5 输入字段显示

> ID：12282455
> 
> 赞同：1
> 
> 时间：2012-09-05T13:22:11.197
> 
> 标签：javascript, jquery, ios, html, cordova

我使用 phonegap 生成了一个应用程序到一个 IPA 文件中，并将它加载到我的 IPAD3 上。当我使用浏览器测试我的移动应用程序时，键盘功能运行良好（mobile.koolantkoolers.com），但现在在本机应用程序中它没有出现？我需要某种点击事件处理程序吗？我以为这都是通过 phonegap 库处理的？任何帮助或反馈将不胜感激！

# c# - 我不断将 .success 视为错误

> ID：12282461
> 
> 赞同：0
> 
> 时间：2012-09-05T13:22:21.680
> 
> 标签：c#, asp.net, regex

我必须阅读一个 excel 文件并检查其名称是否遵循某种模式。

模式是 CDFSDDRCxxxCurryymmdd，其中 xxx 是一个数字，Curr 是 EUR 或 GBP，yymmdd 是一个日期。

这是我的文件名，CDFSDDRC603EUR120124.xls。也可以是 .xlsx。

这是我的代码。

```
Match nameIsValid = Regex.Match(activeWorkbook.Name,
@"CDFSDDRC(?<xxx>[0-9]+)(?<xxx>[A-Z]+)(?<yymmdd>[0-9][0-9][0|1][0-9][0-3][0-9])\.xls?"); 
```

我不断将 nameIsValid.success 设为 false。我认为我的正则表达式还可以，但又一次。有任何想法吗？瑞马丁斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:32:04.290

您的日期匹配模式有些混乱。它并不真正匹配日期，而只是一个奇怪的数字组合。此外，您不能`|`在字符类中使用。仔细考虑日期是如何构建的。

此外，您有一个重复的匹配组，称为`xxx`. 这肯定会在访问其中一个时弄乱 C# 的行为。

试试这个

```
/CDFSDDRC(?<xxx>\d+)(?<curr>[A-Z]+)(?<yymmdd>\d{2}(?:0[1-9]|1[12])(?:(?:0|1|2)[1-9]|3[0-2]))\.xlsx?/ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:32:11.823

```
CDFSDDRC(?<xxx>\d+)(?<curr>EUR|GBP)(?<yymmdd>\d{2}[0-1]\d[0-3]\d)\.xlsx? 
```

以下对 xls 和 xslx 都适用。

# sql-server - 在本地主机上工作但不在服务器上？

> ID：12282463
> 
> 赞同：0
> 
> 时间：2012-09-05T13:22:23.223
> 
> 标签：sql-server, ajax, jquery

我正在使用 ajax 自动竞争在网站中进行搜索，但它存在一些问题。问题是当触发器完成（调用更改事件）时，数据被获取并显示在本地主机上，而它在服务器上不起作用。

为了测试，我使用了下面的代码 -

> 回声（“gggg1234”）；出口;

但还是一样，这在 localhost 中回显，而在服务器中同样没有结果出来？我不明白！在服务器的情况下，post ajax 是不是没有发生？可能是什么问题？我用过

`<script type="text/javascript" src="http://www.google.com/jsapi"></script>`

这是我用来检索数据的 ajax api。

```
$.post("regsearch.php", {queryString: ""+value+"",queryString1: ""+marvalue+"",queryStringfage: ""+fage+"",queryStringtage: ""+tage+"",queryStringfromh: ""+fromhvalue+"",queryStringtoh: ""+tohvalue+"",queryStringreg: ""+regvalue+"",queryStringcas: ""+casvalue+"",queryStringocc: ""+occvalue+"",queryStringcon: ""+convalue+""}, function(data) { // Do an AJAX call
            $('#suggestions').fadeIn(); // Show the suggestions box
            $('#suggestions').html(data); // Fill the suggestions box
        }); 
                                        } 
```

以上是发送 ajax 发布请求`regsearch.php`并从中检索数据的代码。

在`regsearch.php`以下代码中使用 -

```
 echo ("above isset");
            if(isset($_POST['queryString1'])||isset($_POST['queryString'])) {
                $queryString1 = $db->real_escape_string($_POST['queryString1']);
                $queryString = $db->real_escape_string($_POST['queryString']);
                $queryStringfage = $db->real_escape_string($_POST['queryStringfage']);
                $queryStringtage = $db->real_escape_string($_POST['queryStringtage']);
                $queryStringtoh = $db->real_escape_string($_POST['queryStringtoh']);
                $queryStringfromh = $db->real_escape_string($_POST['queryStringfromh']);
                $queryStringreg= $db->real_escape_string($_POST['queryStringreg']);
                $queryStringocc = $db->real_escape_string($_POST['queryStringocc']);
                $queryStringcon = $db->real_escape_string($_POST['queryStringcon']);
                $queryStringcas = $db->real_escape_string($_POST['queryStringcas']);
                echo ("below isset");
echo $queryString1;
            echo $queryString;
            echo $queryStringfage;
            echo $queryStringtage;
            echo $queryStringocc;
            echo $queryStringtoh;
            echo $queryStringfromh;
            echo $queryStringreg; 
```

出于测试目的，我使用了 echo ，它显示`echo ("above isset");`并`echo ("below isset");`在

```
echo $queryString1;
            echo $queryString;
            echo $queryStringfage;
            echo $queryStringtage;
            echo $queryStringocc;
            echo $queryStringtoh;
            echo $queryStringfromh;
            echo $queryStringreg; 
```

没有回声。解决我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-03T10:43:17.563

尝试在 apache 服务器上激活 ajax [http://www.ehow.com/how_8767985_activate-ajax-apache-server.html](http://www.ehow.com/how_8767985_activate-ajax-apache-server.html)

# pdf - 使用 SmartCard 使用 TimeStamp 和 OCSP 签署 PDF

> ID：12282467
> 
> 赞同：2
> 
> 时间：2012-09-05T13:22:44.040
> 
> 标签：pdf, itextsharp, smartcard, sign, ocsp

我需要使用 SmartCard 使用 TimeStamp 和 OCSP 签署 PDF。任何示例如何使用 ITextSharp ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T14:50:49.287

有关如何执行此操作的文档正在开发中：http: [//itextpdf.com/book/digitalsignatures20120902.pdf](http://itextpdf.com/book/digitalsignatures20120902.pdf) 文档的第一个版本将仅包含 Java 示例。您必须调整代码示例。您需要第 4.1.3 节，标题为“使用智能卡签名文档”。您将无法使用 4.2 中的代码，因为它特定于 Java（因为 Java 有 javax.smartcardio API）。您的选择是使用 Windows-MY 或 PKCS#11。请不要指望能够在不了解您在做什么的情况下复制/粘贴代码并使其正常工作。见 owlstead 的评论。

# google-apps-script - 解压附件的脚本

> ID：12282468
> 
> 赞同：1
> 
> 时间：2012-09-05T13:22:45.780
> 
> 标签：google-apps-script

我正在尝试创建一个 Google Apps 脚本，它接收电子邮件附件，将其解压缩并转发。我在 Google Drive 中看到了解包功能（您可以在那里上传文件，打开它并将单个文件复制到您的驱动器）。是否可以通过 Google Apps 脚本以某种方式访问​​此功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:29:53.133

首先，您需要编写一个脚本，以便在此触发器运行如下所示的这段代码后，自动将电子邮件的附件直接上传到用户的 Google Drive

```
function testzip(){
var files=DocsList.getRootFolder().find('Sans titre.txt.zip');
var zipblob=files[0].getBlob();
var unzipblob = Utilities.unzip(zipblob);
var unzipstr=unzipblob[0].getDataAsString();// it is a text file
DocsList.createFile('Sans titre.txt',unzipstr);// I kept the original name to make it simple
} 
```

检查此代码。如果它不起作用，请不要怪我。这只是一个提议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-07T14:48:01.000

注释：文件*是*blob，因此需要调用 getBlob()。任何具有 getBlob() 函数的东西都可以直接用作 blob。你可以更换

```
var zipblob=files[0].getBlob();
var unzipblob = Utilities.unzip(zipblob); 
```

有了这个：

```
var zipfile=files[0];
var unzipblob = Utilities.unzip(zipfile); 
```

我试图编辑另一个答案，但显然没有尝试该代码的人拒绝编辑不正确。

# javascript - 对 json 文件的 ajax 请求的 YUI 问题

> ID：12282469
> 
> 赞同：0
> 
> 时间：2012-09-05T13:22:46.237
> 
> 标签：javascript, yui

我正在尝试使用 YUI 访问远程 json 文件，示例代码可以在下面的 jsfiddle 中看到。请求发送到服务器（您可以在 Google 开发工具网络选项卡中看到它）。我无法理解的成功或失败功能没有执行

[http://jsfiddle.net/brendan_rice/4FZc4/3/](http://jsfiddle.net/brendan_rice/4FZc4/3/)

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:32:25.727

您的数据源必须支持回调语法，用 callback([...]); 包装数据

阅读第一部分（蓝色）[http://yuilibrary.com/yui/docs/datasource/datasource-get.html](http://yuilibrary.com/yui/docs/datasource/datasource-get.html)

我通过输入 YUI({ filter: 'debug' }) 解决了这个问题，这表明 .Get 请求中存在语法错误（这表明发送了未包装的 JSON 数据）。

此外，如果您只想要来自跨域请求的原始数据而不需要真正的 DataSource 实例，您可能会发现 Y.jsonp 更易于使用 (http://yuilibrary.com/yui/docs/jsonp/) .

# ruby-on-rails - 如何对对象列求和？

> ID：12282473
> 
> 赞同：0
> 
> 时间：2012-09-05T13:22:53.807
> 
> 标签：ruby-on-rails, sum

我需要对列求和。

****我认为问题出在课堂上，在我采取 performance_reports 的行动中。** 我有关联，所以我通过下一个代码获得与用户相关的所有报告：**

 **```
 @performance_reports = Array.new
     current_user.websites.each do |website|
      reports = website.performance_reports
        reports.each do |report|
        @performance_reports.push(report)
      end
    end 
```

在我看来，我正在打印每个报告，在底部我想打印列的摘要。

这是视图：

```
 <% @performance_reports.each do |performance_report| %>
      <tr>
        <td><%= performance_report.impressions %></td>
        <td><%= performance_report.clicks %></td>
        <td><%= performance_report.conversions %></td>
      </tr>
     <% end %>
     <tr>
      <td><%=  @performance_reports.count(:clicks)%></td>
      <td><%=  @performance_reports.count(:conversions)%></td>
     </tr> 
```

所有 - clicls，转换 - 都是整数类型。此代码正在打印，摘要为 0。

**我有两个问题：如何对整数求和以及如何对不保存到数据库的非整数列求和？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:48:14.433

您可以为此使用方法 sum

```
@performance_reports.sum(:clicks) 
```

它也不会和整数相加，因为它会返回非整数类型，像这样在整数调用中转换它

```
@performance_reports.sum(:clicks).to_i 
```**

# windows-phone - 应用栏 | 视窗电话 7

> ID：12282481
> 
> 赞同：0
> 
> 时间：2012-09-05T13:23:08.390
> 
> 标签：windows-phone, application-bar

是否可以在应用程序顶部而不是底部显示 windows phone 7 或更高版本中的应用程序栏，并且还可以自定义应用程序栏。IE。

Icon1 Icon2 一些文本 Icon3 Icon4。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T17:18:58.197

不，应用程序栏支持很少的自定义。
您可以自定义的唯一内容是按钮的数量（最多 4 个）和栏的颜色。
无法自定义栏的位置或组合图标和文本。

# python - Python 2D 数组在某处丢失数据

> ID：12282483
> 
> 赞同：3
> 
> 时间：2012-09-05T13:23:14.943
> 
> 标签：python, python-3.x, python-imaging-library

我在尝试使用 PIL 和 python 构建颜色网格时遇到了一个令人沮丧的问题。我可以遍历我的网格并很好地提取颜色，但是当我去读回它们时，其中一个或多个总是由于某种原因消失了。这似乎是一个令人难以置信的基本错误，但却是一个非常令人沮丧的错误。

这是有问题的代码。cx 和 cy 只是指向网格中每个采样点的中心，颜色是采样区域中使用最多的颜色

```
image = ImageGrab.grab(box)
matrix = [[None] * ROWS] * COLS

c1 = set()
for row in range(ROWS):
    for col in range(COLS):
        cx = (col * CELLW) + int(CELLW / 2)
        cy = (row * CELLH) + int(CELLH / 2)
        sample_box = (cx - SAMPLE_SIZE, cy - SAMPLE_SIZE, cx + SAMPLE_SIZE, cy + SAMPLE_SIZE)
        sample = image.crop(sample_box)
        color = sorted(sample.getcolors())[-1][1]    
        matrix[col][row] = color
        c1.add(color)
print(c1)

c2 = set()
for row in range(ROWS):
    for col in range(COLS): 
        c2.add(matrix[col][row])
print(c2) 
```

如您所见，（我认为）应该发生的是 c1 拥有所有独特的颜色并打印它们。然后 c2 循环同样的东西并打印出独特的颜色。我不明白为什么他们应该不同，但他们是。

输出如下所示：

```
{(240, 240, 240), (255, 255, 255), (252, 252, 252)}
{(240, 240, 240), (255, 255, 255)} 
```

对于这个令人沮丧的问题的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:25:29.790

我认为这里的问题是您的矩阵包含对同一列表的多个引用。考虑：

```
>>> matrix = [[None]*3]*4
>>> matrix
[[None, None, None], [None, None, None], [None, None, None], [None, None, None]]
>>> matrix[1][1]=0
>>> matrix
[[None, 0, None], [None, 0, None], [None, 0, None], [None, 0, None]] 
```

你可以通过初始化你的“矩阵”来解决这个问题：

```
matrix = [[None]*ROWS for _ in range(COLUMNS)] 
```

`xrange`如果您愿意，可以在 python 2.x 中使用...

# c# - 实体框架模型构建器映射问题

> ID：12282485
> 
> 赞同：0
> 
> 时间：2012-09-05T13:23:16.770
> 
> 标签：c#, entity-framework

我在为实体定义模型构建器时遇到问题，并在尝试为该实体设置当前值时抛出错误。下面导致问题的行是：

```
 context.Entry(tEntity.TaskSchedule.ScheduleDaysAndTimes).CurrentValues.SetValues(selectedTask.TaskSchedule.ScheduleDaysAndTimes); 
```

我抛出一个“实体类型 EntityCollection`1 不是当前上下文模型的一部分。”

这是我的设置：

```
public class TaskEntity
{
       [DatabaseGenerated(DatabaseGeneratedOption.Identity)]
       public virtual int TaskId { get; set; }

       public virtual TaskScheduleEntity TaskSchedule { get; set; } 
}
public class TaskScheduleEntity
{
    /*Foreign Key*/
    public virtual int TaskId { get; set; } 
    public virtual TaskEntity TaskEntity { get; set; } 

    public virtual ICollection<ScheduleDayTimeEntity> ScheduleDaysAndTimes { get; set; }

public class ScheduleDayTimeEntity
{
    public int TaskScheduleID { get; set; }
    public virtual TaskScheduleEntity TaskScheduleEntity { get; set; }

    public virtual ICollection<DateTime?> Times { get; set; }
}

 modelBuilder.Entity<TaskEntity>()
            .HasKey(k => k.TaskId)
            .HasRequired(s => s.TaskSchedule)
            .WithRequiredPrincipal(p => p.TaskEntity)
            .WillCascadeOnDelete(true);

        modelBuilder.Entity<TaskScheduleEntity>()
            .HasKey(k => k.TaskId)
            .HasMany(t => t.ScheduleDaysAndTimes)
            .WithRequired(a => a.TaskScheduleEntity)
            .WillCascadeOnDelete(false);

        modelBuilder.Entity<ScheduleDayTimeEntity>()
            .HasKey(k => k.TaskScheduleID);

public void SaveTasks()
    {
        using (var context = new AppContext())
        {
            var tEntity = context.Tasks.First(x => x.TaskId == selectedTask.TaskId);

            context.Entry(tEntity).CurrentValues.SetValues(selectedTask);
            context.Entry(tEntity.TaskSchedule).CurrentValues.SetValues(selectedTask.TaskSchedule);

            context.Entry(tEntity.TaskSchedule.ScheduleDaysAndTimes).CurrentValues.SetValues(selectedTask.TaskSchedule.ScheduleDaysAndTimes); /* Error thrown here*/

            context.SaveChanges();

        }

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:00:18.530

[DbContext.Entry()](http://msdn.microsoft.com/en-us/library/gg696578%28v=vs.103%29.aspx)期待一个实体，你给它一个`ICollection<ScheduleDayTimeEntity>`

您需要更新代码，以便循环访问集合：

```
foreach (var scheduleDayTimeEntity in tEntity.TaskSchedule.ScheduleDaysAndTimes)
{
  context.Entry(scheduleDayTimeEntity).CurrentValues.SetValues(/* Correct Value goes here */ );

} 
```

# asp.net - 如何在asp.net用户控件（ascx）中插入activex

> ID：12282486
> 
> 赞同：0
> 
> 时间：2012-09-05T13:23:21.403
> 
> 标签：asp.net, activex, integration

我有一个关于集成 betweek ASP.NET（ASCX 控制器）和 ActiveX 的新问题。我正在尝试在我的应用程序中插入 SignDoc activeX。

这个组件有几个 dll，但我不知道如何将它插入到我的控件中。

我正在使用 Visual Studio 2008，控件安装在 Sharepoint 2007 场中。

谢谢你的任何建议

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:03:20.193

首先，您在 MOSS 中托管并不重要。它是一个 ActiveX，它将在客户端浏览器上运行。因此，只要它没有服务器端部分或连接，您就可以在一个普通的 asp.net 页面中开始测试它。一个不好的副作用是您需要在每台客户端计算机上手动注册它，或者将其包含在您的 asp.net 页面的 CAB 文件中

其次，您的组件有 2 个 dll。您需要使用 regsvr32 工具注册它们。我不确定每个 dll 里面是否有一个 COM 对象，或者只有一个有 COM，另一个是助手。因此，您可能需要在命令提示符下键入以下 2 行：

*   regsvr32 -i "dll1 的完整路径"
*   regsvr32 -i "dll2 的完整路径"

如果上述命令之一失败没问题，但至少有一个应该成功

最后一步是最简单的，在VS中打开一个空白的asp.net页面并展开工具箱，在工具箱的空白区域内右键单击并选择“选择项目”，然后将你的ActiveX添加到工具箱中，然后你可以简单地拖动它到页面。如果您切换到页面的源视图，您将找到对象标签。

编辑：在 Windows 7 中，您通常以管理员身份运行控制台，以便成功执行 regsvr32 命令。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:26:18.080

ActiveX 使用对象标记和相应的类 ID 包含在页面中。

在此处阅读更多信息：http: [//msdn.microsoft.com/en-us/library/ms970419.aspx](http://msdn.microsoft.com/en-us/library/ms970419.aspx)

# c# - 如何防止 ASP.net 中的无限循环

> ID：12282487
> 
> 赞同：6
> 
> 时间：2012-09-05T13:23:28.760
> 
> 标签：c#, multithreading

在 ASP.NET 4.0 网页中，我想检测并防止运行时间过长的代码。所以我正在寻找这样的构造：

```
try for 1000 ms
{
    RunPotentiallyTooLongCode();
}
catch
{
    RecordError( "code ran out of control" );
    // let user know
    ...
} 
```

虽然我们目前使用的是 4.0，但我也会对 4.5 的解决方案感兴趣，也许添加的异步功能会有所帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T13:31:36.237

您将为长时间运行的任务生成一个新线程，然后阻塞并等待该线程完成或直到达到超时。如果达到超时，则该任务可能已阻塞（无限循环、死锁或阻塞 IO 等待），您可以终止线程。

```
Thread thread = new Thread( RunPotentiallyTooLongCode );
thread.Start();
Boolean success = thread.Join( 1000 );
if( !success ) thread.Abort(); 
```

这里没有必要使用 4.0 异步的东西。事实上，这段代码也可以在 .NET 1.0 上正常运行。

# wicket - 向 refreshView 添加行而不重新绘制整个 refreshView

> ID：12282492
> 
> 赞同：2
> 
> 时间：2012-09-05T13:23:40.110
> 
> 标签：wicket

我们有一个`refreshingView<shirt>`（包含在边框内）设置，在刷新视图之外，我们有一个 ajaxLink，它将一个新的衬衫对象添加到支持刷新视图的列表中。refreshView 包含文本字段和下拉菜单，供用户输入有关衬衫的信息。

在 ajaxLink 内部，我们将衬衫添加到列表中，然后将整个边框添加到 ajaxLink 的目标，从而刷新边框。当您添加一行并填写信息（衬衫颜色、尺码、款式等）并添加另一件衬衫时，就会出现问题。添加了新衬衫的另一行，但同时输入的有关第一件衬衫的所有信息都丢失了。

关于如何保留以前输入的衬衫信息的任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T14:09:42.583

之前的数据会丢失，因为 refreshView 在每次渲染后都会丢弃所有的 Item（以及包含数据的模型）。

您可以设置 ItemReuseStrategy：

```
refreshingView.setItemReuseStrategy(new ReuseIfModelsEqualStrategy()); 
```

另一种更复杂的方法是只重绘新添加的行。请参阅此处的答案：[我可以在不刷新后者的情况下将元素添加到 RepeatingView 吗？](https://stackoverflow.com/questions/7807514/can-i-add-an-element-to-a-repeatingview-without-refreshing-the-latter)

# php - wso2 开发前端店面

> ID：12282494
> 
> 赞同：0
> 
> 时间：2012-09-05T13:23:43.723
> 
> 标签：php, asp-classic, wso2, wso2esb

我有兴趣开发类似于 WSO2 API Manager 的 STORE 或 PUBLISHER 应用程序的前端。我需要实现的操作就像：

*   显示所有可用的代理服务（或已发布的服务）
*   显示每个代理的端点

我应该使用哪些 API / 库来做类似的事情？

我可以在 php 或 asp 中构建一个 webapp 来做到这一点吗？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T12:07:49.780

对于 WSO2 API Manager 的前端应用程序，我们使用了名为“Jaggery”的内置 javascript 服务器端脚本引擎。您可以从[此处找到有关 jaggery 的更多信息。](http://jaggeryjs.org/)

API Manager 相关的后端功能通过实现的 java API 处理。其前端功能通过 javascript/jquery 处理。后端 API Manager 相关的基于 java 的功能和前端 javascript 功能之间的所有映射都通过这个 Jaggery 脚本处理引擎。如果您从[这里](https://svn.wso2.org/repos/wso2/carbon/platform/branches/4.0.0/components/apimgt/api-publisher-web/src/)查看 API Publisher/Store 源代码，应用程序目录结构已实现为模板引擎。有关如何自定义 API Publisher/Store 前端应用程序的博客文章可以从[这里](http://lalajisureshika.blogspot.com/2012/07/customizing-wso2-api-storepublisher-app.html)找到。

除了实现 API Publisher/Store 前端 html 视图之外，我们还使用了[此处描述的引导框架。](http://twitter.github.com/bootstrap/index.html)

谢谢;

# php - array_walk_recursive 是否使用尾调用优化？

> ID：12282497
> 
> 赞同：5
> 
> 时间：2012-09-05T13:23:45.893
> 
> 标签：php, tail-recursion

只是单纯的好奇。我在 Google 上找不到任何东西，而且我绝对不想深入研究 PHP 源代码。

[array_walk_recursive](http://php.net/manual/en/function.array-walk-recursive.php)是否实现了尾调用优化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:37:35.280

简短的回答，不:)

另见：[https ://github.com/php/php-src/blob/master/ext/standard/array.c#L1097](https://github.com/php/php-src/blob/master/ext/standard/array.c#L1097)

# python - Python - 使用 lxml Xpath 功能保留一些 HTML 标记

> ID：12282505
> 
> 赞同：2
> 
> 时间：2012-09-05T13:24:05.367
> 
> 标签：python, html, xpath, html-parsing, lxml

我正在使用 LXML Xpath 功能编写一些 HTML 解析器。它似乎工作正常，但我有一个主要问题。

解析所有 HTML`<p>`标签时，有使用标签的单词`<b>`等`<i>`。我需要保留这些标签。

例如，在解析 HTML 时；

```
<div class="ArticleDetail">
    <p>Hello world, this is a <b>simple</b> test, which contains words in <i>italic</i> and others.
    I have a <strong>strong</strong> tag here. I guess this is a silly test.
    <br/>
    Ops, line breaks.
    <br/></p> 
```

如果我运行这个 Python 代码；

```
x = lxml.html.fromstring("...html text...").xpath("//div[@class='ArticleDetail']/p")
for stuff in x:
    print stuff.text_content() 
```

这似乎工作正常，但它删除了所有其他标签，而不仅仅是 p。

输出：

```
Hello world, this is a simple test, which contains words in italic and others.
I have a strong tag here. I guess this is a silly test.
Ops, line breaks. 
```

如您所见，它删除了所有`<b>`,`<i>`和`<strong>`标签。无论如何你可以保留它们吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:28:23.583

您当前只检索文本内容，而不是 HTML 内容（包括标签）。

您想检索 XPath 匹配的所有子节点：

```
from lxml import etree

x = lxml.html.fromstring("...html text...").xpath("//div[@class='ArticleDetail']/p")
for elem in x:
    for child in elem.iterdescendants():
        print etree.tostring(child) 
```

# eclipse - 在 Eclipse 中运行 Map Reduce 程序

> ID：12282507
> 
> 赞同：1
> 
> 时间：2012-09-05T13:24:12.317
> 
> 标签：eclipse, hadoop, mapreduce, hbase

我有一个 Map/Reduce 程序，它加载一个文件并将其读入 hbase。如何通过 Eclipse 执行我的程序？我用谷歌搜索并找到了两种方法：

```
1) Using Eclipse Hadoop plugin
2) Create a jar file and execute it in Hadoop server 
```

但是，我可以通过提供连接详细信息并在 Eclipse 中运行来执行我的 Map/Reduce 程序吗？谁能告诉我运行 Hbase Map/Reduce 程序的确切过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T18:03:08.517

我做了以下事情：

*   在我的机器上安装并配置了 hadoop（和 hdfs）
*   为我的 hadoop 工作构建了一个包含所有类的 maven 化的 java 项目
*   其中一个类是我的“MR”或“Job”类，它具有配置和提交我的 hadoop 作业的静态 main 方法
*   我在 Eclipse 中将 MR 类作为 java 应用程序运行

该作业使用 java 项目类路径中的库在 hadoop 中运行（因此不会显示在作业跟踪器中）。对 HDFS 文件的任何引用都使用您使用非 Eclipse hadoop 安装安装和格式化的 HDFS 文件系统。

这与 Eclipse 中的调试器配合得很好，尽管手动构建 JUnit 测试有点痛苦。

# build - SCons：如何附加监听器？

> ID：12282510
> 
> 赞同：1
> 
> 时间：2012-09-05T13:24:17.857
> 
> 标签：build, scons

我需要附加到 SCons 构建，以便在其中发生的事情时得到通知：文件编译、文件链接等。

我知道通过 -listener 选项进行 ANT 构建也是可能的。你能告诉如何为 SCons 构建做这件事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:31:45.767

在 SCons 中构建目标时，您可以通过[此处](http://www.scons.org/doc/production/HTML/scons-man.html)记录的 AddPostAction(target, action) 函数关联发布操作。

这是一个带有 python 函数操作的简单示例：

```
# Create yourAction here:
#   can be a python function or external (shell) command line

def helloWorldAction(target = None, source = None, env = None):
    '''
      target: a Node object representing the target file
      source: a Node object representing the source file
      env: the construction environment used for building the target file
      The target and source arguments may be lists of Node objects if there 
      is more than one target file or source file.
    '''

    print "PostAction for target: %s" % str(target)

    # you can get a map of the source files like this:
    # source_file_names = map(lambda x: str(x), source)
    # compilation options, etc can be retrieved from the env

    return 0

env = Environment()
progTarget = env.Program(target = "helloWorld", source = "helloWorld.cc")
env.AddPostAction(progTarget, helloWorldAction)
# Or create the action object like this:
# a = Action(helloWorldAction) 
```

然后，每次构建 helloWorld 后，`helloWorldAction`都会执行 python 函数。

关于在不修改给定 SConstruct 的情况下执行此操作，我看不出这怎么可能。

# java - 关于eclipse中的状态流插件

> ID：12282513
> 
> 赞同：1
> 
> 时间：2012-09-05T13:24:23.067
> 
> 标签：java, eclipse

我有一个查询，即我有一个名为 abc.state 的文件，它以状态扩展名结尾，它的功能是管理流，因为我们在 struts 中有 struts.xml 用于 webflow，

abc.state 文件包含以下内容..

```
<state name="firststate">
    <event name="abc" next="@def"/>
    <event name="@def" pi="javaclass1" next="@init,@cfg"/>
    <event name="@cfg" pi="javaclass2" next=",nextstate"/>
  </state> 
```

上面的事情表明全局事件 abc 会发生然后用户定义甚至会调用 @def 这将执行一个 javaclass1 并且 javaclass1 将返回一个值 0 或 1 并依赖于它 @init 或 @cfg 将被调用，请告知有任何 Eclipse 插件，我可以在其中看到整个状态流的流程图顺序中的状态流

# ruby-on-rails - 无条件触发 rails/active_record 条件验证

> ID：12282514
> 
> 赞同：1
> 
> 时间：2012-09-05T13:24:23.960
> 
> 标签：ruby-on-rails, validation, activerecord

我有一个具有三个特定状态的模型`draft`：`submitted`和`published`。

这些状态中的每一个都有特定的验证规则。例如，模型的名称仅在`submitted`和中是必需的`published`。类似于以下内容：

```
validates :name, :presence => true, :unless => :draft? 
```

当`draft`模型在屏幕上时，我想显示必须修复哪些损坏的验证规则，然后才能转换到`submitted`. 当模型在 中时`draft`，验证表明它是有效的（这是真的），但我仍然想像它一样显示错误`submitted`。

我真的不知道我应该如何解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:37:15.287

我为我的一个项目做了类似的事情。就我而言，我有一个可以设置为覆盖状态的虚拟属性。那么在我的“草稿”版本中呢？方法我检查虚拟属性，如果属性“do_full_validation”设置为true，那么我以允许执行验证的方式响应。

# android - 对于 Android，如何从 url 为直播的摄像机播放直播

> ID：12282515
> 
> 赞同：0
> 
> 时间：2012-09-05T13:24:26.923
> 
> 标签：android, url, video, live-streaming

我正在尝试从 URL（mjpeg、ws 和 flash）播放实时流视频，但这些链接在 Android 上无论是 VideoView 还是 MediaController 都不起作用，尽管我在我的电脑上打开了网络浏览器并复制了链接并且它们有效美好的。

以下是链接：

```
 "ws": "ws://176.34.175.163:8000/camera/s7RIqmHU/?t=180&ts=1346851352&digest=5IaMR3hKO67azIE1zt1AIogYxpM.",
    "mjpeg": "http://176.34.175.163:8000/camera/s7RIqmHU/?t=180&ts=1346851352&digest=5IaMR3hKO67azIE1zt1AIogYxpM.",
    "flash": "http://176.34.175.163:8000/camera/s7RIqmHU/?t=180&ts=1346851352&digest=5IaMR3hKO67azIE1zt1AIogYxpM." 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:41:59.947

VideoView 或 MediaController 类本身不支持您指定的格式。对于 MJPEG，请查看此[答案](https://stackoverflow.com/questions/3205191/android-and-mjpeg)。Flash/ws 通常足够复杂，以至于您可能找不到简单的现成解决方案。

# android - 安卓平板模拟器10寸320dpi不加载layout-sw720dp

> ID：12282518
> 
> 赞同：2
> 
> 时间：2012-09-05T13:24:34.257
> 
> 标签：android, dpi, android-screen-support

这可能是一个简单的问题，但我只是忽略了一些东西。我有一个具有以下规格的 Android 模拟器：

![Android 模拟器规格 10 英寸平板电脑](../Images/d86a89e28491ef5f24a673bce2455375.png)

在我的应用程序中，我提供了不同的布局：

```
 res\layout
 res\layout-sw600dp
 res\layout-sw720dp 
```

但是这个模拟器会加载常规布局。我有另一个 160dpi 的模拟器，其余规格相同。这个确实加载了 sw720dp 布局。

10寸320dpi模拟器为什么不加载sw720dp布局？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-05T15:00:13.743

来自[http://developer.android.com/guide/practices/screens_support.html](http://developer.android.com/guide/practices/screens_support.html)

```
 px = dp * (dpi / 160)
 dp = px / (dpi /160) 
```

使用 1280x800 320dpi，sw = 800，您将获得：

```
 dp = 800 / (320 / 160) = 400dp 
```

这就是它不加载 res/layout-sw720dp 或 600dp 的原因。

解决方案是制作 sw400dp 资源。

# ios - 如何避免滥用“恢复”应用内购买到不同的设备？

> ID：12282523
> 
> 赞同：1
> 
> 时间：2012-09-05T13:24:59.453
> 
> 标签：ios, in-app-purchase

我有一个带有付费升级选项的免费应用程序。如果我升级我的应用程序，然后重新安装它，然后再次升级，我会收到一条通知，说我已经用这个 Apple ID 购买了这个升级，所以我可以免费重新升级应用程序。这当然是恢复升级的一个很好的功能，但是......

是什么阻止用户使用他的 Apple ID 在不同设备上登录并选择升级选项，从而免费下载升级到所有这些设备？例如，一位用户可以在属于他朋友的几台设备上执行此操作。

帮助？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:28:59.113

没有什么能阻止他们这样做。用户可以通过相同的方式从应用商店购买应用，然后登录朋友的 iPhone 并再次下载。由于您的应用内购买也应该在该用户的其他设备上可用，因此这是正常行为。

# iphone - 在导航栏顶部显示 iAdBanner

> ID：12282525
> 
> 赞同：1
> 
> 时间：2012-09-05T13:25:07.467
> 
> 标签：iphone, iad

我想在导航栏顶部显示 iAd 横幅。

我尝试使用以下代码

```
Devanagari *viewController = [[Devanagari alloc]init];
viewController.delegate = self;

// _adView = [[ADBannerView alloc] initWithFrame:CGRectMake(0, 0, 320,40)];
  _adView.frame = CGRectOffset(_adView.frame, 0, -50);
_adView.requiredContentSizeIdentifiers = [NSSet setWithObject:ADBannerContentSizeIdentifier320x50];
_adView.currentContentSizeIdentifier = ADBannerContentSizeIdentifier320x50;
_adView.delegate=self;
self.bannerIsVisible=YES;

UINavigationController *navigationController = [[UINavigationController alloc]
                                                        initWithRootViewController:viewController];
navigationController.navigationBar.tintColor = [UIColor brownColor];
[self presentModalViewController:navigationController animated:YES];
[navigationController release]; 
```

没用。

有什么方法可以在视图顶部显示 iAdBanner 视图，然后在导航栏下方显示。

感谢帮助。

# php - php关联对象数组

> ID：12282527
> 
> 赞同：2
> 
> 时间：2012-09-05T13:25:15.460
> 
> 标签：php, class, object, associative-array

我正在尝试从以成员 id 作为键的行结果集中创建关联的对象数组，但出现了一些错误。

addATravelog() 只是 UserLogsAndSOS() 类的一个函数，我想要它的对象在数组中。

这是我尝试过的：

```
class UserArraySet {

private $arrayOfUsers = array();    

function createArrayForTravelogs($result) {
    While($row = $result->next()) {
        if(array_key_exists($row['id'], $this->arrayOfUsers)) {
            $this->arrayOfUsers[$row['id']] = new UserLogsAndSOS();
        }
    $this->arrayOfUsers[$row['id']]->addATravelog($row['title'], $row['blog']); //line     72                                           
    }
}
} 
```

在从对象调用 createArrayForTravelogs() 时出现以下错误这是我得到的错误：

```
Notice: Undefined index: 1 in C:\xampp\htdocs\site\classes\userprofile.php on line 72

Fatal error: Call to a member function addATravelog() on a non-object in C:\xampp\htdocs\site\classes\userprofile.php on line 72 
```

有人可以让我知道如何实现这一点，我想要这样的东西：

```
Array (

 [1] => objectUserLogsAndSOS1

 [5] => objectUserLogsAndSOS2
 ....
) 
```

其中 key 是 $row 中的成员 ID。我还需要检查密钥是否存在，然后调用该特定对象的函数以将数据添加到其成员，如果不存在则创建一个对象，然后调用该特定对象的函数以将数据添加到其成员。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:28:59.030

只需阅读错误消息：如果已经有条目，则仅创建 UserLogsAndSOS - 否则您在 null 上调用 addATravelog。也许你忘记了“！” 在你的 if 子句中？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:31:52.243

因为数组保持为空。

只有`UserLogsAndSOS`当`arrayOfUsers`. 与您可能想要的完全相反。

您可能缺少 a`!`来反转`array_key_exist`结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:30:53.880

```
if(!array_key_exists($row['id'], $this->arrayOfUsers)) {
   $this->arrayOfUsers[$row['id']] = new UserLogsAndSOS();
} 
```

> 你错过了“！” 我认为这是导致错误

# python - 调用 BIF map(min()) - 会发生什么？

> ID：12282533
> 
> 赞同：1
> 
> 时间：2012-09-05T13:25:33.977
> 
> 标签：python, function, min

我有两个清单：

`a,b=[1,2],[33,44]`

我想探索它们的最小值。但

```
>>> min(a,b) 
```

返回 `[1, 2]`为`min()`

> 如果有多个参数，则返回最小的参数。

如果我使用`map()`as `map(min,a,b)`

主要相当于：

```
[f(x1, x2) for x1, x2 in zip(sequence1, sequence2)] 
```

正如这个[答案](https://stackoverflow.com/questions/672172/how-to-use-python-map-and-other-functional-tools)中已经说明的那样。

```
>>> map(min,[a,b])
[1, 33] 
```

给了我想要的东西，但我真的不明白为什么。有人可以解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:32:57.950

答案在 Python[`map`文档](http://docs.python.org/library/functions.html#map)中：

> 将函数应用于可迭代的每个项目并返回结果列表。**如果传递了额外的可迭代参数，函数必须接受那么多参数并并行应用于所有可迭代的项目**。

你打电话时：

```
map(min, a, b) 
```

您实际上是将*两个*迭代传递给`map`. 这依次调用`min(1, 33)`and `min(2, 44)`，从而返回`[1, 2]`。

但是，在：

```
map(min, [a, b]) 
```

有一个可迭代的，并`map`调用`min`序列的每个元素：

*   第一次调用`min([1, 2])`产生`1`
*   然后调用`min([33, 44])`which 产生`33`

结果，正如预期的那样`[1, 33]`。

# vb.net - 尝试显示或隐藏表单时，VB.Net 2008“InvalidOperationException 未处理”

> ID：12282537
> 
> 赞同：0
> 
> 时间：2012-09-05T13:25:47.657
> 
> 标签：vb.net, invalidoperationexception

我的程序中有多个表格。菜单窗体 (frmMenu) 包含隐藏菜单窗体并显示其相应窗体的按钮，例如窗体 frmXyl。关闭窗体 frmXyl 应该隐藏它并显示窗体 frmMenu。

'窗体frmMenu按钮点击事件

```
 'Hide the form frmMenu
     Me.Hide()
    'Show the form frmXyl
     frmXyl.Show() 
```

'这是窗体frmXyl窗体关闭事件

```
 'Hide the form frmXyl
    Me.Hide()
    'Show the form frmMenu
    frmMenu.Show() 
```

我可以启动程序并单击按钮隐藏frmMenu并显示frmXyl，然后我可以关闭隐藏frmXyl并显示frmMenu的frmXyl。

现在，如果我再次单击按钮以显示 frmXyl 并隐藏 frmMenu，则会**出现**错误。

这是错误：创建表单时出错。有关详细信息，请参阅 Exception.InnerException。错误是：无法使用已与其底层 RCW 分离的 COM 对象。

我之前使用过表单的显示和隐藏没有问题，提前感谢您可能需要的任何解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:33:07.380

隐藏表单不足以防止它被丢弃。您还需要在 FormClosing 事件中设置 e.Cancel = True 以允许表单对象存活。您需要注意 e.CloseReason，当 Windows 正在关闭或用户试图退出您的程序时，您不想阻止它关闭并显示新表单。

# jquery - 在 DOM 加载之前使用 jQuery 更改元素

> ID：12282539
> 
> 赞同：0
> 
> 时间：2012-09-05T13:25:59.390
> 
> 标签：jquery, dom

我正在尝试为 Google Rich Snippets 的字体标签添加一个属性，我可以这样做没有问题，但是因为页面已加载，因此更改不在 HTML 源代码中。有谁知道在 DOM 加载之前添加属性的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:12:38.193

这使用 JS 解决方案（如 jQuery）是不可能的，因为它只操作 DOM（在部分或完全加载之后），而不是页面源本身。页面源必须在服务器端更改。

# xmpp - 使用 smack 库和开火服务器阻止聊天列表中的用户的问题

> ID：12282541
> 
> 赞同：2
> 
> 时间：2012-09-05T13:26:14.803
> 
> 标签：xmpp, privacy, smack

我想用 XMPP 从我的聊天列表中阻止某个特定的朋友。我这样做的代码：

```
public void blockUser(String userName)
{
    String listName = "newList";
    List<PrivacyItem> privacyItems = new Vector<PrivacyItem>();
    PrivacyItem item=new PrivacyItem(PrivacyItem.Type.jid.toString(), false, 1);   
    item.setValue(userName);    
    privacyItems.add(item);   

    privacyManager = PrivacyListManager.getInstanceFor(mXMPPConnection);

    try
    {
    privacyManager.createPrivacyList(listName,privacyItems);
    }
    catch(Exception e)
    {
   Log.e("PRIVACY_ERROR: "," "+e.toString());
   e.printStackTrace();
    }
} 
```

代码工作正常。没有例外，但我无法阻止用户。谁能帮我？

我得到的 Smack Logs：

```
<main><iq type="set" id="373-3717" to="nitstest1@hostname/smack"><query xmlns="jabber:iq:privacy"><list name="newList"/></query></iq>
09-04 19:00:38.368: D/SMACK(3895): 07:00:38 PM SENT (1149259528): <iq id="373-3717" type="result"></iq>
09-04 19:00:38.658: D/SMACK(3895): 07:00:38 PM RCV  (1149259528): <iq type="result" id="LvJcf-9" to="nitstest1@hostname/smack"><query xmlns="jabber:iq:privacy"><list name="newList"><item action="deny" order="1" type="jid" value="nitsquytech@hostname"/></list></query></iq></main> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-16T06:00:07.753

您需要将您创建的隐私列表设置为活动列表。

# android - 在android中设置文本背景颜色

> ID：12282544
> 
> 赞同：-1
> 
> 时间：2012-09-05T13:26:21.977
> 
> 标签：android, android-widget, android-edittext

我想设置文本背景颜色而不是整个背景`TextView`。我想在 Android 中执行此操作。那么我该怎么做呢？

**例如：** 'TEXT' 'TEXT' 的背景是彩色的。之后，背景颜色为默认值。我没有设置整个背景颜色。(android:background="") 不是这个。android:background 给 TextViews 背景颜色。我想要 Texts 背景颜色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:30:28.827

setBackgroundResource(R.color.WhateverColorYouLike);

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:35:14.893

您可以使用为任何小部件定义的属性 style="@style/your_style"。

要定义您的样式，您必须在 values 文件夹中创建一个名为 your_style.xml 的文件并使用以下语法

```
 <style name="You.EditText.Style" parent="@android:style/Widget.EditText">
     <item name="android:background">@color/textbackgroundcolor</item>  
 </style> 
```

此属性 parent="@android:style/Widget.EditText" 很重要，因为它会使您定义的样式扩展基本的 android EditText 样式，因此您只需覆盖要更改的属性

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:29:33.570

您可以`EditText`像这样设置背景颜色：

```
myEditText.setBackgroundColor(Color.blue); 
```

EditText 的宽度和高度必须是`WRAP_CONTENT`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:39:14.740

尝试在您想要的任何 TextView 中使用属性 android:textColor="BLUE_HEX_VALUE"。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-19T09:17:23.877

您可以在 xml 文件中使用 android:textColor="#xxxxxx" 来仅更改文本颜色

# python - 使用 sqlalchemy 插入行后获取主键

> ID：12282554
> 
> 赞同：18
> 
> 时间：2012-09-05T13:26:48.400
> 
> 标签：python, sqlalchemy

我正在使用 sqlalchemy 插入许多行：

```
connection = engine.connect()
topic_res = connection.execute(message_topics.insert(),[
        {
        'mt_date': time.time(),
        'mt_title': title,
        'mt_hasattach':u'0',
        'mt_starter_id':member.member_id,
        'mt_start_time': time.time(),
        'mt_last_post_time': time.time(),
        'mt_invited_members': u'a:0:{}',
        'mt_to_count': u'1',
        'mt_to_member_id':member.member_id,
        'mt_replies': u'1',
        } for member in members ])
topic_res.inserted_primary_key 
```

当我尝试插入主键时，我得到：
AttributeError：'MySQLExecutionContext_mysqldb'对象没有属性'inserted_primary_key'，但由于调试，topic_res是'ResultProxy'对象。
因此，如果我只插入一行，我可以获得 topic_res.inserted_primary_key。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-08T01:17:44.297

insert_primary_key 属性仅对单行插入有效：

[https://docs.sqlalchemy.org/en/latest/core/connections.html#sqlalchemy.engine.ResultProxy.inserted_primary_key](https://docs.sqlalchemy.org/en/latest/core/connections.html#sqlalchemy.engine.ResultProxy.inserted_primary_key)

> 这仅适用于未明确指定 Insert.returning() 的单行 insert() 构造。

这是由于数据库客户端库中普遍存在的限制，包括所有 Python DBAPI，其中一次只留下一个“最后插入的 id”属性可用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:06:09.683

也许您的 ResultsProxy 是一个列表或类似列表的对象，因此您应该遍历该对象的 elements=db-rows ：

```
for e in topic_res:
    print e.inserted_primary_key 
```

编辑：“inserted_primary_key”方法似乎只适用于单行插入。请参阅[http://docs.sqlalchemy.org/en/rel_0_6/core/connections.html#sqlalchemy.engine.base.ResultProxy.inserted_primary_key](http://docs.sqlalchemy.org/en/rel_0_6/core/connections.html#sqlalchemy.engine.base.ResultProxy.inserted_primary_key)

# c# - C# ActiveDirectory，如何将范围添加到过滤器

> ID：12282566
> 
> 赞同：3
> 
> 时间：2012-09-05T13:27:23.210
> 
> 标签：c#, active-directory

我基本上是在尝试使用 DirectorySearcher 将我的结果过滤到一系列成员，但是这个过滤器不返回任何结果。

> "(&(objectClass=user)(memberof=CN=Users,OU=myou,OU=base,OU=home,DC=gorge,DC=net)(member;range=0-1499))"

```
DirectoryEntry dEntryhighlevel = 
          new DirectoryEntry("LDAP://OU=base,OU=home,DC=gorge,DC=net");
DirectorySearcher dSeacher = 
          new DirectorySearcher(dEntryhighlevel);
dSeacher.Filter = 
        "(&(objectClass=user)
         (memberof=CN=Users,OU=myou,OU=base,OU=home,DC=gorge,DC=net)
         ("+attributeWithRange+"))";
dSeacher.PropertiesToLoad.Add(attributeWithRange);
dSeacher.PropertiesToLoad.Add("givenname");
dSeacher.PropertiesToLoad.Add("sn");
dSeacher.PropertiesToLoad.Add("samAccountName");
dSeacher.PropertiesToLoad.Add("mail");
dSeacher.PageSize = 1500;
SearchResultCollection resultCollection = resultCollection = dSeacher.FindAll(); 
```

此代码在没有范围过滤器的情况下工作得很好。这里的任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T10:28:49.580

I think your issue might be that you're trying to insert the range into the `Filter` *as well as* into the `PropertiesToLoad`. If you take a look at the first [code example on this page](http://msdn.microsoft.com/en-us/library/ms180907%28v=vs.80%29.aspx) you can see that the range is being added only to the `PropertiesToLoad` for the instance of the `DirectorySearcher` class.

# javascript - 火狐奇怪的问题

> ID：12282567
> 
> 赞同：0
> 
> 时间：2012-09-05T13:27:26.157
> 
> 标签：javascript, asp.net-mvc-3, firefox, onclick, html-table

只有在 Firefox 上我才会收到此错误：

> ID/NAME 在全局范围内引用的元素。请改用 W3C 标准 document.getElementById()。

```
if (c.checked == 1)

GFPart...vitate= (line 17)

TypeError: c is null

if (c.checked == 1) 
```

我的 Javascript 看起来像这样：

```
<script type="text/javascript">
    function SavePartners() {
        var poz = '@ViewBag.Activity';
        var rowCount = dataTable.rows.length;
        var ala0 = "";
        for (var i = 1; i < rowCount; i++) {
            var c = document.getElementById("chkpart" + i);
            if (c.checked == 1)
                ala0 += dataTable.rows[i].cells[1].innerText + "^";
            var ala = ala0.substring(0, ala0.length - 1);
        }
    $.ajax({
        url: '@Url.Action("TPartners")',
        data: { pozActivitate: poz, listapart: ala },
        dataType: "Json",
        type: "POST",
        error: function () {
            alert("Error");
        },
        success: function (data) {
            window.close();
        }
    });
} 
```

我的 HTML 看起来像这样（它的表格有 2 列，1 列带有复选框，2 列带有合作伙伴的名称）

```
 <tr>
            <td style="border-left: none;">
                @if (listaDeTest.Activity!= 0)
                {
                    string x = (from a in listaDeTest.PartenerName
                                where a == s
                                select a).FirstOrDefault();
                    if (x == null)
                    {
                    <input type="checkbox" name="chkpart @i" />
                    }
                    else
                    {
                    <input type="checkbox" name="chkpart @i"  checked="checked"/>                         
                    }
                }
                else
                {
                    <input type="checkbox" name="chkpart @i" />
                }
            </td>
            <td>
                <p style="margin-left: 5px;">@s</p>
            </td>
        </tr> 
```

....最后有一个带有 onclick 功能的按钮。任何想法可能是什么？因为在 IE 中完美运行。提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:29:06.627

Internet Explorer 和 Chrome 自动为具有“id”值的 DOM 元素创建全局变量。Firefox 没有，因为没有标准规定它应该（无论如何这是一个愚蠢的想法）。

因此，在 Internet Explorer 中，页面上有一个 HTML 标记，如下所示：

```
<div id='container'>
   ...
</div> 
```

意味着您还有一个`window`名为“容器”的全局变量（属性），其值是对 DOM 元素的引用`<div>`。在 Firefox 中，您不需要。你必须打电话

```
var container = document.getElementById('container'); 
```

获取对 DOM 元素的引用。

在您的代码中不清楚 Firefox 抱怨什么参考；我怀疑它是“dataTable”，我猜它是`<table>`. 但是你没有发布，所以我不确定。

*编辑*——哦，还有一件事：Internet Explorer 出于未知原因，从`.getElementById()`基于元素**名称**的调用中返回元素。Firefox 或其他浏览器不会复制该错误行为。您的输入元素具有“名称”属性，但没有“id”。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:44:06.933

那么这段代码有什么作用呢？

```
var c = document.getElementById("chkpart" + i); 
```

它正在寻找一个ID！现在看看你的代码，你缺少什么？

```
<input type="checkbox" name="chkpart @i" /> 
```

没有身份证！name 属性不是 id 属性。

# java - 比较 Android 中的电话号码

> ID：12282569
> 
> 赞同：11
> 
> 时间：2012-09-05T13:27:37.750
> 
> 标签：java, android, string, phone-number

我需要比较两个电话号码以确定它们是否来自同一个发件人/收件人。用户可以向联系人发送消息，并且该联系人可以回复。

回复通常采用 `+[country-code][area-code-if-any][and-then-the-actual-number]`格式。例如， `+94 71 2593276`对于斯里兰卡的电话号码。

而当用户*发送*消息时，他通常会输入格式（对于上面的示例）`0712593276`（假设他也在斯里兰卡）。

所以我需要的是，**我需要检查这两个数字是否相同。**这个应用程序将在国际上使用。所以我不能只用 0 替换前 2 位数字（那么对于像美国这样的国家来说这将是一个问题）。有没有办法在 Java 或 Android 中做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-02-03T13:10:24.737

Android 有不错的 PhoneNumberUtils，我猜您正在寻找：

```
 public static boolean compare (String a, String b) 
```

看看：http: [//developer.android.com/reference/android/telephony/PhoneNumberUtils.html](http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html)

使用它应该是这样的：

```
String phone1   
String phone2 

 if (PhoneNumberUtils.compare(phone1, phone2)) {
    //they are the same do whatever you want!
   } 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2016-08-06T23:15:55.743

`android.telephony.[PhoneNumberUtils](http://developer.android.com/reference/android/telephony/PhoneNumberUtils.html)`类提供了几乎所有必要的功能来处理电话号码和标准。

对于您的情况，解决方案是or else 。前者检查资源以确定是使用严格比较算法还是松散比较算法，因此在大多数情况下是更好的选择。`PhoneNumberUtils.[compare(Context context, String number1, String number2)](https://developer.android.com/reference/android/telephony/PhoneNumberUtils.html#compare(android.content.Context,%20java.lang.String,%20java.lang.String))``PhoneNumberUtils.[compare(String number1, String number2)](https://developer.android.com/reference/android/telephony/PhoneNumberUtils.html#compare(java.lang.String,%20java.lang.String))`

```
PhoneNumberUtils.compare("0712593276", "+94712593276") // always true
PhoneNumberUtils.compare("0712593276", "+44712593276") // always true

// true or false depends on the context
PhoneNumberUtils.compare(context, "0712593276", "+94712593276") 
```

看看官方[文档](https://developer.android.com/reference/android/telephony/PhoneNumberUtils.html)。和[源代码](https://android.googlesource.com/platform/frameworks/base/+/master/telephony/java/android/telephony/PhoneNumberUtils.java)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-05T14:37:20.130

如何检查号码是否是接收方号码的子字符串？

例如，假设我的巴西号码是 888-777-666，而你的号码是 111-222-333。要从这里给您打电话，我需要拨打其他号码才能拨打国际电话。假设我需要添加 9999 + your_number，得到 9999111222333。

如果`RawNumber.substring(your_number)`返回`true`，我可以说我在给你打电话。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2016-06-25T21:38:13.143

只需应用您的逻辑删除 () 和 - 并按照 PhoneNumberUtils

# vim - 从 Vim 保存选定的文本（部分行）

> ID：12282573
> 
> 赞同：9
> 
> 时间：2012-09-05T13:27:49.983
> 
> 标签：vim, save, selection

我尝试从 Vim 中保存一些选定的文本（一行的一部分）。这是行：

> 此测试字符串 - **SELECTED_TARGET_WORLD**

其中粗体表示选择文本。我这样做：

```
:'<,'> w! test/selected_text 
```

但在文件中`selected_text`我找到了字符串：

```
THIS TEST STRING - SELECTED_TARGET_WORLD 
```

如何让它只保存行的选定部分？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:32:40.090

`:[range]w filename`仅适用于线条，所以……您必须将所选文本放在自己的行上。

另一种使用`:help :redir`：

```
:'<,'>"ay
:redir filename
:echo @a
:redir END 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-08-16T14:57:42.813

我就是这样做的，FYR~

通过“可视模式”选择部分内容后，按 Ctrl-C 触发它

```
vmap <C-c> y:new ~/.vimbuf<CR>VGp:x<CR> 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-09-05T13:34:46.343

这种情况没有记录在帮助 ( `:h :w`) 中，但`:w`只处理行范围（您会在多行的示例中看到这一点）。

要执行您想要的操作，您必须首先将您的选择粘贴到临时缓冲区（或在其自己的行上，然后将其放回原位），然后保存该缓冲区。如果这是您经常要做的事情，那可以很容易地自动化。

# c - 您从哪里获得 inode 功能？

> ID：12282575
> 
> 赞同：4
> 
> 时间：2012-09-05T13:28:00.067
> 
> 标签：c, linux, linux-kernel, ioctl, inode

我有一些 linux 驱动程序正在尝试从 linux 2.4 移植到 3.0。在这段漫长的时间里，ioctl 的参数列表（现在为 unlocked_ioctl）发生了一些变化：

```
-static int can_ioctl(struct inode *inode, struct file *file, unsigned int cmd, unsigned long arg)
+static long can_ioctl(struct file *file, unsigned int cmd, unsigned long arg) 
```

该代码使用 inode 获取次要版本并将其传递给其他一些命令。现在 inode 不是 ioctl 参数列表中给出的“free-be”，我怎样才能得到它？

是否可以从文件指针派生？或者当它出现在 _open() 方法中时，我应该“保存”一个指向它的全局指针吗？如果有更好的方法，我宁愿避免这种情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:47:33.773

您可以从内核空间中的 struct file * file 获取 inode。这是简短的结构图

文件->f_path.d.dentry->d_inode；你可以找到下面的定义。

dcache.h 中的 dentry 结构

```
struct dentry {
    atomic_t d_count;
    unsigned int d_flags;       /* protected by d_lock */
    spinlock_t d_lock;      /* per dentry lock */
    int d_mounted;
    struct inode *d_inode;      /* Where the name belongs to - NULL is
                                 * negative */
    /*
     * The next three fields are touched by __d_lookup.  Place them here
     * so they all fit in a cache line.
     */
    struct hlist_node d_hash;   /* lookup hash list */ 
```

对于 fs.h 中的文件结构

```
 file {
           /*  
            * fu_list becomes invalid after file_free is called and queued via
            * fu_rcuhead for RCU freeing
            */
           ...
           struct path             f_path;
           #define f_dentry        f_path.dentry
           #define f_vfsmnt        f_path.mnt
           const struct file_operations    *f_op;
           spinlock_t              f_lock;  /* f_ep_links, f_flags, no IRQ */
           #ifdef CONFIG_SMP 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T13:40:59.043

哎呀，只是通过查看内核并查看其他驱动程序来解决这个问题（不知道为什么我之前没有想到这样做）。如果其他人有兴趣，您可以从传递给 ioctl 的文件指针中获取 inode，如下所示：

```
long can_ioctl(struct file *file, unsigned int cmd, unsigned long arg)
{
    struct inode *inode = file->f_path.dentry->d_inode; 
```

如果有人知道为什么这是一个坏主意（我只是从另一个司机那里得到的），或者如果有更好/首选的方式让我知道。

# php - 使用 MySQL 查询

> ID：12282579
> 
> 赞同：-4
> 
> 时间：2012-09-05T13:28:05.847
> 
> 标签：php, mysql

我正在尝试使用查询来更新数据库中的一行数据。这是我的代码：

```
$query= "UPDATE users SET intro= '".$intro."', profile_pic= '".$profile_pic."' WHERE   
user_id= '".$_SESSION['id']."'";
mysqli_query= ($connect, $query); 
```

但我在 mysqli_query 行上不断收到错误消息：

```
Parse error: syntax error, unexpected '=' 
```

我可能做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:29:11.663

```
mysqli_query= ($connect, $query); 
```

变成

```
mysqli_query($connect, $query); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:30:37.250

你应该有

```
mysqli_query($connect, $query); 
```

不是

```
mysqli_query= ($connect, $query); 
```

# sql-server - 如何使用 MS Server Management Studio 和 ODBC 连接到 MS SQL 数据库

> ID：12282580
> 
> 赞同：0
> 
> 时间：2012-09-05T13:28:06.200
> 
> 标签：sql-server, sql-server-2008

我需要使用 MS Management Studio 连接到 MS SQL Server，托管公司只为我提供了该数据库的 ODBC 连接，但我可以看到它只使用服务器上的 VPN 进行连接。

我的问题： - 我可以通过 ODBC 使用 MS MS Management Studio 连接到数据库吗？

我通常使用 SQL Server 身份验证或 Windows 身份验证。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:14:54.857

我不相信你可以直接连接到 SSMS 中的 odbc 连接，虽然你可以连接到 SQL 服务器，并将链接服务器添加到 odbc 连接。您将打开服务器对象 -> 链接服务器 -> 添加

从提供程序列表中选择 Microsoft OLE DB Provider for ODBC Drivers

我认为详细信息会有所不同，具体取决于这是系统 DSN 还是文件 DSN，但这里是 msdn。[http://msdn.microsoft.com/en-us/library/windows/desktop/ms675326(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms675326(v=vs.85).aspx)

然后，您可以通过针对您的 sql 服务器打开一个新查询并使用完整的四部分名称来查询数据源，即

SELECT * FROM ServerName.DatabaseName.SchemaName.TableName

另一种选择是使用 VS 2012 向 ODBC 数据源添加数据连接。这将是最干净的，尽管它不能直接解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:29:54.153

可能。ODBC 连接将包含您需要的所有信息 - 服务器地址或 IP 地址、用户名和密码。

但是您的主机上可能有防火墙阻止此类连接。

尝试一下。

# django - 过滤由非数据库操作设置的 django 查询

> ID：12282581
> 
> 赞同：0
> 
> 时间：2012-09-05T13:28:07.063
> 
> 标签：django, review-board

使用 ReviewBoard 1.6.11，它使用 Django 1.3.3。有一个 RepositoryManager 类，它有一个名为“可访问”的方法，定义如下：

```
class RepositoryManager(Manager):
    def accessible(self, user, visible_only=True, local_site=None):
        """Returns repositories that are accessible by the given user."""
        if user.is_superuser:
            qs = self.all()
        else:
            q = Q(public=True)

            if visible_only:
                q = q & Q(visible=True)

            if user.is_authenticated():
                q = q | (Q(users__pk=user.pk) |
                         Q(review_groups__users=user.pk))

            qs = self.filter(q).distinct()

        return qs.filter(local_site=local_site) 
```

问题是我想用其他不与数据库交互的东西（用户的文件系统权限）过滤这个查询的结果。不过，accessible() 需要返回一个 QuerySet。否则，我只会创建一个列表并用结果中的适当项目填充它。

我对 Django 很陌生。这是一个合理的做法，还是我做错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T20:24:29.223

我可以通过像这样创建一个 QuerySet 子类来解决这个问题：

```
class RepositoryQuerySet(QuerySet):
    def __init__(self, *args, **kwargs):
        super(RepositoryQuerySet, self).__init__(*args, **kwargs)
        self._user_filter = None

    def _clone(self, *args, **kwargs):
        retval = super(RepositoryQuerySet, self)._clone(*args, **kwargs)
        retval._user_filter = self._user_filter
        return retval

    def filter_by_user_access(self, user):
        self._user_filter = user.username

    def iterator(self):
        for repo in super(RepositoryQuerySet, self).iterator():
            if self._user_filter is None:
                yield repo
                continue
            # ...logic for restricting access by user...
            # If user has access, just yield repo.  If not, just 'continue' 
```

然后在 RepositoryManager.accessible 中，在调用 distinct() 之后，调用：

```
 qs.filter_by_user_access(user) 
```

最后，为了让管理器使用新的查询集类，创建：

```
 def get_query_set(self):
        return RepositoryQuerySet(self.model, using=self.db) 
```

在 RepositoryManager 类中。

# c# - 如何将此 T-SQL 语句转换为 linq

> ID：12282582
> 
> 赞同：1
> 
> 时间：2012-09-05T13:28:14.350
> 
> 标签：c#, linq, entity-framework

我是 linq 的初学者，我写了这个 T-SQL 查询

```
select * from DOCUMENT_TYPES where document_id in(
select document_id from Clearance_Document where Clearance_id=(select clearance_id from clearance_id from request where request_id=3)) 
```

我想将此 T-SQL 查询转换为 linq，请帮助我，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:35:09.140

好吧，我将首先将您的 SQL 重构为嵌套子查询链以外的其他内容。我认为这应该做同样的事情，而且更具可读性：

```
SELECT
    *
FROM
    DOCUMENT_TYPES dt
JOIN
    Clearance_Document cd
    ON
    dt.document_id = cd.document_id
JOIN
    Request r
    ON
    cd.clearance_id = r.clearance_id
WHERE 
    r.request_id = 3 
```

（我假设这`from clearance_id from request`是一个错字。）

然后您可以轻松地重构为 LINQ 语句：

```
var result = from dt in DOCUMENT_TYPES
             join cd in Clearance_Document on dt.document_id equals cd.document_id
             join r in Request on cd.clearance_id equals r.clearance_id
             where r.request_id = 3
             select new {
                property1 = dt.something,
                property2 = cd.somethingElse,
                ...
             }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:33:13.853

```
var result = 

from  a in DOCUMENT_TYPES 
let list = 
(
from b in Clearance_Document 
where b.Clearance_id ==  (from c in clearance_id where  request_id == 3).First<string>())
select b
).ToList()

where list.Contains(a.document_id) 

select a; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T13:34:16.800

应该这样做（我猜您正在使用 EF，但您可以轻松适应其他 LinQ 类型）：

```
context.Document_Types.Where(doc => 
  conext.Clearance_Document.Where(cd => 
    cd.Clearance_Id == context.Request.Single(r => r.Request_Id == 3)
  ).Contains(doc.Document_Id)
).ToList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T13:43:20.803

怎么样

```
var result = c.Id context.Request.Single(r => r.Id == 3)
                .Clearances.SelectMany(c => x.DocumentTypes); 
```

实际上，得到一个且只有`Request`一个`Id`等于`3`，然后得到所有它`DocumentTypes`的所有`Clearances`。

如果您的数据库设置了适当的外键，这些关系将作为模型的一部分自动生成。

# android - 应用内结算到期

> ID：12282583
> 
> 赞同：4
> 
> 时间：2012-09-05T13:28:18.837
> 
> 标签：android, ios, in-app-purchase, in-app-billing

**应用内计费/应用内购买**

我正在开发适用于 Android 和 iOS 的应用程序。

我注意到两者都有**应用内计费**服务。

我担心人们可以在应用内购买的*额外内容的到期日期。*

我知道您可以按月和按年收取额外费用，但假设我希望用户购买额外费用并且到期日期为 1 天。可能吗？

哪些是允许的到期日期？

另一个问题（还没有深入研究）是关于 iOS **In-App-Purchase**的，它像 Android 的吗？主要区别是什么（如果有的话）？

还有一个问题，谷歌和苹果对额外费用是否收取任何费用？ **编辑：**我发现他们俩都存在 30% 的费用，嗯...

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-23T17:06:54.523

你有很多问题，我会尽力回答所有问题。

设置 1 天到期日期的方法是在您端管理用户权利。这意味着您几乎可以做任何您想做的事情，您只需使用 Google/Apple 进行计费。在 Google - 您应该寻找“非托管”产品。在 Apple 中，“消耗品”会给你最大的灵活性。走这条路稍微复杂一些，因为您需要设置一种方法来跟踪用户购买的内容以及购买的时间。

Apple 和 Android 应用内购买之间存在一些差异。一般来说，谷歌更灵活一点，苹果给你更好的工具。Android 中的非托管产品与 Apple 中的消耗品相同，托管产品相当于非消耗品。

关于费用 - 确实是他们的 30%。唯一可以避免费用的情况是，如果您在其他地方（在线或离线）出售代金券并且用户将代金券代码带到应用程序中。只要应用程序不将用户（即链接）引向销售优惠券的网站，情况就是如此。

# c# - FolderBrowserDialog SelectedPath 与重分析点

> ID：12282585
> 
> 赞同：6
> 
> 时间：2012-09-05T13:28:22.313
> 
> 标签：c#, .net, winforms, .net-4.0

当我选择的文件夹位于远程服务器上并且是符号链接（或任何类型的重解析点）时，我遇到了 FolderBrowserDialog 的 SelectedPath 属性问题。

如果我选择一个普通文件夹，那么我会返回完整的路径，例如“\SERVER\folder\subfolder\thing_I_clicked_on”。

但是，如果该文件夹是一个重解析点，我只会得到“\SERVER\thing_I_clicked_on”（所以它缺少完整路径）

```
var dialog = new FolderBrowserDialog();
dialog.ShowDialog();
MessageBox.Show(dialog.SelectedPath); 
```

有人遇到过这个或有什么建议吗？它似乎与权限无关，好像我知道完整路径我可以很高兴地浏览它，等等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T10:34:15.510

所以，我一直在调查这个问题，并认为我有一个答案。

首先，对我所看到的内容进行一些解释！

在服务器 A 上，有一个共享包含指向服务器 B 上共享的符号链接：

```
\\serverA\Path\To\Folder 
```

目标是

```
\\serverB\Folder 
```

实际发生的是，从 is 返回的值`FolderBrowserDialog.SelectedPath`，`\\serverB\Folder`我错误地认为它缺少部分路径，因为字符串 serverA 和 serverB 非常相似！很抱歉误导了大家。

[我在这个MSDN 示例](http://support.microsoft.com/default.aspx?scid=kb;%5BLN%5D;306285)之后创建了自己的包装器，并注意到 Shell32.dll 函数`SHGetPathFromIDList`正在返回重新解析点的目标，尽管文档说

> 如果 pidl 参数指定了快捷方式，则 pszPath 将包含快捷方式的路径，而不是快捷方式的目标

我确实注意到之前的路径是正确的，所以在状态改变时的回调方法中，我捕获了未翻译的选定路径

```
private int FolderBrowserCallback(IntPtr hwnd, int msg, IntPtr lParam, IntPtr lpData)
        {
            switch (msg)
            {
                 case BrowseForFolderMessages.BffmSelchanged:
                     if (haveValidPath && !String.IsNullOrEmpty(displayedPath))
                                {
                                    if (IntPtr.Zero != _hwndEdit)
                                    {
                                        SelectedFullPath = displayedPath;
                                    }
        } 
```

所以`SelectedFullPath`Property contains`\\serverA\Path\To\Folder`和`SelectedPath`property contains `\\ServerB\Folder`，这让我有很多工作要做。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-03T22:46:02.523

安迪的回答看起来会起作用，只是缺少细节，我不知道在哪里将他的代码片段添加到 MSDN 示例代码中。我可以让“MSDN 示例”代码工作，只是不知道在哪里溜进去安迪的东西。

所以......对于像我这样不知道如何处理上面的代码的人，（我真的希望我知道我在做什么；）这是一种蹩脚的解决方案。

使用 filedialog 类代替 browsefor 文件夹并设置；

*   DereferenceLinks 属性 = false
*   CheckFileExists = 假
*   文件名 = 伪造的默认文件名。（让用户知道文件名是什么并不重要，因为他们只是选择一个文件夹。）
*   使用 OpenFileDialog 或 SaveFileDialog。

请注意，完成此操作后，如果用户单击旧式 Windows 快捷方式 (*.lnk)，则它（快捷方式）将作为文件名返回，因此您必须考虑这一点。

希望这会有所帮助；）（我将努力获得一些“声誉”，以便我可以评论安迪的帖子以获取他的答案的详细信息，因为它看起来非常好。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-17T06:09:22.643

[如何以编程方式访问 Windows 符号](https://stackoverflow.com/questions/221417/how-do-i-programmatically-access-the-target-path-of-a-windows-symbolic-link)链接的目标路径必须在此处。您确定您需要完全路径，而不是重新解析点的路径吗？我认为您可以改用此路径。“请注意，Windows 不支持连接到远程共享上的目录。” [证明](http://technet.microsoft.com/en-us/sysinternals/bb896768.aspx)

# android - 如何从联系人列表中仅获取 +7927xxxxxxx 手机号码？

> ID：12282590
> 
> 赞同：0
> 
> 时间：2012-09-05T13:28:51.533
> 
> 标签：android, contacts, android-contacts

我有一个必须显示我的电话联系人列表的应用程序。但是我怎样才能只得到 +7927xxxxxxx 手机号码呢？

```
private void createListView(View fragmentView) {
    contactList = (ListView) fragmentView.findViewById(R.id.list_contacts);
    contactsAdapter = getContactAdapter(contactList);

    contactList.setAdapter(contactsAdapter);        
    contactList.setOnItemClickListener(new OnContactClickListener());
} 
```

# c# - 在 C# 中获取图表区域边界

> ID：12282595
> 
> 赞同：1
> 
> 时间：2012-09-05T13:29:01.463
> 
> 标签：c#, charts

为了解释我在做什么，我在图表上绘制了两个选择器，不会被选中的部分应该出现在那个蓝色矩形下方。将被选中的部分将出现在两个选择器之间的白色区域中。下图仅显示了左侧选择器。

现在，我要做的是在图表内绘制一个矩形，该矩形始终保留在绘图区域内，即使调整窗口大小也是如此。

要获得顶部、左侧和底部边界，绘制如下图所示的矩形，我执行以下操作：

```
(...)
int top = (int)(Chart.Height * 0.07);
int bottom = (int)(Chart.Height - 1.83 * top);
int left = (int)(0.083 * Chart.Width);
Brush b = new SolidBrush(Color.FromArgb(128, Color.Blue));
e.Graphics.FillRectangle(b, left, top, marker1.X - left, bottom - top);
(...) 
```

但这远非完美，当窗口调整大小时，它并没有绘制在正确的位置。我希望蓝色矩形始终被绘图区域网格绑定在顶部、左侧和底部。那可能吗？

![图表](../Images/5c0bc633b4364f7ae976d583f8e14102.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:53:00.967

你可能想用它`StripLine`来实现这一点。查看[带状线类文档](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.stripline.aspx)。此外，我建议下载[图表样本](http://archive.msdn.microsoft.com/mschart)，这对理解各种功能有很大帮助。

```
StripLine stripLine = new StripLine();    
stripLine.Interval = 0;       // Set Strip lines interval to 0 for non periodic stuff
stripLine.StripWidth = 10;    // the width of the highlighted area
stripline.IntervalOffset = 2; // the starting X coord of the highlighted area
// pick you color etc ... before adding the stripline to the axis
chart.ChartAreas["Default"].AxisX.StripLines.Add( stripLine ); 
```

这假设您想要的东西不是`Cursor`已经做过的（参见[CursorX](http://msdn.microsoft.com/en-us/library/system.windows.forms.datavisualization.charting.chartarea.cursorx)），例如让用户标记提供一些持久性的绘图区域。将 Cursor 事件与上面的带状线结合起来将是一个很好的方法。

所以要突出光标的开始和结束，你可以这样做

```
// this would most likely be done through the designer
chartArea1.AxisX.ScaleView.Zoomable = false;
chartArea1.CursorX.IsUserEnabled = true;
chartArea1.CursorX.IsUserSelectionEnabled = true;
this.chart1.SelectionRangeChanged += new System.EventHandler<System.Windows.Forms.DataVisualization.Charting.CursorEventArgs>(this.chart1_SelectionRangeChanged);
...

private void chart1_SelectionRangeChanged(object sender, CursorEventArgs e)
    {
        chart1.ChartAreas[0].AxisX.StripLines.Clear();

        StripLine stripLine1 = new StripLine();
        stripLine1.Interval = 0;
        stripLine1.StripWidth = chart1.ChartAreas[0].CursorX.SelectionStart - chart1.ChartAreas[0].AxisX.Minimum;
        stripLine1.IntervalOffset = chart1.ChartAreas[0].AxisX.Minimum;
        // pick you color etc ... before adding the stripline to the axis
        stripLine1.BackColor = Color.Blue;
        chart1.ChartAreas[0].AxisX.StripLines.Add(stripLine1);

        StripLine stripLine2 = new StripLine();
        stripLine2.Interval = 0;
        stripLine2.StripWidth = chart1.ChartAreas[0].AxisX.Maximum - chart1.ChartAreas[0].CursorX.SelectionEnd;
        stripLine2.IntervalOffset = chart1.ChartAreas[0].CursorX.SelectionEnd;
        // pick you color etc ... before adding the stripline to the axis
        stripLine2.BackColor = Color.Blue;
        chart1.ChartAreas[0].AxisX.StripLines.Add(stripLine2);
    } 
```

不知何故，我怀疑您可能还没有发现光标，这样做会使这一切变得无关紧要。但无论如何，上面的代码将按照您的描述进行。

# bash - 从字符串中提取数字

> ID：12282601
> 
> 赞同：0
> 
> 时间：2012-09-05T13:29:10.160
> 
> 标签：bash, sed

我有一个文件，每行包含一个字符串

```
string1.string2:\string3{string4}{number} 
```

我要提取的是数字。我已经搜索并尝试了一段时间使用 sed 或 bash 完成此操作，但失败了。任何帮助将非常感激。

编辑 1：字符串可能包含数字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:31:41.327

```
$ echo 'string1.string2:\string3{string4}{number}' |\
  cut -d'{' -f3 | cut -d'}' -f 1
number 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T13:40:10.773

使用 sed：

```
sed 's/[^}]*}{\([0-9]*\)}/\1/' input_file 
```

描述：

```
[^}]*}      : match anything that is not } and the following }
{\([0-9]*\)}: capture the following digits within {...}
/\1/        : substitute all with the captured number 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:32:31.640

使用`grep`：

```
grep -o '\{[0-9]\+\}' | tr -d '[{}]' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:40:07.277

在 bash 中：

```
sRE='[[:alnum:]]+'
nRE='[[:digit:]]+'
[[ $str =~ $sRE\.$sRE:\\$sRE\{$sRE\}\{($nRE)\} ]] && number=${BASH_REMATCH[1]} 
```

如果您的文本文件足够统一，您可以删除正则表达式的第一部分：

```
[[ $str =~ \\$sRE{$sRE}{($nRE)} ]] && number=${BASH_REMATCH[1]} 
```

甚至

```
[[ $str =~ {$sRE}{($nRE)} ]] && number=${BASH_REMATCH[1]} 
```

# c++ - 什么 VS2010 C 项目设置导致 exe 需要兼容模式

> ID：12282604
> 
> 赞同：6
> 
> 时间：2012-09-05T13:29:16.353
> 
> 标签：c++, visual-studio-2010, compatibility, projects

我已经在我的 Windows 7 64 位机器上运行和编译程序几个月了，但最近我不得不更改它使用的静态库的几个 VC 项目设置，现在生成的可执行文件需要我运行它在“Windows XP 兼容模式”中。

*   在装有 Visual Studio 2010 SP1 的 Windows7 64 位机器上编译
*   我正在生成的程序是在 Win32 调试模式下构建的。
*   静态库项目指定目标机器 /X86。
*   当我从调试器运行程序时，它会启动并运行，但是如果通过 windows 图标运行，它需要 XP 兼容模式。
    *   当尝试在调试器之外启动时，EXE 会在任务管理器中显示一秒钟然后消失。
*   我试过在上面使用 Microsoft Application Verifier，但是我不知道要在输出中查找什么。

我一直无法找到有关如何解决此问题的任何详细信息，因此，如果有人有任何方法找到可能导致此最近的兼容模式要求的原因，我很想听听它是如何解决的。

我有我链接的大多数静态库的源/项目/解决方案，以及生成的 exe 文件，但是我只有 .lib、.dll 和 .h 文件的一些外部依赖项。这意味着如果需要，我可以更改（大部分）依赖项的项目设置，但我需要知道要查找哪些设置。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T20:17:37.420

老实说，即使是5个项目，也不要害怕制作另一个项目并复制代码文件。你需要把问题减半。如果它适用于新项目，那么它是项目文件，如果不是，它是代码。制作项目真的没有那么难，尽管我确信这会引起很多恐慌和人们避免的事情。如果是项目，您可以比较文件并查看消除过程中发生的情况。如果您真的担心，请将整个解决方案复制到另一个文件夹；总是做备份。

问题是，除非运气好，否则您可能无法向我们提供足够的信息来获得有意义的答案，而所有答案都将是在黑暗中拍摄的。

**所以我打算把这个问题当作“发生这种情况，我能做些什么”。上面的策略会让你摆脱它，如果这曾经奏效的话。**这项练习将武装你的未来，从长远来看会更有成效。如果您需要查看一件事，请查看 UAC 和清单文件，也就是 Vista+ 的不同之处会极大地改变加载和运行行为（[链接器命令](http://msdn.microsoft.com/en-us/library/bb384691%28v=vs.100%29.aspx)、[Vista 迁移指南](http://msdn.microsoft.com/en-us/library/windows/desktop/bb756929.aspx)），但请尝试上述过程。

## ----

其他通用的尝试：

1）另一台机器

2）另一个安装VS

3) 一个带有一个窗口的简单项目，它无法证明您的工具链和环境中的所有其他内容都可以。

4) 沿着代码路径种植带有不同消息的消息框，这样你就知道它在哪里出错了。

5）在调试器之外发布和运行pdb。如果出现问题，请尝试调试并查看是否仍然出现问题，但您会看到在哪里。

6）假设您的代码不稳定，并且您在过去可以工作时很幸运。（这个不好玩）。由于内存布局不同，很多时候事情在调试中而不是在发布中起作用。如果您的程序很大，您可以找到创造性的方法来使用#if 的任何内容来限制代码运行，同时让整个事情仍然加载。您可以找到导致不良行为的代码。

7）关闭UAC和错误报告，如果它打开，看看是否有变化。

8）在Visual Studio中找到“运行而不调试”菜单按钮，所以你不必带着图标去运行它。这是一场等待发生的事故，并消除了另一个环境差异。它看起来像带有调试按钮的运行，但它是空心的，是一个纯绿色的三角形。它在调试菜单集下。我的意见是，默认情况下没有在栏上显示它弊大于利，因为它使许多人感到困惑，认为使用 VS 启动意味着始终使用调试器。

等等....

# batman.js - 单元测试 batman.js 应用

> ID：12282607
> 
> 赞同：1
> 
> 时间：2012-09-05T13:29:32.253
> 
> 标签：batman.js

您对如何对 batman.js 应用程序进行单元测试有什么建议吗？我在文档中找不到任何提示。您使用哪些测试工具？任何样品将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-19T06:03:11.980

蝙蝠侠的新网站有[一个 Batman.TestCase 页面](http://batmanjs.org/docs/testing.html)，它是一个类似于 Ruby`Test::Unit`的 QUnit 和 Sinon.js 包装器。

但是，为了我自己的使用，我使用 Jasmine & Karma，在[这篇博文之后设置](http://danott.co/posts/rails-javascript-testing-using-karma.html)

# xml - 使用 XSLT 预处理 XML 中的#ifdefs

> ID：12282611
> 
> 赞同：2
> 
> 时间：2012-09-05T13:29:47.070
> 
> 标签：xml, xslt, preprocessor

[这大概是使用 XSLT 作为 XML 预处理器](https://stackoverflow.com/questions/7203626/using-xslt-as-an-xml-pre-processor)的几乎复本但是由于该问题的 OP 没有发布完整的示例，尽管被要求，回复对任何不熟悉 XSLT 的人都没有用。广泛的网络搜索也没有发现任何有用的东西——XSLT 似乎记录得非常少，并且在网络上很少讨论。

反正 ...

我有一个 XML 文件，比如 foo.xml，如下（显然，大大简化了）：

```
 <?xml version="1.0" encoding="UTF-8"?>

 <main>

  <fee>blah</fee>

  <ifdef select="OLD_VERSION">
   <fi>blah blah</fi>
  </ifdef>

  </main> 
```

（根据 Ian Roberts 的回答，C 风格的 #ifdef 更改为“ifdef”块）

我想在linux上运行一个xsltproc命令，如下：

```
xsltproc --stringparam xmlver NEW_VERSION --nonet foo.xslt foo.xml 
```

并使用以下 XSLT 文件 foo.xslt 排除 #ifdef'ed 部分：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

 <xsl:output method="xml" />
 <xsl:param name="xmlver" required="yes"/>

 <xsl:template match="node() | @*">
  <xsl:copy><xsl:apply-templates select="node() | @*"/></xsl:copy>
 </xsl:template>

 <xsl:variable name="defines" select="document($xmlver)/defines"/>

 <xsl:template match="ifdef">

  <xsl:variable name="this" select="."/>

  <xsl:for-each select="$defines[def = $this/@select]">
   <xsl:apply-templates select="$this/node()" />
  </xsl:for-each>

 </xsl:template>

</xsl:stylesheet> 
```

（我确实使用对上面提到的问题的答复来构建这个 XSLT；但缺少的成分是在哪里/如何合并“xmlver”值。当然不能保证它在上面是正确的；但这基本上是我我在问 - 所有这些是如何以一种有效的方式组合在一起的？）

任何建设性的答复将不胜感激，并且无疑会对将来有类似要求的许多人有用；但请不要烦人，教条“你为什么要这样做？” 回复！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:53:20.007

您提到的问题看起来像是基于使用 XML 元素作为其 ifdef 的 XML 结构。在您的情况下，您的`#ifdef`行不是 XML 元素，因此您无法将它们与 XSLT 模板匹配。如果您需要对其进行其他可识别 XML 的处理，最好使用非 XML 工具（甚至可能是普通的 C 预处理器）来处理 ifdef 并将生成的 XML 提供给 XSLT。

如果您乐于为 ifdef 使用真正的 XML 元素，如上一个问题所示：

```
<?xml version="1.0" encoding="UTF-8"?>
<main>
  <fee>blah</fee>

  <ifdef select="OLD_VERSION">
   <fi>blah blah</fi>
  </ifdef>

</main> 
```

那么问题就变成了如何将 xmlver 命令行参数视为`ifdef`您要包含的单个参数，而不是作为从中加载一整套定义的文件的位置（这是上一个问题的工作方式）。这要简单得多：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

 <xsl:output method="xml" />
 <xsl:param name="xmlver" />

 <xsl:template match="node() | @*">
  <xsl:copy><xsl:apply-templates select="node() | @*"/></xsl:copy>
 </xsl:template>

 <xsl:template match="ifdef">
 <!-- for the ifdef we want, include all its child elements, text nodes etc
      but not its attributes, for other ifdefs do nothing -->    
  <xsl:if test="@select = $xmlver">
   <xsl:apply-templates select="node()" />
  </xsl:if>
 </xsl:template>

</xsl:stylesheet> 
```

我之前的尝试使用了 a `<xsl:template match="ifdef[@select=$xmlver]">`，它适用于某些处理器，但不适用于 xsltproc（从[技术上讲，XSLT 规范不允许这样做](https://bugzilla.gnome.org/show_bug.cgi?id=303289)，而且 xsltproc 比我通常的测试工具 Xalan 更严格）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:09:46.607

建议：代替 xsltproc，你可以只使用[m4](http://www.gnu.org/software/m4/)吗？

```
<?xml version="1.0" encoding="UTF-8"?>

 <main>

  <fee>blah</fee>

ifdef(`X',`
   <fi>blah blah</fi>
')

</main> 
```

.

```
$ m4 jeter.xml
<?xml version="1.0" encoding="UTF-8"?>

 <main>

  <fee>blah</fee>

</main> 
```

.

```
$ m4 -DX jeter.xml
<?xml version="1.0" encoding="UTF-8"?>

 <main>

  <fee>blah</fee>

   <fi>blah blah</fi>

</main> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T16:25:24.697

我想从你的一般方法开始：

> 这些回复对不熟悉 XSLT 的任何人都没有用。广泛的网络搜索也没有发现任何有用的东西——XSLT 似乎记录得非常少，并且在网络上很少讨论。

这基本上告诉我们您正在尝试使用您不熟悉的语言编写程序，并且您正在尝试通过谷歌搜索来查找有关该语言的信息。这是一个好的学习策略吗？

我会认为您的问题是点击次数过多而不是过少，例如“XSLT 教程”提供了 2,300,000 次点击。顶级的都值得一读。将其描述为“记录不充分且很少讨论”似乎很奇怪。

就个人而言，如果我要开始使用一种新语言进行编程，我总是从阅读有关该主题的书开始。在线材料很少像教科书那样经过精心设计、编写和审查。当然我会这么说，因为我是最流行的 XSLT 参考书之一的作者，但我认为这是真的。

现在，我能帮你解决你的问题吗？不是真的，我很遗憾。有些人使用经过测试的有效代码来回答这个论坛上的问题，您可以在不理解的情况下使用这些代码。我没有：我只是将人们指向正确的方向；我不会用你不懂的语言给你代码片段。在这种情况下，为您指明正确的方向意味着告诉您在尝试使用该语言之前先学习它。

# c# - 鼠标悬停菜单，类似于 Visual Studio 中的工具栏

> ID：12282620
> 
> 赞同：1
> 
> 时间：2012-09-05T13:30:16.417
> 
> 标签：c#, wpf

我试图找出是否有可能实现一个弹出的面板，其中包含鼠标悬停在“扩展器”位上的数据网格。

寻找与 Visual Studio 中的工具箱类似的东西。

我在搜索时遇到了重大问题，因为我不确定它叫什么。

如果我需要更好地解释自己，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:00:45.333

您可以使用[AvalonDock](http://avalondock.codeplex.com/)来实现这一点

![在此处输入图像描述](../Images/bf834236ee2d46085ded1517cd3d3459.png)

这是在 XAML 中使用以下代码完成的：

```
<avalondock:DockingManager x:Name="dockingManager">
    <avalondock:LayoutRoot>
        <avalondock:LayoutRoot.LeftSide>
            <avalondock:LayoutAnchorSide>
                <avalondock:LayoutAnchorGroup>
                    <avalondock:LayoutAnchorable Title="Autohidden Content">
                        <DataGrid>
                            <DataGrid.Columns>
                                <DataGridTextColumn Binding="{x:Null}" ClipboardContentBinding="{x:Null}" Header="Col1"/>
                                <DataGridTextColumn Binding="{x:Null}" ClipboardContentBinding="{x:Null}" Header="Col2"/>
                                <DataGridTextColumn Binding="{x:Null}" ClipboardContentBinding="{x:Null}" Header="Col3"/>
                            </DataGrid.Columns>
                        </DataGrid>
                    </avalondock:LayoutAnchorable>
                </avalondock:LayoutAnchorGroup>
            </avalondock:LayoutAnchorSide>
        </avalondock:LayoutRoot.LeftSide>
    </avalondock:LayoutRoot>
</avalondock:DockingManager> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:50:45.027

I would facilitate WPF animations to realize any kind of menu that pops up / appears / slides in / come somehow into action smoothly.

Build your menu-control in any way you want e.g. based on a StackPanel and then assign some custom animations to its position properties to make it appear and disappear.

The use of animations is quite simple since you are only specifying for a particular property a begin value, a target value and way to do the transition between those two.

For example to make a Stackpanel grow and shrink you may do the following:

```
// suppose you have a stackpanel named sp.

// create the actual animation
DoubleAnimation myDoubleAnimation = new DoubleAnimation();
myDoubleAnimation.From = 100;
myDoubleAnimation.To = 300;
myDoubleAnimation.Duration = new Duration(TimeSpan.FromSeconds(5));

// cerate the storyboard which comprise all your single animations into a compound animation - a storyboard.
StoryBoard myStoryboard = new Storyboard();
myStoryboard.Children.Add(myDoubleAnimation);

// link the animation with the object it is supposed to work on
Storyboard.SetTargetName(myDoubleAnimation, sp.Name);

// specify the target property of ypur StackPanel which should be affected by the animation
Storyboard.SetTargetProperty(myDoubleAnimation, new PropertyPath(Rectangle.Width)); 
```

For a complete introduction you may start reading here: [http://msdn.microsoft.com/en-us/library/ms752312.aspx](http://msdn.microsoft.com/en-us/library/ms752312.aspx)

Also read about Easing functions since with their help you can build much more sophisticated animations.

# php - REST API 部分工作 - PHP

> ID：12282622
> 
> 赞同：0
> 
> 时间：2012-09-05T13:30:20.387
> 
> 标签：php, mysql, rest

我正在尝试使用 PHP 创建一个基本的 REST 样式 API，但我遇到了一个奇怪的问题。当我通过 URL /rest/viewinput.php 访问我的一个页面（viewinput.php）时，页面加载正常。当我尝试通过 /rest/viewinput 时，我收到“找不到页面”错误。

因此，这是确定请求类型以及将其发送到何处的代码。这是在我的 server.php 页面上找到的

```
//in server.php
public function serve() {
    $uri = $_SERVER['REQUEST_URI'];
    $method = $_SERVER['REQUEST_METHOD'];
    $paths = explode('/', $this->paths($uri));
    array_shift($paths); // 
    $resource = array_shift($paths);

if ($resource == 'rest') {
        $page = array_shift($paths);
        if (empty($page)) {
            $this->handle_base($method);
    } else {
    $this->handle_page($method, $page);
        }

    }
    else {
        // We only handle resources under 'clients'
        header('HTTP/1.1 404 Not Found');
    } 
} 
```

由于它是一个带有确定页面名称的 GET 方法，因此它将传递给此函数

```
//in server.php
private function handle_page($method, $page) {
    switch($method) {  

    case 'GET':
    if($page == "viewinput"){ //I have both viewinput.php and viewinput just to check both. Only viewinput.php works
       $this->display_info();
    }
     if($page == "viewinput.php"){
       $this->display_info();
    }

    default:
        header('HTTP/1.1 405 Method Not Allowed');
        header('Allow: GET, PUT, DELETE');
        break;
    }
} 
```

然后从这里发送到

```
//in server.php
function display_info(){
$view = new ViewInputs(); 
$view->view();  //this function is on viewinput.php
} 
```

因此，当我访问 /rest/viewinput.php 时，视图功能会正确显示。当我访问 /rest/viewinput 时，我收到“断开的链接”错误。

我按照在线教程找到了一个 REST 服务器[Found Here](http://net.tutsplus.com/tutorials/other/a-beginners-introduction-to-http-and-rest/)，它工作得很好。

以下在我的 httpd.conf 文件中

```
Options +FollowSymlinks
RewriteEngine on
RewriteRule ^/.* rest/server.php 
```

这是我的 viewinput.php 文件。我相信它工作正常（当页面加载时，server.php 上的 serve 函数应该运行。

```
<?
include_once 'server.php';
class ViewInputs{

  function view(){
      $sql = mysql_query("select * from entry");
      ?> 
      <table>
          <th>ID</th>
          <th>Text</th>
          <col width="200">
          <col width="150">
        <?
        while ($result = mysql_fetch_array($sql)){
            ?>
            <tr><td><? echo $result['id']." "; ?></td><td><? echo $result['text']; ?></td></tr>
            <?
        }
        ?> </table> <?
    }
}
$server = new server();
$server->serve(); 
?> 
```

来自 httpd.conf。我可能错了，但我相信这是允许 .htaccess 文件的方法

```
DocumentRoot "C:/xampp/htdocs/rest"

<Directory />
   Options FollowSymLinks
   AllowOverride ALL
   Order deny, allow
   Deny from none
</Directory>

<Files ".ht*">
Require all ALLOW
</Files> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T17:37:31.530

您的重写规则未正确编写。发生的事情是，当您转到 rest/viewinput.php 时，该文件实际上存在，因此它能够运行。当您去休息/查看输入时，该文件不存在。您可以通过访问[http://martinmelin.se/rewrite-rule-tester/](http://martinmelin.se/rewrite-rule-tester/)检查您的重写规则，您会发现您的重写规则不好。

这样做的目的是让您没有 veiwinput.php 文件，所有内容都应该直接发送到 server.php 文件。您想要的重写规则很可能是这样的：

```
RewriteRule rest/* rest/server.php 
```

如果你想真正去 viewinput.php 有一个重写规则根本没有意义，只是摆脱它。

如果您希望将 rest/viewinput 视为 rest/viewinput.php，请使用以下命令：

```
RewriteRule ^rest/([a-z]+) rest/$1.php 
```

# java - 为什么使用相似种子时初始随机数相似？

> ID：12282628
> 
> 赞同：30
> 
> 时间：2012-09-05T13:30:45.057
> 
> 标签：java, random

我发现使用 Java 的 Random 类生成随机数时有些奇怪。基本上，如果您使用紧密种子（例如在 1 到 1000 之间）创建多个 Random 对象，每个生成器生成的第一个值将几乎相同，但下一个值看起来很好（我没有进一步搜索）。

这是种子从 0 到 9 的两个第一个生成的双打：

*   0 0.730967787376657 0.24053641567148587
*   1 0.7308781907032909 0.41008081149220166
*   2 0.7311469360199058 0.9014476240300544
*   3 0.731057369148862 0.07099203475193139
*   4 0.7306094602878371 0.9187140138555101
*   5 0.730519863614471 0.08825840967622589
*   6 0.7307886238322471 0.5796252073129174
*   7 0.7306990420600421 0.7491696031336331
*   8 0.7302511331990172 0.5968915822372118
*   9 0.7301615514268123 0.7664359929590888

从 991 到 1000 ：

*   991 0.7142160704801332 0.9453385235522973
*   992 0.7109015598097105 0.21848118381994108
*   993 0.7108119780375055 0.38802559454181795
*   994 0.7110807233541204 0.8793923921785096
*   995 0.7109911564830766 0.048936787999225295
*   996 0.7105432327208906 0.896658767102804
*   997 0.7104536509486856 0.0662031629235198
*   998 0.7107223962653005 0.5575699754613725
*   999 0.7106328293942568 0.7271143712820883
*   1000 0.7101849056320707 0.574836350385667

这是一个显示从 0 到 100,000 的种子生成的第一个值的图。

基于种子生成的第一个随机双精度：

![图片](../Images/17b7597de356e85564be278a0d5e0134.png)

我搜索了有关此的信息，但没有看到任何与此确切问题相关的信息。我知道 LCG 算法存在很多问题，但我不知道这个问题，我想知道这是否是一个已知问题。

而且，您是否知道这个问题是否仅针对第一个值（或前几个值），或者它是否更普遍并且应该避免使用紧密种子？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-05T15:04:55.377

最好下载和阅读`Random`源代码以及一些关于伪随机生成器的论文，但这里是源代码的一些相关部分。首先，控制算法的三个常数参数：

```
private final static long multiplier = 0x5DEECE66DL;
private final static long addend = 0xBL;
private final static long mask = (1L << 48) - 1; 
```

乘数约为 2^34 并更改，掩码 2^48 - 1，对于此分析，加数非常接近 0。

当您使用种子创建 Random 时，构造函数会调用`setSeed`：

```
synchronized public void setSeed(long seed) {
    seed = (seed ^ multiplier) & mask;
    this.seed.set(seed);
    haveNextNextGaussian = false;
} 
```

您提供的种子非常接近于零，因此设置的初始种子值取决于`multiplier`两者的 OR'ed 时间。在种子接近于零的所有测试用例中，内部使用的种子大约为 2^34；但是很容易看出，即使您提供了非常大的种子数量，类似的用户提供的种子也会产生类似的内部种子。

最后一块是`next(int)`方法，它实际上是根据当前种子生成请求长度的随机整数，然后更新种子：

```
protected int next(int bits) {
    long oldseed, nextseed;
    AtomicLong seed = this.seed;
    do {
    oldseed = seed.get();
    nextseed = (oldseed * multiplier + addend) & mask;
    } while (!seed.compareAndSet(oldseed, nextseed));
    return (int)(nextseed >>> (48 - bits));
} 
```

这被称为“线性同余”伪随机生成器，这意味着它通过将当前种子乘以一个常数乘数然后加上一个常数加数来生成每个连续的种子（在这种情况下，然后屏蔽以获取低 48 位） . 生成器的质量取决于乘法器和加法器的选择，但是所有此类生成器的输出都可以根据当前输入轻松预测，并且在重复之前有一个设定的周期（因此建议不要在敏感的情况下使用它们）应用程序）。

您看到`nextDouble`给定相似种子的相似初始输出的原因是，因为下一个整数的计算只涉及乘法和加法，所以下一个整数的大小受低位差异的影响不大。下一个 double 的计算涉及基于种子计算一个大整数并将其除以另一个（常数）大整数，结果的大小主要受整数大小的影响。

下一个种子的重复计算将放大种子低位的差异，因为重复乘以常数乘数，并且因为 48 位掩码每次都会抛出最高位，直到最终你看到看起来像甚至传播。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T13:44:30.893

我不会称这是一个“问题”。

> 而且，您是否知道这个问题是否仅针对第一个值（或前几个值），或者它是否更普遍并且应该避免使用紧密种子？

连续数字之间的相关模式是非加密 PRNG 的常见问题，这只是一种表现形式。相关性（严格的自相关性）是算法所依据的数学中固有的。如果您想理解这一点，您可能应该从阅读 Knuth 的计算机编程艺术第 3 章的相关部分开始。

如果您需要不可预测性，您应该使用（真正的）随机种子`Random`......或者让系统为您选择一个“相当随机”的种子；例如使用无参数构造函数。或者更好的是，使用真正的随机数源或加密质量 PRNG 而不是`Random`.

* * *

作为记录：

1.  javadoc (Java 7) 没有指定 Random() 本身是如何播种的。
2.  在 Java 7 for Linux 上的实现`Random()`是从纳秒时钟中播种的，与“唯一符”序列进行异或运算。'uniquifier' 序列是使用不同乘数的 LCG，其状态是静态的。这是为了避免种子的自相关......

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-05T13:46:43.920

对于伪随机种子来说，这是一种相当典型的行为——它们不需要提供完全不同的随机序列，它们只提供保证，如果你使用相同的种子，你可以再次获得相同的序列。

这种行为是由于 PRNG 的数学形式而发生的——Java 使用线性同余生成器，因此您只是看到通过一轮线性同余生成器运行种子的结果。这不足以完全混合所有位模式，因此您会看到类似种子的类似结果。

您最好的策略可能只是使用非常不同的种子 - 一种选择是通过散列您当前使用的种子值来获得这些种子。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-05T13:44:04.190

通过制作随机种子（例如，使用 System.currentTimeMillis() 或 System.nanoTime() 上的一些数学函数来生成种子），您可以获得更好的随机结果。也可以在[这里](http://javamex.com/tutorials/random_numbers/seeding.shtml)查看更多信息

# jquery - 在 cookie 中保存临时数据

> ID：12282633
> 
> 赞同：1
> 
> 时间：2012-09-05T13:31:03.520
> 
> 标签：jquery, cookies, fifo

我正在一个需要临时保存一些字符串的网站上工作。

比如说我有 4 个字符串：

```
1\. hello
2\. world
3\. foo
4\. test 
```

我需要实现一个 FIFO（先进先出）系统，这意味着如果我添加一个新字符串，则应该删除第一个（最旧的）项目。如何通过使用 jQuery cookie 插件来实现这一点？

我使用以下内容来获取/设置 cookie：

```
console.log( $.cookie("test") ); //get cookie
$.cookie("test", "hello", { expires: 7, path: '/' }); //set cookie 
```

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:06:54.433

如果可能，请不要为此使用 cookie。在现代浏览器中有一个`localStorage`.

此外，如果您使用某种结构，请为其创建 js 结构（数组、对象等）并使用它。

要保存到存储（cookie），请将此结构序列化为字符串，例如 json。

我建议使用方法`addValue`和创建js对象`getValue`，它包装js数据存储并通过挂钩保存方法`addValue`和`setValue`.

在开始时您可以运行`init()`，它将从存储中获取数据并将其反序列化为 js。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-05T20:50:25.847

我写了一些代码。它没有经过测试和运行，是用记事本写的。只是一个例子。可以为 cookie 更改方法 init 和 saveData。

```
 var myStorage = {
    data:[],
    init:function(){
        var json = localStorage.getItem('myData');
        if (json!=null) {
            this.data = jQuery.parseJSON(json);
        } else {
            this.data = [];
        }
    },
    addItem:function(val){
        this.data.push(val);
        this.saveData();
    },
    getItem:function(){
        var res = data[0];
        this.data = this.data.slice(1);
        this.saveData();
        return res;
    },
    saveData:function(){
        var json = JSON.stringify(this.data);
        localStorage.setItem('myData',json); 
    }

}

$(function(){
    myStorage.init();
}); 
```

# jquery - 我的 jquery/ajax 网站不工作

> ID：12282636
> 
> 赞同：0
> 
> 时间：2012-09-05T13:31:15.027
> 
> 标签：jquery, ajax, cross-domain, yahoo-api

我有一个允许显示跨域数据的脚本，例如：[Jsfiddle](http://jsfiddle.net/m4QCt/113/)

[我在我的网站moskah.nl](http://moskah.nl/)上放了完全相同的代码，你可以看到我得到一个空白页。这怎么可能 ？？？？？？您是否认为我的网站提供商以某种方式阻止/限制代码？是对“//query.yahooapis.com/v1/public/yql?callback=”的ajax调用吗？，那可能在荷兰不工作？？我已经和我的提供者的帮助台谈过了，但他们不知道（任何事情！）发生了什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:36:13.853

您收到 js 错误，您可以在 firebug 控制台中看到，并且您收到 jquery is not defined 错误。尝试像这样加载jquery（添加类型属性），

```
<script type="text/javascript" src="http://scripts.embed.ly/jquery.embedly.min.js"></script> 
```

# html - 锚不环绕 li。为什么？

> ID：12282638
> 
> 赞同：0
> 
> 时间：2012-09-05T13:31:20.657
> 
> 标签：html, css

我有以下 html 和 css 代码，我希望标签使用 css`<a>`环绕标签。`<li>`

这是[jsfiddle](http://jsfiddle.net/qrXWQ/)

html

```
<section class="row header">
            <ul class="nav">
                <li class="navfirst"><a href="#">Contact</a></li>
                <li><a href="#">Home</a></li>
                <li><a href="#">Resume</a></li>
                <li><a href="#">Interests</a></li>
                <li><a href="#">Work</a></li>
                <li class="navlast"><a href="#">Comments</a></li>
            </ul>
        </section> 
```

css

```
.header .nav {
 margin: 0;
 padding: 0; }
  .header .nav li {
list-style-type: none;
display: inline-block;
padding: 0.5% 1%;
border: 1px solid green; }
.header .nav li.navfirst {
  margin-right: 4%; }
.header .nav li.navlast {
  margin-left: 4%; }
.header .nav li a {
  display: block;
  text-decoration: none;
  border: 1px solid red;
  width: 100%;
  height: 100%; } 
```

这是scss。上面的css是从scss文件转换而来的

```
.nav {
    margin: 0;
    padding: 0;
    li {
        list-style-type: none;
        display: inline-block;
        padding: 0.5% 1%;
        border: 1px solid green;
        &.navfirst {
            margin-right: 4%;
        }
        &.navlast {
            margin-left: 4%;
        }
        a {
            display: block;
            text-decoration: none;
            border: 1px solid red;
            width: 100%;
            height: 100%;
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:34:31.963

从`li`标签中删除填充：

```
...
display: inline-block;
padding: 0.5% 1%;   <-- padding: 0
border: 1px solid green; 
... 
```

[http://jsfiddle.net/qrXWQ/1/](http://jsfiddle.net/qrXWQ/1/)

将填充添加到`a`：

```
.header .nav li a {
     display: block;
     text-decoration: none;
     border: 1px solid red;
     padding: 5px; 
} 
```

从上面的规则中删除`width: 100%`and `height: 100%`，否则填充会弄乱布局......

[http://jsfiddle.net/qrXWQ/2/](http://jsfiddle.net/qrXWQ/2/)

In the rule above the percent unit will not work because it has no base width/height to apply the % to. You have 3 options: 1) leave the padding in the LI, 2) put the padding in the `a` with a unit other than % (`em` fits well here), or 3) use media queries to set a diferent padding for each screen size.

# java - eclipse 调试变量导出或打印

> ID：12282639
> 
> 赞同：3
> 
> 时间：2012-09-05T13:31:20.933
> 
> 标签：java, eclipse, debugging, tomcat

我目前正在从大约 100 兆的 war 文件中调试类，在 Windows 7 下的 Tomcat 上运行并开始使用“catalina jpda start”，然后将项目连接到 Eclipse 调试器中。

我已经到了我正在调试的类已经完全初始化并且调试透视图中的变量视图看起来像这样的地步：

```
:> this
:> referenceIds
:> arr$
   len$
   i$
:> id 
```

其中 :> 应该类似于指示对象可以展开的白色右向三角形。

我需要在场外与另一位开发人员分享“this”对象参考详细信息，他需要了解全部内容才能帮助我。但是a）没有展开所有选项（我花了90分钟点击那些展开三角形，但还没有完成，这就像某种形式的递归地狱点击马拉松）和b）即使我右键单击上面并单击“复制变量” '，它没有给我扩展的信息，即点击'this'上的'copy variables'给了我非常无信息的信息：

```
REDACTEDProductsDataBuilder  (id=38)    
referenceIds    String[5]  (id=105) 
arr$    String[5]  (id=105) 
len$    5   
i$  3   
id  "4:REDACTEDUpsell" (id=117) 
```

我四处寻找有关更简单方法的信息，但一无所获。我在使用 eclipse 调试器方面非常新，所以如果有一个明显的答案，请原谅我，肯定有比花一天时间点击扩展三角形更简单的方法吗？如果没有，我还有其他选择吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T17:38:58.563

您可以在有趣的类中实现一个方法`toJSON()`，因此在调试时您可以：

1.  右键单击有趣的变量（有趣类的有趣实例） d
2.  单击“新建详细信息格式化程序”
3.  添加以下代码片段：`this.toJSON()`

然后变量表示会改变。

通常我`toJSON()`用 Jackson lib 实现方法来打印所有对象图，如下所示：

```
String res="";
ObjectMapper objectMapper=new ObjectMapper();   
objectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_CONCRETE_AND_ARRAYS);
res=objectMapper.writeValueAsString(this);
return res; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-05T14:04:20.160

似乎没有一种简单的方法可以做到这一点，因为 Eclipse 很难为整个对象图选择一个合适的表示来放在您的系统剪贴板上。

我建议为了帮助您进行调试，相关类的重要字段包含在它的 toString() 表示中。

或者，您可以考虑获取应用程序的堆转储，并将其发送给远程开发人员。堆转储是应用程序整个内存堆的二进制表示，有很多工具可用于检查其中之一，例如[Eclipse Memory Analyzer](http://www.eclipse.org/mat/)或[jhat](http://docs.oracle.com/javase/6/docs/technotes/tools/share/jhat.html)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-05T16:25:45.767

找到[了这个实用程序](https://code.google.com/archive/p/evars/)（“eVars”），它是 Eclipse 变量视图的扩展。据说有加载和保存变量的能力，虽然我没试过。

# simperium - Simperium 存储桶就绪响应时间体验

> ID：12282643
> 
> 赞同：1
> 
> 时间：2012-09-05T13:31:32.883
> 
> 标签：simperium

我用以下代码测量了加载一个桶（包含 20-30 个小物品）的 Simperium 响应时间：

```
var simperium = new Simperium(simperiumAppID, { token: simperiumAuthData.access_token });
console.time("simperiumBucketInit");
var bucket = simperium.bucket("main");
bucket.on('error', function (errortype) {
  console.log("got error for bucket: "+errortype);
})
bucket.on('ready', function () {
  console.timeEnd("simperiumBucketInit");
});
bucket.start();
​ 
```

Bucket 加载时间一般为 1.5-3 秒，有点长，但可以接受。但有时需要 20-30 秒，有一次需要 5 分钟以上。这是全球现象吗？我正在使用免费套餐。付费层有更好的性能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T18:11:19.673

过去一周 9/1 - 9/6 的性能问题可能是我们遇到的数据库问题的罪魁祸首。此后服务器已经升级，性能应该会更加流畅。

另一个可能的问题是与服务器的连接。Simperium JS 库包含并使用 SockJS。它尝试建立 websocket 连接，但有时这可能会失败，具体取决于网络/防火墙/浏览器。在这些情况下，它应该回退到使用常规的 http 轮询，但是这种故障转移可能需要长达 20 秒。

可以将选项直接传递给 SockJS 并使用 SockJS 选项来控制连接行为并强制使用轮询：

```
var simperium = new Simperium(simperiumAppID, { token: "",
    sockjs: {
        protocols_whitelist: ['xdr-polling', 'xhr-polling', 'iframe-xhr-polling', 'jsonp-polling']
        }
    }); 
```

关于免费与付费层级，付费/生产应用程序将拥有独立于免费应用程序的专用资源，因此它们应该具有更一致的性能。

# javascript - HTML class = Ajax action，如何让点击的class调用好action？

> ID：12282646
> 
> 赞同：0
> 
> 时间：2012-09-05T13:31:38.693
> 
> 标签：javascript, jquery, html, algorithm

# 语境

我在几行上有 3 个按钮（编辑、删除、取消订阅）。

这 3 个按钮是 3 个不同的类，但单击处理程序相同。

**此类等于用于 ajax 调用的 3 个操作的名称。**

所以在点击处理程序中，我需要检索已被点击的选择器的特定部分。

目前我使用我编写的以下代码

# 问题

**在 2-3 行中并使用 class=action system**，有没有更好的方法来解决我的问题？

我正在寻找类似的东西，但我没有找到：

```
$.post(url + '&action=' + classClickedIntoTheSelector.replace(/\./g, '') ... 
```

* * *

# 代码 + [JSFiddle](http://jsfiddle.net/3wj3R/1/)

```
<button class="actionLink edit btn">Éditer</button>
<button class="actionLink delete btn btn-warning">Supprimer</button>​ 
```

```
$('.edit, .delete').click(function () {
    var a = $('.this, .that').selector.replace(/\./g, '').split(', ');
    var b = $(this).attr('class').split(' ');
    var action;

    for (var i = 0; i < a.length; i++) {
        for (var j = 0; j < b.length; j++) {
            action = a[i] == b[j] ? a[i] : action;
        }            
    }

    $.post(url + '&action=' + action...
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:37:36.347

试试这个...

```
var l = function (x) { return console.log(x); };

$('.this, .that').click(function () {
    var $this = $(this);        
    if ($this.hasClass("this")) {
        l("this");
    }
    if ($this.hasClass("that")) {
        l("that");
    }
});​ 
```

[http://jsfiddle.net/3wj3R/2/](http://jsfiddle.net/3wj3R/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:33:45.053

```
if($(this).is('.this')) ...
if($(this).is('.that')) ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-13T08:07:06.673

最后我使用了泛型类和数据属性：

```
<button class="actionLink btn" data-action="edit">Éditer</button>
<button class="actionLink btn" data-action="delete">Supprimer</button>​ 
```

```
$j('.actionLink').click(function () {
    $.post(url + '&action=' + $(this).data('action'));
}); 
```

# html - CSS 标题布局

> ID：12282650
> 
> 赞同：1
> 
> 时间：2012-09-05T13:31:51.417
> 
> 标签：html, css, layout

我是不使用表格来布局网页的新手，所以如果这是一个非常简单的问题，我深表歉意。

我正在尝试为我希望看起来像这样的页面创建标题：

```
-------------------------------------------
|       | Some big text                   |
|  img  |                                 |
|       | Some smaller text               |
------------------------------------------- 
```

目前我有以下 div，但它没有像我想要的那样底部对齐小文本：

```
<div style="height:50px;">
    <img src="img.jpg" style="vertical-align:middle; height:100%; float:left"/>
    <div style="vertical-align:top;">BigText</>
    <div style="vertical-align:bottom;">SmallText</div>
</div> 
```

我该怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:35:51.927

对小文本 div使用`padding`or`margin`

```
<div style="height:50px;">
    <img src="img.jpg" style="vertical-align:middle; height:100%; float:left"/>
    <div style="vertical-align:top;">BigText</>
    <div style="vertical-align:bottom;padding-top:15px;">SmallText</div>
</div>​ 
```

[演示](http://jsfiddle.net/krish/aNhZf/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:37:23.007

我的版本：http: [//jsfiddle.net/gT6ze/](http://jsfiddle.net/gT6ze/)

或者，您可以使用`position:relative`for container `div`，`padding:60px`为其设置，并使用`position:absolute; top:0; left:0;`. 这样`div`，带有文本的元素也可以通过设置`position:absolute`and`top:0`和定位在 parent 内部`bottom:0`。

# windows-8 - Metro 风格的应用程序更新行为

> ID：12282656
> 
> 赞同：0
> 
> 时间：2012-09-05T13:31:59.497
> 
> 标签：windows-8, settings, microsoft-metro, updates

考虑到商店中现有的新版本，用户可以通过哪些方式更新计算机上安装的 Windows 8 Metro 风格应用程序？

用于`ApplicationData.Current.LocalSettings`保存一些用户数据的应用程序，当应用程序更新时，此设置被删除/重置或在版本之间保存？

`LocalSettings`当用户手动卸载并重新安装应用程序时的行为是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T15:03:19.757

设置在版本之间保持不变。当用户卸载应用程序时，LocalSettings 将被删除。

# javascript - 在用户关闭/更改移动浏览器选项卡之前检测

> ID：12282663
> 
> 赞同：3
> 
> 时间：2012-09-05T13:32:14.753
> 
> 标签：javascript, android, jquery, iphone

是否可以在用户更改选项卡或关闭移动浏览器上的选项卡之前检测到。

我试过

```
$(window).bind('beforeunload', function () {
           // AddToCart(123, 123, 123, 123);
            return "Message";
        }); 
```

但这没有用。

任何帮助都会很棒。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:43:05.343

`onbeforeunload`改为尝试，

```
window.onbeforeunload = function() {
    return 'You have unsaved changes!';
} 
```

注意：出于安全原因，现代浏览器显示自己的消息而不是自定义消息

# linux - linux上的jasper字体

> ID：12282664
> 
> 赞同：3
> 
> 时间：2012-09-05T13:32:16.010
> 
> 标签：linux, jasper-reports

我在 windows 上使用 verdana 制作的 .jasper 报告不适用于在 red hat linux 下运行 tomcat 的客户端。

有没有办法将 verdana.ttf 链接到 .jasper，或者解决这个问题的唯一方法是在服务器端安装 verdana.ttf？还有其他解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-05T14:36:22.690

有一个较低级别的替代方案。您可以在 jasper 服务器的 lib 目录中解压 jar `jasperreports-fonts-x.x.x.jar`。

检查结构并编辑/添加适当的 XML 文件和您需要的 TTF 文件。保持其中内容的连贯性。

我每次都遇到包括字体在内的麻烦，所以我这样做了，只需要担心下一次升级:)

希望对你有帮助，祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T11:51:37.880

*   使用以下内容创建文件 jasperreports_extension.properties：

    net.sf.jasperreports.extension.registry.factory.fonts= net.sf.jasperreports.engine.fonts.SimpleFontExtensionsRegistryFactory net.sf.jasperreports.extension.simple.font.families.fontfamily= fonts/fontfamily.xml

*   如果您使用 maven，请将此文件作为资源包含在您的 pom.xml 中

*   使用以下内容创建文件 fontfamily.xml：

> ```
>  <fontfamilies>
>       <fontfamily name="Verdana">
>       <normal><![CDATA[fonts/verdana.ttf]]></normal>
>       <bold><![CDATA[fonts/verdanabd.ttf]]></bold>
>       <italic><![CDATA[fonts/verdanai.ttf]]></italic>
>       <bolditalic><![CDATA[fonts/verdanabi.ttf]]></bolditalic>
>       <pdfembedded><![CDATA[true]]></pdfembedded>
>       </fontfamily>
>     </fontfamilies> 
> ```

*   放入文件夹“字体”（创建此文件夹）所有 ttf 文件（例如从[http://www.fontsupply.com/fonts/V/Verdana.html](http://www.fontsupply.com/fonts/V/Verdana.html)下载）

*   在所有 Jasper 报告中使用 fontName Verdana (*.jrxml)

# jquery - 为 asp.net 寻找 jQuery Poll 脚本

> ID：12282665
> 
> 赞同：-2
> 
> 时间：2012-09-05T13:32:19.407
> 
> 标签：jquery, asp.net, jquery-plugins, vbscript

我正在寻找一个用于 Asp.Net VB 的轮询脚本，即使用 jQuery。我看过这个脚本[链接] [http://net.tutsplus.com/tutorials/javascript-ajax/creating-a-dynamic-poll-with-jquery-and-php/](http://net.tutsplus.com/tutorials/javascript-ajax/creating-a-dynamic-poll-with-jquery-and-php/)

它很好，很干净，但是在 PHP 中，有人知道这是否是为 Asp.Net 制作的，而不仅仅是一些代码行，而是一个完整的工作前。！？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:38:04.180

看这里：

[jquery 使用智能投票插件进行投票](https://stackoverflow.com/questions/5665434/jquery-polling-with-smart-poll-plugin)

如果您寻找 Jquery 插件，则有很多轮询（：

[http://speckyboy.com/2009/03/11/25-powerful-and-useful-jquery-tutorials-for-developers-and-designers/](http://speckyboy.com/2009/03/11/25-powerful-and-useful-jquery-tutorials-for-developers-and-designers/)

# .net - 如何将 Excel 工作表写入 MemoryStream？

> ID：12282673
> 
> 赞同：1
> 
> 时间：2012-09-05T13:32:37.473
> 
> 标签：.net, excel

我有这个代码，但它保存到文件中

```
 Excel.Application app = new Excel.Application();
            app.Workbooks.Add();
            Excel._Worksheet sheet = app.ActiveSheet;
            sheet.Cells[1, "A"] = "login";
            sheet.Cells[1, "B"] = "e-mail";

            int row = 1;
            foreach (ProviderUser u in users)
            {
                row++;
                sheet.Cells[row, "A"] = u.UserName;
                sheet.Cells[row, "A"] = u.Email;
            }

            string pathToSave = Path.Combine(Environment.CurrentDirectory, "users.xlsx");
            sheet.SaveAs(pathToSave);
            app.Quit(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:38:31.957

您知道文件的位置还是需要先使用 Excel 创建它？

您可以使用轻松获取文件的字节数组

```
var buffer = File.ReadAllBytes(pathToSave) 
```

然后用字节数组创建你的内存流：

```
var stream = new MemoryStream(buffer); 
```

你是这个意思吗？

# php - 使用while循环以相反的顺序获取值

> ID：12282678
> 
> 赞同：1
> 
> 时间：2012-09-05T13:32:51.123
> 
> 标签：php, while-loop, fetch

我有一个从数据库中检索值的代码。但我想以相反的顺序获取这些值。参见这个例子

```
While($row=mysql_fetch_assoc($rs)){

 echo $row['id']."<br>";//gives 1 and 2 and so on 
   echo $row['val']."<br>";// gives abc and def and so on

} 
```

但我想要

```
 2
    def
    1
   abc 
```

我怎么能这样做。我不想像使用 ORDER BY 一样使用查询。所以我可以在 PHP End 控制它吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:36:06.707

```
while($row = mysql_fetch_array($rs)){
    $data[] = $row;
}

$data = array_reverse($data,true);

while($data){
} 
```

虽然没有测试过

我在[这个网站上](http://writecodeonline.com/php/)对其进行了测试，它可以工作。这是我使用的片段：

```
$data = array(1 => array("foo" => "bar"), 2 => true);
$data = array_reverse($data,true);
print_r($data); 
```

编辑：使用您编辑的答案，我得到了这个： $data = array(1 => array(1, "abc"), 2 => array(2, "def"));

```
$data = array_reverse($data,true);
foreach($data as $d){
    echo "id>".$d[0]." | val>".$d[1]."<br />";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-05T13:36:19.650

将您的数据存储在一个数组中（在您的 while 循环中）。之后，您可以使用[array_reverse](http://www.php.net/manual/en/function.array-reverse.php)来反转项目顺序。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T13:40:47.343

您还可以使用游标来遍历您的结果集 - 向后和向前移动 - 使用[PDO](http://au.php.net/manual/en/pdostatement.fetch.php)之类的东西- 并且可能对于其他类型的连接可能有类似的变化：

cursor_orientation

对于表示可滚动游标的 PDOStatement 对象，此值确定将返回给调用者的行。此值必须是 PDO::FETCH_ORI_* 常量之一，默认为 PDO::FETCH_ORI_NEXT。要为您的 PDOStatement 对象请求可滚动游标，您必须在使用 PDO::prepare() 准备 SQL 语句时将 PDO::ATTR_CURSOR 属性设置为 PDO::CURSOR_SCROLL。

但是使用 array_reverse 可能更简单。话虽如此，在查询中对数据进行排序将再次变得更简单（并且可能更有效）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-05T14:05:48.490

```
$result = $mysqli->query($query);

for($i = $result->num_rows - 1; $i>0; $i--){
    $result->field_seek($i);
    $finfo = $result->fetch_field();
    echo $finfo->id;
    echo $finfo->val;
} 
```

# iphone - UIAlertView 消息太长

> ID：12282682
> 
> 赞同：2
> 
> 时间：2012-09-05T13:33:09.577
> 
> 标签：iphone, ios, ipad, uialertview, retina-display

当可达性检测到 wifi 时，我会弹出一个 alertView。我有这个的英文和法文翻译。问题是法语版本的文本有点长，而且我确实有一些换行符。

当文本太长时，alertView 会变为带有可滚动文本视图的白色背景。有没有办法解决？奇怪的是，这只发生在视网膜设备上（或在横向时非视网膜，但这更有意义）。非视网膜设备正常显示整个消息。似乎具有*更多*景观的视网膜设备不应该发生这种情况。

帮助？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:44:23.277

首先，视网膜设备会产生相同的结果，因为它们具有相同数量的屏幕空间。不同之处在于像素密度，这意味着视网膜上的物体将具有相同的物理尺寸，但实际上将使用 4 倍的像素，从而产生更清晰、更锐利的图像。

其次，您无法避免这种情况。`UIAlertView`是 Apple 允许很少自定义的类，因此您最好制作自定义视图并自己呈现它。这可能只发生在横向模式下，因为在这些情况下警报会占用更少的屏幕区域。

因此，总的来说，我建议您创建自己的自定义弹出窗口，或者减少您在警报中显示的文本数量。

# mysql - 如何使用 mySQL 查询链接 4 个表

> ID：12282688
> 
> 赞同：0
> 
> 时间：2012-09-05T13:33:24.440
> 
> 标签：mysql, sql, join

车辆

```
+--------------------+--------------+------+-----+---------+
| Field              | Type         | Null | Key | Default | 
+--------------------+--------------+------+-----+---------+
| id                 | int(11)      | NO   | Pk  | NULL    |       
| model              | varchar(35)  | NO   |     | NULL    |            
+--------------------+--------------+------+-----+---------+ 
```

信息

```
+--------------------+--------------+------+-----+---------+
| Field              | Type         | Null | Key | Default | 
+--------------------+--------------+------+-----+---------+
| id                 | int(11)      | NO   | Pk  | NULL    |       
| vehicle_id         | varchar(35)  | NO   | FK  | NULL    |       
| location           | varchar(35)  | NO   |     | NULL    |       
+--------------------+--------------+------+-----+---------+ 
```

轴 1

```
+--------------------+--------------+------+-----+---------+
| Field              | Type         | Null | Key | Default | 
+--------------------+--------------+------+-----+---------+
| id                 | int(11)      | NO   | Pk  | NULL    |       
| vehicle_id         | varchar(35)  | NO   | FK  | NULL    |       
| weight             | varchar(35)  | NO   |     | NULL    |       
+--------------------+--------------+------+-----+---------+ 
```

轴 2

```
+--------------------+--------------+------+-----+---------+
| Field              | Type         | Null | Key | Default | 
+--------------------+--------------+------+-----+---------+
| id                 | int(11)      | NO   | Pk  | NULL    |       
| vehicle_id         | varchar(35)  | NO   | FK  | NULL    |       
| weight             | varchar(35)  | NO   |     | NULL    |       
+--------------------+--------------+------+-----+---------+ 
```

我希望创建一个查询，该查询将返回具有公共vehicle_id 的所有表中的所有字段。车辆 ID 是 3 个表（信息、轴 1、轴 2）中每个表中对车辆表中主键的引用。有人可以解释一下我该怎么做吗？我尝试使用多个连接，但它没有用！非常感谢。

编辑：

我试过的查询是；

```
SELECT * 
      FROM  Vehicle
      JOIN info, axle1, axle 2
      ON vehicle.id = axle1.vehicle_id 
     AND vehicle.id = axle2.vehicle_id AND vehicle.id = info.vehicle_id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:41:30.850

试试这个：

```
SELECT *
FROM Vehicle v
INNER JOIN Info   i ON          v.id = i.vehicle_id
INNER JOIN Axle1 a1 ON i.vehicle_id  = a1.vehicle_id
INNER JOIN Axle2 a2 ON a1.vehicle_id = a2.vehicle_id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:43:19.570

检查此链接：[mySQL get information from multiple tables in a query](https://stackoverflow.com/questions/231126/mysql-get-information-from-multiple-tables-in-one-query)我认为有一个可能适合的示例

您只需要为每个表指定一个标识符，这样您就可以在引用字段时指定您正在谈论的表。然后，确保将所有 id 作为条件链接，以便省略标识符不匹配的所有组合。那将是：

`SELECT * FROM Vehicle v, Info i, Axle1 a1, Axle2 a2 WHERE v.id == a1.vehicle_id AND v.id == a2.vehicle_id AND v.id == i.vehicle_id`

# hibernate - JPA Hibernate 删除表

> ID：12282693
> 
> 赞同：0
> 
> 时间：2012-09-05T13:33:42.290
> 
> 标签：hibernate, jpa

我在 Maven 项目的持久层中使用休眠，对此我真的很陌生。有时，当通过 jpa/hibernate 从数据库执行读取操作时，一些表会被删除。该项目没有实现那种功能。这是一个已知的问题？这些动作只是读取动作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T14:52:49.540

现在我终于找到了答案。似乎集成测试中的某些配置使它们针对错误的数据库（删除表的数据库）运行，而不是我们想要使用的 im-db。并且集成测试应该进行删除，但随后无法创建新表。所以这个问题的答案是松散耦合到问题，而不是我们不正确的配置。但也许这个答案会让其他有同样问题的人三思而后行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T01:12:26.903

我也是 hibernate 的新手，但我记得在 hibernate.xml 或 persistence.xml 中有一个设置，您可以在其中指定供应商删除并在每次运行该应用程序时生成模式和表。

以下属性将在应用程序启动时创建表，并且当您下次运行应用程序时，它不会重新生成已存在的表。

```
<property name="hbm2ddl.auto" value="create"/> 
```

其中“create-drop”的值将创建表并在会话结束时删除。

```
 <property name="hbm2ddl.auto" value="create-drop"/> 
```

看看这个文档[Jboss 参考](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/session-configuration.html#configuration-optional)

希望能帮助到你。

# php - 强制下载框打开时音乐缓冲停止

> ID：12282695
> 
> 赞同：-4
> 
> 时间：2012-09-05T13:33:43.507
> 
> 标签：php, cakephp-1.3

我正在开发具有`grooveshark integration`音乐和图像共享功能的社交网站，例如 Facebook。这是完整的ajaxify 网站。所以在这个网站上，一个人可以听音乐，另一方面他可以做其他事情，比如他可以分享状态、上传图片、分享链接，如 facebook。当用户打开任何图像时，有按钮下载它。我的问题是，当我在播放音乐时单击下载按钮下载图像时，它会导致（如果我通过检查元素在网络中看到）流式传输失败，部分内容（http代码 206）以及下载调用显示已取消，但返回 http 代码 200ok（通过检查元素在网络中）。这是代码：

```
 if(file_exists($media_name))
 $path='../webroot/img/user_media/original_uploaded_size/'.$user_id;
    else
    $path='../webroot/img/user_media/single_photo_878_549/'.$user_id;

header('Content-Description: File Transfer');
header('Content-Type: application/octet-stream');
header('Content-Disposition: attachment; filename='.basename($media_name));
header('Content-Transfer-Encoding: binary');
header('Expires: 0');
header('Cache-Control: must-revalidate, post-check=0, pre-check=0');
header('Pragma: public');
header('Content-Length: ' . filesize($path));
ob_clean();
flush();
readfile($path); 
```

请帮忙。
如果有人不明白，请发表评论，我会告诉你我的问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T08:28:16.380

你在使用会话吗？尝试`session_write_close();`在您的请求结束时使用。这将基本上完成请求。

# c# - NETCFv35.Messages.EN.cab 安装

> ID：12282697
> 
> 赞同：1
> 
> 时间：2012-09-05T13:33:56.487
> 
> 标签：c#, compact-framework, windows-ce

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:21:30.380

您不需要包含“它是 dll 作为对您的应用程序的引用”或类似的内容。如果您需要分发它，请确保它与您的应用程序一起提供，以及相关的 .NETCFv3.5 cab 文件和任何其他暂存依赖项。

此文件包含与 .NET CF 引发的异常对应的实际消息。它未打包到标准 .NET CF3.5 cab 中的原因有两个：

1.  使移动设备的部署规模尽可能小（紧凑）
2.  “设计良好”的应用程序不应该在生产代码中要求这些消息，因为 CF 引发的任何和所有异常都应该在您的应用程序中处理，并在必要时替换为用户友好的消息以显示给用户。

第二当然有时很难实现，但想法是这个 .CAB 可能不必与生产应用程序一起部署。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-09-22T14:05:01.650

*   从 NETCFv35.Messages.XX.wm.cab 中提取 SYCCFA~1.001
*   将其重命名为 System.SR.dll
*   将其添加为您的应用程序的参考

来自：[http ://tech.cybernet.lu/?p=522#comment-199](http://tech.cybernet.lu/?p=522#comment-199)

# c# - 在 DocumentCompleted 之前使用 WebBrowser 解析网页

> ID：12282700
> 
> 赞同：1
> 
> 时间：2012-09-05T13:34:06.517
> 
> 标签：c#, browser, frames

有一个包含多个框架的网页（称为主页面）。

主框架及其所有包含的框架引发事件`DocumentCompleted`。

这些事件的顺序是：Subframe1、subframe2、subframeX..、main。

我想要的是解析 main 的内容并在用户可以采取任何操作之前在其上的几个 html 元素上添加一些处理程序。（例如`button.Click`或`link.Click`）。到目前为止，这可以通过等待`DocumentCompleted`并检查事件的参数以获得正确的帧。

但是，有时包含的帧碰巧需要很长时间才能加载，并且在合理的时间内没有引发所需的事件。然而，尽管无法完成解析和添加处理程序，但用户仍然可以看到该页面。

因此，不耐烦的用户与页面交互，这会打乱所有工作。

有没有推荐的方法来更快地解析页面而无需等待`DocumentCompleted`（当然只要数据在那里）并继续静默进行（即：不向用户显示等待表单或弹出窗口）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T20:59:00.433

您可以使用“导航”事件，看[这里](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.navigated)

# c# - DataTable.Load 比 IDataAdapter.Fill 慢？

> ID：12282708
> 
> 赞同：3
> 
> 时间：2012-09-05T13:34:19.047
> 
> 标签：c#, oledb, datareader, dataadapter

我正在使用以下代码（Variant DataReader）：

```
public DataTable dtFromDataReader(list<String> lstStrings)
{

    OleDBConn_.Open();
    using (OleDbCommand cmd = new OleDbCommand())
    {

        DataTable dt = new DataTable();
        OleDbDataReader reader = null;
        cmd.Connection = OleDBConn_;
        cmd.CommandText = "SELECT * from TableX where SUID=?";

        foreach (String aString in lstStrings)
        {
            cmd.Parameters.AddWithValue("?", aNode.SUID);
            reader = cmd.ExecuteReader();

            if (reader != null)
                dt.Load(reader);
            cmd.Parameters.Clear();
        }
        return dt;
    }
} 
```

并将其与（Variant DataAdapter）进行比较：

```
public DataTable dtFromDataAdapter(list<String> lstStrings)
{
    dt = new DataTable();

    foreach (string aString in lstStrings)
    {
        sOledb_statement = String.Concat("SELECT * FROM TableX where SUID='", aString, "'");
        OleDbDataAdapter oleDbAdapter;
        using (oleDbAdapter = new OleDbDataAdapter(sOledb_statement, OleDBConn_))
        {
            GetOleDbRows = oleDbAdapter.Fill(dt);
        }
    }
} 
```

当我连接到离线数据库（微软访问）时，我的阅读时间是（~1.5k 检索项目）：

*   数据读取器 420 毫秒
*   数据适配器 5613 毫秒

从 oracle 服务器读取时（约 30k 检索项目）：

*   **数据读取器**323845毫秒
*   DataAdapter 204153 ms（多次测试，时间变化不大）

即使更改命令的顺序（数据读取器之前的数据适配器）也没有太大变化（我认为可能有一些预缓存..）。

**我认为`DataTable.Load`应该比`DataAdapter.Fill`?**

即使我看到了结果，我仍然相信它应该更快。我在哪里浪费时间？（没有未处理的异常..）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:56:04.133

您的比较并不是真正的 Adapter 与 DataReader 与您的代码设置方式。您实际上是在比较 Adapter.Fill 与 DataTable.Load 方法。

DataReader 通常会在每条记录的基础上更快，因为您将一次遍历一条记录，并且可以在您读取每条记录时做出相应的反应。

由于您在两个实例中都返回一个 DataTable，因此 Adapter.Fill 方法可能是使用的最佳选择。它旨在做到这一点。

# dynamics-crm-2011 - 使用在线 CRM 动态卡在冻结帧上

> ID：12282710
> 
> 赞同：3
> 
> 时间：2012-09-05T13:34:23.910
> 
> 标签：dynamics-crm-2011, dynamics-crm-online

时不时地（并且经常被打扰），例如在创建新过滤器、任务、约会等时，我会卡在模式窗口中。窗口是可移动的，但我无法通过按下红色 X 来关闭它角落，保存并关闭它，也不是 F4 它。窗口存在，按钮在视觉上做出反应**，但**框架没有关闭。

到目前为止，我最好的解决方案是终止该进程并再次登录。那让我伤心...

我怀疑这种行为*可能*与我的系统配置有关：我使用的是 Win8 和 IE10（设置为兼容模式），由云中的 CRM Dynamics 2011 提供支持。

1.  有人可以确认这种行为吗？
2.  关于如何处理它的任何点击（除了安装 IE9）？

（在我设置兼容模式之前，我体验了一些有趣的效果，例如“开始”部分滚动并像一些很酷的 jQuery 效果一样变得越来越宽。不过现在它已得到控制。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T12:43:45.507

也许不是一个解决方案，但是您是否更改了 IE 设置以强制新弹出窗口作为新选项卡而不是新窗口打开？我从未遇到过您描述的问题，但它可能允许您关闭它，因为它是一个选项卡，而不是一个窗口......

# android - 如何在 Eclipse Juno 中禁用 logcat 文本换行

> ID：12282716
> 
> 赞同：22
> 
> 时间：2012-09-05T13:34:37.123
> 
> 标签：android, eclipse, logcat, android-logcat

我正在使用最新的 Eclipse Juno 来开发 Android 应用程序。

我的问题是 logcat 文本消息在大约 80 个字符之后包装（即使 Text 列比这 80 个字符宽得多）。这很烦人，因为它将一条长线包裹在多行中，而我什至没有使用 Logcat 窗口宽度的一半，这使得它的可读性降低。

我在 Android > Logcat 下查看了 Eclipse 的首选项，但找不到任何解决我的问题的方法。不久前，我使用 Eclipse Indigo 进行 Android 开发，其中没有包装文本消息。

有谁知道如何在 Eclipse Juno 的 Logcat Text 列中禁用换行？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-03T17:53:54.887

您可以将文本消息字段扩展为一个非常高的值（例如 4000），以便**所有**记录的消息从一开始就适合一行。这可以通过

*   使用列调整器（文本列标题右侧，按住它）和（为方便起见）右箭头键（进行实际调整大小）。重启Eclipse看看效果
*   `logcat.view.colsize.Text=4000`在`$WORKSPACE\.metadata\.plugins\org.eclipse.core.runtime\.settings\com.android.ide.eclipse.ddms.prefs`Eclipse 关闭时更改值

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-02T11:47:46.543

这实际上带有一些 ADT 版本，而不是 Juno，您无法真正修复它。您唯一能做的就是使用已弃用的 Logcat View 或命令行。

或者，您也可以尝试使文本列尽可能大。

# haskell - 在纯 Haskell 中使用部分应用程序时如何确保效率？

> ID：12282717
> 
> 赞同：7
> 
> 时间：2012-09-05T13:34:37.973
> 
> 标签：haskell

我有一些结构与此等效的代码：

```
import Debug.Trace

newtype SomeExpensiveHiddenType = SCHT Double

expensive :: Double -> Double -> SomeExpensiveHiddenType
expensive a b = SCHT $ trace "call expensive" (*) a b

cheap :: SomeExpensiveHiddenType -> Double -> Double
cheap (SCHT x) c = trace "call cheap" (+) x c

f1 :: Double -> Double -> Double -> Double
f1 a b c = let x = expensive a b in cheap x c 
```

ie`f1`是一个基于前两个参数计算昂贵结果的函数，然后将其与第三个参数一起使用。我曾希望前两个参数的部分应用，然后重复应用第三个参数会导致昂贵的计算只运行一次。不幸的是，这种情况并非如此：

```
test1 = do
    putStrLn "test 1"
    let p = f1 2 3
    print (p 0.1)
    print (p 0.2)
    print (p 0.3) 
```

结果是：

```
*Main> test1
test 1
call cheap
call expensive
6.1
call cheap
call expensive
6.2
call cheap
call expensive
6.3
*Main> 
```

我想出了似乎是一个解决方案：

```
newtype X a = X { unX :: a }
f2 :: Double -> Double -> X (Double -> Double)
f2 a b = let x = expensive a b in X (cheap x)

test2 = do
    putStrLn "test 2"
    let p = unX $ f2 2 3
    print (p 0.1)
    print (p 0.2)
    print (p 0.3) 
```

导致：

```
*Main> test2
test 2
call cheap
call expensive
6.1
call cheap
6.2
call cheap
6.3
*Main> 
```

但这似乎很混乱。有没有一种更简洁的方法可以避免对昂贵计算的冗余调用？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-05T13:37:46.250

您可以将第三个参数放在 , 中`let`，以便`x`共享。

```
f2 a b = let x = expensive a b in \c -> cheap x c 
```

（在这种情况下`f2 a b = let x = expensive a b in cheap x`也可以。）

* * *

您正在寻找的是编译器驱动的[部分评估](https://en.wikipedia.org/wiki/Partial_evaluation)，这是一个难题......至少它很难正确实现，它不在 GHC 中。

# javascript-events - 主干视图触发全局事件

> ID：12282718
> 
> 赞同：1
> 
> 时间：2012-09-05T13:34:42.353
> 
> 标签：javascript-events, backbone.js

最近有很多问题，尽管我不能说它们正在加快我的发展步伐。而只是让我感到不舒服。需要把我的头包起来。

在一个不错的世界中，主干视图通知底层模型，模型触发事件。将更新本身视为对事件的响应。

如果视图触发一个事件并且另一个视图响应该事件是否合法？底层模型甚至可能对此一无所知？

假设我有一个购物车是一个集合，现在我有一个视图，称之为一瞥视图，其中包含项目计数和总成本，其中有一个链接可以查看购物车的详细内容。

因此用户单击链接视图会触发事件，但这会被控制器或模型以外的任何其他方捕获。

将底层模型排除在游戏之外，是吗？合法的？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:55:01.480

Backbone 的好处是它的灵活性，它不需要您严格遵守特定的架构。

所以一个视图触发一个事件是没有问题的，另一个视图直接响应这个事件而不改变模型上的任何东西。

但是，需要提出的问题是实现架构的最简洁方式是什么。

根据您所描述的情况，我认为，我会为两个视图使用全局事件对象来相互通信。

这是一些示例代码

```
var globalEvents = {};
_.extend(globalEvents, Backbone.Events);

var GlimpseView = Backbone.View.extend({
  events: {
    'click a.see-verbose': 'onSeeVerboseClick'
  },

  onSeeMoreClick: function() {
    globalEvents.trigger('seeVerbose', this.model);
  }
});

var VerboseView = Backbone.View.extend({
  initiliaze: function() {
    globalEvents.on('seeVerbose', onSeeVerbose, this);
  },

  onSeeVerbose: function(model) {
    // code to render the verbose view
  }
}); 
```

# tsql - 在 Sybase 的存储过程中，在大量位置使用变量作为表名

> ID：12282726
> 
> 赞同：0
> 
> 时间：2012-09-05T13:35:04.117
> 
> 标签：tsql, sybase

我有一个将源数据库中的记录归档到目标数据库中的过程，其中源数据库中的表在目标数据库中镜像。因此，我在指定表名时，还必须完整指定数据库名，如下：

```
DB_NAME.dbo.TABLE_NAME 
```

但是，我还必须在环境之间移动这个存储过程，其中相应的数据库名称不同。

例如：

开发：

```
DEV_DB_NAME.dbo.TABLE_NAME 
```

质量保证：

```
QA_DB_NAME.dbo.TABLE_NAME 
```

我可以使用 SHELL 脚本从环境变量中获取这些 DB 名称并将它们传递到 SPROC。但是，TSQL 不允许数据库名称使用变量。

我有一个解决方案，我基本上只是将整个脚本变成一个字符串并`exec`使用动态 SQL 运行。

推荐我的解决方案吗？还有其他解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T19:24:24.563

如何创建同义词？并在存储过程中使用同义词。然后每个 Envorinment 可以不同地定义相同的同义词。

我希望 Sybase 中的同义词可以跨数据库定义，如 SQL Server 2008。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-06T08:18:04.013

您可以使用 sqsh，这是一种 isql 替代方案，它允许您定义变量，就像 shell vars 一样，使您能够将相同的 DDL 安装到不同的数据库，并正确替换数据库名称等内容。

或者使用 shell 变量滚动您自己的变量，并在 shell 变量或临时文件中使用不同的 Sql 提供 isql。

还是在这种情况下您必须使用SP？这听起来不像是在利用 SP 的主要优势之一：优化一次并运行多次，从而节省优化时间。在这种情况下，使用 shell 脚本或 perl 脚本来完成您的任务，并提供命令行参数/配置文件/环境变量来说明哪些数据库。

# javascript - 使用运行总计时的 Javascript $NaN

> ID：12282727
> 
> 赞同：0
> 
> 时间：2012-09-05T13:35:08.267
> 
> 标签：javascript, forms, nan

我有这个 Javascript 函数，它可以计算多达 30 个不同的字段，因为用户可以添加多达 30 个他们出售的商品并输入数量并显示价格。此代码适用于每个行项目，我最多可以添加 30 个项目并查看它们各自的总数。在表格的底部，我有一个小计区域，这就是我无法动摇这个 $NaN 出现的地方......当查看代码时，它的小计、stantot 和 showtot 变量我得到了 NaN......

```
$(document).ready(function() {
    var subtotal = 0;
    var stantot = 0;
    var showtot = 0;
    $("input").keyup(function() {
        for (i = 0; i <= 30; i++) {
            var unitp = $("#unitp" + i).val();
            var casep = $("#casep" + i).val();
            var units = $("#units" + i).val();
            var cases = $("#cases" + i).val();
            var st_disc = $("#st_disc").val();
            var sh_disc = $("#sh_disc").val();

            var unitr = (unitp * units);
            var caser = (casep * cases);
            var result = (unitr + caser);
            var st_disc_fix = (st_disc / 100);
            var sh_disc_fix = (sh_disc / 100);
            var st_disc_solo = (st_disc_fix * result);
            var sh_disc_solo = (sh_disc_fix * result);
            var disc_total = (st_disc_fix + sh_disc_fix);
            var disc_whole = (disc_total * result);

            var disc = (result - disc_whole);
            var st_disc_tot = (result - disc_whole);
            var sh_disc_tot = (result - disc_whole);

            $("#line" + i).val('$' + result.toFixed(2));
            $("#disc" + i).val('$' + disc.toFixed(2));
            subtotal += parseInt(result);
            stantot += parseInt(st_disc_tot);
            showtot += parseInt(sh_disc_tot);
        }
        $("#totretail").val('$' + subtotal.toFixed(2));
        $("#standiscount").val('$' + stantot.toFixed(2));
        $("#showdiscount").val('$' + showtot.toFixed(2));

        var totship = ($("#totship").val() * 1);
        var tottax = ($("#tottax").val() * 1);

        var finaltotal = (subtotal + stantot + showtot + totship + tottax);
        $("#total").val('$' + finaltotal.toFixed(2));

    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:49:15.837

Here's what I would do.

First, I would create a function that takes a string and guarantees that a number is returned:

```
function toNumber(val) {
    var num = parseFloat(val);
    num = isNaN(num) ? 0 : num;
    return num;
} 
```

In this case, any `NaN` values are converted to zero. You can alter this to suit the needs of your application.

Then, I would update your variable declarations where you're pulling in the field values like so:

```
var unitp = toNumber($("#unitp" + i).val());
var casep = toNumber($("#casep" + i).val());
var units = toNumber($("#units" + i).val());
var cases = toNumber($("#cases" + i).val());
var st_disc = toNumber($("#st_disc").val());
var sh_disc = toNumber($("#sh_disc").val()); 
```

Since all proceeding calculations are based on these variables, if you guarantee that none of *these* are `NaN`, then none of the following values will be `NaN` either (barring exceptional circumstances).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T14:32:23.897

圣格比尔的回答效果很好，这是我的工作代码，供将来参考...

```
$(document).ready(function() {
var subtotal = 0;
var stantot = 0;
var showtot = 0;
$("input").keyup(function() {
    for (var i = 0; i <= 30; i++) {
        var unitp = parseFloat($("#unitp" + i).val()) || 0;
        var casep = parseFloat($("#casep" + i).val()) || 0;
        var units = parseFloat($("#units" + i).val()) || 0;
        var cases = parseFloat($("#cases" + i).val()) || 0;
        var st_disc = parseFloat($("#st_disc").val()) || 0;
        var sh_disc = parseFloat($("#sh_disc").val()) || 0;

        var unitr = (unitp * units);
        var caser = (casep * cases);
        var result = (unitr + caser);
        var st_disc_fix = (st_disc / 100);
        var sh_disc_fix = (sh_disc / 100);
        var st_disc_solo = (st_disc_fix * result);
        var sh_disc_solo = (sh_disc_fix * result);
        var disc_total = (st_disc_fix + sh_disc_fix);
        var disc_whole = (disc_total * result);

        var disc = (result - disc_whole);
        var st_disc_tot = (result - disc_whole);
        var sh_disc_tot = (result - disc_whole);

        $("#line" + i).val(result.toFixed(2));
        $("#disc" + i).val(disc.toFixed(2));
        subtotal += parseFloat((unitp * units) + (casep * cases));
        stantot += parseFloat(st_disc_tot);
        showtot += parseFloat(sh_disc_tot);
    }
    $("#totretail").val(subtotal.toFixed(2));
    $("#standiscount").val(stantot.toFixed(2));
    $("#showdiscount").val(showtot.toFixed(2));

    var totship = ($("#totship").val() * 1);
    var tottax = ($("#tottax").val() * 1);

    var finaltotal = (subtotal + stantot + showtot + totship + tottax);
    $("#total").val(finaltotal.toFixed(2));

    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:39:00.187

改变

`for (i = 0; i <= 30; i++) {`

至

`for (var i = 0; i <= 30; i++) {`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:44:55.413

您应该检查空字符串和空字符串，以便像这样更改所有语句

```
var unitp = $("#unitp" + i).val(); 
```

至

```
var unitp = $("#unitp" + i).val()===''?0:$("#unitp" + i).val(); 
```

或者

```
var unitp = $("#unitp" + i).val()||0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T13:45:19.153

将所有用户输入传递给 parseFloat 或 parseInt（取决于您是否需要小数点）

```
$(document).ready(function() {
    var subtotal = 0;
    var stantot = 0;
    var showtot = 0;
    $("input").keyup(function() {
        for (var i = 0; i <= 30; i++) {
            var unitp = parseFloat($("#unitp" + i).val()) || 0;
            var casep = parseFloat($("#casep" + i).val()) || 0;
            var units = parseInt($("#units" + i).val(),10) || 0;
            var cases = parseInt($("#cases" + i).val(),10) || 0;
            var st_disc = parseFloat($("#st_disc").val()) || 0;
            var sh_disc = parseFloat($("#sh_disc").val()) || 0;

            var unitr = (unitp * units);
            var caser = (casep * cases);
            var result = (unitr + caser);
            var st_disc_fix = (st_disc / 100);
            var sh_disc_fix = (sh_disc / 100);
            var st_disc_solo = (st_disc_fix * result);
            var sh_disc_solo = (sh_disc_fix * result);
            var disc_total = (st_disc_fix + sh_disc_fix);
            var disc_whole = (disc_total * result);

            var disc = (result - disc_whole);
            var st_disc_tot = (result - disc_whole);
            var sh_disc_tot = (result - disc_whole);

            $("#line" + i).val('$' + result.toFixed(2));
            $("#disc" + i).val('$' + disc.toFixed(2));
            subtotal += parseInt(result);
            stantot += parseInt(st_disc_tot);
            showtot += parseInt(sh_disc_tot);
        }
        $("#totretail").val('$' + subtotal.toFixed(2));
        $("#standiscount").val('$' + stantot.toFixed(2));
        $("#showdiscount").val('$' + showtot.toFixed(2));

        var totship = ($("#totship").val() * 1);
        var tottax = ($("#tottax").val() * 1);

        var finaltotal = (subtotal + stantot + showtot + totship + tottax);
        $("#total").val('$' + finaltotal.toFixed(2));

    });
}); 
```

这将默认`NaN`条目为 0，并且应该按照您的预期进行。

不确定您期望整数或浮点数的值，因此根据需要进行交换。

**编辑：**添加了几个 parseInt，所以你知道如何调用它们。

# vb.net - 动态显示 AjaxControlToolkit.Twitter？

> ID：12282730
> 
> 赞同：0
> 
> 时间：2012-09-05T13:35:18.607
> 
> 标签：vb.net, twitter, ajaxcontroltoolkit

我试图通过创建新实例并将新屏幕名称绑定到 Twitter 并将此控件放置到 Panel 来动态显示 AjaxControlToolkit.Twitter。但它不起作用。有什么建议么？

```
Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load
        Dim RandomNumber As New Random()
        Dim rn As Short
        rn = RandomNumber.Next(1, 6)
        Select Case rn
            Case rn = 1
                Dim tw As New AjaxControlToolkit.Twitter()
                tw.ScreenName = "aspnet"
                tw.DataBind()
                pnlTw.Controls.Add(tw)
            Case rn = 2
                Dim tw As New AjaxControlToolkit.Twitter
                tw.ScreenName = "smashingmag"
                tw.DataBind()
                pnlTw.Controls.Add(tw)
            Case rn = 3
                Dim tw As New AjaxControlToolkit.Twitter
                tw.ScreenName = "LessThanDot"
                tw.DataBind()
                pnlTw.Controls.Add(tw)
            Case rn = 4
                Dim tw As New AjaxControlToolkit.Twitter
                tw.ScreenName = "scottgu"
                tw.DataBind()
                pnlTw.Controls.Add(tw)
            Case rn = 5
                Dim tw As New AjaxControlToolkit.Twitter
                tw.ScreenName = "Encosia"
                tw.DataBind()
                pnlTw.Controls.Add(tw)
            Case rn = 6
                Dim tw As New AjaxControlToolkit.Twitter
                tw.ScreenName = "domvtae"
                tw.DataBind()
                pnlTw.Controls.Add(tw)
        End Select
    End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T10:41:24.673

问题已解决 - 只需将大小写更改为 if 条件。))

# django - 芹菜任务更新

> ID：12282733
> 
> 赞同：4
> 
> 时间：2012-09-05T13:35:22.037
> 
> 标签：django, celery

我正在研究 celery 在较长时间运行的任务方面的功能，用户希望在其中观察进度。该应用程序基于 Django，任务通过 RPC 启动，并涉及将数据库与文件系统上的文件同步。

在任务中，我想登录多个级别（WARN、ERROR、INFO、...），并且我还希望用户根据日志级别过滤消息，所以我想登录到我的数据库是可行的。

我的问题是：

*   是否建议登录到我的 Django 应用程序正在使用的同一数据库？
*   如何设置 celery 以使用 Python 标准日志记录模块登录数据库？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T21:28:48.823

为什么不使用当前状态更新任务并使用任务 ID 进行查询。然后，您将透明地使用您配置的后端，而不是使数据库过载。

Ask 在[这里](https://groups.google.com/forum/?fromgroups=#!topic/celery-users/ZOAj7FzZqeI)解释技术。

```
YourTaskObject(Task):
    run(self, **kwargs):
        while true:
            # do some work
            self.backend.store_result(self.request.id, result={"percent_done": number}, status="PROGRESS") 
```

然后你只需使用 AsyncTask 结果：

```
result = YourTaskObject.AsyncResult(task_id=task_id)
if not result.ready():
    progress = result.result.percent_done
else:
    ... 
```

# javascript - Coffescript '@' 或 this 在函数和类中

> ID：12282737
> 
> 赞同：1
> 
> 时间：2012-09-05T13:35:34.630
> 
> 标签：javascript, coffeescript

在咖啡脚本中有以下课程：

```
class Canvas
  constructor: (finder) ->
    @canvas = $(finder)
    @mouse_down()
  mouse_down: ->
    @canvas.mousedown (e) ->
      mouse_x = e.pageX - @offsetLeft
      ### ... ###
      @redraw()
  redraw: ->
    ### ... ### 
```

问题是在函数中调用类对象`redraw`方法。`mousedown`最好的解决方案是什么？我只发现：

```
 mouse_down: ->
    @canvas.mousedown (e) =>
      mouse_x = e.pageX - @canvas[0].offsetLeft
      ### ... ###
      @redraw() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T13:21:22.063

看一下这个：

```
class Canvas
   constructor: (finder) ->
      @canvas = $(finder)
      @mouse_down()
   mouse_down: ->
      redrawCallback = @redraw
      @canvas.mousedown (e) ->
         mouse_x = e.pageX - @offsetLeft
         ### ... ###
         redrawCallback()
   redraw: ->
      ### ... ### 
```

如果 redraw 无论如何都指向@（Canvas 类），那么这样做会更好（无论如何它更安全）：

```
class Canvas
  constructor: (finder) ->
     @canvas = $(finder)
     @mouse_down()
  mouse_down: ->
     redrawCallback = => @redraw()
     @canvas.mousedown (e) ->
        mouse_x = e.pageX - @offsetLeft
        ### ... ###
        redrawCallback()
  redraw: ->
     ### ... ### 
```

PS。尽管这是一个口味问题，但我相信骆驼大小写比下划线更适合方法名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-06T10:20:56.933

您找到了更好的解决方案。但如果你愿意，你可以这样写：

```
mouse_down: ->
    self = @ 
    @canvas.mousedown (e) ->
      mouse_x = e.pageX - self.canvas[0].offsetLeft
      ### ... ###
      self.redraw() 
```

# css - 我应该在 twitter bootstrap 中为固定的 960px 布局设置什么值？

> ID：12282744
> 
> 赞同：5
> 
> 时间：2012-09-05T13:36:00.793
> 
> 标签：css, twitter-bootstrap, less

我正在使用从 github 克隆的较少的 twitter 引导程序。我想设置网格宽度变量，因为我需要一个 960px 的固定布局。940px 宽度的默认值为：

```
@gridColumns:             12;
@gridColumnWidth:         60px;
@gridGutterWidth:         20px; 
```

我应该为固定的 960px 布局设置什么值？

我试过这个，但结果是 950px：

```
@gridColumns:             12;
@gridColumnWidth:         70px;
@gridGutterWidth:         10px; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T17:30:08.253

## 求解方程

您需要找到方程的解决[方案](http://www.wolframalpha.com/input/?i=solve+n%2ac+%2B+%28n+-+1%29%2ag+%3D+960%2C+n+%3D+12%2C+c+%3E+g%2C+g+%3E+0+over+integers)。其中之一是：

```
@gridColumns:             12;
@gridColumnWidth:         69px;
@gridGutterWidth:         12px; 
```

另一个：

```
@gridColumns:             12;
@gridColumnWidth:         58px;
@gridGutterWidth:         24px; 
```

## 但是使用默认

Bootstrap[设计为 960px](http://bootstrapdocs.com/v1.0.0/docs/#grid-system)宽度，它只是没有在侧面指定额外的边距/填充：

```
| ------------------------------ 960px width ---------------------------------- |
10px left margin | ------------- 940px container ------------ | 10px right margin 
```

因此，如果您的目标是 960 像素，我建议您使用默认值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-07T00:32:28.070

你总是可以制作一个 960px 的容器并使用流体。

# python - 条件树和回溯

> ID：12282746
> 
> 赞同：1
> 
> 时间：2012-09-05T13:36:02.807
> 
> 标签：python

我有一些图表，并从中生成代码。一个节点的一个条件。例如，生成的代码可能如下所示：

```
def function():
    steps = []

    if True:
        steps.append(1)

        if True:
            steps.append(2)

            if False:
                steps.append(3)
                return 'a', steps

            if False:
                steps.append(4)
                return 'b', steps

        if True:
            steps.append(5)

            if True:
                steps.append(6)

                if False:
                    steps.append(7)
                    return 'a', steps
            if True:
                steps.append(8)
                return 'b', steps 
```

`True`我用/替换了实际条件`False`以使示例更清晰。

此函数返回 tuple `('b', [1, 2, 5, 6, 8])`，因此采取了一些值和步骤。我想修改此代码以删除不成功的步骤。所以修改后函数应该返回`('b', [1, 5, 8])`。

我的问题是，最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:55:59.183

做到这一点的一种方法是`pop`在每个失败的小组之后。

```
def function():
    steps = []

    if True:
        steps.append(1)

        if True:
            steps.append(2)

            if False:
                steps.append(3)
                return 'a', steps

            if False:
                steps.append(4)
                return 'b', steps

            steps.pop() #removes 2 from steps

        if True:
            steps.append(5)

            if True:
                steps.append(6)

                if False:
                    steps.append(7)
                    return 'a', steps

            steps.pop() #remove the 6

            if True:
                steps.append(8)
                return 'b', steps

        steps.pop() #remove the 5
    steps.pop() # removes the 1 
```

# image - 在 VBA 中获取图像大小？

> ID：12282753
> 
> 赞同：4
> 
> 时间：2012-09-05T13:36:35.847
> 
> 标签：image, vba, excel, ms-word

在我一直在为其构建一些 VBA 代码的 word 文档中，我需要能够在用户窗体上显示图像，并且还需要调整用户窗体的大小以适应它所呈现的任何图像。

当我在即时框中尝试这样的事情时，我很困惑（图像文件实际上只有 675 像素宽）：

```
? LoadPicture("C:\Users\arose\Desktop\Security Control Doc\Images\AC1.bmp").Width
  17859 
```

最终我发现这是由于 VBA 使用了像素以外的其他单位。Twips，或者类似的东西。但我真的需要以像素为单位的图像大小，所以我四处寻找，大致找到了转换因子，我正在使用这个：

```
Function TwipsToPixels(Twips As Long) As Long

    TwipsToPixels = Twips / 25.477

End Function 
```

这有帮助，但不是特别准确。所以我的问题是，有没有人有更优雅、更精确的方式在 VBA 中获取图像大小？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-05T13:41:14.377

VBA 中的默认测量单位是**缇**：与屏幕无关的测量单位，等于 1/20 点或 1/1,440 英寸。一厘米有567缇。

像素是与屏幕相关的单位，因此这两个功能/属性`TwipsPerPixelX`应该`TwipsPerPixelY`可以解决问题。

# spring - Spring 和 JSF - 依赖注入失败 ServiceBean 无法加载

> ID：12282754
> 
> 赞同：0
> 
> 时间：2012-09-05T13:36:39.827
> 
> 标签：spring, jsf, dependency-injection

我目前挂断了 Spring 和 JSF 集成。我想我错误地配置了一些东西，我看不出到底是什么。我得到一个空指针异常，因为 JSF Bean 不会加载服务层。我的配置如下：

堆栈跟踪

```
java.lang.NullPointerException
    at com.speterit.auftragssystem.beans.MitarbeiterBean.getMitarbeiterList(MitarbeiterBean.java:27)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:57)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke(Method.java:616)
    at javax.el.BeanELResolver.invoke(BeanELResolver.java:484)
    at javax.el.CompositeELResolver.invoke(CompositeELResolver.java:161)
    at org.apache.el.parser.AstValue.getValue(AstValue.java:159)
    at org.apache.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:189)
    at com.sun.faces.facelets.el.TagValueExpression.getValue(TagValueExpression.java:106)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:190)
    at javax.faces.component.ComponentStateHelper.eval(ComponentStateHelper.java:178)
    at javax.faces.component.UIData.getValue(UIData.java:553)
    at javax.faces.component.UIData.getDataModel(UIData.java:1293)
    at javax.faces.component.UIData.setRowIndex(UIData.java:446)
    at com.sun.faces.renderkit.html_basic.TableRenderer.encodeBegin(TableRenderer.java:77)
    at javax.faces.component.UIComponentBase.encodeBegin(UIComponentBase.java:824)
    at javax.faces.component.UIData.encodeBegin(UIData.java:936)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1661)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1666)
    at javax.faces.component.UIComponent.encodeAll(UIComponent.java:1666)
    at com.sun.faces.application.view.FaceletViewHandlingStrategy.renderView(FaceletViewHandlingStrategy.java:389)
    at com.sun.faces.application.view.MultiViewHandler.renderView(MultiViewHandler.java:127)
    at com.sun.faces.lifecycle.RenderResponsePhase.execute(RenderResponsePhase.java:117)
    at com.sun.faces.lifecycle.Phase.doPhase(Phase.java:97)
    at com.sun.faces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:135)
    at javax.faces.webapp.FacesServlet.service(FacesServlet.java:335)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:225)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:98)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:927)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1001)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1110)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:603)
    at java.lang.Thread.run(Thread.java:679) 
```

默认.xhtml

```
<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<h:head>

</h:head>
</head>
<h:body>
    #{mitarbeiterBean.getServiceMitarbeiter() ne null ? "true" : "false"}<br />
    <h:dataTable value="#{mitarbeiterBean.getMitarbeiterList()}" var="m">
        <h:column>
            <f:facet name="header">Vorname</f:facet>
                        #{m.vorname}
                </h:column>
        <h:column>
            <f:facet name="header">Nachname</f:facet>
                        #{m.nachname}
                </h:column>
        <h:column>
            <f:facet name="header">Geburtsdatum</f:facet>
                        #{m.geburtsdatum}
                </h:column>
    </h:dataTable>
</h:body> 
```

当我在没有数据表部分的情况下执行代码时，评估结果`#{mitarbeiterBean.getServiceMitarbeiter() ne null ? "true" : "false"}<br />`为假。

MitarbeiterBean.java

```
package com.speterit.auftragssystem.beans;

import java.io.Serializable;
import java.util.Date;
import java.util.List;

import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;

import com.speterit.auftragssystem.data.model.Mitarbeiter;
import com.speterit.auftragssystem.data.service.IServiceMitarbeiter;

@ManagedBean(name = "mitarbeiterBean")
@RequestScoped
public class MitarbeiterBean implements Serializable
{
    private static final long serialVersionUID = 1L;

    public IServiceMitarbeiter serviceMitarbeiter;
    public String vorname;
    public String nachname;
    public Date geburtsdatum;

    public List<Mitarbeiter> getMitarbeiterList()
    {
        return getServiceMitarbeiter().retrieveAllMitarbeiter();
    }

    public void addMitarbeiter()
    {
        Mitarbeiter mitarbeiter = new Mitarbeiter(getVorname(), getNachname(),
                getGeburtsdatum());

        getServiceMitarbeiter().createMitarbeiter(mitarbeiter);

        clearForm();
    }

    public void clearForm()
    {
        setVorname("");
        setNachname("");
        setGeburtsdatum(null);
    }

    public String getVorname()
    {
        return vorname;
    }

    public void setVorname(String vorname)
    {
        this.vorname = vorname;
    }

    public String getNachname()
    {
        return nachname;
    }

    public void setNachname(String nachname)
    {
        this.nachname = nachname;
    }

    public Date getGeburtsdatum()
    {
        return geburtsdatum;
    }

    public void setGeburtsdatum(Date geburtsdatum)
    {
        this.geburtsdatum = geburtsdatum;
    }

    public IServiceMitarbeiter getServiceMitarbeiter()
    {
        return serviceMitarbeiter;
    }

    public void setServiceMitarbeiter(IServiceMitarbeiter serviceMitarbeiter)
    {
        this.serviceMitarbeiter = serviceMitarbeiter;
    }
} 
```

servlet-context.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:beans="http://www.springframework.org/schema/beans"
    xmlns:context="http://www.springframework.org/schema/context" xmlns:tx="http://www.springframework.org/schema/tx"
    xsi:schemaLocation="http://www.springframework.org/schema/mvc http://www.springframework.org/schema/mvc/spring-mvc-3.0.xsd
        http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
        http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd
        http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx.xsd">

    <!-- DispatcherServlet Context: defines this servlet's request-processing 
        infrastructure -->

    <!-- Handles HTTP GET requests for /resources/** by efficiently serving 
        up static resources in the ${webappRoot}/resources directory -->
    <resources mapping="/resources/**" location="/resources/" />

    <!-- Hibernate -->
    <beans:bean id="hibernateSessionFactory"
        class="org.springframework.orm.hibernate3.LocalSessionFactoryBean">
        <beans:property name="configLocation" value="classpath:hibernate.cfg.xml" />
        <beans:property name="configurationClass"
            value="org.hibernate.cfg.AnnotationConfiguration" />
        <beans:property name="hibernateProperties">
            <beans:props>
                <beans:prop key="hibernate.show_sql">true</beans:prop>
                <beans:prop key="hibernate.hbm2ddl.auto">create</beans:prop>
                <beans:prop key="hibernate.dialect">org.hibernate.dialect.PostgreSQLDialect
                </beans:prop>
                <beans:prop key="hibernate.c3p0.min_size">5</beans:prop>
                <beans:prop key="hibernate.c3p0.max_size">20</beans:prop>
                <beans:prop key="hibernate.c3p0.timeout">1800</beans:prop>
                <beans:prop key="hibernate.c3p0.max_statements">50</beans:prop>
            </beans:props>
        </beans:property>
    </beans:bean>

    <tx:annotation-driven transaction-manager="transactionManager" />
    <beans:bean id="transactionManager"
        class="org.springframework.orm.hibernate3.HibernateTransactionManager">
        <beans:property name="sessionFactory" ref="hibernateSessionFactory" />
    </beans:bean>

    <!-- Model Declaration -->
    <beans:bean id="Mitarbeiter" class="com.speterit.auftragssystem.data.model.Mitarbeiter"/>

    <!-- DAO Declaration -->
    <beans:bean id="DaoMitarbeiter" class="com.speterit.auftragssystem.data.dao.DaoMitarbeiter">
        <beans:property name="sessionFactory" ref="SessionFactory" />
    </beans:bean>

    <!-- Service Declaration -->
    <beans:bean id="ServiceMitarbeiter" class="com.speterit.auftragssystem.data.service.ServiceMitarbeiter">
        <beans:property name="daoMitarbeiter" ref="DaoMitarbeiter" />
    </beans:bean> 
```

面孔-config.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<faces-config
    xmlns="http://java.sun.com/xml/ns/javaee"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/javaee 
    http://java.sun.com/xml/ns/javaee/web-facesconfig_2_0.xsd"
    version="2.0">

    <application>
        <el-resolver>
            org.springframework.web.jsf.el.SpringBeanFacesELResolver
        </el-resolver>
    </application>
    <managed-bean>
        <managed-bean-name>mitarbeiterBean</managed-bean-name>
        <managed-bean-class>com.speterit.auftragssystem.beans.MitarbeiterBean</managed-bean-class>
        <managed-bean-scope>session</managed-bean-scope>
        <managed-property>
            <property-name>serviceMitarbeiter</property-name>
            <value>#{ServiceMitarbeiter}</value>
        </managed-property>
    </managed-bean>
</faces-config> 
```

IServiceMitarbeiter.java

包 com.speterit.auftragssystem.data.service；

```
import java.util.List;

import com.speterit.auftragssystem.data.dao.IDaoMitarbeiter;
import com.speterit.auftragssystem.data.model.Mitarbeiter;

public interface IServiceMitarbeiter
{
    public List<Mitarbeiter> retrieveAllMitarbeiter();
    public Mitarbeiter retrieveMitarbeiter(long personalnummer);
    public Mitarbeiter createMitarbeiter(Mitarbeiter mitarbeiter);
    public Mitarbeiter updateMitarbeiter(Mitarbeiter mitarbeiter);
    public IDaoMitarbeiter getDaoMitarbeiter();
    public void setDaoMitarbeiter(IDaoMitarbeiter daoMitarbeiter);
} 
```

ServiceMitarbeiter.java

```
package com.speterit.auftragssystem.data.service;

import java.util.List;

import org.springframework.transaction.annotation.Transactional;

import com.speterit.auftragssystem.data.dao.IDaoMitarbeiter;
import com.speterit.auftragssystem.data.model.Mitarbeiter;

@Transactional(readOnly = true)
public class ServiceMitarbeiter implements IServiceMitarbeiter
{
    IDaoMitarbeiter daoMitarbeiter;

    @Transactional(readOnly = true)
    public List<Mitarbeiter> retrieveAllMitarbeiter()
    {
        return daoMitarbeiter.getAll();
    }

    @Transactional(readOnly = true)
    public Mitarbeiter retrieveMitarbeiter(long personalnummer)
    {
        return daoMitarbeiter.getByPersonalnummer(personalnummer);
    }

    @Transactional(readOnly = false)
    public Mitarbeiter createMitarbeiter(Mitarbeiter mitarbeiter)
    {
        return daoMitarbeiter.create(mitarbeiter);
    }

    @Transactional(readOnly = false)
    public Mitarbeiter updateMitarbeiter(Mitarbeiter mitarbeiter)
    {
        return daoMitarbeiter.persistOrMerge(mitarbeiter);
    }

    public IDaoMitarbeiter getDaoMitarbeiter()
    {
        return daoMitarbeiter;
    }

    public void setDaoMitarbeiter(IDaoMitarbeiter daoMitarbeiter)
    {
        this.daoMitarbeiter = daoMitarbeiter;
    }
} 
```

我为每一个快速的线索感到高兴:) 因为我不知道了

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T17:28:59.713

与`org.springframework.web.jsf.el.SpringBeanFacesELResolver`你的类需要是一个简单的 Spring 组件。删除`@ManagedBean`和添加`@Component`注释。

您已经`MitarbeiterBean`通过注释创建了另一个由 JSF 管理的实例，`@ManagedBean`它与 Spring 管理的 bean 不同，因此`serviceMitarbeiter`不会注入该字段。忘记 JSF 托管 bean 并在 JSF 中使用 Spring 组件。

还要用 Spring 替换`javax.faces.bean`sope 注释`@Scope`。

例如`@RequestScoped`->`@Scope("request")`

# c# - 为什么从 DbSet 映射实体时忽略我的 DbModelBuilder 配置 .SqlQuery？

> ID：12282757
> 
> 赞同：4
> 
> 时间：2012-09-05T13:36:44.897
> 
> 标签：c#, entity-framework-4

我有这样的`DbModel`配置：

```
modelBuilder.Entity<WishlistLine>()
            .HasKey(w => w.PersistenceKey)
            .Property(w => w.PersistenceKey)
            .HasColumnName("WishlistLineId"); 
```

我通过以下两种方法运行查询：

```
public IEnumerable<WishlistLine> FetchWishlistLinesUsingLogonName(string logonName)
{
        return GetFromRawSql(@"
    SELECT wl.* FROM WishlistLines wl
    INNER JOIN Accounts a ON wl.AccountId = a.AccountId 
    LEFT JOIN Users u ON u.AccountId = a.AccountId
    WHERE u.LogonName = @p0", logonName);
}

protected IEnumerable<TEntity> GetFromRawSql(string sqlQuery, params object[] parameters)
{
    return _dbSet.SqlQuery(sqlQuery, parameters).ToList();
} 
```

我可以通过EF“保存”`WishlistLines`到数据库中，没有任何问题。当我运行此查询时，虽然我收到此错误：

`The data reader is incompatible with the specified 'DataAccessLayer.DatabaseContext.WishlistLine'. A member of the type, 'PersistenceKey', does not have a corresponding column in the data reader with the same name.`

我知道 using`DbSet<T>.SqlQuery()`会将返回的数据映射到实体，但它似乎忽略了`DbModel`配置。从错误消息判断（猜测）使用了错误的数据读取器。

所以：

A）我做错了什么吗？

B) 有没有办法利用 EF 的`DbModel`感知实体映射器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-11T21:39:07.020

实际上，当您执行原始 SQL 查询时，列名映射会被忽略。这里有两个参考：[这个](http://social.msdn.microsoft.com/Forums/sk/adodotnetentityframework/thread/b7630f85-0ef0-4d06-8633-70faa2849583)非常不令人满意的线程只是为了好玩，但下面的一个来自 EF 团队的认真回答：

引用[http://entityframework.codeplex.com/workitem/233](http://entityframework.codeplex.com/workitem/233)：

> SqlQuery 方法旨在不考虑任何映射，包括使用属性应用的映射。它只是将结果中的列名与对象中的属性名相匹配。如果列名不匹配，您将需要使用列别名（SQL Server 中的 AS 关键字）来重命名结果中的列。
> 
> 我们同意让 SqlQuery 尊重 Column 属性的选项会很有用，因此我们将保持此问题开放并将其放在我们的积压工作中以供将来考虑。

因此，唯一的解决方法似乎是显式`AS`别名，而不是`*`在 SQL 查询中将属性名称指定为列别名：

```
return GetFromRawSql(@"
    SELECT wl.WishlistLineId AS PersistenceKey,
           wl.SomeOtherColumn AS SomeOtherProperty,
           ...
    ..."
    // ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-21T14:25:47.070

我找到了另一个非常干净的解决方案。在我的模型中，我有具有我想要使用的好名称的公共属性，以及与数据库中的名称完全相同的私有属性，并在公共属性的 getter 中返回私有值，如下所示：

```
public class KeywordsStatistic
{
    public string Keyword { get { return lib_motcle; } }
    public int NumActions { get { return nbrActions; } }

    private string lib_motcle { get; set; }
    private int nbrActions { get; set; }
} 
```

当然，如果需要更新值，则需要对其进行修改，但是原理是相同的...

高温高压

# jquery - 无法在 jQuery 中获取点击事件

> ID：12282763
> 
> 赞同：0
> 
> 时间：2012-09-05T13:37:14.740
> 
> 标签：jquery

```
<HTML>
<HEAD>
    <TITLE> New Document </TITLE>
    <script src="jquery-1.8.1.min.js" type="text/javascript"/> 
    <script type="text/javascript">
        $(document).ready(function(){  
            $('btn').click(function(){
                alert('hey'); 
            }); 
        });  
    </script>
</HEAD>
<button id="btn">click</button>
    Button to fire a event
</HTML> 
```

我无法在 IE8 上获得点击事件！我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:38:19.217

您的选择器错误

```
$('#btn').click(function(){ alert('hey'); }); }); <-- notice the pound sign 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:38:44.610

`btn`是您的元素的 ID。所以在编写 jQuery 选择器时使用**#**

```
$(function(){
  $("#btn").click(function(e){
         alert("hi");  
  });
}); 
```

工作样本：http: [//jsfiddle.net/RVJQU/](http://jsfiddle.net/RVJQU/)

```
#  -> for ID based selector(Ex:   $("#myUniqueElementID") )
.  -> For CSS Class based selector (Ex:   $(".myCssClass") ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:39:23.690

尝试这个

```
<HTML>
<HEAD>
    <TITLE> New Document </TITLE>
    <script src="jquery-1.8.1.min.js" type="text/javascript"/> 
    <script type="text/javascript">
        $(document).ready(function(){  
            $('#btn').on('click',function(){
                alert('hey'); 
            }); 
        });  
    </script>
</HEAD>
<button id="btn">click</button>
    Button to fire a event
</HTML> 
```

# c# - C# Windows 应用程序错误：嵌入式 Windows 上的 Clr20r3

> ID：12282772
> 
> 赞同：0
> 
> 时间：2012-09-05T13:37:42.570
> 
> 标签：c#, .net-4.0, windows-embedded

我有一个具有 Windows 嵌入式操作系统的单元。我可以简单地在 Windows 7 上编译和运行我的应用程序。我也曾在嵌入式 Windows 上运行我的应用程序。但是过了一会儿它开始出现异常这是它的截图。

![在此处输入图像描述](../Images/e659869c531b1ba7133b4f0ee28cb86f.png) ![在此处输入图像描述](../Images/eef33470a358064b04e925a7422a35ac.png)

有没有人知道它的一些信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-14T12:45:01.923

我从系统中卸载了使用过的 API，然后重新安装了它。它解决了。

# .net - 我应该在哪些情况下使用 System.Guid 作为唯一标识符？

> ID：12282776
> 
> 赞同：0
> 
> 时间：2012-09-05T13:37:47.750
> 
> 标签：.net, guid, uniqueidentifier, .net-4.5

在`.NET Framework 4.5`中，[System.Guid](http://msdn.microsoft.com/tr-tr/library/system.guid.aspx)表示一个全局唯一标识符。我应该在我的架构中使用**alyaws** `Guid`类作为唯一标识符吗？我应该在哪种情况下使用它？哪种情况我不应该？

任何人都可以对这种情况做出详细的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:51:35.710

我觉得这个名字很能说明问题。如果您需要某些东西是全球唯一的，以便消除所有歧义，请使用 Guid。如果您需要一个项目仅在其对等项中是唯一的，请使用简单的东西，例如串行主键。

串行主键的唯一主要优点是 (1) 支持几乎所有现有的存储介质，(2) 口头交流的简单性，以及 (3) 存储大小。

话虽如此，如果 ID 永远/很少需要手动通信/键入，并且存储不是最重要的问题（例如在与主要对象相比分类法可以忽略不计的文档库中），那么实际上并没有不使用 Guid 的充分理由。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:02:44.453

这很模糊。通常需要一个“唯一标识符”来标记数据。数据库引擎在没有您帮助的情况下已经非常擅长这样做，请始终确保首先利用它们的功能。

生成一个唯一的数字在直觉上很简单：比前一个多一个。魔鬼在细节中，前一个是什么？在很多情况下，您不想在进程会话结束后恢复编号，因此一个简单的变量就可以了。System.Guid 的价值在于它可以帮助您避免在您关心时必须解决存储问题。以产生无法形容的为代价。

# android - 在android中重新开始下载

> ID：12282778
> 
> 赞同：0
> 
> 时间：2012-09-05T13:38:02.597
> 
> 标签：android

我有一个从服务器下载文件的应用程序。下载在 Asynctask 中。我有一个显示下载进度的进度条。如果文件需要太长时间才能完成下载，我会提出取消请求。这只是关闭进度对话框，当再次单击文件时，它不会重新开始下载。我该如何处理这种情况。很多研究让我很困惑......我认为它就像下载显示下载进度 - > OnCancel，终止下载一样简单（不幸的是我找不到杀死Asynctask的方法） - > 点击文件，重新开始下载.....但是，唉，我似乎没有办法......请帮助......

这是我所做的事情的来源......

```
 class DownloadFileAsync extends AsyncTask<String, String, String> {

            @Override
            protected void onPreExecute() {
                super.onPreExecute();
            //  showDialog(DIALOG_DOWNLOAD_PROGRESS);//to test i commented
                mProgressDialog = new ProgressDialog(Shelf_books.this);
                mProgressDialog.setMessage("Downloading file..");
                mProgressDialog.setProgressStyle(ProgressDialog.STYLE_HORIZONTAL);
                mProgressDialog.setCancelable(true);
                /*mProgressDialog.setOnCancelListener(new DialogInterface.OnCancelListener() {

                    @Override
                    public void onCancel(DialogInterface dialog) {
                        // TODO Auto-generated method stub
                        mytask.cancel(true);
                    }
                });*/

                mProgressDialog.setButton(DialogInterface.BUTTON_NEGATIVE, "Cancel", new DialogInterface.OnClickListener() {

                    @Override
                    public void onClick(DialogInterface dialog, int which) {
                        // TODO Auto-generated method stub
                        mytask.cancel(true);
                    }
                });
                mProgressDialog.show();
            }

            protected void onProgressUpdate(String... progress) {
                 Log.d("kunal",progress[0]);
                 mProgressDialog.setProgress(Integer.parseInt(progress[0]));
            }

            @Override
            protected void onPostExecute(String unused) {
                dismissDialog(DIALOG_DOWNLOAD_PROGRESS);
            }

            @Override
            protected void onCancelled() {
                Log.d("kunal","cancel method");
                running = false;
            }

            @Override
            protected String doInBackground(String... arg1) {
                // TODO Auto-generated method stub
                int count;
                if(isCancelled()==false)//test
                {//test
                try{
                URL url = new URL(arg1[0]);
                URLConnection conexion = url.openConnection();
                conexion.connect();

                int lenghtOfFile = conexion.getContentLength();
                Log.d("kunal", "Lenght of file: " + lenghtOfFile);

                InputStream input = new BufferedInputStream(url.openStream());
                OutputStream output = new FileOutputStream(file);

                byte data[] = new byte[1024];

                long total = 0;

                    while ((count = input.read(data)) != -1) {
                        total += count;
                        publishProgress(""+(int)((total*100)/lenghtOfFile));
                        output.write(data, 0, count);
                    }

                    output.flush();
                    output.close();
                    input.close();
                } catch (Exception e) {
                    Log.d("kunal","exception occured");
                }
                }//test
                return null;
            }

        }
     /*creating async class ends here*/
} 
```

下面是 onExecute 的调用，这是在单击按钮时调用的......

```
public  void DownloadFile(String fileURL, File directory) {

   /*testing my code here starts */
   try {
   URL u = new URL(fileURL);
    new DownloadFileAsync().execute(fileURL);
  } catch (MalformedURLException e) {
   // TODO Auto-generated catch block
   e.printStackTrace();
  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:44:44.867

要取消`AsyncTask`，您可以调用`AsyncTask`的[取消](http://developer.android.com/reference/android/os/AsyncTask.html#cancel%28boolean%29)方法。由于您只能`execute`在 上调用一次`AsyncTask`，因此当用户想要再次尝试下载时，您必须实例化一个新的。

# php - 使用未定义的常量

> ID：12282779
> 
> 赞同：14
> 
> 时间：2012-09-05T13:38:03.243
> 
> 标签：php

运行从 Internet 下载的源代码时出现此错误。如何解决？好像是PHP版本问题。我使用 PHP 5.3。

```
[Wed Sep 05 20:31:40 2012] [error] [client 127.0.0.1] PHP Notice:  Use of undefined constant CURLOPT_RETURNTRANSFER - assumed 'CURLOPT_RETURNTRANSFER' in /home/hieugioi/Workspace/PHP/Couponic/protected/modules/location/worklets/WLocationHelper.php on line 209
[Wed Sep 05 20:31:40 2012] [error] [client 127.0.0.1] PHP Notice:  Use of undefined constant CURLOPT_CONNECTTIMEOUT - assumed 'CURLOPT_CONNECTTIMEOUT' in /home/hieugioi/Workspace/PHP/Couponic/protected/modules/location/worklets/WLocationHelper.php on line 210
[Wed Sep 05 20:31:40 2012] [error] [client 127.0.0.1] PHP Notice:  Use of undefined constant CURLOPT_TIMEOUT - assumed 'CURLOPT_TIMEOUT' in /home/hieugioi/Workspace/PHP/Couponic/protected/modules/location/worklets/WLocationHelper.php on line 211
[Wed Sep 05 20:31:40 2012] [error] [client 127.0.0.1] PHP Notice:  Use of undefined constant CURLOPT_FAILONERROR - assumed 'CURLOPT_FAILONERROR' in /home/hieugioi/Workspace/PHP/Couponic/protected/modules/location/worklets/WLocationHelper.php on line 212
[Wed Sep 05 20:31:40 2012] [error] [client 127.0.0.1] PHP Fatal error:  Call to undefined function curl_init() in /home/hieugioi/Workspace/PHP/Couponic/framework/uniprogy/extensions/curl/CURL.php on line 22
[Wed Sep 05 20:33:15 2012] [error] [client 127.0.0.1] PHP Notice:  Use of undefined constant CURLOPT_RETURNTRANSFER - assumed 'CURLOPT_RETURNTRANSFER' in /home/hieugioi/Workspace/PHP/Couponic/protected/modules/location/worklets/WLocationHelper.php on line 209
[Wed Sep 05 20:33:15 2012] [error] [client 127.0.0.1] PHP Notice:  Use of undefined constant CURLOPT_CONNECTTIMEOUT - assumed 'CURLOPT_CONNECTTIMEOUT' in /home/hieugioi/Workspace/PHP/Couponic/protected/modules/location/worklets/WLocationHelper.php on line 210
[Wed Sep 05 20:33:15 2012] [error] [client 127.0.0.1] PHP Notice:  Use of undefined constant CURLOPT_TIMEOUT - assumed 'CURLOPT_TIMEOUT' in /home/hieugioi/Workspace/PHP/Couponic/protected/modules/location/worklets/WLocationHelper.php on line 211
[Wed Sep 05 20:33:15 2012] [error] [client 127.0.0.1] PHP Notice:  Use of undefined constant CURLOPT_FAILONERROR - assumed 'CURLOPT_FAILONERROR' in /home/hieugioi/Workspace/PHP/Couponic/protected/modules/location/worklets/WLocationHelper.php on line 212
[Wed Sep 05 20:33:15 2012] [error] [client 127.0.0.1] PHP Fatal error:  Call to undefined function curl_init() in /home/hieugioi/Workspace/PHP/Couponic/framework/uniprogy/extensions/curl/CURL.php on line 22 
```

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-09-05T13:49:56.617

安装 curl，你所有的问题都会消失 :)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-07-26T14:59:54.580

安装`php5-curl`. 对于 Debian，使用

```
$ apt-get install php5-curl 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2021-04-21T12:31:50.817

首先使用此命令检查您的 php 版本

```
php -v 
```

例如返回 PHP 7.3.27-9 然后为此版本安装 curl 模块

```
sudo apt-get install php7.3-curl 
```

# maven - Jboss 7 中缺少 Jboss 5 的依赖项

> ID：12282782
> 
> 赞同：3
> 
> 时间：2012-09-05T13:38:10.013
> 
> 标签：maven, jboss, jboss7.x, jboss5.x

我正在尝试将项目从 Jboss 5 移植到 Jboss 7。我在 pom.xml 的依赖项管理下的 Maven 中有这些依赖项：

```
<dependency>
    <groupId>org.jboss.jbossas</groupId>
    <artifactId>jboss-as-system-jmx</artifactId>
    <version>5.1.0.GA</version>
    <scope>provided</scope>
</dependency>

<dependency>
    <groupId>org.jboss.jbossas</groupId>
    <artifactId>jboss-as-system</artifactId>
    <version>5.1.0.GA</version>
    <scope>provided</scope>
</dependency>

<dependency>
    <groupId>org.jboss.jbossas</groupId>
    <artifactId>jboss-as-j2se</artifactId>
    <version>5.1.0.GA</version>
    <scope>provided</scope>
</dependency> 
```

对应的 Jboss 7 依赖项是什么？

似乎 groupid 的名称已更改为 org.jboss.as 但包含的工件名称不同。它们是否包含在其他工件中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T20:59:29.740

自 JBoss 5 以来，JBoss 7 的核心被完全重写。

如果你对 jboss 系统有依赖，你可能需要重新评估它们，看看为什么你首先需要它们，以及它在 JBoss 7 中可以对应什么。

从链接搜索开始： [https](https://repository.jboss.org/nexus/index.html#nexus-search;gav~org.jboss.as~~~~) ://repository.jboss.org/nexus/index.html#nexus-search; gav~org.jboss.as~~~~ 你也可以在那里进行类名搜索。

# garbage-collection - 完全 GC，PSPermGen 未清理

> ID：12282789
> 
> 赞同：0
> 
> 时间：2012-09-05T13:38:27.967
> 
> 标签：garbage-collection

我的 Java EE 服务器一直运行良好，然后在 10 分钟内完全 gc 开始更频繁地发生，最后由于 GC 一直停止。PSPermGen 没有发布。

我的JVM设置是：

设置 JAVA_OPTS=%JAVA_OPTS% -Xms4g -Xmx4g -XX:MaxPermSize=512m -XX:NewRatio=3

> 2012-09-05T14：03：10.394+0100：94287.753：[FULL GC [PSYUNGGEN：843584K--> 0K> 0K（947200K）] -> 181521K(186944K)], 10.9564398 秒] [时间: user=286.14 sys=0.19, real=10.97 secs] 应用程序线程停止的总时间: 10.9678339 秒应用程序时间: 0.0023102 秒应用程序线程停止的总时间：0.0088344 秒应用程序时间：0.3052301 秒应用程序线程停止的总时间：0.0085634 秒应用程序时间：0.1125068 秒 2012-09-05T14:03:21.798+0100:94299.158:[Full GC [PSYoungGen:842024K->0K240K(947202) )] [ParOldGen: 3117145K->3145232K(3145728K)] 3959170K->3167641K(4092928K) [PSPermGen: 181521K->181521K(186752K)], 11.4649901 秒] [时间:user=372.58 sys=0.11, real=11.47 secs] 应用程序线程停止的总时间：11.4757898 秒应用程序时间：0.0706553 秒应用程序线程停止的总时间：0.0102510 秒应用程序时间：0.3951514 秒 2012-09-05T14： 03：33.748+0100：94311.110：[完整GC [Psyounggen：843584K--> 34503K（947200K）] ]，10.9699419 secs] [Times: user=369.43 sys=0.14, real=10.97 secs] 应用程序线程停止的总时间：10.9806713 秒应用程序时间：0.0027075 秒0706553 秒应用程序线程停止的总时间：0.0102510 秒应用程序时间：0.3951514 秒 2012-09-05T14：03：33.748+0100：94311.110：[Full GC [PSYoungGen：843584K->34503K（947200K）][ParKOldGen： ->3141687K(3145728K)] 3988816K->3176190K(4092928K) [PSPermGen: 181521K->181521K(186112K)], 10.9699419 secs] [Times: user=369.43 sys=0.14, real=10.9 应用程序线程的总时间已停止：10.9806713 秒应用时间：0.0027075 秒0706553 秒应用程序线程停止的总时间：0.0102510 秒应用程序时间：0.3951514 秒 2012-09-05T14：03：33.748+0100：94311.110：[Full GC [PSYoungGen：843584K->34503K（947200K）][ParKOldGen： ->3141687K(3145728K)] 3988816K->3176190K(4092928K) [PSPermGen: 181521K->181521K(186112K)], 10.9699419 secs] [Times: user=369.43 sys=0.14, real=10.9 应用程序线程的总时间已停止：10.9806713 秒应用时间：0.0027075 秒97秒]应用程序线程停止的总时间：10.9806713秒应用程序时间：0.0027075秒97秒]应用程序线程停止的总时间：10.9806713秒应用程序时间：0.0027075秒

任何线索可能是什么原因？内存泄漏或 JVM 可以更好地调整吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T07:08:32.963

好吧，从日志中，很少有事情是清楚的。要么系统真的需要太多内存，无法清除tenured generation，导致3.1GB的持续消耗。这部分只有你能回答。或者有内存泄漏。内存泄漏可能/不可能，因为 ole gen 已用空间恒定在 3.145GB 左右。内存泄漏通常甚至会增加。可能更多的日志可以提供帮助。如果这个因素随着时间的推移而增加，那么请放心 - 泄漏。如果恒定，则应用程序确实缺少所需的内存。

# php - 阿帕奇致命错误

> ID：12282793
> 
> 赞同：-3
> 
> 时间：2012-09-05T13:38:32.893
> 
> 标签：php

在发生致命错误之后，我们进入了 apache 错误日志。所以 IO 操作增加了，日志文件的大小也在增加。我们不知道如何找出并修复它？任何人都知道请分享我们的参考细节。

最近升级的版本：PHP 版本从 5.2.17 升级到 5.3.14 后，我们得到的只是以下错误，以前我们没有得到这个问题。

[2012 年 9 月 5 日星期三 06:41:20] [错误] [客户端 80.12.96.14] PHP 致命错误：无法在 /home/ 中重新声明 DomainNameInfo()（之前在 /home/rackapps/conflg/ltnit.lg4:261 中声明）第 515 行的 rackapps/lgconf/ltnit.lg4，参考：http://in.mc1935.mail.yahoo.com/mc/welcome?.gx=1&.tm=1346806375&.rand= [8k3tjpq0fmk8b](http://in.mc1935.mail.yahoo.com/mc/welcome?.gx=1&.tm=1346806375&.rand=8k3tjpq0fmk8b)

注意：实际上它是一个包含的文件。我们无法找到登陆的 php 文件。因为在那个文件中我们已经包含了上面的文件。我们如何找到登陆文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:46:04.340

> > PHP 致命错误：无法重新声明 DomainNameInfo()

这是一个 php 错误，而不是 apache。您在第 261 行的 lltnit.lg4 和第 515 行的 lgconf/ltnit.lg4 上定义了一个函数**DomainNameInfo() ，您再次定义了相同的函数....这是你的错....**

提示：当您使用 inlcude() / require 时，您可以交替使用函数 include_once() / require_once() 通过包含函数两次来避免错误...

# facebook - WURFL 重定向 facebook 机器人

> ID：12282795
> 
> 赞同：0
> 
> 时间：2012-09-05T13:38:40.790
> 
> 标签：facebook, wordpress, mobile, wurfl

我的页面上有 WURFL，用于将移动设备重定向到网站的移动版本。PC 被重定向到 wordpress。不幸的是，当我尝试从我的 facebook 上的 wordpress 页面发布链接时，它正在为来自移动版本的链接生成图像，链接也代表移动版本，而不是 worpress 上的具体帖子。单击 Facebook 上的提交后，它会正确重定向到完整版页面，但仍应从完整版页面生成图标（与链接标题相同）。当 facebook 服务发送请求时，如何避免重定向到移动版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T12:04:02.663

您可能想尝试使用不同的检测软件。我目前正在开发[51degrees.mobi](http://51degrees.mobi?CATReferrer=1765)的设备检测解决方案的开源 C 实现。他们那里也有开源 PHP、ASP 和 Java 解决方案的链接。在您的网站上设置和工作非常容易。

# javascript - 如何在 Javascript 中正确调用匿名函数的函数？

> ID：12282797
> 
> 赞同：0
> 
> 时间：2012-09-05T13:38:45.063
> 
> 标签：javascript, oop, inheritance, anonymous-function

这是我的代码：

```
var A = (function(){
    "use strict";

    function FetchJSON(){
        return someValue;
    }

    var Class = function(){
        // how do I correctly call FetchJSON() from inside this class definition?
    };

    return {
        Class: Class,
        fetchJson: FetchJSON
    };
})() 
```

所以基本上我使用 JSLint 来清理我的代码，我只是从 Class 对象/函数定义中调用 FetchJSON() 但 JSLint 告诉我我需要在 FetchJSON() 调用之前使用“new”这个词我想我没有。该代码在没有“新”这个词的情况下工作得很好，但 JSLint 告诉我它应该有它。这是怎么回事？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:40:50.570

调用函数 fetchJSON 而不是 FetchJSON，因此 JSLint 不认为它是构造函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:42:12.050

按照惯例，只有打算用作构造函数（即带有`new`关键字）的函数才应以大写字母开头 -有关详细信息，请参阅[此问题。](https://stackoverflow.com/questions/1564398/javascript-method-naming-lowercase-vs-uppercase)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-05T13:42:32.803

这是因为 of 的第一个字母`FetchJSON`大写，导致 JSLint 将其解释为构造函数。如果您希望尽管有警告，仍将其保持大写，您可以。

# perl - Why does SEEK_SET fail?

> ID：12282804
> 
> 赞同：0
> 
> 时间：2012-09-05T13:39:06.683
> 
> 标签：perl, yaml

When I run the below script I get

```
Can't use an undefined value as a symbol reference at ./yaml-test.pl line 52. 
```

where line 52 is

```
seek $fh, 0, SEEK_SET;   # seek back to the beginning of file 
```

The purpose of the script is to reproduce why I get corrupt yaml files, so the global file handles are suppose to be there.

My theory is that newly written yaml files are not overwritten, and therefore if the newly written yaml is smaller than the old, then old data will still be in the new yaml file.

**Question**

Can anyone see what is wrong with my script?

```
#!/usr/bin/perl

use strict;
use YAML::Syck;
use Fcntl ':flock', 'SEEK_SET';
use warnings;
use Data::Dumper;

my $acc;
my $acc_fh;

$acc->{1}{name1} = "abc";

system("rm -f test.yaml");

# write initial
open F, '>', 'test.yaml';
print F YAML::Syck::Dump($acc);
close F;

$acc->{1}{name2} = "abc";

write_yaml_with_lock($acc, $acc_fh);

$acc->{1}{name3} = "abc";

($acc, $acc_fh) = read_yaml_with_lock('test.yaml');

$acc->{1}{name4} = "abc";

write_yaml_with_lock($acc, $acc_fh);

sub read_yaml_with_lock {
    my ($file) = @_;

    open my $fh, '+<', $file or die $!;
    flock($fh, LOCK_EX) or die $!;

    my $obj = YAML::Syck::LoadFile($fh); # this dies on failure
    return ($obj, $fh);
}

sub write_yaml_with_lock {
    my ($obj, $fh) = @_;

    my $yaml = YAML::Syck::Dump($obj);
    $YAML::Syck::ImplicitUnicode = 1;
    seek $fh, 0, SEEK_SET;   # seek back to the beginning of file

    print $fh $yaml . "---\n";
    close $fh;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:43:29.617

You call `write_yaml_with_lock()` twice. The first time you call it `$acc_fh` is still `undef` because it is not set until two lines further down via `read_yaml_with_lock()`.

# c++ - Visual Studio 2012 为 C++ 使用什么编译器，它是否兼容/我可以将它与代码块一起使用吗？

> ID：12282805
> 
> 赞同：4
> 
> 时间：2012-09-05T13:39:08.417
> 
> 标签：c++, visual-studio, compiler-construction

Visual Studio 2012 用于 C++ 的编译器是什么编译器，它是否兼容/我可以将它与代码块一起使用吗？

我想知道，因为我们需要在这个学校项目中使用 Visual Studio 2012，并且我希望能够使用代码块来试用一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:46:08.867

Visual Studio 2012 使用 Microsoft 编译器 cl.exe。但无论如何，您可以维护两个项目（一个用于 Visual Studio，一个用于 CodeBlocks）——共享相同的源代码。

# php - 在控制器中使用爬虫

> ID：12282806
> 
> 赞同：6
> 
> 时间：2012-09-05T13:39:09.617
> 
> 标签：php, unit-testing, testing, symfony

```
// src/Acme/DemoBundle/Tests/Controller/DemoControllerTest.php
namespace Acme\DemoBundle\Tests\Controller;

use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class DemoControllerTest extends WebTestCase
{
    public function testIndex()
    {
        $client = static::createClient();

        $crawler = $client->request('GET', '/demo/hello/Fabien');

        $this->assertGreaterThan(0, $crawler->filter('html:contains("Hello Fabien")')->count());
    }
} 
```

这在我的测试中工作正常，但我想在控制器中也使用这个爬虫。我该怎么做？

我制作路线，并添加到控制器：

```
<?php

// src/Ens/JobeetBundle/Controller/CategoryController

namespace Acme\DemoBundle\Controller;
use Symfony\Bundle\FrameworkBundle\Controller\Controller;
use Acme\DemoBundle\Entity\Category;
use Symfony\Bundle\FrameworkBundle\Test\WebTestCase;

class CategoryController extends Controller
{   
  public function testAction()
  {
    $client = WebTestCase::createClient();

    $crawler = $client->request('GET', '/category/index');
  }

} 
```

但这返回了我的错误：

```
Fatal error: Class 'PHPUnit_Framework_TestCase' not found in /acme/vendor/symfony/src/Symfony/Bundle/FrameworkBundle/Test/WebTestCase.php on line 24 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T14:03:45.670

WebTestCase 类是一个特殊的类，设计为在测试框架 (PHPUnit) 中运行，您不能在控制器中使用它。

但是你可以像这样创建一个 HTTPKernel 客户端：

```
use Symfony\Component\HttpKernel\Client;

...

public function testAction()
{
    $client = new Client($this->get('kernel'));
    $crawler = $client->request('GET', '/category/index');
} 
```

请注意，您将只能使用此客户端浏览您自己的 symfony 应用程序。如果你想浏览一个外部服务器，你需要使用另一个客户端，比如 goutte。

此处创建的爬虫与 WebTestCase 返回的爬虫相同，因此您可以遵循 symfony[测试文档中详述的相同示例](http://symfony.com/doc/current/book/testing.html)

如果您需要更多信息，[这里](http://symfony.com/doc/current/components/dom_crawler.html)是爬虫组件的文档，[这里](http://api.symfony.com/master/Symfony/Component/DomCrawler/Crawler.html)是类参考

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:55:01.073

您不应该`WebTestCase`在`prod`环境中使用，因为`WebTestCase::createClient()`会创建测试客户端。

在您的控制器中，您应该执行以下操作（我建议您使用`Buzz\Browser`）：

```
use Symfony\Component\DomCrawler\Crawler;
use Buzz\Browser;

...
$browser = new Browser();
$crawler = new Crawler();

$response = $browser->get('/category/index');
$content = $response->getContent();
$crawler->addContent($content); 
```

# objective-c - addObject 后 NSMutableArray 为空

> ID：12282808
> 
> 赞同：8
> 
> 时间：2012-09-05T13:39:12.340
> 
> 标签：objective-c, ios, nsmutablearray

我想将一个对象添加到 NSMutableArray 中：

```
NSLog(@"Object text: %@", object.text);
NSLog(@"Object: %@", object);
[appdelegate.objects addObject:object];
NSLog(@"Objects array size: %i", [appdelegate.objects count]); 
```

这是输出：

```
Object text: This is the text
Object: <Object: 0x6e762c0>
Objects array size: 0 
```

这怎么可能，我添加了一个对象，在下一行，它仍然是空的。`NSMutableArray`is not ，因为那`nil`会引发异常。

有人猜吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-05T13:40:49.403

如果是，它不会引发异常`nil`。`nil`如果对象通常响应该消息，您仍然可以向该对象发送消息。在这种情况下，您只会得到 0。我认为您没有分配数组。确保你这样做：

```
array = [[NSMutableArray alloc] init]; 
```

作为调试提示，如果您不确定对象的状态并想确保该对象确实存在并且可以使用，请使用`assert(appdelegate.objects);`如果数组为 nil，您的代码将在此行停止执行。如果它没有停在这一行，那么您就知道该对象存在于内存中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:40:25.873

您的 NSMutableArray 确实几乎可以肯定是空的。它不会引发异常，因为`nil`在 ObjC 中发送任何消息都是无操作的，并且会像您所看到的那样运行，返回值为 0 或`nil`等。

尝试记录它以仔细检查。

# e-commerce - 这是什么电子商务应用程序？

> ID：12282809
> 
> 赞同：3
> 
> 时间：2012-09-05T13:39:13.533
> 
> 标签：e-commerce, websphere, websphere-commerce

我见过很多使用这种 URL 结构的网站：

```
webapp/wcs/stores/servlet
webapp/wcs/stores/OrderShippingDisplayView 
```

它是什么应用程序？我的客户网站的很多竞争对手都在他们的网站上使用了这个。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T13:41:26.170

# IBM WebSphere 商务

我怀疑对此投反对票的暴徒，但这里有..该应用程序是[IBM WebSphere Commerce](http://www-01.ibm.com/software/genservers/commerceproductline/)，一个基于 Java 的应用程序。非常强大的应用程序，但显然对于企业公司而言，这意味着您的客户必须准备好花大价钱。我不确定您是否可以直接向您的客户提供此功能，或者您是否需要成为 IBM 认证合作伙伴。提供呼叫中心、销售中心和完整的仓库配送控制；很棒的软件。我们使用该应用程序 - 具有多商店、多语言和多开发团队基于国家办事处的系统。起价约为 100,000 英镑

# 更新

您询问了如何证明该软件的合理性。我不想听起来粗鲁，但这个主要的电子商务软件可能超出你的价格范围：

Gartner 魔力象限 - 世界著名的电子商务贸易展将以下电子商务平台标记为领导者：

```
IBM WebSphere Commerce
ATG Commerce (Oracle)
Hybris 
```

他们[选择电子商务公司的标准](http://www.cmswire.com/cms/customer-experience/ibm-oracle-atg-hybris-top-gartners-ecommerce-magic-quadrant-013594.php)：

*   拥有至少 50 个电子商务功能的生产客户，每个客户**平均每周至少有 10,000 笔交易**
*   在过去的四个季度中，至少有 5 个新的电子商务可参考客户，以及 5 个至少经历了一次应用程序版本升级的可参考客户。
*   在过去的四个季度中，为电子商务创造了至少 500 万美元的收入。
*   已表现出积极的市场参与，包括但不限于对 Gartner 客户和潜在客户的入站客户查询。
*   在当前版本上有多个生产参考（至少 10 个），以及向新客户销售和/或营销产品的明显努力。

最重要的是，价格合理，因为它是 IBM 品牌软件。

*   它支持没有移动和表格主题的移动结帐。
*   为世界各地公司商店的人们提供信息亭系统。所有内容都进入一个具有业务分析功能的全球数据库。
*   具有多语言系统的呼叫中心和销售中心，用于跟踪和处理客户和贸易客户（B2C、B2B）
*   为多办公室、多语言和多商店提供多开发功能
*   CDN 和高级负载平衡与 SSL 和多域和 DNS 快速快速交付
*   仓储配送一体化多链多链商务

（注意：这些点，这是关于电子商务合作伙伴而不是客户，所以它说 IBM 或 Oracle 应该有至少 50 个活跃的生产客户，他们每周至少 10,000 tps 使用他们的软件）。我很惊讶[文达电子商务](http://www.venda.com)没有被提及，因为 Boohoo.com/Gorgeouscouture.com 每天收到大约 4000 个订单。）

以及更多。***应该有一个***关于此类问题的维基。WebSphere Commerce 是企业驱动的，它是为企业公司服务的，100,000 英镑的数字甚至都不是最重要的——更不用说樱桃了。积极的一面是，他们现在提供以下版本：

# 版本（6、7、8**）

```
----
Express (low) (version 7)
Professional (mid) (version 7)
Enterprise (high) (version 7)
Cloud (high - enterprise only, new for 2012) (version 7 and 8 ***)
---- 
```

6 ** WCS 6 现在是一个过时的环境，并且积极鼓励组织进行升级。8 ** 未发布 请参阅[WebSphere Commerce 8](https://stackoverflow.com/questions/11742575/ibm-websphere-commerce-8)

希望能证明这一点。

# java - 级联不适用于 Java

> ID：12282812
> 
> 赞同：4
> 
> 时间：2012-09-05T13:39:15.677
> 
> 标签：java, sqlite, cascade

我有一个带有 2 个表的 SQLite 数据库：**Quotes**和**WPList**

这两个表有这一列：

**行情**： `ID (int primary key), name (String)`

**工作表**： `ID (int primary key), ID_Quote (foreign key Quotes with cascade option), String name`

问题是，如果我使用外部工具（我使用 Navicat Essential for Mac）执行查询，则`CASCADE`工作正常，如果我删除 Quote，WPList 中所有带有他 ID 的条目都会被消除。使用 Java，这不会发生，`CASCADE`它不起作用。有什么建议吗？谢谢

编辑。

这是我使用的java代码：

```
public static void deleteQuote (int ID)
{
    try
    {
        Class.forName("org.sqlite.JDBC");
        Connection conn = DriverManager.getConnection(Global.dbPath);
        Statement stmt;

        stmt = conn.createStatement();

        stmt.execute("DELETE FROM Quotes WHERE ID=" + ID);

        stmt.close(); // rilascio le risorse
        conn.close(); // termino la connessione
    }

    catch(ClassNotFoundException e)
    {
        System.out.println(e);
    }
    catch(SQLException e)
    {
        System.out.println(e);
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:24:53.803

在您的两种情况下，您是否使用不同版本的 SQLite 库？根据[FAQ](http://www.sqlite.org/faq.html#q22)，SQLite从 3.6.19 版本开始支持*强制执行外键约束。*

如果您的 SQLite 库是在支持外键的情况下编译的，您仍然必须[按照“外键支持”文档中的说明](http://www.sqlite.org/foreignkeys.html#fk_enable)`pragma`使用语句启用此功能。您需要评估以下语句：

```
PRAGMA foreign_keys = ON; 
```

我的猜测是您的*Navicat Essential*工具启用了外键支持，但您的 Java 代码没有这样做。

# javascript - jquery 在元素中查找文本节点并用标签连接和包装

> ID：12282815
> 
> 赞同：0
> 
> 时间：2012-09-05T13:39:29.073
> 
> 标签：javascript, jquery

我是一个新手，在处理一些没有元素的文本时遇到了困难，我试图用列表标签将文本包装在标签之外：

[http://jsfiddle.net/danb/7xu6A/](http://jsfiddle.net/danb/7xu6A/)

**HTML**

```
<ul>
    <li><a href="#">item1</a></li>
    <li><a href="#">item2</a></li>
    <li><a href="#">item3</a></li>
    text <br>to wrap and combine        
    <li><a href="#">item4</a></li>
</ul> 
```

这对我有用，直到我遇到一些字符串被
标签破坏的情况——即使我取出第`<br>`一个，它们仍然是单独的节点并被包装起来。

```
$('ul').contents().remove('br')
       .filter(function()
       {
           return (this.nodeType === 3 && $.trim(this.data) !== '');
       }).wrap('<li class="nav current"></li>'); 
```

任何帮助是极大的赞赏

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:05:49.800

这是您的解决方案（假设您的 ul 在此示例中的 id 为“whatever”）

您的最终包装文本存储在变量“finaltext”中

**注意：**取消注释注释行也会从您的页面中删除文本“要换行和组合的文本”，然后还会附加“要换行和组合的文本”作为新列表项，最后，取出 br 标记！

```
var d = document.getElementById("whatever");

var nds = d.childNodes;

var finaltext = "";

$(nds).each(function(){

   var trmdvl = $.trim(this.nodeValue);

   if(trmdvl){
      finaltext += trmdvl + " ";
      //$(this).remove(); 
   }
});

//$(d).append("<li>" + $.trim(finaltext) + "</li>");
//$('br').remove(); 
```

假设的 HTML 如下：

```
<ul id="whatever">
    <li><a href="#">item1</a></li>
    <li><a href="#">item2</a></li>
    <li><a href="#">item3</a></li>
    text <br>to wrap and combine        
    <li><a href="#">item4</a></li>
</ul> 
```

# google-analytics - 使用 /__utm.gif 进行 Google Analytics（分析）事件跟踪

> ID：12282816
> 
> 赞同：0
> 
> 时间：2012-09-05T13:39:30.293
> 
> 标签：google-analytics, event-tracking

我使用此 URL 向 google-analytics 报告事件：

```
http://www.google-analytics.com/__utm.gif?utmac=UA-12345678-9&utmcc=&utmcs=UTF-8&utmhn=www.example.com&utmwv=4.8.1&utmr=http%3A%2F%2Fwww.example.coml%2Freferer&utmt=event&utme=5(Out*action*label)(1) 
```

在 Analytics 中，我定义了一个目标，例如：

```
Goal Name: Out
Goal Type: Event
Goal Details: 
Categorie is euql to: Out
Action: [no selection]
Label: [no selection]
Value: [no selection]
Goal Value: Use the actual event value 
```

但是：Analytics 中没有目标。有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-11T14:51:44.943

查看[https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting#basicDebugging](https://developers.google.com/analytics/resources/articles/gaTrackingTroubleshooting#basicDebugging)它说：

```
3\. Ensure that the utmp parameter is present.
4\. Ensure that the utmcc parameter is present and non-empty.
   In the case of an empty utmcc parameter, no cookie data is sent, and the request is ignored. 
```

看起来您的请求没有执行任何一项。

# django - 在非 Django 网站上复制/发布 Django 表单

> ID：12282819
> 
> 赞同：0
> 
> 时间：2012-09-05T13:39:55.640
> 
> 标签：django, django-forms, django-database

我有一个 django 网站，上面有捐赠表格。本网站仅处理该组织的内部捐赠。他们有一个不是 django 驱动的面向公众的网站。他们希望为公共用户提供相同的捐赠表格，以便通过其提交捐赠并将其发布到 djagno 站点数据库中。

反正有一个非 django 网站将表单数据发布到我的数据库吗？iframe 可以处理这样的事情吗？

编辑：我遇到的另一个问题是这种形式具有内置的逻辑。根据他们的地址，我触发了一个 ajax 请求，以从数据库中为选择字段提供一个可能的选择列表。所以这可能会使事情进一步复杂化

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:26:26.320

唯一的问题是 CSRF 保护。如果您实际上*想要*来自外部站点的帖子，则无法实施 CSRF。只需用 . 装饰您的表单处理程序视图即可[`csrf_exempt`](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.csrf_exempt)。

# c - getaddrinfo（WinAPI 纯 C）Visual C++ 2010 访问冲突错误

> ID：12282827
> 
> 赞同：0
> 
> 时间：2012-09-05T13:40:13.900
> 
> 标签：c, visual-studio-2010, winapi, visual-c++, winsock2

```
BOOL sendHTTPdata(char* data){
    //MessageBox(NULL,data, "aaa!",MB_ICONEXCLAMATION | MB_OK);

    char  *s=malloc(sizeof(char)*5000);
    WSADATA wsaData;
    SOCKET ConnectSocket = INVALID_SOCKET;
    struct addrinfo *result= NULL,
                    *ptr = NULL,
                    hints={0};
    char recvbuf[DEFAULT_BUFLEN];
    int iResult;
    int recvbuflen = DEFAULT_BUFLEN;

    // Initialize Winsock
    iResult = WSAStartup(MAKEWORD(2,2), &wsaData);
    if (iResult != 0) {
        //printf("WSAStartup failed with error: %d\n", iResult);
        MessageBox(NULL,"WSAStartup failed with error: %d\n", "Error!",MB_ICONEXCLAMATION | MB_OK);
        return FALSE;
    }

    memset (&hints, 0, (sizeof (hints)+1000));
    hints.ai_family = AF_UNSPEC;
    hints.ai_socktype = SOCK_STREAM;
    hints.ai_protocol = IPPROTO_TCP;
    // Resolve the server address and port
    //MessageBox(NULL,"test2", "Error!",MB_ICONEXCLAMATION | MB_OK);

    iResult = getaddrinfo("example.com","80", &hints, &result);
    //return FALSE;
    if ( iResult != 0) {
        sprintf(s, "getaddrinfo failed with error: %d\n",iResult);
        MessageBox(NULL,s, "Error!",MB_ICONEXCLAMATION | MB_OK);
        WSACleanup();
        return FALSE;
    }
    MessageBox(NULL,"test", "Error!",MB_ICONEXCLAMATION | MB_OK);
    // Attempt to connect to an address until one succeeds
    //return FALSE;
    for(ptr=result; ptr != NULL ;ptr=ptr->ai_next) {

        // Create a SOCKET for connecting to server
        ConnectSocket = socket(ptr->ai_family, ptr->ai_socktype, 
            ptr->ai_protocol);
        if (ConnectSocket == INVALID_SOCKET) {
           sprintf(s, "socket failed with error: %ld\n",WSAGetLastError());
        MessageBox(NULL,s, "Error!",MB_ICONEXCLAMATION | MB_OK);
        WSACleanup();
        return FALSE;
        }

        // Connect to server.
        iResult = connect( ConnectSocket, ptr->ai_addr, (int)ptr->ai_addrlen);
        if (iResult == SOCKET_ERROR) {
            closesocket(ConnectSocket);
            ConnectSocket = INVALID_SOCKET;
            continue;
        }
        break;
    }

    freeaddrinfo(result);

    if (ConnectSocket == INVALID_SOCKET) {
       MessageBox(NULL,"Unable to connect to server!\n", "Error!",MB_ICONEXCLAMATION | MB_OK);
        WSACleanup();
        return FALSE;

    }

    // Send an initial buffer
    iResult = send( ConnectSocket, data, (int)strlen(data), 0 );
    if (iResult == SOCKET_ERROR) {
        sprintf(s,"send failed with error: %d\n",WSAGetLastError());
        MessageBox(NULL,s, "Error!",MB_ICONEXCLAMATION | MB_OK);
        closesocket(ConnectSocket);
        WSACleanup();
        return FALSE;
    }

    //printf("Bytes Sent: %ld\n", iResult);
    sprintf(s,"Bytes Sent: %ld\n",iResult);
    MessageBox(NULL,s, "Error!",MB_ICONEXCLAMATION | MB_OK);

    // shutdown the connection since no more data will be sent
    iResult = shutdown(ConnectSocket, SD_SEND);
    if (iResult == SOCKET_ERROR) {
        //printf("shutdown failed with error: %d\n", WSAGetLastError());
        sprintf(s,"shutdown failed with error: %d\n", WSAGetLastError());
        MessageBox(NULL,s, "Error!",MB_ICONEXCLAMATION | MB_OK);

        closesocket(ConnectSocket);
        WSACleanup();
        return 1;
    }

    // Receive until the peer closes the connection
    do {

        iResult = recv(ConnectSocket, recvbuf, recvbuflen, 0);
        if ( iResult > 0 )
        {
            MessageBox(NULL,recvbuf, "success!",MB_ICONEXCLAMATION | MB_OK);
        }
        else if ( iResult == 0 )
            MessageBox(NULL,"Connection closed\n", "Error!",MB_ICONEXCLAMATION | MB_OK);
        else {
            sprintf(s,"recv failed with error: %d\n", WSAGetLastError());
            MessageBox(NULL,s, "Error!",MB_ICONEXCLAMATION | MB_OK);
        }
    } while( iResult > 0 );

    // cleanup
    closesocket(ConnectSocket);
    WSACleanup();

    return TRUE;
} 
```

当我用 Visual C++ 2010 编译它时，会出现访问冲突错误，但如果我用 Visual C++ 6.0 编译它，它就可以工作......

这是我在错误日志中可以看到的：

```
First-chance exception at 0x1027d22f (msvcr100d.dll) in Work Time Managment.exe: 0xC0000005: Access violation writing location 0x00130000.
First-chance exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
First-chance exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
First-chance exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
First-chance exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
First-chance exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
First-chance exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
First-chance exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
First-chance exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
First-chance exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
First-chance exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
Unhandled exception at 0xfefefefe in Work Time Managment.exe: 0xC0000005: Access violation reading location 0xfefefefe.
The program '[1456] Work Time Managment.exe: Native' has exited with code 0 (0x0). 
```

怎么了... ？为什么不能在 Visual C++ 2010 中使用 getaddrinfo ???? 我在我的代码中使用的这个库：

```
#define WIN32_LEAN_AND_MEAN
#define _WSPIAPI_COUNTOF
#include "windows.h"
#include "winsock2.h"
#include "ws2tcpip.h"
#include "stdio.h"
#pragma comment (lib, "Ws2_32.lib") 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:45:41.820

这是个问题：

```
memset (&hints, 0, (sizeof (hints)+1000)); 
```

因为它将写入`1000`它不应该写入的内存字节，从而导致未定义的行为。由于已经初始化，`memset()`因此不需要调用 to 。`hints`但是，正确的用法是：

```
memset (&hints, 0, sizeof(hints)); 
```

* * *

我认为问题出在代码的其他地方，`getaddrinfo()`因为我使用 VC2010 成功执行了代码。这是我使用的来源：

```
#include <winsock2.h>
#include <Ws2tcpip.h>
#include <stdio.h>
#include <string.h>

int main()
{
    WSADATA wsaData;
    struct addrinfo *result= NULL, hints={0}; 
    int iResult;

    iResult = WSAStartup(MAKEWORD(2,2), &wsaData);

    if (iResult != 0)
    {
        fprintf(stderr, "Startup failure: %d\n", iResult);
    }
    else
    {
        /* Identical behaviour with and without the memset(). 
        memset(&hints, 0, sizeof(hints)); */

        hints.ai_family = AF_UNSPEC;
        hints.ai_socktype = SOCK_STREAM;
        hints.ai_protocol = IPPROTO_TCP;

        iResult = getaddrinfo("localhost", "80", &hints, &result);
        if (0 != iResult)
        {
            fprintf(stderr, "failure: %d\n", iResult);
        }
        else
        {
            printf("Success\n");
        }

        WSACleanup();
    }
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T21:20:55.167

最后我解决了我的问题，getaddrinfo 没有用，因为我已经定义了 _WSPIAPI_COUNTOF`#define _WSPIAPI_COUNTOF`通过删除这一行一切正常......

感谢大家的回复......并试图帮助我。hmjd 代码是正确的，如果有人要在 winsock2 上编写，请使用 hmjd 以前编写的代码，但如果您不想出错，请记住不要定义 _WSPIAPI_COUNTOF :)

# java - Aflresco 如何安装附加组件 jar 文件？例如。我必须安装添加：fme-datalist-extension-share.jar

> ID：12282831
> 
> 赞同：0
> 
> 时间：2012-09-05T13:40:30.787
> 
> 标签：java, alfresco

我必须在 Alfresco 4.0 中安装数据列表扩展。我有两个文件：

1.  fme-datalist-extension-share.jar

2.  fme-datalist-extension-repository.jar

    那么现在我该如何安装这个附加组件，有人可以帮助我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:43:23.377

您应该将 fme-datalist-extension-repository.jar 放入

```
your/path/to/alfresco/tomcat/webapps/alfresco/WEB-INF/lib/ 
```

fme-datalist-extension-share.jar 应该在

```
your/path/to/alfresco/tomcat/webapps/share/WEB-INF/lib/ 
```

不要忘记重新启动。

# symfony1 - 使用 Propel 1.4 更新多行

> ID：12282832
> 
> 赞同：0
> 
> 时间：2012-09-05T13:40:34.707
> 
> 标签：symfony1, symfony-1.4, propel

我需要执行以下查询（使用 Propel 1.4/Symfony 1.4）

```
update notification
set read=1
where to=6 AND
    action=0 
```

为此，我在 symfony 1.4 中编写了以下代码

```
$c=new Criteria()
$c->add(NotificationPeer::TO, $memberId, Criteria::EQUAL);
$c->add(NotificationPeer::ACTION, 0, Criteria::EQUAL);
$notification = NotificationPeer::doSelect($c);

foreach($notification as $notice)
{
    $notice->setRead(1);
    $notice->save();
} 
```

它可以工作，但是如果有 100 条通知给任何用户，它将花费 100 条查询和不必要的服务器负载。我查看了推进的 doUpdate 方法，我想它可以为我工作，但无法弄清楚如何。

有什么办法（我知道有但我不知道）在单个查询中完成所有这些事情吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:05:56.203

您应该建立两个标准：

*   一个用于 where 子句
*   另一个用于更新子句。

```
// Build WHERE criteria
$wherec = new Criteria();
$wherec->add(NotificationPeer::TO, $memberId, Criteria::EQUAL);
$wherec->add(NotificationPeer::ACTION, 0, Criteria::EQUAL);

// Build updated field criteria
$updc = new Criteria();
$updc->add(NotificationPeer::READ, 1);

BasePeer::doUpdate($wherec, $updc, $con); 
```

它执行一个（可能很大）查询。请参阅[此片段](http://snippets.symfony-project.org/snippet/50)。

# asp.net-mvc - 从 MVC3 迁移到 MVC4 和 Azure 1.7 - 为什么 iisexpress.exe 现在出现在日志文件中

> ID：12282837
> 
> 赞同：1
> 
> 时间：2012-09-05T13:40:50.557
> 
> 标签：asp.net-mvc, asp.net-mvc-3, azure, azure-storage

我有一个 ASP MVC4 Windows Azure 应用程序。该应用程序正在运行，但自从迁移到 MVC4 和最新版本的 Azure 库后，我注意到启动时间非常慢。我检查并注意到日志文件中的以下内容：

迁移前：

```
'WaIISHost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\SMDiagnostics\v4.0_4.0.0.0__b77a5c561934e089\SMDiagnostics.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WaIISHost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.IdentityModel\v4.0_4.0.0.0__b77a5c561934e089\System.IdentityModel.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WaIISHost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.ServiceModel.Internals\v4.0_4.0.0.0__31bf3856ad364e35\System.ServiceModel.Internals.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WaIISHost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\Microsoft.VisualStudio.Diagnostics.ServiceModelSink\v4.0_4.0.0.0__b03f5f7f11d50a3a\Microsoft.VisualStudio.Diagnostics.ServiceModelSink.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'WaIISHost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\System.Transactions\v4.0_4.0.0.0__b77a5c561934e089\System.Transactions.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
Auto-attach to process '[8120] w3wp.exe' on machine 'X301' succeeded.
'w3wp.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'w3wp.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\System.Web\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Web.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled.
'w3wp.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System\v4.0_4.0.0.0__b77a5c561934e089\System.dll', Skipped loading symbols. Module is optimized and the debugger option 'Just My Code' is enabled. 
```

迁移后：

```
Microsoft.WindowsAzure.ServiceRuntime Information: 101 : Role environment . INITIALIZED
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\mscorlib\v4.0_4.0.0.0__b77a5c561934e089\mscorlib.dll'
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_32\System.Web\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Web.dll'
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System\v4.0_4.0.0.0__b77a5c561934e089\System.dll'
'WaIISHost.exe' (Managed (v4.0.30319)): Loaded 'C:\Code K\ 2\\csx\Debug\roles\WebUx\approot\bin\WebUx.dll', Symbols loaded.
'WaIISHost.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Web.Mvc\v4.0_4.0.0.0__31bf3856ad364e35\System.Web.Mvc.dll'
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Configuration\v4.0_4.0.0.0__b03f5f7f11d50a3a\System.Configuration.dll'
'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Core\v4.0_4.0.0.0__b77a5c561934e089\System.Core.dll'
'WaIISHost.exe' (Managed (v4.0.30319)): Loaded 'C:\Code K\ 2\\csx\Debug\roles\WebUx\approot\bin\EntityFramework.dll'
Microsoft.WindowsAzure.ServiceRuntime Information: 200 : 'iisexpress.exe' (Managed (v4.0.30319)): Loaded 'C:\Windows\Microsoft.Net\assembly\GAC_MSIL\System.Xml\v4.0_4.0.0.0__b77a5c561934e089\System.Xml.dll' 
```

这里的关键是，在我迁移之后，我现在在输出日志中看到许多引用 iisexpress.exe 的行

有人可以给我一些建议吗？是否有原因将其更改为 iisexpress 以及为什么启动时间慢 4-5 倍？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:58:03.473

IISExpress 是轻量级的独立网络服务器，它是 1.7 版 Windows Azure SDK 的默认网络服务器。这种变化背后的想法是，用户将拥有更大的灵活性来使用占用空间小且按需加载的 Web 服务器。

这个[论坛](http://forums.iis.net/t/1175052.aspx)很好地讨论了为什么 IISExpress 与 Full IIS 相比存在一些（4-5 次）性能问题。ScottGu[在这里](http://weblogs.asp.net/scottgu/archive/2010/06/28/introducing-iis-express.aspx)解释了使用 IISExpress 的优势，所以您一定可以看看。

根据您的理解，您可以按照@mcollier 的建议选择 IISExpress 或 Full IIS 作为 Windows Azure 应用程序的 Web 服务器。最后，如果您选择使用 IISExpress，如果您作为服务运行，您可以使其性能更好，这样会做得更好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T16:41:33.453

从 SDK 1.7（2012 年 6 月）开始，Windows Azure 计算模拟器使用 IIS Express 作为默认 Web 服务器。如果您需要/想要使用完整的 IIS，您可以切换 - [http://msdn.microsoft.com/en-us/library/windowsazure/jj156006.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj156006.aspx)

# c# - 使用 NHibernate 更新查询

> ID：12282839
> 
> 赞同：0
> 
> 时间：2012-09-05T13:41:05.767
> 
> 标签：c#, asp.net-mvc, nhibernate

我有几个关于使用 NHibernate 更新功能的问题

1.  我有具有 1:n 关系的客户和位置实体。客户拥有位置属性。在创建/更新客户实体时，我只是分配了位置属性并提交了更改。

    ```
    new Location() { Id = ViewModel.LocationId }; 
    ```

    这是正确的方法还是我需要从数据库中检索位置实体并再次附加它，如下所示

    ```
    newCust.Location = GetlocationfromDB(ViewModel.LocationId); 
    ```

2.  以及它如何与 m:n 关系一起工作。我有 order 和 orderitems 实体。因此，如果添加/删除了一个新组，我是否需要检查添加了哪个组并从 db 获取并附加它，或者只是 groupid 就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:57:24.653

1.  这不是正确的方法 - 如果您对主键具有未保存的值映射权限，它可能会起作用，但正确的方法是使用 session.Load(ViewModel.LocationId) 参见[http:// /ayende.com/blog/3988/nhibernate-the-difference-between-get-load-and-querying-by-id](http://ayende.com/blog/3988/nhibernate-the-difference-between-get-load-and-querying-by-id)

2.  有很多方法可以解决这个问题，但听起来您希望将您的关系映射为一个集合（以防止重复）而不是一个包。如果您将其映射为一个集合并将 ISet 用于关系的属性类型，则会为您处理重复项。但是，如果您使用包，则需要在自己的代码中删除重复项。同样，如果它是一个已经存在的组，您应该使用 session.Load 来获取该组。

# spring - java.lang.IllegalStateException：绑定到线程的键没有值

> ID：12282841
> 
> 赞同：4
> 
> 时间：2012-09-05T13:41:19.540
> 
> 标签：spring, hibernate, transactions, database-connection

这个问题在我们的生产服务器上时不时地发生在并发请求负载相当大的时刻（这样想，但不确定）。不幸的是，我们无法重现它以进行调试……正如您所看到的，我们`OpenSessionInViewFilter`在过滤器链中使用了它。DAO，没有注释。

我在 SpringSource Jira 问题[https://jira.springsource.org/browse/SPR-3693上阅读了有关此效果的信息，但由于我们使用 Spring 版本](https://jira.springsource.org/browse/SPR-3693)*3.1.2.RELEASE*，这似乎是一个远离修复的错误。

我将不胜感激如何重现此案例或修复它的任何想法。

事务定义没有什么特别的（但错误落在了`getTransaction`）：

```
 DefaultTransactionDefinition td = new DefaultTransactionDefinition(TransactionDefinition.PROPAGATION_REQUIRED);
    td.setIsolationLevel(TransactionDefinition.ISOLATION_DEFAULT);
    TransactionStatus status = transactionManager.getTransaction(td); 
```

错误堆栈原因：

```
java.lang.IllegalStateException: No value for key [org.hibernate.impl.SessionFactoryImpl@1ff8c2a] bound to thread ["http-apr-83"-exec-3]
    at org.springframework.transaction.support.TransactionSynchronizationManager.unbindResource(TransactionSynchronizationManager.java:209)
    at org.springframework.orm.hibernate3.SpringSessionSynchronization.suspend(SpringSessionSynchronization.java:115)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.doSuspendSynchronization(AbstractPlatformTransactionManager.java:666)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.suspend(AbstractPlatformTransactionManager.java:569)
    at org.springframework.transaction.support.AbstractPlatformTransactionManager.getTransaction(AbstractPlatformTransactionManager.java:363)
    at com.havilog.baltic.cheetah.services.RtMovementsServiceImpl.moveDone(RtMovementsServiceImpl.java:867)
    at sun.reflect.GeneratedMethodAccessor798.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.wicket.proxy.LazyInitProxyFactory$JdkHandler.invoke(LazyInitProxyFactory.java:416)
    at org.apache.wicket.proxy.$Proxy8.moveDone(Unknown Source)
    at com.havilog.baltic.cheetah.rf.visual.pages.movements.refill.EnterQuantity.setLocationQty(EnterQuantity.java:378)
    at sun.reflect.GeneratedMethodAccessor820.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.wicket.util.lang.PropertyResolver$MethodGetAndSet.setValue(PropertyResolver.java:1185)
    at org.apache.wicket.util.lang.PropertyResolver$ObjectAndGetSetter.setValue(PropertyResolver.java:641)
    at org.apache.wicket.util.lang.PropertyResolver.setValue(PropertyResolver.java:143)
    at org.apache.wicket.model.AbstractPropertyModel.setObject(AbstractPropertyModel.java:186)
    at org.apache.wicket.Component.setDefaultModelObject(Component.java:3068)
    at org.apache.wicket.markup.html.form.FormComponent.setModelObject(FormComponent.java:1498)
    at org.apache.wicket.markup.html.form.FormComponent.updateModel(FormComponent.java:1059)
    at org.apache.wicket.markup.html.form.Form$FormModelUpdateVisitor.component(Form.java:221)
    at org.apache.wicket.markup.html.form.Form$FormModelUpdateVisitor.component(Form.java:192)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:273)
    at org.apache.wicket.util.visit.Visits.visitPostOrderHelper(Visits.java:261)
    at org.apache.wicket.util.visit.Visits.visitPostOrder(Visits.java:244)
    at org.apache.wicket.markup.html.form.FormComponent.visitComponentsPostOrder(FormComponent.java:388)
    at org.apache.wicket.markup.html.form.Form.internalUpdateFormComponentModels(Form.java:1763)
    at org.apache.wicket.markup.html.form.Form.updateFormComponentModels(Form.java:1728)
    at org.apache.wicket.markup.html.form.Form.process(Form.java:900)
    at org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:757)
    at org.apache.wicket.markup.html.form.Form.onFormSubmitted(Form.java:692)
    at sun.reflect.GeneratedMethodAccessor374.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:597)
    at org.apache.wicket.RequestListenerInterface.internalInvoke(RequestListenerInterface.java:260)
    at org.apache.wicket.RequestListenerInterface.invoke(RequestListenerInterface.java:216)
    at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.invokeListener(ListenerInterfaceRequestHandler.java:248)
    at org.apache.wicket.request.handler.ListenerInterfaceRequestHandler.respond(ListenerInterfaceRequestHandler.java:234)
    at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:784)
    at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
    at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
    at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
    at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
    at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188)
    at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:244)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.springframework.orm.hibernate3.support.OpenSessionInViewFilter.doFilterInternal(OpenSessionInViewFilter.java:198)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:76)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:498)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:562)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:394)
    at org.apache.coyote.http11.Http11AprProcessor.process(Http11AprProcessor.java:284)
    at org.apache.coyote.http11.Http11AprProtocol$Http11ConnectionHandler.process(Http11AprProtocol.java:322)
    at org.apache.tomcat.util.net.AprEndpoint$SocketProcessor.run(AprEndpoint.java:1714)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:662) 
```

# powershell - 如何使用 Powershell 通过基本身份验证登录网站

> ID：12282842
> 
> 赞同：18
> 
> 时间：2012-09-05T13:41:24.297
> 
> 标签：powershell

我正在尝试使用 PowerShell 登录网站并下载文件。

但是我无法让 PS 正确传递凭据。

这是我的PS：

```
$webclient = new-object System.Net.WebClient
$webclient.Credentials = new-object System.Net.NetworkCredential("username","password","domain")
$webpage = $webclient.DownloadString("url goes here") 
```

这是我在 IE 中访问该站点时得到的登录框： ![在此处输入图像描述](../Images/0c6ff0602964ea34a1e8e032864e83e1.png)

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-05T14:56:16.507

这就是我要工作的。我相信关键部分是 CredentialCache 中的“基本”

```
$webclient = new-object System.Net.WebClient
$credCache = new-object System.Net.CredentialCache
$creds = new-object System.Net.NetworkCredential("un","pw")
$credCache.Add("url", "Basic", $creds)
$webclient.Credentials = $credCache
$webpage = $webclient.DownloadString("url") 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-12-04T23:38:49.283

如果你想使用`Invoke-WebRequest`而不是`WebClient`：

```
$securepassword = ConvertTo-SecureString "password" -AsPlainText -Force
$credentials = New-Object System.Management.Automation.PSCredential("username", $securepassword)
Invoke-WebRequest -Uri "url goes here" -Credential $credentials 
```

我的代码基于[Douglas Tarr 的这篇博客文章](http://douglastarr.com/using-powershell-3-invoke-restmethod-with-basic-authentication-and-json)。请注意，在文章中，用户名和密码被混淆了，但我已经在我的示例中修复了它们。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2016-06-09T13:03:08.780

出于某种原因，我无法让这些解决方案中的任何一个工作（在 Win 10 上使用 PowerShell 5）。由于我不经常使用 PS，这可能是一个明显的、愚蠢的情况。但是 FWIW 这就是我能够通过手动设置授权标头来使其工作的方式。

```
$url = "{url here}"
$username = "{username here}"
$password = "{password here}"

$b = [System.Text.Encoding]::UTF8.GetBytes($username + ":" + $password)
$p = [System.Convert]::ToBase64String($b)

$creds = "Basic " + $p

Invoke-WebRequest -Uri $url -Headers @{"Authorization"=$creds} 
```

无论出于何种原因，此处的其他答案确实提出了请求，但从未发送过 Authorization 标头。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-01-12T14:41:49.500

我是这样弄的

首先创建了一个包含 powershell 脚本的**download.ps1**文件，

然后通过批处理文件运行此脚本：

```
C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe -File  C:\Users\SS\Desktop\download.ps1 
```

**这是 PowerShell 脚本：**

```
 $Username = 'Domain\user'
    $Password = 'pass'
    $Url = "http://google.com/target/filename.zip"
    $Path = "C:\path\to\downloaded\file\filename.zip"
    $WebClient = New-Object System.Net.WebClient
    $WebClient.Credentials = New-Object System.Net.Networkcredential($Username, $Password)
    $WebClient.DownloadFile( $url, $path ) 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-05T14:37:49.577

你所拥有的应该可以工作（在其他一些网站上尝试代码）。通常，无效的用户名/密码会导致代码失败并出现 401 错误（不是 Windows 安全登录窗口）。该问题可能与需要[Windows 集成身份验证的网站有关](https://stackoverflow.com/questions/1030177/system-net-webclient-doesnt-work-with-windows-authentication)

# cells - Aspose.Cells .NET：将 6.0.1 升级到 7.3.1，WorkBookDesigner.SetDataSource() 失败

> ID：12282844
> 
> 赞同：1
> 
> 时间：2012-09-05T13:41:26.777
> 
> 标签：cells, aspose, aspose-cells

场景：通过两次调用WorkBookDesigner.SetDataSource(DataSet)添加两个DataSet，每个DataSet都有一个客户的DataTable，DataTable有不同的名字。

**6.0.1：工作正常**

**7.3.1：异常**

测试方法 Nirvana.Reporting.Engines.Aspose.Tests.Cells.AsposeCellsEngineTests.Execute_Report_NoTemplate_TemplateTypeDesigner_FormatXLS_ReturnsEmptySpreadSheet 抛出异常：Nirvana.Reporting.Core.ReportExecutionException：执行报告“CustomerList”时发生错误---> System.ArgumentException：已添加项目。在字典中键入：'PHONENUMBERS' 正在添加的键：'PHONENUMBERS'

```
System.Collections.Hashtable.Insert(Object key, Object nvalue, Boolean add)
System.Collections.Hashtable.Add(Object key, Object value)
Aspose.Cells.WorkbookDesigner.SetDataSource(DataTable dataTable)
Nirvana.Reporting.Engines.Aspose.Cells.AsposeCellsEngine.AssignDataSourcesToWorkbookDesigner(IReport report, WorkbookDesigner designer) in C:\Workspaces\ja38524\KBC.ServiceOrganisation\Framework\Trunk\Source\Nirvana.Solution\Nirvana.Reporting.Engines.Aspose\Cells\AsposeCellsEngine.cs: line 344
Nirvana.Reporting.Engines.Aspose.Cells.AsposeCellsEngine.ExecuteDesignerReport(IReport report) in C:\Workspaces\ja38524\KBC.ServiceOrganisation\Framework\Trunk\Source\Nirvana.Solution\Nirvana.Reporting.Engines.Aspose\Cells\AsposeCellsEngine.cs: line 298
Nirvana.Reporting.Engines.Aspose.Cells.AsposeCellsEngine.Execute(Guid reportInstanceId, IReport report) in C:\Workspaces\ja38524\KBC.ServiceOrganisation\Framework\Trunk\Source\Nirvana.Solution\Nirvana.Reporting.Engines.Aspose\Cells\AsposeCellsEngine.cs: line 103
Nirvana.Reporting.Engines.Aspose.Cells.AsposeCellsEngine.Execute(Guid reportInstanceId, IReport report) in C:\Workspaces\ja38524\KBC.ServiceOrganisation\Framework\Trunk\Source\Nirvana.Solution\Nirvana.Reporting.Engines.Aspose\Cells\AsposeCellsEngine.cs: line 120
Nirvana.Reporting.Engines.Aspose.Tests.Cells.AsposeCellsEngineTests.Execute_Report_NoTemplate_TemplateTypeDesigner_FormatXLS_ReturnsEmptySpreadSheet() in C:\Workspaces\ja38524\KBC.ServiceOrganisation\Framework\Trunk\Source\Nirvana.Solution\Nirvana.Reporting.Engines.Aspose.Tests\Cells\AsposeCellsEngineTest.cs: line 188 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-06-01T07:55:35.013

这个问题看起来像一个回归，但它可能会在最新版本中得到解决。因此，您应该尝试最新版本：Aspose.Cells for .NET 8.4.2，看看它是否有任何不同。

*注意：我在 Aspose 担任开发人员布道师*

# jquery - Nivo 滑块每次都会重新加载图像

> ID：12282845
> 
> 赞同：1
> 
> 时间：2012-09-05T13:41:27.493
> 
> 标签：jquery, jquery-plugins, jquery-selectors, nivo-slider

Nivo 滑块每次滑动该图像时都会重新加载图像，在 localhost 上完美运行，但是当我将它托管在服务器（apache）中时，它会以这种方式运行。我通过函数调用（一次）而不是在正文加载时调用 nivo 滑块。不要与 ajax 调用混淆。仅在单击按钮后调用此函数，并在从请求中检索到的数据上调用滑块。

```
 function call_to_refresh_results()
    {
$.ajax({
    url:url_to_send,
    async:true,
    success:function(data){ 
    $("#fetched_view_for_event").empty();

    $("#fetched_view_for_event").html(data);
    $("#slider").nivoSlider({
   directionNav: false, // Next & Prev navigation
    directionNavHide: true, // Only show on hover
    controlNav: false, // 1,2,3... navigation
    controlNavThumbs: false, // Use thumbnails for Control Nav
    pauseOnHover: true, // Stop animation while hovering
    manualAdvance: false, // Force manual transitions
    prevText: 'Prev', // Prev directionNav text
    nextText: 'Next'
                                    });
    }
});
    } 
```

# c# - 如何确保同一个线程将调用服务器机器中的 com+ 组件

> ID：12282850
> 
> 赞同：4
> 
> 时间：2012-09-05T13:41:37.003
> 
> 标签：c#, .net, com, remoting, com+

我在远程机器的 COM+ 应用程序中公开了一个 COM dll。

该组件公开了 2 个功能，

1.  初始化
2.  进程命令。

这个 COM 组件有一个规则，即对 ProcessCommand 的请求应该总是从调用 Initialise 方法的同一个线程中调用（这实际上初始化了几个内部组件）。因此，在远程处理方面，当从客户端机器调用时，我如何确保使用同一个线程来调用服务器中的两种方法。服务器组件中的任何配置都可以帮助我实现这一目标吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T13:20:18.333

做到这一点的方法是使用与 COM+ 组件相同的客户端“实例”。换句话说，不要*实例化，调用 Initialize，discard*，然后*重新实例化，调用 ProcessCommand，discard*。每个客户端“实例”对应一个服务器端线程。

# .net - 用于创建和更新操作的 Asp.net ViewModel

> ID：12282852
> 
> 赞同：0
> 
> 时间：2012-09-05T13:41:49.920
> 
> 标签：.net, asp.net-mvc, asp.net-mvc-4, viewmodel

在 ASP.NET MVC 应用程序中，每个控制器操作是否有不同的 ViewModel，或者所有操作都有一个共享的 ViewModel。

例如，如果我有一个带有 List 和 Create 操作的用户控制器，我应该有一个 UserViewModel，还是应该有一个 CreateUserViewModel 和 ListUsersViewModel？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:44:43.770

由于列出所有用户和创建/编辑用户是不同的事情，您可能需要 2 个不同的视图。但是，您可以在创建用户和编辑用户之间创建和共享编辑模型/视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:54:15.150

如果它们将具有几乎相同的属性，那么可以共享。如果没有，则创建 2。老实说，我通常最终会分享。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-08T15:24:48.453

这取决于您在视图中需要哪些信息。如果他们使用完全相同的信息，那么共享 ViewModel 就可以了。如果其中一个具有与另一个相同的所有信息，再加上更多，那么您可以让一个继承另一个，如下所示：

```
public class ListViewModel
{
    public string Username { get; set; }
    public string Email { get; set; }
}

public class CreateViewModel : ListViewModel
{
    public bool AcceptedTOA { get; set; }
} 
```

有了这样的东西，您可以在创建视图中访问所有三个值，但只能`Username`在`Email`列表视图中访问。

编辑：添加更多选项...

除了继承，您还可以将它们放在彼此内部，例如

```
public class CreateViewModel
{
    public ListViewModel ListViewModel { get; set; }
    public bool AcceptedTOA { get; set; }
} 
```

..然后在您的视图中您会像...

```
@Model.ListViewModel.Username 
```

# android - LinearLayout 和 Webview 在 ScrollVIew 中的大小不同

> ID：12282858
> 
> 赞同：1
> 
> 时间：2012-09-05T13:42:16.300
> 
> 标签：android, webview, scrollview

我有以下视图树：

*   相对布局
    *   滚动视图
        *   相对布局
            *   网络视图
            *   LinearLayout (rightOf webview)

加载网页后，我需要 LinearLayout 与 WebView 具有相同的高度。我怎样才能做到这一点？

我正在使用的布局 xml

```
<ScrollView android:id="@+id/scroll_view" android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:fadingEdge="none" >

    <RelativeLayout android:layout_width="fill_parent" android:layout_height="fill_parent"
            android:orientation="vertical">

        <RelativeLayout android:id="@+id/view_touchbutton" android:layout_width="50dp" android:layout_alignParentRight="true"
                      android:layout_height="fill_parent" android:background="@drawable/next_page_white" android:layout_alignParentTop="true"
                      android:gravity="center_horizontal">
            <ImageView android:layout_width="wrap_content" android:layout_height="wrap_content"
                       android:layout_marginTop="300dp"
                       android:src="@drawable/sipka_dalsi"
                       android:contentDescription="sipka"/>
        </RelativeLayout>

        <ImageView android:layout_width="fill_parent" android:layout_height="wrap_content"
                   android:id="@+id/imageview_content" android:contentDescription="image"
                   android:src="@drawable/bezobrazku_clanek" android:scaleType="fitXY"/>

        <LinearLayout android:id="@+id/layout_info_box" android:layout_width="fill_parent" android:layout_height="fill_parent"
                      android:layout_alignBottom="@id/imageview_content" android:background="#aa000000"
                android:orientation="vertical" android:gravity="left|center_vertical" android:visibility="gone">

        </LinearLayout>

        <ImageButton android:id="@+id/button_info_box_switch" android:layout_alignLeft="@id/imageview_content" android:layout_alignBottom="@id/imageview_content"
                android:layout_width="wrap_content" android:layout_height="wrap_content" android:layout_margin="20dp" android:src="@drawable/info" android:background="@null"/>

        <View android:id="@+id/view_red_divider" android:layout_width="fill_parent" android:layout_height="4dp" android:background="#990505" android:layout_below="@id/imageview_content"/>

        <WebView android:layout_width="fill_parent" android:layout_height="fill_parent" android:layout_toLeftOf="@id/view_touchbutton"
                 android:id="@+id/webview" android:layout_below="@id/view_red_divider" android:fitsSystemWindows="true"/>

    </RelativeLayout>
</ScrollView>

<LinearLayout android:id="@+id/layout_splash_screen" android:layout_width="fill_parent" android:layout_height="fill_parent"
              android:gravity="center_horizontal|center_vertical" android:background="#ecece7" android:visibility="gone" >

    <ProgressBar style="?android:attr/progressBarStyleInverse" android:layout_width="wrap_content" android:layout_height="wrap_content"
                 android:indeterminate="true" android:paddingRight="8dp" />
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:47:27.743

更改您的`RelativeLayout`身份 `LinearLayout`并将**WebView**和**LinearLayout**的权重设置为 `android:layout_weight="1"`

# codeigniter - 代码点火器datamapper orm模型与相关对象的继承

> ID：12282866
> 
> 赞同：2
> 
> 时间：2012-09-05T13:42:53.083
> 
> 标签：codeigniter, orm, datamapper

我正在使用 Codeigniter 2.1.2 中的 DataMapper ORM：

我有这种实体：

```
Person
-id             PRIMARY KEY
-name
-lastname
-age

Student
-person_id      PRIMARY KEY
-college
-notebook_color
-other attribute

Address
-id             PRIMARY KEY
-street
-number
-person_id 
```

注意：学生没有自己的 PK。它使用 Person 的 ID 作为 PK。

所以我的问题是。我想创建一个学生：

```
$student = new Student();
$student->get_by_person_id($id); 
```

我想`$student`从 中获取所有数据`person`，包括地址。我尝试使用 include_related() 从 中获取字段`person`，但这并没有带来相关的对象。我希望我的`$student`样子：

```
$student                  ->id
                          ->name
                          ->lastname
                          ->age
                          ->college
                          ->notebook_color
                          ->other_attribute
                          ->address (array)
                             [0]    -> id
                                    -> street
                                    -> number

                             [1]    -> id
                                    -> street
                                    -> number 
```

我怎样才能让它工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T20:01:49.903

你不能有一个名为“person_id”的PK。Datamapper 要求将所有 PK 称为“id”。并且 FK 应该由它们的关系名称来调用，并以 '_id' 为后缀。所以地址中的 FK 应该称为“student_id”。

此外，Datamapper 不支持复合。所以没有办法合并来自 Person 和 Student 的记录。

# jquery - 将类添加到不同 url 上的元素

> ID：12282868
> 
> 赞同：0
> 
> 时间：2012-09-05T13:43:05.410
> 
> 标签：jquery, url, addclass

试图找到一个简单的脚本来为另一个页面上的元素添加一个类。

我想单击 .this-tab 并将 .selected 类添加到另一个页面上的相应选项卡。如果我单击 .that-tab 我想将 .selected 添加到另一页上的相应选项卡中。

我需要使用 cookie 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:47:46.817

只需使用 hashchanged 事件来实现您想要的，例如：第一个选项卡有 href="linktopage#select_first_tab"，在该页面分析哈希跟踪并选择适当的选项卡。

# windows-installer - 从 VS 2010 的安装项目安装

> ID：12282873
> 
> 赞同：1
> 
> 时间：2012-09-05T13:43:11.767
> 
> 标签：windows-installer, setup-project

我试图在安装较新的 MSI 期间自动卸载现有版本的 MSI。

我参考了 N 篇文章和博客，它们涉及升级代码、产品代码、安装项目的属性（如 RemovePreviousVersions、DetectNewerInstalledVersion、版本）、来自 AssemblyInfo 文件的 DLL 版本（AssemblyFileVersion）等......

使用这些信息，我有一个解决方案来完成上述任务。但是，在这种情况下，维护是这种方法的一个问题。

我从 Visual Studio 中观察到的另一项操作执行相同的任务。这完全执行了我需要的活动，并且我已经将问题框定如下。请对此查询有所了解...

"*通过右键单击 VS 2010 中的安装项目来执行“安装”操作，卸载旧版本的产品（无论 RemovePreviousVersions 属性的值如何），然后继续安装最新版本。当 MSI 为用于安装（尽管 RemovePreviousVersions 属性设置为 TRUE）。只是想知道在以前的安装过程中触发了哪些操作或命令，以便可以使用代码以某种方式应用相同的操作或命令*“

希望这个问题是明确和直接的..让我知道任何输入..提前一百万

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T07:19:25.727

“安装”操作使用[Windows Installer API](http://msdn.microsoft.com/en-us/library/windows/desktop/aa369426%28v=vs.85%29.aspx)在启动当前安装程序之前手动卸载旧版本。您不需要复制它，因为 Windows Installer 支持主要升级。如果自动升级对您不起作用，则某处存在错误。

[使用Orca](http://msdn.microsoft.com/en-us/library/windows/desktop/aa370557%28v=vs.85%29.aspx)检查两个 MSI 包，看看它们是否具有相同的 UpgradeCode。此外，ALLUSERS 属性应该在它们中具有相同的值。最后，尝试创建[详细日志](http://setupanddeployment.com/debugging/msi-log/)并搜索**FindRelatedProduct**和**RemoveExistingProducts**操作以查看旧版本会发生什么。

# web-applications - 使用 Oauth 实现应用程序时的授权概念冲突

> ID：12282879
> 
> 赞同：0
> 
> 时间：2012-09-05T13:43:22.727
> 
> 标签：web-applications, oauth, authorization, oauth-2.0, crud

这主要是措辞问题。但尽管这是一个非常重要的问题，它可能会导致对更大团队维护的大型代码库的误解。假设我们有一个带有身份验证系统的非常基本的 CRUD/RESTful 应用程序。在这种情况下，尝试完成数据更改请求（POST/PUT）的经过身份验证的用户将被服务器识别（身份验证），然后检查该识别用户是否有权创建/更新资源问题（**授权**）。

现在假设我将实现 Oauth 协议，以便在稍后阶段支持某种 Web API 解决方案。在这种情况下，来自客户端应用程序 A 的用户将不得不请求资源提供者的**授权**才能做某事。

所以到目前为止，我们在同一个应用程序中有两个有效的**授权概念。**在应用程序级别这不是什么大问题，因为我们可以将这两个概念包含在相关的命名空间中，但是在数据库中，我有两个**不能**共享名称的有效候选人**authorizations**。

由于我不是命名空间表名称的忠实拥护者，因此我想就可能重命名其中一个表名提出建议（或者您可能已经实施的其他一些疯狂的解决方案）。

切里奥

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-09T00:39:21.937

或者只是用更具描述性的名称作为 `oauthgrants`前缀？： 和. 这可能会违反您关于命名空间的规则，但会更具描述性。 `authorizations``user_authorizations``app_user_authorizations`

`user_authorizations`或者`authorizations`只是允许用户在系统内执行的操作。

`app_user_authorizations`或者`oauthgrants`拥有用户通过 OAuth 授予第三方应用程序的权限。它将存储：用户 ID、OAuth 2.0 客户端 ID、授予的范围、刷新令牌（如果存在）、到期（如果存在）。它还可能具有访问令牌，具体取决于您实现它们的方式（或者它们可能在另一个表中或未存储，因为它们是加密可验证的）

# database - 是否可以在具有 foreach 条件的单元格中显示多个项目？

> ID：12282885
> 
> 赞同：2
> 
> 时间：2012-09-05T13:43:34.243
> 
> 标签：database, asp.net-mvc-3, database-design

![我有什么和我想要什么](../Images/8fb7aabd439e72f21b6eebb579437edc.png)

我认为用图片来形象化比解释我想要的更容易。**有什么办法可以让一张桌子看起来像图片上的第二张？**现在我是第一个，但我遇到的问题是我的表是这样动态填充的：

```
@model IEnumerable<MyApp.Models.OrderDetail>
@foreach (var item in Model)
{
    <tr>

        <td align="center">
            @Html.DisplayFor(modelItem => item.OrderId)
        </td>

        <td>
         @Html.DisplayFor(modelItem => item.Order.Username)          
        </td>
        <td>
         @Html.DisplayFor(modelItem => item.Order.ClientID)          
        </td>

        <td>
         @Html.DisplayFor(modelItem => item.Order.SiteNumber)          
        </td>   

        <td>
           @{
            if (item.Pack == null)
            {
                   @Html.DisplayFor(modelItem => item.Product.Name) 
            }
            else
            {
                 <text>Pack</text>
                 @Html.DisplayFor(modelItem => item.Pack.Name)
            }
            }    
        </td>

        <td>
            @if (item.Pack == null)
            {
                @Html.DisplayFor(modelItem => item.UnitPrice)
            }
            else
            {
                @Html.DisplayFor(modelItem => item.UnitPricePack)
            }
        </td>

        <td align="center">
            @Html.DisplayFor(modelItem => item.Quantity)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.Order.Total)
        </td>

        <td>
            @Html.DisplayFor(modelItem => item.Order.OrderDate)
        </td>
    </tr>  
    ..... 
```

除了接口，我在互联网上一无所获，但在我的水平上似乎有点复杂，如果我使用它，我必须更改我的所有代码。一个主意 ？我接受所有建议，谢谢你的帮助

这是我的模型：

订单详细信息

```
 public class OrderDetail
    {
        public int OrderDetailId { get; set; }
        public int OrderId { get; set; }
        public int ProductId { get; set; }
        public int PackId { get; set; }
        public int Quantity { get; set; }

        [Range(0.00, 100000.00)]
        public decimal UnitPrice { get; set; }

        [Range(0.00, 100000.00)]
        public decimal UnitPricePack { get; set; }

        public virtual Product Product { get; set; }
        public virtual Pack Pack { get; set; }
        public virtual Order Order { get; set; }

        public virtual List<Product> Products { get; set; }
        public virtual List<Pack> Packs { get; set; }
    } 
```

产品

```
 public class Product
    {
        [ScaffoldColumn(false)]
        public int      ProductId   { get; set; }

        [DisplayName("Pack")]
        public int      PackId      { get; set; }

        [Required(ErrorMessage="blabla")]
        [StringLength(160)]
        [DisplayName("Nom")]
        public string   Name        { get; set; }

        [DisplayName("Description")]
        [StringLength(200)]
        public string   Description { get; set; }

        [Required(ErrorMessage="blabla")]
        [Range(0.00, 10000.00, ErrorMessage="blabla")]
        [DisplayName("Prix")]
        public decimal   Price       { get; set; }

        public virtual Pack     Pack  { get; set; }

        public virtual List<OrderDetail> OrderDetails { get; set; }
    } 
```

和我的包模型

```
 public class Pack
    {
        [ScaffoldColumn(false)]
        public int      PackId      { get; set; }

        [DisplayName("blabla")]
        public string   Name        { get; set; }

        [DisplayName("blabla")]
        public string   Description { get; set; }

        [Required(ErrorMessage="blabla")]
        [Range(0.00, 10000.00, ErrorMessage="blabla")]
        [DisplayName("Prix")]
        public decimal  Price { get; set; }

        public List<Product> Products { get; set; }
        public virtual List<OrderDetail> OrderDetails { get; set; }
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:01:09.000

假设你有这样的 ViewModel

```
public class OrderViewModel
{
  public int OrderID { set;get;}
  public string UserName { set;get;}
  public int UserID { set;get;}
  public List<OrderItem> Products { set;get;}
  public decimal OrderTotal { set;get;}
}

public class OrderItem
{
  public string ProductID { set;get;}
  public string ProductName { set;get;}
  public decimal UnitPrice { set;get;}
  public int Quantity { set;get;}
} 
```

现在在你看来

```
@model List<OrderViewModel>
@foreach(var order in Model)
{
  <tr>
     <td>@order.OrderID</td>
     <td>@order.UserName</td>
     <td>
        <ul>
        @foreach(var item in order.Products)
        {
          <li>@item.ProductName</li> 
        }
        </ul>
     </td>
     <td>
        <ul>
        @foreach(var item in order.Products)
        {
          <li>@item.Quantity</li> 
        }
        </ul>
     </td>
     <td>
        <ul>
        @foreach(var item in order.Products)
        {
          <li>@item.UnitPrice</li> 
        }
        </ul>
     </td>
     <td> 
         @order.OrderTotal
     </td>
 </tr>    
} 
```

# algorithm - O(n) 算法，找到缺失的整数

> ID：12282890
> 
> 赞同：0
> 
> 时间：2012-09-05T13:43:52.853
> 
> 标签：algorithm, data-structures, big-o

数组 A 包含 [0, n-1] 范围内的 n-1 个唯一整数，也就是说，该范围内有一个数字不在 A 中。设计一个 O(n) 算法来找到该数字。除了数组 A 本身之外，只允许使用 O(1) 额外空间。

这个问题需要一些帮助，

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-05T13:45:06.617

1.  对数组求和。
2.  [使用算术级数公式](http://en.wikipedia.org/wiki/Arithmetic_progression#Sum)计算预期总和

给定这些值：一个是`0 + 1 + 2 + ... + n-1`，另一个是实际元素的总和 - 想想它们之间的区别，一个有什么，另一个没有。确保你知道它，答案是微不足道的。

**编辑：（**理论评论）：
注意`sum(array)`需要`2*log_2(max(arr))`位。因此，如果您的元素都是 32 位整数，那么您最多需要 64 位来表示总和。
从纯粹的理论方法 - 它不是`O(1)`。但是，您可以使用数组本身（它包含更多`2*log_2(max(arr))` 位）来存储总和。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:53:55.623

使用一个用 -1 初始化的附加`tmp`变量，然后使用`tmp`as position对数组进行排序`n`：

```
function find_missing(array)
begin
  tmp := -1
  i := 0;
  while i<length(array)
    if (array[i] = -1) or (array[i] = i) then
      // either on a cell with the right number or 
      // a candiate for the missing number, just go on
      i := i + 1
    else if array[i] = n then
      // use tmp as the nth cell
      array[i]=tmp
      tmp=n
    else
      // swap the value of the current cell with the value
      // of the cell were the value i should be
      swap(array, i, array[i])
    end if
  end while
end 
```

-1 应该指向丢失的数字。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-06T17:10:32.907

这是另一种方法：

1.  用 0 设置一个临时变量 Number
2.  对于数组中的每个元素，设置 Number = Number XOR element
3.  对于每个数字 M，M > N 和 M < 2**(ceil(log2(N)) 设置 Number = Number XOR M
4.  缺少号码是号码

# java - Android AndEngine 问题：java.lang.IllegalArgumentException: No EGLConfig Found

> ID：12282901
> 
> 赞同：3
> 
> 时间：2012-09-05T13:44:27.873
> 
> 标签：java, android, andengine

晚上好！

我一直在修补 AndEngine 以在 Android 中进行游戏开发。我试图运行一个使用 AndEngine 的 Tower of Hanoi 游戏应用程序，但是当我在模拟器中运行它时，上述错误一直在运行。这是LogCat：

```
09-05 21:34:00.948: D/dalvikvm(633): No JNI_OnLoad found in   /data/data/com.tutorial.towerofhanoi/lib/libandengine.so 0x4101f730, skipping init
09-05 21:34:01.017: D/AndEngine(633): TowerOfHanoiActivity.onResume @(Thread: 'main')
09-05 21:34:01.067: I/dalvikvm(633): threadid=3: reacting to signal 3
09-05 21:34:01.137: I/dalvikvm(633): Wrote stack traces to '/data/anr/traces.txt'
09-05 21:34:01.207: D/libEGL(633): Emulator without GPU support detected. Fallback to software renderer.
09-05 21:34:01.207: D/libEGL(633): loaded /system/lib/egl/libGLES_android.so
09-05 21:34:01.238: W/dalvikvm(633): threadid=12: thread exiting with uncaught exception (group=0x409c01f8)
09-05 21:34:01.297: E/AndroidRuntime(633): FATAL EXCEPTION: GLThread 85
09-05 21:34:01.297: E/AndroidRuntime(633): java.lang.IllegalArgumentException: No EGLConfig found!
09-05 21:34:01.297: E/AndroidRuntime(633):  at org.andengine.opengl.view.ConfigChooser.chooseConfig(ConfigChooser.java:183)
09-05 21:34:01.297: E/AndroidRuntime(633):  at org.andengine.opengl.view.ConfigChooser.chooseConfig(ConfigChooser.java:157)
09-05 21:34:01.297: E/AndroidRuntime(633):  at android.opengl.GLSurfaceView$EglHelper.start(GLSurfaceView.java:1009)
09-05 21:34:01.297: E/AndroidRuntime(633):  at android.opengl.GLSurfaceView$GLThread.guardedRun(GLSurfaceView.java:1362)
09-05 21:34:01.297: E/AndroidRuntime(633):  at android.opengl.GLSurfaceView$GLThread.run(GLSurfaceView.java:1216)
09-05 21:34:01.309: D/gralloc_goldfish(633): Emulator without GPU emulation detected.
09-05 21:34:01.497: D/AndEngine(633): TowerOfHanoiActivity.onPause @(Thread: 'main')
09-05 21:34:03.867: I/Process(633): Sending signal. PID: 633 SIG: 9 
```

受错误影响的代码行位于 AndEngine 库本身，尤其是这一行：

```
 throw new IllegalArgumentException("No " + EGLConfig.class.getSimpleName() + " found!"); 
```

屏幕截图显示了我正在构建的目标。它是 API15 Android 4.0.3

![在此处输入图像描述](../Images/258469c3b2978efe56aeda24c2130bdd.png)

我该如何补救？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T15:54:56.640

我认为问题出在这条线上

`09-05 21:34:01.207: D/libEGL(633): Emulator without GPU support detected. Fallback to software renderer.`

重新创建或编辑您的模拟器，并确保在您拥有的硬件列表下

`GPU Emulation` 设置 `Yes`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-29T12:03:34.223

我有这样的问题。我的解决方案（需要编辑 AVD）：

1.  启用“使用主机 GPU”
2.  我将 CPU/ABI 更改为“Intel Atom (x86)”
3.  我将目标从 API 级别 17 更改为 API 级别 15 (Android 4.0.3)

它有效！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-16T06:54:34.993

您需要启用模拟器 GPU。

要在 Eclipse 中执行此操作，请转到 Window > AVD Manager 选择您的 AVD 并单击“编辑...”，选中“使用主机 GPU”框，然后保存并重新启动您的 AVD。

# c# - CoreAudio OnVolumeNotification 事件订阅导致 explorer.exe 中 CPU 使用率过高

> ID：12282906
> 
> 赞同：7
> 
> 时间：2012-09-05T13:44:35.637
> 
> 标签：c#, .net, wpf, windows, audio

**背景：**在 Windows Vista 及更高版本中，使用扩展的[核心音频 API](http://www.codeproject.com/Articles/18520/Vista-Core-Audio-API-Master-Volume-Control)（由 Ray Molenkamp 和 Xavier Flix 编写）通过订阅 DefaultAudioEndpoint 的 OnVolumeNotification 并在音量发生变化时设置音量来强制音量级别。

**问题：**功能上是成功的，但是一旦注册了对 OnVolumeNotification 的订阅，CPU 往往会固定在 30-50%，具体取决于 CPU 的功率。在使用 Process Explorer 和 Process Monitor 进行大量挖掘后，发现 explorer.exe 和有时 svchost.exe 会被注册表读取调用消耗。我不确定哪个注册表项。我不相信我以有害的方式订阅此事件，因为我仔细管理订阅 - 它只被解雇一次。

**强制卷的逻辑过程**

1.  取消订阅端点 OnVolumeNotification
2.  设置端点体积标量属性（立即生效）
3.  订阅端点 OnVolumeNotification

Core Audio API 中涉及的底层 win32 方法是[RegisterControlChangeNotify](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368050(v=vs.85).aspx)和[UnregisterControlChangeNotify](http://msdn.microsoft.com/en-us/library/windows/desktop/dd368067(v=vs.85).aspx)。问题是否可能是由这些或事件订阅的实现引起的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T19:16:52.163

而不是：

1.  退订
2.  改变音量/设置静音
3.  重新订阅

我修改了我的逻辑，基本上使用属性中的逻辑和支持字段来管理何时更新。它并不完美，但它非常接近，它不会占用任何 CPU，并且它允许从完全支持 INPC 的滑块进行外部输入。

```
public EndpointVolumeEnforcer() {
  try {
    mmDeviceEnumerator = new MMDeviceEnumerator();
    mmDevice = mmDeviceEnumerator.GetDefaultAudioEndpoint(EDataFlow.eRender, ERole.eMultimedia);
    audioEndpointVolume = mmDevice.AudioEndpointVolume;
    audioEndpointVolume.OnVolumeNotification += data => {
      VolumePercent = Convert.ToInt16(data.MasterVolume*100);
      DeviceIsMuted = data.Muted;
    };
    DesiredVolume = 65;
  }
  catch (Exception ex) {
    // Logging logic here
  }
}

public int DesiredVolume {
  get { return _desiredVolume; }
  private set {
    if (_desiredVolume == value) return;
    _desiredVolume = value;
    NotifyOfPropertyChange();
    Enforce(_desiredVolume);
  }
}

public int VolumePercent {
  get { return volumePercent; }
  private set {
    if (volumePercent == value) return;
    volumePercent = value;
    if (volumePercent != _desiredVolume) {
      volumePercent = _desiredVolume;
      Enforce(volumePercent);
    }
  }
}

public void Enforce(int pct, bool mute = false) {
  var adjusted = Convert.ToInt16(audioEndpointVolume.MasterVolumeLevelScalar*100);
  if (adjusted != DesiredVolume) {
    audioEndpointVolume.MasterVolumeLevelScalar = pct/100f;
  }
} 
```

# eclipse - 将 RCP 透视布局提取回 IDE

> ID：12282913
> 
> 赞同：0
> 
> 时间：2012-09-05T13:45:04.997
> 
> 标签：eclipse, rcp, perspective

这可能是一厢情愿的想法，但我想我会问并希望幸运：

我有一个带有一些复杂布局的 Eclipse RCP 应用程序。有没有办法在透视图中手动布局视图/编辑器并将该布局导出回插件，所以我不必旋转每个 plugin.xml 文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:13:54.750

您应该使用[Window Builder Pro](https://developers.google.com/java-dev-tools/download-wbpro)，它甚至可以布置 Eclipse 透视图。

# java - javac 给出一个错误信息，它已经被找到

> ID：12282915
> 
> 赞同：0
> 
> 时间：2012-09-05T13:45:11.860
> 
> 标签：java, linux, ubuntu, javac

当我键入`java -version`以下内容时返回：

```
java version "1.6.0_24"
OpenJDK Runtime Environment (IcedTea6 1.11.1) (6b24-1.11.1-4ubuntu2)
OpenJDK Server VM (build 20.0-b12, mixed mode) 
```

但是当我输入时，`javac -version`我收到以下消息：

```
The program 'javac' can be found in the following packages:
* openjdk-6-jdk
* ecj
* gcj-4.4-jdk
* gcj-4.6-jdk
* gcj-4.5-jdk
* openjdk-7-jdk
Try: sudo apt-get install <selected package> 
```

为什么是这样 ？我需要做什么才能摆脱这个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:48:10.577

您已经安装了包含*执行java 程序的东西的 java 运行时环境 (jre)，但没有安装包含**构建*此类应用程序的东西的 java 开发工具包 (jdk)，例如编译器。因此，如消息告诉您的那样，安装其中一个软件包，例如

```
sudo apt-get install openjdk-7-jdk 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:49:59.860

该`java`命令执行已编译为 .class 文件（Java 字节码）的程序，它只是运行时环境。

`javac`是Java编译器。它将 Java 源代码转换为 Java 字节码（.class 文件）。

这两个是独立的程序，因为典型用户只需要 runtime( `java`) 而不需要`javac`。

您需要安装列出的软件包之一（最好是 openjdk-6-jdk。因为它将与您的 java 安装兼容）。

# php - php变量变量静态方法

> ID：12282916
> 
> 赞同：0
> 
> 时间：2012-09-05T13:45:11.737
> 
> 标签：php, class, variables, object, static

我有这个代码：

```
$node = new Node(); 
```

现在我想让“节点”对象动态
我从我的配置类中获取动态名称，这有效：

```
$var = Config::instance('modules/activities/config')->get('className');
$node = new $var(); 
```

但是我怎么能在 1 行中写这个呢？
这不起作用：

```
$node = new Config::instance('modules/activities/config')->get('className')(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:54:40.223

这是 PHP 5.4 的新语言特性

*添加了对实例化的类成员访问，例如 (new Foo)->bar()*

请参阅[http://docs.php.net/manual/en/migration54.new-features.php](http://docs.php.net/manual/en/migration54.new-features.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T13:52:48.207

我的同事帮助了我，我在我的助手类中做了一个静态函数：

```
public static function factory($name = '',  $var = NULL)
{
    $object = new $name((isset($var)) ? $var : '');
    return $object;
} 
```

现在这是我的代码（可能看起来有点乱）：

```
$node = Helper::factory(Config::instance('modules/activities/config')->get('className'), $var); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:56:28.257

如果您修改实例方法使其返回对象，您应该能够使用该语法。就像是 ：

```
public static function instance()
{
    if (!self::$instance)
        self::$instance = new new Config();
    return self::$instance;
} 
```

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2012-09-05T13:48:13.793

简单的。要将它们写在 1 行中，请不要在它们之间使用换行符，如下所示：

```
$var = Config::instance('modules/activities/config')->get('className');$node = new $var(); 
```

# hadoop - 无法使用 Mapreduce 将数据加载到 Htable

> ID：12282917
> 
> 赞同：1
> 
> 时间：2012-09-05T13:45:11.783
> 
> 标签：hadoop, mapreduce, hbase

我对 Hbase 和 Hadoop 很陌生。我对 MapReduce 概念感到困惑，我想知道 Mapreduce F/w 中的执行流程。我尝试在 Google 上搜索一种从文件中读取数据并`Put`使用 reducer 的类将数据加载到 Htable 中的方法。我在 HDFS 中有一个文件，我需要从 Hbase Mapreduce 读取该文件并将数据加载到 Htable 中。

谁能告诉我我哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-13T18:11:27.063

不要使用减少步骤。在您的地图类中，当您获得一条记录时，将其直接插入 HBase。在将 put 发送到 HBase 之前，无需对 put 进行洗牌/排序。这意味着您所要做的就是为您的 HTable 创建一个实例变量并在 setup 方法中对其进行初始化；然后在您的地图方法中，为您的记录创建一个放置，并将其添加到您的 HTable。最后，在你的清理方法中，确保你刷新了你的 HTable。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-18T07:38:16.977

您可以使用没有 reducer 的 Mapper。因为reducer可以用于排序，你只需要将文件数据直接存储在Hbase中。

# javascript - javascript对象原型与jquery冲突？

> ID：12282918
> 
> 赞同：0
> 
> 时间：2012-09-05T13:45:15.653
> 
> 标签：javascript, jquery, object, prototypal-inheritance

我正在尝试实施[此处](http://www.coolpage.com/developer/javascript/Correct%20OOP%20for%20Javascript.html)提供的解决方案，但显然与此[票](http://bugs.jquery.com/ticket/262)中所述的 jquery 冲突。

到目前为止我还没有找到解决方案，有什么想法吗？

我想实现Shelby Moore提出的继承机制

这可能是问题的原因，扩展 Object 原型：

```
Object.prototype.Inherits = function(parent)
{
    if(arguments.length > 1)
    {
        parent.apply(this, Array.prototype.slice.call(arguments, 1));
    }
    else
    {
        parent.call(this);
    }
} 
```

**编辑1**：经过广泛阅读后，我采用了以下模式：

```
NewFunction.prototype = Object.create(new FunctionToInheritFrom()); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T14:20:40.940

扩展 Object.prototype 扩展了所有对象，因此如果您修改所有对象的原型，您可以阻止它们所需的行为，这就是为什么应该避免直接修改为对象原型的原因。更好的做法是扩展自定义函数原型，以确保不会破坏其他原型，即由 jQuery 等框架提供。甚至表示 DOMElements 的对象也会被修改，这通常是一个坏主意。

尽管如此，我还是想提一下，Javascript 本身并没有定义真正的继承，试图解决这个问题会导致很多问题，并使其更难以开发。Javascript 中的继承是基于原型的继承，这与真正的继承不同，面对这一事实并使用 Javascript 自己的方法进行“类似继承”（即[此处](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Inheritance_Revisited)描述）是直截了当的并且效果很好。

对我来说，Javascript 继承更像是合并对象成员，关于这方面的一篇非常好的文章是[douglas crockford 的一篇](http://www.crockford.com/javascript/inheritance.html)，我认为值得一读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:30:47.033

我无法重现这个东西..它工作正常[检查这个](http://jsfiddle.net/gxduA/) 代码很简单像这样

```
Object.prototype.Inherits = function(parent)
{
    if(arguments.length > 1)
    {
        parent.apply(this, Array.prototype.slice.call(arguments, 1));
    }
    else
    {
        parent.call(this);
    }
}
    $(document).ready(function(){
        $('input').click(function(){
     alert();
     });
    }); 
```

​</p>

# c# - 无法将 Exam_Mapper 的类型转换为 IMapper 的类型

> ID：12282923
> 
> 赞同：2
> 
> 时间：2012-09-05T13:45:28.373
> 
> 标签：c#, asp.net, casting

我正在**ASP.NET Web 应用程序中做一个项目。** 我不能将对象转换为接口。这是我的代码：

```
str2 = myXmlTextReader.ReadInnerXml();  
Type myTypeObj = testAssembly.GetType(str2);  
Object obj = Activator.CreateInstance(myTypeObj);  
Imapper EM = (Imapper)obj; 
```

在 Windows 窗体应用程序中，我没有任何问题。下面的代码也返回空值：

```
Imapper EM = obj as Imapper; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:48:54.590

Your `Exam_Mapper` type needs to implement `IMapper` in order for the code to work. It apparently does not. Either that or you have two types, `IMapper` and `Imapper` (you use both names in your question; possible typo), and you're confusing the two.

**Update** try this simple example, and see if it works:

```
interface ITest { }
class Test : ITest { }
//in a method
Object obj = new Test();
ITest test = (ITest)obj; 
```

Now compare to your situation. What's the difference?

# c# - 是否可以在 WP7 上使用阿拉伯语作为资源“文化语言”？

> ID：12282926
> 
> 赞同：1
> 
> 时间：2012-09-05T13:45:52.730
> 
> 标签：c#, silverlight, windows-phone-7, silverlight-4.0

我了解 WP7 支持有限数量的语言作为本地化的文化，但 Silverlight 本身支持更多语言，所以我的问题是我可以让文化信息接受“任何来自支持的语言”的参数，并在资源文件字符串中写下我自己的“需要”来支持语言在这种情况下，在我的应用程序中它是阿拉伯语？？换句话说，文件 resource.fr.resx 并提供带有阿拉伯数据的字符串？会通过认证吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-08T11:17:59.777

对于 Windows Phone 7，我编写了一个映射函数，将阿拉伯语编码 [windows-1256] 映射到默认的 WP7 编码。

```
public static string ConvertToArabic(string s)
        {
            short[] mapping = { 0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41, 42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 68, 69, 70, 71, 72, 73, 74, 75, 76, 77, 78, 79, 80, 81, 82, 83, 84, 85, 86, 87, 88, 89, 90, 91, 92, 93, 94, 95, 96, 97, 98, 99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112, 113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 8364, 1662, 8218, 402, 8222, 8230, 8224, 8225, 710, 8240, 1657, 8249, 338, 1670, 1688, 1672, 1711, 8216, 8217, 8220, 8221, 8226, 8211, 8212, 1705, 8482, 1681, 8250, 339, 8204, 8205, 1722, 160, 1548, 162, 163, 164, 165, 166, 167, 168, 169, 1726, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 1563, 187, 188, 189, 190, 1567, 1729, 1569, 1570, 1571, 1572, 1573, 1574, 1575, 1576, 1577, 1578, 1579, 1580, 1581, 1582, 1583, 1584, 1585, 1586, 1587, 1588, 1589, 1590, 215, 1591, 1592, 1593, 1594, 1600, 1601, 1602, 1603, 224, 1604, 226, 1605, 1606, 1607, 1608, 231, 232, 233, 234, 235, 1609, 1610, 238, 239, 1611, 1612, 1613, 1614, 244, 1615, 1616, 247, 1617, 249, 1618, 251, 252, 8206, 8207, 1746 };

        string str = string.Empty;
        for (int ix = 0; ix < s.Length; ++ix)
        {
            str = str +  (char)mapping[s[ix]];
        }
        return str;
    } 
```

这对我来说非常有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:17:22.643

Windows Phone 7 不支持阿拉伯语字符集（但 Windows Phone 8 支持）。

一些应用程序已经使用自定义字体解决了这个问题，但这种方法需要大量仔细的测试。

# objective-c - 大图像上的 CIImage 和 CIFilters

> ID：12282927
> 
> 赞同：2
> 
> 时间：2012-09-05T13:45:52.867
> 
> 标签：objective-c, macos, image, opengl, core-image

我有大图像（至少我觉得它很大。我想在上面应用 CIFilters。我的图像大小是 3200x2000。但问题是应用过滤器时，我的应用程序变得非常滞后。我的意思是过滤速度很慢具有该尺寸的图像。如果我对较小的图像执行相同的操作，则效果很好。所以我认为这可能是我如何实现它的问题。对吗？

顺便说一句，我的图像处理是这样完成的：

`NSImage -> NSBitmapImageRep -> OpenGL texture -> Draw to screen -> some OpenGL drawing on it -> NSBitmapImageRep -> CIImage -> CIFilter -> CIImage -> NSBitmapImageRep -> OpenGL texture -> Draw to screen`

仅应用过滤器时：

`NSBitmapImageRep -> CIImage -> CIFilter -> CIImage -> NSBitmapImageRep -> OpenGL texture -> Draw to screen`

部分在行动。会是慢的原因吗？

# css - javascript中的文本对齐问题

> ID：12282928
> 
> 赞同：0
> 
> 时间：2012-09-05T13:45:53.763
> 
> 标签：css

我想以以下格式构建图例：使用最小值，分隔，最大值

例如 -

> 10-20
> 
> 20-30
> 
> 30-40

问题是：

1.我没有成功对齐文本。我希望最小值将在正确的位置，分隔将在中心，最大值将在左侧。

2.我需要数字将是对齐的，例如

```
 0 - 20
10000 - 3000
20000 - 40000
30000 - 500000

var legendWrapper = $('<div />');
legendWrapper.addClass('legendWrapper')
parentElement.appendChild(legendWrapper.get(0));
legend.addClass('legend')

for (var index = 0; index < self.legendData.getSubElementLength(); index++) {

    var legendItem = $('<div />');
    legendItem.addClass('legendItem')
    if (index == self.legendData.getSubElementLength() - 1) legendItem.addClass('lastLegendItem');

    var color = $('<span />');
    color.addClass('legendColor')
    legendItem.get(0).appendChild(color.get(0));

    var minValue = $('<span />');
    minValue.addClass('minValue')
    legendItem.get(0).appendChild(minValue.get(0));

    var separated = $('<span />');
    separated.addClass('separated');
    legendItem.get(0).appendChild(separated.get(0));

    var maxValue = $('<span />');
    maxValue.addClass('maxValue')
    legendItem.get(0).appendChild(maxValue.get(0));

    legend.get(0).appendChild(legendItem.get(0));
}
$('.legendWrapper').get(0).appendChild(legend.get(0)); 
```

CSS：

```
.legendWrapper {    

}

.separated {
    text-align: center;
}

.minValue {
    text-align: left;        
}
.maxValue {
    text-align: right;
}

.legend {
    background-color: black;
    position: fixed;       
    opacity: 0.7;
    margin: 10px;
    padding: 5px;
    width: 150px;
    height: 100px;
    clear: both;        
    right: 80px;
    top: 800px;
}

.legendColor {
    height: 12px;
    width: 12px;
    margin-right: 3px;
    float: left;     
    color: white;        
    opacity: 1;   
}

.legendItem {
    color :white; 
    height: 20px;       
    opacity: 1;
} 
```

当我将 text-align 添加到`legendItem`它时，它会对齐文本，但它会对齐所有跨度，我想按跨度对齐跨度。

你能告诉我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:56:27.587

```
.separated {
    width:30px;
    margin:0 auto:
}

.minValue {
   float: right;
   width: 50px;
   text-align:left; 
}
.maxValue {
    float: left;
    width: 50px;
    text-align:right;
}
.legendItem{
    clear:both;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:58:11.570

希望我正确地阅读了您的问题....

更改添加跨度的顺序：

```
var maxValue = $('<span />');
maxValue.addClass('maxValue')
legendItem.get(0).appendChild(maxValue.get(0));

var separated = $('<span />');
separated.addClass('separated');
legendItem.get(0).appendChild(separated.get(0));

var minValue = $('<span />');
minValue.addClass('minValue')
legendItem.get(0).appendChild(minValue.get(0)); 
```

Span 是内联元素，因此它们将按照您将它们添加到 DOM 的顺序排列。

您可以取出所有 text-align 属性，因为如果排序解决了您的问题，您似乎不需要它们。

**编辑：**

```
<div class="con">
    <div class="lft">MAX_VAL</div>
    <div class="sep"> - </div>
    <div class="rgt">MIN_VAL</div>
</div>

.con {overflow:hidden;}
.lft {width:100px; float:left; text-align:right; }
.sep { float:left; }
.rgt {width:100px; float:left; text-align:left; } 
```

# jquery - jquery 修改一个特定的 li 元素只知道它在列表中的位置

> ID：12282933
> 
> 赞同：1
> 
> 时间：2012-09-05T13:46:17.163
> 
> 标签：jquery, css, web

我有一个简单的清单：

```
<ul>
    <li></li>
    <li></li>
    <li></li>
    <li></li>
</ul> 
```

我需要修改其中一个 li 元素，我只知道它在列表中的位置，例如 2 将是第三个 li 元素）。我怎样才能只知道这一点就给它添加一个类？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-05T13:47:13.250

使用[`.eq()`](http://api.jquery.com/eq/)，它将指定的索引（从 0 开始）作为参数：

```
$("ul li").eq(2).addClass("yourClass"); 
```

**[演示](http://jsfiddle.net/8vXU4/)**。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:47:57.397

或内联：

```
$("ul li:eq(2)").html("Add some content") 
```

来源：[http ://api.jquery.com/eq-selector/](http://api.jquery.com/eq-selector/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:48:19.753

您可以使用该`.eq`函数来指定所需的索引：

```
$('ul').children().eq(2) 
```

将指向第三项（索引从 0 开始，所以 2 是第三项）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T13:50:50.300

试试这个

***HTML***

```
<ul>
    <li>item1</li>
    <li>item2</li>
    <li>item3</li>
    <li>item4</li>
</ul> 
```

***JS***

```
$('ul').children().eq(2).addClass('newclass'); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-05T13:51:01.750

以下任何一项都将返回您的第二个`<li>`元素。

1.  `$('ul li:eq(3)')`
2.  `$('ul>li:eq(3)')`
3.  `$('ul li').eq(3)`
4.  `$('ul>li').eq(3)`
5.  `$('ul li').filter(function() { return $(this).index() == 3; })`
6.  `$('ul>li').filter(function() { return $(this).index() == 3; })`

# c++ - C ++ Boost库 - 将共享指针传递给函数

> ID：12282935
> 
> 赞同：0
> 
> 时间：2012-09-05T13:46:18.700
> 
> 标签：c++, boost, shared-ptr, scoped-ptr

假设可以按如下方式创建共享指针

```
typedef boost::shared_ptr<Employee_t> srdpointer;     
srdpointer ptr((Employee_t*)malloc(sizeof(Employee_t)),std::ptr_fun(free)); 
```

我需要传递共享指针，它将分配由 ptr 指向的内存。像这样的东西。

```
void allocateBlocks(int **ptr, int *cnt)
{
    *ptr = (int*)malloc(sizeof(int) * 10);
    *cnt = 10;
    /*do something*/ 
}

int main()
{
    int *p = NULL;
    int count = 0;
    locateBlocks(&p, &count);

    /*do something*/

    free(p);
} 
```

如何使用`shared_ptr`上面的代码实现类似的功能。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-05T13:51:20.617

Do you mean something like this?

```
void allocateBlocks( boost::shared_ptr<int>& out, int& count )
{
  out.reset(new int[...]);
  count = 10;
} 
```

PS: I suggest having a look at boost::shared_array<> & friends for just allocating arrays dynamically.

PS: Would an std::vector<> also do?

# php - mssql_connect() 与 PHP5 和 MSSQL2012 Express

> ID：12282936
> 
> 赞同：2
> 
> 时间：2012-09-05T13:46:20.037
> 
> 标签：php, sql-server

我在尝试连接到我的 MSSQL 2012 Express 数据库时遇到严重问题，PHP5 在 Apache 上运行。作为测试设置，我刚刚安装了一个带有 PHP 5.4.4 的 XAMPP 和在 Windows 7 机器上运行的 Apache。

我的 PHP 代码（phpmssql_genxml.php）：

```
$connection = mssql_connect('192.168.40.150', $username, $password);
if (!$connection) {  die('Not connected : ' . mssql_get_last_message());} 

$db_selected = mssql_select_db($database, $connection);
if (!$db_selected) {
  die ('Can\'t use db : ' . mssql_get_last_message());
} 

$query = "SELECT * FROM Cust WHERE 1";
$result = mssql_query($query);
if (!$result) {  
  die('Invalid query: ' . mssql_get_last_message());
} 
```

尝试进入站点时的输出：

```
Fatal error: Call to undefined function mssql_connect() in C:\xampp\htdocs\phpmssql_genxml.php on line 13 
```

即使我尝试将用户名和密码硬编码到字符串中，我仍然得到相同的结果。在谷歌上搜索了很多，但还没有找到解决我的问题的帖子：/已经为数据库实例管道启用了 TCP/IP，甚至尝试为其分配一个特定的 TCP 端口。在 Win7 防火墙中创建了一条规则，允许所有流量到标准端口 1433。仍然没有运气。

any1有什么想法吗？“致命错误”部分是什么意思？尝试连接时是 Apache 错误、PHP 还是数据库错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-06T05:37:33.377

您的 PHP 设置中缺少 MSSQL 驱动程序。假设您具有页面上提到的所需系统配置，请从[此处下载。](http://www.microsoft.com/en-us/download/details.aspx?id=20098)

根据他们的说明进行设置：

> 1.  将 SQLSRV30.EXE 下载到临时目录
> 2.  运行 SQLSRV30.EXE
> 3.  出现提示时，输入 PHP 扩展目录的路径
> 4.  解压文件后，阅读 SQLSRV30_Readme.htm 文件的安装部分以了解后续步骤

如果您打算使用 MSSQL，我还建议您使用标准的 Apache + PHP 安装，而不是任何 *AMP 包。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-23T11:05:34.523

您不需要使用 SQLSRV30，因为这不是我需要的解决方案，尽管有些人可能会觉得它很有用。我有一个运行 XAMPP + php5.5.9 + MSSQL2012 的本地开发环境，我需要使用 mssql 函数，因为这就是我们在服务器上使用的。所以我使用 freetds 并且“幸运地”发现了这个：

[https://moodle.org/mod/forum/discuss.php?d=232844](https://moodle.org/mod/forum/discuss.php?d=232844)

其中一位用户已经为我的 php 版本编译了 php_dblib.dll TS 和 NTS，这足以说明我一切正常，并使用了我们开发团队习惯的所有 MSSQL 函数。始终可以编译 mssql 支持的扩展。

# visual-studio-2008 - 如何在 Crystal Reports 中调整线条对象的大小

> ID：12282937
> 
> 赞同：0
> 
> 时间：2012-09-05T13:46:20.673
> 
> 标签：visual-studio-2008, crystal-reports, resize

我正在使用 VS 2008，并且我使用 VS 2008 附带的水晶报告制作了一份报告。

我在我的报告中使用了一个框对象，然后我在字段之间使用了线条对象，以便最终报告可能显示为网格。

但我的线是相互交叉的。我正在尝试通过在鼠标的帮助下拖动双箭头来减少线条的长度，但不知何故我无法获得我想要的精确长度。它要么变短要么超过边界，我希望它在另一条线上完成！

我正在尝试通过水晶报表查看器在 ASP.NET 网页中查看它

![在此处输入图像描述](../Images/7d3f0604183c1c03ffb18e372f6ad575.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T07:28:25.137

Well it can be done !
Open your Report in VS2008\. Select the line which u want to reduce the height.
Go to property window. There you can see the propreties "Top", "Bottom", "Left", "Right".
By adjusting the values in those properties, you can fit the line as your wish.
For your ref : [Possible Duplicate Question](https://stackoverflow.com/questions/8551371/issue-related-to-vertical-line-in-crystal-reports/9029471)

Hope this will fix your problem, if not pls comment.

# iphone - 如何从 iphone 应用程序查看应用程序目录

> ID：12282938
> 
> 赞同：0
> 
> 时间：2012-09-05T13:46:23.220
> 
> 标签：iphone, xcode

我试图找出如何从我的 iphone 应用程序中查看应用程序目录。有没有办法在 xcode 中查看我的应用程序的文件夹结构？

感谢您的任何提示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T14:08:52.957

你可以看到一个包（.app）：

1.  Ctrl + 单击 Xcode 项目导航器中的 .app。
2.  选择“在 Finder 中显示”
3.  Ctrl + 单击 Finder 中的 .app 文件
4.  选择“显示包装内容”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T14:06:58.903

您必须在模拟器中运行它，然后检查文件夹：

```
~/Library/Application Support/iPhone Simulator/ 
```

您使用过的每个 iOS 版本都会有一个子文件夹。进入你正在使用的当前iOS版本的文件夹，会有一个名为Applications的子文件夹，里面会有很多名字很奇怪的子文件夹。一个一个地检查它们，直到找到包含您的应用程序的那个:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-06T01:00:27.843

只是想尝试回答。如何记录它，如下所示：

```
 //App Directory & Directory Contents
   NSString *appFolderPath = [[NSBundle mainBundle] resourcePath];
   NSFileManager *fileManager = [NSFileManager defaultManager];  
   NSLog(@"App Directory is: %@", appFolderPath);
   NSLog(@"Directory Contents:\n%@", [fileManager directoryContentsAtPath: appFolderPath]); 
```

或者

Xcode 内部：

*   窗口 > 管理器 > 项目
*   选择项目
*   “Derived Data”有一个小箭头，它会显示Finder中的位置

![在此处输入图像描述](../Images/7c89c1f7fa87a1d871c954f25ba9d240.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-05T14:19:34.823

您必须先存档您的项目：

```
Select the device instead of the simulator (you don't have to plug a device in first).
Go to: Product -> Archive.
Open your Organizer (right upper corner).
Go to the Archive and right-click on your archived project, click on "Show in Finder". 
```

在您选择项目时，在管理器中，xcode 会告诉您应用程序在应用商店中的大小。实际尺寸如果是显示的一半。

# objective-c - UIPopover 中的空表视图

> ID：12282939
> 
> 赞同：2
> 
> 时间：2012-09-05T13:46:24.280
> 
> 标签：objective-c, ios, ipad, uitableview, uipopovercontroller

我在使用 UIPopover 内的 TableView 时遇到了一些困难，该表只是空的，即使它是一个静态表视图。

代码：

```
- (IBAction)settingsBtnPressed:(id)sender {
if(self.pop.isPopoverVisible) {
    [self.pop dismissPopoverAnimated:YES];
} else {
    //SettingsViewController *s = [[SettingsViewController alloc] init];
    SettingsViewController *s = [self.storyboard instantiateViewControllerWithIdentifier:@"settings"];
    s.brain = self.brain;
    self.pop = [[UIPopoverController alloc] initWithContentViewController:s];
    [self.pop setPopoverContentSize:CGSizeMake(400, 500)];
    [self.pop presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionUp animated:YES];
}
} 
```

附上截图：

![IB 中定义的分组静态表视图控制器。](../Images/1fff38c0549610690d84aa3f17296f6f.png) ![结果我得到了。](../Images/21a0436ecc188733f5e1f429ab97dcb1.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:19:47.230

您是否实现了和之类`cellForRow:atIndex:`的方法？`numberOfSections:inTableView:``numberOfRows:inSection`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-17T13:02:19.867

也许你没有使用`UITableViewController`，而是`UIViewController`在你的头文件中。

# c# - Silverlight 图像加载问题

> ID：12282943
> 
> 赞同：2
> 
> 时间：2012-09-05T13:46:48.430
> 
> 标签：c#, visual-studio-2010, silverlight, asynchronous

我根本无法同步加载 Silverlight 图像。ImageOpened 一切都很好，但如果我在允许执行应用程序之前加载 20 个纹理，它并没有真正帮助我！您不能使用线程，因为它会导致多个跨域/跨线程异常。我已经解决了，但我很好奇其他人是如何解决这个问题的。

我的要求是将 jpeg / png / 任何内容加载到像素数组中，正如我所说，异步选项是不行的，因为我在开始渲染之前需要像素。

帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:53:16.753

你没有说，从哪里加载 jpeg / png / 什么。如果来自资源，您可以尝试先加载到 BitmapImage，但不能通过 UriSource 属性。只需使用方法 SetSource() - 对我来说它会立即加载图像。

例如：

```
using System.Windows.Media.Imaging;
using System.Windows.Resources;

BitmapImage bmp = new BitmapImage();
Uri uri = new Uri("/SilverlightApp1;component/Resources/foto.jpg", UriKind.Relative);
StreamResourceInfo sri = Application.GetResourceStream(uri);
bmp.SetSource(sri.Stream);
Image image = new Image();
image.Source = bmp; 
```

# mobile - 什么是 NFC 动态标签，它们与加密和未加密的 NFC 标签有何不同？这些是标签类型 1-4 的进一步分类吗？

> ID：12282948
> 
> 赞同：1
> 
> 时间：2012-09-05T13:47:07.507
> 
> 标签：mobile, nfc

我可以找到 NFC 类型 1、类型 2 标签等的结果，但我找不到任何关于 NFC 动态标签、加密和未加密 NFC 标签的信息。

任何人都可以在这里解释并为我提供源的相关链接吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-10T07:43:08.817

索尼有一个他们称之为“动态标签”的产品[FeliCa Plug](http://www.sony.net/Products/felica/business/products/RC-S801_802.html)。我不知道任何其他具有类似功能的产品。

除了 NFC Forum Type 1/2/3/4 Tag 功能之外，一些 NFC 标签还提供其他功能，例如身份验证和加密通信。然而，这种功能的细节可以被认为是专有的，因为它不是标准化的。例子：

*   NXP MIFARE Ultralight C：兼容 Type 2 标签，还提供密码保护
*   Sony FeliCa：兼容 Type 3 Tag，还提供身份验证和加密
*   NXP DESFire：Type 4 Tag 兼容，还提供身份验证和加密

不过，此类标签的详细信息通常只能在 NDA 下获得。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-02-25T05:43:21.720

动态NFC标签也称为双接口标签，同时支持I2C和无线。比如TI的RF430CL330H，可以用I2C修改标签，比如Arduino板。参考[https://www.indiegogo.com/projects/dnfc-tag-nfc-that-interacts-with-microcontroller#/](https://www.indiegogo.com/projects/dnfc-tag-nfc-that-interacts-with-microcontroller#/)

# windows - 如何使用 Delphi 启动应用程序并获取它的句柄？

> ID：12282952
> 
> 赞同：5
> 
> 时间：2012-09-05T13:47:17.780
> 
> 标签：windows, delphi, winapi

我想从 Delphi 启动一个应用程序，并获得它的句柄，所以我可以将所述应用程序的主窗口嵌入到 TFrame 类型的框架上。到目前为止，我已经尝试过：

```
Function TFrmEmbeddedExe.StartNewApplication : Boolean;
var
  SEInfo: TShellExecuteInfo;
  ExitCode : DWORD;
begin

  FillChar(SEInfo, SizeOf(SEInfo), 0) ;
  SEInfo.cbSize := SizeOf(TShellExecuteInfo) ;
  with SEInfo do
  begin
    fMask := SEE_MASK_NOCLOSEPROCESS;
    Wnd := self.Handle;
    lpFile := PChar(self.fexecuteFileName) ;//  Example could be 'C:\Windows\Notepad.exe'
    nShow := SW_SHOWNORMAL;//SW_HIDE;
  end;

  if ShellExecuteEx(@SEInfo) then
  begin
    sleep(1500);
    self.fAppWnd := FindWindow(nil, PChar(self.fWindowCaption)); //Example : 'Untitled - Notepad'
    if self.fAppWnd <> 0 then
    begin
      Windows.SetParent(self.fAppWnd, SEInfo.Wnd);
      ShowWindow(self.fAppWnd, SW_SHOWMAXIMIZED);
      result := true;
    end
    else
      result := false;

  end

  else
    result := false;
end ; 
```

上面的代码确实有效，但`findWindow`会找到我启动的应用程序的任何给定实例。我想嵌入我 Shell 执行的确切实例。因此，如果记事本已经启动了几次，我就无法使用 FindWindow 获得正确的记事本。

我试过了：

```
Function TfrmEmbeddedExe.CreateProcessNewApplication : Boolean;
var
zAppName: array[0..512] of char;
StartupInfo: TStartupInfo;
ProcessInfo: TProcessInformation;
Res : DWORD;
DoWait : Boolean;
begin
  DoWait := False;
  StrPCopy(zAppName, self.fexecuteFileName);  //'C:\Windows\Notepad.exe'
  FillChar(StartupInfo, Sizeof(StartupInfo), #0);
  StartupInfo.cb := Sizeof(StartupInfo);
  StartupInfo.dwFlags := STARTF_USESHOWWINDOW;
  StartupInfo.wShowWindow := SW_SHOWNORMAL;

  if CreateProcess (zAppName,
  nil, { pointer to command line string }
  nil, { pointer to process security attributes }
  nil, { pointer to thread security attributes }
  false, { handle inheritance flag }
  CREATE_NEW_CONSOLE or { creation flags }
  NORMAL_PRIORITY_CLASS,
  nil, { pointer to new environment block }
  nil, { pointer to current directory name }
  StartupInfo, { pointer to STARTUPINFO }
  ProcessInfo) then   { pointer to PROCESS_INF }
  begin
    if DoWait then  //just set it to false... so it will never enter here
    begin
      WaitforSingleObject(ProcessInfo.hProcess, INFINITE);
      GetExitCodeProcess(ProcessInfo.hProcess, Res);
    end
    else
    begin
      self.fAppWnd := ProcessInfo.hProcess;

      Windows.SetParent(self.fAppWnd, self.Handle);
      ShowWindow(self.fAppWnd, SW_SHOWMAXIMIZED);
      CloseHandle(ProcessInfo.hProcess);
      CloseHandle(ProcessInfo.hThread);

    end;

    result := true;
  end
  else begin
    Result := false;
  end;
end; 
```

请不要运行上述代码！它会产生奇怪的结果，包括在所有正在运行的应用程序中的任意位置选择一个看似随机的窗口并将其嵌入（甚至是 Windows 开始菜单中的菜单项......）

所以基本上我需要的是如何启动应用程序，并获取应用程序主窗口的句柄。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-05T14:00:02.867

这是您需要做的事情的大致轮廓。我将把编码留给你：

1.  `ShellExecuteEx`使用或开始您的流程`CreateProcess`。这将产生一个进程句柄。
2.  调用`WaitForInputIdle`进程句柄。这使进程有机会加载并启动其消息循环。
3.  传递进程句柄以`GetProcessId`获取进程ID。
4.  用于`EnumWindows`枚举顶层窗口。
5.  将这些窗口中的每一个传递给以`GetWindowThreadProcessId`检查您是否找到了目标进程的顶级窗口。
6.  一旦你找到一个进程 ID 与你的目标进程匹配的窗口，你就完成了！

完成后不要忘记关闭进程句柄。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-17T01:30:29.230

这段代码对我有用：

创建一个“Utils”- 具有以下内容的单元 >>

```
....

interface

.....

function RunProg(PName, CmdLine: String; out ProcessHdl: HWND): HWND;

implementation

type
  TEnumData = record      // Record Type for Enumeration
    WHdl: HWND;
    WPid: DWORD;
    WTitle: String;
  end;
  PEnumData = ^TEnumData;  // Pointer to Record Type

// Enumeration Function for GetWinHandleFromProcId (below)
function EnumWindowsProcMatchPID(WHdl: HWND; EData: PEnumData): bool; stdcall;
var
  Wpid : DWORD;
begin
  Result := True; // continue enumeration
  GetWindowThreadProcessID(WHdl, @Wpid);
  // Filter for only visible windows, because the Pid is not unique to the Main Form
  if (EData.WPid = Wpid) AND IsWindowVisible(WHdl) then
  begin
    EData.WHdl := WHdl;
    Result := False; // stop enumeration
  end;
end;

// Find Window from Process Id and return the Window Handle
function GetWinHandleFromProcId(ProcId: DWORD): HWND;
var
  EnumData: TEnumData;
begin
  ZeroMemory(@EnumData, SizeOf(EnumData));
  EnumData.WPid := ProcId;
  EnumWindows(@EnumWindowsProcMatchPID, LPARAM(@EnumData));
  Result := EnumData.WHdl;
end;

// Run Program using CreateProcess >> Return Window Handle and Process Handle
function RunProg(PName, CmdLine: String; out ProcessHdl: HWND): HWND;
var
  StartInfo: TStartupInfo;
  ProcInfo: TProcessInformation;
  ProcessId : DWORD;
  WinHdl : HWND;
  bOK : boolean;
  ix : integer;
begin
  FillChar(StartInfo, SizeOf(StartInfo), 0);
  StartInfo.cb := SizeOf(StartInfo);
  StartInfo.dwFlags := STARTF_USESHOWWINDOW;
  StartInfo.wShowWindow := SW_Show;
  bOK := CreateProcess(PChar(PName), PChar(CmdLine), nil, nil, False, 0, nil, nil, StartInfo, ProcInfo);
  ProcessHdl := ProcInfo.hProcess;
  ProcessId := ProcInfo.dwProcessId;

  // Note : "WaitForInputIdle" does not always wait long enough, ... 
  //          so we combine it with a repeat - until - loop >>
  WinHdl := 0;
  if bOK then  // Process is running
  begin
    WaitForInputIdle(ProcessHdl,INFINITE);
    ix := 0;
    repeat     // Will wait (up to 10+ seconds) for a program that takes very long to show it's main window
      WinHdl := GetWinHandleFromProcId(ProcessId);
      Sleep(25);
      inc(ix);
    until (WinHdl > 0) OR (ix > 400);  // Got Handle OR Timeout
  end;

  Result := WinHdl;
  CloseHandle(ProcInfo.hThread);
end; 
```

把它放在使用“Utils”的主程序中 - 单元>>

```
var
  SlaveWinHdl : HWND;  // Slave Program Window Handle
  SlaveProcHdl : HWND;  // Slave Program Process Handle

// Button to run Notepad - Returning Window Handle and Process Handle
procedure TForm1.Button1Click(Sender: TObject);
var
  Pname, Pcmnd: string;
begin
  Pname := 'C:\WINDOWS\system32\notepad.exe';
  Pcmnd := '';
  SlaveWinHdl := RunProg(Pname, Pcmnd, SlaveProcHdl);
end;

// Button to Close program using Window Handle
procedure TForm1.Button2Click(Sender: TObject);
begin
  PostMessage(SlaveWinHdl, WM_CLOSE, 0, 0);
end;

// Button to Close program using Process Handle
procedure TForm1.Button3Click(Sender: TObject);
begin
  TerminateProcess(SlaveProcHdl, STILL_ACTIVE);
  CloseHandle(SlaveProcHdl);
end; 
```

所以你有了它，一个如何运行外部程序的完整解决方案，然后使用窗口句柄或进程句柄关闭它。

**额外奖励：**有时您必须找到已经运行的程序的句柄。您可以使用以下代码根据 Window- Title 找到它（添加到您的“Utils”单元）>>

```
function EnumWindowsProcMatchTitle(WHdl: HWND;  EData: PEnumData): bool; stdcall; 
var
  WinTitle: array[0..255] of char;
  Wpid : DWORD;
begin
  Result := True; // continue enumeration
  GetWindowText(WHdl, WinTitle, 256);
  if (Pos(EData.WTitle, StrPas(WinTitle)) <> 0) then // Will also match partial title
  begin
    EData.WHdl := WHdl;
    GetWindowThreadProcessID(WHdl, @Wpid);
    EData.WPid := Wpid;
    Result := False; // stop enumeration
  end;
end;

function GetHandlesFromWinTitle(WinTitle: String; out ProcHdl : HWND): HWND;  
var
  EnumData: TEnumData;
begin
  ZeroMemory(@EnumData, SizeOf(EnumData));
  EnumData.WTitle := WinTitle;
  EnumWindows(@EnumWindowsProcMatchTitle, LPARAM(@EnumData));
  ProcHdl := OpenProcess(PROCESS_ALL_ACCESS,False,EnumData.WPid);
  Result := EnumData.WHdl;
end; 
```

并调用它（从你的主程序），像这样>>

```
strWT := ‘MyList.txt – Notepad’;  // example of Notepad Title
SlaveWinHdl  :=  GetHandlesFromWinTitle(strWT, SlaveProcHdl); 
```

# php - 如何从具有两个字段和一个在mysql，php中具有重复值的单个表中获取结果

> ID：12282955
> 
> 赞同：0
> 
> 时间：2012-09-05T13:47:24.493
> 
> 标签：php, mysql

我有一个包含不同字段的表，但我想显示两个字段的结果，其中一个包含重复值。考虑：

```
 F1  |   F2
-----------------
m1    | manchester
m2    | manchester 
cm3   | london
k4    | birmingham 
```

我想要这样的结果，如果我按下`m`

```
m1
m2
cm3
manchester
birmingham 
```

我是 php 和 mysql 的新手

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:51:02.227

You can use a union query to get what you want like this:

```
select
    F1 as m
from 
    tableName
where
    F1 like '%m%'
union all
select
    F2 as m
from 
    tableName
where
    F2 like '%m%' 
```

Edit: This will automatically remove duplicates as shown below:

```
mysql> select * from first;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    6 | ffff  |
+------+-------+
5 rows in set (0.00 sec)

mysql> select * from first union select * from first;
+------+-------+
| id   | title |
+------+-------+
|    1 | aaaa  |
|    2 | bbbb  |
|    3 | cccc  |
|    4 | NULL  |
|    6 | ffff  |
+------+-------+
5 rows in set (0.00 sec) 
```

# wpf - 制作可调整主窗口大小的可见/不可见面板

> ID：12282957
> 
> 赞同：0
> 
> 时间：2012-09-05T13:47:30.433
> 
> 标签：wpf, xaml, resize, panel, visibility

我希望实现像普通媒体播放器一样的效果，带有 eq 或 tracklist 面板，可以通过单击显示或更少显示。主窗口应该根据显示的内容自动调整大小。我想知道我是否必须关心手动指定大小或者有一个更清晰的解决方案。

```
<Window x:Class="WpfApplicationAnimation.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="Auto" Width="Auto" SizeToContent="WidthAndHeight">
<Grid>
    <Grid.ColumnDefinitions>
        <ColumnDefinition Width="Auto" />
        <ColumnDefinition Width="*" />
    </Grid.ColumnDefinitions>
    <Grid.RowDefinitions>
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
        <RowDefinition />
    </Grid.RowDefinitions>
    <Label Margin="5" Grid.Column="0" Grid.Row="0">Value 1:</Label>
    <Label Margin="5" Grid.Column="0" Grid.Row="1">Value 2:</Label>
    <Label Margin="5" Grid.Column="0" Grid.Row="2">Value 3:</Label>
    <Button Margin="5" Click="Button_Click_1" Grid.Column="0" Grid.Row="3" Visibility="Hidden">Hello</Button>
    <TextBox Name="txt1" Margin="5" Grid.Column="1" Grid.Row="0" MinWidth="100" />
    <TextBox Margin="5" Grid.Column="1" Grid.Row="1" MinWidth="100" />
    <TextBox Margin="5" Grid.Column="1" Grid.Row="2" MinWidth="100" />        
</Grid> 
```

我尝试设置 SizeToContent="WidthAndHeight" 但即使可见，按钮的内容也会占用所需的空间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:59:00.307

您可以尝试使用[扩展器](http://msdn.microsoft.com/en-us/library/system.windows.controls.expander.aspx)，但效果不一样。问题将是窗口透明度（因此您可以摆脱它，就像 Winamp 所做的那样；但随后您会陷入[Memory Leak](https://stackoverflow.com/questions/12167423/is-using-allowstransparency-property-on-a-wpf-window-still-a-cause-for-a-weird-m)）。但是，扩展器是我所知道的唯一可以自动启用的控件。当然，您始终可以手动排列和调整大小，但这就是您要避免的。

# internet-explorer - 在 IE 中从指定位置突出显示部分格式化的 textarea 或 div 文本

> ID：12282958
> 
> 赞同：0
> 
> 时间：2012-09-05T13:47:32.247
> 
> 标签：internet-explorer, textarea, selection, highlight

我有很好的功能可以满足我的需要，但在 IE 中它不考虑换行符，也许还有其他一些东西。

接下来是函数：

```
 this.createSelection = function (field, start, end) {
        if (field.createTextRange) {
            var selRange = field.createTextRange();
            selRange.collapse(true);
            selRange.moveStart('character', start);
            selRange.moveEnd('character', end - start);
            selRange.select();
        } else if (field.setSelectionRange) {
            field.setSelectionRange(start, end);
        } else if (field.selectionStart) {
            field.selectionStart = start;
            field.selectionEnd = end;
        }
        field.focus();
    } 
```

需要修改两点：

1.  使用换行符和其他内容突出显示文本的正确部分。

2.  不仅在 textarea 内突出显示，甚至在 div、p、span 等中突出显示。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-07T17:30:39.983

我已经在 Stack Overflow 上多次发布了一个函数，它针对文本区域和文本输入执行此操作，正确处理换行符。这是一个例子：

[https://stackoverflow.com/a/3373056/96100](https://stackoverflow.com/a/3373056/96100)

对常规 HTML 元素中的选择执行相同操作会比较棘手，而且定义也不太明确。这是一个关于这个的答案：

[https://stackoverflow.com/a/9841644/96100](https://stackoverflow.com/a/9841644/96100)

# android - Android上的迟缓无响应触摸

> ID：12282962
> 
> 赞同：0
> 
> 时间：2012-09-05T13:47:41.593
> 
> 标签：android

我正在将我的游戏从 iOS 移植到 Android。大多数情况下，它工作得很好。我主要使用 C/C++ 代码、NDK/JNI 和一点 Java 来管理应用程序生命周期并将触摸和加速度计信息发送到我的游戏。

据我所知，有 2 个线程，主 UI 线程和一个由 GLSurfaceView 创建的线程，用于处理显示和翻转 OpenGL 后台缓冲区等。

因此，除了触摸之外，一切都运行良好。与我在设备上尝试过的其他应用程序相比，它们感觉迟缓且反应迟钝。在做了一些研究之后，我相信这个问题可能与我如何使用线程有关。具体来说，我认为，这可能与显示线程在工作后不休眠有关，因此，它在主 UI 线程上进行了处理。这听起来合理吗？

我尝试计算我需要多少毫秒 GLSurfaceView 显示线程休眠，然后休眠（），它改善了触摸，但我的设备上的动画不再是恒定的 60FPS。我的怀疑是我正在计算前一帧休眠的毫秒数，并使用该数字休眠当前帧。

或者，它可能是完全不同的东西？我不知道。我对Android还是很陌生...

希望有人能对此事有所了解，或指出我正确的方向。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:56:56.773

您不必休眠 GL 线程。事实上，我会说休眠 GL 线程会使它更加迟缓，因为它是在屏幕上渲染图像的东西。

缓慢的 UI 主要是由于主 UI 线程被阻塞造成的。如果您在主线程上进行大量处理（例如加速度计数据），则主线程必须先完成工作，然后再处理您的用户输入。这会给人一种呆滞的“感觉”。所有触摸事件和非 opengl 绘图事件都**必须**发生在 UI 线程中。其他任何事情都可能发生在后台线程中，不会长时间阻塞 UI 线程。

除此之外，另一种可能性是您只是使处理器过载。您的 GL 线程可能需要很长时间才能绘制。它可能正在接收和处理触摸事件和加速度计数据。但是，如果渲染需要很长时间，那么您将看到过时的数据。因此，它再次感到“呆滞”。您提到它不是恒定的 60 FPS，所以这是一个非常现实的可能性。您可能已经优化了绘图代码，因此渲染速度更快。

# c++ - 使用包含自定义 IIdentity 的主体设置 Thread.CurrentPrincipal 时的 ModuleLoadException

> ID：12282965
> 
> 赞同：1
> 
> 时间：2012-09-05T13:47:49.340
> 
> 标签：c++, asp.net, asp.net-mvc, com, asp.net-web-api

我们有一个托管在 ASP.NET MVC WebAPI 中的应用程序，它使用外部托管库。此托管库再次使用 COM 库。COM 库是许多应用程序和不同版本中使用的通用库，因此我们希望能够通过直接从 bin 文件夹加载它来并行运行它，而不是使用传统的 COM 注册。我们通过添加清单文件并调用 kernel32.dll 中的 CreateActCtx 来注册自定义激活上下文（代码包含在下面）来实现这一点。

这本身就可以正常工作，但是当我们在加载 COM 库之前将 Thread.CurrentPrincipal 设置为具有自定义 IIdentity 实现的 GenericPrincipal 实例时，我们会收到一个 <CrtImplementationDetails>.ModuleLoadException 消息“C++ 模块在尝试加载时失败初始化默认的应用程序域。”。它有一个内部 System.Runtime.Serialization.SerializationException 表示它无法加载实际上启动 COM 程序集加载的程序集。堆栈跟踪是：

```
Server stack trace: 
    at System.Runtime.Serialization.Formatters.Binary.BinaryAssemblyInfo.GetAssembly()
    at System.Runtime.Serialization.Formatters.Binary.ObjectReader.GetType(BinaryAssemblyInfo assemblyInfo, String name)
    at System.Runtime.Serialization.Formatters.Binary.ObjectMap..ctor(String objectName, String[] memberNames, BinaryTypeEnum[] binaryTypeEnumA, Object[] typeInformationA, Int32[] memberAssemIds, ObjectReader objectReader, Int32 objectId, BinaryAssemblyInfo assemblyInfo, SizedArray assemIdToAssemblyTable)
    at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.ReadObjectWithMapTyped(BinaryObjectWithMapTyped record)
    at System.Runtime.Serialization.Formatters.Binary.__BinaryParser.Run()
    at System.Runtime.Serialization.Formatters.Binary.ObjectReader.Deserialize(HeaderHandler handler, __BinaryParser serParser, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
    at System.Runtime.Serialization.Formatters.Binary.BinaryFormatter.Deserialize(Stream serializationStream, HeaderHandler handler, Boolean fCheck, Boolean isCrossAppDomain, IMethodCallMessage methodCallMessage)
    at System.Runtime.Remoting.Channels.CrossAppDomainSerializer.DeserializeObject(MemoryStream stm)
    at System.Runtime.Remoting.Messaging.SmuggledMethodCallMessage.FixupForNewAppDomain()
    at System.Runtime.Remoting.Channels.CrossAppDomainSink.DoDispatch(Byte[] reqStmBuff, SmuggledMethodCallMessage smuggledMcm, SmuggledMethodReturnMessage& smuggledMrm)
    at System.Runtime.Remoting.Channels.CrossAppDomainSink.DoTransitionDispatchCallback(Object[] args)

Exception rethrown at [0]: 
    at System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg)
    at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type)
    at System.AppDomain.get_Id()
    at <CrtImplementationDetails>.DoCallBackInDefaultDomain(IntPtr function, Void* cookie)
    at <CrtImplementationDetails>.LanguageSupport._Initialize(LanguageSupport* )
    at <CrtImplementationDetails>.LanguageSupport.Initialize(LanguageSupport* )
    --- End of inner exception stack trace ---
    at <CrtImplementationDetails>.LanguageSupport.Initialize(LanguageSupport* )
    at .cctor()
    --- End of inner exception stack trace --- 
```

当我们不设置 Thread.CurrentPrincipal 或使用带有 GenericIdentity 的 GenericPrincipal 时，它可以正常工作。目前，使用 GenericIdentity 的解决方案是我们的解决方法，因为我们主要设置 Thread.CurrentPrincipal 以使用 ASP.NET MVC 身份验证。

以下代码有效：

```
Thread.CurrentPrincipal = new GenericPrincipal(new GenericIdentity("bla"), new string[0]); 
```

...而以下没有：

```
Thread.CurrentPrincipal = new GenericPrincipal(new CustomIdentity("bla"), new string[0]); 
```

以下是用于注册自定义激活上下文的 global.asax 代码，引用 bin 文件夹和清单文件以执行无注册 COM：

```
public class Global : System.Web.HttpApplication
{
    private const UInt32 ERROR_SXS_PROCESS_DEFAULT_ALREADY_SET = 14011;
    IntPtr hActCtx;
    private static readonly ILogger s_logger = LogManager.GetCurrentClassLogger();

    protected void Application_Start(object sender, EventArgs e)
    {
        // Required files are copied in host projects post-build event
        // NB! you can only set the default activation context like this once per app domain,
        //  so if you need multiple apps/services using side-by-side they cannot share app pool.

        UInt32 dwError = 0;
        string binDirectory = Path.Combine(AppDomain.CurrentDomain.BaseDirectory,"bin");
        string manifestPath = Path.Combine(binDirectory, "Iit.OpenApi.Services.ReferenceData.manifest");
        var activationContext = new ACTCTX();
        activationContext.cbSize = Marshal.SizeOf(typeof(ACTCTX));
        activationContext.dwFlags = ACTCTX_FLAG_SET_PROCESS_DEFAULT | ACTCTX_FLAG_ASSEMBLY_DIRECTORY_VALID;
        activationContext.lpSource = manifestPath;
        activationContext.lpAssemblyDirectory = binDirectory;
        hActCtx = CreateActCtx(ref activationContext);
        if (hActCtx.ToInt32() == -1)
        {
            dwError = (UInt32)Marshal.GetLastWin32Error();
        }

        if ((hActCtx.ToInt32() == -1) && (dwError != Global.ERROR_SXS_PROCESS_DEFAULT_ALREADY_SET))
        {
            var err = string.Format("Cannot create process-default win32 sxs context, error={0} manifest={1}", dwError, manifestPath);
            throw new ApplicationException(err);
        }
        // TODO: add eventid to enum
        if ((hActCtx.ToInt32() == -1) && (dwError == Global.ERROR_SXS_PROCESS_DEFAULT_ALREADY_SET))
        {
            GetCurrentActCtx(out hActCtx);
            s_logger.Info(9998, string.Format("Re-using exising ActivationContext [{0}].", hActCtx.ToInt64()));
        }
        else
        {
            s_logger.Info(9998, string.Format("ActivationContext [{0}] created successfully.", hActCtx.ToInt64()));
        }

    }

    protected void Application_End()
    {
        if (hActCtx.ToInt64() != INVALID_HANDLE_VALUE)
        {
            ReleaseActCtx(hActCtx);
            // TODO: add eventid to enum
            s_logger.Info(9999, string.Format("ActivationContext [{0}] released successfully.", hActCtx.ToInt64()));
        }
    }

    [StructLayout(LayoutKind.Sequential)]
    private struct ACTCTX
    {
        public int cbSize;
        public uint dwFlags;
        public string lpSource;
        public ushort wProcessorArchitecture;
        public ushort wLangId;
        public string lpAssemblyDirectory;
        public string lpResourceName;
        public string lpApplicationName;
    }

    private const uint ACTCTX_FLAG_ASSEMBLY_DIRECTORY_VALID = 0x004;
    private const uint ACTCTX_FLAG_SET_PROCESS_DEFAULT = 0x010;
    private const Int64 INVALID_HANDLE_VALUE = -1;

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern IntPtr CreateActCtx(ref ACTCTX actctx);

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern bool GetCurrentActCtx(out IntPtr hActCtx);

    [DllImport("kernel32.dll", SetLastError = true)]
    private static extern void ReleaseActCtx(IntPtr hActCtx);

} 
```

关于使用自定义 IIdentity 时出了什么问题的任何输入，以及如何使其与无 reg-free COM 一起工作？

# android - 如何保持应用程序运行直到用户退出应用程序？

> ID：12282966
> 
> 赞同：0
> 
> 时间：2012-09-05T13:47:51.033
> 
> 标签：android

> **可能重复：**
> [我可以在后台保持 Android 应用程序处于活动状态吗？](https://stackoverflow.com/questions/9541991/can-i-keep-android-app-alive-in-background)

我正在开发一个应该连续运行的 voip 应用程序，但是 android 操作系统在大约 30 分钟后杀死了该应用程序。请提出任何解决方案以使应用程序保持活动状态，直到用户退出应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T13:54:01.297

用户如何“退出”应用程序？退出违背了 Android 的设计。Android 将在不再使用该应用程序时将其终止。如果您需要您的应用程序一直存在直到用户明确强制关闭应用程序，请使用[Service](http://www.vogella.com/articles/AndroidServices/article.html)。如果您使用 启动服务`Context.startService()`，则该服务将在您的活动被销毁后保留。仅当 Android 运行的资源严重不足（不太可能发生）时，该服务才会停止。

# jakarta-ee - 将 Glassfish Java EE 程序移至另一台机器

> ID：12282968
> 
> 赞同：0
> 
> 时间：2012-09-05T13:47:56.850
> 
> 标签：jakarta-ee, deployment, glassfish

我正在移动一个使用 Glassfish 的 Java EE 程序。我想出了一种将所有依赖项打包到一个 JAR 中的方法，但还没有真正想出如何使用 Glassfish 移植所有 Netbeans JDBC 连接。事实上，我真的不知道如何复制程序与 Glassfish 的集成——它是由 Netbeans 完成的。

我一直在搜索诸如“在另一台机器上部署战争”或“将 java ee 程序移动到另一台 glassfish 服务器”等关键字，但无济于事。

任何建议都会很棒！

编辑：我解决了这个问题。我的项目在 NetBeans 中被格式化为“应用程序客户端”，这似乎意味着它只会创建一个独立的 JAR。当我使用 One Jar 方法制作程序的独立 JAR 时，一切正常。看起来 Glassfish 甚至没有必要，尽管当我早些时候尝试在其上使用 Glassfish 时它仍然无法正确部署 JAR（当我不知道它不需要 Glassfish 时）。

不过需要注意的是，persistence.xml 也包含在 JAR 中，这意味着无论何时构建项目，它都必须指向用于生产的“正确”JDBC。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-05T22:27:39.910

如果没有关于您的项目的更多详细信息，我无法提供太多具体步骤，但是，如果这要投入生产，您真的应该花一点时间来修复您的项目，以便它构建尽可能自包含的部署存档。例如，让它使用 glassfish-resources.xml 中定义的应用程序范围的资源。让它将所有依赖的 JAR 捆绑到 WEB-INF/lib 中以用于 WAR 等。

之前的回复提到将 JDBC 驱动程序 JAR 放入 $GLASSFISH_HOME/glassfish/lib。根据您的应用程序要求和/或驱动程序，这可能不是最佳位置。您应该阅读[为 JDBC 驱动程序配置细节以](http://docs.oracle.com/cd/E18930_01/html/821-2416/beamw.html)获取有关此主题的说明。

听起来您可能是 JavaEE 堆栈的新手。如果您可以添加有关您正在构建的项目类型（WAR、EAR 或 EJB jar 等）及其当前依赖项（JARS、JDBC 连接池等资源）的更多详细信息，那么我可以为您提供更具体的步骤。

同时，我建议您阅读[Glassfish 应用程序部署指南](http://docs.oracle.com/cd/E18930_01/html/821-2417/index.html)，了解如何将应用程序部署到 Glassfish。

另一个阅读[管理指南](http://docs.oracle.com/cd/E18930_01/html/821-2416/index.html)并最终熟悉开发 JavaEE6 应用程序的指南，您应该查看作为[Glassfish 参考指南一部分的应用程序教程](http://docs.oracle.com/cd/E18930_01/index.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:05:47.230

假设您有一个基本的 Web 应用程序，您可以按照以下步骤操作。

首先，将 db 连接器复制到文件夹`GLASSFISH_INSTALL/glassfish/lib`中。

然后，复制您所称`dependancies`的 . 这些很可能是您之前安装的 DataSource / JNDI / Connection Pool / JMS / Security Realm 定义和设置。您可以在之前安装的 GlassFish的域[配置文件中找到它们。](http://docs.oracle.com/cd/E19798-01/821-1753/abhar/index.html)该文件称为 domain.xml 并且位于`GLASSFISH_INSTALL/glassfish/domains/domain1`（假设您使用的是 domain `domain1`）下。最终尝试将此文件的相关部分复制到新的 GlassFish 路径。但我强烈建议通过[管理控制台](http://docs.oracle.com/cd/E18930_01/html/821-2417/gilfm.html#scrolltoc)进行参数化。

重新启动 GlassFish。

如果您已将应用程序打包到`war`an`ear`或`jar`package 中，只需通过命令（如链接文档中所述）或使用管理控制台[部署它。](http://docs.oracle.com/cd/E18930_01/html/821-2416/ggjxp.html#ablav)`asadmin` `deploy`

# javascript - jquery添加类后如何应用css？

> ID：12282969
> 
> 赞同：2
> 
> 时间：2012-09-05T13:47:55.597
> 
> 标签：javascript, jquery, css

我正在使用 jquery 手风琴，如下所示：

```
<link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () { 
     $("#accordion").accordion();
    }
</script>

<style>
.ui-accordion-content{
        margin:0;
        padding:0;
}
</style> 
```

JQuery 创建一个`div.ui-accordion-content`并将样式应用`jquery-ui.css`到它。不幸的是，我自己的样式标签中的 css 没有被应用。

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T13:50:31.360

*正确的做法*

您需要了解 CSS 优先级，阅读它[http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)。

使用它，您的代码将更新为以下内容：

```
.ui-accordion .ui-accordion-content{
    margin: 0;
    padding: 0;
} 
```

由于它的定义与链接的 jquery ui css 中的定义完全相同，并且在它之后在 DOM 中它将因此具有优先权。

*快速而肮脏的修复*

`!important`通过添加到您自己的样式来修复，如下所示：

```
.ui-accordion-content{
    margin:0 !important;
    padding:0 !important;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-05T13:50:13.537

一种选择是使用[`!important`](http://www.w3.org/TR/CSS2/cascade.html#important-rules)：

```
.ui-accordion-content {
    margin: 0 !important;
    padding: 0 !important;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-05T13:50:08.830

下载 jquery-ui.css，更改其中的相关样式规则并使用该规则而不是公共版本。

或者

尝试在您的 CSS 规则之后使用 !important，例如：

边距：0！重要；

# sonarqube - 如何通过插件过滤声纳结果

> ID：12282971
> 
> 赞同：0
> 
> 时间：2012-09-05T13:48:01.243
> 
> 标签：sonarqube

我想过滤结果以仅显示 Findbugs 插件发现的错误。那可能吗 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-05T15:01:41.170

不，这是不可能的。如果您只想有 Findbugs 违规，那么您可以创建仅包含 Findbugs 规则的质量配置文件。

# qt - Redirecting an Qt mouse message in viewportEvent to another window is not working

> ID：12282981
> 
> 赞同：1
> 
> 时间：2012-09-05T13:48:22.670
> 
> 标签：qt, redirect, filter, message, qwidget

I want to implement an extended "QScrollArea" widget that supports scrolling the scrollbar (contents) with the mouse by dragging the mouse somewhere within the widget. For this purpose I want to ignore any child widgets so that the focus don't accidently goes to some of the children.

My solution (which is not working) is to set content widget attribute `WA_TransparentForMouseEvents` so that all the mouse events goes to viewportEvent() method in my `QScrollAreaEx`. Here I want to handle the mouse messages. For example I could determine if the intention was to drag the scrollbar position or to interact with some of the child widgets (activate, select, move caret, ...).

My first try was to redirect the messages **MouseButtonPress** and **MouseButtonRelease** events only to the child widget underneath (widget()->childAt(e->pos())) which had been focused if `WA_TransparentForMouseEvents` were not set. However that didn't worked, none of the widgetd received the focus. But why?

```
bool viewportEvent(QEvent* e) {
    bool IsMouseEvent = e->type() == QEvent::MouseButtonPress || e->type() == QEvent::MouseButtonRelease || e->type() == QEvent::MouseMove;
    QMouseEvent* me = (QMouseEvent*) e;

    bool IsHandled = false;

    if (IsMouseEvent) {
        if (e->type() == QEvent::MouseButtonPress) {
            _PressEvent = *me;
            IsHandled = true; // Eating press event
        } else if (e->type() == QEvent::MouseButtonRelease) {
            QPoint PressPoint = _PressEvent.pos();
            widget()->setAttribute(Qt::WA_TransparentForMouseEvents, false);
            QWidget* w = widget()->childAt(PressPoint);
            if (w) {
                QPoint p1 = w->mapFrom(widget(), _PressEvent.pos());
                QPoint p2 = w->mapFrom(widget(), me->pos());
                QMouseEvent* e1 = new QMouseEvent(QEvent::MouseButtonPress, p1, Qt::LeftButton, Qt::LeftButton, Qt::NoModifier);
                QMouseEvent* e2 = new QMouseEvent(QEvent::MouseButtonRelease, p2, Qt::LeftButton, Qt::LeftButton, Qt::NoModifier);
                QCoreApplication::postEvent(w, e1);
                QCoreApplication::postEvent(w, e2);
            }
            widget()->setAttribute(Qt::WA_TransparentForMouseEvents, true);
        }
    }
    if (IsHandled) return true;
    return QScrollArea::viewportEvent(e);
} 
```

Second test was:

```
bool viewportEvent(QEvent* e) {
    bool IsMouseEvent = e->type() == QEvent::MouseButtonPress || e->type() == QEvent::MouseButtonRelease || e->type() == QEvent::MouseMove;
    QMouseEvent* me = (QMouseEvent*) e;

    bool IsHandled = false;

    if (IsMouseEvent) {
        if (e->type() == QEvent::MouseButtonPress) {
            _PressEvent = *me;
            IsHandled = true; // Eating press event
        } else if (e->type() == QEvent::MouseButtonRelease) {
            QPoint PressPoint = _PressEvent.pos();
            widget()->setAttribute(Qt::WA_TransparentForMouseEvents, false);
            QWidget* w = widget()->childAt(PressPoint);
            if (w && w != widget()) {
                QCoreApplication::sendEvent(widget(), &_PressEvent);
                QCoreApplication::sendEvent(widget(), e);
            }
            widget()->setAttribute(Qt::WA_TransparentForMouseEvents, true);
        }
    }
    if (IsHandled) return true;
    return QScrollArea::viewportEvent(e);
} 
```

None of them was working. Why does the redirection not work. Is there a better solution for my purpose?

# java - 如何计算以位表示的具有 ip 的下一个 IP 地址？

> ID：12282986
> 
> 赞同：0
> 
> 时间：2012-09-05T13:48:45.947
> 
> 标签：java, android, ip, netmask

我从 DHCP 信息中获取 IP 地址。当我有位表示的 IP 时如何计算下一个 IP 地址。

```
WifiManager wifii = (WifiManager) context.getSystemService(Context.WIFI_SERVICE);
DhcpInfo d = wifii.getDhcpInfo();
int mask = d.netmask;
int ip0 = d.ipAddress & d.netmask;
int num = ~d.netmask; //it should be correct but don't work. why?

//this don't work. How make it correct?
for(int ip = ip0; ip < ip + num; ip++){
   //here ip next ip
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T14:12:13.103

IP=192.168.1.16 和网络掩码 255.255.255.0 的示例：

```
int ipAddress = 0xC0A80110;
int mask = 0xFFFFFF00;
int maskedIp = ipAddress & mask;
int ip = ipAddress;
// Loop until we have left the unmasked region
while ((mask & ip) == maskedIp) {
    printIP(ip);
    ip++;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T14:22:00.083

根据 Robert 的建议，一个简单的解决方案是测试你的 ips 并对其进行测试：

```
int ip = d.ipAddress;
while (ip & d.netmask) {
    // Valid ip
    ip++
}
ip = d.ipAddress - 1;
while (ip & d.netmask) {
    // Valid ip
    ip--
} 
```

# asp.net-mvc-3 - 如何在 Html.BeginForm 和 sumbit FilesList 中使用 @FileUpload.GetHtml

> ID：12282988
> 
> 赞同：0
> 
> 时间：2012-09-05T13:48:49.907
> 
> 标签：asp.net-mvc-3, razor

@FileUpload.GetHtml 有一个默认提交按钮。但我希望在 Html 开始表单中有一个提交按钮，并使用该替换来提交带有更多参数的文件列表。但是当我这样做时，传递的 IEnumerable 在 Action 方法中始终为空。

这是我的操作方法： [HttpPost] public ActionResult Change(IEnumerable filesList, Guid ID, string Btn) {....

```
 @using (Html.BeginForm("Change", "Home",FormMethod.Post))
    {
      <textarea id="textArea" name="epost2" class="frm_txtfield_big" style="float:left; width:638px; height:200px;"></textarea>

      <input type="hidden" name="supportID" value="@Model.ID" />

      @FileUpload.GetHtml(name: "ChooseFile",initialNumberOfFiles: 1,allowMoreFilesToBeAdded: true,includeFormTag: false)

      .......} 
```

但这不是将文件列表传递给该方法。

我做错了或者代码有什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T03:34:43.563

我没有包含`enctype = "multipart/form-data"`里面的`Html.BeginForm`所以这个值不会被带到文件输入中。现在好了。 [这](https://stackoverflow.com/a/4526286/892788)会给你一个很好的解释。

# ios - language settings in ios

> ID：12282990
> 
> 赞同：2
> 
> 时间：2012-09-05T13:49:06.097
> 
> 标签：ios, settings, localizable.strings, nslocale

I have one little trouble. I created a Localizable.string file for a language which is not in the list of available languages in the General settings of the device.

How to force an app to read from it even if language is set to English? I can set Region Format for this country but not the language.

Thanks

Marko

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-18T08:58:48.927

在花了一些时间之后，我找到了解决方案。事实上，答案是将区域格式设置为其他语言，然后将主文件更改为如下所示：

```
int main(int argc, char *argv[])
{    
    @autoreleasepool {

        if ([[[NSLocale currentLocale]localeIdentifier]isEqualToString:@"sl_SI"]) {
            [[NSUserDefaults standardUserDefaults] setObject:[NSArray arrayWithObjects:@"sl", nil] forKey:@"AppleLanguages"];
        } else {
            [[NSUserDefaults standardUserDefaults] removeObjectForKey:@"AppleLanguages"];
        }

        return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class]));
    }
} 
```

用于将语言设置为斯洛文尼亚语。对于其他语言，它类似。

# firefox - 我到底是如何在 Firefox 中获得此功能的

> ID：12282994
> 
> 赞同：-2
> 
> 时间：2012-09-05T13:49:28.303
> 
> 标签：firefox, screen-resolution

我不小心在 Firefox 中按下了某个东西，这个功能突然出现了。现在我可以查看不同屏幕分辨率的网页...

它是什么，我是如何得到它的？（我想再次使用它哈哈）

[http://screencast.com/t/tHblDMJydQ](http://screencast.com/t/tHblDMJydQ)

肿瘤坏死因子

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-05T13:55:50.983

响应式设计视图 Ctrl + Shift + M

# jquery - click event not working in jquery

> ID：12282999
> 
> 赞同：-5
> 
> 时间：2012-09-05T13:49:43.053
> 
> 标签：jquery

In my following code click event not working can anyone tell me why? Note: I tried `.live('click', function)` also which is not working so suggest me another solution.

```
 <script type="text/javascript" src="js/jquery-1.7.1.js"></script>
    <script type="text/javascript" src="js/jquery-1.7.1.min.js"></script> 
    <script type="text/javascript" src="js/jquery.mobile-1.1.0.js"></script>
    <script type="text/javascript" >
    $(function(){
       $("#signup").click(function(){
       alert("in");
      var street = $("#street").val();
       var mno = $("#mno").val();
      var tno = $("#tno").val();
      var word = $("#word").val();

     //var accept = $("#accept").val(); 
      if(street=="" && mno=="" && tno=="" && word="" &&            document.getElementById('accept').checked==false)
      {
     alert("Enter all the details");

      }

     else if(street=="")
     {
 alert("Enter your street name");

 }
 else if(mno=="")
 {
 alert("Enter your mobile no");

 }
 else if(tno=="")
 {
 alert("Enter your telephone no");

    }
else if(word=="")
{
alert("Enter the word displayed");

}
else if (document.getElementById('accept').checked==false)
{
alert("Accept our terms and conditions");

}
    return false;
    });  
    });  
    </script> 
   <body>
    <div class="inner-content">
             <label for="basic">Street Details:</label>
            <input type="text" name="name" id="street" data-mini="true" />
            <label for="basic">Mobile Number:</label>
            <input type="text" name="name" id="mno" data-mini="true" />
            <label for="basic">Telephone Number:</label>
            <input type="text" name="name" id="tno" data-mini="true" />
            <label for="basic">Enter the word </label>
            <input type="text" name="name" id="word" data-mini="true" />
            <label class="check"><input type="checkbox" id="accept"/> I accept the  Terms and Conditions. </label>
             <label class="check"><input type="checkbox" /> Receive mail about   promotions.<br/> Offer and Service. </label>
           <a href="index.html" data-role="button" id="signup">Sign In</a> 
          </div>
        </body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T13:58:01.983

正如您在此处看到的，[jsFiddle 演示](http://jsfiddle.net/cmsZc/)代码显然可以正常工作。

那么你的问题是脚本没有找到`jQuery`，或者它没有`a`在你的 html 中找到标签。

`f12`在 Chrome 或 Firefox 的 Firebug 上将在这里为您提供帮助。

编辑：您正在加载两个不同`jQuery`的脚本，最小版本和非最小版本。尝试删除`<script type="text/javascript" src="js/jquery-1.7.1.js"></script>`

另外，请尝试：`console.log($('#signup'))`查看是否返回了任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-05T17:47:41.293

看起来 jQuery 文件没有正确加载.. 你为什么不使用 Google cdn 托管的 jQuery 文件.. 它还有助于减少文件引用错误并减少您网站的带宽..

代替

```
<script type="text/javascript" src="js/jquery-1.7.1.js"></script>
<script type="text/javascript" src="js/jquery-1.7.1.min.js"></script> 
```

用这个

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script> 
```