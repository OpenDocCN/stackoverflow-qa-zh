# StackOverflow 问答 11944000-11944999

# objective-c - 文本字段中的整数乘法 - Xcode 4.4

> ID：11944001
> 
> 赞同：0
> 
> 时间：2012-08-14T00:09:01.793
> 
> 标签：objective-c, ios, xcode4, xcode4.2, xcode4.3

我正在尝试将三个不同文本字段中的整数值相乘。

```
@property (nonatomic,strong) IBOutlet UITextField *textField;
@property (nonatomic,strong) IBOutlet UITextField *textField2;
@property (nonatomic,strong) IBOutlet UITextField *textField3;
@property (nonatomic,strong) IBOutlet UILabel *total; 
```

我正在尝试在 UILabel 中显示产品。有人可以帮助实施吗？非常感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:15:40.997

要在 UILabel 中显示产品，请以这种方式设置标签文本（假设 textFields 都包含整数）：

```
total.text = [NSString stringWithFormat: @"%i", (textField.text.intValue * textField2.text.intValue * textField3.text.intValue)]; 
```

你可能想把它放在一个单独的方法中，这样你就可以从任何地方调用它，比如每当用户用新数字更新 textFields 时

# session - 获取 grails 计划神奇保存的所有对象的列表

> ID：11944004
> 
> 赞同：1
> 
> 时间：2012-08-14T00:09:24.130
> 
> 标签：session, grails, save, grails-orm

如果我在控制器中创建域对象并且不调用`.save()`，Grails 会在某个时候自动为我执行此操作。我正在创建许多域对象，但没有计划保存所有这些对象，并在我的服务退出时出现“引用未保存的瞬态实例”异常。

当控制器/服务退出时，我如何获得 Grails 将尝试保存的所有对象的列表，以便我可以防止其中一些对象被保存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:36:52.480

您最好检索您知道您将编辑但不希望使用该`read`方法而不是`get`. Using`read`不会使它成为只读的，因为如果你调用`save()`它并且它被修改了，它将被持久化，但是当 OSIV 拦截器刷新会话时它不会自动持久化。

另一种选择（特别是如果没有单独加载实例）是`detach()`在您编辑它时将其从会话中删除。

您还可以使用 DTO 并将数据复制到那些非持久类中，这样您就不会使用持久类，而只是 Hibernate 不知道的数据类。

# python - 如何在 Twisted HTTP 服务器上强制文件下载？

> ID：11944011
> 
> 赞同：1
> 
> 时间：2012-08-14T00:10:25.083
> 
> 标签：python, http, url, twisted

非常简单的问题，我目前希望用户下载（不打开）存储在 python Twisted Web 服务器上的 csv 文件。该文件当前在访问其 URL 时在浏览器中打开。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:52:12.187

您可以像这样设置响应标头：

```
request.responseHeaders.setRawHeaders(
    'Content-Disposition', ['attachment; filename="foo"']) 
```

# c# - 如何将点击事件添加到多个 HubTiles

> ID：11944012
> 
> 赞同：0
> 
> 时间：2012-08-14T00:10:31.300
> 
> 标签：c#, windows-phone-7, xaml, silverlight-toolkit

我从 windows phone 工具包中实现了 HubTile 控件的以下实现，除了从所选​​磁贴实现点击事件外，一切正常。我不确定如何将特定磁贴的点击链接到代码后面的 Tap 事件处理程序（它应该只是导航到我项目中的新页面）。到目前为止，我所拥有的如下：

主页.xaml

```
<ListBox Grid.Row="0" x:Name="tileList" toolkit:TiltEffect.IsTiltEnabled="True">
                <ListBox.ItemsPanel>
                    <ItemsPanelTemplate>
                        <toolkit:WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ListBox.ItemsPanel>
                <ListBox.ItemTemplate>
                    <DataTemplate>
                        <toolkit:HubTile Title="{Binding Title}" Margin="3"
                                         Notification="{Binding Notification}"
                                         DisplayNotification="{Binding DisplayNotification}"
                                         Message="{Binding Message}"
                                         GroupTag="{Binding GroupTag}"
                                         Source="{Binding ImageUri}"
                                         Tap="hubTile_Tap">
                        </toolkit:HubTile>

                    </DataTemplate>
                </ListBox.ItemTemplate>
            </ListBox> 
```

TileItem.cs

```
public class TileItem
{
    public string ImageUri
    {
        get;
        set;
    }

    public string Title
    {
        get;
        set;
    }

    public string Notification
    {
        get;
        set;
    }

    public bool DisplayNotification
    {
        get
        {
            return !string.IsNullOrEmpty(this.Notification);
        }
    }

    public string Message
    {
        get;
        set;
    }

    public string GroupTag
    {
        get;
        set;
    }

    //not sure how to implement this?
    public string Tap
    {
        get;
        set;
    }
} 
```

MainPage.xaml.cs

```
 #region Ctr

    public MainPage()
    {
        InitializeComponent();

        CreateHubTiles();
    }

    #endregion

    private void CreateHubTiles()
    {
        List<TileItem> tileItems = new List<TileItem>() 
        {
            //there will be at least 2 distinct tiles linking to seperate pages
            new TileItem() { ImageUri = "/Images/shareStatusImage.jpg", Title = "status", /*Notification = "last shared link uri",*/ Message = "last shared status message", GroupTag = "TileGroup", Tap = "shareStatus_Tap" },
            new TileItem() { ImageUri = "/Images/shareLinkImage.jpg", Title = "link", /*Notification = "last shared status message",*/ Message = "last shared link uri", GroupTag = "TileGroup", Tap = "shareLink_Tap" }
        };

        this.tileList.ItemsSource = tileItems;
    }

    #region Navigation

    protected override void OnNavigatedTo(NavigationEventArgs e)
    {
        base.OnNavigatedTo(e);

        HubTileService.UnfreezeGroup("TileGroup");
    }

    protected override void OnNavigatedFrom(NavigationEventArgs e)
    {
        base.OnNavigatedFrom(e);

        HubTileService.FreezeGroup("TileGroup");
    }

    #endregion

    #region Event Handlers

    private void hubTile_Tap(object sender, System.Windows.Input.GestureEventArgs e)
    {
        TileItem tap = sender as TileItem;
        string _tap = tap.Tap.ToString();  //NullReferenceException occurs here

        switch(_tap)
        {
            case "shareStatus_Tap":
                this.NavigationService.Navigate(new Uri("/Views/ShareStatusPage.xaml", UriKind.Relative));
                break;
            case "shareLink_Tap":
                this.NavigationService.Navigate(new Uri("/Views/ShareLinkPage.xaml", UriKind.Relative));
                break;
        }
    }
    #endregion 
```

在模拟器中，MainPage 加载活动的 hubtiles 工作，但点击事件导致 NullReferenceException，而在我的实际设备上，应用程序根本不加载？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:13:09.950

把你的断点放进去`hubTile_Tap`，看看是什么`sender`。我猜这将是`HubTile`，而不是`TileItem`。在这种情况下`TileItem`可能是`HubTile.DataContext`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:16:52.267

我只是在写和@JohnGardner 一样的东西，所以我会跳过它。只是要小心发件人。实际上，在某些情况下，它可能是相当的。如果您遇到这种情况，请尝试检查`System.Windows.Input.GestureEventArgs e`其及其`Source`和`OriginalSource`- 它们可能不一定是 HubTile，并且不一定具有有趣的 DataContext，但几乎可以保证它们是`Visual`or`UIElement`并且您可以轻松地向上跟踪它们的 VisualParents，以及关闭的视觉父级将是带有 DataContext=TileItem 的 HubTile。这是最坏的情况。首先，试试 John 所说的，你有 95% 的可能性会起作用 :)

# filter - 如何在不添加 web.xml 的情况下注入球衣过滤器

> ID：11944019
> 
> 赞同：1
> 
> 时间：2012-08-14T00:11:14.427
> 
> 标签：filter, jersey

我不知道这是否可能，但我已经创建了 Jersey 过滤器来扩展日志过滤器，我添加了

```
<init-param>
<param-name>com.sun.jersey.spi.container.ContainerRequestFilters</param-name>
<param-value>com.chegg.commons.web.logging.WebRequestLogger</param-value>
</init-param>
<init-param>
<param-name>com.sun.jersey.spi.container.ContainerResponseFilters</param-name>
<param-value>com.chegg.commons.web.logging.WebRequestLogger</param-value>
</init-param> 
```

在我的 web.xml 中，一切正常。我想再提高一个层次。servlet 容器可以通过我的日志记录类顶部的任何注释调用没有 web.xml 中的条目的过滤器。像@Aspect 这样的东西。我不想使用@Aspect，因为它不是过滤器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-08-31T06:57:24.753

是的，您始终可以使用`@Provider`注释来注释您的`CustomFilterClasses`，只需手动注册这些或让 jersey 自动扫描您的过滤器。

例如：

```
package com.test.poc.filters;
@Provider
public class CustomFilter implements ContainerRequestFilter{
 @Override
 public void filter(ContainerRequestContext requestContext){
  //filter logic..
 }
} 
```

是一个过滤器，我们希望 jersey 在运行时自动发现它，因此我们可以轻松地指定一个扩展 ResourceConfig 的类

```
@ApplicationPath("api")
public class CustomResourceConfig extends ResourceConfig{
 public CustomResourceConfig(){
  super();
  packages("com.test.poc.filters;com.test.poc.restservices;com.test.poc.providers");
  //ragister any other classes like
  //register(JacksonFeature.class);
 }
} 
```

这将自动扫描使用`@Provider`或`@Path`在指定包中注释的所有类

# php - 找到一个特定的行并用新的替换它？

> ID：11944021
> 
> 赞同：-1
> 
> 时间：2012-08-14T00:11:21.277
> 
> 标签：php, regex, codeigniter

我有一个包含数组数据的 .php 文件，如下所示：

```
$config['setting_one'] = true;
$config['setting_two'] = "some string";
$config['setting_three']['option1'] = "some string"; 
```

找到该行开头`$config['setting_two']`并将该行替换为的正确方法是什么`$config['setting_two'] = "new string";`（新字符串将来自一个帖子值）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T00:14:51.153

没有正确的方法。

正确的做法是“不要那样做”。

您包含 php 代码，然后通过简单地设置来更新变量。

你想做什么？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:13:49.953

[您必须使用fgets](http://php.net/manual/en/function.fgets.php)逐行读取文件

```
$config = array();

while(($line = fgets($handle, 4096) ) !== false) {
    $config[] = $line;
} 
```

# ios - 将敏感数据添加到 iOS 应用程序构建

> ID：11944024
> 
> 赞同：0
> 
> 时间：2012-08-14T00:11:49.623
> 
> 标签：ios

将敏感数据添加到 iOS 应用程序的最佳做法是什么？对于敏感数据，我的意思是与某些外部服务器通信的密钥或令牌。

我们可以在应用程序中编译证书，iOS 可以在安装时删除它吗？

我觉得我们不能真正 100% 保证它的安全性，但是我们可以添加的最佳实践层是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:17:02.313

没有任何机制可以确保服务器只允许您的应用程序与其对话。因此，如果这是您的目标，那么它是无法解决的。这已经在 SO 上被谈死了。一些：

*   [iPhone和服务器之间的安全通信？](https://stackoverflow.com/questions/1399198/secure-communication-between-iphone-and-server/1399702#1399702)
*   [在应用程序安装过程中将加密密钥存储在 Keychain 中](https://stackoverflow.com/questions/886893/store-an-encryption-key-in-keychain-while-application-installation-process/888006#888006)
*   [iPhone 应用到网页的安全 https 加密](https://stackoverflow.com/questions/9181186/secure-https-encryption-for-iphone-app-to-webpage/9183066#9183066)

（以及这些帖子中的许多其他链接。）

在其他地方：

*   [混淆可可](http://robnapier.net/blog/obfuscating-cocoa-389)

您无法验证设备或软件。您只能对用户进行身份验证。这意味着登录。如果没有部分存储在用户大脑中的登录信息（或至少存储在与他们的 iPhone 不同的东西中），这只是一种混淆。

现在，这并不意味着混淆是没有用的。它不是。您可以从简单的身份验证令牌（如客户端密钥）中获得一些好处，但不要指望它能够在攻击中幸存下来。这并不意味着你不应该这样做；这只是意味着您不应该在它上面花费大量时间/金钱，因为它会很快失败。

在任何情况下，您都不应该实施一些会吸引付费客户的东西。阅读上面链接的几个线程（以及从这些线程链接的几个线程）。如果在那之后，你仍然绝对需要一个解决方案，那么你需要雇人来跟踪裂缝并在每次出现新裂缝时修复它们。它永远不会停止。

# ruby - 获取 { } 大括号之间的内容

> ID：11944025
> 
> 赞同：1
> 
> 时间：2012-08-14T00:12:04.450
> 
> 标签：ruby

如何在 Ruby 中获取“{}”之间的内容？例如，

> 我爱你}

我怎样才能获取元素“你”？如果我想替换内容，说将“你”改为“她”，我该怎么做？大概使用`gsub`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T00:24:31.577

```
replacements = {
  'you' => 'her',
  'angels' => 'demons',
  'ice cream' => 'puppies',
}

my_string = "I love {you}.\nYour voice is like {angels} singing.\nI would love to eat {ice cream} with you sometime!"

replacements.each do |source, replacement|
  my_string.gsub! "{#{source}}", replacement
end

puts my_string
# => I love her.
# => Your voice is like demons singing.
# => I would love to eat puppies with you sometime! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T03:08:11.857

从内部获取内容的简单方法`{...}`是：

```
str = 'I love {you}'
str[/{(.+)}/, 1] # => "you" 
```

这基本上是说，“抓住前导`{`中的所有东西到尾随`}`。它不是真正复杂的，可以被嵌套`{}`对愚弄。

可以通过多种方式替换目标字符串：

```
replace_str = 'her'
'I love {you}'.sub('you', replace_str) # => "I love {her}" 
```

一个简单`sub`的将用替换文本替换目标字符串的第一次出现。

您可以使用正则表达式而不是字符串：

```
'I love you {you}'.sub(/you/, replace_str) # => "I love her {you}" 
```

如果目标字符串多次出现，则使用更多文本来定位它。这使用换行分隔符来定位它，然后也替换它们。还有其他方法可以做到这一点，但我会这样做：

```
'I love you {you}'.sub(/{.+}/, "{#{ replace_str }}") # => "I love you {her}" 
```

亚历克斯韦恩的回答很接近但并没有一路走下去：Ruby[`gsub`](http://www.ruby-doc.org/core-1.9.3/String.html#method-i-gsub)有一个非常好的功能，您可以在其中向它传递一个正则表达式和一个哈希，它会将所有出现的正则表达式匹配替换为哈希中的值：

```
hash = {
  'I' => 'She',
  'love' => 'loves',
  'you' => 'me'
}
str.gsub(Regexp.union(hash.keys), hash) # => "She loves {me}" 
```

当您想要获取模板并快速替换其中的所有占位符时，这真的很强大。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T00:21:02.527

您始终可以使用 .index：

```
a = 'I love {bill gates}'
a[a.index('{')+1..a.index('}')-1] 
```

最后一行只是说从第一次出现'{'之后和第一次出现'}'之前获取'a'。然而，重要的是要注意，这只会获取第一次出现 {} 之间的文本。所以它适用于你上面的例子。

我还会使用索引在 {} 之间添加一些新内容。

这看起来像：

```
a[0..a.index('{')] + 'Steve Jobs' + a[a.index('}')..-1] 
```

同样，这只适用于第一次出现的“{”和“}”。

迈克尔·G。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-08-14T00:38:43.860

为什么不使用一些模板引擎，例如：[https ://github.com/defunkt/mustache](https://github.com/defunkt/mustache)

请注意，红宝石可以做到这一点`%{}`：

```
"foo = %{foo}" % { :foo => 'bar' }
#=> "foo = bar" 
```

最后不要忘记检查现有的[ruby​​ 模板引擎](https://www.ruby-toolbox.com/categories/template_engines)- 不要重新发明轮子！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T00:17:37.990

正则表达式是使用 gsub 的方式。就像是：

```
existingString.gsub(/\{(.*?)\}/) { "her" } 
```

# c# - 我需要突出显示另一个元素引用的列表框元素

> ID：11944028
> 
> 赞同：1
> 
> 时间：2012-08-14T00:12:07.593
> 
> 标签：c#, wpf

我正在尝试执行以下操作。我有一个带有绑定到对象列表的 DataTemplate 的 listBox。

我还有另一个绑定到对象的元素。该对象包含一个属性，该属性是对列表框中元素之一的引用。

ListBox 的 DataTemplate 有一个边框，我想在另一个对象引用的列表项周围制作一个额外的粗边框。

我一直在玩触发器等，但我似乎无法弄清楚如何解决这个问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:45:06.840

查看[DataTemplateSelector](http://msdn.microsoft.com/en-us/library/system.windows.controls.datatemplateselector.aspx)。您可以根据绑定对象的属性选择要使用的数据模板。

# ios - AlertView ButtonIndex 不工作

> ID：11944036
> 
> 赞同：0
> 
> 时间：2012-08-14T00:13:07.670
> 
> 标签：ios, xcode, uialertview, alertview

忽略 TextField 因为 buttonIndex 不起作用，所以我将文本字段语法排除在外。

```
-(IBAction)bm1:(id)sender {
UIAlertView *alert = [[UIAlertView alloc]initWithTitle:@"Set Bookmark" message:@"Type URL Here" delegate:self cancelButtonTitle:@"Cancel" otherButtonTitles:@"Ok", nil];
alert.alertViewStyle = UIAlertViewStylePlainTextInput;

                      [alert show];
                      [alert release];
                      }
- (void)alertView:(UIAlertView *)alertview clickedButtonAtIndex:(NSInteger)buttonIndex{
if (buttonIndex == 0) {
    NSLog(@"It works");
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:26:39.703

你附加`<UIAlertViewDelegate>`到头文件了吗？

```
@implementation MyClass : <UIAlertViewDelegate> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T00:26:17.440

尝试使用 alertview.cancelButtonIndex 或 alertview.firstOtherButtonIndex 而不是 0。这将比使用幻数更具可读性。

# c++ - 在共享对象文件中设置 gdb 断点

> ID：11944038
> 
> 赞同：2
> 
> 时间：2012-08-14T00:13:15.857
> 
> 标签：c++, gdb, breakpoints, shared-libraries

我有一个动态加载共享对象库的可执行文件，比如说 foo.so。我不构建 foo.so，它是作为库提供给我的，可以在我的代码中使用。foo.cpp 编译为 foo.so。我无权访问 foo.cpp，但有 foo.so。当我的可执行文件调用此共享库 foo.so 中的函数时（即调用 foo.cpp 中的函数时），我想设置一个断点。他们在 gdb 中有这样做的方法吗？我努力了

```
gdb funcname 
```

但它似乎不起作用。任何指针如何在这一点上打破 gdb？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T05:51:23.403

> 他们在 gdb 中有这样做的方法吗？

是的。

> 我努力了`gdb funcname`

那是行不通的。您需要运行`gdb exename`，然后`break funcname`在`(gdb)`提示符处运行。

那时，GDB 可能会通知您`funcname`尚不存在（因为您还没有动态加载`foo.so`），并会询问您是否要创建*延迟*断点。您应该回答`yes`，每次加载新的共享库时，GDB 都会重试设置此断点。最终这将成功，并且您应该设置断点（自动和静默），当您调用`funcname`后者时，该断点将触发并且 GDB 将停止（这正是您想要的）。

# python - Twisted Python：反应器和协议

> ID：11944040
> 
> 赞同：0
> 
> 时间：2012-08-14T00:13:44.507
> 
> 标签：python, protocols, twisted, reactor

我有几个关于 Twisted reactor 的问题。

1/ 什么样的错误会导致反应堆崩溃/停止/终止？什么样的错误不会？

2/ 我有两个反应器，每个反应器运行不同的协议。我有协议 A 和 B。

一个反应器在每次处理输入时都会创建一个协议 A 的新实例。如果协议 A 的某个实例出现错误，该错误只会影响该实例，并且反应器会保持平稳运行。

另一个反应器只运行一个协议 B 的实例（特别是我用它来处理标准 IO）。就像这样：

```
stdio.StandardIO(ProtocolB())
reactor.run() 
```

如果输入以某种方式在协议 B 中给出错误，那么它会影响整个反应器。在那种情况下反应堆真的停止了吗？

3/ 在上述第二个反应器的情况下，如果检测到错误，是否可以创建协议 B 的新实例来替换旧实例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:07:09.283

> 1/ 什么样的错误会导致反应堆崩溃/停止/终止？什么样的错误不会？

经验法则是：`reactor`运行直到`reactor.stop()`被您调用或响应预期事件，例如 SIGINT 信号（键盘中断）。

> 如果输入以某种方式在协议 B 中给出错误，那么它会影响整个反应器。在那种情况下反应堆真的停止了吗？

不，您的代码中的异常不会停止反应器：

```
import sys
from twisted.internet import reactor, task

def raise_exception():
    raise RuntimeError
reactor.callWhenRunning(raise_exception)

task.LoopingCall(sys.stderr.write, '.').start(.4) # heartbeat
reactor.callLater(5, reactor.stop) # stop reactor
reactor.run() 
```

> 2/ 我有两个反应器，每个反应器运行不同的协议。我有协议 A 和 B。

无论协议数量是多少，都应该只有一个反应器。

> 3/ 在上述第二个反应器的情况下，如果检测到错误，是否可以创建协议 B 的新实例来替换旧实例？

你可以，但你不应该这样做。如果`connectionMade`，`lineReceived` 引发异常，这是一个错误，您应该修复它。

这是一个在异常后重新启动的示例。这只是一个演示，它是可能的，*不要*在实际代码中使用它。

```
from twisted.internet import reactor
from twisted.internet.stdio import StandardIO
from twisted.protocols.basic import LineReceiver

prompt = ">>>> "
class ReverseLineProtocol(LineReceiver):
    delimiter = '\n'

    def connectionMade(self):
        self.sendLine("Write everything in reverse.")
        self.transport.write(prompt)

    def lineReceived(self, line):
        if line == 'raise':
            reactor.callLater(1, launch)
            raise RuntimeError
        self.sendLine(line[::-1])
        self.transport.write(prompt)

def launch():
    StandardIO(ReverseLineProtocol())

launch()
reactor.run() 
```

# solr - 在线熵评估算法

> ID：11944050
> 
> 赞同：1
> 
> 时间：2012-08-14T00:14:52.127
> 
> 标签：solr, lucene, statistics, real-time, entropy

有没有一种方法可以评估类似于[SumamryStatistics的离散值流上的](http://commons.apache.org/math/apidocs/org/apache/commons/math3/stat/descriptive/SummaryStatistics.html)[熵](http://en.wikipedia.org/wiki/Entropy_%28information_theory%29)的均值和偏差？我需要这个算法用于实时 solr 组件，它可能会迭代大型文档集合（100,000）。

相关问题，在类似 Map Reduce 的环境中计算熵的最佳方法是什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:28:26.567

可能有一种方法 - 它在某种程度上取决于流的特征，以及您想要对结果做什么。

样本熵是样本*概率分布*的函数。您可以将每个值的运行计数与运行总计数一起存储，这意味着可以按需计算分布。原谅我草率的Java，我写它已经有一年了。

```
Map<K,Integer> runningCount = new Map<K,Integer>();
int totalCount = 0;

public void addValue(K k) {
    runningCount.insert(k, runningCount.get(k) + 1);
    totalCount += 1;
}

public Map<K,Double> getDistribution() {
    Map<K,Double> dist = new Map<K,Double>();
    for (K k : runningCount.keys()) {
        dist.insert(k, runningCount.get(k) / totalCount);
    }
    return dist;
} 
```

这意味着您还可以按需计算熵：

```
public double getEntropy() {
    Map<K,Double> dist = getDistribution();
    double entropy = 0;
    for (K k : dist.keys()) {
        double p = dist.get(k);
        entropy -= p * Math.log(p);
    }
    return entropy;
} 
```

该算法需要 O( *n* ) 来计算分布和熵，其中*n*是您的流可能采用的值的数量。`addValue`它与流中值的数量无关，从该方法不存储流值的事实可以看出。

# php - Null 作为字符串“null”发送

> ID：11944051
> 
> 赞同：2
> 
> 时间：2012-08-14T00:14:56.043
> 
> 标签：php, jquery, ajax, post, https

我们最近移动了服务器，并注意到了一些奇怪的问题。我们注意到的主要问题是在 php 中执行空值检查的任何变量都被解释为字符串。

例如

```
 if($var == null){
        //do something
    } 
```

已进行的两个关键更改是： 1\. 从 HTTP 服务器更改为 HTTPS 2\. 从 php 版本 5.3.14 更改为 5.3.13

请求是使用 jQuery.ajax 后调用发出的。

我的问题是，是否有任何已知的问题/原因会发生这种情况（例如上面的更改），是否可以采取任何措施来解决问题（只需进行最小的更改）。

一如既往感谢您的回复！

编辑：示例

JS/jQuery

```
 var test = null;
    $.ajax({
        url: 'functions.php',
        data: { action: 'testNullFunction', testVar:test },
        type: 'post',
        success:
        function (output) {
            alert(output)
        }}) 
```

php：

```
 if (isset($_POST['action']) && !empty($_POST['action'])) {
         $action = $_POST['action'];
         switch ($action) {
             case 'testNullFunction':
                 if ($_POST['testVar']==null || is_null($_POST['testVar'])){
                       echo "its null"; 
                } 
             break; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T00:37:29.790

当你这样做时：

```
$.ajax({
    url: 'functions.php',
    data: { action: 'testNullFunction', testVar:test },
    type: 'post',
    success: function (output) {
        alert(output)
    }
}) 
```

您将其`data`作为字符串发送，因此所有值也成为字符串。

当 PHP 接收到它时，它仍然是一个字符串。在这种情况下，PHP 无法确定是否`testVar`包含`null`或`"null"`- 类型信息丢失了。

* * *

您可以通过发送来解决这个问题：

```
data: { action: 'testNullFunction', testVar: JSON.stringify(test) } 
```

并接收：

```
$testVar = json_decode($_POST['testVar']) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T00:17:37.013

有点幼稚的答案，但请尝试进行严格的类型检查。

```
if($var === null){
    //do something
} 
```

或者也许改用 is_null 。

```
if (is_null($var)){
    //do something
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T00:38:28.480

如果您没有按照 JSON 行对数据进行编码，您的字段将作为字符串发送 - 这包括`null`发送为`'null'`当然，如果您针对类似的内容进行评估`if($myVar==null)`并且`$myVar`包含`'null'`它不是真正的 null。

您可能还想[看看这个](https://stackoverflow.com/questions/2794183/cannot-pass-null-to-server-using-jquery-ajax-value-received-at-the-server-is-th)问题。

# c# - 从变量中转义 C# SQL 中的各种字符

> ID：11944053
> 
> 赞同：0
> 
> 时间：2012-08-14T00:15:22.213
> 
> 标签：c#, sql, escaping, character

我正在使用一个绑定到访问数据库的 C# 表单应用程序。该数据库的一部分不在我的控制范围内，特别是包含带有字符串`", ),`和其他此类字符的部分。不用说，这会混淆一些查询，因为我需要使用该列来选择其他数据。这只是一个桌面表单应用程序，问题在于导出器功能，因此无需担心 SQL 注入或其他此类事情。当我使用可能包含引号并将其与 Access 数据库中存储的内容匹配的变量时，如何告诉这个东西在查询中忽略引号等？

好吧，一个例子是我从一行中提取了几列。其中之一可能是这样的：

大（3-1/16" 直径）

你明白了。引号打破了查询。我目前正在使用 OleDb 挖掘数据库，直到现在都没有问题。如果可以得到帮助，我宁愿不要对我目前所做的事情感到厌烦，至少在我准备好进行适当的重构之前不要这样做。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:19:43.327

这实际上并没有你看到的那么大的问题：只是不要通过将 SQL 查询构建为纯字符串来处理它们。使用 SqlCommand 类并使用查询参数。这样，SQL 引擎将为您正确地转义所有内容，因为它会**知道**要直接读取的代码是什么，以及要转义的参数值是什么。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T02:46:15.033

您正在尝试防范 SQL 注入攻击；请参阅[https://www.owasp.org/index.php/SQL_Injection](https://www.owasp.org/index.php/SQL_Injection)。

防止这些攻击的最简单方法是使用查询参数；[http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlparameter.aspx)

```
var cmd = new SqlCommand("select * from someTable where id = @id");
cmd.Parameters.Add("@id", SqlDbType.Int).Value = theID; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T00:18:13.373

至少对于单引号，添加另一个引号似乎有效：`''`变成`'`.

即使注入不应该成为问题，我仍然会考虑使用[parameters](http://www.dotnetperls.com/sqlparameter)。归根结底，它们是更简单的选择，因为它们避免了许多不可预见的问题，注射只是其中之一。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T05:22:36.760

因此，当我阅读您的问题时，您正在将查询构建为 C# 中的字符串，连接已查询的列值，结果字符串要么不再是 C# 中的字符串，要么与访问数据库中的内容不匹配.

如果问题出在 C# 中，我想您将需要某种转义函数，例如

```
stringvar += escaped(columnvalue)
...
private static void escaped(string cv) as string {
  //code to put \ in front of problem characters in cv
} 
```

如果问题在于访问，那么

'逃脱'“逃脱”

＆您可以在'...'中放置一个包含“”的列值，它应该可以工作。

但是我真正的想法是，您尝试运行的 SQL 可能会更好地重组以使用子查询来获取匹配的值，然后您只需将列名与列名进行比较。

如果您发布更多关于您正在生成的查询的信息，以及表结构的一些提示，我会尝试进一步提供帮助 - 或者其他人一定能够给您一些建设性的东西（尽管您可能需要根据 Jet SQL 语法对其进行调整）

# c# - 字符串生成器是正确的选择吗？

> ID：11944054
> 
> 赞同：0
> 
> 时间：2012-08-14T00:15:32.583
> 
> 标签：c#, string, serial-port

因此，根据我对`string`vs`StringBuilder`的理解，字符串生成器实际上会修改自身的实例，而字符串只会创建一个新实例。因此，如果我正确理解这一点，那么通过对不断变化的变量使用字符串方法，我基本上最终可以使用所有内存，直到计算机需要转储它以腾出空间。

我正在做的是使用事件处理程序来监视串行通信。我将接收数据并解析出来，并将其显示在文本框中。事件处理程序当前使用字符串来完成此操作。考虑到更好的编程并且在不需要时不使用所有内存，我正在尝试清理我的代码。

我开始使用字符串生成器进行编码，并开始得到`StringBuilder`不包含 .contains 方法的构建错误。

基本上我很好奇我是否应该不理会它？我应该以不同的方式处理这个问题吗？我是否有正确的理解，这`string`将不可避免地使我失去记忆？

```
private void DataReceivedHandler(object sender, SerialDataReceivedEventArgs e)
{
    SerialPort sp = (SerialPort)sender;

    string indata = sp.ReadExisting();
    rx.AppendText(Environment.NewLine + indata);
    string dataCheck = indata.ToUpper();
    if (dataCheck.Contains("CONNECT") || indata.Contains("CONNECTED"))
    {
        cState.Text = "Connected";
        connectLink();
    }
    if (dataCheck.Contains("NO CARRIER"))
    {
        cState.Text = "Disconnected";
        disconnect();
    }
    dataCheck = null;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T00:17:10.233

你错了；使用 String 不会（通常）导致内存不足。

如果您要进行大量连接，则使用字符串的效率较低，因为每次连接时都需要构建一个新字符串并丢弃旧字符串。
在这种情况下，您应该使用 StringBuilder 来构建字符串，然后`ToString()`在您想要显示它时调用它。

您的代码不包含任何连接，因此使用 StringBuilder 不会有任何好处。

# html - html中的高效表单布局

> ID：11944058
> 
> 赞同：1
> 
> 时间：2012-08-14T00:16:07.953
> 
> 标签：html, css

我正在将 Silverlight 应用程序转换为“html5”网络应用程序。我只是想知道什么是最有效/可读的庄园来布局复杂的企业表格。下面是一个表单示例：

![在此处输入图像描述](../Images/cdb4cae195e138f14a3367ee64c8b70c.png)

我可以在几分钟内把它放在 xaml 中。它的布局如下：

![在此处输入图像描述](../Images/a2e7b330e51e0b1d465f6d2c6d5c51b0.png)

我听说在 html 中使用表格的形式很糟糕。任何意见，将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:42:34.897

有些人可能会争辩说，表格确实是表格数据，或者至少是表格数据的输入。而不是使用如下表：

```
Name      | John 
Last Name | Doe
Country   | XX 
```

你可以那样说：

```
Name      | <input>
Last Name | <input>
Country   | <input> 
```

也可以像桌子一样工作，所以我认为这取决于您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T05:28:43.993

我建议使用面向对象的 CSS 来自动解决布局问题。您将希望在不同的场景中使结构适合不同的大小，因此您可能希望在 CSS 中使用网格系统来集中设计布局。

```
.left { float:left; }
.right { float: right }
.global { width: 960px; }
.onefifth { width: 20%; }
.onetenth { width: 10%; }
.onetwentieth { width: 5%; } 
```

等等...

我向您保证，这种方法将大大减少您的样式，从而提高性能。

恕我直言，不使用表格让生活更轻松。

参见：[https](https://github.com/stubbornella/oocss/wiki/) ://github.com/stubbornella/oocss/wiki/ （面向对象的 CSS）这是 Nicole Sullivan 对 Yahoo 和 Facebook 所做的，绝对值得一看

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T00:26:18.113

首先，您真的需要 html5 还是只是听说它很现代？

其次，如果您不将表格用于表格数据，表格就会很糟糕。例如，使用表格来布局网站是一件非常糟糕的事情。对于您的场景，我建议您稍微了解一下 css 并利用一些浮动、div、字段集等。

# architecture - 如何使用 CMake 检测目标架构？

> ID：11944060
> 
> 赞同：57
> 
> 时间：2012-08-14T00:16:39.297
> 
> 标签：architecture, cmake, build-process, qmake

我已经做了很多研究，但无法找到答案……如何使用 CMake 可靠地找到我正在编译的目标架构？基本上，相当于 qmake 中的 QMAKE_TARGET.arch。

大多数消息来源似乎都建议使用 CMAKE_SYSTEM_PROCESSOR，但这是一个糟糕的解决方案，因为例如，无论您是为 i386、x86_64、ppc 还是 ppc64 编译，它都会在 OS X 上始终返回 i386。

同样，CMAKE_SIZEOF_VOID_P 给出*系统*的指针大小，而不是目标。

我知道有 CMAKE_OSX_ARCHITECTURES，但如果未设置，它可能为空，在这种情况下，它似乎默认为系统能够执行的任何操作。那么如何找到目标架构信息呢？

特别是对于 OS X，我如何区分 32、64 和 Intel Universal？

* * *

## 回答 #1

> 赞同：43
> 
> 时间：2012-08-19T04:26:59.653

所以我为我的问题设计了一个相当有创意的解决方案……看来 CMake 没有任何功能来检测目标架构。

现在，我们知道我们可以在 C 中轻松做到这一点，因为像`__i386__`,`__x86_64__`等符号将根据您的环境进行定义。幸运的是，CMake 有一个 try_run 函数，它将在配置阶段编译和运行任意 C 源代码文件。

然后我们可以编写一个小程序，它使用一堆 ifdef 并将架构名称作为字符串写入控制台。唯一的问题是，这仅在主机和目标系统相同时才有效……它在交叉编译期间无法工作，因为虽然您可以编译二进制文件，但无法运行它来查看其输出。

这就是事情变得有趣的地方。我们可以通过故意编写一个损坏的 C 程序来利用 C 预处理器来获取必要的信息……我们使用基于 ifdefs 将架构名称写入控制台的原始概念，但我们不会这样做，而是简单地放置一个 #错误预处理器指令代替 printf 调用。

当 CMake 的 try_run 函数编译 C 文件时，编译总是会失败，但是我们在 #error 指令中放置的任何消息都会显示在编译器的错误输出中，try_run 返回给我们。

因此，我们所要做的就是使用一些 CMake 字符串命令从编译器的错误输出中解析架构名称，并且我们可以检索目标架构......即使在交叉编译时也是如此。

代码的 OS X 特定部分主要使用 CMAKE_OSX_ARCHITECTURES 来确定目标架构，但在未指定的情况下，它将使用与其他系统相同的代码并正确返回 x86_64（对于现代系统，这是编译器的默认值）或 i386 （对于较旧的 OS X 系统，例如 Leopard）。

我已经使用 Visual Studio 9 和 10 生成器（x86、x86_64、ia64）、Xcode、NMake、MSYS Makefile 和 Unix Makefile 在 Windows、OS X 和 Linux 上测试并验证了它的工作原理。每次都返回正确的结果。

**注意：**如果您故意将 -m32 或 -m64 传递给编译器或其他可能影响目标体系结构的标志（有没有办法将所有环境设置传递给 try_run？），此解决方案可能会失败；这不是我测试过的东西。只要您使用生成器的默认设置并且所有目标都针对相同的体系结构进行编译，您应该没问题。

我的解决方案的完整源代码可以在 GitHub 上找到：[https ://github.com/petroules/solar-cmake/blob/master/TargetArch.cmake](https://github.com/petroules/solar-cmake/blob/master/TargetArch.cmake)

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2013-10-11T09:03:12.557

对于主机和目标系统相同的情况，我有一个解决方案。

首先你需要调用“uname -m”来获取“*机器硬件名称*”。之后，您需要切断尾随的“*回车*”以将实际值返回到提供的变量中。

```
EXECUTE_PROCESS( COMMAND uname -m COMMAND tr -d '\n' OUTPUT_VARIABLE ARCHITECTURE ) 
```

现在您可以打印出变量 ${ARCHITECTURE}：

```
message( STATUS "Architecture: ${ARCHITECTURE}" ) 
```

或者做一些规范化来映射，例如“x86_64”，“amd64”，......到例如“64Bit”。32 位也是如此。有了这个，你可以执行架构依赖编译，如：

```
if( ${ARCHITECTURE} STREQUAL "64Bit" )
    set( BLA_LIBRARY "/opt/lib/libBla.so" )
else()
    set( BLA_LIBRARY "/opt/lib32/libBla.so" )
endif() 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-11-30T10:30:27.863

**安卓`${ANDROID_ABI}`**

`${ANDROID_ABI}`变量是 Android 中要走的路，它假定像`arm64-v8a`等值`x86_64`。

它用于官方 NDK 库示例：[https ://github.com/googlesamples/android-ndk/blob/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/app/src/main/cpp/CMakeLists.txt#L25](https://github.com/googlesamples/android-ndk/blob/840858984e1bb8a7fab37c1b7c571efbe7d6eb75/hello-libs/app/src/main/cpp/CMakeLists.txt#L25)

我在以下位置进一步评论了该示例：[NDK：如何在不考虑架构的情况下包含预构建的共享库](https://stackoverflow.com/questions/17172153/ndk-how-to-include-prebuilt-shared-library-regardless-of-architecture/47571060#47571060)

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2014-05-13T05:09:51.937

如果您的构建过程涉及超过 1 个目标，那么最好让 CMake**知道**它正在构建的 ARCH/工具链。您可以按照 CMake 交叉编译的[说明](http://www.cmake.org/Wiki/CMake_Cross_Compiling)进行操作，该说明鼓励您创建工具链 CMake 文件，以便您选择正在使用的工具链/编译器。

我创建了一个用于为 arm 处理器构建我的 C++ Linux 应用程序，并将其命名为`toolchain-arm.cmake`.

它包括`set(CMAKE_SYSTEM_PROCESSOR arm)`.

然后我像这样执行CMake：

`cmake -DCMAKE_BUILD_TYPE=Release -DCMAKE_TOOLCHAIN_FILE={my toolchain cmake path}/toolchain-arm.cmake {my source path}`

在我项目的 CMakeList.txt 中，我可以以任何我希望的方式引用 CMAKE_SYSTEM_PROCESSOR。

在为 X86 构建时，我不包含对 -DCMAKE_TOOLCHAIN_FILE 的引用，从而使 CMAKE_SYSTEM_PROCESSOR 未定义，或者至少未定义为`arm`.

这是我的工具链-arm.cmake

```
SET(CMAKE_SYSTEM_NAME Linux)
SET(CMAKE_SYSTEM_VERSION 1)
set(CMAKE_SYSTEM_PROCESSOR arm)

# specify the cross compiler
SET(ENV{TOOLCHAIN_ROOT} /home/user/toolchain/tools-master/arm-bcm2708/gcc-linaro-arm-linux-gnueabihf-raspbian/bin )
SET(CMAKE_C_COMPILER   $ENV{TOOLCHAIN_ROOT}/arm-linux-gnueabihf-gcc)
SET(CMAKE_CXX_COMPILER $ENV{TOOLCHAIN_ROOT}/arm-linux-gnueabihf-gcc)

# search for programs in the build host directories
SET(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)
# for libraries and headers in the target directories
SET(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)
SET(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY) 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2017-03-03T16:35:22.240

这篇文章很旧，如果在这里复活死者，我很抱歉，但我只是想分享我所做的解决方案。

我不想使用任何外部应用程序，不幸的是，我们正在使用的 toolchain.cmake 文件没有在另一个变量中设置拱门，所以我通过查看`CMAKE_C_FLAGS`和`CMAKE_CXX_FLAGS`寻找`-march`GCC 参数的变量来检测它。如果没有，则回退到`CMAKE_HOST_SYSTEM_PROCESSOR`。

快速浏览一下 Clang 文档似乎表明这不适用于该文档，但它只需要第二个正则表达式步骤来匹配其预期参数。

```
set(TARGET_ARCH_REGEX "^.*-march[= ]([^ ]+).*$")
string(REGEX MATCH "${TARGET_ARCH_REGEX}" TARGET_ARCH_MATCH ${CMAKE_C_FLAGS} ${CMAKE_CXX_FLAGS})
if (TARGET_ARCH_MATCH)
    string(REGEX REPLACE "${TARGET_ARCH_REGEX}" "\\1" TARGET_ARCH ${CMAKE_C_FLAGS} ${CMAKE_CXX_FLAGS})
else()
    set(TARGET_ARCH ${CMAKE_HOST_SYSTEM_PROCESSOR})
endif() 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-24T09:25:18.030

目前，您不需要任何技巧来确定目标架构：每个目标变量 OSX_ARCHITECTURES 已添加到 cmake 中，可用于您的目的： [http ://public.kitware.com/Bug/view.php?id= 8725](http://public.kitware.com/Bug/view.php?id=8725)

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-08-14T11:50:04.157

我认为最简单和最可靠的解决方案是手动指定架构，用于您正在构建的平台（您可以使用`cmake . -DMY_ARCHITECTURE=x86`或类似的东西）。至少这就是我们在项目中所做的，因为你上面描述的同样的问题

* * *

## 回答 #8

> 赞同：-4
> 
> 时间：2016-12-01T10:04:13.903

这是了解主机架构的经过充分测试的方法：

```
# Store in CMAKE_DEB_HOST_ARCH var the current build architecture
execute_process(COMMAND
  dpkg-architecture
    -qDEB_HOST_ARCH
  OUTPUT_VARIABLE
    CMAKE_DEB_HOST_ARCH
  OUTPUT_STRIP_TRAILING_WHITESPACE
) 
```

稍后根据需要在 CMakeLists 中使用该信息

```
if(${CMAKE_DEB_HOST_ARCH} MATCHES "armhf")
  ...
elseif(${CMAKE_DEB_HOST_ARCH} MATCHES "i386")
  ...
else()
  ...
endif() 
```

# php - 如何打开链接并引用不发送？

> ID：11944070
> 
> 赞同：-3
> 
> 时间：2012-08-14T00:18:07.683
> 
> 标签：php, curl, reference, get, referer

你好朋友我有一个问题，如何打开另一个网站的链接而不发送推荐人？

您尝试从中获取链接的站点检测到标题并且不让链接工作。您要获取链接的站点是[http://fank.mobi/downloads/ngame/860/](http://fank.mobi/downloads/ngame/860/) 我通过php curl 做了一个系统来获取该站点的android 游戏。但是下载链接不起作用。我不想将文件保存在我的服务器上，所以我想获取链接。

我尝试使用 target _blank 打开链接不起作用。

我尝试使用 php 打开标题中的链接，例如

```
header ("Referer: http://  site2.com");
header ("Location: http:// site2.com"); 
```

并没有工作。

我尝试使用 javascript 打开链接`document.location.href = "site2.com";` 但没有用

有人可以帮我吗？预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:22:50.937

有源站点使用`https`。在安全页面上单击链接时，不会将引用字符串发送到外部站点。

在 Firefox 中，将设置更改`network.http.sendRefererHeader`为 0。您可以通过转到`about:config`Firefox 中的 URL 进行设置。

使用 cURL，省略`Referer`标题。如果 cURL 不起作用，还有另一个原因；也许您没有发送有效的用户代理或没有有效的会话 cookie。

*您无法*告诉浏览器不要使用 Javascript 或 PHP 发送 Referer 标头。如果没有让用户安装插件来禁用此类功能，我认为上述方法是您唯一的选择。

如果这些答案没有帮助，请澄清您的意思。

# asp.net - 判断服务器上的文件是否存在

> ID：11944072
> 
> 赞同：0
> 
> 时间：2012-08-14T00:18:21.047
> 
> 标签：asp.net

我正在读取一个可能在也可能不在服务器上的文件，如下所示：

```
string TheFile = System.IO.File.
ReadAllText(HttpContext.Current.Server.MapPath("~\\Scripts\\MyScript.js")); 
```

如果文件不存在，则会引发异常。我可以通过 try/catch 来控制它，但我想知道是否有一种方法可以使用不太引人注目的方法来知道文件是否存在。

感谢您的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:21:16.570

您可以通过在 MapPath 中使用正斜杠给出相对路径来做到这一点。更多关于 MapPath 的信息如下。

*   Server.MapPath(".") 返回正在执行的文件（例如 aspx）的当前物理目录
*   Server.MapPath("..") 返回父目录
*   Server.MapPath("~") 返回应用程序根目录的物理路径

*   Server.MapPath("/") 返回域名根目录的物理路径

    ```
    if(File.Exists(HttpContext.Current.Server.MapPath("~/Scripts/MyScript.js"))
    { 

    } 
    ```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:21:17.177

你总是可以使用，等待它，`File.Exists(...)`方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:38:43.710

您也可以使用 FileInfo 对象。

# batch-file - IF 块内变量中的括号

> ID：11944074
> 
> 赞同：14
> 
> 时间：2012-08-14T00:19:00.520
> 
> 标签：batch-file, parentheses

在我的一个脚本中，我需要在`IF`语句中使用包含括号的变量，但要么字符串缺少右括号，要么脚本过早退出`* was unexpected at this time`（实际上不是星号），具体取决于场景。

**例子**

```
@echo off

SET path=%programFiles(x86)%
echo Perfect output: %path%
IF NOT "%path%" ==  "" (
    REM Variable is defined
    echo Broken output:  %path%
)

pause >nul 
```

**输出**

```
Perfect output: C:\Program Files (x86)
Broken output:  C:\Program Files (x86 
```

我认为/知道这是因为它认为右括号`C:\Program Files (x86)`是语句的结尾，`IF`它在语句完成之前退出`echo`。

有没有一种简单的方法来解决这个问题？最好不诉诸

1.  单行`IF`语句，因为我需要在其中运行多行代码，
2.  大量的`GOTO`s，因为它不实用，
3.  `SETLOCAL EnableDelayedExpansion`并使用`!path!`而不是`%path%`，因为我记得在某处读到该方法在操作系统中无法始终如一地工作。

如果不是，我很乐意接受所提供的最可靠的解决方案，无论它是什么。

（这个场景没有争议。这只是一个精炼的，集中的问题示例。结构需要像这样，因为它在我的实际脚本中，原因我不会进入。它除了点，它只会混淆事情并分散实际问题的注意力。）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-14T03:09:36.760

首先 - 您永远不应该将 PATH 变量用于自己的用途。它是一个保留的环境变量。将其用于您自己的目的可能会破坏您的脚本。

最简单的解决方案实际上是使用延迟扩展。只要您的平台使用 CMD.EXE，您就可以访问延迟扩展。

但是有一种相对简单的方法可以让它在不延迟扩展的情况下工作。您可以使用消失的引号。在解析命令时，引号作为 FOR 变量的名称存在。它在执行时间之前扩展为空。

```
@echo off

SET mypath=%programFiles(x86)%
echo Perfect output: %mypath%
IF NOT "%mypath%" ==  "" (
  REM Variable is defined
  for %%^" in ("") do echo fixed output:  %%~"%mypath%%%~"
)

pause >nul 
```

***编辑 - 何时使用延迟扩展：对评论的回应***

我通常只在需要时使用延迟扩展（或者更准确地说，当它有利时）。话虽如此，我通常发现它在我的批处理代码的某些部分是有利的。

主要优势

*   在代码块内，以查看块内变量的更改
*   取消引用变量的名称时。如果将变量名作为参数传入，则可以通过延迟扩展获取变量的值：`echo !%1!`
*   当使用变量作为参数进行搜索和替换或子字符串操作时：`echo !var:%search%=%replace%!`, `echo !var:%start%,%len%!`.
*   每当我需要扩展值而不担心其中的特殊字符需要转义或引用时：`set "var=A&B" & echo !var!`

上面还有其他方法（除了最后一种），但延迟扩展是最简单、最有效（执行速度最快）和最可靠的选择。

主要缺点

*   `!`如果启用延迟扩展，任何包含其值的 FOR 变量在扩展时都将被破坏。我经常在 FOR 循环中打开和关闭延迟扩展来解决这个问题。
*   它不适合执行“宏”（执行包含在变量值中的代码），因为命令解析的许多重要阶段发生在延迟扩展之前。通过延迟扩展执行的“宏”无法使用如此多的批处理功能。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-22T13:13:42.927

我的建议是：

```
if (condition_TRUE) goto goodbye_parenthesis_BEGIN

goto goodbye_parenthesis_END  ----- line when previous condition is FALSE ----
:goodbye_parenthesis_BEGIN ----- line when previous condition is TRUE ----

...
variable treatment
...

:goodbye_parenthesis_END 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T00:32:01.857

语句中的已解析变量过早关闭`)`块。 `echo``IF`

通常，您可以通过转义`)`with来解决此`^)`问题，但您不能修改环境变量以解析为`C:\Program Files (x86^)`.

您可以通过用引号将变量括起来来防止此问题。

作为一个更简单的例子：

```
> SET bad=a)b
> IF 1 == 1 ( ECHO %bad% )
b was unexpected at this time.
> IF 1 == 1 ( ECHO "%bad%" )
"a)b" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-10-15T15:46:01.067

正如其他人已经指出的那样，未转义和未引用的右括号`)`无意中结束了带括号的`if`块。

除了转义、引用、[延迟扩展](https://ss64.com/nt/delayedexpansion.html "启用延迟扩展")和“消失的引用”之外，还有以下更多选项：

1.  在引用的值上使用[`for`](https://ss64.com/nt/for.html "为了")元变量并通过[`~`-modifier](https://ss64.com/nt/syntax-args.html "操作方法：将命令行参数（参数）传递给 Windows 批处理文件。")删除引号：

    ```
     @echo off

     set "PATH=%ProgramFiles(x86)%"
     echo Perfect output:  %PATH%
     if not "%PATH%" == "" (
         rem Variable is defined
         for %%P in ("%PATH%") do echo Unbroken output: %%~P
     )

     pause > nul 
    ```

2.  使用[`call`命令](https://ss64.com/nt/call.html "称呼")启动另一个变量扩展阶段，以及加倍（转义）`%`-symbols：

    ```
     @echo off

     set "PATH=%ProgramFiles(x86)%"
     echo Perfect output:  %PATH%
     if not "%PATH%" == "" (
         rem Variable is defined
         call echo Unbroken output: %%PATH%%
     )

     pause > nul 
    ```

3.  通过[子字符串替换](https://ss64.com/nt/syntax-replace.html "操作方法：编辑/替换变量中的文本")进行转义，这发生在检测到[`^`-escaping](https://ss64.com/nt/syntax-esc.html "操作方法：在 Windows 命令行中转义字符、分隔符和引号。")之前：

    ```
     @echo off

     set "PATH=%ProgramFiles(x86)%"
     echo Perfect output:  %PATH%
     if not "%PATH%" == "" (
         rem Variable is defined
         echo Unbroken output: %PATH:)=^)%
     )

     pause > nul 
    ```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-14T00:27:47.673

如果我读错了，请原谅我，但是“NOT”不是导致控件进入括号中的 if 并运行损坏的输出吗？

关于什么：

```
@echo off

echo Perfect output: %programFiles(x86)%
IF NOT "%programFiles(x86^)%" ==  "" (
    REM Variable is defined
    echo Broken output:  %programFiles(x86)%
) 

pause >nul 
```

?

# c++ - 访问未初始化的值会导致性能下降吗？

> ID：11944079
> 
> 赞同：3
> 
> 时间：2012-08-14T00:19:19.867
> 
> 标签：c++, performance, optimization, micro-optimization, initialization

我正在优化一个矩阵数值热点。

目前，我正在进行阻塞和[循环展开](http://en.wikipedia.org/wiki/Loop_unwinding)以提高性能。但是，我故意避免剥去边框。相反，我让阻塞步骤溢出，当然，算法随后会触及未初始化的值。

但是，矩阵被慷慨地预先分配以应对溢出，因此我实际上并没有非法访问内存位置。

我不剥皮有几个原因：

*   懒惰
*   由于剥离边界案例的位置非常糟糕，性能受到影响。
*   避免复杂的边框剥离代码。

但是，我想知道这些触及未初始化值的溢出访问是否真的会导致性能下降？

我可以预见地知道未初始化的访问发生在哪里，并且它们也通过 valgrind 报告。我还使用 Intel 的 VTune 对代码进行了概要分析，并且看不到任何表明性能下降的迹象。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T00:48:48.500

只是为了摆脱迂腐的东西：

根据标准，如果您使用未初始化的数据，可能会发生不好的事情。（该标准允许可能触发异常的“陷阱”值。）但出于所有实际目的，这可能不适用于此处。

* * *

**如果您正在处理整数**，则访问和操作未初始化的数据不会影响性能。（除除法外，所有操作通常都是固定延迟）

**对于浮点数**，有两个问题：

1.  [信号 NaN](http://en.wikipedia.org/wiki/NaN#Signaling_NaN)
2.  [非规范化值](http://en.wikipedia.org/wiki/Denormal_number)

根据环境，信号 NaN 可能会触发硬件异常。所以这实际上是一个正确性问题，而不仅仅是一个性能问题。

非正规浮点数与此有关可能违反直觉。但是， *未初始化的数据很有可能被非规范化*。

[而且您真的不想弄乱非规范化的浮点数。](https://stackoverflow.com/questions/9314534/why-does-changing-0-1f-to-0-slow-down-performance-by-10x)

因此，如果您很不幸地使未初始化的值甚至具有一个非规范化值，那么您可能会在每次循环迭代结束时预期一个令人讨厌的 100+ 循环惩罚。现在取决于循环有多大，这可能会或可能不会重要。

也就是说，**为什么未初始化的数据容易被非规范化？**如果浮点值的前几位为零，则将其非规格化。就这么容易。如果数据曾经是整数或 64 位指针......当重新解释为浮点值时，它将被非规范化。

* * *

建议：

*   零初始化数据。如果它太昂贵，至少将端点初始化为零。
*   通过放入清理代码来避免访问未初始化的数据。像[达夫的设备](http://en.wikipedia.org/wiki/Duff%27s_device)这样的东西可能是合适的。虽然我通常更喜欢一组二进制减少 if 语句。

# debugging - WinDbg，如果测试机器在同一交换机上，主机会失去网络

> ID：11944081
> 
> 赞同：1
> 
> 时间：2012-08-14T00:19:24.077
> 
> 标签：debugging, windbg, remote-debugging

我对 WinDbg 有一个非常奇怪的问题，想知道是否有人可以向我解释为什么会发生这种情况。

所以这里是设置：

*   使用 WinDbg 调试目标 Windows 7 64 位机器
*   也运行 Windows 7 64 位的主机
*   通过火线连接的主机和测试机器
*   主机和测试机连接到同一个交换机（一台 Netgear 千兆交换机，8 端口）
*   闯入测试机

问题：大约 10 秒后主机失去网络连接

什么可以立即解决问题：

*   在测试机上运行 (Go)
*   拔下测试机的以太网电缆

有谁知道为什么会发生这种情况，是否有解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T13:58:59.647

尝试在目标机器的网络适配器上禁用流控制（通常在设备的设备管理器设置中有一个选项）。如果您没有特定的流量控制选项（或者即使您有），也请将网络适配器设置为半双工模式。

# java - 从方法返回数组

> ID：11944082
> 
> 赞同：0
> 
> 时间：2012-08-14T00:19:25.117
> 
> 标签：java, arrays, swing, methods

这是在主课

```
actionsClass actionObject = new actionsClass(tipArray, hourArray, 
     hourlyWageInput, gasArray, wageArray, incomeArray, totalHourlyEarnings, 
     totalGas, totalHours, avgGasLabel);

actionObject.calculateTable(); 
```

这是我尝试实现该方法的类（当前声明的变量过多）：

```
import javax.swing.JButton;
import javax.swing.JLabel;
import javax.swing.JTextField;

public class actionsClass {

private JLabel hourlyWage, blank, row2, totalTips, totalHours, totalHourlyEarnings, 
totalPay, weekPay, day, totalGas, totalHoursLabel, totalTipsLabel, totalGasLabel, 
totalWageLabel, avgGas, avgGasLabel;
private JTextField hourlyWageInput;

private double incomeArray[] = new double[7];
private JTextField tipArray[] = new JTextField[7];
private JTextField hourArray[] = new JTextField[7];
private JTextField gasArray[]= new JTextField[7];
private JLabel wageArray[] =new JLabel[7];

public actionsClass() {
}

public actionsClass(JTextField[] tipArray, JTextField[] hourArray,
        JTextField hourlyWageInput, JTextField[] gasArray,
        JLabel[] wageArray, double[] incomeArray,
        JLabel totalHourlyEarnings, JLabel totalGas, JLabel totalHours,
        JLabel avgGasLabel) {
    this.tipArray = tipArray;
    this.hourArray = hourArray;
    this.hourlyWageInput = hourlyWageInput;
    this.gasArray = gasArray;
    this.wageArray =  wageArray;
    this.incomeArray =  incomeArray;
    this.totalHourlyEarnings =  totalHourlyEarnings;
    this.totalGas = totalGas;
    this.totalHours = totalHours;
    this.avgGasLabel = avgGasLabel;
}

public String calculateTable (){
    for (int i = 0; i < 7; i++) {
        double tipx = Double.parseDouble(tipArray[i].getText());
        double houry = Double.parseDouble(hourArray[i].getText());
        double hourlyz = Double.parseDouble(hourlyWageInput.getText());

        String[] wageArrayStrings = null;

        if (houry != 0 ){
            wageArrayStrings[i] = String.format("%.2f", (hourlyz*houry+tipx)/houry);

        }
        else {
            wageArrayStrings[i] = ("$ 0.00");
        }

    }
    return wageArrayStrings[];
} 
```

}

return wageArrayStrings[] 存在语法错误；带或不带括号。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:21:54.963

首先，返回类型应该是`String[]`.

然后你需要初始化数组（正如@MattBall 指出的，在循环之前）：

```
String[] wageArrayStrings = new String[7];
for (int i = 0; i < 7; i++) { 
```

然后你可以做

```
return wageArrayStrings; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:20:20.330

它应该只是 return `wageArrayStrings`; 不需要方括号，应该`String[]`改为返回类型`String`（假设您的意图是返回字符串数组）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T00:22:29.813

它应该只是（也改变了函数返回类型） -

```
public String[] calculateTable () {

    //// your code.
    return wageArrayStrings;
} 
```

此外，您还没有初始化您的数组。您应该在 for 循环之前执行此操作。

# css - 如何将内部容器移到外部容器之外？

> ID：11944084
> 
> 赞同：0
> 
> 时间：2012-08-14T00:19:32.060
> 
> 标签：css

**编辑 1**

已使用 jsfiddle 链接进行了更新。[http://jsfiddle.net/DrFSV/](http://jsfiddle.net/DrFSV/)

看到最后一行的波浪形图像了吗？我正试图在#outer_middle 之外采取行动。

建议？

这与原始链接有关。已删除网站的链接。

我有一个名为#outer_middle 的div 容器，在其中，我还有另外两个名为#middle 和#sidebar 的容器。

我试图让#middle 里面的 div 在容器外面有点......

所以，我把位置：相对于#outer_middle，位置：绝对到#diy（带有黑色边框的那个）加上left：-90px;

（根据我的理解，如果你试图让一个内部容器移动到它的外部容器之外，你需要像这样放置相对和绝对定位）。

它影响侧边栏（粉红色列），位于#middle 下方，diy 图像*位于容器内部的*左侧，而不是外部。

为什么？

如何让#diy 移到容器的左侧？

是否有可能这样做以使#diy 也保留在流程中？

请给点建议好吗？如果我的问题不清楚，请告诉我。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:28:38.297

如果我正确理解您的问题，您的元素似乎`#diy`已经在容器的左侧，正如您所说的那样，它不是“外部”。

尝试调整`z-index`#diy 元素的CSS 属性。具有较大 z-index 的元素比具有较低 z-index 的元素放置在页面上“更高”。为了确保`#diy`它会在顶部，添加一个 99 的 z-index：

```
z-index: 99; 
```

到 CSS。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:32:37.420

`#outer_top`将您的and更改`#top`为下面的代码。看看这是否是您要实现的目标：

```
#outer_top {
  background-color: red;
  width: 1000px;
  margin: 0 auto;
}

#top {
  margin: 0 0 0 -90px;
  width: 500px;
  background-color: pink;
  height: 100px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:08:31.507

似乎如果您将 #outer_middle 的溢出设置为可见（或者，只需将其删除），您就会得到您想要的结果。

# android - 如何使用OpenGL（libGDX）为纹理指定源矩形？

> ID：11944088
> 
> 赞同：0
> 
> 时间：2012-08-14T00:19:48.103
> 
> 标签：android, libgdx, texture-mapping

所以我对 OpenGL 比较陌生，在这种情况下，我使用 libGDX 在我的目标平台（Android）上绘图。我想要做的是为我的网格纹理指定一个源矩形，以便我可以将一堆纹理打包到一个文件中，然后使用该源矩形选择正确的纹理。然后应该使用应用到它的较小纹理来绘制网格。任何帮助，将不胜感激。

PS 我对 DirectX 和 XNA 非常有经验，因此非常感谢可以在此解决方案和那些帮助我理解的框架之间进行比较。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:55:48.963

我认为您正在寻找“纹理图集”支持（由多个单独纹理组成的单个方形纹理）。LibGDX 包括对从纹理图集构建精灵和纹理网格的运行时支持，并且 libGDX 还包括一个“纹理打包器”工具，用于生成这些纹理和描述它们的文本文件。还有一些不错的 3rd 方工具，例如“TexturePacker Pro”，可以生成与 libGDX 兼容的纹理图集。

有关更多详细信息，请参阅此问题+答案：[来自 LibGDX 中的 texturepacker 的纹理](https://stackoverflow.com/questions/10991341/texture-from-texturepacker-in-libgdx/11001013)

# cocoa - 可可：怎么画分？

> ID：11944092
> 
> 赞同：0
> 
> 时间：2012-08-14T00:20:10.530
> 
> 标签：cocoa

我想在鼠标向下移动时画出它的轨迹。我想我可以通过获取所有 NSPoints 并绘制这些点来做到这一点，但我不知道如何在屏幕上绘制一个点。请帮我！或者我可以采取什么其他方法来实现它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:25:33.103

这些不是您要寻找的机器人。

呃 ..

我的意思是：这不是你想画的点。

画线，从一点到下一点。（然后，当然，从下一个到下一个，依此类推）。

# android - 如何在Android中的单个视图上浮动多个视图

> ID：11944094
> 
> 赞同：1
> 
> 时间：2012-08-14T00:20:19.740
> 
> 标签：android, android-view, floating

我正在尝试找出一种将多个视图浮动到另一个视图上的方法，可能是 a`ListView`或`GridLayout`. 几乎所有问题的答案都是`FrameLayout`，不幸的是，这不起作用，因为它被制作为浮动单个视图，因此排除了它的问题。我正在考虑使用`RelativeLayout`，但我无法弄清楚如何使它与它一起工作。有没有人能想出办法做到这一点？任何建议将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:24:52.153

较晚的孩子`RelativeLayout`浮在较早的孩子身上。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">

    <Button
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:text="@string/big"
        android:textSize="120dip"
        android:textStyle="bold"/>

    <Button
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerInParent="true"
        android:text="@string/small"/>

</RelativeLayout> 
```

第二个`Button`漂浮在第一个之上`Button`，给你：

![大下小](../Images/eb999bda8c88a5fca3893ca4a0c7a2af.png)

这是完整的示例项目：[https](https://github.com/commonsguy/cw-omnibus/tree/master/Containers/RelativeOverlap) ://github.com/commonsguy/cw-omnibus/tree/master/Containers/RelativeOverlap 。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:24:17.537

如果我按照您的要求进行操作，那么针对这个看似无关的问题发布的解决方案似乎也适用于您的应用程序：

[Android - 如何显示具有值但显示不同的微调器](https://stackoverflow.com/questions/9972771/android-how-to-display-a-spinner-with-value-but-display-a-different-one)

# c++ - STL 多图关联容器

> ID：11944095
> 
> 赞同：0
> 
> 时间：2012-08-14T00:20:43.000
> 
> 标签：c++, visual-c++

有谁知道如何创建两个多图关联容器。第一个将有重复的键。然后我想发布算法来搜索所有重复项并将它们移动到第二个容器中，并可能删除第一个容器中的原始重复项。

IE ：

```
typedef multimap< int, int, less< int > > mma;
mma contain1;

typedef multimap< int, less< int > > ne;
ne contain2;

cointain1.insert(mma::value_tpe(5, 2);
cointain1.insert(mma::value_tpe(5, 3);
cointain1.insert(mma::value_tpe(5, 3);
cointain1.insert(mma::value_tpe(6, 2); 
```

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:07:35.017

阅读`multi_map::lower_bound`和`multi_map::upper_bound`。他们会给你一对迭代器，它们定义了一系列与参数相等的值。如果序列的长度大于 1，则您有重复项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:00:06.917

我建议您遍历第一个多图，寻找重复项。找到它们后，将它们移动到第二个多图。

```
typedef multimap<int, int> mma;
mma contain1;
mma contain2;

contain1.insert(mma::value_type(5, 2);
contain1.insert(mma::value_type(5, 3);
contain1.insert(mma::value_type(5, 3);
contain1.insert(mma::value_type(6, 2); 

int previous;

for (mma::iterator i = contain1.begin(); i != contain1.end(); )
    if (i != contain1.begin() && i->first == previous)
    {
        contain2[i->first] = i->second;

        // "maybe delete the original duplicates in the first container"...
        contain1.erase(i++);
    }
    else
    {
        previous = i->first;
        ++i;
    } 
```

# java - wsdl2Java 不正确：两个 同名元素异常

> ID：11944098
> 
> 赞同：1
> 
> 时间：2012-08-14T00:21:09.547
> 
> 标签：java, wsdl, wsdl2java

我正在尝试使用 WSDL2Java 工具从这个 wsdl 生成 java 类。

[http://sms2.cdyne.com/sms.svc?wsdl](http://sms2.cdyne.com/sms.svc?wsdl)

但是，我遇到了一个例外。

java.io.IOException：找到两个具有相同名称“sms2SOAPbasicHttpBinding”的元素

我验证了所有端口名称在 wsdl 中都是唯一的。如果有人启发我了解这里发生的事情，将不胜感激。

# javascript - 从静态变化到实时变化

> ID：11944099
> 
> 赞同：0
> 
> 时间：2012-08-14T00:21:09.337
> 
> 标签：javascript, live

我有一个 Javascript 代码，用于根据一天中的时间更改某些元素的外观。

我的问题是：有没有办法让这些外观变化在页面上“实时”可见，而不需要人们重新加载/刷新网页？

```
<script type="text/javascript">
function getDayTime(hours) {
if (hours > 20 || hours < 5)
return "night";

if (hours > 17)
return "dusk";

if (hours > 8)
return "day";

return "dawn";
}

$(function() {
document.body.className = getDayTime(new Date().getHours());
});
</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:23:47.707

您可以使用每毫秒`setInterval()`更新一次值。`x`例如：

```
setInterval(function() {
    document.body.className = getDayTime(new Date().getHours());
}, 1000); // update every second 
```

# perl - 从数字列表中生成随机对，确保生成的随机对不存在

> ID：11944100
> 
> 赞同：0
> 
> 时间：2012-08-14T00:21:13.497
> 
> 标签：perl, random, hash, numbers

给定一组基因和现有的一对基因，我想生成尚未存在的新基因对。

基因文件具有以下格式：

```
123    
134   
23455  
3242  
3423  
...  
... 
```

基因对文件具有以下格式：

```
12,345    
134,23455   
23455,343  
3242,464452  
3423,7655  
...  
... 
```

但是我仍然在 known_interactions 和 new_pairs 之间得到了一些共同的元素。我不确定错误在哪里。

对于参数，
perl generate_random_pairs.pl entrez_genes_file known_interactions_file 250000
我得到了一个共同的元素 15880。数字 250000 是告诉我希望程序生成多少个随机对。

```
#! usr/bin/perl

use strict;
use warnings;

if (@ARGV != 3) {
    die "Usage: generate_random_pairs.pl <entrez_genes> <known_interactions> <number_of_interactions>\n";
}
my ($e_file, $k_file, $interactions) = @ARGV;

open (IN, $e_file) or die "Error!! Cannot open $e_file\n";
open (IN2, $k_file) or die "Error!! Cannot open $k_file\n";

my @e_file = <IN>; s/\s+\z// for @e_file;
my @k_file = <IN2>; s/\s+\z// for @k_file;

my (%known_interactions);

my %entrez_genes;
$entrez_genes{$_}++ foreach @e_file;

foreach my $line (@k_file) {
    my @array = split (/,/, $line);
    $known_interactions{$array[0]} = $array[1];
}
my $count = 0;

foreach my $key1 (keys %entrez_genes) {
    foreach my $key2 (keys %entrez_genes) {
        if ($key1 != $key2) {
            if (exists $known_interactions{$key1} && ($known_interactions{$key1} == $key2)) {next;}
            if (exists $known_interactions{$key2} && ($known_interactions{$key2} == $key1)) {next;}
            if ($key1 < $key2) { print "$key1,$key2\n"; $count++; }
            else { print "$key2,$key1\n"; $count++; }
        }
        if ($count == $interactions) {
            die "$count\n";
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:44:43.840

我看不出你的代码有什么问题。我想知道您的数据中是否有一些空格 - 无论是在逗号之后还是在行尾？例如，仅提取数字字段会更安全

```
my @e_file = map /\d+/g, <IN>; 
```

*此外，最好将对的两个*元素都保留为哈希键，这样您就可以检查元素的存在。而且，如果您确保较低的数字始终是第一个，则无需进行两次查找。

这个例子应该适合你。它没有解决您要求的随机选择部分，但这不在您自己的代码中，也不是您的直接问题

```
use strict;
use warnings;

@ARGV = qw/ entrez_genes.txt known_interactions.txt 9 /;

if (@ARGV != 3) {
    die "Usage: generate_random_pairs.pl <entrez_genes> <known_interactions> <number_of_interactions>\n";
}

my ($e_file, $k_file, $interactions) = @ARGV;

open my $fh, '<', $e_file or die "Error!! Cannot open $e_file: $!";
my @e_file = sort { $a <=> $b } map /\d+/g, <$fh>;

open $fh, '<', $k_file or die "Error!! Cannot open $k_file: $!";
my %known_interactions;
while (<$fh>) {
  my $pair = join ',', sort { $a <=> $b } /\d+/g;
  $known_interactions{$pair}++;
}

close $fh;

my $count = 0;
PAIR:
for my $i (0 .. $#e_file-1) {
  for my $j ($i+1 .. $#e_file) {
    my $pair = join ',', @e_file[$i, $j];
    unless ($known_interactions{$pair}) {
      print $pair, "\n";
      last PAIR if ++$count >= $interactions;
    }
  }
}

print "\nTotal of $count interactions\n"; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T01:36:00.077

~~首先，您不会从已知交互的文件中咀嚼（删除换行符）。这意味着给定一个文件，如：~~

 ~~```
1111,2222 
```~~ 

您将构建此哈希：

```
 $known_interactions{1111} = "2222\n"; 
```

~~这可能就是您收到重复条目的原因。~~我的猜测是（如果没有您的实际输入文件无法确定）这些循环应该可以正常工作：

```
 map{
    chomp;
    $entrez_genes{$_}++ ;
 }@e_file; 
```

和

```
map {
    chomp;
    my @array = sort(split (/,/));
    $known_interactions{$array[0]} = $array[1];
}@k_file; 
```

此外，作为一般规则，如果我对交互对进行排序（生物信息学的乐趣:)），我会发现我的生活会更轻松。这样我就知道 111,222 和 222,111 将以相同的方式处理，并且我可以避免在代码中使用多个 if 语句。

然后你的下一个循环将是（恕我直言更具可读性）：

```
my @genes=keys(%entrez_genes);
for (my $i=0; $i<=$#genes;$i++) {
   for (my $k=$n; $k<=$#genes;$k++) {
     next if $genes[$n] == $genes[$k];
     my @pp=sort($genes[$n],$genes[$k]);
     next unless exists $known_interactions{$pp[0]};
     next if $known_interactions{$pp[0]} == $pp[1];
     print "$pp[0], $pp[1]\n";
     $count++;
     die "$count\n" if $count == $interactions;
  }
} 
```

# text - numpy.savetxt 到不同的目录？

> ID：11944115
> 
> 赞同：4
> 
> 时间：2012-08-14T00:23:36.443
> 
> 标签：text, numpy, directory

如何使用 numpy.savetxt 在另一个目录中输出文本文件？当前工作目录是/home/user/current/，但我想将txt文件保存到/home/user/test/。如何修改以下代码？谢谢。

```
out_name = "/home/user/test/txtfile.txt"    
numpy.savetxt(out_name,output,fmt = '%d \r %d \r %.3f \r\n') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:32:54.223

假设`fmt`与 兼容`output`，您的代码应将数据保存到`out_name`.

它不工作吗？如果是这样，完整的回溯错误消息是什么？

# android - Android键盘剪切EditText

> ID：11944118
> 
> 赞同：4
> 
> 时间：2012-08-14T00:23:53.170
> 
> 标签：android, android-layout

您好，我有一个包含多个 textView 的垂直滚动视图。

在底部我有一个 EditText，就像一个消息应用程序一样。我在清单中设置了 android:windowSoftInputMode="adjustPan"。

问题是，当我点击 editText 时，我的布局会上升，这很好，但是键盘将我的 editText 切成两半，就像图片中一样。

```
 <ScrollView
    android:layout_width="match_parent"
    android:layout_height="0dp"
    android:layout_weight="8"
    android:background="#CCCCCC" >

    <LinearLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"

        android:orientation="vertical" >
           //many textView
          <TextView
            android:id="@+id/text_area"
            android:layout_width="fill_parent"
            android:layout_height="50dp"
            android:background="#FF0000"
            android:layout_marginBottom="15dp"
            android:paddingLeft="10dp"
            android:textColor="#168191" />

          </LinearLayout>
</ScrollView>

<LinearLayout
    android:layout_width="match_parent"
    android:layout_height="50dp"
    android:orientation="horizontal"
    android:weightSum="10" >

    <EditText
        android:id="@+id/send_msg"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="8"
        android:background="#CCDEDC"
        android:paddingLeft="20dp"
        android:text="Large Text"
        android:textColor="#168191"
        android:textSize="15dp" />
        <Button
        android:id="@+id/send_msg_btn"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        android:layout_weight="2"
        android:background="#CCCCCC"
        android:text="Send"
        android:textColor="#FFFFFF" />
</LinearLayout> 
```

![打印屏幕](../Images/5d22efe2c25e5dfbbf116885c7c079fe.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:29:19.767

将以下选项添加到您希望通过键盘查看“未剪切”文本的活动的 AndroidManifest.xml 中。`android:windowSoftInputMode="adjustPan|stateHidden"`

**UPD** 可能是您需要更改 edittext 样式的填充，因为它似乎是自定义的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-26T09:46:25.123

在清单的活动标记中使用 android:windowSoftInputMode="adjustResize" 。它将在软键盘上方显示您的所有视图。

# php - PHP：请求 HTML 表单下拉列表的值

> ID：11944120
> 
> 赞同：1
> 
> 时间：2012-08-14T00:24:15.337
> 
> 标签：php, html, forms, email

我有一个 HTML 表单，它使用一个简单的 PHP`mail()`脚本将其内容发送到电子邮件地址。我刚刚实现了一个下拉列表：

```
<select name="event">
  <option name="event1" value="event1">Event 1</option>
  <option name="event2" value="event2">Event 2</option>
  <option name="event3" value="event3">Event 3</option>  
</select> 
```

但是我正在努力寻找一种通过 mail() 发送所选项目的方法

我尝试使用选择元素的名称：

```
$event= $_REQUEST['event'] ; 
```

以及选项元素的名称：

```
$event1= $_REQUEST['event1'] ;
$event2= $_REQUEST['event2'] ;
$event3= $_REQUEST['event3'] ; 
```

但这些似乎对我不起作用。有谁知道通过选择器列表检索和发送信息的正确方法？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T00:30:00.153

将此用于您的 html 表单：

```
<select name="event">
 <option value="event1">Event 1</option>
 <option value="event2">Event 2</option>
 <option value="event3">Event 3</option>
</select> 
```

并在您的表单提交到的 php 页面上使用它：

```
$event = $_POST['event'] 
```

或者

```
$event = $_GET['event'] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:32:53.553

每个选项元素没有自己的名称，只是一个值。

来源：[http ://www.w3.org/TR/html401/interact/forms.html#h-17.6](http://www.w3.org/TR/html401/interact/forms.html#h-17.6)

从您的选项元素中删除该`name`属性：

```
<select name="event">
  <option value="event1">Event 1</option>
  <option value="event2">Event 2</option>
  <option value="event3">Event 3</option>  
</select> 
```

并且根据您的表单元素使用的方法（`post`或`get`），您应该使用：

```
$event = $_POST["event"]; 
```

或者

```
$event = $_GET["event"]; 
```

除了使用 mail() 之外，如果保存到数据库或打印回用户，不要忘记使用[htmlspecialchars()](http://php.net/manual/en/function.htmlspecialchars.php)或[mysqli_real_escape_string( )。](http://www.php.net/manual/en/mysqli.real-escape-string.php)

# facebook-graph-api - 图形 API 未返回所有照片

> ID：11944122
> 
> 赞同：1
> 
> 时间：2012-08-14T00:24:21.810
> 
> 标签：facebook-graph-api, photo

当我查询照片时，我看到的照片没有我在 Facebook 上看到的那么多。例如，如果我使用 FQL 查找其中包含我的所有照片，如果我查看我的照片，我得到的照片比我在 Facebook 上看到的少 100 张。

这是隐私问题吗？我注意到有些用户没有返回任何照片。无论如何可以通过图形 API 获取我可以在 Facebook 上看到的所有图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:36:30.940

是的，这是一个隐私问题。Facebook 不会通过 API 为在“公共”下方限制其隐私的用户返回照片。这可以是所有帖子的全局设置，也可以是单个帖子的单独设置。这也适用于许多其他用户对象。

# linux - 在电子邮件正文中发送 html 文件的输出

> ID：11944124
> 
> 赞同：4
> 
> 时间：2012-08-14T00:24:31.700
> 
> 标签：linux, bash, shell, unix, sunos

我有一个 html 文件，`/tmp folder`当`chart.html file`你打开它时，它的输出如下图所示`html file`

![在此处输入图像描述](../Images/29749390f1db8df15e4df3654aab7686.png)

我有一个 shell 脚本，用于将`chart.html`文件作为附件发送到电子邮件中，并带有一些正文消息。

**问题陈述：-**

是否可以在电子邮件正文中发送 html 文件的彩色图像（当您打开它时）？这样人们就可以在电子邮件正文中看到此图像，而不是打开附件文件。以下是我用来在带有正文的电子邮件中发送附件的命令-

```
mailx -s "LIP Data Quality Report for $DATE_YEST_FORMAT1" -r rj@host.com rj@host.com <<EOF
Data Successfully loaded into LIP_DATA_QUALITY table

Total Items Purchased: `echo $QUERY1 | awk '{print $1}'`

Total Items MissingorMismatch: `echo $QUERY1 | awk '{print $2}'`

Error Percentage: $QUERY2

$(uuencode /tmp/chart.html percentage_graph.html)

EOF 
```

我需要在上面的命令中进行哪些更改才能在正文中发送这个彩色图像。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T04:17:37.150

在 21 世纪包含图像的正确方法是使用 MIME。你的信息基本上应该是这样的

```
From: you <you@example.net>
To: recipient <victim@example.com>
Subject: well, say something
Mime-Version: 1.0
Content-type: multipart/related; boundary=foo

Often you have something about this being a MIME message here.

--foo
Content-type: text/html; charset=utf-8
Content-transfer-encoding: us-ascii

<html><yada yada><img src="cid:bar"></html>

--foo
Content-type: image/png
Content-id: bar
Content-transfer-encoding: base64

sdflkjsdflkjsdflkjsdflkjsdflksdfl=

--foo-- 
```

您也可以尝试使用`text/plain`文本部分和`Content-Disposition: inline`图像；然后许多客户端将在文本下方显示图像。

当然，如果您已经将所有内容都保存在一个 HTML 文件中（如何使用图像？），那么只需使用现代 MUA 将其附加到`mutt`一个简单的命令行中即可。

# c++ - 命令提示符颜色

> ID：11944126
> 
> 赞同：0
> 
> 时间：2012-08-14T00:24:58.660
> 
> 标签：c++, colors, cmd

所以我在命令提示符下弄乱了颜色。但是，当我在 MS Visual C++ 中运行控制台程序时，颜色保持默认。有没有办法改变这个，所以当使用命令提示符时，它会使用我的自定义设置？我必须通过 Visual C++ 更改设置吗？

我正在运行 Windows 7 和 MS Visual C++ 2010 Express。

我希望我可以在这里问这个问题。感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T01:02:00.500

如果这些自定义颜色特定于您的应用程序，您可以使用[SetConsoleTextAttribute等命令将其构建到您的代码中](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686047%28v=vs.85%29.aspx)

这里有控制台功能的完整列表：http: [//msdn.microsoft.com/en-us/library/windows/desktop/ms682073 (v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682073(v=vs.85).aspx)

还有一个[在控制台窗口中使用颜色的示例](http://msdn.microsoft.com/en-us/library/windows/desktop/ms686974%28v=vs.85%29.aspx)。

这适用于从 Visual Studio 以及命令行运行的应用程序。您不必使用`WriteFile`等。一旦设置了颜色，您就可以使用`printf`或`cout`正常使用。

* * *

## 回答 #2

> 赞同：-4
> 
> 时间：2012-08-14T00:27:47.597

如果您运行程序更改`Properties`控制台本身的颜色设置，那么它应该专门为该程序保留它，或者您可以更改控制台窗口的默认值，这应该始终保持不变。

# javascript - 元素为空或不是对象

> ID：11944128
> 
> 赞同：0
> 
> 时间：2012-08-14T00:25:19.063
> 
> 标签：javascript, jquery, forms

我有一个单选按钮，我使用图像背景将其屏蔽为按钮。当用户单击包含单选按钮的 li 时，我将单选按钮打包为对象“el”并运行一个函数以使用该元素作为参数来获取结果。这在 FF 和 Chrome 中运行良好，但我收到一个错误，即元素为空或不是对象。

谁能看到我的问题？

```
var selectedid = $this.find("[type='radio']").attr('id');
document.getElementById(selectedid).checked = true;
var el = document.getElementById(selectedid);
var el = $(el);
showResults( el );

function showResults( el ) {
    var id = el[0].dataset['item'];
    alert(id);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:28:31.153

您的代码效率很低，`.dataset`并非所有浏览器都支持。由于您已经在使用 jQuery，我建议您像这样清理您的代码：

```
var selected = $this.find("[type='radio']").first().prop("checked", true);
showResults( selected );

function showResults( el ) {
    var id = el.data("item");
    alert(id);
} 
```

# google-apps-script - 菜单栏 - 同时使用服务器和客户端处理程序

> ID：11944130
> 
> 赞同：0
> 
> 时间：2012-08-14T00:26:00.860
> 
> 标签：google-apps-script

是否可以将客户端处理程序和服务器处理程序添加到菜单栏项？下面是我添加服务器处理程序但似乎无法添加第二个处理程序的代码。

```
// create menu bar
var menuBar = app.createMenuBar().setWidth(600);

menuBar.addItem('New CA', newCA_handler).addSeparator()
.addItem('Unapproved CA', unapproved_handler).addSeparator()
.addItem('Approved CA', approved_handler).addSeparator()
.addItem('Cap List Detail', capList_handler) 
```

如果我用 setCommand 以这种方式编码菜单项，它将替换第一个处理程序

```
var menuItem0 = app.createMenuItem('MenuItem0', handler);
menuItem0.setCommand(test_handler); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:18:00.360

似乎不可能做到这一点。这似乎是 Apps Script [issue tracker](http://code.google.com/p/google-apps-script-issues/issues/list)增强请求的一个很好的候选者。

此外，在搜索跟踪器以查看是否还没有打开与此相关的问题时，我发现了有关 menuItems 的其他[更严重的问题](http://code.google.com/p/google-apps-script-issues/issues/detail?id=1413)，您可能想给它加*星*标。

# c# - 使用自定义编译器进行枚举的自定义三元运算符

> ID：11944131
> 
> 赞同：1
> 
> 时间：2012-08-14T00:26:09.220
> 
> 标签：c#, asp.net, enumeration, ternary-operator

我最近发现自己想知道是否存在类似于三元运算符的现有运算符，但用于枚举......这可能是一个处理工具，用于编写更少的代码来处理枚举的值......

我找不到任何东西，所以我提出了这个问题......

如何构建自己的运算符来处理枚举，如下所述？

进行以下枚举：

```
public enum ComTypes { Call, Email, SMS } 
```

假设我需要根据 ComType 分配弹出对话框的标题。目前我可以像这样使用三元运算符：

```
ComTypes comType = ...;
var title = comType == ComTypes.Call ? "Make a Call" : 
    comType == ComTypes.Email ? "Send an Email" : 
    /* ComTypes.SMS */ "Send a Text"; 
```

我想要的是使用新的枚举运算符获得更简洁的格式......类似于以下内容：

```
ComTypes comType = ...;
var title = comType ? 
    .Call: "Make a Call", 
    .Email: "Send an Email", 
    .SMS|default: "Send a Text"; 
```

所以我想我的入门问题是：

1.  我可以创建自定义运算符并将其与普通 C# 编译器并行使用吗？
2.  假设我可以创建运算符，我可以使用“？” 作为枚举的运算符，即使它被标准的三元运算用于布尔值？
3.  我知道我可以去谷歌搜索这个，但如果有人对好的编译器创建文章有任何建议，那就太好了。

**- 编辑 -**

我只是想把它放在这里...我知道如果这阻止我进行开发是不切实际的...我知道如何通过其他几种方式实现...我想要的是一些帮助了解我实现我所概述的目标的起点......仅仅是为了尝试编写代码并了解更多关于我日常使用的框架的乐趣。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:28:56.710

你为什么不想使用只是开关？

```
string title = "";

switch (comType)
{
  case (ComTypes.Call):
    title = "Make a Call";
    break;
  case (ComTypes.Email):
    title = "Send an Email";
    break; 
  case (ComTypes.SMS):
    title = "Send a Text";
    break;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T00:51:59.223

根据您对其他答案的评论，您似乎希望将此作为学习练习，而不是您将在生产代码中使用的东西，因此虽然我会为任何其他情况推荐几个非常好的答案，但这里是您可以通过自定义编译器执行以下几种方法：

*   编写一个运行预构建的应用程序，它会扫描所有 C# 文件以查找自定义语法，并在将其输入编译器之前将其替换为 switch 语句。
*   使用内置的自定义语法编写您自己的完整 C# 编译器。（.NET C# 编译器不是开源的 AFAIK）
*   修改[Mono 的编译器](https://github.com/mono/mono/tree/master/mcs)以包含您的新语法。这可能是最简单的解决方案，您仍然会学到很多关于如何将 C# 编译为 CIL 然后 JITted。

另请注意，您的语法要求您在词法流中查看非常远的内容，以确定您是在查看三元运算符还是新运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T00:56:07.020

好的，至于如何：我无法给您任何确切的答案，但是按照您所说的方式，这种情况几乎是不可能的。

CODE 编译器是完全.. 嗯.. 密封的。它是单片的，带有一些小的扩展点（请参阅 ExtensionMethods 和 LINQ 子语言）。如果你真的找到了 LINQ 子语言插件是如何附加到编译器的，请给我留言，我很高兴。我对此表示怀疑，我相信 LINQ 语法是硬编码到编译器中的，但也许我错了。

但是，如果我没记错的话——那么添加一个运算符是完全不可能的，至少在你查看它的方式上是这样。当然还有其他方法。

查看 XAML 或 ASPX 文件，或 RESX？编译器如何处理它们，嗯？构建项目是一个多步骤的过程。解析 XAML/ASPX/RESX 文件是在 C# 代码编译之前。读取该文件，工具生成 .g.cs /.Designer.cs /aspx.cs/.resx.cs 文件，然后将这些文件添加到编译集中，而 XAML/ASPX/RESX 实际上并未由 C# 编译编译器。

这是什么意思？这意味着您可以将文件的扩展名更改为例如 .blargh，然后编写像 XAML/ASPX/RESX 解析器/生成器这样的插件来将 .blargh 预处理为 .cs，然后瞧。在 .blargh 中，您有自己的额外语法好东西，翻译成冗长的 C#，然后由普通 C# 编译器编译。

但请注意，虽然它实际上会很好地工作，但更改文件扩展名肯定会解除 Intellisense 和其他 csharpy IDE 实用程序的绑定，而且我敢打赌，你不想几乎从头开始重写它们以获得漂亮的新代码文件扩展名 - 实际上，漂亮新语言..

但是等等，还有更多，而且更简单！

您甚至不需要 .blagh 文件类。项目结构建立在 MSBuild 构建系统之上。在你的驱动器上的某个地方有一堆 XML 脚本，它们描述了构建系统在“解决方案构建”或“项目构建”期间所做的每一个步骤。它们是**可编辑**的，甚至更好的是，它们是**可扩展**的。您可以将插件写入构建系统，并将其注入到构建过程的几乎任何现有步骤之间。

想象一下简单性：您编写了一个简单的搜索替换实用程序，它使用您的额外标记加载一个 C# 文件，对其进行处理，然后写回“扩展的”，翻译成普通的 C#。你可以在“编译”阶段之前注入它，你就完成了你的问题。

要记住的一件事：您不能覆盖原始文件。这是不明智的，因为这意味着您使用新操作员简要编写的所有内容 - 将在构建时自动扩展和替换 - 永久。:) 您将希望将扩展后的文件写入某个临时文件，将该文件添加到 build 下的当前临时编译文件集（并删除原始文件，因为不再需要它）。

您应该注意到，这正是 XAML/RESX/.. 文件和 .g.cs/.resx.cs/... 临时文件所发生的情况。这是因为这是在 VS/MSBuild 系统中处理此类情况的正常方式 :) 如果您不想构建新的语言支持，您可以在您的语言和一些已知语言之间进行翻译，然后将其添加为**预处理**步骤。就这样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T00:32:03.120

在我看来，您想将枚举用作哈希表。为什么不直接使用哈希表。

```
Dictionary<ComTypes,String> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T00:41:30.710

三元运算符不是 C# 中的可重载运算符。

话虽如此，我会推荐简洁的：

```
public enum ComTypes { Call = 0, Email = 1, SMS = 2 };
public readonly string[] ComTitles = 
     { "Make a Call", "Send an Email", "Send a Text" }; 
```

稍后在代码中你可以使用

```
ComTitles[comType] 
```

# facebook - Facebook 评论框错误 - 不理解调试器消息

> ID：11944140
> 
> 赞同：0
> 
> 时间：2012-08-14T00:26:50.170
> 
> 标签：facebook

我不是这种东西的专家，所以只想问以下错误是什么意思？

'website' 类型的 URL 'http://www.lanternghosttours.com/?from_fb=1' 上的对象无效，因为属性 'fb:admins' 的给定值 'lanternghosttours' 无法解析为类型 'fbid'。

我想要的只是能够审核评论。我创建了应用程序并使用了代码生成器，只有当我添加 href 'www.lanternghosttours.com' 时，它才会突然删除评论框顶部的审核选项。

我做错了什么或者我错过了什么？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:31:27.547

标签需要是用户的`fb:admins`用户 ID - 您已经输入了页面的用户名

将用户的用户 ID 放在那里，或者创建一个应用程序，然后在`fb:app_id`标签中使用应用程序 ID

# android - 无法调用 AsyncTask doInBackground() 和 onPostExecute

> ID：11944141
> 
> 赞同：2
> 
> 时间：2012-08-14T00:27:08.767
> 
> 标签：android, android-asynctask

斯特兰利，我的`AsyncTask`遗嘱执行`onPreExecute`但不`doInBackground()`执行`onPostExecute()`。Logcat 没有错误或消息表明出现问题。

```
class LocationTask extends AsyncTask<String, Void, String>{

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        Log.d(TAG, "onPreExecute============");
    }

    @Override
    protected String doInBackground(String... urls) {
        Log.d(TAG, "doInBackground============");
        Log.d(TAG, "urls[0]:" + urls[0]);
        return "test";
    }

    @Override
    protected void onPostExecute(String result){
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        Log.d(TAG, "onPostExecute============");
    }
}

public class CsLocationTaskTest extends AndroidTestCase {

    public void testExecute(){
        LocationTask task = new LocationTask();
        task.execute("my_test_url", null);
    }
} 
```

如您所见，`AsycTask`没有什么特别的，但是在测试用例和我`doInBackground`的. 我不明白发生了什么，请让我了解发生了什么问题。谢谢。`onPostExecute``Activity`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:48:21.643

`AsyncTask`需要是 的子类`CsLocationTaskTest`。此外，您不需要`null`.

根据开发文档：

`"AsyncTask must be subclassed to be used. The subclass will override at least one method (doInBackground(Params...)), and most often will override a second one (onPostExecute(Result).)"`

位于：http: [//developer.android.com/reference/android/os/AsyncTask.html](http://developer.android.com/reference/android/os/AsyncTask.html)

尝试这个：

```
 public class CsLocationTaskTest extends AndroidTestCase {

    public void testExecute(){
        LocationTask task = new LocationTask();
        task.execute("my_test_url");
    }

    class LocationTask extends AsyncTask<String, Void, String>{

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        Log.d(TAG, "onPreExecute============");
    }

    @Override
    protected String doInBackground(String... urls) {
        Log.d(TAG, "doInBackground============");
        Log.d(TAG, "urls[0]:" + urls[0]);
        return "test";
    }

    @Override
    protected void onPostExecute(String result){
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        Log.d(TAG, "onPostExecute============");
    }
}

} 
```

# android - 结束意图（适用于第 3 方应用程序）

> ID：11944143
> 
> 赞同：0
> 
> 时间：2012-08-14T00:27:22.840
> 
> 标签：android, android-intent

我打算启动一些第 3 方应用程序（例如 AngryBirds），但在关闭它时遇到问题：

```
 Intent IAB = new Intent();
            IAB.setAction(Intent.ACTION_VIEW);
            IAB.setClassName("com.rovio.angrybirds", "com.rovio.ka3d.App");
            startActivity (IAB); 
```

以上工作正常并启动应用程序。但是当我尝试调用finish（）时，它什么也没做，应用程序继续播放。有没有办法关闭它？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:45:53.103

请参考[杀死进程](http://developer.android.com/reference/android/os/Process.html#killProcess%28int%29)。

您可以尝试`android.os.Process.killProcess(android.os.Process.myPid());`终止应用程序进程。

对不起！您不能杀死 3rd 方应用程序。最近有人被问到这个问题。请参阅[杀死另一个应用程序](https://stackoverflow.com/questions/12036895/kill-another-application-in-android)。

# objective-c - MainWindow.xib 和 ViewController.xib

> ID：11944149
> 
> 赞同：0
> 
> 时间：2012-08-14T00:28:28.270
> 
> 标签：objective-c, cocoa-touch, xcode4, ios

我不明白其中的区别，并且随着新 xcode 4 的发布（我有最新的 4.4.1），我无法阅读我买的一些书，我迷路了。

书中说我需要点击myprogramViewController.xib，但是在新的xcode中没有出现，我需要创建吗？

还有缺少 MainWindow.xib （但我已经创建了它），也在书中说打开 myapplicationViewController.m 和 myapplicationViewController.h 进行一些更改（我想这是相同的 ViewController.m 和 myapplicationViewController.m 和与 .h 相同）我很困惑。

那么我在哪里拖动按钮和标签以及所有这些东西呢？在 MainWindow 中还是在 ViewController 中？（但我需要创建 ViewController 吗？）我指的是 .xib 的，因为我只有 ViewController.m 和 ViewController.h，缺少 .xib 的。

我需要一些帮助，谢谢大家！

PS：我正在使用单视图应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:40:41.707

从 Xcode 4.3+ 创建新的 Single View iOS App 时，没有任何默认`ViewController.xib`. 相反，您拥有`MainStoryboard_*.storyboard`一个根视图控制器，您可以在其中添加标签、按钮或任何其他 UI 元素。

这个根视图控制器的标识是`ViewController`，它指的是在 中`UIViewController`定义的子类`ViewController.h/m`。当您在故事板的根视图控制器中添加一个按钮时，您可以 CTRL+拖动它来`ViewController.h`创建一个插座（UI 元素和实例属性之间的连接），然后在`ViewController.m`.

让我们看一下下面的截图：

![在此处输入图像描述](../Images/1f27cb40673e52d086db8f7c2f80154d.png)

我在根视图控制器中添加了一个圆形矩形按钮，单击“助手编辑器”，然后 CTRL+将其拖动到`ViewController.h`，并将出口命名为“按钮”。然后，在该`-viewDidLoad`方法中，您可以执行以下操作：

```
[_button setTitle: @"myTitle" forState: UIControlStateNormal]; 
```

* * *

## 编辑

据我所知，故事板没有文件所有者。每个视图控制器都使用自己的子类实例单独实例化，您可以通过using及其子视图`UIViewController`访问它们中的每一个。所以“隐式文件所有者”是 AppDelegate。`AppDelegate.m``self.window.rootViewController`

您可以按照这样的基于故事板的教程进行[操作](http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1)。我个人不喜欢使用故事板，因为太多的东西是隐含的。我每页有一个xib（视图控制器），并将它们与appDelegate中实例化的主根视图控制器分开加载。

要查看没有故事板的情况下它是如何工作的，Xcode 允许您在创建项目时选择不使用它们。你会得到一个简单的`ViewController.xib/h/m`实例化`AppDelegate`.

# c# - 使用 website1 上传图片以保存在 website2 中的最佳方法？

> ID：11944152
> 
> 赞同：0
> 
> 时间：2012-08-14T00:28:52.603
> 
> 标签：c#, .net, image-processing, file-upload, web

.NET 中使用 website1 上传图像的最佳方法是什么，但在重新调整大小和重命名图像后，将其保存到不同 website2 内的文件夹中？

两个网站都托管在同一个 Windows 2008 服务器上。

我想将所有调整大小的图像存储在一个位置，以便少数网站可以从集中的 Sql 数据库中读取图像地址并正确显示。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:40:51.203

有很多选择。这里有两个。

1.  将每个网站上 IIS 中的虚拟路径映射到服务器上的相同物理文件夹。

2.  将文件保存到服务器上的某个位置并创建一个从该文件夹读取文件的处理程序（或 MVC 操作）。使用可配置的文件路径创建处理程序/操作，该文件路径可以设置为指示该文件夹相对于当前运行的应用程序。

# html - 设置html画布字体

> ID：11944156
> 
> 赞同：0
> 
> 时间：2012-08-14T00:29:09.157
> 
> 标签：html, fonts, html5-canvas, font-face

我需要对画布上绘制的所有文本使用 Myriad Pro。我正在通过 CSS 加载字体，如下所示：

```
@font-face { font-family: MyriadProRegular; src: url('/fonts/MyriadPro-Regular.otf'); } 
```

并尝试像这样为我的画布设置它：

```
this.context.font = "16pt MyriadProRegular"; 
```

问题是没有分配字体 - 我的所有文本都正确绘制，但字体错误。不过，当我将“MyriadProRegular”更改为任何标准的网络字体时，该评估确实有效。

我已经尝试了关于这两个帖子的所有解决方案和建议： [HTML 5 canvas font being ignored](https://stackoverflow.com/questions/3349947/html-5-canvas-font-being-ignored)， [External Font on HTML5 Canvas](https://stackoverflow.com/questions/6117553/external-font-on-html5-canvas)，但它们都没有帮助，而且似乎没有任何新答案会出现在这些旧帖子中。

我知道我的 css 或字体本身没有问题 - 我的画布是在用户填写表单并推送开始后通过 JS 创建的，并且该表单使用 Myriad Pro 就好了。

如何让画布使用我的字体？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:16:15.540

我很确定您需要将字体文件上传到服务器。然后使用字体声明，它应该可以工作。

# java - 低内存 Java 应用服务器

> ID：11944158
> 
> 赞同：2
> 
> 时间：2012-08-14T00:29:20.420
> 
> 标签：java, memory, application-server

我们开发了一个轻量级的 Jersey/JSON/JMS Java 应用程序，它充当客户遗留 MS Access 系统和我们的应用程序服务器之间的连接器。此连接器安装在客户服务器上。

到目前为止，我们使用 Glassfish 3.1.2 作为应用程序服务器，但是内存消耗非常大（400 - 900 MB 仅托管此特定应用程序，即使在 Web Profile 中也是如此！）。

我们正在寻找一种易于使用（支持 JDBC/ODBC、Jersey、JMS 和自定义 JNDI 资源）、使用少于 300 MB 内存并具有用于配置和部署的 Web GUI 的轻量级应用程序服务器。

哪些应用服务器适合我们的需求？有没有办法将 Glassfish 的内存消耗减少到 400 MB 以下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:39:53.330

您可以使用[Jetty](http://jetty.codehaus.org/jetty)。Jetty 提供 HTTP 服务器、HTTP 客户端和[javax.servlet](http://java.sun.com/javaee/5/docs/api/javax/servlet/package-summary.html)容器。

它通常用于 servlet 代码的容器内单元测试，因为它是一个快速启动、精简的 Java EE 服务器容器，但它仍然是一个真正的应用程序服务器。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T22:52:36.600

我终于找到了解决方案。由于我们的应用程序不需要太多内存，因此 32 位 Glassfish 实例可以满足我们的需求。它与 Admin GUI 一起使用，我们的应用程序运行大约 250 MB 内存，这没问题。Jetty 可能会使用更少的内存，但没有 Admin GUI，此外，我们管理一种类型的应用程序服务器比管理两种类型的应用程序服务器更容易。

# javascript - .html() jQuery 之后函数不会调用

> ID：11944159
> 
> 赞同：2
> 
> 时间：2012-08-14T00:29:31.423
> 
> 标签：javascript, jquery

`GrabOldMessages()`运行后无法运行该功能`html()`。下面是我的代码。使用 jQuery 版本 1.7.2，我想我正确地调用它，我忽略了什么吗？请帮我找出我的错误。如果您需要我提供更多信息，请告诉我。感谢您花时间帮助我。

```
//GRAB NEW MESSAGES
function GrabNewMessages(){
    var doIB = encodeURIComponent("GET_DATA"); 
    $.ajax({ 
        type: 'POST', url: 'app/pull_data_files/inbox_NM_array.php',  dataType: "json",  data: { getInbox: doIB }, 
        success: function(inbox_NM_data) {                 
          if(inbox_NM_data[1] == 'true'){$('#inbox_NMlist_html').html(inbox_NM_data[0], function(){ GrabOldMessages(); });}
          else{alert("Didn't work");}
        }  
    }); 
return false;

}

//GRAB OLD MESSAGES
function GrabOldMessages(){

    var doIB = encodeURIComponent("GET_DATA"); 
    $.ajax({ 
        type: 'POST', url: 'app/pull_data_files/inbox_OM_array.php',  dataType: "json",  data: { getInbox: doIB }, 
        success: function(inbox_OM_data) {                 
          if(inbox_OM_data[1] == 'true'){$('#inbox_OMlist_html').html(inbox_OM_data[0], function(){GoToInbox();});}
          else{alert("Didn't work");}

        }  
   }); 
return false;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:33:05.830

该[`.html()`方法](http://api.jquery.com/html/)不接受两个参数，它接受一个字符串*或*一个函数，而不是两者。当它接受一个函数时，它不是一个完成回调。

要在设置 html 后运行函数，只需在下一行调用函数，因此更改：

```
success: function(inbox_NM_data) {                 
    if(inbox_NM_data[1] == 'true'){
         $('#inbox_NMlist_html').html(inbox_NM_data[0], function(){ GrabOldMessages(); });
    } else{
         alert("Didn't work");}
    } 
```

至：

```
 success: function(inbox_NM_data) {                 
    if(inbox_NM_data[1] == 'true'){
         $('#inbox_NMlist_html').html(inbox_NM_data[0]);
         GrabOldMessages();
    } else{
         alert("Didn't work");}
    } 
```

（并且在您的功能中类似`GrabOldMessages()`。）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T00:35:09.853

您正在指定第二个参数，`html()`其中不带或不带一个。

尝试将此成功版本用于您的第一个代码片段。

```
 success: function(inbox_NM_data) {
    if (inbox_NM_data[1] == 'true') {
        $('#inbox_NMlist_html').html(inbox_NM_data[0]);
        GrabOldMessages();
    }
    else {
        alert("Didn't work");
    }
} 
```

这是第二个代码片段：

```
success: function(inbox_OM_data) {
    if (inbox_OM_data[1] == 'true') {
        $('#inbox_OMlist_html').html(inbox_OM_data[0]);
        GoToInbox();
    }
    else {
        alert("Didn't work");
    }

} 
```

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2014-10-02T09:39:08.573

**这段代码是 100% 的工作**

```
$('#myTabContent').html(data);    
afterHTML();

function afterHTML(){           
    $('.unit').change(function(){
        var u=($(this).val()).split('/');
        $('.perunit').html(u[1]);
    });    
} 
```

# hbase - 如何在 ROWID 中使用 LIKE 在 HBase 中进行搜索？

> ID：11944164
> 
> 赞同：2
> 
> 时间：2012-08-14T00:29:35.760
> 
> 标签：hbase

我的 Hbase 表的 ROWID 的构造方式是，它的第一个子字符串是固定字符串，比如 ABC，其余是可变的。例如，我的 rowids 看起来像：

```
ABC_12345
ABC_89778
ABC_64994
...
.. 
```

如何使用某些行过滤器实现编写 HBASE 查询来扫描我的表，如果我提供“ABC”，我会得到所有行。

任何帮助，将不胜感激。

谢谢你

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T14:04:38.960

您可以同时使用两者，一个`Scan`带有`RegexStringComparator`过滤器。像这样的东西：

```
String regEx = "^ABC";
Filter regExFilter = new RowFilter(CompareFilter.CompareOp.EQUAL, 
                        new RegexStringComparator(regEx));
Scan scan = new Scan();
scan.setFilter(regExFilter); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-01T09:11:24.950

您也可以尝试 SubstringComparator。来自文档：此比较器与 SingleColumnValueFilter 一起使用，用于根据给定列的值进行过滤。使用它来测试给定的子字符串是否出现在列中的单元格值中。比较不区分大小写。只有 EQUAL 或 NOT_EQUAL 测试对这个比较器有效。

例如： `SingleColumnValueFilter scvf =` `new SingleColumnValueFilter("col", CompareOp.EQUAL,` `new SubstringComparator("substr"));`

[https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/SubstringComparator.html](https://hbase.apache.org/apidocs/org/apache/hadoop/hbase/filter/SubstringComparator.html)

# objective-c - 创建对另一个类的引用，Objective C

> ID：11944166
> 
> 赞同：0
> 
> 时间：2012-08-14T00:30:02.120
> 
> 标签：objective-c, xcode, class, pointers, controllers

在我的第一个文件中，我希望能够引用我的第二个文件并更改它具有的属性，这就是我所拥有的。我创建了一个类方法来返回引用，但问题是我在方法中收到警告，最重要的是，当我执行 if 语句时，它似乎没有运行。

第一个需要引用的文件，调用类方法获取引用

```
-(void) updateSplitViewDetail{

id detail =  (MapViewController*) [MapViewController returnReference];
NSLog(@"%@", [detail class]); //This post MAPVIEWCONTROLLER

//This fails so I cant access the methods inside.
if ([detail isKindOfClass:[MapViewController class]]) {
    MapViewController *mapVC = (MapViewController*) detail;
    mapVC.delegate = self;
    mapVC.annotations = [self mapAnnotations];
}

}

 (void)viewDidLoad
  {
[super viewDidLoad];    
[self updateSplitViewDetail]; //Error may be here?
  } 
```

我要引用的第二个文件，使用 self.return 返回引用。

```
- (void)viewDidLoad
{

NSLog(@"%@", [self class]);

[super viewDidLoad];
self.mapView.delegate = self;
// Do any additional setup after loading the view.
}

+(MapViewController*) returnReference{
//I also get an incompatible pointer return warning here?
return self;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:39:03.120

```
+(MapViewController*) returnReference {
    //I also get an incompatible pointer return warning here?
    return self;
} 
```

您会收到警告，因为这是一个类方法（请参阅 +），因此`this`它的类型`Class`不是 type `(MapViewController*)`。它指的是`MapViewController`类而不是该类的实例。您返回的指针是类本身，而不是实例。这就是测试失败并且您无法在其他代码中调用实例方法的原因。

您可能想要实例化类并返回实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T09:20:42.903

正如@AnalogFile 提到的，在类方法中，`self`是类对象本身，类对象`detail`也是`MapViewController`。即这是真的`detail == [MapViewController class]`。

`[detail class]`也计算`MapViewController`类对象，因为调用`class`类对象上的方法调用`+class`，它返回类对象本身 (`+class`基本上是一个标识方法，返回它被调用的东西；不像`-class`。事实上，你的`+returnReference`方法基本上是一个 re-方法的实现`+class`。）。所以其实`detail == [detail class]`是真的。

`[detail isKindOfClass:[MapViewController class]]`另一方面，失败，因为它调用`-isKindOfClass:`（没有单独`+isKindOfClass:`的），它测试对象是否是该类的实例，并且您的类对象不是其自身的实例（类对象是其元类的实例，它遵循继承链到根类的元类，然后从根类本身继承）。

# azure - Azure 网站 - 设置自定义域，但将电子邮件留在原始主机

> ID：11944167
> 
> 赞同：0
> 
> 时间：2012-08-14T00:30:01.713
> 
> 标签：azure, web, dns

有谁知道该怎么做？根据托管站点上的警告，域电子邮件似乎将停止工作......

“我知道并接受所有当前的 DNS 设置、电子邮件地址和转发都将被禁用。”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:45:53.597

添加 CNAME 记录应该不会影响您的其他 DNS 设置（例如 MX 记录，用于电子邮件）。您在哪里看到该消息？

# php - 狮身人面像 php api 不工作

> ID：11944168
> 
> 赞同：3
> 
> 时间：2012-08-14T00:30:08.487
> 
> 标签：php, sphinx

我一直在尝试通过 PHP 使用 sphinx，但到目前为止我完全没有运气。

sphinx 本身按预期运行（我通过 linux 终端的搜索命令正在运行）

Engine_Api_SphinxClient 是安装包附带的 sphinx 的常规 php api。唯一的区别是类的命名。

```
 // Connect to sphinx server
    $sp = new \Engine_Api_SphinxClient();

    // Set the server
    $sp->SetServer('localhost', 9312);

    // SPH_MATCH_ALL will match all words in the search term
    $sp->SetMatchMode(SPH_MATCH_ANY);

    // We want an array with complete per match information including the document ids
    $sp->SetArrayResult(true);

    $sp->setFieldWeights(array(
        'thesis'=>2,
        'body'=>1
    ));

    /**
    * Run the search query. Here the first argument is the search term
    * and the second is the name of the index to search in.
    * Search term can come from a search form
    */
    $results = $sp->Query('gun', 'test1');
    debug($results); 
```

该 setServer 中的 9312 是 sphinx 配置文件中定义的监听帖子。调试行给出“假”，我看到以下警告和注意事项：

```
Errors

Warning: Invalid argument supplied for foreach() in /library/Engine/Api/SphinxClient.php on line 998
Warning: assert(): Assertion failed in /library/Engine/Api/SphinxClient.php on line 177
Warning: assert(): Assertion failed in /library/Engine/Api/SphinxClient.php on line 177
Warning: Invalid argument supplied for foreach() in /library/Engine/Api/SphinxClient.php on line 1006
Warning: Invalid argument supplied for foreach() in /library/Engine/Api/SphinxClient.php on line 1054
Warning: Invalid argument supplied for foreach() in /library/Engine/Api/SphinxClient.php on line 1070
Notice: Undefined property: Engine_Api_SphinxClient::$_socket in /library/Engine/Api/SphinxClient.php on line 564
Notice: Undefined property: Engine_Api_SphinxClient::$_socket in /library/Engine/Api/SphinxClient.php on line 569
Notice: Undefined property: Engine_Api_SphinxClient::$_socket in /library/Engine/Api/SphinxClient.php on line 477
Notice: Undefined property: Engine_Api_SphinxClient::$_socket in /library/Engine/Api/SphinxClient.php on line 478
Warning: fclose() expects parameter 1 to be resource, null given in /library/Engine/Api/SphinxClient.php on line 478 
```

我怀疑它与那四个通知有关。如果有人可以提供有关问题所在的提示，将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T11:25:52.547

如果您重命名了类本身，您是否也更改了构造函数的名称（大约 430 行）？

我怀疑构造函数没有被调用，所以 _socket 没有被初始化（这发生在构造函数中）

（如果这是问题所在，您可能只需将函数重命名为 __construct() 以便它不依赖于调用的类 。http: [//php.net/manual/en/language.oop5.decon.php](http://php.net/manual/en/language.oop5.decon.php) ）

# ruby-on-rails - 如何在 ec2 上自动缩放 resque 工作人员？

> ID：11944171
> 
> 赞同：3
> 
> 时间：2012-08-14T00:30:26.523
> 
> 标签：ruby-on-rails, amazon-ec2, background-process, resque

有很多关于如何在 Heroku 上自动缩放 worker 和 dynes 的示例，但我真的找不到任何关于在 EC2 中自动缩放 Resque 工作者的内容。

有 resque-director gem 但仅此而已..

是否有考虑资源管理的自动缩放 Resque 工作人员（启动新工作人员并停止未使用工作人员）的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T22:35:34.370

在 EC2 上，您需要使用 shell api 或各种 SDK 之一创建自动缩放组。

还有一个可用于 Ruby 的 SDK [http://aws.amazon.com/de/sdkforruby/](http://aws.amazon.com/de/sdkforruby/)

自动缩放必须设置一次，然后缩放应该不在您的考虑范围内。自动缩放规则基于 CPU 使用率、网络带宽等指标。

您可以定义扩展触发器以增加服务器数量，并定义冷却触发器以减少服务器数量。

您可以在此处找到更多详细信息 [http://aws.amazon.com/en/autoscaling/](http://aws.amazon.com/en/autoscaling/)

这是一个简单的教程，描述了步骤 [http://www.caseylabs.com/how-to-setup-auto-scaling-on-amazon-ec2](http://www.caseylabs.com/how-to-setup-auto-scaling-on-amazon-ec2)

# jboss - JBoss Application Server 4.2 中针对 Javascript 文件的热部署

> ID：11944172
> 
> 赞同：0
> 
> 时间：2012-08-14T00:30:30.220
> 
> 标签：jboss

我一直在使用 JBoss 的新手 Apache 和 Weblogic。目前，我有 JBOSS 服务器的本地实例，每次更改代码中的 js 文件时都需要重新启动服务器以反映该更改，无论更改多么小。我在我的应用程序中使用 ExtJS，我正在更改的文件位于：
C:\Sandbox\Jboss-4.2.0cp09\jboss-as\server\myserv\deploy\App.sar\App.ear\App.war \mymodule\sample.js

这是 AS 的设置方式还是我可以通过点击浏览器刷新按钮修改任何设置以使其即时反映更改？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-24T23:40:36.543

我们为提高应用服务器的性能所做的就是部署像 image/css/js 这样的静态内容；在 apache document_root 中，它将从这里而不是从 JBOSS 与您的 EAR 一起传递文件。

但是您需要更改应用程序的代码来管理此行为，但好处是非常令人惊讶的；）因此，一旦完成，您就可以更改 EAR 之外的任何文件，例如 apache 服务器的文件系统，如您所愿.

注意：我们在我的公司这样做是因为它不是应用程序服务器的角色来处理 js/css/images ；一个应用服务器对于这个这么小的任务来说太重了。

希望这会有所帮助。

# perl - Perl 单行语句可以在 Perl 脚本中使用吗？

> ID：11944173
> 
> 赞同：1
> 
> 时间：2012-08-14T00:30:40.933
> 
> 标签：perl

我是 Perl 的新手，我正在使用 Perl 单行代码以及一些简单的 Perl 脚本来完成我的任务。

我想知道是否有可能以代码格式组合一堆单行代码并只运行包含单行代码的特定文件？例如，如果我有 3 个单行程序要逐个运行，我可以将这 3 个单行程序放在一个名为*file.pl*的文件中并运行它吗？

```
oneliner....
oneliner....

code

oneliner.... 
```

我感兴趣的所需格式如上所示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T03:48:18.267

听起来你想要一个 shell 脚本，其中只有一个衬里：

```
 #!/bin/sh

 perl -le '...'
 perl -ane '...'
 perl -e '...' 
```

如果你想在 Perl 程序的中间运行一个单行，你可以用[system](http://perldoc.perl.org/functions/system.html)来做：

```
#!/usr/bin/perl

system( q( perl -le '...' ) ); 
```

但是，如果您已经在 Perl 程序中，您可以将单行代码扩展为非速记代码并将其放入程序中。例如，请参阅[如何将多个 Perl 单行代码合并到一个脚本中？](https://stackoverflow.com/questions/11858147/consolidating-several-perl-one-liners-into-a-script/11858528#11858528)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:07:34.083

Essentially, yes. You take the actual commands and put them in a file. So, using the example from the previous answer, create a file containing:

```
print reverse <> 
```

Then run it using perl. On Unix-like machines that would be

```
perl file.pl 
```

On windows I guess it will be similar. Search for "running perl scripts under windows", or similar, in google.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T01:02:02.587

Generally, that wouldn't work and it wouldn't make much sense. Typically, a perl oneliner calls perl with some commands and parameters. For example, here's a typical [oneliner](http://www.math.harvard.edu/computing/perl/oneliners.txt):

```
perl -e 'print reverse <>' foo.txt 
```

However, if you put this in a script, you get the following:

```
Bareword found where operator expected at .\one.pl line 1, near "'print reverse <>' foo"
        (Missing operator before foo?)
syntax error at .\one.pl line 1, near "perl -e "
Execution of .\one.pl aborted due to compilation errors. 
```

So, the format of script and the format of a oneliner are not compatible. However, it's usually possible to convert oneliners to script format by extracting the commands and parameters from the oneliner.

# matlab - 在错误处理时显示完整的错误堆栈

> ID：11944175
> 
> 赞同：18
> 
> 时间：2012-08-14T00:30:53.233
> 
> 标签：matlab, error-handling

我有一个调用各种其他函数的 matlab 脚本。我正在通过以下方式处理可能的错误

```
 try
                 matStart(MatObj);
             catch err
                 msgbox('Error in Processing Figures!','Error!','error','modal');
                 fprintf(2,err.message);
                 sprintf('\n');
                 display(err.message);
            end 
```

正如您可能猜到的那样，这会打印导致异常的错误。但这只会打印导致错误的第一个函数。我希望将整个错误堆栈显示到导致错误发生的最后一个嵌套函数。可以做到吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T02:35:58.897

是的，您正在寻找的功能是“ [getReport](http://www.mathworks.com/help/techdoc/ref/getreportmexception.html) ”。您将需要“扩展”报告。

使用 getReport，您的代码将如下所示

```
 try
             matStart(MatObj);
         catch err
             msgbox('Error in Processing Figures!','Error!','error','modal');
             disp(getReport(err,'extended'));
        end 
```

这将显示与 matlab 中打印完整堆栈跟踪的未捕获异常相同的信息，当然文本不会是红色的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-14T06:47:32.570

继@thewopr 的回答之后，如果您愿意，可以通过将错误堆栈打印到“标准错误”输出流来将文本打印为红色，如下所示：

```
...
fprintf(2, '%s\n', getReport(err, 'extended'));
... 
```

# c# - 'object' 不包含 'Foo' 的定义

> ID：11944180
> 
> 赞同：1
> 
> 时间：2012-08-14T00:31:38.217
> 
> 标签：c#

我已经环顾四周寻找答案，但在任何地方都找不到。我有两个程序集：一个“引擎”程序集和一个“主”程序集。在引擎中，我有一个包含一些字典的单例管理器。像这样：

```
namespace Engine
{
public class ResourceManager
{
    protected static ResourceManager rscMngr = new ResourceManager();

    private Dictionary<string, WTileMap> maps = new Dictionary<string, WTileMap>();

    public Dictionary<string, WTileMap> Maps
    {
        get { return maps; }
    }

    public static ResourceManager Instance
    {
        get { return rscMngr; }
    }

}
} 
```

然后在“主”程序集中，我尝试像这样访问单例：

```
Marker startMarker = ResourceManager.Instance.Maps[gameInfo.StartingMap].ObjectLayer.markers[gameInfo.MapMarker]; 
```

但是，当我编译时，它给了我这个错误：

> Engine.ResourceManager'不包含'Maps'的定义，并且找不到接受'Engine.ResourceManager'类型的第一个参数的扩展方法'Maps'（您是否缺少 using 指令或程序集引用？）

但是，如果我将“地图”变量公开并通过那里访问它，它就会起作用。或者，如果数据类型是原始数据类型，例如 int、float、string 等。

我不知道这里有什么问题。

# javascript - 如何允许用户添加自己的disqus评论框

> ID：11944181
> 
> 赞同：2
> 
> 时间：2012-08-14T00:31:40.987
> 
> 标签：javascript, ruby-on-rails, disqus

我们有一个简单的网站，让用户可以在 http://www.example.com/username 上创建一个博客，在[http://www.example.com/posts/1234](http://www.example.com/username)等上单独发帖[。](http://www.example.com/posts/1234)是否可以让用户添加他们自己的 disqus 评论框，以便他们可以自己审核博客上的评论？

# java - Android：内存不足异常/decodeResource 如何添加到 VM 预算中？

> ID：11944182
> 
> 赞同：5
> 
> 时间：2012-08-14T00:31:42.400
> 
> 标签：java, android, out-of-memory

我对 Android 很陌生，一直在开发游戏。时不时地有用户报告`memory exceptions`，我感到惊讶，因为我创建的位图大小最多为 200 kb。每当我`BitmapFactory.decodeResource()`创建一个新的`sprite`. 由于我的应用程序是一个僵尸防御游戏，你可以期待我经常创建精灵。

每次创建精灵时，我都会调用解码资源来生成位图。我的问题是，如果我只在每个活动开始时调用解码资源，并在包级别引用位图，这会减少放置在 VM 预算上的内存量吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-12T08:55:47.170

*   当您从 png 等图像资源中解码位图时，它更多地取决于图像的尺寸，而不是 KB 的大小。
*   尝试是否可以在不真正影响输出的情况下减小原始图像的尺寸。
*   尝试重用位图，而不是继续解码它们。
*   使用 BitmapFactory.Options() 对象探索更多选项，例如增加 inSampleSize 可以减少图像所需的内存量。例如 ````
    BitmapFactory.Options o=new BitmapFactory.Options();
    o.inSampleSize = 4;
    o.inDither=false;                     //Disable Dithering mode
    o.inPurgeable=true;                   //Tell to gc that whether it needs free memory, the Bitmap can be cleared
    myBitMap=BitmapFactory.decodeResource(getResources(),ID, o);

    ```` 
*   如果没有其他优化真的适合您，一个有用的棘手解决方案是，您可以捕获 OutOfMemoryException，然后可以将质量降低到最大值。即将 inSampleSize 设置为 16。它会降低图像的质量，但至少将使您的应用程序免于崩溃，我在我的一个应用程序中执行此操作，我需要在位图中加载巨大的 MP 图像。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-16T00:16:53.833

我的片段从资源安全中获取图像。您可以设置自己`sampleSize`的图像质量阈值（越大图像质量越`sampleSize`低）。

```
public static Bitmap loadBitmapSafety(int resDrId,  Context context){
    return loadBitmapSafety(resDrId, 1, context);
}

private static Bitmap loadBitmapSafety(int resDrId, int sampleSize, Context context){
    BitmapFactory.Options ops = new BitmapFactory.Options();
    ops.inSampleSize = sampleSize;

    try {
        return BitmapFactory.decodeResource(context.getResources(), resDrId, ops);

    } catch (OutOfMemoryError e) {
        if (sampleSize == 4)
            return null;
        return loadBitmapSafety(resDrId, sampleSize +1, context);

    } catch (Exception e){
        return null;
    }
} 
```

# javascript - 动态更新 html 表

> ID：11944184
> 
> 赞同：0
> 
> 时间：2012-08-14T00:32:00.597
> 
> 标签：javascript, jquery, html

我的网页包含一个下拉列表和一个表格。当用户在下拉列表中进行选择时，这将使用数据动态填充表格。我想知道填充此表的最佳方法是什么。我将 Spring MVC 和 JSP 用于我的服务器端技术。在用户做出下拉选择后，我们很可能会发出单独的请求来检索数据，而不是一开始就全部检索。我的一个想法如下：

1.  使用 JSP 创建一个将被隐藏的虚拟表行
2.  检索到带有数据的响应后，转换为 JSON 对象
3.  使用 JS/JQuery 为每个 JSON 对象克隆虚拟行

这是一个好的解决方案吗？或者有没有更好的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:56:44.140

除非数据非常庞大或快速变化的“实时”信息，否则请在表格中以一系列`<tbody id="xxx">...</tbody>`元素（每个下拉选项一个）的形式将其与页面一起提供。在下拉菜单中附加一个“onchange”处理程序，它显示与当前选定选项相对应的 tbody，并隐藏所有其他选项。

如有必要，您可以采用与 AJAX 类似的方法来获取数据。使用空`<tbody id="xxx">...</tbody>`元素为页面提供服务 - 每个选项一个。然后从下拉列表的 onchange 处理程序中“按需”填充 tbody 并按上述方式显示/隐藏。如果合适，您可以在 inchange 处理程序中包含一个测试，以确保每个数据集只获取一次 - 如果已经接收到数据，那么它将被缓存在其 tbody 中。最终，当所有 tbody 都被填充时，此解决方案将与上述解决方案相同。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:28:00.157

更好的方法可能是使用诸如 handlebars.js 或 mustache.js 模板（或任何其他前端模板引擎）之类的东西，因为它们都采用 JSON 对象并将其插入可以附加到您的 html 的模板中。如果您通过 AJAX 获取数据，这非常有效，如果 AJAX 无论如何都返回 JSON，效果会更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:56:11.473

如果您的项目允许第三方 JQuery 插件，我建议您查看[DataTables](http://datatables.net/)。开箱即用，它应该可以满足您的一切需求。我已经在各种项目中使用 DT 几年了，发现它是一个强大而稳定的插件。

# java - 是否可以使用 VirtualFile 作为 HTML 模板提供程序？如何？

> ID：11944188
> 
> 赞同：0
> 
> 时间：2012-08-14T00:32:18.163
> 
> 标签：java, playframework, playframework-1.x

需要你的帮助！

我希望标题是描述性的，但这里有详细信息

假设我们有 5 个 Web 应用程序，并且假设它们使用 5 个不同的框架完成。其中之一是使用 playframework。现在，由于重新命名所有五个网站将花费大量时间，我们想到了将一个布局模板托管为 HTML 页面，其中将包含 <% doLayout %> 播放标签。

我们需要使用这种布局的方法，因为它是播放应用程序源代码的一部分。现在我阅读了 API 文档并找到了 VirtualFile 类（[VirtualFile API Docs](http://www.playframework.org/documentation/api/1.2.1/play/vfs/VirtualFile.html "VirtualFile API 文档")）。由于文档非常简短，我无法从文档中看出此类的目的是什么，但我看到它包含可能对我的案例有用的功能......

下面是同一个类，但在 .NET 中。我之前做过这样的集成，但现在我在 playframework 中也需要它。另请注意，下面链接上的示例是从 zip 存档提供的，但是使用 VirtualPathProviders，您可以从任何地方提供模板 [虚拟化对内容的访问](http://msdn.microsoft.com/en-us/library/aa479502.aspx)

感谢任何帮助，虽然，解决方案不需要包含 VirtualFile，但它必须是即插即用的。

注意：我们使用的是 playframework 1.2.1

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:00:41.433

我找到了解决问题的方法，但没有找到虚拟文件类。`extend`如果我在游戏中创建将替换我视图中的标签的自定义标签，它可以是 dan 。

如果您查看播放源代码，您会发现现有 [FastTags 类的工作原理，第 319 行](https://github.com/playframework/play/blob/master/framework/src/play/templates/FastTags.java)

```
public static void _extends(Map<?, ?> args, Closure body, PrintWriter out, ExecutableTemplate template, int fromLine) {
    try {
        if (!args.containsKey("arg") || args.get("arg") == null) {
            throw new TemplateExecutionException(template.template, fromLine, "Specify a template name", new TagInternalException("Specify a template name"));
        }
        String name = args.get("arg").toString();
        if (name.startsWith("./")) {
            String ct = BaseTemplate.currentTemplate.get().name;
            if (ct.matches("^/lib/[^/]+/app/views/.*")) {
                ct = ct.substring(ct.indexOf("/", 5));
            }
            ct = ct.substring(0, ct.lastIndexOf("/"));
            name = ct + name.substring(1);
        }
        BaseTemplate.layout.set((BaseTemplate) TemplateLoader.load(name));
    } catch (TemplateNotFoundException e) {
        throw new TemplateNotFoundException(e.getPath(), template.template, fromLine);
    }
} 
```

我只需要使用`TemplateLoader.load(String, String)`接受模板作为字符串的重载方法（与原始实现中的文件名相比），然后将其设置为 `BaseTemplate.layout.set(...)`方法。当然，首先我需要通过 HTTP 请求从远程服务器获取模板。

# java - Blue Pelican Java 项目“屏蔽遥测数据”；编译但不运行？

> ID：11944189
> 
> 赞同：0
> 
> 时间：2012-08-14T00:32:19.363
> 
> 标签：java, debugging, telemetry

我已经在 Blue Pelican Java 中尝试了这个项目一个多小时，但我不太确定它为什么不起作用。基本上我要做的就是把一个普通的数字变成一个二进制数，假设 1 表示开关打开，0 表示它关闭，遍历二进制数中的每个数字并打印它是打开还是关闭。他们说明了他们希望我如何做到这一点：

> “假设我们希望查看左起第三位。使用如下所示的掩码与原始数字按位与，以便仅查看第三位。1 0 1 1 0 0 0 1bin = 177dec 0 0 1 0 0 0 0 0bin = 32dec（这是掩码）
> 
> 0 0 1 0 0 0 0 0bin = 32dec = (177 & 32)
> 
> 请注意，这种对掩码值 32 进行按位与运算的方案（25，因为左起第三位位置的位置值为 25）在第三位位置产生的值与原始数字的第三位位置完全相同. 所有其他位的位置都保证为 0。因此，可以测试这个按位与运算的结果，看它的整个值是否为 0。如果大于 0，这意味着测试位置的位是 1。

在这一点上，我只是在 Switches.in 文件夹中测试第一个数字 22，而不是为代码导入整个文件夹。我的代码编译后，它开始打印我想要的内容，但突然中断并转到如下所示的错误消息：

```
Switch sw57is "off
Exception in thread "main" java.util.NoSuchElementException
    at java.util.StringTokenizer.nextToken(StringTokenizer.java:332)
    at Tester.main(Tester.java:32) 
```

这是我的代码：

```
import java.io.*;
import java.util.*;
import java.text.*;

public class Tester
{
    public static void main(String args[])
   {
    int j=22;
    String jj=Integer.toBinaryString(j);
    StringTokenizer sc=new StringTokenizer(jj,"");
    int l=(sc.countTokens());

    int a[]=new int[l];
    int xx=0;
    for(int x=l; x>-1; x--)
    {
        xx=xx++;
        double p=(Math.pow(2,xx));
        int pp=(int)p;
        int n=((j)&(pp));
        String nn=Integer.toBinaryString(n);
        StringTokenizer nnn=new StringTokenizer(nn);
        int po=(nnn.countTokens());
        int sum=0;

        System.out.println(nnn);

        for(int xxx=-1; xxx<po; xxx++)
        {
            sum=sum+(Integer.parseInt(nnn.nextToken()));

        if(sum>0)
        {
            System.out.println("Switch sw"+(x+56)+"is \"on");
        }
        else if(sum==0)
        {
            System.out.println("Switch sw"+(x+56)+"is \"off");
        }
        }
    }
}
} 
```

我不确定代码有什么问题。任何建议将不胜感激。谢谢，很抱歉这篇冗长的帖子！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:50:54.083

问题是，从`-1`你开始将超过可用令牌的数量：

```
for (int xxx = -1; xxx < po; xxx++) { 
```

在哪里

```
po = nnn.countTokens() 
```

...因此，要更正，请使用：

```
for (int xxx = 0; xxx < po; xxx++) { 
```

此外，由于 xxx 不在其他任何地方使用，您可以简单地使用：

```
while (nnn.hasMoreTokens()) {
   sum = ...
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:51:26.407

问题与`sum=sum+(Integer.parseInt(nnn.nextToken()));`. 请参见

1.  [java StringTokenizer - nextToken 可以返回 null 吗？](https://stackoverflow.com/questions/4773192/java-stringtokenizer-can-nexttoken-return-null)
2.  [http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html#nextToken](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/StringTokenizer.html#nextToken)

我认为以下代码解决了这个问题（我添加了一些 println 用于调试信息）：

```
import java.io.*;
import java.util.*;
import java.text.*;

class Tester
{
    public static void main(String args[])
   {
    int j=22;
    String jj=Integer.toBinaryString(j);
    StringTokenizer sc=new StringTokenizer(jj,"");
    int l=(sc.countTokens());

    int a[]=new int[l];
    int xx=0;
    for(int x=l; x>-1; x--)
    {
        xx=xx++;
        double p=(Math.pow(2,xx));
        int pp=(int)p;
        int n=((j)&(pp));
        String nn=Integer.toBinaryString(n);
        StringTokenizer nnn=new StringTokenizer(nn);
        String nToken;
        int po=(nnn.countTokens());
        int sum=0;
        System.out.println("x = "+ x);
        System.out.println("po = "+ po);

        System.out.println(nnn);

        for(int xxx=0; xxx<po; xxx++)
        {
            System.out.println("xxx = "+ xxx);
            sum=sum+(Integer.parseInt(nnn.nextToken()));

        if(sum>0)
        {
            System.out.println("Switch sw"+(x+56)+"is \"on");
        }
        else if(sum==0)
        {
            System.out.println("Switch sw"+(x+56)+"is \"off");
        }
        }
    }
}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-10T19:07:10.630

我没有看到您从中获取数据的指定文件。如果您希望您的程序正常工作，您可以考虑放置一个从中获取数据的文件。

# backbone.js - PHP CMS Concrete5 是否与 Backbone 和 Slim 兼容？

> ID：11944195
> 
> 赞同：0
> 
> 时间：2012-08-14T00:33:25.770
> 
> 标签：backbone.js, content-management-system, slim, concrete5

**环境：** Concrete5 解析 URL 以找到页面的控制器 - 或工具文件，它没有视图 - 并呈现它的视图。这有点简单，但这是要点。

因为 Concrete5 拥有如此漂亮的架构来处理大量内容，所以我想将其用作一种后端机制来为用主干编写的 Web 应用程序提供动力。Backbone 需要一个 RESTful 实现，我已经看到 Slim 实现了它——一个基于 PHP 的 RESTful api。

**冲突：** 因为 Concrete5 解析 URL（以发现页面的控制器 [呈现视图] 或工具文件 [不呈现视图]）它与 Slim 的 REST 实现冲突。这部分是真的……

**这部分只是相信：** Slim 的 URL 是伪造的，仅用于进行 Backbone 在成功时使用的 ajax 调用 (REST)。浏览器被阻止执行其默认操作 - 这意味着一旦*您在选择页面上，与 Concrete5 没有冲突。*

**问题：**

1）。那么答案仅仅是创建一个single_page 而根本不呈现视图吗？
2）。一旦“未呈现”，我可以简单地继续上述信念吗？
3）。还是我会遇到比我意识到的更多的冲突？

当然，有一种方法可以让 C5 拥有**一个页面**（通过将全局“C5_ENVIRONMENT_ONLY”变量设置为“true”而不是整个站点）来使用 RESTful api。

有没有其他人在其他 CMS / Backbone 项目中做过类似的事情？

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:01:26.040

您是否将 C5 站点中管理的内容提供给主干前端应用程序？还是这个应用程序与 C5 内容不同？如果前端应用程序与 C5 内容不同，那么我将完全绕过 C5 这条路径并将应用程序放在那里做自己的事情（只有在实际请求的 URL 处不存在页面时才调用 C5 的路由器） .

如果内容由 C5 管理，那么我认为 Slim/Backbone 和 C5 的不同路由系统不可能一起工作。在这种情况下，我能想到的唯一解决方案是将主干应用程序作为 Concrete5 工具文件提供服务，但在 htaccess 文件中使用重写规则来欺骗 c5 认为对主干应用程序的所有请求都将发送到正在服务的一个工具文件它...然后破解骨干网/超薄路由器以识别那些 htaccess 修改（例如，htaccess 将请求转换为某个路径以作为查询字符串参数，然后您的骨干网/超薄应用程序将这些查询字符串参数放回框架正在寻找 URL 的任何位置路径组件）。

无论哪种方式，这将是颈部的全部疼痛，而且很可能不值得麻烦。

# c++ - 如何忽略输入文件中的空格？

> ID：11944197
> 
> 赞同：1
> 
> 时间：2012-08-14T00:33:36.330
> 
> 标签：c++

如何从输入中删除空格？它是一个整数数组。输入是这样的：

```
5 6 2 9
3 1 11 4 
```

我将不得不把它当作一个整数。然后使用冒泡排序对其进行排序。问题是我得到这样的输出：`9 8 7 4 2 1 -858993460 -858993460 -858993460 -858993460`

```
class inout
{
public : 
    int i[10];

    inout()
    {

    }

    void read()
    {
        ifstream inClientFile( "input.txt", ios::in );
        if ( !inClientFile )
            {
            cerr << "File could not be opened" << endl;
            exit( 1 );
            }
        int n=0;

        while (inClientFile >> i[n])
        {

            n++;
        }
        cout << " Data read complete" << endl;
    }

    void write()
    {
       ofstream outClientFile( "output.txt", ios::out ); 

       if ( !outClientFile ) {  
          cerr << "File could not be opened" << endl;
          exit( 1 );

       } 

        int n=0;
        for (int l=0 ; l < 10 ; l++)
        {
          outClientFile << i[l] << " " ;

        }   
        cout << " Data Write complete"  << endl;
    }

    void sortData(int asc )
    {
        int pos=0;
        int temp;
        temp = i[0];

        // asending 

        if (asc == 1)
        {
        for (int p = 0; p < 10 ; p ++ )
        {

        int pos=p;
        int temp2,temp = i[p];
            for (int j = p+1 ; j < 10 ; j ++ )
            {
                if (pos == p)
                {
                    if (i[p] > i[j])
                    {
                        pos = j;
                        temp = i[j];
                    }
                }
                else {
                    if (i[pos] > i[j])
                    {
                        pos = j;
                        temp = i[j];
                    }
                }
            }

            temp2 = i[pos];
            i[pos] = i[p];
            i[p] = temp2;
        }

    }
    else
    {
        for (int p = 0; p < 10 ; p ++ )
        {

        int pos=p;
        int temp2,temp = i[p];
            for (int j = p+1 ; j < 10 ; j ++ )
            {
                if (pos == p)
                {
                    if (i[p] < i[j])
                    {
                        pos = j;
                        temp = i[j];
                    }
                }
                else {
                    if (i[pos] < i[j])
                    {
                        pos = j;
                        temp = i[j];
                    }
                }
            }

            temp2 = i[pos];
            i[pos] = i[p];
            i[p] = temp2;
        }

    }
    }

};

int main()
{
    int d;

    inout x;
    x.read();
    cout<<"Press 1 to sort into ascending order"<<endl<<"Press any other key to sort into descending order"<<endl;
    cin>>d;
    x.sortData(d);  
    x.write();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:41:31.760

您应该记录实际读取了多少输入数字，`inout::read()`而不是总是对整个数组进行排序和打印。您的示例输入中有 8 个数字，但您的代码始终会排序并打印 10 个数字。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:06:23.423

可以使用 ifstream 的 rdbuf() 方法将整个文件的内容读入字符串：

```
std::ifstream in("myfile");

std::stringstream buffer;
buffer << in.rdbuf();

std::string contents(buffer.str()); 
```

然后使用通常的`string`操作技巧来获取整数。像这样的东西：

```
istringstream iss(contents);
int x=0;
do{
x=0;
iss>>x;
}while(iss); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:13:10.257

问题不在于空格。流提取器将空格（包括多个空格、换行符、制表符）视为分隔符。

输入循环仔细计算它已读取的值的数量，但其余代码忽略该计数。您的输入样本有 8 个元素，但代码硬编码为 10 个元素。数组中的最后两个元素`i`具有无意义的值，这是一个麻烦的秘诀。

# php - 我在将 JSON 字符串发布到 JSON 输出的 url 时遇到问题

> ID：11944200
> 
> 赞同：0
> 
> 时间：2012-08-14T00:34:39.240
> 
> 标签：php, json, http, http-post

我正在尝试向此 URL 发出发布请求：

```
http://clan.z8games.com/clanServices.asmx/getPlayerPublicInfo 
```

使用这个 JSON 字符串

```
{"usn":12434525} 
```

获得与此类似的输出；

```
 {"d":"{\"usn\":12434525,\"nick\":\"Guiness\",\"lev\":39,\"playCnt\":3734,\"winCnt\":3210,\"loseCnt\":239,\"enemyKillCnt\":129734,\"deathCnt\":5140,\"exp\":1072522,\"headshotKillCnt\":120339,\"friendKillCnt\":5,\"escapeCnt\":45,\"regDate\":\"2011\",\"lastPlayDate\":\"2012-08-12\",\"guildid\":217089,\"clanName\":\"Guiness™\",\"memberType\":null,\"gcClanID\":55000,\"hs5p\":202,\"fk1p\":0,\"k10p\":211,\"d20p\":2,\"esc4p\":0,\"sv3p\":676,\"matchLosses\":98,\"matchWins\":1894}"} 
```

因为我为游戏帐户（如统计数据）制作了一个数据抓取器，并且每个页面都根据帐户 ID 而有所不同。

我试过这个：

```
<?php 
$usn=$_GET["accountUSN"]; 
$url='http://clan.z8games.com/clanServices.asmx/getPlayerPublicInfo';

$options = array(
    'http' => array(
        'method' => "POST",
        'content' => http_build_query(
            array(
                'usn'=>$usn
             )
        )
    )
);

$context = stream_context_create($options);
$result =  file_get_contents($url,NULL,$context);
var_dump($result);
?> 
```

有人建议这样做，但它总是返回

```
bool(false) 
```

我只是想知道如何正确地做到这一点，如果它让你感觉更好，我真的不想要任何完整的代码。另外，我试图避免 cURL，我想要一个原生选项。

此外，有人试图在这里帮助我： [https](https://stackoverflow.com/questions/11920064/php-simple-html-dom-parser-not-giving-me-text-for-a-td) ://stackoverflow.com/questions/11920064/php-simple-html-dom-parser-not-giving-me-text-for-a-td 但我不小心删除了发布，成为新用户。我怎样才能取消删除这个？

编辑：

```
<?php

$usn=$_GET['accountUSN'];
$url='http://clan.z8games.com/clanServices.asmx/getPlayerPublicInfo';

$options=array('http'=>array('method'=>'POST','content'=>'content' => '{\'usn\':$usn}'));

$context=stream_context_create($options);
$result=file_get_contents($url,NULL,$context);
var_dump($result);
?> 
```

服务器错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:50:04.457

我使用它的方式是打开文件，然后从文件指针中获取流内容。

```
$context = stream_context_create($options); 
$fp = fopen($url, 'rb', false, $context);
if (!$fp) {
   die('Failed to open stream');
}
$result = stream_get_contents($fp);
var_dump($result); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:51:00.670

可能您可以使用 firebug，请参阅 Net 选项卡，比较您以编程方式发送的内容和浏览器发送的内容。确保您发送了它想要的东西。

# java - Java keyListener

> ID：11944202
> 
> 赞同：-3
> 
> 时间：2012-08-14T00:34:44.520
> 
> 标签：java, swing, keylistener, keyevent

我需要一些关于我的 java 代码的帮助我是 java 的新手，我想要做的是一旦我按下一个字母我想显示一些消息只是为了验证代码是否有效。使用 javax swing 库特别是 keylistener 和 key event，我不知道我是否做得对。这是我的代码：

```
import java.awt.*;
import javax.swing.*;
import java.awt.event.*;
import java.awt.event.KeyListener;
import java.awt.event.KeyEvent;
public class KeyStrokeButton{
    public JFrame frame;
    public JPanel panel;
    public JButton btnfocus, btnrelease, btnwindow, btnancestor;
    public JTextField text;
    public static void main(String[] args)
    {
        SwingUtilities.invokeLater(new Runnable(){
            public void run()
            {
                KeyStrokeButton mydesign = new KeyStrokeButton();
                mydesign.design();
            }
        });
    }

    public void design()
    {

        panel = new JPanel();
        panel.setLayout(null);

        frame = new JFrame("Keystroke Tutorials");
        frame.getContentPane().add(panel);
        frame.setSize(250, 250);
        frame.setVisible(true);
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        btnfocus = new JButton("<html><center>Focus");
        btnfocus.setBounds(10, 10, 90, 80);
        panel.add(btnfocus);
        btnfocus.addKeyListener(new ClickPressed());

        btnrelease = new JButton("Release");
        btnrelease.setBounds(110, 10, 90, 80);
        panel.add(btnrelease);

        btnancestor = new JButton("Ancestor");
        btnancestor.setBounds(10, 100, 90, 80);
        panel.add(btnancestor);

        btnwindow = new JButton("Window");
        btnwindow.setBounds(110, 100, 90, 80);
        panel.add(btnwindow);
    }
    class ClickPressed implements KeyListener
    {
        public void KeyPressed(KeyEvent e)
        {
            //any code.
        }
    }
} 
```

我想尽可能地为事件分离我的代码，所以我创建了一个类以使其可读。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T00:48:56.957

`KeyListener`在这方面是基于当前的重点。也就是说，关键事件只会传递给当前具有焦点的组件。

因此，例如，您有 3 个按钮。焦点按钮只有在获得焦点时才会收到按键事件。如果任何其他组件具有焦点，则焦点按钮将不会接收键事件。

一般来说，`KeyListener`s 不是一个好主意。使用[Key Bindings API会更好](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

更好地解释您要实现的目标将进一步帮助我们。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T00:57:44.570

Sujay 的回答将为您提供所需的所有信息，但这里有一个监听关键事件的快速示例。

你可以在启动后添加一个全局键监听器到你的 JFrame：

```
KeyboardFocusManager manager = KeyboardFocusManager.getCurrentKeyboardFocusManager();
manager.addKeyEventDispatcher (new MyDispatcher()); 
```

然后，您需要创建一个关键事件调度程序，并将您的代码添加到其中

```
 private class MyDispatcher implements KeyEventDispatcher
    {
        @Override
        public boolean dispatchKeyEvent(KeyEvent e)
        {
            if (e.getKeyCode() == 38) //up key
            {
            //Do something when the up key is pressed
            System.out.println("The up key was pressed");
            }
            else if (e.getKeyCode() == 40) //down key
            {
                //Do something when the down key is pressed
                System.out.println("The down key was pressed");
            }
            return false;
        }
    } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-08-14T00:47:27.533

我不知道您发布的内容中是否存在真正的问题。但是从您的代码来看，这里有几个指针：

*   设置空布局绝不是一个好主意。作为一个基本步骤，了解布局。所以在这里阅读设置布局：http: [//docs.oracle.com/javase/tutorial/uiswing/layout/visual.html](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)

*   您还需要学习如何使用 KeyListener。这是另一个可能对您有所帮助的链接：http: [//docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

我希望这会帮助你开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-26T16:37:48.937

尝试使用以下代码在 JFrame 中构建 KeyListener：设置代码以便在按下时检测到 enter 和 escape 键。

```
import java.awt.event.KeyEvent;
import java.awt.event.ActionEvent;
import java.awt.event.KeyListener;

class KeyListener extends JFrame implements KeyListener {

@Override
public void keyReleased(KeyEvent e) {               // Required for      KeyListener override

}
@Override
public void keyTyped(KeyEvent e) {                  // Required for     KeyListener override

}
}
public KeyListener() {

addKeyListener(this);        // KeyListener added to JFrame to detect key strokes
setFocusable(true);          // Ensure JFrame can gain focus

}

public void keyPressed(KeyEvent e) {    // Code to handle when key pressed
int keyCode = e.getKeyCode();
switch( keyCode ) { 
case KeyEvent.VK_ENTER:          // Code to handle when enter key pressed

    // ENTER CODE HERE

    break;
case KeyEvent.VK_ESCAPE:        // Code to handle when Escape key pressed
    // ENTER CODE HERE
    break; 
```

} }

# java - Hadoop前向调度

> ID：11944204
> 
> 赞同：2
> 
> 时间：2012-08-14T00:34:57.317
> 
> 标签：java, hadoop, scheduling, bigdata, decision-tree

在一篇关于实现分析大数据的决策树的谷歌论文中，他们提到了一些关于前向调度映射减少作业的内容。

他们说，如果他们目前有 2 个作业要运行，他们会运行第一个作业，然后第二个作业开始设置。他们有一个线程来查看第一个作业何时完成以及何时完成，他们将输入提供给第二个作业并启动它。这为他们节省了大量时间，因为他们提到的算法具有迭代作业。

我想知道如何在hadoop上做到这一点。这是论文的引用。前向调度在第 6.1 段中

[行星](http://static.googleusercontent.com/media/research.google.com/en//pubs/archive/36296.pdf)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:31:24.230

如果您不想为此使用 Oozie，您可以直接在 Java 代码中执行此操作。

我曾写过如何在 Hadoop 中实现迭代作业：

[http://codingwiththomas.blogspot.de/2011/04/controlling-hadoop-job-recursion.html](http://codingwiththomas.blogspot.de/2011/04/controlling-hadoop-job-recursion.html)

但请注意，这不是很有效，对于迭代繁重的算法，您最好使用[Apache Hama](http://hama.apache.org/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T03:05:20.617

[Oozie](http://incubator.apache.org/oozie/)是您正在寻找的。随着技术的发展，它有点不成熟，但我相信它会处理你描述的工作流程功能。您可以构建依赖关系图并触发事件的执行。

# mysql - 指向同一个表的多个外键 - 歧义问题

> ID：11944205
> 
> 赞同：1
> 
> 时间：2012-08-14T00:34:56.953
> 
> 标签：mysql, sql, foreign-key-relationship

我有一个 MySQL 数据库，其中包含两个外键的文章表：

*   fk_id_user_created
*   fk_id_user_edited

用户表如下所示

*   pk_id_user
*   用户名

如何连接这些表，以便返回创建和编辑文章的用户的用户名？明显有歧义问题...

编辑：这显然不起作用：

```
SELECT
    articles.title,
    articles.article,
    users.username as created_by,
    users_username as edited_by
FROM
    articles
LEFT JOIN
    users
ON
    articles.fk_id_user_created = users.pk_id_username
LEFT JOIN
    users
ON
    articles.fk_id_user_edited = users.pk_id_username 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T00:50:30.353

加入`users`两次`articles`，提供一个别名来区分实例：

```
select  
  articles.whatever,
  created.username as created_username,
  edited.username as edited_username
from 
  articles
  inner join users as created on articles.fk_id_user_created = created.pk_id_user
  inner join users as edited  on articles.fk_id_user_edited  = edited.pk_id_user
; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:43:49.267

你的意思是这样的，如果我理解正确的话？

```
CREATE TABLE USER (
user_id INTEGER PRIMARY KEY AUTO_INCREMENT,
username VARCHAR(255)
);

INSERT INTO USER (username) VALUES
('A'), ('B');

CREATE TABLE article (
id INTEGER PRIMARY KEY AUTO_INCREMENT,
user_id_created INTEGER,
user_id_edited INTEGER
);

INSERT INTO article (user_id_created, user_id_edited)
VALUES (1, 1), (2,1);

SELECT username 
FROM USER 
WHERE user_id IN (SELECT user_id_created FROM article WHERE user_id_created=user_id_edited);

DROP TABLE USER;
DROP TABLE article; 
```

而且我没有使用连接，我只是假设 user_id_created 和 user_id_edited 是相同的。

# python - GAE下如何查看日志模块输出模块？

> ID：11944206
> 
> 赞同：1
> 
> 时间：2012-08-14T00:35:06.187
> 
> 标签：python, google-app-engine, logging

我正在尝试调试[此代码](https://stackoverflow.com/questions/11919018/how-debugging-an-application-without-using-the-python-ide-and-when-you-do-not-ha)。有了这个目标，我正在尝试按照[本教程](http://inventwithpython.com/blog/2012/04/06/stop-using-print-for-debugging-a-5-minute-quickstart-guide-to-pythons-logging-module/)使用日志记录。带着这个目标，我在我的脚本中插入了这段代码：

```
import logging

logging.basicConfig(level=logging.DEBUG, format='%(asctime)s - %(levelname)s - %(message)s')

logging.debug('This is a log message.') 
```

而且，在我想要获取消息记录的部分中，我插入了以下行：`logging.debug ('This is a log message.')`这样：

```
def fcount(self,f,cat):
    res = db.GqlQuery("SELECT * FROM fc WHERE feature =:feature AND category =:category", feature = f, category = cat).get()
    logging.debug('This is a log message.')
#    res=self.con.execute(
#      'select count from fc where feature="%s" and category="%s"'
#      %(f,cat)).fetchone()
    if res is None: return 0
    else:
        res = fc.count
        return float(res) 
```

事实证明，我的应用程序是一个 GAE 应用程序。而且我看不到日志消息，它没有出现在浏览器或 PyScripter IDE 中。我应该在哪里看到带有日志记录消息的屏幕？

PS - 我尝试使用此代码将日志消息交替写入文件：

```
import logging
logging.basicConfig(filename='log_filename.txt', level=logging.DEBUG, format='%(asctime)s - %(levelname)s - %(message)s')
logging.debug('This is a log message.') 
```

但我发现一个 I/O 错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:35:05.290

您是在尝试在 Google App Engine 上运行记录器，还是在您的本地计算机上无法运行？如果它在 GAE 上不起作用，那是因为您已将记录器设置为写入文件，而 GAE 并没有真正让您访问文件系统。

对于非基于文件的日志，您可以在 GAE 管理控制台中找到这些日志。（在您的本地主机上，它位于

```
http://localhost:8080/_ah/admin 
```

有关如何使用在 GAE 上运行的日志记录模块，请参阅[https://developers.google.com/appengine/articles/logging 。](https://developers.google.com/appengine/articles/logging)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T01:38:27.910

我无法为您提供有关 PyScripter 的详细信息，但您需要设置 IDE 以将`-d`(or `--debug`) 标志传递给 dev_appserver.py。这会启用`DEBUG`日志，否则您只会看到级别`INFO`或更高级别的消息。

所以你可以试试：

```
logging.info('This is a log message.') 
```

# jms - JMS 点对点模型中后期消费的消息

> ID：11944214
> 
> 赞同：0
> 
> 时间：2012-08-14T00:36:04.300
> 
> 标签：jms

我有一个在 WebLogic MQ、WebLogic 8.1 上运行的 JMS 应用程序。

生产者和消费者模型每天 24 小时处理大约 5 万个订单。配置了 1 个生产者和 4 个消费者。

问题是，有时消费者在 15 小时后才收到一小部分 5-8 条消息。Amd 这些丢失的消息几乎是在同一时间被消费者接收到的。这导致了一个问题，我不确定为什么会发生这种情况。

# c++ - 使用迭代器擦除向量中的元素

> ID：11944216
> 
> 赞同：0
> 
> 时间：2012-08-14T00:36:06.947
> 
> 标签：c++, vector, erase

我有以下向量来存储播放器类型的元素：

```
std::vector<player> players; 
```

在一个名为 game 的类中，它具有以下功能：

```
void game::removePlayer(string name) {
  vector<player>::iterator begin = players.begin();

  // find the player
  while (begin != players.end()) {
      if (begin->getName() == name) {
          break;
      }
      ++begin;
  }

  if (begin != players.end())
      players.erase(begin); 
```

}

我收到以下错误：

```
 1>------ Build started: Project: texas holdem, Configuration: Debug Win32 ------
1>  game.cpp
1>c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility(2514): error C2582: 'operator =' function is unavailable in 'player'
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\xutility(2535) : see reference to function template instantiation '_OutIt std::_Move<_InIt,_OutIt>(_InIt,_InIt,_OutIt,std::_Nonscalar_ptr_iterator_tag)' being compiled
1>          with
1>          [
1>              _OutIt=player *,
1>              _InIt=player *
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\vector(1170) : see reference to function template instantiation '_OutIt std::_Move<player*,player*>(_InIt,_InIt,_OutIt)' being compiled
1>          with
1>          [
1>              _OutIt=player *,
1>              _InIt=player *
1>          ]
1>          c:\program files (x86)\microsoft visual studio 10.0\vc\include\vector(1165) : while compiling class template member function 'std::_Vector_iterator<_Myvec> std::vector<_Ty>::erase(std::_Vector_const_iterator<_Myvec>)'
1>          with
1>          [
1>              _Myvec=std::_Vector_val<player,std::allocator<player>>,
1>              _Ty=player
1>          ]
1>          c:\vcprojects\texas holdem\texas holdem\game.h(29) : see reference to class template instantiation 'std::vector<_Ty>' being compiled
1>          with
1>          [
1>              _Ty=player
1>          ]
========== Build: 0 succeeded, 1 failed, 0 up-to-date, 0 skipped ========== 
```

删除线

```
players.erase(begin); 
```

修复了错误，为什么会发生，我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:40:29.103

您需要`Player & operator= (const Player & other)`为您的类 Player 重载赋值运算符。这是必需的，因为`erase`要求它的参数是可复制的（它需要在删除后重新排列向量的其他元素）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:41:59.163

正在发生的事情是库代码`player`通过将迭代器上方的每个数组元素推到一个槽中来删除对象。为此，它使用 operator= 复制每个对象。显然该类`player`没有该运算符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T00:40:54.280

问题是您的`Player`课程不可移动。为了`Player`从向量的中间移除 a，`Player`之后的所有 s 都必须在向量中向下移动一个空格。一种解决方案是不使用向量。另一个是制作`Player`可移动的。

# c - 如何从函数内更改结构内灵活数组的值？

> ID：11944221
> 
> 赞同：2
> 
> 时间：2012-08-14T00:36:53.310
> 
> 标签：c

我正在尝试重写我写的位数组，我想添加的一件事是一个函数，它可以很容易地设置位数组中的值。现在，我的位数组看起来像这样：

```
typedef struct{
  int length;
  char bitarray[];
}BitArray; 
```

我正在尝试编写一个函数：

```
void initBitArray(BitArray * b, int numBits, int initVal); 
```

将长度设置为 numBits，将 bitarray 设置为 numBits/8 + 1 长的字符数组，每个字符都有一个值 initVal。我唯一遇到的问题是设置位数组的值。这不是作业或任何东西，我只是想让一些爱好代码更漂亮。这就是我试图做的：

```
void initBitArray(BitArray * b, int numBits, int initVal){
  char foo[numBits/8 + 1]; 
  b->bitarray = foo;
  int i;
  for (i=0; i<numBits/8 + 1; ++i){
    b->bitarray[i]=val;
  }
  b->length = numBits;
  return;
} 
```

显然这不起作用：p

我试过这个：

```
void initBitArray(BitArray * b, int numBits, int initVal){
  b = (BitArray *)realloc( b, sizeof(b) + numBits/8 + 1);
  b->length = numBits;
  int i;
  for (i=0; i< (b->length); ++i){
    b->bitarray[i]=initVal;
  }
  return;
} 
```

它编译但给我一个运行时错误？

```
*** glibc detected *** ./prog: realloc(): invalid old size: 0xbfe573f0 ***
======= Backtrace: =========
/lib/libc.so.6[0xb76c0fd4]
/lib/libc.so.6[0xb76c4a29]
/lib/libc.so.6(realloc+0x107)[0xb76c5657]
/lib/libc.so.6(realloc+0x3c)[0xb76c558c]
./prog[0x8048556]
./prog[0x80483f1]
======= Memory map: ======== 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T02:49:53.553

```
BitArray *allocBitArray(int length)
{
    BitArray *ba = malloc(sizeof(BitArray) + length);
    if (ba != 0)
    {
        ba->length = length;
        for (i = 0; i < length; i++)
             ba->bitarray[i] = 0;
    }
    return ba;
} 
```

您可以通过其他方式执行循环——例如，使用`memset()`，或使用`calloc()`代替`malloc()`。请注意，与 C99 之前的“struct hack”不同，灵活的数组成员机制允许您准确地分配您需要的空间，而不是更多 — 可靠且可移植。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:40:36.037

首先，具有灵活数组成员的结构只能动态分配（即使用 *alloc 系列函数）。因此，要调整`bitarray[]`成员的大小，您需要调用`realloc`具有新大小的 BitArray 指针`sizeof(BitArray) + flexible_member_size_you_want`。

像所有其他成员一样访问灵活成员，即

```
BitArray *b = /* ... */;
b->length = /* ... */;
b->bitarray[0] = /* ... */; 
```

# php - 找不到类“数据库”（此处需要一点帮助）

> ID：11944222
> 
> 赞同：0
> 
> 时间：2012-08-14T00:37:27.483
> 
> 标签：php, database

我对 PHP 比较陌生，并且在阅读了以前对这个问题的答案后，我完全感到困惑..

我最近将一个旧网站移到了一个新的服务器主机上，并且在尝试加载我得到的页面时

```
PHP Fatal error:  Class 'database' not found in /home4/courseso/public_html/plugins/system/legacy.php on line 147 
```

我对这意味着什么或指的是什么感到非常困惑，我在页面上看到的只是一个空白的白色背景，就是这样...... legacy.php 文件如下。

```
<?php
/**
* @version      $Id: legacy.php 11299 2008-11-22 01:40:44Z ian $
* @package      Joomla
* @copyright    Copyright (C) 2005 - 2008 Open Source Matters. All rights reserved.
* @license      GNU/GPL, see LICENSE.php
* Joomla! is free software. This version may have been modified pursuant
* to the GNU General Public License, and as distributed it includes or
* is derivative of works licensed under the GNU General Public License or
* other free or open source software licenses.
* See COPYRIGHT.php for copyright notices and details.
*/

// no direct access
defined( '_JEXEC' ) or die( 'Restricted access' );

jimport( 'joomla.plugin.plugin' );

/**
 * Joomla! Debug plugin
 *
 * @package     Joomla
 * @subpackage  System
 */
class  plgSystemLegacy extends JPlugin
{
    /**
     * Constructor
     *
     * For php4 compatability we must not use the __constructor as a constructor for plugins
     * because func_get_args ( void ) returns a copy of all passed arguments NOT references.
     * This causes problems with cross-referencing necessary for the observer design pattern.
     *
     * @param   object      $subject The object to observe
      * @param  array       $config  An array that holds the plugin configuration
     * @since   1.0
     */
    function plgSystemLegacy(& $subject, $config)
    {
        parent::__construct($subject, $config);

        global $mainframe;

        // Define the 1.0 legacy mode constant
        define('_JLEGACY', '1.0');

        // Set global configuration var for legacy mode
        $config = &JFactory::getConfig();
        $config->setValue('config.legacy', 0);

        // Import library dependencies
        require_once(dirname(__FILE__).DS.'legacy'.DS.'classes.php');
        require_once(dirname(__FILE__).DS.'legacy'.DS.'functions.php');

        // Register legacy classes for autoloading
        JLoader::register('mosAdminMenus'   , dirname(__FILE__).DS.'legacy'.DS.'adminmenus.php');
        JLoader::register('mosCache'        , dirname(__FILE__).DS.'legacy'.DS.'cache.php');
        JLoader::register('mosCategory'     , dirname(__FILE__).DS.'legacy'.DS.'category.php');
        JLoader::register('mosCommonHTML'   , dirname(__FILE__).DS.'legacy'.DS.'commonhtml.php');
        JLoader::register('mosComponent'    , dirname(__FILE__).DS.'legacy'.DS.'component.php');
        JLoader::register('mosContent'      , dirname(__FILE__).DS.'legacy'.DS.'content.php');
        JLoader::register('mosDBTable'      , dirname(__FILE__).DS.'legacy'.DS.'dbtable.php');
        JLoader::register('mosHTML'         , dirname(__FILE__).DS.'legacy'.DS.'html.php');
        JLoader::register('mosInstaller'    , dirname(__FILE__).DS.'legacy'.DS.'installer.php');
        JLoader::register('mosMainFrame'    , dirname(__FILE__).DS.'legacy'.DS.'mainframe.php');
        JLoader::register('mosMambot'       , dirname(__FILE__).DS.'legacy'.DS.'mambot.php');
        JLoader::register('mosMambotHandler', dirname(__FILE__).DS.'legacy'.DS.'mambothandler.php');
        JLoader::register('mosMenu'         , dirname(__FILE__).DS.'legacy'.DS.'menu.php');
        JLoader::register('mosMenuBar'      , dirname(__FILE__).DS.'legacy'.DS.'menubar.php');
        JLoader::register('mosModule'       , dirname(__FILE__).DS.'legacy'.DS.'module.php');
        //JLoader::register('mosPageNav'    , dirname(__FILE__).DS.'legacy'.DS.'pagination.php');
        JLoader::register('mosParameters'   , dirname(__FILE__).DS.'legacy'.DS.'parameters.php');
        JLoader::register('patFactory'      , dirname(__FILE__).DS.'legacy'.DS.'patfactory.php');
        JLoader::register('mosProfiler'     , dirname(__FILE__).DS.'legacy'.DS.'profiler.php');
        JLoader::register('mosSection'      , dirname(__FILE__).DS.'legacy'.DS.'section.php');
        JLoader::register('mosSession'      , dirname(__FILE__).DS.'legacy'.DS.'session.php');
        JLoader::register('mosToolbar'      , dirname(__FILE__).DS.'legacy'.DS.'toolbar.php');
        JLoader::register('mosUser'         , dirname(__FILE__).DS.'legacy'.DS.'user.php');

        // Register class for the database, depends on which db type has been selected for use
        $dbtype = $config->getValue('config.dbtype', 'mysql');
        JLoader::register('database'        , dirname(__FILE__).DS.'legacy'.DS.$dbtype.'.php');

        /**
         * Legacy define, _ISO define not used anymore. All output is forced as utf-8.
         * @deprecated  As of version 1.5
         */
        define('_ISO','charset=utf-8');

        /**
         * Legacy constant, use _JEXEC instead
         * @deprecated  As of version 1.5
         */
        define( '_VALID_MOS', 1 );

        /**
         * Legacy constant, use _JEXEC instead
         * @deprecated  As of version 1.5
         */
        define( '_MOS_MAMBO_INCLUDED', 1 );

        /**
         * Legacy constant, use DATE_FORMAT_LC instead
         * @deprecated  As of version 1.5
         */
        DEFINE('_DATE_FORMAT_LC', JText::_('DATE_FORMAT_LC1') ); //Uses PHP's strftime Command Format

        /**
         * Legacy constant, use DATE_FORMAT_LC2 instead
         * @deprecated  As of version 1.5
         */
        DEFINE('_DATE_FORMAT_LC2', JText::_('DATE_FORMAT_LC2'));

        /**
         * Legacy constant, use JFilterInput instead
         * @deprecated  As of version 1.5
         */
        DEFINE( "_MOS_NOTRIM", 0x0001 );

        /**
         * Legacy constant, use JFilterInput instead
         * @deprecated  As of version 1.5
         */
        DEFINE( "_MOS_ALLOWHTML", 0x0002 );

        /**
         * Legacy constant, use JFilterInput instead
         * @deprecated  As of version 1.5
         */
        DEFINE( "_MOS_ALLOWRAW", 0x0004 );

        /**
         * Legacy global, use JVersion->getLongVersion() instead
         * @name $_VERSION
         * @deprecated  As of version 1.5
         */
         $GLOBALS['_VERSION']   = new JVersion();
         $version               = $GLOBALS['_VERSION']->getLongVersion();

        /**
         * Legacy global, use JFactory::getDBO() instead
         * @name $database
         * @deprecated  As of version 1.5
         */
        $conf =& JFactory::getConfig();
        $GLOBALS['database'] = new database($conf->getValue('config.host'), $conf->getValue('config.user'), $conf->getValue('config.password'), $conf->getValue('config.db'), $conf->getValue('config.dbprefix'));
        $GLOBALS['database']->debug($conf->getValue('config.debug'));

        /**
         * Legacy global, use JFactory::getUser() [JUser object] instead
         * @name $my
         * @deprecated  As of version 1.5
         */
        $user   =& JFactory::getUser();

        $GLOBALS['my']      = (object)$user->getProperties();
        $GLOBALS['my']->gid = $user->get('aid', 0);

        /**
         * Insert configuration values into global scope (for backwards compatibility)
         * @deprecated  As of version 1.5
         */

        $temp = new JConfig;
        foreach (get_object_vars($temp) as $k => $v) {
            $name = 'mosConfig_'.$k;
            $GLOBALS[$name] = $v;
        }

        $GLOBALS['mosConfig_live_site']     = substr_replace(JURI::root(), '', -1, 1);
        $GLOBALS['mosConfig_absolute_path'] = JPATH_SITE;
        $GLOBALS['mosConfig_cachepath'] = JPATH_BASE.DS.'cache';

        $GLOBALS['mosConfig_offset_user']   = 0;

        $lang =& JFactory::getLanguage();
        $GLOBALS['mosConfig_lang']          = $lang->getBackwardLang();

        $config->setValue('config.live_site',       $GLOBALS['mosConfig_live_site']);
        $config->setValue('config.absolute_path',   $GLOBALS['mosConfig_absolute_path']);
        $config->setValue('config.lang',            $GLOBALS['mosConfig_lang']);

        /**
         * Legacy global, use JFactory::getUser() instead
         * @name $acl
         * @deprecated  As of version 1.5
         */
        $acl =& JFactory::getACL();

        // Legacy ACL's for backward compat
        $acl->addACL( 'administration', 'edit', 'users', 'super administrator', 'components', 'all' );
        $acl->addACL( 'administration', 'edit', 'users', 'administrator', 'components', 'all' );
        $acl->addACL( 'administration', 'edit', 'users', 'super administrator', 'user properties', 'block_user' );
        $acl->addACL( 'administration', 'manage', 'users', 'super administrator', 'components', 'com_users' );
        $acl->addACL( 'administration', 'manage', 'users', 'administrator', 'components', 'com_users' );
        $acl->addACL( 'administration', 'config', 'users', 'super administrator' );
        //$acl->addACL( 'administration', 'config', 'users', 'administrator' );

        $acl->addACL( 'action', 'add', 'users', 'author', 'content', 'all' );
        $acl->addACL( 'action', 'add', 'users', 'editor', 'content', 'all' );
        $acl->addACL( 'action', 'add', 'users', 'publisher', 'content', 'all' );
        $acl->addACL( 'action', 'edit', 'users', 'author', 'content', 'own' );
        $acl->addACL( 'action', 'edit', 'users', 'editor', 'content', 'all' );
        $acl->addACL( 'action', 'edit', 'users', 'publisher', 'content', 'all' );
        $acl->addACL( 'action', 'publish', 'users', 'publisher', 'content', 'all' );

        $acl->addACL( 'action', 'add', 'users', 'manager', 'content', 'all' );
        $acl->addACL( 'action', 'edit', 'users', 'manager', 'content', 'all' );
        $acl->addACL( 'action', 'publish', 'users', 'manager', 'content', 'all' );

        $acl->addACL( 'action', 'add', 'users', 'administrator', 'content', 'all' );
        $acl->addACL( 'action', 'edit', 'users', 'administrator', 'content', 'all' );
        $acl->addACL( 'action', 'publish', 'users', 'administrator', 'content', 'all' );

        $acl->addACL( 'action', 'add', 'users', 'super administrator', 'content', 'all' );
        $acl->addACL( 'action', 'edit', 'users', 'super administrator', 'content', 'all' );
        $acl->addACL( 'action', 'publish', 'users', 'super administrator', 'content', 'all' );

        $acl->addACL( 'com_syndicate', 'manage', 'users', 'super administrator' );
        $acl->addACL( 'com_syndicate', 'manage', 'users', 'administrator' );
        $acl->addACL( 'com_syndicate', 'manage', 'users', 'manager' );

        $GLOBALS['acl'] =& $acl;

        /**
         * Legacy global
         * @name $task
         * @deprecated  As of version 1.5
         */
        $GLOBALS['task'] = JRequest::getString('task');

        /**
         * Load the site language file (the old way - to be deprecated)
         * @deprecated  As of version 1.5
         */
        global $mosConfig_lang;
        $mosConfig_lang = JFilterInput::clean($mosConfig_lang, 'cmd');
        $file = JPATH_SITE.DS.'language'.DS.$mosConfig_lang.'.php';
        if (file_exists( $file )) {
            require_once( $file);
        } else {
            $file = JPATH_SITE.DS.'language'.DS.'english.php';
            if (file_exists( $file )) {
                require_once( $file );
            }
        }

        /**
         *  Legacy global
         *  use JApplicaiton->registerEvent and JApplication->triggerEvent for event handling
         *  use JPlugingHelper::importPlugin to load bot code
         *  @deprecated As of version 1.5
         */
        $GLOBALS['_MAMBOTS'] = new mosMambotHandler();

        $mosmsg = JRequest::getVar( 'mosmsg' );
        $mainframe->enqueueMessage( $mosmsg );
    }

    /**
     * Fixes the $my global if the user was restored by the remember me plugin
     */
    function onAfterInitialise()
    {
        $user   =& JFactory::getUser();
        if ($user->id) {
            if ($GLOBALS['my']->id === 0) {
                $GLOBALS['my']  = (object)$user->getProperties();
                $GLOBALS['my']->gid = $user->get('aid', 0);
            }
        }

        return true;
    }

    function onAfterRoute()
    {
        global $mainframe;
        if ($mainframe->isAdmin()) {
            return;
        }

        switch(JRequest::getCmd('option'))
        {
            case 'com_content'   :
                $this->routeContent();
                break;
            case 'com_newsfeeds' :
                $this->routeNewsfeeds();
                break;
            case 'com_weblinks' :
                $this->routeWeblinks();
                break;
            case 'com_frontpage' :
                JRequest::setVar('option', 'com_content');
                JRequest::setVar('view', 'frontpage');
                break;
            case 'com_login'     :
                JRequest::setVar('option', 'com_user');
                JRequest::setVar('view', 'login');
                break;
            case 'com_registration'     :
                JRequest::setVar('option', 'com_user');
                JRequest::setVar('view', 'register');
                break;
        }

        /**
         * Legacy global, use JApplication::getTemplate() instead
         * @name $cur_template
         * @deprecated  As of version 1.5
         */
        $GLOBALS['cur_template'] = $mainframe->getTemplate();
    }

    function routeContent()
    {
        $viewName   = JRequest::getCmd( 'view', 'article' );
        $layout     = JRequest::getCmd( 'layout', 'default' );

        // interceptors to support legacy urls
        switch( JRequest::getCmd('task'))
        {
            //index.php?option=com_content&task=x&id=x&Itemid=x
            case 'blogsection':
                $viewName   = 'section';
                $layout = 'blog';
                break;
            case 'section':
                $viewName   = 'section';
                break;
            case 'category':
                $viewName   = 'category';
                break;
            case 'blogcategory':
                $viewName   = 'category';
                $layout = 'blog';
                break;
            case 'archivesection':
            case 'archivecategory':
                $viewName   = 'archive';
                break;
            case 'frontpage' :
                $viewName = 'frontpage';
                break;
            case 'view':
                $viewName   = 'article';
                break;
        }

        JRequest::setVar('layout', $layout);
        JRequest::setVar('view', $viewName);
    }

    function routeNewsfeeds()
    {
        $viewName = JRequest::getCmd( 'view', 'categories' );

        // interceptors to support legacy urls
        switch( JRequest::getCmd('task'))
        {
            //index.php?option=com_newsfeeds&task=x&catid=xid=x&Itemid=x
            case 'view':
                $viewName   = 'newsfeed';
                break;

            default:
            {
                if(JRequest::getInt('catid') && !JRequest::getCmd('view')) {
                    $viewName = 'category';
                }
            }
        }

        JRequest::setVar('view', $viewName);
    }

    function routeWeblinks()
    {
        $viewName = JRequest::getCmd( 'view', 'categories' );

        // interceptors to support legacy urls
        switch( JRequest::getCmd('task'))
        {
            //index.php?option=com_weblinks&task=x&catid=xid=x
            case 'view':
                $viewName   = 'weblink';
                break;

            default:
            {
                if(($catid = JRequest::getInt('catid')) && !JRequest::getCmd('view')) {
                    $viewName = 'category';
                    JRequest::setVar('id', $catid);
                }
            }
        }

        JRequest::setVar('view', $viewName);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:56:14.697

我不是 Joomla 专家，但看起来你的问题是：

```
$dbtype = $config->getValue('config.dbtype', 'mysql');
JLoader::register('database', dirname(__FILE__).DS.'legacy'.DS.$dbtype.'.php'); 
```

也许你应该做一个：

```
echo dirname(__FILE__).DS.'legacy'.DS.$dbtype.'.php'; 
```

并调查该文件（确保它存在等）

# regex - 如何使用 apache url rewrite 仅删除部分 URl 字符串？

> ID：11944225
> 
> 赞同：0
> 
> 时间：2012-08-14T00:38:04.250
> 
> 标签：regex, apache, url-rewriting

我有成千上万个如下所示的 URL：

```
http://www.domain.com/here-is-a-product-ab00007a1.html 
```

URL 末尾（.html 之前）的数字是 SKU。该网站最近重新启动，这些数字不再存在于 URL 中。

我想将所有这样的 URL 重定向到不包含 SKU 的新版本，例如：

```
http://www.domain.com/here-is-a-product.html 
```

任何帮助将不胜感激！谢谢你。

**===== 编辑 =====**

实际的sku格式是这样的：

```
aa00000a00 
```

总是有**2 个字母**，后跟**5 个数字**，然后是**1 个字母**，然后是**2 个数字**。

sku 的长度**始终为 10 个字符**。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:55:02.697

尝试将其放入文档根目录的 htaccess 文件中：

```
RewriteEngine On
RewriteRule ^(.*)-[a-z]{2}[0-9]{5}[a-z][0-9]{2}\.html$ /$1.html [L,NC] 
```

如果您愿意，您也可以将它放在您的虚拟主机/服务器配置中，只需从规则的目标中删除前导斜杠，这样它就很简单：`$1.html`

# jquery - 具有累积逻辑的jQuery循环？

> ID：11944229
> 
> 赞同：1
> 
> 时间：2012-08-14T00:38:43.733
> 
> 标签：jquery

当您想处理一些累积结果时，如何循环遍历 jQuery 中的 children() 或 each() 调用的结果？例如，总结复选框中的数字，如果它们超过 100%，则更改一个类。所有示例似乎只执行每次迭代独立的逻辑。

我正在寻找这个 c# 的 javascript/jquery equiv

```
var x = new List<int> { 1, 2, 3 };
Console.WriteLine(x.All(y => y > 0)); 
```

这就是我现在所拥有的，但似乎应该有一些更清洁的东西。

```
var count = 0;
$(this).parent().children().each(
    function () {
        if ($(this).hasClass("selected")) {
            count++;
        }
    }
);

if ($(this).parent().children().length == count) {
    $(this).parent().parent().toggleClass("selected");
}
else {
    $(this).parent().parent().removeClass("selected");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:57:10.503

好吧，Javascript/Jquery 不是 SQL，没有定义“累积”/分组操作的概念。此外，“累积逻辑”是一个相当模糊的术语，它实际上取决于您要执行的特定任务。

因此，您的 sum 示例可以在`each()`外部变量的帮助下进行调整，对于`input`/text 标签，它将是：

```
var sum = 0;
var objects = $("input.myclass");
objects.each(function() {sum+=Number($(this).val());});
if (sum>100) objects.addClass("anotherclass"); 
```

对于复选框：我不确定您所说的“复选框中的总和”是什么意思，您是指值吗？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T01:02:40.640

Aside from the obvious iterate and sum approach, you can use the newer javascript iteration functions. Assuming you want so sum some numbers:

```
var sum = objects
    //convert to jquery selection of numbers
    .map(function() {return +$(this).val(); })
    //convert to javascript array
    .get() 
    //add together
    .reduce(function(a, b) { return a + b; }); 
```

* * *

For your example:

```
var checkboxes = $(this).parent().children()
var allSelected = checkboxes.map(function () {
    return $(this).hasClass("selected");
}).get().every(function(x) { return x; }); 
```

You can go one stage better by extending jQuery

```
$.fn.every = function(f) {
    return [].every.call(this, function(x) {
        return f.call(x);
    });
} 
```

Leaving you with:

```
var checkboxes = $(this).parent().children()
var allSelected = checkboxes.every(function() {
    return $(this).hasClass("selected");
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T01:01:18.390

Unlike the linear array operations [`map`](http://api.jquery.com/jQuery.map/) and `filter`, jQuery doesn't have a polyfill for it, but I think what you're looking for is [`Array.reduce`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Array/Reduce). It is well-supported in newer browsers.

You can implement the javascript you have there using the boolean toggleClass syntax.

```
var count = $(this).parent().children(".selected").length;
$(this).parent().parent().toggleClass("selected",
    $(this).parent().children().length === count); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T01:00:37.657

It's not that hard. I'm not sure if this will work 100%, but it'll show you how to do cumulative logic

```
var score = 0;
$("#checkboxDivId input[type=checkbox]:checked").each(function()
{
    score += $(this).val();
});
if(score >= 100)
{
    //Put your code here
} 
```

Obviously this would only work if your score is the value property of the checkbox, and if the selector is correct (not 100% sure on whether or not the selector is correct)

# c++ - 更新 char* 函数 C++

> ID：11944230
> 
> 赞同：0
> 
> 时间：2012-08-14T00:38:46.010
> 
> 标签：c++, function

我正在尝试对函数中的字符串进行一些简单的更新，我得到了以下示例：

```
void change(char* buffer) {
  buffer[0] = 'b';
}

void main() {
  char buffer[20] = "abc   def   ghi   j\0";
  printf("before: .%s., %p\n", buffer, buffer);
  change(buffer);
  printf("after:  .%s.\n", buffer);
} 
```

但是，如果我将 char* 用作缓冲区而不是 char[]，则会在函数中出现错误。所以下面的例子不起作用：

```
void compact(char* buffer) {
  buffer[0] = 'b';
}

void main() {
  char* buffer="abc   def ghi\0";
  printf("before: .%s., %p\n", buffer, buffer);
  change(buffer);
  printf("after:  .%s.\n", buffer);
} 
```

关于我做错了什么有什么建议吗？谢谢。

大学教师

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:40:49.867

如果你使用`char*`，你的变量指向一个**字符串文字**并调用未定义的行为。

您不能修改字符串文字。当您声明这样的指针时

```
char* buffer="abc   def ghi\0"; 
```

`buffer`将指向只读内存（可能是实现定义的）。无论如何，您无法更改其内容。保留此语法是为了与 C 兼容，但是，IMO，这不应该编译。每当您看到类似的内容（`char*`指向 C 字符串）时，立即在您的脑海中将其翻译为

```
const char* buffer="abc   def ghi\0"; 
```

戴上你的 C++ 眼镜。如果你没有它们，那就买一对（你会看到各种各样的东西，像这样，通过引用返回本地人，忘记返回等等）。

另一种情况：

```
char buffer[] = "abc   def ghi\0"; 
```

很好，因为您实际上创建了一个所需大小的数组并用该内容填充它。这不再是指向字符串文字的指针。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:42:39.097

你不能改变*文字*，你只能改变一个变量。您正在尝试执行与此等效的操作：

```
void increment(int &f) { ++f; }

increment(2); 
```

显然这没有任何意义。要修改一个值，它必须存储在您的代码分配的内存中的某个位置。如果不先复制常量，就无法修改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T00:45:52.667

```
char* buffer="abc   def ghi\0"; 
```

它是一个常量字符串，你不能修改它。

大多数编译器都会给你一个警告，因为你使用***char* ***（不是***const char* ***）指向 const 字符串。

# asp.net-mvc-3 - Appharbor URL 中的端口号导致页面/内容无法加载

> ID：11944236
> 
> 赞同：4
> 
> 时间：2012-08-14T00:39:37.793
> 
> 标签：asp.net-mvc-3, appharbor, requestreduce

在 AppHarbor 上，以标准 Asp .Net 方式生成当前绝对 URL 会生成以下格式的 URL：

```
scheme://[domain]:[port]/path 
```

从浏览器访问时，此 URL 失败 -**删除端口号可修复此问题**。

我相当有信心，情况并非总是如此，这种变化现在导致我的应用程序出现问题。

我知道我可以使用辅助方法正确创建 URL，但是，在 3rd 方插件（例如 RequestReduce）中，这是无法控制的。

有谁知道一种在全球范围内改变这种情况的方法，这样端口号就永远不会生成？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:51:34.093

考虑[将此模块](http://nuget.org/packages/Premotion.AspNet.AppHarbor.Integration)添加到您的项目中。

我们正在考虑在所有 AppHarbor 服务器上添加类似的内容，以避免人们当前使用的各种解决方法。

# html - TCPDF：writeHTML 忽略边距右定义

> ID：11944238
> 
> 赞同：1
> 
> 时间：2012-08-14T00:39:43.393
> 
> 标签：html, margin, tcpdf

我使用`writeHTML()`TCPDF 中的函数使用`setPageRegions()`函数编写 HTML，以便它在图片周围浮动。它工作正常。但我唯一的问题是，文本将转到页面的最右端。

我`SetMargins(20, 20, 20)`用 style 属性设置了边距，还用 style 属性设置了 html 容器的边距和 with，但它忽略了这一切。

我怎样才能让文本宽度在右侧有一个边距。左边没问题。

这是我的代码：

```
$pdf->SetMargins( 20, 20);
$pdf->Image( $img, 25, 80, 100, 128, 'JPEG', '', 'N', 0);
$txt = "<p style=\"width:380px;margin-right:20px;text-align:justify;color:rgb( 54,111,148);font-size:12pt;line-height:1px;\">... my long text ...</p>";
$pdf->SetXY( 25, 80);
$regions = array( array( 'page' => '', 'xt' => 135, 'yt' =>  80, 'xb' => 135, 'yb' =>  215, 'side' => 'L')); // the region where the picture is located incl. paddings
$pdf->setPageRegions( $regions);
$pdf->writeHTML( $txt, true, false, true, false, ''); 
```

谢谢你的帮助。

# c# - 为什么 12 X 8.33 似乎等于 105？

> ID：11944252
> 
> 赞同：4
> 
> 时间：2012-08-14T00:41:38.227
> 
> 标签：c#, winforms, dynamic, tablelayoutpanel

在我的 TableLayoutPanel 中，我动态添加了十二行（和几列）。当我将 TableLayoutPanel 的 Rows 集合设置为 Autosize 时，将生成第 12 行，但不会显示。我将其更改为百分比，每行获得 8.33%（我实际上将其设置为 8，它自动更改为 8.33）。

所以这对肉眼来说应该是完美的（99.99999999%），但是现在第十二行比其他行有更多的空间，第 16 列也一样，所以 TableLayoutPanel 在底部和右侧有“死区”，标签我在最后一行中的文本框与我在相邻列中的文本框不对齐。

如果有人有兴趣查看实际代码：

```
private void AddControlsToPlatypusTableLayoutPanel()
{
    string lblName;
    string txtbxName;
    int ColNum = 0;
    int RowNum = 0;
    int LoopCounter = 1;
    DateTime dt = new DateTime(DateTime.Now.Year, DateTime.Now.Month, DateTime.Now.Day, 0, 0, 0);

    while (LoopCounter <= 96) {
        // Create the Label
        lblName = string.Format("label{0}", LoopCounter);
        var lbl = new Label() {
            Name = lblName,
            Dock = DockStyle.Fill,
            Margin = new Padding(),
            TextAlign = ContentAlignment.MiddleCenter,
            Text = dt.ToString("HH:mm")
        };
        tableLayoutPanelPlatypus.Controls.Add(lbl, ColNum, RowNum);

        // Create the TextBox
        txtbxName = string.Format("textBox{0}", LoopCounter);
        var txtbx = new TextBox() {
            Name = txtbxName, Dock = DockStyle.Fill, Margin = new Padding()
        };
        tableLayoutPanelPlatypus.Controls.Add(txtbx, ColNum + 1, RowNum);

        dt = dt.AddMinutes(15);
        RowNum++;
        LoopCounter++;
        // Move over if at the bottom
        if (RowNum == 12) { 
            ColNum = ColNum + 2;
            RowNum = 0;
        }
    }
} 
```

## 更新

通过稍微调整大小和位置，我可以让它看起来不错，但现在我要么不得不在它周围放置一个垫子，要么改变表单和所有其他控件的大小，或者其中许多控件，无论如何。所以我仍然认为百分比没有像人们期望的那样计算出来有点不正常。我知道，我知道：WPF。但这不是目前的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-05T18:17:55.727

如果您已将其设置为 8，则 8*12 以 84% 结束，剩余 16% 将容纳在最后一行，同样的情况也适用于最后一列。因此，您需要将其定义为 100/12 = 8.33%。如果您将每一行设为 8.33%，将最后一行设为 8.37%，这将看起来不错。您需要在行或列的两种情况下完成 100%。或者您可以改用固定大小。如果您想要可变大小的表格，请确保您没有定义表格的大小，并且行高和列宽动态定义表格大小。

# php - php包含类而不使用静态函数

> ID：11944256
> 
> 赞同：1
> 
> 时间：2012-08-14T00:41:54.033
> 
> 标签：php, model-view-controller, class, function, static

抱歉，如果这已经得到解答，我是 PHP 中的 OOP 新手。我正在尝试构建一个用于教育和测试目的的 mvc，并增加我对它的了解。我被困在某一点上，无法弄清楚。我确定这是一个简单的解决方案，但我不知道查找它的正确术语/单词是什么。

如果答案已经存在，请告诉我。

这是我正在尝试做的事情：

```
class Load {
  public function __construct(){
  }

  public function model($file_name){
    include($file_name.'.php');
  }
}

class Home_model extends M_F_Model{
  function __construct() {
    parent::__construct();
  }

  public static function test_this_model($var){
    $result = $var.'+2';
    return $result;
  } 
}

class M_F_Controller {
  public $load;

  public function __construct(){
    $this->load = new Load();
  }
}

class Home extends M_F_Controller{
  function __construct(){
    parent::__construct();
    $this->load->model('home_model');       
  }

  function index($var){
    $result = Home_model::test_this_model($var);
    return $result;
  }
} 
```

我想不必为将来可能要包含的每个类在类中声明实例`Home_model::test_this_model();`，并避免使用静态函数 。`$this->home_model->test_this_model();``home_model``Home`

提前致谢，如果您需要任何进一步的信息，请告诉我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T00:47:26.243

这样做是否有问题：

```
$this->home_model = $this->load->model('home_model'); 
```

在 Home 的构造函数内部，然后修改`model`加载器类的函数以返回一个新实例而不是只包含文件？就像是：

```
public function model($file_name) {
    include $file_name . '.php';
    $model = new $file_name();
    return $model;
} 
```

（这假设`$file_name`对应于文件内的类名）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:04:20.883

# jquery - 为什么我的 Themeroller 主题没有呈现任何 CSS？

> ID：11944259
> 
> 赞同：0
> 
> 时间：2012-08-14T00:42:13.580
> 
> 标签：jquery, css, jsf, themes, icefaces

我一直在玩 ICEfaces ACE 组件，我对 Jquery Themeroller 的支持很感兴趣。我按照这里的说明操作：[http](http://wiki.icesoft.org/display/ICE/Creating+a+Custom+ThemeRoller+Theme) ://wiki.icesoft.org/display/ICE/Creating+a+Custom+ThemeRoller+Theme但是当我运行我的应用程序时，没有 CSS 样式。看起来我在“准备”阶段的第 10 步中犯了一个错误，但我已经检查并仔细检查了我的 theme.css 文件以确保它符合 JSF 标准。

我已经上传了我的主题 jar，我希望有人可以看看它，让我知道我哪里出错了。谢谢！

JAR：http: [//jforum.icesoft.org/JForum/posts/list/21138.page](http://jforum.icesoft.org/JForum/posts/list/21138.page)

[交叉发布： http](http://jforum.icesoft.org/JForum/posts/list/21138.page) ://jforum.icesoft.org/JForum/posts/list/21138.page

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T14:35:27.030

前几天我又试了一次，决定省略[wiki 指南](http://wiki.icesoft.org/display/ICE/Creating+a+Custom+ThemeRoller+Theme)上的步骤 9 和 10 ，效果很好。显然，此时 wiki 已过时。

作为参考，工作 ThemeRoller jar 可以在这里下载：http: [//jforum.icesoft.org/JForum/posts/downloadAttach/4152.page](http://jforum.icesoft.org/JForum/posts/downloadAttach/4152.page)

我只修改了文件和目录名称，而不是文件内容。

# mysql - 从 Lion 升级到 Mountain Lion 和 MySql 停止工作

> ID：11944260
> 
> 赞同：3
> 
> 时间：2012-08-14T00:42:19.970
> 
> 标签：mysql, osx-mountain-lion

我最近升级到 Mountain Lion OSX，而​​我已经在工作的 MySql 已经停止工作。当我尝试在终端中运行 MySql 时，我得到的只是以下错误？

> ERROR 2002 (HY000): 无法通过套接字 '/tmp/mysql.sock' 连接到本地 MySQL 服务器 (2)

有没有其他人遇到过同样的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T19:04:19.570

我遇到了同样的问题。该错误是由于 MySQL 未运行引起的。Mac OS X 安装程序删除了 MySQL 的自动启动项。这是我所做的：

*   从 mysql.org 获取安装程序磁盘映像 (dmg)
*   安装 MySQL、自动启动项和控制面板。要将它们安装在启用沙盒（默认安全设置）的系统上，您必须在 Finder 中按住 Control 单击并选择“打开”。
*   如果 mysql 正在运行，请检查控制面板。停下来。
*   在 /usr/local/ 中，您将有两个名为“mysql-5.-osx10.6-x86_64”的文件夹，一个来自旧版本，一个来自新版本。使用命令将数据文件夹从旧文件夹移动到新文件夹`sudo mv oldversion/data newversion/data`。
*   启动 MySQL。您现在应该可以再次使用它了。

如果你使用 PHP 和 PHPMyAdmin，你必须安装`mcrypt`扩展。这是一个分步指南：[http ://remonpel.nl/2012/01/adding-mcrypt-to-your-osx-based-php-server-setup/](http://remonpel.nl/2012/01/adding-mcrypt-to-your-osx-based-php-server-setup/)

# php - 来自 PHP exec() 的 SVN 用户奇数

> ID：11944266
> 
> 赞同：0
> 
> 时间：2012-08-14T00:43:09.440
> 
> 标签：php, apache, svn

我正在运行通过 exec() 调用脚本的 PHP 代码。此脚本运行`svn commit`未指定用户的命令。运行此脚本（通过调用验证）的用户（我们称他为 NICK）`whoami`有一个证书，在该证书下使用选项`~/.subversion`指定。该证书文件附加了一个用户名（通过输出证书的内容可以看到[）](http://bsdsupport.org/2008/12/how-do-i-determine-the-expiration-date-of-a-p12-certificate/)。`~/.subversion/servers``ssl-client-cert-file`

**当通过 NICK 的 crontab 上的 cron 作业调用此脚本时，提交的 SVN 作者与我之前提到的证书中的作者相同。但是当通过 PHP 的 exec() 函数调用相同的脚本时，提交的作者是不同的用户。**我一生都无法弄清楚为什么要使用其他用户。我已经尝试为提交命令提供`--username`选项，并且我也尝试过使用`svn propset svn:author`无济于事。有谁知道为什么会这样？PHP / Apache 是否使用不同的证书？任何有关正在发生的事情或如何改变这种行为的信息将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:57:38.857

Apache 通常配置为以无人身份运行。如果您从浏览器调用脚本。它将按照用户 apache 的配置运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:48:58.093

您是否尝试过在 exec 中使用 sudo 为命令添加前缀？

```
exec('sudo -u nick ./path/to/script'); 
```

# javascript - 只允许一个可放置区域 jquery 拖放

> ID：11944270
> 
> 赞同：1
> 
> 时间：2012-08-14T00:44:17.837
> 
> 标签：javascript, jquery, jquery-ui

我有 jquery 拖放工作，所以我可以将表中的一行移动到另一行。

演示在这里： [http ://www.aussiehaulage.com.au/Default.aspx](http://www.aussiehaulage.com.au/Default.aspx)

我使用 jquery-ui-1.8.22 使我的表可拖动/可放置。

我的 javascript 是：

```
 $(document).ready(function () {

        $(".draggable").draggable({
            helper: function () { return "<div class='ghost'></div>"; },
            start: resizeGhost,
            revert: 'invalid'
        });

        $(".droppable").droppable({
            hoverClass: 'active',

            drop: function (event, ui) {
                var target = $(event.target);
                var draggable = ui.draggable;

                draggable.insertBefore(target);
            },
            tolerance: 'touch'

        });

    }); 
```

但是，当我移动该行时，如果鼠标光标位于可放置表上的 2 行之间，则两个可放置行都会突出显示。我需要这样做，这样它一次只会突出显示 1 个可放置行。

这可能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:15:20.150

在您的可放置元素中添加一个新选项，使用公差拟合或相交

```
 $(".droppable").droppable({
        hoverClass: 'active',
        tolerence: 'intersect',
        drop: function (event, ui) {
            var target = $(event.target);
            var draggable = ui.draggable;

            draggable.insertBefore(target);
        },
        tolerance: 'touch'

    }); 
```

供您参考：[jquery-ui](http://jqueryui.com/demos/droppable/#visual-feedback)

# asp.net - 没有实体框架的 Asp.net Web API

> ID：11944271
> 
> 赞同：5
> 
> 时间：2012-08-14T00:44:18.707
> 
> 标签：asp.net

我们希望开始为我们未来的企业服务使用 Asp.net web api，但是我们不想使用 EF 进行数据访问。

Asp.net Web APi 是否有使用常规 ado.net 类而不是 EF 的示例？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:56:13.070

您是否正在寻找[如何使用的代码示例，例如 SqlConnection、SqlCommand、SqlDataReader？](http://msdn.microsoft.com/en-us/library/dw70f090.aspx)

如果您尝试与 SQL Server 对话，您将使用 System.Data.SqlClient 中的类，如果您尝试与 Oracle 对话，则使用 System.Data.OracleClient 或 System.Data.Odbc 如果您尝试对话mysql。

下面是[一些关于如何从 ADO.NET 调用存储过程的代码示例。](http://msdn.microsoft.com/en-us/library/yy6y35y8%28v=vs.100%29.aspx) 祝你好运！

# spring - 哪个先发生——来自 Spring 的依赖注入，还是执行静态块？

> ID：11944272
> 
> 赞同：5
> 
> 时间：2012-08-14T00:44:35.310
> 
> 标签：spring, static, code-injection

我有一个使用静态块来初始化静态哈希表的类。这是通过读取属性文件、解析文件的内容，然后将适当的值设置到哈希表中来完成的。

但是，我不想指定文件的位置，而是使用 Spring 注入位置，基本上是为了消除类中的任何硬编码值。我确实在其他地方看到实际上可以注入静态变量，但它将涉及使用非静态设置器。

所以我的问题是——setter 的调用会在静态块执行之前发生，还是静态块会在 Spring 调用 setter 之前先执行（这基本上会导致我的代码出现异常）？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T00:45:54.937

在任何代码被授予对类的访问权之前，静态初始化程序由类加载器执行，作为加载类的一部分。由于 Spring 必须实例化该类——这肯定需要加载该类——在它可以在该实例上调用 setter 之前，静态初始化程序块已经运行。

# r - 在 Igraph 中调用顶点

> ID：11944275
> 
> 赞同：1
> 
> 时间：2012-08-14T00:44:59.720
> 
> 标签：r, igraph

这个问题与 Igraph 中顶点的调用有关。

假设我们有一个有向图

> `g<-graph(c(1:10),directed=T)`

我想找到指向顶点2的顶点。

假设您想找到指向“指向”顶点 1 的顶点。

为什么不使用“to”条件工作

> `V(g)[to(1)]`

而是这个？

> `V(g)[nei(1,"to")]`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T11:51:47.527

这个对我有用？

```
> g<-graph(c(1:10),directed=T)
> V(g)[to(1)]
Vertex sequence:
[1] 2
> V(g)[nei(1,"to")]
Vertex sequence:
[1] 2 
```

我个人喜欢使用边缘列表。或者，您可以这样做：

```
# Get edgelist:
E <- get.edgelist(g)

# To 1 in directed graph:
E[E[,2]==1,1]

# Connected to 1 in undirected graph:
c(E[E[,2]==1,1],E[E[,1]==1,2]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T09:19:16.197

`to`仅适用于边缘序列；例如，`E(g)[to(1)]`为您提供指向顶点 1 的所有边。恕我直言，这是非常合乎逻辑的，因为顶点不会“指向”任何地方（边缘会），因此使用`from`or没有意义`to`。

此外，“官方”的使用方式`nei`是`nei(1, "out")`而不是，`nei(1, "to")`尽管它也可能是有效的`"to"`。你也可以使用`outnei(1)`。

*免责声明：*我是 igraph 的作者之一，尽管我没有编写 R 接口，所以可能有比我上面解释的更好的理由。

# javascript - 如何在父元素上使用 :visited？

> ID：11944278
> 
> 赞同：0
> 
> 时间：2012-08-14T00:45:12.563
> 
> 标签：javascript, jquery, animation, css

我基本上有一个内容列表，所有内容都指向外部 url（它在新窗口中打开它们）。截至目前，我将 a:visited 设置为灰色，尽管我真正喜欢的是整个列表项（其中包含他们单击的锚链接）具有降低的不透明度。

你可以在 reddit 上看到这种行为。

比如说你有

```
<div class="item">
  <a href="http://google.com">Click me</a>
</div> 
```

然后你有很多行`.item`

我想要它，以便当您单击链接时，整个 div 可以“看到” :visited 状态，因此`.item`设置为`opacity: .5;`，而不仅仅是文本变灰。

有没有办法用 JS 或 css 做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:00:04.880

这并不完全是解决您的技术问题的方法，但是否有可能改变您的结构以`<a>`完成`<div>`父母的风格需求？

换句话说，杀死`<div>`，然后使用`<a>`. 这样，当它被“访问”时，你可以对它做任何你想做的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T00:48:16.633

`:visited`jQuery 中似乎没有选择器。查看此插件以包含它： [http ://remysharp.com/2008/02/25/visited-plugin/](http://remysharp.com/2008/02/25/visited-plugin/)

使用此插件，您可以使用以下任一方法实现此效果：

```
$("a").visited().each(function() {
    $(this).parent().css("opacity", "0.5");
}); 
```

或这个：

```
$(".item").filter(function() {
    return $(this).find("a").visited().length;
}).css("opacity", "0.5"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:04:58.343

一旦支持[CSS4 选择器](http://dev.w3.org/csswg/selectors4/)（假设当前草案以类似于其当前形式的方式被接受），

```
div.item! > a:visited 
```

将选择具有访问`div`类的父级。`item``a`

在那之前，[cssParentSelector](https://github.com/Idered/cssParentSelector)可能会起作用。

# ruby-on-rails - ActiveRecord::StatementInvalid (PG::Error: ERROR: 列不存在

> ID：11944279
> 
> 赞同：1
> 
> 时间：2012-08-14T00:45:12.797
> 
> 标签：ruby-on-rails, activerecord, heroku, find

在部署到 heroku 时遇到关于使用 find 语句构建的表的问题。它们在使用本地服务器时运行良好，但在 heroku 上却没有，我收到“很抱歉，但出了点问题”错误。我遇到了一些其他线程，这表明它可能是 postgresql 中区分大小写的问题，并不是我对此了解很多，但我尝试确保大写始终保持一致，并且似乎没有什么不同。

Heroku 日志

```
2012-08-14T00:31:30+00:00 app[web.1]: Processing by ApartmentsController#aptMenu as HTML
2012-08-14T00:31:30+00:00 app[web.1]: Completed 500 Internal Server Error in 4ms
2012-08-14T00:31:30+00:00 app[web.1]: 
2012-08-14T00:31:30+00:00 app[web.1]: LINE 1: SELECT "apartments".* FROM "apartments"  WHERE (bed = 0)
2012-08-14T00:31:30+00:00 app[web.1]: ActiveRecord::StatementInvalid (PG::Error: ERROR:  column "bed" does not exist 
```

控制器

```
def aptMenu
  @apartments = Apartment.all
  @studio = Apartment.find(:all, :conditions => ["bed = 0"]) 
```

架构

```
create_table "apartments", :force => true do |t|
t.integer  "bed" 
```

我对这种看到感到很困惑，因为根据我能看到的一切，“床”列确实存在。任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T01:06:28.670

出现此问题的原因是生产数据库上的 Apartment 表缺少列 Bed。您需要在生产端迁移。

`heroku rake db:migrate`

看看新列是否出现。

确保你也重新启动你的heroku。

`heroku restart`

# objective-c - 保存按钮按下和位置

> ID：11944286
> 
> 赞同：0
> 
> 时间：2012-08-14T00:45:58.323
> 
> 标签：objective-c, ios, xcode, gps

我正在制作一个我需要知道的应用程序

1.  用户在应用程序中按下的每个按钮，以及按下的时间，以及
2.  iPhone去了哪里（使用gps），但该地区没有手机信号塔，所以我不能使用每个人都使用的那种重要的位置更改方法。

在我看来，用于数据保存的 Plist 方法不起作用，因为我不希望应用程序从它停止的地方开始，我希望它每次都从头开始。

此外，如果你们中的任何人知道如何让我的应用程序在特定时间唤醒，和/或如何让我无法退出，那将是非常棒的。这是与昆士兰大学圣卢西奥心理系和 Grute Eylandt 原住民一起进行的实验。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:53:02.867

如果您愿意，您可以了解用户在您的应用中所做的一切。例如，您可以将自己的解决方案与`SQLite`数据库一起使用，并每隔一段时间将数据发送到服务器。

GPS 也很简单，您可以使用`Core Location`框架跟踪用户。

你不能让应用在特定时间唤醒，你能做的最好的就是实现推送通知，但由用户通过通知打开应用或通过点击 iPhone 主屏幕上的应用图标自行打开应用。

否则，您可以在退出应用程序之前设置本地通知，这比设置推送通知更快更容易实现。

也没有办法阻止应用程序被关闭，也就是说，在 iOS 6 附带它的辅助功能之前，您可以禁用主页按钮。但是不是现在。

# actionscript-3 - removeChild 给出错误 #2025

> ID：11944288
> 
> 赞同：0
> 
> 时间：2012-08-14T00:46:21.863
> 
> 标签：actionscript-3, actionscript

我的敌人的 healthBar 的 removeChild 函数有问题。当他们被摧毁时，我也会移除他们的血条。但是，我收到错误 #2025: DisplayObject must be child of the caller。奇怪的是它可以工作并且 hpBar 被删除了。我尝试在调用删除子函数时添加断点，但我从未以这种方式收到错误。

```
if(level.enemies[enemyNum].healthBar != null){
    level.levelObjects.removeChild(level.enemies[enemyNum].healthBar);
} 
```

这是删除该 healthBar 的代码，我得到的错误是针对这一行的。

谢谢您的帮助。如果您需要更多代码或有任何问题，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T00:49:37.413

尝试：

```
if(level.levelObjects.contains(level.enemies[enemyNum].healthBar)){
    level.levelObjects.removeChild(level.enemies[enemyNum].healthBar);
} 
```

# drupal - Drupal 7 二级菜单不显示其他语言

> ID：11944292
> 
> 赞同：0
> 
> 时间：2012-08-14T00:47:08.703
> 
> 标签：drupal, internationalization, drupal-7

我有一个带有 2 级菜单的多语言 Drupal 7 站点，我通过为“主要链接”和“次要链接”选择相同的菜单来设置它。

但是，对于网站上的每种语言，我都有不同的主菜单。使用多语言变量，我将主要和次要链接都设置为翻译变量，并且对于每种语言，我都将其设置为该语言的菜单。

这适用于默认语言，但对于所有其他语言，仅显示顶级菜单项。

使多个 2 级菜单起作用的任何提示？

谢谢，

詹姆士

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T07:51:22.947

你是什​​么意思

> 通过为“主要链接”和“辅助链接”选择相同的菜单

通过两级菜单，您的意思是这个地位：

*   第 1 项
    *   项目 1.1
    *   项目 1.2
*   第 2 项
    *   第 2.1 项

?

如果是这种情况，那么您应该使用一个菜单。

# python - 压缩串行 for 循环

> ID：11944293
> 
> 赞同：1
> 
> 时间：2012-08-14T00:47:17.167
> 
> 标签：python, for-loop

几个小时以来一直在敲我的头，这是我能得到的最干净的地方，但它似乎可以变得更干净。

```
center1_x = np.mean([q[0] for q in coordinates if q[-1]==0])
center2_x = np.mean([q[0] for q in coordinates if q[-1]==1])
center3_x = np.mean([q[0] for q in coordinates if q[-1]==2])
centers_x=[center1_x,center2_x,center3_x] 
```

坐标是子列表的列表，其中每个子列表包含 [0] 处的 X 坐标、[1] 处的 y 坐标和 [-1] 处的 bin 编号，即：

```
[[338.766845703125, 285.3931884765625, 0], [198.39230346679688, 184.1259307861328, 1], [356.7226867675781, 281.6376953125, 0], [200.93394470214844, 194.82655334472656, 1], [228.03591918945312, 297.79864501953125, 2], [226.06724548339844, 295.5475769042969, 2], [246.51475524902344, 280.373779296875, 2], [201.25830078125, 184.09994506835938, 1]] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:52:23.270

尝试

```
centers_x = [np.mean([q[0] for q in coordinates if q[-1]==n]) for n in range(3)] 
```

# ipad - html5/css3, Asp.net MVC3 - 在移动 safari 的 html 页面中查看 pdf

> ID：11944307
> 
> 赞同：0
> 
> 时间：2012-08-14T00:49:01.453
> 
> 标签：ipad, html, css, safari

我即将推出的移动网络项目需要查看网页内动态选择的 pdf 文件。我正在使用 iFrame 显示 pdf 文件，并且可以使用两指滚动来滚动文件。但我面临的问题是：

1.  文件的第一页没有完全显示在 iPad 上，并且沿宽度被截断，这与我在桌面浏览器上查看时不同，其中 pdf 的第一页始终完全显示，尽管缩小以适合 iFrame 区域。

2.  对用户来说，没有可以滚动pdf文档的视觉指示，即pdf文档上没有滚动条。

3.  pdf 查看器 (Adobe reader) 的控件（页面导航、缩放等）不会出现在文档上，这与我在桌面浏览器上看到的不同。

实现我想要做的最好的方法是什么？你们中的任何一位专家都知道我面临的问题的任何解决方案/解决方法吗？也可以考虑使用除 iFrame 之外的任何东西的完全不同的方法。

pdf应该在html页面内的原因是，pdf文件列表将在页面左侧的菜单栏上，用户可以单击其中任何一个在同一页面上查看。理想情况下，他们将能够在全屏视图和该视图之间切换。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T23:22:57.373

我遇到了这种[将 PDF 嵌入 HTML 的推荐方式？](https://stackoverflow.com/questions/291813/best-way-to-embed-pdf-in-html)同时在网上搜索以找到答案。

提到的链接讨论了一些我可以使用的选项，谷歌文档查看器对我有用，但不知道在网站上使用它之前是否需要注意什么（比如数据限制）。我也不知道这是否是一个好的解决方案（虽然全屏模式不可用，但放大/缩小和下一页/上一页按钮显示在 iPad 上的移动 safari 中）使用用于将在 iPad 上运行的 Web 应用程序。

无论如何，我会继续寻找更好的解决方案，如果我没有找到任何解决方案，我会坚持使用谷歌文档查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-11T18:42:55.097

我遇到了同样的问题，即 pdf 没有完全显示。我发现解决此问题的唯一方法是更改​​包含 pdf 的 div 的大小。

例如，如果包含 pdf 的元素是一个 div，那么我将其宽度更改为任何值并回滚到它之前的值。更改宽度或高度任何一个都可以。

有时我不得不在调用我的可调整大小的方法之前使用 setTimeout 稍等片刻

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-18T14:45:27.703

我创建了一个小型 JavaScript 模块，它可以帮助您显示 PDF 内联并能够滚动它。但我也想不出一种方法让它适合父容器的总宽度。

看看：[https ://github.com/williamrjribeiro/ipdf-scroll](https://github.com/williamrjribeiro/ipdf-scroll)

干杯。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-27T12:05:35.130

该问题似乎是 iPad 上 Safari 的错误。

我没有找到在 html 中嵌入 pdf 的解决方案，但我确实找到了这个：

如果您从控制器操作而不是视图返回 FileStreamResult，则 pdf 将在新选项卡中打开，它不是嵌入的 html，但至少您的用户不必下载文件并手动打开它们。

# c++ - 失败函数的 C++ while 语句？

> ID：11944308
> 
> 赞同：0
> 
> 时间：2012-08-14T00:49:05.770
> 
> 标签：c++, if-statement, syntax

作为一个业余程序员，这让我很困惑。我可能只是错过了一些东西。在我见过这样的 C++ 代码中：

```
while (cin.get(c)) {...} 
```

几乎就像是一个 try 语句。如果语句成功，就像函数返回true，如果不成功，就像它返回false。我见过很多这样的事情，有时是用其他语言。它是如何工作的？我只是错过了一些东西（比如如果它不起作用，则返回 false 的函数。）？如果不是，这是否适用于所有语言？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T01:00:48.157

C++ 参考会注意到该`get(char_type &)`方法的返回值是`*this`类型`basic_istream &`( [1](http://en.cppreference.com/w/cpp/io/basic_istream/get) )。`basic_istream`继承自which`basic_ios`有一个转换运算符，如果 I/O 失败，则基本上返回 false，否则返回 true ( [2](http://en.cppreference.com/w/cpp/io/basic_ios/operator_bool) )。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:02:34.723

看看这里：[http](http://www.cplusplus.com/reference/iostream/istream/get/) ://www.cplusplus.com/reference/iostream/istream/get/ 您使用的版本是第二个（`istream& get ( char& c );`）。在 C++ 中，正如 pst 所说，任何不同于 0 或 NULL 的值都将为真，否则将为假。在您的情况下，每次调用 cin.get 都会返回 *this，这将是真的，因此，您将获得一个无限循环，直到出现一些“问题”，例如读取 EOF“字符”（^C => Ctrl+C）在 Windows 中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:41:45.937

一个`if`语句评估一个表达式是否为真......一个真正的表达式可以直接评估为具有 value 的布尔值`true`，或者可以隐式转换为的某个值`true`（例如，如果非 0，则数字/指针值是 true）。

函数可以返回`true`or `false`，或者将一些具有转换运算符的对象返回为布尔或数字类型。

在这种情况下，`cin.get(c)`返回对`cin`对象的引用，该引用可以隐式转换为布尔值（来自`void*`- 请参阅[http://www.cplusplus.com/reference/iostream/ios/operator_voidpt/](http://www.cplusplus.com/reference/iostream/ios/operator_voidpt/)）以检查输入是否成功操作。

这不适用于所有函数或所有语言 - 它仅适用于那些碰巧返回布尔值或数值的函数，以这种方式进行测试是有意义的。例如：

```
if (std::cin >> a >> b)    // true if both inputted successfully...

if (my_vector.capacity())   // useless? - capacity may be >0 "true" irrespective of size()

if (my_vector.empty())      // makes sense - returns a boolean

if (my_vector.size())       // makes sense - returns a number, non-0 is "true"
                            // dubious style as a change from vector to list would require
                            // a change to !empty() to maintain O(1) performance in C++03 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-28T19:15:40.927

IOStreams 库是故意这样设计的。这些操作返回对您正在操作的流的引用，并且流可以`bool`根据其状态转换为具有值的值。

我明白为什么它可能是一个意想不到的习语，但它确实产生了一些富有表现力的代码。

# json - 使用 Firebug 在 mvc 页面中看不到 js

> ID：11944309
> 
> 赞同：0
> 
> 时间：2012-08-14T00:49:15.677
> 
> 标签：json, asp.net-mvc-3, jquery, html-select

我有一个单独的 js 文件，我在其中放置了我的 js。我什至无法进入 js 来调试它以查看问题所在。

**此页面之前的 Firebug 具有我可以看到的内联 js（来自我的母版页 (_Layout.cshtml)。**

一旦我进入这个页面，我就会从 Firebug 那里得到这个：

> 此页面上没有 Javascript 如果标签有“类型”属性，它应该等于“文本/javascript”或“应用程序/javascript”。脚本也必须是可解析的（语法正确）。

我不知道我缺少什么来简单地填写这个下拉列表.....

这是我的新 js 文件，内容如下：

```
$(document).ready(function () {
    GetCategories();
});

function GetCategories() {
    $.ajax({
        type: "POST",
        url: "Index/Category",
        data: '{}',
        contentType: "application/json; charset=utf-8",
        dataType: "json",
        success: function (data) {
            var listItems = "";
            for (var i = 0; i < data.length; i++) {
                listItems += "<option value='" + data.CategoryID + "'>" + data.Description + "</option>";
            }
            $("#Categories").html(listItems);
        }
    });
} 
```

这是html页面的内容。请注意，我的 html 在我的母版页中。所以，我只需要一个简单的脚本在这里......

```
<div title="JSON callback for dropdownlist">
    <table>
        <tr>
            <td>
                <select id="Categories">
                </select>
            </td>
        </tr>
    </table>
</div>
<script type="text/javascript" src="../../Scripts/JSON_DDL.js"></script> 
```

这是我的结果：

> [{"CategoryID":1,"Description":"ECommerce","Projects":[]},{"CategoryID":2,"Description":"Medical","Projects":[]}]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T00:54:53.833

过去我在使用 Firebug 时遇到过类似的问题。

一种做法是 Firebug 崩溃并且无法正确读取，关闭并重新打开浏览器。它不像以前那样常见，但确实会发生。

第二个问题花了我很长时间才找到它发生在我身上的时间......它让我发疯了几个小时 - 但解决方案非常简单 - 有时如果你的 JavaScript 语法不好（例如缺少一个右花括号) 它不会被读取，浏览器甚至不会显示错误。仔细检查您的代码。

# google-apps-script - 嵌入小工具的 Page.setHtmlContent 错误

> ID：11944310
> 
> 赞同：1
> 
> 时间：2012-08-14T00:49:23.320
> 
> 标签：google-apps-script, google-sites

为了解决谷歌网站*中奇怪的“观众不能发表评论”问题的解决方法，我编写了以下愚蠢的测试脚本：

```
function addComment(e) {
    var currentPage = SitesApp.getActivePage();
    var pageHTML = currentPage.getHtmlContent();
    var newHTML = pageHTML.replace("BEGIN", "BEGIN "+Session.getActiveUser().getEmail());
    currentPage.setHtmlContent(newHTML);
}; 
```

当用户按下按钮时，当前页面内容*应*更改为在单词 BEGIN 之后包含当前用户的电子邮件地址（我手动插入 - 如果这可行，我可以粘贴评论标签 thingamabob。

这或多或少有效。问题是 setHtmlContent 调用首先对包含按钮的应用程序脚本小工具做了各种奇怪的事情。这是之前的小工具：

```
<img src="https://www.google.com/chart?chc=sites&amp;cht=d&amp;chdp=sites&amp;chl=%5B%5BGoogle+Apps+Script'%3D20'f%5Cv'a%5C%3D0'10'%3D499'0'dim'%5Cbox1'b%5CF6F6F6'fC%5CF6F6F6'eC%5C0'sk'%5C%5B%22Apps+Script+Gadget%22'%5D'a%5CV%5C%3D12'f%5C%5DV%5Cta%5C%3D10'%3D0'%3D500'%3D197'dim'%5C%3D10'%3D10'%3D500'%3D197'vdim'%5Cbox1'b%5Cva%5CF6F6F6'fC%5CC8C8C8'eC%5C'a%5C%5Do%5CLauto'f%5C&amp;sig=TbGPi2pnqyuhJ_BfSq_CO5U6FOI" data-origsrc="https://sites.google.com/a/macros/kstf.org/s/AKfycbzEsLBQucXCZZJwEh9c3RYhn81uJucvz3R5vHeJ2w/exec" data-type="maestro" data-props="align:left;borderTitle:Apps Script Gadget;height:200;showBorder:false;showBorderTitle:false;" width="500" height="200" style="display:block;text-align:left;margin-right:auto;"></div> 
```

这是之后：

```
<img src="https://www.google.com/chart?chc=sites&amp;cht=d&amp;chdp=sites&amp;chl=%5B%5BGoogle+Gadget'%3D20'f%5Cv'a%5C%3D0'10'%3D499'0'dim'%5Cbox1'b%5CF6F6F6'fC%5CF6F6F6'eC%5C0'sk'%5C%5B%22Include+gadget+(iframe)%22'%5D'a%5CV%5C%3D12'f%5C%5DV%5Cta%5C%3D10'%3D0'%3D500'%3D197'dim'%5C%3D10'%3D10'%3D500'%3D197'vdim'%5Cbox1'b%5Cva%5CF6F6F6'fC%5CC8C8C8'eC%5C'a%5C%5Do%5CLauto'f%5C&amp;sig=CvjXRgodwYVKPvmsyZR7EbHx2uM" data-igsrc="http://0.gmodules.com/ig/ifr?mid=0&amp;synd=trogedit&amp;url=http%3A%2F%2Fwww.gstatic.com%2Fsites-gadgets%2Fiframe%2Fiframe.xml&amp;up_iframeURL=%2Fa%2Fmacros%2Fkstf.org%2Fs%2FAKfycbzEsLBQucXCZZJwEh9c3RYhn81uJucvz3R5vHeJ2w%2Fexec%3Fmid%3DACjPJvFOqF88RUUrqDeapp1PHF_lI3Xc3g5Hd3euTifzUYeaILmTTlMfBQ13yI_6%26bc%3Dtransparent%26f%3DArial%2C%2BVerdana%2C%2Bsans-serif%26tc%3D%2523444444%26lc%3D%25230033cc&amp;up_scroll=no&amp;w=100%&amp;h=200" data-type="ggs-gadget" data-props="height:200;igsrc:http#58//0.gmodules.com/ig/ifr?mid=0&amp;synd=trogedit&amp;url=http%3A%2F%2Fwww.gstatic.com%2Fsites-gadgets%2Fiframe%2Fiframe.xml&amp;up_iframeURL=%2Fa%2Fmacros%2Fkstf.org%2Fs%2FAKfycbzEsLBQucXCZZJwEh9c3RYhn81uJucvz3R5vHeJ2w%2Fexec%3Fmid%3DACjPJvFOqF88RUUrqDeapp1PHF_lI3Xc3g5Hd3euTifzUYeaILmTTlMfBQ13yI_6%26bc%3Dtransparent%26f%3DArial%2C%2BVerdana%2C%2Bsans-serif%26tc%3D%2523444444%26lc%3D%25230033cc&amp;up_scroll=no&amp;w=100%&amp;h=200;mid:0;spec:http#58//www.gstatic.com/sites-gadgets/iframe/iframe.xml;up_iframeURL:/a/macros/kstf.org/s/AKfycbzEsLBQucXCZZJwEh9c3RYhn81uJucvz3R5vHeJ2w/exec?mid=ACjPJvFOqF88RUUrqDeapp1PHF_lI3Xc3g5Hd3euTifzUYeaILmTTlMfBQ13yI_6&amp;bc=transparent&amp;f=Arial,+Verdana,+sans-serif&amp;tc=%23444444&amp;lc=%230033cc;up_scroll:no;width:100%;" width="500" height="200" style="display:block;text-align:left;margin-right:auto;" class="igm"></div> 
```

据我所知，“嘿，请将此设置为您的 HTML”方法似乎在做一些诡计以确保正确解析文档，但它陷入了 iframe 重定向的追尾效应。如果我可以提交一些 DOM 或类似的东西，这将不是问题。

有什么建议吗？这只是一种练习，看看我是否可以巧妙地使用访客评论系统，所以我可能会采取另一种方法。

*：我知道处理访问者评论的其他几种方法，但是对于应用程序域中的许多站点作者，该系统需要能够在许多站点页面上工作，而无需站点作者进行复杂的设置。最终，我将使用其他东西（可能是我今天早上发现的两个应用引擎论坛系统之一的变体），但这是对临时解决方案的快速尝试。下一个临时步骤是将这些数据保存到站点数据库并在小工具本身中布置评论。但是，小工具的大小并不令人满意 - 我宁愿将评论放在页面中，而不是放在具有自己滚动条的单独 iframe 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:21:41.063

首先，getEmail() 方法不适用于消费者帐户或您域外的人访问该站点时（除非您的脚本在用户访问应用程序时运行）

接下来，当您更改页面的 HTML 时，它不会立即进行更改，而是应该在下一次刷新时进行。

话虽如此，您可以做的是让您的脚本也显示评论。您可以在脚本中使用标签来显示以前的评论。

# objective-c - 使用两个“字母”的不同长度的序列组合

> ID：11944311
> 
> 赞同：1
> 
> 时间：2012-08-14T00:49:24.833
> 
> 标签：objective-c, algorithm, permutation, combinations, bioinformatics

我正在尝试在给定某个字母表的情况下生成长度为 k 的序列的所有可能组合（这是为生物信息学项目生成查询序列）。

序列的形式为：

第一个字符和最后一个字符可以是 ACGU 中的任何一个（称为这些 Y），中间有 k - 2 个字符，可以是 ACGU 或 ? （称这些为 X）。

例如，如果 k = 3，则模式为 YXY 形式，如果 k = 5，则为 YXXXY。

如果 k 已知，则生成所有可能的序列很容易，因为您可以只使用 k 嵌套的 for 循环。但是如果 k 事先不知道，那么这个实现就不合适了。

可能序列的总数可以用 4^2 * 5^(k-2) 表示。如果 k = 3，这只给出了 80 种组合，但将其扩展到 k = 9，你就有 1,250,000！

任何提示、想法或建议将不胜感激。

我需要使用生成的每个序列，因此它们需要存储在一个数组中，或者在创建/生成时传递给另一个函数，尽管我不想存储所有这些序列，但这并不重要。

非常感谢。

注意我是用objective-c写的，但是任何c风格的代码、伪代码或算法的简单英文描述都会有帮助。

更新：

这是我根据 Analog File 的精彩回答编写的 objc 代码。目前它只将每行一个序列输出到标准输出，但我将对其进行修改以生成一个字符串数组。

非常感谢所有做出贡献的人。

```
 NSArray *yAlphabet = [NSArray arrayWithObjects:@"A", @"C", @"G", @"U", nil];
    NSArray *xAlphabet = [NSArray arrayWithObjects:@"A", @"C", @"G", @"U", @"?", nil];
    int i, v;
    int count = 0;
    int numberOfCases = 16 * pow(5 , (k - 2));
    for (int n = 0; n < (numberOfCases); n++) {
        i = n;
        v = i % 4;
        i = i / 4;
        count++;
        printf("\n%s", [[yAlphabet objectAtIndex:v] cStringUsingEncoding:NSUTF8StringEncoding]);
        for (int m = 1; m < (k - 1); m++) {
            v = i % 5;
            i = i / 5;
            printf("%s", [[xAlphabet objectAtIndex:v] cStringUsingEncoding:NSUTF8StringEncoding]);
        }
        printf("%s", [[yAlphabet objectAtIndex:i] cStringUsingEncoding:NSUTF8StringEncoding]);
    }
    printf("\n");
    NSLog(@"No. Sequences: %i", count); 
```

更新 2：

这是代码，将生成的序列输出到字符串数组。请注意，k 是所需序列的长度，在别处作为参数给出。我已经测试到 k=9（1,250,000 个序列）。另请注意，我的代码使用 ARC，因此没有显示内存释放。

```
 NSArray *yAlphabet = [NSArray arrayWithObjects:@"A", @"C", @"G", @"U", nil];
    NSArray *xAlphabet = [NSArray arrayWithObjects:@"A", @"C", @"G", @"U", @"?", nil];
    NSMutableArray *sequences = [[NSMutableArray alloc] init];
    int i, v;
    int count = 0;
    int numberOfCases = 16 * pow(5 , (k - 2));
    for (int n = 0; n < (numberOfCases); n++) {
        i = n;
        v = i % 4;
        i = i / 4;
        count++;
        NSMutableString *seq = [[NSMutableString alloc] initWithString:[yAlphabet objectAtIndex:v]];
        for (int m = 1; m < (k - 1); m++) {
            v = i % 5;
            i = i / 5;
            [seq appendString:[xAlphabet objectAtIndex:v]];
        }
        [seq appendString:[yAlphabet objectAtIndex:i]];
        [sequences addObject:seq];
    }
    NSLog(@"No. Sequences looped: %i", count);

    //print the array to confirm
    int count1 = 0;
    for (NSMutableString *str in sequences) {
        fprintf(stderr, "%s\n", [str cStringUsingEncoding:NSUTF8StringEncoding]);
        count1++;
    }
    NSLog(@"No. Sequences printed: %i", count1);
    NSLog(@"Counts match? : %@", (count == count1 ? @"YES" : @"NO")); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:12:32.960

你知道你会得到多少案例。这是伪代码（k是序列长度）

```
 for n = 0 to num_of_cases - 1

    i = n

    v = i % length_of_alphabeth_Y
    i = i / length_of_alphabeth_Y
    output vth char in alphabeth Y

    for m = 1 to k-1
       v = i % length_of_alphabeth_X
       i = i / length_of_alphabeth_X
       output vth char in alphabeth X

    output ith char in alphabeth Y
    output end of sequence 
```

外部循环的每次迭代都会生成一个案例。我写了`output`但是很容易将数据“存储”在动态分配的结构中（roes中的n个索引，第一种情况是第0列，然后是列中的m个索引，最后一种情况是列k-1\. 如果您这样做，则不需要输出“序列结束”，因为它包含在 n) 的增量中。

请注意我们如何有效地“计算”base length_of_alphabeth，除了我们根据数字使用不同的基础。模数为您提供最低有效位，整数除法摆脱它并将下一位移动到最低有效位置。

如果您可以将 n 想象为一个*value*，没有特定的基础，那么逻辑就相当简单。一旦你理解了它，你可能可以自己从头开始编写它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:19:53.357

执行此操作的基本形式如下所示（Java-ish psuedocode）

```
char[] output = new char[k];
pubilc void go(cur_k){
   if(cur_k>k) // do something - copy the array and store it, etc.
   for( char letter : alphabet ){
       output[cur_k]=char_letter;
       go(cur_k+1);
   }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:28:09.957

听起来 k 将作为参数传入，所以这样的东西（在 Python-ish 伪代码中）应该可以工作

```
Y_alphabet = ['A','C','G','U']
X_alphabet = ['A','C','G','U','?']

outputs = []

for i in range(k):
    if i == 0 or i == k-1:
        current_alphabet = Y_alphabet
    else:
        current_alphabet = X_alphabet

    last_outputs = outputs
    outputs = []

    for next_character in current_alphabet:
        # This just replaces outputs with a new list that consists
        # of all the possible sequences of length i appended with
        # the current character
        outputs += [seq + next_character for seq in last_outputs] 
```

# c - ctrl-d 没有停止 while(getchar()!=EOF) 循环

> ID：11944314
> 
> 赞同：9
> 
> 时间：2012-08-14T00:49:43.927
> 
> 标签：c, unix, eof

这是我的代码。我用终端在 ubuntu 中运行它。当我在终端中键入 (a `Ctrl``D`) 时，程序并没有停止，而是继续等待我的输入。

不`Ctrl``D`等于unix中的EOF吗？

谢谢你。

```
#include<stdio.h>

main() {
    int d;
    while(d=getchar()!=EOF) {
        printf("\"getchar()!=EOF\" result is %d\n", d);
        printf("EOF:%d\n", EOF);
    }
        printf("\"getchar()!=EOF\" result is %d\n", d);
} 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-14T01:20:46.267

EOF 不是字符。`EOF`是一个宏，当`getchar()`它到达输入末尾或遇到某种错误时返回。这`^D`不是“EOF 字符”。当您在一行上单独点击 ^D 时，在 linux 下发生的事情是它关闭了流，并且`getchar()`调用到达输入的末尾并返回`EOF`宏。如果您`^D`在一行中间的某处键入，则流不会关闭，因此`getchar()`返回它读取的值并且您的循环不会退出。

有关更好的描述，请参阅 C 常见问题的[**stdio**部分。](http://www.c-faq.com/stdio/index.html)

此外：

> 在现代系统上，它不反映存储在文件中的任何实际文件结尾字符；这是一个没有更多字符可用的信号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T01:27:19.213

除了 Jon Lin 关于 EOF 的回答之外，我不确定您编写的代码是否符合您的意图。如果要查看变量中返回的值`getchar`，则`d`需要将`while`语句更改为：

```
 while((d=getchar())!=EOF) { 
```

这是因为不等式运算符的优先级高于赋值。因此，在您的代码中，`d`将始终是`0`or `1`。

# .net - .NET 4.0 内部实现排序

> ID：11944324
> 
> 赞同：5
> 
> 时间：2012-08-14T00:51:46.440
> 
> 标签：.net, algorithm

我发现在 Array.Sort 里面，

```
[ReliabilityContract(Consistency.MayCorruptInstance, Cer.MayFail), SecurityCritical]
[MethodImpl(MethodImplOptions.InternalCall)]
private static extern bool TrySZSort(Array keys, Array items, int left, int right); 
```

被调用。任何想法如何实现？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T01:34:49.153

[您可以从SSCLI20 源代码分发](http://www.microsoft.com/en-us/download/details.aspx?id=4917)中获得相当可靠的 CLR 源代码副本。它于 2005 年出版，当时是 CLR 第 2 版的相当准确的副本。从未发现明显的差异。

从那以后，已经是 7 年前了，此后又进行了一次相当重要的 CLR 版本更新。但是 TrySZSort() 仍然存在，那些低级实现是高度自我保护的。您会发现它在 clr/src/vm/ecall.cpp 中声明并映射到 ArrayHelper::TrySZSort()，这是在 clr/src/vm/arrayhelpers.cpp 中声明的 C++ 方法

否则*很*无聊，它只是调用了一个名为 的模板类方法`ArrayHelpers<T>.QuickSort()`，该方法由数组元素类型专门用于值类型元素。

这正是托尼·霍尔在 52 年前写下它的方式。尽管不是在 C++ 中；)

[您会在此答案](https://stackoverflow.com/questions/11439976/why-is-listt-sort-using-comparerint-default-more-than-twice-as-fast-as-an-eq/11440888#11440888)中找到此代码是用 C++ 而不是 C# 编写的原因。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T01:12:47.467

> 任何想法如何实现？

该方法在 CLR 本身内部的本机代码中实现。在非常核心的低级类型上有很多这样的方法。例如，相当多的方法`System.String`被标记为[InternalCall](http://msdn.microsoft.com/en-us/library/system.runtime.compilerservices.methodimploptions.aspx)并在公共语言运行时本身中实现。

# ruby - 从字符串生成嵌套哈希并在 ruby 中进行深度合并

> ID：11944330
> 
> 赞同：3
> 
> 时间：2012-08-14T00:52:09.893
> 
> 标签：ruby, hash, merge

我在数据库中有一个 JSON 格式的哈希。例如

```
{
  "one" => {
    "two" => {
      "three" => {}
    }
  } 
} 
```

我需要从字符串中生成它。上面的示例将从字符串“one.two.three”生成。

首先，我将如何做到这一点？

问题的第二部分。我将收到多个字符串——每一个都建立在最后一个之上。因此，如果我得到“one.two.three”，然后是“one.two.four”，我会变成这样：

```
{
  "one" => {
    "two" => {
      "three" => {},
      "four" => {}
    }
  } 
} 
```

如果我两次得到“one.two.three”，我希望最新的“three”值覆盖那里的值。字符串也可以是任意长度（例如“one.two.three.four.five”或只是“one”）。希望这是有道理的？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T01:14:00.320

要生成嵌套哈希：

```
hash = {}

"one.two.three".split('.').reduce(hash) { |h,m| h[m] = {} }

puts hash #=> {"one"=>{"two"=>{"three"=>{}}}} 
```

如果您没有安装 rails，请安装 activesupport gem：

```
gem install activesupport 
```

然后将其包含到您的文件中：

```
require 'active_support/core_ext/hash/deep_merge'

hash = {
  "one" => {
    "two" => {
      "three" => {}
    }
  } 
}.deep_merge(another_hash) 
```

对内部的访问将是：

```
hash['one']['two']['three'] #=> {} 
```

# c++ - 谁让狗出去的？- 当“Is-A”在类层次结构中遇到“Has-A”时对象销毁

> ID：11944333
> 
> 赞同：4
> 
> 时间：2012-08-14T00:52:33.987
> 
> 标签：c++

考虑一下：

```
class FluffyThing
{
public:
  FluffyThing()
  {
    m_pMyFur = new Fur;
  }
  virtual ~FluffyThing();

protected:
  Fur * m_pMyFur;
};

class ClawedFluffyThing : public FluffyThing
{
public:
  ClawedFluffyThing()
    : FluffyThing()
  {
    m_pMyClaws = new Claws;
  }
  virtual ~ClawedFluffyThing();

protected:
  Claws * m_pMyClaws;
};

class ScaryFluffyThing : public ClawedFluffyThing
{
public:
  ScaryFluffyThing()
    : ClawedFluffyThing()
  {
    m_pMyTeeth = new Teeth;
    m_pMyCollar = new SpikedCollar;
  }
  virtual ~ScaryFluffyThing();

protected:
  Teeth * m_pMyTeeth;
  SpikedCollar * m_pMyCollar;
}; 
```

希望没有太多错误 - 我想你明白了。要点是它们之间存在 3 个具有 IS-A 关系的类，并且每个类还具有一两个在销毁时间方面需要清理的属性。如果我没有声明虚拟析构函数，编译器会自动为我生成以下内容吗？声明了析构函数，因此被迫实现它们（假设使用了类）是遵循正确的长期方法来进行破坏吗？

```
FluffyThing::~FluffyThing()
{
  delete m_pMyFur;
}

ClawedFluffyThing::~ClawedFluffyThing()
{
  delete m_pMyClaws;
  FluffyThing::~FluffyThing();
}

ScaryFluffyThing::~ScaryFluffyThing()
{
   delete m_pMyTeeth;
   delete m_pMyCollar;
   ClawedFluffyThing::~ClawedFluffyThing();
} 
```

肯定已经有一个明确的答案......但我无法足够快地找到我喜欢的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T00:54:24.767

不。您不会手动调用基类的析构函数，它们会以继承的相反顺序自动调用。除此之外，还好。

```
FluffyThing::~FluffyThing()
{
  delete m_pMyFur;
}

ClawedFluffyThing::~ClawedFluffyThing()
{
  delete m_pMyClaws;
} //will call ~FluffyThing

ScaryFluffyThing::~ScaryFluffyThing()
{
   delete m_pMyTeeth;
   delete m_pMyCollar;
}  //will call ~ClawedFluffyThing 
```

当然，`delete`如果您使用 RAII（智能指针而不是原始指针），您甚至不需要 s。

> 如果我没有声明虚拟析构函数，编译器会自动为我生成以下内容吗？

不。:)`virtual`在您通过基类指针删除派生类实例的情况下，析构函数用于正确的行为。以下：

```
FluffyThing* p = new ScaryFluffyThing;
delete p; 
```

仅当`FluffyThing`' 的析构函数是虚拟的时才合法。否则，这是未定义的行为。

# c++ - Windows 是否进入睡眠模式或使用 C++ 休眠？

> ID：11944335
> 
> 赞同：1
> 
> 时间：2012-08-14T00:52:58.200
> 
> 标签：c++, windows, winapi, power-management

> **可能重复：**
> [如何检测 Windows 是要休眠还是挂起？](https://stackoverflow.com/questions/6012219/how-to-detect-if-windows-is-going-to-hibernate-or-suspend)

有人可以刷新我的记忆吗，从在 Windows 上运行的程序的角度来看，无法知道系统是进入睡眠模式还是休眠，对吗？（我需要知道系统进入的模式，或者刚刚恢复的模式。）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T03:31:09.013

根据我收集到的信息，用户模式代码无法区分挂起和休眠。有一个名为 SYSTEM_POWER_STATE 的内核模式枚举，其中包含您正在寻找的状态，但您无法在用户模式下获得该状态。

您可以做的最好的事情是设置回调来捕获[WM_POWERBROADCAST](http://msdn.microsoft.com/en-us/library/aa373247%28VS.85%29.aspx)消息。PBT_APMQUERYSUSPEND 消息在挂起或休眠即将发生时发送。之后，如果没有取消暂停，您将收到 PBT_APMSUSPEND。恢复时，将发送 PBT_APMRESUMEAUTOMATIC 消息。

# python - python mysql escape \n（简单语法错误）

> ID：11944336
> 
> 赞同：-1
> 
> 时间：2012-08-14T00:53:01.380
> 
> 标签：python, mysql, syntax-error

我想使用这个 python 命令将 mysql 数据库导出到 .csv 文件中。

```
cursor.execute("""SELECT * INTO OUTFILE 'NullServids.csv' FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY '\\n' FROM accounts WHERE srvid is NULL""") 
```

但它返回以下语法错误。

```
_mysql_exceptions.ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '\\n' FROM accounts WHERE srvid is NULL' at line 1") 
```

所以我尝试不转义换行符，当我将它复制并粘贴到 MySQL 时，这显然有效。

```
cursor.execute("""SELECT * INTO OUTFILE 'NullServids.csv' FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\' LINES TERMINATED BY '\n' FROM accounts WHERE srvid is NULL""") 
```

但我得到了这个错误：

```
_mysql_exceptions.ProgrammingError: (1064, "You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near '' FROM accounts WHERE srvid is NULL' at line 2") 
```

所以我的问题是，转义换行符以便在`cursor.execute()`调用中正确解释的正确方法是什么？我用谷歌搜索了这个，找不到答案，这让我很尴尬。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:34:28.233

您忘记了字符串中的反斜杠转义，因此 \ 没有任何意义。如果您尝试打印您正在使用的字符串，您会看到带有反斜杠的地方是空的

试试这个：

```
"""SELECT * INTO OUTFILE 'NullServids.csv' FIELDS TERMINATED BY ',' OPTIONALLY ENCLOSED BY '"' ESCAPED BY '\\\\' LINES TERMINATED BY '\\n' FROM accounts WHERE srvid is NULL""" 
```

# c++ - c++ 清理堆

> ID：11944338
> 
> 赞同：-1
> 
> 时间：2012-08-14T00:53:13.627
> 
> 标签：c++, heap-memory

我在堆中遇到了严重的问题，因为在以前的程序中，我没有删除指针变量。我现在如何清理内存空间/堆以运行当前程序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:02:40.483

Kill the offending processes, then the OS will clean up their memory for you.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T00:58:17.597

对于您使用 new/malloc 或其他此类函数在堆上进行的每次分配，您必须删除/释放您在完成后使用的资源。

C++ 提供了一些简单的方法来做到这一点，构造函数分配资源，析构函数释放资源。

然后有很多巧妙的方法可以使用 std::auto_ptr 甚至其他智能指针来帮助您管理它。

基本上你分配了它 - 所以释放它是你的工作。

# ruby-on-rails - 在 Ruby Rails 中完全阻止浏览器

> ID：11944343
> 
> 赞同：3
> 
> 时间：2012-08-14T00:53:55.613
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internet-explorer, web-applications

由于我正在解决的多个问题，我想知道是否有人知道阻止访问基于浏览器的 rails 应用程序的方法？我想阻止 Internet Explorer（所有版本），有什么想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T04:08:30.043

你可以使用 rack-noie 作为 Rails 中间件：

宝石文件：

```
gem "rack-noie", :require => "noie" 
```

然后在您的 config/application.rb 中：

```
config.middleware.use Rack::NoIE, {:redirect => "/why-i-dont-support-ie.html", 
                                   :minimum => 29} 
```

当然，这将阻止 IE 直到版本 29。如果您只想让 9 或 10 进入，请编辑掉。您将人们重定向到哪里也取决于您。

# c# - ASP.NET Excel 导出

> ID：11944345
> 
> 赞同：0
> 
> 时间：2012-08-14T00:54:04.633
> 
> 标签：c#, asp.net, excel

我正在寻找一种导出 Excel 电子表格的方法，使得每行的一个单元格中有多个值。

我目前正在使用 HtmlTextWriter 类将 Html 写入 Excel 内容类型格式，但它会为相应行中的每个值创建一个新单元格。

例如，它当前写出第 1 行：RowTitle Value1 第 2 行：Value2 第 3 行：Value3

我想要的是将所有内容写在一行中。第 1 行：行标题 值 1 值 2 值 3 行 2：

这可能吗 - 有没有人有任何指示？

我目前的代码如下：

```
Response.Buffer = true;
                    Response.ContentType = "application/vnd.ms-excel";
                    Response.Charset = "";
                    Response.AddHeader("content-disposition", "filename=Compare" + fileName + ".xls");
                    this.EnableViewState = false;
                    System.IO.StringWriter oStringWriter = new System.IO.StringWriter();
                    System.Web.UI.HtmlTextWriter oHtmlTextWriter = new System.Web.UI.HtmlTextWriter(oStringWriter);
                    this.ClearControls(tblComparison);
                    tblComparison.RenderControl(oHtmlTextWriter);

                    // Embed style rules here so that when opening the file in Excel separately, the styling will stay in place
                    // and not be dependent on an external css file.
                    Response.Write(@"
        <head>
        <title>Compare</title>
        <style>
        #tblComparison { empty-cells:show;border-collapse:collapse;border:none; }
        #tblComparison tr td { vertical-align:top;text-align:center;padding:0px 5px 2px 8px;border-right:1px solid #094A8C;border-bottom:1px dotted #6699FF;font-size:.7em }
        #tblComparison tr td.header { text-align:right;font-weight:bold }
        #tblComparison tr td.header span.note { text-align:right;font-weight:normal;color:#094A8C; }
        #tblComparison tr td div.itrs { display:none }
        #tblComparison tr td textarea { width:20em }
        #tblComparison tr td textarea.objective { height:5em;font-size:.9em }
        #tblComparison tr td select { width:200px;font-size:1em }    
        #tblComparison tr td textarea.comments { height:10em;font-size:.9em }
        #tblComparison tr td textarea.multiline { height:10em;font-size:.9em }
        #tblComparison tr td.requested textarea.comments,
        #tblComparison tr td.requested textarea.objective { background-color:#F2F7FB;border:1px solid gray }
        #tblComparison tr td.requested input { font-size:1em;background-color:#F2F7FB;border:1px solid gray }
        #tblComparison tr .existRequested { background-color:#52697B; color:White;}
        div { font-size: 1em }
        </style>
        </head>
");
                    Response.Write(oStringWriter.ToString());
                    Response.End(); 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T05:04:34.140

希望这段代码对你有帮助，

```
 Response.ContentType = "text/csv";
    Response.Cache.SetNoStore();
    Response.Buffer = true;
    Response.BufferOutput = true;
    Response.Charset = "UTF-8";
    Response.ContentEncoding = System.Text.Encoding.Unicode;
    Response.Write("Company, City, Country");
    //IF you want each item in each cell of a row
    byte[] buffer = System.Text.Encoding.Unicode.GetBytes(Separater(Name) + Separater(City) +Separater(Country) +  "\r\n")
    Response.OutputStream.Write(buffer, 0, buffer.Length);
    Response.OutputStream.Flush();

    private string Separater(string text)
    {
        if (text == null)
        {
            return "\"\",";
        }
        return "\"" + text.Replace("\"", "'") + "\"" + ",";
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:41:46.937

如果您从集合或数据集中获取表格的数据，您可以使用电子表格类动态创建您的 Excel，并按照您想要的方式从代码中对其进行格式化。

像这样的东西。[OWC](http://forums.asp.net/p/1808505/5002061.aspx/1?Create%20excel%20sheet%20on%20fly)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T13:48:45.237

当您说“导出”时，我假设您的意思是您希望能够创建一个电子表格供用户下载。如果这就是你的意思，那么你可能想看看“CarlogAg Excel Xml Writer” - [http://www.carlosag.net/Tools/ExcelXmlWriter/](http://www.carlosag.net/Tools/ExcelXmlWriter/)

如果您的意思是您希望能够在页面上创建一个包含 Excel 电子表格中数据的网格，那么您可能需要考虑使用“Excel 数据阅读器”读取数据 - [http： //exceldatareader.codeplex.com/](http://exceldatareader.codeplex.com/)。这将为您提供一个 DataTable，然后您可以将 ASP.Net 绑定到它，如下所示... [http://www.ezineasp.net/post/ASP-Net-Bind-GridView-to-DataTable.aspx](http://www.ezineasp.net/post/ASP-Net-Bind-GridView-to-DataTable.aspx)

# ios - iOS 推送通知 - JavaPNS - keystore.p12 文件安全性

> ID：11944347
> 
> 赞同：0
> 
> 时间：2012-08-14T00:54:40.093
> 
> 标签：ios, security, push-notification, keystore, pkcs#12

我正在尝试使用 Apple 的推送通知。我在这里使用本教程：http: [//www.ibm.com/developerworks/java/library/mo-ios-push/#ibm-pcon](http://www.ibm.com/developerworks/java/library/mo-ios-push/#ibm-pcon)

我正在尝试创建推送通知。示例代码在这里： [http](http://code.google.com/p/javapns/wiki/PushNotificationBasic) ://code.google.com/p/javapns/wiki/PushNotificationBasic ，看起来像这样：

```
import javapns.Push;

public class PushTest {

   public static void main(String[] args) {

            Push.alert("Hello World!", "keystore.p12", "keystore_password", false, "Your token");

   }
} 
```

除了 keystore.p12 部分，我已经设置好了所有东西。以下是文档中有关密钥库的内容：

对象密钥库：对密钥库文件或实际密钥库内容的引用。有关如何创建密钥库的更多信息，请参阅准备证书。您可以将以下对象传递给此参数：

*   java.io.File：指向您的密钥库文件的直接指针
*   java.lang.String：本地密钥库文件的路径
*   java.io.InputStream：提供来自密钥库的字节的流
*   byte[]：密钥库的实际字节
*   java.security.KeyStore：实际加载的密钥库

我不只是想在我的计算机上输入密钥库的路径（就像他们在这里[使用 Java-PNS 向 iPhone 发送推送通知时出错？](https://stackoverflow.com/questions/11012191/getting-error-while-sending-push-notification-to-iphone-using-java-pns)），因为我觉得那是不安全的。

我应该使用哪些对象？我倾向于使用 java.security.KeyStore。

最后一点，此代码需要托管在 Amazon Web Service 的 Elastic Beanstalk 上（如果重要的话）。

**---------编辑 1------------**

我试图输入 Richard J. Ross III 的代码。但在可以了解我的 .p12 文件设置是否正确之前，我首先需要解决有关 JavaPNS（以及我相信的文件结构）的问题。运行下面的代码会给我这个错误：`HTTP Status 404 - Servlet IosSendGameServlet is not available`. 当我注释掉所有 JavaPNS 语句时，我得到这个错误：（`HTTP Status 500 - javax.servlet.ServletException: Parameter recievingAppleDeviceID not found.`因为我没有输入参数）这让我相信访问 JavaPNS 的方式存在问题。也许它在我的文件结构中的位置错误？它与 servlet-api（在 lib 中）位于同一位置。也许这是我上传到 AWS Elastic Beanstalk 服务器的方式的问题？

```
package com.google.android.gcm.demo.server;

import java.io.IOException;
import java.io.InputStream;

import javax.servlet.ServletConfig;
import javax.servlet.ServletException;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import javapns.Push; //<--gets commented out to receive 500 error
import javapns.communication.exceptions.CommunicationException;//<--gets commented out to receive 500 error
import javapns.communication.exceptions.KeystoreException;//<--gets commented out to receive 500 error

public class IosSendGameServlet extends BaseServlet {

    @Override
    public void init(ServletConfig config) throws ServletException {
            super.init(config);
    }

    @Override
    protected void doPost(HttpServletRequest req, HttpServletResponse resp) throws IOException,
                    ServletException {
            String recievingAppleDeviceId = getParameter(req,
                            "recievingAppleDeviceID");
            String sendingUser = getParameter(req, "sendingUser");
            InputStream keyStore = this.getClass().getResourceAsStream("/sasSandbox.p12");

            //everything below here gets commented out to receive 500 error
            try {
                    Push.alert("Game with " + sendingUser + ": It's your turn!", keyStore, "mypassword", false,
                                    recievingAppleDeviceId);
            } catch (CommunicationException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            } catch (KeystoreException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
            }

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T00:57:51.633

您应该使用`InputStream`, 并在类路径中有 .p12 文件，并像这样使用：

```
InputStream keyStore = this.getClass().getResourceAsStream("nameOfMyKeystore.p12"); 
```

# javascript - ASP.NET MVC Scripts.Render 不合并文件..？

> ID：11944348
> 
> 赞同：3
> 
> 时间：2012-08-14T00:54:48.483
> 
> 标签：javascript, asp.net, asp.net-mvc, asp.net-mvc-4

我发觉到`<script type="text/javascript" src="/bundles/jqueryval"></script>`

将文件合并到一个 HTTP 请求中

但是如果我使用 @Scripts.render IE`@Scripts.Render("~/bundles/jqueryval")`

它们仍然是单独的 HTTP 请求/文件吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T05:22:34.077

确保您在发布模式下运行：

```
<compilation debug="false" targetFramework="4.0" /> 
```

如果您希望将脚本缩小并捆绑到一个脚本中。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-17T14:50:28.533

您也可以通过`BundleTable.EnableOptimizations = true;`at的代码强制它`BundleConfig`

***应大众要求，我将其添加为答案***

# c++ - 将 mpi 消息从 c++ 代码发送到 fortran 90 代码

> ID：11944356
> 
> 赞同：3
> 
> 时间：2012-08-14T00:56:29.607
> 
> 标签：c++, mpi, fortran90, openmpi

我正在尝试查看是否可以将 c++ 代码中的数组内容发送到 fortran 90 代码。我正在使用使用 intel 11.1.072 编译器构建的 openmpi 1.4.3。它们安装在 Linux 版本 2.6.18-108chaos (mockbuild@chaos4builder1) (gcc 版本 4.1.2 20080704 (Red Hat 4.1.2-48))。

这是c ++方面：

```
# include <cstdlib>
# include <iostream>
# include <mpi.h>
using namespace std;

void printarray (float arg[], int length) {
   for (int n=0; n<length; n++)
    cout << arg[n] << " ";
  cout << "\n";
}

int main(int argc, char *argv[] ){
   float a[10];
   int myrank,i;
   MPI::Init ( argc, argv );
   myrank=MPI::COMM_WORLD.Get_rank();
   cout << "rank "<<myrank<<" is c++ rank."<<std::endl;
   for (i=0;i<10;i++){
      a[i]=10.0;
   }
   printarray(a,10);
   MPI::COMM_WORLD.Send(&a[0],1,MPI::DOUBLE_PRECISION,1,100);
   MPI::Finalize();
} 
```

这是 f90 的一面：

```
program main
implicit none
include "mpif.h"
integer:: ierr,stat(MPI_STATUS_SIZE)
real(8):: a(10)

call mpi_init(ierr)
a=0
print*,a
call mpi_recv(a(1),10,MPI_DOUBLE_PRECISION,0,100,MPI_COMM_WORLD,stat,ierr)
print*,a
call mpi_finalize(ierr)
end program 
```

编译完这两个代码后，我运行

```
$mpirun -n 1 *c_executable* : -n 1 *fortran_executable* > output 
```

我在 fortran 方面得到的数字不是 10.0。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T11:07:41.563

MPI 标准确实有语言互操作性的规定——MPI 2.2 文档的整个 §16.3 专门用于 Fortran 和 C 之间的语言互操作性。

> §16.3.10 跨语言交流
> 
> MPI 中通信的类型匹配规则并没有改变：发送的每个项目的数据类型规范应在类型签名中匹配用于接收该项目的数据类型规范（除非其中一种类型是`MPI_PACKED`）。此外，消息项的类型应与相应通信缓冲区位置的类型声明相匹配，除非类型为`MPI_BYTE`or `MPI_PACKED`。如果符合这些规则，则允许跨语言交流。

然后它继续显示一个示例，其中使用相同的构造数据类型从 Fortran 代码发送消息并在一段 C 代码中接收它。该类型的构造是为了允许 C 代码将数据接收到属于 Fortran 代码的缓冲区中，但与您的问题更相关的是 C 代码使用从 Fortran 构造的数据类型`MPI_REAL`。如果有意义的话，在 C 函数中使用 Fortran 数据类型（反之亦然）是完全合法的：

> §16.3.6 MPI 不透明对象 - 数据类型
> 
> ...如果以一种语言定义的数据类型用于以另一种语言进行的通信调用，则发送的消息将与从第一种语言发送的消息相同：访问相同的通信缓冲区，并使用相同的表示如果需要，将执行转换。所有预定义的数据类型都可以在任何语言的数据类型构造函数中使用。如果提交了数据类型，则它可以用于任何语言的通信。

（预定义的 MPI 数据类型，如`MPI_REAL`和`MPI_DOUBLE`已提交）

相反，一方面使用 Fortran 数据类型，另一方面使用 C 数据类型是允许的，但被认为是不可移植的：

> §16.3.10 跨语言交流
> 
> ... MPI 实现可能会削弱这些类型匹配规则，并允许使用 Fortran 类型发送消息并使用 C 类型接收消息，反之亦然，当这些类型匹配时。即，如果 Fortran 类型`INTEGER`与 C 类型相同`int`，则 MPI 实现可能允许使用 datatype 发送数据`MPI_INTEGER`并使用 datatype 接收数据`MPI_INT`。*然而，这样的代码是不可移植的。*

（强调我的）

更改`REAL(8)`为`DOUBLE PRECISION`不会增加代码的可移植性，因为 Fortran 标准不保证`DOUBLE PRECISION`类型的表示 - 它只是说这`DOUBLE PRECISION`是一种`REAL`类型的替代说明符，即双精度类型，它应该具有更高的小数精度比默认的真实。`REAL(8)`使用数据类型发送`MPI_DOUBLE_PRECISION`是不可移植的。相反，可移植程序将使用`SELECTED_REAL_KIND`Fortran 的内在函数以及`MPI_Type_create_f90_real`注册匹配的 MPI 数据类型。

恕我直言，最好的选择是依靠 C 和 Fortran 之间的语言互操作性，并在双方都坚持相同的数据类型。由于您的编译器套件足够新，您可以使用`ISO_C_BINDING`Fortran 的机制来获取`REAL`和`INTEGER`种类，与 C 兼容，并在 Fortran 调用中使用 C 数据类型。例如：

```
USE, INTRINSIC :: ISO_C_BINDING
REAL(C_DOUBLE), DIMENSION(10) :: darray
INTEGER(C_INT) :: ival
...
CALL MPI_SEND(darray, 10, MPI_DOUBLE, 0, 0, MPI_COMM_WORLD, ierr)
CALL MPI_BCAST(ival, 1, MPI_INT, 0, MPI_COMM_WORLD, ierr)
... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-10-18T20:13:46.057

这是 C 中修改后的工作版本

```
#include <stdio.h>
#include <mpi.h>

main(int argc, char **argv) 
{
  int i,ierr, num_procs, my_id;
  double a[10];

  for (i=0;i<10;i++)
  {
    a[i]=10.0;
  }

  ierr = MPI_Init(&argc, &argv);

  printf(" Hello C Code\n"); 

  /**/
  ierr = MPI_Comm_rank(MPI_COMM_WORLD, &my_id);
  ierr = MPI_Comm_size(MPI_COMM_WORLD, &num_procs);
  ierr = MPI_Send(&a[0],10,MPI_DOUBLE,1,100, MPI_COMM_WORLD);  

  ierr = MPI_Finalize(); 

} 
```

这是 F 中修改后的工作版本

```
 program main
        use mpi

        implicit none
        integer:: ierr,stat(MPI_STATUS_SIZE)
        double precision:: a(10)

        call mpi_init(ierr)

        write(*,*)"Hello F Code"
        a=0
        print*,a
        call mpi_recv(a(1),10,MPI_DOUBLE_PRECISION,0,100,MPI_COMM_WORLD,stat,ierr)
        print*,a
        call mpi_finalize(ierr)
    end program 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T01:14:29.640

是的，你可以这样做；主要问题是在您的 C++ 代码中，您的`a`数组是 type `float`，而不是 double 。

您也只发送了 1 个，而不是 10 个，这些非双打；仍然可以`MPI_RECV()`工作，但当然不会设置其他 9 个值。

您应该注意的其他一点是您应该`MPI_DOUBLE`在 C/C++ 和`MPI_DOUBLE_PRECISION`Fortran 中使用；它们不必相同，实际上我想`MPI_DOUBLE_PRECISION`C 中的使用是未定义的。

您可能还想`double precision`在 fortran 程序中使用而不是`real(8)`，这很常见但不是标准的。

原则上，您甚至会担心异构性，担心运行这两个程序的机器上的浮点数编码，但对我们大多数人来说，这不是问题。

# jquery-ui - KendoUI 像 JQueryUI 一样可排序

> ID：11944357
> 
> 赞同：5
> 
> 时间：2012-08-14T00:56:32.950
> 
> 标签：jquery-ui, kendo-ui

寻找使用 KendoUI 的示例，例如 JQueryUI 可排序方法。似乎找不到这样的东西。如果你不能在 KendoUI 中做到这一点，那真是太可惜了。

[http://jqueryui.com/demos/sortable/](http://jqueryui.com/demos/sortable/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-06T15:34:18.907

如果您想拥有与其他 KendoUI 小部件相同的外观和感觉，您可以尝试使用 TreeView 实现它：

如果这是可排序的元素：

```
var dataSource = [
    { id:1, text:"Element 1" },
    { id:2, text:"Element 2" },
    { id:3, text:"Element 3" },
    { id:4, text:"Element 4" },
    { id:5, text:"Element 5" },
    { id:6, text:"Element 6" }
]; 
```

那么您可以使用以下代码：

```
$("#sortable").kendoTreeView({
    dataSource :dataSource,
    template   :"<div class='ob-item'> #= item.text # </div>",
    dragAndDrop:true,
    drag       :function (e) {
        var dst = $($(e.dropTarget).closest(".k-item")[0]).data("uid");
        var src = $(e.sourceNode).data("uid");
        if ($(e.dropTarget).hasClass("ob-item") && dst != src) {
            e.setStatusClass("k-insert-top");
        } else {
            e.setStatusClass("k-denied");
        }
    },
    drop       :function (e) {
        if ($(e.sourceNode).data("uid") !== $(e.destinationNode).data("uid")) {
            $(e.sourceNode).insertBefore(e.destinationNode);
        }
        e.setValid(false);
    }
}); 
```

呈现一个可排序的列表。

笔记：

`ob-item`是您想要的每个可排序项目的样式。例如：

```
.ob-item {
    background-color: #e9e9e9;
    border: 1px solid #a99f9a;
    color: #2e2e2e;
    padding: 5px;
    border-radius: 4px;
} 
```

如果您允许嵌套，那么您应该替换`insertBefore`为`append`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-05T11:03:54.467

是的，你可以在 KendoUi 中做到这一点。我同意，他们的文档可能会更清晰一些，但请在树视图拖放下查看：

[http://demos.kendoui.c​​om/web/treeview/dragdrop.html](http://demos.kendoui.com/web/treeview/dragdrop.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-16T12:10:38.570

对于那些发现这个问题的人。现在 Kendo UI 有 Sortable 元素：[http ://demos.telerik.com/kendo-ui/web/sortable/index.html](http://demos.telerik.com/kendo-ui/web/sortable/index.html)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-28T02:28:55.047

您可以使用自定义构建器构建自定义 jQuery UI js 文件：http: [//jqueryui.com/download](http://jqueryui.com/download)

只需获取包含您需要的 ui 核心和可排序功能的参考，文件大小将最小，您将获得所需的功能。

由于 Kendo UI 与 jQuery 一起工作，因此 jQuery UI 增加的重量是最小的。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-21T12:54:00.673

像这样试试

```
 var template = kendo.template("<ul id='sortable-basic'><li class='sortable'>Papercut <span>3:04</span></li><li class='sortable'>One Step Closer <span>2:35</span></li><li class='sortable'>With You <span>3:23</span></li><li class='sortable'>Points of Authority <span>3:20</span></li><li class='sortable'>Crawling <span>3:29</span></li><li class='sortable'>Runaway <span>3:03</span></li><li class='sortable'>By Myself <span>3:09</span></li></ul>");

$("#divSolution").html(template); //display the result
$("#sortable-basic").kendoSortable(); 
```

# php - 如何配置 PHP 以使用 `clamscan` 自动扫描上传的文件？

> ID：11944358
> 
> 赞同：3
> 
> 时间：2012-08-14T00:56:37.457
> 
> 标签：php, upload, virus-scanning

我有一个想法可以让所有运行 PHP 的 Linux 服务器更加安全。

我想配置`php.ini`文件上传以使用 ClamAV 扫描任何新文件上传`clamscan`。

可能吗？我应该如何配置它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:33:56.293

虽然PHP 脚本中有与 ClamAV 交互的[库](http://www.clamav.net/lang/en/download/third-party-tools/3rdparty-library/)，但无法自动扫描所有上传的文件。

主要是因为灵活性。例如，如果您运行一个安全网站来跟踪各种病毒并存储每个病毒的副本，ClamAV 会在上传过程中找到它们，从而使您的网站变得无用。更好的方法是在客户端代码中执行此操作，并使用上面链接中的库之一执行扫描。

话虽如此，我不相信这是不可能实现的。您可以[编写一个](http://devzone.zend.com/303/extension-writing-part-i-introduction-to-php-and-zend/)挂钩到文件上传的 PHP 扩展，以在上传的文件上自动运行 ClamAV。

# jquery - ASP.NET MVC4 jquery/javascript 包的使用

> ID：11944363
> 
> 赞同：32
> 
> 时间：2012-08-14T00:57:40.653
> 
> 标签：jquery, asp.net, asp.net-mvc, asp.net-mvc-4, bundling-and-minification

当我使用标准 MVC4 模板创建我的项目时，其中包含了很多 javascript，例如：jquery-obtrusive、jquery-validate、knout、整个 jQuery UI。

其中有多少值得保留，有多少会被丢弃？当您创建强类型控制器时，我注意到 create.cshtml 视图生成的调用：

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

这个文件到底是做什么的？我应该保留它吗？我应该引用最初在 BundleConfig.cs 中定义的所有这些 JS 文件吗？或者我可以不打扰..？

* * *

## 回答 #1

> 赞同：99
> 
> 时间：2012-08-14T00:59:53.123

> 这个文件到底是做什么的？

`jqueryval`不是文件，它是对包的引用。

MVC4 中的包是捆绑在一起的脚本、样式或其他文件的集合。

您将在文件夹中有一个`BundleConfig.cs`文件`App_Start`，其中包含将哪个文件添加到哪个捆绑包的设置。

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
            "~/Scripts/jquery.unobtrusive*",
            "~/Scripts/jquery.validate*")); 
```

如您所见，`~/bundles/jqueryval`捆绑包的虚拟路径结合了其中指定的文件。所以稍后当你看到这个时：

```
@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
} 
```

以上将包括捆绑在该参考下的脚本。

> 我应该保留它吗？我应该引用最初在 BundleConfig.cs 中定义的所有这些 JS 文件吗？

对于`jqueryval`捆绑包，您可能会发现包含的不显眼的验证脚本非常有用。

它们是负责管理不显眼的验证、保持 DOM 干净整洁的脚本。

如果您不需要或不想使用不显眼的验证，您可以将捆绑软件移除。如果你这样做，那么我相信你还需要更新你的`web.config`，设置必填字段以`false`确保你的项目不会寻找文件，类似于：

```
<add key="ClientValidationEnabled" value="false" />
<add key="UnobtrusiveJavaScriptEnabled" value="false" /> 
```

本文很好地解释了使用侵入式验证和非侵入式验证之间的好处和确切区别：[**Brad Wilson：ASP.NET MVC 3 中的非侵入式客户端验证**](http://bradwilson.typepad.com/blog/2010/10/mvc3-unobtrusive-validation.html)

一般来说，我认为只包含您需要的内容是好的。如果您不需要捆绑包中指定的所有文件，请删除这些文件，一起排除捆绑包或创建您自己的自定义捆绑包。

反复试验。如果您删除它们并在浏览器调试器控制台中发现随机异常，请尝试重新添加一些文件/捆绑包。

* * *

通常，捆绑也适用于样式表：

```
bundles.Add(new StyleBundle("~/Content/themes/base/css").Include(
            "~/Content/themes/base/jquery.ui.core.css",
            "~/Content/themes/base/jquery.ui.resizable.css",
            "~/Content/themes/base/jquery.ui.selectable.css",
            "~/Content/themes/base/jquery.ui.accordion.css",
            "~/Content/themes/base/jquery.ui.autocomplete.css",
            "~/Content/themes/base/jquery.ui.button.css",
            "~/Content/themes/base/jquery.ui.dialog.css",
            "~/Content/themes/base/jquery.ui.slider.css",
            "~/Content/themes/base/jquery.ui.tabs.css",
            "~/Content/themes/base/jquery.ui.datepicker.css",
            "~/Content/themes/base/jquery.ui.progressbar.css",
            "~/Content/themes/base/jquery.ui.theme.css")); 
```

对开发人员的好处是只需要引用一个单独的包而不是几个文件。

对客户端的好处是浏览器必须执行多少单独的加载才能获取脚本/css 文件。

例如，如果您的视图中有 5 个文件引用，客户端浏览器将分别下载所有 5 个文件，并且每个浏览器中可以同时下载多少个文件的限制。这意味着如果客户端的连接速度较慢，他们可能会在加载文件之前等待几秒钟。

但是，如果您将所有 5 个文件配置为一个捆绑包，则浏览器仅下载 1 个文件，即捆绑的一个。

此外，捆绑包（或捆绑包中的文件）被缩小，因此您不仅可以节省下载脚本所需的时间，还可以节省下载大小。

当您对此进行测试时，请注意在调试模式下没有区别，您需要处于发布模式或在方法`BundleConfig.cs`底部的文件中启用捆绑表的优化`RegisterBundles`。

```
BundleTable.EnableOptimizations = true; 
```

您不必使用捆绑软件，您仍然可以自由引用单个脚本/css 文件。当你需要它时，它确实让事情变得更容易。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-07-09T12:56:22.043

MVC4 和 .Net Framework 4.5 提供了捆绑和缩小技术，可减少对服务器的请求数量以及请求的 CSS 和 JavaScript 库的大小，从而提高了简单单词页面的加载时间，提高了页面加载速度。

System.Web.Optimization 类提供了 Microsoft.Web.Optimization dll 中存在的捆绑和缩小技术。

**什么是捆绑包** 捆绑包是由单个 HTTP 请求加载的一组逻辑文件。您可以通过在 BundleConfig.cs 文件中调用 BundleCollection 类 Add() 方法分别为 css 和 javascripts 创建样式和脚本包。

创建样式包

```
bundles.Add(new StyleBundle("~/Content/css").Include("~/Content/site.min.css",
"~/Content/mystyle.min.css")); 
```

创建脚本包

```
bundles.Add(new ScriptBundle("~/bundles/jqueryval").Include(
 "~/Scripts/jquery-1.7.1.min.js",
 "~/Scripts/jquery.validate.min.js",
 "~/Scripts/jquery.validate.unobtrusive.min.js")); 
```

# python - JQuery更改页面后如何在selenium2 python中获取页面源

> ID：11944366
> 
> 赞同：0
> 
> 时间：2012-08-14T00:57:52.137
> 
> 标签：python, selenium, web-crawler

我正在使用 Selenium 在 python 中编写一些测试代码，并在调用 driver.page_source 时出现过时元素错误。我明白原因。我已经导航了页面，并且导航插入了新的页面元素。但是一旦这些新元素被插入到页面中，我如何才能获得整个修改页面的源代码？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:15:41.930

您可以使用分裂：[http ://splinter.cobrateam.info/](http://splinter.cobrateam.info/)

# mysql - 资源 ID #22 插入数据库字段

> ID：11944370
> 
> 赞同：1
> 
> 时间：2012-08-14T00:58:14.670
> 
> 标签：mysql, sql

我在运行此功能时遇到问题。当它运行时，它完全符合我的要求，除了在我的 like_requests 表中，request_id 不是链接到变量的 mysql 查询结果，`$select`而是资源 ID #22。我认为当您尝试回显结果时会出现资源 ID，但我没有使用回显。代码有什么问题？

```
function update_likes($band_requested, $new_likes, $session_user_id) {

    $select = mysql_query("SELECT `primary_id` FROM `requests` WHERE 

    `user_requester_id` = '$session_user_id' AND `person_requested` = 

    '$band_requested'");

    $sql_2 = "INSERT INTO `like_requests` (user_id, request_id) VALUES 

    ('$session_user_id', '$select')";   

    mysql_query($sql_2);

}

$band_requested = 'rally done';
$new_likes = 239;
$the_session_user_id = 3;

update_likes($band_requested, $new_likes, $the_session_user_id); 
```

使用更正答案进行更新 这是在 David 的帮助下更正的代码。

```
function update_likes($band_requested, $new_likes, $session_user_id)

{

$select = mysql_query("SELECT `primary_id` FROM `requests` WHERE `user_requester_id` = 

'$session_user_id' AND `person_requested` = '$band_requested'");

$row = mysql_fetch_row($select);

$request_id = $row[0];  

$sql_2 = "INSERT INTO `like_requests` (user_id, request_id) VALUES ('$session_user_id', 

'$request_id')";    

mysql_query($sql_2);

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:19:27.507

mysql_query 返回一个资源（[http://php.net/manual/en/function.mysql-query.php](http://php.net/manual/en/function.mysql-query.php)）而不仅仅是一个标量值。您需要使用类似的函数`mysql_fetch_row()`来获取您想要的一行，将该行分配给一个变量`$row`，然后检索`primary_id`带有数组语法的`$row['primary_id']`. 顺便说一句，显然`mysql_query`正在被缓和，我们应该使用 MySQLi API 的`mysqli_query()`方法。

# django - django-filebrowser 在测试期间失败

> ID：11944375
> 
> 赞同：1
> 
> 时间：2012-08-14T00:58:58.217
> 
> 标签：django, django-filebrowser

错误信息：

```
Creating Test for the FileBrowser site: filebrowser
Creating test database for alias 'default'...
..................D:\blizzard\Projects\Python\Web\moz455\venv\lib\site-packages\
django\template\defaulttags.py:1235: DeprecationWarning: The syntax for the url
template tag is changing. Load the `url` tag from the `future` tag library to st
art using the new behavior.
  category=DeprecationWarning)
('path:', 'uploads/tmp_test_0\\testimage_medium.jpg')
FRemoving left-over tmp dir: uploads/tmp_test_0

======================================================================
FAIL: runTest (filebrowser.tests.sites.TestSite_filebrowser)
----------------------------------------------------------------------
Traceback (most recent call last):
  File "D:\blizzard\Projects\Python\Web\moz455\venv\lib\site-packages\filebrowse
r\tests\sites.py", line 233, in runTest
    test_detail(self)
  File "D:\blizzard\Projects\Python\Web\moz455\venv\lib\site-packages\filebrowse
r\tests\sites.py", line 140, in test_detail
    test.assertTrue(test.site.storage.exists(path))
AssertionError: False is not True 
```

我在filebrowser的github页面上写过它，但也许是我自己的错。不处理文件浏览器源可以解决这个问题吗？
注意：路径等于'uploads/tmp_test_0\\testimage_medium.jpg'，文件夹'uploads'在应用程序'media'文件夹中
版本：Django - 1.4.1，django-filebrowser - 3.5.0，django-grappelli - 2.4。 0

# ios - MKOverlay 路线在 Apple Breadcrumb iOS 代码中工作，但不在我的应用程序中

> ID：11944377
> 
> 赞同：0
> 
> 时间：2012-08-14T00:59:05.267
> 
> 标签：ios, uitabbarcontroller, mapkit, breadcrumbs, mkoverlay

我正在开发一个 iOS 应用程序，并希望将苹果提供的 Breadcrumb iOS Mapkit 路由功能作为功能之一。我在情节提要中创建了一个 UIViewController（作为选项卡栏控制器的选项卡）并在其中插入了一个 MKMapView。我还将它连接到下图所示的 ThirdViewController 中的插座。类如下所示。[我的 CrumbPath 和 CrumbPathView 类与http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html](http://developer.apple.com/library/ios/#samplecode/Breadcrumb/Introduction/Intro.html)的 Breadcrumb 示例完全相同

即使使用相同的代码，mkoverlay 路由也不会显示在我的应用程序中。我在这里错过了一些重要的事情吗？我在 iOS 编程方面没有经验，可能错过了一些基本的东西。

第三视图控制器.h

```
#import <UIKit/UIKit.h>
#import <MapKit/MapKit.h>

#import "CrumbPath.h"
#import "CrumbPathView.h"

@interface ThirdViewController : UIViewController <MKMapViewDelegate, CLLocationManagerDelegate>
{

@private
    MKMapView *map;

    CrumbPath *crumbs;
    CrumbPathView *crumbView;

    CLLocationManager *locationManager;

}

@property (nonatomic, retain) IBOutlet MKMapView *map;
@property (nonatomic, retain) CLLocationManager *locationManager;
@end 
```

第三视图控制器.m

```
#import "ThirdViewController.h"

@interface ThirdViewController ()
@end

@implementation ThirdViewController

@synthesize locationManager, map;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
// Do any additional setup after loading the view.

    self.wantsFullScreenLayout = YES;

    self.locationManager = [[CLLocationManager alloc] init];
    self.locationManager.delegate = self;

    self.locationManager.desiredAccuracy = kCLLocationAccuracyBest;

    [self.locationManager startUpdatingLocation];

    [self.view addSubview:self.map];
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.

    self.map = nil;
    self.locationManager.delegate = nil;
    self.locationManager = nil;
}

-(void) dealloc
{

}

- (BOOL)shouldAutorotateToInterfaceOrientation (UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark -
#pragma mark MapKit

- (void) locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{
    if(newLocation)
    {
        if((oldLocation.coordinate.latitude != newLocation.coordinate.latitude) && (oldLocation.coordinate.longitude != newLocation.coordinate.longitude))
        {
            if(!crumbs)
            {
                crumbs = [[CrumbPath alloc] initWithCenterCoordinate:newLocation.coordinate];
                [map addOverlay:crumbs];

                MKCoordinateRegion region = MKCoordinateRegionMakeWithDistance(newLocation.coordinate, 2000, 2000);
                [map setRegion:region animated:YES];
            }
            else
            {
                MKMapRect updateRect = [crumbs addCoordinate:newLocation.coordinate];

                if(!MKMapRectIsNull(updateRect))
                {
                    MKZoomScale currentZoomScale = (CGFloat)(map.bounds.size.width/map.visibleMapRect.size.width);

                    CGFloat lineWidth = MKRoadWidthAtZoomScale(currentZoomScale);
                    updateRect = MKMapRectInset(updateRect, -lineWidth, -lineWidth);

                    [crumbView setNeedsDisplayInMapRect:updateRect];
                }
            }
        }
    }
}

- (MKOverlayView *)mapView:(MKMapView *)mapView viewForOverlay:(id<MKOverlay>)overlay
{
    if(!crumbView)
    {
        crumbView = [[CrumbPathView alloc] initWithOverlay:overlay];
    }
    return crumbView;
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T16:59:22.023

您的故事板中没有您的`ThirdViewController`集合作为您的代表`MKMapView`，因此`mapView:viewForOverlay:`从未被调用。设置委托属性可以解决问题。

# android - Sqlite 数据库更新触发服务通过 Content Observer 更新

> ID：11944378
> 
> 赞同：5
> 
> 时间：2012-08-14T00:59:28.673
> 
> 标签：android, sqlite, service, contentobserver

当我的应用程序中的 sqlite 数据库发生任何更改时，我正在尝试使用 Content Observer 来更新服务。

我不知道该怎么做，所以我在下面整理了一些代码。通常，Content Observers 与带有后台服务的联系人或媒体播放器一起使用。在我的研究中，我读到它可以与手机上的 sqlite 数据库一起使用。

问题： 1.由于Sqlite数据库没有uri，我在什么信息`People.CONTENT_URI`替换

```
this.getContentResolver().registerContentObserver (People.CONTENT_URI, true, contentObserver); 
```

2\. 在我的研究中，我没有找到任何可以进入数据库类的代码来提醒 ContentObserver。Content Observer 的所有代码都在服务类中工作吗？

请注意，此问题类似于[Android SQLite DB 通知](https://stackoverflow.com/questions/8783963/android-sqlite-db-notifications)以及 [如何侦听联系人数据库中的更改](https://stackoverflow.com/questions/1401280/how-to-listen-for-changes-in-contact-database) 这两个问题都没有明确回答我的问题。如果您有解释这一点的代码，那将非常有帮助。

这是我下面的半pusedo代码。这没用。我正在使用它来了解如何在数据库信息更改时更新服务。

```
package com.example.com.test.content.observer;

import java.sql.Date;
import java.util.Calendar;
import java.util.List;

import com.google.android.gcm.demo.app.Alerts.AlarmsService;
import com.google.android.gcm.demo.app.Alerts.Alerts;
import com.google.android.gcm.demo.app.sqllite.DatabaseSqlite;

import android.os.Bundle;
import android.os.Handler;
import android.os.IBinder;
import android.provider.Contacts.People;
import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.AlarmManager;
import android.app.PendingIntent;
import android.content.Intent;
import android.database.ContentObserver;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.widget.Toast;
import android.support.v4.app.NavUtils;

public class AlarmService extends Service
{

    Handler mHandler = new Handler();
    DatabaseSqlite db = new DatabaseSqlite(this);
    List<Alerts> listAlerts;
    PendingIntent pendingIntent;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        this.getApplicationContext()
                .getContentResolver()
                .registerContentObserver(?????, true,
                        contentObserver);
    }

    public int onStartCommand(Intent intent, int flags, int startId) {
        Log.d("TAG", "started onstart command Created from Alerts service .");
        return super.onStartCommand(intent, flags, startId);// START_STICKY;
    }

    @Override
    public void onStart(final Intent intent, int startId) {
        super.onStart(intent, startId);

         runThread();
    }

    @Override
    public void onDestroy() {
        super.onDestroy();
        Toast.makeText(this, "Service destroyed...", Toast.LENGTH_LONG).show();
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }

    private class MyContentObserver extends ContentObserver {

        @SuppressLint("ParserError")
        public MyContentObserver(Handler mHandler) {
            super(mHandler);
        }

        @Override
        public void onChange(boolean selfChange) {

             runThread();

            super.onChange(selfChange);
        }

        public void runThread(){

            Thread thread = new Thread() {
                @Override
                public void run() {

                    Boolean x = true;
                    while (x) {

                        db.open();
                        listAlerts = db.getAlarmsForService();
                        db.close();
                        int alerts=listAlerts.size();
                        for (int i = 0; i < alerts; i++) {
                            Alerts item = listAlerts.get(i);
                            item.getRowId();
                            item.getRemoteServerId();
                        String alertInMills = item.getAlertDateInMills();
                        String alertDuration = item.getAlertDurationInMinutes();
                        String eventName = item.getEventName();

                        long longAlertInMills = Long.parseLong(alertInMills);

                         pendingIntent = PendingIntent.getService(AlarmsService.this, 0,intent, 0);

                         AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);

                         Calendar calendar = Calendar.getInstance();

                        // go to data base for time in mills

                         calendar.setTimeInMillis(longAlertInMills);

                         alarmManager.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),
                         pendingIntent);
                        //
                         System.out.println(calendar.toString());

                        }

                        //
                        System.out.println("thread");
                        x = false;

                    }

                }
            };

            thread.start();
        }

        }

    MyContentObserver contentObserver = new MyContentObserver(mHandler);

    this.getContentResolver().registerContentObserver (People.CONTENT_URI, true, contentObserver);

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-11-28T04:00:11.040

一般来说，有两个部分来处理这个问题：正如您所指出的，您需要注册以接收更改的[ContentObserver](http://developer.android.com/reference/android/database/ContentObserver.html) ，以及必须通知注册观察者任何更改的[SQLiteDatabase 。](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html)如果这是您拥有的数据库，您可以创建可用于侦听的 URI。

(1) 首先定义您的 URI，通常在您的数据库定义文件中。

```
public static final Uri CONTENT_URI = Uri.parse("mycontent://packagename/something"); 
```

(2) 为您的数据库内容提供者：

每个 db 函数（插入、更新、删除）都应该`notifyChange()`在完成操作后调用 to，以便通知观察者发生了变化。

```
 rowId = db.insert(tableName, null, cv);
    ...
    getContext().getContentResolver().notifyChange(newUri, null); 
```

(3) 在服务中创建并注册您的[ContentObserver](http://developer.android.com/reference/android/database/ContentObserver.html)，如[您在上面提供的同一链接](https://stackoverflow.com/questions/1401280/how-to-listen-for-changes-in-contact-database)中所述（请记住覆盖`deliverSelfNotifications()`返回 true）

```
public class MyService extends Service {
    private MyContentObserver mObserver;

    @Override
    public void onStartCommand(Intent intent, int flags, int startId) {
        ...
        mObserver = new MyContentObserver();
        getContentResolver().registerContentObserver(Dbfile.CONTENT_URI, null, mObserver);
    }

    @Override
    public void onDestroy() {
        ...
        if (mObserver != null) {
            getContentResolver().unregisterContentObserver(mObserver);
            mObserver = null;
        }
    }

    // define MyContentObserver here
} 
```

(4) 在您的`ContentObserver.onChange()`中，您可以在服务中发布一些内容或在可能的情况下处理更改。

此外，如果它有助于您的事业，您可以自定义 URI 定义以处理您正在观察的不同类型的数据，为每个 URI 注册您的观察者，然后改写[ContentObserver.onChange(boolean, Uri)](http://developer.android.com/reference/android/database/ContentObserver.html#onChange%28boolean,%20android.net.Uri%29)。

希望这可以帮助！

# php - 将变量从输入框传递到 php

> ID：11944380
> 
> 赞同：0
> 
> 时间：2012-08-14T00:59:35.783
> 
> 标签：php, javascript, variables

大家好，我知道这个问题已经发布，但作为一个菜鸟，我无法得到答案的含义。请帮忙。我想将输入框值动态传递给 php 变量。我在这里使用 javascript 请建议是否有其他方法不使用表单提交、_GET 或 _POST。我希望它在没有任何提交的情况下动态完成。

```
function showHint(str)
    {
    document.getElementById('TK').innerHTML = str;
    var str = str

    }

</script>

<html>
<head>Inputbox</head>
<title>TEST PAGE </TITLE>
<body>
<input type='text' id='TK' name='TK' onkeyup='showHint(this.value)'/>
<?php
$str = var  str ;  
echo "<a href = 'newpage.php?S=$str'/>" ; ?>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:05:27.860

No. You can't. PHP is NOT a dynamic language, and it does NOT run client side. PHP runs once, and only once, and that's when the page is loaded. It runs its script and it stops. What you **can** do is get javascript to do an **AJAX** call. AJAX is basically a way of passing information to another page and getting the data, all in JavaScript. Do some research on it, but in short, you can't make PHP run once it's already been run

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:07:49.013

```
<script type="text/javascript" >
function process(){
var field1 = 'whatever';
var field2 = 'more whatever';

$.post("go.php",{field:field1,bext_field:field2},function(result){
         alert(result); 

});

};
</script> 
```

This will alert out whatever you ECHO from GO.PHP.

You will also need a handler like:

```
onClick="process();" 
```

on a div, button, image, just about anything you want to "initiate" your post

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:18:36.930

我想您找到的其他答案可能会说以下内容：

PHP 在用户有机会看到页面之前执行。

JS让你控制之后发生的事情。

因此，您的问题是您正在尝试使用 PHP 来做一些它根本做不到的事情。

在开发应用程序时，使用这些要点来帮助指导您的决策。在这种情况下，如果您尝试根据用户在框中键入的内容来构建链接，那么您解决问题的方法根本不是 PHP（页面已经加载，您来不及了！）--你的解决方案是 JS。

这样想：

```
/* 
  assumes you already have an <a> on the page.  if not, you'll 
  have to create a new <a> element dynamically.  (google "mdn createElement"
  for help)
*/
function showHint (str) {
    document.getElementById('TK').innerHTML = str;
    var link = document.getElementById('your-a-link');
    link.setAttribute('href', 'newpage.php?S=' + str);
} 
```

# javascript - Socket IO 的选择传输方式

> ID：11944381
> 
> 赞同：0
> 
> 时间：2012-08-14T00:59:51.467
> 
> 标签：javascript, node.js, socket.io

我有一个使用 socket.io 的网络应用程序。将客户端连接到服务器可能需要 12 秒以上，我想减少它。我的研究表明，延迟是由套接字 io 尝试不同的传输方法并在尝试列表中的下一个方法之前等待每个超时造成的。反正有没有改变这个顺序？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:02:24.490

[https://github.com/learnboost/socket.io/#server-side-7](https://github.com/learnboost/socket.io/#server-side-7)

但我不能告诉你哪一个需要更多时间来回应。我玩的还不够。

# python - Converting from list to string Python

> ID：11944385
> 
> 赞同：2
> 
> 时间：2012-08-14T01:00:28.240
> 
> 标签：python, python-idle

Right now, here is my code:

```
name = raw_input("Please enter your name: ")
nameList = list(name)
del nameList[1]
newName = str(nameList)
print"Your new name is: " + str(newName) + "." 
```

When I use this code, the problem is that the last line prints the newName like a list, even though I have converted it to a string.

```
Your new name is: ['j', 'k', 'e']. 
```

I want this new name to be displayed like normal text. What am I doing wrong?

Thanks.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T01:01:45.567

I think you want to concatenate the elements of the list using the [`join`](http://docs.python.org/library/stdtypes.html#str.join) string method:

```
>>> new_name = ['j', 'k', 'e']
>>> print ''.join(new_name)
jke 
```

Alternatively, just don't convert the string to a list at all and use string operations to achieve what you want:

```
>>> name = 'jake'
>>> new_name = name[:1] + name[2:]
>>> print new_name
jke 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T01:32:01.860

我把代码弄乱了一点。尝试这个：

```
name = raw_input("Please enter your name: ")
nameList = list(name)
del nameList[1]
test = ''.join(nameList)
print"Your new name is: " + test + "." 
```

希望能帮助到你。（：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T01:04:51.713

```
>>> import string
>>> v = string.ascii_uppercase[:20]
>>> v
 'ABCDEFGHIJKLMNOPQRST'
>>> v = list(v)
>>> v[:10]
  ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J']

>>> v1 = ''.join(v)
>>> v1
  'ABCDEFGHIJKLMNOPQRST' 
```

Alternatively, i believe you can do what you want in a *single* line of code (once you have retrieved the user input and bound it to a variable) so after your first line:

```
print("name is {0}{1}".format(name[:1], name[2:])) 
```

# wcf - ASP.NET MVC site, shared WCF client object, causing a single-threaded bottleneck?

> ID：11944390
> 
> 赞同：1
> 
> 时间：2012-08-14T01:01:41.340
> 
> 标签：wcf, c#-4.0

I'm trying to nail down a performance issue under load in an application which I didn't build, but have become very familiar with the workings of.

The architecture is: mobile apps call an ASP.NET MVC 3 website to get data to display. The ASP.NET site calls a third-party SOAP API using WCF clients (basicHttpBinding), caching results as much as it can to minimize load on that third party.

The load from the mobile apps is in the order of 200+ requests per second at peak times, which translates to something in the order of 20 SOAP requests per second to the third-party, after caching.

Normally it runs fine but we get periods of cascading slowness where every request to the API starts taking 5 seconds.. then 10.. 15.. 20.. 25.. 30.. at which point they time out (we set the WCF client timeout to 30 seconds). Clearly there is a bottleneck somewhere which is causing an increasingly long queue until requests can't be serviced inside 30 seconds.

Now, the third-party API is out of my control but they swear that it should not be having any issues whatsoever with 20 requests per second. So I've been looking into the possibility of a bottleneck at my end.

I've read questions on StackOverflow about [ServicePointManager.DefaultConnectionLimit](https://stackoverflow.com/search?q=ServicePointManager.DefaultConnectionLimit) and [connectionManagement](https://stackoverflow.com/search?q=connectionManagement&submit=search), but digging through the source, I think the problem is somewhat more fundamental. It seems that our WCF client object (which is a standard `System.ServiceModel.ClientBase<T>` auto-generated by "Add Service Reference") is being stored in the cache, and thus when multiple requests come in to the ASP.NET site simultaneously, they will share a single Client object.

From a quick experiment with a couple of console apps and spawning multiple threads to call a deliberately slow WCF service with a shared Client object, it seems to me that only one call will occur at a time when multiple threads use a single ClientBase. This would explain a bottleneck when e.g. 20 calls need to be made per second and each one takes more than 50ms to complete.

Can anyone confirm that this is indeed the case?

And if so, and if I switched to every request creating it's own WCF Client object, I would just need to alter `ServicePointManager.DefaultConnectionLimit` to something greater than the default (which I believe is 2?) before creating the Client objects, in order to increase my maximum number of simultaneous connections?

(sorry for the verbose question, I figured too much information was better than too little)

# internet-explorer - Image Positioning Changes in IE (All Versions) - Negative Margin Issue?

> ID：11944393
> 
> 赞同：0
> 
> 时间：2012-08-14T01:01:47.083
> 
> 标签：internet-explorer, margins, margin

www.goo.gl/HDx9c

You can see the difference here: [http://img534.imageshack.us/img534/8269/screenshot20120813at557.png](http://img534.imageshack.us/img534/8269/screenshot20120813at557.png)

Any ideas? A negative margin is being used to pull the image "up" - I'm thinking that may have something to do with it?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T15:16:38.063

从 IE 8 开始，您可以尝试使用以下方法轻松修复它：

```
box-sizing: content-box 
```

但这取决于渲染模式。另一种方法是通过条件注释中特定于 IE 的 CSS 声明来修复它。

# r - 如何删除R中的重复项

> ID：11944402
> 
> 赞同：4
> 
> 时间：2012-08-14T01:02:40.510
> 
> 标签：r

我有一个非常大的数据集，如下所示： `df <- data.frame(school=c("a", "a", "a", "b","b","c","c","c"), year=c(3,3,1,4,2,4,3,1), GPA=c(4,4,4,3,3,3,2,2))`

```
school year GPA
  a    3   4
  a    3   4
  a    1   4
  b    4   3
  b    2   3
  c    4   3
  c    3   2
  c    1   2 
```

我希望它看起来像：

```
school year GPA
 a    3   4
 a    3   4
 b    4   3
 c    4   3 
```

所以基本上，我想要的是每个给定的学校，我想要他们的高年级学生（学生），不管 GPA 是多少。

我试过了：

`new_df <- df[!duplicated(paste(df[,1],df[,2])),]` 但这给了我学校和年级之间的独特组合。

而下面的那个给了我独特的学校 `new_df2 <- df[!duplicated(df$school),]`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T01:25:44.113

使用`plyr`图书馆

```
require(plyr)
ddply(df,.(school),function(x){x[x$year==max(x$year),]})
> ddply(df,.(school),function(x){x[x$year==max(x$year),]})
  school year GPA
1      a    3   4
2      a    3   4
3      b    4   3
4      c    4   3 
```

或基地

```
test<-lapply(split(df,df$school),function(x){x[x$year==max(x$year),]})
out<-do.call(rbind,test)
> out
    school year GPA
a.1      a    3   4
a.2      a    3   4
b        b    4   3
c        c    4   3 
```

说明： `split`将数据框按学校拆分为列表。

```
dat<-split(df,df$school)

> dat
$a
  school year GPA
1      a    3   4
2      a    3   4
3      a    1   4

$b
  school year GPA
4      b    4   3
5      b    2   3

$c
  school year GPA
6      c    4   3
7      c    3   2
8      c    1   2 
```

对于每所学校，我们都希望成员名列前茅。

```
dum.fun<-function(x){x[x$year==max(x$year),]}

> dum.fun(dat$a)
  school year GPA
1      a    3   4
2      a    3   4 
```

`lapply`对列表的成员应用函数并输出列表

```
> lapply(split(df,df$school),function(x){x[x$year==max(x$year),]})
$a
  school year GPA
1      a    3   4
2      a    3   4

$b
  school year GPA
4      b    4   3

$c
  school year GPA
6      c    4   3 
```

这就是我们想要的，但是以列表的形式。我们需要将列表的成员绑定在一起。我们通过`rbind`依次使用 调用成员来做到这一点`do.call`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T02:23:49.357

我很喜欢这种事情的`by`声明（请参阅 参考资料）。根据 被分成组，然后返回代表 的每所学校的行。`?by``df``df$school``max(year)`

```
> by(df,df$school,function(x) x[x$year==max(x$year),])
df$school: a
  school year GPA
1      a    3   4
2      a    3   4
------------------------------------------------------------ 
df$school: b
  school year GPA
4      b    4   3
------------------------------------------------------------ 
df$school: c
  school year GPA
6      c    4   3 
```

`do.call(rbind...``by`只需将语句返回的每所学校的结果结合起来。

```
do.call(rbind,by(df,df$school,function(x) x[x$year==max(x$year),]))

    school year GPA
a.1      a    3   4
a.2      a    3   4
b        b    4   3
c        c    4   3 
```

# python - Python在文件中搜索和替换

> ID：11944409
> 
> 赞同：0
> 
> 时间：2012-08-14T01:03:51.243
> 
> 标签：python, regex

我试图制作一个脚本来让我在 linux 内核中自动清理一点。我议程上的第一件事是删除单语句块不需要的 if 语句（c 样式）上的大括号（{}）。现在，我用我对python中正则表达式的一点了解尝试的代码进入了工作状态，例如：

```
if (!buf || !buf_len) {
        TRACE_RET(chip, STATUS_FAIL);
        } 
```

脚本将其变成：

```
if (!buf || !buf_len) 
        TRACE_RET(chip, STATUS_FAIL); 
```

这就是我想要的，但是当我在真实的源文件上尝试它时，它似乎随机选择一个 if 语句并将其删除，它的开头大括号并且它有多个语句块，并且它通常在一个 else 语句中删除程序很远的结尾大括号或长 if 语句。

所以有人可以帮我让脚本只触及 if 语句，如果它有一个块语句并正确删除它对应的开始和结束括号。

正确的脚本如下所示：

```
from sys import argv
import os
import sys
import re

get_filename = argv[1]
target = open(get_filename)
rename = get_filename + '.tmp'
temp = open(rename, 'w')

def if_statement():
    look=target.read()
    pattern=r'''if (\([^.)]*\)) (\{)(\n)([^>]+)(\})'''
    replacement=r'''if \1 \3\4'''
    pattern_obj = re.compile(pattern, re.MULTILINE)
    outtext = re.sub(pattern_obj, replacement, look)
    temp.write(outtext)
    temp.close()
    target.close()

if_statement() 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:16:34.657

从理论上讲，这主要是可行的：

```
re.sub(r'(if\s*\([^{]+\)\s*){([^;]*;)\s*}', r'\1\2', yourstring) 
```

请注意，这将在嵌套的单语句块以及字符串或字符文字中的分号上失败。

一般来说，尝试用正则表达式解析 C 代码是个坏主意，而且你真的不应该摆脱那些大括号。拥有它们是一种很好的做法，它们不会伤害任何东西。

# rest - 在 GET 中传递数组以进行 REST 调用

> ID：11944410
> 
> 赞同：70
> 
> 时间：2012-08-14T01:03:54.100
> 
> 标签：rest, restful-url, restful-architecture

我有一个 url 可以为这样的用户获取约会：

```
/user/:userId/appointments 
```

如果我想为多个用户预约，那么 url 应该是什么样子？

应该是：

```
/appointments?users=1d1,1d2.. 
```

谢谢，克里斯。

* * *

## 回答 #1

> 赞同：86
> 
> 时间：2012-08-14T01:09:41.820

集合是一种资源，因此 /appointments 可以作为资源。

集合通常还通过查询字符串提供过滤器，这本质上就是 users=id1,id2... 。

所以，

```
/appointments?users=id1,id2 
```

可以作为过滤的 RESTful 资源。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-08-14T01:39:25.287

我认为序列化 REST 调用参数是一种更好的做法，通常通过 JSON 编码它们：

```
/appointments?users=[id1,id2] 
```

甚至：

```
/appointments?params={users:[id1,id2]} 
```

然后你在服务器上取消编码它们。从长远来看，这将为您提供更大的灵活性。

只需确保在发送参数之前也对参数进行 URLEncode！

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2017-03-06T21:43:58.243

另一种这样做的方法，根据您选择的服务器架构/框架可能有意义，是一遍又一遍地重复相同的论点。像这样的东西：

```
/appointments?users=id1&users=id2 
```

在这种情况下，我建议使用单数形式的参数名称：

```
/appointments?user=id1&user=id2 
```

这由诸如 Jersey（用于 Java）之类的框架本机支持。看看[这个问题](https://stackoverflow.com/questions/13750010/jersey-client-how-to-add-a-list-as-query-parameter)了解更多细节。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T01:06:02.400

```
/appointments?users=1d1,1d2.. 
```

很好。这几乎是您唯一明智的选择，因为您无法使用 GET 传递正文。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2018-10-18T07:23:52.050

这对我有用。

```
/users?ids[]=id1&ids[]=id2 
```

* * *

## 回答 #6

> 赞同：-7
> 
> 时间：2012-08-14T02:12:52.200

不要使用 http GET，而是使用 http POST。和 JSON。或 XML

这就是您发送到服务器的请求流的样子。

```
POST /appointments HTTP/1.0
Content-Type: application/json
Content-Length: (calculated by your utility)

{users: [user:{id:id1}, user:{id:id2}]} 
```

或者在 XML 中，

```
POST /appointments HTTP/1.0
Content-Type: application/json
Content-Length: (calculated by your utility)

<users><user id='id1'/><user id='id2'/></users> 
```

您当然可以按照您的建议继续使用 GET，因为它肯定更简单。

```
/appointments?users=1d1,1d2 
```

这意味着您必须保持数据结构非常简单。

但是，如果/当您的数据结构变得更复杂、http GET 并且没有 JSON 时，您的编程和识别数据的能力将变得非常困难。

因此，除非您可以保持数据结构简单，否则我强烈建议您采用数据传输框架。如果您的请求是基于浏览器的，那么行业通常的做法是 JSON。如果您的请求是服务器-服务器，那么 XML 是最方便的框架。

**jQuery**

如果您的客户端是浏览器并且您没有使用 GWT，则应考虑使用 jquery REST。谷歌关于 jQuery 的 RESTful 服务。

# c - 调试阶乘递归

> ID：11944411
> 
> 赞同：0
> 
> 时间：2012-08-14T01:03:55.783
> 
> 标签：c, recursion

我是 C 编程语言的新手，我正在尝试学习递归来计算给定数字的阶乘。我的问题是如果我输入“5” ，调试`printf`语句正在打印。`2,6,24,120`如果函数调用被替换为相应的值并一次计算阶乘，它如何打印 4 次？

```
#include<stdio.h>
#include<stdlib.h>

int factorial(int n);

int main()
{
        int num;
        int fact_val;
        printf("Enter the number for which you are going to compute the factorial:");
        scanf("%d",&num);

        fact_val=factorial(num);

        printf("The factorial of the given number is %d\n",fact_val);

        return 0;
}

int factorial(int n)
{
        int factorial_val;
        if(n==1)
        return 1;
        else
        {
                factorial_val=factorial(n-1)*n;
                printf("Debugger-%d\n",factorial_val);
        }
        return factorial_val;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T01:05:58.110

当你达到你的基本情况时，你`return`立即而不是打印。

因此，您会看到一个`printf`案例：5、4、3、2，并且当函数传递 1 时，不会打印该值：`return`而是您。

此外，您在打印*之前进行*递归，因此案例按顺序打印，最少优先：第一次打印仅在您一直递归到*2*之后发生。因此您会看到：2、6、24、120。只有当您从当前递归返回时，才会打印中间值。

写下递归以使其更清晰：

```
5 -> recurse with 4:
    4 -> recurse with 3:
        3 -> recurse with 2:
            2 -> recurse with 1:
                1 -> base case, just return...
            printf (1 * 2) = 2;
        printf (2 * 3) = 6;
    printf (6 * 4) = 24;
printf (24 * 5) = 120; 
```

# php - Use javascript to force a textarea to scroll to end

> ID：11944412
> 
> 赞同：0
> 
> 时间：2012-08-14T01:04:23.773
> 
> 标签：php, javascript, ajax

I'm making an instant chat service using PHP and Async javascript. Messages are taken from a database and placed into a text area. The problem is that when messages require the textarea to scroll the setInterval() function used to check and grab new messages forces the text area back to the top of its scrolling height.

I've seen a few solutions and none have worked so far. I tried setting the scrollTop to equal the scrollHeight, but to no avail.

Here's some code:

```
window.onload = function()
{
    if(getUrlVars()['to'] != null)
        setInterval(GetMessages, 1000);
}

function ToServer(cmd, data)
{
    xmlObj = new XMLHttpRequest();
    xmlObj.open('POST','handler.php',true);
    xmlObj.setRequestHeader('Content-type','application/x-www-form-urlencoded');
    xmlObj.send(cmd + data);
    xmlObj.onreadystatechange = function()
    {
        if(xmlObj.readyState == 4 && xmlObj.status == 200)
        {
            if(cmd == 'cmd=push')
            {
                document.getElementById('pushResponse').innerHTML = xmlObj.responseText;
            }
            if(cmd == 'cmd=pop')
            {
                document.getElementById('messages').value += xmlObj.responseText;
            }

        }
    }
}

function GetMessages()
{
    // Grab account hash from auth cookie
    aHash = readCookie('privateChat');
    to = getUrlVars()['to'];
    ToServer('cmd=pop','&account=' + aHash + '&to=' + to);
    textArea = document.getElementById('messages');
    textArea.scrollTop = textArea.scrollHeight;
} 
```

And here's the HTML:

```
<!DOCTYPE HTML>

<html>

<head>
    <meta charset="ISO-8859-1">
    <title>Private Chat</title>
    <link rel="stylesheet" type="text/css" href="style.css">
</head>

<body>
    <div>
        <h2>Conversation with {%RECIPIENT%}</h2>
        <div id="fieldContainer">
            <textarea col="10" rows="5" name="messageBox" id="messages"></textarea>
        </div>
    </div>

    <div>
        <legend>Message</legend>
        <div id="fieldContainer">
            <input type="text" id="msgBox">
        </div>
    </div>
    <div>
        <input type="button" name="fSend" value="Send message" onClick="SendMessage();">
    </div>
    <div id="pushResponse">Response</div>

    <script src="Chat.js"></script>
</body>

</html> 
```

Thanks!

# java - 不是在 Java 中创建的文件

> ID：11944415
> 
> 赞同：2
> 
> 时间：2012-08-14T01:04:53.057
> 
> 标签：java

我确定我在这里遗漏了一些基本的东西。我正在尝试在我的驱动器上创建一个新文件，但出现错误：

```
Exception in thread "main" java.io.FileNotFoundException: C:\ProgramData\msena\test.txt (The system cannot find the file specified)
at java.io.FileInputStream.open(Native Method)
at java.io.FileInputStream.<init>(FileInputStream.java:120)
at java.io.FileReader.<init>(FileReader.java:55)
at net.meosoft.relatetoit.core.HibernateSessionFactory.main(HibernateSessionFactory.java:89) 
```

我目前的代码是：

```
 final File file = new File("C:\\ProgramData\\uname2\\test.txt");
    final BufferedReader in = new BufferedReader(new FileReader(file));
    while(in.ready()) {
        System.out.println(in.readLine());
    }
    in.close(); 
```

目前有什么问题？我只想阅读，即使它在那里（所以应该制作文件）。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T01:06:22.650

Java 不会自动检查 File() 是否存在，也不会在您询问时自动创建它。

您需要执行以下操作之一：

1.  添加检查文件是否存在：`if(file.exists()) { ... }`.
2.  添加一个检查，类似于上面，但如果它不存在，调用：`file.createNewFile();`。这将在文件系统上创建一个新文件供您使用。

如果这仍然不起作用，我会检查您对该目录是否具有写权限。:)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T01:06:39.027

类表示文件的`File`路径，而不是文件本身。如果文件不存在 ( [`!File.exists()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#exists%28%29))，当您尝试访问它时将引发异常。确保文件的路径正确，并且您有权从该位置读取。

如果要创建文件，可以使用[`File.createNewFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#createNewFile%28%29).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:17:06.290

这是创建文件的方法。

```
Formatter output;//pointer to an object that will write to a file
public void createFile(){
try{
  output = new Formatter("C:\\ProgramData\\uname2\\test.txt");
  //test.txt is the name of the file to be created
  //create file in the same folder called test.txt
  //if existed overwrite it
    }
  catch(FileNotFoundException e){
  System.err.println("Error creating file"+e.getMessage());
 } 
```

在 main 中调用 createFile()

```
 CreateTextFile file = new CreateTextFile();
 file.createFile(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-17T10:04:26.067

检查您的文件名。它不应包含任何冒号。

# java - Java：如何在特定目录中运行 Java 进程？

> ID：11944421
> 
> 赞同：0
> 
> 时间：2012-08-14T01:05:51.120
> 
> 标签：java, php, bash

当我运行一个 jar 文件时，`/home/jars`像这样说`java -jar /home/jars/jarfile.jar`，它似乎在我所在的任何目录中运行。

如何使它作为当前工作目录`java -jar /home/jars/jarfile.jar`运行？`/home/jars`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T01:11:47.760

简单的答案：

```
( cd /home/jars; java -jar /home/jars/jarfile.jar ) 
```

[另请参阅此回复](https://stackoverflow.com/questions/840190/changing-the-current-working-directory-in-java)。

大多数支持`exec`调用的语言的类比是`exec`允许您指定工作目录的变体。

[有关简单的 PHP 解决方案，请参阅此内容](https://stackoverflow.com/questions/1679045/php-exec-command-how-to-specify-working-directory)。

# mysql - how the mysql realize the multiple column index(union index)? what's the datastructure of the multiple column index

> ID：11944429
> 
> 赞同：0
> 
> 时间：2012-08-14T01:06:29.747
> 
> 标签：mysql, indexing

yeah，we know that the mysql use the B+ tree to realize the index。 And, you can create union index(multiple column index) on the table.

I want to know how the MySql realize the multiple index, what the structure of the data?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:15:27.573

一个 B+ 树，所有列值以适当的顺序连接到键中。

# qt - C++ Qt - 添加到 GUI 的元素中的层次结构

> ID：11944433
> 
> 赞同：0
> 
> 时间：2012-08-14T01:07:15.490
> 
> 标签：qt

一般来说，我将小部件添加到彼此的顺序是否与我访问它们的顺序相同？

例子：

如果我有一堆`QPushButton`在 a 中`QHBoxLayout`，而这个布局在 a 中`Window::ui`，我可以通过简单地访问这些按钮`ui->button_name`吗？还是我必须这样做`ui->layout->itemAt(idx)`？

编辑：我的问题旨在找到一种简单的方法来访问深入层次结构的元素，例如框架中的标签、布局内、框架内、窗口内等......

PS：另外，我非常感谢任何有关 GUI 架构良好实践的文档！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:19:46.927

使用`ui->object_name`你不需要担心布局！
可以重新设计布局，例如。适用于不同平台，无需更改任何 C++ 代码。

有几本关于 Qt 的好书，示例代码非常好。

[使用 Qt 4 进行 C++ GUI 编程](https://rads.stackoverflow.com/amzn/click/com/0132354160)

[高级 Qt 编程](https://rads.stackoverflow.com/amzn/click/com/0321635906)

# java - 泽西岛：InjectableProvider 没有被捡起 - 春天

> ID：11944434
> 
> 赞同：10
> 
> 时间：2012-08-14T01:07:23.350
> 
> 标签：java, spring, jersey, servlet-filters, injectableprovider

我目前正在尝试`InjectableProvider`使用 Jersey 创建一个，但我无法让 Jersey 来接它。

`@Provider`除了在实现上使用注释之外，我找不到任何关于其用法的真实示例，甚至找不到如何获取它。似乎在泽西岛写它的人在一些帖子中暗示这足以让它被捡起来。

我是否需要指定一些 SPI 服务文件，或者将其添加到某个工厂？

注意：我在 Glassfish 3.1 中运行，并使用 Spring 3.1。Spring 可能会以某种方式接管`Provider`s 的自动加载，这似乎是合理的。但是，我只是不知道。无论如何，我都没有使用 Spring 来管理下面建议的 InjectableProvider，也没有尝试以其他方式添加它，这可能是我的问题。

```
import com.sun.jersey.core.spi.component.ComponentContext;
import com.sun.jersey.spi.inject.Injectable;
import com.sun.jersey.spi.inject.PerRequestTypeInjectableProvider;

public abstract class AbstractAttributeInjectableProvider<T>
        extends PerRequestTypeInjectableProvider<AttributeParam, T>
{
    protected final Class<T> type;

    public AbstractAttributeInjectableProvider(Class<T> type)
    {
        super(type);

        this.type = type;
    }

    @Override
    public Injectable<T> getInjectable(ComponentContext componentContext,
                                       AttributeParam attributeParam)
    {
        return new AttributeInjectable<T>(type, attributeParam.value());
    }
} 
```

基本实现：

```
import javax.ws.rs.ext.Provider;

@Component // <- Spring Annotation
@Provider  // <- Jersey Annotation
public class MyTypeAttributeInjectableProvider
        extends AbstractAttributeInjectableProvider<MyType>
{
    public MyTypeAttributeInjectableProvider()
    {
        super(MyType.class);
    }
} 
```

参考`Annotation`：

```
@Target({ElementType.FIELD, ElementType.PARAMETER})
@Retention(RetentionPolicy.RUNTIME)
@Documented
public @interface AttributeParam
{
    /**
     * The value is the name to request as an attribute from an {@link
     * HttpContext}'s {@link HttpServletRequest}.
     * @return Never {@code null}. Should never be blank.
     */
    String value();
} 
```

[来自 Jersey developer 的](http://jersey.576304.n2.nabble.com/Injected-into-hell-td680228.html)参考链接。

* * *

**更新**：calvinkrishy 指出了我的想法的两个缺陷。

首先，我假设 Jersey`@Provider`在被传统的 Jersey-Spring servlet 启动后将开始扫描 s `com.sun.jersey.spi.spring.container.servlet.SpringServlet`：. 这大多是不正确的；它确实开始扫描，但它会查找具有注释的 Spring bean。

其次，我假设`PerRequestTypeInjectableProvider`在每次传入请求时都会询问 an`Injectable`来处理它控制的注释。这也是错误的。正如预期的`PerRequestTypeInjectableProvider`那样，在启动时实例化了，但泽西岛随后立即要求`Injectable`'s 用给定的来处理给定的注释`type`，它通过扫描它拥有的 Restful 服务来确定——此时——决定它管理（也就是说，所有这些）。

`PerRequestTypeInjectableProvider`和之间的区别`SingletonTypeInjectableProvider`似乎是结果`Injectable`要么包含值而不为它工作（单例），要么每次都查找它的值（每个请求），从而使每个请求的值都可以更改。

这迫使我在我的`AttributeInjectable`（下面的代码）中做一些额外的工作，而不是像我计划的那样传递一些对象，以避免提供`AttributeInjectable`额外的知识，这给我的计划带来了一个较小的影响。

```
public class AttributeInjectable<T> implements Injectable<T>
{
    /**
     * The type of data that is being requested.
     */
    private final Class<T> type;
    /**
     * The name to extract from the {@link HttpServletRequest} attributes.
     */
    private final String name;

    /**
     * Converts the attribute with the given {@code name} into the {@code type}.
     * @param type The type of data being retrieved
     * @param name The name being retrieved.
     * @throws IllegalArgumentException if any parameter is {@code null}.
     */
    public AttributeInjectable(Class<T> type, String name)
    {
        // check for null

        // required
        this.type = type;
        this.name = name;
    }

    /**
     * Look up the requested value.
     * @return {@code null} if the attribute does not exist or if it is not the
     *         appropriate {@link Class type}.
     *         <p />
     *         Note: Jersey most likely will fail if the value is {@code null}.
     * @throws NullPointerException if {@link HttpServletRequest} is unset.
     * @see #getRequest()
     */
    @Override
    public T getValue()
    {
        T value = null;
        Object object = getRequest().getAttribute(name);

        if (type.isInstance(object))
        {
            value = type.cast(object);
        }

        return value;
    }

    /**
     * Get the current {@link HttpServletRequest} [hopefully] being made
     * containing the {@link HttpServletRequest#getAttribute(String) attribute}.
     * @throws NullPointerException if the Servlet Filter for the {@link
     *                              RequestContextHolder} is not setup
     *                              appropriately.
     * @see org.springframework.web.filter.RequestContextFilter
     */
    protected HttpServletRequest getRequest()
    {
        // get the request from the Spring Context Holder (this is done for
        //  every request by a filter)
        ServletRequestAttributes attributes =
            (ServletRequestAttributes)RequestContextHolder.getRequestAttributes();

        return attributes.getRequest();
    }
} 
```

我希望能够从 中传递`HttpServletRequest`，`Provider`但`AttributeInjectable`仅针对每个唯一的注释/类型进行实例化。因为我不能这样做，所以我执行每个值查找，它使用 Spring 的`RequestContextFilter`单例，它提供了一种`ThreadLocal`安全检索`HttpServletRequest`（以及与当前请求相关的其他内容）的机制。

```
<filter>
    <filter-name>requestContextFilter</filter-name>
    <filter-class>
        org.springframework.web.filter.RequestContextFilter
    </filter-class>
</filter>
<filter-mapping>
    <filter-name>requestContextFilter</filter-name>
    <url-pattern>/path/that/i/wanted/*</url-pattern>
</filter-mapping> 
```

结果确实有效，并且它使代码更具可读性，而无需强制各种服务扩展基类只是为了隐藏 的用法`@Context HttpServletRequest request`，然后通过一些辅助方法将其用于访问上述属性。

然后你可以按照以下方式做一些事情：

```
@Path("my/path/to")
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.TEXT_PLAIN)
public interface MyService
{
    @Path("service1")
    @POST
    Response postData(@AttributeParam("some.name") MyType data);

    @Path("service2")
    @POST
    Response postOtherData(@AttributeParam("other.name") MyOtherType data);
}

@Component // Spring
public class MyServiceBean implements MyService
{
    @Override
    public Response postData(MyType data)
    {
        // interact with data
    }

    @Override
    public Response postOtherData(MyOtherType data)
    {
        // interact with data
    }
} 
```

这变得非常方便，因为我使用 Servlet 过滤器来确保用户在传递数据之前具有访问服务的适当权限，然后我可以解析传入的数据（或加载它，或其他）并将其转储到属性中要加载。

如果您不想要上述`Provider`方法，并且想要用于访问属性的基类，那么您可以这样做：

```
public class RequestContextBean
{
    /**
     * The current request from the user.
     */
    @Context
    protected HttpServletRequest request;

    /**
     * Get the attribute associated with the current {@link HttpServletRequest}.
     * @param name The attribute name.
     * @param type The expected type of the attribute.
     * @return {@code null} if the attribute does not exist, or if it does not
     *         match the {@code type}. Otherwise the appropriately casted
     *         attribute.
     * @throws NullPointerException if {@code type} is {@code null}.
     */
    public <T> T getAttribute(String name, Class<T> type)
    {
        T value = null;
        Object attribute = request.getAttribute(name);

        if (type.isInstance(attribute))
        {
            value = type.cast(attribute);
        }

        return value;
    }
}

@Path("my/path/to")
@Consumes(MediaType.APPLICATION_JSON)
@Produces(MediaType.TEXT_PLAIN)
public interface MyService
{
    @Path("service1")
    @POST
    Response postData();

    @Path("service2")
    @POST
    Response postOtherData();
}

@Component
public class MyServiceBean extends RequestContextBean implements MyService
{
    @Override
    public Response postData()
    {
        MyType data = getAttribute("some.name", MyType.class);
        // interact with data
    }

    @Override
    Response postOtherData()
    {
        MyOtherType data = getAttribute("other.name", MyOtherType.class);
        // interact with data
    }
} 
```

* * *

**UPDATE2**：我考虑了我`AbstractAttributeInjectableProvider`的. 提供一个非实现要容易得多，它在每个请求时都被告知其类型 () ，从而避免了一堆只为您提供类型的构造函数实现。这也避免了必须为要与注释一起使用的每种类型编写代码。`AttributeInjectable``Class<T>``AttributeParam``abstract``Class<T>``AttributeParam``AttributeParam`

```
@Component
@Provider
public class AttributeParamInjectableProvider
        implements InjectableProvider<AttributeParam, Type>
{
    /**
     * {@inheritDoc}
     * @return Always {@link ComponentScope#PerRequest}.
     */
    @Override
    public ComponentScope getScope()
    {
        return ComponentScope.PerRequest;
    }

    /**
     * Get an {@link AttributeInjectable} to inject the {@code parameter} for
     * the given {@code type}.
     * @param context Unused.
     * @param parameter The requested parameter
     * @param type The type of data to be returned.
     * @return {@code null} if {@code type} is not a {@link Class}. Otherwise
     *         an {@link AttributeInjectable}.
     */
    @Override
    public AttributeInjectable<?> getInjectable(ComponentContext context,
                                                AttributeParam parameter,
                                                Type type)
    {
        AttributeInjectable<?> injectable = null;

        // as long as it's something that we can work with...
        if (type instanceof Class)
        {
            injectable = getInjectable((Class<?>)type, parameter);
        }

        return injectable;
    }

    /**
     * Create a new {@link AttributeInjectable} for the given {@code type} and
     * {@code parameter}.
     * <p />
     * This is provided to avoid the support for generics without the need for
     * {@code SuppressWarnings} (avoided via indirection).
     * @param type The type of data to be returned.
     * @param parameter The requested parameter
     * @param <T> The type of data being accessed by the {@code param}.
     * @return Never {@code null}.
     */
    protected <T> AttributeInjectable<T> getInjectable(Class<T> type,
                                                       AttributeParam parameter)
    {
        return new AttributeInjectable<T>(type, parameter.value());
    }
} 
```

注意：每个`Injectable`都在启动时实例化一次，而不是每个请求，但在每个传入请求时都会调用它们。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-28T02:31:34.513

你是如何初始化泽西岛的？

我假设您正在使用 Jersey 使用 jersey-spring servlet。在这种情况下，Jersey 默认使用 Spring bean 进行初始化，因此您`Provider`必须是 Spring bean。尝试在您`@Named`的.`@Component``Provider`

[使用 Injectable Providers 的示例](http://codahale.com/what-makes-jersey-interesting-injection-providers/)。

* * *

**更新**：更明确的注入范围：

必须是单`Provider`例，因为对于所有实际目的，它是一个与范围相关的工厂，并且不需要为每个请求构建一个工厂。注入本身会根据请求发生。换句话说`getInjectable`，每个请求都会调用该方法。你有机会尝试吗？

OTOH，如果您扩展`SingletonTypeInjectableProvider`同一个对象，每次都会将其注入您的资源中。

我不确定我是否完全理解您的`Provider`实施。我相信像下面这样的东西应该可以工作。

```
public class UserProvider extends PerRequestTypeInjectableProvider<AttributeParam, Users>{

    public UserProvider(){
        super(Users.class);
    }

    @Context
    HttpServletRequest request;

    @Override
    public Injectable<Users> getInjectable(ComponentContext cc, AttributeParam a) {

        String attributeValue = AnnotationUtils.getValue(a);

        return new Injectable<Users>(){

            public Users getValue() {
                System.out.println("Called"); //This should be called for each request
                return request.getAttribute(attributeValue);
            }

        };

    }

} 
```

* * *

**更新**：提供有关 Jersey 中可用的注入类型和上下文的更多信息。

正如您现在可能想的那样，如果您只需要访问，`HttpServletRequest`那么只需将其直接注入您的`Resource`或`Provider`使用`@Context`注释即可。

但是，要将这些值传递给 Injectable 必须使用`AssistedProvider`或使用类似于您的方法。`Injectable`但是，如果您在 Provider 中内联您的定义并将其注入`HttpServletRequest`到`Provider`类中，您可以再次缓解这种情况。在这种情况下，`Injectable`将能够访问该`HttpServletRequest`实例（因为它在范围内）。我刚刚更新了我的示例以展示这种方法。

注入使用`PerRequestTypeInjectableProvider`和`SingletonTypeInjectableProvider`不是您必须将值注入资源的唯一两个选项。您还可以`*Param`使用`StringReaderProvider`. 显然，这样的注入是请求范围的。

```
@Provider
@Named("userProviderParamInjector")
public class UserProviderParam implements StringReaderProvider<Users> {

    @Context
    HttpServletRequest request;

    public StringReader<Users> getStringReader(Class<?> type, Type type1, Annotation[] antns) {
        if(type.equals(Users.class) {
           return null;
        }

        String attributeValue = null;
        for(Annotation a : antns) {
            if((a.getClass().getSimpleName()).equals("AttributeParam")){
               attributeValue = (String)AnnotationUtils.getValue(a);
            }
        }

        return new StringReader<Users>(){
            public Users fromString(String string) {
                // Use the value of the *Param or ignore it and use the attributeValue of our custom annotation.
                return request.getAttribute(attributeValue);
            }

        };

    }

} 
```

这将为您的资源中`Provider`的任何内容调用。`*Param`因此，使用`Provider`上面注册的类似资源和下面类似的资源，该`Users`值将被注入到您的资源方法中。

```
@Path("/user/")
@Named
public class UserResource {

    @Path("{id}")
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    public Result<Users> get(@AttributeParam("foo") @PathParam("id") Users user) {
    ...
    }

} 
```

但老实说，我认为这是对 StringReaderProvider 合同的滥用，而以前的使用技术`Injectable`感觉更干净。

# python - Python classes: linked attributes

> ID：11944436
> 
> 赞同：1
> 
> 时间：2012-08-14T01:07:23.850
> 
> 标签：python, class, attributes

Is there a more pythonic way of 'linking' attributes such that when one attribute in a class is changed, another can be automatically changed according to some relation that I define?

Currently, I'm doing something like:

```
class myClass(object):
    def __init__(self):
        self.x = 1
        self.y = 2 * self.x
        pass
    def set_x(self, x):
        self.x = x
        self.y = 2 * self.x
        return
A = myClass()
print A.x #prints 1
print A.y #prints 2
A.set_x(5)
print A.x #prints 5
print A.y #automatically changes to 10 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T01:16:58.617

您可以使用属性：

```
class myClass(object):
    def __init__(self):
        self.x = 1

    @property
    def x(self):
        return self._x

    @x.setter
    def x(self, x):
        self._x = x
        self.y = 2 * self._x 
```

和一个测试：

```
>>> c= myClass()
>>> c.x = 10
>>> c.x
10
>>> c.y
20 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T01:17:40.503

您可以使用 getter 和 setter：

```
class myClass(object):
    def __init__(self):
        self.x = 1

    @property
    def y(self):
        return 2 * self.x
    ... 
```

基本上，这就是说当您尝试获取 Ay 时，它会返回 self.x * 2 。

考虑到班上的其他人，我实际上会做这样的事情：

```
class myClass(object):
    def __init__(self):
        self._x = 1

    @property
    def x(self):
        return self._x

    @property
    def y(self):
        return 2 * self._x

    @x.setter
    def x(self, val):
        self._x = val 
```

# javascript - javascript正则表达式中的组匹配

> ID：11944441
> 
> 赞同：0
> 
> 时间：2012-08-14T01:07:41.040
> 
> 标签：javascript, string

如果我有一些测试示例，如：

```
someblablatext?someotherimportanttext 
```

问号符号 (?) 之后如何捕获所有内容。并提醒它？

看[这里](http://www.w3schools.com/js/js_obj_regexp.asp)没有找到关于这种表达方式的一些例子吗？我需要为此使用组匹配吗？到目前为止，我从未在 javascript 中使用过正则表达式，我曾多次在 Java 中使用过。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:11:04.500

你不需要正则表达式。只需使用 string.split() 函数，例如：

```
var yourString = "someblablatext?someotherimportanttext"
alert(yourString.split('?')[1]); 
```

前段时间我听说如果你可以使用字符串函数而不是正则表达式，那么你可能应该，。我做了一些基准测试，似乎字符串函数非常快，并且在许多情况下比正则表达式更快（不是在谈论复杂的例子，只是像这样简单的事情）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:10:54.703

使用[`regexp.exec(string)`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp/exec).

```
/\?(.*)$/.exec("someblablatext?someotherimportanttext")[1] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-07-27T10:31:27.433

以上答案解决了您的问题，但确切地说是您的问题（如何在问号符号（？）之后捕获所有内容），这是您正在寻找的正则表达式`/(=?\?.*)/`

`=?`表示如果后跟，`\?`表示问号字符，`.*`一切。要使它们工作，您需要将它们与`()`. 就是这样。

# objective-c - cocos2d v2.0 自动旋转uiviews

> ID：11944448
> 
> 赞同：1
> 
> 时间：2012-08-14T01:08:54.690
> 
> 标签：objective-c, uiview, cocos2d-iphone

我正在使用 cocos2d v2.0 进行游戏。由于 cocosbuilder 没有原生文本字段，我使用`UITextField`s 来允许用户在菜单中输入文本。

我遇到的一个问题是，当设备旋转 180 度时，没有一个`UITextField`s 旋转。经过一番谷歌搜索，我找到了很多 Cocos2d v1.0 的解决方案，但这些都与 v2.0 不兼容。

cocos2d的[autorotation 指南](http://www.cocos2d-iphone.org/wiki/doku.php/prog_guide%3aautorotation)说默认的 autorotation 使用 opengl 调用，而不是使用 a `UIViewController`，因为前者更快。该指南展示了如何在 cocos2d v1.0 中进行更改。如何在 cocos2d v2.0 中做同样的事情？

# google-chrome-extension - 谷歌浏览器扩展获取新标签 ID

> ID：11944449
> 
> 赞同：5
> 
> 时间：2012-08-14T01:08:54.130
> 
> 标签：google-chrome-extension

如何在 chrome.tabs.create 之后获取新创建的选项卡 ID？如果同时创建多个选项卡会怎样？

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2018-08-18T09:41:21.457

`chrome.tabs.create`API 具有回调函数，该函数返回包含`object`新选项卡详细信息的

```
chrome.tabs.create({"url":url},function(newTab) {
console.log(newTab.id);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T05:10:48.590

好的，找到了解决方案

```
chrome.tabs.onCreated.addListener(function(tab){
    alert("new tab "+tab.id);
}); 
```

# javascript - 更改文本的 Webkit 呈现问题

> ID：11944453
> 
> 赞同：0
> 
> 时间：2012-08-14T01:09:14.647
> 
> 标签：javascript, css, webkit, hover, gradient

好的，所以我前一阵子问了一个问题，有人告诉我使用 CSS 来改变我的渐变，所以我做到了，而且它确实有效。这似乎是一个 webkit 渲染问题，我在聊天中询问，我们都有同样的问题，我的 safari 版本（版本 6.0 (8536.25) 和他的版本（版本 5.1.7 (6534.57.2)）

![网页渲染错误？](../Images/fe2de69f78a4976b47f51b0fc69a77fc.png)

这是我的jsfiddle代码；[http://jsfiddle.net/Fluffy977/ZauwA/](http://jsfiddle.net/Fluffy977/ZauwA/) | 没有文字样式和渐变：http: [//jsfiddle.net/Fluffy977/YXD5m/](http://jsfiddle.net/Fluffy977/YXD5m/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:46:19.227

看看这是否有效：http: [//jsfiddle.net/ZauwA/30/](http://jsfiddle.net/ZauwA/30/)

### 编辑

在您使用 Javascript 安顿好之后，使用这个很棒的工具来设计渐变：

[http://www.colorzilla.com/gradient-editor/](http://www.colorzilla.com/gradient-editor/)

### 编辑

关于[Jquery](http://jquery.com)的一点：

[Selectors](http://api.jquery.com/category/selectors/)：`$('#home, #home a')`让 Jquery 选择 2 种元素：一种 with`id=home`和一种 with 的`A`后代元素`id=home`。由于我使用了逗号，这使得更多的选择器被应用于文档。

然后我们有[事件处理程序](http://api.jquery.com/category/events/)： for`click`和。`mouseover``mouseout`

你可以看到每一个都被一个接一个地应用，这被称为[链接](http://tobiasahlin.com/blog/quick-guide-chaining-in-jquery/)。由于几乎每个 Jquery 方法都返回 Jquery 对象本身，这使得代码紧凑。

在每个事件处理程序中，我使用`css`函数将样式应用于元素，然后是`html`函数（与设置相同`innerHTML`）。

（以及所有收听此配乐的内容：D [http://www.youtube.com/watch?v=69xSV0oZYpE&feature=autoplay&list=UU-ilGJ5YU9bt4yA7lnYq9nw&playnext=2](http://www.youtube.com/watch?v=69xSV0oZYpE&feature=autoplay&list=UU-ilGJ5YU9bt4yA7lnYq9nw&playnext=2)）

# wcf - 发布 WCF 服务时回收应用程序池

> ID：11944454
> 
> 赞同：4
> 
> 时间：2012-08-14T01:09:24.193
> 
> 标签：wcf, iis, application-pool, webdeploy, one-click-web-publishing

我开发了一个 WCF Web 服务，其中包含对非托管 DLL 的依赖。当我尝试通过 Visual Studio 2010 的一键式 Web 部署将 Web 应用程序发布到正在运行的服务器（本地或远程）时，现有 bin 文件夹的删除失败，因为该非托管 DLL 仍由 IIS 加载到内存中，导致发布操作失败，除未删除的 DLL 外，Web 应用程序文件夹为空。如果我随后在服务器上手动回收 IIS 的应用程序池或重新启动 IIS，我就能够成功执行发布操作。

有没有办法在 Visual Studio 的发布操作开始时以某种方式自动执行应用程序池回收？服务器名称和 Web 应用程序名称根据不同的 Web 部署配置文件而有所不同，只是为了让事情变得有趣。

也欢迎其他建议。

到目前为止我遇到的一些相关链接：
[如何：使用一键发布和 Web 部署部署 Web 应用程序项目](http://msdn.microsoft.com/en-us/library/dd465337.aspx)
[在将 WCF 项目投入使用时是否需要回收应用程序池？](http://social.msdn.microsoft.com/Forums/en-US/tfsbuild/thread/13a25481-c887-4d1c-b594-e35b8e38268c)

# c++ - 使用 OPENMP 进行并行归并排序

> ID：11944457
> 
> 赞同：0
> 
> 时间：2012-08-14T01:09:43.460
> 
> 标签：c++, multithreading, visual-c++, parallel-processing, openmp

我编写了一个顺序合并排序程序，如下所示：

```
#include "stdafx.h"
#include "iostream"
#include "omp.h"
#include "fstream"
using namespace std;

int a[50];
void merge(int,int,int); 
void merge_sort(int low,int high)
{
int mid,newval;
double clock, clock1,clock2;
if(low<high)
 {
    mid=(low+high)/2;
    #pragma omp parallel shared(low,mid,high) num_threads(2)
    {
        //newval=omp_get_thread_num();
        //cout<<"thread: "<<newval<<endl;
        merge_sort(low,mid);
        clock=omp_get_wtime();
        //cout<<"Clock: "<<clock<<endl;
        merge_sort(mid+1,high);
        merge(low,mid,high);
        clock1=omp_get_wtime();
        //cout<<"Clock1: "<<clock<<endl;
        clock2=clock1-clock;
        cout<<"Clock2: "<<clock2<<endl;
    }       
    //cout<<"valud=%d"<<low<<endl; 
 }
 }
 void merge(int low,int mid,int high)
 {
 int h,i,j,b[50],k;
 h=low;
 i=low;
 j=mid+1;

 while((h<=mid)&&(j<=high))
 {
    if(a[h]<=a[j])
    {
        b[i]=a[h];
        h++;
    }
    else
    {
        b[i]=a[j];
        j++;
    }
    i++;
 }
 if(h>mid)
 {
    for(k=j;k<=high;k++)
    {
        b[i]=a[k];
        i++;
    }
 }
 else
 {
    for(k=h;k<=mid;k++)
    {
        b[i]=a[k];
        i++;
    }
 }
 for(k=low;k<=high;k++) a[k]=b[k];
    }

    void main()
    {
int num,i;
int clock_n,len;
FILE *fp;
char *buf;
char *newchat;//ifstream properfile;

cout<<"********************************************************************************"<<endl;
cout<<"                             MERGE SORT PROGRAM"<<endl;

cout<<"********************************************************************************"<<endl;
cout<<endl<<endl;
cout<<"Please Enter THE NUMBER OF ELEMENTS you want to sort [THEN PRESS ENTER]:"<<endl;
cout<<endl;
//cout<<"Now, Please Enter the ( "<< num <<" ) numbers (ELEMENTS) [THEN PRESS ENTER]:"<<endl;
//for(i=1;i<=num;i++)
//{
        fp=fopen("E:\\Study\\Semester 2\\Compsci 711- Parallel and distributed computing\\Assignment\\sample_10.txt","rb");
fseek(fp,0,SEEK_END); //go to end
len=ftell(fp); //get position at end (length)
cout<<"Length is %d"<<len<<endl;
//fseek(fp,0,SEEK_SET); //go to beg.
buf=(char *)malloc(len); //malloc buffer
newchat=buf;
fread(newchat,len,1,fp); //read into buffer
fclose(fp);
//cout<<"Read %c"<<newchat<<endl;

////cin>>num;

//}

    merge_sort(1,len);

cout<<endl;
cout<<"So, the sorted list (using MERGE SORT) will be :"<<endl;
cout<<endl<<endl;

for(i=1;i<=num;i++)
cout<<a[i]<<"   ";
cout<<endl<<endl<<endl<<endl;

  } 
```

现在我想并行化这段代码（C 中用于并行化的 API 是 OPENMP）。你能帮帮我吗？基本上我使用#pragma parallel num_thread(4) 但我不知道我是否应该包含其他任何内容以进行并行化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:57:29.173

合并排序算法的主要瓶颈是合并函数。它的复杂度是 O(n)。前几次合并操作的成本将主导整个应用程序的成本。对更大的数组使用优化的并行算法。

对于较小的数组（<20 个元素），请避开障碍。实际上我更喜欢顺序 O(n^2) 算法。

你不应该使用部分而不是 `#pragma omp parallel shared(low,mid,high) num_threads(2)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T13:10:30.693

如果在 128 整数 32 位下排序（这将非常适合 cpu 缓存），您应该进行二进制插入排序通常是最好的。

如果对较大的数字进行排序，以下论文将介绍如何进行并行合并排序。

[http://www1.chapman.edu/~radenski/research/papers/mergesort-pdpta11.pdf](http://www1.chapman.edu/~radenski/research/papers/mergesort-pdpta11.pdf)

本文涵盖了 OMP 和 MPI 上的并行拆分，它没有解释的是如何并行进行合并

[http://www.cc.gatech.edu/~ogreen3/_docs/Merge_Path_-_Parallel_Merging_Made_Simple.pdf](http://www.cc.gatech.edu/~ogreen3/_docs/Merge_Path_-_Parallel_Merging_Made_Simple.pdf)

本文解释了如何在并行中进行合并。尽管它的名字起初让我很困惑，但归结为这一点，当对两个已经排序的列表进行排序时，等级排序（正常的合并方法）要么下降（向上数组 A）或交叉（向上数组 B）在所谓的合并路径中合并矩阵。如果使用多个处理器，您可以通过使用对角线和二分搜索找到合并路径，将区域拆分并在任何点进行排名排序。

# google-chrome-extension - 使 Chrome 扩展弹出窗口透明

> ID：11944465
> 
> 赞同：6
> 
> 时间：2012-08-14T01:11:25.687
> 
> 标签：google-chrome-extension, popupwindow

我正在写一个 chrome 扩展。我想知道是否有办法使弹出窗口透明，即用户可以看到当前页面的内容，即使弹出窗口覆盖它。谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-08-05T17:43:58.257

昨天我想到了一个有趣的想法，虽然你不能去除白色背景，但你仍然可以**模仿**透明背景。

这将通过在打开弹出窗口之前截取页面并将其放置为弹出窗口的背景图像来完成。我不确定背景图像位置计算将如何进行，如果可能的话，请尝试一下。

当然，您仍然会有弹出窗口的白色边框和框阴影，但它应该看起来仍然相当不错。

请注意，如果弹出窗口后面有任何移动，则此技巧可能无法正常工作：

*   视频/音频播放器
*   图像滑块
*   广告横幅
*   自动更新新闻提要（社交媒体）
*   CSS 动画
*   所以...

使用`captureVisibleTab`后台脚本截取屏幕截图： [https ://developer.chrome.com/docs/extensions/reference/tabs/#method-captureVisibleTab](https://developer.chrome.com/docs/extensions/reference/tabs/#method-captureVisibleTab)

您将使用消息或存储将屏幕截图图像数据发送到弹出窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T18:51:10.067

似乎没有办法做到这一点。Chrome 默认为白色弹出背景，除非您在扩展程序中更改它。

不过，谷歌确实提到弹出窗口会根据其内容调整大小。 [http://developer.chrome.com/dev/extensions/browserAction.html#popups](http://developer.chrome.com/dev/extensions/browserAction.html#popups)

# php - Public 和 Fuel 文件夹在同一个子目录中，但 URL 中没有 public/

> ID：11944467
> 
> 赞同：1
> 
> 时间：2012-08-14T01:11:37.310
> 
> 标签：php, apache, .htaccess, fuelphp, fuelphp-routing

在一遍又一遍地阅读 Fuel PHP 的[安装说明](http://docs.fuelphp.com/installation/instructions.html#/install_inside_root)（我很喜欢）之后，我无法弄清楚如何在**没有显示 public/ 的 url**以及不从 docroot 中移动燃料文件夹的情况下使应用程序工作。（所以它都是自包含的）。

我的设置是这样的：

`/Users/AeroCross/Sites`（这是 MAMP 加载所有文件的地方，即 localhost） `/Users/AeroCross/Sites/projects/mariocuba`（这是 Fuel 应用程序的 webroot）

其中包含：

```
 mariocuba/
        .htaccess
        oil
        fuel/
            app/
            core/
            packages/
        public/
            .htaccess 
```

文件夹`.htaccess`里面：`mariocuba`

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteBase /public

RewriteRule ^(/)?$ index.php/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

`public`文件夹内的 .htaccess ：

```
<IfModule mod_rewrite.c>
RewriteEngine on

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^(.*)$ index.php/$1 [L] 
```

如果我尝试加载应用程序（/Users/AeroCross/Sites/projects/mariocuba/），则会出现此错误：

```
Not found.
The requested URL /public/index.php/ was not found on this server. 
```

我不知道在这里做什么。

我知道这不是为那样工作而设计的，而且我知道这是不安全的，但这是出于开发和版本控制的目的。我能做些什么（对文件系统进行最小的调整）来完成这项工作？

值得注意的是，我的`config.php`文件配置了 a`base_url = null`和`index_file = null`.

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T15:53:55.783

从 /mariocuba 中删除现有的 .htaccess 文件，将 /mariocuba/public 的内容（包括 .htaccess）移动到 /mariocuba，然后编辑 index.php。

改变：

```
/**
 * Path to the application directory.
 */
define('APPPATH', realpath(__DIR__.'/../fuel/app/').DIRECTORY_SEPARATOR);

/**
 * Path to the default packages directory.
 */
define('PKGPATH', realpath(__DIR__.'/../fuel/packages/').DIRECTORY_SEPARATOR);

/**
 * The path to the framework core.
 */
define('COREPATH', realpath(__DIR__.'/../fuel/core/').DIRECTORY_SEPARATOR); 
```

到：

```
/**
 * Path to the application directory.
 */
define('APPPATH', realpath(__DIR__.'/fuel/app/').DIRECTORY_SEPARATOR);

/**
 * Path to the default packages directory.
 */
define('PKGPATH', realpath(__DIR__.'/fuel/packages/').DIRECTORY_SEPARATOR);

/**
 * The path to the framework core.
 */
define('COREPATH', realpath(__DIR__.'/fuel/core/').DIRECTORY_SEPARATOR); 
```

这在此处的安装说明中有详细说明：http: [//docs.fuelphp.com/installation/instructions.html#/manual](http://docs.fuelphp.com/installation/instructions.html#/manual)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-16T18:29:27.167

在根目录中添加一个 .htaccess 文件并使用以下重写规则：

```
<IfModule mod_rewrite.c>
    RewriteEngine on

    RewriteBase /YOUR_LOCAL_PROJECT_FOLDER/public

    RewriteRule ^(/)?$ index.php/$1 [L]

    RewriteCond %{REQUEST_FILENAME} !-f
    RewriteCond %{REQUEST_FILENAME} !-d

    RewriteRule ^(.*)$ index.php/$1 [L]
</IfModule> 
```

**注意：**将 .htaccess 上传到主机后，您需要对其进行编辑（因为它无法动态计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T15:49:09.580

如果您想隐藏公用文件夹下的所有内容（我经常这样做），请将其用作根目录中的内容：

```
RewriteEngine on
RewriteRule ^(.*) public/$1 [L] 
```

这确保所有资源也被重定向到公共。所以所有不公开的东西都是绝对安全的。

# php - 下划线给出函数错误

> ID：11944477
> 
> 赞同：1
> 
> 时间：2012-08-14T01:13:30.310
> 
> 标签：php

我有一个运行以下行的 FOR：

```
 for ($x=1;$x<=10;$x++) 
    {
        $result=$question[$x]."<br /><b>Correct Answer: ".$question[$x]_answer."</b><br />";
        echo $resultado;
    } 
```

例如，如果我将**$question[$x]_answer 更改**为**$answer[x]**，一切正常。所以我的问题是，如果我在 [x] 后面加上下划线，为什么它不起作用。关于**[x]_answer**的部分。变量中有**[x]**后下划线是否有问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T01:15:32.597

`$question[$x]`指以 $x 为索引的数组。

IE：

```
$question[0] = "How old are you?";
$question[1] = "Male or Female?"; 
```

你拥有它的方式`$question[$x]_answer`不是一个有效的[变量](http://www.php.net/manual/en/language.variables.basics.php)，索引必须在最后。变量名中不能有 [ 或 ]。

`$question_answer[$x]`如果您有一系列答案，也许可以尝试将您的变量重命名为。

IE：

```
$question_answer[0] = "12";
$question_answer[1] = "Male"; 
```

或者，如果您已经使用索引硬命名变量，则可以使用[变量变量](http://php.net/manual/en/language.variables.variable.php)：即：

```
$question_0_answer = "12";
$question_1_answer = "Male" 
```

为此，您将使用：`$question_{$x}_answer`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T01:21:35.570

这是一个完全有效的问题。我看不出有任何反对票的理由。

这是您将使用的：`${$question[$x].'_answer'}`.

让我用一个例子来解释，

```
$a[1] = 'user';
$b = 1; 
```

所以，

```
$a[$b] == 'user'; //true 
```

而如果

```
$user_ans = 'success'; 
```

我们可以像这样使用

```
${$a[$b].'_ans'} == 'success'; //true 
```

正如@DavidHoude 在评论中指出的那样，这是一个 **[变量变量的例子](http://php.net/manual/en/language.variables.variable.php)**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:22:29.690

`_`在 php 中没有特殊含义，因此就像任何其他标准字符一样。您的逻辑与以下任何一个相同

```
$question[$x]Qanswer
$question[$x]Aanswer
etc... 
```

这些都不是有效的，因为变量不能使用`[`, `]`, or `$`（这些是特殊的）。

例如，您不能有类似`$my[var`or的变量`$my$var`。

因此`$question[$x]_answer`，要么看起来像 php 的单个变量，但其中包含无效标记（the `[$x]`），要么看起来像一个数组，`$question[$x]`附加了一些奇怪的东西（比如缺少空格或点）。

例如，

```
$question[$x] answer
$question[$x].answer 
```

看起来更有效的东西（最后一个可能是你想要的）。

# android - 无法使用我的设备运行我的应用程序

> ID：11944482
> 
> 赞同：0
> 
> 时间：2012-08-14T01:14:16.403
> 
> 标签：android, android-emulator, adb

我正在使用`Ubuntu 10.04`with`Eclipse`和 a `Galaxy SII`。

当我在模拟器上测试我的应用程序时，它可以工作，完全没有问题！所以我决定在我的设备上测试它，所以我按照以下步骤操作：http: [//developer.android.com/tools/device.html](http://developer.android.com/tools/device.html)。

我遇到了两个问题：

1）当我运行主应用程序时，我点击“用 Facebook 登录”它开始加载 Facebook 并退出应用程序。

2）其他应用程序甚至没有加载。我设置`Debuggable = true`了，但我无法在我的设备上运行它。它在控制台中说我必须重新启动 Eclipse 和 adb，所以我这样做了，就是这样。当我再次尝试时，它给了我同样的信息。如果我再次尝试而不重新启动它只会加载模拟器。

两者在模拟器中都可以正常工作。

有什么可以帮助我的想法吗？

提前致谢。

编辑：问题 1 已解决。在 Facebook 登录的模拟器上，它会在同一活动中弹出一个视图，在我的设备中，它会打开一个新活动以登录。所以问题出在代码中：

```
@Override
protected void onPause() {
    // TODO Auto-generated method stub
    super.onPause();
            finish();
} 
```

它正在完成我之前的活动，所以当它返回时，它已关闭。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:25:20.747

我认为你的应用程序被抛出了`null`价值。请对您的应用程序使用例外。因为当`null`将值分配给运行时，您的应用程序会自动终止。无论如何，在您可以运行应用程序之后，对您的应用程序使用异常。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:20:25.507

像我这样的 Window 用户需要一些特殊的应用程序来在设备上启用调试，你需要的 galaxies 和你需要`samsung kies`的 HTC `HTC sync`。

我不了解 Linux，但也许你需要像我们一样在 Windows 中使用这些应用程序

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T06:03:14.103

首先转到`android-sdk-linux/platform-tools/`文件夹并检查是否`adb`已授予*具有读写*访问权限的组的权限。

然后，

转到终端并像这样编写命令。

```
mayur@Mayur:~$ cd android-sdk-linux/platform-tools/
mayur@Mayur:~/android-sdk-linux/platform-tools$ sudo killall adb
[sudo] password for mayur: 
adb: no process found
mayur@Mayur:~/android-sdk-linux/platform-tools$ sudo ./adb usb
* daemon not running. starting it now on port 5037 *
* daemon started successfully * 
```

现在您的设备将可供设备使用，您可以运行您的应用程序。

* * *

对于 facebook 问题，您需要检查[此答案](https://stackoverflow.com/questions/4814699/downloaded-facebook-app-replaces-my-apps-facebook-login-page/7361024#7361024)。

# javascript - 骨干保存/获取 VS DAO？

> ID：11944484
> 
> 赞同：2
> 
> 时间：2012-08-14T01:14:45.810
> 
> 标签：javascript, backbone.js

只是想知道为什么在后端应用程序中我们使用 DAO 模式，而在具有像 Backbone 这样的框架的单页面应用程序中，我们在主干模型/集合上使用保存/获取功能。

我已经在使用 Play（Java/Scala）等框架的服务器端开发中看到了这一点，我认为 Rails 也是如此（？）。在我看来，这对于小型项目来说是一个很酷的功能，但并不真正适合大型应用程序。

我只是想知道为什么在搜索“backbone + dao”时，我发现的唯一用例是关于浏览器 localStorage 而不是访问远程数据。我是唯一一个认为复杂的主干应用程序应该使用 DAO 模式来访问远程数据的人吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T03:33:04.847

在数据访问方面，Backbone 在很大程度上模仿了 Ruby on Rails，它将 Active Record (AR) 模式直接烘焙到其中。这是大多数 Rails 开发人员的偏好，也是 Backbone 核心团队的偏好，但这并不是唯一有效的做事方式。

FWIW，我只在 10% 到 20% 的时间里使用 Backbone 的 AR 风格方法。在绝大多数情况下，我使用单独的 DAO 或命令模式样式的持久性，由[AmplifyJS](http://amplifyjs.com/api/request/)促进。

# c# - 为什么 FontWeights 在 DrawText/DrawingVisual 中不起作用？

> ID：11944485
> 
> 赞同：1
> 
> 时间：2012-08-14T01:14:50.823
> 
> 标签：c#, .net, wpf

我有一个 drawText 字段，并且我正在使用 FontWeights.Bold，如果我将其更改为 SemiBold、Medium 或 ExtraBold，它似乎没有什么区别。出于某种原因，每个粗体字的重量都相同。我的问题是normal weight太轻，bold weight太重，所以我想用SemiBold；但它不会产生差异。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:56:45.467

并非所有字体都是一样的。字体本身定义了什么样的“事物”（重量、宽度、坡度），WPF 会尽最大努力最接近您正在寻找的内容。

查看[**这份白皮书**](http://blogs.msdn.com/cfs-file.ashx/__key/communityserver-components-postattachments/00-02-24-90-36/WPF-Font-Selection-Model.pdf)，了解 WPF 使用的字体匹配/选择过程。它位于WPF 文本团队的开发人员[**Mikhail Leonov 的博客上。**](http://blogs.msdn.com/b/text/archive/2007/04/23/wpf-font-selection-model.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:29:42.317

你有没有试过这样的事情只是作为一个例子

```
 System.Drawing.Font newFont = new Font
 (
   "Verdana", 10f, System.Drawing.FontStyle.Bold, 
   System.Drawing.GraphicsUnit.Point, 178, false
 ); 
```

还希望看到您的一些示例代码，以确保我与您就您遇到的问题在同一页面上..

# java - 多播套接字 - 当计算机从睡眠中唤醒时将不起作用

> ID：11944486
> 
> 赞同：0
> 
> 时间：2012-08-14T01:14:51.903
> 
> 标签：java, multicast

大家好，我有一个正在接收数据包并且工作正常的多播套接字。

我遇到了一个问题，当我的计算机从睡眠中唤醒时，多播套接字不起作用。不断超时：

```
MulticastSocket socket;
\\initialise socket..
while (running) {
try {
    synchronized (syncRoot) {
        socket.setSoTimeout(WAIT_TIME);
        socket.receive(recv);
        //Do Something...
    }
} catch (SocketTimeoutException e) {
} 
```

目前，当我的计算机从 Windows 睡眠模式唤醒时，当我没有发送数据包时，它会不断抛出套接字异常。我已经检查了变量 socket.isBound()、socket.isClosed()、socket.isConnected() 并且它们在工作时没有改变。我错过了一个变量吗？即使套接字正在工作，它也会返回 isConnected() = false、isBound() = true、isClosed() = false。

如果我得到 10，我是否需要计算 SocketTimeoutExceptions 的数量，然后重新初始化我的多播套接字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T22:52:22.857

因此，当我的多播套接字发送和接收时，我决定在那里检查，如果您在 10 秒内没有收到刚刚发送的数据包，然后重新启动套接字连接。这工作得很好。

**更新答案：2012/09/06**

如您所说，EJB 没有连接，但是当 Windows 进入睡眠状态时，它会关闭网络适配器或其他东西（不是 100% 确定它在做什么，但套接字停止工作，但所有代码值都表示它们仍然处于活动状态）。但是当它从睡眠中启动时代码所做的是它认为它的多播套接字仍然是连接的，所以它很乐意继续监听但从来没有收到任何东西。事实上，它甚至很乐意在多套接字上发送数据而不会引发异常。

所以这个修复对每个人来说都不是完美的，但是当我在一个多套接字地址上发送和接收数据时，基本上如果我在 10 秒内没有收到我发送的数据包，我认为出现问题并重新启动连接。这是一段代码，可以解释我是如何做到的：

```
MulticastSocket socket;
\\initialise socket..
while (running) {
try {
    synchronized (syncRoot) {
    if (sendMessagesQueue.size() > 0) {
        lastOutBoundMessage = sendMessagesQueue.remove();
        byte[] msg = lastOutBoundMessage.toByte();
        DatagramPacket outboundPacket = new DatagramPacket(
            msg, msg.length, group,
            socket.getLocalPort());
        synchronized (syncRoot) {
            socket.send(outboundPacket);
            lastSentMessage = DateTime.now();
        }

        socket.setSoTimeout(WAIT_TIME);
        socket.receive(recv);

        // Compare lastOutBoundMessage  and recv
        // if same set values to null
        // lastSentMessage = null;
        // lastOutBoundMessage = null;
    }
} catch (SocketTimeoutException e) {
    if (lastSentMessage != null && lastSentMessage.plusSeconds(10).isBeforeNow()) {
        running = false;
        // restart thread so connection will start again.
    }
} 
```

# asp.net - 从 WCF 调用 asp.net 数据库函数的问题

> ID：11944491
> 
> 赞同：1
> 
> 时间：2012-08-14T01:15:46.620
> 
> 标签：asp.net, wcf

我在主 asp.net 项目中有数据库功能，刚刚创建了单独的 wcf 项目并尝试在 wcf 中调用数据库功能。下面的代码是 svc 中的一个函数

```
public string ValidateUser(string username, string pwd)
{
    myApplication application = new myApplication();
    string resultString = string.Empty;
    try
    {
        resultString = application.Application.User.GetUserIdByUserName(username, pwd).ToString();
    }
    catch(Exception e)
    { resultString = "exception:" + e.Message; }

    return resultString;
} 
```

数据库函数所做的是检查表（MSSQL）中是否存在用户名，如果存在，它将返回 userId。

我认为这将是直截了当的，但每次我调用这个函数时，我都会得到`nullException error`，我猜这是因为数据库函数在它符合时，它会从主项目中查找连接字符串，`web.config`但它存储**空**值。

我正在用两个 VS 打开本地测试这个；一个是带有 wcf 项目的主 asp.net 项目，另一个是用于控制台应用程序的 VS 来调用这个 wcf。
任何建议或建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:21:32.967

你能澄清一下哪个`.config`文件有数据库连接字符串吗？WCF 服务项目还是调用它的 ASP.NET 项目？在 WCF 服务中运行的代码将从 WCF 项目的`.config`文件中获取它的配置，如果连接字符串不存在，它将不会从调用者那里获取它。

# google-maps - 如何将自定义图标添加到谷歌地图 v3

> ID：11944492
> 
> 赞同：0
> 
> 时间：2012-08-14T01:16:03.353
> 
> 标签：google-maps, icons

我继承了下面的一些代码，一切正常。我的问题是如何向此地图添加自定义图标？我之前添加了一个，但我不知道我应该把代码放在哪里？

```
// initialize map
    var unitedKingdom = new google.maps.LatLng(55.378051, -3.435973);
    var options = {
        center: unitedKingdom,
        disableDefaultUI: true,
        mapTypeId: google.maps.MapTypeId.ROADMAP,
        zoom: 6
    };
    var map = new google.maps.Map(document.getElementById('map'), options);
    var infowindow = new google.maps.InfoWindow();
    var geocoder = new google.maps.Geocoder();

    // fetch and iterate over the winners
    var current = 0;
    $.getJSON('JSON_FILE.txt', function (winners) {
        var popup = setInterval(function () {
            (function (winner) {
                var newCenter;
                var location = winner.name.split(', '); // winner.location seems a bit unreliable (sometimes null)
                geocoder.geocode({ address: location[1], country: 'UK' }, function (results, status) {
                    if (status == google.maps.GeocoderStatus.OK) {
                        newCenter = results[0].geometry.location;
                        map.panTo(newCenter);
                        var contentStr = '<div class="infowindow">' + 
                                         '<p><strong>' + winner.name + '</strong> just won ' +
                                         '<strong>' + winner.displayAmount + '</strong> on ' + 
                                         '<strong>' + winner.game + '!</strong></p>' + 
                                         '</div>';
                        infowindow.setPosition(newCenter);
                        infowindow.setContent(contentStr);
                        infowindow.open(map);
                    }
                });
            })(winners[current]);
            // increment the current index, or reset it if we're on the last item
            current = (current < (winners.length-1)) ? (current+1) : 0;
        }, 3000)
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:10:57.103

请参阅[有关自定义图标的文档](https://developers.google.com/maps/documentation/javascript/overlays#ComplexIcons)，其中包含一个示例。

至于代码放在哪里，它需要在地理编码器的回调函数中，“newCenter”是您可能希望标记的位置。

在您的代码中：

```
geocoder.geocode({ address: location[1], country: 'UK' }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    newCenter = results[0].geometry.location;
                    map.panTo(newCenter);
                    var contentStr = '<div class="infowindow">' + 
                                     '<p><strong>' + winner.name + '</strong> just won ' +
                                     '<strong>' + winner.displayAmount + '</strong> on ' + 
                                     '<strong>' + winner.game + '!</strong></p>' + 
                                     '</div>';
                    infowindow.setPosition(newCenter);
                    infowindow.setContent(contentStr);
                    infowindow.open(map);
                }
            }); 
```

像这样添加自定义标记：

```
geocoder.geocode({ address: location[1], country: 'UK' }, function (results, status) {
                if (status == google.maps.GeocoderStatus.OK) {
                    newCenter = results[0].geometry.location;
                    map.panTo(newCenter);
                    var marker = new google.maps.marker({
                       map: map,
                       position: newCenter,
                       icon: customIcon,
                       shadow: customIconShadow,
                       shape: customIconShape
                    });

                    var contentStr = '<div class="infowindow">' + 
                                     '<p><strong>' + winner.name + '</strong> just won ' +
                                     '<strong>' + winner.displayAmount + '</strong> on ' + 
                                     '<strong>' + winner.game + '!</strong></p>' + 
                                     '</div>';
                    infowindow.setPosition(newCenter);
                    infowindow.setContent(contentStr);
                    infowindow.open(map);
                }
            }); 
```

根据自定义图标的需要定义 customIcon、customIconShadow 和 customIconShape。

# php - 从字符串中去除字符

> ID：11944493
> 
> 赞同：0
> 
> 时间：2012-08-14T01:16:05.443
> 
> 标签：php, wikipedia

我正在编写一个从 Wikipedia 获取数据的脚本。

一个常见的问题是例如我想获取：

北史翠柏岛

但是我们正在获取的字符串在下面，所以需要删除废话

```
[[North Stradbroke Island]]' 
```

当前的抓取代码是：

```
 $curl_handle=curl_init();
curl_setopt($curl_handle,CURLOPT_URL,"http://en.wikipedia.org/wiki/Special:Export/" . $wiki['suburb'] . ",_" . $wiki['state'] . "");
curl_setopt($curl_handle,CURLOPT_TIMEOUT,10);
curl_setopt($curl_handle,CURLOPT_USERAGENT,'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.13) Gecko/20080311 Firefox/2.0.0.13');
curl_setopt($curl_handle,CURLOPT_CONNECTTIMEOUT,10);
curl_setopt($curl_handle,CURLOPT_RETURNTRANSFER,1);
$xml = curl_exec($curl_handle);
curl_close($curl_handle);

$x = simplexml_load_string($xml);
$text   = $x->page->revision->text;

$arr = explode("| ", $text);

$wikipedia = array();
foreach($arr as $s){
    $pair   = preg_split('/= /', $s);
    $key    = substr($pair[0],0,strpos($pair[0]," "));
    switch($key){
        case "lga":
        case "pop":
        case "dist1":
            $wikipedia[$key] = substr($pair[1],0,-1);
            break;
        case "near-nw":
        case "near-n":
        case "near-ne":
        case "near-w":
        case "near-e":
        case "near-sw":
        case "near-s":
        case "near-se":
            $value = $pair[1];
            if($value != ""){
                $value =substr($pair[1],2,strpos($pair[1],",")-2);
            }
            $wikipedia[$key] = $value;
            break;
    }
} 
```

在我的页面上，我有：

```
 <?
    $wiki['suburb'] = str_replace(" ", "_", $r['suburb']);
    $wiki['state'] = convertStateWiki($r['state']);
    include("/path-to-wiki-file/wiki.suburb.php");
    if ($wikipedia != NULL){
?> 
```

并回显结果：（示例）

```
<a href="reviews/<?=strtolower($r['state']);?>/<?=strtolower(str_replace(" ", "-", $wikipedia['near-nw']));?>/"><?=$wikipedia['near-nw'];?></a> 
```

所以本质上是：我们使用 wikis 导出提要，一个郊区。那个郊区，可能已经被输入到维基百科中，比如：

**[['一些郊区名称]'] 例如**

我需要将以上内容返回为：**Some Suburb Name**

我们需要去除所有非 ALPHA 字符，我不是 100% 使用 php，所以如果这听起来很愚蠢，请随意说出来。但请不要投反对票，因为我提供了尽可能多的代码。

我只需要阻止返回的数据包含除字母字符以外的任何内容（必须允许空格）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:23:34.113

干得好：

```
<?php
$place = $wikipedia['near-nw'];
$place = trim($place, "[]'");
$href = str_replace(" ", "-", $place);
?>
<a href="reviews/<?=strtolower($r['state'] . "/" . $href);?>/"><?=$place;?></a> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T01:29:40.333

Wiki Markup 实际上有很好的文档记录。

`trim($str, "[]'")`但是，对于您的情况，应该做一个简单的事情:)

在你的情况下：

```
$wiki['suburb'] = str_replace(" ", "_", trim($r['suburb'], "[]'")); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T01:22:09.287

“需要删除废话”，废话称为Wiki Markup，它是机器可读的。这是解析器列表：[http ://www.mediawiki.org/wiki/Alternative_parsers](http://www.mediawiki.org/wiki/Alternative_parsers)

如果您将删除所有非字母数字字符，那么您最终会丢失大量信息。只需解析标记，然后以您喜欢的任何格式输出它。

# nginx - 使用通配符子域的 API 版本控制

> ID：11944494
> 
> 赞同：0
> 
> 时间：2012-08-14T01:16:14.077
> 
> 标签：nginx, wildcard-subdomain

我不想向 API 添加任何版本控制逻辑。如果我在 nginx.conf 中使用通配符子域和正则表达式来确定子域部分，我可以将请求路由到特定目录。这是配置：

```
server {

        listen 80;
        server_name .api.domain.com;

        set $version $host;

        if ($version ~ "^(.+).api.domain.com") {
                set $version $1;
        }

        access_log /var/log/nginx/$version-access.log;
        error_log /var/log/nginx/$version-error.log info;

        location / {
                root /opt/webapps/app_$version/www/;
                index index.php;
        }

} 
```

问题：这种技术有什么缺点吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:11:38.737

我找到了更好的方法 - 在 server_name 中命名捕获：

```
server {

  server_name ~^(?<version>.+).test$;
  root /your-path/$version.test;

} 
```

这种方法更好，因为：

1.  [如果是邪恶的](http://wiki.nginx.org/IfIsEvil)
2.  它更清洁

# java - 是否可以将 ArrayList 的值作为 Java Swing 中的工具提示进行迭代？

> ID：11944505
> 
> 赞同：0
> 
> 时间：2012-08-14T01:17:14.093
> 
> 标签：java, swing, data-structures

我有一个包含 10 个值的列表。我想在工具提示中迭代所有这些值。如何在 Swing 中执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T01:29:29.723

我的首选方式是使用 HTML。以下是实现所需内容并在一个工具提示中显示所有行的方法：

```
String toolTip = "<html>";
for(String line : arrayOfStrings)
{
  toolTip += line +"<br>";
}
toolTip += "</html>";
myComponent.setToolTipText(toolTip); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T01:31:06.560

```
List<String> strList;
//...
StringBuilder items = new StringBuilder();
for(String item : strList) {
    items.append(item + "\n");
}
//...
someJComponentObject.setToolTipText(items.toString()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:22:39.533

使用列表的内容构建一个字符串（您甚至可以使用 html 语法）并在组件上调用 setToolTipText() 方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T01:26:17.110

Apache 在他们的一个公用包中提供了一个实用程序，称为`StringUtils`. 您可以通过以下方式使用它：

```
final String itemsString = StringUtils.join(items.toArray()); 
```

然后`itemsString`可以在 Swing 控件的“工具提示”中显示。

`StringUtils`是[Commons Lang](https://commons.apache.org/lang/)的一部分，（请参阅[此处的文档](http://commons.apache.org/lang/api-2.5/org/apache/commons/lang/StringUtils.html)）。

如果您使用[Maven](https://maven.apache.org/)，则可以使用以下工件：

```
<dependency>
    <groupId>commons-lang</groupId>
    <artifactId>commons-lang</artifactId>
    <version>2.6</version>
</dependency> 
```

希望有帮助！

# ios - Facebook SDK 错误：未找到 FBSDKVersion-generated.h 文件

> ID：11944507
> 
> 赞同：1
> 
> 时间：2012-08-14T01:17:43.183
> 
> 标签：ios, facebook

我已经安装了 Facebook SDK，但是当我尝试构建时，它失败了，并且我从 FBRequestConnection.m 收到“找不到 FBSDKVersion-generated.h 文件”的错误。#import 行上方的注释说“// 注意：此文件由运行脚本构建步骤自动生成。” 但我在任何地方都找不到它的脚本。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:09:48.010

尝试更改此代码行

```
#import "FBSDKVersion-generated.h" 
```

到

```
#define FB_IOS_SDK_VERSION_STRING @"3.0.5.b" 
```

3.0.5.b - 此时的最后一个版本

# sql-server - 刚刚添加了一个新索引，我必须要 freeproccache 吗？

> ID：11944509
> 
> 赞同：0
> 
> 时间：2012-08-14T01:18:12.283
> 
> 标签：sql-server, sql-server-2008, tsql

全部，您是否必须在向系统添加索引后运行 dbcc freeproccache 以使优化器知道它？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:21:57.257

不，数据库引擎知道并会在您创建索引后立即构建和使用它。

您可以通过查看基于新索引选择记录的查询的查询计划来查看它的使用情况。

例如，如果索引是在 UserID 上创建的，则运行`SELECT * FROM Table Where UserID = 1;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T05:46:51.057

当您在任何表上创建索引时，将在数据库中的单独空间上创建 B-Tree 结构。当您使用创建索引的列执行查询时，优化器将自动使用 STATASTICS 中的该索引信息。

因此，创建索引后您无需执行任何操作。

但是，当由于不适当的 FILL FACTOR 导致页面拆分时，您将寻找索引重组或重建。

# javascript - 运行一个循环，然后重置并再次运行

> ID：11944510
> 
> 赞同：0
> 
> 时间：2012-08-14T01:18:20.940
> 
> 标签：javascript, loops, increment

我想将图像更改为图像“i”，直到图像用完，然后我想从头开始。

这是我需要做的

*   运行以下代码直到*i >= n*
*   然后将 i 重置为零

代码：

```
 function advanceSlide()
  {
    i++;
    currentIMG ='"image"+i';
    changeBG(currentIMG);
  } 
```

这是我到目前为止所拥有的，我只是在循环完成时休息*i感到困惑：*

```
 window.setInterval(function(){
    advanceSlide();
    }, 5000);

  function advanceSlide(){
    while (i<n){
      i++;
      currentIMG='"Image"+i';
      changeBG(currentIMG);
    }
  }; 
```

*这涵盖了当i < n*时我需要做什么，那么当*i****不小于*** *n*时我如何告诉它该做什么

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:26:52.017

使用全局`imgIndex`

```
imgIndex = 0;
noOfImages = 10;

function advanceSlide(){
  imgIndex++;
  if( imgIndex >= noOfImages ) { imgIndex = 0; }
  currentIMG = "Image" + imgIndex;
  changeBG(currentIMG);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T01:28:02.287

您不需要包装`advanceSlide`在函数中。您可以使用模数来重置我

```
window.setInterval(advanceSlide, 5000);
function advanceSlide(){    
    i = (i+1)%n;
    currentIMG="Image"+i;
    changeBG(currentIMG);   
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:27:31.737

下次请把你的问题说清楚。

```
int i = 0;
while (true){
        i++;
        if (i<n){
           currentIMG='"Image"+i';
           changeBG(currentIMG);
        }
        else
        {
           i = 0;
        }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T01:27:33.473

当 i >= n 时，它将简单地退出循环并继续执行您在 while() { } 之后放置的任何代码

使用您设置的间隔，那里不需要闭包，因为它只调用另一个函数，可以简化为`window.setInterval(advanceSlide, 5000);`

您也可以用 for 循环替换该 while 循环，因为您只是在增加索引

```
window.setInterval(advanceSlide, 5000);

function advanceSlide() {
    for(i = 0; i < n; i++) {
        // also here don't really need to store in a variable just pass straight in
        changeBG("Image" + i)
    }
} 
```

对于这个答案，我假设您的 Interval 是您想要调用函数的方式...这里的另一个答案显示使用 while(1) 循环和内部的另一个循环，以便在没有计时器的情况下一遍又一遍地循环**

# javascript - 悬停到网页框架时的边界图像预览

> ID：11944524
> 
> 赞同：0
> 
> 时间：2012-08-14T01:21:23.247
> 
> 标签：javascript, jquery, html, css, web

我已经设法使用[它](http://cssglobe.com/easiest-tooltip-and-image-preview-using-jquery/)在悬停时进行图像预览，但是当我移动鼠标时，预览会随之移动并逃脱网页的边界“隐藏其中的一些”，有没有办法将其绑定为仅在网页就像 facebook 的照片缩放插件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:35:55.537

我已经使用上面 Fiddle 中的代码创建了一个新的 Fiddle，其中包含一些工作代码，这些代码使用的逻辑与 Facebook Photo Zoom 插件似乎正在使用的逻辑相似。当光标移动到图像的顶部时，预览图像的顶部被设置为位于页面的顶部，一旦将光标移动到图像上的某个点下方，预览图像就会开始向下移动页面用它。

您还需要考虑其他因素，包括如果用户在显示预览图像时将鼠标光标快速移动到预览图像的顶部，则会导致预览被删除。我确信解决此问题的方法应该不会太难弄清楚，并且可能只需要在删除预览图像或在删除预览图像之前检查鼠标光标的当前位置时进行某种延迟。

在此处查看实际代码：http: [//jsfiddle.net/f7rJB/2/](http://jsfiddle.net/f7rJB/2/)

请注意，此代码只是为了显示预览图像被阻止离开页面边界并显示预览随着光标移动而向下移动，并不意味着是一个完整的解决方案。

jQuery 有一些关于在页面上查找鼠标位置的好文档：http://docs.jquery.com/Tutorials: [Mouse_Position](http://docs.jquery.com/Tutorials:Mouse_Position)

# spring - 如何在 Hibernate 中将 CLOB 数据类型转换为字符串？

> ID：11944530
> 
> 赞同：7
> 
> 时间：2012-08-14T01:21:57.380
> 
> 标签：spring, hibernate, oracle10g, clob

在hibernate（3.2.1.GA）中，我使用以下方法将CLOB类型的数据插入到Oracle（10g）数据库中。

```
Hibernate.createClob(parameters.get("txtCatImage")); 
```

`parameters`是一个`Map`存储所有请求参数的地方。虽然`Clob`直接从数据库中检索数据类型，但这样的事情是`entityObj.getCatImage()`行不通的。

看到[这个](https://stackoverflow.com/q/1644559/1391249)和[这个](https://stackoverflow.com/q/2278445/1391249)问题，但找不到方法。

以下是使用`Clob`类型属性的实体。

```
public class Category  implements java.io.Serializable {

    private Long catId; // Primary key.
    private Clob catImage; // CLOB type field.
    // Other fields.
    private static final long serialVersionUID = 1L;

    public Category() {}

    // Overloaded constructs + getters + setters + hashcode() + equals() + toString().
} 
```

[`Clob`在这种情况下，数据库中的字段只存储一个图像文件名。]

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T02:29:33.233

使用适当的参数调用[`Clob.getSubString(long, int)`](http://docs.oracle.com/javase/7/docs/api/java/sql/Clob.html#getSubString%28long,%20int%29)以获得所需的参数，或者使用或`String`将 Clob 作为 InputStream 或 Reader 读取。[`Clob.getAsciiStream()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Clob.html#getAsciiStream%28%29)[`Clob.getCharacterStream()`](http://docs.oracle.com/javase/7/docs/api/java/sql/Clob.html#getCharacterStream%28%29)

如果 Clob 的字符数少于 2147483647（又名`Integer.MAX_VALUE`），您可以这样做

```
Clob clob = ... //Your clob
String clobString = clob.getSubString(0, clob.length()); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-10-20T12:14:56.640

Dev（见上文）使用“Clob.getSubString(long, int)”的解决方案将消耗大量内存。我更喜欢以下解决方案。

```
private static String getAsString(Clob clob) {
    Reader reader = null;
    BufferedReader bufferedReader = null;
    try {
        reader = clob.getCharacterStream();
        bufferedReader = new BufferedReader(reader);
        return IOUtils.toString(bufferedReader);

    } catch (Exception e) {
        throw new RuntimeException("Error while reading String from CLOB", e);
    } finally {
        IOUtils.closeQuietly(reader);
        IOUtils.closeQuietly(bufferedReader);
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-10T07:36:15.553

这可能有效

```
new BufferedReader(new InputStreamReader(catImage.getAsciiStream())).readLine() 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-04-09T09:10:39.383

正如亚历克斯所说， clob.getSubString(0, clob.length()) 也会消耗内存和糟糕的性能。我遇到了同样的问题，我正在从数据库中获取一个巨大长度的 varchar2(2000-4000 ) 数据字段。由于这个 varchar 字段，性能下降到 1 分 20 秒。从数据库到实体类的获取速度很快，但是从实体复制到 SO 对象（或 POJO）需要大量时间。

我正在使用 JPA 获取数据库数据。我保存为字符串的实体字段。在 SO Object(POJO) 中，我将该字段类型设置为 CLOB 数据类型。

从 DB 获取数据后，数据在 Entity 对象中可用。复制到 SO 对象（CLOB 类型），

```
SOobject.setLongStringField( new SerialClob(entityString.toCharArray()));//Converting String to CLOB 
```

在 UI 级别，我的 SOobject，而不是普通的 getter setter 方法，我使用如下（Alex 的代码）

```
public String getLongStringField() {
         Reader reader = null;
            BufferedReader bufferedReader = null;
            try {
                reader = longStringField.getCharacterStream();
                bufferedReader = new BufferedReader(reader);
                return IOUtils.toString(bufferedReader);

            } catch (Exception e) {

                throw new RuntimeException("Error while reading String from CLOB", e);
            } finally {
                IOUtils.closeQuietly(reader);
                IOUtils.closeQuietly(bufferedReader);
            }
    }

    public void setLongStringField(Clob longStringField) {
        this.longStringField= longStringField;
    } 
```

希望这可以帮助！！！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-10-18T15:20:07.557

您可以使用它来阅读所有内容：

```
new BufferedReader(new InputStreamReader(clob.getAsciiStream())).lines().collect(Collectors.joining()); 
```

# timeout - 如何处理超时错误？

> ID：11944533
> 
> 赞同：1
> 
> 时间：2012-08-14T01:22:18.050
> 
> 标签：timeout, wso2, endpoint, wso2carbon

我有服务。如果端点不能在 30 秒内响应。我将丢弃消息。我将它设置在端点中，但没有用，有人告诉我这是一个错误。所以我想用一个错误序列来处理这个问题。但还是失败了。任何人都可以告诉我如何做到这一点？

```
If the endpoint can not response in 30 seconds, then execute EndpointError sequence.
Best regards.

<proxy xmlns="http://ws.apache.org/ns/synapse" name="EndpointTest" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence onError="EndpointError">
         <log level="full" />
      </inSequence>
      <outSequence onError="EndpointError">
         <log level="full" />
         <send />
      </outSequence>
      <endpoint>
         <address uri="http://172.21.11.158:48280/portalAgent/services/receiveMsg" format="pox">
            <timeout>
               <duration>3000</duration>
               <responseAction>discard</responseAction>
            </timeout>
         </address>
      </endpoint>
   </target>
</proxy> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-23T19:47:09.007

持续时间参数以毫秒为单位，您正在配置 3000，因此它总是会暂停。如果你想控制暂停的错误，你必须像这样在目标部分中控制。

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="EndpointTest" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
<target faultSequence="EndpointError">
    <inSequence onError="EndpointError">
        <log level="full" />
    </inSequence>
    <outSequence onError="EndpointError">
       <log level="full" />
        <send />
    </outSequence>
    <endpoint>
        <address uri="http://172.21.11.158:48280/portalAgent/services/receiveMsg" format="pox">
            <timeout>
                <duration>30000</duration>
                <responseAction>discard</responseAction>
            </timeout>
        </address>
    </endpoint>
</target> 
```

# bash - 将命令输出保存到 bash-history

> ID：11944534
> 
> 赞同：4
> 
> 时间：2012-08-14T01:22:26.693
> 
> 标签：bash

有谁知道破解 bash 以拦截并保存它执行的每个命令的输出的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T18:40:47.797

您可以使用带有开关的 GNU`screen`实用程序（[http://www.gnu.org/software/screen/](http://www.gnu.org/software/screen/)）`-L`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T18:19:03.290

我考虑了一下，以最简单的形式，你有这个：

```
$ cat clone 
#! /bin/bash
bash -i |tee >(cat >>/tmp/bash.log.$$)
# $ vim clone 
# Vim: Warning: Output is not to a terminal

$ ./clone  
$ du -sb /tmp/bash.log.9609 
29  /tmp/bash.log.9609
109 /tmp/bash.log.9609
161 /tmp/bash.log.9609
213 /tmp/bash.log.9609 
```

# linq - Linq - 连接表并填充单个对象

> ID：11944538
> 
> 赞同：0
> 
> 时间：2012-08-14T01:22:42.760
> 
> 标签：linq, entity-framework

我有一个处理“产品”的项目。产品有许多不同的属性，都存储在产品表中。由于性能问题，有一个名为“reputation”的表，用于存储有关产品声誉的信息。

“产品”类具有用于不同属性的许多属性和用于信誉信息的属性。

我想使用 linq 使用连接查询数据库。

问题是：我怎么说“来自产品表的所有内容都应该填充产品类中的相应属性，而声誉信息应该填充“声誉”属性”？

我有这个代码，我觉得我很近，但我还没有管理它......

```
var product = (from product in product.Table
                     join reputation in reputation.Table 
on product.ProductId equals reputation.ProductId
                     select new Product { Reputation = reputation
                     }).SingleOrDefault(); 
```

我在哪里设置其他属性？类似“产品 = 产品。*”

谢谢！

编辑：产品类包含信誉信息，它在数据库中因性能问题而分开

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:41:58.667

*   您不能选择新产品，因为您有额外的字段，即声誉并且它不在产品类中（我假设）。

*   请注意，如果您有多个结果，SingleOrDefault() 将引发异常，因此在这种情况下我看不到任何使用该结果的意义。

*   而不是选择新产品，您可以选择新的{您需要填充的所有文件=相应的值}您需要明确写下您需要的所有内容，您不能使用类似产品的东西。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T23:15:47.327

据我研究，这是不可能的，但另一种解决方案是批量选择，首先搜索产品，然后搜索声誉，然后手动合并它们，如下所示：

[http://tonesdotnetblog.wordpress.com/2008/07/23/linq-to-sql-batches-and-multiple-results-without-stored-procedures-by-tony-wright/](http://tonesdotnetblog.wordpress.com/2008/07/23/linq-to-sql-batches-and-multiple-results-without-stored-procedures-by-tony-wright/)

# android - Android 禁用 android 的自动完成功能：inputType="number"

> ID：11944539
> 
> 赞同：1
> 
> 时间：2012-08-14T01:23:09.370
> 
> 标签：android

是否`android:inputType="number"`在任何情况下都启用自动完成功能（某些键盘类型）？
明确禁用数字字段自动完成的方法是什么？问题`number|textNosuggestions`是，它没有提供纯数字键盘。

# c - Perl 是否安装在所有 Unix 机器上？

> ID：11944542
> 
> 赞同：0
> 
> 时间：2012-08-14T01:24:13.043
> 
> 标签：c, perl

我想知道 Perl 是否默认安装在所有基于 Unix 的操作系统上。由于我想编写服务器端程序，我需要在 Perl 和 C 之间进行选择。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:22:06.127

我不确定 Perl 是否是所有 Unix 服务器安装的标准。我什至不确定这意味着什么——服务器是一块硬件，它不需要附带*任何*特定的软件（甚至不是操作系统）。

无论如何，我认为这不应该是决定因素。您可以随时编译 Perl，或将 Perl 与您的程序一起分发。为您的项目选择语言的因素是：

1) 哪些语言可以很好地映射到领域？将 C 用于文本处理程序将是一个错误，这就是 Perl 和 Python 大放异彩的地方（也许 Ruby 也是如此？）。将 Perl 用于硬实时嵌入式应用程序可能是一个错误。

2）团队中的人有什么经验？

3) 您（或您的公司）希望发展哪些技能？如果从长远来看这会给您或您的公司带来优势，那么使用新语言可能是可以的。最好的例子是爱立信转向 Erlang。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T01:51:25.767

大多数 linux 发行版都默认包含它。然而，几个月前我们得到了一堆运行 AIX 7.1 的 AIX 机器，但它们都没有安装 perl。

非常非常广泛的答案是否定的，您不能假设您购买的每个 Linux 或 Unix 系统都安装了 Perl。

# jquery - Jquery UI 设置器错误

> ID：11944552
> 
> 赞同：0
> 
> 时间：2012-08-14T01:26:26.250
> 
> 标签：jquery, jquery-ui

我有一个像这样的 Jquery - UI 滑块

HTML

```
<div id="slider1" class="slider"></div> 
```

我正在尝试使用 UI 设置器值设置滑块值

```
var value = data.listing.price;   // Setting slider value

    var slide = document.getElementById("slider1");
    slide.slider( "value" , value ); 
```

在 Chrome 上我收到以下错误

Uncaught TypeError: Object # has no method 'slider'

我不确定错误是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:29:45.280

`slide`确实没有`slider`方法，因为`.slider`它是 jQuery-ui 的一部分。而且您还没有创建任何 jquery 对象。

改变：

```
var slide = document.getElementById("slider1"); 
```

到：

```
var slide = $("#slider1"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T01:30:28.067

你使用 DOM 对象而不是 jquery 对象，试试这个`$(slide).slider( "value" , value );`

# ios - ios中使用monotouch的自动完成选项的自定义列表

> ID：11944553
> 
> 赞同：7
> 
> 时间：2012-08-14T01:26:28.513
> 
> 标签：ios, autocomplete, xamarin.ios, autocorrect

我希望能够为在 monotouch 创建的 ios 应用程序中的文本输入提供我自己的可用自动更正/自动完成选项列表。

单词列表通过网络服务更新。完成搜索时，可以在 Ebay 应用程序中看到此类功能的示例。

实现这一目标的最佳方法是什么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T03:58:11.563

您应该能够适应这个 Objective-C 解决方案：[http ://www.raywenderlich.com/336/how-to-auto-complete-with-custom-values](http://www.raywenderlich.com/336/how-to-auto-complete-with-custom-values)

# c++ - _set_se_translator 的“get”等价物？

> ID：11944558
> 
> 赞同：2
> 
> 时间：2012-08-14T01:27:09.833
> 
> 标签：c++, winapi, visual-c++, seh, structured-exception

我需要使用当前的翻译器手动翻译结构化异常。

我如何“获得”某人设定的价值`_set_se_translator`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T01:27:09.833

### 更好（新）的方式

起初我没有意识到这一点，但 SE 翻译器是**线程本地的**，*而不是*进程范围的。

所以这实际上是最好的（也是最简单的）解决方案：

```
_se_translator_function _get_se_translator(void) {
    _se_translator_function translator = _set_se_translator(NULL);  // temporary
    _set_se_translator(translator);  // Restore the old value
    return translator;
} 
```

### 哈克（旧）方式

没有直接的方法可以做到这一点，但如果您要冒一些不兼容的风险并深入研究 Visual C 运行时的内部结构，您可以编写如下解决方案：

```
_se_translator_function __cdecl _get_se_translator(void) {
    unsigned char const *p = (unsigned char const *)(&__uncaught_exception);
    struct _tiddata {
        unsigned long _tid;
        void *_thandle;
        int _terrno; unsigned long _tdoserrno;
        unsigned int _fpds;
        unsigned long _holdrand;
        char *_token; wchar_t *_wtoken;
        unsigned char *_mtoken;
        char *_errmsg; wchar_t *_werrmsg;
        char *_namebuf0; wchar_t *_wnamebuf0;
        char *_namebuf1; wchar_t *_wnamebuf1;
        char *_asctimebuf; wchar_t *_wasctimebuf;
        void *_gmtimebuf;
        char *_cvtbuf;
        unsigned char _con_ch_buf[5];
        unsigned short _ch_buf_used;
        void *_initaddr; void *_initarg;
        void *_pxcptacttab;
        void *_tpxcptinfoptrs;
        int _tfpecode;
        void *ptmbcinfo; void *ptlocinfo;
        int _ownlocale;
        unsigned long _NLG_dwCode;
        void *_terminate; void *_unexpected;
        _se_translator_function _translator;
    };
    if (p[0] == 0x48) /* sub RSP, 0x28 */ { p += 4; }  // x64 only
    if (p[0] == 0xE8) /* call _getpid */ { ++p; }  // must be true
    void const *_getptd = p + *(long *)p + sizeof(long);
    return ((struct _tiddata *(__cdecl *)(void))_getptd)()->_translator;
} 
```

# compiler-construction - 应该将哪些标志应用于编译的哪个阶段？

> ID：11944563
> 
> 赞同：0
> 
> 时间：2012-08-14T01:27:34.353
> 
> 标签：compiler-construction, g++, flags

我想确保我正确理解了 g++ 文档。

通过 G++ 处理 C/C++ 程序时，我们通常会进行预处理、编译、汇编和链接。

根据您是构建代码的调试版本还是发布版本，您可以选择将不同的标志应用于最终产品。

以国旗`-O3`为例。这个标志应该应用到哪个阶段？我认为这应该在编译期间生成 .o 文件时应用。（**这是在某个地方的文档中吗？**）

如果是这样，如果想要生成 2 个版本的程序，一个用于发布，一个用于调试，.o 应该作为 make 文件的一部分单独生成（**这是正确的吗？）**

**一般来说，G++ 的帮助非常广泛，如何找出给定标志应该应用于进程的哪个部分？**

当我们谈论优化时，我们是在谈论目标代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:44:43.007

> 以标志 -O3 为例。这个标志应该应用到哪个阶段？

汇编。

> 如果想要生成 2 个版本的程序，一个用于发布，一个用于调试，.o 应该作为 make 文件的一部分单独生成

是的。

预处理也可能会受到影响，例如通过宏的定义，例如`NDEBUG`or`_GLIBCXX_DEBUG`但无论如何单独进行预处理并不常见：大多数 makefile 调用编译器将源文件直接转换为目标文件，因此编译器执行预处理、编译和汇编一步。

> 一般来说，G++ 的帮助非常广泛，如何找出给定标志应该应用于进程的哪个部分？

RTFM，当然！

[选项摘要](http://gcc.gnu.org/onlinedocs/gcc/Option-Summary.html)列出了所有选项，并将它们分组为多个部分。

很明显，这些选项控制特定阶段：

[控制预处理器的选项 将选项](http://gcc.gnu.org/onlinedocs/gcc/Preprocessor-Options.html)
[传递给汇编器](http://gcc.gnu.org/onlinedocs/gcc/Assembler-Options.html)
[链接选项](http://gcc.gnu.org/onlinedocs/gcc/Link-Options.html)

还有[用于目录搜索的选项](http://gcc.gnu.org/onlinedocs/gcc/Directory-Options.html)，其中头文件搜索路径由预处理器使用，库搜索路径由链接器使用。

通常所有其他选项控制编译，或应用于所有阶段（例如`-o`设置输出文件名）或指定

> 当我们谈论优化时，我们是在谈论目标代码吗？

是的。

GNU 链接器还有一个`-O`标志，请参阅[ld 手册](http://sourceware.org/binutils/docs-2.22/ld/Options.html#index-generating-optimized-output-82)，但目前仅在链接 ELF 共享库时才有效，除非您明确请求，否则 GCC 不会使用它，例如通过`-Wl,-O`

# javascript - 在哪里可以找到有关 JavaScript 术语的更多信息？

> ID：11944565
> 
> 赞同：0
> 
> 时间：2012-08-14T01:27:45.323
> 
> 标签：javascript, terminology

我最近开始在 Codecademy 上学习 JavaScript，我想知道在哪里可以找到有关它的更多信息。我真的对一些正在使用的术语感到困惑，例如“元素”、“通过函数传递某些东西”等。我可以去一个网站来解释这些术语吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:31:06.467

可能最好只问您在这里遇到的任何具体问题。

An`element`通常是一个 DOM 元素，它是对网页中特定对象的引用，例如按钮、div、textarea 等...您使用元素引用来获取或设置 DOM 元素的属性，调用方法在它上面或注册回调以进行事件处理。

“通过函数传递一些东西”对我来说听起来像“将一些东西传递给一个函数”，它指的是把一个参数传递给一个函数，如下所示：

```
draw("rect", 0, 0, 100, 50); 
```

其中括号中的五项是传递给函数的参数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:41:02.553

我可能会拿起 O'Reilly 参考书，阅读所有基础知识，包括一些你一开始就无法理解的东西（没关系 - 只是偶尔让自己接触它）。

传递是你对参数或参数所做的事情，就像你传递给函数的东西一样。元素可以是 DOM 的东西，但它也是分配给数组索引的内存位置的常用词。例如，数组的第一个“元素”是`myArray[0]`

在网上，我不推荐 W3Schools 来学习更高级的 JS 内容，但是当您忘记常见 JS 内容的细节并且没有多少地方可以在一个地方找到所有基础知识时，这不是一个糟糕的参考。

mozilla 开发人员的网络 MDN 可能更详细，并且通常具有更好/更新/完整的信息，但在组织方面有点混乱。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:45:12.707

您应该首先彻底搜索该术语以搜索定义和/或解释。如果您什么也找不到，请随时在此处提问。以下是您定义的术语：

**元素：**我假设当您说“元素”时，您指的是数组元素。基本上，这些是数组包含的各个值。这是一个由三个元素组成的数组：

```
var arr = ["array element 1", "array element 2", "array element3"]; 
```

要访问数组元素，可以使用`arr[i]`,`i`作为元素的索引。请注意，数组是零索引的：

```
arr[1]; // return "array element 2" 
```

**通过函数传递一些东西：**我相信你正在寻找的术语是参数。参数是传递给函数的值。以下函数采用三个参数：`val1`、`val2`和`val3`。

```
function logValues(val1, val2, val3) {
    console.log(val1 + val2 + val3);
} 
```

您可以在函数名称后面的括号内指定函数可以接收的参数。要使用提供的参数调用函数，请在调用行中包含逗号分隔的参数。例如：

```
logValues("bob", " ", "the plumber"); // logs "bob the plumber" 
```

# php - Symfony 2 '您的会话已超时，或者您已禁用 cookie。

> ID：11944566
> 
> 赞同：1
> 
> 时间：2012-08-14T01:27:51.710
> 
> 标签：php, symfony

我正在尝试使用 Symfony 2 安全组件，但我遇到了 IE9 问题。它适用于任何其他浏览器，我觉得这很奇怪。Symfony 版本 2.0.16。

控制器就像“书中”。我有一个用于登录表单的自定义模板文件，使用文档中的模板文件没有帮助。还制作了自定义路由路径，但在安全配置文件中指定了它们。这是安全配置文件，我在那里做了一些更改，但我认为一切正常......

```
security:
    encoders:
        Acme\MyBundle\Entity\User:
            algorithm:        sha1
            encode_as_base64: true
            iterations:       5

    role_hierarchy:
        ROLE_CLIENT: ROLE_USER
        ROLE_MANAGER: ROLE_USER
        ROLE_ADMIN: [ROLE_USER, ROLE_MANAGER, ROLE_ALLOWED_TO_SWITCH]

    providers:
        main:
            entity: { class: Acme\MyBundle\Entity\User, property: email }

    firewalls:
        dev:
            pattern:  ^/(_(profiler|wdt)|css|images|js)/
            security: false
        dev_custom:
            pattern:  ^/createUser
            security: false
        login:
            pattern:  ^/(login-custom|remind-pass)$
            security: false
        secured_area:
            pattern:    ^/
            form_login:
                login_path: /login-custom
                check_path: /login-check-custom
            logout:
                path:   /logout-custom
                target: /

    access_control:
        - { path: ^/, roles: ROLE_USER } 
```

在 IE9 中提交表单后，我只是被重定向回表单，而不验证数据。在日志文件中我发现：

[2012-08-14 02:51:00] security.INFO：身份验证请求失败：您的会话已超时，或者您已禁用 cookie。[] [] [2012-08-14 02:51:00] security.DEBUG: 重定向到 /login[] []

当然，我启用了 cookie。

在 ie 控制台中有一个警告“HTML1113 goin to quirks mode”。我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-18T13:40:01.947

我在这里找到了答案： [即复杂的子域cookie问题](https://stackoverflow.com/questions/1944953/ie-complicated-subdomain-cookie-problem)

简而言之：即当子域包含“undesrcore”时，静默丢弃cookie。我以为我错误地配置了安全组件或模板或标题有问题，但事实并非如此。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-26T05:54:39.353

下面是我在一个项目中设置的配置，该项目在本地环境中的 Chrome/Firefox/Safari 中运行良好，但在 Internet Explorer 中运行良好。

我可以看到使用提琴手，Internet Explorer 没有在浏览器中保留会话 cookie。

在生产环境中一切正常。

我意识到删除或设置为 0 的值：

**cookie_lifetime: 86400 # 一天，cookie 生命周期**

**gc_maxlifetime: 1800 # 30 分钟，会话生命周期**

允许登录，所以我设置了这个conf。对于开发环境。

我的 config.yml 中有以下配置

```
framework:
    session:
        handler_id: session.handler.pdo
        name: sessid
        **cookie_lifetime: 86400 # One day, cookie lifetime
        gc_maxlifetime: 1800 # 30 minutes, session lifetime**
        lifetime: 84600
        gc_probability: 5
        gc_divisor: 100 
```

其中 handler_id 设置为管理 mysql 表中的会话。my_db_options: #这是一个会话存储表（有关更多信息，请参见 symfony2 文档）

```
pdo.db_options:
    db_table:    sessions
    db_id_col:   ses_id
    db_data_col: ses_data
    db_time_col: ses_time
    db_lifetime_col: ses_lifetime 
```

服务.yml

```
session.handler.pdo:
    class:     Symfony\Component\HttpFoundation\Session\Storage\Handler\LegacyPdoSessionHandler #PdoSessionHandler (prev to versión 2.6.2)
    arguments: ["@session.database", "%pdo.db_options%"] 
```

希望这对您的 symfony 设置有所帮助或为您提供线索。

# android - 等待接收短信时显示进度对话框

> ID：11944567
> 
> 赞同：0
> 
> 时间：2012-08-14T01:27:53.067
> 
> 标签：android, sms, progressdialog

我想编写一个应用程序以在等待接收短信时显示进度对话框。接收短信时，非空的 TextView smsReceive 作为关闭进度对话框的条件。但它得到runtimeException。你能告诉我在代码中要改变什么吗？

```
package cx.opseng.PerfTOLD;

import android.app.Activity;
import android.app.ProgressDialog;
import android.os.Bundle;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.telephony.SmsManager;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.TextView;

public class Sms extends Activity {
/** Called when the activity is first created. */

static TextView smsReceive;
static TextView smsReceiveChar;

@Override
protected void onCreate(Bundle savedInstanceState) 
{       
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sms);

    Intent i = getIntent();
    // Receiving the Data
    String reg = i.getStringExtra("reg");
    String port = i.getStringExtra("port");

    String smsMessage = reg + port ;

    // Show SMS sent message on screen 
    TextView smsSend = (TextView) findViewById(R.id.smsSend);
    smsSend.setText(smsMessage);
    Log.i("smsSend",String.valueOf(smsSend.getText()));
    // Send SMS message
    SmsManager sm = SmsManager.getDefault();
    String number = "5556";
    sm.sendTextMessage(number, null, smsMessage, null, null);

    ProgressDialog dialog = new ProgressDialog(Sms.this);
    dialog.setMessage("working hard......");
    dialog.setIndeterminate(true);
    dialog.setCancelable(true);
    dialog.show();

    // Receive SMS message
    smsReceive = null;
    smsReceive = (TextView) findViewById(R.id.smsReceive);
    Log.i("smsReceive",smsReceive.getText().toString());
    if (smsReceive.getText().toString() != null) {
        Log.i("smsReceive",smsReceive.getText().toString());
        String smsChar = smsReceive.getText().toString();
        Integer smsChar2 = smsChar.length();
        String smsChar3 = Integer.toString(smsChar2);
        Log.i("smsReceive2",smsChar3);
        smsReceiveChar.setText(smsChar);
        smsReceiveChar = (TextView) findViewById(R.id.smsReceiveChar);
    }

    if (smsReceiveChar.getText().toString() .equals("Message")) {
        dialog.dismiss();
    }

}
public static void updateMessageBox(String msg)
{
    smsReceive.append(msg);
    smsReceiveChar.append(msg);
} 
```

}

```
public class SmsReceiver extends BroadcastReceiver{

public void onReceive(Context context, Intent intent)
{
    Bundle bundle=intent.getExtras();

    Object[] messages=(Object[])bundle.get("pdus");
    SmsMessage[] sms = new SmsMessage[messages.length];

    for(int n=0;n<messages.length;n++){
        sms[n]=SmsMessage.createFromPdu((byte[]) messages[n]);
    }

    for(SmsMessage msg:sms){
        String num = msg.getOriginatingAddress();
        Log.i("SMS sender",num);
        if (num.equals("15555215556")) {
        Sms.updateMessageBox("\nFrom: " + msg.getOriginatingAddress() + 
                "\n" + "Message: " + msg.getMessageBody() + "\n");              }
    }
}
} 
```

日志猫如下：

```
08-14 11:16:56.152: E/AndroidRuntime(2091): FATAL EXCEPTION: main
08-14 11:16:56.152: E/AndroidRuntime(2091): java.lang.RuntimeException: Unable to start activity ComponentInfo{cx.opseng.PerfTOLD/cx.opseng.PerfTOLD.Sms}: java.lang.StringIndexOutOfBoundsException
08-14 11:16:56.152: E/AndroidRuntime(2091):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2663)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2679)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at android.app.ActivityThread.access$2300(ActivityThread.java:125)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2033)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at android.os.Looper.loop(Looper.java:123)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at android.app.ActivityThread.main(ActivityThread.java:4627)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at java.lang.reflect.Method.invokeNative(Native Method)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at java.lang.reflect.Method.invoke(Method.java:521)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:868)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:626)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at dalvik.system.NativeStart.main(Native Method)
08-14 11:16:56.152: E/AndroidRuntime(2091): Caused by: java.lang.StringIndexOutOfBoundsException
08-14 11:16:56.152: E/AndroidRuntime(2091):     at java.lang.String.substring(String.java:1579)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at cx.opseng.PerfTOLD.Sms.onCreate(Sms.java:88)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1047)
08-14 11:16:56.152: E/AndroidRuntime(2091):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2627)
08-14 11:16:56.152: E/AndroidRuntime(2091):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T06:33:38.347

我做了一个对我有用的例子。

我遇到了由于我使用线程导致的进度对话框无法正常工作的问题。

`AndroidManifest.xml`：

```
<manifest package="com.mw.stackoverflow.example02"
    android:versionCode="1"
    android:versionName="1.0" xmlns:android="http://schemas.android.com/apk/res/android">

    <uses-sdk
        android:minSdkVersion="10"
        android:targetSdkVersion="15" />
    <uses-permission android:name="android.permission.RECEIVE_SMS"/>

    <application
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name=".MainActivity"
            android:label="@string/title_activity_main" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>
    </application>

</manifest> 
```

`MainActivity.java`：

```
package com.mw.stackoverflow.example02;

import android.os.AsyncTask;
import android.os.Bundle;
import android.telephony.SmsMessage;
import android.util.Log;
import android.widget.TextView;
import android.widget.Toast;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.IntentFilter;

public class MainActivity extends Activity implements SmsUpdater
{
    private static final String TAG = "MainActivity";

    private SmsReceiver mSmsReceiver;

    private class ExaminMessagesTask extends AsyncTask<SmsMessage, Void, Boolean> 
    {
        ProgressDialog mProgressDialog;

        @Override
        protected void onPreExecute()
        {
            super.onPreExecute();

            mProgressDialog = new ProgressDialog(MainActivity.this);
            mProgressDialog.setMessage("Receiving SMS.");
            mProgressDialog.setIndeterminate(true);
            mProgressDialog.setCancelable(true);

            mProgressDialog.show();
        }

        protected Boolean doInBackground(SmsMessage... messages) 
        {
            if (messages.length > 0)
            {
                Log.d(TAG, "Showing progress dialog.");

            }

            for (SmsMessage m: messages)
            {
                Log.d(TAG, "Message received");
            }   

            int count = 0;
            for(SmsMessage msg:messages)
            {
                String num = msg.getOriginatingAddress();
                Log.d(TAG, num);

                mProgressDialog.setTitle("Processing message " + (count++));

                try 
                {
                    Thread.sleep(1000);
                }    
                catch (InterruptedException e) 
                {
                }
            }

            return true;
        }

        protected void onProgressUpdate(Integer... progress) 
        {

        }   

        protected void onPostExecute(Boolean result) 
        {
            mProgressDialog.dismiss();
        }
    }

    @Override
    public void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        mSmsReceiver = new SmsReceiver(this);
    }

    @Override
    protected void onResume() 
    {
        super.onResume();
        IntentFilter filter = new IntentFilter();
        filter.addAction("android.provider.Telephony.SMS_RECEIVED");
        registerReceiver(mSmsReceiver, filter);
    }

    @Override
    public void onPause() 
    {
        super.onPause();
        unregisterReceiver(mSmsReceiver);
    }

    @Override
    public void gotSms(final SmsMessage[] m) 
    {
        Log.d(TAG, "OnReceive, number of messages: " + m.length);

        runOnUiThread(new Runnable() 
        {
            public void run() 
            {
                Toast.makeText(MainActivity.this, "SMS received", Toast.LENGTH_SHORT).show();

                new ExaminMessagesTask().execute(m);
            }   
        });
    }

} 
```

`SmsReceiver.java`：

```
package com.mw.stackoverflow.example02;

import android.os.Bundle;
import android.app.Activity;
import android.app.ProgressDialog;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;
import android.view.Menu;
import android.view.MenuItem;
import android.support.v4.app.NavUtils;
import android.telephony.SmsMessage;

class SmsReceiver extends BroadcastReceiver
{
    private static final String TAG = "SMSREC";

    private SmsUpdater mSmsUpdater;

    public SmsReceiver(SmsUpdater u)
    {
        super();
        mSmsUpdater = u;
    }

    public void onReceive(Context context, Intent intent)
    {
        Log.d(TAG, "OnReceive called.");

        Bundle bundle=intent.getExtras();

        Object[] messages=(Object[])bundle.get("pdus");
        SmsMessage[] sms = new SmsMessage[messages.length];
        for(int n=0;n<messages.length;n++)
        {
            sms[n]=SmsMessage.createFromPdu((byte[]) messages[n]);
        }

        mSmsUpdater.gotSms(sms);
    }
} 
```

`SmsUpdater.java`

```
package com.mw.stackoverflow.example02;

import android.telephony.SmsMessage;

public interface SmsUpdater 
{
    void gotSms(SmsMessage[] m);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:21:03.313

请检查第85 行`onCreate()`的 Activity `cx.opseng.PerfTOLD.Sms`以获取可以为空的引用。那就是日志说：

```
09:41:09.993: E/AndroidRuntime(1832): 引起: java.lang.NullPointerException 08-14 09:41:09.993: E/AndroidRuntime(1832): 在 cx.opseng.PerfTOLD.Sms.onCreate(Sms.爪哇：85）08-14 

```

由于您没有发布它的代码，我无法告诉您哪个对象为空。

# ios - 使用 Sudz - 需要同步类型的方法 - 或者在 sudz 回调完成之前休眠的方法

> ID：11944568
> 
> 赞同：0
> 
> 时间：2012-08-14T01:27:57.567
> 
> 标签：ios, service, web

我是一个相当新的 IOS 开发人员 - 总的来说一切都很顺利，除了.....

我有一个保存代码列表的程序。我可以点击“+”来添加新代码，新视图会调用 Web 服务来验证数据，如果有效则将其添加到内部 sqlite 数据库中。到现在为止还挺好。

在进入应用程序时，数据视图会使用数据库中的所有代码进行更新。又好。如果用户选择其中一个代码，则应该发生的是；

调用另一个服务以从数据库中获取详细数据（如果有兴趣，可以使用 SQL 服务器）。将此数据放入初始化表中。在另一个视图中显示数据。

我正在做的代码如下；

在第一个窗口的 prepareForSegue 中，我得到了我需要的代码并将其放入第二个视图实例中。我清理并准备数据库，然后退出 prepareForeSeque。以上所有方法都有效！

然后调用第二个视图控制器上的 viewDidLoad。

它获取传入的变量，构造服务请求并调用服务。然后它退出，然后另一个数据视图调用 numberOfRowsInSection - 它返回零，因为尚未调用来自处理 XML 数据并将其推入数据库的服务的回调！

我确实尝试过制作一个信号量变量，并在它处理完数据后将其设置在服务回调中。然后在 viewDidLoad 我旋转等待这个变量被设置。我使用 [NSSthread sleepForTimeInterval:0.25] 旋转，但怀疑我正在阻止调用服务回调。

我相信我可以通过在主视图和子视图之间放置一个中间视图来“作弊” - 并手动将 segue 发送到子视图 - 但怀疑这是一种矫枉过正！

斯坦

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:35:17.400

您需要`[self.myTableView reloadData];`在 Web 服务请求的完成块或委托方法内调用。

您使用什么进行 Web 服务调用？我使用 AFNetworking 开发了一个非常强大且简单的 NetworkClient。所有 Web 服务调用都有完成块，我在其中处理返回的数据。它将处理来自 Web 服务的字典或数组，并且可以进行同步或异步调用。它还有一个可选的内置 APIKey，可以设置并传递给 Web 服务以提高安全性。Web 服务所要做的就是处理表单 POST 请求，并且它可以完美运行。

I do what you are talking about all the time and I just build the array that supports the tableview and then call the `reloadData` method on the tableview.

# javascript - Backbone.js 将 url 参数传递给集合

> ID：11944569
> 
> 赞同：0
> 
> 时间：2012-08-14T01:27:59.097
> 
> 标签：javascript, backbone.js

我正在使用一个测试 .json 文件，并且可以成功地控制台记录 url，但我现在尝试将参数附加到 url 并且它们被忽略。

这是视图的样子，工作正常，成功消息出现在一个测试 json 文件中：

```
busImportSearch: function() {
    importSelect.fetch({
        data: {
            importPhone: '5555555555',
            busImportName: 'test business',
            busImportCID: '12345',
            busImportBID: '1234567890'
        },
        success: function(results) {
            // url console.log's fine just no params
        }
    });
} 
```

这是我在收藏中拥有的：

```
var importSelect = Backbone.Collection.extend({
    model: importModel,

    url:'somepath/test.json',

    sync: function(method, model, options) {
        options.timeout = 10000;
    options.dataType = "json";
        return Backbone.sync(method, model, options);
    },

    parse: function(response) {
        console.log(this.url);
        if (typeof response.data !== 'undefined') {
            this.result = response.data.list;
         }
        return this.result;
     },
});

 return new importSelect;
}); 
```

### 编辑

我认为这是可行的，但我认为有更好的方法可以做到这一点：

```
url: function() {
  var busimportPhone = $("#busImportPhone").val();
  var busImportName = $("#busImportName").val();
  var busImportCID = $("#busImportCID").val();
  var busImportBID = $("#busImportBID").val(); 
  var updateUrl = 'test.json' + '?importPhone=' + busimportPhone + '&importName=' + busImportName + '&importCID=' + busImportCID + '&importBID' + busImportBID; return updateUrl;
}, 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T04:28:57.050

这并没有好很多，但是您可以将属性列表存储在集合中的某个位置并从那里创建 url。例如。

```
importSelect.myDataList = {
        importPhone: '5555555555',
        busImportName: 'test business',
        busImportCID: '12345',
        busImportBID: '1234567890'
    };
importSelect.fetch({ ... }); 
```

并使用类似的函数构造您的网址（代码未测试）

```
function constructUrl(data) {
    var result = "";
    var count = 0;
    for(var i in data) {
       var prefix = "&";
       if(count == 0) {
           prefix = "?";
       }
       result += prefix + i + "=" + data[i];
    }
    return result;
} 
```

并使用函数创建 URL

```
...
url: function() { 
    return constructUrl(this.data);
} 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:44:11.800

我认为您通过定义`url`函数走在正确的道路上，只需从您的集合中获取那些查询参数，而不是直接从您的页面中获取。集合应该能够知道加载了哪些类型的项目，因此以某种方式将查询参数与集合实例一起存储是有意义的。过去，我在 Collection 定义中使用过一个对象。但要小心，否则您最终可能会得到一个由所有这些集合实例共享的对象。

*旁注：我之前一直很想进行设置，以便对于可以通过各种查询参数查询生成的任何集合，都会存在一个仅对查询参数建模的关联模型。通过模型和集合之间的事件绑定，改变模型的值然后可以自动触发集合中的提取。但这会是一个合理的触发器吗？我不知道。*

# awk - 使用 AWK 提取和区分列

> ID：11944573
> 
> 赞同：0
> 
> 时间：2012-08-14T01:28:20.960
> 
> 标签：awk

我需要从任意数量的文件中提取第一列，并为缺少的条目打印带有空行的列。空白行部分有问题。像这样：

```
File1:
Alfa        Something    More stuff
Charlie     Something    More stuff
Delta       Something    More stuff
Echo        Something    More stuff
Foxtrot     Something    More stuff

File2:
Alfa        Something    More stuff
Bravo       Something    More stuff
Echo        Something    More stuff
Foxtrot     Something    More stuff

File3:
Alfa        Something    More stuff
Bravo       Something    More stuff
Charlie     Something    More stuff
Delta       Something    More stuff
Echo        Something    More stuff

Output:
FileName1    FileName2    FileName3
=========    =========    =========
Alfa         Alfa         Alfa
             Bravo        Bravo
Charlie                   Charlie
Delta                     Delta
Echo         Echo         Echo
Foxtrot      Foxtrot 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:47:25.270

这是一种方法，除了一些小的格式问题：

```
awk '
  { 
    exists[$1] = 1;
    files[$1,ARGIND] = 1;
  }
  END {
    for (i=1; i<ARGC; ++i) {
      printf("%-20s",ARGV[i])
    }
    printf("\n");
    for (i=1; i<ARGC; ++i) {
      printf("%-20s","=================")
    }
    printf("\n");
    for (name in exists) {
      for (i=1; i<ARGC; ++i) {
        if (files[name,i]) {
          printf("%-20s",name);
        }
        else {
          printf("%-20s","");
        }
      }
      printf("\n");
    }
  }
' file1 file2 file3 
```

# php - PHP - 在不运行代码的情况下检查 PHP 代码的语法错误

> ID：11944574
> 
> 赞同：5
> 
> 时间：2012-08-14T01:28:23.737
> 
> 标签：php, eval, syntax-error

我知道通过使用`eval($code_to_check);`我们可以检查这个值是否相等`FALSE`，如果是，我们可以停止脚本的执行。但是，我面临的问题是我无法定义一个函数，因为它被调用了两次......它被 eval() 检查处理以确保没有语法错误，然后再次处理该函数，但显示一个错误，指出它不能 REDECLARE 这个函数，因为它已经在 eval'd 函数中声明。我怎样才能做到这一点，以便我们不在 EVAL'd 函数中声明事物，或者我们可以在实际调用 eval() 函数之前取消声明在 eval() 函数中声明的所有内容......

无论如何，这是我目前正在使用的......可以使用一些帮助，因为当 $content （这是 php 代码）中有一个函数时，我得到一个“不能重新定义函数”。

```
// PHP Syntax errors?
if (!@eval('return true;' . $content))
{
    // Error found in PHP somewhere.  Call error function and return out of here!
    call_user_func_array($code_error['function'], $code_error['params']);
    return;
}
else
{
    ob_start();

    eval($content);
    $code = ob_get_contents();
    ob_end_clean();
} 
```

任何人都可以在这里帮助我吗？谢谢大家，你们在这里都非常有帮助！你们都应该获得金牌，但我相信奥运会现在结束了，这还不是一项运动......

* * *

好的，我在这里尝试自己的答案，并想知道这是否仍会捕获错误并允许同时创建函数而无需两次调用这些函数。这是这样做的正确方法吗？任何人都可以在此代码中看到任何可能的问题吗？如果没有检测到语法错误，我将回显 $eval_code... 这可以吗？

```
$eval_code = @eval($content);
// PHP Syntax errors?
if ($eval_code === FALSE)
{
    call_user_func_array($code_error['function'], $code_error['params']);
    return;
}
else
{
    ob_start();
    echo $eval_code;
    $code = ob_get_contents();
    ob_end_clean();
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-07-22T08:50:52.430

```
$checkResult = exec('echo \'<?php ' . escapeshellarg($code_to_check) . '\' | php -l >/dev/null 2>&1; echo $?');
if ($checkResult != 0) {
    throw new \RuntimeException("Invalid php");
} else {
   $result = eval($code_to_check);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-03T07:17:38.657

您还可以使用一种新的但非常流行且稳定的工具[PHPStan](https://github.com/phpstan/phpstan)进行此类检查。

在这里你可以阅读[一个简短的教程，如何使用它](https://www.tomasvotruba.cz/blog/2017/01/28/why-I-switched-scrutinizer-for-phpstan-and-you-should-too/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-10-06T08:45:05.337

如果您检查 PHP 文档`eval()`，这是描述：

> eval — 将字符串计算为 PHP 代码

但是，PHP 文档本身说这`eval`是一个*危险*的结构：注意

> eval() 语言结构非常危险，因为它允许执行任意 PHP 代码。因此不鼓励使用它。如果您已仔细验证除了使用此构造之外别无选择，请特别注意不要将任何用户提供的数据传入其中，而无需事先正确验证。

所以，使用的时候要小心`eval`，非常小心。现在回到你的问题。

我认为您需要的是一个工具，可以帮助您进行语法检查以检测违反定义的编码标准的情况。我使用 ESLint 检查 Javascript 代码中的违规行为。对于 PHP，我使用 PHPStorm 和 Sublime Text，我使用 PHP Lint 和 PHPCS。我建议您使用其中一种或这些工具的组合来实现您的目标，而不是进行评估。

如果您使用的是 Jetbrains PHPStorm，您可以在此处找到这些插件：

*   [https://www.jetbrains.com/help/phpstorm/2016.2/using-php-code-sniffer-tool.html](https://www.jetbrains.com/help/phpstorm/2016.2/using-php-code-sniffer-tool.html)
*   [https://plugins.jetbrains.com/plugin/7887?pr=phpStorm](https://plugins.jetbrains.com/plugin/7887?pr=phpStorm) 我个人更喜欢使用 PHPStorm，它确实是最好的 PHP IDE 之一。

如果你喜欢使用 Sublime，这里有适合你的插件：

*   [https://github.com/SublimeLinter/SublimeLinter-php](https://github.com/SublimeLinter/SublimeLinter-php)
*   [https://github.com/SublimeLinter/SublimeLinter-phplint](https://github.com/SublimeLinter/SublimeLinter-phplint)
*   [https://github.com/benmatselby/sublime-phpcs](https://github.com/benmatselby/sublime-phpcs)

我的观点是，这些工具的良好组合应该足以确保您的代码的完整性。

-谢谢

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-08T18:31:42.227

我找到了一种在我的测试自动化**中一次检查所有 php 文件的语法的方法。**如果您的 php 文件仅包含函数和数据，则可以使用它（在不包含参数的情况下不执行任何不需要的操作）。

我得到我的 php 文件列表，并**为每个 php 文件生成一个带有一个 IFrame 的**html 页面。我有我的**自定义 PHP 错误处理程序**将**所有错误放入数据库**，因此将文件包含在 IFrame 中就足够了。如果有错误（包括语法错误），它会被记录下来。

```
main.php<br/>
<iframe id='frm_main.php' src='test_automation.php?CMD=CheckSyntaxPHP&PHP_FILE=main.php'>main.php</iframe><br/><br/>
second.php<br/>
<iframe id='frm_second.php' src='test_automation.php?CMD=CheckSyntaxPHP&PHP_FILE=second.php'>second.php</iframe><br/><br/> 
```

命令 CMD=CheckSyntaxPHP 上的 test_automation.php 仅检查文件的扩展名和存在性，并包含请求的 php 文件。

我使用**相同的原则**检查所有**javascript 文件**的语法-**每个 JS 文件的 IFrame**。CMD=CheckSyntaxJS 使用两个 javascript 块创建一个 html 文件：

javascript 的第一个块只定义了一个 javascript 错误处理程序，将所有错误发送到我的网站，这会将它们记录到数据库中。（它必须在一个单独的块中，以便 JS 中的语法错误不会阻止错误处理程序调用。）

javascript 的第二个块包含从当前检查的 JS 文件加载的文本。

```
<html>
<head>
<script type='text/javascript'>
function MyOwn_OnError(msg, url, lineNo, columnNo, error)
{ // do your error handling here, show or log the error
  var sError="Error: "+error+" in "+url; // build your own error message
  sError=encodeURIComponent(sError);
  var oReq = new XMLHttpRequest();
  if (bShowToUser) // define the handlers showing success if necessary
    { oReq.addEventListener("load", MyOwn_OnError_TransferComplete);
      oReq.addEventListener("error", MyOwn_OnError_TransferFailed);
      oReq.addEventListener("abort", MyOwn_OnError_TransferCanceled);
    }
  oReq.open("GET", "https://www.yourwebpage.com/ErrorHandlerJS?ErrMsg="+sError);
  oReq.send();
// and show something about sending the error to the user in the html page if needed
}
window.onerror=MyOwn_OnError;
</script>
<script type='text/javascript'>
// and here is the content of your javascript file
</script>
</head>
<body>
</body>
</html> 
```

# ruby-on-rails-3 - Rails 3 ActiveRecord更新属性不起作用

> ID：11944575
> 
> 赞同：0
> 
> 时间：2012-08-14T01:28:31.860
> 
> 标签：ruby-on-rails-3, activerecord, attributes

我试图允许用户编辑他们的帐户（很简单，嗯？）

这是我的更新方法：

```
 def update
    @user = current_user
    # @user.attributes = {'mail_chimp_newsletters' => []}.merge(params[:user])

    if @user.update_attributes(params[:user])
      sign_in @user, :bypass => true
      redirect_to edit_account_path, :notice => 'Account has been updated!'
    else
      redirect_to edit_account_path, :flash => { :alert => "Account could not be updated. Please try again" }
    end
  end 
```

路线：

```
match 'account/edit' => 'settings#edit', :as => 'edit_account', :via => :get
match 'accounts' => 'settings#update', :as => 'accounts', :via => :put 
```

HTML 表单：

```
<%= form_for @user, :url => accounts_url, :method => :put, :html => { :id => "personal-info-form", :class => "hide" } do |f| %> 
```

提交表单后，这将转储到`console`：

```
User Load (0.3ms)  SELECT `users`.* FROM `users` WHERE `users`.`id` = 43008 LIMIT 1
   (0.2ms)  BEGIN
  User Exists (36.1ms)  SELECT 1 FROM `users` WHERE (`users`.`username` = BINARY 'test@test.com' AND `users`.`id` != 43008) LIMIT 1
  User Exists (33.4ms)  SELECT 1 FROM `users` WHERE (`users`.`email` = BINARY 'test@test.com' AND `users`.`id` != 43008) LIMIT 1
   (0.1ms)  ROLLBACK 
```

我不确定为什么这不起作用......还有其他人遇到这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:42:57.043

一种可能性是您有一个用户模型和一个像 Devise 或 AuthLogic 这样的身份验证系统。将这些添加到 User 后，您现在需要显式声明属性为可读写，如

```
# User model (models/user.rb)
attr_accessor :email, last_name, first_name # etc. 
```

# perl - 如何从 WWW::Mechanize::Cached 中删除 url？

> ID：11944576
> 
> 赞同：-1
> 
> 时间：2012-08-14T01:28:32.617
> 
> 标签：perl, caching, www-mechanize

我将[WWW::Mechanize::Cached](http://search.cpan.org/~oalders/WWW-Mechanize-Cached-1.41/lib/WWW/Mechanize/Cached.pm)与 Cache::FileCache 一起使用，有时我想从缓存中删除某些 URL，但 WWW::Mechanize::Cached 没有这样的选项。

我查看了源代码，可以看到缓存是使用这一行设置的：

```
$self->cache->set( $req, freeze( $response ) ) if $should_cache; 
```

所以我尝试使用以下代码从缓存中删除一个项目：

```
$cache->remove($mech->response->request) or warn "cannot remove $!"; 
```

或者

```
$cache->remove($mech->response->request->as_string) or warn "cannot remove $!"; 
```

但我收到警告：“无法删除没有这样的文件或目录”。

我还发现了以下想法，但似乎没有一个有效 [https://groups.google.com/forum/?fromgroups#!topic/perl-cache-discuss/M_wXFNL5MdM[1-25]](https://groups.google.com/forum/?fromgroups#!topic/perl-cache-discuss/M_wXFNL5MdM%5B1-25%5D)

```
if ( $want_to_delete_url ) {
    $mech->cache->remove( $url );
}
$mech->get( $url ); 
```

[http://www.perlmonks.org/?node_id=564208](http://www.perlmonks.org/?node_id=564208)

```
my $url = "http://www.rulez.sk/headers.php";
my $req = GET $url, 'Accept-Encoding' => 'identity';
$cache->remove($req->as_string) or print "cannot remove $!"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T09:32:23.240

它有助于阅读您正在使用的软件的文档。[`get_keys`CHI 使用方法](http://p3rl.org/CHI#get_keys-)列出所有缓存键，因此您可以简单地遍历它们，直到找到您想要的。

```
use 5.010;
use CHI qw();
use HTTP::Request qw();
use WWW::Mechanize::Cached qw();

my $cache = CHI->new(
    driver     => 'CacheCache',
    cc_class   => 'Cache::FileCache',
    cc_options => { cache_root => '/tmp' },
);
my $uri = 'http://www.iana.org/domains/example/';
my $mech = WWW::Mechanize::Cached->new(cache => $cache);
$mech->get($uri);
for my $key ($cache->get_keys) {
    my $r = HTTP::Request->parse($key);
    say $r->uri;
    $cache->remove($key) if $r->uri eq $uri;
}; 
```

# php - 如何使用 PHP 通过 HTTP 打开大文件，然后在浏览器中显示以供查看？

> ID：11944578
> 
> 赞同：1
> 
> 时间：2012-08-14T01:28:54.950
> 
> 标签：php, http, video

我有一个 tomcat 服务器（服务器 A），它有大量渐进式流式编码的 mp4 视频和 mp3 音频文件，并且位于专用网络上。我还有一个运行 Apache 2 和 PHP 的 Web 服务器（服务器 B），它位于专用网络上并具有面向公众的界面。服务器 B 管理应用程序 ACL。

我希望客户端（比如浏览器）能够访问服务器 B 的公共界面上的特定 url，并能够从私有服务器下载（在播放器中收听或查看）媒体。目前，在服务器 B 上，我尝试了以下操作：

```
<?php
$handler = fopen('http://server_a/path/to/file.mp4', 'r');
header('Content-type: video/mp4');
while (!feof($handler)) {
    print fread($handler, 8192);
}
exit; 
```

和

```
<?php
$handler = fopen('http://server_a/path/to/file.mp4', 'r');
header('Content-type: video/mp4');
print stream_get_contents($handler);
exit; 
```

和

```
<?php
$handler = fopen('http://server_a/path/to/file.mp4', 'r');
header('Content-type: video/mp4');
fpassthru($handler);
exit; 
```

所有这些 PHP 要么内存不足，要么客户端（浏览器）在开始播放之前下载整个文件。我在这件事上走错了吗？关于我可能做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T01:31:40.250

不，这就是它的工作方式。基本上，您的 php 将文件显示**为**文件。您的 PHP 脚本来自“我不是 HTML 文件，我是 MP4 文件，这是我的内容”。PHP 不是您想要的流媒体

**为什么不尝试使用指向**您的 PHP 脚本的HTML5 视频或音频呢？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:38:15.327

第一个和第三个选项不应耗尽内存，但是，我建议在服务器 B 上为特定路径（例如`/path/to/videos/`）设置代理。

[http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass](http://httpd.apache.org/docs/2.2/mod/mod_proxy.html#proxypass)

我不确定它是否会满足部分内容请求，您必须弄清楚这一点。

其次，有两件事可以解释为什么浏览器必须在播放之前下载整个文件：

1.  该文件未针对网络流媒体进行优化；您可以使用 MP4Box 对其进行优化（即将元数据标题放在文件的前面）
2.  文件大小未知；使用可以解决的上述代理或 PHP `header()`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-03-06T02:22:57.610

刷新循环上的缓冲区！！！

```
function flush_buffers(){
   ob_end_flush();
   ob_flush();
   flush();
   ob_start();
} 
```

# php - 大学 Google 托管电子邮件的 lightopenID

> ID：11944579
> 
> 赞同：3
> 
> 时间：2012-08-14T01:29:04.940
> 
> 标签：php, openid, lightopenid

我目前正在尝试为大学的小型网站实施 openID。我对此很陌生，并跟进了相关文章。我已经下载了 lightopenId 并将文件夹上传到我的网络服务器。我的学校有谷歌托管他们的电子邮件服务，所以典型的电子邮件地址是：像这样`studentlastname@myuniversity.edu`。我们可以通过`mail.google.com`或谷歌专门为我们的登录设计的自定义网页登录`mail.google.com/a/oakland.edu/`。

`$openid->identity = 'https://www.google.com/accounts/o8/id';`我可以将用户定向到自定义大学谷歌托管页面进行身份验证，而不是将用户重定向到一般用户？

给我错误：

> 未找到 OpenID 服务器`http://mail.google.com/a/oakland.edu/accounts/o8/id`

openid.php：

```
<? 
    <?php
    require 'openid.php';
    try {
        # Change 'localhost' to your domain name.
        $openid = new LightOpenID('http://webprolearner.ueuo.com');
        if(!$openid->mode) {
            if(isset($_GET['login'])) {
                $openid->identity = 'mail.google.com/a/oakland.edu/accounts/o8/id';
                header('Location: ' . $openid->authUrl());
            }
    ?>
    <form action="?login" method="post">
        <button>Login with Google</button>
    </form>
    <?php
        } elseif($openid->mode == 'cancel') {
            echo 'User has canceled authentication!';
        } else {
            echo 'User ' . ($openid->validate() ? $openid->identity . ' has ' : 'has not ') . 'logged in.';
        }
    } catch(ErrorException $e) {
        echo $e->getMessage();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T17:14:11.797

据我所知，您的正确身份是：

```
https://www.google.com/accounts/o8/site-xrds?hd=oakland.edu 
```

这个 url 返回一个有效的 XRDS（所以 LightOpenID 会找到一个服务器）。

请注意，如果服务器配置不正确，调用`validate()`.

# javascript - 如何通过迭代对象数组来删除一些项目？

> ID：11944580
> 
> 赞同：2
> 
> 时间：2012-08-14T01:29:06.693
> 
> 标签：javascript, arrays, object

我想遍历对象数组并根据某些条件删除其中一些。

我使用 splice 来移除项目以保持项目的有序计数。

然后每次删除该项目时，我都会减少计数。

但由于某种原因，它永远不会起作用：

```
var arr=[{img:1},{img:2},{img:3},{img:4}];
for (var i=0, count= arr.length; i < count; ) {
    if ( this.arr[i].img==3 ) {
        this.arr.splice(i,1);
        count--;
    }else  i++
};
alert(JSON.stringify(arr)); 
```

​ ...有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:35:28.230

[向后循环](http://jsfiddle.net/Xsqwg/)应该可以解决问题。由于“撤退”值，这避免了在删除条目时使用计数器和重置计数器。

```
var i;
for (i = arr.length; i--;) {
    if (arr[i].img === 3) {
        arr.splice(i, 1);
    }
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T01:36:50.583

更简单地向后循环数组，然后您不必调整迭代器：

```
var i = arr.length;
while ( i-- ) {

  if ( arr[i].img == 3 ) {
    arr.splice(i,1);
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:33:09.687

我以前也遇到过同样的困难。我的解决方案是遍历数组并组成另一个要删除的元素数组。循环遍历要删除的元素列表并删除它们。这对我来说效果很好。

迈克尔·G。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T01:36:01.737

你指`this.arr`的不仅仅是`arr`.

从代码中删除这两个`this.`，它可以工作。:-)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T01:37:13.903

试试这个循环，我没有测试过，但应该可以。

```
var arr=[{img:1},{img:2},{img:3},{img:4}];
for (var i=arr.length-1; i >= 0; i--) {
    if ( arr[i].img==3 ) {
        arr.splice(i,1);
    }
};
alert(JSON.stringify(arr)); 
```

# android - android中的动画箭头，启动和停止

> ID：11944592
> 
> 赞同：0
> 
> 时间：2012-08-14T01:30:57.307
> 
> 标签：android

我已经创建了动画箭头。当我按下按钮时，它会旋转 -45 度，然后返回箭头。我的问题是：我想将箭头停在 -45 度。当我再次单击该按钮时，它应该将箭头 -45 移动到 -90 等等。请帮我解决这个问题。谢谢

我在这里放置代码。

```
<?xml version="1.0" encoding="utf-8"?>
 <set xmlns:android="http://schemas.android.com/apk/res/android"
    android:shareInterpolator="false">

        <rotate
            android:fromDegrees="0"
            android:toDegrees="-45"
            android:toYScale="0.0"
            android:pivotX="50%"
            android:pivotY="50%"
            android:duration="400"

             />
    </set> 
```

* * *

## 超空间跳跃.xml

```
package kh.qasim;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.animation.Animation;
import android.view.animation.AnimationUtils;
import android.widget.Button;
import android.widget.ImageView;

public class CustomAnimationActivity extends Activity {
    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);
        final ImageView image = (ImageView) findViewById(R.id.imageView1);
        final Animation hyperspaceJump = AnimationUtils.loadAnimation(this, R.anim.hyperspace_jump);
        Button btn = (Button) findViewById(R.id.button1);
        btn.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub

                    image.startAnimation(hyperspaceJump);

            }
        });

    }
} 
```

* * *

## CustomAnimationActivity.java

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    >
<TextView  
    android:layout_width="fill_parent" 
    android:layout_height="wrap_content" 
    android:text="@string/hello"
    />
<Button android:text="Button" android:id="@+id/button1" android:layout_width="wrap_content" android:layout_height="wrap_content"></Button>
<ImageView android:id="@+id/imageView1" android:src="@drawable/up" android:layout_width="203dp" android:layout_height="148dp"></ImageView>
</LinearLayout> 
```

* * *

## 主要的.xml

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T10:48:19.503

首先，如果你想防止你的图像在动画之后恢复到以前的状态，你需要使用：

```
anim.setFillAfter(true); 
```

此外，为了能够动态改变方向，您应该以编程方式创建动画，而不是从 XML 文件中进行：

```
RotateAnimation anim = new RotateAnimation(fromDegrees, toDegrees); 
```

使用 fromDegress 和 toDegrees 变量来控制对象的开始和结束方向。例如，您可以将当前方向保存在一个名为 currentOrientation 的变量中。所以，你只需要打电话：

```
RotateAnimation anim = new RotateAnimation(cuurentOrientation, currentOrientation - 45); 
```

然后像以前一样开始动画。

在动画结束时，只需将新方向存储在 currentOrientation 中。

# sql-server-2008-r2 - 尝试在 Sql Server 2008 R2 中计算聚合结果

> ID：11944600
> 
> 赞同：0
> 
> 时间：2012-08-14T01:32:19.570
> 
> 标签：sql-server-2008-r2

我生成了一个查询，列出了我的源数据中的一些记录（在底部）

我的表格设置由 3 个表格组成，看起来像

**tu_unit_tbl**

```
| unit_id | unit_name | unit_subject | 
```

**sp_student_tbl**

```
| st_id |  st_fname  | st_lname | 
```

**sp_test_tbl**

```
| ts_id |  ts_st_id  |  ts_unit_id | ts_session | 
```

到目前为止，我的查询**运行良好**，但我需要在其上添加一个计算字段：

```
SELECT  U.unit_subject,
        U.unit_name,
        S.st_fname + ' ' + S.st_lname as sname,
        T.ts_st_id,
        T.ts_session
FROM sp_test_tbl T
JOIN sp_student_tbl S on T.ts_st_id = st_id
JOIN tu_unit_tbl U on unit_id = ts_unit_id

WHERE ts_st_id = 184318
GROUP BY unit_name, U.unit_subject, ts_session,  st_lname, st_fname, ts_st_id 
```

它产生这个：

如果你注意到，有 3 行。前两个具有相同的“单位名称”。我正在寻找添加一个字段来计算这些行的出现次数

```
unit_subject | unit_name                            | sname    | ts_st_id | ts_session
--------------------------------------
Mathematics  | Algebra, Patterns, and Relationships | Frog Man | 184318   | 2012-07-31 15:22:42.000
Mathematics  | Algebra, Patterns, and Relationships | Frog Man | 184318   | 2012-07-31 15:25:47.000
Mathematics  | Data, Statistics, and Probability    | Frog Man | 184318   | 2012-07-31 15:25:59.000 
```

**我想得到什么**

```
unit_subject | unit_name                            | sname    | **COUNT OF UNIT_NAME**
---------------------------------------------------------------------------------------
Mathematics  | Algebra, Patterns, and Relationships | Frog Man | **2**
Mathematics  | Data, Statistics, and Probability    | Frog Man | **1** 
```

请注意，现在只有 2 条记录，因为前 2 条已合并计算。

当然，这是一个汇总结果，我想在一个新字段中计算这些汇总项（称为单元名称计数）

我尝试放入一个 Count(*) 字段，甚至`JOIN`是尝试对这些字段进行计数的子查询并没有给我一个聚合计数，而是计算我聚合的每个项目！

如何计算结果中的重复**单位名称**？

这是原始数据：（重复数据表示学生的测试会话。每条记录都是会话的一部分）

```
select ts_st_id,
       ts_session
from sp_test_tbl
where ts_st_id = 184318 
```

> ts_st_id | ts_session
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:22:42.000
> 
> 184318 2012-07-31 15:25:47.000
> 
> 184318 2012-07-31 15:25:47.000
> 
> 184318 2012-07-31 15:25:47.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000
> 
> 184318 2012-07-31 15:25:59.000

我最近的尝试（由 praveen 推荐）似乎可行，但会出错。

```
WITH CTE (unit_subject,
        unitName,
        sname,
        ts_st_id,
        ts_session)
AS
(
    SELECT  U.unit_subject,
        U.unit_name as unitName,
        S.st_fname + ' ' + S.st_lname as sname,
        T.ts_st_id,
        T.ts_session
    FROM sp_test_tbl T
    JOIN sp_student_tbl S on T.ts_st_id = st_id
    JOIN tu_unit_tbl U on unit_id = ts_unit_id

    WHERE ts_st_id = 1234
    GROUP BY unit_name, U.unit_subject, ts_session,  st_lname, st_fname, ts_st_id
)

select count(unitName) over (partition by unit_name)

Go 
```

生成以下错误消息：

```
Msg 207, Level 16, State 1, Line 22
Invalid column name 'unit_name'.
Msg 207, Level 16, State 1, Line 22
Invalid column name 'unitName'. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T23:25:33.940

使用公用表表达式做到了。谢谢普雷**文**！

```
 WITH CTE 
    AS
    (
        SELECT 
            U.unit_subject,
            U.unit_name,
            S.st_fname + ' ' + S.st_lname as sname,
            T.ts_st_id,
            st_grade,
            T.ts_session
        FROM sp_test_tbl T
        JOIN sp_student_tbl S on T.ts_st_id = st_id
        JOIN tu_unit_tbl U on unit_id = ts_unit_id

        WHERE ts_st_id = 1234
        GROUP BY unit_name, U.unit_subject, ts_session,  st_lname, st_fname, ts_st_id, st_grade
    )

    select distinct unit_subject, unit_name, sname, ts_st_id, st_grade, count(unit_name) over (partition by unit_name) as TestSessions
    from CTE 
```

# php - 我如何判断假期是否已经过去（每年）？

> ID：11944602
> 
> 赞同：1
> 
> 时间：2012-08-14T01:32:42.313
> 
> 标签：php, math, date

假设我想创建一个网站来检查我的生日是否已过，我可以轻松做到

```
 <?php
if( strtotime("2012-10-21") < time() ){
    echo "Birthday has passed";
    } else {
        echo "Birthday hasn't passed";
    } 
?> 
```

但这只会计算一年，而不是未来的每一年。有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:35:49.007

```
<?php
    if (strtotime("21 October")<time()) {
        echo "Birthday has passed";
    } else {
        echo "Birthday hasn't passed";
    } 
?> 
```

刚刚过了**10 月 21 日**，`strtotime()`自动返回当年的 UNIX 时间戳。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:36:03.683

使用`mktime`，只需将年份参数留空即可使用当前年份。

```
if (mktime(1, 1, 1, 10, 21) < time()) {
    ...
} 
```

[http://php.net/manual/en/function.mktime.php](http://php.net/manual/en/function.mktime.php)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-08-14T01:37:05.547

PHP 手册：[mktime](http://php.net/manual/en/function.mktime.php)

```
if(mktime(23, 59, 59, $birthdayDate, $birthdayMonth) < time())
{
    //Birthday has passed
} 
```

编辑：我使用了 23、59、59，这样它就不会说生日已经过去了，而它仍然是生日

# linux - 转义 shell 脚本中的某些字符

> ID：11944604
> 
> 赞同：0
> 
> 时间：2012-08-14T01:33:19.663
> 
> 标签：linux, bash, shell, unix, hive

这是我用来查询配置单元表的下面的 shell 脚本，我将此文件保存为`test4.sh`

```
#!/bin/bash

DATE_YEST_FORMAT1=`perl -e 'use POSIX qw(strftime); print strftime "%Y-%m-%d",localtime(time()- 3600*96);'`
echo $DATE_YEST_FORMAT1

QUERY1=`hive -e "
set mapred.job.queue.name=hdmi-technology;
SELECT split(ckey, '\\|') AS t1
                    ,created_time
                FROM (
                    SELECT CONCAT (
                            buyer_id
                            ,'|'
                            ,item_id
                            ) AS ckey
                        ,created_time
                    FROM dw_checkout_trans
                    WHERE to_date(from_unixtime(cast(UNIX_TIMESTAMP(created_time) AS BIGINT))) = '$DATE_YEST_FORMAT1' distribute BY ckey sort BY ckey
                        ,created_time DESC
                    ) a
                WHERE rank(ckey) < 1;"` 
```

**问题陈述：-**

我正在运行上面的 shell 脚本——

```
bash -x test4.sh 
```

如果您在上面看到这一行`hive sql query`：

```
**SELECT split(ckey, '\\|') AS t1**. 
```

我是否需要转义斜杠符号才能使其在 shell 脚本中工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:07:52.677

在反引号和双引号内，您基本上需要将反斜杠加倍，是的。但是，如果反斜杠不是已知的转义序列，它将被保留。

```
bash$ echo "foo\bar"
foo\bar

bash$ echo "foo\\bar"
foo\bar

bash$ echo "split(ckey, '\\|')"
split(ckey, '\|') 
```

因此，如果您想`hive`在此处看到双反斜杠，则需要在 Bash 脚本中添加四个反斜杠。

进一步参见例如[http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_03.html](http://tldp.org/LDP/Bash-Beginners-Guide/html/sect_03_03.html)

# oracle - 如何将plsql过程输出参数调用为用户定义的参考游标？

> ID：11944605
> 
> 赞同：1
> 
> 时间：2012-08-14T01:33:30.247
> 
> 标签：oracle, parameters, cursor, procedure, ref

我有一个包 P 和一个程序 A。

```
create or replace package pkg_get_users_info_by_role
as 
type user_info_ref_cur is ref cursor;
procedure get_user_info_proc 
(p_role_name varchar2, p_user_info out user_info_ref_cur);
end pkg_get_users_info_by_role;
/ 
```

和身体；

```
create or replace package body pkg_get_users_info_by_role
as 
procedure get_user_info_proc
(p_role_name varchar2, p_user_info out user_info_ref_cur)
as
begin
open p_user_info for 
select user_id,username,user_password,role_name from user_info,role_info
where user_info.user_role=role_info.role_id 
and role_info.role_name like p_role_name; 
end; 
end pkg_get_users_info_by_role; 
```

我的问题是，我该如何调用该程序？我需要一个 pkg_get_users_info_by_role.user_info_ref_cur 类型的变量来调用它吗？我无法创建这种类型的变量。有没有办法解决这个问题？

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T18:03:53.880

是的，您只需在调用程序中将光标定义为 package.type。这是一个简单的示例，应该适用于大多数 Oracle 数据库：

```
CREATE OR REPLACE PACKAGE pkg AS
TYPE rc IS REF CURSOR;
PROCEDURE get_rc(p_rc OUT rc);
END pkg;
/
CREATE OR REPLACE PACKAGE BODY pkg AS
PROCEDURE get_rc(p_rc OUT rc) IS
BEGIN
  OPEN p_rc FOR
  SELECT t.owner, t.table_name FROM all_tables t;
END get_rc;
END pkg;
/

DECLARE
  crsr pkg.rc;
  v1 VARCHAR2(32);
  v2 VARCHAR2(32);
BEGIN
  pkg.get_rc(crsr);
  LOOP
    EXIT WHEN crsr%NOTFOUND;
    FETCH crsr INTO v1, v2;
    dbms_output.put_line(v1||': '||v2);
  END LOOP;
  CLOSE crsr;
END;
/ 
```

# linux - 运行 Matlab 代码失败时如何使 Perl 脚本停止？

> ID：11944613
> 
> 赞同：0
> 
> 时间：2012-08-14T01:35:08.243
> 
> 标签：linux, perl, matlab

我想让 Perl 脚本运行一些 Matlab 代码，然后等待，然后在 Linux 中运行另一个 Matlab 代码。如果 Matlab 代码失败，那么它应该给出一个错误信息。即使 Matlab 代码 1 或 2 有错误，下面的 Perl 脚本也会运行。当 Matlab 代码失败时，如何使 Perl 脚本停止并给出错误消息？

```
print("run Matlab code 1!\n");
`matlab -nodisplay -r myfile1`;

print("run Matlab code 2!\n");
`matlab -nodisplay -r myfile2`;

print("End!\n"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T01:47:08.573

首先，存储您正在运行的命令的返回码：

```
my $returnCode = system("matlab -nodisplay -r myfile1"); 
```

然后，在您进行下一步之前，请确保返回码为 0（或在您的情况下表明成功的任何内容）：

```
if ($returnCode != 0) {
    die "Command did not finish successfully.";
} 
```

只需确定什么是有效的返回码并告诉脚本在任何其他情况下都死掉。

# javascript - JavaScript、数组和函数——只有数组的最后一个元素有效

> ID：11944625
> 
> 赞同：2
> 
> 时间：2012-08-14T01:36:13.190
> 
> 标签：javascript, html

我是 Javascript 新手并且一直在学习。我正在尝试设置一个按钮来激活随机功能。按钮很好，如果我将 getGroupOne() 分配给按钮或将 getGroupTwo() 分配给按钮，它工作正常。

唯一的问题是在下面的代码中。

好吧，当我单击按钮时，只有 getGroupTwo() 可以使用以下代码，

```
function getGroup() {
    var Group = new Array (getGroupOne(), getGroupTwo());
    var whichOne = Math.floor(Math.random()*Group.length); 
        return Group[whichOne];}; 
```

但是当我翻转它们时......只有 getGroupOne() 可以使用以下代码，

```
function getGroup() {
    var Group = new Array (getGroupTwo(), getGroupOne());
    var whichOne = Math.floor(Math.random()*Group.length); 
        return Group[whichOne];}; 
```

有人可以让我知道是什么问题吗，我看了几个答案，但不完全确定如何解决这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:14:59.363

如果你想返回函数引用，你应该这样写：

```
function getGroup() 
{
    var Group = [getGroupOne, getGroupTwo],
    whichOne = Math.floor(Math.random() * Group.length);

    return Group[whichOne];
}

getGroup()(); 
```

# r - 给定时间戳，如何从 zoo/xts 对象中删除一行

> ID：11944626
> 
> 赞同：6
> 
> 时间：2012-08-14T01:36:24.577
> 
> 标签：r, xts, zoo

我很高兴使用这段代码运行：

```
z=lapply(filename_list, function(fname){
    read.zoo(file=fname,header=TRUE,sep = ",",tz = "")
    })
xts( do.call(rbind,z) ) 
```

直到脏数据出现在一个文件的末尾：

```
 Open     High      Low    Close Volume
2011-09-20 21:00:00 1.370105 1.370105 1.370105 1.370105      1 
```

这在下一个文件的开头：

```
 Open     High      Low  Close Volume
2011-09-20 21:00:00 1.370105 1.371045 1.369685 1.3702   2230 
```

所以`rbind.zoo`抱怨重复。

我不能使用[类似的东西](https://stackoverflow.com/questions/8865257/r-language-remove-duplicate-rows-from-xts-object)：

```
 y <- x[ ! duplicated( index(x) ),  ] 
```

因为它们在不同的动物园对象中，在一个列表中。而且我不能按照[这里的建议](http://r.789695.n4.nabble.com/Duplicate-dates-in-zoo-objects-tp2264219p2264346.html)`aggregate`使用，因为它们是动物园对象的列表，而不是一个大型动物园对象。而且我不能得到一个大对象的副本'cos。第 22 条军规。

因此，当事情变得艰难时，艰难的破解了一些 for 循环（请原谅打印和停止，因为这还不是工作代码）：

```
indexes <- do.call("c", unname(lapply(z, index)))
dups=duplicated(indexes)
if(any(dups)){
    duplicate_timestamps=indexes[dups]
    for(tix in 1:length(duplicate_timestamps)){
        t=duplicate_timestamps[tix]
        print("We have a duplicate:");print(t)
        for(zix in 1:length(z)){
            if(t %in% index(z[[zix]])){
                print(z[[zix]][t])
                if(z[[zix]][t]$Volume==1){
                    print("-->Deleting this one");
                    z[[zix]][t]=NULL    #<-- PROBLEM
                    }
                }
            }
        }
    stop("There are duplicate bars!!")
    } 
```

The bit I've got stumped on is assigning NULL to a zoo row doesn't delete it (*Error in NextMethod("[<-") : replacement has length zero*). OK, so I do a filter-copy, without the offending item... but I'm tripping up on these:

```
> z[[zix]][!t,]
Error in Ops.POSIXt(t) : unary '!' not defined for "POSIXt" objects

> z[[zix]][-t,]
Error in `-.POSIXt`(t) : unary '-' is not defined for "POSIXt" objects 
```

P.S. While high-level solutions to my real problem of "duplicates rows across a list of zoo objects" are very welcome, the question here is specifically about how to delete a row from a zoo object given a POSIXt index object.

* * *

A small bit of test data:

```
list(structure(c(1.36864, 1.367045, 1.370105, 1.36928, 1.37039, 
1.370105, 1.36604, 1.36676, 1.370105, 1.367065, 1.37009, 1.370105, 
5498, 3244, 1), .Dim = c(3L, 5L), .Dimnames = list(NULL, c("Open", 
"High", "Low", "Close", "Volume")), index = structure(c(1316512800, 
1316516400, 1316520000), class = c("POSIXct", "POSIXt"), tzone = ""), class = "zoo"), 
    structure(c(1.370105, 1.370115, 1.36913, 1.371045, 1.37023, 
    1.37075, 1.369685, 1.36847, 1.367885, 1.3702, 1.36917, 1.37061, 
    2230, 2909, 2782), .Dim = c(3L, 5L), .Dimnames = list(NULL, 
        c("Open", "High", "Low", "Close", "Volume")), index = structure(c(1316520000, 
    1316523600, 1316527200), class = c("POSIXct", "POSIXt"), tzone = ""), class = "zoo")) 
```

* * *

**UPDATE:** Thanks to [G. Grothendieck](https://stackoverflow.com/users/516548/g-grothendieck) for the row-deleting solution. In the actual code I followed the advice of [Joshua](https://stackoverflow.com/users/271616/joshua-ulrich) and [GSee](https://stackoverflow.com/users/967840/gsee) to get a list of xts objects instead of a list of zoo objects. So my code became:

```
z=lapply(filename_list, function(fname){
    xts(read.zoo(file=fname,header=TRUE,sep = ",",tz = ""))
    })
x=do.call.rbind(z) 
```

(As an aside, please note the call to `do.call.rbind`. This is because `rbind.xts` has some serious memory issues. See [https://stackoverflow.com/a/12029366/841830](https://stackoverflow.com/a/12029366/841830) )

Then I remove duplicates as a post-process step:

```
dups=duplicated(index(x))
if(any(dups)){
    duplicate_timestamps=index(x)[dups]
    to_delete=x[ (index(x) %in% duplicate_timestamps) & x$Volume<=1]
    if(nrow(to_delete)>0){
        #Next line says all lines that are not in the duplicate_timestamp group
        #     OR are in the duplicate timestamps, but have a volume greater than 1.
        print("Will delete the volume=1 entry")
        x=x[ !(index(x) %in% duplicate_timestamps) | x$Volume>1]
        }else{
        stop("Duplicate timestamps, and we cannot easily remove them just based on low volume.")
        }
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T03:05:27.947

If `z1` and `z2` are your zoo objects then to `rbind` while removing any duplicates in `z2`:

```
rbind( z1, z2[ ! time(z2) %in% time(z1) ] ) 
```

Regarding deleting points in a zoo object having specified times, the above already illustrates this but in general if `tt` is a vector of times to delete:

```
z[ ! time(z) %in% tt ] 
```

or if we knew there were a single element in `tt` then `z[ time(z) != tt ]` .

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T02:19:40.673

`rbind.xts` will allow duplicate index values, so it could work if you convert to xts first.

```
x <- lapply(z, as.xts)
y <- do.call(rbind, x)
# keep last value of any duplicates
y <- y[!duplicated(index(y),fromLast=TRUE),] 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T02:14:21.940

I think you'll have better luck if you convert to `xts` first.

```
a <- structure(c(1.370105, 1.370105, 1.370105, 1.370105, 1), .Dim = c(1L, 
5L), index = structure(1316570400, tzone = "", tclass = c("POSIXct", 
"POSIXt")), .indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct", 
"POSIXt"), .indexTZ = "", tzone = "", .Dimnames = list(NULL, 
    c("Open", "High", "Low", "Close", "Volume")), class = c("xts", 
"zoo"))

b <- structure(c(1.370105, 1.371045, 1.369685, 1.3702, 2230), .Dim = c(1L, 
5L), index = structure(1316570400, tzone = "", tclass = c("POSIXct", 
"POSIXt")), .indexCLASS = c("POSIXct", "POSIXt"), tclass = c("POSIXct", 
"POSIXt"), .indexTZ = "", tzone = "", .Dimnames = list(NULL, 
    c("Open", "High", "Low", "Close", "Volume")), class = c("xts", 
"zoo"))

(comb <- rbind(a, b))
#                        Open     High      Low    Close Volume
#2011-09-20 21:00:00 1.370105 1.370105 1.370105 1.370105      1
#2011-09-20 21:00:00 1.370105 1.371045 1.369685 1.370200   2230

dupidx <- index(comb)[duplicated(index(comb))] # indexes of duplicates
tail(comb[dupidx], 1) #last duplicate
# now rbind the last duplicated row with all non-duplicated data
rbind(comb[!index(comb) %in% dupidx], tail(comb[dupidx], 1)) 
```

# php - PHP 的简单 AJAX 示例不起作用

> ID：11944628
> 
> 赞同：0
> 
> 时间：2012-08-14T01:36:42.753
> 
> 标签：php, ajax

这是我关于 PHP 的第一个问题，所以请多多包涵。我一直在关注 phpacademy.org 的教程。

我被困在一个介绍 AJAX 的教程上。我以导师的身份输入了确切的代码，但它仍然无法正常工作。

我搜索了很多，但它没有一点帮助。有人可以帮我吗？这是我的代码：

```
<html>
<head>
<script type="text/javascript">
function load(){

if(window.XMLHttpRequest)
    xmlhttp=new XMLHttpRequest();
else
    xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');

xmlhttp.onreadystatechange=function(){
if(xmlhttp.readyState==4 && xmlhttp.status==200){
    document.getElementsById('adiv').innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open('GET', 'AJAX.inc.php', true);
xmlhttp.send();
}
</script>
</head>
<body>
<div id="adiv"></div>
<input type="submit" value="Submit" onclick="load();">
</body>
</html> 
```

这是 AJAX.inc.php 文件：

```
<?php
echo 'Hello AJAX';
?> 
```

然而，来自 w3school.com 的另一个[示例](http://www.w3schools.com/php/php_ajax_php.asp)正在运行。

**可能重复：** [AJAX 不能与 XAMPP 一起使用，还是不可能](https://stackoverflow.com/questions/11569805/ajax-not-working-with-xampp-or-is-it-just-impossible)

但是这个问题没有得到正确的回答（或者我不明白）。有人请澄清一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:57:32.930

没有`document.getElementsById`方法。

```
document.getElementsById('adiv').innerHTML=xmlhttp.responseText; 
```

应该

```
document.getElementById('adiv').innerHTML=xmlhttp.responseText; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-23T11:33:21.537

```
<html>
<head>
<script type="text/javascript">
function load(){

if(window.XMLHttpRequest)
    {
    xmlhttp=new XMLHttpRequest();
    }
else
    {
    xmlhttp=new ActiveXObject('Microsoft.XMLHTTP');
    }
xmlhttp.onreadystatechange=function(){
if(xmlhttp.readyState==4 && xmlhttp.status==200){
    document.getElementById('adiv').innerHTML=xmlhttp.responseText;
}
}
xmlhttp.open('GET', 'ajax_php.php', true);
xmlhttp.send();
}
</script>
</head>
<body>
<div id="adiv"></div>
<input type="submit" value="Submit" onclick="load();">
</body>
</html> 
```

# c - 地址值消失

> ID：11944636
> 
> 赞同：1
> 
> 时间：2012-08-14T01:37:17.023
> 
> 标签：c, string

我正在编写一个程序并具有以下循环：

```
while ((c = getchar()) != EOF){
    if (c == '\n'){
        char newword[strlen(word) + 1];
        strcpy(newword, word);
        words[i].key = newword;
        memset(word, '\0', MAXLENGTH);          
        i++;
        j = 0;
    } else {
        word[j++] = c;
    }
} 
```

`words`结构数组在哪里：

```
struct kvp{
    char *key;
    int line;
}; 
```

并且`word`是一个大数组（大小`MAXLENGTH`），其前几个值构成一个字符串。

问题在于`words[i].key`. 在 if 语句中，打印它（在将其设置为 之后`newword`）将返回正确的值，即与输入的单词相同的最小大小的字符串。然而，一旦 if 语句退出并且我们回到了 while 循环的外部主体，它就会变成完全随机的东西，即`?HBk?`.

我怀疑可能会发生三件事：

*   `strcpy`不像我想的那样行事
*   `newword`是一个局部变量，它会以某种方式影响事物（听起来不对）
*   我还没有正确理解指针或结构（完全有可能，我刚刚开始学习 C）

到底是怎么回事？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T01:40:14.603

当您在块中声明`newword`时`if`，它会在该块退出后超出范围。如果您希望它持续存在，您需要在外部范围内分配内存，或者在堆上分配字符串`malloc`。

```
if (c == '\n')
{
    // newword will persist beyond this block:
    char *newword = malloc(strlen(word) + 1);
    strcpy(newword, word);
    words[i].key = newword; 
```

请注意，现在您需要调用`free`此分配的块，或创建内存泄漏。稍后您需要调用`free(words[i].key)`.

Martin 的使用建议[`strdup`](http://pubs.opengroup.org/onlinepubs/009695399/functions/strdup.html)是一个很好的建议，它`strdup`是可用的：它会为您执行分配 - 但您以后仍需要这样做`free`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T01:41:51.527

newword 存储在堆栈中，因此每次执行 while 循环时它都会超出范围。

您需要为它动态分配内存。我建议更换

```
char newword[strlen(word) + 1];
strcpy(newword, word); 
```

和：

```
char * newword = strdup(word); 
```

这将分配内存并复制内容。请注意，您应该稍后使用 free() 清理该内存，否则您将有内存泄漏。

# ruby-on-rails - 如何“动态添加选项”到“form_for”？

> ID：11944638
> 
> 赞同：3
> 
> 时间：2012-08-14T01:37:25.223
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, forms

我正在使用 Ruby on Rails 3.2.2。为了实现“动态生成”的 AJAX 样式文件上传表单，*如果满足某些条件，**我想在语句中“动态添加选项”* 。也就是说，此时我正在使用如下代码（请注意，我使用该方法是为了向该方法添加选项）：[*`FormHelper#form_for`*](http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_for) *`merge``form_for`*

 *```
<%
  if @article.is_true? && (@article.is_black? || && @article.is_new?)
    form_options = {:multipart => true, :target => "from_target_name"}
  else
    form_options = {}
  end
%>
<%= form_for(@article, :remote => true, :html => {:id => "form_css_id"}.merge(form_options)) do |form| %>
  ...
<% end %> 
```

但是，我认为上面的代码被劫持了太多。

**有没有更好的方法来完成我正在做的事情？**例如，我可以从视图模板访问一些（我不知道的）名为 as-like 的实例变量`@form`并在其上“工作”，以便根据需要更改相关选项吗？或者，我应该在某处声明一个辅助方法吗？你建议如何进行？

* * *

*顺便说一句*：由于上传过程是通过使用 HTML iframe 处理的，我使用[remotipart](https://github.com/leppert/remotipart) gem 来实现 AJAX 样式文件上传表单 - 我不知道这些信息是否可以帮助某人......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T02:14:57.890

这看起来像是辅助方法的一个很好的候选者。在您看来：

```
<%= form_for(@article, :remote => true, :html => article_form_options(@article, :id => "form_css_id")) do |form| %>
  ...
<% end %> 
```

在`app/helpers/articles_helper.rb`

```
module ArticlesHelper
  def article_form_options(article, defaults = {})
    extras = if article.is_true? && (article.is_black? || article.is_new?)
      { :multipart => true, :target => 'form_target_name' }
    else
      {}
    end

    defaults.merge(extras)
  end
end 
```

助手是一个很好的地方来保存对于视图来说太复杂但仍然与视图相关的逻辑。*

# windows - 是否可以防止用 ftp.exe 覆盖文件？

> ID：11944639
> 
> 赞同：0
> 
> 时间：2012-08-14T01:37:30.650
> 
> 标签：windows, command-line, ftp

我指的是 Windows 原生 ftp.exe 应用程序。开箱即用，它似乎在任何情况下都会覆盖文件。

是否可以防止用 ftp.exe 覆盖文件？如果这不能通过特定的 ftp.exe 参数完成，是否可以使用批处理调用 ftp.exe 来完成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:00:31.567

我认为没有任何 ftp 参数或 ftp 命令选项可以明确地执行您想要的操作。

使用批处理看起来像是要走的路（如果您必须坚持使用此 ftp 客户端）。

您可能必须执行以下操作：

1.  FTP连接
2.  列出文件 (remote.txt)
3.  比较 remote.txt 和 local.txt（要上传的文件）
4.  生成uploadables.txt（包含来自local.txt 的项目不在remote.txt 中）
5.  再次ftp连接
6.  上传uploadables.txt

听起来很有趣，但我最好回去工作。:-)

# php - 发送带有链接的电子邮件

> ID：11944640
> 
> 赞同：5
> 
> 时间：2012-08-14T01:37:40.977
> 
> 标签：php, cakephp, html-email

此代码输出：

```
Call to a member function link() on a non-object 
```

我想要的是在电子邮件中发送一个链接。代码有什么问题？谢谢

```
class User extends AppModel {
    public $helpers = array('Html');
    public function sendEmail($email_user, $code) {
            $email = new CakeEmail();
            $email->config('smtp');

            $pwrurl = "http://xxx/users?se=check&mail=".$email_user."&code=".$code;
            $link = $this->Html->link('Link name', $pwrurl, array('target' => '_blank'));
            $email->from(array('xxxn@gmail.com' => 'xxxx'))
            ->to($email_user)
            ->emailFormat('html')
            ->send('My message:: '.$link);
            return true;
        }
} 
```

[文档](http://book.cakephp.org/2.0/en/views/helpers.html)

**更新：我得到同样的错误。**

```
App::uses('CakeEmail', 'Network/Email');
App::uses('AppHelper', 'View/Helper');

class AppController extends Controller {
      public $helpers = array('Form', 'Html');

      public function sendEmail($email_user, $codeLink) {
             //same code.
      } 
```

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-15T19:55:18.060

控制器中应该有这个：

```
class UsersController extends AppController {
   var $name = 'Users';
   var $helpers = array('Html');
   var $components = array('Email');

   function _email($email_user, $code){
      $pwrurl = "http://xxx/users?se=check&mail=".$email_user."&code=".$code;
      $this->Email->from = 'From: Someone';
      $this->Email->to = $email_user;
      $this->Email->subject  = 'Your Subject';
      $this->Email->sendAs = 'html';
      $this->Email->template = 'your_template';
      $this->set('pwrurl', $pwrurl);
      $this->Email->send();
   }
} 
```

然后在views/elements/email/html 中创建一个与上面代码中的模板名称相同的电子邮件模板。对于此示例 your_template.ctp。以您希望它的外观以及您希望链接出现的任何位置使用以下方式编写消息：

```
$this->Html->link('Link name', $pwrurl, array('target' => '_blank')); 
```

希望这会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-15T17:40:46.777

从[这里](http://bakery.cakephp.org/articles/ashevat/2010/03/12/how-to-implament-one-time-password-for-forgot-my-password-and-account-activation-processes)：

```
$pwrurl = '<a href="http://' . $_SERVER['SERVER_NAME'] ."/users/otpregister/".$email_user."&code=".$codeLink.'"> Registration link</a>'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:24:56.883

除了上面的代码，您可以尝试使用以下代码：

```
App::uses('HtmlHelper', 'View/Helper');
class User extends AppModel {
public function sendEmail($email_user, $code) {
        $email = new CakeEmail();
        $email->config('smtp');

        $pwrurl = "http://xxx/users?se=check&mail=".$email_user."&code=".$code;
        $link = $this->Html->link('Link name', $pwrurl, array('target' => '_blank'));
        $email->from(array('xxxn@gmail.com' => 'xxxx'))
        ->to($email_user)
        ->emailFormat('html')
        ->send('My message:: '.$link);
        return true;
    }
} 
```

因为`$helpers`是控制器的有效数据成员，而不是模型。`sendEmail()`在您的 AppController.php 中编写方法并将此方法调用到控制器的方法中也是一个不错的选择`$this->sendEmail($user_email, $code);`

[此文档页面](http://book.cakephp.org/2.0/en/core-utility-libraries/app.html#loading-classes)可能会帮助您实现相同的目标。

希望它对你有用。

# javascript - 如何检测设备是否在 Titanium 中具有触摸屏？

> ID：11944641
> 
> 赞同：0
> 
> 时间：2012-08-14T01:38:12.580
> 
> 标签：javascript, android, titanium, appcelerator-mobile

我的目标是使用 Titanium 的 Android。如何判断设备是否有触摸屏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T04:14:00.287

最简单的方法是测试触摸事件支持。如果它们受支持，则设备可能具有触摸屏。如果没有，它可能不会，或者你无论如何都不能使用它们。一种解决方案是：

```
var touchSupported = ('ontouchstart' in window); 
```

但要小心，因为浏览器可能支持触摸事件但设备可能不支持（例如，Chrome 20 在没有触摸的设备中支持大量触摸事件）。

您可能能够让用户单击按钮并查看是否调度了触摸事件或只是单击。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T16:14:12.120

这是我想出的解决方案。这真的很愚蠢，但它确实有效。无论您在何处创建应用程序窗口，请添加以下代码：

```
function touchStart(){
    Titanium.App.Properties.setBool("touch", true);

    self.removeEventListener("touchstart", touchStart);
}

self.addEventListener("touchstart", touchStart); 
```

替换`self`为您的窗口名称。现在，第一次检测到触摸事件时，将设置应用程序属性。

稍后，检查是否存在触摸：

```
var touchSupported = Titanium.App.Properties.getBool("touch", false); 
```

如果您在模拟器上对此进行测试，即使您更改“设备”，该属性也可能会持续存在。因此，在其他任何内容之前添加此行：

```
Titanium.App.Properties.setBool("touch", false); 
```

# css - 为什么外部 CSS 样式表的位置很重要？

> ID：11944650
> 
> 赞同：3
> 
> 时间：2012-08-14T01:40:09.720
> 
> 标签：css, image

我是一名初级程序员，已经查看了几个资源，但我无法弄清楚为什么外部 css 样式表的位置很重要。例如，分别更改文件的链接和文件的位置，将确定图片是否加载：

css中的一个简单行：

```
body {
    background: url(./images/test.jpg) center center fixed no-repeat;
} 
```

这将加载一张图片：

```
<link rel="stylesheet" href="style.css" type="text/css" charset="utf-8" /> 
```

这不会：

```
<link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" /> 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:42:31.043

图像位置相对于 CSS 文件的位置，而不是 HTML 文件的位置。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T01:43:02.110

`images`这是因为您的文件夹中没有文件`css`夹。它与`css`文件相关，而不是`html`文件。

你可以像这样修复它：

```
body {
    background: url(../images/test.jpg) center center fixed no-repeat;
} 
```

这首先进入根目录，然后进入图像文件夹。

然后你可以使用你的 css 行：

```
<link rel="stylesheet" href="css/style.css" type="text/css" charset="utf-8" /> 
```

# java - 从线程收集值并将其保存到数组 java 套接字中

> ID：11944653
> 
> 赞同：0
> 
> 时间：2012-08-14T01:40:18.590
> 
> 标签：java, multithreading, sockets

我正在尝试创建一个具有多线程概念的 Java 套接字程序。从客户端到服务器的每个连接都是一个线程。每个客户端都将他们的信息发送到服务器。

我想问一下如何从线程中收集所有值并将它们全部放入一个字符串数组中？

需要同步所有这些线程吗？

如果只使用`Thread t = new Thread()`而不是有什么不同`Thread[] t = new Thread(client)`？

我是否适合使用`Thread[]`从线程中收集所有项目的开始步骤？

使用线程有用`join()`吗？

这是创建线程的部分，

```
 public void listenSocket(int client){ 
        int i=0;

        Thread[] t = new Thread[client];
        while(i<client){
            ClientWorker w;
              try{  
                    w = new ClientWorker(server.accept());
                    t[i] = new Thread(w);
                    t[i].start();
                    System.out.println(t[i].getName());
              } catch (IOException e) {
                    System.out.println("Accept failed: 4444");
                    System.exit(-1);
              }
        i++;
        }
} 
```

这是线程在做什么的一部分

```
class ClientWorker implements Runnable{
    Socket client;
        String ip;
        String load;
        String data[]=new String[7];

        ClientWorker(Socket client){
        this.client = client;
    }

    public void setIP(String ip){
            this.ip = ip;
        }

        public void setData(String load){
            this.load = load;
        }

        public void getIP(){
           System.out.println(ip);
        }

        public void getData(){
           System.out.println(load);
        }

    public void run(){

        BufferedReader in = null;
        PrintWriter out = null;
                XmlGenerator xml = new XmlGenerator();
        try{
          in = new BufferedReader(new InputStreamReader(client.getInputStream()));
          out = new PrintWriter(client.getOutputStream(), true);
        } catch (IOException e) {
          System.out.println("in or out failed");
        }
                while(true){
                    try{
                        String a = in.readLine();
                        setData(a);
                        String b = client.getRemoteSocketAddress().toString();
                        setIP(b);
                        out.println(a);
                        getData();
                        getIP();
                       }
                    catch (IOException e) {
                        System.out.println("Read failed");
                       }
                }

    }

}` 
```

我已经阅读了有关同步、可调用线程的主题，但我什么也没找到。抱歉重新发布。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:07:23.993

有两种方法可以回答这个问题：

第一种方式：

> 我想问一下如何从线程中收集所有值并将它们全部放入一个字符串数组中？需要同步所有这些线程吗？

如果您打算以这种方式收集结果，那么是的，有必要显式同步线程对该数组的使用。

> 如果只使用 Thread t = new Thread() 而不是 Thread[] t = new Thread(client) 有什么不同？

目前尚不清楚您的意思，但无论哪种方式，如果您有两个线程访问/更新相同的数据结构，那么它们需要同步以使应用程序可靠/可移植。

> 我是否适合使用 Thread[] 从线程中收集所有项目的开始步骤？

这是一种方法。但是有更好的方法。

> 使用 thread join() 有用吗？

如果您要尝试在此级别解决此问题，那么它*可能会*很有用。

问题是你的代码并没有让我相信你清楚地知道你在做什么。或者换句话说，没有*设计*的证据。如果我们无法弄清楚您认为您的代码应该如何工作，那么真的不可能给您具体的建议。该代码当然似乎与您在问题开始时所说的内容不一致...

* * *

回答这个问题的第二种方法是，从 Java 5 开始，“java.util.concurrent”包为实现多线程系统提供了广泛的“现成”组件。您似乎试图实现的内容听起来很适合[`ExecutorService`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/ExecutorService.html). 它可以处理创建和管理线程的所有低级细节，并允许应用程序通过[`Future`](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Future.html). 这消除了对显式同步的需求…… `ExecutorService`and`Future`实现会解决这个问题。

所以，我的建议是阅读 Javadocs`ExecutorService`等，并弄清楚如何使用它来做你想做的*事情*。如果你这样做，你的代码可能会更好。

# smartphone - Galaxy Note - UMTS 2100？

> ID：11944657
> 
> 赞同：-1
> 
> 时间：2012-08-14T01:41:03.960
> 
> 标签：smartphone, samsung-mobile, cellular-network, umts

我要买一部手机去安哥拉，我知道我应该买一部有 UMTS 2100 [http://www.gsmarena.com/network-bands.php3?sCountry=ANGOLA](http://www.gsmarena.com/network-bands.php3?sCountry=ANGOLA)

我对 Galaxy Note 很感兴趣，但我不知道 GT-N7000 版本是否兼容。我已经阅读了很多规范站点，有些似乎提到了 UMTS，有些则没有。我不知道 UMTS 和 HSDPA 之间的区别可能无济于事。

因此，任何有关 Galaxy Note GT-N7000 是否可以在安哥拉使用的信息或对 UMTS 和 HSDPA 的解释都会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-03T23:07:35.783

好吧，我猜你已经去过安哥拉了，但无论如何……如果手机支持 HSDPA，它也支持 UMTS。

HSDPA = 高速下行链路分组接入。简单的解释是，它是在 UMTS 系统中增加的一个额外通道，目的是为了更快地下载数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-18T17:36:52.707

UMTS 2100 是一个频段，它是一组频率，例如 1900Mhz 到 1950 Mhz（上行链路（您的手机到接收您的信号的*节点 B* （UMTS 中​​的移动塔的术语）会有不同的频段）和下行链路（ nodeB 到电话）），它规定了您的电话必须以何种频率发送和接收消息。因此，如果安哥拉使用 UMTS 2100（通常是大多数地方的标准），您的手机也应该能够在该频段运行（以该频率发送和接收消息）。

如果将来在安哥拉建立另一个新基站，即使它在 LTE 频段传输信号，如果手机不支持该频段，您将无法使用它。因此，建议 UE（用户设备，即电话、笔记本电脑）支持所有可能的频率，因此从 gsm 切换到 UTMS 或不同的运营商需求不会成为 UE 方面的问题

看看印度电子商务网站 Flipkart 销售 N7000，在这里 [http://www.flipkart.com/samsung-galaxy-note-3/p/itme9978zcnnajza?pid=MOBDZQ2EZM3TAFBX&ref=L%3A-6277751913313120773&srno=p_4&query=note+ 3+&otracker=来自搜索](http://www.flipkart.com/samsung-galaxy-note-3/p/itme9978zcnnajza?pid=MOBDZQ2EZM3TAFBX&ref=L%3A-6277751913313120773&srno=p_4&query=note+3+&otracker=from-search)

向下滚动以查看规格 -> 平台 -> 工作频率

在这里，它显示了手机可以支持的所有频段。是的，我确实看到了 UMTS 2100

所以看起来标准国际版肯定支持它。可能只需要小心某些欧洲版本，否则任何标准电子商务网站都应提供所有必要的详细信息，如亚马逊 [http://www.amazon.com/Samsung-Galaxy-Unlocked-Android-Smartphone/中的此链接dp/B00F33OE06/ref=sr_1_1?ie=UTF8&qid=1437240359&sr=8-1&keywords=note+3](https://rads.stackoverflow.com/amzn/click/com/B00F33OE06) 它也明确提到了2100频段

HSDPA 是一种建立在 UMTS 之上的协议，用于更高的数据速率（您在手机信号栏旁边看到的*H*），因此有些网站为了方便起见仅提及 HSDPA，因为他们可能不想提及 UMTS + HSDPA，因此如果提到 HSDPA 2100，前面的答案说明你很好。

如果您是从当地经销商处购买，请确保您与店主交叉核对或尝试在密封盒中查看是否提到了工作频率

# jsp - 在 JSP 中获取当前位置路径？

> ID：11944659
> 
> 赞同：0
> 
> 时间：2012-08-14T01:41:24.360
> 
> 标签：jsp, struts2, jsp-tags

我有一个带有以下几行的jsp：

```
 <ul>
    <li><a id="iso3_dan" href="/?lang=iso3:dan&locale=iso3:dan">Dansk</a></li>
    <li><a id="iso3_deu" href="/?lang=iso3:deu&locale=iso3:DEU">Deutsch</a></li>
 </ul> 
```

它基本上用于显示语言下拉菜单。现在，我需要以这样一种方式创建 URL，它也将附加当前页面操作。

我正在使用 Struts 2

在浏览器中，如果我点击管理菜单，网址将更改为

```
http://<portalIp>/admin 
```

如果我点击营销菜单，它会变为

```
http://<portalIp>/marketing 
```

现在，我需要做的是我需要在语言中附加这个 /admin 和 /marketing 操作。因此，如果您在营销页面上，我需要通过如下所示的营销操作：

```
<a id="iso3_dan" href="/marketing?lang=iso3:dan&locale=iso3:dan">Dansk</a>
<a id="iso3_deu" href="/marketing?lang=iso3:deu&locale=iso3:DEU">Deutsch</a> 
```

如果您在管理页面上，我需要传递该当前操作，如下所示：

```
<a id="iso3_dan" href="/admin?lang=iso3:dan&locale=iso3:dan">Dansk</a>
<a id="iso3_deu" href="/admin?lang=iso3:deu&locale=iso3:DEU">Deutsch</a> 
```

如何在 JSP 中传递当前操作？我在下面试过：

```
<a id="iso3_deu" href="<%= request.getRequestURL() %>/?lang=iso3:deu&locale=iso3:DEU">Deutsch</a> 
```

但这没有用。如何在不添加任何 Javascript 代码的情况下仅获取操作的路径？

注意：由于搜索引擎优化，我不能使用 Javascript。否则，javscript 函数 document.location.pathname 解决了这个问题。

任何帮助深表感谢！！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:52:18.507

我相信`admin`或者`marketing`是您的操作的名称，它已映射到受尊敬的操作类。如果是这种情况，Struts2 提供了一种使用`ActionContext`.

您可以在您的操作类/基本操作类中创建一个实用方法，例如

```
public String getActionName() {
        ActionContext a = ActionContext.getContext();
        Object value = a.getName();
        return value;
} 
```

`ActionContext`提供对上下文的引用，您将能够在堆栈中获得操作名称以及许多其他有价值的信息。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T02:17:49.517

您可以在控制器中获取操作路径并传递给jsp，因此转发到jsp url，如：

```
your.jsp?action=/admin 
```

jsp中的输出参数。

# android - Android：活动未从后台执行 onNewIntent()（从服务调用）

> ID：11944660
> 
> 赞同：2
> 
> 时间：2012-08-14T01:41:37.033
> 
> 标签：android, service, android-activity, notifications, foreground

这是我的第一个安卓程序。我有一个可以大声读取信息的活动，一个侦听传入 SMS 消息的接收器和一个服务，以使应用程序在后台运行。

我的主要活动有一个切换按钮。开启时，它会启动创建通知以防止应用程序被杀死的服务。用户也可以点击通知返回主活动：

```
package com.rockmanx77777.SMSbyVoice;
import android.app.Notification;
import android.app.PendingIntent;
import android.app.Service;
import android.content.Intent;
import android.graphics.BitmapFactory;
import android.os.Binder;
import android.os.IBinder;
import android.support.v4.app.NotificationCompat;
import android.util.Log;

public class SMSService extends Service{

    @Override
    public void onCreate() {
        createNotification();
        super.onCreate();
    }

    public class MyBinder extends Binder {
        SMSService getService() {
            return SMSService.this;
        }
    }

    private final IBinder binder = new MyBinder();

    @Override
    public IBinder onBind(Intent intent) {
        return binder;
    }

    private void createNotification(){

        final int NOTIFICATION_ID = 77777;
        Intent intent = new Intent(this, SMSByVoice.class);
        intent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
        intent.putExtra("senderNumber", "");
        intent.setAction("com.rockmanx77777.SMSByVoice.PROCESS");
        PendingIntent pi = PendingIntent.getActivity(this, 1, intent, 0);
        NotificationCompat.Builder builder = new NotificationCompat.Builder(this);

        builder.setContentTitle("Sample Title");
        builder.setContentText("Sample Text");
        builder.setSmallIcon(R.drawable.ic_launcher);
        builder.setLargeIcon(BitmapFactory.decodeResource(getResources(), R.drawable.ic_launcher));
        builder.setContentIntent(pi);

        Notification notification = builder.getNotification();
        notification.flags = notification.flags | Notification.FLAG_ONGOING_EVENT;

        startForeground(NOTIFICATION_ID, notification);
    }
} 
```

当有传入的 SMS 时，服务的 onReceive 被正确调用。一切都得到执行，包括`context.startActivity(localSMS);`我在这里遇到问题：

```
package com.rockmanx77777.SMSbyVoice;
import java.util.Set;
import android.annotation.TargetApi;
import android.app.ActivityManager;
import android.app.IntentService;
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.content.pm.PackageManager;
import android.os.Bundle;
import android.support.v4.content.LocalBroadcastManager;
import android.telephony.SmsMessage;
import android.util.Log;

public class SMSReceiver extends BroadcastReceiver{

    public SMSReceiver(){
    }

    @Override
    public void onReceive(Context context, Intent intent) {
        Log.d("MSG", "Receiver's onReceived Called");
        if(intent.getAction() == "android.provider.Telephony.SMS_RECEIVED"){
            //Get the SMS message passed in
            Bundle bundle = intent.getExtras();        
            SmsMessage[] msgs = null;
            String senderNumber = "";
            String body = "";
            if (bundle != null){
                //Retrieve the SMS message received
                Object[] pdus = (Object[]) bundle.get("pdus");
                msgs = new SmsMessage[pdus.length];            
                for (int i=0; i<msgs.length; i++){
                    msgs[i] = SmsMessage.createFromPdu((byte[])pdus[i]);  
                    body = msgs[i].getMessageBody().toString();    
                }
                senderNumber = msgs[0].getOriginatingAddress();

                Intent localSMS = new Intent(context, SMSByVoice.class);
                localSMS.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
                localSMS.setAction("rockmanx77777.SMSByVoice.RETURN");
                localSMS.putExtra("senderNumber", senderNumber);
                localSMS.putExtra("body", body);
                Log.d("MSG", "Starting activity from Receiver");
                context.startActivity(localSMS);
            }
        }
        else{
            Log.d("MSG", "intent.getAction() != android.provider.Telephony.SMS_RECEIVED");
        }
    }
} 
```

如果活动在前台运行，则一切正常。如果活动在后台运行（已创建服务和通知），`context.startActivity(localSMS);`则将在 SMS 到达时执行，但`onNewIntent()`不会调用活动的方法，也不会将活动带到前台。

如果我在执行后的某个时间手动单击通知，`context.startActivity(localSMS);`那么活动将进入前台（如预期的那样）并现在执行`onNewIntent()`。

我想要发生的是，如果活动在后台运行（创建服务和通知），那么在 SMS 到达时，我的接收器会将活动带到前台（通过`startActivity(localSMS);`），然后，活动将调用它`onNewIntent()`方法。

我不知道怎么了。我认为服务和接收器相互冲突，但我可能会完全关闭。抱歉这么久。我通常可以在这里找到我的问题的答案，但是对于这个问题我没有运气。任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:35:37.410

我发现缺少了什么。我的服务中没有接收器：我的服务类更改为：

```
public class SMSService extends Service{

    SMSReceiver receiver = new SMSReceiver();

    @Override
    public void onCreate() {
        Log.d("MSG", "SMSService OnCreate Started");

        createNotification();
        this.registerReceiver(receiver, new IntentFilter("android.provider.Telephony.SMS_RECEIVED"));
        super.onCreate();
        Log.d("MSG", "SMSService OnCreate Ended");
    }

    public class MyBinder extends Binder {... 
```

# java - 如何使用 SOAPHandlers 签署 MTOM SOAP 消息？

> ID：11944663
> 
> 赞同：1
> 
> 时间：2012-08-14T01:41:52.863
> 
> 标签：java, java-metro-framework, mtom, xml-dsig

目前，我有两个处理程序，一个用于记录日志，一个用于签署 SOAP 消息（它本质上会篡改 SOAP 消息）。如果没有处理程序链，MTOM 会按预期工作，插入对二进制内容的引用，而不是内联 base64 二进制内容。

一旦我介绍了一个处理程序，MTOM 内容现在就被包含在内。

是否可以使用处理程序对 SOAP 消息进行签名，或者是否有更合适的方法来执行此操作？

**更新 1** 无法发布完整的源代码。本质上，自定义 SOAPHandler 实现。它对时间戳（在标头中）、自定义标头和 SOAP 主体执行一些基本的 XMLDsig 类型操作。然后将得到的摘要值注入到标头中的签名元素中。

关于记录器，它又是一个简单的 SOAPHandler。如果独占使用它或签名处理程序，则结果是相同的，即内联字节内容的 MTOM 消息。我取得的唯一进展是使用 MessageHandler 进行日志记录。这使我能够输出 SOAP 信封（尽管内联了字节内容）并且仍然保持 MTOM 分离。因此，这并不是真正的解决方案，而是表明 SOAP 消息的任何修改都需要在较低级别进行。这使我走上了管子的道路。

**更新 2**

以下是该`MessageHandler`方法的示例。您可以看到原始 HTTP 转储将包含多部分消息，而实际输出内联 base64。这种实现和`SOAPHandler`实现之间的唯一区别是实际的 HTTP 请求更改为单部分内联 MTOM 消息。

```
@Override
public boolean handleMessage(MessageHandlerContext context) {

  HttpTransportPipe.dump = true;

  Boolean isOutgoing = (Boolean) context.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

  if (isOutgoing) {
    System.out.println("\nOutbound message:");
    XMLStreamWriter writer = XMLStreamWriterFactory.create(System.out);
    try {
      context.getMessage().writeTo(writer);
    } catch (XMLStreamException e) {
      throw new IllegalStateException("Unable to write");
    }
  } else {
    System.out.println("\nInbound message:");
  }
  return true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T17:10:31.607

我试图通过组合一个接受 MTOM 传输的图像的简单服务来复制您的问题。我发现如果我在设置处理程序*之前*放置启用 MTOM 的代码，它会正确编码消息。如果我先设置处理程序，它不会。这是我设置正常运行的客户端代码的地方：

```
Service service = Service.create(url, qname);

Greeting greeting = service.getPort(Greeting.class);

BindingProvider bp = (BindingProvider) greeting;
SOAPBinding binding = (SOAPBinding) bp.getBinding();
binding.setMTOMEnabled(true);

service.setHandlerResolver(new HandlerResolver() {
    @SuppressWarnings("rawtypes")
    public List<Handler> getHandlerChain(PortInfo portInfo) {
        List<Handler> handlerList = new ArrayList<Handler>();
        handlerList.add(new RGBSOAPHandler());
        return handlerList;
    }
}); 
```

`RGBSOAPHandler`我从另一个[SO 答案](https://stackoverflow.com/questions/830691/how-do-i-add-a-soap-header-using-java-jax-ws)中获取的一些示例代码在哪里。

编辑：另外，如果我尝试在*绑定*而不是*服务*上设置处理程序，那么我会遇到与您相同的问题。所以如果它看起来像这样：

```
Service service = Service.create(url, qname);

Greeting greeting = service.getPort(Greeting.class);

BindingProvider bp = (BindingProvider) greeting;
SOAPBinding binding = (SOAPBinding) bp.getBinding();
binding.setMTOMEnabled(true);

List<Handler> handlerList = new ArrayList<Handler>();
handlerList.add(new RGBSOAPHandler());
binding.setHandlerChain(handlerList); 
```

然后我的文件被在线编码。我不知道为什么会这样，但我想答案是“不要那样做”。`Service`在对象上设置您的处理程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-20T00:33:06.560

看起来我受到框架和处理程序工作方式的限制。我认为在这个阶段，我唯一的选择是去一个较低的水平。我确实看过使用管，但同样的行为表现出来，所以看起来好像任何使用请求的 XML 的尝试都失败了。因此，我将不得不暂时放弃处理程序并在较低级别调查我是否可以使用[编解码器](http://jax-ws.java.net/nonav/jax-ws-20-fcs/arch/com/sun/xml/ws/api/pipe/Codec.html)来做我所追求的。一个 MTOM 实现听起来就像它可以在字节级别做我所追求的：

[http://jax-ws.java.net/nonav/jax-ws-20-fcs/arch/com/sun/xml/ws/encoding/MtomCodec.html](http://jax-ws.java.net/nonav/jax-ws-20-fcs/arch/com/sun/xml/ws/encoding/MtomCodec.html)

我想这将不那么复杂，但会随着我在编解码器方面的进展而更新。

@David：感谢您在处理程序方面的帮助，但看起来在那个级别没有解决方案。

**更新 1**

想出了一个适合我目的的替代解决方案。

1.  我使用我的 SOAPHandler 对 SOAP 消息的必要部分进行签名。
2.  编写了一个新的 SOAPHandler，然后接收结果消息并手动提取错误内联的二进制内容。
3.  然后我创建一个`AttachmentPart`并将第 2 步中的内容注入其中。它也需要 Base64 编码的文本，这很方便。然后为它`AttachmentPart`分配了一个参考 UUID `Content-Id`。
4.  然后，我创建一个新元素来代替引用 UUID 的 SOAP 主体中的 Base64 内容，如下所示：

    ```
    <xop:Include xmlns:xop="http://www.w3.org/2004/08/xop/include" href="cid:UUID!!!"></xop:Include> 
    ```

可能会就此写一篇博文，因为到目前为止，这已经是一段史诗般的旅程。这不是最好的解决方案，但肯定比走管/编解码器路径更容易。

# webgl - 如何将平滑着色应用于使用 Three.js ColladaLoader 渲染的 dae 模型

> ID：11944665
> 
> 赞同：0
> 
> 时间：2012-08-14T01:41:56.077
> 
> 标签：webgl, three.js

这是一个使用threejs中的collada加载器示例渲染的模型。我相信它使用的是平面着色。（因此块状的鼻子）

![](../Images/aad3201d7bedbba35a62312526dc17ca.png)

现在这是在 meshlab 中使用平滑着色器的模型

![](../Images/09da460af8b689a89b3400322e51393d.png)

我已经知道如何使用 MeshFaceMaterial 对 obj/js 文件应用平滑着色。我的问题是如何在使用 collada 加载程序渲染的 dae 文件上应用平滑着色？这在threejs中是否支持？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:46:25.257

你有没有尝试过：

```
var loader = new THREE.ColladaLoader();
callBack = function colladaReady( collada ) {
    var dae = collada.scene;
    var skin = collada.skins[ 0 ];

    dae.scale.x = dae.scale.y = dae.scale.z = 0.002;
    dae.updateMatrix();
    dae.material = new THREE.MeshLambertMaterial({ shading: THREE.SmoothShading});
    // or something of this sort....
    scene.add(dae);
};
loader.load(modelPath, callBack); 
```

我不知道它是否会有所帮助，但这是来自源的另一个示例：http: [//mrdoob.github.com/three.js/examples/webgl_loader_collada.html](http://mrdoob.github.com/three.js/examples/webgl_loader_collada.html)

# regex - gsub 每隔一个条件出现一次

> ID：11944668
> 
> 赞同：3
> 
> 时间：2012-08-14T01:42:12.113
> 
> 标签：regex, r

有时我使用 R 从 pdf 中解析文本以获取撰写文章时的引用（我使用 LATEX）。我想做的一件事是将左右引号更改为 LATEX 样式的左右引号。

LATEX 会变成`"dog"`（```dog''` 所以两个 ` 代表左边，两个 ' 代表右边）

这是我拥有的和想要获得的示例。

```
#currently
x <- c('I like "proper" cooking.', 'I heard him say, "I want some too" and "nice".')

[1] "I like \"proper\" cooking."   "I heard him say, \"I want some too\" and \"nice\"."

#desired outcome
[1] "I like ``proper'' cooking."   "I heard him say, ``I want some too'' and ``nice''." 
```

**编辑：**以为我会分享上下文的实际用途。使用 ttmaccer 的解决方案（适用于 Windows 机器）：

```
g <- function(){
    require(qdap)
    x <- readClipboard()
    x <- clean(paste2(x, " "))
    zz <- mgsub(c("- ", "“", "”"), c("", "``", "''"), x)
    zz <- gsub("\"([^\"].*?)\"","``\\1''", zz)
    writeClipboard(noquote(zz), format = 1)
} 
```

注意：`qdap`可以在[这里下载](https://github.com/trinker/qdap)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T02:01:39.980

一个天真的解决方案是：

```
> gsub("\"([^\"].*?)\"","``\\1''",x)

[1] "I like ``proper'' cooking."                        
[2] "I heard him say, ``I want some too'' and ``nice''." 
```

但我不确定你会如何处理`"some \"text\" with one \""`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T01:57:25.030

两阶段解决方案：

第 1 阶段：用于`"((?:[^\\"]|\\.)*)"`匹配双引号字符串
第 2 阶段：用于从第 1 阶段的第 1 组`\\"([^\\"]*)\\"`中替换`\"`

# python - Python 服务器响应代码

> ID：11944671
> 
> 赞同：0
> 
> 时间：2012-08-14T01:42:32.380
> 
> 标签：python, multithreading, http, ip, httpresponse

python中有没有办法检查指定IP范围（1.1.1.1 - 1.1.1.254）的标头中的服务器响应代码（200、301、404），甚至可以多线程执行？

PS喜欢它可能与“HTTPResponse.status”对象（http://docs.python.org/library/httplib.html）我现在如何检查它的IP范围？

PS 可能最好先检查端口 80 是否打开，然后只测试打开端口的端口，我认为这会加快速度，因为 254 ip 可能有 30 个正在使用端口 80。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:11:59.070

您可以尝试使用正常的 GET 请求连接到主机的根目录，超时时间很短（如果您希望它等待更多时间，则可以使用更长的超时时间）。然后你可以通过地图运行它。

```
import httplib
from multiprocessing import Pool

def test_ip(addr):
    conn = httplib.HTTPConnection(addr, timeout=1)
    try: 
        conn.request("GET", "/")
    except:
        return addr, httplib.REQUEST_TIMEOUT
    else:
        resp = conn.getresponse()
        return addr, resp.status
    finally:
        conn.close()

p = Pool(20)

results = p.map(test_ip, ["1.1.1.%d" % d for d in range(1,255)], chunksize=10)
print results

# [('1.1.1.1', 408), ('1.1.1.2', 408), ...] 
```

调整`Pool`大小并`chunksize`适合。

# python - 如何在 Python 中访问 SVN？

> ID：11944673
> 
> 赞同：3
> 
> 时间：2012-08-14T01:42:40.367
> 
> 标签：python, svn

我试图实现对异常收集系统的扩展。

从异常中提取文件路径和行号后，我想知道是谁编写了该行，而实现这一点的明显方法是“svn blame”。

但我不知道如何在 Python 中访问 SVN。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T01:47:55.470

`subversion` [这里](http://pysvn.tigris.org/docs/pysvn_prog_ref.html)有绑定称为`pysvn`. 我从未使用过它们，但它们看起来很合理。

您也可以只使用该`subprocess`模块并调用 to `svn`，但我会先尝试绑定。

# javascript - 如何从地理编码地址中找到 lat lng？

> ID：11944681
> 
> 赞同：1
> 
> 时间：2012-08-14T01:43:28.297
> 
> 标签：javascript, google-maps, google-maps-api-3

我正在尝试创建一个 Gmap 以允许人们对地址进行地理编码并找到相应的 lat lng。我想在我已经创建的表格中看到这一点。另外，我希望能够在拖动标记时更改坐标。

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="UTF-8">
    <title>Geocoder 10</title>
<style>
#map_canvas { width:400px; height:450px; }
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">

var geocoder;
var map;

function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-30.070, -51.190);
    var myOptions = {
        zoom: 9,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

function codeAddress() {
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                draggable: true,
            });

        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
    });
}

</script>
</head>

<body onload="initialize()">
<div id="map_canvas"></div>
<div>
    <input id="address" type="textbox" value="">
    <input type="button" value="Localizar!" onclick="codeAddress()"><br>
    Latitude: <input type="text" id="lat"><br>
    Longitude: <input type="text" id="lng"><br>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:37:23.697

在地理编码器回调中执行以下操作：

```
document.getElementById('lat').value = results[0].geometry.location.lat();
document.getElementById('lng').value = results[0].geometry.location.lng(); 
```

[工作示例](http://www.geocodezip.com/montenegro_geocode_map.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-17T00:16:03.297

好的......这是制作我想要的代码的代码。它可能不是那么优雅，但它确实有效。我使用 getPosition() 方法来获取坐标，只需单击地理编码标记！

```
<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="UTF-8">
    <title>Geocoder</title>
<style>
#map_canvas { width:400px; height:450px; }
</style>
<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false">
</script>
<script type="text/javascript">

var geocoder;
var map;

function initialize() {
    geocoder = new google.maps.Geocoder();
    var latlng = new google.maps.LatLng(-30.070, -51.190);
    var myOptions = {
        zoom: 9,
        center: latlng,
        mapTypeId: google.maps.MapTypeId.ROADMAP
    }
    map = new google.maps.Map(document.getElementById("map_canvas"), myOptions);
}

function codeAddress() {
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
        if (status == google.maps.GeocoderStatus.OK) {
            map.setCenter(results[0].geometry.location);
            var marker = new google.maps.Marker({
                map: map,
                position: results[0].geometry.location,
                draggable: true,
            });

        } else {
            alert("Geocode was not successful for the following reason: " + status);
        }
        google.maps.event.addListener(marker, 'click', function() {
            document.getElementById('coords').value = marker.getPosition();
        });
    });
}

</script>
</head>

<body onload="initialize()">
<div id="map_canvas"></div>
<div id="info"></div>
<div>
    <input id="address" type="textbox" value="">
    <input type="button" value="Localizar!" onclick="codeAddress()"><br>
    <input type="textbox" id="coords">
    </div>
</body>
</html> 
```

# php - 获取两个给定日期之间年月列表的微妙方法

> ID：11944684
> 
> 赞同：0
> 
> 时间：2012-08-14T01:44:50.090
> 
> 标签：php, date

我想获取两个给定日期之间的年月列表

这是我的代码

```
 function yearMonth($start_date, $end_date)  
    {  

        $years = array();
        $base  = 0 ;
        while(($start_date) < $end_date)
        {

                $y           = date('Y' , $start_date);
                // if its the original start_time check the month from 
                //current date else get the first day and month in that year
                $base        = ($base == 0 )  ? $start_date : strtotime("{$y}-1-1"); 

                for($i = 1 ; $i <= 12 ; $i++ )
                {
                   if($base > $end_date)
                   break;
                   $years[date("Y", $start_date)][] = date("F" , $base); 
                   $base += 2629743.83;

                }

               $base += $start_date += 31556926 ;

        }
        return $years;

    }  

    $list  =  yearMonth(strtotime("2010-11-8") , strtotime("2012-11-11") );  
    var_dump($list); 
```

所以这就是问题所在

```
$base     = ($base == 0 )  ? $start_date : strtotime("{$y}-1-1"); 
```

在这里，我检查是否`start_date`是我传递给函数的原始数据，如果它是我为查找该年的月份设置的基础等于 start_date，如果它不是原始的，我将基础设置为该年的第一个月

现在我们解决我的问题

```
for($i = 1 ; $i <= 12 ; $i++ ) 
```

在这里我假设那一年有 12 个月，但如果它是原始的 start_date 它可能会更少

如何计算给定日期年份的剩余月份？

另一个问题在这里

```
 for($i = 1 ; $i <= 12 ; $i++ )
            {
                   if($base > $end_date)
                   break;
                   $years[date("Y", $start_date)][] = date("F" , $base); 
                   $base += 2629743.83;

            } 
```

所以我想每个月都有 2629743.83 秒，但它不是很准确，因为闰年

有没有更清洁的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T06:08:44.943

我有两个解决方案，要么更改现有代码，要么使用 PHP 的内置 DateTime 类。

您想在代码中修复两件事：

*   仅列出起始年份的剩余月份 - 您可以通过添加检查`$base`日期是否在您输出的年份来做到这一点。
*   在每年数组中获取正确的月份 - 我们可以`$base`通过将每个月的正确天数递增来做到这一点。我们可以使用 获取该月的天数`date('t')`。

```
for($i = 1 ; $i <= 12 ; $i++ )
{
   if($base > $end_date)
   break;
   $base_year = date('Y', $base);
   if ($base_year == $y) {
    $years[date("Y", $start_date)][] = date("F" , $base); 
    $base += 60*60*24*date('t', strtotime($base_year.'-'.$i."-1")); 
   }
} 
```

或者，您可以使用 DateTime 对象来简化代码。此示例基于[DatePeriod](http://www.php.net/manual/en/class.dateperiod.php)注释中的一些代码。

注意：函数的参数不需要用`strtotime`.

```
function yearMonth($start_date, $end_date) 
{

    $begin = new DateTime( $start_date );
    $end = new DateTime( $end_date);
    $interval = new DateInterval('P1M'); // 1 month interval

    $period = new DatePeriod($begin, $interval, $end);

    foreach ( $period as $dt )
        $years[$dt->format( "Y" )][] = $dt->format( "F" );

    return $years;

}

$list  =  yearMonth("2010-11-8", "2012-11-11");  
var_dump($list); 
```

# entity-framework - 从 DbSet 转换为 IEnumerable 会导致查询执行吗？

> ID：11944687
> 
> 赞同：8
> 
> 时间：2012-08-14T01:45:28.610
> 
> 标签：entity-framework, dbset

我的日志存储库中有以下两种方法。

```
public IEnumerable<Log> GetAll()
{
   var db = new CasLogEntities();
   return db.Logs;
}           

public DbSet<Log> GetAllSet()
{
   var db = new CasLogEntities();
   return db.Logs;
} 
```

唯一的区别是一个返回一个 IEnumerable 的 Log，另一个返回一个 DbSet 的 Log。

在我的资产控制器中，我有以下代码

```
var allLogs = _logRepo.GetAllSet();
var Logs = (from log in allLogs
              group log by log.DeviceId
              into l
              select new {DeviceId = l.Key, TimeStamp = l.Max(s => s.TimeStamp)}).ToList(); 
```

现在的问题是，我在 group by 语句中获得了巨大的性能差异，具体取决于我调用的回购方法之一。

*   返回 DbSet 的 getAllSet 快如闪电，
*   GetAll 返回 IEnumerable 真的很慢。

任何人都可以解释这一点。我在想 DbSet 到 GetAll 中的 IEnumerable 的转换导致查询执行，因此我在大量内存集上进行分组。由于 GetAllSet 将查询执行推迟到“ToList()”，因此在服务器上按组工作。

它是否正确？有没有另一种方式来解释这一点？

我更希望 GetAll 返回 IEnumerable，因为我更熟悉它并且它更易于测试。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T02:40:22.303

不，转换为`IEnumerable<T>`不会导致它执行。

另一方面，它**确实将查询带入对象空间，因此当您投影到匿名类型时，生成的 SQL 会有所不同。**观看 SQL Server Profiler 以查看差异。

这可以解释性能差异。

如果您返回`IQueryable<T>`而不是`IEnumerable<T>`，则 SQL/性能应该是相同的。

# java - 在java中安排一个单线程重复运行，但如果前一次运行没有完成则跳过当前运行

> ID：11944688
> 
> 赞同：11
> 
> 时间：2012-08-14T01:45:29.570
> 
> 标签：java

有时重复任务的持续时间比它的周期长（在我的例子中，这可能一次发生几个小时）。想想一个重​​复的任务，它需要 7 分钟运行，并且计划每 10 分钟运行一次，但有时连续几个小时每次运行需要 15 分钟。

Timer 和 ScheduledThreadPoolExecutor 类都有一个 scheduleAtFixedRate 方法，通常用于此类功能。但是，两者都具有“落后时努力追赶”的特点。换句话说，如果 Timer 落后于几次执行，它会建立一个工作队列，该队列将连续工作，直到它赶上如果没有任何任务花费超过指定期间。如果上一次运行未完成，我想通过跳过当前执行来避免这种行为。

我有一个解决方案，涉及搞乱池执行器的 afterExecution 方法，重新计算延迟，并用新的延迟重新安排可运行对象，但想知道是否有更简单的方法，或者这个功能是否已经存在于某个公共库中. 我知道以固定延迟而不是固定周期进行调度，但这对我不起作用，因为尝试在固定时间执行任务很重要。有没有比我的 afterExecution 解决方案更简单的选项？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-14T02:26:08.057

我认为您想要的是长时间运行的任务本身不在 ScheduledExecutorService 本身中运行，而是在后台线程中运行。那么固定速率任务总是会很快完成，因为它只用于检查是否在后台启动实际任务（或者不启动，如果它仍然从上次运行）。

```
ScheduledExecutorService executorService = Executors.newScheduledThreadPool(1);
final Runnable actualTask = null;

executorService.scheduleAtFixedRate(new Runnable() {
    private final ExecutorService executor = Executors.newSingleThreadExecutor();
    private Future<?> lastExecution;
    @Override
    public void run() {
        if (lastExecution != null && !lastExecution.isDone()) {
            return;
        }
        lastExecution = executor.submit(actualTask);
    }
}, 10, 10, TimeUnit.MINUTES); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-04-17T07:47:10.653

你可以改用`scheduleWithFixedDelay`方法。它很相似，但是这个没有错过运行的队列，而是仅在当前 Runnable 终止时才重新开始计数。

[文档](https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ScheduledThreadPoolExecutor.html#scheduleWithFixedDelay-java.lang.Runnable-long-long-java.util.concurrent.TimeUnit-)说明 Runnable的重新执行将根据延迟参数进行安排：

> 一次执行终止与下一次执行开始之间的延迟。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T03:41:29.527

制作第三个班级，例如称为协调员。Coordinator 有一个同步的 startRunning() 方法，它将 isRunning 设置为 true，如果另一个线程尚未运行，则返回 true。还应该有一个同步的 stopRunning 方法，它将 isRunning 设置为 false。如果 runnable 已经在运行，则返回 true。您创建此类的单个实例并将引用传递给您构造的所有可运行文件。在 runnable 的 run 方法中，您首先调用 startRunning 并检查返回以验证另一个尚未运行。确保将代码放在 run() 中的 try-finally 中，并从 finally 块中调用 stopRunning。

# scala - 您如何使用 scalaz.WriterT 登录 for 表达式？

> ID：11944694
> 
> 赞同：22
> 
> 时间：2012-08-14T01:46:38.853
> 
> 标签：scala, logging, scalaz

您如何使用 scalaz.WriterT 进行日志记录？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-08-14T11:59:33.827

**关于单子变压器**

这是一个非常简短的介绍。[您可以在haskellwiki](http://www.haskell.org/haskellwiki/Monad_Transformers_Explained)或@jrwest 的这张[精彩幻灯片](https://speakerdeck.com/u/jrwest/p/monad-transformers)上找到更多信息。

Monads 不组合，这意味着如果你有一个 monad`A[_]`和一个 monad `B[_]`，那么`A[B[_]]`就不能*自动*派生。然而，在大多数情况下，这可以通过为给定的 monad 使用所谓的 monad 转换器来实现。

如果我们有 monad 的 monad 转换`BT`器`B`，那么我们可以`A[B[_]]`为*任何 monad 组成一个新的 monad* `A`。没错，通过使用`BT`，我们可以放入`B`里面`A`。

**scalaz中的Monad变压器使用**

*以下假设为 scalaz 7，因为坦率地说，我没有将 monad 转换器与 scalaz 6 一起使用*。

monad 转换`MT`器有两个类型参数，第一个是包装器（外部）monad，第二个是 monad 堆栈底部的实际数据类型。注意：它可能需要更多类型参数，但这些参数与转换器无关，而是特定于给定的 monad（如 a 的记录类型`Writer`或 a 的错误类型`Validation`）。

因此，如果我们`List[Option[A]]`想要将其视为单个组合的 monad，那么我们需要`OptionT[List, A]`. 如果我们有`Option[List[A]]`，我们需要`ListT[Option, A]`。

到那里怎么走？如果我们有 non-transformer 值，我们通常可以将其包装起来`MT.apply`以获取 Transformer 内部的值。为了从转换后的形式恢复正常，我们通常调用`.run`转换后的值。

所以`val a: OptionT[List, Int] = OptionT[List, Int](List(some(1))`和`val b: List[Option[Int]] = a.run`是相同的数据，只是表示不同。

托尼莫里斯建议最好尽早进入转换版本并尽可能长时间地使用它。

*注意：使用转换器组合多个 monad 会产生一个转换器堆栈，其类型与普通数据类型的顺序正好相反。所以一个正常的`List[Option[Validation[E, A]]]`看起来像`type ListOptionValidation[+E, +A] = ValidationT[({type l[+a] = OptionT[List, a]})#l, E, A]`*

*更新：从 scalaz 7.0.0-M2 开始，`Validation`（正确地）不是 Monad，因此`ValidationT`不存在。改为使用`EitherT`。*

**使用 WriterT 进行日志记录**

根据您的需要，您可以使用`WriterT`没有任何特定外部 monad（在这种情况下，在后台它将使用`Id`不做任何事情的 monad），或者可以将日志记录放在 monad 中，或者将 monad 放在日志记录中.

**第一种情况，简单的日志记录**

```
import scalaz.{Writer}
import scalaz.std.list.listMonoid
import scalaz._

def calc1 = Writer(List("doing calc"), 11)
def calc2 = Writer(List("doing other"), 22)

val r = for {
  a <- calc1
  b <- calc2
} yield {
  a + b
}

r.run should be_== (List("doing calc", "doing other"), 33) 
```

我们导入`listMonoid`实例，因为它也提供了`Semigroup[List]`实例。它是必需`WriterT`的，因为需要日志类型为半组才能组合日志值。

**第二种情况，在 monad 中登录**

在这里，为了简单起见，我们选择了`Option`monad。

```
import scalaz.{Writer, WriterT}
import scalaz.std.list.listMonoid
import scalaz.std.option.optionInstance
import scalaz.syntax.pointed._

def calc1 = WriterT((List("doing calc") -> 11).point[Option])
def calc2 = WriterT((List("doing other") -> 22).point[Option])

val r = for {
  a <- calc1
  b <- calc2
} yield {
  a + b
}

r.run should be_== (Some(List("doing calc", "doing other"), 33)) 
```

使用这种方法，由于日志记录在`Option`monad 内部，如果任何绑定选项是`None`，我们只会得到`None`没有任何日志的结果。

*注意：`x.point[Option]`效果与 相同`Some(x)`，但可能有助于更好地概括代码。不致命只是暂时这样做。*

**第三种选择，在 monad 之外登录**

```
import scalaz.{Writer, OptionT}
import scalaz.std.list.listMonoid
import scalaz.std.option.optionInstance
import scalaz.syntax.pointed._

type Logger[+A] = WriterT[scalaz.Id.Id, List[String], A]

def calc1 = OptionT[Logger, Int](Writer(List("doing calc"), Some(11): Option[Int]))
def calc2 = OptionT[Logger, Int](Writer(List("doing other"), None: Option[Int]))

val r = for {
  a <- calc1
  b <- calc2
} yield {
  a + b
}

r.run.run should be_== (List("doing calc", "doing other") -> None) 
```

在这里，我们使用`OptionT`将`Option`monad 放在`Writer`. 其中一项计算`None`表明，即使在这种情况下，日志也会被保留。

**最后的评论**

在这些示例`List[String]`中被用作日志类型。然而，使用`String`几乎不是最好的方式，只是日志框架强加给我们的一些约定。例如，最好定义一个自定义日志 ADT，如果需要输出，请尽可能晚地将其转换为字符串。通过这种方式，您可以序列化日志的 ADT，并在以后以编程方式轻松分析它（而不是解析字符串）。

`WriterT`有许多有用的方法可以用来简化日志记录，请查看源代码。例如，给定一个`w: WriterT[...]`，您可以使用 添加一个新的日志条目`w :++> List("other event")`，甚至使用当前保存的值进行日志记录`w :++>> ((v) => List("the result is " + v))`，等等。

示例中有许多显式且冗长的代码（类型、调用）。与往常一样，这些都是为了清楚起见，通过提取常见类型和操作在代码中重构它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T00:21:58.790

```
type OptionLogger[A] = WriterT[Option, NonEmptyList[String], A]

      val two: OptionLogger[Int] = WriterT.put(2.some)("The number two".pure[NonEmptyList])
      val hundred: OptionLogger[Int] = WriterT.put(100.some)("One hundred".pure[NonEmptyList])

      val twoHundred = for {
        a <- two
        b <- hundred
      } yield a * b

      twoHundred.value must be equalTo(200.some)

      val log = twoHundred.written map { _.list } getOrElse List() mkString(" ")
      log must be equalTo("The number two One hundred") 
```

# php - PHP PSR-1 通过 __call 和 __callStatic，是不是太丑了？

> ID：11944696
> 
> 赞同：1
> 
> 时间：2012-08-14T01:46:50.273
> 
> 标签：php

我的项目中有一个特定的类，它有很多静态和类方法（这是故意的，在这种情况下，使用一个大类而不是许多小类更有意义）。

这些方法是使用下划线大小写来定义的，例如**method_name**而不是符合 PSR-1 的**methodName**，我们正在将一堆东西转换为 PSR-1。

现在，我们可以使用类似这些方法（如下）来允许使用其中任何一个（method_name 和 methodName）。优点是我们不会冒险引入新的错误，并且所有使用它的当前代码仍然有效，并且我们可以慢慢迁移它们。

```
<?php

// enable PSR-1 for class methods
public static function __callStatic($name, $args) {
    $toLower = function($c) { return '_'.strtolower($c[1]); };
    $underscoreCased = preg_replace_callback('/([A-Z])/', $toLower, $name);
    return forward_static_call_array(['ClassName', $underscoreCased], $args);
}

// enable PSR-1 for instance metods
public function __call($name, $args) {
    $toLower = function($c) { return '_'.strtolower($c[1]); };
    $underscoreCased = preg_replace_callback('/([A-Z])/', $toLower, $name);
    return call_user_func_array([$this, $underscoreCased], $args);
} 
```

现在的问题是，这太丑陋了吗？尽管有上面列出的好处，我们是否应该避免这样做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:53:24.183

我不会这样做有几个原因：

1.  魔术函数 ( `__call()`, `__callStatic()`, `__get()`, ...) 很慢，真的，真的很慢，[显示在这里](http://www.garfieldtech.com/blog/magic-benchmarks)
2.  导航：该类提供了一个方法`do_something`，但您的代码调用了`Object::doSomething()`. 这是我检查实现的一个障碍，因为我不能简单地 Ctrl+F for `doSomething`. IDE 和代码完成也是如此。
3.  为什么要迁移？我想您有比将内部私有项目中的方法名称缓慢迁移到为与其他项目的互操作性而定义的命名法更重要的事情要做。不要误会我的意思，我不会说 PSR 是胡说八道，我只是认为除非绝对必要，否则不必强迫旧代码遵守。（在这种情况下，这意味着这个特定的类是您整个项目中唯一*不*遵守它的类）

所以，基本上我的建议是：如果你真的需要将这个类迁移到 PSR-1，要么一次性全部完成，要么顺其自然。但是不要仅仅为了符合命名方案而引入魔术函数。

# postgresql - pg_rman 恢复

> ID：11944697
> 
> 赞同：1
> 
> 时间：2012-08-14T01:46:59.760
> 
> 标签：postgresql

这些天我正在学习postgreSQL（9.0.1），尤其是[pg_rman](http://code.google.com/p/pg-rman/)（1.1.2）......

我所做的是......

1.  创建两个表 t1、t2；
2.  pg_rman 安装。
3.  pg_rman 初始化 -B $RBACKUP_PATH
4.  pg_rman 验证 -B $RBACKUP_PATH
5.  删除表 t1、t2；
6.  pg_ctl 停止 -m 快速
7.  pg_rman 恢复 -B $RBACKUP_PATH

一切工作正常，但是......当我启动 postgresql 服务器进程时......有些消息是这样的：

```
cp: cannot stat `/postDATA/ARCHIVE_LOG/00000007000000000000000E': No such file or directory 
```

无论如何，如果一切正常，我在进行完整备份之前创建的 t1、t2 表必须存在，对吗？如果是这样，我的脚本如下...

```
localhost.localdomain:[/postDATA/RBACKUP]psql -d user1db -U user1
psql (9.0.1)
Type "help" for help.

user1db=> create table t1(col1 char(1));
CREATE TABLE
user1db=> insert into t1 values('1');
INSERT 0 1
user1db=> insert into t1 values('1');
INSERT 0 1
user1db=> insert into t1 values('1');
INSERT 0 1
user1db=> insert into t1 values('1');
INSERT 0 1
user1db=> insert into t1 values('1');
INSERT 0 1
user1db=> insert into t1 values('1');
INSERT 0 1
user1db=> insert into t1 values('1');
INSERT 0 1
user1db=> insert into t1 values('1');
INSERT 0 1
user1db=> insert into t1 values('1');
INSERT 0 1

user1db=> create table t2(col1 char(1));
CREATE TABLE
user1db=> insert into t2 values('1');
INSERT 0 1
user1db=> insert into t2 values('1');
INSERT 0 1
user1db=> insert into t2 values('1');
INSERT 0 1
user1db=> insert into t2 values('1');
INSERT 0 1
user1db=> insert into t2 values('1');
INSERT 0 1
user1db=> insert into t2 values('1');
INSERT 0 1
user1db=> insert into t2 values('1');
INSERT 0 1
user1db=> insert into t2 values('1');
INSERT 0 1
user1db=> insert into t2 values('1');
INSERT 0 1
user1db=> \q

localhost.localdomain:[/home/postgres]ll
total 17592
-rwxrwxr-x 1 postgres postgres    67103 Aug 10 16:24 pg_rman-1.1.2.tar.gz
drwxrwxr-x 6 postgres postgres     4096 Aug 13 17:04 postgresql-9.0.1
-rwxrwxrwx 1 postgres postgres 17898437 Aug  6 10:10 postgresql-9.0.1.tar.gz

localhost.localdomain:[/home/postgres]tar -xvzf pg_rman-1.1.2.tar.gz
pg_rman/
pg_rman/delete.c
pg_rman/pg_rman.c
pg_rman/pgut/
pg_rman/pgut/pgut.h
pg_rman/pgut/pgut-port.h
pg_rman/pgut/pgut-port.c
pg_rman/pgut/pgut.c
pg_rman/pgsql_src/
pg_rman/pgsql_src/COPYRIGHT.pgsql_src
pg_rman/pgsql_src/pg_crc.c
pg_rman/pgsql_src/pg_ctl.c
pg_rman/data/
pg_rman/data/sample_backup/
pg_rman/data/sample_backup/20090601/
pg_rman/data/sample_backup/20090601/170553/
pg_rman/data/sample_backup/20090601/170553/file_arclog.txt
pg_rman/data/sample_backup/20090601/170553/backup.ini
pg_rman/data/sample_backup/20090601/170553/srvlog/
pg_rman/data/sample_backup/20090601/170553/arclog/
pg_rman/data/sample_backup/20090601/170553/database/
pg_rman/data/sample_backup/20090601/170553/database/PG_VERSION
pg_rman/data/sample_backup/20090601/170553/file_database.txt
pg_rman/data/sample_backup/backup/
pg_rman/data/sample_backup/pg_rman.ini
pg_rman/data/sample_backup/20090531/
pg_rman/data/sample_backup/20090531/170553/
pg_rman/data/sample_backup/20090531/170553/file_arclog.txt
pg_rman/data/sample_backup/20090531/170553/backup.ini
pg_rman/data/sample_backup/20090531/170553/srvlog/
pg_rman/data/sample_backup/20090531/170553/arclog/
pg_rman/data/sample_backup/20090531/170553/database/
pg_rman/data/sample_backup/20090531/170553/database/PG_VERSION
pg_rman/data/sample_backup/20090531/170553/file_database.txt
pg_rman/data/sample_backup/timeline_history/
pg_rman/data/sample_backup/20090602/
pg_rman/data/sample_backup/20090602/170553/
pg_rman/data/sample_backup/20090602/170553/backup.ini
pg_rman/data/sample_backup/20090602/170553/srvlog/
pg_rman/data/sample_backup/20090602/170553/arclog/
pg_rman/data/sample_backup/20090602/170553/database/
pg_rman/data/sample_backup/20090603/
pg_rman/data/sample_backup/20090603/170553/
pg_rman/data/sample_backup/20090603/170553/file_arclog.txt
pg_rman/data/sample_backup/20090603/170553/backup.ini
pg_rman/data/sample_backup/20090603/170553/srvlog/
pg_rman/data/sample_backup/20090603/170553/arclog/
pg_rman/data/sample_backup/20090603/170553/database/
pg_rman/data/sample_backup/20090603/170553/file_srvlog.txt
pg_rman/data/sample_backup/20090603/170553/file_database.txt
pg_rman/show.c
pg_rman/data.c
pg_rman/init.c
pg_rman/backup.c
pg_rman/dir.c
pg_rman/xlog.c
pg_rman/parray.h
pg_rman/COPYRIGHT
pg_rman/pg_rman.h
pg_rman/sql/
pg_rman/sql/option.sql
pg_rman/sql/option.sh
pg_rman/sql/backup.sql
pg_rman/sql/init.sql
pg_rman/sql/backup_restore.sh
pg_rman/sql/show_validate.sql
pg_rman/sql/backup_restore.sql
pg_rman/Makefile
pg_rman/parray.c
pg_rman/restore.c
pg_rman/catalog.c
pg_rman/util.c
pg_rman/validate.c
pg_rman/expected/
pg_rman/expected/option.out
pg_rman/expected/backup_restore.out
pg_rman/expected/show_validate.out
pg_rman/expected/init.out

localhost.localdomain:[/home/postgres]cd pg_rman

localhost.localdomain:[/home/postgres/pg_rman]make USE_PGXS=1
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o backup.o backup.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o catalog.o catalog.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o data.o data.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o delete.o delete.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o dir.o dir.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o init.o init.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o parray.o parray.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o pg_rman.o pg_rman.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o restore.o restore.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o show.o show.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o util.o util.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o validate.o validate.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o xlog.o xlog.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o pgsql_src/pg_ctl.o pgsql_src/pg_ctl.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o pgsql_src/pg_crc.o pgsql_src/pg_crc.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o pgut/pgut.o pgut/pgut.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv -I/usr/local/pgsql/include -I. -I. -I/usr/local/pgsql/include/server -I/usr/local/pgsql/include/internal -D_GNU_SOURCE -I/usr/include/libxml2   -c -o pgut/pgut-port.o pgut/pgut-port.c
gcc -O2 -Wall -Wmissing-prototypes -Wpointer-arith -Wdeclaration-after-statement -Wendif-labels -fno-strict-aliasing -fwrapv backup.o catalog.o data.o delete.o dir.o init.o parray.o pg_rman.o restore.o show.o util.o validate.o xlog.o pgsql_src/pg_ctl.o pgsql_src/pg_crc.o pgut/pgut.o pgut/pgut-port.o -L/usr/local/pgsql/lib -lpgport -L/usr/local/pgsql/lib -lpq -L/usr/local/pgsql/lib -L/usr/lib  -Wl,-rpath,'/usr/local/pgsql/lib',--enable-new-dtags  -lpgport -lxml2 -lpam -lz -lreadline -ltermcap -lcrypt -ldl -lm  -o pg_rman

localhost.localdomain:[/home/postgres/pg_rman]make USE_PGXS=1 install
/bin/mkdir -p '/usr/local/pgsql/bin'
/bin/sh /usr/local/pgsql/lib/pgxs/src/makefiles/../../config/install-sh -c  pg_rman '/usr/local/pgsql/bin

localhost.localdomain:[/home/postgres/pg_rman]egrep -i "wal_level|archive_mode|archive_command" $PGDATA/postgresql.conf
wal_level = archive         # minimal, archive, or hot_standby
archive_mode = on       # allows archiving to be done
archive_command = 'cp -i %p /postDATA/ARCHIVE_LOG/%f'       # command to use to archive a logfile segment

localhost.localdomain:[/home/postgres/pg_rman]pg_rman init -B /postDATA/RBACKUP
INFO: ARCLOG_PATH is set to '/postDATA/ARCHIVE_LOG'
INFO: SRVLOG_PATH is set to '/postDATA/DATA/pg_log'

localhost.localdomain:[/home/postgres/pg_rman]cd /postDATA/RBACKUP

localhost.localdomain:[/postDATA/RBACKUP]ll
total 24
drwx------ 4 postgres postgres 4096 Aug 14 09:43 backup
-rw-rw-r-- 1 postgres postgres   73 Aug 14 09:43 pg_rman.ini
drwx------ 2 postgres postgres 4096 Aug 14 09:43 timeline_history
localhost.localdomain:[/postDATA/RBACKUP]vi pg_rman.ini
ARCLOG_PATH='/postDATA/ARCHIVE_LOG'
SRVLOG_PATH='/postDATA/DATA/pg_log'
~                                                                                                                                                                                                                                
~                                                                                                                                                                                                                                
~                                                                                                                                                                                                                                
~         
"pg_rman.ini" 3L, 73C
localhost.localdomain:[/postDATA/RBACKUP]pg_rman -B /postDATA/RBACKUP show
============================================================================
Start                Time   Total    Data     WAL     Log  Backup   Status  
============================================================================

localhost.localdomain:[/postDATA/RBACKUP]pg_rman backup -B /postDATA/RBACKUP -b f
INFO: database backup start
NOTICE:  pg_stop_backup complete, all required WAL segments have been archived

localhost.localdomain:[/postDATA/RBACKUP]pg_rman -B /postDATA/RBACKUP show
============================================================================
Start                Time   Total    Data     WAL     Log  Backup   Status  
============================================================================
2012-08-14 09:46:37    4m    26MB    ----   318MB    ----   344MB   DONE

localhost.localdomain:[/postDATA/RBACKUP]pg_rman -B /postDATA/RBACKUP validate
INFO: validate: 2012-08-14 09:46:37

localhost.localdomain:[/postDATA/RBACKUP]pg_rman -B /postDATA/RBACKUP show
============================================================================
Start                Time   Total    Data     WAL     Log  Backup   Status  
============================================================================
2012-08-14 09:46:37    4m    26MB    ----   318MB    ----   344MB   OK

localhost.localdomain:[/postDATA/RBACKUP]psql -d user1db -U user1
psql (9.0.1)
Type "help" for help.

user1db=> \d
       List of relations
 Schema | Name | Type  | Owner 
--------+------+-------+-------
 public | t1   | table | user1
 public | t2   | table | user1
user1db=> drop table t1;
DROP TABLE
user1db=> drop table t2;
DROP TABLE
user1db=> \d
No relations found.
user1db=> \q

localhost.localdomain:[/postDATA/RBACKUP]pg_ctl stop -m fast
LOG:  received fast shutdown request
LOG:  aborting any active transactions
waiting for server to shut down....LOG:  autovacuum launcher shutting down
LOG:  shutting down
LOG:  database system is shut down
 done
server stopped

localhost.localdomain:[/postDATA/RBACKUP]pg_rman restore -B /postDATA/RBACKUP
INFO: validate: 2012-08-14 09:46:37
INFO: restore complete. Recovery starts automatically when the PostgreSQL server is started.

localhost.localdomain:[/postDATA/RBACKUP]pg_ctl start
server starting
localhost.localdomain:[/postDATA/RBACKUP]LOG:  database system was interrupted; last known up at 2012-08-14 09:46:57 KST
LOG:  restored log file "00000007.history" from archive
LOG:  restored log file "00000007.history" from archive
LOG:  starting archive recovery
LOG:  restored log file "00000007000000000000000C" from archive
LOG:  redo starts at 0/C000070
LOG:  consistent recovery state reached at 0/D000000
LOG:  restored log file "00000007000000000000000D" from archive
cp: cannot stat `/postDATA/ARCHIVE_LOG/00000007000000000000000E': No such file or directory
LOG:  record with zero length at 0/E000070
LOG:  redo done at 0/E000020
LOG:  last completed transaction was at log time 2012-08-14 09:59:05.321848+09
cp: cannot stat `/postDATA/ARCHIVE_LOG/00000008.history': No such file or directory
LOG:  selected new timeline ID: 8
LOG:  restored log file "00000007.history" from archive
LOG:  archive recovery complete
LOG:  autovacuum launcher started
LOG:  database system is ready to accept connections

localhost.localdomain:[/postDATA/RBACKUP]psql -d user1db -U user1
psql (9.0.1)
Type "help" for help.

user1db=> \d
No relations found. 
```

如何通过备份恢复我的表（t1，t2）？？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T06:36:01.403

这里的问题是您完全恢复了备份。这意味着您实际上恢复到表被删除之后的点。

您可以从以下几行中看到：

```
INFO: validate: 2012-08-14 09:46:37 
```

和

```
LOG:  last completed transaction was at log time 2012-08-14 09:59:05.321848+09 
```

这可能是因为您仍然将归档日志留在目录中。您需要做的是`/postDATA/ARCHIVE_LOG/`在执行数据库的恢复/启动之前删除所有内容（这里我假设 pg_rman 将恢复所需的所有存档日志存档到备份目录中），或者您需要修改 recovery.conf 文件并添加要恢复的时间戳（应该是删除之前的时间），然后添加参数`recovery_target_time`.

如果指定，pg_rman 应该支持自动添加，但我不确定它是否按预期工作。

# java - 将图像添加到按钮

> ID：11944699
> 
> 赞同：0
> 
> 时间：2012-08-14T01:47:18.790
> 
> 标签：java, image, swing, icons, jbutton

```
package net.tictacsnow.src;

import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class tictacsnow implements ActionListener {

private int[][] winCombinations = new int[][] {
        {0, 1, 2}, {3, 4, 5}, {6, 7, 8}, //horizontal wins
        {0, 3, 6}, {1, 4, 7}, {2, 5, 8}, //virticle wins
        {0, 4, 8}, {2, 4, 6} //diagonal wins
};
private JButton buttons[] = new JButton[9];
static int width = 480;
static int height = 640;
private static JFrame congrats = new JFrame("Winner");
private int count = 0;
static private  String letter = "";
private static JFrame mainframe = new JFrame();
static String x = "X";
static String y = "Y";

public static void main(String[] args) {
    tictacsnow snow = new tictacsnow();
    snow.go();
}

    public void go() {

    congrats.setSize(240, 320); 

    mainframe.setSize(width, height);
    mainframe.setLocationRelativeTo(null);
    mainframe.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    mainframe.setLayout(new GridLayout(3,3));
    mainframe.setVisible(true);

     for(int i=0; i<=8; i++) {
         buttons[i] = new JButton();
         mainframe.add(buttons[i]);
         buttons[i].addActionListener(this);}
     }

public void actionPerformed(ActionEvent a) {
    Object source = a.getSource();

    count++;

    if(count % 2 == 0)
    {
    letter = "O";
    }
    else
    {
    letter = "X";
    }

    JButton pressedButton = (JButton)source;
    pressedButton.setText(letter);
    pressedButton.setEnabled(false);

for(int i=0; i<=7; i++)
{
if( buttons[winCombinations[i][0]].getText().equals(buttons[winCombinations[i]         [1]].getText()) &&
buttons[winCombinations[i][1]].getText().equals(buttons[winCombinations[i][2]].getText()) &&
buttons[winCombinations[i][0]].getText() != "")
{
congrats.setVisible(true);
}
}}} 
```

我正在开发井字游戏。目前，X 和 O 只是文本。我需要它们是图像，但所有 9 个按钮都在 1 个变量中......

```
for(int i=0; i<=8; i++) {
    buttons[i] = new JButton();
    mainframe.add(buttons[i]);
    buttons[i].addActionListener(this);} 
```

那么，当... if(count % 2 == 0) 时，我如何获得“O”的图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T01:53:34.033

```
Icon icon = null;
if(count % 2 == 0)
{
    icon = iconThatIsO;
}
else
{
    icon = iconThatIsX;
}

JButton pressedButton = (JButton)source;
pressedButton.setIcon(icon); 
```

看看[如何使用图标](http://docs.oracle.com/javase/tutorial/uiswing/components/icon.html)

# javascript - 表单同步提交后是否执行js

> ID：11944703
> 
> 赞同：1
> 
> 时间：2012-08-14T01:47:44.470
> 
> 标签：javascript, forms, submit

我的代码如下：

```
form.submit();//synchronized submit, not asynchronous,the form is not a html form but created by javascript
some codes here;//Is this line executed, or it sometimes executed sometimes not 
```

我在第二行有一些统计代码（向服务器发送 http 请求）并真正得到了一些数据。因为统计数据和预期之间有很大的差距，我怀疑第二行总是被执行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T01:51:36.590

这取决于表单在提交时所做的事情：

*   如果表单提交正常，则代码*可以*运行。普通表单提交会将浏览器重定向到 action 属性中定义的 url。代码可能会运行，但页面已经准备离开，因此您可能看不到代码之后的`form.submit()`作用。

*   如果表单提交并被 JavaScript（可能被事件处理程序）捕获，则之后的代码`form.submit()` *可以*运行，但取决于该事件处理程序的作用。如果处理程序没有阻止正常的表单提交，则情况与第一种相同。如果处理程序阻止正常的表单提交，那么它可以运行。

我建议您为该表单构建一个处理程序，以防止使用`return false`和/或之类`event.preventDefault()`的技术正常提交表单，并且还在那里运行代码。

# string - 确定 2 条主链的匹配与不匹配的比率？

> ID：11944707
> 
> 赞同：0
> 
> 时间：2012-08-14T01:48:36.857
> 
> 标签：string, perl, dna-sequence

> **可能重复：**
> [如何绘制 DNA 序列的基因图，例如 ATGCCGCTGCGC？](https://stackoverflow.com/questions/5610265/how-to-plot-a-gene-graph-for-a-dna-sequence-say-atgccgctgcgc)

我试图编写一个 Perl 脚本来比较两个 DNA 序列（可以说每个长度为 60 个字符）对齐，然后显示序列彼此匹配与不匹配的比率。但我运气不太好。如果它有帮助我可以上传我的代码，但它没有用。这是我试图在下面实现的示例。

例如

```
A T C G T A C
| | | | | | |
T A C G A A C 
```

所以上面例子的匹配项是 4。不匹配项是：3。给它一个 4.3 的比率。

任何帮助将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T13:49:08.547

Here is an approach which gives a NULL, \0, for each match in an `xor` comparison.

```
#!/usr/bin/perl
use strict;
use warnings;

my $d1='ATCGTAC'; 
my $d2='TACGAAC'; 

my $len = length $d1; # assumes $d1 and $d2 are the same length

my $matches = () = ($d1 ^ $d2) =~ /\0/g;

printf "ratio of %f", $matches / ($len - $matches); 
```

*Output*: ratio of 1.333333

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:09:03.497

只需获取其中一个字符串的长度（我们假设字符串长度相等，对吗？），然后使用`substr`.

```
my @strings = ( 'ATCGTAC', 'TACGAAC' );

my $matched;
foreach my $ix ( 0 .. length( $strings[0] ) - 1 ) {
  $matched++
    if   substr( $strings[0], $ix, 1 ) eq substr( $strings[1], $ix, 1 );
}

print "Matches: $matched\n";
print "Mismatches: ", length( $strings[0] ) - $matched, "\n"; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T02:09:59.783

通常我会说“你试过什么”和“先上传你的代码”，因为这似乎不是一个非常困难的问题。但让我们试一试：

创建两个数组，一个用于保存每个序列：

```
@sequenceOne = ("A", "T", "C", "G", "T", "A", "C");
@sequenceTwo = ("T", "A", "C", "G", "A", "A", "C");
$myMatch = 0;
$myMissMatch = 0;

for ($i = 0; $i < @sequenceOne; $i++) {
    my $output = "Comparing " . $sequenceOne[$i] . " <=> " . $sequenceTwo[$i];
    if ($sequenceOne[$i] eq $sequenceTwo[$i]) {
        $output .= " MATCH\n";
        $myMatch++;
    } else {
        $myMissMatch++;
        $output .= "\n";
    }
    print $output;
}

print "You have " . $myMatch . " matches.\n";
print "You have " . $myMissMatch . " mismatches\n";
print "The ratio of hits to misses is " . $myMatch . ":" . $myMissMatch . ".\n"; 
```

当然，您可能希望即时从其他内容中读取序列，而不是对数组进行硬编码。但你明白了。使用上面的代码，您的输出将是：

```
torgis-MacBook-Pro:platform-tools torgis$ ./dna.pl 
Comparing A <=> T
Comparing T <=> A
Comparing C <=> C MATCH
Comparing G <=> G MATCH
Comparing T <=> A
Comparing A <=> A MATCH
Comparing C <=> C MATCH
You have 4 matches.
You have 3 mismatches
The ratio of hits to misses is 4:3. 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T02:10:42.890

有很多方法可以做到这一点。这是一个。

```
use strict;
use warnings;

my $seq1 = "ATCGTAC";
my $seq2 = "TACGAAC";

my $len = length $seq1;
my $matches = 0;

for my $i (0..$len-1) {
    $matches++ if substr($seq1, $i, 1) eq substr($seq2, $i, 1);
}

printf "Length: %d  Matches: %d  Ratio: %5.3f\n", $len, $matches, $matches/$len;

exit 0; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-14T03:11:32.843

我认为这`substr`是要走的路，而不是将字符串拆分为数组。

如果作为子例程呈现，这可能是最方便的：

```
use strict;
use warnings;

print ratio(qw/ ATCGTAC TACGAAC /);

sub ratio {

  my ($aa, $bb) = @_;
  my $total = length $aa;
  my $matches = 0;
  for (0 .. $total-1) {
    $matches++ if substr($aa, $_, 1) eq substr($bb, $_, 1);
  }

  $matches / ($total - $matches);
} 
```

**输出**

```
1.33333333333333 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-08-14T02:02:20.630

一般来说，请发布您的代码。它确实有帮助。无论如何，这样的事情应该做你所要求的：

```
#!/usr/bin/perl -w
use strict;
my $d1='ATCGTAC';
my $d2='TACGAAC';

my @dna1=split(//,$d1);
my @dna2=split(//,$d2);

my $matches=0;
for (my $i=0; $i<=$#dna1; $i++) {
    $matches++ if $dna1[$i] eq $dna2[$i];
}
my $mis=scalar(@dna1)-$matches;
print "Matches/Mismatches: $matches/$mis\n"; 
```

请记住，尽管 4 比 3 的比率肯定*不是*4.3 而是 ~1.3。如果您发布有关输入文件格式的一些信息，我将更新我的答案以包括用于解析文件中的序列的行。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T05:51:13.783

比尔·鲁珀特说得对，有很多方法可以做到这一点。这是另一个：

```
use Modern::Perl;

say compDNAseq( 'ATCGTAC', 'TACGAAC' );

sub compDNAseq {
    my $total = my $i = 0;
    $total += substr( $_[1], $i++, 1 ) eq $1 while $_[0] =~ /(.)/g;
    sprintf '%.2f', $total / ( $i - $total );
} 
```

输出：

```
1.33 
```

# c# - 从另一个类向堆栈面板添加自定义控件

> ID：11944708
> 
> 赞同：0
> 
> 时间：2012-08-14T01:48:39.147
> 
> 标签：c#, wpf, vb.net, class, user-controls

您好，感谢您的帮助。

我有一个带有名为 stackpanel 的堆栈面板的窗口，并且我在 xaml 中添加了一些自定义控件，效果很好。

现在我的程序在堆栈面板内动态创建了一些用户控件（带有按钮）。我希望能够单击用户控件内的按钮并将另一个控件动态添加到堆栈面板。

我似乎无法让它工作，因为它在不同的班级。如何从另一个控件将控件添加到堆栈面板？我也不知道如何使用直接广播。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:13:20.607

stackpanel.Children.Add(new Control());

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:59:08.580

堆栈面板需要提供一个方法（在本例中我们称之为*myCreateMethod*）来创建控件，并且该方法必须可由用户控件访问。当您创建用户控件时，将它传递给您的堆栈面板的句柄，例如

```
MyUserControl mycontrol = new MyUserControl(this); 
```

在您的用户控件中，您存储参考：

```
Stackpanel parent;

public MyUserControl(Stackpanel parent){
  this.parent = parent;
} 
```

然后您可以调用该方法来创建控件，如下所示：

```
parent.myCreateMethod(); 
```

我希望这能提供足够的洞察力以使示例适应您的需求。

**编辑**：您显然可以将有关新控件的详细信息作为参数传递给 myCreateMethod()。或者您在用户控件中创建新控件，将其传递给堆栈面板，然后 myCreateMethod()“仅”显示它。

# java - 安卓屏幕上的维恩图（图像/标签/形状），其区域可点击

> ID：11944712
> 
> 赞同：2
> 
> 时间：2012-08-14T01:50:35.870
> 
> 标签：java, android, image-processing, data-visualization, venn-diagram

我需要在 android 屏幕上创建一个图像。它应该是一个维恩图，每个区域都可以点击。图像应该是可缩放的。

```
The Solutions I could think of was: 
```

1.  使用 java 来呈现整个图表（我觉得这很难且不太用户友好）任何 API？
2.  将维恩图的破碎图像放入小的子图片（或简单的图片）中
3.  或者，如果在 Android 中使用 XML 有什么可能？

> 注意：维恩图不必是圆形的，它可以是方形的或任何其他的。只要它可以缩放，使其每个区域都可见且可点击。

有什么指导、建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-25T02:14:32.720

我发现了一个非常好的小部件（单类），可以帮助您使任何图像可多次点击。他们对如何使用他们的代码也有一些很好的说明。

该小部件具有与 html 中的图像映射类似的方法。这个小部件的好处是图像可以缩放，并且不会丢失与每个不同的可点击区域相关联的坐标或区域。

[这](http://catchthecows.com/?p=113)是他们网站的链接。制作小部件的人显然有类似的问题并想出了这个小部件。

# web-services - 是否有可用于街道地址填写的软件包或 API？

> ID：11944714
> 
> 赞同：2
> 
> 时间：2012-08-14T01:50:49.040
> 
> 标签：web-services, google-maps, autocomplete, openstreetmap, street-address

有谁知道我可以托管以完成街道地址的服务（免费或付费）或软件？我有兴趣提供地址字符串的可能完成列表，而不是对地址进行地理编码。

例如，如果用户键入“120 An”，则服务可能会为该地址字符串提供 10 个可能的补全（即“120 Anne Way NYC NY、120 Aneater St. Seattle WA...等”）

理想情况下，我可以将返回地址列表限制在特定区域。

Openstreetmaps 前段时间有“名称查找器”，但它看起来不再存在了。

* * *

我应该提到我愿意自己托管服务。我相信我可以从 Openstreetmap 数据中提取区域特定地址列表，但我需要一个 API 来将它们放入其中......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T04:05:48.227

有一个[Google Places 自动完成 API](https://developers.google.com/places/documentation/autocomplete)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T02:19:02.027

[SmartyStreets](http://smartystreets.com)刚刚完成了一项新的自动完成功能，它通过 API 订阅完全免费（在某种程度上也是免费的）。我在 SmartyStreets 工作并帮助开发它。

![SmartyStreets 地址自动完成](../Images/7c7d9fcad8c1dba754fb4b07d089cf26.png)

[您可以使用jQuery 插件](http://smartystreets.com/kb/liveaddress-api/website-forms)将其放在您的网站上。它适用于美国地址。对于国际，Google 可能是您最好的选择，因为许可证限制不会妨碍您。

# javascript - javascript中的验证错误

> ID：11944719
> 
> 赞同：0
> 
> 时间：2012-08-14T01:51:56.730
> 
> 标签：javascript

我想检查我的应用程序的按钮是否被按下。我面临的错误是，即使单击按钮，所有警报也会显示。附上代码片段，通过点击按钮设置变量。

如果选择了任何值，我希望不显示警报，

```
var condition ; 
var clickable;     // GLOBAL VARIABLES

function clickMe1() 
{
    clickable = "Sell";
}

function clickMe2() 
{
    clickable = "Rent";
}

function condition1()
{
    condition="Excellent"
}

function condition2()
{
    condition="Good"
}

function condition3()
{
    condition="Fair"
}

function condition4()
{
    condition="New"
}

function display()    
{
    if (condition != "Excellent"||"New"||"Fair"||"Good")
    {
        alert( " Please enter the condition ");
    }
    if (clickable != "Sell"||"Rent")
    {
        alert("Please enter the Sell");
    }
    if (costSell === '')  
    {
        alert("Please select a Price ");
    }
    if ((condition === "Excellent"||"New"||"Fair"||"Good") && (clickable === "Selling"||"leasing")&&(!isNaN(costSell)))
    {
        // Do Something
    },
    error: function(data){
        console.log("not added");
    }
    });
    }
    else
    {
        alert(" price is not a number"); 
    }
} 
```

我也试过：

```
if(condition !='Excellent'|| condition!='New' || condition!='Fair'|| condition!='Good')
{
    alert( " Please enter the condition ");
}
if (clickable !='Sell'||'Rent' )
{
    alert("Please enter the Sell "); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T01:54:58.607

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T01:55:34.103

`condition !="Excellent"||"New"||"Fair"||"Good"`

Conditions like this are your problem.

`condition !="Excellent" && condition != "New" ...`

^The solution

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T01:55:54.790

Your problem is you're testing multiple conditions without repeating the left-hand operand.

For example:

```
condition !="Excellent"||"New"||"Fair"||"Good" 
```

It should be this:

```
condition != "Excellent" || condition != "New" || condition != "Fair" || condition !="Good" 
```

# c# - CodeBehind 中的 ASP.NET Gridview ItemTemplate 访问

> ID：11944721
> 
> 赞同：1
> 
> 时间：2012-08-14T01:52:31.837
> 
> 标签：c#, asp.net, gridview, code-behind, itemtemplate

我无法从代码隐藏中的 Gridview ItemTemplate 访问 asp.NET HiddenField。我需要能够读取这些隐藏字段包含的值，以便我可以执行删除方法。代码如下

```
<%@ Control Language="C#" AutoEventWireup="true" CodeFile="MemberList.ascx.cs" Inherits="UserControls_MemberList" %>
<asp:RadioButtonList ID="ReportSelect" runat="server" RepeatDirection="Horizontal">
<asp:ListItem Value="1">All</asp:ListItem>
<asp:ListItem Value="2">Current Members</asp:ListItem>
<asp:ListItem Value="3">Perspective Members</asp:ListItem>
</asp:RadioButtonList>
<asp:Button ID="ReportSelectButton" runat="server" OnClick="ReportSelectButton_Click"
Text="Select Report Type" />
<asp:Button ID="LinkToHomePage" runat="server" Text="Back to Homepage" OnClick="LinkToHomePage_Click">
</asp:Button>
<asp:GridView ID="GridView1" runat="server" AutoGenerateColumns="false" Height="308px"
Width="1282px" onselectedindexchanged="GridView1_SelectedIndexChanged">
<Columns>
    <asp:BoundField HeaderText="First Name" AccessibleHeaderText="FirstName" DataField="FirstName">
    </asp:BoundField>
    <asp:BoundField HeaderText="Last Name" AccessibleHeaderText="LastName" DataField="LastName">
    </asp:BoundField>
    <asp:BoundField HeaderText="Street Address" AccessibleHeaderText="StreetAddress"
        DataField="StreetAddress"></asp:BoundField>
    <asp:BoundField HeaderText="City" AccessibleHeaderText="City" DataField="City"></asp:BoundField>
    <asp:BoundField HeaderText="State" AccessibleHeaderText="State" DataField="State">
    </asp:BoundField>
    <asp:BoundField HeaderText="Zip" AccessibleHeaderText="Zip" DataField="Zip"></asp:BoundField>
    <asp:BoundField HeaderText="Birthday" AccessibleHeaderText="Birthday" DataField="Birthday" />
    <asp:BoundField HeaderText="Email" AccessibleHeaderText="Email" DataField="Email">
    </asp:BoundField>
    <asp:BoundField HeaderText="PrimaryPhone" AccessibleHeaderText="PrimaryPhone" DataField="PrimaryPhone" />
    <asp:BoundField HeaderText="AlternatePhone" AccessibleHeaderText="AlternatePhone"
        DataField="AlternatePhone" />
    <asp:BoundField HeaderText="Pending" AccessibleHeaderText="Pending" DataField="Pending" />
    <asp:BoundField HeaderText="IsMember" AccessibleHeaderText="IsMember" DataField="IsMember" />
    <asp:BoundField HeaderText="Username" AccessibleHeaderText="Username" DataField="Username">
    </asp:BoundField>
    <asp:BoundField HeaderText="Description" AccessibleHeaderText="Descripton" DataField="Description" />
    <asp:TemplateField HeaderText="Edit" AccessibleHeaderText="Edit">
        <ItemTemplate>
            <asp:HyperLink ID="EditUsername" runat="server" NavigateUrl='<%# Link.ToMemberAdmin(Eval("Username").ToString())%>'
                Text="Edit" />
            <asp:Button ID="DeleteButton" runat="server" Text="Delete Entry" OnClick="DeleteButton_Click"/>
            <asp:HiddenField ID="HiddenUsername" Value='<%#Bind("Username") %>' runat="server" />
            <asp:HiddenField ID="HiddenEmail" Value='<%#Bind("Email") %>' runat="server" />
        </ItemTemplate>
    </asp:TemplateField>
</Columns>
</asp:GridView> 
```

代码隐藏

```
protected void DeleteButton_Click(object sender, EventArgs e)
{
    HiddenField Username = GridView1.FindControl("HidderUsername") as HiddenField;
    HiddenField Email = GridView1.FindControl("HiddenEmail") as HiddenField;
    string username = Username.Value;
    string email = Email.Value;
    AdminAccess.DeleteMemberApplication(username, email);
} 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:43:34.567

HiddenField 控件将成为GridView 呈现`<td>`器之一的一部分。`<tr>`GridView 控件的 FindControl 只知道它的直接子级，并且由于 Hidden 控件低于它的两个级别，因此它不会找到它们。相反，从 开始`sender`并尝试找到它的兄弟 Hidden 控件。替换事件处理程序中的两个 HiddenControl 行，如下所示：

```
HiddenField Username = (HiddenField) ((Button)sender).Parent.Controls.FindControl("HiddenUsername");
HiddenField Email = (HiddenField) ((Button)sender).Parent.Controls.FindControl("HiddenEmail"); 
```

它应该获得您正在寻找的值以删除该行中的数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:55:06.180

只需使用`CommandArgument`按钮

```
<asp:TemplateField HeaderText="Edit" AccessibleHeaderText="Edit">
    <ItemTemplate>
        <asp:HyperLink ID="EditUsername" runat="server" NavigateUrl='<%# Link.ToMemberAdmin(Eval("Username").ToString())%>'
            Text="Edit" />
        <asp:Button ID="DeleteButton" runat="server" Text="Delete Entry" OnClick="DeleteButton_Click"
            CommandArgument='<%#Eval("Username")+"^"+Eval("Email") %>'/>
    </ItemTemplate>
</asp:TemplateField>

protected void DeleteButton_Click(object sender, EventArgs e)
{
    var btn = sender as Button;
    var args = btn.CommandArgument.Split('^');
    string username = args[0];
    string email = args[1];
    AdminAccess.DeleteMemberApplication(username, email);
} 
```

# c# - 在 VBA 中加密字符串，在 C# 中解密

> ID：11944724
> 
> 赞同：1
> 
> 时间：2012-08-14T01:53:21.033
> 
> 标签：c#, vba, encryption

我需要在 VBA 中加密身份验证信息（字符串），然后在 C#（WCF 服务）中正确解密它们。

我们并不太关心所使用的加密类型或强度，只是解密必须正确生成原始文本。

任何人都可以建议我如何解决这个问题，或者指向我在 VBA 和 C# 中实现的代码块以实现我需要做的事情？

提前谢谢了

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-21T19:10:15.340

好的，我很肯定你可以使用它。我将它用于 VBA，但是，在 vb.net 中使用它很简单，并且距离转换为 C# 仅一步之遥。我在这里得到了代码和解释： [***链接到谁构建了***](http://bytes.com/topic/access/insights/906671-rc4-encryption-algorithm-vba-vbscript) 我只是将它用于 VBA 的函数。我在 vb.net 中使用了大量的 VBA 函数，并且我已经将足够多的 vb.net 转换为 c# 以知道这可以在 c# 中使用。

```
Function RunRC4(sMessage, strKey)
Dim kLen, x, y, i, j, temp
Dim s(256), k(256)

'Init keystream'
klen = Len(strKey)
For i = 0 To 255
    s(i) = i
    k(i) = Asc(Mid(strKey, (i Mod klen) + 1, 1))
Next

j = 0
For i = 0 To 255
    j = (j + k(i) + s(i)) Mod 255
    temp = s(i)
    s(i) = s(j)
    s(j) = temp
Next

'Drop n bytes from keystream'
x = 0
y = 0
For i = 1 To 3072
    x = (x + 1) Mod 255
    y = (y + s(x)) Mod 255
    temp = s(x)
    s(x) = s(y)
    s(y) = temp
Next

'Encode/Decode'
For i = 1 To Len(sMessage)
    x = (x + 1) Mod 255
    y = (y + s(x)) Mod 255
    temp = s(x)
    s(x) = s(y)
    s(y) = temp

    RunRC4 = RunRC4 & Chr(s((s(x) + s(y)) Mod 255) Xor Asc(Mid(sMessage, i, 1)))
Next
End Function 
```

# c# - 在服务器中使用会员数据库创建 ASP.NET 网站

> ID：11944728
> 
> 赞同：1
> 
> 时间：2012-08-14T01:53:37.303
> 
> 标签：c#, asp.net, sql-server-2008, login, asp.net-membership

我试图找出如何将成员资格数据库添加到我的 Mircroft SQL Server，然后能够从 ASP.NET 应用程序中引用它。基本上，我创建了一个新的网站应用程序项目，我如何创建 asp_net 会员数据库，然后告诉我的网站与之通信？，我发现了这个

```
http://msdn.microsoft.com/en-us/library/879kf95c.aspx 
```

但这不是我想要的，它在 App_Code 文件夹中创建一个数据库文件，我希望它访问我的 Microsoft SQL Server，然后就有这样的数据库。我是这个设置登录会员资格的新手，一些指针会很有帮助。我想也许有一个向导，您可以在其中指定服务器等..？

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:07:44.140

[这里](http://www.shiningstar.net/ASPNet_Articles/SqlMembershipProvider.aspx)有一个非常好的演练。您只需要使用 aspnet_regsql.exe 在 SQL Server 中创建必要的对象并使用成员资格提供程序设置来使用这个新的连接字符串，在第 4 步：指定提供程序并自定义其设置下对此进行了[说明。](http://www.asp.net/web-forms/tutorials/security/membership/creating-the-membership-schema-in-sql-server-vb)

希望有帮助。

干杯

# java - 使用 Java，如何限制对象属性具有某些值？

> ID：11944729
> 
> 赞同：0
> 
> 时间：2012-08-14T01:53:39.560
> 
> 标签：java, object, static-members

使用 Java，如何限制对象属性具有某些值？我想创建一个代表“位置类型”的 Java 对象，但我想将该类的使用限制为仅代表所有可能类型的大约 100 个字符串？这个的设计模式是什么？

我能想到的就是创建一个字符串数组列表，每次用户实例化对象时，我都会遍历整个列表以寻找匹配项。不过，这对我来说似乎有点像 hack，我想把它做好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T01:55:06.293

使用 Java 的[枚举](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)怎么样？您的对象将仅受该枚举的类型限制，然后您将受到枚举中大约 100 个字符串的限制。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:29:43.453

对于一组 100 个左右的固定值，`enum`类型是最佳答案。不过有几点需要注意：

*   如果值的集合**不是**固定的......在某种程度上你可以将它们硬连接到你的代码中......那么`enum`类将无法工作。Java 中没有任何形式的`enum`类允许您向现有枚举类添加新值而无需重新编译等。

*   如果您有**大量**的值，则`enum`该类将遇到 JVM 规范强加的一个或多个限制。例如，编译器为`enum`类生成的静态初始化代码不能包含超过 64K 的字节码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T01:55:34.577

您可以为字符串或枚举使用允许值的 HashSet（查找速度更快，您只想知道它是否包含）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T01:55:39.943

另一个想法，因为它是一个有界集合，会为这些字符串创建一个枚举。使对象属性成为枚举类型。那就不用担心了。

# java - btrace 测试调用函数使用的内存

> ID：11944730
> 
> 赞同：0
> 
> 时间：2012-08-14T01:53:46.663
> 
> 标签：java, jvm, btrace

使用 btrace，我想测试我的函数使用了多少堆，所以我写：

![在此处输入图像描述](../Images/fea1d623ebce336520b04939346ddee6.png)

代码上方是我使用的 btrace 示例。

并且两次运行我的功能，我得到了两个不同的结果：

![在此处输入图像描述](../Images/d2dbdf487b2e96789a336dbb3ea2341a.png)

如图所示，堆成本不同：一个是另一个的两倍。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T07:30:21.610

您无法通过在调用方法之前和之后区分 JVM 堆使用情况来判断某个方法需要多少内存。执行该方法时系统中发生了太多事情，而您获得的数字代表 JVM 从操作系统分配的内存 - 结果不会告诉您任何信息。

如果您想要至少可以远程使用的东西，您应该在方法调用（*Sys.Memory.dumpHeap(fileName)*）之前和之后进行堆转储，并使用 heapwalker 来区分这两者。尽管如此，你还是会得到相当多的噪音，但它比依赖操作系统分配的内存要好得多。

最精确的内存跟踪将包括捕获在方法调用期间创建并直接连接到该调用的所有新实例的分配信息 - 例如。在被调用的方法中创建，在从被跟踪的方法中递归调用的所有方法中，以及在被跟踪的方法调用树中任何地方递归生成的所有可运行对象中创建。完成这项工作可能有点棘手，但 BTrace 完全可以实现。

# android - 最好在android上保存字符串

> ID：11944732
> 
> 赞同：-1
> 
> 时间：2012-08-14T01:53:55.197
> 
> 标签：android, android-file, android-sqlite

在android上保存多个字符串的最佳方法是什么？我认为最好的方法是 SQLite，但是在这种情况下，当我关闭我的应用程序时，数据会被保存吗？当我再次打开应用程序时，数据会在那里？或者我应该使用txt文件保存并恢复它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T02:48:21.653

这取决于您要对文件执行的操作。保存数据时有多种选择：内部存储、外部存储、缓存、SQLite 数据库或网络。如果您只是保存一对夫妇`Strings`，我认为创建数据库是矫枉过正的。我会考虑将文件保存到内部存储中。您可以将其写入`Strings`文件，然后在重新启动应用程序时检索该文件。

你不想让事情变得比他们需要的更复杂。把事情简单化。如果您要保存几 KB 的数据，请使用文件。如果您正在获取 MB 的数据，并且需要查询特定的数据集，那么请查看数据库。您必须记住，数据库需要大量的时间和资源，不仅是建立，而且是维护。

以下是概述将数据保存到设备的不同方法的 Android 文档：http: [//developer.android.com/guide/topics/data/data-storage.html](http://developer.android.com/guide/topics/data/data-storage.html)

这应该真的可以帮助您了解什么对您最有利。

# xslt - EXSLT 字符串标记器上下文

> ID：11944734
> 
> 赞同：3
> 
> 时间：2012-08-14T01:53:59.247
> 
> 标签：xslt, exslt

EXSLT Tokenizer for-each 循环中的当前节点上下文是什么？我似乎无法查询文档中的任何节点。例子：

```
<xsl:for-each select="str:tokenize($renderList,',')">
   <xsl:variable name ="tag" select="."/>
   <xsl:value-of select = "//tag[@name = $tag]"/>
</xsl:for-each> 
```

如果我`<xsl:value-of select = "//tag[@name = 'A']"/>`在 for-each 循环之外硬编码，则查询有效。

循环内的上下文节点是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T02:16:51.817

**问题是`xsl:for-each`当前文档中不是原始的源 XML 文档**。

这应该有效：

```
<xsl:variable name="vDoc" select="/"/>
<xsl:for-each select="str:tokenize($renderList,',')">
    <xsl:variable name ="tag" select="."/>
    <xsl:value-of select = "$vDoc//tag[@name = $tag]"/>
</xsl:for-each> 
```

# haskell - Haskell 无法匹配预期的类型

> ID：11944735
> 
> 赞同：0
> 
> 时间：2012-08-14T01:54:00.440
> 
> 标签：haskell

所以，我已经把头撞在墙上至少一个小时了。这是我的问题：

我的功能之一返回`[(Text, Text)]`。

现在我想`Data.Bson`使用这个元组列表来填充 Document。

打开扩展`OverloadedStrings`，并`Data.Text`导入以及`Data.Bson`，我这样做（这部分是从原始帖子编辑的，我粘贴了实际上不使用累加器的代码的调试版本）：

```
tuplesToBSON :: [(Text, Text)] -> Document
tuplesToBSON xs = L.foldr (\v acc -> merge [fst v =: snd v] acc) [] xs 
```

Data.Bson 包在哪里`merge`，就像`=:`.

没运气。它抱怨：无法将预期类型`Label`与实际类型匹配`Text`。（为了清楚起见，下面也是一个编辑）如果我尝试：

```
tuplesToBSON xs = L.foldr (\v acc -> merge [(fst v) =: (String (snd v))] acc ) [] xs 
```

不幸的是，这个名字`String`实际上是来自 Bson 包的构造函数（我认为......），用于名为“Value”的数据类型。 [http://hackage.haskell.org/packages/archive/bson/0.2.1/doc/html/src/Data-Bson.html](http://hackage.haskell.org/packages/archive/bson/0.2.1/doc/html/src/Data-Bson.html)

这仍然不起作用 - 但出现了不同的错误消息：

```
No instance for (Val Value) arising from a use of `=:'
Possible fix: add an instance declaration for (Val Value)
In the expression: (fst v) =: (String (snd v))
In the first argument of `merge', namely `[(fst v) =: (String (snd v))]'
In the expression: merge [(fst v) =: (String (snd v))] acc 
```

也：

```
Couldn't match expected type `Label' with actual type `Text'
Expected type: [(Label, text-0.11.2.0:Data.Text.Internal.Text)] Actual type: [(Text, Text)]
In the third argument of `L.foldr', namely `xs'
In the expression: L.foldr (\ v acc -> merge [(fst v) =: (String (snd v))] acc) [] xs 
```

我知道 Value 是 Bson 包中的一种数据类型，但我真的不知道是什么`Val`。

===== 不相关部分的开始 =====

正如下面的答案之一指出的那样，在原始帖子中，我`:: String`在我的代码中将 a`Text`转换为 a `String`，就像在 Prelude 中一样。我实际上以为`:: String`是指 Bson 包中提到的那个，但无论如何我完全错了，因为（我认为）`String`实际上是一个构造函数。

我怀疑 GHC 类型推断不知何故被混淆了，因为以下工作正常：

```
testDocument :: Document
testDocument = [(fst ("asdf", "awef") :: Label) =: ("asdf" :: String)] 
```

编辑：这可行，但必须是因为 Bson 会自动进行一些正确的类型处理，因为在包含该行之后`import Prelude hiding (String)`它会给我一个错误。

所以我终于清理了这个问题。对不起之前的混乱版本——我很沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:06:50.833

我认为你的问题不是`Label`，而是`b0`。看起来你正试图断言`snd v`它`String`不是。尝试使用类似的东西

```
tuplesToBSON xs = L.foldr (\acc v ->  [ ((fst v) :: Label) := (unpack (snd v) :: String)] ) [] xs 
```

虽然我不太确定所有内联类型断言的用途。这可能更具可读性

```
tuplesToBSON xs = L.foldr (\acc v -> [(fst v) := (unpack (snd v0)]) [] xs 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T03:08:51.030

首先，不清楚您要做什么。你甚至没有使用累加器 ( `acc`) 所以这是一个退化的遍历。你不妨说：

```
tuplesToBSON = (\v -> fst v =: snd v) . last 
```

另一个问题是你的类型显然是矛盾的。你说你在`Text`lambda 中传入 a then 你明确声明你认为变量应该是 a `String`。正如您在问题中所说，您不能只添加类型注释并将它们视为强制操作。变量的类型必须保持一致，并且任何强制都由显式函数应用程序完成（`unpack`在这种情况下）。

所以让我们假设这只是对 foldr 的错误使用，我们想要实际使用累加器。让我们进一步假设您想要`Text`类型，并且任何使用`String`都只是偶然的。

第三个问题是你的变量似乎混淆了，`foldr`第二个参数是累加器，而不是第一个。所以我们应该有：

```
tuplesToBSON = foldr (\v acc -> (fst v =: snd v) : acc) [] 
```

这种类型检查良好。如果 eta 减少和其他清理让您很难看到与您的代码的相似性，那么考虑这个版本：

```
tuplesToBSON xs = foldr (\v acc -> ((fst v :: Label) =: (snd v :: Text)) : acc ) [] xs 
```

# algorithm - 查找数组中的最小唯一数

> ID：11944737
> 
> 赞同：5
> 
> 时间：2012-08-14T01:54:18.070
> 
> 标签：algorithm

数组中的最小唯一数定义为 `min{v|v occurs only once in the array}` 例如，{1, 4, 1, 2, 3}的最小唯一数是2。有没有比排序更好的方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T02:30:39.753

我相信这是时间和空间上的 O(N) 解决方案：

```
HashSet seenOnce;     // sufficiently large that access is O(1)
HashSet seenMultiple; // sufficiently large that access is O(1)

for each in input // O(N)
    if item in seenMultiple
        next
    if item in seenOnce
        remove item from seenOnce
        add to item seenMultiple
    else
        add to item seeOnce

smallest = SENTINEL
for each in seenOnce // worst case, O(N)
    if item < smallest
        smallest = item 
```

如果整数值的范围有限，则可以将 HashSets 替换为按该值索引的 BitArrays。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T18:32:52.880

您不需要进行完全排序。执行冒泡排序内循环，直到在一端获得明显的最小值。在最好的情况下，这将具有时间复杂度 O(k * n)，其中 k = 非不同最小值的数量。然而，最坏情况的复杂度是 O(n*n)。因此，当 k << n 的预期值时，这可能是有效的。

我认为这将是可能的最小时间复杂度，除非您可以使任何 O(n * logn) 排序算法适应上述任务。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-21T07:58:10.983

使用字典的 Python 版本。
时间复杂度 O(n) 和空间复杂度 O(n)：

```
from collections import defaultdict
d=defaultdict(int)
for _ in range(int(input())):
    ele=int(input())
    d[ele]+=1
m=9999999
for i in d:
    if d[i]==1 and i<m:
        m=i
print(m if m!= 9999999 else -1) 
```

请告诉我是否有更好的方法。

# jquery - 显示未显示的带有 jquery 的块：“块”

> ID：11944741
> 
> 赞同：1
> 
> 时间：2012-08-14T01:54:39.490
> 
> 标签：jquery

如何使用 jQuery 显示一个项目，使用`slideToggle`,`fadeIn`或类似的函数，它*最初*是隐藏的，并且除了使用 css 属性*之外* `display:block`还使用 css 属性？我知道我可以`style="display:none"`在可见时添加 html 和样式 css，但是有没有只使用 css 的方法？还是另一种有优势的方式？`display:inline`当它显示元素不直观并且以后可能难以调试时，必须使用这种技术来“欺骗” jQuery 使用它。这是一个使用技巧的示例（我将两个 div 保持内联，即使在显示第二个之后也是如此）。

***[jsFiddle](http://jsfiddle.net/JYsnd/)***

```
<div id="a">hello</div>
<div id="b" style="display:none">world</div>
<button>show world</button>​ 
```

js：

```
$("button").click(function(){
    $("#b").fadeIn();
});​ 
```

CSS：

```
div{
   display:inline;    
}​ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:03:11.037

[http://jsfiddle.net/sechou/JYsnd/1/](http://jsfiddle.net/sechou/JYsnd/1/) HTML

```
<div id="a">hello</div>
<div id="b" class="hideme">world</div>
<button>show world</button>​ 
```

CSS

```
div{
   display:inline;    
}​
.hideme{
   display:none;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:15:04.947

如果您试图避免使用`display: inline`，您可以单独定位 2 个 div 以正确显示使用`float: left`.

使用类来隐藏 div 也有助于稍后调试您的代码。

请参阅此处的示例：

[http://jsfiddle.net/bq9Hn/](http://jsfiddle.net/bq9Hn/)

如果您试图避免完全使用 display:none 和 display:block ，那么您可以使用`z-index`将 div 隐藏在背景中，然后通过设置更高的`z-index`值将其置于最前面。例如。

[http://jsfiddle.net/8xjEz/2/](http://jsfiddle.net/8xjEz/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T02:01:20.527

我想这就是你要求的。您不需要 HTML。只需保持内联并用逗号隐藏即可。

CSS：

```
div{display:inline,none;}​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-15T00:29:41.633

感谢其他回答者，但经过更多研究后，我认为我找到了一个稍微干净的答案。只需通过`fadeIn`调用来修改语句`css(display:whatever)`以修改结果。由于`fadeIn`和其他 jQuery 效果是异步的，它不应该导致任何图形故障。使用这种方法，css只影响初始样式，html中没有样式属性，jQuery语句的意图和效果很明显。感谢 jQuery 论坛用户 godsbest 的想法。

***[jsFiddle](http://jsfiddle.net/JYsnd/6/)***

```
<div id="a">hello</div>
<div id="b">world</div>
<button>show world</button>​ 
```

js：

```
$("button").click(function(){
    $("#b").fadeIn().css("display","inline");
});​ 
```

CSS：

```
#a{
   display:inline;    
}
#b{
   display:none;        
} 
```

# php - Cakephp修改pot文件没有i18n

> ID：11944744
> 
> 赞同：1
> 
> 时间：2012-08-14T01:55:08.303
> 
> 标签：php, cakephp, internationalization, cakephp-1.2

有时我必须在我的 CakePHP 应用程序中更改或添加一段未翻译的文本。在这种情况下，我必须运行 cake i18n 来扫描所有项目的文件以生成新的 pot 文件，然后我使用 Poedit 用新的 pot 文件更新当前目录。

我的问题是节省计算机的时间和性能，有没有其他方法可以使用新的未翻译文本更新目录而无需再次运行 cake i18n？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-12T18:23:59.223

但请注意，要最终获得 .mo 文件，您将需要使用像 POedit 这样的工具。.mo 文件是 CakePHP 用来获取在 e 中输出的翻译的文件。

# asp.net - ASP.NET Bundles 如何禁用缩小

> ID：11944745
> 
> 赞同：200
> 
> 时间：2012-08-14T01:55:17.200
> 
> 标签：asp.net, asp.net-mvc, asp.net-mvc-4, bundle, asp.net-optimization

我的*web.config(s)*`debug="true"`都有，我只是不希望我的包被缩小，但我做的任何事情似乎都没有禁用它。我试过了，这是我的代码：*`enableoptimisations=false`*

 *```
//Javascript
bundles.Add(new ScriptBundle("~/bundles/MainJS")
            .Include("~/Scripts/regular/lib/mvc/jquery.validate.unobtrusive.js*")
            .Include("~/Scripts/regular/lib/mvc/jquery.validate*")
            .Include("~/Scripts/regular/lib/bootstrap.js")
            .IncludeDirectory("~/Scripts/regular/modules", "*.js", true)
            .IncludeDirectory("~/Scripts/regular/pages", "*.js", true)
            .IncludeDirectory("~/Scripts/regular/misc", "*.js", true));

//CSS
bundles.Add(new StyleBundle("~/bundles/MainCSS")
            .Include("~/Content/css/regular/lib/bootstrap.css*")
            .IncludeDirectory("~/Content/css/regular/modules", "*.css", true)
            .IncludeDirectory("~/Content/css/regular/pages", "*.css", true)) 
```

* * *

## 回答 #1

> 赞同：168
> 
> 时间：2012-08-14T16:23:59.683

条件编译指令是你的朋友：

```
#if DEBUG
            var jsBundle = new Bundle("~/Scripts/js");
#else
            var jsBundle = new ScriptBundle("~/Scripts/js");
#endif 
```

* * *

## 回答 #2

> 赞同：145
> 
> 时间：2012-08-14T21:13:18.027

如果您`debug="true"`在*web.config*中使用并`Scripts/Styles.Render`用于引用页面中的捆绑包，则应该关闭捆绑和缩小。`BundleTable.EnableOptimizations = false`将始终关闭捆绑和缩小（不管调试真/假标志）。

您可能没有使用`Scripts/Styles.Render`助手吗？如果您通过直接渲染对捆绑包的引用，`BundleTable.Bundles.ResolveBundleUrl()`您将始终获得缩小/捆绑的内容。

* * *

## 回答 #3

> 赞同：91
> 
> 时间：2012-10-17T10:29:20.007

要禁用捆绑和缩小，只需将其放入您的*.aspx*文件（即使`debug=true`在*web.config*中也会禁用优化）

VB.net：

```
System.Web.Optimization.BundleTable.EnableOptimizations = false 
```

c#.net

```
System.Web.Optimization.BundleTable.EnableOptimizations = false; 
```

如果你把它放在*web.config*`EnableOptimizations = true`中，它也会捆绑和缩小`debug=true`

 ** * *

## 回答 #4

> 赞同：74
> 
> 时间：2014-01-16T16:51:18.930

您可以通过清除转换来关闭捆绑包中的缩小。

```
var scriptBundle = new ScriptBundle("~/bundles/scriptBundle");
...
scriptBundle.Transforms.Clear(); 
```

当我想将我的所有脚本捆绑在一个文件中但在调试阶段需要可读性时，我个人发现这很有用。

* * *

## 回答 #5

> 赞同：29
> 
> 时间：2014-05-02T19:42:03.913

我尝试了很多这些建议，但注意到似乎有效。我浪费了好几个小时才发现这是我的错误：

```
@Scripts.Render("/bundles/foundation") 
```

无论我尝试什么，它总是让我缩小和捆绑 javascript。相反，我应该使用这个：

```
@Scripts.Render("~/bundles/foundation") 
```

**额外的'〜'做到了。**我什至仅在一个实例中再次将其删除，以查看是否确实如此。那是……希望我能节省至少一个人浪费在这上面的时间。

* * *

## 回答 #6

> 赞同：26
> 
> 时间：2014-03-18T02:19:49.180

结合几个答案，这在 ASP.NET MVC 4 中对我有用。

```
 bundles.Add(new ScriptBundle("~/Scripts/Common/js")
            .Include("~/Scripts/jquery-1.8.3.js")
            .Include("~/Scripts/zizhujy.com.js")
            .Include("~/Scripts/Globalize.js")
            .Include("~/Scripts/common.js")
            .Include("~/Scripts/requireLite/requireLite.js"));

        bundles.Add(new StyleBundle("~/Content/appLayoutStyles")
            .Include("~/Content/AppLayout.css"));

        bundles.Add(new StyleBundle("~/Content/css/App/FunGrapherStyles")
            .Include("~/Content/css/Apps/FunGrapher.css")
            .Include("~/Content/css/tables.css"));

#if DEBUG
        foreach (var bundle in BundleTable.Bundles)
        {
            bundle.Transforms.Clear();
        }
#endif 
```

* * *

## 回答 #7

> 赞同：22
> 
> 时间：2012-11-29T22:29:15.333

还有一些简单的方法可以手动控制缩小（和其他功能）。这是**新的 CssMinify() 转换**器，使用如下：

```
// this is in case when BundleTable.EnableOptimizations = false;
var myBundle = new StyleBundle("~/Content/themes/base/css")
    .Include("~/Content/themes/base/jquery.ui.core.css" /* , ... and so on */);
myBundle.Transforms.Add(new CssMinify());
bundles.Add(myBundle);

// or you can remove that transformer in opposite situation
myBundle.Transforms.Clear(); 
```

当您希望将某些捆绑包特殊部分缩小时，这很方便。比方说，您正在使用一些标准 (jQuery) 样式，这些样式在您的脚下（接受大量过多的浏览器请求），但您希望保持自己的样式表不缩小。（同样 - 使用 javascript）。

* * *

## 回答 #8

> 赞同：14
> 
> 时间：2014-11-05T23:43:19.003

我结合了其他人在这个问题中给出的一些答案，提出了另一种替代解决方案。

**目标：**始终捆绑文件，在这种情况下禁用 JS 和 CSS 缩小，`<compilation debug="true" ... />`并始终对 CSS 捆绑包应用自定义转换。

**我的解决方案**：

1) 在**web.config**中： `<compilation debug="true" ... />`

2) 在**Global.asax Application_Start()**方法中：

```
 protected void Application_Start() {
     ...
     BundleTable.EnableOptimizations = true; // Force bundling to occur

     // If the compilation node in web.config indicates debugging mode is enabled
     // then clear all transforms. I.e. disable Js and CSS minification.
     if (HttpContext.Current.IsDebuggingEnabled) {
         BundleTable.Bundles.ToList().ForEach(b => b.Transforms.Clear());
     }

      // Add a custom CSS bundle transformer. In my case the transformer replaces a
      // token in the CSS file with an AppConfig value representing the website URL
      // in the current environment. E.g. www.mydevwebsite in Dev and
      // www.myprodwebsite.com in Production.
      BundleTable.Bundles.ToList()
          .FindAll(x => x.GetType() == typeof(StyleBundle))
          .ForEach(b => b.Transforms.Add(new MyStyleBundleTransformer()));
     ...
} 
```

* * *

## 回答 #9

> 赞同：10
> 
> 时间：2016-01-16T10:38:23.753

如果您将以下属性设置为 false，那么它将禁用捆绑和缩小。

在**Global.asax.cs**文件中，添加如下所述的行

```
protected void Application_Start()
{
    System.Web.Optimization.BundleTable.EnableOptimizations = false;
} 
```

* * *

## 回答 #10

> 赞同：6
> 
> 时间：2017-09-14T15:46:12.517

以下是如何在每个捆绑包的基础上禁用缩小：

```
bundles.Add(new StyleBundleRaw("~/Content/foobarcss").Include("/some/path/foobar.css"));
bundles.Add(new ScriptBundleRaw("~/Bundles/foobarjs").Include("/some/path/foobar.js")); 
```

旁注：用于捆绑包的路径不得与已发布版本中的任何实际路径一致，否则将无法正常工作。还要确保避免使用 .js、.css 和/或 '.' 和 '_' 包名称中的任何位置。保持名称尽可能简单明了，如上例所示。

助手类如下所示。请注意，为了使这些类面向未来，我们通过外科手术删除了 js/css 缩小实例而不是使用 .clear() 并且我们还插入了一个 mime-type-setter 转换，如果没有它，生产构建肯定会遇到麻烦，尤其是在涉及到正确移交 css 捆绑包（firefox 和 chrome 拒绝将 mime-type 设置为“text/html”的 css 捆绑包，这是默认设置）：

```
internal sealed class StyleBundleRaw : StyleBundle
{
        private static readonly BundleMimeType CssContentMimeType = new BundleMimeType("text/css");

        public StyleBundleRaw(string virtualPath) : this(virtualPath, cdnPath: null)
        {
        }

        public StyleBundleRaw(string virtualPath, string cdnPath) : base(virtualPath, cdnPath)
        {
                 Transforms.Add(CssContentMimeType); //0 vital
                 Transforms.Remove(Transforms.FirstOrDefault(x => x is CssMinify)); //0
        }
        //0 the guys at redmond in their infinite wisdom plugged the mimetype "text/css" right into cssminify    upon unwiring the minifier we
        //  need to somehow reenable the cssbundle to specify its mimetype otherwise it will advertise itself as html and wont load
}

internal sealed class ScriptBundleRaw : ScriptBundle
{
        private static readonly BundleMimeType JsContentMimeType = new BundleMimeType("text/javascript");

        public ScriptBundleRaw(string virtualPath) : this(virtualPath, cdnPath: null)
        {
        }

        public ScriptBundleRaw(string virtualPath, string cdnPath) : base(virtualPath, cdnPath)
        {
                 Transforms.Add(JsContentMimeType); //0 vital
                 Transforms.Remove(Transforms.FirstOrDefault(x => x is JsMinify)); //0
        }
        //0 the guys at redmond in their infinite wisdom plugged the mimetype "text/javascript" right into jsminify   upon unwiring the minifier we need
        //  to somehow reenable the jsbundle to specify its mimetype otherwise it will advertise itself as html causing it to be become unloadable by the browsers in published production builds
}

internal sealed class BundleMimeType : IBundleTransform
{
        private readonly string _mimeType;

        public BundleMimeType(string mimeType) { _mimeType = mimeType; }

        public void Process(BundleContext context, BundleResponse response)
        {
                 if (context == null)
                          throw new ArgumentNullException(nameof(context));
                 if (response == null)
                          throw new ArgumentNullException(nameof(response));

         response.ContentType = _mimeType;
        }
} 
```

要使整个工作正常工作，您需要安装（通过 nuget）：

WebGrease 1.6.0+ Microsoft.AspNet.Web.Optimization 1.1.3+

你的 web.config 应该像这样丰富：

```
<runtime>
       [...]
       <dependentAssembly>
        <assemblyIdentity name="System.Web.Optimization" publicKeyToken="31bf3856ad364e35" />
        <bindingRedirect oldVersion="1.0.0.0-x.y.z.t" newVersion="x.y.z.t" />
       </dependentAssembly>
       <dependentAssembly>
              <assemblyIdentity name="WebGrease" publicKeyToken="31bf3856ad364e35" culture="neutral" />
        <bindingRedirect oldVersion="0.0.0.0-x.y.z.t" newVersion="x.y.z.t" />
       </dependentAssembly>
        [...]
</runtime>

<!-- setting mimetypes like we do right below is absolutely vital for published builds because for some reason the -->
<!-- iis servers in production environments somehow dont know how to handle otf eot and other font related files   -->
<system.webServer>
        [...]
        <staticContent>
      <!-- in case iis already has these mime types -->
      <remove fileExtension=".otf" />
      <remove fileExtension=".eot" />
      <remove fileExtension=".ttf" />
      <remove fileExtension=".woff" />
      <remove fileExtension=".woff2" />

      <mimeMap fileExtension=".otf" mimeType="font/otf" />
      <mimeMap fileExtension=".eot" mimeType="application/vnd.ms-fontobject" />
      <mimeMap fileExtension=".ttf" mimeType="application/octet-stream" />
      <mimeMap fileExtension=".woff" mimeType="application/font-woff" />
      <mimeMap fileExtension=".woff2" mimeType="application/font-woff2" />
      </staticContent>

      <!-- also vital otherwise published builds wont work  https://stackoverflow.com/a/13597128/863651  -->
      <modules runAllManagedModulesForAllRequests="true">
         <remove name="BundleModule" />
         <add name="BundleModule" type="System.Web.Optimization.BundleModule" />
      </modules>
      [...]
</system.webServer> 
```

请注意，您可能需要采取额外的步骤才能使您的 css-bundle 在字体等方面工作。但这是另一回事。

* * *

## 回答 #11

> 赞同：6
> 
> 时间：2018-05-06T06:53:37.780

在您的项目中搜索`EnableOptimizations`关键字

所以如果你发现

```
BundleTable.EnableOptimizations = true; 
```

转动它`false`。

这确实禁用了缩小，并且还完全禁用了捆绑

* * *

## 回答 #12

> 赞同：4
> 
> 时间：2014-06-27T04:56:15.427

只是为了补充已经给出的答案，如果您也不想**缩小/混淆/连接某些文件，同时仍然允许对其他文件进行完全捆绑和缩小，**最好的选择是使用自定义渲染器，它将读取特定包的内容(s) 并呈现页面中的文件，而不是呈现包的虚拟路径。**我个人需要这样做，因为即使在缩小缩小**的情况下，当我的 CSS 文件被捆绑时，IE 9 也是 $*%@ing 。

非常感谢[这篇文章](http://blog.kurtschindler.net/disabling-bundling-and-minification-in-asp-net-4-5mvc-4/)，它给了我用于创建 CSS 渲染器的代码的起点，该渲染器将为 CSS 渲染文件，但仍然允许系统渲染我的 javascript 文件捆绑/缩小/混淆。

创建了静态助手类：

```
using System;
using System.Text;
using System.Web;
using System.Web.Mvc;
using System.Web.Optimization;

namespace Helpers
{
  public static class OptionalCssBundler
  {
    const string CssTemplate = "<link href=\"{0}\" rel=\"stylesheet\" type=\"text/css\" />";

    public static MvcHtmlString ResolveBundleUrl(string bundleUrl, bool bundle)
    {
      return bundle ? BundledFiles(BundleTable.Bundles.ResolveBundleUrl(bundleUrl)) : UnbundledFiles(bundleUrl);
    }

    private static MvcHtmlString BundledFiles(string bundleVirtualPath)
    {
      return new MvcHtmlString(string.Format(CssTemplate, bundleVirtualPath));
    }

    private static MvcHtmlString UnbundledFiles(string bundleUrl)
    {
      var bundle = BundleTable.Bundles.GetBundleFor(bundleUrl);

      StringBuilder sb = new StringBuilder();
      var urlHelper = new UrlHelper(HttpContext.Current.Request.RequestContext);

      foreach (BundleFile file in bundle.EnumerateFiles(new BundleContext(new HttpContextWrapper(HttpContext.Current), BundleTable.Bundles, bundleUrl)))
      {
        sb.AppendFormat(CssTemplate + Environment.NewLine, urlHelper.Content(file.VirtualFile.VirtualPath));
      }

      return new MvcHtmlString(sb.ToString());
    }

    public static MvcHtmlString Render(string bundleUrl, bool bundle)
    {
      return ResolveBundleUrl(bundleUrl, bundle);
    }
  }

} 
```

然后在剃刀布局文件中：

```
@OptionalCssBundler.Render("~/Content/css", false) 
```

而不是标准：

```
@Styles.Render("~/Content/css") 
```

我确信为 javascript 文件创建一个可选的渲染器也几乎不需要更新到这个帮助程序。

* * *

## 回答 #13

> 赞同：1
> 
> 时间：2014-04-12T05:56:40.707

如果您使用 LESS/SASS CSS 转换`useNativeMinification`，则可以将选项设置为 false 以禁用缩小（在 web.config 中）。出于我的目的，我只是在需要时在此处更改它，但是您可以使用 web.config 转换来始终在发布构建时启用它，或者找到一种在代码中修改它的方法。

```
<less useNativeMinification="false" ieCompat="true" strictMath="false"
      strictUnits="false" dumpLineNumbers="None"> 
```

*提示：*这样做的全部目的是查看您的 CSS，您可以在浏览器检查工具中执行此操作，或者只需打开文件即可。启用捆绑后，每次编译时文件名都会更改，因此我将以下内容放在页面顶部，以便每次更改时我都可以在新的浏览器窗口中轻松查看已编译的 CSS。

```
@if (Debugger.IsAttached) 
{
    <a href="@Styles.Url(ViewBag.CSS)" target="css">View CSS</a>
} 
```

这将是一个动态 URL，例如`https://example.com/Content/css/bundlename?v=UGd0FjvFJz3ETxlNN9NVqNOeYMRrOkQAkYtB04KisCQ1`

* * *

更新：我创建了一个 web.config 转换，以便在部署/发布构建期间为我将其设置为 true

```
 <bundleTransformer xmlns="http://tempuri.org/BundleTransformer.Configuration.xsd">
    <less xdt:Transform="Replace" useNativeMinification="true" ieCompat="true" strictMath="false" strictUnits="false" dumpLineNumbers="None">
      <jsEngine name="MsieJsEngine" />
    </less>
  </bundleTransformer> 
```

* * *

## 回答 #14

> 赞同：1
> 
> 时间：2016-01-20T23:02:10.880

这可能对将来的某些人有用，因为新框架在通过 VS 设置时会获得默认`web.config`的. 在你会发现这一行：`web.Debug.config``web.Release.config``web.release.config`

```
<compilation xdt:Transform="RemoveAttributes(debug)" /> 
```

这似乎覆盖了我所做的任何内联更改。我评论了这条线，我们很高兴（就在“发布”构建中看到非缩小代码而言）**

# javascript - 使用 Modernizr 填充 CSS 过渡

> ID：11944750
> 
> 赞同：2
> 
> 时间：2012-08-14T01:55:43.433
> 
> 标签：javascript, css, modernizr, html5boilerplate

我将modernizr js 安装为HTML5 Boilerplate 的一部分，但我不知道如何使用它。我创建了一个带有一些过渡的 CSS3 导航。我知道 IE 不支持它们，但据我了解，Modernizr 可以使用 js 填充。那正确吗？我怎么做？我对js了解不多。

[我的 jsfiddle](http://jsfiddle.net/Z8Cu8/5/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T03:23:54.903

Modernizr 不为 CSS3 功能提供任何 polyfill。它确实提供了一个简单的 polyfill 来启用旧浏览器中 HTML5 元素的样式。除此之外，它主要用作通过将类名添加到页面的 html 标记来检测特征的方法。

所以在你的CSS中，你可以做类似的事情

```
.borderradius .mydiv {
    border-radius: 8px;
} 
```

如果您的浏览器支持，Modernizer 会将 .borderradius 类名添加到页面的 html 标记中……或者您可以在 js 中使用它来选择性地回退到插件等。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:51:06.663

您需要添加 yepnope 脚本来检查是否支持 css3 转换。例如像这样：

```
yepnope({
  test : Modernizr.transition,
  yep  : '',
  nope : ['polyfillfortransition.js']
}); 
```

**更新**

实际上，如果您使用 jQuery，则有一个插件可以做到这一点。您不需要执行上面的代码。Addy Osmani 的这篇文章将更好地解释它[http://addyosmani.com/blog/css3transitions-jquery/](http://addyosmani.com/blog/css3transitions-jquery/)。在那篇文章中，他还解释了 yepnope 的用法。

# sql - 跨年份按日期范围（同一月和同一天）过滤

> ID：11944762
> 
> 赞同：6
> 
> 时间：2012-08-14T01:57:14.563
> 
> 标签：sql, database, postgresql, date, postgresql-8.4

我有一个 PostgreSQL 数据库，其中有一个保存日期的表。现在我需要在所有年份中找到日期范围内的所有行，`15/02`直到`21/06`（日/月）。

示例结果：

```
1840-02-28
1990-06-21
1991-02-15
1991-04-25
1992-05-30
1995-03-04
1995-04-10
2001-02-03
2010-04-06 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-15T12:59:02.127

假设（充满信心）您希望在一年中的某些日子之间有日期，而不管年份如何（例如，如果您要发送一批生日贺卡或其他东西），您可以使用以下方法设置测试：

```
CREATE TABLE d (dt date);
COPY d FROM STDIN;
1840-02-28
1990-06-21
1991-02-15
1991-04-25
1992-05-30
1995-03-04
1995-04-10
2001-02-03
2010-04-06
\. 
```

您可以使用“行值构造函数”轻松选择所需的范围：

```
SELECT * FROM d
  WHERE (EXTRACT(MONTH FROM dt), EXTRACT(DAY FROM dt))
           BETWEEN (2, 15) AND (6, 21); 
```

产生：

```
     dt     
------------
 1840-02-28
 1990-06-21
 1991-02-15
 1991-04-25
 1992-05-30
 1995-03-04
 1995-04-10
 2010-04-06
(8 行)

```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T03:58:21.823

使用`WHERE`带有运算符的子句`BETWEEN`。看：

[http://www.postgresql.org/docs/current/static/functions-comparison.html#FUNCTIONS-COMPARISON](http://www.postgresql.org/docs/current/static/functions-comparison.html#FUNCTIONS-COMPARISON)

和：

[http://www.postgresql.org/docs/current/static/sql-select.html](http://www.postgresql.org/docs/current/static/sql-select.html) [http://www.postgresql.org/docs/current/static/tutorial.html](http://www.postgresql.org/docs/current/static/tutorial.html)

如果这没有帮助，请扩展您的问题：

*   您正在使用的表的结构，来自 psql 的`\d tablename`命令或原始`CREATE TABLE`语句；
*   部分样本内容
*   您遇到问题的查询
*   预期成绩

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-18T23:32:42.903

我很确定，@kgrittn 对问题的解释是准确的，我*喜欢*他优雅地使用行构造函数。在我测试了几个替代方案之后更是如此，但没有一个可以与性能相匹配：

使用 65426 行的真实生活表进行测试；32107 合格。PostgreSQL 9.1.4，最好的五个`EXPLAIN ANALYZE`：

```
SELECT * FROM tbl
WHERE  to_char(data, 'MMDD') BETWEEN '0215' AND '0621'; 
```

总运行时间：251.188 毫秒

```
SELECT * FROM tbl
WHERE  to_char(data, 'MMDD')::int BETWEEN 215 AND 621; 
```

总运行时间：250.965 毫秒

```
SELECT * FROM tbl
WHERE  to_char(data, 'MMDD') COLLATE "C" BETWEEN '0215' AND '0621'; 
```

总运行时间：221.732 ms
使用“non-locale”进行字符串比较更快`C`- 更多[关于排序规则支持的手册](http://www.postgresql.org/docs/current/interactive/collation.html)。

```
SELECT * FROM tbl
WHERE  EXTRACT(MONTH FROM data)*100 + EXTRACT(DAY FROM data)
       BETWEEN 215 AND 621; 
```

总运行时间：209.965 毫秒

```
SELECT * FROM tbl
WHERE  EXTRACT(MONTH FROM data) BETWEEN 3 AND 5
OR     EXTRACT(MONTH FROM data) = 2 AND EXTRACT(DAY FROM data) >= 15
OR     EXTRACT(MONTH FROM data) = 6 AND EXTRACT(DAY FROM data) <= 21; 
```

总运行时间：160.169 毫秒

```
SELECT * FROM tbl
WHERE  EXTRACT(MONTH FROM data) BETWEEN 2 AND 6
AND    CASE EXTRACT(MONTH FROM data) 
       WHEN 2 THEN EXTRACT(DAY FROM data) >= 15
       WHEN 6 THEN EXTRACT(DAY FROM data) <=21
       ELSE TRUE END; 
```

总运行时间：147.390 毫秒

```
SELECT * FROM tbl
WHERE  CASE EXTRACT(MONTH FROM data) 
       WHEN 3 THEN TRUE
       WHEN 4 THEN TRUE
       WHEN 5 THEN TRUE
       WHEN 2 THEN EXTRACT(DAY FROM data) >= 15
       WHEN 6 THEN EXTRACT(DAY FROM data) <= 21
       ELSE FALSE END; 
```

总运行时间：131.907 毫秒

@Kevin 使用行构造函数的解决方案：

```
SELECT * FROM tbl
WHERE (EXTRACT(MONTH FROM data), EXTRACT(DAY FROM data))
       BETWEEN (2, 15) AND (6, 21); 
```

总运行时间：**125.460 毫秒前导**
。

* * *

### 更快的功能索引

打败它的唯一方法是使用索引。上面的查询都不能在`data`. 但是，如果读取性能至关重要（并且写入性能的成本很小），您可以使用[功能索引](http://www.postgresql.org/docs/current/interactive/indexes-expressional.html)：

```
CREATE INDEX ON tbl(EXTRACT(MONTH FROM data), EXTRACT(DAY FROM data));

SELECT * FROM tbl
WHERE (EXTRACT(MONTH FROM data), EXTRACT(DAY FROM data))
       BETWEEN (2, 15) AND (6, 21); 
```

总运行时间：**85.895 毫秒**

这就是我最终可以击败凯文的查询的地方：使用单列索引而不是他的案例所需的多列索引。

```
CREATE INDEX ON tbl(
CAST(EXTRACT(MONTH FROM data) * 100 + EXTRACT(DAY FROM data) AS int));

SELECT * FROM tbl
WHERE  (EXTRACT(MONTH FROM data) * 100 + EXTRACT(DAY FROM data))::int
       BETWEEN 215 AND 621; 
```

总运行时间：**84.215 毫秒**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-21T12:20:40.087

您可以使用简单的条件 >= 和 <= 或类似的或使用 between/and 但诀窍是知道您的确切数据类型。有时日期字段包含时间，这就是查询可能出错的地方，因此建议使用一些与日期相关的函数来消除时间问题。在 SQL Server 中执行此操作的常用函数是 datediff 函数。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T04:52:41.650

您可以使用以下语法。

`SELECT * FROM tableName WHERE dateColumnName BETWEEN '2012.01.01' AND '2012.08.14';`

只需替换以下内容；

```
tableName       - Name of the table you are going to access
dateColumnName  - Name of the column whch contains dates
2012.08.1       - Start date
2012.08.21      - End date 
```

输入两个日期时，请仔细检查上面的示例。以相同的格式输入，并将它们括在`''`s 中。

如果将`*`标记替换为列名，则只能过滤掉该列的值。

希望有帮助..

# r - 根据焦点绘制椭圆

> ID：11944767
> 
> 赞同：2
> 
> 时间：2012-08-14T01:57:41.283
> 
> 标签：r, geometry

有没有办法根据R中的以下定义（而不是特征值）绘制一个简单的椭圆？

我要使用的定义是椭圆是平面中的点集，其中到两个固定点 F [1]和 F [2]的距离之和是一个常数。

我应该只使用极坐标吗？

这可能是更多的算法问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T07:09:39.433

正如@DWin 建议的那样，有几种绘制椭圆的实现（例如`draw.ellipse`package中的函数`plotrix`）。要找到它们：

```
 RSiteSearch("ellipse", restrict="functions") 
```

话虽如此，如果您了解一点几何，实现自己的功能相当简单。这是一个尝试：

```
ellipse <- function(xf1, yf1, xf2, yf2, k, new=TRUE,...){
    # xf1 and yf1 are the coordinates of your focus F1
    # xf2 and yf2 are the coordinates of your focus F2
    # k is your constant (sum of distances to F1 and F2 of any points on the ellipse)
    # new is a logical saying if the function needs to create a new plot or add an ellipse to an existing plot.
    # ... is any arguments you can pass to functions plot or lines (col, lwd, lty, etc.)
    t <- seq(0, 2*pi, by=pi/100)  # Change the by parameters to change resolution
    k/2 -> a  # Major axis
    xc <- (xf1+xf2)/2
    yc <- (yf1+yf2)/2  # Coordinates of the center
    dc <- sqrt((xf1-xf2)^2 + (yf1-yf2)^2)/2  # Distance of the foci to the center
    b <- sqrt(a^2 - dc^2)  # Minor axis
    phi <- atan(abs(yf1-yf2)/abs(xf1-xf2))  # Angle between the major axis and the x-axis
    xt <- xc + a*cos(t)*cos(phi) - b*sin(t)*sin(phi)
    yt <- yc + a*cos(t)*sin(phi) + b*sin(t)*cos(phi)
    if(new){ plot(xt,yt,type="l",...) }
    if(!new){ lines(xt,yt,...) }
    } 
```

一个例子：

```
F1 <- c(2,3)
F2 <- c(1,2)
plot(rbind(F1, F2), xlim=c(-1,5), ylim=c(-1, 5), pch=19)
abline(h=0, v=0, col="grey90")
ellipse(F1[1], F1[2], F2[1], F2[2], k=2, new=FALSE, col="red", lwd=2)
points((F1[1]+F2[1])/2, (F1[2]+F2[2])/2, pch=3) 
```

![在此处输入图像描述](../Images/80d452129d98acbe490bc891e800b321.png)

# visual-studio - 从命令行抑制 PDB 生成 - C++

> ID：11944768
> 
> 赞同：2
> 
> 时间：2012-08-14T01:57:51.527
> 
> 标签：visual-studio, compiler-options

我进行了搜索，可以找到一些使用 Visual Studio 菜单来禁止创建 PDB 文件的示例。我需要为我正在构建的项目执行此操作，但是，这仅需要从命令行使用 Visual Studio 编译器。是否有用于禁用 PDB 生成的命令行开关？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:08:43.160

在 Visual Studio 中浏览项目设置时，大多数选项会告诉你它们的等效命令行开关是什么。

要禁用链接时 PDB 生成，请省略该`/DEBUG`开关。

要禁用编译时 PDB 生成，请省略`/Z`开关 ( `/Z{7|i|I}`)。

[编辑] 哦，其实如果你使用`/Z7`开关，调试信息会生成到目标文件而不是PDB。所以那个特别的没问题。然而，没有它编译会更快。如果您不想要任何调试信息，请省略。

# javascript - Meteor Template 助手和 Handlebars 助手有什么区别？

> ID：11944769
> 
> 赞同：4
> 
> 时间：2012-08-14T01:57:56.100
> 
> 标签：javascript, meteor, handlebars.js

我试图了解使用 Meteor 模板助手与使用 Handlebars 模板助手的区别、优缺点。

例如：

```
Template.users_insert.is_state_selected = function(code){}; 
```

相对

```
Handlebars.registerHelper('is_state_selected', function(code){}); 
```

除了 Handelbars 助手对我们的覆盖范围比`Temple.my_template.helper_function`.

我最关心的不仅是差异和利弊，还有一个可能导致另一个没有的副作用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-04T16:02:43.523

这里遗漏了一件事。

Handlebars Helpers 已注册

```
Handlebars.registerHelper('helper_name', function(){}); 
```

可用于整个项目。

在流星

`Template.my_template.helpers({});`

或者

`Template.my_template.my_helper = function(){};`

仅适用于当前模板：例如 my_template

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T16:45:26.640

这就是我区分这两种机制的方式，不保证正确性；）

Meteor 模板方法用于数据绑定，这就是它们具有本地范围的原因。每个模板都需要应用程序数据的一个子集，可能以各种形式表示。这个子集是通过模板方法定义的。

Handlebars 本身就是模板框架，因此帮助程序控制您的应用程序如何呈现它从 Meteor“数据层”接收到的数据。您可能需要一些特殊类型的枚举，需要一种将数据值“映射”到路径等的方法......但是您只使用“数据层”提供的数据而不扩展它。

# android - 如何动态设置媒体播放器源？

> ID：11944771
> 
> 赞同：0
> 
> 时间：2012-08-14T01:58:48.077
> 
> 标签：android, adt

我想知道动态设置媒体播放器数据源的最佳方法是什么？我有一个可以播放不同 mp3 文件的微调器（目前大约 9 个左右），我还有一个无线电组可以选择声音的时间播放（4 个可能的时间选项）。

有没有办法让这更有效，而不是设置很多开关，9 首歌曲可能会被选择（一次一首）并以 4 种不同的长度播放，只是拥有所有这些 switch 语句似乎很笨拙。

```
s1.setOnItemSelectedListener(new OnItemSelectedListener(){   
            public void onItemSelected(AdapterView<?> arg0, View arg1, int arg2, long arg3)

            {
                int index = arg0.getSelectedItemPosition();
                switch(index)
                {
                case 0: //would be 9 of these, represents the song choices
                    final MediaPlayer md = MediaPlayer.create(MainActivity.this, R.raw.song);
                    int id = rg.getCheckedRadioButtonId();
                    switch(id)
                    {
                    case R.id.radio0: // 4 of these for each song, representing play length
                        btn.setOnClickListener(new View.OnClickListener() {

                            public void onClick(View v) {
                                if (md.isPlaying()) {
                                    md.pause();
                                    btn.setText("Paused");
                                }
                                else {
                                    md.start();
                                    md.setLooping(true);
                                    btn.setText("Playing");
                                    }
                                }});
                        break;
                    }
                }
            }

            public void onNothingSelected(AdapterView<?> arg0) {
                // TODO Auto-generated method stub

            }
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:25:21.237

好的，您可以设置一个变量来表示单选按钮所代表的时间量，然后创建一个 postDelayed 以在该时间量之后停止 mediaPlayer 吗？

```
 int timeTillStop = 15000;

    Handler handler = new Handler();

    handler.postDelayed(new Runnable() {
          public void run() {
            mp.stop;
          }
       }, timeTillStop ); 
```

现在您只需要确定播放 9 种声音中的哪一种？

# php - 通过 PHP 发送带有表单的邮件动态表

> ID：11944773
> 
> 赞同：0
> 
> 时间：2012-08-14T01:59:00.840
> 
> 标签：php, arrays, forms, email

我有一个需要发送到电子邮件地址的订单（表格）。我了解如何在 PHP 中发送电子邮件的基础知识，但不了解这种情况的具体情况（获取 cookie 数组 + 表单元素的信息并将它们放在 PHP 邮件程序的正文中）

[我正在使用此链接的答案将订单作为数组存储在 cookie 中](https://stackoverflow.com/a/1960049/1362016)

然后我使用这个 javascript 在#catalog div 中创建 HTML 表格。重要的部分是制作表格的 for 循环。使用 list.items(); 可以将“cookie 数组”列为数组

```
function loopArrayMail() { 
if ($.cookie('productWishlist') == null) {
    html = ""; $('#catalog').html(html);
} else {
    var cookie = $.cookie("productWishlist"); var items = cookie ? cookie.split(/,/) : new Array();
    var html = "<table><tr><th>Product</th><th># to order</th></tr>";
    for(var i=0;i<items.length;i++){ html += "<tr><td width='450'>"+items[i]+"</td><td><input type='text' name='numberOfItems' /></td></tr>"; }
    html += "</table>"; $('#catalog').html(html);
}} 
```

订单表格中每个项目旁边都有一个文本输入，供用户输入他们想要的项目数量。 **如何在 PHP 中将表格内容和每个表单输入作为电子邮件发送？**

我的猜测是我必须***使用 cookie 数组，并且每次迭代都有一个包含所有文本输入的数组并使用 foreach***以便它们在电子邮件中一起出现（不确定如何准确地执行此操作）。同样重要的是，可以有任意数量的文本输入，因为订单表格上的项目数量会增加/减少。

[这是使用 foreach 获取多个输入框的示例](https://stackoverflow.com/q/6009788/1362016)，但是如何将我的 cookie 中的数组与文本输入结合起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T07:38:40.827

最好只在电子邮件中发送纯 HTML 而不使用任何 javascript，因为电子邮件程序中没有任何 javascript，也没有任何 cookie。

不知道谁告诉你可以使用它，但电子邮件程序不是浏览器。

但是，如果您通过电子邮件发送链接，则任何用户都可以在功能齐全的互联网浏览器中打开它，因此这可能就是您要查找的内容。

* * *

![在此处输入图像描述](../Images/a97079f2826df4bde8611ff6c7303b9d.png)

> Netscape Communicator 4 支持电子邮件中的 javascript，但不知道 cookie。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-16T19:10:48.427

首先，当您在 loopArrayMail() 函数中创建表单元素时，您必须为表单元素命名，后跟 [] 表示它是一个数组。

```
for(var i=0;i<items.length;i++){
  html += "<tr><td width='450'>"+items[i]+"</td><td><input type='text' name='ordernum[]' size='8' /></td></tr>";
} 
```

由于 cookie 是一个字符串，因此您必须首先根据分隔符（即逗号）分解字符串。将两个数组放入变量中。然后使用 for 循环遍历所有数组。

```
function explode_trim($str, $delimiter = ',') {
  if ( is_string($delimiter) ) {
    $str = trim(preg_replace('|\\s*(?:' . preg_quote($delimiter) . ')\\s*|', $delimiter, $str));
    return explode($delimiter, $str);
  } 
return $str; }

$orderCookie = explode_trim($_COOKIE['productWishlist']);
$orderNum = $_POST['ordernum'];

for ( $i = 0; $i < count($orderCookie); $i++) {
  echo $orderCookie[$i] . ' = ' . $orderNum[$i] . '<br />';
} 
```

# c# - C# 中的 Tessnet2 错误

> ID：11944778
> 
> 赞同：2
> 
> 时间：2012-08-14T01:59:46.817
> 
> 标签：c#, tessnet2

我通过以下代码在 C# 中使用 Tessnet2 ocr：

```
 tessnet2.Tesseract ocr = new tessnet2.Tesseract();
            ocr.SetVariable("tessedit_char_whitelist", "0123456789");
            ocr.Init(Application.StartupPath + @"D:\\Program Files (x86)\\Visual Studio 2010\\Projects\\AForgeTest2\\AForgeTest2\\tessdata\\", "eng", true);
            List<tessnet2.Word> result = ocr.DoOCR(numberTest, Rectangle.Empty);
            string code = result[0].Text;
            testBox1.Text = code; 
```

但是当我运行调试时，它会在第 5 行显示错误消息：

```
static void Main()
        {
            Application.EnableVisualStyles();
            Application.SetCompatibleTextRenderingDefault(false);
            Application.Run(new Form1());//the line with error
        } 
```

*FileLoadException was Unhandle：
混合模式程序集是针对运行时的“v2.0.50727”版本构建的，如果没有其他配置信息，则无法在 4.0 运行时中加载。*

你知道如何解决这个问题吗？

亲切的
问候

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-01T23:05:26.780

尝试添加

```
<configuration>
    <startup useLegacyV2RuntimeActivationPolicy="true">
        <supportedRuntime version="v4.0" sku=".NETFramework,Version=v4.0"/>
    </startup>
</configuration> 
```

到您的 App.config。

这使您能够引用该 DLL，而无需更改整个项目的框架版本。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:17:20.423

我认为将项目的目标框架从 4.0 更改为 2.0 会有所帮助。

请参阅：[更改现有项目的目标 .NET Framework 版本或配置文件](http://msdn.microsoft.com/en-us/library/bb398202.aspx%5E)

![在此处输入图像描述](../Images/325bc5f93254e04d7f58af84ef5e38d5.png)

# objective-c - 寻找下拉导航菜单

> ID：11944785
> 
> 赞同：0
> 
> 时间：2012-08-14T02:00:38.920
> 
> 标签：objective-c, ios, ios4, uinavigationitem

我正在尝试为我的网站创建一个 iPhone 客户端的下拉导航菜单。我正在搜索的菜单类型是 Facebook 的 iPhone 客户端中使用的菜单类型。登录后在 Facebook 应用程序的左上角找到它。有人熟悉这个吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:59:22.333

这是一个开源控制器的链接，该控制器实现了像 facebook 应用程序一样的滑出。

[http://ipup.github.com/PPRevealSideViewController](http://ipup.github.com/PPRevealSideViewController)

[滑出菜单](http://ipup.github.com/PPRevealSideViewController)

社区中还有其他一些例子，但我对这个很幸运，希望你也会。

好起来！

# android - 创建 twitter 客户端时 twitter4j 出错

> ID：11944789
> 
> 赞同：0
> 
> 时间：2012-08-14T02:00:44.813
> 
> 标签：android, twitter, twitter4j

我正在尝试使用本教程创建一个 twitter 客户端：

*   [http://blog.blundell-apps.com/sending-a-tweet/](http://blog.blundell-apps.com/sending-a-tweet/)

我做每件事都很好，但是当我按下运行时，我得到了一个错误。logcat 的第一行说：

> 找不到方法 twitter4j.Twitter.getOAuthAccessToken，引用自方法*** .IntegrateTwitter.authoriseNewUser

我搜索并发现问题出在 twitter4j lib 上，但我不知道如何解决它。谁能帮帮我吗？任何建议表示赞赏。

# jquery - jquery - 向上搜索具有特定类的元素？

> ID：11944791
> 
> 赞同：4
> 
> 时间：2012-08-14T02:01:10.870
> 
> 标签：jquery, parent

在 jquery 中有没有办法定位`$(this)`. `some element above it`。和`class of 'abc'`

（以上，我的意思是父母，祖父母等）

例如：

```
<div class='a'>
    <div class='b'>
        <div class='c'>
        </div>
    </div>
</div> 
```

因此，当我单击 class='c' 时，我可以使用 class='a' 定位其上方的任何内容，**并**获得与使用相同代码单击 class='b' 相同的结果吗？（如果我点击'b'，'a' div 仍将是其父级（或祖父级），类为'a'）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-14T02:06:00.943

尝试[最接近（）](http://api.jquery.com/closest/)：

```
$(this).closest('.a') 
```

> 获取与选择器匹配的第一个元素，从当前元素开始，向上遍历 DOM 树。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-14T02:03:08.310

`.parents`方法可以有一个选择器。

```
$(this).parents('.a') 
```

# objective-c - 使用 Interface Builder 为控制器绑定 managedObjectContext 插座？

> ID：11944794
> 
> 赞同：0
> 
> 时间：2012-08-14T02:01:49.430
> 
> 标签：objective-c, interface-builder

我正在尝试设置一个相当简单的视图，向用户显示一个表格。这个表连接到一个数组控制器，我想用它从核心数据中检索记录。出于某种原因，我似乎无法将“managedObjectContext”插座连接到我的应用程序中的其他任何东西。当我创建我的项目时，在我的应用程序委托中生成了一个属性，它返回我需要的 MOC，但我无法在 Interface Builder 中连接它，即使在声明前加上“IBOutlet”。下图显示了两端的可用连接：

[http://yada.im/uploads/image/screenshot/1108/7efebc90ca7187a537da9ae003dd5f3e.png](http://yada.im/uploads/image/screenshot/1108/7efebc90ca7187a537da9ae003dd5f3e.png)

我确定我在这里遗漏了一些简单的步骤，但我不知道我应该写哪一段胶水代码可以让我更容易地把它连接起来。作为参考，我尝试将一条线从控制器的 moc 插座拖到我能想到的每个来源，并将“文件所有者”类更改为我的应用程序的类。难倒这里！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T12:37:45.650

通常在 XCode 提供的模板中`managedObjectContext`，带有`AppDelegate`. 您必须将`managedObjectContext`数组控制器的引用绑定到`managedObjectContext`in `AppDelegate`。

为此，您必须`AppDelegate`在 xib 内部创建一个对象，即，如果它不存在。（从您的对象库中拖动一个对象占位符并将其类设为`AppDelegate`）

这使得`AppDelegate`该 xib 内部的绑定可见。

下一步实际上是绑定 managedObjectContext。选择您的阵列控制器并转到绑定检查器。在参数部分中，从下拉列表中选择 App Delegate 并选中“绑定到”。用 填充“模型密钥路径”字段`self.managedObjectContext`。现在您还将在连接检查器中找到连接。

**更新：** 创建新`AppDelegate`对象的过程只有在它不存在于主 nib 文件中时才进行（但生成的存根始终`AppDelegate`在主 nib 文件中具有该对象）。

对于非主 nib 文件，如果我们按照上述方法，`AppDelegate`将创建一个新对象，该对象将不是`NSApplication's`委托。即使这可以通过连接每个 nib 中提供的应用程序对象代理的委托出口来解决，但`AppDelegate`对象仍然不会相同。

结果是两个不同的 managedObjectContext 与同一个商店交谈。尽管在每一步都保存更改时这似乎可以正常工作，但这不是我们想要的。

**要获得正确的 AppDelegate 对象，即在主 nib 文件中使用的对象：** - 直接通过应用程序将数组控制器绑定到其委托，而 不是创建新`AppDelegate`对象。`managedObjectContext`换句话说，要绑定的对象将是应用程序对象，而使用的键路径将是`self.delegate.managedObjectContext`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T08:49:36.277

The way to add objects of your entity depends on the specific logic you want to implement. The generic and easy solution would be, **binding the fields for input to the array controller** like you might have done for the table and then hooking up the array controller methods to the buttons inside the sheet.

Another option is sub-classing NSArrayController and over-riding the super class methods like `add:` to write your code (for opening your slide sheet maybe) before calling the super class method, `[super add:sender]` . Don't forget to specify this sub-class of NSArrayController as the class of your array controller in the xib.

# ajax - Django 中间件使用 ajax 使用 HTTPS POST 引发 403 错误

> ID：11944795
> 
> 赞同：2
> 
> 时间：2012-08-14T02:02:06.297
> 
> 标签：ajax, django, post, https, django-csrf

我对这里的很多部分（Django/Ajax 等）都很陌生，所以虽然我了解高级 CSFR 图片，但我对细节没有完整的处理。

由于传递的数据量较大，我需要将请求从 GET 转换为 PUT。高级别的，我正在通过 HTTPS 对 django 应用程序进行 AJAX POST API 调用。调用是从提供页面的同一域进行的。

但是，我不断收到“未设置 CSRF cookie”错误。

我正在使用 Django 1.4

为了通过 CSRF 保护，我在标题中包含了其他帖子中提到的 X-CSFRToken，并在发布的数据中包含了 {{ csrf_token }} 标记。但是，看起来该标签并没有被令牌替换。X-CSFRToken 值在请求中作为 NULL 发送。不知道为什么它没有设置。

我的印象是我不需要在页面视图中使用 ensure_csrf_cookie()，因为我在 ajaxSetup 中的 POST 之前获取了 cookie，但我也尝试过。

想法我做错了什么？

相关代码：

```
siteUrl = "https://localhost:8443/"

$.ajaxSetup({ 
     beforeSend: function(xhr, settings) {
         function getCookie(name) {
             var cookieValue = null;
             if (document.cookie && document.cookie != '') {
                 var cookies = document.cookie.split(';');
                 for (var i = 0; i < cookies.length; i++) {
                     var cookie = jQuery.trim(cookies[i]);
                 if (cookie.substring(0, name.length + 1) == (name + '=')) {
                     cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                     break;
                 }
             }
         }
         return cookieValue;
         }
         if (new RegExp("^"+siteUrl.replace("\\","\\\\")+".*").test(settings.url)) {
             // Only send the token to URLs from our site.
             xhr.setRequestHeader("X-CSRFToken", getCookie('csrftoken'));
         }
     } 
});

$.ajax({
    url: submitUrl,
    data: {'network_ids': JSON.stringify(network_ids),
            'csrfmiddlewaretoken': '{{ csrf_token }}'},
    type: 'POST',
    crossDomain: true,
    dataType: 'json',
    cotentType: 'application/json',
    success: function(mydata) {
        console.log(mydata);
    },
    error: function(jqXHR, textStatus, errorThrown) {alert(textStatus); alert(errorThrown)}
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T19:40:01.470

您有多种选择：此代码清单显示您从 cookie 获取 CSRF 令牌：[https ://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax)

```
function getCookie(name) {
    var cookieValue = null;
    if (document.cookie && document.cookie != '') {
        var cookies = document.cookie.split(';');
        for (var i = 0; i < cookies.length; i++) {
            var cookie = jQuery.trim(cookies[i]);
            // Does this cookie string begin with the name we want?
            if (cookie.substring(0, name.length + 1) == (name + '=')) {
                cookieValue = decodeURIComponent(cookie.substring(name.length + 1));
                break;
            }
        }
    }
    return cookieValue;
}
getCookie('csrftoken'); 
```

并假设 javascript 函数正在提交到 django 视图，您可以告诉该视图忽略 csrf 保护。[https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.csrf_exempt](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#django.views.decorators.csrf.csrf_exempt)

```
from django.views.decorators.csrf import csrf_exempt

@csrf_exempt
def my_view(request):
    return HttpResponse('Hello world') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T19:32:32.567

Is your js served through Django's template engine? Otherwise `{{ csrf_token }}` won't be evaluated. Have you checked that it's actually POSTed to the server?

Also according to the [docs](https://docs.djangoproject.com/en/dev/ref/contrib/csrf/#ajax) the idea behind the `ajaxSend` event is that you **don't** have to pass the `csrf_token` explicitly.

I've noticed that your `ajaxSetup` differs slightly from the one in the docs. It might be correct, i would however copy the original from the docs.

# python - cv.KMeans2 聚类索引不一致

> ID：11944796
> 
> 赞同：2
> 
> 时间：2012-08-14T02:02:14.537
> 
> 标签：python, opencv, cluster-analysis, k-means

所以我有一个视频，上面有 3 个绿点。这些点在其周边有一堆“可追踪的好特征”。

这些点彼此相距很远，因此使用 KMeans 我很容易将它们识别为单独的集群。

问题在于集群的顺序会随着帧的变化而变化。在一个帧中，一个特定的簇是输出列表中的第一个。在下一个集群中，它是输出列表中的第二个。

它使测量角度变得困难。

除了编写额外的代码将每个列表与前一帧的列表进行比较之外，有没有人遇到过这个问题或者可以想到一个修复方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-19T05:59:52.033

由于 k-means 是一种随机方法，即使多次分析同一帧，您也可能会遇到此问题。

尝试使用之前的帧聚类中心作为 k-means 的初始中心。这可能使排序对您来说足够稳定，甚至可以显着加快 k-means（假设绿点不会移动得太快）。

或者，只需尝试重新排序均值，使它们最接近之前的图像均值。

# jquery - 全局变量 Jquery

> ID：11944800
> 
> 赞同：3
> 
> 时间：2012-08-14T02:03:28.400
> 
> 标签：jquery

我以前问过这个问题，但从未真正得到它的工作。

或多或少，我有多个 JS 文件，我需要检查一个变量。我有一个函数可以检查一个类是否存在，然后更改变量。

```
var states = function(){

    if($('#Animation.switch.switchOff').length == 1){
        animationtoggle = 0;
    }
    else {
        animationToggle = 1 ;
    }
    if($('#Autoscroll.switch.switchOff').length == 1){
        scrolltoggle = 1;   
    }
    else {
        scrolltoggle = 0    
    }
    return {
        animationtoggle: animationtoggle,
        scrolltoggle: scrolltoggle
    };
} 
```

然后我在另一个函数中，在另一个 JS 文件中：

```
Okay, I've done this, although It still doesn't fix my problem of being able to use this variable on another file, I have this inside the function: 

$(function() {
    var ss = states();
    ss.animationtoggle;
    var last_position = 0;
    var duration = 300;
    if (animationtoggle == 1){
       //only do something if it's equal to 1 "on"
}); 
```

这是切换按钮代码：

```
$('#optionMenu ul li').click(       
function() {
$(this).toggleClass('switchOff');
var ss = states();
ss.scrolltoggle;
ss.animationtoggle; 
}); 
```

我以正确的方式接近这个吗？

请帮忙！这是我的网站，目前切换按钮位于右上角：http: [//shannonhochkins.v5.cloudsvr.com.au/](http://shannonhochkins.v5.cloudsvr.com.au/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:27:30.900

我相信您通过多次创建和分配相同的变量来覆盖它们。全局变量应该在您的特定函数范围之外定义一次，最好在页面加载的第一个操作附近。全局变量被分配给窗口对象，一旦声明就可以按名称访问。

```
//You need to define your global variable out of the scope of your function
var ss = states();

$(function() {
if (ss.animationtoggle == 1){
   //only do something if it's equal to 1 "on"
});

$('#optionMenu ul li').click(       
function() {
$(this).toggleClass('switchOff');
//Don't create the same variable here with the same name
//Instead access the global variables by using them
// ss.scrolltoggle;
// ss.animationtoggle; 
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:27:44.067

尝试改变

```
var animationtoggle = 1, 
```

到

```
animationtoggle = 1, 
```

并将它们移出功能。如果不是，它们将被一次又一次地初始化

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T03:41:18.010

尝试重命名函数中的变量以避免混淆：

```
var animationtoggle = 1;
... 
```

到

```
var _animationtoggle = 1;
...
return { animationtoggle : _animationtoggle, ....} 
```

或代替您的功能如下：

```
return {
        animationtoggle: ($('#Animation.switch.switchOff').length == 1)?0:1,
        scrolltoggle: ($('#Autoscroll.switch.switchOff').length == 1)?1:0
}; 
```

# android - opengl 中的初始 ModelView 矩阵是什么，通过什么调用它被修改以及如何修改？

> ID：11944802
> 
> 赞同：0
> 
> 时间：2012-08-14T02:03:44.000
> 
> 标签：android, opengl-es

我正在使用 OpenGL ES 1 在 Android 中编程。问题是我想触摸场景中的不同对象。我想试试这个网站的光线挑选方法。

[http://www.opengl.org/archives/resources/faq/technical/selection.htm](http://www.opengl.org/archives/resources/faq/technical/selection.htm)

然而，使用光线拾取我将不得不将光线矢量与 ModelView 矩阵的倒数相乘。但是使用 Java API 不可能像`glGetFloatv`在 C 代码中那样获得任何矩阵。所以计划是我自己管理一个 ModelView 矩阵并将其用于光线拾取。

问题是。ModelView 矩阵最初的样子如何？通过什么调用它被修改以及如何修改？

# spring - jRebel 不适用于消息资源包

> ID：11944805
> 
> 赞同：3
> 
> 时间：2012-08-14T02:04:10.553
> 
> 标签：spring, resourcebundle, jrebel

我在我的 Spring 项目中使用 jRebel 5.0.0 版。一切正常，Java、JSP 或 JS 文件的任何更改都会立即受到影响。但是当我修改 MessageResource.properties 文件中的一些消息键时，它不会重新加载新的修改。我所有的资源包文件都在同一个目录中：**myproject\src\main\webapp\WEB-INF**；
并在目标文件夹（构建文件）中 **myproject\target\myproject\WEB-INF**。
我不使用外部 jRebel 配置文件，而是使用 Eclipse 的 jRebel 插件，所以我在 myproject\target\myproject\WEB-INF\classes\jrebel.xml 中找到了自动生成的 jRebel 配置文件。
这是它的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<application xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://www.zeroturnaround.com" xsi:schemaLocation="http://www.zeroturnaround.com http://www.zeroturnaround.com/alderaan/rebel-2_0.xsd">

    <classpath>
        <dir name="D:/workspace/.projects/myproject/target/myproject/WEB-INF/classes">
        </dir>
    </classpath>

    <web>
        <link target="/">
            <dir name="D:/workspace/.projects/myproject/src/main/webapp">
            </dir>
        </link>
    </web>

</application> 
```

你能帮我解决这个问题吗？太感谢了。

# c - 将 pthread 互斥锁与不同的线程框架一起使用

> ID：11944808
> 
> 赞同：0
> 
> 时间：2012-08-14T02:04:45.043
> 
> 标签：c, multithreading, pthreads

我正在用 C 编写一个操纵杆库，我想让它成为线程安全的。可以使用 pthread 互斥锁吗？即使使用我的库的应用程序使用例如 ACE 作为线程框架（不确定 ACE 是否不仅扩展 pthread，但我们假设它没有），它们是否也能工作？

Windows 也是如此：我可以`CriticalSection`在 mingw+gcc 中将 Windows 与 pthread 结合使用吗？或者是线程化操作系统必须执行的操作以便始终使用本机实现（Linux 和`CriticalSection`Windows 上的 pthread）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:27:45.283

线程可以在*用户级别*运行，因此不能保证操作系统会调度所有并发。话虽如此，您应该始终寻求使您的库线程安全，而不需要对您的用户使用特定的锁定机制。

例如，您可以使所有函数“纯”或可重入。您还可以提供明确**非**线程安全的版本和需要特定库的替代版本，例如 pthread。在最极端的情况下，您可以提供无锁同步。

# asp.net - 访问用户的特定数据 ASPX / .MDF 表

> ID：11944811
> 
> 赞同：0
> 
> 时间：2012-08-14T02:05:24.607
> 
> 标签：asp.net, sql, database, mdf

我正在使用 Visual Studio，并且在我的 Default.aspx Web 表单上有以下 page_load 函数：

```
if (IsPostBack == false)
        {
            //Display all records on the form load
            DisplayCars(""); 
```

我有一个用户，我可以在其中获取他们的用户名（我曾经将其添加为特定数据记录的“创建者”）。我想使用此用户名仅显示用户名 = ACar.Creator 的汽车

我该怎么做呢？为了做到这一点，我已经完成了所有设置。

我需要以下内容：

```
if (User.Identity.Name == ACar.Creator) {
show this record
} 
```

但我不知道 aspx/sql 中的语法

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:00:32.707

您实际上应该通过传递用户名在数据库中执行此操作

```
public DataTable GetUserRecord(string userName)
{
    DataTable dt = new DataTable();
    SqlConnection conn = new SqlConnection("connection string to database");

    using(conn)
    {
    string sql = "SELECT car.CarName, car.Model FROM car WHERE car.Creator = @UserName";
    SqlCommand comm = new SqlCommand(sql, conn);
    comm.Parameters.AddWithValue("@UserName", userName);

    dt.Load(comm.ExecuteReader());
    }
    return dt;
} 
```

从您的页面

```
protected void Page_Load(object sender, Eventargs e)
{
   DataTable dt = GetUserRecord(User.Identity.Name);
   if(dt.Rows.Count > 0)
   {
      string firstRowCarName = dt.Rows[0]["CarName"];
      //etc
   }
} 
```

# bash - 正确引用将子变量扩展到它们自己的参数？

> ID：11944812
> 
> 赞同：1
> 
> 时间：2012-08-14T02:05:40.307
> 
> 标签：bash

最好的方法是什么

```
n=4
file1=firstfile.txt
file2=secondfile.txt
catlist="$file1" "$file2" 'file3.txt file'"$n"'.txt'

cat $catlist 
```

通常，引用的问题是你做得不够。但我实际上确实希望这些成为他们自己的参数，所以我不确定如何去做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T05:30:15.633

切勿将多个参数放入单个字符串；你需要一个数组来保存多个参数。

```
catlist=( "$file1" "$file2" file3.txt "file$n.txt" )

cat "${catlist[@]}" 
```

# linux - 使用别名来缩短我的命令？

> ID：11944814
> 
> 赞同：0
> 
> 时间：2012-08-14T02:05:56.307
> 
> 标签：linux, bash, shell

我习惯在 Linux 下搜索特定的关键字。

例如，我可以在 home 下搜索“TAIWAN”

```
grep -i -r TAIWAN ./ | grep -v".svn" 
```

但是，我认为这有点多余；我想使用别名，这样我就可以输入

```
grep TAIWAN 
```

然后别名会将我的命令扩展为

```
grep -i -r TAIWAN ./ | grep -v".svn" 
```

我怎么能做到这一点？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T02:11:30.677

您将无法使用*别名*来执行此操作，但您可以创建一个 bash*函数*：

```
mygrep () { grep -i -r $* ./ | grep -v".svn"; } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T02:14:31.113

我不相信 alias 可以完成你想要的，因为没有办法重新排序参数。制作一个小的 shell 命令更简单。而不是 replace `grep`，因此可能会弄乱期望`grep`以某种方式运行的程序，我会给它一个新名称，例如`rgrep`.

```
#!/bin/sh

grep -i -r "$@" | grep -v .svn 
```

把它放在你的某个地方，`PATH`并`~/bin`用`chmod +x ~/bin/rgrep`. 然后就可以了`rgrep TAIWAN .`。

不幸的是，这将忽略包含文件的*行。*`.svn`

您可以尝试修复模式匹配以仅匹配 grep 输出的文件部分，或者您可以使用代替...`grep -v`来启动更复杂的命令，或者您可以使用 ack。`find``grep -r`

[Ack](http://betterthangrep.com)是一个更好的 grep 并且会避免版本控制目录和其他你不关心的常见文件和目录。它还将自动使用寻呼机并为输出着色。

# linux - 如何在linux中删除目录中文件名的特定后缀

> ID：11944820
> 
> 赞同：-1
> 
> 时间：2012-08-14T02:07:14.750
> 
> 标签：linux, shell, rename

> **可能重复：**
> [在 bash Linux 中提取文件名和扩展名](https://stackoverflow.com/questions/965053/extract-filename-and-extension-in-bash)
> [：删除多个文件的文件扩展名](https://stackoverflow.com/questions/4509485/linux-remove-file-extensions-for-multiple-files)

```
For example, A.txt B.txt, I want to rename then to A and B . 
```

我怎么能用shell脚本来做呢？还是其他方法？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:12:30.913

```
for i in *.txt; do mv "$i" "${i%.txt}"; done 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:10:31.143

```
for FILE in *.txt ; do mv -i "$FILE" "$(basename "$FILE" .txt)" ; done 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T02:18:00.277

我会使用类似的东西：

```
#!/bin/bash

for file in *.txt
do
    echo "$file" "$( echo $file | sed -e 's/\.txt//' )"
done 
```

当然，将“.txt”的上述两个引用替换为您要删除的任何文件扩展名，或者最好只使用 $1（第一个传递给脚本的参数）。

迈克尔·G。

# c# - VisualStudio 无法识别我添加的新引用

> ID：11944823
> 
> 赞同：1
> 
> 时间：2012-08-14T02:07:50.053
> 
> 标签：c#, visual-studio-2010

我已经编写了一个 DLL，然后在我的解决方案中添加了对它的引用，但是当我在 usings 部分声明它时，它给我的错误是无法识别，您是否缺少引用？

这是我设置解决方案的方式...

1-首先我创建了我的 DLL。让我们将它命名为 MyDLLLibrary，它位于硬盘驱动器的某个位置。

2-我也有一个解决方案，由其他几个项目组成......对于所有这些我创建了一个像“C：\_debug”这样的文件夹，并且我已经将所有这些项目的“输出路径”和“参考路径”设置为指向那个公用文件夹。到目前为止，还不错。

3-现在我将 MyDLLLibrary 添加到此解决方案中，将其“输出”和引用路径更改为指向相同的公共调试文件夹，使用 Add Refrence 并将 MyDLLLibrary 的引用指向我想要在解决方案中的项目并重建解决方案。 ..

现在，如果我使用 using 语句，它仍然无法识别它。

我什至尝试了从项目选项卡中添加引用..这也不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T02:13:42.090

检查两个程序集的项目属性，并确保两者的框架设置都是 .NET Framework 4 而不是 .NET 4.0 Client Profile 或其他。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-11-13T22:19:18.567

在使用 Visual Studio 2017 时，我不得不关闭 Visual Studio 并删除`.vs`文件夹（位于解决方案的根目录）。这解决了我的问题

# networking - 如果 UDP 不可靠，为什么在传输层使用它

> ID：11944825
> 
> 赞同：5
> 
> 时间：2012-08-14T02:08:00.097
> 
> 标签：networking, udp, tcp-ip, osi

对不起，这是一个愚蠢的问题。

传输层的功能是可靠地传递消息。UDP本质上是不可靠的，那我们为什么要在传输层使用呢？

谢谢

编辑：为了澄清，我已经阅读了 Wiki 和其他来源。我的问题是

UDP 是不可靠的（我知道为什么和优点以及使用它的位置等），为什么不在其他层使用它（UDP），而不是意味着可靠性的传输层。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-14T02:12:11.110

有时，数据的快速发送和无停顿比流的可靠性更重要。DNS 使用 UDP 是因为 DNS 服务器和客户端之间的事务仅由一个数据包组成。如果数据包丢失，它将根据客户端的请求重新传输。

同样，流视频经常使用 UDP 作为传输协议，因为偶尔丢失数据包是可以接受的。最好是图像质量因丢包而受损，而不是视频流因 TCP 同步而遭受抖动或暂停（滞后）。

游戏也经常使用 UDP，牺牲引擎准确性以提高速度/用户体验。

这些以及更多示例可以在[维基百科](http://en.wikipedia.org/wiki/User_Datagram_Protocol#Applications) [文章的相关部分中找到。](http://en.wikipedia.org/wiki/User_Datagram_Protocol#Comparison_of_UDP_and_TCP)

**编辑**

UDP 用于传输层，因为它是传输层协议。它提供“为应用程序提供端到端通信服务”（[RFC1122](https://www.rfc-editor.org/rfc/rfc1122)）。

可靠性服务对于传输层协议是*可选的。*

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T02:29:40.633

> ...而不是意味着可靠性的传输层

~~“可靠性”不止一个维度。~~ 有趣的是，UDP~~是可靠的，因为它~~提供了一个校验和来防止损坏。

像 TCP 这样的流协议会给延迟敏感的应用程序带来问题。对于延迟敏感的应用程序，UDP 的自然限制（在拥塞期间减少流量）是一个巨大的福音。

> 为什么不在其他层使用它（UDP）

IP 数据报被设计为足够小以进行下一跳传输。UDP 数据报可以跨越 IP 数据报，因此有一些附加值。但是，如果 TCP 是 UDP 之上的一层，它将受到 UDP 语义的限制（TCP 端口绑定到连接，UDP 数据报则没有）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T02:21:11.713

在传输层使用 UDP 的原因是因为这些层的设置方式。UDP本质上是一种将数据从A点传输到B点的协议，而不是作为应用程序或硬件层。

在传输层没有可靠性假设，而是假设 UDP 是一种传输数据的协议。在7层组网方式下，属于网络层和会话层之间的接口。传输层的名称只是说明了它的作用。[有关 OSI 模型的更多信息，请参阅](http://en.wikipedia.org/wiki/OSI_model)wikipedia 。

**TLDR** UDP 位于传输层的原因是因为它是一种数据传输协议，因此位于传输层。所有处理数据传输的协议都属于这一类

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-07-14T07:55:01.673

传输层类

```
Class 0 - Simple class
Class 1 - Basic error recovery class
Class 2 - Multiplexing class
Class 3 - Error Recovery and multiplexing class
Class 4 - Error detection and recovery class 
```

# python - python 计算工作周数

> ID：11944826
> 
> 赞同：5
> 
> 时间：2012-08-14T02:08:06.210
> 
> 标签：python, datetime

给定开始日期，我如何确定 Python 已经使用了多少个“工作周”？我不能只除以 7，因为那不会给我正确的答案。

例如，从 2012 年 8 月 1 日到当前日期（2012 年 8 月 13 日）的开始日期将输出 3 周。

我基本上是想从足球赛季开始就弄清楚当前周（整数）是多少。

我尝试过使用 Python 的 datetime 模块，但无济于事。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T02:18:55.037

尝试使用[datetime.weekday](http://docs.python.org/library/datetime.html#datetime.datetime.weekday)、[datetime.isoweekday](http://docs.python.org/library/datetime.html#datetime.datetime.isoweekday)来获取一周中的当前日期，或者使用更完整的[datetime.isocalendar](http://docs.python.org/library/datetime.html#datetime.datetime.isocalendar)来获取一年中的当前周，并使用它们作为偏移量来计算对齐的差异。

所以你可以有这样的功能：

```
def week_difference(start, end):
    assert start <= end
    start_year, start_week, start_dayofweek = start.isocalendar()
    end_year, end_week, end_dayofweek = end.isocalendar()

    return ((end_year - start_year) * 52) - start_week + end_week 
```

像这样使用：

```
import datetime as dt
# same week
In [1]: week_difference(dt.datetime(2012, 8, 1),  dt.datetime(2012, 8, 1))
Out[1]: 0

# your example (see note below) 
In [2]: week_difference(dt.datetime(2012, 8, 1),  dt.datetime(2012, 8, 13))
Out[2]: 2

# across years
In [3]: week_difference(dt.datetime(2011, 8, 1),  dt.datetime(2012, 8, 13))
Out[3]: 54

# year boundary: second last business week of 2011, to first business week of 2012
# which is the same business week as the last business week of 2011
In [4]: week_difference(dt.datetime(2011, 12, 20),  dt.datetime(2012, 1, 1))
Out[4]: 1

In [5]: week_difference(dt.datetime(2011, 12, 18),  dt.datetime(2012, 1, 1))
Out[5]: 2 
```

`1`您可以根据您选择的一周差异语义添加到您的周输出中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T02:30:12.563

当你得到你的日期时间对象时......

```
import datetime
today = datetime.datetime.now()
start = datetime.datetime(2012, 9, 5) 
```

...您还可以使用[isocalendar](http://docs.python.org/library/datetime.html#datetime.date.isocalendar) ...

```
today.isocalendar()
>>> (2012, 33, 1)
start.isocalendar()
>>> (2012, 36, 3) 
```

这个 3 元组返回年份、年份中的星期和星期几。如果您只关心一年，那么您可以简单地减去“一年中的一周”值（我可能会在这里减去一个......）。否则，您将需要参与其中的年份。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T19:00:09.303

我的单行扩展到包括年份边界：

```
start_date = datetime.date(2012, 8, 1)
print ((datetime.date.isocalendar(datetime.date.today())[0]-datetime.date.isocalendar(start_date)[0])*52)+(datetime.date.isocalendar(datetime.date.today())[1]-datetime.date.isocalendar(start_date)[1])+1
>>> 3 
```

注意：如果 start_date 在未来（从今天开始），此函数仍将返回负值！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-14T02:36:22.307

单线：

```
datetime.date.isocalendar(datetime.date.today())[1] - datetime.date(2012, 8, 1).isocalendar()[1] + 1 
```

# android - 透明活动正在对主要活动开放。如何在不超过主要活动的情况下打开它？

> ID：11944827
> 
> 赞同：10
> 
> 时间：2012-08-14T02:08:08.137
> 
> 标签：android, android-activity, notifications

我正在构建一个将显示通知的应用程序，在单击通知时，我想打开一个透明的对话框，如活动，该对话框将具有与该通知相关的选项。

我定义了一个透明的活动，并像这样在通知中注册它。

```
 Intent notificationIntent = new Intent(context, EasyToDoReminder.class);
 PendingIntent contentIntent = PendingIntent
                                .getActivity(context, 0, notificationIntent, 0); 
```

活动开始，但主要活动在其后面。如何独立开启提醒活动？

**而且我不想显示对话框。我想显示一个看起来像对话框的活动。我已经在使用你提到的主题了。我还有一项主要活动。当我试图启动我的透明对话框之类的活动时，主要活动开始了，然后开始了对话框之类的活动。**

任何人都可以建议以更好的方法做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-07-08T07:04:19.667

好的，我也遇到了这个问题，
将另一个 LAUNCHER 活动用于第二个活动

显现 ：

```
 <activity android:name=".popup.PopUp"
              android:label="~.Popup"
              android:theme="@style/Theme.Transparent"
              android:launchMode="singleInstance"
              android:windowSoftInputMode="adjustResize">
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity> 
```

并在意图：

```
 Intent i = new Intent();
        i.setClass(service.getBaseContext(), PopUp.class);
        i.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK |
                Intent.FLAG_ACTIVITY_SINGLE_TOP |
                Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET);
        i.putExtra("id", id + "");
        context.startActivity(i); 
```

如果您从服务调用使用***service.getBaseContext()***，并且如果您不只是使用您的***上下文***

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-24T17:07:40.367

这就是我的诀窍 -

对于结果意图，请执行以下操作：

```
public void onReceive(Context context, Intent intent) {
    ... 
    resultIntent.setFlags(Intent.FLAG_ACTIVITY_NEW_TASK);
    ...
} 
```

对于封装对话框警报的活动，请执行以下操作（在清单文件中）：

```
 <activity
        android:launchMode="singleInstance"
    </activity> 
```

希望这可以帮助...

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-16T19:35:54.580

您需要`finish();`从您的主要活动中调用，以便它不会重新出现在所有其他活动之后。

更好地解释here[启动对话框式活动时的意外行为](https://stackoverflow.com/questions/8425669/unexpected-behavior-when-launching-a-dialog-style-activity)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-14T02:28:23.437

就像鼻屎说的那样，添加`android:theme="@android:style/ThemeDialog"`到`<application ... </application>`清单的一部分，让你的主要活动只显示为一个对话框，没有背景。

您还可以使用带有按钮的警报对话框，它可以激活您想要的选项，而不是第二个活动：[AlertDialog 参考](http://developer.android.com/reference/android/app/AlertDialog.html "警报对话框")

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-08-14T02:18:41.393

如果不启动活动，您将无法启动对话。我认为您需要执行以下操作：

*   创建一个新活动，将其样式更改为对话框样式：
    *   `android:theme="@android:style/Theme.Dialog"`
*   在这个新活动中，添加您希望在用户单击通知时发生的所有事情。
*   像您一样将您的通知链接到它。

现在，当您单击通知时，将显示对话框。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-08-16T20:09:16.187

我解决了我的问题。

首先，我在 matifest 文件中为我的第二个活动添加了属性，如下所示。

```
android:launchMode="singleTask" 
```

在从通知启动时，我将以下标志设置为意图。

```
Intent notificationIntent = new Intent(context, EasyToDoReminder.class);
notificationIntent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_WHEN_TASK_RESET ); 
```

有用！！

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-08-14T02:21:07.520

您可以尝试弹出窗口，然后在该弹出窗口内填充您的布局。或者，当它实际上是一个活动时，使用 android:theme="@android:style/Theme.Dialog" 来获得对话框的效果

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-08-14T02:11:16.630

我认为您必须先启动 Activity 才能启动 Dialog（这就是我认为您正在尝试做的事情）。

您可以将您的主要活动设置为看起来像一个对话框 - 但除此之外，我认为如果没有 Activity 上下文将其绑定到，您将无法启动对话框。

我可能误解了你的问题。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-10-07T11:27:36.853

为您的对话活动设置[`android:taskAffinity`](http://developer.android.com/guide/topics/manifest/activity-element.html#aff)并[`android:launchMode="singleTask"`](http://developer.android.com/guide/topics/manifest/activity-element.html#lmode)在清单文件中。[这个答案](https://stackoverflow.com/a/4628441/1213197)的所有学分。

# cocoa-touch - 完全解除分配 Objective-C 单例

> ID：11944833
> 
> 赞同：7
> 
> 时间：2012-08-14T02:09:25.887
> 
> 标签：cocoa-touch, design-patterns, singleton

我是编写单例的新手，我必须为当前的 iOS 项目使用一个。要求之一是它可以被杀死。我知道这违背了单例的设计，但这是应该/可以做的事情吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T02:11:55.557

当然*可以*，但是如果您正在寻找一个可以创建，然后在不需要时释放的对象……这听起来像是一个常规对象。:)

* * *

通常单例控制自己的生命周期。你会在这里得到片面的讨论，除非你更多地说明这两个要求（一个，你使用一个单例，两个，它可以随意释放），以及为什么它们都对你的情况有意义。

这可能是因为单例包装了一些其他固有的独特资源（如文件资源或网络连接）。如果这是真的，那么通常单例是该资源的“管理者”，您将通过单例的接口公开对该资源的控制。

或者这可能是因为单例对象持有大量内存（某种缓冲区），并且您希望确保在必要时对其进行刷新。如果是这种情况，那么您可以根据需要对其创建和释放内存的每个方法更聪明，或者您可以让单例侦听低内存系统通知并适当地表现。

从本质上讲，我很难构建一个案例，让*单例对象本身*被释放是真正有意义的。单个基本对象只占用内存中的少量字节，并且闲逛不会伤害任何人。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-14T07:09:18.187

几乎我写过的每一个单例（除了完全以 UI 为中心的控制器）最终都被重构为不是单例。每一个。单身的。一。

因此，我已经停止写单例了。我编写了在实例中维护状态的类，就像任何普通类一样，并且与其他实例隔离。如果它们是通知重的，它们总是`self`作为通知对象传递。他们有代表。他们保持内部状态。他们避免真正的全局状态之外的全局变量。

而且，通常，我的应用程序中可能只有一个所述类的实例。这个实例就像一个单例，事实上，我什至可以创建一种方便的方法来获取它，可能是通过应用程序的委托或通过类方法（`sharedInstance`有时甚至可能被命名）。

所述类包括通常分为两部分的拆解代码；保持当前状态以便稍后恢复的代码和释放实例相关资源的代码。

像单身一样方便。准备好在需要时进行多次实例化。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-14T02:45:06.643

> 我知道这违背了单例的设计

它也违背了 Objective-C 中通常的内存管理模式。通常，一个对象可以保留另一个对象以防止它被销毁，并释放它以允许该对象被销毁。然而，明确地销毁一个对象并不是其他对象可以做的事情。

考虑如果对象 A 获得单例类 S 的共享实例 S1 会发生什么。如果 A 保留 S1，即使某个类方法释放 S 并将指向共享实例的全局变量设置为 nil，S1 仍将继续存在。当该类稍后创建一个新的共享实例 S2 时，将有两个 S 实例，即 S1 和 S2。这首先违反了定义单例的属性。

您可能可以通过覆盖`-retain`甚至 swizzling来解决这个问题`-release`，但这似乎很复杂，要解决一个原本不应该存在的问题。

一种可能的替代方法是*重置*您的共享对象，而不是尝试销毁它。如果需要，您可以将其所有属性设置为某个已知（可能无效）的状态，然后使用类方法重新初始化共享对象。请注意所有这些对可能使用共享对象的任何对象的影响。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-08-14T02:12:28.930

好没问题。你提供了一个新的类方法：[MyClass killSingleton]; 该方法释放单例并将其内部引用设置为 nil。下次有人问 [MyClass sharedSingleton] 时，您将按照之前创建它的相同步骤进行操作。

编辑：实际上，在过去，这样的例程可能会覆盖`release`选择器，并且拒绝消失。因此，正如下面的第一条评论所述，这是一个具有静态作用域的对象——它通过一个静态变量保持活动状态，保持对象的保留计数为 1。但是，通过添加一个新的类方法来消除该 ivar（在 ARC 下），从而释放它，可以达到预期的结果。对静态对象的实例化和释放的控制完全通过类方法完成，因此易于维护和调试。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-10T04:21:08.840

这与 Singleton 的概念背道而驰，但是对于基于 ARC 的项目，它可以通过以下方式实现

```
//ARC
@interface Singleton : NSObject

+ (Singleton *)sharedInstance;
+ (void)selfDestruct;

@end

@implementation Singleton

static Singleton *sharedInstance = nil;

+ (Singleton *)sharedInstance {
    if (sharedInstance == nil) {
        sharedInstance = [[Singleton alloc] init];
    }
    return sharedInstance;
}

+ (void) selfDestruct {
    sharedInstance = nil;
}

@end 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-08-27T09:42:25.957

```
//This can be implemented using bool variable. If bool no create new instance.  

@interface Singleton : NSObject

+ (Singleton *)sharedInstance;

@end

@implementation Singleton

static Singleton *sharedInstance = nil;

+ (Singleton *)sharedInstance {

        if (!keepInstance) {
               sharedInstance = [[Singleton alloc] init];
               keepInstance = YES;
        }
        return sharedInstance;
}

@end 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-17T15:00:33.057

我需要清除单例，所以我最终做了以下事情：

```
- (void)deleteSingleton{
@synchronized(self) {
    if (sharedConfigSingletone != nil) {
        sharedConfigSingletone = nil;
    }
}
} 
```

希望能帮助到你。

# scala - 新玩法！类编译器错误：“更新不是成员...”

> ID：11944835
> 
> 赞同：0
> 
> 时间：2012-08-14T02:09:50.897
> 
> 标签：scala, squeryl

使用播放！在 Scala 中使用 Squeryl ORM。我不知道是什么导致了这个问题，但是当我在 Play 中添加了一个新模型时！它现在不会编译一个非常奇怪的错误：

`value update is not a member of models.OauthCred`

`this()`编译器专门指向Squeryl 所需的零参数构造函数。

代码如下：

```
case class OauthCred(
  val id: Long,

  @Column("vendor")
  val vendor: String,

  @Column("user_id")
  val userId: Long,

  @Column("remote_id")
  val remoteId: Option[String],

  @Column("scope")
  var scope: String,

  @Column("access_code")
  var accessCode: Option[String],

  @Column("unauthorized_token")
  var unauthorizedToken: Option[String],

  @Column("authorized_token")
  var authorizedToken: Option[String],

  @Column("refresh_token")
  var refreshToken: Option[String],

  @Column("is_active")
  var isActive: Boolean,

  @Column("is_revoked")
  var isRevoked: Boolean,

  @Column("created")
  val created: Timestamp,

  @Column("modified")
  var modified: Timestamp

) extends KeyedEntity[Long] {

  this() = this(0L, "", 0L, Some(""), "", Some(""), Some(""), Some(""), Some(""), false, false, new Timestamp(), new Timestamp())

}

object OauthCred {

  def get(id:Long) = DB.oauthcred.lookup(id)

  def save(o:OauthCred) = DB.oauthcred.update(o)

  def getByRemoteId(remoteId:String) = { from(DB.oauthcred)( o => where(o.remoteId === Some(remoteId)) select(o) ).headOption }
} 
```

这可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:47:23.207

解决了这个问题，实际上比我想象的要简单得多：

`this()`实际上需要`def this()`

希望这对未来的用户有所帮助。

# permissions - 了解 Rabbitmq 权限

> ID：11944840
> 
> 赞同：3
> 
> 时间：2012-08-14T02:10:23.687
> 
> 标签：permissions, rabbitmq, publish-subscribe, stomp

我正在尝试建立一个发布/订阅系统。我的技术总监建议在分配给我的项目中使用 Rabbitmq 和 STOMP。

在这个系统中，我希望在服务器端创建交换并传递给用户订阅。我希望用户订阅交换并在信息可用时接收信息。我不希望客户端能够订阅任意交换（或主题交换的路由密钥，我不确定我要使用什么系统）。

例如，如果有人为公司的 widgetInk 工作，当他们登录我们的网站时，他们会收到与 widgetInk.whatever 交换和 AllUsers.whatever 交换的连接，但仅此而已。如果客户端尝试订阅其他内容，他们会收到错误消息。

[我已经阅读了所有的 RabbitMQ 教程，并查看了他们的部分内容。](https://www.rabbitmq.com/getstarted.html)我找到了[这篇关于访问控制的基本文章，但是现在已经阅读了三遍我仍然不知道rabbitmq是否适合我的要求。](https://www.rabbitmq.com/access-control.html)

可以根据我的要求配置 Rabbitmq 吗？我可以使用哪些资源来了解 Rabbitmq 的权限系统？有没有人建立或使用过这样的系统？切换到 ZeroMQ 或 ActiveMQ 是否符合我的最大利益？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:59:28.517

我想提一下您可能会使用的另一个平台：[Autobahn](http://autobahn.ws)（开源）或[WebMQ](http://www.tavendo.de/webmq)（基于 Autobahn）。

WebMQ 提供了这些特性（除了许多其他开箱即用的特性）：

*   基于 WebSocket 的发布订阅 ( [WAMP](http://wamp.ws) )
*   客户端会话的身份验证 (WAMP-CRA)
*   主题的细粒度可配置授权

如果您想走开源/构建自己的道路，这里有一些[教程](https://github.com/tavendo/AutobahnPython/tree/master/examples/wamp)。如果您需要具有用于配置/管理的 Web UI 的集成商业支持产品，请与我们联系。

免责声明：我是 Autobahn/WAMP 的创建者，并为 Tavendo 工作。

# c - 如何让更新线程和渲染线程一起顺利工作（在 Linux 上）？

> ID：11944843
> 
> 赞同：1
> 
> 时间：2012-08-14T02:10:30.003
> 
> 标签：c, linux, opengl, pthreads, mutex

我正在尝试让一个简单的多线程 OpenGL 应用程序正常工作。我有一个更新线程和一个渲染线程。按照我写它们的方式，它们本质上应该是轮流运行，因为它们是互斥锁的。相反，更新线程将运行数十次，然后渲染线程将运行数十次。以下是相关代码：

```
void glRender() {
    printf("glRender()\n");
    glXMakeCurrent(display, window, glXContext);
    glSetup();
    glClear(GL_COLOR_BUFFER_BIT);
    glBegin(GL_TRIANGLES);
        glVertex2f(cosf(fDrawAngle), sinf(fDrawAngle));
        glVertex2f(cosf(fDrawAngle+2.1f), sinf(fDrawAngle+2.1f));
        glVertex2f(cosf(fDrawAngle+4.2f), sinf(fDrawAngle+4.2f));
    glEnd();
    glXSwapBuffers(display, window);
    glXMakeCurrent(display, 0, 0);
}

void * glThread(void * params) {
    while (bRunning) {
        pthread_mutex_lock(&mutex);
        glRender();
        pthread_mutex_unlock(&mutex);
    }
    pthread_exit(0);
}

// Multi threaded version
void gameUpdateMT() {
    while (bRunning) {
        pthread_mutex_lock(&mutex);
        printf("gameUpdate()\n");
        windowUpdate();
        fDrawAngle += 0.01f;
        pthread_mutex_unlock(&mutex);
    }
}

// Single threaded version - Runs fine.
void gameUpdateST() {
    while (bRunning) {
        printf("gameUpdate()\n");
        windowUpdate();
        fDrawAngle += 0.01f;
        glRender();
    }
} 
```

gameUpdateMT() 和 glThread() 并行运行。是什么导致一个线程在另一个线程有机会运行之前循环了这么多次？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:25:05.350

线程在调用时不一定要结束其时间片`pthread_mutex_unlock()`。在这种情况下，它可以轻松地再次循环并重新获取互斥锁（互斥锁上的服务员没有排队）。

可以使用条件变量让线程轮流运行——但这只是不必要地使事情复杂化。如果您想按顺序交替调用`glRender()`，`windowUpdate()`那么只需一个线程交替调用它们，就像在“单线程”版本中一样。

如果它们从不同时运行，那么拥有多个线程是没有意义的。

# javascript - 我可以通过javascript在鼠标光标旁边动态添加文本吗？

> ID：11944844
> 
> 赞同：8
> 
> 时间：2012-08-14T02:10:34.090
> 
> 标签：javascript, css

现在，如果使用此 javascript 代码的进程中有任何 ajax，我更改了光标图像

```
$(function(){  
  $("html").bind("ajaxStart", function(){  
     $(this).addClass('busy');  
   }).bind("ajaxStop", function(){  
     $(this).removeClass('busy');  
   });  
}); 
```

及以下CSS

```
 html.busy, html.busy * {  
        cursor: wait !important;  
    } 
```

现在我也想在光标旁边添加一些文本。并在 ajax 完成时将其删除。不使用任何 jQuery 插件怎么可能？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T02:48:57.663

尝试这个：

具有启动/停止功能和更改文本的演示

[http://jsfiddle.net/SY4mv/18/](http://jsfiddle.net/SY4mv/18/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T02:44:11.803

请参阅[http://jsfiddle.net/PbAjt/show/](http://jsfiddle.net/PbAjt/show/)：

CSS：

```
#cursorText{
    position:absolute;
    border:1px solid blue; /* You can remove it*/
} 
```

JavaScript：

```
document.body.onmousemove=moveCursor;
var curTxt=document.createElement('div');
curTxt.id="cursorText";
curTxt.innerHTML="Hello!"; /* Or whatever you want */
document.body.appendChild(curTxt);
var curTxtLen=[curTxt.offsetWidth,curTxt.offsetHeight];
function moveCursor(e){
    if(!e){e=window.event;}
    curTxt.style.left=e.clientX-curTxtLen[0]+'px';
    curTxt.style.top=e.clientY-curTxtLen[1]+'px';
} 
```

根据你想要的，你可以改变

```
curTxt.style.left=e.clientX-curTxtLen[0]+'px'; 
```

进入

```
curTxt.style.left=e.clientX+'px'; 
```

和

```
curTxt.style.top=e.clientY-curTxtLen[1]+'px'; 
```

至

```
curTxt.style.top=e.clientY+'px'; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-14T02:31:30.257

CSS：

```
#tooltip {
    position: fixed;
    background-color: black;
    color: white;
    padding: 2px;
    opacity: 0;
    -webkit-border-radius: 3px;    
    border-radius: 3px;
    -webkit-transition: opacity 0.3s ease-in-out;
    -moz-transition: opacity 0.3s ease-in-out;
    -ms-transition: opacity 0.3s ease-in-out;
    -o-transition: opacity 0.3s ease-in-out;
    transition: opacity 0.3s ease-in-out;
}

html.busy #tooltip { opacity: 1 }

html.busy, html.busy * {  
        cursor: wait !important;  
    } 
```

HTML：

```
<div id="tooltip">Message</div> 
```

JS：

```
$(function() {
    $("html").bind("ajaxStart", function() {
        $(this).addClass('busy');
        $(this).bind('mousemove', function(event) {
            $('#tooltip').css({
                top: event.pageY - $('#tooltip').height() - 5,
                left: event.pageX
            });
        });
    }).bind("ajaxStop", function() {
        $(this).removeClass('busy');
        $(this).unbind('mousemove');
    });
}); 
```

活动文档：http: [//api.jquery.com/mousemove/](http://api.jquery.com/mousemove/) ​</p>

演示：http: [//jsfiddle.net/RGNCq/1/](http://jsfiddle.net/RGNCq/1/)

# xcode - 默认 Xcode 代码签名身份

> ID：11944848
> 
> 赞同：3
> 
> 时间：2012-08-14T02:10:46.463
> 
> 标签：xcode, unity3d, code-signing, build-settings

嗨，有人知道在 Xcode 中更改默认代码签名身份的方法吗？问题是，当我从 Unity 构建 Xcode 项目时，我在每次构建中重新创建项目，并且默认情况下 Xcode 签名设置为错误的。所以我每次都得手动改。

（我知道从 Unity 构建而不是创建新项目时可以使用相同的 Xcode 项目，但由于我使用自定义插件在 Unity 中构建，我不能这样做）

我目前正在使用 Xcode 4.3.3

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-19T05:36:38.033

为了更改**代码签名身份**，请选择您的**目标**，导航到**构建设置**。它在**签名**部分下。

[![在此处输入图像描述](../Images/5b82350e7cd96274c18c6965517b6644.png)](https://i.stack.imgur.com/yjmtw.png)

# ios - 将屏幕截图保存到沙箱

> ID：11944849
> 
> 赞同：2
> 
> 时间：2012-08-14T02:11:01.160
> 
> 标签：ios, xcode, screenshot, sandbox

有什么方法可以将屏幕截图保存到应用程序的沙箱中，或者可以很容易地找到添加到电子邮件附件的地方？目前我将其保存在相机胶卷中，但似乎无法将其附加到我的电子邮件中

```
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [path objectAtIndex:0];
NSString *png = @".png";
NSString *filename = [drawquestion stringByReplacingOccurrencesOfString:@" " withString:@""];
NSString *link = [NSString stringWithFormat: @"%@%@%@", documentDirectory,filename,png];
NSString *imagePath = [NSHomeDirectory() stringByAppendingPathComponent:link];
NSLog(link);

UIImageWriteToSavedPhotosAlbum(viewImage, drawquestion, nil, nil); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:26:39.270

您应该检查`writeToFile:atomically:`您是否获得了图像数据，并将其写入文件，这将保存到应用程序的沙箱中。

查看一些示例代码：[http ://blog.objectgraph.com/index.php/2010/04/05/download-an-image-and-save-it-as-png-or-jpeg-in- iphone-sdk/](http://blog.objectgraph.com/index.php/2010/04/05/download-an-image-and-save-it-as-png-or-jpeg-in-iphone-sdk/)

```
NSString *docDir = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];

NSLog(@"%@",docDir);

NSLog(@"saving png");
NSString *pngFilePath = [NSString stringWithFormat:@"%@/test.png",docDir];

    // You should swap data for your image data
NSData *data = [NSData dataWithData:UIImagePNGRepresentation(image)];
[data writeToFile:pngFilePath atomically:YES]; 
```

然后您可以使用类上的`addAttachmentData:mimeType:fileName:`方法`MFMailComposeViewController`附加附件（实际上您甚至不需要将图像保存到磁盘）：

```
MFMailComposeViewController * mailVC = [[MFMailComposeViewController alloc] init];

NSData *data; // this is the data from earlier
[mailVC addAttachmentData:data mimeType:@"image/png" fileName:@"myfilename"];
[self presentModalViewController:mailVC animated:YES]; 
```

请务必在此处设置正确的 MIME 类型。您可以设置为您想要的文件名，它是收件人看到的附件中文件的名称。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:34:01.817

这里有 2 个简单的示例，说明如何将图像附加到电子邮件中。

```
// with UIImage * image;

  MFMailComposeViewController * mfcvc = [[[MFMailComposeViewController alloc] init] autorelease];

  NSData * imageData = UIImagePNGRepresentation(image);
  [mfcvc addAttachmentData:imageData mimeType:@"image/png" fileName:@"demo"];
  [self.viewController presentModalViewController:mfcvc animated:YES];

// with UIImage * image; and float compression_quality; between 0.0 and 1.0

  MFMailComposeViewController * mfcvc = [[[MFMailComposeViewController alloc] init] autorelease];

  NSData * imageData = UIImageJPEGRepresentation(image, compression_quality);
  [mfcvc addAttachmentData:imageData mimeType:@"image/jpeg" fileName:@"demo"];
  [self.viewController presentModalViewController:mfcvc animated:YES]; 
```

将图像保存在应用程序沙箱中的文档目录中

```
NSArray *path = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
NSString *documentDirectory = [path objectAtIndex:0];
NSString *png = @".png";
NSString *filename = [drawquestion stringByReplacingOccurrencesOfString:@" " withString:@""];
NSString *imagePath = [documentDirectory stringByAppendingPathComponent:[NSString stringWithFormat:@"%@%@",filename, png]];

[imageData writeToFile:imagePath atomically:YES]; 
```

附言

我清理了路径的构建，看来你的代码有一个类似的路径

> /var/mobile/Applications/APP_ID//var/mobile/Applications/APP_ID/Documents/filename.png

# facebook-graph-api - 每周 Facebook 得分清零？

> ID：11944853
> 
> 赞同：0
> 
> 时间：2012-08-14T02:11:28.057
> 
> 标签：facebook-graph-api

我们想做一些在手游中比较常见的事情。我们希望每周重置我们的 Facebook 记分牌。我惊讶地发现——环顾四周——没有自动的方法可以做到这一点。

是否计划提供此功能？对 Facebook 来说，对我们有用的一个可能更简单的事情是，如果当我们询问朋友的分数时，我们会得到每个分数的日期，这样我们就可以过滤掉太旧的分数。

除此之外，似乎我们必须编写一个 Windows 服务或 Cron 任务来每周调用 Facebook 并执行此操作（或从 Putty 或其他工具手动执行），对于这个小任务似乎都不可接受。

谢谢你，让我们知道！-Brian Hunsaker 技术总监 @ DarkTonic Games

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:16:51.753

无法告诉 Facebook 自动擦除您应用的分数，但您只需调用一次 API 即可擦除所有分数：

`https://graph.facebook.com/[APP ID]?access_token=[APP ACCESS TOKEN]&method=delete`

这在这里提到： [https ://developers.facebook.com/docs/score/](https://developers.facebook.com/docs/score/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-04T14:17:11.473

从您的 facebook 应用程序中删除所有分数的调用如下（可能已更改）：

```
https://graph.facebook.com/[APP ID]/scores?access_token=[APP TOKEN]&method=delete 
```

它应该返回 true。

# actionbarsherlock - actionbarsherlock getSupportActionBar() 在 android4.0 中返回 null，但在 2.3.3 中是可以的

> ID：11944855
> 
> 赞同：7
> 
> 时间：2012-08-14T02:11:41.093
> 
> 标签：actionbarsherlock

应用程序使用 actionbarsherlock，但主要活动获取 getsupportactionbar 返回 null。AndroidManifest.xml：

```
 <application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Light1Theme" >
    <activity
        android:name=".activity.LogonActivity"
        android:configChanges="orientation|keyboardHidden"
        android:windowSoftInputMode="adjustUnspecified|stateHidden" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>
    ... 
```

主题.xml：

```
 <style name="Light1Theme" parent="Theme.Sherlock.Light"> 
```

登录活动.ava

```
 extends SherlockActivity implements OnSharedPreferenceChangeListener {
    ...
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //requestWindowFeature(Window.FEATURE_NO_TITLE);
    //getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,  WindowManager.LayoutParams.FLAG_FULLSCREEN);       

    setContentView(R.layout.logon);

    try{
    final ActionBar ab = getSupportActionBar();
    //return null
    ab.setBackgroundDrawable(getResources().getDrawable(R.drawable.ab_bg_black));
    getSupportActionBar().setIcon(R.drawable.hospital);
    }catch(Exception e){
        Log.e("", e.getMessage());
    } 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-04T12:07:52.197

几个小时前我遇到了同样的问题，结果问题的根源是我使用了一个没有标题栏的主题。

来自 actionbarsherlock 的开发者 Jake Wharton 的回复将帮助您解决问题[。](https://groups.google.com/d/msg/actionbarsherlock/QLWsmUfbvrA/EDEq12JOFwwJ)

简而言之：在 android 版本的 ICS 和更新版本上，设置属性`android:windowNoTitle`会影响操作栏的显示（因为它是那些版本中的核心功能）。

ABS 已将其包装到`windowNoTitle`（没有命名空间/默认 abs 命名空间），因此根据您的应用程序安装的 android 版本，您将获得正确的显示。

如果你有线

```
<item name="android:windowNoTitle">true</item> 
```

在您的样式定义中，只需将其更改为

```
<item name="windowNoTitle">true</item> 
```

或完全将其排除在外/从您的主题中删除（abs 将正确处理它！）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-19T14:24:56.820

我现在面临同样的问题，我发现使用 android:theme="@style/Theme.Sherlock" 就足够了。

如果你使用

```
<item name="windowNoTitle">true</item> 
```

或者

```
<item name="android:windowNoTitle">true</item> 
```

它会使应用程序崩溃，可能是 Jake 在 Theme.Sherlock 中修复了这个问题。

所以这是我现在的解决方案：

```
<application
    android:name="XXXXApplication"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/Theme.Sherlock" > 
```

它在 ICS+ 和 pre-ICS 上运行良好，在 android 2.3.5,2.3.7,CM7, android 4.0,4.1 上测试

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-16T21:34:38.373

我有同样的问题。我已经简单地删除了下面的代码行，它的工作就像一个魅力。

```
requestWindowFeature(Window.FEATURE_NO_TITLE); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-06T14:50:39.087

就我而言，我在设置主题时遇到了这个问题`android:theme="@style/Theme.Sherlock.NoActionBar"`，然后调用`getSupportActionBar()`以获取操作栏。如果您想管理操作栏，只需将它们转为`android:theme="@style/Theme.Sherlock`。

# javascript - 当我认为 Meteor 不应该重新渲染视图时，如何防止 Meteor 在 html select dom click 事件上重新渲染视图？

> ID：11944862
> 
> 赞同：1
> 
> 时间：2012-08-14T02:12:15.027
> 
> 标签：javascript, meteor, handlebars.js

我的 Meteor 应用程序中有一个表单，当我填充和重新填充 html 选择选项时，视图会重新呈现并删除用户在表单中键入的输入值。我不相信这是正确的。

客户表格

```
 <form class="form-horizontal well" id="insert-form">
    <fieldset>

      <div class="control-group">
        <label class="control-label" for="username">User Name</label>
        <div class="controls">
          <input type="text" class="input-xlarge" id="username" name="username">
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="password">Password</label>
        <div class="controls">
          <input type="password" class="input-xlarge" id="password" name="password">
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="email">Email</label>
        <div class="controls">
          <input type="text" class="input-xlarge" id="email" name="email">
        </div>
      </div>
      <div class="control-group">
        <label class="control-label" for="country">Country</label>
        <div class="controls">
          <select class="input-xlarge country" id="country" name="country">
             <option value="">Select a country...</option>
            {{#each get_countries}}
              <option value="{{iso3}}" {{is_country_selected iso3}}>{{name}}</option>
            {{/each}}
          </select>
        </div>
      </div>

      {{#if state_label}}
        <div id="div-state" class="control-group">
          <label class="control-label" for="state">{{state_label}}</label>
          <div class="controls">
            <select class="input-xlarge country" id="state" name="state">
             <option value="">Select a {{state_label}}...</option>
            {{#each get_states}}
              <option value="{{code}}" {{is_state_selected code}}>{{name}}</option>
            {{/each}}
          </select>
          </div>
        </div>
      {{/if}}

      {{#if zip_code_label}}
      <div id="div-zip" class="control-group">
        <label class="control-label" for="zip">{{zip_code_label}}</label>
        <div class="controls">
          <input type="text" class="input-xlarge" id="zip" name="zip">
        </div>
      </div>
      {{/if}}
      <div class="form-actions well">
        <button id="btnReset" type="reset" class="btn btn-large">Reset</button>
        <button id="insert" type="button" class="btn btn-primary btn-large">Submit</button>
      </div>

    </fieldset> 
```

Client Handlebars 辅助函数

```
Handlebars.registerHelper('state_label', function(){
  return Session.get('state_label');
});

Handlebars.registerHelper('zip_code_label', function(){
  return Session.get('zip_code_label');
});

Handlebars.registerHelper('is_country_selected', function(code){
  if(Session.get('country_selected') === code){
    return 'selected="selected"';
  }
});

Handlebars.registerHelper('is_state_selected', function(code){
  if(Session.get('state_selected') === code){
    return 'selected="selected"';
  }
}); 
```

/common/ 客户端和服务器共享国家模型

```
Countries = new Meteor.Collection("countries");

Countries.get_countries = function(){
  return Countries.find({}, {fields: {iso3:1, name:1} }); //{}, {fields: {iso3:1,    name:1} }
}

Countries.get_states = function(code){
  return Countries.findOne( {iso3: code, 'states.active': true}, {fields:     {'states.code':1, 'states.name':1} } ).states;
} 
```

服务器国家发布

```
Meteor.publish("countries", function() {
 if(this.userId()){

 return Countries.find(
  {
    active: true
  }, 
  {
    fields: {
      _id: 1,
      code: 1,
      name: 1,
      active: 1,
      iso3: 1,
      state_description: 1,
      zip_code_description: 1,
      zip_code_mask: 1,
      states: 1
     }
   }
  );

  } else {
  return null;
 }

 }); 
```

客户端启动的东西

```
Meteor.startup(function () {
  Session.set('country_selected', 'USA');
  Session.set('state_label', 'State');
  Session.set('zip_code_label', 'Zip Code');
  Session.set('state_selected', 'FL');
 }); 
```

服务器启动的东西

```
Meteor.startup(function () {
if (Countries.find().count() === 0) {
console.log('[server/bootstrap.js] creating Countries');
var data = [
  {code: 'US',
   name: 'UNITED STATES',
   active: true,
   iso3: 'USA',
   state_description: 'State',
   zip_code_description: 'Zip Code',
   zip_code_mask: '99999',
   states: [
    {code: 'AL', name:'ALABAMA', active: true},
    {code: 'AK', name:'ALASKA', active: true},
    {code: 'AS', name:'AMERICAN SAMOA', active: true},
    {code: 'AZ', name:'ARIZONA', active: true},
    {code: 'AR', name:'ARKANSAS', active: true},
    {code: 'CA', name:'CALIFORNIA', active: true},
    {code: 'CO', name:'COLORADO', active: true},
    {code: 'CT', name:'CONNECTICUT', active: true},
    {code: 'DE', name:'DELAWARE', active: true},
    {code: 'DC', name:'DISTRICT OF COLUMBIA', active: true},
    {code: 'FL', name:'FLORIDA', active: true},
    {code: 'GA', name:'GEORGIA', active: true},
    {code: 'GU', name:'GUAM', active: true},
    {code: 'HI', name:'HAWAII', active: true},
    {code: 'ID', name:'IDAHO', active: true},
    {code: 'IL', name:'ILLINOIS', active: true},
    {code: 'IN', name:'INDIANA', active: true},
    {code: 'IA', name:'IOWA', active: true},
    {code: 'KS', name:'KANSAS', active: true},
    {code: 'KY', name:'KENTUCKY', active: true},
    {code: 'ME', name:'MAINE', active: true},
    {code: 'MD', name:'MARYLAND', active: true},
    {code: 'MA', name:'MASSACHUSETTS', active: true},
    {code: 'MI', name:'MICHIGAN', active: true},
    {code: 'MN', name:'MINNESOTA', active: true},
    {code: 'MS', name:'MISSISSIPPI', active: true},
    {code: 'MO', name:'MISSOURI', active: true},
    {code: 'MT', name:'MONTANA', active: true},
    {code: 'NE', name:'NEBRASKA', active: true},
    {code: 'NV', name:'NEVADA', active: true},
    {code: 'NH', name:'NEW HAMPSHIRE', active: true},
    {code: 'NJ', name:'NEW JERSEY', active: true},
    {code: 'NM', name:'NEW MEXICO', active: true},
    {code: 'NY', name:'NEW YORK', active: true},
    {code: 'NC', name:'NORTH CAROLINA', active: true},
    {code: 'ND', name:'NORTH DAKOTA', active: true},
    {code: 'MP', name:'NORTHERN MARIANA ISLANDS', active: true},
    {code: 'OH', name:'OHIO', active: true},
    {code: 'OK', name:'OKLAHOMA', active: true},
    {code: 'OR', name:'OREGON', active: true},
    {code: 'PA', name:'PENNSYLVANIA', active: true},
    {code: 'PR', name:'PUERTO RICO', active: true},
    {code: 'RI', name:'RHODE ISLAND', active: true},
    {code: 'SC', name:'SOUTH CAROLINA', active: true},
    {code: 'SD', name:'SOUTH DAKOTA', active: true},
    {code: 'TN', name:'TENNESSEE', active: true},
    {code: 'TX', name:'TEXAS', active: true},
    {code: 'UT', name:'UTAH', active: true},
    {code: 'VT', name:'VERMONT', active: true},
    {code: 'VI', name:'VIRGIN ISLANDS', active: true},
    {code: 'VA', name:'VIRGINIA', active: true},
    {code: 'WA', name:'WASHINGTON', active: true},
    {code: 'WV', name:'WEST VIRGINIA', active: true},
    {code: 'WI', name:'WISCONSIN', active: true},
    {code: 'WY', name:'WYOMING', active: true},
   ]
  },
  {code: 'CA',
   name: 'CANADA',
   active: true,
   iso3: 'CAN',
   state_description: 'Province',
   zip_code_description: 'Postal Code', 
   zip_code_mask: 'A9A 9A9',
   states: [
    {code: 'AB', name:'ALBERTA', active: true},
    {code: 'BC', name:'BRITISH COLUMBIA', active: true},
    {code: 'NB', name:'NEW BRUNSWICK', active: true},
    {code: 'NF', name:'NEWFOUNDLAND', active: true},
    {code: 'NT', name:'NORTHWEST TERRITORIES', active: true},
    {code: 'NS', name:'NOVA SCOTIA', active: true},
    {code: 'ON', name:'ONTARIO', active: true},
    {code: 'PW', name:'PALAU', active: true},
    {code: 'QC', name:'PQ QUEBEC', active: true},
    {code: 'PE', name:'PRINCE EDWARD ISLAND', active: true},
    {code: 'SK', name:'SASKATCHEWAN', active: true},
    {code: 'MB', name:'MANITOBA', active: true},
    {code: 'NU', name:'NUNAVUT', active: true},
    {code: 'YT', name:'YUKON', active: true},
   ]
  },
];

for (var i = 0; i < data.length; i++) {
  var country_id = Countries.insert({
    code: data[i].code,
    name: data[i].name,
    active: data[i].active,
    iso3: data[i].iso3,
    state_description: data[i].state_description,
    zip_code_description: data[i].zip_code_description,
    zip_code_mask: data[i].zip_code_mask,
    states: data[i].states
   });
   }
  }//end countries
}); 
```

我相信根据 Meteor 文档，这不应该发生。根据文档，只要元素具有唯一的 id 和/或名称，它们就不会受到更新 DOM 的影响。不过，我可能对此不满意。

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T12:06:48.063

简单的回答。我从主模板中拉出国家、州和邮政编码 div，并将它们放在子模板中，然后从主模板中调用它们。答案是在...上找到的

[https://github.com/oortcloud/unofficial-meteor-faq](https://github.com/oortcloud/unofficial-meteor-faq)

# ruby-on-rails - 如何在本地测试并发？

> ID：11944869
> 
> 赞同：4
> 
> 时间：2012-08-14T02:13:26.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, concurrency

在本地测试并发的最佳方法是什么？即我想测试 10 个并发命中。我知道像[Blitz](http://blitz.io/)这样的服务。但是，我试图找到一种更简单的方法在本地进行测试以针对竞争条件进行测试。

有任何想法吗？也许通过卷曲？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T02:21:31.213

查看 Apache Bench ( [`ab`](http://httpd.apache.org/docs/2.2/programs/ab.html))。基本用法非常简单：

```
ab -n 100 -c 10 http://your.application 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T06:55:48.120

对于测试中的本地测试竞争条件，您可以使用这样的助手

```
# call block in a forked process
def fork_with_new_connection(config, object = nil, options={})
  raise ArgumentError, "Missing block" unless block_given?
  options = {
     :stop => true, :index => 0
  }.merge(options)

  fork do
    # stop the process after fork
    Signal.trap('STOP') if options[:stop]
    begin
      ActiveRecord::Base.establish_connection(config)
      yield(object)
    ensure
      ActiveRecord::Base.remove_connection
    end
  end
end

# call multiply times blocks
def multi_times_call_in_fork(count=3, &block)
  raise ArgumentError, "Missing block" unless block_given?
  config = ActiveRecord::Base.remove_connection
  pids = []
  count.times do |index|
    pids << fork_with_new_connection(config, nil, :index=>index, &block)
  end

  # continue forked processes
  Process.kill("CONT", *pids)

  Process.waitall
  ActiveRecord::Base.establish_connection(config)
end

# example
multi_times_call_in_fork(5)  do
  # do something with race conditions
  # add asserts 
end 
```

# iphone - 如何获取坐标？

> ID：11944870
> 
> 赞同：0
> 
> 时间：2012-08-14T02:13:39.063
> 
> 标签：iphone, ios, gps, xcode4.3, arcgis

我正在尝试从中提取 x 和 y 坐标，`self.mapView.gps.currentPoint`我该怎么做？

这是我到目前为止所做的：

```
NSLog(@"Location1 : %@", self.mapView.gps.currentPoint); 
```

结果：

```
Location1 : AGSMutablePoint: x = 29841.008687, y = 40101.841687, spatial reference: 
    [AGSSpatialReference: wkid = 0, wkt = "PROJCS["SVY21",
    GEOGCS[
        "SVY21[WGS84]",
        DATUM[
            "D_WGS_1984",
            SPHEROID["WGS_1984",6378137.0,298.257223563]
        ],
        PRIMEM["Greenwich",0.0],
        UNIT["Degree",0.0174532925199433]
    ],
    PROJECTION["Transverse_Mercator"],
    PARAMETER["False_Easting",28001.642],
    PARAMETER["False_Northing",38744.572],
    PARAMETER["Central_Meridian",103.8333333333333],
    PARAMETER["Scale_Factor",1.0],
    PARAMETER["Latitude_Of_Origin",1.366666666666667],
    UNIT["Meter",1.0]
]"]` 
```

如果我使用`NSLog(@"Location2 : %@", self.mapView.gps.currentPoint.x);` 它将返回错误错误访问。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:22:53.010

你的问题是你的格式字符串`NSLog`

```
NSLog(@"Location2 : %@", self.mapView.gps.currentPoint.x); 
```

这`%@`意味着它期待一个 obj-c 对象。你传递给它一个`CGFloat`. 您应该将其替换为`%f`或者可能`%g`（它们都采用浮点值但输出略有不同）。

```
NSLog(@"Location2 : %f", self.mapView.gps.currentPoint.x); 
```

# javascript - TimelineJS：更改导航栏的高度？

> ID：11944871
> 
> 赞同：3
> 
> 时间：2012-08-14T02:13:41.547
> 
> 标签：javascript, jquery, css, jquery-plugins

我使用插件 TimelineJS [http://timeline.verite.co](http://timeline.verite.co)并且我在尝试找到决定导航滑块高度的 div 和 css 时遇到了很大的困难 - FireBug 之类的只是没有帮助。只是想知道以前有没有人实现过这个机会？

![在此处输入图像描述](../Images/6c3a8b6ff11c3f47b649bd217816602b.png)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-14T04:36:06.080

好吧，您必须更改一些 css 属性和一些 JS 代码：
您必须更改

**timeline.css**
- .vmm-timeline .navigation（第 151 行，*更改*属性：**height**）
- .vmm-timeline .navigation .timenav .time（第 212 行，*更改* **顶部**）
- .vmm-timeline .navigation .timenav .content .era （第 205 行，*添加属性* **max-height**）
- .vmm-timeline .navigation .timenav-background （第 155 行，*更改* **高度**）
- .vmm-timeline .navigation .timenav-background .timenav-interval-background （第 155 行，*更改* **顶部**)
- .vmm-timeline .navigation .timenav .content .marker .dot （第 171 行，*更改* **顶部**）

**timeline-min.js**
在这里，我刚刚找到了一种必须对样式进行硬编码的方法！
好吧，有一个值，例如**navheight**
**navheight**是您的*.navigation*类的高度**MINUS 50 PX**
在我的示例中它是 50！

所以在第 32 行有一些代码

```
}else{VMM.Lib.stop(w.flag);VMM.Lib.css(w.flag,"top",S)}I.start_page&&a[m].type=="start"&&VMM.Lib.visible(w.marker,!1); 
```

您必须将`VMM.Lib.css(w.flag,"top",S)`-part 替换为：

```
if(S>50){VMM.Lib.css(w.flag,"top","50px")}else{VMM.Lib.css(w.flag,"top",S)} 
```

或（未测试）

```
if(S>navheight){VMM.Lib.css(w.flag,"top",navheight + "px")}else{VMM.Lib.css(w.flag,"top",S)} 
```

我希望就是这样！错误.. 和：FireBug 帮了我很多忙！;-)

# wso2 - 如何处理克隆中介超时？

> ID：11944881
> 
> 赞同：1
> 
> 时间：2012-08-14T02:14:54.560
> 
> 标签：wso2, clone, aggregate, wso2esb

我有这样的问题。我使用克隆将请求发送到不同的端点。但是如果一个端点超时。响应消息无法聚合。有人可以帮助我吗？非常感谢？错误信息：

```
[2012-08-14 09:44:08,077]  WARN - EndpointContext Endpoint : Endpoint_AAA_101000
 will be marked SUSPENDED as it failed
[2012-08-14 09:44:08,077]  WARN - EndpointContext Suspending endpoint : Endpoint
_AAA_101000 - current suspend duration is : 30000ms - Next retry after : Tue Aug
 14 09:44:38 CST 2012
[2012-08-14 09:45:07,593]  INFO - HTTPSender Unable to sendViaPost to url[http:/
/localhost:8280/services/CMSLevelService.CMSLevelServiceHttpSoap12Endpoint]
java.net.SocketTimeoutException: Read timed out 
```

服务配置：

```
<proxy xmlns="http://ws.apache.org/ns/synapse" name="CMSLevelService" transports="https,http" statistics="disable" trace="disable" startOnLoad="true">
   <target>
      <inSequence>
            <clone sequential="false">
              <target endpoint="Endpoint_AAA_100000" />
              <target endpoint="Endpoint_AAA_101000" />
              <target endpoint="Endpoint_Portal_100000" />
              <target endpoint="Endpoint_Portal_101000" />
              <target endpoint="Endpoint_PortalMS" />
              <target endpoint="Endpoint_SME" />
              <target endpoint="Endpoint_USM" />
            </clone>
      </inSequence>
      <outSequence>
         <log level="full" />
         <aggregate>
            <completeCondition>
               <messageCount min="10" max="10" />
            </completeCondition>
            <onComplete xmlns:s12="http://www.w3.org/2003/05/soap-envelope" xmlns:s11="http://schemas.xmlsoap.org/soap/envelope/" expression="//message">
                <log level="full" />
                <send />
            </onComplete>
         </aggregate>
      </outSequence>
   </target>
</proxy> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T03:03:53.227

您可以设置`Completion Timeout`为聚合。然后它将丢弃超时响应。此致。

# java - 在继续执行语句之前检查 for 循环是否完成

> ID：11944885
> 
> 赞同：1
> 
> 时间：2012-08-14T02:15:06.243
> 
> 标签：java, android

这里有一些问题。我创建了一个 EditText 数组，它工作正常。现在，当其中一个 EditText 为空时出现错误。这是我的代码：

```
int[] textIDs = new int[] {R.id.etFirstName, R.id.etLastName, R.id.etEmail, R.id.etAddress, R.id.etCity, R.id.etRegion, R.id.etMobile, R.id.etLandLine, R.id.etYear, R.id.etMonth, R.id.etDay };
        for(int j=0; j<textIDs.length; j++) {
            EditText editText = (EditText) findViewById(textIDs[j]);
            if(editText.getText().toString().trim().equals(""))
            {
                 // editText is empty
                Toast.makeText(MainActivity.this, "Request cannot performed..\n Please ensure all fields are filled", Toast.LENGTH_SHORT).show();
                break;
            } 
            else 
            {
                 // editText is not empty
                Toast.makeText(MainActivity.this, "12", Toast.LENGTH_SHORT).show();
            } 
```

使用此代码的主要问题是循环继续执行此代码 `Toast.makeText(MainActivity.this, "12", Toast.LENGTH_SHORT).show();` 在每个循环中继续显示的功能。循环完成后，这个 Toast 有什么显示方式吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:18:19.203

把它放在for循环之外..

```
boolean isNotEmpty = false;

    for(int j=0; j<textIDs.length; j++) {
                EditText editText = (EditText) findViewById(textIDs[j]);
                if(editText.getText().toString().trim().equals(""))
                {
                     // editText is empty
                    Toast.makeText(MainActivity.this, "Request cannot performed..\n Please ensure all fields are filled", Toast.LENGTH_SHORT).show();

                    isNotEmpty = false;   // Marking as Empty
                    break;
                } 
                else 
                {
                     // editText is not empty

                    isNotEmpty = true     // Marking as Non-Empty

                }
             }
    if (isNotEmpty){
    Toast.makeText(MainActivity.this, "12", Toast.LENGTH_SHORT).show();
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:18:47.303

```
 boolean doShowToast = false;
    int[] textIDs = new int[] {R.id.etFirstName, R.id.etLastName, R.id.etEmail, R.id.etAddress, R.id.etCity, R.id.etRegion, R.id.etMobile, R.id.etLandLine, R.id.etYear, R.id.etMonth, R.id.etDay };
    for(int j=0; j<textIDs.length; j++) {
        EditText editText = (EditText) findViewById(textIDs[j]);
        if(editText.getText().toString().trim().equals(""))
        {// editText is empty
            Toast.makeText(MainActivity.this, "Request cannot performed..\n Please ensure all fields are filled", Toast.LENGTH_SHORT).show();
            break;
        } 
        else 
        {
             // editText is not empty
            doShowToast = true;
        }
    }
    if(doShowToast){
         Toast.makeText(MainActivity.this, "12", Toast.LENGTH_SHORT).show();
    } 
```

通过使用布尔值，您只会在循环退出后显示 else 语句的 toast 一次，并且只有在调用 else 语句时，所以只有当“editText 不为空”时

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T02:25:55.887

```
int[] textIDs = new int[] {R.id.etFirstName, R.id.etLastName, R.id.etEmail, R.id.etAddress, R.id.etCity, R.id.etRegion, R.id.etMobile, R.id.etLandLine, R.id.etYear, R.id.etMonth, R.id.etDay };
Toast t; 

    for(int j=0; j<textIDs.length; j++) {
        EditText editText = (EditText) findViewById(textIDs[j]);
        if(editText.getText().toString().trim().equals(""))
        {// editText is empty
            t = Toast.makeText(MainActivity.this, "Request cannot performed..\n Please ensure all fields are filled", Toast.LENGTH_SHORT);
            break;
        } 
        else 
        {
             // editText is not empty
            static Toast toast = Toast.makeText(MainActivity.this, "12", Toast.LENGTH_SHORT);
            t = toast;
        }
    }
    t.show(); 
```

# django - jquery ajax / django - 在引导模式中显示表单并在验证不成功时重新显示

> ID：11944887
> 
> 赞同：9
> 
> 时间：2012-08-14T02:15:36.520
> 
> 标签：django, jquery, twitter-bootstrap

我的用例是：

a) 在引导模式中显示通过 ajax 加载的表单，[花哨的覆盖效果的东西](http://twitter.github.com/bootstrap/javascript.html#modals)...... 我按照这些[说明](https://stackoverflow.com/questions/11276100/how-do-i-insert-a-django-form-in-twitter-bootstrap-modal-window)进行操作。

这工作正常。（见下面的代码）

b) 将此表单提交回我的 Django 应用程序，尝试验证它，如果它没有验证，请在精美的引导模式中重新显示带有错误的表单。

我可以通过 ajax 重新加载表单，但我无法在模态中再次表示它。

注意：我没有包含视图，因为它没有什么特别之处。仅实例化和验证表单。

下面有很多要阅读的内容，所以如果您认为用例听起来很有趣，请继续...

我的 taskList.html 看起来像这样：

```
<table id="listItemTable" class="table table-bordered">
        <thead>
            <tr>
                <th>Name</th>
                <th>Edit</th>
            </tr>
        </thead>
    <tbody>
        <tr>
            <td>Task 1</td>
            <td><a class="editItem" href="/update/item/1/">edit</a></td>
        </tr>
    </tbody>
</table>

<div class="modal hide" id="itemFormModal"></div>
<div id="modalExtraJsPlaceholder"></div> 
```

.js 用于加载表单 + 显示引导模式 + 绑定表单到 .jquery 提交调用：

```
$(document).ready(function() {
   modalConnect();
});

<script type="text/javascript">
 //connects the modal load for each <a> with class editItem
 //Functionality 1
     //loads an item edit form from the server and replaces the itemFormModal with the form
     //presents the modal with $("#itemFormModal").modal('show');
 //Functionality 2
     //loads some extra js "modalExtraJsHtml"
     //calls the function "submitItemModalFormBind" which has been loaded via "modalExtraJsHtml"

 function modalConnect(){
    $(".editItem").click(function(ev) { // for each edit item <a>
    ev.preventDefault(); // prevent navigation
    url = ($(this)[0].href); //get the href from <a>
    $.get(url, function(results){
       var itemForm = $("#ajax_form_modal_result", results);
       var modalExtraJs = $("#modalExtraJs", results);
       //get the html content
       var modalExtraJsHtml = modalExtraJs.html();
       //update the dom with the received results
        $('#itemFormModal').html(itemForm);        
        $('#modalExtraJsPlaceholder').html(modalExtraJsHtml);
        $("#itemFormModal").modal('show');
        submitItemModalFormBind(); //bind loaded form to ajax call
     }, "html");
     return false; // prevent the click propagation
   })
}
</script> 
```

从视图返回的 itemForm 如下所示：

```
<form id="#ajax_form_modal_result" class="well" method="post" action="/update/item/{{ item.id }}">
 <div id="ajax_form_modal_result_div">
     <div class="modal-header">
      <button type="button" class="close" data-dismiss="modal">×</button>
      <h3>Edit Item</h3>
    </div>
    <div class="modal-body">
         {% csrf_token %}
         {{form.as_p}}
    </div>
    <div class="modal-footer">
         <input class="btn btn-primary" type="submit" value="Save" />
         <input name="cancel" class="btn" type="submit" value="Cancel"/>
     </div>
    </div>
</form> 
```

加载和显示模式工作正常。但现在是第二部分，它没有按预期工作。问题如下。如果表单未通过验证，视图将返回表单。返回的表单应在引导模式中再次显示。但结果是只有表单出现在浏览器中，其他一切都丢失了。没有css，没有表格，只有表格。相当难看..因此我没有实现更新ajax_form_modal_result_div。谁能帮我解决我做错了什么..！？

该视图还返回 js 函数“submitItemModalFormBind”，它防止表单默认行为并通过 ajax 发送表单。

```
<div id="modalExtraJs">
 //ajax bind for update item form visualized via modal
 function submitItemModalFormBind(){
     var url = "{% url updateItem item.pk %}";
     $('#ajax_form_modal_result').submit(function(){
 $.ajax({
    type: "POST",
    url: "{% url updateTask item.pk %}",
    data: $(this).serialize(),
    success:function(response){
        var div = $("ajax_form_modal_result_div", response);
        $('#ajax_form_modal_result_div').html(div);
     },
     error: function (request, status, error) {
         console.log("failure");
         console.log(request.responseText);
     }

           });
          });
        return false;
       }    
</div> 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-15T15:54:18.157

找到了一种可行的方法（基于此[解决方案](https://stackoverflow.com/questions/11276100/how-do-i-insert-a-django-form-in-twitter-bootstrap-modal-window)- 并通过处理无效表单对其进行了增强）并将其发布给任何想要在 django 中使用令人惊叹的漂亮引导模式的人。上面代码的主要问题是我没有正确禁用提交按钮的默认行为，并且加载其他 js 的方法不是一个好主意。所以我改变了我的策略。

在 documentReady 或 ajaxStop 事件上，将超链接的单击事件绑定到 modalConnect 函数。请注意，如果您有某种 ajax 更新表的内容（我有），则只需要 ajaxStop 函数：

```
<script type="text/javascript">
    $(document).ready(function() {
        modalConnect();
    });
</script>

<script type="text/javascript">
$( document ).ajaxStop( function() {
    modalConnect();
});
</script> 
```

modalConnect 函数加载我们想要在模态中呈现的表单和一个 formUpdateURLDiv：

```
<script type="text/javascript">
    function modalConnect()
        {
            //unbind the click event. If not done we will end up with multiple click event bindings, since binding is done after each ajax call.
            $(".editItem").unbind('click');
            //bind the click event
            $(".editItem").click(function(ev) { // for each edit item <a>
                ev.preventDefault(); // prevent navigation
                var url = this.href; //get the href from the <a> element
                $.get(url, function(results){
                  //get the form
                  var itemForm = $("#ajax_form_modal_result", results);
                  //get the update URL
                  var formUpdateURLDiv = $("#formUpdateURL", results);
                  //get the inner html of the div
                  var formUpdateURL = formUpdateURLDiv.html();
                  //update the dom with the received form
                  $('#itemFormModal').html(itemForm);
                  //show the bootstrap modal
                  $("#itemFormModal").modal('show');
                  $(document).ready(function () {
                     //bind the form to an ajax call. ajax call will be set to the received update url
                     submitItemModalFormBind(formUpdateURL);
                  });
                }, "html");
                return false; // prevent the click propagation
            })
        }
</script> 
```

formUpdateURL 包括一个服务器生成的（见下面包含的视图）url，加载的表单必须对其进行表单提交调用。我们使用这个 url 来“初始化” submitItemModalFormBind 函数：

```
<script type="text/javascript">
       function submitItemModalFormBind(url){
         //bind the form. prevent default behavior and submit form via ajax instead
         $('#ajax_form_modal_result').submit(function(ev){
             $.ajax({
                type: "POST",
                url: url,
                data: $(this).serialize(),
                success:function(response, textStatus, jqXHR){
                     var form = $("#ajax_form_modal_result_div", response);
                     //form is returned if it is not valid. update modal with returned form
                     //change this "if" to check for a specific return code which should be set in the view
                     if (form.html()) {
                        console.log('Form was invalid and was returned');
                        //update modal div
                         $('#ajax_form_modal_result_div').html(form);
                         $("#itemFormModal").modal('show');
                      }
                      //form is not returned if form submission succeeded
                      else{
                        //update the entire document with the response received since we received a entire success page and we want to reload the entire page
                        document.open();
                        document.write(response);
                        document.close();
                        //sort by modified date descending

                        //var notificationDiv = $("#notification", response);
                        //$('#notification').html(notificationDiv.html());
                        console.log('Form was valid and was not returned');
                        $("#itemFormModal").modal('hide');
                        }
                },
                error: function (request, status, error) {
                            var div = $("ajax_form_modal_result_div", request.responseText);
                            $('#ajax_form_modal_result_div').html(div);
                            //implement proper error handling
                            console.log("failure");
                            console.log(request.responseText);
                        }
                    });
                    return false;
                });
              }
</script> 
```

..要查看服务器上发生了什么，请参见处理逻辑的视图下方：

```
class UpdateTaskModalView(LoginRequiredMixin, View):
template = 'list_management/crud/item/update_via_modal.html'

def get_logic(self, request, task_id, **kwargs):
    task = get_object_or_404(Task.objects, pk=task_id)
    task_form = TaskForm(instance=task)
    context = {
               'model_form': task_form,
               'item': task,
    }
    return context

def post_logic(self, request, task_id, **kwargs):
    task = get_object_or_404(Task.objects, pk=task_id)
    task_form = TaskForm(request.POST, instance=task)
    if task_form.is_valid():
        task = task_form.save(commit=False)
        task.modified_by = request.user
        task.save()
        messages.add_message(request, messages.INFO, 'Item "%s" successfully updated' % (task.name))
        return ('redirect', HttpResponseRedirect(reverse('show_list_after_item_update', kwargs={'list_id':task.list.pk, 'item_id':task.pk})))
    context = {
        'model_form' : task_form,
        'list': task.list,
        'item': task,
    }
    return ('context', context)

def get(self, request, task_id, **kwargs):
    context = self.get_logic(request, task_id, **kwargs)
    return render_to_response(
        self.template,
        context,
        context_instance = RequestContext(request),
    )

def post(self, request, task_id, **kwargs):
    post_logic_return = self.post_logic(request, task_id, **kwargs)
    if post_logic_return[0] == 'redirect':
        return post_logic_return[1]
    if post_logic_return[0] == 'context':
        context = post_logic_return[1]
        return render_to_response(
            self.template,
            context,
            context_instance = RequestContext(request),
        ) 
```

..表单模板已包含在我的问题中：ajax_form_modal_result_div，您只需提供 formUpdateURL。我是通过模板完成的，现在我写这篇文章似乎很奇怪。可以通过视图上下文轻松提供。

瞧 - 带有引导模式的 Django 表单！为您的用户界面增添趣味！

我希望这可以帮助某人解决类似的问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-10-09T07:29:29.337

我写了这个简单的 AJAX 对我有用，希望它有所帮助：

```
$(document).on('submit', 'div.modal-body form', function(e) {
        var form_el = $(this);
        e.preventDefault();
        $.ajax({
            type: $(this).attr('method'),
            url: $(this).attr('action'),
            data: $(this).serialize(),
            success: function (xhr, ajaxOptions, thrownError) {
                if ( $(xhr).find('.errorlist').length > 0 ) {
                    form_el.parents('.modal-body').html(xhr);
                } else {
                    form_el.parents('.modal-body').html('<h4>Formulario enviado correctamente</h4>');
                }
            },
            error: function (xhr, ajaxOptions, thrownError) {
                form_el.parents('.modal-body').html(xhr);
            }
        });
}); 
```

哦，顺便说一句，您还需要这样的东西才能将您的表单加载到模态中：

```
$('.modal-class').on('click',function(){
    let dataURL = $(this).attr('data-href');
    $('.modal-body').load(dataURL,function(){
        $('#modal_crear').modal({show:true});
    });
}); 
```

# android - 如何一键触发tablelayout上的两个监听器：tablerow及其单元格

> ID：11944889
> 
> 赞同：-1
> 
> 时间：2012-08-14T02:16:05.200
> 
> 标签：android, android-ui, ontouchlistener, android-tablelayout

通过使用`TableLayout`，我创建了一个简单的表，并向`OnClick`表行和行的单个单元格添加了侦听器。但是，触摸任何单元格只会执行单元格侦听`TableRow`器，并且不会调用侦听器。

我怎样才能让这两个监听器在桌面上单击一下就可以执行？

或者对这种情况有什么更好的建议？

代码：

```
import android.content.Context;
import android.util.Log;
import android.view.View;
import android.widget.TableLayout;
import android.widget.TableRow;
import android.widget.TextView;

public class PostSampleTable extends TableLayout {
    public PostSampleTable(Context context) {
        super(context);
        super.setLayoutParams( new TableLayout.LayoutParams(TableLayout.LayoutParams.MATCH_PARENT, 
                                TableLayout.LayoutParams.WRAP_CONTENT) );
        super.setClickable( true );         
        init();
    }

    private void init() {
        for (int i = 0; i < 39; i++) {
            TableRow lineRow = new TableRow( getContext() ); 
            super.addView( lineRow );
            addRowListener( lineRow, i);

            for (int j = 0; j < 9; j++) {
                View cell = createTextView("DATACELLAT_" +i+ "_" +j+ "", 100);
                lineRow.addView( cell );                
                addCellListener( cell, i, j);
            }
        }
    }

    private void addRowListener(TableRow lineRow, int i) {
        MyRowL mrl = new MyRowL() {
            int rowNum = 0;

            @Override
            public void onClick(View v) {
                Log.d("cxc", "CLICKED Line Row [ " +getRowNum()+ "]"); 
            }

            @Override
            public void setRowNum(int rowNum) {
                this.rowNum = rowNum;
            }

            @Override
            public int getRowNum() {
                return this.rowNum;
            }
        };

        mrl.setRowNum( i );

        lineRow.setOnClickListener( mrl ); 
    }

    private void addCellListener(View cell, int i, int j) {
        MyCellL mcl = new MyCellL() {           
            int rowNum = 0;
            int colNum = 0; 

            @Override
            public void onClick(View v) {
                Log.d("cxc", "CLICKED the cell [ " +getRowNum()+ ", " + getColNum()+ "]"); 
            }

            @Override
            public void setRowNum(int rowNum) {
                this.rowNum = rowNum;
            }

            @Override
            public int getRowNum() {
                return this.rowNum;
            }

            @Override
            public void setColNum(int colNum) {
                this.colNum = colNum;
            }

            @Override
            public int getColNum() {
                return this.colNum;
            }
        };

        mcl.setRowNum( i );
        mcl.setColNum( j );

        cell.setOnClickListener( mcl ); 
    }

    private TextView createTextView(String text, int  width) {
        TextView reply = new TextView( getContext() );
        reply.setText(text); 
        reply.setWidth( width );
        return reply ;
    }

    interface MyRowL extends OnClickListener {
        public void setRowNum(int rowNum);
        public int getRowNum();         
    }

    interface MyCellL extends MyRowL {
        public void setColNum(int colNum);
        public int getColNum();         
    } 
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-15T01:29:12.337

一种方法是`TableRow` `OnClickListener()`直接在单元格末尾触发`onClick()`：

以您的单元格`onClick()`为例：

```
@Override
public void onClick(View v) {
    Log.d("cxc", "CLICKED the cell [ " +getRowNum()+ ", " + getColNum()+ "]"); 

    ((TableRow)v.getParent()).performClick();
} 
```

如果一个单元格被点击，这两种`onClickListner()`方法都会被调用。此外，如果直接单击某行，例如因为缺少单元格，则只会`onClickListener()`调用该行。

如果您只针对 API 15 及以后的设备，还有一种替代方法`performClick()`，称为[`callOnClick()`](http://developer.android.com/reference/android/view/View.html#callOnClick%28%29).

# objective-c - 在没有新初始化的情况下使用类中的数据

> ID：11944891
> 
> 赞同：2
> 
> 时间：2012-08-14T02:16:26.257
> 
> 标签：objective-c, ios, cocoa-touch, class, uiviewcontroller

我有一个 TabBar 布局，在 Home 选项卡中我有一个“连接”按钮，按下该按钮时会向 TransferViewController 类发送一个动作以创建一个 GameKit 会话。然后我有另一个名为“发送”的选项卡，它有一个按钮，上面写着“发送文件”，当按下该按钮时，它会向 TransferViewController 类发送一个动作，该类也使用“会话”变量，该变量是使用连接设置的发送文件，但因为它是不同的选项卡它创建了一个新的控制器实例，它希望我再次连接，但按钮位于主页选项卡上。

无论如何，我可以在没有两个实例的情况下为两个选项卡设置一个控制器吗？我希望用户单击“主页”选项卡上的连接，然后切换到“发送”选项卡并按“发送文件”并通过另一个选项卡上的连接使用变量设置。如果这令人困惑，我很抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:46:20.313

这一点也不令人困惑——事实上，这一直都在出现。这在模型-视图-控制器系统中的工作方式是您设置一个模型类，使其成为单例，并在需要共享数据的所有控制器中添加对该单例的引用。

模型.h

```
@interface Model : NSObject
@property (nonatomic, readwrite) Session *session;
-(id)init;
+(Model*)instance;
@end 
```

模型.m

```
@implementation Model
@synthesize isMultiplayer;

-(id)init {
    if(self=[super init]) {
        self.session = ...; // Get the session
    }
    return self;
}

+(Model*)instance {
    static dispatch_once_t once;
    static Model *sharedInstance;
    dispatch_once(&once, ^{
        sharedInstance = [[self alloc] init];
    });
    return sharedInstance;
}
@end 
```

现在您可以在控制器代码中使用共享会话： import`"Model.h"`和 write

```
[[Model instance].session connect];
[[Model instance].session sendAction:myAction]; 
```

# rest - 期望未提供的参数

> ID：11944892
> 
> 赞同：0
> 
> 时间：2012-08-14T02:16:30.863
> 
> 标签：rest, stored-procedures, parameters

我想知道以下错误的原因。如果您能提供帮助，我将不胜感激。

错误是：

```
Procedure or function 'Sp_Informacion_gral_Cliente' expects parameter '@Cod_Medico', which was not supplied. 
```

我在浏览器中输入的网址：

```
http://localhost:2731/Api/Usuario/0000986 
```

ApiAreaRegistration 中的 MapRoute：

```
context.MapRoute(
                "DetailClientes",
                "Api/Usuario/{Detail}",
                new
                {
                    controller = "Usuario",
                    action = "Detail"
                }
            ); 
```

控制器方法：

```
 [HttpGet]
        public JsonResult Detail(string codigo)
        {
            return Json(clientesManager.ObtenerClienteDetallado(codigo),
                        JsonRequestBehavior.AllowGet);
        } 
```

以及可能发生错误的方法：

```
public List<ClienteDetallado> ObtenerClienteDetallado(string cliente)
        {
            List<ClienteDetallado> lista = new List<ClienteDetallado>();

            SqlConnection con = new SqlConnection(cadenaConexionVM);

            con.Open();

            SqlCommand cmd = new SqlCommand("Sp_Informacion_gral_Cliente", con);
            cmd.CommandType = CommandType.StoredProcedure;
            cmd.Parameters.Add("@Cod_Medico", SqlDbType.NChar).Value = cliente;

            SqlDataReader reader =
                cmd.ExecuteReader(System.Data.CommandBehavior.CloseConnection);

            while (reader.Read())
            {
                ClienteDetallado cli = new ClienteDetallado();

                cli = new ClienteDetallado();
                cli.Cod_Medico = reader.GetInt32(0);
                cli.Nombre = reader.GetString(1);
                cli.Apellido = reader.GetString(3);
                cli.Fecha_Nacimiento = reader.GetString(4);
                cli.Lugar_Nacimiento= reader.GetString(5);
                cli.celular= reader.GetString(6);
                cli.tel_ofic= reader.GetString(7);
                cli.Estilo_De_Conducta = reader.GetString(8);
                cli.pasatiempos= reader.GetString(9);
                cli.Membresías_Grupos_Asc= reader.GetString(10);
                cli.Especialidad= reader.GetString(11);
                cli.Facultad_Medicina= reader.GetString(12);
                cli.Lugar_Donde_Obtuvo_Especialidad= reader.GetString(13);
                cli.Tiempo_Ejerciendo_Especialidad= reader.GetString(14);
                cli.Lugar_Donde_Labora = reader.GetString(15);
                cli.Direccion_CS_Labora= reader.GetString(16);
                cli.Direccion_Consultorio = reader.GetString(17);
                cli.Horario_Labor= reader.GetString(18);
                cli.Lugar_prefiere_recibir_Visitadores_Médicos= reader.GetString(19);
                cli.Productos_que_Receta_actualmente= reader.GetString(20);
                cli.Potencial_de_receta_actual= reader.GetString(21);
                cli.Costo_Promedio_Consulta= reader.GetString(22);

                lista.Add(cli);
            }

            reader.Close();

            return lista;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T02:42:25.697

尝试匹配预期的数据名称以匹配您的控制器。因此，您的路线如下所示。

```
context.MapRoute(
            "DetailClientes",
            "Api/Usuario/{codigo}",
            new
            {
                controller = "Usuario",
                action = "Detail"
            }
        ); 
```

您的存储过程没有从“字符串客户端”获得它期望存在的值。

# php - javascript中未正确解析php变量中的斜杠

> ID：11944893
> 
> 赞同：1
> 
> 时间：2012-08-14T02:16:32.650
> 
> 标签：php, javascript, json

> **可能重复：**
> [JSON：为什么正斜杠转义？](https://stackoverflow.com/questions/1580647/json-why-are-forward-slashes-escaped)

我正在传递包含`"//"`从*PHP 到 Javascript*的值。但是，这些值一直解析`"//"`为：`"\/\/"`当我使用 json 解码时，无论我如何尝试包围或转义字符串...。

这是我正在使用的代码：

**PHP**

```
foreach($varr as $vr)
{
    array_push($legendarr, "%%.%% - ".$vr);                        
    array_push($linkarr, "http://".$_SERVER['HTTP_HOST']."/getdata.php?criteria=".$vr);
} 
```

**JavaScript：**

```
pie = r.piechart(320, 240, 100, <?php echo json_encode($vcr); ?>, { legend: <?php echo json_encode($legendarr); ?>, legendpos: "west", href: <?php echo json_encode($linkarr); ?>}); 
```

问题是变量`linkarr`以如下形式显示：

> `http:\/\/localhost:8090\/getdata.php?criteria=......`

谁能知道为什么会这样？我该如何解决？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:19:45.027

`"http:\/\/www.example.org"`仍然会像`"http://www.example.org"`在 JavaScript中一样打印字符串。

我相信，转义的斜杠是 JSON 标准的一部分。但它不应该以任何方式影响您的 JS 代码。

顺便说一句，`mysql_escape_string('//')`完全断章取义；HTML != 数据库。

# postgresql - 为什么我不能在 Postgresql 中使用数字或日期类型输入 NULL 值？

> ID：11944899
> 
> 赞同：2
> 
> 时间：2012-08-14T02:17:42.470
> 
> 标签：postgresql, asp-classic, vbscript, postgresql-9.0

我正在为这项工作做一个小申请，其中包括一个表格。当使用表单的人没有在数据类型“数字”（比如说 PIN 码）中输入值，甚至没有在我的“日期”数据类型字段之一中输入日期（比如说他的周年纪念日）时，它会返回给我错误如下：

> *错误类型 – 错误类型 _Microsoft* OLE DB Provider for ODBC Drivers (0x80004005)_ *错误：数字类型的输入语法无效：“”；执行查询时出错*
> 
> *错误类型 – 错误类型 _Microsoft* OLE DB Provider for ODBC Drivers (0x80004005)_ *错误：“)”处或附近的语法错误；执行查询时出错*

所以看起来当使用表单的人什么都不输入时，它返回字符串“empty”，即“”。为什么数字类型和数据类型不能将其读取为 NULL 条目？这些字段不是强制性的，所以有时我需要让它们为空。

我怎样才能使它成为可能？他们是一种继续使用“数字”和“日期”类型的方法，这样当用户在这些字段中没有输入任何内容时，表格就会填充一个空白的情况，告诉我这个错误？

这是我的sql语句：

```
trsConn.EXECUTE "INSERT INTO ""TRS"".employeetbl ( "& _
  """firstName"", " & _  
  """lastName"" , " & _  
  """detContract"", " & _  
  "sle, " & _  
  """posNumber"" "& _  
  ") VALUES (" & _  
  "'" & Request.Form("empFirst") & "', " & _**  
  "'" & Replace(Request.Form("empLast"), "'", "`") & "', " & _  
  "'" & Request.Form("dateContract") & "', " & _
  "'" & Request.Form("sle") & "', " & _  
  "'" & Request.Form("posNum") & "');" 
```

（posNum 和 dateContract 分别属于“numeric”和“date”类型

非常感谢帮忙。期待听听各位天才的说法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-14T04:06:44.940

[SQL 中 NULL 的概念非常混乱和不一致](http://thoughts.j-davis.com/2009/08/02/what-is-the-deal-with-nulls/)……但很明显，`''`它与`NULL`.

`''`is not `NULL`, it's `''`, 空字符串。您不能将其转换为日期、数字等：

```
regress=# SELECT CAST('' AS DATE);
ERROR:  invalid input syntax for type date: ""
LINE 1: SELECT CAST('' AS DATE);
                    ^
regress=# SELECT CAST('' AS NUMERIC);
ERROR:  invalid input syntax for type numeric: ""
LINE 1: SELECT CAST('' AS NUMERIC);
                    ^ 
```

一些产品——尤其是 Microsoft Access 和旧版本的 MySQL——对此感到困惑。`NULL`为NULL，`''`为空字符串；他们不是一回事。您不能将一个转换为另一个。

> 所以看起来当使用表单的人什么都不输入时，它返回字符串“empty”，即“”。为什么数字类型和数据类型不能将其读取为 NULL 条目？这些字段不是强制性的，所以有时我需要让它们为空。

这是您的应用程序的工作。当您的应用程序看到空字符串出现在数字、日期或类似的表单字段中时，它应该发送`NULL`到数据库，而不是`''`. 这通常是在将数据提供给数据库之前从用户输入转换数据的常规部分。进行这种转换*至关重要；*你不应该只是将用户的值直接发送到数据库。

快速搜索表明 asp classic 使用`null`or`undefined`作为其空值；当某些内容为空时，您应该能够将它们传递到您准备好的语句中。

在错误之后出现语法错误的事实`''`表明您正在将 SQL 语句构建为字符串，而不是使用[带有 placeholders 的准备好的语句](https://stackoverflow.com/questions/8538979/how-can-i-make-a-prepared-statement-in-classic-asp-that-prevents-sql-injection)。（感谢 JayC 的 SO 问题参考）。这是在乞求[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)；换句话说，您的应用程序*非常不安全*。想象一下如果用户输入“日期”会发生什么：

```
2012-01-01'); DROP SCHEMA public;-- 
```

并且您的应用程序很乐意将其变成

```
INSERT INTO sometable (blah, blah, blah) VALUES (1, 2, DATE '2012-01-01'); DROP SCHEMA public;--'); 
```

然后`DROP SCHEMA`愉快地执行，哎呀，噼里啪啦，你的数据库去了。这也是最愚蠢、最简单的一种 SQL 注入攻击。

# c++ - 我无法将 C++ 源文件添加到空项目

> ID：11944902
> 
> 赞同：0
> 
> 时间：2012-08-14T02:18:06.897
> 
> 标签：c++, visual-studio

好的，我是 C++ 编程的新手，我打算试试 Directx 游戏编程。我尝试创建一个空项目，当我在解决方案资源管理器中右键单击源文件以添加新的 C++ 源文件时，它没有显示在添加新项目菜单中。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:25:05.193

不要在资源管理器中右键单击解决方案。沿着树向下一层进入您的项目。如果您右键单击该项目，您应该会得到正确的“添加新项目”菜单。

您还可以突出显示项目中的任何内容，然后单击 File->New->File（或按 Ctrl-N）。您甚至可以在 Visual Studio 之外创建源并将它们拖放到解决方案资源管理器中的项目中。

提醒一下……在尝试制作游戏之前，请确保您掌握了基础知识。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:24:52.720

转到菜单“项目”，然后选择“添加新项目”，然后选择“Visual C++”，然后选择“代码”，然后选择“C++ 源文件”

您也可以右键单击项目名称（不是解决方案）然后“添加...”“新项目...”等等。

我现在正在重新安装 Visual Studio，因为 VS 2012 RC 安装破坏了我之前的 VS2008 安装，所以我无法检查，但这是我现在能记住的。对不起，如果这不是你这样做的方式。

# tcl - 如何在 tcl 中创建字节数组

> ID：11944906
> 
> 赞同：3
> 
> 时间：2012-08-14T02:18:34.993
> 
> 标签：tcl

我想做这样的事情——

```
byte[] byte2 = new byte[19]; 
```

我怎么能在 tcl 做同样的事情？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-14T08:00:38.433

Tcl 处理字节数组，就好像它们是只包含从 U+0000 到 U+00FF 字符的字符串（即，好像它们是 ISO 8859-1 字符）。实现中有一些细节（它们作为字节数组在 Tcl 的内部传输，而不是完整的 Unicode 字符串或一些可怕[的伪 UTF-8](http://en.wikipedia.org/wiki/UTF-8#Modified_UTF-8)字节序列），但您只需将它们视为字符串。

要创建一个 19 字节长的 NUL 字节字符串，请执行以下操作：

```
set byte2 [string repeat "\u0000" 19] 
```

然后您可以使用该`binary`命令对其进行操作（或`encoding convertfrom`将其重新解释为其他编码的字符串）。您真的不应该关心它是字节还是字符或脚本中的任何内容。特别是，Tcl 有很多命令可以很好地对字符串进行操作，并且它们在字节数组上*也同样有效。*

唯一真正重要的是它是否真的是一个字节数组是当您在 C API 中工作时。那时，如果您需要读取[`Tcl_GetByteArrayFromObj`](http://www.tcl.tk/man/tcl8.5/TclLib/ByteArrObj.htm)用于获取真实字节数组（`unsigned char`在 C 中）的字节数组，但如果您没有创建该字节数组，或者从技术上讲，如果上的引用计数`Tcl_Obj`大于 1（即，如果`Tcl_IsShared`返回一个真值；如果是，则复制 with`Tcl_DuplicateObj`以获得可以修改的内容，但必须确保它被正确存储或释放）。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-14T08:24:42.983

我想进一步澄清多纳尔写的内容。

应该强调一点，在 Tcl 中，对字节数组的操作主要类似于对字符串的操作。我是说代码

```
byte[] byte2 = new byte[19]; 
```

提示 OP 然后希望`byte2`随机访问该 C 样式数组的元素，用新值等替换它们。

相比之下，Tcl 中的这些东西的工作方式不同。如果一个人想要一个几乎是 C 风格的索引数组，那么应该使用s 来代替，并且仅在 [s] 他即将将数据序列化到电线时`list`将结果列表转换为真正的字节字符串（使用命令）`binary format`格式（或写入文件或其他）。当结果字节数组通过一个接一个地附加值来增量形成时，另一种方法很方便；在这种情况下，应该简单地使用`binary format`and `append`。

我会敦促 OP 查看[tcllib 中](http://tcllib.sf.net)处理二进制编码的一些模块（`base64`这是一个明显的候选者）。

# macos - 将 ElasticSearch 集群变为绿色（OS X 上的集群设置）

> ID：11944915
> 
> 赞同：12
> 
> 时间：2012-08-14T02:19:26.097
> 
> 标签：macos, elasticsearch

我已经[使用 Homebrew 在 Mac OS X 上安装了 ElasticSearch](https://github.com/mxcl/homebrew/blob/master/Library/Formula/elasticsearch.rb)。有用。集群以“绿色”[健康](http://www.elasticsearch.org/guide/reference/api/admin-cluster-health.html)开始。但是，在添加数据后，它就变成了“黄色”。

> 集群健康状态为：绿色、黄色或红色。在分片级别，红色状态表示集群中未分配特定分片，黄色表示已分配主分片但未分配副本，绿色表示已分配所有分片。索引级别状态由最差的分片状态控制。集群状态由最差的索引状态控制。

所以，我的副本分片没有分配。我如何分配它们？（我在大声思考。）

根据 Shay 关于[“我不断获得 Yellow 的集群健康状况”](http://elasticsearch-users.115913.n3.nabble.com/I-keep-getting-cluster-health-status-of-Yellow-td929520.html)的说法：“分片分配机制不会在同一个节点上分配一个分片及其副本，尽管它确实在同一个节点上分配了不同的分片。所以，你需要两个节点获得绿色集群状态。”

所以，我需要启动第二个节点。我这样做是：

```
cd ~/库/LaunchAgents/
cp homebrew.mxcl.elasticsearch.plist homebrew.mxcl.elasticsearch-2.plist
# 将第 8 行更改为：homebrew.mxcl.elasticsearch-2
launchctl load -wF ~/Library/LaunchAgents/homebrew.mxcl.elasticsearch-2.plist

```

现在我有“Korvus”`http://localhost:9200/`和“Iron Monger” `http://localhost:9201/`。呜呜。但是，我没有看到任何迹象表明他们彼此了解。我如何将它们连接/介绍给彼此？

注意：我读过[Zen Discovery](http://www.elasticsearch.org/guide/reference/modules/discovery/zen.html)，但还没有开悟。

### 美国东部时间 2012 年 8 月 13 日晚上 11:30 更新：

这是我的两个节点：

```
curl "http://localhost:9200/_cluster/health?pretty=true"
{
  "cluster_name" : "elasticsearch_david",
  "status" : "green",
  "timed_out" : false,
  "number_of_nodes" : 1,
  "number_of_data_nodes" : 1,
  "active_primary_shards" : 0,
  "active_shards" : 0,
  "relocating_shards" : 0,
  "initializing_shards" : 0,
  "unassigned_shards" : 0
}

curl "http://localhost:9201/_cluster/health?pretty=true"
{
  "cluster_name" : "elasticsearch_david",
  "status" : "green",
  "timed_out" : false,
  "number_of_nodes" : 1,
  "number_of_data_nodes" : 1,
  "active_primary_shards" : 0,
  "active_shards" : 0,
  "relocating_shards" : 0,
  "initializing_shards" : 0,
  "unassigned_shards" : 0
} 
```

### 美国东部时间 2012 年 8 月 13 日晚上 11:35 更新：

为了澄清，我的问题**不是**如何通过设置“忽略”问题`index.number_of_replicas: 0`。我想要多个节点，连接。

### 美国东部时间 2012 年 8 月 13 日晚上 11:48 更新：

我刚刚发布了一个[包含 elasticsearch.yml 和 elasticsearch_david.log 的双重要点](https://gist.github.com/3346123)。在我看来，两个节点都称自己为“主人”。这是我应该期待的吗？

### 美国东部时间 2012 年 8 月 14 日上午 12:36 更新：

小说还在继续！:) 如果我断开我的 Mac 与所有外部网络的连接，然后重新启动节点，它们*就会*找到彼此。双伍。这让我认为问题出在我的网络/多播配置上。目前我在我的配置中有这个：`network.host: 127.0.0.1`。也许这不正确？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-08-14T04:52:03.670

解决了。不要使用`network.host: 127.0.0.1`. 将该行注释掉以使其自动派生。

默认`elasticsearch.yml`是正确的。Homebrew 安装程序的[配置调整](https://github.com/Homebrew/homebrew/commit/c6518a2d01f349af0558a57af8b3fad5e05d8307)指定了`127.0.0.1`环回接口：

```
# Set up ElasticSearch for local development:
inreplace "#{prefix}/config/elasticsearch.yml" do |s|
  # ...
  # 3\. Bind to loopback IP for laptops roaming different networks
  s.gsub! /#\s*network\.host\: [^\n]+/, "network.host: 127.0.0.1"
end 
```

我[在 Homebrew 问题跟踪器上提交了一个问题](https://github.com/mxcl/homebrew/issues/14167)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-08-14T02:46:49.157

正如您正确注意到的那样，集群变黄了，因为您创建了一个带有副本的索引，但集群中只有一个节点。解决此问题的一种方法是将它们分配到第二个节点上。另一种方法是关闭副本。副本数可以在[创建索引](http://www.elasticsearch.org/guide/reference/api/admin-indices-create-index.html)时指定。以下命令将创建一个名称`new-index-name`为 1 个分片且没有副本的新索引。

```
curl -XPUT 'localhost:9200/new-index-name' -d '
{
    "settings": {
        "index" : {
            "number_of_shards" : 1,
            "number_of_replicas" : 0
        }
    }
}
' 
```

还可以在使用[Indices Update Settings API](http://www.elasticsearch.org/guide/reference/api/admin-indices-update-settings.html)创建索引后更改副本数。以下命令会将集群中所有索引的副本数更改为 0：

```
curl -XPUT 'localhost:9200/_settings' -d '
{
    "index" : {
        "number_of_replicas" : 0
    }
}
' 
```

您可以通过运行集群健康命令来验证节点是否相互找到：

```
$ curl "http://localhost:9200/_cluster/health?pretty=true"
{
  "cluster_name" : "elasticsearch",
  "status" : "green",
  "timed_out" : false,
  "number_of_nodes" : 2,
  "number_of_data_nodes" : 2,
  "active_primary_shards" : 30,
  "active_shards" : 55,
  "relocating_shards" : 0,
  "initializing_shards" : 0,
  "unassigned_shards" : 0
} 
```

这里的线`"number_of_data_nodes" : 2,`表示我的集群由两个节点组成，这意味着它们找到了彼此。您还可以运行[Nodes Info](http://www.elasticsearch.org/guide/reference/api/admin-cluster-nodes-info.html)命令来查看您的集群包含哪些节点：

```
curl "http://localhost:9200/_cluster/nodes?pretty=true" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-06T19:56:58.120

我遇到了同样的问题。外网开启时，两个节点（两个elasticsearch实例运行不同的yml文件：elasticsearch - config=/usr/local/opt/elasticsearch/config/elasticsearch.yml elasticsearch --config=/usr/local/opt/ elasticsearch/config/elasticsearch-1.yml) 找不到对方，第一个实例处于黄色状态，第二个没有分配副本。

解决方法：sudo route add -net 224.0.0.0/4 127.0.0.1

参考：

[https://issues.jboss.org/browse/JGRP-1808](https://issues.jboss.org/browse/JGRP-1808)

# ios - Apple Push Notification Service，将通知分组在一起

> ID：11944919
> 
> 赞同：4
> 
> 时间：2012-08-14T02:19:55.433
> 
> 标签：ios, ios5, notifications, apple-push-notifications, google-cloud-messaging

我已经在所有苹果文档中搜索了他们的推送服务。我正在设计的应用程序有时会推送许多通知。*如果您在应用程序内部*，这些通知非常有用，因为它们用于更新 UI。但是，如果您*不在*应用程序内，您会在主屏幕上收集很多通知，这只是一种糟糕的用户体验。

如果应用程序未打开，我只想告诉用户一种通知类型。

Google 有一个非常相似的概念，称为 Collapsible Key，如下所示： [GCM Messages](http://developer.android.com/training/cloudsync/gcm.html#collapse)

基本上，通知可以分组和折叠，因此每种类型只显示一个。我正在尝试找到一种方法来做到这一点，或者模仿客户端或服务器端的行为。谢谢您的帮助！

# c# - 如何加入两个控件集合以与 foreach 语句一起使用

> ID：11944921
> 
> 赞同：0
> 
> 时间：2012-08-14T02:20:23.630
> 
> 标签：c#, collections, controlcollection

根据问题，我的表单上有两个面板，一个称为leftPanel，一个称为rightPanel。这些控制我表单上的两列布局。

我在这些面板中也有折叠/展开的组合框，我希望遍历每个组合框以刷新布局，从而使它们在大小改变时相互抢购。

这是我的代码：

```
 private void RefreshLayout()
    {
        int rollingTopLeft = grpiAddressDetails.Top + grpiAddressDetails.Height + 10;
        int rollingTopRight = grpiBranding.Top + grpiBranding.Height + 10;
        foreach(Control temp in leftPanel.Controls && rightPanel.Controls)
        {
            if (temp is GroupBox)
            {
                if (!(temp.Name.Contains("grpi")))    // Top group boxes have 'i' as the 4th character in their name.
                {
                    if (temp.Parent == leftPanel)
                    {
                        temp.Top = rollingTopLeft;
                        rollingTopLeft += temp.Height + 10;
                    }
                    else if(temp.Parent == rightPanel)
                    {
                        temp.Top = rollingTopRight;
                        rollingTopRight += temp.Height + 10;
                    }
                }
            }
        }
    } 
```

这是我需要加入集合的行：

```
foreach(Control temp in leftPanel.Controls && rightPanel.Controls) 
```

我意识到 && 不起作用，也尝试过 Controls.Concat 但 Control Collections 似乎没有这个功能。希望一切都清楚！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-14T02:26:36.953

```
var allControls = leftPanel.Controls.Cast<Control>().Concat(rightPanel.Controls.Cast<Control>());
foreach(Control temp in allControls)
{
     //...
} 
```

# python - Python：将单个列表写入 csv 中的列

> ID：11944922
> 
> 赞同：2
> 
> 时间：2012-08-14T02:20:47.617
> 
> 标签：python, csv

我正在为每个数据项创建列表，我有以下数据结构，并且在迭代结束时有 6 个包含数据点的列表。每个列表的长度相同，我想将每个列表生成为 csv 文件的一列

例子：

```
columnOfList1, columnOfList2... 
```

这是我生成多个数据列表的代码：我想不通的是生成 csv 文件。

```
for (fn1, lst1), (fn2, lst2) in product(dict1.iteritems(), dict2.iteritems()):
    for vector1, vector2 in zip(lst1, lst2): 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T02:26:49.723

正如您所说，每个列表的长度相同。你为什么不做这个长度的“for”？

例子：

```
for i in range(len(some_list)):
    print lst[i], lst2[i], lst3[i], lst4[i], lst5[i] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:35:30.893

将行转换为列表只是*翻译*。只需通过以下方式完成`zip`：

```
>>> foo
[[0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4], [0, 1, 2, 3, 4]]
>>> zip(*foo)
[(0, 0, 0, 0, 0), (1, 1, 1, 1, 1), (2, 2, 2, 2, 2), (3, 3, 3, 3, 3), (4, 4, 4, 4, 4)] 
```

所以你可能只是做

```
>>> lsts = [l[1] for l in product(yourdicts)]
>>> csvwriter.writerows(zip(*lsts)) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-14T03:06:49.800

您可以为此使用[numpy.savetxt](http://docs.scipy.org/doc/numpy/reference/generated/numpy.savetxt.html)。首先将数组堆叠成列：

```
>>> import numpy as np
>>> col1 = np.array([1,2,3])
>>> col2 = np.array([4,5,6])
>>> output = np.vstack((col1, col2)).T
>>> output
array([[1, 4],
       [2, 5],
       [3, 6]]) 
```

然后写出来。你可以只传递一个文件名，但在这里我使用 StringIO 来显示输出：

```
>>> from StringIO import StringIO
>>> s = StringIO()
>>> np.savetxt(s, output, delimiter=',', fmt='%.7g')
>>> print s.getvalue()
1,4
2,5
3,6 
```

# html - 如何防止H1继承？

> ID：11944923
> 
> 赞同：2
> 
> 时间：2012-08-14T02:21:01.703
> 
> 标签：html, css, xhtml

请参阅下面的代码，我想`<h1>`使用`.page-header h1`类，但它使用`#main h1`

如何在不修改的情况下防止这种情况`#main h1`？

```
<div id='main'>
 <div class="page-header">
        <h1>This is a title</h1>
 </div>
</div> 
```

css

```
#main h1 {
 line-height: 30px;
 font: 28px Arial, Helvetica, sans-serif;
 color: #333;
 font-weight: 300;
}

.page-header h1 {
    color: white;
    font-size: 28px;
    line-height: 20px;
    margin: 12px 0 11px 11px;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T02:28:16.057

您需要一个更[具体](http://www.w3.org/TR/CSS2/cascade.html#specificity)的选择器。将第二条规则上的选择器更改为：

```
#main .page-header h1 
```

比较每个选择器的特异性值：

```
#main h1               0101
.page-header h1        0011
#main .page-header h1  0111  <-- Winner! 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:42:05.557

您可以像 bfavaretto 回答的那样增加您的特异性，**也可以*降低*您的特异性**。对于标签尤其如此`h1`，因为许多人（像我一样）认为您应该`h1`在网页上只使用一个标签。坚持这样的观点，减少显然是：

```
h1 { all your properties } 
```

上面甚至可以与多个`h1`标签一起使用，*假设它们都驻留在其中`#main`（*然后`#main h1`是多余的），*然后*如果您有`.page-header h1`组合类的特定样式将覆盖简单`h1`定义。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T04:34:30.980

嘿，现在你可以做到这一点

```
#main .page-header h1 {
    color: white;
    font-size: 28px;
    line-height: 20px;
    margin: 12px 0 11px 11px;
} 
```

因为

ID 值大于类和标签示例

`#main`这是 id 现在这是值`100`

`H1`这是 HTML 标记，此值为`1`

`.page-header`这是类，这个值是`10`

现在根据值仔细定义css。

# python - 组织项目文件并在模块中使用全局常量

> ID：11944928
> 
> 赞同：0
> 
> 时间：2012-08-14T02:21:34.910
> 
> 标签：python, pygame

我正在玩python（尤其是pygame），并且正在组织我的项目文件：

```
/cls
    imageloader.py
    level.py
    __init__.py
/graphics
/maps
game.py
__init__.py
... 
```

还有关于模块中全局常量的问题（比如配置变量——FPS、TILESIZE 等）。有什么方法可以访问/cls/level.py 中game.py 中定义的常量吗？而且，更重要的是——这是一种错误的方法，不是吗？我应该将其作为论据传递吗？

什么是pytonish方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:26:43.477

如果您将整个东西制作成一个包并制作`cls`一个包（通过`__init__.py`在每个目录中提供文件），那么`levels.py`您可以从`from ..game import someConstant`.

# javascript - 如何使用 Node.js 下载文件（不使用第三方库）？

> ID：11944932
> 
> 赞同：577
> 
> 时间：2012-08-14T02:21:44.943
> 
> 标签：javascript, node.js, download, fs

如何在**不使用第三方库的情况下使用**Node.js 下载文件？

我不需要什么特别的。我只想从给定的 URL 下载文件，然后将其保存到给定的目录。

* * *

## 回答 #1

> 赞同：762
> 
> 时间：2012-08-14T02:28:16.983

您可以创建一个 HTTP`GET`请求并将其通过管道`response`传输到可写文件流中：

```
const http = require('http'); // or 'https' for https:// URLs
const fs = require('fs');

const file = fs.createWriteStream("file.jpg");
const request = http.get("http://i3.ytimg.com/vi/J---aiyznGQ/mqdefault.jpg", function(response) {
  response.pipe(file);
}); 
```

如果你想支持在命令行上收集信息——比如指定目标文件或目录，或者 URL——请查看[Commander](https://github.com/visionmedia/commander.js/)之类的东西。

* * *

## 回答 #2

> 赞同：568
> 
> 时间：2014-04-07T08:24:11.793

不要忘记处理错误！以下代码基于 Augusto Roman 的回答。

```
var http = require('http');
var fs = require('fs');

var download = function(url, dest, cb) {
  var file = fs.createWriteStream(dest);
  var request = http.get(url, function(response) {
    response.pipe(file);
    file.on('finish', function() {
      file.close(cb);  // close() is async, call cb after close completes.
    });
  }).on('error', function(err) { // Handle errors
    fs.unlink(dest); // Delete the file async. (But we don't check the result)
    if (cb) cb(err.message);
  });
}; 
```

* * *

## 回答 #3

> 赞同：171
> 
> 时间：2013-07-16T12:40:54.123

正如 Michelle Tilley 所说，但使用适当的控制流程：

```
var http = require('http');
var fs = require('fs');

var download = function(url, dest, cb) {
  var file = fs.createWriteStream(dest);
  http.get(url, function(response) {
    response.pipe(file);
    file.on('finish', function() {
      file.close(cb);
    });
  });
} 
```

如果不等待`finish`事件，天真的脚本可能会以不完整的文件结束。

**编辑：**感谢@Augusto Roman 指出`cb`应该传递给`file.close`，而不是显式调用。

* * *

## 回答 #4

> 赞同：80
> 
> 时间：2015-08-21T07:38:18.467

说到处理错误，听请求错误也更好。我什至会通过检查响应代码来验证。此处仅对 200 响应代码认为成功，但其他代码可能很好。

```
const fs = require('fs');
const http = require('http');

const download = (url, dest, cb) => {
    const file = fs.createWriteStream(dest);

    const request = http.get(url, (response) => {
        // check if response is success
        if (response.statusCode !== 200) {
            return cb('Response status was ' + response.statusCode);
        }

        response.pipe(file);
    });

    // close() is async, call cb after close completes
    file.on('finish', () => file.close(cb));

    // check for request error too
    request.on('error', (err) => {
        fs.unlink(dest, () => cb(err.message)); // delete the (partial) file and then return the error
    });

    file.on('error', (err) => { // Handle errors
        fs.unlink(dest, () => cb(err.message)); // delete the (partial) file and then return the error
    });
}; 
```

尽管这段代码相对简单，但我还是建议使用[request 模块](https://github.com/request/request)，因为它可以处理更多的协议（你好 HTTPS！），而`http`.

可以这样做：

```
const fs = require('fs');
const request = require('request');

const download = (url, dest, cb) => {
    const file = fs.createWriteStream(dest);
    const sendReq = request.get(url);

    // verify response code
    sendReq.on('response', (response) => {
        if (response.statusCode !== 200) {
            return cb('Response status was ' + response.statusCode);
        }

        sendReq.pipe(file);
    });

    // close() is async, call cb after close completes
    file.on('finish', () => file.close(cb));

    // check for request errors
    sendReq.on('error', (err) => {
        fs.unlink(dest, () => cb(err.message)); // delete the (partial) file and then return the error
    });

    file.on('error', (err) => { // Handle errors
        fs.unlink(dest, () => cb(err.message)); // delete the (partial) file and then return the error
    });
}; 
```

**编辑**：

为了使它工作`https`，改变

```
const http = require('http'); 
```

至

```
const http = require('https'); 
```

* * *

## 回答 #5

> 赞同：50
> 
> 时间：2014-04-01T18:11:58.073

`file.close()`gfxmonk 的答案在回调和完成 之间存在非常紧张的数据竞争。`file.close()`实际上需要一个在关闭完成时调用的回调。否则，文件的立即使用可能会失败（非常罕见！）。

一个完整的解决方案是：

```
var http = require('http');
var fs = require('fs');

var download = function(url, dest, cb) {
  var file = fs.createWriteStream(dest);
  var request = http.get(url, function(response) {
    response.pipe(file);
    file.on('finish', function() {
      file.close(cb);  // close() is async, call cb after close completes.
    });
  });
} 
```

如果不等待完成事件，天真的脚本可能会以不完整的文件结束。如果不通过 close 安排`cb`回调，您可能会在访问文件和实际准备好的文件之间发生竞争。

* * *

## 回答 #6

> 赞同：28
> 
> 时间：2017-07-10T08:52:43.417

也许 node.js 发生了变化，但其他解决方案似乎存在一些问题（使用 node v8.1.2）：

1.  您无需`file.close()`在`finish`活动中致电。默认情况下，`fs.createWriteStream`设置为自动关闭：[https ://nodejs.org/api/fs.html#fs_fs_createwritestream_path_options](https://nodejs.org/api/fs.html#fs_fs_createwritestream_path_options)
2.  `file.close()`应该在错误时调用。删除文件时可能不需要（`unlink()`），但通常是：[https ://nodejs.org/api/stream.html#stream_readable_pipe_destination_options](https://nodejs.org/api/stream.html#stream_readable_pipe_destination_options)
3.  临时文件没有被删除`statusCode !== 200`
4.  `fs.unlink()`不推荐使用没有回调的（输出警告）
5.  如果`dest`文件存在；它被覆盖

下面是一个修改过的解决方案（使用 ES6 和 Promise）来处理这些问题。

```
const http = require("http");
const fs = require("fs");

function download(url, dest) {
    return new Promise((resolve, reject) => {
        const file = fs.createWriteStream(dest, { flags: "wx" });

        const request = http.get(url, response => {
            if (response.statusCode === 200) {
                response.pipe(file);
            } else {
                file.close();
                fs.unlink(dest, () => {}); // Delete temp file
                reject(`Server responded with ${response.statusCode}: ${response.statusMessage}`);
            }
        });

        request.on("error", err => {
            file.close();
            fs.unlink(dest, () => {}); // Delete temp file
            reject(err.message);
        });

        file.on("finish", () => {
            resolve();
        });

        file.on("error", err => {
            file.close();

            if (err.code === "EEXIST") {
                reject("File already exists");
            } else {
                fs.unlink(dest, () => {}); // Delete temp file
                reject(err.message);
            }
        });
    });
} 
```

* * *

## 回答 #7

> 赞同：18
> 
> 时间：2015-12-30T07:13:07.443

对于那些寻找基于 es6 风格的 Promise 方式的人来说，我想它会是这样的：

```
var http = require('http');
var fs = require('fs');

function pDownload(url, dest){
  var file = fs.createWriteStream(dest);
  return new Promise((resolve, reject) => {
    var responseSent = false; // flag to make sure that response is sent only once.
    http.get(url, response => {
      response.pipe(file);
      file.on('finish', () =>{
        file.close(() => {
          if(responseSent)  return;
          responseSent = true;
          resolve();
        });
      });
    }).on('error', err => {
        if(responseSent)  return;
        responseSent = true;
        reject(err);
    });
  });
}

//example
pDownload(url, fileLocation)
  .then( ()=> console.log('downloaded file no issues...'))
  .catch( e => console.error('error while downloading', e)); 
```

* * *

## 回答 #8

> 赞同：16
> 
> 时间：2014-10-07T09:49:22.897

# 超时解决方案，防止内存泄漏：

以下代码基于 Brandon Tilley 的回答：

```
var http = require('http'),
    fs = require('fs');

var request = http.get("http://example12345.com/yourfile.html", function(response) {
    if (response.statusCode === 200) {
        var file = fs.createWriteStream("copy.html");
        response.pipe(file);
    }
    // Add timeout.
    request.setTimeout(12000, function () {
        request.abort();
    });
}); 
```

遇到错误时不要生成文件，并且更喜欢在 X 秒后使用超时来关闭您的请求。

* * *

## 回答 #9

> 赞同：14
> 
> 时间：2020-07-08T01:55:24.247

基于上面的其他答案和一些*微妙的*问题，这是我的尝试。

1.  在访问网络之前使用 . 检查文件不存在`fs.access`。
2.  `fs.createWriteStream`仅当您获得`200 OK`状态代码时才创建。这减少了`fs.unlink`整理临时文件句柄所需的命令数量。
3.  即使在 a 上，`200 OK`我们仍然可能`reject`由于`EEXIST`文件已经存在（想象另一个进程在我们进行网络调用时创建了该文件）。
4.  如果您在标题中提供的链接位置之后`download`获得`301 Moved Permanently`或重定向，则递归调用。`302 Found (Moved Temporarily)`
5.  递归调用的其他一些答案的问题`download`是它们调用`resolve(download)`而不是`download(...).then(() => resolve())`在`Promise`下载实际完成之前返回。这样，嵌套的承诺链以正确的顺序解析。
6.  异步清理临时文件似乎*很酷，但我也选择在完成后才拒绝，所以我知道当这个承诺解决或拒绝时，一切都开始完成。*

```
const https = require('https');
const fs = require('fs');

/**
 * Download a resource from `url` to `dest`.
 * @param {string} url - Valid URL to attempt download of resource
 * @param {string} dest - Valid path to save the file.
 * @returns {Promise<void>} - Returns asynchronously when successfully completed download
 */
function download(url, dest) {
  return new Promise((resolve, reject) => {
    // Check file does not exist yet before hitting network
    fs.access(dest, fs.constants.F_OK, (err) => {

        if (err === null) reject('File already exists');

        const request = https.get(url, response => {
            if (response.statusCode === 200) {

              const file = fs.createWriteStream(dest, { flags: 'wx' });
              file.on('finish', () => resolve());
              file.on('error', err => {
                file.close();
                if (err.code === 'EEXIST') reject('File already exists');
                else fs.unlink(dest, () => reject(err.message)); // Delete temp file
              });
              response.pipe(file);
            } else if (response.statusCode === 302 || response.statusCode === 301) {
              //Recursively follow redirects, only a 200 will resolve.
              download(response.headers.location, dest).then(() => resolve());
            } else {
              reject(`Server responded with ${response.statusCode}: ${response.statusMessage}`);
            }
          });

          request.on('error', err => {
            reject(err.message);
          });
    });
  });
} 
```

* * *

## 回答 #10

> 赞同：10
> 
> 时间：2019-02-15T09:56:07.340

你好，我想你可以使用**child_process**模块和 curl 命令。

```
const cp = require('child_process');

let download = async function(uri, filename){
    let command = `curl -o ${filename}  '${uri}'`;
    let result = cp.execSync(command);
};

async function test() {
    await download('http://zhangwenning.top/20181221001417.png', './20181221001417.png')
}

test() 
```

另外，当你想下载大、多文件时，可以使用**集群**模块来使用更多的cpu核心。

* * *

## 回答 #11

> 赞同：8
> 
> 时间：2021-03-06T15:45:57.980

现代版本（ES6、Promise、Node 12.x+）适用于 https/http。它还支持重定向 302 和 301。我决定不使用 3rd 方库，因为它可以使用标准 Node.js 库轻松完成。

```
// download.js
import fs from 'fs'
import https from 'https'
import http from 'http'
import { basename } from 'path'
import { URL } from 'url'

const TIMEOUT = 10000

function download (url, dest) {
  const uri = new URL(url)
  if (!dest) {
    dest = basename(uri.pathname)
  }
  const pkg = url.toLowerCase().startsWith('https:') ? https : http

  return new Promise((resolve, reject) => {
    const request = pkg.get(uri.href).on('response', (res) => {
      if (res.statusCode === 200) {
        const file = fs.createWriteStream(dest, { flags: 'wx' })
        res
          .on('end', () => {
            file.end()
            // console.log(`${uri.pathname} downloaded to: ${path}`)
            resolve()
          })
          .on('error', (err) => {
            file.destroy()
            fs.unlink(dest, () => reject(err))
          }).pipe(file)
      } else if (res.statusCode === 302 || res.statusCode === 301) {
        // Recursively follow redirects, only a 200 will resolve.
        download(res.headers.location, dest).then(() => resolve())
      } else {
        reject(new Error(`Download request failed, response status: ${res.statusCode} ${res.statusMessage}`))
      }
    })
    request.setTimeout(TIMEOUT, function () {
      request.abort()
      reject(new Error(`Request timeout after ${TIMEOUT / 1000.0}s`))
    })
  })
}

export default download 
```

我修改了**Andrey Tkachenko**的[要点](https://gist.github.com/falkolab/f160f446d0bda8a69172)

将其包含在另一个文件中并使用

```
const download = require('./download.js')
const url = 'https://raw.githubusercontent.com/replace-this-with-your-remote-file'
console.log('Downloading ' + url)

async function run() {
  console.log('Downloading file')
  try {
    await download(url, 'server')
    console.log('Download done')
  } catch (e) {
    console.log('Download failed')
    console.log(e.message)
  }
}

run() 
```

* * *

## 回答 #12

> 赞同：7
> 
> 时间：2014-12-02T07:06:09.797

Vince Yuan 的代码很棒，但似乎有问题。

```
function download(url, dest, callback) {
    var file = fs.createWriteStream(dest);
    var request = http.get(url, function (response) {
        response.pipe(file);
        file.on('finish', function () {
            file.close(callback); // close() is async, call callback after close completes.
        });
        file.on('error', function (err) {
            fs.unlink(dest); // Delete the file async. (But we don't check the result)
            if (callback)
                callback(err.message);
        });
    });
} 
```

* * *

## 回答 #13

> 赞同：7
> 
> 时间：2019-09-04T17:23:33.943

我更喜欢 request() 因为你可以同时使用 http 和 https 。

```
request('http://i3.ytimg.com/vi/J---aiyznGQ/mqdefault.jpg')
  .pipe(fs.createWriteStream('cat.jpg')) 
```

* * *

## 回答 #14

> 赞同：7
> 
> 时间：2017-01-18T21:14:47.013

```
const download = (url, path) => new Promise((resolve, reject) => {
http.get(url, response => {
    const statusCode = response.statusCode;

    if (statusCode !== 200) {
        return reject('Download error!');
    }

    const writeStream = fs.createWriteStream(path);
    response.pipe(writeStream);

    writeStream.on('error', () => reject('Error writing to file!'));
    writeStream.on('finish', () => writeStream.close(resolve));
});}).catch(err => console.error(err)); 
```

* * *

## 回答 #15

> 赞同：6
> 
> 时间：2020-03-14T16:21:08.117

> ✅因此，如果您使用[管道](https://nodejs.org/api/stream.html#stream_stream_pipeline_source_transforms_destination_callback)，它将关闭所有其他流并确保没有内存泄漏。
> 
> 工作示例：
> 
> ```
> const http = require('http');
> const { pipeline } = require('stream');
> const fs = require('fs');
> 
> const file = fs.createWriteStream('./file.jpg');
> 
> http.get('http://via.placeholder.com/150/92c952', response => {
>   pipeline(
>     response,
>     file,
>     err => {
>       if (err)
>         console.error('Pipeline failed.', err);
>       else
>         console.log('Pipeline succeeded.');
>     }
>   );
> }); 
> ```

从[我对](https://stackoverflow.com/a/60459320/5732327)[“流中 .pipe 和 .pipeline 有什么区别”的](https://stackoverflow.com/q/58875655)回答开始。

* * *

## 回答 #16

> 赞同：5
> 
> 时间：2014-12-04T03:11:44.283

您可以使用[https://github.com/douzi8/ajax-request#download](https://github.com/douzi8/ajax-request#download)

```
request.download('http://res.m.ctrip.com/html5/Content/images/57.png', 
  function(err, res, body) {}
); 
```

* * *

## 回答 #17

> 赞同：5
> 
> 时间：2020-12-06T14:52:49.680

# 使用 http2 模块

**我看到了使用http**、**https**和**request**模块的答案。我想使用另一个支持 http 或 https 协议的本机 NodeJS 模块添加一个：

## 解决方案

对于我正在做的事情，我参考了官方的 NodeJS API，以及关于这个问题的其他一些答案。以下是我为尝试而编写的测试，它按预期工作：

```
import * as fs from 'fs';
import * as _path from 'path';
import * as http2 from 'http2';

/* ... */

async function download( host, query, destination )
{
    return new Promise
    (
        ( resolve, reject ) =>
        {
            // Connect to client:
            const client = http2.connect( host );
            client.on( 'error', error => reject( error ) );

            // Prepare a write stream:
            const fullPath = _path.join( fs.realPathSync( '.' ), destination );
            const file = fs.createWriteStream( fullPath, { flags: "wx" } );
            file.on( 'error', error => reject( error ) );

            // Create a request:
            const request = client.request( { [':path']: query } );

            // On initial response handle non-success (!== 200) status error:
            request.on
            (
                'response',
                ( headers/*, flags*/ ) =>
                {
                    if( headers[':status'] !== 200 )
                    {
                        file.close();
                        fs.unlink( fullPath, () => {} );
                        reject( new Error( `Server responded with ${headers[':status']}` ) );
                    }
                }
            );

            // Set encoding for the payload:
            request.setEncoding( 'utf8' );

            // Write the payload to file:
            request.on( 'data', chunk => file.write( chunk ) );

            // Handle ending the request
            request.on
            (
                'end',
                () =>
                {
                    file.close();
                    client.close();
                    resolve( { result: true } );
                }
            );

            /* 
                You can use request.setTimeout( 12000, () => {} ) for aborting
                after period of inactivity
            */

            // Fire off [flush] the request:
            request.end();
        }
    );
} 
```

然后，例如：

```
/* ... */

let downloaded = await download( 'https://gitlab.com', '/api/v4/...', 'tmp/tmpFile' );

if( downloaded.result )
{
    // Success!
}

// ... 
```

**外部参考**

*   [https://nodejs.org/api/http2.html#http2_client_side_example](https://nodejs.org/api/http2.html#http2_client_side_example)
*   [https://nodejs.org/api/http2.html#http2_clienthttp2session_request_headers_options](https://nodejs.org/api/http2.html#http2_clienthttp2session_request_headers_options)

**编辑信息**

*   该解决方案是为 typescript 编写的，该函数是一个*类方法*`function`- 但是如果没有注意到这一点，如果没有正确使用我们的贡献者已如此迅速添加的声明，该解决方案将不适用于假定的 javascript 用户。谢谢！

* * *

## 回答 #18

> 赞同：5
> 
> 时间：2016-04-12T02:33:36.567

使用 promise 下载，它解析一个可读流。放置额外的逻辑来处理重定向。

```
var http = require('http');
var promise = require('bluebird');
var url = require('url');
var fs = require('fs');
var assert = require('assert');

function download(option) {
    assert(option);
    if (typeof option == 'string') {
        option = url.parse(option);
    }

    return new promise(function(resolve, reject) {
        var req = http.request(option, function(res) {
            if (res.statusCode == 200) {
                resolve(res);
            } else {
                if (res.statusCode === 301 && res.headers.location) {
                    resolve(download(res.headers.location));
                } else {
                    reject(res.statusCode);
                }
            }
        })
        .on('error', function(e) {
            reject(e);
        })
        .end();
    });
}

download('http://localhost:8080/redirect')
.then(function(stream) {
    try {

        var writeStream = fs.createWriteStream('holyhigh.jpg');
        stream.pipe(writeStream);

    } catch(e) {
        console.error(e);
    }
}); 
```

* * *

## 回答 #19

> 赞同：4
> 
> 时间：2020-05-16T23:16:14.727

**download.js**（即/project/utils/download.js）

```
const fs = require('fs');
const request = require('request');

const download = (uri, filename, callback) => {
    request.head(uri, (err, res, body) => {
        console.log('content-type:', res.headers['content-type']);
        console.log('content-length:', res.headers['content-length']);

        request(uri).pipe(fs.createWriteStream(filename)).on('close', callback);
    });
};

module.exports = { download }; 
```

**应用程序.js**

```
... 
// part of imports
const { download } = require('./utils/download');

...
// add this function wherever
download('https://imageurl.com', 'imagename.jpg', () => {
  console.log('done')
}); 
```

* * *

## 回答 #20

> 赞同：3
> 
> 时间：2017-04-14T18:51:14.500

如果您使用的是 express 使用 res.download() 方法。否则 fs 模块使用。

```
app.get('/read-android', function(req, res) {
   var file = "/home/sony/Documents/docs/Android.apk";
    res.download(file) 
}); 
```

（或者）

```
 function readApp(req,res) {
      var file = req.fileName,
          filePath = "/home/sony/Documents/docs/";
      fs.exists(filePath, function(exists){
          if (exists) {     
            res.writeHead(200, {
              "Content-Type": "application/octet-stream",
              "Content-Disposition" : "attachment; filename=" + file});
            fs.createReadStream(filePath + file).pipe(res);
          } else {
            res.writeHead(400, {"Content-Type": "text/plain"});
            res.end("ERROR File does NOT Exists.ipa");
          }
        });  
    } 
```

* * *

## 回答 #21

> 赞同：2
> 
> 时间：2015-08-23T15:54:10.017

路径：img 类型：jpg 随机 uniqid

```
 function resim(url) {

    var http = require("http");
    var fs = require("fs");
    var sayi = Math.floor(Math.random()*10000000000);
    var uzanti = ".jpg";
    var file = fs.createWriteStream("img/"+sayi+uzanti);
    var request = http.get(url, function(response) {
  response.pipe(file);
});

        return sayi+uzanti;
} 
```

* * *

## 回答 #22

> 赞同：1
> 
> 时间：2020-08-03T17:21:25.563

编写我自己的解决方案，因为现有的不符合我的要求。

**这包括什么：**

*   HTTPS 下载（将包切换到`http`HTTP 下载）
*   基于承诺的功能
*   处理转发路径（状态 302）
*   浏览器标头 - 一些 CDN 需要
*   来自 URL 的文件名（以及硬编码）
*   错误处理

它是打字的，它更安全。`.d.ts`如果您使用纯 JS（无 Flow，无 TS）或转换为文件，请随意删除类型

index.js

```
import httpsDownload from httpsDownload;
httpsDownload('https://example.com/file.zip', './'); 
```

https下载。[js|ts]

```
import https from "https";
import fs from "fs";
import path from "path";

function download(
  url: string,
  folder?: string,
  filename?: string
): Promise<void> {
  return new Promise((resolve, reject) => {
    const req = https
      .request(url, { headers: { "User-Agent": "javascript" } }, (response) => {
        if (response.statusCode === 302 && response.headers.location != null) {
          download(
            buildNextUrl(url, response.headers.location),
            folder,
            filename
          )
            .then(resolve)
            .catch(reject);
          return;
        }

        const file = fs.createWriteStream(
          buildDestinationPath(url, folder, filename)
        );
        response.pipe(file);
        file.on("finish", () => {
          file.close();
          resolve();
        });
      })
      .on("error", reject);
    req.end();
  });
}

function buildNextUrl(current: string, next: string) {
  const isNextUrlAbsolute = RegExp("^(?:[a-z]+:)?//").test(next);
  if (isNextUrlAbsolute) {
    return next;
  } else {
    const currentURL = new URL(current);
    const fullHost = `${currentURL.protocol}//${currentURL.hostname}${
      currentURL.port ? ":" + currentURL.port : ""
    }`;
    return `${fullHost}${next}`;
  }
}

function buildDestinationPath(url: string, folder?: string, filename?: string) {
  return path.join(folder ?? "./", filename ?? generateFilenameFromPath(url));
}

function generateFilenameFromPath(url: string): string {
  const urlParts = url.split("/");
  return urlParts[urlParts.length - 1] ?? "";
}

export default download; 
```

* * *

## 回答 #23

> 赞同：1
> 
> 时间：2018-02-25T03:25:42.523

如果没有库，只是指出它可能是错误的。这里有几个：

*   无法处理 http 重定向，例如这个 url [https://calibre-ebook.com/dist/portable](https://calibre-ebook.com/dist/portable)是二进制的。
*   http模块不能https url，你会得到`Protocol "https:" not supported.`

这是我的建议：

*   调用系统工具，如`wget`或`curl`
*   使用一些工具，比如[node-wget-promise](https://github.com/ajhsu/node-wget-promise)，它也很容易使用。 `var wget = require('node-wget-promise'); wget('http://nodejs.org/images/logo.svg');`

* * *

## 回答 #24

> 赞同：0
> 
> 时间：2018-04-09T05:25:46.047

```
function download(url, dest, cb) {

  var request = http.get(url, function (response) {

    const settings = {
      flags: 'w',
      encoding: 'utf8',
      fd: null,
      mode: 0o666,
      autoClose: true
    };

    // response.pipe(fs.createWriteStream(dest, settings));
    var file = fs.createWriteStream(dest, settings);
    response.pipe(file);

    file.on('finish', function () {
      let okMsg = {
        text: `File downloaded successfully`
      }
      cb(okMsg);
      file.end(); 
    });
  }).on('error', function (err) { // Handle errors
    fs.unlink(dest); // Delete the file async. (But we don't check the result)
    let errorMsg = {
      text: `Error in file downloadin: ${err.message}`
    }
    if (cb) cb(errorMsg);
  });
}; 
```

* * *

## 回答 #25

> 赞同：0
> 
> 时间：2019-10-23T10:25:55.897

这是另一种在没有第三方依赖和搜索重定向的情况下处理它的方法：

```
 var download = function(url, dest, cb) {
            var file = fs.createWriteStream(dest);
            https.get(url, function(response) {
                if ([301,302].indexOf(response.statusCode) !== -1) {
                    body = [];
                    download(response.headers.location, dest, cb);
                  }
              response.pipe(file);
              file.on('finish', function() {
                file.close(cb);  // close() is async, call cb after close completes.
              });
            });
          } 
```

* * *

## 回答 #26

> 赞同：0
> 
> 时间：2019-02-15T03:27:05.427

```
var fs = require('fs'),
    request = require('request');

var download = function(uri, filename, callback){
    request.head(uri, function(err, res, body){
    console.log('content-type:', res.headers['content-type']);
    console.log('content-length:', res.headers['content-length']);
    request(uri).pipe(fs.createWriteStream(filename)).on('close', callback);

    }); 
};   

download('https://www.cryptocompare.com/media/19684/doge.png', 'icons/taskks12.png', function(){
    console.log('done');
}); 
```

* * *

## 回答 #27

> 赞同：-1
> 
> 时间：2021-02-15T17:58:46.547

我发现这种方法最有帮助，尤其是在涉及 pdf 和随机其他文件时。

```
import fs from "fs";

  fs.appendFile("output_file_name.ext", fileDataInBytes, (err) => {
    if (err) throw err;
    console.log("File saved!");
  }); 
```

* * *

## 回答 #28

> 赞同：-1
> 
> 时间：2018-06-07T11:33:49.027

您可以尝试使用`res.redirect`https 文件下载 url，然后它将下载文件。

喜欢：`res.redirect('https//static.file.com/file.txt');`

* * *

## 回答 #29

> 赞同：-3
> 
> 时间：2020-10-21T08:35:15.237

我建议你使用`res.download`相同的如下：

```
app.get('/download', function(req, res){
  const file = `${__dirname}/folder/abc.csv`;
  res.download(file); // Set disposition and send it.
}); 
```

* * *

## 回答 #30

> 赞同：-4
> 
> 时间：2017-06-01T09:25:49.770

```
var requestModule=require("request");

requestModule(filePath).pipe(fs.createWriteStream('abc.zip')); 
```

# apache - htaccess 条件

> ID：11944939
> 
> 赞同：0
> 
> 时间：2012-08-14T02:22:16.760
> 
> 标签：apache, .htaccess, redirect

需要使用 .htaccess 规则进行一些高级重定向

这是我目前的规则。

```
Options +FollowSymLinks
RewriteEngine On
RewriteCond %{REQUEST_URI} !^/content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/van.*
RewriteCond %{REQUEST_URI} !^/content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/truck.*
RewriteCond %{REQUEST_URI} !^/admin.*
RewriteCond %{REQUEST_URI} !^/login.*
RewriteCond %{REQUEST_URI} !^/session.*
RewriteCond %{REQUEST_URI} !^/path_maps.*
RewriteCond %{REQUEST_URI} !.*\.(gif|jpg|png|js|css|swf)

RewriteCond %{HTTP_HOST} !^www\.dealer1\.com
RewriteCond %{HTTP_HOST} !^www\.dealer2\.com
RewriteCond %{HTTP_HOST} !^www\.dealer3\.com
RewriteCond %{HTTP_HOST} !^www\.dealer4\.com

RewriteRule (.*) http://www.example.com [R=301,L] 
```

此规则将所有不在 RewriteCond 中的流量定向到`www.example.com`. 但是，如果是这样，我现在需要进行以下修改：

`/content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/van.*`

路径被访问然后我希望它重定向`www.example.com/van`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T09:59:26.220

我要做的第一件事就是简单地做到这一点。首先在模式末尾添加 .* 是多余的，如果你想测试一个 URI 是否以`.swf`say 结尾，那么你使用`\.swf$`. 还要在合理的地方结合规则。

接下来进行空白排除的最简单方法是使用“^ -”，它只是“总是什么都不做”的简写（如果满足条件）。添加 [L] 表示不使用以下规则。或者，您可以使用 [skip=N] 跳过接下来的 N 条规则。

并指定一个基数，例如 / 如果`.htaccess`在 DOCROOT 中，那么：

```
Options +FollowSymLinks
RewriteEngine On
RewriteBase   /
#
# No redirects for a specific list of dealers, paths and file types
#
RewriteCond %{HTTP_HOST}   ^www\.(dealer1|dealer2|dealer3|dealer4)\.com [OR]
RewriteCond %{REQUEST_URI} ^/(admin|login|session|path_maps)\b          [OR]
RewriteCond %{REQUEST_URI} \.(gif|jpg|png|js|css|swf)^
RewriteRule ^              -                                            [L]
#
# Otherwise redirect var URIs to /van
#
RewriteCond %{REQUEST_URI} ^/content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/van
RewriteRule ^              http://www.domain.com/van                    [R=301,L]
#
# Redirect everything except truck to /
#
RewriteCond %{REQUEST_URI} !^/content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/truck.*
RewriteRule ^              http://www.domain.com                        [R=301,L] 
```

最后，我真的很怀疑你的长 URI。请求 URI 的所有内容，不包括服务器和查询位（例如，`http//server/abc/login?user=fred`它是`/abc/login`）。例如，您真的想将此站点上除此路径之外的所有内容重定向到新域吗？

> `http://www.domain.com/content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/truck`

强迫用户使用如此复杂的 URI 是阻止他们访问的好方法！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:29:10.910

在您当前的规则之后，只需添加以下内容：

```
RewriteCond %{HTTP_HOST} !^www\.dealer1\.com
RewriteCond %{HTTP_HOST} !^www\.dealer2\.com
RewriteCond %{HTTP_HOST} !^www\.dealer3\.com
RewriteCond %{HTTP_HOST} !^www\.dealer4\.com

RewriteRule ^/?content/newzealand/mpc/mpc_newzealand_website/en/home_mpc/van.* http://www.domain.com/van [R=301,L] 
```

# php - Smarty：设置目录

> ID：11944942
> 
> 赞同：1
> 
> 时间：2012-08-14T02:22:58.100
> 
> 标签：php, templates, smarty

我不太确定这一点，但从聪明的说明阅读[http://www.smarty.net/docs/en/installing.smarty.basic.tpl](http://www.smarty.net/docs/en/installing.smarty.basic.tpl)，我必须设置 $template_dir、$compile_dir、$config_dir、和 $cache_dir 每次我有一个新的 PHP 脚本时。换句话说，我必须为每个 PHP 脚本添加以下代码行：

```
$smarty->setTemplateDir('/.../templates/');
$smarty->setCompileDir('/...templates_c/');
$smarty->setConfigDir('/.../configs/');
$smarty->setCacheDir('/.../cache/'); 
```

那是对的吗？你们有没有采取任何“捷径”来避免这种情况？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:25:40.877

您应该在一个通用配置文件中设置所有这些内容，然后在需要时将其包含在内。

```
include( 'path/to/common_config.php' ); 
```

然后，在您的 common_config.php 中，您可以执行以下操作：

```
//set up Smarty
require_once( dirname( __FILE__ ) . '/smarty/Smarty.class.php' );
$smarty = new Smarty;
$smarty->error_reporting = E_ALL & ~E_NOTICE;
$smarty->setTemplateDir( dirname( __FILE__ ) . '/../templates' );
$smarty->setCompileDir( dirname( __FILE__ ) . '/../smarty/templates_c' ); 
```

使用 "dirname( **FILE** )" 将确保路径始终相对于公共配置文件。

现在您需要做的就是使用带有模板文件名称的 display 方法：

```
$smarty->display( 'index.tpl' ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-02T20:14:12.740

我认为更好的解决方案是扩展 Smarty 类。

```
<?php
require_once SMARTY_DIR . 'Smarty.class.php';

class Application extends Smarty {

    public function __construct() {
        parent::__construct();

        $this
            ->addTemplateDir (TPL_DIR)
            ->setCompileDir  (COMPILE_DIR)
            ->setConfigDir   (CONFIG_DIR)
            ->setCacheDir    (CACHE_DIR)
            ->setPluginsDir  ( array ( SMARTY_DIR.'plugins', PRESENTATION_DIR.'smarty_plugins' ) );

        $this->caching = false;       // set Smarty caching off by default
        $this->muteExpectedErrors();  // can't remember what this does exactly, but it tunes down the sensitivity of errors
        $this->debugging = SMARTY_DEBUG; // setting controlled in config. file
    }
}
?> 
```

然后只需启动新的“应用程序”类。

# jquery - 如何使用 jqGrid 查看静态 json？

> ID：11944943
> 
> 赞同：3
> 
> 时间：2012-08-14T02:23:03.390
> 
> 标签：jquery, jqgrid

我正在尝试使用 jqgrid 很好地查看静态 json 文件，并且我是 javascript 的初学者。我制作了一个简化的文件开始，但是当我查看日志时，jqGrid 正在尝试在服务器上进行查询。是否可以将 jqGrid 与静态 json 一起使用？

我的测试文件：

[http://schwehr.org/NGDC_DEMs.json](http://schwehr.org/NGDC_DEMs.json)

我在日志中看到了这一点：

[http://schwehr.org/NGDC_DEMs.json?_search=false&nd=1344908237004&rows=20&page=1&sidx=&sord=asc](http://schwehr.org/NGDC_DEMs.json?_search=false&nd=1344908237004&rows=20&page=1&sidx=&sord=asc)

这是行不通的。是否可以仅在浏览器中轻松完成所有这些操作？

该文件真的很无聊：

```
[
    {
        "title": "Elfin Cove MHHW",
        "demid": 4230,
    },
    {
        "title": "Astoria V2",
        "demid": 4090,
    },
    {
        "title": "South Padre Island",
        "demid": 3984,
    },
] 
```

谢谢！-库尔特

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-14T02:46:46.640

解决这个问题的两种方法。

首先让你的json看起来像这样

```
var data = {
            "page": "1",
            "records": "3",
            "rows": [
                { "id": "83123a", Name: "Name 1"},//give your column names here
                { "id": "83432a", Name: "Name 3"},
                { "id": "83566a", Name: "Name 2" }
            ]
        }, 
```

现在使用使用数据类型：“jsonstring”和datastr：数据。如果您需要添加额外的参数 jsonReader: { repeatitems: false }。

第二种方法是使用数据类型：“本地”和数据：data.rows。在这种情况下，[localReader](http://www.trirand.com/jqgridwiki/doku.php?id=wiki%3aretrieving_data#array_data)将用于从 data.rows 数组中读取数据。默认 localReader 可以读取数据。

您的问题演示在[这里](http://www.ok-soft-gmbh.com/jqGrid/AddJsonData.htm)和[这里](http://www.ok-soft-gmbh.com/jqGrid/AddJsonData1.htm)。

# ios - 使用叠加图片拍摄照片

> ID：11944946
> 
> 赞同：4
> 
> 时间：2012-08-14T02:23:39.910
> 
> 标签：ios, camera, overlay

我正在尝试使用 iPhone 相机拍摄一张带有叠加图像的照片，但是在网上冲浪了几天后，我仍然找不到答案。如何才能做到这一点？我正在使用 Xcode 4.3.2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T03:39:57.307

我已经按照这里的例子[http://www.musicalgeometry.com/?p=1273](http://www.musicalgeometry.com/?p=1273)取得了非常好的结果。

将叠加层应用于最终捕获的图像也不应该那么难。

# asp.net-mvc - 在 MVC 3 Razor View 中使用 Html 辅助函数格式化表格

> ID：11944949
> 
> 赞同：0
> 
> 时间：2012-08-14T02:23:49.967
> 
> 标签：asp.net-mvc, vb.net, asp.net-mvc-3, razor, html-helper

使用以下内容：

*   MVC 3
*   VB.NET
*   RAZOR VIEW 引擎
*   Html 助手类

在我的应用程序中，我有一个发送到视图并显示的列表（字符串）。我正在尝试以不超过 8 列宽到多行长的表格格式进行显示。我已经编写了一个自定义帮助器类来处理这个问题，但是视图显示了带有电子邮件地址的原始 html 代码，但它没有呈现为带有行等的表格。任何解决此问题的想法。下面是帮助器类，模板，最后是视图。

```
Imports System.Runtime.CompilerServices
Public Module TableHelper
<Extension()> _
Public Function CreateEmailTable(ByVal helper As HtmlHelper, ByVal emaillist As List(Of String)) As MvcHtmlString
    Dim htmlDisplayer As String = Table()
    Dim counter As Integer = 0
    For Each item In emaillist
        If counter = 0 Then
            htmlDisplayer = htmlDisplayer + NRow()
        End If
        counter += 1
        If Not counter >= 8 Then
            htmlDisplayer = htmlDisplayer + Ntd(item)
        Else
            counter = 0
            htmlDisplayer = htmlDisplayer + CRow()
        End If
    Next
    htmlDisplayer = htmlDisplayer + CTable()
    Dim x As MvcHtmlString = MvcHtmlString.Create(htmlDisplayer)
    Return x
End Function
Public Function Table() As String
    Return String.Format("<table>")
End Function
Public Function CTable() As String
    Return String.Format("</table>")
End Function
Public Function NRow() As String
    Return String.Format("<tr>")
End Function
Public Function CRow() As String
    Return String.Format("</tr>")
End Function
Public Function Ntd(ByVal text As String) As String
    Return String.Format("<td>{0}</td>", text)
End Function
End Module 
```

模板视图是：

```
@ModelTYPE List(Of String)
@Html.CreateEmailTable(Model) 
```

最后的观点是：

```
Modeltype xxxxxxxxx.EmailsVM
@Code
ViewData("Title") = "Mass Emails Sent"
End Code
@Using Html.BeginForm
@<fieldset>
<p>
@Html.Partial("_EmailsVM", Model.failEmList)
</p>
</fieldset>
End Using 
```

这是我在浏览器中查看时显示的视图页面源代码的片段：

```
 &lt;table&gt;&lt;tr&gt;&lt;td&gt;xxxxxxxxx@yahoo.com; &lt;/td&gt;&lt;td&gt;xxxxxxxx@xxxxxxx.net; &lt;/td&gt;&lt;td&gt;xxxxx.xxxxxxxx@xxxxx; &lt;/td&gt;&lt;td&gt; 
```

可以看出，它的 html 标记正在失去浏览器接受的格式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T02:30:35.297

.NET 字符串默认为 HTML 编码。您可以使用`Html.Raw()`打印原始 HTML，或者让它返回一个`MvcHtmlString`，MVC 引擎知道它已经编码并且不应该再次编码。

参考：[MvcHtmlString 类 - MSDN](http://msdn.microsoft.com/en-us/library/system.web.mvc.mvchtmlstring.aspx)

# ruby-on-rails - 使用 fields_for 具有序列化属性的 Rails I18n

> ID：11944951
> 
> 赞同：5
> 
> 时间：2012-08-14T02:24:00.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3, internationalization

考虑这个设置：

```
#app/models/user.rb
class User > ActiveRecord::Base
  attr_accessible :login, :options
  serialize :options, OpenStruct
end

#app/views/users/_form.html.erb
form_for @user do |f|
  f.label :login
  f.fields_for :options, @user.options do |options|
    options.label :emailme
  end
end 

#config/locals/en.yml
  en:
    activerecord:
      attributes:
        user: 
          login: "User Name"
          options: 
            emailme: "Email Preference" 
```

我要解决的问题是能够本地化序列化属性“选项”的属性（：emailme）的标签标记。

我深入研究了rails源并发现问题是因为当我调用options.label时它期望有一个对象，但是没有对象，因为传递下来的对象名称是“user [options” ] 这不是一个有效的实例变量名。

请参阅[rails github 上 form_helper.rb 的第 1124 行](https://github.com/rails/rails/blob/3-2-stable/actionpack/lib/action_view/helpers/form_helper.rb#L1124)，它在其中检索对象。有一条评论甚至提到当 object_name 是 item[subobject] 时回退到 nil。

因此，当它创建实际标签[Line 1110 form_helper.rb](https://github.com/rails/rails/blob/3-2-stable/actionpack/lib/action_view/helpers/form_helper.rb#L1110)时，它默认为 method_name.humanize

有没有像样的方法来完成序列化属性的本地化？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T09:12:08.757

或者，我发现我可以像这样使用 i18n 助手（并且不必更改表单中的任何内容）：

```
 en:
   helpers:
   label:
    "user[options]":
       emailme: "Email Preference" 
```

虽然这仍然不包括验证消息......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T04:06:15.877

我认为您想创建自己的密钥并明确调用 I18n.translate ？

见[http://guides.rubyonrails.org/i18n.html](http://guides.rubyonrails.org/i18n.html)

```
# config/locals/en.yml
en:
  users:
    email_preference: "Email Preference"

# app/views/users/_form.html.erb
form_for @user do |f|
  f.label :login
  f.fields_for :options, @user.options do |options|
    options.label :emailme, I18n.translate('users.email_preference')
  end
end 
```

警告：未经测试的代码

也可以使用您现有的配置？`I18n.translate('activerecord.attributes.user.options.emailme')`

您也可以将本地文件中的键“范围”到操作和控制器

# javascript - cakephp 访问不在模型数据数组上的输入

> ID：11944952
> 
> 赞同：0
> 
> 时间：2012-08-14T02:24:22.620
> 
> 标签：javascript, cakephp, input

为了在我的视图上处理一个字符串，我添加了一个用户用文本填充的输入。（不涉及服务器或上传）。此输入不对应任何数据字段。

```
<?php echo $this->Form->input('fullPathInput', array('label' => 'Copied Path', 'id' => 'fullPath' , 'onchange' => "assignPath();")); ?> 
```

我需要检查此输入是否为空。如何访问输入？正如预期的那样，它不在

```
$this->data['Model']['field']; 
```

大批。

打印

```
print_r($this->request->data); 
```

并且无处可去。

出于另一个目的，我已经能够通过 JavaScript 访问它，但我想这样做：

```
$thevalue = $this->data['myInputName'];
if (empty($thevalue)) {
    --actions--
} else {
    -- actions --
} 
```

您能帮助了解如何访问该输入吗？...一个简单的 JavaScript 函数可以告诉我我的输入是否为空，但是我需要在上面几行的条件下使用来自 js 的布尔值。你知道我会怎么做吗？

非常感谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T04:14:52.587

您可以尝试使用以下代码：

```
<?php echo $this->Form->input('ModelName.fullPathInput', array('label' => 'Copied Path', 'id' => 'fullPath' , 'value' => $thevalue, 'onchange' => "assignPath();")); ?> 
```

`$thevalue`是在调用 javascript assignPath() 函数之前在初始级别保存输入值的变量。

# ruby-on-rails - 如何在`中实现MVC架构 /lib` 目录？

> ID：11944953
> 
> 赞同：0
> 
> 时间：2012-08-14T02:24:25.800
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, model-view-controller, directory

我正在使用 Ruby on Rails 3.2.2。在`<ROOT_APP>/lib/my_plugin`目录中我开发了一个“插件”，现在我正在考虑：

*   实现`<ROOT_APP>/lib/my_plugin`目录中的MCV（Model-Control-View）架构；
*   使这些相关的控制器、助手等可用于我的应用程序（在需要时）。

有可能做到吗？如果是这样，怎么做？你有什么建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:31:37.463

如果你需要控制器、模型和视图，你应该考虑制作一个可挂载的应用程序。设计是一个很好的宝石，可以查看如何完成此操作的示例。这比在 lib 中复制 Rails 应用程序的整个结构要简单得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:33:39.757

我建议与 jbarket 一起不要将插件构建到应用程序中。相反，将其构建为引擎（遵循[有关引擎的本指南](http://guides.rubyonrails.org/engines.html)）并将其维护为您的应用程序依赖的独立实体`Gemfile.`

# facebook - 服务器端 OAuth 2.0

> ID：11944957
> 
> 赞同：0
> 
> 时间：2012-08-14T02:24:45.957
> 
> 标签：facebook, oauth-2.0

我试图弄清楚如何使用 Facebooks OAuth 2.0 服务器端。我已经按照步骤 1 重定向了用户。

第 2 步是用户登录。

第 3 步，他们通过 facebook 生成的一些独特代码被重定向回我的 uri。这就是我卡住的地方，因为第 4 部分希望我将此代码从我的服务器发送到 facebook 以获得用户访问令牌。

如何将此唯一代码发送到我的服务器？我想有一些 javascript 来解析它并通过套接字将它发送到我的服务器吗？有没有更简单的方法？抱歉，如果这是一个菜鸟问题，我之前没有处理过 url 中的数据。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-14T08:52:47.297

> 第 3 步，他们通过 facebook 生成的一些独特代码被重定向回我的 uri。这就是我卡住的地方，因为第 4 部分希望我将此代码从我的服务器发送到 facebook 以获得用户访问令牌。
> 
> 如何将此唯一代码发送到我的服务器？

您已经拥有它，因为它是第 3 步的一部分，代码作为 GET 参数传递给您的脚本。

> 我想有一些 javascript 来解析它并通过套接字将它发送到我的服务器吗？

用于服务器端身份验证的客户端 JavaScript？不，当然不是。

如果您不知道如何在您使用的服务器端语言中访问查询字符串/GET 参数，请查阅相关文档。如果您不知道如何发出 HTTP 请求以及如何解释响应，请同时阅读。

# django - 尝试在 EC2 上运行 django/nginx 时，所有 url 都指向 /

> ID：11944958
> 
> 赞同：0
> 
> 时间：2012-08-14T02:24:49.117
> 
> 标签：django, nginx, amazon-ec2, fastcgi

**问题**：所有网址都转到我的登录页面，包括基本的“/about”和“/contact”

**示例**：网址 www.mydomain.com 完美运行（加载 css 等），但 www.mydomain.com/about 会转到 www.mydomain.com，即使它在地址栏中显示 www.mydomain.com/about。

**问题**：如何配置 nginx 以简单地将所有内容传递给 django？

我正在将使用 django 在本地编写的网站部署到 EC2 实例。我可以访问我的默认登录页面，但我无法访问任何其他页面。我有一个带有 /about、/contact 映射的基本站点，但是当我访问它们时，我只是被重定向到我的登录页面。我很确定这与我的 nginx 配置有关，但是在查看了基本的 nginx 教程之后，我认为我没有掌握我所缺少的东西。

这是我的 nginx 配置文件...

```
server {
  listen 80;
  server_name mydomain.com;
  access_log /var/log/nginx/sample_project.access.log;
  error_log /var/log/nginx/sample_project.error.log;

  # https://docs.djangoproject.com/en/dev/howto/static-files/#serving-static-files-in-production
  location /static/ { # STATIC_URL
      alias /home/ubuntu/path/to/static/; # STATIC_ROOT
      expires 30d;
  }

  location /media/ { # MEDIA_URL
      alias /home/ubuntu/path/to/static/; # MEDIA_ROOT
      expires 30d;
  }

  # I have also tried 'location ~* ^(.*?)$' and it had the same effect
  location / {
      include fastcgi_params;
      fastcgi_pass 127.0.0.1:8080;
  } 
} 
```

当我阅读 nginx 教程/等时，我可以理解它可以做很多事情，但我更愿意通过 django 处理所有传入的 url。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-14T06:31:57.550

[我在 EC2 上使用Gunicorn + Nginx](http://gunicorn.org/deploy.html)配置了我的 Django 站点，它对我来说很好用。步骤在[这里](https://stackoverflow.com/questions/6753046/setting-up-django-with-nginx-on-ec2/10752504#10752504)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-15T15:01:26.573

我刚刚使用了这个 nginx conf 文件，它开始正常工作。我认为这可能是在 location 元素中添加了一个参数，起到了作用。

[https://code.djangoproject.com/wiki/ServerArrangements](https://code.djangoproject.com/wiki/ServerArrangements)

# emacs - 无法让 Slime 和 Swank 在 os x 的 emacs 中使用 Clojure

> ID：11944966
> 
> 赞同：4
> 
> 时间：2012-08-14T02:26:10.387
> 
> 标签：emacs, clojure, leiningen, slime, swank

只是试图让一个非常基本的粘液和 clojure 安装工作，但是当我运行 clojure-jack-in 时，swank 一直失败

我首先得到了 lein，然后将以下内容放入我的 .emacs（对于 24.1 版）：

```
(add-to-list 'load-path "~/.emacs.d/packages/")
(require 'package) 
(add-to-list 'package-archives '("marmalade" . "http://marmalade-repo.org/packages/")) 
(package-initialize) 
```

然后我安装了 clojure-mode 和 paredit。

我的 ~/.lein/profiles.clj

```
{:user {:plugins [[lein-swank "1.4.4"]]
    :injections [(use '[clojure.repl :only [doc]])]}} 
```

当我打开一个 clj 文件并运行 clojure-jack-in 时，swank 给了我

```
slime-repl-79b38c83.el:122:1:Error: (slime-connection-output-buffer) is not a valid place expression 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T19:56:17.230

您是否通过果酱或其他方法安装了粘液？如果是，那么这可能就是问题所在。swank 与 CVS 版本的 slime 不兼容，并安装了它自己的 slime 包。（请注意，您*确实*需要果酱中的粘液-repl）。检查您的`~/.emacs.d/elpa`目录以及相应的系统级包目录，以确保您没有在某处放置错误版本。

如果你确信你只有一个版本的 slime 并且它是正确的版本，你可以尝试从项目顶级目录中的 shell 启动 swank

```
$ lein swank 
```

然后从emacs连接到那个swank实例`M-x slime-connect`，如果这不起作用，你至少应该得到额外的错误来说明你的问题

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-14T04:28:57.580

你用的是哪个版本的lein？我相信 lein-swank 1.4.4 旨在与 lein2 一起使用。如果你使用 lein1，你需要 lein-swank 1.4.2

# jquery - 只有一半的 jQuery 动画工作。我似乎可以让所有这些工作

> ID：11944968
> 
> 赞同：0
> 
> 时间：2012-08-14T02:26:24.007
> 
> 标签：jquery, animation, jquery-animate

所以我已经让一半的代码工作了，但我似乎无法让其余的代码继续工作。

我可以让 div 淡入，但不能让图像移动。

```
var mouse_is_inside = false;

$(document).ready(function() {
$(".how_btn").click(function() {
    var howWorks = $("#jhow_works");
    if (howWorks.is(":visible"))
        howWorks.fadeOut("fast");
    else
        howWorks.fadeIn("fast");
    return false;

    $("#spot-1").animate({ 
    marginLeft: "+=40px",
}, 2000 );

});

$("#jhow_works").hover(function(){ 
    mouse_is_inside=true; 
}, function(){ 
    mouse_is_inside=false; 
});

$("body").click(function(){
    if(! mouse_is_inside) $("#jhow_works").fadeOut("fast");
});
}); 
```

的CSS

```
#jhow_works {
display:none;
position:absolute;
width:440px;
margin:310px 150px 0 360px;
}

img#spot-1 {
position: absolute;
margin-left: 55px;
margin-top: 20px;
} 
```

html

```
 <div id="jhow_works">
    <div id="how_wrapper">
        <img id="spot-1" src="../images/spot.png" alt="" >
    </div>
</div>

        <div id="how_it_works">
        <div id="logo_how"><a class="how_btn"  href="..."><img class="how_button" src="../images/how_it_works_logo.png" alt="How it works!" ></a></div>
        <div id="text_how"><a class="big how_btn"  href="..."><strong class="big_bold_main">How</strong>&nbsp;it Works</a></div>
    </div> 
```

我必须在这里做一些愚蠢的事情。我很感激任何帮助

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T02:32:36.403

将您的 return 语句移动到 click 函数的末尾。

```
$(".how_btn").click(function() {
  var howWorks = $("#jhow_works");
  if (howWorks.is(":visible"))
    howWorks.fadeOut("fast");
  else
    howWorks.fadeIn("fast");

  $("#spot-1").animate({ 
  marginLeft: "+=40px"}, 2000 );

  return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-14T02:44:15.797

我将使用与 Heather 上面提供的代码相同的代码进行回答，因此我将发布一个链接，指向一些有关`return false;`. 此信息由另一个 Stack Overflow 用户在另一个问题[What does "return false;"中提供 做？](https://stackoverflow.com/questions/10729198/what-does-return-false-do)

希望这可以帮助某人。

# actionscript-3 - 如何通过 php 在服务器上保存字节数组？

> ID：11944973
> 
> 赞同：2
> 
> 时间：2012-08-14T02:26:40.837
> 
> 标签：actionscript-3

我使用的是简单的 as3+php，中间没有 FMS 之类的。我正在制作一个视频录制应用程序，我可以捕获帧并将它们转换为 flv 编码的字节数组。但是当我尝试将其保存在服务器上时，就会出现问题。如果我通过 base64 编码将 bytearray 转换为字符串，然后将该字符串发送到服务器，一切正常，但问题是由于它是一个视频文件，它可能非常大，比如 20mb 左右，因此需要很长的时间来编码然后上传它，而且通常在编码过程中会发生脚本超时。为了让事情变得更快，我试图直接发送字节数组，但我的萤火虫网络面板显示正在发送的数据约为 20-46 字节。请告诉我我做错了什么。

```
//var encoded_str = Base64.encodeByteArray(_baFlvEncoder.byteArray);
            //Handle Upload
            /*var url_data:URLVariables = new URLVariables();
            url_data.data = _baFlvEncoder.byteArray;*/
            var url_ref:URLRequest = new URLRequest("save_vid.php");

            url_ref.contentType = 'application/octet-stream';
            url_ref.data = _baFlvEncoder.byteArray;//url_data;
            url_ref.method = URLRequestMethod.POST;

            var urlLoader:URLLoader = new URLLoader();

            // just making sure the server knows we are sending data in proper format
            //urlLoader.dataFormat = URLLoaderDataFormat.TEXT;
            urlLoader.dataFormat = URLLoaderDataFormat.BINARY;

            try {
                urlLoader.load( url_ref );
            } catch (e:Error) {
                trace(e);
            } 
```

还有我的 PHP 代码：

```
<?php
echo 'Data:<pre>';
print_r($_POST);
echo '</pre>';
//$decodedData= base64_decode($GLOBALS[ 'HTTP_RAW_POST_DATA' ]);
//file_put_contents("test.flv",$decodedData);
file_put_contents("test.flv",$GLOBALS[ 'HTTP_RAW_POST_DATA' ]);
?> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T02:40:51.710

在[`URLRequest.data`文档](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/flash/net/URLRequest.html#data)中，它指定了直接使用 ByteArray 的选项。

这里，

```
urlLoader.data = _baFlvEncoder.byteArray; 
```

然后，您可以跳过`URLVariables`对象，该对象依赖于将传输的数据编码为`application/x-www-form-urlencoded`，这不太适合二进制数据（即使处理得当，也可能不是）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-14T02:50:34.937

也许您应该将其用于原始数据输入：

```
$input = file_get_contents("php://input"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-01T15:18:48.627

几天来，我遇到了类似的问题，并发布了只有 base64 编码/解码才能解决这个问题。类似的症状只是几个字节等等。所以只需进入base64“方向”来解决这个问题

# ms-access - 对字段应用查找会删除字段中已有的值 (MS Access 2010)

> ID：11944976
> 
> 赞同：1
> 
> 时间：2012-08-14T02:27:15.510
> 
> 标签：ms-access, lookup

我遇到了一个出色的查找向导教程：

[http://www.jegsworks.com/lessons/databases/basics/step-lookupwizard.htm](http://www.jegsworks.com/lessons/databases/basics/step-lookupwizard.htm)

但是我遇到了一个困难的情况，因为我的表已经在我正在应用查找的字段中有数据。这是因为我有一个要从 Excel 导入的表。这已经包含在 record_created_by 字段中创建每条记录的工作人员的姓名。导入后，我想应用查找以从 tblStaff_members 中检索员工姓名值。这将使以后的数据输入更容易，用户只需从列表中进行选择。但是，当我应用查找时，Access 想要删除已在我导入的表中的字段中的值。

这意味着我必须使用其中的数据更新该字段。我可以使用查找下拉菜单手动执行此操作，但是对于 500 多条记录，这将需要很长时间。

我想到的一种方法是使用更新查询，因为该字段目前只有一个值 - 我的名字（这是一个跟踪创建每条记录的字段，值可能会随着其他工作人员的更新而改变桌子）。但是，我发现更新查询不适用于已应用查找的字段。

有什么办法摆脱这个困难？

会

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-15T18:57:55.863

The only way I have been able to get around this is to create another data field (column) and create the lookup in the new field. By using the drop down selection duplicate the records from the original field. When you are done delete the original field.

Time consuming... but it works.

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-10-28T02:23:08.130

[我在这里](https://stackoverflow.com/questions/19625285/create-a-new-lookup-table-where-data-already-exists-in-ms-access-2013/19625553?noredirect=1#comment29136787_19625553)问了一个类似的问题，但后来我发现了你的问题。在回答我的问题时，我发现了可能对您有所帮助的步骤，因此我在此提供它们以供我自己参考和考虑。（我使用的是access 2013，所以其他版本的步骤可能会有所不同）。

步骤 1\. 从 excel 导入数据并根据需要设置您的 cols。步骤 2\. 运行以下查询

```
SELECT DISTINCT [OldTableName.FieldName] INTO [NewTableName]
FROM [OldTableName]; 
```

第 3 步。当它为您提供您想要的结果时，将其作为 Make Table 查询运行，它将创建包含您需要的数据的表。

第 4 步。创建新表后，进入其中并执行您需要的操作。就我个人而言，我什么也没做，因为我不想将这些数据存储为数字，但出于各种原因，有些人可能会这样做。因此，由于数据是唯一的，我只需将新表中的文本数据设置为主键，并根据需要设置一些其他属性并将其保留。

第 5 步。我回到我的旧表并使用查找向导创建关系和链接，然后根据需要设置属性。还有其他推荐的设置组合框的方法，您可以根据需要使用它们，但这足以满足我的需求。

我希望这是有帮助的。

# python - 从 re.sub 调用函数

> ID：11944978
> 
> 赞同：15
> 
> 时间：2012-08-14T02:27:21.563
> 
> 标签：python, regex, windows, function

这是一个简单的例子：

```
import re

math='<m>3+5</m>'
print re.sub(r'<(.)>(\d+?)\+(\d+?)</\1>', int(r'\2') + int(r'\3'), math) 
```

它给了我这个错误：

```
ValueError: invalid literal for int() with base 10: '\\2' 
```

它发送`\\2` 而不是`3`and `5`。

为什么？我该如何解决？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-14T02:31:56.420

如果你想使用一个函数，`re.sub`你需要传递一个*函数*，而不是一个表达式。如此[处](http://docs.python.org/library/re.html#re.sub)所述，您的函数应将匹配对象作为参数并返回替换字符串。您可以使用常用`.group(n)`方法等访问组。一个例子：

```
re.sub("(a+)(b+)", lambda match: "{0} as and {1} bs ".format(
    len(match.group(1)), len(match.group(2))
), "aaabbaabbbaaaabb")
# Output is '3 as and 2 bs 2 as and 3 bs 4 as and 2 bs ' 
```

请注意，该函数应返回字符串（因为它们将被放回原始字符串中）。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-08-14T02:46:32.013

您需要使用 lambda 函数。

```
print re.sub(r'<(.)>(\d+?)\+(\d+?)</\1>', lambda m: str(int(m.group(2)) + int(m.group(3))), math) 
```

# jquery - jquery定位新元素的位置排序

> ID：11944989
> 
> 赞同：0
> 
> 时间：2012-08-14T02:28:56.493
> 
> 标签：jquery, sorting

我的页面上有以下元素：

```
<div class="feedItem" data-moddate="1344738920" data-id="59920"></div>
<div class="feedItem" data-moddate="1344725719" data-id="59897"></div>
<div class="feedItem" data-moddate="1344722122" data-id="59876"></div>
<div class="feedItem" data-moddate="1344718218" data-id="59856"></div>
<div class="feedItem" data-moddate="1344716717" data-id="59854"></div> 
```

当我动态插入一个新项目时，我想根据“moddate”数据值将它放置在正确的位置。

获取元素需要去的位置很重要，因为我计划在每个新元素到达时做一些动画。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-14T03:04:56.530

```
var i = 0;
var modDate = someTimestamp
$(".feedItem").each(function()
{
    if(modDate < $(this).data('moddate'))
    {
        return;
    }
    i++;
});
//The new element should be inserted AFTER $(".feedItem").eq(i); 
```

# javascript - 在 jquery 选项卡中查找 span 标签并返回该索引

> ID：11944996
> 
> 赞同：2
> 
> 时间：2012-08-14T02:29:43.033
> 
> 标签：javascript, jquery, jquery-ui

我正在使用 jquery 选项卡 UI 来创建我的选项卡。我在每个选项卡中隐藏了具有唯一值的 span 标签。我想找到具有特定标签索引值的跨度标签。

例子：：

如果有两个选项卡 tab1 和 tab2。在 tab1 中，我隐藏值“1”，在 tab 2 中隐藏值“2”。现在我想在所有选项卡中搜索并找到 1 并返回索引号，在这种情况下它将为 0。然后它将打开索引为“0”的选项卡。

我可以使用 jquery 包含函数来搜索 thorugh 列表，但我只是想知道找到匹配项时如何返回选项卡的特定索引。

任何帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-14T02:37:45.637

但基本上你可以使用`$.each()`方法（[**jQuery .each() API**）](http://api.jquery.com/each/)。在函数参数中，`i`代表您可以循环的索引。

```
$('[id^="tab"]').each(function (i, el) {
    $(this).append(' -- Index: ' + i);
}); 
```

[**jsFiddle 演示**](http://jsfiddle.net/kNNKS/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T02:58:52.193

```
$('[id^="tab"]').click(function(){

alert($(this).find('span').text());

});

$('[id^="tab"]').each(function (i, el) {

       var span_val = $(this).find('span').text(); 

       if(span_val==1)
       {
          $('[id^="tab"]').eq(span_val).trigger('click');
       }  

}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-14T05:37:25.993

如果每个选项卡只有一个跨度，您可以找到这样的索引（不是最短的方法，但应该可以）：

```
var tabMenu = $('#yourTabMenuId');
var allTabMenuSpans = tabMenu.find('span');
var spanMatch = allTabMenuSpans.filter(":contains('1')");
var desiredIndex = allTabMenuSpans.index(spanMatch);
alert('your index is: ' + desiredIndex); 
```

或者您可以查找jquery的[index() 方法并以您的方式实现它。](http://api.jquery.com/index/)

# python - 异常子类的类型的 args 属性从字符串更改为元组

> ID：11944998
> 
> 赞同：5
> 
> 时间：2012-08-14T02:30:13.997
> 
> 标签：python

这发生在 python2.6 和 python3 上：

```
class Error(Exception):
    def __init__(self, args):
            print(type(args))
            print(type(self.args)) # From BaseException
            self.args = args
            print(type(self.args))

Error("foo") 
```

这导致：

```
<type 'str'>
<type 'tuple'>
<type 'tuple'>
Error('f', 'o', 'o') 
```

出于某种原因， args 属性被强制转换为元组。它在 C 中定义的事实可能与它有关吗？[https://github.com/python/cpython/blob/master/Objects/exceptions.c](https://github.com/python/cpython/blob/master/Objects/exceptions.c)

args 参数的名称不相关。将其更改为“a”会导致相同的行为，只要将其分配给 self.args。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-14T02:45:29.153

查看您链接到的代码，为“args”属性定义了一个设置器。寻找 BaseException_set_args - 它被设置（在链接代码的其他地方）作为 args 的设置器。因此，当您编写 时`self.args = args`，您实际上是在调用函数 BaseException_set_args，并将其`args`作为参数。

如果然后查看 BaseException_set_args，它会将参数强制转换为元组。如果您尝试将 self.args 设置为无法转换为元组的内容（例如 try `Error(23)`），您将收到 TypeError。