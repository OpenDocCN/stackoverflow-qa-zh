# StackOverflow 问答 11829000-11829999

# linux - 如何将 scsi 写入命令发送到内核模块中的 SSD

> ID：11829003
> 
> 赞同：0
> 
> 时间：2012-08-06T13:11:33.517
> 
> 标签：linux, solid-state-drive, scsi

我尝试在 SSD 上尽可能快地写入。同步写入非常重要，因为我们需要知道数据是否是断电安全写入的。

我考虑过自己发送 scsi 命令，以避免大多数 Linux 内核块 IO 堆栈（在我们的用例中不需要）。为了避免内核进入/退出开销，它应该是一个内核模块。

*   您知道如何将 scsi 写入发送到设备的示例吗？
*   你将如何实现这一点？
*   或者为什么 scsi 层是错误的入口点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T02:29:19.917

对设备的典型访问是使用 Block IO Stack，如果您打算避开该 IO 堆栈，而直接写入设备，则需要在 Linux 上为您的 SCSI HBA（连接 SSD 的）编写自己的低级驱动程序.

更重要的是，我认为 Linux Kernel Block IO Stack 不会对你的测试产生太大影响。

# apache - CodeIgniter index.php 删除 htaccess 导致错误重定向

> ID：11829007
> 
> 赞同：0
> 
> 时间：2012-08-06T13:12:00.950
> 
> 标签：apache, .htaccess, codeigniter

我正在使用以下 htaccess 规则，该规则在整个互联网上都建议用于删除 codeigniter url 中的 index.php。还有一些我在上面添加的重定向规则。

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

问题是：我收到了一些奇怪的 http 请求，我认为这是由上面的 htaccess 规则引起的。这里是其中的一些 ：

[https://www.sitename.com/index.php/favicon.ico](https://www.sitename.com/index.php/favicon.ico) 应该是 .com/favicon.ico

[https://www.sitename.com/index.php/scripts/jquery.js](https://www.sitename.com/index.php/scripts/jquery.js) 应该是 .com/public/jquery.js **作为旁注我使用基本标签将资产重定向到 /public/**

奇怪的是我找不到第二次重定向发生的位置我测试了整个站点并且 javascript 和 css 文件正确加载

我通过让我的控制器忽略这些请求来处理此重定向，但不久前发生了一个奇怪的错误。我在这里问： [https ://stackoverflow.com/questions/11775849/htaccess-didnt-work-until-renaming-and-then-renaming-back](https://stackoverflow.com/questions/11775849/htaccess-didnt-work-until-renaming-and-then-renaming-back)

我的猜测是，即使我忽略了错误重定向的请求，托管公司也会收到它们，并且可能给他们造成了一些麻烦，这导致了我在托管公司维护的链接问题中共享的问题。

无论如何，问题是： **我怎样才能使 htaccess 规则只重定向最后没有文件扩展名的请求？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:19:10.427

您在该行之前缺少`REQUEST_FILENAME`一行：

```
 RewriteCond $1 !^(index\.php|assets|something|fav\.ico|robots\.txt) 
```

您可以修改它以满足您的需要。我在`assets`文件夹中有我的 JS/CSS 等，所以它不受重写的影响。

所以完整的`.htaccess`看起来像这样：

```
RewriteEngine On
RewriteBase /

RewriteCond %{HTTP_HOST} !^www\.
RewriteRule ^(.*)$ https://www.%{HTTP_HOST}/$1 [R=301,L]

RewriteCond $1 !^(index\.php|assets|something|fav\.ico|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

# c++ - gcc 4.7 关于可变参数模板/ decltype /std::forward

> ID：11829008
> 
> 赞同：1
> 
> 时间：2012-08-06T13:12:03.473
> 
> 标签：c++, c++11, decltype

```
 char foo()
    {
         std::cout<<"foo()"<<std::endl;
         return 'c';
    }              
    void foo(char &&i)
    {
         std::cout<<"foo(char &&i)"<<std::endl;
    }
    struct pipe {};
    template<class OP>
    struct Flow;
    template<>
    struct Flow<pipe> {
         template<class L,class R>
         static  auto apply(L&& l,R &&r)->decltype(r(std::forward<L>(l))) {
              return r(std::forward<L>(l));
         }
    };
    template<class L,class R,class E>
    struct Pipe;
    template<class F,class...ARGS>
    auto eval(F& f,ARGS&&... arg)->decltype(f(std::forward<ARGS>(arg)...))
    {
        return f(std::forward<ARGS>(arg)...);
    }
    template<class L,class R,class E,class...ARGS>
    auto eval(Pipe<L,R,E>&f,ARGS&&... arg)->decltype(Flow<E>::apply(eval(f.lhs,std::forward<ARGS>(arg)...),f.rhs))
    {
        return Flow<E>::apply(eval(f.lhs,std::forward<ARGS>(arg)...),f.rhs);
    }
    template<class L,class R,class E>
    struct Pipe {
         L lhs;
         R rhs;
         Pipe(L &l,R& r):lhs(l),rhs(r) {
         }
          template<class...ARGS>
           auto operator()(ARGS&&... arg)->decltype(eval<L,R,E >(*this,std::forward<ARGS>(arg)...)) {
                return eval<L,R,E >(*this,std::forward<ARGS>(arg)...);
           }
    };

     void streamtest()
    {

        void (*foo1)(char &&)=foo;
        void (*foo2)(int ,int ,short )=foo;
        char (*foo3)()=foo;

        Pipe<char(*)(),void(*)(char&&),pipe> pp(foo3,foo1);
        pp(1);

    } 
```

我想为函数传输编写一个管道库。但是错误让我感到困惑：

```
 \FEstream.cpp: In function 'void streamtest()':
 \FEstream.cpp:117:9: error: no match for call to '(Pipe<char (*)(), void (*)(char&&), pipe>) (int)'
 \FEstream.cpp:98:8: note: candidate is:
 \FEstream.cpp:104:13: note: template<class ... ARGS> decltype (eval<L, R, E>((* this), (forward<ARGS>)(Pipe::operator()::arg)...)) Pipe::operator()(ARGS&& ...) [with ARGS = {ARGS ...}; L = char (*)(); R = void (*)(char&&); E = pipe]
 \FEstream.cpp:104:13: note:   template argument deduction/substitution failed:
 \FEstream.cpp: In substitution of 'template<class ... ARGS> decltype (eval<L, R, E>((* this), (forward<ARGS>)(Pipe::operator()::arg)...)) Pipe::operator()(ARGS&& ...) [with ARGS = {ARGS ...}; L = char (*)(); R = void (*)(char&&); E = pipe] [with ARGS = {int}]':
 \FEstream.cpp:117:9:   required from here
 \FEstream.cpp:104:13: error: no matching function for call to 'eval(Pipe<char (*)(), void (*)(char&&), pipe>&, int)'
 \FEstream.cpp:104:13: note: candidates are:
 \FEstream.cpp:88:6: note: template<class F, class ... ARGS> decltype (f((forward<ARGS>)(eval::arg)...)) eval(F&, ARGS&& ...)
 \FEstream.cpp:88:6: note:   template argument deduction/substitution failed:
 \FEstream.cpp:104:13: note:   cannot convert '*(Pipe<char (*)(), void (*)(char&&), pipe>*)this' (type 'Pipe<char (*)(), void (*)(char&&), pipe>') to type 'char (*&)()'
 \FEstream.cpp:93:6: note: template<class L, class R, class E, class ... ARGS> decltype (Flow<E>::apply(eval(f.lhs, (forward<ARGS>)(eval::arg)...), f.rhs)) eval(Pipe<L, R, E>&, ARGS&& ...)
 \FEstream.cpp:93:6: note:   template argument deduction/substitution failed:
 \FEstream.cpp: In substitution of 'template<class L, class R, class E, class ... ARGS> decltype (Flow<E>::apply(eval(f.lhs, (forward<ARGS>)(arg)...), f.rhs)) eval(Pipe<L, R, E>&, ARGS&& ...) [with L = char (*)(); R = void (*)(char&&); E = pipe; ARGS = {int}]':
 \FEstream.cpp:104:13:   required by substitution of 'template<class ... ARGS> decltype (eval<L, R, E>((* this), (forward<ARGS>)(Pipe::operator()::arg)...)) Pipe::operator()(ARGS&& ...) [with ARGS = {ARGS ...}; L = char (*)(); R = void (*)(char&&); E = pipe] [with ARGS = {int}]'
 \FEstream.cpp:117:9:   required from here
 \FEstream.cpp:93:6: error: no matching function for call to 'eval(char (*&)(), int)'
 \FEstream.cpp:93:6: note: candidate is:
 \FEstream.cpp:88:6: note: template<class F, class ... ARGS> decltype (f((forward<ARGS>)(eval::arg)...)) eval(F&, ARGS&& ...)
 \FEstream.cpp:88:6: note:   template argument deduction/substitution failed:
 \FEstream.cpp: In substitution of 'template<class F, class ... ARGS> decltype (f((forward<ARGS>)(arg)...)) eval(F&, ARGS&& ...) [with F = char (*)(); ARGS = {int}]':
 \FEstream.cpp:93:6:   required by substitution of 'template<class L, class R, class E, class ... ARGS> decltype (Flow<E>::apply(eval(f.lhs, (forward<ARGS>)(eval::arg)...), f.rhs)) eval(Pipe<L, R, E>&, ARGS&& ...) [with L = char (*)(); R = void (*)(char&&); E = pipe; ARGS = {int}]'
 \FEstream.cpp:104:13:   required by substitution of 'template<class ... ARGS> decltype (eval<L, R, E>((* this), (forward<ARGS>)(Pipe::operator()::arg)...)) Pipe::operator()(ARGS&& ...) [with ARGS = {ARGS ...}; L = char (*)(); R = void (*)(char&&); E = pipe] [with ARGS = {int}]'
 \FEstream.cpp:117:9:   required from here
 \FEstream.cpp:88:6: error: too many arguments to function
Process terminated with status 1 (0 minutes, 0 seconds) 
```

发生了什么事？是我的错误，还是 gcc 不符合 C++11？

///////////////////////////////////////// ///////////////////////////////////

感谢 Dave S。但是，代码只是简化。事实上，我使用 templateEval::eval：

```
template<class L,class R,class E>
struct Pipe;

template<class F>
struct Eval {
     template<class...ARGS>
     static auto eval(F&f,ARGS&&... arg)->decltype(f(std::forward<ARGS>(arg)...)) {
          return f(std::forward<ARGS>(arg)...);
     }
};
template<class L,class R,class E>
struct Eval<Pipe<L,R,E> > {
     static auto eval(Pipe<L,R,E>&f)->decltype(Flow<E>::apply(f.lhs,f.rhs)) {
          return Flow<E>::apply(f.lhs,f.rhs);
     }
     template<class...ARGS>
     static void eval(Pipe<L,R,E>&f,ARGS&&...arg) {
          static_assert(!std::is_same<E,pipe>::value,
                        "multiple input for expression\nsample: auto expr=wrap(foo1)<var1|foo2 ;call expr(var2) instead of expr()");
     }
};
template<class L,class R>
struct Eval<Pipe<L,R,pipe> > {
     template<class...ARGS>
     static auto eval(Pipe<L,R,pipe>&f,ARGS&&... arg)->decltype(Flow<pipe>::apply(Eval<L>::eval(f.lhs,std::forward<ARGS>(arg)...),f.rhs)) {
          return Flow<pipe>::apply(Eval<L>::eval(f.lhs,std::forward<ARGS>(arg)...),f.rhs);
     }
};
template<class L,class R,class E>
struct Pipe {
     L lhs;
     R rhs;
     Pipe(L &l,R& r):lhs(l),rhs(r) {
     }
  template<class...ARGS>
   auto operator()(ARGS&&... arg)->decltype(Eval<Pipe>::eval(*this,std::forward<ARGS>(arg)...)) {
        return Eval<Pipe>::eval(*this,std::forward<ARGS>(arg)...);
   }
};

         void streamtest()
        {

            void (*foo1)(char &&)=foo;
            void (*foo2)(int ,int ,short )=foo;
            char (*foo3)()=foo;

            Pipe<char(*)(),void(*)(char&&),pipe> pp(foo3,foo1);
             //pp(); //no call!
        } 
```

错误是：

*   FEstream.cpp：在“struct Eval >”的实例化中：
*   FEstream.cpp:121:9: 需要来自“结构管道”
*   FEstream.cpp:134:45：从这里需要
*   FEstream.cpp:110:18：错误：无效使用不完整类型“结构管道”

*   FEstream.cpp:115:8: 错误: 'struct Pipe void (*)(char&&), pipe>' 的声明

*   FEstream.cpp:110:18：错误：无效使用不完整类型“结构管道”
*   FEstream.cpp:115:8: 错误: 'struct Pipe void (*)(char&&), pipe>' 的声明

进程以状态 1 终止（0 分钟，0 秒）6 个错误，0 个警告

Pipe::operator()(ARGS&&... arg) 是一个模板成员函数。为什么我声明变量 Pipe(pp) 导致错误？它不应该被实例化，因为我没有使用它`enter code here`

* * *

有人吗？当管道使用 eval 函数时，我忘记了一个状态

```
template<class...ARGS>
   auto operator()(ARGS&&... arg)->decltype(eval(*this,std::forward<ARGS>(arg)...)) {
        return eval(*this,std::forward<ARGS>(arg)...);
   } 
```

不是

```
 template<class...ARGS>
   auto operator()(ARGS&&... arg)->decltype(eval<L,R,E>(*this,std::forward<ARGS>(arg)...)) {
        return eval<L,R,E>(*this,std::forward<ARGS>(arg)...);
   } 
```

会出现类似 reece 的错误：模板实例化深度超过最大值 900 .....

似乎是选择 Eval(F&.... 而不是 eval(Pipe&f..... 当不指定模板参数时

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:35:12.603

由于调用链中某处的参数不匹配，它遇到了麻烦。因此，我们可以手动进行查找问题。

`Pipe<char(*)(),void(*)(char&&),pipe> pp(foo3,foo1);`正在使用 foo3，它将 0 个参数作为它的`L`，而 foo1 将一个 char rvalue-reference 作为`R`。并且`E`是你的标记结构`pipe`

当使用 int 1 调用时。

`pp(1)`调用`eval<L,R,E>(*this, 1)`，而后者又调用

`Flow<E>::apply(eval(foo3,1),foo1)`.

首先，调用内部 eval。这试图确定 的 declval `foo3(1)`，但是，foo3 被声明为采用 0 个参数。这会导致编译失败，从而导致您得到替换失败。

编辑：对于更改后的问题，您的问题现在是您正在创建`Eval`for的专业化`Pipe`，但`Eval`正在尝试使用`Pipe`其返回声明中的字段（通过 decltype），并且`Pipe`正在做同样的事情。您将不得不打破该循环，以便可以首先定义某些内容，或者至少对其进行设置，以便在函数声明中不引入循环，因此您可以在完全定义这两种类型后定义方法.

我不确定`Eval`班级试图完成什么。一种解决方案可能是完全删除它并简单地`Pipe::operator()`更直接地调用该方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:57:41.410

# ruby - 通过任意查询查找项目

> ID：11829010
> 
> 赞同：1
> 
> 时间：2012-08-06T13:12:16.890
> 
> 标签：ruby, algorithm, parsing

问题：我在数据库中有项目，名为“AABGng-LS 4х4 0.66kV”。AABG 是供应商，ng-LS 是类型，4*4 是电缆横截面，0.66 kV 是电压。用户必须为此查询找到此项目：

*   AABG ng LS 4х4 660 V
*   AABGng-LS-660 4х4
*   AABG ng-LS 0.66 4*4

如何解决（算法）？我更喜欢 ruby​​ 语言，但可以建议任何语言的算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:30:03.323

您描述的问题是搜索索引之一。如果你想自己做的话，这涉及到很多步骤来让它工作，比如规范化、词干化、匹配等。

我建议您查看基于 lucene 的搜索索引，例如 elasticsearch、solr 等。

# linux - 绕过 Rsync 提示“您确定要继续连接”

> ID：11829022
> 
> 赞同：25
> 
> 时间：2012-08-06T13:13:07.093
> 
> 标签：linux, rsync

你如何绕过这个问题或添加一个自动回答这个问题的标志？

因为我正在尝试编写一个脚本，而这个问题一直在停止 rsync 的过程，因为在出​​现提示时无法在脚本中回答这个问题。

* * *

## 回答 #1

> 赞同：44
> 
> 时间：2012-08-06T13:18:10.163

将`StrictHostKeyChecking`选项设置为`no`，在配置文件中或通过`-o`.

使用`e`option of`rsync`将选项传递给`ssh`：

```
-e "ssh -o StrictHostKeyChecking=no" 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-10-10T13:11:03.323

所以，我发现了很多不安全的答案——但更好的方法不是更多的工作，所以我一直在寻找建议以不太安全的方式来做与 SSH 相关的事情的帖子，比如 rsync。我一直在寻找一种普通的方法来绕过克隆 git repo 的未知主机手动交互，如下所示，但它适用于提到的 rsync 和其他技术：

```
brad@computer:~$ git clone git@bitbucket.org:viperks/viperks-api.git
Cloning into 'viperks-api'...
The authenticity of host 'bitbucket.org (104.192.143.3)' can't be established.
RSA key fingerprint is 97:8c:1b:f2:6f:14:6b:5c:3b:ec:aa:46:46:74:7c:40.
Are you sure you want to continue connecting (yes/no)? 
```

注意 RSA 密钥指纹...

所以，这是一个 SSH 的东西，这将适用于 git over SSH 和一般的 SSH 相关的东西......

```
brad@computer:~$ nmap bitbucket.org --script ssh-hostkey

Starting Nmap 7.01 ( https://nmap.org ) at 2016-10-05 10:21 EDT
Nmap scan report for bitbucket.org (104.192.143.3)
Host is up (0.032s latency).
Other addresses for bitbucket.org (not scanned): 104.192.143.2 104.192.143.1 2401:1d80:1010::150
Not shown: 997 filtered ports
PORT    STATE SERVICE
22/tcp  open  ssh
| ssh-hostkey:
|   1024 35:ee:d7:b8:ef:d7:79:e2:c6:43:9e:ab:40:6f:50:74 (DSA)
|_  2048 97:8c:1b:f2:6f:14:6b:5c:3b:ec:aa:46:46:74:7c:40 (RSA)
80/tcp  open  http
443/tcp open  https

Nmap done: 1 IP address (1 host up) scanned in 42.42 seconds 
```

首先，在您的日常驱动程序上安装 nmap。nmap 对某些事情非常有帮助，例如检测开放端口以及手动验证 SSH 指纹。但是，回到我们正在做的事情。

好的。我要么在我检查过的多个地方和机器上受到了损害——要么对正在发生的一切都是 hunky dory 的更合理的解释。

这个“指纹”只是一个用单向算法缩短的字符串，为了我们的人类方便，冒着不止一个字符串解析成同一个指纹的风险。它发生了，它们被称为碰撞。

无论如何，回到我们可以在下面的上下文中看到的原始字符串。

```
brad@computer:~$ ssh-keyscan bitbucket.org
# bitbucket.org SSH-2.0-conker_1.0.257-ce87fba app-128
no hostkey alg
# bitbucket.org SSH-2.0-conker_1.0.257-ce87fba app-129
bitbucket.org ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAubiN81eDcafrgMeLzaFPsw2kNvEcqTKl/VqLat/MaB33pZy0y3rJZtnqwR2qOOvbwKZYKiEO1O6VqNEBxKvJJelCq0dTXWT5pbO2gDXC6h6QDXCaHo6pOHGPUy+YBaGQRGuSusMEASYiWunYN0vCAI8QaXnWMXNMdFP3jHAJH0eDsoiGnLPBlBp4TNm6rYI74nMzgz3B9IikW4WVK+dc8KZJZWYjAuORU3jc1c/NPskD2ASinf8v3xnfXeukU0sJ5N6m5E8VLjObPEO+mN2t/FZTMZLiFqPWc/ALSqnMnnhwrNi2rbfg/rd/IpL8Le3pSBne8+seeFVBoGqzHM9yXw==
# bitbucket.org SSH-2.0-conker_1.0.257-ce87fba app-123
no hostkey alg 
```

因此，我们可以提前向原始主机索取某种形式的身份证明。

在这一点上，我们手动和自动一样容易受到攻击——字符串匹配，我们拥有创建指纹的基础数据，并且我们可以在未来请求该基础数据（防止冲突）。

现在以防止询问主机真实性的方式使用该字符串...

本例中的 known_hosts 文件不使用纯文本条目。当您看到哈希条目时，您就会知道它们，它们看起来像带有随机字符的哈希，而不是 xyz.com 或 123.45.67.89。

```
brad@computer:~$ ssh-keyscan -t rsa -H bitbucket.org
# bitbucket.org SSH-2.0-conker_1.0.257-ce87fba app-128
|1|yr6p7i8doyLhDtrrnWDk7m9QVXk=|LuKNg9gypeDhfRo/AvLTAlxnyQw= ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAubiN81eDcafrgMeLzaFPsw2kNvEcqTKl/VqLat/MaB33pZy0y3rJZtnqwR2qOOvbwKZYKiEO1O6VqNEBxKvJJelCq0dTXWT5pbO2gDXC6h6QDXCaHo6pOHGPUy+YBaGQRGuSusMEASYiWunYN0vCAI8QaXnWMXNMdFP3jHAJH0eDsoiGnLPBlBp4TNm6rYI74nMzgz3B9IikW4WVK+dc8KZJZWYjAuORU3jc1c/NPskD2ASinf8v3xnfXeukU0sJ5N6m5E8VLjObPEO+mN2t/FZTMZLiFqPWc/ALSqnMnnhwrNi2rbfg/rd/IpL8Le3pSBne8+seeFVBoGqzHM9yXw== 
```

第一个注释行令人愤怒地出现了——但你可以通过“>”或“>>”约定通过简单的重定向来摆脱它。

由于我已尽力获取用于识别“主机”和信任的未污染数据，因此我将将此标识添加到 ~/.ssh 目录中的 known_hosts 文件中。由于它现在将被识别为已知主机，因此我不会在您小时候收到上述提示。

谢谢你一直陪着我，给你。我正在添加 bitbucket RSA 密钥，以便我可以作为 CI 工作流程的一部分以非交互方式与我的 git 存储库进行交互，但无论你做什么都可以。

```
#!/bin/bash
cp ~/.ssh/known_hosts ~/.ssh/known_hosts.old && echo "|1|yr6p7i8doyLhDtrrnWDk7m9QVXk=|LuKNg9gypeDhfRo/AvLTAlxnyQw= ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAubiN81eDcafrgMeLzaFPsw2kNvEcqTKl/VqLat/MaB33pZy0y3rJZtnqwR2qOOvbwKZYKiEO1O6VqNEBxKvJJelCq0dTXWT5pbO2gDXC6h6QDXCaHo6pOHGPUy+YBaGQRGuSusMEASYiWunYN0vCAI8QaXnWMXNMdFP3jHAJH0eDsoiGnLPBlBp4TNm6rYI74nMzgz3B9IikW4WVK+dc8KZJZWYjAuORU3jc1c/NPskD2ASinf8v3xnfXeukU0sJ5N6m5E8VLjObPEO+mN2t/FZTMZLiFqPWc/ALSqnMnnhwrNi2rbfg/rd/IpL8Le3pSBne8+seeFVBoGqzHM9yXw==" >> ~/.ssh/known_hosts 
```

所以，这就是你今天保持处女的方式。您可以在自己的时间按照类似的指示对 github 执行相同的操作。

我看到很多堆栈溢出帖子告诉您以编程方式盲目添加密钥而无需任何检查。您检查来自不同网络上不同机器的密钥的次数越多，您就越能相信主机就是它所说的那个主机——这是您从这一安全层所能期望的最好的。

错误的 ~~ssh -oStrictHostKeyChecking=没有主机名 [命令]~~

错误的 ~~ssh-keyscan -t rsa -H 主机名 >> ~/.ssh/known_hosts~~

请不要做以上任何事情。您有机会增加避免有人通过中间人攻击窃听您的数据传输的机会——抓住这个机会。不同之处在于从字面上验证您拥有的 RSA 密钥是真正的服务器之一，现在您知道如何获取该信息来比较它们，以便您可以信任连接。请记住，来自不同计算机和网络的更多比较通常会增加您信任连接的能力。

# java - Android - 可见和不可见按钮

> ID：11829025
> 
> 赞同：0
> 
> 时间：2012-08-06T13:13:19.243
> 
> 标签：java, android

如果数组中有一个或多个对象，我试图让一个按钮变得可见，否则它将保持不可见。

我习惯了：

```
if (positionOverlay.geoPointsArrayList.size() <= 0){
    buttonClear.setVisibility(View.GONE);
    System.out.println("Clear button hidden");
}
else if (positionOverlay.geoPointsArrayList.size() >= 1) {
    buttonClear.setVisibility(View.VISIBLE);
    System.out.println("Clear button visible");
} 
```

我遇到的问题是它运行并且在启动时我使用的数组是空的，所以按钮保持不可见，但是当我将对象添加到数组时它仍然不可见，这表明它不会再次运行代码。

我已将上面的代码放在 onCreate 中，谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:16:44.123

当你改变你的对象数组时，你需要运行你拥有的代码`onCreate`——你现在只在启动时检查，并且根本不链接到被改变的数组。

所以在伪代码中，如果你有：

```
array.add("new item");
this.updateButton(); // This is where you have your button code.

array.remove("some other item");
this.updateButton(); // Check if you've gone below the limit again 
```

# html - 什么是 file.sc 扩展名

> ID：11829026
> 
> 赞同：0
> 
> 时间：2012-08-06T13:13:19.460
> 
> 标签：html, web, file-extension

在 www.webmail.com/file.sc 中找到的 file.sc 的文件扩展名是什么。我从来没有听说过这个文件在网络上是不是像asp.net，php一样的服务器文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:17:55.517

它是一个超级对撞机文件：

[http://www.audiosynth.com/](http://www.audiosynth.com/)

# android - Android DevicePolicyManager 启用人脸解锁

> ID：11829027
> 
> 赞同：2
> 
> 时间：2012-08-06T13:13:26.403
> 
> 标签：android, mdm

众所周知，Android ICS 在设置->安全->屏幕锁定中提供人脸解锁选项来锁定屏幕。

有没有办法使用 DevicePolicyManager 以编程方式启用人脸锁定，例如从 MDM 启用密码限制？

我已经浏览了 API Level 16 中的 DevicePolicyManager 类，但找不到它。有没有其他方法可以实现这一目标？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-10T21:57:46.433

人脸解锁由`PASSWORD_QUALITY_BIOMETRIC_WEAK`标志控制，与`setPasswordQuality`.

例如，此代码将要求用户设置人脸解锁密码（或更好的密码），并在需要时提示他们更新密码：

```
DevicePolicyManager mDPM = (DevicePolicyManager)
        context.getSystemService(Context.DEVICE_POLICY_SERVICE);
ComponentName mPolicyAdmin = new ComponentName(context, PolicyAdmin.class);

// Enforce Face Unlock or better for new passwords
mDPM.setPasswordQuality(mPolicyAdmin,
                        DevicePolicyManager.PASSWORD_QUALITY_BIOMETRIC_WEAK);

// Prompt user to upgrade password if necessary
if (!mDPM.isActivePasswordSufficient()) {
    Intent intent = new Intent(DevicePolicyManager.ACTION_SET_NEW_PASSWORD);
    startActivity(intent);
} 
```

# html - 添加另一个图像后的额外间隙

> ID：11829029
> 
> 赞同：0
> 
> 时间：2012-08-06T13:13:31.150
> 
> 标签：html, css

![前像](../Images/e438aaf396bdee2b731cb75c7fe8b8be.png)

这是在我为页脚添加文本之前。页脚图像很好地靠在页面底部。

![残像](../Images/81bcd656d8d9dd7c0c740191661ef711.png)

这是在我为页脚添加文本之后。

我找不到导致页面底部出现神秘额外空白的问题。忽略黑色边框 - 我用它来检查页脚文本图像的边距。

CSS：

```
* {
    margin: 0;
    padding:0;
}

body {
    background-image: url('images/BG-W1.png');
}
#container{
    max-width:1000px;
    margin: 0 auto; 
    position: relative; 
    padding: 0 auto;
    height: 790px;
    border: 2px solid blue;

}

#footerBg {
    position: relative;
    bottom:-63px;
    left:-50px;
}

#footerBg img {
    display: block;
}

#footertex {
    position: relative;
    top:-110px;

    border:2px solid black;

}
footer {
    height: 50px;
} 

#footertex img {
    display: block;
} 
```

HTML：

```
<footer>
            <figure id="footerBg">
                <img src="images/BG_F_S3.png" alt="Footer Background" width="" height="" />

            </figure>   

        <<figure id="footertex">    
                    <img src="images/ft1.png" usemap="#green" border="0" />

                    <map name="green">

                    <area shape="rect" coords="513,56,625,106" href="http://www.google.com" />
                    <area shape="rect" coords="725,58,874,108" href="http://www.google.com" />

                    </map>
        </figure>   

        </footer> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:16:54.783

您可以发布您的 HTML 和 CSS 代码吗？想到的一个快速解决方法是，`div#footer { box-sizing: border-box; }`但显示您已经拥有的内容有望为您提供更好的答案。

# javascript - 隐藏元素时CSS动画暂停

> ID：11829032
> 
> 赞同：3
> 
> 时间：2012-08-06T13:14:02.377
> 
> 标签：javascript, mobile, webkit, css-animations

我正在为我正在处理的项目的按钮添加点击/触摸动画，我遇到了一个令人沮丧的问题，即动画按钮显示和隐藏元素。

该项目是一个单页移动网络应用程序，上面有几个按钮。我正在使用 jQuery 在按下按钮时在按钮上设置 css 关键帧动画。该按钮隐藏当前页面，并显示一个新页面。问题是，当我单击按钮时，页面会在动画完成之前更改，并且在隐藏容器时动画会暂停。当容器重新显示时，动画从它隐藏的地方继续，然后触发 webkitAnimationEnd 事件。

容器显示和隐藏：

```
display: none; 
```

我无法将其更改为：

```
visibility: hidden; 
```

因为容器仍然会占用空间。有没有什么简单的方法可以在元素变得不可见时强制删除动画，或者在隐藏容器时强制动画继续？

编辑：为澄清起见，这是我在 javscript 中应用的关键帧动画：

```
@-webkit-keyframes shrink
{
    0%
    {
        -webkit-transform: matrix(1, 0, 0, 1, 0, 0);
    }
    50%
    {
        -webkit-transform: matrix(0.95, 0, 0, 0.95, 0, 0);
    }
    100%
    {
        -webkit-transform: matrix(1, 0, 0, 1, 0, 0);
    }
} 
```

这是我必须将动画应用于元素的javascript：

```
$('body').on(_context.settings.platformInfo.device.touch ? 'touchstart' : 'mousedown', '.shrink', function ()
{
    var $item = $(this);

    $item.one('webkitAnimationEnd', function ()
    {
        $item.css({ '-webkit-animation': 'none' });
    }).css({ '-webkit-animation': 'shrink 250ms forwards' });
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:25:52.170

您可以将动画的 CSS 定义放在一个单独的类中，并根据可见性添加或删除这个额外的类：

```
#SomeDiv{ .... }
.MyAnimation{ .... }

$('#SomeDiv').addClass('MyAnimation').show();
$('#SomeDiv').hide().removeClass('MyAnimation'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:47:38.253

您可以尝试设置`visibility: hidden;`但也可以将元素绝对定位在屏幕外，例如`position: absolute; left: -500px; /* Or whatever it takes */`. 事实上，您甚至可能不需要设置`visibility`. 不过感觉有点hacky。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:32:28.483

我想如果隐藏当前页面的动画只是等到按钮的动画完成，你的问题就可以解决。因此，您必须在按钮动画的“完成”回调中触发页面动画：

```
$("#button").click(function(){
    $(this).animate({
        //animation parameters
    }, 1000, function() {
        //button animation complete, change pages
    });
}); 
```

在这里测试它：http: [//jsfiddle.net/Y5HSU/](http://jsfiddle.net/Y5HSU/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:06:05.970

我找到了一个可以解决这个特定问题的解决方案，尽管我不是很喜欢它。在 mix 中添加 setTimeout 意味着即使容器被隐藏，动画也会在 250ms 后被移除（在这种情况下）。

```
$('body').on(_context.settings.platformInfo.device.touch ? 'touchstart' : 'mousedown', '.shrink', function ()
{
    var $item = $(this);

    setTimeout(function ()
    {
        $item.css({ '-webkit-animation': 'none' });
    }, 250);

    $item.css({ '-webkit-animation': 'shrink 250ms forwards' });
}); 
```

这样做的主要问题是，如果浏览器在执行动画时特别慢，并且超时触发太快会切断动画。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-04-11T08:37:41.897

在 CSS 中：

```
.hidden .myAnimation {
   /* Will reset and prevent your animation
      from running when the element is hidden. */
   animation: none;
} 
```

# mysql - 如何从多个表中获取详细信息？

> ID：11829034
> 
> 赞同：1
> 
> 时间：2012-08-06T13:14:09.600
> 
> 标签：mysql

在 MySql 数据库中有`AM_COURSE`表

```
cId      CourseName   course_desc
  101          java        sometext...
  102          mysql       sometext....
   : 
```

`AM_USER`在那里面

```
 uid   name 
1001  Ram
1002  pavan 
```

`AM_INTER`在那里面

```
 id   uid     cid
  1    1001    101
  2    1001    102
  3    1002    101 
```

`AM_TIMETABLE`在那张桌子

```
UserId        Date_Time
 101        2012-08-08 04:00:00 
 102        2012-08-15 10:00:00
 103        2012-08-18 09:00:00
 104        2012-08-24 05:00:00 
```

我的问题是，我正在传递开始日期和结束日期，`CourseName`然后我想以我编写查询的方式获取 userId、name、coursename、course_desc 等详细信息

```
 SELECT  a.cid,a.course_desc,c.name 
    FROM  
    AM_COURSE a,AM_USER c INNER JOIN AM_TIMETABLE b ON a.S_ID = b.COURSE_ID WHERE
    a.Name = 'java' 
    AND 
    b.Date_Time BETWEEN '2012-08-07 00:00:00' AND '2012-08-20 00:00:00' 
```

但我收到错误 `please help`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-16T10:41:17.453

当两个表中至少有一个匹配项时，INNER JOIN 关键字返回行。

**MySQL INNER JOIN 子句**

MySQL INNER JOIN 子句将一个表中的行与其他表中的行匹配，并允许您查询包含两个表中的列的行。

MySQL INNER JOIN 子句是 SELECT 语句的可选部分。它紧跟在 FROM 子句之后。

在使用 MySQL INNER JOIN 子句之前，您必须指定以下条件：

首先，您必须指定出现在 FROM 子句中的主表。其次，您需要指定要与主表连接的表，这些表出现在 INNER JOIN 子句中。理论上，您可以将一个包含许多表的表连接起来。但是，为了获得更好的查询性能，您应该限制要连接的表的数量。第三，您需要指定连接条件或连接谓词。连接条件出现在 INNER JOIN 子句的关键字 ON 之后。连接条件是主表与其他表的行匹配规则。

**例子**

```
SELECT  c.cid, c.course_desc, user.name FROM AM_COURSE c
INNER JOIN AM_INTER inter on inter.cid = c.cid
INNER JOIN AM_USER user on user.uid = inter.uid
INNER JOIN AM_TIMETABLE tt ON inter.cid = tt.UserId
WHERE c.Name = 'coursename' AND tt.Date_Time BETWEEN '2011-08-12' AND '2012-08-12' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:18:37.450

尝试

```
SELECT  course.cid, course.course_desc, user.name
FROM AM_COURSE course
INNER JOIN AM_INTER inter on inter.cid = course.cid
INNER JOIN AM_USER user on user.uid = inter.uid
INNER JOIN AM_TIMETABLE tt ON inter.cid = tt.UserId
WHERE course.Name = 'java' 
AND tt.Date_Time BETWEEN '2012-08-07' AND '2012-08-20' 
```

# c# - 具有属性的对象的 Newton Soft Json JsonSerializerSettings 作为字节数组

> ID：11829035
> 
> 赞同：5
> 
> 时间：2012-08-06T13:14:24.660
> 
> 标签：c#

使用 Newton.Json 进行 Json 序列化。应用什么 JsonSerializerSettings，当我必须 Json 将具有属性的对象序列化为字节数组，然后以十六进制格式显示字节数组时..

例如

```
class A
{
  public int X {get;set;}
  public byte[] Y {get;set;}  
} 
```

当我将 A 序列化为 json 时，我没有像我设置的那样获得 Y 的值... byte[] 的输出应该是十六进制

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T14:33:59.617

```
var json = JsonConvert.SerializeObject(new MyTestClass());

public class MyTestClass
{
    public string s = "iiiii";

    [JsonConverter(typeof(ByteArrayConvertor))]
    public byte[] buf = new byte[] {1,2,3,4,5};
}

public class ByteArrayConvertor : Newtonsoft.Json.JsonConverter
{

    public override bool CanConvert(Type objectType)
    {
        return objectType==typeof(byte[]);
    }

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
    {
        throw new NotImplementedException();
    }

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        byte[] arr = (byte[])value;
        writer.WriteRaw(BitConverter.ToString(arr).Replace("-", ""));
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2018-09-11T06:48:27.660

只需覆盖 JsonSerializerSettings 中的转换器，优于属性中的属性

```
private class SerializationTest
{
    public byte[] Bytes => new byte[] { 11, 22, 33, 44, 0xAA, 0xBB, 0xCC };
}

private class ByteArrayHexConverter : JsonConverter
{
    public override bool CanConvert(Type objectType) => objectType == typeof(byte[]);

    public override bool CanRead => false;
    public override bool CanWrite => true;

    public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer) => throw new NotImplementedException();

    private readonly string _separator;

    public ByteArrayHexConverter(string separator = ",") => _separator = separator;

    public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
    {
        var hexString = string.Join(_separator, ((byte[])value).Select(p => p.ToString("X2")));
        writer.WriteValue(hexString);
    }
}

private static void Main(string[] args)
{
    var setting = new JsonSerializerSettings { Converters = { new ByteArrayHexConverter() } };
    var json = JsonConvert.SerializeObject(new SerializationTest(), setting);
    Console.WriteLine(json); // {"Bytes":"0B,16,21,2C,AA,BB,CC"}
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:46:51.023

包括序列化和反序列化

```
 public class A
    {
        public int X { get; set; }

        [JsonProperty(ItemConverterType = typeof(BytesToHexConverter))]
        public byte[] Y { get; set; }
    }

    public class BytesToHexConverter : JsonConverter
    {
        public override bool CanConvert(Type objectType)
        {
            return objectType == typeof(byte[]);
        }

        public override object ReadJson(JsonReader reader, Type objectType, object existingValue, JsonSerializer serializer)
        {
            if (reader.TokenType == JsonToken.String)
            {
                var hex = serializer.Deserialize<string>(reader);
                if (!string.IsNullOrEmpty(hex))
                {
                    return Enumerable.Range(0, hex.Length)
                         .Where(x => x % 2 == 0)
                         .Select(x => Convert.ToByte(hex.Substring(x, 2), 16))
                         .ToArray();
                }
            }
            return Enumerable.Empty<byte>();
        }

        public override void WriteJson(JsonWriter writer, object value, JsonSerializer serializer)
        {
            var bytes = value as byte[];
            var @string = BitConverter.ToString(bytes).Replace("-", string.Empty);
            serializer.Serialize(writer, @string);
        }
    }

    public static void Main(string[] args)
    {
        var a = new A() { X = 1001, Y = new byte[] { 0, 1, 4, 8 } };
        var s = new JsonSerializer();

        var sb = new StringBuilder();
        var sw = new StringWriter(sb);

        s.Converters.Add(new BytesToHexConverter());
        s.Serialize(sw, a);
        var json = sb.ToString();

        var sr = new StringReader(json);
        var readback = s.Deserialize(sr, typeof(A));

        Console.WriteLine(sw);
        Console.WriteLine("End...");
        Console.ReadLine();
    } 
```

# asp.net-mvc-3 - 避免列表中的重复条目

> ID：11829036
> 
> 赞同：3
> 
> 时间：2012-08-06T13:14:27.823
> 
> 标签：asp.net-mvc-3

如何检查 List< SelectListItem> 不包含或在 Mvc3 中插入​​任何重复项。我试过了！包含

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T18:36:56.657

尝试这个：

```
var list = new List<SelectListItem>();
list.Add(new SelectListItem { Text = "Some Text", Value = "Some Value" });
list.Add(new SelectListItem { Text = "Other Text", Value = "Other Value" });

var selectListItem = new SelectListItem { Text = "Some Text", Value = "Some Value" };
if(!list.Any(l => l.Value == selectListItem.Value)
{
    list.Add(selectListItem);
} 
```

.Contains() 比较对象是否引用，而不是 Value 属性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:23:45.450

```
var list = new List<SelectListItem>();

var selectListItem = new SelectListItem { Text = "Some Text", Value = "Some Value" };
if(list.FirstOrDefault(t => t.Value != selectListItem.Value) == null)
{
    list.Add(selectListItem);
} 
```

# ruby-on-rails - IIS 上的 Ruby on Rails

> ID：11829043
> 
> 赞同：1
> 
> 时间：2012-08-06T13:14:55.013
> 
> 标签：ruby-on-rails, ruby, iis, proxy, reverse-proxy

在 IIS 7 上运行 Rails 3 的最佳方式是什么？

1 示例是在 3000 端口上启动 rails 服务器并使用反向代理和 url 路由

# php - 在每个注释行的末尾添加句号（句点）

> ID：11829049
> 
> 赞同：-1
> 
> 时间：2012-08-06T13:15:20.010
> 
> 标签：php, regex, eclipse

我正在尝试解决一些样式检查问题，并想添加句号“。” 到具有单行注释的每一行的末尾（包含 "//" ）。

我原以为有一种方法可以使用正则表达式来做到这一点。

任何帮助将不胜感激谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:18:54.017

简单的方法：

```
$result = preg_replace('%//.*%', '\0.', $subject); 
```

优雅的方式（如果还没有的话，只在最后添加一个点：

```
$result = preg_replace('%//.*(?<!\.)$%m', '\0.', $subject); 
```

**解释：**

```
//      # Match //
.*      # Match any characters except newlines
(?<!\.) # Assert that the last character isn't a dot
$       # right before the end of the line 
```

# mysql - 如何使一个查询的结果在 NOT IN 子句中？

> ID：11829050
> 
> 赞同：0
> 
> 时间：2012-08-06T13:15:21.040
> 
> 标签：mysql

我想删除不是来自特定值集的值。我事先不知道这些值。我可以通过查询这些值来了解它们，并且我想一步完成这个过程。我做了以下声明：

```
delete from db.table1 where domain not in 
(
select distinct domainname 
from db.table1
where domainname like '%.uci.edu'
group by keyvalue
order by domainname
) 
and domainanme like '%.uci.edu'; 
```

知道这`domainname`是一个唯一的字段，而主键`table1`是`auto_increment`数字。

我需要做的是：我有一个域名列表。说：aa.yahoo.com、bb.yahoo.com、cc.yahoo.com、aa.msn.com。每个域名都有一个键值。如果密钥是共享的，我想删除这条记录。因此，我选择了按键值分组的不同值。如果记录不在不同的集合中，并且具有相同的顶级域，那么我不需要它。

我的查询可能是错误的。SQL给了我`error: 1093: you can' specify target table table1 for update in FROM clause.`

请以任何有效的方式帮助实现这一目的。我有一个很长的剪切顶级域名列表，我只需要具有不同键值的域名。如果有一个通用的解决方案可以做到这一点，而无需逐个处理每个域名（如我的示例），那就更好了。

**编辑：** `domainname`不是唯一字段。我使用另一个字段：`domainnameNo`作为唯一字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:22:06.413

我认为这就是你要找的：

```
DELETE a
FROM db.table1 a
    INNER JOIN (SELECT id
                FROM db.table1
                WHERE domainname LIKE '%.uci.edu'
                GROUP BY keyvalue
                HAVING COUNT(1) > 1
        ) b
        ON a.id = b.id; 
```

# node.js - nodejs版本v0.6.21-pre中“pre”的重要性是什么？

> ID：11829051
> 
> 赞同：0
> 
> 时间：2012-08-06T13:15:26.360
> 
> 标签：node.js

有些版本在版本号末尾带有“-pre”，有些则没有。“-pre”的重要性是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:54:50.580

这意味着二进制文件是从开发或“预览”提交构建的。

来自[`src/node_version.h`](https://github.com/joyent/node/blob/master/src/node_version.h)：

```
#if NODE_VERSION_IS_RELEASE
# define NODE_VERSION_STRING  NODE_STRINGIFY(NODE_MAJOR_VERSION) "." \
                              NODE_STRINGIFY(NODE_MINOR_VERSION) "." \
                              NODE_STRINGIFY(NODE_PATCH_VERSION)
#else
# define NODE_VERSION_STRING  NODE_STRINGIFY(NODE_MAJOR_VERSION) "." \
                              NODE_STRINGIFY(NODE_MINOR_VERSION) "." \
                              NODE_STRINGIFY(NODE_PATCH_VERSION) "-pre"
#endif 
```

已`-pre`为发布（例如：[*2012.08.03 版本 0.6.21（维护）*](https://github.com/joyent/node/commit/v0.6.21#diff-1)）删除，并在后续版本中再次添加（例如：[*现在在 0.6.22 上工作*](https://github.com/joyent/node/commit/2dcaef6efa13242cff9fc5ac9938e2912d2c0ace#diff-0)）。

# database - 如何从带有约束失败错误的sqlite表中删除一行

> ID：11829052
> 
> 赞同：0
> 
> 时间：2012-08-06T13:15:26.530
> 
> 标签：database, sqlite, database-design

如何从 sqlite 表中删除一行：

我正在尝试得到“约束失败”错误

```
sqlite> DELETE FROM cataloge WHERE id = 30;
constraint failed 
```

这是表的结构：

![表结构](../Images/e987c3adc674bd867d2d03e23a918035.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T11:56:25.417

Sundar 的回答为我解决了这个问题：

查找以 cataloge.id 作为外键的表。这些表也不能有 30 作为 id 的行。– 桑达尔

# jsf-2 - Primefaces ajax行选择无法更新对话框中的值

> ID：11829053
> 
> 赞同：4
> 
> 时间：2012-08-06T13:15:35.267
> 
> 标签：jsf-2, primefaces, facelets

我有一个数据表，它将在行选择事件上显示一个详细对话框。但是，该对话框不显示所选对象的任何值。我可以看到在调试会话期间正确设置了所选对象。

该表由学生行组成，假设显示一个弹出对话框，显示有关行选择事件的详细信息。

学生豆：

```
@Named(value = "studentBean")
@SessionScoped
public class StudentBean {

        @Inject
        private UserFacade userFacade;
        private List<User> studentList;
        private User selectedStudent;

        public StudentBean() {
        }

        @PostConstruct
        public void init() {
            studentList = userFacade.findAll();

        }

        public List<User> getStudentList() {
            return studentList;

        }

        public void setStudentList(List<User> studentList) {
            this.studentList = studentList;
        }

        public User getSelectedStudent() {
            return selectedStudent;
        }

        public void setSelectedStudent(User student) {
            this.selectedStudent = student;
        }

        public void onRowSelect(SelectEvent event) {
        }

        public void onRowUnselect(UnselectEvent event) {
            //FacesMessage msg = new FacesMessage("Student Unselected", ((User) event.getObject()).getFirstName());  
            //FacesContext.getCurrentInstance().addMessage("messages", msg);  
        }

    } 
```

Facelet 页面：

```
<?xml version='1.0' encoding='UTF-8' ?>
    <!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
    <html xmlns="http://www.w3.org/1999/xhtml"
          xmlns:ui="http://java.sun.com/jsf/facelets"
          xmlns:h ="http://java.sun.com/jsf/html"
          xmlns:p ="http://primefaces.org/ui">

        <body>

            <ui:composition template="./layout.xhtml">

                <ui:define name="content">
                    <h:form  id="studentForm"> 

                        <p:dataTable var="student" value="#{studentBean.studentList}" 
                                     selectionMode="single" 
                                     selection="#{studentBean.selectedStudent}" rowKey="#{student.id}">  

                            <p:ajax event="rowSelect" listener="#{studentBean.onRowSelect}" 
                                    update=":studentForm:studentDetail" oncomplete="studentDialog.show()" 
                                    global="true" immediate="true"
                                    />  
                            <p:ajax event="rowUnselect" listener="#{studentBean.onRowUnselect}" /> 

                            <p:column headerText="First Name">  
                                <h:outputText value="#{student.firstName}" />  
                            </p:column>  

                            <p:column headerText="Last Name">  
                                <h:outputText value="#{student.lastName}" />  
                            </p:column>  

                            <p:column headerText="Student ID">  
                                <h:outputText value="#{student.studentid}" />  
                            </p:column>  

                        </p:dataTable>  

                        <p:dialog id="dialog" header="Student Detail"  widgetVar="studentDialog" resizable="false"  
                                  showEffect="fade" hideEffect="fade" appendToBody="true">  

                            <h:panelGrid id="studentDetail" columns="2" cellpadding="4">  

                                <h:outputText value="First Name: " />  
                                <h:outputText value="#{studentBean.selectedStudent.firstName}" />  

                                <h:outputText value="Last Name: " />  
                                <h:outputText value="#{studentBean.selectedStudent.lastName}" />  

                            </h:panelGrid>  
                        </p:dialog> 
                </ui:define>

            </ui:composition>

        </body>
    </html> 
```

我正在关注 Primefaces Showcase 页面中的 Car 数据表示例。那里看起来很简单，但无论我做什么，我似乎都无法显示 selectedStudent 信息。对话框显示正常，但 firstName 和 lastName 值为空。

我尝试了以下方法：

*   将对话框放入另一种形式
*   使用 process="@form"
*   使用流程=":studentForm:studentDetail"

我究竟做错了什么？

Primefaces 3.3.1，Glassfish 3.1.2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T23:32:51.747

我删除了`global="true"` `immediate="true",`未使用**的听众**

```
from p:ajax, synchronized rowKey="#{student.id}" 
```

使用“学生 ID”列中的表达式和`@PostConstruct` `init()`函数内部填充的 studentList，不知道您的 userFacade 代码是如何的，并且它可以工作。

# php - 生成一个新的唯一字母数字字符串，

> ID：11829056
> 
> 赞同：0
> 
> 时间：2012-08-06T13:15:43.643
> 
> 标签：php, mysql, html, sql, sql-server

我需要生成一个字母数字字符串并与数据库值进行比较，但如果该值存在于数据库中，那么我们应该生成一个不同的数字字符串，并再次将它与数据库值进行比较......

```
<?php
$character_array = array_merge(range('a', 'z'), range(0, 9));
$Emp_Id = "";
for($i = 0; $i < 6; $i++) {
    $Emp_Id .= $character_array[rand(0, (count($character_array) - 1))];} ?> 
```

通过创建一个字母数字代码可以正常工作，但正如我上面提到的，我需要将它与数据库值进行比较。

```
$chkEmp_Id=mysql_fetch_array(mysql_query("SELECT Emp_Id FROM talent_users WHERE   Emp_Id='{$Emp_Id}' ")); 
```

在与数据库值比较后，如果该值存在，那么它应该生成一个不同的“Emp_Id”，每次生成的员工 ID 都应该与数据库值进行比较......希望你们明白了吗？请帮我解决这个问题......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:28:59.047

```
$pool = array_merge (range ('a', 'z'), range(0, 9));

do
{
    $hash = "";
    for ($i = 0; $i < $lengthOfHash; ++$i)
    {
        $hash .= $pool[array_rand ($pool)];
    }
while ( mysql_result (mysql_query ('SELECT COUNT(1) FROM talent_users WHERE Emp_Id = ' . $hash), 0) > 0); 
```

但是当表大小增加时，这是一个很大的瓶颈。既然哈希是字母数字的，为什么哈希不能只以 userId 开头？

```
//hash = <a number> + <a letter> + <alpha-numeric chars>
$hash = $userId . generateHash(); 
```

只需确保 generateHash() 函数不以数字开头，如评论中所述。

然后它会是这样的：

```
$hash = $userId;
$letters = range ('a', 'z');
$pool = array_merge ($letters, range (0, 9));

for ($i = 0; $i < $lengthOfHash; ++$i)
{
    $chooseFrom = $pool;

    if ( ! $i )
        $chooseFrom = $letters;

    $hash .= $chooseFrom[array_rand($chooseFrom)];
} 
```

# c# - IIS/ASP.net 上的 NullReferenceException - 不知从何而来？

> ID：11829059
> 
> 赞同：0
> 
> 时间：2012-08-06T13:16:06.047
> 
> 标签：c#, asp.net, iis, web-applications, webserver

我目前在一家软件公司的网站上工作。我有一种机制，在页面加载后立即运行（在 Page_OnLoad，Masterpage 代码文件中），创建一个自己的类的新实例并从那里运行一个函数。几周以来一切都运行良好，我在网站上工作的完全不同的页面/区域不会以任何方式影响我目前的事业。

所以发生了以下事情：我在 asp.net 开发服务器上尝试了该网站：一切都很好并且工作正常。所以我将它上传到我的 IIS 服务器。访问网站：一切仍在运行，没有错误。大约 20 分钟后，我刷新了页面：NullReferenceException，不知从何而来。现在我无法摆脱它，无论我做什么。

**这是来自堆栈的消息：**

```
 [NullReferenceException: Der Objektverweis wurde nicht auf eine Objektinstanz festgelegt.]
   EITS.WWW.Helper.cUserLog.TrackUserLog(HttpRequest request) in     C:\EIT\Projekte\eits.ch\www.eits.ch\EITSWeb\www.eits.ch\Includes\cUserLog.cs:72
   EITS.WWW.IndexMaster.Page_Load(Object sender, EventArgs e) in C:\EIT\Projekte\eits.ch\www.eits.ch\EITSWeb\www.eits.ch\Index.Master.cs:22
   System.Web.Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) +24
   System.Web.UI.Control.LoadRecursive() +70
   System.Web.UI.Control.LoadRecursive() +189
   System.Web.UI.Page.ProcessRequestMain(Boolean includeStagesBeforeAsyncPoint, Boolean includeStagesAfterAsyncPoint) +3063 
```

母版页代码文件：

```
http://codetidy.com/3244/ 
```

被调用的类：

```
http://codetidy.com/3245/ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:38:02.900

这是引发异常的代码部分：

```
String vSQL = "SELECT * FROM eits_visitor WHERE ip = '" + oUser.usrIP + "'";
DataTable dtCurrent = SQLCon.GetDataTableFromSQL(vSQL, oHelper.cfgConnection);

if (dtCurrent != null && dtCurrent.Rows.Count > 0) {
    // Check if IP is registered today
    vSQL = "SELECT TOP(1)* FROM eits_log WHERE visitor_ip = '" + oUser.usrIP + "' ORDER BY date DESC;";
    dtCurrent = SQLCon.GetDataTableFromSQL(vSQL, oHelper.cfgConnection);

    // Next line is where the exception is thrown:
    if (SQLCon.DateFromString(dtCurrent.Rows[0]["date"].ToString()).DayOfYear != DateTime.Now.DayOfYear) {
        // do stuff
    }
} 
```

问题在于第二个查询，您没有检查 dtCurrent.Rows[0] 是否存在。

在第一个查询中，您正在做正确的事情 - 在做任何事情之前检查 dtCurrent.Rows.Count > 0。然后您似乎只是假设因为第一个查询返回了结果，所以第二个查询也将返回，但是由于这是引发异常的地方，您可能需要重新考虑该假设。

您的评论说第二个查询旨在“检查[ing]如果今天注册了 IP”，但您实际上并没有检查记录是否存在 - 您只是假设记录在那里并使用它，这使得代码没有这样的记录时失败。

如果IP今天*没有*注册，还有记录吗？如果没有，那就是你的问题所在。

我对此类问题的第一反应是添加一个检查以确保我的假设是正确的：

```
if (dtCurrent.Rows.Count == 0)
    throw new Exception("The unthinkable happened - our assumption was wrong!");

// Next line is where the exception was being thrown before.
// Do we still get this far now?
if (SQLCon.DateFromString(dtCurrent.Rows[0]["date"].ToString()).DayOfYear != DateTime.Now.DayOfYear) {
    // do stuff
} 
```

# lotus-notes - 使用 Lotus Notes 公式计算视图中的文档数

> ID：11829063
> 
> 赞同：0
> 
> 时间：2012-08-06T13:16:14.707
> 
> 标签：lotus-notes, lotus-formula

我在工具栏中有一个按钮，可以将选定的文档邮寄到邮箱。问题是我不知道如何为每个选定的文档运行按钮公式代码。就目前而言，无论选择了多少文档，它都只会运行一次。这并不理想，因为用户经常有很多文件要邮寄。

无法创建代理来执行此操作，因为我无权访问数据库本身的开发访问权限。人们还告诉我，代码将为每个选定的文档运行，但我已经对此进行了测试，但它不是来自工具栏按钮。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T14:15:42.527

有可能获得选定的文档并处理每个文档，而无需修改数据库，但这很棘手，我需要一些时间来弄清楚。

您在工具栏中的代码必须执行 @Command([Compose]; "" : "yourActionDb.nsf" ; "StartAction" )

数据库“yourActionDb.nsf”（在本例中为本地）必须有一个表单（此处称为 StartAction），这是诀窍：在表单的“QueryOpen”中，上下文仍然是视图......所以你可以使用如下代码：

```
Dim ws as New NotesUIWorkspace
Dim uiviw as NotesUIView
Dim dc as NotesDocumentCollection
Set uiviw = ws.CurrentView
If not uiviw is Nothing then
  set dc = uiviw.Documents
  ...your code comes here
End if 
```

不幸的是，这个技巧在公式语言中是不可能的，因为只有代理才有可能对选定的文档采取行动，并且每个被调用的代理都会有错误的上下文......

之后您必须关闭此表单（尝试在 queryopen 中设置 continue = False 或稍后执行 uidoc.Close），但在这里您必须找出最适合您需要的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-24T11:05:36.413

我相信，如果您创建一个公式代理（与工具栏按钮的公式内容相同）并将目标设置为“选定文档”，那么在您的工具栏按钮中，添加：

@command([toolsrunmacro];"此处的代理名称或别名");

*   它将针对每个选定的文档运行公式代理。将代理目标设置为 Selected Dcouments。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:28:37.333

恐怕您的测试是正确的——您不能在选定的文档上运行工具栏宏。你需要一个代理。

# ruby-on-rails-3 - Rails UJS：如何评估 Javascript 对 HTTP 错误的响应

> ID：11829064
> 
> 赞同：1
> 
> 时间：2012-08-06T13:16:20.553
> 
> 标签：ruby-on-rails-3, jquery

我注意到，当我使用 Rails UJS 表单进行 AJAX 提交时，只有在服务器返回 HTTP 成功（2xx）时才会评估 Javascript 响应，如果服务器返回状态码 4xx 或 5xx，则不执行任何操作。

我想修改此行为，以便即使服务器返回 HTTP 错误也会评估 Javascript 响应。我正在考虑将我的表单与事件绑定`ajax:error`，但是我必须为我的应用程序中的每个 AJAX 表单执行此操作。任何人都知道如何在全球范围内做到这一点？

还有一个问题：我可以通过 JQuery 检查服务器返回的内容类型是否为 Javascript 吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-22T00:37:06.460

由于所有 Rails UJS 处理程序都需要定义 data-remote="true"，因此您可以通过执行全局绑定到 ajax:error 事件

```
$('[data-remote="true"]').on('ajax:error', my_special_error_callback); 
```

然后，您需要确保定义回调以检查错误代码：

```
function my_special_error_callback(event, data, status, xhr) {
    if(status == 'error') {
    alert('error');
    responseText =  JSON.parse(data.responseText)["errors"] // This is dependent on how you're returning your errors from Rails
} 
```

# ios - Xcode 归档以前的版本

> ID：11829068
> 
> 赞同：3
> 
> 时间：2012-08-06T13:16:31.367
> 
> 标签：ios, xcode

这个问题似乎与[XCode Build and Archive for Enterprise Distribution 构建旧存档](https://stackoverflow.com/questions/9999417/xcode-build-and-archive-for-enterprise-distribution-builds-old-archive)有关，但答案对我不起作用；

我们有一个使用企业分发方法分发的 iOS 应用程序。在过去的一年中，通过发布新的 IPA 并让用户删除并重新安装该应用程序，这已定期更新。最近，当我存档和分发应用程序时，它会正确安装，但它是几天前的旧版本，没有任何最近的更改。这些事情就像文本标签和带有错误文本的警报一样简单。

我已经做了我能想到的一切，包括：

*   确认它在模拟器中以及直接构建到 iPhone 时正确构建和运行。在这些情况下，一切都很好。

*   清理项目。

*   在管理器中，删除所有存档并移除项目。

*   手动删除 DerivedData 文件夹。

*   重命名 IPA 并更新分发 plist 以确保文件不会以某种方式缓存在 Web 服务器上。

*   删除整个项目并从 SVN 重新结帐。

即使我一起做所有这些事情，所以我已经从我的计算机和 Xcode 中完全删除了项目，并通过重新签出源文件重新归档它，它仍然归档一个过时的版本。这可能来自哪里？我应该完全重新安装 Xcode 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:24:23.343

由于您已删除并检查了您的构建文件是否已从旧垃圾中清除，因此我将查看实际的源文件和项目，并确保您实际上是在正确的位置进行更改。

右键单击您在项目中处理的文件，然后选择“在 Finder 中显示”并查看它们的实际位置。也许他们位于与您预期不同的位置？

对目标中“编译源”下的文件执行相同操作，并确保它们是相同的文件，并且与您正在编辑的文件位于相同的位置。

可能是如果您在某个时候摆弄了您的文件和项目，您实际上导入了错误的文件，并且您正在编辑与构建中包含的文件不同的文件。它发生在我身上一次，我不得不将大量文件重新导入我的项目以使其再次工作。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T14:44:52.727

网络正在缓存它！我办公室的无线网络正在提供昨天的 IPA 缓存版本，而外部网络可以正常下载最新的副本。令人尴尬的是，我从未想过要检查这一点，但我认为解决方案通常事后很明显。

感谢 Jake 和 Mike 的建议；我相信他们会对遇到这个问题的其他人有所帮助。

# c# - DateTime.Now 变成 smalldatetime？

> ID：11829070
> 
> 赞同：0
> 
> 时间：2012-08-06T13:16:31.927
> 
> 标签：c#, sql-server-2008, ado.net

我试图使用 C# 获取日期和时间，然后将其插入到`smalldatetime`SQL SERVER 中的数据类型中。

这就是我尝试这样做的方式：

```
DateTime date = DateTime.Now;

        sql = "INSERT INTO YTOODLE_LINKS (YTOODLE_LINKS.TASK_ID,YTOODLE_LINKS.LINK_TITLE,YTOODLE_LINKS.LINK_DESC,YTOODLE_LINKS.LINK_PATH,YTOODLE_LINKS.USER_ID,YTOODLE_LINKS.LAST_USER_EDIT)VALUES (1,'','','',2,'1',"+ date +")";

        dataObj = new DataObj();
        dataObj.InsertCommand(sql);

  connection = new SqlConnection(conn);
        connection.Open();

        cmd = new SqlCommand(sql, connection);
        cmd.ExecuteNonQuery();
        connection.Close(); 
```

然后它给了我：“'16'附近的语法不正确。” 我想它指的是我现在的时间，现在是 16:15..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:19:25.407

我建议使用参数。 `cmd.Parameters.AddWithValue("@date", date.toString);` 将`AddWithField`负责正确的转换。

您的 InsertSQL 语句变为：

```
sql = "INSERT INTO YTOODLE_LINKS (YTOODLE_LINKS.TASK_ID,YTOODLE_LINKS.LINK_TITLE,YTOODLE_LINKS.LINK_DESC,YTOODLE_LINKS.LINK_PATH,YTOODLE_LINKS.USER_ID,YTOODLE_LINKS.LAST_USER_EDIT)VALUES (1,'','','',2,'1',@date)"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:25:32.843

它不起作用有两个原因：

1.  您的日期参数需要调用 date.ToString()
2.  您必须在将日期字符串插入内联查询之前和之后添加单引号，如下所示：

    ```
    sql = "INSERT INTO YTOODLE_LINKS (YTOODLE_LINKS.TASK_ID,YTOODLE_LINKS.LINK_TITLE,YTOODLE_LINKS.LINK_DESC,
    YTOODLE_LINKS.LINK_PATH,YTOODLE_LINKS.USER_ID,YTOODLE_LINKS.LAST_USER_EDIT)
    VALUES (1,'','','',2,'1','"+ date +"')"; 
    ```

但是上述策略并不好，因为它通过连接字符串的方式使您暴露于 SQL 注入攻击，并且还因为您必须担心添加单引号等。

更好的方法是这样使用参数：

```
sql = "INSERT INTO YTOODLE_LINKS (YTOODLE_LINKS.TASK_ID,YTOODLE_LINKS.LINK_TITLE,YTOODLE_LINKS.LINK_DESC,
    YTOODLE_LINKS.LINK_PATH,YTOODLE_LINKS.USER_ID,YTOODLE_LINKS.LAST_USER_EDIT)
    VALUES (@First,@Second,@Third,@Fourth,@Fifth,@Sixth,@YourDate)";

cmd.Parameters.AddWithValue("@First", 1);
// ... and so on
cmd.Parameters.AddWithValue("@YourDate", date); 
```

现在您不必担心sql注入攻击或根据数据类型为某些参数添加单引号等。这对您来说都是透明的，您更安全，数据库引擎将能够为您优化执行计划询问。

# c# - 如何使用编组从指针中读取 uint？

> ID：11829072
> 
> 赞同：1
> 
> 时间：2012-08-06T13:16:30.957
> 
> 标签：c#, pinvoke, marshalling

我有一个本机方法，它需要一个指针来写出一个双字（uint）。

现在我需要从 (Int) 指针中获取实际的 uint 值，但是 Marshal 类只有方便的方法来读取（有符号）整数。

如何从指针中获取 uint 值？

我搜索了问题（和谷歌），但找不到我需要的东西。

示例（不工作）代码：

```
IntPtr pdwSetting = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(uint)));

        try
        {
            // I'm trying to read the screen contrast here
            NativeMethods.JidaVgaGetContrast(_handleJida, pdwSetting);
            // this is not what I want, but close
            var contrast = Marshal.ReadInt32(pdwSetting);
        }
        finally
        {
            Marshal.FreeHGlobal(pdwSetting);
        } 
```

本机函数的返回值是一个介于 0 和 255 之间的双字，其中 255 是完全对比度。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T20:58:49.477

根据您是否可以使用 usafe 代码，您甚至可以执行以下操作：

```
static unsafe void Method()
{
    IntPtr pdwSetting = Marshal.AllocHGlobal(Marshal.SizeOf(typeof(uint)));

    try
    {
        NativeMethods.JidaVgaGetContrast(_handleJida, pdwSetting);
        var contrast = *(uint*)pdwSetting;
    }
    finally
    {
        Marshal.FreeHGlobal(pdwSetting);
    }
} 
```

注意，一个 C++ 函数指针像

```
void (*GetContrastPointer)(HANDLE handle, unsigned int* setting); 
```

可以编组为

```
[DllImport("*.dll")]
void GetContrast(IntPtr handle, IntPtr setting); // most probably what you did 
```

但也作为

```
[DllImport("*.dll")]
void GetContrast(IntPtr handle, ref uint setting); 
```

它可以让你编写类似的代码

```
uint contrast = 0; // or some other invalid value
NativeMethods.JidaVgaGetContrast(_handleJida, ref contrast); 
```

它在性能和可读性方面都非常出色。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T20:39:50.767

您可以简单地将其转换为`uint`：

```
uint contrast = (uint)Marshal.ReadInt32(pdwSetting); 
```

例如：

```
int i = -1;
uint j = (uint)i;
Console.WriteLine(j); 
```

输出`4294967295`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:21:27.700

使用采用 IntPtr 和类型并传入 typeof(uint) 的[Marshal.PtrToStructure 重载](http://msdn.microsoft.com/en-us/library/4ca6d5z7.aspx)- 这应该可以工作！

希望这可以帮助！

# python - 清理内联实例

> ID：11829075
> 
> 赞同：0
> 
> 时间：2012-08-06T13:16:48.527
> 
> 标签：python, django, django-forms, django-orm

考虑这些伪模型：

```
class Category(models.Model):
    name = models.CharField()

class Product(models.Model):
    name = models.CharField()
    code = models.CharField()
    category = models.ForeignKey(Category)
    price = models.DecimalField()
    stock = models.IntegerField()

class AlternativeProduct(Product):
    original_product = models.ForeignKey(Product, related_name="alternative", editable=False) 
```

我希望使用内联能够快速添加产品及其替代选项，而无需输入重复数据（仅代码、库存和价格区分）。

**管理员.py**

```
class AlternativeProductInline(admin.TabularInline):
    model = AlternativeProduct
    formset = AlternativeProductInlineFormset
    fk_name = "original_product"
    fields = ["code", "price", "in_stock"]
    max_num = 1
    extra = 0

class ProductAdmin(admin.ModelAdmin):
    form = ProductAdminForm
    inlines = [AlternativeProductInline] 
```

当然这会提高`ValidationError`，因为少`AlternativeProduct`了一个`category`。

现在我可以设置一个默认值来解决这个问题：

```
class Product(models.Model):
    name = models.CharField()
    code = models.CharField()
    category = models.ForeignKey(Category, default=1)
    price = models.DecimalField()
    stock = models.IntegerField() 
```

但除了这个 id 可能不存在的事实之外，它仍然需要更正。是否有任何其他方式（除了 Javascript）将正品产品的类别值复制到替代内联产品“***引擎盖下***”

我曾尝试更改 admin_view，但它变得 hackish，也许自定义视图将是一个不错的解决方案，尽管 javascript 是一种不太耗时的方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:12:36.870

Javascript 似乎确实是实现这一目标的简单方法。

```
$(document).ready(function(){
    $('#alternative-group thead th:nth-child(2)').hide();
    $('#alternative-group tbody td:nth-child(1) p').hide();
    $('#alternative-group tbody td:nth-child(3)').hide();
    $('#id_alternative-0-category').hide();

    var product_category = $('#id_category option:selected').val();
    $('#id_alternative-0-category').val(product_category);

    $("#id_category").change(function() {
        product_category = $('#id_category option:selected').val();
        $('#id_alternative-0-category').val(product_category);
    });
}); 
```

# git - 如何删除 git-notes 提交？

> ID：11829078
> 
> 赞同：9
> 
> 时间：2012-08-06T13:17:04.123
> 
> 标签：git

`git-notes`用于添加或检查对象注释。如何删除`git-notes`提交，这样 git-notes 命令的提交将不会存在于 git 历史记录中。我想删除 git-notes 提交，我不是指“git-notes remove”，它只会删除该注释并进行另一次提交。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T13:40:52.553

由于 git 将笔记存储在一个单独的（孤立的）分支上（`refs/notes/commits`默认指向），因此您可以创建分支，指向笔记头，像往常一样编辑它（`rebase`例如，使用 ），并更新对该分支尖端的笔记引用：

```
// create branch pointing to the tip of notes branch
git checkout -B notes-editing refs/notes/commits

// do whatever you want with notes-editing branch
// for example, git reset --hard HEAD^ to remove last commit

// reset notes reference to the tip of temporary branch
git update-ref refs/notes/commits notes-editing
// remove temporary branch
git checkout master
git branch -D notes-editing 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T19:24:40.253

`git notes prune`删除不存在/无法访问的对象的所有注释。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-08-06T13:25:38.367

`git notes`不会创建自己的提交。

它实际上可以用于向`git notes add`现有提交添加 () 一些注释。

当您调用`git notes remove`时，注释将被删除，并且不再进行自己的提交。

# google-app-engine - blob 校验和 (GAE)

> ID：11829079
> 
> 赞同：1
> 
> 时间：2012-08-06T13:17:06.170
> 
> 标签：google-app-engine, checksum, blobstore

这是我的问题：我想知道客户端是否成功下载了blob，那么有什么方法可以获取blob的校验和吗？或者如果它们相同，是否有一些更好的解决方案来比较 blob 和下载的文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T19:10:23.877

在几乎所有情况下，TCP/IP 的内置校验和将保护您的数据在传输过程中免受网络损坏。此外，音频文件（和其他媒体文件，如图像）对一些翻转位具有容错性。（这并不是说腐败不会引起注意，但它的影响是微乎其微的。）

如果您有理由担心来自恶意方的故意破坏（您可能没有），那么提供校验和可能是值得的。然而，让用户检查它们仍然需要一些手动输入，即使你让它尽可能简单。

这篇[文章](https://stackoverflow.com/questions/768268/how-to-calculate-md5-hash-of-a-file-using-javascript)提供了一个使用 JS 计算文件的 MD5 哈希的示例。MD5 有许多已知的弱点，所以如果你想避免恶意破坏，你可能想要使用更强大的东西（至少 SHA1）。这是[另一个使用 SHA1 的示例](http://www.ke-cai.net/2010/07/generate-sha1-file-checksum-using-html5.html)。

这些解决方案的最大缺点是，由于浏览器安全模型，用户需要手动选择文件，以便您的代码可以计算校验和。

您还需要验证您的 JS（用户正在执行以计算校验和）没有被修改，*并且*您在您的网站上比较的校验和在与它进行比较之前没有被修改本地校验和。使用 SSL 可以帮助解决这些问题。对于精明的用户，您可以在您的网站上发布校验和，并让他们使用自己的工具进行验证。

所以，总结一下：

*   您可能不需要对 MP3 执行校验和验证。
*   您可以使用基于 JS 的解决方案，但它们对用户不是特别友好。
*   大多数关心校验和的用户自己可能知道如何计算它们，因此发布校验和是一个不错的折衷方案。
*   最后，在您的网站上使用 SSL！

# webkit - 带有border-radius的img覆盖了它的边界

> ID：11829082
> 
> 赞同：1
> 
> 时间：2012-08-06T13:17:11.207
> 
> 标签：webkit, border, css

在 webkit 中，如果我在具有边框的图像上设置边框半径，则图像不会很好地位于边框内，而是覆盖边框并保持方形。

[http://jsfiddle.net/ECNJ4/](http://jsfiddle.net/ECNJ4/)

任何不意味着使用背景图像或添加标记的修复？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:39:43.773

退房：http: [//jsfiddle.net/ECNJ4/6/](http://jsfiddle.net/ECNJ4/6/)

**CSS**

```
img {
  border-radius: 15px;
  box-shadow: 0 0 0 16px red;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:33:20.043

我必须在 img 周围使用一个包装器元素才能使其工作。也许有更好的解决方案，但我没有找到。

# c# - DataRowComparer 长行比较失败除外

> ID：11829083
> 
> 赞同：3
> 
> 时间：2012-08-06T13:17:21.830
> 
> 标签：c#, linq, datatable, comparison

晚上好，

我正在构建一种缓存，比较两个数据表（最后一个读取和我需要写入的那个）并仅检索修改过的行。我使用 DataRowComparer.Default 作为平等比较器，但它的目标是错误的比较行与许多字段。

它与具有短文本值的 3 列表格完美配合，但比较长文本描述时，即使我更改单个字符，它也无法返回整个表格。

代码非常简单：

```
var diffDs = ds.Tables[0].AsEnumerable().Except(cachedTable.AsEnumerable(), DataRowComparer.Default); 
```

想法？谢谢！

**更新：** 手动调试我能够比较 ds.Tables[0].AsEnumerable() 行与 cachedtable.AsEnumerable() 行：绝对等于但 DataRowComparer 除外。我删除了任何 DateTime 列，试图避免格式差异而没有成功。交叉点也不行。

**更新 2：** 除了不适用于空/空字段。对于 IEqualityComparer，它们似乎有所不同。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T08:03:30.573

我找到了一个解决方案：

DataRowComparer 代码的工作方式如下：

```
internal static bool AreEqual(object a, object b)
    {
        if (Object.ReferenceEquals(a, b))
        {   // same reference or (null, null) or (DBNull.Value, DBNull.Value)
            return true;
        }
        if (Object.ReferenceEquals(a, null) || Object.ReferenceEquals(a, DBNull.Value) ||
            Object.ReferenceEquals(b, null) || Object.ReferenceEquals(b, DBNull.Value))
        {   // (null, non-null) or (null, DBNull.Value) or vice versa
            return false;
        }
        return (a.Equals(b) || (a.GetType().IsArray && CompareArray((Array)a, b as Array)));
    } 
```

如您所见，空值和 DBNull 的考虑方式不同，并且 null==DBNull 始终为假。显然，一个空字符串看起来像空字段，但它不是 DBNull。因此，由于这个空值，两个明显相似的表是不同的。我的解决方案在从 xml 源构建时解析 ds.Tables[0]（这是具有空字符串和空值的解决方案）并使用 System.Convert.DBNull 进行替换

现在比较完美。

如果您从 sql 查询或从 xml 源构建数据表，则 PS \n 和 \r\n 也不同。易于解决假设上面的 null/DBNull 解决方案。

# mysql - 查询结果子集，子查询语法？

> ID：11829085
> 
> 赞同：0
> 
> 时间：2012-08-06T13:17:36.670
> 
> 标签：mysql, subquery

我正在寻求有关我似乎无法解决错误的查询的帮助。

我有两张表，一张是实例，一张是操作组。每个操作组都包含实例，所以我有：

```
Groups.(ID, Verified (Y/N))
Instances.(ID, source (A/B/C/D), status (X/Y/Z, groupid) 
```

我需要做的第一件事是只隔离包含实例的组，`source=A`然后我需要用 和 计算总`source != A`实例`status = Z`。

问题是，我无法在不产生错误的情况下弄清楚子查询的放置位置。我尝试将其作为 FROM 中的别名子表，但这似乎不起作用

这是我想出的基本查询不起作用：

```
SELECT COUNT(Instances.id)
FROM (
    SELECT Instances.id
    JOIN Groups ON Instances.groupid=Groups.id
    WHERE Groups.Verified='Y' AND Instances.source='A') AS a
WHERE Groups.Verified='Y' AND Instances.source!='A' AND Instances.status='Z'; 
```

任何建议将不胜感激，谢谢！我对 SQL 很陌生，没有接受过正规培训，但现在我需要经常使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:25:51.097

此查询为您提供至少有一个实例的所有组的 ID `source = 'A'`：

```
SELECT DISTINCT(groupid) FROM Instances WHERE source = 'A' 
```

以此为基础，您需要再次查询`Instances`，只考虑属于上述组之一的那些记录

```
WHERE groupid IN (SELECT DISTINCT(groupid) FROM Instances WHERE source = 'A')
      AND source != 'A' AND status = 'Z' 
```

而且您还需要让`GROUP BY groupid`此查询分别为您提供每个组的匹配实例计数。所以最终的查询变成了

```
SELECT groupid, COUNT(*) AS instance_count FROM Instances
WHERE groupid IN (SELECT DISTINCT(groupid) FROM Instances WHERE source = 'A')
      AND source != 'A' AND status = 'Z'
GROUP BY groupid 
```

# php - 使用下拉菜单中的 ID 更新 MySQL

> ID：11829093
> 
> 赞同：0
> 
> 时间：2012-08-06T13:18:06.780
> 
> 标签：php, mysql, drop-down-menu

我想要一些关于我的代码的帮助。我已经在这个网站上搜索了已回答的问题，但不幸的是没有找到任何有效的方法。我正在做一个网站，您可以在其中编写、保存、删除和更新笔记。现在我正在尝试修复一个更新按钮，如果您可以使用其唯一 ID 更改已发布的笔记。更新按钮位于与笔记不同的页面上，您可以使用显示我的数据库表中现有 ID 的下拉菜单来选择已发布笔记的 ID。你选择它，写一个新的笔记，然后点击更新。

这是我当前的代码：

```
 <li id="id_number"><label>ID number: <select name="id_number"> 
            <option value =" ">Select number</option> 
              <?php $query = "SELECT * FROM notes"; 
              $result2 = mysql_query($query); 
              while ($row = mysql_fetch_array($result2)) { 
                $id = $row ['id']; 
                $select = ""; 
                if ($id == $idID2) {
                    $select = "selected" ; 
                    } 
                ?><option <?php print $select ?> value="<?php print $id; ?>"><?php print "$id";     
                ?></option><?php 
                }  
                ?>
          </select> 
          </label></li>
        <li id="note">New note:</li>
        <li id="note"> <textarea rows="10" cols="30" name="note" value="<?php print $note;?>"/></textarea></li>
        <li id="send"><input type="submit" name="submit" value="Update!"/></li>
    </ul>
    </form>

    <?php
        $id= $_POST ['id'];
        $subject= $_POST ['subject'];
        $note= $_POST ['note'];
    ?>

    <?php
    if (isset($_POST['submit'])) {  //validates the data
            $error="0";

            if ( $note == "" ) { 
                        $error++; 
                        $wrong .= "<p> You forgot to write a new note.</p>";
            }

        if ($error > 0) {
            print "<p><strong>You have made these errors:</strong></p>";
            ?>
                <?php print $wrong; ?>

            <?php
        }

    //if no errors  

        else { 
                $note = mysql_real_escape_string($note); 
                $note = htmlspecialchars($note);
                $id = mysql_real_escape_string($id); 
                $id = htmlspecialchars($id);
                $date = date("j/n, Y, H:i");
                $query = ("UPDATE notes SET note='$note' WHERE id='$id'");
                $result = mysql_query($query) or die (mysql_error()); 
                if ($result) { 
                print "<p>Note updated!</p>";
            }
        }   
    }

    ?> 
```

选择现有 ID 并更改注释并单击更新时，它会显示“注释已更新”，但数据库中的注释保持不变。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:29:04.467

而不是回答“我做错了什么？” 我要回答“我怎样才能正确地做到这一点？”

您的界面以不直观的方式设置。下拉列表应包含有关便笺的信息（此处 ID 就足够了），当用户从下拉列表中选择便笺时，您的文本输入应填充已有的内容。如果没有从下拉列表中选择笔记 ID 并且用户点击“更新”，系统应该插入一个新的笔记记录（如果文本区域有内容）。

那么，我们该怎么做呢？首先让我们设置我们的表单：

```
<form action="" method="post">
    <select id="noteIds" name="noteId">
        <option value=''>Select a Note</option>
        <option value='1'>1</option>
        <option value='2'>2</option>
        .
        .
        .
    </select> <br />
    <textarea name="noteContents" id="noteContents"></textarea><br />
    <input type="submit" value="Update" />
</form> 
```

现在我们已经设置了表单，我们可以使用 jQuery 控制元素的行为：

```
<script language="javascript" type="text/javascript">
    $("#noteIds").on('change', function() { 
        $.post("getNoteInfo.php", {
                noteId: $(this).val()
            }, function(data) {
                $("#noteContents").html(data);
            }
        );
    });
</script> 
```

上面的代码会将*geNoteInfo.php*的输出设置为你的 textarea 的内容。

接下来让我们处理*getNoteInfo.php*（在伪代码中）。

```
<?php
    $noteId = $_POST['noteId'];

    $noteText = // retrieve note text from database where note ID = $noteId

    echo $noteText; 
```

现在，当用户单击 时`Update`，检查是否选择了一个 ID。如果选择了 ID，则更新该行。如果没有选择 ID，如果 textarea 中有文本，则插入新行。

**注意：**您应该停止使用`mysql_*`函数。它们正在被弃用。而是使用[PDO](http://php.net/manual/en/book.pdo.php)（从 PHP 5.1 开始支持）或[mysqli](http://php.net/manual/en/book.mysqli.php)（从 PHP 4.1 开始支持）。如果您不确定要使用哪一个，[请阅读这篇 SO 文章](https://stackoverflow.com/questions/13569/mysqli-or-pdo-what-are-the-pros-and-cons)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:22:30.753

```
$id = $_POST['id'] 
```

应该

```
$id = $_POST['id_number'] 
```

据我所知，您所指的不是任何名称为“id”的输入。

# ios - 新手：使用有序顶点数组绘制 OpenGL ES 形状

> ID：11829096
> 
> 赞同：0
> 
> 时间：2012-08-06T13:18:29.570
> 
> 标签：ios, opengl-es, opengl-es-2.0, vertex-buffer

我是 OpenGL ES 的新手，但对 Objective-C 和 iOS 开发非常有经验。到目前为止，通过使用以下代码定义顶点数组和相应的索引数组，我使用顶点缓冲区对象绘制和着色形状没有问题

```
GLuint vertexBuffer;
glGenBuffers(1, &vertexBuffer);
glBindBuffer(GL_ARRAY_BUFFER, vertexBuffer);
glBufferData(GL_ARRAY_BUFFER, sizeof(Verticies), Verticies, GL_STATIC_DRAW);

GLuint indexBuffer;
glGenBuffers(1, &indexBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, indexBuffer);
glBufferData(GL_ELEMENT_ARRAY_BUFFER, sizeof(Indices), Indices, GL_STATIC_DRAW); 
```

然后使用以下代码绘制到屏幕：

```
glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]), GL_UNSIGNED_BYTE, 0);
[_context presentRenderbuffer:GL_RENDERBUFFER]; 
```

这对于我可以在代码中定义自己的基本形状来说都很好。现在我已经有人生成了从 3D 图形程序导出的 .h 文件，其中包含定义形状所需的信息，但它们不包含索引数组。相反，索引信息以某种方式嵌入到顶点数组中。顶点数组具有重复的坐标，这些坐标定义了它们的绘制顺序。请参阅下面的示例代码。我现在还有一个法线数组和一个纹理坐标数组。谁能告诉我（或指向我的教程/指南）我将如何使用（阅读：绘制）这些数据，而不是像以前那样使用单独的顶点/索引数组？提前致谢！

```
#define poleNumVerts 276

static const float poleVerts [] = {
  // f 1/1/1 2/2/2 3/3/3
  -0.0170377877807436, -0.00478429549256308, 0.5,
  -0.0170377877807436, 0.00409214741631937, 0.5,
  -0.0176220932500109, -0.00034605799118996, 0.5,
  // f 2/2/2 1/1/1 4/4/4
  -0.0170377877807436, 0.00409214741631937, 0.5,
  -0.0170377877807436, -0.00478429549256308, 0.5,
  -0.015324690688248, -0.00892006666692703, 0.5,
  // f 2/2/2 4/4/4 5/5/5
  -0.0170377877807436, 0.00409214741631937, 0.5,
  -0.015324690688248, -0.00892006666692703, 0.5,
  -0.015324690688248, 0.00822795297696595, 0.5,
  // f 5/5/5 4/4/4 6/6/6
  -0.015324690688248, 0.00822795297696595, 0.5,
  -0.015324690688248, -0.00892006666692703, 0.5,
  -0.012599557156627, 0.0117794232669002, 0.5,
  // f 6/6/6 4/4/4 7/7/7
  -0.012599557156627, 0.0117794232669002, 0.5,
  -0.015324690688248, -0.00892006666692703, 0.5,
  -0.012599557156627, -0.0124715369568613, 0.5,
  // f 6/6/6 7/7/7 8/8/8
  -0.012599557156627, 0.0117794232669002, 0.5,
  -0.012599557156627, -0.0124715369568613, 0.5,
  -0.0090480845742739, -0.015196688827833, 0.5,

  ...... <code truncated>... };

static const float poleNormals [] = {
  // f 1/1/1 2/2/2 3/3/3
  0, 0, 1,
  0, 0, 1,
  0, 0, 1,
  // f 2/2/2 1/1/1 4/4/4
  0, 0, 1,
  0, 0, 1,
  0, 0, 1,
  // f 2/2/2 4/4/4 5/5/5
  0, 0, 1,
  0, 0, 1,
  0, 0, 1,
  // f 5/5/5 4/4/4 6/6/6
  0, 0, 1,
  0, 0, 1,
  0, 0, 1,
  // f 6/6/6 4/4/4 7/7/7
  0, 0, 1,
  0, 0, 1,
  0, 0, 1,
  // f 6/6/6 7/7/7 8/8/8
  0, 0, 1,
  0, 0, 1,
  0, 0, 1,
  // f 6/6/6 8/8/8 9/9/9

  ...... <code truncated>...};

static const float poleTexCoords [] = {
  // f 1/1/1 2/2/2 3/3/3
  0.939514, 0.37333,
  0.928115, 0.619208,
  0.950000, 0.49702,
  // f 2/2/2 1/1/1 4/4/4
  0.928115, 0.619208,
  0.939514, 0.37333,
  0.897372, 0.25657,
  // f 2/2/2 4/4/4 5/5/5
  0.928115, 0.619208,
  0.897372, 0.25657,
  0.875352, 0.73157,
  // f 5/5/5 4/4/4 6/6/6
  0.875352, 0.73157,
  0.897372, 0.25657,
  0.795305, 0.826446,
  // f 6/6/6 4/4/4 7/7/7
  0.795305, 0.826446,
  0.897372, 0.25657,
  0.826446, 0.154695,
  // f 6/6/6 7/7/7 8/8/8
  0.795305, 0.826446,
  0.826446, 0.154695,
  0.731570, 0.074647,
  // f 6/6/6 8/8/8 9/9/9
  0.795305, 0.826446,
  0.731570, 0.074647,
  0.693430, 0.897371,

  ..... <code truncated>.... }; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:41:14.337

如果您没有索引列表，您可能需要按顺序绘制所有顶点。您可以使用`glDrawArrays`而不是`glDrawElements`. 它们是相同的，但前者不使用索引数组（相当于传递 to 的索引数组`{0, 1, 2, 3, ...}`）`glDrawElements`。

# ftp - 尝试使用 FTP 传输文件时出现文件覆盖问题

> ID：11829097
> 
> 赞同：1
> 
> 时间：2012-08-06T13:18:32.973
> 
> 标签：ftp, ftp-client, splfileobject

我有一个只有 List 和 Put 权限的 FTP 服务器。但没有删除、覆盖和重命名权限。

现在，当我尝试使用以下实现使用简单的 FTP 传输文件时

```
 private boolean sendFileStreamHelper(InputStream inputStream, String nameOfFileToStore, String filetransferDestFolder) throws FileTransferException {
    Log.info("Inside SendFile inputstream method to trasport the input stream of file " + nameOfFileToStore + " data to " + filetransferDestFolder);
    BufferedOutputStream os = null;
    FileObject fo = null;
    try {
        fo = getFileObject(nameOfFileToStore, filetransferDestFolder, ftpAuthDetails.getServerName(), ftpAuthDetails.getUsername(), ftpAuthDetails
                .getPassword(), ftpAuthDetails.getPort());
        fo.createFile();// create a file in the remote to transfer the file

        os = new BufferedOutputStream(fo.getContent().getOutputStream());

        FileUtil.readStream(inputStream, os);

        return true;
    } catch (Exception ex) {
        Log.error("File transfer exception occurred while transferrig the file " + nameOfFileToStore + " to " + filetransferDestFolder, ex);
        throw new FileTransferException(ex);
    } finally {
        if (os != null) {
            try {
                os.flush();
                os.close();
            } catch (IOException e) {
                Log.warn(getClass(), " Error while closing the buffer output stream", e);
            }
        }
        if (fo != null) {
            try {
                fo.close();
            } catch (IOException e) {
                Log.warn(getClass(), " Error while closing the File object", e);
            }
        }
        closeCache(); // Close the VFS Manager instance
    }
} 
```

在上面的代码中，文件是使用文件对象实例在远程创建的。后来我试图用缓冲流写文件。在这里，系统就像它正在写入一个已经创建的文件一样，并且我的服务器没有任何覆盖权限，从而引发以下错误。

```
29 Jul 2012 21:03:06 [ERROR] FC_ClusteredScheduler_Worker-2(1) com.abc.filetransfer.FileTransferClient - .sendFileStreamHelper(FileTransferClient.java:170) - File transfer exception occurred while transferrig the file *******.txt to / ex-org.apache.commons.vfs2.FileSystemException: Could not write to "ftp://******:***@***.***.***.***/*********.txt"
org.apache.commons.vfs2.FileSystemException: Could not write to "ftp://******:***@***.***.***.***/*********.txt".
    at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1439)
    at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:461)
    at org.apache.commons.vfs2.provider.DefaultFileContent.getOutputStream(DefaultFileContent.java:441)
    at com.abc.filetransfer.FileTransferClient.sendFileStreamHelper(FileTransferClient.java:164)
    at com.abc.filetransfer.FileTransferClient.sendFile(FileTransferClient.java:131)
    at com.abc.filetransfer.FileTransferClient.sendFile(FileTransferClient.java:103)
    at com.abc.filetransfer.client.FTPTransferClient.sendFile(FTPTransferClient.java:65)
Caused by: org.apache.commons.vfs2.FileSystemException: Cant open output connection for file "ftp://******:***@***.***.***.***/*********.txt".
 Reason: "**550 File unavailable. Overwrite not allowed by user profile**^M
    at org.apache.commons.vfs2.provider.ftp.FtpFileObject.doGetOutputStream(FtpFileObject.java:648)
    at org.apache.commons.vfs2.provider.AbstractFileObject.getOutputStream(AbstractFileObject.java:1431) 
```

请让我知道如何使用文件对象处理文件传输，以便文件创建和写入流应该同时发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-08T07:32:55.260

我已经解决了这个问题。

它非常简单。在下面的代码中

```
 fo = getFileObject(nameOfFileToStore, filetransferDestFolder, ftpAuthDetails.getServerName(), ftpAuthDetails.getUsername(), ftpAuthDetails
            .getPassword(), ftpAuthDetails.getPort());
    fo.createFile();// create a file in the remote to transfer the file

    os = new BufferedOutputStream(fo.getContent().getOutputStream());

    FileUtil.readStream(inputStream, os); 
```

我首先使用 FileObject 创建一个文件，然后尝试将 BOS 写入文件。

在这里，将 BOS 写入文件系统时，我们认为我们正在尝试将数据添加到已经存在的文件中（因为我分两个单独的步骤来执行此操作，创建文件并将数据写入相同的文件）并返回错误

```
**550 File unavailable. Overwrite not allowed by user profile* 
```

我已删除

```
fo.createFile() 
```

因为 BOS 在写入数据时会以任何方式创建一个文件（如果不可用）。

谢谢你的时间。
普鲁绍瑟姆雷迪

# javascript - HTML5 Canvas 动画问题

> ID：11829103
> 
> 赞同：1
> 
> 时间：2012-08-06T13:18:54.843
> 
> 标签：javascript, html, canvas

我正在尝试使用 HTML5 Canvases 来创建一些动画。我的最终目标是能够随心所欲地将一个盒子动画到一个特定的位置，现在我只是在屏幕上动画它。当我在屏幕上移动它时，我会留下黑色痕迹，如何在不删除背景网格的情况下清除这个“脏”部分？

代码的 jsFiddle 在[这里](http://jsfiddle.net/SV8x2/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:24:04.000

两种解决方案

*   在将动画移动到新位置之前，重新绘制动画顶部的背景。这种所谓的脏精灵技术 - 更快 - 更复杂。

*   在帧之间重绘整个画布

如果绘制背景是一项复杂的操作，只需将准备好的背景缓冲在另一个画布中以提高速度。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:25:31.673

如果您不希望它可见，则必须清除所绘制的内容。我假设您不想清除整个画布以避免重绘网格和花费 CPU 周期。您必须以不同的方式执行此操作。

可能的解决方案：

*   有两个相同的屏幕画布一个在另一个上。在下面的画布上绘制网格，不要清除它。清除顶部画布的一部分并在其上重新绘制。
*   有一个屏幕上和一个屏幕外的画布。在屏幕外画布上绘制网格。每次制作动画时，清除整个屏幕画布，从其他画布复制准备好的网格，然后在其上绘制您需要的内容。

# asp.net-mvc-3 - 根据用户类型登录

> ID：11829106
> 
> 赞同：0
> 
> 时间：2012-08-06T13:19:10.003
> 
> 标签：asp.net-mvc-3

我正在使用 asp.net mvc 3 制作一个 Web 应用程序，它也具有登录功能。

有 3 种不同类型的用户将使用该站点：管理员、操作员和分销商。

如何创建限制经销商访问网站管理员和运营商部分的登录名。同样，操作员不应该能够访问管理员和分销商部分。管理员也不能访问其他类型的用户部分。即网站应该在登录后将管理员类型的用户重定向到他自己的网站部分。

最后，没有人应该能够在没有登录的情况下访问他们自己的网站部分。

请任何人都可以帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:29:26.863

查看[ASP.NET 的成员资格模型](http://weblogs.asp.net/scottgu/archive/2006/02/24/ASP.NET-2.0-Membership_2C00_-Roles_2C00_-Forms-Authentication_2C00_-and-Security-Resources-.aspx)。此模型用于对 Web 应用程序的不同部分的用户进行身份验证和授权。

使用成员资格模型，在您的应用程序中定义三个角色：管理员、操作员和分销商。当然，也可以在您的应用程序中创建用户并将他们划分为这些角色。

最后是实际的身份验证和授权。使用[Authorize 属性](http://msdn.microsoft.com/en-us/library/system.web.mvc.authorizeattribute.aspx)来定义用户必须拥有哪个角色才能访问您网站的某个部分。

```
[Authorize(Roles = "Operator")]
public ActionResult OperatorOnlyStuff()
{
    return View();
} 
```

并且为了确保用户应该登录以访问您网站上的任何内容，请定义[自定义身份验证路由约束](http://stephenwalther.com/archive/2008/08/07/asp-net-mvc-tip-30-create-custom-route-constraints.aspx)。

```
public class AuthenticatedRouteConstraint : IRouteConstraint
{
    public bool Match(HttpContextBase httpContext, Route route, string parameterName, RouteValueDictionary values, RouteDirection routeDirection)
    {
        return httpContext.Request.IsAuthenticated;
    }
} 
```

并在您的默认路由中使用此自定义身份验证路由约束：

```
routes.MapRoute(
    "Default",
    "{controller}/{action}/{id}",
    new { controller = "Home", action = "Index", id = UrlParameter.Optional },
    new { isAuthenticated = new AuthenticatedConstraint()}
); 
```

# c# - 为什么我的 DataGrid 中的 SelectedIndex 为“-1”？

> ID：11829108
> 
> 赞同：0
> 
> 时间：2012-08-06T13:19:12.597
> 
> 标签：c#, wpf, xaml

如果我设置属性：

```
EnableRowVirtualization="True"
RowDetailsVisibilityMode="VisibleWhenSelected"
SelectionMode="Extended"
SelectionUnit="Cell" 
```

我的数据网格，然后：

```
int parse = dataGrid1.SelectedIndex; 
```

返回“-1”，为什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:22:18.320

您没有在网格中选择任何内容 - 请记住它是从零开始的索引，因此第一行/项目将返回“0”。根据[MSDN 文档](http://msdn.microsoft.com/en-us/library/system.windows.controls.primitives.selector.selectedindex.aspx)：

> 如果选择为空，SelectedIndex 返回 -1

你的下一行代码应该是

```
if (parse >= 0)
{
     //...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:24:19.180

像这样的大多数控件将在未选择任何`SelectedIndex`内容`-1`时返回。`ListBox`（例如，这也是如此`ComboBox`。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-04-19T14:00:19.600

如果 datagrid SelectionUnit="Cell" 那么你必须使用

```
int parse = datagrid1.Items.IndexOf(datagrid1.CurrentItem) 
```

如果 datagrid SelectionUnit="FullRow" 那么你可以使用

```
int parse = datagrid1.SelectedIndex 
```

# c# - 更改后 TreeView 不刷新

> ID：11829109
> 
> 赞同：0
> 
> 时间：2012-08-06T13:19:17.963
> 
> 标签：c#, wpf, xml, treeview

我为 IIS web.config 文件的版本编写了一个程序。我的 TreeView 控件出现问题，在我更改源 XmlDocument 变量中的某些内容后不想刷新自身。
这是 WPF 项目。

XAML 中的窗口资源：

```
<Window.Resources>
   <XmlDataProvider x:Key="XmlData" />
</Window.Resources> 
```

我的树视图：

```
<TreeView x:Name="XmlTree" Grid.Row="1"
   ItemsSource="{Binding Source={StaticResource XmlData}, XPath=*}"
   ItemTemplate="{StaticResource NodeTemplate}"
   SelectedItemChanged="XmlTree_SelectedItemChanged" /> 
```

树视图样式：

```
<DataTemplate x:Key="AttributeTemplate">
    <StackPanel Orientation="Horizontal"
            Margin="3,0,0,0"
            HorizontalAlignment="Center">
        <TextBlock Text="{Binding Path=Name}"
             Foreground="{StaticResource xmAttributeBrush}" FontFamily="Consolas" FontSize="8pt" />
        <TextBlock Text="=&quot;"
             Foreground="{StaticResource xmlMarkBrush}" FontFamily="Consolas" FontSize="8pt" />
        <TextBlock Text="{Binding Path=Value}"
             Foreground="{StaticResource xmlValueBrush}" FontFamily="Consolas" FontSize="8pt" />
        <TextBlock Text="&quot;"
             Foreground="{StaticResource xmlMarkBrush}" FontFamily="Consolas" FontSize="8pt" />
    </StackPanel>
</DataTemplate>

<HierarchicalDataTemplate x:Key="NodeTemplate">
    <StackPanel Orientation="Horizontal" Focusable="False">
        <TextBlock x:Name="tbName" Text="?" FontFamily="Consolas" FontSize="8pt" />
        <ItemsControl
            ItemTemplate="{StaticResource AttributeTemplate}"
            ItemsSource="{Binding Path=Attributes}"
            HorizontalAlignment="Center">
            <ItemsControl.ItemsPanel>
                <ItemsPanelTemplate>
                    <StackPanel Orientation="Horizontal"/>
                </ItemsPanelTemplate>
            </ItemsControl.ItemsPanel>
        </ItemsControl>
    </StackPanel>
    <HierarchicalDataTemplate.ItemsSource>
        <Binding XPath="*" />
    </HierarchicalDataTemplate.ItemsSource>
    <HierarchicalDataTemplate.Triggers>
        <DataTrigger Binding="{Binding Path=NodeType}" Value="Text">
            <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Value}"/>
        </DataTrigger>
        <DataTrigger Binding="{Binding Path=NodeType}" Value="Element">
            <Setter TargetName="tbName" Property="Text" Value="{Binding Path=Name}"/>
        </DataTrigger>
    </HierarchicalDataTemplate.Triggers>
</HierarchicalDataTemplate> 
```

后面的代码：

```
private XmlDocument _xml;
private XmlElement _selectedElement; // actually selected item in TreeView
private XmlDataProvider _xmlDataProvider;
private string _tempFileName = @"C:\test.xml";

public MainWindow()
{
    InitializeComponent();

    XmlTree.Style = (Style)FindResource("TreeViewAllExpandedStyle");
    _xmlDataProvider = FindResource("XmlData") as XmlDataProvider;
}

private void OpenXmlFile(string filePath)
{
    XmlEditor.Clear(); // my text editor provided by AvalonEdit
    XmlEditor.Load(filePath);

    _xml = new XmlDocument();
    _xml.Load(filePath);

    if(_xmlDataProvider.Document == null)
        _xmlDataProvider.Document = _xml;
}

private void saveChangesButton_Click(object sender, EventArgs e)
{
    // some changes on _selectedElement (changes applies also into _xml)

    _xml.Save(_tempFileName);
    RefreshViews();
}

private void RefreshViews()
{
    // 
    OpenXmlFile(_tempFileName);

    // here I want to refresh my TreeView
    // I noticed that when I select back my changed item, its values are set, but in my tree I see the old ones...
    // I tried to do XmlTree.Focus() (nothing happens excepting control focus)
    // and _xmlDataProvider.Refresh() (here comes NullReferenceException)
    // I guess something bad happens in OpenXmlFile(...) method, because I reopen _xml and _xmlDataProvider looses a handler to it?
} 
```

谁能解释为什么它不起作用？

**[编辑]**

我试图修改这样的2种方法：

```
private void OpenXmlFile(string filePath)
{
    XmlEditor.Clear();
    XmlEditor.Load(filePath);

    _xml = new XmlDocument();
    _xml.Load(filePath);

    _xmlDataProvider.Document = _xml;
}

private void saveChangesButton_Click(object sender, EventArgs e)
{
    // ...

    _xmlDataProvider.Document.Save(_tempFileName);
    _xmlDataProvider.Refresh();
} 
```

现在我得到 NullReferenceException 而`_xmlDataProvider.Refresh();`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:24:46.133

您好，您可以尝试在 TreeView 和 observable 集合上使用双向绑定。

```
{Binding .... Mode=TwoWay, UpdateSourceTrigger=PropertyChanged} 
```

首先你可以修改你的绑定

```
ItemsSource="{Binding Source={StaticResource XmlData}, XPath=*, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:27:38.827

如果它是空的，你只是`xmlDataProvider.Document`在你的函数中设置它的值。`OpenXmlFile()`当您设置 `_xml = new XmlDocument();`时，它设置`_xml`为指向一个新对象，但`xmlDataProvider`仍指向旧对象。然后，您有以下两行：

```
if(_xmlDataProvider.Document == null)
    _xmlDataProvider.Document = _xml; 
```

如果您从 , 进入这里`RefreshViews()`，`_xmlDataProvider.Document`则不会为空，因此您永远不会刷新与您的数据提供者绑定的 XML 文件。

# android - 在“导入 Maven 项目”期间发生内部错误。com/android/io/StreamException

> ID：11829114
> 
> 赞同：3
> 
> 时间：2012-08-06T13:19:27.683
> 
> 标签：android, eclipse, maven, adt, m2e

我对 Android 开发还很陌生，所以我决定从简单的 hello world 应用程序开始”我的步骤是：

1.  在命令行中：“mvn archetype:generate -DarchetypeArtifactId=android-quickstart -DarchetypeGroupId=de.akquinet.android.archetypes -DarchetypeVersion=1.0.7 -DgroupId=com.agibalov -DartifactId=my-app” 成功后进入eclipse
2.  File->Import->Existing Maven Project->Selected project I've just created with maven，点击“Finish”后出现错误“An internal error occurred during: “Importing Maven projects”.com/android/io/StreamException”

* * *

*   Maven 版本 3.0.3
*   Java 版本 1.7.0_05
*   日食朱诺或赫利俄斯
*   为 Eclipse IDE 安装 ADT 插件
*   适用于 m2e 的 Android 配置器

如果需要更多详细信息来防止此错误，请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:24:31.973

这是 ADT 20.0.0+ 和 Android Connector for Maven (m2e-android) 插件的一个已知问题。新的 0.4.2 版本修复了今天发布的这个问题，请运行 Eclipse 更新（帮助 -> 检查更新），如果这能解决您的问题，请告诉我。

# php - 在 SQL LIKE 中使用的清理表单数据

> ID：11829123
> 
> 赞同：0
> 
> 时间：2012-08-06T13:20:33.130
> 
> 标签：php, mysql, sql-like

我使用 mysqli_real_escape_string 清理帖子数据。那么，我是否也应该将 addcslashes() 应用于 SQL LIKE 子句中使用的变量？

[我知道使用准备好的语句可能会否定这个讨论。]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:33:33.183

如果你不能使用准备好的语句（总是一个不错的选择） - 据我所知，最好也像通配符一样转义 mysql：

```
addcslashes($param, '%_'); 
```

# php - 致命错误：在第 4 行的 ...\lib\myUser.class.php 中找不到类 'sfGuardSecurityUser'

> ID：11829125
> 
> 赞同：0
> 
> 时间：2012-08-06T13:20:38.790
> 
> 标签：php, doctrine, symfony-1.4, sfguard

我得到那个错误

> 致命错误：在第 4 行的...\lib\myUser.class.php 中找不到类 'sfGuardSecurityUser'

这是我的设置.yml

```
all:
  .settings:

    csrf_secret:            unCodeSecret
    enabled_modules:        [default, sfGuardAuth]
    escaping_strategy:      true
    escaping_method:        ESC_SPECIALCHARS
    use_database:           true

  .actions:

    login_module: sfGuardAuth
    login_action: signin` 
```

和 myUser.class

```
class myUser extends sfGuardSecurityUser
{
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:23:39.787

[您是否按照此处](http://www.symfony-project.org/plugins/sfGuardPlugin/4_0_2?tab=plugin_readme)的每个步骤进行操作？

你清除缓存了吗？

```
php symfony cc 
```

你启用插件了`config/ProjectConfiguration.class.php`吗？

```
$this->enablePlugins(array(
  'sfDoctrinePlugin',
  'sfDoctrineGuardPlugin',
  // ... 
```

# ajax - Knockout Mapping - 填充 Observable 数组以保持项目的方法

> ID：11829126
> 
> 赞同：1
> 
> 时间：2012-08-06T13:20:41.987
> 
> 标签：ajax, knockout.js, knockout-mapping-plugin, ko.observablearray

我一直面临一个基本上如下的问题：

*   我有一个淘汰视图模型，其中包含具有可观察属性和方法的可观察项目数组。
*   我需要从服务器中提取数据。从服务器获取数据后，方法需要存在。所以我创建了一个新的 ViewModel，然后根据来自服务器的内容更新它的值。**（这不起作用，生成的数组没有项目）**
*   如果我使用生成的 Array创建`mapping`一个新对象，它有项目，**但它的项目没有方法。****它破坏了我的绑定。**`var newObj = ko.mapping.fromJS(data)`

 **我的问题的小提琴：http: [//jsfiddle.net/claykaboom/R823a/3/](http://jsfiddle.net/claykaboom/R823a/3/)（它可以在您单击**“从服务器加载数据”**时使用）

最后一个问题是：在不使加载过程过于繁琐的情况下，将项目放在最终数组中的最佳方法是什么，例如遍历每个项目并填充项目的属性以保留先前声明的方法？

谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:53:44.083

我稍微改变了你的代码。检查此版本的[JSFiddle](http://jsfiddle.net/gurkavcu/jyqJE/)。

```
 var jsonFromServer = '{"ModuleId":1,"Metadatas":[{"Id":1,"MinValue":null,"MaxValue":null,"FieldName":"Teste","SelectedType":"String","SelectedOptionType":null,"IsRequired":true,"Options":[]}]}'; 
```

您的代码不起作用，因为您的 jsonFromServer 变量不包含我们在绑定时需要的方法，就像您在问题中描述的那样。(--> 元数据)

所以我们需要在映射过程中为 Metadata 对象定义一个自定义创建函数，如下所示：

```
var mapping = {
    'Metadatas': {
        create: function(options) {
            var newMetaData = new MetadataViewModel(options.parent);

            newMetaData.Id(options.data.id);
            newMetaData.FieldName(options.data.FieldName);
            newMetaData.SelectedType(options.data.SelectedType);
            newMetaData.SelectedOptionType(options.data.SelectedOptionType);
            newMetaData.IsRequired(options.data.IsRequired);
            newMetaData.Options(options.data.Options);

            // You can get current viewModel instance via options.parent
            // console.log(options.parent);

            return newMetaData;
        }
    }
} 
```

然后我将您的加载功能更改为：

```
self.LoadDataFromServer = function() {

    var jsonFromServer = '{"ModuleId":1,"Metadatas":[{"Id":1,"MinValue":null,"MaxValue":null,"FieldName":"Teste","SelectedType":"String","SelectedOptionType":null,"IsRequired":true,"Options":[]}]}';

    ko.mapping.fromJSON(jsonFromServer, mapping, self);
} 
```

您不必声明新的 viewModel 并再次调用 ko.applyBindings。将更新后的映射分配给当前 viewModel 就足够了。有关更多信息，请查看[此链接](http://knockoutjs.com/documentation/plugins-mapping.html)。注意自定义对象构造部分。

> 最后一个问题是：在不使加载过程过于繁琐的情况下，将项目放在最终数组中的最佳方法是什么，例如遍历每个项目并填充项目的属性以保留先前声明的方法？

据我所知，没有简单的方法可以通过您的对象实现来做到这一点。你的对象并不简单。它们同时包含数据和函数。因此，您需要为它们定义自定义创建功能。但是，如果您能够像下面这样将其分开，那么您不必自定义对象构造。

例如，将 MetadataViewModel 分离到两个不同的对象：

```
 --> Metadata  : which contains only simple data
 --> MetadataViewModel : which contains Metadata observableArray and its Metadata manipulator functions 
```

使用此结构，您可以调用 ko.mapping.fromJSON(newMetaDataArray , {} , MetadataViewModelInstance.MetadataArray) 而无需在映射过程中定义自定义创建函数。**

# mysql - 对所有值求和，忽略减号

> ID：11829127
> 
> 赞同：1
> 
> 时间：2012-08-06T13:20:44.737
> 
> 标签：mysql, codeigniter

好的，所以我有一个 mySQL 值表。有些是积极的，有些是消极的。负数在表中前面有一个 -。我正在使用 Codeigniter。

我需要将它们加在一起，但在负值之前忽略 - 。我只想对数字求和，而不是将它们求和为负数。

例如，这就是它目前所做的：-55 + -20 = 35

但我想要它做的是：-55 + -20 = 75

基本上我只想对这些值求和，而不管它们的正面或负面类型。

我怎样才能做到这一点？这是我的查询：

```
$this->db->select_sum('vat')
     ->from('accounts')->where_in('type', 'Expenses')
     ->where('date <=', $current_period)
     ->where('date >=', $previous_period); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:26:08.810

也许这样的事情会起作用：

```
$this->db->select('SUM(CASE WHEN vat >= 0 THEN vat ELSE -vat END) AS sum', false)->from('accounts')->where_in('type', 'Expenses')->where('date <=', $current_period)->where('date >=', $previous_period); 
```

这应该保持正数为`vat`正数并将负数转换为正数。注意：语句`false`中的`select()`阻止 CI 自动转义字段。

此外，从@shubhansh 的评论中可以看出，您可以使用 MySQL 的[`ABS()`](http://dev.mysql.com/doc/refman/5.0/en/mathematical-functions.html#function_abs)方法来获取绝对值，而不是`CASE`：

```
$this->db->select('SUM(ABS(vat)) AS sum', false)->from('accounts')->where_in('type', 'Expenses')->where('date <=', $current_period)->where('date >=', $previous_period); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:29:46.993

我可以想到两种方法。

第一种方式：我很确定 CI 会转义字段名称，所以要这样做，您需要执行普通查询：

```
$this->db->query('SELECT SUM(AVG(vat)) FROM accounts WHERE ...'); // Replace ... with WHERE parameters 
```

第二种方式：或者做两个查询并对结果求和：

```
$positive = $this->db->select_sum('vat')->from('accounts')->where_in('type', 'Expenses')->where('date <=', $current_period)->where('date >=', $previous_period)->where('vat >=', 0);
$negative = $this->db->select_sum('vat')->from('accounts')->where_in('type', 'Expenses')->where('date <=', $current_period)->where('date >=', $previous_period)->where('vat <', 0);
$result = $positive + abs($negative); 
```

请注意，第二个选项需要更长的时间才能完成，因为这是两个单独的查询。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-05T06:09:34.503

我在数据库级别上进行日期搜索时遇到了同样的问题——我能做的最好的事情是使用 ABS()，因为如果结果是过去的，time_diff 返回一个负值。如果正在使用 date_diff 或 TIME_DIFF 使用这个：

```
TIME(ABS(TIMEDIFF(TIME(sch_Starts), TIME("22:00:00")))) 
```

如果您使用像我这样的时间特定功能，它可能会产生负面结果，通过 ABS 将其转换并围绕 TIME() 将其转换回时间。

也许乏味，但它工作 100%

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-09-18T18:10:23.660

你总是可以尝试：

```
where table.field NOT LIKE '%-%' 
```

# delphi - 如何反编译不是.net模块的.exe文件

> ID：11829129
> 
> 赞同：5
> 
> 时间：2012-08-06T13:20:57.387
> 
> 标签：delphi, reverse-engineering, decompiling, decompiler

我正在尝试反编译一个名为 App.exe 的文件。当我尝试使用反射器反编译此文件时，出现 App.exe 不是 .Net 模块的错误。

看到这张图，你可以明白我想说什么：

[![在此处输入图像描述](../Images/ecbe9c1bf4b2dd8007b7aaa0d13007f4.png)](https://i.stack.imgur.com/sxajF.png)

然后我尝试使用 CFF Explorer 检查这个文件是用什么语言编写的。对于 App.exe，它显示如下：

[![在此处输入图像描述](../Images/8ff66edfa535cba579ec3ea5382fffb0.png)](https://i.stack.imgur.com/9k8uk.png)

对于 VSM.exe，它显示：

[![在此处输入图像描述](../Images/cc96f38d9b10968204f3ecf3e55c1d67.png)](https://i.stack.imgur.com/fegsn.png)

这两个文件仅由一家公司创建，但我不明白为什么它不反编译。

不是在.NET中创建的.exe文件不能被反编译吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:43:26.990

这是关于反编译 Delphi 应用程序的文章：http: [//delphi.about.com/od/devutilities/a/decompiling.htm](http://delphi.about.com/od/devutilities/a/decompiling.htm)

这比使用 .NET 程序要困难得多。你想达到什么目的？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T17:38:53.293

[使用IDR](http://kpnc.org/idr32/en/index.htm)（交互式 Delphi Reconstructor）和[IDA](http://www.hex-rays.com/idapro/)（交互式反汇编程序）和[PE Explorer](http://www.heaventools.com/)（用于表单/dfm）获得最佳结果

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:29:04.483

该应用程序不是 .NET 应用程序，这意味着它是使用不同的编译器编译的。所以不会有 IL（中间语言）元素供反射器反映。这正是您应该期待的。

您可以从 Depends.exe 开始

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-05-16T15:01:59.467

使用 protection_id.exe 确定[http://pid.gamecopyworld.com/](http://pid.gamecopyworld.com/)

1.  编译器和
2.  保护器/封隔器

根据编译器的不同，有多种选项，例如

Ollydbg、DeDe、交互式 Delphi Reconstructor、IDA 等

我更喜欢 Delphi 的 DeDe。

# regex - 正则表达式 - 允许破折号？

> ID：11829131
> 
> 赞同：1
> 
> 时间：2012-08-06T13:21:02.187
> 
> 标签：regex

我有以下 javascript 不允许用户在字段中输入任何特殊字符，但我确实想破例并允许使用破折号 (-)：

```
function Validate(txt)
{
    txt.value = txt.value.replace(/[^a-zA-Z 0-9\n\r]+/g, '');
} 
```

如何修改它以将破折号添加到允许列表中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:23:29.880

要允许破折号 ( `-`)，您需要做的就是将 this: 更改`txt.value = txt.value.replace(/[^a-zA-Z 0-9\n\r]+/g, '');`为 this: `txt.value = txt.value.replace(/[^a-zA-Z 0-9\n\r-]+/g, '');`。

请注意，破折号被括在方括号中时是一个特殊字符（它表示一个范围），因此它**必须**放在方括号中的最后。

根据*@Tim Pietzcker*的评论，您也可以将其转义`txt.value = txt.value.replace(/[^a-zA-Z 0-9\n\r\-]+/g, '');`或放在前面：`txt.value = txt.value.replace(/[^-a-zA-Z 0-9\n\r]+/g, '');`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T13:22:26.870

在你的字符类末尾添加一个破折号（作为最后一个字符）：

```
txt.value = txt.value.replace(/[^a-zA-Z 0-9\n\r-]+/g, ''); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:25:54.873

试试这个：[^a-zA-Z 0-9\n\r-]+

[正则表达式测试的酷站点](http://regexpal.com/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T13:27:23.647

```
txt.value = txt.value.replace(/[^a-zA-Z 0-9\n\r-]+/g, ''); 
```

如果破折号不在决赛中，您也可以试试这个

```
[^a-zA-Z 0-9\n\-\r]+ //I only test this on rubular 
```

[测试](http://www.rubular.com/r/j6ybadbjFE)

# jquery - Yii 的 jQuery.yii.js 没有先加载

> ID：11829140
> 
> 赞同：0
> 
> 时间：2012-08-06T13:21:48.023
> 
> 标签：jquery, yii, editor, wmd, prettify

我正在使用 wmd 编辑器，它有自己的 js 文件，需要首先加载 jQuery，但是 Yii 框架有自己的 Jquery 库，该库注册在所有头部元素后加载的资产中，如果没有 jQuery，Wmd 编辑器会崩溃首先加载所以我必须首先包含它所有头元素，当页面加载时，jQuery.yii 也被添加到所有头元素的末尾，简而言之，它被加载两次并在我的代码中产生冲突，这里是我的文件看起来像头

```
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="language" content="en" />
    <script type="text/javascript" src="/codepac/css/wmd/showdown.js"></script>
   <b> <script type="text/javascript" src="/codepac/css/wmd/jQuery/jquery-1.2.6.min.js "></script></b>
    <script type="text/javascript" src="/codepac/css/custom_js.js "></script>
    <script type="text/javascript" src="/codepac/css/prettify/src/prettify.js"></script> 
```

在浏览器中，我可以找到在所有头部元素的末尾自动加载的另一个 Jquery 副本，如下所示

```
<script type="text/javascript" src="/codepacu/assets/21a12630/jquery.js"></script> 
```

我想知道是否有一种方法可以先加载它，或者根本不加载它并使用谷歌的 cdn 副本。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:29:38.747

Yii 框架指南有一节专门介绍您要完成的工作。你可以在[这里查看](http://www.yiiframework.com/doc/guide/1.1/en/topics.performance#minimizing-script-files)。此外，您最好使用该方法将 Wmd 包含在正文的底部，该`CClientScript::registerScriptFile()`方法包含一个参数，用于指示应该包含脚本的位置。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:56:48.587

@Grampa 的回答只会帮助从 Google 加载，但不会帮助您解决 WMD 问题。

看起来 WMD 使用的是非常旧的 jQuery 版本（1.2.6），而 Yii 使用的是 1.7.1。您将遇到各种冲突，并且没有任何好的解决方法。

有关于在页面上包含多个版本的 jQuery 的[答案](https://stackoverflow.com/questions/5071717/if-you-include-2-version-of-jquery-in-a-page-how-do-you-restrict-a-plugin-to-jus/5071837#5071837)，但是您必须将其中一个更改为 $$ 而不是 $。这意味着您可能必须通过并更改 WMD 中的所有 jQuery 对象以使用 $$ 而不是 $，这充其量是不平凡的，如果 WMD 更新，那将是一场噩梦。

如果我是你，我会寻找一个更现代的所见即所得编辑器，它使用与 1.7.1 兼容的现代版本的 jQuery，并尝试集成它。

# grails - 使用 ObjectDB 的 Grails

> ID：11829141
> 
> 赞同：0
> 
> 时间：2012-08-06T13:21:59.287
> 
> 标签：grails, orm, objectdb

是否可以将 ObjectDB 与 Grails 一起使用？或者换句话说，当我使用 grails 开发应用程序时，我是否必须使用 Hibernate？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T15:54:43.910

对的，这是可能的。我认为如果您进行格式良好的配置，它会很好用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:27:41.180

对的，这是可能的。

只需将库添加到您的 grails 项目并像在 java 中一样使用，但在我的选项中，所有 simpl 都在全栈中休眠

# ember.js - Emberjs：路由器问题

> ID：11829145
> 
> 赞同：0
> 
> 时间：2012-08-06T13:22:06.217
> 
> 标签：ember.js, ember-old-router

我是 Ember 的新手，但我非常喜欢它。目前，我正在体验`Router`. 不过，我想我真的不明白。这是我正在使用的代码（取自 Emberjs 的网站）：

```
App.Router = Ember.Router.extend({
      root: Ember.State.extend({
        index: Ember.State.extend({
          route: '/',
          redirectsTo: 'posts'
        }),
        posts: Ember.State.extend({
          route: '/posts'
        }),
        post: Ember.State.extend({
          route: '/posts/:post_id'
        })
      })
    }); 
```

但是，这段代码对我没有任何作用。不应该将地址更改为`/posts`我点击时的地址`index`吗？难道我做错了什么？谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:38:58.423

使用 Ember.Route 而不是 Ember.State，因为特定于路由的代码与 Ember.StateManager / Ember.State 是分开的。

# jquery - 将字符串转换为 JQuery 对象

> ID：11829150
> 
> 赞同：0
> 
> 时间：2012-08-06T13:22:31.533
> 
> 标签：jquery, ajax

我有一个关于 jQuery 和 AJAX 的问题，我正在做这个 Ajax 调用：

```
jQuery.ajax({
    url: url,
    cache: false,
    type: 'POST',
dataType: 'html',
      success: function(data) {
     console.log(jQuery(data));
      }
}); 
```

当我在成功功能上

```
console.log(jQuery(data)); 
```

我得到这个值：

```
e.fn.e.init[136]
[0 … 10]
[11 … 21]
[22 … 32]
[33 … 43]
[44 … 54]
[55 … 65]
[66 … 76]
[77 … 87]
[88 … 98]
[99 … 109]
[110 … 120]
[121 … 131]
[132 … 135]
length: 136
__proto__: Object[0] 
```

在获取此变量“数据”的 DOM 元素时，我需要知道：示例

```
jQuery(data).filter('#example'); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:24:52.143

如果数组**真的**很大，Chrome 控制台现在会将其分解并以较小的块显示给您。

只需单击其中一个块即可查看数据。

您的选择器应该可以正常**工作**！（如果你在`data`字符串中有正确的信息）

# undefined - PHP-CLI 脚本在被 Apache 调用时不知道 $_SERVER？

> ID：11829152
> 
> 赞同：0
> 
> 时间：2012-08-06T13:22:40.600
> 
> 标签：undefined, php, superglobals

这是一个奇怪的：

我有一个 PHP-CLI 脚本，当从 shell 调用时它运行得很好。

但是当我让 apache 执行它时，`system()`它似乎忘记了所有的超全局变量（或至少`$_SERVER`）（它们是`1`/ `true`）。

关于它来自哪里的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:20:27.203

`readline`扩展是坏人。

停用它并且它可以工作。

# python - BottlyPy - 如何阅读 UWSGI_SCHEME？

> ID：11829155
> 
> 赞同：2
> 
> 时间：2012-08-06T13:22:53.267
> 
> 标签：python, https, nginx, bottle

我有一个使用 BottlePy 运行的 python 应用程序。

此应用程序由 Nginx 路由：

```
listen 443;
ssl on;
...

location / {
    include uwsgi_params;
    uwsgi_param UWSGI_SCHEME https;
    uwsgi_pass unix:///var/run/uwsgi/uwsgi.sock;
} 
```

因为我用的是BottlePy微框架，所以不能调用`request.is_secure()`（No such method）。

但是有没有办法`UWSGI_SCHEME`从代码中读取值？

我的目标是从代码中确定该请求使用了 HTTPS。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:46:18.747

`request.environ`确实是要走的路。

[http://bottlepy.org/docs/dev/api.html#bottle.BaseRequest.environ](http://bottlepy.org/docs/dev/api.html#bottle.BaseRequest.environ)

感谢**迈克**为我指出了正确的方向。

```
print request.environ['wsgi.url_scheme'] 
```

将打印 URL 的方案：http/https...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:38:24.333

我不确定`is_secure`请求方法来自哪里，但您可以使用 WSGI 环境（[request.environ](http://bottlepy.org/docs/dev/api.html#bottle.BaseRequest.environ)）编写自己的方法

```
def is_secure(request):
    if request.environ['SERVER_PORT'] == '443':
        return True
    return False 
```

# c# - 自定义配置部分 - KISS 方法

> ID：11829157
> 
> 赞同：0
> 
> 时间：2012-08-06T13:22:59.583
> 
> 标签：c#, app-config, custom-configuration

我有一个我想定义的 app.config 部分，作为一个简单的部分`IDictionary<string, IDictionary<string, string>>`，它在 app.config 文件中看起来像这样：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <section name="ServiceInstances" type="MyProject.Configuration, MyProject"/>
    </configSections>
    <ServiceInstances>
        <ServiceInstance name="service1">
            <kvp key="key1" value="value1"/>
            <kvp key="key2" value="value2"/>
        </ServiceInstance>
        <ServiceInstance name="service2">
            <kvp key="key3" value="value3"/>
            <kvp key="key2" value="value2"/>
        </ServiceInstance>
    </ServiceInstances>
</configuration> 
```

我看到的所有教程似乎都很深入，我只是在寻找一种快速而肮脏的方法来做到这一点：

```
IDictionary<string, string> foo = Configuration.GetDictionary("service1");
IDictionary<string, string> bar = Configuration.GetDictionary("service2"); 
```

看起来这实际上应该是几行代码，但教程似乎不必要地使其复杂化。有没有一个快速的答案，如果是这样，有人可以告诉我它应该是什么样子吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:44:56.003

首先，您将 XML 文件解析为`Dictionary<string, Dictionary<string, string>>`. 看起来像这样：

```
public Dictionary<string, Dictionary<string, string>> getDictionary()
{
    XmlDocument doc = new XmlDocument();
    doc.Load(@"path/to/file.xml");

    Dictionary<string, Dictionary<string, string>> outer = new Dictionary<string, Dictionary<string, string>>();
    Dictionary<string, string> inner;

    //cycle through outer nodes
    foreach (XmlNode service in doc.SelectNodes("/configuration/ServiceInstances/ServiceInstance"))
    {
        inner = new Dictionary<string, string>();
        //cycle through inner nodes
        foreach (XmlNode kvp in service.SelectNodes("kvp"))
        {
            inner.Add(kvp.Attributes["key"].Value, kvp.Attributes["value"].Value);
        }
        outer.Add(service.Attributes["name"].Value, inner);
    }

    return outer;
} 
```

然后你可以像这样调用你的字典：

```
var foo = getDictionary();
Dictionary<string,string> bar = foo["service1"]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:59:27.213

您可以使用配置部分设计器来完成这项肮脏的工作：

[http://csd.codeplex.com/](http://csd.codeplex.com/)

它有视觉工作室设计器支持，生成示例配置，只是到目前为止有一个问题 - 如果 VS2012 需要安装 VS2010，但我认为这将很快得到解决。

# android - 使用 waitForDebugger 对 Android 进行 IntelliJ 调试

> ID：11829158
> 
> 赞同：1
> 
> 时间：2012-08-06T13:23:00.113
> 
> 标签：android, intellij-idea

我正在运行 IntelliJ 11.1.3，针对运行 android 4.1.1 的 Galaxy nexus 开发应用程序

如果不选择“调试”调用选项，可以使用该模式

```
Debug.waitForDebugger() 
```

后跟断点来打断代码？

我发现我可以看到我的应用程序正在等待调试器（DDMS 中的红色图标），但 intellij 从未显示调试器。

有什么方法可以在不使用调试（而不是运行）调用的情况下完成此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:16:14.693

正确答案来自上面的 CrazyCoder - 一旦你点击 waitForDebugger 然后你点击 Attach Debugger to Android Process。![截屏](../Images/c0076352b19aecd10c950ee2c00c8007.png)

# java - 了解泛型以及类型检查的工作原理

> ID：11829163
> 
> 赞同：2
> 
> 时间：2012-08-06T13:23:32.443
> 
> 标签：java, android, generics

泛型集合中的数据类型检查是如何发生的？例如，看看下面的 ArrayList：

```
ArrayList<String> r1 = new ArrayList<String>(); 
r1.add("4");
r1.add("1");
r1.add("2");
r1.add("3"); 
```

`ArrayList<String>`与方法的链接如何`add()`？如果我要创建自己的不是集合的类，我如何绑定泛型参数以确保发生严格的类型检查？

我在 Android 中使用 AsyncTask 类观察到的另一个示例：

```
private class SomeAsyncTask extends AsyncTask<String, Integer, Long> { 
```

其中 String 表示输入，Integer 表示进度，Long 表示响应。这个映射是在哪里完成的？如何创建自己的泛型类以及在哪里定义此映射？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:27:26.010

我认为泛型是一个过于宽泛的主题，无法作为回应体面地涵盖。我建议您首先查看 Oracle 的教程（[此处](http://docs.oracle.com/javase/tutorial/java/generics/)），了解您应该需要的所有信息。

话虽这么说，作为一个快速的答案，根据[android 文档](http://developer.android.com/reference/java/util/List.html)`.add()`，该方法采用通用参数，该参数与创建列表时指定的参数相同，在您的情况下，这是一个字符串。`E`

其次，要创建自己的泛型类，只需执行以下操作即可：

```
public MyClass<T>
{
    private T myT;

    public void set(T t)
    {
        this.myT = t;
    }

    public T get()
    {
       return this.myT;
    }
} 
```

在上述情况下，`T`指的是泛型参数。该参数是在您实例化您的类时设置的，例如`... new MyClass<String>();`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T13:27:33.423

如果你想创建一个有`doSomething`方法的泛型类，你可以这样写：

```
class GenericClass<E> {
    public void doSomething(E aThing) {
       //do something with aThing
    }
} 
```

您现在可以“像”数组列表一样使用它：

```
GenericClass<String> myGeneric = new GenericClass<String>();
myGeneric.doSomething("abc");

GenericClass<Integer> myGeneric2 = new GenericClass<Integer>();
myGeneric.doSomething(123); 
```

现在，如果您想进一步了解 ArrayList 是如何实现的，最好的办法就是[检查代码](http://www.docjar.com/html/api/java/util/ArrayList.java.html)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T13:27:13.853

**第一个问题**

查看[Java 泛型类型教程](http://docs.oracle.com/javase/tutorial/java/generics/types.html)。一个例子可能会澄清这一点：

```
public class Tuple<X, Y> {

   X first;
   Y second;

   public Tuple(X first, Y second) {
      this.first = first;    
      this.second = second;
   }
} 
```

当您实例化此类时，您可以使用以下行来执行此操作：

`Tuple<String, Integer> tuple = new Tuple<String, Integer>("Hello", 1);`

并且类型参数检查在编译时在这里完成，因为构造函数现在需要`String`一个`Integer`as 参数（按此顺序）。

**第二个问题**

我希望元组示例已经清楚地说明了如何完成映射：使用不同的泛型类型参数名称。

在类型参数定义的情况下也是如此`AsyncTask`，例如使用不同的名称：`AsyncTask<A, B, C>`因此在应用它们时可以区分它们。

为此，请查看[AsyncTask 的源代码](http://grepcode.com/file_/repository.grepcode.com/java/ext/com.google.android/android/2.1_r2/android/os/AsyncTask.java/?v=source)，其中类定义为：

```
public abstract class AsyncTask<Params, Progress, Result> 
```

类型参数名称不必是单个字母，也可以是全名。

# css - 垂直对齐未按预期运行

> ID：11829166
> 
> 赞同：-1
> 
> 时间：2012-08-06T13:23:42.880
> 
> 标签：css

关于这个主题有很多信息，但我没有看到任何解决方案。我有[这个 jsFiddle](http://jsfiddle.net/Chamster/gfjk4/6/)。

我希望外部 div 遵循内容的大小。内部 div 应该被向上推，以便图像和文本都从顶部边缘开始。我不能说哪个是最高的元素。

我该如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:26:43.907

您必须垂直对齐图像容器和文本容器才能使其正常工作。这是一个例子：http: [//jsfiddle.net/GSQqL/](http://jsfiddle.net/GSQqL/)

# windows - 我是否需要 PATH 中的 Perl bin 目录来运行 perl 程序（在 Windows 上）？

> ID：11829169
> 
> 赞同：5
> 
> 时间：2012-08-06T13:23:46.133
> 
> 标签：windows, perl, strawberry-perl, path-variables

传统上，我只会`C:\perl\bin`在我的 PATH 变量中，但由于版本冲突，我想在不同的位置保留不同的 perl 版本，`C:\Perl-versionXY\bin`并通过直接调用来执行我的 Perl 脚本`C:\Perl-...\bin\perl.exe theScript.pl`。

这实际上是在一个自动化系统下运行的，我们*已经直接调用* `C:\perl\bin\perl.exe`了所有 perl 脚本。（但*也在*PATH 中。`C:\perl\bin`）

 *为了促进不同的 Perl 版本并排，我想*从 PATH 中删除 C-perl-bin*以确保我们不会看到任何与 Perl 相关的 PATH 设置的副作用。

这应该工作吗？需要额外 DLL 文件的模块（如 LibXML，需要 perl 的 bin 目录中的 LibXML.dll）呢？

我将使用 Strawberry Perl 便携式并排版本。（谁的自述文件提到了一些 PATH 设置，但没有提到哪个用于什么。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:35:49.460

如果所有 DLL 都与可执行文件位于同一目录中，它应该可以正常工作。如果路径中只有一个 Perl 条目，则 DLL 必须与可执行文件位于同一目录中（或使用某些显式逻辑找到），因此您应该没问题。当可执行文件加载 DLL 时，首先搜索的是包含可执行文件的目录。

如果您确实遇到了麻烦，一种选择是为每个版本创建一个命令文件。您可以给这些不同的名称，如 perl58.cmd、perl514.cmd 等，将它们全部放在一个目录中，然后将该目录放在路径上。在每个命令文件中，将相应的 Perl 目录添加到路径中，然后使用命令行参数启动 Perl：

```
setlocal
PATH=c:\perl58\bin;%PATH%
perl %* 
```

请注意该`setlocal`命令的使用，以便对路径的更改不会导出回您正在从中运行命令文件的命令行窗口。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T16:46:08.067

我会提醒您，如果您在 PATH 上没有 Perl bin 目录，并且您执行的任何操作都会尝试调用存在于 bin 目录中的程序而不提供显式路径（不好的做法，但这并不能阻止它的发生) 然后你会失败，并且根据处理失败的方式，可能会出现微妙且难以调试的问题。

所以我说，除非你有一个非常令人信服的理由不添加它（例如，IT 政策使得添加到 PATH 变得非常困难和烦人），然后添加它。*

# html - CSS 元素定位

> ID：11829174
> 
> 赞同：0
> 
> 时间：2012-08-06T13:23:51.597
> 
> 标签：html, css

我正在尝试将两个 div 放在同一个“级别”中，例如： ------ ---------- |Eelem 1| |元素 2 | -------- ---------- 但到目前为止 elem1 高于 elem2 。我已经添加了相关代码，我能做些什么来修复它？

在此先感谢

```
 <div class="stats">The expression <b>football</b> appeared 47 times in 44 different status messages</div><div class='hideDiv'><p class='toggleStats'>Hide Stats</p></div>run time is9.6276791095734 
            <div class="dropStatus">
                <p class="dropHeader">Drag , Drop & Share !</p>
                <p class="droppedStatus"><button class="clear" style="display:none">clear</button></p>
            </div>

.stats{
    margin-left : 20px;
    width : 400px;
    height : 112px;
    background-color : #C1F756;
    border-radius : 12px;
    font-size: 15px;
    text-align: center; 
}

.dropStatus {
    width : 400px;
    height : 112px;
    background-color : #C1F756;
    border-radius: 12px;
}

.dropHeader{
    font-size : 25px;
    text-align: left;
}

.droppedStatus{
    font-size : 15px;
    text-align: left;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:26:43.390

最可靠的方法是设置`display`为`inline`或`inline-block`。`vertical-align`需要时使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:43:14.237

您的问题在于`div`元素是所谓的[块元素](http://www.w3schools.com/html/html_blocks.asp)，这意味着您必须应用 CSS 规则来阻止它们的默认行为，而是使它们像`inline`或`inline-block`元素一样。

通过将样式规则`display:inline-block;`应用于这些块元素，它们将开始像块一样 - 但内联！（这在许多情况下非常有用。）

不过，值得注意的是，您可能还需要添加`vertical-align:top`这些元素才能使它们正确对齐。

此外，`inline-block`在早期版本（例如 6 和 7）中不太支持`Internet Explorer`，要解决此问题，您还可以添加规则`*display:inline; zoom:1;`，这将使块在大多数情况下按预期运行。

我将在下面给你一个这个实现的例子。

```
.stats{
    margin-left : 20px;
    width : 400px;
    height : 112px;
    background-color : #C1F756;
    border-radius : 12px;
    font-size: 15px;
    text-align: center; 
    display:inline-block;
    *display:inline;
    zoom:1;
    vertical-align:top;
}

.dropStatus {
    width : 400px;
    height : 112px;
    background-color : #C1F756;
    border-radius: 12px;
    display:inline-block;
    *display:inline;
    zoom:1;
    vertical-align:top;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:32:42.463

您有 2 个选项：

```
.stats{
    margin-left : 20px;
    width : 400px;
    height : 112px;
    background-color : #C1F756;
    border-radius : 12px;
    font-size: 15px;
    text-align: center; 
    display: inline; /* You can also use inline-block but might be problematic with ie*/
}

.dropStatus {
    width : 400px;
    height : 112px;
    background-color : #C1F756;
    border-radius: 12px;
    display: inline; /* You can also use inline-block but might be problematic with ie*/
} 
```

或者：

```
.stats{
    margin-left : 20px;
    width : 400px;
    height : 112px;
    background-color : #C1F756;
    border-radius : 12px;
    font-size: 15px;
    text-align: center; 
    float: left; /* added this */
}

.dropStatus {
    width : 400px;
    height : 112px;
    background-color : #C1F756;
    border-radius: 12px;
    float: left; /* added this*/
} 
```

请注意，浮动可能有点棘手，您可以[在此处了解更多信息](http://css.maxdesign.com.au/floatutorial/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T13:43:03.527

希望这可以帮助 ：）

[http://jsfiddle.net/uLPT5/](http://jsfiddle.net/uLPT5/)

# java - Java EE - 在不同的服务器上拆分 Web 和业务层

> ID：11829176
> 
> 赞同：2
> 
> 时间：2012-08-06T13:23:56.290
> 
> 标签：java, jakarta-ee, n-tier-architecture

我们正在讨论在多个服务器上拆分 Java EE 应用程序层的利弊

澄清一下：假设我有一个带有 .war Web 层和 EJB .jar 业务层的 Java EE 应用程序。他们通过 RMI 进行通信

*   一种部署方法是将 .war 部署在一个应用服务器上的一个 .ear 中，并将业务层部署在另一个应用服务器上的另一个 .ear 中。让我们称之为**“拆分”**部署模型
*   另一种方法是将 .war 和 .jar 打包在同一个 .ear 中，并将此 .ear 部署在一个应用程序服务器中。我们称其为**“一起”**部署模型。

以拆分模型命名的优点：

*   强制完全拆分，因此是面向服务架构的良好准备
*   遵循 Oracle 融合中间件高可用性框架（参见例如[http://docs.oracle.com/cd/E16764_01/core.1111/e10106/img/ashia158.gif](http://docs.oracle.com/cd/E16764_01/core.1111/e10106/img/ashia158.gif)）
*   可扩展性和可重用性（见下文讨论）

以共同模型命名的优点：

*   易于部署和管理
*   更好的性能
*   易于负载平衡

双方都声称更好：

*   轻松监控和容量管理
*   易于故障排除

你对这两个模型有什么想法和经验？你可能会在这篇文章中发现我对某一方面的个人偏见，但我想听到任何一种诚实的论点。

# multithreading - 多 (CPU) 线程的多 GPU 编程

> ID：11829177
> 
> 赞同：1
> 
> 时间：2012-08-06T13:23:59.253
> 
> 标签：multithreading, cuda

我有一个令人尴尬的并行应用程序。是否可以启动多个 CPU 线程以便一个线程管理一个 GPU？如果可以，我应该在 CPU 端使用什么线程库？OpenMP？Pthreads？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T16:09:55.443

这是可能的，但自从 Cuda 4.0 发布以来，就没有必要了。Cuda API 现在是线程安全的，因此您可以使用单个主机线程异步管理多个设备。

如果您真的想使用多个主机线程，几乎任何主机库都可以。我已经在 Linux 和 OS X 上成功使用了 pthreads、boost::thread 和 Apple 与 Cuda 的大型中央调度。

# objective-c - 有没有办法在应用程序运行时查看 Core Data 存储的内容？

> ID：11829181
> 
> 赞同：0
> 
> 时间：2012-08-06T13:24:04.060
> 
> 标签：objective-c, xcode, macos, core-data

有没有办法（在 XCode 或第 3 方应用程序中）在应用程序运行时查看 Core Data 存储？

由于Core Data在后台依赖一个SQLite数据库，有没有办法查看它背后的数据库，它包含什么，它是如何变化的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:08:14.303

查看[Base](http://menial.co.uk/software/base/)，非常易于使用且用户友好，它有免费试用版，您当然可以购买完整版。

我正在使用试用版（“15 分钟会话和自定义查询仅返回 5 行。”），我很高兴..

您可以在以下位置找到您的模拟器 .sqlite 文件：
/Macintosh HD/Users/"username"/Library/Application Support/iPhone Simulator/"current iOS development version"/Applications/"your app directory(some long number)"/Documents/ “someNumber_projectName.sqlite”

***如果您安装了 Lion，您将无法找到 ~/Library 文件夹，因为它是隐藏的。检查显示如何显示它[的这篇文章。](http://osxdaily.com/2011/07/22/access-user-library-folder-in-os-x-lion/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:32:12.227

*   您可以通过在启动时传递参数来获取核心数据以记录输出

    ```
    -com.apple.CoreData.SQLDebug 1 
    ```

*   如果您使用的是模拟器，您可以导航到您的开发机器上的应用程序并查看 sqlite 文件。

*   如果您使用的是设备，则可以使用管理器访问 sqlite 文件

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:34:04.413

我认为 Xcode 中没有内置方式来打开/查看 SQLite 数据库。但是，如果您在模拟器中运行您的应用程序，您可以使用您选择的 sqlite-viewer 轻松打开 sqlite-database。

默认路径为：

```
~/Library/Application Support/iPhone Simulator/<IOS_VERSION>/Applications/<APPLICATION_UID>/Documents 
```

sqlite-db 的文件名取决于您的 NSPersistentStoreCoordinator 实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-14T10:13:48.107

在 macOS 上或在模拟器中使用 iOS 运行 Core Data 应用程序时，您可以使用**Core Data Lab**在运行应用程序时跟踪更改。这个专用的核心数据查看器包含一个数据更改跟踪器，它以不同的颜色显示新的、删除的和突变。

更多信息：[https ://betamagic.nl/products/coredatalab.html](https://betamagic.nl/products/coredatalab.html)

*免责声明*：我是这个应用程序的创建者。

# nhibernate - C# nhibernate 全局搜索

> ID：11829184
> 
> 赞同：1
> 
> 时间：2012-08-06T13:24:13.980
> 
> 标签：nhibernate, c#-4.0, fluent-nhibernate

我有一个系统，该系统将在域中包含大约 6 个不同的实体。这是一个使用 Nhibernate 的 C# winforms 应用程序。MSSql 服务器。+- 5-10 个用户。

功能请求之一是有一个单一的搜索栏，用户可以输入和搜索所有这些具有“类似谷歌”灵活性（即非结构化）的实体。我能想到的最佳实现方法是在每个域对象上包含一个 clob 字段，该字段还包含该对象所代表的每个字段的文本。我的全局搜索只是在 clob 字段上进行类似搜索。

这看起来就像 1\. 维护任务（即每个对象字段都需要存储在 clob 字段中并随着每次更改而更新） 2\. 可能会扩展得非常厉害。随着系统的增长，我确信 LIKE 搜索会变得越来越慢，从而导致系统紧张。

该系统不会是庞大的。如果一个表存储超过 10,000 条记录，我会感到惊讶，但我不喜欢依赖它。

我已经阅读过像 Lucene.NET 这样的项目，它们通过索引数据集来工作，但是搜索永远不会是“实时的”，而是对最后一个索引的搜索。

其他人是如何设法解决这个问题的？

谢谢！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T17:14:19.790

您正在寻找*全文搜索*解决方案。就像我在评论中提到的那样，似乎适合您的情况的是[NHibernate Search](https://nhibernate.jira.com/browse/NHSR)，另请参见[Ayende @ Rahien](http://ayende.com/blog/3992/nhibernate-search)关于该主题的帖子。

# doctrine-orm - 在 ZF2 RC 中找不到 Doctrine 2 Mongo ODM 的 gedmo 注释

> ID：11829187
> 
> 赞同：0
> 
> 时间：2012-08-06T13:24:21.780
> 
> 标签：doctrine-orm, zend-framework2, doctrine-odm

我一直在尝试在使用 MongoDB 的 ZF2 RC2 应用程序上使用 Doctrine2 的[gedmo sluggable 行为](https://github.com/l3pp4rd/DoctrineExtensions/blob/master/doc/sluggable.md)，但总是以错误告终，说 Doctrine 找不到注释，即使它的侦听器已经订阅了配置文件中的事件管理器.

这是我得到的确切错误消息：

```
[Semantical Error] The annotation "@Gedmo\Mapping\Annotation\Slug" in property Application\Document\Place::$login does not exist, or could not be auto-loaded. 
```

我的`module.doctrine-mongo-odm.local.php`文件包含有关此问题的以下内容：

```
[...]
'eventmanager' => array(
    'odm_default' => array(
        'subscribers' => array(
            'Gedmo\Sluggable\SluggableListener'
        )
    )
),
[...] 
```

我知道`SluggableListener`只需在其中放置一个漂亮`die;`的就可以加载`__construct()`，这意味着自动加载可以工作。

现在在`Place`文档中，我通过注释使用属性上的 slug，`login`就像这样：

```
<?php
namespace Application\Document;
use Doctrine\ODM\MongoDB\Mapping\Annotations as ODM
 ,  Gedmo\Mapping\Annotation as Gedmo;

/** @ODM\Document(collection="places") */
class Place
{
[...]
/**
 * @ODM\String
 * @Gedmo\Slug(fields={name})
 */
private $login;

/** @ODM\String */
private $name;
[...] 
```

我在那里想念什么？谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T22:35:37.510

您需要注册任何额外的注释，而不仅仅是添加侦听器。在 Mongo 模块配置中使用以下键：

```
'configuration' => array(
    'odm_default' => array(
        'annotations'        => array(), // array('Annotation\Namespace\' => '/../annotation/path')
    )
), 
```

# iphone - 如何在 UIScrollView 中的另一个视图下方添加视图？

> ID：11829188
> 
> 赞同：3
> 
> 时间：2012-08-06T13:24:27.873
> 
> 标签：iphone, ios, ios5, uiscrollview

在我的应用程序中，我`UIScrollview`用来列出详细信息。在滚动视图中，第一个子视图是`UItextview`，第二个`UILabel`，依此类推。但是，当 textview 内容更多时，它会重叠`UILabel`，在 SO 和 google 中进行了很多搜索，但找不到我的问题的确切解决方案。

我在寻找

如何在`UITextView`下面`UILabelView`或其他视图中添加？

谢谢你们的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:30:48.690

试试用这个，

```
[YOUR_SCROLL_VIEW addSubview:YOUR_TEXT_VIEW];
YOUR_TEXT_VIEW.frame = CGRectMake(0, 0, YOUR_TEXT_VIEW.frame.size.width, YOUR_TEXT_VIEW.frame.size.height);

[YOUR_SCROLL_VIEW addSubview:YOUR_LABEL];
YOUR_LABEL.frame = CGRectMake(0, YOUR_TEXT_VIEW.frame.size.height, YOUR_LABEL.frame.size.width, YOUR_LABEL.frame.size.height);

YOUR_SCROLL_VIEW.contentSize = CGSizeMake(320, YOUR_TEXT_VIEW.frame.size.height+YOUR_LABEL.frame.size.height); 
```

根据您的要求更改 X 或 Y 坐标。

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:55:55.773

`UIView`有两种方法可以将指定的子视图移动到其 subviews 属性中视图数组的末尾/开头：

```
bringSubviewToFront: 
sendSubviewToBack: 
```

您可以尝试将您的标签放在前面：

```
[self.myScrollView bringSubviewToFront:self.myLabel]; 
```

或将您的 textView 发送到后面：

```
[self.myScrollView sendSubviewToBack:self.myTextView]; 
```

*我过去使用这些方法`UIView`，`UIScrollView`继承自`UIView`所以它也应该工作，但我没有机会确认，可能是`UIScrollView`机制处理他的子视图不同，所以你需要自己检查:)

# asp-classic - 我如何制作一个 vbscript 数据类型子类型 LONG 以使其成为 2,147,483,647？

> ID：11829192
> 
> 赞同：2
> 
> 时间：2012-08-06T13:24:44.380
> 
> 标签：asp-classic, vbscript, comparison, type-conversion, comparison-operators

我有一个网页，一次显示一个目录中的 10 张图像。在目录中，我现在有 55,000 张图像。一旦 zz 低于 32,767，它就会停止。如何使 ZZ 成为子类型 LONG 以使其成为 2,147,483,647（下面的代码不准确，只是快速完成以向您展示我正在实现的循环）

```
pp = Request("pp")  ' pp could be at 40000

filecount = 0 

dim zz

For Each file in filecoll

    zz = zz + 1

    If ZZ > PP then 

        response.write  'show image here 

    end if

Next 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T13:30:24.633

实际问题与长类型无关 - 至少不是直接的。您的问题是这`pp`是一个字符串，而它应该是数字。要解决您的问题，只需将其转换为 long：

```
pp = CLng(Request("pp")) 
```

然后比较就可以正常工作了。

简而言之，问题在于比较两个变量时 - 正如 Eric Lippert 在[这篇精彩的博客文章](http://blogs.msdn.com/b/ericlippert/archive/2004/07/30/202432.aspx)中所解释的那样，当一个变量包含一个字符串值并且一个变量包含数值并且你比较它们时，*任何字符串都大于任何数字*- 所以不管它的价值是`zz`什么，意味着`pp`它将永远更大。

现在进行更详细的解释。（使用[Nilpo](https://stackoverflow.com/users/637208/nilpo)的一些帮助）

在 VBScript 中，所有变量实际上都是 Variant 类型。它们是松散类型的，这意味着它们可以在任何时候保存任何类型的数据，并且它们包含的值的类型可以更改。

VBScript 的比较运算符（<、>、<>、=）用于进行数值比较。由于字符串不是数字数据类型，因此在将字符串与数字进行比较时，这些比较运算符永远不会返回可用的结果。这并不意味着字符串不能包含数值。它可以包含一串数字或表示数值的字母，例如“4.56”、“4.5e3”或“十五”。在这种情况下，VBScript 提供了一系列转换函数，指示 VBS 解释器将值视为特定类型。它还提供了`IsNumeric`返回 true 或 false 的函数来指示是否可以将字符串值视为数字。

考虑到所有这些，正确的做法是：

```
pp = Request("pp")

filecount = 0

Dim zz = 0

For Each file In filecoll
    zz = zz + 1
    '...
Next

If IsNumeric("pp") Then
    If zz > CLng(pp) Then
        Response.Write  'show image here
    End If
Else
    ' pp is not a number, perhaps it is empty or contains bad characters
End If 
```

其他要记住的事情：

1.  包含单个值的 Variant 是字符串或数值数据类型。这意味着货币或日期和布尔值等数据类型本质上是数字。
2.  变体还可能包含对对象和数组的引用。与字符串一样，它们不能用于数值比较。
3.  Null、Empty 和 Nothing 也是要考虑的指示变量状态的有效值。当变量未分配实际值时使用这些。作为非数字，它们在数字比较中不起作用。
4.  VBScript 提供了用于比较非数字值的特定函数和运算符。
5.  因为 VBScript 不使用严格的数据类型，所以在比较不同精度的数字时，数据宽度不是问题。为了比较，两个操作数将在更宽的数据宽度上进行比较。（算术运算也是如此。在这种情况下，结果值将具有更宽的数据宽度以保持精度。）

# javascript - Jquery切换多个类

> ID：11829201
> 
> 赞同：1
> 
> 时间：2012-08-06T13:25:12.500
> 
> 标签：javascript, jquery, jquery-ui

我的目标是实现类似[http://corkboard.me/GlJTVkD34A](http://corkboard.me/GlJTVkD34A)的东西，当单击更改背景的按钮时，便笺的背景和按钮中的图像都被更改。在moemt，我已经能够得到完全相同的东西，笔记上的onclick事件，顶部弹出的div，但我试图通过将所有类放在下面的数组中来改变背景，但它没有没用。我仍然不知道如何使按钮图像与便笺的背景同时更改。

```
//nbg is the button above that is to be cliked to change the backgound
var nbg = $('#nbg');
var count = 0;
nbg.each(function() {
    var thisnotice = $(this);
    thisnotice.click(function() {
    var notice_classes =['changeablenbg_yellow','changeablenbg_green','changeablenbg_pink','changeablenbg_purple','changeablenbg_blue'];
        if(notice_classes[count] === "changeablenbg_blue") {
        var count = 0
        }
    //#box is the note div itself
    $('#box').toggleClass(notice_classes[count]);
    count++;
    }); 
}); 
```

我还尝试使用 for 循环来循环数组，但无济于事。知道的人可以指导我这样做。很抱歉，如果我解释得不够好，有什么不明白的请追问。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:05:21.340

您的代码中发生了一些奇怪的事情，但最大的是您正在切换，这就像一个电灯开关。按下它，它会打开并保持打开状态。再次按下它，它就会关闭。在这里你按下它会打开并切换到下一个颜色，然后你按下它会打开第二个挡住第一个的颜色。

那么你就有了双重计数问题。您正在逐步检查每个 NBG 的每种颜色，但只更换盒子。重置本地计数，但不是更大的。

我最好的建议是，像计算机在运行它一样单步执行每一行代码，并思考这一特定行的作用。它做我认为它做的事吗？

这有帮助吗？

# .net - IClientMessageInspector.AfterReceiveReply 只写“......数据流......”

> ID：11829204
> 
> 赞同：1
> 
> 时间：2012-08-06T13:25:24.493
> 
> 标签：.net, wcf

我有一个简单的 IClientMessageInspector：

```
public class ConsoleMessageTracer : IClientMessageInspector
{
    public void AfterReceiveReply(ref Message reply, object correlationState)
    {
        Console.WriteLine(reply.ToString());
    }

    public object BeforeSendRequest(ref Message request, IClientChannel channel)
    {
        Console.WriteLine(request.ToString());
    }
} 
```

`AfterReceiveReply`工作正常，但`BeforeSendRequest`仅`... Datastream ...` 写入控制台。

（实际上它写道`... Datenstrom ...`，因为我有一个德国安装的 .Net 并且`Thread.CurrentThread.CurrentCulture`似乎被忽略了。）

如何访问我的请求消息的实际正文？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T00:08:49.273

您需要阅读流以获取整个消息。但是，您还需要确保以允许之后读取/写入消息的方式这样做。有关如何实现此目的的完整详细信息，请参阅[此说明。](http://www.pvle.be/2009/03/messagetostring-returning-stream/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:29:03.930

您好，您可以尝试使用此代码 - InputStream

```
 string documentContents = string.Empty;
    using (Stream receiveStream = Request.InputStream)
    {
        using (StreamReader readStream = new StreamReader(receiveStream, Encoding.UTF8))
        {
            documentContents = readStream.ReadToEnd();
        }
    } 
```

# javascript - IE中选择列表的jQuery代码不起作用

> ID：11829208
> 
> 赞同：1
> 
> 时间：2012-08-06T13:25:44.420
> 
> 标签：javascript, jquery, internet-explorer

`select`我在 IE（所有版本）中的列表有问题。我有两个字段，其方向取决于 City1 和 City2 字段。当我在方向字段中从 City1 中选择城市时，应该只显示 4 个方向。同样，在 City2 字段中。在 Firefox、Chrom、Opera 中一切正常，但在 IE 中没有——我看到了整个方向列表。

在我看来 - 这段代码有问题，但我不知道是什么：

```
 if (parseInt($("#finish_day").val()) < 4) {
        $('#return_car').children('#return_car option[value=' + $('#get_car').val() + ']').attr('selected', 'selected').siblings().attr('disabled', true);
        if ($('#return_car').val()) $('#return_car').change();
    } else {
        $('#get_car > option, #return_car > option').prop('disabled', false);
        });
    } 
```

工作代码在这里：http: [//jsfiddle.net/utXMD/](http://jsfiddle.net/utXMD/)

感谢您提供任何帮助的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:35:47.910

删除 $.viewMap_get 和 $.viewMap_return 对象中最后一个值之后的逗号：

```
$.viewMap_get = {
        '0' : $([]),
        'Katowice' : $('#c1a, #c1b, #c6, #c7'),
        'Kraków' : $('#c2a, #c2b, #c6, #c7'),
        'Warszawa' : $('#c3a, #c3b, #c6, #c7'),
        'Wrocław' : $('#c4a, #c4b, #c6, #c7'),
        'Gdańsk' : $('#c5a, #c5b, #c6, #c7')
    };

$.viewMap_return = {
        '0' : $([]),
        'Katowice' : $('#d1a, #d1b, #d7'),
        'Kraków' : $('#d2a, #d2b, #d7'),
        'Warszawa' : $('#d3a, #d3b, #d7'),
        'Wrocław' : $('#d4a, #d4b,, #d7'),
        'Gdańsk' : $('#d5a, #d5b, #d7')
    }; 
```

IE7 和 IE8 的 JS 对象值以尾随 ',' 结尾存在问题。

更新：

试试下面的代码：

 `````
$(function() {

    $( "#date_from, #date_to" ).datepicker({
        defaultDate: "+1d",
        minDate: "+1d",
        changeMonth: true,
        changeYear: true,
        dateFormat: "dd/mm/yy",
        monthNamesShort: ["Sty","Lut","Mar","Kwi","Maj","Cze","Lip","Sie","Wrz","Paz","Lis","Gru"],
        dayNamesMin: ["Nie", "Pon", "Wt", "Sr", "Czw", "Pt", "Sob"],
        numberOfMonths: 1,
        onSelect: function( selectedDate ) {
            if(this.id == 'date_from'){
              var dateMin = $('#date_from').datepicker("getDate");
              var dateMax = $('#date_to').datepicker('getDate');
              var rent_date_from = new Date(dateMin.getFullYear(), dateMin.getMonth(),dateMin.getDate() + 1); 
              var rent_date_to = new Date(dateMin.getFullYear(), dateMin.getMonth(),dateMin.getDate() + 29); 
              $('#date_to').datepicker("option","minDate",rent_date_from);
              $('#date_to').datepicker("option","maxDate",rent_date_to);      
            }
            compute(); //Add compute
        }

    }); 

    $.viewMap_get = {
        '0' : $([]),
        'Katowice' : $('#c1a, #c1b, #c6, #c7'),
        'Kraków' : $('#c2a, #c2b, #c6, #c7'),
        'Warszawa' : $('#c3a, #c3b, #c6, #c7'),
        'Wroclaw' : $('#c4a, #c4b, #c6, #c7'),
        'Gdansk' : $('#c5a, #c5b, #c6, #c7')
    };

    $.each($.viewMap_get, function() { $(this).remove(); });
    $('#get_city_district').hide();

    $('#get_car').on('change', function() {
        // hide all
        $.each($.viewMap_get, function() { $(this).remove(); });
        $('#get_city_district').hide();
        // show current
        $('#get_city_district').append($.viewMap_get[$(this).val()]).show();

        var id = $.viewMap_get[$(this).val()].attr("id");   
        $('#'+id).attr('selected', 'selected');
    });

    $.viewMap_return = {
        '0' : $([]),
        'Katowice' : $('#d1a, #d1b, #d7'),
        'Kraków' : $('#d2a, #d2b, #d7'),
        'Warszawa' : $('#d3a, #d3b, #d7'),
        'Wroclaw' : $('#d4a, #d4b,, #d7'),
        'Gdansk' : $('#d5a, #d5b, #d7')
    };

    $.each($.viewMap_return, function() { $(this).remove(); });
    $('#return_city_district').hide();

    $('#return_car').on('change', function() {

        $.each($.viewMap_return, function() { $(this).remove(); });
        $('#return_city_district').hide();
        // show current
        $.viewMap_return[$(this).val()].show();
        $('#return_city_district').append($.viewMap_return[$(this).val()]).show();

        var id = $.viewMap_return[$(this).val()].attr("id");
        $('#'+id).attr('selected', 'selected');
    });

    function compute() {
        var c = $('select#time_from_hour').val();
        var d = $('select#time_from_minute').val();
        var e = $('select#time_to_hour').val();
        var f = $('select#time_to_minute').val();
        var g = $('input#date_from').val();
        var h = $('input#date_to').val();
        date1= g.split("/");
        var timestamp = (new Date(date1[2],date1[1],date1[0],c,d).getTime()/1000) + 7200;
        $('#total_hour1').val(timestamp);

        date2= h.split("/");
        var timestamp = (new Date(date2[2],date2[1],date2[0],e,f).getTime()/1000) + 7200;
        $('#total_hour2').val(timestamp);

        var x = -$('input#total_hour1').val();
        var y = -$('input#total_hour2').val();
        var total_time = x - y;
        result = total_time / 86400;
        new_number = Math.ceil(result);

        if(isNaN(new_number)) {
          var new_number = 0;
        }
        $('#finish_day').val(new_number);

        if( parseInt($("#finish_day").val()) < 4 ) {   
            $('#return_car').children('#return_car option[value=' + $('#get_car').val() + ']').attr('selected', true).siblings().attr('disabled', true);

            if ($('#return_car').val()) $('#return_car').change();
        }
        else {
            $('#get_car > option, #return_car > option').prop('disabled', false);
            $('#three_day').hide(2000, function () {
                $(this).remove();
            });
        }

    }

    $('select#time_from_hour').change(compute);
    $('select#time_from_minute').change(compute);
    $('select#time_to_hour').change(compute);
    $('select#time_to_minute').change(compute);
    // $('select#return_car').change(compute);
    $('select#get_car').change(compute);
    $('input#finish_day').change(compute); 

}); 
````  `* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:08:59.377

IE 中的 option 元素仅支持少数 css 属性，例如`color`and `background-color`、font-* 属性、display、text-* 在 IE9 中不支持（也许在 IE10 中？）。当您使用 display:none 隐藏选项时，没有任何反应。

解决方案是仅添加当前城市的方向。例子：

```
$(function() {
    var directions =  {
          "city1": ["direction1", "direction2" ],
          "city2": ["direction3", "direction4" ]
       };

    $("#scity").change(function() {  
        var cityDirections = directions[$(this).val()];
        var $directions = $("#citydirections");
        $directions.children().remove();

        for(var i = 0; i < cityDirections.length; i++)
           $directions.append("<option value='" + cityDirections[i] + "'>" + cityDirections[i] + "</option>");
    });
}); 
```

[http://jsfiddle.net/8t7J6/4/](http://jsfiddle.net/8t7J6/4/)``

# javascript - 推文按钮 iframe

> ID：11829209
> 
> 赞同：0
> 
> 时间：2012-08-06T13:25:46.713
> 
> 标签：javascript, css, tweetr

我使用此代码将 Tweet 按钮添加到我的网站：

```
<script type="text/javascript">
    // <![CDATA[
    document.write('<a href="https://twitter.com/share" class="twitter-share-button" data-lang="en" data-url="<?php echo $this->getUrl('') ?>">Tweet</a>');
    // ]]>
</script>
<script type="text/javascript">!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="https://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

该按钮工作正常，但问题是它在正文开始标记之后向我的网站源代码添加了两个 iframe。这些 iframe 具有 10px 的宽度属性，这导致我的网站更宽并有一个滚动条。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:41:43.703

我想绝对定位这些 iframe 会起到作用。按照克里斯托弗的回答中的 ID，您可以试试这个：

```
#twttrHubFrameSecure,
#twttrHubFrame {
    position: absolute;
    top: 0;
    left: 0;
} 
```

如果您发现它们妨碍了某些事情，您可能想尝试将它们放在右下方（或其他地方）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:30:48.327

你试过了吗

```
$("#twttrHubFrameSecure").hide();
$("#twttrHubFrame").hide(); 
```

？？？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:13:39.127

尝试 ：

```
<a href="https://twitter.com/share" class="twitter-share-button" data-url="http://yoururl.com" data-text="Add your tweet text">Tweet</a>
<script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src="//platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");</script> 
```

或在此处创建您的按钮：

[http://twitter.com/about/resources/buttons#tweet](http://twitter.com/about/resources/buttons#tweet)

# ruby-on-rails - 有没有办法预加载所有 gem 以提高 rails 启动时间的速度？

> ID：11829210
> 
> 赞同：4
> 
> 时间：2012-08-06T13:25:50.270
> 
> 标签：ruby-on-rails, ruby, rubygems

我在页面[http://ablogaboutcode.com/2012/01/12/a-simple-rails-boot-time-improvement/](http://ablogaboutcode.com/2012/01/12/a-simple-rails-boot-time-improvement/)上看到比 rails 启动时间长，因为 Rails 在启动时会加载所有 gem。我在我的项目上检查了它，这是真的，加载宝石需要 30 秒 20 秒。

我尝试`require false`在我的 Gemfile 中添加很多宝石的末尾，我获得了 3/4 秒。没有很大的进步。

我用这个命令尝试加载时间：

```
time bundle exec rake environment 
```

所以，我的问题是：是否有一些东西，比如 spork 或其他东西，可以预加载所有 gem 并减少启动时间？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-04T17:32:06.387

`Zeus`可能会有所帮助：[https ://github.com/burke/zeus](https://github.com/burke/zeus)

# php - 如何提高在页面加载时执行的端口扫描程序的性能

> ID：11829217
> 
> 赞同：-1
> 
> 时间：2012-08-06T13:26:23.750
> 
> 标签：php

我有这个用于检测访问者端口的小功能。问题是它太慢了。它将页面加载时间增加了大约 3 秒；这自然是不能接受的。

有人可以对此进行改进以获得更好的页面加载时间吗？

```
function ipProxyPortCheck($ip){
    $timeout = 1;
    $ports = array(80,3128,8080);
    $flag = 0;
    foreach($ports as $port){
        @$fp = fsockopen($ip,$port,$errno,$errstr,$timeout);
        if(!empty($fp)){
            $flag = 1;
            fclose($fp);
        }
    }
    return $flag;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:29:30.677

除非通过减少超时值，否则在一般情况下无法改进此代码。如果您的访问者在您尝试连接到他们时根本没有响应，则需要经过完整的超时间隔才能确定他们无法连接。

除此之外，您可以进行的改进是`break;`在您成功连接时添加，这样您就不会尝试连接到其他端口（不需要）。但这只有在访问者首先可以连接时才会起作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:30:08.140

您可以减少超时。[fsockopen](http://de2.php.net/manual/en/function.fsockopen.php)接受一个浮点数作为超时，它是以秒为单位的超时。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:39:43.527

> 我有这个用于检测访问者端口的小功能。问题是它的速度很慢。它将页面加载时间增加了大约 3 秒，这自然是不可接受的。有人可以对此进行改进以获得更好的页面加载时间吗？

首先：每个IP执行*一次*，并存储连续请求的结果。然后，您可以将超时减少到半秒（使用`$timeout = 0.5`）。然后，确保在其中一个端口打开后立即从函数返回，这将减少等待时间，因为它会检查尽可能少的端口。最后，我建议记录哪个端口打开了一段时间，以确定哪些端口最有可能打开。您可以相应地对您的进行排序`$ports`。因此，如果 port`80`比`8080`or更有可能“打开” `3128`，请确保它首先出现。

```
function ipProxyPortCheck($ip){
    $timeout = 0.5;
    $ports = array(80,8080,3128);
    foreach($ports as $port){
        if((@$fp = fsockopen($ip,$port,$errno,$errstr,$timeout)) !== false) {
           fclose($fp);
           return 1;
        }
    }
    return 0;
} 
```

# php - 在 PHP 中解析配置文件

> ID：11829220
> 
> 赞同：-3
> 
> 时间：2012-08-06T13:26:32.793
> 
> 标签：php, parsing, configuration

实际上，我正在开发一个 php 应用程序，但遇到了一个奇怪的问题。我有一个配置文件 myfile.ini。其中有一个类别：

```
[MYFILES]
FILENAME=My file
FILEID=32404506123
FILEINFO=This file package now has no download limit giving you access to as much music, film and tv as you want. 
```

当我开始从中提取任何内容时，我的浏览器显示“无法显示该页面”。无论是 MYFILES 类别还是其他类别，如下所示：

```
$fileconfig = get the path of myfile.ini;
$fileproperties= $this->_configreader->getParam ($fileconfig , 'FILEPROPERTIES', '' ); 
```

当我从上面的 FILEINFO 中删除“否”时，它工作正常。此外，当我将 FILEINFO 放在双引号中时，工作正常。

请帮助我解决这个问题。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:32:56.377

很难说你的问题是什么，因为我在上面找不到问题。

我假设您在使用[`parse_ini_file()`](http://php.net/function.parse-ini-file.php). PHP 读取非常严格的 *.ini 格式，因此大多数值需要用引号括起来。

> 注意：有些保留字不能用作 ini 文件的键。其中包括：null、yes、no、true、false、on、off、none。值 null、no 和 false 导致“”，yes 和 true 导致“1”。字符 ?{}|&~![()^" 不得在键中的任何位置使用，并且在值中具有特殊含义。
> 
> *（来自[PHP 文档](http://php.net/function.parse-ini-file.php)）*

# iphone - 如何调整 UIView 子视图的大小以覆盖超级视图，例如放大缩小？

> ID：11829222
> 
> 赞同：-1
> 
> 时间：2012-08-06T13:26:36.117
> 
> 标签：iphone, ios

我在另一个 uiview B 中有一个 uiview A。A 包含许多其他 ui 对象，例如 uitableview、uitextfield、按钮等。在 A uiview 我有用于放大或缩小的按钮。如果用户点击放大我的uiview A覆盖了uiview B然后如果他点击缩小那么它将在iPad的先前位置任何人都可以指导我

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:31:14.823

据我所知，听起来您需要查看 UIViewAutoresizingMasks。这些定义了您的子视图将相对于它们的超级视图以何种方式缩放。例如

```
[mySubview setAutoresizingMask:UIViewAutoresizingMaskWidth]; 
```

当 mySubview 的超级视图的宽度发生变化时，mySubviews 的宽度将以相同的因子变化。

# objective-c - 这个对象是否符合 KVC？

> ID：11829223
> 
> 赞同：3
> 
> 时间：2012-08-06T13:26:39.870
> 
> 标签：objective-c, xcode, cocoa, kvc

我试图了解如何在 Xcode 中使用绑定。我有这堂课：

```
#import <Foundation/Foundation.h>

@interface OddsItem : NSObject {
    NSMutableDictionary *properties;
}
@property(nonatomic, retain) NSMutableDictionary *properties;

@end 
```

和

```
#import "OddsItem.h"

@implementation OddsItem {

}
@synthesize properties;

- (void)dealloc {
    [properties release];
    [super dealloc];
}

@end 
```

这符合 KVC 吗？我发现的例子似乎是在合成属性之前。

如果它不符合 KVC，我必须做什么才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:29:23.240

生成的方法`@synthesized`是 KVO 兼容的。

只要您使用 setter 方法更改属性，它将符合 KVO。

但是，如果您直接更改实例变量，则不会。在这种情况下，您将不得不手动调用`willChangeValueForKey:`and `didChangeValueForKey:`。

# visual-studio-2010 - AjaxControlToolkit 3.5 - ReorderList 滚动 div 问题

> ID：11829225
> 
> 赞同：0
> 
> 时间：2012-08-06T13:26:42.967
> 
> 标签：visual-studio-2010, ajaxcontroltoolkit, asp.net-3.5, web-site-project

我在垂直“可滚动”的 DIV 标签内有一个 ReorderList，当 DIV 标签的滚动条已经滚动并且我们尝试重新排序可见项目时，它不起作用。

详情请参考[http://forums.asp.net/p/1068063/1550532.aspx](http://forums.asp.net/p/1068063/1550532.aspx)。我更改了脚本，现在想构建框架 3.5 程序集。

我能够从 codeplex 下载 AjaxControlToolkit 源代码并在框架 4.0 下重新构建工具包

我应该如何继续构建它以使其与 3.5 网站项目兼容。

请注意，这一切都应该可以从 Visual Studio 2010 而不是 2008 实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T05:29:23.803

没有回应？我必须打开 ajax control toolkit 2008 解决方案并从那里创建一个新程序集。

但应该有什么办法？

# c# - 对系列 MS 图表控件执行 HitTest

> ID：11829226
> 
> 赞同：0
> 
> 时间：2012-08-06T13:26:45.683
> 
> 标签：c#, .net

如何在 Ms Chart Control 中对系列执行 HitTest？因为我在任何地方都找不到。我想画一条线，直到这条线穿过 MS 图表控件中的样条线，但关键是它并不总是一个数据点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:57:03.047

[http://msdn.microsoft.com/en-us/library/dd456772.aspx](http://msdn.microsoft.com/en-us/library/dd456772.aspx) 在交互性下，它解释了如何使用鼠标悬停的命中测试。

# php - 使用 PEAR 通过 GMail SMTP 发送邮件问题

> ID：11829231
> 
> 赞同：0
> 
> 时间：2012-08-06T13:27:03.853
> 
> 标签：php, smtp, gmail, pear

在过去的一两天里，我一直收到这个错误：

`Failed to connect to ssl://smtp.gmail.com:465 [SMTP: Failed to connect socket: php_network_getaddresses: getaddrinfo failed: Temporary failure in name resolution (code: -1, response: )]`

我们刚刚建立了一个新的 linux 服务器（运行 CentOS），我已经安装了所有必要的包，PEAR、SMTP 等。这是一个已知的工作脚本，过去通过 Gmail 发送我从来没有遇到过任何问题。现在对我来说，这似乎是一个 DNS 问题，因为我可以替换 IP 地址，并且它会间歇性地工作，这意味着某些邮件有时会通过。我已经禁用了 SELinux，甚至在我们的防火墙关闭的情况下运行它，所以我陷入了僵局。关于这可能是什么，或者我可以做些什么来解决这个问题的任何建议？

编辑：重新启动服务器和路由器，它似乎是正确的。虽然这在短期内是好的，但它仍然让我感到紧张。有没有人遇到过这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-11T02:56:15.920

根据[使用 SMTP 身份验证时通过 PEAR 发送 HTML 消息返回错误](https://stackoverflow.com/questions/12166468/sending-html-message-through-pear-while-using-smtp-authentication-returns-an-err?rq=1)，您需要将 google 地址设置为“ssl://smtp.googlemail.com”

# matlab - 循环通过 cellfun 计算

> ID：11829233
> 
> 赞同：0
> 
> 时间：2012-08-06T13:27:14.810
> 
> 标签：matlab

嗨，我有以下内容：

```
for j = 1:N
    for i = 1:N
        vecdir(i,:) = pos(i,:) - pos(j,:);
        dist(i,:) = pdist2(pos(i,:),pos(j,:));
        norm(i,:) = vecdir(i,:)./(dist(i,:)).^2;
    end
    r{j} = norm;

end

u = {or}; 
```

我有两个对象 u 和 r：

```
>> u

u = 

    [9x3 double]

>> r

r = 

  Columns 1 through 8

    [9x3 double]    [9x3 double]    [9x3 double]    [9x3 double]    [9x3 double]    [9x3 double]    [9x3 double]    [9x3 double]

  Column 9

    [9x3 double] 
```

我想取 r 的每个单元格，并取该单元格中每个元素与单元格 u 中的每个元素的叉积，并将结果求和为一个向量大小 [1 3]。到目前为止，我可以使用以下方法一次完成一个（r 的）单元格：

```
b_func = @(u)nansum(cell2mat(cellfun(@(v)cross(u,v)', {r{1}}, 'Un', 0))', 1);
b = cellfun(b_func, u, 'UniformOutput', 0) 
```

在哪里

```
b = [1x3 double] 
```

但是我想做的是对 r 中的**所有**单元格执行此操作，以便最终得到一个对象：

```
b = 

  Columns 1 through 8

    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]

  Column 9

    [1x3 double] 
```

其中每个单元格都是上面提到的计算，但已经迭代了 r 的每个单元格。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T00:09:39.650

怎么样：

```
b= cellfun(@(x) nansum(cross(u{1},x)),r,'UniformOutput',false); 
```

测试：

```
>> u = {randi(5,[9 3])}
u = 
    [9x3 double]
>> r = arrayfun(@(x) randi(5,[9 3]),1:8,'UniformOutput',false)
r = 
  Columns 1 through 6
    [9x3 double]    [9x3 double]    [9x3 double]    [9x3 double]    [9x3 double]    [9x3 double]
  Columns 7 through 8
    [9x3 double]    [9x3 double]
>> b = cellfun(@(x) nansum(cross(u{1},x)),r,'UniformOutput',false)
b  = 
  Columns 1 through 6
    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]
  Columns 7 through 8
    [1x3 double]    [1x3 double] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T15:20:01.617

您可以对其进行整形，使单元格沿第三维方向移动，将其转换为数组并求和：

```
b = nansum(cell2mat(reshape(cellfun(@(v)cross(u,v), r, 'Un', 0),1,1,[])),1); 
```

然后返回单元格并修复尺寸：

```
bfinal = shiftdim(mat2cell(b,[1],[3],ones(1,size(b,3))),1); 
```

结果：

```
>> bfinal

bfinal = 

  Columns 1 through 6

    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]    [1x3 double]

  Columns 7 through 9

    [1x3 double]    [1x3 double]    [1x3 double] 
```

# css - 如何在不使用 javascript 的情况下居中和垂直对齐 div 元素

> ID：11829235
> 
> 赞同：3
> 
> 时间：2012-08-06T13:27:21.310
> 
> 标签：css, less

我试图居中，只使用css，一个垂直和水平的div元素。

我见过的所有示例都使用了硬编码值，例如像素值。

是否可以在不使用 javascript 且仅使用百分比值的情况下将 div 元素居中？

这是我的测试：[jsfiddle.net](http://jsfiddle.net/2RdeH/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:41:43.820

您需要知道 div 的大小。（是的，div 的大小必须是固定的）。

```
div { 
    width: 50px; 
    height: 50px; 
} 
```

他的 div 必须有绝对位置：

```
div { 
    position: absolute; 
    width: 50px; 
    height: 50px; 
} 
```

之后，必须将顶部和左侧包围在 50% 处；

```
div { 
    position: absolute; 
    left: 50%; 
    top: 50%; 
    width: 50px; 
    height: 50px; 
} 
```

最后，您必须为顶部和左侧添加一个负边距，指的是 div 的高度和宽度值的一半。

```
div { 
    position: absolute; 
    left: 50%; 
    top: 50%; 
    width: 50px; 
    height: 50px; 
    margin:-25px 0 0 -25px; 
} 
```

请测试。
任何问题让我知道。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:22:07.120

这实际上可以通过使用`:before`选择器来完成（有问题的浏览器兼容性，但**可以**做到）。

查看Chris Coyier 撰写的这篇关于该主题的[精彩文章](http://css-tricks.com/centering-in-the-unknown/)以了解所有相关信息，他还为您提供了一个 jsfiddle 链接以供您试用。

# asp.net-mvc - 如何更改复选框值onclick mvc3 razor中的文本

> ID：11829237
> 
> 赞同：0
> 
> 时间：2012-08-06T13:27:24.150
> 
> 标签：asp.net-mvc, razor

我有一个复选框和你的名字。这是代码：

```
 <div class="type_wine">
      <div class="check_type">@Html.CheckBox(color, check, new { @class = "wine" })</div>                                            
      <div id="type_text" onclick="checkByName('@color')">  color  </div>
  </div> 
```

我必须这样做然后单击文本然后单击复选框，然后单击复选框一切正常，但是我有问题然后单击文本，因为复选框状态没有改变可以同一个人帮助我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:08:05.100

你可以尝试类似的东西

```
<div class="type_wine">
    <label>
        <div class="check_type">@Html.CheckBox(color, check, new { @class = "wine" }</div>
        <div id="type_text">
            color
        </div>
    </label>
</div> 
```

# javascript - 子列表变体

> ID：11829240
> 
> 赞同：0
> 
> 时间：2012-08-06T13:27:26.417
> 
> 标签：javascript, jquery

我一直在使用 jQuery 创建一个简单的子列表，但是我生成的子列表的样式如下：

```
parent
 -> child1
 -> child2
 -> childN 
```

我要生成的列表样式需要这样渲染。

```
parent
 -> child1
  --> child2
   --->childN 
```

这样一个孩子就被附加了一个新的子节点。

目前我一直在使用 jQuery 的 .last().append() 功能，但是它们似乎只能生成示例 1，并且由于某种原因，我终生无法解决这个非常基本的问题，我应该使用 prepend( )，但我觉得这可能无法正常工作？

```
var nodeSets = document.createElement(arrayElems[0]);

for (var i=1; i < arrayElems.length; i++) {
 $(nodeSets).last().append(document.createElement(arrayElems[i]));
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:35:43.653

HTML

```
<div id='target'/> 
```

javascript:

```
var elems=[
    '<div>test</div>',
    '<div>test2</div>',
    '<div>test3</div>',
    '<div>test4</div>',
    '<div>test5</div>',
    '<div>test6</div>',
    '<div>test7</div>'
    ];
var lastelem=$('#target');
for (var n in elems) {
    var e=$(elems[n]);
    lastelem.append(e);
    lastelem=e;
} 
```

[http://jsfiddle.net/BhZtu/1/](http://jsfiddle.net/BhZtu/1/)

# c# - 远程服务器返回错误：(414) Request-URI Too Large

> ID：11829243
> 
> 赞同：0
> 
> 时间：2012-08-06T13:27:31.503
> 
> 标签：c#, apache

我在 C# 4.0 中有一个小应用程序。远程服务器是 Apache2。

我遇到错误问题：远程服务器返回错误：（414）当我使用 POST 方法向此处发送数据时，请求 URI 太大。

我尝试使用此代码连接到 apache2：

```
 String mainAddressWebApi = "http://myremoteserver.domain.pl/alias/index.php";
        private HttpWebRequest request;
        request = (HttpWebRequest)WebRequest.Create(this.mainAddressWebApi);
        request.Method = "POST";
        request.ContentType = "application/x-www-form-urlencoded";
        request.Referer = "http://stackoverflow.com";
        request.UserAgent = "Mozilla/5.0";
        request.CookieContainer = cookie;
        NetworkCredential credentials = new NetworkCredential("login", "password");
        this.request.Credentials = credentials; 

        Byte[] byteData = utf8.GetBytes(data);
        request.ContentLength = byteData.Length;

        Stream newstream = request.GetRequestStream();
        newstream.Write(byteData, 0, byteData.Length);
        newstream.Close();

        this.response = (HttpWebResponse)request.GetResponse();     //I get error here 
```

数据应使用 POST 发送。数据最大为 2mb。你能帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-28T23:57:14.727

有一个类似的问题，除了 POST 工作正常，但具有完全相同参数的第二个 POST 返回 414。

设置`request.KeepAlive = false;`解决了问题

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:31:35.303

我曾经遇到过类似的问题，我的解决方案是这里的第一个答案： [How to Avoid Server Error 414 for Very Long QueryString Values](https://stackoverflow.com/questions/2926467/how-to-avoid-server-error-414-for-very-long-querystring-values) 也许它可以帮助你处理很长的查询字符串？

# spring - 如何在 Spring MVC 和 API 层中通过自定义验证器重用 Hibernate 验证

> ID：11829246
> 
> 赞同：1
> 
> 时间：2012-08-06T13:27:37.223
> 
> 标签：spring, bean-validation, hibernate-validator

假设我有一个使用 Spring MVC 构建前端的应用程序。同一个应用程序公开 API 用于集成目的。

Web 中的错误通过使用 Spring MVC form:error 标记通过使用 JSR-303 和带有自定义约束的 Hibernate 验证器来显示。

一切都很好，但是我想在我的 API 层中重用相同的验证，如果验证失败，则失败并显示错误代码。

假设我有一个 POJO 对象（只是一个例子）：

```
@ValidDomainObject
public class DomainObject {

    public String superSetting;

    public String anotherSetting;

    public String getSuperSetting() {
        return superSetting;
    }

    public void setSuperSetting(String superSetting) {
        this.superSetting = superSetting;
    }

    public String getAnotherSetting() {
        return anotherSetting;
    }

    public void setAnotherSetting(String anotherSetting) {
        this.anotherSetting = anotherSetting;
    }

} 
```

并且 @ValidDomainObject 由此验证器验证：

```
public class DomainObjectValidator implements ConstraintValidator<ValidDomainObject, DomainObject> {

    @Override
    public void initialize(final ValidDomainObject constraintAnnotation) {

    }

    @Override
    public boolean isValid(final DomainObject obj, final ConstraintValidatorContext context) {
        context.disableDefaultConstraintViolation();
        if (obj.getAnotherSetting().equals(obj.getSuperSetting())) {
            context
                    .buildConstraintViolationWithTemplate("{message.to.show}")
                    .addConstraintViolation();
        }
    }
} 
```

在前面的 MVC 层中一切都很好 - 我在语言文件中定义 message.to.show 以解析为“无法将 X 设置为 Y”之类的内容，并且用户会在页面上看到该消息。

那么我如何在 API 层实现同样的功能呢？如果我想用 ErrorCodes.PROPERTIES_MATCH 或类似的方法抛出 ServiceFault？

我可以简单地使用：

```
 Set<ConstraintViolation<DomainObject>> validationErrors = validator.validate(domainObject); 
```

然后循环检索到的集合检查消息并使用给定的错误代码构建故障。但这似乎是与 API 层的前端耦合。

我可以反之亦然：

```
 context.buildConstraintViolationWithTemplate(
ErrorCodes.PROPERTIES_MATCH.toString()) .addConstraintViolation(); 
```

但是，前端的消息结构与其他消息不同，也没有插值。

最好的方法是什么？

# c++ - Visual Studio 2012 应用程序窗口创建/调整大小与 VS2008 窗口创建不同？为什么？

> ID：11829249
> 
> 赞同：3
> 
> 时间：2012-08-06T13:27:50.497
> 
> 标签：c++, windows, winapi, visual-c++, visual-studio-2012

@EDIT：我发现这似乎是 Windows 8 RC 的问题，因为我尝试使用 Windows 7 和 VS 2012，包括经典视图和 Aero 视图，它工作正常。感谢@Werner Henze 和@Ven Boigt 的反馈

编辑 2：原来这是 Windows 中的一个错误，因为它是测试版，它在较新的版本中得到了修复，所以我不必再担心这个了。无论如何感谢您的反馈。

我曾经执行以下操作来创建一个 800*600 客户区的窗口：

```
dwStyle = WS_OVERLAPPED | WS_THICKFRAME | WS_BORDER | WS_DLGFRAME | WS_SYSMENU | WS_MINIMIZEBOX;
hWindowHandle = CreateWindow(   L"CGFramework", wszWndCaption, 
                            pWindowData->dwStyle, pWindowData->nPositionX, pWindowData->nPositionY, 
                            800 + GetSystemMetrics( SM_CXSIZEFRAME )*2, 
                            600 + GetSystemMetrics( SM_CYSIZEFRAME ) *2
                            + GetSystemMetrics( SM_CYCAPTION ),
                            0, 0, hInstance, 0
                        ); 
```

然后当用GetClientRect查询客户端矩形时，我以前得到800*600，但现在我将我的Visual Studio 2008项目升级到VS2012，现在GetClientRect()函数返回792*592。

最重要的是，正在创建的窗口的实际大小是 804*629，我认为这是没有原因的，因为可调整大小的框架（来自 WS_THICKFRAME）明显大于每边 2 个像素。

我认为这是 Windows 8 的 Aero 行为问题，但后来我意识到这仅发生在我的 VS2012 版本中，而不是我的 VS2008 版本中。如果我在 Aero 或经典风格上运行它没有区别，该行为仅适用于 VS2012 构建。为什么？我可以对我的 VS2012 项目配置进行更改以解决这种可怕的行为吗？

我尝试更改项目配置的“DPI Awareness”设置，但这没有任何区别。我还在同一个配置页面中删除了清单的使用，但在结果窗口中仍然看不到任何变化。

这是我的测试代码：

```
#include <Windows.h>
#include <cstdio>

LRESULT CALLBACK MainWndProc( HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam )
{
    switch( uMsg )
    {
    // WM_DESTROY is sent when the window is being destroyed.
    case WM_DESTROY:
        PostQuitMessage(0);
        return 0;
    default:
        return DefWindowProc( hWnd, uMsg, wParam, lParam );
    }
}

int WINAPI WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, INT nShowCmd )
{

    WNDCLASS wc;
    wc.style                = NULL; // CS_HREDRAW | CS_VREDRAW;
    wc.lpfnWndProc          = MainWndProc; 
    wc.cbClsExtra           = 0;
    wc.cbWndExtra           = 0;
    wc.hInstance            = hInstance;
    wc.hIcon                = LoadIcon(0, IDI_APPLICATION);
    wc.hCursor              = LoadCursor(0, IDC_ARROW);
    wc.hbrBackground        = CreateSolidBrush(GetSysColor(COLOR_3DFACE));
    wc.lpszMenuName         = 0;
    wc.lpszClassName        = L"CGFramework";
    DWORD dwStyle   = WS_OVERLAPPED | WS_THICKFRAME | WS_BORDER | 
                                WS_DLGFRAME | WS_SYSMENU | WS_MINIMIZEBOX; // WS_DLGFRAME | 
    if( !RegisterClass(&wc) )
    {
        MessageBox(0, L"RegisterClass FAILED", 0, 0);
        return E_FAIL;
    }

    RECT r;
    //r.left        = 100;
    //r.top     = 100;
    //r.right       = 800;
    //r.bottom  = 600;
    ////-----------------------------
    r.left      = 100;
    r.top       = 100;
    r.right     = 900;
    r.bottom    = 700;
    ////-----------------------------
    //r.left        = 100;
    //r.top     = 100;
    //r.right       = 800+GetSystemMetrics( SM_CXFRAME )*2;
    //r.bottom  = 600+GetSystemMetrics( SM_CYFRAME )*2+GetSystemMetrics( SM_CYCAPTION );

    BOOL result = AdjustWindowRect( &r, dwStyle, FALSE );

    HWND hWindowHandle = CreateWindow( L"CGFramework", L"testWindow", dwStyle,
                          r.left, r.top, r.right-r.left, r.bottom-r.top, 
                          // r.left, r.top, r.right, r.bottom, 
                          0, 0, hInstance, 0 );

    if( 0 == hWindowHandle )
    {
        MessageBox(0, L"CreateWindow FAILED", 0, 0);
        UnregisterClass( wc.lpszClassName, hInstance );
        return 0;
    }

    char buffer[512]; // for outing test message
    GetClientRect( hWindowHandle, &r );
    sprintf( &buffer[0], "left=%i, top=%i, right=%i, bottom=%i", r.left, r.top, r.right, r.bottom );
    MessageBoxA(0, buffer, 0, 0); // print rect values before ShowWindow

    ShowWindow( hWindowHandle, SW_SHOW );

    GetClientRect( hWindowHandle, &r );
    sprintf( &buffer[0], "left=%i, top=%i, right=%i, bottom=%i", r.left, r.top, r.right, r.bottom );
    MessageBoxA(0, buffer, 0, 0);  // print rect values after ShowWindow

    // main window loop
    MSG msg;
    ZeroMemory( &msg, sizeof( MSG ) );
    while( msg.message != WM_QUIT )
    {
        while( PeekMessage( &msg, 0, 0, 0, PM_REMOVE ) )
        {
            TranslateMessage( &msg );
            DispatchMessage( &msg );
        }

        if( GetAsyncKeyState( VK_ESCAPE ) )
            DestroyWindow( hWindowHandle );
    }
    UnregisterClass( wc.lpszClassName, hInstance );
    return 0;
} 
```

请在回答之前仔细查看代码，因为您最终可能会回答我已经尝试过的问题（我发布这个问题是因为我已经浪费了所有的选择）。

我正在使用 Windows 8 RC（MS windows 6.2.8400）和 VS2012 RC（11.0.50706.0 QRELRC 2012 年 7 月）来获得这种奇怪的行为，并且没有任何一个好的答案能够解决这个问题。在做出任何假设之前，请务必阅读它们并测试我的代码，因为这段代码已经在许多方面进行了测试，但存在细微的差异，最终没有提供任何改进。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:45:37.603

该`CreateWindow`函数是 Windows API 的一部分，它不是由 Visual Studio 提供的，Visual Studio 版本不影响它。

最可能的解释是 VS2012 中的默认项目设置添加了一个清单，将应用程序标记为 Aero-aware 或 DPI-aware，并且该清单的存在改变了 WinAPI 函数的行为。您可以编辑或删除清单以获取旧行为。

Windows 也有可能（但不太可能）正在检查 PE 标头中的“最低操作系统版本”字段。较新版本的链接器通常不支持将旧版本写入此字段，但该`editbin`工具可用于在链接后更改它。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-13T11:47:56.540

正如其他人所说`AdjustWindowRect`，或者`AdjustWindowRectEx`是要走的路。如果设置了`WS_VSCROLL`或`WS_HSCROLL`，则需要进行特殊处理。在我的 util 库中`WS_EX_STATICEDGE`，我也对`AdjustWindowRect[Ex]`.

您最新测试中的错误是您调用`CreateWindow`错误的方式，它需要宽度和高度，而不是右和下。这应该按要求工作：

```
dwStyle = WS_OVERLAPPED | WS_THICKFRAME | WS_BORDER | WS_DLGFRAME | WS_SYSMENU | WS_MINIMIZEBOX; 
RECT r; 
r.left      = 100; 
r.top       = 100; 
r.right     = 900; 
r.bottom    = 700; 
BOOL result = AdjustWindowRect( &r, dwStyle, FALSE ); 
hWindowHandle = CreateWindow( L"CGFramework", wszWndCaption, pWindowData->dwStyle,
                              pWindowData->nPositionX, pWindowData->nPositionY,  
                              r.left, r.top, r.right-r.left, r.bottom-r.top, 
                              0, 0, hInstance, 0 ); 
```

仅供参考，这里是完整的示例：

```
#include "stdafx.h"

#include <Windows.h> 
#include <cstdio> 
#include <cassert>

LRESULT CALLBACK MainWndProc( HWND hWnd, UINT uMsg, WPARAM wParam, LPARAM lParam ) 
{ 
    switch( uMsg ) 
    { 
    // WM_DESTROY is sent when the window is being destroyed. 
    case WM_DESTROY: 
        PostQuitMessage(0); 
        return 0; 
    default: 
        return DefWindowProc( hWnd, uMsg, wParam, lParam ); 
    } 
} 

int WINAPI WinMain( HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR lpCmdLine, INT nShowCmd ) 
{ 

    WNDCLASS wc; 
    wc.style                = NULL; // CS_HREDRAW | CS_VREDRAW; 
    wc.lpfnWndProc          = MainWndProc;  
    wc.cbClsExtra           = 0; 
    wc.cbWndExtra           = 0; 
    wc.hInstance            = hInstance; 
    wc.hIcon                = LoadIcon(0, IDI_APPLICATION); 
    wc.hCursor              = LoadCursor(0, IDC_ARROW); 
    wc.hbrBackground        = CreateSolidBrush(GetSysColor(COLOR_3DFACE)); 
    wc.lpszMenuName         = 0; 
    wc.lpszClassName        = L"CGFramework"; 
    DWORD dwStyle   = WS_OVERLAPPED | WS_THICKFRAME | WS_BORDER |  
                                WS_DLGFRAME | WS_SYSMENU | WS_MINIMIZEBOX; 
    if( !RegisterClass(&wc) ) 
    { 
        MessageBox(0, L"RegisterClass FAILED", 0, 0); 
        return E_FAIL; 
    } 

    RECT r; 
    //r.left        = 100; 
    //r.top     = 100; 
    //r.right       = 800; 
    //r.bottom  = 600; 
    ////----------------------------- 
    r.left      = 100; 
    r.top       = 100; 
    r.right     = 900; 
    r.bottom    = 700; 
    ////----------------------------- 
    //r.left        = 100; 
    //r.top     = 100; 
    //r.right       = 800+GetSystemMetrics( SM_CXSIZEFRAME )*2; 
    //r.bottom  = 600+GetSystemMetrics( SM_CYSIZEFRAME )*2+GetSystemMetrics( SM_CYCAPTION ); 

    BOOL result = AdjustWindowRect( &r, dwStyle, FALSE ); 
    assert(result);
    char buffer[512]; 
    sprintf( &buffer[0], "adjust left=%i, top=%i, right=%i, bottom=%i", r.left, r.top, r.right, r.bottom ); 
    MessageBoxA(0, buffer, 0, 0); 

    HWND hWindowHandle = CreateWindow(  L"CGFramework", L"Window Test", dwStyle, r.left, r.top, r.right-r.left, r.bottom-r.top, 0, 0, hInstance, 0 );  

    if( 0 == hWindowHandle ) 
    { 
        MessageBox(0, L"CreateWindow FAILED", 0, 0); 
        UnregisterClass( wc.lpszClassName, hInstance ); 
        return 0; 
    } 

    assert(GetWindowRect(hWindowHandle, &r));
    sprintf( &buffer[0], "wnd left=%i, top=%i, right=%i, bottom=%i", r.left, r.top, r.right, r.bottom ); 
    MessageBoxA(0, buffer, 0, 0); 

    GetClientRect( hWindowHandle, &r ); 
    sprintf( &buffer[0], "style=%08x/%08x, exstyle=%08x, left=%i, top=%i, right=%i, bottom=%i", GetWindowLong(hWindowHandle, GWL_STYLE), dwStyle, GetWindowLong(hWindowHandle, GWL_EXSTYLE), r.left, r.top, r.right, r.bottom ); 
    MessageBoxA(0, buffer, 0, 0); 

    ShowWindow( hWindowHandle, SW_SHOW ); 

    GetClientRect( hWindowHandle, &r ); 
    sprintf( &buffer[0], "left=%i, top=%i, right=%i, bottom=%i", r.left, r.top, r.right, r.bottom ); 
    MessageBoxA(0, buffer, 0, 0); 

    MSG msg; 
    ZeroMemory( &msg, sizeof( MSG ) ); 
    while( msg.message != WM_QUIT ) 
    { 
        while( PeekMessage( &msg, 0, 0, 0, PM_REMOVE ) ) 
        { 
            TranslateMessage( &msg ); 
            DispatchMessage( &msg ); 
        } 

        if( GetAsyncKeyState( VK_ESCAPE ) ) 
            DestroyWindow( hWindowHandle ); 
    } 

    UnregisterClass( wc.lpszClassName, hInstance ); 
    return 0; 
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-08-13T14:08:54.533

尝试使用`AdjustWindowRectEx`并确保样式和扩展样式与窗口将使用的最终样式*完全匹配。*例如，如果您在一段时间后设置了一些附加样式`CreateWindow`，即使某些库自动完成，您也必须为`AdjustWindowRectEx`. 您可能希望在创建后检索样式以查看 Windows 或某些库是否添加了样式。

如果你使用滚动条，你也应该考虑到这一点。

# python - OpenGL中的子像素渲染 - 精度问题

> ID：11829251
> 
> 赞同：7
> 
> 时间：2012-08-06T13:27:58.440
> 
> 标签：python, opengl, pyglet

我需要为摄影测量应用程序生成几组测试图像。这些应该包含位置非常精确的简单对象（磁盘、矩形等）。

考虑到白色背景上黑色矩形的 8 位灰度图像，最小可观察位移（插值后）应该是 1/256 像素，因为每个像素有 256 个可能的强度级别。

我决定使用 OpenGL（使用 python + pyglet）来渲染这样的图像，因为稍后我将不得不渲染更复杂的（3d 场景，立体图像对）

不幸的是，我达到的最佳精度大约是像素/10，没有使用完整的强度深度。

理想情况下是否有可能做得更好 - 实现完整的 1/256 像素精度？请提供有关如何执行此操作的任何提示？

示例代码，生成部分磁盘的图像，每帧多移动 0.01 像素

```
#-*- coding: utf-8 -*-
import pyglet
from pyglet.gl import *
from PIL import Image, ImageGrab

config = pyglet.gl.Config(width = 800, height = 600, sample_buffers=1, samples=16)
window = pyglet.window.Window(config=config, resizable=True) 
window.set_size(800, 600)

printScreenNr = 0

@window.event
def on_draw():
     global printScreenNr
     window.clear()
     glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT );

     glLoadIdentity()
     glEnable(GL_LINE_SMOOTH)
     glHint(GL_LINE_SMOOTH_HINT, GL_NICEST);

     glTranslated(200, 200,0)

     circleQuad = gluNewQuadric()
     glTranslated(200+(printScreenNr*0.01), 0, 0)
     gluPartialDisk(circleQuad, 0, 50, 500, 500, 0, 180)

@window.event
def on_resize(width, height):
    glViewport(0, 0, width, height)
    glMatrixMode(GL_PROJECTION)
    glLoadIdentity()
    glOrtho (0, width, height, 0, 0, 1);
    glMatrixMode(GL_MODELVIEW)
    return pyglet.event.EVENT_HANDLED

@window.event
def on_text(text):
    global printScreenNr
    if(text == "p"):
        pyglet.image.get_buffer_manager().get_color_buffer().save('photo'+str(printScreenNr)+'.tiff')
        printScreenNr += 1

pyglet.app.run() 
```

（上面的代码使用 gluPartialDisk，但我也使用四边形测试了这个问题，结果的准确性没有差异）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:39:58.747

一个简单的方法是按一个因子缩放图像。如果将图像缩放 4.0，则 16 个原始像素将合并为一个目标像素，在缩放纯黑白图像时为您提供 16 种灰度。

但是有一个问题可能可以解释您的问题。如果你有这个：

```
 ...#####
  ...#####
  ...#####
  ...##### 
```

（左：白色，右：黑色填充矩形），那么您有 12 个白色和 4 个黑色像素，它们对单个输出像素有贡献。要获得 1 个黑色像素，输入需要是这样的：

```
 ....####
  ....####
  ....####
  ...##### 
```

看？尽管黑匣子只将一个像素泄漏到空白区域，但它会泄漏四次。因此，为了确保您的子像素渲染代码正常工作，您需要查看单个像素或角落，而不是边缘。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:46:43.410

即使您使用正交投影，GL_PERSPECTIVE_CORRECTION_HINT 也可能会影响渲染精度。至少我依稀记得 glHint(GL_PERSPECTIVE_CORRECTION_HINT, GL_NICEST); 多年前在我的正交投影场景上修复了一些空白。

# jquery - JSON 响应输出到浏览器

> ID：11829256
> 
> 赞同：1
> 
> 时间：2012-08-06T13:28:20.113
> 
> 标签：jquery, symfony

我正在使用 Symfony2 控制器返回 JSON 字符串：

```
return new Response(json_encode(array('errors' => $errors))); 
```

基本上，我想将错误返回到表单。但是当我调用该操作时，JSON 输出会显示在我的浏览器中。但我想在 JavaScript (jQuery) 的回调函数中调用 JSON。

我尝试将 Content-Type 设置为`application/json`，但它在 IE 中不起作用，因为 IE 想要保存文件。

我的 JavaScript：

```
$("#form").submit(function() {
    var url = $(this).attr("action");

    $.ajax({
        type: "POST",
        url: url,
        data: $(this).serialize(),
        success: function(data, textStatus, jqXHR) {
            // Ouptut errors
        }
    });
}); 
```

我能做些什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:41:52.177

您需要防止单击时提交表单，以便仅通过以下方式提交`$.ajax()`：

```
$("#form").submit(function(e) {
    e.preventDefault(); // stop the form being submit on click

    var url = $(this).attr("action");    
    $.ajax({
        type: "POST",
        url: url,
        data: $(this).serialize(),
        success: function(data, textStatus, jqXHR) {
            // Ouptut errors
        }
    });
}); 
```

# sharepoint - 文档编号请求列表的自动编号

> ID：11829257
> 
> 赞同：0
> 
> 时间：2012-08-06T13:28:30.753
> 
> 标签：sharepoint, sharepoint-2010, autonumber

我们有一个场景，用户请求文档的“自动编号”。

当向列表中添加新项目时，他们选择“文档类型”的字段是另一个列表中保存的查找字段（doc_type），称为“Document_Types_Lookup”。

用户在请求新项目时可以选择多达 15 种不同的文档类型中的一种，并且自动编号应与文档类型保持同步……因此该特定文档类型的下一个可用编号不会丢失。这就是为什么我不能简单地使用 ID 列并将其附加到工作流中的“doc_type”字段。

假设列表中已经有以下自动编号： •DEMO-MATH-001 •DEMO-MATH-002 •DEMO-ENG-001 •DEMO-ENG-002 •DEMO-SCI-001

如果用户提交 MATH 文档的请求，他们应该使用的号码是 DEMO-MATH-003。

如果用户提交 SCI 文档请求，他们应该使用的编号是 DEMO-SCI-002。

我已经在工作流程中使用了自动编号，只是将 ID 列放在最后，但这不会与特定的文档类型保持同步。

谢谢你的任何想法！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:07:40.170

我建议使用自定义文档 ID 服务来实现这一点。这是一个很好的例子：http: [//zimmergren.net/technical/sp-2010-sharepoint-server-2010-creating-a-custom-document-id-provider](http://zimmergren.net/technical/sp-2010-sharepoint-server-2010-creating-a-custom-document-id-provider)

基本上，文档 ID 服务功能是开箱即用的，它为您提供 XXXX-YY-ZZ 类型的文档中的自动编号，您可以在其中从网站集管理员操作配置 XXXX，但 YY 和 ZZ 是自动生成的。

如果您需要更多帮助，请告诉我

# c# - 在 .NET WMQ API 中接收 WebSphere MQ 消息有时会抛出 MQRC_RFH_FORMAT_ERROR

> ID：11829264
> 
> 赞同：2
> 
> 时间：2012-08-06T13:28:46.267
> 
> 标签：c#, .net, ibm-mq

我正在使用带有 amqmdnet.dll 7.5.0.0 的 WebSphere MQ v7 Server 和 WebSphere MQ Client v7.5 作为 .NET 库，用于通过 WebSphere MQ 进行通信。有时，当我尝试`MQMessage`从队列中阅读时，我得到`MQException`了`MQRC_RFH_FORMAT_ERROR`理由。

```
var message = new MQMessage();
queue.Get(message); 
```

这种行为似乎取决于消息的发送者及其内容。它通常不适用于不同平台上的系统发送具有浮点或双属性的消息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:28:46.267

这是 IBM amqmdnet.dll 中的一个全球化错误。在客户端`strmqtrc.exe`（

```
00001F21 11:48:00.351013   7104.1           :       Exception received
System.FormatException
Message: Input string was not in a correct format.
StackTrace:
   at System.Number.ParseSingle(String value, NumberStyles options, NumberFormatInfo numfmt)
   at System.Convert.ToSingle(String value)
   at IBM.WMQ.MQMarshalMessageForGet.GetValueAsObject(String dt, String propValue)
   at IBM.WMQ.MQMarshalMessageForGet.ProcessAllAvailableRFHs()
00001F22 11:48:00.351115   7104.1           :       We are not sucessful in parsing one of theRFH2Header.Raise the RFH_FORMAT exception and breakfurther processing in loop
00001F23 11:48:00.351825   7104.1           :       MQException CompCode: 2 Reason: 2421 
```

`MQMarshalMessageForGet`使用[.NET Reflector](http://www.reflector.net/)进行反编译显示：

```
private object GetValueAsObject(string dt, string propValue)
{
    ...

    switch (dt)
    {
        ...

        case "r4":
            return Convert.ToSingle(propValue);

        case "r8":
            return Convert.ToDouble(propValue);

        ...
    }

    ...
} 
```

消息是在当前系统的文化中读取的，而不是在传输预期的文化中（在所有平台上都应该相同）！重现问题的简单测试：

```
[Test]
public void PutAndGetMessageWithFloatProperty() {
    using (MQQueue queue = _queueManager.AccessQueue(TestQueue, MQC.MQOO_OUTPUT | MQC.MQOO_INPUT_AS_Q_DEF))
    {
        Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");

        MQMessage message = new MQMessage();
        message.SetFloatProperty("TEST_SINGLE", 14.879f);
        message.WriteString("some string");
        message.Format = MQC.MQFMT_STRING;

        queue.Put(message); // Writes property value as 14.879

        Thread.CurrentThread.CurrentCulture = new CultureInfo("cs-CZ");

        MQMessage readMessage = new MQMessage();
        queue.Get(readMessage); // Throws MQException because 14,879 is correct format

        queue.Close();
    }
} 
```

**解决方法**

我正在使用这个简单的范围类：

```
public class CultureForThreadScope : IDisposable {
    private readonly CultureInfo oldCulture;

    public CultureForThreadScope(CultureInfo culture) {
        oldCulture = Thread.CurrentThread.CurrentCulture;
        Thread.CurrentThread.CurrentCulture = culture;
    }

    public void Dispose() {
        Thread.CurrentThread.CurrentCulture = oldCulture;
    }
} 
```

我正在包装`Get`对范围的每个调用。

```
using (new CultureForThreadScope(CultureInfo.InvariantCulture)) {
    destination.Get(message, getOptions);
} 
```

# java - 使用 PHP/Java 桥接器时的 ClassNotFoundException 故障排除

> ID：11829265
> 
> 赞同：2
> 
> 时间：2012-08-06T13:28:46.580
> 
> 标签：java, php

我已经按照这个教程[http://www.dsl.uow.edu.au/~sk33/php5java.htm](http://www.dsl.uow.edu.au/~sk33/php5java.htm)，但最后当我尝试这个时

```
<?php

java_require('http://localhost/test/HelloWorld.jar');
$myObj = new Java('HelloWorld');

// display Hello World
echo (String) $myObj->getHelloWorld();

?> 
```

我得到了这个例外

> PHP致命错误：未捕获[o（异常）：“java.lang.Exception：CreateInstance失败：new HelloWorld。原因：java.lang.ClassNotFoundException：在java_require（）路径中找不到HelloWorld。请检查路径和SEL和文件权限。负责 VM：1.5.0_14@http://java.sun.com/" at:#-10 php java.bridge.DynamicJavaBridgeClassLoader.loadClass(DynamicJavaBridgeClassLoader.java:293)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:36:23.827

您关注的教程已有 5 年历史，根据[常见问题解答](http://php-java-bridge.sourceforge.net/pjb/FAQ.html)，`java_require()`已弃用：

> > **为什么 java_require() 已被弃用？**
> > 
> > 因为Java没有模块系统。
> > 
> > 例如，如果应用程序 A 所需的旧版本的库已被缓存，则无法加载应用程序 B 所需的库“lucene-2.3.1.jar”。 **无论如何链接库的尝试都会在运行时导致“NoClassDefFound”或“NoSuchMethod”错误**。或者某些过程可能会抛出已检查的异常，即使它们没有声明它们。
> > 
> > 为了保护 PHP 开发人员免受 Java 的“罐子地狱”，**我从 PHP/Java Bridge 6.0 版中删除了动态类加载机制**；java_require() 发出警告。
> > 
> > 一个合适的 Java 模块系统必须使用特殊的 Java VM 钩子，这些钩子直到现在才存在。
> > 
> > **如何加载 Java 库？**
> > 
> > [您应该按照Java 独立](http://php-java-bridge.sourceforge.net/pjb/desktop-apps.php)或[Java webapps](http://php-java-bridge.sourceforge.net/pjb/webapp.php)文档中的说明链接您的 Java 应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:36:58.500

该错误表明`HelloWorld`未找到该类。

验证该文件是否确实位于您用于`java_require`. 如果是，请检查并确保文件中的代码与教程中的描述完全一致。

# android - Android 类型错误：解析 XML 时出错：格式不正确（令牌无效）

> ID：11829271
> 
> 赞同：1
> 
> 时间：2012-08-06T13:29:00.527
> 
> 标签：android, xml

我对 android/java 非常陌生，并且一直在关注一些 youtube 教程，并且在我的一个 xml 布局中遇到了一个严重的问题。

基本上，我在该部分`android:hint`的代码中收到“解析 XML 时出错：格式不正确（无效令牌）”错误。`EditText`谁能给我一个线索我做错了什么？（顺便说一句，代码可能是一团糟，因为我一直在搞乱只是想让它工作！）

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="wrap_content"
android:orientation="vertical"
android:padding="25dp" >

<EditText
    android:id="@+id/etCommands"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="@string/Type a command"
    android:inputType="true">
</EditText>

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:weightSum="100" >

    <Button
        android:id="@+id/bResults"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="20"
        android:text="@string/Try Command" >
    </Button>

    <ToggleButton
        android:id="@+id/tbPassword"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_weight="80"
        android:checked="true"
        android:paddingBottom="3dp"
        android:text="@string/ToggleButton" />
</LinearLayout>

<TextView
    android:id="@+id/tvResults"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="@string/Invalid"
</TextView>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:30:00.213

```
<TextView
    android:id="@+id/tvResults"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center"
    android:text="@string/Invalid">   <--- you forgot to close bracket here
                                 ^^^  
</TextView> 
```

而在你的`EditText`你正在设置你的提示`string.xml`

并确保你的没有问题`string.xml`

```
<EditText
    android:id="@+id/etCommands"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:hint="SOME HINT" <----    Just try this testing purpose only
    android:inputType="true">
</EditText> 
```

# objective-c - 我可以在 superView 中的特定点获取 subView 吗？

> ID：11829282
> 
> 赞同：5
> 
> 时间：2012-08-06T13:29:33.213
> 
> 标签：objective-c, ios, uiview, uiimageview

我想要的是类似的东西

```
-(UIView*) fromPoint: (CGPoint) point inView:(UIView*) superView 
```

类似的东西已经存在了吗？我想要它，以便我可以成功地交换任意两个`UIImageView`的内容，如果一个被拖放到另一个上。

一种方法是检查所有子视图是否包含提供的点。还有其他方法吗？

谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T13:42:39.267

如果命中测试在其层次结构中的视图上，则在 UIView 上执行 hitTest 将返回其子视图

```
- (UIView *)hitTest:(CGPoint)point withEvent:(UIEvent *)event 
```

你想要的事件将是 nil

# apache - .htaccess 重定向没有主页

> ID：11829287
> 
> 赞同：1
> 
> 时间：2012-08-06T13:29:52.277
> 
> 标签：apache, .htaccess

我想将我的网站从 www 重定向到非 www，但没有“主页”。

例如。www.domain.com 或 www.domain.com/ 什么都不做，但 www.domain.com/everything-else 应该重定向到 domain.com/everything-else

为什么下面的代码也重定向“主页”？

```
RewriteCond %{HTTP_HOST} ^www\.(.+) [NC]
RewriteCond %{REQUEST_URI} !^$
RewriteRule ^(.*)$ http://%1/$1 [R=301,NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:34:03.257

也许是因为您还*允许*通过`^(.*)$`在`RewriteRule`.

尝试这个：

```
RewriteRule ^(.+)$ http://%1/$1 [R=301,NC,L] 
```

`.*`接受任何字符零次或多次，而`.+`接受任何字符一次或多次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:46:12.660

关于这一点；`http://localhost/ (index.php says $_SERVER['REQUEST_URI'] is /)`

我认为，即使显示站点的根目录“REQUEST_URI”也不能为空，它应该是“/”。所以也许你应该尝试这样的事情；

```
重写引擎开启

RewriteCond %{HTTP_HOST} ^www\.domain\.com$ [NC]
RewriteCond %{REQUEST_URI} !^/$
重写规则 ^(.+)$ http://domain.com/$1 [R=301,L]

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:50:15.690

那不工作吗？

```
RewriteCond %{HTTP_HOST} ^www\.(.+) [NC]
RewriteCond %{REQUEST_URI} !^\/?$
RewriteRule ^(.*)$ http://%1/$1 [R=307,NC,L] 
```

# php - 回显不带标签的链接

> ID：11829293
> 
> 赞同：0
> 
> 时间：2012-08-06T13:30:11.560
> 
> 标签：php, mysql

我有一个 url 输入字段，其中未标记的文本存储为如下链接：

```
$newwebsiteurl = '<a target="_blank" href="http://' .$_POST['newwebsiteurl']
                  . '">' .   $_POST['newwebsiteurl'] . '</a>'; 
```

但现在我想要另一种可以编辑数据的形式，我想回显没有标签的信息（来自mysql），所以基本上与上面的代码相反，我需要做这样的事情：

```
 echo $info['category'] 
```

减去这部分：

```
 <a target="_blank" href="http://
                <a target="_blank" href="xxxxx">*show_this_part_only*</a> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:32:15.567

只是不要一开始就在 SQL 中保存 HTML 标签，只在显示时添加它们（如果我理解正确的话）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:32:59.357

`echo str_replace("/http:\/\//","",$_POST['newwebsiteurl']");`

为了更清楚：

```
<a target="_blank" href="<?php echo $_POST['newwebsiteurl']; ?>"><?php echo str_replace("/http:\/\//","",$_POST['newwebsiteurl']"); ?></a> 
```

# c# - 使用 CSS @Page 渲染打印页面的大小

> ID：11829294
> 
> 赞同：3
> 
> 时间：2012-08-06T13:30:14.287
> 
> 标签：c#, css, pdf-generation, css-paged-media

您好，感谢您的关注！

## 背景

我正在使用[Rotativa PDF](http://www.codeproject.com/Articles/335595/Rotativa-how-to-print-PDF-in-Asp-Net-MVC)打印多页报告，它将 HTML 页面打印为 PDF。为此，我需要遵循 CSS 2.1 及更高版本的 @page 约定。

我的应用程序在 C#、MVC 3 中。

## 问题/问题：

即使我在 @page 声明中指定 8.5 英寸乘 11 英寸，打印的 PDF 中的页面也仅缩放到 8.5X11 表的约 75%。我知道这一点是因为我有一个应该覆盖整个页面的背景图像，但它只打印到整个页面的 75% 左右。内容也按比例缩小，所以一切都按比例正确，只是没有按应有的方式绘制整个 8.5X11 帧。

我在 CSS 中像这样设置报告的封面：

```
@page defaultPage{size:8.5in 11in;margin: 2cm;}    
#CoverPage {
        page: defaultPage;
        background-image: url(/Resources/rendered_assets/img/cover_bg.jpg); 
        background-repeat:no-repeat;
        width:8.5in;
        height: 11in;           
    } 
```

和 HTML：

```
 <div id="CoverPage">
        <p>foo</p>
        <p>bar</p>
 </div> 
```

知道我可能做错了什么吗？提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T13:53:14.263

不知道它是否能解决您的问题.. 但是使用最新的[Rotativa](http://nuget.org/packages/Rotativa)版本，您可以将一些选项传递给渲染引擎。您可以像这样设置 PageWidth 和 PageHeight 和 Margins：

```
 return new ViewAsPdf()
    {
        FileName = "TestView.pdf",
        PageSize = Size.A3,
        PageOrientation = Orientation.Landscape,
        PageMargins = { Left = 0, Right = 0 }, // it's in millimeters
        PageWidth = 122, // it's in millimeters
        PageHeight = 44
    }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-06T07:25:22.797

```
var urlHelper = new UrlHelper(Request.RequestContext);

string url = urlHelper.Action("Index", new { name = "value" });

return new UrlAsPdf("http://www.github.com")
{
    FileName = "TestExternalUrl.pdf",
    PageMargins = new Margins(3, 3, 3, 3)
}; 
```

# android - 无法完成为 Android 构建内核模块

> ID：11829297
> 
> 赞同：0
> 
> 时间：2012-08-06T13:30:31.807
> 
> 标签：android, module, compilation, kernel

我正在尝试使用 2.6.32 内核（更准确地说是 PL2303 USB 串行转换器模块）为 Android 构建一个内核模块，但由于某种原因，我无法实际构建这些模块。

这是我在编译模块之前运行的代码：

```
export PATH=~/android-ndk-r5/toolchains/arm-eabi-4.4.0/prebuilt/linux-x86/bin/:$PATH
make menuconfig ARCH=arm CROSS_COMPILE=arm-eabi- -j4 
```

在配置所有内容以匹配平板电脑的内核版本后，我运行

```
make modules ARCH=arm CROSS_COMPILE=arm-eabi- -j4 
```

这是位于驱动程序/usb/serial 上的生成文件（还有其他几行，例如文件夹中所有其他驱动程序的最后一行，这只是我正在使用的一个）

```
obj-$(CONFIG_USB_SERIAL)            += usbserial.o

usbserial-obj-$(CONFIG_USB_SERIAL_CONSOLE)  += console.o
usbserial-obj-$(CONFIG_USB_EZUSB)       += ezusb.o

usbserial-objs := usb-serial.o generic.o bus.o $(usbserial-obj-y)

obj-$(CONFIG_USB_SERIAL_PL2303)     += pl2303.o 
```

但这只会创建 .o 文件，并且在不构建实际的 .ko 文件的情况下停止。知道是什么原因造成的吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-06T01:54:21.233

**obj-m :=** usbserial.o 告诉它制作 usbserial.ko

请检查此中的[Makefile](http://blog.csdn.net/yming0221/article/details/7194988) *，*它可能会有所帮助。

# php - PHP post id 无法使用 Javascript 变量作为 ID

> ID：11829298
> 
> 赞同：0
> 
> 时间：2012-08-06T13:30:33.773
> 
> 标签：php, javascript

我有一个网站，可以帮助学生通过输入他们的课程来制定时间表。当他们点击一个按钮时，他们可以从下拉列表中选择课程，然后在右侧的框中输入班级#。我正在尝试使用 php 来获取框的内容，但它不起作用。部分问题可能是`id`javascript为盒子分配了一个数字（如1、2、3）。

这是[JSFIDDLE](http://jsfiddle.net/z3xeG/1/)（只添加 1 个类，我还没有添加 2 个类。另外，第一个数字（如 100）来自下拉列表。）

HTML：

```
<form action='http://people.brandeis.edu/~rnewman/schedule.php' method='POST'>
<div id="boxes"></div>
<br>
<input type='button' value='Add Class' id='add' style='height: 40px;'>
<input type='submit' style='height: 40px;' value='Create Schedule'>
</form>​ 
```

查询：

```
var x = 0;
 $(document).ready(function(){
 $("#add").click(function(){

   $('#boxes').append('<input type="text" id="' + ++x + '"><br>');  //the id isn't working
  });
 }); 
```

来自 schedule.php

```
echo $_POST['course'];
echo "<br>";
echo $_POST['0'];
echo $_POST['1'];
echo $_POST['2']; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:43:37.597

我不是 PHP 人，但通常框架会寻找元素的`name`属性而不是`id`属性。如果将`name`属性添加到输入文本框，它应该可以工作：

```
$('#boxes').append('<input type="text" id="' + ++x + '" name="' + ++x + '"><br>'); 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T13:43:44.890

正如您[在 stackoverflow 上看到的这个问题](https://stackoverflow.com/questions/70579/what-are-valid-values-for-the-id-attribute-in-html)：

```
ID and NAME tokens must begin with a letter ([A-Za-z]) and may be followed 
by any number of letters, digits ([0-9]), hyphens ("-"), underscores ("_"), 
colons (":"), and periods ("."). 
```

所以，简而言之，你不能让你`id`的 ' 就像数字一样，是的，正如其他人所说，你应该添加一个`name`属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:43:26.947

您应该为输入提供 NAME 属性。这就是 PHP 将用来索引输入的内容。

```
<input type="text" id="' + ++x + '" name="myNewInputs[]" /> 
```

# php - 哪个更快：在 img 标记中指定 PHP 脚本的相对或绝对 URL？

> ID：11829300
> 
> 赞同：1
> 
> 时间：2012-08-06T13:30:42.487
> 
> 标签：php, html, image

我在同一个目录中有两个 php 脚本 -`a.php`和`b.php`. b.php 创建一个图像并显示它。（示例[here](http://php.net/manual/en/function.imagecreate.php)）。

`a.php`

```
<html>
<body>

<img src=<?php echo "b.php";?> alt="image"/>
</body>
</html> 
```

既`<?php echo "b.php";?>`和`<?php echo "http://localhost/b.php";?>`工作。但我想知道哪个会更快地显示图像？还是两者都一样？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:32:38.160

它们应该是相同的，因为您的浏览器无论如何都会对图片发出新请求，但是我建议您*始终*使用`b.php`，或另一种相对路径而不是完整（绝对）路径（除非图片在当然，另一台服务器）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:33:13.273

这是无关紧要的。PHP 脚本将在几分之一秒内执行，浏览器需要处理 HTML。浏览器也将在几分之一秒内处理这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:34:08.490

两者都是一样的。区别只是相对或绝对路径。

# java - java 到 C/C++(carbide c/c++) 的转换

> ID：11829301
> 
> 赞同：1
> 
> 时间：2012-08-06T13:30:44.740
> 
> 标签：java, c++, c, symbian

在 Java 中：

值 = 1122;

```
public static final byte[] intToByteArray(int value) {
        return new byte[] {
                (byte)(value >>> 24),
                (byte)(value >>> 16),
                (byte)(value >>> 8),
                (byte)value};
    }

  public static int byteArrayToInt(byte[] data) {
        return (int)(
                (int)(0xff & data[0]) << 24  |
                (int)(0xff & data[1]) << 16  |
                (int)(0xff & data[2]) << 8   |
                (int)(0xff & data[3]) << 0
        );
    } 
```

在这里它将返回 [0, 0, 4, 98] 所以在 C 中：

```
char* intToByteArray(int value){
        char* temp = new char[4];
         temp[0] = value >> 24,
         temp[1] = value >> 16,
         temp[2] = value >> 8, 
         temp[3] = value;
         return temp;
} 
```

因为在 c 中没有字节数据类型，我们可以使用 char* 来代替，但是当我返回临时值时，我得到了 null 所以我检查了这样的值 where = b\x04 'b'= 98, x04 = 4 我不能获取为零的数据，所以在转换回来时我应该如何管理剩余值？

```
 char* where = new char[10];
         where[0] = temp[3];
         where[1] = temp[2];
         where[2] = temp[1];
         where[3] = temp[0];
         where[4] = 0; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:36:55.927

> 我越来越空

不，你不是。你得到的第一个字节是一个`\0`空字节。当您将其打印为文本字符串时，它将终止该字符串。但它不是一个字符串，它是一个字节数组。

如果你得到一个 NULL，你会得到一个分段错误或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:14:41.280

虽然上面的帖子是绝对正确的，但您的移植工作还有一个更严重的问题。你的java产生

```
[ 0, 0, 4, 98 ] 
```

当你的 C 产生

```
[ 98, 4, 0, 0 ] 
```

当像这样简单地转换时，代码将不起作用。无论硬件如何，Java 都是大端的，但您的 C(++) 毫无疑问是低端的。更糟糕的是，你不能确定每次都会这样。使用 Carbide，我想您可以完美地偶然发现大端架构（一些 ARM？不是该领域的专家）。因此，您必须[检测 Carbide 平台的字节序，](https://stackoverflow.com/questions/1001307/detecting-endianness-programmatically-in-a-c-program)或者用增量模 256 替换位移位。取决于您调用该函数的频率。模将认真对待更多的处理器工作，但不关心字节顺序。

# xml - 使用 FOP 在生成的 PDF 中保留空格

> ID：11829304
> 
> 赞同：3
> 
> 时间：2012-08-06T13:30:50.300
> 
> 标签：xml, xslt, whitespace, xsl-fo, apache-fop

我正在`FOP`使用我想在单词之间保留空格的文件来实现`XSLT`。 这就是我的样子：`XML`
`XML`

```
 <lines>
        <line1>       My Creation       </line1>
        <line2>                                 address one AAAAAAAAAAA</line2>
        <line3>            This is the              address of creation</line3>
   <lines> 
```

以下是以下形式的结果`PDF`：

```
 My Creation
  address one AAAAAAAAAAA
  This is address of creation 
```

但我需要它是这样的：

```
 My Creation       
                                          address one AAAAAAAAAAA
                     This is the              address of creation 
```

因此保留所有空间。我使用了以下行：

```
 <xsl:preserve-space elements="*"/> 
```

但无济于事。
我用谷歌搜索解决方案，但徒劳无功。
任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-07T05:46:01.813

```
<fo:block font-family="monospace" white-space="pre" text-align="left">
    <xsl:value-of select="." />
</fo:block> 
```

1.  `white-space="pre"`将保留空格
2.  `font-family="monospace"`将使空格的大小与字符的大小相等

# codeigniter - 除我的主页外，所有页面都出现 404 错误

> ID：11829307
> 
> 赞同：2
> 
> 时间：2012-08-06T13:31:09.190
> 
> 标签：codeigniter

主页可以正常打开，但是当我尝试导航到我网站上的其他页面时，我收到 404 错误。但是，当我将 index.php 放入 url 时，页面*确实*打开了。

在我的配置文件中，我设置了`$config['uri_protocol'] = "AUTO";`.

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:58:47.410

文件内`config.php`：

改变

```
 $config['index_page'] = "index.php"; 
```

至：

```
 $config['index_page'] = ""; 
```

`.htacces`并在您的根目录中创建一个文件，其中包含：

```
RewriteEngine On
RewriteBase /

RewriteCond $1 !^(index\.php|assets|fav\.ico|robots\.txt)
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?$1 [L] 
```

# python - 在 Django ModelAdmin 中获取相对于所选 ForeignKey 的初始数据

> ID：11829310
> 
> 赞同：1
> 
> 时间：2012-08-06T13:31:19.520
> 
> 标签：python, django, django-admin

我想为在大多数情况下与客户模型中的字段具有相同值的客户创建发票，但有时必须在发票上更改一个或多个字段。

为了更好地理解这里是模型的简化版本：

```
class Customer(models.Model):
    name = models.CharField(max_length=50)
    surname = models.CharField(max_length=50)
    email = models.Charfield(max_length=50)

class Invoice(models.Model):
    customer = models.ForeignKey(Customer)
    name = models.CharField(max_length=50)
    surname = models.CharField(max_length=50)
    email = models.Charfield(max_length=50) 
```

我在客户管理页面上有一个特殊按钮，可将用户重定向到`/admin/sell/invoice/add/?customer=[customer.id]`

通过客户模型中的值预先填充发票管理中的字段的最佳方法是什么？发票模型管理员有可用的客户 ID。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-08T20:38:46.437

为了能够预填充您的管理视图，您需要像这样修改管理表单：

```
class InvoiceForm(forms.ModelForm):
    class Meta:
        model = Invoice

    def __init__(self, *args, **kwargs):
        super(InvoiceForm, self).__init__(*args, **kwargs)
        # get the customer ID somehow
        my_customer = Customer.objects.get(id=CUSTOMER_ID)
        self.initial['name'] =  my_customer.name
        self.initial['surname'] = my_customer.surname
        self.initial['email'] = my_customer.email

class InvoiceAdmin(admin.ModelAdmin):
    form = InvoiceForm 
```

# html - 用于 django 的用户友好的 HTML 文本编辑器经过强化，可供非员工注册用户使用

> ID：11829318
> 
> 赞同：0
> 
> 时间：2012-08-06T13:31:45.933
> 
> 标签：html, django, security, wysiwyg, usability

我正在寻找一种让用户安全地创建 HTML 内容的方法，它具有基本的 HTML 编辑功能，将 HTML 编辑功能与服务器端 HTML 清理和图像/文件上传集成在一起。文本编辑器必须**非常**易于使用，因为大多数用户是儿童；所以 Markdown、wiki 格式和类似的东西都不在了，Wymeditor 及其笨重的插件也被淘汰了。该网站是用 django 编写的。

我见过的大多数文本插件/cms/博客应用程序似乎都假设用户将是受信任的员工。而一些 CMS 应用程序（例如 django-cms）甚至不允许您轻松地让非员工用户编辑内容。

我如何在 django 中安全地执行此操作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:40:02.087

我不知道“django”集成，但多年来我们一直在 ASP.NET 下成功使用[CKEditor](http://ckeditor.com/) - 非常可定制，包括所有工具栏选项和插件（如果需要也很容易编写）。

相信我，我们有一些真正的“用户”！！

（我与 CKEditor 没有任何关联，除了是一个满意的用户）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:27:38.747

只是为了表明你不能一直取悦所有人，我的组织也使用 CKEditor，我们遇到了很多问题。大多数这些问题都与用户有关，即他们首先做错了什么，但这似乎是你问题的重点——即使是最无能的用户也无法破解。

但是，话虽如此，我们仍在使用它，因为我还没有找到更好的东西。总是有 TinyMCE，但如果不是更令人头疼的话，这也是一样多。[我最近打开了一个名为RedactorJS](http://redactorjs.com/)的新（或至少对我来说是新的），我开始考虑部署它。也已经有一个[Django 包](https://github.com/TigorC/django-redactorjs)。就像我说的，我还没有使用它，所以我无法证明它在实践中最终会如何工作，但它看起来很漂亮。

编辑：我忘了提到 CKEditor 的很多问题似乎也是基于浏览器的，这取决于@freefaller 的办公室设置，这可以解释为什么他喜欢它而我不喜欢。最初，所有用户仍在使用 IE7。我们最终将每个人都升级到了 IE8，这对一些人有所帮助，但也引入了一些新问题。我们想升级到IE9，但大部分员工还在XP机器上。我可以说我没有注意到 CKEditor 与 IE9 的任何问题，所以如果你运行的是 IE9+，你可能不会对 CKEditor 有任何问题。一定要热爱企业，嗯？;)

# windows - 处理文件的批处理脚本

> ID：11829323
> 
> 赞同：0
> 
> 时间：2012-08-06T13:32:01.557
> 
> 标签：windows, batch-file

我有一个配置文件，该文件就像 mach.conf

```
Machine_IP = <IP Address>
Machine_Name = <Machine name>
User_Name = <UID>
ERRORCODE = 8000
.. 
```

同样地。我是 Windows 批处理脚本的新手，尽管我在互联网上阅读了有关批处理脚本的内容并且能够理解和编写简单的批处理脚本。但是我找不到使用批处理脚本处理文件的地方，比如如果我看到 ERRORCODE = 8000 进行更改并将 8000 替换为 8001，我想读取配置文件。

如何使用批处理脚本来做到这一点。请给我链接或一些提示。

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-29T03:29:24.920

我添加了一些可能不是必需的代码，但允许程序操作未引用的**<**和**>**。它所做的只是在它们前面加上一个**^**，所以**<**变成**^<**并且**>**变成**^>**。

```
@echo off
 setlocal enabledelayedexpansion
 if exist config.tmp del config.tmp
 for /f "tokens=1* delims== " %%x in (config.cnf) do call :processFile "%%x" "%%y"
 move config.tmp config.cnf > nul
 echo File Updated
 endlocal
goto :eof

:processFile
 set "Var=%~1"
 set "Val=%~2"

 :: Add Escape Code to the greater-than and less-than symbols so they don't
 :: act as pipes and create errors.
 set "Var=%Var:<=^<%"
 set "Var=%Var:>=^>%"
 set "Val=%Val:<=^<%"
 set "Val=%Val:>=^>%"

 if "%Var%"=="ERRORCODE" set /a Val=%Val% + 1

 echo %Var% = %Val%>> config.tmp 
```

# jquery - 如何使用 jQuery 在 div 中找到相等的文本？

> ID：11829330
> 
> 赞同：3
> 
> 时间：2012-08-06T13:32:21.620
> 
> 标签：jquery

我有html：

```
<div class="items-list-container">
   <div class="fieldset-item">Something</div>
   <div class="fieldset-item">Something 2</div>
   <div class="fieldset-item">Something 3</div>
   <div class="fieldset-item">Something 4</div>
   <div class="fieldset-item">Something 5</div>
</div> 
```

我需要用 jQuery 找出变量`t`是否与文本相同，`fieldset-item`如果它是 - 将`fieldet-item`class css 设置为：`display: block`。例如，如果

```
t = "Something 2" 
```

html 应如下所示：

```
 <div style="display: block;" class="items-list-container">
       <div class="fieldset-item">Something</div>
       <div style="display: block;" class="fieldset-item">Something 2</div>
       <div class="fieldset-item">Something 3</div>
       <div class="fieldset-item">Something 4</div>
    </div> 
```

我可以在 div 中找到所有文本：

```
var text = $(".items-list-container").text(); 
```

我应该如何将 css 添加到特定匹配的 div 中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-08-06T13:36:02.083

```
$('.items-list-container .fieldset-item:contains("'+ t +'")').css('display', 'block'); 
```

**[演示](http://jsfiddle.net/7DTMf/2/)**

关于上面的代码见[@fudgey 评论](https://stackoverflow.com/questions/11829330/how-to-find-equal-text-in-div-with-jquery/11829381#comment15727159_11829381)。

**更精确地**

```
$('.items-list-container .fieldset-item').filter(function() {
    return $(this).text().trim() == t;
}).css('display', 'block'); 
```

**[演示](http://jsfiddle.net/7DTMf/4/)**

**相关参考：**

*   **[:包含()](http://api.jquery.com/contains-selector/)**

*   **[。筛选（）](http://api.jquery.com/filter)**

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T13:46:45.430

我有几个`:contains()`可能有用的 jQuery 选择器扩展（[原始要点](https://gist.github.com/461488)）

```
/* jQuery selector to match exact text inside an element
 *  http://wowmotty.blogspot.com/2010/05/jquery-selectors-adding-contains-exact.html
 *  :containsExact()     - case insensitive
 *  :containsExactCase() - case sensitive
 *  :containsRegex()     - set by user ( use: $(el).find(':containsRegex("/(red|blue|yellow)/gi")') )
 */
$.extend( $.expr[":"], {
    containsExact: $.expr.createPseudo ?
        $.expr.createPseudo(function(text) {
            return function(elem) {
                return $.trim(elem.innerHTML.toLowerCase()) === text.toLowerCase();
            };
        }) :
        // support: jQuery <1.8
        function(elem, i, match) {
            return $.trim(elem.innerHTML.toLowerCase()) === match[3].toLowerCase();
        },

    containsExactCase: $.expr.createPseudo ?
        $.expr.createPseudo(function(text) {
            return function(elem) {
                return $.trim(elem.innerHTML) === text;
            };
        }) :
        // support: jQuery <1.8
        function(elem, i, match) {
            return $.trim(elem.innerHTML) === match[3];
        },

    containsRegex: $.expr.createPseudo ?
        $.expr.createPseudo(function(text) {
            var reg = /^\/((?:\\\/|[^\/])+)\/([mig]{0,3})$/.exec(text);
            return function(elem) {
                return reg ? RegExp(reg[1], reg[2]).test($.trim(elem.innerHTML)) : false;
            };
        }) :
        // support: jQuery <1.8
        function(elem, i, match) {
            var reg = /^\/((?:\\\/|[^\/])+)\/([mig]{0,3})$/.exec(match[3]);
            return reg ? RegExp(reg[1], reg[2]).test($.trim(elem.innerHTML)) : false;
        }

}); 
```

所以使用上面的代码，你可以这样做：

```
$('div:containsExact("Something 2")').show(); 
```

或对于区分大小写的搜索，请使用：

```
$('div:containsExactCase("Something 2")').show(); 
```

最后一个扩展使用正则表达式，这很有用，但可能不适用于您的情况:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:35:21.027

像这样：

循环虽然每个`.fieldset-item`找到`.text()`匹配的那个`t`。添加CSS。

```
$('.fieldset-item').each(function(i, item){
    if ($(item).text() == t){
        $(item).css('display', 'block');
    }
}); 
```

或像@helmus 提到的，但随后使用 t 变量：

```
$(".fieldset-item:contains('" + t + "')", ".items-list-container")
     .css('display', 'block'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T13:36:57.453

试试这个

```
$(".fieldset-item:contains('Something 2')", ".items-list-container").css('display', 'block'); 
```

# mysql - 连接 3 个表，第一个和第三个之间没有关系

> ID：11829338
> 
> 赞同：0
> 
> 时间：2012-08-06T13:32:55.837
> 
> 标签：mysql

我想加入三张桌子

1.  患者数据 - (p.name)
2.  雇主数据 - (e.name, e.city, e.stateAB)
3.  list_option_data - (l.state)

`patient_data`并且`employer_data`有共同领域`pid`
`employer_data`和共同`list_option_data`领域`stateAB`

所以我想显示`p.name, e.name, e.city, l.state`：

```
select
    p.name,
    e.name,
    e.city,
    l.state
from patient_data as p
inner join
 /*
    this part i need to know how to join these...
 */ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:37:06.213

您编写的代码就像您解释的那样：

```
select
    p.name,
    e.name,
    e.city,
    l.state
from patient_data p
join employer_data e on e.pid = p.pid
join list_option_data l on l.stateAB = e.stateAB 
```

注意`inner`of`inner join`是多余的——默认的连接类型是`inner`

# fortran - 从 Fortran 中的二进制文件读取，我如何在 Matlab 中做同样的事情？

> ID：11829340
> 
> 赞同：0
> 
> 时间：2012-08-06T13:32:55.317
> 
> 标签：fortran

我对此很陌生，我正在尝试将程序从 Fortran 翻译到 Matlab。我对 Fortran 中的 READ 函数有疑问。我有以下定义：

```
DIMENSION ET2(2),PV(6,12),PNUT(4),T(2),PJD(4),BUF(1500),SS(3),CVAL(400),PVSUN(3,2)
INTEGER LIST(12),IPT(3,13)

CHARACTER*6 TTL(14,3),CNAM(400)                                           
CHARACTER*80 NAMFIL 

COMMON/EPHHDR/CVAL,SS,AU,EMRAT,NUMDE,NCON,IPT                             
COMMON/CHRHDR/CNAM,TTL                                                    
COMMON/STCOMX/KM,BARY,PVSUN 
```

我试图理解/翻译的阅读语句如下：

```
READ(NRFILE,REC=1)TTL,CNAM,SS,NCON,AU,EMRAT,((IPT(I,J),I=1,3),J=1,12),NUMDE,(IPT(I,13),I=1,3)

READ(NRFILE,REC=2)CVAL 
```

英语不是我的母语，我不太确定我是否理解了 REC 的定义。例如，如果我有一个由四个不同整数组成的文件，REC=2 是否表明我开始从第二个整数读取？

其次，我想知道接下来会发生什么。我假设来自 NRFILE 的信息保存在不同的变量中，TTL，CNAM ...？NRFILE 指的是二进制文件，但我不明白程序如何知道要在每个变量中存储哪些信息。我假设相同的信息没有存储在 TTL 和 CNAM 中，因为它们具有不同的维度？

有谁知道这在matlab中会是什么样子？到目前为止，我只能写 cval=fread(filID)，但我忽略了 REC 语句..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:58:56.927

“REC=n”用于直接访问读取。可以按任何顺序读取直接访问文件中的记录，可能是乱序的。您的示例显示它们按顺序读取，因此可能未使用此功能，尽管您仅显示前两个读取。直接访问记录通常是固定长度的；Fortran 可能会忽略它通常添加到非流无格式顺序文件中的记录长度信息。

I/O 列表中的变量按照记录中的字节出现在列表中的顺序填充。IPT 使用隐含的执行列表填充。如果它不够明显，您可以在此处找到有关此的问题。

显示文件的打开语句可能会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T23:11:06.820

如果您要将 fortran 转换为 matlab，请尝试使用 f2matlab。它通常可以为您完成大部分工作。虽然你必须在 f2matlab 完成后检查翻译（包括这些读取语句）。

# c# - 使用自定义字体在标签中绘制文本时参数无效

> ID：11829344
> 
> 赞同：2
> 
> 时间：2012-08-06T13:33:22.060
> 
> 标签：c#, winforms, custom-font

我有带有自定义字体和计时器的标签，它们会改变标签中的值。我的应用程序开始最小化。当我显示应用程序时，有时会显示异常并且标签中的文本是红十字。

在这里我尝试调用异步方法来更改标签文本

```
private void timer1_Tick(object sender, EventArgs e)
    {
        // create a delegate of MethodInvoker poiting to showTime function.
        MethodInvoker simpleDelegate = new MethodInvoker(showTime);
        // Calling showTime Async
        simpleDelegate.BeginInvoke(null, null);
    } 
```

字体加载

```
public Form1()
    {
        InitializeComponent();

        SystemEvents.SessionSwitch += new SessionSwitchEventHandler(SystemEvents_SessionSwitch); //event handler for windows lock

        File.WriteAllBytes(appPath + "\\font.ttf", Resources.font); //copy font from resources

        try
        {
            PrivateFontCollection pfc = new PrivateFontCollection();
            pfc.AddFontFile(appPath + @"/font.ttf");
            label1.Font = new Font(pfc.Families[0], 11, FontStyle.Bold);
        }
        catch
        {
            MessageBox.Show("Failed to load nice font." + "\r\n" + "Using standart font instead.", "Time app", MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
        }

    } 
```

这是标签tet更改的方法

```
private void showTime()
    {
        label1.Text = time.ToString();
    } 
```

****** *** ******异常文本******* *** ***********

 *****```
System.ArgumentException: Parameter is not valid.
at System.Drawing.FontFamily.GetName(Int32 language)
at System.Drawing.FontFamily.get_Name()
at System.Windows.Forms.Internal.WindowsFont.FromFont(Font font, WindowsFontQuality fontQuality)
at System.Windows.Forms.Internal.WindowsGraphicsCacheManager.GetWindowsFont(Font font, WindowsFontQuality fontQuality)
at System.Windows.Forms.TextRenderer.MeasureText(String text, Font font, Size proposedSize, TextFormatFlags flags)
at System.Windows.Forms.Layout.LayoutUtils.MeasureTextCache.GetUnconstrainedSize(String text, Font font, TextFormatFlags flags)
at System.Windows.Forms.Layout.LayoutUtils.MeasureTextCache.TextRequiresWordBreak(String text, Font font, Size size, TextFormatFlags flags)
at System.Windows.Forms.Label.CreateTextFormatFlags(Size constrainingSize)
at System.Windows.Forms.Label.CreateTextFormatFlags()
at System.Windows.Forms.Label.OnPaint(PaintEventArgs e)
at System.Windows.Forms.Control.PaintWithErrorHandling(PaintEventArgs e, Int16 layer)
at System.Windows.Forms.Control.WmPaint(Message& m)
at System.Windows.Forms.Control.WndProc(Message& m)
at System.Windows.Forms.Label.WndProc(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.OnMessage(Message& m)
at System.Windows.Forms.Control.ControlNativeWindow.WndProc(Message& m)
at System.Windows.Forms.NativeWindow.Callback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam) 
```

问题：当我使用自定义字体时如何摆脱这个异常？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2017-05-26T20:37:11.037

问题是变量中的`PrivateFontCollection`实例`pfc`超出范围，*有时*在第一次绘制控件之前被收集（这似乎在之后获得了对该实例的强引用）。

将实例移出方法以防止 GC 收集它：

```
class Form1 : Form
{
    readonly PrivateFontCollection _pfc = new PrivateFontCollection();
    public Form1()
    {
        ...

        _pfc.AddFontFile(appPath + @"/font.ttf");

        ...
    }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T13:52:16.607

这是在此处的另一个问题中使用的示例。它显示了你需要什么。[https://web.archive.org/web/20141224204810/http://bobpowell.net/embedfonts.aspx](https://web.archive.org/web/20141224204810/http://bobpowell.net/embedfonts.aspx)*****

# sockets - Chrome API：“chrome(.experimental).sockets”发生了什么

> ID：11829346
> 
> 赞同：2
> 
> 时间：2012-08-06T13:33:28.623
> 
> 标签：sockets, google-chrome, google-chrome-extension, chromium

有关[http://developer.chrome.com/](http://developer.chrome.com/)的[文档`chrome.sockets`](http://developer.chrome.com/trunk/apps/socket.html)，但我在[http://code.google.com/](http://code.google.com/)上找不到任何相关内容。亲爱的 Chromium 开发者，请告诉我：发生了什么？谢谢。（我不想错过这个美妙的 API。）`chrome.experimental.sockets`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:05:04.717

**[Socket API](http://developer.chrome.com/apps/socket.html)仅适用于打包[应用程序](http://developer.chrome.com/apps/about_apps.html)** ^(（[源）](https://stackoverflow.com/questions/12161964/socket-is-not-allowed-for-specified-package-type-theme-app-etc/12163180#12163180))。这就是 API 被列在[`/apps/`API 索引](http://developer.chrome.com/apps/api_index.html)中的原因，但不是[`/extensions/`](http://developer.chrome.com/extensions/api_index.html)。

如果您尝试在普通扩展中使用 API，扩展将无法加载，或者加载时出现以下消息：
![尝试安装此扩展时出现警告：指定包类型（主题、应用程序等）不允许使用“套接字”。](../Images/3ff53c693b9780e930d868bdbc4f1c27.png)

# java - Tomcat 6 启动时的警告和错误

> ID：11829348
> 
> 赞同：1
> 
> 时间：2012-08-06T13:33:35.747
> 
> 标签：java, tomcat, startup

我是 Tomcat 的新手，我的任务是在 Tomcat 6 / Java 6 中迁移 Tomcat 5 / Java 1.4 应用程序。

在 Eclipse 中启动 tomcat 6 时，我不断收到多个警告，例如：

> 未找到与“服务器/GlobalNamingResources/ResourceParams/parameter/value”匹配的规则。6 août 2012 14:49:32 org.apache.tomcat.util.digester.Digester endElement（50次左右......）

然后

> [SetPropertiesRule]{Server/Service/Engine/Host/Context} 将属性 'source' 设置为 'org.eclipse.jst.jee.server:MyProject' 没有找到匹配的属性。6 août 2012 14:49:32 org.apache.tomcat.util.digester.SetPropertiesRule 开始

然后

> 在 java.library.path: C:\METIER\MES\java\jdk1.6.0_11\bin 中找不到允许在生产环境中获得最佳性能的基于 APR 的 Apache Tomcat Native 库；[+ 多个不同的路径] 6 août 2012 14:49:32 org.apache.coyote.http11.Http11Protocol init

然后

> 无法获取 /javax/servlet/jsp/resources/jsp_2_1.xsd 6 août 2012 14:49:32 org.apache.catalina.startup.DigesterFactory 注册的 url

然后，不出所料，webApp load() 上的异常

> 已经为此上下文配置了侦听器“com.rolex.j2ee.MyProject.util.MyProjectServletCtxListener”。重复的定义已被忽略。6 août 2012 14:49:33 org.apache.catalina.core.StandardContext addApplicationListener 信息：已经为此上下文配置了侦听器“com.rolex.j2ee.MyProject.util.SessionListener”。重复的定义已被忽略。6 août 2012 14:49:33 org.apache.catalina.core.ApplicationContext 日志信息：La servlet jsp est marqué comme indisponible 6 août 2012 14:49:33 org.apache.catalina.core.StandardContext loadOnStartup GRAVE：La servlet / MyProject 一个 généré une 异常“load()”java.lang.NoClassDefFoundError：无法在 sun.reflect.NativeConstructorAccessorImpl 初始化类 org.apache.jasper.servlet.JspServlet。

我猜这个问题来自Tomcat的配置文件，但我不明白上面每个警告/错误的原因是什么。例如，在 server.xml 文件中，全局命名资源似乎定义正确，所以我应该寻找缺少的资源参数块，或者文件中的某种语法错误，或者缺少 .jar，或者... ?

欢迎任何建议！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:41:30.713

这里的基本问题是，您不能简单地将 Tomcat 5.5`server.xml`文件放入 Tomcat 6 中，并期望它无需任何更改即可工作。您需要阅读[迁移指南](http://tomcat.apache.org/migration-6.html)以及其他内容。最好的策略是从`server.xml`Tomcat 附带的 Tomcat 开始，并进行任何您需要的修改来配置它，就像您配置了以前的版本一样。这通常意味着`<Connector>`和`<Resource>`定义。请注意，**您不应再定义`<Context>`元素`server.xml`**。

还有一点需要注意：如果您要升级到不同的 Tomcat 主要版本，为什么不一直升级到 Tomcat 7.0？

> 未找到与“服务器/GlobalNamingResources/ResourceParams/parameter/value”匹配的规则

`<Resource>`元素不再采用名为`<parameter>`等的子元素。相反，将所有参数转换为`<Resource>`元素的属性。

> [SetPropertiesRule]{Server/Service/Engine/Host/Context} 设置属性 'source' ...

`<Context>`不支持“源”属性：Eclipse 正在添加它，它不应该存在。请注意，这只是一个警告：尽管有此消息，Tomcat（和您的 web 应用程序）仍将正常启动。

> 未找到基于 APR 的 Apache Tomcat Native 库，该库可在生产环境中实现最佳性能...

你还没有编译 Tomcat 的本地库，但是你已经配置了`AprLifecycleListener`，它会尝试加载这个库。如果你想使用 APR，去[获取它并编译它](http://tomcat.apache.org/download-native.cgi)。如果您不想要或不需要它，请禁用`AprLifecycleListener`（或忽略警告消息，这不会造成任何伤害）。如果您使用 Tomcat 进行 SSL 终止，则使用 APR 是一个非常好的主意，因为 APR 的 SSL 性能比 Java 的 JSSE 高得多，而且如果您需要这种东西，APR 还支持 FIPS 模式。即使您不使用 SSL，APR 连接器的扩展性也比 BIO 连接器好得多。

> 无法获取 /javax/servlet/jsp/resources/jsp_2_1.xsd 的 url ...

我不确定我能不能帮你解决这个问题。如果没有完整的堆栈跟踪或其他信息（例如提到该 URL 的文件），我们将无能为力。

# appcode - 在所有文件中搜索给定的单词

> ID：11829349
> 
> 赞同：4
> 
> 时间：2012-08-06T13:33:40.737
> 
> 标签：appcode

我正在使用 appcode 来处理 xcode 项目。如何在我的项目中的所有源文件中搜索给定的关键字？关键字不必是方法。就像是：

```
grep keyword *.m *.h 
```

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T13:58:01.143

To perform a search across all the project files in the AppCode use `Edit` | `Find` | **Find in Path**. In the `Text to find` field put your keyword, in the `File mask(s)` field put the extensions **separated by comma**:

![Find in Path](../Images/90dd5fb313cad5091e3e78b25a908f31.png)

Note that the scope is set to the `Whole project`, you can limit it if needed.

# matlab - 如何制作可中断的matlab脚本

> ID：11829352
> 
> 赞同：2
> 
> 时间：2012-08-06T13:33:46.533
> 
> 标签：matlab

有时我的脚本会运行很长时间。通常他们有一些主要的for循环并产生数据，最后由函数收集和返回。

现在，如果我决定在 1 小时后停止脚本，我会丢失迄今为止生成的所有数据。

有没有一种好方法可以创建一个可以在运行时对用户输入做出反应的 matlab 函数。我想要某种停止按钮左右...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:35:10.133

也许最简单的方法是在紧密级别的脚本中进行长循环，而不是在函数调用中。然后，当您打断它时，您就在工作区中，并且所有变量都像您打断时一样填充，您可以继续对它们做您想做的事情。

Matlab 并不容易中断一个函数并得到你想要的。在我看来，他们不让你编写强制退出处理程序实际上看起来很疯狂。哇。

# c# - 列表中数组边界之外的索引

> ID：11829353
> 
> 赞同：0
> 
> 时间：2012-08-06T13:33:57.283
> 
> 标签：c#

我有以下代码：

```
 public List<IAction> Dispatch(string[] arg)
   {
       int time=0;
       int i = 0;
       int j = 0;
       List<IAction> t = new List<IAction>(10);
       do
       {
           if (arg[j][0] == '/') // I get index out of bounds here
           {
               Options opt = new Options();                   

               time = opt.Option(arg[j]);
               j++;
           }
           else
           {
               if (int.Parse(arg[j]) >= 0 && int.Parse(arg[j]) <= 20)
               {
                   t.Add(new ComputeParam(int.Parse(arg[j])));
                   i++;
                   j++;                      
               }
           }

       } while (i != arg.Length);
       for (int z = 0; z < t.Count; z++)
       {
           ((ComputeParam)t[z]).Time = time;
       }
       return t;
   } 
```

为什么会发生错误...我只是传递参数，如果它们是数字，我将它们添加到列表中，否则我设置一个选项并继续。这里有什么问题？

编辑：我通过 2 /t:Med 2 3 这些是论点。我已经检查过它 arg[1] （在这种情况下）为空，但它不是。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:44:34.650

我在这里看到几个可能的问题：

1.  如果`arg[]`为空，你会得到异常
2.  如果`arg[j]`是一个空字符串，你会得到异常
3.  如果您有任何选择，您将在稍后执行循环时遇到异常，因为`j`正在递增，但`i`不是。

我认为这将解决它：

```
public List<IAction> Dispatch(string[] arg)
{
   int time=0;
   List<IAction> t = new List<IAction>(10);
   for (int j = 0; j < arg.Length; j++)
   {
       if (!String.IsNullOrEmpty(arg[j]) && arg[j][0] == '/')
       {
           Options opt = new Options();                   

           time = opt.Option(arg[j]);
       }
       else
       {
           if (int.Parse(arg[j]) >= 0 && int.Parse(arg[j]) <= 20)
           {
               t.Add(new ComputeParam(int.Parse(arg[j])));
               // Don't need to increment i                
           }
       }

   }
   for (int z = 0; z < t.Count; z++)
   {
       ((ComputeParam)t[z]).Time = time;
   }
   return t;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T13:42:04.163

当您尝试索引没有元素的元素时，您会得到这个，例如，通常当数组小于您的预期时您正在索引元素。

在你的情况下，要么：

*   的值`j`大于或等于`arg.Length`所以`arg[j]`抛出越界。
*   in 中的字符串`arg[j]`没有字符，因此`arg[j][0]`超出范围。

`Length`您可以使用数组的属性测试长度。`string`也`Length`有财产。

顺便说一句，您不会`j`在所有情况下都增加，甚至似乎`i`除了在检查中之外没有使用，但`j`可能已经增加了，而不是`i`意味着您`while (i != args.Length)`不会保护您免受`IndexOutOfBoundsException`. 此外，支票*至少*应该是`while (i < args.Length)`

# java - 使用贝宝 API 问题

> ID：11829354
> 
> 赞同：0
> 
> 时间：2012-08-06T13:34:01.590
> 
> 标签：java, paypal, paypal-ipn, paypal-sandbox

我正在尝试在我的应用程序中使用 Paypal，但我的所有尝试都失败了。我已将所有罐子连接到我的应用程序。现在，我已经在[https://developer.paypal.com/](https://developer.paypal.com/)创建了一个帐户，并且我正在尝试按照[此处](http://www.putler.com/support/faq/how-to-get-paypal-api-username-password-and-signature-information/)描述的步骤进行操作，但是当我按下“个人资料”时，它会将我发送到“概览” “ 页。那么问题来了，我怎样才能得到账户的userId、账户签名、paypal applicationId 和其他信息呢？附言。我正在使用java。UPD。这是我的代码：

```
public boolean verifyAddress(String email) throws PayPalException {
        boolean isValid;
        CallerServices caller = new CallerServices();
        APIProfile profile = ProfileFactory.createSignatureAPIProfile();

        profile.setAPIUsername("myUsername");
        profile.setAPIPassword("myPass");
        profile.setSignature("sign");
        profile.setEnvironment("sandbox");

        caller.setAPIProfile(profile);
        AddressVerifyRequestType req = new AddressVerifyRequestType();

        req.setEmail(email);
        req.setStreet("test");
        req.setZip("12345");

        AddressVerifyResponseType resp = (AddressVerifyResponseType) caller
                .call("AddressVerify", req);//throws exception here
        System.out.println(resp.getBuild());
        isValid = resp.getErrors() == null;
        return isValid;
    } 
```

还有一个问题：我应该设置由payPal（仅数字）提供的电子邮件还是用于注册的通行证？

UPD 这是我在沙盒中获得的图像： ![在此处输入图像描述](../Images/ceb94cf49a62132804927c040fd10dc0.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:55:54.407

登录[https://developer.paypal.com/](https://developer.paypal.com/)。您要查找的信息位于“API 和支付卡凭据”选项卡的“API 凭据”部分中。如果您尚未创建卖家测试账户，则必须先创建一个。

将来您可能会发现有用[的 PayPal 集成向导](https://www.paypal-labs.com/integrationwizard/ecpaypal/code.php)，它会为您生成您需要的所有代码。

编辑：

您不必使用您的电子邮件或密码，只需使用 PayPal 提供的信息。例如，在下图中，用户名是`gemccu_1229982509_biz_api1.cs.com`，密码是`QR9WVHAD2PYGC2P9`。您的凭据应与此类似。

![在此处输入图像描述](../Images/74b42bbdb745ee79ce021d1fd8d2f9e2.png)

编辑：

如前所述，您可以在[https://developer.paypal.com/](https://developer.paypal.com/)的“API 和支付卡凭证”选项卡中找到所有信息。在这里，您可以看到我在我的屏幕上看到的截图：

![在此处输入图像描述](../Images/6c777255b3b997c899f3f4acbe6476ad.png)

# yii - Yii：从另一个视图启动控制器

> ID：11829359
> 
> 赞同：0
> 
> 时间：2012-08-06T13:34:11.727
> 
> 标签：yii

在我的应用程序中，我有两个不同的控制器，用于同一应用程序的两个不同屏幕。在其中一个中，我想设置一个按钮，将您带到另一个。（是一个移动应用程序，我想要两个屏幕之间的交互）。

我在尝试：

```
href='window.open(".CController::createUrl('/mobilechart').") 
```

我在初始控制器中生成此代码，这就是我使用 php concat 的原因，但它不起作用。它执行相同的控制器，所以我得到一个错误，因为我没有传递变量。

看起来它可以使用：

```
href='".CController::createUrl('../index.php/mobilechart')."' 
```

但它从不充电，它一直像加载信息一样。当我直接进入新的控制器视图时，它可以完美运行！

我怎样才能做到这一点？？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:38:38.287

你还需要提供另一个控制器的名称——否则 Yii 怎么能猜出你想重定向到哪个控制器呢？

```
href='window.open(".CController::createUrl('mobilechart/index').") 
```

# python - 选择性地索引子域

> ID：11829360
> 
> 赞同：0
> 
> 时间：2012-08-06T13:34:16.283
> 
> 标签：python, seo, indexing, robots.txt, googlebot

我正在开发 Web 应用程序，它允许用户依次创建自己的 webapp。对于我的应用程序创建的每个新 webapp，我分配一个**新的 Subdomain**。例如 subdomain1.xyzdomain.com、subdomain2.xyzdomain.com 等。

所有这些 Web 应用程序都*存储在数据库*中，并由 **保存**在`/var/www/`. 到目前为止，我已经`/var/www/`使用**robots.txt**阻止了目录 ( ) 的搜索引擎索引。这基本上阻止了我所有脚本的索引，包括**default_script.py**以及使用该**default_script.py**脚本为多个 webapps 提供的内容。

但现在我希望这些子域中的一些应该被索引。

**在搜索了一段时间后，我能够通过在robots.txt**中明确指定脚本来找出阻止对脚本进行索引的方法

 **但我仍然怀疑以下几点：

1.  将阻止 my **default_script.py**索引也阻止对 default_script.py 提供的所有内容的**索引**。如果是，那么如果我让它索引，**default_script.py**也会开始出现在搜索结果中。

2.  如何允许选择性地对某些子域进行索引。

    例如：索引*subdomain1.xyzdomain.com*但不是*subdomain2.xyzdomain.com*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:38:41.663

不，搜索引擎不应该关心生成页面的脚本。只要将 webapps 生成的页面编入索引，就可以了。

第二个问题：

您应该为每个子域创建一个单独的 robots.txt。也就是说，当从特定子域获取 robots.txt 时，返回仅与该子域相关的 robots.txt 文件。因此，如果您希望子域被索引，该机器人文件是否允许所有。如果您不想将其编入索引，请让 robots 文件全部拒绝。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T13:48:03.623

所以总结一下讨论，

这是保存在目录中的`.htaccess`文件的外观：`/var/www/`

```
Options +FollowSymlinks
RewriteEngine On
RewriteBase /

# Rule Below allows using different robots.txt for subdomain1.
RewriteCond     %{HTTP_HOST}           ^subdomain1.xyzdomain.com$ [NC]
RewriteRule     ^(.*)robots.txt        subdomain1-robots.txt [L]

# This rule is applicable on rest of subdomains and xyzdomain.com.
RewriteRule     ^robots.txt$           robots.txt [L]

# This rule allow serving content from default_script.py for files other then robots.txt
RewriteRule     .                      default_script.py 
```**

# spring-mvc - 使用 Spring MVC 3 的一个 JSP 中的多个表单

> ID：11829361
> 
> 赞同：0
> 
> 时间：2012-08-06T13:34:16.080
> 
> 标签：spring-mvc

使用 Spring MVC 3+ 是否可以在单个页面上有多个表单？

我现在有这个，但是当我通过它的 requestMapping 调用控制器中的一个方法时，我收到一个错误，指出到第二种形式的映射不存在。

这是错误：

```
java.lang.IllegalStateException: Neither BindingResult nor plain target object for bean     name 'stockLoadingForm' available as request attribute 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T06:35:38.523

您是否将模型属性放在弹簧形式上？

```
<form:form id="stock" method="post" action="" modelAttribute="stockLoadingForm"> 
```

如果您使用的是较旧的 tomcat 版本，那么即使您已包含模型属性，您也可能会遇到此问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T06:56:43.313

对于每个表单，我们必须采取不同的动作名称，然后我们可以编写多个表单？你可以试试

# postgresql - 如何从 RowDescription 消息中查看 PostgreSQL 列类型？

> ID：11829368
> 
> 赞同：1
> 
> 时间：2012-08-06T13:34:46.157
> 
> 标签：postgresql, types, column-types

我正在为 PostgreSQL 实现一个驱动程序并获取一条[`RowDescription`](http://www.postgresql.org/docs/9.1/interactive/protocol-message-formats.html)消息和一些`DataRow`消息以响应数据库查询。但是如何获取返回的列的类型？例如，第一列应该是 an `int`，第二列应该是 an `varchar(20)`。

以下是一些打印输出`RowDescription`：

```
[RowDescription] 2 rows
[Row] id
tableObjId: 16393
attrNr: 1
objId: 23
dataTypeSz: 4
typeModifier: -1
formatCode: 0
[Row] name
tableObjId: 16393
attrNr: 2
objId: 1043
dataTypeSz: -1
typeModifier: 24
formatCode: 0 
```

对于`DataRow`：

```
[DataRow] 2 columns
data: 2
data: Jonas
[DataRow] 2 columns
data: 76
data: Anders 
```

有什么建议么？这是我必须在任何系统表中查找的东西吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T15:16:30.120

`objId`是对`pg_type.oid`列类型的引用。23 是`int4`1043 是`varchar`( `select * from pg_type where oid in (23,1043)`)

第二列的类型修饰符应该指示 varchar 上的限定符，尽管我不太确定为什么它是 24 而不是 20。可能是因为这是返回的 varlena 结构的长度，它前面有一个 32 位长度。无论如何，这就是 typmod 的工作方式：如果你这样做`select pg_catalog.format_type(1043, 24)`，你会看到输出是`character varying(20)`. [PQfmod](http://www.postgresql.org/docs/current/interactive/libpq-exec.html#LIBPQ-EXEC-MAIN)的文档说 typmod 解释是特定于类型的。

# python - 在 Cent OS 5.8 上安装 Python 2.6.6 时出现 bz2 问题

> ID：11829369
> 
> 赞同：3
> 
> 时间：2012-08-06T13:35:07.637
> 
> 标签：python, installation, bzip2

我使用以下命令安装了 bzip2、bzip2-devel 和 bzip2-libs：

```
yum install bzip2 bzip2-devel bzip2-libs 
```

安装继续出现警告或错误。

在这一步之后，我使用以下命令安装了 Python 2.6.6（注意：我必须以这种方式安装，而不是使用 yum）：

```
wget http://www.python.org/ftp/python/2.6.6/Python-2.6.6.tgz
tar -xzvf Python-2.6.6.tgz
cd Python-2.6.6
./configure
make
make install 
```

但在“制作”步骤中，我收到以下错误：

> 未能构建这些模块：bz2

之后我尝试安装 Mercurial 2.0.2，但出现以下错误：

> 无法导入标准 bz2（不完整的 Python 安装）。

任何人都知道我在这里做错了什么？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-09T13:25:23.110

我设法通过**`--enable-shared`**在配置 Python 时添加选项来解决我的问题。

```
./configure --enable-shared 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-20T17:54:36.693

确保您没有混合安装 Python。就我而言，我有两个安装

`/usr/local/bin/python`并且`/usr/bin/python`默认情况下它使用第一个。

所以我做到了： `rm /usr/bin/python`它奏效了。

或者

您还可以更改`which python`$PATH 中的优先级。

# java - 设置 tcp 服务器时出现 NoClassDefFound 错误

> ID：11829372
> 
> 赞同：0
> 
> 时间：2012-08-06T13:35:12.450
> 
> 标签：java, android, noclassdeffounderror, tcpserver

我正在创建一个与 C# 通信的 tcp 服务器，并且我从这个[网站](http://www.codeproject.com/Articles/340714/Android-How-to-communicate-with-NET-application-vi)访问了编码。我已经下载了源代码并添加了源代码中的外部 jar。每次我尝试在我的应用程序上运行服务器代码时，我都会`NoClassDefFound`在我的 LogCat 中获得。有人告诉我这可能与我的构建路径有关，这就是我提到外部 jar 的原因。我已经包含了我的 LogCat、Manifest 和 Java。谢谢您的帮助。

```
08-06 13:31:54.989: W/dalvikvm(5164): threadid=1: thread exiting with uncaught exception (group=0x401f3760)
08-06 13:31:54.989: E/AndroidRuntime(5164): FATAL EXCEPTION: main
08-06 13:31:54.989: E/AndroidRuntime(5164): java.lang.NoClassDefFoundError: com.example.com.proto1.AndroidNetCommunicationClientActivityInner$1
08-06 13:31:54.989: E/AndroidRuntime(5164):     at com.example.com.proto1.AndroidNetCommunicationClientActivityInner.<init>(AndroidNetCommunicationClientActivityInner.java:102)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at java.lang.Class.newInstanceImpl(Native Method)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at java.lang.Class.newInstance(Class.java:1301)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at android.app.Instrumentation.newActivity(Instrumentation.java:1022)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1733)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1834)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at android.app.ActivityThread.access$500(ActivityThread.java:122)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1027)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at android.os.Handler.dispatchMessage(Handler.java:99)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at android.os.Looper.loop(Looper.java:132)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at android.app.ActivityThread.main(ActivityThread.java:4126)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at java.lang.reflect.Method.invokeNative(Native Method)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at java.lang.reflect.Method.invoke(Method.java:491)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
08-06 13:31:54.989: E/AndroidRuntime(5164):     at dalvik.system.NativeStart.main(Native Method) 
```

：31：54.989：E / AndroidRuntime（5164）：在dalvik.system.NativeStart.main（本机方法）

爪哇

```
 package com.example.com.proto1;

import eneter.messaging.diagnostic.EneterTrace;
import eneter.messaging.endpoints.typedmessages.*;
import eneter.messaging.messagingsystems.messagingsystembase.*;
import eneter.messaging.messagingsystems.tcpmessagingsystem.TcpMessagingSystemFactory;
import eneter.net.system.EventHandler;
import android.app.Activity;
import android.os.Bundle;
import android.os.Handler;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.*;

public class AndroidNetCommunicationClientActivityInner extends Activity {

    // UI controls
    private Handler myRefresh = new Handler();
    private EditText myMessageTextEditText;
    private EditText myResponseEditText;
    private Button mySendRequestBtn;

    // Sender sending MyRequest and as a response receiving MyResponse.
    private IDuplexTypedMessageSender<MyResponse, MyRequest> mySender;

    /** Called when the activity is first created. */
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.tcp_server);

        // Get UI widgets.
        myMessageTextEditText = (EditText) findViewById(R.id.messageTextEditText);
        myResponseEditText = (EditText) findViewById(R.id.messageLengthEditText);
        mySendRequestBtn = (Button) findViewById(R.id.sendRequestBtn);

        // Subscribe to handle the button click.
        mySendRequestBtn.setOnClickListener(myOnSendRequestClickHandler);

        try {
            openConnection();
        } catch (Exception err) {
            EneterTrace.error("Open connection failed.", err);
        }
    }

    @Override
    public void onDestroy() {
        // Stop listening to response messages.
        mySender.detachDuplexOutputChannel();
    }

    private void openConnection() throws Exception {
        // Create sender sending MyRequest and as a response receiving
        // MyResponse
        IDuplexTypedMessagesFactory aSenderFactory = new DuplexTypedMessagesFactory();
        mySender = aSenderFactory.createDuplexTypedMessageSender(
                MyResponse.class, MyRequest.class);

        // Subscribe to receive response messages.
        mySender.responseReceived().subscribe(myOnResponseHandler);

        // Create TCP messaging for the communication.
        // Note: 10.0.2.2 is a special alias to the loopback (127.0.0.1)
        // on the development machine
        IMessagingSystemFactory aMessaging = new TcpMessagingSystemFactory();
        IDuplexOutputChannel anOutputChannel = aMessaging
                .createDuplexOutputChannel("tcp://70.63.35.218/");

        // Attach the output channel to the sender and be able to send
        // messages and receive responses.
        mySender.attachDuplexOutputChannel(anOutputChannel);
    }

    private void onSendRequest(View v) {
        // Create the request message.
        MyRequest aRequestMsg = new MyRequest();
        aRequestMsg.Text = myMessageTextEditText.getText().toString();

        // Send the request message.
        try {
            mySender.sendRequestMessage(aRequestMsg);
        } catch (Exception err) {
            EneterTrace.error("Sending the message failed.", err);
        }
    }

    private void onResponseReceived(Object sender,
            final TypedResponseReceivedEventArgs<MyResponse> e) {
        // Display the result - returned number of characters.
        // Note: Marshal displaying to the correct UI thread.
        myRefresh.post(new Runnable() {
            public void run() {
                myResponseEditText.setText(Integer.toString(e
                        .getResponseMessage().Length));
            }
        });
    }

    private EventHandler<TypedResponseReceivedEventArgs<MyResponse>> myOnResponseHandler

    = new EventHandler<TypedResponseReceivedEventArgs<MyResponse>>() {
        public void onEvent(Object sender,
                TypedResponseReceivedEventArgs<MyResponse> e) {
            onResponseReceived(sender, e);
        }
    };

    private OnClickListener myOnSendRequestClickHandler = new OnClickListener() {
        public void onClick(View v) {
            onSendRequest(v);
        }
    };
} 
```

我的请求 Java

```
 package com.example.com.proto1;

public class MyRequest {
    // Request message type
    // The message must have the same name as declared in the service.
    // Also, if the message is the inner class, then it must be static.
    public String Text;
} 
```

我的响应 Java

```
 package com.example.com.proto1;

public class MyResponse {
    // Request message type
    // The message must have the same name as declared in the service.
    // Also, if the message is the inner class, then it must be static.
    public int Length;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:47:14.230

我不知道确切的答案，但我可以给你一个指针：

缺少的类是`com.example.com.proto1.AndroidNetCommunicationClientActivity$1`，因为它以 '$1' 结尾，这意味着它是 的内部类`AndroidNetCommunicationClientActivity`。

该内部类应该有一个名为 的单独文件`AndroidNetCommunicationClientActivity$1.class`，因此似乎由于某种原因没有生成该文件。

您可以尝试将内部类提取到实际类中，看看是否有帮助，或者尝试找出未生成内部类文件的原因。

希望有帮助。

**更新**

评论太长了，所以我会尝试解释我的意思：

`AndroidNetCommunicationClientActivityInner`你必须在内部类声明：MyRequest，MyResponse 。

您需要创建 2 个新的 java 文件：MyRequest.java 和 MyResponse.java 并将代码复制到它们，所以它看起来像：

**MyRequest.java**

```
 public class MyRequest {
        public String Text;
    } 
```

**我的响应.java**

```
public class MyResponse {
        public int Length;
    } 
```

然后，从新创建的类中**删除**那些内部类，`AndroidNetCommunicationClientActivityInner`然后导入新创建的类，编译并重新部署代码。

# css - css菜单在空格后中断

> ID：11829376
> 
> 赞同：0
> 
> 时间：2012-08-06T13:35:42.493
> 
> 标签：css, css-float

我有个问题。请检查以下链接 [我的网站](http://dnanetworks.com.preview.gearhost.com/)

在我的第二个菜单“关于 DNA”中没有正确显示，DNA 一词必须与 ABOUT 一致。

这是我的CSS

```
#menu-home li{float: left;padding:13px 2%;}
    #menu-home>li>a{ text-decoration:none; color:#ffffff; font-family:arial; font-size:16px; font-weight:500;  padding:13px 2%; } 
```

我正在使用 wordpress 和 wp_nav_menu 生成 html 我做错了什么？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:52:31.460

添加

```
white-space: nowrap; 
```

根据你的`#menu-home>li>a`定义。

# java - p:dataTable - 删除行后刷新数据表

> ID：11829378
> 
> 赞同：3
> 
> 时间：2012-08-06T13:35:46.940
> 
> 标签：java, jsf, jakarta-ee, jsf-2, primefaces

以下是我的数据表图片，我希望当我删除一行时，数据表会刷新。但是从数据库中删除了行，但之后没有从数据表中删除。 ![在此处输入图像描述](../Images/7f712425d89656e158094bea87e0bad7.png) 我尝试以下代码，但他们无法帮助我。

```
<h2>مشاهده اطلاعات پرسنل</h2>   
 <h:form id="f2" prependId="false">  

    <p:dataTable id="pdataTable" var="personel" value="#{personelMB.personelList}" rowKey="#{personelMB.personel_id}"
    >  

        <f:facet name="header">  
            اطلاعات پرسنل 
        </f:facet>  

        <p:column>  
            <f:facet name="header">  
               شماره پرسنلی  
            </f:facet>  

            <h:outputText value="#{personel.personel_id}" />  

            <f:facet name="footer">  
                کدملی 
            </f:facet>  
        </p:column>  

        <p:column headerText="نام">  
            <h:outputText value="#{personel.pname}" />  
        </p:column>  

        <p:column headerText="نام خانوادگی">  
            <h:outputText value="#{personel.pfamily}" />  
        </p:column>  

        <p:column headerText="آدرس">  
            <h:outputText value="#{personel.paddress}" />  
        </p:column>  
   <p:column headerText="تلفن">  
            <h:outputText value="#{personel.pphone}" />  
        </p:column>
        <p:column>
      <f:facet name="حذف">
         <h:outputText value="" />
      </f:facet>
      <p:commandButton icon="ui-icon-close" title="حذف"
                       actionListener="#{personelMB.deletePersonel(personel.personel_id)}" update="pdataTable"/>
   </p:column>
        <f:facet name="footer">  
            تعداد رکورد#{fn:length(personelMB.getPersonelList())} میباشد.  
        </f:facet>  

    </p:dataTable>  

</h:form> 
```

2.第二次尝试：

```
<p:commandButton icon="ui-icon-close" title="حذف"
 actionListener="#{personelMB.deletePersonel(personel.personel_id)}" reRender="pdataTable"/>
                   </p:column> 
```

3.第三次尝试：personelBean.java

```
public void deletePersonel(int personel_id){
        Personel personel=(Personel)personelservice.getPersonelId(personel_id);
        getPersonelservice().deletePersonel(personel);
    }
    public String deleteAction(Personel personel) {
        personelList.remove(personel);
        return null;
      } 
```

.xhtml 文件

```
<p:commandButton icon="ui-icon-close" title="حذف"
                       actionListener="#{personelMB.deletePersonel(personel.personel_id)}" action="#{personelMB.deleteAction(personel)}"/>
   </p:column> 
```

请帮我。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-07T07:10:09.733

而不是 ajax 是假的，而是真的。

```
actionListener="#{personelMB.deletePersonel(personel.personel_id)}"  update="@form" ajax="true"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:44:22.930

在命令按钮上使用 update="@form" 参数

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T17:38:27.323

你有没有试过这样

```
 <p:commandButton update=":f2:pdataTable"></p:commandButton> 
```

# java - 如何迭代缓存条目

> ID：11829383
> 
> 赞同：9
> 
> 时间：2012-08-06T13:36:05.347
> 
> 标签：java, spring, caching, ehcache

我在独立环境中使用 Spring3.1。我正在使用 @Cachable 注释缓存我的条目。

有时我需要迭代缓存列表以获得**特定值**（不是键）。

所以我设法检索了缓存列表，但我怎么能迭代它的元素。

```
private ClientDTO getClientDTOByClientId(Integer clientId)
{

    Cache clientCache = null;
    try
    {
        clientCache = ehCacheCacheManager.getCache("client");

          //need here to iterate on clientCache. how?

    }
    catch (Exception e)
    {
        log.error("Couldnt retrieve client from cache. clientId=" + clientId);
    }
    return clientDTO;
} 
```

我使用ehcache机制。

```
<bean id="cacheManager" class="org.springframework.cache.ehcache.EhCacheCacheManager"
        p:cache-manager-ref="ehcache" />

    <bean id="ehcache"
        class="org.springframework.cache.ehcache.EhCacheManagerFactoryBean"
        p:config-location="classpath:ehcache.xml" /> 
```

谢谢，雷。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-08-06T14:10:02.913

CacheManager.getCache() 返回一个 net.sf.ehcache.Cache，它有一个 getKeys() 方法，该方法返回一个可以迭代的缓存键列表。要检索已存储的实际对象（与包装的 net.sf.ehcache.Element 不同），请使用 Element.getObjectValue()。

编辑：根据 Spring [，看起来他们永远不会支持 Cache.getKeys()](https://jira.springsource.org/browse/SPR-8878)，因此您必须强制转换为底层提供程序。

像这样的东西：

```
public boolean contains(String cacheName, Object o) {
  net.sf.ehcache.EhCache cache = (net.sf.ehcache.EhCache) org.springframework.cache.CacheManager.getCache(cacheName).getNativeCache();
  for (Object key: cache.getKeys()) {
    Element element = cache.get(key);
    if (element != null && element.getObjectValue().equals(o)) {
      return true;
    }
  }
  return false;
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2019-09-10T14:28:01.510

另一种解决方案是使用 getNativeCache() 方法将 org.springframework.cache.Cache 转换为 javax.cache.Cache 并使用 java 迭代器，因为 javax.cache.Cache 已经扩展了 Iterable<Cache.Entry<K, V>>。

有关更多详细信息，请阅读[javax.cache.Cache javadoc](https://static.javadoc.io/javax.cache/cache-api/1.0.0/javax/cache/Cache.html)

```
 Cache cache = (Cache) cacheManager.getCache("yourCacheName").getNativeCache();
    Iterator<Cache.Entry> iterator = cache.iterator();

    while (iterator.hasNext()) {
        String key = (String) iterator.next().getKey();
        System.out.println(key);
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-10-11T07:59:12.837

下面的方法将给出一组缓存对象的键，但是在这里如果你用键添加缓存，那么很容易检索（如果你直接将对象列表添加到缓存，那么它就行不通了）。

另外，我在缓存管理器中使用了 GuavaCache，如下所示。

```
@Bean
public CacheManager cacheManager() {
    SimpleCacheManager simpleCacheManager = new SimpleCacheManager();

    GuavaCache userLabCache = new GuavaCache("yourCacheName",
            CacheBuilder.newBuilder().expireAfterAccess(5, TimeUnit.MINUTES).build());
    simpleCacheManager.setCaches(Arrays.asList(userLabCache));
    return simpleCacheManager;
} 
```

然后它将键列表作为对象返回，然后您将获取键，您可以遍历键并从缓存中一一获取对象。

在您的班级中自动装配 Springboot CacheManager

```
@Autowired
CacheManager cacheManager; 
```

下面是获取所有密钥的代码。

```
public Set<Object> getAllCachedUserLabKeys() {
    Set<Object> keys = null;
    try {
        GuavaCache cache = (GuavaCache) cacheManager.getCache("yourCacheName");
        if (cache != null) {
            ConcurrentMap<Object, Object> cachedMap = cache.getNativeCache().asMap();
            keys = cachedMap.keySet();
        }
    } catch (Exception e) {
        LOGGER.error("Unknown exception occured while fetchting all cached User Labs..!", e);
    }
    return keys;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-21T14:04:34.200

我用这个

第一个端点会告诉你你拥有的缓存

第二个端点将为您提供特定缓存的所有条目（使用安全映射）

第三个端点将为您提供所有缓存的所有条目（使用安全映射）

```
import com.fasterxml.jackson.annotation.JsonAutoDetect;
import com.fasterxml.jackson.annotation.PropertyAccessor;
import com.fasterxml.jackson.core.JsonProcessingException;
import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.ObjectMapper;
import com.fasterxml.jackson.databind.SerializationFeature;
import com.github.benmanes.caffeine.cache.Cache;
import org.springframework.cache.CacheManager;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import java.util.Collection;
import java.util.HashMap;
import java.util.Map;
import java.util.concurrent.ConcurrentMap;

@RestController
@RequestMapping("cache")
public class CacheController {
    private final CacheManager cacheManager;
    private final ObjectMapper objectMapper;

    public CacheController(final CacheManager cacheManager) {
        this.cacheManager = cacheManager;
        this.objectMapper = new ObjectMapper();
        this.objectMapper.setVisibility(PropertyAccessor.FIELD, JsonAutoDetect.Visibility.ANY);
        this.objectMapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);
    }

    @GetMapping("/names")
    public Collection<String> getCacheNames() {
        return cacheManager.getCacheNames();
    }

    @GetMapping("{cacheName}")
    public Map<String, Object> getEntriesForCache(@PathVariable(name = "cacheName") final String cacheName) throws JsonProcessingException {
        final Cache<String, Object> cache = (Cache<String, Object>) cacheManager.getCache(cacheName).getNativeCache();

        final ConcurrentMap<String, Object> data = cache.asMap();
        final String json = objectMapper.writeValueAsString(data);

        final TypeReference<HashMap<String,Object>> typeRef = new TypeReference<>() {};
        return objectMapper.readValue(json, typeRef);
    }

    @GetMapping("entries")
    public Map<String, Map<String, Object>> getAllEntries() throws JsonProcessingException {
        final Map<String, Map<String, Object>> entries = new HashMap<>();
        for(final String cacheName: getCacheNames()){
            entries.put(cacheName, getEntriesForCache(cacheName));
        }
        return entries;
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-01T18:14:59.973

```
var cache = cacheManager.getCache("CACHE_NAME");
var nativeCache = (ConcurrentHashMap<?, ?>) cache.getNativeCache();

for (var entry: nativeCache.entrySet()){
    // Access entry key and value
    entry.getKey()
    entry.getValue()
} 
```

# android - BackgroundService 不启动

> ID：11829385
> 
> 赞同：0
> 
> 时间：2012-08-06T13:36:12.303
> 
> 标签：android, background-process

我正在尝试启动一个`BackgroundService`但我没有让它运行。这是服务代码：

```
import android.app.Service;
import android.content.Intent;
import android.os.Handler;
import android.os.IBinder;

public class BackgroundData extends Service {

    private final Handler handler = new Handler();
    Intent intent;
    int time;

    @Override
    public void onCreate() {
        // Called on service created

        time = 1000;
    }

    @Override
    public void onStart(Intent intent, int startid) {

        handler.removeCallbacks(sendUpdatesToUI);
        handler.postDelayed(sendUpdatesToUI, time); // 1 sec
    }

     private Runnable sendUpdatesToUI = new Runnable() {
            public void run() {

                System.out.println("OMEGAN...");

                handler.postDelayed(this, time); // 1 sec
            }
        };

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

以下是我调用服务启动的方式：

```
startService(new Intent(this, BackgroundData.class)); 
```

哪个是问题？这段代码来自这里：[http ://android-codes-examples.blogspot.com.es/2011/11/running-service-in-background-on.html](http://android-codes-examples.blogspot.com.es/2011/11/running-service-in-background-on.html)

我已将其更改为根据需要使用它并且它可以工作，但是当我将它实现到我的代码时，它就不起作用了。

任何想法？

先感谢您！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:12:36.353

好的，我发现了我的问题。我在声明`.BackgroundData`，但这个文件放在其他包中。

我解决了更改`.BackgroundData`为`my.own.package.BackgroundData`

# php - 通过电子邮件远程更新网站

> ID：11829387
> 
> 赞同：2
> 
> 时间：2012-08-06T13:36:24.333
> 
> 标签：php, mysql, html, email

我有一个 php 页面，后面有一个 MySQL 数据库，我的客户使用它。

有时我必须在页面顶部添加一个“系统消息”来告诉他们计划中的维护或即将发生的变化或其他什么。

目前，我通过 FTP 打开 PHP 页面并添加一些 HTML 文本来做到这一点。

我的问题是，你能想出一种方法，例如，我可以通过电子邮件发送一个地址，该地址将接收电子邮件的内容并将文本作为我的“系统消息”发布在 Php 页面上？

或者它不必是电子邮件，但我可以通过一些不干涉的方式添加文本而无需打开 FTP 或 mySQL 数据库 - 理想情况下，我可以通过 3g 从手机发送..

期待你的想法...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:42:15.660

我不建议您使用电子邮件，而是使用带有 CKEditor 或 TinyMCE 的管理界面`<textarea>`，[您](http://ckeditor.com/)可以[在](http://www.tinymce.com/)其中更改文本，单击保存，然后将外部 HTML 页面 ( `custom_content.html`) 更改为您输入的任何内容使用 post 和`file_put_contents("custom_content.html", $_POST["text"])`. 不过，您必须将主站点更改为`require_once`或`include_once`此 html 页面。

**如果您决定使用管理系统方法，请确保您的 URL 具有某种唯一性（随机字符），或者在首先使用它之前进行必须填写的登录，因为这两种方法如果暴露，可能用于 XSS 攻击您的网站**。

也就是说，如果您想要电子邮件系统（同样，我不建议您这样做），您可以有一个 cron 作业，使用 IMAP 或 POP（使用现有库）连接到您的电子邮件服务器并检查新邮件，如果这些消息来自某个电子邮件并包含某个主题，然后在后台执行与管理系统中相同的操作（替换 HTML 文件内容，并将其包含在主页上）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:40:34.447

如果它已经在运行 PHP，为什么不创建某种后端，您（和/或其他人）可以在其中登录和添加消息。这应该不会太难。

我不会去电子邮件。这将很难保持安全。如果您的地址泄露，人们可以在上面放任何东西。当然，您可以为它找到一些东西，但这不是正确的方法。

根据您未来的需求，可以创建一个简单的后端并将其扩展（或记住），以及您未来的计划。从用户和权限管理、消息类别等方面考虑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-27T04:58:33.367

这可能会有所帮助：[通过电子邮件更新网站](https://www.sitemailcms.com)

使用我们的服务，您可以发送电子邮件以快速轻松地即时更新您的网站。您在电子邮件中输入的任何内容都会以您输入的方式出现在您的网站上，包括特殊格式、图片和其他附件。

# android - 同一应用程序在单个设备上的开发和生产版本

> ID：11829389
> 
> 赞同：5
> 
> 时间：2012-08-06T13:36:29.493
> 
> 标签：android

请问如何解决需要在一台设备上安装两次相同的应用程序的问题？需要一个用于开发，一个用于生产测试和使用。这样做的简单方法是什么？我尝试手动更改包名称，但这会在合并时导致痛苦。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T13:42:07.590

如果您使用 ADT v 20，您可以轻松更改包名。只需右键单击项目并转到 android 工具下的重命名应用程序包。Eclipse 将为您处理所有更改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:43:39.980

据我所知，您无法安装 2 个具有相同软件包名称的应用程序（我可能是错的）...

所以重构/重命名你的包名是最好的解决方案，这在最新版本的 SDK 中很容易，所以确保你更新......你也可以尝试使用 ant 重构，但我没有尝试使用 ant 重命名包。

编辑：与艾哈迈德相同的答案+错字已修复

# ios - IOS PowerPoint幻灯片导航

> ID：11829391
> 
> 赞同：0
> 
> 时间：2012-08-06T13:36:36.753
> 
> 标签：ios

目前我有一个 UIDocumentaionInteractionController 来查看 PowerPoint (.ppt) 文件。我可以通过滚动查看幻灯片。

在加载视图后，我需要以编程方式导航到特定幻灯片而不是使用 NSTimer 滚动。

如果有人有解决方案，请帮助我。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-09T05:28:53.420

UIDocumentInteractionController 不提供任何委托来完成对文档的控制。

它将利用 QLPreview 框架来预览您在相应 URL 中指定的任何文档。

# html - 为什么跨度的 line-height 没用？

> ID：11829393
> 
> 赞同：73
> 
> 时间：2012-08-06T13:36:42.120
> 
> 标签：html, css

首先，让我们看一段代码：

```
div { width:200px; height:200px; border:1px solid black; line-height:200px; }
span { line-height:1.7;  }
```

```
<div><span>123<br>456<br>789<br>000</span></div>
```

为什么`span`'`line-height`未使用？

`line-height`仍然是`200px`，但是当我们将'`span`属性`display`设置为时`inline-block`，使用 的 ？`line-height``span`

见下文：

```
div { width:200px; height:200px; border:1px solid black; line-height:200px; }
span { display:inline-block; line-height:1.7; }
```

```
<div><span>123<br>456<br>789<br>000</span>
```

* * *

## 回答 #1

> 赞同：112
> 
> 时间：2012-08-07T08:04:26.660

块布局，就像`div`元素一样，默认情况下是由垂直堆叠的*线框*组成的，它们之间永远不会有空间，也不会重叠。每个 line-box 都以*strut*开头，它是一个虚构的 inline box，其高度是为块指定的 line-height。然后，根据行高，行框继续使用标记的行内框。

下图显示了您的第一个示例的布局。请注意，因为 font-height 的 1.7 倍远小于 strut 的高度，所以 line 高度由 strut 的高度决定，因为 line box 必须完全包含它的 inline box。如果您将 上的行高设置`span`为大于 200 像素，则行框会更高，并且您会看到文本之间的距离更远。

![跨度为内联的布局](../Images/26f01a7588b8257ae68b80543ccbe870.png)

当您制作inline-block 时，the和 the`span`之间的关系不会改变，但是 span 获得了它自己的块布局结构和自己的 line box 堆栈。因此，文本和换行符布局在这个内部堆栈中。内部块的支柱是 font-height 的 1.7 倍，即与文本相同，现在布局如下所示，因此文本行位置更靠近，反映了.`div``span``span`

（请注意，这两个图表的比例不同。）

![跨度作为内联块的布局](../Images/c663c794c5d78017af8b5f42c7e53363.png)

* * *

## 回答 #2

> 赞同：26
> 
> 时间：2012-08-06T14:01:23.607

这是设计使然。HTML 文档中有两种元素类型：块和内联。内联元素不会中断文档的流动，但块元素会。

顾名思义，块元素会屏蔽页面上包含某些内容的区域。块元素的一些示例是：`<p>`和`<div>`。您可以将高度、行高和其他 CSS 属性应用于这些元素，以更改块的大小，进而更改文档的流向。

内联元素占用渲染它们所需的最小空间，这意味着在这些元素上设置宽度和高度将不起作用。正如您已经看到的，您可以告诉浏览器将内联元素视为块元素，以允许您对其应用高度。

`<li>`使用元素创建菜单 时可以看到一个例子。`<li>`s 是块元素。如果创建列表，项目将垂直显示在页面上，确保每个列表项显示在前一个列表项下方。但是，如果您应用`display: inline;`到列表项，它们现在将水平显示。

# javascript - 如何在 Extjs 4 中使用嵌套的 JSON 填充表单

> ID：11829394
> 
> 赞同：4
> 
> 时间：2012-08-06T13:36:49.027
> 
> 标签：javascript, extjs4, extjs4.1

我有一个这样的 JSON

```
{
"success": true,
"users": [{ 
    "name":"Boom",
    "emails": [{
        "first": "syedwaseem@yahoo.com",
        "second": "ed@sencha.com",
        "countries":[{
            "label":"pakistan",
            "continent":"asia"
            }]
        }]
}] 
```

}

我已经为它创建了这样的模型

```
Ext.define('WR.model.WorkRecord', {
extend: 'Ext.data.Model',
fields: ['name'],      
hasMany: {model: 'WR.model.Email', name: 'emails'}

});

    Ext.define('WR.model.Email', {
        extend: 'Ext.data.Model',
        fields: ['first', 'second'],
        belongsTo: {model : 'WR.model.WorkRecord', name: 'users'},
        hasMany: {model: 'WR.model.Countries', name: 'countries'}
    });

    Ext.define('WR.model.Countries', {
        extend: 'Ext.data.Model',
        fields: ['label', 'continent'],
        belongsTo: {model: 'WR.model.Email', name: 'emails'}
    }); 
```

现在我想填充具有 id 的表单`formJobSummary`。我通过在存储中调用此函数成功地为非嵌套 JSON

```
listeners: {
    load: function(users) {         
        var form = Ext.getCmp('formJobSummary'); 
        form.loadRecord(this.data.first());
    }
} 
```

我的表单只有简单的显示字段，我想通过这个嵌套的 JSON 填充它们谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T19:29:38.260

目前您不能在表单字段定义中使用 name='property.subProperty' :(。

因此，为了完成这项工作，我恢复了逻辑 - 将（冗余）字段定义添加到模型中：

```
Ext.define('WR.model.WorkRecord', {
  extend: 'Ext.data.Model',
  fields: [
    'name',
    {name: 'emailFirst', mapping: 'emails.first'}
  ],      
  hasMany: {model: 'WR.model.Email', name: 'emails'}   
}); 
```

然后您可以创建一个表单字段，例如：

```
{
  xtype: 'displayfield',
  name: 'emailFirst',
  ...
} 
```

它将被填充到 form.loadRecord()

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-04T23:29:48.877

您需要对您的商店进行子类化并添加[所需](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Class-cfg-requires)的配置。

```
Ext.define('MyJsonStore', {
    extend: 'Ext.data.JsonStore',
    requires: [
        'WR.model.WorkRecord'
    ]
}); 
```

# java - Java 多线程（10 个或更多？）

> ID：11829396
> 
> 赞同：1
> 
> 时间：2012-08-06T13:36:54.507
> 
> 标签：java, multithreading

是否不希望创建超过 10 个额外的线程？例子：

```
for(int i=0; i<100; i++) {
    new Thread() {
        public void run() {
            // something
        }
    }.start();
} 
```

这将创建并启动 100 个线程。这不好，对吧？

更新 > 每个线程都在下载一些东西并将其放入包中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:40:03.087

创建比您需要的更多的线程是不可取的。

当然，如果您需要 100 个线程，那么这是一个很好的创建数字。

不知道你从哪里来`it is undesirable to create more than 10 additional threads`。Java 进程可以处理 10,000 个线程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T13:39:44.507

如果您使用 10 个线程的线程池并将它们传递给正确的 Runnable，它将更加容易和快捷。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:39:13.723

完全取决于上下文。如果您所做的大部分工作都受 CPU 限制，那么除非您实际上有 100 个内核，否则可能不会产生太大影响或实际上使事情变得更糟（上下文切换等）。如果大量时间花在 I/O 任务上，那么线程可能是有益的。你真的需要做一些基准测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T15:00:15.537

您可能想要的是一个**ThreadPool**，而不是创建这么多线程。

例如：

```
 ExecutorService executor = Executors.newFixedThreadPool(4);
 executor.submit(YourRunnable); 
```

多看看线程池——它们会让你的生活更轻松。

# javascript - 如何从 Greasemonkey 脚本创建 Firefox 插件？

> ID：11829398
> 
> 赞同：0
> 
> 时间：2012-08-06T13:36:56.263
> 
> 标签：javascript, firefox, firefox-addon, greasemonkey

我有一个用 JavaScript 编写的带有 CSS 组件的 Greasemonkey 脚本，我想将它们作为单个 Firefox 插件发布。我曾尝试将 Addon Builder 与 Addon SDK 一起使用，但没有任何成功。我也试过[用户脚本编译器](https://arantius.com/misc/greasemonkey/script-compiler.php)，但无济于事。我只是希望有人可以向我解释一种将 .js 文件和 .css 文件打包为 Firefox 插件的简单方法，或者如何使用 Addon Builder 来执行此操作，因为显然我尝试过的还没有工作。如果您需要我提供更多信息，请告诉我，感谢您的帮助！

编辑：这是我在插件生成器中的 main.js 文件。

```
 var data = require("self").data;
 var pageMod = require("page-mod");
 pageMod.PageMod({
   include: "[http://www.trello.com/board/*", "https://www.trello.com/board/*"],
   contentScriptWhen: 'end',
   contentScriptFile: data.url("scrumello_beta.js")
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:52:50.790

你的匹配模式是错误的。如果您查看[文档](https://addons.mozilla.org/en-US/developers/docs/sdk/1.8/packages/api-utils/match-pattern.html)，则必须指定协议，除非您使用基于主机的模式。以下将起作用：

```
include: "http://www.trello.com/board/*", 
```

如果您还想包含 HTTPS 连接，那么您应该指定两种模式：

```
include: ["http://www.trello.com/board/*", "https://www.trello.com/board/*"], 
```

除此之外，您的`main.js`似乎还不错。您收到的错误消息似乎是[错误 750138](https://bugzilla.mozilla.org/show_bug.cgi?id=750138)，这是与 Add-on Builder Helper 扩展的不良交互。据说重新安装帮助程序扩展会使问题消失。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-07T13:41:27.957

我只是想让每个人都知道，在弗拉基米尔的帮助下，我能够解决这个问题，并且我和我的团队也意识到了这一点。我不会发布我的 scrumello_beta.js 文件，因为它与问题无关，而且我无法发布公司代码。我们的问题是我们如何注入我们的 Javascript，这是我们自己解决的。感谢所有试图帮助我的人，我只是想结束一下，让大家知道我们现在正在取得进展。

# java - 类初始化时如何确定类加载器？

> ID：11829402
> 
> 赞同：1
> 
> 时间：2012-08-06T13:36:57.470
> 
> 标签：java, eclipse, debugging, classloader, eclipse-jdt

我正在使用 Eclipse 调试器并在类初始化程序中设置断点（例如静态字段初始化）。

有没有办法确定/检查用于加载类的类加载器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:53:38.973

它应该是...

```
ClassA.class.getClassLoader(); 
```

# css - CSS3从透明到白色的渐变渲染问题

> ID：11829410
> 
> 赞同：53
> 
> 时间：2012-08-06T13:37:42.003
> 
> 标签：css, gradient

我在跨浏览器渲染 CSS3 渐变时遇到问题。当我尝试创建从透明颜色到白色的渐变时，就会发生这种情况。

我用来测试的文件是： http: [//f.cl.ly/items/0E2C062x3O161b09261i/test.html](http://f.cl.ly/items/0E2C062x3O161b09261i/test.html)

使用的 CSS 是：

```
background-image: linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 50%, rgba(255,255,255,1) 100%);
background-image: -o-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 50%, rgba(255,255,255,1) 100%);
background-image: -moz-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 50%, rgba(255,255,255,1) 100%);
background-image: -webkit-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 50%, rgba(255,255,255,1) 100%);
background-image: -ms-linear-gradient(top, rgba(255,255,255,0) 0%, rgba(255,255,255,1) 50%, rgba(255,255,255,1) 100%); 
```

渲染看起来像我在 Safari 6 (mac) 中想要的： ![Safari 6 Mac OS 10.8](../Images/c5a9fb20a2b431543ac57c6ec8441404.png)

Chrome 渲染在变为白色之前会变为灰色（Firefox 在 mac os 上也以这种方式呈现）： ![铬 21 Mac OS 10.8](../Images/9fd3bf3846db463dff905fa1b7e070a0.png)

关于为什么会出现这种奇怪的渲染的任何想法或建议？

* * *

## 回答 #1

> 赞同：90
> 
> 时间：2012-08-06T13:46:26.480

我也遇到过这种情况。我不确定它为什么会发生，但这是我在自己的项目中使用的解决方法：

```
background-image: -webkit-linear-gradient(top, rgba(255,255,255,0.001) 0%, #fff 5%, #fff 100%); 
```

与其给 Chrome 一个“透明”的值，不如给它一些非常非常接近透明的东西。希望这可以帮助！

编辑：我忘记发布指向我自己[版本](https://dl.dropbox.com/u/73603348/gradient.html)的链接，该版本在 Chrome 21 (Windows 7) 中按预期呈现。

* * *

## 回答 #2

> 赞同：29
> 
> 时间：2012-08-06T14:01:27.460

我在这里粘贴的 CSS 是错误的，我编辑了错误的文件 DOH！

## 原始 CSS 不起作用

```
background-image: linear-gradient(top, transparent 0%, #fff 5%, #fff 100%);
background-image: -o-linear-gradient(top, transparent 0%, #fff 5%, #fff 100%);
background-image: -moz-linear-gradient(top, transparent 0%, #fff 5%, #fff 100%);
background-image: -webkit-linear-gradient(top, transparent 0%, #fff 5%, #fff 100%);
background-image: -ms-linear-gradient(top, transparent 0%, #fff 5%, #fff 100%); 
```

## 解决问题的 CSS

```
background-image: linear-gradient(top, rgba(255,255,255,0) 0%, #fff 5%, #fff 100%);
background-image: -o-linear-gradient(top, rgba(255,255,255,0) 0%, #fff 5%, #fff 100%);
background-image: -moz-linear-gradient(top, rgba(255,255,255,0) 0%, #fff 5%, #fff 100%);
background-image: -webkit-linear-gradient(top, rgba(255,255,255,0) 0%, #fff 5%, #fff 100%);
background-image: -ms-linear-gradient(top, rgba(255,255,255,0) 0%, #fff 5%, #fff 100%); 
```

透明的问题不是颜色，它是带有 0 alpha 的黑色，设置为具有 0 alpha 的特定白色可以解决问题。（感谢@carisenda）

这仍然指出浏览器供应商如何处理 CSS3 渐变中的 alpha 透明度的不一致。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2019-11-18T20:00:58.707

除了白色（实际上是白色）之外的颜色的技巧**`rgba`是褪色的实际颜色**。

```
background-image: linear-gradient(to right, 
  rgba(111,174,249, 0) 0%,
  rgba(111,174,249, 0) 80%,
  rgb (111,174,249)    100%); 
```

*如果使用的颜色是十六进制（如`#6faef9`），请使用[十六进制到 rgba 转换器](https://www.rgbtohex.net/hextorgb/)来转换颜色。*

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-08-02T20:44:29.273

在原生 IOS 上也遇到同样的问题：

1.  [iOS白色到透明渐变层是灰色](https://stackoverflow.com/questions/24882361/ios-white-to-transparent-gradient)
2.  [https://betterprogramming.pub/the-proper-way-of-creating-a-transparent-gradient-layer-in-ios-b082daa866b1layer-is-gray](https://betterprogramming.pub/the-proper-way-of-creating-a-transparent-gradient-layer-in-ios-b082daa866b1layer-is-gray)

我注意到在 CSS 上，解决方案是使用白色而不是黑色，然后添加 0 透明度

```
rgb(255 255 255/0) 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-02-22T07:47:26.150

我最近遇到了关于 Safari 透明度的相同问题。对我有用的是将 css 替换为已编译的 safari css。

这对我不起作用

```
 background-image: linear-gradient(to top, rgba(56,56,56,1) 5%, rgba(255,255,255,0.001) 100%) 
```

这对我有用

```
background-image: linear-gradient(0deg,#383838 5%, hsla(0, 0%, 20%, 0) 100%) 
```

# javascript - IE9中的HTML拖放

> ID：11829412
> 
> 赞同：3
> 
> 时间：2012-08-06T13:38:01.217
> 
> 标签：javascript, html, internet-explorer, drag-and-drop

我尝试在 HTML 中拖放。它在除 IE9 之外的所有浏览器中运行良好（无需在低于 IE9 的情况下运行）。在 IE9 中不会触发 ondrop 事件。

有什么帮助吗？这是我的代码。

[jsFiddle](http://jsfiddle.net/sathyamoorthi/ASKte/)

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-21T15:02:46.660

如果你`div`用`a`标签替换它会起作用。但是，您还应该进行一些其他更改，首先通过在事件中返回来确保`a`标签不是可点击的链接：`false``onclick`

```
<a class="div123" href="#" draggable="true"
 ondragstart="handleDragStart(event)"
 ondrop="handleDrop(event)"
 ondragover="dragoveHandler(event)"
 onclick="return false;">
    HTML5 drag and drop
</a> 
```

其次，IE9 不接受`text/plain`in 的参数`setData`，而是使用`Text`或在 a 中添加数据`try...catch`。此外，您应该确保您添加的数据实际上是文本：

```
e.dataTransfer.setData("Text", "" + $(e.target).index()); 
```

最后，您的`handleDrop`函数需要`preventDefault`/`return false`因为否则删除链接（`a`元素）的默认操作是导航到删除的 URL：

```
function handleDrop(e) {
    alert($(e.target).index());
    if (e.preventDefault) {
        e.preventDefault(); // Necessary. Stops redirect.
    }
    return false;
} 
```

[这是您的代码的 jsFiddle，它将在 IE9 中运行](http://jsfiddle.net/robertc/ASKte/4/)。

# java - GWT - 在 Eclipse 中调试而不显示库代码

> ID：11829414
> 
> 赞同：2
> 
> 时间：2012-08-06T13:38:10.590
> 
> 标签：java, eclipse, debugging, gwt

我正在尝试使用 Eclipse 调试器，在我的代码中设置断点，以查看正在调用哪些行。问题是调试器还显示了在 GWT jar 中调用的代码行（可能是因为可以看到代码）。有没有办法更改设置，以便在调用我的项目之外的代码行时不显示它们？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:51:49.273

使用 f5、f6 或 f7 键之一。我不记得你想要哪个。它的提示是 step out 或工具栏上的东西。

# jsf - 如何禁用“警告：javax.ejb.EJBException”

> ID：11829415
> 
> 赞同：2
> 
> 时间：2012-08-06T13:38:15.903
> 
> 标签：jsf, jakarta-ee, jsf-2, glassfish-3, ejb-3.1

我正在尝试使用以下组件开始使用简单的 java ee 应用程序：JSF 2.0、JPA EclipseLink、Glasshfish 3。

这是一些片段，支持bean：

```
@Inject
private ProductsFacade model;    
public void saveRow(Products p) {
        model.edit(p);
} 
```

产品外观：

```
@Stateless
public class ProductsFacade extends AbstractFacade<Products> {
    @PersistenceContext
    private EntityManager em;
    public void edit(Products entity) {
        em.merge(entity);
    }
    .... 
```

Products 是一个带有 bean 验证注解的实体 bean。

现在，当用户错误填写表单时，'model.edit' 会抛出 EjbException，我用 catch 处理它，所以`saveRow`支持 bean 方法现在看起来不那么简洁了：

```
public void saveRow(Products p) {
    try {
        model.edit(p);
    } catch (EJBException e) {
        if(e.getCause().getClass().getName().equals("javax.validation.ConstraintViolationException")) {
            handleConstraintViolation((ConstraintViolationException)e.getCause());
        }
    }
} 
```

并且仍然 glassfish 日志充满了“警告：javax.ejb.EJBException”和长痕迹。我有一些疑问：

1.  我的设置有多正确？我知道 jsf 应该处理 BeanValidation，但在我的情况下它没有。
2.  如何禁用`EJBException`警告，使服务器日志不会被污染
3.  有没有更好的方法来处理 EjbException ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T18:23:41.073

`EJBException`s 触发当前 JTA 事务的回滚，无论你是否捕获它们。对启动事务的调用`ProductsFacade#edit()`（除非将一个事务传播给它，这里似乎不是这种情况），因为它是“从外部”对 SessionBean 的调用。如果您不希望您的事务在这些情况下回滚，则必须在将损坏`Entity`的`EntityManager`.

There are several quirks and stuff to do here to avoid this situation. For example you can have the `ProductsFacade` handle transactions: `@TransactionManagement(TransactionManagementType.BEAN)`, that would take away a big part of the point of using EJBs though. I do think this default behaviour is as it should be. If you don't want the Rollback in your log you can configure your logging level/etc - but I do think that EJB layered transactional rollbacks belongs in the log, it does definitely during development.

# objective-c - 自定义步骤 UISlider

> ID：11829417
> 
> 赞同：4
> 
> 时间：2012-08-06T13:38:37.010
> 
> 标签：objective-c, ios, uislider

我刚刚下载了 Park Guides 应用程序（由 National Geographic 提供），我想知道实现他们的 UISlider 的最佳方式是什么。它一步一步地工作，它真的很好定制。

想法？:)

![在此处输入图像描述](../Images/90eca7f872fe7d7da2593313d2421de7.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:50:42.650

我不会为此使用 a `UISlider`。我可能会从使用`UISegmentedControl`. 它有[很多方法来定制](http://developer.apple.com/library/ios/DOCUMENTATION/UIKit/Reference/UISegmentedControl_Class/Reference/UISegmentedControl.html#//apple_ref/doc/uid/TP40006807-CH3-SW28)它的外观，你可以用它们来让它看起来很花哨。

如果做不到这一点，我会建立自己的控制。 `UISlider` *可能*有效，但它并不是真的打算用于像这样的离散间隔。

# javascript - 从结尾或开头修剪字符串

> ID：11829419
> 
> 赞同：0
> 
> 时间：2012-08-06T13:38:37.710
> 
> 标签：javascript

我在 JavaScript 中有一个字符串。说`var val = %Hello;`或者有时`var val = Hello%;`我需要从字符串中修剪 '%' 以获得`Hello`. 如何在javascript中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:40:56.127

只需将`%`字符替换为空白字符串即可。

```
var val = "%Hello";
val = val.replace('%', '');
alert(val); //alerts "Hello" 
```

* * *

```
var val = "Hello%";
val = val.replace('%', '');
alert(val); //alerts "Hello" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:42:38.313

如果我得到你的好，

```
var val = "%Hello"
var reg= new RegExp ("%");
val = val.replace (reg, ""); 
```

应该管用。（如果您出现更复杂的示例，我称正则表达式向您展示一个好方法）。但

```
var val = "%Hello";
val = val.replace ("%", ""); 
```

会更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:43:21.100

```
val = 'Whatever%'; //or %Whatever
val.replace('%', '');
var finalstring = val.replace(/^\s+|\s+$/g,''); //trimming 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-08-06T13:40:45.690

```
var val = "%Hello%";
val = val.replace('%', ''); 
```

# python - 计算嵌套列表中的元素出现次数

> ID：11829422
> 
> 赞同：4
> 
> 时间：2012-08-06T13:38:43.323
> 
> 标签：python, list, counter

这可能是一个非常简单的问题，但我在其他地方找不到答案，所以我会问。查找元素在嵌套列表中出现的次数的最佳方法是什么？例如：

```
my_list=[[a,b,c,d],[a,b,z,d],[a,c,f,e],[d,w,f,a]] 
```

我如何找到“a”是列表的第一个元素的次数？或者更一般地说，“a”在 my_list 中出现了多少次？我想有一种方法可以用 collections.Counter 做到这一点，但我一直无法弄清楚。

**编辑**`a:3`对于 my_list，如果它是列表的第一个元素 ，我想要一个输出。如果更改问题以查看是否`b`是第二个元素，则所需的输出将是`b:2`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-08-06T13:40:36.087

使用嵌套生成器表达式：

```
Counter(x for sublist in my_list for x in sublist) 
```

要计算第一个位置的项目，不同的生成器表达式会获取该项目进行计数：

```
Counter(sublist[0] for sublist in my_list) 
```

演示：

```
>>> from collections import Counter
>>> my_list=[['a','b','c','d'],['a','b','z','d'],['a','c','f','e'],['d','w','f','a']]
>>> Counter(x for sublist in my_list for x in sublist)
Counter({'a': 4, 'd': 3, 'c': 2, 'b': 2, 'f': 2, 'e': 1, 'w': 1, 'z': 1})
>>> Counter(sublist[0] for sublist in my_list)
Counter({'a': 3, 'd': 1}) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T13:42:38.160

```
from collections import Counter
from itertools import chain

counts = Counter(chain.from_iterable(my_list)) 
```

或生成一个新列表并使用计数：

```
new_list = list(chain.from_iterable(my_list))
print new_list.count(whatever) 
```

如果你想要多少次 'a' 是第一个，那么就像：

```
sum(1 for el in my_list if el[0] is a) # or == a if object identity is not required 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:53:49.210

```
>>> from collections import defaultdict, Counter
>>> my_list = [['a', 'b', 'c', 'd'], ['a', 'b', 'z', 'd'], ['a', 'c', 'f', 'e'], ['d', 'w', 'f', 'a']]
>>> pos_count = defaultdict(Counter)
>>> for sublist in my_list:
        for i, c in enumerate(sublist):
            pos_count[c][i] += 1

>>> pos_count['a'][0]
3
>>> pos_count['b'][1]
2 
```

# c++ - SafeArray 的 COM SafeArray

> ID：11829424
> 
> 赞同：3
> 
> 时间：2012-08-06T13:38:45.667
> 
> 标签：c++, atl, idl

我的 IDL 中有以下内容，MIDL 似乎很喜欢。我正在尝试创建一个返回字节数组（不是矩阵）数组的方法。我在 C++ 方面遇到问题，编译器不喜欢`ATL::CComSafeArray<LPSAFEARRAY>`or `ATL::CComSafeArray<ATL::CComSafeArray<byte> >`。我得到一个`error C2039: 'type' : is not a member of 'ATL::_ATL_AutomationType<T>'`.

```
[id(1001)] HRESULT Find([out] SAFEARRAY(SAFEARRAY(byte))* features);

STDMETHOD(Find)(/*[out]*/ SAFEARRAY** features) 
```

有没有更好的方法来传递字节数组（我正在跨越进程边界）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T19:41:52.790

好的，试试这个（C++ ATL EXE 服务器）：

```
[
    object,
    uuid(F7F8E65F-EBAD-4191-B916-2DB2A1EA0720),
    dual,
    nonextensible,
    helpstring("IAofA Interface"),
    pointer_default(unique)
]
interface IAofA : IDispatch{
    [id(1), helpstring("method GetArray")] HRESULT GetArray([out,retval] VARIANT* pVals);
};

CComVariant CreateByteArrayAsVariant(BYTE *pData, ULONG size)
{
    CComSafeArray<BYTE> sa(size);
    for (ULONG i=0; i!=size; ++i)
    {
        sa.SetAt(i, pData[i]);
    }

    CComVariant var(sa);

    return var;
}

STDMETHODIMP CAofA::GetArray(VARIANT* pVals)
{
    CComSafeArray<VARIANT> sa(3);

    BYTE a[] = {1};
    BYTE b[] = {1, 2};
    BYTE c[] = {3, 2, 1};

    sa.SetAt(0, CreateByteArrayAsVariant(a, sizeof(a)));
    sa.SetAt(1, CreateByteArrayAsVariant(b, sizeof(b)));
    sa.SetAt(2, CreateByteArrayAsVariant(c, sizeof(c)));

    CComVariant var(sa);

    var.Detach(pVals);

    return S_OK;
} 
```

这是一个 VB.net 客户端：

```
Imports AofAServerLib

Module Module1

    Sub Main()
        Dim s As IAofA = New AofA
        Dim a() = s.GetArray

        For i As Integer = 0 To a.Length - 1
            For j As Integer = 0 To a(i).Length - 1
                Console.Write(a(i)(j))
                Console.Write(" ")
            Next
            Console.WriteLine()
        Next
    End Sub

End Module 
```

没有错误检查，但它有效。

# android - 从服务器搜索用户，用户是否退出

> ID：11829426
> 
> 赞同：2
> 
> 时间：2012-08-06T13:38:54.677
> 
> 标签：android, xmpp, asmack

我想从服务器搜索用户。

我从搜索中得到以下代码。

```
 pm.addIQProvider("query","jabber:iq:search", new UserSearch.Provider());
    UserSearchManager search = new UserSearchManager(connection);  

    Form searchForm = search.getSearchForm("search."+connection.getServiceName());  
    Form answerForm = searchForm.createAnswerForm();  
    answerForm.setAnswer("Username", true);  
    Toast.makeText(this,username.getText().toString(),Toast.LENGTH_SHORT).show();
    answerForm.setAnswer("search", username.getText().toString());  
    ReportedData data = search.getSearchResults(answerForm,"search."+connection.getServiceName());  

if(data.getRows() != null)
    {
         Toast.makeText(this,"Username Exists",Toast.LENGTH_SHORT).show();
    }
    else
    {
         Toast.makeText(this,"Username Available",Toast.LENGTH_SHORT).show();

    } 
```

但它会抛出类转换异常

```
 Form searchForm = search.getSearchForm("search."+connection.getServiceName()); 
```

在这条线上。

我已经下载了asmack-android-5.jar lib的源代码，浏览了一下，调试了一下。我在这条线上发现了异常

```
 // Check if the existing DataForm is not a result of a search
            DataForm dataForm = (DataForm) packetExtension; 
```

源代码中的 org.jivesoftware.smackx.Form 类。

我尝试了很多次，但没有解决这个问题。

提前致谢。

# javascript - 如何在 Perl 中打开 javascript 对象？

> ID：11829430
> 
> 赞同：2
> 
> 时间：2012-08-06T13:39:08.740
> 
> 标签：javascript, json, perl, object

我有一个带有 5.5mb 经度纬度数据的 JavaScript 对象文件，我想在 Perl 中打开它，这样我就可以应用一个粗略的细节减少算法，然后用减少的数据集保存一个新的目标文件。为了减少细节，我使用了一个 for 循环，它只需要每 20 个 long/lat 对。

我可以在 javascript 中执行此操作，但这需要我复制/粘贴每个坐标集并一次在其上运行我的 JavasSript。

然后我想也许我可以获取每组坐标并将它们放入 SQL 数据库，但这似乎是一种粗略的方法。并移动大量数据。

我认为 Perl 是更好的选择之一，它可以在服务器上完成。

我可以打开文件：

```
#!/usr/bin/perl

# open file
 open(FILE, "reduced_object_latlng.js") or die("Unable to open file");

# read file into an array
@data = <FILE>;

# close file 
close(FILE);

# print file contents
foreach $line (@data)
{
    print $line;
} 
```

该对象遵循以下设计：

```
var paths = {
    mayo: {
        name: 'Mayo',
        colour: 'green',
        coordinates: '-9.854892,53.76898 -9.853634,53.769338 -9.85282,53.769387 -9.851981,53.769561 -9.850952,53.769508 -9.850129,53.769371 -9.849136,53.769171 **data**' 
    },
    galway: {
        name: 'Galway',
        colour: 'purple',
        coordinates: '**data**;
    }
}; //etc. 
```

为了说明我如何减少上述数据，我的 javascript 版本从一个文件加载`var coords = "*data*"`

```
coords = coords.split(" ");
var path = [];
    var output="";
    document.getElementById("map_canvas").innerHTML = "";
for (var i = 0; i < coords.length; i++) {
        if (i%20==0)
        {
            var coord = coords[i].split(",");
            output += coord[0]+","+coord[1]+" ";
        }
}
document.getElementById("map_canvas").innerHTML = output; 
```

我读过一些建议我将其转换为 JSON，我不确定是否需要这样做。而不是编写纯文本处理程序，有没有办法将文件作为对象加载？

* * *

我被困住了，所以我这样做了：

```
var outputobject = 'var paths = {';
    for (property in copypaths) {
        outputobject += property + ': { ';
        outputobject += "name: '" + copypaths[property].name+"',";
        outputobject += "colour: '"+ copypaths[property].colour+"',";

        var reducedoutput="";
        var coord = copypaths[property].coordinates.split(" ");
        for (var i = 0; i < coord.length; i++) {
            if (i%20==0)
            {
                var coords = coord[i].split(",");
                reducedoutput += coords[0]+","+coords[1]+" ";
            }
        }   
        outputobject += "coordinates: '"+ reducedoutput+"'},";
    }
    outputobject += "};";
    document.getElementById("reduced").innerHTML = outputobject; 
```

它仍然涉及复制/粘贴和删除最后一个`,`. 谢谢@Oleg V. Volkov，当我在本周晚些时候有更多时间时，我会看看你提出的方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:49:54.213

只需剥离前导 JavaScript，这样您就可以使用裸键获得几乎正确的 JSON，并使用设置为 true 值的[`JSON`/`JSON::PP`](https://metacpan.org/module/JSON#JSON%3a%3aPP-SUPPORT-METHODS) instance`allow_barekey`来解码结果字符串。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:55:58.247

使用[`JSON`](https://www.metacpan.org/module/JSON)是您最好的选择。它具有允许您解码不太严格的 JSON 语法的选项，您将需要

*   `allow_singlequote`允许单引号和双引号字符串

*   `allow_barekey`允许全字母数字哈希键根本没有引号

*   `decode_prefix`在数据结束后忽略垃圾

*   `relaxed`为了好运

下面的程序将 JSON 解码为 Perl 结构，提取`mayo`条目的坐标字符串，并将值成对打印出来。

请注意，我删除了分号并在末尾添加了一个引号，`coordinates: '**data**;`因为我认为这是一个错误，而不是实际的 JavaScript 数据

```
use strict;
use warnings;

use JSON -support_by_pp;

my $json = JSON->new->relaxed->allow_singlequote->allow_barekey;

my $data = do {
  local $/;
  <DATA>;
};

my ($hash) = $json->decode_prefix($data =~ /(\{.*)/s);

my @coords = $hash->{mayo}{coordinates} =~ /[-0-9.]+/g;

printf "%f %f\n", splice @coords, 0, 2 while @coords;

__DATA__
var paths = {
    mayo: {
        name: 'Mayo',
        colour: 'green',
        coordinates: '-9.854892,53.76898 -9.853634,53.769338 -9.85282,53.769387 -9.851981,53.769561 -9.850952,53.769508 -9.850129,53.769371 -9.849136,53.769171 **data**' 
    },
    galway: {
        name: 'Galway',
        colour: 'purple',
        coordinates: '**data**'
    }
}; //etc. 
```

**输出**

```
-9.854892 53.768980
-9.853634 53.769338
-9.852820 53.769387
-9.851981 53.769561
-9.850952 53.769508
-9.850129 53.769371
-9.849136 53.769171 
```

# scala - 为什么我的正常递归和尾递归示例之间存在舍入差异？

> ID：11829433
> 
> 赞同：8
> 
> 时间：2012-08-06T13:39:24.180
> 
> 标签：scala

在玩尾递归示例时，我注意到正常递归调用和尾递归调用的结果之间存在细微差异：

```
scala> def fact(n: Int): Double = if(n < 1) 1 else n * fact(n - 1)
fact: (n: Int)Double

scala> fact(30)
res31: Double = 2.6525285981219103E32

scala> @tailrec def fact(n: Int, acc: Double = 1): Double = if(n < 1) acc else fact(n - 1, n * acc)
fact: (n: Int, acc: Double)Double

scala> fact(30)
res32: Double = 2.652528598121911E32 
```

只是出于好奇，有人可以向我解释为什么或在哪里进行舍入。我的猜测是，因为 Scala 编译器将尾递归版本转换为循环，所以`acc`在循环的每次迭代中都会分配参数，并且小的舍入误差会滑入其中。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-08-06T13:52:09.880

结果是不同的，因为两个版本以不同的顺序进行乘法运算，从而导致不同的舍入。

正常的递归调用会导致一个表达式`n*([n-1]*([n-2]*(...)))`，因为您首先计算 fact(n-1) 的值，然后将其与 n 相乘，而尾递归调用会导致`((n*[n-1])*[n-2])*...`您首先乘以 n，然后迭代到 n-1 .

尝试重写其中一个版本，使其以另一种方式迭代，从理论上讲，您应该得到相同的答案。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-08-06T13:51:04.213

您的两个函数没有按相同的顺序执行操作。

在 C 中：

```
int main(int c, char **v)
{
  printf ("%.16e %.16e\n", 
      30.*29*28*27*26*25*24*23*22*21*20*19*18*17*16*15*14*13*12*11*10*9*8*7*6*5*4*3*2,
      2.*3*4*5*6*7*8*9*10*11*12*13*14*15*16*17*18*19*20*21*22*23*24*25*26*27*28*29*30);
} 
```

印刷：

```
2.6525285981219110e+32 2.6525285981219103e+32 
```

（我使用了一个平台，C 中的浮点可以在其上工作）

您的函数的一个版本计算`30.*29*...`，另一个计算`2.*3*...`。这两个结果略有不同是正常的：浮点运算不是关联的。但请注意，结果没有什么深不可测的。您的一个函数**精确**计算IEEE 754 双精度表达式`30.*29*...`，另一个**精确** `2.*3*...`计算. 它们都按设计工作。

如果我不得不猜测，我希望它`2.*3*...`更准确（更接近用实数获得的结果），但这并不重要：这两个数字非常接近并且非常接近真实结果。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-06T13:52:45.653

不同之处不在于 Scala 将尾递归变成了循环。如果没有优化，结果将是相同的。此外，在舍入误差方面，递归的作用与循环的作用没有什么不同。

不同之处在于数字相乘的顺序。您的第一个解决方案在开始乘以数字之前一直递归到 1。所以它最终会计算`n * ( (n - 1) * (... * (2 * 1)))`。尾递归版本立即开始相乘，因此最终计算`n * (n-1) * ... * 2 * 1`.

当然，通常我们会说这两个是相同的，因为乘法是关联的，但对于浮点算术却不是这样。使用浮点数`(x * y) * z`可能会非常不同，`x * (y * z)`因为舍入误差的传播方式不同。所以这解释了你的行为。

请注意，当使用从 1 到 n 计数的 for 循环与从 n 到 1 计数的 for 循环来实现阶乘时，您会看到相同的差异。

# intellij-idea - IntelliJ IDEA 11 中的本地历史配置

> ID：11829434
> 
> 赞同：20
> 
> 时间：2012-08-06T13:39:28.750
> 
> 标签：intellij-idea

在以前版本的 IDEA 中，我能够设置本地历史记录功能将保留源文件中的更改的天数。出于某种原因，我在 IDEA 11.1.3 中找不到这一点，并且大约一天前的本地历史记录较少。我想我已经完成了所有设置，但找不到可以增加这个值的地方。有谁知道我在哪里可以找到它？

谢谢！

* * *

## 回答 #1

> 赞同：45
> 
> 时间：2012-08-06T13:51:03.893

修改`bin\idea.exe.vmoptions`（`idea.vmoptions`在 Linux 上，在 Mac 上[Info.plist](http://devnet.jetbrains.net/docs/DOC-197)），添加以下行：

```
-DlocalHistory.daysToKeep=5 
```

这是从设置用户界面中删除的唯一可配置选项。

另一种方法是使用`Help`| `Find Action`，在框中键入**注册表**，确保`Include non-menu actions`启用该选项，从列表中选择**注册表**结果，按`Enter`：

![登记处](../Images/7b7d69e3ac060654bfce46a6a0a29f7d.png)

请注意，默认值为 5 个**工作日**。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-17T17:16:11.780

您还应该知道此设置**localHistory.daysToKeep**的最大值为**23**（工作日）。
如果您尝试将此值设置为大于 23，则历史将不会保存任何内容（重新启动 IDEA 后）！
我自己通过实验方式发现了这一点=）

# sharepoint - SharePoint 2013 / IIS 7.5 模拟/委托/双跳

> ID：11829438
> 
> 赞同：7
> 
> 时间：2012-08-06T13:39:43.910
> 
> 标签：sharepoint, iis-7.5, windows-authentication, impersonation, delegation

好的，我花了大约 15 个小时试图解决这个问题，我终于辞职在这里发帖试图解决它。我知道这篇文章很长，但我已经完成了我将被告知尝试的所有正常事情，所以我想确保它很清楚，这样我们就不会浪费时间了。

我在 ESXi 5.0 服务器上托管了一个 Win Server 2008 R2 虚拟机。在这台服务器上，我安装了 SharePoint Foundation 2013 Preview 以及所有先决条件等。我在这台服务器上运行所有东西（MSSQL、IIS 7.5、SharePoint 服务），因为我们的使用量非常有限，只有大约 30 个用户。我迫切需要添加到 SharePoint 的一件事是用户能够在 Active Directory (Server 2003) 中修改他们的信息，因为我们的 AD 几乎没有填充并且已经过时。我找到了一个完美的 WebPart，它非常适合编辑用户。

当我想将 WebPart 配置为只允许用户编辑自己时，问题就出现了。WebPart（正确）在 C#.NET 中使用这行代码：。获取当前登录的身份，该身份已通过 IIS 中的 Windows 身份验证进行身份验证。然而，这将返回本地用户 NT AUTHORITY/IUSR。（我知道这对任何人都不是新闻）。

> > `System.Security.Principal.WindowsIdentity.GetCurrent().Name;`

所以我开始了我的研究并确定了以下几点。

在我的 SharePoint 的 web.config 中，我有以下内容：

> > `<authentication mode="Windows" />` `<identity impersonate="true" />`

在 IIS 中，我对包含我的 SharePoint 安装的 IIS 网站具有以下身份验证设置：

```
Anonymous Authentication    Disabled
ASP.NET Impersonation       Enabled
Basic Authentication        Disabled    HTTP 401 Challenge
Digest Authentication       Disabled    HTTP 401 Challenge
Forms Authentication        Disabled    HTTP 302 Login/Redirect
Windows Authentication      Enabled     HTTP 401 Challenge 
```

所以我知道即使我禁用了匿名身份验证，该站点仍在使用匿名用户登录。我遇到了有关与我的问题相匹配的双跳问题的信息，我遇到了这个链接并遵循了这篇文章中的所有指示：http: [//blogs.technet.com/b/taraj/archive/2009/01/29 /checklist-for-double-hop-issues-iis-and-sql-server.aspx](http://blogs.technet.com/b/taraj/archive/2009/01/29/checklist-for-double-hop-issues-iis-and-sql-server.aspx)。在每一步之后，我检查了应用程序行为的任何变化，但从未发现任何变化。

总之，我做了以下事情：

1.  我设置了一个域用户帐户来运行应用程序池。为了测试，我让这个用户成为 Domain Admins 组的成员。
2.  我将 web.config 中的一行更改为`<add key="aspnet:AllowAnonymousImpersonation" value="false" />`（确实如此）。这阻止了 NT AUTHORITY\IUSR 用户运行应用程序，而是在我创建的用于运行应用程序池的域帐户下运行。我现在可以登录到 SharePoint 并访问我的 WebPart，但正如预期的那样，它向我显示了运行应用程序池的域用户的 AD 信息，而不是经过身份验证的域用户。所以我知道 WebPart 正在工作并且具有必要的权限等，但`System.Security.Principal.WindowsIdentity.GetCurrent().Name;`仍在返回运行应用程序池的用户，即。模拟仍然不起作用
3.  在 AD 用户和计算机中，我`Trust this computer for delegation to any service`为这一切运行的虚拟服务器授予了权限。
4.  由于我没有运行应用程序池的域用户帐户的“委托”选项卡，因此我必须为用户注册一个 SPN。在注册了我从服务器的 SPN 列表中复制的所有 SPN 以及我在网上找到的几个 http SPN 以及`Trust this user for delegation to any service`对用户进行设置后，应用程序的行为没有任何变化。
5.  我确保我登录的域用户不受委派保护
6.  我进入 SharePoint 服务器上的本地策略编辑器，并确保允许运行应用程序池的域用户“作为操作系统的一部分”和“在身份验证后模拟客户端”。
7.  我尝试过的其他事情
    *   在 IIS 网站上添加`Negotiate:Kerberos`为 Windows Auth 的身份验证提供程序
    *   确认 SharePoint web.config 中存在这两行：

以下是我在 DC 上的 SPN 记录：

```
setspn -l SPserver
Registered ServicePrincipalNames for CN=SPserver,CN=Computers,DC=DOMAIN,DC=local:
    MSSQLSvc/SPserver.DOMAIN.local:appPoolUser
    WSMAN/SPserver
    WSMAN/SPserver.DOMAIN.local
    TERMSRV/SPserver
    TERMSRV/SPserver.DOMAIN.local
    RestrictedKrbHost/SPserver
    HOST/SPserver
    RestrictedKrbHost/SPserver.DOMAIN.local
    HOST/SPserver.DOMAIN.local

setspn -l appPoolUser
Registered ServicePrincipalNames for CN=appPoolUser,OU=Utility,OU=Users,OU=Company Name,DC=DOMAIN,DC=local:
    http/subdomain.domain.com
    http/SPserver.DOMAIN.local
    RestrictedKrbHost/appPoolUser.DOMAIN.local
    RestrictedKrbHost/appPoolUser
    MSSQLSvc/appPoolUser.DOMAIN.local:appPoolUser
    HOST/appPoolUser
    HOST/appPoolUser.DOMAIN.local 
```

在此过程中，我也多次重新启动服务器和 IIS。当我登录时，我的 Web 部件仍将我标识为运行应用程序池的用户。我知道有一些解决方法，例如使用经典模式应用程序池，但已弃用。还有其他方法可以在 .NET 中获得正确的名称，但我不想更改 Web 部件，更重要的是，这是正确的方法，我应该能够让它工作。我不想不得不不断地解决它。

如果有人对可能导致问题的原因有更多的想法，我很想听听他们的意见。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T19:20:32.760

不确定您是否还有问题，以下帖子可能会有所帮助。 [ASP.NET 4 中的双跳模拟、协议转换和约束委派](https://stackoverflow.com/questions/4146864/double-hop-impersonation-protocol-transitioning-and-constrained-delegation-in-a)

# sitecore - Sitecore 富文本编辑器自动保存

> ID：11829442
> 
> 赞同：1
> 
> 时间：2012-08-06T13:39:54.227
> 
> 标签：sitecore, rich-text-editor, autosave

内容编辑人员在写一篇文章半个多小时后，总是抱怨失去工作。这是一个 .NET 会话超时问题，但我不想修改该值。

我正在寻找 Sitecore RTE 中的自动保存功能。Sitecore 的 Ivan 有一篇关于此的博客文章 - [http://sitecoregadgets.blogspot.com/2011/11/rich-text-auto-save.html](http://sitecoregadgets.blogspot.com/2011/11/rich-text-auto-save.html) - 他提供了一个解决方案。我想知道是否有人使用过这个解决方案并对此感到满意。实施后是否有任何错误、错误或挑战，以及如何克服这些问题。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T16:42:54.607

Sitecore 还建议了相同的链接 - [http://sitecoregadgets.blogspot.com/2011/11/rich-text-auto-save.html](http://sitecoregadgets.blogspot.com/2011/11/rich-text-auto-save.html)

# php - 在控制器中调用组件构造函数

> ID：11829443
> 
> 赞同：0
> 
> 时间：2012-08-06T13:39:55.557
> 
> 标签：php, cakephp, constructor, cakephp-2.1, cakephp-2.2

我写了一个组件如下。

```
class GoogleApiComponent extends Component {
    function __construct($approval_prompt) {
        $this->client = new apiClient();
        $this->client->setApprovalPrompt(Configure::read('approvalPrompt'));
    }
} 
```

我在 AppController 的 $components 变量中调用它。然后我写了UsersController如下。

```
class UsersController extends AppController {
    public function oauth_call_back() {

    }
} 
```

因此，在 oauth_call_back 操作中，我想创建 GoogleApiComponent 的对象，并使用参数调用构造函数。如何在 CakePHP 2.1 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:49:26.797

您可以将 Configure::read() 值作为设置属性传递，或者将构造函数逻辑放在组件的 initialize() 方法中。

```
class MyComponent extends Component
{
    private $client;

    public function __construct (ComponentCollection $collection, $settings = array())
    {
        parent::__construct($collection, $settings);
        $this->client = new apiClient();
        $this->client->setApprovalPrompt ($settings['approval']);
    }
} 
```

然后在你的 UsersController 中写下这个：

```
public $components = array (
    'My'    => array (
        'approval' => Configure::read('approvalPrompt');
    )
); 
```

或者您可以这样编写组件：

```
class MyComponent extends Component
{
    private $client;

    public function __construct (ComponentCollection $collection, $settings = array())
    {
        parent::__construct($collection, $settings);
        $this->client = new apiClient();
    }

    public function initialize()
    {
        $this->client->setApprovalPrompt (Configure::read('approvalPrompt'));
    }
} 
```

我建议您查看 CORE/lib/Controller/Component.php 中的 Component 类。当您阅读源代码时，您会惊讶于您将学到的东西。

# sql - 令人困惑的 SQL Server 代码

> ID：11829450
> 
> 赞同：1
> 
> 时间：2012-08-06T13:40:18.720
> 
> 标签：sql, sql-server

我想知道是否有人可以帮助我理解这段代码在做什么。我继承了一个 SQL 脚本，我正在尝试更新代码，以便更容易阅读。我查看了下面的代码，似乎有一种更简单的方法可以做到这一点，但我无法理解这段代码实际上在做什么。谁能帮我描述一下这段代码？（也许提示我如何使用子查询或 EXISTS 或更简单的方法来阅读此内容？

```
SELECT DISTINCT
    s.id
    ,f.FLAG1
    ,f.FLAG1
    ,f.FLAG1
INTO #DLK_TEMP
from Inner_Source D
    LEFT OUTER JOIN Outer_Source_1 S on D.au = S.AU 
        AND D.wcv_entity_key = S.wcv_entity_key 
    LEFT OUTER JOIN Outer_Source_2 F on S.id = F.id
WHERE S.id IS NOT NULL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:43:32.747

它正在执行一个`LEFT OUTER JOIN`on`S`然后测试连接成功的那些行，这似乎很奇怪。它应该是一个`INNER JOIN`代替。如果`S.ID`不可为空，那么您也可以删除该`WHERE`子句。

```
SELECT DISTINCT
    s.id
    ,f.FLAG1
    ,f.FLAG1
    ,f.FLAG1
INTO #DLK_TEMP
FROM Inner_Source AS D
JOIN Outer_Source_1 AS S
    ON D.au = S.AU 
    AND D.wcv_entity_key = S.wcv_entity_key 
LEFT OUTER JOIN Outer_Source_2 AS F
ON S.id = F.id 
```

如果您愿意，可以将第一个联接更改为`EXISTS`子句，以明确联接仅充当过滤器：

```
SELECT DISTINCT
    s.id
    ,f.FLAG1
    ,f.FLAG1
    ,f.FLAG1
INTO #DLK_TEMP
FROM Outer_Source_1 AS S
LEFT OUTER JOIN Outer_Source_2 AS F ON S.id = F.id
WHERE EXISTS
(
    SELECT *
    FROM Inner_Source AS D
    WHERE D.au = S.AU 
    AND D.wcv_entity_key = S.wcv_entity_key
) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:43:25.243

```
INTO #DLK_TEMP 
```

是一个临时表（在连接关闭时被销毁），您将在其中插入一个双重令人兴奋的外连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:46:55.797

几乎在所有情况下，连接都比子查询好，因为您具体告诉优化器要连接哪些字段。在某些情况下，优化器*可以*将子查询更改为连接，在这些情况下您可以获得相同的性能，但在其他情况下，它将是未索引的`O(n^2)`搜索。

至于它具体做什么，它`Inner_Source`与`Outer_Source_1`and`Outer_Source_2`连接（特别是外连接，这意味着即使在某些表中缺少连接字段（尽管第一个连接几乎是内连接..），您也会获得行）并插入一个将结果数据集中的几个字段放入临时表中`#DLK_TEMP`。

您应该阅读连接，因为它们是数据库设计和编程的主要内容。你的那个查询真的很基础。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T13:47:31.387

这是将所有不同的值（`s.id`, `f.FLAG1`, `f.FLAG1`,`f.FLAG1`组合为不同的）选择到一个名为 的临时表中`#DLK_TEMP`。它获取的数据（即`s.id`, `f.FLAG1`, `f.FLAG1`）`f.FLAG1`来自三个不同的表，这些表具有唯一键（`Inner_Source`, `Outer_Source_1`, `Outer_Source_2`）。此处的左连接提供了连接语句左侧的值。

*请注意，左外连接包括来自两个表的第一个（左）的所有记录，即使第二个（右）表中的记录没有匹配值。*

我希望这有帮助。

# c++ - 如何调试linux中的踩踏问题

> ID：11829453
> 
> 赞同：0
> 
> 时间：2012-08-06T13:40:23.920
> 
> 标签：c++, linux, linux-kernel, embedded-linux

我在大型软件中面临内存践踏问题。

有时会观察到 SIGSEGV/SIGABRT。原因主要是践踏用户或 malloc 空间内存。尝试使用 mprotect-ed 内存作为“诱饵”，但没有运气。实际上无法抓住践踏者。从核心文件分析看来，malloc 空间（当前块大小）也发生了损坏。损坏总是单字节的并且发生在任何地方（我的意思是这样的模式，我可以称之为溢出/下溢，比如 0xFF00FF00 被 0xFF003A00 损坏）

对可能的调查方式有什么建议吗？？

PS -- 无法附加 valgrind。

提前致谢 。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:15:32.943

您可以尝试一些技巧。首先，检查堆的一致性，请参见[此处](http://www.gnu.org/software/libc/manual/html_node/Heap-Consistency-Checking.html#Heap-Consistency-Checking)。

您可能还想编写一个钩子，将 DEDEDEDE 写入所有已释放的内存，请参阅[此处](http://www.gnu.org/software/libc/manual/html_node/Hooks-for-Malloc.html#Hooks-for-Malloc)编写一个钩子来做到这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-08T22:09:30.847

有许多具有各种形式的健全性检查的替代堆实现，您可以链接到您的系统来代替 libc 中的那个。常用技术包括：

*   分配比请求更大的块，并在请求块的开头和结尾放置保护区
*   每个分配一页，两边都有不可访问的页面（例如，任何访问时出现页面错误）
*   跟踪分配的块以及释放的块
*   在低优先级线程中遍历堆以寻找坏东西

几年前，我花了很长时间试图在嵌入式系统上找到这样的问题——在运行几天后报告的问题。从来没有让我桌子上的设备崩溃。我几乎尝试了书中的所有技巧——包括彻底的代码审计和 PCLinting 整个代码库。

我最终将原因归结为两个系统上 SDRAM 的错误速度等级。坠毁的那个比我桌子上的那个稍微边缘一点。最终用吹风机和一罐冷冻喷雾最终证明：/

如果你能得到一个被反复践踏的确认位置，你的下一个停靠点将是使用硬件辅助调试（现在大多数 CPU 都允许这样做）或基于 ICE 或 JTAG 的调试器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T13:46:20.493

如果由于某种奇迹，您可以以某种方式使相同的内存位置在连续运行（或至少 25% 的时间或其他时间）中损坏，您可以在该内存位置的 gdb 中使用数据断点。

如果这没有发生，您是否在不同的硬件上尝试过您的软件以排除硬件内存错误？虽然很少有这样的事情仍然会发生。

另一种选择是尝试预加载一个分配器，例如`libumem`谷歌的分配器，看看它是否可以检测到任何内存问题。

我知道您说过这不是一个选择，但是如果您可以以任何方式将问题缩小到一组较小的代码，`valgrind`那真的很好 - 它在多个场合都对我有帮助。

最后，如果这些选项都没有产生结果，你将不得不变得更重量级：

*   如果您可以通过某种方式检查数据结构的健全性，请在代码中添加此类检查。
*   开始删除代码，看看问题是否消失。
*   从头开始重构或重写代码的可疑部分。
*   对受影响区域中的任何/所有代码进行多人同行评审。最好一个人对代码非常熟悉，而另一个人具有领域知识但*不*知道代码（因为当您不知道代码在说什么时，您在查看时会更容易看到错误）。

# .net - 在 .NET Framework 4 中开发服务，错误 1053

> ID：11829454
> 
> 赞同：0
> 
> 时间：2012-08-06T13:40:26.743
> 
> 标签：.net, windows-services, .net-framework-version

所以我正在尝试运行我编写的服务，由于某种原因，当我尝试启动它时它给了我这个错误：

```
Error 1053: the service did not respond to the start or control request in a timely fashion 
```

我的代码非常基本。

```
static void Main(string[] args)
    {
        try
        {
            ServiceBase[] ServicesToRun;
            ServicesToRun = new ServiceBase[] 
            { 
                new Program() 
            };
            ServiceBase.Run(ServicesToRun);
        }
        catch (Exception ex)
        {
            string SourceName = "WindowsService.ExceptionLog";
            if (!EventLog.SourceExists(SourceName))
            {
                EventLog.CreateEventSource(SourceName, "Application");
            }

            EventLog eventLog = new EventLog();
            eventLog.Source = SourceName;
            string message = string.Format("Exception: {0} \n\nStack: {1}", ex.Message, ex.StackTrace);
            eventLog.WriteEntry(message, EventLogEntryType.Error);
        }
    }

    public Program()
    {
        this.ServiceName = "FetchFeed";
    }

    protected override void OnStart(string[] args)
    {
        base.OnStart(args);

        //TODO: place your start code here
    repeat: FetchFeed();
        Thread.Sleep(3600000);
        goto repeat;
    }

    protected override void OnStop()
    {
        base.OnStop();

        //TODO: clean up any variables and stop any threads
    }

private static void FetchFeed()
{
    //Some HTTP requests and retrieval.
} 
```

这是安装程序类：

```
[RunInstaller(true)]
public class Service_Installer : Installer
{
    public Service_Installer()
    {
        ServiceProcessInstaller processInstaller = new ServiceProcessInstaller();
        ServiceInstaller serviceInstaller = new ServiceInstaller();

        //set the privileges
        processInstaller.Account = ServiceAccount.LocalSystem;

        serviceInstaller.DisplayName = "FetchFeed";
        serviceInstaller.StartType = ServiceStartMode.Manual;

        //must be the same as what was set in Program's constructor
        serviceInstaller.ServiceName = "FetchFeed";

        this.Installers.Add(processInstaller);
        this.Installers.Add(serviceInstaller);
    }
} 
```

错误背后的原因可能是什么？我已经检查了 FetchFeed() 是否可以作为一个没有异常的独立应用程序工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:44:38.283

```
repeat: FetchFeed();
Thread.Sleep(3600000);
goto repeat; 
```

这是你的问题。Windows 服务应在 30 秒内响应，因此 Windows 知道它已成功启动。

使用此代码，您将阻塞唯一的线程，并且服务不再响应任何内容。

尝试在不同的线程或其他方式上执行此操作。

我会建议另一种方式，因为使用`goto`a 真的不行:)

还可以查看有关 Windows 服务的一些教程和基本文档以更好地理解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:12:45.990

使用合适的[计时器](http://msdn.microsoft.com/en-us/library/system.timers.timer)

```
public class YourService
{
       var tim = new System.Timers.Timer(60 * 60 * 1000); // 1 hour

    protected override void OnStart(string[] args)  
    {  
        base.OnStart(args);  

        tim.AutoReset = true;
        tim.Elapsed += new System.Timers.ElapsedEventHandler(tim_Elapsed);
        tim.Enabled = true;
        // first time run
        ThreadPool.QueueUserWorkItem(WaitCallback(FetchFeed));
    }

    static void tim_Elapsed(object sender, System.Timers.ElapsedEventArgs e)
    {
          FetchFeed();
    }
} 
```

# java - 测试休息服务

> ID：11829455
> 
> 赞同：2
> 
> 时间：2012-08-06T13:40:33.540
> 
> 标签：java, unit-testing, rest, testing, tdd

我是 TDD 的新手，现在我正在尝试测试休息服务。我需要以某种方式测试对服务器的请求是否正确发送并且看起来不错。您能否为我提供有关如何实现此目标的任何链接或建议。

另外：如果您可以推荐任何关于 TDD 主题的好书 - 欢迎您！

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T13:49:35.363

正如 Chris 所建议的，对于临时手动测试，Chrome 休息客户端非常棒。对于自动化测试，我建议您[放心](http://code.google.com/p/rest-assured/)。

如果使用chrome，我还推荐以下两个扩展

1.  [JSON 查看器](https://chrome.google.com/webstore/detail/chklaanhfefbnpoihckbnefhakgolnmc)
2.  [XML 查看器](https://chrome.google.com/webstore/detail/eeocglpgjdpaefaedpblffpeebgmgddk)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T18:05:17.113

我知道这可能不是您正在寻找的答案，但是如果您对编写单元测试感兴趣，那么您应该专注于测试您的单元，而不是它们的交互。除非您自己编写 REST 客户端，否则您没有任何业务对其进行测试。如果您正在编写自己的 REST 客户端实现，您应该问自己为什么。

考虑到这一点，这就是我处理这个主题的方式：如果您的客户接受一个对象，只需验证该对象具有正确的值（将其与预期结果进行比较）。如果您的客户采用某种形式的 URL，请将其与预期结果进行比较。将实际客户端的测试留给 Oracle。这是他们的工作，无论如何，您无法修复可能发现的任何错误。

当然，对于集成测试，只需针对服务（或模拟）运行客户端，并将响应与预期的响应进行比较。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:43:19.520

我使用[Chrome REST 客户端](https://chrome.google.com/webstore/detail/hgmloofddffdnphfgcellkdfbfbjeloo)和等效的[Firefox](https://chrome.google.com/webstore/detail/hgmloofddffdnphfgcellkdfbfbjeloo)版本。

它允许您输入您的身份验证标头并查看返回代码以及为您解析 json。

# ubuntu - 无法打开链接描述文件 libgcc_s.so.1：打开的文件太多

> ID：11829458
> 
> 赞同：1
> 
> 时间：2012-08-06T13:40:39.063
> 
> 标签：ubuntu, linker, arm, cross-compiling, glibc

我正在尝试在运行 ubuntu 12.04 的 x86_64 机器上为 ARM 交叉编译 glibc 2.16。我正在使用存储库中的 gcc-arm-linux-gnueabi 工具链。配置：

```
 ../glibc-2.16.0/configure --build=arm-linux-gnueabi --host=arm-linux-gnueabi --enable-add-ons --with-headers=/usr/arm/include/ --prefix=/usr/arm 
```

当我运行 make 我遇到了这个错误：

> /usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld：找不到libgcc_s.so.1 collect2：ld返回1退出地位

libgcc_s.so 的位置

```
/usr/lib/gcc/arm-linux-gnueabi/4.6/libgcc_s.so 
```

在同一文件夹中创建指向 libgcc_s.so.1 的符号链接会导致此错误：

```
/usr/lib/gcc/arm-linux-gnueabi/4.6/../../../../arm-linux-gnueabi/bin/ld: cannot open linker script file /usr/lib/gcc/arm-linux-gnueabi/4.6/libgcc_s.so.1: Too many open files
collect2: ld returned 1 exit status 
```

任何想法下一步该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T07:09:12.800

这是由损坏的工具链引起的，我完全删除并清除了所有与 arm-linux 相关的文件，然后重新安装了工具链和库，现在它又可以工作了。

# html - css：将文本包装到 div 中，以便 div 获取文本的长度

> ID：11829464
> 
> 赞同：1
> 
> 时间：2012-08-06T13:41:04.513
> 
> 标签：html, css, margin, padding

这是一个代码：

[小提琴](http://jsfiddle.net/U9MXN/1/)

```
<div id="main" style="border:1px solid red;">
<div id="child" style="background-color:#68c5e7; width:170px; margin:0 auto; font-size:30px; background-image:url(https://www.google.by/logos/2012/javelin-2012-sr.png); background-repeat   : no-repeat;">
<span style="padding-left:116px;">9:58</span>
</div>
</div> 
```

使用javascript计算时间，因此可以在页面加载后更改字符串的长度。如何固定背景的长度 #68c5e7 使其具有适当的长度（对应于img+text的长度）。

同样，您将 9:58 更改为 10:03，但背景颜色的长度没有更改，它不适合。还有一个要求：图片+文本（文本不能太长，总是不超过主div的长度）应该正好在主div的中间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:51:35.123

只需将所有样式添加到`<span>`标签并将分配的值删除到`width`：

**HTML**标记：

```
<div id="main">
    <div id="child">
        <span> 123456</span>
    </div>
</div>​ 
```

**CSS**标记：

```
#main{
    border:1px solid red;
}

#child {
    text-align: center;
}

span{
    /*width:190px; */
    padding-left:114px;
    background-color:#24a5a5;
    margin:0 auto; 
    font-size:30px; 
    background-image:url(https://www.google.by/logos/2012/javelin-2012-sr.png); 
    background-repeat: no-repeat;
    white-space:nowrap;
    position: relative;
} 
```

检查此**[演示](http://jsfiddle.net/luissanchezm86/U9MXN/4/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:51:43.670

做一些改变：

1.  从容器 div 中删除宽度
2.  将 text-align:center 添加到父 div
3.  使容器 div 显示 inline-block

**[jsFiddle 示例](http://jsfiddle.net/j08691/U9MXN/3/)**

HTML

```
<div id="main" style="border:1px solid red;text-align:center">
<div id="child" style="background-color:#24a5a5;  font-size:30px; background-image:url(https://www.google.by/logos/2012/javelin-2012-sr.png); background-repeat   : no-repeat;display:inline-block;">
    <span style="padding-left:114px;"> 12345678</span>
</div>
</div>​ 
```

# c++ - 如何判断一个单位的士兵是否在网格地图上连接

> ID：11829465
> 
> 赞同：1
> 
> 时间：2012-08-06T13:41:13.353
> 
> 标签：c++, algorithm, game-engine, graph-algorithm, game-physics

我正在制作游戏，地图就像网格一样，我有几个单位（每个单位都有几个士兵）。如何判断一个单位的士兵是否连接（连接意味着每个士兵至少有一个方向的来自同一单位的士兵）。地图是网格，相邻单元格是两个，它们可以在 x 和/或 y 处相差 1（除了边界之外的每个单元格都有 8 个相邻单元格，如矩阵）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:52:32.957

您可以在此处使用[洪水填充](http://en.wikipedia.org/wiki/Flood_fill)，您的图表是网格的`G=(V,E)`位置和`V``E = { (u,v) | there is a soldier in both u and v from the same unit }`

基本上，当您将问题简化为该图时，任何图发现算法都可以。*从所需单元中的任何士兵调用算法，如果发现算法准确* `k`发现节点，您可以判断该单元是否“已连接”，`k`单元中的士兵数量在哪里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-07T03:52:10.963

使用联合查找数据结构。测试每一对士兵。每当两个士兵相邻时，他们的等价类就会合并。在对所有此类对进行测试后，如果您最终得到一个等价类，则您的单元已连接。

# regex - 如何在命令行上匹配正则表达式并在退出代码中发出信号？

> ID：11829466
> 
> 赞同：2
> 
> 时间：2012-08-06T13:41:21.303
> 
> 标签：regex, command-line

我正在寻找一个简单的（最好是单行的）命令行表达式，如果某个表达式与某个正则表达式匹配，则将其退出代码设置为 0，如果不匹配，则将其设置为非零。理想情况下，这将是一个像这样工作的命令“匹配”：

```
$ match "foo.*" "foobar"; echo $?
0
$ match "foo.*" "f00bar"; echo $?
1 
```

perl 命令行程序 ( `perl -e <…&gt;`) 就可以了。命令是否将匹配输出到标准输出或标准错误并不重要，我感兴趣的只是二进制信息“匹配/不匹配”作为退出代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:45:01.537

在 bash 中，`=~`在双括号内使用。

```
$ [[ foobar =~ foo.* ]]; echo $?
0
$ [[ f00bar =~ foo.* ]]; echo $?
1 
```

您甚至可以使用括号来拉出匹配的组。

```
if [[ foobar =~ foo(.*) ]]; then
    # Captured groups stored in "regex match" array.
    echo "found ${BASH_REMATCH[1]}" 
fi 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:42:50.600

试试这个 ：

```
echo test | >/dev/null sed "/teds/ {q0}; q1 " ; echo $? 
```

还有这个：

```
echo test | >/dev/null sed "/te/ {q0}; q1 " ; echo $? 
```

第一个返回 1，第二个返回 0。

# perl - 像 perl -e 一样创建和执行 R 脚本，以便在 bash 等 shell 中编写 R 脚本？

> ID：11829470
> 
> 赞同：4
> 
> 时间：2012-08-06T13:41:32.450
> 
> 标签：perl, r, bash

我倾向于使用 perl -e 选项在 shell 脚本（如 bash）中添加 Perl 脚本，而无需创建 Perl 脚本文件。

```
perl -e '
while (<>) {
  print; 
}' < file 
```

是否有类似的方法为 R 执行此操作？我想在 bash 脚本中编写 R 脚本，但不创建 R 脚本文件。

一种方法是使用

```
R --vanilla <<RSCRIPT
a <- "hello\n"
cat(a)
RSCRIPT 
```

与 perl -e 不同，使用 $ 时，必须在引用表的列时添加反斜杠。在 perl -e 中，我们不需要使用 \$ 来引用 perl 变量。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:42:26.567

就在这里。您可以使用`Rscript`：

```
Rscript -e 'print("hello world")' 
```

# php - 使用 PHP 更改服务器日期

> ID：11829476
> 
> 赞同：0
> 
> 时间：2012-08-06T13:41:55.870
> 
> 标签：php, linux

这是否可以使用 php 代码更改 linux 服务器日期。有没有办法给 apache 提供必要的权限来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:22:22.513

是的。阅读所谓的 setuid 位，但要非常小心地使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:18:55.743

有两种方法可以让服务器显示与默认时区相对应的日期/时间。

## PHP`ini_set()`

在每个处理日期和时间的页面中包含的 php 文件中，包括类似

```
ini_set('date.timezone','America/Los_Angeles'); 
```

这将导致处理任何日期/时间，就好像它们是美国洛杉矶的当地时间一样。

请参阅：[“使用 PHP 更改时区”](http://www.electrictoolbox.com/php-change-timezone/)

## .htaccess

如果您有足够的权限，并且服务器配置允许，则不必将上述内容包含在任何处理日期和时间的 php 文件中，您可以放入 .htaccess 文件

```
SetEnv TZ "America/Los_Angeles" 
```

这将具有相同的效果。

请参阅：[“使用 htaccess 更改时区”](http://www.webmastersucks.com/change-time-zone-with-htaccess/)

# google-apps-script - 在小部件上使用 TAGS

> ID：11829479
> 
> 赞同：0
> 
> 时间：2012-08-06T13:42:06.623
> 
> 标签：google-apps-script

我正在尝试在 UI 小部件中使用标签，但标签值在处理程序函数中不可用（返回“null”）。

它应该像那样工作（在这种情况下，它对我来说有点没用）还是我做错了什么？如果有人对 TAGS 有任何经验，我将不胜感激；-)

这是我用于测试的代码：

```
function doGet(e) {
  var app = UiApp.createApplication();
  var panel = app.createVerticalPanel();
  var lbl = app.createTextBox().setWidth('400').setId('lbl');
  lbl.setText('empty').setTag('tag value');
  lbl.setText('original value = '+lbl.getTag());// this line to check that setTag / getTag is working as it should in the same function
  app.add(panel.add(lbl));
  var CH = app.createServerHandler('showtag').addCallbackElement(panel);
  lbl.addClickHandler(CH)

  return app;
}

function showtag(){
var app = UiApp.getActiveApplication();
var lbl = app.getElementById('lbl')
lbl.setText('new value = '+lbl.getTag());
return app
} 
```

可以[用这个链接测试](https://script.google.com/macros/s/AKfycbyLpTcu7SuUHfLFAEKwL-6JWQmqJufpymlGlp3ZhkSwVxalkfIR/exec)

*编辑：我在代码中添加了一行读取和写入 doGet 函数中的标签，只是为了测试......*

**编辑 2：Srik 的解决方案，就这么简单：**

```
function showtag(e){
var app = UiApp.getActiveApplication();
var lbl = app.getElementById('lbl')
lbl.setText('from showtag value = '+e.parameter.lbl_tag);
return app
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:27:43.903

好的。这里有一个小怪癖。在您的处理程序中，您可以通过以下方法访问标记值

```
function doGet(){
   ....
   var lbl = app.createTextBox().setWidth('400').setId('lbl');
   lbl.setText('empty').setTag('tag value');
   ....
}

function showtag(e){
  var tag = e.parameter.lbl_tag; /* I'm not sure if it us Tag or tag */
  ....
} 
```

# r - 当其长度不是所需总长度的倍数时重复向量

> ID：11829481
> 
> 赞同：3
> 
> 时间：2012-08-06T13:42:12.180
> 
> 标签：r, seq, rep

我有一个 1666 行的数据框。我想添加一个具有重复序列的列，`1:5`用于`cut()`进行交叉验证。它看起来像这样：

```
 Y      x1       x2       Id1
   1      .15      3.6       1
   0      1.1      2.2       2
   0      .05      3.3       3
   0      .45      2.8       4
   1      .85      3.1       5
   1      1.01     2.9       1
  ...      ...     ...      ... 
```

我尝试了以下 2 种方法，但收到一条错误消息，因为它似乎只在完整`seq()`参数的增量中添加数字：

```
>   tr2$Id1 <- rep(seq(1,5,1), (nrow(tr2)/5))
Error in `$<-.data.frame`(`*tmp*`, "Id", value = c(1, 2, 3, 4, 5, 1, 2,  : 
  replacement has 1665 rows, data has 1666
>   tr2$Id1 <- rep(seq(1,5,1), (nrow(tr2)/5) + (nrow(tr2)%%5))
Error in `$<-.data.frame`(`*tmp*`, "Id", value = c(1, 2, 3, 4, 5, 1, 2,  : 
  replacement has 1670 rows, data has 1666 
```

有什么建议么？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T13:48:04.183

使用or的`length.out`论点（“更快的简化版本”[of ]）：`rep()``rep_len``rep`

> `length.out`: 非负整数。输出向量的所需长度

这是一个使用内置数据集汽车的示例。

```
str(cars)
'data.frame':   50 obs. of  2 variables:
 $ speed: num  4 4 7 7 8 9 10 10 10 11 ...
 $ dist : num  2 10 4 22 16 10 18 26 34 17 ... 
```

添加分组列：

```
cars$group <- rep(1:3, length.out = 50L) 
```

检查结果：

```
head(cars)
  speed dist group
1     4    2     1
2     4   10     2
3     7    4     3
4     7   22     1
5     8   16     2
6     9   10     3

tail(cars)
   speed dist group
45    23   54     3
46    24   70     1
47    24   92     2
48    24   93     3
49    24  120     1
50    25   85     2 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T13:47:51.267

像这样的东西？

```
df <- data.frame(rnorm(1666))
df$cutter <- rep(1:5, length.out=1666)

tail(df)
     rnorm.1666\. cutter
1661  0.11693169      1
1662 -1.12508091      2
1663  0.25441847      3
1664 -0.06045037      4
1665 -0.17242921      5
1666 -0.85366242      1 
```

# php - 替换看起来像这样的奇怪字符 -

> ID：11829482
> 
> 赞同：0
> 
> 时间：2012-08-06T13:42:15.027
> 
> 标签：php, character-encoding, char, character

我找到了一个需要转换为减号 (-) 的字符。

我发现这个[Can't remove special characters with str_replace](https://stackoverflow.com/questions/3168392/cant-remove-special-characters-with-str-replace)。

所以我在我的 char 上尝试了函数 decodeString，它给了我这个：

```
65 75 72 6f 43 6c 69 6e 69 78 20 96 20 49 6d 70 6f 74 65 6e 73. 
```

有人知道如何转换吗？

# python - 数据库接口

> ID：11829494
> 
> 赞同：3
> 
> 时间：2012-08-06T13:42:41.360
> 
> 标签：python, database, windows, desktop-application

我想用 Python (PyGTK) 实现一个数据库桌面应用程序。到目前为止，我一直在使用 sqlite3，但我读到它不是很好，如果很少有人想同时访问它。我现在正在考虑切换到另一个界面，但我不知道哪个界面或是否真的有必要。

我需要/拥有的：

*   2 个表，每个表大约 2000 个条目，这是主要数据集，但会添加更多。
*   该数据库将存储在本地网络中。该应用程序将由大约 5 个人在 5 台不同的 PC 上使用。
*   该工具的使用不是很频繁，很少有人同时使用/编辑，但它可能会发生。
*   安全是一个重点，但由于该工具在 Intranet 中运行，我不需要关心登录/备份。这是由服务器和 IT 人员完成的。
*   数据库应该不会太慢，这里还有一点，每个条目大约有 3 个图像（总共 15000 个）。我认为如果用户选择相应的条目来生成它们中的每一个会很慢，但我必须尝试一下。或者，我生成所有图像并将文件路径存储在数据库中。
*   操作系统必须是 Windows (XP/7/64bit)

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:07:53.073

如果您确信该应用程序只能在 Windows 上运行，那么 JET（后端 Access 使用）将是我的建议。

如果您没有在机器上安装 Access，您可以使用创建一个空白数据库

```
import ctypes
ODBC_ADD_DSN = 1
Return = ctypes.windll.ODBCCP32.SQLConfigDataSource(0, ODBC_ADD_DSN, "Microsoft Access Driver (*.mdb)", "CREATE_DB=C:\Temp\database.mdb" + chr(0)) 
```

然后使用 pyodbc 或 adodbapi 连接到数据库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:09:00.777

[SQLite](http://www.sqlite.org/faq.html#q5)允许单个写入者但有多个读取者。

当然，在这种情况下，这并不重要。当多个用户尝试在您的网络上打开并写入该 SQLite DB 文件时，最后一个写入 DB 文件的人将获胜，而其他更改将丢失。

您需要使用如下数据库服务器：

*   [PostgreSQL](http://www.postgresql.org/) ( [psycopg2](http://www.initd.org/psycopg/) )
*   [MySQL](http://www.mysql.com/) ( [pymysql](https://github.com/petehunt/PyMySQL) )
*   [SQLServer](http://www.microsoft.com/sqlserver/en/us/default.aspx) ( [pymssql](http://code.google.com/p/pymssql/) )

括号中的链接是指向这些数据库的 Python [DB-API](http://www.python.org/dev/peps/pep-0249/)驱动程序信息的链接。

好消息是，如果您已经有一个可以与`sqlite3`驱动程序一起使用的应用程序，那么您真的只需要通过并替换`sqlite3`为您切换到的任何数据库的适当驱动程序。好吧，您还需要使用一些关于在何处连接到网络上的数据库服务器的附加信息来更新您的应用程序。

例如，SQLite 只需要数据库文件的路径，而上述任何数据库都需要主机/IP 地址、端口、数据库名称、数据库用户名和数据库密码。

我个人更喜欢 PostgreSQL，但这很可能取决于您的 IT 和服务器人员他们想要支持什么。我想您可以使用 SQLServer Express 之类的东西（因为您的数据集似乎没有那么大），并且可能更适合 Windows 环境。

# eclipse - Eclipse 在自动导入静态类方面存在一些问题

> ID：11829495
> 
> 赞同：17
> 
> 时间：2012-08-06T13:42:46.370
> 
> 标签：eclipse, import, static-classes

我对eclipse有一些问题。

如果我`anyMap()`在我的源代码中使用类似的东西，然后按，那么`CTRL + SHIFT + O`导入列表中的任何更新都不会完成。
如果我`import static org.mockito.Matchers.*`在我的导入中写下类似的`anyMap()`内容，那么就会知道。
如果按然后`CTRL + SHIFT + O`因为我必须导入其他一些类，`import static org.mockito.Matchers.*`则将替换为`import static org.mockito.Matchers.anyMap`

如果我想使用 then `anyList()`，我必须`import static org.mockito.Matchers.*`再次手动编写导入。

我知道这个主题[可以修改 Eclipse 的 Organize Import (ctrl+shift+o) 命令对静态导入的处理吗？](https://stackoverflow.com/questions/9831047/can-eclipse-the-organize-import-ctrlshifto-commands-handling-of-static-impo)并且解决方案工作正常，但是是否也有可能让 eclipse 自动知道我想使用的静态类？

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-08-06T14:16:58.280

是的，这是可能的..看到这个问题：

[Eclipse 优化导入以包括静态导入](https://stackoverflow.com/questions/288861/eclipse-optimize-imports-to-include-static-imports)

检查收藏首选项部分：
**Window » Preferences » Java » Editor » Content Assist » Favorites**

单击“新类型”并添加`org.mockito.Matchers`如下：

![添加新类型](../Images/1fb9771ac06d386fb829c1d041c10536.png)

一旦你这样做了，你应该有相应的条目，如下所示：

![条目出现](../Images/103e66083eef61435b3906a98c3ed692.png)

之后，如果您输入`anyM`代码并执行 Ctrl+Space，您将看到静态方法是内容辅助建议之一。如果您选择该选项，则会自动添加相应的导入：

![提议](../Images/c6bc96ceeb3bfeea4e2056bb4776e34c.png)

如果您键入的内容仅与静态匹配，则将自动添加导入。例如，如果您键入`anyMap`然后按 Ctrl + Space，*则将*直接添加导入。

# php - 如何在我的数字中添加小数？

> ID：11829499
> 
> 赞同：6
> 
> 时间：2012-08-06T13:42:58.100
> 
> 标签：php, number-formatting

我正在做一些计算，最终得到`65.0`or `43.5`。
我需要在这个数字上加一个零，以便我的数字比较有效：

`$this->sub_total == $order_sub_total`

我已经使用 number_format() 进行了测试：

```
$total = number_format($total, 2, '.'); 
```

但这给了我呃味精：`Wrong parameter count for number_format()`

我很想这样做：

```
$total = $total.'0'; 
```

但我认为如果数字是`35.43`.

那么如何在我的数字上添加一个额外的小数呢？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-08-06T13:44:56.727

[`number_format()`](http://php.net/manual/en/function.number-format.php)您需要两个或四个参数。三人总会犯错。

对您来说，以下两种方式的工作方式相同：

```
$total = number_format($total, 2);

$total = number_format($total, 2, '.', ','); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T13:45:37.273

如果您提到小数分隔符，您还必须使用千位分隔符。

所以要么做

```
number_format($total, 2); 
```

或者

```
number_format($total, 2, '.', ','); 
```

[这是文档。](http://php.net/manual/en/function.number-format.php)

由于某些地区`,`用作小数分隔符，因此`number_format($total, 2)`并非普遍正确。为确保获得所需的结果，您必须使用`number_format($total, 2, '.', ',');`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:47:56.803

为什么不是一个普通的旧的`$total = sprintf("%01.2f", $total)`？

编辑：

100 万次迭代计时`$n = 3.14159`：

```
$total = sprintf("%01.2f", $n);               9.148s
$total = number_format($n, 2);                8.296s
$total = number_format($n, 2, ".", ",");     10.944s 
```

所以略好于带有分隔符`sprintf`的成熟。`number_format`

# cakephp - Cakephp：在cakephp中不同平台的不同用户登录

> ID：11829500
> 
> 赞同：1
> 
> 时间：2012-08-06T13:42:59.840
> 
> 标签：cakephp, cakephp-2.0, cakephp-2.1

嗨，伙计们，我有一个身份验证运行良好的应用程序。我使用了食谱[http://book.cakephp.org/2.0/en/corelibraries/components/authentication.html](http://book.cakephp.org/2.0/en/corelibraries/components/authentication.html)中的教程 。用户表链接到组表。
我的用户表中的所有用户都根据他们所属的组执行不同的角色，并且他们使用相同的视图进行登录。我需要添加另一个名为买方的用户，该用户与这些其他用户没有任何关系。买家应该有自己的登录名，与用户不同。我遇到了许多关于不同登录的答案的问题，但它们并不是我真正需要的。我也不打算更改我的架构。我的问题： 1\. 在这种情况下，买家和用户控制器是否可以使用两个控制器来进行我的身份验证？2\. 买家如何使用买家表格中的电子邮件和密码登录并让应用程序对其进行身份验证？3\. 如何在不为他们添加新组的情况下将这些买家添加到我的应用程序中？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T19:30:26.143

实际上登录是使用 cake auth 组件。因此，如果您为买家制作模型，您可以验证他们的身份验证是否有效，如果有效，请使用 auth 组件记录买家。

看看我的回答： [cakephp auth 组件，使用两个模型](https://stackoverflow.com/questions/11834646/cakephp-auth-component-use-two-models/11834761#11834761)

# java - 什么是简单英语的 JavaBeans？

> ID：11829502
> 
> 赞同：18
> 
> 时间：2012-08-06T13:43:05.673
> 
> 标签：java, javabeans, definition

在我开始之前，我想让每个人都知道我确实花了很多时间在谷歌上搜索并找到**了很多**解释和定义。但即便如此，在花了几个小时阅读这个主题之后，仍然显得相当模糊。我知道我必须提出可以改善社区的问题，但这只是为了让我看看我是否对 JavaBeans 有清晰的了解。

据我所知，JavaBean 基本上是一个类，就像任何其他 java 类一样，只是它遵守某些约定，即：

*   该类必须实现 Serializeable
*   假定类属性是私有的，并且它们的名称以小写字母开头
*   每个属性都必须有其各自的 getter 和 setter 方法。
*   每个 setter 方法都以前缀“get”开头，后跟属性名称，例如 setName()
*   Setter 方法是公开且无效的
*   同样适用于 getter 方法（前缀“get”、public、返回类型、相应的属性类类型等）
*   对于布尔属性而不是“get”，使用前缀“is”
*   严格来说，被认为是“bean”的是类的实例，而不是类本身。

你有它，经过很长时间的阅读，这就是我能理解的……是这样吗？我接近了吗？我完全错了吗？

...感谢大家的回答，以便我可以更新此项目符号列表:-)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T13:45:27.750

javabean 是一个**标准**。所有 Javabean 都具有以下 3 个特性：

1) 类实现`Serializable`
2) 所有字段都有公共的 setter 和 getter 来控制访问。
3) 一个公共的无参数构造函数。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T13:46:53.303

是的，差不多就是这样。

只是几个额外的位：

*   getter 不带参数，setter 只带一个与属性相同类型的参数
*   通过分别省略 setter 或 getter，属性可以是只读的或只写的
*   `boolean`getter 使用前缀 'is'

而且我认为严格来说它是“bean”的实例，而不是类。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T13:55:23.920

> 是这样吗？我接近了吗？

是的，你是比较正确的。大多数 bean 都遵循这样的基本定义规则。但是，只需添加更多内容。为了区分 bean 和 POJO（Plain Old Java Object），bean 有一个默认的构造函数，并且通常实现可序列化的接口。

这使您可以跨许多框架使用基本模型。Bean 主要用于以简单的布局结构存储和检索数据，因此可以在整个特定架构中共享数据模型。示例包括在 UI 中触发事件，使用相同的数据处理不同的对话框和/或检索给定 ORM（对象关系映射）的结果。您可能想要查看的其他示例是 DTO（数据传输对象）、VO（值对象）和 EJB（企业 Java Bean）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T13:49:16.173

补充我们同事的答案：

1.  使用 addXXXListener 方法添加侦听器。
2.  使用 removeXXXListener 方法删除侦听器。
3.  布尔（原始）字段应该有一个 isXXX 方法而不是一个 getXXX 方法。

由于它是一个标准，因此遵循它很重要，因为 Java 中的库和技术可能会在后台使用它。示例：JSP 中的表达式语言、GUI 构建器等。

规范：http: [//download.oracle.com/otndocs/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/](http://download.oracle.com/otndocs/jcp/7224-javabeans-1.01-fr-spec-oth-JSpec/)

# xcode - 抑制实例方法覆盖链接器警告框架xcode

> ID：11829512
> 
> 赞同：22
> 
> 时间：2012-08-06T13:43:31.937
> 
> 标签：xcode, frameworks, linker, warnings

我有一个库，它开始在 XCode 4.4 下抛出几个链接器警告。警告类似于“ld: warning: instance method 'methodName:' in category from overrides method from class in”

该框架仍然可以正常工作，我认为编写它的公司将在下一个版本中纠正这个问题，但目前这些警告非常烦人。有没有办法在不禁用所有链接器警告的情况下关闭它们？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-11-13T20:22:16.403

通过在 Xcode 构建设置区域的“其他链接器标志”中添加标志，我提出了两个选项：

1) 添加`-Xlinker -w`将禁止*所有*链接器警告，无论类型如何（这是`-w`ld(1) 的标志）。显然，这将使这个特定的警告安静下来，但所有其他 ld 警告也是如此。

2）添加`-Xlinker -no_objc_category_merging`将跳过链接器在链接期间将所有类别方法组合到基类中的优化步骤，然后在运行时发生。启动时可能会慢一点，但它可能仍然比运行时的方法调动快，并且由于 ld(1) 在此步骤中发出警告，因此它也会跳过该警告。

ld 似乎没有办法像编译器那样通过外科手术抑制任何单独的警告，尽管它有几个或一组的特殊标志（这些都没有帮助）。上述两种解决方案都可能不推荐用于生产代码，但在某些情况下，其中一种可能会有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-04T01:35:53.317

如果存在隐藏该警告的选项，它将位于：

**Project Navigator（左侧的文件列表）-> [Project name]（带有蓝色图标的那个）-> Build Settings -> Apple LLVM compiler 3.1 - 警告**

还：

[在 Xcode 中，如何抑制特定源文件中的所有警告？](https://stackoverflow.com/questions/6921884/xcode-4-how-to-suppress-all-warning-in-specific-source-file)

# android - Android 上 Google 地图的 API 密钥的用途是什么？

> ID：11829521
> 
> 赞同：2
> 
> 时间：2012-08-06T13:43:46.460
> 
> 标签：android, google-maps, api-key

就我的一般知识而言，我只是想知道 Android 上 Google 地图的 API 密钥的用途是什么。我猜它允许谷歌阻止滥用他们的 API，但它是它的唯一目的吗？它对开发人员有意义吗？最后，为什么在 iOS 上使用 Google Maps API 不需要 API 密钥？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:51:01.140

这是它的文档： [获取 Google Maps Android API 密钥](https://developers.google.com/maps/documentation/android/mapkey)

> “MapView 对象是显示从谷歌地图服务下载的地图图块的视图。为确保应用程序以适当的方式使用地图数据，谷歌地图服务要求应用程序开发人员注册该服务，同意服务条款并提供他们将用于签署应用程序的证书的 MD5 指纹。”

基本上是让开发人员对滥用负责。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-01T04:12:23.070

此外，为了让各自的公司/开发商对任何滥用负责，谷歌会跟踪特定应用程序加载了多少地图。初次使用是免费的。固定号码后。服务，它向公司收取一定的费用。

# ios - PhoneGap iOS App 配置菜单

> ID：11829522
> 
> 赞同：1
> 
> 时间：2012-08-06T13:43:57.107
> 
> 标签：ios, cordova

我已经使用 PhoneGap 为 iPad 创建了一个应用程序，我想为该应用程序创建一个配置菜单。对于 iOS 应用程序，可以让 iOS 创建该界面（它将位于***应用程序***部分下的设置中），就像 Skype、Talking Tom 应用程序使用的一样。

所以我想做同样的事情，考虑到我正在使用phonegap而不是Objective-C进行开发，但如果需要我也可以做一些objective-c让它工作。

非常感谢您花时间阅读和/或回答:)

最好的祝福。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:44:28.780

您可以使用[NSUserDefaults](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)类来访问用户使用您的设置包设置的值：

```
NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];
NSInteger stars = [defaults integerForKey:@"numberOfStars"];
double velocity = [defaults doubleForKey:@"shipVelocity"]; 
```

等等。我不知道有一个PhoneGap 插件可以让您的JavaScript 使用用户首选项，但是一旦您知道如何访问Objective-C 中的设置，您应该能够将该数据提供给您的脚本。

# .htaccess - 需要在请求结束时将 .html 页面重定向到自身而无需文件类型 (html) (htaccess)

> ID：11829524
> 
> 赞同：0
> 
> 时间：2012-08-06T13:44:09.403
> 
> 标签：.htaccess, redirect

`site.com/some_page.html`好吧，我需要我的页面在地址上可用：`site.com/some_page/` 解决方案是：

```
RewriteEngine on
RewriteRule ^(.*)/$|!^(.*)/(.*)\.css$ $1.html 
```

但是有一个问题，单个页面在两个请求中都可以作为两个不同的页面使用。如何使用 301 重定向重定向`site.com/some_page.html`到？`site.com/some_page/`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T15:24:44.877

使用 mod_alias

```
RedirectMatch 301 ^/some_page\.html$ /some_page/ 
```

或使用 mod_rewrite

```
RewriteRule ^/?some_page\.html$ /some_page/ [R=301,L] 
```

# javascript - 在 jQuery .load Ajax 之后执行 if 语句

> ID：11829525
> 
> 赞同：2
> 
> 时间：2012-08-06T13:44:12.123
> 
> 标签：javascript, jquery, ajax, if-statement, load

我正在使用 jQuery .load() 从数据库中获取信息。在将信息加载到 div 之前，我想使用 if 语句检查内容。

例如：（ajax 将返回 1）

```
$('div.status').load("../files/ajax-calls.php?type=validatePerformer&performerId=265486");

if($('div.status').text() == 1){
  alert("ajax input checked, value = 1");
}else{
  return false;
} 
```

我不知道是否可以通过这种方式检查传入的 ajax 变量，因为 jQuery 将这些直接写入 DOM。

我正在寻找的解决方案看起来像这样（我知道这不是正确的编码，只是为了给出一个想法）

```
 var ajaxResult = $('div.status').load("../files/ajax-calls.php?type=validatePerformer&performerId=265486");

    if($(ajaxResult) == 1){
      $('div.status').text(ajaxResult);
    }else{
      return false;
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:45:48.310

您可以将回调传递给`.load`函数...

```
$('div.status')
    .load("../files/ajax-calls.php?type=validatePerformer&performerId=265486",
          function() { alert("complete"); }) 
```

...但它不会阻止 jQuery 插入新内容，因为这是在回调发生之前完成的。

* * *

要根据条件手动插入，您可能应该`$.get`改用。

```
$.get("../files/ajax-calls.php?type=validatePerformer&performerId=265486",
      function(ajaxResult) {
          if(ajaxResult == 1)
             $('div.status').text(ajaxResult);
      }); 
```

# jsrender - jsRender 循环一个列表

> ID：11829526
> 
> 赞同：10
> 
> 时间：2012-08-06T13:44:18.107
> 
> 标签：jsrender

关于 {{for}} 循环的问题`jsRender`。

该演示显示我们可以遍历复杂对象的集合并显示它们的属性：

```
{{for languages}}
    <div>
        <em>{{>name}}</em>
    </div>
{{/for}} 
```

但是，如果 my`languages`只是 a`List<string>`怎么办？将不会`{{>name}}`显示。我们如何引用单个字符串值？

谢谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-08-22T14:03:25.913

```
{{#data}} 
```

没有为我工作。

有些东西似乎已经改变了，这就是为我所做的：

```
{{>#data}} 
```

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-08-06T16:07:35.383

您应该能够使用`#data`来访问循环内的各个字符串值。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-03-08T22:57:18.540

**你应该使用：**

`{{>#data}}`或`{{>}}`- （编码 HTML）

`{{:#data}}`或`{{:}}`- （非 HTML）

**例如：**

假设您的`languages`对象如下所示：

`var languages = ['en', 'sp', 'zh'];`

```
{{for languages}}
    <div>
        <em>{{>}}</em>
    </div>
{{/for}} 
```

**将导致：**

```
<div>
   <em>en</em>
</div>
<div>
   <em>sp</em>
</div>
<div>
   <em>zh</em>
</div> 
```

* * *

**文档**

[＃数据](https://www.jsviews.com/#viewobject@data)

[`:`和之间的区别`>`](https://www.jsviews.com/#htmltag)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-07-22T04:16:13.283

另外，如果你想做一些比较，你可以使用如下代码：

```
{{if #data == 'xxx' || #data == 'yyy'}}
...
{{/if}} 
```

在脚本中。

# .net - TCP NAT-Traversal /- 使用 .NET 打孔

> ID：11829527
> 
> 赞同：1
> 
> 时间：2012-08-06T13:44:18.663
> 
> 标签：.net, tcp, connection, nat, nat-traversal

我编写了一个应用程序，其中必须将客户端直接相互连接并保持连接。在使用高级技术（谷歌）进行一些研究后，我发现我需要的可以通过 NAT-Punching 或 NAT-Traversal 来实现。

大多数人似乎通过 UDP 使用 NAT-Punching，但在我的情况下，我需要使用 TCP 来执行此操作（这是事实，在有人问“为什么不使用 UDP？”之前）并且我找不到任何示例代码这个或至少是一个适当的教程。我所能找到的只是理论上的附件，但没有 Sockets 或 TCPClients（我更喜欢套接字。）。

有人可以链接我一些示例代码，我可以使用这些示例代码连接 NAT 后面的两个客户端，或者将我链接到带有示例代码的完整教程吗？我知道这个目标在 .NET 中很难实现（我使用的是 VB.NET，但我也能够阅读和理解 C#），但它应该是可能的。

UPnP 不是一个选项，因为一些 NAT 出于安全原因将其停用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:20:44.347

除非您可以访问原始套接字，否则无法通过 TCP 完成 NAT 穿孔。您需要对序列号和 TTL 值进行一些技巧和操作才能使其正常工作。但是，在 Windows 中，由于滥用原始套接字传播或执行 DDoS 的恶意软件数量庞大，在 XP SP2 之后的所有 Windows 版本上的非服务器版本的操作系统上都不允许使用原始套接字。

您执行以下操作之一：

1.  使用 UDP，输入代码以重新请求丢失的数据包或重构代码以处理丢失的数据包（如果可以接受的话）。
2.  使用服务器作为中间人进行流式传输
3.  其中一个末端必须能够制作原始插座。

# sql - SQL Server - [SELECT] 是否锁定 [UPDATE]？

> ID：11829529
> 
> 赞同：9
> 
> 时间：2012-08-06T13:44:21.437
> 
> 标签：sql, sql-server, performance, sql-server-2005, locking

我有一个复杂的选择查询和一个巨大的表。

我正在运行这个`select`语句，同时有一个`Update`语句到达并尝试*更新*表。

恕我直言-更新需要*排他*锁-因此更新语句必须*等到*选择命令完成。

1.  我对吗 ？

2.  我该怎么做才能：执行复杂的`select`，**并**让`update`命令运行（*目前我不关心脏数据*）

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-06T13:47:02.013

是的——在一定程度上。

持有`SELECT`共享锁的时间取决于事务的隔离级别：

*   `READ UNCOMMITTED`- 根本没有获取共享锁 -`UPDATE`没有被阻塞
*   `READ COMMITTED`- 仅在读取数据期间获取共享锁 -`UPDATE`可能会在很短的时间内被阻塞
*   `REPEATABLE READ`并且`SERIALIZABLE`- 获取共享锁并保持到事务结束 -`UPDATE`阻塞直到`SELECT`事务结束

从技术上讲，该`UPDATE`语句首先在读取要更新的行的当前值期间获得一个`UPDATE`锁——它与共享锁（由 使用）兼容。`SELECT`

完成后，`Update`锁将升级为独占锁，以便将新数据写入表中。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-08-06T14:03:57.147

当您同时运行这两个语句（SELECT 和 UPDATE）时，实际行为基本上是随机的。这是因为这两个操作都不是瞬时的。为简化起见，将您的表视为一个列表，并且 SELECT 遍历此列表，一次查看一行。UPDATE 也在尝试更新一行或多行。当 UPDATE 尝试更新SELECT*后面*的行时，没有任何反应（没有阻塞），因为 SELECT 已经超过了 UPDATE 点。如果 UPDATE 正在尝试更新 SELECT*现在*正在查看的行，则 UPDATE 将不得不等待 SELECT 继续前进，这将非常非常快地发生并且 UPDATE 将解除阻塞并成功，*而*SELECT 正在向前推进。但是，如果 UPDATE在 SELECT*之前*更新一行，则更新将成功，*稍后*， SELECT 最终将准确到达该行并将停止，阻塞。现在 SELECT 必须等到*执行 UPDATE 的事务提交*。

这是简化的故事。现实生活要复杂得多。SELECT 可以有*多个*读取点（并行计划）。SELECT 和 UPDATE 都需要选择访问路径，这意味着使用一个或多个二级索引来定位行。复杂查询可能包含导致对表进行多次查找的运算符（例如连接）。SELECT 和 UPDATE 都可以进行书签查找以获取 BLOB 数据，这显着改变了锁定行为。基数估计可能会导致 SELECT 以高粒度锁模式运行（例如，表级共享锁）。UPDATE 可以触发锁升级，升级可以失败也可以成功。[选择不同的访问路径会导致死锁](http://rusanu.com/2009/05/16/readwrite-deadlock/)。[由于散列冲突，可能会发生假锁争用](http://rusanu.com/2009/05/29/lockres-collision-probability-magic-marker-16777215/). 只有无数个变量对此有发言权。而且我什至没有提到更高的隔离级别（可重复读取，可序列化）。

也许您应该使用[SNAPSHOT](http://msdn.microsoft.com/en-us/library/ms177404%28v=sql.105%29)隔离并停止担心这个问题？

# ruby-on-rails - Rails 3 form mongodb如何创建具有关联的新项目

> ID：11829531
> 
> 赞同：0
> 
> 时间：2012-08-06T13:44:29.660
> 
> 标签：ruby-on-rails, mongodb, model

```
类电子贺卡
  包括 MongoMapper::Document

  键：家庭，字符串
  键：给定，字符串
  键：附加，字符串
  键：前缀，字符串
  键：后缀，字符串

  has_many : 电子邮件

结尾

班级邮箱
  包括 MongoMapper::EmbeddedDocument

  键：pref，布尔值
  键：电子邮件，字符串

结尾
```

在电子贺卡控制器中

```
定义新
    @ecard = Ecard.new

    respond_to 做 |格式|
      format.html # new.html.erb
      format.json { 渲染 json: @ecard }
    结尾
  结尾

```

并以我的形式

```
<%= form_for(@ecard) do |f| %>

<%= f.label t :family, :scope => :name  %><br />
<%= f.text_field :family %><br />

<%= @ecard.emails.each do |email| %>
    <%= f.fields_for email, :index => email do |e| %>
        <%= e.label :pref %>
        <%= e.check_box :pref %>
        <%= e.label :email %>
        <%= e.text_field :email %>
    <% end %>
  <% end %>
 <% end %> 
```

如何创建一个新的电子邮件嵌套资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:45:53.650

虽然 mongomapper 不支持“accepts_nested_attributes_for”，但以下适用于我的 rails 3.2.7、mongo_mapper 0.11.2、mongo 1.6.4、bson 1.6.4。经常参考“rake routes”直到路由正确，即url_for，控制器方法等。请注意email.id的隐藏字段和带有路由的按钮以创建新的电子邮件项。这仅适用于嵌入式关联中的新项目（您可以完成放置/更新）。希望这可以帮助您继续前进。

-加里

应用程序/控制器/ecards_controller.rb

```
class EcardsController < ApplicationController
  def new
    @ecard = Ecard.create
    respond_to do |format|
      format.html { render :template => 'ecards/show' }
      format.json { render json: @ecard }
    end
  end

  def show
    @ecard = Ecard.find(params[:id])
    respond_to do |format|
      format.html { render :template => 'ecards/show' }
      format.json { render json: @ecard }
    end
  end

end 
```

应用程序/控制器/emails_controller.rb

```
class EmailsController < ApplicationController
  def new
    @ecard = Ecard.find(params[:ecard_id])
    @ecard.emails << Email.new
    @ecard.save
    respond_to do |format|
      format.html { render :template => 'ecards/show' }
      format.json { render json: @ecard }
    end
  end
end 
```

app/views/ecards/show.html.erb

```
<%= form_for(@ecard) do |f| %>

    <%= f.label :family, :scope => :name %><br />
    <%= f.text_field :family %><br />

    <% @ecard.emails.each do |email| %>
        <%= f.fields_for email, :index => email do |e| %>
            <%= e.hidden_field :id, :value => email.id %>
            <%= e.label :pref %>
            <%= e.check_box :pref %>
            <%= e.label :email %>
            <%= e.text_field :email %>
            <br/>
        <% end %>
    <% end %>

<% end %>
<%= button_to 'New Email', url_for([:new, @ecard, :email]), :method => :get %> 
```

配置/路由.rb

```
resources :ecards do
    resources :emails
end 
```

# mysql - mysql使用单个组按列组合来自不同表的数据

> ID：11829532
> 
> 赞同：0
> 
> 时间：2012-08-06T13:44:30.883
> 
> 标签：mysql, group-by, sum, inner-join

这里我有下面 6 个表。我想按**tax%**列获取**invoicetotal**和**debittotal**组

 **```
invoices
--------
inv_id      col2    col3 
1           xxx     xxx

invoice_ps
-----------
inv_fkid    ps_fkid
1             2
1             3
1             5

packing_slips
--------
ps_id   col2    col3 
1        xxx     xxx
2        xxx     xxx 
3        xxx     xxx 
4        xxx     xxx 
....

debits
--------
db_id   col2    col3 
1       xxx      xxx

debit_ps
-----------
db_fkid     ps_fkid
1               4
1               7
1               6

transfers
---------
ps_fkid     tax   mrp   qty
2           0%    15    10
3           15%   10    5
4           5%    20    6
5           15%   15    2
7           0%    6     3 
```

我可以从中得到发票总额

```
// Invoices
SELECT tax, SUM(mrp * qty) AS Total FROM invoices i
INNER JOIN invoice_ps inv_ps ON inv_ps.inv_fkid = i.inv_id
INNER JOIN transfers ts ON ts.ps_fkid = inv_ps.ps_fkid
GROUP BY tax 
```

和借方总额

```
// Debits
SELECT tax, SUM(mrp * qty) AS Total FROM debits d
INNER JOIN debit_ps db_ps ON db_ps.db_fkid = d.db_id
INNER JOIN transfers ts ON ts.ps_fkid = db_ps.ps_fkid
GROUP BY tax 
```

我如何结合上述 2 个查询来获得税收结果，如下所示

```
tax      invoicetotal - debittotal
0%               xxxx        
5%               xxxx        
15%              xxxx 
```

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:51:19.803

像这样的东西会起作用

```
 SELECT tax, 
    SUM(case when tag='inv' then mrp * qty else 0 end) AS InvoiceTotal,
    SUM(case when tag='deb' then mrp * qty else 0 end) AS DebitTotal FROM 
  (
  select 'inv' as tag , col_list from invoices 
  union all
  select 'deb' as tag , col_list from debit
  ) as i 
INNER JOIN invoice_ps inv_ps ON inv_ps.inv_fkid = i.inv_id 
INNER JOIN transfers ts ON ts.ps_fkid = inv_ps.ps_fkid 
GROUP BY tax 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:45:42.460

希望以下查询为您提供所需的输出。

```
SELECT 
  IF(dtax IS NOT NULL, dtax, itax) tax, dtotal, itotal 
FROM
  (SELECT tax dtax, SUM(mrp * qty) AS dTotal 
  FROM debits d 
    INNER JOIN debits_ps db_ps ON db_ps.db_fkid = d.db_id 
    INNER JOIN transfers ts ON ts.ps_fkid = db_ps.ps_fkid 
  GROUP BY tax) a 
  LEFT JOIN 
    (SELECT tax itax, SUM(mrp * qty) AS iTotal 
    FROM invoices i 
      INNER JOIN invoice_ps inv_ps ON inv_ps.inv_fkid = i.inv_id 
      INNER JOIN transfers ts ON ts.ps_fkid = inv_ps.ps_fkid 
    GROUP BY tax) b 
    ON dtax = itax 
UNION
SELECT 
  IF(dtax IS NOT NULL, dtax, itax) tax, dtotal, itotal 
FROM
  (SELECT tax dtax, SUM(mrp * qty) AS dTotal 
  FROM debits d 
    INNER JOIN debits_ps db_ps ON db_ps.db_fkid = d.db_id 
    INNER JOIN transfers ts ON ts.ps_fkid = db_ps.ps_fkid 
  GROUP BY tax) a 
  RIGHT JOIN 
    (SELECT tax itax, SUM(mrp * qty) AS iTotal 
    FROM invoices i 
      INNER JOIN invoice_ps inv_ps ON inv_ps.inv_fkid = i.inv_id 
      INNER JOIN transfers ts ON ts.ps_fkid = inv_ps.ps_fkid 
    GROUP BY tax) b 
    ON dtax = itax 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T16:09:12.280

```
 Actually we can avoid IF condition in the query. 

    SELECT 
      dtax, dtotal, itotal 
    FROM
      (SELECT tax dtax, SUM(mrp * qty) AS dTotal 
      FROM debits d 
        INNER JOIN debits_ps db_ps ON db_ps.db_fkid = d.db_id 
        INNER JOIN transfers ts ON ts.ps_fkid = db_ps.ps_fkid 
      GROUP BY tax) a 
      LEFT JOIN 
        (SELECT tax itax, SUM(mrp * qty) AS iTotal 
        FROM invoices i 
          INNER JOIN invoice_ps inv_ps ON inv_ps.inv_fkid = i.inv_id 
          INNER JOIN transfers ts ON ts.ps_fkid = inv_ps.ps_fkid 
        GROUP BY tax) b 
        ON dtax = itax 
    UNION
    SELECT 
      itax, dtotal, itotal
    FROM
      (SELECT tax dtax, SUM(mrp * qty) AS dTotal 
      FROM debits d 
        INNER JOIN debits_ps db_ps ON db_ps.db_fkid = d.db_id 
        INNER JOIN transfers ts ON ts.ps_fkid = db_ps.ps_fkid 
      GROUP BY tax) a 
      RIGHT JOIN 
        (SELECT tax itax, SUM(mrp * qty) AS iTotal 
        FROM invoices i 
          INNER JOIN invoice_ps inv_ps ON inv_ps.inv_fkid = i.inv_id 
          INNER JOIN transfers ts ON ts.ps_fkid = inv_ps.ps_fkid 
        GROUP BY tax) b 
        ON dtax = itax

    Jane, we need to play around with left / right joins and the two main queries ( Invoices and Debits ). 
    Will take the below data for example. 
    Debits - Output of Debits query
    +------+--------+
    | dtax | dTotal |
    +------+--------+
    | 0%   |     18 |
    | 5%   |    120 |
    +------+--------+
    Invoices  - Output of Invoices query
    +------+--------+
    | itax | iTotal |
    +------+--------+
    | 0%   |    150 |
    | 15%  |     80 |
    +------+--------+

    Debits Left join with Invoices gives you all the tax wise debits and their matching invoices.
    +------+--------+--------+
    | dtax | dtotal | itotal |
    +------+--------+--------+
    | 0%   |     18 |    150 |
    | 5%   |    120 |   NULL |
    +------+--------+--------+

    Debits Right join with Invoices will give you all the tax wise invoices and their matching debits.
    +------+--------+--------+
    | itax | dtotal | itotal |
    +------+--------+--------+
    | 0%   |     18 |    150 |
    | 15%  |   NULL |     80 |
    +------+--------+--------+

    UNION is used to combine these two results into unique records. i.e duplicate records are removed.
    +------+--------+--------+
    | dtax | dtotal | itotal |
    +------+--------+--------+
    | 0%   |     18 |    150 |
    | 5%   |    120 |   NULL |
    | 15%  |   NULL |     80 |
    +------+--------+--------+
    NOTE: If you use UNION ALL, the duplicate records will not be removed. Just try with UNION ALL. You can find the difference. 

Query to find tax wise invoice-debit : 
    select dtax, if(itotal is null, 0, itotal)-if(dtotal is null, 0, dtotal) as `invoice-debit` from (SELECT dtax, dtotal, itotal FROM (SELECT tax dtax, SUM(mrp * qty) AS dTotal FROM debits d INNER JOIN debits_ps db_ps ON db_ps.db_fkid = d.db_id INNER JOIN transfers ts ON ts.ps_fkid = db_ps.ps_fkid GROUP BY tax) a LEFT JOIN (SELECT tax itax, SUM(mrp * qty) AS iTotal FROM invoices i INNER JOIN invoice_ps inv_ps ON inv_ps.inv_fkid = i.inv_id INNER JOIN transfers ts ON ts.ps_fkid = inv_ps.ps_fkid GROUP BY tax) b ON dtax = itax UNION SELECT itax, dtotal, itotal FROM (SELECT tax dtax, SUM(mrp * qty) AS dTotal FROM debits d INNER JOIN debits_ps db_ps ON db_ps.db_fkid = d.db_id INNER JOIN transfers ts ON ts.ps_fkid = db_ps.ps_fkid GROUP BY tax) a RIGHT JOIN (SELECT tax itax, SUM(mrp * qty) AS iTotal FROM invoices i INNER JOIN invoice_ps inv_ps ON inv_ps.inv_fkid = i.inv_id INNER JOIN transfers ts ON ts.ps_fkid = inv_ps.ps_fkid GROUP BY tax) b ON dtax = itax) x;

You need to use UNION to combine the records. Otherwise you will not get both invoice and debits. 
```**

# javascript - HTML5 FileReader 如何返回结果？

> ID：11829537
> 
> 赞同：36
> 
> 时间：2012-08-06T13:44:53.127
> 
> 标签：javascript, html, filereader

我使用 JS FileReader。我想在文件读取操作后得到结果并使用这些数据。FileReader 是异步的，我不知道何时准备好结果。如何正确完成？

```
$(document).ready(function(){
    $('#file_input').on('change', function(e){
        var res = readFile(this.files[0]);

        //my some manipulate with res

        $('#output_field').text(res);
    });
});

function readFile(file){
    var reader = new FileReader(),
        result = 'empty';

    reader.onload = function(e)
    {
        result = e.target.result;
    };

    reader.readAsText(file);

    //waiting until result is empty?

    return result;
} 
```

[http://jsfiddle.net/ub22m/4/](http://jsfiddle.net/ub22m/4/)

它显示“空”。

如何等到“结果”为空？其他方式？

* * *

## 回答 #1

> 赞同：56
> 
> 时间：2012-08-06T14:18:46.177

读取是*异步*发生的。您需要提供一个自定义`onload`回调来定义读取完成时应该发生的情况：

```
$(document).ready(function(){
    $('#file_input').on('change', function(e){
        readFile(this.files[0], function(e) {
            // use result in callback...
            $('#output_field').text(e.target.result);
        });
    });
});

function readFile(file, onLoadCallback){
    var reader = new FileReader();
    reader.onload = onLoadCallback;
    reader.readAsText(file);
} 
```

（见[小提琴](http://jsfiddle.net/PkRpW/)。）

注意`readFile`不返回值。相反，它接受一个回调函数，该函数会在读取完成时触发。`$('#output_field').text`操作被移到回调函数中。`onload`这确保了该操作在读取器的回调触发之前不会运行，何时`e.target.result`会被填充。

一开始使用回调进行编程有点困难，但对于实现高级功能来说，这是绝对必要的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-27T21:58:54.487

使用 Promise 包装 FileReader，然后使用`await`来获取结果：

[https://blog.shovonhasan.com/using-promises-with-filereader/](https://blog.shovonhasan.com/using-promises-with-filereader/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T14:12:58.667

这是javascript：

```
$(document).ready(function() {
    $('#file_input').on('change', function(e) {

        function updateProgress(evt) {
            if (evt.lengthComputable) {
                // evt.loaded and evt.total are ProgressEvent properties
                var loaded = (evt.loaded / evt.total);
                if (loaded < 1) {
                    // Increase the prog bar length
                    style.width = (loaded * 200) + "px";
                }
            }
        }

        function loaded(evt) {
            // Obtain the read file data    
            var fileString = evt.target.result;
            // Handle UTF-16 file dump
            $('#output_field').text(fileString);
        }
        var res = readFile(this.files[0]);

        var reader = new FileReader();

        reader.readAsText(this.files[0], "UTF-8");

        reader.onprogress = updateProgress;
        reader.onload = loaded;

    });
});

function readFile(file) {
    var reader = new FileReader(),
        result = 'empty';

    reader.onload = function(e) {
        result = e.target.result;
    };

    reader.readAsText(file);

    return result;
} 
```

当然，HTML 部分：

```
<input type="file" id="file_input" class="foo" />
<div id="progBar" style="background-color:black;width:1px;"> </div>
<div id="output_field" class="foo"></div> 
```

似乎适用于 *.txt 文件。

[看到这个小提琴](http://jsfiddle.net/adouga/8yswa/)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-02-19T10:30:03.433

**用例文件读取器**

```
<html>
    <head>
        <link rel="stylesheet" href="http://code.jquery.com/ui/1.11.3/themes/smoothness/jquery-ui.css">
        <script src="http://code.jquery.com/jquery-1.10.2.js"></script>
        <script src="http://code.jquery.com/ui/1.11.3/jquery-ui.js"></script>
    </head>
    <body>
        <script>
            function PreviewImage() {
            var oFReader = new FileReader();
            oFReader.readAsDataURL(document.getElementById("uploadImage").files[0]);
            oFReader.onload = function (oFREvent) {
                var sizef = document.getElementById('uploadImage').files[0].size;
                document.getElementById("uploadPreview").src = oFREvent.target.result;
                document.getElementById("uploadImageValue").value = oFREvent.target.result; 
            };
        };
        jQuery(document).ready(function(){
            $('#viewSource').click(function ()
            {
                var imgUrl = $('#uploadImageValue').val();
                alert(imgUrl);
            });
        });
        </script>
        <div>
            <input type="hidden" id="uploadImageValue" name="uploadImageValue" value="" />
            <img id="uploadPreview" style="width: 150px; height: 150px;" /><br />
            <input id="uploadImage" style="width:120px" type="file" size="10" accept="image/jpeg,image/gif, image/png" name="myPhoto" onchange="PreviewImage();" />
        </div>
        <a href="#" id="viewSource">Source file</a>
    </body>
</html> 
```

# c++ - 使用 C++ 获取默认的 Windows 文本编辑器 .exe 路径

> ID：11829541
> 
> 赞同：0
> 
> 时间：2012-08-06T13:44:58.127
> 
> 标签：c++, default-programs

只是想知道如何获取默认的 Windows 文本编辑器 .exe 路径 c++。我非常需要这个来改进我的一项 C++ 作业。我不知道该怎么做。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:54:03.403

如果您需要它来打开文件，那么您可以使用[`ShellExecute`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762153%28v=vs.85%29.aspx)（`edit`或`open`）动词来完成所有操作，否则您可以使用它[`SHAssocEnumHandlers`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb762109%28v=vs.85%29.aspx)来获取您感兴趣的基于文本的文件的处理程序。

在最简单的情况下，您还可以使用`%windir%\\notepad.exe`which will link to notepad 在任何桌面版本的 Windows 上。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:40:26.177

通常的方法是使用[`FindExecutable`](http://msdn.microsoft.com/en-us/library/windows/desktop/bb776419.aspx).

# c# - 如何使我的自定义文件类型可升级？

> ID：11829542
> 
> 赞同：0
> 
> 时间：2012-08-06T13:44:58.420
> 
> 标签：c#, file, .net-4.0

我有一个与我的应用程序关联的自定义文件类型，我通过简单地将类实例序列化到文件来保存它。

我希望能够通过向类添加更多属性来升级我的应用程序，也许还可以删除属性。我怎样才能让旧版本的应用程序与新文件一起使用——无论它可以得到什么，更重要的是，我怎样才能让新版本的应用程序使用旧文件？有没有实现这个目标的通用做法？

我在第一个版本发布*之前*问这个问题- 如何使文件类型易于升级？

（谷歌搜索遇到了很多“噪音”。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T11:39:52.343

我认为有两种方法

*   您可以使用yogi 提到的诸如[版本容忍序列化之类的东西](http://msdn.microsoft.com/en-us/library/ms229752%28v=vs.80%29.aspx)
*   或者您可以转换为新格式 - Visual Studio、Royal TS 和我认为更多的可以执行以下操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:56:43.500

也许您应该查看 Protocol Buffers 的 C# 实现。它是由 google (http://code.google.com/p/protobuf-net/) 开发的一种序列化类型，它使用 id 进行属性识别。因此，您序列化的数据不受属性名称等绑定。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:57:43.363

正如您在第一个版本发布之前所问的那样，我及时告诉您：从长远来看，您不会对 BinaryFormatter 感到满意。**我认为您应该将存储对象模型与“操作对象”分开。**

仅序列化程序的运行时状态是一种简单的序列化方法，但它可以防止再次对这些对象进行重大*更改*。

我认为 proto-buf 很好，因为版本控制路径非常清晰。此外，XmlSerializer 序列化类也很好，因为它们是可读的。

# windows-phone-7 - 在 Blend 中编辑数据模板

> ID：11829544
> 
> 赞同：3
> 
> 时间：2012-08-06T13:45:18.623
> 
> 标签：windows-phone-7, xaml, expression-blend

我正在使用 DataTemplate 将列表绑定到 ListView：

```
<UserControl.Resources>
        <DataTemplate x:Key="eventsListItemTemplate">
            <StackPanel Orientation="Vertical" 
                Margin="50"
                Background="#007F7F7F">
                <StackPanel Orientation="Horizontal">
                    <Image Source="/MobileCRM;component/Resources/Images/MenuIcons/icon.png"
                            Height="40"
                            Width="40"/>
                    <TextBlock Text="{Binding Title}"/>
                </StackPanel>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="Utworzono: " FontWeight="Bold"/>
                    <TextBlock Text="{Binding CreationDate}"/>
                </StackPanel>
            </StackPanel>
        </DataTemplate>
    </UserControl.Resources> 
```

我这样做：

```
<ListBox x:Name="EventsList" ItemsSource="{Binding}"
                ItemTemplate="{StaticResource eventsListItemTemplate}" Background="#007F7F7F" SelectionChanged="EventsList_SelectionChanged" /> 
```

问题是我想使用 Blend 来编辑这个模板，而不是手动编辑 xaml，但是我不知道如何在 Blend 中打开这个模板。可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:30:10.033

以下是步骤：

1.  在 Blend 中打开您的项目
2.  在左侧找到对象和时间线
3.  在项目树中找到您的 ListBox
4.  右键单击它
5.  编辑其他模板 -> 编辑生成的项目 (ItemTemplate) -> 编辑当前
6.  按下右上角的圆圈按钮，将显示设计器

![在此处输入图像描述](../Images/c100b851cab99f6b687fa11703366777.png)

# php - 如何使用 preg_match() 提取文本？

> ID：11829545
> 
> 赞同：0
> 
> 时间：2012-08-06T13:45:20.113
> 
> 标签：php, preg-match

> **可能重复：**
> [如何使用 PHP 解析和处理 HTML？](https://stackoverflow.com/questions/3577641/how-to-parse-and-process-html-with-php)

我将以下文本存储在变量中`$new`

```
<div class="img">
<span style="float:left; color:#666;">1.&nbsp;&nbsp;</span>
<a href="/Books/info/J-R-R-Tolkien/The-Lord-of-the-Rings/0618640150.html?utm_term=lord+of+the+ring_1_1">
<img src="http://cdn-img-b-tata.infibeam.net/img/6a53fabc/157/0/9780618640157.jpg?wid=90&hei=113" width="90" height="113" border="0">
</a>
</div>
<span class="title">
<h2 class="simple"><a href="/Books/info/J-R-R-Tolkien/The-Lord-of-the-Rings/0618640150.html?utm_term=lord+of+the+ring_1_1"><em>Lord</em> of the <em>Rings</em></a></h2>
&nbsp;By
<a href="/Books/search?author=J R R Tolkien" style="font-size:12px; text-decoration:none;">J R R Tolkien</a>
<span style="color:#666666; font-size:11px;">[Paperback 2005, 50th Edition]</span>
</span>
<div class="price" style="line-height:30px;margin-top:0px;"> 
```

我必须提取从`1.&nbsp`to开始的文本`<div`。我已经尝试了所有可能的解决方案，但没有成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:47:52.333

这应该工作

```
$ret = preg_replace ("#1\.&nbsp(.+)<div#isU", "$1", $new); 
```

$new 包含你所有的 html。
尽管如此，正则表达式并不是实现您想要的唯一方法，尤其不是最好的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:55:29.600

简单的答案是：**你不知道。曾经。**HTML 不是正则语言，因此正则表达式**CAN NOT PARSE HTML**。您需要使用php 作为[DOM](http://php.net/manual/en/book.dom.php)存在的*HTML 解析器*。

有关为什么正则表达式不适用于 HTML 的更多信息，请阅读[此线程](https://stackoverflow.com/a/1732454/1338999)。小马。他来了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:52:49.587

如果这真的是所有代码，这就足够了

```
strip_tags($html); 
```

# android - 什么时候最好不要使用Phonegap？

> ID：11829551
> 
> 赞同：32
> 
> 时间：2012-08-06T13:45:46.537
> 
> 标签：android, ios, wcf, cordova

我计划为多个操作系统（包括 Android、IOS、WindowsPhone）开发一个移动应用程序（我的第一个）——在狂野的互联网上，我发现了一个名为 phonegap 的框架，作为最小化开发过程的一种可能的解决方案。我了解 phonegap 的优势 - 但找不到真正的缺点... **1.) 所以问题是为什么我不应该使用 phonegap？**

**2.) phonegap 是否只是更慢，因为它被包裹在操作系统中，如果是的话，慢了多少？**我的意思是你真的能分辨出原生应用程序和 phonegap 之间的区别，还是只有在你需要硬件加速（例如游戏）时才会更慢？

有关该项目的更多信息。目前我有几个“.Net”服务和提供者，通过 WCF 进行通信。应用程序应该能够从服务接收和发送视频流和音频数据，就像提供者那样。

**3.）是否可以为此使用phonegap，还是我应该坚持使用本机应用程序？**

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-08-06T13:59:37.213

所有跨平台框架（包括 HTML）通常都具有相同的优点和缺点。

**优点：**

*   编写一次在每个目标平台上都可以正常工作的代码。

**缺点：**

*   它的工作方式通常不是那么美妙。
*   通常性能低于本机实现。
*   有些还有自己的小部件集，看起来不合适。
*   由于各个平台的怪癖，您仍然必须到处进行测试。
*   您可以获得对功能的最低公分母访问权限。当支持原生特性时，通常只能通过一种方式访问​​它：可移植框架的方式。这有时与目标平台的首选方式不一致。
*   如果您可以访问目标平台独有的功能，您将失去到处运行的可移植性。
*   每个所谓的“跨平台”框架本身就是一个平台。请参阅前面关于怪癖的观点：现在，您不必知道 N 个平台，而必须知道 N+1。

为了获得针对多个平台的最佳结果，我建议以下内容：

使用定义明确的 API 清晰地设计您的核心逻辑（不使用任何 UI 的部分）。使其足够通用，以便在环境之间相当容易地移植。（SQLite 在 Objective C 和 Java 中真的有那么不同吗？）

按照目标平台的最佳实践设计您的 UI，使其在每个平台上看起来都很棒（并且适合）。（对于 Android，请参阅[http://developer.android.com/design](http://developer.android.com/design)）让 UI 通过您创建的 API 与核心逻辑进行交互。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2012-08-06T13:53:50.133

我已经开发了本地和 HTML 包装器，如 Phonegap。虽然 Phonegap 可以很好地减少使用 2-3 种不同语言编写代码，并更改 2-3 种代码库，但如果您希望拥有一个人们想要使用棒原生的应用程序。我实际上只是在 Phonegap 中开发一个应用程序，并最终用本机代码重写了它，因为它还不足以达到预期。

虽然您的游戏或应用程序可能非常适合“用于 HTML 包装器应用程序”，但最终日常用户只会注意到加载和反应时间较慢，即使它们非常轻微。

IMO Phonegap 只能用于执行极少数据操作（显示和编辑）且没有进行密集处理的应用程序（即游戏）。

应用市场竞争异常激烈，你看到的所有顶级应用和游戏都是原生代码（它们是有原因的）。

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2012-10-29T00:10:27.763

Adobe 的 AIR 平台是 phonegap 的绝佳替代品，可用于随时随地部署而不是原生应用程序。它还具有出色的硬件加速功能。它包括一个 webkit 实现，因此您可以根据需要使用 web 标准，并且开源 apache flex 项目提供了很多。Flash builder是一个基于eclipse的优秀编码环境。除了游戏方面的巨大进步，我们可能很快也会看到更多数据驱动的 AIR 应用程序。As3 是面向对象的，非常好，再加上从用于动画的 flash pro 到 illustrator 和 Photoshop 的大量工具集是世界一流的。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-08-06T13:59:06.617

我在一家公司工作，该公司也需要每个应用程序制作所有可能的移动版本。真的，如果您需要使用特定类型的应用程序，例如无线电流、GPU 访问、相机过滤器或任何您可以命名的应用程序……请使用本地应用程序。

在我个人看来，电话差距真的很慢，即使在安卓上也是如此。我不知道是因为我使用 iOS，还是因为我有高标准。使用本机将始终为您的应用程序带来更高的质量。

我了解使用电话间隙来使事情变得更快，但前提是您要制作一个简单的移动应用程序……只有信息或某些表格要显示。

在硬件/软件方面，您会发现本地开发这些东西更容易。iOS 几乎为您提供一切。我不了解android，但也不应该那么复杂！

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-08-06T13:52:49.130

Phonegap 使用 WebViews，因此它是一个您正在构建并包装到本机容器中以将其部署到应用商店的网站。对于基本应用程序，如果您是 Web 开发人员，最好采用这种开发应用程序的方式，但如果您想拥有目标操作系统的全部优势和本机特性，则开发本机应用程序要好得多。希望有帮助。

# python - 如何仅打印 BeautifulSoup 值？

> ID：11829553
> 
> 赞同：2
> 
> 时间：2012-08-06T13:45:49.323
> 
> 标签：python, web-scraping, beautifulsoup, mechanize

我已经建立了一个带有 for 循环的网络爬虫。我不知道为什么，但它返回一个 url（这是我希望它返回的），然后在获取列表中的下一个 url 之前，它返回一个 NoneType 对象。除了使脚本变慢之外，这没什么大不了的，如果不是因为我不能让它打印比第一个 url 更多的内容。

```
from BeautifulSoup import BeautifulSoup
from mechanize import Browser
br = Browser()
page = br.open("https://bdkv2.borger.dk/foa/Sider/default.aspx?fk=22&foaid=11541520")
html = page.read()
soup = BeautifulSoup(html)
link = soup.findAll('a')
kommunelink = link[21:116]
for kommune in kommunelink:
    kommuneside = br.open(kommune['href'])
    html2 = kommuneside.read()
    soup2 = BeautifulSoup(html2)
    hjemmesidelink = soup2.find('a', id='_uscAncHomesite')
    print hjemmesidelink['href'] 
```

这样我的输出是这样的：

```
http://www.albertslund.dk

Traceback (most recent call last):
File "C:\Users\kba\Desktop\kommuneskraber.py", line 14, in <module>
print hjemmesidelink['href']
TypeError: 'NoneType' object has no attribute '__getitem__' 
```

我试过搞乱这样的东西：如果变量==特定类，然后打印，但这不起作用。例子：

```
If hjemmesidelink['href'] == <class 'BeautifulSoup.Tag'>:
    print hjemmesidelink['href']

if hjemmesidelink.class == BeautifulSoup.Tag:
    print hjemmesidelink['href'] 
```

知道应该怎么做吗？或者甚至更好，知道我的脚本在哪里/为什么每次迭代循环时都会获取一个“NoneType”对象吗？谢谢一堆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:33:12.717

这不是一个完整的答案，但是如果您查看评论，这将仅回答有关不产生错误的部分。

在这部分代码：

```
print hjemmesidelink['href'] 
```

用。。。来代替：

```
if hjemmesidelink:
    print hjemmesidelink['href'] 
```

检查`if hjemmesidelink:`是否`hjemmesidelink`有值，如果有，则打印它，如果没有，它将继续循环。

我的结果：

```
>>> 
http://www.albertslund.dk
http://www.alleroed.dk
http://www.assens.dk
http://www.ballerup.dk
http://www.billund.dk
http://www.brk.dk
http://www.brondby.dk
http://www.broenderslev.dk
http://www.dragoer.dk 
```

和计数。

# ms-access - 为什么会出现“条件表达式中的数据类型不匹配”？

> ID：11829554
> 
> 赞同：2
> 
> 时间：2012-08-06T13:46:00.813
> 
> 标签：ms-access

我对访问非常陌生（我通常将 MySQLi 与 Navicat 一起使用），我需要将 10 位 isbn 数字转换为 13 位。我有以下查询调用一个函数来执行此操作（我没有创建该函数，但它可以工作，并且我在执行其他查询时使用它）：

```
 SELECT ISBN1013([ISBN]) AS ISBN13, LastSoldDate AS LastSold, Id AS Sku, OnHand AS Quantity, Store 
FROM [Store Inventory]
WHERE (((ISBN1013([ISBN])) Like "##########?")); 
```

当我尝试运行它时，起初一切看起来都很好，然后我收到一条错误消息，指出：标准表达式中的数据类型不匹配。我试图在谷歌和这里查找这个，但我没有找到任何解释这个错误的东西。谁能帮我吗？

编辑：这里是信息如何开始以及最终应该如何查看的示例。

```
 0448431351 -> should end up as 9780448431352
 0736425543 -> should be 9780736425544 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:13:51.100

`NZ`尝试在 ISBN 字段周围放置一个函数：

```
SELECT NZ(ISBN1013([ISBN]),"") AS ISBN13 
```

这会将任何空值转换为空字符串。

如果这不起作用，请尝试`CStr`：

```
SELECT CStr(ISBN1013([ISBN])) AS ISBN13 
```

这会将任何非字符串值转换为字符串。我知道您说过您没有任何 null 值，但根据我的经验，即使您认为所有数据都符合预期格式，它也是有效的方法之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:26:23.753

我仍然不确定我对这个问题的理解程度，但既然你说没有该`WHERE`子句错误就会消失，让我们尝试不同的`WHERE`.

我的假设：

1.  您希望查询对`ISBN`包含 10 个数字字符的行进行操作。你所有的 10 个字符`ISBN`值都只包含数字。
2.  `ISBN`如果行由 10 个数字后跟一个字母组成，则查询还应该对具有 11 个字符值的行进行操作。

如果这些假设是正确的，请尝试使用类似于此（未经测试）版本的 WHERE 子句。

```
WHERE
    Len(ISBN) = 10
    OR (
           Len(ISBN) = 11
           AND ISBN ALike "%[a-z]"
       ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T15:26:24.893

你说你是 Access 的新手，所以我想我会澄清一下 HansUps 的评论。你能看一下 VBA 模块中的 ISBN1013() 函数吗？第一行应该是这样的：

```
Function ISBN1013(ISBN as string) as string 
```

你能检查一下这条线是否以'string'结尾而不是别的什么？

# data-structures - 从外部设备获取数据的数据结构

> ID：11829556
> 
> 赞同：0
> 
> 时间：2012-08-06T13:46:03.993
> 
> 标签：data-structures

我想创建一个程序来将数据从外部设备传输到计算机它应该先将数据保存在 RAM 中，然后永远保存它们。我必须使用什么数据结构？所有数据都是整数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T13:49:11.923

这取决于您计划对这些数据执行哪些操作，例如搜索项目、插入新项目、删除…不同的数据结构更适合不同的事务。一般来说，如果没有什么特别的要求 - 简单的数组就足够了。

# c# - 如何检测文件是否有 Unix 换行符 (\n) 或 Windows 换行符 (\r\n)？

> ID：11829559
> 
> 赞同：10
> 
> 时间：2012-08-06T13:46:14.657
> 
> 标签：c#, windows, file-io, newline

我正在通过 FileStream 更改文件（这是一个非常大的文件，我只需要更改标题而不重写整个文件。

该文件可以有 Unix 或 Windows 换行符，对我来说知道哪个很重要，这样我可以在更新文件时将正确的换行符写回文件中。

我可以编写一个简单的函数来使用 FileStream 以块的形式读取文件并检查换行符。

但是这个问题之前肯定已经解决了，如果不是在 C# 中，那么在 Win32 API 中呢？

检测文件换行样式的最有效方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T16:46:28.970

Thanks all for your suggestions. I was surprised not to find something easily reusable, so I created a simple function that I include here. Note that it just finds the first newline character (\n or \r\n) and returns that as the match. Enough for my needs, but perhaps not robust.

```
 public bool TryDetectNewLine(string path, out string newLine)
    {
        using (var fileStream = File.OpenRead(path))
        {
            char prevChar = '\0';

            // Read the first 4000 characters to try and find a newline
            for (int i = 0; i < 4000; i++)
            {
                int b;
                if ((b = fileStream.ReadByte()) == -1) break;

                char curChar = (char)b;

                if (curChar == '\n')
                {
                    newLine = prevChar == '\r' ? "\r\n" : "\n";
                    return true;
                }

                prevChar = curChar;
            }

            // Returning false means could not determine linefeed convention
            newLine = Environment.NewLine;
            return false;
        }
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T14:41:40.640

正如 Per 所说，如果不打开文本文件并通过字节流式传输，实际上没有办法确定文本文件的内容。如果您使用 http 下载文件，您可能会很幸运，您可以获得一个指示文件类型的 mime 类型，但通常它只是“八位字节流”。

虽然您可以强制使用它，并阅读直到找到换行符（“\n”）然后备份一个字符并查看是否有回车符（“\r”），但我会采取更统计的方法，因为你有以任何方式读取数据。

1）选择一个字节的样本大小来读取，这应该可以从文件中获得至少 2 或 3 条记录。

2）将每个字节遇到（我在这里设置单字节字符）存储为直方图。您可以通过将计数存储在由字节值索引的数组中来做到这一点，或者您可以使用字典。

3) Take a look at the carriage return and line feed values counts. If you have a line feed count and no carriage returns, then it is a unix file. If carraige return and line feed counts then it is a windows file.

What this approach also would allow you to do is to a quality check on the inbound file. Do you have charcaters in you histogram that are not aplha numeric ? Then someone has passed you a binary file. Expecting all upper case ? Then look for counts outside the upercase characters. There are a number of checks you could do to keep from processing a non text file.

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T14:17:13.273

不幸的是，我认为没有办法 100% 确定它是 Unix 还是 DOS 文件，因为大多数编辑器在打开/保存时不会更正具有“错误”结尾的文件。

我会将文件作为流读取并搜索“\r\n”的出现，并且只搜索“\n”

对搜索结果使用简单的统计分析（即哪个具有最高的命中数）可能会给您正确的答案。如果文件很大，那么读取文件的前 X% 就足够了。

一个更简单的解决方案当然是只搜索“\r\n”，如果找到，就假设它是一个 DOS 文件。如果文件是机器生成的，这应该可以 100% 工作。

至于 .NET Framework/WinAPI 中的任何现有代码，我还没有看到任何执行此操作的代码。

# php - PHP 无法识别现有会话，启动新会话

> ID：11829562
> 
> 赞同：2
> 
> 时间：2012-08-06T13:46:30.390
> 
> 标签：php, session, login, session-cookies, sessionid

我有一个带有 php 登录的网站。每次访问页面时，我都会调用`session_start()`.

我一直有这个不寻常的问题，其中五分之一（左右），我的 session_start 将无法识别现有的`PHPSESSID`cookie，而是创建一个新的，所以我有 2 个，并停止使用所有存储的数据在第一届会议。

它是这样的：我成功登录，并成功重定向到我曾经登录但现在登录的同一页面，并且我被分配了一个会话 id cookie，并且会话成功存储了它的数据（所有检查并确认）

然后我单击页面上的任何链接（甚至是指向我所在页面的链接），而不是继续会话，而是创建一个新会话，给我第二个会话 cookie 并有效地将我注销。

这只会发生五分之一，并且仅在我第一次访问该网站时发生。在成功的试验中，当我登录时，导航到另一个页面会给我留下 1 个会话 id cookie 而不是 2 个。

我一直在努力解决这个问题，希望能得到任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:09:49.360

呼叫：`echo session_id();`。返回什么？

这是您的会话 ID。如果它在脚本运行期间发生更改，您将丢失`$_SESSION`数据。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:49:34.183

您可能正在销毁并重新创建会话。在创建之前确保会话不存在。

```
if(!$_SESSION)
   session_start(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-05-09T21:42:13.980

显然你会对此进行排序，但对于其他遇到同样问题的人，我在我的 logout.php 文件中使用了这种方法。session_regenerate_id() 重置使用的会话变量。希望这对其他人有帮助

```
<?php   
session_start(); //to ensure you are using same session
session_unset($_SESSION['currentUser']);
session_destroy(); //destroy the session
$_SESSION = array();
session_regenerate_id(TRUE);
header("location:/final/index.html"); //to redirect back to "index.php" after logging out
exit();
?> 
```

# pdf - Alfresco 3.4.e Share：大 PDF 文件预览不起作用

> ID：11829563
> 
> 赞同：1
> 
> 时间：2012-08-06T13:46:30.807
> 
> 标签：pdf, encoding, alfresco, pdf2swf

我的 Alfresco 3.4.e Share 应用程序有问题。当您上传一个文件（例如 PDF 文件）时，该文件的大小很大（在本例中为 10MB），“通过浏览器预览文件”选项不起作用。窗口打开，正在处理文档，然后崩溃。当您尝试预览像 1mb 文件这样的小文件时，您不会遇到任何问题。

我已经对此问题进行了研究，显然，您可以修改“内容转换限制”。这是我参考的文档的链接：

[https://wiki.alfresco.com/wiki/Content_Transformation_Limits](https://wiki.alfresco.com/wiki/Content_Transformation_Limits)

总而言之，您只需在“content-services-context.xml”文件和“thumbnail-services-context.xml”中设置属性即可。以下是您必须设置的属性：

*   超时时间
*   readLimitTimeMs
*   maxSourceSizeKBytes
*   readLimitKBytes
*   页面限制
*   最大页数

但是，这些属性都不存在，例如在类`"org.alfresco.repo.content.transform.magick.ImageTransformationOptions"`或“org.alfresco.repo.content.transform.TextToPdfContentTransformer”类中。当这些属性设置为说它们不可写并且我查看了源代码并且它们根本不存在时，我遇到了错误。

我有另一种理论，其中文件要复杂以进行转换（超过 100 页，大量图像和样式......）。以下是文档转换和预览尝试后写入的错误日志：

```
ERROR [extensions.webscripts.AbstractRuntime] Exception from executeScript - redirecting to status template error: 07060002 Wrapped Exception (with status template): 07060007 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/repository/thumbnail/thumbnail.get.js': 07060006 Content conversion failed:
   reader: ContentAccessor[ contentUrl=store://2012/8/6/10/57/cd79670a-6210-4ce6-9af6-563d224c278f.bin, mimetype=application/pdf, size=20578433, encoding=utf-8, locale=fr_FR]
   writer: ContentAccessor[ contentUrl=store://2012/8/6/15/9/d44c8099-06ac-4c8f-8021-edb8f48c838b.bin, mimetype=application/x-shockwave-flash, size=0, encoding=UTF-8, locale=fr]
   options: org.alfresco.service.cmr.repository.TransformationOptions@4b10fe3f
org.springframework.extensions.webscripts.WebScriptException: 07060002 Wrapped Exception (with status template): 07060007 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/repository/thumbnail/thumbnail.get.js': 07060006 Content conversion failed:
   reader: ContentAccessor[ contentUrl=store://2012/8/6/10/57/cd79670a-6210-4ce6-9af6-563d224c278f.bin, mimetype=application/pdf, size=20578433, encoding=utf-8, locale=fr_FR]
   writer: ContentAccessor[ contentUrl=store://2012/8/6/15/9/d44c8099-06ac-4c8f-8021-edb8f48c838b.bin, mimetype=application/x-shockwave-flash, size=0, encoding=UTF-8, locale=fr]
   options: org.alfresco.service.cmr.repository.TransformationOptions@4b10fe3f
        at org.springframework.extensions.webscripts.AbstractWebScript.createStatusException(AbstractWebScript.java:758)
        at org.alfresco.repo.web.scripts.content.StreamContent.execute(StreamContent.java:202)
        at org.alfresco.repo.web.scripts.RepositoryContainer$2.execute(RepositoryContainer.java:383)
        at org.alfresco.repo.transaction.RetryingTransactionHelper.doInTransaction(RetryingTransactionHelper.java:381)
        at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecute(RepositoryContainer.java:436)
        at org.alfresco.repo.web.scripts.RepositoryContainer.transactionedExecuteAs(RepositoryContainer.java:466)
        at org.alfresco.repo.web.scripts.RepositoryContainer.executeScript(RepositoryContainer.java:304)
        at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:333)
        at org.springframework.extensions.webscripts.AbstractRuntime.executeScript(AbstractRuntime.java:189)
        at org.springframework.extensions.webscripts.servlet.WebScriptServlet.service(WebScriptServlet.java:118)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:290)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.alfresco.web.app.servlet.GlobalLocalizationFilter.doFilter(GlobalLocalizationFilter.java:58)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:235)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:206)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:233)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:191)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:127)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:102)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:109)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:298)
        at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:852)
        at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:588)
        at org.apache.tomcat.util.net.JIoEndpoint$Worker.run(JIoEndpoint.java:489)
        at java.lang.Thread.run(Thread.java:619)
Caused by: org.alfresco.scripts.ScriptException: 07060007 Failed to execute script 'classpath*:alfresco/templates/webscripts/org/alfresco/repository/thumbnail/thumbnail.get.js': 07060006 Content conversion failed:
   reader: ContentAccessor[ contentUrl=store://2012/8/6/10/57/cd79670a-6210-4ce6-9af6-563d224c278f.bin, mimetype=application/pdf, size=20578433, encoding=utf-8, locale=fr_FR]
   writer: ContentAccessor[ contentUrl=store://2012/8/6/15/9/d44c8099-06ac-4c8f-8021-edb8f48c838b.bin, mimetype=application/x-shockwave-flash, size=0, encoding=UTF-8, locale=fr]
   options: org.alfresco.service.cmr.repository.TransformationOptions@4b10fe3f
        at org.alfresco.repo.jscript.RhinoScriptProcessor.execute(RhinoScriptProcessor.java:194)
        at org.alfresco.repo.processor.ScriptServiceImpl.executeScript(ScriptServiceImpl.java:282)
        at org.alfresco.repo.web.scripts.RepositoryScriptProcessor.executeScript(RepositoryScriptProcessor.java:102)
        at org.springframework.extensions.webscripts.AbstractWebScript.executeScript(AbstractWebScript.java:981)
        at org.alfresco.repo.web.scripts.content.StreamContent.execute(StreamContent.java:148)
        ... 24 more
Caused by: org.alfresco.service.cmr.repository.ContentIOException: 07060006 Content conversion failed:
   reader: ContentAccessor[ contentUrl=store://2012/8/6/10/57/cd79670a-6210-4ce6-9af6-563d224c278f.bin, mimetype=application/pdf, size=20578433, encoding=utf-8, locale=fr_FR]
   writer: ContentAccessor[ contentUrl=store://2012/8/6/15/9/d44c8099-06ac-4c8f-8021-edb8f48c838b.bin, mimetype=application/x-shockwave-flash, size=0, encoding=UTF-8, locale=fr]
   options: org.alfresco.service.cmr.repository.TransformationOptions@4b10fe3f
        at org.alfresco.repo.content.transform.AbstractContentTransformer2.transform(AbstractContentTransformer2.java:177)
        at org.alfresco.repo.content.ContentServiceImpl.transform(ContentServiceImpl.java:555)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at net.sf.acegisecurity.intercept.method.aopalliance.MethodSecurityInterceptor.invoke(MethodSecurityInterceptor.java:80)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.alfresco.repo.model.ml.MLContentInterceptor.invoke(MLContentInterceptor.java:125)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.alfresco.repo.security.permissions.impl.ExceptionTranslatorMethodInterceptor.invoke(ExceptionTranslatorMethodInterceptor.java:44)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.alfresco.repo.audit.AuditMethodInterceptor.proceed(AuditMethodInterceptor.java:160)
        at org.alfresco.repo.audit.AuditMethodInterceptor.invoke(AuditMethodInterceptor.java:137)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:107)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy42.transform(Unknown Source)
        at org.alfresco.repo.rendition.executer.AbstractTransformationRenderingEngine.render(AbstractTransformationRenderingEngine.java:71)
        at org.alfresco.repo.rendition.executer.AbstractRenderingEngine.executeRenditionImpl(AbstractRenderingEngine.java:497)
        at org.alfresco.repo.rendition.executer.AbstractRenderingEngine$2.doWork(AbstractRenderingEngine.java:429)
        at org.alfresco.repo.rendition.executer.AbstractRenderingEngine$2.doWork(AbstractRenderingEngine.java:410)
        at org.alfresco.repo.security.authentication.AuthenticationUtil.runAs(AuthenticationUtil.java:508)
        at org.alfresco.repo.rendition.executer.AbstractRenderingEngine.executeImpl(AbstractRenderingEngine.java:409)
        at org.alfresco.repo.rendition.executer.AbstractRenderingEngine.executeImpl(AbstractRenderingEngine.java:373)
        at org.alfresco.repo.action.executer.ActionExecuterAbstractBase.execute(ActionExecuterAbstractBase.java:133)
        at org.alfresco.repo.action.ActionServiceImpl.directActionExecution(ActionServiceImpl.java:749)
        at org.alfresco.repo.action.ActionServiceImpl.executeActionImpl(ActionServiceImpl.java:675)
        at org.alfresco.repo.action.ActionServiceImpl.executeAction(ActionServiceImpl.java:540)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.alfresco.repo.security.permissions.impl.AlwaysProceedMethodInterceptor.invoke(AlwaysProceedMethodInterceptor.java:34)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.alfresco.repo.security.permissions.impl.ExceptionTranslatorMethodInterceptor.invoke(ExceptionTranslatorMethodInterceptor.java:44)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.alfresco.repo.audit.AuditMethodInterceptor.proceedWithAudit(AuditMethodInterceptor.java:217)
        at org.alfresco.repo.audit.AuditMethodInterceptor.proceed(AuditMethodInterceptor.java:184)
        at org.alfresco.repo.audit.AuditMethodInterceptor.invoke(AuditMethodInterceptor.java:137)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:107)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy34.executeAction(Unknown Source)
        at org.alfresco.repo.rendition.RenditionServiceImpl.executeRenditionAction(RenditionServiceImpl.java:233)
        at org.alfresco.repo.rendition.RenditionServiceImpl.render(RenditionServiceImpl.java:182)
        at org.alfresco.repo.thumbnail.ThumbnailServiceImpl.createThumbnailNode(ThumbnailServiceImpl.java:449)
        at org.alfresco.repo.thumbnail.ThumbnailServiceImpl.access$000(ThumbnailServiceImpl.java:55)
        at org.alfresco.repo.thumbnail.ThumbnailServiceImpl$1.doWork(ThumbnailServiceImpl.java:146)
        at org.alfresco.repo.thumbnail.ThumbnailServiceImpl$1.doWork(ThumbnailServiceImpl.java:143)
        at org.alfresco.repo.security.authentication.AuthenticationUtil.runAs(AuthenticationUtil.java:508)
        at org.alfresco.repo.thumbnail.ThumbnailServiceImpl.createThumbnail(ThumbnailServiceImpl.java:141)
        at org.alfresco.repo.thumbnail.ThumbnailServiceImpl.createThumbnail(ThumbnailServiceImpl.java:120)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:183)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:150)
        at org.alfresco.repo.security.permissions.impl.AlwaysProceedMethodInterceptor.invoke(AlwaysProceedMethodInterceptor.java:34)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.alfresco.repo.security.permissions.impl.ExceptionTranslatorMethodInterceptor.invoke(ExceptionTranslatorMethodInterceptor.java:44)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.alfresco.repo.audit.AuditMethodInterceptor.proceed(AuditMethodInterceptor.java:178)
        at org.alfresco.repo.audit.AuditMethodInterceptor.invoke(AuditMethodInterceptor.java:137)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:107)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy111.createThumbnail(Unknown Source)
        at org.alfresco.repo.jscript.ScriptNode.createThumbnail(ScriptNode.java:2410)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.mozilla.javascript.MemberBox.invoke(MemberBox.java:155)
        at org.mozilla.javascript.NativeJavaMethod.call(NativeJavaMethod.java:243)
        at org.mozilla.javascript.optimizer.OptRuntime.call2(OptRuntime.java:76)
        at org.mozilla.javascript.gen.c12._c1(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/thumbnail/thumbnail.get.js:61)
        at org.mozilla.javascript.gen.c12.call(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/thumbnail/thumbnail.get.js)
        at org.mozilla.javascript.optimizer.OptRuntime.callName0(OptRuntime.java:108)
        at org.mozilla.javascript.gen.c12._c0(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/thumbnail/thumbnail.get.js:101)
        at org.mozilla.javascript.gen.c12.call(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/thumbnail/thumbnail.get.js)
        at org.mozilla.javascript.ContextFactory.doTopCall(ContextFactory.java:393)
        at org.mozilla.javascript.ScriptRuntime.doTopCall(ScriptRuntime.java:2834)
        at org.mozilla.javascript.gen.c12.call(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/thumbnail/thumbnail.get.js)
        at org.mozilla.javascript.gen.c12.exec(file:/C:/Alfresco/tomcat/webapps/alfresco/WEB-INF/classes/alfresco/templates/webscripts/org/alfresco/repository/thumbnail/thumbnail.get.js)
        at org.alfresco.repo.jscript.RhinoScriptProcessor.executeScriptImpl(RhinoScriptProcessor.java:472)
        at org.alfresco.repo.jscript.RhinoScriptProcessor.execute(RhinoScriptProcessor.java:190)
        ... 28 more
Caused by: org.alfresco.service.cmr.repository.ContentIOException: 07060005 Transformation failed - status indicates an error:
Execution result:
   os:         Windows Server 2008 R2
   command:    [C:/Alfresco/swftools/pdf2swf.exe, -T, 9, -s, poly2bitmap,subpixels=72, C:\Alfresco\tomcat\temp\Alfresco\RuntimeExecutableContentTransformerWorker_source_1313428204114423249.pdf, -o, C:\Alfresco\tomcat\temp\Alfresco\RuntimeExecutableContentTransformerWorker_target_920011681678277152.swf]
   succeeded:  false
   exit code:  1
   out:        NOTICE  processing PDF page 1 (595x841:0:0) (move:0:0)
NOTICE  File contains pbm pictures
NOTICE  File contains jpeg pictures
NOTICE  processing PDF page 2 (595x841:0:0) (move:0:0)
NOTICE  processing PDF page 3 (595x841:0:0) (move:0:0)
NOTICE
   err:
        at org.alfresco.repo.content.transform.RuntimeExecutableContentTransformerWorker.transform(RuntimeExecutableContentTransformerWorker.java:272)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.alfresco.repo.management.subsystems.SubsystemProxyFactory$1.invoke(SubsystemProxyFactory.java:71)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:172)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:202)
        at $Proxy40.transform(Unknown Source)
        at org.alfresco.repo.content.transform.ProxyContentTransformer.transformInternal(ProxyContentTransformer.java:68)
        at org.alfresco.repo.content.transform.AbstractContentTransformer2.transform(AbstractContentTransformer2.java:161)
        ... 125 more 
```

如果查看日志，问题可能与`pdf2swf`由于高字节字符或特殊字符导致的崩溃有关。

所以，如果你们有任何想法...

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T16:12:36.233

即使在您的版本中实施了限制，您的开箱即用安装也不应该有任何转换限制。因此，除非您专门配置了限制，否则这不太可能是您的问题的原因。

更有可能是`pdf2swf`根本无法处理您上传的文件。这似乎与您从日志中发布的堆栈跟踪一致，但请注意，Alfresco 将截断错误流。如果您真的想查看完整的错误，请使用它给您的命令并在命令提示符下交互式地运行它。

您没有提及您安装的 SWFTools 版本，但这是一个很好的起点。您可以尝试更新版本或 SVN 快照，看看是否有帮助。

最后，您还可以更改传递给 的命令行参数`pdf2swf`，尽管您需要做一些研究才能了解哪些参数最适合您要上传的内容类型。

以下默认设置在`alfresco/subsystems/thirdparty/default/swf-transform.properties`Alfresco webapp 内的文件中设置，但您可以在自定义`alfresco-global.properties`文件中覆盖它们。

```
# This option on pdf2swf improves the transformation of graphics-heavy pdfs. See ALF-3580.
# poly2bitmap improves the chances of successful transformation. On its own it reduces
# the resolution of embedded images. subpixels sets the dpi for embedded images.
# zoom introduced and -s added before each option (ALF-9417).
swf.encoder.params=-s zoom=72 -s ppmsubpixels=1 -s poly2bitmap=1 -s bitmapfonts=1 
```

评论中引用的问题（在[http://issues.alfresco.com](http://issues.alfresco.com)上）可能也很有趣。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T08:32:40.197

好的，

所以首先，感谢您的所有回答！它真的帮了我很多。

确实，问题出在`pdf2swf`. Alfresco 的默认配置不适合大型 PDF 文件。我有的那个包含太多丰富的字符，所以“swf-transform.properties”的默认参数配置：

```
swf.encoder.params=-s poly2bitmap,subpixels=72 
```

被替换为：

```
swf.encoder.params=-s zoom=72 -s ppmsubpixels=1 -s poly2bitmap=1 -s bitmapfonts=1 
```

现在我可以毫无问题地预览我的大 PDF 文件了。

再次感谢你的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T19:26:32.293

如果您回顾 wiki 的第一行，您会注意到属性限制适用于 Enterprise 版本 3.4.8 或 4。我不确定它是否适用于版本 3.4.d。但是，无论如何，这不是重点。这些限制是在最近的版本中创建的，以避免您从 pdf2swf.exe 获得的那种错误，并呈现静态图像作为预览，这可能不如常规 Flash 预览那么漂亮，但至少它会让您预览。该功能可能在 3.4d 中不可用，尽管它可能在版本 4 中可用。

您遇到的真正问题是以下语句（为了便于阅读，我将其缩短了一点）：

```
C:/Alfresco/swftools/pdf2swf.exe, -T, 9, -s, poly2bitmap,subpixels=72, *C:\Alfresco\tomcat\temp\Alfresco\your_source_file.pdf*, -o, *C:\Alfresco\tomcat\temp\Alfresco\generated_flash_preview.swf* 
```

您可能想在命令行中输入它，看看会发生什么。如果出现错误，您可能需要尝试不同版本的 pdf2swf.exe。如果你没有收到错误并且事情得到很好的转换，你可能需要为 Alfresco 的 Java 堆分配更多内存（参数 -Xmx），确保你有足够的硬盘空间，当然，你有足够的物理 RAM 内存。

# iphone - WEPopover 不工作

> ID：11829570
> 
> 赞同：1
> 
> 时间：2012-08-06T13:46:47.147
> 
> 标签：iphone, uitouch

我在我的项目中使用 WEPopover。我已经集成了它，它正在显示 PopoverController。我添加为 contentViewController 的类是 UITableViewController 的子类。我在它的 didSelectRowAtIndexPath 上加载另一个视图控制器，但它没有第一次显示这个视图。当我再次点击它时它会出现。我正在添加我的代码。请帮我解决这个问题。

UITouch 上的代码：-

```
if([[touch view] isKindOfClass:[backGroundImageView class]] && numTaps ==1)

    { 

            CGPoint startLocation   = [touch locationInView:backGroundImageView];

             startX = startLocation.x;
             startY = startLocation.y;

        CGRect rect = CGRectMake(startX, startY, 300, 90); 

        if(self.popoverController)
        {

            [self.popoverController dismissPopoverAnimated:YES];
            self.popoverController = nil;

        }
        else
        {

        UIViewController *contentViewController = [[WEPopoverContentViewController alloc] initWithStyle:UITableViewStylePlain];

        self.popoverController = [[[popoverClass alloc] initWithContentViewController:contentViewController] autorelease];

        if ([self.popoverController respondsToSelector:@selector(setContainerViewProperties:)]) {
            [self.popoverController setContainerViewProperties:[self improvedContainerViewProperties]];
        }

        self.popoverController.delegate = self;

        //Uncomment the line below to allow the table view to handle events while the popover is displayed.
        //Otherwise the popover is dismissed automatically if a user touches anywhere outside of its view.

        self.popoverController.passthroughViews = [NSArray arrayWithObject:backGroundImageView];
        NSLog(@"rect1: %@", NSStringFromCGRect(rect));

        [self.popoverController presentPopoverFromRect:rect  
                                                inView:backGroundImageView 
                              permittedArrowDirections:(UIPopoverArrowDirectionUp|UIPopoverArrowDirectionDown|
                                                        UIPopoverArrowDirectionLeft|UIPopoverArrowDirectionRight)
                                              animated:YES];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:37:29.513

`else`部分尝试这个小改变，可能会有所帮助因为我已经使用这种方式并且它工作正常。

```
self.popoverController = [[[WEPopoverContentViewController alloc] initWithContentViewController:yourAnotherViewController] autorelease]; 
```

假设 self.popoverController 是 WEPopoverContentViewController 的对象
假设 yourAnotherViewController 已分配

# php - 如何将php数组传递给jquery并变成json？

> ID：11829571
> 
> 赞同：1
> 
> 时间：2012-08-06T13:46:46.960
> 
> 标签：php, jquery, arrays, json

使用 php4 如何将数组存储在隐藏的 div 中，以便 jquery 可以将其拾取然后将其转换为 json 对象？我试图将数据数组传递给 gmap，以便我可以加载多个标记，但似乎无法弄清楚如何将 php 数组传递给 jquery，然后将其转换为 json 对象。

我尝试使用 php4 的自定义 json 编码类并将 php 数组编码为 json，问题是它会吐出一堆垃圾字符并且似乎会导致 jquery 代码中的错误。这是我在 php 中创建的数组：

```
$map_array[] = array('latitude' => $result_latitude,'longitude' => $result_longitude,'html' => $result_html,'title' => $result_name,'icon' => array('image' => '/pathtoicon' .$mapi .'.png','iconsize' => array(27,27)));

$map_json = $json->encode($map_array); 
```

然后在jquery中：

```
 var mapcoords = $('#mapcoord').html();

        $('#rmap').gMap(
                {
                    zoom: 10,
                    markers:$.parseJSON(mapcoords)
                }

        ); 
```

当我这样做时，我得到这个错误：

“SyntaxError：JSON.parse：JSON 数据后出现意外的非空白字符”

如果我这样做 var mapcoords = $('#mapcoord').text();

问题是，它去掉了 html。那么如何将 php 数组传递给 jquery 并能够保留 html 代码呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:56:37.650

为什么不简单地用 php 创建 javascript 变量并将其设置在那里？

例如：

```
<?php

   $obj = "{'test': 1}";

    echo "<script type='text/javascript'>";
    echo "var myString = " . $obj;
    echo "</script>";
?> 
```

现在可以通过 javascript 作为对象访问该变量。

如果您不能这样做，您可以尝试使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)将字符串转换为 json 对象。

希望能帮助到你！

你试过了`jQuery.parseJSON(myString)`吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:56:48.027

假设 html 页面和 json 数据在同一个请求中从 web 服务器发送到客户端，您应该在服务器端编写必要的 js 作为 php 字符串。下面的代码片段应该说明需要做什么：

```
$map_json = "var jsonData = " . $json->encode($map_array); 
$map_json = '<script type="text/javascript">' . $map_json . '</script>'; 
echo $map_json; 
```

客户端中的 js 片段应该可以访问变量 jsonData。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:02:12.280

我会尝试这样的事情：

```
$json = json_encode($my_array);
echo <<<EOS
<script type="text/javascript">
     my_global_js_var = $json
</script>
EOS; 
```

Since JSON is valid javascript, you should get a variable with the json content. You even do not need an hidden HTML Element.

# windows - 在 Box API 中将锁定的文件视为只读

> ID：11829574
> 
> 赞同：0
> 
> 时间：2012-08-06T13:46:54.643
> 
> 标签：windows, locking, readonly, box-api

我在 Windows 7 中使用 Box 和 Box Sync，并且有一个客户希望能够在 Box 中锁定文件并让 Box Sync 通过将文件设为只读来将其传播到 Windows。我知道当文件被引入时，有一些属性从 Box 转移到 Windows，因为文件的图标更改为在其左下角显示一个小锁。有谁知道如何在 Windows 中访问该属性并将其应用于使文件只读？

谢谢，

丹妮尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T17:23:02.323

这目前没有[在 API 的文件对象中](http://developers.box.com/docs/#files-file-object-2)公开。我们将来可能会考虑添加这个属性。您可能可以在操作系统级别执行一些操作来将本地副本限制为只读；最好在 StackOverflow 上的其他地方查看如何执行此操作。

# java - 弹簧安全。@PreAuthorize 不起作用

> ID：11829577
> 
> 赞同：0
> 
> 时间：2012-08-06T13:47:07.590
> 
> 标签：java, spring, jakarta-ee, web, spring-security

> **可能重复：**
> [Spring Security 可以在 Spring 控制器方法上使用 @PreAuthorize 吗？](https://stackoverflow.com/questions/3087548/can-spring-security-use-preauthorize-on-spring-controllers-methods)

这是我的配置： pom.xml

```
<!-- Spring Security -->
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-config</artifactId>
    <version>${spring-security.version}</version>
    <scope>compile</scope>
</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-taglibs</artifactId>
    <version>${spring-security.version}</version>
    <scope>compile</scope>
</dependency>
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-web</artifactId>
    <version>${spring-security.version}</version>
    <scope>compile</scope>
</dependency>

<!-- AOP dependency -->
<dependency>
    <groupId>cglib</groupId>
    <artifactId>cglib</artifactId>
    <version>2.2</version>
</dependency>
<!-- end of Spring Security --> 
```

这是security.xml ->

```
 <!-- secured-annotations = (@Secured("ROLE_ADMIN")) -->
    <!-- jsr250-annotations = (@RunAs @RolesAllowed @PermitAll @DenyAll @DeclareRoles) -->
    <!-- pre-post-annotations = @PreAuthorized("hasAuthority('ROLE_ADMIN')") -->

<global-method-security secured-annotations="disabled"
                        jsr250-annotations="disabled"
                        pre-post-annotations="enabled"/>

<http       auto-config='true' 
            disable-url-rewriting="true" 
            access-denied-page="/WEB-INF/jsp/errors/accessDenied.jsp">

    <anonymous granted-authority="ROLE_ANONYMOUS" key="anonymous"/>

    <logout logout-url="/logout.do" logout-success-url="/" />

    <form-login always-use-default-target="false" 
        authentication-failure-url="/?authfailed=true" 
        default-target-url="/person"
        login-page="/" 
        login-processing-url="/login"
        username-parameter="username" 
        password-parameter="password" 
         />

      <remember-me key="rememberMe" services-ref="rememberMeService"/>
</http> 
```

当我尝试运行任何控制器时 ->

@RequestMapping("/person") 公共类 PersonController {

```
@RequestMapping("")
    @PreAuthorize("hasAuthority('ROLE_ADMIN')")
public String root() {
    doStuff();
    return "redirect:/person/home";
} 
```

与任何不同的角色，我得到了正确的结果。所以 @PreAuthorize("hasAuthority('ROLE_ADMIN')") 注释不起作用。

没有编译错误，没有运行时异常。

谢谢。

# python - z3 python代码中的错误

> ID：11829579
> 
> 赞同：1
> 
> 时间：2012-08-06T13:47:20.057
> 
> 标签：python, z3

以下代码在 8 次迭代后终止（虽然它应该迭代 14 次）为什么？

该代码编码了一个线性混合自动机，它应该运行指定的迭代次数，但没有。

```
from z3 import *
x,t,t1,t2,x_next=Reals ('x t t1 t2 x_next')

location=[None]
location='off'
x=20
t1=0

s=Solver()
#set_option(precision=10)
k=14
for   i in range(k):

  print location 
  if location=='off':
      s.add((10*x_next)>=(3*t1)-(3*t2)+(10*x),(10*x_next)<=(10*x)-(t2-t1),x_next>=18,(t2-t1)>0)
  elif location=='on':
      s.add(10*x_next>=(t2-t1)+(10*x),(5*x_next)<=(5*x)+(t2-t1),x_next<=22,(t2-t1)>0)

  if  [location=='off' and x_next<19] :
      location='on'
  elif [location=='on' and x_next>21]:
       location='off'

  if s.check()==unsat:
      break

  m=s.model()
  #print s.check()
  print i
  print location
  print s.model()

  print "value of x_next"
  print m[x_next].as_decimal(10)

  x=m[x_next]
  t1=m[t2] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:08:47.623

程序停止，因为在迭代 8 后断言集不可满足，并且在您的循环中，您有以下语句：

```
if s.check()==unsat:
    break 
```

在第一次迭代中添加断言：

```
10*x_next <= 200 - t2 - 0 
```

在最后一次迭代中，您添加：

```
10*x_next >= t2 - Q(40,3) + 10*Q(56,3),
t2 - Q(40,3) > 0 
```

其中，该命令`Q(a, b)`用于创建有理数`a/b`。也就是说，`t1`is`40/3`和`x`is`56/3`在第 8 次迭代。上面的三个断言是不可满足的。前两个暗示，`t2 <= 40/3`最后一个`t2 > 40/3`。

顺便说一句，以下陈述似乎是不正确的。也就是说，我不相信它反映了你的意图。请注意，这是正交问题。

```
if  [location=='off' and x_next<19] : 
```

表达式`x_next<19`不计算为`True`or `False`。它创建 Z3（符号）表达式`x_next < 19`。我相信，您想评估此表达式在模型中是否为真`m`。如果是这种情况，你应该写：

```
if  location=='off' and is_true(m.evaluate(x_next<19)) : 
```

该命令计算模型中`m.evaluate(t)`的表达式。结果是一个 Z3 表达式。如果Z3 表达式为真，则该函数返回。`t``m``is_true(t)``True``t`

# c# - 使用 Windows 键盘挂钩时，在键盘状态下错误地检测到 SHIFT 键

> ID：11829582
> 
> 赞同：1
> 
> 时间：2012-08-06T13:47:23.963
> 
> 标签：c#, winapi, keyboard-hook, magnetic-cards, cardreader

我正在使用磁卡读卡器。

当插入 USB 端口并打开记事本时，我得到以下正确结果：

```
%B4290071074381429^NAZARKO/C M               ^1302101000002024976000000000002?;4290071074381429=13021010000020204976? 
```

当我使用调用 Windows API 函数的键盘挂钩（用 C# 编写）时，我得到不一致的结果，例如：

```
%B42()071074381429^NAZARKO/C M               ^1302101000002024976000000000002?;4290071074381429=13021010000020204976? 
```

如您所见，这里的问题是第一个 '90' 变成了 '()'，就好像在按下 '9' 和 '0' 键时按下了 SHIFT。

键盘钩子代码来自这里（Keyboard.cs）： [https](https://nappybar.googlecode.com/svn/Keyboard.cs) ://nappybar.googlecode.com/svn/Keyboard.cs ，它的设置方式如下：

```
 _kbHook = new KeyboardHook();
            _kbHook.KeyIntercepted += KeyboardHook_KeyIntercepted;
            _kbHook.SetParameters(KeyboardHook.Parameters.AllowAltTab);
            _kbHook.SetParameters(KeyboardHook.Parameters.PassAllKeysToNextApp); 
```

如上所述，我将其与读卡器一起使用时得到的结果不一致。似乎 (GetKeyboardState) 中的键盘状态并不完全正确。主要是，它有时会说 SHIFT 在不应该按下时按下，反之亦然。 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms646299(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646299(v=vs.85).aspx)

有谁知道为什么会发生这种情况以及为什么它在记事本中正常工作？更重要的是，我如何修复/解决它？谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T13:56:42.767

您正在使用线程内运行的低级键盘挂钩。因此，当你打电话时，`GetKeyboardState`你得到的是你自己本地键盘的状态，而不是记事本键盘的状态。如果您想沿着这条路线继续前进，您需要手动跟踪 shift 键的状态。为什么不在你的应用程序中处理普通的键盘消息？为什么需要全局挂钩？如果您正常处理它们，则将发生 shift 键处理，并且当您调用时，`GetKeyboardState`您将看到适当的键状态。将原始键盘活动转换为键入的字符非常困难。除了转换键状态之外，您还必须担心 Caps Lock 和 IME。

# php - Google+ API：按日期获取用户活动

> ID：11829589
> 
> 赞同：0
> 
> 时间：2012-08-06T13:47:41.843
> 
> 标签：php, api, symfony1, google-plus

我的任务是让用户列表活动到某个日期，或者从某个日期到当前日期。Google+ API 是否有可以帮助解决我的任务的方法。或者你能告诉我找什么方法吗？

我试图进行有限的活动

```
 $ch = curl_init();
        curl_setopt($ch, CURLOPT_URL, 'https://www.googleapis.com/plus/v1/people/'.$user->getGoogleId().'/activities/public?key='.sfConfig::get('app_google_plus_api_key')
            .'&maxResults='.sfConfig::get('app_google_plus_max_result'));
        curl_setopt($ch, CURLOPT_HEADER, false);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_setopt($ch, CURLOPT_CONNECTTIMEOUT, 30);
        curl_setopt($ch, CURLOPT_USERAGENT, 'PHP Bot');
        $data = json_decode(curl_exec($ch));
        curl_close($ch); 
```

然后解析响应并获得必要的活动。但问题是，在这个有限数量的活动中可能不包含必要的日期，因为这些活动比那个日期更新。如果我解释得不够准确，我很抱歉。我不是说母语的人。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-08T01:05:35.467

Google+ API 目前不支持此功能。活动从`activities.list`方法返回的顺序与它们在[https://plus.google.com](https://plus.google.com)上显示的顺序相同。这意味着虽然第一页包含较新的活动，但可能会增加较旧的活动。

API 的问题跟踪器中有一个[功能请求。](http://code.google.com/p/google-plus-platform/issues/detail?id=63)如果您为问题加注星标，您将在更新时收到通知。

# sql-server - 查找表与进入表

> ID：11829599
> 
> 赞同：4
> 
> 时间：2012-08-06T13:48:38.193
> 
> 标签：sql-server, tsql, lookup

我有一个问题，在更快、更好且面向未来的 T-SQL 设置中？

拥有一个带有 ID 和状态条目的查找表是否更容易？

```
ID | Status
-------------
01 | Success
02 | Failure
03 | Processing 
```

还是只在每行中输入状态值更好？

这对编写查询有何影响，使用查找表而不是仅仅在行中输入状态是否是良好的关系数据库设计？一个比另一个快吗？

我觉得查找表是要走的路，但在某些数据库中我看不到这么多。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:53:23.327

我个人会为这些项目使用单独的状态表。然后，您将在主表和单独的状态表之间使用外键。至于查询，您只需使用 a`JOIN`来包含实际状态名称。

```
SELECT *
FROM yourTable t
LEFT JOIN yourStatus s
    t.sid = s.id 
```

我认为它允许更大的灵活性，如果您的状态名称发生更改，您只需更改单独表中的值，而不是`UPDATE`对您的主表执行。

您的表结构可能与此类似：

```
MainTable
id int PK,
sid int FK - to status table
col3,
col4...

Status Table
id int PK - 
name varchar(50)
IsActive bit 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:32:38.937

没有更好的方法可以做到这一点。这取决于您的业务逻辑和您存储的数据量。

通常建议使用锁定表，因为您可以避免重复数据，并且如果您只想加载状态值（没有重复），它会更快。想象一下，您想创建一个带有状态值的下拉列表。你只需要做一个

```
select * from lockup_table. 
```

然后你想选择状态为**处理的行**

```
SELECT *FROM table t
LEFT JOIN lockup_table lt ON t.sid = lt.id 
WHERE lt.status LIKE 'Processing' 
```

它也会保持很快，因为您的 SGBD 将使用 pk 索引的强大功能。

但有时最好有重复数据，避免连接操作。如果您注意到连接操作需要一段时间，您应该尝试删除锁定表，看看您的性能是否因这些更改而得到改善。您也可以为该列创建索引。它会提高性能。

**总之**，如果您想要一个具有静态值（成功、处理、失败）的状态列，则不需要锁定表。但是，如果您想要具有动态值的无限范围的值，以便明天可以添加更多状态值等，您应该创建一个锁定表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:51:54.403

我认为拥有 ID 并将其用作表中的外键总是更好。我认为这是最面向未来的解决方案。对于这种情况，特别是如果你想按状态过滤，它可以加快思考，因为它不会比较字符串。

您也可以将此状态表用于数据库中的其他表，并且更容易交叉数据。

而且更容易索引。

所以在我看来，我认为这是要走的路。

干杯

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-11-07T02:11:58.427

使用查找表不符合条件的清单

1.  用户会想要修改这个列表吗？
2.  此列表是否超过 10 项？
3.  您希望此列表在未来扩大吗？
4.  它是否有两个以上依赖于 ID/CODE/PK 的列？

如果其中任何一个的答案是“是”，请创建一个表并将 PK 用作主表中的 FK。这是你唯一应该做的事情！

否则，如果列表是有限的并且表示最小的状态代码，则选择枚举类型。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-08-06T13:53:27.867

就个人而言，我使用状态表，但主键不是 int，而是 varchar(6)。这使得运行临时报告变得容易，同时确保状态字段不是自由格式的。

我的状态表通常有以下字段：

```
create table foo_status (
    status      varchar(6) primary key,
    active      bit,
    name        nvarchar(255),
    description ntext null
); 
```

并且数据表通过外键引用它

```
create table foo (
    ...
    status varchar(6) foreign key references foo_status(status)
    ...
);
create clustered index foo_fk_status_index on foo(status); 
```

# facebook - Facebook - 检索评论计数和喜欢计数？

> ID：11829601
> 
> 赞同：0
> 
> 时间：2012-08-06T13:48:48.007
> 
> 标签：facebook, facebook-graph-api, facebook-fql

我有一张带有 Facebook Post id 的桌子。使用此帖子 ID，我想检索帖子的评论数和喜欢数。

非常感谢任何提示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T20:40:13.037

使用 FQL

选择 likes.count, comments.count FROM stream WHERE post_id =POST_ID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:39:04.503

在发布到这里之前，您需要查看`Facebook API`并至少做一些研究。

这应该会给你一些见解：http: [//developers.facebook.com/docs/reference/api/post/](http://developers.facebook.com/docs/reference/api/post/)

使用 API 从`Facebook`基于`post`. 然后查看它以找到您想要的计数。

您需要获取`access_token`from`Facebook`才能对`Facebook Graph`. 研究时也有很多教程和片段。

祝你好运

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-08-19T23:50:59.880

尝试使用类似这样的 URL 来获取您需要的内容：

```
https://graph.facebook.com/albumID/photos?fields=id,likes.summary(true),comments.summary(true)&access_token=XXXXXX 
```

我真的不知道您所说的表格是什么意思，但这里有[一篇](https://stackoverflow.com/questions/32085722/how-to-count-all-of-the-likes-and-comments-in-a-facebook-photo-album)详细介绍了类似问题的帖子。

# python - pbkdf2 和哈希比较

> ID：11829602
> 
> 赞同：4
> 
> 时间：2012-08-06T13:48:49.423
> 
> 标签：python, hash, comparison, pbkdf2

我使用 mitsuhiko 的 pbkdf2 实现进行密码散列：

```
def pbkdf2_bin(data, salt, iterations=1000, keylen=24, hashfunc=None):
    """Returns a binary digest for the PBKDF2 hash algorithm of `data`
    with the given `salt`.  It iterates `iterations` time and produces a
    key of `keylen` bytes.  By default SHA-1 is used as hash function,
    a different hashlib `hashfunc` can be provided.
    """
    hashfunc = hashfunc or hashlib.sha1
    mac = hmac.new(data, None, hashfunc)
    def _pseudorandom(x, mac=mac):
        h = mac.copy()
        h.update(x)
        return map(ord, h.digest())
    buf = []
    for block in xrange(1, -(-keylen // mac.digest_size) + 1):
        rv = u = _pseudorandom(salt + _pack_int(block))
        for i in xrange(iterations - 1):
            u = _pseudorandom(''.join(map(chr, u)))
            rv = starmap(xor, izip(rv, u))
        buf.extend(rv)
    return ''.join(map(chr, buf))[:keylen] 
```

此函数返回二进制摘要，然后将其编码为 base64 并保存到数据库。此外，当用户登录时，该 base64 字符串被设置为 cookie。

此函数用于密码哈希比较：

```
def comparePasswords(password1, password2):
    if len(password1) != len(password2):
        return False
    diff = 0
    for x, y in izip(password1, password2):
        diff |= ord(x) ^ ord(y)
    return diff == 0 
```

我想知道二进制哈希和base64字符串在安全性方面的比较是否有任何区别？例如，当用户登录时，我计算提交密码的二进制摘要，从数据库中解码 base64 字符串，然后比较两个二进制哈希，但如果用户有一个带有 base64 字符串的 cookie，我直接将它与来自的字符串进行比较数据库。

第二个问题是关于盐的：

os.urandom 返回二进制字符串，但在它用于哈希生成之前，我还将它编码为 base64。有什么理由我不应该这样做并以二进制形式使用盐吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-06T17:01:08.730

**回答问题 1**：比较字节与比较 base64 编码字符串时没有重大的安全差异......您只是在比较`n`或`n*4/3`元素。使用 base64的运行时间会`4/3`更长，但时间量仍然微不足道:)

也就是说，有一个 python 开发人员[讨论](http://bugs.python.org/issue15061)了类似的“恒定时间”比较函数，他们遇到了一些 VM 级别的陷阱——如果你的输入是`unicode`字符串而不是`bytes`，特别是如果 unicode 包含非 ASCII 字符，可能仍然存在一些微妙的定时攻击（比短路相等攻击小几个数量级）。因此，如果可能的话，我会坚持使用字节（无论是二进制数据还是 ASCII 编码的 base64 数据）。但是，在 PBKDF2 的情况下，我不会*太担心，因为比较函数旨在击败的*[定时攻击](http://rdist.root.org/2009/05/28/timing-attack-in-google-keyczar-library/)更多地适用于 HMAC 签名，而不是密码哈希验证......但安全总比抱歉好。

**回答问题 2**：对于不安全的结构，例如`md5(salt+password)`，首先对 salt 进行编码将允许攻击者使用现有的 ASCII md5 表来攻击整个摘要，而原始二进制 salt 会使此类表无用。然而，PBKDF2-HMAC 做了足够多的修改，唯一重要的是盐包含`n`一些熵——无论是`n/8`原始字节的形式，还是`n/6`base64 字符的形式都不会影响安全性。

**其他说明**：我只是想添加与您发布的内容有关的其他几点...

1.  出于安全考虑，我强烈建议使用 SHA256/512 而不是 SHA1 作为 PBKDF2-HMAC 散列函数，并且为了安全起见 >= 10,000 轮（截至 2012 年）。

2.  在 cookie 中发送摘要（即使没有盐）的想法让我觉得可能不安全......如果有人窃取了该 cookie（例如跨站点脚本攻击），他们可能会以用户身份登录（尽管我不知道其余的应用程序的安全设置）。使用带有随机生成的会话 id 的会话层（例如[Beaker](http://pypi.python.org/pypi/Beaker/)）可能是一个不错的选择。

3.  我建议使用 Passlib [PBKDF2](http://packages.python.org/passlib/lib/passlib.utils.pbkdf2.html#passlib.utils.pbkdf2.pbkdf2)和[consteq](http://packages.python.org/passlib/lib/passlib.utils.html#passlib.utils.consteq)实现，它的 PBKDF2 例程比 mitsuhiko 快 5 倍，并且可以利用[M2Crypto（](http://pypi.python.org/pypi/M2Crypto/)如果存在）。*（免责声明：我是 Passlib 的作者）*。它还有一个现成的[pbkdf2-sha256](http://packages.python.org/passlib/lib/passlib.hash.pbkdf2_digest.html)密码散列函数，但如果你在 cookie 中发送摘要，它就没有多大用处了。

# javascript - 仅部分检索到 localStorage 数据

> ID：11829603
> 
> 赞同：0
> 
> 时间：2012-08-06T13:48:48.770
> 
> 标签：javascript, ios, cordova, local-storage

我目前正在使用 Phonegap 1.4.1 开发移动应用程序。在 iOS（当前使用 5.1）上，应用程序不会从 localStorage 加载所有数据。

第一次使用该应用程序时，我在 localStorage 中设置了一个标志，如下所示：

```
window.localStorage.setItem("myFlag", "true"); 
```

我也以同样的方式设置项目“ItemA”、“ItemB”和“ItemC”。这些键/值对中的每一个都是在应用程序使用期间的不同时间设置的，因此没有定义它们的设置顺序。

**我的问题是这样的：**

当我重新安装应用程序时，没有先删除现有副本，应用程序不再看到“MyFlag”、“ItemB”或“ItemC”——它*确实*看到了“ItemA”。当它应该返回 4 时，使用`window.localStorage.length`返回 1。我已经导出了应用程序的数据文件并使用 SQLite Inspector（来自应用商店的应用程序）检查了 file__0.localstorage 文件，它显示了所有四个键/值对。

由于 iOS 5.1+ 已将 localstorage 移至 Cache 文件夹，因此我已经实现了 file__0.localstorage 文件的备份，如此处[所述](http://pastebin.com/5881768B)。基本上，这样做是在应用程序暂停和退出时将 localstorage db 复制到 Documents 文件夹，并在执行 webViewDidStartLoad 时复制回 Cache 文件夹。这部分工作正常，所以我不认为该程序导致了问题（在我添加该程序之前，应用程序中存在问题的症状）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-10T09:18:44.127

这原来是[此处](https://issues.apache.org/jira/browse/CB-347?focusedCommentId=13233261&page=com.atlassian.jira.plugin.system.issuetabpanels%3acomment-tabpanel#comment-13233261)报告的 Cordova (Phonegap) 错误的结果。因此，这是 Apple 将 file__0.localstorage 文件的位置移动到 Cache 目录和 Apple 错误的组合，在升级到应用程序的新版本时，应用程序的 Bundle ID 会发生更改，并且没有几个 .plist 文件条目'未更新以反映新的 Bundle ID。

[此处](https://issues.apache.org/jira/browse/CB-330)作为附件发布的建议修复并不完全适用于开箱即用，因为文件包括引用了 JSONKit 的引用 CDVInvokedUrlCommand。因此，还需要下载最新的 CDVInvokedUrlCommand.h 和 CDVInvokedUrlCommand.m 以及 JSONKit.h 和 JSONKit.m（均来自 Cordova GitHub 存储库）。建议修复的 Phongap 1.4.1 版本的 README.txt 文件中的代码也包含一个错误。它说：

*6) 在您的应用程序的“AppDelegate.m”中，将您的“webViewDidStartLoad”函数替换为：*

```
 - (void) webViewDidStartLoad:(UIWebView *)theWebView 
    {
        static CDVLocalStorage* localStorage = nil;
        if (localStorage == nil) {
            localStorage = [[CDVLocalStorage alloc] initWithWebView:theWebView];   
            [localStorage restore:nil withDict:nil];
        }

        return [ super webViewDidStartLoad:theWebView ];
    } 
```

但是应该说将上述方法的主体添加到您已经使用此签名的方法中 - 并且该行`[localStorage restore:nil withDict:nil];`应该更改为`[localStorage restore:nil];`，因为前一个方法签名在任何地方都不存在。

当然，还必须将正确的导入添加到 AppDelegate.m。

* * *

对于有能力的人来说，升级到最新版本的 Phonegap 将是最简单的解决方案。但是，我们正在使用（相对突然的）古老版本 1.4.1 和一个 3rd 方插件，它与新版本的 Phonegap 不兼容 - 所以这个修复最适合我们。

# mysql - 狮身人面像可扩展性

> ID：11829607
> 
> 赞同：1
> 
> 时间：2012-08-06T13:49:08.263
> 
> 标签：mysql, scalability, sphinx

我目前使用 Sphinx Search 来优化我们的搜索页面。

该网站的受欢迎程度正在增长，这导致 Sphinx 的负载增加。尽管此时没有什么可担心的，但我想知道 Sphinx 的可扩展性如何。我在他们的网站和其他教程上读过它可以很好地扩展，但没有一个真正解释了如何准确。

有没有人在这个问题上有一些具体的例子？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T17:10:27.900

有两件事：

*   在同一台机器上扩展 - 通常每个索引使用一个核心，您可以将索引拆分为几个块（片段）并创建所谓的本地分布式索引。您还需要设置 dist_threads 来声明每次搜索要使用多少个内核（最好是拥有比块更多的内核，以便为其他进程腾出内核）

*   在多台机器上扩展 - 在这种情况下，每个块都在另一台服务器上（称为代理），并且一个服务器充当主服务器（或者您可以在每台机器上拥有多个块并为每个代理使用上述块）请检查[http://sphinxsearch.com /docs/current.html#distributed，http://sphinxsearch.com/docs/current.html#conf-agent，http://sphinxsearch.com/docs/current.html#conf-index-type，http://](http://sphinxsearch.com/docs/current.html#distributed) _ [_](http://sphinxsearch.com/docs/current.html#conf-agent) _ [_](http://sphinxsearch.com/docs/current.html#conf-index-type) _ [_ /sphinxsearch.com/docs/current.html#conf-dist-threads](http://sphinxsearch.com/docs/current.html#conf-dist-threads)和[http://sphinxsearch.com/blog/2011/10/19/dist_threads-the-new-right-way-to-use-many-cores /](http://sphinxsearch.com/blog/2011/10/19/dist_threads-the-new-right-way-to-use-many-cores/)

# c# - C# if / else 线程中断

> ID：11829612
> 
> 赞同：0
> 
> 时间：2012-08-06T13:49:26.230
> 
> 标签：c#

我是 C# 的新手，我刚从 PHP 来。

具体来说，让我“复制/粘贴”我难以理解的代码。

我有一个函数，它从“当前年份”中减去“出生年份”并返回更新的年龄。现在，我需要检查用户的年龄是否小于 30 岁以打印出“您太年轻，无法查看此页面”消息，然后询问他/她是否想继续回答其余问题。然后我们根据答案做出决定。如果答案是“是”，我们如下所示，继续。现在我想知道，但是如果用户说“不”怎么办？如何中断代码？

例如，在 PHP 中，我曾经输入这个 - “exit()”。

提前致谢。

```
 if (ma.HowOldImI(date1, date2) < 30)
        {
            Console.WriteLine("you are too young to view this page");

            Console.WriteLine("would you like to continue the session?");

            string confirm = Console.ReadLine();

            if (confirm == "yes")
            {
                Console.WriteLine("Please type your name");
                string nm = Console.ReadLine();
                Console.WriteLine("Please type your born year");
                int ag = Convert.ToInt16(Console.ReadLine());

                gr.YouWereBorn(nm, ag);
            }
        }
        else
        {
            Console.WriteLine("You are " + ma.HowOldImI(date1, date2) + " years old\n");
        } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:51:42.240

如果要退出函数，只需执行“return;”即可

例如

```
 if (ma.HowOldImI(date1, date2) < 30)
    {
        Console.WriteLine("you are too young to view this page");

        Console.WriteLine("would you like to continue the session?");

        string confirm = Console.ReadLine();

        if (confirm == "yes")
        {
            Console.WriteLine("Please type your name");
            string nm = Console.ReadLine();
            Console.WriteLine("Please type your born year");
            int ag = Convert.ToInt16(Console.ReadLine());

            gr.YouWereBorn(nm, ag);
        }
        else
        {
            return;
        }
    }
    else
    {
        Console.WriteLine("You are " + ma.HowOldImI(date1, date2) + " years old\n");
    } 
```

如果您需要停止当前的消息泵[，](http://geekswithblogs.net/mtreadwell/archive/2004/06/06/6123.aspx)只需`Application.Exit();`使用`Environment.Exit(0);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:24:07.710

您可以采取的选项很少，其他用户已经说过，但我的目的是尝试解释哪些选项最适合您的情况。

首先，我假设您正在使用控制台应用程序（纯粹基于您使用`Console.ReadLine()`.

考虑到这一点，我们知道您`Main(string args[])`在某处有一种方法。那么第一个问题是，你的代码片段是直接用在这个`Main()`函数中的吗？

如果是这样，那么您可能已经知道，一旦程序到达函数的末尾，程序就会退出。但是，知道您可以使用[return](http://msdn.microsoft.com/en-us/library/1h3swy84%28v=vs.71%29.aspx)语句提前结束任何函数的流程是很有用的。

> return 语句终止它出现的方法的执行，并将控制权返回给调用方法。它还可以返回可选表达式的值。如果方法是 void 类型，则可以省略 return 语句。

在这种情况下`void`使用，因此您可以简单地使用：

```
return; 
```

而不是说，例如：

```
return "a string"; 
```

如果您的代码逻辑在另一个函数中（由函数调用的`main()`函数），那么您不能简单地从函数返回以结束程序（尽管这可能是结果），因为您的主函数中的任何进一步代码仍然需要被执行。

已经建议的其他方法，例如`Application.Exit()`并且`Environment.Exit()`会给您结束应用程序的预期效果，但我建议不要直接使用这些方法，因为它不会给用户任何好的反馈。但是，您可以创建一个小包装函数来结束应用程序，例如：

```
public void EndApplication()
{
   Console.WriteLine("You have chosen to end the application, hit enter to say Goodbye...");
   Console.ReadLine();
   Environment.Exit(0);
} 
```

然后可以从您选择的任何地方调用它（如果您需要，[这里有一些备用错误代码）。](http://msdn.microsoft.com/en-us/library/ms681382%28VS.85%29.aspx)

但是，我更愿意让应用程序自然地流过该`Main()`函数，并在最后显示您的告别信息。`return;`选择在子函数中使用语句，例如：

```
public void Main(string[] args)
{
   DoMyWork();

   Console.WriteLine("You have chosen to end the application, hit enter to say Goodbye...");
   Console.ReadLine();
}

private void DoMyWork()
{
   //...

   string confirm = Console.ReadLine();

   if(confirm.ToLower() == "no")
   {
      return;//no need to continue with this function
   }

   //carry on with you logic
   Console.WriteLine("Please type your name");

   //...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:52:30.207

如果用户说不，请仔细查看代码。请输入姓名等的逻辑被跳过，函数退出。如果没有，那么按照大家说的做：

```
return; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T13:53:11.553

您可以尝试使用此代码 - 添加返回

```
 if (confirm == "yes")
    {
        Console.WriteLine("Please type your name");
        string nm = Console.ReadLine();
        Console.WriteLine("Please type your born year");
        int ag = Convert.ToInt16(Console.ReadLine());

        gr.YouWereBorn(nm, ag);
    }
    else
    {
        return;
    } 
```

# mysql - MySQL 多对多条件，结合 AND/OR

> ID：11829617
> 
> 赞同：3
> 
> 时间：2012-08-06T13:49:36.797
> 
> 标签：mysql, sql, many-to-many

我对 mysql 查询有疑问，这是一个复杂的问题，[与匹配所有标签的多个“标签”（多对多关系）的 Mysql 连接查询有关？](https://stackoverflow.com/questions/3267609/mysql-join-query-for-multiple-tags-many-to-many-relationship-that-matches-al)

所以我有经典的 MN 表模式：

```
Item
1 | Item1
2 | Item2
...

Category
1 | Category1
2 | Category2
3 | Category3
4 | Category4
...

Item_has_category
1 | 1
... 
```

问题是-如何获取行，其中*item*有*Category1* **OR** *Category2* **AND** *Category3*？

它适用于一些复杂的过滤器，某些类别有一个特殊的组，必须与**AND**。

我想我必须将 HAVING 与 DISTINCT 结合起来*（链接到顶部的另一个问题）*，但我不确定如何。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:54:16.757

这`group by`会起作用：

```
select  ItemId
from    Item_has_category
group by
        ItemId
having  sum(case when CategoryId = 1 then 1 end) = 1
        or sum(case when CategoryId = 2 then 1 end) = 1
        andsum(case when CategoryId = 3 then 1 end) = 1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:53:44.533

```
select * from Item i
  inner join Item_has_category ic on i.ID = ic.I_ID
  where (ic.C_ID = 1 OR ic.C_ID = 2) AND ic.C_ID = 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T13:56:22.733

试试这个：：

物品

类别

Item_has_category

```
Select * from 
itemcategorymapping icm 
inner join item i on (icm.itemID=i.itemId)
inner join category c on (icm.catId=c.catId)
group by icm.itemId having ((icm.catId=CAT1 or icm.catId=Cat2) AND icm.catID=cat3) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-06T06:38:27.547

Andomar 回答的想法非常好，对我来说是突破性的。我建议升级版本。使用标签组 AND/OR 逻辑是一种更优雅、更通用的方式。它不需要 OR 运算符，具有紧凑、易于解释的视图并且易于生成语法。

```
SELECT  ItemId
FROM    Item_has_category
GROUP BY
        ItemId
HAVING      SUM(CASE WHEN CategoryId IN (1,2) THEN 1 END) > 0
        AND SUM(CASE WHEN CategoryId IN (3)   THEN 1 END) > 0
        AND SUM(... 
```

# netty - 使用 Netty 和 Vlcj 流式传输 ServerClient

> ID：11829619
> 
> 赞同：4
> 
> 时间：2012-08-06T13:49:49.477
> 
> 标签：netty, vlcj

我想制作一个流式音频/视频服务器-客户端应用程序。在这里，客户端将向服务器请求视频/音频文件，客户端可以观看流式文件。

现在，我听说Netty 是一个非常好的网络框架。所以，我想在我的应用程序中使用这个框架。我非常需要任何教程、源代码、相关文档来使用 netty 和 Vlcj 制作 RTSP/RTP 服务器客户端。

我已经查看了谷歌，但是我找不到任何一个文档可以教我如何编写用于音频/视频流的 RTSP/RTP 服务器客户端......

# html - Overflow and Ellipsis do not work in IE for this table

> ID：11829625
> 
> 赞同：0
> 
> 时间：2012-08-06T13:50:11.317
> 
> 标签：html, css, cross-browser

FF v14 has the look I am seeking. IE9 does not hide overflow nor does it show the ellipsis. How can I fix this to work in IE9?

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<title></title>
    <style type="text/css">
    .col
    {
        max-width:10em;overflow:hidden;text-overflow:ellipsis;
    }
    .row
    {

    }
    .table
    {
        white-space: nowrap;
    }
    </style>
</head>
<body>
<table class="table">
    <tr class="row">
        <td class="col">This is some text in row 1 column 1</td>
        <td class="col">This is what it looks like in row 1 column 2</td>
    </tr>
    <tr class="row">
        <td class="col">here is row 2 column 2</td>
    </tr>
</table>
</body>
</html> 
```

**UPDATE**
I noticed a validation error in visual studio:

```
Validation (CSS 2.1): 'text-overflow' is not a known CSS property name. 
```

Does this mean I need to somehow explicitly specify a higher version of CSS? If yes, how?

[Fiddle](http://jsfiddle.net/smacky311/zrRYq/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T16:02:45.577

The only solution that I think of is to wrap the contents of the cells in DIVs:

```
 <td><div class="col">This is some text in row 1 column 1</div></td> 
```

A bit messy, but it does seem to work in IE, Chrome, FF and Safari.

# ember.js - ember.js pushObject 不推送

> ID：11829626
> 
> 赞同：5
> 
> 时间：2012-08-06T13:50:11.963
> 
> 标签：ember.js

让我的大脑围绕着 emberjs。尝试创建一个控制器，该控制器从返回 JSON 数组的 Web 服务调用加载对象：

*（请注意，这是从 coffeescript 生成的 javascript）*

```
MTM.Trade.controller = Ember.ArrayController.create({
  loadAll: function() {
    var self;
    self = this;
    this.set('content', []); /* fails with or without this line*/
    return $.getJSON('http://localhost:8080/webservice/trades', function(data) {
      var jsonTrade, trade, _i, _len;
      console.log("Length = " + data.length);
      for (_i = 0, _len = data.length; _i < _len; _i++) {
        jsonTrade = data[_i];
        trade = MTM.Trade.create(jsonTrade);
        self.pushObject(trade);
      }
      console.log("Everything pushed");
    });
  }
}); 
```

在调用`MTM.Trade.controller.loadAll()`时，很明显正在为每个对象调用循环。但是我的控制器永远不会改变..运行`console.log MTM.Trade.controller.get('content')`返回一个空白数组。

我知道 ember-rest 和 ember-data 存在，但现在我正在自己动手学习如何自己做这些事情，稍后将迁移到这些框架。

**更新**

感谢[这篇文章](http://www.thesoftwaresimpleton.com/blog/2012/03/18/emberjs-collections/)，我确实得到了我的问题的答案。我需要这样初始化我的数组：

```
MTM.Trade.controller = Ember.ArrayController.create({

  init: function() {
    this._super();
    return this.set('content', Ember.A());
  },

loadAll: function() {
    ... 
```

所以现在我的问题是，为什么？直觉上不应该`ArrayController`初始化器处理这个吗？也许这不是`ArrayController`预期的使用方式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:28:22.520

在您更新之前，我发表了一条评论，告诉您在创建时初始化内容（因此在创建的哈希中）。

```
MTM.Trade.controller = Ember.ArrayController.create({
    content: [],
    //...
}); 
```

但后来我看到你在 loadAll 函数中设置`content`为。`[]`所以我认为初始化是不必要的。

最接近 时`ArrayController`，它只是`ArrayProxy`mixin 的扩展，（即：接口种类），因此在创建 an 的实例时`ArrayController`，您必须定义`content`属性。

# vb.net - VB.net 使用谷歌翻译

> ID：11829629
> 
> 赞同：1
> 
> 时间：2012-08-06T13:50:14.667
> 
> 标签：vb.net, winforms

我试图翻译“测试”这个词，
我的代码：

```
Imports Google.API.Translate

Public Class Form1

    Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
        TextBox1.Text = "test"
        Dim gtras As New TranslateClient("MY API KEY")
        Label1.Text = gtras.Translate(TextBox1.Text, Language.English, Language.Hebrew, TranslateFormat.Text)

    End Sub
End Class 
```

例外是：

```
Attempt by method 'Google_Translator.Form1.Button1_Click(System.Object, System.EventArgs)' to access method 'Google.API.Enumeration.op_Implicit(Google.API.Enumeration)' failed. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T04:12:57.520

此问题已在更高版本的 API 中得到修复（0.3.1 似乎可以工作）：

[http://code.google.com/p/google-api-for-dotnet/issues/detail?id=43](http://code.google.com/p/google-api-for-dotnet/issues/detail?id=43)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-26T11:12:19.543

修复编码和更新代码

```
Public Shared Function gtranslate(ByVal inputtext As String, ByVal fromlangid As String, ByVal tolangid As String) As String
    inputtext = HttpUtility.HtmlAttributeEncode(inputtext)
    Dim step1 As New WebClient
    step1.Encoding = Encoding.UTF8
    Dim step2 As String = step1.DownloadString("https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=" & tolangid & "&hl=" & fromlangid & "&dt=t&dt=bd&dj=1&source=icon&q=" & inputtext)
    Dim step3 As Newtonsoft.Json.Linq.JObject = JObject.Parse(step2)
    Dim step4 As String = step3.SelectToken("sentences[0]").SelectToken("trans").ToString()

    Return step4

End Function 
```

添加：**step1.Encoding = Encoding.UTF8**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-23T18:19:38.190

这段代码效果很好：

```
Imports Newtonsoft.Json
Imports Newtonsoft.Json.Linq
Imports System
Imports System.Net
Imports System.Text
Imports System.Web
Public Class Form1

Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click
    MsgBox(gtranslate(TextBox1.Text, "it", "en"))'From italian to english, of course you can change it
End Sub

Public Shared Function gtranslate(ByVal inputtext As String, ByVal fromlangid As String, ByVal tolangid As String) As String
    inputtext = HttpUtility.HtmlAttributeEncode(inputtext)
    Dim step1 As New WebClient
    Dim step2 As String = step1.DownloadString("https://translate.googleapis.com/translate_a/single?client=gtx&sl=auto&tl=" & tolangid & "&hl=" & fromlangid & "&dt=t&dt=bd&dj=1&source=icon&q=" & inputtext)
    Dim step3 As Newtonsoft.Json.Linq.JObject = JObject.Parse(step2)
    Dim step4 As String = step3.SelectToken("sentences[0]").SelectToken("trans").ToString()
    Return step4
End Function
End Class 
```

dll 库“Newtonsoft.JSON”可从[他们的网站](http://www.newtonsoft.com/json)获得，如果“HttpUtility”出现一些错误，请在添加参考窗口 -> .net 选项卡中添加参考“System.Web”

# facebook - 开放式图表视频的 GA 事件跟踪或其他跟踪

> ID：11829632
> 
> 赞同：3
> 
> 时间：2012-08-06T13:50:17.447
> 
> 标签：facebook, video, google-analytics, jwplayer

我正在尝试找到一种从 Facebook 上播放的视频中跟踪事件数据的好方法。这些是直接嵌入到 Facebook 中的视频，Facebook 会在其中提取视频的开放图元数据。

我正在使用 JW Player，它有一个谷歌分析插件，但他们已经确认在 Facebook 上分享时无法使用它。

如果我对一些修改进行硬编码，理论上 Flash 播放器本身是否能够向 Google 发送事件跟踪数据？我很好奇 YouTube 和 Vimeo 等大玩家如何为他们的视频提供分析数据，这些数据与开放图形标签共享。

我在想也许我可以以某种方式将 Insights API 与 Facebook 一起使用，我也在研究这一点。

谢谢

**更新**我已经在帖子中添加了赏金，并希望澄清一些事情。JW Player 开发人员表示，他们当前的 Google Analytics 插件无法工作，因为它是使用 JavaScript 实现的，需要嵌入 JW 的嵌入器。他们早期版本的插件是在 Flash 中实现的，但*由于 facebook 嵌入了带有 'allowscriptaccess="never"' 属性的 SWF* ，因此无法正常工作。

允许脚本访问限制令人沮丧，因为据我所知，这意味着嵌入 src 被限制发出任何 HTTP 请求（如对 Google 的请求）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-16T14:27:28.640

> 允许脚本访问限制令人沮丧，因为据我所知，这意味着嵌入 src 被限制发出任何 HTTP 请求（如对 Google 的请求）。

我认为这是一种误解。Flash 仍然能够从 Flash 中执行 HTTP 请求。该`allowscriptaccess="never`标志仅禁止 Flash 在页面上发出 javascript 命令，这无非是 Facebook 或任何其他允许用户在其他人的时间线上发布 Flash 对象的网络所期望的。如果允许 javascript 访问，则 flash 对象可以将恶意 javascript 脚本注入 facebook。

为 Google Analytics 实施 Flash 跟踪的推荐方法是使用[gaforflash 库](http://code.google.com/p/gaforflash/)。这个库有 2 种模式，AS3 模式和 BRIDGE 模式。在 BRIDGE 模式下，flash 对象向页面发出 javascript 命令，而在 AS3 模式下，一切都发生在 flash 内。

对于将播放器嵌入到您不拥有的页面的情况，您应该使用 AS3 模式。所以在这个用例中，正确的做法是使用 AS3 模式。

请注意，JW Player 具有 Google Analytics PRO 插件。[版本 1](http://www.longtailvideo.com/AddOns/get-plugin.html?addon=107&vid=108)似乎支持 AS3 模式，但就我而言，[版本 2](http://www.longtailvideo.com/AddOns/get-plugin.html?addon=107&vid=292)没有该选项。所以你需要使用版本 1 才能使用 AS3 模式。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-14T14:55:28.323

在 FB 中创建一个 iFrame，然后您可以随意跟踪它。

[http://www.hyperarts.com/blog/tutorial-add-an-iframe-application-to-your-facebook-fan-page-fall-2012/](http://www.hyperarts.com/blog/tutorial-add-an-iframe-application-to-your-facebook-fan-page-fall-2012/)

其他方式：

[http://www.facebook.com/iframe.apps](http://www.facebook.com/iframe.apps)

一旦你有了它，你应该可以零问题地实施你想要的任何跟踪。就个人而言，如果我是您，我会专门为在该 iFrame 中查看的页面设置一个子域，例如：facevids.example.com，然后使用配置文件过滤器来监控该流量。将其放入子域并将其从您的主要个人资料中过滤出来将防止您从 Facebook 膨胀您的推荐统计信息，因为每次弹出该视频时，它都会告诉您您正在从 FB 获得点击量。更多信息在这里：

[http://services.google.com/analytics/breeze/en/v5/filters_v15_ad1/](http://services.google.com/analytics/breeze/en/v5/filters_v15_ad1/)

这是有关如何设置这一切的更深入的教程：

[http://answers.oreilly.com/topic/1972-how-to-track-across-multiple-subdomains-with-google-analytics/](http://answers.oreilly.com/topic/1972-how-to-track-across-multiple-subdomains-with-google-analytics/)

这种类型的设置应该为您提供最准确的指标。

# r - 将参数传递给 Compose 的函数？

> ID：11829633
> 
> 赞同：5
> 
> 时间：2012-08-06T13:50:37.443
> 
> 标签：r, functional-programming

我有一种情况，我想将参数传递给通过`Compose`. 我意识到我可以在参数中使用 Curry，但我希望生成的函数比这更灵活。这是一个显示问题的简单测试用例：

```
> library(functional)
> f <- function(x, scale) x^2*scale
> g <- function(y, shift) sqrt(y)+shift
> h <- Compose(f,g)
> h(1)
Error in x^2 * scale : 'scale' is missing
> h(1, scale=1, shift=0)
Error in Reduce(function(x, f) f(x), fs, ...) : 
  unused argument(s) (scale = 1, shift = 0) 
```

有什么方法可以使用`Compose`它允许结果函数在被调用时仍然允许参数？ `?Compose`没有什么帮助，除了作为可爱键盘的挽歌。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T17:49:19.707

由于[函数组合](http://en.wikipedia.org/wiki/Function_composition_%28computer_science%29)是在计算机科学中制定的，因此所有函数都只有一个参数。该`Composition`函数也假设了这一点。`Curry`ing 是解决此问题的典型方法。另一个复杂之处在于，任何附加的命名参数都必须在组合过程中传递给正确的函数。

这里有几种方法：

```
h1 <- function(scale, shift)
  Compose(Curry(f,scale), Curry(g,shift)) 
```

`h1`采用命名参数并使用正确的柯里化创建组合函数。返回是一个 1 参数函数：

```
> h1(scale=1, shift=0)(1)
[1] 1 
```

另一种方法是将柯里化（以及组合）延迟到实际的函数评估。在这种情况下，原始的“Compose”函数只是设置了所有内容，但实际上并没有进行组合，而是返回一个可进行柯里化、组合和评估的函数。

```
ComposeDelayedCurry <- function(...) {
  fs <- list(...)
  all.formals <- lapply(fs, formals)
  function(...) {
    local.args <- list(...)
    pos.args <- lapply(all.formals, function(f) {
      local.args[names(f)[[-1]]]
    })
    curried <- lapply(seq_along(fs), function(i) {
      do.call(Curry, c(fs[[i]], pos.args[[i]]))
    })
    do.call(Compose, curried)(..1)
  }
}

h2 <- ComposeDelayedCurry(f,g) 
```

现在调用`h2`将在评估时完成所有工作。这做了几个假设。一个是每个函数（和函数调用）的第一个参数是被组合的那个。第二个是所有其他参数都是命名参数。没有任何东西可以通过`...`. 这是因为必须检查每个函数的形式，以了解每个参数“去”到哪里。我认为这将处理不使用默认值指定参数，但我不完全确定。

```
> h2(1, scale=1, shift=0)
[1] 1
> h2(3, scale=5, shift=2)
[1] 8.708204
> sqrt(5*(3^2))+2
[1] 8.708204 
```

# sql-server-2008 - Active Record 连接到 SQL Server 2008 说没有已知的事件侦听器

> ID：11829637
> 
> 赞同：0
> 
> 时间：2012-08-06T13:51:00.363
> 
> 标签：sql-server-2008, nhibernate, activerecord

我尝试使用活动记录连接到 SQL SERVER 2008，我得到：无法初始化 ActiveRecords！---> System.ArgumentException: The Listener of type .... 没有实现任何已知的 NHibernate 事件监听器接口。

这是我的业务对象声明中的一些问题吗？它适用于其他数据库、Oracle、SQLite 等...

```
<activerecord isWeb="false" isDebug="false">
      <config>
        <add key="connection.driver_class" value="NHibernate.Driver.SqlClientDriver" />
        <add key="dialect" value="NHibernate.Dialect.MsSql2008Dialect" />
        <add key="connection.provider" value="NHibernate.Connection.DriverConnectionProvider" />
        <add key="connection.connection_string" value="Data Source=SQLSERVER;Initial Catalog=HFPMDB;User ID=db_owner;Password=HFPMAdmin;" />
        <add key="proxyfactory.factory_class" value="NHibernate.ByteCode.Castle.ProxyFactoryFactory, NHibernate.ByteCode.Castle" />
      </config>
    </activerecord> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:08:20.267

看起来我在“ActiveRecordAssemblies”中添加了一个额外的程序集。该程序集不包含任何 Active Record 属性等，这就是原因。

# vba - 如何确定一行中使用的列数

> ID：11829638
> 
> 赞同：0
> 
> 时间：2012-08-06T13:51:01.413
> 
> 标签：vba, excel

我正在尝试确定特定行中使用的列数并将它们向右移动。这是我到目前为止所拥有的，但这似乎不起作用。请帮忙。

```
Dim LastCol As Integer
LastCol = DataSheet.Cells(arr(z)(1), DataSheet.Cells(arr(z)(1).Columns.Count))
'arr(z)(1) is an integer extracted from a 2 multidimensional array           
Dim rng As Range

Set rng = Range(DataSheet.Cells(arr(z)(1), 2), DataSheet.Cells(arr(z)(1),LastCol))   
rng.Insert Shift:=xlRight 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:04:27.513

```
Dim LastCell as Range   
With DataSheet
    Set lastCell = .Cells(arr(Z)(1), Columns.Count).End(xlToLeft)
    .Range(.Cells(arr(Z)(1), 2), lastCell).Insert Shift:=xlShiftToRight
End With 
```

# xml - xsl 多重排序层次结构

> ID：11829642
> 
> 赞同：0
> 
> 时间：2012-08-06T13:51:11.320
> 
> 标签：xml, xslt

我有一个看起来像这样的 XML 结构 -

```
<Root>
  <name rank = "1">ABC
     <name rank ="1">BCD</name>
  </name>
  <name rank ="0">XYZ
     <name rank ="1">BCD</name>
     <name rank ="3">YYZ</name>
     <name rank ="0">FEG</name>
     <name rank ="0">DEG</name>         
  </name>
</Root> 
```

我想通过制作它的副本来转换这个 XML，保留层次结构，并按顺序对其进行排序 (1) 按等级 (升序) (2) 如果等级相等，则按名称排序(升序)

改造后的结构应该是这样的。

```
<Root>      
      <name rank ="0">XYZ
         <name rank ="0">DEG</name>
         <name rank ="0">FEG</name>
         <name rank ="1">BCD</name>
         <name rank ="3">YYZ</name>         
      </name>
      <name rank = "1">ABC
         <name rank ="1">BCD</name>
      </name>
 </Root> 
```

我有以下 XSL，它不保留层次结构或给我正确的排序。有人可以帮我吗？这是我第一次使用 XSL，如果有任何帮助或正确方向的指示，我将不胜感激。

```
<xsl:template match="/*">

    <xsl:copy>
    <xsl:for-each select="//name">
        <xsl:sort select="@rank" data-type="number" order="ascending"/>
        <xsl:sort select="name" order="ascending" />
        <xsl:copy-of select="."/>
    </xsl:for-each> 
    </xsl:copy>
  </xsl:template> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:05:36.873

**这种转变**：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
 <xsl:output omit-xml-declaration="yes" indent="yes"/>
 <xsl:strip-space elements="*"/>

 <xsl:template match="/*">
  <Root>
    <xsl:apply-templates select="name">
     <xsl:sort select="@rank" data-type="number"/>
     <xsl:sort/>
    </xsl:apply-templates>
  </Root>
 </xsl:template>

 <xsl:template match="name">
  <name rank="{@rank}">
    <xsl:copy-of select="text()"/>
    <xsl:apply-templates select="name">
     <xsl:sort select="@rank" data-type="number"/>
     <xsl:sort/>
    </xsl:apply-templates>
  </name>
 </xsl:template>
</xsl:stylesheet> 
```

**应用于提供的 XML 文档时**：

```
<Root>
  <name rank = "1">ABC
     <name rank ="1">BCD</name>
  </name>
  <name rank ="0">XYZ
     <name rank ="1">BCD</name>
     <name rank ="3">YYZ</name>
     <name rank ="0">FEG</name>
     <name rank ="0">DEG</name>
  </name>
</Root> 
```

**产生想要的正确结果**：

```
<Root>
    <name rank="0">XYZ
        <name rank="0">DEG</name>
        <name rank="0">FEG</name>
        <name rank="1">BCD</name>
        <name rank="3">YYZ</name></name>
    <name rank="1">ABC
        <name rank="1">BCD</name></name>
</Root> 
```

**说明**：

使用两条`xsl:sort`指令。排序操作的优先级对应于各个`xsl:sort`指令的文档顺序。

# c# - Windows 8 Metro RichTextColumns 嵌入超链接和图像

> ID：11829643
> 
> 赞同：5
> 
> 时间：2012-08-06T13:51:18.583
> 
> 标签：c#, xaml, windows-8, microsoft-metro

我正在用 C# 和 XMAL 为 Windows 8 构建一个简单的 rss 阅读器应用程序。

提要返回文章正文的 html 内容。

我创建了一个 ItemDetailPage 并在其中使用 RichTextBlock 列来显示文本列 - 这看起来很棒。

因此，我将 Content 属性绑定到富文本块，该块使用 HtmlUtilities.ConvertToText 从 html 内容中解析文本。

这很好用。但是我仍然想在内容中包含超链接和图像。最初我使用的是 WebView 和 NavigateToString 但是你不能使用列所以得到一长页的文本，这是我不想要的。

有没有办法做到这一点？我可以使用 Html Agility Pack 的 Metro 端口解析图像和超链接，但有没有办法嵌入这些超链接和图像？对于图像，我正在考虑添加到richtextcolumns 类中，因此在创建新列时，在添加之前，它添加了一个图像。这可能有效，但对于每列开头的图像会很糟糕。

有谁知道如何实现这一目标？我将类似于他们提供的 contoso 新闻应用程序设计[http://msdn.microsoft.com/en-us/library/windows/apps/hh868272.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh868272.aspx)。如果您滚动到文章页面，他们在文章内容中有一个块引用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-26T21:34:28.850

RichTextBlock 包含一个段落集合，一个段落是一个内联列表。内联通常是运行，但您也可以使用 InlineUIContainer 作为内联。InlineUIContainer 有一个子元素，可以通过任何你想要的 XAML 元素、超链接或图像。

我个人使用此函数将超链接从 html 转换为内联：

```
 public void AddLink(XElement element)
    {
        var link = element.Attribute("href").Value;

        InlineUIContainer uc = new InlineUIContainer();
        TextBlock tb = new TextBlock();
        tb.Margin = new Thickness(0, 0, 0, 0);
        var run = new Run();
        run.Text = element.Value;
        tb.Inlines.Add(run);
        tb.Tapped += (s, e) =>
        {
            Launcher.LaunchUriAsync(new Uri(link, UriKind.Absolute));
        };
        uc.Child = tb;
        paragraph.Inlines.Add(uc);
    } 
```

您可以对图像进行类似的思考

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T22:51:41.943

这并不容易，但对于简单到适度的 HTML，它可以完成。请参阅 MSDN 上的此示例项目：

[http://code.msdn.microsoft.com/windowsapps/RTF-TO-HTML-TO-RTF-in-11ec0bd7](http://code.msdn.microsoft.com/windowsapps/RTF-TO-HTML-TO-RTF-in-11ec0bd7)

# javascript - 为什么 require.js 似乎在初始页面加载时加载了我的所有模块？

> ID：11829648
> 
> 赞同：6
> 
> 时间：2012-08-06T13:51:30.750
> 
> 标签：javascript, backbone.js, requirejs

我正在使用 requirejs 开发一个单页主干应用程序，今天当我部署到我们的 beta 服务器时，我发现初始页面加载大约需要 20 秒，同时它会获取所有脚本。

我认为这是因为我在定义模块时使用了依赖数组，如下所示：

```
define([
    'ui',
    'models/user',
    'collections/campaigns',
    'collections/groups',
    'collections/keywords',
    'collections/inboxes',
    'collections/templates',
    'collections/contacts',
    'router'
], function (Ui, UserDetails, Campaigns, Groups, Keywords, Inboxes, Templates, Contacts, Router) {

    return {
        start: function () {
            // ...
            // initialize and start app
            // ...
        }
    }
}); 
```

我认为这意味着当加载主应用程序模块时，将加载所有其他脚本，因为每个模块都使用这种方法。

然后，我更改了获取模块的方法，以便在需要它们`require('...')`时直接调用它们，如下所示：

```
define(function (require) {
    return Backbone.Router(function () {
        // ...
        // route initializtion etc
        // ...

        inbox: function (routeVar) {
            var InboxView = require('InboxView');
            this.inboxView = new InboxView();
            // render view etc
        }
    });
}); 
```

然而令我惊讶的是，再次运行该应用程序并检查 chromes 开发人员控制台的网络选项卡时 - 我看到应用程序正在获取我的所有模块，并且我得到了相同的页面加载时间。

我完全错过了这里的重点吗？因为我的印象是每次调用 require 时都会获取脚本。这不对吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T14:58:13.943

为了异步加载 AMD 模块，您必须调用 require 并提供一个函数回调，该回调将在请求的模块已加载时被调用：

```
require(['InboxView'], function(InboxView) {
  // Do something with InboxView here...
}); 
```

您提供的示例代码`require('InboxView')`以同步方式调用。因为您使用的是“[糖](http://requirejs.org/docs/whyamd.html#sugar)”语法，RequireJS 将检查您的代码，找到任何同步调用`require()`并将这些依赖项添加到模块的顶级依赖项列表中，实际上为您提供：

```
define(['require', 'InboxView'], function (require) {
  return Backbone.Router(function () {
    // ...
    // route initializtion etc
    // ...

    inbox: function (routeVar) {
        var InboxView = require('InboxView');
        this.inboxView = new InboxView();
        // render view etc
    }
  });
}); 
```

...因此您看到所有模块立即加载。

将异步回调添加到要求，你应该没问题。另外，如果您考虑一下，如果 RequireJS 等待加载模块`InboxView`直到您的路由被触发而`require`调用阻塞直到加载完成，您的代码将如何工作？:)

# javascript - 使用 EJS 模板作为“文本/模板”元素的 HTML 验证

> ID：11829652
> 
> 赞同：0
> 
> 时间：2012-08-06T13:51:45.330
> 
> 标签：javascript, html, validation, backbone.js, ejs

当使用像 Backbone 或 Meteor 这样的框架并从 EJS 模板在客户端中构建视图时，关于 HTML 验证的最新想法是什么？

问题似乎是这`name`不是`<script>`标签的官方属性。

我的代码如下所示：

```
<div id="templates">
<script name="template_name" type="text/template">
  <p class="summary">
    <img src="<%= this.model.image() %>"/>
    <br/>
    <%= this.model.summary() %>
  </p>
  <div>
    <%= this.model.content() %>
  </div>
</script>
<!-- etc... -->
</div> 
```

验证错误是

```
Attribute name not allowed on element script at this point.
<script name='hover_grid' type='text/template'>
Attributes for element script:
Global attributes
src
async
defer
type
charset 
```

我是否等待这一点得到支持并捍卫这种方法，或者有没有办法使这个标记有效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:59:59.320

我认为这`name`实际上是`id`

```
<script id="template_name" type="text/template"> 
```

# php - $.ajax succes:function 在收到答案时什么也不做

> ID：11829656
> 
> 赞同：-2
> 
> 时间：2012-08-06T13:51:55.837
> 
> 标签：php, ajax, jquery

这已经困扰了我两个多小时了，我只是没有看到它。

我有一个表单，它在 PHP 中进行了验证。所以我要做的是根据我提交的返回响应创建一个 AJAX 调用，或者不提交表单。这是我的 AJAX 调用：

```
 $("#savePO").click(function() {
        $.ajax({
            type : 'POST',
            url : 'ajax/newpo_check_ajax.php',
            data : $("#newpoform").serialize(),
            succes : function(respons) {
                alert(respons);
            }

        });
}); 
```

响应页面（newpo_check_ajax.php）只是：

```
<?php
echo "AJAX IS WORKING!";
?> 
```

当我检查 Firebug 时，它指出响应确实是它应该是的（“AJAX 正在工作！”），但无论我尝试什么，我都没有得到警报响应！

上面的 jQuery 代码在我页面的底部，因为它在顶部（在`$(document).ready())`.

任何帮助表示赞赏！:)

编辑：不幸的是，我无法再正确阅读了。我忘记了一个成功的S，在哪个。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T13:53:10.037

正确的拼写是`success`，不是`succes`。你`s`最后错过了一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T13:57:25.543

你用 s 写了“succes”，它应该是“success”

# javascript - bxSlider 从 ajax 加载幻灯片

> ID：11829658
> 
> 赞同：0
> 
> 时间：2012-08-06T13:52:06.850
> 
> 标签：javascript, jquery, jquery-plugins, bxslider

有没有办法可以从 ajax 在 bxSlider 中插入幻灯片，并且不会影响平滑度！

我想在页面加载时仅显示 1 张幻灯片的内容，然后单击下一个或上一个将相应地加载内容。

这是我尝试过的。

```
 <div id="slider1">
    <div class="hotProp pager">
    //Here is div content for the first time page load        
    </div>
    </div>

    <script type="text/javascript">
    $(function(){
            page_count = 0;
            var slider = $('#slider1').bxSlider({
            easing:'swing',
            controls: true,
    });

    $('#go-next').click(function(){
                    page_count += 1;                         
                    //send request for next four properties
                    script_name = "~$sf_request->getScriptName()`";
                    $.getJSON(script_name+"/frontend/projects", {page_count: page_count}, function(response){
                    div_content = '<div class="hotProp pager"><div class="clr"></div>';
                    //div_content is content for the next slide
                    $('#slider1').html(div_content);
                    });
       slider.goToNextSlide();
       return false;
       });
 }); 
```

好像我劫持了幻灯片的内容：P

请让我知道如何使用 bxSlider 的 API 来实现这一点。我尝试使用 buildPager，但无法按预期获得 slideIndex。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-02T10:16:47.073

好吧，bxSlider 现在在其设置中有一个“onSlideNext”和“onSlidePrev”回调选项。这些回调分别在您单击 prev/next 按钮之后和 prev/next 转换开始之前调用。你可以利用它们来发挥你的优势。例如 ：

```
$('#your-slider').bxSlider({
     //some default settings here
     onSlideNext : function($slideElement, oldIndex, newIndex){
           //do your ajax here, for example:
           $.get('some-url',someDataObj,function(response){
                 $('#your-slider').append(response);
           });
     }
}) 
```

根据您的要求进行微调，有关更多详细信息，请参阅[http://bxslider.com/options上有关可用选项的文档](http://bxslider.com/options)

# jquery - jquery移动页面引用和点击功能的奇怪问题

> ID：11829664
> 
> 赞同：0
> 
> 时间：2012-08-06T13:52:28.557
> 
> 标签：jquery, ajax, html, jquery-mobile

我有这个奇怪的问题，如果转到我的 index.html 页面（使用 jQuery Mobile 构建的网站），它有一个带有按钮的表单，那么我可以多次单击该按钮，这将生成一个警报（看看是否按钮正在工作）并转到另一个名为 main.html 的页面。当我单击按钮时我会收到警报，并且我也会转到另一个页面。现在，如果我转到 main.html，然后再次返回 index.html 并再次单击该按钮，那么它不会产生警报，也不会返回到 main.html 页面。

我有以下按钮代码：

```
 $(document).ready(function() {    
     //event handler for submit button
     $("#btnSubmit").click(function () {
          alert('fdfs');
          window.location.replace("main.html");
          return false;
    });
}); 
```

**总结：**当我点击按钮时，它会产生一个警报，它会带我到 main.html，但是如果我用这个按钮回到页面，那么它就不会发出警报，也不会再改变页面了..

**解答者：** 而不是使用：

`window.location.replace("main.html");`

我用了：

```
$.mobile.changePage('main.html'); 
```

这是因为我使用 Jquery Mobile。

我还要感谢 Valjas 提供有关导航的额外信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-07T03:18:37.630

`window.location.replace()`正如@jackwanders 所说，使用是一个错误。

使用此变量会发送一个未在浏览器（或 PhoneGap）历史记录中注册的 HTTP 请求。`index.html`即使您单击 ，您的应用程序仍会认为它在内部`#btnSubmit`。

解决方案是使用另一个函数：`window.location.href = "main.html"`

~~此外，您不需要在`document.ready`函数内编写绑定。这仅在您想在页面加载后立即执行操作时才有用 - 但由于您进一步等待用户单击链接，因此您不需要它~~

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T03:19:28.497

~~您正在使用`window.location.replace`它将当前文件中的 HTML 替换为您链接到的文件中的 HTML。您需要使用`window.location.href`which 将转到另一个页面。~~

更多信息在这里：[http ://www.w3schools.com/jsref/obj_location.asp](http://www.w3schools.com/jsref/obj_location.asp)

- 更新 -

格式不同`window.location.replace`。

```
window.location.href = 'main.html'; 
```

如果您仍然有问题，请尝试：

```
window.open('main.html', _blank); 
```

~~这将在新选项卡中打开页面。~~

- 更新 -

由于您使用的是 jQuery Mobile，而不是使用 jQuery 单击绑定，您应该只使用 jQuery Mobile API。

以下是一些应该有帮助的页面：

[http://jquerymobile.com/demos/1.0a4.1/docs/pages/link-formats.html](http://jquerymobile.com/demos/1.0a4.1/docs/pages/link-formats.html)

[http://jquerymobile.com/demos/1.0a4.1/docs/pages/link-formats.html#docs-navmodel.html](http://jquerymobile.com/demos/1.0a4.1/docs/pages/link-formats.html#docs-navmodel.html)

[http://jquerymobile.com/test/docs/pages/page-navmodel.html](http://jquerymobile.com/test/docs/pages/page-navmodel.html)

# javascript - 带有标志和文本的国家建议列表

> ID：11829669
> 
> 赞同：0
> 
> 时间：2012-08-06T13:52:39.993
> 
> 标签：javascript, jquery, html, jquery-ui

我正在尝试建立一个国家建议列表，其中包含在所选结果中的标志。我可以根据名称实现建议框，但我希望在生成的文本框中显示国旗以及所选国家。

另一个要求是默认显示一个带有国旗的国家（比如美国），而不是一个纯文本框。

[http://jsfiddle.net/SfUYg/](http://jsfiddle.net/SfUYg/)

PS。在我的代码中，我试图在 ID 为“国家”的文本框中显示标志。它在下拉列表中工作正常。我也试图在同一个文本框中显示带有文本的默认标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:53:58.023

我认为您需要一个图像占位符来放置标志。我认为您不能将其添加到文本字段中。

这是一个简单的版本：

[http://jsfiddle.net/SfUYg/1/](http://jsfiddle.net/SfUYg/1/)

# asp.net-mvc-3 - 如何使用mvc3 c#从数据库导出到excel文件

> ID：11829671
> 
> 赞同：0
> 
> 时间：2012-08-06T13:52:41.657
> 
> 标签：asp.net-mvc-3, excel, razor, openxml, oledbconnection

我正在“IIS7”下的“mvc3 Razor”应用程序上工作，我希望生成一个 excel 文件（.xls 或 .xlsx），它从具有特定颜色和格式且性能良好的数据库中获取数据。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T20:43:48.750

看看[这个先前的问题](https://stackoverflow.com/questions/11811143/export-datatable-to-excel-with-open-xml-sdk-in-c-sharp)。您可能可以根据需要对其进行调整。那个从 DataSet 生成一个 Excel 文件。也许您可以用您的数据库填充该 DataSet，然后调用该方法。

享受，

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:56:38.410

您可以使用允许您创建和操作 Excel 文件的库之一，例如[EPPlus](http://epplus.codeplex.com/)（开源）或[Aspose](http://www.aspose.com/)（商业）。我对后者有积极的体验。

# git - 如何查找超过一行的 git log 消息？

> ID：11829674
> 
> 赞同：4
> 
> 时间：2012-08-06T13:52:46.570
> 
> 标签：git, grep

我想`git log`在项目中使用仅查看提交消息中包含多行的提交（即它们有更长的描述）。解决此问题的最佳方法是什么？

我试过`git log --grep='\n\n'`了，它提出了*一个*包含多行的提交列表，但这不是一个完整的列表。（我手动回顾了一些完整的日志，并很快找到了包含我的命令未输出的多行消息的提交。）

然后我也尝试`git log --grep='\n\r\?\n'`了 ，以防某些提交中有 Windows 样式的行结尾（我正在使用`msysgit`，所以它可能是可能的？），但它得到了与上面相同的输出。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T14:02:55.617

这似乎对我有用（在 Linux 上）：

```
git log --pretty=format:'%H<msgst>%b<msge>' \
| fgrep -v '<msgst><msge>' | fgrep '<msgst>' | cut -b1-40 \
| git log --stdin --no-walk 
```

基本上：打印提交哈希和提交消息正文（减去主题行）包含在一些不常见的字符串中，排除此类正文为空的行（例如，消息中没有换行符的提交），然后只取第一行（那些在开头），并且只打印哈希值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-11-27T05:05:05.093

对于一些额外的上下文：

`--grep='\n\n'`使用时发生的事情`\n`并不特别，所以它只是意味着`n`：

您得到的结果与`--grep='nn'`.

* * *

至于你的实际问题：

请注意，`--grep`在换行符处拆分提交消息并将模式分别与每个子字符串匹配。这意味着您不能编写一个模式`--grep`来确定它是否与第一行不同的行匹配。

此外，由于每条提交消息都以换行符结尾，因此拆分总是会产生至少一个完全空的子字符串。这意味着*每个*提交都匹配`--grep='^$'`。

因此，绝对没有办法使用`--grep`to limit`git log`的输出来提交多行消息。

* * *

所以这样做的唯一方法是使用[che's answer](/a/11829856/9410)中给出的方法。正如我在那里评论的那样，我建议这种特殊的形式：

```
git log --format='%H%x09%x09%x09%b' \
| egrep '^[0-9a-f]{40}\t\t\t.' \
| cut -f1 \
| git log --stdin --no-walk   # or whatever 
```

在这个版本中，`grep`保留以提交 ID 开头的行，后跟 3 个制表符，后跟任何字符（即不后跟任何字符，即那些是感兴趣的提交）。这种模式极不可能出现在提交消息正文中，不需要一秒钟`grep`来过滤掉提交消息正文行，并且制表符也恰好是默认字段分隔符，`cut`因此它也更短。

# jquery - 如果用户单击两次，如何强制复选框？

> ID：11829677
> 
> 赞同：1
> 
> 时间：2012-08-06T13:52:52.567
> 
> 标签：jquery, html, user-interface, checkbox

是否可以在页面加载时让两个复选框显示为空白。但是，如果用户单击一个选项，那么他们永远无法单击它-因此目前用户可以在选项之间切换，而您只能打勾一次。但是，如果他们按两次勾选的框，则会删除勾选。

**HTML**

```
My Billing Address is the same <input type="checkbox" class="sameCheck" name="toggleOracleAddress" id="toggleOracleAddress" value="SAME" /> <br /> <br />
My Billing Address is the different <input type="checkbox" class="sameDifferent" name="toggleOracleAddress" id="toggleOracleAddress" value="DIFFERENT" /> 
```

**查询**

```
$(document).ready(function(){
    //////////////////
    //####     SAME ADDRESS
    //////////////////
    $('.sameCheck').click(function() {
        $('.sameDifferent').removeAttr('checked');
        $('#proceedIsOn').slideUp();
    });
    //////////////////
    //####     DIFFERENT ADDRESS
    //////////////////
    $('.sameDifferent').click(function() {
        $('.sameCheck').removeAttr('checked');
        $('#proceedIsOn').slideDown();    
    });
}); 
```

JSFIDDLE 在这里[http://jsfiddle.net/mRwMt/](http://jsfiddle.net/mRwMt/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:55:31.203

只需将其设置为在每次点击时检查：

```
$(document).ready(function(){
    $('.sameCheck').click(function() {
        this.checked = true;
        $('#proceedIsOn').slideUp();
    });
    $('.sameDifferent').click(function() {
        this.checked = true;
        $('#proceedIsOn').slideDown();    
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/mRwMt/1/)

或避免滑动：

```
$(document).ready(function(){
    $('.sameCheck').click(function() {
        if (!this.checked) return false;
        $('#proceedIsOn').slideUp();
    });
    $('.sameDifferent').click(function() {
        if (!this.checked) return false;
        $('#proceedIsOn').slideDown();    
    });
});​ 
```

或者只是在框之间切换：

```
$(document).ready(function(){
    $('.sameCheck').click(function() {
        if (this.checked) {
            $(this).siblings('input[type"text"]').prop('checked', false);
            $('#proceedIsOn').slideUp();
        }else{
            return false;
        }
    });
    $('.sameDifferent').click(function() {
        if (this.checked) {
            $(this).siblings('input[type"text"]').prop('checked', false);
            $('#proceedIsOn').slideDown();
        }else{
            return false;
        }
    });
});​ 
```

[**小提琴**](http://jsfiddle.net/mRwMt/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:56:24.263

```
$("input:checkbox").change(function(){

     var otherBox = $("input:checkbox").not(this);

     if($(this).is(":checked"))  otherBox.hide();
     else   otherBox.show();

     //rest of your code...

}); 
```

小提琴：http: [//jsfiddle.net/maniator/mRwMt/2/](http://jsfiddle.net/maniator/mRwMt/2/)

* * *

隐藏整行的更高级的小提琴：http: [//jsfiddle.net/maniator/mRwMt/3/](http://jsfiddle.net/maniator/mRwMt/3/)

# sql - SQL 计数每 2 小时分组一次

> ID：11829679
> 
> 赞同：4
> 
> 时间：2012-08-06T13:53:03.113
> 
> 标签：sql, count, group-by, sql-server-2008-r2

我如何每 2 小时计数和分组？

我有一张这样的桌子：

```
Id  TheTime
--  -------
1   07/07/2012 08:49:02
2   07/07/2012 09:36:39
3   07/07/2012 10:36:39
4   07/07/2012 12:36:39
5   07/07/2012 13:36:39 
```

我怎样才能转换成：

```
TheTime_08_10  TheTime_10_12  TheTime_12_14 etc.. until TheTime_22_00
-------------  -------------  ------------              -------------
       2              1            2 
```

提前谢谢你，史蒂夫

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:11:24.237

对于支持 Hour() 函数的数据库，您可以使用：

```
SELECT Floor(Hour(TheTime)/2)*2, COUNT(*) FROM TimeTable GROUP BY Floor(Hour(TheTime)/2) 
```

你会得到这样的东西：

```
Floor(...) | Count(*)
---------------------
8          | 1
10         | 3
12         | 5
16         | 1 
```

第一列是开始时间 -`8`表示从 8:00 到 9:59 的时间等。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T13:58:46.980

StackOverflow 上有很多此类问题的示例。使用简单的案例陈述。确保您了解边界周围的业务规则。

```
Select 
  Sum(Case When Datepart(hh, TheTime) Between 8 and 9 Then 1 Else 0 End) TheTime_8_10,
  .... 
```

# rest - Salesforce 网络服务失败

> ID：11829684
> 
> 赞同：0
> 
> 时间：2012-08-06T13:53:15.323
> 
> 标签：rest, salesforce, apex-code

我正在 salesforce 中创建一个与 iOS 客户端通信的 Web 服务。客户端已经通过身份验证并收到了一个令牌就好了。该应用程序将调用 Web 服务作为接收数据。以系统管理员身份登录后，应用程序运行流畅。但是，当以标准用户身份登录时，应用程序失败并出现以下错误：

```
2012-08-06 08:44:13.827 myApp[74075:fb03] Request Failed with Error: Error Domain=com.alamofire.networking.error Code=-1011 "Expected status code in (200-299), got 403" UserInfo=0x8246410 {NSErrorFailingURLKey=https://xxxx-full.cs3.my.salesforce.com/services/apexrest/mobileServices/v1/SystemDataRecords, NSLocalizedDescription=Expected status code in (200-299), got 403}, {
   NSErrorFailingURLKey = "https://xxxx--full.cs3.my.salesforce.com/services/apexrest/mobileServices/v1/SystemDataRecords";
   NSLocalizedDescription = "Expected status code in (200-299), got 403";
} 
```

显然这让我觉得它与共享模型有关。但是，如果标准用户在直接登录 salesforce.com 时尝试提取相同的数据，则没有问题。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:26:17.690

排除共享问题的一种方法是尝试将您的类定义更改为不共享（或简单地省略共享，因为不共享是默认设置）。

```
global without sharing class MyWebService
{
   ...
} 
```

在没有看到您的任何代码的情况下，我会冒险猜测这只是一个共享模型问题。但是，例如，如果您的 Apex 代码根据活动用户的配置文件进行不同的分支，那么这也可能是一个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-28T14:39:11.203

虽然这是旧帖子，但对我来说，问题是“配置文件无法访问 Apex 类”一旦我这样做了，我收到了 StatusCode=200 消息。希望它可以帮助某人。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2021-01-14T16:00:47.227

5年后，是的，它帮助了我。我在调用 Salesforce Apex Web 服务时收到 http 403 错误。我在将 Apex 类添加到配置文件后解决了它（转到 Apex 类 > 安全性 > 将配置文件添加到“启用的配置文件列表”）

[在此处输入图像描述](https://i.stack.imgur.com/gE7AF.png)

# php - 包含来自远程服务器的 PHP 文件时，不会“填充”常量

> ID：11829689
> 
> 赞同：2
> 
> 时间：2012-08-06T13:53:26.790
> 
> 标签：php, include, constants, remote-server

我有以下问题：我得到了一个 PHP 文件 ( `standards.php`)，其中包含如下语句：

```
define('CONSTVAR', '/path/'); 
```

现在，我有另一个名为 的文件`untitled.php`，其中包含：

```
include ('standards.php');
echo CONSTVAR; 
```

这将导致页面`/path/`显示常量的值。

到目前为止还不错。

但是当我把它`standards.php`放在我的另一个网站上并尝试从那里包含它（使用`include('http://mysite.eu/core/standards.php');`命令）时，它不起作用。常量保持为空，我也收到以下错误

> 警告：main（http://mysite.eu/core/standards.php）[function.main]：无法打开流：第 28 行 /home/www/this.nl/core/untitled.php 中的权限被拒绝
> 
> 警告：main() [function.include]: 未能打开 'http://mysite.eu/core/standards.php' 以包含 (include_path='.:/usr/local/php4/lib/php') home/www/this.nl/core/untitled.php 在第 28 行

`allow_url_include`也已启用`allow_url_fopen`。当我在`standards.php`浏览器中输入完整的 URL 时，我会得到一个页面结果，所以这不是没有访问权限的问题，对吧？

这里可能是什么问题？为什么从远程服务器包含的常量应该是全局的，而不是“继承的”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-08-06T14:09:24.040

您通常不能通过包装器`include`来自远程主机的 PHP 文件，`HTTP`因为当您的 PHP 解析器请求包含时，它要么找不到文件（`include`用于包含来自本地文件系统的具有绝对或相对路径的文件），要么远程 Web 服务器发送它不是*源代码*，而是一个解析的 PHP 文件，就像它会发送到浏览器一样。并`include`获取源代码。

更多信息，取自手动输入[`include()`](http://php.net/manual/en/function.include.php)：

> **警告。安全警告：**
> 
> 远程文件可以在远程服务器上处理（取决于文件扩展名和远程服务器是否运行 PHP 的事实），但它仍然必须生成有效的 PHP 脚本，因为它将在本地服务器上处理。如果来自远程服务器的文件应该在那里处理并仅输出，则使用 readfile() 函数要好得多。否则，应特别注意保护远程脚本以生成有效且所需的代码。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T14:13:45.233

```
function cthulhu_include($url)
{
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

    $code = curl_exec($ch);

    eval($code);

    curl_close($ch);
} 
```

交付。还要确保您有例如 .txt（纯文本）文件而不是 .php（已处理的纯文本）文件（因为您将得到空白输出），这样每个人都可以在此过程中看到您的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T14:08:40.387

> Allow_url_include 已启用，allow_url_fopen 也已启用。当我在浏览器中输入standards.php 的完整网址时，我会得到一个页面结果，所以这不是没有访问权限的问题，对吧？

`allow_url_fopen`并且`allow_url_include`只能在 php.ini 或 httpd.conf 中设置。阻止包含文件的是本地服务器，这与在浏览器中键入 URL 不同。

> 为什么从远程服务器包含的常量应该是全局的，而不是“继承的”？

即使外部包含工作，它也不会按预期工作。HTTP 上的包含不同于标准包含。

您正在包括包含文件的*输出*。外部 PHP 文件在被包含之前在外部服务器上进行处理。

如果可以通过这种方式逐字读取外部 PHP 文件，那肯定是一个安全漏洞。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:04:54.587

通常**不**建议使用外部包含。

它们通常不能很好地工作（或根本不能）。

所以不要使用外部包含。

# tinymce - 如何在 tinyMCE 中移动光标而不添加书签？

> ID：11829690
> 
> 赞同：2
> 
> 时间：2012-08-06T13:53:33.393
> 
> 标签：tinymce, bbcode

我正在尝试将您的编辑器集成到 phpbb。我想在插入后在空 bbcode 之间移动光标。例如，单击 [bbbcode] 按钮将 [bbbcode][/bbbcode] 插入编辑器。

当我使用书签时：

```
ed.selection.setContent('[bbbcode]');
p = ed.selection.getBookmark();
ed.selection.setContent('[/bbbcode]');
ed.selection.moveToBookmark(p); 
```

当我发布它时，这将从最终来源中删除最后一部分（ [/bbbcode] ）。编辑器显示最后一部分，但是当将内容发布到服务器时，最后一部分 ( [/bbbcode] ) 由于书签移动而丢失。

有没有办法用书签移动光标？

我想插入 [bbbcode][/bbbcode] 并将光标移到此处：[bbbcode]here[/bbbcode]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:10:58.730

您应该插入类似`[bbbcode]<span id="marker">.</span>[/bbbcode]`. 插入后，您选择并删除跨度元素：

```
var $marker = $(ed.getBody()).find('#marker');
tinymce.activeEditor.selection.select($marker.get(0) );
$marker.remove(); 
```

# jquery - IE 中的 div 不显示 CSS 大纲

> ID：11829695
> 
> 赞同：3
> 
> 时间：2012-08-06T13:53:40.657
> 
> 标签：jquery, css, internet-explorer, outline

我有一个使用 jQuery 设置大纲的 div。它在 Chrome 中运行良好，但在 IE 中无法运行。

我知道大纲在 IE6 和 IE7 中不起作用，但在 IE8 和 IE9 中也不起作用。

我有一个 div FormContainer，当我点击一个特定的 div 我想让它突出显示时，其他 div 被放置在其中，所以点击我设置该 div 的焦点并像这样处理焦点事件：

```
$('.FormContainer div').focus(function (e) {    
        if ($(e.target).hasClass('QuestionText') == false) {    
            $(this).css({ 'outline': 'black auto thin' });
            $(this).find('.buttonControl').show();    
            $(this).find('.buttonControl').css({ 'border': '1px solid black', 'border-bottom': 'none' });    
            $(this).addClass('FocusDiv');    
        }    
        e.stopImmediatePropagation();    
    }); 
```

所有其他 css 工作正常，但只是`$(this).css({ 'outline': 'black auto thin' });`没有工作。它在 Chrome 中运行良好，但无法在 IE8 和 IE9 中运行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:35:31.783

这适用于 IE8：

```
$('div').css({'outline': '1px solid blue'});​ 
```

你可以在这里测试它：

[http://jsfiddle.net/MCPHX/1/](http://jsfiddle.net/MCPHX/1/)

**更新**
IE不喜欢的部分是outline值中的“auto”。所以`black solid thin`改用。

顺便说一句，这是简写`{'outline-width': 'thin', 'outline-style': 'solid', 'outline-color': 'black'}`

这些属性的标准接受值可以在这里找到： http: [//www.w3schools.com/css/css_outline.asp](http://www.w3schools.com/css/css_outline.asp)

# php - Ajax 调用的响应

> ID：11829697
> 
> 赞同：0
> 
> 时间：2012-08-06T13:53:48.383
> 
> 标签：php, codeigniter, jquery

我正在使用 ajax 进行小型表单验证。用户提供一个密钥，当提交表单时，我调用一个 ajax 方法 validate_key。

我的功能是

```
function validate_key(){
    $key = $_POST['key'];
    $id = $this->uri->segment(3);
    $query = $this->db->get_where('mc_boxes', array('idmc_boxes' => $id));
    $row = $query->row();
    $download_key = strtolower($row->downloadkey);
    if($download_key == $key){
        return true;
    }
    else{
        return false;
    }
} 
```

jQuery 是

```
$(document).ready(function() {
    $('#submit').click(function() {
        var key = $('#downloadkey').val();
        var dataString = {KEY:key};
        $.ajax({
            url: "/index.php/home/validate_key",
            type: 'POST',
            data: dataString,
            success: function(msg) {
            }
        });
        return false;
    });
}); 
```

形式如下

```
<form name="form" method="post"> 
   <input id="downloadkey" name="downloadkey" type="text" />
   <input type="submit" id="submit" name="submit" value="submit"/>
</form> 
```

我检查用户向数据库提供的密钥是否正确允许用户查看页面并在会话中设置密钥如果错误则给出警报消息并再次呈现表单

如何检查响应？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T13:57:07.400

我想你需要从你的 PHP 页面**回显**

```
if($download_key == $key){
        echo "true";
    }
    else{
        echo "false";
    } 
```

然后在您的 Ajax 成功处理程序中，您可以检查回调中的响应。确保您还通过调用该 [`preventDefault()`](http://api.jquery.com/event.preventDefault/)函数来阻止默认操作，以便页面不会被发布。

```
$(document).ready(function() {
    $('#submit').click(function(e) {
       e.preventDefault();
        var key = $('#downloadkey').val();
        var dataString = {KEY:key};
        $.ajax({
            url: "/index.php/home/validate_key",
            type: 'POST',
            data: dataString,
            success: function(msg) {
                  if(msg=="true") 
                    {
                       alert("do something")
                    }
                    else
                    {
                       alert("do something else")
                    }                        

            }
        });           
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T13:58:26.290

You need to output something to the page. If you just `return true` or `return false` nothing will get output.

So do something like:

`echo "OK"`

and then you can do this in your javascript:

`if(msg == "OK"){ .. }`

The other thing you can do is return a HTTP status code e.g.

`header("HTTP/1.1 200 OK");`

You can check this in your jquery. Using the first method however is more useful because you can have any number of outputs on the page, including different error messages and such.

# macos - 将目录树中的所有 JPG 符号链接到单个目录

> ID：11829707
> 
> 赞同：1
> 
> 时间：2012-08-06T13:54:07.413
> 
> 标签：macos, bash, scripting, symlink

我有一系列目录，其中包含的图像：

```
/Volumes/library/Originals/2012/2012-05-13 Event/filename.jpg
/Volumes/library/Originals/2011/2011-03-11 Event/filename.jpg
/Volumes/library/Originals/2011/2011-01-12 Event/filename.jpg
/Volumes/library/Originals/2009/2019-07-11 Event/filename.jpg 
```

使用 bash，如何在单个目录中创建指向此目录树的符号链接？

```
/image-links/filename.jpg
/image-links/filename1.jpg 
```

我需要这个来让我的照片屏幕保护程序在不支持递归目录的 Mac OS X 10.8 上运行。我想我可以做一个每晚都做的 cron 工作。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:00:03.640

试一试：

```
#!/bin/sh

seq=1
for f in $(find /Volumes/library/Originals -name *.jpg)
do
    base=$(basename "$f" .jpg)
    new=$(printf "%s%03d.jpg" "$base" $seq)
    ln -fs "$file" "/image-links/$new"
    seq=$(expr $seq + 1)
done 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:04:14.977

```
PREFIX="filename"
SOURCEDIR="/Volumes/library/Originals"
DESTDIR="image-links"

i=0
cd $DESTDIR
find "$SOURCEDIR" -name \*.jpg | while read f
do
  ln -s "$f" $PREFIX$i.jpg
  i=$((i+1))
done 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:37:04.510

这个 oneliner 在 linux 上运行得很好。

```
find /Volumes/library/Originals -name "*.jpg" |
    awk '{print "ln -s \""$0"\" /image-links/filename_"FNR".jpg"}' | sh 
```

解释管道

首先查找文件 | 第二个命令 |第三个运行命令

非常简单，经过测试并在 cron 中工作。

彼得

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T15:42:52.840

假设文件的深度相同，这样的 for 循环应该可以：

```
i=1
for file in /Volumes/library/Originals/*/*/*.jpg; do
    base=${file##*/}
    ln -s "$file" "/image-links/${base%.*}$((i++)).jpg"
done 
```

您可以将目录名称添加到链接名称中，而不是给链接一个递增的数字。

```
for file in /Volumes/library/Originals/*/*/*.jpg; do
    base=${file##*/}
    dir=${file%/*} dir=${dir##*/}
    ln -s "$file" "/image-links/$dir $base"
done 
```

# git - 如何防止 git 跟踪所有以“~”结尾的文件？

> ID：11829708
> 
> 赞同：71
> 
> 时间：2012-08-06T13:54:06.820
> 
> 标签：git

我正在使用 Gedit，每次保存文件时，Gedit 都会创建一个副本，并且副本的名称总是以 ~ 结尾。问题是，Git 总是试图跟踪这些文件，而我不希望这样！有没有办法仍然可以使用`git add .`，但只添加那些不以〜结尾的文件？

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-08-06T13:56:52.923

[gitignore](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html "gitignore")是要走的路。只需添加`*~`到`.gitignore`您回购的根目录。

* * *

## 回答 #2

> 赞同：58
> 
> 时间：2012-08-06T13:57:32.780

你想要一个[gitignore 文件](http://www.kernel.org/pub/software/scm/git/docs/gitignore.html)。

如果您想对以波浪号结尾的所有内容进行核对（这应该是安全的；我无法想象这是不好的合理用例），请确保以下行位于您`.gitignore`的 repo 文件夹层次结构顶部的文件中：

```
*~ 
```

* * *

如果您*还想*摆脱本地文件系统中的那些波浪号文件，您可以。最好让 Gedit 将其备份文件放在其他地方。我最常使用的两个编辑器 JEdit 和 VIm[都有这样的设置](http://vim.wikia.com/wiki/Remove_swap_and_backup_files_from_your_working_directory)，将它们保存在其他地方比加载 gitignore 更干净。

不幸的是，Gedit 没有这个选项。它可以做的最好的事情就是关闭`~`备份。**在您担心之前，最坏的情况是您在[保存](https://help.ubuntu.com/community/gedit).** 这不是最坏的情况——这就是你在 git repo 中得到这个的原因，对吧？

^(注意：如果要将`~`后缀文件保留在本地，请执行此操作。您在上面设置的 .gitignore 将防止您意外共享它们。)

[您可以像这样关闭`~`带后缀的备份](http://chrisjean.com/2009/02/09/getting-rid-of-tilde-files-in-ubuntu/)

> 要防止 Gedit 以后创建这些备份，请打开 Gedit，打开首选项对话框（编辑 > 首选项），选择编辑器选项卡，取消选中“保存前创建文件的备份副本”选项，然后单击关闭。完成此操作后，Gedit 将不再使用波浪号进行备份。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-04-13T16:18:57.447

要补充@filmor 所说的内容，您可以创建一个全局 gitignore 文件，以便所有存储库都忽略备份文件：

```
git config --global core.excludesfile ~/.gitignore_global 
```

这将告诉 git 在您的 $HOME 路径中查找`.gitignore_global`文件，您可以在其中放置`*~`规则。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-08-19T18:14:23.277

只是补充答案：
如果您有带有扩展名的波浪号文件，例如 Sketchup，它会创建以“~.skp”结尾的备份文件，那么您需要添加`*~.skp`您的 .gitignore 文件。**或者**更改`skp`您正在使用的软件的扩展名。**或者**`*~.*`，如果您确定所有以波浪号结尾且带有所有扩展名的文件都可以安全地被忽略，则使用此选项。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-04T00:06:05.183

当您可以编辑纯文本文件时，为什么还要添加`.gitignore`文件`.git/info/exclude`。“在决定是否忽略路径时，git 通常会检查来自多个来源的 gitignore 模式” [https://www.kernel.org/pub/software/scm/git/docs/gitignore.html](https://www.kernel.org/pub/software/scm/git/docs/gitignore.html)

如果您在 git 存储库`*~`的文件中添加一行。`.git/info/exclude`Git 将忽略该模式和所有以波浪号结尾的文件。

# ios5 - 我们什么时候在它的 AppDelegate 中创建 IBOutlet ViewController 对象？

> ID：11829709
> 
> 赞同：1
> 
> 时间：2012-08-06T13:54:16.297
> 
> 标签：ios5, mpmovieplayercontroller, viewcontroller, appdelegate

首先让我提一下我是IOS开发的新手。

一般当我们在 XCODE 中新建一个项目时，并没有像这样声明的对象

```
 @property (nonatomic, retain) IBOutlet ViewController *viewController; 
```

在自动创建的`AppDelegate.h`. 大多数创建并作为子视图添加到主视图的自定义视图仍然可以正常工作。

但是在子应用程序中需要声明我们的视图控制器的对象，如上所述。并且必须添加到 中`window`的子视图中`AppDelegate.m`，如下所示：

```
 [window addSubview:viewcontroller.view];
    [window makeKeyAndVisible]; 
```

否则，某些控制器的视图（例如`MPMediaPlayerController.view`（在我的情况下）等）无法正确添加为视图的子`viewController`视图。

为什么会这样？

在什么情况下我们需要在委托类中声明视图控制器的对象？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:26:23.167

根据您使用的 Xcode 版本以及定义界面的方式，有不同的答案，但假设最近有故事板，答案是它发生在初始控制器的加载期间。

对于要使用的视图控制器，需要保留它，并且窗口`rootViewController`是初始默认值。如果您查看“在启动时配置初始视图控制器”的文档，您会看到列出的一些步骤：

> “[...] iOS 执行以下操作：
> 
> ...
> 
> 它将窗口的 rootViewController 属性设置为新的视图控制器。”

# security - Web App 安全性：询问空闲用户是否要继续

> ID：11829711
> 
> 赞同：0
> 
> 时间：2012-08-06T13:54:34.543
> 
> 标签：security

我对我们的网络应用程序（在相关部分和子部分下）有一个要求，其中说：

会话管理

*   会话超时：

    > 用户应该在相当长的时间内保持登录状态；会话在任何情况下都不应超时，在注销之前，我们必须有一个弹出屏幕询问您是要注销还是继续。

此外，只是重申这不是关于注销功能的要求。我相信这是一个奇怪的问题，也是一场噩梦，因为它认为空闲用户会响应警报，这对我来说毫无意义，因此也无法实现。

但我很想听听人们对这个要求的看法。如果您认为它有效，原因以及如何去做？如果您认为这不是一个有效的要求，请也分享您的理由。

谢谢， 苏曼思

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:09:59.123

我认为，如果在用户阅读长或复杂的文本或刚接到电话时显示这样的弹出式操作系统以防止超时会话，则弹出式本身应该有超时。一旦超时到期，弹出窗口就会显示它自己的超时时间，比如说 10 秒，如果用户没有回答，则应该终止会话。我已经看到您在其他网页中被请求的方法，但如果没有第二次超时，安全性将处于危险之中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:24:07.240

如果您坚持认为它不是注销功能，那么我可以想到一个原因：

当用户的注意力转移到您的网站以外的其他事物时，不活动就开始了。它可能是由任何事情引起的，例如接听电话、阅读电子邮件、意外/故意关闭浏览器/计算机或身体离开。

在最后两种情况下，您无法恢复注意力，但在其他情况下，`alert()`盒子是一个很好的视觉提示来吸引注意力。正是在这一点上，用户可以有意识地决定要么延长会话，要么忽略/终止它。

`alert()`'s 往往比 modal 更好，`div`因为在浏览器窗口模糊/不集中/最小化的情况下，它使操作系统提供视觉提示，例如闪烁任务栏。

我看到这种行为被强制执行的一个例子是银行网站。同样，这种强迫用户注意的行为在银行等敏感网站上是可以接受的，但我个人不喜欢看到其他网站，如谷歌或 Facebook，这样做。

因此，请考虑您的用户并明智地使用它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T13:56:44.093

我认为您对规范的解释是错误的。

在我看来，会话不应该自行过期，*当用户启动注销时*，应该有某种确认。

# .htaccess - 添加尾部斜杠 .htaccess

> ID：11829714
> 
> 赞同：18
> 
> 时间：2012-08-06T13:54:52.623
> 
> 标签：.htaccess, mod-rewrite, redirect, slash, trailing-slash

我正在尝试获得以下效果（使用此本地文件`http://localhost/[company_name]/[project_name]/.htaccess`）：

```
http://localhost/[company_name]/[project_name]/page-1 (adds slash)
http://localhost/[company_name]/[project_name]/page-1/ (does nothing)
http://localhost/[company_name]/[project_name]/page-1/subpage-1 (adds slash)
http://www.example.com/page-1 (adds slash)<br />
http://www.example.com/page-1/ (does nothing)
etc. 
```

我想要完成的事情是这个 .htaccess 不再需要该路径`http://localhost/[company_name]/[project_name]/`，因此我不必在每次上传时都对其进行编辑。

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*[^/])$ /$1/ [L,R=301] 
```

我在这里找到了上面的代码：[Add Trailing Slash to URLs](https://stackoverflow.com/questions/1668096/add-trailing-slash-to-urls)，但它只能动态地使用 HOST 并丢弃路径。有人可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：57
> 
> 时间：2012-08-09T09:57:57.393

```
RewriteCond %{REQUEST_URI} !(/$|\.) 
RewriteRule (.*) %{REQUEST_URI}/ [R=301,L] 
```

此代码需要放在 RewriteEngine On 下面的 .htaccess 文件顶部

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-06-07T06:10:37.180

请在 .htaccess 文件的顶部添加以下行

```
RewriteEngine on
#Add Trailing slash for end of the URL
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*[^/])$ /$1/ [L,R] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-02-13T16:52:18.167

请在`.htaccess,`

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_URI} !(.*)/$
RewriteRule ^(.*)$ https://%{HTTP_HOST}/$1/ [L,R=301] 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-06-11T15:11:46.387

所有其他答案的问题： POST 请求在重定向时会丢失数据。您可以使用 http 307 指示浏览器重新发送 POST 数据：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteRule ^(.*[^/])$ /$1/ [L,R=307] 
```

[https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/307](https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/307)

顺便说一句，我更喜欢 REQUEST_FILENAME 条件。这可确保请求真正针对文件夹结构，而不是将斜杠附加到文件 Urls。

# playframework-2.0 - $.ajax 在调用 PlayController 时不起作用

> ID：11829715
> 
> 赞同：-1
> 
> 时间：2012-08-06T13:54:58.037
> 
> 标签：playframework-2.0

无法理解为什么`ajax`在调用我的 Play 控制器时这篇文章不起作用

```
 $.ajax({
        type: 'POST',
        url : '/login',
        dataType : 'json',
        data: "{username:"+user+",password:"+pass+"}",
        success : responseLogin,
        error : errorLogin
     }); 
```

我的 route.conf

```
 POST    /login                           controllers.UserController.authenticate() 
```

控制器代码：

```
 DynamicForm data = form().bindFromRequest();
   User user =     User.authenticate( data.get("username"),data.get("password")); 
```

但是这段代码有效：

```
 $.post('/login',
                    {'username':$("#txtUsername").val(),'password':$("#txtPassword").val()},
                    function(data) {
                      alert(data);
                    });
      }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:57:46.917

Why not change your `$.ajax` call to send data like your `$.post` call does? (`$.post` calls `$.ajax` under the hood.)

```
$.ajax({
        type: 'POST',
        url : '/login',
        dataType : 'json',
        data: {'username':$("#txtUsername").val(),'password':$("#txtPassword").val()},
        success : responseLogin,
        error : errorLogin
     }); 
```

Hope this helps.

# performance-testing - 多会话 Neoload

> ID：11829719
> 
> 赞同：0
> 
> 时间：2012-08-06T13:55:22.800
> 
> 标签：performance-testing

我正在使用Neoload进行性能测试，我是Neoload的新手，我记录了一个场景，登录后会有登录页面，执行搜索，加载搜索结果后，选择一条记录并更新数据并提交。

步骤1。登录到将加载主页的应用程序

第2步。选择搜索链接并提供条件，将显示搜索结果

第三步。从搜索结果中选择一条记录（基于 Id）数据将显示在另一页上。

Step 4\. 修改step3渲染的数据，提交页面。

在上述场景中，我正在做的是尝试在步骤 3 中传递动态内容（传递多个 Id）以生成负载，这里我无法理解为什么 neoload 无法继续获取响应并将其传递给下一个请求，这就是场景的记录方式

感谢您的帮助，谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-01T14:23:08.813

据我了解，您想根据 Id 选择一条记录，然后修改单击 id 时呈现的数据，然后单击提交。在每个请求上唯一改变的是 ID。

为此，请按照以下步骤操作，

1.  我想您不想在每个请求上都登录/注销，而是想更改在每个请求上选择的 ID。为此，将登录和注销脚本分别放在 init 和 end 占位符中。
2.  转到编辑-> 变量。
3.  单击底部的功能图标“fx”并选择所需的数据类型并创建变量“xyz”。
4.  提供最小值和最大值，并确保将“值更改策略”选择为“每次迭代”。
5.  现在转到您在搜索框中单击 Id 的脚本。
6.  找到 Id 后，您必须将其替换为动态值 ${xyz}。

# full-text-search - 我如何确保 sphinx 中的所有结果都具有特定标签而不进行数据库调用？

> ID：11829721
> 
> 赞同：-2
> 
> 时间：2012-08-06T13:55:24.513
> 
> 标签：full-text-search, search-engine, sphinx

我如何确保 sphinx 中的所有结果都具有特定类型而不进行数据库调用？例子：

```
|id|tag|name|
|1|media| movie|
|2|media| picture |
|3|text|media tech| 
```

如果我搜索“媒体”一词，则不会返回第 3 行，因为在标签字段中它是文本而不是“媒体”，重要的是我不使用 db 调用，因为开销会很大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:58:19.677

Do you want your index to only contain the 'media' type rows? Just adjust your WHERE clause in the SQL query

```
WHERE .... AND type='media' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:03:18.100

如果您在 perl 中执行此操作，则可以使用正则表达式。试试这个

```
/\|.*?\|[^|]*media/ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T14:39:49.370

字符串属性可用于此 [http://sphinxsearch.com/docs/current.html#conf-sql-attr-string](http://sphinxsearch.com/docs/current.html#conf-sql-attr-string)

属性与结果一起返回。 [http://sphinxsearch.com/docs/current.html#attributes](http://sphinxsearch.com/docs/current.html#attributes)

如果您仍然希望能够“搜索”该列，请使用 [http://sphinxsearch.com/docs/current.html#conf-sql-field-string](http://sphinxsearch.com/docs/current.html#conf-sql-field-string)

使列既是字段又是属性。

*   **字段**- 全文可搜索 - 因为它们被完全索引。
*   **属性**- 可用于过滤/排序/分组并包含在结果中。

# jquery - 当不再触发悬停事件时如何隐藏此导航菜单？

> ID：11829727
> 
> 赞同：0
> 
> 时间：2012-08-06T13:55:41.740
> 
> 标签：jquery, html, css

我有一个小的导航菜单，当它的悬停事件被调用时会打开。当我在菜单中选择一个项目时，其当前项目更改为所选项目并且菜单消失。到现在为止还挺好。现在我想要实现的是，当我不选择任何项目并且我只是将鼠标移动到其他地方时，菜单也会消失。我在 jsFiddle 上做了一个例子：[见这里](http://jsfiddle.net/f5XCj/4/)

我已经尝试过了`blur()`，首先它不起作用，其次我希望菜单在悬停消失时消失，而不是在有人点击其他地方后消失。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T13:59:20.503

使用`mouseout`：

```
$('.small-nav-left').live('mouseout', function() {
        $('.small-nav-menu-left').hide();
    }); 
```

见[小提琴](http://jsfiddle.net/f5XCj/6/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:09:25.690

在这里，我重写了它以按照预期的方式工作......

`.live()`在 1.7 和 . 中已弃用。`on()`应该用来支持这一点。但是，.on() 中的回调不支持悬停，因此我们在链中使用 mouseover 和 mouseout 事件来复制与回调函数相同的想法。

此外，围绕元素移动并添加了一个跨度来处理我们的“文本”更新。

[这是 jSfiddle。注意所有领域的变化：CSS、HTML 和 jQuery](http://jsfiddle.net/f5XCj/9/)

# c# - 如何在datagrid中使一行的单元格不可点击

> ID：11829732
> 
> 赞同：1
> 
> 时间：2012-08-06T13:55:56.810
> 
> 标签：c#, wpf

我有一个只有两行的数据网格。我希望第二行的单元格可点击，但不能点击第一行。第一行应该是只读的。我的意思是第一行由可点击类型的单元格组成，第二行由不可点击类型的单元格组成。我已经尝试了很多。我没有完成它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-08-06T15:48:24.027

也许您可以尝试放置一个 if 语句来检查它是否是第一行，如果它在您的事件处理程序中返回。

```
if (dg.CurrentRow == null||dg.CurrentRow == dg.Rows[0])
{ return;} 
```

# r - 关于比较从 csv 文件导入的两个字符数组的正确方法

> ID：11829736
> 
> 赞同：1
> 
> 时间：2012-08-06T13:56:23.870
> 
> 标签：r

我有一个 csv 文件，第一行是纯文本，其他行是数值。我需要将第一行读入字符向量。

```
matrixR = read.csv("testR.csv",sep=",",header=FALSE)
matrixR[1,]
    V1     V2      V3    V4  V5  
academic adagio admiral allan alt 
```

以上是第一行。除了这个文件，我还有另一个与第一个文件格式相同的 csv 文件。我是这样读的：

```
matrixJ = read.csv("testJ.csv",sep=",",header=FALSE)
matrixJ[1,]
    V1     V2      V3    V4  V5  
academic  admiral abc alt bd 
```

对于matrixR第一行中的每个条目，我需要检查它是否也存在于matrixJ的第一行中。如果存在，我需要在matrixJ的第一行捕获它的对应位置。我就是这样做的

```
which(matrixR[1,2]==matrixJ[1,])
Error in matrixR[1, 2] == matrixJ[1, ] : 
  comparison of these types is not implemented
In addition: Warning message:
  In which(matrixR[1, 2] == matrixJ[1, ]) :
  Incompatible methods ("Ops.factor", "Ops.data.frame") for "==" 
```

实现这种功能的正确方法应该是什么？谢谢。

以下是我按照建议所做的，看起来结果仍然不正确。

```
> matrixR = as.matrix(read.csv("testWeightR1.csv",sep=",",header=FALSE))
> matrixJ =as.matrix(read.csv("testWeightJ1.csv",sep=",",header=FALSE))
> which(unlist(matrixR[1,]) %in% unlist(matrixJ[1,]))
   [1] 1 2 3 4 6 
```

matrixR 和 matrixJ 的信息如下：

> matrixR[1,] V1 V2 V3 V4 V5 V6 "academic" "adagio" "admiral" "allan" "test" "admiral" matrixJ[1,] V1 V2 V3 V4 V5 V6 "academic" "adagio" "admiral" "艾伦“alt”“ans”dput（head（matrixR））

```
 structure(c("academic", "0", "0", "0", "0", "0", "adagio", "0", 
 "0", "0", "0", "0", "admiral", "0", "0", "0", "0", "0", "allan", 
 "0", "0", "0", "0", "0", "test", "2", "2", "1", "1", "1", "admiral", 
 "0", "0", "0", "0", "0"), .Dim = c(6L, 6L), .Dimnames = list(
  NULL, c("V1", "V2", "V3", "V4", "V5", "V6")))
 > dput(head(matrixJ))
 structure(c("academic", "0", "0", "0", "0", "0", "adagio", "0", 
 "0", "0", "0", "0", "admiral", "0", "0", "0", "0", "0", "allan", 
 "0", "0", "0", "0", "0", "alt", "2", "2", "1", "1", "1", "ans", 
 "0", "1", "1", "0", "1"), .Dim = c(6L, 6L), .Dimnames = list(
  NULL, c("V1", "V2", "V3", "V4", "V5", "V6"))) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:09:59.993

这应该给你你想要使用`%in% with`哪个`：

```
which(matrixR[1,] %in% matrixJ[1,]) 
```

当`==`您与一个项目进行比较时。当您与矢量使用进行比较时`%in%`

**编辑...**

如果是矩阵，请尝试：

```
which(unlist(matrixR[1,]) %in% unlist(matrixJ[1,])) 
```

**编辑 2...**

现在您已经提供了可重现的示例，可以更轻松地为您提供更准确的建议：

```
matrixR  <-
 structure(c("academic", "0", "0", "0", "0", "0", "adagio", "0", 
 "0", "0", "0", "0", "admiral", "0", "0", "0", "0", "0", "allan", 
 "0", "0", "0", "0", "0", "test", "2", "2", "1", "1", "1", "admiral", 
 "0", "0", "0", "0", "0"), .Dim = c(6L, 6L), .Dimnames = list(
  NULL, c("V1", "V2", "V3", "V4", "V5", "V6")))

matrixJ <-
 structure(c("academic", "0", "0", "0", "0", "0", "adagio", "0", 
 "0", "0", "0", "0", "admiral", "0", "0", "0", "0", "0", "allan", 
 "0", "0", "0", "0", "0", "alt", "2", "2", "1", "1", "1", "ans", 
 "0", "1", "1", "0", "1"), .Dim = c(6L, 6L), .Dimnames = list(
  NULL, c("V1", "V2", "V3", "V4", "V5", "V6")))

#> matrixR 
#     V1         V2       V3        V4      V5     V6       
#[1,] "academic" "adagio" "admiral" "allan" "test" "admiral"
#[2,] "0"        "0"      "0"       "0"     "2"    "0"      
#[3,] "0"        "0"      "0"       "0"     "2"    "0"      
#[4,] "0"        "0"      "0"       "0"     "1"    "0"      
#[5,] "0"        "0"      "0"       "0"     "1"    "0"      
#[6,] "0"        "0"      "0"       "0"     "1"    "0"      
#> 
#> matrixJ 
#     V1         V2       V3        V4      V5    V6   
#[1,] "academic" "adagio" "admiral" "allan" "alt" "ans"
#[2,] "0"        "0"      "0"       "0"     "2"   "0"  
#[3,] "0"        "0"      "0"       "0"     "2"   "1"  
#[4,] "0"        "0"      "0"       "0"     "1"   "1"  
#[5,] "0"        "0"      "0"       "0"     "1"   "0"  
#[6,] "0"        "0"      "0"       "0"     "1"   "1"  

which(matrixR[1, ] %in% matrixJ[1, ])

#> which(matrixR[1, ] %in% matrixJ[1, ])
#[1] 1 2 3 4 6 
```

请注意，这是我最初给您的回复，除非您正在寻找其他东西：

# wcf - jQuery post 到 WCF 服务返回 405 错误

> ID：11829737
> 
> 赞同：2
> 
> 时间：2012-08-06T13:56:31.580
> 
> 标签：wcf, jquery

我最近在复习我的 jQuery，在查看帖子时遇到了一个问题，我无法从 wcf 服务获得响应，我经常收到 405 - 方法不允许。我的请求对我来说看起来不错，我想知道我是否错过了一些重要但显而易见的事情，为什么会发生这种情况。

这是正在使用的邮政编码：

```
 $.ajax({
     type: "POST",
     url: "http://localhost:59929/CustomerService/GetCustomers",
     data: null,
     ContentType: "application/json",
     dataType: "json",
     success: function (msg) {
         alert("Called and got: " + msg);
     },
     error: function (result) {
         alert('Service call failed: ' + result.status + '' + result.statusText);
     }
 }); 
```

wcf代码如下：

```
[ServiceContract]
public interface ICustomerService
{   

    [OperationContract]
    [WebInvoke(Method = "POST", BodyStyle = WebMessageBodyStyle.Wrapped, ResponseFormat = WebMessageFormat.Json)]
    List<Customer> GetCustomers();

    [OperationContract]
    OperationStatus InsertCustomer(Customer cust);
} 
```

配置如下：

```
<?xml version="1.0"?>
<configuration>

  <system.web>
    <compilation debug="true" targetFramework="4.0" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true"/>
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true"/>
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
 <system.webServer>
    <modules runAllManagedModulesForAllRequests="true"/>
  </system.webServer>

</configuration> 
```

Fiddler 将原始帖子显示为：

```
POST http://localhost:59929/CustomerService/GetCustomers HTTP/1.1
Host: localhost:59929
Connection: keep-alive
Content-Length: 0
Origin: http://localhost:59513
User-Agent: Mozilla/5.0 (Windows NT 6.1; WOW64) AppleWebKit/537.1 (KHTML, like Gecko) Chrome/21.0.1180.60 Safari/537.1
Accept: application/json, text/javascript, */*; q=0.01
Referer: http://localhost:59513/LearnJQuery2/ajax/ajax_post.htm
Accept-Encoding: gzip,deflate,sdch
Accept-Language: en-GB,en-US;q=0.8,en;q=0.6
Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 
```

并且 fiddler 也确认了 405 响应。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:03:26.290

您从哪个域拨打电话？这可能是由[同源策略](http://en.wikipedia.org/wiki/Same_origin_policy)引起的。如果是这种情况，请尝试使用 JSONP 而不是 JSON。

另外，您是否尝试过像[Fiddler](http://www.fiddler2.com/fiddler2/)这样的工具来准确查看请求/响应是什么？这可以为正在发生的事情提供一些线索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T20:00:54.903

好吧，我看了很长一段时间，然后意识到这并没有什么问题，而是一个问题:) 所以问题解决了。

首先，它们确实必须来自具有相同端口和协议的同一个域，但事实并非如此。我将我的服务移动到我的应用程序中并适当地配置了绑定。下一部分是正确地装饰您的 WCF 服务，因此这里是正确配置服务的代码。

客户服务.cs

```
[ServiceContract]
public interface ICustomerService
{
    [OperationContract]
    [WebInvoke(
        Method = "POST" ,
        BodyStyle = WebMessageBodyStyle.Wrapped,
        ResponseFormat = WebMessageFormat.Json)]
    List<JSONCustomer> GetCustomers();
} 
```

客户服务.cs

```
[AspNetCompatibilityRequirements(RequirementsMode
    = AspNetCompatibilityRequirementsMode.Allowed)]
public class CustomerService : ICustomerService
{
    public List<JSONCustomer> GetCustomers()
    {
        return new List<JSONCustomer> 
        { 
            new JSONCustomer {id = 1, FirstName = "john", LastName = "Doe"},
            new JSONCustomer {id = 2, FirstName = "jane", LastName = "Doe"},        
        };
    }
} 
```

网页配置

```
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0"/>
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior name="ServiceBehavior">
          <serviceMetadata httpGetEnabled="true" />
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
      <endpointBehaviors>
        <behavior name="EndpBehavior">
          <webHttp/>
        </behavior>
      </endpointBehaviors>
    </behaviors>
    <services>
      <service behaviorConfiguration="ServiceBehavior" 
               name="CustomerService">
        <endpoint address="" 
                  binding="webHttpBinding"
                  contract="ICustomerService" 
                  behaviorConfiguration="EndpBehavior"/>
      </service>
    </services>

    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>

</configuration> 
```

接下来是使用的 ajax 代码（整个网页）：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Ajax Post</title>
        <script type="text/javascript" src="../scripts/jquery-1.7.2.js"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                $('#HelpButton').click(function () {
                    $.post('../CustomerService.svc/GetCustomers', null,
                        function (data) {
                            var custs = data["GetCustomersResult"];
                            var text = '';

                            $(custs).each(function () {
                                text += '<span>' + this.FirstName + ' ' + this.LastName + '</span><br/>';
                            });

                            $('#OutputDiv').html(text);
                        }
                    , 'json');
                });
            });
        </script>
    </head>
    <body>
        <input id="HelpButton" type="button" value="Press me"/>
        <div id="OutputDiv" />
    </body>
</html> 
```

JSONCustomer.cs

```
[DataContract]
public class JSONCustomer
{
    [DataMember]
    public int id { get; set; }

    [DataMember]
    public string FirstName { get; set; }

    [DataMember]
    public string LastName { get; set; }
} 
```

我真的希望那些现在遇到问题的人能找到帮助，重要的是你要注意 jquery 中的所有东西，绑定，装饰和 ajax 代码一点点小失误，它就是行不通的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:35:51.470

这看起来像是服务器配置问题，调用者无法将方法视为 wcf 服务的一部分。此链接提供了一些有用的提示，说明如何解决导致 405 错误的最常见原因。我希望它有所帮助：[http ://social.msdn.microsoft.com/Forums/en-US/wcf/thread/31d3f1aa-28b6-4bd7-b031-73b7e7588e6d/](http://social.msdn.microsoft.com/Forums/en-US/wcf/thread/31d3f1aa-28b6-4bd7-b031-73b7e7588e6d/)

# ios - UIScrollView 框架属性

> ID：11829747
> 
> 赞同：1
> 
> 时间：2012-08-06T13:56:53.480
> 
> 标签：ios, uiscrollview, frame

我使用 Interface Builder 绘制了一个带有滚动视图的简单 UI，在 viewDidLoad 中，我正在读取滚动视图的框架 CGRect 属性的 x、y、宽度和高度，如下所示：

```
 NSLog(@"x=%f,y=%f,w=%f,h=%f",self.detailScrollView.frame.origin.x,self.detailScrollView.frame.origin.y,self.detailScrollView.frame.size.width,self.detailScrollView.frame.size.height); 
```

（offcourse 以前正确地@syntheized 一切，我有正确的 IBOutlets 等..）

但是当我查看读数并将它们与界面构建器值进行比较时，我对 y 坐标有点困惑，其他一切（x，宽度，高度）都可以。

这是 NSLog 的输出：

```
 2012-08-06 15:52:40.481 xxxxx[1471:207] x=20.000000,y=147.000000,w=280.000000,h=293.000000 
```

但是来自界面构建器的滚动视图的实际值是：X=20 Y=59 宽度=280 高度=293（对不起，我不能发布屏幕截图）。

任何提示为什么 y 值偏移 88 ？（NSLog 中的 147 减去界面生成器中的 59）谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T22:49:34.840

我遇到了这个问题并通过更改自动调整大小来解决它。我设置了内盒和外盒，它对我有用。

# ios - 使用动画效果向右滑动时将单元格移动到 UITableView 的底部

> ID：11829748
> 
> 赞同：1
> 
> 时间：2012-08-06T13:56:58.727
> 
> 标签：ios, ios5, uitableview

我正在尝试在 UITableviewCells 上实现滑动手势，所以当用户向右滑动时，我希望单元格移动到具有动画效果的表格底部（**就像 iphone 中的 CLEAR 应用程序一样**）。我已经提到了这个链接 [http://www.cocoacontrols.com/platforms/ios/controls/jtgesturebasedtableviewdemo](http://www.cocoacontrols.com/platforms/ios/controls/jtgesturebasedtableviewdemo)，并试图实现它。以下是我到目前为止在状态“正确”时尝试过的代码

```
- (void)gestureRecognizer:(JTTableViewGestureRecognizer *)gestureRecognizer commitEditingState:(JTTableViewCellEditingState)state forRowAtIndexPath:(NSIndexPath *)indexPath 
  {
    UITableView *tableView = gestureRecognizer.tableView;

    [tableView beginUpdates];

    if (state == JTTableViewCellEditingStateLeft) 
    {
        // An example to discard the cell at JTTableViewCellEditingStateLeft
        [self.rows removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationLeft];
    }
    else if (state == JTTableViewCellEditingStateRight)
    {       

        ***NSString *selectedString = [self.rows objectAtIndex:indexPath.row];     

        [self.rows removeObjectAtIndex:indexPath.row];
        //[tableView deleteRowsAtIndexPaths:[NSArray arrayWithObject:indexPath]
        //                 withRowAnimation:UITableViewRowAnimationLeft]; 

       NSIndexPath *selectedIndexPath = [tableView indexPathForSelectedRow];

       [tableView moveRowAtIndexPath:selectedIndexPath toIndexPath:[NSIndexPath        indexPathForRow:[self.rows count]-1 inSection:0]];          

        [self.rows insertObject:selectedString atIndex:[self.rows count]];        
        [tableView insertRowsAtIndexPaths:[NSArray
                                           arrayWithObject:[NSIndexPath indexPathForRow:0 inSection:0]]
                         withRowAnimation:UITableViewRowAnimationBottom];

        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationLeft];*** 
    } 

    [tableView endUpdates];

    // Row color needs update after datasource changes, reload it.
    [tableView performSelector:@selector(reloadVisibleRowsExceptIndexPath:) withObject:indexPath afterDelay:JTTableViewRowAnimationDuration];
} 
```

因此，您可以看到状态何时正确，我正在尝试实现它，但我不了解如何产生动画效果。所以朋友们，我请求请通过此代码并帮助我。

问候兰吉特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T07:37:31.480

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-08T07:10:26.803

我对此进行了研究并提出了这个解决方案，现在当我向右滑动单元格并且单元格移动到底部时，我得到了效果，但是我的单元格没有更新，每当我向右滑动单元格时，它需要字符串位于其下方位置的单元格。无法理解我错过了什么

```
- (void)gestureRecognizer:(JTTableViewGestureRecognizer *)gestureRecognizer commitEditingState:(JTTableViewCellEditingState)state forRowAtIndexPath:(NSIndexPath *)indexPath {
    UITableView *tableView = gestureRecognizer.tableView;
    [tableView beginUpdates];
     if (state == JTTableViewCellEditingStateRight)
    {

        NSIndexPath *selectedIndexPath = [tableView indexPathForSelectedRow];

        [tableView moveRowAtIndexPath:selectedIndexPath toIndexPath:[NSIndexPath indexPathForRow:[self.rows count]-1 inSection:0]];          

        [tableView reloadRowsAtIndexPaths:[NSArray arrayWithObject:indexPath] withRowAnimation:UITableViewRowAnimationLeft]; 
    } 

    [tableView endUpdates];

    // Row color needs update after datasource changes, reload it.
    [tableView performSelector:@selector(reloadVisibleRowsExceptIndexPath:) withObject:indexPath afterDelay:JTTableViewRowAnimationDuration];
}

-(void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)sourceIndexPath toIndexPath:(NSIndexPath *)destinationIndexPath
{

    NSString *selectedString = [self.rows objectAtIndex:sourceIndexPath.row];     

    [self.rows removeObjectAtIndex:sourceIndexPath.row];

    [self.rows insertObject:selectedString atIndex:[self.rows count]-1]; 
} 
```

# opencv - 如何使用opencv获取道路图像的鸟瞰图？

> ID：11829754
> 
> 赞同：2
> 
> 时间：2012-08-06T13:57:16.883
> 
> 标签：opencv

我想知道如何使用 opencv 函数 cvGetPerspectiveTransform() 和 cvWarpPerspective() 获得道路图像的鸟瞰图。我搜索了很多以找到一些教程和示例，但一无所获。我需要帮助来理解这些功能。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:55:52.587

如果您的意思是要从图像中删除透视和仿射效果，那么从技术上讲，您需要通过变换将无限远的[线](http://en.wikipedia.org/wiki/Line_at_infinity)和图像的[圆形点](http://en.wikipedia.org/wiki/Circular_points_at_infinity)移动到它们的规范位置。研究这些术语是了解您所问问题背后的数学原理的最佳起点。

另一方面，您可能只使用 openCV 的[findHomography](http://opencv.willowgarage.com/documentation/cpp/camera_calibration_and_3d_reconstruction.html)来获得您想要的转换，而不必担心数学。然后可以将单应矩阵插入 WarpPerspective() 以扭曲您的图像。[可以在本文](http://cseweb.ucsd.edu/classes/sp04/cse252b/notes/lec04/lec4.pdf)末尾找到使用单应性消除透视失真的示例。您需要知道道路图像中至少 4 个点的校正图像坐标以及它们在扭曲图像中的对应坐标。道路上的矩形标记将非常适合用作点。

# security - 如何在对象的 ACL 中设置同一受托者的多个 ACE

> ID：11829755
> 
> 赞同：0
> 
> 时间：2012-08-06T13:57:18.647
> 
> 标签：security, permissions, acl, dacl

我正在尝试将两个条目设置为同一组的对象文件夹，具有不同的继承，（一个为 FILE_TRAVERSE 的 NO_INHERITANCE，另一个为 SUB_CONTAINERS_AND_OBJECTS_INHERIT，用于 GENERIC_READ）。我看到每次最后一次通话都会覆盖先例。我在 delphi 中编写了这个（但如果是 C++ 或 C...，则相同）。有人可以帮我解决问题吗？

这是调用函数：

```
function setACL(const foldername:string;const SID:PSID;const AccessPermissions:cardinal;
              const AccessMode:ACCESS_MODE;const Inheritance:cardinal;
              const TrusteeType:TRUSTEE_TYPE):boolean;
var
 pEA: PEXPLICIT_ACCESS_W;
 pDACL: PACL;
 R: DWORD;
begin
  pEA := AllocMem(SizeOf(EXPLICIT_ACCESS_W));
  pEA^.grfAccessPermissions:=AccessPermissions;
  pEA^.grfAccessMode:=AccessMode;
  pEA^.grfInheritance:=Inheritance ;
  pEA^.Trustee.TrusteeForm:=TRUSTEE_IS_SID;
  pEA^.Trustee.TrusteeType:=TrusteeType;
  pEA^.Trustee.ptstrName:=PWideChar(sid);

  R := SetEntriesInAcl(1, pEA, nil, pDACL);

  if R = ERROR_SUCCESS then
  begin
    if SetNamedSecurityInfo(pchar(foldername),
      SE_FILE_OBJECT,
      DACL_SECURITY_INFORMATION,
      nil,
      SID,
      pDACL,
      nil) <> ERROR_SUCCESS then ShowMessage('SetNamedSecurityInfo failed: ' + SysErrorMessage(GetLastError));
    LocalFree(Cardinal(pDACL));
 end
 else ShowMessage('SetEntriesInAcl failed: ' + SysErrorMessage(R));

end; 
```

我这样称呼它两次：

```
 Groupname:='myNet\aGroup';
  Get_SID('wbox0',groupname,sid);//this function just to get SID

  foldername := '\\wbox0\temp\filippo'; //the folder to set permissions
  setACLGroupFolder(foldername,sid,FILE_TRAVERSE,SET_ACCESS,NO_INHERITANCE,TRUSTEE_IS_GROUP);
  setACLGroupFolder(foldername,sid,GENERIC_READ,SET_ACCESS,SUB_CONTAINERS_AND_OBJECTS_INHERIT,TRUSTEE_IS_GROUP); 
```

第二个调用替代第一个。最后，我没有得到同一组的两个条目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T15:34:30.563

> 我看到每次最后一次通话都会覆盖先例。

这不是大多数安全 API 的行为。就 DACL API 而言，您只需创建 DACL，它只是一个 ACE 列表并将 DACL 交给操作系统。操作系统不执行任何类型的折叠或类似的操作，这就是为什么通过将 ACE 以错误的顺序放置可能（很容易）做错事的原因。（拒绝 ACE 需要在允许 ACE 之前进行...）

现在，您使用的 API 是一个例外——`SetEntriesInAcl`尝试将多个权限集“合并”在一起。如果您不想要这种行为，您需要自己使用[`AddAce`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa374970.aspx)和类似功能构建 DACL。

# android - 在 Android 中持久化文件描述符

> ID：11829760
> 
> 赞同：1
> 
> 时间：2012-08-06T13:57:28.613
> 
> 标签：android, persistence, file-descriptor

我正在编写一个 Android 应用程序来管理文件并与其他应用程序共享它们。该应用程序实现了一个内容提供者，它将`ParcelFileDescriptor`对象分发给请求应用程序（就像内置的电子邮件应用程序和 K-9 邮件应用程序一样）：

```
 public ParcelFileDescriptor openFile(Uri uri, String mode)
        throws FileNotFoundException {
    File file;      
    ...

    file = new File(FilePermsActivity.FILE_ROOT, fileName);         
    ParcelFileDescriptor fd;        
    fd = ParcelFileDescriptor.open(file, ParcelFileDescriptor.MODE_READ_WRITE);         
    // store the file descriptor for later
    String callerPackage = getAppNameByPID(getContext(), Binder.getCallingPid());       
    FilesApplication.getInstance().addFd(callerPackage, fd);            
    return fd;
} 
```

我想允许文件管理器稍后关闭文件描述符，以防止两个应用程序同时保持打开的读写文件描述符。该类`FilesApplication`执行此操作，存储`ParcelFileDescriptor`对象以供以后使用：

```
 public void addFd(String packageName, ParcelFileDescriptor fd) {
    List<ParcelFileDescriptor> fds = null; 

    if ( openFds.containsKey(packageName))
    {
        fds = openFds.get(packageName);
        fds.add(fd);
    }       
    else
    {
        fds = new ArrayList<ParcelFileDescriptor>();
        fds.add(fd);
        openFds.put(packageName, fds);
    }           
}

public List<ParcelFileDescriptor> getFds (String packageName) {
    return openFds.get(packageName);
} 
```

问题是，当我尝试使用 检索 open 时`ParcelFileDescriptor`，`getFds`文件描述符始终无效。通过检查，接收应用程序仍然可以使用之前发送的文件描述符，但我的应用程序无法关闭它。

是否有什么东西阻止了`ArrayList`文件描述符的存储和随后的检索？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T10:46:04.680

经过更多搜索，问题不在于`ParcelFileDescriptor`无论我使用哪个容器（`ArrayList`，常规`ParcelFileDescriptor[]`），它都已失效。我能找到的最好解释是[ContentProvider](http://developer.android.com/reference/android/content/ContentProvider.html#openFile%28android.net.Uri,%20java.lang.String%29)的文档说：

> 返回的 ParcelFileDescriptor 归调用者所有，因此他们有责任在完成后关闭它。也就是说，这个方法的实现应该为每个调用创建一个新的 ParcelFileDescriptor。

我想这意味着调用者可以独占控制返回的文件描述符，而我的应用程序以后无法关闭它。

# c# - 检查数据库是否已更新然后删除文件

> ID：11829765
> 
> 赞同：0
> 
> 时间：2012-08-06T13:57:40.067
> 
> 标签：c#, asp.net, sql, xml

我编写了一个从目录读取 XML 文件的服务，它从数据中创建对象并将数据传递到数据库中。我想检查每个游戏对象是否更新了数据库，如果更新正确，请删除文件，如果由于任何原因未正确添加，我想将文件移动到错误文件夹以供以后处理。

```
[WebMethod] 
public void RunService() 
{ 
    //Call XML loader to get collection of XML documents  
    foreach (GamePlay value in XMLLoader.Start()) 
    { 
        value.addNewGamePlay(); 
    } 
    //call inject data method for each collection 
} 
```

这个 XMLLoader 类返回 GamePlay 对象的数组：

```
public static Array Start() 
{ 
   string[] filePaths = Directory.GetFiles(@"C:\Users\bradleya\Desktop\XML\"); 
   List<GamePlay> gameObj = new List<GamePlay>();  

   foreach (string value in filePaths) 
   { 
      XmlDocument xd = new XmlDocument(); 
      xd.Load(value); 
      XmlNode documentNode = xd.SelectSingleNode("/GamePlayData/GamePlay"); 

      GamePlay newGame = new GamePlay(); 
      newGame.setType(Convert.ToString(documentNode.SelectSingleNode("type").InnerText)); 
      newGame.setGamePlayID(Convert.ToInt32(documentNode.SelectSingleNode("GamePlayID").InnerText)); 
      newGame.setParticipantID(Convert.ToInt32(documentNode.SelectSingleNode("ParticipantID").InnerText)); 
      newGame.setGameVersionID(Convert.ToInt32(documentNode.SelectSingleNode("GameVersionID").InnerText)); 
      newGame.setGameID(Convert.ToInt32(documentNode.SelectSingleNode("GameID").InnerText)); 
      newGame.setGameScenarioID(Convert.ToInt32(documentNode.SelectSingleNode("GameScenarioID").InnerText)); 
      newGame.setStartDateTime(Convert.ToDateTime(documentNode.SelectSingleNode("Start").InnerText)); 
      newGame.setEndDateTime(Convert.ToDateTime(documentNode.SelectSingleNode("End").InnerText)); 
      newGame.setSuccess(Convert.ToBoolean(documentNode.SelectSingleNode("Success").InnerText)); 

      gameObj.Add(new GamePlay); 
   } 

   return gameObj.ToArray(); 
} 
```

此方法在将对象变量传递给数据访问层的对象类中触发：

```
public void addNewGamePlay() 
{ 
    // dataaccess method call to add GamePlay 
    // (from the DB) is then set for the object 
    DataAccessConn.createNewGamePlay(this.ParticipantID, this.GameVersionID, this.GameID, this.GameScenarioID, this.StartDateTime, this.EndDateTime, this.success); 
} 
```

最后通过这里的数据访问层方法将数据传入数据库：

```
public static void createNewGamePlay(int ParticipantID, int GameVersionID,int GameID,int GameSenarioID,DateTime Start,DateTime End,Boolean success) 
{ 
   SqlConnection oConn = new SqlConnection(); 
   oConn.ConnectionString = @"Data Source=SNICKERS\SQLEXPRESS;Initial Catalog=VervePhaseOne;Integrated Security=True"; 

   oConn.Open(); 

   SqlCommand cmd = new SqlCommand(); 
   cmd.Connection = oConn; 
   cmd.CommandType = CommandType.StoredProcedure; 
   cmd.CommandText = "addGamePlay"; 

   cmd.Parameters.Add(new SqlParameter("@ParticipantID", SqlDbType.Int)); 
   cmd.Parameters["@ParticipantID"].Value = ParticipantID; 
   cmd.Parameters.Add(new SqlParameter("@GameVersionID", SqlDbType.Int)); 
   cmd.Parameters["@GameVersionID"].Value = GameVersionID; 
   cmd.Parameters.Add(new SqlParameter("@GameID", SqlDbType.Int)); 
   cmd.Parameters["@GameID"].Value = GameID; 
   cmd.Parameters.Add(new SqlParameter("@GameScenarioID", SqlDbType.Int)); 
   cmd.Parameters["@GameScenarioID"].Value = GameSenarioID; 
   cmd.Parameters.Add(new SqlParameter("@Start", SqlDbType.DateTime)); 
   cmd.Parameters["@Start"].Value = DateTime.Now; 
   cmd.Parameters.Add(new SqlParameter("@End", SqlDbType.DateTime)); 
   cmd.Parameters["@End"].Value = DateTime.Now; 
   cmd.Parameters.Add(new SqlParameter("@success", SqlDbType.Bit)); 
   cmd.Parameters["@success"].Value = success; 

   cmd.ExecuteNonQuery(); 
} 
```

我试图传递的 XML 文件是：

```
 <?xml version="1.0" encoding="utf-8" ?> 
    <GamePlayData> 
      <GamePlay> 
        <type>add</type> 
        <GamePlayID>1</GamePlayID> 
        <ParticipantID>1</ParticipantID> 
        <GameVersionID>1</GameVersionID> 
        <GameID>1</GameID> 
        <GameScenarioID>1</GameScenarioID> 
        <Start>22/01/2012 23:59:59</Start>  
        <End>22/01/2012 23:59:59</End>  
        <Success>False</Success>  
      </GamePlay> 
    </GamePlayData> 
```

addGamePlay 存储过程是：

```
CREATE PROCEDURE [dbo].[addGamePlay] 
@ParticipantID int, 
@GameVersionID int, 
@GameID int, 
@GameScenarioID int, 
@Start dateTime, 
@End dateTime, 
@Success varchar(10) 
AS 
INSERT INTO GamePlay(ParticipantID,GameVersionID,GameID,GameScenarioID,StartDateTime,EndDateTime,Success) 
VALUES (@ParticipantID,@GameVersionID,@GameID,@GameScenarioID,@Start,@End,@Success) 
return @@identity 
```

为了澄清我的问题，在我从目录中删除文件或将其移动到错误文件夹之前，我想添加一种验证形式来检查文件是否被正确读取以及数据是否正确传递到数据库中。我正在考虑在名为“rootFile”的对象类中创建一个变量，这样我就可以轻松地删除它，并在运行服务方法中添加一个测试，如果它通过了测试，则删除 else if remove 但我不确定语法或者如果这个是最好的方法。任何建议表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:07:45.737

我的一个简单建议算不上。xml 文件中存在的记录，当您在表中插入记录时，它也返回 no。受影响的行数。如果两个数字相等，则数据库已正确更新，否则会发生一些错误，希望您理解。

# ruby - 使用入站套接字模式拨打电话后是否可以将音频播放到线路？

> ID：11829766
> 
> 赞同：1
> 
> 时间：2012-08-06T13:57:40.553
> 
> 标签：ruby, telephony, freeswitch

我正在处理 CRON 或其他一些外部事件触发的操作，它应该使用 FreeSwitch 拨打电话并播放声音文件。我想我必须为此使用入站事件套接字模式。

当使用出站模式（由来电触发）时，我可以播放文件，因为所有[DialPlanTools](http://wiki.freeswitch.org/wiki/Category%3aDptools)都可用。对于入站模式，只有有限数量的命令调用[mod_socket](http://wiki.freeswitch.org/wiki/Mod_commands)可用，并且`playback`不是其中之一。我还打算使用`say`, `record`，`read`也许还有其他人。

我在单独的服务器中使用出站套接字模式来处理传入呼叫，并且传递上下文似乎不是一件容易的事。我不能使用出站套接字，因为它不是持久的，一旦通话结束，FreeSwitch 会立即断开连接。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:15:33.970

我猜你错过了“完整”参数： [http ://wiki.freeswitch.org/wiki/Event_socket_outbound](http://wiki.freeswitch.org/wiki/Event_socket_outbound)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-09T13:42:53.193

自由切换很棘手。[斯坦尼斯拉夫·辛亚金（ Stanislav Sinyagin](https://stackoverflow.com/users/1461066/stanislav-sinyagin)）提出了建议`uuid_broadcast`，但它并没有单独起作用。您需要立即添加另一个命令 ( `uuid_phone_event`) 才能使其工作。整体代码如下：

```
originate sofia/external/sip:+<phone_number_here>@<freeswitch_ip_here> &park
# wait for remote side to pick up the call
uuid_broadcast <uuid_from_originate> speak::cepstral|david|'Some text in single quotes here' aleg
uuid_phone_event <uuid_from_originate>

uuid_broadcast <uuid_from_originate> playback::'<absolute_path_to_mp3_or_wav>' aleg
uuid_phone_event <uuid_from_originate>

sched_hangup +1 <uuid_from_originate> 
```

FS wiki 中有关该命令的文档几乎没有`uuid_phone_event`，我偶然在`fs_cli`. 是的，您需要另一个入站套接字连接来监视事件（至少没有 Ruby 库支持侦听服务器生成的事件并在同一套接字连接上发出命令）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-13T02:40:56.540

你试过了吗：

uuid_displace call_uuid start /path/to/file

# java - startActivityForResult(Intent, int) 整数参数的目的是什么

> ID：11829772
> 
> 赞同：3
> 
> 时间：2012-08-06T13:57:50.033
> 
> 标签：java, android, eclipse

我正在关注使用“startActivityForResult”函数的教程。我知道为什么要使用这个函数，如果我们想使用返回的数据，我们使用 onActivityResult() 函数。我想知道的是，为什么我们将 Integer 传递给 startActivityForResult() 函数？它在哪里使用？

感谢您的帮助！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T14:00:34.353

当您开始的 Activity 完成时，第二个参数将传递给`onActivityResult()`调用 Activity 的方法。这是为了区分不同的结果。

您可能会遇到一个 Activity 需要调用其他几个以获得结果的情况，通过`int`为每个 Activity 指定一个唯一的，您可以在获得结果时确定要执行的正确操作。

**编辑：**这是一个例子。

假设您有一个屏幕（活动 A），您可以在其中从图库中选择一张图片，然后选择一位朋友将其发送给朋友。您将启动一个活动以通过单击按钮从图库中挑选一张图片，也许您还有一个“朋友选择器”活动，您也可以从活动 A 开始。

您希望这两个活动都返回用户选择的数据。`onActivityResult()`当用户完成上述两个活动时，将在活动 A 上调用。通过为画廊活动指定`requestCode`for`startActivityForResult()`和您的“朋友选择器”，您就知道在`onActivityResult()`.

另外，请注意，您不需要复杂的`requestCode`. 您可以分别传入画廊和朋友选择器的值`1`和`2`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:29:04.780

这是为了区分不同的结果。您可能会使用不同的意图来启动每个意图`Activity`，通常您有如下常量：

```
ACTIVITY_RESULT_INTENT_1 = 1
ACTIVITY_RESULT_INTENT_2 = 2 
```

因此，如果您将其中之一传递给`startActivityForResult()`，那么它还将返回这些请求代码以允许您使用所需的任何逻辑。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:00:59.550

从[参考](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

> 如果 >= 0，则活动退出时将在 onActivityResult() 中返回此代码。

所以，这是为了你自己的利益。只需设置一个代码 - 如果您愿意，可以使用 ENUM 设置一些正确的返回值。:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:01:01.720

根据[文档](http://developer.android.com/reference/android/app/Activity.html#startActivityForResult%28android.content.Intent,%20int%29)

> requestCode 如果 >= 0，则活动退出时会在 onActivityResult() 中返回此代码。

# javascript - Jquery Ajax 和 Json：如何检查是否未定义

> ID：11829773
> 
> 赞同：4
> 
> 时间：2012-08-06T13:57:49.693
> 
> 标签：javascript, jquery, ajax, json

我得到了这个 Jquery 代码：

```
$.ajax({
    url: "?module=gestionApplication&action=getTests&scenario="+encodeURI(scenario)+"&application="+$application,
    dataType:'json',
    success: function( data ) {
        $.each(data, function(i, item) {
            $("#tests tbody").append($tr+"<td title='"+item.DESCRIPTION+"'>"+item.ID+"</td>" +
            "<td>"+
                "Header : "+item.HEADER + '<br/>' +
                "Méthode : "+item.METHODE +  '<br/>' +
                "PostBody : "+item.POSTBODY +  '<br/>' +
                "URL : "+item.URL +  '<br/>' +
                "ParseReponse : "+item.PARSEREPONSE +  '<br/>' +
            "</td>" + 
```

所以我从我的服务器收到了 JSON 响应，但并非所有字段都已满。有时 item.HEADER 或 item.METHODE 无法定义，所以我的表格中出现“未定义”文本。问题是，我是法国人，我想要不同的文本，而不是这个“未定义”。

那么如何测试变量是否已定义？或者更好的是，如果未定义变量，是否可以将此“未定义”文本更改为不同的文本？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T13:59:53.470

您可以在 concat 中进行快速条件/逻辑或检查：

```
"Header : " + (item.HEADER || '') + '<br/>' + 
```

所以现在，如果`item.HEADER`是`undefined`我们将遇到空字符串。当然，您也可以使用更具表现力的字符串之类的`"empty"`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-08-06T14:00:29.830

```
if (typeof variable == "undefined")
{
    // variable is undefined
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:00:47.570

使用三元运算符...（测试？如果为真，则为：如果为假，则为）

```
...+( item.HEADER ? item.HEADER : "something french" )+... 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:00:18.773

像这样轻松完成：

```
if (item.HEADER === undefined) {
    item.HEADER = 'indéfini';
}

// or 

if (typeof item.HEADER === 'undefined') {
    item.HEADER = 'indéfini';
} 
```

# c# - 如何停止多线程中的特定线程并销毁在特定线程中创建的所有变量和对象

> ID：11829777
> 
> 赞同：1
> 
> 时间：2012-08-06T13:58:04.467
> 
> 标签：c#, multithreading

我正在开发一个客户端-服务器程序。我使用 C# 编程语言和 .net framework 4。在那里，每当新客户端连接到服务器时，服务器都会创建新线程来处理每个客户端。如果其中一个客户端断开连接，则控制此断开连接客户端的线程也将停止（终止）。我不知道如何在多个线程中停止这个特定的线程。我的程序的伪代码将是这样的：

**服务器端程序：**

```
Thread t;
private void form1_load(object sender, EventArgs e)
{
    startserver();
}

void startserver()
{
     t = new Thread(waitclientconnection);
     t.start();
}

void waitclientconnection()
{
    //namedpipeserverconnection code
    //waitforclientconnection

    if (clientOne is connected)
    {    
         startserver(); //create new thread to wait connection for next client
    }

    //object and variable that created within the thread
    Clientprofile cp = new Clientprofile(); 
    String clientstate = "....";

    if (clientOne sends "close" message)
    {
    //the thread that controls ClientOne will be killed   <-- This is the point that I would like to solve
    }
} 
```

我承认这个程序有点复杂，但目前我只有这种方式来实现我的程序。我找到了一些建议声明布尔变量来控制线程停止或使用while循环运行的解决方案。但是在我的程序中，这种方式可以停止整个线程并且无法为新连接的客户端创建新线程。此外，我还想知道在每个特定线程中创建的变量和对象是否也可以在该线程停止时从内存中销毁。想象一下，如果在一小时内连接了 100 个客户端，而目前只有 10 个客户端在连接。我只想在内存中只为这 10 个客户端保留对象和变量。这个问题很复杂，但我相信你们所有人都能解决并提出任何建议。真心希望大家给点建议。。。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:03:02.157

收到关闭消息的线程是应该被“杀死”的线程，对吧？

所以只要确保代码停止并正常返回。
不要打电话`Thread.Abort()`或任何事情，那会弄得一团糟。

```
void waitclientconnection()
{
    if (clientOne is connected)
    {    
         startserver(); //create new thread to wait connection for next client
    }

    while (keepGoing)
    {
        ...

        if (clientOne sends "close" message)
        {
             keepGoing = false;
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:05:57.370

尝试重构您的代码，以便您拥有一个侦听器线程，该线程在获得连接时会产生客户端线程。这些客户端线程中的每一个都应该能够在适当的时候结束自己。此外，您可能应该将客户端线程的`IsBackground`属性设置为`true`，这样它们就不会阻止服务器退出。

你现在这样做的方式也可能是可行的，但似乎比必要的复杂。

# jquery - 通过 Jquery 函数传递元素

> ID：11829781
> 
> 赞同：1
> 
> 时间：2012-08-06T13:58:13.513
> 
> 标签：jquery, function

我一直在反对这个问题，这反映了我基本缺乏理解。

我想收集一个类的所有实例，然后能够有一个函数来理解哪个元素实例调用了它。

我创建了一个小提琴[http://jsfiddle.net/AKa4s/](http://jsfiddle.net/AKa4s/)，它不起作用，只是为了解释我的问题。

就像这样，我收集所有 div 元素并为其分配一个函数： $(".square").each(writeColorpanel);

然后在那个函数中我需要调用另一个函数。下一个函数似乎完全不知道是谁调用的。我需要来电显示（笑话）。

问题是我最终对不同的 div 运行相同的计算，并重复该函数，以便我可以根据结果将 css 应用于每个 div。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:13:35.110

你这样做太复杂了。

```
jQuery(document).ready(function($) {

// run the function for every div
$(".square").each(function(i) {

    $('.output').eq(i).val(multiplyColor($(this).val()));
    //Show the output to the 1st/2nd/3rd output (that's where eq comes from
    //As for the value, I call a function and pass a parameter to do the calculations

    //Now if you want to call another function you need to pass the element itself as a parameter;
    alertMyId($(this));
});

function alertMyId(elem) {
   //elem has now all the same properties as if you were in the "each" function      
    alert(elem.attr('id'));

}

//Ideally if you just want to calculate something, you should just pass along the value you want to calculate
function multiplyColor(value) {
  var color = 3;
  return  value * color;
} 
```

}); 检查这个[**小提琴**](http://jsfiddle.net/cZHGn/4/)

此外，您不能拥有具有相同 ID 的不同 html 元素。改用类。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:10:21.703

是这样的吗：

```
$(function() {
    $(".square").each(function(i,e) {
        writeColorpanel(i,e);
    });

    function writeColorpanel (i, elem) {
       color=3;        
       onColorChange(elem, color);
    }

    function onColorChange(elem, color) {
       var m = elem.value
       var q = m*color;
       $('#output_'+elem.id).val(q);
    }
}); 
```

[小提琴](http://jsfiddle.net/AKa4s/1/)

# android - FragmentActivity with a Fragment Containing a MapView

> ID：11829782
> 
> 赞同：2
> 
> 时间：2012-08-06T13:58:15.870
> 
> 标签：android, android-fragments, android-mapview, android-maps, android-compatibility

I know there are a few questions like this but what I'm looking for is slightly different the way I see it.

**THE PROBLEM**

I have one `Activity` and I am only ever going to have one `Activity`.

I do however have multiple `Fragments`; one of which contains a `MapView`.

I have successfully got this working in `API level 3.0` and greater. However, the problems start when I want to go lower than this using the compatibility library as I then need to make my `Activity` extend `FragmentActivity` to get `Fragments` to work and then I obviously lose the ability to also extend `MapActivity`

**THE QUESTION**

How can I use the `Compatibility Support Library` to enable the use of `Fragments` and a `MapView` within the same `Activity`?

Any help would be greatly appreciated.

**P.S** I personally think it's ridiculous they didn't include support for this within the `Compatibility Support Library`.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:11:35.173

我确实做到了这一点！使用这个：

[https://github.com/petedoyle/android-support-v4-googlemaps](https://github.com/petedoyle/android-support-v4-googlemaps)

这花了一些时间，但是有了这个，我已经能够在同一个 Activity 中将 Fragments 和 MapView 降低到 2.3（也可能更低）。你基本上从那个 github 站点获取 jar，它被称为 android-support-v4-r7-googlemaps.jar，并使用它而不是默认的支持库。这样，您的主要活动仍会扩展 FragmentActivity（在后台扩展 MapActivity）。

在同一个链接上应该有一个自述文件以获取进一步的指导。

# javascript - Delete multiple Objects at once on a fabric.js canvas in html5

> ID：11829786
> 
> 赞同：21
> 
> 时间：2012-08-06T13:58:27.073
> 
> 标签：javascript, html, canvas, fabricjs

I'm actually working on a html5 canvas project which uses the fabric.js Framework for the canvas interactions. Now I'm struggeling with the deletion of multiple objects. The following code does not seem to track the selected objects, but tracks all objects on the canvas.

```
var deleteSelectedObject = document.getElementById('delete-item');
deleteSelectedObject.onclick = function(){
    var curSelectedObjects = new Array();
    curSelectedObjects = canvas.getObjects(canvas.getActiveGroup);
    canvas.discardActiveGroup();
    for (var i = 0; i < curSelectedObjects.length; i++){
        canvas.setActiveObject(curSelectedObjects[i]);
        canvas.remove(canvas.getActiveObject());
    }
}; 
```

Don't get my failure.

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-08-07T11:11:29.710

由于@Kangax 评论解决了大部分问题，我找到了以下解决方案来从画布中删除当前选定的对象。

```
var deleteSelectedObject = document.getElementById('delete-item');
deleteSelectedObject.onclick = function()
{
if(canvas.getActiveGroup()){
      canvas.getActiveGroup().forEachObject(function(o){ canvas.remove(o) });
      canvas.discardActiveGroup().renderAll();
    } else {
      canvas.remove(canvas.getActiveObject());
    }
}; 
```

该函数检查是否选择了一个组。如果选择了一个组，则该组的每个对象都将被删除。如果未选择任何组，则该功能会尝试删除选定的对象。如果未选择任何内容，则不会更改画布。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T14:49:12.083

您的代码似乎正在选择然后取消选择对象。

这可能会更好：

```
var deleteSelectedObject = document.getElementById('delete-item');
deleteSelectedObject.onclick = function()
{
    var curSelectedObjects = canvas.getObjects(canvas.getActiveGroup);

    canvas.discardActiveGroup();
    for (var i = 0; i < curSelectedObjects.length; i++)
    {
        canvas.remove(curSelectedObjects[i]);
    }
}; 
```

好资料链接：

[https://github.com/kangax/fabric.js/wiki/Tutorial-2#wiki-modifying-objects](https://github.com/kangax/fabric.js/wiki/Tutorial-2#wiki-modifying-objects)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-10-06T09:25:46.780

您可以检查任何对象属性并可以删除

```
var objects = canvas.getObjects();

for (var i = 0; i < objects.length; ) {
  if (objects[i].name == 'cropArea' || objects[i].name == 'bleedLine') {
    canvas.remove(objects[i]);
    i = 0;
  } else {
    i++;
  }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-06-06T16:35:34.110

我这样做了：

```
 var selectedObj = canvas.getObjects(canvas.getActiveGroup()) 
```

将所选对象的数组返回给我。:) 您的代码片段中缺少最后一个函数括号

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-15T16:11:45.643

你知道 canvas.remove 可以接受多个参数吗？所以最简单的方法应该是这个：

```
canvas.remove(...canvas.getObjects()); 
```

除此之外，`canvas.clear`只会删除画布中的对象，而不会删除背景。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2016-12-22T15:43:29.913

除了我在 jsfiddle 上找到的一个解决方案之外，上述解决方案（或 stackoverflow 上的任何其他解决方案）都没有对我有用：

```
function deleteObjects(){
var activeObject = canvas.getActiveObject(),
activeGroup = canvas.getActiveGroup();
if (activeObject) {
    if (confirm('Are you sure?')) {
        canvas.remove(activeObject);
    }
}
else if (activeGroup) {
    if (confirm('Are you sure?')) {
        var objectsInGroup = activeGroup.getObjects();
        canvas.discardActiveGroup();
        objectsInGroup.forEach(function(object) {
        canvas.remove(object);
        });
    }
}
} 
```

[http://jsfiddle.net/beewayne/z0qn35Lo/](http://jsfiddle.net/beewayne/z0qn35Lo/)

# hibernate - Changing JAXB unmarshalling as per the ORM structure

> ID：11829788
> 
> 赞同：0
> 
> 时间：2012-08-06T13:58:34.370
> 
> 标签：hibernate, jaxb, eclipselink, moxy

I am receiving following XML structure:

```
<Parent>
    <Holding id="111"/>
    <Party id="yyy"/>
    <Party id="xxx"/>
    <Party id="zzz"/>
    <Relation partyRefId="xxx" holdingRefId="111"/>
    <Relation partyRefId="yyy" holdingRefId="111"/>
</Parent> 
```

XML will be unmarshall to object model with the help of JAXB and I am saving it into the database using hibernate. So there is table for each element and column for each attribute.
Here Relation table has HoldingFK and PartyFK columns. In this
`if Relation.holdingRefId == Holding.id`
then Relation.HoldingFK is going to have database genearted HoldingPK and same will be applicable to Party too.
`if Relation.partyRefId ==Party.id` then Relation.PartyFk will have database specific PartyPK value.
Now JAXB is naturally creating an child array of Relation objects which can only have ParentFKs if persisted into database.
How can I add Relation objects as children of Holding or Party based on some condition?

```
Note: Here I have actual business terminology to make my query more understandable. 
```

# spring-mvc - Spring MVC entry point

> ID：11829789
> 
> 赞同：0
> 
> 时间：2012-08-06T13:58:34.793
> 
> 标签：spring-mvc

I want my project to use more than one controller. My question is, how do I navigate from one controller to another and what should I do about having a standard home page for my users to land on? Should this be a separate "homeController"? I don't understand how this should work. The "Spring in Action" book doesn't go into enough details to explain this.

Thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-10T22:50:36.167

您可以将不同的控制器（Java 类）与`@Controller`注解一起使用，具体取决于您要做的是与控制器中定义的方法关联的 URL，例如：

```
@Controller
public class HomeController {

    @RequestMapping(value = "/home", method = RequestMethod.GET)
    public ModelAndView home() {
        //code to process for the /home url
    }
    // More code
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:40:33.907

在 servlet-context.xml 检查

```
<context:component-scan base-package="com.domain.package.controller" /> 
```

并使用

```
@Controller 
```

在课堂上你想成为控制器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-08T06:26:29.920

如果您的网站需要一个像 login.jsp 这样的通用登录页面，您可以按照以下方式进行操作。在 web.xml 中配置您的调度程序 servlet，如下所示。

```
<servlet>
        <servlet-name>public</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
        <servlet-name>public</servlet-name>
        <url-pattern>/pub/*</url-pattern>        
</servlet-mapping> 
```

然后，您应该有一个调度程序 servelt 调用 public-servelt.xml，您可以在其中处理所有用户的登录请求。它应该包含这样的配置。

```
<context:component-scan base-package="com.mycompany.web.controller.secure" />

    <bean class="org.springframework.web.servlet.view.InternalResourceViewResolver" p:prefix="/WEB-INF/jsp/pub/"
        p:suffix=".jsp" />

    <bean class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter"
        p:synchronizeOnSession="true" /> 
```

然后在你的 index.jsp 中 web app 的常用登陆地方，将一个 jsp 向前打到 dispatcher servelt 上面，如下所示。

```
<jsp:forward page="/pub/login" /> 
```

注意：在您的控制器中，您需要在 get 方法中进行 /login 映射，如下所示。

@RequestMapping(method = {GET, HEAD}, value = "/login") public String loginHandler(.......){}

这就是通常如何通过 spring 控制器实现一个普通的登陆页面。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:24:03.040

您可以使用调度程序 servlet 委托给不同的控制器。

```
 <servlet>
        <servlet-name>your-servlet</servlet-name>
        <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
        <load-on-startup>1</load-on-startup>
    </servlet>

    <servlet-mapping>
        <servlet-name>your-servlet</servlet-name>
        <url-pattern>/*</url-pattern>
    </servlet-mapping> 
```

现在，根据您`@RequestMapping`在控制器中的绑定，`DispatcherServlet`将决定将请求路由到何处。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T14:26:11.270

另请查看 github 上的 spring mvc 展示。[https://github.com/SpringSource/spring-mvc-showcase](https://github.com/SpringSource/spring-mvc-showcase)

# css - ie 9同时支持filter和rgba

> ID：11829792
> 
> 赞同：3
> 
> 时间：2012-08-06T13:58:54.637
> 
> 标签：css, filter, internet-explorer-9, rgba

我一直在寻找解决方案 2 小时，这对我的情况没有合适的解决方案。

我使用 rgba 来设置不透明度和背景颜色。但是大家都知道ie 8及以下不支持这个，所以我为ie8及以下版本的ie添加了一个过滤器来实现这个。但我的问题是 ie 9 将同时显示过滤器和 rgba，这使得颜色不同。

所有的 css 属性都是生成的，所以在这里我可以添加单个属性（我不能`<if gt IE9>`为 ie9 使用或单独的 css 文件这样的东西）。我尝试使用一些 css hack 使 rgba 仅对 ie9 透明，但是单个属性`:root h{background-color:red/0\IE9;}`的 css hack 不起作用，css hack 是否已经修复？

请问有什么办法可以解决我的问题吗？谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T22:47:14.770

我建议的解决方案是将样式上的 IE9 上的 CSS hack 转换为`background-colour`在`filter`.

最好使用的 IE8 及以下 hack 是`\9`hack，[如此处所述](http://www.arcmarks.com/develop)。

所以是这样的：

```
.myclass {
    background-colour: #rrggbbaa;  /*insert your RGBA colour here.*/
    filter: alpha(opacity=50)\9;   /*the \9 should make it work only in IE8 and earlier*/
} 
```

以上根据自己的需要进行调整。

希望有帮助

# magento - 使用 Modman 进行开发扩展的 Magento 工作流程

> ID：11829795
> 
> 赞同：1
> 
> 时间：2012-08-06T13:59:07.213
> 
> 标签：magento, development-environment

我在我的个人计算机上安装 modman 以在 Magento 中开发一个自定义扩展，并对此进行相应的维护。我想知道 Magento Module 和 Modman 之间的正确工作流程。在更新我的扩展程序的过程中，我有一个疑问。为了完整的理解，我将根据我的观点描述工作流程：

1.  为我的扩展创建我的 git 存储库

    在服务器端：

    git init 裸露

2.  克隆此存储库并创建骨架到 modman 脚本

    纳米模组：

    代码 app/code/scope/company/Module/compamy_module.xml app/etc/modules/company_module.xml

3.  更新存储库

    git 添加/提交/推送

4.  在我免费安装的 Magento 中创建新分支

    git checkout -b 模块名

5.  在我的安装中克隆扩展

    modman 克隆 git@xxxx:/route/to/module/repository

好的，在这一点上，我有一个很好的环境来使用我的 Magento 模块扩展，但我有下一个疑问。谁可以更新从 magento 免费安装工作的模块存储库？我试试 `modman update moduleName`

但我没有更新扩展的存储库，正确的工作流程如何？我应该修改扩展存储库吗？我认为这可以从 Magento 全新安装中工作并从中更新 Magento 模块存储库....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:05:10.310

拿着这个：

1.  制作你的扩展仓库（裸与否无关紧要，建议将裸作为主存储库）
2.  像你一样创建 modman 脚本（你看起来不像一个合适的扩展）
3.  更新回购
4.  在您的 magento 安装上，您可以签出您的分支或使用主分支（单独的工作流程）
5.  模组人克隆……
6.  go back to 3\. add your changes and push to repo
7.  modman update moduleName

# php - 返回帖子数据

> ID：11829796
> 
> 赞同：-1
> 
> 时间：2012-08-06T13:59:15.607
> 
> 标签：php, javascript, jquery

```
$.post("../js.php", {state: state},
                            function(data) {
                                return data;
                        }); 
```

这是我的jQuery代码。就像你可以看到它向 js.php 发送一个 post 请求。

这是 js.php 的代码。

```
{...}
$query = "SELECT * FROM table WHERE x='" . $y . "'";

$result = $mysqli->query($query);

$num_rows = $result->num_rows;

echo $num_rows ? $num_rows : 0; 
```

现在，当我在 js 文件中提醒“数据”时，它显示正常。但是当试图返回它或将它分配给一个变量时它不起作用。控制台告诉我，已分配数据值的变量未定义。

有什么想法吗？

更新代码：

```
var data = null;

$.post("../js.php", {state: state},
function(response) {
data = response;
});

console.log(data); 
```

还是行不通。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:03:37.683

帖子中的函数是一个回调函数，你不能从它返回任何东西，因为没有人可以返回它。

您需要使用回调中返回的数据，例如：

```
$.post("../js.php", {state: state},
                            function(data) {
                                $('.someClass').html(data);
                        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:06:27.173

`$.post`一旦异步调用返回，您传递给异步方法的回调将在未来某个时间执行。JavaScript 执行已继续，现在在其他地方，因此您的回调无处可`return`去。

想象它是这样的：

```
//Some code... executed as you would expect
var data; //Currently undefined

$.post("../js.php", {state: state}, function(response) {
    //Callback is executed later, once server responds

    data = response; //No good, since we already executed the following code
    return response; //Return to where? We have already executed the following code
});

/* More code... we carry on to this point straight away. We don't wait for
   the callback to be executed. That happens asynchronously some time in
   the future */

console.log(data); //Still undefined, callback hasn't been executed yet 
```

If you need to work with the data returned by the async call, do so in the callback.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:02:41.910

```
var data = null;
$(...).click(function(e) {
    $.post("../js.php", {state: state},
                        function(response) {
                            data = response;
                    });
}); 
```

之后只需访问`data`变量。请记住，除非发布请求完成，否则它的值将为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:03:11.967

您发布的示例每次都不会执行任何操作，因为这样的 AJAX 调用是异步的（这就是 AJAX 中的**A**所代表的意思）。

如果您希望能够使用输出的值，请使用包含该值的唯一 ID 向您的页面添加一个隐藏元素。然后您可以通过 javascript 访问该元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T14:03:44.197

那是因为，ajax 调用是异步的。您永远不应该从回调函数返回值。在回调中完成工作或触发事件。

# javascript - 使用 WinJS 在 Windows Metro 中进行优雅的异常处理

> ID：11829800
> 
> 赞同：2
> 
> 时间：2012-08-06T13:59:27.260
> 
> 标签：javascript, exception, dom-events, microsoft-metro, winjs

当使用 WinJS 在 Windows Metro 中发生未处理的异常时，我想导航到我的应用程序的主页并使用 FlyOut 显示错误。问题是程序仍然继续到`terminateAppHandler`base.js 中。

这是我到目前为止得到的：

```
WinJS.Application.onerror = function (customEventObject) {

    // Get the error message and name for this exception
    var errorMessage = customEventObject.detail.error.message;
    var errorName = customEventObject.detail.error.name;

    // Bind them in an optionsObject to pass with the navigation
    var optionsObject = { errName: errorName, errMsg: errorMessage };

    // Navigate home with information concerning the error
    WinJS.Navigation.navigate("/pages/home/home.html", optionsObject);

    // Need something to tell Windows that the error is "taken care" of
    return false; // ?? 
} 
```

我在这里结束，终止应用程序：

```
var terminateAppHandler = function (data) {
    debugger;
    MSApp.terminateApp(data);
}; 
```

欢迎任何建议或意见！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:16:05.970

返回真而不是假。

对于不是通过 application.onerror 发送的异常，您还需要连接到 window.onerror。尽管如果出现异常，它确实是未处理的，并且无法预测应用程序处于什么状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T15:25:58.433

返回 true 应该完全符合您的需要。这就是我在我的应用程序中使用的。

# orchardcms - 使用 Orchard CMS 动态创建和检索页面的自定义内容

> ID：11829805
> 
> 赞同：1
> 
> 时间：2012-08-06T14:00:03.120
> 
> 标签：orchardcms

我们正在寻找为我们希望我们的网站动态处理并可以通过 Orchard Admin UI 编辑的内容创建自定义内容类型，

并将我们创建的内容加载到 Pages 中（考虑自定义 Layout.cshtml 文件）

有人可以通过示例解释如何使用 Orchard 来完成此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T12:39:16.883

如果您使用 Orchard 内容管理器，您将能够访问内容及其部分（在控制器操作或驱动程序中）

```
 var contentManager = WorkContext.Resolve<IContentManager>();
    IEnumerable<ContentItem> products = contentManager.Query("product").List();
    ContentItem expT = contentManager.Get(24);
    var test = expT.As<BodyPart>().Text; 
```

[http://docs.orchardproject.net/Documentation/content-types](http://docs.orchardproject.net/Documentation/content-types)

# zend-framework - Zend Framework：服务器上的致命错误

> ID：11829808
> 
> 赞同：1
> 
> 时间：2012-08-06T14:00:15.243
> 
> 标签：zend-framework, configuration, url-rewriting

我正在尝试将 ZF 网站放在 Internet 上，该网站在我的本地计算机 (WAMP) 上运行良好。

但是在Linux服务器上，只能正常显示主页面。对于其他页面，我遇到了一个致命错误：

> 致命错误：在 /var/www/staging/library/Zend/Controller/Dispatcher/Standard.php:248 中未捕获的异常“Zend_Controller_Dispatcher_Exception”和消息“指定的控制器无效（错误）”：248 堆栈跟踪：#0 /var/www/staging /library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Controller_Response_Http)) #1 /var/www/staging/library/Zend/Application/Bootstrap/Bootstrap.php( 97): Zend_Controller_Front->dispatch() #2 /var/www/staging/library/Zend/Application.php(366): Zend_Application_Bootstrap_Bootstrap->run() #3 /var/www/staging/public/index.php( 26): Zend_Application->run() #4 {main} 下一个异常 'Zend_Controller_Exception' 带有消息'指定的控制器无效（错误）#0 /var/www/staging/library/Zend/Controller/Front.php(954): Zend_Controller_Dispatcher_Standard->dispatch(Object(Zend_Controller_Request_Http), Object(Zend_Contr in /var/www/staging/library /Zend/Controller/Plugin/Broker.php 在第 336 行。

我激活了 URL 重写。我正在使用模块。index.php 和 application.ini 非常基础，我们没有自定义。

我想配置有问题...谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:38:32.650

*将应用程序从 Windows 平台部署到 Linux 时，可能遇到的最典型的错误类型是由于文件名大小写。*Linux 系统对文件名和大小写非常严格。

您遇到的错误也可能是这些情况之一。检查名称`ErrorContainer.php`并尝试匹配您在路由和文件系统中指定的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:38:19.003

在更改服务器 Windows => Linux。首先要检查的是在 Windows 中忽略大小写。检查文件名和类名是否拼写正确的第一个大写字母等。

# maven - Maven Tycho：如何在产品构建中排除 eclipsec.exe？

> ID：11829809
> 
> 赞同：5
> 
> 时间：2012-08-06T14:00:15.853
> 
> 标签：maven, eclipse-rcp, tycho

我将 Eclipse RCP 产品的构建从 PDE-build 切换到 Maven Tycho。除了主（品牌）启动器可执行文件外，该产品现在还包括“eclipsec.exe”文件。我们想从我们的产品中省略这个基于控制台的启动器，因为它可能会使我们的客户感到困惑。有没有办法用第谷做到这一点？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-07T15:04:23.457

我在[tycho-users 列表](http://dev.eclipse.org/mhonarc/lists/tycho-user/msg03071.html)上得到了这个答案：

在您的 eclipse-repository 项目中，假设您有一个 .product 文件，您可以在同一目录中放置另一个名为 .p2.inf 的文件

对于 p2.inf 文件的内容，您可以放置​​一个 p2 接触点来删除该文件：

`instructions.configure=org.eclipse.equinox.p2.touchpoint.natives.remove(path:${installFolder}/eclipsec.exe);`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T07:34:09.647

我不知道如何直接用 tycho 解决，但是你可以用 maven-antrun-plugin 来实现。有一个小技巧可以及时删除eclipsec.exe。您必须将删除步骤放在物化和 p2-director-plugin 的存档目标之间。我将删除步骤放在阶段预集成测试中，并将存档步骤移至阶段集成测试。

```
<plugin>
      <artifactId>maven-antrun-plugin</artifactId>
        <executions>
          <execution>
            <id>delete-eclipsec.exe</id>
            <phase>pre-integration-test</phase>
            <configuration>
              <target>
                <delete file="${project.build.directory}/products/<<your.product.id>>/win32/win32/x86/eclipsec.exe"/>
              </target>
            </configuration>
            <goals>
              <goal>run</goal>
            </goals>
          </execution>
        </executions>
      </plugin>
      <plugin>
        <groupId>org.eclipse.tycho</groupId>
        <artifactId>tycho-p2-director-plugin</artifactId>
        <version>${tycho-version}</version>
        <executions>
          <execution>
            <id>materialize-products</id>
            <goals>
              <goal>materialize-products</goal>
            </goals>
          </execution>
          <execution>
            <id>archive-products</id>
            <phase>integration-test</phase>
            <goals>
              <goal>archive-products</goal>
            </goals>
          </execution>
        </executions>
      </plugin> 
```

结果：product.zip 中没有 eclipsec.exe。
希望有帮助。

# c - 指向不同结构的指针数组

> ID：11829810
> 
> 赞同：2
> 
> 时间：2012-08-06T14:00:17.180
> 
> 标签：c, arrays, pointers, struct

可以做这样的事情[如何初始化指向结构的指针数组？](https://stackoverflow.com/questions/194828/how-can-i-initialize-an-array-of-pointers-to-structs) 但有不同的结构？

例如

```
static struct structA_t a = {"ads", "as"};
static struct structB_t b = {"zzds", "dfr", "shywsd"};
static struct structC_t c = {"ssa", "ad", "dhksdhs"};

struct some_type *array[] = { &a, &b, &c}; 
```

some_type 会是什么样子？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-08-06T14:05:43.807

您可以定义`some_type`为联合：

```
typedef union{
  struct structA_t;
  struct structB_t;
  struct structC_t;
}some_type; 
```

这将导致您不知道数组中哪个元素实际包含什么的问题。

为了克服这个问题，添加另一个字段来指定使用的内容：

```
/* numbers to identify the type of the valid some_type element */
typedef enum my_e_dataId{
  dataid_invalid = 0,
  dataid_a,
  dataid_b,
  dataid_c
} my_dataId;

typedef union u_data {
  struct structA_t* a;
  struct structB_t* b;
  struct structC_t* c;
}mydata;

typedef struct s_some_type{
  my_dataId dataId;
  mydata    myData;
}some_type; 
```

然后你可以按如下方式初始化你的数组：

```
some_type sta[] = {
  {dataid_a, (struct structA_t*) &a},
  {dataid_b, (struct structA_t*) &b},
  {dataid_c, (struct structA_t*) &c}
}; 
```

当您遍历 的元素时`array`，首先评估`dataId`，以便您知道`myData`. 然后，例如，使用访问第一个元素的数据

```
sta[0].myData.a->FIELDNAME_OF_A_TO_ACCESS 
```

或第三个元素

```
sta[2].myData.c->FIELDNAME_OF_C_TO_ACCESS 
```

有关工作示例，请参阅此 ideone：http: [//ideone.com/fcjuR](http://ideone.com/fcjuR)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:08:45.757

在 C 中，使用 void 指针可以做到这一点（用“void”替换“struct some_type”），但你真的不应该这样做。数组用于使用同质数据进行编程。

# android - 使用 Json for Netflix 的 Android AJAX 请求失败 - 解析器错误

> ID：11829812
> 
> 赞同：1
> 
> 时间：2012-08-06T14:00:19.053
> 
> 标签：android, jquery, ajax, json, device

**我对手机的简单 html 页面有疑问。**

对服务 odata.netflix.com 的 Ajax 请求在包括 iPhone 在内的所有浏览器中都可以正常工作，但在 android 浏览器上却不行。

测试了三个不同版本的机器人，包括 ICS。总是相同的消息状态是成功的，但是带有解析器错误。

我在所有三款 Android 设备上都尝试了 Opera 浏览器，它可以正常工作，但不能在 Android 浏览器上工作。

我尝试了不同版本的 jQuery。

我试过 getjson 命令。

我尝试了 promisejs.js 框架。

我尝试了各种组合

```
cache: false;

crossDomain: true;

$(document).bind("mobileinit", function () { 
    $.support.cores = true; 
    $.mobile.ajaxEnabled = true; 
    $.mobile.allowCrossDomainPages = true; 
});

$.mobile.allowCrossDomainPages = true; 
$.mobile.ajaxEnabled = true;
$.support.cores = true; 
```

并且它们都不适用于**android浏览器**。

欢迎任何帮助。

提前致谢。

# c# - 如何使用 C#.Net 代码远程重置 IIS？

> ID：11829813
> 
> 赞同：0
> 
> 时间：2012-08-06T14:00:19.163
> 
> 标签：c#, iis, windows-server-2008

我在 Windows Server 2008 上运行 IIS 服务，我想从我的 Windows 7 机器上重置它。

如何使用 C#.Net 代码远程重置 IIS？

我尝试使用 Microsoft.Web.Administration，但它不接受远程服务器详细信息来连接。任何其他可用于此目的的 API？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-20T00:39:00.793

如果您有特定的网站名称，则可以使用 WMI 停止和启动该网站。如果它是一个整体的 IIS，我确信 IIS WMI 提供程序中有一些东西可以做到这一点。这里我使用WebAdministration 来管理IIS 下的网站，但也有MicrosoftIISV2。Google for WmiExplorer，那里有一些不错的。

```
 var connOptions = new ConnectionOptions();
        connOptions.Authentication = AuthenticationLevel.PacketPrivacy;
        // if you want to connect as someone other than logged in user
        //connOptions.Username = username;
        //connOptions.Password = password;

        var scope = new ManagementScope("\\localhost\WebAdministration", connOptions);

        WqlObjectQuery query = new WqlObjectQuery(`enter code here`string.Format("SELECT * FROM Site WHERE Name = '{0}'", "Default Web Site"));

        using (ManagementObjectSearcher searcher = new ManagementObjectSearcher(scope, query))
        {
            foreach (ManagementObject site in searcher.Get())
            {
                ManagementBaseObject inParams = site.GetMethodParameters("Stop");
                site.InvokeMethod("Stop", inParams, null);

                ManagementBaseObject inParams2 = site.GetMethodParameters("Start");
                site.InvokeMethod("Start", inParams2, null);
            }
        } 
```

# java - 在单元测试期间重置类静态变量

> ID：11829817
> 
> 赞同：19
> 
> 时间：2012-08-06T14:00:29.223
> 
> 标签：java, unit-testing, legacy-code, static-variables

我正在尝试为*遗留代码*编写单元测试。我正在测试的类有几个静态变量。我的测试用例类有一些`@Test`方法。因此，它们都共享相同的状态。

有没有办法在测试之间重置所有静态变量？

我想出的一个解决方案是显式重置每个字段，例如：

```
field(MyUnit.class, "staticString").set(null, null);
((Map) field(MyUnit.class, "staticFinalHashMap").get(null)).clear(); 
```

如您所见，每个变量都需要自定义重新初始化。这种方法不容易扩展，遗留代码库中有很多这样的类。有什么方法可以一次重置所有内容吗？也许通过每次重新加载课程？

作为一个可能的好解决方案，我认为是使用类似 powermock 的东西并为每个测试创建一个单独的类加载器。但我没有看到简单的方法来做到这一点。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-08-06T15:12:36.023

好吧，我想我明白了。这很简单。

可以将`@PrepareForTest`powermock 的注释移动到方法级别。在这种情况下，powermock 会为每个方法创建类加载器。所以我需要它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T14:59:06.227

假设我正在测试一些涉及此类的代码：

```
import java.math.BigInteger;
import java.util.HashSet;

public class MyClass {
  static int someStaticField = 5;
  static BigInteger anotherStaticField = BigInteger.ONE;
  static HashSet<Integer> mutableStaticField = new HashSet<Integer>();
} 
```

您可以使用 Java 的反射功能以编程方式重置所有静态字段。您需要在开始测试之前存储所有初始值，然后您需要在运行每个测试之前重置这些值。JUnit 有`@BeforeClass`和`@Before`注释可以很好地解决这个问题。这是一个简单的例子：

```
import static org.junit.Assert.*;

import java.lang.reflect.Field;
import java.math.BigInteger;
import java.util.Map;
import java.util.HashMap;

import org.junit.AfterClass;
import org.junit.Before;
import org.junit.BeforeClass;
import org.junit.Test;

public class MyTest extends Object {

  static Class<?> staticClass = MyClass.class;
  static Map<Field,Object> defaultFieldVals = new HashMap<Field,Object>();

  static Object tryClone(Object v) throws Exception {
    if (v instanceof Cloneable) {
      return v.getClass().getMethod("clone").invoke(v);
    }
    return v;
  }

  @BeforeClass
  public static void setUpBeforeClass() throws Exception {
    Field[] allFields = staticClass.getDeclaredFields();
    try {
      for (Field field : allFields) {
          if (java.lang.reflect.Modifier.isStatic(field.getModifiers())) {
              Object value = tryClone(field.get(null));
              defaultFieldVals.put(field, value);
          }
      }
    }
    catch (IllegalAccessException e) {
      System.err.println(e);
      System.exit(1);
    }
  }

  @AfterClass
  public static void tearDownAfterClass() {
    defaultFieldVals = null;
  }

  @Before
  public void setUp() throws Exception {
    // Reset all static fields
    for (Map.Entry<Field, Object> entry : defaultFieldVals.entrySet()) {
      Field field = entry.getKey();
      Object value = entry.getValue();
      Class<?> type = field.getType();
      // Primitive types
      if (type == Integer.TYPE) {
        field.setInt(null, (Integer) value);
      }
      // ... all other primitive types need to be handled similarly
      // All object types
      else {
        field.set(null, tryClone(value));
      }
    }
  }

  private void testBody() {
    assertTrue(MyClass.someStaticField == 5);
    assertTrue(MyClass.anotherStaticField == BigInteger.ONE);
    assertTrue(MyClass.mutableStaticField.isEmpty());
    MyClass.someStaticField++;
    MyClass.anotherStaticField = BigInteger.TEN;
    MyClass.mutableStaticField.add(1);
    assertTrue(MyClass.someStaticField == 6);
    assertTrue(MyClass.anotherStaticField.equals(BigInteger.TEN));
    assertTrue(MyClass.mutableStaticField.contains(1));
  }

  @Test
  public void test1() {
    testBody();
  }

  @Test
  public void test2() {
    testBody();
  }

} 
```

正如我在 中的评论中所指出的`setUp()`，您需要使用类似的代码来处理其余的原始类型来处理`int`s。所有包装类都有一个`TYPE`字段（例如`Double.TYPE`和`Character.TYPE`），您可以像`Integer.TYPE`. 如果字段的类型不是原始类型之一（包括原始数组），那么它是一个`Object`并且可以作为泛型处理`Object`。

代码可能需要调整以处理`final`、`private`和`protected`字段，但您应该能够从[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/reflect/Field.html)中弄清楚如何做到这一点。

祝你的遗留代码好运！

***编辑：***

我忘了提一下，如果存储在其中一个静态字段中的初始值发生了变异，那么简单地缓存它并恢复它不会起到作用，因为它只会重新分配变异的对象。我还假设您将能够扩展此代码以使用静态类数组而不是单个类。

***编辑：***

我添加了一个`Cloneable`对象检查以处理`HashMap`您的示例中的情况。显然它并不完美，但希望这将涵盖您将遇到的大多数情况。希望有足够少的边缘情况，手动重置它们不会太痛苦（即将重置代码添加到`setUp()`方法中）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T16:50:01.497

这是我的两分钱

## 1.将静态引用提取到getter/setter中

当您能够创建它的子类时，这将起作用。

```
public class LegacyCode {
  private static Map<String, Object> something = new HashMap<String, Object>();

  public void doSomethingWithMap() {

    Object a = something.get("Object")
    ...
    // do something with a
    ...
    something.put("Object", a);
  }
} 
```

变成

```
public class LegacyCode {
  private static Map<String, Object> something = new HashMap<String, Object>();

  public void doSomethingWithMap() {

    Object a = getFromMap("Object");
    ...
    // do something with a
    ...
    setMap("Object", a);
  }

  protected Object getFromMap(String key) {
    return something.get(key);
  }

  protected void setMap(String key, Object value) {
    seomthing.put(key, value);
  }
} 
```

然后你可以通过子类化它来摆脱依赖。

```
public class TestableLegacyCode extends LegacyCode {
  private Map<String, Object> map = new HashMap<String, Object>();

  protected Object getFromMap(String key) {
    return map.get(key);
  }

  protected void setMap(String key, Object value) {
    map.put(key, value);
  }
} 
```

## 2.引入静态setter

这个应该很明显了。

```
public class LegacyCode {
  private static Map<String, Object> something = new HashMap<String, Object>();

  public static setSomethingForTesting(Map<String, Object> somethingForTest) {
    something = somethingForTest;
  }

  ....
} 
```

* * *

两种方式都不是很好，但是一旦我们进行了测试，我们总是可以稍后再回来。

# jsf-2 - p:commandButton 没有触发 actionlistener

> ID：11829819
> 
> 赞同：0
> 
> 时间：2012-08-06T14:00:33.480
> 
> 标签：jsf-2, primefaces

好的，我已阅读有关此问题的所有帖子，但找不到。我的情况非常简单——我所做的只是使用 Primefaces 3.3.1 和 JSF 2.1 来呈现登录页面。这是代码：

```
<?xml version="1.0" encoding="ISO-8859-1" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui"
    xmlns:pe="http://primefaces.org/ui/extensions"
    xmlns:ui="http://java.sun.com/jsf/facelets">
<h:head>
    <meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
    <title>ACME Systems - Home Page</title>
    <style>
    .noBorders tr, .noBorders td {
    background: none !important;
    border: none !important;
}

    </style>
</h:head>
<h:body>
    <p:panel id="mainPanel"
        style="height: 106px; height: auto !important; margin: 0 auto; min-height: 106px; position: relative; width: 960px; z-index: 100;">
        <h:form id="loginForm">
            <p:panel header="Secure Login"
                style="padding-bottom: 40px; width: 380px;">
                <p:panelGrid columns="2" styleClass="noBorders">
                    <h:outputText value="Username:" />
                    <p:inputText id="username" required="true"
                        requiredMessage="Username is required." title="Username"
                        value="#{LoginBean.username}" />

                    <h:outputText value="Password:" />
                    <p:password id="password" required="true"
                        requiredMessage="Password is required"
                        value="#{LoginBean.password}" />
                </p:panelGrid>
                <p:commandButton id="loginButton" value="Login"
                    actionListener="#{LoginBean.login}"
                    style="margin-top: 5px; float: right;" />
            </p:panel>
        </h:form>
    </p:panel>
</h:body>
</html> 
```

命令按钮上的动作侦听器未触发。如果我将其更改为 ah:commandbutton 一切都很好。我宁愿只使用 primefaces 标签，因为它使用主题。如果我使用 h: 那么我需要获取 css。有任何想法吗？另一件事，如果我将 ah:commandbutton 放在 primefaces 按钮之前，并使用它来执行初始触发，则 primefaces 按钮从那时起就可以工作：P 去图！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:18:52.550

既然我修好了，就要把它关掉。也许将来有人可以使用此信息。我会确保您阅读代码示例 Primefaces（或任何框架）并使用它们的确切代码，直到您觉得自己掌握了它。使用 JSF 6 年之后，我仍然没有像 BalusC 一样弄清楚一切：-)

# android - 带有 listFragment 的自定义 arrayAdapter

> ID：11829821
> 
> 赞同：-1
> 
> 时间：2012-08-06T14:00:40.140
> 
> 标签：android, listview, android-fragments, android-arrayadapter, android-listfragment

我正在尝试制作一个 ListFragment。我看了 Api Demo (FragmentLayout)。它适用于一个简单的示例，现在我想将它应用到我现有的项目中。

这是我的代码。我在 Api 演示中创建内部类（RecipeList 和 RecipeDetail）。

```
public class InfoActivity extends MenuActivity {
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.info_fragment_layout);

    // ...

}

    public static class RecipeList extends ListFragment {

    private int mCurrentSelectedItemIndex = -1;
    private boolean mIsTablet = false;

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);

        accountData = new ArrayList<Account>();

        new AccountSyncTask() {
            @Override
            public void onPostExecute(
                    final ArrayList<ArrayList<String>> result) {

                    // For each retrieved account   
                                            Bd.insert(retrievedAccount);
                    accountData.add(retrievedAccount);
                }

                accountListAdapter = new AccountListAdapter(
                        InfoActivity.this, R.layout.accountlist_detail,
                        accountData);

                accountListAdapter = new AccountListAdapter(
                        activityContext, R.layout.accountlist_detail,
                        accountData);
                setListAdapter(accountListAdapter);

            }
        }.execute(sessionName, null, "getAllObjectOnServer",
                String.valueOf(nbRow));

        if (savedInstanceState != null) {
            mCurrentSelectedItemIndex = savedInstanceState.getInt(
                    "currentListIndex", -1);
        }

        // This is a tablet if this view exists
        View recipeDetails = getActivity()
                .findViewById(R.id.recipe_details);
        mIsTablet = recipeDetails != null
                && recipeDetails.getVisibility() == View.VISIBLE;

        if (mIsTablet) {
            getListView().setChoiceMode(ListView.CHOICE_MODE_SINGLE);
        }

        if (mIsTablet && mCurrentSelectedItemIndex != -1) {
            showRecipeDetails();
        }
    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        mCurrentSelectedItemIndex = position;
        showRecipeDetails();
    }

    private void showRecipeDetails() {
        if (mIsTablet) {

            // Set the list item as checked
            getListView().setItemChecked(mCurrentSelectedItemIndex, true);

            // Get the fragment instance
            RecipeDetail details = (RecipeDetail) getFragmentManager()
                    .findFragmentById(R.id.recipe_details);
            // Is the current visible recipe the same as the clicked? If so,
            // there is no need to update
            if (details == null
                    || details.getRecipeIndex() != mCurrentSelectedItemIndex) {

                details = RecipeDetail
                        .newInstance(mCurrentSelectedItemIndex);

                FragmentTransaction ft = getFragmentManager()
                        .beginTransaction();
                ft.replace(R.id.recipe_details, details);

                ft.setTransition(FragmentTransaction.TRANSIT_FRAGMENT_FADE);
                ft.commit();
            }
        } else {

        }
    }

    @Override
    public void onSaveInstanceState(Bundle outState) {
        super.onSaveInstanceState(outState);
        outState.putInt("currentListIndex", mCurrentSelectedItemIndex);
    }

}

public static class RecipeDetail extends Fragment {

    private int mRecipeIndex;

    public static RecipeDetail newInstance(int recipeIndex) {
        // Create a new fragment instance
        RecipeDetail detail = new RecipeDetail();
        // Set the recipe index
        detail.setRecipeIndex(recipeIndex);
        return detail;
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        if (container == null) {
            return null;
        }

        View v = inflater
                .inflate(R.layout.recipe_details, container, false);
        //..

        return v;
    }

    public int getRecipeIndex() {
        return mRecipeIndex;
    }

    public void setRecipeIndex(int index) {
        mRecipeIndex = index;
    }

} 
```

我有一个自定义的 ArrayAdapter（我在 ListFragment 中的项目包含 4 个 textView 和一个可点击的 imageButton）。

帐户列表适配器：

```
public class AccountListAdapter extends ArrayAdapter<Account> {

private final Context context;
private final int layoutResourceId;
private final ArrayList<Account> data;

public AccountListAdapter(Context context, int layoutResourceId,
        ArrayList<Account> data) {
    super(context, layoutResourceId, data);
    this.layoutResourceId = layoutResourceId;
    this.context = context;
    this.data = data;

}

@Override
public View getView(final int position, View convertView, ViewGroup parent) {

    AccountHolder holder = null;

    if (convertView == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        convertView = inflater.inflate(layoutResourceId, parent, false);

        holder = new AccountHolder();

        convertView.setClickable(true);
        convertView.setFocusable(true);

        holder.txtName = (TextView) convertView.findViewById(R.id.nom);
        holder.txtId = (TextView) convertView.findViewById(R.id.id);

        convertView.setTag(holder);

    } else {
        holder = (AccountHolder) convertView.getTag();
    }

    convertView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Log.i("click", "index = " + position);

        }

    });

    holder.txtName.setText(data.get(position).getName());
    holder.txtId.setText(data.get(position).getId());

    convertView.setBackgroundResource(R.drawable.list_selector);

    ImageButton img = (ImageButton) convertView.findViewById(R.id.check);
    img.setTag(position);

    return convertView;
}

static class AccountHolder {
    TextView txtName;
    TextView txtId;
} 
```

}

问题：当我点击 listFragment 的一个项目时，

```
public void onListItemClick(ListView l, View v, int position, long id) {
        mCurrentSelectedItemIndex = position;
                    Log.i("click", "here";
        showRecipeDetails();
    } 
```

未调用，但 AccountListAdapter 中定义的项目上的侦听器有效

```
convertView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            Log.i("click", "index = " + position);

        }

    }); 
```

为什么从不调用 onListitemClick ？

另一个问题：在我的 ListFragment 的 onActivityCreated 函数中的另一个线程中使用 Web 服务是否是一种正确的方法（以填充列表）？

提前谢谢

**编辑**= 目前我将“showRecipeDetails”设为静态并在我的自定义 ArrayAdapter 的侦听器中调用它。

```
convertView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            RecipeList.showRecipeDetails(position);
}} 
```

我对我的解决方案不满意，我对任何其他解决方案都很感兴趣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:26:26.020

OnItemClickListeners 必须首先与您要为其记录点击的 ListView 相关联。在您的`onActivityCreated(..)`方法中，放置在`getListView().setOnItemClickListener(this)`某处并放在`implements OnItemClickListener`之后`public static class RecipeList extends ListFragment`。

# ruby - 更改 ruby 中的方法行为

> ID：11829823
> 
> 赞同：1
> 
> 时间：2012-08-06T14:00:40.827
> 
> 标签：ruby, mixins

这是 ruby​​ pickaxe book 中的代码示例：

```
Class VowelFinder
  include Enumerable

  def initialize(string)
    @string = string
  end

  def each
    @string.scan(/[aeiou]/] do |vowel|
      yield vowel
    end
  end
end

vf = VowelFinder.new("the quick brown fox jumped")    
vf.inject(:+)        # => 'euiooue' 
```

我很难理解的是修改后的“每个”方法在哪里发挥作用？我假设 inject 在某个时候调用它，但不明白它为什么这样做，以及我如何在我的代码中预测或模拟这种行为。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:09:30.293

该类`VowelFinder`实现了模块所必需的*协议*`Enumerable`，您可以包含该协议以获得大量 ruby*​​ 迭代器*方法：[http ://apidock.com/ruby/Enumerable](http://apidock.com/ruby/Enumerable)

> Enumerable mixin 为集合类提供了几种遍历和搜索方法，以及排序的能力。每个类必须提供一个方法，该方法产生集合的连续成员。如果使用 Enumerable#max、#min 或 #sort，则集合中的对象还必须实现有意义的 <=> 运算符，因为这些方法依赖于集合成员之间的排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:03:27.613

调用`inject`实际上会导致调用`each`。工作方式`inject`是遍历`Enumerable`using的所有元素`each`，将传递的运算符应用于`memo`下一个值并将结果存储回`memo`. 整个调用的结果是最后的值`memo`。[您可以在此处](http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-inject)查看文档。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:29:00.127

你是正确的，注入实际上调用了每个方法，发生这种情况的原因是因为注入实际上在内部使用了每个方法。事实上，很多如果 Enumerable 方法使用 .each 方法；比如#map、#select、#reject。

这样做的原因是 .each 是允许在 Enumerable Object 中循环的实际方法。其他方法只是为了让我们，开发人员的事情变得容易，我们不必在任何地方使用 .each 。想象一下，必须使用 .each 编写上述代码。这并不难，但 vf.inject(:+) 绝对更容易。collect 或 map 的情况也是如此。

实现这一点（如在 Ruby 中所做的那样）而不重复代码的最佳方法是让另一个方法调用 #each，因为没有代码重复，并且每个 #map 或 #collect 或 #inject 都不必遍历 Enumerable对象不同。

一般来说，我避免使用#each，还有很多其他方法可以让我们的工作更轻松。如果你想修改你的数组集合，建议不要给 #each 方法打补丁（当然，除非你希望所有其他方法也改变。）

# asp.net - ASP.net MVC 路由资源

> ID：11829827
> 
> 赞同：0
> 
> 时间：2012-08-06T14:00:50.160
> 
> 标签：asp.net, asp.net-mvc, routing

我只是无法让它工作......我有以下路线：

```
routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
routes.IgnoreRoute("*.html|js|css|gif|jpg|jpeg|png|swf");
routes.IgnoreRoute("{*favicon}", new { favicon = @"(.*/)?favicon.ico(/.*)?" });

routes.MapRoute(
    "Default", // Route name
    "{lama}/{controller}/{action}", // URL with parameters
    new { controller = "Home", action = "Index", lama = "en-gb" } // Parameter defaults
); 
```

一旦我加载页面.. 我有一个 img 元素试图检索以下网址：css/img/backgrounds/slide1_2048x1280.jpg

但是图像不会显示，如果我检查我的控制台，我会收到以下错误：GET {my localhost}/cn/Home/css/img/backgrounds/slide1_2048x1280.jpg 404 (Not Found)

我很难理解路线系统..有没有什么地方我可以阅读更多关于这个的内容？..有人可以帮我解决这个问题，那将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:42:30.797

我认为你的 html 中的相对网址已经犯规了。

因为你还没有说这是 Razor 还是 Aspx；我只是要和 Aspx 一起去。

当您编写`img`标签时，您似乎正在执行以下操作：

`<img src="[relative_path_to_file]" />`，使用img相对于页面的路径。

如果这不开始，`/`那么几乎可以肯定你最终会遇到问题，特别是因为 MVC URL 没有映射到实际页面的路径。

您要做的是使用`Url.Content("~/[full_path_to_file]")`which 将确保始终使用绝对路径。

另一方面，您确实**不需要**为磁盘上存在的文件编写所有这些忽略路由。默认情况下，路由引擎不会路由现有文件 - 您必须在全局方法中设置`routes.RouteExistingFiles = true`才能`RegisterRoutes`路由已存在的文件；所以我认为你应该摆脱它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:14:17.090

我通常会遇到 1）stackoverflow（显然！），以及 2）msdn 文档非常好：http: [//msdn.microsoft.com/en-us/library/dd410120.aspx](http://msdn.microsoft.com/en-us/library/dd410120.aspx)。但我通常最终会在谷歌上搜索我需要的东西=）

但是，看起来您正在尝试设置路由以忽略某些文件类型？我发现[这篇文章](http://haacked.com/archive/2008/07/14/make-routing-ignore-requests-for-a-file-extension.aspx)给出了一些关于如何处理这个问题的好主意。

我之前只屏蔽了一种或两种文件类型，并且我为每种文件类型制作了一行。不确定您是否可以像您正在做的那样制作一条由管道（|）分隔的扩展名（我可能错了！）

```
routes.IgnoreRoute("{*allaspx}", new {allaspx=@".*\.aspx(/.*)?"});
routes.IgnoreRoute("{*allswf}", new {allswf=@".*\.swf(/.*)?"}); 
```

# c++ - C++ 将数组指针作为函数参数传递

> ID：11829830
> 
> 赞同：42
> 
> 时间：2012-08-06T14:01:03.343
> 
> 标签：c++, arrays, function, pointers

我正在尝试使用数组的指针作为生成数组的函数的参数。

```
void generateArray(int *a[],  int *si){
  srand(time(0));
  for (int j=0;j<*si;j++)
       *a[j]=(0+rand()%9);
} //end generateArray;

int main() {
  const int size=5;
  int a[size];

  generateArray(&a, &size);

  return 0;
} //end main 
```

但是当我编译这个消息时出现：

```
cannot convert `int (*)[5]' to `int**' for argument `1' to `void generateArray(int**, int*)' 
```

* * *

## 回答 #1

> 赞同：91
> 
> 时间：2012-08-06T14:05:06.490

你把它复杂化了——它只需要：

```
void generateArray(int *a, int si)
{
    for (int j = 0; j < si; j++)
        a[j] = rand() % 9;
}

int main()
{
    const int size=5;
    int a[size];

    generateArray(a, size);

    return 0;
} 
```

当您将数组作为参数传递给函数时，它会衰减为指向数组第一个元素的指针。所以通常不需要将指针传递给数组。

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-08-06T14:12:59.540

`int *a[]`，当用作函数参数时（但不是在普通声明中），是指向指针的指针，而不是指向数组的指针（在普通声明中，它是指针数组）。指向数组的指针如下所示：

```
int (*aptr)[N] 
```

其中`N`是一个特定的正整数（不是变量）。

如果将函数设为模板，则可以这样做，甚至不需要传递数组的大小（因为它是自动推导出的）：

```
template<size_t SZ>
void generateArray(int (*aptr)[SZ])
{
    for (size_t i=0; i<SZ; ++i)
        (*aptr)[i] = rand() % 9;
}

int main()
{    
    int a[5];    
    generateArray(&a);
} 
```

你也可以参考：

```
template<size_t SZ>
void generateArray(int (&arr)[SZ])
{
    for (size_t i=0; i<SZ; ++i)
        arr[i] = rand() % 9;
}

int main()
{    
    int a[5];    
    generateArray(a);
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-08-06T14:03:59.877

您无需获取指向数组的指针即可将其传递给数组生成函数，因为当您将数组传递给函数时，数组已经*衰减为指针*。只需制作参数`int a[]`，并将其用作函数内部的常规数组，将对您传入的数组进行更改。

```
void generateArray(int a[],  int si) {
    srand(time(0));
    for (int j=0;j<*si;j++)
        a[j]=(0+rand()%9);
}

int main(){
    const int size=5;
    int a[size];
    generateArray(a, size);
    return 0;
} 
```

作为旁注，您不需要通过指针传递大小，因为您没有在函数内部更改它。此外，将指向常量的指针传递给期望指向非常量的指针的参数并不是一个好主意。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-02-21T22:49:59.220

我猜这会有所帮助。

当作为函数参数传递时，数组的作用与指针相同。所以你不需要引用它们。只需键入： `int x[]` 或 `int x[a]` 。两种方式都会奏效。我猜这和康拉德鲁道夫说的一样，想得也差不多。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2015-04-22T04:21:37.633

```
This is another method . Passing array as a pointer to the function
void generateArray(int *array,  int size) {
    srand(time(0));
    for (int j=0;j<size;j++)
        array[j]=(0+rand()%9);
}

int main(){
    const int size=5;
    int a[size];
    generateArray(a, size);
    return 0;
} 
```

# cordova - Android选项卡上的蓝牙数据传输问题

> ID：11829840
> 
> 赞同：0
> 
> 时间：2012-08-06T14:01:43.763
> 
> 标签：cordova

我不太了解 android 或 phonegap，但我们的应用程序在 sencha touch 2 中，这里我们正在尝试使用手机间隙将蓝牙数据从一台设备传输到另一台设备。以下代码示例正在使用 phonegap 1.5，

```
 IntentFilter filter = new IntentFilter(BluetoothDevice.ACTION_FOUND);
                   this.ctx.registerReceiver(mReceiver, filter); 
```

但是当我将 phonegap 升级到 2.0 时，ctx.registerReceiver 不存在，并给出错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-09T10:33:51.917

"ctx" 在最新的 phonegap 中已弃用，我们需要将其替换为 "cordova.getActivity().getApplicationContext()"。

# windows - Perl+Excel：“使用 Win32::OLE::Const”没有效果

> ID：11829842
> 
> 赞同：2
> 
> 时间：2012-08-06T14:01:54.793
> 
> 标签：windows, perl, ole, win32ole, strawberry-perl

我一直在使用 StrawberryPerl v 5.014 和 Win32::OLE 在 Windows 7 系统上开发一个项目。

我正在尝试使用第二台运行 Windows XP SP3 的 PC 来并行开发相同的项目。在新系统上，我已经安装了 Strawberry Perl v 5.016，并使用 cpanp 安装了 Win32::OLE 和 Win32::OLE::Const。

我在新系统中使用相同的脚本源。

事实证明，在新系统中，不知何故

```
use Win32::OLE::Const 'Microsoft Excel'; 
```

没有效果。我收到错误消息：

```
Bareword "xlExcel8" not allowed while "strict subs" in use in StatementExcel.pm line 159. 
```

这个错误没有出现在我提到的第一个原始系统中。

该怎么办？

TIA，海伦

以下是该计划的一些摘录：

```
package  StatementExcel;
require  Exporter;
@ISA   = qw(Exporter);
@EXPORT  = qw(LoadExcel ProcessPreparedSheet);
use strict;
use warnings;
use Encode;
use 5.016;
use utf8;
use Win32::Console;
use autodie; 
use warnings    qw< FATAL  utf8     >;
use StateConversion;
use Carp;
use Win32::OLE  qw(CP_UTF8);
use Win32::OLE::Const 'Microsoft Excel';
use Cwd;
use Text::CSV::Unicode;
use File::BOM qw( :all );
use List::MoreUtils 'first_index';
...
$xlBook -> SaveAs( $xlFile, xlExcel8);

$i = Win32::OLE->LastError();
if ($i) {
   PrintT $parms{LogStructRef}{HANDLE}, "Error trying to save Excel file:\n", $i;
}   # end if ($i)
PrintT $parms{LogStructRef}{HANDLE}, 'Press <return> to continue...';   # Wait for user input...
$j = <STDIN>;
# Clean up
$xlBook->{Saved} = 1;
$xlApp->Quit;
$xlBook = 0;
$xlApp = 0;
... 
```

注意：在 PerlMonks 上交叉发布：[http ://www.perlmonks.org/?node_id=985596](http://www.perlmonks.org/?node_id=985596)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T08:44:26.763

原来是因为Excel 2010和Excel 2003的OLE对象库不同导致问题出现。在Win XP系统上，安装的是Excel 2003。在 Windows 7 系统上，安装了 Excel 2010。保存 Excel 文件时，我指示它使用“xlExcel8”OLE 常量将其保存为 Excel 2003“xls”格式（而不是 Excel 2010 的“xlsx”格式）。

事实证明，该常量在 OLE 2003 对象库中不存在。

解决方案很简单：保存文件而不指定格式 - 它使用默认值。

另见：[http ://www.perlmonks.org/?node_id=985780](http://www.perlmonks.org/?node_id=985780)

# ruby-on-rails - 通过rails中的多个条件查找

> ID：11829850
> 
> 赞同：10
> 
> 时间：2012-08-06T14:02:32.417
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord

我想在 Rails 中搜索具有多个条件的表。我正在使用 Active Record 和 Rails 版本 3.1.0。

我有 Movies 对象，并希望在 rails 中实现以下等效项：

```
Select * from Movies where rating = 'R' OR rating = 'PG' 
```

我尝试了以下但它不起作用

```
@filtered = Movies.find(:all, :conditions => { :rating => 'R', :rating => 'PG' }) 
```

您能否提供帮助以编写与上面提到的 SQL 查询等效的内容。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-08-06T14:07:05.613

一种方法是建立一个“IN”条件：

```
 @filtered = Movie.where(:rating => ['R', 'PG']).all 
```

编辑：我将您的课程从“电影”更改为“电影”。我想这就是你想要的。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2016-01-31T07:27:24.583

在 Rail 4 中，使用多个条件进行查找，例如考虑`Profile`使用`first_name`和查找`last_name`

```
Profile.find_by first_name: 'stack', last_name: 'flow' 
```

查找与指定条件匹配的第一条记录。没有隐含的顺序，所以如果顺序很重要，您应该自己指定。如果没有找到记录，则返回 nil

```
Profile.find_by! first_name: 'stack', last_name: 'flow' 
```

与 find_by 类似，除了如果没有找到记录，则会引发 ActiveRecord::RecordNotFound 错误。

有关更多信息，请阅读 [Rails Finder 方法](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_by)

[1](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_by)：[http](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_byIn) ://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_byIn Rail 4，查找多个条件，例如考虑查找`Profile`和`first_name``last_name`

```
Profile.find_by first_name: 'stack', last_name: 'flow' 
```

查找与指定条件匹配的第一条记录。没有隐含的顺序，所以如果顺序很重要，您应该自己指定。如果没有找到记录，则返回 nil

```
Profile.find_by! first_name: 'stack', last_name: 'flow' 
```

与 find_by 类似，除了如果没有找到记录，则会引发 ActiveRecord::RecordNotFound 错误。

有关更多信息，请阅读 [Rails Finder 方法](http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_by)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-08-06T14:06:27.237

我想那会是

```
Movie.where("rating = ? OR rating = ?", 'R', 'PG') 
```

查看指南以获取更多信息： http: [//guides.rubyonrails.org/active_record_querying.html#conditions](http://guides.rubyonrails.org/active_record_querying.html#conditions)

我建议改用`IN`语句。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-08-06T14:07:51.917

您可以使用：

```
Movie.where(:rating => ['R','PG']) 
```

# android - 添加 AlertDialog - 未定义的构造函数

> ID：11829857
> 
> 赞同：0
> 
> 时间：2012-08-06T14:02:56.083
> 
> 标签：android, android-alertdialog

10 个小时以来，我一直在尝试向我的应用程序添加一个 alertdialog，但没有成功，我认为这将是一个愚蠢的问题，但我对此很陌生，试图研究许多链接，如[AlertDialog - Not Working](https://stackoverflow.com/questions/11029156/alertdialog-not-working)；[SDK Android AlertDialog.Builder](http://developer.android.com/reference/android/app/AlertDialog.Builder.html)，但即便如此我仍然有问题。

实际上，我每次都遇到基本相同的问题：

这是我从链接中复制的代码来帮助我：

```
public void dbFail(){
        AlertDialog alertDialog = new AlertDialog.Builder(this).create();
        alertDialog.setTitle("Reset...");
        alertDialog.setMessage("Are you sure?");
        alertDialog.setButton("OK", new DialogInterface.OnClickListener() {
           public void onClick(DialogInterface dialog, int which) {
              // here you can add functions
           }
        });
        alertDialog.show(); 
    } 
```

和这里的问题：

构造函数 AlertDialog.Builder(ConnectDB¹) 未定义。

¹- 这是我的上下文的名称

那么，我真正需要做什么？我没有看到有人在谈论实现这个构造函数......我是否需要在 AlertDialog.Builder 调用中实现一个方法，描述他应该做什么？

* * *

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:05:37.393

尝试改变：

```
new AlertDialog.Builder(this).create(); 
```

对此：

```
new AlertDialog.Builder(YourActivityClassName.this).create(); 
```

确保您在此处提供**Activity 的上下文**（不是应用程序上下文，即`getApplicationContext()`）。不要与*应用程序上下文*和*活动上下文*混淆，因为它们在初始化对象时都很重要。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:06:49.140

上下文需要是一个活动。

根据您的错误判断`The constructor AlertDialog.Builder(ConnectDB) is undefined.`，我猜您正试图在某种与数据库相关的类中显示此 AlertDialog 。

您需要在 Activity 中创建 AlertDialog，或者需要将 Activity 传递给 ConnectDB 类，以便 ConnectDB 可以使用它来生成对话框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:59:24.767

如果您尝试从另一个类显示警报对话框，则必须将活动的实例传递给另一个类并调用`runOnUiThread`它的方法。

这是我的做法（游戏是活动）：

```
game.runOnUiThread(new Runnable() {
            public void run() {

            builder = new AlertDialog.Builder(game);
            builder.setTitle("Network Error");
            builder.setMessage("Please connect to the internet");
            builder.setCancelable(false);
            builder.setPositiveButton("OK", new DialogInterface.OnClickListener() { 
                @Override
                public void onClick(DialogInterface dialog, int which) {
                    dialog.cancel();
                    game.finishGame();

                }
            });

            initialized = true;

            }

        }); 
```

# xpages - viewPanel：如何为响应类型视图条目设置 colspan 值

> ID：11829859
> 
> 赞同：0
> 
> 时间：2012-08-06T14:03:06.850
> 
> 标签：xpages

使用**viewPanel**，我们如何以在 Notes 客户端中显示的方式显示响应条目？或者换句话说：有没有办法根据当前条目的文档类型为特定列构建某种 colspan？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T12:41:22.647

我不久前编写了一些代码，使分类视图的行为更像 Notes：

[http://dontpanic82.blogspot.no/2010/10/xpages-make-categorized-views-behave.html](http://dontpanic82.blogspot.no/2010/10/xpages-make-categorized-views-behave.html)

这是 Stephan Wissel 的另一个解决方案：

[http://www.wissel.net/blog/d6plinks/SHWL-86V67E](http://www.wissel.net/blog/d6plinks/SHWL-86V67E)

# iphone - iPhone 上网站的 Retina Graphics 很浪费

> ID：11829860
> 
> 赞同：1
> 
> 时间：2012-08-06T14:03:09.327
> 
> 标签：iphone, css, image, retina-display

对背景图像使用 CSS 媒体查询非常棒，但是常规的嵌入图像呢？

[www.retinajs.com](http://www.retinajs.com)和[www.retina-images.complexcompulsions.com](http://retina-images.complexcompulsions.com)很棒，但我对它们都有一个问题。它们为所有视网膜设备提供视网膜图形，无论大小。例如，iPhone 不需要为其提供视网膜图形，因为它无论如何都会缩小图像。在具有（可能）和慢速连接的 iPhone 上提供双分辨率图像是一种浪费。

有人对此有解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:11:09.323

Matt Wilcox 构建了[http://adaptive-images.com/](http://adaptive-images.com/)来解决这个问题。不过，它需要一些服务器端代码。

此外，W3C 正在研究`<img srcset="big.png 1100w, medium.png 500w, small.png 200w">`，但我不确定它是否已被纳入标准（存在很多分歧），或者 webkit 是否曾开始实施它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-28T01:21:46.330

正如@OllyHodgson 所建议的那样，*自适应图像是一个非常好的解决方案，* [johannheyne](https://github.com/johannheyne/Adaptive-Images)提供的扩展脚本更能涵盖您的确切问题，控制应该作为视网膜图像的内容和方式。希望这可以帮助！

# html - 确保 Div 为 100%

> ID：11829874
> 
> 赞同：0
> 
> 时间：2012-08-06T14:03:53.293
> 
> 标签：html, css

出于某种原因，我无法让图像在浏览器中跨越 100% 的宽度。

你可以在这里找到我的网站[。](http://cargocollective.com/btatest/)

我的 div 内容如下：

```
 <div class="home" style="background-image: url(http://payload51.cargocollective.com/1/7/237315/3336908/HomeImage_o.jpg); 
background-attachment: fixed; height: 560px; width: 100%; opacity: 1; background-position-y: 0px; background-position-x: center; background-repeat: no-repeat no-repeat; "> 
    </div> 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:06:00.267

在您的网站中，您将 div 拉伸到整个页面宽度。但是除非您这样做，否则背景图像不会拉伸：

```
background-size: 100%; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:08:26.767

使用这个 CSS 属性

```
background-size:100% 560px; 
```

这表明您的背景图像的宽度应扩展为 100%，但高度应为 560 像素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:06:40.133

背景图像的大小不会随着包含它们的元素的大小而调整。为什么不使用

```
<img class="home" src="http://payload51.cargocollective.com/1/7/237315/3336908/HomeImage_o.jpg" 
  style="background-attachment: fixed; width: 100%; opacity: 1; background-position-y: 0px; background-position-x: center; background-repeat: no-repeat no-repeat; "> 
</div> 
```

并删除该属性

```
height: 560px; 
```

?

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T14:07:37.703

添加`background-size: 100% auto;`

```
<div class="home" style="background-image: url(http://payload51.cargocollective.com/1/7/237315/3336908/HomeImage_o.jpg); 
background-attachment: fixed; height: 560px; width: 100%; opacity: 1; background-position-y: 0px; background-position-x: center; background-repeat: no-repeat no-repeat; background-size: 100% auto;"> 
    </div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-08-06T14:25:03.157

我不喜欢拉伸图像以适应浏览器窗口的想法。因为这取决于客户端的机器上站点的显示方式。

所以，我*不建议寻找*这样的解决方案。相当：

*   使用重复图像作为背景
*   修复图像容器的尺寸。您尝试创建的效果看起来仍然很酷
*   检测屏幕尺寸并根据分辨率更改背景。

# php - 两种形式 - 两个提交按钮。控制器如何识别单击了哪个按钮？

> ID：11829875
> 
> 赞同：4
> 
> 时间：2012-08-06T14:03:54.277
> 
> 标签：php, symfony, doctrine

我有两个表单，一个页面上有两个提交按钮，一个视图和一个控制器应该管理它们。如果单击第一个动作，我希望它执行一个动作，如果单击第二个动作，我希望它执行另一个动作。我试过这个，其中编辑是表单的名称，但它不起作用：

```
if($this->getRequest()->get('edit')) 
```

我也尝试为提交按钮设置值，但我也无法成功。请帮助我找到一种方法来识别按下了哪个按钮。:)

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-13T07:49:43.953

Symfony 2.3 附带了解决方案。它支持表单中的按钮，并且您有 isClicked() 方法来检查是否单击了按钮。

[http://symfony.com/blog/new-in-symfony-2-3-buttons-support-in-forms](http://symfony.com/blog/new-in-symfony-2-3-buttons-support-in-forms)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-08-06T14:05:54.303

给按钮不同的“名称”（不是“id”）属性

```
<form ...>
...
<input type="submit" name="btnA" value="ActionA">
<input type="submit" name="btnB" value="ActionB">
</form> 
```

然后控制器应该分析 POST 数据中的变量，该变量的名称将是单击按钮的名称：

```
if (isset($_POST['btnA'])) { 
    /* do A */ 
} else if (isset($_POST['btnB'])) { 
   /* do B */ 
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-08-06T14:05:47.317

您可以使用隐藏字段并检查它们的值:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-03-08T10:26:58.550

在您的控制器内部创建两个表单，处理它们的输入，然后检查它们是否已提交且有效。

```
$formOne = $this->formFactory->create();
$formTwo = $this->formFactory->create();

$formOne->handleRequest($request);
$formTwo->handleRequest($request);

if($formOne->isSubmitted() && $formOne->isValid()) {
    die('form one submitted');
}
if($formTwo->isSubmitted() && $formTwo->isValid()) {
    die('form two submitted');
}

return new Response($this->templating->render([template-name]), [
    'formOne' => $formOne->createView(),
    'formTwo' => $formTwo->createView(),
])); 
```

然后在您的模板中创建两个带有单独按钮的表单：

```
form_start(formOne)
form_rest(formOne)
    <button type="submit">one</button>
form_end(formOne)

form_start(formOne)
form_rest(formOne)
    <button type="submit">one</button>
form_end(formOne) 
```

# android - 有没有 OSMDROID 的替代品？

> ID：11829879
> 
> 赞同：5
> 
> 时间：2012-08-06T14:04:19.437
> 
> 标签：android, osmdroid

使用多点触控进行缩放时，osmdroid 的行为不正确。我还在 jar 文件中发现了一些使用不同许可证的源代码，因此我不确定我是否可以使用它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-21T19:58:12.857

有 Mapsforge。我相信最新版本放弃了在线支持，但您可能仍然可以使用它。不过，我不确定您的许可情况。

[http://code.google.com/p/mapsforge/](http://code.google.com/p/mapsforge/)

这 2 个是 OpenStreetMaps AFAIK 的唯一免费库。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T17:33:52.803

还有地图任务。Google API 的所有替代品的最大问题是所有地图在 HDPI+ 屏幕上都小得难以阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-08-06T14:12:22.053

你已经找到了 osmdroid。

谷歌的 api 不在某些设备上（角落，火）： [https ://developers.google.com/maps/documentation/android/](https://developers.google.com/maps/documentation/android/)

有适用于 android 的 bing：http: [//bingmapsandroidsdk.codeplex.com/](http://bingmapsandroidsdk.codeplex.com/)

还有mapforge（基于openstreetmaps） [http://code.google.com/p/mapsforge/](http://code.google.com/p/mapsforge/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-11T14:16:32.877

纽泰克：[https ://github.com/nutiteq/hellomap3d](https://github.com/nutiteq/hellomap3d)

您可以添加自己的地图。不同的瓷砖来源。

# objective-c - UITextView、全屏模式和使用 UIButton 退出

> ID：11829881
> 
> 赞同：0
> 
> 时间：2012-08-06T14:04:34.057
> 
> 标签：objective-c, xcode, uitextview

我正在尝试`UITextView`在我的演示应用程序中制作一个全尺寸的按钮。并在我再次重新触摸按钮后将其调整为原始大小（也就是退出全屏模式）。

我从未尝试在 1 个 UIButton 上添加多个操作。

```
-(IBAction)clickButtonFullSize:(id)sender
{
        CGRect r = [[UIScreen mainScreen] bounds];
        [myText setFrame:r];
}

-(IBAction)clickButtonReSize:(id)sender
{
    [myText setFrame:CGRectMake(0,0,200,200)];
} 
```

第一种方法在触摸时工作正常`UIButton`。但是如何将第二种方法与同一个按钮链接以调整它的大小（退出全屏）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:09:21.573

`tag`您可以通过管理您的按钮简单地做到这一点。不需要两个`IBActions`。

```
-(IBAction)clickButtonFullSize:(id)sender
{
    UIButton *btn = (UIButton*) sender;

    if (btn.tag == 0) 
    {
        btn.tag = 1;

        CGRect r = [[UIScreen mainScreen] bounds];
        [myText setFrame:r];

    }
    else 
    {
        btn.tag = 0;

        [myText setFrame:CGRectMake(0,0,200,200)];

    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:10:12.603

将两个动作链接到同一个 UIButton 并在第一个方法中创建一个布尔值。在第一个函数退出时更改布尔值并在第二个方法中抛出一个 if。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:09:05.177

对两种调整大小使用相同的方法，但改为检查，如果按钮是全尺寸，则将其变小，反之亦然。

要么创建一个布尔值，要么创建一个布尔值，它包含按钮全尺寸以及何时调用它的方法会检查它的事实。

您可以在同一个按钮上指向两种不同的方法。

# google-app-engine - 谷歌应用引擎数据存储 3 上的嵌套事务

> ID：11829892
> 
> 赞同：0
> 
> 时间：2012-08-06T14:05:20.730
> 
> 标签：google-app-engine, transactions, google-cloud-datastore

问题是： ds.put(employee) 是否发生在事务中？或者外部事务是否被 saveRecord(..) 中的事务擦除/覆盖？

1.  一旦在 for 循环中的某个点（假设 i==5）在 datastore.put(..) 行引发错误，之前源自同一行的 put 会回滚吗？
2.  saveRecord(..) 中发生的 put 怎么样？我想那些不会被回滚。

```
    DatastoreService 数据存储 = DatastoreServiceFactory.getDatastoreService()
    交易 txn = datastore.beginTransaction();
    尝试 {
        for (int i=0; 1<10; i++) {
            Key employeeKey = KeyFactory.createKey("Employee", "Joe");
            实体员工 = datastore.get(employeeKey);
            employee.setProperty("假期", 10);

            datastore.put（员工）；

            实体employeeRecord = createRecord("record",employeeKey);
            保存记录（雇员记录）；
        }
    txn.commit();
    } 最后 {
        如果 (txn.isActive()) {
            txn.rollback();
        }
    }

    公共无效保存记录（实体实体）{
       datastore.beginTransaction();
       尝试 {
          // 在这里做一些逻辑，删除活动并提交 txn
          datastore.put（实体）；
       } 最后 {
        if (datastore.getCurrentTransaction().isActive()) {
          datastore.getCurrentTransaction().rollback();
        }
       }
    }

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T20:32:20.847

好的，我假设您使用的是低级 Datastore API。注意`getTransaction()`不存在。我假设你的意思是`datastoreService.getCurrentTransaction()`.

[`DatastoreService.beginTransaction()`](https://developers.google.com/appengine/docs/java/javadoc/com/google/appengine/api/datastore/DatastoreService#beginTransaction%28%29)`beginTransaction()`将返回一个事务，在您再次调用之前，该事务被视为同一线程上的当前事务。由于您`beginTransaction()`在“外部”事务中调用循环，它会破坏您的“外部”代码：循环完成后`ds.getCurrentTransaction()`不会返回相同的事务。此外，`put()`隐式使用当前事务。

因此，首先您必须修复外部代码以保存事务，[如示例所示](https://developers.google.com/appengine/docs/java/datastore/transactions#Using_Transactions)：

```
public void put(EventPlan eventPlan) {
  Transaction txn = ds.beginTransaction();
  try {
    for (final Activity activity : eventPlan.getActivities()) {
      save(activity, getPlanKey(eventPlan)); // PUT

      // IMPORTANT - also pass transaction and use it
      // (I assume this is some internal helper method)
      ds.put(txn, activity, getSubPlanKey(eventPlan)); //subplan's parent is eventPlan
    }
    txn.commit();
  } finally {
    if (txn.isActive()) 
      txn.rollback();
  }
} 
```

现在开始提问：

1.  是的，因为所有 put 现在都是同一事务的一部分（在您修复代码之后），并且您`txn.rollback()`在出现错误时调用它。

2.  不，当然不是。它们是不同交易的一部分。

# sublimetext2 - 如何让 Zencoding 在 Sublime Text 2 中为 div 添加结束注释？

> ID：11829901
> 
> 赞同：1
> 
> 时间：2012-08-06T14:06:07.067
> 
> 标签：sublimetext2, emmet

我之前曾设法让 ST2 中的 Zencoding 自动注释结束标签，例如：

我会键入 div.my_div 并点击选项卡，并且在创建 div 的同时，它还会添加一个结束注释，以便我可以轻松地在我的文档中导航结束 div 标记。

```
<div class="my_div">
    *
</div> <!-- .my_div --> 
```

你们中有人知道如何复制吗？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T21:32:25.583

您应该使用“评论”过滤器：[http ://code.google.com/p/zen-coding/wiki/Filters](http://code.google.com/p/zen-coding/wiki/Filters)

```
.my_tag|c 
```

您还可以让 ZC 自动将“评论”过滤器应用于 HTML。这有点 hacky，但您需要打开**zen_settings.py**文件并在[https://github.com/sublimator/ZenCoding/blob/master/zencoding/zen_settings.py#L511](https://github.com/sublimator/ZenCoding/blob/master/zencoding/zen_settings.py#L511)`c`添加过滤器

它应该如下所示：

```
"filters": "html,c" 
```

# java - 每秒更新 MySQL 数据库

> ID：11829905
> 
> 赞同：2
> 
> 时间：2012-08-06T14:06:28.407
> 
> 标签：java, php, mysql, database, sql-update

我正在做一个网络游戏。我现在正在用 300 名玩家测试游戏，但我遇到了问题。我必须每秒更新大约 300 行数据库，但更新时间太长。大约需要 11143 毫秒（11 秒），这对于必须在 1 秒内完成的任务来说已经差不多了。我正在从 JAVA 对数据库进行这些更新。我已经尝试过使用 PHP，但它是一样的。更新 SQL 查询非常简单...

```
 String query5 = "UPDATE naselje SET zelezo = " + zelezo + ", zlato = " + zlato + ", les = " + les + ", hrana = " + hrana + " WHERE ID =" + ID; 
```

因此，任何人都知道如何以更快的性能每秒更新数据库，或者任何其他解决方案如何更新游戏资源（黄金、木材、食物……）？

我的配置：

英特尔酷睿 i5 M520 2.40GHz

6 GB 内存

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T14:09:48.323

您可能正在单独更新每一行，您需要使用[批量更新](http://docs.oracle.com/javase/1.3/docs/guide/jdbc/spec2/jdbc2.1.frame6.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T14:12:36.520

如果您还没有使用 PDO，请切换到它，然后使用`transactions`. 此外，重组您的表以使用 InnoDB 与 MyISAM。

InnoDB 更适用于经常读/写的大型表。

这是它旨在处理的事情之一。`SELECT/UPDATE/INSERT`风格非常相似的多个陈述。

在处理上述类型的多个连续调用时，使用事务也是一种很好的编码习惯。

使用此[Google 搜索](https://www.google.com/search?q=php%20mysql%20pdo%20transaction&ie=utf-8&oe=utf-8&aq=t&rls=org.mozilla%3aen-US%3aofficial&client=firefox-a)了解更多关于 PHP PDO 和 MySQL 事务的信息。

例子：

*有交易*

```
$pdo = new PDO(...);
$pdo->beginTransaction();

for ( $i = 0; $i < 1001; $i++) {
    $pdo->query("UPDATE table SET column='$var' WHERE ID = $i");
}

$pdo->commit(); 
```

# html - HTML 表格 colgroup 边框半径

> ID：11829907
> 
> 赞同：1
> 
> 时间：2012-08-06T14:06:32.877
> 
> 标签：html, css

我正在使用 colgroup 标记为我的 html 表中的列设置样式。但是，使用边框半径、-webkit-border-radius 和 -moz-border-radius 不起作用... colgroup 是否支持边框半径或者我是否需要将类应用于单个单元格？

HTML：

```
<table>
    <colgroup align="right"></colgroup>
    <colgroup class="priceCol" align="right"></colgroup>
    <tr><td>1 Session:</td><td>R20</td></tr>
    <tr><td>5 Sessions:</td><td>R100</td></tr>
    <tr><td>10 Sessions:</td><td>R180</td></tr>
    <tr><td>15 Sessions:</td><td>R250</td></tr>
</table> 
```

CSS；

```
.priceCol{
    background: #ff0000;
    border: 1px solid #333;
    padding-left: 5px;
    -webkit-border-radius: 8px;
    -moz-border-radius: 8px;
    border-radius: 8px;
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:09:36.990

具有边框的是单个表格单元格（或整个表格本身），因此将边框半径应用于列不会有任何效果（就像在容器上指定边框半径`<div>`一样包含的有边界的）。

您需要将类应用到各个单元格以达到您想要的效果。

# css - Facebook 菜单按钮 css

> ID：11829909
> 
> 赞同：-3
> 
> 时间：2012-08-06T14:06:39.887
> 
> 标签：css

![在此处输入图像描述](../Images/7843e0461e4bfd95ad29414612f95b4c.png)

我已经为菜单按钮尝试了这个 css 代码，但它看起来不像我想要的，任何人都可以帮助我解决这个问题。

```
button.menu
{
  background: #e3e3e3;
  border: 1px solid #bbb;
  -webkit-border-radius: 2px;
  -moz-border-radius: 2px;
  border-radius: 2px;
  -webkit-box-shadow: inset 0 0 1px 1px #f6f6f6;
  -moz-box-shadow: inset 0 0 1px 1px #f6f6f6;
  box-shadow: inset 0 0 1px 1px #f6f6f6;
  color: #333;
  padding: 5px 0px 8px;
  text-align: center;
  text-shadow: 0 1px 0 #fff;
  width: 45px;
  float:left;
  margin-left:15px;
  font-family:Segoe UI Semibold, Calibri;
  margin-top:-1.5px; 
```

}

```
 button.menu:active
 {
   background: #d0d0d0;
   -webkit-box-shadow: inset 0 0 1px 1px #e3e3e3;
   -moz-box-shadow: inset 0 0 1px 1px #e3e3e3;
   box-shadow: inset 0 0 1px 1px #e3e3e3;
   color: black;
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:15:54.400

你可以用 ccs 给你的按钮一个内部阴影，如下所示：

```
.shadow {-moz-box-shadow:    inset 0 0 10px #000000; -webkit-box-shadow: inset 0 0 10px #000000; box-shadow:         inset 0 0 10px #000000;} 
```

文本可能有 IE 不支持的文本阴影

```
.text-shadow {text-shadow: #c0c0c0 3px 3px 5px;} 
```

要获得圆润的边缘，您必须使用

```
#example1 {-moz-border-radius: 15px;border-radius: 15px;} 
```

希望它可以帮助您建立您的菜单！

# select - 仅选择具有特定响应的文档（Lotus Notes）

> ID：11829910
> 
> 赞同：1
> 
> 时间：2012-08-06T14:06:40.763
> 
> 标签：select, lotus-notes, lotus, lotus-formula

在 lotus notes 中，我的文档可以有多种类型（表单）的响应文档。

我想选择带有特定响应文档的文档。

例如：

```
Doc1
--Response1 (Red)
--Response2 (Blue)
Doc2
--Response1(Red)
Doc3
--Response1(Blue)
--Response2(Green) 
```

如果我想要'所有具有表单类型'蓝色'响应的文档'（例如Doc1和Doc 3），我该怎么做？似乎我只能基于主文档的标准。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T15:40:56.103

这取决于您要如何选择它们。请注意，响应文档都在 $REF 字段中包含对其父文档的引用。

**在视图中：**如果您希望它们仅在它们具有某种类型的响应文档时出现在视图中，则它们需要具有表明它们具有该类型响应的字段值。因此，当有人保存响应文档时，让它也更改父文档上的一个字段以指示它具有这种响应。

**在代理**中：不要查看父文档，而是循环浏览所需类型的响应文档并返回有关或来自父文档的信息。

# git - 无需拉动即可推送更改

> ID：11829911
> 
> 赞同：21
> 
> 时间：2012-08-06T14:06:46.433
> 
> 标签：git

我正在尝试撤消已经推送到远程存储库的一些更改，并且我已经在本地完成了

```
git reset --hard COMMIT-HASH 
```

但是现在它不会让我不先拉就推，这当然违背了目的。我试过了：

```
git push -f 
```

哪些错误：

```
Total 0 (delta 0), reused 0 (delta 0)
remote: error: denying non-fast-forward refs/heads/master (you should pull first)
To git@xxx.beanstalkapp.com:/yyy.git
 ! [remote rejected] master -> master (non-fast-forward)
error: failed to push some refs to 'git@xxx.beanstalkapp.com:/yyy.git' 
```

那么如何将我新的、正确版本的分支转移到远程呢？

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-08-06T14:20:57.640

从`git config`手册页：

> `receive.denyNonFastForwards`
> 
> 如果设置为 true，git-receive-pack 将拒绝不是快进的 ref 更新。使用它来防止通过推送进行此类更新，即使该推送是强制的。此配置变量在初始化共享存储库时设置。

您尝试推送到的服务器已启用此设置。因此，简短的回答是，在这种情况下，您将无法`git push --force`.

* * *

要将正确版本的分支发送到远程，您必须对分支的尖端进行新的提交，使其进入正确的状态。如果您当前处于正确状态的提交状态，则可以运行以下命令：

```
$ git reset --soft <remote>/<branch>    # point the ref back to the remote, but
                                        #   keep the index and working tree

$ git commit                            # make the 'correction' commit
$ git push 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T14:17:14.143

您的服务器是否不允许非快进推送？

git 配置文件

```
[receive]
denyNonFastforwards = true 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-09T10:59:35.327

在 git 中撤消更改的最佳方法是使用`git revert`命令。

要撤消上一次提交： `git revert HEAD^`

它将撤消上次提交中所做的更改，然后在其之上创建一个新提交。

希望它可以帮助某人..

# security - 在 Web 应用程序中实现密码加盐和散列的基本过程

> ID：11829913
> 
> 赞同：0
> 
> 时间：2012-08-06T14:06:54.523
> 
> 标签：security, hash

我一直在寻找一个关于如何在典型的网站环境中实现密码登录系统的很好的解释。我已经阅读了一些很棒的维基百科文章和 SO Q&A 和博客等，但他们似乎总是专注于纯粹生成哈希，而不是创建哈希发送它的哪些部分、存储它的哪些部分、服务器端代码做什么的整个过程与它等等。如果已经有一个很好的答案，我很抱歉重新发布，请链接。

我目前的理解是：

1) 新用户在您的网站上创建一个新帐户。他们输入一个“密码”，然后客户端代码生成一个长随机字符串“salt”并将其附加到末尾，并生成一个哈希 -> BCrypt(password+salt) 例如。然后，客户端代码将完整的哈希加上未哈希的盐发送到服务器。

2）服务器将完整的哈希和未哈希的盐存储在数据库中的用户条目中。

3）在用户登录期间，他们输入密码，然后再次用盐进行哈希处理，

问题 1) 客户端代码如何为每个用户生成相同的“随机”盐值？

问题2）此时客户端代码是否只发送没有盐的完整哈希？

问题3）服务器端收到完整哈希后会做什么？（只需将发送的完整哈希与存储的完整哈希进行比较？如果是这种情况，那么攻击者不能在闯入数据库并获取存储的完整哈希值时直接使用它们发送到服务器进行登录吗？这是基于我的假设，即登录过程本质上涉及服务器将客户端发送的完整哈希与存储在数据库中的完整哈希进行比较。

问题 4) 是否应始终通过安全连接发送密码？还是对它们进行加盐和散列处理可以让任何人看到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:48:37.827

您混淆了散列的目的。它不是为了保护有线传输的密码。客户端不生成哈希。哈希的目的是防止破坏您的数据库的攻击者能够快速使用预先生成的哈希查找表来确定您的用户密码是什么。

下面是一个简单的例子——正如@jhoyla 在下面的评论中指出的那样，工业级生产方案更加复杂。

要创建一个帐户：

1.  客户端与服务器建立一个安全的（加密的，例如 SSL）连接，并发送用户名和密码，通常是明文（没关系，因为它是加密的）。

2.  服务器生成一个随机盐，将其附加到密码，对结果进行散列，并存储散列和未散列的盐值。

登录：

1.  客户端与服务器建立一个安全的（加密的，例如 SSL）连接，并发送用户名和密码，通常是明文（没关系，因为它是加密的）。

2.  服务器从存储中检索盐，将其附加到密码，对其进行散列，并将结果与​​存储中的散列密码进行比较。如果它们匹配，则用户已登录。

为了确定我们这样做的原因，假设我成功地攻击了网站的数据库服务器并下载了数据库。我现在有一个用户名列表，可能是电子邮件地址和密码哈希。如果密码没有加盐，那么很有可能许多哈希值相同（因为很多人使用相同的弱密码）。我知道其中一个用户在（例如）他们的电子邮件帐户上使用相同的弱密码的可能性非常高。所以我开始工作并散列整个字典以及许多其他可能的密码，寻找与这些流行密码之一匹配的散列。如果我被击中，我刚刚破解了一堆密码。如果我很聪明，我会提前生成这个列表，以便我可以快速完成。

现在想象一下密码是加盐的。现在，即使两个人使用相同的密码，也会为每个人生成不同的盐，并且生成的哈希值也会不同。我无法知道哪些密码是弱密码，哪些是普通密码，哪些是强密码。我可以通过将盐附加到每个可能的密码来尝试我的字典攻击，但是破解密码的难度（就时间而言）现在呈指数级上升。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-06T19:38:12.570

永远不要自己实施！如果您只是为了学习而需要它，那么@Chris 会回答您。但如果你需要一个工作软件，那就不要这样做。每种语言都有安全库，每个数据存储（ldap、数据库）都已经实现了密码存储机制。使用它，不要再发明轮子，因为你很可能会错过一些细节

# vba - 在 Excel 中创建删除线宏

> ID：11829914
> 
> 赞同：5
> 
> 时间：2012-08-06T14:06:59.400
> 
> 标签：vba, excel

我是 VBA 的新手，我正在尝试制作一个简单的宏，可以在其中突出显示一组单元格，单击一个按钮，然后删除选定的销售。之后，您可以再次选择单元格，单击相同的按钮，然后删除删除线。

我一直在寻找像样的文档，但还没有找到任何东西。

这是一些代码。

另外，我很想知道关于 VBA 的最佳文档在哪里。

```
Sub strikeOut()

Selection.Font.Strikethrough = True

End Sub 
```

我还需要命令按钮的帮助。

谢谢你。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T14:14:51.440

看起来你走在正确的道路上。根据您的代码，我假设您已经创建了一个命令按钮。如果是这样试试这个：

```
Sub strikeOut()
    With Selection.Font
        .Strikethrough = Not .Strikethrough
    End With
End Sub 
```

创建命令按钮：

*   **Excel 2003 及更早版本**：
    *   打开`Visual Basic`工具栏并激活`Control Toolbox`按钮。另一个框/工具栏应该出现不同的控制选项。
    *   选择`Button`选项并将其放置在所需位置。
*   **Excel 2007 及更高版本**：
    *   单击`Developer`选项卡/功能区。
    *   选择`Insert`并选择`Button`并将其放置在所需的位置。
*   *以下步骤适用于从现在开始的所有版本。
    *   右键单击您的新按钮并选择`Properties`为您的按钮命名/标题。
*   再次右键单击并选择`View Code`。
*   在`ButtonName_Click()`sub 中，`strikeOut()`使用以下任一方法添加调用：
    *   `Call strikeOut()`
*   或者干脆
    *   `strikeOut`

要回答您问题的第二部分，很难说什么是“最好的”，但这里有一些可能会有所帮助的链接：

[Chip Pearson 的网站](http://www.cpearson.com)
[MSDN](http://msdn.microsoft.com)
[OZgrid](http://www.ozgrid.com/)

# mysql - UPDATE 语句，带有多个 WHERE 条件的 COUNT

> ID：11829915
> 
> 赞同：0
> 
> 时间：2012-08-06T14:07:00.420
> 
> 标签：mysql

我有`TABLE1`如下

```
+----------+----------+----------+----------+----------+
+ date     + time     + course   + runner   + position +
+----------+----------+----------+----------+----------+
+ 20120701 + 1200     + london   + aaa      +   1st    +
+ 20120701 + 1200     + london   + bbb      +   2nd    +
+ 20120701 + 1200     + london   + ccc      +   3rd    +
+ 20120701 + 1300     + london   + eee      +   1st    +
+ 20120701 + 1300     + london   + fff      +   2nd    +
+ 20120701 + 1400     + new york + ggg      +   1st    +
+ 20120701 + 1400     + new york + hhh      +   2nd    +
+ 20120702 + 2000     + london   + iii      +   1st    +
+ 20120702 + 2000     + london   + aaa      +   2nd    +
+ 20120702 + 2100     + new york + iii      +   1st    +
+ 20120702 + 2100     + new york + bbb      +   2nd    +
+----------+----------+----------+----------+----------+ 
```

和第二张桌子

```
+------+----------+------+--------+--------+-----+------+-------+
+idtbl2+ date     + time + course + runner + pos + link + total +
+------+----------+------+--------+--------+-----+------+-------+
+    1 + 20120701 + 1200 + london + aaa    + 1st + WWW  +       +
+    1 + 20120701 + 1200 + london + aaa    + 1st + XXX  +       +
+    1 + 20120701 + 1200 + london + aaa    + 1st + YYY  +       +
+    1 + 20120701 + 1200 + london + aaa    + 1st + XXX  +       +
+------+----------+------+--------+--------+-----+------+-------+ 
```

基本上我需要`RUNNER`从一个事件中计算竞争对手的数量（ ）`TABLE1`并将其更新到`TOTAL`第二个表的字段中，`TABLE2`.

但是，`TABLE1`大小为 8500 条记录，大小`TABLE2`为 65,000 条记录。运行以下查询时，它会超时并丢失 MySQL 连接。

```
update table2 b, table1 a set b.total = (select count(a.runner) from table1 where a.date = b.date AND a.time = b.time AND a.course = b.course AND a.position != 'DQ'  ); 
```

我对 JOIN 的有限理解使我相信 JOIN 不会提高效率，所以我很困惑。有什么想法吗？

@MarkByers -

JOIN 创建一个临时表，两个表的串联，是吗？我的想法是，无论如何，我仍然必须将一张表中的四个字段（日期、时间、课程、跑步者）与另一张表进行比较。

我试过这个，但它也超时：

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:27:13.673

1.  从子句中删除**table1**`update`，因为您已经（内部）使用嵌套的*Select count...*加入表。您在没有子句的情况下加入**table2**和**table1**`where`，生成的产品太大而无法处理，以至于您的引擎超时。

2.  检查`where`nested 中的子句`select`，我认为您应该按 Runner 过滤查询，否则您正在计算具有相同时间、日期、课程等的不同 Runner；除非那是你想要的。

> ```
> update table2 b
> set b.total = (select count(a.runner) 
>       from table1 
>       where a.date = b.date 
>       AND a.time = b.time 
>       AND a.course = b.course 
>       AND a.position != 'DQ'  
>       AND b.runner = a.runner); 
> ```

# xml - XQuery - 以字符串形式获取节点，包括 XML 标记

> ID：11829920
> 
> 赞同：1
> 
> 时间：2012-08-06T14:07:21.950
> 
> 标签：xml, sql-server-2008, xquery

我在 SQL Server 2008R2 的表中有一个 XML 列。XML 看起来像这样（简化示例）：

```
<root>
   ...
   <Filters>
       <Filter type="a">
          <Patterns>
              <Pattern>bla bla bla</Pattern>
              <Pattern>kuku</Pattern>
          </Patterns>
       </Filter>
       <Filter type="b">
           <Name>Cookie</Name>
       </Filter>
       <Filter type="c">
          <FileTypes>
              <FileType>exe</FileType>
              <FileType>jpg</FileType>
          </FileTypes>
       </Filter>
   </Filters>
   ...
</root> 
```

即可以定义很多过滤器类型，并且每种类型都有唯一的子元素。我想编写一个返回以下字符串的查询：

```
Filter Type: a
Configuration:
    <Patterns>
        <Pattern>bla bla bla</Pattern>
        <Pattern>kuku</Pattern>
    </Patterns>

Filter Type: b
Configuration:
    <Name>Cookie</Name>

Filter Type: c
Configuration:
    <FileTypes>
        <FileType>exe</FileType>
        <FileType>jpg</FileType>
    </FileTypes> 
```

到目前为止，我所拥有的是：

```
SELECT
   xmlFiled.query(
     let $nl := "&#10;"
     let $space := "&#32;"
     let $tab := concat($space, $space, $space, $space)
     for $f in /root/.../Filters/Filter 
     return concat("Filter Type: ", $f/@type, $nl, "Configuration:", $nl, $tab, $f/node()[1], $nl)'
     ) AS Filters, 
FROM Table 
```

问题是 $f/node()[1] 的字符串转换将节点的所有内部元素中的文本连接起来而不保留 XML 标签，所以我得到的结果是这样的：

```
Filter Type: a
Configuration:
    bla bla blakuku

Filter Type: b
Configuration:
    Cookie

Filter Type: c
Configuration:
    exejpg 
```

有可能以这种方式实现我想要的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:23:47.377

获得所需结果的另一种方法。

```
declare @T table(xmlFiled xml)

insert into @T values
('<root>
   <Filters>
       <Filter type="a">
          <Patterns>
              <Pattern>bla bla bla</Pattern>
              <Pattern>kuku</Pattern>
          </Patterns>
       </Filter>
       <Filter type="b">
           <Name>Cookie</Name>
       </Filter>
       <Filter type="c">
          <FileTypes>
              <FileType>exe</FileType>
              <FileType>jpg</FileType>
          </FileTypes>
       </Filter>
   </Filters>
</root>')

select stuff((
             select char(10)+char(10)+'Filter Type: '+F.N.value('@type', 'char(1)')+char(10)+
                    'Configuration:'+char(10)+space(4),
                    F.N.query('*')
             from T.xmlFiled.nodes('/root/Filters/Filter') as F(N)
             for xml path('')
             ), 1, 2, '')
from @T as T 
```

结果：

```
Filter Type: a
Configuration:
    <Patterns><Pattern>bla bla bla</Pattern><Pattern>kuku</Pattern></Patterns>

Filter Type: b
Configuration:
    <Name>Cookie</Name>

Filter Type: c
Configuration:
    <FileTypes><FileType>exe</FileType><FileType>jpg</FileTyp 
```

# java - Logback 文件附加程序不会立即刷新

> ID：11829922
> 
> 赞同：18
> 
> 时间：2012-08-06T14:07:36.823
> 
> 标签：java, logging, io, logback, flush

在某些情况下，我需要立即强制刷新 logback 的文件附加程序。我在[文档](http://logback.qos.ch/manual/encoders.html#PatternLayoutEncoder)中发现此选项默认启用。神秘的是，这不起作用。正如我在源代码中看到的那样，底层过程涉及`BufferedOutputSream`正确。有什么问题`BufferedOutputSream.flush()`吗？可能这与冲洗问题有关。

**更新**：我在 Windows XP Pro SP 3 和 Red Hat Enterprise Linux Server 版本 5.3 (Tikanga) 上发现了这个问题。我使用了这些库：

```
jcl-over-slf4j-1.6.6.jar
logback-classic-1.0.6.jar
logback-core-1.0.6.jar
slf4j-api-1.6.6.jar 
```

是`logback.xml`：

```
<configuration>
    <appender name="FILE" class="ch.qos.logback.core.rolling.RollingFileAppender">
        <file>/somepath/file.log</file>
        <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
            <fileNamePattern>file.log.%i</fileNamePattern>
            <minIndex>1</minIndex>
            <maxIndex>3</maxIndex>
        </rollingPolicy>
        <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
            <maxFileSize>5MB</maxFileSize>
        </triggeringPolicy>
        <encoder>
            <pattern>%d{HH:mm:ss.SSS} [%thread] %-5level %logger - %msg%n</pattern>
        </encoder>
    </appender>

    <root level="debug">
        <appender-ref ref="FILE"/>
    </root>
</configuration> 
```

**更新：** 我会提供一个单元测试，但这似乎并不那么简单。让我更清楚地描述这个问题。

1.  发生记录事件
2.  事件被传递到文件追加器
3.  事件以定义的模式序列化
4.  事件的序列化消息被传递到文件附加程序，并即将写出到输出流
5.  写入流完成，输出流被刷新（我已经检查了实现）。请注意，`immidiateFlush`默认情况下为 true，因此`flush()`显式调用方法
6.  文件中没有结果！

稍后，当一些底层缓冲区流动时，该事件出现在文件中。所以问题是：输出流是否保证立即刷新？

老实说，我已经通过实施我自己`ImmediateRollingFileAppender`的利用`FileDescriptor`即时同步工具来解决这个问题。有兴趣的可以关注[这个](https://stackoverflow.com/a/4072895/538514)。

所以这不是一个 logback 问题。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-10T05:21:37.237

我决定把我的解决方案带给大家。首先让我澄清一下，这不是 logback 问题，也不是 JRE 问题。这在[javadoc](http://docs.oracle.com/javase/6/docs/api/java/io/OutputStream.html#flush%28%29)中进行了描述，并且在您遇到一些关于文件同步的老式集成解决方案之前，通常不应该成为问题。

所以这是一个实现立即刷新的 logback appender：

```
public class ImmediateFileAppender<E> extends RollingFileAppender<E> {

    @Override
    public void openFile(String file_name) throws IOException {
        synchronized (lock) {
            File file = new File(file_name);
            if (FileUtil.isParentDirectoryCreationRequired(file)) {
                boolean result = FileUtil.createMissingParentDirectories(file);
                if (!result) {
                    addError("Failed to create parent directories for [" + file.getAbsolutePath() + "]");
                }
            }

            ImmediateResilientFileOutputStream resilientFos = new ImmediateResilientFileOutputStream(file, append);
            resilientFos.setContext(context);
            setOutputStream(resilientFos);
        }
    }

    @Override
    protected void writeOut(E event) throws IOException {
        super.writeOut(event);
    }

} 
```

这是相应的输出流实用程序类。由于最初`ResilientOutputStreamBase`应该用于扩展的某些原始方法和字段具有打包的访问修饰符，因此我不得不进行扩展`OutputStream`，并且只需将其余部分和未更改的部分复制`ResilientOutputStreamBase`到`ResilientFileOutputStream`这个新的部分。我只是显示更改后的代码：

```
public class ImmediateResilientFileOutputStream extends OutputStream {

    // merged code from ResilientOutputStreamBase and ResilientFileOutputStream

    protected FileOutputStream os;

    public FileOutputStream openNewOutputStream() throws IOException {
        return new FileOutputStream(file, true);
    }

    @Override
    public void flush() {
        if (os != null) {
            try {
                os.flush();
                os.getFD().sync(); // this's make sence
                postSuccessfulWrite();
            } catch (IOException e) {
                postIOFailure(e);
            }
        }
    }

} 
```

最后是配置：

```
<appender name="FOR_INTEGRATION" class="package.ImmediateFileAppender">
    <file>/somepath/for_integration.log</file>
    <rollingPolicy class="ch.qos.logback.core.rolling.FixedWindowRollingPolicy">
        <fileNamePattern>for_integration.log.%i</fileNamePattern>
        <minIndex>1</minIndex>
        <maxIndex>3</maxIndex>
    </rollingPolicy>
    <triggeringPolicy class="ch.qos.logback.core.rolling.SizeBasedTriggeringPolicy">
        <maxFileSize>5MB</maxFileSize>
    </triggeringPolicy>
    <encoder>
        <pattern>%d{HH:mm:ss.SSS} - %msg%n</pattern>
        <immediateFlush>true</immediateFlush>
    </encoder>
</appender> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-16T10:22:25.620

你做得很好——做得很好。这是一个更简洁的建议：

```
public class ImmediateFlushPatternLayoutEncoder extends PatternLayoutEncoder {
    public void doEncode(ILoggingEvent event) throws IOException {
        super.doEncode(event);
        if (isImmediateFlush()) {
             if (outputStream.os instanceof FileOutputStream) {
                 ((FileOutputStream) outputStream.os).getFD().sync();
             }
        }
    }
} 
```

在配置中，您必须使用该特定编码器：

```
<encoder class="ch.qos.logback.core.recovery.ImmediateFlushPatternLayoutEncoder"> 
```

未测试。可能会有字段可见性问题，**需要使用 logback`ch.qos.logback.core.recovery`包本身**。

顺便说一句，我邀请您向 logback[提交错误报告](http://logback.qos.ch/bugreport.html)`immediateSync`，以获得关于`LayoutWrappingEncoder`.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-06-08T11:55:03.080

许多监控中间件通过检查时间戳和文件大小的更新来发现新事件。为此，它需要记录事件的时间，更新时间戳和文件大小。

这门课可以解决

```
public class MyFileAppender<E> extends FileAppender<E> {
    protected void writeOut(E event) throws IOException {
        super.writeOut(event);
        ResilientFileOutputStream resilientFos = (ResilientFileOutputStream) super.getOutputStream();
        resilientFos.flush();
        resilientFos.getChannel().force(true);
    }
} 
```

为 appender 设置 MyFileAppender 类。

```
<appender name="FILE" class="MyFileAppender"> 
```

我希望这是 logback 解决了这个问题。

# c# - JavaScript 看不到声明的变量？

> ID：11829925
> 
> 赞同：3
> 
> 时间：2012-08-06T14:07:42.043
> 
> 标签：c#, javascript, asp.net

我有一个带有此声明的 C# aspx 页面：

```
<asp:Button ID="Button1" runat="server" Text="Samples (Lab)" OnClientClick="toggleLab(); return false;" />&nbsp; 
```

该`toggleLab`函数在文档脚本部分中进行了描述，并且调用得很好。在同一个脚本部分，在函数之前，定义了一个全局，所以代码是这样的：

```
var samplesOff; 

function toggleLab() {
    console.log("toggleLab, samplesOff: ", samplesOff);
    ...
} 
```

`samplesOff`可从`onLoad`事件后调用的其他函数访问。但是，当我按下按钮时，JavaScript 函数不知道 samplesOff 变量。

我该怎么做才能从`onClientClick`C# 按钮中调用的函数中访问变量？为什么在通话期间无法访问我的变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T19:23:28.217

我认为 console.log 不接受所有浏览器中的替代参数：

你可以检查这个：[https](https://developer.mozilla.org/en-US/docs/DOM/console.log) ://developer.mozilla.org/en-US/docs/DOM/console.log ，基本上它说的是不是所有的浏览器都支持替换字符串。

# c# - 如何使用 C# 和 WMI 以编程方式禁用或停止蓝牙驱动程序？

> ID：11829928
> 
> 赞同：0
> 
> 时间：2012-08-06T14:07:47.377
> 
> 标签：c#, winforms, bluetooth, wmi

如何使用 C# 和/或 WMI 以编程方式禁用或停止蓝牙驱动程序？我已经尝试过命名空间 Win32_NetworkAdapter 中的方法“禁用”，但看起来它没有帮助。

这是一个例子，我做了什么：

```
ManagementObject classInstance =
                new ManagementObject("\\root\\cimv2",
                "Win32_NetworkAdapter.DeviceID='16'",
                null);

            // no method in-parameters to define

            // Execute the method and obtain the return values.
            ManagementBaseObject outParams =
                classInstance.InvokeMethod("Disable", null, null);

            // List outParams
            Console.WriteLine("Out parameters:");
            Console.WriteLine("ReturnValue: " + outParams["ReturnValue"]); 
```

感谢您的任何想法！

upd：我也尝试在 WIN32_SystemDriver 对象上调用 StopService，但它返回错误代码 4；

# phpunit - 在 PHPunit 的命令行上设置 xdebug.coverage_enable=On

> ID：11829931
> 
> 赞同：7
> 
> 时间：2012-08-06T14:07:56.467
> 
> 标签：phpunit

我不想为所有脚本打开 xdebug 代码覆盖，但我确实希望能够为生成代码覆盖的每日 jenkins 构建打开它。

我尝试了以下

```
phpunit -d xdebug.coverage_enable=1 -c phpunit-coverage.xml.dist 
```

但是我总是收到以下错误

```
Configuration read from phpunit-coverage.xml.dist

Fatal error: Uncaught exception 'PHP_CodeCoverage_Exception' with message 'You need to set xdebug.coverage_enable=On in your php.ini.' in /usr/local/lib/php/PHP/CodeCoverage/Driver/Xdebug.php on line 72

PHP_CodeCoverage_Exception: You need to set xdebug.coverage_enable=On in your php.ini. in /usr/local/lib/php/PHP/CodeCoverage/Driver/Xdebug.php on line 72

Call Stack:
    0.0002     627488   1\. {main}() /usr/local/bin/phpunit:0
    0.0050    1095880   2\. PHPUnit_TextUI_Command::main() /usr/local/bin/phpunit:46
    0.0050    1096608   3\. PHPUnit_TextUI_Command->run() /usr/local/lib/php/PHPUnit/TextUI/Command.php:130
    0.6419   39830848   4\. PHPUnit_TextUI_TestRunner->doRun() /usr/local/lib/php/PHPUnit/TextUI/Command.php:192
    0.9760   40345400   5\. PHP_CodeCoverage->__construct() /usr/local/lib/php/PHPUnit/TextUI/TestRunner.php:258
    0.9764   40358504   6\. PHP_CodeCoverage_Driver_Xdebug->__construct() /usr/local/lib/php/PHP/CodeCoverage.php:119 
```

关于如何让它工作的任何想法，而不必每次都更改 php.ini？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2021-06-28T15:07:13.643

是的，它可以但只能通过像这样运行它：

```
php -dxdebug.mode=coverage bin/phpunit --coverage-clover='reports/coverage/coverage.xml' --coverage-html='reports/coverage' 
```

注意：“..Xdebug: [Config] 设置 'xdebug.coverage_enable' 已重命名，..”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-30T13:27:32.320

最后我发现你不能做我最初想做的事。

相反，答案是添加第二个启用了 xdebug 和覆盖的 php.ini 文件。然后在我的 build.xml 中，我使用以下内容运行它。

```
php -c /usr/local/lib/php-coverage.ini /usr/bin/phpunit -c app/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-23T12:27:16.137

使用 php 7.4 我必须使用`-d xdebug.mode=coverage`

因为我用`php -n`我的全线是`-d zend_extension=xdebug.so -d xdebug.mode=coverage`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2022-01-13T10:08:45.313

使用 php 7.4 和 phpunit 9，可以使用 env 设置选项

```
XDEBUG_MODE=coverage /usr/bin/phpunit 
```

# powershell - Powershell Invoke-Command 在本地而不是远程服务器上执行

> ID：11829935
> 
> 赞同：0
> 
> 时间：2012-08-06T14:08:16.643
> 
> 标签：powershell

我有一个脚本，它将另一个脚本复制到远程服务器，然后执行第二个脚本。上周工作正常，但今天第一个脚本的执行失败，说找不到第二个脚本。作为故障排除的一部分，我在本地服务器上创建了第二个脚本的简单版本（仅包含 Write-Host "Wrong Server！）。现在，当我运行第一个脚本时，虚拟的第二个脚本在本地服务器上执行！

我已经粘贴了下面的测试工具脚本：

```
$DeploymentFolderOnTargetServer = "c:\biztalkdeployment"

$TargetServer = "d-vasbiz01"                
$Username = "TFS_Service"
$Password = "x"
$SecPass = ConvertTo-SecureString $Password -AsPlainText -Force
$Cred = New-Object -typename System.Management.Automation.PSCredential -argumentlist $Username,$SecPass
$Session = New-PSSession -ComputerName $TargetServer -Authentication CredSSP -Credential $Cred
$Environment = "Dev"
$ExecuteScriptFilePath = join-path "$DeploymentFolderOnTargetServer" "ExecuteBizTalkAppMSI.ps1"
$MSI = "bin\debug\x.int.mis-3.0.0.msi"
$InstallFolderOnTargetServer = "C:\Program Files (x86)\x.Int.MIS for BizTalk 2010\3.0"

Write-Host "Session = $Session"
Write-Host "ExecuteScriptFilePath = $ExecuteScriptFilePath"
Write-Host "MSI = $MSI"
Write-Host "InstallFolderOnTargetServer = $InstallFolderOnTargetServer"
Write-Host "Environment = $Environment"
Write-Host "DeploymentFolderOnTargetServer = $DeploymentFolderOnTargetServer"

Invoke-Command -Session $Session  -FilePath $ExecuteScriptFilePath -argumentlist $MSI, $InstallFolderOnTargetServer, $Environment, $DeploymentFolderOnTargetServer 
```

测试的输出如下：

```
Session = System.Management.Automation.Runspaces.PSSession
ExecuteScriptFilePath = c:\biztalkdeployment\ExecuteBizTalkAppMSI.ps1
MSI = bin\debug\x.int.mis-3.0.0.msi
InstallFolderOnTargetServer = C:\Program Files (x86)\Vasanta.Int.MIS for BizTalk 2010\3.0
Environment = Dev
DeploymentFolderOnTargetServer = c:\biztalkdeployment
Wrong Server! 
```

如果我运行 get-session 那么会话的计算机名正确地指向第二台服务器。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T15:37:37.833

`-FilePath`参数 to`Invoke-Command`指定脚本的本地**路径**- 而不是目标计算机上的路径。`Invoke-Command`将负责将本地脚本文件转移到目标计算机，以便它可以在那里执行。

# asp.net - 如何根据角色显示或隐藏控件 - ASP.NET MVC 4 Razor

> ID：11829937
> 
> 赞同：17
> 
> 时间：2012-08-06T14:08:22.383
> 
> 标签：asp.net, .net, asp.net-mvc, authorization, windows-authentication

我正在开发 ASP.NET MVC 4 应用程序。我有一个仪表板，我的用户组将基于 Windows 域，所以我使用 WIndows 身份验证对用户进行身份验证。我创建了通过覆盖函数 AuthorizeAttribute, ActionFilterAttribute 使用自定义身份验证的示例应用程序。这是一个好方法吗？

> 1.  哪个属性最适合用于身份验证？

我有一个仪表板。所以我需要根据角色显示或隐藏控件。假设如果有 3 个网格（表），如果管理员登录，他可以看到 3 个网格（表）。但如果支持用户登录，他只能看到 2 个网格（表格）。

我的计划是为每个网格创建局部视图，因此每个局部视图都会有一个动作和控制器。将有一个数据库，其中我将指定每个组可以执行的操作。这样我就可以过滤请求。

> 2 如何隐藏或显示基于角色的部分视图？

我尝试了一些 SO 链接，但他们都在谈论 2,3 角色并且它是硬编码的。在我的情况下，角色可能会有所不同，我们使用 db 来设置角色的访问权限。

提前致谢。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-25T07:39:42.553

您可以使用以下代码进行基于角色的检查

```
@if(Request.IsAuthenticated)

{
    if(User.IsInRole("Admin"))
    {
     <Ul Class="SubMenuItem">

     <li> this menu item is for Admin role</li>
     </Ul>
    }
     if(User.IsInRole("User"))
    {
     <Ul Class="SubMenuItem">

     <li> this menu item is for User role</li>
     </Ul>
    }
}
@* For unknown user *@
else
{
     <Ul Class="SubMenuItem">
         <li> this menu item is for Unknown user</li>
     </Ul>
} 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2014-07-12T04:30:51.273

通常，您希望保持视图尽可能干净，几乎没有逻辑。我建议将您的角色检查逻辑移动到控制器操作中，并根据用户角色呈现部分视图。

您可以使用[ChildActions](https://msdn.microsoft.com/en-us/library/system.web.mvc.childactiononlyattribute(v=vs.118).aspx#Anchor_6)和 Html.Action 扩展方法来连接它。

来自 MSDN：

> 子操作方法为视图的一部分呈现内联 HTML 标记，而不是呈现整个视图。任何标有 ChildActionOnlyAttribute 的方法只能使用 Action 或 RenderAction HTML 扩展方法调用。

在您的项目中，创建一个名为*Dashboard*的新 Controller并添加一个名为*BuildTable*的 Action 。

```
public class DashboardController : Controller
{
    [ChildActionOnly]
    public ActionResult BuildTable()
    {
        if (Roles.IsUserInRole("Administrator"))
        {
            return PartialView("_AdminTable");
        }

        return PartialView("_SupportTable");
    }
} 
```

在您希望仪表板表出现的视图中包括以下行。

```
@Html.Action("BuildTable", "Dashboard") 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-08-06T15:19:42.523

我做过类似的事情。我做的方式（可能不是最好的）

是将布尔值发送回视图

在控制器中使用：

```
bool showSection1 = true;
bool showSection2 = false;

ViewData["showSection1"] = showSection1;
ViewData["showSection2"] = showSection2;
/// may be better to use a viewmodel here rather than ViewData 
```

然后在视图中：

```
@if((bool)ViewData["showSection1"])
{
    @{Html.RenderPartial("section1");}
}
@if((bool)ViewData["showSection2"))
{
    @{Html.RenderPartial("Section2");}
} 
```

您将需要执行逻辑以按照您想要的方式设置布尔值，但这应该是一个开始。

您还可以创建一个返回角色的静态方法，然后直接从视图中获取该值。不过，这可能是不好的形式。

```
@if(AppHelper.GetRole().equals("role1")){
    //show the partial
} 
```

然后创建一个名为 AppHelper 的类和一个名为 GetRole 的方法，该方法返回用户的角色。

# serialization - JDK 5（服务器）和 6（客户端 - VisualVM）之间的远程 JFrame

> ID：11829940
> 
> 赞同：0
> 
> 时间：2012-08-06T14:08:27.250
> 
> 标签：serialization, jframe, java, jmx, visualvm

所以我在打开一个 JFrame 时有点麻烦。我在网上广泛搜索，但我真的找不到解决方案......

我解释了情况：

我需要开发一个应用程序，该应用程序需要在满足新安全标准的同时检索信息跟踪应用程序。为此，我使用允许监控的 JMX 和 VisualVM 来查看这些信息。

因此，自 VisualVM 以来，我毫无问题地（最近 ^ ^）连接到 JMX。

因此，VisualVM 插件中有一个用于恢复 MBean 上的信息，包括方法上的信息（插件中的操作选项卡）。这允许停止服务或创建事件等。

当我尝试显示统计结果时，我的问题就出现了。事实上，我必须通过单击“操作”中方法列表中的按钮来显示一个带有 HTML 表格的窗口（标题、颜色和其他所有内容）。

为此，我使用 JFrame：

```
public JFrame displayHTMLJFrame(String HTML, String title){
        JFrame fen = new JFrame();
        fen.setSize(1000, 800);
        fen.setTitle(title);

        JEditorPane pan = new JEditorPane();
        pan.setEditorKit(new HTMLEditorKit());
        pan.setEditable(false);

        pan.setText(HTML);
        fen.add(pan);
        return fen;
    } 
```

我在我的方法中调用它：

```
public JFrame displayHtmlSqlStatOK_VM(){
        return displayHTMLJFrame(displaySQLStat(sqlStatOK, firstMessageDate), "SqlStatOK");
    } 
```

因此，该方法必须将我的 JFrame 还给我，但她会产生错误：

```
Problem invoking displayHtmlSqlStatOK_VM : java.rmi.UnmarshalException: error unmarshalling return; nested 

exception is:
java.io.InvalidClassException: javax.swing.JFrame; local class incompatible: stream classdesc serialVersionUID = 

-5208364155946320552, local class serialVersionUID = -2386951414768123374 
```

我在网上看到这是一个版本问题（序列化），我坚信这是因为我有这个：

服务器 - JDK5 <----> 客户端 (VisualVM) - JDK6

知道我不能像某些网站和论坛所倡导的那样更改服务器版本（成本太重要了......）。

我的问题如下：

我可以显示这个该死的窗口来保持我当前的架构（JDK5 服务器端和客户端 JDK6）吗？

我也许可以强迫这个问题？告诉他没有什么不好的东西可以运行我的代码？最后我问他，但他没有回答我，也许他会告诉你......（是的，我破解了^^）。

非常感谢那些阅读我并帮助我的人！

如果您需要更多信息，请不要犹豫。

**编辑**

我的问题的解决方案可能在其他地方，因为实际上我只想要一个格式最少的表格（这只是为了查看一个官员的申请，让他的小表格可能会将关键数据放在红色......）。

但是我在任何地方都找不到可以使用 VisualVM 返回的类型列表……但是在我看来，这并没有太多要求。

在我想到了一个备份解决方案之后，那就是创建一个临时的 HTML 文件并在浏览器中自动打开它，但之后可能不是很干净......但如果它可以工作 ^^

我对任何研究领域都持开放态度！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:34:40.443

看起来您正在通过 JMX 连接发送实例 javax.swing.JFrame - 这是一个坏主意。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-14T08:33:47.920

很好，我发现自己很棒：）

谢谢你，再见！

…………

开个玩笑当然我会给出我找到的解决方案^ ^

所以这就是我所做的：

我要在客户端上完成的显示（正常......）我的代码显示了我在服务器上设置的 JFrame 明显显示......在服务器上 xD

我不想改变客户 (VisualVM) 以允许用户最大的灵活性。但是我意识到，要显示我的 HTML 表以使其可用（使用颜色和所有内容），我必须更改客户端（因为 JMX 不支持 JFrame 类型作为返回操作的类型）。

我的操作是从 VisualVM 的 MBeans 插件运行的，我有必要找到它的源代码说“如果你看到我给你的 HTML 你在 JFrame 中显示它，请小心”。

这是我的方法：

# - 获取资源

SVN获取VisualVM源码的链接如下：

https://svn.java.net/svn/visualvm~svn/branches/release134

如果像我一样，您在使用 NetBeans 中包含的 SVN 客户端时遇到问题，因为您在代理后面，您可以通过命令行来完成：

```
svn --config-option servers:global:http-proxy-host=MY_PROXY_HOST --config-option servers:global:http-proxy-port=MY_PROXY_PORT checkout https: //svn.java.net/svn/visualvm~svn/branches/release134 sources-visualvm 
```

当然是把你放在你的目标文件夹（cd C:\Users\me\Documents\SourcesVisualVM 例子）。

# - 添加平台 VisualVM

NetBeans 需要 VisualVM 平台为其创建模块（插件）。为此，请转到“工具”->“NetBeans 平台”。

然后点击窗口左下方的“Add Platform ...”，选择下载到这个地址的bin文件夹：http://visualvm.java.net/download.html

你应该有这个：

[http://img15.hostingpics.net/pics/543268screen1.png](http://img15.hostingpics.net/pics/543268screen1.png)

# - 在工作区中添加源 (NetBeansProjects)

将下载的源代码（来自上述链接的 SVN）复制/粘贴到您的 NetBeans 工作区（默认情况下位于 C:\Users\XXX\Documents\NetBeansProjects）。

# - Ouverture du projet du plugin MBeans

在 NetBeans 中，右键单击 Project Explorer（或转到菜单“Files”）并单击“Open Project ...”。然后，您将在工作区中拥有一个项目列表。打开“release134”->“Plugins”中的项目“mbeans”，如下：

[http://img15.hostingpics.net/pics/310487screen2.png](http://img15.hostingpics.net/pics/310487screen2.png)

# - 更改文件“platform.properties”

要构建插件，您必须为您的平台定义一些变量。为此，请打开工作区目录**release134\plugins\nbproject中的文件****platform.properties**。替换内容（通过更改与您相比的路径）：

 **```
cluster.path=\
    C:\\Program Files\\java6\\visualvm_134\\platform:\
    C:\\Program Files\\java6\\visualvm_134\\profiler

# Deprecated since 5.0u1; for compatibility with 5.0:
disabled.clusters=
nbjdk.active=default
nbplatform.active=VisualVM_1.3.4
suite.dir=${basedir}

harness.dir= C:\\Program Files\\NetBeans 7.1.2\\harness 
```

# - 更改类 XMBeanOperations

要添加我们的功能（显示 HTML 表格），您必须更改处理操作的类，即com.sun.tools.visualvm包中的**XMBeanOperations类****。模块.mbeans**。

在第 173 行，替换：

```
if (entryIf.getReturnType() != null &&
                            !entryIf.getReturnType().equals(Void.TYPE.getName()) &&
                            !entryIf.getReturnType().equals(Void.class.getName()))
                        fireChangedNotification(OPERATION_INVOCATION_EVENT, button, result); 
```

经过 ：

```
if (entryIf.getReturnType() != null &&
                            !entryIf.getReturnType().equals(Void.TYPE.getName()) &&
                            !entryIf.getReturnType().equals(Void.class.getName())) {
                        if (entryIf.getReturnType() instanceof String) {
                            String res = result + "";
                            if (res.indexOf("<html>") != -1) {
                                JFrame frame = displayHTMLJFrame(res, button.getText());
                                frame.setVisible(true);
                            }
                            else
                                fireChangedNotification(OPERATION_INVOCATION_EVENT, button, result);
                        } else
                            fireChangedNotification(OPERATION_INVOCATION_EVENT, button, result);
                    } 
```

使用您放置在“void performInvokeRequest（最终 JButton 按钮）”上方的创建 JFrame 的方法，例如：

```
// Display a frame with HTML code
public JFrame displayHTMLJFrame(String HTML, String title){
        JFrame fen = new JFrame();
    fen.setSize(1000, 800);
    fen.setTitle(title);

    JEditorPane pan = new JEditorPane();
    pan.setEditorKit(new HTMLEditorKit());
    pan.setEditable(false);

    pan.setText(HTML);
    fen.add(pan);
    return fen;
} 
```

我们可以看到我们已经对返回类型进行了测试，如果它是一个返回的字符串，如果是这样，如果我们在这个字符串中看到 balise ，那么我们通过打开一个 JFrame 来替换点击的结果您输入的字符串，是什么让我们显示我们的 HTML 代码！

# - 创建一个 .nbm

.nbm 文件是插件的部署文件。只需右键单击您的项目（在项目资源管理器中），然后单击“创建 NBM”。您的文件 .nbm 将在项目根目录的“build”文件夹中创建。

# - 在 VisualVM 中安装插件

要安装你的插件，你必须进入 VisualVM，进入“工具”->“插件”选项卡，然后“下载”，点击“添加插件...”。选择您的插件 .nbm，然后单击“安装”。然后按照说明进行操作。

**有用的资源**

http://docs.oracle.com/javase/6/docs/technotes/guides/visualvm/

http://visualvm.java.net/"]http://visualvm.java.net/

http://visualvm.java.net/api-quickstart.html (Créer un plugin VisualVM avec NetBeans)

非常感谢您的帮助 Tomas Hurka ;)**

# python - 在Eclipse中配置Python的OpenCV 2.3

> ID：11829943
> 
> 赞同：6
> 
> 时间：2012-08-06T14:08:38.500
> 
> 标签：python, eclipse, opencv, pydev

嗨，我刚开始使用 python 和 OpenCV，我的 IDE 是 eclipse。

现在我已经安装了 NumPy 和 SciPy 以及 OpenCV 2.3 和 Python 2.7

我想我配置了所有路径和解释器选项（可能不是），

问题来了：

![这是我的 IDE 的屏幕截图，所有与 cv 相关的都在编辑器中标记为错误，但实际上当我运行它时，结果很好](../Images/b56eebcffcab70b80938b322e70e68bd.png)

所以我的问题是如何让它像其他语言一样正常工作？

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-08-06T14:33:27.293

在 Eclipse 中转到

**`Window->Preferences->PyDev->Interpreters->Python Interpreter=> [Forced Builtins]`**（标签）

添加 cv（或 cv2）并应用 - 一切都会好的。

# git - git log --follow 文件名不显示提交更改了该文件

> ID：11829947
> 
> 赞同：2
> 
> 时间：2012-08-06T14:08:50.303
> 
> 标签：git, version-control, merge, git-merge, git-log

这里我做了什么：

*   从 master 创建开发分支；
*   修改了几个文件并提交；
*   将开发分支合并到带有`--no-commit`参数的master；
*   `git reset --hard`在开发分支中修改的几个文件上运行。结果主分支只包含来自开发分支的几个对象——即我已经部分合并了开发更改；
*   我已经在 master 中提交了更改；
*   一段时间后，其他开发人员更新了主分支，为了更新我的开发分支，我将主分支合并到其中。

我已经准备好，在我之前的合并中我没有承诺掌握的我的开发对象将被来自 master 的文件覆盖。但是在输出中`git log --follow dev-modified-file.txt`我看不到覆盖我的开发更改的提交。

在我的开发分支上运行 `git log --follow dev-modified-file.txt`，我可以看到需要的提交以及开发修改。但是看不到提交恢复该更改（实际上无论如何都没有这样的提交）但是我的工作树包含`dev-modified-file.txt`文件的主版本，尽管有提交添加开发代码，但没有提交删除该代码。

为什么？

主分支的代码是如何潜入我的开发分支的，没有留下任何痕迹？

PS如果我的描述不清楚，请在评论中提问，我很乐意相应地解释和更正这篇文章。

**编辑：**将我的 master 合并到开发中后，我看不到 master 和 development 分支之间的区别（我省略的更改消失了！）而且我看不到在开发分支中提交负责！

我相信这可能与合并策略有关……但是如何？你看，我的登录开发分支是什么样子的：

*   我添加了对文件的更改——工作文件夹中的文件包含这些更改。
*   我已经将 master 分支合并到 development 中——许多提交来到了 development 分支，我编辑的文件在 master 分支中变得相等，尽管没有提交负责！

* * *

合并后我在文件中添加了更改，更改消失了，没有留下任何痕迹！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-14T22:06:30.647

`git log <filename>`由于在其默认模式下执行的历史简化，您很有可能没有看到您正在寻找的更改。这种简化对于查找*删除*内容`git log <filename>`的提交不是很有用。

 *尝试`git log --follow --simplify-merges dev-modified-file.txt`改用；这会更改历史简化算法，使其在简化您可能关心的更改方面不那么激进。如果历史记录足够短，并且您已经安装了 gitk，那么您可能只需浏览历史记录即可找到您要查找的内容：`gitk --simplify-merges dev-modified-file.txt`*

# java - 图像错误

> ID：11829948
> 
> 赞同：0
> 
> 时间：2012-08-06T14:08:57.937
> 
> 标签：java

我最近完成了我正在制作的游戏的基础知识，并打算将其发送给一些朋友，但每当他们打开 .jar 时，它只是一个灰色窗口。当我听说我认为这是因为我获取图像的方式时（我使用了完整路径：C:\Users\etc）。我做了一些谷歌搜索，并找到了一种获取看起来更有效的图像的方法。

```
private static Image[] mobImages =  new Image[1];

public static void loadImages()
{
     mobImages[1] = Handler.loadImage("res/EnemyLv1.png");
}

public static Image getMobImages(int index)
{
     return mobImages[index];
} 
```

这就是我想要使用的。但我这样做了，并更改了我的其余代码以支持它。每当我运行游戏时，我都会遇到一些错误。这一切都指向

这个：if(getBounds().intersects(tempEnemy.getBounds()))

所以可能也是我获取图像的方式。我该如何解决这个问题？还有更好的方法来获取图像吗？我尝试了一些，但没有奏效。

编辑：我终于解决了所有的错误！:D 唯一的问题是没有图像出现。这是[我的代码](http://www.mediafire.com/?uykkdp0nzdi9092)。还有什么帮助吗？那太棒了！感谢大家迄今为止的支持！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:39:09.113

很难说你的代码出了什么问题。但是，我建议您将*图像文件*放入 java 项目中的一个包中（因此它们将成为 JAR 文件的一部分）并使用 Class.getResource()/Class.getResourceAsStream() 访问它们。这样可以避免多个陷阱并将所有内容放在一起。

如何将图像构建到包中的示例：

> 我的项目
>   图像ImageLocator.class     MyImage1.jpg     MyImage2.jpg

然后 ImageLocator 类需要使用相对路径（只是图像名称 + 扩展名）来访问资源。

```
public class ImageLocator {
    public final static String IMAGE_NAME1 = "MyImage1.jpg";

    public static Image getImage(final String name) {
        URL url = ImageLocator.class.getResource(name);
        Image image = Toolkit.getDefaultToolkit().createImage(url);
        // ensure the image is loaded
        return new ImageIcon(image).getImage();            
    }
} 
```

这可以做得更优雅，但这应该让你开始。在 ImageLocator 类中将图像名称定义为常量可以避免在整个项目中传播具体路径（只要在 ImageLocator 中名称正确，编译器将检查其他所有内容）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T14:35:03.353

您的代码仍然使用 Enemy.java 中的“C:\Users\Kids\Desktop\Java Game\Cosmic Defense\res\EnemyLv2.png”。你确定这存在吗？如果您移动了 Cosmic Defense 文件夹，则不会。

（您在谈论将绝对路径更改为相对路径，所以这可能是您的问题）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T17:19:09.880

部分原因可能是您的代码指向大小为 1 的数组中的索引“1”，这意味着唯一可用的索引实际上是“0”。

尝试`mobImages[0] = Handler.loadImage("res/EnemyLv1.png");`

# vbscript - vbs 获取映射到英语的时区字符串

> ID：11829955
> 
> 赞同：0
> 
> 时间：2012-08-06T14:09:21.170
> 
> 标签：vbscript

我尝试在 vbs 脚本中从 Win32_TimeZone 对象获取时区。但是 Win32_TimeZone Caption 返回一个依赖于默认系统语言的翻译字符串。是否可以从 Win32_TimeZone.Caption 获取英语映射值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T16:21:54.047

不可以。时间和日期设置是区域性的，取决于本地计算机的区域设置。您需要自己编译每个时区的列表（作为数组或字典），然后引用 Bias 属性。

# jsf - p:fileUpload 上传的文件保存在哪里，如何更改？

> ID：11829958
> 
> 赞同：13
> 
> 时间：2012-08-06T14:09:27.563
> 
> 标签：jsf, netbeans, file-upload, glassfish, primefaces

我在 Netbeans 开发中使用 Primefaces 的简单文件上传。我的测试示例类似于 Primefaces 手册。
**我的问题：文件在我的本地计算机上上传到哪里？我怎样才能改变它的路径？谢谢！**

.jsf 文件：

```
<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui">
    <h:head>
        <title>Page test</title>
    </h:head>
    <h:body>
        Hello! My first JSF generated page!
        <h:form enctype="multipart/form-data">
            <p:fileUpload value="#{fileBean.file}" mode="simple" />
            <p:commandButton value="Submit" ajax="false"/>
        </h:form>

    </h:body>
</html> 
```

和托管bean：

```
import javax.faces.bean.ManagedBean;
import javax.faces.bean.RequestScoped;
import org.primefaces.event.FileUploadEvent;
import org.primefaces.model.UploadedFile;

    @ManagedBean

@RequestScoped
public class FileBean {

    private UploadedFile file;

    public FileBean() {
    }

    public UploadedFile getFile() {
        return file;
    }

    public void setFile(UploadedFile file) {
        this.file = file;

    }
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-08-06T14:20:03.210

默认情况下，它保存在 servlet 容器的内存或临时文件夹中，具体取决于文件大小和 Apache Commons FileUpload 配置（另请参阅[PrimeFaces 用户指南](http://primefaces.org/documentation.html)`<p:fileUpload>`中章节的“过滤器配置”部分）。

你根本不应该担心这个。servlet 容器和 PrimeFaces 确切地知道它们在做什么。您应该在命令按钮的操作方法中实际将上传的文件内容保存到***您***需要的位置。您可以将上传的文件内容以`InputStream`by`UploadedFile#getInputStream()`或`byte[]`by 的形式`UploadedFile#getContents()`获取（在大文件的情况下获取 a`byte[]`可能会占用大量内存，您知道，每个`byte`占用 JVM 内存的一个字节，因此在大文件的情况下不要这样做） .

例如

```
<p:commandButton value="Submit" action="#{fileBean.save}" ajax="false"/> 
```

和

```
private UploadedFile uploadedFile;

public void save() throws IOException {
    String filename = FilenameUtils.getName(uploadedFile.getFileName());
    InputStream input = uploadedFile.getInputStream();
    OutputStream output = new FileOutputStream(new File("/path/to/uploads", filename));

    try {
        IOUtils.copy(input, output);
    } finally {
        IOUtils.closeQuietly(input);
        IOUtils.closeQuietly(output);
    }
} 
```

*（`FilenameUtils`并且`IOUtils`来自Commons IO，无论如何您都应该已经安装它才能开始`<p:fileUpload>`工作）*

要生成唯一的文件名，您可能会发现[`File#createTempFile()`](http://docs.oracle.com/javase/6/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String,%20java.io.File%29)该工具很有帮助。

```
String filename = FilenameUtils.getName(uploadedFile.getFileName());
String basename = FilenameUtils.getBaseName(filename) + "_";
String extension = "." + FilenameUtils.getExtension(filename);
File file = File.createTempFile(basename, extension, "/path/to/uploads");
FileOutputStream output = new FileOutputStream(file);
// ... 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-03-21T12:50:42.683

我使用了简单模式，GlassFish 4.0 和 PrimeFaces 4.0

支持豆

```
private UploadedFile file;
private String destination="C:\\temp\\";

public void upload() {

    System.out.println("uploading");
    if(file != null) {  
        System.out.println("the file is" +file);
        FacesMessage msg = new FacesMessage("Succesful" + file.getFileName() + " is uploaded.");  
        FacesContext.getCurrentInstance().addMessage(null, msg);  

        try {
           copyFile(file.getFileName(), file.getInputstream());
       }
       catch (IOException e) {
          e.printStackTrace();
       }
    }
    System.out.println("uploaf finished");
}  

public void copyFile(String fileName, InputStream in) {
    try {
        // write the inputStream to a FileOutputStream
        OutputStream out = new FileOutputStream(new File(destination + fileName));

        int read = 0;
        byte[] bytes = new byte[1024];

        while ((read = in.read(bytes)) != -1) {
             out.write(bytes, 0, read);
        }

        in.close();
        out.flush();
        out.close();

        System.out.println("New file created!");
    } catch (IOException e) {
       System.out.println(e.getMessage());
    }
} 
```

JSF 页面

```
<p:commandButton value="Submit" ajax="false" actionListener="#{staffController.upload}"/> 
```

# networking - MonoTouch，测试是否在本地网络上找到远程设备

> ID：11829960
> 
> 赞同：0
> 
> 时间：2012-08-06T14:09:33.867
> 
> 标签：networking, xamarin.ios, reachability

我正在使用 MonoTouch 开发一个应用程序，该应用程序将连接到网络上的远程设备。这些设备具有可以通过 http 查询访问的数据。

如果我向控制器提供有效的 IP 地址，则应用程序可以完美运行，但是如果控制器不在网络上，它会挂起很长时间。出于这个原因，我认为使用可以在此处找到的 Reachability.cs 类会很好：

[https://github.com/xamarin/monotouch-samples/blob/master/ReachabilitySample/reachability.cs](https://github.com/xamarin/monotouch-samples/blob/master/ReachabilitySample/reachability.cs)

我没有使用 google.com 作为主机，而是使用控制器的 IP 地址。我读过这个类有一个错误，导致它不喜欢在 URL 的开头有“http”。现在已经尝试了很多事情来让这个工作我没有想法。

有人有什么建议吗？也许我在这里重新发明轮子。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T15:56:12.130

> 现在已经尝试了很多事情来让这个工作我没有想法。

根据您的问题，尚不清楚您在`Reachability`课堂上遇到了什么问题。也许你可以编辑它并添加更多细节？例如，到目前为止您尝试了什么，它的反应如何：永远无法工作，抛出/崩溃，结果不一致......

> 有人有什么建议吗？

如果您的主要问题是**阻塞**应用程序的 UI，那么您可以（并且无论如何应该）异步（或单独的线程）进行连接和数据传输，并在完成后更新您的 UI（从主线程）。

例如使用[WebClient.DownloadDataAsync](http://msdn.microsoft.com/en-us/library/ms144190.aspx)

# iphone - MKAnnotationView 自定义图片不显示

> ID：11829962
> 
> 赞同：3
> 
> 时间：2012-08-06T14:09:42.217
> 
> 标签：iphone, objective-c, cocoa-touch, mkmapview, mkannotationview

我正在尝试在地图上添加自定义图像而不是常规图钉。但它仍然是一个红色别针......我错过了什么？

```
- (MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation{  
    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
    MKPinAnnotationView *annView = [[MKPinAnnotationView alloc]     initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
    annView.animatesDrop = TRUE;
    annView.image = [UIImage imageNamed:@"CustomPin.png"];
    return annView;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-08-06T14:23:22.490

[MKMapView：自定义视图代替 Annotation Pin](https://stackoverflow.com/questions/9814988/mkmapview-instead-of-annotation-pin-a-custom-view)

```
-(MKAnnotationView *)mapView:(MKMapView *)mV viewForAnnotation:(id <MKAnnotation>)annotation 
{
    MKAnnotationView *pinView = nil; 
    if(annotation != mapView.userLocation) 
    {
        static NSString *defaultPinID = @"com.invasivecode.pin";
        pinView = (MKAnnotationView *)[mapView dequeueReusableAnnotationViewWithIdentifier:defaultPinID];
        if ( pinView == nil ) 
            pinView = [[MKAnnotationView alloc]
                                         initWithAnnotation:annotation reuseIdentifier:defaultPinID];

        //pinView.pinColor = MKPinAnnotationColorGreen; 
        pinView.canShowCallout = YES;
        //pinView.animatesDrop = YES;
        pinView.image = [UIImage imageNamed:@"pinks.jpg"];    //as suggested by Squatch
    } 
    else {
        [mapView.userLocation setTitle:@"I am here"];
    }
    return pinView;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-06T14:42:44.787

嗨，只需从您的代码中删除一行...`annView.animatesDrop = TRUE;`

保留代码-

```
-(MKAnnotationView *) mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>) annotation{  
    static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
    MKPinAnnotationView *annView = [[MKPinAnnotationView alloc]     initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
    annView.image = [UIImage imageNamed:@"CustomPin.png"];
    return annView;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:20:48.400

我发现查看 Apple 文档并下载示例代码很有帮助。

[http://developer.apple.com/library/ios/#samplecode/MapCallouts/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009746](http://developer.apple.com/library/ios/#samplecode/MapCallouts/Introduction/Intro.html#//apple_ref/doc/uid/DTS40009746)

他们正在为他们的地图实施自定义注释。

# java - Selenium Webdriver - 存储多个链接文本

> ID：11829963
> 
> 赞同：0
> 
> 时间：2012-08-06T14:09:43.133
> 
> 标签：java, selenium, automation, selenium-webdriver

我正在使用 Selenium Webdriver(Java) 自动化 Web 应用程序，但难以存储多个链接文本。下面是我的 html 代码，在插入新的之前，我必须获取所有电子邮件 ID 以进行验证。

```
<tr class="odd" >
      <td><input type="radio" name="item" value="52"></td>
      <td><a href="/Abcdef/UpdateAction.do?userno=52">abcd.xyz@abc.com</a></td>
      <td>Abcd Xyz</td>
      <td>internal</td>
</tr>
<tr class="even" >
      <td><input type="radio" name="item" value="151"></td>
      <td><a href="/Abcdef/UpdateAction.do?userno=151">klmn.opqr@abc.com</a></td>
      <td>Klmn Opqr</td>
      <td>internal</td> 
```

. .

同样，它有大约 20 个链接文本（电子邮件 ID），并且需要存储这些电子邮件 ID 以进行验证。

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T17:52:37.143

1.  我会尝试找到表并将其存储在`WebElement`变量中。让我们调用变量`table`
2.  然后，在表内尝试调用`List<WebElement> emails = table.findElements(By.partialLinkText("0"));`
3.  所有的电子邮件都应该以`WebElement`类的形式存储在这里
4.  要以可读形式获取邮件，您可以调用`getText`列表中的每个项目

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-07T11:01:54.977

Thanks for your earlier reply.

I used below code to print all linktext's with in table.

```
 WebElement table = driver.findElement(By.id("table_id"));
 List<WebElement> emails = table.findElements(By.tagName("a")); 
 for(WebElement tdElement : emails) { 
 System.out.println(tdElement.getText()); 
 } 
```

# java - 输入新条目时需要更新部分页面

> ID：11829964
> 
> 赞同：0
> 
> 时间：2012-08-06T14:09:43.543
> 
> 标签：java, jsf, jakarta-ee, glassfish

我正在尝试创建一个网站，用户可以在其中发布他们正在寻找的东西。

在网站的主页上，我希望有一个“实时”部分。这基本上意味着每次发布新条目时它都会更新，因此查看该页面的任何人都可以实时查看所有帖子。

我正在使用 GlassFish 3 和 JSF 2.0 做网站。我现在正在学习 JSF 和 Java EE，因此使用它们的解决方案将是最好的，因为这是我现在所知道的。但是，我愿意学习你能提出的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:12:59.463

一种解决方案是使用轮询。查看[Richfaces](http://www.jboss.org/richfaces/)组件库和[a4j:poll](http://docs.jboss.org/richfaces/latest_4_0_X/Component_Reference/en-US/html/chap-Component_Reference-Actions.html#sect-Component_Reference-Actions-a4jpoll)组件。在特定时间范围内，`ajax`会调用服务器以返回最新帖子。然后只更新页面的所需部分。

[链接](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/a4j_poll.html)到开发人员指南。

一个更复杂的解决方案是使用[a4j:push](http://docs.jboss.org/richfaces/latest_4_0_X/Component_Reference/en-US/html/chap-Component_Reference-Actions.html#sect-Component_Reference-a4jpush-Handling_a_push_notification)但如果你真的需要它，请使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T17:11:15.643

我同意Petar的回答。使用轮询将使页面定期查询服务器以刷新自身。您也可以使用 primefaces 进行一些投票：http: [//www.primefaces.org/showcase-labs/ui/poll.jsf](http://www.primefaces.org/showcase-labs/ui/poll.jsf)

来自上面链接的示例：

```
<h:form id="form">  
    <h:outputText id="txt_count" value="#{counterBean.count}" />  

    <p:poll interval="3"   
            listener="#{counterBean.increment}" update="txt_count" />  
</h:form> 
```

可以看到，“counterBean”的“increment()”方法每隔3秒就会被调用一次，并且每次更新txt_count文本为新值。

# .net - 在 .NET Full 框架上对 .NET CF 应用程序进行单元测试

> ID：11829965
> 
> 赞同：1
> 
> 时间：2012-08-06T14:09:47.037
> 
> 标签：.net, unit-testing, compact-framework

如何在 .NET Full Framework 上运行的 Visual Studio 2008 中为 .NET CF 3.5 应用程序的某些非可视类创建单元测试

或者只能在模拟器中测试这个类？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:59:49.297

您无法获得完整的框架 mstest 基础架构来加载 CF 程序集（无论如何都不容易）。一般来说，这就是我们对非 UI、非 CF 特定的 CF 代码进行单元测试时所做的。

1.  创建一个全框架类库项目
2.  从您的 CF 项目中添加源文件
3.  为全框架项目创建单元测试项目
4.  运行单元测试

# c++ - C++ WinAPI waveOutGetVolume

> ID：11829971
> 
> 赞同：-2
> 
> 时间：2012-08-06T14:10:00.593
> 
> 标签：c++, winapi, c++builder

我的程序需要检索卷信息。我一直在使用各种方法，`waveOutGetVolume()`但没有运气提取 0 到 100 之间的值。

我也尝试过使用 HIWORD 和 LOWORD 值。

例如，我的音量目前为 14%。我的程序显示一个完全随机的数字。

```
DWORD volume;
HWAVEOUT hwo;
waveOutGetVolume(hwo, &volume); 
```

有人可以告诉我哪里出错了吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:37:56.990

仔细阅读[文档](http://msdn.microsoft.com/en-us/library/aa909806.aspx)，上面写着：

> pdw卷
> 
> 指向要填充当前音量设置的变量的指针。该位置的低位字包含左声道音量设置，高位字包含右声道设置。0xFFFF 值表示全音量，0x0000 值表示静音。
> 
> 如果设备不支持左右音量控制，则指定位置的低位字包含单声道音量级别。

因此，您需要使用适当的掩码对结果进行位和结果：

```
DWORD volume;
HWAVEOUT hwo;
// retrieve the handle
waveOutGetVolume(hwo, &volume);
// don't forget to check for errors

WORD left_channel_volume = volume & 0xffff;           // extract the low order word
WORD right_channel_volume = (volume >> 16) & 0xffff;  // extract the high order word

unsigned left_volume_percent = left_channel_volume / 0xffff; 
```

# ios - 如何拦截触摸事件并转发到指定的UIView

> ID：11829973
> 
> 赞同：1
> 
> 时间：2012-08-06T14:10:09.807
> 
> 标签：ios, ios4, uiscrollview

我有透明的`UIView`（我们称之为`receiver`）分层在具有`UIScrollView`（`scrollView`）的`UIScrollViewDelegate`（`scrollViewDelegate`）上。

在某些情况下，`receiver`需要消耗落在它上面的触摸事件。在其他情况下，我需要收集一些位置信息，然后将触摸事件原封不动地传递给`scrollView`或欺骗事件，这些事件将包括拖动运动并导致适当的减速等。我该如何实现这一点？

* * *

**编辑 - 迄今为止的研究：**

我在`scrollViewDelegate`'s中放置了一个断点`scrollViewWillBeginDragging`，它显示调用序列为：

```
(...various calls filtering down from UIApplicationMain...)
[UIWindow sendEvent:]
[UIWindow _sendGesturesForEvent:]
...
[UIGestureRecognizer _delayedUpdateGesture:]
[UIGestureRecognizer _updateGestureWithEvent]
_UIGestureRecognizerSendActions
[UIScrollView handlePan:]
[UIScrollView _updatePanGesture]
....
[UIScrollViewDelegate scrollViewWillBeginDragging:] 
```

理想情况下，我希望能够`UIScrollView handlePan:`使用适当的信息进行调用，但我找不到任何详细说明如何正确调用的信息`handlePan`（我认为它必须是可能的，因为`_UIGestureRecognizerSendActions`它是吗？）。

或者，我想我可以子类`UIGestureRecognizer`化，但这似乎是一种相当笨拙的方式（我也不知道如何传达触摸事件的顺序）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-06T14:25:45.547

最简单的方法是将您`UIScrollView`的接收器放在接收器内部。

然后，您可以执行以下两项操作之一：

*   如果您提前知道不应将事件传递给它`userInteractionsEnabled`，请将滚动视图设置为。`NO`事件将被传递到您的接收者视图。

*   覆盖`hitTest:withEvent:`以记录传入事件。要压制它们，只需返回您的接收器（表明它应该是这些事件的目标）；为了传递它们，从 super 的实现中返回值（它将在适当的时候正确地将滚动视图识别为目标）。

如果你真的需要合成事件，你可以构造它们并将它们传递给`UIApplication`'s`- (void)sendEvent:`方法。（直接调用`handlePan:`可能行不通，因为它需要 a `UIGestureRecognizer`，所以很难伪造。）

# asp.net - asp.net For each inside For each

> ID：11829974
> 
> 赞同：0
> 
> 时间：2012-08-06T14:10:10.183
> 
> 标签：asp.net, vb.net

我有以下内容：

```
 For Each dist In dtDataTableDist.Rows

      For Each det In dtDataTableDet.Rows

        If Not (det("LoginName") Is dist("LoginName")) Then Continue For

      Next
    Next 
```

在我拥有的内在 For Each

```
 Not (det("LoginName") Is dist("LoginName")) Then Continue For 
```

我在这里要做的是说，如果每个内部的登录名与外部的登录名不同，那么跳过内部循环中的其余代码并继续每个内部循环的下一个内部。

尽管 det("LoginName") 和 dist("LoginName") 都具有相同的值“899”，但我认为它不会跳过内部循环中的其余代码，但确实可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:13:25.520

`Is`用于比较**对象**...换句话说，两个对象引用完全相同的对象。

你应该使用正常的比较......

```
If Not (det("LoginName") = dist("LoginName")) Then Continue For 
```

或者...

```
If det("LoginName") <> dist("LoginName") Then Continue For 
```

# php - Drupal 用户对象

> ID：11829976
> 
> 赞同：0
> 
> 时间：2012-08-06T14:10:10.313
> 
> 标签：php, drupal-7

我正在尝试在 Drupal 7 中创建自定义用户配置文件。其中一个字段引用了用户对象，我无法弄清楚这样做的语法是什么。我读过应该使用'->'，但我不确定如何使用。

a的结构`print_r($user_object)`在： http: [//pastebin.mozilla.org/1741565](http://pastebin.mozilla.org/1741565)

我正在尝试获取内部数据`field_country[data]`- 只是不知道该怎么做。

此外，当我尝试访问时`$user_object[user_relationships_ui]`，什么都看不到。它不会抛出错误，但也不会打印任何内容。

谢谢您的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T09:26:40.810

我想出办法的方法是将对象转换为数组 -

```
$user_object= (array) $user_profile['field_country']['#object']; 
```

之后，我可以将其作为普通数组访问。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-06T14:14:54.563

php 中对象的属性必须由`->property_name`. 并且，在使用关联数组时，使用`['key_name']`.

在这里，`$user_object[0]['user_relationship_ui']['#type']`给你`#type`.

不要将对象与关联的数组混淆。

编辑：进一步解释，

参见第 18、19 行：

```
[field_country] => Array (
                    [#theme] => field 
```

见第 31、32 行：

```
[#object] => stdClass Object (
                            [uid] => 1 
```

不同的是，如果你想访问`#theme`，你必须使用`['#theme']`. 如果你想访问`uid`，你必须这样做`['#object']->uid`。

# wordpress - wordpress 为自定义模板添加简码

> ID：11829978
> 
> 赞同：0
> 
> 时间：2012-08-06T14:10:16.240
> 
> 标签：wordpress, plugins

是否可以将短代码添加到自定义模板以包含在文章中？

```
lets say I have a page.example.php custom template 
```

我想创建一个插件，当短代码包含在文章中时会返回此模板。

```
function get_Example_Template() {

        $shortcode_content=get_template_part('page','example')
    return $shortcode_content;
}

add_shortcode( 'shortcode_content', 'get_Example_Template'); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:44:07.830

在插件中声明一个初始化为 false 的变量。第一次调用函数时，将其设置为 true。每次调用该函数时，只有当该变量为 false 时才会继续。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-04T20:35:52.520

答案在这里：[Calling WordPress get_template_part from inside a shortcode function 首先呈现模板](https://stackoverflow.com/questions/12325348/calling-wordpress-get-template-part-from-insde-a-shortcode-function-renders-temp)

问题是 get_template_part 立即回显，并且短代码需要返回。输出缓冲应该可以解决这个问题。

# java - 关于在检索列表时出错

> ID：11829979
> 
> 赞同：-2
> 
> 时间：2012-08-06T14:10:18.940
> 
> 标签：java

> **可能重复：**
> [关于并发修改异常](https://stackoverflow.com/questions/11828639/regarding-concurrent-modification-exception)

我在下面的代码中遇到了这个并发修改异常错误，因为我试图在迭代时删除元素..代码在下面..

```
 List  list=new ArrayList ();
          list.add(new Emp("Saral","Trainer",34500));
          list.add(new Emp("Saral","Trainer",36000));
          list.add(new Emp("Saral","Trainer",33000));
          list.add(new Emp("Sachin","Programmer",24000)); 
```

我检索的方式是..

```
System.out.println("Content of list are : ");
          ListIterator itr1=list.listIterator();
          while(itr1.hasNext())
          {
              list.add(new Emp("Anand","Manager",56000)); //
            Emp e=(Emp)itr1.next();  
            e.display();
          } 
```

您能否建议如何避免此错误..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-08-06T14:14:20.493

不能修改 a`List`并使用`Iterator`在修改之前创建的`List`a `List`，否则`ConcurrentModificationException`将抛出 a 。为避免，请勿`list.add()`在`while`.

由于违规的目的`while`是打印列表的内容，因此没有理由使用`Iterator`：

```
List<Emp> list = new ArrayList<Emp>();  

for (Emp e: list)
{
    e.display();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:14:06.907

您正在尝试在迭代时修改列表，这可能会导致`ConcurrentModificationExceptio`n

```
list.add(new Emp("Anand","Manager",56000)); // 
```

# python - 将数据从 python 管道传输到外部命令

> ID：11829982
> 
> 赞同：5
> 
> 时间：2012-08-06T14:10:32.333
> 
> 标签：python, subprocess, external-process, piping

我已经阅读了 subprocess.Popen 上的所有内容，但我认为我遗漏了一些东西。

我需要能够执行一个 unix 程序，该程序从 python 脚本中创建的列表中读取数据流，并将该程序的结果写入文件。在 bash 提示符下，我一直这样做没有问题，但现在我试图从一个 python 脚本中执行此操作，该脚本在进入这个阶段之前预处理了一些二进制文件和大量数据。

让我们看一个不包括所有预处理的简单示例：

```
import sys
from pylab import *
from subprocess import *
from shlex import split

# some arbitrary x,y points
points = [(11,31),(13,33),(15,37),(16,35),(17,38),(18,39.55)]

commandline = 'my_unix_prog option1 option2 .... > outfile'
command = split(commandline)

process = Popen(command, stdin=PIPE, stdout=PIPE, stderr=PIPE)
print process.communicate(str(points)) 
```

这将在 bash 中执行的方式是：

```
echo "11 31
      13 33
      15 37
      16 35
      17 38
      18 39.55" | my_unix_prog option1 option2 .... > outfile 
```

将数据输入 unix prog 的方式也很重要，我应该格式化为由空格分隔的 2 列。

任何帮助表示赞赏...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-06T15:18:59.997

解决了！

[在Dhara](https://stackoverflow.com/users/1196900/dhara)和[xhainingx](https://stackoverflow.com/users/1013719/xhainingx)的帮助下，我能够解决这个问题：

```
import sys
from pylab import *
from subprocess import *
from shlex import split

# some arbitrary x,y points
points = [(11,31),(13,33),(15,37),(16,35),(17,38),(18,39.55)]

commandline = 'my_unix_prog option1 option2 ....'
command = split(commandline)

process = Popen(command, stdin=PIPE, stdout=open('outfile', 'w'), stderr=PIPE)
for p in points:
    process.stdin.write(str(p[0]) + ' ' + str(p[1]) + '\n')

print process.communicate() 
```

这很好用，谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:13:53.860

怎么样

```
for p in points:
    process.stdin.write(str(p[0]) + ' ' + str(p[1]) + '\n')

print process.communicate() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-06T14:16:08.963

您需要格式化输入以正确通信。

`str`当您打印不是您想要的元组列表时，将保留特殊字符。

```
>>> print str([(1,2), (3,4)]) 
[(1,2), (3,4)] 
```

尝试这个：

```
print process.communicate("\n".join(["%s %s"%(x[0], x[1]) for x in points]) 
```

# objective-c - 使用 ARC 的 NSNumber 的 init 或 numberWith*

> ID：11829983
> 
> 赞同：0
> 
> 时间：2012-08-06T14:10:33.927
> 
> 标签：objective-c, ios, initialization, nsnumber

我正在比较 NSNumber initWith* 方法和 numberWith* 方法，特别是在 ARC 下。我有一种感觉，它们现在是相同的。

```
{
    NSNumber* myInitNumber = [[NSNumber alloc] initWithInt:55];
    NSNumber* myNumbNumber = [NSNumber numberWithInt:55];
    // use here
} 
```

在最后一个大括号处，两个指针都超出了范围，因此两个引用计数都降为零并被释放。

如果它们相同，我应该使用哪个偏好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:13:55.580

```
 [NSNumber numberWithInt:42] 
```

相同，因为它是在非 ARC 项目下自动发布的。但这对启用 ARC 的项目没有影响。

# ruby - 以编程方式调用 Sass::Exec::SassConvert 生成错误的语法

> ID：11829984
> 
> 赞同：2
> 
> 时间：2012-08-06T14:10:53.897
> 
> 标签：ruby, sass

```
Sass::Exec::SassConvert.new(["{path_to_scss_file}.scss", "{path_to_css_file_to_generate}.css"]).process_result 
```

当我从 ruby​​ 脚本中运行以下命令时，生成的文件包含“sass”-syntax 而不是有效的 css 当我尝试添加 set_opts 命令来指定“-F scss -T css”时，只是为了确保转换器知道怎么办，它会抛出一个错误：

```
NoMethodError: undefined method `banner=' for ["-F scss -T css"]:Array 
```

目标是从 ant 构建脚本中将 scss 文件编译为 css 文件。除了错误的语法问题外，一切正常。

我在这里有什么遗漏吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-07T14:56:33.057

我重写了脚本以使用`Sass::Engine`而不是`SassConvert`.

在查看了 SassConvert 类的代码后，以下片段为我指出了解决方案：

```
unless [:scss, :sass].include?(@options[:to])
    raise "Unknown format for sass-convert --to: #{name}"
end 
```

SassConvert 类似乎只将 CSS 文件转换为 .scss 或 .sass，而不是相反。

此外，在调用时添加选项标志的正确方法`Sass::Exec::SassConvert`是执行以下操作：

```
sassConvert = Sass::Exec::SassConvert.new(["-F scss", "-T sass", "{path_to_from_file}", "{path_to_file_to_generate}"]
sassConvert.parse!
sassConvert.process_result 
```

# c# - 用于更改多个不同表中具有不同名称的列的 DB 值的脚本

> ID：11829989
> 
> 赞同：0
> 
> 时间：2012-08-06T14:11:09.200
> 
> 标签：c#, sql-server-2008

有点新的数据库脚本，

1.  我想要一个脚本，它可以显示 10 列中的 10 列。
2.  用于从 10 列更改 10 列的值的脚本。

我知道我可以使用 Select 语句，但这是最佳做法吗？

**编辑**

我累了

```
Select

table1.column1,
table1.column2,
table2.column1
    ......
    table100.column100 FROM    table1,table2,.....table100; 
```

> 但收到此错误
> 
> 消息 208，级别 16，状态 1，第 1 行无效的对象名称“table1”。

**回答**

少数表被误删

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-06T14:24:12.730

```
1.Selecting 10's of columns from 10's of columns -- select * from tablename is good way.
But this is not good when you consider the query for performance point of view.If your reuirement is to get all the columns of a table then you can use select * from tablename.

2.This is quite obvious that you have to use all 10 columns if u have to change their values.
UPDATE tablename SETcol1=value1,
       col1=value1,
       col1=value1,
       ..... 
```

# javascript - JS 随机函数和砌体导致问题

> ID：11829992
> 
> 赞同：0
> 
> 时间：2012-08-06T14:11:35.423
> 
> 标签：javascript, jquery, jquery-masonry

我在下面使用此代码，因此将图像随机放置在容器内，彼此之间。效果很好，但是，在大多数情况下，该功能无法加载和访问，并且所有图像在页面上相互重叠显示很尴尬。

```
$(document).ready(function(){
  $('.each-image').each(function() {
    $(this).css({ 
       'margin-top':  Math.floor((Math.random() * 300) +1) + 'px', 
       'margin-left': Math.floor(Math.random() * 400 + 0) + 'px' });
  });
}); 
```

我还结合使用砖石来避免重叠。首先调用砌体并组织图像，然后随机函数扩展它们之间的距离。

砌体代码：

```
$(document).ready(function(){
var $container = $('.content-side.individual-pages');

$container.imagesLoaded( function(){
    $container.masonry({
    itemSelector : '.each-image',
    columnWidth: 30,
    isAnimated: true
  });
});
}); 
```

这是该项目的链接：http: [//www.sarahstaton.com/exhibitions-installations/](http://www.sarahstaton.com/exhibitions-installations/)如果您刷新，您会看到有时它有效，有时则无效。

我的问题，真的，是我是否应该使用其他东西，或者我能做些什么来收紧随机函数。

谢谢，R

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T14:22:02.347

代码中没有任何内容可以保证图像不会相互重叠，我可以看到。

删除 Masonry 代码并通过“每个图像”的集合来刺激，并保证您在每个图像上使用唯一的边缘顶部/或您想要的方式。

```
$(document).ready(function(){
  var i = 0;
  $('.each-image').each(function() {
    i++;
    $(this).css({ 
       'margin-top':  (Math.floor((Math.random() * 300) +1) * (i*400)) + 'px', // Or change the facator to the images size
       'margin-left': Math.floor(Math.random() * 400 + 0) + 'px' });
  });
}); 
```

# macos - 如何检查文件是否在 macOS 下被复制

> ID：11829993
> 
> 赞同：5
> 
> 时间：2012-08-06T14:11:36.737
> 
> 标签：macos, file, fuser

我们网络上的用户通过 AFP 连接将服务器上的文件复制到名为“DropBox”的目录中，只需使用 Finder 拖动它们即可。

在服务器上运行的脚本会定期检查“DropBox”中是否存在新文件，然后将它们与**mv**一起移动到其他目录中。

脚本如何检查文件是否正在被复制（并在将其移走之前等待该过程完成）？

我尝试使用**fuser*文件名***但没有成功。如果文件副本是由远程机器发出的，则**fuser**报告没有进程正在使用该文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-12-20T17:59:21.747

这个问题有两种方法：

### 1.标记文件名以告诉文件是部分的：

当文件被写入（移动/复制）到 DropBox`.part`时，扩展名会添加到名称中。当写作结束时，`.part`扩展名被删除。仅当`.part`扩展名**不**存在时，其他进程才对文件进行操作。

### 2.检查文件大小；如果它是恒定的，那么写操作就结束了*（也许）*

这比 (1) 更不准确且更复杂，但如果选项 1 由于某种原因不可行，则提供了一个很好的猜测。对于保管箱中的每个文件，都会记录大小未更改的时间。当文件大小增加时，时间值将重置为零。当没有写入文件时，时间值保持不变。如果一个文件至少没有增长（30 秒，1 分钟，当然你能承受的时间越多越好），那么写操作就结束了，文件可以被管理了。当传输中断时，这种方法会失败。

# iphone - 将时间添加到 NSDate

> ID：11829994
> 
> 赞同：1
> 
> 时间：2012-08-06T14:11:38.547
> 
> 标签：iphone, nsdate, nsdateformatter

我在一个视图中有两个 UIDatePicker。一个用于获取日期，另一个用于时间。我得到了正确的时间。现在我需要用日期附加时间来设置本地通知的触发日期。在附加两者时，我在 NSDate 中得到空值

```
NSDateFormatter *dateFormat=[[NSDateFormatter alloc]init];
[dateFormat setDateFormat:@"MMM,dd YYYY HH:mm a"];
[dateFormat setLocale:[NSLocale currentLocale]];
[dateFormat setTimeZone:[NSTimeZone systemTimeZone]];
NSDate *tempDate = [dateFormat dateFromString:[NSString stringWithFormat:@"%@ %@",txtDate.text,txttime.text]];
localNotif.fireDate = tempDate; 
```

而 txtDate.text 是 2012 年 8 月 6 日，而 txtTime.text 是晚上 7:04。我将 tempDate 设为空。我为此尝试了各种日期格式。请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-06T14:16:59.153

`YYYY-MM-dd HH:mm:ss`不匹配

> 2012 年 8 月 6 日下午 7:04

它应该是`MMM,dd YYYY HH:mm a`

也因为你的 pm 是小写的，你可能需要设置日期格式化程序的`AMSymbol`和属性`PMSymbol`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-06T14:29:13.950

如果有帮助，请检查此。

```
MMM,dd yyyy HH:mm 
```