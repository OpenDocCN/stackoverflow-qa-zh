# StackOverflow 问答 10375000-10375999

# php - 使用 codeigniter/php 在服务器中打开文件

> ID：10375006
> 
> 赞同：2
> 
> 时间：2012-04-29T18:57:58.700
> 
> 标签：php, file, codeigniter, header

**我想要做**的：让用户点击一个链接，它会进入一个函数，它还带有一个 GET 文件 ext 和文件 id（id 是它在服务器上的名称）。然后，该功能在新选项卡中打开该文件，如果无法打开，则下载该文件。

**我试过的：** Codeigniters read_file() 函数。还：

```
 header('Content-type: application/pdf');

 header('Content-Disposition: attachment; filename="1.pdf"');

 readfile('1.pdf'); 
```

但这不起作用。或者它确实，我不知道如何正确配置它。

**文件在哪里：**有一个名为 uploads 的文件夹。codeigniter 的上传和应用程序文件夹位于同一级别。

我正在使用代码点火器。文件可以是 gif、jpg 或 pdf。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T18:59:41.217

如果你想要一个新窗口：

```
echo "<script language='text/javascript'>
        window.open('" . $filepath . "');
      </script>"; 
```

或者只是一个重定向：

```
echo "<script language='text/javascript'>
        document.location = '" . $filepath . "';
     </script>"; 
```

# javascript - Javascript XML 解析器不起作用

> ID：10375014
> 
> 赞同：0
> 
> 时间：2012-04-29T18:59:37.853
> 
> 标签：javascript, xml, parsing, dom

我知道互联网上有很多问题和文章讨论这个问题，但我不知何故无法让它发挥作用。我很确定我错过了一些基本的东西，但我找不到它。

解析本身：

```
var str="<article>Some article</article><other>Other stuff</other>";
var xmlDoc = null;
if (window.DOMParser) {
            var parser = new DOMParser();
            xmlDoc = parser.parseFromString(str,"text/xml");
        } 
else if (window.ActiveXObject) {
            xmlDoc = new ActiveXObject ("Microsoft.XMLDOM");
            xmlDoc.async = false;
            xmlDoc.loadXML(str);
        }

var node = xmlDoc.getElementsByTagName("article")[0].childNodes[0].nodeValue;
alert (node); 
```

但它不起作用，FF 说：

```
xmlDoc.getElementsByTagName("article")[0] is undefined 
```

此外，如果我像这样使用 str ，它也可以工作：

```
var str="<article>Some article</article>"; 
```

所以问题是，为什么它不起作用？即使我只将一个字符附加到 str 变量的末尾，解析也无法正常工作。您能否还指出一些有关此行为的有用教程？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T19:04:14.480

您的字符串不是有效的 XML，因为它有多个根节点。你的意思是这样的：

```
<article><name>Some article</name><other>Something else</other></article> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:04:22.220

尝试使用

```
var str="<root><article>Some article</article><other>Other stuff</other></root>";

var node = xmlDoc.documentElement.getElementsByTagName("article")[0].childNodes[0].nodeValue;

documentElement property returns the root tag of an xml document , once you get the root tag, next you can extract elements by tag name , child nodes .... 
```

# blackberry - 如何使用黑莓振动功能进行短调？

> ID：10375015
> 
> 赞同：0
> 
> 时间：2012-04-29T18:59:40.420
> 
> 标签：blackberry, vibration

我想在我的比赛获胜后播放一点振动叮当声，有人有链接或知道我该怎么做吗？这是一首非常短的歌曲，所以代码越简单越好！多谢你们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-08T09:43:21.963

这是您可以尝试的代码片段

```
package ravi.vibrationClass;
import javax.microedition.lcdui.*;
import javax.microedition.midlet.*;

public class Vibrate extends MIDlet implements CommandListener{
    Form form;
    Display disp;
    Command vib,exit;
    public void startApp() {
        form = new Form("Vibration");
        disp = Display.getDisplay(this);
        exit = new Command("Exit", Command.EXIT, 1);
        vib = new Command("Vibrate", Command.OK, 1);
        form.append("Press \"vibrate\" to make the phone vibrate");
        form.addCommand(vib);
        form.addCommand(exit);
        form.setCommandListener(this);
        disp.setCurrent(form);

    }

    public void pauseApp() {
    }

    public void destroyApp(boolean unconditional) {
        notifyDestroyed();
    }

    public void commandAction(Command c, Displayable arg1) {
        if(c == vib){
        disp.vibrate(125);
        }else if(c == exit){
        destroyApp(true);
        }

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:57:02.030

检查以下链接：

*   [`Creating a Blackberry Game - Let’s Hear It!`](http://www.toniwestbrook.com/archives/75)，描述了如何做声音和振动处理。

*   [`Play audio in a BlackBerry device application.`](http://docs.blackberry.com/en/developers/deliverables/17968/Play_audio_in_a_BB_device_app_1222359_11.jsp)

*   [`Playing a sequence of tones.`](http://docs.blackberry.com/en/developers/deliverables/17968/CS_playing_a_sequence_of_tones_739578_11.jsp)

# django - 获取数据库 django 模型对象是从

> ID：10375019
> 
> 赞同：7
> 
> 时间：2012-04-29T18:59:51.580
> 
> 标签：django, django-models

我有一个使用多个数据库的应用程序。一旦模型实例对象在内存中，我如何确定它来自哪个数据库？具体来说，我想知道这一点，以便在模型类的方法中使用。

例子：

```
class book(Models.model):
    newdate = models.DateField(default=date.today())
    type = models.CharField(
                            max_length=30,
                            choices=BOOK_TYPE,
                            default = 'novel',
                            )
    def get_current_student(self):
        if not hasattr(self,'_current_student'):
            try:
                self._current_student = clickerlog.objects.using(SELF.ORIGIN_DATABASE).get(book=self.pk,end__isnull = True).student
            except:
                self._current_student = none
        return self._current_student

class booklog(Models.model):
    start = models.DateTimeField(
                                 default=datetime.now(),
                                 verbose_name = 'start time'
                                 )
    end = models.DateTimeField(null=True,blank=True,)
    book = models.ForeignKey(book)
    student = models.ForeignKey(student,
                              limit_choices_to = {'isactive':True}) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-04-29T19:19:08.007

经过一点点挖掘后，我发现了它：

```
self._state.db 
```

# android - 算法数据同步（SQLite 到在线数据库）

> ID：10375020
> 
> 赞同：4
> 
> 时间：2012-04-29T18:59:55.277
> 
> 标签：android, algorithm, sqlite, synchronization

我正在创建一个与在线服务器同步数据的应用程序。最好的方法是什么？

我想拥有一个本地数据库（SQLite），它将与具有相同结构的在线数据库同步。在线 XML 或在线数据库会更好吗？

其他问题。是否有任何已知的数据同步算法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-05T21:34:50.987

最佳实践是使用内容提供者为您的应用程序建模，然后连接示例同步适配器。 [http://developer.android.com/resources/samples/NotePad/index.html](http://developer.android.com/resources/samples/NotePad/index.html) [http://developer.android.com/resources/samples/SampleSyncAdapter/index.html](http://developer.android.com/resources/samples/SampleSyncAdapter/index.html)

您可以在 Android SDK 中找到这些示例。在日食中，

```
File >
New >
Android Project >
Create project from existing sample >
Android 2.1 >
Select desired project 
```

（一旦你使用平板电脑和 Android 4.0，情况就会开始改变，所以 7 或 8 是你最好的选择。）

下面的博客文章很好地解释了同步适配器。 [http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/](http://www.c99.org/2010/01/23/writing-an-android-sync-provider-part-1/)

如果您想快速开始，解析您的 XML，然后围绕它包装您的 SQLite 实现，请使用以下链接。 [http://andrewgertig.com/2010/07/android-and-ruby-on-rails/](http://andrewgertig.com/2010/07/android-and-ruby-on-rails/)

# python - 相当于 Python 中 PHP 的 $_SERVER['HTTP_HOST'] ，或者在 python django 中获取域名

> ID：10375024
> 
> 赞同：0
> 
> 时间：2012-04-29T19:00:07.743
> 
> 标签：python, django

我正在使用 Python 和 Django 框架。当我想使用超链接时，我不应该手动编写完整的 URL 对吗？我必须使用一些返回域名的函数，并手动连接到它的路径。那么，我怎样才能得到域名呢？
喜欢：

> [http://www.domain.com/path/to/file.ext](http://www.domain.com/path/to/file.ext)

为此，我想写：

```
"http://"+somefunction()+"/path/to/file.ext" 
```

`$_SERVER['HTTP_URI']`在 Python 中是否有等价物。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:13:53.200

对于当前请求的原始主机，您可以使用[`request.get_host()`](https://docs.djangoproject.com/en/1.4/ref/request-response/#django.http.HttpRequest.get_host)或直接访问`request['HTTP_HOST']`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:08:36.263

对于您的需求，django 提供[站点](https://docs.djangoproject.com/en/dev/ref/contrib/sites/)框架叉

```
>>> from django.contrib.sites.models import Site
>>> Site.objects.get_current().domain
'example.com'
>>> 'http://%s/path/to/file.ext' % Site.objects.get_current().domain
'http://example.com/path/to/file.ext' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:38:43.980

没有直接回答你的问题，但是 Django 有很多方法可以为你处理 URL 构造，所以你不需要硬编码。

在您的 Python 代码中：

```
from django.core.urlresolvers import reverse
from django.http import HttpResponseRedirect

def my_redir_view(request):
    return HttpResponseRedirect(reverse('another_view')) 
```

在模板内部：

```
<a href="{% url 'logout' %}">Logout</a> 
```

构建绝对 URL（在相对罕见的情况下需要它们）：

```
redirect_uri = request.build_absolute_uri(reverse('openid_auth')) 
```

通常，您不想手动构建 URL - 以上方法是您的朋友。

# cloud9-ide - 在 C9 IDE 中设置断点和自动完成

> ID：10375026
> 
> 赞同：2
> 
> 时间：2012-04-29T19:00:23.237
> 
> 标签：cloud9-ide

刚开始使用 cloud 9 IDE，但是我试过了，我就是不能做简单的断点。我在不同的教程中寻找解决方案，在 YouTube 上似乎出了点问题，因为设置断点应该通过单击鼠标来完成，但什么也没有，它应该非常简单，但是......无论如何都不会发生我努力。因此，请对此提出任何建议。

此外，代码自动完成功能不起作用，因此再次欢迎您的帮助。

Rgds

罗恩

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-04T15:30:40.807

点击排水沟（灰色区域）应该可以工作。然后运行应用程序应该会遇到断点。这目前仅适用于 node.js 开发。当您按 ALT+SPACE 时，代码完成工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T01:37:24.417

你在尝试使用 JavaScript 文件吗？

我尝试使用 ruby​​(.rb) 文件设置断点，但没有成功，但使用 JavaScript 文件可以。

我不确定 C9 完全支持哪种语言。也许您应该先尝试使用 JavaScript 文件。

# java - Google App Engine 奇怪的延迟

> ID：10375030
> 
> 赞同：6
> 
> 时间：2012-04-29T19:01:14.387
> 
> 标签：java, google-app-engine, appstats

我改进了很多代码，现在所有的 API 都运行得非常快，我还添加了 memcache，我的命中率很高。但有时我会遇到毫无意义的延迟。

我在这里附上了最重要的 appstats 屏幕截图：运行 90 毫秒的 RPC 总共需要超过 20 秒；这怎么可能？我应该在哪里寻找这些延误的根源？

我真的被卡住了，因为我不明白 RPC 之间发生了什么，而且我不知道我还能做些什么来获取更多信息。

只是一个想法：每个 HTTP 调用都由同一个 GAE 实例处理，对吧？因为我的实例花了很多时间来预热..但我不认为这是相关的

顺便说一句：我正在用 Java 编码。

![appstats 统计](../Images/5536015df6a683b062fc0194f4130152.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:14:10.853

通常，appstats 中间未解释的“漏洞”是您的代码正在执行。
Appstats 记录每一个 rpc 的进入和退出，他无法记录的区域是你实际运行的代码。

您是否有应用程序在这两个调用之间的时间的日志？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T19:33:19.243

巨大的“无法解释的”延迟几乎总是预热请求吞噬资源。检查您的 appengine 日志以查看在预热时使用了多少 api_ms 和 cpu_ms。

您可以通过增加 appengine 控制面板中的最大挂起延迟来避免预热。允许更高的延迟意味着请求将在触发新实例之前等待更长的时间。这可能会使每个请求变慢一些，但您将避免重量级加载请求。

为了帮助处理预热请求，请确保您的 appengine-web.xml 具有：

```
<warmup-requests-enabled>true</warmup-requests-enabled> 
```

这将导致 appengine 调度程序在当前实例超载时抢先启动新实例{即它在请求转到新实例之前开始加载}。

然后，在受影响的慢 servlet 中，确保将 load-on-startup 放在 web.xml 中：

```
<servlet>
  <servlet-name>my-servlet</servlet-name>
  <servlet-class>com.company.MyServlet</servlet-class>
  <load-on-startup>1</load-on-startup>
</servlet> 
```

load-on-startup 仅确保您的高优先级 servlet 在预热请求完成后始终准备就绪。

# shell - 从纯文本准备每行文档的单个句子

> ID：10375031
> 
> 赞同：3
> 
> 时间：2012-04-29T19:01:23.263
> 
> 标签：shell, awk

我想从一般纯文本创建新版本的文档，这样每个新版本的文档每行包含一个句子。这意味着，每一行文本都包含以 结尾的字符串序列`.`。你能给我推荐一些示例脚本吗？

```
 In the beginning God created the heavens and the earth.
 Now the earth was formless and empty.  Darkness was on the surface
 of the deep.  God's Spirit was hovering over the surface
 of the waters. 
```

进入

```
 In the beginning God created the heavens and the earth.
 Now the earth was formless and empty.
 Darkness was on the surface of the deep.
 God's Spirit was hovering over the surface of the waters. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T01:52:27.843

```
awk 'BEGIN {RS = "[.] *"; ORS = ".\n"} {gsub(" *\n *", " "); if ($0 !~ /^ +$/) print}' 
```

将每个句点的文本隔开，如果有的话，用空格 ( `RS`) 分隔。

每行的输出后跟一个句点和换行符 ( `ORS`)。

为每个换行符和任何周围的空格 ( `gsub()`) 替换一个空格。

如果该行不完全由空格组成，则打印它。

`[[:blank:]]`如果要容纳制表符和空格，可以将显示空格的位置更改为（后跟星号或加号）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T09:04:21.293

一种使用方式`perl`：

```
perl -pe 's/\n\Z/ /; s/(\.)\s*/$1\n/g' infile 
```

输出：

```
In the beginning God created the heavens and the earth.
Now the earth was formless and empty.
Darkness was on the surface of the deep.
God's Spirit was hovering over the surface of the waters. 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T21:02:47.400

首先，尝试结合使用`tr`和`sed`

```
$ cat input
They're selling postcards of the hanging. They're painting the passports brown. The beauty parlor is filled with sailors. The circus is in town.

$ cat input | tr '.' '\n' | sed 's/$/\./;s/[    ]*//'
They're selling postcards of the hanging.
They're painting the passports brown.
The beauty parlor is filled with sailors.
The circus is in town. 
```

# jquery - Jquery - 删除包含链接的li

> ID：10375032
> 
> 赞同：2
> 
> 时间：2012-04-29T19:01:24.593
> 
> 标签：jquery, ajax

我在元素中有一个链接，`<li>`并希望在`<li>`单击链接时删除该元素。这是我的代码：

```
<li id='i80'>
 <div class='singleitem'>
  <img src='/css/images/image.png' width='30' height='30' />
  <div id='listtext'><h1>Title</h1></div>
  <a class='delete' id='80' href='#'></a>
  <div id='helper'></div>
 </div>
</li> 
```

还有我的 Jquery 代码：

```
$(".delete").click(function(e){
 var del_id = $(this).attr('id');
 e.preventDefault();
 $.post("/add/delete.php", { iid: del_id } ,function(data){
  if(data.status == 'deleted');
   {
     $(this).closest("li").remove();
   }
 });
}); 
```

ajax 工作正常，并且“已删除”状态正在正确发回，但是，涉及删除父级的一行`li`不起作用。有任何想法吗？谢谢。

**编辑：**

我注意到我动态添加到现有列表中的新列表项`ul`在这里不起作用。那是因为这只是在页面最初加载时加载，然后不适用于动态更新的内容？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T19:06:22.840

```
$(".delete").click(function(e){
 var del_btn = $(this);              // cahed
 var del_id = del_btn.attr('id');
 e.preventDefault();
 $.post("/add/delete.php", { iid: del_id } ,function(data){
  if(data.status == 'deleted');
   {
     del_btn.closest("li").remove(); // used
   }
 });
}); 
```

* * *

**编辑** 以适应 OP 提出的附加问题。
使用如下`.on()`方法：

```
$(".singleitem").on('click', 'a.delete', function(e){
 var del_btn = $(this);              // cahed
 var del_id = del_btn.attr('id');
 e.preventDefault();
 $.post("/add/delete.php", { iid: del_id } ,function(data){
  if(data.status == 'deleted');
   {
     del_btn.closest("li").remove(); // used
   }
 });
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T19:05:54.233

ajax 块中的 $(this) 对象不是 $(".delete") 对象。您将需要执行以下操作：

```
$(".delete").click(function(e){
 var $del_button = $(this);
 var del_id = $(this).attr('id');
 e.preventDefault();
 $.post("/add/delete.php", { iid: del_id } ,function(data){
  if(data.status == 'deleted');
   {
     $del_button.closest("li").remove();
   }
 });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:05:57.327

试试 $(this).parent().remove();

（虽然感觉就像锯掉你坐在的树枝......）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T19:06:01.987

尝试以下，你需要引用父

```
$(this).parent().remove() 
```

# assembly - 在 20 MHz(?) 时钟上添加 1 秒延迟

> ID：10375034
> 
> 赞同：3
> 
> 时间：2012-04-29T19:01:38.240
> 
> 标签：assembly, pic

编辑：PIC 16F684

好的，我有一个简单的 3 LED 二进制时钟，从 0 到 7 计数，并且想在每次打开灯之间添加大约 1 秒的延迟。

我已经确定每个灯都需要处于某种循环中，并且我必须使用计数来测量刻度和翻转等。

我*认为*时钟是 4MHz，这是手册的截图：http: [//i.imgur.com/tJatQ.png](http://i.imgur.com/tJatQ.png)

这是我的代码中的相关摘录：

```
COUNT1 EQU 20h      ; Delay counter #1
COUNT2 EQU 21h      ; Delay counter #2 
```

...

```
LOOP0
        MOVLW   TRIS_D0_D1      ; Move value defined in Constants to TRISA, to switch on LED 0.
        TRIS    PORTA           ;
        CLRF    PORTA           ; Clear all outputs.
        MOVLW   D0              ; Set the accumulator to the value of D0.
        MOVWF   PORTA           ; Move the accumulator to PORTA, to switch on LED 0.

    ; Using COUNTs to add a delay
        decfsz    COUNT1,1       ; Decrease COUNT1 by 1, and skip the next line if the result is 0.
        goto      LOOP0          ; If COUNT1 is 0, carry on. If not, go to LOOP0\.   
        decfsz    COUNT2,1       ; Decrease COUNT2 by 1, and skip the next line if the result is 0.
        goto      LOOP0          ; If COUNT1 is 0, carry on. If not, go to LOOP0. 
```

但是，我很确定我搞砸了时间，有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T18:08:59.383

假设： 处的代码`LOOP0`是您希望每次延迟执行**一次**的代码，而不是在延迟期间尽可能多地执行。我还假设您正在设置某些`COUNT1`东西`COUNT2`-您发布的代码声明了两个“变量”，但没有分配它们。

您目前拥有的代码将在`LOOP0` `COUNT1`+`COUNT2`次重复执行代码。这是因为每个循环都是独立的。这为您提供了 510 个周期的最大延迟。正如其他评论者所说，PIC16 每个周期大约执行一条指令，因此您需要延迟 1,000,000 个周期才能在 4MHz 下等待一秒钟。

如果我们考虑要等待`196392`周期的情况，我们基本上需要实现一个 16 位计数器。我们通过在循环中递减一个计数器来做到这一点。每次该循环退出时，我们都会减少另一个计数器。当两个计数器都为零时，循环返回。这是一个例子：

```
COUNT1 EQU 20h
COUNT2 EQU 21h

LOOP0
    ;do some stuff here
        ...

    ;delay loop starts here:
    ;assume COUNT1=0 and COUNT2=0
Delay_0
    decfsz COUNT1
    goto Delay_0
    decfsz COUNT2   ;COUNT1 = 0 so 0xff cycles have passed
    goto Delay_0
    goto LOOP0 ;both COUNT1 and COUNT2 = 0 - 196392 cycles have now passed 
```

分支指令如果不跳过则花费 1 个周期，如果跳过则花费 2 个周期。`goto`总是需要 2 个周期，这意味着进行一次完整计数所需的实际时间是 767 个周期 (255 * 3 + 2)。我们可以将两者所用的时间计算为 ((255 * 3 + 2) + 3) * 255 + 2。

在 Dos4Ever有一个很好[的延迟例程解释。](http://www.dos4ever.com/PICdelay/PICdelay.html)这着眼于延迟例程如何工作以及如何计算计数器值和延迟例程的成本。

最后，如果您只想要剪切和粘贴延迟例程，PIClist 上的[延迟例程生成器](http://www.piclist.com/cgi-bin/delay.exe)非常完美。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-13T00:16:01.003

上面假设两个计数器最初设置为零的两个循环的代码需要 197119 个周期（而不是 196392），对吗？

我指的是代码：

*   Delay_0 decfsz COUNT1
*   转到延迟_0
*   decfsz COUNT2
*   转到延迟_0

原因是与 count1 关联的内部循环将循环 255 次，这意味着 {255 次 3 个指令周期}加上最终的 decfsz 需要额外的 2 个周期。因此，对于这个内部循环循环通过的第一次，相关的延迟 (d1F) 将是 d1F = 255*3 + 2 = 767 个周期。这一切都发生在我们到达 count2 的 decfsz 之前。接下来，当我们达到 decfsz count2 时，将发生其余的活动；它以 decfsz count2 开头，然后是 goto Delay_0，其中“goto”将调用另一个内部循环延迟（等于 d1F）。所以这个由 decfsz count2、goto Delay_0 和 d1F 组成的三重组合将与 count2 索引值 255 相关联。然后我们不断获得更多三重组合......索引为 254，然后是索引 253......一直到count2 索引为 1。所以这意味着我们得到了 255 个三重组合。最后，我们以最终的 decfsz count2（索引为 0）终止。最终的 decfsz count2 '指令' 需要 2 个周期而不是 1。因此延迟的第二部分是 (d1F+3)*255 + 2。'3'（指令周期）是由于正常期间的 decfsz 加上 goto 指令循环。

因此，当我们将延迟的第一部分和第二部分放在一起时，我们得到：

*   d2F = d1F + (d1F+3)x255 + 2 = 767 + (767+3)x255 + 2 = 197119

现在，如果我们有多个循环，那么我们可以使用方程式：

*   d(n)_F = d(n-1)_F + {d(n-1)_F + 3}x255 + 2 = 256xd(n-1)_F + 767

和

*   d(n)_C = d(n-1)_C + {d(n-1)_F + 3}x{count_n - 1} + 2

其中 d(n)_F 或 d(n-1)_F 中的“F”表示所有计数器都用零值初始化的条件。d(n)_C 中的“C”表示第 n 个循环的计数器用我们最初选择的任何值初始化的条件。'n' 与第 n 个循环相关联。并且“n-1”与第 (n-1) 个循环相关联。

因此，如果我们有 2 个循环，则 d(1)_F 是由于循环 #1 的延迟，循环数为“完整”（即，counter1 最初为零或 256）；d(2)_F 是由于循环 #1 和循环 #2 导致的延迟，在 counter1 和 counter2 最初都等于零或 256 的情况下。

*   d(1)_C 是由于循环 #1 导致的延迟，在这种情况下 count1 使用我们最初选择的任何值进行初始化。
*   d(2)_C 是由于循环 #1 和循环 #2 导致的延迟，在 count2 使用我们最初选择的任何值初始化的情况下。

请注意，count_n 是第 n 个循环的初始计数器值。此外，如果一个特定的计数器最初是用零值初始化的，那么将该值视为“256”通常很方便。这当然是针对八位计数器的。例如，如果 count1 = 0，则可以方便地将其视为 count1 = 256（而不是 0）。

*   我们还可以定义：d(0)_F = 0，并且 d(0)_C = 0。

因此，对于 count1 = 1、count2 = 4 和 count3 = 2 的 3 循环系统，

*   d(1)_F = 256xd(0)_F + 767 = 256x0 + 767 = 767

*   d(1)_C = 0 + {0 + 3}x{1 - 1} + 2 = 2

*   d(2)_F = 256xd(1)_F + 767 = 256x767 + 767 = 197119

*   d(2)_C = d(1)_C + {d(1)_F + 3}x{4 - 1} + 2 = 2 + {767+3}x3 + 2 = 2314

*   d(3)_F = 256xd(2)_F + 767 = 256x197119 + 767 = 50463231

*   d(3)_C = d(2)_C + {d(2)_F + 3}x{2 - 1} + 2 = 199438

3循环系统是这样的：

*   Delay_0 decfsz count1
*   转到延迟_0
*   decfsz 计数2
*   转到延迟_0
*   decfsz 计数3
*   转到延迟_0

肯尼·梁

# ruby-on-rails - rails Geocoder 将单位更改为 km

> ID：10375035
> 
> 赞同：1
> 
> 时间：2012-04-29T19:01:39.473
> 
> 标签：ruby-on-rails, location

我尝试将单位从 mils 更改为 KM。我刚刚从 railscast.com 了解到这里是链接[http://railscasts.com/episodes/273-geocoder](http://railscasts.com/episodes/273-geocoder) 我正在尝试将此代码放入位置控制器文件中，但它的工作量很大。

```
Location.near(params[:search], 50, {:order => :distance, :units => :km}) 
```

![在此处输入图像描述](../Images/aa1b609d04f621f7c319ff2aa5679628.png)

# android - 在某个位置附近生成通知

> ID：10375036
> 
> 赞同：1
> 
> 时间：2012-04-29T19:01:52.073
> 
> 标签：android, location

我正在尝试构建一个代码，当用户靠近某个位置时启动通知。我用谷歌搜索了这个主题，但找不到解决方案。我正在使用以下代码，但它不起作用。

下面的代码是我的 Location 类，它的内部类是 MyLocationListener，它实现了 LocationListener

` @Override public void onLocationChanged(Location loc)
{
CharSequence from = "AlarmManager - Time's up!";
CharSequence message = "这是你的警报";

```
 loc.getLatitude();
    loc.getLongitude();

    String Text = "My current location is: " +
    "Latitud = " + loc.getLatitude() +
    "Longitud = " + loc.getLongitude();
    float radius = 500; //Distance in meters

      Location location1 = new Location("GPS");
      location1.setLatitude(loc.getLatitude());
      location1.setLongitude(location1.getLongitude());

      Location location2 = new Location("GPS");
      location2.setLatitude(22.727739);
      location2.setLongitude(75.886074);

      Float distance = location1.distanceTo(location2);
      distance = Math.abs(distance);
       if(distance < radius)
        {
            Log.d("sdsd", "task location");         
            notMan = (NotificationManager) getSystemService(NOTIFICATION_SERVICE);
            Notification n = new Notification(R.drawable.ic_launcher, "Click here for details", System.currentTimeMillis());

            Intent notificationIntent = new Intent(Location_Gps.this,Location_Gps.class);
            PendingIntent pendingIntent = PendingIntent.getActivity(Location_Gps.this, 0, notificationIntent, 0);

         n.setLatestEventInfo(Location_Gps.this, from,message, pendingIntent);
           notMan.notify(10001, n);

        }

    Toast.makeText( getApplicationContext(), Text, Toast.LENGTH_SHORT).show();
  } 
```

任何有关该主题的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T19:49:41.437

> 我正在尝试构建一个代码，当用户靠近某个位置时启动通知。

使用`LocationListener`和`addProximityAlert()`。

# c# - .net 2.0 中的 Linq 到 XML

> ID：10375038
> 
> 赞同：0
> 
> 时间：2012-04-29T19:02:07.807
> 
> 标签：c#, xml, linq-to-xml, nodes, nodevalue

有没有办法在 .net 2.0 中使用 Linq to XML？我不确定，如果不是，我该如何重新编码

```
var doc = XDocument.Load("config.xml");
var xVideo = doc
               .Element("XML")
               .Element("VIDEO");
xVideo.SetElementValue("MAPTEXTURELEVEL", 8);
doc.Save("config.xml"); 
```

不使用 Linq to XML？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T19:34:20.373

```
XmlDocument doc = new XmlDocument();
doc.Load("config.xml");    
XmlNode node = doc.SelectSingleNode("/XML/VIDEO/MAPTEXTURELEVEL[1]");
node.InnerText = "8";
doc.Save("config.xml"); 
```

不，您不能在 .net 2.0 中使用 XDocument

# graphics - 应用于圆弧的透视变换产生的曲线

> ID：10375039
> 
> 赞同：1
> 
> 时间：2012-04-29T19:02:29.800
> 
> 标签：graphics, canvas, transformation, projection, perspective

我正在尝试在其中生成一个 3D 球体的绘图，`canvas`我想在其中快速渲染：我的目标是 iPad 上的小（300 像素正方形）画布的实时性能。

大多数用于任何复杂的 HTML5 渲染的演示都使用 WebGL（与 three.js 之类的），这很棒，但在 iOS 上的支持有限（实际上，目前没有，但 Apple 在技术上可以启用它）。

`canvas`，但是，效果很好。

因此，我正在更加努力地构建一些基本的渲染功能，`canvas`因为 CSS3 给了我 HW Transform 并且`canvas`可以用于基本的纹理。我可以通过在画布上绘制来伪造照明！退了一步，因为这甚至还不是完整的硬件 T&L（DX7！...），但我仍然坚信可以构建仍然非常酷的东西。诀窍是尽可能减少几何体的数量（除其他外）。

回到手头的话题。我的实际问题非常具体。如果我想要绘制的球体离相机足够远，我可以通过它的正交投影来摆脱它。在这种情况下，我似乎可以使用弧形路径以及可用于`canvas`. 这不允许我以任何方式对球体进行纹理处理，但应该会产生漂亮的平滑曲线并且看起来不错。

如果我想将透视投影投射到图片中怎么办？这种变换会产生什么样的曲线？是否有可能使用贝塞尔曲线或圆弧路径绘制足够接近的近似曲线？

我知道球体的透视投影是椭圆。椭圆可以很容易地通过缩放圆来生成。它可能就像在给定投影参数的情况下计算出该椭圆的方程一样简单。有人可以帮我解决这个问题吗？

一个对我来说总是开放的选择是忘记弧线并用线条绘制我的线框（这`canvas`对我来说很方便抗锯齿），就像我们传统上这样做的方式一样，并且收工。例如，如果我想对我的球体进行纹理处理，也无法避免这种情况。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-02T16:27:16.953

为这条曲线寻找一个分析公式（然后尝试将其拟合到某种贝塞尔曲线）可能会越来越深地挖一个洞。

我也很确定内置曲线的性能将是可怕的，因为它们可能是使用我无论如何都会使用的线条功能的助手，所以我只会减少我对渲染和性能的控制。

# regex - preg_match 验证出生日期

> ID：10375041
> 
> 赞同：1
> 
> 时间：2012-04-29T19:02:38.353
> 
> 标签：regex, preg-match, date

到目前为止我有这个：

```
$post_dob = '19/08/1982';                      
$pattern = '/^\[0-9]{2}\/\[0-9]{2}\/\[0-9]{4}\$/';

if(!preg_match($pattern, $post_dob)){                                
    $post_dob = explode('/', $_POST[$field]);
    $post_dob = $post_dob[2] . '-' . $post_dob[1] . '-' . $post_dob[0];  
    return $post_dob;
}else{
    return false;
} 
```

**如果我输入 19/08/19823123**似乎不会出错 任何想法我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:07:40.030

尝试

```
$pattern = '@^[0-9]{2}/[0-9]{2}/[0-9]{4}$@'; 
```

但实际上，它比这复杂得多。您必须考虑闰年和月份有 30 天与 31 天等。

# objective-c - UITableView 不会显示 headerView.xib

> ID：10375043
> 
> 赞同：5
> 
> 时间：2012-04-29T19:03:15.290
> 
> 标签：objective-c, uitableview

我试图让 UITableView 显示我创建的 headerView.xib，但是在构建它之后，什么都没有显示。想让 UITableView 可编辑，并在 ItemsViewController.m 文件中添加了三个方法，但没有显示。

怎么了？提前致谢。

以下是相关文件：

ItemsViewController.h

```
#import <Foundation/Foundation.h>

@interface ItemsViewController : UITableViewController
{
  IBOutlet UIView *headerView;
}

-(UIView *)headerView;
-(IBAction)addNewItem:(id)sender;
-(IBAction)toggleEditingMode:(id)sender;

@end 
```

项目视图控制器.m

```
#import "ItemsViewController.h"
#import "BNRItemStore.h"
#import "BNRItem.h"

@implementation ItemsViewController // Incomplete implementation

-(id)init
{
  // Call the superclass's designated initializer
  self = [super initWithStyle:UITableViewStyleGrouped];
  if (self) {
    for(int i = 0; i < 5; i++) {
      [[BNRItemStore sharedStore]createItem];
    }

  }
  return self;
}

-(id)initWithStyle:(UITableViewStyle)style
{
  return [self init];
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
  return [[[BNRItemStore sharedStore]allItems]count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

  // Check for a reusable cell first, use that if it exists
  UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"UITableViewCell"];

  // If there is no reusable cell of this type, create a new one
  if (!cell) {
    cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"UITableViewCell"];
  } 

  // Set the text on the cell with the description of the item
  // that is at the nth index of items, where n = row this cell
  // will appear in on the tableview
  BNRItem *p = [[[BNRItemStore sharedStore]allItems]objectAtIndex:[indexPath row]];

  [[cell textLabel]setText:[p description]];

  return cell;
}

-(UIView *)headerView
{
  // If we haven't loaded the headerView yet
  if (!headerView) {
    //Load HeaderView.xib
    [[NSBundle mainBundle]loadNibNamed:@"HeaderView" owner:self options:nil];
  }
  return headerView;
}

-(UIView *)tableView:(UITableView *)tv viewForHeaderInSection:(NSInteger)sec
{
  return [self headerView];
}

-(CGFloat)tableView:(UITableView *)tv heightForHeaderInSection:(NSInteger)sec
{
  // The height of the header view should be determined from the height of the 
  // view in the XIB file
  return [[self headerView]bounds].size.height;
}

@end 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-31T09:45:11.033

我遇到了同样的问题，并通过将注释//Load HeaderView.xib 下的代码行更改为

```
// Load HeaderView.xib
    headerView = [[[NSBundle mainBundle] loadNibNamed:@"HeaderView" owner:self options:nil] lastObject]; 
```

nib 文件只有一个视图，因此我将其分配为最后一个（唯一）视图。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T21:48:23.387

以下一项或两项设置不正确。首先，HeaderView.xib 中的 File's Owner 对象需要将其类设置为`ItemsViewController`. 之后，`headerView`outlet 需要从 File's Owner 连接到 xib 中的顶层视图。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:28:43.537

`loadNibNamed`您的方法内部的方法返回 nib 文件内容的数组似乎很重要`headerView`，但您对这些内容没有做任何事情。也许您应该在未归档的对象中找到视图，并`headerView`从 nib 文件内部将您的视图设置为相应的视图。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T19:34:34.267

您是否错过了实施这些方法？我不确定这些类是否已设置默认部分值 = 1。

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView 
```

# java - 对象数组未正确初始化

> ID：10375044
> 
> 赞同：0
> 
> 时间：2012-04-29T19:03:40.253
> 
> 标签：java, arrays, generics, object, nullpointerexception

使用此代码，我试图将带有数据的文件加载到对象数组中。我没有正确初始化对象中的字段，因为当我运行此代码时，我得到了 NullPointerException。数组在那里，甚至是正确的大小，但字段没有初始化。我应该如何解决这个问题？

这是代码：

```
public class aJob {
  public int job;
  {
    job = 0;
  }
  public int dead;
  {
    dead = 0;
  }
  public int profit;
  {
    profit = 0;
  }
}

public class Main {
  public static void main(String[]args) throws IOException {
    File local = readLines();
    Scanner getlength = new Scanner(local);
    int lines = 0; 

    while (getlength.hasNextLine()) {
      String junk = getlength.nextLine();
      lines++;
    }
    getlength.close();

    Scanner jobfile = new Scanner(local);  // check if empty                            

    aJob list[] = new aJob[lines];
    aJob schedule[] = new aJob[lines];
    int index = 0;
    list[index].job = jobfile.nextInt();
  }

  public static File readLines() throws IOException 
  {
    try {
      UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
    } catch (Exception e) {
      // ignore exceptions and continue
    }

    JFileChooser chooser = new JFileChooser();
    try {
      int code = chooser.showOpenDialog(null);
      if (code == JFileChooser.APPROVE_OPTION) {
        return chooser.getSelectedFile(); 
      }
    } catch (Exception f) {
      f.printStackTrace();
      System.out.println("File Error exiting now.");
      System.exit(1);
    }
    System.out.println("No file selected exiting now.");
    System.exit(0);
    return null;
  }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T19:07:13.733

声明一个数组是不够的。您必须使用对象实例填充它。

```
aJob list[] = new aJob[lines];
aJob schedule[] = new aJob[lines];

for (int i = 0; i < lines; i++){ list[i] = new aJob(); schedule[i] = new aJob(); } 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-29T19:07:13.187

问题是数组的元素没有初始化，即仍然为空。

```
aJob list[] = new aJob[lines]; // creates an array with null values.
for(int i=0;i<lines;i++) list[i] = new aJob(); // creates elements. 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:27:02.490

另一种可能性是您可以使用 ArrayList 或 LinkedList 来代替程序中的数组。

例如，

```
ArrayList<aJob> list = new ArrayList<aJob>(lines);
ArrayList<aJob> schedule = new ArrayList<aJob>(lines);

int index = 0;
list.add(0, new aJob(jobFile.nextInt()); 
```

做同样的工作。最后一行使用从扫描仪对象中提取的值创建一个新的 aJob 对象，然后将其插入到位置 0。

虽然数组是一种简单的结构，但使用 List 可以为您提供更大的灵活性，尤其是在您不知道要创建多少 aJob 元素的情况下。数组需要在实例化时定义大小，但 List 具有增长以处理新元素的能力。

# regex - 正则表达式排除，寻找一个单词后面没有另一个

> ID：10375045
> 
> 赞同：35
> 
> 时间：2012-04-29T19:03:41.953
> 
> 标签：regex

我正在尝试搜索所有出现的“Tom”后面没有出现“Thumb”。

我试图寻找

```
Tom ^((?!Thumb).)*$ 
```

但我仍然得到与汤姆拇指匹配的线条。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-04-29T19:09:16.870

你没有说你正在使用什么风格的正则表达式，但这通常应该有效：

```
 Tom(?!\s+Thumb) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2016-09-27T08:11:44.783

如果您不是在寻找整个单词，您可以使用以下正则表达式：

```
Tom(?!.*Thumb) 
```

如果在通缉匹配后有更多单词要检查，您可以使用

```
Tom(?!.*(?:Thumb|Finger|more words here))
Tom(?!.*Thumb)(?!.*Finger)(?!.*more words here) 
```

要进行`.`匹配换行符，请参阅[如何在正则表达式中匹配多行中的任何字符？](https://stackoverflow.com/questions/159118)

看到[这个正则表达式演示](https://regex101.com/r/vB4hJ1/1)

如果您正在查找整个单词（即，只有在其右侧`Tom`没有整个单词时才应匹配整个单词），请使用`Thumb`

```
\bTom\b(?!.*\bThumb\b) 
```

查看[另一个正则表达式演示](https://regex101.com/r/vB4hJ1/2)

注意：

*   `\b`- 匹配前导/尾随单词边界
*   `(?!.*Thumb)`-如果后面有任何 0+ 个字符（取决于引擎，包括/不包括换行符），则匹配*失败*`Thumb`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T19:10:46.953

`Tom(?!\s+Thumb)`是您搜索的内容。

# ruby-on-rails-3 - mongo db和rails id问题

> ID：10375046
> 
> 赞同：0
> 
> 时间：2012-04-29T19:03:44.903
> 
> 标签：ruby-on-rails-3, mongodb, mongomapper, spine.js

我正在使用一个名为 spin 的 js 框架。该框架可以通过 REST api（如骨干网）进行所有的 crud 操作。当我收到对我的控制器的创建请求时，我从客户端获得了一个具有 id 字段的模型数据，我知道我在创建请求中，所以我应该创建一个新记录，但 mongo 认为这个记录已经存在（因为id 字段）并调用更新而不是插入。有没有办法解决这个问题？我希望客户端创建这个临时 ID，但是当调用服务器端创建这个 ID 时应该被忽略。

一些代码：

```
#in my_controller
def create
  @model= Model.new(params[:modelData]) #model data is name=>"x", _id=>"c-0"
  @model.save 
```

当 save 被称为 mongo do update 时，下一次创建将覆盖此记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T22:12:38.883

我不太确定我理解你的问题，但我认为你想要这个：

```
@model = Model.find_or_initialize_by_id(params[:modelData][:_id])
@model.update_attributes(params[:modelData]) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-24T20:56:44.080

我别无选择，只能从从客户端获得的模型中删除 id 字段。

# linux-kernel - 从寄存器而不是从堆栈中读取参数

> ID：10375048
> 
> 赞同：0
> 
> 时间：2012-04-29T19:04:04.543
> 
> 标签：linux-kernel, parameter-passing

上周，讲师讲述了如何处理 linux 中的中断，尤其是 do_IRQ 函数。我想知道为什么 do_IRQ 函数从寄存器而不是从堆栈中读取其参数。但教官也不知道这是什么原因。现在我仍然想知道为什么像 do_IRQ 这样的内核函数从寄存器而不是堆栈中读取所需的参数。我用谷歌搜索了它，但我只发现函数从寄存器或堆栈中读取它们的参数，但不是原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T10:31:58.980

从内核 2.6 开始，所有内核函数都使用寄存器而不是堆栈来传递前 3 个参数（x86_64 中的 6 个）。
在古老的 2.4 内核中，只有少数性能关键函数，例如`do_IRQ`，以这种方式工作。你的导师会教你关于 2.4 内核的知识吗？！

在寄存器中传递参数可以提高性能。
与内存相比，读/写寄存器要快得多（即使它在 L1 缓存中）。

在所有情况下，调用者和被调用者就参数传递方法达成一致非常重要。
当函数使用非标准方法时，它会被标记为编译器属性。
这个属性告诉编译器两件事——当编译函数本身时，它知道参数应该放在哪里，当编译对它的调用时，它知道把它们放在哪里。

# point-of-sale - 要求提供简单的销售点软件信息

> ID：10375052
> 
> 赞同：0
> 
> 时间：2012-04-29T19:04:26.387
> 
> 标签：point-of-sale

我希望可以在这里发布。我的一个家庭朋友拥有一家比萨店，并问我是否可以为他的商店开发触摸屏销售点软件。他说他想要一些非常简单的东西，而不是与收银机集成。基本上，它只需要计算他的订单并打印出他的收据。

我目前在滑铁卢大学攻读计算机科学三年级。我为学校所做的所有工作都是在命令行界面下完成的，我希望能够解决这个项目，以此来进一步提升我的开发经验。当我第一次被告知这个项目时，我认为它太过分了，但经过一点研究，我觉得我想看看我是否能做到。

我正在考虑将 Microsoft Visual Studio 用于 GUI 构建器，并使用 C++ 后端，因为它是我最精通的语言。我还没有真正做过这样的事情，所以我知道我将不得不做更多阅读/学习/等。从你们那里，我想我有几个问题：

1.  这个项目对于真正只工作/开发小的 CUI 脚本的人是否可行？

2.  您有任何提示/想法/工具/网站或任何可以帮助我完成这个项目的东西吗？

我希望这篇文章没问题，因为它不是真正的技术性（还），但我很想听听你们的一些想法和想法。我觉得完成这件事对我的经验来说是无价的。

多谢你们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:16:01.943

1.  是的，这绝对是可能的，但 GUI 与 CUI 非常不同。

2.  如果您是三年级学生，您可能可以轻松地学习如何驱动接口代码，所以我会给您一些通用提示：

    *   GUI 是事件驱动的，这意味着您应该等着看用户做了什么并做出相应的反应，而不是提示输入。
    *   您应该只在绝对必要时提示用户进行特定输入，并在用户没有所需信息的情况下制定备份计划。
    *   将界面设计成您的客户期望的那样工作，而不是您认为它应该如何工作。
    *   重视易用性高于一切。
    *   不要让你的程序做任何用户不希望它做的事情，例如不必要地修改文件或不必要地修改用户的输入。
    *   由于目标是触摸屏界面，因此请使用比正常更大的按钮并尽量避免使用复杂的菜单。

3.  还有一些实际代码的提示：

    *   将您的事件处理保持在一个中心位置，并从那里分支出来。
    *   您可以直接从环境中获取大量信息，因此您通常不需要存储当前处于活动状态的选项卡或窗口大小等内容。
    *   大多数界面代码可以很容易地重新定位，所以不要害怕“入侵”一个新按钮或其他东西，然后再移动它（尽管确保你不要忘记它！）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T08:27:46.693

我推荐你使用C#，它类似于C++（即语法），并且易于连接（sql server，MS Access）数据库和（Crystal）报表。

# map - for和map的两个嵌套？

> ID：10375057
> 
> 赞同：4
> 
> 时间：2012-04-29T19:05:29.333
> 
> 标签：map, for-loop, clojure, idioms

当我需要生成一个需要“两个循环”的序列时，最好这样做：

```
(for [x (range 1 4)] (map #(* x %) (range 6 9))) 
```

或类似的东西：

```
(for [x (range 1 4)] (for [y (range 6 9)] (* x y))) 
```

两者都给出相同的结果：

```
((6 7 8) (12 14 16) (18 21 24)) 
```

一个比另一个更惯用吗？这两者之间有什么区别？

另外，是否可以通过嵌套两个*map*获得相同的结果？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T19:14:49.423

两者都可以，但是第二个版本可以更好地扩展到任意嵌套级别。

嵌套`map`调用也有效：

```
user=> (map (fn [x] (map (fn [y] (* x y)) (range 6 9))) (range 1 4))
((6 7 8) (12 14 16) (18 21 24)) 
```

但是，您不能嵌套快捷函数语法。

顺便说一句，以防万一您确实需要更多类似集合理解的语义，`for`还内置了嵌套。结果有些不同：

```
user=> (for [x (range 1 4), y (range 6 9)] (* x y))
(6 7 8 12 14 16 18 21 24) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T08:35:54.317

请记住`for`，在 clojure 中不是“循环”，而是列表理解。我发现从所需值向后思考比从我的迭代方式向前思考更容易。

看来您正在尝试创建一个值序列，其中值是

`(map #(* x %) y)`

*   `x`是`1 >= x > 4` =>`(range 1 4)`
*   `y`, 是`(range 6 9)`=>`(repeat (range 6 9))`

但是由于您希望终止理解，因此您需要调整`y`给予

*   `y`->`[(range 6 9)]`

最后作为一个惯用的列表理解（注意这与你的第一个例子非常相似，所以你几乎在那里）

```
(for [x (range 1 4) y [(range 6 9)]] (map #(* x %) y))
((6 7 8) (12 14 16) (18 21 24)) 
```

# c - 在消息框中显示双倍

> ID：10375063
> 
> 赞同：0
> 
> 时间：2012-04-29T19:06:20.147
> 
> 标签：c, messagebox, printf

我在将双精度转换为字符串，然后再转换为消息框时遇到问题。从我读过的内容来看， sprintf 是（松散地，但由于某些方面不是最佳选择）我想要的功能。这是我的示例代码，但我不确定我哪里出错了。

```
DOUBLE time;
char timearray[30];
time = (double)(end.QuadPart - st.QuadPart)/(double)freq.QuadPart;
sprintf(timearray, "%lf", time); 
```

我从这里去哪里？我尝试过类似的东西；

```
MessageBox(NULL, timearray, TEXT("mb"), MB_OK); 
```

但这会在 timearray 参数上产生以下错误：“*char”类型的错误与“LPCWSTR”类型的参数不兼容。

关于我要去哪里错的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:14:14.283

可能您的项目默认设置为使用宽（Unicode）字符，因此您应该使用`wchar_t`and `wsprintf`（更好，`wnsprintf`）。

```
double time;
wchar_t buffer[30];
time = (double)(end.QuadPart - st.QuadPart)/(double)freq.QuadPart;
_snwprintf(buffer, sizeof(buffer)/sizeof(*buffer), L"%lf", time);
MessageBoxW(NULL, buffer, L"mb", MB_OK); 
```

或者，如果您想使用`TCHAR`s：

```
double time;
TCHAR buffer[30];
time = (double)(end.QuadPart - st.QuadPart)/(double)freq.QuadPart;
_sntprintf(buffer, sizeof(buffer)/sizeof(*buffer), _T("%lf"), time);
MessageBox(NULL, buffer, _T("mb"), MB_OK); 
```

# javascript - 在网站上生成和输出随机数（带有 cookie 和 IP 地址限制）

> ID：10375077
> 
> 赞同：0
> 
> 时间：2012-04-29T19:07:45.027
> 
> 标签：javascript

我是一个完整的 JS 新手，所以很抱歉问我认为最终可能是一个过于简单化的问题。

这是我想做的事情：

每当用户访问某个页面时，该页面将显示一个随机生成的数字。该页面将为每个新访问者生成一个新的随机数，但同一个访问者应该总是得到相同的数字，即应该安装某种 cookie 并且可能安装 IP 跟踪以确保同一个访问者不会得到不同的如果他稍后（例如第二天）访问该页面，则编号。

我真的不知道从哪里开始……有什么提示吗？

提前非常感谢！

PS这不是家庭作业或任何东西；这是我正在努力的一个副项目。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:18:42.720

我会将 jQuery 与两个插件一起使用：

jquery.random:

[http://www.rockechris.com/jquery/jquery.random.js.html](http://www.rockechris.com/jquery/jquery.random.js.html)

jquery.cookie：

[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)

如果需要，可以发布示例吗？

至于必须在服务器端完成的 IP 跟踪......

# jquery-plugins - jQuery文件上传不再调整图像大小

> ID：10375081
> 
> 赞同：4
> 
> 时间：2012-04-29T19:08:19.210
> 
> 标签：jquery-plugins, file-upload, image-resizing

自三个月以来，我在我的项目中使用 jQuery 文件上传来上传和调整图像文件的大小。直到上周一切正常。该插件不再调整图像大小（最新的 google chrome 和最新的 firefox）。

我在此页面上使用相同的基本配置[https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin](https://github.com/blueimp/jQuery-File-Upload/wiki/Basic-plugin)

有人有同样的问题，也许有解决方案吗？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2014-02-11T15:46:49.170

我无法让客户端图像大小调整工作，我发现这是因为我已经覆盖了 add 方法并且没有包含在原始方法中进行图像大小调整的代码。我会发布我的解决方案，希望它可以帮助人们节省一些挫败感。

```
<form action="/path/to/uploadHandler" id="multiple-image-upload" enctype="multipart/form-data" method="post" accept-charset="utf-8">
    <input name="files" multiple="multiple" id="files" type="file">
</form>

<div id="file-upload-progress">
    <div id="upload-progress">
        <div class="bar" style="width: 0%;"></div>
    </div>
</div>

<script type="text/javascript">
$(function () {
    $('#multiple-image-upload').fileupload({
        dataType: 'json',
        // Enable image resizing, except for Android and Opera,
        // which actually support image resizing, but fail to
        // send Blob objects via XHR requests:
        disableImageResize: /Android(?!.*Chrome)|Opera/
            .test(window.navigator.userAgent),
        process:[
            {
                action: 'load',
                fileTypes: /^image\/(gif|jpeg|png)$/,
                maxFileSize: 20000000 // 20MB
            },
            {
                action: 'resize',
                maxWidth: 1920,
                maxHeight: 1200,
                minWidth: 800,
                minHeight: 600
            },
            {
                action: 'save'
            }
        ],
        add: function (e, data) {
            data.context = $('<p/>').text('Uploading '+data.files[0].name+'...').appendTo("#file-upload-progress");
            var $this = $(this);
            data.process(function () {
                return $this.fileupload('process', data);
            }).done(function() {
                data.submit();
            });
        },
        done: function (e, data) {
            data.context.html('<img src="'+data.result.files[0].thumbnailUrl+'" alt="'+data.result.files[0].name+'" />');
        },
        progressall: function (e, data) {
            var progress = parseInt(data.loaded / data.total * 100, 10);
            $('#upload-progress .bar').css(
                'width',
                progress + '%'
            ).text(
                progress + '%'
            );
        }
    });
})(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:17:24.110

最好的方法是我目前正在做的是：

```
$('#fileupload').fileupload({
      dataType: 'json',
      url: 'Upload.ashx,
      done: function (e, data) {
      $("#page_navigation").show();
            $.each(data.result, function (index, file) {
            $('#placeholderforimages').append("<img style='height:48px;width:65px;' src='yourimagepath'>");
            }
 }); 
```

更新：

这是您需要创建一个数组并需要在其中声明的 wiki[选项](https://github.com/blueimp/jQuery-File-Upload/wiki/Options)

```
[
    {
        action: 'load',
        fileTypes: /^image\/(gif|jpeg|png)$/,
        maxFileSize: 20000000 // 20MB
    },
    {
        action: 'resize',
        maxWidth: 1920,
        maxHeight: 1200,
        minWidth: 800,
        minHeight: 600
    },
    {
        action: 'save'
    }
], 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-16T14:35:22.630

我也遇到了 jQuery File Upload 的问题，并设法通过更改以下部分中的文件“jquery.fileupload-image.js”中的选项来解决它：

```
// The File Upload Resize plugin extends the fileupload widget
// with image resize functionality:
$.widget('blueimp.fileupload', $.blueimp.fileupload, {

    options: {
        ...
        // The maximum file size of images to load:
        loadImageMaxFileSize: 20000000, // 10MB
        // The maximum width of resized images:
        imageMaxWidth: 250,
        // The maximum height of resized images:
        imageMaxHeight: 250,
        ...
        // Disable the resize image functionality by default:
        disableImageResize: false,
        ...
    }, 
```

不知何故，选项将“其他地方”（在我的情况下，从官方页面的官方教程复制的所有代码）不会覆盖此处声明/显示的默认选项。

*   这可能是我的错，所以没有冒犯。无论如何，如果这个建议可以帮助其他人，就在这里。喜欢就试试吧，还是放弃吧。

# c++ - 无效的空指针 - C++

> ID：10375082
> 
> 赞同：-1
> 
> 时间：2012-04-29T19:08:28.680
> 
> 标签：c++, null-pointer

我从这部分代码中得到一个无效的空指针错误。我猜这与字符串有关，但由于我最近才了解它们，所以我找不到问题所在。

```
string batchCipherFiles()
{
int count(0);
string text, file; 
ifstream inputFile;

cout << " How many files do you wish to encrypt?: ";
cin >> count;
for (int i(1) ; i <= count ; ++i)
{
    stringstream ss;
    ss << "unencrypted" << i << ".txt";
    file = ss.str();
    inputFile.open(file.c_str(), ios::in);
    if (inputFile.fail()) 
    {
        cout << "\n An error has occurred.";
    }
    else
    {
        while (!inputFile.eof())
        {
            getline(inputFile, text);
            cout << "\n " << file << " = " << text << "\n\n";
            int applyCeasarShift(string,string);        
            applyCeasarShift(text, file);
        }
        inputFile.close();
    }
}

return (0);
} 
```

这是来自 xstring 的调试行：

```
 #ifdef _DEBUG
_CRTIMP2_PURE void __CLRCALL_PURE_OR_CDECL _Debug_message(const wchar_t *message, const wchar_t *file, unsigned int line)
{   // report error and die
    if(::_CrtDbgReportW(_CRT_ASSERT, file, line, NULL, message)==1)
    {
        ::_CrtDbgBreak();
    }
} 
```

提前感谢您的帮助。

编辑：错误发生在 Return 语句中，在 xstring 的提取中，黄色箭头指向“::_CrtDbgBreak();”

编辑2：

```
xstring:
basic_string(const _Elem *_Ptr)
    : _Mybase()
    {   // construct from [_Ptr, <null>)
    _Tidy();
    assign(_Ptr);
    }

xutility:
template<class _Ty> inline
void _Debug_pointer(const _Ty *_First, _Dbfile_t _File, _Dbline_t _Line)
{   // test iterator for non-singularity, const pointers
if (_First == 0)
    _DEBUG_ERROR2("invalid null pointer", _File, _Line);
}

stdthrow:
#ifdef _DEBUG
_CRTIMP2_PURE void __CLRCALL_PURE_OR_CDECL _Debug_message(const wchar_t *message, const wchar_t *file, unsigned int line)
{   // report error and die
    if(::_CrtDbgReportW(_CRT_ASSERT, file, line, NULL, message)==1)
    {
        ::_CrtDbgBreak();
    }
} 
```

希望这是正确的东西。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T19:22:34.163

问题是`string`返回类型为`batchCipherFiles`但`return (0);`被返回：要么更改返回类型，要么返回 a `string`。

我认为`return (0);`将隐式转换为`std::string((char*)0);`，导致崩溃。[`std::string`构造函数](http://en.cppreference.com/w/cpp/string/basic_string/basic_string)的文档指出：

> 用 s 指向的以空字符结尾的字符串的内容构造字符串。字符串的长度由第一个空字符确定。**s 不能是 NULL 指针。**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:22:34.003

如果错误发生在 return 语句上，则很可能其他一些代码正在使用返回值作为指针值。C++ 标准指定将 0 分配给指针时与 NULL 相同，因此这可能是您的问题。

# java - 使用 HTTP POST 登录后 Android 下载图像

> ID：10375085
> 
> 赞同：1
> 
> 时间：2012-04-29T19:08:41.503
> 
> 标签：java, android, httpclient

我想从远程 url 下载图像。

我应该通过张贴`unamw=asdasd&pass=qwerty`进行身份验证，`login.aspx`然后我必须从`image.aspx?id=2121212`

我怎样才能做到这一点？

我搜索它，但我找不到任何解决方案。

# nfs - Unix NFS 安全困境：all_squash 挂载或用户身份验证的替代方案？

> ID：10375086
> 
> 赞同：-1
> 
> 时间：2012-04-29T19:08:51.533
> 
> 标签：nfs

使用 NFS，当文件系统安装在客户端机器上时，客户端上的用户名用于验证访问权限（即，本地客户端上的用户 A 被假定为文件系统上的用户 A）。

问题：客户端上的任何本地根都可以作为任何人 su 访问文件系统上任何人的文件。

如果文件系统打算对所有人都是只读的，则导出系统以使用 all_squash 进行挂载可以解决问题。

但是，如果我希望系统是可读写的并且我不想只将系统导出到特定的客户端机器上怎么办？

有没有其他方法或替代方案来解决这个问题？也许使用不同的文件系统或身份验证方法？基本上，我希望在授予访问权限之前将用户真正验证为文件系统的实际用户（即，不仅仅是基于客户端计算机上的用户名）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:11:18.720

为什么不将您的 /etc/exports 文件配置为仅允许来自每个客户端的特定用户名？例如：

```
/home/user1 -mapall=user1 user1.host.machine 
```

您可以添加 Kerberos 来阻止 IP 欺骗。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-15T22:14:05.147

您可以使用 sshfs 而不是 nfs - 这应该可以解决该死的欺骗用户问题。

# php - 在类中包含 PDO 数据库连接

> ID：10375087
> 
> 赞同：-2
> 
> 时间：2012-04-29T19:09:03.297
> 
> 标签：php, mysql, pdo

我一直在试图找出将我的 PDO 数据库连接包含在我的课程中的最佳方法。这是我到目前为止的代码，但不起作用。

```
class Delete {

private $connection;
    function __construct() {
        $this->open_connection();
    }
    public function open_connection() {
        $this->connection = mysql_connect(localhost, 1, 1);
        if (!$this->connection) {
            die("Database connection failed: " . mysql_error());
        } else {
            $db_select = mysql_select_db(1, $this->connection);
            if (!$db_select) {
                die("Database selection failed: " . mysql_error());
            }
        }
    }

public function delete_file($deletelink) {

$dbh = $this->connection;

$sth = $dbh->prepare("SELECT hash FROM files WHERE delete_link = :delete_link");
//PARAM_INT for int, PARAM_STR for string, PARAM_BOOL for bool
$sth->bindParam(':delete_link', $deletedlink, PDO::PARAM_STR);
$sth->execute();
$countrows = $sth->rowCount();
 if ($countrows == 0) {
return false;   
 } else {

$sth = $dbh->prepare("SELECT filename, hash, ext FROM files WHERE delete_link = :delete_link");
//PARAM_INT for int, PARAM_STR for string, PARAM_BOOL for bool
$sth->bindParam(':delete_link', $deletedlink, PDO::PARAM_STR);
$sth->execute();

} 
```

}

如果有人有更好的方法，请分享=）谢谢大家！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T19:16:27.167

您正在将程序 mysql_* 函数与 PDO 混合。为什么不设置 PDO 对象并通过 setter 方法/构造函数将其分配给对象？

```
$pdo = new PDO($dsn);
$delete = new Delete($pdo);
$delete->deleteFile($filename);

// ..
class Delete {
  protected $_pdo;
  public function __construct(PDO $pdo) { $this->_pdo = $pdo; }
  public function deleteFile($filename) { $this->_pdo->query(".."); /* .. */ }
} 
```

请考虑更改您的班级名称，这太常见了（删除什么？在哪里？如何？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-11T00:13:08.053

我使用了一个非常简单的类，它使用静态连接来做到这一点：

来源： [http ://simple_pdo_implementation.onlinephpfunctions.com](http://simple_pdo_implementation.onlinephpfunctions.com)

```
<?php
class sql
{
public static $db = false;
private $database_host = '127.0.0.1';
private $database_user = 'username';
private $database_pass = 'verySecretPassWord';
private $database_db = 'database';

function __construct()
{
    if (self::$db === false) {
        $this->connect();
    }
    return self::$db;
}

private function connect()
{
    $dsn = $this->database_type . ":dbname=" . $this->database_db . ";host=" . $this->database_host;
    try {
        self::$db = new PDO($dsn, $this->database_user, $this->database_pass, array(PDO::MYSQL_ATTR_INIT_COMMAND => 'SET NAMES \'UTF8\''));
        self::$db->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    } catch (PDOException $e) {
        //Comment this out on a production environment
        //print_r($e->errorInfo);
        //echo 'Connection failed: ' . $e->getMessage();
    }
}

} 
```

# mysql - 如何为 MySQL JOIN 创建正确的语句？

> ID：10375089
> 
> 赞同：0
> 
> 时间：2012-04-29T19:09:26.953
> 
> 标签：mysql

我有`user`表并且`payment`是多对多关系表。

```
SELECT user.uID,
       user.uName,
       user.uLocation,
       user.uBlock,
       user.uRoom,
       user.uStatus,
       payment.pID,
       payment.pDate,
       payment.pType
FROM   user
       INNER JOIN payment
         ON user.uID = payment.pID
LIMIT  0,100 
```

1.  结果将`INNER JOIN`一事无成。
2.  用户`LEFT JOIN` **显示**正确结果但返回`NULL`支付**表**
3.  付款`RIGHT JOIN` **显示**正确结果但`NULL`返回**用户**表

如何获得正确的结果以显示两者？`LEFT JOIN`&`RIGHT JOIN`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:11:53.287

你想要`FULL OUTER JOIN`吗？

```
SELECT user.uID,
       user.uName,
       user.uLocation,
       user.uBlock,
       user.uRoom,
       user.uStatus,
       payment.pID,
       payment.pDate,
       payment.pType
FROM   user
       FULL OUTER JOIN payment
         ON user.uID = payment.pID
LIMIT  0,100 
```

> **全外连接**
> 
> **从概念上讲，完全外连接结合了应用左外连接和右外连接的效果。**如果 FULL OUTER JOINed 表中的记录不匹配，则结果集对于缺少匹配行的表的每一列都将具有 NULL 值。对于那些匹配的记录，将在结果集中生成一行（包含从两个表中填充的字段）。

[维基百科](http://en.wikipedia.org/wiki/Join_%28SQL%29#Full_outer_join)

* * *

要`MySQL`阅读[此](https://stackoverflow.com/a/2384312/601179)内容，您应该使用`UNION`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:11:27.803

您要求用户 ID 等于付款 ID。如果返回一个空集，你很幸运，它也可能返回完全错误的数据:) 它可能应该是：

```
user.uID = payment.uID 
```

或者`payment.userId`，或者什么的。检查付款表中的列。

# c# - 访问另一个类的受保护成员

> ID：10375090
> 
> 赞同：1
> 
> 时间：2012-04-29T19:09:33.000
> 
> 标签：c#, class, friend, access-modifiers

我有一个 A 类，我需要从中访问 B 类的受保护成员，其方式与在 C++ 中使用friend 关键字的方式相同。但是，内部修饰符不适合我的需要。B 类需要创建 A 类的实例，修改其私有数据，并返回对该类的引用。这些 A 类成员需要对原始调用者保持私有。

```
public class A
{
    protected int x;
}

public class B
{
    public static A CreateClassA()
    {
        A x = new A();
        x.x = 5;   // ERROR : No privilege
        return x;
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-12-23T16:06:05.987

这个问题在这一点上有点老了，但这是另一种方法，按照你的要求做，没有讲座或摇摆手指：

考虑：

```
A foo = new A();
FieldInfo privateField = foo.GetType().GetField("x", BindingFlags.NonPublic | BindingFlags.Instance);
privateField.SetValue(foo, 5); 
```

警告：使用上述代码会破坏封装，弯曲您的脊椎，并且可能会因 OO 纯粹主义者的尖锐尖叫而导致耳朵受损。

...但它适用于工厂类，弥补了 C# 缺少朋友关键字的问题。

警告 2：这很慢。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-26T11:07:37.730

您可以使用`protected internal`代替`internal`来访问同一程序集中的所有类，以及其他程序集中的子类：

```
public class A
{
    protected internal int x;
}

public class B
{
    public static A CreateClassA()
    {
        A x = new A();
        x.x = 5;   // hurray
        return x;
    }
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-04-29T19:12:17.913

您将需要为该`protected`字段创建一个公共设置器或从该类继承。

```
public class A
{
    protected int x;

    public int X { set { x = value; }  }
}

public static A CreateClassA()
{
    A x = new A();
    x.X = 5;
    return x;
} 
```

或者：

```
public class B : A
{
    public static A CreateClassA()
    {
        this.x = 5; 
        return x;
    }
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-04-29T19:49:47.190

你应该查看官方的 MSDN Friend Assembly。 [http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx](http://msdn.microsoft.com/en-us/library/0tke9fxk.aspx) 通过该示例，您可以执行以下操作：

```
using System.Runtime.CompilerServices;
using System;

[assembly: InternalsVisibleTo("AssemblyB")]
public sealed class A
{
    internal int x;
} 
```

并从程序集 B 设置/调用内部方法/字段。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-04-29T19:13:31.037

试试这个：

```
 public class A
   {
      protected int x;

      public class B
      {
          public static A CreateClassA()
          {
              A x = new A();
              x.x = 5;   // ERROR : No privilege
              return x;
          }
      }
   } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-29T19:11:53.550

如果您从 A 继承，您只能访问受保护的成员。您现在可以：

*   从 A 继承
*   创建一个设置 X 值的公共方法 setX(int newX)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-29T19:23:19.670

其他选择：

```
public class A
{
    public A() { }

    public A(int x)
    {
        this.x = x;
    }

    protected int x;
}

public class B
{
    public static A CreateClassA()
    {
        A x = new A(5);
        return x;
    }
} 
```

# gcc - 自制软件找不到 gcc

> ID：10375091
> 
> 赞同：7
> 
> 时间：2012-04-29T19:09:34.043
> 
> 标签：gcc, homebrew

我无法让自制软件在 Lion 上工作。出于某种原因，它使用的是 clang 而不是 gcc。

```
==> Upgrading gnutls
...
checking for gcc...
/usr/bin/clang checking whether the C compiler works... no 
```

“酿造医生” 说：

```
We couldn't detect gcc 4.2.x. Some formulae require this compiler. NOTE: Versions of XCode newer than 4.2 don't include gcc 4.2.x. 
```

注意：我已经从 XCode 安装了命令行工具，包括 gcc。

```
$ which gcc
/usr/bin/gcc
$ gcc -v
gcc version 4.2.1 (Based on Apple Inc. build 5658) (LLVM build 2336.9.00) 
```

如何强制 brew 使用 gcc？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-05-16T09:21:17.783

在 Xcode 4.2 之后，Apple 停止使用 Xcode 分发 gcc。相反，他们分发不是 gcc 的 llvm-gcc（和 clang *）*。您可以使用 gcc -v 看到这一点，就像您所做的那样：它显示`LLVM build`.

为了使用 gcc，您必须自己编译它。有一个自制公式，但您必须使用`brew tap homebrew/dupes`.

请注意，从今天开始，如果使用 clang 编译，gcc 公式将不起作用。您必须使用`brew install --use-llvm gcc`.

另请注意，Homebrew 显式搜索 gcc-4.2。您必须为 Homebrew 创建一个符号链接才能找到 gcc。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-19T01:08:15.287

如果您让 Yosemite 观看此视频，它会在您安装 Homebrew 时直接从命令提示符提示您输入 XCode

[http://dimecasts.net/Casts/CastDetails/218](http://dimecasts.net/Casts/CastDetails/218)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-02-13T18:29:44.813

我不确定这何时改变，但 Apple 命令行工具现在包括 gcc 和 clang 可执行文件：

```
$ which gcc
/usr/bin/gcc

$ gcc -v
Configured with: --prefix=/Library/Developer/CommandLineTools/usr --with-gxx-include-dir=/Library/Developer/CommandLineTools/SDKs/MacOSX.sdk/usr/include/c++/4.2.1
Apple clang version 11.0.0 (clang-1100.0.33.17)
Target: x86_64-apple-darwin19.3.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin

$ which clang
/usr/bin/clang

$ clang -v
Apple clang version 11.0.0 (clang-1100.0.33.17)
Target: x86_64-apple-darwin19.3.0
Thread model: posix
InstalledDir: /Library/Developer/CommandLineTools/usr/bin 
```

你可以通过运行得到它：

```
$ xcode-select --install 
```

# java - Android-屏幕旋转时图像形状发生变化

> ID：10375092
> 
> 赞同：0
> 
> 时间：2012-04-29T19:09:34.420
> 
> 标签：java, android

我创建了一个使用 9.png 文件作为背景的应用程序。问题是，当我旋转屏幕时，背景形状会发生奇怪的变化。

我附上截图：

![正常模式下的应用](../Images/97591efbb7b9b4dd1a4290b25a195502.png)

![屏幕旋转后](../Images/1e8814a198055af5e9a256dbd2e254ba.png)

如您所见，包含名称和图像的布局背景采用了一种奇怪的形状。

可能的原因是什么？我怎样才能让它发挥作用？

我检查了图像是否完美平滑且形状完美。

编辑：我说的是以下没有正确拉伸的背景（最左边的部分比最右边的部分高度小）： ![右侧部分大于左侧部分](../Images/cca00f578d96fd4c2558c453772d91f3.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:28:11.697

您需要使用 9patch 来定义当方向改变时允许拉伸图像的哪些区域。查看此[链接](http://developer.android.com/guide/developing/tools/draw9patch.html "关联")以获取 9patch。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T14:18:37.290

9-patch 的顶部和左侧边缘是您声明图像的哪些部分可以拉伸以填充空间的位置。由于您有一个看起来像中间有内容的位图（而不是背景位图），因此您应该防止 9-patch 中心的徽标拉伸。这意味着您希望黑色边框位于您可以在井字游戏板上画线的位置：不要穿过中间，也不要穿过角落。看看我在这个示例图像上放置拉伸条的位置（好吧，真的是点）。

![在此处输入图像描述](../Images/6fe8bc9b1da0cf6a88b8b584ecc8fa81.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T08:59:36.880

我发现了问题。这是一种视**错觉**，因为背景图像。现在已修复。

最好的祝福

# php - PHP图像创建失败

> ID：10375093
> 
> 赞同：0
> 
> 时间：2012-04-29T19:09:47.477
> 
> 标签：php, gd, gd2

我制作了一个使用`imagecreatetruecolour()`. `imagettftext()`然后它使用该函数向图像添加一个字母。进行了一些其他更改，最后删除了白色背景并将其保存为 PNG 文件。整个事情都放在一个 for 循环中，因此它创建了 250 个图像。

我面临的问题是，有时（大约 250 个中的 10-15 个）在制作图像后似乎没有做任何事情，因此输出是白色方块或黑色方块（大小正确）。

我尝试添加`sleep()`它以查看它是否试图太快地创建它们，但问题仍然存在。任何人都知道可能是什么原因造成的？PHP 内存限制是 128MB，所以我认为这不是问题（而且它也会出现在随机位置，有时甚至是第一个图像）。

我很确定这之前没有发布过，但公平地说，我不知道我在寻找什么，所以我可能一直在寻找错误的地方。

* * *

//编辑

遗憾的是，我不允许在这里添加整个脚本（公司政策等等），但我可以上传其中的一部分。经过进一步调查后，我将其范围缩小到不选择字母（我将几个变量输出到 csv 并且此列在其他未工作的列上为空白）

所以这是处理该部分的代码：

```
$exp_str = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRUSTUBWXYZ';
$letterArray = str_split($exp_str);
$randLetter = rand(0,55);
$text = $letterArray[$randLetter]; 
```

以及将所有图像放在一起的部分：

```
imagettftext($im, $sizeRand, $angleRand, $posX, $posY, $black, $font, $text);
$filename = 'images/'.$counter.'.png'; 
```

错误日志也是空的。

谢谢人们。我在发布代码后发现了错误。不知道我从哪里得到 55，但是是的，这是正确的顺序 - 或者更确切地说是字母，但有些被卡在随机的地方。-

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:56:24.900

这就是您的代码失败的原因

`count($letterArray);`会回来 `52`

现在你正试图得到

```
$randLetter = rand(0,55); 
```

因此，这会随机生成无效字符，并且您的代码会失败

利用

```
 $randLetter = rand(0,count($letterArray) - 1); 
```

示例工作代码

```
$exp_str = 'abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRUSTUBWXYZ';
$letterArray = str_split($exp_str);
$randLetter = mt_rand(0,count($letterArray) - 1);
$text = $letterArray[$randLetter];
$font = 'C:\Apache\xampp\htdocs\lab\stockoverflow\verdana.ttf' ;
$im = imagecreate(500, 500);
$white = imagecolorallocate($im, 255, 255, 255);
$black = imagecolorallocate($im, 0, 0, 0);
imagefilledrectangle($im, 0, 0, 500, 500, $white);
imagettftext($im, 70, 0, 0, 100, $black, $font, $text);
imagepng($im);
imagedestroy($im); 
```

# android - 从 Android 应用程序发送电子邮件

> ID：10375105
> 
> 赞同：0
> 
> 时间：2012-04-29T19:11:45.977
> 
> 标签：android

我正在尝试增加我的应用程序用户发送反馈的能力，我找到了一个如何做到这一点的例子，但唯一的缺点是我不喜欢电子邮件活动似乎正在拉动用户的事实电子邮件地址（我猜是链接到他们手机的那个），并且允许他们更改 To: 块。这是我正在使用的代码。有什么方法可以禁用 To: 字段，并让我在 from 字段中输入文本？我猜我必须创建一个像“myappuser@gmail.com”这样的电子邮件地址并将其用作通用电子邮件地址？`

```
final Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND);                    
            emailIntent.setType("plain/text");               
            emailIntent.putExtra(android.content.Intent.EXTRA_EMAIL, new String[]{ "myappdeveloper@gmail.com"});             
            emailIntent.putExtra(android.content.Intent.EXTRA_SUBJECT, "App Feedback");             
            emailIntent.putExtra(android.content.Intent.EXTRA_TEXT, "");     
            MainScreen.this.startActivity(Intent.createChooser(emailIntent, "Send mail...")); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T09:46:55.413

使用此 Intent，您可以使用 android 默认 Intent 发送邮件。

```
Intent emailIntent = new Intent(android.content.Intent.ACTION_SEND); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:44:11.380

试试`Intent.ACTION_SENDTO`吧。使用这些链接获得更多帮助：[ACTION_SENDTO](http://developer.android.com/reference/android/content/Intent.html#ACTION_SENDTO)和[link](https://stackoverflow.com/questions/3132889/action-sendto-for-sending-an-email)。

# .net - 如何在单独的线程上设置全局键盘挂钩？

> ID：10375106
> 
> 赞同：2
> 
> 时间：2012-04-29T19:11:47.387
> 
> 标签：.net, vb.net, multithreading, keyboard-hook

经过多次搜索后，我最终使用此类进行全局键盘挂钩。链接：[全球挂钩帖子](http://sim0n.wordpress.com/2009/03/28/vbnet-keyboard-hook-class/)

```
Imports System.Runtime.InteropServices

Public Class KeyboardHook

<DllImport("User32.dll", CharSet:=CharSet.Auto, CallingConvention:=CallingConvention.StdCall)> _
Private Overloads Shared Function SetWindowsHookEx(ByVal idHook As Integer, ByVal HookProc As KBDLLHookProc, ByVal hInstance As IntPtr, ByVal wParam As Integer) As Integer
End Function
<DllImport("User32.dll", CharSet:=CharSet.Auto, CallingConvention:=CallingConvention.StdCall)> _
Private Overloads Shared Function CallNextHookEx(ByVal idHook As Integer, ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer
End Function
<DllImport("User32.dll", CharSet:=CharSet.Auto, CallingConvention:=CallingConvention.StdCall)> _
Private Overloads Shared Function UnhookWindowsHookEx(ByVal idHook As Integer) As Boolean
End Function

<StructLayout(LayoutKind.Sequential)> _
Private Structure KBDLLHOOKSTRUCT
    Public vkCode As UInt32
    Public scanCode As UInt32
    Public flags As KBDLLHOOKSTRUCTFlags
    Public time As UInt32
    Public dwExtraInfo As UIntPtr
End Structure

<Flags()> _
Private Enum KBDLLHOOKSTRUCTFlags As UInt32
    LLKHF_EXTENDED = &H1
    LLKHF_INJECTED = &H10
    LLKHF_ALTDOWN = &H20
    LLKHF_UP = &H80
End Enum

Public Shared Event KeyDown(ByVal Key As Keys)
Public Shared Event KeyUp(ByVal Key As Keys)

Private Const WH_KEYBOARD_LL As Integer = 13
Private Const HC_ACTION As Integer = 0
Private Const WM_KEYDOWN = &H100
Private Const WM_KEYUP = &H101
Private Const WM_SYSKEYDOWN = &H104
Private Const WM_SYSKEYUP = &H105

Private Delegate Function KBDLLHookProc(ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer

Private KBDLLHookProcDelegate As KBDLLHookProc = New KBDLLHookProc(AddressOf KeyboardProc)
Private HHookID As IntPtr = IntPtr.Zero

Private Function KeyboardProc(ByVal nCode As Integer, ByVal wParam As IntPtr, ByVal lParam As IntPtr) As Integer
    If (nCode = HC_ACTION) Then
        Dim struct As KBDLLHOOKSTRUCT
        Select Case wParam
            Case WM_KEYDOWN, WM_SYSKEYDOWN
                RaiseEvent KeyDown(CType(CType(Marshal.PtrToStructure(lParam, struct.GetType()), KBDLLHOOKSTRUCT).vkCode, Keys))
            Case WM_KEYUP, WM_SYSKEYUP
                RaiseEvent KeyUp(CType(CType(Marshal.PtrToStructure(lParam, struct.GetType()), KBDLLHOOKSTRUCT).vkCode, Keys))
        End Select
    End If
    Return CallNextHookEx(IntPtr.Zero, nCode, wParam, lParam)
End Function

Public Sub New()
    HHookID = SetWindowsHookEx(WH_KEYBOARD_LL, KBDLLHookProcDelegate, System.Runtime.InteropServices.Marshal.GetHINSTANCE(System.Reflection.Assembly.GetExecutingAssembly.GetModules()(0)).ToInt32, 0)
    If HHookID = IntPtr.Zero Then
        Throw New Exception("Could not set keyboard hook")
    End If
End Sub

Protected Overrides Sub Finalize()
    If Not HHookID = IntPtr.Zero Then
        UnhookWindowsHookEx(HHookID)
    End If
    MyBase.Finalize()
End Sub

End Class 
```

它工作得很好。

我的应用程序正在执行需要几秒钟才能完成的操作（ftp 每隔一段时间上传小文件），在此期间钩子喜欢键盘。这我当然不想要

我现在不能跳到 Async FtpWebRequest 因为它需要很多更改，所以我认为解决方案是让钩子在另一个线程中存在。

我该怎么做？

编辑：一个建议是将我的耗时操作（上传）移动到另一个线程。这样做后我面临其他问题。因为耗时的任务（上传）在一个计时器中，所以我将不得不重写大部分以便同步文件->保存与文件->上传，我不介意应用程序锁定 3-4 秒。我介意的是松开 kayboard 3-4 秒...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:16:20.817

不要让钩子在不同的线程上运行（我认为你不能，它基于消息循环）；相反，只需在另一个线程中运行您的任务。这可能是最简单的方法：

```
Call New Thread(Sub()
                    ' Do stuff here
                End Sub) With {.IsBackground = True}.Start() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:14:16.887

您需要在后台线程上运行耗时的任务。
使用`ThreadPool`或`Task`。

# vmware - 用于测试 Windows 软件安装程序的虚拟机环境？

> ID：10375112
> 
> 赞同：2
> 
> 时间：2012-04-29T19:12:23.387
> 
> 标签：vmware, virtualization, virtualbox, hyper-v

我正在 Windows 7 Ultimate 下的 Visual Studio 中开发 Windows 窗体应用程序，目前正在为该应用程序构建部署/安装程序包。除了我的 Windows 7 开发机器外，我的 LAN 上还有一台 Windows Server 2008 R2 服务器。

拥有一个可以测试安装程序的虚拟机似乎是个好主意，但我没有使用 Hyper-V、VMware 或 Virtual Box 的经验。

为了测试安装程序，在我的 Win 7 开发 PC 或 Windows 2008 R2 服务器上创建虚拟机会更好吗？什么虚拟化软件设置起来最简单？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:18:25.423

我对我的 PC 上的 VirtualBox 非常满意。免费，支持快照（易于回滚到上一个已知状态），性能相当不错。

# c# - 在 Win8 XAML 中使用 SemanticZoom 对分组 GridView 中的滚动做出反应

> ID：10375113
> 
> 赞同：2
> 
> 时间：2012-04-29T19:12:33.793
> 
> 标签：c#, xaml, gridview, windows-8

我成功地在分组的背景上创建了视差滚动效果，方法`GridView`是将其包装在 a 中`ScrollViewer`并收听`ScrollViewer.ViewChanged`事件。问题是当它与`SemanticZoom`.

示例（剥离）XAML 以显示我所做的事情：

```
 <ScrollViewer>
        <SemanticZoom>
            <SemanticZoom.ZoomedInView>
                <GridView />
            </SemanticZoom.ZoomedInView>
            <SemanticZoom.ZoomedOutView>
                <GridView />
            </SemanticZoom.ZoomedOutView>
        </SemanticZoom>
    </ScrollViewer> 
```

这允许我在用户滚动时移动背景。问题是`SemanticZoom`中断：当您缩小并选择一个组时，您总是被带到第一组。删除`ScrollViewer`让我们`SemanticZoom`按预期工作，但是我无法获得滚动位置（因为`GridView`没有暴露它）。

基本上，我需要使用 GridView 呈现分组图块 + 语义缩放 + 以与滚动不同的速度移动背景。

有没有办法在 GridView 中获取滚动位置，或者使上述工作？

*更新：我在 Win8 Consumer Preview 中使用 C# 和 XAML，但更喜欢 Release Preview 的解决方案。*

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-06T22:42:03.930

SemanticZoom 通过交叉缩放和交叉淡化两个用户控件（ZoomedInView 和 ZoomedOutView）有效地工作。我建议放置两个 ScrollViewer，一个在 ZoomedInView 内，一个在 ZoomedOutView 内。但是，ScrollViewer 没有实现 SemanticZoom 需要的 ISemanticZoomInfo 接口。

当您缩小时，您可以查看订阅 ViewChanged 事件并更改 ScrollViewer 上的某些内容。我正在考虑关闭 IsHitTestVisible，但由于 GridView 是一个孩子，我认为这只会禁用一切。您可以尝试关闭手势事件或 ZoomChaining，但我不知道这是否能解决您看到的问题。我同意其他人的观点，即拥有实际样本会有所帮助。

# jquery - 替换链接属性以防止垃圾邮件

> ID：10375114
> 
> 赞同：2
> 
> 时间：2012-04-29T19:12:39.680
> 
> 标签：jquery, spam-prevention

我想我可以使用这种简单的方法在 jQuery 中创建一个低级垃圾邮件过滤器 -

```
<a class="filter" href="mailto:johndoe[at]nowhere[dot]com">johndoe[at]nowhere[dot]com</a>

$('.filter').each(function() {
  $(this).html().replace(('[dot]', '.'));
  $(this).html().replace(('[at]', '@'));
}); 
```

但什么也没有发生。本机替换功能似乎无法应对 jQuery。我还尝试使用 val() 和 text() 获取内容。也许这完全是一种不正确的方法，如果是的话，我会很感激一些方向。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:15:53.480

使用以下内容：

```
$('.filter').each(function() {
  var that = $(this);

  that.attr('href', that.attr('href').replace('[dot]', '.')
                                     .replace('[at]', '@'));

  that.html(that.html().replace('[dot]', '.').replace('[at]', '@'));
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:16:45.293

替换函数不修改原始字符串。你需要像这样使用它：

```
$(this).html( $(this).html().replace('[dot]', '.') ) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T19:27:22.837

```
$('.filter').each(function() {
  var mail = $(this).html().replace('[dot]', '.').replace('[at]', '@');
  $(this).html(mail);
  $(this).attr('href',"mailto:"+mail);
}); 
```

# java - JList.getModel() ClassCastException

> ID：10375115
> 
> 赞同：8
> 
> 时间：2012-04-29T19:12:40.173
> 
> 标签：java, swing, jlist

当我打电话`JList<String>.getModel()`并将其转换为它时，`DefaultListModel<String>`它会给我这个例外。

```
Exception in thread "AWT-EventQueue-0" java.lang.ClassCastException: javax.swing.JList$4 cannot be cast to javax.swing.DefaultListModel 
```

抛出它的代码：

```
private JList<String> list = new JList<String>();
((DefaultListModel<String>) list.getModel()).addElement(...); 
```

It doesn't do it every time though. Most of the time it works perfectly, but other times it throws this exception. I don't understand why this is happening. Is there anything I can do to stop this from happening?

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-08-03T19:59:45.130

我遇到了这个问题。我发现了这个简单的解决方法：

```
//----instantiation----

    JList mList = new JList();
    mList.setModel(new DefaultListModel());

    /*---- do whatever you want---- */

    //Retain it wherever you want with
    DefaultListModel model = (DefaultListModel)mList.getModel(); 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-03-17T19:44:24.050

如果您使用的是 NetBeans

1.  选择您的*jList*
2.  在*属性*中，单击*模型*按钮
3.  选择“*自定义代码*”选项
4.  写`new DefaultListModel ()`

![jList自定义代码](../Images/3c73e9a5fe8ea56d83fcd8f1f297346d.png)

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-29T19:35:55.623

你不应该假设它是一个 DefaultListModel。使用接口 ListModel。JList 正在返回 ListModel 的内部实现。

如果您需要访问底层模型，您应该创建它，在 JList 构造函数中设置它并自己保留它。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-09-18T04:58:55.047

在`JList<String>.getModel(),`你必须初始化你的对象之前`JList<String>.setModel(new DefaultModelList())`

# c# - How to properly serialize auto generated WCF types

> ID：10375116
> 
> 赞同：2
> 
> 时间：2012-04-29T19:12:45.033
> 
> 标签：c#, wcf, events, serialization, reflection

I'm using a WCF service with an code, which was generated from a mex endpoint.

I would like to be able serialize the classes, which were automatically generated.

My problem is, that those auto-generated classes implement System.ComponentModel.INotifyPropertyChanged interface, and occasionally when serializing them, I'm getting following exception:

```
Type 'System.ComponentModel.PropertyChangedEventManager' in 
Assembly 'WindowsBase, Version=4.0.0.0, Culture=neutral, 
PublicKeyToken=31bf3856ad364e35' is not marked as serializable. 
```

Normally I would deal with this exception by adding `[NonSerializable]` to the `PropertyChanged` event, but here the code is auto-generated, and I don't want to change it.

What is the best way to deal with this problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T19:14:33.543

听起来您正在使用`BinaryFormatter`- 但是，WCF 类型用于使用`DataContractSerializer`或相关的序列化程序（`NetDataContractSerializer`、protobuf-net 等）进行序列化。尝试`DataContractSerializer`改用 - 你的问题应该消失。

# charts - 如何为windows phone 7画一个简单的图表

> ID：10375119
> 
> 赞同：1
> 
> 时间：2012-04-29T19:13:32.723
> 
> 标签：charts, windows-phone-7.1

我正在寻找一种最简单的方法来在 Windows 手机上显示和/或绘制一个非常基本的图表（没有数据点，没有轴，只是一条显示总体趋势的简单线）。

我曾尝试寻找图表库，但看起来都非常复杂（而且我能找到的都是昂贵的）。

我尝试的第二件事是在画布上简单地画一条线 - 但 WP7 中的 Canvas 元素似乎不允许在其上绘图。

任何提示，指向教程的指针，你可以给我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-29T14:46:26.947

看看[AM 图表](http://wpf.amcharts.com/quick)

它是免费的、开源的并且相当容易使用。相当多的 WP7 开发人员正在使用它

这是一个简单的示例用法：

```
<amq:SerialChart x:Name="_24HoursLineGraph" DataSource="{Binding Data24}" CategoryValueMemberPath="Date" AxisForeground="White" PlotAreaBackground="Black" GridStroke="DarkGray" Grid.Row="1" Margin="20">
         <amq:SerialChart.Graphs>
             <amq:LineGraph ValueMemberPath="Close" Title="Close" Brush="Blue" />
         </amq:SerialChart.Graphs>
</amq:SerialChart> 
```

# android - 一款安卓泡泡射击游戏（球外观）

> ID：10375120
> 
> 赞同：3
> 
> 时间：2012-04-29T19:13:33.313
> 
> 标签：android, opengl-es

我正在使用 OpenGL ES 在 android 上制作一个小型泡泡射击游戏。

所以我想让球在另一个球与它碰撞时爆炸！..

但是这里的问题很小，但我找不到解决方案，

我希望图像看起来像图 (1) 而不是图 (2) ..

现在气泡出现了，它们周围有一个方形边框，但我不想要这个。如何删除图像边框？

非常感谢， ![在此处输入图像描述](../Images/9ad3375a0b2324218bc48049169b4669.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T19:21:32.027

你知道每个圆的中心点吗？当两个中心点之间的距离与它们的半径之和相同时，它们是接触的。您可以通过创建一个直角三角形并执行 a^2 + b^2 = radius1^2 + radius2^2 来做到这一点。使用圆圈的中心点创建三角形。

```
Bubble a,b
if((a.center.x - b.center.x)^2 + (a.center.y - b.center.y)^2 == (a.radius + b.radius)^2)
    //bubbles are touching 
```

# php - 链接匹配在 foreach 循环内失败

> ID：10375121
> 
> 赞同：1
> 
> 时间：2012-04-29T19:13:39.970
> 
> 标签：php, foreach

## 获取链接.html

```
// all other basic html tags are here which is not need to understand this like(head,body etc)
<a href="website.html">This is the website NO # 1</a>
<a href="http://www.google.com/">This is google site</a> 
```

## PHP

```
<?php
$file = file_get_contents('getlink.html');

$matches = preg_match_all('/<a(?:[^>]*)href=\"([^\"]*)\"(?:[^>]*)>(?:[^<]*)<\/a>/is'
                            ,$file,$match); // work fine
$test1 = preg_match_all('/href=\"((?:https?|ftp)\:\/\/\w+\.[\w-]+\..+)\"/i'
                            ,$file,$test); // work fine

foreach($match[1] as $links) {      

            if ($match[1] == $test[1]){ // write $match[1] not $links
                                        // bcs $links does not work
      echo 'True'.'<br />';
    } else {
     echo 'False'.'<br />';
    }       
                                }

?> 
```

当我运行它时，它会返回`false`两次，而不是一次`false`和第二次`true`。

第二个链接应该与`$test[1]`. 如果我删除第一个链接，它会返回`true`，

请帮帮我，我真的很担心。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:28:36.343

```
foreach($match[1] as $links) {      

if ($match[1] == $test[1]) 
```

您将其称为 $links 但并未在循环中提及它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:30:34.127

我只能猜测您提供的信息很少，但我假设您正在寻找任何同时位于`$matches`和中的链接`$test1`？如果是这样，这应该是您需要的：

```
foreach($match[1] as $links)
{      

  if (in_array($links, $test[1]))
  {
    echo 'True<br />';
  }

  else
  {
    echo 'False<br />';
  }       

} 
```

如果确实如此，也许您更愿意使用它需要更少的代码：

```
echo count($match[1]) == count(array_diff($match[1], $test1)) ? 'False' : 'True'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T23:03:41.810

A. 你什么都不做`$link`

B. 如果你跑

```
var_dump($match[1]);
var_dump($test[1]); 
```

输出

```
array
  0 => string 'website.html' (length=12)
  1 => string 'http://www.google.com/' (length=22)
array
  0 => string 'http://www.google.com/' (length=22) 
```

你能看到`$test [1]`不存在吗

C. 你应该做的是使用`in_array`但会打印多个 True ..

```
foreach ( $match [1] as $links ) {
    if (in_array ( $links, $test [1] )) {
        echo 'True' . '<br />';
    } else {
        echo 'False' . '<br />';
    }
} 
```

获得真或假使用`array_intersect`

```
$result = array_intersect ( $match [1], $test [1] );
if (count ( $result ) > 0) {
    echo 'True' . '<br />';
} else {
    echo 'False' . '<br />';
} 
```

# iphone - UILocalNotification - 每天在特定时间触发并重复

> ID：10375128
> 
> 赞同：0
> 
> 时间：2012-04-29T19:14:18.243
> 
> 标签：iphone, objective-c, ios, uilocalnotification

我有这段代码，用于每天午夜触发本地通知：

```
//Get todays midnight
    NSDate *alertTime = [NSDate date];
    NSCalendar *calendar = [NSCalendar autoupdatingCurrentCalendar];
    NSUInteger preservedComponents = (NSYearCalendarUnit | NSMonthCalendarUnit | NSDayCalendarUnit);
    alertTime = [calendar dateFromComponents:[calendar components:preservedComponents fromDate:alertTime]];

    UIApplication *app = [UIApplication sharedApplication];

    //Set up the local notification
    UILocalNotification *notification = [[UILocalNotification alloc] init];
    if(notification){
        //Set fire date to alert time
        notification.fireDate = alertTime;
        //Set time zone to default
        notification.timeZone = [NSTimeZone defaultTimeZone];
        //Repeat the notification everyday (fires at same time
        //as initial notification)
        notification.repeatInterval = NSDayCalendarUnit;

        // schedule notification
        [app scheduleLocalNotification:notification];

        NSLog(@"%@", notification.fireDate);
    } 
```

但是，我需要在每天 13:00 触发另一个本地通知。这是如何实现的？我不明白如何调整上面的代码来实现这一点..

非常感谢，

杰克

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T19:30:06.957

如果您有时间每天都必须触发通知，则应该这样做

```
NSCalendar *calendar = [[NSCalendar alloc] initWithCalendarIdentifier:NSGregorianCalendar];
    NSDateComponents *components = [[NSDateComponents alloc] init];
    for (NSMutableArray * arrDay in self.namaztimes) {
        NSLog(@"Alarm Array: %@", arrDay);
        int count=[arrDay count];
        if(!count){
            continue;
        }

        int day =0;
        int month=0;
        int year=0;
        int hour =0;
        int minutes=0;

        //  NSArray *arrDates=[[NSMutableArray alloc] initWithCapacity:1];
        for ( int i=0;i<3;i++) {
            NSString * dayTime=[arrDay objectAtIndex:i ];
            if (i==0) {
                day = [dayTime intValue];    
            }else if(i==1){
                month = [dayTime intValue];                    
            }else if(i==2){
                year = [dayTime intValue];    

            }
        }
        for ( int i=3;i<count;i++) {
            NSString * dayTime=[arrDay objectAtIndex:i ];
            hour = [[dayTime substringToIndex:2] intValue];
            minutes = [[dayTime substringFromIndex:3] intValue];

            [components setDay:day];
            [components setMonth:month];
            [components setYear:year];
            [components setMinute:minutes];
            [components setHour:hour];

            NSDate *myNewDate = [calendar dateFromComponents:components];

            [self scheduleNotificationForDate:myNewDate];

        }
    }

    [components release];
    [calendar release]; 
```

然后从这里它将连接到主通知触发方法
`[self scheduleNotificationForDate:myNewDate];`

```
-(void) scheduleNotificationForDate: (NSDate*)date {
    /* Here we cancel all previously scheduled notifications */
    [[UIApplication sharedApplication] cancelAllLocalNotifications];
    UILocalNotification *localNotification = [[UILocalNotification alloc] init];
    localNotification.fireDate = date;
    NSLog(@"Notification will be shown on: %@ ",localNotification.fireDate);

    localNotification.timeZone = [NSTimeZone defaultTimeZone];
    localNotification.alertBody = @"Your Notification Text"; //[NSString stringWithFormat:@"%@",date];
    localNotification.alertAction = NSLocalizedString(@"View details", nil);

    /* Here we set notification sound and badge on the app's icon "-1" 
     means that number indicator on the badge will be decreased by one 
     - so there will be no badge on the icon */

    localNotification.repeatInterval = NSDayCalendarUnit;
    localNotification.soundName = UILocalNotificationDefaultSoundName;
    localNotification.applicationIconBadgeNumber = -1;

    [[UIApplication sharedApplication] scheduleLocalNotification:localNotification];
} 
```

# android - 练习 android 设计指标？

> ID：10375129
> 
> 赞同：8
> 
> 时间：2012-04-29T19:14:27.450
> 
> 标签：android, android-layout, android-gui

阅读设计指南。我在尝试练习指标时遇到了一个小问题：

![在此处输入图像描述](../Images/0d4ea6c64ea33a4a6c4e16171443967c.png)

![在此处输入图像描述](../Images/17cbdf378fb72eafe4e549c12a38d97c.png)

如上所述，我们应该在按钮元素和文本输入字段的顶部和底部添加 4dp 边距。但是这些元素已经有可绘制对象指定的边距，这使得指南有点无效。

即使在下面的示例中将填充和边距指定为 0dp，我们仍然会得到一个边距：

![在此处输入图像描述](../Images/50f734aafa36b85c8d44116240033ed2.png)

我应该指定我自己的按钮可绘制对象，还是如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-22T10:08:55.130

它不会使指南无效。他们在撰写建议时已经考虑到了所有的填充/边距。这有点像**建议**（它不是强制性的），这意味着：

*   应用程序在设计方式上看起来像大多数其他应用程序（考虑到大多数开发人员会遵循指导，他们会这样做）
*   用户将更**容易**在屏幕上走动，更容易找到他/她需要看或做的事情。
*   UI对他/她来说看起来更**“自然”**和**直观**

我认为他们的设计团队付出了很多努力来使指南有效且有用。所以我的建议是尽可能多地遵循它，以提供更好的用户体验。不要在意这些细节。。

希望它有帮助..干杯;）

ps享受安卓仙境

# amazon-ec2 - 是否有提供 Amazon SQS 高可用性的 FIFO 消息队列服务？

> ID：10375137
> 
> 赞同：15
> 
> 时间：2012-04-29T19:15:28.697
> 
> 标签：amazon-ec2, activemq, rabbitmq, zeromq, amazon-sqs

如果 Amazon SQS 提供了某种 FIFO 访问的外观，我会喜欢使用它，但顺序似乎完全是随机的。

有什么东西可以为我提供具有 SQS 高可用性的 FIFO 排队作为云服务吗？

如果这要求太多 - 在 EC2 中将上述要求放在一起的最简单方法是什么？或者换句话说，在 EC2 中工作的最简单的高可用性队列解决方案是什么？

感谢您的见解！

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-05-02T00:54:18.820

## 2016-11-19 更新

Amazon SQS 刚刚获得了[具有 Exactly-Once 处理和重复数据删除功能的 FIFO 队列](https://aws.amazon.com/blogs/aws/new-for-amazon-simple-queue-service-fifo-queues-with-exactly-once-delivery-deduplication/)：

> 今天，我们通过支持 FIFO（先进先出）队列使 SQS 更加强大和灵活。**我们现在正在两个地区推出这种新型队列**，并计划在 2017 年初在许多其他地区推出。
> 
> **这些队列旨在保证消息只被处理一次，按照它们发送的顺序，并且没有重复**。[...]
> 
> *[强调我的]*

正如所强调的，这些新的 FIFO SQS 队列将涵盖手头的用例，但尚未在所有[SQS 区域](http://docs.aws.amazon.com/general/latest/gr/rande.html#sqs_region)中可用[最初仅在美国东部（俄亥俄）和美国西部（俄勒冈）]。此外，[FIFO 队列的 SQS 常见问题解答](https://aws.amazon.com/sqs/faqs/#fifo-queues)概述了标准队列和 FIFO 队列之间的显着差异，应预先考虑，例如每秒 300 个事务的吞吐量限制。

* * *

## 初步答案

> 如果 Amazon SQS 提供了某种 FIFO 访问的外观，我会喜欢使用它，但顺序似乎完全是随机的。

虽然我还没有体验过*完全随机*的消息排序（这可能取决于用例，尤其是消息量），但确实没有 FIFO 保证，请参阅相应的常见问题解答[Amazon SQS 是否提供先进先出（ FIFO) 访问消息？](http://aws.amazon.com/sqs/faqs/#Does_Amazon_SQS_provide_first_in_first_out_FIFO_access_to_messages)：

> 不，Amazon SQS 不保证对 Amazon SQS 队列中的消息的 FIFO 访问，主要是因为 Amazon SQS 的分布式特性。如果您需要特定的消息排序，您应该设计您的应用程序来处理它。

鉴于您对托管的[RabbitMQ](http://www.rabbitmq.com/)和*StormMQ*表达了兴趣，我不妨向您指出其他商业产品：

## 云AMQP

[CloudAMQP](http://www.cloudamqp.com/)是*RabbitMQ 即服务*，因此正是您所要求的，因为 RabbitMQ 支持所需的*真正 FIFO 消息排序*（请参阅[Amazon SQS 与 RabbitMQ](http://www.nsono.net/blog/?p=3)进行很好的比较）。

根据他们的计划和价格，它显然*仅作为一流平台提供商的插件提供*，因此您必须依次查看这些：

*   AppHarbor [CloudAMQP 插件](https://appharbor.com/addons/cloudamqp)
*   Heroku [CloudAMQP 插件](https://addons.heroku.com/cloudamqp)
*   cloudControl [CloudAMQP 插件](https://www.cloudcontrol.com/add-ons/cloudamqp)

## IronMQ

[IronMQ](http://www.iron.io/mq/) *为开发人员提供具有高度可靠交付和云优化性能的即用型消息传递*。~~它符合当今对[软件即服务 (SaaS)](http://en.wikipedia.org/wiki/Software_as_a_service)产品的期望，尤其是在易于理解且特别是已发布的定价模型方面~~正如Sleavely 正确[批评](https://stackoverflow.com/questions/10375137/is-there-a-fifo-message-queuing-service-offering-the-high-availability-of-amazon/10406388?noredirect=1#comment70682134_10406388)的那样，Iron.io 似乎已经放弃了其以前的示范定价模型 - 请参阅 Alex Payne[在 2012 年的《如何不销售软件》中](http://al3x.net/2012/02/29/how-not-to-sell-software-in-2012.html)进行了一次精彩的咆哮并就此提出建议。

到目前为止，我自己只对其进行了短期测试，但对所提供的功能和语言集成非常满意（请参阅[客户端库](http://dev.iron.io/mq/code/libraries/)和[Beanstalkd 支持](http://dev.iron.io/mq/code/beanstalkd/)）——考虑到它们具有竞争力的价格标签，尤其是免费层，使其成为探索消息队列作为一种服务解决方案，尤其是与他们的第二个产品[IronWorker](http://www.iron.io/worker/)（*一种易于使用且可大规模扩展的任务队列 [...]*）相结合，它提供了迄今为止 AWS 还没有的功能。

### FIFO消息排序

~~不幸的是，我无法弄清楚 IronMQ 是否直接支持真正的 FIFO，因此我实际上对此表示怀疑——因此，您需要提交支持请求来验证这一点。~~

[Iron.io 的Evan Shaw](https://stackoverflow.com/users/510/evan-shaw)证实 IronMQ 实际上提供了 FIFO 消息排序（非常感谢）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T03:48:29.387

查看 RabitMQ 和 StormMQ。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-29T14:09:04.607

ActiveMQ 是一种广泛使用的消息代理，它提供 FIFO 队列。如果您正在寻找与 AWS 一起使用的高可用性和托管版本，请查看[http://www.cinovo.de/activemq-as-a-service 。](http://www.cinovo.de/activemq-as-a-service)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-05-23T04:47:05.127

我认为 IronMQ 将是适合您的方式

# c++ - c++ 运行时问题

> ID：10375141
> 
> 赞同：1
> 
> 时间：2012-04-29T19:16:14.283
> 
> 标签：c++, runtime-error

好的，所以我遇到了一个问题，即没有将状态添加到我设置的二维数组（allStates）中。下面是被调用的 addState 函数的代码。allStates 是一个 10x10 数组，在此之前应该为空。

```
void addState(string stateName){
        for (int row=0; row<10; row++){
            for (int col=0; col<10; col++){
                if (allStates[row][col].get_name().empty()){
                    allStates[row][col].set_values(stateName);
                    cout << allStates[row][col].get_name();
                    break;
                }
            }   
        }   
}; 
```

下面是代码中调用 addState 函数的地方。

```
while(!infile.eof() && infile.good()){
    infile >> command;
    cout << command;
    if (command == "addState"){
        string stateName;
        infile >> stateName;
        cout << "\n" << stateName;
        a.addState(stateName);
        cout << a.get_state(stateName).get_name();
    }
} 
```

非常感谢任何提示！

编辑：

a 是一个类型 Area，它包含所有的函数，包括 addState、deleteState 等。我收到一个错误，说没有对象我无法调用这些函数，所以我创建了一个变量来允许它。

allStates 在 Area 类中使用所有这些函数进行初始化。

编辑2：

```
class Area{
State allStates[10][10];
public:
    void addState(string stateName){
        for (int row=0; row<10; row++){
            for (int col=0; col<10; col++){
                if (allStates[row][col].get_name().empty()){
                    allStates[row][col].set_values(stateName);
                    cout << allStates[row][col].get_name();
                    break;
                }
            }   
        }   
    };
    State get_state(string name){
        for (int row=0; row<10; row++){
            for (int col=0; col<10; col++){
                if (allStates[row][col].get_name() == name)
                    return allStates[row][col];
            }   
        }
    };
    void deleteState(string name){
        for (int row=0; row<10; row++){
            for (int col=0; col<10; col++){
                string newest;
                newest.clear();
                if (allStates[row][col].get_name() == name)
                    allStates[row][col].set_values(newest);
            }   
        }
    };
}; 
```

类中还有一些函数，但由于首先调用了 addState 函数，我不确定其他函数是否存在任何问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:45:23.777

```
allStates[row][col].get_name() 
```

您是否重视初始化 allState？否则，我怀疑二维数组中没有对象

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:37:15.917

虽然我希望看到有关 allstate 的更多信息，但我可以给您另一个提示，您可能喜欢也可能不喜欢。

```
while(infile >> command) {
//code
} 
```

当使用流作为条件时，它将为您检查流并返回 bool 并获取您尝试获取的值。它同时充当 .eof() && .good()。这也是避免意外将 '\n' 读入数组、列表等的好方法。

# ios - 清理^块

> ID：10375149
> 
> 赞同：0
> 
> 时间：2012-04-29T19:16:55.387
> 
> 标签：ios, ios5, objective-c-blocks, grand-central-dispatch

下面的方法来自《 *Professional iOS Augmented Reality book* (Apress) 》一书的[github](https://github.com/kyleroche/Professional_iOS_AugmentedReality)存储库。

 *在基于整体的示例中没有任何代码`UIViewController`处理清理。此处调用的 CoreImage 人脸检测例程可能需要几秒钟才能完成。

如果用户导致这个 viewController 消失了怎么办？我知道 ^block 由队列保留，这是将消息发送到 nil （当人脸检测例程返回时）实际上是一种好处的情况吗？

```
- (IBAction)detectFacialFeatures:(id)sender {

    self.detectingView.hidden = NO;
    self.scrollView.scrollEnabled = NO;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{

        CIImage *image = [[CIImage alloc] initWithImage:[FACE_IMAGES objectAtIndex:self.currentIndex]];

        NSString *accuracy = self.useHighAccuracy ? CIDetectorAccuracyHigh : CIDetectorAccuracyLow;
        NSDictionary *options = [NSDictionary dictionaryWithObject:accuracy forKey:CIDetectorAccuracy];
        CIDetector *detector = [CIDetector detectorOfType:CIDetectorTypeFace context:nil options:options];

        NSArray *features = [detector featuresInImage:image];

        dispatch_async(dispatch_get_main_queue(), ^{
            [self drawImageAnnotatedWithFeatures:features];
        });    
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:55:34.257

`dispatch_async()`复制该块，因为它将使其超出其声明范围。块中引用的所有对象在复制时都会保留。因此，假设您所指的 viewController 是`self`，它不会是`nil`。它将在块的生命周期内保留。*

# facebook - Facebook 分享按钮 - 自定义图片

> ID：10375158
> 
> 赞同：2
> 
> 时间：2012-04-29T19:18:03.620
> 
> 标签：facebook, facebook-graph-api, share

我正在尝试将 facebook 的分享按钮集成到我的页面中。我正在使用以下代码：

```
<a name="fb_share"></a> 
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" 
        type="text/javascript">
</script> 
```

这会生成图像和共享代码。但是，我正在尝试将自己的图像用于共享按钮。我正在使用以下代码：

```
<a name="fb_share"><img src="fb.png" /></a> 
<script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" 
        type="text/javascript">
</script> 
```

其中 fb.png 是带有 FB 徽标的自定义图像。

问题是我的图像与左侧的通用 Facebook 共享图像一起显示...您知道是否有一种方法可以为共享按钮实现自定义图像？

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-05-30T12:32:32.767

你应该这样做：

**HTML**：

```
<a id='share'><script src="http://static.ak.fbcdn.net/connect.php/js/FB.Share" 
    type="text/javascript"></script></a> 
```

**CSS**：

```
#share *{
   filter:alpha(opacity=0.1); 
   opacity:0.01;/*Hide Facebook button*/
}

#share{
  display:inline-block;

  /*The width and height of your image. Not bigger than the Like button!*/
  width: 10px;
  height: 10px;

  /*Your image*/
  background:url(fb.png);
} 
```

# php - 如何在 Mac OsX 10.7.3 上安装和运行 wkhtmltopdf 以在 PHP 应用程序中使用

> ID：10375168
> 
> 赞同：32
> 
> 时间：2012-04-29T19:19:12.627
> 
> 标签：php, macos, wkhtmltopdf

我编写了一个 PHP/MySQL 应用程序，它利用 wkhtmltopdf 从输入数据库的数据生成报告。客户要求我也安装它，以便在他拥有的 Mac 上独立运行。目前使用 XAMMP 可以毫无困难地运行 PHP/MySQL 部分，但即使在系统上安装 wkhtmltopdf 也遇到了难以置信的困难。

我对 Mac 的使用经验为零，尽管进行了五个小时的谷歌搜索并尝试了不同的方法，但我什至无法将最新的 wkhtmltopdf .i386 复制到 /usr 文件夹中。奇怪的是，笔记本电脑没有 /usr/local/bin 文件夹。

除非我错过了它，否则我找不到关于如何让这个东西工作的简单说明，并且非常感谢可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：73
> 
> 时间：2012-06-07T11:55:24.420

Homebrew 只有 wkhtmltopdf-0,9,9 并且默认情况下使用 QT 修补选项失败。因此，如果您需要带有完全支持选项的 HEAD 版本

*   为自己获取一份[新鲜的 wkhtmltopdf](https://wkhtmltopdf.org/)
*   打开它并拖动到应用程序
*   然后`cd /usr/local/bin && ln -s /Applications/wkhtmltopdf.app/Contents/MacOS/wkhtmltopdf wkhtmltopdf`

* * *

## 回答 #2

> 赞同：28
> 
> 时间：2016-10-11T23:00:44.830

如果您安装了 Homebrew，请运行： `brew install wkhtmltopdf`

这也将安装 wkhtmltoimage。

[或者，您可以从http://wkhtmltopdf.org/downloads.html](http://wkhtmltopdf.org/downloads.html)下载已编译的二进制文件，并将它们放在您的路径中的某个位置，例如 /usr/local/bin。如果您计划在服务器或 App Engine 等其他环境中运行脚本，那么这是可行的方法。

* * *

## 回答 #3

> 赞同：14
> 
> 时间：2014-08-14T19:07:07.867

这似乎很容易安装软件包：

[http://wkhtmltopdf.org/downloads.html](http://wkhtmltopdf.org/downloads.html)

我通过简单地运行 pkg 在我的 OSX 10.9.4 上成功安装了 OS X 10.6+ (Cocoa) 64 位。将它用于 PDFKit Rails gem。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-09-05T13:31:34.180

对于任何尝试将 mikehaertl\wkhtmlto\Pdf 与 MAMP 一起使用的人，请确保您为 Mac 安装最新版本[http://wkhtmltopdf.org/downloads.html](http://wkhtmltopdf.org/downloads.html)并定义二进制参数。

```
$options = array(
    'page-size' => 'Letter',
    'orientation' => 'portrait',
    'binary' => '/usr/local/bin/wkhtmltopdf'
);

$pdf = new Pdf($options); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-07-09T03:41:40.407

该命令对我很有效：

```
brew install --cask wkhtmltopdf 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-31T12:05:09.077

在创建 PDF 之前，您需要在终端中运行命令：

```
brew cask install wkhtmltopdf 
```

当我创建 PDF 时，我在服务器中得到这个日志：

```
2020-05-31 17:20:10.657  INFO 11168 --- [io-8080-exec-10] c.g.jhonnymertz.wkhtmltopdf.wrapper.Pdf  : Initialized with {xvfbConfig=null, wkhtmltopdfCommand='/usr/local/bin/wkhtmltopdf'}
2020-05-31 17:20:20.166  INFO 11168 --- [io-8080-exec-10] c.g.jhonnymertz.wkhtmltopdf.wrapper.Pdf  : PDF successfully generated with: /usr/local/bin/wkhtmltopdf -B 0 -L 0 -R 0 -T 0 --page-width 148 --page-height 212 /var/folders/0c/_vpt6xnj71ng91nm9kk5jw3w0000gn/T/java-wkhtmltopdf-wrapper6721963b-6a8c-4260-9ac6-a545920d1ab117331429448032181725.html - 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-29T19:56:32.513

Lion (10.7)`/usr/local`不再制作，但您可以创建它。

如果您想要的软件包没有二进制文件的安装程序，那么您必须从源代码编译。在这种情况下，您需要的所有说明都应该可以从软件包的下载站点获得。

另一种选择是查看它是否在任何 OS X 包管理器（Fink、MacPorts、Homebrew）中可用。如果是这样，您可以以这种方式安装所有内容。我可以说它不在 MacPorts 存储库中 - 我检查了:-)

**更新**： Homebrew 似乎有它......

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-01-06T05:25:59.270

我一直在努力安装 wkhtmltopdf，但经过一些研究，这帮助我将它安装在 MAC OSx 上

```
酿造安装 wkhtmltopdf --cask
```

# jquery - $.post 没有触发

> ID：10375170
> 
> 赞同：0
> 
> 时间：2012-04-29T19:19:27.813
> 
> 标签：jquery, asp.net

我有一些这样的脚本：

```
$("#button").click(function () {
 alert("before");
    $.post("doAction.aspx?id=hotel", {},
         function (response) {

             });
           alert("after");
       return false;
       }); 
```

没有`$.post`开火。我真的不知道错误是什么。我在其他地方使用了相同的脚本，效果很好。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T19:31:00.607

如果 alert("before") 正在触发并且您在浏览器的开发控制台中没有任何 JS 错误，那么 $.post 也会触发。我希望您收到错误响应，并且由于您没有提供处理程序（$.post 不允许您这样做），因此它将被简单地消耗和忽略。尝试更改为

```
$.ajax({
            type:'POST',
            url:"doAction.aspx?id=hotel",
            data:{},
            success:function(data){...},
            error:function (xhr, status, errorThrown) {
                console.log(xhr); //could be alert if you don't use the dev tools
            },
            dataType:"json"
        }); 
```

我相信你会进入错误处理程序

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:39:26.503

尝试这样做：

取一个隐藏字段并将您的 id 值存储到该字段中，然后像这样进行 ajax 调用

```
 $.ajax({
     type: "POST",
     url: 'doAction.aspx?somevalue=' + id,
     data: "{}",
     contentType: "application/json; charset=utf-8",
     dataType: "json",
     success: function (response) {

      }
   }); 
```

# php - Automatic logging into separate account within facebook

> ID：10375173
> 
> 赞同：0
> 
> 时间：2012-04-29T19:19:49.423
> 
> 标签：php, html, facebook, authentication, facebook-graph-api

As we all know, users can register/log into sites using their fb details. But what if you want to log a user into a separate web account within fb, such that the fb password and other web login passwords are different from each other? It is easy to log into that other web account from facebook using your username and password (external website is embedded into fb), but can you log a user **automatically** into the other website (with a different password)within fb? So basically integrating the external user database with the facebook database, and running a double authentication when logging into facebook(firstly the authentication for fb then the authentication for the external website login)

Note that the key difference here is that the fb login details and external website login details differ. Is this possible?

Hope I didn't articulate this too bad.

Thanks

# c# - Silverlight MVVM - 根据按钮的单击事件从查看代码隐藏中获取对 ListBoxItem 的引用

> ID：10375174
> 
> 赞同：0
> 
> 时间：2012-04-29T19:19:59.730
> 
> 标签：c#, silverlight, xaml, datatemplate, itemtemplate

好的，我在 Silverlight MVVM Light 应用程序中有以下 XAML 标记。这是观点的一部分。在视图代码隐藏中的 btnClearBodyMark 的单击事件中，我尝试使用 .Parent 属性向上遍历树，第一个父级是水平堆栈面板，然后它的父级是垂直堆栈面板，它的父级是网格，但是网格的父级是另一个网格？？如何获得对按钮所属的 ListBoxItem 的引用？？？

```
<ListBox Name="listboxBodyMarkValues" ItemsSource="{Binding}" Height="Auto" Width="Auto" SelectionChanged="listboxBodyMarkValues_SelectionChanged">
    <ListBox.ItemTemplate>
        <DataTemplate>
            <Grid>
                <StackPanel x:Name="stackBodyMarkList" Orientation="Vertical" Margin="5" Height="Auto">
                    <StackPanel Orientation="Horizontal" Margin="5" Height="Auto">
                        <TextBlock x:Name="txtId" Width="50" Height="Auto" Margin="10" HorizontalAlignment="Left" VerticalAlignment="Center" FontWeight="Bold" Text="{Binding Id}" />
                        <ComboBox x:Name="comboDom1" Width="100" Margin="5" HorizontalAlignment="Left" VerticalAlignment="Center" ItemsSource="{Binding Dom1}" SelectedItem="{Binding Dom1SelectedItem, Mode=TwoWay}" Visibility="{Binding ComboIsVisible}"/>
                        <Button x:Name="btnClearBodyMark" Content="Delete Body Mark" Margin="5" HorizontalAlignment="Left" VerticalAlignment="Center" Click="btnClearBodyMark_Click" />                                         
                    </StackPanel>
                    <TextBox x:Name="txtNotes" VerticalAlignment="Stretch" VerticalContentAlignment="Top" HorizontalAlignment="Stretch" TextWrapping="Wrap" Text="{Binding ManualText, Mode=TwoWay}" AcceptsReturn="True" Margin="5" MaxWidth="400" MaxHeight="200" VerticalScrollBarVisibility="Auto" IsEnabled="{Binding ManualTextIsEnabled}" />
                </StackPanel>
            </Grid>
        </DataTemplate>
    </ListBox.ItemTemplate>
</ListBox> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:34:34.473

通常，在 MVVM 中，如果您绑定**Command**，您可以传递一个**CommandParameter**并将**DataContext**放入其中，但最**重要**的事情是传递“ **DataContext** ”。由于这与 Click 事件相关联，因此将发送者类型转换为按钮，访问 DataContext，这应该是列表框中的对象。因此，如果您的列表框绑定到“客户”的**ItemsSource ，则按钮上的“** **DataContext** ”应该是“客户”对象。它应该被传递，因为 StackPanel 的 DataContext 将是该对象，并且它的所有子对象都应该具有相同的对象。例如：

```
public void btnClearBodyMark_Click(object sender, ButtonClickEventArgs e)
{
    var myRef = (sender as Button).DataContext;
} 
```

类似的东西。
PS，因为这很可能绑定到一组“对象”。该项目不再是每个说的 ListBoxItem，而是绑定集合的数据类型。**此外，如果您将 ListBox 的SelectedItem**属性绑定到 ViewModel 中的属性，并且模式为**Mode=TwoWay**
，您可以节省“SelectionChanged”事件的工作。确保您的属性（例如 ViewModel 中的“SelectedListItem”）通过确保您的 ViewModel 实现我认为在 System.ComponentModel 中找到的 INotifyPropertyChanged 来通知属性更改事件。这样，一旦用户选择了某些东西，就不需要偶数处理程序;)。

 ***** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T23:52:46.103

我也为此苦苦挣扎。作为旁注：您不应该传递 ListBoxItem。视图模型不应该关心列表是如何实现的。

真正帮助我的是 MVVM-Light 工具包。您可以创建自己的命令来接受一个参数（ListBoxItem 的 DataContext 的类型），然后在您想要的事件上执行它。

详情在这里：[http ://www.galasoft.ch/mvvm/#tutorials](http://www.galasoft.ch/mvvm/#tutorials)****

# php - sql / php - 验证用户登录

> ID：10375175
> 
> 赞同：0
> 
> 时间：2012-04-29T19:20:35.157
> 
> 标签：php, sql

尝试在 php 上验证用户登录。即使我使用正确的信息，我也会被发送到“index2.php”。知道我应该如何调试这个或我需要做什么吗？谢谢

**我还将查询更改为 SELECT COUNT(ID) FROM CUSTOMER

并将 if 语句设置为 "if ($result>1) {"

但仍然被发送到'index2.php'

```
<?php

// ----------------------
// Retrieve login information

   include("db_info.php");

// ----------------------
// Connect to database

$conn = oci_connect($db_user, $db_pwd, '(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(Host=*****.edu)(Port=1521)))(CONNECT_DATA=(SID=asuka)))');

if (!$conn) {
 $e = oci_error();
 print_r($e);
 exit();
}

// ----------------------
// Authenticate User

// Create query
$sql = "SELECT COUNT(ID) FROM CUSTOMER WHERE EMAIL='$email' AND PASSWORD='$password'";

// Create database query statement
$statement_id = oci_parse($conn, $sql);

// Execute query statement
$result = oci_execute($statement_id, OCI_COMMIT_ON_SUCCESS);

// Check for successful authentication
if ($result==1) {
    if ($email=="admin@hotmail.com") {
        $db_login_status = 2;
        header("location: index1.php");
    } else {
        $db_login_status = 1;
        header("location: index.php");
    }
} else {
    header("location: index2.php");
}

// ----------------------
// Close connections

oci_free_statement($statement_id);
oci_close($conn); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:38:44.983

这里有几个问题。一方面，我们有*if ($email="admin@hotmail.com")*。那应该 a) 是 == b) 后面有花括号。另一个问题是您无法在更改 http 位置标头之前输出文本，因此您应该摆脱 echo 语句。第三个问题是您在进行管理员检查以转发到 index1.php 之前重定向到 index.php。

# java - 在 Java 中创建自定义侦听器

> ID：10375178
> 
> 赞同：14
> 
> 时间：2012-04-29T19:21:01.090
> 
> 标签：java, swing, listener

我想知道如何为某些东西创建自己的侦听器，并且能够像任何其他侦听器一样使用它，例如。

```
public interface Listener {

    public void onListen(Event e);

} 
```

然后在我的课上

```
public class test implements Listener {

    Object.add(new Listener() { 

        @Override
        public void onListen(Event e) {

        }
    });
} 
```

我想我真正要问的是我在哪里定义如何检查是否发生与我创建的侦听器有关的事情？

如果其中任何一个没有意义，请告诉我，我会澄清它。

如果充其量这对你没有意义，我会试试这个。我将如何制作一个监听器来检查组合框中的选定选项是否已更改为不同的选项。不过，我实际上并不需要组合框侦听器，这只是一个示例。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-29T19:45:21.360

这是一个简短的例子：

```
 private static class Position {
    }

    private static class Ball {
        private ArrayList<FootballObserver> observers = new ArrayList<FootballObserver>();
        private Position ballPosition = new Position();

        public void registerObserver(FootballObserver observer) {
            observers.add(observer);
        }

        public void notifyListeners() {
            for(FootballObserver observer : observers) {
                observer.notify(ballPosition);
            }
        }

        public void doSomethingWithFootballPosition() {
            //bounce etc
            notifyListeners();
        }
    }

    private static interface FootballObserver {
        void notify(Position ball);
    }

    private static class Player implements FootballObserver {
        public void notify(Position ball) {
            System.out.println("received new ball position");
        }
    }

    public static void main(String... args) {
        FootballObserver player1 = new Player();
        Ball football = new Ball();
        football.registerObserver(player1);
        football.doSomethingWithFootballPosition();
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:38:26.070

创建您需要的侦听器没有问题，但您只能将它应用于期望它的类（所以您不能这样做`(new Object()).addMyListener`）

您需要在要使用侦听器的类中添加一个`addMyListener(MyListener myListener)`方法。它只是将您传递给它的侦听器存储在列表中以供以后用户使用。使用 addMyListener 方法（和 a `fireMyListeners()`）方法创建一个接口也是一个好主意。

当然，您也必须提供调用该`fireMyListeners()`方法的代码。然后`fireMyListeners()`将遍历侦听器并调用他们的通知方法。

# java - 输入可迭代元素的子序列库

> ID：10375182
> 
> 赞同：1
> 
> 时间：2012-04-29T19:21:58.390
> 
> 标签：java

我已经搜索了一段时间，但我还没有在 java 中找到一个等效的库来完成[itertools.combinations](http://docs.python.org/library/itertools.html#itertools.combinations)的功能。我拒绝相信这样的图书馆不存在。

有人可以指向一个 java 库，它返回给定容器上的迭代器的元素子序列（组合或排列）。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-04-29T20:01:58.493

检查谷歌的番石榴[http://code.google.com/p/guava-libraries/](http://code.google.com/p/guava-libraries/)。 [http://docs.guava-libraries.googlecode.com/git-history/v11.0.2/javadoc/index.html](http://docs.guava-libraries.googlecode.com/git-history/v11.0.2/javadoc/index.html)

# c++ - 缓慢的纹理加载

> ID：10375184
> 
> 赞同：1
> 
> 时间：2012-04-29T19:22:01.780
> 
> 标签：c++, qt, opengl

我有大约六个文件，每个文件 250 KB 到 500 KB。这些文件中的每一个都有多个 QImage；每个文件大约 400 张 128x64 的图像。加载到内存的速度约为 60MB/s（因为 OpenGL 需要将 PNG 解压缩为它自己的格式）。

有没有可能加快这个过程？它非常缓慢，因为我有一个演出要填补。

```
QFile file("file.ucv");

if (file.open(QIODevice::ReadOnly)) {
    qDebug() << "Read from hdd";

    QDataStream r(&file);
    r.setVersion(QDataStream::Qt_4_3);

    QImage t;

    int i = maxPics * place;
    glGenTextures(maxPics, &texture[i]);
    for (int y = 0; y < yNrPics; y++)
        for (int x = 0; x < xNrPics; x++, i++) {

            // Write to precomputed object
            r >> t;

            glBindTexture( GL_TEXTURE_2D, texture[i] );
            glTexImage2D( GL_TEXTURE_2D, 0, GL_COMPRESSED_RGBA, t.width(), t.height(), 0, GL_RGBA, GL_UNSIGNED_BYTE, t.bits() );
            glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MIN_FILTER, GL_NEAREST );
            glTexParameteri( GL_TEXTURE_2D, GL_TEXTURE_MAG_FILTER, GL_NEAREST );
        } 
```

分析器发现这条线是最消耗量的：

```
 glTexImage2D( GL_TEXTURE_2D, 0, GL_COMPRESSED_RGBA, t.width(), t.height(), 0, GL_RGBA, GL_UNSIGNED_BYTE, t.bits() ); 
```

将压缩更改为非压缩可以节省一些时间，但仍然不多。

加载的 QImage 为 GL 格式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:10:21.087

确保您确定您的数据：

*   即确保分析器显示挂钟，而不仅仅是 CPU 消耗（因为磁盘 i/o 不消耗 CPU，但需要时间）。

另外，避免工作是最好的优化：

*   如果要使用压缩纹理，只需压缩一次（第一次上传），然后下载压缩数据并将其缓存到磁盘。后续上传应将压缩数据直接从磁盘发送到 OpenGL，无需从 png-via-raw-to-gl 重新压缩。

流水线工作，尤其是 I/O 是加快速度的好方法，而且通常很容易（生产者-消费者并行）：

*   通过使用单独的线程来加载图像和创建纹理来管道上传。Qt 通过 QtConcurrent 库在这里提供了很好的支持，这意味着您不必自己处理线程。（不过，您将需要使用 QGLWidget::makeCurrent）

尽可能使用 CPU 上的所有可用内核：

*   考虑使用多个线程将数据上传到 OpenGL。使用像素缓冲区对象，您可以获得指向纹理数据缓冲区的指针，然后使用 memcpy 将其上传。（memcpy 线程不需要激活上下文。）。
*   纹理压缩是在 GL 驱动程序中的软件中完成的，因此跨内核并行上传也将有所帮助，但您可能必须创建多个 GL 上下文（共享数据）才能让 GL 驱动程序并行压缩。在你尝试这个之前，看看它是否是平行的应该不会太难。

此外，当您不需要时，请避免通过缓冲 API:s 流式传输数据：

*   通过内存映射文件，可以非常有效地完成数据上传（无需缓冲，直接从磁盘到 GL），只需从映射缓冲区到纹理指针的 memcpy。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:58:16.050

如果您确定瓶颈在于那段代码，您可能会做几件事：

*   不要使用`GL_COMPRESSED_RGBA`，而只是简单地使用`GL_RGBA`
*   找到驱动程序的最佳类型，并使用它（您需要分析 opengl 程序）
*   在 png 文件中使用原始数据（避免压缩）
*   将文件拆分成更小的文件

# c - 在 C 中将有符号字符 [] 转换为无符号字符 []

> ID：10375185
> 
> 赞同：-3
> 
> 时间：2012-04-29T19:22:02.677
> 
> 标签：c, char

我想在 C 中将一个有符号字符数组转换为一个无符号字符数组。我该怎么做？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T19:31:22.867

为什么不使用 memcpy？

```
unsigned char uChars[count];
signed char sChars[count];

memcpy(uChars, sChars, count); 
```

# asp.net - asp.net mvc 4.0中的远程验证是在鼠标点击而不是在textchange上调用的？

> ID：10375193
> 
> 赞同：0
> 
> 时间：2012-04-29T19:23:10.870
> 
> 标签：asp.net, asp.net-mvc, remote-validation

我在 asp.net mvc 中使用远程验证遇到了一个非常奇怪的行为。

这些是重现该行为的步骤：

```
1.) Enter user name "1" in the database
2.) Enter user name "1" in the Create User dialog -> nothing happens, I expected an error message
3.) I remove the "1" in the text box.
4.) I enter "1" again in the text box. -> Again nothing happens.
5.) Then I click with the mouse somewhere on the dialog
6.) Suddenly the error message appears, that user name "1" already exists ? 
```

这是远程验证在 asp.net mvc 中的工作方式吗？

更糟糕的是，当我单击提交按钮时，验证操作和创建操作都会被触发，这会导致总的意外/无法控制的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-20T09:46:30.927

实际上它可以通过简单的解决方案来解决，我们可以将验证放在 keypress 事件中以进行特定输入，这样就可以了

```
$("input[type='text'"]).keypress(function() {
  $(this).valid();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:27:19.347

那么通过你描述的过程可能会发生两件事..

1.  jQuery 的文本更改事件仅在相应的输入标记失去焦点时触发（通过按标签或单击鼠标）

2.  远程验证需要时间来发送 AJAX 请求然后获得响应，因此您应该确保远程验证请求可能是在正确的时间发送的，但是您得到的响应恰好与鼠标单击一致。

# android - Android：如何让应用在所有 Android 手机上运行

> ID：10375197
> 
> 赞同：1
> 
> 时间：2012-04-29T19:23:25.893
> 
> 标签：android, service, jsoup

我正在开发一个专门用于网站提供的服务的应用程序。使用此应用程序，用户可以登录到实际网站并执行活动。

在编码部分，我将 JSOUP 1.6.1 jar 用于我的 Android 应用程序。这个罐子让我可以连接到互联网。这个应用程序在 Sony Xperia、所有 Android 模拟器甚至 Galaxy 模拟器上运行良好。但是，当我的应用程序在其他手机上运行时，没有建立与该网站的连接，因此我的应用程序失败了。

我正在为我的应用程序使用 Android 2.3+，API 级别 10。

我已授予与访问互联网相关的 Android 应用程序的所有权限。

JSOUP 可以在所有 Android 手机上运行吗？？？如果它正在运行，请告诉我为什么我的应用程序无法在其他 Android 手机上运行。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:28:49.373

如果您使用 API 级别 10 进行开发，那么您的应用将无法在任何 API 级别较低的设备上运行。您可以将项目的 API 级别设置为较低的级别，以查看您是否正在使用与早期级别不兼容的任何 API 调用。如果是这样，那么也许您可以将它们替换为其他 API 调用。否则，您可能会被困在仅在 API 级别 10+ 设备上运行。

此外，请参阅[此博客文章](http://android-developers.blogspot.com/2010/07/how-to-have-your-cupcake-and-eat-it-too.html)了解如何开发向后兼容的应用程序。

# javascript - 为什么这个自定义提交不起作用？

> ID：10375202
> 
> 赞同：2
> 
> 时间：2012-04-29T19:24:18.177
> 
> 标签：javascript, jquery, html, submit, keyboard-events

我有这个提交登录表单的按钮：

```
<input class="btn btn-large btn-success" id="login-button" onclick="handleLogin()" name="submit" type="submit" value="Login"/> 
```

我有这个功能，当用户按下回车键时，我想用它来进行自定义提交：

```
$(document).ready(function () {

     $(document).keyup(function(event) { 

        if(event.which == 13) {

            $('#login-button').click();
            //event.preventDefault();
            //return false;
        }
    });
}); 
```

然而，这根本没有做任何事情。我尝试过使用和不使用代码的注释部分。请注意，单击时可以提交表单，并且我在`form`元素中没有输入字段。我正在使用 handleLogin() 使用 AJAX 提交。**所以我真正想要的是`#login-button`被点击！**各位看出来问题了吗？提前致谢。

**更新：**我正在使用 Chrome BETA 频道。

**重要提示！：我希望在按 ENTER 时单击#login-button。仅此而已。我已经知道如何提交表格。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T19:28:45.953

### *[演示小提琴](http://jsfiddle.net/roXon/vmYNU/2/)*

```
$(document).ready(function () {    
     $(document).keyup(function(event) {  
        if(event.keyCode === 13) {

            $('#yourForm').submit(); // submit form
             alert('yeah!')

            event.preventDefault();
            return false;
        }          
     });     
}); 
```

使用：`keyCode`而不是`which`
使用：`.submit()`与您的形式的`name`或`id`。[http://api.jquery.com/submit/](http://api.jquery.com/submit/)
你错过了一个`});`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:33:04.100

这是处理提交表单事件的更好方法：

```
<form id="form">
...
//input texts ...
...
<input type="submit" value="Send"/>
</form> 
```

然后，jquery（你不需要知道按下的键，只需要提交按钮或回车键调度的**提交事件）：**

```
$("#form").submit(function(e){
e.preventDefault();
//your logic ...
}); 
```

# .net - 一系列依赖元素的工厂

> ID：10375203
> 
> 赞同：0
> 
> 时间：2012-04-29T19:24:26.973
> 
> 标签：.net, factory, factory-pattern

我正在开发一个生成轨道的轨道生成器（用于我未来的赛车游戏）。建好后，轨迹由游戏引擎等处理。Track 是元素的集合，可以是：

*   短/长直
*   慢/中/快弯

每个元素都有一个长度属性，应该在构建轨道元素时生成。元素依赖于生成之前的元素（在慢速弯道之后有快速弯道有点奇怪）。

我第一次寻求“ifing”的解决方案：

```
public class ElementType
{
    ...
    public double GenerateLength()
    {
        switch (m_TypeEnum)
        {
            case ElementTypeEnum.SlowSpeedCorner:
                return Parameters.SlowCornerAvgLength+Generator.GetDeviation;
            ...
            case ElementTypeEnum.LongStraight:
            default:
                return Parameters.LongStraightAvgLength + Generator.GetDeviation(Parameters.LongStraightLengthMaxDeviation);
        }
    }
    ...
    public IList<ElementType> GetPossibleSuccessors()
    {
        switch (m_TypeEnum)
        {
            case ElementTypeEnum.SlowSpeedCorner:
                return new List<ElementType>() { new ElementType(ElementTypeEnum.SlowSpeedCorner), new ElementType(ElementTypeEnum.ShortStraight), new ElementType(ElementTypeEnum.LongStraight) };
            ...
            case ElementTypeEnum.LongStraight:
            default:
                return new List<ElementType>() { new ElementType(ElementTypeEnum.SlowSpeedCorner), new ElementType(ElementTypeEnum.MediumSpeedCorner), new ElementType(ElementTypeEnum.FastSpeedCorner) };
        }
    }
}

public enum ElementTypeEnum : int
{
    LongStraight = 1,
    SlowSpeedCorner = 2,
} 
```

生成器基于方法：

```
public static TrackElement GenerateElement(TrackElement Predecessor)
{
    ElementType type = SelectElementType(Predecessor);
    double length = type.GenerateLength();
    return new TrackElement(type, length);
}

private static ElementType SelectElementType(TrackElement Predecessor)
{
    IList<ElementType> successors = Predecessor.Type.GetPossibleSuccessors();
    int possibleSuccessors = successors.Count;
    int selected = Generator.GetInt(possibleSuccessors);
    return successors[selected];
} 
```

但正如您可以猜到的那样，当在引擎中使用它时，这是一场戏剧 - 结果是每个属性都有太多的“ifing”。所以我将元素移动到不同的类基于：

```
public abstract class TrackElement
{
    public TrackElement(double Length)
    {
        m_length = Length;
    }
    protected abstract static double GenerateLength();

   public sealed double Length 
   { 
        get
        {
            return m_length;
        }
   }
} 
```

但是现在我在使用提供的类构建轨道时遇到了问题：

```
public static TrackElement GenerateElement(TrackElement Predecessor)
{
    ??? type = SelectElementType(Predecessor);
    double length = type.GenerateLength();
    return new ???(length);
} 
```

当然我知道我不能这样做，因为 GenerateLength 是静态的，我只想起草我的问题。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T04:13:44.720

将轨道排序逻辑与构建逻辑分离；将其移至负责构建完整轨道的实体。然后让你的工厂有有用的名字。

```
public abstract class TrackElementFactory
{
    public abstract TrackElement CreateFastCurve();
    public abstract TrackElement CreateLongStraight();
}

public class TrackArranger
{
     public Track CreateAwesomeTrack()
     {
          var factory = //get from somewhere
          var track = new Track();
          track.Add(factory.CreateFastCurve());
          track.Add(factory.CreateLongStraight());
          ....
          return track;
     }
} 
```

此外，您可能会对 TrackElement 抽象的这种更改感到满意。它使您的实现更干净。

```
public abstract class TrackElement
{
   public abstract double Length 
   { 
        get;
   }
} 
```

# javascript - jquery 在单击单选按钮时选择并激活特定类的所有项目

> ID：10375212
> 
> 赞同：0
> 
> 时间：2012-04-29T19:26:14.990
> 
> 标签：javascript, jquery, label, css-selectors

我是 Javascript 新手，但我在做一些 javascript 的工作中遇到了一个问题。我们正在为客户定制产品以创建表单。表单对象（文本字段、下拉菜单等）出现在菜单中。可以使用 Ctrl 键单独或多个选择这些对象中的每一个。我们被要求启用单选按钮，以便客户可以轻松选择它们。每一个都是分组的，所以可以很容易地选择。

例如。(a) 选择所有客户联系选项 (b) 客户组织详细信息 选择后，它们应该可以拖放到表单中。

因此，技术术语的要求是

1.  各种组的单选按钮（客户联系选项等）

2.  选择单选按钮后，激活相关的对象类别。

3.  启动拖动/移动功能

    HTML 片段类似于.. //replaced < to ( 以作为代码

> ```
>  (div class="FormElementMain" style="TOP: 5px; LEFT: 10px" FieldType="Label")
>   (span class="contactOptionsLabel" style="width: 50px")Mobile Number(/span)
> (/div)
> (div class="FormElementMain" style="TOP: 5px; LEFT: 20px" FieldType="Label")
>   (span class="contactOptionsLabel" style="width: 50px")Tel Number(/span)
> (/div)
> (div class="FormElementMain" style="TOP: 5px; LEFT: 30px" FieldType="Label")
>   (span class="orgDetailsLabel" style="width: 50px")Job Designation(/span)
> (/div) 
> ```

我们需要绑定的产品代码（函数）是：

```
function selectLabelClass(object)
{

    object.addClass("highlightDiv");   // Just to highlight the div class so a shade appears around the text
    var currentWrapper=object;

    CurrentObject.push(new MoveObject(currentWrapper));
    currentWrapper.draggable({ grid: [GridSizeX, GridSizeY], containment: ".ui_fieldsetset" });

    DisplayProperties();
} 
```

因此，一旦单击单选按钮，我就会尝试将标签类启动为

```
$("#selectLabelRadioButton").live("click",
        function () 
        {
            selectLabelClass(".contactOptionsLabel");
        });

 }); 
```

虽然它不起作用:(任何人都可以建议如何使用单选按钮激活一个类/一组对象

在单独的说明中，我尝试了一个简单的测试并且它有效。// 只是为了使用红色边框突出显示类的所有对象。// 所以真的只是想知道如何用另一个自定义函数替换 .css

```
 $("#selectLabelRadioButton").click(function(){
   $(".selectLabelClass").css("border","3px solid red");
 }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:30:00.073

我不知道您的所有代码都不是您的问题。

但是您只是将字符串而不是 jQuery 对象传递给`selectLabelClass`期望获得 jQuery 对象的对象...

改变这个：`selectLabelClass(".contactOptionsLabel");`
到这个：`selectLabelClass($(".contactOptionsLabel"));`

```
$("#selectLabelRadioButton").live("click", function() {
    selectLabelClass($(".contactOptionsLabel"));
});​ 
```

# string - 准备一个巨大的文本文件的相关矩阵

> ID：10375214
> 
> 赞同：1
> 
> 时间：2012-04-29T19:26:17.833
> 
> 标签：string, split, out-of-memory, text-files, large-data

我有两个文本文件目录。一个有`User Description`，另一个有`User Messages`字段`DATE<\t>NAME<\t>DESCRIPTION`和`DATE<\t>NAME<\t>MESSAGE`。我的主要目标是获得这两个文件之间的配置文件和消息词之间的相关矩阵。

一个例子是：

```
 *message words*
                          cat     dog    mouse ....
*profile words*    cat    100     20      50
                   dog     2      30      22  ...
                   ...
                   ... 
```

在这里，cat 和 cat 之间的数字 100 表示“在个人资料描述中包含“cat”的任何用户撰写的所有消息中，“cat”一词出现了 100 次”。

我尝试使用 Java 解决这个问题，但由于文本文件的大小，即使是更简单的程序版本也无法运行。这是我几天前发布的[问题。](https://stackoverflow.com/questions/10360046/string-split-out-of-memory)该`awk`工具确实解决了我之前的问题。

我的问题是，有没有什么有效的方法来解决这类问题？我没有语言限制。另外，我对 diff、cat 等 bash 实用程序有一些了解。

仅供参考，我`User Messages`有 1.7G 的多个文本文件。`User Description`大约 400M 也有多个文件。我能给 Java 最多的内存是 -Xmx1800m。

另外，如果这不是一个有效的问题，请告诉我。我会删除帖子。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:33:28.947

尝试查看 Lucene 库，它起源于 java，但也移植到 C# 和 C++（至少）。

您所做的称为“索引”-您创建文档（例如，它可以与简单文件相关联）。每个文档都可以包含可选字段 - 文件出现的目录。之后很容易计算特定单词的数量甚至更多的单词形式（比如猫对猫）

# java - 单个方法的持续时间 (Java)

> ID：10375219
> 
> 赞同：5
> 
> 时间：2012-04-29T19:27:02.430
> 
> 标签：java, eclipse, performance, debugging, profiling

是否有某种工具/插件（最好用于 eclipse）可以让我确定我的代码的每个方法花费多少时间或类似的东西？或者也许确定什么花费了异常大量的时间？提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T19:33:11.583

看看[Eclipse 测试和性能工具平台 (TPTP)](http://www.eclipse.org/articles/Article-TPTP-Profiling-Tool/tptpProfilingArticle.html) - 它允许您分析为单次执行输入的所有方法。这是一种非常非侵入性的方法——它不会强迫您进行代码更改。

以下是[安装说明。](http://wiki.eclipse.org/Install_TPTP_with_Update_Manager)

**编辑：**它接缝，[TPTP 在 Eclipse Helios 之后不可用](http://www.eclipse.org/tptp/home/project_info/devplans/EclipseTPTPProjectPlan2010.htm)。您可以将 VisualVM 用作独立的分析器。如果你想要 Eclipse 集成，有工具[JVM Monitor](http://www.jvmmonitor.org/index.html)，但我已经注意到使用了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T19:45:05.157

对于这类任务，您可以使用像 VisualVM 这样的分析器。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-05-04T07:54:38.810

[JProfiler](http://www.ej-technologies.com/products/jprofiler/overview.html)还提供了一个 eclipse 插件，让您可以直接从 eclipse IDE 分析您的运行配置。结果显示在 JProfiler 窗口中，但来自 JProfiler 的源代码导航返回到 eclipse。[您可以在此屏幕截图](http://blog.ej-technologies.com/2009/06/jprofilers-ide-integrations.html)中看到这一点。

如果您正在寻找性能瓶颈，您应该从 CPU 部分的“热点”视图开始。这将向您展示花费最多时间的方法。

免责声明：我公司开发JProfiler

# wordpress - phpnuke 到 wordpress 脚本

> ID：10375221
> 
> 赞同：0
> 
> 时间：2012-04-29T19:27:14.737
> 
> 标签：wordpress

我正在寻找可以将我的所有数据从 phpnuke 中构建的旧网站传输到将在 wordpress 中构建的新网站的脚本，包括所有用户和通行证、帖子等，有人怎么样？谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T12:18:59.067

使用此脚本，您可以将 postnuke 文章转换为 WordPress

来源：[http ://www.csamuel.org/wp-content/uploads/2007/01/pnconvert.txt](http://www.csamuel.org/wp-content/uploads/2007/01/pnconvert.txt)

```
 <?php

/*
   pnconvert.php - a simple script to convert postnuke articles into WordPress
                   entries.
   Copyright 2004 Bryan Klingner (wares.b@overt.org)

   This program is free software; you can redistribute it and/or modify
   it under the terms of the GNU General Public License as published by
   the Free Software Foundation; either version 2 of the License, or
   (at your option) any later version.

   This program is distributed in the hope that it will be useful,
   but WITHOUT ANY WARRANTY; without even the implied warranty of
   MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
   GNU General Public License for more details.

   You should have received a copy of the GNU General Public License
   along with this program; if not, write to the Free Software
   Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
*/

    $submit = $_POST['submit'];

    $hostname = "localhost";
    $username = "FIXME";
    $password = "FIXME";

    $sourcedb = "FIXME"; // your postnuke database
    $sourcetable = "nuke_stories"; // your postnuke stories table
    $sourcecat = "nuke_topics"; // your postnuke topics table

    $destdb = "FIXME"; // your wordpress database
    $desttable_prefix = "FIXME"; // you word press table prefix

    $db_connect = @mysql_connect($hostname, $username, $password) 
                    or die("Fatal Error: ".mysql_error());

    mysql_select_db($sourcedb, $db_connect);
    $srcresult = mysql_query("select * from $sourcetable", $db_connect) 
                    or die("Fatal Error: ".mysql_error());

    $srccatresult = mysql_query("select * from $sourcecat", $db_connect)
                    or die("Fatal Error: ".mysql_error());

    // sanitize function stolen from wordpress source
    // used to generate the dashed titles in the URLs
    function sanitize($title) {
        $title = strtolower($title);
        $title = preg_replace('/&.+?;/', '', $title); // kill entities
        $title = preg_replace('/[^a-z0-9 _-]/', '', $title);
        $title = preg_replace('/\s+/', ' ', $title);
        $title = str_replace(' ', '-', $title);
        $title = preg_replace('|-+|', '-', $title);
        $title = trim($title, '-');

        return $title;
    }
?>

<html>
<head>
    <title>Convert postnuke stories and comments to WordPress</title>
</head>
<body>
<h1>Convert postnuke stories and comments to WordPress</h1>
<hr>
<?php
    if($submit)
    {
        echo "<p>Converting Postnuke to WP2 databases!</p>";
    }
    else
    {
        echo "<p>This is a preview of what is going to happen,
            to actually convert you'll need to press the
            button at the very bottom of this page!</p>";
    }
?>

<hr>
<h2>Category Conversions</h2>

<?php
    // copy over categories
    $rownum = 0;
    while ($myrow = mysql_fetch_array($srccatresult))
    {
        $mytopictext = mysql_escape_string($myrow['pn_topictext']);
        $sql = "INSERT INTO `" . $desttable_prefix . "categories`
               (
                 `cat_ID`,
                 `cat_name`,
                 `category_nicename`,
                 `category_description`
               )
               VALUES
               (
                 '$myrow[pn_topicid]',
                 '$myrow[pn_topicname]',
                 '$mytopictext',
                 '$mytopictext'
               );";
        print $sql;
    echo "<br />";
    if ($submit && ( $myrow[pn_topicid] > 1 ) )
        {
            mysql_select_db($destdb, $db_connect);
            mysql_query($sql, $db_connect) or die("Fatal error: ".mysql_error());
        }

    }

?>
<hr>
<h2>Story Conversion</h2>
<table cellpadding="2" cellspacing="3" bgcolor="#DDDDDD">
    <thead>
        <td>pn_sid</td>
        <td>pn_title</td>
        <td>pn_time</td>
        <td>pn_hometext</td>
        <td>pn_bodytext</td>
        <td>pn_topic</td>
        <td>pn_counter</td>
        <td>comments</td>
    </thead>
<?php
    $rownum = 0; 
    while ($myrow = mysql_fetch_array($srcresult))
    {

        $myhometext = mysql_escape_string($myrow['pn_hometext']);
    if($myrow['pn_bodytext'])
    {
            $mybodytext = mysql_escape_string($myrow['pn_bodytext']);
        $myhometext = $myhometext.'\n<!--more-->\n'.$mybodytext;
        #$myhometext = $mybodytext;
    }

        $mytitle = mysql_escape_string($myrow['pn_title']);
        $myname = mysql_escape_string(sanitize($mytitle));
        $sql = "INSERT INTO `" . $desttable_prefix . "posts` 
               ( 
                 `ID` ,
                 `post_author` ,
                 `post_date` ,
                 `post_date_gmt` ,
                 `post_content` ,
                 `post_title` ,
                 `post_name` ,
                 `post_category` ,
                 `post_excerpt` ,
                 `post_status` ,
                 `comment_status` ,
                 `ping_status` ,
                 `post_password` ,
                 `to_ping` ,
                 `pinged` ,
                 `post_modified` ,
                 `post_modified_gmt` ,
                 `post_content_filtered` ,
                 `post_parent` ) 
               VALUES 
               ( 
                 '$myrow[pn_sid]',
                 '1',
                 '$myrow[pn_time]',
                 '0000-00-00 00:00:00',
                 '$myhometext',
                 '$mytitle',
                 '$myname',
                 '$myrow[pn_topic]',
                 '',
                 'publish',
                 'open',
                 'open',
                 '',
                 '',
                 '',
                 '$myrow[pn_time]',
                 '0000-00-00 00:00:00',
                 '',
                 '0' );";

        // only really do insert if requested
        if ($submit)
        {
            mysql_select_db($destdb, $db_connect);
            mysql_query($sql, $db_connect);

            // now get the ID of the post we just added
            $sql = "select MAX(ID) from " . $desttable_prefix . "posts";
            $getID = mysql_query($sql, $db_connect);
            $currentID = mysql_fetch_array($getID);
            $currentID = $currentID['MAX(ID)'];
            printf("<h2>Just inserted ID %s</h2>\n", $currentID);

            // add post2cat map... why does he have this table?
            if ($myrow['pn_topic'] == 0)
                $topicnum = 1;
            else
                $topicnum = $myrow['pn_topic'];
            $sql = "insert into `" . $desttable_prefix . "post2cat` (`post_id`, `category_id`) VALUES ('$currentID', '$topicnum');";
            $result = mysql_query($sql, $db_connect) or die("Fatal error: ".mysql_error());
        }

        // print out source information
        if ($rownum++ % 2 == 0)
            printf("<tr bgcolor=\"#BBBBBB\">");
        else
            printf("<tr>\n");
        printf("    <td>%s</td>\n
                    <td>%s</td>\n
                    <td>%s</td>\n
                    <td>%s</td>\n
                    <td>%s</td>\n
                    <td>%s</td>\n
                    <td>%s</td>\n", 
                $myrow["pn_sid"], 
                $myrow["pn_title"], 
                $myrow["pn_time"], 
        $myrow["pn_hometext"], 
        $myrow["pn_bodytext"], 
                $myrow["pn_topic"], 
                $myrow["pn_counter"]);

        // retreive all associated comments
        $mysid = $myrow["pn_sid"];
        mysql_select_db($sourcedb, $db_connect);
        $comments = mysql_query("select * from nuke_comments where pn_sid = $mysid", $db_connect);
        print "<td>";
        print "<table cellpadding=\"2\" cellspacing=\"3\" bgcolor=\"#DDDDDD\">";
        print "<thead>";
        print "    <td>pn_tid</td>";
        print "    <td>pn_sid</td>";
        print "    <td>pn_date</td>";
        print "    <td>pn_name</td>";
        print "    <td>pn_email</td>";
        print "    <td>pn_url</td>";
        print "    <td>pn_host_name</td>";
        print "    <td>pn_subject</td>";
        print "    <td>pn_comment</td>";
        print "</thead>";

        $comrownum = 0;
        while ($comrow = mysql_fetch_array($comments))
        {

            $myname = mysql_escape_string($comrow['pn_name']);
            $myemail = mysql_escape_string($comrow['pn_email']);
            $myurl = mysql_escape_string($comrow['pn_url']);
            $myIP = mysql_escape_string($comrow['pn_host_name']);
            $mycomment = mysql_escape_string($comrow['pn_comment']);
            $sql = "INSERT INTO `" . $desttable_prefix . "comments` 
                     ( 
                        `comment_ID` , 
                        `comment_post_ID` , 
                        `comment_author` , 
                        `comment_author_email` , 
                        `comment_author_url` , 
                        `comment_author_IP` , 
                        `comment_date` , 
                        `comment_date_gmt` , 
                        `comment_content` , 
                        `comment_karma` , 
                        `comment_approved` , 
                        `user_id` )
                     VALUES 
                     (
                        '',
                        '$currentID',
                        '$myname',
                        '$myemail',
                        '$myurl',
                        '$myIP',
                        '$comrow[pn_date]',
                        '0000-00-00 00:00:00',
                        '$mycomment',
                        '0',
                        '1',
                        '0'
                     );";

            if ($submit)
            {
                mysql_select_db($destdb, $db_connect);
                mysql_query($sql, $db_connect)
                    or die("Fatal Error: ".mysql_error());
            }

            if ($comrownum++ %2 == 0)
                print "<tr bgcolor=\"#BBBBBB\">";
            else
                print "<tr bgcolor=\"#FFFFFF\">";
            printf("    <td>%s</td>
                        <td>%s</td>
                        <td>%s</td>
                        <td>%s</td>
                        <td>%s</td>
                        <td>%s</td>
                        <td>%s</td>
                        <td>%s</td>
                        <td>%s</td></tr>\n",
                   $comrow["pn_tid"],
                   $comrow["pn_sid"],
                   $comrow["pn_date"],
                   $comrow["pn_name"],
                   $comrow["pn_email"],
                   $comrow["pn_url"],
                   $comrow["pn_host_name"],
                   $comrow["pn_subject"],
                   $comrow["pn_comment"]);

        }
        print "</table>\n";
        print "</td>\n";
        print "</tr>\n";
    }

?>
</table>

<hr>

<h2>Updating Comment Counts</h2>
<table><tr><th>SID</th><th>Comment count</th></tr>
<?php
    mysql_select_db($destdb, $db_connect);
    $tidyresult = mysql_query("select * from $desttable_prefix" . "posts", $db_connect)
                    or die("Fatal Error: ".mysql_error());

    while ($myrow = mysql_fetch_array($tidyresult))
    {
        $mypostid=$myrow['ID'];
        $countsql="select COUNT(*) from $desttable_prefix" . "comments"
             . " WHERE `comment_post_ID` = " . $mypostid;
        $countresult=mysql_query($countsql) or die("Fatal Error: ".mysql_error());
        $commentcount=mysql_result($countresult,0,0);
        $countsql="UPDATE `" . $desttable_prefix . "posts`
            SET `comment_count` = '" . $commentcount .
            "' WHERE `ID` = " . $mypostid . " LIMIT 1";
        if($submit)
        {
            $countresult=mysql_query($countsql) or die("Fatal Error: ".mysql_error());
        }
        if($commentcount > 0)
        {
            echo "<tr><td>$mypostid</td><td>$commentcount</tr></tr>\n";
        }
    }
?>
</table>

<hr>

<h2>Updating Category Counts</h2>
<table><tr><th>Category</th><th>Category count</th></tr>
<?php
    mysql_select_db($destdb, $db_connect);
    $tidyresult = mysql_query("select * from $desttable_prefix" . "categories", $db_connect)
                    or die("Fatal Error: ".mysql_error());

    while ($myrow = mysql_fetch_array($tidyresult))
    {
        $mypostid=$myrow['cat_ID'];
        $countsql="select COUNT(*) from $desttable_prefix" . "post2cat"
             . " WHERE `category_id` = " . $mypostid;
        $countresult=mysql_query($countsql) or die("Fatal Error: ".mysql_error());
        $commentcount=mysql_result($countresult,0,0);
        $countsql="UPDATE `" . $desttable_prefix . "categories`
            SET `category_count` = '" . $commentcount .
            "' WHERE `cat_ID` = " . $mypostid . " LIMIT 1";
        if($submit)
        {
          $countresult=mysql_query($countsql) or die("Fatal Error: ".mysql_error());
        }
        if($commentcount > 0)
        {
            echo "<tr><td>$mypostid</td><td>$commentcount</tr></tr>\n";
        }
    }
?>
</table>

<hr>

<form method="post" action="<?php echo $PHP_SELF?>">
    <input type="submit" name="submit" value="Convert PN to Wordpress">
</form>

</body>
</html> 
```

# c# - 在 WCF 服务中标记引用的库类

> ID：10375226
> 
> 赞同：5
> 
> 时间：2012-04-29T19:27:28.060
> 
> 标签：c#, wcf, dll, service

这与我之前提出的问题有关：

我有一个定义事务类的 DLL。它被 WCF 服务库和客户端应用程序引用。我收到错误消息，指出无法托管服务库，因为它无法序列化 DLL 类。

这是服务代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Runtime.Serialization;
using System.ServiceModel;
using System.Text;
using ServerLibrary.MarketService;
using SharedLibrary; // This is the DLL in question

namespace ServerLibrary
{
    [ServiceContract]
    public interface IService
    {
        [OperationContract]
        string GetData(int value);

        [OperationContract]
        CompositeType GetDataUsingDataContract(CompositeType composite);

        [OperationContract]
        bool ProcessTransaction(SharedLibrary.Transaction transaction);
    }

    [DataContract]
    public class CompositeType
    {
        bool boolValue = true;
        string stringValue = "Hello ";

        [DataMember]
        public bool BoolValue
        {
            get { return boolValue; }
            set { boolValue = value; }
        }

        [DataMember]
        public string StringValue
        {
            get { return stringValue; }
            set { stringValue = value; }
        }
    }
} 
```

我是否必须在此处使用 [attribute] 标头标记 Transaction 类？

[更新]

这是我尝试托管此服务时收到的错误消息：

> System.Runtime.Serialization.InvalidDataContractException：无法序列化类型“SharedLibrary.Transaction”。考虑使用 DataContractAttribute 属性对其进行标记，并使用 DataMemberAttribute 属性标记您想要序列化的所有成员。如果该类型是一个集合，请考虑使用 CollectionDataContractAttribute 对其进行标记。有关其他支持的类型，请参阅 Microsoft .NET Framework 文档。在 System.Runtime.Serialization.DataContract.DataContractCriticalHelper.ThrowInvalidDataContractException（字符串消息，类型类型）在 System.Runtime.Serialization.DataContract.DataContractCriticalHelper.CreateDataContract（Int32 id，RuntimeTypeHandle typeHandle，类型类型）在 System.Runtime.Serialization.DataContract。 DataContractCriticalHelper。

这里要求的是包含事务的 DLL：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;

namespace SharedLibrary
{
    // Transaction class to encapsulate products and checkout data
    public class Transaction
    {
            public int checkoutID;
            public DateTime time;
            public List<object> products; // Using object to avoid MarketService reference, remember to cast back!
            public double totalPrice;
            public bool complete;

            public Transaction(int ID)
            {
                checkoutID = ID;
            }

            public void Start()
            {
                products = new List<object>();
                complete = false;
            }

            public void Complete()
            {
                time = DateTime.Now;
                complete = true;
            }
        }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:12:25.477

您可能希望如下定义您的事务类

```
[DataContract]
[KnownType(typeof(MarketService.XXX))]
public class Transaction
{
} 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:52:31.620

> 我是否必须在此处使用 [attribute] 标头标记 Transaction 类？

不，您不应该这样做，但建议这样做。请参阅[使用数据协定](http://msdn.microsoft.com/en-us/library/ms733127.aspx)。

* * *

问题是您将派生对象传递给`List<object>`.

[您必须使用ServiceKnownType](http://msdn.microsoft.com/en-us/library/system.servicemodel.serviceknowntypeattribute.aspx)属性告诉服务要处理什么类型的对象：

```
[OperationContract]
[ServiceKnownType( typeof( MarketService.XXX ) )]
bool ProcessTransaction(SharedLibrary.Transaction transaction); 
```

# java - 如何使用 Graphics2D 平滑手绘线

> ID：10375228
> 
> 赞同：4
> 
> 时间：2012-04-29T19:27:32.167
> 
> 标签：java, graphics2d

我已经使用[此](https://stackoverflow.com/questions/7286808/issues-creating-a-pen-tool-with-javas-path2d)代码在 Java 和 Graphics2D 中实现了手绘工具。所以我有一个由很多点组成的 Path2D。有没有一种算法可以平滑这条线？我不是指抗锯齿，我的意思是将路径转换为贝塞尔曲线路径之类的东西。像[这样](http://www.12inchpianist.com/line-smoothing-in-java)的东西，但使用 Path2D 作为输入。我认为这是一个反复出现的问题，但我真的找不到有用的东西。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-05-01T14:49:39.003

我在以下位置找到了我需要的东西：http: [//javagraphics.blogspot.com/2010/06/shapes-implementing-freehand-pencil.html](http://javagraphics.blogspot.com/2010/06/shapes-implementing-freehand-pencil.html)

编辑：因为我现在知道这个问题的确切术语（曲线拟合），所以我可以更好地用谷歌搜索它，还找到了这篇文章：[Java 曲线拟合库](https://stackoverflow.com/questions/878200/java-curve-fitting-library)

编辑：也看看[http://johnsogg.blogspot.com/2010/01/cardinal-splines-and-catmull-rom.html](http://johnsogg.blogspot.com/2010/01/cardinal-splines-and-catmull-rom.html)

# python - 用 python 替换 #define 为 static const

> ID：10375229
> 
> 赞同：-2
> 
> 时间：2012-04-29T19:27:37.110
> 
> 标签：python

我是 python 新手，希望帮助完成以下任务：

给定 ah/cpp 文件，我想用静态常量替换每个 #define 行。当然，变量的类型应该是正确的（让我们说只有 int 或 string）。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:37:54.633

```
new = ""
file = open("file.cpp")
for line in file:
    if "#define" in file:
        splitline = line.split(" ")
        new += "static const "
        if '"' in line:
            new += "string "
        else:
            new += "int "
        new += splitline[1]
        new += " = "
        new += splitline[2]
        new += ";\n"
    else:
        new += line + "\n"
file.close()
newfile = open("new.cpp")
newfile.write(new) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:39:54.050

```
import sys

# Read in the file as an array of lines
lines = file(sys.argv[1], 'r').readlines()

# Loop over the lines and replace any instance of #define with 'static const'
for line_no in xrange(len(lines)):
    lines[line_no] = lines[line_no].replace('#define', 'static const')

# Write the file back out
file(sys.argv[1], 'w').writelines(lines) 
```

而且，是的，你可以用列表推导替换我的循环，但对于 Python 新手来说，这更清楚。列表理解版本是：

```
lines = [line.replace('#define', 'static const') for line in file(sys.argv[1], 'r').readlines()]
file(sys.argv[1], 'w').writelines(lines) 
```

现在这些示例没有考虑类型，但是这种自动替换这样的东西可能是一个可怕的前景。正如其他人指出的那样，您应该使用文本编辑器真正查看您所做的事情实际上是否正确，但通常这是您搜索和替换的方式。

替代实现将使用正则表达式。为此，您将导入 re 模块。

# php - PHP 联系表单发送的空数组 - 很确定这是 HTACCESS 的错

> ID：10375231
> 
> 赞同：0
> 
> 时间：2012-04-29T19:27:55.830
> 
> 标签：php

这是场景：我有一个带有几个复选框的联系表：

```
<input type="text" name="cola[]" value="coke" />
<input type="text" name="cola[]" value="pepsi" />
<input type="text" name="cola[]" value="rc" /> 
```

使用 jQuery 的序列化，我将数据字符串发送给我`mailer.php`，如下所示：

```
$.ajax({
    type: "POST",
    url: "http://mydomain.com/mailer",
    data: dataString,
    success: function() {//some function}
}); 
```

`.php`请注意，由于 htaccess 重写规则，我不得不从 URL 中省略扩展名。如果选中所有 3 个复选框，则数据字符串如下所示：`&cola=coke&cola=pepsi&cola=rc`。我使用`console.log`.

`mailer.php`看起来像这样：

```
$cola = $_POST["cola"];
// other code
$message = "<p>" . $cola . "</p>";
// code to mail it out 
```

但是，在成功邮寄后，电子邮件正文仅显示“Array”，而不是“cola, pepsi, rc”。

我感觉这可能与我在 htaccess 中的重写条件有关，如下所示：

```
RewriteEngine On

# Unless directory, remove trailing slash
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^([^/]+)/$ http://example.com/folder/$1 [R=301,L]

# Redirect external .php requests to extensionless url
RewriteCond %{THE_REQUEST} ^(.+)\.php([#?][^\ ]*)?\ HTTP/
RewriteRule ^(.+)\.php$ http://example.com/folder/$1 [R=301,L]

# Resolve .php file for extensionless php urls
RewriteRule ^([^/.]+)$ $1.php [L] 
```

我的重写条件是`/`从 URL 中删除任何尾随并清除 .php 文件扩展名，以便 url 看起来像：`domain.com/pretty`

谁能帮我诊断为什么我收到消息“数组”而不是数组内容？谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T19:36:41.003

这不是您的 .htaccess 问题。事实上， $_POST['cola'] 是一个像这样的数组：

```
Array 
(
[0] => 'cola'
[1] => 'pepsi'
[2] => 'rc'
) 
```

您需要遍历数组并获取您的信息。

希望这有帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T19:41:46.807

这与 htaccess 无关，您输出的 $cola 数组错误！

这是正确的方法：

```
$cola = implode(', ', $cola);
$message = '<p>' . $cola . '</p>'; 
```

**提示**：如果您不打算在 PHP 中解析字符串中的任何变量，请不要使用双引号“”，而是使用单引号 ''，因为“”被解析，它会提高性能；更多的执行时间。

# javascript - 全局颜色不透明度悬停覆盖？

> ID：10375245
> 
> 赞同：1
> 
> 时间：2012-04-29T19:29:49.043
> 
> 标签：javascript, jquery, css

我正在使用下面的全局链接不透明度覆盖。

```
a:hover {
    text-decoration: none;  opacity: 0.6; /* css standard */
    filter: alpha(opacity=60); /* internet explorer */
} /* mouse over link */ 
```

**我怎样才能为此添加颜色？**这可能与 CSS 或我只看 JS / jQuery 解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:40:45.930

```
a:hover{
    /* your stuff here */
    color:#f00;                // older browsers
    color: rgba(255,0,0,0.4);  // browsers with rgba support (r,g,b,alphaOpacity)
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T19:41:34.683

如果您希望将颜色（例如黑色）放在背景上，那么您的代码将是

```
a:hover {text-decoration: none;  opacity: 0.6; /* css standard */
filter: alpha(opacity=60); /* internet explorer */ /* mouse over link */ background: #000; } 
```

如果您希望 a 标签的颜色为黑色，那么您的 css 将如下所示

```
a:hover {text-decoration: none;  opacity: 0.6; /* css standard */
filter: alpha(opacity=60); /* internet explorer */  /* mouse over link */ color: #000; } 
```

`}`出于某种原因，您的代码中有额外的内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T23:12:28.580

看来您根本不需要不透明度。您正在搜索的效果是透明背景。`rgba()`与后备一起使用`rgb()`并改为定义透明背景。

```
a:hover {
    text-decoration: none;  
    background: rgb(255,0,0) /* fallback */
    background: rgba(255,0,0,0.6) /* red with 60% opactiy */
    color: #000;
} 
```

# javascript - 如何在 d3.js 中为选定的边和顶点创建轮廓？

> ID：10375255
> 
> 赞同：0
> 
> 时间：2012-04-29T19:30:36.560
> 
> 标签：javascript, d3.js

我正在尝试创建如下图所示的视觉效果：http: [//imageshack.us/photo/my-images/52/97003573.png/](http://imageshack.us/photo/my-images/52/97003573.png/) [连接它们的选定数量的顶点和边将被包围大纲]我将不胜感激任何代码示例如何做到这一点，因为我通常是通过 javascript 接触 SVG 和图形的新手。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:24:34.590

我能够通过添加另外两组非常粗的“链接”线来实现这一点，笔划线帽值为“圆形”，可以以类似的方式扩展到您选择的线。

![链接图片](../Images/94e2a1ceab5abffa984a5fbf44c36fea.png)

```
var linkoutline = svg.selectAll(".outline")  
    .data(json.links)
  .enter().append("svg:line")
    .attr("class","outline")
    .style("stroke","red")
    .style("stroke-width",20)
    .style("stroke-linecap","round");
var linkback = svg.selectAll(".backline")
    .data(json.links)
  .enter().append("svg:line")
    .attr("class","backline")
    .style("stroke","white")
    .style("stroke-width",18)
    .style("stroke-linecap","round"); 
```

[在http://jsfiddle.net/s2f8L/8/](http://jsfiddle.net/s2f8L/8/)上查看更新的 jsfiddle 。这可以以类似的方式扩展到您选择的行

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-04-29T20:48:17.403

基于 id 或 class 做 selectAll 有那么难吗？之后您可以使用 CSS 添加阴影，因为 SVG 和 CSS 都提供对此类的支持。

# c# - 使用带有 C# 的 SendInput 模拟按键事件

> ID：10375264
> 
> 赞同：3
> 
> 时间：2012-04-29T19:32:07.887
> 
> 标签：c#, simulation, keyboard-events, sendinput

遵循此线程的建议：[区分键盘的真实和虚拟按键](https://stackoverflow.com/questions/10341525/distinguish-between-keyboards-real-and-virtual-key-presses)

**我正在尝试创建一个程序，它将使用SendInput()**方法发送键盘的按键事件。

**但是，问题是当我尝试模拟按键事件时 - 什么都没有发生。**到目前为止，这是我的代码：

```
 [DllImport("user32.dll")]
    static extern UInt32 SendInput(UInt32 nInputs, [MarshalAs(UnmanagedType.LPArray, SizeConst = 1)] INPUT[] pInputs, Int32 cbSize);

    [StructLayout(LayoutKind.Sequential)]
    struct KEYBDINPUT
    {
        public short wScan; public int dwFlags;
        public int time; public IntPtr dwExtraInfo;
    }

    [StructLayout(LayoutKind.Explicit)]
    struct INPUT
    {
        [FieldOffset(0)] public int type;
        [FieldOffset(8)]  public KEYBDINPUT ki; //x64 - 8, x32 - 4
    }

    const int KEYEVENTF_DOWN = 0; //key UP
    const int KEYEVENTF_EXTENDEDKEY = 0x0001;
    const int KEYEVENTF_KEYUP = 0x0002; //key UP
    const int KEYEVENTF_UNICODE = 0x0004;
    const int KEYEVENTF_SCANCODE = 0x0008; // scancode

    public void Send_Key(short Keycode)
    {
        INPUT[] InputData = new INPUT[1];
        InputData[0].type = 1;
        InputData[0].ki.wScan = Keycode;
        InputData[0].ki.dwFlags = KEYEVENTF_KEYUP | KEYEVENTF_SCANCODE;
        InputData[0].ki.time = 0;
        InputData[0].ki.dwExtraInfo = IntPtr.Zero;
        SendInput(1, InputData, Marshal.SizeOf(typeof(INPUT)));
    } 
```

为了破译扫描码，我下载了这个线程中建议的程序：

[https://superuser.com/questions/293609/windows-7-tool-to-capture-keyboard-scan-codes](https://superuser.com/questions/293609/windows-7-tool-to-capture-keyboard-scan-codes)

根据这个程序 - 我键盘的“a”键代码是“65”

我的程序应该在文本框文本更改时触发按键事件，所以如果我们输入“q” - 文本应该更改为“q”加上 send_key() 的结果，即“qa”：

```
 private void textBox2_TextChanged(object sender, EventArgs e)
    {
        Send_Key(0x0065); // nothing happens (0x65 also fails)
    } 
```

我究竟做错了什么？将来我将更改此代码，以便我可以指定按键保持时间（在 DOWN 和 UP 事件之间）。但现在，出于测试目的，我只模拟 keyUP 事件。

**编辑：**汉斯，根据你的建议，这里是编辑——但不幸的是，它不起作用。

```
 public void Send_Key(short Keycode)
        {
            INPUT[] InputData = new INPUT[1];
            InputData[0].type = 1;
            InputData[0].ki.wScan = Keycode;
            InputData[0].ki.dwFlags = KEYEVENTF_DOWN;
            InputData[0].ki.time = 0;
            InputData[0].ki.dwExtraInfo = IntPtr.Zero;

            uint intReturn = SendInput(1, InputData, Marshal.SizeOf(typeof(INPUT)));

            if (intReturn == 0) //!=1
            {
                throw new Exception("Could not send keyDOWN: " + Keycode);
            }

            INPUT[] InputData2 = new INPUT[1];
            InputData2[0].type = 1;
            InputData2[0].ki.wScan = Keycode;
            InputData2[0].mi.dwFlags = KEYEVENTF_KEYUP; // KEYEVENTF_KEYUP | KEYEVENTF_SCANCODE;
            InputData2[0].ki.time = 0;
            InputData2[0].ki.dwExtraInfo = IntPtr.Zero;

            uint intReturn2 = SendInput(1, InputData2, Marshal.SizeOf(typeof(INPUT)));

            if (intReturn2 == 0) //!=1
            {
                throw new Exception("Could not send keyUP: " + Keycode);
            }
        } 
```

没有错误..没有输出。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:54:02.610

> 但现在，出于测试目的，我只模拟 keyUP 事件

我猜这没关系，但这不会让 Windows 做任何事情。要生成击键，您必须首先发送 KEYDOWN。“保持时间”没有任何有用的效果，所以只需将两个 SendInput 调用放在同一个方法中。

您应该添加错误检查，winapi 调用不会产生任何异常。如果函数返回 0，则抛出 Win32Exception。并使用 SetLastError = true 修复 [DllImport] 声明。

您可以通过设置 ki.wVk 字段并省略 KEYEVENTF_SCANCODE 标志来避免使用您在 superuser.com 上找到的程序。这样您就可以指定虚拟键而不是扫描码。[.NET Keys 枚举类型](http://msdn.microsoft.com/en-us/library/system.windows.forms.keys.aspx)为您提供所需的值。像 Keys.A 一样为 A 键生成按键。

# java - 字符串构造函数的这种实现如何工作（java）？

> ID：10375265
> 
> 赞同：3
> 
> 时间：2012-04-29T19:32:19.140
> 
> 标签：java, string, constructor, private, field

```
 public String(String original) {
     int size = original.count;
     char[] originalValue = original.value;
     char[] v;
     if (originalValue.length > size) {
         // The array representing the String is bigger than the new
         // String itself.  Perhaps this constructor is being called
         // in order to trim the baggage, so make a copy of the array.
         int off = original.offset;
         v = Arrays.copyOfRange(originalValue, off, off+size);
     } else {
         // The array representing the String is the same
         // size as the String, so no point in making a copy.
         v = originalValue;
     }
     this.offset = 0;
     this.count = size;
    this.value = v;
 } 
```

如果我是愚蠢的，我很抱歉，但我不明白。count 和 value 字段是私有的，但这段代码似乎以某种方式直接达到了这些值。怎么会这样？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T19:33:58.870

`private`意思是“只能被类访问”，而不是“只能被对象访问”。

# mysql - 如何将一列的值复制到同一行的另一列？

> ID：10375267
> 
> 赞同：0
> 
> 时间：2012-04-29T19:32:31.630
> 
> 标签：mysql, sql

这是我的示例表：

```
+-----+----------+------+
| id  | current  | max  |
+-----+----------+------+
| 1   | 20       | 100  |
| 2   | 50       | 50   |
+-----+----------+------+ 
```

我需要一个将行列的值设置`current`为其`max`列的查询，但我找不到复制它的方法。这是我当前的查询：

```
UPDATE `table` SET `current` = ??? WHERE `id` = 1 
```

`???`要使用该列的值 100，我会用什么替换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T19:34:02.783

只需使用列名将其设置为该列值：

```
UPDATE `table` SET `current` = `max` WHERE `id` = 1 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T19:37:19.193

要仅更新行 ID 为**1**`current`的列中的值，请使用此脚本。`max`

 **```
UPDATE table 
SET    current = max
WHERE  id = 1; 
```

`current`要使用表中所有行的列中的值更新列`max`，请删除`WHERE`条件。

```
UPDATE table 
SET    current = max; 
```**

# javascript - 如果插入空格，如何不停止自动完成

> ID：10375275
> 
> 赞同：0
> 
> 时间：2012-04-29T19:33:36.097
> 
> 标签：javascript, jquery, ajax, autocomplete

由于用户名的最大长度可以是 18，所以我没有进行 ajax 调用`term.length>2 && term.length < 18`，到目前为止还不错，但是当我输入这样的内容时，它会继续进行 ajax 调用

```
ex : testing for mentions : @name and now spaces!!!       ; 
```

这是我正在使用的 js 代码。

```
$("#input").load().bind("blur keydown keypress keyup",function(){

var t = $("#input").val();

suggest(t);

function split(val){
return val.split(/@\s*/);
}

function extractLast(term){
return split(term).pop();
}

function suggest(inputString){
 if(inputString.indexOf("@")>=0){
        term=extractLast(inputString);

    if(term.length>2 && term.length < 18){
        $('#postInput').addClass('load');
        var data = 'name=' + term;
       $.ajax({
               type:"POST",
               url:"http://site.com/ajax/mentions",
               data:""+term+"",
               dataType:"html",
               success:function(data){
                                      if(data.length>0){$('#suggestions').fadeIn();
                                      $('#suggestionsList').html(data);
                                      $('#input').removeClass('load');}
                                    }
        });     
    }
    else {
$('#suggestions').fadeOut();
    }
 }
}
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:39:36.367

[您可以在此处](http://jqueryui.com/demos/autocomplete/)使用 jquery 自动完成插件

它很容易使用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:07:50.740

看到这个：

[http://jsfiddle.net/64ag5/](http://jsfiddle.net/64ag5/)

我已经重新格式化了你的代码。基本上，您已经声明了函数`split`，`extractLast`并且`suggest`在声明的匿名函数内部`bind("blur keydown keypress keyup")`。

还要注意，`keypresss`当`keydown`用户输入第 18 个字符时触发，但在输入的属性中该字符可用之前`value`。所以在那一刻，文本长度仍然是 17。

我的建议是只处理该`keyup`事件。这样做可以确保最大长度验证。

# python - 我是否需要研究子进程才能使这个 python 源代码在另一种编程语言中工作？

> ID：10375276
> 
> 赞同：2
> 
> 时间：2012-04-29T19:33:53.877
> 
> 标签：python, string, while-loop, subprocess

这部分嵌入式 python 源代码有效。

```
//Native Source Code [C - Like Language]
string zncauth = nick + ":" + password;

//Initializes Python for executing [Python Source Code]
PyInit();

//Python Source Code
PyExecute("import socket");

// Create Connetion
PyExecute("server_addr = '127.0.0.1'");
PyExecute("server_port = 6667");
PyExecute("s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)");
PyExecute("s.connect((server_addr, server_port))");   
PyExecute("s.send( \'NICK botnick\\r\\n\')");   
PyExecute("s.send( \'USER znc bot znc :znc\\r\\n\')");  
PyExecute("s.send( \'PASS " + zncauth + " \\r\\n\')"); 
```

这就是问题。9 分钟后超时并与服务器断开连接。我的猜测是`while statement`运行一次。

```
// Ping Pong    
PyExecute("while True:\'\\n\'");    
PyExecute("data = s.recv(4096)");
PyExecute("if data.find( \"PING\" ) != -1:\'\\n\'");
PyExecute("s.send ( \'PONG \' + data.split() [ 1 ] + \'\\r\\n\' )");
PyExecute("if data.find ( \'You need to send your password. Try /quote PASS <username>:<password>\' ) != -1:\'\\n\'");
PyExecute("s.send (\'PASS " + zncauth + " \\r\\n\')"); 
```

这是我尝试过的while循环问题的最新版本。当它运行时，这个或上面版本的 while 循环没有明显的区别。

```
 PyExecute("data = s.recv(4096)");
PyExecute("while data != 0:\'\\n\'");   
PyExecute("if data.find( \"PING\" ) != -1:\'\\n\'");
PyExecute("if data == 0:\'\\n\'");
PyExecute("break"); 
```

这是上面相同 python 代码的可执行文件。它在 irc 网络上停留了几个小时，但我需要通过它创建的连接发送消息。我需要找到一种通过此可执行文件发送消息的方法，该可执行文件将依次处理消息或`while statement`正确嵌入消息，以便它在本机代码中工作。

```
#!/usr/bin/env python
# -*- coding: utf-8 -*-

//Test.py
import socket

zncauth = 'nick:password'
server_addr = '127.0.0.1'
server_port = 6667
s = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
s.connect((server_addr, server_port))   
s.send( 'NICK botnick\r\n')
s.send( 'USER znc bot znc :znc\r\n')
s.send( 'PASS ' + zncauth + ' \r\n')

while True:
    data = s.recv(4096)
    if data.find ( 'PING' ) != -1:
        s.send ( 'PONG ' + data.split() [ 1 ] + '\r\n' )
    if data.find ( 'You need to send your password. Try /quote PASS <username>:<password>' ) != -1:
        s.send ('PASS ' + zncauth + ' \r\n') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:56:51.987

首先，不清楚`PyExecute`实际上是什么。它不是由 Python 本身提供的。我发现了一个库，它提供了一个叫做`PyInit`和的东西`PyExecute`——它为一个叫做 Metatrader 的东西提供了 Python 集成——我猜这就是你正在使用的东西。即使您不是，您实际使用的内容也可能足够相似，因此接下来的内容仍然有意义。

所以，无论如何，你现在所做的肯定不可能是正确的：当你告诉 Python 解释器执行时，你期望它做什么`while True:`？唯一可能的答案是（1）一个带有空循环体的无限循环，以及（2）什么都没有，直到你以某种方式提供了循环体*并告诉它你已经完成了*。第一个细分为 (1a) 没有任何用处，因为它是一个语法错误，并且 (1b) 循环永远什么都不做。这些结果对你都没有任何用处。（我很确定实际答案是（1a）或（1b），但尚未检查哪个。）

你真正需要做的是提供`PyExecute`——我认为它是 Python 的实际部分的一个薄包装`PyRun_SimpleString`——一个完整的语句来执行。那将是整个循环。所以给它整个东西，包括 newlines*和 indentation*，看看它是否表现得更好。

我在那里强调了“和缩进”，因为就目前而言，您的代码缩进错误，并且在 Python 中缩进实际上是由解析器使用的。相关位可能希望是这样的：

```
while True:
    data = s.recv(4096)
    if data.find ( 'PING' ) != -1:
        s.send ( 'PONG ' + data.split() [ 1 ] + '\r\n' )
    if data.find ( 'You need to send your password. Try /quote PASS <username>:<password>' ) != -1:
        s.send ('PASS ' + zncauth + ' \r\n') 
```

循环之前的内容，每行只有一个语句，可能就可以了。

为了澄清我所说的“给它全部”的意思：您需要一个*包含*多行代码的字符串，如下所示：

```
PyExecute(
    "while True:\n"
    "  data = s.recv(4096)\n"
    "  if (data.find('PING') != -1:\n"
    "    s.send('PONG' + data.split()[1] + '\\r\\n')\n"
    ...) 
```

在哪里

*   每行都以明确的结尾`\n`
*   每行在开始时适当缩进空格
*   我使用了 C 的自动连接功能，如果您编写一堆`"..."`字符串，它们之间只有空格，它们将被视为一个较长的字符串；如果您实际上是在使用其他类似 C 的语言编写，并且碰巧不支持该语法，那么代码看起来会更难看
*   代码中的反斜杠被转义（我再次假设字符串的 C 语法，如果您使用不同的语言，这可能正确也可能不正确）

# php - 使用 PHP 和 htaccess 自动阻止 IP 地址

> ID：10375278
> 
> 赞同：1
> 
> 时间：2012-04-29T19:33:56.233
> 
> 标签：php, .htaccess, ip-address, block

我有一个登录系统，我试图使其尽可能安全。十次尝试失败后，我想阻止该 IP 地址。如何在 PHP 中打开文件并在我的 .htaccess 文件中添加一行以阻止 IP 地址？这是我的 .htaccess 文件：

```
# Turn on RewriteEngine
RewriteEngine on

# Block IP addresses with too many failed attempts
RewriteCond %{REMOTE_ADDR} ^217.172.179.*$ [OR]
RewriteCond %{REMOTE_ADDR} ^217.172.180.*$
RewriteCond %{REQUEST_URI} !/error/blocked.php$ [NC]
RewriteRule ^(.*)$ /error/blocked.php [R,NC,L] 
```

我希望 PHP 文件添加以下行：

```
RewriteCond %{REMOTE_ADDR} ^IPHERE$ [OR] 
```

在适当的位置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:37:03.313

我不建议直接编辑 .htaccess 文件。

相反，有一个文件或数据库表来保存所有列入黑名单的 IP 地址，并在 PHP 中进行测试，而不是在 Apache 端进行测试。

# ruby-on-rails - Rails 3.2.3 最终用户错误消息而不是开发模式下的开发人员错误消息，其中考虑_all_requests_local = true

> ID：10375280
> 
> 赞同：1
> 
> 时间：2012-04-29T19:33:59.277
> 
> 标签：ruby-on-rails

我在开发模式下运行我的 rails 3.2.3 应用程序。即使我已经指定

```
config.consider_all_requests_local = true 
```

在我的`config/environments/development.rb`配置文件中，我得到带有红色“我们很抱歉，但出了点问题”的“最​​终用户友好”错误页面。当我的视图中有错误时，而不是使用堆栈跟踪等更有用的“开发人员友好”错误页面。

我该怎么做才能获得开发人员友好的错误消息？

我的宝石中有omniauth和slim

**编辑：** 当视图中有错误时会出现问题。当控制器中出现错误时，开发人员友好的错误会正确显示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-31T18:56:01.690

有完全相同的问题，在底部的问题中描述。仅在视图中看到此消息，尽管开发模式是并且考虑_all_requests_local 是打开的。此外，我的文件不包含任何非法的 utf-8 字符（或通过编码标记：utf-8）。

但是今天，我终于找到了解决问题的方法-希望对您有所帮助：

[Rails 在开发模式下不记录模板错误](https://stackoverflow.com/questions/16624208/rails-doesnt-log-tempalte-errors-in-development-mode/17978388#17978388)

# php - 如何使用 Symfony2 构建分层 ACL/ACE？

> ID：10375284
> 
> 赞同：2
> 
> 时间：2012-04-29T19:34:26.997
> 
> 标签：php, symfony, acl, database-performance, hierarchical

有没有办法用 Symfony2 构建分层 ACL？我需要建立一个具有简单类别/文章一对多关系的管理区域。如果没有在文章中指定进一步的 ACE，是否有任何方法可以构建 ACL，以便该类别中的每个 ACE 在相关文章上传播？

假设我构建了一些类别和文章，并为 User1 构建了以下 ACL

```
Example:
Category1 (Read Write)
    Article1
    Article2 (Read)
...
CategoryN
    Article1
    ...
    ArticleN 
```

你最终得到：

```
Category1 -> Can be read or modified
Article1 -> Can be read or modified
Article2 -> Can only be read 
```

# windows-phone-7 - WP7 重叠图像

> ID：10375285
> 
> 赞同：0
> 
> 时间：2012-04-29T19:34:31.363
> 
> 标签：windows-phone-7, canvas, silverlight-toolkit, overlap, overlapping

我尝试使用代码在图片上放置相框（图像）

```
<Canvas>
   <Image x:Name="picture" Source="{Binding XXX}" Canvas.ZIndex="1">
       <Image.RenderTransform>
            <TransformGroup>
                <MatrixTransform x:Name="previousTransform" />
                <TransformGroup x:Name="currentTransform">
                    <ScaleTransform x:Name="scaleTransform" />
                    <RotateTransform x:Name="rotateTransform" />
                    <TranslateTransform x:Name="translateTransform" />
                </TransformGroup>
            </TransformGroup>
       </Image.RenderTransform>

                <toolkit:GestureService.GestureListener>
                        <toolkit:GestureListener DragStarted="OnGestureListenerDragStarted" DragDelta="OnGestureListenerDragDelta" DragCompleted="OnGestureListenerDragCompleted" PinchStarted="OnGestureListenerPinchStarted" PinchDelta="OnGestureListenerPinchDelta" PinchCompleted="OnGestureListenerPinchCompleted"/>
                    </toolkit:GestureService.GestureListener>
            </Image>

   <Image x:Name="photoframe" Source="{Binding XXX}" Canvas.ZIndex="2"/>
</Canvas> 
```

但是，如果我使用上面的代码重叠这两张照片，那么gestureService 似乎不再起作用。

我想要的是在图片上放置相框但不会丢失手势控制（拖动或捏合图片）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:39:18.437

相框正在捕捉您的图像的触摸事件，因为它位于您的图像之上。如果您在相框上设置了手势服务，它将再次起作用。也许将相框的 IsHitTestVisible 设置为 false 也可以解决您的问题（我从未测试过）。

问候

# java - Spring Data Jpa - 扫描测试文件夹中的文件

> ID：10375287
> 
> 赞同：7
> 
> 时间：2012-04-29T19:34:34.483
> 
> 标签：java, spring, spring-data, spring-data-jpa

我正在使用 Spring Data JPA，这很奇怪，但它会尝试扫描（在部署期间）测试文件，这会导致错误：

```
java.lang.ClassNotFoundException: org.junit.runner.RunWith
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1678)
at org.apache.catalina.loader.WebappClassLoader.loadClass(WebappClassLoader.java:1523)
...
WARN : org.springframework.core.type.classreading.AnnotationAttributesReadingVisitor - Failed to classload      type while reading annotation metadata. This is a non-fatal error, but certain annotation metadata may be     unavailable. 
```

classnotfoundexception 是因为测试依赖项在 maven 的“测试”范围内。

但我的问题是，为什么要扫描测试文件夹？（/src/main/test）。

上下文配置如下：

```
 <jpa:repositories base-package="com.domain.repository" /> 
```

你能告诉我我做错了什么吗？我的 .classpath 内容如下：

```
<classpathentry kind="src" output="target/classes" path="src/main/java"/>
<classpathentry excluding="**" kind="src" output="target/classes" path="src/main/resources"/>
<classpathentry kind="src" output="target/test-classes" path="src/test/java"/>
<classpathentry excluding="**" kind="src" output="target/test-classes" path="src/test/resources"/>
... 
```

我真的很感谢你在这方面的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-31T08:31:42.580

> 但我的问题是，**为什么要扫描测试文件夹？(/src/main/test)**。
> 
> 上下文配置如下：
> 
> `<jpa:repositories base-package="com.domain.repository" />`

准确地说，我不认为 Spring 正在扫描这个文件夹——毕竟它是你的源文件夹。它只查看已部署的包结构，我怀疑问题的原因与此有关。

我遇到了同样的问题，但它是由 Eclipse 中的错误部署配置引起的，而不是特定于 Spring 的。我已将 Eclipse 配置为将我的测试类`src/test/java`部署到目标部署包中，以便在我启动服务器时所有测试文件（当然具有相应的包结构）都存在。但是，从`.classpath`您发布的片段来看，我看到您明确将它们排除在部署之外。

不过，还有其他方式可以让类文件潜入您的部署。您是否能够验证测试类实际上不存在于已部署的包中？它们是否可以通过您设置的其他进程（可能是*FileSynch*插件）在那里同步？

另外，您是否有任何其他带有配置的 Spring 上下文文件来扫描其他基础包？

您可以添加更多关于 Eclipse 配置以及如何部署到测试服务器的详细信息以帮助解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-05-14T19:02:40.787

这似乎是Spring中的一个错误“伪特性”：

[https://jira.springsource.org/browse/SPR-9233](https://jira.springsource.org/browse/SPR-9233)

当它在运行时找不到注释类时会警告您，即使您的应用程序非常好。

# objective-c - 如何在 Interface Builder 中使用数学符号

> ID：10375291
> 
> 赞同：2
> 
> 时间：2012-04-29T19:35:18.197
> 
> 标签：objective-c, ios, xcode4, interface-builder, symbolic-math

我想知道是否有一种方法可以在界面生成器中获取数学符号，例如平方根符号或加号/减号等。

这些符号将出现在按钮上或打印在标签上。

（这个应用是在 Xcode 4 中为 iOS 创建的）

干杯:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T19:58:37.733

在美式键盘布局中，平方根符号 (√) 是 Option-v。加号/减号 (±) 是 Option-Shift-=。通常，您只需键入您感兴趣的符号。请参阅键盘查看器以了解如何键入给定符号。要启用键盘查看器，请转到系统偏好设置 > 键盘窗格 > 键盘选项卡 > 在菜单栏中显示键盘和字符查看器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-08T22:33:52.457

在最新的 XCode 7 中，单击 Edit-> Emoji & Symbols -> 右上角的小命令图标 -> 在左侧窗格中选择 Math Symbols

# java - 创建向导 Swing

> ID：10375293
> 
> 赞同：2
> 
> 时间：2012-04-29T19:35:23.267
> 
> 标签：java, swing, wizard

我想用swing制作一个向导。我注意到 JOptionPane 就像一个向导一样工作，只是输入的数量和它的组织方式是有限的。

有谁知道 JOptionPane 如何“等待”直到给出所需的输入并在最后返回值之前按下右键？

有谁知道如何使用 JOptionPane 以便可以创建向导的典型 cardLayout ？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T01:23:50.960

您可以将任意内容添加到 a中，如此[处](https://stackoverflow.com/a/3002830/230513)`JOptionPane`所示。该内容可以是具有的面板，如此[处](https://stackoverflow.com/a/5655843/230513)所示。鉴于,将等到单击任一按钮。如果结果是，您可以根据需要检查卡片的内容。`CardLayout``JOptionPane.OK_CANCEL_OPTION``JOptionPane``JOptionPane.OK_OPTION`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-04-30T07:34:25.847

我认为您需要一个模式`JDialog`来`CardLayout`交换向导的屏幕。当`JDialog`不可见时，您可以从中获取状态并决定如何继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T22:27:47.810

“等待”是什么意思？在按下按钮之前阻止执行的意思是“等待”吗？如果是这样，有很多解决方案，但最简单的解决方案之一是这样的：

```
while(block) {
    Thread.sleep(500);
} 
```

`block = false;`当按下 OK 按钮时，您的对话框就会设置。有更复杂的解决方案，这只是一个例子。

如果您的意思是必须填写所有字段的“等待”，您可以轻松地为每个字段实现一个侦听器，以便在最后一个字段被编辑时启用 OK 按钮。

您可以在[此处查看](http://developer.classpath.org/doc/javax/swing/JOptionPane-source.html)`JDialog`eg的源代码。我认为阻塞部分是由超类的方法完成[的](http://kickjava.com/src/java/awt/Dialog.java.htm)。`show()``Dialog`

我的提示：不要尝试从头开始自己制作多页向导，也不要尝试阻止任何内容等。这通常会导致更多问题。而是按照[这里](http://java.sun.com/developer/technicalArticles/GUI/swing/wizard/)的教程进行操作。它解释了如何使用对话框作为向导的基础。

# ember.js - 使用任何对象作为 mixin

> ID：10375294
> 
> 赞同：0
> 
> 时间：2012-04-29T19:35:24.687
> 
> 标签：ember.js

我想在客户端和服务器端之间共享代码。我不希望客户端可以在本地计算数据的服务器往返，但我还需要验证服务器端的数据。由于服务器上没有 emberjs，所以我使用普通的 JS 对象。我可以将它转换为客户端的混合，以便我可以将函数混合到我的模型对象中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:21:00.103

您可以通过在 Ember.Mixin.create() 中包装 JS 对象字面量来创建 Ember mixin。这就是创建了多少个内部 mixin，包括 Enumerable 等。

# android - 从文本文件Android填充列表视图的问题

> ID：10375300
> 
> 赞同：0
> 
> 时间：2012-04-29T19:36:00.867
> 
> 标签：android, arrays, listview, text, linked-list

好的，所以我试图从对象的链接列表中填充 android 中的列表视图。我正在从文本文件中读取行，从文本文件的每一行中拆分出两个值，用“，”分隔，将这些值中的每一个存储到对象的链接列表中。然后我拉出每个对象的名称字段来填充列表视图。我知道这很草率我刚开始使用 Android :E 它现在根本不会运行，但代码中没有错误。

这是我的 activity.java 文件

```
package com.pkuCalc.pkuCalc;
import java.io.IOException;
import java.io.BufferedReader;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.LinkedList;
import java.util.List;
import android.app.Activity;
import android.widget.ArrayAdapter;
import android.widget.ListView;
import android.os.Bundle;

public class PkuCalcActivity extends Activity {
    private ListView lv;
List<Food> foodlist = new LinkedList<Food>();
int numFoodItems = 0;
/** Called when the activity is first created. */
@Override

public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    lv = (ListView) findViewById(R.id.listView1);

    try{

        InputStream inputStream = getResources().openRawResource(R.raw.food);

        if (inputStream != null) {

            InputStreamReader inputreader = new InputStreamReader(inputStream);

            BufferedReader r = new BufferedReader(inputreader);

            String strLine;

            while (( strLine = r.readLine()) != null)   {
                int z = 0;
                int length = strLine.length();
                int ind = strLine.indexOf( ',' );
                String name = "";
                for (int i = 0; i < ind; i++) {
                    name = name + strLine.charAt(i);
                }
                String sphe = "";
                for (int i = ind + 2; i < length; i++) {
                    sphe = sphe + strLine.charAt(i);
                }
                int phe = Integer.parseInt(sphe);

                Food newFood = new Food(name, phe);
                foodlist.add(newFood);

                numFoodItems = z;
                z++;
            } 

        }

        inputStream.close();

    } catch (IOException e){    //Catch exception if any
        e.printStackTrace();
    }

    ArrayList<String> values = new ArrayList<String>();

    for (int i = 0; i <= numFoodItems; i++) {
        values.add((foodlist.get(i)).getName());
    }

    ArrayAdapter<String> arrayAdapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1, values);
    lv.setAdapter(arrayAdapter); 

    setContentView(R.layout.main);

}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:38:14.110

在调用到之后，您才能通过其 ID 找到视图

```
setContentView(R.layout.main); 
```

将上面的行作为 onCreate 函数的第二行，它将起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:52:23.400

作为建议，一个方便的 java 函数是`String.split(String pattern)`. 仍然假设文本中的每一行将始终是：字符串，整数。我们可以重写你的阅读器循环：

```
while (( strLine = r.readLine()) != null) {
    String[] pair = strLine.split(",");
    Food newFood = new Food(pair[0], Integer.parseInt(pair[1]));
    foodlist.add(newFood);
} 
```

我不太确定什么`z`也不`numFoodItems`在做什么，因为它们在每个循环上都设置为零，所以我把它们排除在外。如果你想知道你有多少食物，`foodlist`你可以随时打电话`foodlist.size();`

你可以进一步压缩这个循环，但在某些时候你开始失去可读性，所以这取决于你。

**添加**

啊哈，这就是你想要做的`numFoodItems`。让我们更改用于构建的循环`values`：

```
for (Food foodItem : foodlist) {
    values.add(foodItem.getName());
} 
```

根据 Oracle 的说法，像这样的 For-Each 循环更快，而且它们的输入时间更短。现在，您可能会在 ListView 中获得不止一行。

# powershell - 在 Nuget 包中包含共享的 powershell 文件？

> ID：10375301
> 
> 赞同：1
> 
> 时间：2012-04-29T19:36:15.357
> 
> 标签：powershell, nuget

我有一个解决方案，其中有几个项目在构建时创建 Nuget 包。许多 powershell 文件在不同的项目之间共享，我正在尝试想出一个让它们保持同步的好方法。

我的第一印象是使用链接文件，但后来发现，链接文件不包含在 Nuget 包中。我也无法在互联网上找到任何关于它的信息。

我想我必须编写一个自定义构建目标，但在我走这条路之前，我想看看是否有一个简单的方法。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:27:32.917

也许您可以将所有管道 PowerShell 代码移动到一个模块中，并将其放入您的`$env:PSModulePath`. 从那里，您的特定于解决方案的构建脚本可以只是`Import-Module MyNugetStuff`然后传递本地路径等。最后，您可以将您的模块添加到您的 VCS 中自己的文件夹中（假设您想要共享），然后在您的VCS 文件夹和您的模块路径。当然，您团队中的所有开发人员都必须这样做，但您也可以编写脚本，他们只需要运行一次。

# asp.net-mvc-3 - ObjectStateManager 中已存在具有相同键的对象。ObjectStateManager 无法跟踪具有相同键的多个对象

> ID：10375302
> 
> 赞同：0
> 
> 时间：2012-04-29T19:36:36.513
> 
> 标签：asp.net-mvc-3, entity-framework

我有以下 EdiePOST 操作方法：-

```
[HttpPost]
        public ActionResult Edit([Bind(Include = "Note,DoctorID,VisitID,StatusID,timestamp")] Visit visit) //[Bind(Include="Note,DoctorID,VisitID,StatusID")]
        {
            if ((visit.EditableByAssingedDoctor(User.Identity.Name)) || (visit.EditableByCreatedBy(User.Identity.Name)))
            {

                try
                {
                    if (ModelState.IsValid)
                    {

                        int id = visit.VisitID;
                        var v = repository.GetVisit(id);
                        visit.CreatedBy = v.CreatedBy;
                        visit.Date = v.Date;
                        visit.PatientID = v.PatientID;
                        visit.VisitTypeID = v.VisitTypeID;

                        repository.UpdateVisit(visit);
                        repository.Save();
                        return RedirectToAction("Index");
                    }
                }
                catch (DbUpdateConcurrencyException ex)
                {
//code goes here 
```

在哪里`repository.UpdateVisit(visit);`： -

```
 public void UpdateVisit(Visit v)
            {
                entities.Entry(v).State = EntityState.Modified;

            } 
```

但是当我运行我的应用程序并尝试编辑访问对象时，我收到以下错误：-

```
An object with the same key already exists in the ObjectStateManager. The ObjectStateManager cannot track multiple objects with the same key. 
```

关于`repository.UpdateVisit(visit);`方法，所以出了什么问题？BR

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:56:49.243

您正在将具有相同键的两个对象附​​加到相同的上下文：`v`in`repository.GetVisit(id)`和`visit`in `repository.UpdateVisit(visit)`。这会导致异常。

由于您已经从数据库中加载了实体，您只需更新其属性然后保存即可。而不是使用...

```
repository.UpdateVisit(visit); 
```

...利用...

```
repository.UpdateAttachedVisit(v, visit); 
```

...和：

```
public void UpdateAttachedVisit(Visit attachedVisit, Visit detachedVisit)
{
    entities.Entry(attachedVisit).CurrentValues.SetValues(detachedVisit);
} 
```

# android - 音频标签不适用于phoneGap

> ID：10375303
> 
> 赞同：0
> 
> 时间：2012-04-29T19:36:38.917
> 
> 标签：android, html, cordova

我正在使用 HTML5 开发游戏我正在尝试添加声音，当我在浏览器中测试它时它可以工作，但它是一个手机游戏，所以当我通过 PhoneGap 在模拟器中测试它时，声音不起作用。

这是我的代码：HTML：

```
 <audio id="buttonover">
   <source src="sounds/cartoon008.ogg" ></source>
   </audio> 
```

JavaScript：

```
 sndCollide = document.getElementById('buttonover');
 sndCollide.play(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:20:05.080

原生音频标签的声音响应在移动浏览器中**非常慢。**

所以你可以使用**phonegap 原生声音**系统

它的javascript代码是

> src="声音/cartoon008.ogg"
> 
> > var soundObj = new Media(src,onSuccess,onError);
> > 
> > > soundObj.play();

还请检查移动设备是否支持 ogg 文件。

你必须为 onSuccess 和 onnError 编写一个覆盖函数。

# android - 将应用程序设置为默认应用程序

> ID：10375308
> 
> 赞同：0
> 
> 时间：2012-04-29T19:37:09.913
> 
> 标签：android, sms, default

我怎样才能让我的应用程序成为默认应用程序，当他想在手机上安装我的应用程序时，是否有询问用户是否要将我的应用程序设置为默认应用程序？如果没有，还有其他方法吗？附言。我正在使用 android 2.3 开发消息应用程序 提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:43:49.973

只需在清单文件中声明应用程序能够接收给定类型（或任何其他）的消息，并且在您的应用程序安装后，Android 将在收到相同类型的消息时自动显示一个对话框。该对话框将包含能够处理给定消息的所有已安装应用程序的列表。然后，用户可以选择将这些应用程序之一作为默认处理给定类型的消息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:42:52.920

我认为您需要确保您的应用程序对处理消息意图感兴趣，这样当启动一个应用程序并且 Android 提示用户使用哪个应用程序用于 SMS 他们可以选择您的应用程序时，“默认使用”是一个复选框选择对话框。

我不确定这是否在所有设备上都是统一的，因为一些 OEM 对某些功能有自己的看法，但它包含在股票 android 和 HTC Sense 中。

要注册兴趣，您需要查看 android 服务文档。

[http://developer.android.com/reference/android/app/Service.html](http://developer.android.com/reference/android/app/Service.html)

# c++ - 启动时调试应用程序

> ID：10375313
> 
> 赞同：5
> 
> 时间：2012-04-29T19:37:42.563
> 
> 标签：c++, qt, crash, startup

我编写的 64 位 Qt-Gui 应用程序在尝试从 Visual Studio 启动时崩溃并显示以下消息：

> 应用程序无法正确启动 (0xc000007b)。单击确定关闭应用程序。

没有编译错误。应用程序在尝试加载所有调试符号、DLL 和库时崩溃。

在这种情况下调试的任何指针？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:48:14.597

该错误消息通常意味着在加载程序处理依赖项时，无法加载依赖的 DLL 之一（未找到、损坏的文件、不兼容、其自身依赖项之一有问题、`DllMain`返回 false）。

一个对追踪依赖问题非常有帮助的工具是 Dependency Walker ( `depends.exe`)。它包含在 Microsoft 的 Windows SDK 中，但您应该访问[http://www.dependencywalker.com](http://www.dependencywalker.com)并下载最新版本。

# linux - 通过 shell 脚本从 sftp 目录中获取所有文件有困难吗？

> ID：10375320
> 
> 赞同：0
> 
> 时间：2012-04-29T19:38:31.353
> 
> 标签：linux, shell, unix

我正在尝试通过 Linux shell 脚本使用 sftp 命令从远程服务器获取所有文件，我的代码是：

```
 lftp -u ${sourceEnv},${password} sftp://${Host}<<EOF
    cd $sourceBuildDir/build/64/trace/products/lib/
    get *
    bye
    EOF 
```

问题是我在运行脚本时得到下一个输出：get: Access failed: No such file (*)

它无法识别 * 符号，它基本上是我用来指定我需要从该目录中获取所有文件的，我试图像 ' *' 或 "* " 一样引用它，但它仍然不起作用。每当我在 get 命令中指定文件的全名时，该脚本就可以工作，但我需要它更通用。你认为我应该如何实施？提前谢谢各位。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:46:39.803

我可能会先设置无密码、无密码的 ssh，以避免在命令行上传递密码。在命令行上发送的密码以 ps 显示，这是一个安全问题。

这也将使您可以使用单行 scp 而不是多行 lftp 来执行此操作。

[http://stromberg.dnsalias.org/~strombrg/ssh-keys.html](http://stromberg.dnsalias.org/~strombrg/ssh-keys.html)

# c# - 按钮单击时字典中的 C# 随机条目

> ID：10375321
> 
> 赞同：0
> 
> 时间：2012-04-29T19:38:36.807
> 
> 标签：c#, random, dictionary

我的字典有这个工作代码：

```
dict = new Dictionary<string, string>();

using (StreamReader read = new StreamReader("dictionaryfile.csv"))
{
      string line;
      while ((line = read.ReadLine()) != null)
      {
          string[] splitword = line.Split(',');  
          dict.Add(splitword[0], splitword[1]);
      }
} 
```

我在我的 Windows 窗体中添加了一个按钮，如何从我的字典中分配一个随机条目以显示在按钮单击的消息框中？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T19:48:37.573

您可能正在寻找[`Random`](http://msdn.microsoft.com/en-us/library/system.random.aspx)课程和[`OrderedDictionary`](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)：

```
var dict = new System.Collections.Specialized.OrderedDictionary(); 
dict.Add("key1", "value1");
dict.Add("key2", "value2");
dict.Add("key3", "value3");
dict.Add("key4", "value4");
// get a random value 
var rnd = new Random();
var randomValue = (String)dict[rnd.Next(0, dict.Count)]; 
```

**编辑**：这是使用 a`Dictionary<String,String>`和方法的[`ElementAt`](http://msdn.microsoft.com/en-us/library/bb299233.aspx)方法：

```
var rnd = new Random();
var randomEntry = dict.ElementAt(rnd.Next(0, dict.Count));
String randomKey = randomEntry.Key;
String randomValue = randomEntry.Value; 
```

请注意，您不应在方法中创建随机实例，您应该将其作为参数传递或使用成员变量：[https ://stackoverflow.com/a/768001/284240](https://stackoverflow.com/a/768001/284240)

# jquery - jQuery 和 json 解析

> ID：10375322
> 
> 赞同：0
> 
> 时间：2012-04-29T19:38:39.890
> 
> 标签：jquery, json

我有 JSON：`{"status":"ok","squares":{"3x13":"0","3x12":0,"4x12":0,"2x13":0,"4x13":0,"4x14":2}}`

我如何将其转换为 javascript 中的键值数组？

```
 for (var s in s.squares) {
            console.log(s);
        } 
```

仅给出键，例如 3x13、3x12。如何获取值？

PS对不起英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:42:38.523

如果 JSON 是字符串，您可以使用[jQuery.parseJSON](http://api.jquery.com/jQuery.parseJSON/)将其转换为 JSON 对象。如果您有对象，请使用

```
for (var key in json) {
    console.log("key:", key, "value:", json[key]);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T19:46:48.087

您的循环`for (var s in s.squares)`将迭代 s.squares 引用的对象的每个属性以获取值，您只需这样做`s.squares[s]`，循环将类似于：

```
for (var key in s.squares) {
   var value = s.squares[key];
} 
```

您可能想保护自己一点，并编写如下迭代：

```
var squares = s.squares;
for (var key in squares) {
   if(squares.hasOwnProperty(key)){
      var value = squares[key];
   }
} 
```

# objective-c - 使用 LLVM ExecutionEngine 调用 Objective-C 方法时，所有选择器都无法识别

> ID：10375324
> 
> 赞同：13
> 
> 时间：2012-04-29T19:39:01.987
> 
> 标签：objective-c, llvm, clang, jit, executionengineexception

我在 OSX 上运行，使用 Clang 编译一些使用 OSX Cocoa 类的 Obj-C 代码，我正在尝试使用 LLVM JIT 编译器运行结果。我正在使用最新的 LLVM/Clang 版本。

编译或链接我的代码没有问题，我可以愉快地进行 C 和 C++ 系统调用而没有任何麻烦。但是我所有的 Obj-C 调用都惨遭失败，而且我已经超出了我的深度试图找出原因！该`objc_msgSend()`函数似乎被正确调用，但运行时拒绝识别即使是最简单的选择器。

我已经设法仅使用 Clang 和 LLI 重现了该问题，这是如何做到的：

创建一个简单的文件 test.mm：

```
#include <Cocoa/Cocoa.h>
#include <cstdio>
#include <iostream>

extern "C" int main (int, char**)
{
    std::cout << "==== step 1" << std::endl;

    NSAutoreleasePool* pool = [[NSAutoreleasePool alloc] init];
    [pool release];

    std::cout << "==== step 2" << std::endl;

    return 0;
} 
```

..用clang将其编译为位码：

```
clang -emit-llvm test.mm -c -o test.bc 
```

然后用 lli 运​​行它：

```
lli -load=/System/Library/Frameworks/Foundation.framework/Versions/Current/Foundation test.bc 
```

lli 的输出如下所示：

```
==== step 1
objc[45353]: Object 0x101a362a0 of class __NSCFString autoreleased with no pool in place - just leaking - break on objc_autoreleaseNoPool() to debug
2012-04-29 20:07:35.384 lli[45353:707] -[NSAutoreleasePool init]: unrecognized selector sent to instance 0x101a35170
2012-04-29 20:07:35.386 lli[45353:707] *** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: '-[NSAutoreleasePool init]: unrecognized selector sent to instance 0x101a35170'
*** First throw call stack:
(
    0   CoreFoundation                      0x00007fff89c76fc6 __exceptionPreprocess + 198
    1   libobjc.A.dylib                     0x00007fff8c9e6d5e objc_exception_throw + 43
    2   CoreFoundation                      0x00007fff89d032ae -[NSObject doesNotRecognizeSelector:] + 190
    3   CoreFoundation                      0x00007fff89c63e73 ___forwarding___ + 371
    4   CoreFoundation                      0x00007fff89c63c88 _CF_forwarding_prep_0 + 232
    5   ???                                 0x0000000101929111 0x0 + 4321349905
    6   lli                                 0x000000010148f36b _ZN4llvm15ExecutionEngine17runFunctionAsMainEPNS_8FunctionERKSt6vectorISsSaISsEEPKPKc + 1259
    7   lli                                 0x0000000101016657 main + 3095
    8   lli                                 0x0000000101015a34 start + 52
    9   ???                                 0x0000000000000003 0x0 + 3
)
terminate called throwing an exception0  lli               0x00000001015c5b02 _ZL15PrintStackTracePv + 34
1  lli               0x00000001015c5fd9 _ZL13SignalHandleri + 633
2  libsystem_c.dylib 0x00007fff8f8bccfa _sigtramp + 26
3  libsystem_c.dylib 0x0000000000000001 _sigtramp + 18446603338107859745
4  libsystem_c.dylib 0x00007fff8f85ba7a abort + 143
5  libc++abi.dylib   0x00007fff8518a7bc abort_message + 214
6  libc++abi.dylib   0x00007fff85187fcf default_terminate() + 28
7  libobjc.A.dylib   0x00007fff8c9e71b9 _objc_terminate + 94
8  libc++abi.dylib   0x00007fff85188001 safe_handler_caller(void (*)()) + 11
9  libc++abi.dylib   0x00007fff8518805c __cxa_bad_typeid + 0
10 libc++abi.dylib   0x00007fff85189152 __gxx_exception_cleanup(_Unwind_Reason_Code, _Unwind_Exception*) + 0
11 libobjc.A.dylib   0x00007fff8c9e6e7a _objc_exception_destructor + 0
12 CoreFoundation    0x00007fff89d032ae -[NSObject doesNotRecognizeSelector:] + 190
13 CoreFoundation    0x00007fff89c63e73 ___forwarding___ + 371
14 CoreFoundation    0x00007fff89c63c88 _CF_forwarding_prep_0 + 232
15 CoreFoundation    0x0000000101929111 _CF_forwarding_prep_0 + 18446603342526043505
16 lli               0x000000010148f36b llvm::ExecutionEngine::runFunctionAsMain(llvm::Function*, std::vector<std::string, std::allocator<std::string> > const&, char const* const*) + 1259
17 lli               0x0000000101016657 main + 3095
18 lli               0x0000000101015a34 start + 52
19 lli               0x0000000000000003 start + 18446744069397718531
Stack dump:
0\.  Program arguments: Release/bin/lli -load=/System/Library/Frameworks/Foundation.framework/Versions/Current/Foundation /Users/jules/Desktop/test.bc 
Abort trap: 6 
```

正如您在日志中看到的，它说这`-[NSAutoreleasePool init]`是一个无法识别的选择器。任何其他选择器也会发生同样的情况，例如，`-[NSString init]`或者其他显然应该起作用的东西。

任何帮助或线索将不胜感激！对于这是否是一个错误，或者我做错了什么，或者可能只是一个尚未完成的功能，我有点迷茫。我在 LLVM 文档或互联网上的任何地方都找不到对这个问题的任何引用。

我尝试了不同的 clang 选项，例如遗留的 Obj-C 脆弱 ABI，但没有运气。我不是 LLVM 或 Obj-C 运行时方面的专家，这让我很困惑。

- 编辑 -

只是更多的信息，希望它可能会与某人敲响警钟..

当我尝试用对 objc_msgSend 的显式调用替换正常的 obj-C 消息调用时，我发现：

```
SEL s = sel_getUid ("init");
objc_msgSend (myObject, s);   // Succeeds!

SEL s = @selector (init);
objc_msgSend (myObject, s);   // Fails! 
```

..所以似乎当clang自动生成SEL值时，它会产生一个运行时无法使用的值。任何人都可以建议我应该在 LLVM/Clang 代码库中的哪个位置尝试了解可能发生的情况吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-03T06:40:35.777

Objective-C 使用特殊命名的全局变量来引用选择器，链接器和 ObjC 运行时对这些全局变量有特殊的了解，这使得一切正常工作。lli 不了解 Objective-C；因此，ObjC 运行时永远不会对有问题的全局变量进行特殊处理。

不过，在我的脑海中，我不知道你到底需要做什么才能让它工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-09-03T13:38:37.450

在对这个主题进行了几个月的研究之后，我想分享我的发现。引用我自己的话：

> 可以在 macOS 系统上使用 LLVM JIT 运行 Objective-C 和 Swift 代码。使其工作的一种方法是对 LLVM JIT 引擎使用的 SectionMemoryManager 进行子类化，在内存中分配与 Objective-C 相关的内存部分时拦截它们，在这些部分中找到 Objective-C 元数据，解析来自的 Objective-C 类信息这个元数据，使用一些 Objective-C Runtime API 方法在 Objective-C 运行时注册找到的 Objective-C 类。
> 
> 虽然这种方法只针对 Objective-C 代码和 Objective-C 运行时，但它似乎也支持组合 Swift 和 Objective-C 代码：鉴于已注册 Objective-C 类，启用 Objective-C 互操作性的 Swift 代码似乎在 LLVM JIT 中运行没有任何重大问题。

详情见全文：

[macOS 上的 LLVM JIT、Objective-C 和 Swift：知识转储](https://stanislaw.github.io/2018/09/03/llvm-jit-objc-and-swift-knowledge-dump.html)。

# c++ - Microsoft DirectX SDK 安装失败，错误代码 S1018

> ID：10375331
> 
> 赞同：0
> 
> 时间：2012-04-29T19:39:42.163
> 
> 标签：c++, sdk, directx

我正在尝试安装从 microsoft.com 下载的 Microsoft DirectX SDK（2010 年 6 月），但一直收到错误 S1018。有谁知道它可能是什么？我正在使用 Windows 7 专业版。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:45:31.157

不久前我遇到了这个错误。问题是正在使用它尝试安装的 1 个 DirectX 运行时文件，可能安装到 Windows 文件夹中。

退出尽可能多的程序，包括 Visual Studio、Steam、任何媒体播放器、任何图形软件……

如果仍然失败，请尝试从安全模式安装。

尽管看起来像一个严重错误，但所有开发文件都存在，并且大多数系统文件也应该存在，因此即使您无法成功安装它应该仍然可以工作

# c++ - STL设置了什么样的树实现？

> ID：10375334
> 
> 赞同：3
> 
> 时间：2012-04-29T19:40:01.767
> 
> 标签：c++, data-structures, tree

我知道在 STL 中`vector`代表了一个动态数组的实现。`list`代表链表（双向链表）的实现也是如此。我知道它`set`有一个类似于 tree 的实现。看一下算法复杂度，set 中的大多数内置函数的复杂度为*o(1)*或*o(log n)*。那么这棵树是实现为平衡树还是任何其他类型的树，如红黑树，如果是这样，为什么选择这样的树结构？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-04-29T19:41:04.093

该标准对实现没有任何限制（除了复杂性保证）。

换句话说，它依赖于实现。通常，它是一棵红黑树（参见例如`/usr/include/c++/x.y.z/bits/stl_tree.h`，`x.y.z`您的特定 GCC 版本在哪里）。

# objective-c - 将 MapView 委托设置为 self 时 showUserLocation 发生变化

> ID：10375336
> 
> 赞同：1
> 
> 时间：2012-04-29T19:40:31.877
> 
> 标签：objective-c, ios, mapkit, core-location

我是 CoreLocation 和 MapKit 的新手，我遇到了这个奇怪的问题。基本上，我在 UIView 中显示了一个 MKMapView。当我像这样设置我的 MKMapView 时：

```
self.mapView.showsUserLocation = YES;
//self.mapView.delegate = self; 
```

我得到这个（1）：

![在此处输入图像描述](../Images/7e67ebc76fe34916979f671e40bcb32f.png)

但是当我取消注释第二行时，我得到了这个 (2)，我觉得这很奇怪。

![在此处输入图像描述](../Images/af0de2c32b7a010f5c80edaab78fd6a4.png)

我该怎么做才能将 MKMapView 的委托设置为 self，但仍然得到 (1)

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T19:48:33.950

您是否覆盖了`viewForAnnotation`控制器中的注释（方法）？在我看来，当您将委托设置为 self 时，注释正在被覆盖。

如果您确实更改了 Class 中的注释，请添加以下行。这将防止更改“当前位置”点的注释。

```
- (MKAnnotationView *)mapView:(MKMapView *)map viewForAnnotation:(id <MKAnnotation>)annotation
{
    static NSString *AnnotationViewID = @"annotationViewID";

    // Check if its the annotation for displaying the current position
    if ([annotation isKindOfClass:[MKUserLocation class]])
    {
        return nil;
    }

    // Your annotation code

} 
```

# couchdb - CouchDB Simple SELECT 方法正确吗？

> ID：10375339
> 
> 赞同：1
> 
> 时间：2012-04-29T19:40:41.447
> 
> 标签：couchdb, couchbase, couchdb-futon

我正在 Apache CouchDB 上构建一个非常简单的用户系统。我已经建立了一个简单的视图来通过电子邮件搜索用户：

```
by_email
map
function(doc) {
 if (doc.kind == "user" && doc.email) emit(doc.email, doc.name);
 } 
```

这返回

```
 {"id"=>"00006a80-723b-012f-6b38-1040f398478e", "key"=>"spiderman@spiderman.ai", "value"=>"Spiderman"} 
```

现在我可能遗漏了一些非常愚蠢的东西（如果是这种情况，我道歉）但是为什么你只能从这个视图中检索 2 个字段（如果我们计算 ID，则为 3 个）？

就像在正常情况下一样，您可能希望从电子邮件或用户 ID 开始搜索您的用户数据库并检索完整的文档。

现在我确实阅读了[http://guide.couchdb.org/draft/cookbook.html](http://guide.couchdb.org/draft/cookbook.html)上的示例（按键查找），除非我遗漏了一些非常琐碎的内容，否则结果也不完整，因为它只会返回具有一定年龄的用户名，仅此而已。

我不明白这将如何正确使用：如果您查询您的客户、供应商数据库，无论您想要返回完整文档，而不仅仅是值 1 或 2。

所以我的解决方案是另一种观点：

```
mailplus
map
function(doc) { if (doc.kind == "user" && doc.email)  emit(doc.email,doc) } 
```

所以把电子邮件和完整的文件作为价值还给我。这可行，但您可以想象它在更大的数据库中要慢得多。

所以问题是：有没有更好的方法来做一个简单的查询来检索有关通过电子邮件搜索的用户的完整详细信息，例如使用 CouchDB - NoSQL ？

我知道回答“这是错误的，因为您不能在 NoSQL 中考虑 SQL”的诱惑，但请稍等：在现实世界的应用程序中，根据文档而不是表/行等来考虑 NoSQL，您可能想要完整的文档为用户。想象一下，您有一个简单的系统来检索客户详细信息。您需要完整的文档。仅当您首先提供密钥电子邮件时才需要知道 ID 和密钥。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T19:49:06.543

自从我使用 couchdb 以来已经有一段时间了，但我相信这仍然是准确的。

您只能检索这两个字段，因为这就是您放入视图的全部内容。couchdb 在内部跟踪与每个发出的键/值对应的文档的 id。然后，您可以在查询该视图时使用该`include_docs`选项让 couchdb 按 id 查找文档（请参阅[文档](http://wiki.apache.org/couchdb/HTTP_view_API#Access.2BAC8-Query)）

您概述的另一个选择是查看完整文档，这将使索引更大

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-30T06:26:16.800

您不需要发出文档。只需添加`include_docs=true`到您的查询参数。完整的文档在 wiki [1](http://wiki.apache.org/couchdb/HTTP_view_API#Querying_Options)上。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-30T07:45:12.067

您也可以使用 emit(doc.email, {name: doc.name, age: doc.age}) 发出部分文档

# performance - 消除冗余 (?) openGL 调用

> ID：10375343
> 
> 赞同：2
> 
> 时间：2012-04-29T19:41:05.300
> 
> 标签：performance, opengl

我正在使用 gDEBugger 来尝试提高我的 openGL 代码的性能（目前它非常糟糕，我什至不会告诉你它的 fps 速率）。我正在逐步完成教程（使用调试器查找 openGL 错误等），现在我正在识别冗余状态更改。我有点不确定更改代码以避免它们是否真的是一个好主意。

例如：

*   我的代码通过调用`glClearAccum(0 , 0 , 0 , 0);`and进行“干净初始化” `glClearColor(0.0, 0.0, 0.0, 0.0);`。这些是可以理解的多余的，但我可以在所有情况下依赖它吗？如果某些 openGL 实现不能保证这个初始状态，那么进行调用会更安全，即使它们在大多数情况下是多余的。
*   `glDrawBuffer(GL_BACK);`第一次绘制场景时同样的问题。
*   `glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL)`也被报道是多余的。我意识到我用相同的参数反复调用它；这是因为调用是在 和 之间`glEnable(GL_TEXTURE_2D);`进行的`glDisable(GL_TEXTURE_2D);`，并且在纹理调用完成时仅短暂启用了纹理。永久启用纹理会影响性能吗？如果我坚持暂时启用纹理，是否可以`glTextEnvf`在初始化期间只调用一次，还是会因为此时禁用纹理而失败？还是这取决于openGL的实现？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:50:21.513

对于初始化代码，如果您查看每个特定函数的手册页，它将告诉您默认值是什么，这是由规范保证的。也就是说，初始化代码根本不重要，因为它在开始时只运行一次，并且您进行的每次调用都可能有一个微秒的延迟。在初始化期间不必担心这些事情。

对于 glTexEnvf，禁用纹理时不会重置状态。glEnable(GL_TEXTURE_2D) 对任何其他纹理函数都没有影响，它只是确定在绘制调用期间是否不对纹理进行采样。您不必启用纹理来设置纹理参数。

例如，以下代码是有效的：

```
//textures disabled
glTexEnvf(some_texture_state);

for(i=0;i<10;i++){
   glEnable(GL_TEXTURE_2D)
   //draw some stuff with textures and "some_texture_state"
   glDisable(GL_TEXTURE_2D)
   //draw some stuff without texturing
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:51:35.403

`glClearAccum(0 , 0 , 0 , 0);`并且`glClearColor(0.0, 0.0, 0.0, 0.0);`当您每帧绘制整个屏幕时（您可能会这样做）是多余的，而且它们很重。清除帧缓冲区没有意义，只需在最后一帧上绘制即可。

`glTexEnvf(GL_TEXTURE_ENV, GL_TEXTURE_ENV_MODE, GL_DECAL);`设置一个标志，应该一直工作。不过应该不贵。

# c - 用于峰值 EQ 的 IIR 系数，如何将它们传递给 vDSP_deq22？

> ID：10375359
> 
> 赞同：7
> 
> 时间：2012-04-29T19:43:44.853
> 
> 标签：c, macos, signal-processing, core-audio, accelerate-framework

我有这 6 个用于峰值 EQ 的系数：

```
b0 = 1 + (α ⋅ A)
b1 = −2⋅ωC
b2 = 1 - (α ⋅ A)
a0 = 1 + (α / A)
a1 = −2 ⋅ ωC
a2 = 1 − (α / A) 
```

使用这些中间变量：

```
ωc = 2 ⋅ π ⋅ fc / fs
ωS = sin(ωc)
ωC = cos(ωc)
A = sqrt(10^(G/20))
α = ωS / (2Q) 
```

`vDSP_deq22()`应该通过“5个单精度输入，滤波器系数”的文档，但我有6个系数！另外，我以什么顺序将它们传递给`vDSP_deq22()`？

**更新（17/05）：**我建议大家使用我在 github 上发布的 DSP 类：[https](https://github.com/bartolsthoorn/NVDSP) ://github.com/bartolsthoorn/NVDSP它可能会为您节省很多工作。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T19:49:05.353

二阶滤波器可以表示为以下差分方程（`a`并且`b`可以根据您定义它们的方式互换）：

```
a0.y[n] = b0.x[n] + b1.x[n-1] + b2.x[n-2] - a1.y[n-1] - a2.y[n-2] 
```

您可以通过除以`a0`得到 的表达式`y[n]`，然后您只需要 5 个系数。

我在[此处](http://www.scribd.com/doc/53108402/175/vDSP-deq22)找到的文档指定了顺序（请参阅给出的等式）。看起来顺序是：

```
{ b0/a0, b1/a0, b2/a0, a1/a0, a2/a0 } 
```

# jquery - 在 datalist 中查找 div 并提交按钮

> ID：10375361
> 
> 赞同：2
> 
> 时间：2012-04-29T19:43:54.017
> 
> 标签：jquery, asp.net

当用户单击数据列表中的 div 时，我试图发布，我的 jQuery 应该找到我的隐藏按钮（显示：无）然后发布。我无法获取点击事件。

```
<%@ Control Language="C#" AutoEventWireup="true" CodeBehind="WebUserControl1.ascx.cs"
    Inherits="Everything.controls.WebUserControl1" %>
<script type="text/javascript" src="http://code.jquery.com/jquery-latest.js"></script>
<script type="text/javascript">
    $(document).ready(function () {
        alert("I'm seeing this alert");
        $(".divcontainer").click(function () {

            $(this).find("input").click();
        });
    });
</script>

<div class="myForm" style="padding-bottom: 0; padding-top: 50px; margin-bottom: 0.3em">
    <asp:DataList ID="lstCategoryItems" runat="server">
        <ItemTemplate>
            <div id="myDivId" class="divcontainer cf" runat="server">
                <%# DataBinder.Eval(Container.DataItem, "Key") %>
                <asp:Button ID="Button1" runat="server" OnClick="BtnClick" CommandArgument='<%# DataBinder.Eval(Container.DataItem, "Value") %>'
                    Style="display: none" />
            </div>
        </ItemTemplate>
        <FooterTemplate>
        </FooterTemplate>
    </asp:DataList>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:49:39.183

你可以通过这种方式找到输入：

```
 $(".divcontainer input:hidden").click(function(){
      ....
   }) 
```

或者如果您有另一个输入处理程序：

```
$(document).ready(function () {
    alert("I'm seeing this alert");
    $(".divcontainer").click(function () {
        $(this).find("input:hidden").trigger("click");
    });

    $("input").click(function(){

    })
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T19:51:52.077

试试这个：[**演示**](http://jsfiddle.net/cE8X6/3/)

```
$(".divcontainer").click(function () {
    $('#mybtn').trigger('click');
}); 
```

# javascript - 双 JsTree 实现：如何？

> ID：10375363
> 
> 赞同：4
> 
> 时间：2012-04-29T19:44:04.947
> 
> 标签：javascript, jquery, jstree

我是 jsTree 的新手，我想使用双 jsTree。

**[左 JsTrree] [ >> ] [右 JsTrree]**

“>>”：从左到右复制所选节点的按钮 jsTree

我想从左到右复制部分树层次结构 jsTree。

*   没有重复节点。
*   我不想复制选定节点的子节点
*   根据右侧 jsTree 结构，仅从左侧 jsTree 中选择的节点合并到右侧 jsTree

如果用户从左侧 jsTree 中选择了任何节点，则在按钮（“>>”）上单击我想将部分树从选定节点复制到根节点。

**左jsTree如下**"

```
 Root
     -----A
          -----A1
               -----A1.1
               -----A1.2
          -----A2
               -----`A2.1`
               -----A2.2

     -----B
          -----B1
          -----B2

     -----C
          -----C1
               -----C1.1
               -----C2.2 
```

**-------------------------------------------------- ------------------------------------**
现在假设用户选择了节点 A2.1，然后在 button("> >") 单击下面的部分树应显示在右侧 jsTree

**[#1] 正确的 jsTree：**

```
 Root
     -----A
          -----A2
               -----`A2.1` 
```

现在根节点已添加到右侧 jsTree 中，现在仅选定的节点应合并到右侧 jsTree 中。

**-------------------------------------------------- ----------------------------------**

现在假设用户选择了 C1，那么只有 C1 应该合并到正确的 jsTree 中。

**[#2] 左侧jsTree添加C1后右侧jsTree结构：**

```
Root
     -----A
          -----A2
               -----A2.1 
     -----C
          -----`C1` 
```

假设用户选择了 A1，则 A1 应合并到适当的位置
**[#3] 从左侧 jsTree 添加 A1 后的右侧 jsTree 结构：**

```
Root
     -----A
          -----`A1`
          -----A2
               -----A2.1                   
     -----C
          -----C1 
```

到目前为止，我的解决方法如下

从左侧 jsTree 选择节点后，我正在构建从选定节点到根节点的 xml。并将生成的 partial_xml_string 存储到 cookie 中。OnClick of (">>") 按钮我正在从 cookie 中读取 partial_xml_string 的值 + 清除 partial_xml_string 的 cookie 值。[#1] 案例处理得当。还有其他实现 [#1] 案例的好方法吗？

使用 .get_path ( node , id_mode ) 我得到从根到叶节点的路径(ID & Name)

如果 id_mode =true 则节点**ID** = **Root.id,A.id, A2.id, A2.1.id**

如果 id_mode =false 则节点**名称**= **Root, A, A2, A2.1**

**是否可以将此路径设置为 jsTree 的右侧？**

**如果是，那么如何设置此路径？** **如果路径已经存在，那么如何防止复制**？否则将选定的节点合并到正确的 jsTree。

**-------------------------------------------------- ------------------------------------------**

使用 .bind("select_node.jstree", function (event, data) 我们可以处理选定节点上的事件。如何处理**+** * *icon* * 的 onClick 事件？

考虑我的左侧 jsTree 仅包含一个带有 + 图标的 Root 节点，那么如何处理 + 图标上的 onClick 事件？**看墨水的答案**

**我想获取选定节点的子节点如何将该子节点列表附加到选定节点？**

如何使用jsTree函数实现[#2]和[#3]？

在此问题上的任何帮助或指导将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-08T19:18:34.593

我不知道 jsTree 实现，但我认为您不需要 XML。您可以创建一个递归函数以转到子树的根，然后返回添加每个节点以防它不存在。在伪代码中：

```
function transport(node, tree)
{
    var parent = node.getParent();
    var transported_node = null;

    if(parent != null)
        parent = transport(parent, tree);
    else
       parent = tree;

    transported_node = parent.getChild(node);

    if(transported_node == null)
       transported_node = parent.AddChild(node);

    return transported_node;
} 
```

# c# - 你调用的对象是空的。错误

> ID：10375370
> 
> 赞同：0
> 
> 时间：2012-04-29T19:45:44.417
> 
> 标签：c#, datagridview

我有我的供应商表的 datagridview，然后我也有所有字段的文本框。我有一个 setVendor 方法，将所有文本框设置为数据网格中的值，然后我有一个 currentcellchanged 事件，将文本框设置为单击的正确供应商。这是我的代码：

```
private void dataGridVendors_CurrentCellChanged_1(object sender, EventArgs e)
{
    setVendorInfo((Vendor)allTheVendors[this.dataGridVendors.CurrentRow.Index]);
}

//method to set the textboxes with the vendor information
private void setVendorInfo(Vendor aVendor)
{
    //set all the textboxes
    this.txtVendorId.Text = aVendor.VendorId;
    this.txtName.Text = aVendor.Name;
    this.txtAddressNo.Text = aVendor.AddressNo;
    this.txtStreet.Text = aVendor.Address;
    this.txtCity.Text = aVendor.City;
    this.comboBoxState.Text = aVendor.State;
    this.txtZipcode.Text = aVendor.Zipcode;
    this.txtPhoneNumber.Text = aVendor.PhoneNumber;
} 
```

当我删除记录时发生错误，并且发生在 dataGridVendors_CurrentCellChanged 事件中。我假设它发生是因为一旦删除了选定的记录，就没有选择记录，所以它会抛出错误，但我不知道如何修复它。

我确实注意到，如果我使用 dataGrid，一切正常，但是当我将其切换到 dataGridView 时，会发生此错误。不过，我想使用 dataGridView，因为我认为它看起来更好一些，而且我喜欢自动调整列大小的功能。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T19:51:18.177

在访问当前行之前测试是否为空

```
if(this.dataGridVendors.CurrentRow != null )
    setVendorInfo((Vendor)allTheVendors[this.dataGridVendors.CurrentRow.Index]); 
```

# iphone - 在保存数据中使用加密以避免在 iPhone 游戏中作弊

> ID：10375373
> 
> 赞同：5
> 
> 时间：2012-04-29T19:46:08.003
> 
> 标签：iphone, encryption, app-store, appstore-approval

我已经阅读了使用加密的应用程序的 Apple 出口限制，我很困惑。

是否值得只为加密我的游戏存档数据而执行所有 CCATS / SNAP-R 程序？

使用加密会阻止我的应用在某些地区销售？

我的应用会因为加密而被拒绝吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T13:21:25.647

在我看来，不值得使用加密。一个简单的校验和几乎可以做同样的事情。您可以计算校验和来检测是否有人试图更改存档游戏，而不是加密您的存档游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T13:50:56.043

我同意@pre，跳过加密部分并使用[HMAC](http://en.wikipedia.org/wiki/HMAC)（[在 ios 上](https://stackoverflow.com/questions/735714/iphone-and-hmac-sha-1-encoding)）以确保您的保存没有被更改。为了保护 HMAC 秘密，我将使用任何随机生成器生成它并将其存储在钥匙串中。

钥匙串条目没有备份，因此如果您的 iphone 未越狱，则很难阅读它们。您可以在钥匙串周围尝试这个包装器：[https ://github.com/carlbrown/PDKeychainBindingsController](https://github.com/carlbrown/PDKeychainBindingsController)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-10-09T05:49:21.747

注册过程并不难。其中大部分是填写公司信息（姓名、地址等）。只有一个部分询问您的加密。这个过程大约需要 3 天和几个来回。

Apple 在 iTunesConnect 中有一个复选框，用于标记您是否对登录凭据以外的任何内容使用加密。看起来他们只是在掩盖他们的屁股。您提交已完成表格的屏幕截图，他们会立即在其上签字。

有关您需要采取的步骤的概述，请参阅： [https ://www.chatmap.io/blog/iPhone-iTunes-ERN-Encryption.php](https://www.chatmap.io/blog/iPhone-iTunes-ERN-Encryption.php)

简而言之，注册的工作量并不大。

# codeigniter - 在 Codeigniter 中使用 Jquery 根据选择的另一个下拉列表填充下拉列表

> ID：10375374
> 
> 赞同：0
> 
> 时间：2012-04-29T19:46:15.447
> 
> 标签：codeigniter, jquery

我正在使用 Codeigntier，我的视图文件中有以下下拉列表，它填充了主题列表。

```
<?php echo form_dropdown('subject1', $dropdown_subjects,'',
 'class="required" id="subject1"'); ?> 
```

现在，当任何人从上面的下拉列表中选择任何值时，我想使用 jquery 将值发送到我的控制器并在下表中查询`( SELECT teacherid from table3 WHERE subjectid=$subjectid)`以获取teacherid，以便我可以在另一个下拉选择中填充teacherid 列表。如果任何用户从第一个下拉列表中更改了他的选择，我也想更改第二个下拉列表的值

表名：table3

```
subjectid teacherid
  1        1001
  2        1003 
```

所以底线是我想根据另一个下拉列表填充一个下拉列表。我已经找到了几个关于这个主题的教程，但我无法真正理解那些（我知道我很愚蠢）。

如果我想实现这一点，请你告诉我我的视图和控制器应该是什么样子？

谢谢 ：）

# 编辑

嗨，这是我的控制器和视图文件的样子：

我的控制器

```
 $id= $this->input->post('subject_id'); //receiving the ajax post from view 

   $this->db->select('teachername,teacherid');
   $this->db->from('subject_teacher');
   $this->db->join('teacher', 'teacher.teacherid = subject_teacher.teacherid');
   $this->db->where('subjectid',$id);
   $records = $this->db->get('');

   $data=array();
   $data[''] = 'Select'; 
   foreach ($records->result() as $row)
    {
        $data[$row->teacherid] = $row->teachername;
    }

    return ($data); // I need help here... How to send the data as json? 
```

我的观点：

```
 <script>
           $(function(){

                 $("#subject").change(function(){
            $.ajax({
            url: "<?echo base_url();?>mycontroller/function",
            data: {subject_id: $(this).val()},
            type: "post",
            success: function(msg){
           $("#teacher").html(); // I need help here...how do I get the value from controller and append to my another dropdown named teacher?
        })
      })

        }); // function ends here   

     </script>

  <?php echo form_dropdown('subject1', $dropdown_subjects,'',
   'class="required" id="subject1"'); ?>

   <select name="teacher" id="teacher">
    <option value="">Select</option>
  </select> 
```

请为我在我的视图和控制器中进行必要的更改。

提前致谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:23:47.573

您可以通过使用 jquery ajax 来做到这一点。首先，您将**subject_id**发布到 ajax 页面，ajax 页面将在组合框中返回教师列表，然后将结果填充到第一页中。

```
$("#subject").change(function(){
    $.ajax({
        url: "your-ajax-page-url",
        data: {subject_id: $(this).val()},
        type: "post",
        success: function(msg){
        $("#teacher").html();
    })
}) 
```

这是编辑后的控制器

```
 $id= $this->input->post('subject_id'); //receiving the ajax post from view 

   $this->db->select('teachername,teacherid');
   $this->db->from('subject_teacher');
   $this->db->join('teacher', 'teacher.teacherid = subject_teacher.teacherid');
   $this->db->where('subjectid',$id);
   $records = $this->db->get('');

   $output = null; 
   foreach ($records->result() as $row)
    {
        $output .= "<option value='".$row->teacherid."'>".$row->teachername."</option>";
    }

    echo $output; // HTML example 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:30:36.683

你可以这样做：

你必须在你的控制器中创建一个函数来填充数据，但是你必须把它放在像这样的 var 中而不是输出你的视图

```
$outout = $this->load->view('myselect_output',$data,TRUE); 
```

然后在您的主视图中，您将不得不使用 jquery 或任何其他 js 库来操作 DOM ..

# asp.net-mvc-3 - ASP.NET MVC 3 - 将模型绑定到包含不同类型的 List<>

> ID：10375376
> 
> 赞同：0
> 
> 时间：2012-04-29T19:46:19.940
> 
> 标签：asp.net-mvc-3

我正在尝试研究如何将包含多个对象类型列表的模型绑定到 ASP.NET MVC 3 中的回发操作。我有以下类定义了车辆类型列表：

```
public enum VehicleType
{
    Car,
    Plane.
    Boat
}

public class BaseVehicle
{
    public VehicleType VehicleType { get; set; }
    public string Name { get; set; }
    public int Passengers { get; set; }
}

public class Plane : BaseVehicle
{
    public int WingSpan { get; set; }
    // -- etc --
}

// Properties omitted
public class Car : BaseVehicle {}
public class Boat : BaseVehicle {}

public class VehiclesViewModel
{
    public string Notes { get; set; }
    public List<BaseVehicle> Vehicles { get; set; }
} 
```

上述类由这些视图显示：

```
<!-- VehiclesView.cshtml - loaded by the controller -->
@model Mvc3Test.Models.VehiclesViewModel
<h2>Vehicles</h2>
@Html.EditorFor(m => m.Notes)
<hr />
@Html.EditorFor(m => m.Vehicles)

<!-- BaseVehicle.cshtml -->
@model BaseVehicle
@using Mvc3Test.Data
@Html.HiddenFor(m => m.VehicleType)
@{
    if (Model.VehicleType == VehicleType.Car)
    {
        Html.RenderPartial("Car", (Car)Model);
    }
    else if (Model.VehicleType == VehicleType.Plane)
    {
        Html.RenderPartial("Plane", (Plane)Model);
    }
    // etc..
}

<-- Plane.cshtml -->
@model Mvc3Test.Data.Plane
<h2>Plane</h2>
<p>Name: @Html.EditorFor(m => m.Name)</p>
<p>Passengers: @Html.EditorFor(m => m.Passengers)</p>
<p>Wingspan: @Html.EditorFor(m => m.WingSpan) metres</p>

<!-- Car.cshtml omitted --> 
```

我不知道上面是处理显示的最佳方法（尤其是视图中的 if 语句），但它现在有效。问题是如何绑定回视图模型类。我尝试用 Html.TextBox() 替换 Html.TextBorFor() 以便我可以添加绑定前缀（“Vehicles.Car”等），但似乎没有办法让默认模型绑定器确定html 中表示了什么样的类，因此可以实例化正确的类型。

我想我必须编写一个自定义模型绑定器来解决它 - 这是使用正确的方法还是我错过了另一种方法？

谢谢你的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:21:04.293

首先

```
if (Model.VehicleType == VehicleType.Car)
    {
        Html.RenderPartial("汽车", (汽车)模型);
    }
    else if (Model.VehicleType == VehicleType.Plane)
    {
        Html.RenderPartial("Plane", (Plane)Model);
    }

```

可以用 EditorFor.Works 省略就好了。

至于绑定 - IMO 最好的方法是创建自定义模型绑定器。

例子：

```
公共类 DerivedTypeModelBinder : DefaultModelBinder
    {
        公共覆盖对象 BindModel(ControllerContext controllerContext, ModelBindingContext bindingContext)
        {
            var typeName = GetVehicleType(bindingContext);
            如果（类型名！= null）
            {
                var modelType = Type.GetType(typeName);
                var targetTypeInstance = Activator.CreateInstance(modelType);
                bindingContext = new ModelBindingContext
                                     {
                                         ModelMetadata = ModelMetadataProviders.Current.GetMetadataForType(() => targetTypeInstance, modelType),
                                         ModelState = bindingContext.ModelState,
                                         FallbackToEmptyPrefix = bindingContext.FallbackToEmptyPrefix,
                                         ModelName = bindingContext.FallbackToEmptyPrefix ？string.Empty : bindingContext.ModelName,
                                         ValueProvider = bindingContext.ValueProvider,
                                     };
            }
            返回 base.BindModel(controllerContext, bindingContext);
        }
        私有字符串 GetVehicleType(ModelBindingContext bindingContext)
        {
            var valueResult = bindingContext.ValueProvider.GetValue(bindingContext.ModelName + "." + "VehicleType");
            if (valueResult == null && bindingContext.FallbackToEmptyPrefix)
            {
                valueResult = bindingContext.ValueProvider.GetValue("VehicleType");
            }
            返回值结果 == 空？null : valueResult.AttemptedValue;
        }
    }

```

# makefile - Makefile - 引用父目录的问题

> ID：10375380
> 
> 赞同：1
> 
> 时间：2012-04-29T19:46:56.023
> 
> 标签：makefile, gnu-make

我有一个来自示例项目的makefile，它试图将父目录引用为“../bin”。运行“make install”时，这似乎不起作用。我得到的错误是：

```
cp: cannot stat `/bin/build/*': No such file or directory 
```

项目布局如下：

**/bin**

**/src/makefile**

（所以当我运行makefile时，当前目录是/src/）

似乎用“..”引用父目录是不正确的。我知道我可以使用 {$CURDIR} 变量引用当前目录，但我需要知道正确的变量或引用父目录的方法，以便正确引用 /bin/。我想我可以通过移动makefile来解决这个问题，但我想知道这样做的真正方法以备将来使用。

makefile 看起来像这样（问题用##### 问题###### 突出显示）

```
# The name of the extension.
extension_name := xulschoolhello

# The UUID of the extension.
extension_uuid := helloworld@xulschool.com

# The name of the profile dir where the extension can be installed.
profile_dir := 8mtbjosv.development

# The zip application to be used.
ZIP := zip

# The target location of the build and build files.
bin_dir := ../bin ##### problem ######

# The target XPI file.
xpi_file := $(bin_dir)/$(extension_name)2.xpi

# The type of operating system this make command is running on.
os_type := $(patsubst darwin%,darwin,$(shell echo $(OSTYPE)))

# The location of the extension profile.
ifeq ($(os_type), darwin)
  profile_location := \
    ~/Library/Application\ Support/Firefox/Profiles/$(profile_dir)/extensions/\{$(extension_uuid)\}
else
  ifeq ($(os_type), linux-gnu)
    profile_location := \
      ~/.mozilla/firefox/$(profile_dir)/extensions/
  else
    profile_location := \
      "$(subst \,\\,$(APPDATA))\\Mozilla\\Firefox\\Profiles\\$(profile_dir)\\extensions\\{$(extension_uuid)}"
  endif
endif

# The temporary location where the extension tree will be copied and built.
build_dir := $(bin_dir)/build ##### problem ######

# This builds the extension XPI file.
.PHONY: all
all: $(xpi_file)
    @echo
    @echo "Build finished successfully."
    @echo

# This cleans all temporary files and directories created by 'make'.
.PHONY: clean
clean:
    @rm -rf $(build_dir)
    @rm -f $(xpi_file)
    @echo "Cleanup is done."

# The sources for the XPI file.
xpi_built := install.rdf \
             chrome.manifest \
             $(wildcard content/*.js) \
             $(wildcard content/*.xul) \
             $(wildcard content/*.xml) \
             $(wildcard content/*.css) \
             $(wildcard skin/*.css) \
             $(wildcard skin/*.png) \
             $(wildcard locale/*/*.dtd) \
             $(wildcard locale/*/*.properties)

$(build_dir) $(xpi_built): $(xpi_built)

# This builds everything except for the actual XPI, and then it copies it to the
# specified profile directory, allowing a quick update that requires no install.
.PHONY: install
install: $(build_dir) $(xpi_built)
    @echo "Installing in profile folder: $(profile_location)"
    @cp -Rf $(build_dir)/* $(profile_location)     ##### problem ######
    @echo "Installing in profile folder. Done!"
    @echo

$(xpi_file): $(xpi_built)
    @echo "Creating XPI file."
    @$(ZIP) $(xpi_file) $(xpi_built)
    @echo "Creating XPI file. Done!" 
```

我在 Linux Mint 12 上使用 GNU Make 3.81。

谢谢。

的输出

```
@echo "Installing in profile folder: $(profile_location)"
    @echo ${build_dir}
    @echo ${profile_location} 
```

是 ：

```
Installing in profile folder: ~/.mozilla/firefox/8mtbjosv.development/extensions/
../bin/build
/home/owner/.mozilla/firefox/8mtbjosv.development/extensions/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:04:44.453

我认为您应该尝试检查目标文件夹 , 是否`$(profile_location)`存在并且它是可写的。此外，请确保行尾具有正确的 Linux 格式 (\n)。我目前无法发现任何其他错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:06:07.730

如果它正在运行以使 ../bin 相对于 makefile 所在的位置，而不是它正在运行的位置，该怎么办？如果 make clean 有效，那么这是一个可能是这种情况的迹象。寻找一些编译器选项以提供详细的输出，然后在其中放置一个“pwd”语句以查看它是如何解析的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-08-10T23:35:26.397

不是直接的答案，但是当尝试使用 GNU Make 4.2.1 在命令中引用父目录时，我发现我必须转义正斜杠......

```
backup:
    @tar -czvpf ..\/$(PROGRAM)-`date +'%Y%m%d%H%M'`.tar.gz $(FILES) 
```

# android - 在android中，为什么我的服务在按下电源按钮后没有进入睡眠状态

> ID：10375389
> 
> 赞同：0
> 
> 时间：2012-04-29T19:48:58.970
> 
> 标签：android, service, power-management

我创建了一个将启动服务的应用程序。在我的服务中，我创建了一个计时器，它会定期做一些事情。我没有使用任何唤醒锁。

在我按下电源按钮并等待一段时间后，我的服务似乎仍然会定期在 eclipse 中打印一些东西（我保持 USB 连接以便在 eclipse 中查看消息）。

所以我的服务仍在运行，即使按下电源按钮也永远不会进入睡眠状态？那么它会一直耗尽电池吗？是usb连接造成的吗？有没有人有这样的经历？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T19:58:28.373

保持电话接通电源可防止其进入睡眠状态。更好的测试是断开它与 adb 的连接，等到几个计时器间隔过去，然后重新插入电话并检查 logcat。如果 eclipse 显示与每条 logcat 消息相关的时间，我不记得了。如果没有，您可以使用`adb logcat -vtime`来获取此信息。

# php - Openid Server 存储具有身份的可信站点

> ID：10375402
> 
> 赞同：1
> 
> 时间：2012-04-29T19:50:23.720
> 
> 标签：php, openid, janrain

我刚刚开始将 janrain openid 用于 php（[链接](http://janrain.com/openid-enabled/)）。一旦我创建了另一个表，其中包含 id、nick、email 和用户等列，我想记住我信任哪些站点。Janrain 创建 2 个表 oid_nonces 和 oid_associations。我不明白他们的工作是什么，如果他们有用，我只知道 oid_nonces 似乎没有使用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:57:12.110

在 OpenID 中，关联是依赖方（您）和 OpenID 提供者之间的共享秘密。当用户使用 OpenID 提供者登录后返回您的站点时，将使用此共享密钥。当时，OpenID 提供者已经在 URL 参数中添加了签名`openid.sig`。您使用与 OpenID 提供程序关联的共享密钥验证此签名。

OpenID nonce 是一次性令牌，用于防止重复使用返回 URL。当用户第一次以未知身份访问您的站点时，`openid.nonce`您的服务器将正常进行 OpenID 处理。如果有人随后以相同的方式访问您的站点，则`openid.nonce`表明有人试图重用您的用户身份。

# asp-classic - ASP Classic - 解析 XML InnerXML

> ID：10375403
> 
> 赞同：3
> 
> 时间：2012-04-29T19:50:25.407
> 
> 标签：asp-classic

我喜欢能够解析像 asp.net 这样的值，不幸的是 asp classic 也像标签一样返回`<div>everything within it</div>`标签。

我正在尝试解析路径“/root/div”并返回其中的所有内容，不包括“ `<div></div>`”，结果应该是“ `<p>abc <span>other span</span></p>`”

```
<%
    Set CurrentXML=Server.CreateObject("Microsoft.XMLDOM")
    CurrentXML.LoadXml("<root><div><p>abc <span>other span</span></p></div></root>")'Load string into CurrentXML

    Response.Write("<BR>"&Server.HTMLEncode(CurrentXML.SelectSingleNode("/root/div").XML)) 'I want to return  without the div, the correct result should be <p>abc <span>other span</span></p>
 %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:55:03.290

Try this:

```
<%
Option Explicit

    Dim xml: Set xml = Server.CreateObject("MSXML2.DOMDocument.3.0") 
    xml.LoadXml("<root><div>Text Start<p>abc <span>other span</span></p></div></root>")

    Dim sResult: sResult = ""

    Dim node
    For Each node in xml.selectSingleNode("/root/div").childNodes
        sResult = sResult & node.xml
    Next

    Response.Write Server.HTMLEncode(sResult) 

%> 
```

Unfortunately the MSXML DOM elements do not have an innerXml property. Hence you need to the loop as exemplified about to concatenate the xml of each child node to genereate the inner XML of an element.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T20:57:48.067

This should get you what you're looking for:

```
Response.Write("BR>"&Server.HTMLEncode(CurrentXML.SelectSingleNode("/root/div").childNodes.item(0).XML)) 
```

I'm not sure about your exact case, but you might want to make sure that you have child nodes before assuming that, you can do it with:

```
CurrentXML.SelectSingleNode("/root/div").hasChildNodes ' Should be "True" 
```

Good luck!

# c++ - 更新数组的元素（新元素进入数组后最旧的元素将被删除）

> ID：10375404
> 
> 赞同：0
> 
> 时间：2012-04-29T19:50:36.973
> 
> 标签：c++

我有一个问题，但我不知道如何搜索它，所以想问你。这听起来可能很简单，但我是一个新手。

我正在用 C++ 编写代码。我在一个数组中有 20 个值。我对它们做了一些工作，计算后，我需要为这 20 个值添加一个新值，并需要删除最旧的变量。一种用新值更新数组。

例如：我以前的值：a,b,c,d, .... t
我当前的值：b,c,d,e .... u

只要条件不满足，这个过程就会循环下去。

所以，我的问题是：是否有任何特定的结构或方法来执行这项任务，还是我必须手动处理这项工作？（实际上，我可以通过编写一个对我来说足够的不切实际的方法来做到这一点，但我认为这项工作可能没有专用的堆栈结构）

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T19:54:34.177

使用`std::queue`or `std::deque`（当 deque 可以从两侧删除元素时，队列是 FIFO（先进先出）的区别）：

```
if (queue.size() == MAX_SIZE) {
    queue.pop_front();
}
queue.push_back(value); 
```

# terminal - 卸载 fink 后无法从终端启动任何东西！麦克狮子

> ID：10375406
> 
> 赞同：0
> 
> 时间：2012-04-29T19:50:49.677
> 
> 标签：terminal, osx-lion, fink

我有一个大问题，我无法从终端启动任何东西，不是 python，不是 emacs（或 aquamacs），甚至不是“哪个”。

我正在使用自制软件尝试安装 ffmpeg 并且遇到了困难，所以我决定注意总是出现建议我卸载 fink 的警告。我从我的根目录中删除了 sw 目录，这是 fink 网站告诉我的，并且在快速谷歌搜索后在许多博客和留言板上得到了确认。

从那以后没有任何效果，我几乎可以肯定这是问题的原因，因为在删除 sw 后我立即再次尝试 home brew，它说'brew：找不到命令'。我尝试启动的任何程序都会收到相同的警告。

我在 6 年前的 MacBook 上使用 Mac OS Lion。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:08:41.817

你可能破坏了你的路径。您可以使用命令的绝对路径，直到您修复它。例如：

```
/bin/mv ~/.profile ~/.profile.bak
/bin/mv ~/.bash_profile ~/.bash_profile.bak 
```

然后打开一个新的终端窗口，标准的东西现在应该可以工作了。并修复您的配置文件脚本。

# python - Python - 赋值前引用的变量

> ID：10375407
> 
> 赞同：1
> 
> 时间：2012-04-29T19:50:59.250
> 
> 标签：python, variables

我的代码是：

```
class New(Server):
    noOfCl = 0        

    def onConnect(self, socket):
        print "Client connected"
        print (noOfCl+=1) 
```

我收到以下错误：`UnboundLocalError: local variable 'noOfCl' referenced before assignment.`据我了解，我在引用它之前声明了 noOfCl。有人对我做错了什么有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T19:54:48.023

作为`noOfCl`一个类变量，您需要在它之前添加类名称的前缀。

```
class New(Server):
    noOfCl = 0        

    def onConnect(self, socket):
        print "Client connected"
        New.noOfCl+=1
        print(New.noOfCl) 
```

`print`Python 也不支持调用函数/语句时的就地更新。

# java - URL解码不改变+

> ID：10375409
> 
> 赞同：0
> 
> 时间：2012-04-29T19:51:10.100
> 
> 标签：java, http, decoding

我会解码一个 URL，但仅限于 % 编码。我想保持非 % 编码不变：

例如

```
url = 
http%3A%2F%2Fwww.domain.com%2FNews%2Fpolitics%2FMPs%2Brisk%2Blosing%2Bparliamentary%2Bimmunity%2B%2F-%2F1064%2F1395978%2F-%2Flvylki%2F-%2Findex.html

URLDecoder.decode(url, "UTF-8") = http://www.domain.com/News/politics/MPs+risk+losing+parliamentary+immunity+/-/1064/1395978/-/lvylki/-/index.html 
```

但是，如果：

```
url = http://www.domain.com/News/politics/MPs+risk+losing+parliamentary+immunity+/-/1064/1395978/-/lvylki/-/index.html

URLDecoder.decode(url, "UTF-8") = http://www.domain.com/News/politics/MPs risk losing parliamentary immunity /-/1064/1395978/-/lvylki/-/index.html 
```

我想：

```
URLDecoder.decode(url, "UTF-8") = http://www.domain.com/News/politics/MPs+risk+losing+parliamentary+immunity+/-/1064/1395978/-/lvylki/-/index.html 
```

如何避免`URLDecoder.decode()`将 + 解码为“”。一般来说，我想保留非 % 编码的字符串，即只转换 % 编码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:39:04.313

```
URLDecoder.decode(url.replaceAll("\\+", "%2B")) 
```

# c - C中的字符数组

> ID：10375411
> 
> 赞同：-1
> 
> 时间：2012-04-29T19:51:15.087
> 
> 标签：c, arrays, string

我有一个简单的问题：让用户从键盘输入一些单词，每行一个单词，直到出现“。” （句号）输入然后打印出结果，例如：

```
Enter a word: word1
Enter a word: word2
Enter a word: .
You have entered 2 word(s):
word1
word2 
```

好的，我试试，但是当我运行它时说文件在让我输入第一个单词后停止工作

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <string.h>

int main () 
{ 
    char *word[50]; //each word has maximum 49 character
    int i=0, number_of_word;

    do
    {
        printf ("Enter a word: ");
        scanf("%s", &word[i]);
        i++;
    }
    while (word[i][0]!='.');

    number_of_word =i;
    printf ("You entered %d word(s):\n", number_of_word);
    for (i=0; i<number_of_word; i++)
    {
        printf("%s\n", &word[i]);
    }

    return 0;
} 
```

**-------------------------------------------------- ---------------------**

编辑1：

好的，我试试这个，它有效，但我仍在寻找最好的方法来声明一个未知大小的字符串数组，因为我不知道用户可以输入多少个单词，也不知道每个单词有多少个字母，在 C++ 中它可能调用动态分配数组，我不知道如何在 C 中做到这一点

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <string.h>

int main () 
{ 
    char word[20][50]; //array has maximum 20 words, each word maximum 50 character
    int i=0, number_of_word;

    do
    {

        printf ("Enter a word: ");
        scanf("%s", word[i]);
        i++;
    }
    while (word[i-1][0]!='.');

    number_of_word =i-1;
    printf ("You entered %d word(s):\n", number_of_word);
    for (i=0; i<number_of_word; i++)
    {
       printf("Word %d is %s\n", i, word[i]);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T19:54:54.680

您没有分配任何内存来存储各个字符串，因此您的程序会调用**undefined behavior**。

这个：

```
char *word[50]; 
```

定义了一个包含 50 个指针的数组，但没有进一步的存储。

当你这样做时：

```
scanf("%s", &word[i]); 
```

您正在写入*指针*数组。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:43:20.590

```
#include <stdio.h>
#include <conio.h>
#include <stdlib.h>
#include <string.h>

int main () {
    char *word[50]; //each word has maximum 50 word
    char enter_word[50];//maximum 49 character
    int i=0, number_of_word;

    while(1){
        printf("Enter a word: ");
        scanf("%49s", enter_word);
        if(*enter_word == '.')break;
        word[i++]=strdup(enter_word);
    }

    number_of_word = i;
    printf ("You entered %d word(s):\n", number_of_word);
    for (i=0; i<number_of_word; i++){
        printf("%s\n", word[i]);
    }

    for(i=0;i<number_of_word; ++i)
        free(word[i]);

    return 0;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T11:52:21.553

您只需尝试在 scanf() 中使用“%s”的“%[^\n]”位置。

因为 "%s" 存储字符，直到它在字符串中找到第一个空格。

用你第一次问的程序试试这个

愿它对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-30T11:35:47.977

"char *word[50]" 没有为单个字符串分配内存。你应该使用 alloc 的函数来分配它

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T19:57:01.627

当你声明

```
char *word[50]; 
```

您有 50 个指向随机内存的 char 指针。你想要的是这样的：

```
char word[50][50]; 
```

请注意，您只能有 49 个单词（以及 '.'），并且每个单词可以少于 50 个字符（不要忘记 \0，所以 50 个字符的单词会溢出）。

你会想要将你的 scanf 调用更改为：

```
scanf("%s", word[i]); 
```

请注意，您不需要 &，因为 word[i] 已经是一个指针。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-04-29T19:57:15.673

```
char *word[50]; 
```

您有一个包含 50 个指针的数组。您需要一个 50 字节块的数组。你想读多少字？如果您知道最大值，您可以提前分配空间。如果你不这样做，你需要一个字符串链表之类的东西，当你阅读它时，你可以在其中附加一个新项目。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-04-29T19:58:31.570

它是您的 printf 呼叫。请记住将结束字符 \0 添加到单词的末尾。Printf 打印字符串时打印 char 数组中的所有内容，直到它读取结束字符 \0

BasicAlly ... Hos 应该知道这个词有多长，什么时候应该停止打印？（现在它会永远持续下去）

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-04-29T20:00:42.273

您没有为各个字符串分配内存。

Char *word[50] 只是声明了一个指向*一个*char 指针数组的指针。

编辑

我将在这里尝试用一些伪代码来说明这一点......手机上的格式化代码几乎是不可能的:) 鉴于先前的 char * 输入 [50]：

```
char * nextString;

bool entering=true;

do{

nextString =calloc(50);

// enter the string to nextString

if (nextString[0] != '.'){

     input[i] = nextString;

     i++;

 } else{

 entering=false;

}
}
}while(entering) 
```

# mysql - 比较两个结果集之间的相似性

> ID：10375414
> 
> 赞同：3
> 
> 时间：2012-04-29T19:51:37.033
> 
> 标签：mysql, database, profiling, similarity

我正在创建一个音乐网站，我希望用户能够找到喜欢与他们大致相同的艺术家的用户。

我有一个“喜欢”表，它有 2 列“id_user”、“id_artist”。这是我希望它如何工作的示例：

```
User 1 likes:
1, 12
1, 13
1, 14
1, 26
1, 42
1, 44

User 2 likes:
2, 13
2, 14
2, 15
2, 26
2, 42
2, 56 
```

这 2 个用户共有 4 个艺术家。有没有办法比较这两个结果集，找到数据库中最相似的人？

我的第一个想法是以这种方式连接喜欢：“12,13,14,26,42,44”在一个字符串中，并使用 mysql FULLTEXT 分数来比较不同的字符串。那没用...不知道为什么，但是mysql全文仅适用于文本...不适用于数字...

任何想法或任何线索将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:14:23.170

像这样的东西：

```
SELECT first_user.id_user, second_user.id_user, COUNT(first_user.id_user) AS total_matches

FROM likes AS first_user

JOIN likes AS second_user
ON second_user.id_artist = first_user.id_artist
AND second_user.id_user != first_user.id_user

GROUP BY first_user.id_user, second_user.id_user

ORDER BY total_matches DESC

LIMIT 1 
```

请注意，这不是很有效。解决此问题的一种方法是制作一个“缓存表”，其中包含此查询的输出，并`LIMIT 1`删除了部分。添加一些相关索引并查询此缓存表。您可以设置一个 cron 作业来定期更新此表。

例子：

```
CREATE TABLE IF NOT EXISTS `likes` (
  `id_user` varchar(50) DEFAULT NULL,
  `id_artist` varchar(50) DEFAULT NULL
) ENGINE=MyISAM DEFAULT CHARSET=latin1;

INSERT INTO `likes` (`id_user`, `id_artist`) VALUES ('8', '39'), ('8', '37'), ('4', '37'), ('8', '24'), ('8', '7'), ('4', '28'), ('8', '28'), ('4', '27'), ('4', '11'), ('8', '49'), ('4', '7'), ('4', '40'), ('4', '29'), ('8', '22'), ('4', '29'), ('8', '11'), ('8', '28'), ('4', '7'), ('4', '31'), ('8', '42'), ('8', '25'), ('4', '25'), ('4', '17'), ('4', '32'), ('4', '46'), ('4', '19'), ('8', '34'), ('3', '32'), ('4', '21')

+---------+---------+---------------+
| id_user | id_user | total_matches |
+---------+---------+---------------+
| 8       | 4       |             7 |
+---------+---------+---------------+ 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:16:55.027

可以将表连接到自身。（您需要为表的两个“副本”中的至少一个指定别名，这样您的查询就不会模棱两可。）

`like`因此，给定两个用户，您可以通过将表连接到自身来找到他们共同的“喜欢” 。您还可以通过进行左连接并计算有多少结果和有多少是空的，来找出用户 2 共享用户 1 的喜欢的比例。请注意，这不是对称运算，您需要处理其中一个或两个数字为 0 的情况。

当您说要“在数据库中找到最相似的人”时：您可以为每一对用户执行此操作，但请注意，如果您有`n`用户，则这涉及进行`n*(n-1)/2`比较，这是`n`平方的顺序。如果您有很多用户，这可能是您的数据库要做的大量工作。

# jquery - 使用 jQuery 为 box-shadow 设置动画的工作方法

> ID：10375422
> 
> 赞同：4
> 
> 时间：2012-04-29T19:52:38.843
> 
> 标签：jquery, jquery-animate, css

我在参考上[一个相同的线程时](https://stackoverflow.com/questions/4133366/correct-way-to-animate-box-shadow-with-jquery)提出这个问题，其中包含许多过时的非工作解决方案以及仅限于一个框[的 jquery box-animation 插件。](http://www.bitstorm.org/jquery/shadow-animation/)有谁知道如何为多个元素的 box-shadow 设置动画？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T20:05:25.907

你可以使用**CSS3** `transition`：

### *[jsBin 演示](http://jsbin.com/ererax/26/edit)*

```
.box {
    background: #1c1c1c;
    padding: 10px;
    margin:20px;
    width: 200px;
    -webkit-transition: -webkit-box-shadow 0.5s ease-out;
    -moz-transition: -moz-box-shadow 0.5s ease-out;
    transition: box-shadow 0.5s ease-out;
}

.box:hover {
    -webkit-box-shadow: 0px 0px 15px #444;
    -moz-box-shadow: 0px 0px 15px #444;
    box-shadow: 0px 0px 15px #444;
} 
```

PS，而不是`s` *(seconds)*您可以使用：`ms` *(millis)*。

# assembly - 68k 理解 EQU X+$10

> ID：10375425
> 
> 赞同：2
> 
> 时间：2012-04-29T19:53:11.703
> 
> 标签：assembly, motorola, 68000

假设我有这 2 行代码：

```
 ORG $8100
X   DC  1,2,3,4,5,...
EX  EQU X+$10 
```

是什么`X+$10`意思？（在摩托罗拉 68000 上）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:33:27.093

`$`表示十六进制常量，在本例中为 10 十六进制，或 16 十进制。所以

```
EX  EQU X+$10 
```

表示该`EX`变量被定义为比该`X`变量多 16。

在此示例中，`X`恰好是 8100 hex，因此`EX`也将是 8110 hex。

# c++ - 断开节点并返回

> ID：10375435
> 
> 赞同：0
> 
> 时间：2012-04-29T19:54:18.583
> 
> 标签：c++, class

我有以下代码片段

```
#include<iostream>
#include<cstring>
using namespace std;
class data
{
public:
    long ddata;
    data(long dd)
    {
        ddata=dd;
    }
    void display()
    {
        cout<<ddata<<"  ";
    }

};
class Node
{
     const  int order=4;
    int numitems;
    Node *parent;
    Node *childarray[order];
    data *item[order-1];
public:
    void connect(int childnum,Node *child)
    {
        childarray[childnum]=child;
        if(child!=NULL)
            child->parent=this;

    }
    //disconetc from this node,return it;

    Node *disconnectchild(int childnum)
    {
        Node *tempnode=childarray[childnum];
        childarray[childnum]=NULL;

    }
     return  (tempnode);

} 
```

但是在返回 tempnode 时，它​​用红线为这一行着色并说错误：预期声明，请帮助我澄清什么是问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T19:57:10.637

该行在函数定义之外。

# delphi - 自定义仪表在运行时无法绘制

> ID：10375440
> 
> 赞同：2
> 
> 时间：2012-04-29T19:54:41.260
> 
> 标签：delphi, components

`FPercentDone`是`0`，在错误的地方分配了它的价值。添加`UpdatePercent`过程并在值更改时调用它可以修复它并绘制所有内容。

愚蠢的错误，抱歉浪费你的时间。

* * *

首先，这是我第一次尝试编写任何类型的组件。属性、方法等是一个简单的部分，但是我在画布上绘图时遇到了困难。我确信这是一些新手错误，但我根本看不到它。我一直盯着`TGauge`delphi附带的内容，因为我正在尝试类似但更简单的东西，它仍然只是一个单杠。我无法让它在运行时绘制进度，这是最奇怪的部分，无论如何，对我来说，我可以看到它在设计时*工作*，但在我运行它时却看不到......我至少得到了正确的背景颜色，但没有进度条。

没有任何代码粘贴，因为它类似于`TGauge`反正。我有两个`TBitmap's`，一个用于背景，另一个用于进度条本身，我用背景颜色填充一个，将其绘制到组件画布上，如果有边框偏移第二个的原点并减小它的矩形，用进度绘制它着色并将其绘制到画布上......对我来说似乎很简单，但我做错了什么？

相关代码：

```
type
  TCustomGaugeComp = class(TGraphicControl)
  private
    FMaxValue, FMinValue, FCurValue: DWord;
    FFillBackColor, FFillForeColor: TColor;
    FPercentDone: Real;
    FBorderStyle: TBorderStyle;
    FBorderWidth: Integer;
    procedure SetMaxValue(Value: DWord);
    procedure SetMinValue(Value: DWord);
    procedure SetProgress(Value: DWord);
    procedure SetFillBackColor(Value: TColor);
    procedure SetFillForeColor(Value: TColor);
    procedure SetBorderStyle(Value: TBorderStyle);
    function GetPercentDone: String;
    procedure SetBorderWidth(Value: integer);
  protected
    procedure Paint; override;
  public
    constructor Create(AOwner: TComponent); override;
  published
    property Align;
    property BorderStyle: TBorderStyle read FBorderStyle write SetBorderStyle default bsSingle;
    property BorderWidth: Integer read FBorderWidth write SetBorderWidth default 1;
    property Constraints;
    property Enabled;
    property Font;
    property FillForeColor: TColor read FFillForeColor write SetFillForeColor default clBlack;
    property FillBackColor: TColor read FFillBackColor write SetFillBackColor default clWhite;
    property MinValue: DWord read FMinValue write SetMinValue default 0;
    property MaxValue: DWord read FMaxValue write SetMaxValue default 100;
    property Progress: DWord read FCurValue write SetProgress default 0;
    property PercentDone: String read GetPercentDone;
    property Visible;
  end;

procedure TCustomGaugeComp.Paint;
var
  Background, Progress: TBitMap;
begin
  with Canvas do
  begin
    Background := TBitMap.Create;
    try
      Background.Height := Height;
      Background.Width := Width;
      Background.Canvas.Brush.Color := FFillBackColor;
      Background.Canvas.Brush.Style := bsSolid;
      Background.Canvas.FillRect(ClientRect);
      Progress := TBitMap.Create;
      try
        Progress.Height := Height;
        Progress.Width := Width;
        if FBorderStyle = bsSingle then
        begin
          Progress.Height := Progress.Height - BorderWidth*2;
          Progress.Width := Progress.Width - BorderWidth*2;
        end;
        Progress.Width := trunc(Progress.Width*FPercentDone/100);
        Progress.Canvas.Brush.Color := FFillForeColor;
        Progress.Canvas.FillRect(Rect(0,0,Progress.Width,Progress.Height));
        Background.Canvas.Draw(BorderWidth,BorderWidth,Progress);
      finally
        Progress.Free;
      end;
      Draw(0,0,Background);
    finally
      Background.Free;
    end;
  end;
end; 
```

**每当值更改时，都会调用**RePaint （或 Refresh）：min/max/position/borderwidth。****

 **实际上，它在设计时也表现不佳，有时会绘制进度，有时甚至根本没有绘制，直到我*打开*对象检查器，然后将鼠标移到那里...过度`TGauge`使用`CopyMode`，我才开始这样做，然后我还没有真正理解`CopyMode`值或其正确使用，所以复制粘贴和调整代码是行不通的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T11:05:51.700

`FPercentDone` was `0`, was assigning it's value in the wrong place. Adding `UpdatePercent` procedure and calling it when a value changes fixes it and everything gets drawn.

Dumb mistake, sorry for wasting your time.**

# ajax - 使用 Jsonp 进行 $.ajax 调用后无法在 Jquery 中检索数据

> ID：10375445
> 
> 赞同：0
> 
> 时间：2012-04-29T19:54:58.380
> 
> 标签：ajax, jquery, jsonp, wcf-rest

我有一个函数用于从我的 RESTFUL WCF 服务中检索数据。返回的数据必须是 JSON。

在客户端，我有一个名为 autosuggest 的 javascript 函数，如下所示：

```
function autosuggest(location){

var uri= 'http://localhost:2043/Suggest.svc/GetAirportsjson?location='+location;
$.ajax({
        url:uri,
        dataType: 'jsonp',
        jsonp: 'callback',
        jsonpCallback: 'jsonpCallback(e)',
        success: function(e){
            alert("success");
        }
    }); }; 
```

服务接口为：

```
[WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare, UriTemplate = "/GetAirportsXML?location={location}")]
    [OperationContract]
    List<Suggestions> GetAirportDataXml(string location);

    [WebInvoke(Method = "GET", ResponseFormat = WebMessageFormat.Json, BodyStyle = WebMessageBodyStyle.Bare, UriTemplate = "/GetAirportsJSON?location={location}")]
    [OperationContract]
    List<Suggestions> GetAirportDataJson(string location); 
```

并且在 Firebug 中观察到 location=m 的响应是

```
[{"AirportCode":"MMZ","AirportName":"Maimana","AreaCode":"701","CountryCode":"AF","CountryName":"Afghanistan"},{"AirportCode":"MZR","AirportName":"Mazar-i-sharif","AreaCode":"701","CountryCode":"AF","CountryName":"Afghanistan"},{"AirportCode":"IMZ","AirportName":"Nimroz","AreaCode":"701","CountryCode":"AF","CountryName":"Afghanistan"},{"AirportCode":"TMR","AirportName":"Aguemar","AreaCode":"500","CountryCode":"DZ","CountryName":"Algeria"},{"AirportCode":"BMW","AirportName":"Bordj Badji Mokhtar","AreaCode":"500","CountryCode":"DZ","CountryName":"Algeria"},{"AirportCode":"IAM","AirportName":"In Amenas","AreaCode":"500","CountryCode":"DZ","CountryName":"Algeria"},{"AirportCode":"MUW","AirportName":"Mascara-Ghriss","AreaCode":"500","CountryCode":"DZ","CountryName":"Algeria"},{"AirportCode":"MZW","AirportName":"Mechria","AreaCode":"500","CountryCode":"DZ","CountryName":"Algeria"},{"AirportCode":"MQV","AirportName":"Mostaganem","AreaCode":"500","CountryCode":"DZ","CountryName":"Algeria"},{"AirportCode":"HME","AirportName":"Oued Irara Apt","AreaCode":"500","CountryCode":"DZ","CountryName":"Algeria"},{"AirportCode":"TMX","AirportName":"Timimoun","AreaCode":"500","CountryCode":"DZ","CountryName":"Algeria"},{"AirportCode":"TLM","AirportName":"Zenata","AreaCode":"500","CountryCode":"DZ","CountryName":"Algeria"}] 
```

我还将提供我的服务代码，即

```
using System;
using System.Collections.Generic;
using System.Data;
using System.Data.SqlClient;
using System.ServiceModel.Activation;

namespace AutosuggestAPI.svc
{
    // NOTE: You can use the "Rename" command on the "Refactor" menu to change the class name "Service1" in code, svc and config file together.
    [AspNetCompatibilityRequirements(RequirementsMode = AspNetCompatibilityRequirementsMode.Allowed)]
    public class Suggest : IService1
    {
        public string GetDateTime()
        {
            return DateTime.Now.ToString();
        }

        private static List<Suggestions> GetDistinct(List<Suggestions> suggestions)
        {
            var length = suggestions.Count;
            var Arr = new Suggestions[length];
            suggestions.CopyTo(Arr);

            var dist = new HashSet<string>();

            foreach (var suggestion in Arr)
            {
                if (!dist.Contains(suggestion.AirportCode.ToString()))
                    dist.Add(suggestion.AirportCode.ToString());
                else
                {
                    suggestions.Remove(suggestion);
                }
            }
            return suggestions;
        }

        public List<Suggestions> GetAirportDataXml(string location)
        {
            var suggestions = new List<Suggestions>();
            var val = string.Empty;
            for (int i = 0; i < 2; i++)
            {
                val = i == 0 ? "AirPortName" : "AirPortCode";
                SqlConnection conn = null;
                try
                {
                    // create and open a connection object
                    conn = new SqlConnection("Server=(local);DataBase=DBAirPortCodes;Integrated Security=SSPI");
                    conn.Open();

                    // 1\. create a command object identifying
                    // the stored procedure
                    var cmd = new SqlCommand("sp_CheckCondition", conn) { CommandType = CommandType.StoredProcedure };

                    // 2\. set the command object so it knows
                    // to execute a stored procedure

                    // 3\. add parameter to command, which
                    // will be passed to the stored procedure
                    cmd.Parameters.Add(new SqlParameter("@lookup", val));
                    cmd.Parameters.Add(new SqlParameter("@searchfor", location));
                    var reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        var suggestion = new Suggestions()
                        {
                            _airportCode = Convert.ToString(reader["AirPortCode"]).Trim(),
                            _airportName = Convert.ToString(reader["AirPortName"]).Trim(),
                            _areaCode = Convert.ToString(reader["AreaCode"]).Trim(),
                            _countryCode = Convert.ToString(reader["CountryCode"]).Trim(),
                            _countryName = Convert.ToString(reader["CountryName"]).Trim()
                        };
                        suggestions.Add(suggestion);
                    }
                }
                finally
                {
                    if (conn != null)
                        conn.Close();
                }
            }
            var distinctList = GetDistinct(suggestions);
            return distinctList;
        }

        List<Suggestions> GetAirportDataJson(string location)
        {
            List<Suggestions> suggestions = GetAirportDataXml(location);

            return suggestions;
        }

        public List<Suggestions> GetAirportDataJsonp(string location)
        {
            return GetAirportDataXml(location);
        }

        public List<Suggestions> GetAllSuggestions()
        {
            var suggestions = new List<Suggestions>();
            var val = string.Empty;
            for (int i = 0; i < 2; i++)
            {
                val = i == 0 ? "AirPortName" : "AirPortCode";
                SqlConnection conn = null;
                try
                {
                    // create and open a connection object
                    conn = new SqlConnection("Server=(local);DataBase=DBAirPortCodes;Integrated Security=SSPI");
                    conn.Open();

                    var cmd = new SqlCommand("sp_GetAllAirports", conn) { CommandType = CommandType.StoredProcedure };

                    var reader = cmd.ExecuteReader();
                    while (reader.Read())
                    {
                        var suggestion = new Suggestions()
                        {
                            _airportCode = Convert.ToString(reader["AirPortCode"]).Trim(),
                            _airportName = Convert.ToString(reader["AirPortName"]).Trim(),
                            _areaCode = Convert.ToString(reader["AreaCode"]).Trim(),
                            _countryCode = Convert.ToString(reader["CountryCode"]).Trim(),
                            _countryName = Convert.ToString(reader["CountryName"]).Trim()
                        };
                        suggestions.Add(suggestion);
                    }
                }
                finally
                {
                    if (conn != null)
                        conn.Close();
                }
            }
            var distinctList = GetDistinct(suggestions);
            return distinctList;
        }

    }
} 
```

问题是调用成功并且我在浏览器中获取了数据，但我无法在 Jquery 或 Javascript 中捕获它。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T19:57:26.987

您将错误的字符串传递给 jsonCallback。

应该

```
function autosuggest(location){

    var uri= 'http://localhost:2043/Suggest.svc/GetAirportsjson?location='+location;
    $.ajax({
        url:uri,
        dataType: 'jsonp',
        jsonpCallback: 'jsonpCallback',
        success: function(e){
            alert("success");
        }
    });
 }; 
```

另外为什么你用默认值覆盖默认回调参数名称？

已编辑：似乎您并不真正了解 jquery 如何处理 jsonp 的东西。

jquery 创建一个函数来处理 jsonp 请求的返回，该请求将 json 作为包含在此函数调用中的纯文本返回。您根本可以不提供任何功能，这对于 jquery 和更严格的来说更可取

看看[下面的例子](http://jsfiddle.net/MMQqM/2/)

只有你需要提供的参数是 jsonp 的数据类型

```
var r = $.ajax({
    url : uri
    , dataType:'jsonp'
    , success: function (e) {   
        viewModel.tweets(e.results);                
    }}); 
```

编辑 2：您的服务应处理“回调”参数，如果提供，则在提供的函数调用中包装响应 json

IE

要求：`http://......../GetAirportsjson?location=....&callback=mycallback`

回复：`mycallback({ .... you real json response goes here .... })`

在你拥有这个之前，你没有做正确的 jsonp 响应

# google-api - 如何找到与 API 密钥关联的 Google 帐户？

> ID：10375449
> 
> 赞同：9
> 
> 时间：2012-04-29T19:55:39.943
> 
> 标签：google-api

这很尴尬：几个月前，我在我的 Google 帐户中注册了一张信用卡，以便在我正在开发的应用程序中启用 Google 翻译。从那时起，Google 一直很高兴地为我的卡计费，但我从未收到过电子邮件发票，当我现在使用我认为我使用的帐户登录时，我看到 API 控制台中禁用了 Translate API，我找不到任何计费选项卡。

我搜索了我的电子邮件和电子收据，但找不到任何连接特定 Google 帐户的确认信息（我有大约 10 个用于不同的客户和项目）。有没有办法从密钥中恢复并找到相应的 Google 帐户？还有其他建议吗？不发送一些电子邮件来确认每月约 100 美元的信用卡费用是一种糟糕的形式......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-12T15:20:27.537

我最终追踪了该帐户。这是一个 gmail 帐户，所有收据显然都已通过电子邮件发送到该帐户。

# c - 将文件加载到C中的二维字符数组中

> ID：10375453
> 
> 赞同：0
> 
> 时间：2012-04-29T19:56:11.463
> 
> 标签：c

我有一个包含 25 行的文本文件，每行有 34 个字符。

在 C 中如何加载这些字符并将它们存储到二维数组中？

如果文件的前三行是这样的：

```
bamaaaaaaaacxxxxxxxxxxbaaaaaaaamac
jzjzzzzzzzzdaaaaaaaaaaezzzzzzzzjzj
jzjzbaaczgzzzzzzzzzzzzzzgzbaaczjzj

...and so on 
```

我要求存储数组，就好像它是这样定义的：

```
char* data[] = {
            "baaaaaaaaaaaaaacxxbaaaaaaaaaaaaaac",
            "jzzzzzzzzzzzzzzjxxjzzzzzzzzzzzzzzj",
            "jzbaaaaaaaaaaaaexxdaaaaaaaaaaaaczj",
...and so on 
```

希望这有点道理！重要的`data`是`char data[][]`，它的类型在我的项目的其余部分中以该格式使用并且不能更改。

我已经完成了文件 IO 的基本开始

```
FILE  *infp;

printf("Opening file\n");

if((infp = fopen("file.txt", "r"))== NULL) {
    printf("\nERROR : Unable to open input file\n");
    SetExitWithCode( 999 );
    }else{
            //code here
            } 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:06:10.350

所以，你希望你的数组看起来像这样：

```
char data[25][35] //There is an extra 1 character per line to hold the null terminator character 
```

然后只需将整个文件读入该数组

```
fread(data, 1, sizeof(data), infp); 
```

最后，用终止符替换每行中的换行符

```
for (int i = 0; i < 25; ++i) {
    data[i][34] = 0;
} 
```

这是解决问题的最简单方法，但也是一种不好的方法。它不验证数据的格式是否正确，并且所有内容都是硬编码的。

# php - 正则表达式将字符串 json 分解为值

> ID：10375455
> 
> 赞同：0
> 
> 时间：2012-04-29T19:56:30.317
> 
> 标签：php, regex

我尝试构建一个 php 正则表达式来验证这种类型的输入字符串：

```
 {name:'something name here',type:'',id:''},{name:'other name',type:'small',id:34},{name:'orange',type:'weight',id:28} 
```

ETC...

因此，它是一个 json 列表，每个包含 3 个字段：名称、类型、id。字段名称始终存在，而 type 和 id 可以一起为空字符串（ '' ）。然后，如果它具有有效的格式，我可以用逗号将其分解，并获得一个 json 字符串数组。

我能怎么做？

**更新** 它不是你可以说的有效 json，但我有一个用户放置标签的输入字段，我想跟踪该标签的名称、类型和 ID。例如：tag1（有名字、类型、id）、tags2（只有名字）、tags3（有名字、类型、id）。所以，我认为我可以以这种格式发布一个字符串：

```
{'name':'test','type':'first','id':3},{'name':'other','type':'second','id':45}, etc 
```

但我必须用正则表达式验证这个字符串。我可以

```
$data = explode(',',$list); 
```

然后我做：

```
foreach($data as $d){
  $tmp = json_decode($d);
  if($tmp == false) echo 'error invalid data'; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:54:12.283

You don't need a regex for that. Just use this:

`var_dump(json_decode($json, true));`

See: [http://us.php.net/manual/en/function.json-decode.php](http://PHP.net%20json_decode)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:09:41.197

正如 Gubo 指出的：这不是一个有效的 JSON 编码字符串。但是，如果您要在脚本中处理的实际数据是有效的，那么您在寻找正则表达式时就找错了树…… PHP 有大量的函数可以比正则表达式更快地解析 JSON 字符串。

```
$string1 = "{name:'something name here',type:'',id:''},{name:'othername',type:'small',id:34},{name:'orange',type:'weight',id:28}";
$string2 = '[{"name":"something name here","type":"","id":""},{"name":"othername","type":"small","id":"34"},{"name":"orange","type":"weight","id":"28"}]'; 
```

`$string2`有效 JSON 格式的数据在哪里。如果您的数据是有效的 JSON 字符串，则以下代码就足够了：

```
$parsed = json_decode($string2);
//$parsed[0]['name'] return 'something name here' 
```

但是，如果您正在处理无效的 JSON 字符串，事情会变得有点复杂......首先：如果您缺少引用的对象属性（或它们将在 PHP 中变为的数组键），那么快速修复将是这样的：

```
$parsed = json_decode('['.$string1.']'); 
```

如果你真的想单独解析它们：

```
$separated= preg_split('/(?<=[\}]),/',$string1); 
```

但我不明白你为什么要这样做。这里最大的问题是属性字符串（或键）上没有引号。我整理了一个可以引用这些字符串的正则表达式（未经测试）：

```
$parsed = json_decode(preg_replace('/(?<=[\{,])([a-z]+)/',str_replace('\'','"',$string1))); 
```

请记住，最后一个正则表达式未经测试，因此它可能无法按照您的预期执行...但它应该可以帮助您...对于最后一个示例，相同的规则适用于我给出的所有其他示例：如果引号和括号在那里，只需使用`json_decode`，如果括号丢失，也添加它们......

这里已经很晚了，所以我现在要睡觉了......我希望这个答案没有包含错字和没人能理解的句子。如果是的话，我很抱歉。

# javascript - 使用 jQuery 解析 JSON 数据

> ID：10375460
> 
> 赞同：0
> 
> 时间：2012-04-29T19:56:58.847
> 
> 标签：javascript, jquery, json, yahoo-api

所以我使用 Yahoo 的 API 将坐标转换为邮政编码。它返回的 JSON 是这样的：

```
{
"ResultSet": {
    "version": "1.0",
    "Error": 0,
    "ErrorMessage": "No error",
    "Locale": "us_US",
    "Quality": 99,
    "Found": 1,
    "Results": [{
         ....
     }] 
```

我正在做的是：

```
$.getJSON("http://where.yahooapis.com/geocode?q=" + lat + ",+" + lon + "&gflags=R&flags=J", function(data){
            console.log(data.ResultSet.Results.postal);
        }); 
```

我上面列出的显然不起作用。我的问题是：如何访问 Results 数组中的数据？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:04:00.973

因为结果是一个数组，是否将控制台日志行更改为以下工作？

```
console.log(data.ResultSet.Results[0].postal) 
```

在这种情况下，只需遍历数组以获取每个元素。获取 JSON 的代码对我来说看起来不错，我假设您只是错过了数组元素位 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:10:33.440

这应该有效。

```
$.getJSON("http://where.yahooapis.com/geocode?q=234532,234533&gflags=R&flags=J", function(data){
   $.each(data.ResultSet.Results,function(i,item){
      console.log(data.ResultSet.Results[i].postal);
   });     
}); 
```

示例：http: [//jsfiddle.net/ALsHH/11/](http://jsfiddle.net/ALsHH/11/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T20:12:54.970

该行`console.log(data.ResultSet.Results.postal);`正在尝试访问在一个名为`portal`的对象上调用`data.ResultSet.Results`的属性，但是该属性不存在，因为 Results 是一个对象数组。

您可能需要做的是迭代数组，例如...

```
$.getJSON("http://where.yahooapis.com/geocode?q=" + lat + ",+" + lon + "&gflags=R&flags=J", function(data){
    for (var i=0; i< data.ResultSet.Results.length; i++) {
        console.log("data.ResultSet.Results[i].postal = " + data.ResultSet.Results[i].postal);
}); 
```

# django - 简单的 gravatar 未在 django 模板中显示

> ID：10375467
> 
> 赞同：1
> 
> 时间：2012-04-29T19:57:16.210
> 
> 标签：django, django-templates, gravatar

我参考了这个网站： [http ://tomatohater.com/2008/08/16/implementing-gravatar-django/](http://tomatohater.com/2008/08/16/implementing-gravatar-django/)

我有一个配置文件应用程序，其中有一个带有 mytags.py 的 templatetags 目录。

mytags.py 的内容

```
import urllib, hashlib
from django import template

register = template.Library()

@register.inclusion_tag('templatetags/gravatar.html')
def show_gravatar(email, size=48):
    default = "http://www.mysite.com/media/images/no-avatar.gif"

    url = "http://www.gravatar.com/avatar.php?"
    url += urllib.urlencode({
        'gravatar_id': hashlib.md5(email).hexdigest(),
        'default': default,
        'size': str(size)
    })
    return {'gravatar': {'url': url, 'size': size}} 
```

模板/templatetags/gravatar.html 的内容

```
<img src="{{ gravatar.url }}" width="{{ gravatar.size }}" height="{{ gravatar.size }}" border="0" /> 
```

该标签在 profile.html 模板文件中使用。

但是头像没有显示在profile.html中。然而消息来源显示

```
<div class="gravatar">
<a href="">
<img src="http://www.gravatar.com/avatar.php?default=http%3A%2F%2Fwww.mysite.com%2Fmedia%2Fimages%2Fno-avatar.gif&amp;size=48&amp;gravatar_id=5d1b0b64499475516bd9c051aa7f3560" width="48" height="48" border="0" />
</a></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:00:20.613

```
<img src="{{ gravatar.url|safe }}" width="{{ gravatar.size }}" height="{{ gravatar.size }}" border="0" /> 
```

`Safe`模板过滤器防止自动转义`&amp;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T05:52:46.827

参考[文档](http://en.gravatar.com/site/implement)，总是降低并删除电子邮件。
此外，使用`'http://www.gravatar.com/avatar/'+hash`而不是旧格式。
然后代码看起来像

```
url = 'http://www.gravatar.com/avatar/%s?%s" % (
    hashlib.md5(email.strip().lower()).hexdigest(),  
    urllib.urlencode({'default': default, 'size': size})) 
```

对于您的代码，电子邮件哈希很可能与任何内容都不匹配。我使用您代码中的格式尝试了我的头像，效果很好。[邮箱注册了吗？](https://en.gravatar.com/site/signup/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T20:16:49.033

当我尝试使用图片 URL 时，gravatar 无法识别散列的电子邮件地址，因此它会重定向到您提供的备用图片：[http ://www.mysite.com/media/images/no-avatar.gif](http://www.mysite.com/media/images/no-avatar.gif)

*   你得到后备是正确的吗？或者你期待一个真正的 gravatar 吗？如果是这样，则错误以某种方式存在于哈希中。

*   mysite.com 显然不是您的网站。但是，您实际上是否使用了正确的 URL？

*   硬编码 URL：您使用的主机名是否正确？`MEDIA_URL`你的正确`settings.py`吗？

# php - 通过 PHP 保存 base64 编码图像以供 facebook 共享

> ID：10375468
> 
> 赞同：3
> 
> 时间：2012-04-29T19:57:25.830
> 
> 标签：php, facebook, image, base64

我有一个图像缩略图，编码为 base64，我想在通过 Facebook 共享页面时将其用作默认缩略图。Facebook 似乎不支持直接使用 base64 图像，所以我需要先渲染/保存/解码（？）它，然后用户才能单击“共享”按钮。有什么想法吗？

这是我的缩略图：

```
$thumbnail = '<img src="data:image/jpg;base64,' . $thumbnail_src . '" />'; 
```

显然它在浏览器中渲染得很好，但 Facebook 无法“得到它”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:48:29.230

尝试先查看 GD 库。然后创建一个 php 页面，该页面将使用正确的标题呈现图像，以便 Facebook 将其视为图像。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-09T23:24:10.407

我最终解码了图像并将其写入临时目录。

# image - 根据图像的尺寸和我的限制大小按比例缩放图像

> ID：10375470
> 
> 赞同：-1
> 
> 时间：2012-04-29T19:57:38.297
> 
> 标签：image, geometry

寻找一个可以让我完成此任务的表达式：

我有一个任意宽度/高度的图像，我可以在绘制它之前抓取它的尺寸。
因为图像可能非常大，我想缩小它。

我的画布将有宽度 w 和高度 h。
出于说明目的，我们只说它是 320x240。

如果图像的尺寸等于或小于画布的尺寸，则缩放比例仅为 1。如果它们更大，我将按比例缩放它与画布尺寸相比的大小。

例如，如果我的图像是 640x480，我的比例将是 0.5
如果我的图像是 640x240，我的比例仍然是 0.5
同样如果它是 320x480

这可以写成一个数学表达式吗？例如：

```
def scale_ratio(canvas_width, canvas_height, image_width, image_height)
   #计算比例的数学公式
   回报规模

```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:17:18.023

```
function scale(canvas_width, canvas_height, image_width, image_height) {
  return Math.min(Math.max(canvas_width / image_width, canvas_height / image_height), 1);
} 
```

编辑：您可能想要做这样的事情来减少舍入错误：

```
var scale_width = image_width;
var scale_height = image_height;
if (image_width > canvas_width || image_height > canvas_height) {
    var image_ratio = image_height / image_width;
    if (image_ratio * canvas_width > canvas_height) {
        scale_width = canvas_height / image_ratio;
        scale_height = canvas_height;
    } else {
        scale_width = canvas_width;
        scale_height = image_ratio * canvas_width;
    }
} 
```

# javascript - 为什么注释块中的第二个函数参数？只是好奇

> ID：10375472
> 
> 赞同：3
> 
> 时间：2012-04-29T19:57:45.103
> 
> 标签：javascript, function, parameters, comments

我找到了这段代码，但我不明白参数中注释块的目的：

```
if (!Array.prototype.some)
{
  Array.prototype.some = function(fun /*, thisp*/)
  {
    var len = this.length;
    if (typeof fun != "function")
      throw new TypeError();

    var thisp = arguments[1];
    for (var i = 0; i < len; i++)
    {
      if (i in this && fun.call(thisp, this[i], i, this))
        return true;
    }

    return false;
  };
} 
```

在我看来，它可能是正常的第二个参数，然后可以删除该行：

```
var thisp = arguments[1]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:03:10.200

如果`Array.prototype.some`已定义，则原始方法有第二个参数，即`thisp`，但由于未定义，作者定义了他/她自己的模仿功能的方法。

作者期望调用者传递的第二个参数是`thisp`. HTH。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:12:38.010

`Array.prototype.some`Firefox 内置的实现的元数为 1，即它接受一个参数。为了在不更改元数的情况下实现第二个可选参数，替换代码`arguments[1]`改为通过访问第二个参数。

我实际上不知道 EcmaScript 规范对`Array.prototype.some`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T20:16:13.370

你是对的，它应该是一个参数，因为 1\. 在函数`arguments`中使用函数是[昂贵](https://stackoverflow.com/questions/6147389/accessing-the-arguments-object-is-expensive-huh)的，并且 2\. 它是硬连线到函数中的，尽管它可以留`undefined`在实际的循环中。我会说，该方法不应该在生产代码中。再测试一些，目前尚不清楚第二个参数实际上做了什么。[MDN 垫片](https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/some)是一只奇怪的鸭子，但也许我错过了一些东西。

# java - 通过 Java 中的图形界面将文件名传递给 void main

> ID：10375475
> 
> 赞同：1
> 
> 时间：2012-04-29T19:57:57.860
> 
> 标签：java

我正在做一个程序来从 DAG 计算关键路径方法，程序逻辑是完美的，但是我在尝试集成图形用户界面时遇到了问题。该界面让我通过 JFileChooser 为程序选择输入文件，但我不知道如何将该参数传递给位于主操作中的函数“readfile”。

下面是 void main 的代码：

```
public static void main(String args[]) {
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                JFrameConFondo jf = new EjemploJFrameConFondo();
                jf.setLocationRelativeTo(null);
                jf.setTitle("CPM");
                jf.setVisible(true);
                readfile(route);
               ////I need to pass a filename to the program which calculate the critical path,
            }
        });
    }
} 
```

这是函数“readfile”的代码：

```
public static void leer_archivo(String fileName){
        try{
       File archivo=new File(fileName);
       FileReader fr= new FileReader(archivo);
       BufferedReader br= new BufferedReader(fr);
       String linea;

       linea=br.readLine();
       c=Integer.parseInt(linea);
       for(int i=0;i<c;i++){
           CrearCaso(br, i+1);
       }
        }catch(Exception e){
        }
    } 
```

我正在为文件选择界面上的按钮执行此操作，并且我希望可以以某种方式将该文件的名称发送到 void main 以便能够使用函数“readfile”：

```
 private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
         JFileChooser filechooser = new JFileChooser();
         int option = filechooser.showOpenDialog (this);
         if (option==JFileChooser.APPROVE_OPTION){
            cajaTexto.setText(filechooser.getSelectedFile().getPath());

        } 
```

我希望有人能帮我解决这个问题，我被这个问题困扰了几天，而且我在 Java 世界中真的很陌生。我没有放整个代码，因为有几个类和几行代码。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:19:30.920

您需要在两个地方更改代码。我假设按钮操作实际上是有效的。我假设您的“主”类称为“MyProgram”。

```
private void jButton1ActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_jButton1ActionPerformed
     JFileChooser filechooser = new JFileChooser();
     int option = filechooser.showOpenDialog (this);
     if (option==JFileChooser.APPROVE_OPTION){
        String filename = filechooser.getSelectedFile().getPath();
        cajaTexto.setText(filename);
        // call main():
        MyProgram.main(new String[] { filename });
    }

public static void main(String args[]) {
            // assign file name
    final String route = args[0];
        java.awt.EventQueue.invokeLater(new Runnable() {
            public void run() {
                JFrameConFondo jf = new EjemploJFrameConFondo();
                jf.setLocationRelativeTo(null);
                jf.setTitle("CPM");
                jf.setVisible(true);
                readfile(route);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:22:32.923

好的，让我检查一下我是否正确理解了您的问题...
您有一个`readfile(String filename)`要在函数内部调用的`main`函数。
您可以使用`filechooser.getSelectedFile().getPath()`.
在这种情况下，您可以将所选路径导出到公共类的静态变量中。

所以创建一个新类：

```
public class Globals
{
  private static String FilePath;
  public static String GetFilePath()
  {
    return FilePath;
  }
  public static void SetFilePath(String NewPath)
  {
    FilePath = NewPath;
  }
} 
```

使用按钮设置它：

```
Globals.SetFilePath(filechooser.getSelectedFile().getPath()); 
```

然后使用它：

```
readfile(Globals.GetFilePath()); 
```

注意*
这不一定是可用的最佳解决方案。但是，它涉及对*已经存在*的源代码的最少更改。另外，请原谅我的 Pascal 表示法，C# 的习惯。

# c - getchar 的输出

> ID：10375486
> 
> 赞同：0
> 
> 时间：2012-04-29T19:58:41.477
> 
> 标签：c

```
 int ch;
    do
    {
            ch = getchar();
            printf("ch = %d\n",ch);
    }while(ch != '\n' && ch != EOF); 
```

在这种情况下，输入 1234 的输出为

```
 ch = 49
    ch = 50
    ch = 51
    ch = 52
    ch = 10 
```

但是像这样给它

```
 char chs[100] = {0};
    unsigned int u = 0;
    int sign = 1,k=0;
    if(scanf("%[- 0-9]",&chs[0])== 1)
    {
             int ch;
             do
             {
              ch = getchar();
              printf("ch =  %d\n",ch);
             }while(ch != '\n' && ch != EOF); 
```

在这种情况下，输入 = 1234 的输出为

```
 ch =10 
```

为什么会在这里发生？？？有人可以解释一下...为什么输出和以前不一样？？

scanf 在这里到底是如何工作的？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T20:02:21.787

调用`scanf`从流中读取数据。当您稍后尝试使用已读取的字符再次从流中读取时，`getchar`这些字符`scanf`已被使用且不会再次读取。

此外，请参阅文档以[`scanf`](http://www.cplusplus.com/reference/clibrary/cstdio/scanf/)获取格式字符串的有效值。

# emacs - 如何在 emacs nxhtml 模式下禁用 mlinks-mode

> ID：10375489
> 
> 赞同：0
> 
> 时间：2012-04-29T19:59:02.887
> 
> 标签：emacs, nxhtml

我正在使用带有 nxhtml 模式的 emacs。我发现 mlinks-mode 很痛苦，因为我将 PHP 常量用于我的路径，这会触发 mlinks-mode - 所以当我无意中单击链接时，我会得到一个调试堆栈跟踪。

每当我进入 HTML 块时，都会启用 mlinks-mode。我尝试设置我的初始化文件或 mlinks-mode 选项来禁用它，但无论这些设置如何，它似乎都是动态加载的。有没有办法阻止 nxhtml 加载这种模式，除非我想要它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:10:35.187

尝试`M-x customize-variable RET mlinks-mode-functions RET`删除`nxhtml-mode`条目。

# javascript - Firefox 避免缓存响应？

> ID：10375491
> 
> 赞同：1
> 
> 时间：2012-04-29T19:59:19.533
> 
> 标签：javascript, jquery, firefox, caching, browser

在 Firefox 12 上，当我连续请求两个具有相同 URI 但具有不同请求标头（不同接受字段）的资源时，响应是第一个请求的缓存响应。第一个请求是正确返回的页面的 text/html 请求，第二个请求是这样的：

请求的 URL 是：[http://localhost:8080/test/](http://localhost:8080/test/)带有这些标头：

***响应标头***

**Content-Type text/html;charset=ISO-8859-1**
日期 Sun, 29 Apr 2012 19:41:53 GMT
服务器 Apache-Coyote/1.1

***请求标头***

**Accept application/json**
Accept-Encoding gzip, deflate
Accept-Language en-us,en;q=0.5
Connection keep-alive
Cookie JSESSIONID=DB75F9F730D72D040CB5781903B60E87
Host localhost:8080
Referer [http://localhost:8080/test/](http://localhost:8080/test/)
User-Agent Mozilla/ 5.0 (Windows NT 6.1; WOW64; rv:12.0) Gecko/20100101 Firefox/12.0 X-Requested-With XMLHttpRequest

你有什么建议可以避免这个问题吗？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T03:26:27.313

如果您的服务器根据不同的 Accept 标头发送不同的内容，它应该发送“Vary: Accept”以告诉缓存 Accept 标头需要成为缓存键的一部分。你的服务器是这样做的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:03:28.470

`cache:false`在`$.ajax({...})`参数中使用。这会向查询字符串添加一个随机值，以确保不会发生缓存。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T20:09:11.037

使用以下行将缓存 false 应用于使用 jquery 发出的所有 ajax 请求

```
$.ajaxSetup({ cache: false }); 
```

[ajaxSetup](http://api.jquery.com/jQuery.ajaxSetup/)的更多选项

# javascript - 公共 Dropbox 中的 XMLHttpRequest 访问文件

> ID：10375496
> 
> 赞同：2
> 
> 时间：2012-04-29T20:00:21.863
> 
> 标签：javascript, html, xmlhttprequest, dropbox

我正在建立一个快速网站；由于它的性质，我有能力将它托管在我的 Dropbox 公用文件夹中。我正在尝试使用 XMLHttpRequest 读取一些文本文件：

```
function getParameters() {
var oRequest = new XMLHttpRequest();
var sURL = "http://dl.dropbox.com/u/7828009/Relay%20Fundraising%20Site/parameters.txt";
// var sURL = "file:///parameters.txt";
oRequest.open("GET",sURL,false);
    oRequest.onreadystatechange = function (oEvent) {  
    if (oRequest.readyState === 4) {  
        if (oRequest.status === 200) {  
          console.log(oRequest.responseText)  
    } else {  
      console.log("Error", oRequest.statusText);  
    }  
  }  
};  
oRequest.setRequestHeader("User-Agent",navigator.userAgent);
try {
    oRequest.send(null)
} catch (err) {
    alert(err);
}

if (oRequest.status==200) alert(oRequest.responseText);
else alert("Error executing XMLHttpRequest call!");
} 
```

我在 send() 行中收到 XMLHttpRequest 101 错误，我不知道如何解决这个问题。确切的错误是

```
XMLHttpRequest cannot load http://dl.dropbox.com/u/7828009/Relay%20Fundraising%20Site/parameters.txt. Origin null is not allowed by Access-Control-Allow-Origin. 
```

我可以做些什么来解决这个问题，还是因为 Dropbox 本身？

* * *

~~**更新** 我尝试直接从保管箱 URL 加载文件。~~

```
http://dl.dropbox.com/u/7828009/Relay%20Fundraising%20Site/main.htm 
```

现在是新错误

```
XMLHttpRequest cannot load http://www.javascripter.net/faq/requested_file.htm. Origin http://dl.dropbox.com is not allowed by Access-Control-Allow-Origin. 
```

~~我能做些什么呢？~~

* * *

**更新 2：** D'oh 时刻……我留下了一个测试 URL，看看它是否是 Dropbox 问题。它链接到外部文件。解决了我的问题。

主要问题是从本地副本运行文件。从 Dropbox 公共 URL 运行解决了该问题。感[谢昆汀](https://stackoverflow.com/a/10375507/472768)，间接引导我找到答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:02:01.647

该错误消息是因为您将 HTML 文档托管在本地硬盘上，而不是与您尝试加载的文件位于同一服务器上。

[出于安全原因](http://en.wikipedia.org/wiki/Same_origin_policy)，您不能访问这样的资源。

* * *

该 URL`http://www.javascripter.net/faq/requested_file.htm`不会出现在您共享的代码中。它不应该产生那个错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-01T02:44:43.027

我使用了相同的方法，它完美无缺。您的问题可能是 Dropbox 更改了“路径”现在是 [https://dl.dropboxusercontent.com/u/](https://dl.dropboxusercontent.com/u/) ......而不是 [http://dl.dropbox.com/u/](http://dl.dropbox.com/u/)

# matlab - 在 Maple 和 Matlab 之间复制一个矩阵

> ID：10375497
> 
> 赞同：1
> 
> 时间：2012-04-29T20:00:25.267
> 
> 标签：matlab, math, matrix, maple

如何将给定的（4x4）矩阵从 Maple 复制到 MATLAB？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T01:24:56.423

在 Maple 中，您应该能够使用[ExportMatrix](http://www.maplesoft.com/support/help/Maple/view.aspx?path=ExportMatrix)命令生成 Matlab 可以读取的文件（从数字矩阵或向量）。

Maple 15 及更高版本允许导出为 Matlab 可以读取的二进制文件格式。较旧的版本（例如 14、13 等）只能使用该命令导出为 Matlab 可以读取的 ASCII 格式文件。

# java - Java算法查询

> ID：10375498
> 
> 赞同：0
> 
> 时间：2012-04-29T20:00:33.527
> 
> 标签：java, math

我想找到数组总数的平均差异。

我的数组结构如下（从数据库中提取）：

`day`, `1`, `2`, `3`,`4`

所以你可以看到 5 个数组是如何从数据库中提取出来的。

例如，我需要的 Java 算法如下：

要将 1、2、3、4 中的每一个值加起来，然后循环到第二天（如果有的话），重复相同的加法。最后，计算每天总数之间的“平均差”。

例如，我做了一些示例数据，试图让你更清楚！

```
1 (Mon)     135 90  105 150
2 (Tues)    143 86  117 163
3 (Wed)     129 100 140 158 
```

所以算法需要做的是：

135+90+105+150 = 500，

143+86+117+163 = 509，

129+100+140+158 = 527

但唯一的问题是，第 1 列是它自己的数组，第 2、3、4 列在前面。

计算“平均增加/减少”，即：

[https://math.stackexchange.com/questions/16554/what-is-average-increase-percentage-and-how-to-calculate-it](https://math.stackexchange.com/questions/16554/what-is-average-increase-percentage-and-how-to-calculate-it)

我不确定如何在Java中实现它！任何帮助，将不胜感激。

如果我可以提供更多信息，请告诉我。

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:09:15.310

您是否已经到了这个阶段首先能够访问所有元素？（如果我正确理解了你的问题？）

```
//first for loop loops through the number of days
for (int i = 0; i < day.length; i++)
{   //second for loop loops through all integers in Ith day
    for (int j = 0; j < day[i].length; j++)
    {
        print day[i][j] 
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:14:09.713

由于我们知道数据库中项目的位置，因此以下可能有效：

```
/*Psudeocode:
ArrayList<Integer> firstCol = //get first column
ArrayList<Integer> secondCol = //get second column
....
ArrayList<Integer> nCol = //get n column
*/
ArrayList<Integer> values = new ArrayList<Integer>();
int currentRow;
for(int i=0;i<n;i++)
{
     currentRow = 0;
     currentRow += firstCol.get(i);
     currentRow += secondCol.get(i);
     //etc, etc...
     values.add(currentRow);
}
//At this point, values contains all the sums of the different rows.
//To calculate the average percent change:
//PR= (((Vpresent - Vpast) / Vpast) x 100) / N
for(int i=0;i<values.size() -1;i++)
{
    System.out.println(((values.get(i+1) - values.get(i)) * 100) / (i+1))
} 
```

我希望这有帮助。 [帮助平均百分比变化](http://www.ehow.com/how_5485263_calculate-average-percent-change.html)

# ruby-on-rails - ActiveRecord 查询每天的新用户数量

> ID：10375501
> 
> 赞同：4
> 
> 时间：2012-04-29T20:00:55.953
> 
> 标签：ruby-on-rails, ruby-on-rails-3, activerecord

我想生成一个表格，显示每天创建了多少用户。

执行此操作的最有效或最优雅的 ActiveRecord 查询是什么？

我的（简化的）架构如下所示：

```
create_table "users" do |t|
  t.datetime "created_at"
  t.string   "name"
end 
```

我想要一个看起来像这样的表，其中整数是每天新用户的计数：

```
day              new users
2012-04-01       55
2012-04-02       63
2012-04-03       77
2012-04-04       88 
```

我想从如下所示的数组生成表：

```
data_table.add_rows( [
  [ Date.parse("2012-04-01"), 55],
  [ Date.parse("2012-04-02"), 63],
  [ Date.parse("2012-04-03"), 77],
  [ Date.parse("2012-04-04"), 88]
] ) 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-04-29T20:13:20.570

您可以使用 ActiveRecord`group`方法来做到这一点，如下所示：

```
@users_created_by_day = User.group("DATE(created_at)").count 
```

这将为您提供一个哈希值，其中日期为键，当天创建的用户数为值。

# c++ - 捕获隐藏桌面的屏幕截图

> ID：10375509
> 
> 赞同：6
> 
> 时间：2012-04-29T20:02:28.730
> 
> 标签：c++, windows, winapi, gdi+, gdi

我正在使用我用 C++ 编写的简单应用程序在 Windows 上使用虚拟桌面，我想知道是否有办法捕获辅助/隐藏桌面的屏幕截图？我知道我可以做 SwitchDesktop -> 捕获屏幕截图 -> SwitchDesktop，但这听起来不是一个好的解决方案....

也许我在隐藏的桌面上运行了一些窗口，以获取它的 hwnd 并以某种方式使用它来捕获整个屏幕？

我已经运行了 Spy++，但似乎找不到不属于当前活动桌面的窗口。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T00:15:59.667

如果您可以在没有 XP 支持的情况下生活，那么[本文](http://spazzarama.com/2009/02/12/screen-capture-with-vista-dwm/)将介绍如何使用[DWM API](http://msdn.microsoft.com/en-us/library/aa969540.aspx)获取不可见桌面的屏幕截图。

# android - 全息黑暗主题 ICS 中按钮（正常状态）的颜色值

> ID：10375511
> 
> 赞同：2
> 
> 时间：2012-04-29T20:02:52.663
> 
> 标签：android, android-4.0-ice-cream-sandwich, android-theme

需要有关 HOLO DARK 主题 ICS 中按钮颜色代码的帮助。除了处于正常状态的按钮外，这个[问题](https://stackoverflow.com/questions/9947156/what-are-the-default-color-values-the-holo-theme-on-android-4-0)对 Holo 主题的所有颜色代码都有启发。提前致谢。 [基本按钮](http://developer.android.com/design/building-blocks/buttons.html#basic)全息主题 ics。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-30T10:40:22.547

我现在明白了。如果你想要 Android ICS 的默认颜色；你只需要去你的Android SDK并照顾platforms\android-15\data\res\values然后颜色。你去：

```
 <!-- For holo theme -->
    <drawable name="screen_background_holo_light">#fff3f3f3</drawable>
    <drawable name="screen_background_holo_dark">#ff000000</drawable>
    <color name="background_holo_dark">#ff000000</color>
    <color name="background_holo_light">#fff3f3f3</color>
    <color name="bright_foreground_holo_dark">@android:color/background_holo_light</color>
    <color name="bright_foreground_holo_light">@android:color/background_holo_dark</color>
    <color name="bright_foreground_disabled_holo_dark">#ff4c4c4c</color>
    <color name="bright_foreground_disabled_holo_light">#ffb2b2b2</color>
    <color name="bright_foreground_inverse_holo_dark">@android:color/bright_foreground_holo_light</color>
    <color name="bright_foreground_inverse_holo_light">@android:color/bright_foreground_holo_dark</color>
    <color name="dim_foreground_holo_dark">#bebebe</color>
    <color name="dim_foreground_disabled_holo_dark">#80bebebe</color>
    <color name="dim_foreground_inverse_holo_dark">#323232</color>
    <color name="dim_foreground_inverse_disabled_holo_dark">#80323232</color>
    <color name="hint_foreground_holo_dark">#808080</color>
    <color name="dim_foreground_holo_light">#323232</color>
    <color name="dim_foreground_disabled_holo_light">#80323232</color>
    <color name="dim_foreground_inverse_holo_light">#bebebe</color>
    <color name="dim_foreground_inverse_disabled_holo_light">#80bebebe</color>
    <color name="hint_foreground_holo_light">#808080</color>
    <color name="highlighted_text_holo_dark">#6633b5e5</color>
    <color name="highlighted_text_holo_light">#6633b5e5</color>
    <color name="link_text_holo_dark">#5c5cff</color>
    <color name="link_text_holo_light">#0000ee</color> 
```

这是背景：

```
 <color name="background_holo_dark">#ff000000</color>
 <color name="background_holo_light">#fff3f3f3</color> 
```

如果您在 Photoshop 等中查找它，可能不会得到相同的颜色，因为它设置了 Alpha 值。

# php - 信箱图像并用另一个图像填充空白空间

> ID：10375512
> 
> 赞同：1
> 
> 时间：2012-04-29T20:02:53.223
> 
> 标签：php, image, gd, scaling, image-scaling

我目前正在使用 GD php 库来缩放一些图像信箱样式，并用黑色填充生成的空白空间。但是，我需要使用另一个图像文件中的模式来填充空白空间。关于如何做到这一点的任何想法？

这是我用来缩放图像的代码：

```
 function resize_image($source_image, $destination_width, $destination_height, $type = 0) {
    // $type (1=crop to fit, 2=letterbox)
    $source_width = imagesx($source_image);
    $source_height = imagesy($source_image);
    $source_ratio = $source_width / $source_height;
    $destination_ratio = $destination_width / $destination_height;
    if ($type == 1) {
        // crop to fit
        if ($source_ratio > $destination_ratio) {
            // source has a wider ratio
            $temp_width = (int)($source_height * $destination_ratio);
            $temp_height = $source_height;
            $source_x = (int)(($source_width - $temp_width) / 2);
            $source_y = 0;
        } else {
            // source has a taller ratio
            $temp_width = $source_width;
            $temp_height = (int)($source_width / $destination_ratio);
            $source_x = 0;
            $source_y = (int)(($source_height - $temp_height) / 2);
        }
        $destination_x = 0;
        $destination_y = 0;
        $source_width = $temp_width;
        $source_height = $temp_height;
        $new_destination_width = $destination_width;
        $new_destination_height = $destination_height;
    } else {
        // letterbox
        if ($source_ratio < $destination_ratio) {
            // source has a taller ratio
            $temp_width = (int)($destination_height * $source_ratio);
            $temp_height = $destination_height;
            $destination_x = (int)(($destination_width - $temp_width) / 2);
            $destination_y = 0;
        } else {
            // source has a wider ratio
            $temp_width = $destination_width;
            $temp_height = (int)($destination_width / $source_ratio);
            $destination_x = 0;
            $destination_y = (int)(($destination_height - $temp_height) / 2);
        }
        $source_x = 0;
        $source_y = 0;
        $new_destination_width = $temp_width;
        $new_destination_height = $temp_height;
    }
    $destination_image = imagecreatetruecolor($destination_width, $destination_height);
    if ($type > 1) {
        imagefill($destination_image, 0, 0, imagecolorallocate($destination_image, 0, 0, 0));
    }
    imagecopyresampled($destination_image, $source_image, $destination_x, $destination_y, $source_x, $source_y, $new_destination_width, $new_destination_height, $source_width, $source_height);
    return $destination_image;
} 
```

谢谢你

编辑 - - - - - - - - -

我现在正在使用这个完美运行的代码，使用下面建议的方法：

```
 $destination_image = imagecreatetruecolor($destination_width, $destination_height);

    if ($type > 1) {
        if ($pattern != NULL) {
            $pattern = imagecreatefrompng($pattern);
            imagesettile($destination_image, $pattern);
            imagefill($destination_image, 0, 0, IMG_COLOR_TILED);
        } else {
            imagefill($destination_image, 0, 0, imagecolorallocate($destination_image, 0, 0, 0));
        }
    }
    imagecopyresampled($destination_image, $source_image, $destination_x, $destination_y, $source_x, $source_y, $new_destination_width, $new_destination_height, $source_width, $source_height);
    return $destination_image; 
```

$pattern 是用于填充信箱的背景图像的文件路径！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:04:01.420

[首先使用imagesettile()](http://php.net/manual/en/function.imagesettile.php)准备背景以创建平铺画布以覆盖您的信箱，然后使用[imagecopy()](http://www.php.net/manual/en/function.imagecopy.php)或[imagecopyresampled()](http://www.php.net/manual/en/function.imagecopyresampled.php)的 source_x/y/w/h 参数将图像的信箱部分复制到此资源中。

# jquery - jQuery $.animate scrollLeft 不工作/不同的方法？

> ID：10375519
> 
> 赞同：1
> 
> 时间：2012-04-29T20:04:20.600
> 
> 标签：jquery, syntax, jquery-animate

我对此有点麻烦。

这不是语法吗？：

```
$("iframe#myFrame").animate({scrollLeft:"100px"},"slow"); 
```

我需要确切地知道如何做到这一点。你`scrollLeft`也会加引号吗？你可以看到我对 jQuery 动画是多么的无知。您是否还在整数后使用 px ？

现在，如果您注意到，我将选择器示例用作 iframe。

也许 jQuery 动画`scrollLeft`在 iframe 上不起作用？

如果是这种情况，还有哪些其他方法可以滚动HTML 按钮的`iframe`at ？`click`我试过`scrollLeft()`了，但也许我的语法也有问题。

请给我具体的例子，清楚地展示你解决这个问题的方法的一般和简单的语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-24T17:08:56.537

我猜选择器不正确。尝试给你`<iframe>`一个 id 并在选择器上使用它。例如：

```
<iframe id = 'myframe'>. 
```

您的 jquery 脚本必须是这样的：

```
$('#myframe').animate(); 
```

# nunit - 在远程机器上通过 cc.net 开始测试

> ID：10375520
> 
> 赞同：0
> 
> 时间：2012-04-29T20:04:23.550
> 
> 标签：nunit, webdriver, cruisecontrol.net

伙计们！

我是 cc.net 工具的新手。我遇到了问题。我为 chrome + nunit (2.6) + cc.net (1.6.7981.1) 使用链 c#+webdriver。我想在远程机器上运行我的测试任务（没有 cc.net 服务器机器）。我已经调查过这个问题，但没有找到关于分布式启动 webdriver 测试的明确答案。当前的cc.net可以吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-14T15:24:17.123

我通过以下方式解决了问题：我在远程机器上共享了一个文件夹，并在 cc.net 配置中包含了一些任务。

1.  将代码复制到远程机器的任务 (xcopy)
2.  启动 psexec 的任务，在远程机器上启动 bat 文件

    bat 文件包含 2 个命令：

    *   运行 msbuild
    *   运行 nunit 控制台

测试工作后 cc.net 捕获测试结果文件并发送邮件。

# node.js - 使用 Jade 模板本地设置输入值

> ID：10375521
> 
> 赞同：1
> 
> 时间：2012-04-29T20:04:24.067
> 
> 标签：node.js, express, pug

如果存在，我想将我的用户配置文件中的输入值设置为其 db 值。我尝试为此使用jade中的参数传递，但出现以下错误：

```
referenceError: /Users/Feras/Sites/wowito/views/profile.jade:13
    11|         fieldset(data-role='controlgroup') 
    12|          label.label(for='email')  EMail
  > 13|          input.input(id='email',type='text',value=email,name='email') 
    14|          label.label(for='firstName')  First Name
    15|          input.input(id='firstName',type='text',value='',name='firstName') 
    16|          label.label(for='lastName')  Last Name

email is not defined 
```

但是当我渲染这个模板时，我会以本地人的身份发送电子邮件

```
res.redirect('/profile',{locals :{email:"profile.email"}}); 
```

我还尝试将输入值设置为 !{email} 和 #{email} 但没有任何效果。有什么帮助吗？

谢谢， 费拉斯

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T20:07:09.633

资源重定向？res.render 你的意思是？你也不需要本地人：{}，只需 res.render('profile', { email: 'foo' })

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-02-21T00:40:46.287

我发现我必须将变量用单引号括起来，否则会出现意外的令牌错误：

```
input.input(value='#{email}') 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2014-09-17T15:48:44.423

您需要使用`#{ }`来访问变量

```
input.input(id='email',type='text',value=#{email},name='email') 
```

# c - 如何为新线程中的每个请求处理组织队列？

> ID：10375530
> 
> 赞同：-1
> 
> 时间：2012-04-29T20:05:42.580
> 
> 标签：c, multithreading, http, sockets

我需要帮助来组织新线程中传入连接的每个请求处理（代码在本主题的底部）。

我根本不知道如何手动组织（不使用 boost/threadpool）队列来处理每个请求？我应该如何解决不使用 boost 等的问题？

原因，我想手动做，我不明白下一步怎么做：

*   监听每个新连接
*   如果我有新连接，则在新线程中发送处理
*   当线程结束处理过程时，关闭该线程

我试图用*while(true); 来做这样的事情；*但不知道如何组织好请求队列来处理每个 HTTP 请求。

我的代码是：

```
#include <iostream>
#include <Windows.h>

#pragma comment(lib, "Ws2_32.lib")

typedef struct Header
{
friend struct Net;

private:
    WORD wsa_version;
    WSAData wsa_data;

    SOCKET sock;
    SOCKADDR_IN service;

    char *ip;
    unsigned short port;

public:
    Header(void)
    {
        wsa_version = 0x202;

        ip = "0x7f.0.0.1";
        port = 0x51;

        service.sin_family = AF_INET;
        service.sin_addr.s_addr = inet_addr(ip);
        service.sin_port = htons(port);
    }

} Header;

typedef struct Net
{
private:
    int result;

    HANDLE thrd;
    DWORD exit_code;

    void WSAInit(WSAData *data, WORD *wsa_version)
    {
        result = WSAStartup(*wsa_version, &(*data));

        if(result != NO_ERROR)
        {
            std::cout << "WSAStartup() failed with the error: " << result << std::endl;
        }
        else
        {
            std::cout << (*data).szDescription << " " << (*data).szSystemStatus << std::endl;
        }
    }

    void SocketInit(SOCKET *my_socket)
    {
        (*my_socket) = socket(AF_INET, SOCK_STREAM, IPPROTO_TCP);

        if((*my_socket) == INVALID_SOCKET)
        {
            std::cout << "Socket initialization failed with the error: " << WSAGetLastError() << std::endl;
            WSACleanup();
        }
        else
        {
            std::cout << "Socket initialization successful!" << std::endl;
        }
    }

    void SocketBind(SOCKET *my_socket, SOCKADDR_IN *service)
    {
        result = bind((*my_socket), (SOCKADDR*)&(*service), sizeof(*service));

        if(result == SOCKET_ERROR)
        {
            std::cout << "Socket binding failed with the error: " << WSAGetLastError() << std::endl;
            closesocket((*my_socket));
            WSACleanup();
        }
        else
        {
            std::cout << "Socket binding successful!" << std::endl;
        }

        result = listen(*my_socket, SOMAXCONN);

        if(result == SOCKET_ERROR)
        {
            std::cout << "Socket listening failed with the error: " << WSAGetLastError() << std::endl;
        }
        else
        {
            std::cout << "Listening to the socket..." << std::endl;
        }
    }

    void SocketAccept(SOCKET *my_socket)
    {
        SOCKET sock_accept = accept((*my_socket), 0, 0);

        if(sock_accept == INVALID_SOCKET)
        {
            std::cout << "Accept failed with the error: " << WSAGetLastError() << std::endl;
            closesocket(*my_socket);
            WSACleanup();
        }
        else
        {
            std::cout << "Client socket connected!" << std::endl;

            thrd = CreateThread(NULL, 0, &Net::Threading, &sock_accept, 0, NULL);
        }
    }

    static void HandleRequest(char response[], int length)
    {
        std::cout << std::endl;

        for(int i = 0; i < length; i++)
        {
            std::cout << response[i];
        }

        std::cout << std::endl;
    }

    static DWORD WINAPI Threading(LPVOID lpParam)
    {
        SOCKET *my_socket = (SOCKET*)lpParam;

        char data[0x400];
        int result = recv((*my_socket), data, sizeof(data), 0);
        HandleRequest(data, result);
        char *response = "HTTP/1.1 200 OK\r\nServer: Amegas.sys-IS/1.0\r\nContent-type: text/html\r\nSet-Cookie: ASD643DUQE7423HFDG; path=/\r\nCache-control: private\r\n\r\n<h1>Hello World!</h1>\r\n\r\n";
        result = send((*my_socket), response, (int)strlen(response), 0);

        if(result == SOCKET_ERROR)
        {
            std::cout << "Sending data via socket failed with the error: " << WSAGetLastError() << std::endl;
            closesocket((*my_socket));
            WSACleanup();
        }
        else
        {
            result = shutdown((*my_socket), 2);
        }

        return 0;
    }

public:
    Net(void)
    {
        Header *obj_h = new Header();

        WSAInit(&obj_h->wsa_data, &obj_h->wsa_version);

        SocketInit(&obj_h->sock);
        SocketBind(&obj_h->sock, &obj_h->service);

        SocketAccept(&obj_h->sock);

        delete obj_h;
    }
} Net;

int main(void)
{
    Net *obj_net = new Net();

    delete obj_net;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:09:41.270

您的操作系统将处理 accept() 排队 - 不要太担心它。简单的同步服务器倾向于这样运行：

```
socket listeningSocket:=socket.create;
listeningSocket.bind('0.0.0.0',80);  // address/port
listeningSocket.listen;

while(true){
  socket serverClientSocket=accept(listeningSocket);
  createThread(&serverClientThread,serverClientSocket);
}

void serverClientThread(void *param)
{
  inBuffer char[256];
  socket myServerClientSocket=(socket)param;
  while(true){
     int bytesRx=recv(myServerClientSocket,&inBuffer,size(inBuffer));
     if (bytesRx>0){
        if doSomethingWith(&inBuffer,bytesRx) // not necessarily size(inBuffer) bytes!!
        {
           send(myServerClientSocket,"Reply from server\r\n");
        }

     }
     else
       return; // on error or connection closed
  }
} 
```

一个监听线程（可以是控制台应用程序中的主线程）运行 accept() 循环。单独的 serverClientThread 实例一直运行，直到它们的客户端断开连接或发生其他错误。

# haskell - Haskell：理解 ghci 中的“无实例”错误消息

> ID：10375532
> 
> 赞同：14
> 
> 时间：2012-04-29T20:06:01.460
> 
> 标签：haskell, ghc, ghci, winghci

**问题 1**

嗨，如果在 WinGHCi 中我故意执行以下错误的代码：

```
3 4 
```

然后我得到的错误信息是

```
<interactive>:1:1:
    No instance for (Num (a0 -> t0))
      arising from the literal `3'
    Possible fix: add an instance declaration for (Num (a0 -> t0))
    In the expression: 3
    In the expression: 3 4
    In an equation for `it': it = 3 4 
```

究竟是什么`No instance for (Num (a0 -> t0))`意思？

**问题2**

为什么下面的代码：

```
(+) 2 3 4
<interactive>:1:7:
    No instance for (Num (a0 -> t0))
      arising from the literal `3'
    Possible fix: add an instance declaration for (Num (a0 -> t0))
    In the second argument of `(+)', namely `3'
    In the expression: (+) 2 3 4
    In an equation for `it': it = (+) 2 3 4 
```

产生与第二段代码略有不同的错误：

```
2+3 4
<interactive>:1:3:
    No instance for (Num (a1 -> a0))
      arising from the literal `3'
    Possible fix: add an instance declaration for (Num (a1 -> a0))
    In the expression: 3
    In the second argument of `(+)', namely `3 4'
    In the expression: 2 + 3 4 
```

即在第一段代码中，我们`No instance for (Num (a0 -> t0))`在第二段代码中拥有 where `No instance for (Num (a1 -> a0))`。

* * *

[对 ehird 的回应]

（从答案评论中移出的问题）：

1）我很欣赏后两种表达方式的不同，但你是说我不应该试图理解为什么解释器选择`(Num (a0 -> t0))`前者和`(Num(a1 -> a0))`后者，除了它们不同的事实吗？

2）嗨，当你说“但没有函数的 Num 实例”时，前者是什么意思？抱歉，我不清楚实例的概念是什么。此外，出于好奇，您能否使用您的实例`Num (a -> b)`方法以某种方式告诉解释器解释`3 4`为`4 modulo 3`？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-04-30T09:13:18.670

我的意图是用更多的解释来补充 ehird 的回答。当你写下表达式

```
3 4 
```

然后 Haskell 解释器认为您正在尝试将该函数`3`应用于任何`4`内容。为了让 Haskell 解释`3`为函数，它需要调用函数

```
fromInteger :: Integer -> (a -> b) 
```

为了`a -> b`从整数中获取函数（即类型的东西）`3`。现在，在类型类`fromInteger`中定义`Num`为具有签名

```
instance Num x where
    fromInteger :: Integer -> x 
```

即，当您将类型`x`设置为类的实例时`Num`，您给出了一个实现，`fromInteger`它告诉 Haskell 如何将整数文字转换为`x`. 在您的情况下，`x`是函数类型`a -> b`。所以让我们开始吧！

* * *

首先，一些样板。要创建Haskell`x`的实例`Num`，我们还需要将其创建为`Show`and的实例`Eq`：

```
instance Show (a -> b) where show f = "<function>"
instance Eq (a -> b) where f == g = False 
```

现在假设我们要解释`3 4`为“4 模 3”。然后我们需要告诉 Haskell 如何将任何整数解释为调用`mod`. 此外，由于`mod`只接受整数类型（它有签名`mod :: Integral a => a -> a -> a`），那么我们需要限制 和 的类型也是`a`整数`b`：

```
instance (Integral a, Integral b) => Num (a -> b) where 
```

要[创建一个实例，`Num`](http://www.haskell.org/ghc/docs/latest/html/libraries/base/Prelude.html#g:7)我们需要给出 、 和 的实现`(+)`（`(-)`实际上`(*)`我们`fromIntegral`也应该定义几个其他函数，但现在不用担心）。

有一种相当自然的方式来定义加法、减法和乘法（这里的所有代码都是`Num`实例的一部分，应该相对于实例声明缩进）

```
 f + g = \x -> f x + g x
    f - g = \x -> f x - g x
    f * g = \x -> f x * g x 
```

即，当您添加两个函数`f`and时`g`，您会得到一个新函数，该函数将`f`and`g`应用于其参数，然后将它们相加。由于我们要求应用的结果`f`是`g`整数类型，因此我们知道将它们的输出相加是有意义的。

要将整数解释为函数，我们可以编写

```
 fromInteger n = \m -> fromIntegral m `mod` fromIntegral n 
```

即，当我们有一个整数时`n`，我们返回一个参数的函数`m`，当调用该参数时，确保两个参数的类型相同（通过调用`fromIntegral`它们），然后将它们用作函数的参数`mod`。

最后，更多样板来阻止 Haskell 抱怨：

```
 abs f = undefined
    signum f = undefined 
```

* * *

我们可以对此进行测试。我的代码在一个名为 numfun.hs 的文件中。我启动 Haskell 解释器并加载我的文件：

```
Prelude> :l numfun.hs
[1 of 1] Compiling Main             ( numfun.hs, interpreted )
Ok, modules loaded: Main. 
```

现在我可以定义一些函数：

```
*Main> let f = (+ 1)
*Main> let g = (* 2) 
```

我可以添加或减去它们：

```
*Main> (f + g) 3   -- (3+1) + (3*2)
10
*Main> (f - g) 3   -- (3+1) - (3*2)
-2 
```

我可以将数字称为函数：

```
*Main> 3 4         -- 4 `mod` 3
1 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-04-29T20:14:55.263

发生第一个错误是因为整数文字`4`可以是具有`Num`实例的任何类型。也就是说，`4`具有类型`(Num a) => a`，因此它可以用作 an `Integer`、 a `Double`、 a`Rational`等。由于您应用于`3`参数 ( `4`)，它知道在上下文中`3`必须是函数类型（即`a0 -> t0`对于 some `a0`and `t0`）。但是没有函数的`Num`实例，所以你`3`作为函数的使用是无效的。如果您添加了`instance Num (a -> b)`，它会起作用，但您可能不想这样做。

至于后者，两个错误信息是等价的；GHC 生成的名称没有特殊含义。这些字母通常是从您正在使用的函数类型中的类型变量派生的，并且附加了数字以保持明确。在这种情况下，第二个表达式等价于`(+) 2 (3 4)`（因为函数应用程序比任何中缀运算符绑定得更紧密），这与您的第一段代码不太一样。

# paypal - 根据帐号/分类代码发送和接收资金

> ID：10375536
> 
> 赞同：1
> 
> 时间：2012-04-29T20:06:39.120
> 
> 标签：paypal, payment-gateway, payment-processing, opayo

我正在寻找使用信用卡详细信息进行付款的支付提供商（或任何其他方法）。然后立即将钱转入可能数百个银行账户之一（这必须基于银行帐号和分类代码）。

有人知道提供者或其他方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-20T15:40:02.193

这听起来像是您想要集成两种技术，一种用于汇入资金的信用卡处理服务，然后是用于汇出资金的[ACH](http://en.wikipedia.org/wiki/Automated_Clearing_House) API。

您可以寻找两种谨慎的服务来执行此操作，例如[WePay](http://www.wepay.com)和[BancBox](http://www.bancbox.com)（分别为 cc 和 ACH），或者查看提供两种技术的集成服务，例如[Balanced](https://www.balancedpayments.com)（我与之合作）。

然后，根据您是否直接在您的网站上进行付款，您应该能够从卡映射到银行账户，并在收到后通过 ACH API 将钱存入正确的银行账户资金。

需要考虑的一件事是，信用卡纠纷有 30 天的窗口期，称为[退款](http://en.wikipedia.org/wiki/Chargeback)，如果您已经将钱寄给收款人，您可能要为此承担责任并被抓到。

# c++ - 双维数组到一维数组

> ID：10375544
> 
> 赞同：-2
> 
> 时间：2012-04-29T20:07:58.400
> 
> 标签：c++, arrays

我只是在做一个实验，将二维数组中的值放入一维数组。下面是我的代码和结果：

```
#include <iostream>
using namespace std;

int main()
{
int p[1][1];
int arrayA[4];

for(int i=0;i<2;i++){
    for(int j=0;j<2;j++)
    {
        p[i][j] = i+j;
    }
}
int *a = &(p[0][0]);
for(int k=0;k<4;k++)
{
    arrayA[k] = *a;
    cout << "*a:  " << *a << endl ;
    cout << "array[k] :" << arrayA[k] << endl;
    cout << "a:   " << a << endl;
    cout << "---------------------------" << endl;
    a++;
}
system("PAUSE");    
    } 
```

结果是： ![在此处输入图像描述](../Images/43eba66fe92005709750c5bffda8affc.png)

但我不知道为什么它错过了 p [1](https://i.stack.imgur.com/EwKlh.jpg) [0] 的值，该值应该是 1。但是相反，我得到了一个奇怪的数字，它来自哪里。因为这对我来说很奇怪，我可以将二维数组中的最后一个数字放到一维数组中，而不是之前的数字。

所以我希望有人能告诉我代码或我的思维方式发生了什么。谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:11:08.180

这导致数组越界`p`：

```
int p[1][1];
int arrayA[4];

for(int i=0;i<2;i++){
    for(int j=0;j<2;j++)
    {
        p[i][j] = i+j;
    }
} 
```

数组上的索引从`0`到`N - 1`，其中`N`是数组的大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:11:37.150

问题是你写的：

```
int p[1][1]; 
```

请记住，在 C 和 C++ 中，维度元素上的数字是您所指的向量或矩阵所具有的真实数字。但是，它们的索引从 0 到 n-1（其中 n 是您写的数字）。所以你的 p 声明应该是：

```
int p[2][2]; 
```

反而。希望这可以帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T20:12:08.357

你写了`int p[1][1]`，但我认为你的意思是`int p[2][2]`。

# algorithm - 排序列表以简化二叉树的构建

> ID：10375548
> 
> 赞同：1
> 
> 时间：2012-04-29T20:08:42.847
> 
> 标签：algorithm, sorting, data-structures, language-agnostic, binary-tree

我有一组项目应该用于平衡二叉树。每一项的形式为`(data,parent)`，`data`是有用的信息，`parent`是二叉树中父节点的索引。

树中的节点从左到右逐行编号，如下所示：

```
 1
       ___/ \___
      /         \
     2           3
   _/\_        _/\_
  4    5      6    7 
```

这些元素存储在一个链表中。我应该如何订购此列表以便我更容易构建树？每个父节点将被恰好两个子节点引用（按索引）；如果我按父索引对它们进行排序，则排序必须稳定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:15:54.073

我想我不明白你到底想达到什么目的。您必须编写在树中插入项目的函数。例如，红黑树的插入复杂度相同，O(log n)，无论输入数据如何排序。是否有您必须使用的特定实现或插入必须达到的特定速度目标？

PS：对我来说听起来像是家庭作业:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:08:13.713

您可以根据字段以升序对列表进行任何[稳定排序](http://en.wikipedia.org/wiki/Sorting_algorithm#Stability)`parent`。

结果将是这样的列表：

```
[(d_1,nil), (d_2,1), (d_3,1) , (d_4,2), (d_5,2), ...(d_i,x), (d_i+1,x) ]
     ^ 
   the root has no parent... 
```

请注意，在此列表中，由于我们使用了稳定排序 - 对于`(d_i,x), (d_i+1,x)`排序列表中的每两对，`d_i`左叶！

[现在，您可以在广度优先遍历](http://en.wikipedia.org/wiki/Tree_traversal#Breadth-first_traversal)中填充树，

既然是家庭作业-我仍然希望您确保自己了解所有内容。所以我不想“喂答案”。如果您有任何*具体*问题，请发表评论 - 我将尝试编辑和解释相关部分并提供更多详细信息。

**Bonus**：这种组织的结果是实现**[二叉堆](http://en.wikipedia.org/wiki/Binary_heap)**结构的非常常见的方式，它是一棵完整的二叉树，但是为了性能，我们通常将它存储为一个数组，这与这种方式生成的输出非常相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T21:18:26.143

听起来你想要一棵二叉树，它允许你使用数组从叶节点到它的祖先。

通常，在将列表放入二叉树之前对其进行排序会导致二叉树不平衡，除非您使用 treap 或其他 O(logn) 数据结构。

在数组中存储（完整）二叉树的常用方法是使节点 i 有两个子节点 2i 和 2i+1。

给定这种组织（不是排序而是组织），您可以通过使用整数运算将数组索引除以 2 从叶节点转到父节点，这将截断分数。

如果您的二叉树并不总是完整的，您可能会更好地忘记使用数组，而是使用带有指针/引用的更传统的树结构。

# ipad - 哪些图形框架可用于 Retina 显示屏（带有稳定版本），尤其是用于 The New iPad？

> ID：10375550
> 
> 赞同：0
> 
> 时间：2012-04-29T20:09:01.927
> 
> 标签：ipad, opengl-es, cocos2d-iphone, core-graphics, retina-display

有一阵子我认为 Apple 的框架 Cocos2D、OpenGL ES 都可以在新 iPad 的 Retina 显示屏上正常工作，直到我看到这篇文章： http: [//www.cocos2d-iphone.org/archives/1845](http://www.cocos2d-iphone.org/archives/1845)

所以现在看来​​，任何必须使用 Cocos2D 才能在当前 iOS 设备的 App Store 上发布版本的编码都必须使用 Beta 版本？由于需要使用不稳定版本的框架，这是否会给我们自己的 iOS 项目带来风险？那么也许只有 Apple 的框架和 OpenGL ES 有可以在 The New iPad 上运行的稳定版本的框架。

但希望当 Cocos2D 与新 iPad 一起稳定时，几年内它不需要升级到更高的分辨率，因为 Retina 已经处于相当高的分辨率。

# function - Mathematica：使用 Solve、Reduce 和 FindRoot 查找极值位置。（衍生物）

> ID：10375552
> 
> 赞同：0
> 
> 时间：2012-04-29T20:09:14.787
> 
> 标签：function, wolfram-mathematica, derivative

我想确定以下两个函数的局部最大值和最小值

1.  `xE[t_] := 10 (t - Sin[t]) - Sqrt[40^2 - (10 (1 - Cos[t]))^2]`
2.  `vE = xE'[t]`

所以我试图解决第一个导数`xE[t]`：

```
extremaXE = Solve[vE[t] == 0, t] (* vE is the 1st derivative of xE *) 
```

但我收到了这个错误：

```
Solve::ifun: Inverse functions are being used by Solve, so some solutions may not 
be found; use Reduce for complete solution information. 
```

然后我尝试使用reduce，我得到了这个错误：

```
Reduce::nsmet: This system cannot be solved with the methods available to Reduce 
```

那么我应该怎么做才能通过导数确定局部最小值和最大值呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:50:55.837

I don't get an error with `Reduce`. For example, to find the local extrema of `xE` I tried

```
Reduce[xE'[t] == 0, t] 
```

which returned

```
C[1] \[Element] Integers && (t == 2 \[Pi] C[1] || 
   t == 2 I ArcTanh[2/Sqrt[3]] + 2 \[Pi] C[1]) 
```

Note that this gives you both real and complex solutions. If you only want the real ones you can try

```
Reduce[xE'[t] == 0, t, Reals] 
```

which gives

```
C[1] \[Element] Integers && t == 2 \[Pi] C[1] 
```

**Edit**

To substitute the solutions back into the original expression you could convert it to a list of rules using for example `ToRules`. Since `ToRules` can't handle expressions like `C[1] \[Element] Integers` we simplify the solution first

```
sol = Reduce[xE'[t] == 0, t];
sol = Simplify[sol, C[_] \[Element] Integers]

(* ==> t == 2 \[Pi] C[1] || t == 2 I ArcTanh[2/Sqrt[3]] + 2 \[Pi] C[1] *) 
```

`ToRules` will then convert this expression to a list of rules which you can substitute back into your expression using `ReplaceAll`

```
xE[t] /. {ToRules[sol]}

(* ==> {-Sqrt[1600 - 100 (1 - Cos[2 \[Pi] C[1]])^2] + 
          10 (2 \[Pi] C[1] - Sin[2 \[Pi] C[1]]), 
        -Sqrt[1600 - 100 (1 - Cosh[2 ArcTanh[2/Sqrt[3]] - 2 I \[Pi] C[1]])^2] + 
          10 (2 I ArcTanh[2/Sqrt[3]] + 2 \[Pi] C[1] - 
          I Sinh[2 ArcTanh[2/Sqrt[3]] - 2 I \[Pi] C[1]])} *) 
```

Note that the resulting expression still contains the constant `C[1]`. To find the extrema for a particular value of `C[1]` you can use another replacement rule, e.g.

```
({t, xE[t]} /. {ToRules[sol]}) /. {C[1] -> -4} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:14:49.333

Use NLOpt.

It has algorithms to find local/global extrema with/without derivatives. It is callable from C, C++, Fortran, Matlab or GNU Octave, Python, GNU Guile, and GNU R.

[http://ab-initio.mit.edu/wiki/index.php/NLopt](http://ab-initio.mit.edu/wiki/index.php/NLopt)

Does this help?

# javascript - 将服务器 HTML 应用程序更改为独立的桌面应用程序

> ID：10375564
> 
> 赞同：0
> 
> 时间：2012-04-29T20:11:09.040
> 
> 标签：javascript, html, ajax, air

我编写了一个简单的网络服务器，它将公共链接指向包含图像 url 和名称的 google 文档，并输出一个打印友好的 HTML 照片目录及其内容。

我为一个志愿者组织创建了它，我将不再能够参与其中。我需要将生成该目录的能力传递给我的继任者。

我不相信我可以相信自己能够长期维护组织需要的 Web 应用程序。我希望相反，我可以将其更改为一个自包含的程序，该组织的成员可以通过电子邮件发送给需要生成目录的任何人。

我的第一个想法是制作一个可以在浏览器中打开的 .html 文件，但我无法使用 Ajax 从谷歌下载 CSV 数据，因为它是跨域的。谷歌搜索后似乎没有办法解决这个问题。

有没有简单的框架？我想我可以用 Adob​​e AIR 做到这一点，但我更喜欢简单地删除跨域安全功能的东西。

我可以花时间将 UIWebView 嵌入到 Mac 应用程序中，但由于我想主要用 HTML 编写应用程序，所以我必须创建一个桥来让 Web 视图发出跨域请求，对吧？而且它不是跨平台的。

还有其他想法吗？如何将我的应用程序打包为桌面应用程序而不是 Web 服务？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:00:47.137

您可以使用闪存绕过跨域 XHR。CrossXhr 可以通过常规 http 服务器提供的应用程序来实现。我从来没有尝试过使用静态的、文件服务的 web 应用程序。请按照此处的说明进行操作：

[http://code.google.com/p/crossxhr/wiki/CrossXhr](http://code.google.com/p/crossxhr/wiki/CrossXhr)

# php - 登录和注销系统的问题

> ID：10375566
> 
> 赞同：0
> 
> 时间：2012-04-29T20:11:14.080
> 
> 标签：php, mysql, session, login, logout

请我在登录和注销时遇到问题。

当我单击注销按钮时，它不会注销，直到我从浏览器中删除会话，但登录效果很好..

请问问题可能出在哪里。

这是我在每个文件开头的内容

```
 <?php session_start();

    if(isset($_SESSION['logged'])) {
    echo "<div id=\"username\">" ;
    echo $_SESSION['logged'] ;
    echo"</div>";
} 
```

?>

**登出**

```
 session_destroy();
   header("Location: http://127.0.0.1/            church/index.php");

 ?> 
```

感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:15:04.577

您必须在 session_destroy() 之前调用 session_start()。另一个潜在的问题是您正在尝试连接到 localhost (127.0.0.1) 这是一个实时网站还是您在本地机器上进行测试？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:15:36.850

您忘记`session_start()`在注销页面上调用：

```
<?php
    session_start();
    session_destroy();
    header("Location: http://127.0.0.1/church/index.php");
?> 
```

`session_start()`必须在您希望使用会话数据的任何页面上。

# java - java regular expression optional characters

> ID：10375568
> 
> 赞同：0
> 
> 时间：2012-04-29T20:11:14.873
> 
> 标签：java, regex

I'm having problems getting my regular expression working.

The regular expression is:

```
([0-9]m)* ([0-9]f)* 
```

A digit must come before "m" or "f" but "m" or "f" are optional. Example are:

```
1m 2f
1m
6f 
```

What have I done wrong?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-04-29T20:13:55.510

The `*` means match the previous token 0 or more times, which doesn't look like what you want.

These should help you to build the regular expression you need:

*   `?` to mean 0 or 1 matches.
*   `|` for alternation.
*   `(?:...)` for a non-capturing group.
*   `^` and `$` to anchor at the start and end of the string.

Knowing that, I imagine that you can probably find a solution by yourself, but for the sake of completion, I'll show one possible solution.

* * *

Your question isn't very clear so I'm just going to assume that you want the following to match:

```
1m 2f
1m
6f 
0m 
```

and that you want the following to fail to match:

```
1
m    
11m
1m 1m
2f 3m
1m  2f
"1m 2f" 
```

If those assumptions are incorrect, then please make your question more clear.

With those assumptions, try this:

```
^[0-9]m(?: [0-9]f)?$|^[0-9]f$ 
```

If you also want `2f 3m` to match then use this:

```
^[0-9]m(?: [0-9]f)?$|^[0-9]f(?: [0-9]m)?$ 
```

# javascript - 使用 HTML5 File API 在浏览器中创建音频列表

> ID：10375582
> 
> 赞同：2
> 
> 时间：2012-04-29T20:13:30.987
> 
> 标签：javascript, html, html5-audio, fileapi

我不想用 HTML5 创建音乐播放器。我已经从桌面创建了拖放文件，这非常简单。现在它正在用歌曲名称创建一个无序列表，但我不知道如何捕捉歌曲，所以当用户按下它时，它会播放。

这是我到目前为止所拥有的：

```
var dropbox = document.getElementById("dropbox")
dropbox.addEventListener("drop", function (evt) {
            evt.preventDefault();
            evt.stopPropagation();

            var files = evt.dataTransfer.files;
            for (var i = 0, f; f = files[i]; i++) {
                var li = document.createElement('li');
                li.innerHTML = "<li>" + escape(f.name) + "</li>";
                document.getElementById('songs').appendChild(li);
            }

            console.log("Dropped File");
        }, false); 
```

效果很好，只是需要一些帮助才能进行下一步。我在想文件应该在播放之前上传到服务器，但是如果有一个解决方案，它不占用空间，而只是在浏览器窗口打开时会很棒！

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:43:26.153

干得好。我只在最新的 chrome 中对其进行了测试，但它应该可以在 IE9、FF3.6+ 和 safari 中使用。

这使用 HTML5 文件阅读器和音频播放器，并且全部在这 1 个 HTML 文件中完成

基础知识来自[https://developer.mozilla.org/en/DOM/FileReader](https://developer.mozilla.org/en/DOM/FileReader)和[http://www.w3.org/2010/05/video/mediaevents.html](http://www.w3.org/2010/05/video/mediaevents.html)

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head>
        <title>Audio Player Test</title>
        <script type="text/javascript">
            function SelectAudio(files) {
                var file = files[0];
                if (file.type.match(/audio.*/)) {
                    var reader = new FileReader();
                    reader.onload = function(d) {
                        var e = document.createElement("audio");
                        e.src = d.target.result;
                        e.setAttribute("type", file.type);
                        e.setAttribute("controls", "controls");
                        e.setAttribute("autoplay", "true");
                        document.getElementById("container").appendChild(e);
                    };
                    reader.readAsDataURL(file);
                }
            }
        </script>
    </head>
    <body>
        <input type="file" onchange="SelectAudio(this.files)" />
        <div id="container"></div>
    </body>
</html> 
```

编辑：保存为 HTML 文件时，必须通过本地或远程 Web 服务器访问。当您直接打开 html 文件时，HTML5 文件阅读器似乎无法工作。

[我在http://jsfiddle.net/KY8Kg/](http://jsfiddle.net/KY8Kg/)上发布了一份副本

# c++ - Swap contents of vector of structs c++

> ID：10375588
> 
> 赞同：0
> 
> 时间：2012-04-29T20:14:18.477
> 
> 标签：c++, vector, struct

I have a vector of structs consisting of two strings, a long integer, and an array of integers. Upon creation of said structs, I initialize each element in the array to 0\. My question is, How would I go about assigning different values to each of the elements in the array? I tried to use swap and assign, but they are more for having two 1 dimensional vectors, not 2 dimensional ones, and I only want to change the values in a certain struct at a given time. Please help? Thanks!

If you'd like to see some code, this is what I have so far:

```
//this is my struct
typedef struct {
  string lastName;
  string firstName;
  long int gNumber;
  int grades[12];
} student;

 //this function takes data from a file, fills it into a struct, then pushes back into //vector

bool loadStudentData( vector<student> &studentRecords, ifstream *inFile, student    tempStudent) {
  int idx = 0;
  stringstream fileLine; 
  string line;
  bool isLoaded = true;    
  char letterInGNumber; 
  while (getline(*inFile, line)) {
    fileLine << line; 
    getline(fileLine, tempStudent.lastName, ',');
    getline(fileLine, tempStudent.firstName, ',');
    fileLine >> letterInGNumber;
    fileLine >> tempStudent.gNumber; 
    for (idx = 0; idx <= 11; idx++) {
        tempStudent.grades[idx] = 0;
    }
    studentRecords.push_back(tempStudent);
    fileLine.flush();
  }
  return isLoaded; 
}

 //this function is trying to take things from a second file, and if the Gnumber(the //long int) is found in the vector then assign values to the grade array
void loadClassData(vector<student> &studentRecords, ifstream *inFile) {
  int idx = 0, idxTwo = 0, idxThree = 0;
  long int tempGNumber = 0;
  stringstream fileLine;
  vector<long int> gNumbers; 
  bool numberFound = false;
  char letterInGNumber;
  string line;
  while (getline(*inFile, line)) {
    idx++;
    numberFound = false;
    fileLine << line;
    fileLine >> letterInGNumber;
    fileLine >> tempGNumber; 
    for (idxTwo = 0; idxTwo <= studentRecords.size(); idxTwo++) {
        if (studentRecords[idxTwo].gNumber == tempGNumber) {
            numberFound = true;
            break;
        }
    }
    if (numberFound) {
        for (idxThree = 0; idxThree <= 11; idxThree++) {
            //fileLine >> studentRecords[idx].grades[idxThree];
            /**********here is the problem, I don't know how to assign the grade values******/
        }
    }
    else {
        cout << "G Number could not be found!" << endl << endl;
    }
    fileLine.flush();
  }
  return;
} 
```

anyone? please?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:19:22.887

相反，您应该做的是定义一个运算符 >> 重载，然后将其读入。例如，

```
//assume the following structure when reading in the data from file
// firstName lastName N n1 n2 n3 ... nN
ostream& operator>>(ostream& stream, student& s){
      stream >> s.firstName;
      stream >> s.lastName;
      stream >> s.gNumber
      for(int i = 0; i < s.gNumber; ++i){
         stream >> s.grades[i];
      }
}

//... in main
student temp;
std::vector<student> studentList;
while(inFile >> temp) studentList.push_back(temp); 
```

# gcc - gcc print warnings without compile

> ID：10375590
> 
> 赞同：2
> 
> 时间：2012-04-29T20:14:22.127
> 
> 标签：gcc, lint

I'd like gcc to do source code analysis for errors, but do not write any output files (similarly to what splint does). I've found this solution currently:

```
gcc -Wall -c source.c > NUL 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-04-29T21:48:27.660

有一个`-fsyntax-only`选项，这正是您想要的：

> “检查代码是否有语法错误，但除此之外不要做任何事情。”

`/dev/null`与使用或`NUL`作为输出相比，此选项在操作系统之间更具可移植性。

与 LLVM 一起使用的 clang C/C++/ObjC 前端也支持此选项：`clang-3.1 -fsyntax-only`.

更新：但是您应该知道，某些警告不是由语法解析器生成的，而是由内部编译器阶段生成的。`-fsyntax-only`例如，语法解析器无法检测到完整的控制流（只有优化器会），并且在选项中不会生成一些警告，如“控制到达非无效函数的结尾” 。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T20:52:07.080

Well, you could redirect the output to `/dev/null`

```
gcc -o /dev/null ... 
```

# ios - iphone notes.app like underline

> ID：10375592
> 
> 赞同：2
> 
> 时间：2012-04-29T20:14:41.017
> 
> 标签：ios, xcode, uitextview, underline

i have searched lot for the similar question and i decided to ask this through here, if already asked i could not find it and sorry.

i found that : [UITextView like iPhone Notes application](https://stackoverflow.com/questions/2615841/uitextview-like-iphone-notes-application) which redirects to here : [http://www.cocoanetics.com/2010/03/stuff-you-learn-from-reverse-engineering-notes-app/](http://www.cocoanetics.com/2010/03/stuff-you-learn-from-reverse-engineering-notes-app/) but in the reverse-engineering there is not the full code example !?

i am creating an application for iphone which stores and lets people enter their text like notes.app in iphone. i need to underline the text as i know and i need to do it in uitextview which is a subclass of uiscrollview ..

if anyone got any suggestion to make that i'll be happy..

thanks..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:28:30.583

当我需要使用 UILabel 执行此操作时，我创建了 UIView 的子类并自己实现了自定义绘图。它非常详细，但并不那么复杂。我最终传递了处理粗体（<b> 和</b>）和换行符（<br>）格式的类似HTML 的语法。我认为您可以使用 (< u > 和 </ u >) 对下划线做同样的事情。

基本上，我的技术是使用类似 HTML 的标记（首先在“br”标签上，然后在“b”标签上）拆分字符串，然后将每个子字符串拆分为“单词”，然后处理测量和绘制每个单词在其自己的。如果一个单词不适合当前行，我会换行到下一行。它并不完美，并且不能处理很多场景（例如，新行标签不能放在粗体标签内），但它符合我的意图。

不幸的是，我不知道为什么某些（大多数/全部？）iOS 基本文本显示控件没有更好地支持文本格式。

* * *

***编辑/更新：***
我将继续添加我编写的 UIView 子类（UILabel 的替换）。使用风险自负！:-)

`MMFormattedTextView.h`

```
#import <UIKit/UIKit.h><br>
@interface MMFormattedTextView : UIView {
    int InsetLeft;
    int InsetTop;
    NSString *LabelText;
    UIFont *LabelFont;
}
@property (assign, nonatomic) int InsetLeft;
@property (assign, nonatomic) int InsetTop;
@property (strong, nonatomic) NSString *LabelText;
@property (strong, nonatomic) UIFont *LabelFont;
- (NSInteger)numberOfLinesForRect:(CGRect)rect;
@end 
```

`MMFormattedTextView.m`

```
#import "MMFormattedTextView.h"
@implementation MMFormattedTextView
@synthesize InsetLeft;
@synthesize InsetTop;
@synthesize LabelFont;
@synthesize LabelText;
// LIMITATION: Each bolded section must reside IN BETWEEN <br> tags; it MAY NOT span <br> tags!!!!
- (void)drawRect:(CGRect)rect {
    CGContextRef ctx = UIGraphicsGetCurrentContext();
    CGContextClearRect(ctx, rect);
    // Sets up the first position, which is 1 line "off the top", 
    // adjusted so that the text will be centered when it's all drawn
    CGFloat howManyLinesWouldFit = rect.size.height / [[self LabelFont] lineHeight];
    NSInteger howManyLinesDoWeHave = [self numberOfLinesForRect:rect];
    CGFloat lineOffset = (howManyLinesWouldFit - howManyLinesDoWeHave) / 2.0;
    CGPoint topLeft = CGPointMake([self InsetLeft], [self InsetTop] - [[self LabelFont] lineHeight] + (lineOffset * [[self LabelFont] lineHeight]));
    // Split the text into hard-split lines (actual <br> tags in the text)
    NSArray *lines = [[self LabelText] componentsSeparatedByString:@"<br>"];
    // Iterate through each hard-coded line
    for (NSString *line in lines) {
        // Iterate to the next line
        topLeft = CGPointMake([self InsetLeft], topLeft.y + [[self LabelFont] lineHeight]);
        NSArray *pieces = [line componentsSeparatedByString:@"<b>"];
        BOOL bold = YES;
        for (NSString *piece in pieces) {
            bold = !bold;
            UIFont *fontToUse;
            if (bold) {
                fontToUse = [UIFont boldSystemFontOfSize:[[self LabelFont] pointSize]];
            } else {
                fontToUse = [UIFont systemFontOfSize:[[self LabelFont] pointSize]];
            }
            NSArray *words = [piece componentsSeparatedByString:@" "];
            for (NSString *word in words) {
                if ([word isEqualToString:@""]) continue;
                NSString *wordWithSpace = [NSString stringWithFormat:@"%@ ", word];
                CGSize wordSize = [wordWithSpace sizeWithFont:fontToUse];
                if ((topLeft.x + wordSize.width) > (rect.size.width - [self InsetLeft])) {
                    // This runs off this line, so go to the next line
                    topLeft = CGPointMake([self InsetLeft], topLeft.y + [[self LabelFont] lineHeight]);
                }
                [wordWithSpace drawAtPoint:topLeft withFont:fontToUse];
                topLeft = CGPointMake(topLeft.x + wordSize.width, topLeft.y);
            }
        }
    }
}
- (NSInteger)numberOfLinesForRect:(CGRect)rect {
    int retVal = 0;
    int left = [self InsetLeft];
    NSArray *lines = [[self LabelText] componentsSeparatedByString:@"<br>"];
    // Iterate through each hard-coded line
    for (NSString *line in lines) {
        // Iterate to the next line
        retVal = retVal + 1;
        left = [self InsetLeft];
        NSArray *pieces = [line componentsSeparatedByString:@"<b>"];
        BOOL bold = YES;
        for (NSString *piece in pieces) {
            bold = !bold;
            UIFont *fontToUse;
            if (bold) {
                fontToUse = [UIFont boldSystemFontOfSize:[[self LabelFont] pointSize]];
            } else {
                fontToUse = [UIFont systemFontOfSize:[[self LabelFont] pointSize]];
            }
            NSArray *words = [piece componentsSeparatedByString:@" "];
            for (NSString *word in words) {
                if ([word isEqualToString:@""]) continue;
                NSString *wordWithSpace = [NSString stringWithFormat:@"%@ ", word];
                CGSize wordSize = [wordWithSpace sizeWithFont:fontToUse];
                if ((left + wordSize.width) > (rect.size.width - [self InsetLeft])) {
                    // This runs off this line, so go to the next line
                    retVal = retVal + 1;
                    left = [self InsetLeft];
                }
                left = left + wordSize.width;
            }
        }
    }
    return retVal;
}
@end 
```

# html - HTML5 mobile touch determining size of touch

> ID：10375597
> 
> 赞同：0
> 
> 时间：2012-04-29T20:15:11.687
> 
> 标签：html, mobile, touch

I'm looking for some sample HTML5 code on how to determine the shape of a finger that touched a screen.... or some way to measure the size of the finger tap.

Interested in HTML5/javascript/jquery browser-based solution.

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-09T15:05:32.360

很抱歉告诉你，但这在目前是不可能的。主流浏览器都不支持触摸对象的半径属性。您只能从本机移动应用程序中获取这些内容。

# objective-c - wsdl2objc：找不到“libxml/tree.h”文件

> ID：10375598
> 
> 赞同：11
> 
> 时间：2012-04-29T20:15:17.397
> 
> 标签：objective-c, ios, wsdl2objc

在我检查了所有[这些](http://code.google.com/p/wsdl2objc/wiki/UsageInstructions)说明（原始 wsdl2objc 文档）之后，我收到了这个错误：

> 找不到“libxml/tree.h”文件

我检查了几个论坛条目，因为我并不孤单遇到这个问题。可悲的是，对其他人有用的东西对我没有用。我使用 XCode 4.2。

请帮忙！你的

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-05-01T08:51:41.767

这个条目[libxml/tree.h 没有这样的文件或目录](https://stackoverflow.com/questions/1428847/libxml-tree-h-no-such-file-or-directory)，视频[http://sudzc.com/Tutorial/ObjC.mov](http://sudzc.com/Tutorial/ObjC.mov)帮助了我。

解决方案是我不必在“链接框架和库”部分添加 libxml2.dylib，所以我只是删除了它，因为我之前添加了它。

然后在项目->“构建设置”点击我在“其他链接器标志”条目中添加值“-lxml2”，在“标题搜索路径”中添加值“/usr/include/libxml2”。

就是这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-12-04T12:03:12.627

对我来说，在标题搜索路径中添加的不是“/usr/include/libxml2”，而是“ **${SDKROOT}/usr/include/libxml2 ”之后，它就起作用了。**我还在“其他链接器标志”中添加了“-lxml2”。

我不需要设置 Project 的设置，只需设置 Target 的。XCode 6.1

# java - Client side state saving, any way I could see state data sent to client?

> ID：10375599
> 
> 赞同：1
> 
> 时间：2012-04-29T20:15:17.467
> 
> 标签：java, jsf, state-saving

In order to decide a better state saving method for my JSF app from amongst server side & client side saving, I wanting to see the saved state data when the state is saved to client.

I need to have an idea of how much data is transferred back & forth between the requests & if I reduce that to keep the advantages of client side saving(like all time responsiveness & no dead app after view expires)! Could I see this saved state in firebug plugin in firefox ? How ?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T04:03:34.397

是的，firefox 的 firebug 插件可以帮助解决这个问题。只需查看面板下部分`request`中每个`XHR`部分的视图状态转移即可。`Net`

* * *

看起来像这样：

```
<partial-response>
    <changes>
         <update id="javax.faces.ViewState">
                <AAAANU8a2wcx3lzx5coS7JkPSzZkU1Kskt6aLBjGKWGJMnIDx+8A4ndgmumSsnC0SjYa8I7I+2Bkl9lCUgemqS4JsnRJmJPp0VVNW0a8bzHwupWR8WBI7qs4uOwPwirOkipUHxYFjVEdFv1Ga80lNd004pf/sffJ6Zder/hpJWnDUIRx00ZdsaDQqQIIuCCx9CJbkmfnBEOqAWrWZCBZStkUf0x1DcjmljDoJ+pMqzPS+AcTh//O2B1XdJKOn/qkrmpUZ2v30jXD7ukGThxbGgQ+rtSX3A81RjYKDFZlrs6owSe5BYfkq99hTtpcBWLdMHKqFRTUdEljHBEjgkFtPMyOTpycnJiuzIybpVPjp2acfrdxTs7nC0eswiBgocHgpcZiuFkYi93NPIqFzc5cbEo2h8HrDrOMl138rRuD1zrb8kSddcY39zavHhZuC8EsXg+4yne4yoeaZj/omrPm6r6rufsu3n1XQPeM7BY0Tac1CXhOHFkbreswIXafQXWrhSOYOaWMqKpMBeVbffqHv/3Yz3+QJImzpGtZkOsoH5w+u2pqXWGBHVQURheofsOrv/+Fn37k18pJlC9WBzrZ2mh3qr40R/WPPfno3us++8onbNY7tApUXwijepAsIEdGVYUJEnB2KO0jXH2MdIM0YhWRg3kCHvUC5DsMKoOIpOLooqAoVK6Is5LioLUzgNi6mxDfC/AV2+PKSV1aBuQHALijwYMziwIb1uk0Zc6idvJF7fRTMC4Ax6hze0szyeJVhp7SJ4en7p2tjDnt7giG/HRl/P7Z6sTo8Exl4tTsveNnVlslL7w+2KCDPe7+l0EppqtqTWCSqrz2N5s//aP3PXJnknRUSHdNletLCigeGdaxSjo1gS1iJ9s4ETwIv68wsn2gZq7RpLAA3a0i+7mGfcCZ1c5soZjJgi2QGZzNzuYGB2uZofm51Sv4/FZGNukWm86saaiY3DCekESRKnbLDXOSIgKFhUlE78zPNmaeClkBKqdnhIXTuFrjq8CSCbd7clPUY0KrH/a+X7YwY+9+P6Xrnv0TJJ0nvUcPztrHUWsejP8zV8ls776VrXOtyECfhss4gTOarsDZ6YBKbb4vPd5NuC5uQ1ig52NZWSjBKIEwa4bDflhWzUF/2FTX4t2crg8Jo664j4Nv6jnWvA6rwiWyfeQ8QEGOgjEsE1B+XyqFLQXMqrv5oh4JBTxsvldQQdpw2K51gHdrB0vzmXtQi5E/HVgVAlAofah1che8rHitCPqXANGR+JiXBt0daUCPp+JwxMYqQJc/B9q4h7WP1EAAA==]]> 
         </update>
    </changes>
</partial-response> 
```

# ios - 为什么在 NSMutableDictionary 中存储时方法参数中传递的值变为空

> ID：10375600
> 
> 赞同：0
> 
> 时间：2012-04-29T20:15:22.843
> 
> 标签：ios

```
- (void) msg:(NSString *)msg from:(NSString *)from
{
     NSMutableDictionary *m = [[NSMutableDictionary alloc] init];
     [m setObject:msg forKey:@"msg"];
     [m setObject:from forKey:@"sender"];
     [m setObject:[NSString getCurrentTime] forKey:@"time"];

NSLog(@"MSG=>%@ : FROM=>%@ : TIME=>%@",[m objectForKey:msg], [m objectForKey:@"sender"], [m objectForKey:@"time"]);

NSLog(@"MSG=>%@",msg);

} 
```

第一个日志的回复是

> MSG=>(null) : FROM=>你的朋友！: 时间=>2012 年 4 月 30 日 12:52:02 AM

第二个日志的回复是

> 味精=>你好……你好吗

我不明白为什么进入 NSMutableDictionary 后的“msg”变为空？毕竟参数“from”也显示正常。有趣的是记录 msg 参数直接完美显示。

我正在使用启用 ARC 的项目并遇到此空问题。我不想在此方法之外声明 NSMutableDictionary，因为它会被多次调用，并且每次创建新的 NSMutableDictionary 并将其存储在 NSArray 中以供进一步使用。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:18:00.360

```
[m objectForKey:msg] 
```

是错误的，你试图用它自己作为键来取回对象。正确：

```
[m objectForKey:@"msg"] 
```

# xml - 当 XML 有 2 个包装器时无法读取内容

> ID：10375609
> 
> 赞同：3
> 
> 时间：2012-04-29T20:15:59.527
> 
> 标签：xml, sql-server-2008, xquery

当您从 XML 和节点中删除`<data>`包装器时，此代码工作正常，但是当您添加它时，如下所示，我得到 0 个结果。

```
 -- Declare XML variable
  DECLARE @data XML;

  -- Element-centered XML
  SET @data =
  N'
  <data xmlns="test.xsd">
    <subdata>
      <customer>
        <id>1</id>
        <name>Allied Industries</name>
      </customer>
      <customer>
        <id>2</id>
        <name>Trades International</name>
      </customer>
    </subdata>
  </data>';

  -- Using the query() method
  SELECT T.customer.query('id').value('.', 'INT') AS customer_id,
         T.customer.query('name').value('.', 'VARCHAR(20)') AS customer_name
  FROM @data.nodes('data/subdata/customer') AS T(customer); 
```

但是当我这样做时效果很好：

```
 -- Element-centered XML
  SET @data =
  N'
    <subdata>
      <customer>
        <id>1</id>
        <name>Allied Industries</name>
      </customer>
      <customer>
        <id>2</id>
        <name>Trades International</name>
      </customer>
    </subdata>
 ';

  -- Using the query() method
  SELECT T.customer.query('id').value('.', 'INT') AS customer_id,
         T.customer.query('name').value('.', 'VARCHAR(20)') AS customer_name
  FROM @data.nodes('subdata/customer') AS T(customer); 
```

`<data>`当父包装器存在时，有谁知道我如何或为什么在第一个示例中没有得到结果？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T20:24:38.843

该问题与围绕您的 XML 数据的“包装器”的数量无关。问题是：您的第一个示例在节点上定义了一个**XML 命名空间**( `xmlns="test.xsd"`) `<data>`，但您的查询不尊重这一点。

您需要将查询更改为如下所示：

```
-- Using the query() method
;WITH XMLNAMESPACES (DEFAULT 'test.xsd')
SELECT 
    T.customer.query('id').value('.', 'INT') AS customer_id,
    T.customer.query('name').value('.', 'VARCHAR(20)') AS customer_name
FROM 
    @data.nodes('data/subdata/customer') AS T(customer); 
```

然后你就会得到结果......

如果没有此 XML 命名空间声明，您的查询将正常工作 - 两个或更多包装器根本无关紧要。

# colorbox - 向 jQuery 颜色框应用程序添加描述行

> ID：10375618
> 
> 赞同：0
> 
> 时间：2012-04-29T20:16:55.087
> 
> 标签：colorbox

我无法在 colorbox 1.3.9 中为图像添加描述行。我正在使用以下代码：

```
(function($) {      
 $(document).ready(function(){   
$ (".colorbox").colorbox({  opacity:"0.8",width:"80%",height:"90%",current: "image : {current} / {total}" 
});
});

 })(jQuery); 
```

有没有办法将描述行添加到颜色框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-20T14:52:13.347

您可以在`title`属性中插入 HTML：

```
<a class="cboxElement" rel="group1" href="path/to/image" title="<h1>Title</h1><p>Description</p>">Grouped Photo 1</a> 
```

您应该能够使用 CSS 设置输出样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T04:34:23.907

这很容易做到，并且在 ColorBox 文档中有详细说明。

使用 TITLE 属性存储照片或其他数字资产的简短描述，如下所示：

```
<a class="group1 cboxElement" href="../content/ohoopee1.jpg" title="Me and my grandfather on the Ohoopee.">Grouped Photo 1</a> 
```

每个资产可能有自己的描述。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-01-05T20:15:59.987

我已更改从链接的 alt 属性读取描述。

例子

```
<a href="test.jpg" alt="test description in alt tag" title="test title" class="groupGallery"> 
```

Java脚本

我在 js 文件中添加了行

```
/*!
Colorbox v1.5.9 - 2014-04-25
jQuery lightbox and modal window plugin
(c) 2014 Jack Moore - http://www.jacklmoore.com/colorbox
license: http://www.opensource.org/licenses/mit-license.php
*/
(function ($, document, window) {
.
.
.
    rel: function () {
        return this.rel;
    },
    href: function () {
        // using this.href would give the absolute url, when the href may have been inteded as a selector (e.g. '#container')
        return $(this).attr('href');
    },
    title: function () {
        return this.title;
    },
    description: function () {  //code to add description at bottom
        return $(this).attr('alt');;
    }
},

// Abstracting the HTML and event identifiers for easy rebranding
colorbox = 'colorbox',
prefix = 'cbox',
boxElement = prefix + 'Element',

// Events
event_open = prefix + '_open',
event_load = prefix + '_load',
event_complete = prefix + '_complete',
event_cleanup = prefix + '_cleanup',
event_closed = prefix + '_closed',
event_purge = prefix + '_purge',

// Cached jQuery Object Variables
$overlay,
$box,
$wrap,
$content,
$topBorder,
$leftBorder,
$rightBorder,
$bottomBorder,
$related,
$window,
$loaded,
$loadingBay,
$loadingOverlay,
$title,
$current,
$description, //code to add description at bottom
$slideshow,
$next,
$prev,
$close,
$groupControls,
$events = $('<a/>'), // $({}) would be prefered, but there is an issue with jQuery 1.4.2

.
.
.

function launch(element) {
    var options;

    if (!closing) {

        options = $(element).data('colorbox');

        settings = new Settings(element, options);

        getRelated(settings.get('rel'));

        if (!open) {
            open = active = true; // Prevents the page-change action from queuing up if the visitor holds down the left or right keys.

            setClass(settings.get('className'));

            // Show colorbox so the sizes can be calculated in older versions of jQuery
            $box.css({ visibility: 'hidden', display: 'block', opacity: '' });

            $loaded = $tag(div, 'LoadedContent', 'width:0; height:0; overflow:hidden; visibility:hidden');
            $content.css({ width: '', height: '' }).append($loaded);

            // Cache values needed for size calculations
            interfaceHeight = $topBorder.height() + $bottomBorder.height() + $content.outerHeight(true) - $content.height() + 25; //code to add description at bottom and increase height of light box
            interfaceWidth = $leftBorder.width() + $rightBorder.width() + $content.outerWidth(true) - $content.width() ;
            loadedHeight = $loaded.outerHeight(true);
            loadedWidth = $loaded.outerWidth(true);

            // Opens inital empty Colorbox prior to content being loaded.
            var initialWidth = setSize(settings.get('initialWidth'), 'x');
            var initialHeight = setSize(settings.get('initialHeight'), 'y');
            var maxWidth = settings.get('maxWidth');
            var maxHeight = settings.get('maxHeight');

            settings.w = (maxWidth !== false ? Math.min(initialWidth, setSize(maxWidth, 'x')) : initialWidth) - loadedWidth - interfaceWidth;
            settings.h = (maxHeight !== false ? Math.min(initialHeight, setSize(maxHeight, 'y')) : initialHeight) - loadedHeight - interfaceHeight;

            $loaded.css({ width: '', height: settings.h });
            publicMethod.position();

            trigger(event_open);
            settings.get('onOpen');

            $groupControls.add($title).hide();
            $groupControls.add($description).hide();  //code to add description at bottom

            $box.focus();

            if (settings.get('trapFocus')) {
                // Confine focus to the modal
                // Uses event capturing that is not supported in IE8-
                if (document.addEventListener) {

                    document.addEventListener('focus', trapFocus, true);

                    $events.one(event_closed, function () {
                        document.removeEventListener('focus', trapFocus, true);
                    });
                }
            }

            // Return focus on closing
            if (settings.get('returnFocus')) {
                $events.one(event_closed, function () {
                    $(settings.el).focus();
                });
            }
        }

        $overlay.css({
            opacity: parseFloat(settings.get('opacity')) || '',
            cursor: settings.get('overlayClose') ? 'pointer' : '',
            visibility: 'visible'
        }).show();

        if (settings.get('closeButton')) {
            $close.html(settings.get('close')).appendTo($content);
        } else {
            $close.appendTo('<div/>'); // replace with .detach() when dropping jQuery < 1.4
        }

        load();
    }
}

// Colorbox's markup needs to be added to the DOM prior to being called
// so that the browser will go ahead and load the CSS background images.
function appendHTML() {
    if (!$box && document.body) {
        init = false;
        $window = $(window);
        $box = $tag(div).attr({
            id: colorbox,
            'class': $.support.opacity === false ? prefix + 'IE' : '', // class for optional IE8 & lower targeted CSS.
            role: 'dialog',
            tabindex: '-1'
        }).hide();
        $overlay = $tag(div, "Overlay").hide();
        $loadingOverlay = $([$tag(div, "LoadingOverlay")[0], $tag(div, "LoadingGraphic")[0]]);
        $wrap = $tag(div, "Wrapper");
        $content = $tag(div, "Content").append(
            $title = $tag(div, "Title"),
            $current = $tag(div, "Current"),
            $description = $tag(div, "Description"), //code to add description at bottom
            $prev = $('<button type="button"/>').attr({ id: prefix + 'Previous' }),
            $next = $('<button type="button"/>').attr({ id: prefix + 'Next' }),
            $slideshow = $tag('button', "Slideshow"),
            $loadingOverlay
        );

        $close = $('<button type="button"/>').attr({ id: prefix + 'Close' });

        $wrap.append( // The 3x3 Grid that makes up Colorbox
            $tag(div).append(
                $tag(div, "TopLeft"),
                $topBorder = $tag(div, "TopCenter"),
                $tag(div, "TopRight")
            ),
            $tag(div, false, 'clear:left').append(
                $leftBorder = $tag(div, "MiddleLeft"),
                $content,
                $rightBorder = $tag(div, "MiddleRight")
            ),
            $tag(div, false, 'clear:left').append(
                $tag(div, "BottomLeft"),
                $bottomBorder = $tag(div, "BottomCenter"),
                $tag(div, "BottomRight")
            )
        ).find('div div').css({ 'float': 'left' });

        $loadingBay = $tag(div, false, 'position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;');

        $groupControls = $next.add($prev).add($current).add($slideshow);

        $(document.body).append($overlay, $box.append($wrap, $loadingBay));
    }
}

// Add Colorbox's event bindings
function addBindings() {
    function clickHandler(e) {
        // ignore non-left-mouse-clicks and clicks modified with ctrl / command, shift, or alt.
        // See: http://jacklmoore.com/notes/click-events/
        if (!(e.which > 1 || e.shiftKey || e.altKey || e.metaKey || e.ctrlKey)) {
            e.preventDefault();
            launch(this);
        }
    }

    if ($box) {
        if (!init) {
            init = true;

            // Anonymous functions here keep the public method from being cached, thereby allowing them to be redefined on the fly.
            $next.click(function () {
                publicMethod.next();
            });
            $prev.click(function () {
                publicMethod.prev();
            });
            $close.click(function () {
                publicMethod.close();
            });
            $overlay.click(function () {
                if (settings.get('overlayClose')) {
                    publicMethod.close();
                }
            });

            // Key Bindings
            $(document).bind('keydown.' + prefix, function (e) {
                var key = e.keyCode;
                if (open && settings.get('escKey') && key === 27) {
                    e.preventDefault();
                    publicMethod.close();
                }
                if (open && settings.get('arrowKey') && $related[1] && !e.altKey) {
                    if (key === 37) {
                        e.preventDefault();
                        $prev.click();
                    } else if (key === 39) {
                        e.preventDefault();
                        $next.click();
                    }
                }
            });

            if ($.isFunction($.fn.on)) {
                // For jQuery 1.7+
                $(document).on('click.' + prefix, '.' + boxElement, clickHandler);
            } else {
                // For jQuery 1.3.x -> 1.6.x
                // This code is never reached in jQuery 1.9, so do not contact me about 'live' being removed.
                // This is not here for jQuery 1.9, it's here for legacy users.
                $('.' + boxElement).live('click.' + prefix, clickHandler);
            }
        }
        return true;
    }
    return false;
}

// Don't do anything if Colorbox already exists.
if ($.colorbox) {
    return;
}

// Append the HTML when the DOM loads
$(appendHTML);

// ****************
// PUBLIC FUNCTIONS
// Usage format: $.colorbox.close();
// Usage from within an iframe: parent.jQuery.colorbox.close();
// ****************

publicMethod = $.fn[colorbox] = $[colorbox] = function (options, callback) {
    var settings;
    var $obj = this;

    options = options || {};

    if ($.isFunction($obj)) { // assume a call to $.colorbox
        $obj = $('<a/>');
        options.open = true;
    } else if (!$obj[0]) { // colorbox being applied to empty collection
        return $obj;
    }

    if (!$obj[0]) { // colorbox being applied to empty collection
        return $obj;
    }

    appendHTML();

    if (addBindings()) {

        if (callback) {
            options.onComplete = callback;
        }

        $obj.each(function () {
            var old = $.data(this, colorbox) || {};
            $.data(this, colorbox, $.extend(old, options));
        }).addClass(boxElement);

        settings = new Settings($obj[0], options);

        if (settings.get('open')) {
            launch($obj[0]);
        }
    }

    return $obj;
};

publicMethod.position = function (speed, loadedCallback) {
    var
    css,
    top = 0,
    left = 0,
    offset = $box.offset(),
    scrollTop,
    scrollLeft;

    $window.unbind('resize.' + prefix);

    // remove the modal so that it doesn't influence the document width/height
    $box.css({ top: -9e4, left: -9e4 });

    scrollTop = $window.scrollTop();
    scrollLeft = $window.scrollLeft();

    if (settings.get('fixed')) {
        offset.top -= scrollTop;
        offset.left -= scrollLeft;
        $box.css({ position: 'fixed' });
    } else {
        top = scrollTop;
        left = scrollLeft;
        $box.css({ position: 'absolute' });
    }

    // keeps the top and left positions within the browser's viewport.
    if (settings.get('right') !== false) {
        left += Math.max($window.width() - settings.w - loadedWidth - interfaceWidth - setSize(settings.get('right'), 'x'), 0);
    } else if (settings.get('left') !== false) {
        left += setSize(settings.get('left'), 'x');
    } else {
        left += Math.round(Math.max($window.width() - settings.w - loadedWidth - interfaceWidth, 0) / 2);
    }

    if (settings.get('bottom') !== false) {
        top += Math.max(winheight() - settings.h - loadedHeight - interfaceHeight - setSize(settings.get('bottom'), 'y'), 0);
    } else if (settings.get('top') !== false) {
        top += setSize(settings.get('top'), 'y');
    } else {
        top += Math.round(Math.max(winheight() - settings.h - loadedHeight - interfaceHeight, 0) / 2);
    }

    $box.css({ top: offset.top, left: offset.left, visibility: 'visible' });

    // this gives the wrapper plenty of breathing room so it's floated contents can move around smoothly,
    // but it has to be shrank down around the size of div#colorbox when it's done.  If not,
    // it can invoke an obscure IE bug when using iframes.
    $wrap[0].style.width = $wrap[0].style.height = "9999px";

    function modalDimensions() {
        $topBorder[0].style.width = $bottomBorder[0].style.width = $content[0].style.width = (parseInt($box[0].style.width, 10) - interfaceWidth) + 'px';
        $content[0].style.height = $leftBorder[0].style.height = $rightBorder[0].style.height = (parseInt($box[0].style.height, 10) - interfaceHeight) + 'px';
    }

    css = { width: settings.w + loadedWidth + interfaceWidth, height: settings.h + loadedHeight + interfaceHeight, top: top, left: left };

    // setting the speed to 0 if the content hasn't changed size or position
    if (speed) {
        var tempSpeed = 0;
        $.each(css, function (i) {
            if (css[i] !== previousCSS[i]) {
                tempSpeed = speed;
                return;
            }
        });
        speed = tempSpeed;
    }

    previousCSS = css;

    if (!speed) {
        $box.css(css);
    }

    $box.dequeue().animate(css, {
        duration: speed || 0,
        complete: function () {
            modalDimensions();

            active = false;

            // shrink the wrapper down to exactly the size of colorbox to avoid a bug in IE's iframe implementation.
            $wrap[0].style.width = (settings.w + loadedWidth + interfaceWidth) + "px";
            $wrap[0].style.height = (settings.h + loadedHeight + interfaceHeight) + "px";

            if (settings.get('reposition')) {
                setTimeout(function () {  // small delay before binding onresize due to an IE8 bug.
                    $window.bind('resize.' + prefix, publicMethod.position);
                }, 1);
            }

            if (loadedCallback) {
                loadedCallback();
            }
        },
        step: modalDimensions
    });
};

publicMethod.resize = function (options) {
    var scrolltop;

    if (open) {
        options = options || {};

        if (options.width) {
            settings.w = setSize(options.width, 'x') - loadedWidth - interfaceWidth;
        }

        if (options.innerWidth) {
            settings.w = setSize(options.innerWidth, 'x');
        }

        $loaded.css({ width: settings.w });

        if (options.height) {
            settings.h = setSize(options.height, 'y') - loadedHeight - interfaceHeight;
        }

        if (options.innerHeight) {
            settings.h = setSize(options.innerHeight, 'y');
        }

        if (!options.innerHeight && !options.height) {
            scrolltop = $loaded.scrollTop();
            $loaded.css({ height: "auto" });
            settings.h = $loaded.height();
        }

        $loaded.css({ height: settings.h });

        if (scrolltop) {
            $loaded.scrollTop(scrolltop);
        }

        publicMethod.position(settings.get('transition') === "none" ? 0 : settings.get('speed'));
    }
};

publicMethod.prep = function (object) {
    if (!open) {
        return;
    }

    var callback, speed = settings.get('transition') === "none" ? 0 : settings.get('speed');

    $loaded.remove();

    $loaded = $tag(div, 'LoadedContent').append(object);

    function getWidth() {
        settings.w = settings.w || $loaded.width();
        settings.w = settings.mw && settings.mw < settings.w ? settings.mw : settings.w;
        return settings.w;
    }
    function getHeight() {
        settings.h = settings.h || $loaded.height();
        settings.h = settings.mh && settings.mh < settings.h ? settings.mh : settings.h;
        return settings.h;
    }

    $loaded.hide()
    .appendTo($loadingBay.show())// content has to be appended to the DOM for accurate size calculations.
    .css({ width: getWidth(), overflow: settings.get('scrolling') ? 'auto' : 'hidden' })
    .css({ height: getHeight() })// sets the height independently from the width in case the new width influences the value of height.
    .prependTo($content);

    $loadingBay.hide();

    // floating the IMG removes the bottom line-height and fixed a problem where IE miscalculates the width of the parent element as 100% of the document width.

    $(photo).css({ 'float': 'none' });

    setClass(settings.get('className'));

    callback = function () {
        var total = $related.length,
            iframe,
            complete;

        if (!open) {
            return;
        }

        function removeFilter() { // Needed for IE8 in versions of jQuery prior to 1.7.2
            if ($.support.opacity === false) {
                $box[0].style.removeAttribute('filter');
            }
        }

        complete = function () {
            clearTimeout(loadingTimer);
            $loadingOverlay.hide();
            trigger(event_complete);
            settings.get('onComplete');
        };

        $title.html(settings.get('title')).show();
        $description.html(settings.get('description')).show(); //code to add description at bottom
        $loaded.show();

        if (total > 1) { // handle grouping
            if (typeof settings.get('current') === "string") {
                $current.html(settings.get('current').replace('{current}', index + 1).replace('{total}', total)).show();
            }

            $next[(settings.get('loop') || index < total - 1) ? "show" : "hide"]().html(settings.get('next'));
            $prev[(settings.get('loop') || index) ? "show" : "hide"]().html(settings.get('previous'));

            slideshow();

            // Preloads images within a rel group
            if (settings.get('preloading')) {
                $.each([getIndex(-1), getIndex(1)], function () {
                    var img,
                        i = $related[this],
                        settings = new Settings(i, $.data(i, colorbox)),
                        src = settings.get('href');

                    if (src && isImage(settings, src)) {
                        src = retinaUrl(settings, src);
                        img = document.createElement('img');
                        img.src = src;
                    }
                });
            }
        } else {
            $groupControls.hide();
        }

        if (settings.get('iframe')) {
            iframe = document.createElement('iframe');

            if ('frameBorder' in iframe) {
                iframe.frameBorder = 0;
            }

            if ('allowTransparency' in iframe) {
                iframe.allowTransparency = "true";
            }

            if (!settings.get('scrolling')) {
                iframe.scrolling = "no";
            }

            $(iframe)
                .attr({
                    src: settings.get('href'),
                    name: (new Date()).getTime(), // give the iframe a unique name to prevent caching
                    'class': prefix + 'Iframe',
                    allowFullScreen: true // allow HTML5 video to go fullscreen
                })
                .one('load', complete)
                .appendTo($loaded);

            $events.one(event_purge, function () {
                iframe.src = "//about:blank";
            });

            if (settings.get('fastIframe')) {
                $(iframe).trigger('load');
            }
        } else {
            complete();
        }

        if (settings.get('transition') === 'fade') {
            $box.fadeTo(speed, 1, removeFilter);
        } else {
            removeFilter();
        }
    };

    if (settings.get('transition') === 'fade') {
        $box.fadeTo(speed, 0, function () {
            publicMethod.position(0, callback);
        });
    } else {
        publicMethod.position(speed, callback);
    }
};

function load() {
    var href, setResize, prep = publicMethod.prep, $inline, request = ++requests;

    active = true;

    photo = false;

    trigger(event_purge);
    trigger(event_load);
    settings.get('onLoad');

    settings.h = settings.get('height') ?
            setSize(settings.get('height'), 'y') - loadedHeight - interfaceHeight  :
            settings.get('innerHeight') && setSize(settings.get('innerHeight'), 'y') ;

    settings.w = settings.get('width') ?
            setSize(settings.get('width'), 'x') - loadedWidth - interfaceWidth :
            settings.get('innerWidth') && setSize(settings.get('innerWidth'), 'x');

    // Sets the minimum dimensions for use in image scaling
    settings.mw = settings.w;
    settings.mh = settings.h;

    // Re-evaluate the minimum width and height based on maxWidth and maxHeight values.
    // If the width or height exceed the maxWidth or maxHeight, use the maximum values instead.
    if (settings.get('maxWidth')) {
        settings.mw = setSize(settings.get('maxWidth'), 'x') - loadedWidth - interfaceWidth;
        settings.mw = settings.w && settings.w < settings.mw ? settings.w : settings.mw;
    }
    if (settings.get('maxHeight')) {
        settings.mh = setSize(settings.get('maxHeight'), 'y') - loadedHeight - interfaceHeight;
        settings.mh = settings.h && settings.h < settings.mh ? settings.h : settings.mh;
    }

    href = settings.get('href');

    loadingTimer = setTimeout(function () {
        $loadingOverlay.show();
    }, 100);

    if (settings.get('inline')) {
        var $target = $(href);
        // Inserts an empty placeholder where inline content is being pulled from.
        // An event is bound to put inline content back when Colorbox closes or loads new content.
        $inline = $('<div>').hide().insertBefore($target);

        $events.one(event_purge, function () {
            $inline.replaceWith($target);
        });

        prep($target);
    } else if (settings.get('iframe')) {
        // IFrame element won't be added to the DOM until it is ready to be displayed,
        // to avoid problems with DOM-ready JS that might be trying to run in that iframe.
        prep(" ");
    } else if (settings.get('html')) {
        prep(settings.get('html'));
    } else if (isImage(settings, href)) {

        href = retinaUrl(settings, href);

        photo = new Image();

        $(photo)
        .addClass(prefix + 'Photo')
        .bind('error', function () {
            prep($tag(div, 'Error').html(settings.get('imgError')));
        })
        .one('load', function () {
            if (request !== requests) {
                return;
            }

            // A small pause because some browsers will occassionaly report a 
            // img.width and img.height of zero immediately after the img.onload fires
            setTimeout(function () {
                var percent;

                $.each(['alt', 'longdesc', 'aria-describedby'], function (i, val) {
                    var attr = $(settings.el).attr(val) || $(settings.el).attr('data-' + val);
                    if (attr) {
                        photo.setAttribute(val, attr);
                    }
                });

                if (settings.get('retinaImage') && window.devicePixelRatio > 1) {
                    photo.height = photo.height / window.devicePixelRatio;
                    photo.width = photo.width / window.devicePixelRatio;
                }

                if (settings.get('scalePhotos')) {
                    setResize = function () {
                        photo.height -= photo.height * percent;
                        photo.width -= photo.width * percent;
                    };
                    if (settings.mw && photo.width > settings.mw) {
                        percent = (photo.width - settings.mw) / photo.width;
                        setResize();
                    }
                    if (settings.mh && photo.height > settings.mh) {
                        percent = (photo.height - settings.mh) / photo.height;
                        setResize();
                    }
                }

                if (settings.h) {
                    photo.style.marginTop = Math.max(settings.mh - photo.height, 0) / 2 + 'px';
                }

                if ($related[1] && (settings.get('loop') || $related[index + 1])) {
                    photo.style.cursor = 'pointer';
                    photo.onclick = function () {
                        publicMethod.next();
                    };
                }

                photo.style.width = photo.width + 'px';
                photo.style.height = photo.height + 'px';
                prep(photo);
            }, 1);
        });

        photo.src = href;

    } else if (href) {
        $loadingBay.load(href, settings.get('data'), function (data, status) {
            if (request === requests) {
                prep(status === 'error' ? $tag(div, 'Error').html(settings.get('xhrError')) : $(this).contents());
            }
        });
    }
}

// Navigates to the next page/image in a set.
publicMethod.next = function () {
    if (!active && $related[1] && (settings.get('loop') || $related[index + 1])) {
        index = getIndex(1);
        launch($related[index]);
    }
};

publicMethod.prev = function () {
    if (!active && $related[1] && (settings.get('loop') || index)) {
        index = getIndex(-1);
        launch($related[index]);
    }
};

// Note: to use this within an iframe use the following format: parent.jQuery.colorbox.close();
publicMethod.close = function () {
    if (open && !closing) {

        closing = true;
        open = false;
        trigger(event_cleanup);
        settings.get('onCleanup');
        $window.unbind('.' + prefix);
        $overlay.fadeTo(settings.get('fadeOut') || 0, 0);

        $box.stop().fadeTo(settings.get('fadeOut') || 0, 0, function () {
            $box.hide();
            $overlay.hide();
            trigger(event_purge);
            $loaded.remove();

            setTimeout(function () {
                closing = false;
                trigger(event_closed);
                settings.get('onClosed');
            }, 1);
        });
    }
};

// Removes changes Colorbox made to the document, but does not remove the plugin.
publicMethod.remove = function () {
    if (!$box) { return; }

    $box.stop();
    $.colorbox.close();
    $box.stop().remove();
    $overlay.remove();
    closing = false;
    $box = null;
    $('.' + boxElement)
        .removeData(colorbox)
        .removeClass(boxElement);

    $(document).unbind('click.' + prefix);
};

// A method for fetching the current element Colorbox is referencing.
// returns a jQuery object.
publicMethod.element = function () {
    return $(settings.el);
};

publicMethod.settings = defaults;

}(jQuery, document, window)); 
```

CSS 在 #cboxCurrent 元素下方添加了以下行

```
#cboxDescription{position:relative; top:-5px;left:0; color:#ccc; font-size:16px; padding:3px;} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-05T17:01:39.483

我知道这是一个非常古老的线程 - 但我最近遇到了这个问题并通过使用分页元素来解决它（假设你也不需要它！）：

```
 $('.gallery a').colorbox({rel:'gal', current:function () {
    var description = $(this).attr('alt');
    if (description == null) {
        return "";
    } else {
        return ""+description+"";
    }
    }}); 

```

我将描述放在覆盖图像的跨度中，如果它不存在，我不希望看到半透明背景 - 描述也来自链接的 alt 元素，可访问性 -明智的也是一种胜利！

希望这可以帮助！

# android - Sqlite 列不存在

> ID：10375619
> 
> 赞同：0
> 
> 时间：2012-04-29T20:17:00.673
> 
> 标签：android, sqlite, insert

这是我的问题；我正在从资产创建表，所有表都在一个文件中，其余表不会产生任何问题。

这张表正在报告：

> 04-29 22:13:09.434: E/SQLiteDatabase(6378): android.database.sqlite.SQLiteException: table gym_exercise 没有名为 date: 的列，编译时： INSERT INTO gym_exercise(cals,date) VALUES (?,?)

这是创建语句

```
create table gym_training (_id integer primary key autoincrement, cals integer not null, date text not null); 
```

我尝试重命名此列，尝试不为该列插入值，然后我收到约束错误。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:22:04.600

你把表名弄混了。您可能想要插入**`gym_training`**，而不是`gym_exercise`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:20:23.760

也许日期在 SQLite 中也有特殊含义（在其他数据库中也有）。尝试将名称更改为其他名称。如果从其他表中引用了此字段，则需要更新所有引用（我认为您可以在 SQlite 中执行此操作，尽管未强制执行引用）

# prolog - Prolog - 出现语法错误 - 需要运算符

> ID：10375621
> 
> 赞同：2
> 
> 时间：2012-04-29T20:17:23.223
> 
> 标签：prolog

我开始学习 Prolog，我的代码遇到了编译器错误。我正在尝试编写一些代码来检查满足某些条件的家庭是否处于贫困之中。最后一行几行是贫困条件，这就是我得到`Opertator Expected`错误的地方。我想说的是，给定家庭ID，如果那个家庭的人数是一个，并且收入低于11170，那么这个家庭是贫困的。对于一个人数大于 8 的家庭，贫困水平为 38890 加上每增加一个家庭成员 3960。我该如何纠正这些错误？`family_in_poverty`应该返回`true`或`false`。

```
family(10392,
       person(tom, fox, born(7, may, 1960), works(cnn, 152000)),
       person(ann, fox, born(19, april, 1961), works(nyu, 65000)),
       % here are the children...
       [person(pat, fox, born(5, october, 1983), unemployed),
        person(jim, fox, born(1, june, 1986), unemployed),
        person(amy, fox, born(17, december, 1990), unemployed)]).

family(38463, 
       person(susan, rothchild, born(13, september, 1972), works(osu, 75000)),
       person(jess, rothchild, born(20, july, 1975), works(nationwide, 123500)),
       % here are the children...
       [person(ace, rothchild, born(2, january, 2010), unemployed)]).

married(FirstName1, LastName1, FirstName2, LastName2) :-
    family(_, person(FirstName1, LastName1, _, _),
           person(FirstName2, LastName2, _, _), _).

married(FirstName1, LastName1, FirstName2, LastName2) :-
    family(_, person(FirstName2, LastName2, _, _),
           person(FirstName1, LastName1, _, _), _).

householdIncome(ID, Income) :-
    family(ID, person(_, _, _, works(_, Income1)),
           person(_, _, _, works(_, Income2)), _),
    Income is Income1 + Income2.

exists(Person) :- family(_, Person, _, _).
exists(Person) :- family(_, _, Person, _).
exists(Person) :- family(_, _, _, Children), member(Person, Children).

householdSize(ID, Size) :-
    family(ID, _, _, Children),
    length(Children, ChildrenCount),
    Size is 2 + ChildrenCount.

:- use_module(library(lists)). % load lists library for sumlist predicate

average(List, Avg) :-
    sumlist(List, Sum),
    length(List, N),
    Avg is Sum / N.

family_in_poverty(FamilyID) :- householdSize(FamilyID, 1), householdIncome(ID, X), X <= 11170.
family_in_poverty(FamilyID) :- householdSize(FamilyID, 2), householdIncome(ID, X), X <= 15130.
........
family_in_poverty(FamilyID) :- householdSize(FamilyID, Y), householdIncome(ID, X), X <= 38890 + (Y - 8)*3960, Y > 8. 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:09:08.830

Prolog 不`is <=`用于数字比较，仅`=<`用于小于或等于。

当您使用`is`关键字时，这是一个中缀谓词**is/2**，它将右侧计算为数值表达式并将结果与​​左侧统一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:30:26.450

不确定这是否会有所帮助，但请尝试进一步分解它。一行用于计算，另一行用于比较：

```
family_in_poverty(FamilyID) :- 
  householdSize(FamilyID, Y), 
  householdIncome(ID, X), 
  M is 38890 + (Y - 8)*3960,
  X =< M, 
  Y > 8. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T21:59:28.963

错误应该已经显示在这里：

```
|: family_in_poverty(FamilyID) :- householdSize(FamilyID, 1), householdIncome(ID, X), X <= 11170.
ERROR: user://1:88:0: Syntax error: Operator expected 
```

如果您不确定您的 Prolog 系统支持哪些运算符，或者您自己定义了哪些运算符，您可以通过 current_op/3 列出当前定义。以下是 SWI Prolog 的典型结果：

```
Welcome to SWI-Prolog (Multi-threaded, 64 bits, Version 6.1.3)
Copyright (c) 1990-2011 University of Amsterdam, VU Amsterdam
?- setof(Z,current_op(X,Y,Z),L), write(X-Y-L), nl, fail; true.
1-fx-[$]
200-fy-[+,-,@,\]
200-xfx-[**]
200-xfy-[^]
250-yfx-[?]
400-yfx-[*,/,//,<<,>>,div,mod,rdiv,rem,xor]
500-yfx-[+,-,/\,\/]
600-xfy-[:]
700-xfx-[<,=,=..,=:=,=<,==,=@=,=\=,>,>=,@<,@=<,@>,@>=,\=,\==,\=@=,as,is]
900-fy-[\+]
990-xfx-[:=]
1000-xfy-[,]
1050-xfy-[*->,->]
1100-xfy-[;]
1105-xfy-[|]
1150-fx-[discontiguous,dynamic,initialization,meta_predicate,    
    module_transparent,multifile,public,thread_initialization,thread_local,volatile]
1200-fx-[:-,?-]
1200-xfx-[-->,:-] 
```

如您所见，没有定义运算符 <=。现在，当 Prolog 系统遇到“term atom ...”形式的输入并且 atom 未定义为中缀或后缀运算符时，它会发出语法错误消息“Operator Expected”等。

您可能想要做的是算术比较。算术比较小于或等于由 Prolog 中的运算符 =< 表示。运算符甚至在 ISO 核心标准中定义。它的行为使得左侧和右侧进行算术评估，然后进行算术比较。

还有另一个运算符@=<，它不求值，也不是算术比较，而是词法比较。在比较整数和浮点数的算术比较中，整数首先被扩展为浮点数。在词法比较中，类型被比较。所以：

```
 ?- 1 =< 1.0.
 true
 ?- 1 @=< 1.0.
 false 
```

最好的祝福

SWI Prolog 算术比较： [http ://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.26%27,swi%28%27/doc/Manual/arith.html%27%29% 29](http://www.swi-prolog.org/pldoc/doc_for?object=section%282,%274.26%27,swi%28%27/doc/Manual/arith.html%27%29%29)

SWI Prolog 词法比较： [http ://www.swi-prolog.org/pldoc/doc_for?object=section%283,%274.7.1%27,swi%28%27/doc/Manual/compare.html%27% 29%29](http://www.swi-prolog.org/pldoc/doc_for?object=section%283,%274.7.1%27,swi%28%27/doc/Manual/compare.html%27%29%29)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-24T15:46:25.030

Prolog 中的简单经验法则：不等号始终指向等号。示例：=<、>=、@=<、@>= 等。这与命令式语言不同，其中不等号通常首先出现。

# javascript - Javascript 游戏关卡碰撞

> ID：10375622
> 
> 赞同：0
> 
> 时间：2012-04-29T20:17:50.300
> 
> 标签：javascript, html, canvas

我目前正在编写我的第一个游戏，并在 Javascript+HTML5 Canvas 中进行。该游戏是一款带有 WASD 动作的自上而下的点击动作射击游戏。无论如何，昨天我完成了使用圆和四叉树实现碰撞检测以最小化比较。我把所有的子弹、玩家和敌人都扔进了四叉树。现在，一切正常，但我不确定如何处理下一步，即处理实际级别的碰撞。子弹应该被墙壁挡住，演员（玩家和敌人）应该被栅栏和墙壁挡住，等等。

我是否应该定义形状来表示我的关卡的墙壁并将它们作为对象形式包含在四叉树中，然后使用 SAT 来评估每个元素与它可能发生碰撞的任何事物，或者是否有其他方法，例如创建隐藏图像概述路径的图层，然后测试每个对象的坐标以确保它不会落在黑色像素上（这表明它正在与不动的地形相撞）？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:43:30.447

从一个类似的问题：

> 我建议阅读这篇关于幽灵移动和碰撞检测如何在[PacMan](http://gameinternals.com/post/2072558330/understanding-pac-man-ghost-behavior?ba0efa20)中工作的优秀文章。
> 
> 然后我建议在逻辑上将您的炸弹人关卡建模为一组图块。每个图块代表您关卡中的一个离散位置，从逻辑上讲，不可能永远处于“之间”图块或同时占据两个图块。每个图块都可以跟踪当前在其上的地形特征，以及它是否是玩家（以及敌人）的有效目的地图块，如果允许敌人穿越通常无法通过的地形，则每个图块可能具有不同的规则为玩家）。
> 
> 那么你就不需要为世界上的每个物体都使用碰撞检测算法了。当敌人需要移动时，或者当用户试图移动他们的角色时，您所要做的就是检查与其当前图块相邻的所有图块（如果允许对角线移动，最多 4 个或 8 个），查看每个图块是否代表一个有效的移动方向，如果它不是一个有效的方向，则阻止移动。
> 
> 为了回答你的问题，是的，在每次位置更新时迭代世界上的每个对象都是非常低效的。

# hadoop - Hadoop Streaming 任务失败

> ID：10375623
> 
> 赞同：0
> 
> 时间：2012-04-29T20:17:58.707
> 
> 标签：hadoop, cloudera, hadoop-streaming

我有一个用 C++ 编写的相对简单的程序，我一直在使用 Hadoop Streaming 进行 MapReduce 作业（我的 Hadoop 版本是 Cloudera）。

最近，我发现很多流式任务在最后成功完成时一直失败并被任务跟踪器重新启动。我跟踪了用户日志，似乎一些 MapReduce 任务的输入为零。具体来说，错误消息如下所示：

```
HOST=null
USER=mapred
HADOOP_USER=null
last Hadoop input: |null|
last tool output: |TCGA-06-0216-0000024576-0000008192   0   27743   10716|
Date: Sun Apr 29 15:55:51 EDT 2012
java.io.IOException: Broken pipe 
```

有时错误率非常高（接近 50%）。我不认为这是正常的。有人知道吗

a) 发生了什么事？

b）我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T03:50:21.093

您的数据是否有很多其他语言的字符（例如中文）？

如果是这样，请检查您在 (1) JVM 中为您的 Hadoop 集群设置的字符编码设置：它可能默认设置为 UTF-8。(2) 你的映射器/减速器：确保你的映射器/减速器发出 UTF-8 字符（或者你设置 JVM 的任何字符编码）

# c++ - 对于在类外定义的友元函数，模板上的隐式转换查找失败

> ID：10375626
> 
> 赞同：9
> 
> 时间：2012-04-29T20:18:13.153
> 
> 标签：c++, templates, c++11

以下代码

```
#include <cassert>
#include <cstddef>

template <typename T>
struct foo {
    foo(std::nullptr_t) { }
    //friend bool operator ==(foo lhs, foo rhs) { return true; }

    template <typename U>
    friend bool operator ==(foo<U> lhs, foo<U> rhs);
};

template <typename T>
inline bool operator ==(foo<T> lhs, foo<T> rhs) { return true; }

int main() {
    foo<int> p = nullptr;
    assert(p == nullptr);
} 
```

无法编译并显示错误消息

> foo.cpp : 18:5: 错误: ' `operator==`' 中的 ' `p == nullptr`'没有匹配 项：模板参数推导/替换失败： foo.cpp:18:5：注意：不匹配的类型' '和' '
> 
> `template<class T> bool operator==(foo<T>, foo<T>)`
> 
> `foo<T>``std::nullptr_t`

但是，如果我改用类中的定义，则代码将按预期工作。

让我说**我理解错误信息：**模板参数`T`不能被推断为类型`nullptr`（顺便说一句，`decltype(*nullptr)`不编译）。此外，这可以通过在类中定义函数来解决。

但是，出于统一的原因（我*需要*在外面定义其他友元函数），我想在类之外定义这个函数。

**是否有一个“技巧”可以使函数的类外部定义起作用？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T20:35:41.403

There are three possible option for you

*   Declare and Define a new friend function with the type of rhs as `std::nullptt_t`

for ex

```
inline bool operator ==(foo<T> lhs, std::nullptr_t rhs) { return true; } 
```

*   Or when equating the variable with `nullptr`, explicitly state the type of `nullptr`

for ex

```
assert(p == foo<int>(nullptr)); 
```

*   Declare and Define a new friend function with the type of rhs as `void *`

for ex

```
inline bool operator ==(foo<T> lhs, void *rhs) {         
    if (rhs == nullptr) 
        return true; 
    else
        return false;
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-30T04:13:19.507

Abhijit 已经给了你基本的解决方案，但我想我会稍微解释一下，因为这是一个有趣的问题。

如果你在模板类中声明一个友元函数，像这样：

```
template <typename T>
struct A {
  friend void f(A);
}; 
```

那么你的意思是，任何以 A 作为参数的名为 f 的非模板函数都将成为 A 的朋友。所以你需要分别定义这些函数：

```
inline void f(A<int>) {...}
inline void f(A<float>) {...}
// etc. 
```

尽管在类中定义它是一种快捷方式。

在这种情况下，没有办法为每个 T 创建一个定义友元 f(A) 的模板，因为您已经说过非模板函数是友元。事实上，它是一个非模板函数，使其在您的示例中可用，因为当编译器查找匹配函数时，非模板函数比模板函数允许更多的转换。

有一个相当通用的解决方法，虽然它有点混乱。您可以定义将处理您的 nullptr 的其他模板函数，或者您可能扔给它的任何其他内容，并将其推迟到您的主函数：

```
template <typename T>
inline bool operator ==(foo<T> lhs, std::nullptr_t rhs)
{
  return lhs==foo<T>(rhs);
} 
```

您可能希望以两种方式进行对称：

```
template <typename T>
inline bool operator ==(std::nullptr_t lhs,foo<T> rhs)
{
  return foo<T>(lhs)==rhs;
} 
```

在单独的说明中，即使 U 和 T 不是同一类型，您定义朋友函数`operator==(foo<U>,foo<U>)`的方式也会成为朋友。`foo<T>`它在实践中可能不会有太大的不同，但有一种技术上更好的方法可以做到这一点。它涉及到前向声明模板函数，然后使模板参数的特化成为朋友。

这是一个完整的例子：

```
template <typename> struct foo;

template <typename T>
inline bool operator==(foo<T> lhs,foo<T> rhs);

template <typename T>
struct foo {
    foo(std::nullptr_t) { }

    friend bool operator==<>(foo lhs,foo rhs);
};

template <typename T>
inline bool operator ==(foo<T> lhs,foo<T> rhs)
{
  return true;
}

template <typename T>
inline bool operator ==(foo<T> lhs, std::nullptr_t rhs)
{
  return lhs==foo<T>(rhs);
}

template <typename T>
inline bool operator ==(std::null_ptr_t lhs,foo<T> rhs)
{
  return foo<T>(lhs)==rhs;
}

int main() {
    foo<int> p = nullptr;
    assert(p == nullptr);
    assert(nullptr == p);
    assert(p == p);
} 
```

# php - PHP交互式文本表单

> ID：10375627
> 
> 赞同：2
> 
> 时间：2012-04-29T20:18:19.150
> 
> 标签：php, plugins, generator, live

我目前正在设计一个网站，它本身就有一个社交插件/按钮，就像 Facebook 和 Twitter 一样。我的问题是：如何制作一个文本框，当在其中输入内容并按下按钮时，我的社交插件代码的一个字段会更改为与文本框匹配？我需要它来做与 Facebook 的插件页面相同的事情，例如，喜欢按钮需要您输入您希望按钮喜欢的“链接”，然后它将该链接添加到代码中并将代码提供给您.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:20:57.833

Javascript。获取插入的链接，将其放入动态生成的输入字段中。

Facebook 使用 iframe 顺便说一句。

# google-app-engine - GAE的API的任何机会 - 应用程序设置？

> ID：10375628
> 
> 赞同：7
> 
> 时间：2012-04-29T20:18:36.333
> 
> 标签：google-app-engine

我有一个多租户付费应用程序，我已经在生产环境中运行了 18 个月。在过去的几个月里，我一直在调整运行时配置，以获得最佳性能。
我想我找到了一个相当理想的解决方案，涉及一些空闲实例、最大实例、保留时间等。

目前我的客户一般都在欧洲，所以我发现自己在欧洲一天打开空闲服务器，晚上又关闭。
这是一项我显然更愿意不做的手工作业，因为它既费时又容易出错。
我不打算花更少的钱，因为我的预算已经根据我的客户数量设定，我只是根据他们的时区优化他们得到的响应时间。
我敢肯定，我不能孤单地想要这种自动化配置，我希望它实现起来相当简单。

问题是，是否有计划发布 API 来控制这些设置？

# android - 如何创建用于取消隐藏文件夹的 shell 命令

> ID：10375629
> 
> 赞同：-1
> 
> 时间：2012-04-29T20:18:47.053
> 
> 标签：android

我想创建一个 shell 命令或获取一些可用于取消隐藏 android sd 卡中所有文件夹的代码。还有一个可以隐藏的会很有用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:22:06.993

为什么你需要一个shell命令？，android上的隐藏文件夹以“。”开头，所以你只需使用

```
File[] f = Environment.getExternalStorageDirectory().listFiles() 
```

它会为您提供所有文件夹和文件的列表，甚至以“。”开头的文件，因此您只需使用 for 循环做任何您想做的事情，例如，取消隐藏文件夹

```
for(int i=0; i<f.length; i++){
     if(f.getName().startsWith("."))
        f.renameTo(f.getAbsolutePath() + File.separator + f.getName().replace(".", ""));
} 
```

这**仅**适用于文件夹。

# ruby - Sinatra/Rack session.fetch 产生意想不到的结果

> ID：10375630
> 
> 赞同：2
> 
> 时间：2012-04-29T20:18:57.850
> 
> 标签：ruby, sinatra, rack

我在 Sinatra 中为 编写了一个快速帮助程序`redirect_to_next`，我在其中重定向到由提供的路径（`session[:next]`如果存在）或默认路径。

在 Sinatra 中，`session`真正由 Rack 和[spec](http://rack.rubyforge.org/doc/SPEC.html)提供，据说它为[`fetch`](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-fetch). 我写了以下错误助手来解释我的问题。

```
error 401 do
  session[:next] = request.path
  puts "get   #{session[:next]}"
  puts "fetch #{session.fetch(:next, '/')}"
  redirect "/login"
end 
```

当我在未登录的情况下尝试访问*/settings*`halt 401`时，我会运行上面的代码。这是它打印到我的终端的内容：

```
get   /settings
fetch / 
```

`:next`作为键存在，那么为什么它给我默认值，就好像它没有一样？

**更新**

这个最小的例子显示了相同的行为。

```
require 'sinatra'

set :sessions, true

get '/' do
  session[:testing] = "hello"
  puts "get   #{session[:testing]}"
  puts "fetch #{session.fetch(:testing, 'goodbye')}"
end 
```

日志

```
[2012-04-29 14:11:51] INFO  WEBrick::HTTPServer#start: pid=1954 port=9292
get   hello
fetch goodbye
10.0.2.2 - - [29/Apr/2012 14:11:54] "GET / HTTP/1.1" 200 - 0.0485 
```

软件

*   红宝石 (1.9.3p194)
*   机架 (1.4.1)
*   西纳特拉 (1.3.2)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:01:21.040

会话哈希不是普通的 Ruby `Hash`，而是[`Rack::Session::Abstract::SessionHash`](https://github.com/rack/rack/blob/1.4.1/lib/rack/session/abstract/id.rb#L50). `SessionHash`实际上继承自`Hash`，但它[覆盖了`[]=` and方法，在存储和检索它们之前`[]`调用`to_s`](https://github.com/rack/rack/blob/1.4.1/lib/rack/session/abstract/id.rb#L70-L73)任何键。

扩展您的更新示例：

```
require 'sinatra'

set :sessions, true

get '/' do
  session[:testing] = "hello"
  puts "get               #{session[:testing]}"
  puts "fetch             #{session.fetch(:testing, 'goodbye')}"
  puts "fetch with string #{session.fetch(:testing.to_s, 'goodbye')}"
end 
```

给出这个输出：

```
get               hello
fetch             goodbye
fetch with string hello 
```

当您使用[`Hash#fetch`](http://ruby-doc.org/core-1.9.3/Hash.html#method-i-fetch)，传递一个符号时，该方法会直接分派到父哈希，而不是转换为字符串，因此找不到匹配的键。

因此，始终在会话中使用字符串作为键，一切都应该正常工作。

# javascript - 如何在 Javascript 中创建开/关按钮

> ID：10375631
> 
> 赞同：0
> 
> 时间：2012-04-29T20:19:03.123
> 
> 标签：javascript

我是新手，所以这个问题可能听起来很愚蠢。我想加载一个javascript函数， `<body onload="function()">`但我想通过开/关开关处理这个事件，所以如果开关打开（默认情况下）“onload”事件将调用该函数，如果开关设置为关闭它不会. 提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:36:11.217

If you want to execute a function when the document is loaded, you should use the window onload event, or alternatively, and maybe more accepted solution is to use **jquery** (look into it, better learn the best practice from the beginning)

```
$(function(){
    // my_on_load_script;
}); 
```

If you'd like to create a toggle button in javascript, you may use jquery (again), to toggle styles applied to the button element something along the lines:

```
$('#my_button_identifier').click(function(e){
    $(this).toggleClass('my_toggled_button_class');
); 
```

here you go: [http://api.jquery.com/toggleClass/](http://api.jquery.com/toggleClass/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-17T00:11:55.393

```
<h1 id="changetext"> status is here</h1>
<button id="alertme" onclick="bulb();" >ON</button>
<script>
var flag = 0;           
            function bulb(){
                if (flag==0) {
                window.alert(flag);
                document.getElementById('alertme').innerHTML = "OFF";
                document.getElementById('changetext').innerHTML = "Machine is off";
                flag=1;
                }
                else        {
                window.alert(flag);
                document.getElementById('alertme').innerHTML = "ON";
                document.getElementById('changetext').innerHTML = "Machine is on";              
                flag=0;
                }
            }
</script> 
```

# android - 将 Android 连接到 ASP.net MVC 项目

> ID：10375632
> 
> 赞同：0
> 
> 时间：2012-04-29T20:19:05.690
> 
> 标签：android, asp.net-mvc

我正在尝试将 android 应用程序连接到我的 ASP.NET MVC 项目？无论如何我可以通过本地主机连接它而不将它部署在网络服务器上？什么是我应该将其提供给 android 应用程序的 URL。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:44:21.750

10.0.2.2 是运行模拟器的 localhost 的模拟器可见的 IP 地址。[参考](http://developer.android.com/guide/developing/devices/emulator.html#emulatornetworking)

# scala - 理解 Scala 中的隐式

> ID：10375633
> 
> 赞同：329
> 
> 时间：2012-04-29T20:19:09.113
> 
> 标签：scala, syntax, playframework, keyword

我正在阅读 Scala playframework 教程，我遇到了这段让我感到困惑的代码片段：

```
def newTask = Action { implicit request =>
taskForm.bindFromRequest.fold(
        errors => BadRequest(views.html.index(Task.all(), errors)),
        label => {
          Task.create(label)
          Redirect(routes.Application.tasks())
        } 
  )
} 
```

所以我决定调查并遇到[这个帖子](http://pietrowski.info/2009/07/scala-implicit-conversion/)。

我还是不明白。

这有什么区别：

```
implicit def double2Int(d : Double) : Int = d.toInt 
```

和

```
def double2IntNonImplicit(d : Double) : Int = d.toInt 
```

除了显而易见的事实之外，它们具有不同的方法名称。

我应该什么时候使用`implicit`，为什么？

* * *

## 回答 #1

> 赞同：428
> 
> 时间：2012-04-29T21:02:02.927

我将在下面解释隐式的主要用例，但更多详细信息请参见[Programming in Scala 的相关章节](http://www.artima.com/pins1ed/implicit-conversions-and-parameters.html)。

**隐式参数**

方法的最终参数列表可以标记为`implicit`，这意味着值将从调用它们的上下文中获取。如果范围内没有正确类型的隐式值，则不会编译。由于隐式值必须解析为单个值并避免冲突，因此最好使类型特定于其用途，例如，不要求您的方法找到隐式`Int`！

例子：

```
 // probably in a library
class Prefixer(val prefix: String)
def addPrefix(s: String)(implicit p: Prefixer) = p.prefix + s

  // then probably in your application
implicit val myImplicitPrefixer = new Prefixer("***")
addPrefix("abc")  // returns "***abc" 
```

**隐式转换**

当编译器为上下文找到错误类型的表达式时，它会寻找`Function`允许它进行类型检查的类型的隐式值。因此，如果`A`需要 an 并且它找到 a `B`，它将`B => A`在范围内查找类型的隐式值（它还会检查其他一些地方，例如在`B`和`A`伴随对象中，如果它们存在的话）。由于`def`s 可以“扩展”为`Function`对象，因此 an`implicit def xyz(arg: B): A`也可以。

因此，您的方法之间的区别在于，当找到 a 但需要 an`implicit`时，编译器将为您插入标记的方法。`Double``Int`

```
implicit def doubleToInt(d: Double) = d.toInt
val x: Int = 42.0 
```

将与

```
def doubleToInt(d: Double) = d.toInt
val x: Int = doubleToInt(42.0) 
```

在第二个中，我们手动插入了转换；首先，编译器会自动执行相同的操作。由于左侧的类型注释，需要进行转换。

* * *

关于您在 Play 中的第一个片段：

[此页面](http://www.playframework.com/documentation/2.0/ScalaActions)上的操作说明来自 Play 文档（另请参阅[API 文档](http://www.playframework.com/documentation/2.0/api/scala/play/api/mvc/Action$.html)）。您正在使用

```
apply(block: (Request[AnyContent]) ⇒ Result): Action[AnyContent] 
```

在`Action`对象上（这是同名特征的伴侣）。

所以我们需要提供一个函数作为参数，它可以写成如下形式的文字

```
request => ... 
```

在函数字面量中，前面的部分`=>`是一个值声明，可以根据需要进行标记`implicit`，就像在任何其他`val`声明中一样。在这里，`request` *不必*`implicit`为 this 进行类型检查，但通过这样做，它*可以作为函数中可能需要它的任何方法的隐式值*使用（当然，它也可以显式使用）. 在这种特殊情况下，这样做是因为[Form](https://www.playframework.com/documentation/2.0.6/api/scala/play/api/data/Form.html)`bindFromRequest`类上的方法需要一个隐式参数。`Request`

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2017-01-18T00:01:38.663

**警告：**明智地包含讽刺！YMMV...

[路易吉的回答](https://stackoverflow.com/a/10375941/244935)是完整而正确的。这只是通过一个示例来扩展它，说明如何过度使用*implicits*，因为它在Scala 项目中经常发生。实际上，您甚至可以经常在*“最佳实践”*指南之一中找到它。

```
object HelloWorld {
  case class Text(content: String)
  case class Prefix(text: String)

  implicit def String2Text(content: String)(implicit prefix: Prefix) = {
    Text(prefix.text + " " + content)
  }

  def printText(text: Text): Unit = {
    println(text.content)
  }

  def main(args: Array[String]): Unit = {
    printText("World!")
  }

  // Best to hide this line somewhere below a pile of completely unrelated code.
  // Better yet, import its package from another distant place.
  implicit val prefixLOL = Prefix("Hello")
} 
```

* * *

## 回答 #3

> 赞同：27
> 
> 时间：2018-12-13T08:59:59.250

**在 scala 中，隐式工作为**：

*转换器*

*参数值注入器*

*扩展方法*

**隐式有一些用途**

1.  **隐式类型转换**：它将产生错误的赋值转换为预期的类型

    ```
    val x :String = "1"

    val y:Int = x 
    ```

**String**不是**Int 的子类型**，因此错误发生在第 2 行。为了解决错误，编译器将在具有隐式关键字的范围内寻找这样的方法，并将**String**作为参数并返回**Int**。

所以

```
implicit def z(a:String):Int = 2

val x :String = "1"

val y:Int = x // compiler will use z here like val y:Int=z(x)

println(y) // result 2  & no error! 
```

2.  **隐式接收器转换**：我们通常通过接收器调用对象的属性，例如。方法或变量。因此，要由接收者调用任何属性，该属性必须是该接收者的类/对象的成员。

    ```
     class Mahadi{

     val haveCar:String ="BMW"

     } 
    ```

* * *

```
 class Johnny{

    val haveTv:String = "Sony"

    } 
```

* * *

```
 val mahadi = new Mahadi

   mahadi.haveTv // Error happening 
```

这里**mahadi.haveTv**会产生错误。因为 scala 编译器会首先寻找**mahadi接收器的****haveTv**属性。它不会找到。其次，它将在范围内寻找一个具有**隐式关键字**的方法，该方法以**Mahadi 对象**作为参数并返回**Johnny 对象**。但是这里没有。所以它会产生**错误**。但是下面的没问题。

 ******```
class Mahadi{

val haveCar:String ="BMW"

} 
```

* * *

```
class Johnny{

val haveTv:String = "Sony"

} 
```

* * *

```
val mahadi = new Mahadi

implicit def z(a:Mahadi):Johnny = new Johnny

mahadi.haveTv // compiler will use z here like new Johnny().haveTv

println(mahadi.haveTv)// result Sony & no error 
```

3.  **隐式参数注入**：如果我们调用一个方法并且不传递它的参数值，就会导致错误。scala 编译器的工作方式是这样的——首先会尝试传递值，但它不会为参数获得直接值。

    ```
     def x(a:Int)= a

     x // ERROR happening 
    ```

其次，如果参数有任何隐式关键字，它将在**范围内**查找具有**相同类型值的任何****val**。如果没有得到它会导致错误。

 ****```
def x(implicit a:Int)= a

x // error happening here 
```

为了解决这个问题，编译器将寻找具有**Int 类型的****隐式 val** ，因为参数**a**具有**隐式关键字**。

 ******```
def x(implicit a:Int)=a

implicit val z:Int =10

x // compiler will use implicit like this x(z)
println(x) // will result 10 & no error. 
```

**另一个例子：**

```
def l(implicit b:Int)

def x(implicit a:Int)= l(a) 
```

我们也可以这样写——

```
def x(implicit a:Int)= l 
```

因为**l**有一个**隐式参数**并且在**方法 x 的主体**范围内，有一个**隐式局部变量**（*参数是局部变量*）**a**是**x**的参数，所以在x**方法的****主体中，** 方法签名**l 的隐式参数**值为由**x 方法的局部隐式变量（参数）****隐式**归档。******`a`******

 ****所以

```
 def x(implicit a:Int)= l 
```

将像这样在编译器中

```
def x(implicit a:Int)= l(a) 
```

**另一个例子：**

```
def c(implicit k:Int):String = k.toString

def x(a:Int => String):String =a

x{
x => c
} 
```

这将导致错误，因为**x{x=>c}****中**的c需要在参数中显式传递值或**在范围内**隐式传递 val 。

 ****因此，当我们调用**方法 x**时，我们可以使函数字面量的**参数**显**式隐式**

 **```
x{
implicit x => c // the compiler will set the parameter of c like this c(x)
} 
```

这已用于Play-Framework的**动作方法**

```
in view folder of app the template is declared like
@()(implicit requestHreader:RequestHeader)

in controller action is like

def index = Action{
implicit request =>

Ok(views.html.formpage())  

} 
```

如果您没有明确提及请求参数是隐式的，那么您一定是这样写的-

```
def index = Action{
request =>

Ok(views.html.formpage()(request))  

} 
```

4.  **扩展方法**

想一想，我们想用 Integer 对象添加新方法。该方法的名称将是meterToCm，

```
> 1 .meterToCm 
res0 100 
```

为此，我们需要在 object/class/trait 中创建一个隐式类。该类不能是案例类。

```
object Extensions{

    implicit class MeterToCm(meter:Int){

        def  meterToCm={
             meter*100
        }

    }

} 
```

请注意，**隐式类**将只采用**一个构造函数参数**。

现在在您要使用的范围内导入隐式类

```
import  Extensions._

2.meterToCm // result 200 
```

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-01-03T19:32:34.943

为什么以及何时应该将`request`参数标记为`implicit`：

您将在动作主体中使用的某些方法具有**隐式参数列表**，例如，Form.scala 定义了一个方法：

```
def bindFromRequest()(implicit request: play.api.mvc.Request[_]): Form[T] = { ... } 
```

您不一定会注意到这一点，因为您只需调用`myForm.bindFromRequest()`您不必显式提供隐式参数。不，您让*编译器*在每次遇到需要请求实例的方法调用时查找要传入的任何有效候选对象。由于您*确实*有可用的请求，因此您只需将其标记为`implicit`.

您*明确*将其标记为可*隐式*使用。

您暗示编译器“可以”使用 Play 框架发送的请求对象（我们将其命名为“request”，但可能只使用“r”或“req”），“偷偷摸摸” .

```
myForm.bindFromRequest() 
```

看见？它不在那里，但它就*在*那里！

它只是发生，而您不必在需要的每个地方手动插入它（但如果您愿意，无论是否标记，您*都可以*`implicit`显式传递它）：

```
myForm.bindFromRequest()(request) 
```

如果不将其标记为隐式，**则必须**执行上述操作。将其标记为隐式您不必这样做。

**什么时候**应该将请求标记为`implicit`？*只有在使用声明隐式参数列表并期望 Request 实例的*方法时，您才真正需要这样做。但是为了简单起见，你可以养成`implicit` **总是**标记请求的习惯。这样你就可以编写漂亮简洁的代码。

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2017-10-25T16:48:48.700

此外，在上述情况下，应该有`only one`类型为 的隐式函数`double => Int`。否则，编译器会感到困惑，无法正确编译。

```
//this won't compile

implicit def doubleToInt(d: Double) = d.toInt
implicit def doubleToIntSecond(d: Double) = d.toInt
val x: Int = 42.0 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-05-11T04:49:30.693

我和你有完全相同的问题，我想我应该通过一些非常简单的例子来分享我是如何开始理解它的（注意它只涵盖了常见的用例）。

Scala 中有两个常见的用例，使用`implicit`.

*   在变量上使用它
*   在函数上使用它

示例如下

**在变量上使用它**。如您所见，如果`implicit`在最后一个参数列表中使用关键字，则将使用最接近的变量。

```
// Here I define a class and initiated an instance of this class
case class Person(val name: String)
val charles: Person = Person("Charles")

// Here I define a function
def greeting(words: String)(implicit person: Person) = person match {
  case Person(name: String) if name != "" => s"$name, $words"
    case _ => "$words"
}

greeting("Good morning") // Charles, Good moring

val charles: Person = Person("")
greeting("Good morning") // Good moring 
```

**在函数上使用它**。如您所见，如果在`implicit`函数上使用 ，则将使用最接近的类型转换方法。

```
val num = 10 // num: Int (of course)

// Here I define a implicit function
implicit def intToString(num: Int) = s"$num -- I am a String now!"

val num = 10 // num: Int (of course). Nothing happens yet.. Compiler believes you want 10 to be an Int

// Util...
val num: String = 10 // Compiler trust you first, and it thinks you have `implicitly` told it that you had a way to covert the type from Int to String, which the function `intToString` can do!
// So num is now actually "10 -- I am a String now!"
// console will print this -> val num: String = 10 -- I am a String now! 
```

希望这能有所帮助。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-11-30T19:51:27.610

一个非常基本的 scala 中的隐式示例。

**隐式参数**：

```
val value = 10
implicit val multiplier = 3
def multiply(implicit by: Int) = value * by
val result = multiply // implicit parameter wiil be passed here
println(result) // It will print 30 as a result 
```

**注意：**这里`multiplier`将隐式传递给函数`multiply`。函数调用的缺失参数在当前范围内按类型查找，这意味着如果范围内没有 Int 类型的隐式变量，则代码将无法编译。

**隐式转换**：

```
implicit def convert(a: Double): Int = a.toInt
val res = multiply(2.0) // Type conversions with implicit functions
println(res)  // It will print 20 as a result 
```

**注意：**当我们调用`multiply`函数传递一个双精度值时，编译器会尝试在当前作用域中寻找转换隐式函数，该函数转换`Int`为`Double`（作为函数`multiply`接受`Int`参数）。如果没有隐式`convert`函数，那么编译器将不会编译代码。**************************

# java - 为什么我的 JButton 总是在 GUI 上弹出？

> ID：10375634
> 
> 赞同：2
> 
> 时间：2012-04-29T20:19:10.487
> 
> 标签：java, swing, user-interface, jframe, jbutton

所以我正在制作一个游戏，我希望在窗口中弹出一个jbutton，当你点击它时你可以登录。问题是当我开始游戏时，它并不总是弹出，这有点烦人。唯一的想法是问题是我做事的顺序。这是代码：

```
public static void createWindow() {
    ImagePanel panel = new ImagePanel(
            new ImageIcon(backgroundFile).getImage()); //used for the background

    JButton login = new JButton(new AbstractAction("Login") {
        public void actionPerformed(ActionEvent e) {
            Login.createWindow();
        }
    });
    login.setBounds(300, 300, 100, 100);

    frame.getContentPane().add(panel); //sets the background to a pic
    frame.setJMenuBar(MenuBar.menuBarCreator()); creates the menu bar
    frame.pack();
    frame.setResizable(false);
    frame.setTitle("*Game Title* Beta 0.0.1 ADMINISTRATOR VERSION");
    frame.setSize(ImagePanel.img.getWidth(null),
            ImagePanel.img.getHeight(null));
    frame.setLocation(Monitor.setLocationHeight(),
            Monitor.setLocationWidth());
    frame.setVisible(true);
    frame.setDefaultCloseOperation(EXIT_ON_CLOSE);
    StreamingLineSound.start(soundFile); //starts a music file
    frame.add(login);

} 
```

任何帮助都会很棒。所以基本上我想要的只是一个想法，为什么它不会一直弹出。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:23:50.677

代码行`frame.setVisible(true);`必须在 中的最后一行`public static void createWindow() {`，因为您显示`JFrame`然后添加`frame.add(login);`

# java - GWT - 如何创建下拉菜单

> ID：10375636
> 
> 赞同：0
> 
> 时间：2012-04-29T20:19:17.193
> 
> 标签：java, css, gwt

您好我正在尝试使用 GWT 创建一个下拉菜单。这是我想要实现的布局：

```
| Categories | Pictures | Other | 
```

现在，当类别打开时，我想显示实际的下拉列表，以两个一组的形式显示类别。让我们说：

```
 | Categories | Pictures | Other |
 |  Cat 1    Cat 2   |
 |  Cat 3    Cat 4   |
 |  Cat 5    Cat 6   | <---------- Menu of categories here
 |  Cat 7    Cat 8   |
 |  Cat 9    Other   |
  ------------------- 
```

我查看了 MenuBar 小部件[http://gwt.google.com/samples/Showcase/Showcase.html#](http://gwt.google.com/samples/Showcase/Showcase.html#) MenuBar 和那里的其他小部件。但是，似乎不符合我的需要，因为类别将以 2 对显示，所以每当我将鼠标移到一行上时，它都会选择它们而不是只选择一个。

我目前正在使用 FlexTable，所以基本上我有一个带有空格的矩阵，并且我只显示类别中的元素，因为它是唯一有项目的元素。换句话说，所有元素都是矩阵中的一个单元。我几乎实现了用例但是，当前编程的方式有点hacky和不自然..目前它看起来像这样：

```
 Column1        |       Col2   |  Col3
| Categories                Pictures | Other |               <- Row1
|  Cat 1                     Cat 2   |  Empy |               <- Row2
|  Cat 3                     Cat 4   |  Empy |               <- Row3
|  Cat 5                     Cat 6   |  Empy |   <---------- Menu of categories here
|  Cat 7                     Cat 8   |  Empy |               <- Row5
|  long descriptions ruin layout     |  Empy |               <- Row6
------------------------------------- 
```

所以标题“图片”和“其他”的布局总是会根据类别菜单的宽度而移动。

谁能给我一个关于如何使用 GWT 实现这一目标的建议？我知道可以选择创建自己的小部件。但在此之前，我想知道如何实现这一目标。可能有人可以指导我如何集成另一种技术，如 jQuery，或者实现该格式添加 CSS 类或允许具有不同列和行大小的特定 GWT 小部件布局。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-30T14:26:48.143

你可以通过使用来做到这一点，例如。标签来制作菜单。单击标签时（可以将鼠标悬停在...上），您将显示相应的下拉菜单。

下拉菜单应该是（或扩展）`DecoratedPopupPanel`。在此小部件中，您可以将一个子小部件设置为下拉项目的容器。所以你可以有许多不同的布局。对于您的情况，您可以简化以下结构：

```
<g:HorizonatlPanel>
  <g:VerticalPanel>
     items in first column
  </g:VerticalPanel> 
  <g:VerticalPanel>
     items in second column
  </g:VerticalPanel>
</g:HorizontalPanel> 
```

在显示下拉菜单之前，请确保根据单击的标签更新弹出位置。如果菜单下拉菜单很复杂，请尝试`UiBinder`使用`XML`.

[这](http://gwt.google.com/samples/Showcase/Showcase.html#!CwBasicPopup)是`DecoratedPopupPanel`单击按钮时显示的示例。

更多关于 UiBinder 的内容，不熟悉的可以看[这里](https://developers.google.com/web-toolkit/doc/latest/DevGuideUiBinder)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:40:02.210

这是一个小提琴，您可以从[http://jsfiddle.net/UUHyj/](http://jsfiddle.net/UUHyj/)开始，它使用的只是 css，但对于 ie6 down，您将需要 javascript 来进行翻转等

# c# - 使碰撞检测更高效（C# XNA）

> ID：10375638
> 
> 赞同：1
> 
> 时间：2012-04-29T20:19:27.847
> 
> 标签：c#, .net, xna, collision-detection, game-physics

我是一个相当缺乏经验的程序员，目前正在学习 C# 并试图学习游戏设计。

我正在使用 Microsoft 的 XNA 框架来构建一个 Galaga-esque Scrolling Shooter 游戏。经过几次粗略的试验，我与劣质的 OOP 结构作斗争，做出了一些糟糕的设计选择，我终于想出了一个值得尊敬的引擎启动。

目前，我在使碰撞检测不落后于游戏方面遇到问题。我当前的引擎将所有活动的游戏对象保存在 List 对象中并循环遍历每个对象，检查它是否与其他对象发生碰撞。不用说，它可能会好很多。

这是我的碰撞检查，在 ObjectHandler 类中完成。

```
public override void Update(GameTime gameTime)
    {
    ...
        //Handle collisions
        foreach (GameObject obj in Objects)
        {
            ICollideable e = obj as ICollideable;
            //Check if the object implements ICollideable
            if (e != null)
            {
                //Check collision with each other object
                foreach (GameObject obj2 in Objects)
                {
                    //Check if the second object implements ICollideable
                    ICollideable e2 = obj2 as ICollideable;
                    //check if they are in the same sector
                    if (e2 != null && SameSector(e.Sector,e2.Sector))
                    {
                        //Check if the collision masks interesect
                        //if so call each object's collision event
                        if (e.Mask.Intersects(e2.Mask))
                        {
                            e.CollisionEvent(e2);
                            e2.CollisionEvent(e);
                        }
                    }
                }
            }
        }
      ...
    } 
```

这是 SameSector 函数。

```
private bool SameSector(Point p1, Point p2)
    {
        if (Math.Abs(p1.X-p2.X)<=1 && Math.Abs(p1.Y-p2.Y)<=1)
            return true;
        else 
            return false;
    } 
```

这里的“掩码”是一个 Rectangle 对象，它是 XNA 框架的一部分。如您所见，我已经实现了一种空间分区系统，其中每个对象都设置了它所在的 60x60 正方形。但是，我不确定我是否做了任何有用的事情，因为检查是否需要花费同样多的时间两个对象在同一扇区（或相邻扇区）中，因为它检查它们是否发生碰撞。

我已经看到了与此帖子类似的问题，但它并不能完全满足我的问题。从中我确实了解到时间管理系统很有用。我最终会尝试实现它，但由于我对编程还很陌生，我想在深入研究更高级的设计之前优化碰撞检查本身。

那么，我有什么方法可以有效地优化我当前的碰撞检查，还是我有办法开始？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:29:56.313

空间分区仅在您以不需要您以某种方式将每个对象与每个对象进行比较的方式实现它时才会对您有所帮助。

在您的空间划分网格中，您希望每个网格单元在其中具有某种对象成员列表，并且每个对象都知道它在哪个单元中。然后您只需要在一个对象和所有对象之间进行比较该单元格内和紧邻单元格内的其他对象（因为对象可能重叠边界）。缺点是您现在需要保持所有这些状态的更新。

我强烈推荐[Real-Time Collision Detection](https://rads.stackoverflow.com/amzn/click/com/1558607323)一书，除了其他 CD 主题外，它还深入介绍了几种不同的广泛阶段分区方案及其相对优势和劣势。除了统一网格之外，还有分层网格、四叉树、扫描和修剪以及其他可能更适合您的技术（[扫描和修剪](http://jitter-physics.com/wordpress/?tag=sweep-and-prune)可能特别有用）。

# c# - 如何枚举类声明的所有事件？

> ID：10375641
> 
> 赞同：2
> 
> 时间：2012-04-29T20:19:34.490
> 
> 标签：c#, reflection

我希望能够枚举一个类实现的所有事件。

```
class A
{
    public delegate void X();
    public event X EventA;
}

class B:A
{
    public event X EventB;
} 
```

我应该怎么做才能`typeof(B)`得到一份清单，其中包括`EventB`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-04-29T20:22:50.843

嗯，有`Type.GetEvents`方法，你应该使用它。如果您只想要在 B 声明的事件，而不是从 A 继承，`DeclaredOnly`则作为绑定标志之一传递。

# c# - 我怎样才能只防止不包含数字的html标签，那么我怎样才能允许数字

> ID：10375644
> 
> 赞同：0
> 
> 时间：2012-04-29T20:20:01.463
> 
> 标签：c#, asp.net, html

我设置了验证表达式 ValidationExpression="<(.|\n)*?>" 但它不允许数字我该如何解决？

```
<asp:RegularExpressionValidator ID="RegularExpressionValidator1" runat="server" ControlToValidate="TextBox1" ErrorMessage="RegularExpressionValidator" ValidationExpression="^[a-zA-Z''-'\s]{1,40}$"></asp:RegularExpressionValidator><br /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:28:49.970

而不是`(.|\n)*`，使用`\D*`.

# c# - ASP.NET MVC 3：为什么它认为我的类是复杂类型？

> ID：10375645
> 
> 赞同：2
> 
> 时间：2012-04-29T20:20:02.050
> 
> 标签：c#, asp.net-mvc-3, entity-framework, ef-code-first

使用 Code First EF 构建我的项目。

我有一个`User`类，它的属性之一是`List<FriendGroup>`（其中 a`FriendGroup`基本上只是`User`s 的集合，有点像 Google+ 中的“圈子”）。 `FriendGroup`在不同的文件中定义为 POCO 并且......事情就是这样......我从来没有在任何地方说过它是一个`ComplexType`.

但是当我尝试运行我的应用程序时，我得到了异常，

```
System.InvalidOperationException: The type 'FriendGroup' has already been configured as an entity type. It cannot be reconfigured as a complex type. 
```

我将不胜感激任何人能够提供的任何见解，说明为什么 ASP.NET 决定我的课程是`ComplexType`. 提前致谢！

ETA：我的模型中的相关位：

```
namespace Clade.Models
{
    public class User
    {
        [Key]
        public int userID { get; private set; }
        [Required]
        public Profile profile { get; set; }
        [Required]
        public string userName { get; set; }
        ...
        public List<FriendGroup> friendGroups { get; set; }
        ...
        public List<AchievementEarned> achievementsEarned { get; set; }
    }
}

namespace Clade.Models
{
    public class FriendGroup
    {
        [Key]
        [HiddenInput(DisplayValue = false)]
        public int friendGroupID { get; private set; }
        [HiddenInput(DisplayValue = false)]
        public int userID { get; set; }
        [Required]
        public string friendGroupName { get; set; }
        public Privacy defaultPrivacy { get; set; }
        [Timestamp]
        public DateTime dateCreated { get; set; }
        public List<User> usersInFG { get; set; }

        public void UpdateMe(FriendGroup editedFG)
        {
            friendGroupName = editedFG.friendGroupName;
            defaultPrivacy = editedFG.defaultPrivacy;
            usersInFG = editedFG.usersInFG;
        }
    }
} 
```

还有 EF 代码、存储库等，但他们都不知道任何 POCO 的内部运作。我在这里看到的唯一*可能*有问题的是`User`具有 a`List<FriendGroup>`和`FriendGroup`具有`List<User>`. 但是没有任何东西被注释`FriendGroup`为`ComplexType`.

ETA (2): `Profile`也只是一个 POCO:

```
namespace Clade.Models
{
    public class Profile
    {
        [Key]
        public int profileID { get; private set; }
        public User user { get; set; }
        public DiscussionGroup dg { get; set; }
        public string location { get; set; }
        public Privacy locationPrivacy { get; set; }
        public string aboutMe { get; set; }
        public Privacy aboutMePrivacy { get; set; }
        ...
    }
} 
```

`User`确实有`List`几个带`ComplexType`注释的对象，但 EF 并没有抱怨这些。

```
namespace Clade.Models
{
    [ComplexType]
    public class AchievementEarned
    {
        public Achievement achievement { get; set; }
        [Timestamp]
        public DateTime dateEarned { get; set; }
    }
} 
```

ETA (3)：这是`UserRepository`发生错误的方法。它发生在以 开头的行上`var results`。

```
 public bool Add(User newUser)
    {
        bool rv = false;

        //check to make sure no one else has the same username first
        var results = from user in Users
                      where user.userName.Equals(newUser.userName)
                      select user;
        if (results.Count() == 0)
        {
            this.context.Users.Add(newUser);
            this.Commit();
            rv = true;
        }

        return rv;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:15:28.453

您可以尝试以下操作：使用 int 属性而不是 Enum 或尝试使用 PM> Install-Package EntityFramework -Pre 更新到 EF 5 beta 2，这样可以更好地支持枚举

# bash - 如何让命令每隔一段时间执行一次？

> ID：10375649
> 
> 赞同：0
> 
> 时间：2012-04-29T20:20:31.800
> 
> 标签：bash, networking, intervals

我的电脑真的坏了，我需要`su -c "/etc/init.d/networking restart"`大约每小时运行一次。我该怎么做？我在 2011 年 11 月运行 Ubuntu Server，并且对 bash 很满意。如果进程是一个while循环，我还有~4个未使用的tty。

先感谢您，

我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:24:10.727

使用 Cron。那是一个基于时间的作业调度程序。[http://en.wikipedia.org/wiki/Cron](http://en.wikipedia.org/wiki/Cron)

# javascript - JSLint 的“容忍愚蠢”

> ID：10375650
> 
> 赞同：43
> 
> 时间：2012-04-29T20:20:34.227
> 
> 标签：javascript, jslint

有人知道 JSLint 的“容忍愚蠢”选项是什么吗？它禁用了哪些警告系列？

我发现了一些对 Node.js 和“同步”方法的引用（包括 Crockford 的评论“它的名字非常好”），但没有明确的答案。

谢谢。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-04-29T20:25:27.033

根据[文档](http://www.jslint.com/lint.html)，它这样做：

> 如果可以使用阻塞 ('...Sync') 方法，则为 true。

显然 Node Sync 方法是阻塞的，Crockford 讨厌 JS 中的阻塞操作。

注意：有很多 JSLint 挑剔的东西可能更多的是品味问题而不是代码质量问题。众所周知，Crockford 对某些约定相当固执，并且在 JSLint 中没有将这些约定与实际有害的代码区分开来。这就是为什么有像[JSHint](http://www.jshint.com/about/)这样的工具往往更能容忍这些品味问题的原因。

# powershell - 为什么这行不通？运行命令+变量

> ID：10375651
> 
> 赞同：-1
> 
> 时间：2012-04-29T20:20:43.760
> 
> 标签：powershell

这不起作用：

```
$server = "server";
$cmd = "hostname";
C:\Users\ss\Documents\Scripts\PSTools\PsExec.exe \\$server $cmd; 
```

但这将：

```
$server = "server";
C:\Users\ss\Documents\Scripts\PSTools\PsExec.exe \\$server hostname; 
```

为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:48:09.097

尝试将 & 附加到命令的前面：

& C:\Users\ss\Documents\Scripts\PSTools\PsExec.exe \$server $cmd;

# javascript - 在 Jquery 中围绕图像单击事件的链接

> ID：10375653
> 
> 赞同：3
> 
> 时间：2012-04-29T20:20:49.310
> 
> 标签：javascript, jquery, html, click, jquery-events

我需要一个 jQuery 的 click 事件，这样当有人点击我网站上的图像时，它将运行 click 事件，然后将它们从“a”标签发送到目标链接。我该怎么做？我假设点击事件会在链接上？也许不吧？这是链接和图片

```
<a href="go/to/here" class="link_for_image">
   <img alt="Image!" class="dynamic" width="200" height="200" src="image/path/here">
</a> 
```

编辑

在将用户发送到链接之前，我需要做一些 Javascript。对困惑感到抱歉。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T20:23:58.670

你不需要这样做。由于游览图像被包裹在锚标签内，当您点击图片时，将被视为点击锚标签。

**编辑**：根据您的评论，您想在实际链接工作之前做一些 javascript

```
$(function(){
 $(".link_for_image").click(function(e){
   e.preventDefault();
   var item=$(this);
   //Here you can do what you want on the clik

   window.location.href=item.attr("href");
 });    
}); 
```

# node.js - nginx proxy pass Node, SSL?

> ID：10375659
> 
> 赞同：28
> 
> 时间：2012-04-29T20:21:16.240
> 
> 标签：node.js, nginx, reverse-proxy

my nginx server is actually proxying my node backend (which listens on port 3000) with a simple:

```
location /api/ {
proxy_pass http://upstream_1;
} 
```

Where upstream_1 is my node cluster defined in nginx.conf (on port 3000).

I'm gonna have to add SSL over http connections, so I have the following question: do I only need to configure nginx to enable ssl? And it will automatically "uncrypt" the request and pass it uncrypted to Node which will be able to handle it normally? Or do I need to configure Nodejs to support ssl as well?

* * *

## 回答 #1

> 赞同：76
> 
> 时间：2012-04-29T20:33:40.157

If you're using nginx to handle SSL, then your node server will just be using http.

```
 upstream nodejs { 
          server 127.0.0.1:4545 max_fails=0; 
    } 

   server { 
      listen 443; 
      ssl    on; 
      ssl_certificate    newlocalhost.crt; 
      ssl_certificate_key     newlocalhost.key; 
      server_name nodejs.newlocalhost.com; 

      add_header Strict-Transport-Security max-age=500; 

      location / { 
        proxy_pass  http://nodejs; 
        proxy_redirect off; 
        proxy_set_header Host $host ; 
        proxy_set_header X-Real-IP $remote_addr ; 
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for ; 
        proxy_set_header X-Forwarded-Proto https; 
      } 
   } 
```

# objective-c - 获取 UI 对象内宽度和高度的像素数？

> ID：10375663
> 
> 赞同：0
> 
> 时间：2012-04-29T20:21:30.063
> 
> 标签：objective-c, ios, object, pixels

目前我做的事情看起来有点模糊，因为我正在处理我的 UI 对象的点，但我想要做的是获取 UI 对象（在我的情况下是 UIImageView）的宽度和高度（以像素为单位）。

这可能吗？我查看了文档，但没有看到任何看起来相关的内容。

有人可以帮忙吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:41:01.713

你试过这个吗？

`[object frame].size.height`

`[object frame].size.width`

我很确定任何具有视觉表示的东西都会有一个 frame 属性来指示它的位置。当然，`origin`对象框架的 是相对于其容器的，但`size`应该始终可用。

编辑/更新：

我误读了最初的问题，它也想转换点-> 像素。以下是确保您正确理解的方法：

```
float scale;
if ([[UIScreen mainScreen] respondsToSelector:@selector(scale)]) {
    // This message was implemented in iOS 4.0
    scale = [[UIScreen mainScreen] scale];
} else {
    // Anything that is running < 4.0 doesn't have a Retina display
    scale = 1.0;
} 
```

然后，将高度和宽度值乘以比例以获得实际像素数。

# javascript - 如何使出现在点击上的文本对 SEO 可见？

> ID：10375665
> 
> 赞同：0
> 
> 时间：2012-04-29T20:22:03.693
> 
> 标签：javascript, html, seo, onclick

我有一组缩略图，每当用户单击缩略图时，我都想显示相应的描述性文本。

我打算用一个 div 来做，它的 innerhtml 将根据 onclicked 缩略图（使用 javascript）而改变。所有的描述性文字对机器人都是不可见的（seo-wise）吗？

任何更好的想法如何实现它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:25:30.170

对于 SEO，如果您希望搜索引擎看到的所有文本都在您的实际 HTML 标记中，这是最简单的。与其更改一个 div 上的 innerHTML，不如将多个 div 彼此相邻放置，然后隐藏/显示正确的。然后所有文本都将在标记中。

缩略图描述也属于`alt`图像的属性，搜索引擎会在那里寻找它们。我不确切知道您的应用程序是如何工作的，以了解这是否足够，但您可能至少还想将描述性文本放在那里。

# javascript - 有没有办法确保 target = _blank 链接在前台打开？

> ID：10375668
> 
> 赞同：0
> 
> 时间：2012-04-29T20:22:31.333
> 
> 标签：javascript, html

对于某些浏览器（取决于设置），带有 target = "_blank" 的链接似乎在前台打开，但对于许多其他浏览器来说，它似乎在后台打开。

在我的情况下，在前台打开是用户点击链接时的意图，所以如果有办法确保这一点，那就太好了。有没有办法做到这一点？谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:30:55.747

无法确保这些链接在前台打开。这是浏览器安排的，你无法改变它。

但是，您可以通过省略目标属性在同一窗口中打开链接，这将确保单击链接的人立即看到该页面。在某种程度上，这也“更好”，因为它将在新窗口中打开链接的选择留给了用户本身。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:51:36.333

您可以尝试使用 window.focus() 将新窗口置于最前面。您可以使用 jquery 在打开的文档上执行此操作，其中：

```
$(function() {
    window.focus();
}); 
```

或从原始文件：

```
var newWindow = window.open(url);
window.setTimeout(function() { newWindow.focus(); }, 1000); 
```

需要 setTimeout 来为浏览器实际创建窗口留出时间。可能有更清洁的方法来实现这一点，但 setTimeout 应该这样做。

# objective-c - 使用浮点变量构建字符串

> ID：10375670
> 
> 赞同：0
> 
> 时间：2012-04-29T20:22:49.980
> 
> 标签：objective-c, ios, cocoa-touch, nsstring, string-formatting

如何构建由和`NSString`变量组成的变量？`string``float`

我假设我需要将浮点数转换为字符串，但是如果不创建大量凌乱和丑陋的代码，我就看不到这是如何完成的。

我想构建这样的东西：`String`+ `Float`+ `String`+`Float`

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:27:44.880

这不是 Objective C 的工作方式。在 Java 中，您将使用：

```
String yourString = string1 + " " + float1 + " " + string2 + " " + float2; 
```

你不能在 Objective C 中做同样的事情。要达到同样的效果，你需要：

```
NSString* yourString = [NSString stringWithFormat:@"%@ %f %@ %f", string1, float1, string2, float2]; 
```

这将导致等效于 Java 语句。`%@`表示要将对象格式化为字符串，并`%f`表示浮点值。

`%`当格式化 NSString 中的浮点数时，您可以通过在和之间放置一个值来指定要截断的小数位数`f`。例如，将第一个浮点数舍入到小数点后 2 位，将第二个浮点数舍入到小数点后 5 位：

```
NSString* yourString = [NSString stringWithFormat:@"%@ %.2f %@ %.5f", string1, float1, string2, float2]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T20:28:00.397

尝试：

```
NSString *str = [NSString stringWithFormat:@"Some text %f some more text %f", floatVar, anotherFloat]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T20:37:25.163

要回答所问的问题：

认为：

```
NSString *str1 = @"string one";
NSString *str2 = @"string two";

float f1 = 1.0;
float f2 = 2.0;

NSString *answer = [NSString stringWithFormat:@"%@: %f. %@: %f.", str1, f1, str2, f2];
NSLog(@"%@", answer); // This will print "string one: 1.000000\. string two: 2.000000." 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T20:28:14.350

```
float sampleFloatVariable = 50.0;

NSString *floatintoText = [NSString stringwithFormat:@"%f",sampleFloatVariable];

NSLog(@" float text %@",floatintoText); 
```

# ruby-on-rails-3 - 从其他控制器访问部分布局中的变量

> ID：10375672
> 
> 赞同：0
> 
> 时间：2012-04-29T20:22:55.803
> 
> 标签：ruby-on-rails-3, variables, partial-views, view-helpers

今天我想在我的`shared/menu`部分中使用一些变量。我知道我应该在`application_controller`某个辅助方法（或类似的方法）中放置一些东西，但它对我不起作用。这是我的临时解决方案（`shared/_menu.html.haml`）：

```
- @pagecontents = Pagecontent.all
- @pagecontents.each do |pc|
  %ul
    %li
      = link_to pc.title, pc 
```

我不想`@pagecontents`直接在我的视图中定义变量！：/我的问题是在`@pagecontent`某处添加变量到`application_controller`文件但是当我尝试例如：

```
def pagecontentforpartial
  @pagecontents = Pagecontent.all
end 
```

然后尝试在我的局部视图中访问这个变量我得到一个错误，这个方法是`nil`（但已经有很多记录了！）有人可以解释我如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:17:55.273

您可以使用`render`方法直接将对象传递给您的部分

这是你的`shared/_menu.html.haml`：

```
- pagecontents.each do |pc|
%ul
  %li
    = link_to pc.title, pc 
```

而当你需要展示它的时候，你可以在你的视图中使用这个方法

```
render 'shared/menu', pagecontents: @pagecontents 
```

`@pagecontents`来自控制器，当然

# iphone - 同步 NSURLConnection 回调

> ID：10375673
> 
> 赞同：0
> 
> 时间：2012-04-29T20:23:06.273
> 
> 标签：iphone, nsurlconnection, objective-c-blocks

我有一个 nsurlconnection，我将委托设置为 self。我有四种方法确实收到、完成、失败和另一种。我的问题是如何设置它，以便我包括完成后需要做的事情。这是必需的，因为我在整个班级都有不同的 nsurlconnection 请求，并且有独特的响应。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:23:14.170

你的问题不清楚。首先，听起来您不是在`NSURLConnection`同步使用，所以您的问题标题似乎是错误的。然后，如果您想在连接完成时执行某些操作，请将其放入 did-finish 和 did-fail 方法中。

如果要区分多个连接，请使用传递给委托方法的连接参数。您可以做的一件事是拥有一本其键为`[NSValue valueWithNonretainedObject:theConnection]`. 该值可以是任何有用的东西，包括另一个字典。

或者，您可以使用单独的对象来管理每个连接并成为每个连接的代表。如果每个连接都有足够的特定性，您必须跟踪有关它的数据，那么也许它需要一个单独的对象来管理事物。

# .htaccess - htaccess 重定向，带有空格、引号和 é

> ID：10375676
> 
> 赞同：2
> 
> 时间：2012-04-29T20:23:21.837
> 
> 标签：.htaccess, redirect, space, quote, diacritics

我有以下地址： `le%20coin%20de%20l’auteur%20-%20biographie%20de%20Cathérine%20Boullery.html` 其中包括空格、引号和带重音符号的字母。

我想使用类似的东西： `redirect 301 /this-above-url http://telecharger-ebook-roman-fantasy-aila-pdf-fr.fr//le-coin-de-l-auteur-biographie-de-catherine-boullery.html`

我有几页带有这些奇怪字符的页面要重定向并且没有经验`htaccess`，但我明白了，试着理解和复制......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-05-01T18:40:23.803

您应该在 url-path 周围使用引号，并使用非编码字符。类似于以下内容

```
redirect 301 "le coin de l’auteur - biographie de Cathérine Boullery.html" http://telecharger-ebook-roman-fantasy-aila-pdf-fr.fr//le-coin-de-l-auteur-biographie-de-catherine-boullery.html 
```

但是，这在我的测试服务器上不起作用。

起作用的是使用 mod_rewrite。

```
RewriteEngine On
RewriteBase /

RewriteRule "^le coin de l’auteur - biographie de Cathérine Boullery.html$" http://telecharger-ebook-roman-fantasy-aila-pdf-fr.fr//le-coin-de-l-auteur-biographie-de-catherine-boullery.html [R=302,L] 
```

# java - 将 while 循环内的变量值显示到 TextArea

> ID：10375678
> 
> 赞同：-2
> 
> 时间：2012-04-29T20:23:39.720
> 
> 标签：java

我正在尝试将语音转换为文本并将其显示在 AWT textArea 上。但是语音到文本转换器功能的输出是在一个while循环内生成的，我无法在textArea上显示它。我得到一个空指针异常；请有人帮忙。

```
public class Speechrec  {

    private static TextArea textArea;
    String resultText;
    private String dr;

    public void recognizer(String[] args) {

        try {
            URL url;
            if (args.length > 0) {
                url = new File(args[0]).toURI().toURL();
            } 
            else {
                url = Speechrec.class.getResource("speechrec.config.xml");
            }    
            System.out.println("Loading...");    
            ConfigurationManager cm = new ConfigurationManager(url);    
            Recognizer recognizer = (Recognizer) cm.lookup("recognizer");
            Microphone microphone = (Microphone) cm.lookup("microphone");    
            /* allocate the resource necessary for the recognizer */
            recognizer.allocate();    
            /* the microphone will keep recording until the program exits */
            if (microphone.startRecording()) {    
            System.out.println("Say: some greetings");
            while (true) {
                System.out.println("Start speaking. Press Ctrl-C to quit.\n");

                Result result = recognizer.recognize();

                if (result != null) {
                    String resultText = result.getBestFinalResultNoFiller();            
                    textArea.setText(resultText);
                } 
                else {
                    System.out.println("I can't hear what you said.\n");
                }
            }
            } 
            else {
               System.out.println("Cannot start microphone.");
               recognizer.deallocate();
               System.exit(1);
            }
        } 
        catch (Exception) {                
            // exception handling
        }
    }        

public static void main( final String[] args) throws IOException {
    Speechrec sp1=new Speechrec();      
    Frame frame=new Frame("speech to sign language converter");
    TextArea textarea=new TextArea (05,30);     
    Button button = new Button("Start speaking"); 
    // ...        
    frame.add(button,BorderLayout.SOUTH); 
    // ...
    frame.setLayout(new FlowLayout(FlowLayout.TRAILING,50,15));
    frame.setSize(500,400); 
    frame.setVisible(true);

    button.addActionListener(new ActionListener() {           
         public void actionPerformed(ActionEvent e1) {      
             Speechrec sp=new Speechrec();
         sp.recognizer(args);
          }});
    }    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:28:27.283

将您的文本区域声明为类中的私有静态字段。然后您可以轻松访问它`textArea.setText("something");`

```
private static TextArea textArea;

public static void main( final String[] args) throws IOException{
    Speechrec sp1 = new Speechrec();
    textArea = new TextArea(sp1.dr,05,30);
    Button button = new Button("Start speaking");
    // and so on...
}

while (true) {

        Result result = recognizer.recognize();

        if (result != null) {

            String resultText = result.getBestFinalResultNoFiller();

            dr = resultText;

            textArea.setText(resultText);

            // or:

            textArea.append(resultText);
        } 
} 
```

在下一步中，您应该将创建 UI 的所有代码移动到类的构造函数中。那将是一个更清洁的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-22T16:29:01.130

因为识别器会一直运行，直到您退出程序。如果要更新 textarea，则必须将更新代码设置在可以与 Gui 交互的线程中。例子。

```
 public void update(String s){
  SwingUtilities.invokeLater(new Runnable(){
         public void run(){
           textArea.append(s);
              }// end run
             });//end Runnable
              }// end method 
```

# cuda - 在 CUDA 设备代码中使用 std::vector

> ID：10375680
> 
> 赞同：46
> 
> 时间：2012-04-29T20:23:52.337
> 
> 标签：cuda

问题是：有没有办法在 Cuda 内核中使用类“向量”？当我尝试时，出现以下错误：

```
error : calling a host function("std::vector<int, std::allocator<int> > ::push_back") from a __device__/__global__ function not allowed 
```

那么有没有办法在全局部分使用向量？我最近尝试了以下方法：

1.  创建一个新的 Cuda 项目
2.  转到项目的属性
3.  打开 Cuda C/C++
4.  转到设备
5.  将“代码生成”中的值更改为该值：compute_20,sm_20

........之后，我可以在我的 Cuda 内核中使用 printf 标准库函数。

`vector`有没有办法以内核代码支持 printf 的方式使用标准库类？这是在内核代码中使用 printf 的示例：

```
// this code only to count the 3s in an array using Cuda
//private_count is an array to hold every thread's result separately 

__global__ void countKernel(int *a, int length, int* private_count) 
{
    printf("%d\n",threadIdx.x);  //it's print the thread id and it's working

    // vector<int> y;
    //y.push_back(0); is there a possibility to do this?

    unsigned int offset  = threadIdx.x * length;
    int i = offset;
    for( ; i < offset + length; i++)
    {
        if(a[i] == 3)
        {
            private_count[threadIdx.x]++;
            printf("%d ",a[i]);
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2012-04-29T20:47:34.070

你不能在 CUDA 中使用 STL，但你可以使用[Thrust 库](http://developer.nvidia.com/thrust)来做你想做的事。否则只需将向量的内容复制到设备并对其进行正常操作即可。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-05-03T16:02:31.687

在 cuda 库推力中，可以使用`thrust::device_vector<classT`> 来定义设备上的向量，主机 STL 向量和设备向量之间的数据传输非常简单。你可以参考这个有用的链接：[http](http://docs.nvidia.com/cuda/thrust/index.html) ://docs.nvidia.com/cuda/thrust/index.html来找到一些有用的例子。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-04-30T12:58:53.663

you can't use `std::vector` in device code, you should use array instead.

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-08-14T09:23:34.527

我认为您可以自己实现设备向量，因为 CUDA 支持设备代码中的动态内存分配。还支持运算符 new/delete。这是 CUDA 中设备向量的一个非常简单的原型，但它确实有效。它没有经过充分的测试。

```
template<typename T>
class LocalVector
{
private:
    T* m_begin;
    T* m_end;

    size_t capacity;
    size_t length;
    __device__ void expand() {
        capacity *= 2;
        size_t tempLength = (m_end - m_begin);
        T* tempBegin = new T[capacity];

        memcpy(tempBegin, m_begin, tempLength * sizeof(T));
        delete[] m_begin;
        m_begin = tempBegin;
        m_end = m_begin + tempLength;
        length = static_cast<size_t>(m_end - m_begin);
    }
public:
    __device__  explicit LocalVector() : length(0), capacity(16) {
        m_begin = new T[capacity];
        m_end = m_begin;
    }
    __device__ T& operator[] (unsigned int index) {
        return *(m_begin + index);//*(begin+index)
    }
    __device__ T* begin() {
        return m_begin;
    }
    __device__ T* end() {
        return m_end;
    }
    __device__ ~LocalVector()
    {
        delete[] m_begin;
        m_begin = nullptr;
    }

    __device__ void add(T t) {

        if ((m_end - m_begin) >= capacity) {
            expand();
        }

        new (m_end) T(t);
        m_end++;
        length++;
    }
    __device__ T pop() {
        T endElement = (*m_end);
        delete m_end;
        m_end--;
        return endElement;
    }

    __device__ size_t getSize() {
        return length;
    }
}; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-02-18T17:39:45.170

您不能`std::vector`在设备端代码中使用。为什么？

### 它没有标记为允许这样做

“正式”的原因是，要在设备端函数或内核中使用代码，代码本身必须在`__device__`函数中；而标准库中的代码，包括，`std::vector`不是。（`constexpr`代码有一个例外；在 C++20 中，`std::vector`确实有`constexpr`方法，但 CUDA 目前不支持 C++20，此外，这`constexpr`实际上是有限的。）

### 你可能真的不想

当`std::vector`需要为您创建或添加到的向量增加存储空间时，该类使用分配器来获取更多内存。默认情况下（即，如果您使用`std::vector<T>`一些`T`） - 该分配是在[堆上](https://stackoverflow.com/questions/79923/what-and-where-are-the-stack-and-heap)。虽然这可以适应 GPU - 如果每个“CUDA 线程”动态分配自己的内存，它会非常慢，而且速度非常慢。

#现在，你可以说“但我不想分配内存，我只想从向量中读取！” - 好吧，在这种情况下，您本身不需要向量。只需将数据复制到设备上的某个缓冲区，然后传递一个指针和一个大小，或者使用支持 CUDA 的跨度，例如在[`cuda-kat`](https://github.com/eyalroz/cuda-kat/blob/master/src/kat/containers/span.hpp). 另一种选择，虽然有点“重”，是使用[NVIDIA推力库]的[3](https://nvidia.github.io/thrust/) “设备向量”类。在引擎盖下，它与标准库向量完全不同。

# java - java ImageObserver 停止更新动画 gif

> ID：10375686
> 
> 赞同：4
> 
> 时间：2012-04-29T20:24:59.687
> 
> 标签：java, graphics2d, animated-gif

textPane 包含文本和动画 gif 图像。imageUpdate 用于更新每个新的 gif 帧。当我从 textPane 中删除图像时，imageupdate 会继续更新它。我怎样才能阻止它？如何使 imageupdate 仅更新获得新框架而不是整个 textPane 的图像？imageupdate 始终显示 x = 0 和 y = 0，尽管图像位于其他坐标中并且我无法获得特定的图像矩形。
图片 001.gif [http://plasmon.rghost.ru/37834058.image](http://plasmon.rghost.ru/37834058.image)
图片 000.gif [http://plasmon.rghost.ru/37834053.image](http://plasmon.rghost.ru/37834053.image)

```
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.*;
import javax.swing.text.html.HTMLEditorKit;
import javax.swing.text.html.StyleSheet;
import javax.swing.*;
import java.awt.BorderLayout;
import javax.swing.text.*;

public class HighlightExample {
    public static JTextPane textPane;
    public static HTMLEditorKit kit = new HTMLEditorKit();
    public static char c = (char)(int)10022007;
    public static void main(String[] args) {
        final JTextField tf = new JTextField();
        JFrame f = new JFrame("Highlight example");
        textPane = new JTextPane(){
            @Override
            public void paintComponent(Graphics g) {
                Graphics2D graphics2d = (Graphics2D) g;
                graphics2d.setRenderingHint(RenderingHints.KEY_ANTIALIASING,
                RenderingHints.VALUE_ANTIALIAS_ON);
                try {
                    Document d = (this).getDocument();
                    String content = d.getText(0, d.getLength()).toLowerCase();
                    int lastIndex = 0;
                    super.paintComponent(g);
                    Image[] image=new Image[] {Toolkit.getDefaultToolkit().getImage("000.gif"), Toolkit.getDefaultToolkit().getImage("001.gif")};
                    while ((lastIndex = content.indexOf(c, lastIndex)) != -1) {
                        g.drawImage(image[Integer.parseInt(content.substring(lastIndex+1, lastIndex+4))],(int)(this).modelToView(lastIndex).getX(),(int)(this).modelToView(lastIndex).getY(),this); 
                        ++lastIndex;
                    }

                } catch (BadLocationException e) {}
            }
            public boolean imageUpdate( Image img, int flags, int x, int y, int w, int h ) 
            {
                System.out.println("Image update:" + img + " flags="+flags+" x="+x+" y="+y+" w="+w+" h="+h);
                repaint(); //repaint(x, y, w, h);
                return true;
            }
        };
        tf.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent evt) {
                textPane.setText(tf.getText().trim());
            }
        });
        textPane.setEditorKit(kit);
        StyleSheet styleSheet = kit.getStyleSheet();
        styleSheet.addRule("sm {color: red;}");
        JPanel pane = new JPanel();
        pane.setLayout(new BorderLayout());
        pane.add(tf, "Center");
        f.getContentPane().add(pane, "South");
        f.getContentPane().add(new JScrollPane(textPane), "Center");
        textPane.setEditable(false);
        textPane.setContentType("text/html");
        textPane.setText("ab<span style=\"font-size: 0px;color: white;\">"+c+"001</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;пїЅdefghijkl bпїЅlmnop12345678<span style=\"font-size: 0px;color: white;\">"+c+"000</span>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;;)<br><br><br><br><br><br><br><br>");

        f.setSize(400, 400);
        f.setVisible(true);
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-05-18T13:01:53.853

1.  不是每次重绘时只加载一次图像
2.  为每张图片保存一个列表，您在最后一次绘制它的位置`paint`
3.  在`imageUpdate`使用给定`img`的选择您`paintComponent`为该图像填充的坐标列表，并且只为该坐标重新绘制区域

注意：文本中当前未使用的图像仍会调用`imageUpdate`，但会自动跳过，因为它们的坐标列表应该为空

# grep - 如何grep隐藏文件？

> ID：10375689
> 
> 赞同：112
> 
> 时间：2012-04-29T20:25:12.863
> 
> 标签：grep, hidden-files, dotfiles

我正在搜索 Git 存储库并希望包含该`.git`文件夹。

`grep`如果我运行，则不包括此文件夹

```
grep -r search * 
```

包含此文件夹的 grep 命令是什么？

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-04-29T20:28:21.887

*请参阅本文末尾的解决方案，作为您正在做的更好的选择。*

您可以显式包含隐藏文件（目录也是文件）。

```
grep -r search * .[^.]* 
```

将`*`匹配除隐藏文件之外的所有文件，并且`.[^.]*`仅匹配没有`..`. 但是，如果给定目录中没有非隐藏文件或没有隐藏文件，这将失败。您当然可以显式添加`.git`而不是`.*`.

但是，如果您只是想在给定目录中搜​​索，请执行以下操作：

```
grep -r search . 
```

将`.`匹配当前路径，该路径将包括非隐藏文件和隐藏文件。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2016-10-31T21:54:10.680

我刚刚遇到了这个问题，根据@bitmask的回答，这是我的简单修改，以避免@sehe指出的问题：

```
grep -r search_string * .[^.]* 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-10T13:45:24.827

也许您更愿意将“grep”与“find”命令结合使用以获得完整的解决方案，例如：

```
find . -exec grep -Hn search {} \; 
```

此命令将在隐藏文件或目录中搜索字符串“search”并列出与此输出格式重合的所有文件：

文件路径：行号：重合行

```
./foo/bar:42:search line
./foo/.bar:42:search line
./.foo/bar:42:search line
./.foo/.bar:42:search line 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-02-13T16:49:05.900

您可能想要使用这种方法，假设您正在搜索当前目录（否则将 . 替换为所需目录）：

```
find . -type f | xargs grep search 
```

或者如果您只想在顶层搜索（如果您正在尝试这些，测试起来会更快）：

```
find . -type f -maxdepth 1 | xargs grep search 
```

更新：我修改了示例以回应 Scott 的评论。我还添加了“-type f”。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-07-25T00:35:30.913

为了防止匹配`.`并且`..`哪些不是隐藏文件，您可以在此示例中使用`grep`with `ls -A`like：

```
ls -A | grep "^\." 
```

`^\.`声明第一个字符必须是`.`

`-A`or`--almost-all`选项排除结果，`.`因此`..`仅匹配隐藏的文件和目录。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-16T05:06:46.570

要仅在某个文件夹中查找，您可以使用：

```
ls -al | grep " \." 
```

这是一个非常简单的命令来列出和管道到 grep。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2015-10-12T07:05:57.537

所有其他答案都更好。这个可能很容易记住：

```
find . -type f | xargs grep search 
```

它只查找文件（包括隐藏文件）并 greps 每个文件。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2019-08-07T00:57:05.973

除了泰勒的建议，这里是递归地grep所有文件和文件夹的命令，包括隐藏文件

```
find . -name "*.*" -exec grep -li 'search' {} \; 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-02-08T17:41:07.547

仅在您当前位置的所有隐藏文件和目录中搜索：

```
find . -name ".*" -exec grep -rs search {} \; 
```

仅所有隐藏文件：

```
find . -name ".*" -type f -exec grep -s search {} \; 
```

仅所有隐藏目录：

```
find . -name ".*" -type d -exec grep -rs search {} \; 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2020-07-16T10:22:55.347

您还可以搜索特定类型的隐藏文件，例如隐藏目录文件：

```
grep -r --include=*.directory "search-string" 
```

这可能比其他一些选项更有效。其他有效的选项可能太慢了。

# html - 我可以添加指向标题的链接吗？

> ID：10375690
> 
> 赞同：10
> 
> 时间：2012-04-29T20:25:19.713
> 
> 标签：html

我可以在 HTML 中添加指向标题的链接吗？像这样的东西

```
<h2 href="/ingredients">illness</h2> 
```

不知何故，它似​​乎只适用于简单的文本。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-29T20:26:41.823

（几乎）所有元素都可能包含其他元素。所以以下是可能的：

```
<h2><a href="/ingredients">Illness</a></h2> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-04-29T20:27:54.773

您需要在`a`标签内标记锚`h2`标签。像这样的东西：

```
<h2><a href="/ingredients">illness</a></h2> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T23:28:22.480

有时。

如果您无法编辑目标页面（例如，根据其他答案添加锚点），您可能不会不走运。

例如，没有什么像

`href="https://www.hospitalsafetygrade.org/h/ucsf-medical-center-moffitt-long-hospitals#Sepsis infection after surgery"`

将打开该页面并显示带有标题的部分

`<h3>Sepsis infection after surgery</h3>`

但是，有一个新标准，滚动到文本片段，请参阅[https://github.com/WICG/scroll-to-text-fragment](https://github.com/WICG/scroll-to-text-fragment)，通常可以实现此目的。例如，

[https://www.hospitalsafetygrade.org/h/ucsf-medical-center-moffitt-long-hospitals#:~:text=MRSA%20infection](https://www.hospitalsafetygrade.org/h/ucsf-medical-center-moffitt-long-hospitals#:%7E:text=MRSA%20infection) 有效！

（但 [https://www.hospitalsafetygrade.org/h/ucsf-medical-center-moffitt-long-hospitals#:~:text=Sepsis%20infection%20after%20surgery](https://www.hospitalsafetygrade.org/h/ucsf-medical-center-moffitt-long-hospitals#:%7E:text=Sepsis%20infection%20after%20surgery) 不起作用。）

要了解支持的广泛程度，请参阅[https://wpt.fyi/results/scroll-to-text-fragment?label=experimental&label=master&aligned](https://wpt.fyi/results/scroll-to-text-fragment?label=experimental&label=master&aligned)。

# asp.net - 将按钮添加到gridview

> ID：10375695
> 
> 赞同：1
> 
> 时间：2012-04-29T20:26:13.273
> 
> 标签：asp.net, c#-4.0, gridview

我想在我的gridview 中向我的数据库表中添加一个更新按钮。我添加了一个模板字段，但我不知道如何在其上添加按钮。

我正在使用 asp.net 4.0。在 Update 方法中，它只会更改`kitap_yeri`单击按钮时调用的 1 列。怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T08:13:48.260

在您的 aspx 文件中添加以下内容：

```
 <asp:TemplateField>
                    <ItemTemplate>
                      <asp:CheckBox ID="Button1" OnClick="Button1_Click"
                      AutoPostBack="true" runat="server"/>                        
                   </ItemTemplate>
                   <ItemStyle Width="80px" />
                 </asp:TemplateField> 
```

在您的 .cs 文件中添加以下内容：

```
 protected void Button1_Click(object sender, EventArgs e)
{
    // ...Code...
} 
```

# graph - 在 Neo4j 中描述多级关系的 Cypher 查询？

> ID：10375697
> 
> 赞同：2
> 
> 时间：2012-04-29T20:26:14.570
> 
> 标签：graph, neo4j, cypher

我正在开发一个小型附属结构，以更好地理解图形数据库的概念，同时学习 Neo4J 并看看它能给我带来什么。我已经使用 RDBMS 多年了，Cypher 相当粗糙。我正在尝试建立一个非常简单的会员系统：

附属乔已推荐玛丽、鲍勃和马克。所以，我创建了他们所有的节点并创建了“推荐”关系。现在玛丽指的是朱莉、杰西卡和琼。鲍勃指的是比利和巴克斯特。马克指的是迈克尔和马克思。他们的推荐人不断推荐人。

对于 Joe 的原始推荐人中的每个推荐人，Joe 赚取“一代”。他的第一代是玛丽、鲍勃和马克。他的第二代是朱莉、杰西卡、琼、比利、巴克斯特、迈克尔和马克思。

现在，通过 Cypher 查询，我怎样才能发现他的世代，当然，还能发现他们的号码？他们在树上的位置？我怎么知道他的第 3 代或第 4 代是谁，他们是谁？

脑子里乱七八糟的，希望大家帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T06:03:37.423

文尼，看看[http://tinyurl.com/7vryzwz](http://tinyurl.com/7vryzwz)，这就是你要找的，基本上

```
START referrer=node(1) 
MATCH path=referrer-[:referred*1..]->refferee 
RETURN referrer,refferee, length(path) as generation 
ORDER BY length(path) asc 
```

# macos - 从弹出按钮插入 Cocoa 核心数据项目关系

> ID：10375701
> 
> 赞同：0
> 
> 时间：2012-04-29T20:27:08.000
> 
> 标签：macos, cocoa, core-data, osx-snow-leopard

我有一个包含 2 个实体的核心数据：“CarEntity”和“PassengerEntity”。

现在，每个实体都有一个名为“名称”的属性。CarEntity 与称为“passengers”的PassengerEntity 具有一对多关系，而PassengerEntity 具有“inCar”的反向关系。

所以，我做了这个界面来插入一个新的乘客。

我有一个用于人名的 NSTextField 和一个用于选择汽车的 NSPopUpButton。弹出按钮有一个绑定到 NSControllerArray 的“内容值”，它允许我获取所有汽车。

然后我有一个按钮来保存所有内容。标头代码如下所示：

```
IBOutlet NSTextField   *newPassengerNameField;
IBOutlet NSPopUpButton *newPersonCarField; 
```

实现是这样的：

```
- (IBAction)saveNewPassenger:(id)sender {

    NSManagedObjectContext *managedObjectContext = [self managedObjectContext];

    NSManagedObject *newPassengerObject = [
        NSEntityDescription
            insertNewObjectForEntityForName:@"PassengerEntity"
                     inManagedObjectContext:managedObjectContext
    ];

    //Here we have all the fields to be inserted.
    [newPassengerObject setValue:[newPassengerNameField stringValue] forKey:@"name"];

    //Car ?????

} 
```

好的，这段代码工作得很好......名字。但我不知道如何插入汽车关系。

我的应用程序强制用户在进入此阶段之前创建汽车，因此我在 CarEntity 中有对象。

问题是：如何获取弹出按钮的值并将其发送到此插入代码？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-05-01T12:34:07.240

// 代码清理注释

1：你为什么使用'setValue:forKey'？你没有自动生成你的实体类文件。如果您已生成，则可以将实体视为自定义对象。例如。我正在拿起你的一段代码。如果你有实体类文件，它可以像下面这样修改

```
NSManagedObjectContext *managedObjectContext = [self managedObjectContext];

PassengerEntity *newPassengerObject = [
    NSEntityDescription
        insertNewObjectForEntityForName:@"PassengerEntity"
                 inManagedObjectContext:managedObjectContext
];
newPassengerObject.name = [newPassengerNameField stringValue]; 
```

2：不要在你的**saveNewPassenger** : 方法中混淆核心数据代码。它不适用于 Core Data 操作。既然如此，为什么要在那个方法里面写 COre 数据代码呢？它只会导致代码重复。最好编写一个“接口类”来与核心数据通信。这将增加模块化和代码可重用性

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T15:26:16.827

这非常有效，但是非常感谢您在清理代码方面的任何帮助！

```
[newPassengerObject setValue:[newPassengerNameField stringValue] forKey:@"name"];

//Continuing from old code.

NSPredicate *predicate = [NSPredicate predicateWithFormat: @"name = %@", [[newPersonCarField selectedItem] title]]; 

NSEntityDescription *modelEntity = [NSEntityDescription entityForName:@"CarEntity" inManagedObjectContext:managedObjectContext];

NSFetchRequest *fetchRequest = [[NSFetchRequest alloc] init];

[fetchRequest setEntity:modelEntity];
[fetchRequest setPredicate:predicate];

NSArray *results = [managedObjectContext executeFetchRequest:fetchRequest error:nil];

[fetchRequest release];

[newPassengerObject setValue:[results objectAtIndex:0] forKey:@"inCar"];
//Code goes on from here. 
```

# c# - c#中运行时类（java）的等价物

> ID：10375702
> 
> 赞同：0
> 
> 时间：2012-04-29T20:27:42.027
> 
> 标签：c#, asp.net

它们是 c# 中运行时类（java）的等价物吗？实际上我正在尝试将这些操作转换为 c#

运行时运行时 = Runtime.getRuntime(); 返回 runtime.totalMemory() - runtime.freeMemory();

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:32:10.343

如果您只是想了解当前的内存使用情况，则需要[`GC`](http://msdn.microsoft.com/en-us/library/a0fwz4wc.aspx)该类。

例如：

```
long memory = GC.GetTotalMemory(true); // Allow a brief time for GC/finalization 
```

您还可以在`GC`该类中找到建议垃圾收集、等待未决终结器等的成员。

# ruby-on-rails - heroku“未定义的方法”错误

> ID：10375705
> 
> 赞同：1
> 
> 时间：2012-04-29T20:27:46.940
> 
> 标签：ruby-on-rails, heroku

我的应用程序有一个用户模型，包括一个“新手”布尔属性。我在注册页面中制作了一个单选按钮，让新用户选择他是否是“新手”。

```
<%= f.radio_button :newbie, true %> <%= f.label :newbie, "I'm a newbie" %>   
<%= f.radio_button :newbie, false%> <%= f.label :newbie, "I'm not a newbie" %> 
```

该应用程序在本地服务器上运行良好。但是部署到heroku后，我无法访问注册页面。heroku 日志显示：

```
2012-04-29T20:16:16+00:00 app[web.1]: Started GET "/signup" for 72.181.169.183 at 2012-04-29 20:16:16 +0000
2012-04-29T20:16:16+00:00 app[web.1]: Processing by UsersController#new as HTML
2012-04-29T20:16:16+00:00 app[web.1]:   Rendered shared/_error_messages.html.erb (0.0ms)
2012-04-29T20:16:16+00:00 app[web.1]:   Rendered users/new.html.erb within layouts/application    (1.3ms)
2012-04-29T20:16:16+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms
2012-04-29T20:16:16+00:00 app[web.1]: 
2012-04-29T20:16:16+00:00 app[web.1]: ActionView::Template::Error (undefined method `newbie' for #<User:0x00000004d21280>):
2012-04-29T20:16:16+00:00 app[web.1]:     6:     <%= form_for(@user) do |f| %>
2012-04-29T20:16:16+00:00 app[web.1]:     7:      <%= render 'shared/error_messages', object: f.object %>
2012-04-29T20:16:16+00:00 app[web.1]:     8:    
2012-04-29T20:16:16+00:00 app[web.1]:     10:     <%= f.radio_button :newbie, false%> <%= f.label :newbie, "I'm not a newbie" %>
2012-04-29T20:16:16+00:00 app[web.1]:     9:      <%= f.radio_button :newbie, true %> <%= f.label  :newbie, "I'm a newbie" %>
2012-04-29T20:16:16+00:00 app[web.1]:     11: 
2012-04-29T20:16:16+00:00 app[web.1]:   app/views/users/new.html.erb:9:in `block in _app_views_users_new_html_erb___587113142513507349_39337120'
2012-04-29T20:16:16+00:00 app[web.1]:     12:       <%= f.label :name %>
2012-04-29T20:16:16+00:00 app[web.1]:   app/views/users/new.html.erb:6:in     `_app_views_users_new_html_erb___587113142513507349_39337120' 
```

我已经运行了迁移，我可以看到新手已成功迁移

```
Migrating to AddRoleToUsers (20120425182820) 
==  AddRoleToUsers: migrating =================================================
-- add_column(:users, :newbie, :boolean)
 -> 0.0023s
==  AddRoleToUsers: migrated (0.0024s) ======================================== 
```

可能是什么问题呢？

谢谢

# c++ - 在单击 c++ 形式的按钮之前，如何保持正在运行的功能？

> ID：10375707
> 
> 赞同：0
> 
> 时间：2012-04-29T20:27:55.547
> 
> 标签：c++, forms, recursion, event-handling

我正在使用 .net framework 4 和 Visual Studio 2010。我正在使用 C++ 表单。我的代码是这样的：

```
int k = 0;

void writeFunction(int &k){
    ++k;
    textbox1->text = Convert::toString(k);

    //i want to suspend writeFunction in there, until i click the button1 which is on Form1 
    //because i don't want to stop function, it has to wait to click

    //after i clicked the button1 , the program continue to run code here

   writeFunciton(k);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:36:32.660

Can you add more details about your program? What framework are you using to generate the form, and how do button presses interact with your code?

For example, if you're using Qt then you could use signals and slots to link pressing the button with your method. Depending on the framework there might be other appropriate answers.

Generally I would recommend using a threading library to synchronize your code.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:36:58.767

It is not wise to suspend a GUI function..instead of that use operation state variable in your form class such as

```
enum OperationState 
 {
  os_normal,
  os_pointselection,
  os_event1,...
 } 
```

After you call textbox->=... swicth to selection state and by using this state track mouse states like click after mouseclick check for os_selection state,then continue you duty..

# css - 我应该添加光标：指向伪类的指针：悬停吗？

> ID：10375710
> 
> 赞同：3
> 
> 时间：2012-04-29T20:28:15.240
> 
> 标签：css, pseudo-class

不知道应该用什么

```
.myclass {
  cursor: pointer;
} 
```

或者

```
.myclass:hover {
  cursor: pointer;
} 
```

还是没有区别？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:32:26.260

使用任何你想要的。
我会使用第一个，因为它会为我节省几行 CSS

否则，您可以为所有其他伪类指定不同的指针。

像：

```
a:link{cursor:pointer;} /* you still dont need it ... as it's default*/
a:hover{cursor:crosshair;}
a:active:{cursor:wait;}
a:visited{cursor:wait;} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:31:38.937

没有区别——[光标在任何一种情况下都会改变](http://jsfiddle.net/UaFnR/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-17T19:57:28.930

我发现如果你需要支持 IE7，如果带有样式光标的元素靠近页面底部，使用 :hover 伪类会导致页面不规则地跳转。我建议不要使用 :hover ，因为没有它 CSS 也能正常工作。

# php - Mysql PHP任意增量

> ID：10375721
> 
> 赞同：0
> 
> 时间：2012-04-29T20:29:28.673
> 
> 标签：php, mysql, increment

每次在我的网站上显示广告时，我都会尝试增加 +1 印象，但是变量会任意增加 +2 到 +3。我已经删除了所有正常工作的内容，并创建了一个页面，其中仅包含以下代码：

```
<?php
require "connect_to_mydb.php";
echo 'Hello***** '.$testVariable=$testVariable+1;
mysql_query("UPDATE `imageAds` SET `test`=`test`+1 WHERE `id`='1'");
?> 
```

每次刷新页面时，`test`任意增加 +2 或 +3 并显示我的页面`Hello***** 1`（只是为了显示它没有循环）。访问仅限于此页面，因此不是其他用户刷新该页面。

此外，`id`并且`test`在`int(11)`数据库中。

我的数据库所需的连接中没有任何会干扰的东西。

**编辑**

这是一个更新的代码：

```
<?php
require "connect_to_mydb.php";
mysql_query("UPDATE `imageAds` SET `test`=`test`+1 WHERE `id`='1'");
$sql = mysql_query("SELECT * FROM imageAds WHERE id='1' LIMIT 1");
$check = mysql_num_rows($sql);
if($check > 0){ 
    $row = mysql_fetch_array($sql);
    echo $row['test'];
}
?> 
```

每次增加 +2

**编辑** 这是 connect_to_mydb.php 中的内容

```
<?php  
$db_host = "*************************"; 

$db_username = "*********";  

$db_pass = "**********";  

$db_name = "**************";

mysql_connect("$db_host","$db_username","$db_pass") or die ("could not connect to   mysql");
mysql_select_db("$db_name") or die ("no database");              
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:32:45.517

要么在 MySQL 的 UPDATE 实现中存在错误，要么你在一些你没有发布的代码中做错了。

提示：这*不太*可能是 MySQL 中的错误。其他人会注意到它。

* * *

从您显示的内容来看，您的页面似乎被多次加载。

这种试图证明代码只被调用一次的尝试并不能证明任何事情：

```
echo 'Hello***** '.$testVariable=$testVariable+1; 
```

`Hello***** 1`即使您多次打开此页面，这也将始终打印相同的内容 ( )，因为`$testVariable`在单独的请求中不会保留 的值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-30T05:17:28.007

这个 +2/+3 错误只发生在 Chrome 和我的移动 Android 浏览器上，并且代码是可靠的。我查看了 Chrome 发送多个 http 请求 (thx user1058351) 是否存在任何问题，此处记录了以下内容：

[http://code.google.com/p/chromium/issues/detail?id=39402](http://code.google.com/p/chromium/issues/detail?id=39402)

因此，由于这种方式不可靠，我刚刚完成了一项可靠的工作。我现在没有包含在重新加载时更新广告展示量的 PHP 文件，而是在页面加载时将 AJAX 请求发送到单独的 PHP 文件，该文件更新广告统计信息并返回适当的数据。我认为关键是通过 JS 代码发送它，因此只能发送一个 http 请求来增加数据。

感谢所有回复的人，特别是 user1058351 和 Mark Byers（不是 MYSQL 中的错误，但可能似乎是 Chrome 中的错误）。

# php - 变量作为 JavaScript 数组名称

> ID：10375723
> 
> 赞同：1
> 
> 时间：2012-04-29T20:29:53.820
> 
> 标签：php, javascript, jquery, arrays, variables

**问题：**尝试使用“动态”变量来访问 JSON/JavaScript 数组。

# 示例 #

***而不是...*** array1[ ]*或*array2[ ]*甚至*array9000[ ]

***类似...*** var my_array = 'array' + 'some generated number' ;

***然后只是...*** my_array[ ]*或*my_array[some number]

*但是这不起作用...*（解决方案**现在**在底部）

* * *

我有一些 PHP 正在读取一些目录以及创建 JSON 数组的内容。JSON 数组按顺序命名，它们存储图像目录...

**JSON 数组名称示例：** images0、images1、images2 等...

```
 <?php
        $dir = opendir(getcwd());
        $num=0;
        while($folder = readdir($dir)) {
            if($folder !== '.' && $folder !== '..'){
                if (is_dir($folder)) {
                    echo '<script type="text/javascript">';
                    $folderCHILD = opendir($folder);
                    while($image = readdir($folderCHILD)) {
                        if($image !== '.' && $image !== '..'){
                            $images[]=$folder."/".$image;
                        }
                    }
                    closedir($folderCHILD);
                    echo 'images'.$num.' ='.json_encode($images);
                    unset($images);
                    echo '</script>';
                    $num++;
                }
            }
        }
        closedir($dir);
    ?> 
```

然后我有一些 Javascript/Jquery 正在“尝试”通过点击函数访问这些按顺序命名的 JSON 数组。该函数将使用存储在 JSON 数组中的图像目录创建图像。

```
<script type="text/javascript">
    $(document).ready(function() {
        $('something').click(function() {
            var indexCURRENT = $(this).index();
            var ARRAY = 'images'+indexCURRENT;
            $(document.createElement("img")).attr({ src: ARRAY[some number]}).addClass("image").appendTo('body');
        });
    });
</script> 
```

**^上面的 Javascipt/Jquery 不起作用^**

但是感谢**dev-null-dweller**这段代码确实有效......

```
<script type="text/javascript">
    $(document).ready(function() {
        $('#gallery_link p').click(function() {
            var indexCURRENT = $(this).index();
            var ARRAY = 'images'+indexCURRENT;
            $(document.createElement("img")).attr({ src: window[ARRAY][some number]}).addClass("image").appendTo('body');
        });
    });
</script> 
```

区别？

```
.attr({ src: window[ARRAY][some number]}) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:36:58.277

我很确定你不能在 JS 中做到这一点。您不能将变量内容用作变量名。这在你可以做的php中是可行的

```
$varname = 'x';

$$varname = "something";

print $x; //Prints "something" 
```

但不是在javascript中。只需使用多维数组或散列即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:06:47.753

快速回答：您的数字变量应该可以在`window`对象中访问，像数组（`window['images1']`）一样访问，所以只需更改

```
{ src: ARRAY[1]} 
```

到

```
{ src: window[ARRAY][1] } 
```

应该让它工作。

正确答案：使用数组/对象，很简单：

```
<script>
echo '<script type="text/javascript">';
echo 'images = [];';
$folderCHILD = opendir($folder);
while($image = readdir($folderCHILD)) {
    if($image !== '.' && $image !== '..' && $folder !=='resource'){
        $images[]=$folder."/".$image;
    }
}
closedir($folderCHILD);
echo 'images.push('.json_encode($images).');';
echo '</script>'; 
```

进而：

```
{ src: images[indexCUR][1] } 
```

# android - 如何正确显示 RatingBar？

> ID：10375727
> 
> 赞同：0
> 
> 时间：2012-04-29T20:30:11.633
> 
> 标签：android, android-layout

我有一个tabLayout，其中main.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<TabHost xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@android:id/tabhost"
     android:layout_width="fill_parent"
     android:layout_height="fill_parent">
<LinearLayout
        android:orientation="vertical"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:padding="5dp">
    <TabWidget
            android:id="@android:id/tabs"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"/>
    <FrameLayout
            android:id="@android:id/tabcontent"
            android:layout_width="fill_parent"
            android:layout_height="fill_parent">
    </FrameLayout>
</LinearLayout>
</TabHost> 
```

和有问题的标签：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
          android:orientation="vertical"
          android:layout_width="fill_parent"
          android:layout_height="fill_parent"
    >
<TextView
        android:id="@+id/if1"
        android:text="@string/aText"
        android:gravity="center_horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="3"
        android:visibility="visible"/>

<ImageView
        android:id="@+id/id2"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:visibility="visible"
        android:src="@drawable/sample"
        android:layout_weight="1"

        />

<android.widget.RatingBar android:id="@+id/ratingBar"
                          android:layout_width="wrap_content"
                          android:layout_height="wrap_content"
                          android:layout_gravity="center"
                          android:numStars="5"
                          android:stepSize="1"
                          android:visibility="visible"
        />

<android.widget.Button android:id="@+id/rateButton"
                       android:text="@string/rateButton"
                       android:layout_width="fill_parent"
                       android:layout_height="wrap_content"
                       android:visibility="invisible"
        />
</LinearLayout> 
```

为什么 RatingBar 在我运行 Android 2.3.6 的三星 Galaxy S 上显示为这样？在模拟器中看起来没问题。

![在此处输入图像描述](../Images/5734affffd0b8c5c25da0ddcf86edc31.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:39:18.107

> 为什么 RatingBar 在我运行 Android 2.3.6 的三星 Galaxy S 上显示为这样？

因为你没有给它足够的屏幕空间。您只给它一定比例的屏幕空间，并且根据设备分辨率和数据，这还不够空间。

你不应该依赖于*帮助*`android:layout_weight`你做那些应该*总是*完全可见的事情。适用于本质上可滚动的东西（例如，），因为它们可以适应所需的任何大小。*`android:layout_weight``ListView`*

# c - 将字符从字符串复制到C中的另一个字符串

> ID：10375728
> 
> 赞同：3
> 
> 时间：2012-04-29T20:30:12.000
> 
> 标签：c, string, char, truncate, strncpy

我有一个字符串 AAbbCC 我需要的是复制前两个并将它们添加到数组中，然后复制中间两个并将它们添加到数组中，最后复制最后两个并将它们添加到数组中。

这就是我所做的：

```
char color1[2];
char color2[2];
char color3[2];

strncpy(color1, string, 2); // I take the first two characters and put them into color1

// now I truncate the string to remove those AA values:

string = strtok(string, &color1[1]);

// and when using the same code again the result in color2 is bbAA:

strncpy(color2, string, 2); 
```

它通过了前一个中的那些 bb 和 AA .. 即使数组只有两个位置，当我使用 strtol 时，它给了我一些很大的价值，而不是我正在寻找的 187 .. 如何摆脱它? 或者如何让它以其他方式工作？任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T20:47:39.820

首先，您需要为`\0`.

```
char color1[3];
char color2[5]; 
```

接着：

```
strncpy(color1, string, 2);
color1[3] = '\0';

strncpy(color2, string + 2, 4); 
color2[4] = '\0'; 
```

假如说

```
char *string = "AAbbCC"; 

printf("color1 => %s\ncolor2 => %s\n", color1, color2); 
```

输出是：

```
color1 => AA
color2 => bbCC 
```

我希望这对你有帮助。

**更新**

您可以编写一个`substr()`函数来获取字符串的一部分（从 x 到 y），然后复制到您的字符串。

```
char * substr(char * s, int x, int y)
{
    char * ret = malloc(strlen(s) + 1);
    char * p = ret;
    char * q = &s[x];

    assert(ret != NULL);

    while(x  < y)
    {
        *p++ = *q++;
        x ++; 
    }

    *p++ = '\0';

    return ret;
} 
```

然后：

```
char *string = "AAbbCC"; 
char color1[3];
char color2[4];
char color3[5];
char *c1 = substr(string,0,2);
char *c2 = substr(string,2,4);
char *c3 = substr(string,4,6);

strcpy(color1, c1);
strcpy(color2, c2);
strcpy(color3, c3);

printf("color1 => %s, color2 => %s, color3 => %s\n", color1, color2, color3); 
```

输出：

```
color1 => AA, color2 => bb, color3 => CC 
```

不要忘记：

```
free(c1);
free(c2);
free(c3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:35:56.063

Well, `color1` and `color2` are two bytes long - you have no room for the \0 terminator. When you look at one of them *as a string*, you get more characters that you wished for. If you look at them as two characters, you'll get the right result.

You should define them as 3 characters long and put the \0 at the end.

# c - 如何在 C 编程语言中定义一个让我声明作用域变量的 FIRST 宏？

> ID：10375735
> 
> 赞同：0
> 
> 时间：2012-04-29T20:31:30.157
> 
> 标签：c, variables, macros, scope

我有以下宏

```
#define FIRST(first) \
 switch(first, 0) default:

#define LAST(last) \
 switch(0) for(;0;last) default:

#define BRACKET(first, last) \
 switch(first, 0) for(;0;last) default: 
```

它们是这样使用的。

```
#include <stdio.h>

// ... Macros are defined here

int main (int argc, const char * argv[])
{
    int x;

    FIRST(x = 4)
    {
        printf("%i\n", x);
    }

    LAST(++x)
    {
        printf("%i\n", x);
    }

    printf("%i\n", x);

    return 0;
} 
```

BRACKET 只是 FIRST 和 LAST 的组合。不过，FIRST 宏（和 BRACKET 宏）还不够好。我希望能够编写以下代码，其中 y 的范围为花括号。

```
 FIRST(int y = 0)
    {
        printf("%i\n", y);
    } 
```

如何使用 C 编程语言编写 FIRST 宏，让我声明一个作用域在花括号内的变量？

一些极端情况是：

我希望允许以下代码片段

```
FIRST(int x = 0)
 printf("%i\n", x); 
```

我希望禁止使用以下代码片段

```
FIRST(int x = 0)
 printf("%i\n", x);

++x;
printf("%i\n", x); 
```

PS 我很惊讶编译器接受了“switch(0) for(;0;last) default:”，这真的是合法的 C 代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:17:51.860

如果您有一个至少符合 C99 的编译器，那么以您想要的方式获取作用域变量是很容易的。（否则不要这样做，或者让自己成为一个现代编译器）。

块或语句的前缀`FIRST(int y = 0)`可以通过类似的东西来实现

```
for (int t = 0; t < 1; ++t)
  for(int y = 0; t < 1; ++t) 
```

也就是说，您定义了一个辅助变量，该变量控制循环只执行一次。现代编译器很容易优化随之而来的噪音并达到本质。

小心你可以把它打包成一个宏，你应该注意这个名字也能捕捉到正在发生的事情，并且不要伤害你的程序员同事的眼睛。特别是在某处放置一个大的警告标签，这样的事情会改变`break`和`continue`语句的语义，这对于不知情的读者来说是相当令人惊讶的。

我已经用[-scopes写了更多关于](https://gustedt.wordpress.com/2010/08/14/scope-bound-resource-management-with-for-scopes/)[范围绑定资源管理的`for`](https://gustedt.wordpress.com/2010/08/14/scope-bound-resource-management-with-for-scopes/)文章。

# android - 为Listview设置过滤器的错误是什么

> ID：10375741
> 
> 赞同：0
> 
> 时间：2012-04-29T20:32:23.570
> 
> 标签：android, layout, android-activity, filter

我有一个模型类，它包含不同的项目，如字符串和图像 URL。

我为此实现了一个过滤器，但不幸的是，每当我搜索时，所有项目都会消失。帮助我如何实现过滤器。

这是源代码。

```
package Dummy.list.filter;
import android.app.Activity;
import android.os.Bundle;
import android.text.Editable;
import android.text.TextWatcher;
import android.widget.EditText;
import android.widget.ListView;

public class DummyListFilterActivity extends Activity {
    /** Called when the activity is first created. */

    myadapter adapter;
    EditText filterText;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        ModelClass[] str = new ModelClass[]{new ModelClass("cell",R.drawable.ic_launcher,1), 
                new ModelClass("Bus",R.drawable.ic_launcher,2),
                new ModelClass("Car",R.drawable.ic_launcher,3),
                new ModelClass("Van",R.drawable.ic_launcher,4),
                new ModelClass("Lorry",R.drawable.ic_launcher,5)};

        ListView list = (ListView)findViewById(R.id.Service_name_list);
        filterText = (EditText)findViewById(R.id.txtUserName);
        filterText.addTextChangedListener(filterTextWatcher);

        list.setTextFilterEnabled(true);

        adapter = new myadapter(this, 0, str); 

       //ArrayAdapter<String> adapter = new ArrayAdapter<String>(this,android.R.layout.simple_list_item_1,str);

        list.setAdapter(adapter);

    }

    private TextWatcher filterTextWatcher = new TextWatcher() {

        public void afterTextChanged(Editable s) {
        }

        public void beforeTextChanged(CharSequence s, int start, int count,
                int after) {
        }

        public void onTextChanged(CharSequence s, int start, int before,
                int count) {
            adapter.getFilter().filter(s.toString());
        }

    };

    @Override
    protected void onDestroy() {
        super.onDestroy();
        filterText.removeTextChangedListener(filterTextWatcher);
    }

} 
```

这就是我的适配器类的外观

```
package Dummy.list.filter;
import java.util.List;
import android.app.Activity;
import android.content.Context;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageView;
import android.widget.TextView;

    public class myadapter extends ArrayAdapter<ModelClass>
    {

        //private final List<String> contactNumbers;
            //private final String[] contactDetails;
            private final ModelClass[] contactDetails;
            private final Activity AdapterContext;

        public myadapter(Context context, int textViewResourceId,ModelClass[] objects) 
        {
            super(context, textViewResourceId, objects);
            // TODO Auto-generated constructor stub
            contactDetails = objects;
            AdapterContext = (Activity) context;
        }

        static class ViewHolder {
            protected TextView ContactNumbers;
            protected ImageView ContactImage;
        }

        public View getView(int position, View convertView, ViewGroup parent)
        {
            View view = null;
            if(convertView == null)
            {
                LayoutInflater inflator = AdapterContext.getLayoutInflater();
                view = inflator.inflate(R.layout.item, null);

                final ViewHolder holder = new ViewHolder();
                holder.ContactImage = (ImageView) view.findViewById(R.id.image);
                holder.ContactNumbers = (TextView) view.findViewById(R.id.text);    
                view.setTag(holder);
            }
            else
            {
                view = convertView;
            }

            ViewHolder holder = (ViewHolder) view.getTag();
            holder.ContactNumbers.setText(contactDetails[position].getServiceName());
            holder.ContactImage.setImageResource(contactDetails[position].getServiceImage());
            view.setTag(holder);
            return view;

        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:52:12.747

您的适配器应该实现`Filterable`. 将`myadapter`类替换为以下类：

```
public class myadapter extends ArrayAdapter<ModelClass> implements Filterable
{

    //private final List<String> contactNumbers;
    //private final String[] contactDetails;
    private ModelClass[] contactDetails;
    private ModelClass[] original;
    private final Activity AdapterContext;
    private Filter filter;
    private Object lock = new Object();

    public myadapter(Context context, int textViewResourceId,ModelClass[] objects) 
    {
        super(context, textViewResourceId, objects);
        // TODO Auto-generated constructor stub
        contactDetails = original = objects;
        AdapterContext = (Activity) context;
    }

    static class ViewHolder {
        protected TextView ContactNumbers;
        protected ImageView ContactImage;
    }

    public View getView(int position, View convertView, ViewGroup parent)
    {
        View view = null;
        if(convertView == null)
        {
            LayoutInflater inflator = AdapterContext.getLayoutInflater();
            view = inflator.inflate(R.layout.item, null);

            final ViewHolder holder = new ViewHolder();
            holder.ContactImage = (ImageView) view.findViewById(R.id.image);
            holder.ContactNumbers = (TextView) view.findViewById(R.id.text);    
            view.setTag(holder);
        }
        else
        {
            view = convertView;
        }

        ViewHolder holder = (ViewHolder) view.getTag();
        holder.ContactNumbers.setText(contactDetails[position].getServiceName());
        holder.ContactImage.setImageResource(contactDetails[position].getServiceImage());
        view.setTag(holder);
        return view;

    }

    @Override
    public Filter getFilter() {
    // TODO Auto-generated method stub
    if (filter == null) {
        filter = new MyFilter();
    }
    return filter;
    }

    private class MyFilter extends Filter {

        @Override
        protected FilterResults performFiltering(CharSequence constraint) {
        // TODO Auto-generated method stub
        String query = constraint.toString().toLowerCase();
        FilterResults results = new FilterResults();
        ModelClass[] temp;
        synchronized (lock) {
                temp = Arrays.copyOf(contactDetails, contactDetails.length);
        }
        if (query == null || query.length() == 0) {
            synchronized (lock) {
            results.values = original;
                results.count = original.length;
            }
        } else {
            ModelClass[] filtered = new ModelClass[original.length];
            int size = 0;
            for (int i = 0; i < temp.length; i++) {
            ModelClass content = temp[i];
            if(content.getServiceName().equalsIgnoreCase(query)) {
                filtered[size++] = content;
            }
        }
        filtered = Arrays.copyOf(filtered, size);
        results.values = filtered;
        results.count = filtered.length;
        }
        return results;
    }

    @SuppressWarnings("unchecked")
    @Override
    protected void publishResults(CharSequence constraint,
            FilterResults results) {
        // TODO Auto-generated method stub
        contactDetails = (ModelClass[]) results.values;
        notifyDataSetChanged();
    }

    }
} 
```

我没有测试过。但我希望它会奏效。

# android - AlertDialog 不关闭

> ID：10375745
> 
> 赞同：2
> 
> 时间：2012-04-29T20:33:20.307
> 
> 标签：android, android-alertdialog, dismiss

我正在制作一个小游戏，我正在尝试显示一个 AlertDialog，问题是，当用户单击一个选项时，AlertDialog 不会消失。

我正在使用循环器，因此当我的 AlertDialog 出现并且当用户单击“取消”时，我的游戏线程停止（循环器），游戏线程再次运行，但对话框位于顶部并且用户无法继续播放。

```
public void alerta(){
    Looper.prepare(); 
    myHandler = new Handler();

    AlertDialog.Builder alertadd = new AlertDialog.Builder(_context);
    LayoutInflater factory = LayoutInflater.from(_context);
    final View view = factory.inflate(R.layout.custom_dialog, null);
    alertadd.setView(view);
    alertadd.setNeutralButton("Tomar Foto", new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dlg, int sumthin) {
                stops++;
                Toast.makeText(_context.getApplicationContext(), "Tomaste Foto", Toast.LENGTH_SHORT).show();
            }
        });
    alertadd.setNegativeButton("Cancelar", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dlg, int sumthin) {
            System.out.println("Stops = "+stops);
            stops++;
            Toast.makeText(_context.getApplicationContext(), "Cancelar", Toast.LENGTH_SHORT).show();
            myHandler.getLooper().quit();
            dlg.dismiss();
        }
    });

    alertadd.show();
    Looper.loop();      

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:06:35.987

应该是`alertadd.dismiss();`。并不是`dlg.dismiss();`

试试看。如果不让我知道...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-19T08:12:28.767

您必须先创建警报对话框，然后在 onClick 方法中使用它的 dismiss() 方法：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
AlertDialog alert = builder.create();
builder.setMessage(getString(R.string.a))
    .setCancelable(false)
    .setPositiveButton(getString(R.string.b), new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        MyActivity.this.finish();
    }
})
 .setNegativeButton(getString(R.string.c), new DialogInterface.OnClickListener() {
 public void onClick(DialogInterface dialog, int id) {
    alert.dismiss();
 }
});
alert.show() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T20:42:30.643

不确定它是否会有所帮助，但请尝试

```
dlg.cancel(); 
```

或者看看这个。在我的情况下它工作得很好：

```
AlertDialog.Builder builder = new AlertDialog.Builder(this);
builder.setMessage(getString(R.string.a))
    .setCancelable(false)
    .setPositiveButton(getString(R.string.b), new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        MyActivity.this.finish();
    }
})
    .setNegativeButton(getString(R.string.c), new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int id) {
        dialog.cancel();
    }
});
AlertDialog alert = builder.create();
alert.show(); 
```

# asp.net - ASP.NET登录系统

> ID：10375749
> 
> 赞同：1
> 
> 时间：2012-04-29T20:33:33.690
> 
> 标签：asp.net

我已经为我的网站创建了一个登录系统。这个登录系统应该只保护一个页面（意味着有一个页面需要用户登录才能看到）。我的问题是：由于我创建了这个登录系统，我的所有其他 8 个页面现在都需要验证。这不是我的意图，我一直在疯狂地寻找解决方案，但没有运气。我的 web.config 文件如下所示：

```
<configuration>
<system.web>
  <compilation debug="true" targetFramework="4.0">
    <assemblies>
      <add assembly="MySql.Data, Version=5.0.9.0, Culture=neutral, PublicKeyToken=C5687FC88969C44D"/>
    </assemblies>
  </compilation>

  <authentication mode="Forms">
    <forms loginUrl="Login.aspx" name=".ASPXFORMSAUTH" timeout="30" />  <!--name =".ASPXFORMSAUTH"-->
  </authentication>

  <authorization>
    <deny users="?" />
  </authorization>
</system.web> 
```

唯一需要登录的页面称为 Default.aspx 我的其余页面应该对所有用户公开。我怎样才能做到这一点？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T20:38:49.290

您可以通过使用 web.config 文件中的 location 元素来完成。

```
<location path="Default.aspx"> 
  <system.web> 
      <authorization> 
            <deny users="?" />
      </authorization> 
   </system.web> 
</location> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T20:38:24.090

在 web.config 中使用“位置”并指定要保护的目录。这是一个很好的例子：

[http://www.codefixer.com/asp-net/tutorials/protecting-folders-with-forms-authentication.asp](http://www.codefixer.com/asp-net/tutorials/protecting-folders-with-forms-authentication.asp)

# php - 从 URL 中删除获取变量

> ID：10375751
> 
> 赞同：0
> 
> 时间：2012-04-29T20:33:45.257
> 
> 标签：php, .htaccess, get

> **可能重复：**
> [mod_rewrite php mysql](https://stackoverflow.com/questions/9428720/mod-rewrite-php-mysql)

我想要做的是改变这个：

`www.site.com/profile.php?id=1`

对此：

`www.site.com/profile/Terry_Harvey`

有什么办法可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:35:08.667

您的问题中缺少很多东西。但无论如何，最终的答案是调查`mod_rewrite`。

# c++ - Arduino Serial.available() 不断增加

> ID：10375753
> 
> 赞同：0
> 
> 时间：2012-04-29T20:34:38.933
> 
> 标签：c++, arduino

我正在使用 Arduino UNO R3，当我通过 Serial 向我的 GSM 屏蔽发送 AT 命令时，我从 Serial.available() 获得越来越多的数字。

这是我一直用来调试的示例：

```
void loop()
{

    Serial.println("AT+CADC?");
    delay(3000);
}
void serialEvent()
{
  char * sensorValue;
  int serial = Serial.available();
  Serial.print("-");
  Serial.print(serial);
  Serial.println("-");
  if(serial >0)
  {
    sensorValue = (char*) malloc(sizeof(char) * (serial +1));
    int i;
    for(i = 0; i < serial; i++)
    {
      sensorValue[i] = Serial.read();
      //Serial.print(sensorValue[i]);
    }
    sensorValue[serial+1] = '\0';
    Serial.print(sensorValue);
  }
  delay(2000);
} 
```

我从串行监视器得到的结果是：

> -30-
> 
> -63-
> 
> -63-
> 
> -63-
> 
> ...

为什么可用字节数从 30 开始，然后在 63 时达到最大值？即使我使用 Serial.read() 也会发生这种情况，它应该消耗缓冲区中的数据。

编辑：添加了 serialEvent() 的完整内容。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:59:53.000

```
sensorValue[serial+1] = '\0';
Serial.print(sensorValue);      // <== here 
```

您将收到的任何内容发送回调制解调器。这立即回应了它。因此，一旦您使用 AT 命令进行操作，您将永远循环来回发送相同的字节。删除 Serial.print() 调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T04:34:50.353

我建议你使用软件串行库——[http://arduino.cc/en/Reference/SoftwareSerial]SoftwareSerial [1——](http://arduino.cc/en/Reference/SoftwareSerial)并使用它来访问 GSM 调制解调器，除非 GSM 调制解调器需要 UART / RS-232电平信号。

如果您的大部分工作都涉及与调制解调器通信，另一种选择可能是合适的，它是 Arduino Mega 2560。它有四个硬件串行接口，尽管它没有 RS-232 输出信号。为此，您应该能够使用其中一个 FTDI 分线板。

# Not Found

Nothing was found at your URI!

It's crucial that you use the <g:applylayout>tag. If you use your layout will render twice and nest itself. Now for the URL mapping: "404"(controller: 'error', action: 'notFound') You're all set now to send that 404 from your controller: def myAction = { Thing thing = Thing.get(params.id) if (!thing) { return new ModelAndView(new NotFoundView()) } } This approach also lets you easily log the 404, try to resolve it and send a 301, or whatever you want to do. javascript 4 2 回答 2 This answer is useful 3 坦率地说，这很愚蠢。  不会去任何地方，当然也不会“失宠”。实际上，您引用的规范 (XHTML2)已被放弃。 XHTML2 工作组的章程在完成本文档的工作之前就到期了。 您应该以标准为目标的是HTML5。尽管我不建议这样做，但如果您绝对坚持使用 XHTML，那么XHTML5是 HTML5 的子集；但是，唯一的区别实际上是您用于服务页面的 MIME 类型。由于所需的 MIME 类型（application/xhtml+xml或application/xml）与旧版浏览器的兼容性较差，因此没有理由在标准网站/网络应用程序中使用它。 关于整个/事情： 从实际的角度来看，使用. 您尝试使用. 不可访问。 具有alt可访问性的属性，屏幕阅读器知道如何处理它。屏幕阅读器可能不知道如何处理. 此外，它不是语义的，它是完全通用的。 意味着它是一个图像。 再说一次，不会很快消失或失宠。在可预见的未来，它仍将是在 HTML 文档中嵌入图像的推荐方式。 最后，关于您如何完成图像翻转的评论：您不应该在 JavaScript 中执行此操作；使用 CSS。 理想情况下，您会使用 sprite（需要对所有图像发出一个 HTTP 请求，从而大大提高性能），并调整background-positionin :hover. 于 2012-05-01T20:19:30.060 回答 This answer is useful 1 我玩了更长的时间，但是似乎没有任何干净的方法可以只预加载一次图像，然后将其动态附加到不同的标签。这是最适合我的解决方案的示例代码，到目前为止，如果有人遇到同样的问题： // Init for (var i=0;i <imagecount;++i) 1="" 2="" 3="" 5="" {="" imagesunset[i]="document.createElement(&quot;object&quot;);" imagesunset[i].setattribute("type",="" "image="" png");="" imagesunset[i].setattribute("data",="" imagesurls[0]);="" imagesunset[i].setattribute("onmouseover",="" "switchimg(this);");="" imagesset[i]="document.createElement(&quot;object&quot;);" imagesset[i].setattribute("type",="" imagesset[i].setattribute("data",="" imagesurls[1]);="" imagesset[i].setattribute("onmouseover",="" }="" function="" switchimg(caller)="" some="" code="" to="" identify="" caller's="" index="" in="" the="" array="" and="" image="" swap="" caller.parentnode.replacechild(newobject,="" caller);="" 我们必须为要交换的每个图像创建单独的对象对；如果我们尝试使用同一个对象，js="" 会给我们一个无效指针异常。不知道这在内存使用或性能方面是如何工作的，但它确实有效。="" 有趣的是，在缓存="" 缓冲方面，新的="" ie="" (v.9)="" 比="" firefox="" 管理得更好。即使没有特殊的="" js="" 来管理缓冲，它也能够在不闪烁的情况下呈现更改。也许我会停止不喜欢它，最后。="" 如果有人找到更好的解决方案，请分享。谢谢。="" 于="" 2012-05-01t19:02:28.250="" 回答="" related="" c="" -="" spawn()="" 函数（在“spawn.h”中声明）从何而来？="" python="" gunicorn="" 配置文件在哪里？="" ios="" uiview="" 子类（自定义进度视图）直到为时已晚才显示="" c++="" 将="" boost::program_options="" 组合成强制组="" monotouch：版本="" 5.2.12="" 中的引用计数错误="" php="" 使用正则表达式删除="" 中的字符="" java="" spring="" mvc="" 将常规表单绑定到="" dto="" c#="" 为单个字符="" 字形（ocr）实现模板匹配="" ajax="" 调用的验证码="" 在注册和登录时加密密码="" reference="" php × 1429865="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" title=""><link href="../Styles/Style.css" type="text/css" rel="stylesheet">

# javascript - JavaScript：如何预加载 image data? / JavaScript's Image vs. I'm developing a web app at the moment, and, being a perfectionist, I try to make it all shiny and compliant with all the standards. As far as I know, the *tag is to be deprecated in the upcoming standards for xHTML, and as nowadays even IE is able to handle properly, I wanted to use the tag for all the images on my site. Now, I need to preload some of my images for standard onmouseover swapping. It was no problem with : var rateImagesURLs = new Array("images/mark0.png", "images/mark1.png"); var rateImages = new Array(rateImagesURLs.length); for (var i=0;i<rateimagesurls.length;++i) {="" rateimages[i]="new" image();="" rateimages[i].src="rateImagesURLs[i];" }="" but="" i="" can't="" get="" it="" to="" work="" with="" <object="">. I just can't find a way to connect JavaScript's Image object to actual tag. I tried playing with 's data, as well as archive attribute, but even the guys at W3C seem to be unsure as to how to use it, suggesting in their documents separating values with spaces in one place, and then commas a few paragraphs below... So my question is: how do I preload images in JavaScript using tag? P.S. Sorry for lengthy intro for rather simple question. Here's my magic formula for doing this. Maybe there's a better way, but this one works and ensures the same 404 view renders whether you generate the 404 or grails does it internally (no controller found, for example). First, create a View class that extends AbstractView: class NotFoundView extends AbstractView { @Override protected void renderMergedOutputModel(Map <string, object="">model, HttpServletRequest request, HttpServletResponse response) { response.sendError(HttpServletResponse.SC_NOT_FOUND) } } Next, create an error controller: class ErrorController { def notFound = { return render(view: '/error/notFound') } } Now create your error view under views/error/notFound.gsp: <g:applylayout name="main"><title>Oops! Not found!</title>

# Not Found

Nothing was found at your URI!</g:applylayout> It's crucial that you use the <g:applylayout>tag. If you use your layout will render twice and nest itself. Now for the URL mapping: "404"(controller: 'error', action: 'notFound') You're all set now to send that 404 from your controller: def myAction = { Thing thing = Thing.get(params.id) if (!thing) { return new ModelAndView(new NotFoundView()) } } This approach also lets you easily log the 404, try to resolve it and send a 301, or whatever you want to do. javascript 4 2 回答 2 This answer is useful 3 坦率地说，这很愚蠢。  不会去任何地方，当然也不会“失宠”。实际上，您引用的规范 (XHTML2)已被放弃。 XHTML2 工作组的章程在完成本文档的工作之前就到期了。 您应该以标准为目标的是HTML5。尽管我不建议这样做，但如果您绝对坚持使用 XHTML，那么XHTML5是 HTML5 的子集；但是，唯一的区别实际上是您用于服务页面的 MIME 类型。由于所需的 MIME 类型（application/xhtml+xml或application/xml）与旧版浏览器的兼容性较差，因此没有理由在标准网站/网络应用程序中使用它。 关于整个/事情： 从实际的角度来看，使用. 您尝试使用. 不可访问。 具有alt可访问性的属性，屏幕阅读器知道如何处理它。屏幕阅读器可能不知道如何处理. 此外，它不是语义的，它是完全通用的。 意味着它是一个图像。 再说一次，不会很快消失或失宠。在可预见的未来，它仍将是在 HTML 文档中嵌入图像的推荐方式。 最后，关于您如何完成图像翻转的评论：您不应该在 JavaScript 中执行此操作；使用 CSS。 理想情况下，您会使用 sprite（需要对所有图像发出一个 HTTP 请求，从而大大提高性能），并调整background-positionin :hover. 于 2012-05-01T20:19:30.060 回答 This answer is useful 1 我玩了更长的时间，但是似乎没有任何干净的方法可以只预加载一次图像，然后将其动态附加到不同的标签。这是最适合我的解决方案的示例代码，到目前为止，如果有人遇到同样的问题： // Init for (var i=0;i <imagecount;++i) 1="" 2="" 3="" 5="" {="" imagesunset[i]="document.createElement(&quot;object&quot;);" imagesunset[i].setattribute("type",="" "image="" png");="" imagesunset[i].setattribute("data",="" imagesurls[0]);="" imagesunset[i].setattribute("onmouseover",="" "switchimg(this);");="" imagesset[i]="document.createElement(&quot;object&quot;);" imagesset[i].setattribute("type",="" imagesset[i].setattribute("data",="" imagesurls[1]);="" imagesset[i].setattribute("onmouseover",="" }="" function="" switchimg(caller)="" some="" code="" to="" identify="" caller's="" index="" in="" the="" array="" and="" image="" swap="" caller.parentnode.replacechild(newobject,="" caller);="" 我们必须为要交换的每个图像创建单独的对象对；如果我们尝试使用同一个对象，js="" 会给我们一个无效指针异常。不知道这在内存使用或性能方面是如何工作的，但它确实有效。="" 有趣的是，在缓存="" 缓冲方面，新的="" ie="" (v.9)="" 比="" firefox="" 管理得更好。即使没有特殊的="" js="" 来管理缓冲，它也能够在不闪烁的情况下呈现更改。也许我会停止不喜欢它，最后。="" 如果有人找到更好的解决方案，请分享。谢谢。="" 于="" 2012-05-01t19:02:28.250="" 回答="" related="" c="" -="" spawn()="" 函数（在“spawn.h”中声明）从何而来？="" python="" gunicorn="" 配置文件在哪里？="" ios="" uiview="" 子类（自定义进度视图）直到为时已晚才显示="" c++="" 将="" boost::program_options="" 组合成强制组="" monotouch：版本="" 5.2.12="" 中的引用计数错误="" php="" 使用正则表达式删除="" 中的字符="" java="" spring="" mvc="" 将常规表单绑定到="" dto="" c#="" 为单个字符="" 字形（ocr）实现模板匹配="" ajax="" 调用的验证码="" 在注册和登录时加密密码="" reference="" php × 1429865="" c++ × 756500="" nginx × 49975="" mongodb × 159057="" mybatis × 3233="" anaconda × 13410="" pycharm × 14671="" python × 1902243="" vscode × 56040="" docker × 110988="" github × 49000="" flask × 49129="" ffmpeg × 24037="" jmeter × 16910="" matplotlib × 63493="" bootstrap × 54641<="" h1="">> ID：10375755
> 
> 赞同：2
> 
> 时间：
> 
> 标签：javascript

I'm developing a web app at the moment, and, being a perfectionist, I try to make it all shiny and compliant with all the standards. As far as I know, the `<img>` tag is to be deprecated in the upcoming standards for xHTML, and as nowadays even IE is able to handle `<object>` properly, I wanted to use the `<object>` tag for all the images on my site.

Now, I need to preload some of my images for standard `onmouseover` swapping. It was no problem with `<img>`:

```
var rateImagesURLs = new Array("images/mark0.png", "images/mark1.png");
var rateImages = new Array(rateImagesURLs.length);

for (var i=0;i<rateImagesURLs.length;++i) {
    rateImages[i] = new Image();
    rateImages[i].src = rateImagesURLs[i];
} 
```

but I can't get it to work with `<object>`. I just can't find a way to connect JavaScript's `Image` object to actual `<object>` tag. I tried playing with `<object>`'s `data`, as well as `archive` attribute, but even the guys at W3C seem to be unsure as to how to use it, suggesting in their documents separating values with spaces in one place, and then commas a few paragraphs below... So my question is: how do I preload images in JavaScript using `<object>` tag?

P.S. Sorry for lengthy intro for rather simple question.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-01T20:19:30.060

坦率地说，这很愚蠢。 `<img>` [不会去任何地方](http://dev.w3.org/html5/spec/the-img-element.html#the-img-element)，当然也不会“失宠”。实际上，**您引用的规范 (XHTML2)[已被放弃](http://www.w3.org/TR/xhtml2/)。**

> XHTML2 工作组的章程在完成本文档的工作之前就到期了。

您应该以标准为目标的是[HTML5](http://www.w3.org/TR/html5/)。尽管我不建议这样做，但如果您绝对坚持使用 XHTML，那么[XHTML5](http://en.wikipedia.org/wiki/HTML5#XHTML5)是 HTML5 的子集；但是，唯一的区别实际上是您用于服务页面的 MIME 类型。由于所需的 MIME 类型（`application/xhtml+xml`或`application/xml`）与旧版浏览器的兼容性较差，因此没有理由在标准网站/网络应用程序中使用它。

* * *

关于整个`<img>`/`<object>`事情：

从实际的角度来看，使用`<img>`. 您尝试使用`<object>`.

`<object>`不可访问。 `<img>`具有`alt`可访问性的属性，屏幕阅读器知道如何处理它。屏幕阅读器可能不知道如何处理`<object>`. 此外，`<object>`它不是语义的，它是完全通用的。 `<img>`意味着它是一个图像。

再说一次，`<img>`不会很快消失或失宠。在可预见的未来，它仍将是在 HTML 文档中嵌入图像的推荐方式。

* * *

最后，关于您如何完成图像翻转的评论：您不应该在 JavaScript 中执行此操作；使用 CSS。

理想情况下，您会使用 sprite（需要对所有图像发出一个 HTTP 请求，从而大大提高性能），并调整`background-position`in `:hover`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-01T19:02:28.250

我玩`<object>`了更长的时间，但是似乎没有任何干净的方法可以只预加载一次图像，然后将其`<object>`动态附加到不同的标签。这是最适合我的解决方案的示例代码，到目前为止，如果有人遇到同样的问题：

```
// Init
for (var i=0;i<imageCount;++i) {
    imagesUnset[i] = document.createElement("object");
    imagesUnset[i].setAttribute("type", "image/png");
    imagesUnset[i].setAttribute("data", imagesURLs[0]);
    imagesUnset[i].setAttribute("onmouseover", "switchImg(this);");

    imagesSet[i] = document.createElement("object");
    imagesSet[i].setAttribute("type", "image/png");
    imagesSet[i].setAttribute("data", imagesURLs[1]);
    imagesSet[i].setAttribute("onmouseover", "switchImg(this);");
}

function switchImg(caller) {
    // some code to identify caller's index in the array and the image to swap to
    caller.parentNode.replaceChild(newObject, caller);
} 
```

我们必须为要交换的每个图像创建单独的对象对；如果我们尝试使用同一个对象，JS 会给我们一个无效指针异常。不知道这在内存使用或性能方面是如何工作的，但它确实有效。

有趣的是，在缓存/缓冲方面，新的 IE (v.9) 比 Firefox 管理得更好。即使没有特殊的 JS 来管理缓冲，它也能够在不闪烁的情况下呈现更改。也许我会停止不喜欢它，最后。

如果有人找到更好的解决方案，请分享。谢谢。</imagecount;++i)></g:applylayout></string,></rateimagesurls.length;++i)>*</imagecount;++i)></g:applylayout>

# pdf - PDF 文件的一部分说明

> ID：10375757
> 
> 赞同：1
> 
> 时间：2012-04-29T20:35:06.070
> 
> 标签：pdf

PDF 文件的这一部分似乎导致[Poppler](http://poppler.freedesktop.org/)崩溃。[Xpdf](http://www.foolabs.com/xpdf/)似乎并没有因此而窒息。如果我删除`/I1 Do`和`/I2 Do`行，PDF 文件可以正常工作。有人可以快速解释一下这些可能在做什么吗？如果您需要查看 PDF 文件的其他部分，请告诉我。

```
1289 0 obj 
<<
/Length 72
>>
stream
q
360.00 0 0 583.20 0 0 cm
/I1 Do
Q
q
360.00 0 0 583.20 0 0 cm
/I2 Do
Q

endstream 
endobj 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T07:13:30.053

I1 和 I2 要么是图像，要么是 XObjects。可能出于某种原因，Poppler 无法解码其内容并崩溃。即使我看到该文件，我也不知道 Poppler 的内部结构，因此很难猜测是什么导致了问题，除非它是 PDF 结构中的明显错误。

# c++ - 数据成员初始化

> ID：10375759
> 
> 赞同：-3
> 
> 时间：2012-04-29T20:35:12.980
> 
> 标签：c++, class

在下面的代码中

```
#include<iostream>
#include<cstring>
using namespace std;
class data
{
public:
    long ddata;
    data(long dd)
    {
        ddata=dd;
    }
    void display()
    {
        cout<<ddata<<"  ";
    }
    };
class Node
{
     const  int order=4;
    int numitems;
    Node *parent;
    Node *childarray[order];
    data *item[order-1];
public:
    void connect(int childnum,Node *child)
    {
        childarray[childnum]=child;
        if(child!=NULL)
            child->parent=this;

    }
    //disconetc from this node,return it;

    Node *disconnectchild(int childnum)
    {
        Node *tempnode=childarray[childnum];
        childarray[childnum]=NULL;

     return  (tempnode);
    }
    Node *getchild(int childnum){
        return childarray[childnum];
}
    Node *getparent()
    {

        return parent;
    }
    bool isleaf()
    {
        return (childarray[0]==NULL)?true:false;

    }
    int getnumitems()
    {
        return numitems;
    }
    data *getitem(int index)
    {
        return item[index];
        }
        bool isfull()
    {

        return (numitems==order-1)?true:false;
    }
    int finditem(long key)
    {
        for(int j=0;j<order-1;j++)
        {
            if(item[j]==NULL)
                break;
            else if(item[j]->ddata==key)
                 return j;
            }
    return -1;
        }
    int insertitem(data *newitem)
    {
        numitems++;
        long newkey=newitem->ddata;
        for(int j=order-2;j>=0;j--)
        {
            if(item[j]==NULL)
                continue;
            else
            {
                long itskey=item[j]->ddata;
                if(newkey<itskey)
                    item[j+1]=item[j];
                else
                {
                    item[j+1]=newitem;
                    return j+1;

                }
                            }

        }
        item[0]=newitem;
        return 0;

    }
    data *removeitem()
    {
        data *temp=item[numitems-1];
        item[numitems-1]=NULL;
        numitems--;
        return temp;
        }
    void displayNode()
    {
        for(int j=0;j<numitems;j++)
            item[j]->display();
        cout<<endl;

    }

};

class tree234
{

private:
    Node *root=new Node();

}; 
```

它说不允许数据成员初始化程序，Node root = new Node（）它是java中的示例，我在root前面添加了星号，但还没有成功，请告诉我如何纠正它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:44:58.083

在 C++03 中，您不能像在声明时那样初始化指针。您应该在构造函数中对其进行初始化：

```
class tree234
{
public :
    tree234() : root(new Node()) {}
private:
    Node* root;
}; 
```

在 C++11 中可以这样做

```
class tree234
{
private:
    Node* root = new Node(); // or Node* root{new Node()}
}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T20:45:00.473

你不能像这样初始化成员变量：在构造函数或构造函数的初始化列表中初始化它们。

在 C++03 中，只有`static const`整数类型的成员可以这样初始化。我认为在 C++11 中这已被扩展，但我不确定确切的细节。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T20:54:58.300

您在几个地方遇到了基本相同的问题，但由于情况不同，它们的修复方法也不同。在代码的第 19 行，您有：

```
class Node
{
    const  int order=4;    // line 19 
```

由于这显然旨在应用于 的所有实例`Node`，因此您可以通过使其成为`static`成员来使其工作：

```
static const int order = 4; 
```

对于`static const`变量，您可以像这样进行就地初始化，因为变量具有静态持续时间（生命周期），所以这几乎就像一个全局的定义`const`，只是它的名称仅在`Node`的范围内可见。

另一个问题类似：

```
class tree234
{
private:
    Node *root=new Node(); 
```

...但在这种情况下，修复*完全*不同。在这里，您很明显想`root`成为一个实例变量——即，您创建的每棵树都需要有自己的根节点。因此，您需要定义一个普通的成员变量（即 not `static`），并且您需要在构造函数中对其进行初始化：

```
class tree234
    Node *root;
public:
    tree234() : root(new Node()) {}
}; 
```

然而，我注意到，这个初始化看起来……对我来说很可疑。我的直接猜测是，一棵空树可能根本*不*应该包含任何节点，所以初始化应该是：

```
class tree234
    Node *root;
public:
    tree234() : root(NULL) {}
}; 
```

...并且当您向树添加数据时/如果/当您向树添加数据时，将添加节点——但空树将保持不变：空。

# php - Passing variables without a form using url

> ID：10375766
> 
> 赞同：-1
> 
> 时间：2012-04-29T20:36:09.213
> 
> 标签：php, parameter-passing

I have been trying to find information on passing variables without a form using url, but I can't seem to find anythig that pertains to my situation. Basically I need to have a page that is hierachical in the sense that you can click one course out of a list, that brings you to a list of sections, and you can click on a section which will bring to a page with the correct information for that one section. I was taught for this situation to use $_SESSION and then to include the variables in the url. My problem is that everytime I click on a course or a section, the information for every single course or section that is a query match is displaying rather than just the information for that one course or section. This is what I have for each of the pages in hierarchical order (not including the connect portion of the code which works fine anyways). I know this is a ton of code, and a complete mess. I will keep searching out information, and many many thanks in advance for any help.

List of Courses

```
 session_start(); 
$section = $_SESSION['section_id'];
$user_fname = $_SESSION['user_fname'];
$user_lname = $_SESSION['user_lname'];

     $query = "SELECT DISTINCT course_t.course_id, course_name, user_fname, user_lname, section_t.section_id   
               FROM   course_t, authorized_user_t, section_t, teaching_history_t
               WHERE authorized_user_t.authorized_user_id = teaching_history_t.instructor_id
                AND teaching_history_t.section_id = section_t.section_id
                AND section_t.course_id = course_t.course_id";

 $result = @mysql_query($query);

 while ($line1 = mysql_fetch_array($result, MYSQL_ASSOC)) {

   echo '<p align = "center"><strong><a href ="section_list.php?section_id='.$line1['section_id'].'&user_fname='.$line1['user_fname'].'&user_lname='.$line1['user_lname'].'">' .$line1['course_id'].':'.$line1['course_name']. '</a></strong><br><br>'; 

     } 
```

List of Sections (it is supposed to list a single intructor and then each of the sections they teach under their name)

```
 session_start();

 $section_id = $_REQUEST['section_id'];
 $user_fname = $_REQUEST['user_fname'];
 $user_lname = $_REQUEST['user_lname'];

$course_id = $_SESSION['course_id'];
$course_name = $_SESSION['course_name'];
$section_id = $_SESSION['section_id'];
$semester = $_SESSION['semester'];
$year = $_SESSION['year'];
$course_description = $_SESSION['course_description'];
$SGoal_Description = $_SESSION['SGoal_Description'];
$sobjective_description = $_SESSION['sobjective_description'];
$LObjective_Description = $_SESSION['LObjective_Description'];
$topic_title = $_SESSION['topic_title'];
$topic_description = $_SESSION['topic_description'];
$coursework_title = $_SESSION['coursework_title'];
$coursework_location = $_SESSION['coursework_location'];
$coursework_description = $_SESSION['coursework_description'];

  $query = "SELECT course_t.course_id, course_name, section_t.section_id, semester, year, course_description,
                  SGoal_Description, sobjective_description, LObjective_Description, topic_title, topic_description, coursework_title, 
                  coursework_location, coursework_description, syllabus 
               FROM course_t, section_t, section_goal_section_t, section_goal_t, section_coursework_t,
                 mapped_topic_section_t, mapped_lis_section_t, coursework_t, topic_t, lis_objective_t, section_objective_t
               WHERE course_t.course_id = section_t.course_id
                 AND section_t.section_id = section_goal_section_t.section_id
                 AND section_goal_section_t.sgoal_id = section_goal_t.sgoal_id
                 AND section_goal_section_t.section_id = mapped_lis_section_t.section_id
                 AND mapped_lis_section_t.lobjective_id = lis_objective_t.lobjective_id
                 AND section_t.section_id = mapped_topic_section_t.section_id
                 AND mapped_topic_section_t.topic_id = topic_t.topic_id
                 AND section_t.section_id = section_coursework_t.section_id
                 AND mapped_lis_section_t.sobjective_id = section_objective_t.sobjective_id
                 AND section_coursework_t.coursework_id = coursework_t.coursework_id"; 

   $result = @mysql_query($query);

         while ($line1 = mysql_fetch_array($result, MYSQL_ASSOC)) {

   echo '<ul align = "center"<strong>' .'Instructor'. ':' ."$user_fname". "$user_lname".'<li align = "center">
   <a href ="course_section.php?course_id='.$line1['course_id'].'&course_name='.$line1['course_name'].'&section_id='.$line1['section_id'].'
     &semester='.$line1['semester'].'&year='.$line1['year'].'&course_description='.$line1['course_description'].'
     &SGoal_Description='.$line1['SGoal_Description'].'&sobjective_description='.$line1['sobjective_description'].'
     &LObjective_Description='.$line1['LObjective_Description'].'&topic_title='.$line1['topic_title'].'
     &topic_description='.$line1['topic_description'].'&coursework_title='.$line1['coursework_title'].'
     &coursework_location='.$line1['coursework_location'].'&coursework_description='.$line1['coursework_description'].'">'.$line1['section_id'].'</a></strong><br><br>'; 

  } 
```

Section Information (should display information for the section that is clicked on)

```
 session_start();

       $topic_description = $SESSION['topic_description'];
       $coursework_description = $SESSION['coursework_description'];

         $course_id = $_REQUEST['course_id'];
         $course_name = $_REQUEST['course_name'];
         $section_id = $_REQUEST['section_id'];
         $semester = $_REQUEST['semester'];
         $year = $_REQUEST['year'];
         $course_description = $_REQUEST['course_description'];
         $SGoal_Description = $_REQUEST['SGoal_Description'];
         $sobjective_description = $_REQUEST['sobjective_description'];
         $LObjective_Description = $_REQUEST['LObjective_Description'];
         $topic_title = $_REQUEST['topic_title'];
         $topic_description = $_REQUEST['topic_description'];
         $coursework_title = $_REQUEST['coursework_title'];
         $coursework_location = $_REQUEST['coursework_location'];
         $coursework_description = $_REQUEST['coursework_description'];

    echo '<div align  = "right">';   

     echo '<a href="section_list.php">Return to List of Sections</a>';

        echo '</div>';

    $query = "SELECT DISTINCT course_t.course_id, course_name, section_t.section_id, semester, year, course_description,
                  SGoal_Description, sobjective_description, LObjective_Description, topic_title, topic_description, coursework_title, 
                  coursework_location, coursework_description, syllabus 
                FROM course_t, section_t, section_goal_section_t, section_goal_t, section_coursework_t,
                 mapped_topic_section_t, mapped_lis_section_t, coursework_t, topic_t, lis_objective_t, section_objective_t
               WHERE course_t.course_id = section_t.course_id
                 AND section_t.section_id = section_goal_section_t.section_id
                 AND section_goal_section_t.sgoal_id = section_goal_t.sgoal_id
                 AND section_goal_section_t.section_id = mapped_lis_section_t.section_id
                 AND mapped_lis_section_t.lobjective_id = lis_objective_t.lobjective_id
                 AND section_t.section_id = mapped_topic_section_t.section_id
                 AND mapped_topic_section_t.topic_id = topic_t.topic_id
                 AND section_t.section_id = section_coursework_t.section_id
                 AND mapped_lis_section_t.sobjective_id = section_objective_t.sobjective_id
                 AND section_coursework_t.coursework_id = coursework_t.coursework_id"; 

       $result = @mysql_query($query);

    while ($line1 = mysql_fetch_array($result, MYSQL_ASSOC))   {

      echo '<p align = "center"><strong>' .$line1['course_id'].':'.' '.$line1['course_name']. '</strong><br><br>';

       echo '<p align = "center"><strong>' .$line1['section_id'].':'.' '.$line1['semester'].'/'.$line1['year']. '</strong><br><br>';

       echo '<p align = "left"><strong>' .$line1['course_description'].'</strong><br><br><br><br>';

  echo '<div align  = "left">';           

       echo '<ul align = "left"><strong>Section Goals:</strong></ul><li align = "left">' .$line1['SGoal_Description']. '</li>';

       echo '<ul align = "left"><strong>Section Objectives:</strong></ul><li align = "left">' .$line1['sobjective_description']. '</li>';

       echo '<ul align = "left"><strong>Mapped Objectives:</strong></ul><li align = "left">' .$line1['LObjective_Description']. '</li>';

       echo '<ul align = "left"><strong>'.'Topic'.':'.' '.$line1['topic_title']. '</strong></ul>
         <li align = "left"><a href = "topic_description.php?topic_description= '.$line1['topic_description'].'"target="_blank">Click for Topic Description</a>';

       echo '<ul align = "left"><strong>'.'Coursework'.':'.' '.$line1['coursework_title']. '</strong></ul>
         <li align = "left"><a href = "coursework_description.php?coursework_description= '.$line1['coursework_description'].'"target="_blank">Click for Coursework Description</a>';

  } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:41:34.437

不要使用会话，只需将其包含在 URL 中，例如：example.com/index.php?example=true。如果您使用 $_GET['example'] 它将具有 value `'true'`。

# ios - 在基于标签栏的应用程序上使用 UINavigationController 将数组添加到 UITableView

> ID：10375770
> 
> 赞同：1
> 
> 时间：2012-04-29T20:36:31.730
> 
> 标签：ios, xcode, uitableview, uinavigationcontroller, tabbar

我以前制作过简单的可可触摸应用程序，但我从未使用过 UINavigationControllers，任何建议将不胜感激。

我正在尝试将商店名称列表的数组添加到 UITableView。UITableView 通过 UINavigation 控制器通过选项卡栏上的选项卡访问。

我有一个包含标签栏的 TabBarController.xib 文件。我还有一个包含 UINavigationController 的 AtoZNavigationController.xib。我有一个包含 UITableView 的 AtoZTableController.xib 文件。

*这是我的 AppDelegate.h：*

```
#import <UIKit/UIKit.h>
@class AtoZNavigationController;

@interface AppDelegate : UIResponder <UIApplicationDelegate>

@property (strong, nonatomic) UIWindow *window;
@property (strong, nonatomic) IBOutlet UITabBarController *rootController;
@property (strong, nonatomic) IBOutlet AtoZNavigationController *navController;

@end 
```

*AppDelegate.m*

```
#import "AppDelegate.h"
#import "AtoZNavigationController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize rootController;
@synthesize navController;

#pragma mark -
#pragma mark Application lifecycle

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:       (NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.

[[NSBundle mainBundle] loadNibNamed:@"TabBarController" owner:self options:nil];
  [self.window addSubview:rootController.view];
  self.window.backgroundColor = [UIColor whiteColor];
  [self.window makeKeyAndVisible];

return YES;
}
@end 
```

*AtoZNavigationController.h*

```
#import <UIKit/UIKit.h>

@interface AtoZNavigationController : UINavigationController

@end 
```

*AtoZNavigationController.m*

```
#import "AtoZNavigationController.h"

@interface AtoZNavigationController ()

@end

@implementation AtoZNavigationController

-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

-(void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view from its nib.
}

-(void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

@end 
```

*AtoZTableController.h*

```
#import <UIKit/UIKit.h>

@interface AtoZTableController : UITableViewController <UITableViewDelegate,       UITableViewDataSource>
{
    IBOutlet UITableView *AtoZTableView;
    NSMutableArray *AtoZArray;
}

@property (nonatomic, retain) IBOutlet UITableView *AtoZTableView;
@end 
```

*AtoZTableController.h*

```
#import "AtoZTableController.h"

@interface AtoZTableController ()

@end

@implementation AtoZTableController
@synthesize AtoZTableView;

-(id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

 -(void)viewDidLoad
 {
     [super viewDidLoad];

     self.title = NSLocalizedString(@"A to Z", @"An A to Z List of Stores");

     AtoZArray = [[NSMutableArray alloc] init];

    [AtoZArray addObject:@"Apple"];
    [AtoZArray addObject:@"Boots"];
    [AtoZArray addObject:@"Topman"];
}

 -(void)viewDidUnload
{
     [super viewDidUnload];
     // Release any retained subviews of the main view.
     // e.g. self.myOutlet = nil;
}

-(BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 0;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    // Return the number of rows in the section.
    return [AtoZArray count];
}

 -(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    NSInteger row = [indexPath row];
    cell.textLabel.text = [AtoZArray objectAtIndex:row];
    return cell;
}
#pragma mark - Table view delegate

-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    /*
     <#DetailViewController#> *detailViewController = [[<#DetailViewController#> alloc] initWithNibName:@"<#Nib name#>" bundle:nil];
     // ...
     // Pass the selected object to the new view controller.
     [self.navigationController pushViewController:detailViewController animated:YES];
     */
}
@end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:51:29.097

在你的`AtoZTableController.h`，你有问题。

问题出在您的 'tableView:cellForRowAtIndexPath:' 方法中。这就是你所拥有的：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...

    NSInteger row = [indexPath row];
    cell.textLabel.text = [AtoZArray objectAtIndex:row];
    return cell;
} 
```

问题是您永远不会处理`nil`from的返回值`dequeueReusableCellWithIdentifier:CellIdentifier`。

试试这个：

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // What happens if you don't get a cell to use?
    // This is the way to create a new, default UITableViewCell
    if (!cell) {            
        // You can look at the UITableViewCell class reference to see the 4 available styles
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    // Configure the cell...
    NSInteger row = [indexPath row];
    cell.textLabel.text = [AtoZArray objectAtIndex:row];
    return cell;
} 
```

* * *

**编辑/更新：**

好的，所以很难确切地知道你的错误在哪里，所以我会为你设置/描述一个典型的情况（或者我会如何在你的鞋子里做）。

如果您创建一个新应用程序并在 Xcode 中选择“选项卡式应用程序”模板，您会在您的应用程序委托中获得以下方法（或多或少；我将其压缩了一点并“修复”了 Apple 使用点表示法的糟糕选择）：

***注意：***我相信您在推送新视图控制器时遇到的问题现在将在下面得到解决......***结束说明***

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    [self setWindow:[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]]];
    // Override point for customization after application launch.
    UIViewController *vc1 = [[FirstViewController alloc] initWithNibName:@"FirstVC" bundle:nil];
    // New line...
    UINavigationController *navC = [[UINavigationController alloc] initWithRootViewController:vc1];
    UIViewController *vc2 = [[SecondViewController alloc] initWithNibName:@"SecondVC" bundle:nil];
    [[self setTabBarController:[[UITabBarController alloc] init]];
    // Change here, too...
    [[self tabBarController] setViewControllers:[NSArray arrayWithObjects:navC, vc2, nil]];
    [[self window] setRootViewController:[self tabBarController]];
    [[self window] makeKeyAndVisible];
    return YES;
} 
```

此方法设置了启动应用程序所需的一切，其中创建了 2 个 UIViewController，并将其设置为 UITabBarController 内的选项卡 1 和选项卡 2。

现在，您可以使 FirstViewController 和 SecondViewController 成为您想要的任何东西。出于这个问题的目的，我们假设您想要更改 FirstViewController 以托管 UITableView，当用户选择屏幕上的一行时，它将推送一个详细的 UIViewController。

**要求** *FirstViewController*必须是 UITableViewController 的子类（这*不是*默认模板提供的），*或者*您必须将 UITableView 添加到 FirstViewController 的视图并设置所有连接。

假设您要将 FirstViewController 保留为标准 UIViewController 子类，并且您将在其视图中添加一个 UITableView。（我可能会将其更改为 UITableViewController 子类，但这可能会更令人困惑。）

首先，在 FirstViewController.h 中，更改：

```
@interface MMFirstViewController : UIViewController 
@end 
```

对此：

```
@interface MMFirstViewController : UIViewController <UITableViewDataSource, UITableViewDelegate> {
    UITableView *TableView;
}
@property (strong, nonatomic) IBOutlet UITableView *TableView;
@end 
```

接下来，在 FirstViewController.m 中，合成 TableView 属性 ( `@synthesize TableView`)。接下来，单击 Xcode 中的 FirstViewController.xib 以在 Interface Builder 中加载它（我假设您使用的是 Xcode 4）。现在，将 UITableView 从控制面板拖到 UIViewController 的视图上。在 Interface Builder 中进行以下连接：

1.  右键单击`File's Owner`并将 TableView 属性连接到您放置在 FirstViewController 视图上的 UITableView。
2.  右键单击 UITableView 并将**AND**属性`datasource` **连接** `delegate`到`File's Owner`.

现在，您发布的初始化和填充代码`AtoZArray`应该可以正常工作。不要忘记复制你之前拥有的 3 个 UITableView 方法`numberOfSectionsInTableView:`，`tableView:numberOfRowsInSection:`和`tableView:cellForRowAtIndexPath:`。

这些步骤应该让你工作，也应该让你看到你在设置中可能出错的地方。请注意，您仍然必须自己弄清楚`tableView:didSelectRowAtIndexPath:`才能推入新的 UIViewController。

这是一个让您入门的预告片：

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Navigation logic may go here. Create and push another view controller.
    ThirdViewController *detailVC = [[ThirdViewController alloc] initWithNibName:@"ThirdViewController" bundle:nil];
    [[self navigationController] pushViewController:detailVC animated:YES];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-05-03T17:46:10.307

我必须创建一个navigationController 的实例并将它与tabBarController 一起传递到我的appDelegate.m 中的子视图中。然后可以在我的 UITableViewController 中引用它。

这是我添加的代码：

```
navigationController = [[UINavigationController alloc] initWithRootViewController:_tabBarController];
[self.window addSubview:_tabBarController.view];
[self.window addSubview:navigationController.view];
[self.window makeKeyAndVisible]; 
```

navigationController 只是 UITableViewController 或 UIViewController 的子类的一个实例，具体取决于您要显示的屏幕类型。

# django - 在 Django 的管理员中隐藏名字和姓氏

> ID：10375771
> 
> 赞同：0
> 
> 时间：2012-04-29T20:36:31.897
> 
> 标签：django, django-admin

我不喜欢将用户名强制转换为单独的 first_name 和 last_name 字段，因此我将 user.first_name 和 user.last_name 替换为 profile.fullname。

在管理员中显示所有三个名称是没有意义的，所以我尝试了这个：

```
admin.site.unregister(User)

class ProfileInline(admin.StackedInline):
    model = Profile

class ProfileAdmin(UserAdmin):
    inlines = [ProfileInline]
    exclude = ('first_name', 'last_name')

admin.site.register(User, ProfileAdmin) 
```

这不起作用，我不知道为什么：

> 渲染时捕获 KeyError：“在表单中找不到键 'first_name'”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:28:53.730

参考[代码](https://code.djangoproject.com/browser/django/trunk/django/contrib/auth/admin.py#L41)，`'last_name'`and`'first_name'`已经在[`fieldsets`](https://docs.djangoproject.com/en/1.4/ref/contrib/admin/#django.contrib.admin.ModelAdmin.fieldsets). 然后发生错误，因为布局声明说存在`last_name`并且`first_name`在表单字段中不再存在。覆盖`fieldsets`将解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-02-06T22:19:45.947

```
class UserAdminCustom(UserAdmin):

    def get_fieldsets(self, request, obj=None):
        fieldsets = super().get_fieldsets(request, obj)
        new = []
        for name, fields_dict in fieldsets:
            if fields_dict['fields'] == ('first_name', 'last_name', 'email'):
                fields_dict['fields'] = ('email',)
            new.append((name, fields_dict))
        return new 
```

# facebook - I can access https://apps.facebook.com/APP_ID/ but not /APP_NAMESPACE/

> ID：10375773
> 
> 赞同：1
> 
> 时间：2012-04-29T20:36:34.567
> 
> 标签：facebook

I also cannot change the namespace of my app. When changing a setting on my app and clicking save changes, I am presented the error message

Unable to update App Namespace: An error occurred while setting the App Namespace. Please try again later.

Settings are saved (urls for instance) but namespace just can't be saved.

I also cannot create a new app (same error).

**EDIT** : It came back to life magically this morning...

# java - Somehow my GUI got stuck when I click on a button to perform a method call

> ID：10375774
> 
> 赞同：1
> 
> 时间：2012-04-29T20:36:41.257
> 
> 标签：java, multithreading, swing, user-interface, event-dispatch-thread

I want to update the board configuration by clicking on a JButton. However, sometimes the image is displayed on the frame. sometimes is not. Everytime there is a significant delay after I click on the button. I tried debugging and found there might be a endless loop in :EventDispatchThread.class

```
(this is the class from java library)
void pumpEventsForFilter(int id, Conditional cond, EventFilter filter) {
    addEventFilter(filter);
    doDispatch = true;
while (doDispatch && cond.evaluate()) {
        if (isInterrupted() || !pumpOneEventForFilters(id)) {
            doDispatch = false;
        }
    }
    removeEventFilter(filter);
} 
```

The endless loop is the while loop above.

Below is my listener class:

```
public class PlaceListener implements ActionListener{

private JTextField _text1;
private Board board;
private JTextField _text2;
private ArrayList<NewGUI> _guiList;
private int _numOfPlayer;
public PlaceListener(JTextField text1, JTextField text2, Board b,ArrayList<NewGUI> guiList, int numOfPlayer,NewGUI gui)
{
    _text1 = text1;
    _text2 = text2;
    board = b;
    _guiList = guiList;
    _numOfPlayer = numOfPlayer;
}
@Override
public void actionPerformed(ActionEvent e) {

    int x = Integer.parseInt(_text1.getText());
    int y = Integer.parseInt(_text2.getText());

    board.Place(y, x);

    for(int j = 0;j<_numOfPlayer;j++)
    {
          NewGUI gui = _guiList.get(j);
          gui.updateBoard();
          gui.updateCurrTile();
          gui.updateScore();
          gui.updateTurn();
    }
} 
```

}

The basic idea is: I have an array of GUI. after each click, the listener will call all the GUIs within the array to update their configuration.

I also tried to update the board configuration within the GUI class directly, and it turns out to work well. I'm extremely confused! Can anyone help me out? Thanks!!

This is the main GUI class:

```
public class NewGUI {
private JFrame _frame;
    private Board _board;
private JLabel _turnLabel;
private JTextArea _textArea;
private JLabel _currTileLabel;
private JPanel _boardPanel;
public NewGUI(Board board,int whos,ArrayList<NewGUI> guiList,int numOfPlayer)
{
    _board = board;

   _frame = new JFrame("Metro");    

   //turnLabel
   _turnLabel = new JLabel();
   _turnLabel.setText("Current player is: "+_board.getCurrPlayer());
   _turnLabel.setSize(110, 40);
   _turnLabel.setLocation(0, 0);
   _frame.add(_turnLabel);

   //mainPlayerLabel
   JLabel mainPlayerLabel = new JLabel("Player"+whos+" 's window");
   mainPlayerLabel.setSize(120, 20);
   mainPlayerLabel.setLocation(400,0);
   _frame.add(mainPlayerLabel);

   //JTextArea to hold scores
   _textArea = new JTextArea();
   _textArea.setText(_board.displayScore());
   _textArea.setSize(160,140);
   _textArea.setLocation(730, 170);
   _frame.add(_textArea);

   _boardPanel = new JPanel();
   _boardPanel.setSize(560, 560);
   _boardPanel.setLocation(170, 80);
   _boardPanel.setLayout(null);
 //  _boardPanel.setBackground(java.awt.Color.BLACK);
   _frame.add(_boardPanel);

   //Button Panel
   JPanel buttonPanel = new JPanel();
   buttonPanel.setSize(300, 150);
   buttonPanel.setLocation(280, 650);
   buttonPanel.setBackground(java.awt.Color.blue);
   _frame.add(buttonPanel);

   //Current Tile Label
   _currTileLabel = new JLabel("Current Tile is: ");
   _currTileLabel.setIcon(new ImageIcon(NewGUI.class.getResource(_board.getCurrTile().tileType()+".png")));
   _currTileLabel.setSize(170, 60);
   _currTileLabel.setLocation(20, 620);
   _frame.add(_currTileLabel);

   //2 input JTextField
   JTextField text1 = new JTextField(3);
   JTextField text2 = new JTextField(3);
   text1.setSize(20, 20);
   text2.setSize(20, 20);
   text1.setLocation(620, 680);
   text2.setLocation(640, 680);
   _frame.add(text1);
   _frame.add(text2);

   //Buttons
   JButton buttonPlace = new JButton("Place");
   JButton buttonCommit = new JButton("Commit");
   JButton buttonRemove = new JButton("Remove");
   JButton buttonResign = new JButton("Resign");

   buttonPlace.addActionListener(new PlaceListener(text1,text2,_board,guiList,numOfPlayer,this));
   buttonCommit.addActionListener(new CommitListener(_board,guiList,numOfPlayer));
   buttonRemove.addActionListener(new RemoveListener(_board,guiList,numOfPlayer,this));
   buttonResign.addActionListener(new ResignListener(_board));

   //Add buttons onto buttonPanel
   buttonPanel.add(buttonCommit);
   buttonPanel.add(buttonResign);
   buttonPanel.add(buttonRemove);
   buttonPanel.add(buttonPlace);
   buttonPanel.setLayout(new FlowLayout());

   _frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
   _frame.setSize(900, 900);
   _frame.setLayout(null);
   _frame.setVisible(true);

}

public void updateBoard()
{
    _boardPanel.removeAll();
    //scan and refresh the board configuration.
    for(int i = 1; i<13;i++)
    {
        for(int j = 1; j<13;j++)
        {
            if(_board.getBoard()[i][j]!=null)
            {

              for(int e = 65; e<89;e++){
                  char temp = (char)e;
                  if(_board.getBoard()[i][j].tileType()==temp)
                  {

                JLabel label = new JLabel(new ImageIcon(NewGUI.class.getResource(temp+".png")));
                label.setSize(40,40);
                label.setLocation(40+(i-1)*40, 40+(j-1)*40);
                _boardPanel.add(label);
                break;
                  }
            }
        }
        }
    }
}

public void updateTurn()
{
    _turnLabel.setText("Current player is: "+_board.getCurrPlayer());
}
public void updateScore()
{
    _textArea.setText(_board.displayScore());
}
public void updateCurrTile()
{
    _currTileLabel.setIcon(new ImageIcon(NewGUI.class.getResource(_board.getCurrTile().tileType()+".png")));
}

public static void main(String[] args)
{
    Board b = new Board(3,true);
    NewGUI gui = new NewGUI(b,1);
    b.Place(4, 4);
    b.Commit();
    b.Place(12, 12);
    b.Commit();
    b.Place(3, 3);
    gui.updateBoard();
}

} 
```

See the last static main class? when I test it , all the update methods work well! But when I use listener to perform the method all. The updateBoard refuses to work.

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:17:01.023

所以看起来你的代码可能是这里的问题。EventDispatchThread 再次使用无限循环来泵送事件，这很明显，并且可以忽略为实际问题。您的问题来自使用 removeAll()，并且每次单击按钮时都会实例化几千个标签（什么是 13 x 13 x 89-65？4056！）。这将导致大量不必要的重绘和重新布局。因此，您看到的暂停是代码的性能，因为它效率不高。不信试试这个：

```
public void updateBoard() {
    long start = System.currentTimeInMillis();

    // existing code goes here

    long duration = System.currentTimeMillis() - start;
    System.out.printf("UpdateBoard timing: %,d ms%n", duration );
} 
```

如果您的代码超过 10-100 毫秒，它会感觉有问题。事实上，100 毫秒是慢的，人类可以检测到 100 毫秒的延迟。

您可能需要重新评估您的设计，或者重用现有标签并简单地调用 setImage() 来更改它们。毕竟，这就是使用持久 UI 组件模型而不是使用原始绘制调用的全部意义所在。将它们实例化一次并重用。

您还使用新的 ImageIcon() 调用创建了数千张图像。您可能只需要一个图标，并且所有标签都指向同一个图像，这也将大大减少您的内存使用量。事实上，如果你听从我的建议，我想你会看到显着的速度和内存改进。

如果您找不到合适的方法来重用 JLabel，请考虑通过继承 JComponent 或 JPanel（如果您打算使用容器）来编写您自己的组件并覆盖 paintComponent()。我看到你没有使用 LayoutManager 而是选择使用绝对定位来做所有事情。如果您要进行绝对定位，您可能只想自己绘制。绘画是更底层的界面，但你有完全的控制权。您必须自己处理定位、自动换行。但是，它将非常有效，您可以从数据模型中重绘。

由于您所做的只是以网格模式绘制图像，因此我认为使用 Java2D api 绘制图像比实例化那么多 JLabel 和 ImageIcon 更好。如果您将 JPanel 子类化，您可以将 JComponents 添加到面板中以获取分数等内容。但是，请在 paintComponent() 方法中绘制网格。

# pointers - CreateIndexBuffer() crashes,some kind of pointer error.What could be causing this?

> ID：10375779
> 
> 赞同：0
> 
> 时间：2012-04-29T20:37:17.770
> 
> 标签：pointers, null, directx, buffer, direct3d

I get

```
Unhandled exception at 0x004687b4 in D3DTest.exe: 0xC0000005: Access violation reading location 0x00000000\. 
```

the error is at:

```
m_d3dDevice->CreateIndexBuffer(sizeof(short)*CHUNK_PRIMITIVES*3,D3DUSAGE_WRITEONLY, D3DFMT_INDEX16, D3DPOOL_MANAGED, &m_ib, NULL); 
```

Now I checked **m_d3dDevice** and it's all OK,everything works properly if I don't create the buffer. **m_ib** is also propery created before being used in that function:

```
LPDIRECT3DVERTEXBUFFER9 m_vb;
    m_vb = NULL; 
```

I don't think anything else could be causing the problem.I'm confused.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T21:43:58.937

尝试从 DirectX 控制面板启用调试运行时，如果有任何警告和错误，它将向您显示，并始终检查 DX 函数的返回代码。

显示创建索引缓冲区的整个函数的代码也会有所帮助。

# c# - 将进程内存读入字符串

> ID：10375781
> 
> 赞同：0
> 
> 时间：2012-04-29T20:37:59.187
> 
> 标签：c#, readprocessmemory

我知道关于进程的一切以及我想读取的地址，但我不知道如何使用 Readprocessmemory 函数。我需要添加一些用途吗？我是用 C++ 做的，但我怎么能用 C# 做呢？

```
 char* ReadMemoryText(DWORD address,int size)
    {
        char ret[size];
        DWORD processId;
        HWND hwnd = FindWindow("WindowX",NULL);
        if(tibia!=NULL)
        {
            GetWindowThreadProcessId(hwnd,&processId);
            HANDLE phandle = OpenProcess(PROCESS_VM_READ, 0, processId);
            if(!phandle)
            {
                cout<<GetLastError()<<endl;
                cout <<"Could not get handle!\n";
                cin.get();
            }
            ReadProcessMemory(phandle, (LPVOID)address, &ret,size,0);
            char * rt = ret;
            for(int i=0;i<size && ret[i]!=0;++i)
                cout << ret[i];
            return rt;
        }
        return NULL;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2020-03-28T19:41:19.513

这是使用 C# 从内存中读取 char 数组的示例。在这种情况下，它是来自 Assault Cube 的本地玩家的姓名字符串。

```
[DllImport("kernel32.dll", SetLastError = true)]
public static extern bool ReadProcessMemory(
IntPtr hProcess, IntPtr lpBaseAddress, byte[] lpBuffer, Int32 nSize, out IntPtr lpNumberOfBytesRead);

var nameAddr = ghapi.FindDMAAddy(hProc, (IntPtr)(modBase2 + 0x10f4f4), new int[] { 0x225 });

byte[] name = new byte[16];

ghapi.ReadProcessMemory(hProc, nameAddr, name, 16, out _);

Console.WriteLine(Encoding.Default.GetString(name)); 
```

我们使用 pinvoke 来访问从 kernel32.dll 导出的 ReadProcessMemory

我们使用 FindDMAAddy 来获取 name 变量的地址。char 数组是 16 字节的固定大小。

我们使用 ReadProcessMemory 使用源变量和目标变量，大小为 16，最后一个参数我们只使用“out _”，因为我们不关心 bytesRead 参数。

然后我们需要将该 char 数组转换为具有正确编码的字符串类型，为此我们使用 Encoding.Default.GetString()。

然后将该行写入控制台。

# android - 如何在android中点击模拟时钟打开闹钟设置

> ID：10375782
> 
> 赞同：1
> 
> 时间：2012-04-29T20:38:05.990
> 
> 标签：android, widget

我为 Android 4 创建了一个模拟时钟小部件。现在我想模仿与原生模拟时钟小部件相同的行为，即在点击时钟时显示闹钟设置窗口。

搜索后发现这个话题： [Intent to launch the clock application on android](https://stackoverflow.com/questions/3590955/intent-to-launch-the-clock-application-on-android)

哪个启动桌面时钟而不是闹钟设置。我想我必须对 android.provider.AlarmClock 做点什么，但我无法让它启动警报窗口。有谁知道如何实现这一目标？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T04:05:44.253

在我的`AppWidgetProvider`班级中，以下内容适用于 4.1.2（前提是您只希望它在 4.x 上工作 - 否则您将需要条件逻辑来为适当的版本选择正确的包和类名，就像在您发布的帖子中一样链接到）：

```
public void onReceive(Context context, Intent intent) {
    String action = intent.getAction();
    PendingIntent pendingIntent;
    if (AppWidgetManager.ACTION_APPWIDGET_UPDATE.equals(action)) {
        RemoteViews views = new RemoteViews(context.getPackageName(),
                R.layout.main);
        pendingIntent = PendingIntent.getActivity(context, 0,
                getAlarmPackage(context), 0);
        views.setOnClickPendingIntent(R.id.analogClock1, pendingIntent);

        AppWidgetManager
                .getInstance(context)
                .updateAppWidget(
                        intent.getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS),
                        views);
    }
}

private Intent getAlarmPackage(Context context) {
    PackageManager manager = context.getPackageManager();
    Intent intent = new Intent(Intent.ACTION_MAIN)
            .addCategory(Intent.CATEGORY_LAUNCHER);

    try {
        ComponentName c = new ComponentName("com.google.android.deskclock",
                "com.android.deskclock.AlarmClock");
        manager.getActivityInfo(c, PackageManager.GET_META_DATA);
        intent.setComponent(c);
    } catch (NameNotFoundException nf) {
        Log.d("XXXX", "Caught name not found exception!");
    }

    return intent;
} 
```

基本上，使用`com.android.deskclock.AlarmClock`(with `com.google.android.deskclock`) 而不是`com.android.deskclock.DeskClock`生成警报列表而不是闹钟屏幕。

# ruby - Sinatra 缓存控制不起作用

> ID：10375788
> 
> 赞同：1
> 
> 时间：2012-04-29T20:38:46.707
> 
> 标签：ruby, caching, sinatra, sinatra-assetpack

这就是我对我的服务器所做的

```
set :static_cache_control, [:public, {:max_age => 604800}] 
```

但是，当我使用萤火虫时，我仍然看到 0 max-age。我正在使用 Sinatra 资产包[http://ricostacruz.com/sinatra-assetpack/](http://ricostacruz.com/sinatra-assetpack/)

我不确定它们是否相互冲突？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T14:15:14.090

你在哪个文件中添加 max-age 标头？
如果是 JavaScript 或 CSS 文件，请尝试使用 Sinatra-assetpack 构建文件。
构建的文件位于“公共”目录下。
请看下文，写出如何构建。
[http://ricostacruz.com/sinatra-assetpack/#need_to_build_the_files](http://ricostacruz.com/sinatra-assetpack/#need_to_build_the_files)

# javascript - 使页面变暗/变暗，但以下情况除外

> ID：10375790
> 
> 赞同：1
> 
> 时间：2012-04-29T20:38:52.570
> 
> 标签：javascript, ajax

我已经编写了一些 jsp/ajax 页面，它们的工作方式已经消耗殆尽。当单击特定链接时，我需要使页面变暗，但特定的除外

```
<div id="showAllRooms"> <div> 
```

区域。（将页面放在“阴影”中，除了一个 div）

我是 JavaScript 的佩里·吉恩；您能否建议完成这项任务的最佳方法是什么？

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:37:35.410

*   创建一个与主体一样大的图层（div）（位置：绝对，所有角到位置 0，无填充，无边距）
*   保持隐藏（显示：无）
*   给它一个更暗的背景颜色
*   给它一个更高的 z-index 属性
*   [otionally] 给它一个不透明度值（不透明度：0.5）
*   给要显示的 div 比创建的 div 更高的 z-index
*   显示创建的图层（显示：块）

或者使用它的许多框架之一，比如[jquery lightbox](http://leandrovieira.com/projects/jquery/lightbox/)

祝你好运！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T20:46:40.193

如果我明白你需要什么。您需要将页面放在除一个 div 之外的“阴影”中。

它可以使用 jQuery ui 和它的模型小部件轻松完成。

[预览](http://jqueryui.com/demos/dialog/#modal)

# django - Django mod-wsgi 错误 500 - 日志文件中没有任何用处

> ID：10375793
> 
> 赞同：0
> 
> 时间：2012-04-29T20:39:19.727
> 
> 标签：django, error-handling, mod-wsgi, error-log

我正在运行我的 djnago 应用程序使用 mod_wsg（由于某些原因，我不能使用内置的 django 服务器）

当发生错误并且我看到错误 500 时，我正在 /var/log/apache2/errors.log 中查找信息，但这里没有任何有用的信息。

如果我在语法、数据库或视图中有错误——随便！我收到有关“UnicodeDecodeError”的错误消息。它看起来像这样：

```
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1] mod_wsgi (pid=10006): Exception occurred processing WSGI script '/hosting/mysite/public/django.wsgi'.
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1] Traceback (most recent call last):
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/wsgi.py", line 241, in __call__
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]     response = self.get_response(request)
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 179, in get_response
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]     response = self.handle_uncaught_exception(request, resolver, sys.exc_info())
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py", line 221, in handle_uncaught_exception
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]     return debug.technical_500_response(request, *exc_info)
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/views/debug.py", line 66, in technical_500_response
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]     html = reporter.get_traceback_html()
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/views/debug.py", line 275, in get_traceback_html
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]     c = Context(self.get_traceback_data())
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/views/debug.py", line 233, in get_traceback_data
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]     frames = self.get_traceback_frames()
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/views/debug.py", line 387, in get_traceback_frames
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]     'vars': self.filter.get_traceback_frame_variables(self.request, tb.tb_frame),
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/views/debug.py", line 183, in get_traceback_frame_variables
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]     value = self.get_request_repr(value)
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/views/debug.py", line 102, in get_request_repr
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]     return build_request_repr(request, POST_override=self.get_post_parameters(request))
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]   File "/usr/local/lib/python2.7/dist-packages/django/http/__init__.py", line 179, in build_request_repr
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1]     unicode(meta)))
[Mon Apr 30 00:21:48 2012] [error] [client 127.0.0.1] UnicodeDecodeError: 'ascii' codec can't decode byte 0xd0 in position 1556: ordinal not in range(128) 
```

我认为 django 尝试处理错误异常并在此过程中出现新错误。关于编码的东西。但我不知道如何解决它。

如何获取关于我的第一个错误的信息，而不是 UnicodeDecodeError？如何修复 UnicodeDecodeError？（修复它后，我希望在日志中看到我的第一个错误描述）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T05:20:13.093

阅读有关此内容的 Django 文档：

[https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#if-you-get-a-unicodeencodeerror](https://docs.djangoproject.com/en/dev/howto/deployment/wsgi/modwsgi/#if-you-get-a-unicodeencodeerror)

还可以尝试在 Django 设置模块中将 DEBUG 设置为 True。它可能允许在浏览器中显示底层错误。如果这是一个面向公众的站点并且您不能这样做，那么将 ADMINS 设置设置为 Django 文档中介绍的电子邮件地址，以便通过电子邮件将错误的详细信息发送给您。

# mysql - mysql orderby 对查询的选择部分中的操作不起作用？

> ID：10375795
> 
> 赞同：0
> 
> 时间：2012-04-29T20:39:36.687
> 
> 标签：mysql

我设法编写了下面的查询，它几乎可以工作，问题是任何空值都被`IFNULL(likes.num, 0)`结果表末尾的 get 清零。

```
SELECT t.*, IFNULL(likes.num, 0)
FROM `textagname` as t
LEFT JOIN likes
ON t.tex = likes.tex
ORDER BY num DESC 
```

有没有另一种方法来编写这个查询，而不是这样：

```
SELECT *
FROM (
    SELECT t.*, IFNULL(likes.num, 0)
    FROM `textagname` as t
    LEFT JOIN likes
    ON t.tex = likes.tex
)
ORDER BY d.num DESC 
```

最好是一种不会使其花费更长的时间的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:15:20.817

诀窍是按生成的值而不是来自表的值进行排序。请注意下面添加了 numLikes。

```
SELECT t.*, IFNULL(likes.num, 0) as numLikes
FROM `textagname` as t
LEFT JOIN likes
ON t.tex = likes.tex
ORDER BY numLikes DESC 
```

# sqlite - SQLite3 - 更新多列数据库中的单列

> ID：10375796
> 
> 赞同：0
> 
> 时间：2012-04-29T20:40:13.270
> 
> 标签：sqlite

我正在创建一个总共有五列的表。在主要的“创建”过程中，我只有足够的数据来填充其中的四列。稍后在程序执行中，我有第五列的数据。我开始执行“插入或替换”。但！我只在语句中使用了键列和第五列。

当我浏览数据库时，第二列到第四列是 NULL。所以，问题是：有没有办法只更新特定列（包括键），同时保持现有数据完好无损？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T23:58:20.973

正如您所发现的，INSERT OR REPLACE 是错误的语句。除非您可以为所有列提供正确的值，否则 UPDATE 语句是更好的选择。只需更新列。

```
update your_table_name 
set your_column_name = 'New Value'
where your_key_column = 'Something'; 
```

在许多应用中，需要更加谨慎。

```
update your_table_name 
set your_column_name = 'New Value'
where your_key_column = 'Something' 
  and your_column_name is null; 
```

# django - 禁用特定目录中的 VIM 插件

> ID：10375797
> 
> 赞同：0
> 
> 时间：2012-04-29T20:40:22.057
> 
> 标签：django, vim, vim-plugin

我知道可以有项目和文件夹特定的 .vimrc 文件，但我似乎找不到正确的命令来禁用特定目录的插件。

如果它可能是特定于插件的问题，我正在尝试在我的 Django Templates 文件夹中禁用[AutoClose 。](http://www.vim.org/scripts/script.php?script_id=1849)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T05:25:22.370

Vim 的 autocmd 不支持任何目录更改事件。

所以你不得不使用其他一些事件，也许是 CursorMoved 并执行一个函数来检查保存的当前工作目录是否等于当前工作目录。如果没有，您可以执行您的命令。

此外，vim 不是为卸载插件而设计的。但是有一个插件！ [https://github.com/MarcWeber/vim-addon-manager](https://github.com/MarcWeber/vim-addon-manager)

请注意，这个想法有点骇人听闻，可能会导致一些严重的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:29:30.053

你看过插件的代码吗？

```
let g:autoclose_on=0 
```

可能会成功。

# mysql - MySQL检测字段顺序模式？

> ID：10375800
> 
> 赞同：0
> 
> 时间：2012-04-29T20:40:33.907
> 
> 标签：mysql

所以我有一个看起来像这样的表：

```
cid  |  tid  |  score
-----+-------+-------
 6   |  383  |   88
 2   |  234  |   91
 3   |  685  |   77
 5   |  543  |   97
etc... 
```

我要做的是在 tid 列中找到一个序数字段模式，然后在同一列中搜索该模式的其他实例。例如：

我查询显示单个 cid 的所有 tid，按分数降序排列：

```
cid  |  tid  |  score
-----+-------+-------
 6   |  909  |  100
 6   |  119  |   99
 6   |  221  |   98
 6   |  765  |   97
etc... 
```

在 tid 列中建立了一个模式：909、119、221、765。现在我想找到该模式的其他可能实例，其中 cid 值是别的东西。（注意：不同的 cid 可以有相同的 tid，所以 cid 6 可以有 tid 909， cid 4 也可以。）

我想在第二个查询中检查模式。模式值可以隔开，但它们必须按顺序出现：

```
 QUERY 2:    
cid  |  tid  |  score           cid    tid     score
---------------------         ---------------------
 6   |  909  |  100             5    | 909 < | 100
 6   |  119  |   99             5    | 831   |  97
 6   |  221  |   98             5    | 793   |  96
 6   |  765  |   97             5    | 435   |  96
                                5    | 404   |  95
                                5    | 119 < |  94
                                5    | 221 < |  94
                                5    | 765 < |  94 
```

比较之后，我希望 MySQL 返回如下内容：

```
cid |  tid pattern  | instances (in order)
----+---------------+----------------------
 5      909               1 (or 0)
 5      119               1 (or 0)
 5      221               1 (or 0)
 5      765               1 (or 0) 
```

在 MySQL 中是否有合理的方法来做到这一点？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:25:59.087

一般来说，这种操作不能很好地跨行运行 - 首先将其拉入每个 cid 的单个记录中：

```
 INSERT INTO summary (c_id, tids)
 SELECT cid, GROUP_CONCAT(tid ORDER BY score DESC)
 FROM yourtable
 GROUP BY cid; 
```

然后，您可以轻松获取模式匹配或超集的所有组合的列表：

```
 SELECT a.cid, a.tids, b.cid, b.tids
 FROM summary a, summary b
 WHERE a.cid<>b.cid
 AND a.cid=6
 AND b.tids LIKE CONCAT('%', a.tids, '%'); 
```

你可能想看看 levenstein 函数或卷积（提示：如果你不分析基因组，那么看看一些代码）。

# java - Java - 如何将参数传递给 if 语句“如果找到“F(x)”，则将“x”传递给 F 函数

> ID：10375804
> 
> 赞同：0
> 
> 时间：2012-04-29T20:41:15.783
> 
> 标签：java, function, if-statement, parameter-passing

我正在做的是以有限字母字符串的形式制定生产规则，将其复制到 char 数组中，然后通过 if 语句运行它，该语句根据字符调用函数。

如“lff[f]”调用functionL、functionF、functionF、functionOpenB、functionF、functionCloseB。

所以目前它的：

```
workRuleArr= stringProdrule.toCharArray();
for  (char c=0; c < workRuleArr.length; c++){
    if (workRuleArr[c] == 'f')
     {
          functionF();

      }
      if (workRuleArr[c] == 'l')
     {
          functionL();

      } 
```

ETC

这很好并且可以工作，但是：

我如何将参数从生产规则传递给那些函数，例如“l（100）ff ..”，以便它调用functionL（x）......其中x = 100并将100传递给函数？

并且在同一个生产规则字符串中可能有许多不同的 x 值。用户在程序开始时一次性输入规则，因此需要在同一生产规则中处理多个参数

如果问题不清楚，请告诉我任何想法。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T20:53:37.113

Seems to me that those "rule functions" you have all serve a similar purpose, so they obey the same interface, like

```
interface Rule{
    void executeRule();
} 
```

Then you have different Rules that implement that interface, like

```
class RuleF implements Rule{
        void executeRule(){
            //execute rule F
        }
}

class RuleL implements Rule{
        void executeRule(){
            //execute rule L
        }
} 
```

Then you need a simple way to associate a character with a given rule. Use a HashMap, like:

```
Map<Character, Rule> ruleMap = new HashMap<Character, Rule>();
ruleMap.add('f', new RuleF());
ruleMap.add('l', new RuleL()); 
```

With that you can remove all those "ifs", like

```
workRuleArr= stringProdrule.toCharArray();
for  (char c=0; c < workRuleArr.length; c++){
    Rule rule = ruleMap.get(workRuleArr[c]);
    rule.executeRule();
} 
```

Now if you need that the Rule interface receives a parameter, you'll also need a similar Map object to associate the character with the parameter you need to pass.

What exactly are you building? Some sort of state machine?

cheers, good luck! :-)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:09:22.217

看看[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。你基本上是在问这个问题的答案

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T23:05:57.720

看起来您需要某种可以为您提供有效令牌的解析器，或者需要自己组装。无论如何，您都需要在阵列中向前看一步。这是另一个实现：

```
String rule = "FLL(123)FKF";

String pattern = "[a-zA-Z]{1}|[(\\d)]+"; //any single character or set of (numbers)
Pattern p = Pattern.compile(pattern);
Matcher m = p.matcher(rule);

String command = "", param = "", token;

while(m.find()){
  token = m.group();

  if(token.length() > 1){  //must be parameter
    param = token.substring(1, token.length()-1);
    continue;
  }

  if(command != ""){
    runCommand(command, param);
    param = "";  //clear
  }
  command = token;  //set next
}

if(command != "")    //last trailing run
  runCommand(command, param); 
```

还需要定义runCommand：

```
bool runCommand(string command, string param){
  System.out.println("execute function" + command + "(" + param + ")");

  bool success, hasParam = (param != "");
  int p = Integer.parseInt(param);

  switch(command){
    case "F":
      success = (hasParam ? functionF() : functionF(p));
      break;
    case "L":
      success = (hasParam ? functionL() : functionL(p));
      break;
    case "K":
      success = (hasParam ? functionK() : functionK(p));
      break;
  }
  return success;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T20:46:50.520

尝试一个简单的 if 语句来测试是否有参数：

```
workRuleArr= stringProdrule.toCharArray();

for  (char c=0; c < workRuleArr.length; c++){

    if (workRuleArr[c] == 'f') {

        if(workRuleArr[c+1].equals("(")) {

            // use the parameter
            String param = "";

            c++;

            while(!workRuleArr[c+1].equals(")")) {
                param += workRuleArr[c+1];
                c++;
            }

            int yourParameter = Integer.parseInt(param);

            functionF(yourParameter);
        }
        else {

            functionF();
        }
    }
    if (workRuleArr[c] == 'l'){

        functionL();
    }
} 
```

请注意，我没有测试代码，可能会有一些错误。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T20:58:47.437

我不会转换成 char 数组，因为 String 有更多有用的方法，在这种情况下也是如此。 

因此，对于每个具有索引的字符，`i`您需要测试字符 at`i+1`是否为 '('，然后用于`int k = stringProdrule.indexOf(')', i+2)`获取右括号并将两个括号之间的字符串作为参数传递给函数。然后继续 at `k+1`。

# ruby-on-rails - 将模型渲染为 json 并在模型的列之一上使用 encode64

> ID：10375807
> 
> 赞同：0
> 
> 时间：2012-04-29T20:42:00.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json

我正在尝试将模型作为 json 发送。该模型在其中一列中有二进制数据。对于我使用过的另一个模型

```
format.json {self.encode64(@resource_type.data).to_json} 
```

成功了，但在那种情况下，我只想要数据列，而不是标题等。当我想要几列的内容时，我该怎么办，其中只有一列的内容应该用 encode64 编码？

在下面的代码中，我不知道将 self.encode64 方法放在哪里。

```
format.json { render :json => @resource.to_json(:only => [:id, :title, :data])} 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:03:12.777

您在这里有几个选择。

您可以`data_base64`向模型添加一个返回`data`base-64 格式的方法，然后在控制器中使用该`:methods`选项：`to_json`

```
@resource.to_json(:only => [ :id, :title ], :methods => :data_base64) 
```

这将为您提供`data_base64`JSON 中的密钥，而不是`data`但这可能不是问题。

您还可以使用`as_json`获取哈希并修复控制器中的编码：

```
json = @resource.as_json(:only => [ :id, :title, :data ])
json['resource']['data'] = self.encode64(json['resource']['data'])
render :json => json 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:00:18.793

您可以`as_json`在模型中使用这样来覆盖此行为

```
def as_json(options={})
  { :name_of_resource => { :created_at => created_at, binary => encode64(self.data) } }
end 
```

您需要指定他应该如何将整个模型序列化为 json。

干杯!

# javascript - Jquery 在 Firefox 和 Chrome 中滚动到底部

> ID：10375810
> 
> 赞同：0
> 
> 时间：2012-04-29T20:42:19.527
> 
> 标签：javascript, jquery, firefox, google-chrome

```
function run_battle() {

if(battlenow.length>0) { 
var div = document.getElementById('show_battle');
    $("#show_battle").animate({ scrollTop: $("#show_battle").prop("scrollHeight") -       $('#show_battle').height() }, 100);
var attempt = battlenow.shift(); 
div.innerHTML += attempt;
    $("#show_battle").animate({ scrollTop: $("#show_battle").prop("scrollHeight") - $('#show_battle').height() }, 100);
setTimeout("run_battle()",800);
  }
} 
```

这就是我到目前为止所拥有的。它在 Firefox 中效果很好。然而在 Chrome 中，它根本不起作用。我使用的是 Jquery 1.7.1，所以这就是我使用 .prop 而不是 .attr 的原因。

战阵是这样的。

```
battlenow.push('Alan hit Joe<br><br>');
battlenow.push('Joe fainted<br><br>Battle Over'); 
```

如果这有帮助的话。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:51:32.250

这是我在所有浏览器中用于滚动到特定元素的代码。此代码滚动最小量以在屏幕上获取元素，您可能需要不同的东西。注意检查 webkit 浏览器：

```
(function($) {

  $.fn.scrollMinimal = function() {

    var cTop = this.offset().top;
    var cHeight = this.outerHeight(true);
    var windowTop = $(window).scrollTop();
    var visibleHeight = $(window).height();

    if (cTop < windowTop) {
      $(jQuery.browser.webkit ? "body": "html")
        .animate({'scrollTop': cTop}, 'slow', 'swing');
    } else if (cTop + cHeight > windowTop + visibleHeight) {
      $(jQuery.browser.webkit ? "body": "html")
        .animate({'scrollTop': cTop - visibleHeight + cHeight}, 'slow', 'swing');
    }
  };

}(jQuery)); 
```

像这样调用：

```
$('#actions').scrollMinimal(); 
```

# android - 协助检查数组项并将它们放置在 TextView 中

> ID：10375813
> 
> 赞同：0
> 
> 时间：2012-04-29T20:42:50.363
> 
> 标签：android

我对一种方法提出了一些建议，我想填充数组中所有项目的列表，然后将每个项目与时间和日期进行比较，如果它们与 tableLayout textView 上的日期和时间匹配，则将项目添加到该 TextView 中。我真的很挣扎，希望能得到一些帮助。

谢谢

PS我正在使用数组将项目存储在我的应用程序中

```
 Public void getData() {
TextView MondayNine = (TextView)     (android.R.MondayNine);
 for (Timetable t: Timetables) 
 If(t.getDay().equals("Monday") && (t.getTime.equals(09:00) { MondayNine.setText(t.toString()); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:38:23.090

没有看到你的时间表课程就不能说太多，但我想说你在 toString() 之前错过了一个 getDay()。

**更新**

```
//声明这个字段。
private String[] days = {"Monday" , "Tuesday" , "Wednesday" , "Thursday" , "Friday" , "Saturday" , "Sunday"};

for（时间表t：时间表）{
    for(int i = 0; 我
```

几个小时也是一样。

# javascript - 跨浏览器按类名选择元素

> ID：10375815
> 
> 赞同：7
> 
> 时间：2012-04-29T20:43:01.063
> 
> 标签：javascript

如何在 javascript 中选择使用相同类名的所有元素。我知道我可以使用它，`document.getElementsByClassName`但我在某处读到它不是跨浏览器，所以如果它是真的，那么在没有 jQuery 或其他库的情况下根据类名选择元素的适当方法是什么。

谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-04-29T20:49:46.523

我找到了这段代码：

```
if (!document.getElementsByClassName) {
    document.getElementsByClassName = function(classname) {
        var elArray = [];
        var tmp = document.getElementsByTagName("*");
        var regex = new RegExp("(^|\\s)" + classname + "(\\s|$)");
        for (var i = 0; i < tmp.length; i++) {

            if (regex.test(tmp[i].className)) {
                elArray.push(tmp[i]);
            }
        }

        return elArray;
    };
}​ 
```

[**这里**](https://stackoverflow.com/a/5149557/601179)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:56:14.947

看这里：

[支持 getElementsByClassName](http://caniuse.com/#search=getElementsByClassName)

我建议使用[querySelector](http://caniuse.com/#search=querySelector)。它更自然，更接近 jQuery 语法，因此对大多数人来说更常见。而且它非常快，您不需要区分类、ID 或其他任何东西。

如果你想支持 IE<7，你需要一个像 gdoron 提供的垫片。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T22:01:12.317

使用自 IE8 起支持的 document.querySelector 或 document.querySelectorAll 可能会更好。

看看这里：

[https://developer.mozilla.org/docs/Web/API/document.querySelector](https://developer.mozilla.org/docs/Web/API/document.querySelector) [https://developer.mozilla.org/docs/Web/API/document.querySelectorAll](https://developer.mozilla.org/docs/Web/API/document.querySelectorAll)

# ruby-on-rails - Ruby on Rails 教程：第 6.3 节——未知属性错误

> ID：10375816
> 
> 赞同：2
> 
> 时间：2012-04-29T20:43:20.270
> 
> 标签：ruby-on-rails, ruby, railstutorial.org

我正在阅读 Michael Hartl 的教程（一个很好的教程！），我在第 6 章第 6.3 节添加安全密码中遇到了障碍。

教程说“将*密码*和 *password_confirmation* 添加到用户模型......密码属性将是*虚拟*的” - 这可能就是为什么没有迁移将它们添加到数据库模式的原因。

但是，除非将它们添加到 user.rb 中 attr_accessible 行的末尾，否则我会收到 MassAssignmentSecurity 错误，但是当我添加它们时，我会收到一个

```
UnknownAttributeError:
   unknown attribute: password 
```

github 上的 user.rb 代码将属性添加到 attr_accessible 但其余代码（也在 user_spec.rb 中）是相同的，除了我想在后面的章节中添加的内容。

我第二次浏览了这一章，从头开始，认为这是我的错误，但它仍然存在......

安装的宝石是

```
Using rake (0.9.2.2) 
Using i18n (0.6.0) 
Using multi_json (1.3.2) 
Using activesupport (3.2.3) 
Using builder (3.0.0) 
Using activemodel (3.2.3) 
Using erubis (2.7.0) 
Using journey (1.0.3) 
Using rack (1.4.1) 
Using rack-cache (1.2) 
Using rack-test (0.6.1) 
Using hike (1.2.1) 
Using tilt (1.3.3) 
Using sprockets (2.1.3) 
Using actionpack (3.2.3) 
Using mime-types (1.18) 
Using polyglot (0.3.3) 
Using treetop (1.4.10) 
Using mail (2.4.4) 
Using actionmailer (3.2.3) 
Using arel (3.0.2) 
Using tzinfo (0.3.33) 
Using activerecord (3.2.3) 
Using activeresource (3.2.3) 
Using addressable (2.2.7) 
Using annotate (2.4.1.beta1) 
Using bcrypt-ruby (3.0.1) 
Using bootstrap-sass (2.0.0) 
Using nokogiri (1.5.2) 
Using ffi (1.0.11) 
Using childprocess (0.3.2) 
Using libwebsocket (0.1.3) 
Using rubyzip (0.9.8) 
Using selenium-webdriver (2.21.2) 
Using xpath (0.1.4) 
Using capybara (1.1.2) 
Using coffee-script-source (1.3.1) 
Using execjs (1.3.1) 
Using coffee-script (2.2.0) 
Using rack-ssl (1.3.2) 
Using json (1.7.0) 
Using rdoc (3.12) 
Using thor (0.14.6) 
Using railties (3.2.3) 
Using coffee-rails (3.2.2) 
Using diff-lcs (1.1.3) 
Using guard (1.0.1) 
Using guard-rspec (0.5.5) 
Using spork (0.9.0) 
Using guard-spork (0.3.2) 
Using jquery-rails (2.0.0) 
Using libnotify (0.5.9) 
Using bundler (1.1.3) 
Using rails (3.2.3) 
Using rb-inotify (0.8.8) 
Using rspec-core (2.9.0) 
Using rspec-expectations (2.9.1) 
Using rspec-mocks (2.9.0) 
Using rspec (2.9.0) 
Using rspec-rails (2.9.0) 
Using sass (3.1.16) 
Using sass-rails (3.2.5) 
Using sqlite3 (1.3.5) 
Using uglifier (1.2.3) 
```

感谢您对我下一步的任何帮助或指示，

克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:00:36.537

在按照教程进行操作时，我遇到了同样的问题，然后我注意到我忘记在调用`has_secure_password`下方添加`attr_accessible`调用`app/models/user.rb`。

```
class User < ActiveRecord::Base
  attr_accessible :email, :name, :password, :password_confirmation
  has_secure_password
  // rest of the code
end 
```

在`UnknownAttributeError`我完成之后，它消失了，所有测试都通过了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:48:10.817

您可以像这样在模型中定义虚拟属性：

```
attr_accessor :password, :password_confirmation 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-26T05:13:11.970

after modifying the user.rb file with attribute accessible for password and password_confirmaton

```
class User < ActiveRecord::Base
  attr_accessible :name, :email, :password, :password_confirmation
  has_secure_password
  .
  .
  .
end 
```

**don't forget to save it!**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-05-01T13:33:17.527

根据您所在的 6.3 小节，测试可能会失败。它们应该首先失败，然后您通过添加代码开始“修复”它们。`has_secure_password`在 6.3.4 中，您通过添加到 user.rb 来解决您描述的问题

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-08-17T00:57:51.853

答案很有帮助，`attr_accessor :password, :password_confirmation`但我看到密码为零。Bcrypt gem 是以下版本：'bcrypt', '~> 3.1.7'

```
class User < ApplicationRecord
  attr_accessor :password, :password_confirmation
  has_secure_password

end 
```

# php - 如何强制 MediaWiki 尊重单行换行符？

> ID：10375821
> 
> 赞同：5
> 
> 时间：2012-04-29T20:43:48.357
> 
> 标签：php, mediawiki

默认情况下，MediaWiki 忽略单个换行符，将它们视为单个空格。要在页面中插入新行，您必须在源代码中插入两个连续的换行符，这会产生一个新段落：`</p><p>`. 也可以`<br />`直接插入到源中。

如何修改 MediaWiki 解析引擎，以便源中的单个换行符自动替换`<br />`为生成的 HTML 中的 a？

（来源：[http](http://www.mediawiki.org/wiki/Help:Formatting) ://www.mediawiki.org/wiki/Help:Formatting ）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-05-05T10:10:49.613

使用[https://www.mediawiki.org/wiki/Extension:Poem](https://www.mediawiki.org/wiki/Extension:Poem)

```
<poem>
Roses are red
Violets are blue
</poem> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-18T20:37:43.437

```
<pre></pre> 
```

这个 html 标签似乎为我完成了这项工作。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-04-29T23:10:06.293

您可以编写[一个扩展](http://www.mediawiki.org/wiki/Manual%3aExtensions "一个扩展")，在解析 wikicode 时将 br 标记添加到换行符。但是，您必须非常小心 - 您不希望wikicode 中的*每个*换行符实际上都是 br 标签，对吗？

编辑：您不希望每个换行符都是 br 标签，因为并非 wikicode 中的每个换行符实际上都应该是换行符。例如，一个表：

```
{|
|+ The table's caption
|-
|Cell 1
|Cell 2
|-
|Cell A
|Cell B
|} 
```

如果您将 br 标记添加到表格代码中，它会变得非常混乱。

# ruby - Rails 错误：“在这台机器上的可用 gem 中找不到 gem 'activerecord-mysql2-adapter (>= 0) ruby '

> ID：10375822
> 
> 赞同：2
> 
> 时间：2012-04-29T20:43:49.477
> 
> 标签：ruby, ruby-on-rails-3

我做了宝石mysql2。这就是我的 GemFile 的样子：

```
source 'https://rubygems.org'

gem 'rails', '3.2.3'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'
gem 'mysql2' 
  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  gem 'therubyracer', :platform => :ruby
gem 'activerecord-mysql2-adapter'
  gem 'uglifier', '>= 1.0.3'

end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the app server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

这是我的配置文件：

```
development:
  adapter: mysql2
  encoding: utf8
  database: qac_db
  pool: 5
  username: root
  password:
  socket: /tmp/mysql.sock 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T20:46:39.253

删除该行`gem 'activerecord-mysql2-adapter'`。然后运行`bundle install`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-02T21:59:02.170

对于它的价值，我删除了我的 database.yml，然后重新创建它，然后一切都开始工作了。不知道为什么，可能是权限问题？

# cookies - 浏览器如何知道两个不同的域不相关

> ID：10375823
> 
> 赞同：2
> 
> 时间：2012-04-29T20:43:57.070
> 
> 标签：cookies

这可能是一个非常愚蠢的问题。

设置 cookie 时，如果第三方 cookie 被禁用，则 example.com 和 example2.com 被视为不同。但是，site1.example.com 和 site2.example.com 不被视为第三方，因为它们都是 .example.com 的一部分。

但是，当您在 .co.uk 中拥有像“.co”这样的二级域时，浏览器如何知道 example.co.uk 和 example2.co.uk 是第三方，而不仅仅是 .co.uk 的子域？（.co 相当于上面的 .example）

浏览器是否只包含一个硬编码列表？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T19:38:16.607

经过一些额外的研究，浏览器似乎使用自己的有效 TLD 列表。

例如，Mozilla 为自己和他人提供以下内容

[http://publicsuffix.org/list/](http://publicsuffix.org/list/)

# c - 与快板的蛇游戏

> ID：10375824
> 
> 赞同：-5
> 
> 时间：2012-04-29T20:43:59.007
> 
> 标签：c, allegro

嗨，有人可以帮助我，我正在尝试用 allegro 编写蛇游戏（在 ubuntu 中）我设法编写了这段代码，但它不起作用，当我编译时我似乎找不到问题，它似乎没问题，但是当我执行某种类型的内存问题（内存映射）出现，然后当我连续执行多次时没有任何反应，它开始但片刻后崩溃

```
#include <allegro.h>
#include <stdlib.h>
#include <stdio.h>

struct snake_node
    {
    int dir;
    int x;
    int y;
    struct snake_node * next; 
    }snake_node;
    typedef struct snake_node * snake;

snake ajout_debut(snake snake,int x, int y);
void game_over(BITMAP * buffer,int score);
void draw_map(BITMAP * buffer);
void draw_menu(BITMAP * buffer);
void generate_new_apple( BITMAP * buffer,int x,int);
void move(BITMAP* buffer,snake snake,int *score);

int main()
{
BITMAP* sprite1 ;
int score=0;
snake snake;
allegro_init();
install_keyboard();
set_color_depth(16);
if(set_gfx_mode(GFX_AUTODETECT,1366,768,0,0)!=0)
    {
    set_gfx_mode(GFX_TEXT,0,0,0,0);
    allegro_message("impossible %s \n",allegro_error);
    return -1;
    }
sprite1 = load_bitmap("sprite.bmp", NULL) ;
if(!sprite1) 
    {
    set_gfx_mode(GFX_TEXT, 0, 0, 0, 0);
    allegro_message("Erreur ! Impossible de lire le fichier image !");
    return 1;
    }

BITMAP * buffer=create_bitmap(1366,768);
draw_sprite(buffer, sprite1,0,0);
blit(buffer,screen,0,0,0,0,SCREEN_W,SCREEN_H);

sleep(1);

while(!key[KEY_ESC])
    {
    clear_bitmap(buffer);
    draw_menu(buffer);
        if(key[KEY_ENTER])   
        {
        clear_bitmap(buffer);
        ajout_debut(snake,500,250);
        while(!key[KEY_ESC])
            {       
            draw_map(buffer);
            move(buffer,snake,&score);
            blit(buffer,screen,0,0,0,0,SCREEN_W,SCREEN_H);          
            }
        }           
    }
destroy_bitmap(buffer);
allegro_exit();
return 0;

}
END_OF_MAIN()

void draw_menu(BITMAP * buffer)
{
    textprintf(buffer,font,600,220,makecol(255,255,0),"       ******        ");
    textprintf(buffer,font,600,250,makecol(255,255,0),"***  START GAME  ***");
    textprintf(buffer,font,600,270,makecol(255,100,0),"    (press ENTER)   ");  
    textprintf(buffer,font,600,300,makecol(255,255,0),"***     HELP     ***");
    textprintf(buffer,font,600,320,makecol(255,100,0),"      (press H)     ");
    textprintf(buffer,font,600,350,makecol(255,255,0),"***  QUIT GAME   ***");
    textprintf(buffer,font,600,370,makecol(255,100,0),"    (press ESC)     ");
    textprintf(buffer,font,600,400,makecol(255,255,0),"       ******        ");
    //blit(buffer,screen,0,0,0,0,SCREEN_W,SCREEN_H);
}

void draw_map(BITMAP * buffer)
{
    rectfill(buffer,0,0,1366,10,makecol(255,0,0));
    rectfill(buffer,1366,0,1356,768,makecol(255,0,0));
    rectfill(buffer,1366,768,0,758,makecol(255,0,0));
    rectfill(buffer,0,0,10,768,makecol(255,0,0));
    //blit(buffer,screen,0,0,0,0,SCREEN_W,SCREEN_H);
}
void generate_new_apple( BITMAP * buffer,int x,int y)
{ 
rectfill(buffer,x,y,x+10,y+10,makecol(255,255,0));
}

void game_over(BITMAP * buffer,int score)
{
clear_bitmap(buffer);
textprintf(buffer,font,SCREEN_W/2,SCREEN_H/2,makecol(255,255,0),   "***  GAME OVER  ***");
textprintf(buffer,font,SCREEN_W/2,SCREEN_H/2+30,makecol(255,255,0),"***  SCORE :%d  ***",score);
}

snake ajout_debut(snake s,int x, int y)
{
    snake nouv;
    nouv=(snake)malloc(sizeof(snake));
    nouv->x=x+10;
    nouv->y=y+10;
    nouv->next=s;
    s=nouv; 
 return s;

}
void move(BITMAP* buffer,snake snake,int *score)
{
int applex = (int)(rand()%1336+10);
int appley = (int)(rand()%738+10);
generate_new_apple(buffer,applex,appley);
clear_keybuf();

    if (key[KEY_LEFT])
        {
        while(snake->next!=NULL)
        {
        if(snake->x > 10)
        snake->x=snake->x-1;
        else 
        game_over(buffer,score);
        }
    }
    if(key[KEY_RIGHT])
    {
        while(snake->next!=NULL)
        {
        if(snake->x < 1356)
        snake->x=snake->x+1;
        else
        game_over(buffer,score);
        }
    }
    if(key[KEY_UP])
    {
        while(snake->next!=NULL)
        {
        if(snake->y > 10)
        snake->y=snake->y-1;
        else
        snake->y=snake->y+1;
        }
    }
    if(key[KEY_DOWN])
    {
        while(snake->next!=NULL)
        {
        if(snake->y < 758)
        snake->y=snake->y+1;
        else
        game_over(buffer,score);
        }
    }
if(snake->x==applex && snake->y==appley)
{   
    rectfill(buffer,applex,appley,applex+10,appley+10,makecol(0,0,0));
    applex = (int)(rand()%1336+10);
    appley = (int)(rand()%738+10);
    generate_new_apple(buffer,applex,appley);
    snake=ajout_debut(snake,snake->x,snake->y);
    *score++;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:03:59.127

我注意到的一个问题。

查看编译器警告

`sanke.c:134:7: warning: passing argument 2 of ‘game_over’ makes integer from pointer without a cast [enabled by default]`

你有功能

`void game_over(BITMAP * buffer,int score);`

你打电话

`game_over(buffer,score);`

内部函数

`void move(BITMAP* buffer,snake snake,int *score)`

`score`因此，您将函数中的 int 指针传递给接受整数的`move`函数。`game_over`

`game_over (buffer, *score)`改为打电话。

**编辑**

一个片段：

```
 if(key[KEY_RIGHT])
    {
        while(snake->next!=NULL)
        {
        if(snake->x < 1356)
        snake->x=snake->x+1;
        else
        game_over(buffer,*score);
        }
    } 
```

`while`检查`snake->next != NULL`但它从未在正文中更新，因此这是一个无限循环。

`x`调试器在崩溃时也显示一个奇怪的负值。

建议：请自行追踪。

# symfony - symfony2 FOSUserBundle 重定向错误

> ID：10375825
> 
> 赞同：1
> 
> 时间：2012-04-29T20:44:05.577
> 
> 标签：symfony, fosuserbundle

我已经安装了 FOSUserBundle 并且在一定程度上可以正常工作。它让我登录，它完成了它应该做的一切——除了将我重定向到正确的地方。

我在我的 AdminBundle routes.yml 文件中设置了我的路由（来自 github 上 FOSUserBundle 安装文档的路由）

我为它创建了一个防火墙：

```
security:
encoders:
    "FOS\UserBundle\Model\UserInterface": sha512

role_hierarchy:
    ROLE_ADMIN:       ROLE_USER
    ROLE_SUPER_ADMIN: [ROLE_USER, ROLE_ADMIN, ROLE_ALLOWED_TO_SWITCH]

providers:
    fos_userbundle:
        id: fos_user.user_manager

firewalls:
    admin_area:
        pattern:    ^/admin/
        form_login:
            check_path: /admin/login_check
            login_path: /admin/login
            provider: fos_userbundle
        anonymous: true
        logout:
            path:   /admin/logout
            target: /admin/

access_control:
     - { path: ^/admin/login$, roles: IS_AUTHENTICATED_ANONYMOUSLY }
     - { path: ^/admin/, roles: ROLE_ADMIN } 
```

唯一的问题是，当我转到[http://mysite.dev/admin](http://mysite.dev/admin)时，它会将我重定向到正确的 http: [//mysite.dev/admin/login](http://mysite.dev/admin/login) ... 所以我然后登录并将我重定向到[http： //mysite.dev/](http://mysite.dev/)而不是 /admin

重要的是要注意，我已经扩展了登录表单，使它看起来像我自己的......通过在我的 AdminBundle 的视图文件夹中创建一个 layout.html.twig 让它看起来像管理员设计的其余部分我会用的..

有任何想法吗？谢谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-08-07T16:11:07.493

您需要在您的登录表单上放置一个名为“_target_path”的隐藏输入，symfony 使用它来检查用户在成功通过身份验证后应该重定向到哪里。您可以自定义它。检查文档：[http ://symfony.com/doc/current/cookbook/security/form_login.html](http://symfony.com/doc/current/cookbook/security/form_login.html)

# java - 尝试计算两个整数之间的最小距离时出错

> ID：10375828
> 
> 赞同：-1
> 
> 时间：2012-04-29T20:44:35.080
> 
> 标签：java, arrays, algorithm

我正在尝试计算排序数组中任意两个数字之间的最短距离。我正在使用下面的算法对其进行测试，但我在下面直接收到以下错误；哪个说明我的数组超出范围，所以显然它正在尝试访问不在数组长度内的索引？不知道为什么，因为我在 for 循环中检查了长度。有人有线索吗？

```
public static void getSmallestDistance(int[] integersCount)
{

    int index = 0;

    for(int i = 1; i < integersCount.length; i++  )
    {
        if( Math.abs(integersCount[index] - integersCount[index + 1]) >
        Math.abs( integersCount[i] - integersCount[i + 1]))//line 73 were error is
        {
            index = i;
        }

    }
    System.out.println(index);
} 
```

我收到以下错误：

```
Exception in thread "main" java.lang.ArrayIndexOutOfBoundsException: 1000
at ClosestPair.getSmallestDistance(ClosestPair.java:73)
at ClosestPair.main(ClosestPair.java:57) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T20:48:31.860

问题是数组的长度是 is的`integersCount.length`最大值，但是你用来索引数组，这是超出范围的。`i``integersCount.length - 1``i+1`

因此，您需要`i`从 0 或 1 （根据需要）运行到`integersCount.length - 2`这意味着 `i < integersCount.length - 2`或`i <= integersCount.length - 1`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:48:52.677

```
for(int i = 1; i < integersCount.length; i++  ) 
```

应该

```
for(int i = 1; i < integersCount.length - 1; i++  ) 
```

既然你这样做了：

```
integersCount[i + 1]) 
```

`ArrayIndexOutOfBound`当 i 达到最大值时，它（当然）抛出一个。

正如其他一些回答者指出的那样，这是因为 java 数组是从 0 到 length-1 的索引，并且在 for 循环的最后一次迭代中， i 将是 length-1 ，因此 i+1 将是一个太大的索引。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T20:49:45.590

`integersCount[i + 1]`在循环中导致`"ArrayIndexOutOfBoundsException"`

例如，如果您有 10 个项目，并且在 for 循环的最后一次运行中，i 将是 9，而 i + 1 将是 10，这将超出界限。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-04-29T20:50:13.153

尝试将 for(int i = 1; i < integersCount.length; i++ ) 更改为 for(int i = 0; i < integersCount.length; i++ )

我相信数组从地址 0 开始，因此您需要从内容总数中减去 1 才能得到最后添加的数字。

编辑

将 integersCount.length-1 更改为正确的 integersCount.length 因为它应该低于 og 添加的数量，而不是低于添加的数量 - 1 ..

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-04-29T20:50:56.150

```
for(int i = 1; i < integersCount.length; i++  )
{
  if( Math.abs(integersCount[index] - integersCount[index + 1]) >
      Math.abs( integersCount[i] - integersCount[i + 1]))//line 73 were error is 
      {
        index = i;
      } 
```

什么时候`i = integersCount.length - 1`是您尝试使用的数组的末尾，`integersCount[i + 1]`显然超出了数组的界限。

# java - 工厂方法是否违反依赖倒置原则？

> ID：10375830
> 
> 赞同：2
> 
> 时间：2012-04-29T20:44:50.413
> 
> 标签：java, dependency-inversion

```
public class DependentPizzaStore {
  public Pizza createPizza(String type) {
    Pizza pizza = null;
    if (Style.equals("NY")) {
      if (type.equals("cheese")) {
        pizza = new NYStyleCheesePizza();
      }
      else if(type.equals("Veggie")){
        pizza = new NYStyleVeggiePizza();
      }
    }

    pizza.prepare();
    pizza.bake();
    pizza.cut();
    pizza.box();
    return pizza;
  }
} 
```

Headfirst Design Patterns 中的这个示例违反了“依赖倒置原则”，即“依赖于抽象。不依赖于具体类”。

上面的示例违反了规则，因为 DependentPizzaStore（高级组件）依赖于比萨饼（低级组件）的具体实现。

为了解决这个问题，我们使用工厂方法模式。

```
public abstract class PizzaStore {
  protected abstract Pizza createPizza(String item);
  public Pizza orderPizza(String type) {
    Pizza pizza = createPizza(type);
    System.out.println("--- Making a " + pizza.getName() + " ---");
    pizza.prepare();
    pizza.bake();
    pizza.cut();
    pizza.box();
    return pizza;
  }

  public class NYPizzaStore extends PizzaStore {
    protected Pizza createPizza(String item) {
      Pizza pizza = null;
      if (item.equals("cheese")) {
        pizza = new CheesePizza();
      } else if (item.equals("veggie")) {
        pizza = new VeggiePizza();
      }
      return pizza;
    }   
  } 
```

现在 PizzaStore（高级组件）仅依赖于 Pizza 具体类的 Pizza 抽象，并且具体 Pizzas 依赖于 Pizza 抽象，因为它们扩展了它。

**我的问题是：NYPizzaStore 类是否也违反了“依赖倒置原则”，因为它依赖于 CheesePizza() 和 VeggiePizza()，它们是 Pizza 的具体实现。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:18:20.320

据我说，DIP 适用于您的主要程序部分。你不得不怀疑：

**违反我的目标的代码在哪里？**

在您的情况下，您的目标是允许创建披萨，同时遵循一些规则，而不依赖于您正在构建的披萨的知识。

因此，应将 DIP 应用于您的 PizzaStore 类。但是你用来实现这个目标的所有类，只是一些“插件”，因此，没有强制需要使用 DIP。

事实上，在所有类型的程序中，必须至少有一个位置用于包含具体类的简单 if/else 系列，否则您将永远无法获得成品。即使是最完美的代码也不可能是 100% 的“抽象”。

# drupal - Drupal 6 Views：通过复选框打开/关闭过滤器？

> ID：10375835
> 
> 赞同：1
> 
> 时间：2012-04-29T20:45:10.743
> 
> 标签：drupal, drupal-6, drupal-views, drupal-exposed-filter

我有一个视图用作“高级搜索”工具——它只是提供了一个相关节点的列表，这些节点受我现有的一些公开过滤器的限制。特别是，我有一个“关键字”公开过滤器，它充当主搜索框，过滤节点标题。现在，我请求能够切换（我假设使用复选框或类似选项）此过滤器以同时搜索节点标题**和**正文，作为为用户提供更多搜索结果的选项。

我目前有一个视图设置有两个显示：一个只过滤节点标题，另一个使用[Views Or](http://drupal.org/project/views_or)将结果限制在节点标题或节点正文中具有关键字的节点。就其本身而言，这两种显示器都按照我想要的方式工作。

我的问题是我将如何使用复选框或类似的东西在这两个显示器之间切换。我不想使用[视图显示选项卡](http://drupal.org/project/viewsdisplaytabs)，因为两个显示看起来在视觉上相同（唯一的区别是过滤器如何配置为包含更多/更少的结果），这会让用户感到困惑 - 加上它使用 AJAX 会破坏一些（主要是小）我通过 jQuery 对视图的行为进行的修改。

本质上，我想要完成的是在提交视图时进行条件检查 - 取决于是否选中了复选框，参数是否发送到一个显示器或另一个显示器。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T23:59:05.677

您可能能够解决此问题的一种方法可能涉及在公开的过滤器表单上添加自定义验证处理程序，这在理论上允许您检查值并将请求转发到适当的不同页面显示。公开的过滤器在 URL 中作为 $_GET 变量公开，因此，使用预定义的过滤器将用户转发到特定页面应该很容易。

```
<?php

function mymodule_form_alter(&$form, $form_state, $form_id) {
  switch ($form_id) {
    case 'views_exposed_form':
      // Deterimine the ID so you only do this
      // to a specific exposed filter form
      // drupal_set_message($form['#id']);
      if ($form['#id'] == 'views-exposed-form-api-search-page-1') {
        // You might also want to add the checkbox FAPI item in this area
        $form['#validate'][] = 'mymodule_api_search_validate'; // custom validate handler function name
      }
    break;
  }
}

function mymodule_api_search_validate($form, &$form_state) {
  // Check if the FAPI item has the specified checkbox value
  if ($form_state['values']['options'] == 'title') {
    // The get variables to pass to the views exposed filters
    // You can configure what this $_GET variable should be while editing the filter
    $query = array(
      'query' => 'the search query',
    );
    drupal_goto('api/search', $query);
  }
}

?> 
```

# html - 在线解析器自动从 HTML 中删除除条件之外的所有注释？

> ID：10375841
> 
> 赞同：6
> 
> 时间：2012-04-29T20:46:33.517
> 
> 标签：html, comments

有谁知道在线解析器可以自动删除除必要条件之外的所有注释吗？IE

```
<!--[if lt IE 9]> 
```

我尝试了各种形式的 HTML5 缩小，但它有问题

还看到了这些 php 解决方案，但如果已经存在，则更愿意使用在线解析器 [使用正则表达式和 php 删除除 Internet Explorer 注释之外的所有 html 注释](https://stackoverflow.com/questions/5868968/removing-all-html-comments-except-internet-explorer-comments-using-regex-and-php)

[使用 PHP 去除 HTML 注释但保留条件](https://stackoverflow.com/questions/1013499/stripping-html-comments-with-php-but-leaving-conditionals)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-04-29T21:01:08.760

在这里，刚刚为您制作了一个：http: [//jsfiddle.net/DerekL/BUVkS/show/](http://jsfiddle.net/DerekL/BUVkS/show/)

如果你想查看源代码，这里是：http: [//jsfiddle.net/DerekL/BUVkS/](http://jsfiddle.net/DerekL/BUVkS/)

将您的 HTML 代码放入其中，然后单击`remove comments`。
然后它将删除所有评论并留下条件。

（使用了您放置的 PHP 正则表达式（[链接](https://stackoverflow.com/a/1013864/283863)），我将其放入 JavaScript 中，**并**进行了一些修改以匹配换行符）

```
/<!--(?!\s*(?:\[if [^\]]+]|<!|>))(?:(?!-->)(.|\n))*-->/g 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-03T14:13:29.067

我发现这个在线 js 评论删除工具似乎工作正常

[http://james.padolsey.com/demos/comment-removal-js.html](http://james.padolsey.com/demos/comment-removal-js.html)

# c# - 来自 ASP.NET 的数据包数据嗅探

> ID：10375846
> 
> 赞同：1
> 
> 时间：2012-04-29T20:46:42.910
> 
> 标签：c#, asp.net, sockets, packet-capture, packet-sniffers

我想使用 C# 嗅探数据包数据我需要它来嗅探所有类型的数据，而不仅仅是 HTTP

当我尝试这样做时，我收到此错误：

System.Net.Sockets.SocketException：尝试以 System.Net.Sockets.Socket 的 System.Net.Sockets.Socket.DoBind(EndPoint endPointSnapshot, SocketAddress socketAddress) 的访问权限禁止的方式访问套接字。绑定（端点本地EP）

```
public void StartCapture(string InterfaceIp)
{
        try
        {
                //Start capturing the packets...
                //For sniffing the socket to capture the packets has to be a raw socket, with the
                //address family being of type internetwork, and protocol being IP
                mainSocket = new System.Net.Sockets.Socket(System.Net.Sockets.AddressFamily.InterNetwork,
                    System.Net.Sockets.SocketType.Raw, System.Net.Sockets.ProtocolType.IP);
                //Bind the socket to the selected IP address
                mainSocket.Bind(new System.Net.IPEndPoint(System.Net.IPAddress.Parse(InterfaceIp), 0));
                //Set the socket  options
                mainSocket.SetSocketOption(System.Net.Sockets.SocketOptionLevel.IP,            //Applies only to IP packets
                                           System.Net.Sockets.SocketOptionName.HeaderIncluded, //Set the include the header
                                           true);                           //option to true
                byte[] byTrue = new byte[4] { 1, 0, 0, 0 };
                byte[] byOut = new byte[4] { 1, 0, 0, 0 }; //Capture outgoing packets
                //Socket.IOControl is analogous to the WSAIoctl method of Winsock 2
                mainSocket.IOControl(System.Net.Sockets.IOControlCode.ReceiveAll,              //Equivalent to SIO_RCVALL constant
                    //of Winsock 2
                                     byTrue,
                                     byOut);

                //Start receiving the packets asynchronously
                mainSocket.BeginReceive(byteData, 0, byteData.Length, System.Net.Sockets.SocketFlags.None,
                    new AsyncCallback(OnReceive), null);
        }
        catch (Exception ex)
        {
            //Report Exception
        }
} 
```

注意：我正在使用 ASP.Net 并且嗅探数据非常重要，而不仅仅是数据包的标头

我认为问题与没有访问套接字的正确权限有关，尽管使用模拟并没有解决问题

我找到了解决我的问题的方法，它与最近的实现有关，该实现限制绑定到受保护的套接字并限制为单个 IP 地址

这里有一些有趣的链接

[http://msdn.microsoft.com/en-us/library/cc150667(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/cc150667(v=vs.85).aspx)

[http://msdn.microsoft.com/en-us/library/ms740668%28v=VS.85%29.aspx](http://msdn.microsoft.com/en-us/library/ms740668%28v=VS.85%29.aspx)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T20:51:55.797

If you are OK with using a library, [SharpPcap](http://sourceforge.net/projects/sharppcap/) is a nice one and it's very simple to use.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-02-26T19:19:57.223

我正在尝试使用原始套接字。

我修复了这个错误，

> System.Net.Sockets.SocketException：'试图以访问权限禁止的方式访问套接字'

只需在管理员模式下运行 Visual Studio。

# syntax - 如何在 VHDL 中“切片”std_logic_vector？

> ID：10375858
> 
> 赞同：21
> 
> 时间：2012-04-29T20:48:12.330
> 
> 标签：syntax, vhdl

我正在用 VHDL 开发一个小东西，而且对它很陌生。我无法弄清楚如何将较大的 std_logic_vector 切成较小的。

例如，我有 3 个信号：

```
signal allparts: std_logic_vector(15 downto 0);
signal firstpart: std_logic_vector(7 downto 0);
signal secondpart: std_logic_vector(7 downto 0); 
```

基本上，我想要的是将 15 到 8`secondpart`位和 7 到 0 位分配给`firstpart`. 在不分配单个位的情况下，我将如何“切片”这样的向量

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2012-04-29T22:05:56.540

您可以直接分配它们：

```
firstpart <= allparts(15 downto 8);
secondpart <= allparts(7 downto 0); 
```

...或者如果 firstpart 和 secondpart 只是引用部分 allparts 信号的替代方式，您可能需要使用别名：

```
alias firstpart is allparts(15 downto 8);
alias secondpart is allparts(7 downto 0); 
```

# c# - WebBrowser 与网站的兼容性问题

> ID：10375862
> 
> 赞同：2
> 
> 时间：2012-04-29T20:48:48.623
> 
> 标签：c#, browser, compatibility

```
(new WebBrowser()).Version.ToString()  // returns 9.0.8112.16421 
```

但我尝试加载的网站响应它支持 Internet Explorer 9 或更高版本。

如果我从 Internet Explorer 加载页面，则没有问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:38:13.153

我找到了解决方案。

我添加了注册表项：

```
HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\Internet Explorer\MAIN\FeatureControl\FEATURE_BROWSER_EMULATION\"Application.exe" 
```

与**Decimal**`REG_DWORD`中的值**9000**一样，强制 9.0 版仿真

# objective-c - Cocoa：NSPanel 失去父级和其他奇怪的行为

> ID：10375864
> 
> 赞同：2
> 
> 时间：2012-04-29T20:49:10.243
> 
> 标签：objective-c, cocoa, parent, nspanel

我有一个`NSPanel`奇怪的行为问题，并创建了一个[示例应用程序](http://github.com/trojanfoe/PanelTest.git)来演示这种行为。

该应用程序是从 Xcode 4 的模板生成的，只需创建一个面板，然后根据按钮按下打开和关闭它：

![在此处输入图像描述](../Images/3f99c8631b734398062497e4de187f3b.png)

我观察到的奇怪行为：

1.  在 Lion 下，第一次打开面板后，面板跟随主窗口，这是正确的行为。但是，在关闭它然后重新打开它之后，它不再跟随主窗口。
2.  在 Snow Leopard 下，关闭面板时，主窗口也会关闭！

**编辑**：为了清楚起见；我期望的行为是让面板在主窗口移动时*跟随主窗口；*并在面板关闭并随后重新打开后实现这一点。此外，我希望面板和主窗口在 Snow Leopard 和 Lion 下的行为方式相同。

代码的重要部分在这里：

```
@implementation MyAppDelegate

- (void)dealloc
{
    [_panel release];
    [super dealloc];
}

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification
{
    _panel = [[NSPanel alloc]
             initWithContentRect:NSMakeRect(400, 400, 200, 100)
             styleMask:NSUtilityWindowMask|NSClosableWindowMask|NSTitledWindowMask
             backing:NSBackingStoreBuffered
             defer:YES];
    [_panel setTitle:@"A Panel"];
}

- (IBAction)openPanel:(id)sender
{
    [_panel setParentWindow:[self window]];
    [_panel makeKeyAndOrderFront:sender];
}

- (IBAction)closePanel:(id)sender
{
    [_panel orderOut:sender];
}

@end 
```

注意：我在方法中添加了不必要的`setParentWindow`调用，`openPanel`以断言每次打开面板时都会重置父窗口；然而，它没有任何区别。

有人可以解释我做错了什么吗？

**编辑**：对于实现文件中的缺失存在一些混淆`@synthesize window = _window`，但我刚刚打开了另一个项目示例，该示例是我为测试内存泄漏行为而创建的，但它也不存在。我使用的是 Xcode 4.4，所以这可能是一个错误，但我*认为*项目模板没有改变。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T22:12:23.813

您不应该从孩子设置父子关系，而是从父母那里设置。[`setParentWindow:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-BCIIBIAA)文档说：

> 当该方法被子类的实现覆盖时，应从子类调用此方法。不应以其他方式调用它。

相反，使用[`addChildWindow:ordered:`](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/ApplicationKit/Classes/NSWindow_Class/Reference/Reference.html#//apple_ref/doc/uid/20000013-BCIBCGJE)，如下所示：

```
- (IBAction)openPanel:(id)sender
{
    [[self window] addChildWindow:_panel ordered:NSWindowAbove];
    //[_panel setParentWindow:[self window]];
    [_panel makeKeyAndOrderFront:sender];
} 
```

我没有在 Snow Leopard 下对此进行测试，但它修复了我在 Lion 上运行时的行为。

Rob Keniger 在下面指出，在 Snow Leopard 上，您也应该`[[self window] removeChildWindow:_panel]`在订购面板之前进行操作。（我认为这对 Lion 也是一个好主意。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:58:20.140

我对你的问题有点困惑。我下载并检查了你的项目。首先，不知何故你错过了应用程序主窗口的@synthesize 命令。你说你使用了模板，但不知何故它不见了。由于 AppDelegate 头文件有一个窗口的@property，因此您需要在它的实现文件中使用@synthesize 命令。我不确定您是如何在项目中丢失该行的，但将其添加到 @implementation 行之后...

```
@synthesize window = _window; 
```

第二，为什么要说以下内容？

> 在 Lion 下，第一次打开面板后，面板跟随主窗口四处走动，这是正确的行为。

你说的没有道理。创建面板时，您使用“ **initWithContentRect:NSMakeRect(400, 400, 200, 100)** ”。请注意，您在 (400, 400) 位置创建它，大小为 (200, 100)。所以第一次打开时，它会在屏幕位置（400、400）打开。它与主窗口的位置无关。

无论如何，在添加 @synthesize 部分后，我可以编译并运行应用程序而没有错误。对我来说，它在 10.7 中按预期工作。

# amazon-s3 - 有没有办法从亚马逊 s3 提供私有静态文件

> ID：10375865
> 
> 赞同：2
> 
> 时间：2012-04-29T20:49:35.000
> 
> 标签：amazon-s3, amazon-ec2, amazon-web-services, amazon-cloudfront

我一直在使用 amazon s3 作为存储后端，我注意到您现在可以在 s3 上提供静态网站。

我尝试上传一个简单的站点，它运行良好，但我认为如果您可以将文件设置为私有并生成一个签名的 url 来查看该站点，那就太好了。

不幸的是，似乎为索引页面生成签名 url 可以让您查看该页面，但可以预见的是，所有图像都丢失了，因为它们被设置为私有，因此需要有自己的签名 url。

由于我是 s3 和亚马逊服务的新手，我想知道是否有其他人从 s3 管理过一个私有站点，或者将 s3 与其他亚马逊服务（云端等）结合使用

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-19T20:20:42.823

我试图找出如何在开发过程中做同样的事情来保持网站的私密性。我认为这对于 S3 是不可能的。AWS论坛上有人有同样的问题：[https ://forums.aws.amazon.com/thread.jspa?threadID=81688](https://forums.aws.amazon.com/thread.jspa?threadID=81688)

底线：“恐怕你需要在 S3 之外托管网站，直到你准备好上市。”

# javascript - Highchart隐藏默认按钮

> ID：10375871
> 
> 赞同：13
> 
> 时间：2012-04-29T20:50:00.533
> 
> 标签：javascript, jquery, highcharts, highstock

我想在 highchart 导出选项中隐藏默认按钮（“导出”和“打印”）。

您可以在[http://jsfiddle.net/fXHB5/3496/](http://jsfiddle.net/fXHB5/3496/)上进行演示， 在此链接中有 3 个按钮 1\. 自定义按钮 2\. 导出按钮 3\. 打印按钮。

在这种情况下，我只想显示第一个按钮并隐藏“导出按钮”和“打印按钮”

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-29T21:12:59.827

您可以通过以下方式访问每个按钮首选项：

```
exporting: {
    buttons: {
        printButton: {
            symbol: 'circle'
        },
        exportButton: {
            enabled: false
        }    
    }
} 
```

带有自定义按钮的可扩展示例是：

```
exporting: {
    buttons: {
        printButton: {
            enabled: false
        },
        exportButton: {
            enabled: false
        },
        custom: {
            symbol: 'diamond',
            x: -62,
            symbolFill: '#B5C9DF',
            hoverSymbolFill: '#779ABF',
            _titleKey: 'printButtonTitle',
            onclick: function () {
                alert('click!')
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-11-26T16:23:41.207

对于使用较新版本的 highcharts 并且所选答案不起作用的其他任何人，您需要使用以下内容来隐藏按钮。

```
exporting: {
        buttons: {
            contextButton: {
                enabled: false
            }    
        }
    } 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-04-29T21:07:24.100

这是不可能的，但您可以隐藏默认按钮，然后使用 html 创建自己的按钮。然后，您可以根据需要绑定自定义按钮。

```
var chart = new Highcharts.Chart({

    chart: {
        renderTo: 'container'
    },

    credits: {
        enabled: false
    },

    xAxis: {
        categories: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']
    },

    series: [{
        data: [29.9, 71.5, 106.4, 129.2, 144.0, 176.0, 135.6, 148.5, 216.4, 194.1, 95.6, 54.4]        
    }],
        exporting: {
            enabled: false
        }
    });

console.log( Highcharts.Renderer.prototype.symbols )​ 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-12T10:40:12.300

如果你只想隐藏默认的自定义按钮，你可以简单地使用：

```
exporting: {
      buttons: {
        contextButton: {
          enabled: false
        },
        printButton: {
            enabled: false,
        },
      }
    } 
```

如果您想使用自己的自定义按钮或标签，可以使用：

```
exporting: {
      buttons: {
        contextButton: {
          enabled: false
        },
        exportButton: {
            text: `Chrome`,
            _titleKey: "yourKey",
            onclick:function(){
            alert('clicked Chrome');
            },
            x:-410
        },

        printButton: {
            enabled: false,
            text: `IE: `,
             _titleKey:"myKey",
            onclick: function () {
                alert('clicked IE');
            },
            x:-400,
            y:30
        },          
      }
    }, 
```

在此我禁用了默认值以及 printButton，您可以使用 x 和 y 设置标签的位置。你可以在这里找到我的代码：[https ://jsfiddle.net/m3yegczx/20/](https://jsfiddle.net/m3yegczx/20/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-12-19T06:59:11.420

如果您使用的是框架，那么您可以通过这种方式隐藏。

```
 HIOptions *options = [[HIOptions alloc]init];
    HIExporting *exporting = [[HIExporting alloc]init];
    exporting.enabled = [[NSNumber alloc] initWithBool:false];
    options.exporting = exporting; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-11-15T05:06:11.053

至于当前的highcharts（7.2.1），您可以通过设置下面的选项来隐藏它们

```
exporting: {
    buttons: {
        contextButton: {
            menuItems: ["downloadPNG", "downloadJPEG", "downloadPDF", "downloadSVG"]
        }
    }
} 
```

[在https://api.highcharts.com/highcharts/exporting.buttons.contextButton.menuItems](https://api.highcharts.com/highcharts/exporting.buttons.contextButton.menuItems)检查 API

# javascript - 漂浮物和颜色

> ID：10375875
> 
> 赞同：0
> 
> 时间：2012-04-29T20:50:54.653
> 
> 标签：javascript, jquery, flot

我正在尝试实现一个浮点条形图，但我遇到了一些问题

第一个是设置 yaxsis 最小值和最大值似乎不起作用，该图仍然仅从 0 到 14。

其次，我不知道如何为每个条设置单独的颜色和名称。

这就是我所拥有的

```
var d2 = [{
     "label": "Face",
     "data": [[0 , "3"], [5, "13"]]
 },
 {
     "label": "Telephone",
     "data": [[1, "400"], [6, "337"]]
 },
 {
     "label": "Web",
     "data": [[2, "1304"], [7, "843"]]

 }];

var options = {

    yaxes: {min: 0, max: 25000},

     xaxis: {
         tickSize: [1],
         autoscaleMargin: .10,
         show: false
     },

    series: {
        lines: { show: false},
        bars: {
            show: true,
            barWidth: 0.9,
            align: 'center',
             multiplebars:true,             
            },

        points: {
            show: true
        }
    }

};

$.plot($('#graph1'), d2, options); 
```

有谁知道如何解决这些问题？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T21:26:38.413

如果您想为每个条形图使用不同的名称和颜色，则需要将条形图设置配置为数据集的一部分。

```
var data1 = [
        {
            label: "Face",
            data: [[0 , 3], [5, 13]],
            bars: {
                show: true,
                barWidth: 0.9,
                fill: true,
                lineWidth: 1,
                order: 1,
                fillColor:  "#AA4643"
            },
            color: "#AA4643"
        },
        {
            label: "Telephone",
            data: [[1, "400"], [6, "337"]],
            bars: {
                show: true,
                barWidth: 0.9,
                fill: true,
                lineWidth: 1,
                order: 2,
                fillColor:  "#89A54E"
            },
            color: "#89A54E"
        }] 
```

然后像这样绘制它们：

```
$.plot($("#placeholder"), data1, options); 
```

至于不工作`min`，`max`不配置会怎样？轴是否正确拟合数据？

# delphi - How detect when a vcl style is changed?

> ID：10375879
> 
> 赞同：4
> 
> 时间：2012-04-29T20:51:02.123
> 
> 标签：delphi, delphi-xe2, vcl-styles

I use several WinAPi functions which needs the Handle of the form in order to work, due which the handle of the form is recreated when the vcl styles is changed many of the calls to these functions stop working. So I need a way to detect when the current vcl style is modified (changed) in order to update the calls to these functions.The question is `How detect when a vcl style is changed?`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-04-29T20:57:10.667

When a vcl style is changed via the [`TStyleManager.SetStyle`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Themes.TStyleManager.SetStyle) method a [`CM_CUSTOMSTYLECHANGED`](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Controls) message is sent to all the forms of the application, then that messgae is processed in the `WndProc` method of the form and then a `CM_STYLECHANGED` message is sent to inform which the vcl style has changed, so you can listen the [`CM_STYLECHANGED`](http://docwiki.embarcadero.com/Libraries/en/Vcl.Controls) message to detect when a vcl style has changed.

Try this sample Code.

```
type
  TForm17 = class(TForm)
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
    procedure CMStyleChanged(var Message: TMessage); message CM_STYLECHANGED;
  public
    { Public declarations }
  end;

var
  Form17: TForm17;

implementation

uses
 Vcl.Themes;

{$R *.dfm}

procedure TForm17.Button1Click(Sender: TObject);
begin
   TStyleManager.SetStyle('Carbon');
end;

procedure TForm17.CMStyleChanged(var Message: TMessage);
begin
  ShowMessage('The vcl style has changed');
end;

end. 
```

# ruby-on-rails - Is there a workaround for the confirm popup bug in Firefox?

> ID：10375881
> 
> 赞同：4
> 
> 时间：2012-04-29T20:51:20.067
> 
> 标签：ruby-on-rails, firefox

Currently when I use the following Ruby on Rails code:
`= link_to "Confirm", user, confirm: 'Are you sure?', method: :delete, :class => "button"`

This produces:
`<a class="button" rel="nofollow" data-method="delete" data-confirm="Are you sure?" href="/users/2">Confirm</a>`

When I click on this button in Firefox (v8 Mac) the confirm pops up but it doesn't wait for the end user to click on the Yes or Cancel buttons and it automatically confirms. In the case that I have, it deletes the user.

This does not happen in Chrome.

Is there a workaround for this bug or should I be coding it differently?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-05T12:14:09.203

大约一年前我遇到了这个问题。JQuery 中有一个错误。确保您安装了最新的 JQuery gem。但是，它在 Windows 下的 Firefox 中。

# java - Retrieving all data from a Database Column

> ID：10375884
> 
> 赞同：0
> 
> 时间：2012-04-29T20:51:35.843
> 
> 标签：java, eclipse, sqlite

Is there a method in which I can retrieve all the data from a particular database column and store it in a string array? My database currently looks like this:

```
public class DatabaseTotalEntries {

public static final String KEY_ROWID = "_id";
public static final String KEY_NAME = "appliance_name";
public static final String KEY_TOTAL_TIME = "appliance_running_time";
public static final String KEY_TOTAL_COST = "appliance_cost_usage";
public static final String KEY_TOTAL_ENERGY = "appliance_energy_usage";

private static final String DATABASE_NAME = "ApplianceTotaldb"; // The name of the database

private static final String DATABASE_TABLE = "AllEntries"; // The name of the database table

private static final int DATABASE_VERSION = 1; 
```

and I am looking to create a method in which the data under the column 'KEY_TOTAL_COST' for every row/entry in the database is retrieved and stored in a String array

Any hep would be appreciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:08:00.123

使用标准方法通过数据库的 JDBC 驱动程序从数据库中检索数据。创建准备好的语句，在创建连接时执行它并从结果集对象中提取数据。正如Mihai Todor的回答中提到的，在SQL查询中，只选择KEY_TOTAL_COST，如果你只查询你感兴趣的列会更快。当你从结果集中提取数据时，你可以把它放到你想要的任何数据结构中, 并根据需要对其进行操作（截断、拆分、转换为数字等...）

您可能会发现本教程很有用： http: [//docs.oracle.com/javase/tutorial/jdbc/basics/retrieving.html](http://docs.oracle.com/javase/tutorial/jdbc/basics/retrieving.html) ...或者只是尝试在 google 上查找更多“JDBC 结果集”使用示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T20:59:23.290

那么，您需要使用的 SQL 语句是这样的：`select appliance_running_time from ApplianceTotaldb.AllEntries`. 为了运行它，我想这取决于您使用的 RDBMS。是 MySQL 吗？尝试在 Google 上搜索 JDBC 教程...

# ruby-on-rails - 如何避免动态角色的批量分配漏洞？

> ID：10375888
> 
> 赞同：0
> 
> 时间：2012-04-29T20:52:20.563
> 
> 标签：ruby-on-rails, ruby, authorization, roles, mass-assignment

我有用户、帐户和角色模型。Role存储Account和User之间的关系类型。

我留空`attr_accessible`以`Role`防止出现批量分配漏洞（否则攻击者可能会更改角色类型——所有者、管理员等……、帐户或用户 ID）。

但是，如果管理员想将订阅者更改为版主怎么办？这将引发批量分配安全异常：

```
user = User.find(params[:id])
role = user.roles.find_by_account_id(params[:account_id])
role.type = "admin" 
```

我该如何解决这个问题？一种方法是创建一个单独的模型来表示每个角色（所有者、管理员、版主、订阅者）并使用 STI 类型模式。这让我可以：

```
user = User.find(params[:id])
user.moderatorship.build(account_id: params([:account_id]) 
```

乏味！我必须创建 Onwership、Moderatorship、Subscribership 等......，并让它们从 Role 继承。如果我想坚持单一的角色模型，我怎样才能拥有动态角色而不让自己暴露于批量分配漏洞？

**额外的问题：**我应该使用用户 has_many 角色（用户可以为每种角色类型拥有一条记录）还是 has_one 角色（用户只能拥有一个角色记录，如果他们的角色发生变化必须切换）模式？

```
class User < ActiveRecord::Base
  attr_accessible :name, :email
  has_many :accounts, through: roles
end

class Account < ActiveRecord::Base
  attr_accessible :title
  has_many :users, through: roles
end

class Role < ActiveRecord::Base
  attr_accessible
  belongs_to: :user
  belongs_to: :account
end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:05:29.830

您可以将“as”与 attr_accessible 一起使用，以获得不同的分配能力。例如，

```
attr_accessible :type, as: :admin 
```

然后，当您进行批量分配时，您可以执行类似的操作

```
@role.update_attributes {type: :moderator}, as: :admin # Will update type
@role.update_attributes {type: :moderator} # Will not update type 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:21:23.593

最灵活的方法是覆盖`mass_assignment_authorizer`模型类中的方法以动态更改可访问属性。

例如：

```
class Article < ActiveRecord::Base
  attr_accessible :name, :content
  attr_accessor :accessible

  private
  def mass_assignment_authorizer
    super + (accessible || [])
  end
end 
```

现在你可以这样使用它：

```
@article.accessible = [:important] if admin? 
```

此示例来自[RailsCast #237](http://railscasts.com/episodes/237-dynamic-attr-accessible)，您可以在其中了解有关此方法的更多信息。

* * *

此外，我想向您推荐可以帮助您处理角色和能力的[CanCan gem。](https://github.com/ryanb/cancan)

# sql - Fast way to select small sample from huge table

> ID：10375891
> 
> 赞同：0
> 
> 时间：2012-04-29T20:53:14.617
> 
> 标签：sql, sql-server, select, random, database-performance

The table I have is huge about 100+ million entries, it is ordered by default by 'A'. There could be many items with the same column A, A increases from 0 to... A big number. I tried TABLESAMPLE but it does not quite select a good number from each A number, it skips some of them or maybe I am not using it well. So I would like to select the same amount of values from each A number. And I would like the total of selected rows to be a number, let's say 10 million or let's call it B.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T23:24:06.113

虽然我不清楚您需要实现什么，但当我需要一个在父值和/或公共属性值之间很好分布的大型样本子集时，我已经这样做了：

```
SELECT  *
FROM    YourTable
WHERE   (YourID % 10) = 3 
```

这还有一个好处，就是您可以通过将“3”更改为另一个数字来获得另一个完全不同的样本。另外，您可以通过调整“10”来更改子样本大小。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:57:13.183

您可以使用`NEWID()`：

```
SELECT TOP 100
  *
FROM
  YourTable
ORDER BY NEWID() 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T10:29:13.920

@RBarryYoung 解决方案是正确的，通用的，它适用于任何恒定的统计分布，如 id 序列（或任何自动增量列）。但是，有时您的分布不是恒定的，或者您可能会遇到性能问题（SQL Server 必须扫描所有索引条目以计算 WHERE 子句）。

[`TOP`](http://msdn.microsoft.com/en-us/library/ms189463.aspx)如果其中任何一个影响您的问题，请考虑可能适合您需要的内置 T-SQL 运算符：

```
SELECT TOP (30) PERCENT *
FROM YourTable; 
```

# asp.net-mvc-3 - MVC3 authentication and anonymous users

> ID：10375896
> 
> 赞同：0
> 
> 时间：2012-04-29T20:53:51.857
> 
> 标签：asp.net-mvc-3, anonymous

I have an MVC3 application that uses the standard accountcontroller that comes with visual studio to authenticate users.

I want to share specific parts of my program with people, much like google shares documents in google docs when you do that via email; in other words I don't want to give anyone access to the pages (In which case I could just remove the Authorize attributes) but I do want users to share pages based on a url with a hash in it, and have them skip the login.

I think I would like to generate the hash based on a page and link it to an anonymous user, which would then have to be auto-logged in if the hash is correct

How would I do that?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:10:57.067

1.  在数据库中创建一个包含共享页面信息的表（控制器、操作、documentId、hash、expiresAt 等）
2.  覆盖 Authorize 属性和 OnAuthorizationvalidate 数据库中的 url 参数。

```
    公共类 SharedAuthorize:AuthorizeAttribute  
    {  
        公共覆盖无效 OnAuthorization(AuthorizationContext filterContext)
        {  
            var documentHash = int.Parse(filterContext.RouteData.Values["hash"].ToString());
            if (!HashRepository.CanWeRead(documentHash,controller, action, documentId))
            {
                返回假；
            }
            返回真；
        }
    }

```

这只是一个想法=))

# c# - Opening a document in MS Word that is stored on the server

> ID：10375900
> 
> 赞同：0
> 
> 时间：2012-04-29T20:55:05.480
> 
> 标签：c#, asp.net, razor, ms-word

I am trying to open a MS word doc (.docx) file from my server. The file is saved from a previous form and the path of that file is saved in the database (SQL Server 2008 R2).

What I have currently set up is a search that returns a list of "filenames" back to the view. Right now it is a `@Html.DisplayFor(r=>r.filename)`.

Is there a way to turn that `DisplayFor` into a link that opens in some word processor?

I don't want to download the file. I want it to work similar to Sharepoint where you can open the file without having to download a copy.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:06:19.550

正确设置 MIME 类型将改善某些浏览器版本中的体验，但这并不是一个真正一致的解决方案，因为例如。Chrome 仍会要求保存文件。可以通过设置来设置 MIME 类型`Response.ContentType`。

如果您的应用程序在本地网络中运行，并且文件可通过共享文件夹访问，则可以使用`file://`url. 在这种情况下，您可以更接近您的答案，要求 Html Helper。`NetworkFile`您可以为自定义类型（例如）编写自己的显示模板。

至于 Sharepoint 如何解决这个问题，我不确定。也许您可以使用一些 Office 工具，但这只是一个疯狂的猜测。

[Office 2007 的可用 MIME 类型](http://blogs.msdn.com/b/vsofficedeveloper/archive/2008/05/08/office-2007-open-xml-mime-types.aspx)

[MSDN 上的 Response.ContentType](http://msdn.microsoft.com/en-us/library/ms525208%28v=vs.90%29.aspx)

# xcode - what is the xcode code for current image center?

> ID：10375905
> 
> 赞同：1
> 
> 时间：2012-04-29T20:56:02.793
> 
> 标签：xcode, xcodebuild

when you wish to know the text of a label you use labelName.text what is the equivalent for image.center?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T22:41:43.030

image.center 正是您使用的。

```
NSLog(@"%@",NSStringFromCGPoint(image.center));
NSLog(@"%f",image.center.x);
NSLog(@"%f",image.center.y); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:12:21.420

好吧..它似乎没有属性...奇怪（或者我不知道它..lol）

做类似的事情：

```
CGPoint imageCenter=CGPointMake(image.size.width/2,image.size.height/2); 
```

# ruby-on-rails-3 - Argument Error in Password Resets Controller

> ID：10375906
> 
> 赞同：0
> 
> 时间：2012-04-29T20:56:08.733
> 
> 标签：ruby-on-rails-3

I'm following the tutorial in [Railscast](http://railscasts.com/episodes/274-remember-me-reset-password?autoplay=true) to create a "forgot my password" link. I'm running into problems when creating a cookie for the password reset. Here is the error:

```
ArgumentError in PasswordResetsController#create 
wrong number of arguments (1 for 0)
Rails.root: C:/Sites/application

Application Trace | Framework Trace | Full Trace
app/models/user.rb:37:in `create_remember_token'
app/models/user.rb:29:in `send_password_reset'
app/controllers/password_resets_controller.rb:7:in `create' 
```

../app/models/user.rb - line 28 is `remember_token(:password_reset_token)`

```
before_save :create_remember_token
before_create { create_remember_token(:remember_token) }

def send_password_reset
  create_remember_token(:password_reset_token)
  save!
  UserMailer.password_reset(self).deliver
end

private
def create_remember_token
  self.remember_token = SecureRandom.urlsafe_base64
end 
```

../app/controllers/password_resets_controller.rb

```
class PasswordResetsController < ApplicationController
  def new
  end

  def create
    user = User.find_by_email(params[:email])
    user.send_password_reset if user
    redirect_to root_url, :notice => "Email sent with password reset instructions."
  end

  def edit
@user = User.find_by_password_reset_token!(params[:id])
  end
end 
```

../app/helpers/sessions_helper.rb

```
def sign_in(user)
  cookies.permanent[:remember_token] = user.remember_token
  current_user = user
end

def current_user
  @current_user ||= user_from_remember_token
end

def sign_out
  current_user = nil
  cookies.delete(:remember_token)
end

private

  def user_from_remember_token
    remember_token = cookies[:remember_token]
    User.find_by_remember_token(remember_token) unless remember_token.nil?
  end
end 
```

If I change the way I find the user in my controller to: `user = User.find_by_email(params[:session][:email])` the first error dissapears. I can only think that this is telling me that I'm calling the user incorrectly, and not assigning the new token to it on reset.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T11:48:11.810

看看 Railscast，你有“remember_token”方法，他们使用添加到 User 类的“generate_token”方法。当然，这种错字可能不是问题，但如果是错误消息，那将是有意义的（以前不存在的方法不会期望任何参数）。

# jquery - jquery 仅在第一次悬停时显示 div

> ID：10375919
> 
> 赞同：2
> 
> 时间：2012-04-29T20:59:21.813
> 
> 标签：jquery, variables, if-statement, hover, fade

我正在尝试创建一个带有“popup”类的div，它将淡入五秒钟，然后在“left”悬停时淡出，但仅在第一次悬停时。到目前为止，这是我的代码……</p>

```
$(document).ready(function() {
var i = 1;
if (i == 1) {
    $('.left').hover(function() {
    $('.popup').fadeIn(1000); 
    }, 
    function() {
        $('.popup').fadeOut(1000);  
    });
    i++; 
}; 
}); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-29T21:03:19.697

```
$('.left').one('mouseenter', function() {
    $('.popup').fadeIn(1000); 
})
.one('mouseleave', function() {
    $('.popup').fadeOut(1000);  
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:03:28.927

如果您希望它一次应用所有 .left 元素，您可以使用它的 .data() 属性，如下所示：

```
$(document).ready(function() {     
    $('.left').hover(function() {
        if ($(this).hasData("hovered_once")==false) {
            $('.popup').fadeIn(1000); 
            $(this).data("hovered_once")=="yes";
        }
    }, 
    function() {
        $('.popup').fadeOut(1000);  
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-29T21:10:49.577

你可以通过这种方式做到这一点。这是示例代码。

```
$(document).ready(function() {
  var i=1;
  $('.left').on({
        mouseenter: function (e) {
             if(i<2)
             {
              $('.popup').fadeIn(1000); 
                 i++;
             }
        },
        mouseleave: function (e) {
            $('.popup').fadeOut(1000);  
        }
    });

});​ 
```

示例演示

[http://jsfiddle.net/mediasoftpro/ZtWru/7/](http://jsfiddle.net/mediasoftpro/ZtWru/7/)

# c - 具有递归功能的 10 基数转换器 - C

> ID：10375922
> 
> 赞同：0
> 
> 时间：2012-04-29T20:59:43.777
> 
> 标签：c, function, recursion, process, base-conversion

我尝试从 10 基数转换任何数基数。在我将两个具有相同基数的数字相乘之后，该函数应该是递归的。

```
 double convert(int number,int base)
{
    int digit = 1;
    double sum=0;
    int i=0;
    int figure;
    double end;
    if(base==10)
        return number;

    else
    {
        figure = (digit % (digit * 10) - number % digit) / digit;
        end=pow(base,i);
        sum+=figure*end;
        ++i;
        digit *= 10;

        convert(figure,base);

    }
return sum;
} 
```

但是我很困惑，它不起作用。我该如何解决？有什么优惠吗？谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-30T08:59:54.853

例如

```
#include <stdio.h>

int convert(int number,int base){
    if(number == 0 || base==10)
        return number;

    return (number % base) + 10*convert(number / base, base);
}

int main () {
    int i;
    for(i=2;i<=10;++i)
        printf("%d is %d base(%d)\n", 100, convert(100, i), i);
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-01T02:08:40.033

```
static string ToBase(int n, int @base)
    {
        Func<int, string, string> x = null;
        return (x = (i, j) => 
        {
            if (i == 0)
            {
                return j;
            }
            return x(i / @base, i % @base + j);
        })(n, string.Empty);
    } 
```

# php - 点击地图后获取地址

> ID：10375925
> 
> 赞同：7
> 
> 时间：2012-04-29T21:00:13.310
> 
> 标签：php, javascript, google-maps-api-3

单击地图后，我需要获取地址和坐标，我使用的是 google map api v3，我在输入中恢复了坐标，但我还需要该点的地址。

```
 function initialize() {
            var myOptions = {
                center: new google.maps.LatLng(36.835769, 10.247693 ),
                zoom: 15,
                mapTypeId: google.maps.MapTypeId.ROADMAP
            };
            var map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions);
            google.maps.event.addListener(map, 'click', function(event) {
                placeMarker(event.latLng);
            });

            var marker;
            function placeMarker(location) {
                if(marker){ //on vérifie si le marqueur existe
                    marker.setPosition(location); //on change sa position
                }else{
                    marker = new google.maps.Marker({ //on créé le marqueur
                        position: location, 
                        map: map
                    });
                }
                latitude.value=location.lat();
                longitude.value=location.lng();
            }

        } 
```

我使用这个 php 脚本来获取地址，但如果不知道如何在 javascript 中使用它？我可以使用javascript获取地址吗？

```
<?php
    $url      = 'http://where.yahooapis.com/geocode?location=40.714224,-73.961452&gflags=R&flags=J';
    $response = json_decode(file_get_contents($url));
    $location = $response->ResultSet->Results[0];
    foreach ((array) $location as $key => $value) {
            if($key == 'city')
                $city = $value;
            if($key == 'country')
                $country = $value;
            if($key == 'street')
                $street = $value;
    }
    echo "Street: ".$street."<br>";
    echo "City: ".$city;
    echo "<br/>Country: ".$country;

    ?> 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-04-29T22:43:59.580

这是一个检索地址的简单示例。结果可能会变得复杂（它是一个数组，据我所见，它是交叉街道、社区、州和国家的任意组合。我没有看到模式）

我只使用第一行结果，它是街道、城市、州、国家的组合。在此处阅读详细信息：

[https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingResults](https://developers.google.com/maps/documentation/javascript/geocoding#GeocodingResults)

演示在这里：http: [//jsfiddle.net/eB2RX/1/](http://jsfiddle.net/eB2RX/1/)

我注意到分辨率不是很好，我的意思是，在美国你会得到街道号码，但在突尼斯却没有。我只看到街道名称。

部分代码：

```
 var map;
  var geocoder;
  var mapOptions = { center: new google.maps.LatLng(0.0, 0.0), zoom: 2,
    mapTypeId: google.maps.MapTypeId.ROADMAP };

  function initialize() {
        var myOptions = {
            center: new google.maps.LatLng(36.835769, 10.247693 ),
            zoom: 15,
            mapTypeId: google.maps.MapTypeId.ROADMAP
        };

        geocoder = new google.maps.Geocoder();
        var map = new google.maps.Map(document.getElementById("map_canvas"),
        myOptions);
        google.maps.event.addListener(map, 'click', function(event) {
            placeMarker(event.latLng);
        });

        var marker;
        function placeMarker(location) {
            if(marker){ //on vérifie si le marqueur existe
                marker.setPosition(location); //on change sa position
            }else{
                marker = new google.maps.Marker({ //on créé le marqueur
                    position: location, 
                    map: map
                });
            }
            document.getElementById('lat').value=location.lat();
            document.getElementById('lng').value=location.lng();
            getAddress(location);
        }

  function getAddress(latLng) {
    geocoder.geocode( {'latLng': latLng},
      function(results, status) {
        if(status == google.maps.GeocoderStatus.OK) {
          if(results[0]) {
            document.getElementById("address").value = results[0].formatted_address;
          }
          else {
            document.getElementById("address").value = "No results";
          }
        }
        else {
          document.getElementById("address").value = status;
        }
      });
    }
  } 
```

# c# - 日期范围查询上的 SQL/实体框架错误

> ID：10375928
> 
> 赞同：2
> 
> 时间：2012-04-29T21:00:32.060
> 
> 标签：c#, sql, vb.net, entity-framework

尝试从 MVC 实体框架中的 MS SQL DB 查询日期范围时收到错误消息。

`Unable to cast the type 'System.Boolean' to type 'System.Data.SqlTypes.SqlBoolean'. LINQ to Entities only supports casting Entity Data Model primitive types.`

这是我们的查询：

`dbWS.Where(Function(x) x.CountyCode = user.County And x.CompleteStatus.Contains("0") And x.ProgramEffort = 25 And` **x.combinedDate >= prevDate 和 x.combinedDate <= 明天**`)`

粗体代码导致此错误。我们以不同的方式查询它并且它有效，但是由于我们必须更改为日期范围，所以我们不断收到此错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T13:16:49.347

我们解决了这个问题。我们的数据库中有一些损坏的数据，这导致我们将模型中的数据类型从 DateTime 更改为 SqlDateTime。一旦我们清理了数据并将模型改回来，问题就解决了。

# ruby-on-rails - 当该属性通过 has_many 关联时，您如何接受一个嵌套属性？

> ID：10375930
> 
> 赞同：2
> 
> 时间：2012-04-29T21:00:53.823
> 
> 标签：ruby-on-rails, ruby-on-rails-3, nested-attributes

我有以下模型设置。我有比赛和比赛。匹配 has_many :games，匹配接受_nested_attributes_for :games。:games_attributes 是所有成员都可以访问的。我的问题是，fields_for 没有生成正确的表单，所以 Match 不接受游戏的嵌套属性。这是我的表单代码：

```
<%= form_for [@tournament, match], url: tournament_match_path(@tournament, match) do |f| %>
  <%= f.fields_for match.games.last do |builder| %>
    <%= builder.hidden_field :winner_id, value: 1 %>
  <% end %>
  <%= f.submit "Win Game", class: "actionButton activeAction" %>
<% end %> 
```

由此生成的代码是：

```
<form id="edit_match_1" class="edit_match" method="post" action="/tournaments/1/matches/1" accept-charset="UTF-8">
  <div style="margin:0;padding:0;display:inline"> <!-- rails stuff here --></div>
  <input id="match_game_winner_id" type="hidden" value="1" name="match[game][winner_id]">
  <input class="actionButton activeAction" type="submit" value="Win Game" name="commit">
</form> 
```

如您所见，match_game_winner_id 的名称不正确。名称为 match[game][winner_id]，但名称应为 match[games_attributes][0][winner_id]。我怎么解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T22:22:51.677

我最终自己解决了这个问题，并想分享我的发现以帮助处于类似情况的其他人。正如安德鲁在评论中所说，fields_for 需要一个符号，所以为了获得最后一场比赛，我需要传递与获得最后一场比赛的方法相对应的符号列表。我的表格最终看起来像这样：

```
<%= form_for [@tournament, match], url: tournament_match_path(@tournament, match) do |f| %>
  <%= f.fields_for :games, :last do |builder| %>
    <%= builder.hidden_field :winner_id, value: 1 %>
  <% end %>
  <%= f.submit "Win Game", class: "actionButton activeAction" %>
<% end %> 
```

# c - 打印 char 数组 [] 的十六进制表示

> ID：10375932
> 
> 赞同：13
> 
> 时间：2012-04-29T21:01:10.987
> 
> 标签：c, hex

我有一个 8 字节的数组，我正在尝试打印出十六进制表示法。使用`printf("%x", array)`我可以获取第一个字节并将其打印出来，但我正在获取`"0xffffff9b"`或类似的东西。有没有办法在没有“f”的情况下获得符号？

我想打印出看起来像这样的每个元素：

`0x9a, 0x43, 0x0D`， ETC。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-04-29T21:15:21.423

这：

```
printf("%x", array); 
```

很可能会以十六进制打印数组的第一个元素的*地址*。我说“最有可能”是因为尝试将地址打印为一个地址的行为`unsigned int`是未定义的。如果您真的想打印地址，正确的方法是：

```
printf("%p", (void*)array); 
```

（在大多数情况下，数组表达式被隐式转换为（“衰减”到）指向数组第一个元素的指针。）

如果要打印数组的每个元素，则必须明确这样做。该`"%s"`格式采用指向字符串第一个字符的指针，并告诉`printf`迭代字符串，打印每个字符。没有一种格式可以用十六进制做这种事情，所以你必须自己做。

例如，给定：

```
unsigned char arr[8]; 
```

您可以像这样打印元素 5：

```
printf("0x%x", arr[5]); 
```

或者，如果你想要一个前导零：

```
printf("0x%02x", arr[5]); 
```

该`"%x"`格式需要一个`unsigned int`参数，并且`unsigned char`您传递的值被隐式*提升*为`unsigned int`，因此这是类型正确的。您可以使用小写字母`"%x"`打印十六进制数字，大写字母（您在示例中都使用了）。`a``f``"%X"`

（请注意，`"0x%02x"`如果字节为 8 位，则该格式效果最佳；这不能保证，但几乎可以肯定，在您可能使用的任何系统上都是如此。）

我将由您编写适当的循环并决定如何分隔输出。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-06-12T16:42:31.727

这就是我所做的，它使用函数更容易一些，我用于调试和记录内存。

```
void print_hex_memory(void *mem) {
  int i;
  unsigned char *p = (unsigned char *)mem;
  for (i=0;i<128;i++) {
    printf("0x%02x ", p[i]);
    if ((i%16==0) && i)
      printf("\n");
  }
  printf("\n");
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2019-04-10T09:12:47.423

以十六进制打印字符串：

```
void print_hex(const char *string)
{
        unsigned char *p = (unsigned char *) string;

        for (int i=0; i < strlen(string); ++i) {
                if (! (i % 16) && i)
                        printf("\n");

                printf("0x%02x ", p[i]);
        }
        printf("\n\n");
}

char *umlauts = "1 ä ö ü  Ä Ö Ü  é É  ß € 2";

print_hex(umlauts);

0x31 0x20 0xc3 0xa4 0x20 0xc3 0xb6 0x20 0xc3 0xbc 0x20 0x20 0xc3 0x84
0x20 0xc3 0x96 0x20 0xc3 0x9c 0x20 0x20 0xc3 0xa9 0x20 0xc3 0x89 0x20
0x20 0xc3 0x9f 0x20 0xe2 0x82 0xac 0x20 0x32 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-02-13T17:37:13.417

我发现这正是我所需要的，因为我只需要原始十六进制输出。归功于安迪的基础。

请享用！

```
char *print_hex_memory(unsigned char *p) {
  int i;
  char tmp[3];
  char *output = malloc(strlen(p)*2+1);
  memset(output, 0, sizeof(output));
  for (i=0;i<strlen(p);i++) {
    sprintf(tmp, "%02x", p[i]);
    strcat(output, tmp);
  }
  return output;
} 
```

# javascript - jQuery日期格式返回错误的时间

> ID：10375935
> 
> 赞同：0
> 
> 时间：2012-04-29T21:01:25.533
> 
> 标签：javascript, jquery, date, datetime-format

我有一个输入日期如下：

> 2012 年 5 月 17 日星期四 18:00:00 GMT+0100 (BST)

但是，使用以下内容：

```
var dateString = 'hu May 17 2012 18:00:00 GMT+0100 (BST)';

document.write($.format.date(dateString, "ddd MMMM dd, HH:mm")); 
```

结果输出比我预期的快 1 小时：

> 5 月 17 日星期四 18:00

似乎忽略了 GMT+0100 (BST) 部分...
有没有办法让它显示为 17:00？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:10:23.880

您必须明确转换时区。您可以为它创建一个单独的函数。

请检查此链接：

[http://www.techrepublic.com/article/convert-the-local-time-to-another-time-zone-with-this-javascript/6016329](http://www.techrepublic.com/article/convert-the-local-time-to-another-time-zone-with-this-javascript/6016329)

# java - 按 Enter 继续

> ID：10375939
> 
> 赞同：3
> 
> 时间：2012-04-29T21:01:53.963
> 
> 标签：java, swing, jbutton, enter

我有一个 JDialog，它有两个字段，用户名和密码。我想让表单像普通表单一样，按 Enter 就像按继续一样。

我已经尝试过`getRootPane().setDefaultButton(myButton);`，但只有这样似乎不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T21:15:03.623

> 我已经尝试过 getRootPane().setDefaultButton(myButton);，但只有这样似乎不起作用。

比您必须使用方法调用此按钮的代码

[JButton#doClick();](http://docs.oracle.com/javase/7/docs/api/javax/swing/AbstractButton.html#doClick%28%29)

但更好的是使用[KeyBindings](http://docs.oracle.com/javase/tutorial/uiswing/misc/keybinding.html)

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;
import javax.swing.Timer;
import javax.swing.border.EmptyBorder;

public class Test {

    private static final long serialVersionUID = 1L;
    private JDialog dialog = new JDialog();
    private final JPanel contentPanel = new JPanel();
    private Timer timer1;
    private JButton killkButton = new JButton("Kill JDialog");
    private JButton okButton = new JButton("OK");

    public Test() {
        contentPanel.setLayout(new FlowLayout());
        contentPanel.setBorder(new EmptyBorder(5, 5, 5, 5));
        JPanel buttonPane = new JPanel();
        okButton.setActionCommand("OK");
        buttonPane.add(okButton);
        killkButton.addActionListener(new ActionListener() {

            public void actionPerformed(ActionEvent e) {
                System.exit(0);
            }
        });
        killkButton.setActionCommand("Kill JDialog");
        buttonPane.add(killkButton);
        dialog.setDefaultCloseOperation(JDialog.HIDE_ON_CLOSE);
        dialog.addWindowListener(new WindowListener() {

            public void windowOpened(WindowEvent e) {
            }

            public void windowClosing(WindowEvent e) {
                startTimer();
            }

            public void windowClosed(WindowEvent e) {
            }

            public void windowIconified(WindowEvent e) {
            }

            public void windowDeiconified(WindowEvent e) {
            }

            public void windowActivated(WindowEvent e) {
            }

            public void windowDeactivated(WindowEvent e) {
            }
        });
        dialog.setLayout(new BorderLayout());
        dialog.getRootPane().setDefaultButton(okButton);
        dialog.add(buttonPane, BorderLayout.SOUTH);
        dialog.add(contentPanel, BorderLayout.CENTER);
        dialog.pack();
        dialog.setLocation(100, 100);
        dialog.setVisible(true);
        setKeyBindings();
    }

    private void setKeyBindings() {
        okButton.getInputMap(JComponent.WHEN_IN_FOCUSED_WINDOW).put(
                KeyStroke.getKeyStroke("ENTER"), "clickENTER");
        okButton.getActionMap().put("clickENTER", new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                dialog.setVisible(false);
                startTimer();
            }
        });
    }

    private void startTimer() {
        timer1 = new Timer(1000, new AbstractAction() {

            private static final long serialVersionUID = 1L;

            @Override
            public void actionPerformed(ActionEvent e) {
                SwingUtilities.invokeLater(new Runnable() {

                    @Override
                    public void run() {
                        dialog.setVisible(true);
                    }
                });
            }
        });
        timer1.setDelay(500);
        timer1.setRepeats(false);
        timer1.start();
    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                Test test = new Test();
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-04-29T21:11:13.277

```
JButton button = ...
JTextField password = ...
ActionListener buttonListener = ...

button.addActionListner(buttonListener);
password.addActionListener(buttonListener); 
```

当在 a 中按下 enter 时`JTextField`，会触发一个动作事件。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-04-29T21:20:15.673

您可以通过向您的文本字段添加一个动作侦听器来实现这一点，就像这样。

```
JTextField field1 = new JTextField();

field1.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent e) {

        //here is your method to continue
        continue();

        }

    }); 
```

# browser - 添加对新 html 标签的支持

> ID：10375942
> 
> 赞同：0
> 
> 时间：2012-04-29T21:02:23.917
> 
> 标签：browser, tags, browser-plugin

主流浏览器都支持这个`<object/>`标签。

我想在我的网站上加入一个视频播放器来播放 .mkv 视频，但我不能使用大多数，因为它们是基于 flash 的，它只能播放 .flv 和 .f4v。

这就是为什么我要切换到`<object/>`标签

但是，如果我想合并一个名为 的标签，`<mkvvideo/>`与该标签关联的简单插件是否可用，或者浏览器的核心编程是否可以处理？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-02T20:50:07.517

您不能将插件与标签相关联。
相反，您[注册](https://developer.mozilla.org/en-US/docs/Gecko_Plugin_API_Reference/Plug-in_Development_Overview#Registering_Plug-ins)插件支持的 mimetype（和文件扩展名）并将该 mimetype 与 object 标签（在本例中`video/x-matroska`）一起使用。

# c# - Windows Mobile 7 - C# 将 SQL 转换为 Linq，删除表中除前 10 之外的所有内容

> ID：10375945
> 
> 赞同：2
> 
> 时间：2012-04-29T21:02:30.793
> 
> 标签：c#, windows-phone-7, linq-to-entities

我正在尝试使用 linq 在 c# 中为 Windows Mobile 7 创建一个查询，该查询将删除表中除前 10 个高分之外的所有内容。表 Scores 很简单，包含 highScore_ID (int)、highScore (int) 和 playerName (string)。

SQL：

```
DELETE FROM Scores
WHERE highscore_ID NOT IN (SELECT TOP 10 highScore FROM HighScore) 
```

林克：

```
from c in context.Scores where !((from o in context.Scores select   
o.highScore).Take(10)).Contains(c.highscore_ID) select c; 
```

我似乎在使用这个 linq 查询时遇到了错误，非常感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:04:53.370

好吧，首先你的 SQL 是错误的。应该是这样的：

```
DELETE FROM HighScore
WHERE highscore_ID NOT IN (
    SELECT TOP 10 highScore_ID
    FROM HighScore
    ORDER BY score DESC
) 
```

您可以在 LINQ 中通过首先选择适当的行然后为每个对象调用 DeleteObject 来执行此操作：

```
var query = context.Scores.OrderByDescending(x => x.HighScore).Skip(10);
foreach (var score in query) {
    context.Scores.DeleteObject(score);
}
context.SaveChanges(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T21:32:50.217

如果您通常使用 EF，它不支持批量删除，但如果您看到[Alex James](https://stackoverflow.com/questions/869209/bulk-deleting-in-linq-to-entities)在类似问题中的回答，您可以执行以下操作：

```
var query = Scores.OrderBy(x=>x.HighScore).Skip(10);
query.Delete(); 
```

正如您在他的回答中看到的那样，您应该自己编写删除扩展方法，但他提供了所有其他方法（如工厂方法、GetQueryInfo ......）。只有一部分是 Delete 方法，可以像 Update 方法一样编写，在这部分你应该编写你自己的`GetDeleteCommand`，它应该返回字符串[，如 update one](http://blogs.msdn.com/b/alexj/archive/2008/02/11/rolling-your-own-sql-update-on-top-of-the-entity-framework-part-4.aspx)有一点变化：

```
 command.CommandText = string.Format(
       "Delete From {0} WHERE {1} IN ({2})",
       info.TableName,
       Context.Keys[0],
       info.RestrictingSQL
       ); 
```

有关包含删除的扩展方法，请参见[此处，...](https://github.com/loresoft/EntityFramework.Extended)

同样正如马克所说，您可以使用简单的存储过程来完成所有这些工作:)

PS：[阅读](http://blogs.msdn.com/b/alexj/archive/2008/02/11/rolling-your-own-sql-update-on-top-of-the-entity-framework-part-4.aspx)[Alex](http://blogs.msdn.com/b/alexj/archive/2008/02/11/rolling-your-own-sql-update-on-top-of-the-entity-framework-part-3.aspx)文章的第[1、2、3、4](http://blogs.msdn.com/b/alexj/archive/2007/12/07/rolling-your-own-sql-update-on-top-of-the-entity-framework-part-1.aspx)[部分](http://blogs.msdn.com/b/alexj/archive/2008/01/15/rolling-your-own-sql-update-on-top-of-the-entity-framework-part-2.aspx)。

# javascript - 雅虎 Forecastjson 给出 XML 错误

> ID：10375946
> 
> 赞同：-1
> 
> 时间：2012-04-29T21:02:33.273
> 
> 标签：javascript, jquery, xml, json, yahoo-api

浏览完这个网站，发现可以使用forecastjson获取JSON格式的Yahoo天气。

当我运行时：

```
$.getJSON("http://weather.yahooapis.com/forecastjson?w=2112762724", function(data){
    ...
}); 
```

我收到以下错误：

```
XMLHttpRequest cannot load http://weather.yahooapis.com/forecastjson?w=2112762724\. Origin null is not allowed by Access-Control-Allow-Origin. 
```

我以前遇到过这个错误，但这通常是因为我正在尝试加载 XML 跨域，但这显然是 JSON。如果您转到 getJSON 函数中的链接，它会显示 JSON 数据。有谁知道我为什么会收到这个错误？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:43:18.393

使用`JSON`不代表不会遇到跨域问题。那是一个对象标准。

如果要进行跨域请求，则应使用[JSONP](http://en.wikipedia.org/wiki/JSONP)。

您尝试请求的 url 不支持 JSONP 请求。但是您可以使用 YQL 来代替。

这是一个例子，

```
var query = escape('select item from weather.forecast where woeid="2295424"');
var url = "http://query.yahooapis.com/v1/public/yql?q=" + query + "&format=json&callback=c"; 

$.getJSON(url, function(data) {
   console.log(data);
});​ 
```

这是您可以检查 json 结果的[URL 。](http://query.yahooapis.com/v1/public/yql?q=select%20item%20from%20weather.forecast%20where%20woeid=%222295424%22&format=json&callback=c)

[演示](http://jsfiddle.net/Fxfhh/1/)

# c++ - 错误：C 函数的声明与先前的声明冲突

> ID：10375948
> 
> 赞同：2
> 
> 时间：2012-04-29T21:02:46.370
> 
> 标签：c++, codeblocks, linear-algebra, calculator

我有点初学者，我开始掌握一些东西，但我正在为这个人添加另一个部分到这个计算器。

我有这个`main.cpp`，我已经添加了一点`selection == 5`：

```
#include <iostream>
#include <string.h>

using namespace std;

// Function includes
// I try to keep them in the order they appear in the
// output below for organization purposes
#include "calc.m.xy12plugin.cpp"
#include "calc.b.xymplugin.cpp"
#include "calc.m.xybplugin.cpp"
#include "calc.point.xymplugin.cpp"
#include "calc.parallelplugin.cpp"

// The above one would be here, too

int main(int argc, const char* argv[]) {
int i;
i = 0;
cout << "Linear Equation Calculator" << endl << "Copyright (c) 2011 Patrick Devaney" << endl
<< "Licensed under the Apache License Version 2" << endl;
// This loop makes the code a bit messy,
// but it's worth it so the program doesn't
// crash if one enters random crap such as
// "zrgxvd" or "54336564358"
while(i < 1) {
cout << "Type:" << endl
<< "0 to calculate a slope (the M value) based on two points on a line" << endl
<< "1 to calculate the Y-intercept (the B value) based on two points and a slope" << endl
<< "2 to calculate the slope (the M value) based on the Y-intercept and X and Y" << endl <<
"plug-ins" << endl
<< "3 to find the next point up or down a line based on the slope (M) and X and Y"
<< endl << "plug-ins" << endl
<< "4 to find a point x positions down the line based on the slope (M) and X and Y"
<< endl << "plug-ins" << endl
<< "5 to find the equation of a parallel line in form y=mx+c"
<< endl << "plug-ins" << endl;

string selection;
cin >> selection;
if(selection == "0") {
mcalcxyplugin();
i++;
}
else if(selection == "1") {
calcbxymplugin();
i++;
}
else if(selection == "2") {
calcmxybplugin();
i++;
}
else if(selection == "3") {
calcpointxymplugin(1);
i++;
}
else if(selection == "4") {
int a;
cout << "How many points up/down the line do you want? (Positive number for points" << endl
<< "further up, negative for previous points" << endl;
cin >> a;
calcpointxymplugin(a);
i++;
}
else if(selection == "5"){
calcparallelplugin();
i++;
}
else {
i = 0;
}
// End of that loop below
}
return 0;
} 
```

然后我创建了这个文件，我链接到`else if(selection == "5"...`

这是`cal.parallelplugin.cpp`文件

```
#include <iostream>
using namespace std;

int main(){
cout <<"Welcome to the Parallel Line Calculator \n" << endl;
cout << "Here you will find the equation of the line parallel to a line passing through \na point (x,y) in the form y=mx+c \n\n" << endl;

float x,y, c, x1, y1, gradient, c1;

 cout << "NOTE: Equation must be in form y=mx+c \n" << endl;
 cout <<"Please enter the number of Xs:" <<endl;
 cin >> x;
 cout <<"Please enter the number of Ys:" <<endl;
 cin >> y;
 cout <<"Please enter the number of Cs:" <<endl;
 cin >> c;
 cout <<"Please enter the x co-ordinate:" <<endl;
 cin >> x1;
 cout <<"Please enter the y co-ordinate:" <<endl;
 cin >> y1;

gradient= x/y;
c1 = y1 + (gradient*x1);

 cout << "Equation of parallel line through (" << x1 << ", " << y1 << ") is " << "y=" << gradient << "x+" << c1 << endl;

} 
```

编译时我没有得到错误，但是当我编译 main.cpp 时，我得到了以下错误，我不能把我的一生都花在解决问题上:(

```
C:\Users\George\Desktop\linear_equation_calc\main.cpp||In function 'int main(int, const char**)':|
C:\Users\George\Desktop\linear_equation_calc\main.cpp|51|error: declaration of C function 'int main(int, const char**)' conflicts with|
C:\Users\George\Desktop\linear_equation_calc\calc.parallelplugin.cpp|9|error: previous declaration 'int main()' here|
C:\Users\George\Desktop\linear_equation_calc\main.cpp||In function 'int main(int, const char**)':|
C:\Users\George\Desktop\linear_equation_calc\main.cpp|100|error: 'calcparallelplugin' was not declared in this scope|
||=== Build finished: 3 errors, 0 warnings ===| 
```

帮助！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-04-29T21:05:50.043

你有两个`main`功能。你应该只有一个`main`功能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-04-29T21:13:16.430

除了你有两个`main`功能之外，

我认为您误解了 C++ 中如何使用多个文件。一个 .cpp 文件在编译期间不应看到另一个 .cpp 的内容。

您可以在 .cpp 文件中定义函数（或类等），但是您还必须在 .h（或 .hpp/.hh）文件中声明它，然后在另一个文件中引用该文件。

例如，如果您`int Test()`在名为 Utils.cpp 的文件中调用了一个函数。要在您的`main.cpp`文件中使用它，您需要创建一个名为 something 的文件`Utils.h`（实际名称无关紧要，但您想要一些可以理解的东西）。在里面`Utils.h`你应该放一些类似的东西：

```
#pragma once

int Test(); 
```

该文件只是告诉编译器在我的程序的某处声明了一个名为 Test 的函数，接受它存在的事实并继续编译（解决这些问题是链接器的工作，而不是编译器）。

然后在您的 main.cpp 文件中，包含`Utils.h`. 虽然您可以包含 .cpp 文件，但通常认为这是一个坏主意，因为您最终会增加编译时间、目标文件大小，并且如果某些内容被解析两次，您可能会遇到链接器问题（最后一点我不太确定）

# facebook - 使用 Facebook Graph Api 获取有关评论的信息？

> ID：10375950
> 
> 赞同：0
> 
> 时间：2012-04-29T21:02:51.477
> 
> 标签：facebook, facebook-graph-api

我想从我的应用程序的评论中获取信息（文本和 uid）。

`https://graph.facebook.com/commentID`

我想我需要我的应用程序访问令牌来获取评论信息。如何获取它并使用评论信息回显/警报？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:06:18.190

您需要请求用户允许您的应用程序，然后使用您在对 Graph API 的请求中获得的访问令牌...

应用程序的允许可以在服务器端或 Javascript 中完成（我更喜欢 JS）

如何允许应用程序和调用图形 api 调用的示例可以在下面的 facebook 开发人员 js sdk 文档中找到：http: [//developers.facebook.com/docs/reference/javascript/FB.login/](http://developers.facebook.com/docs/reference/javascript/FB.login/)

```
function loginAndGetData(){
    FB.getLoginStatus(function(response){
           if(response.status=="connected"){
                FB.Api("commentID",onGotData);
           } else {
                FB.Login(function(response){
                    if(response.status=="connected"){
                         FB.Api("commentID",onGotData);
                    }
                });
           }
    });
}

function onGotData(data){
    console.log(data)
} 
```

# jquery - css3 过渡手风琴菜单

> ID：10375955
> 
> 赞同：0
> 
> 时间：2012-04-29T21:03:27.760
> 
> 标签：jquery, css, css-transitions

我制作了一个手风琴菜单来替换选择表单控件，并且我想使用 css3 转换使其平滑展开/收缩。
这是 jsfiddle 的链接：http: [//jsfiddle.net/hKsCD/4/](http://jsfiddle.net/hKsCD/4/)

为了达到预期的效果，我需要为每个链接的高度设置动画，但我不知道该怎么做。CSS3 过渡令人困惑。o_o

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T07:09:34.577

```
.accordion {
    height: 20px; /*define height to start from*/
    transition: height 2s;
    -moz-transition: height 2s; /* Firefox 4 */
    -webkit-transition: height 2s; /* Safari and Chrome */
    -o-transition: height 2s; /* Opera */
}
.accordion.expanded {
    height: 400px;/*desired height when expanded*/
} 
```

您必须小心，但当高度从一个元素变化到另一个元素时，您应该在这些情况下使用最大宽度解决方法，因为“高度：自动”将不起作用。

`height`例如，在上面的示例`max-height`中将扩展状态替换`max-height`为元素永远不会达到的设置（不过不要太高，因为动画的速度是根据要动画的高度计算的 --> 一个太高的最大宽度（例如 9999 像素）导致动画速度如此之快，以至于您不会注意到它）

# c# - Selenium 设置首选项目录

> ID：10375961
> 
> 赞同：4
> 
> 时间：2012-04-29T21:04:21.027
> 
> 标签：c#, firefox, selenium, webdriver, selenium-webdriver

我正在使用 Firefox 网络驱动程序。我想将所有 cookie 和缓存文件存储到自定义目录中。但它采用临时目录而不是我的目录。这是我的代码：

```
FirefoxProfile firefoxProfile = new FirefoxProfile(path, false);
MessageBox.Show(firefoxProfile.ProfileDirectory);     //Its showing blank
driver = new FirefoxDriver(firefoxProfile);
MessageBox.Show(firefoxProfile.ProfileDirectory);    //Its showing the temp dir
                                                     //not my custom dir 
```

如何让它占用我的目录并将所有 cookie 和文件存储在那里？

谢谢。

编辑：

我需要修复 selenium 配置文件目录（因为它一直在变化）。这样我就可以使用以前的 cookie 和缓存文件。你能给我任何想法或任何替代方法来完成它吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T22:03:45.193

您可以找到临时文件路径，然后在创建驱动程序后使用系统命令将文件复制到此文件夹中。然后你就可以访问它们了，虽然这有点hacky但应该可以工作（除非我在这里错过了一些重要的东西，我觉得我可能有:)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:26:25.687

`FirefoxProfile.ProfileDirectory`指的是生成的配置文件目录（显然，仅在创建浏览器实例后可用）。
根据 Selenium 源代码，配置文件目录生成为临时文件夹中的随机目录，因此**无法更改**

```
// creates a random folder name in Path.GetTempPath()
this.profileDir = GenerateProfileDirectoryName(); 
```

和

```
public string ProfileDirectory
{
    get
    {
        return this.profileDir;
    }
} 
```

而`profileDirectory`您在`FirefoxProfile`创建期间指定的用于加载 user.js。

来自[mozillaZine](http://kb.mozillazine.org/User.js_file)的报价：

> user.js 文件是修改首选项的另一种方法，仅推荐给高级用户。

**更新。** 除了深入研究硒源之外，我可以看到解决您的问题的唯一方法是在将 webdriver 启动到所需文件夹之前更改临时文件夹位置，然后将其更改回当前用户的原始值。

**更新2。** 另一种可能的解决方案（尽管尚未尝试）是`ProfileDirectory`从以前的 webdriver 运行中指定为另一个 webdriver 实例`profileDirectory`的新实例`FirefoxProfile`。鉴于所有文件`profileDirectory`都被复制到生成的临时文件夹中，这可以帮助您实现所需的功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-04-30T03:06:39.013

你绝对有必要使用firefox吗？如果您使用的是IE，这不会被照顾吗？来自 selenium jar 帮助内容

> -ensureCleanSession：如果浏览器没有用户配置文件，请确保每个新会话都没有来自以前会话的工件。例如，启用此选项将导致所有用户 cookie 在启动 IE 之前存档，并在 IE 关闭后恢复。

因此，如果您在 IE 中运行测试时**不使用该选项，您的 cookie 将保留。**我没有在 webdriver 中尝试过，但我看到使用 Selenium 1 时保留了 cookie。

# facebook-opengraph - Facebook Open Graph API explorer offline_access 令牌无法勾选

> ID：10375963
> 
> 赞同：0
> 
> 时间：2012-04-29T21:04:24.580
> 
> 标签：facebook-opengraph

我最近一直在从事一个从 Facebook 开放图形 API 获取数据的项目。一切正常，除了几个小时后它停止工作并且我的令牌不再有效。做了一些研究并在扩展权限下我需要勾选offline_access，以便我的令牌持续更长时间。我勾选了离线访问，但我获得的令牌仍然只持续 2 小时，如果我再次检查我的权限，它仍然没有勾选。一遍又一遍地完成此操作，并且无法在开放图形 API 资源管理器中勾选 offline_access。

还有其他人遇到这个问题吗？

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-30T03:35:00.237

新应用不支持离线访问，并将很快从现有应用中删除，请参阅此处[https://developers.facebook.com/roadmap/offline-access-removal/](https://developers.facebook.com/roadmap/offline-access-removal/)了解迁移信息

# c# - Windows phone 7 将项目异步添加到堆栈面板

> ID：10375967
> 
> 赞同：1
> 
> 时间：2012-04-29T21:04:55.833
> 
> 标签：c#, windows-phone-7, asynchronous, stackpanel

我想知道是否可以将子项异步添加到堆栈面板（或任何其他元素）。似乎所有项目都是一次渲染的。

如果我使用后台工作人员或调度程序并不重要。结果总是一样的——当所有项目都被添加后，它们就会被显示出来。

我想要的是这样的：

```
Deployment.Current.Dispatcher.BeginInvoke(() => {
    foreach (var item in items.Skip(x).Take(pageSize))
    {
        // when this row is executed new item should be visible
        ItemsList.Children.Add(new _ListItem(item));
    }
}); 
```

关于最大

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-04-30T12:40:53.910

此代码段每 500 毫秒将新的 TextBlock 添加到 stackPanel 中，而不会冻结 UI。项目在添加后立即在 UI 中可见：

```
ThreadPool.QueueUserWorkItem(_ => {
                foreach (int item in Enumerable.Range(1,50)) {
                  Thread.Sleep(500);//simulate some calculations here
                  int item1 = item;
                  Deployment.Current.Dispatcher.BeginInvoke(() => {
                      stackPanel.Children.Add(new TextBlock(){Text = "Text "+item1});
                  });
                }
            }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-29T22:50:02.903

您应该使用[ObservableCollection](http://msdn.microsoft.com/en-us/library/ms668604%28v=vs.95%29.aspx)类来存储要显示的项目。该类实现了[INotifyCollectionChanged](http://msdn.microsoft.com/en-us/library/system.collections.specialized.inotifycollectionchanged%28v=vs.95%29.aspx)接口，这将允许它在添加和删除项目时更新 UI。

以下是有关[绑定到 ObservableCollection](http://msdn.microsoft.com/en-us/library/ms748365.aspx)和[在添加项目时更新 UI](https://stackoverflow.com/questions/4677757/have-an-observablecollection-update-the-ui-as-elements-get-added-in)的更多详细信息（请参阅此[演示](http://www.youtube.com/watch?v=XHHV2udPhmo)）。

此外，您可能需要使用[Dispatcher](https://stackoverflow.com/questions/4677757/have-an-observablecollection-update-the-ui-as-elements-get-added-in)添加/删除项目。

# php - 使用数据库中的值时使用 if 语句

> ID：10375969
> 
> 赞同：1
> 
> 时间：2012-04-29T21:05:30.013
> 
> 标签：php, html, sql, if-statement

我有一个将结果数据输出到表中的查询。我在该表中有两个字段对于此`if`语句至关重要：`Max Capacity`和`Current Capacity`. 这些来自我们的数据库，来自同一张表。

我想写一个`if`声明：

```
if (Max_C == Current_C){
   echo "Sorry, course is full.";
}
else{
   $insert = mysql_query ("insert into blahblahblah... ");
} 
```

我该怎么做呢？如何从数据库中指定`max_c`和`current_c`？

那段代码：

```
if($courseandtime) {  $max_e = $courseandtime['MaxEnrollment']; $current_e = $courseandtime['COUNT(REGISTERED.SID)']; } 

    if ($current_e < $max_e) {
        echo "
       <form action='register-exec.php' method='post'>
       <label>Time: $_POST[Time]</label><br>
       <input type='hidden' value='$Time' /><br><br>
       <label>Student ID:</label><br>
       <input type='text' name='SUCID' id='SUCID' /><br><br>
       <label>CID: $_POST[CID]</label><br>
       <input type='hidden' name='CID' id='CID' /><br><br>
           <label>SID: $row['SID']</label><br>
       <input type='hidden' name='SID' id='SID' /><br><br>
       <button type='submit'>Register</button>
       </form>
       ";
    }
    else {
        echo 'Sorry, were full!';
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-29T21:24:35.317

这是插入代码：

```
 //Create query
    $qry="INSERT INTO table (column-name, another-column) VALUES ('$variable', '$valueyouwanttoinsert')";
    $result=mysql_query($qry);
    if ($result) {
    echo "Success!";
    }
    else {
    die("Query Failed");
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-04-29T21:16:18.527

您可以使用以下代码执行此操作：

```
//Create query
$qry="SELECT * FROM table WHERE column='$variable'";
$result=mysql_query($qry);

//Check whether the query was successful or not
if($result) {
    $course = mysql_fetch_assoc($result);
        $max_c = $course['max_c'];
        $current_c = $course['current_c'];
}
else {
    die("Query failed");
}
    if ($current_c == $max_c){
        echo "Sorry, the course is full!";
    }
    else {
        //MySQL Insert Code here
    } 
```

# ruby-on-rails - ActiveRecord + Oracle 连接问题

> ID：10375970
> 
> 赞同：0
> 
> 时间：2012-04-29T21:05:35.630
> 
> 标签：ruby-on-rails, oracle, activerecord, installation

我做了所有的安装，也许不确定是否还缺少一些东西。

我想要带有 Oracle 的 Rails。我所做的是`oci8`从 RubyForge 安装。然后是Oracle的ActiveRecord增强版。当我确实去`rake db:create`改变安装活动记录oracle增强版本时。我又做了一次（`gem install`）然后运行`rake db:create`但又得到了同样的错误。不确定，有什么可以解决的。

==================================================== =====================

以下是 database.yml 的图像

```
development:
  adapter: oracle_enhanced
  database: //localhost:1521/dba
  username: re*********
  password: ******** 
```

对于活动记录安装，以下是结果集

```
E:\railstest\script>gem install activerecord-oracle_enhanced-adapter
WARNING:  Error fetching data: SocketError: getaddrinfo: The storage control bl
cks were destroyed.  (http://rubygems.org/latest_specs.4.8.gz)
Successfully installed activerecord-oracle_enhanced-adapter-1.4.1
1 gem installed
Installing ri documentation for activerecord-oracle_enhanced-adapter-1.4.1...
Installing RDoc documentation for activerecord-oracle_enhanced-adapter-1.4.1... 
```

执行 localhost:3000/greetings/hello 时

这是错误**ActiveRecord::ConnectionNotEstablished的完整跟踪**

```
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:398:in `retrieve_connection'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_specification.rb:168:in `retrieve_connection'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_specification.rb:142:in `connection'
activerecord (3.2.3) lib/active_record/query_cache.rb:67:in `call'
activerecord (3.2.3) lib/active_record/connection_adapters/abstract/connection_pool.rb:467:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:28:in `call'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `_run__31549393__call__4__callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `send'
activesupport (3.2.3) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.3) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `send'
activesupport (3.2.3) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.3) lib/rails/rack/logger.rb:26:in `call_app'
railties (3.2.3) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.1) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.3) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.1) lib/rack/lock.rb:15:in `call'
actionpack (3.2.3) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.3) lib/rails/engine.rb:479:in `call'
railties (3.2.3) lib/rails/application.rb:220:in `call'
rack (1.4.1) lib/rack/content_length.rb:14:in `call'
railties (3.2.3) lib/rails/rack/log_tailer.rb:14:in `call'
rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
E:/Ruby187/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
E:/Ruby187/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
E:/Ruby187/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
E:/Ruby187/lib/ruby/1.8/webrick/server.rb:162:in `start'
E:/Ruby187/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
E:/Ruby187/lib/ruby/1.8/webrick/server.rb:95:in `start'
E:/Ruby187/lib/ruby/1.8/webrick/server.rb:92:in `each'
E:/Ruby187/lib/ruby/1.8/webrick/server.rb:92:in `start'
E:/Ruby187/lib/ruby/1.8/webrick/server.rb:23:in `start'
E:/Ruby187/lib/ruby/1.8/webrick/server.rb:82:in `start'
rack (1.4.1) lib/rack/handler/webrick.rb:13:in `run'
rack (1.4.1) lib/rack/server.rb:265:in `start'
railties (3.2.3) lib/rails/commands/server.rb:70:in `start'
railties (3.2.3) lib/rails/commands.rb:55
railties (3.2.3) lib/rails/commands.rb:50:in `tap'
railties (3.2.3) lib/rails/commands.rb:50
script/rails:6:in `require'
script/rails:6 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-07T08:42:54.080

您在 yml 中的数据库定义对我来说似乎是错误的......您应该给出您在 tnsnames 中给出的名称（您的 oracle 客户端的）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T00:31:36.977

1.  通过 Rake 创建 Oracle 数据库很痛苦。它需要具有可以创建用户的系统或 DBA 帐户。这需要将您的 DBA 密码设置为`database.yml`. 在我看来，这是一种不好的做法，应该避免。手动创建数据库。

2.  确保您`database.yml`声明了正确的适配器：

    ```
    adapter:  oracle_enhanced 
    ```

# ruby - Ruby：将方法从单独的文件添加到模块并自动加载

> ID：10375971
> 
> 赞同：2
> 
> 时间：2012-04-29T21:05:46.030
> 
> 标签：ruby, ruby-on-rails-3

我在 Rails 应用程序中使用 Sorcery 库。其中一个模块用于外部身份验证，我需要向该模块添加一个方法。

现有代码在[这里](https://github.com/NoamB/sorcery/blob/master/lib/sorcery/controller/submodules/external.rb)，我想从[这个补丁](https://github.com/foohey/sorcery/commit/599b08a70e1a40068a7520aececfd3b30ae29be9)`add_provider_to_user`中添加方法。

所以，我在我的`lib/modules`目录中添加了一个文件，我告诉 Rails 自动加载。该文件被调用`sorcery_extension.rb`，它看起来像这样：

```
module Sorcery
  module Controller
    module Submodules
      module External
        module InstanceMethods
          protected

          # If user is logged, he can add all available providers into his account
          def add_provider_to_user(provider)
            provider_name = provider.to_sym
            provider = Config.send(provider_name)
            user_hash = provider.get_user_hash
            config = user_class.sorcery_config

            user = current_user.send(config.authentications_class.to_s.downcase.pluralize).build(config.provider_uid_attribute_name => user_hash[:uid], config.provider_attribute_name => provider)
            user.save(:validate => false)

            return user
          end
        end
      end
    end
  end
end 
```

这没有用。我进入`undefined method error`我的控制器（调用其他巫术方法工作正常）。

所以，我对 ruby​​ 的基本理解是您可以随时向对象或模块添加方法......我想我已经在文件中正确复制了模块的嵌套。我需要将模块文件命名为不同的名称吗？我不太确定如何做这种事情，所以非常感谢任何帮助。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-04-30T02:12:25.400

您的文件永远不会是`require`d。您可以通过在控制台中键入来仔细检查：

```
Sorcery::Controller::Submodules::External::InstanceMethods.method_defined?(:add_provider_to_user)
  # => will return false, you want true 
```

原因是 auloading 仅在常量未知时发生，在这种情况下 Rails 会尝试从不同的自动加载路径自动加载它。

您必须明确要求您的文件（例如，来自初始化程序中的文件）并且事情会按预期工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-04-30T04:11:28.123

Rails 对 requires 的约定是，对于每个模块，它都在同名目录中查找。

对于你的例子

```
module Sorcery
  module Controller
    module Submodules
      module External
       module InstanceMethods 
```

如果要将模块放在 lib 目录中。当它进入“autorequire”时，Rails 会在这条路上期待它

```
lib/sorcery/controller/submodules/external/instance_methods.rb 
```

这就是为什么保持模块嵌套浅的通常很好的约定。~ 2 级深。

# windows - 试图找到在 Windows 中开发 opengl es 2.0 的最佳方法

> ID：10375973
> 
> 赞同：3
> 
> 时间：2012-04-29T21:06:07.673
> 
> 标签：windows, opengl-es-2.0

我喜欢基于 opengl es 2.0 开发游戏到 android，模拟器很痛苦，有没有更好的方法在 windows fast toolkit /engine 上开发 opengl es 2.0 应用程序？我可以调试代码的东西。
谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:47:31.543

您可以使用 Windows 上的 OpenGL ES 2.0 仿真之一来开发您的应用程序。然后，您的大部分渲染代码将是用于 Windows 和 Android 的相同 C/C++ 代码。只有平台特定的东西才能打开窗口、获取输入（toches）和读取文件。

以下是来自不同供应商的一些 GLES2 仿真器：

*   [Imgtec PowerVR](http://www.imgtec.com/powervr/insider/sdkdownloads/index.asp) - 支持 PVR 纹理压缩
*   [Qualcomm Ardeno](https://developer.qualcomm.com/develop/mobile-technologies/graphics-optimization-adreno/tools-and-resources) - 支持 ATITC 纹理压缩
*   [ARM 马里](http://www.malideveloper.com/developer-resources/tools/opengl-es-20-emulator.php)
*   [Nvidia Tegra](http://developer.nvidia.com/tegra-resources-archive) - 支持 DXT 纹理压缩
*   [Google ANGLE](http://code.google.com/p/angleproject/) - 支持 DXT 纹理压缩。开源！被 Chrome 和 Firefox 用作 WebGL 后端。

我自己喜欢并使用 Google ANGLE 在 Windows 上开发我的应用程序。之后，我可以在 Android 上运行应用程序而无需更改任何渲染代码。

# ios - 我的 NSMutableArray 突然变成了 CALayer

> ID：10375976
> 
> 赞同：0
> 
> 时间：2012-04-29T21:06:38.060
> 
> 标签：ios, nskeyedarchiver

我觉得我产生了幻觉。我正在尝试为我的 Concentration-lke 游戏添加一些持久性。我想跟踪高分。我今天让这个部分工作了一段时间，现在它已经全部消失了（我认为这是正确的 iOS 术语）。现在，我的 allHighScores NSMutablearray 突然变成了一个 CALayer。我正在使用 NSKeyed 归档。在 allHighScores 加载数据之前，我的文件中有一个断点。在单步执行应用程序时，allHighScores 作为 NSMutableArray 存在 - 然后，在下一步，它突然变成了 CA 层。嗯？

```
-(id)init 
{
    self = [super init];
    if (self) {
        NSString *path = [self flipScoreArchivePath];
        NSLog(@"Path is %@", path);
        allHighScores = [NSKeyedUnarchiver unarchiveObjectWithFile:path];
        if (!allHighScores)  {
        allHighScores = [[NSMutableArray alloc] init];
        }
    }
    return self;
}

+(FlipHighScoreStore *)sharedStore {
    static FlipHighScoreStore *sharedStore = nil;
    if (!sharedStore) {
        sharedStore = [[super allocWithZone:nil]init];
    }
    return sharedStore;
} 
```

不知何故，调用 NSKeyedUnarchiver 将我的 allHighScores 从 NSMutableArray 更改为 CALayer。我很困扰。

我尝试在取消归档指令中添加保留，但这没有帮助。

这是我的编码/解码代码：

```
-(void)encodeWithCoder:(NSCoder *)aCoder {
[aCoder encodeObject:self.themeChosen forKey:@"themeChosen"];
[aCoder encodeInt:self.highScore forKey:@"highScore"];
[aCoder encodeInt:self.scoreStartLevel forKey:@"scoreStartLevel"];
[aCoder encodeInt:self.scoreFinishLevel forKey:@"scoreFinishLevel"];
[aCoder encodeObject:scoreDateCreated forKey:@"scoreDateCreated"];}

-(id)initWithCoder:(NSCoder *)aDecoder {
if (self) {
    self.themeChosen = [aDecoder decodeObjectForKey:@"themeChosen"];
    self.highScore = [aDecoder decodeIntForKey:@"highScore"];
    self.scoreStartLevel = [aDecoder decodeIntForKey:@"scoreStartLevel"];
    self.scoreFinishLevel = [aDecoder decodeIntForKey:@"scoreFinishLevel"];
    scoreDateCreated = [aDecoder decodeObjectForKey:@"scoreDateCreated"];
}
return self;} 
```

更新：当“highscores.archive”文件已经存在并再次调用保存时程序崩溃。我可以启动应用程序，查看高分 - 他们在那里并愉快地检索，但保存代码：

```
-(BOOL)saveHighScores {
NSString *path = [self flipScoreArchivePath];
return [NSKeyedArchiver archiveRootObject:allHighScores toFile:path];} 
```

导致 EXC_BAD_ACCESS。路径是正确的，所以不知何故 allHighScores 不是。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-04-29T21:17:36.547

这里的问题是您没有保留取消归档的结果。根据[基本内存管理规则](http://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmRules.html#//apple_ref/doc/uid/20000994-SW1)，名为 的方法`+unarchiveObjectWithFile:`将返回一个自动释放的对象。因此，由于您将其放入 ivar，因此您需要保留此对象，否则它将从您的下方被释放。

尽管在您的情况下，由于您想要一个*可变*数组，因此您实际上需要调用`-mutableCopy`since`NSKeyedUnarchive`只会给您一个不可变数组。

```
-(id)init {
    if ((self = [super init])) {
        NSString *path = [self flipScoreArchivePath];
        NSLog(@"Path is %@", path);
        allHighScores = [[NSKeyedUnarchiver unarchiveObjectWithFile:path] mutableCopy];
        if (!allHighScores) {
            allHighScores = [[NSMutableArray alloc] init];
        }
    }
    return self;
} 
```

* * *

你`-initWithCoder:`不叫超级。你需要说

```
if ((self = [super initWithCoder:aDecoder])) { 
```

* * *

## 回答 #2

> 赞同：-3
> 
> 时间：2012-04-30T02:17:17.867

你试过这个吗？

```
-(id)init { 
    if ((self = [super init])) {
        NSString *path = [self flipScoreArchivePath];
        NSLog(@"Path is %@", path);
        allHighScores = [[NSKeyedUnarchiver unarchiveObjectWithFile:path] mutableCopy];
        if (!allHighScores) {
            allHighScores = [[NSMutableArray alloc] init];
        }
        // All-important new line....
        [self setAllHighScores:allHighScores];
    }
    return self;
} 
```

* * *

***编辑/更新：*** 所以，这是我在上述示例中实际意图的两个版本（我在这里假设他的 ivar`allHighScores`具有相应的属性）：

```
-(id)init { 
    if ((self = [super init])) {
        NSString *path = [self flipScoreArchivePath];
        NSLog(@"Path is %@", path);
        self.allHighScores = [[NSKeyedUnarchiver unarchiveObjectWithFile:path] mutableCopy];
        if (!self.allHighScores) {
            self.allHighScores = [[NSMutableArray alloc] init];
        }
    }
    return self;
} 
```

这是我实际这样做的方式：

```
-(id)init { 
    if ((self = [super init])) {
        NSMutableArray *arr = [[NSKeyedUnarchiver unarchiveObjectWithFile:[self flipScoreArchivePath]] mutableCopy];
        if (!arr) arr = [[NSMutableArray alloc] init];
        [self setAllHighScores:arr];
    }
    return self;
} 
```

# c# - 如何清除对 gridview 行的选择？

> ID：10375984
> 
> 赞同：21
> 
> 时间：2012-04-29T21:07:44.360
> 
> 标签：c#, asp.net

我正在使用 C# ASP.NET VS2010。

我有一个 GridView，包括一个选择命令按钮。

此选择按钮指向选择后激活的 C# 页面背后的代码中的一个操作。

执行完所有必需的操作后，我想清除选择。

例如：如果 ID="gvInfo" 我想使用类似 gvInfo.Deselect();

我怎么做？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2012-04-29T21:10:50.920

试试这个：

```
Gridview has a property called SelectedIndex.  
If you want to unselect any rows then set this property to -1\. 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-13T19:38:11.030

谢谢你的问题Different111222；这个问题帮助了我。

```
gvInfo.SelectedIndex = -1; 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-28T06:41:29.240

在桌面应用程序`DataGridView`中没有`SelectedIndex`：

```
gridView1.ClearSelection(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-09-17T22:01:15.507

我是这样做的，而且效果很好。

```
gridViewName.GetSelectionModel().ClearSelection(); 
```

我希望它可以为某人工作。

# java - 在 Netbeans 项目中获取文件路径时遇到问题

> ID：10375993
> 
> 赞同：1
> 
> 时间：2012-04-29T21:09:51.747
> 
> 标签：java, netbeans

我正在制作一个使用文本文件的程序。我需要这样做，以便程序可以使用它的 jar 文件从不同的计算机上运行。问题是我无法找到文本文件的正确文件路径。我已经尝试过使用`getResource()`，但它仍然无法正常工作。这是代码：

```
public class Params {

    public static void init() {

        hsChartSuited = new int[13][13];

        file = new File(Params.class.getResource("HandStrengthDataSuited.txt").getFile());

        try {
            Scanner input = new Scanner(file);
            for (int i = 0; i < hsChartSuited.length; i++) {
                for (int j = 0; j < hsChartSuited[i].length; j++) {
                    hsChartSuited[i][j] = Integer.parseInt(input.next()) - 20;
                }
            }
        } catch (FileNotFoundException e) {
            System.out.println("File not found");

        }
} 
```

`HandStrengthDataSuited.txt`是我项目的 src 文件夹中的一个文件。它也位于文件夹之外，也位于项目的主目录中。我试过打印绝对文件路径，这就是我得到的：

```
/Users/MyUsername/file:/Users/MyUsername/Documents/Homework_Soph_2012/Computer%20Science/HoldEm/dist/HoldEm.jar!/holdem/HandStrengthDataSuited.txt 
```

我需要获取的文件路径是

```
/Users/MyUsername/Documents/Homework_Soph_2012/Computer%20Science/HoldEm/holdem/HandStrengthDataSuited.txt 
```

有谁知道这里有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-04-29T21:27:48.697

如果您的文件在 src 文件夹中，

```
class Tools {
    public static InputStream getResourceAsStream(String resource)
        throws FileNotFoundException
         {
        String stripped = resource.startsWith("/") ? resource.substring(1) : resource;
        InputStream stream = null;
        ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
        if (classLoader != null) {
          stream = classLoader.getResourceAsStream(stripped);
        }
        if (stream == null) {
          stream = Tools.class.getResourceAsStream(resource);
        }
        if (stream == null) {
          stream = Tools.class.getClassLoader().getResourceAsStream(stripped);
        }
        if (stream == null) {
          throw new FileNotFoundException("Resource not found: " + resource);
        }
        return stream;
    }
} 
```

采用：

```
reader = new BufferedReader(new InputStreamReader(getResourceAsStream("org/paulvargas/resources/file.txt"), "UTF-8")); 
```

# jquery - 使用 jQuery 访问 XML 数据？

> ID：10375996
> 
> 赞同：0
> 
> 时间：2012-04-29T21:10:26.287
> 
> 标签：jquery, xml

假设我有这个重复的 XML：

```
<sample>
    <org.postgis.Point>
     <dimension>2</dimension>
     <haveMeasure>false</haveMeasure>
     <type>1</type>
     <srid>4326</srid>
     <x>-73.43975830078125</x>
     <y>42.0513801574707</y>
     <z>0.0</z>
     <m>0.0</m>
    </org.postgis.Point>
<sample> 
```

我正在使用 jQuery 尝试从中获取 x 和 y 坐标。我怎么做？

```
 $(xml).find('sample').each(function(){
      $(this).find('org.postgis.Point').each(function(){
         var x = $(this).find('x').text(); 
```

这是正确的想法吗？有没有更简洁的方法来进入嵌套标签？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-04-29T21:13:37.423

首先，您需要转义`.`s，因为在 CSS 选择器中，它们代表类。`each`接下来，您可以使用后代组合器删除 es 级别`：`

 ````
$(xml).find('sample org\\.postgis\\.Point').each(function() {
     var x = $(this).find('x').text(); 
```

当然，如果只有一个`org.postgis.Point`：

```
var x = $(xml).find('sample org\\.postgis\\.Point x').text(); 
````