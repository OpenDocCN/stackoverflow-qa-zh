# StackOverflow 问答 11654000-11654999

# java - JAXB 解组错误

> ID：11654000
> 
> 赞同：1
> 
> 时间：2012-07-25T16:07:57.017
> 
> 标签：java, jaxb

我在我的项目中使用 JAXB，但有时我会遇到一些我无法解决的问题。我已经像这样设置了我的环境：

装甲等级

```
package com.fortresswars.entity.component;

@XmlType(name = "armor", namespace = "http://fortresswars.com")
public class ArmorComponent extends AbstractComponent 
```

包信息.java

```
@XmlSchema(xmlns = @XmlNs(namespaceURI = "http://fortresswars.com", prefix = "fw"), elementFormDefault = XmlNsForm.UNQUALIFIED, namespace = "http://fortresswars.com")
package com.fortresswars.entity.component; 
```

生成的架构头几乎是正确的：

```
<xs:schema elementFormDefault="unqualified" version="1.0" targetNamespace="http://fortresswars.com" xmlns:fw="http://fortresswars.com" xmlns:tns="http://fortresswars.com" xmlns:xs="http://www.w3.org/2001/XMLSchema"> 
```

我唯一不喜欢的是 JAXB 放在那里的 TNS 前缀，我无法删除。我正在使用一个蚂蚁任务（`com.sun.tools.jxc.SchemaGenTask`），我记得在某处读到这是问题所在。

生成的方案的其余部分如下。我将只展示有关盔甲的相关部分：

```
<xs:complexType name="armor">
    <xs:complexContent>
      <xs:extension base="tns:abstractComponent">
        <xs:sequence>
          <xs:element name="value" type="xs:short" minOccurs="0"/>
          <xs:element name="type" type="tns:armor-type" minOccurs="0"/>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType> 
```

以及使用 Armor 组件的元素：

```
 <xs:complexType name="character">
    <xs:complexContent>
      <xs:extension base="tns:thing">
        <xs:sequence>
          <xs:choice minOccurs="0" maxOccurs="unbounded">
            <xs:element name="armor" type="tns:armor"/>
            <xs:element name="model" type="tns:model"/>
            <xs:element name="status" type="tns:status"/>
            <xs:element name="costs" type="tns:costs"/>
          </xs:choice>
        </xs:sequence>
      </xs:extension>
    </xs:complexContent>
  </xs:complexType> 
```

为了测试这一点，我创建了一个 XML 文档（请参阅 TNS 前缀，我需要将它或`fw`前缀连同 xmlns:fw 一起放入）。

```
<?xml version="1.0" encoding="UTF-8"?><tns:character xmlns:tns="http://fortresswars.com" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="/home/shirkit/jMonkeyProjects/Fortress Wars/Core/schema/full.xsd">

<armor>
<value>5</value>
<type>NORMAL</type>
</armor>

</tns:character> 
```

但是，当我解组此文档时，出现以下错误：

```
Exception: unexpected element (uri:"", local:"armor"). Expected elements are <{http://fortresswars.com}armor>,<{http://fortresswars.com}attacks>,<{http://fortresswars.com}costs>,<{http://fortresswars.com}model>,<{http://fortresswars.com}abilities>,<{http://fortresswars.com}status>,<{http://fortresswars.com}movement> 
```

我已将 elementFormDefault 设置为 UNQUALIFIED，即使这不起作用。为什么我得到这个异常？我可以从生成的架构中删除 TNS 前缀吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T20:31:38.453

当您为[http://fortresswars.com](http://fortresswars.com)的元素定义名称空间前缀时，您需要为所有元素添加前缀，而不仅仅是`character`. 所以这应该有效

```
<?xml version="1.0" encoding="UTF-8"?>
<tns:character 
    xmlns:tns="http://fortresswars.com" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="/home/shirkit/jMonkeyProjects/Fortress Wars/Core/schema/full.xsd">
    <tns:armor>
        <tns:value>5</tns:value>
        <tns:type>NORMAL</tns:type>
    </tns:armor>
</tns:character> 
```

架构中使用的`tns`前缀与您用作解组的 XML 文本的前缀无关。您可以选择 中的任何其他`xmlns:whatyoulike="http://fortresswars.com"`。将 XML 文档中的元素连接到模式文件中的定义的键是名称空间 URI，在您的例子中是“http://fortresswars.com”。如果将命名空间定义为默认命名空间，则可以省略每个元素的前缀：

```
<?xml version="1.0" encoding="UTF-8"?>
<character 
    xmlns="http://fortresswars.com" 
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
    xsi:schemaLocation="/home/shirkit/jMonkeyProjects/Fortress Wars/Core/schema/full.xsd">
    <armor>
        <value>5</value>
        <type>NORMAL</type>
    </armor>
</character> 
```

如果您不想将架构文件与定义具有相同名称的类型或元素的其他架构文件一起使用，XSD 文件中的命名空间前缀有助于避免名称冲突。它不会强迫您在要解组的 xml 文件中使用它。

另一方面，当您将对象编组为 XML 时，该文件`package-info.java`定义了 JAXB 使用的前缀，但这仅适用于最新版本的 JAXB，并且在您的代码运行时确保使用正确的版本并不总是那么容易。但是您可以使用 a`NamespacePrefixMapper`来控制它。

# ios - Apple Developer Program Renewal - 对 Apple Store 应用程序的影响

> ID：11654001
> 
> 赞同：2
> 
> 时间：2012-07-25T16:08:00.343
> 
> 标签：ios, app-store, iphone-developer-program

我见过类似的问题，但没有找到完全回答我的问题的问题。这里是：

我的开发者计划于 2012 年 8 月到期。我在 App Store 上的应用程序具有使用 2012 年 12 月到期的证书创建的分发配置文件。

1.  当我在 8 月更新我的开发者计划时，我的应用程序是否可以继续运行而无需我在现有设备上执行任何操作并且也可以在应用程序商店中使用？

2.  当我的证书在 2012 年 12 月到期时，我是否需要重新创建一个新证书，然后是一个新的分发配置文件，然后将完全相同的代码重新提交给 Apple，以保持安装的应用程序正常工作，并在 Apple 上可用店铺？

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T16:26:55.020

1.  如果您续订开发者计划会员资格，您的应用程序将继续运行并在 App Store 中可用。如果您不续订，您的应用程序将不再在 App Store 中可用，但当前已安装版本的用户仍可以使用它们。

2.  当您的证书到期时，应该有一个选项可以在供应门户上更新它。您无需再次重新提交该应用程序，因为已在 App Store 中的应用程序仍然有效。但是，如果您想提交应用程序更新或提交任何新应用程序，则需要有效证书。

# iphone - 在没有按钮连接的情况下以编程方式执行 Segue？

> ID：11654003
> 
> 赞同：27
> 
> 时间：2012-07-25T16:08:00.753
> 
> 标签：iphone, objective-c, ipad, uistoryboard, segue

我的故事板中有两个视图控制器，我需要从视图 1 推送到视图 2。

我需要在不直接从故事板中的按钮连接 segue 的情况下执行此操作，我需要以编程方式进行。

我怎样才能？

谢谢。

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-07-25T16:10:51.920

当您单击按钮调用时：

```
[self performSegueWithIdentifier:@"SegueIdentifier" sender:self]; 
```

您将需要在情节提要中创建 segue，但您可以从视图控制器到视图控制器而不是按钮到视图控制器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-19T15:13:14.950

如果您想在不单击的情况下执行操作（或在加载 viewController 本身时），请在任一

```
- (void)viewDidLoad {
[super viewDidLoad];
[self performSegueWithIdentifier:@"NameOfYourSequeIdentifier" sender:self];
 } 
```

或者

```
-(void)viewDidAppear:(BOOL)animated {
[self performSegueWithIdentifier:@"NameOfYourSequeIdentifier" sender:self];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-08T17:07:57.713

完全没有转场

```
[self.navigationController pushViewController:[self.storyboard instantiateViewControllerWithIdentifier:@"YourViewControllerIDinStoryBoard"] animated:YES]; 
```

# recursion - 给定一个递归函数，如何将其更改为尾递归和流？

> ID：11654004
> 
> 赞同：3
> 
> 时间：2012-07-25T16:08:02.027
> 
> 标签：recursion, stream, scheme, tail-recursion

给定方案中的递归函数，如何将该函数更改为尾递归，然后如何使用流实现它？以这种方式更改任何功能时，是否有遵循的模式和规则？

以这个函数为例，它从 2-m 创建一个数字列表（这不是尾递归吗？）

代码：

```
(define listupto
  (lambda (m)
    (if (= m 2)
        '(2)
        (append (listupto (- m 1)) (list m))))) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:29:03.413

我将从解释你的例子开始。它绝对不是尾递归。想想这个函数是如何执行的。每次追加时，您必须先返回并进行递归调用，直到遇到基本情况，然后再向上拉。

这就是你的功能的踪迹：

```
(listupto 4)
| (append (listupto(3)) '4)
|| (append (append (listupto(2)) '(3)) '(4))
||| (append (append '(2) '(3)) '(4))
|| (append '(2 3) '(4))
| '(2 3 4)
'(2 3 4) 
```

请注意您看到的 V 型模式拉入然后拉出递归调用。尾递归的目标是将所有调用构建在一起，并且只执行一次。您需要做的是与您的函数一起传递一个累加器，这样当您的函数到达基本情况时，您只能进行一个追加。

这是您的函数的尾递归版本：

```
(define listupto-tail
  (lambda (m)
     (listupto m '())))

# Now with the new accumulator parameter!
(define listupto
   (lambda (m accu)
     (if (= m 2)
        (append '(2) accu)
        (listupto (- m 1) (append (list m) accu))))) 
```

如果我们看到这个踪迹，它看起来像这样：

```
(listupto 4)
| (listupto (3) '(4))  # m appended with the accu, which is the empty list currently
|| (listupto (2) '(3 4)) # m appended with accu, which is now a list with 4
||| (append '(2) '(3 4))
'(2 3 4) 
```

注意模式是如何不同的，我们不必遍历递归调用。这为我们节省了无意义的处决。尾递归可能是一个难以掌握的概念，我建议看看[这里](http://www.scheme.com/tspl4/)。第 5 章中有一些有用的部分。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T16:22:58.873

通常要切换到尾递归形式，您需要转换代码，以便它采用累加器参数来构建结果并用作最终返回值。这通常是您的主要功能也委托的辅助功能。

某种形式的东西：

```
(define listupto
  (lambda (m)
     (listupto-helper m '())))

(define listupto-helper
   (lambda (m l)
     (if (= m 2)
        (append '(2) l)
         (listupto-helper (- m 1) (append (list m) l))))) 
```

正如评论所指出的，辅助函数可以用一个命名的 let 替换，这显然（还没有做太多/足够的方案！）更惯用（并且正如评论所暗示`cons`的那样，比创建列表和附加要好得多。

```
(define listupto
  (lambda (n)
    (let loop ((m n) (l '()))
      (if (= m 2)
          (append '(2) l)
          (loop (- m 1) (cons m l)))))) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T10:11:48.953

您还询问有关流的问题。[您可以在此处](http://c2.com/cgi/wiki?SieveOfEratosthenesInManyProgrammingLanguages)或[此处](https://rosettacode.org/wiki/Sieve_of_Eratosthenes#SICP-style_streams)找到使用的 SICP 样式流，其中定义了`from-By`流构建器：

```
 ;;;; Stream Implementation
 (define (head s) (car s))
 (define (tail s) ((cdr s))) 

 (define-syntax s-cons
   (syntax-rules () 
     ((s-cons h t) (cons h (lambda () t))))) 

 ;;;; Stream Utility Functions
 (define (from-By x s)
   (s-cons x (from-By (+ x s) s))) 
```

此类流的创建依赖于宏，并且必须通过特殊方式访问它们：

```
 (define (take n s) 
   (cond  ; avoid needless tail forcing for n == 1 !
      ((= n 1) (list (head s)))   ; head is already forced
      ((> n 1) (cons (head s) (take (- n 1) (tail s))))
      (else '())))

 (define (drop n s)
   (cond 
      ((> n 0) (drop (- n 1) (tail s)))
      (else s))) 
```

但它们不是持久的，即在每次访问时重新计算它们`take`。`drop`使流持久化的一种方法是通过手术改变最后一个访问的 cons 单元的尾部关闭：

```
(1 . <closure>)
(1 . (2 . <closure>))
.... 
```

像这样：

```
(define (make-stream next this state)
  (let ((tcell (list (this state))))  ; tail sentinel cons cell
    (letrec ((g (lambda ()
                    (set! state (next state))
                    (set-cdr! tcell (cons (this state) g))
                    (set! tcell (cdr tcell))
                    tcell)))
      (set-cdr! tcell g)
      tcell)))

(define (head s) (car s))

(define (tail s)
  (if (or (pair? (cdr s))
          (null? (cdr s)))
    (cdr s)
    ((cdr s)))) 
```

我们现在可以像这样使用它

```
(define a (make-stream (lambda (i) (+ i 1)) (lambda (i) i) 1))
;Value: a

a
;Value 13: (1 . #[compound-procedure 14])

(take 3 a)
;Value 15: (1 2 3)

a
;Value 13: (1 2 3 . #[compound-procedure 14])

(define b (drop 4 a))
;Value: b

b
;Value 16: (5 . #[compound-procedure 14])

a
;Value 13: (1 2 3 4 5 . #[compound-procedure 14])

(take 4 a)
;Value 17: (1 2 3 4)

a
;Value 13: (1 2 3 4 5 . #[compound-procedure 14]) 
```

现在，`(make-stream (lambda (i) (list (cadr i) (+ (car i) (cadr i)))) car (list 0 1))`定义什么？

* * *

*更新：*在[Daniel Friedman](https://en.wikipedia.org/wiki/Daniel_P._Friedman)的 1994 年幻灯片“The Joys of Scheme, Cont'd”中，我们发现这些“记忆流”（在那里被称为）的更简单实现，使`tail`函数本身将强制流存储在尾部哨兵中，作为

```
(define (tail s)
  (if (or (pair? (cdr s))
          (null? (cdr s)))
    (cdr s)
    (let ((n ((cdr s))))
       (set-cdr! s n)
       (cdr s))))

;; can be used as e.g. (https://ideone.com/v6pzDt)
(define fibs 
   (let next-fib ((a 0) (b 1))
      (s-cons a (next-fib b (+ a b))))) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-15T20:01:33.553

这是一个尾递归形式 -

```
(define (listupto n)
  (let run
    ((m 0)
     (return identity))
    (if (> m n)
        (return null)
        (run (add1 m)
             (lambda (r) (return (cons m r)))))))

(listupto 9)
; '(0 1 2 3 4 5 6 7 8 9) 
```

这里是流——

```
(define (listupto n)
  (let run
    ((m 0))
    (if (> m n)
        empty-stream
        (stream-cons m
                     (run (add1 m))))))

(stream->list (listupto 9))
; '(0 1 2 3 4 5 6 7 8 9) 
```

# c# - 如何使用鼠标/绘画事件从图像中清除先前绘制的矩形？

> ID：11654006
> 
> 赞同：1
> 
> 时间：2012-07-25T16:08:02.770
> 
> 标签：c#, winforms, graphics

我正在设计一个将图像加载到 PictureBox 并允许用户在其上绘制选择矩形的应用程序。目前，我使用 Paint 事件和一个布尔值来清除先前绘制的矩形（因为它是一个可拖动的选择框）。

### 问题：

代码失败，因为前一个矩形没有从图像中清除。尽管绘制的每个矩形都是透明的，但效果是一个不透明的矩形，因为之前的矩形没有被清除。如何清除这些矩形？

### 逻辑：

`saveState`默认为真。当 Paint 事件第一次被触发时，包含正常图像的状态被保存。当触发 MouseDown 事件时，我们注册矩形的起始位置和一个指示正在绘制矩形的布尔值。

当触发 MouseMove 事件时，我们在当前坐标处绘制一个矩形。由于绘制事件时（我认为）触发了 Paint 事件并且`saveState`为 false，因此我们在绘制矩形之前恢复正常图像。

最后，当触发 MouseUp 事件时，`saveState`将其设置为 true，因此保存了绘制最后一个矩形的图形状态，我们又回到了开头。

我读到了[`ControlPaint.DrawReversibleFrame`](http://msdn.microsoft.com/en-us/library/system.windows.forms.controlpaint.drawreversibleframe.aspx)，但是由于[这篇文章](http://support.microsoft.com/kb/314945)和[这个问题](https://stackoverflow.com/questions/10369704/how-do-i-draw-a-rectangle-based-on-the-movement-of-the-mouse)给我的印象是它不是为在图像上绘制而是为直接在屏幕或表单上绘制而设计的，我不确定这是否是我需要的。

### 代码：

```
public partial class MainWindow : Form
{
    private bool drawingRectangle;
    private int x1, y1, x2, y2;
    private Image currentImage;
    private GraphicsState previousState;
    private bool saveState;

    public MainWindow()
    {
        InitializeComponent();
        this.drawingRectangle = false;
        this.saveState = true;
    }

    private void EditorPictureBox_MouseDown(object sender, MouseEventArgs e)
    {
        this.x1 = e.X;
        this.y1 = e.Y;
        this.drawingRectangle = true;
    }

    private void EditorPictureBox_MouseMove(object sender, MouseEventArgs e)
    {
        if (this.drawingRectangle)
        {
            this.x2 = e.X;
            this.y2 = e.Y;
            Graphics g = Graphics.FromImage(this.currentImage);
            int[] dim = ImageLibrary.CalculateRectangleDimensions(this.x1, this.y1, this.x2, this.y2);
            g.FillRectangle(new SolidBrush(Color.FromArgb(100, 128, 255, 255)), dim[0], dim[1], dim[2], dim[3]);
            this.Refresh();
        }
    }

    private void EditorPictureBox_Paint(object sender, PaintEventArgs e)
    {
        if (this.saveState)
        {
            this.previousState = e.Graphics.Save();
            this.saveState = false;
        }
        else
            e.Graphics.Restore(this.previousState);
    }

    private void EditorPictureBox_MouseUp(object sender, MouseEventArgs e)
    {
        if (this.drawingRectangle)
        {
            this.drawingRectangle = false;
            // When the mouse click is released, save the graphics state
            this.saveState = true; 
        }
    }

    private void LoadImage2Button_Click(object sender, EventArgs e)
    {
        this.currentImage = Image.FromFile("goat2.jpg");
        this.EditorPictureBox.Image = this.currentImage;
    }   
} 
```

这是`CalculateRectangleDimensions`（存储在静态库中）的代码：

```
public static int[] CalculateRectangleDimensions(int x1, int y1, int x2, int y2)
{
    int[] dimensions = new int[4]; // x1, y1, width, height
    if (x1 <= x2) // Mouse was dragged to the right
    {
        dimensions[0] = x1;
        dimensions[2] = x2 - x1;
    }
    else // Mouse was dragged to the right
    {
        dimensions[0] = x2;
        dimensions[2] = x1 - x2;
    }

    if (y1 <= y2) // Mouse was dragged up
    {
        dimensions[1] = y1;
        dimensions[3] = y2 - y1;
    }
    else // Mouse was dragged down
    {
        dimensions[1] = y2;
        dimensions[3] = y1 - y2;
    }
    return dimensions;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:51:32.143

Graphics.Save 调用时不会保存图形的*全部内容*，它只是保存**状态**信息，如平移、缩放、变换等。

如果要撤消已经完成的绘制，则必须执行可逆绘制之类的操作，或者在要撤消绘制时必须重新绘制原始图像。

# java - string.replaceAll(regex,replacement) 在某些情况下不起作用

> ID：11654010
> 
> 赞同：-1
> 
> 时间：2012-07-25T16:08:17.597
> 
> 标签：java

我尝试使用的正则表达式是

```
 String re2="((?:(?:[1]{1}\\d{1}\\d{1}\\d{1})|(?:[2]{1}\\d{3}))[-:\\/.](?:[0]?[1-9]|[1][012])[-:\\/.](?:(?:[0-2]?\\d{1})|(?:[3][01]{1})))(?![\\d])";    // YYYYMMDD 1 
```

但是当我尝试替换所有出现时，

```
string.replaceAll(re2,getDate(dayForward,dateFormat)); 
```

不起作用。和，

```
matcher.appendReplacement(stringBuffer, getDate(dayForward,dateFormat)); 
```

只替换第一次出现。

有什么办法可以替换所有出现的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:12:39.017

您必须将结果放入另一个变量中：

```
String replaced = string.replaceAll(re2,getDate(dayForward,dateFormat)); 
```

否则，这意味着您的正则表达式不正确。

# objective-c - 文字对象语法是否仅适用于 OS X 开发？

> ID：11654011
> 
> 赞同：10
> 
> 时间：2012-07-25T16:08:20.093
> 
> 标签：objective-c, ios, macos, xcode4, objective-c-literals

新的 Objective-C 文字语法添加（例如`@3.14`）是否仅在为 OS X 而不是 iOS 开发时可用？这就是 Xcode 更新 4.4 所暗示的。如果是这样，为什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T16:11:36.990

不，它们也可用于 4.5 预览版并在 iOS 上运行。

# java - 在 Eclipse 中共享 java 文件

> ID：11654012
> 
> 赞同：1
> 
> 时间：2012-07-25T16:08:21.097
> 
> 标签：java, eclipse, file

我正在使用 Eclipse 开发 Java 程序。如果我想与其他人（也在使用 Eclipse）共享代码（Java 文件），最简单的方法是什么？我们还没有设置源存储库。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T16:11:46.343

您可以通过电子邮件或 Skype 将 example.java 文件发送给他们，如果您想继续上学，他们可以将它们添加到他们的项目中。
我认为像 Github 或 Subversion 这样的存储库将是你最好的选择。

我投票赞成建立一个存储库:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:19:00.347

TortoiseSVN 是一个免费的颠覆工具，您和您的朋友可以下载。

[http://tortoisesvn.net/](http://tortoisesvn.net/)

如果您现在而不是以后继续设置存储库，那将是最有益的，特别是因为你们都对开始开发感兴趣。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:13:07.397

我**强烈**建议考虑为您的使用设置一个源存储库。同时，你可以尝试这样的事情：

`Export`您的项目文件：（选择您的项目后），`File`> `Export`> `General`>`Archive File`

该`import`选项的工作方式几乎相同。

# ruby-on-rails - 销毁之前和关联记录销毁之前的回调

> ID：11654014
> 
> 赞同：0
> 
> 时间：2012-07-25T16:08:22.890
> 
> 标签：ruby-on-rails, observers

我有以下模型：

```
class PhoneNumber < ActiveRecord::Base
  has_many :personal_phone_numbers, :dependent => :destroy
  has_many :people, :through => :personal_phone_numbers
end 
```

我想设置一个观察者在延迟作业队列中运行一个动作，该队列在大多数情况下都有效，但有一个例外。我希望 before_destroy 观察者在电话号码被销毁之前抓住与电话号码相关的人，而延迟的工作实际上是在这些人身上起作用。

问题是，当一个电话号码被销毁时，它会`:personal_phone_numbers`先销毁记录，*然后*在它试图销毁电话号码时触发观察者。到那时，为时已晚。

在删除依赖记录*之前*，有什么方法可以观察销毁操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-07T23:04:04.277

您可以在模型中使用 before_destroy 回调，然后在销毁父对象之前获取数据并执行您需要的任何操作。像这个例子这样的东西应该是你正在寻找的：

```
class Example < ActiveRecord::Base
before_destroy :execute_random_method

private

def execute_random_method
  ...
end
handle_asynchronously :execute_random_method 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-06T22:44:33.507

使用alias_method 拦截destroy 调用？

```
class PhoneNumber < ActiveRecord::Base
  has_many :personal_phone_numbers, :dependent => :destroy
  has_many :people, :through => :personal_phone_numbers

  alias_method :old_destroy, :destroy

  def destroy(*args)
    *do your stuff here*
    old_destroy(*args)
  end
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-07T22:04:32.470

简而言之，听起来您的问题是您想要收集`Person`a`PersonalPhoneNumber`被销毁时的集合并对其采取行动。这种方法可能符合要求！

`Person`这是收集模型的自定义回调示例。这里它是一个实例方法，因此我们不必`PersonalPhoneNumberCallbacks`在 ActiveRecord 模型中实例化对象。

```
class PersonalPhoneNumberCallbacks
  def self.after_destroy(personal_phone_number)
    # Something like people = Person.find_by_personal_phone_number(personal_phone_number)
    # Delayed Job Stuff on people
  end
end 
```

接下来，为您的 ActiveRecord 模型添加回调：

```
class PersonalPhoneNumber < ActiveRecord::Base
  after_destroy PictureFileCallbacks
end 
```

您的`after_destroy`回调将传递模型，您可以对其数据采取行动。回调链完成后，将被销毁。

**参考**

*   [http://guides.rubyonrails.org/active_record_validations_callbacks.html#relational-callbacks](http://guides.rubyonrails.org/active_record_validations_callbacks.html#relational-callbacks)
*   [http://guides.rubyonrails.org/association_basics.html#association-callbacks](http://guides.rubyonrails.org/association_basics.html#association-callbacks)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-08-06T22:32:39.863

虽然这并不理想，但您可以`:dependent => :destroy`从`personal_phone_numbers`关系中删除 ，并在对它们进行操作后在观察者中手动删除它们。

但是，我认为这个问题可能会向您展示代码异味。你为什么要在电话号码的观察者中对人进行操作。听起来这个逻辑在连接模型中处理得更好。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-14T18:48:48.467

有点老了，但我想我会分享一下 rails 现在为 before_destroy 回调提供了不错[的“前置”](https://guides.rubyonrails.org/active_record_callbacks.html#destroying-an-object)选项。[这遵循与tomciopp](https://stackoverflow.com/a/11855348/4848156)相同的思路，但允许您在类中的任何位置定义 before_destroy。

```
before_destroy :find_associated_people, prepend: true

def find_associated_people
  # using phone number, find people
end 
```

# jquery - Rails Ajax Render Partial（投票系统）

> ID：11654021
> 
> 赞同：0
> 
> 时间：2012-07-25T16:08:38.893
> 
> 标签：jquery, ajax, ruby-on-rails-3.2

我无法通过 Ajax 请求重新呈现部分内容。我目前可以通过 js 文件传递​​其他内容，例如 alert() 甚至更改当前 div 中的 html。但是当我尝试渲染部分（在这种情况下为评级）时，什么都不会刷新。从它们在分页和加载时呈现的意义上说，部分工作正常，但在我点击赞成或反对票之后就不行了。我正在使用嵌套的部分，以便它首先呈现_tracks，然后是_rating。这就是我所拥有的......我错过了什么？

投票.js.erb

```
$(".rating").html("<%= escape_javascript(render(:partial => 'rating')) %>") 
```

有了这个我也这些，没有成功。

```
 $(".rating").html("<%= escape_javascript(render("rating")) %>")
   $(".rating").html("<%= escape_javascript( render( :partial => "rating", :locals => { :track => track }) ) %>") 
```

另一方面，这确实有效：

```
$(".rating").html("<%= escape_javascript("test text here) %>") 
```

_tracks.html.erb

```
 <% for track in @tracks %>
            <div class="span4">
                <div class="track">
                    <div class="rating">
                        <%= render :partial => "rating", :locals => { :track => track } %>
                    </div>

                    <a href="<%= track.youtube_link %>"></a>

                    <% if current_user.admin? %> 
                        <%= link_to "delete", track, method: :delete, confirm: "You sure?" %>
                        <%= link_to "edit", edit_track_path(track) %>
                    <% end %>
                </div>
            </div>
<% end %> 
```

_rating.html.erb

```
<% vt = track.votetype(current_user) %>

                <% if vt != "up" %>
                    <%= link_to image_tag("up_arrow.png", alt: "Upvote"), vote_path(track, :type => "up"), :remote => true %>
                <% elsif %>
                    <%= "up" %>
                <% end %>

                <%= track.rating %>

                <% if vt != "down" %>
                    <%= link_to image_tag("down_arrow.png", alt: "Downvote"), vote_path(track, :type => "down"), :remote => true %>
                <% elsif %>
                    <%= "down" %>
                <% end %> 
```

轨道控制器

```
@vote.update_attributes(:vote_type => params[:type])
        if @vote.save
      respond_to do |format|
        format.html {redirect_to :back}
        format.js
      end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:22:19.620

```
$(".rating").html("<%= escape_javascript( render( :partial => "rating", :locals => { :track => track }) ) %>") 
```

需要是

```
$(".rating").html("<%= escape_javascript( render( :partial => "rating", :locals => { :track => @track }) ) %>") 
```

@ 符号传递变量，这与前面部分中不需要它的 for 循环不同。现在工作正常。

# spring - 如何在 Hibernate 中查询属性可能为 null 或特定值的对象？

> ID：11654023
> 
> 赞同：0
> 
> 时间：2012-07-25T16:08:46.037
> 
> 标签：spring, hibernate, criteria

我正在使用以下对象：

RawRead RawRead.Checkpoint

检查点.EndCustomer

警卫

其中 Checkpoint 和 Guard 是 RawRead 的属性，EndCustomer 是 Checkpoint 的属性。都是对象。

* * *

我当前的 Hibernate gubbins：

```
Criteria crit = sess.createCriteria(RawRead.class);
crit.add(
  Restrictions.or(
    Restrictions.eq("checkpoint", null),
    Restrictions.in("checkpoint.parentEndCustomer",collectionOfEndCustomers)
  )
); 
```

所以 Checkpoint 可以为空，但如果它在那里，我只想要 parentEndCustomer 对象位于 checkpoint.parentEndCustomer 属性中的 RawRead 对象。

我希望这是有道理的。

* * *

我上面的猜测产生了一个错误，（对我来说）表明我的标准被错误地指定：

```
[Request processing failed; nested exception is org.hibernate.QueryException: could not resolve property: checkpoint.parentEndCustomer of: uk.co.romar.guardian.objects.RawRead] with root cause org.hibernate.QueryException: 
could not resolve property: checkpoint.parentEndCustomer of: uk.co.romar.guardian.objects.RawRead at 
org.hibernate.persister.entity.AbstractPropertyMapping.propertyException(AbstractPropertyMapping.java:81) at 
org.hibernate.persister.entity.AbstractPropertyMapping.toColumns(AbstractPropertyMapping.java:96)   at  
org.hibernate.persister.entity.BasicEntityPropertyMapping.toColumns(BasicEntityPropertyMapping.java:62) at 
org.hibernate.persister.entity.AbstractEntityPersister.toColumns(AbstractEntityPersister.java:1457) at 
org.hibernate.loader.criteria.CriteriaQueryTranslator.getColumns(CriteriaQueryTranslator.java:483) 
```

RawRead 的相关位：

```
@ManyToOne
@JoinColumn(name="CHECKPOINT_OID")
@NotFound(action=NotFoundAction.IGNORE)
public Checkpoint checkpoint = null;
public void setCheckpoint(Checkpoint in) {this.checkpoint = in;}
public Checkpoint getCheckpoint() {return this.checkpoint;}

@ManyToOne
@JoinColumn(name="GUARD_OID")
@NotFound(action=NotFoundAction.IGNORE)
private Guard guard = null;
public void setGuard(Guard in) {this.guard = in;}
public Guard getGuard() {return this.guard;} 
```

从检查点：

```
 @ManyToOne
@JoinColumn(name="ENDCUSTOMER_OID")
@NotFound(action=NotFoundAction.IGNORE)
private EndCustomer parentEndCustomer = null;
public EndCustomer getParentEndCustomer() {return this.parentEndCustomer;}
public void setParentEndCustomer(EndCustomer ownerCustomer) {this.parentEndCustomer = ownerCustomer;} 
```

* * *

## 编辑在执行下面的第一个答案之后。

如果我在数据库中有一些这样的数据（我希望这个符号有意义！）：

```
RawRead {
 ID=1
 checkpoint={id=1,parentEndCustomer={ID=1}}
}
RawRead {
 ID=2
 checkpoint={id=4,parentEndCustomer={ID=4}}
}
RawRead {
 ID=3
 checkpoint={id=7,parentEndCustomer={ID=31}}
}
RawRead {
 ID=4
 checkpoint={null}
} 
```

Restriction 中给出的 collectionOfEndCustomers 是这样的： EndCustomer={ID=31}

我只想检索 RawReads 3 和 4。RawRead 1 和 2 被拒绝，因为子检查点属性的 parentEndCustomer 与传入到 collectionOfEndCustomers 中的限制不匹配。

应该选择 RawRead.3，因为 parentEndCustomer 匹配传入的集合中的一个。应该选择 RawRead.4，因为检查点为空。

遵循以下第一个答案中的指导会导致返回所有上述 RawReads 而不是我所追求的子集。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:45:45.437

您不能像在 HQL 中那样链接属性。您必须使用连接和条件。由于检查点可以为空，因此您必须使用左连接。此外，`Restrictions.eq()`不能用于比较某些东西`null`（如在 HQL 和 SQL 中）。你必须使用`Restrictions.isNull()`来做到这一点。

所以你的查询应该是这样的：

```
Criteria crit = sess.createCriteria(RawRead.class, "rawRead");
crit.createAlias("rawRead.checkpoint", "checkpoint", Criteria.LEFT_JOIN)
crit.add(
    Restrictions.or(
        Restrictions.isNull("checkpoint.id"),
        Restrictions.in("checkpoint.parentEndCustomer", collectionOfEndCustomers)
    )
); 
```

# ios - 检测横向到横向方向的变化

> ID：11654024
> 
> 赞同：0
> 
> 时间：2012-07-25T16:08:49.870
> 
> 标签：ios, uiviewcontroller, orientation

我做了一些自定义布局，包括 willAnimateRotationToInterfaceOrientation:duration: 中的动画我遇到的问题是，如果设备从 LandscapeLeft 更改为 LandscapeRight，界面应该旋转，但布局代码，尤其是动画不应该运行。我怎样才能检测到它正在从一种景观变为另一种景观？self.interfaceOrientation 以及 [[UIApplication sharedApplication] statusBarOrientation] 不返回有效结果，他们似乎认为设备已经旋转。因此，以下*不起作用*。

```
if (UIInterfaceOrientationIsLandscape(toInterfaceOrientation) && UIInterfaceOrientationIsLandscape([[UIApplication sharedApplication] statusBarOrientation]) {...} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T16:50:36.300

您可以检查设备方向，然后设置一个标志，以确定您是在左方向还是右方向。然后，当您的设备切换时，您可以抓住它并随心所欲地处理它。

要确定方向，请使用：

```
if([UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft)
{
    //set Flag for left
}
else if([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight)
{
    //set Flag for right
} 
```

您还可以在设备旋转时使用以下命令捕获通知：

```
[[NSNotificationCenter defaultCenter] addObserver:self selector:@selector(detectOrientation) name:@"UIDeviceOrientationDidChangeNotification" object:nil]; 
```

然后像这样写一个方法`detectOrientation`：

```
-(void) detectOrientation 
{
    if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft)
    {
        //Set up left
    } else if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeRight)
    {
        //Set up Right
    } else if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationPortrait || [[UIDevice currentDevice] orientation] == UIDeviceOrientationPortraitUpsideDown) 
    {
        //It's portrait time!
    }   
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-12-24T09:45:20.673

```
-(void)didRotateFromInterfaceOrientation:(UIInterfaceOrientation)fromInterfaceOrientation
 {
   if ([[UIDevice currentDevice] orientation] == UIDeviceOrientationLandscapeLeft || [[UIDevice currentDevice] orientation ]== UIDeviceOrientationLandscapeRight)
    {
      NSLog(@"Lanscapse");
    }
   if([[UIDevice currentDevice] orientation] == UIDeviceOrientationPortrait || [[UIDevice currentDevice] orientation] == UIDeviceOrientationPortraitUpsideDown )
    {
      NSLog(@"UIDeviceOrientationPortrait");
    }
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T20:11:32.747

似乎唯一的解决方案是缓存最后的方向变化。到时 willAnimateRotationToInterfaceOrientation: 被称为设备并且界面方向已经更新。解决方法是在每次变化结束时记录下目标方位，以便在再次设置方位变化时可以查询到这个值。这并不像我希望的那样优雅（我的视图控制器上的另一个属性），但据我所知似乎是唯一的方法。

# regex - 如何在 Visual Studio 2010 中修复此正则表达式？

> ID：11654025
> 
> 赞同：1
> 
> 时间：2012-07-25T16:09:01.173
> 
> 标签：regex, visual-studio-2010

我正在尝试在 Visual Studio 中使用此正则表达式进行搜索，但它不起作用。

```
<(script|link)\b(.*?)Site.css(.*?)(script>|/>) 
```

阅读[这篇文章](http://msdn.microsoft.com/en-us/library/2k3te2cs%28v=vs.80%29.aspx)后，我将其更改为

```
\<(script|link)\b(.*?)Site.css(.*?)(script\>|/\>) 
```

但它仍然不起作用。我究竟做错了什么？

非常感谢您的帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:15:31.623

看这里...现在已经很老了，但很高兴阅读[http://www.codinghorror.com/blog/2006/07/the-visual-studio-ide-and-regular-expressions.html](http://www.codinghorror.com/blog/2006/07/the-visual-studio-ide-and-regular-expressions.html)

按照上面的指南，我尝试翻译您的正则表达式。不幸的是，我找不到任何适合非贪婪量词的东西`*?`，被迫坚持使用贪婪量词`*`。这是我的猜测（在 Visual Studio 2010 上成功测试）：

```
\<{script|link}.+Site.css.*{/\>|script\>} 
```

当您想在 Visual Studio 资源文件（如 xml 文件）上密集使用正则表达式时，我觉得建议您使用不同的编辑器。我个人的选择是 PowerGrep，但那是一种商业产品。我敢肯定，互联网上有很多免费的。

# jquery - Jquery 显示标签

> ID：11654026
> 
> 赞同：-5
> 
> 时间：2012-07-25T16:09:08.110
> 
> 标签：jquery

我喜欢在我的页面上显示标签。例如，第一个选项卡会显示 First，第二个选项卡会显示 Second。当用户单击选项卡时，我喜欢在 div 中显示信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:12:10.250

[http://jqueryui.com/demos/tabs/](http://jqueryui.com/demos/tabs/)

我建议使用 jquery-ui，`.tabs()`因为您标记了 jquery。

# java - 在java中将许多缓冲图像100+加载到内存中

> ID：11654027
> 
> 赞同：2
> 
> 时间：2012-07-25T16:09:09.020
> 
> 标签：java, out-of-memory, bufferedimage

我正在编写一个程序，该程序涉及对许多图像的自定义搜索。当用户输入他们的搜索条件时，从缓存或服务器中检索相应的图像。我有一个 JTable，它显示指向相应图像的链接。当用户单击链接时，图像将显示在 JPanel 上。单击链接时，我可以从硬盘驱动器读取图像，但速度不如我想的那么快。加载它需要几秒钟。我曾尝试创建一个 BufferedImages 数组，但如果搜索返回许多结果，我会去 oom。我想知道单击链接时使图像显示得更快的最佳方法是什么。

这是我获取图像的方法...

```
Public void getFile(String fileName){
File file = new File("./cache/"+fileName);
    boolean exists = file.exists();

    BufferedImage returnImage =null;
    if(exists){
        try {

            returnImage = ImageIO.read(file);
            System.out.println("Found In Cache!");
        } catch (IOException|IndexOutOfBoundsException e) {
            try {
                if(fileName != null){
                returnImage = downloadImage(fileName);
                System.out.println("Found ON Server :(");
                }
            } catch (IOException |IndexOutOfBoundsException ex) {
                // TODO Auto-generated catch block
                ex.printStackTrace();
            }
        }
    }else{
        try {
            if(fileName != null){
            returnImage = downloadImage(fileName);
            System.out.println("Found ON Server :(");
            }
        } catch (IOException |IndexOutOfBoundsException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
    }
    return returnImage; 

}
} 
```

这就是我把它们放在一个数组中的地方......

```
BufferedImage[] images = new BufferedImage[numOfSearchResults];

for(SearchResult r: results){
     images[i] = imageCache.getFile(r.imageName);
} 
```

基本上，我只是想知道在不出现 oom 的情况下预加载图像的最佳方法是什么。提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:24:13.280

从磁盘加载图像需要几秒钟的时间听起来很不合理，除非图像*真的非常大*（10 兆像素或更多）。首先确定时间真正花在了哪里。

对于缓存，您可以保存对使用 java.lang.ref.SoftReference 加载的每个图像的引用 - 这允许在运行 OOM*之前对图像进行垃圾收集。*如果真的无法避免，我会使用多层缓存系统，第一层在内存中使用 SoftReferences，对于基于服务器的图像，使用额外的磁盘缓存。查找图像时，首先检查内存缓存，如果没有找到磁盘缓存，则检查磁盘缓存，如果仍未找到，则以通常的方式加载图像。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:16:01.030

不要加载所有/太多图像，在当前索引之前加载一对图像，在当前索引之后加载一对图像。

将图像加载器实现为一个不同的线程，它不会阻塞主执行线程并在用户观看当前加载的图像时加载其他图像。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:25:47.980

如果您不需要完整尺寸的图像，我会在加载时缩小它们以减少内存量。您必须记住，加载到内存中的图像不再被压缩。

如果您可以控制源图像，我会考虑生成缩略图以帮助它们更快地加载。我们使用 200x200 的缩略图，甚至超过基于 SMB 的共享，加载时间不到一秒

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:22:24.100

您可以打开所有图像的 InputStream 并关闭用户未单击的图像，然后使用您需要的图像。

这样，您不必缓冲所有图像，而是在用户单击时让它们“触手可及”。

但是正如@Robin 正确评论的那样，加载平均大小的图像确实不需要很长时间。

我不确定这是否会大大提高您的性能，但根据您的情况，它可以。

# javascript - 需要从表单中获取序列化数据

> ID：11654032
> 
> 赞同：0
> 
> 时间：2012-07-25T16:09:23.817
> 
> 标签：javascript, prototypejs

我是prototypejs的新手。你们能告诉我如何在原型中使用 Ajax 从发布的表单中获取序列化值吗？

[http://www.prototypejs.org/api/ajax/request](http://www.prototypejs.org/api/ajax/request)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T08:05:06.447

```
new Ajax.Request('your_ajax_url',{
   method:'POST',
   parameters:Form.serialize($('your_form_id'))
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:12:29.407

这是你需要的吗？

[http://prototypejs.org/api/form/serialize](http://prototypejs.org/api/form/serialize)

或者您想通过 ajax 而不是页面加载来处理表单？然后

[http://prototypejs.org/api/form/request](http://prototypejs.org/api/form/request)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-26T02:32:06.953

“如何使用 Ajax 从发布的表单中获取序列化值” 听起来您希望 Ajax*响应*包含发送到服务器的序列化数据，但响应包含的内容完全取决于服务器。通常，一旦您发出 Ajax 请求，`onComplete`处理程序就不会真正关心它发送的属性。（和任何其他 Ajax 回调）的`response`参数包含一个属性，该属性包含对象。如果您确实需要查看您的请求发送到服务器的内容，这将很有用，如下所示：`onComplete``request``parameters`

```
$('customerdetails').request({
    method: 'get',
    onComplete: function(response) {
        console.log(response.request.parameters); // What you sent to the server
        console.log(response.responseText); // What the server sent back to you
        console.log(response.responseJSON); // JSON-ified version of what the server sent back
    }
}); 
```

如果 Prototype 不确定响应实际上是否包含 JSON（例如，响应标头设置不正确），则可能`response.responseJSON`是这样。`null`如果您可以依靠 JSON 的响应，您可以执行以下操作：

```
onComplete: function(response) {
    var jsonObj = response.responseJSON || response.responseText.evalJSON();
    // now you can work with jsonObj
} 
```

希望这会有所帮助，我并没有完全误解你的问题。

# android - 在三星应用商店上传 APK 文件时收到警告

> ID：11654037
> 
> 赞同：0
> 
> 时间：2012-07-25T16:09:34.873
> 
> 标签：android, samsung-mobile

我正在三星应用商店上传一个免费的“教育”应用。我已经填写了所有必需的数据并上传了签名的“Apk”文件，但我收到了警告，如下所示：

**“您尚未设置您想要分发应用程序的国家或地区的信息。在特定情况下，应用程序的销售可能会受到限制......”**

我不知道出了什么问题，我检查了整个页面，但没有选择国家等的选项。请帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-28T08:06:47.997

三星商店没有加载国家列表，经过 2 到 3 次尝试加载国家列表并解决了问题，但我为此损失了 2 到 3 个小时

# asp.net - 我们可以使用 IIS 而不是 Visual Studio 开发服务器运行 Selenium WebDriver 测试用例吗

> ID：11654038
> 
> 赞同：3
> 
> 时间：2012-07-25T16:09:39.427
> 
> 标签：asp.net, iis, selenium, webdriver, selenium-webdriver

我正在使用 Selenium 2 WebDriver。由于以下原因，我从网站启动它而不是 UnitTest 项目：

1.  它应该每 24 小时自动运行一次。我已经使用 System.Threading 编写了一些调度代码。
2.  向客户提供一些 UI，以便在他们需要时在中间运行它。
3.  在每次运行时，都会发送一封电子邮件作为测试结果的一部分。

我的目标网站是：[http ://www.vroomvroomvroom.com.au](http://www.vroomvroomvroom.com.au "租车网站")

我创建了一个包含所有 Selenium 代码的类。我在 default.aspx 的页面加载时使用 System.Threading 调用该类。

当我通过按 F5 或 Ctrl+F5 （即使用 Visual Studio 开发服务器）从 Visual Studio 运行 default.aspx 时，它工作正常`http://localhost:3251/default.aspx`。

但是，当我尝试使用默认端口（80）直接从 IIS 运行它时`http://localhost/seleniumTest/default.aspx`，它会因以下观察/错误而失败：

1.  它运行 Selenium 代码到一个扩展，但不显示浏览器。
2.  经过一些步骤后它失败了`No response from server for url http://localhost:7094/hub/session/4bbe4b0c-aeee-4fa3-8bc0-aae47c6869af/element`

我想要达到的目标是可能的。

仅供参考：如果需要更多详细信息，请告诉我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-08-01T04:46:52.843

我自己设法找到了解决方案。

基本上，必须使用 RemoteWebDriver 而不是 FirefoxDriver。脚步：

1.  将 FirefoxDriver 的初始化更改为 RemoteWebDriver 为：

从改变

```
IWebDriver driver = new FirefoxDriver(); 
```

至

```
DesiredCapabilities capability = DesiredCapabilities.Firefox();
Uri url = new Uri("http://REMOTE_IP:4545/wd/hub");
IWebDriver driver = new RemoteWebDriver(url, capability); 
```

2\. 下载 Selenium 独立服务器并使用 ~ 通过命令提示符启动它

```
java -jar E:\Software\selenium-server-standalone-2.24.1.jar -interactive -port 4545 
```

这种方法有两个好处：

1.  可以使用本地 IIS 来运行测试。
2.  测试可以远程运行。请参阅 Selenium RC 文档。可以使用远程查看屏幕截图

    REMOTE_IP:4545/wd/hub/static/resource/hub.html

我正在考虑修改其中使用的 hub.html 和 client.js 文件的代码，以提供更好的远程感觉。

我希望这对其他人也有用。

供参考：

1.  IP 地址 REMOTE_IP 可以更改为任何实时 IP 地址或本地主机。在发起页面请求时使用上述端口。
2.  独立服务器的启动/停止代码可以安装在测试中，以便通过批处理文件自动启动/停止。
3.  通过不关闭命令提示符来保持服务器运行。

# c - 请解释 sbegin = s ？s：*持续；

> ID：11654040
> 
> 赞同：0
> 
> 时间：2012-07-25T16:09:40.967
> 
> 标签：c, string, pointers

有人可以向我解释以下代码片段，特别是第三行，因为它似乎导致我的代码出错：

```
char * (strtok_r)(char *s, const char *delimiters, char **lasts) {
    char *sbegin, *send;
    sbegin = s ? s : *lasts;
    ... 
```

我猜它更像是我传递了一个不正确的指针值或其他东西，但无法弄清楚，因为我不确定该函数到底是如何做的......

塔

编辑：我不确定发生的错误，因为 g$£&mn f*£$%^% Visual Studio JIT 调试器一直试图打开并搞砸一切。呸呸呸。。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T16:11:15.553

相当于

```
if (s)
    sbegin = s;
else
    sbegin = *lasts; 
```

要获取有关操作员的更多详细信息`?:`，您可以阅读[此](http://en.wikipedia.org/wiki/Ternary_operation)内容。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T16:11:42.310

该行：

```
sbegin = s ? s : *lasts; 
```

是相同的：

```
if(s) 
    sbegin = s; 
else 
    sbegin = *lasts; 
```

`?:`称为三元运算符。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-07-25T16:13:54.417

这部分代码称为[三元运算](http://en.wikipedia.org/wiki/Ternary_operation)。

```
sbegin = s ? s : *lasts; 
```

相当于

```
if(s != null) sbegin = s
else sbegin = *lasts; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T16:16:56.100

对我来说看起来不错，只是周围的括号`strtok_r`有点多余和不寻常。

第三行使用*三元*运算符：它是表示条件的正确表达式。如果问号之前的部分`?`计算结果为真（即不是`0`），则整个表达式将具有介于`?`and之间的表达式的值`:`。否则它将在冒号之后的表达式`:`。

由于`sbegin`,`s`和`*lasts`匹配的类型，我认为那里没有问题。

# php - 替代 $_SERVER['document_root'] 作为相对参数

> ID：11654041
> 
> 赞同：1
> 
> 时间：2012-07-25T16:10:02.757
> 
> 标签：php, document-root

我正在使用[PHP 文件树](http://www.abeautifulsite.net/blog/2007/06/php-file-tree/)为站点构建目录，我很好奇我必须使用哪些替代方法`$_SERVER['DOCUMENT_ROOT']`才能使传递给函数的参数变得相对。

调用该函数的页面位于我正在使用该函数的目录中，因此通常`$_SERVER['DOCUMENT_ROOT']`是完美的，除非我的虚拟主机使用该目录作为域名的根目录。

因此，例如，我的服务器/主机地址是`http://s389593949.servername.com`，但域`www.heresmysite.com`解析为`http://s389593949.servername.com/HERESMYSITE/`，因此在函数中使用文档根目录时应`www.heresmysite.com/HERESMYSITE/therealfile.file`返回`www.heresmysite.com/therealfile.file`。

有什么我可以代替`$_SERVER['DOCUMENT_ROOT']`它使其相对的吗？当附加文件名`"/"`和`"../HERESMYSITE/"`链接时，它们对相对路径是否正确？那些不起作用。

（是的，我知道我可以修改函数本身的 PHP，但我希望保持不变，因为我希望将来将它用于其他应用程序）

非常感谢，所以。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:25:53.477

```
$docroot = str_replace('HERESMYSITE/', '', $_SERVER['DOCUMENT_ROOT']) 
```

# java - GWT 客户端外部库

> ID：11654045
> 
> 赞同：1
> 
> 时间：2012-07-25T16:10:10.110
> 
> 标签：java, gwt

我正在开发一个 GWT 项目，我在其中构建了一个 .jar 文件来处理一些流程，但是它可以在其他项目中重用，因此我想将它作为一个单独的项目保留。但是当我想在 GWT 中运行代码（将 jar 添加到构建路径）时，我似乎无法正确处理。

我已经在我的外部项目的根目录中添加了一个“xxx.gwt.xml”文件（“xxx”是文件名，gwt.xml 是扩展名），然后我设置了源路径（-标记到“com.xxx”，这是我在 GWT 程序中访问的所有包的根目录。然后我将其制作为 .jar，将其添加到 GWT - 项目的构建路径中，然后还添加了源代码到罐子里，它仍然找到“xxx.gwt.xml”文件，然后它抱怨“com.xxx.yyy.YYY”的导入并且它无法解析“YYY”的类型。

另请注意，我没有调用包含 GWT 中不允许的任何库的任何方法，并且我没有收到警告“非规范包”，当 GWT 无法/无法解析/时通常会收到警告/无论你的包在 -tag 中有什么问题。

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T23:14:38.290

您还必须在 .jar 中定义一个模块，然后在外部项目中继承它。

见[http://www.vogella.com/articles/GWT/article.html#modules_use](http://www.vogella.com/articles/GWT/article.html#modules_use)

# html - 绝对定位的元素是否不服从整体 div CSS 命令？

> ID：11654050
> 
> 赞同：0
> 
> 时间：2012-07-25T16:10:27.647
> 
> 标签：html, css

例如，下面的例子。

html代码：

```
<body>
        <div id="container">
            <figure id="abtex">
                <img src="images/abtex125.png" />
            </figure>   
        </div>
</body> 
```

CSS 代码：

```
#container{
    max-width:1050px;
    margin: 0 auto; 
    max-height: 1000px;
}

#abtex {
    position: absolute;
    top:-100px;
    left:400px; 
 } 
```

`#abtex`不会遵循`#container`诸如`max-width`etc之类的CSS命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:14:49.313

您需要在`#container`元素上设置一个位置，以使子元素的绝对位置相对于它。

来自[MDN](https://developer.mozilla.org/en/CSS/position)：

**absolute**：不要为元素留出空间。相反，**将其定位在相对于其最近定位的祖先或包含块的指定位置**。绝对定位的盒子可以有边距，它们不会与任何其他边距一起折叠。

换句话说，由于`#container`没有设置位置，最近定位的祖先 = 身体。设置`position:relative`为`#container`典型的解决方案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:15:46.257

这是关于 CSS 继承的。一些 CSS 属性确实会被继承——大多数不会。

在这些情况下，您需要查看规范或一些 CSS 手册。

有关您的具体情况，请参阅：[https ://developer.mozilla.org/en/CSS/max-width。](https://developer.mozilla.org/en/CSS/max-width)在 MDN 条目中指出，该`max-width`属性不会被继承（“Inherited: no”）。

另一方面，甚至没有必要`max-width`为 child指定 a `div#abtex`，因为它的最大宽度将是父元素的宽度（也可以通过 来操作`overflow`）。

# iphone - 目标c多重继承与许多冲突

> ID：11654051
> 
> 赞同：0
> 
> 时间：2012-07-25T16:10:28.677
> 
> 标签：iphone, objective-c

我刚开始从 iphone 构建目标 c。

我有界面：

```
@interface test : UIView 
```

它实现了 UIView 的所有方法，现在我希望它的接口也继承自 CDVPlugin。我该怎么做？

我读到目标 c 不提供多重继承。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:18:43.167

你不能从 CDVPlugin 和 UIView 中获得。

我建议做这样的事情

```
@interface test : NSObject {
    UIView *view;
    CDVPlugin *plugin;
}

@property(nonatomic, retain) UIView *view;
@property(nonatomic, retain) CDVPlugin *plugin;

@end 
```

您可以向该类添加方法来处理您尝试执行的任何操作。然后只需使用 test.view 访问视图和 test.plugin 访问插件。

# sql - 如何在 Informix 4gl 中引用 TEXT 类型？

> ID：11654053
> 
> 赞同：2
> 
> 时间：2012-07-25T16:10:29.847
> 
> 标签：sql, informix, sqldatatypes, 4gl

我在 4gl 模块中有以下代码：

```
DEFINE f_drec RECORD LIKE verhistd.*
DEFINE f_input
   RECORD
      long_desc LIKE verhistd.long_desc
   END RECORD
Let f_input.long_desc = f_drec.long_desc 
```

其中 verhistd.long_desc 是 TEXT 数据类型。但是当我编译代码时，我得到了这个错误信息：

```
|
|      The variable "f_input.long_desc" is too complex a type to be used in an
| assignment statement.
| See error number -4323. 
```

-4323 的错误消息只涉及数组和屏幕记录，而不是 TEXT 数据类型。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:57:50.007

我没有在我必须维护的任何 4gl 代码中使用 TEXT 数据类型，但是快速查看[IBM 4GL By Example](http://publib.boulder.ibm.com/epubs/pdf/5451a.pdf)文档中有关 TEXT 字段的文档表明 4GL 将文本 blob 视为一种特殊情况并且不加载它们默认情况下，由于潜在的内存使用。

如果您查看示例 18 中的示例代码（对不起，他们现在只有 pdf 版本的在线文档），它应该为您提供了一个相当直接的示例，说明如何处理 TEXT blob。

> 因为 BLOB 列可以包含大量数据，所以 4GL 程序不会像为其他变量类型分配空间一样为 BLOB 变量分配空间。BLOB 变量不包含实际值，而是包含指向该数据存储位置的指针。这个位置可以在内存中，在程序创建的临时文件中，或者在程序员命名的指定文件中。LOCATE 语句使用 BLOB 值的位置初始化 BLOB 变量。

# c - 将 libc 回溯转换为源代码行号

> ID：11654055
> 
> 赞同：20
> 
> 时间：2012-07-25T16:10:34.683
> 
> 标签：c, debugging, gdb, fortran, mpi

我有一个 MPI 应用程序，它结合了 C 和 Fortran 源代码。有时它会由于与内存相关的错误而崩溃，但我很难找到错误（它位于其他人的代码中，目前我不太熟悉）。我还不能用 gdb 捕获它，但有时会输出 glibc 回溯，如下所示。

该错误可能接近“（main_main_+0x3bca）[0x804d5ce]”，（但由于内存错误，我知道情况可能并非如此）。我的问题是，有谁知道如何将 +0x3bca 或 0x804d5ce 转换为特定的代码行？

任何其他有关追踪错误的建议也将不胜感激。我对 gdb 的基础知识非常熟悉。

```
*** glibc detected *** /home/.../src/finite_element: munmap_chunk(): invalid pointer: 0x09d83018 ***
======= Backtrace: =========
/lib/i386-linux-gnu/libc.so.6(+0x73e42)[0xb7409e42]
/lib/i386-linux-gnu/libc.so.6(+0x74525)[0xb740a525]
/home/.../src/finite_element(main_main_+0x3bca)[0x804d5ce]
/home/.../src/finite_element[0x804e195]
/home/.../src/finite_element(main+0x34)[0x804e1e8]
/lib/i386-linux-gnu/libc.so.6(__libc_start_main+0xf3)[0xb73af4d3]
/home/davepc/finite-element/src/finite_element[0x8049971]
======= Memory map: ========
08048000-08056000 r-xp 00000000 08:05 1346306    /home/.../src/finite_element
08056000-08057000 r--p 0000d000 08:05 1346306    /home/.../src/finite_element
08057000-08058000 rw-p 0000e000 08:05 1346306    /home/.../src/finite_element
09d1b000-09d8f000 rw-p 00000000 00:00 0          [heap]
b2999000-b699b000 rw-s 00000000 08:03 15855      /tmp/openmpi-sessions-_0/37612/1/shared_mem_pool.babel
b699b000-b6b1d000 rw-p 00000000 00:00 0 
b6b31000-b6b3d000 r-xp 00000000 08:03 407798     /usr/lib/openmpi/lib/openmpi/mca_osc_rdma.so
b6b3d000-b6b3e000 r--p 0000b000 08:03 407798     /usr/lib/openmpi/lib/openmpi/mca_osc_rdma.so
b6b3e000-b6b3f000 rw-p 0000c000 08:03 407798     /usr/lib/openmpi/lib/openmpi/mca_osc_rdma.so
<snip> 
```

谢谢...

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-07-25T16:23:23.687

如果您在`gdb`其中并且有调试符号，那很容易。使用`list`.

```
(gdb) list *0x804d5ce 
```

这应该为您提供代码行，并在能够找到源文件时向您显示源代码。

没有`gdb`你可以尝试使用`addr2line`：

```
$ addr2line -e finite_element 0x804d5ce 
```

# jsf-2 - FacesComponent 范围

> ID：11654056
> 
> 赞同：1
> 
> 时间：2012-07-25T16:10:38.143
> 
> 标签：jsf-2, myfaces, composite-component

**什么范围有 FacesComponent??。**

我可以设置 ViewScope 之类的东西吗？会话范围？

```
@FacesComponent(value="myComponent")
  public class MyComponent extends UINamingContainer  {
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:26:12.727

不，你不能。它使设计在技术上也毫无意义。

如果您想在某个范围内存储一些数据，只需在组件的方法之一中自己将它们显式存储在所需范围内即可。例如，会话范围是`Map`可用的`ExternalContext#getSessionMap()`。

# mysql - 如何在 Kohana 3.2 查询生成器中使用 MySQL “REPLACE”功能？

> ID：11654061
> 
> 赞同：1
> 
> 时间：2012-07-25T16:10:49.860
> 
> 标签：mysql, kohana

如何使用 Kohana 3.2 中的查询生成器获取类似“REPLACE INTO table ...”的代码。是实施还是我必须自己实施。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:36:18.680

QBuilder 没有`REPLACE INTO`特性，因为它不是标准的 SQL 查询。您可以使用以下方法创建查询`DB::query()`：

`DB::query(NULL, 'replace into ...');`

# xpath - 获取 XPath 内部文本，不包含一些但不是全部子项

> ID：11654066
> 
> 赞同：1
> 
> 时间：2012-07-25T16:11:11.507
> 
> 标签：xpath, xhtml

我有一些这样的 HTML

```
<div>
  <a>link that I do not want to get</a>
  <div>Div that I do not want to get</div>
  Text I want to get
  <br> I like brs
  <b>That text I also want, because I like bold text</b>
  <div>I do not want all divs</div>
</div> 
```

我想使用 xpath 来提取

```
Text I want to get
<br> I like brs
<b>That text I also want, because I like bold text</b> 
```

换句话说，我想要所有 DIV 孩子，但不是 a 也不是 div。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:16:34.773

你可以`self::a`用来检测一个元素，然后`not`用来排除它们，即：

```
/div/node()[not(self::a or self::div)] 
```

# php - 输出数组的php函数，如何打印特定对象？

> ID：11654067
> 
> 赞同：0
> 
> 时间：2012-07-25T16:11:12.940
> 
> 标签：php

我有一个功能：

```
wp_gdsr_blog_rating() 
```

当我 print_r 它输出这个：

```
stdClass Object ( [count] => 20 [rating] => 3.7 [bayes_rating] => 3.7 [max_rating] => 5 [percentage] => 74 [voters] => 71 [votes] => 260.0 ) 
```

如何仅获取和打印 [voters] 值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:13:25.280

尝试

```
$o = wp_gdsr_blog_rating();
echo $o->voters; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:26:59.950

@Sandro Dzneladze，函数

```
wp_gdsr_blog_rating() 
```

返回一个标准的类对象，比如

```
<?php

class Obj {
    public $count = 20;
    public $rating = 3.7;
    public $voters = 71;
    public $votes = 260.0;
}
$var = new Obj();

print_r($var);
echo '<br/>';
echo $var->votes;
?> 
```

所以它与你创建一个类的对象并返回它是一样的。所以你可以像访问类对象一样访问。

# sql - 简化 LEFT / REPLACE 查询

> ID：11654070
> 
> 赞同：0
> 
> 时间：2012-07-25T16:11:20.657
> 
> 标签：sql, sql-server, sql-server-2008, tsql

我有一个急需简化的查询。这是查询的一部分：

```
SELECT
    LEFT(MLIS.REQUESTOR_FIRST_NAME, CharIndex( ' ', MLIS.REQUESTOR_FIRST_NAME + ' ' ) - 1)

    , CharIndex( ' ', LEFT(MLIS.REQUESTOR_FIRST_NAME, CharIndex( ' ', MLIS.REQUESTOR_FIRST_NAME + ' ' ) - 1) + ' ' ) - 1)

    +REPLICATE(' ',25),25)+
    LEFT(' '+REPLICATE(' ',20),20)+
    LEFT(

    LEFT(

    LEFT(MLIS.REQUESTOR_LAST_NAME, CharIndex( ',', MLIS.REQUESTOR_LAST_NAME + ',' ) - 1)

    , CharIndex( ',', LEFT(MLIS.REQUESTOR_LAST_NAME, CharIndex( ',', MLIS.REQUESTOR_LAST_NAME + ',' ) - 1) + ',' ) - 1) 
```

我这样做的原因`replicates`是因为我正在构建一个固定长度的字符串。每列必须是固定长度。

除了上述查询之外，对于每次出现`MLIS.REQUESTOR_FIRST_NAME`and`MLIS.REQUESTOR_LAST_NAME`我需要做的事情：

```
REPLACE(REPLACE(MLIS.REQUESTOR_FIRST_NAME,', MD',''),',MD','') 
```

和

```
REPLACE(REPLACE(MLIS.REQUESTOR_LAST_NAME,', MD',''),',MD','') 
```

我如何将这些包含`REPLACES`在查询中并简化整个事情？

非常感谢您的指导和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:19:44.570

选择子查询中的公共位......（你会有更多）

```
SELECT
    LEFT(REQUESTOR_FIRST_NAME, fname_idx - 1)
    , CharIndex( ' ', LEFT(MLIS.REQUESTOR_FIRST_NAME, fname_idx - 1) + ' ' ) - 1)
..
FROM ( select CharIndex( ' ', MLIS.REQUESTOR_FIRST_NAME + ' ' ) fname_idx, REQUESTOR_FIRST_NAME from... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:23:51.453

使用子查询将有助于语法。此外，您可以强制转换为 CHAR() 以填充和截断字符串到给定长度。

我认为以下内容可以满足您的要求：

```
SELECT cast(fname as char(25)) + ' ' + cast(lname as char(25))
from (select replace(replace(LEFT(MLIS.REQUESTOR_FIRST_NAME,
                                  CharIndex(' ', MLIS.REQUESTOR_FIRST_NAME + ' ' ) - 1
                                 ),
                             ',MD', ''),
                     ', MD', '') as fname,
             replace(relpace(left(MLIS.REQUESTOR_LAST_NAME,
                                  CharIndex(',', MLIS.REQUESTOR_LAST_NAME + ',' ) - 1),
                                  CharIndex(',', LEFT(MLIS.REQUESTOR_LAST_NAME,
                                                      CharIndex( ',', MLIS.REQUESTOR_LAST_NAME + ',' ) - 1) + ','
                                                               ) - 1
                                 ),
                             ',MD', ''),
                     ', MD', '') as lname 
```

但是，很难遵循原始查询，并且可能存在语法错误。此查询旨在为您提供解决问题的一些指导。我还会在连接之后进行强制转换，以确保最终字符串的长度正确。

# c# - 将搜索和排序功能添加到数据绑定包装器

> ID：11654074
> 
> 赞同：3
> 
> 时间：2012-07-25T16:11:26.797
> 
> 标签：c#, data-binding, arcgis, arcobjects

我正在使用[ITable 对象 (ESRI ArcObject Table) 的 C# 包装器](http://help.arcgis.com/en/sdk/10.0/arcobjects_net/conceptualhelp/index.html#/Sample_Bind_a_geodatabase_table_to_a_NET_control/000100000312000000/)，但此包装器缺少排序和搜索功能。有没有办法添加这些功能？我怎么能做到？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:06:01.067

我可以想出两种方法来尝试这个。两者都要求您创建一个派生自`TableWrapper`.

**1.**第一种选择是简单地暴露`Items`TableWrapper的属性（继承自`BindingList<IRow>`）。完成此操作后，您可以使用`System.Linq`来获取项目的排序版本，或搜索项目。如果您需要侦听 ListChanged 事件，这可能**不适用于您的方案。**

```
public class GeoGeekTable : TableWrapper 
{
    public IList<IRow> GetTableItems()
    {
        return this.Items;
    } 
} 
```

**2.**更长的路线是`BindingList<T>`通过创建一个类来提供更完整的实现，该类继承`TableWrapper`并实现了中缺少的继承方法`TableWrapper`。

`BindingList<T>`定义了这些方法：

> **ApplySortCore**：如果在派生类中被覆盖，则对项目进行排序；否则，抛出 NotSupportedException。
> 
> **FindCore**：如果在派生类中实现搜索，则搜索具有指定属性描述符和指定值的项的索引；否则，NotSupportedException。

[http://msdn.microsoft.com/en-us/library/ms132690.aspx](http://msdn.microsoft.com/en-us/library/ms132690.aspx)

```
public class GeoGeekTable : TableWrapper
{
    protected override void ApplySortCore(PropertyDescriptor prop, ListSortDirection direction)
    {
        // see http://social.msdn.microsoft.com/Forums/en-US/csharplanguage/thread/22693b0e-8637-4734-973e-abbc72065969/
    }
} 
```

我希望这可以帮助您入门。如果您搜索“覆盖 ApplySortCore c#”，您应该获得一些有关实现该方法的指导，因为它是标准的 .NET

# symfony - Symfony：将对象（不是服务）注入服务构造函数

> ID：11654075
> 
> 赞同：10
> 
> 时间：2012-07-25T16:11:27.147
> 
> 标签：symfony

在我的服务定义中，我想将对象而不是服务作为服务参数构造函数传递。

来自 config.yml：

```
services:
  acme.services.exampleservice:
    class:  Acme\ExampleBundle\Services\ExampleService
    arguments: 
        entityManager: "@doctrine.orm.entity_manager"
        httpClient: \Example\Http\Client\Client 
```

注意`httpClient`论点。这必须是`\Example\Http\Client\Client`该类的一个实例。

以上不起作用 - 字符串“\Example\Http\Client\Client”作为`httpClient`参数传递给服务。

通过将实例传递`\Example\Http\Client\Client`给服务构造函数来实现上述目的的语法是什么？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-25T16:28:24.940

创建私人服务。这是文档中写[的内容](http://symfony.com/doc/current/components/dependency_injection/advanced.html)：

> 如果您将私有服务用作多个其他服务的参数，这将导致使用两个不同的实例，因为私有服务的实例化是内联完成的（例如 new PrivateFooBar()）。

```
services:
  acme.services.exampleservice:
    class:  Acme\ExampleBundle\Services\ExampleService
    arguments: 
        entityManager: "@doctrine.orm.entity_manager"
        httpClient: acme.services.httpClient

  acme.services.httpClient:
    class: Example\Http\Client\Client
    public: false 
```

您将无法从容器中检索私有服务。从外部看，就好像您将常规对象传递给服务的构造函数一样。

# ruby - Capybara：如何定义自定义选择器？

> ID：11654077
> 
> 赞同：2
> 
> 时间：2012-07-25T16:11:37.193
> 
> 标签：ruby, capybara

我经常需要查询侧边栏中的元素。但是，我必须使用的 css 选择器是临时的并且非常难看：

```
<div id="rt_mod_side_foo_body_bar"> 
```

我想抽象一下，而不是写：

```
within '#rt_mod_side_foo_body_bar' 
```

我可以：

```
within :sidebar 
```

Capybara如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:12:12.640

而不是一个符号，一个方法呢？

```
def sidebar
  "#rt_mod_side_foo_body_bar"
end 
```

# python - 问题构建 cx_Oracle - libclntsh.so.11.1 => 未找到

> ID：11654090
> 
> 赞同：28
> 
> 时间：2012-07-25T16:12:08.143
> 
> 标签：python, oracle, build, cx-oracle

我正在尝试为 Python 2.7.2 和 Oracle 11g 安装构建 cx_Oracle，但构建的 cx_Oracle.so 找不到 libclntsh.so.11.1，因此在 Python 中导入 cx_Oracle 失败。

```
/mypath/cx_Oracle-5.1.1/build/lib.linux-x86_64-2.7-11g]$ ldd cx_Oracle.so
    libclntsh.so.11.1 => not found
    libpthread.so.0 => /lib64/libpthread.so.0 (0x00002ae9be290000)
    libc.so.6 => /lib64/libc.so.6 (0x00002ae9be4ab000)
    /lib64/ld-linux-x86-64.so.2 (0x000000389b600000) 
```

我的 Oracle 客户端安装目录中有**libclntsh.so.11.1 ：**

```
/apps/oracle/client/11.2.0.1/home1/lib]$ ls -l libclntsh.so*
libclntsh.so -> /apps/oracle/client/11.2.0.1/home1/lib/libclntsh.so.11.1
libclntsh.so.11.1 
```

cx_Oracle setup.py 正在挑选这个 lib 目录：

```
/mypath/cx_Oracle-5.1.1]$ python2.7 setup.py build
/apps/oracle/client/11.2.0.1/home1/
running build
running build_ext
building 'cx_Oracle' extension
gcc -pthread -fno-strict-aliasing -g -O2 -DNDEBUG -g -fwrapv -O3 -Wall -Wstrict-prototypes -fPIC -I/apps/oracle/client/11.2.0.1/home1/rdbms/demo -I/apps/oracle/client/11.2.0.1/home1/rdbms/public -I/apps/bweb/python-2.7.2/include/python2.7 -c cx_Oracle.c -o build/temp.linux-x86_64-2.7-11g/cx_Oracle.o -DBUILD_VERSION=5.1.1
In file included from /apps/oracle/client/11.2.0.1/home1/rdbms/public/oci.h:3024,
                 from cx_Oracle.c:10:
/apps/oracle/client/11.2.0.1/home1/rdbms/public/ociap.h:10788: warning: function declaration isn't a prototype
/apps/oracle/client/11.2.0.1/home1/rdbms/public/ociap.h:10794: warning: function declaration isn't a prototype
gcc -pthread -shared build/temp.linux-x86_64-2.7-11g/cx_Oracle.o -L/apps/oracle/client/11.2.0.1/home1/lib -lclntsh -o build/lib.linux-x86_64-2.7-11g/cx_Oracle.so 
```

这个设置明显有问题吗？

谢谢

**更新**

我的**LD_LIBRARY_PATH**包含上面带有**libclntsh.so.11.1的 lib 目录**

```
$ echo $LD_LIBRARY_PATH
/apps/oracle/client/11.2.0.1/lib 
```

这似乎没有任何区别。我重建了 cx_Oracle.so 文件，它仍然`libclntsh.so.11.1 => not found`在我运行时显示`$ ldd cx_Oracle.so`。

**Python 无法加载构建的模块：**

```
Python 2.7.2 (default, Jan 19 2012, 14:38:32)
[GCC 3.4.6 20060404 (Red Hat 3.4.6-11)] on linux2
Type "help", "copyright", "credits" or "license" for more information.
>>> import cx_Oracle
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: libclntsh.so.11.1: cannot open shared object file: No such file or directory 
```

**解决了**

该问题与**LD_LIBRARY_PATH**环境变量有关。由于我正在使用的设置的限制（corp env），我不得不将 cx_Oracle 构建为另一个用户（系统帐户）。即我正在运行这个：

```
$ sudo -u username python27 setup.py build 
```

因此，即使为我正确设置了**LD_LIBRARY_PATH**，当以其他用户身份执行命令时，也没有使用我的版本。通过将源代码移动到我有权限的位置并以我的用户身份运行构建，我能够成功构建。

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-07-25T16:27:09.927

添加`/apps/oracle/client/11.2.0.1/home1/lib/`到您的`LD_LIBRARY_PATH`环境变量中，在运行 python 之前在终端中执行以下命令或将其添加到您的`.bashrc`

```
export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/apps/oracle/client/11.2.0.1/home1/lib/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:15:06.583

是的。您忘记告诉加载器缓存工具它需要在该目录中查找库。将该目录添加到`/etc/ld.so.conf`或类似文件并运行`ldconfig`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-08-13T15:04:12.103

许多 oracle 产品都安装了 oraenv。它将设置其他环境变量，`LD_LIBRARY_PATH`因此请考虑运行`. oraenv`而不是手动设置环境。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-03T08:39:23.300

设置**LD_RUN_PATH**。（链接器使用 LD_RUN_PATH 指定仅在运行时查找库的位置。）

现在构建 cx_Oracle。

```
/mypath/cx_Oracle-5.1.1]$ export LD_RUN_PATH="/apps/oracle/client/11.2.0.1/home1/lib"
/mypath/cx_Oracle-5.1.1]$ python2.7 setup.py build 
```

这将不需要在导入 cx_Oracle 时设置 LD_LIBRARY_PATH。

# iphone - IOS 从 UIImagePickerController 选择的图像保存 gif 图像

> ID：11654092
> 
> 赞同：4
> 
> 时间：2012-07-25T16:12:09.830
> 
> 标签：iphone, ios, ipad, uiimage, uiimagepickercontroller

我正在创建一个应用程序，我需要将图像从 IOS 照片库复制到应用程序的 Document 目录，然后将文件上传到服务器。我正在使用 UIImagePickerController 从照片库中选择图像并将其保存在应用程序文件夹中。它适用于使用 UIImageJPEGRepresentation 和 UIImagePNGRepresentation 的“jpeg”和“png”图像。

我没有看到任何在 IOS 中复制和保存“gif”图像的选项。是否可以保存动画 gif 图像。请说明如何处理和保存原始图像（bmp、jpg、gif、png、tiff 等）。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:30:48.477

虽然您可以加载它们（尽管您需要将它们拆分为动画；[在 Iphone UIImageView 中添加动画 Gif 图像](https://stackoverflow.com/questions/4386675/add-animated-gif-image-in-iphone-uiimageview)- 请注意`convert`底部附近的命令），但无法保存它们。

要保存它们，您需要使用第三方库。

看到这个问题，[如何在 iPhone 上保存 GIF？](https://stackoverflow.com/questions/1851103/how-to-save-a-gif-on-the-iphone)，以及这个[http://jitsik.com/wordpress/?p=208](http://jitsik.com/wordpress/?p=208)库的解决方案。

# c++ - 在一行中定义和初始化 stl 常量

> ID：11654095
> 
> 赞同：3
> 
> 时间：2012-07-25T16:12:24.557
> 
> 标签：c++, initialization, constants

我有一堂课：

```
Temp.h:
[...]
class Temp{
public:
    Temp(vector<vector<double> > vect);
    const static Temp VAR1;
    const static Temp VAR2;
    ...

}; 
```

我想使用双精度数组初始化 VAR1 和 VAR2：{{0,1,0,1},{1,0,1,0}}。但我不能这样做：

```
const Temp::VAR1(...); 
```

，因为没有“单行”运算符可以从数组数组构造向量向量。我想到了建筑结构，比如：

```
B{
    vector<vector<double> > vect;

    B& add (double[] a, int number) {... 
    push elements from array to vector and add this vector to vect ...
    return *this;
    }

    Temp build() {return Temp(vect);}
} 
```

但是当我打电话时：

```
 B().add({0,1,0,1},4).add({1,0,1,0},4).build(); 
```

编译器无法将 {0,1,0,1} 识别为数组，而是将其识别为 double*，我无法更改它。

是否有任何选项可以创建一些方法或类似的东西来在多行中初始化 const 静态成员？

我希望我写的足够简单，如果没有，我稍后会编辑它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:20:18.627

在 C++11 中，使用统一的初始化语法：

```
const Temp::VAR1{{0,1,0,1},{1,0,1,0}}; 
```

如果您必须与 C++03 保持兼容，我建议您使用[`boost::assign`](http://www.boost.org/doc/libs/1_50_0/libs/assign/doc/index.html)：

```
const Temp::VAR1 = list_of(list_of(0)(1)(0)(1))(list_of(1)(0)(1)(0)); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:25:31.787

编写一个初始化它的静态函数：

```
Temp InitTempVar1()
{
    vector<vector<double> > init;
    // initialize init...
    return Temp(init);
}

Temp InitTempVar2()
{
    vector<vector<double> > init;
    // initialize init...
    return Temp(init);
}

const Temp Temp::VAR1 = InitTempVar1();
const Temp Temp::VAR2 = InitTempVar2(); 
```

# ios - 我可以在 iPad 上使用哪个 UIKeyboardType

> ID：11654101
> 
> 赞同：8
> 
> 时间：2012-07-25T16:12:38.957
> 
> 标签：ios, objective-c, ipad, uikeyboardtype

我的 iPad 应用程序中有一个 textField 对象。我想给用户一个方便的键盘来输入数字。在我的代码中，我添加了：

```
UITextField *textField = [[UITextField alloc] initWithFrame:frame];
textField.keyboardType = UIKeyboardTypeDecimalPad; 
```

根据文档，这是一种有效的键盘类型，但是当我编辑文本字段时，会出现普通的 ASCII 键盘。但是，当我将其更改为：

```
textField.keyboardType = UIKeyboardTypePhonePad; 
```

键盘看起来像这样： [![手机键盘](../Images/e387b9dcca110996baa6fed73f94e9ea.png)](https://i.stack.imgur.com/LBcGA.jpg)

理想情况下，我想要一个只有数字和小数点的键盘，但这在 iPad 上是不可能的吗？有没有人明确列出哪些键盘适用于 iPhone 和 iPad？苹果在这一点上还不清楚。我也看到了这个类似的[问题](https://stackoverflow.com/questions/6350484/uitextfield-uikeyboardtypedecimalpad-on-ipad)，但没有一个答案真正解决了我的观点。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T17:38:06.587

这些是可以在两个 iOS 设备上使用的 UIKeyboardTypes。从[文档](http://developer.apple.com/library/ios/#DOCUMENTATION/UIKit/Reference/UITextInputTraits_Protocol/Reference/UITextInputTraits.html)：

> *   `UIKeyboardTypeDefault`
>     
>     
>     *   使用当前输入法的默认键盘。
>     *   在 iOS 2.0 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。
>         
>         
> *   `UIKeyboardTypeASCIICapable`
>     
>     
>     *   使用显示标准 ASCII 字符的键盘。
>     *   在 iOS 2.0 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。
>         
>         
> *   `UIKeyboardTypeNumbersAndPunctuation`
>     
>     
>     *   使用数字和标点符号键盘。
>     *   在 iOS 2.0 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。
>         
>         
> *   `UIKeyboardTypeURL`
>     
>     
>     *   使用针对 URL 输入优化的键盘。此类型突出显示“.”、“/”和“.com”。
>     *   在 iOS 2.0 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。
>         
>         
> *   `UIKeyboardTypeNumberPad`
>     
>     
>     *   使用专为输入 PIN 码而设计的数字键盘。这种类型突出显示数字 0 到 9。此键盘类型不支持自动大写。
>     *   在 iOS 2.0 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。
>         
>         
> *   `UIKeyboardTypePhonePad`
>     
>     
>     *   使用专为输入电话号码而设计的键盘。这种类型的特点是数字 0 到 9 以及突出的“*”和“#”字符。此键盘类型不支持自动大写。
>     *   在 iOS 2.0 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。
>         
>         
> *   `UIKeyboardTypeNamePhonePad`
>     
>     
>     *   使用专为输入个人姓名或电话号码而设计的键盘。此键盘类型不支持自动大写。
>     *   在 iOS 2.0 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。
>         
>         
> *   `UIKeyboardTypeEmailAddress`
>     
>     
>     *   使用为指定电子邮件地址而优化的键盘。这种类型的特点是“@”、“.” 和空格字符突出。
>     *   在 iOS 2.0 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。
>         
>         
> *   `UIKeyboardTypeDecimalPad`
>     
>     
>     *   使用带有数字和小数点的键盘。
>     *   在 iOS 4.1 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。
>         
>         
> *   `UIKeyboardTypeTwitter`
>     
>     
>     *   使用针对 twitter 文本输入优化的键盘，可以轻松访问 @ 和 # 字符。
>     *   在 iOS 5.0 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。
>         
>         
> *   `UIKeyboardTypeAlphabet`
>     
>     
>     *   已弃用。
>     *   请改用 UIKeyboardTypeASCIICapable。
>     *   在 iOS 2.0 及更高版本中可用。
>     *   中宣布`UITextInputTraits.h`。

[以下是不同类型键盘的](http://zuzara.com/blog/2010/07/01/screenshots-for-uikeyboardtype/)一些屏幕截图。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-07-17T12:06:25.680

收到警告后，我使用模拟器测试了哪些键盘类型可用于 iPad/iPhone

> “找不到支持键盘 Wildcat-Landscape-QWERTY-Pad 的类型 8 的键盘；使用 2592645918_Wildcat-Alphabetic-Keyboard_Capital-Letters”

在 iPad 上为`UIKeyboardTypeDecimalPad`. 希望这对下一个在这里绊倒的人有用。

平板电脑：

*   UIKeyboardTypeASCIICapable
*   UIKeyboardTypeNumbersAndPunctuation
*   UIKeyboardTypeURL
*   UIKeyboardTypeNumberPad
*   UIKeyboardTypeNamePhonePad
*   UIKeyboardTypeEmailAddress
*   UIKeyboardTypeTwitter

所以，除了`UIKeyboardTypeDecimalPad`. 在 iOS 5.1 或 6.1 中，使用`UIKeyboardTypeDecimalPad`只会给你一记耳光。

苹果手机：

*   UIKeyboardTypeASCIICapable
*   UIKeyboardTypeNumbersAndPunctuation
*   UIKeyboardTypeURL
*   UIKeyboardTypeNumberPad
*   UIKeyboardTypeNamePhonePad
*   UIKeyboardTypeEmailAddress
*   UIKeyboardTypeDecimalPad
*   UIKeyboardTypeTwitter

即所有人

# android - Android Overlay为ontap方法设置边界？

> ID：11654103
> 
> 赞同：-1
> 
> 时间：2012-07-25T16:12:46.577
> 
> 标签：android, android-mapview

最近，我通过创建一个覆盖类并使用路径绘制它，在我的国家周围绘制了一个自定义多边形。我有很多地图扇区，每个扇区都被划分并用覆盖类填充颜色。但是，当我使用 ontap 函数时，只会调用最后一个覆盖项 ontap 函数。

我相信是因为我没有为叠加层设置边界？以下是我的叠加代码

```
public class SectorOverlay  extends  Overlay{

CustomPolygon customPolygon =null;
Context context;

public SectorOverlay(Context context, CustomPolygon customPolygon) {
    this.context=context;
    this.customPolygon =customPolygon;
}
@Override
public void draw(Canvas canvas, MapView mapView, boolean shadow) 
{
    shadow=false;

    Paint paint = new Paint();
    paint = new Paint(Paint.ANTI_ALIAS_FLAG);
    paint.setStrokeWidth(2);
    paint.setColor(0x10000000);     
    paint.setStyle(Paint.Style.FILL_AND_STROKE);
    paint.setAntiAlias(true);
    Point point1_draw = new Point();        

    if(customPolygon!=null)
    {

            Path path = new Path();
            path.setFillType(Path.FillType.EVEN_ODD);
            for(int n=0;n<customPolygon.getCorrdinateList().size();n++)
            {

                GeoPoint sector1 = new GeoPoint((int)(customPolygon.getCorrdinateList().get(n).getLatitude()*1e6), (int)((customPolygon.getCorrdinateList().get(n).getLongitude())*1e6));
                if(n==0){
                    mapView.getProjection().toPixels(sector1, point1_draw);
                    path.moveTo(point1_draw.x,point1_draw.y);
                }else
                {
                    mapView.getProjection().toPixels(sector1, point1_draw);
                    path.lineTo(point1_draw.x,point1_draw.y);
                }
            }

            path.close();
            canvas.drawPath(path, paint);

    }

}
@Override
public boolean onTap(GeoPoint p, MapView mapView) {

    new CommonOpearation().showToast(context, customPolygon.getName());

return  true;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T22:03:00.117

**它被称为“最后一个” `Overlay`，因为它是最顶层的。** `MapView`从 绘制它的叠加层`0..end`，但是当有一个事件时，最后一个绘制在顶部，所以它首先获取事件，并且**因为你`return true`在`Overlay.onTap`**（同样适用于`Overlay.onTouchEvent`，实际上很多 Android 事件）**你说事件被处理，因此它不会打扰调用叠加层。**所以事件处理程序是按`end..0`顺序调用的。

我没有使用`onTap`，但根据 Android 上的CommonsWare *-* [Map overlay onTouchEvent / onTap howto？](https://stackoverflow.com/questions/2610008/android-map-overlay-ontouchevent-ontap-howto)如果你使用`ItemizedOverlay`你应该`onTap`只为你的有界/绘制区域。这肯定是常见的`onTap`，并且`onTouchEvents`被要求用于屏幕上的任何触摸点。在这种情况下，您可以通过将其反向应用到 (x,y) 得到 (lon,lat)来找到`GeoPoint`with 。或者使用（同样，我以前没有听说过这个）。`getProjection``MapView``onTap`

如果您需要对覆盖的绘制多边形进行命中测试，这里有一个可以帮助您确定该点是否在（不一定是凸的）多边形中：http: [//verkkopetus.cs.utu.fi/vhanke/ trakla/PointInPolygon.html](http://verkkoopetus.cs.utu.fi/vhanke/trakla/PointInPolygon.html)

*   2\. （为了安全起见，`LStart.x = minXOfPolygon, LEnd.x = maxXOfPolygon, LStart.y = LEnd.y = 0` 您可能需要将线路延长 1 个单位。）`LStart.x``LEnd.x`
*   4.`findIntersection`使用[http://workshop.evolutionzone.com/2007/09/10/code-2d-line-intersection/](http://workshop.evolutionzone.com/2007/09/10/code-2d-line-intersection/)

# c# - 当前是否有与已停产的“SQL Server 英语查询”等效的版本

> ID：11654105
> 
> 赞同：17
> 
> 时间：2012-07-25T16:12:55.070
> 
> 标签：c#, .net, sql

我正在寻找一个 .net 引擎，它提供了一种将自然英语语言查询转换为 SQL 语法的方法。

我知道微软曾经有一个名为“English Query”的产品，它针对基于口语单词的 SQL 和多维数据集查询完全做到了这一点。自 SQL Server 2000 以来，他们已经停止了这个，我希望有一个完全支持的现代等效可用？

以前的版本支持语音查询，例如““1996 年售出了多少辆蓝色福特？”到

```
SELECT COUNT(*)
FROM CarSales
WHERE Make = 'Ford'
  AND Color = 'Blue'
  AND DATEPART(yy, SalesDate) = '1996' 
```

原始[“英文查询”的链接](http://msdn.microsoft.com/en-us/library/aa174480%28v=sql.80%29.aspx)

![在此处输入图像描述](../Images/727a95e7b040c745b5e57c9886a0388a.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-08-17T15:47:58.357

经过一番研究，我无法为 SQL 翻译器找到任何新的现代自然语言。关于这个主题有很多研究论文，但我找不到任何商业软件。

[马丁史密斯的评论链接](https://stackoverflow.com/questions/886502/what-happened-with-sql-english-query)

[它被杀的“为什么”](https://connect.microsoft.com/SQLServer/feedback/details/718280/english-query)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T21:00:49.240

这是[SQL-HAL- Natural Language to SQL Translator](http://www.csse.monash.edu.au/hons/projects/2000/Supun.Ruwanpura/)，来自澳大利亚大学的白皮书软件声称总结：

> “SQ-HAL 的大部分目标都已成功实现。该程序可以将简单的自然语言查询转换为 SQL。它可以转换为不同类型的 SELECT 查询，包括从单个或两个表中检索数据，有或没有单一条件. SQ-HAL 的学习能力也实现了一些成功，但效率不如预期，因为它只能检测查询中的表名、字段名和条件，而不能泛化其他词，例如确定哪些词是可选的并且可以在查询中省略。”

# string - As3 在回车上拆分

> ID：11654114
> 
> 赞同：9
> 
> 时间：2012-07-25T16:13:28.503
> 
> 标签：string, actionscript-3, flash, split, carriage-return

谁能告诉我如何使用 as3 中的 split() 函数来拆分带有回车符的字符串？

这通常使用“ \n ”完成，但在这种情况下它似乎不起作用，带或不带 de 引号。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-07-25T16:24:34.397

尝试像这样拆分

```
var yourArray:Array = YourString.split(String.fromCharCode(13)); 
```

# c# - C# / SQL Server 2005 我应该将 OOP 用于报表和数据网格吗？

> ID：11654116
> 
> 赞同：0
> 
> 时间：2012-07-25T16:13:32.607
> 
> 标签：c#, sql, oop

我的 Web 应用程序分为不同的层，其中之一是业务层，其工作方式如下：

```
PersonBusiness pb = new PersonBusiness();
Person p = pb.GetPerson(10); 
```

然后在查看记录时将 person 对象加载到 ASP.NET 控件中，然后为了保存，我执行以下操作：

```
PersonBusiness pb = new PersonBusiness();
Person p = new Person();
p.Name = "Alex";
pb.SavePerson(p); 
```

如果我需要在应用程序中显示一个实际上是从数据库调用视图的结果的报告，该视图实际上是业务层中不同对象的混合？您是否建议绕过业务层并加载来自视图的数据集？在这里使用 OOP 有意义吗？如果为真，那么我将不得不创建一个自定义对象，该对象仅用于该单个报告而没有其他用途。

这更像是一个通用问题，并不严格适用于 C# 和 SQL ，但基本上适用于那里的任何业务应用程序......

我希望我的问题是有道理的，

感谢您的宝贵时间，祝您有美好的一天

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:28:04.860

这是来自企业级应用程序。我们运行一个查询来搜索数据库中的多个表以返回一个数据集。然后我们将该数据集加载到数据网格中。它运行良好且易于使用。我们在其他任何地方都使用 OOP，但这在试图限制您必须编写的代码量和易用性时是有意义的。

```
// Call in program
m_Info = m_InfoDAO.GetInfo();
//Database Call
public DataSet GetInfo()
    {
        try
        {
            if (this.cnn == null)
                this.ConnectAndEnable(ref cnn);

            string sql = @" select '0' as select_id, folder_name, folder_name as hidden_folder, (to_char(mod_date,'MM/DD/YYYY hh12:mi AM') || ' ' || mod_user) as mod_date
                            from   index_info , index_patient
                            where  deleted_date is null
                            order by folder_name asc";

            OracleCommand cmd = new OracleCommand(sql, cnn);
            OracleDataAdapter da = new OracleDataAdapter();
            da.SelectCommand = cmd;
            DataSet ds = new DataSet();
            da.Fill(ds);
            cmd.Parameters.Clear();

            return ds;
        }
        catch (Exception ex)
        {
            Trace.WriteLine("Exception in InfoDAO.GetInfo:  " + ex.Message);
            throw ex;
        }
    }

//Initialize Grid
gridInfo.DataSource = m_Info;
gridInfo.ActiveRow = null; 
```

# java - Spring Mobile：如何以编程方式添加 DeviceWebArgumentResolver？

> ID：11654118
> 
> 赞同：7
> 
> 时间：2012-07-25T16:13:40.530
> 
> 标签：java, configuration, spring-mobile

Spring 移动[文档](http://static.springsource.org/spring-mobile/docs/1.0.x/reference/htmlsingle/)建议添加以下配置：

```
<mvc:annotation-driven>
    <mvc:argument-resolvers>
        <beans:bean class="org.springframework.mobile.device.DeviceWebArgumentResolver" />
    </mvc:argument-resolvers>
</mvc:annotation-driven> 
```

将当前的 Device 对象作为参数传递给`@Controller`方法。

然而，可以使用：

```
@EnableWebMvc
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {

} 
```

和旁路`<mvc:annotation-driven>`配置。

那么，如何以`DeviceWebArgumentResolver`编程方式添加？

**解决方案（卢西亚诺）：**

```
@EnableWebMvc
@Configuration
public class WebConfig extends WebMvcConfigurerAdapter {

    @Override
    public void addArgumentResolvers(
        List<HandlerMethodArgumentResolver> argumentResolvers) {

        // Adding Spring mobile argument resolvers
        argumentResolvers.add(
            new ServletWebArgumentResolverAdapter(
                new DeviceWebArgumentResolver()));

        argumentResolvers.add(
            new ServletWebArgumentResolverAdapter(
                new SitePreferenceWebArgumentResolver()));

    }

    // ...

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T16:40:29.160

`WebMvcConfigurerAdapter`包含一个名为的方法`addArgumentResolvers(List<HandlerMethodArgumentResolver> argumentResolvers)`

这是您需要实现的方法，但首先您需要将 a `WebArgumentResolver`（在本例中`DeviceWebArgumentResolver`为 ）转换为`HandlerMethodArgumentResolver`. 为此，存在一个名为`ServletWebArgumentResolverAdapter`.

# algorithm - 在大图中找到神经痛点2的算法

> ID：11654120
> 
> 赞同：1
> 
> 时间：2012-07-25T16:13:53.433
> 
> 标签：algorithm, graph, graph-algorithm

假设我有一个大的任意连接顶点图，如下所示。假设这些是网络连接。一些连接（红色）比其他连接更容易损坏。如果两个红色连接失败，则许多点与剩余岛屿的成员不再连接。

怎样才能找到这些神经连接？

是否有现有的算法？

![图表样本](../Images/5f81ded5c5228d2055a94730f234ec97.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:45:11.010

您想知道[Edge Connectivity](http://en.wikipedia.org/wiki/K-edge-connected_graph)。在您的情况下，您似乎只关心图是 2 边连接的，这种情况可能有特定的算法，但我不确定。这是一个我认为应该可行的简单算法：

```
For all edges, E, in your graph, G:
  Remove E from G.
  Find any path, P, from src(E) to dst(E).
  Remove all edges in P from G.
  Find a path from src(E) to dst(E),
    if none exists then E is one of your important edges. 
```

但是，这并不快，它需要 O(E*(E+V))，如果你的图形是平面的，那么这还不错，因为 O(E) == O(V)，所以它需要时间 O(V^2)。如果您的图表连接得更紧密，那么这可能与 O(V^4) 一样糟糕，这可能令人望而却步。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:18:43.650

就在我的脑海中，我想说你需要看看流网络：[http](http://en.wikipedia.org/wiki/Flow_network) ://en.wikipedia.org/wiki/Flow_network 。

# spring-webflow - Spring WebFlow - 视图状态或动作状态中的业务逻辑

> ID：11654124
> 
> 赞同：1
> 
> 时间：2012-07-25T16:13:56.337
> 
> 标签：spring-webflow

调用业务逻辑的最佳位置是什么？我有以下要求。

1）。从用户那里获取搜索条件

2）。如果当前用户正在尝试搜索未经授权的结果，则抛出业务异常

3）。检索结果

4）。如果结果数==0，请再次转到搜索页面并输入消息。

5）。如果结果数>限制，请再次进入搜索页面并留言。

6）。转到显示结果页面。

这是我目前所拥有的......

```
<flow....>
      <on-start>
          <evaluate expression="appConfig.setUpSupportData()" result="flowScope.supportData"/>  
      </on-start>
      <view-state id="searchHome" view="searchHome" model="searchCriteria">
           <transition on="search" to="doSearch"/>
      </view-state> 

      <action-state id="doSearch">
             <evaluate expression="searchUtil.getSearchResults(flowScope.searchCriteria)" result="flowScope.personList"/>
             <evaluate expression="searchUtil.showSearchResults(flowScope.personList, flowRequestContext)" >
                     <attribute name="name" value="expression2"/>
             </evaluate>
             <transition on="expression2.yes" to="showSearchResults"/>
             <transition on="expression2.no" to="searchHome"/>
     </action-state>
     <view-state id="showSearchResults"></view-state>
</flow> 
```

我的问题是，我应该在 action-stae 还是 view-state="showSearchResults" 中调用 getSearchResults() 方法？如果我在 action-stae 中调用该方法，我必须将搜索结果放在 flowscope 中，以便第二个视图可以获得结果 - 我担心这种情况下的内存。如果我在第二个 view-on-entry 中调用该方法，我可以将 personList 放在 viewscope 中，但是如何处理案例 2,4 和 5？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:39:47.240

您已经回答了自己的部分问题：

*   使用动作状态来调用业务逻辑可以让您更好地控制对不同结果的反应方式：出现异常时转到此处，如果一切正常则转到其他位置，等等。缺点是您需要将数据放在更长寿命的范围（流范围）中以使其可用于视图状态。
*   使用视图状态允许您通过使用呈现操作或入口操作检索数据来使用短暂的范围（视图范围或请求范围），但在处理操作结果时并没有给您太多控制。

在两者之间进行选择有点折衷。如果搜索结果可能变得非常大，那么使用短寿命范围尽可能减少内存负载可能是一个重要问题，因此您将使用视图状态。在其他情况下，动作状态可能更合适。

一种替代方法是引入一个应用程序控制器（从流中调用），它调用业务逻辑并返回一个包含以下内容的对象：

*   搜索结果
*   要显示的潜在信息/警告消息

然后，您可以使用视图状态，视图将能够简单地从结果对象中获取搜索结果和信息/警告消息并显示它。

# mysql - MySql 无法连接错误 - 它只是有时会发生

> ID：11654128
> 
> 赞同：2
> 
> 时间：2012-07-25T16:14:11.420
> 
> 标签：mysql, database

我的项目（.NET 套接字服务器）中出现以下异常：

`ERROR HY000: [ODBC Driver 3.51] Can't connect to MySQL server 'someHost' (10060)`

但是，该错误并非每次都发生。这样就排除了配置错误或不正确的登录详细信息。此外，当我显示所有 %max% 变量时，我并没有接近其中的任何一个。不幸的是，日志的详细程度无法更改，并且最近没有写入日志。

什么会导致这些零星的连接失败？

# groovy - 如何定义一个接受参数化闭包作为参数的 Groovy 函数？

> ID：11654129
> 
> 赞同：4
> 
> 时间：2012-07-25T16:14:12.183
> 
> 标签：groovy

我想定义一个函数，它接受另一个函数（闭包）作为参数。第二个函数应该接受 1 个参数。

目前，我只有一个简单的签名：

```
def func1(func2) {
   func2("string")
} 
```

有没有办法明确指定，`func2`应该接受 1 个参数（或更少）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T16:20:51.750

不在 的定义中`func1`，但[您可以在运行时检查](http://groovy.codehaus.org/api/groovy/lang/Closure.html#getMaximumNumberOfParameters%28%29)闭`maximumNumberOfParameters`包，如下所示：

```
def func1( func2 ) {
  if( func2.maximumNumberOfParameters > 1 ) {
    throw new IllegalArgumentException( 'Expected a closure that could take 1 parameter or less' )
  }
  func2( 'string' )
} 
```

测试成功：

```
def f2 = { a -> "returned $a" }
assert func1( f2 ) == 'returned string' 
```

和失败：

```
def f3 = { a, b -> "returned $a" }
try {
  func1( f3 )
  assert true == false // Shouldn't get here
}
catch( e ) {
  assert e.message == 'Expected a closure that could take 1 parameter or less'
} 
```

# jquery - Safari 中的“粘性”导航栏损坏

> ID：11654132
> 
> 赞同：0
> 
> 时间：2012-07-25T16:14:27.660
> 
> 标签：jquery, navigation, sticky

我正在尝试使用此代码制作“粘性”导航栏。当我在 Safari 中查看它时，它坏了（当我向下滚动大约 10 像素时，我的浏览器会跳转到向下约 350 像素的导航栏）

```
$(document).ready(function() {

    //Calculate the height of <header>
    //Use outerHeight() instead of height() if have padding
    var aboveHeight = $('header').outerHeight();

//when scroll
    $(window).scroll(function(){

        //if scrolled down more than the header’s height
            if ($(window).scrollTop() > aboveHeight){

        // if yes, add “fixed” class to the <nav>
        // add padding top to the #content
            (value is same as the height of the nav)
            $('nav').addClass('fixed').css('top','0').next()
            .css('padding-top','60px');

            } else {

        // when scroll up or less than aboveHeight,
            remove the “fixed” class, and the padding-top
            $('nav').removeClass('fixed').next()
            .css('padding-top','0');
            }
    });
}); 
```

# php - PHP表单动作不重定向

> ID：11654133
> 
> 赞同：1
> 
> 时间：2012-07-25T16:14:30.000
> 
> 标签：php, forms, action

我开发了一个网络爬虫来搜索我公司网站上的某些标签，以确保它们是实时的，有谷歌分析，等等。但是，我的公司有近百个网站，所以实际的爬取过程实际上就是爬取。所以我想创建一个表单，用户输入我们其中一家公司的网址，它只抓取那个网站。我不擅长使用表单，所以我基本上希望表单做的是存储用户输入的 url，然后重定向到另一个页面，在该页面中将 url 提供给爬虫并显示结果。这基本上是我到目前为止所拥有的，不多，我无法重定向到不同的页面并存储 URL 变量，因此我可以将它传递给我拥有的爬虫代码。

```
<div id="main-content" class="mc-left"> <div class="entry"> <div style="position:absolute; margin-left:520px; height:25px; width:120px; font-size:10px;"> </div>
</div>
<h2><a href="<?php the_permalink(); ?>"><?php the_title(); ?></a></h2>

<form name="form1" id="form1" method="POST" action="submitcrawler.php">
    <div class="hiddenfields">
    <p>Website Address:<br>
    <input name="websiteaddress" type="text"></p>
    <input type="submit" class="submit" name="submit"  value="Submit">          
</form> 
```

如您所见，我希望此表单将我带到 submitcrawler.php，但是，当我创建该 php 文件时，当我点击提交时，它会将我带到当前的 slug (../crawler-2/submitcrawler.php 而不是 . ./submitcrawler.php) 所以它会抛出 404 错误

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:20:44.757

该表单正在提交到与您正在查看的文件位于同一文件夹中的“submitcrawler.php”，因此如果它在 /crawler-2/ 中，那么它就是它的查找位置。

使用 ../ 如果你想提升到上面的目录，或者可能更好，使用 / 并输入从 web 根目录到文件的路径（apache / web 服务器可查看的顶级目录）。

所以

```
<form action="../submitcrawler.php"> 
```

或者

```
<form action="/submitcrawler.php"> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:28:52.040

对于您正在寻找的功能，您可以尝试使用`method="GET"`. 这样，您可以在 URL 中看到正在传递给其他 PHP 脚本的信息。

然后只需在其他 PHP 脚本中检索信息：

```
if(isset($_GET['websiteaddress'])) {
    $websiteaddress = $_GET['websiteaddress'];
} else {
    echo "No web address was received.";
} 
```

在表单属性方面，如果脚本都是静态的，则`action`需要使用*绝对路径，否则如果脚本是动态的并且可能会更改服务器上的位置，则使用**相对路径*。

路径信息：

[http://en.wikipedia.org/wiki/Path_%28computing%29](http://en.wikipedia.org/wiki/Path_%28computing%29)

[http://webdesign.about.com/od/beginningtutorials/a/aa040502a.htm](http://webdesign.about.com/od/beginningtutorials/a/aa040502a.htm)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:18:53.040

如果您正在谈论的文件位于 crawler-2 目录下，除非您使用相对路径，否则它将提交表单到该文件`../submitcrawler.php`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:19:01.480

您在该表单上设置的操作会将其发送到与当前脚本位于同一目录中的 submitcrawler.php。尝试将操作更改为 ../submitcrawler.php，或者将其设置为脚本的绝对 url (http://mydomain.me/submitcrawler.php)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T16:19:52.453

您在发布操作值中使用了相对路径。例如，如果你的爬虫脚本在你的 webroot 中，你应该使用 action="/submitcrawler.php"。如果没有，您可以执行类似 action="/path/to/submitcrawler.php" 的操作

# android - 如何设置系统应用不被禁用？

> ID：11654134
> 
> 赞同：2
> 
> 时间：2012-07-25T16:14:32.293
> 
> 标签：android, system

如何将系统应用程序（我的自定义系统应用程序）设置为不禁用？就像未启用“禁用”按钮的启动器或设置一样。所以用户不能禁用我的系统应用程序。

下面是启动器的效果：

![发射器效果](../Images/8e05842b2eb67c9c38b5608ce9345c6c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:46:10.323

第三方应用程序（如您的应用程序）不可能将自己定义为无法禁用 - 用户能够禁用其系统上的*任何应用程序非常重要。*如果您找到方法，这将被视为安全漏洞，并且可能会在下一个 Android 版本中被禁用 :)

启动器和设置是无法禁用的特殊情况，因为禁用它们会使用户难以/不可能维护自己的设备（或撤销他们的决定，因为他们将无法启动设置活动并重新启用它）。

# c# - 下拉列表上的数据绑定问题

> ID：11654137
> 
> 赞同：0
> 
> 时间：2012-07-25T16:14:42.233
> 
> 标签：c#, asp.net, data-binding, drop-down-menu

我有一个从 Visual Studio 运行并安装在我的机器上时工作正常的页面。但是，一旦我将它安装到我们的服务器上，该页面最初会正常加载，但是当单击该按钮时，它只会返回“未找到 URL”错误。

我已将问题追溯到下拉列表的数据绑定。如果我删除它，该页面在服务器上运行良好。

任何有关在服务器或我的代码中查看内容的建议将不胜感激。

我的 aspx

```
<%@ Page Title="" Language="C#" MasterPageFile="~/Site.Master" AutoEventWireup="true" CodeBehind="SearchLandmarks.aspx.cs" Inherits="TripRequestPortal.SearchLandmarks" %>
<asp:Content ID="Content1" ContentPlaceHolderID="HeadContent" runat="server">
</asp:Content>
<asp:Content ID="Content2" ContentPlaceHolderID="MainContent" runat="server">

    <div>
        <ajaxToolkit:ToolkitScriptManager ID="ToolkitScriptManagerSearchLandmarks" runat="server" />
        <asp:Label ID="lblCustomerNumber" runat="server" Visible="false" />
    </div>

    <div>
        <asp:CheckBox ID="chkBoxDateFrom" runat="server" />
        <asp:Label ID="lblDateFrom" runat="server" Text="Date From: " />
        <asp:TextBox ID="txtDateFrom" runat="server" />
        <asp:Image ID="imageDateFrom" runat="server" ImageUrl="~/Images/calendar_icon.jpg" />
        <ajaxToolkit:CalendarExtender ID="calendarExtenderDateFrom" runat="server" TargetControlID="txtDateFrom" Format="MM/dd/yyyy" PopupButtonID="imageDateFrom" />
        <ajaxToolkit:MaskedEditExtender ID="MaskedEditExtenderDateFrom" runat="server" TargetControlID="txtDateFrom" Mask="99/99/9999" MaskType="Date"/>
        <ajaxToolkit:MaskedEditValidator ID="MaskedEditValidatorDateFrom" runat="server" ControlToValidate="txtDateFrom" ControlExtender="MaskedEditExtenderDateFrom" IsValidEmpty="true" InvalidValueMessage="Inputted date not valid." EmptyValueMessage="Check box is checked so a date is required." />
    </div>

    <div>
        <asp:CheckBox ID="chkBoxOrigin" runat="server" />
        <asp:Label ID="lblOrigin" runat="server" Text="Label" />
        <asp:DropDownList ID="listOrigins" runat="server" DataSourceID="SqlDataSource1" 
            DataTextField="LANDMARKNAME" DataValueField="PRIKEY"  />
    </div>

    <div>
        <asp:Button ID="btnSearch" runat="server" Text="Search" 
            onclick="btnSearch_Click" />
    </div>

    <div>
        <asp:GridView ID="GridView1" runat="server">
        </asp:GridView>
        <asp:SqlDataSource ID="SqlDataSource1" runat="server" 
            ConnectionString="<%$ ConnectionStrings:ConnectionStringTripStatus %>" 
            FilterExpression="customer='{0}'" 
            ProviderName="<%$ ConnectionStrings:ConnectionStringTripStatus.ProviderName %>" 
            SelectCommand="SELECT PRIKEY, CUSTOMER, CONCAT(CONCAT(LANDMARKNAME, ' | '), SITEID) AS LANDMARKNAME FROM LANDMARKS ORDER BY LANDMARKNAME">
            <FilterParameters>
                <asp:ControlParameter ControlID="lblCustomerNumber" DefaultValue="-1" 
                    Name="newparameter" PropertyName="Text" />
            </FilterParameters>
        </asp:SqlDataSource>
    </div>

</asp:Content> 
```

我的代码在后面

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.UI;
using System.Web.UI.WebControls;

namespace TripRequestPortal
{
    public partial class SearchLandmarks : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            lblCustomerNumber.Text = "5";
        }

        protected void btnSearch_Click(object sender, EventArgs e)
        {
            Response.Redirect("TripEntry.aspx");
        }
    }
} 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:32:18.557

> 我已将问题追溯到下拉列表的数据绑定。如果我删除它，该页面在服务器上运行良好。

所以应该没有问题`Response.Redirect("TripEntry.aspx");`

尝试

```
if (!Page.IsPostBack)
{
    lblCustomerNumber.Text = "5";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T12:51:45.267

我们的供应商发现这与主机头有关。他在 IIS 中创建了自己的站点并将应用程序安装到其中，并且运行良好。他开始测试我创建的站点，他发现当他删除主机名时它工作正常。如果他将主机名添加到他创建的站点，它就会停止工作。

我们现在正在调查防火墙和 DNS。

为了进一步扩大...

这是一个防火墙问题。尺寸限制太小。一旦这些被调整，它就开始工作了。

# css - 为什么 Sass 好？

> ID：11654139
> 
> 赞同：6
> 
> 时间：2012-07-25T16:14:46.630
> 
> 标签：css, sass

我仍然不明白 Sass 的真正优势是什么：http: [//sass-lang.com/](http://sass-lang.com/)。你们能帮帮我吗？在哪些情况下使用它比较好，应该如何使用它来利用 CSS？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T16:18:01.577

这是我从 HackerNews 看到的一篇很好的文章，它帮助我了解了这类预处理语言的优势。比较了 SASS 和 LESS，但它提供了一个很好的了解为什么你可能会使用它们。

[http://css-tricks.com/sass-vs-less/](http://css-tricks.com/sass-vs-less/)

# c++ - 静态链接系统库、libc、pthreads，以帮助调试

> ID：11654143
> 
> 赞同：1
> 
> 时间：2012-07-25T16:14:53.463
> 
> 标签：c++, linux, gdb, libc, postmortem-debugging

我试图避免这个 Stackoverflow 条目中描述的情况： [Debugging core files generated on a Customer's box](https://stackoverflow.com/questions/10616417/debugging-core-files-generated-on-a-customers-box)。如果我静态编译所有库，我会避免在核心转储时始终收集共享库吗？我基本上想处于这样一种情况，我可以使用 gdb 加载核心文件并检查崩溃的应用程序。

如果我走静态链接我们需要的所有库的路线，我应该注意什么。我认为 glib 和 pthreads 可能会导致最大的问题。

Valgrind 会不再有用吗？如果我针对所有静态编译的二进制文件加载 Valgrind，它会发现错误吗？或者我们应该维护一个非静态编译的二进制文件，以便 Valgrind 继续工作。strace 怎么样？

我们经常崩溃，因为我们拥有庞大的安装基础，而且它也是一个遗留应用程序。收集所有共享库变得棘手 - 我需要另一个解决方案。

编辑：修正错字。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:32:59.367

> If I compile all the libraries statically will I avoid having to always gather the shared libraries when it core dumps

Yes.

However, contrary to popular belief, statically linked binaries are *less* portable than dynamically linked ones (at least on Linux).

In particular, if you use any of these functions: `gethostbyname`, `gethostbyaddr`, `getpwent`, `getpwnam`, `getpwuid` (and a whole lot more), you will get a warning at link time, similar to this:

```
Using 'getpwuid' in statically linked applications requires at runtime
the shared libraries from the glibc version used for linking. 
```

What this warning means is that *IF* your customer has a different version of glibc installed from the one you used at link time (i.e. different from *your* system libc), *THEN* your program will likely crash. Since that is a clearly worse situation than your current one, I don't believe static linking is a good solution for you.

# objective-c - UITextView 未显示在生成的 PDF 上

> ID：11654144
> 
> 赞同：0
> 
> 时间：2012-07-25T16:15:01.123
> 
> 标签：objective-c, ios, pdf, pdf-generation, uitextview

我正在制作一个应用程序，用户可以在其中加载 pdf 并逐页查看并对其进行注释。用户可以在屏幕上绘制不同的颜色，也可以在屏幕上放置文本字段并放置其文本。

pdf 有一个视图，注释有一个视图。创建的 UITextViews 被添加为注释视图（代码中的绘图视图）的子视图。这些文本视图在应用程序中显示良好，但是当生成 pdf 以包含注释时，文本视图不显示（所有其他注释都显示）。

我试图用它自己的边界和其他视图使用的边界来调用 textView 的 drawRect，但都不起作用。工程视图的唯一子视图是文本视图。

这是我绘制生成pdf的地方：

```
for (int i = 0; i < numPages; i++) {
    UIGraphicsBeginPDFPage();

    //set the current pages of the views to get each page

    [self nextPage];

    [thePDFView drawRect:bounds];
    [theDrawingView drawRect:bounds];
    for(UITextView *txt in [theDrawingView subviews]){
        [txt drawRect:txt.bounds];
    }
}

UIGraphicsEndPDFContext(); 
```

关于如何让文本视图在 pdf 上下文中绘制的任何想法？谢谢

编辑：最初是使用 UITextFields 但我不得不切换到 UITextViews 来解决不同的问题。UITextViews 也不会显示在生成的 pdf 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T01:22:09.447

```
for (int i = 0; i < numPages; i++) {
UIGraphicsBeginPDFPage();

//set the current pages of the views to get each page

[self nextPage];

[thePDFView drawRect:bounds];
[theDrawingView drawRect:bounds];
for(UITextView *txt in [theDrawingView subviews]){
    NSString *textToDraw = txt.text; 
    UIFont *font = txt.font; 
    CGRect renderingRect = txt.frame;

    [textToDraw drawInRect:renderingRect withFont:font lineBreakMode:UILineBreakModeWordWrap alignment:UITextAlignmentLeft];
} 
```

只是为了更好地格式化，这里是使 UITextView 在生成时呈现为 pdf 的代码。此方法似乎适用于呈现任何字符串对象，因此我确信它也适用于 UILabels 或 UITextFields。我使用 UITextiews 是因为它们很容易适应动态高度。

# opengl-es - OpenGL ES 2.0 着色器 - 多边形中的 2D 径向渐变

> ID：11654149
> 
> 赞同：2
> 
> 时间：2012-07-25T16:15:30.750
> 
> 标签：opengl-es, glsl, fragment-shader

我正在尝试在多边形内绘制径向渐变。我的舞台是`600x320`. 我能够绘制渐变，但它“扭曲/拉伸”。目标是像灯光一样产生渐变。

`u_lightPosition`作为**相对值**传递：`{0.5, 0.5}`。
当前未使用的作为**绝对值**`lightPositionAbsolute`传入。 **`{300.0, 160.0}`**

 **我的片段着色器目前看起来像这样：

```
#ifdef GL_ES                            
precision lowp float;                   
#endif                                  
varying vec4 v_fragmentColor;   

uniform vec2 u_lightPosition;
uniform vec2 u_lightPositionAbsolute;
uniform vec4 u_outerColor;
uniform vec4 u_innerColor;
uniform float u_radius;

void main()                             
{
    vec2 resolution = vec2(600,320);
    vec2 position = ( gl_FragCoord.xy / resolution.xy );

    float distanceFromLight = length(position - u_lightPosition);

    gl_FragColor = mix(u_outerColor, u_innerColor, distanceFromLight);
} 
```

使用圆形多边形，这将导致：

![在此处输入图像描述](../Images/4baa3ebf5f6af5e145fbf60650cc2a89.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T16:12:38.350

好的，我找到了解决方案，现在它的工作原理很明显。我使用相对值而不是绝对值，这导致了拉伸。着色器现在看起来像这样：

```
#ifdef GL_ES                            
precision lowp float;                   
#endif                                  
uniform vec2 u_lightPosition;
uniform float u_radius;

void main()                             
{
    float distance  = length( u_lightPosition - gl_FragCoord.xy );
    float intensity = 1.0 - min( distance, u_radius )/u_radius;

    gl_FragColor = vec4(intensity, intensity, intensity, 1.0);
} 
```

编辑：改变了“光”的衰减：

```
#ifdef GL_ES                            
precision lowp float;                   
#endif                                  
uniform vec2 u_lightPosition;
uniform float u_radius;

void main()                             
{
    float distance  = length( u_lightPosition - gl_FragCoord.xy );

    float maxDistance = pow( u_radius, 0.23);
    float quadDistance = pow( distance, 0.23);

    float quadIntensity = 1.0 - min( quadDistance, maxDistance )/maxDistance;

    gl_FragColor = vec4(quadIntensity, quadIntensity, quadIntensity, 1.0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:50:50.250

我相信您的着色器很好，您的问题很可能出在几何体（或顶点着色器）中。

我在 KickJS GLSL 编辑器中创建了一个着色器示例，您可以在其中看到它运行良好：

[http://goo.gl/viDKB](http://goo.gl/viDKB)

您可以在设置下更改网格的类型。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-25T01:52:12.063

您将半径作为浮点数传递，因此 x & y 是相同的，但它们不应该是相同的。

IE。屏幕：1280 x 800，半径 300 = {300.0/1280.0,300.0/800.0 }

```
"float u_radiusX = (100.0/1280.0);\n"+ 
"float u_radiusY = (100.0/800.0);\n"+ 
"float distanceFromLightX  =  length(v_lightPos.x   - v_Pos.x );\n"+
"float distanceFromLightY  =  length(v_lightPos.y   - v_Pos.y );\n"+
"float quadIntensityX = (1.0-min(distanceFromLightX,u_radiusX)/u_radiusX);\n"+  
"float quadIntensityY = (1.0-min(distanceFromLightY,u_radiusY)/u_radiusY);\n"+  
//finally
"float quadIntensity = quadIntensityX*quadIntensityY;\n"+
"gl_FragColor = vec4(color.r*quadIntensity, color.g*quadIntensity, color.b*quadIntensity, 1.0);\n" 
```

我是这样工作的。，其中 v_Pos 是属性位置（不是灯光位置）* 矩阵通过前一个着色器的变量传递。**

# c# - 解析潜在的 ProductId

> ID：11654159
> 
> 赞同：-1
> 
> 时间：2012-07-25T16:15:49.470
> 
> 标签：c#, .net, regex, parsing

我需要能够确定表单上文本字段中的特定文本是否是 ProductId。

我想我可能（遗憾地）需要正则表达式。

无论如何，搜索查询中可能有许多可能的东西，我需要确定该字段内的东西是否可能是 productid。

我们所有的产品 ID 都采用以下格式：

> AA8678NY
> 
> ONO23476
> 
> OPI765.0987

而且似乎没有任何通用格式（数据库中有超过 400、000 个产品 ID）。

所以基本上，我想我想说的是任何产品 id 都可以被认为是`starting with either 1 or more numbers, or letters, followed by either 1 dot or 1 or more numbers or letters, and ending with either 1 or more letters or numbers.`- 有时它只是一堆数字。

*我们可以在没有*正则表达式的情况下实现这样的目标吗？

任何帮助都将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:20:22.010

你可以，但你为什么要？
正则表达式实际上非常简单：

```
[A-Z1-9]+|([A-Z1-9]+\.[A-Z1-9]+) 
```

如果存在已知的最小长度，则替换`+`为`{n,}`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:21:44.630

正则表达式是一种非常简单的方法。我不知道你为什么这么不愿意使用它。这种模式应该适合你：

```
Regex productIDPattern = new Regex(@"[A-Z0-9]+\.*[A-Z0-9]+"); 
```

# javascript - 页面完全呈现时的 js 事件

> ID：11654161
> 
> 赞同：-1
> 
> 时间：2012-07-25T16:16:00.030
> 
> 标签：javascript, html

> **可能重复：**
> [当页面完全呈现时，您如何执行 Javascript 函数？](https://stackoverflow.com/questions/939538/how-do-you-execute-a-javascript-function-when-the-page-has-fully-rendered)

据我所知，onload() 事件可用于在页面完全加载时执行某些操作。是否有类似的事件表明浏览器已完全完成页面渲染？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:18:13.713

该事件称为 DOMReady，但并非在每个浏览器中都可用，因此 jquery 就绪包装器可以提供帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T16:22:29.903

> ...表示浏览器已**完全完成**页面渲染？

（我的重点。）这`load`就是`window`. 是的，它等待所有图像，但您必须等待所有图像“完全完成”呈现页面。

如果你想要更早的东西，当页面没有“完全完成渲染”时，没有任何东西得到很好的跨浏览器支持。通常的建议是将您的脚本放在页面的最底部。然后它可以访问定义在它上面的任何 DOM 元素（例如，所有这些元素）。但我不能保证页面在该点完全*呈现*（绘制在屏幕上），只是 DOM 元素存在并且可以与之交互。（这就是为什么库使用各种技术取决于每个浏览器的工作原理。）

参考：

*   [YUI 网站加速最佳实践](http://developer.yahoo.com/performance/rules.html)
*   [Google 开发人员了解 DOM 何时准备就绪](http://groups.google.com/group/closure-library-discuss/browse_thread/thread/1beecbb5d6afcb41)

# php - 准备好的声明

> ID：11654164
> 
> 赞同：1
> 
> 时间：2012-07-25T16:16:10.060
> 
> 标签：php, mysqli

我是 MySQLi 的新手，但我下面的逻辑似乎很合理。我试图将客户端从一个数据库复制到另一个；但它不工作。这是我正在复制的数据库 -from-：

```
+-------------------+------------------+------+-----+---------+----------------+
| Field             | Type             | Null | Key | Default | Extra          |
+-------------------+------------------+------+-----+---------+----------------+
| id                | int(10) unsigned | NO   | PRI | NULL    | auto_increment |
| client            | varchar(100)     | YES  |     | NULL    |                |
| telephone         | varchar(14)      | YES  |     | NULL    |                |
| physical_address  | text             | YES  |     | NULL    |                |
| email             | varchar(100)     | YES  |     | NULL    |                |
| contact           | varchar(100)     | YES  |     | NULL    |                |
+-------------------+------------------+------+-----+---------+----------------+ 
```

这是我的 PHP 脚本：

```
<?php
    set_time_limit(0);

    date_default_timezone_set('Africa/Johannesburg');
    include('_cli_functions.php');

    echo "Starting conversion...\n";

    $billing_db = new mysqli('localhost', 'root', 'pass', 'billing');
    if ($billing_db->connect_error) {
        die('Billing db connection error');
    }
    else {
        echo "Connected to billing db\n";
    }

    $whmcs_db = new mysqli('localhost', 'root', 'pass', 'whmcs');
    if ($whmcs_db->connect_error) {
        die('WHMCS db connection error');
    }
    else {
        echo "Connected to WHMCS db\n";
    }

    if (!$client_result = $billing_db->query('SELECT id,SUBSTRING_INDEX(contact, " ", 1) AS firstname,
SUBSTRING(contact FROM LOCATE(" ",contact)+1) AS lastname,client,SUBSTRING_INDEX(TRIM(contact_email), ";", 1) AS email, 
physical_address,telephone FROM clients ORDER BY id')
    ) {
        die("Error: " . $billing_db->error);
    }

    if ($client_result->num_rows == 0) {
        echo "No clients to convert\n";
    }
    elseif (!$client_insert_stmt = $whmcs_db->prepare('INSERT INTO tblclients (id,firstname,lastname,companyname,email,address1,country,
phonenumber,password,currency,datecreated) values (?,?,?,?,?,?,"ZA",?,?,1,"' . date('Y-m-d') . '")')
    ) {
        printf("Prepared Statement Error: %s\n", $whmcs->error);
    }

    $client_insert_stmt->bind_param('isssssss', $client_data['id'], $client_data['firstname'], $client_data['lastname'],
                                    $client_data['client'], $client_data['email'], $client_data['physical_address'], $client_data['telephone'], $password);

    $count = 0;
    while ($client_data = $client_result->fetch_assoc()) {
// this is just for debugging
        echo $client_data['id'], $client_data['firstname'], $client_data['lastname'], $client_data['client'], $client_data['email'], $client_data['physical_address'], $client_data['telephone'], $password;
        $password = generatePassword();
        if (!$client_insert_stmt->execute()) {
            die("\n" . $client_insert_stmt->error . "\n");
        }

        $count++;
        show_status($count, $client_result->num_rows);
    }
    $client_insert_stmt->close();
    echo $client_result->num_rows . " clients processed.\n\n";
?> 
```

但是，这是我的输出：

```
Starting conversion...
Connected to billing db
Connected to WHMCS db
1BillyBobCompany inc.a@b.co.za 123 Whatever Avenue(000) 000-0000
Column 'firstname' cannot be null 
```

如您所见，它输出绑定的信息，那么我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:21:06.393

您正在使用`bind_param()`定义. 而是在循环中的语句下弹出该行。`while``$client_data``echo`

# javascript - 嵌套视图的推荐方式是什么？

> ID：11654166
> 
> 赞同：5
> 
> 时间：2012-07-25T16:16:11.560
> 
> 标签：javascript, backbone.js

我想知道嵌套主干视图的推荐方式是什么。

嵌套视图的可能方法：

1.  渲染所有视图并将它们放在路由器中
2.  让 IndexView 做所有在路由器中调用的嵌套
3.  在下划线模板中包含视图

我已经在这个小提琴中尝试了我的运气：http: [//jsfiddle.net/m48Nc/2/](http://jsfiddle.net/m48Nc/2/)

*注释*：我知道该示例不起作用，它只是显示了结构，我目前想通了，但对此并不满意。

那么该走哪条路呢？也欢迎链接；）

**更新：**

使用 fguillen 的答案和我发现我们可以做的另一个线程：

```
var IndexView = Backbone.View.extend({

    tagName: "div",

    className: "container",

    template: LayoutTemplate,

    render: function() {
        this.$el.html(LayoutTemplate);

        this.$('div.content').html(ContentTemplate);
        this.$('div.sidebar').append(new LoginView().render().el);
        this.$('div.sidebar').append(new RegistrationView().render().el);

        return this;
    }

}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:31:13.000

您正在使用模板将非常复杂的元素动态地添加到彼此中。模板旨在动态附加非常简单的 Model.attributes。

我不会为您的 MenuView 使用*模板*。我将 Menu 框架定义为 HTML DOM 中的普通元素，并实例化 MenuView 并将此 DOM 元素分配给`View.el`如下所示：

```
var menuView = new MenuView({ el: "#menu" }); 
```

然后将子视图渲染到 MenuView 中，我将使用 jQuery`append`和`html`更多*操作*jQuery 功能：

```
// code simplified and not tested
var MenuView = Backbone.View.extend({
  render: function(){
    // the this.$el is already rendered

    // list of elements
    this.collection.each( function( model ){
      var modelView = new ModelView({ model: model });
      this.$el.append( modelView.render().el );
    }, this);

    // additional subViews
    var loginView = new LoginView();
    this.$el.find( "div#login" ).html( loginView.render().el );

    // another way to add subViews
    var loginView = new LoginView({ el: this.$el.find( "div#login" ) });
    loginView.render();
  }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T17:17:28.910

查看[http://ricostacruz.com/backbone-patterns/#view_patterns](http://ricostacruz.com/backbone-patterns/#view_patterns)

他们有很好的例子来说明如何根据您的需求构建您的视图。

# haskell - Numeric.AD 函数中的可接受类型

> ID：11654168
> 
> 赞同：5
> 
> 时间：2012-07-25T16:16:19.893
> 
> 标签：haskell, types, automatic-differentiation, constraint-kinds

围绕包装中涉及的类型的基本管道，我几乎没有成功`ad`。例如，以下工作完美：

```
import Numeric.AD

ex :: Num a => [a] -> a
ex [x, y] = x + 2*y

> grad ex [1.0, 1.0]
[1.0, 2.0] 
```

哪里`grad`有类型：

```
grad
  :: (Num a, Traversable f) =>
     (forall (s :: * -> *). Mode s => f (AD s a) -> AD s a)
     -> f a -> f a 
```

`ex`如果我更改to的类型签名`[Double] -> Double`并尝试相同的事情，我会得到

```
Couldn't match expected type `AD s a0' with actual type `Double'
Expected type: f0 (AD s a0) -> AD s a0
  Actual type: [Double] -> Double 
```

当用实例化`Double`的 kind 替换看似任何类型的构造函数时，也会发生相同的行为。 `*``Num`

当`Traversable f`是列表时， 的第一个参数`grad`必须具有`[AD s a] -> AD s a`某些可接受的类型[`Mode`](http://hackage.haskell.org/packages/archive/ad/3.0/doc/html/Numeric-AD-Types.html#t:Mode)- 例如，[`Reverse`](http://hackage.haskell.org/packages/archive/ad/3.0/doc/html/Numeric-AD-Internal-Reverse.html#t:Reverse). 但显然用户`grad`不必处理[`AD`](http://hackage.haskell.org/packages/archive/ad/3.0/doc/html/Numeric-AD-Types.html#t:AD)构造函数或`Mode`直接处理。窥视这些内部结构让我有点困惑。具体来说，我无法按照种类/类型追踪来区分 using`Num a => [a] -> a`和`[Double] -> Double`.

为什么类型签名`[Double] -> Double`会导致问题`grad`？就普通的旧库使用而言：有什么方法可以使用 的`[Double] -> Double`版本`ex`，还是需要多态版本？

（标题受[这个类似问题](https://stackoverflow.com/questions/5938337/numeric-ad-and-typing-problem)的启发）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T18:32:01.790

我不知道这个`ad`库，但是由于`grad`需要一个类型的函数`[AD s a] -> AD s a`作为它的第一个参数，所以你不能期望能够向它传递一个类型的函数`[Double] -> Double`，因为`Double`和`AD`是完全不同的类型。

`Num`具有约束的通用函数有效，因为`AD`它本身也是 的一个实例`Num`，因此在您的工作示例中，`ex`它被专门用于类似的东西

```
ex :: (Mode s, Fractional a) => [AD s a] -> AD s a 
```

如果您想专门`ex`使用 Doubles 进行计算，您需要给它一个签名，例如

```
ex :: Mode s => [AD s Double] -> AD s Double 
```

# c# - C# 从 FileStream 打开 Excel 工作表文件

> ID：11654170
> 
> 赞同：0
> 
> 时间：2012-07-25T16:16:24.570
> 
> 标签：c#, excel

我需要打开一个现有的工作表并使用 OPENXML 工具，对其进行修改，但我似乎没有打开

```
 // Append a new worksheet and associate it with the workbook.
   XmlDocument doc = new XmlDocument();
   doc.Load(new FileStream(sheetfilename + ".xls", FileMode.Open));
   Sheet sheet;
   //? 
```

上面的问题是如何获取 XML 并将其作为工作表打开。

下面是我之前使用 FileStream 做类似事情的另一次尝试，但我得到了错误

```
Cannot convert type System.IO.FileStream to Document.OpenXML.SpreadSheet.Sheet

Sheet sheet = (Sheet)new FileStream(sheetfilename + ".xls",FileMode.Open); 
```

请问我能得到一些帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:32:23.017

如果它是较旧的非 OpenXML 版本的 Excel，您可以使用 NPOI，可在此处下载：

[http://npoi.codeplex.com/](http://npoi.codeplex.com/)

```
HSSFWorkbook workbook;

using (FileStream fs = new FileStream(sheetfilename + ".xls", FileMode.Open, FileAccess.Read))
{
    workbook = new HSSFWorkbook(fs);

    var sheet = workbook.GetSheet("Sheet1");

    ...do something..
} 
```

# parallel-processing - 提前退出线程是否会破坏块中 CUDA 线程之间的同步？

> ID：11654171
> 
> 赞同：3
> 
> 时间：2012-07-25T16:16:25.820
> 
> 标签：parallel-processing, cuda, synchronization

我正在使用 CUDA 实现某种图像处理算法，并且我对整体线程同步问题有一些疑问。

手头的问题可以这样解释：

我们有一个大小为 W*H 的图像。对于图像的每个像素，我需要运行 9 个相同数据的并行进程，每个进程都会给出一个值数组作为结果（整个算法的数组长度相同，比如说 N，大约是 20 或 30 ）。对于每个像素，这 9 个过程在完成计算后会将其结果累积到最终数组（每个像素的单个数组）中。

为了并行化，我设计了以下结构：我生成尺寸为 (10,10,9) 的块，这意味着每个线程块将处理 10*10 大小的子图像，每个线程将处理 9 个中的 1 个单个像素的相同过程。在这种情况下，网格尺寸将为 (W/10,H/10,1)。对于线程块，我将分配一个长度为 100*N 的共享内存数组，每个线程将根据其当前像素的坐标写入适当的共享内存位置。所以，我需要在这里与 atomicAdd 和 __synchthreads() 同步。

这里的问题是，如果一个像素的值为零，那么我们根本不需要处理它，所以我想退出这样的像素，否则我会做不必要的工作，因为图像的很大一部分由零（背景）。所以，我想写如下内容：

```
//X and Y are the coordinates of the current pixel in the input image.
//threadIdx.z gives the index of the process among the 9 for the current pixel. 

int X=blockIdx.x * blockDim.x + threadIdx.x;
int Y=blockIdx.y * blockDim.y + threadIdx.y;
int numOfProcessForTheCurrPixel=threadIdx.z;
int linearIndexOfPixelInBlock=threadIdx.y * blockDim.x + threadIdx.x;

unsigned short pixelValue=tex2D(image,X,Y);
//Here, threads processing zero-pixels will exit immediately.
if(pixelValue==0)
 return;

float resultArray[22];
//Fill the result array according to our algorithm, mostly irrelevant stuff.
ProcessPixel(resultArray,X,Y,numOfProcessForTheCurrPixel);

for(int i=0;i<22;i++)
    atomicAdd(&__sharedMemoryArray[22*linearIndexOfPixelInBlock + i],resultArray[i]);

 __syncthreads(); 
 //Then copy from the shared to the global memory and etc. 
```

在这种情况下让我担心的是编程指南所说的：

> __syncthreads() 允许在条件代码中使用，但前提是条件在整个线程块中的计算结果相同，否则代码执行可能会挂起或产生意外的副作用。

所以在我的例子中，如果一个 10*10 线程块中的一些像素是零并且一些或者不是，那么属于零像素的线程将在开始时立即退出，而其他线程将继续它们的处理。在这种情况下，同步呢，它会继续正常工作还是会像编程指南所说的那样产生未定义的行为？我想过让零像素线程处理垃圾数据以保持它们忙碌，但是如果我们有完全由零组成的块（并且我们经常有它们），这将不必要地增加处理时间。在这种情况下可以做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:14:30.743

为了避免产生死锁，所有线程都需要无条件地访问 _synchthreads()。在您的示例中，您可以通过使用 if 语句替换 return 来做到这一点，该语句跳过函数的大部分并直接针对 _syncthreads() 用于零像素情况。

```
unsigned short pixelValue=tex2D(image,X,Y);
//If there's nothing to compute, jump over all the computation stuff
if(pixelValue!=0)
{

    float resultArray[22];
    //Fill the result array according to our algorithm, mostly irrelevant stuff.
    ProcessPixel(resultArray,X,Y,numOfProcessForTheCurrPixel);

    for(int i=0;i<22;i++)
        atomicAdd(&__sharedMemoryArray[22*linearIndexOfPixelInBlock + i],resultArray[i]);

}

__syncthreads(); 

if (pixelValue != 0)
{
    //Then copy from the shared to the global memory and etc. 
} 
```

# javascript - Raphael js拖拽的解释？

> ID：11654173
> 
> 赞同：2
> 
> 时间：2012-07-25T16:16:31.280
> 
> 标签：javascript, raphael

查看源：http://raphaeljs.com/touches.html

[http://raphaeljs.com/touches.html](http://raphaeljs.com/touches.html)

如果有人解释为什么这个拖放示例有效，我会很高兴。我可以粗略地收集每个功能在做什么，但我无法拼凑为什么当没有任何东西告诉它移动时它会移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:25:48.043

该`move`函数的行为类似于回调，它需要 2 个参数，`dx, dy`. 它们分别代表 delta-X 和 delta-Y。

如果你看到这一行：

```
this.attr({cx: this.ox + dx, cy: this.oy + dy}); 
```

然后你会注意到 ox 和 oy 分别代表 original-X 和 original-Y。

因此，您可以推断出 attr 函数是使用指定原始 X + delta X 和原始 Y + delta Y 的参数调用的。

有道理？

不要与动画调用混淆 - 它们用于在开始/停止时扩展/收缩形状。每次移动鼠标时，`move`都会调用该函数并`attr`更新 。

# java - 有效的Java。可克隆接口

> ID：11654176
> 
> 赞同：1
> 
> 时间：2012-07-25T16:16:45.867
> 
> 标签：java, cloneable, effective-java

我阅读了 Effective Java 书，但不理解解释 Clonable 接口的一段。有人可以解释一下这一段吗：

> ...程序员假设如果他们扩展一个类并 `super.clone`从子类调用，返回的对象将是子类的一个实例。超类可以提供此功能的唯一方法是返回通过调用`super.clone`. 如果一个克隆方法返回一个由构造函数创建的对象，那么它将具有错误的类。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T16:21:24.427

首先我要注意`clone`的是，它本身就被破坏了，并且考虑到合同非常弱，复制构造函数 like`Sheep(Sheep cloneMe)`是一个比 更加优雅的习语。您可能已经知道这一点，因为您正在阅读这本书，但值得将其放在这里。`clone``Cloneable`

无论如何，回答这个问题：

`Object.clone()`将创建一个与调用它的对象相同类型的对象。出于这个原因，强烈建议“级联”到`Object`以获得您计划返回的结果。如果有人决定不遵循这个约定，你最终会得到一个违反约定的类类型的对象，这将导致许多问题。

为了说明我有这样的课

```
class Sheep implements Cloneable {

    Sheep(String name)...

    public Object clone() {
        return new Sheep(this.name); // bad, doesn't cascade up to Object
    }
}

class WoolySheep extends Sheep {

    public Object clone() {
        return super.clone();
    }
} 
```

突然间，如果我这样做

```
WoolySheep dolly = new WoolySheep("Dolly");
WoolySheep clone = (WoolySheep)(dolly.clone()); // error 
```

我会得到一个例外，因为我得到的`dolly.clone()`是 a `Sheep`，而不是 a `WoolySheep`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-31T22:09:20.067

我不同意@corsiKa 的回答。从Java5.0开始。Java 支持协变返回类型，因此，clone() 的正确实现应该是：

```
class Sheep implements Cloneable {

    Sheep(String name)...

    public Sheep clone() {
        return new Sheep(this.name);
    }
}

class WoolySheep extends Sheep {

    public WoolySheep clone() {
        return super.clone(); // compile time error, Type miss match.
    }
} 
```

此外，建议的替代复制构造函数不支持多态性。考虑以下示例（复制构造函数不能这样做）：

```
interface Animal implements Cloneable {
  String whatAreYou()
}

class Cat implements Animal {
  String whatAreYou() {
    return "I am a cat";
  }
  Cat clone() {
    return new Cat();
  }
}

class Dog implements Animal{
  String whatAreYou() {
    return "I am a dog";
  }
  Dog clone() {
    return new Dog();
  }
}

class Lib {
  Animal cloneAnimal(Animal animal) {
    return animal.clone();
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:29:46.407

```
class A {
    protected Object clone() {
        return new A();
    }
}

class B extends A implements Cloneable {
    public Object clone() {
        return super.clone();
    }
} 
```

在这里，`A`有一个无效的实现，`clone`因为这会抛出一个异常：

```
B obj = (B)(new B()).clone(); 
```

相反，`A.clone()`必须调用`super.clone()`而不是构造函数。`Object.clone()`然后将生成一个运行时类型而不是编译时类型的新对象。

然后将任何字段克隆到这个新对象上。如果您已经有一个初始化所有字段的构造函数（如复制构造函数），那么使用构造函数可能很诱人，但这会导致任何子类的行为不正确。

如果类是`final`，那么没关系，因为它不能有任何子类。

# c++ - 如何使用 ioctl() 在 VxWorks 中的套接字上设置 FIONBIO？

> ID：11654182
> 
> 赞同：1
> 
> 时间：2012-07-25T16:17:15.927
> 
> 标签：c++, sockets, vxworks

VxWorks 设置 FIONBIO 的标准方法是使用`ioctl()`，而不是`fcntl()`。FIONBIO 的文档以此为例，显然不会编译，因为`on`没有数据类型：

```
on = TRUE;
status = ioctl (sFd, FIONBIO, &on); 
```

我在网上看到过使用类似这样的东西（本质上是相同的东西）的示例用法：

```
int on = 1;
ioctl(fd, FIONBIO, &on); 
```

但是，文档说原型`ioctl()`是`ioctl(int, int, int)`，我收到有关无法转换`int*`为的错误`int`。如果我将值作为 传递`int`，我只会得到一个致命的内核任务级异常。

这是我当前的代码：

```
int SetBlocking(int sockfd, bool blocking)
{
  int nonblock = !blocking;
  return ioctl(sockfd, FIONBIO, &nonblock);
} 
```

返回错误：

```
error: invalid conversion from `int*' to `int'
initializing argument 3 of `int ioctl(int, int, int)' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:24:56.223

此链接[http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=%2Fcom.ibm.ztpf-ztpfdf.doc_put.cur%2Fgtpc2%2Fcpp_ioctl.html](http://publib.boulder.ibm.com/infocenter/tpfhelp/current/index.jsp?topic=%2Fcom.ibm.ztpf-ztpfdf.doc_put.cur%2Fgtpc2%2Fcpp_ioctl.html)建议

```
 return ioctl(sockfd, FIONBIO, (char*) &nonblock); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:50:53.227

[在这里找到它。](https://groups.google.com/d/msg/comp.os.vxworks/35LLNr2PzhQ/ZT7FGNZN0MUJ)

看起来我只需要投射`int*`to `int`。我不能使用 c 风格的转换，所以我使用了`reinterpret_cast`.

```
int SetBlocking(int sockfd, bool blocking)
{
  int nonblock = !blocking;

  return ioctl(sockfd,
    FIONBIO,
    reinterpret_cast<int>(&nonblock));
} 
```

# c++ - 每次我想在原始类型之间进行转换时，我真的应该使用 static_cast 吗？

> ID：11654185
> 
> 赞同：9
> 
> 时间：2012-07-25T16:17:29.157
> 
> 标签：c++, coding-style, casting, primitive

是什么让这

```
long l = 1;
char c = static_cast<char>(l);

float f = 1.0f;
int i = static_cast<int>(f); 
```

比这更好

```
long l = 1;
char c = (char)l;

float f = 1.0f;
int i = (int)f; 
```

将一种原始数据类型转换为另一种时？

我有很多在类似情况下使用第二种样式进行类型转换的遗留代码，所以这也是一个关于我应该还是不应该对该代码进行全面修订的问题。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-07-25T16:20:41.137

面向未来。

假设将来我这样做：

```
float blah = 1.0f;
float* f = &blah; 
```

现在，`int i = static_cast<int>(f);`停止编译，但`int i = (int)f;`执行`reinterpret_cast`.

`static_cast<int>`这正是*我要你做的*。`(int)`是*尽你所能给我一个 int*。对于后者，编译器会竭尽全力为您获取一个`int`值，而这很少（永远不会？）可取。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-07-25T16:35:18.960

每*一次*都是一个迹象。

您不应该经常在原始类型之间进行转换，以至于每次输入一些额外的字符是一项过于繁重的任务。这有点像抱怨每次进行危险活动时都必须戴头盔。如果您发现戴头盔太烦人，则问题可能是您过于频繁地从事危险活动，而不是头盔要求。

至于解决遗留代码，您可以查看[这个问题](https://stackoverflow.com/questions/5046755/i-use-c-style-casts-in-my-c-project-is-it-worth-refactoring-to-c-casts/5047038#5047038)以获得一些答案（包括我自己的）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-07-25T16:22:33.827

是的你应该。

演员表是错误的主要来源。它们是围绕类型系统的方法，类型系统是程序员可用的最好的错误捕获器之一。

static_cast比旧的 c 样式转换更明显、*更具体。*你想让他们脱颖而出。您希望它们在调试时显而易见。你希望下一个程序员来了解你为什么这样做。

更难键入的事实`static_cast<blah>(foo)`也是一个好处，因为它会鼓励您仅在绝对必要时进行投射。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-07-25T16:36:25.313

构造函数强制转换是一种替代方法。假设定义了一个转换构造函数。例如：

```
int i(0);
float f(3.14F);
i = int(f); 
```

但是，您绝对应该更喜欢`static_cast`其他 C++ 转换而不是 C 样式转换，因为那些基本上说“尝试每次转换，直到某些东西起作用”最终会达到相当于 a`reinterpret_cast`并且可能会给您带来不正确的行为。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T16:19:38.953

C-style casts 的问题是它可能让你做你不想要的转换。

这是您将来应该做的事情，但除非您确实发现问题，否则我不会回去更改它。

# c# - IEnumerable 串起来

> ID：11654190
> 
> 赞同：161
> 
> 时间：2012-07-25T16:17:51.840
> 
> 标签：c#, .net, string, ienumerable

我以前从未偶然发现过这种情况，但现在我发现并很惊讶我找不到一种非常简单的方法将 an 转换`IEnumerable<char>`为`string`.

我能想到的最好的方法是`string str = new string(myEnumerable.ToArray());`，但是，对我来说，这似乎会创建一个新`char[]`的，然后从中创建一个新`string`的，这似乎很昂贵。

我原以为这将是 .NET 框架中内置的通用功能。有没有更简单的方法来做到这一点？

对于那些感兴趣的人，我想使用它的原因是使用 LINQ 过滤字符串：

```
string allowedString = new string(inputString.Where(c => allowedChars.Contains(c)).ToArray()); 
```

* * *

## 回答 #1

> 赞同：170
> 
> 时间：2012-07-25T16:19:34.370

您可以使用[`String.Concat()`](http://msdn.microsoft.com/en-us/library/dd991828.aspx).

```
var allowedString = String.Concat(
    inputString.Where(c => allowedChars.Contains(c))
); 
```

**警告**：这种方法会对性能产生一些影响。 `String.Concat`不是特殊情况下的字符集合，因此它的执行就像每个字符都被转换为字符串，然后按照[文档中的说明](https://msdn.microsoft.com/en-us/library/dd991828.aspx#Anchor_2)进行连接（**[实际上确实如此](http://referencesource.microsoft.com/#mscorlib/system/string.cs,3101)**）。当然，这为您提供了完成此任务的内置方法，但可以做得更好。

我认为框架内没有任何特殊情况`char`的实现，因此您必须实现它。将字符附加到字符串生成器的简单循环很容易创建。

* * *

这是我在开发机器上进行的一些基准测试，看起来差不多。

在 32 位版本构建上，对 300 个字符序列进行 1000000 次迭代：

```
ToArrayString: 00:00:03.1695463
连接：00:00:07.2518054
字符串生成器字符：00:00:03.1335455
字符串生成器字符串：00:00:06.4618266

```

```
static readonly IEnumerable<char> seq = Enumerable.Repeat('a', 300);

static string ToArrayString(IEnumerable<char> charSequence)
{
    return new String(charSequence.ToArray());
}

static string Concat(IEnumerable<char> charSequence)
{
    return String.Concat(charSequence);
}

static string StringBuilderChars(IEnumerable<char> charSequence)
{
    var sb = new StringBuilder();
    foreach (var c in charSequence)
    {
        sb.Append(c);
    }
    return sb.ToString();
}

static string StringBuilderStrings(IEnumerable<char> charSequence)
{
    var sb = new StringBuilder();
    foreach (var c in charSequence)
    {
        sb.Append(c.ToString());
    }
    return sb.ToString();
} 
```

* * *

## 回答 #2

> 赞同：88
> 
> 时间：2013-02-11T12:37:28.853

**针对 .Net Core 2.1 的发布进行了编辑**

重复测试.Net Core 2.1的发布，我得到这样的结果

> “Concat”的 1000000 次迭代耗时 842 毫秒。
> 
> “新字符串”的 1000000 次迭代耗时 1009 毫秒。
> 
> “sb”的 1000000 次迭代耗时 902 毫秒。

简而言之，如果您使用的是 .Net Core 2.1 或更高版本，`Concat`则为王。

有关详细信息，请参阅[MS 博客文章。](https://blogs.msdn.microsoft.com/dotnet/2018/04/18/performance-improvements-in-net-core-2-1)

* * *

我已经将此作为[另一个问题](https://stackoverflow.com/questions/14778840/is-the-string-ctor-the-fastest-way-to-convert-an-ienumerablechar-to-string)的主题，但越来越多，这正在成为这个问题的直接答案。

我已经对 3 种将 a 转换`IEnumerable<char>`为 a的简单方法进行了一些性能测试`string`，这些方法是

> **新字符串**

```
return new string(charSequence.ToArray()); 
```

> **康卡特**

```
return string.Concat(charSequence) 
```

> **字符串生成器**

```
var sb = new StringBuilder();
foreach (var c in charSequence)
{
    sb.Append(c);
}

return sb.ToString(); 
```

在我的测试中，在[链接的问题](https://stackoverflow.com/questions/14778840/is-the-string-ctor-the-fastest-way-to-convert-an-ienumerablechar-to-string)中有详细说明，对于我得到这样的结果的`1000000`迭代，`"Some reasonably small test data"`

> “Concat”的 1000000 次迭代耗时 1597 毫秒。
> 
> “新字符串”的 1000000 次迭代耗时 869 毫秒。
> 
> “StringBuilder”的 1000000 次迭代耗时 748 毫秒。

这向我表明，没有充分的理由使用`string.Concat`此任务。如果您想要简单，请使用**新的字符串**方法，如果想要性能，请使用**StringBuilder**。

我会警告我的断言，实际上所有这些方法都可以正常工作，这可能都是过度优化。

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-07-25T16:19:38.350

从 .NET 4 开始，许多字符串方法将 IEnumerable 作为参数。

```
string.Concat(myEnumerable); 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2014-10-24T04:31:14.653

这是 StringBuilder 答案的更简洁版本：

```
return charSequence.Aggregate(new StringBuilder(), (seed, c) => seed.Append(c)).ToString(); 
```

我使用 Jeff Mercado 使用的相同测试来计时，在相同的 300 个字符序列（32 位发布版本）上进行 1,000,000 次迭代时，这比更明确的要慢 1 秒：

```
static string StringBuilderChars(IEnumerable<char> charSequence)
{
    var sb = new StringBuilder();
    foreach (var c in charSequence)
    {
        sb.Append(c);
    }
    return sb.ToString();
} 
```

因此，如果您是累加器的粉丝，那么您就去吧。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2013-07-03T22:07:07.007

我的数据与 Jodrell 发布的结果相反。首先看看我使用的扩展方法：

```
public static string AsStringConcat(this IEnumerable<char> characters)
{        
    return String.Concat(characters);
}

public static string AsStringNew(this IEnumerable<char> characters)
{
    return new String(characters.ToArray());
}

public static string AsStringSb(this IEnumerable<char> characters)
{
    StringBuilder sb = new StringBuilder();
    foreach (char c in characters)
    {
        sb.Append(c);
    }
    return sb.ToString();
} 
```

* * *

## 我的结果

**和**

*   STRLEN = 31
*   迭代次数 = 1000000

* * *

**输入**

*   `((IEnumerable<char>)RandomString(STRLEN)).Reverse()`

**结果**

*   连续：1x
*   新：3x
*   字符串生成器：3x

* * *

**输入**

*   `((IEnumerable<char>)RandomString(STRLEN)).Take((int)ITERATIONS/2)`

**结果**

*   连续：1x
*   新：7x
*   字符串生成器：7x

* * *

**输入**

*   `((IEnumerable<char>)RandomString(STRLEN))` **（这只是一个向上的）**

**结果**

*   连续：0 毫秒
*   新：2000 毫秒
*   字符串生成器：2000 毫秒
*   向下转换：0 毫秒

* * *

我在面向 .NET Framework 3.5 的 Intel i5 760 上运行它。

* * *

## 回答 #6

> 赞同：10
> 
> 时间：2014-08-21T13:21:22.857

Another possibility is using

```
string.Join("", myEnumerable); 
```

I did not measure the performance.

# html - 只能在 div 中拖动

> ID：11654191
> 
> 赞同：0
> 
> 时间：2012-07-25T16:17:54.443
> 
> 标签：html, draggable

我有这个代码：

```
<div class="project">
  <div class="main">
    Here are many images
  </div>
</div> 
```

div.project的width就是body的宽度，div.main的宽度是里面所有图片的宽度之和，比body宽很多。图像使用 float:left。

我如何使它（使用可拖动或其他东西）可以向右/向左滚动以查看所有图像？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:28:08.577

`overflow: scroll`在您的课程主上使用

您必须有一个名为 window 的外部 div 或围绕您的内容的东西。那个窗口必须有`overflow: hidden`它。然后，您可以使用 jquery 在按下按钮时增加/减少内容 div 的边距以描绘滚动。

# .net - 无法加载程序集（hr = 0x80131018）

> ID：11654193
> 
> 赞同：2
> 
> 时间：2012-07-25T16:17:58.780
> 
> 标签：.net, assemblies, autocad

我有一个用户在将 .Net 程序集加载到 AutoCAD 时遇到问题。我收到以下错误：

> 无法加载程序集。错误详细信息：System.BadImageFormatException：无法加载文件或程序集（hr = 0x80131018）

他们正在使用一个名为 Endpoint Security 的反病毒包，当它被关闭时，加载工作。

我不是 .Net 专家，希望有比我更友好的解决方案，建议用户将他们的防病毒包放入垃圾箱！？但我不知道从哪里开始，任何帮助都会得到很大的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:26:27.320

如果 x86 / AnyCpu 不匹配，可能会发生 System.BadImageFormatException。尝试显式地在**x86**模式下编译您的程序集，看看会发生什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-30T12:13:36.917

在我的情况下，它是带有本机代码的资源 dll，为什么预期 .NET 资源 dll。当我滑对一个 - 一切都会好起来的。

# html-agility-pack - 有些属性值不区分大小写 (input[type]) 有些是 (*[class]) - Html Agility Pack 如何处理它？

> ID：11654197
> 
> 赞同：0
> 
> 时间：2012-07-25T16:18:01.340
> 
> 标签：html-agility-pack

我正在尝试按类型选择元素

```
//input[(@type = 'checkbox' or @type = 'radio') and @name = 'BigBobMcNob'] 
```

但它不匹配，因为我的类型是大写的

```
<input type='Checkbox' name='BigBobMcNob' /> 
```

我该如何解决？如果我这样做会在课堂上选择时中断，哪个应该区分大小写？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:49:19.250

您可以遍历节点集合并根据您的条件检查每个节点，如下所示：

```
var allowedName = "Checkbox";
var allowedTypes = new[] { "checkbox", "radio" };
var nodes = doc.DocumentNode.DescendantNodes()
    .Where(n =>
        n.Name == "input" &&
        allowedTypes.Contains(n.GetAttributeValue("type", null), StringComparer.OrdinalIgnoreCase) &&
        n.GetAttributeValue("type", null) == allowedName
    ).ToList(); 
```

对于`type`属性比较，[`StringComparer.OrdinalIgnoreCase`](http://msdn.microsoft.com/en-us/library/system.stringcomparer.ordinalignorecase.aspx)使用了 comparer；`name`属性不需要特殊的比较器。

# java - 遍历要执行的命令列表-哪种模式？

> ID：11654202
> 
> 赞同：3
> 
> 时间：2012-07-25T16:18:19.123
> 
> 标签：java, design-patterns, strategy-pattern, command-pattern

我编写了一个 Java 程序，它读取包含要执行的命令的文件（使用我自己编写的语言）。命令以字符串形式读入并放入数组中。现在“调度程序”方法将遍历数组，解释命令并调用将作用于它们的相应方法。

这当然会导致一大堆嵌套的 if 语句：

```
if commandReadIn == this, do that... 
if commandReadIn is of type x, get next element,treat next element as argument... 
etc. 
```

现在我只有几个命令，但是如果我想添加数百个呢？代码将变得无法维护。

现在我想知道是否有可能完全摆脱条件逻辑。命令模式在这里似乎没有多大用处，因为无论如何我都必须在某个时候解释字符串..这意味着很多嵌套的“if”。如果不可能，以一种易于添加、编辑或删除命令的方式重组命令及其语法的最佳方法是什么？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-07-25T16:19:18.907

为您的命令使用[命令模式](http://en.wikipedia.org/wiki/Command_pattern)。您的实现可以大大简化。

1) 使用方法创建`Command`接口`execute`。
2）为每个命令创建一个实现。
3）当你启动你的程序时，创建一个命令字符串的映射 -> 命令实现。
4) 当你读入一个字符串时，查找适当的实现并调用它。
5) 可选地，您的`execute`方法可以将自定义`Context`对象作为参数，允许您以通用方式传递命令参数。理解上下文对象并从中检索参数取决于实现。

使用这种方法，您将没有 if 语句，除了可能检查您是否未能从命令实现的缓存中检索任何内容。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:21:31.103

创建一个静态映射，将操作名称映射到其命令执行程序类名称。创建一个工厂类，该类将返回给定操作的命令执行器实例。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:21:32.400

如果您的语言不仅包含关键字序列，还包含一些参数/运算符等，请检查[解释器模式。](http://en.wikipedia.org/wiki/Interpreter_pattern)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-07-25T16:22:05.677

使用[解释器模式](http://en.wikipedia.org/wiki/Interpreter_pattern)怎么样？然后，您需要编写一个解析器，将您的命令更改为解析树。[访问者](http://en.wikipedia.org/wiki/Visitor_pattern)可用于遍历分析树以完成语法检查和执行命令等任务。

# php - 查询不显示来自 MySQL 数据库的所有结果

> ID：11654204
> 
> 赞同：1
> 
> 时间：2012-07-25T16:18:34.850
> 
> 标签：php, mysql

这里有点困惑我的查询出了什么问题。我有大约 9 条记录，并试图从 MySQL 数据库中获取所有这 9 条记录。发生的奇怪事情是只有 2 条记录出来了，我真的不明白发生了什么，因为我的查询似乎没问题。

```
$mQ = "SELECT * FROM group_elective_modules 
        WHERE group_elective_modules.yr = '4' 
        AND 
        group_elective_modules.courseName = 'BSCSHCSSEntrepreneurship' ";
$mR = mysql_query($mQ);
while ($ROW = mysql_fetch_array($mR)) {                                                                 
    echo $ROW['moduleID'] . "&nbsp;&nbsp;". $ROW['yr'] . "<BR />";
} 
```

这是桌子![在此处输入图像描述](../Images/9540f15fe68bb4d9c25d416c8450c8bd.png)

任何帮助将不胜感激，因为我不明白这个查询发生了什么。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:33:08.697

Look if there are spaces in the entries, so you could trim before with TRIM(var) = 'value_without_spaces'

FYI, No need to put "group_elective_modules." appendix in yr and courseName vars

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:52:55.900

不确定这是否重要，但年份是字符串还是数字？也尝试只查询年份，看看结果是否正确。

# android - Android 电话接收器不起作用

> ID：11654208
> 
> 赞同：2
> 
> 时间：2012-07-25T16:18:47.850
> 
> 标签：android, android-intent, broadcast

我想测试处理电话，所以我做了一个小应用程序，它应该在呼入/呼出电话上写一个日志。这是广播接收器：第一个：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class IncomingCallReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    Log.d("DEBUGING", "INCOMING CALL DETECTED !!");

     }
} 
```

第二个：

```
import android.content.BroadcastReceiver;
import android.content.Context;
import android.content.Intent;
import android.util.Log;

public class OutgoingCallReceiver extends BroadcastReceiver {

@Override
public void onReceive(Context context, Intent intent) {

    Log.d("DEBUGING", "OUTGOING CALL DETECTED !!");

     }
} 
```

最后是清单

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.test.callrec"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" />

<uses-permission android:name="android.permission.PROCESS_OUTGOING_CALLS" />
<uses-permission android:name="android.permission.READ_PHONE_STATE" />

<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >
    <receiver android:name=".IncomingCallReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.PHONE_STATE" />
        </intent-filter>
    </receiver>
    <receiver android:name=".OutgoingCallReceiver" >
        <intent-filter>
            <action android:name="android.intent.action.NEW_OUTGOING_CALL" />
        </intent-filter>
    </receiver>
</application> 
```

问题是我的接收者从来没有被叫过....我不知道为什么，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:49:36.787

显然，从 3.1+ 开始，您的接收器只有在用户至少对您的活动进行一次操作后才会开始工作，所以我没有活动的应用程序将无法工作

# node.js - 使用 nodejs 实现长轮询

> ID：11654225
> 
> 赞同：0
> 
> 时间：2012-07-25T16:19:40.340
> 
> 标签：node.js, real-time, long-polling

我实现了类似社交网络的通知，使用带有 nodeJs 的长轮询

数据库，我正在使用 redis 和 cassandra

我在redis中将时间戳保存为“user_read”

每次用户阅读通知时，我都会刷新“user_read”

当数据库收到通知时间戳大于“user_read”时

我会回复用户

我的代码是这样的

```
function(req, res){
longPoll()
function longPoll(){
    async.waterfall([
         connectDB,
         getNotification             
],function(err,data){
    if(there's no notification timestamp larger than user_read){
          setTimeout(longPoll, 1000);
    }else if(there's new data){
          res.json(data);
    }

    if(con)
       con.close();
})
}
}; 
```

这是我的问题：

1.  我在这里使用 setTimeout，是否合适？也许使用 nextTick 或 setInterval？
2.  我应该在每次从数据库查询后关闭连接，还是只在我回复一次时关闭连接？
3.  我想优化，优化建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:28:31.917

这取决于，nextTick 通常更合适，但从不同的角度考虑它，基本上你每秒都在为连接到你的长轮询的每个用户“短轮询”数据库。

因此，即使您的网络服务器由于长轮询而没有获得不必要的轮询（顺便说一句，您是否也有一个空答案的退出条件？）您仍然在短轮询数据库。

# cakephp - 尽管返回数据正确，但在调用 find 时 CakePHP find 命令警告

> ID：11654229
> 
> 赞同：0
> 
> 时间：2012-07-25T16:20:14.803
> 
> 标签：cakephp, controller, cakephp-2.1

我收到以下错误：

警告 (2)：array_keys() 期望参数 1 为数组，给定 null [CORE\Cake\Model\Datasource\DboSource.php，第 2181 行]

警告 (2)：array_filter() 期望参数 1 为数组，给定 null [CORE\Cake\Model\Datasource\DboSource.php，第 2185 行]

警告 (2)：array_values() 期望参数 1 为数组，给定 null [CORE\Cake\Model\Datasource\DboSource.php，第 2185 行]

警告 (2)：array_unique() 期望参数 1 为数组，给定 null [CORE\Cake\Model\Datasource\DboSource.php，第 2264 行]

警告 (2)：array_merge() [function.array-merge]：参数 #2 不是数组 [CORE\Cake\Model\Datasource\DboSource.php，第 1524 行]

运行时：

```
public function pdf($the_id) {
    $searchs = $this->Order->find('all', array('conditions' => array('Order.id' => $the_id, 'Order.user_id' => $this->userDetails['id'])));
    if(empty($searchs)){
        $this->Session->setFlash('The requested order was not found or is not your order', 'error');
        $this->redirect(array('action' => 'yourorders'));
    }

    $this->set('orderpdf', $searchs);
} 
```

有谁知道为什么？

编辑----这是模型；这是一个新模型，所以它很小：

```
class Order extends AppModel {
    public $name = 'Order';
    public $belongsTo = array('User');
    public $hasOne = array('Basket', 'Sage');
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:33:43.067

$this->Order->unBindModel(array('hasOne' => array('Sage'))); 工作。Sage 模型没有可供参考的表格。

# c# - 在 Linux Ubuntu 中开发 C#/ASP.NET 的软件

> ID：11654236
> 
> 赞同：3
> 
> 时间：2012-07-25T16:20:25.443
> 
> 标签：c#, asp.net, linux, visual-studio

有没有用c#/asp.net开发到linux操作系统的软件（类似于visual studio）？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T16:23:01.603

[http://monodevelop.com/](http://monodevelop.com/) -- 用于在 Linux 中使用 ASP.NET MVC 和 C# 开发软件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-22T14:14:48.860

Linux 也有 Visual Studio 代码：[https ://code.visualstudio.com/docs?dv=linux64](https://code.visualstudio.com/docs?dv=linux64)

# c# - 捕获操作后，WebBrowser 在加载中挂起

> ID：11654240
> 
> 赞同：1
> 
> 时间：2012-07-25T16:20:38.503
> 
> 标签：c#, browser

我正在开发使用 WordCaptureX 和 WebBrowser 组件的应用程序。

应用程序处理热键，从屏幕上捕获单词并将 WebBrowser 控件导航到某个 url。期望用户可以从应用程序 WebBrowser 捕获一个单词，但在几次捕获操作后，控件挂在加载状态并且导航方法不起作用。我尝试停止 WebBrowser，甚至将其丢弃并重新创建，但没有任何帮助。

我创建了一个包含主要应用程序操作的演示。

```
public partial class Form1 : Form
{
    private readonly WMonitorX _wMonitor = ComFactory.Instance.NewWMonitorX();
    private readonly WCaptureX _wCapture = ComFactory.Instance.NewWCaptureX();

    private readonly ManualResetEvent _runCaptureEvent = new ManualResetEvent(true);
    private readonly ManualResetEvent _startRetrieveEvent = new ManualResetEvent(false);

    private int _hwnd;
    private int _x;
    private int _y;

    private delegate void Worker();
    private readonly Worker _worker;

    public Form1()
    {
        InitializeComponent();

        _wMonitor.LineColor = 11119017;
        _wMonitor.LineWidth = 10;
        _wMonitor.WEvent += _wMonitor_WEvent;
        _wMonitor.Start((int)W_KEY.wmKeyCtrl, (int)W_MOUSE.wmMouseRight, false);

        webBrowser1.DocumentCompleted += webBrowser1_DocumentCompleted;

        _worker = RunCaptureAndNavigate;
        _worker.BeginInvoke(null, null);
    }

    private void _wMonitor_WEvent(int hwnd, int x1, int y1, int x2, int y2)
    {
        _hwnd = hwnd;
        _x = x1;
        _y = y1;

        _startRetrieveEvent.Set();
    }

    private void webBrowser1_DocumentCompleted(object sender, WebBrowserDocumentCompletedEventArgs e)
    {
        if (e.Url == webBrowser1.Url)
        {
            _runCaptureEvent.Set();
            toolStripStatusLabel1.Text = "Page loaded";
        }
    }

    private void RunCaptureAndNavigate()
    {
        while (true)
        {
            _startRetrieveEvent.WaitOne();
            _runCaptureEvent.WaitOne();

            _runCaptureEvent.Reset();
            _startRetrieveEvent.Reset();

            Invoke((MethodInvoker) ExecuteCapturing);

            Invoke((MethodInvoker) Activate);

            toolStripStatusLabel1.Text = "Page loading";
            webBrowser1.Navigate("google.com");
        }
    }

    private void ExecuteCapturing()
    {
        var input = ComFactory.Instance.NewWInput();
        input.Hwnd = _hwnd;
        input.StartX = _x;
        input.StartY = _y;
        input.Options = (int) W_CAPTURE_OPTIONS.wCaptureOptionsHighlightWords |
                        (int) W_CAPTURE_OPTIONS.wCaptureOptionsUseWindowsWordBreaking;

        var result = _wCapture.Capture(input);

        var text = string.Empty;
        if (result != null && string.IsNullOrEmpty(result.Text))
        {
            text = result.Text;
        }

        textBox1.Text = text;
    }
} 
```

不幸的是，对 WordCaptureX 组件的支持不能帮助我避免浏览器在加载时出现卡顿的情况。

那么可能有人知道如何重新初始化浏览器吗？

# postgresql - 如何将 SQL 查询返回值绑定到 psql 变量？

> ID：11654244
> 
> 赞同：4
> 
> 时间：2012-07-25T16:20:57.593
> 
> 标签：postgresql, psql

背景：我正在为 PL/pgSQL 函数编写我的第一个[pgTAP](http://pgtap.org)测试用例，并从 psql 测试脚本开始。[没问题，但我在psql variables](http://www.postgresql.org/docs/current/static/app-psql.html#APP-PSQL-VARIABLES)上遇到了一点麻烦。

在我的测试脚本中，我首先将相当多的测试数据转储到相关表中，然后使用由序列生成的主键引用数据。我发现能够创建一个包含主键的变量很方便。这就是我要找的：

```
scalasb=> \set the_id (select currval('id_data_id_seq'))
scalasb=> \echo :the_id
54754
scalasb=> 
```

但这就是我得到的：

```
scalasb=> \set the_id (select currval('id_data_id_seq'))
scalasb=> \echo :the_id
(selectcurrval('id_data_id_seq'))
scalasb=> 
```

我有一个解决方法（请参见下面的示例），但看起来 psql 变量不是这项工作的正确工具。或者它们只是我在 Oracle sqlplus[绑定变量](http://www.adp-gmbh.ch/ora/sqlplus/use_vars.html)中使用的不同......

所以我的问题是：如何将 SQL 查询的返回值绑定到 psql 脚本中的变量中？

我正在使用 9.1 开发 linux。

```
-- this is a simplified example to illustrate the problem
begin;

create table id_data(id serial primary key, data text not null);

create or replace function get_text(p_id bigint)
returns text
as $$
declare
  v_data constant text := data from id_data where id = p_id;
begin
  return v_data;
end;
$$ language plpgsql;

insert into id_data(data) values('lorem ipsum');

-- this works correctly but is a rather verbose (especially when one have
-- more of these, in the same query/function)
select get_text((select currval('id_data_id_seq')));

-- instead I'd like to set the id to a variable and use that but this
-- seems to be impossible with psql, right ?
\set the_id (select currval('id_data_id_seq'))
\echo First try: :the_id
--select get_text(:the_id); -- this will fail

-- this works and reveals psql variables' true nature - they are just a
-- textual replacements
\set the_id '(select currval(\'id_data_id_seq\'))'
\echo Second try: :the_id
select get_text(:the_id);

rollback; 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T16:47:27.453

恐怕你不能这样做 - 我为 psql 写了一些补丁，但它不在核心中

您可以使用解决方法：

```
postgres=# \set myvar `psql -A -t -c "select version()" postgres `
postgres=# \echo :myvar
PostgreSQL 9.1.4 on x86_64-unknown-linux-gnu, compiled by gcc (GCC) 4.7.0 20120507 (Red Hat 4.7.0-5), 64-bit 
```

# process - 如何在 Ubuntu 中杀死一个进程，知道用于启动它的部分命令？

> ID：11654245
> 
> 赞同：0
> 
> 时间：2012-07-25T16:21:01.307
> 
> 标签：process

基本上，如果我使用命令“./process arg1 arg2 89sudfjKSDf”启动一个进程并且知道“89sudfjKSDf”是命令的一部分，我如何才能杀死所有在其命令名称中包含“89sudfjKSDf”的进程？到目前为止，它一直在“ps aux”中查找它并找到该标识符，但现在我想在脚本中自动化它。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:36:15.683

在 bash 脚本中尝试以下操作

```
#!\bin\bash
ps -ef | grep '89sudfjKSDf' | awk '{print $2}' | xargs kill -9 
```

# wordpress - Wordpress - 使搜索仅搜索特定页面的子项

> ID：11654249
> 
> 赞同：1
> 
> 时间：2012-07-25T16:21:11.983
> 
> 标签：wordpress, search, plugins

我的网站上有一个 Wiki 部分，我想修改 WordPress 的本地搜索，使其仅搜索此 Wiki 中的页面，或者换句话说，仅搜索第 278 页的子页面。我已经成功地列出了带有 wp_list_pages 和参数“child_of”的给定页面的子页面，所以我一直在尝试类似的东西。到目前为止的两次尝试：在搜索页面中......

```
<?php if ( have_posts(array('child_of'=>278)) ) : ?>
...
<?php while ( have_posts(array('child_of'=>278)) ) : the_post(array('child_of'=>278)) ?> 
```

或者在我的函数文件中......

```
function SearchWikiPages($query) {
    if ($query->is_search) {
        $query->query_vars['child_of']=278;
    }
    return $query;
}
add_filter('pre_get_posts','SearchWikiPages'); 
```

到目前为止没有运气。如果有人知道我该怎么做，请帮忙。如果插件能满足我的需要，我不会反对使用插件或任何其他创造性的解决方案。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T11:40:56.047

你的方法应该有效；问题似乎与使用`child_of`. 我不认为这是一个参数可以理解（在[Codex](http://codex.wordpress.org/Class_Reference/WP_Query#Post_.26_Page_Parameters)`WP_Query`中没有提到）。

更换

```
$query->query_vars['child_of']=278; 
```

和

```
$query->set('post_parent', 278); 
```

为我工作。

# javascript - 覆盖 HTML CSS 元素

> ID：11654250
> 
> 赞同：1
> 
> 时间：2012-07-25T16:21:12.360
> 
> 标签：javascript, jquery, html, css, photoswipe

我最近在我的网站上添加了一个 Photoswipe 画廊，其中应用了以下 CSS：

```
html {overflow-y:scroll;overflow-x:auto;} 
```

现在的问题是由于此溢出而导致全屏画廊滚动，但它应该紧贴显示它的屏幕，没有滚动。我不想使用 jQuery 删除它，因为我在此页面上遇到了 jQuery 问题。

我试过：

```
<style type="text/css">
html {}
</style> 
```

没有运气。我还能做些什么来删除它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:22:34.177

你可以试试这个，例如：

```
<style type="text/css">
html 
{
overflow-y:auto !important;
overflow-x:auto !important;
}
</style> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-22T02:24:36.103

您的 css 代码片段不会将插件的样式归零，它只是声明了一个没有任何样式的新规则，您需要将溢出值显式设置为

```
<style type="text/css">
    html { 
       overflow-x:auto; 
       overflow-y:auto; 
    }
</style> 
```

只要这段代码出现在问题代码之后，级联应该覆盖第一个样式， !important 不需要（或一个好的做法）。

此外，您可能希望使用不同的溢出值，因为我不确定您的插件是如何工作的。可能的值是可见、隐藏、滚动、自动、继承

参考：[https ://developer.mozilla.org/en-US/docs/CSS/overflow](https://developer.mozilla.org/en-US/docs/CSS/overflow)

# java - 检查更新节点树的最佳/最快方法，不包括某些属性

> ID：11654253
> 
> 赞同：0
> 
> 时间：2012-07-25T16:21:15.697
> 
> 标签：java, jackrabbit, jcr

我有一个文档，在 Jackrabbit 中表示为节点树。

保存文档时，我想首先检查某些属性是否已更改。最好/最快的方法是什么？我想要最快的，但不以丑为代价！

背景...

简而言之，我有这个节点的副本，我想知道主节点何时更新，以便我可以更新副本。最初，我只是跟踪运行良好的版本号。现在需要仅在某些属性发生更改时才更新副本。我的想法是，在设置每个属性时，首先检查现有值与新值是否已更改。我必须对所有受影响的属性执行此操作。如果任何节点属性或子属性已更改，我将增加一个数字以显示它已更新。

那里有更好的想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-10T14:56:12.280

好吧，我最终按照我的想法做了。而且表现似乎还不错。

很快就修改了我现有的代码，因为我已经有一个用于获取/设置的实用程序类。如果属性已更改，我只是修改了 setter 以返回 true。

# ruby-on-rails - 使视频不可下载 - 但向用户播放

> ID：11654265
> 
> 赞同：0
> 
> 时间：2012-07-25T16:21:47.627
> 
> 标签：ruby-on-rails, ruby-on-rails-3, video, gem, html5-video

我们正在考虑使用[JWPlayer](http://www.longtailvideo.com/support/jw-player/jw-player-for-flash-v5)向用户显示视频。但是我们不希望用户查看 html 源代码并抓取视频的 url，然后通过他们的浏览器下载该视频。有没有办法隐藏 url 或阻止使用 rails 或其他方法下载文件（但仍然能够通过播放器向用户播放视频）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:24:01.247

您永远无法阻止您的用户下载视频，毕竟必须下载**它**才能将其显示给用户。

你只能让用户更难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:24:45.830

我相信 JWPlayer 支持流媒体，如果你设置了流媒体服务器，用户将无法只下载视频。

编辑：用户将无法仅将文件下载为下载链接，但这会更加困难。

# amazon-s3 - 无法通过 ssh 进入亚马逊 ec2 上创建的 AMI

> ID：11654266
> 
> 赞同：0
> 
> 时间：2012-07-25T16:21:50.683
> 
> 标签：amazon-s3, amazon-ec2, cloud, vmware

我使用以下命令从 VMWare vmdk 创建了 CentOS 6 AMI：

```
$ec2-bundle-image -i CentOS_6.vmdk -r x86_64 -k ~/.ec2/pk.pem -c ~/.ec2/cert.pem --user <user_id>  
$ec2-upload-bundle -b <bucket_name> -m /tmp/CentOS_6.vmdk.manifest.xml -a <access_id> -s <secret_key>  
$ec2-register <bucket_name>/CentOS_6.vmdk.manifest.xml 
```

我在使用 m1.large 存储创建后启动了一个实例。我面临以下问题：

1.  实例状态检查失败。
2.  无法通过 ssh 进入实例。

有什么想法我哪里出错了吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:25:27.070

尝试 ping 您的实例，如果有回复，则尝试 ssh -i key.pem ec2-user@public-DNS-of-ec2-instance。确保您位于下载 ssh 密钥的正确文件夹中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T04:41:17.463

您是否在运行实例的安全组（即防火墙）中打开了端口 22？

* * *

## 回答 #3

> 赞同：-4
> 
> 时间：2012-07-25T16:38:23.690

AWS 文档通常有您正在寻找的答案。

如需完整的文档列表，请访问：

```
http://aws.amazon.com/documentation 
```

具体指南：

```
EC2 : http://aws.amazon.com/documentation/ec2
VPC: http://aws.amazon.com/documentation/vpc
S3: http://aws.amazon.com/documentation/s3/`enter code here` 
```

# asp.net-mvc-3 - 在 mvc3 中将 int 转换为 datetime

> ID：11654268
> 
> 赞同：0
> 
> 时间：2012-07-25T16:22:04.430
> 
> 标签：asp.net-mvc-3, datetime, datepicker

在我的模型课上，我有 `public DateTime GoalDate { get; set; }`

在我看来我有

```
 @Html.TextBoxFor(model => model.weightGoalDate 
```

在我的控制器中，我有

```
 var newGoal = new Goal();

            newGoal.bpGoalDate = DateTime.Now ; 
```

我想要的是将目标日期设置为当前日期后 1 周，并在页面加载时显示在文本框中。

例如，当我加载页面时，日期将自动设置为 2012 年 8 月 1 日，因为今天是 2012 年 7 月 25 日

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:26:35.987

使用[`AddDays`](http://msdn.microsoft.com/en-us/library/system.datetime.adddays.aspx)方法

```
public ActionResult SomeAction()
{
  var newGoal=new Goal();
  newGload.GoalDate =DateTime.Now.AddDays(7);
  return View(newGoal);  
} 
```

来自msdn，

> 返回一个新的 DateTime，它将指定的天数添加到此实例的值中。

# file - .bat 文件将文件分类到文件夹中

> ID：11654270
> 
> 赞同：0
> 
> 时间：2012-07-25T16:22:11.387
> 
> 标签：file, sorting, batch-file, directory, dos

对于我的图片集，我希望文件夹中的所有图片按日期自动分类到文件夹中。幸运的是，这些文件已经以时间戳命名：

*   2012-07-15 12.21.06.jpg
*   2012-07-15 12.21.26.jpg
*   2012-07-16 17.12.50.jpg

在此示例中，前两个文件应最终位于文件夹 2012-07-15 中，第三个文件应位于 2012-07-16 文件夹中。我已经尝试并用谷歌搜索，我能找到的是：

```
for %%a in (*.jpg) do (
    md "%%~na" 2>nul
    move "%%a" "%%~na"
) 
```

但这会为每个文件名创建一个文件夹。我想有一个具有前十个字符的变量，但对变量声明和在 dos 中的使用感到完全困惑和沮丧。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T19:02:33.820

这是另一种使用延迟扩展和子字符串来执行此操作的可能性：

```
SETLOCAL ENABLEDELAYEDEXPANSION
for %%a in (*.jpg) do (
    set f=%%a
    set g=!f:~0,10!
    md "!g!" 2>nul
    move "%%a" "!g!"
) 
```

第一行启用了使用`!`代替的语法，`%`并且具有解释变量值的效果，而不是在执行块的第一行时（标准批处理行为），而仅在执行该行本身时。

`!f:~0,10!`是获取子字符串的语法 - 您所追求的日期总是 10 个字符长。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:30:30.773

使用`dir`命令的输出，以便您可以在空格处拆分文件名

```
for /f "tokens=1* delims= " %%a in ('dir /b *.jpg') do (
    md %%a 2>nul
    move "%%a %%b" %%a
) 
```

尝试澄清 for 语句： for
中`/f`的 for 允许我们处理`dir`命令的输出。
告诉dos我们希望将`tokens=1*`空格之前的第一部分放入**%%a**，并将文件名的其余部分放入**%%b** *（您可以使用其他选项作为标记，它会将这些部分放入后续字母中，向上最多 26*个部分）我们希望空间作为部分之间的分隔符
的状态。`delims=`

因此，对于第一个列表， 当我们这样做时，`2012-07-15 12.21.06.jpg`它会放入`2012-07-15`%% **a**和**%%b**`12.21.06.jpg`中，我们必须将空间放回原处，因为它在被分割成部分时被剥离，所以我们必须使用的**`move``%%a %%b``%%a%%b`**

# javascript - “未定义”是假的还是什么都没有？

> ID：11654275
> 
> 赞同：0
> 
> 时间：2012-07-25T16:22:23.153
> 
> 标签：javascript, boolean-logic

这让我很生气：如果我不这样做：

```
var a; 
```

然后这样做：

```
if(a){
    // doing stuff
} 
```

它吐出这个错误：

```
ReferenceError: a is not defined 
```

那么如何检查变量是否已定义！

请不要告诉我使用`typeof`.

编辑：

`a`有时由库定义。我想检查库是否定义了它，如果没有定义它，我仍然可以在我的代码中使用它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:24:29.537

检查未定义但不抛出 ReferneceError ，如下所示：

```
if (typeof window.a == "undefined") {
    // do something
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:29:25.210

如果要确保`a`已声明，并且不会导致任何引用错误问题。您可以添加重新声明声明。

```
var a = a; 
```

在这种情况下，如果定义了 a，则没有任何变化，否则它是未定义的。

注意：这仅`a`在全局范围内有效，请查看评论以获取更多详细信息。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:32:50.413

这有什么问题

```
if(typeof a!='undefined')
{
    // a is defined
}
else
{
    // a is not defined
} 
```

**更新：**或者你可以使用

```
if(a==void 0) // undefined 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:51:39.047

或者，你可以试试这个：

```
if( !window.hasOwnProperty('a') ){    
    window.a = 'some definition here';
} 
```

# gcc - 在哪里可以找到包含 printf 函数定义的目标文件？

> ID：11654281
> 
> 赞同：5
> 
> 时间：2012-07-25T16:22:32.587
> 
> 标签：gcc, printf, object-files

我正在使用 gcc 编译器和 ubuntu 12.04 操作系统。我想知道在哪里可以找到目标文件以及在哪个目录下，其中包含 printf 函数的定义。同样，我不是在寻找包含原型的头文件，而是在寻找包含实际定义的目标文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:35:09.697

您是在寻找目标文件还是源文件？

.o 目标文件存储在库中，`libc.so`. 在大多数 Linux 发行版上，此文件位于`/lib/libc.so`. 在 Ubuntu 11 和 12 上，作为[multiarch support](https://wiki.ubuntu.com/MultiarchSpec#Filesystem_layout)的一部分，/lib 的内容已移至`/lib/i386-linux-gnu`和`/lib/x86_64-linux-gnu`。

您可以使用`ar`(archive) 命令获取单个目标文件，该命令用于使用`x`(extract) 选项创建库：

```
ar x libc.a stdio.o 
```

不过，这似乎不是很有用，所以我猜您实际上想要的是源文件而不是目标文件。为此，您将安装[glibc 包](https://launchpad.net/glibc)，其中包含 printf.c（它调用 vprintf，它调用 vfprintf，其中包含 printf 的实际代码）。

可以[在 Launchpad 上浏览](http://bazaar.launchpad.net/~vcs-imports/glibc/master/view/head:/stdio-common/vfprintf.c)此源。它非常复杂，代码超过 2000 行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T12:43:58.330

我找到了我前两个问题的确切答案-

1.  要列出 libc 中存在的所有目标文件，我们使用以下命令：

    x86_64 系统：$ ar -t /usr/lib/x86_64-linux-gnu/libc.a

    i386 系统：$ ar -t /usr/lib/i386-linux-gnu/libc.a

2.  要找出哪个目标文件包含 printf 函数，请在 /usr/lib/x86_64-linux-gnu /usr/lib/i386-linux-gnu 或目录下运行此命令：

    $ nm -o libc.a | grep -w printf

3.  仍在努力寻找正确的答案。

# networking - 从具有代理的以太网互联网创建没有代理身份验证的热点

> ID：11654287
> 
> 赞同：2
> 
> 时间：2012-07-25T16:22:44.067
> 
> 标签：networking, android-wifi, internet-connection, proxy-server

我需要在我的笔记本电脑中创建一个 wifi 热点，它不需要由无线客户端（Android 手机）配置的代理。我拥有的是一个 ehternet 连接，通过它可以使用带有身份验证的 http 代理访问互联网。有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T04:47:39.033

我一直在寻找这样的解决方案。到目前为止，我的解决方案是这样的：

> 我通过以太网有一个基于身份验证的代理互联网。我想要做的是通过（未经身份验证的）开放代理共享这个互联网。因此，我在笔记本电脑上安装了 CCproxy 软件并创建了一个 wifi 接入点（android 不支持 adhoc）共享我的以太网互联网。现在，在 CCproxy 中，我转到选项 > 高级 > 级联并选中启用级联代理。现在，在这里我设置了我经过身份验证的代理互联网详细信息。因此，CCproxy 本质上是在使用我的代理互联网并创建另一个代理服务器来分发该互联网。在帐户设置中，我做了“全部允许”，所以这是一个开放代理，不需要身份验证。CCproxy 在某个 IP 和某个端口创建一个代理服务器来处理所有请求。因此，如果您现在进入浏览器并输入此 IP 和端口，它将通过 ccproxy 转发，您不需要身份验证。到目前为止，我基本上所做的是将基于身份验证的代理转换为开放代理。

我为什么这样做？B'coz，在 android 市场“HTTP 代理设置”中有一个应用程序，如果它是非身份验证（开放）代理，它工作得非常好。它为市场、浏览器、游戏、各种应用程序等所有主要服务提供此设置。请注意，在我的 android 代理设置应用程序中，我必须提供在 CCproxy 中设置的代理服务器地址和端口号。

现在，如果您绝对想要创建基于非代理的 Internet 共享。这也是可能的。可以通过创建**透明代理**服务器来完成。该过程应与设置代理服务器相同。但 CCproxy 做不到。因此，您必须为此寻找一些其他软件（Squid 实际上可以做到这一点）。

# objective-c - 与 iO 进行短距离通信的 API 在哪里？

> ID：11654302
> 
> 赞同：0
> 
> 时间：2012-07-25T16:23:59.670
> 
> 标签：objective-c, xcode, api, bluetooth, dock

我想开发一个 IOS 程序，它可以与互联网通信，也可以与附近的东西通信。基本上我们想通知 iPhone 即将到来的车牌号码。

我了解 iPhone 如何与互联网通信。但是，如果我们想要附近的更快通信呢？

我知道有这个“码头”。然后是wifi，然后是近场通信和蓝牙。

要与网络通信，我们只需要使用 [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/nsurlconnection_Class/Reference/Reference.html)

如果我们想使用更近的通信怎么办？

我们应该使用什么类？

注意：我听说 iPhone 关闭了他们的 Dock API，除非是特殊的外设工厂。只要我们有 API，购买额外的 periperhal 就可以了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:39:10.613

您是否正在寻找像 Bonjour 这样的技术？

[https://developer.apple.com/bonjour/](https://developer.apple.com/bonjour/)

我相信 Bonjour 适用于蓝牙和共享路由器中的 wifi。

# python - 使用 timeit 为不同的测试语句只运行一次设置代码

> ID：11654307
> 
> 赞同：2
> 
> 时间：2012-07-25T16:24:11.807
> 
> 标签：python, profiling, timeit

使用`timeit`，我有一个`setup`代码块，它设置了一个填充有虚拟数据的数据结构，并且我有两个语句（比如`test1`和`test2`），它们以不同的方式从这个数据结构中检索数据。

当我做

```
t = timeit.Timer(test1, setup)
print t.timeit(3000)
t = timeit.Timer(test2, setup)
print t.timeit(3000) 
```

我注意到设置运行了两次，每次测试一次。是否可以使两个测试共享相同的设置，即只运行`setup`一次代码块并使用为两个测试创建的完全相同的数据结构？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:28:13.627

实现这一点的最简单方法是将设置代码放入模块`setup.py`中，然后使用

```
"from setup import name_1, name_2, name_3" 
```

作为`setup`参数`timeit.timeit()`。（请注意，在这种情况下，通配符导入将无法正常工作。）

如果您不想使用单独的模块，请将代码放在主模块中并使用

```
"from __main__ import name_1, name_2, name_3" 
```

# flash - 将 swf 和 jpg 文件合并到 fla 文件中

> ID：11654309
> 
> 赞同：0
> 
> 时间：2012-07-25T16:24:16.473
> 
> 标签：flash, flash-cs5

我被要求从图像和现有 swf 文件的组合中创建一个 SWF 文件。

我没有任何问题将图像放入带有运动/经典补间的时间线，以将它们全部放入一个漂亮流畅的视频中。但是，虽然我已经能够将 swf 文件导入到库中，但我似乎无法将它们添加到时间轴中！！

我必须在动作脚本中工作还是有一种简单的方法来拖动视频 - 每个视频持续大约 10 秒。

非常感谢任何帮助或指导。

谢谢！京东

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T20:18:03.413

可能有一种使用 Flash 的方法，但任何其他电影编辑器对你来说都会更好，对吗？

# model-view-controller - 这是使用 MVC 模式和 Express.js 的好方法吗？

> ID：11654310
> 
> 赞同：2
> 
> 时间：2012-07-25T16:24:18.677
> 
> 标签：model-view-controller, node.js, express

我想就这是否是使用 Node.js 和 Express.js 实现/增强 MVC 模式的好方法提出意见/建议

1）我正常初始化应用程序，但在这个阶段我调用了一个我命名的函数`routeRegistrar`，如下：

```
var 
    express = require('express'),
    routeRegistrar = require('./routeRegistrar'),

var app = express.createServer();

configureApp(app);
routeRegistrar(app); //note this line

app.listen(3000, function(){
  console.log("App started");
});

function configureApp(app){
    app.configure(function(){
        //configuration stuff with app variable
    });
} 
```

2）我采用的约定是每个控制器都将放置在一个名为 的目录`Controllers`中，并且每个控制器都由一个包含一个或多个动作的模块构成，`exports`按照上述约定作为对象推送到变量：

```
{ method: 'GET', url: '/example', action: function(req, res){  } } 
```

因此，通过这种方式，我可以自动化路由注册过程，并使方法/url 靠近处理请求的代码（我认为它更易于阅读/维护）。所以代码`routeRegistrar`如下：

```
var fs = require('fs');

module.exports = function(app){
    fs.readdirSync(__dirname + '/controllers').forEach(function(controllerName){
        var controller = require("./controllers/" + controllerName);

        for (var actionName in controller) {
            var action = controller[actionName];
            app[action.method](action.url, action.action);
        }
    });
} 
```

简单的 indexController 看起来像这样：

```
exports.index = {
    url: "/",
    method: "get",
    action: function(req, res){
      res.render('index');
    }
} 
```

恕我直言，我相信每次我想要注册一个新的控制器/路由时，这是一个更好的方法，我必须

1- 打开 app.js 2- 在顶部放置另一个要求行 3- 编写类似的代码`app.get('/index', indexController.index);`

请让我知道这是否是继续项目的好方法，我想听听您的意见和建议。

**编辑：** 基于 Tyrsius 的回答和缺乏其他意见，我将使用他的方法进行一些修改：

routeRegistrar.js

```
var fs = require('fs');

module.exports = function(app){
fs.readdirSync(__dirname + '/controllers').forEach(function(controllerName){
    var controller = require("./controllers/" + controllerName);

    for (var actionName in controller) {
            controller[actionName](app);
        }
    });
}; 
```

indexController.js

```
module.exports.index = function(app){
    app.get("/", function(req, res){
        res.send("New approach!");
    });
}; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:30:36.157

这不是一个糟糕的解决方案，但我认为为路由创建自己的语法会令人困惑。从长远来看，能够使用与 Node/Express 相同的路由语法将对您有所帮助。当你去一个新项目时，你不会不熟悉它，并且你将能够寻求帮助，因为你将使用其他人都使用的语法。

我使用类似的解决方案，它看起来像这样。它会在启动时抓取目录中的每个 .js 文件`/routes`，因此您可以添加控制器而无需更改任何代码。

在 app.js 中

```
// Routes
require('./routes')(app); 
```

路线/index.js

```
var fs = require('fs');

module.exports = function(app){

    //GET home page
    app.get('/', function(req, res){        
        res.render('index');
    });

    //Load other controllers/routes
    fs.readdirSync(__dirname).forEach(function(file) {
        if (file == "index.js") return;
        //var name = file.substr(0, file.indexOf('.'));
        require(__dirname + '/' + file)(app);
    });
}; 
```

示例路由/控制器：

```
module.exports = function(app){

   app.post('/login', function(req, res){
        //stuff
    });

    //other actions on this route
}; 
```

# javascript - js 初学者 - 如何获取网页中选定内容的 html 以及整个节点层次结构以供选择

> ID：11654311
> 
> 赞同：1
> 
> 时间：2012-07-25T16:24:22.100
> 
> 标签：javascript, jquery, rangy

在[http://rangy.googlecode.com/svn/trunk/demos/core.html](http://rangy.googlecode.com/svn/trunk/demos/core.html)有一个演示，展示了如何获取用户选择的内容的 HTML。

但是，我还想获得节点的整个结构，从顶级节点到所选内容所属的节点。我如何获得这个节点结构？例如，请看下面的示例内容

```
<div id="toplevelnotselectedbyuser">

<p id="thispisselectedbyuser">
This text is not selected by the user...
Some sample text that has been selected by user...
Some more text that has not been selected by the user.
</p>
</div> 
```

现在，如果用户只选择内容“用户选择的一些示例文本......”并且如果使用我给出的上述示例（使用“rangy”库），那么只有文本“一些示例文本已被用户选择...”显示为该库选择的 HTML——我还想要 div 和 p 的信息...我该怎么做？我更喜欢 jquery，但纯 javascript 或任何其他库对我来说也可以...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T02:41:24.980

我不认为浏览器会根据 DOM 来考虑文本范围。如果这很容易，那么范围广泛的工具可能会提供该信息。您可能不得不破解它，也许通过挂钩 mouseup 事件来确定选择结束时范围内的父元素。

我认为这将是一项昂贵的操作，但在 jQuery 中类似于

```
$(document).on('mouseup','*',function(e) {
  console.log($(this));
  return false;
});​ 
```

...在这种情况下， $(this) 将是用户停止选择的 DOM 元素。`document`我会通过使用适当的选择器而不是上面的来尽可能地限制范围。

这是一个 jsFiddle 玩它（打开控制台运行以查看结果）：http: [//jsfiddle.net/8uzgt/2/](http://jsfiddle.net/8uzgt/2/)

# html - 如何使用 ruby 代码填充 html 表？

> ID：11654316
> 
> 赞同：0
> 
> 时间：2012-07-25T16:24:33.640
> 
> 标签：html, ruby, html-table

我对 Ruby 编程真的很陌生，并且正在尝试学习它。我被分配的“任务”之一真的让我很难过。我需要制作一个有 2 列的表格。第一列将有一个从 1 到 100 的数字列表，第二列将根据我的代码打印出结果。

我的红宝石代码如下所示：

```
 (1..100).each do |i|
  d3 = (i % 3 == 0) 
  d5 = (i % 5 == 0)

  i = "_#{i}_" if d5
  i = "*#{i}*" if d3

  puts i if d5 || d3
end 
```

我如何将它放在 HTML 表格中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:54:42.790

我不确定您是否使用 rails，但您需要确保使用 erb[这可能会有所帮助](http://www.stuartellis.eu/articles/erb/)。但是这样的事情应该可以解决问题：

```
 <table>
    <%  (1..100).each_with_index do |n| 
      d3 = (i % 3 == 0) 
      d5 = (i % 5 == 0)

      i = "_#{i}_" if d5
      i = "*#{i}*" if d3 %>

      <tr>
       <td><%= n %></td>
       <td><%= i if d5 || d3 %>
    <% end %>
    <table> 
```

# android - 如何将值设置为 Spinner

> ID：11654323
> 
> 赞同：0
> 
> 时间：2012-07-25T16:24:47.347
> 
> 标签：android, android-layout, android-widget

当我选择`Spinner`文本时，`Dialog box`会出现其中有`EditText`.I want to `Display`that `EditText`string to 的`Spinner`。

代码

```
private void Showdialog() { 
  myDialog = new Dialog(this.context); 
  myDialog.setContentView(R.layout.mydialog); 
  myDialog.setTitle("hh"); 
  myDialog.setCancelable(true);
  editText=(EditText)findViewById(R.id.editText1); 
  Button button = (Button) myDialog.findViewById(R.id.but); 
  // EditText editText=(EditText)findViewById(R.id.EditText01); 
  button.setOnClickListener(new OnClickListener() { 
     public void onClick(View v) { 
        clickAction();   
     }   
  }); 
  myDialog.show(); 
  } 
  void clickAction() { 
     myDialog.cancel(); 
     mySpinner.setTag(editText.getText().toString());    
  } 
```

和微调代码

```
 mySpinner.setOnItemSelectedListener(new OnItemSelectedListener() { 
     public void onItemSelected(AdapterView<?> parent, View view, int pos, long id) {  
         String cardStatusString = parent.getItemAtPosition(pos).toString();  
         if(cardStatusString.equals("Other")) { 
             Showdialog(); 
         } 
     } 
     public void onNothingSelected(AdapterView<?> arg0) { 
         // TODO Auto-generated method stub 
     } }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T09:15:30.250

试试这样

```
public class MainActivity extends Activity {

ArrayList<String> list = new ArrayList<String>();
private Context context;
ArrayAdapter<String> adapter;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    context = this;
    list.add("Mercury");
    list.add("Venus");
    list.add("Earth");
    list.add("Mars");
    list.add("Jupiter");

    Spinner spinner = (Spinner) findViewById(R.id.planets_spinner);
    // Create an ArrayAdapter using the string array and a default spinner
    // layout
    adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_spinner_item, list);
    // Specify the layout to use when the list of choices appears
    adapter.setDropDownViewResource(android.R.layout.simple_spinner_dropdown_item);
    // Apply the adapter to the spinner
    spinner.setAdapter(adapter);

    spinner.setOnItemSelectedListener(new OnItemSelectedListener() {

        @Override
        public void onItemSelected(AdapterView<?> arg0, View arg1,
                int arg2, long arg3) {
            Showdialog();
        }

        @Override
        public void onNothingSelected(AdapterView<?> arg0) {

        }
    });
}

private void Showdialog() {
    final AlertDialog myDialog = new AlertDialog.Builder(this).create();
    // myDialog.setContentView(R.layout.mydialog);
    myDialog.setTitle("hh");
    myDialog.setCancelable(true);
    final EditText text = new EditText(this);
    myDialog.setView(text);
    myDialog.setButton("OK", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {

            String entered_name = text.getText().toString();
            list.add(entered_name);
            adapter.notifyDataSetChanged();
            // addrow(entered_name,click,time_count);
            return;
        }
    });
    myDialog.show();
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_main, menu);
    return true;
}
} 
```

# objective-c - 拖动两个 UIScrollViews

> ID：11654327
> 
> 赞同：0
> 
> 时间：2012-07-25T16:25:06.530
> 
> 标签：objective-c, ios, uiviewcontroller, uiscrollview, uiscrollviewdelegate

我有两个 UIScrollView，aScroll 和 bScroll。而bScroll 是aScroll 的子视图。我面临的问题是，我想拖动 bScroll 并且不影响 aScroll。有人可以在这里帮助我吗？谢谢。

```
- (void)viewDidLoad
{
[super viewDidLoad];
UIScrollView *aScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(50, 50, 400, 400)];
aScroll.backgroundColor = [UIColor grayColor];
aScroll.contentSize = CGSizeMake(401, 401);
[self.view addSubview:aScroll];
[aScroll release];

UIScrollView *bScroll = [[UIScrollView alloc] initWithFrame:CGRectMake(75, 75, 150, 150)];
bScroll.backgroundColor = [UIColor lightGrayColor];
bScroll.contentSize = CGSizeMake(500, 500);
[aScroll addSubview:bScroll];
[bScroll release];

UILabel *bLabel = [[UILabel alloc] initWithFrame:CGRectMake(20, 20, 30, 30)];
bLabel.text = @"B";
[bScroll addSubview:bLabel];
[bLabel release];

UILabel *aLabel = [[UILabel alloc] initWithFrame:CGRectMake(100, 250, 100, 40)];
aLabel.text = @"A";
[aScroll addSubview:aLabel];
[aLabel release];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:48:46.457

我的猜测是你需要检测触摸，`scrollViewWillBeginDragging:`如果 bScroll 是移动的，你可以设置 aScroll 的属性：

```
if([scrollView isEqual: bScroll])
aScroll.scrollEnabled = NO; 
```

要稍后恢复运动，您可以使用`scrollViewDidEndDecelerating:`

```
aScroll.scrollEnabled = YES; 
```

请记住，这些是委托方法，您至少需要将 bScroll 的委托设置为您的`ViewController`. 希望这可以帮助。

# python - Numpy：乘以一个向量

> ID：11654340
> 
> 赞同：2
> 
> 时间：2012-07-25T16:25:41.507
> 
> 标签：python, numpy, linear-algebra

我目前正在研究计算机科学教科书中的一些概念。线性代数被大量使用，他们在教科书中展示的例子都使用了 Numpy。

特别是一种表达方式让我完全困惑，因为它似乎是一种完全无用的表达方式。从教科书中逐字复制，它说：

`normalisers = sum(exp(outputs),axis=1)*ones((1,shape(outputs)[0]))`

因此，为了简化起见，我将删除`exp`（它与这里的问题无关），这给了我们：

`sum(outputs,axis=1)*ones((1,shape(outputs)[0]))`

其中`outputs`是 2-D Numpy `array`（矩阵）。

据我所知，这只是对`outputs`矩阵中的所有行求和，然后将结果向量逐元素乘以一个向量。那么......在这里乘以所有的有什么意义？它根本不会改变价值观。

这是教科书中的错误，还是我只是没有看到所有乘以可能会对这里的值产生任何影响？在这一点上，我对 Numpy 只是有点熟悉，所以我不确定我是否只是误解了这个表达式的一些含义。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:35:04.793

正如mutzmatron 在评论中所写，when`outputs`是一个数组，这种乘法是一种高度人为的方式来改变`sum`from `(n,)`to的结果的形状`(1,n)`。快速而惯用的方法是

```
sum(exp(outputs), axis=1).reshape(1, -1) 
```

与教科书中的方式相比，这既可读又可扩展，因为`reshape`它需要恒定而不是线性的时间和内存。

但是，如果`outputs`不是数组而是可怕类型的对象`np.matrix`，则结果完全不同：

```
>>> outputs = np.matrix(outputs)
>>> (sum(exp(outputs), axis=1) * ones((1,shape(outputs)[0]))).shape
(10, 10) 
```

（但是，它仍然是一种人为的表达不同操作的方式。）

# php - 使用 mysql_real_escape_string() 存储和显示代码；

> ID：11654341
> 
> 赞同：1
> 
> 时间：2012-07-25T16:25:45.910
> 
> 标签：php, html, sql, mysql-real-escape-string

我正在创建一个网页，允许用户粘贴他们的代码并获得一个唯一的 URL，以便以后访问它。问题是我正在使用

```
mysql_real_escape_string($_POST['code']) 
```

为了防止 sql 注入，但同时它在代码中添加了斜杠，这意味着当代码在以后显示时，它会被破坏（到处都是斜杠。）

再次显示代码时有没有办法“取消转义”它？

抱歉，如果这看起来不清楚或显而易见，这是我第一个使用 php 的项目。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:35:26.380

它是 echo stripslashes($code); 你在找吗？我认为为了增加安全性，您还必须将特殊字符转换为 html 实体，并在必要时去除所有脚本标签以避免 xss 攻击。

看：

[http://php.net/manual/en/function.htmlentities.php](http://php.net/manual/en/function.htmlentities.php)

[PHP中的XSS过滤功能](https://stackoverflow.com/questions/1336776/xss-filtering-function-in-php)

# ruby-on-rails - 从引导 Rails 服务器开始

> ID：11654345
> 
> 赞同：3
> 
> 时间：2012-07-25T16:25:58.137
> 
> 标签：ruby-on-rails, ubuntu

我正在使用 Ubuntu Server，并且我有一个 rails 应用程序。我想在启动时启动 rails 服务器。我已经将文件放在 /etc/init.d/ 上，并且我还使用以下命令创建了一个 crontab：

cd ~/myapp/nohup rails s -p 8000 &

我已经使用过 Puma 服务器（https://github.com/puma/puma/），但我无法启动服务器。如果我手动执行脚本，那么服务器就会完美启动。我不知道这是怎么回事。有人通过了类似的事情吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:45:49.323

您必须像这样创建指向 /etc/rc2.d/ 目录的链接：

```
ln -s /etc/init.d/name_of_yout_script.sh /etc/rc2.d/S123_rails_server.sh 
```

因为 /etc/init.d/ 是存储启动脚本的地方，但 /etc/rc2.d/ 文件夹是包含启动时执行的脚本的文件夹。通过使用 S_name.sh，您可以通过脚本运行位置的数字来表示。数字越大执行越晚。

# asp.net - 创建会话变量onclick超链接字段asp.net c#

> ID：11654346
> 
> 赞同：1
> 
> 时间：2012-07-25T16:25:59.840
> 
> 标签：asp.net, session, variables, hyperlink, field

我正在写`asp.net`项目`C#`，我的页面由`hyperlink`里面的字段组成`gridview`。代码如下：

```
<asp:TemplateField>
   <ItemTemplate>
       <asp:HyperLink ID="HyperLink1" runat="server" NavigateUrl='details.aspx' Text="view details"></asp:HyperLink>
   </ItemTemplate>
</asp:TemplateField> 
```

我想处理`onclick`这个`hyperlink`字段上的事件，这样当我点击它时，我会转到新页面并创建新的会话变量。那么如何创建会话变量并单击 a 转到新页面`hyperlink`？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:41:21.197

您可以使用[`LinkButton`](http://msdn.microsoft.com/en-us/library/system.web.ui.webcontrols.linkbutton.aspx)：

```
<asp:LinkButton id="LinkButton1" 
           Text="view details"              
           OnClick="LinkButton_Click" 
           runat="server"/>

void LinkButton_Click(Object sender, EventArgs e) 
{
    Session["variable"] = "your_value";
    Response.Redirect("~/details.aspx");

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:29:36.310

就像是：

```
protected void buttonClick(Object sender, Eventargs e)
  {
   Session["variable"] = value;
   Response.Redirect("page.aspx");
   } 
```

# php - MySQL连接两个表并从两个表中返回数据

> ID：11654351
> 
> 赞同：1
> 
> 时间：2012-07-25T16:26:25.753
> 
> 标签：php, mysql

我有一个非常简单的 MySQL 查询，它连接两个表：

```
SELECT teams.id, teams.name, players.id, players.name, players.teamId
FROM teams
LEFT JOIN players
ON teams.id = players.zoneId
WHERE teamId = 3 
```

然后当我获取行时，我可以使用这样的数据：

```
echo($row["name"] . ", " . $row["id"]); 
```

数组中包含的数据是来自玩家表的数据。我如何还可以访问“团队”表中的数据？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T16:27:30.467

使用列名的别名来区分来自 team 表和 player 表的具有相同名称的列。

```
SELECT teams.id as team_id, teams.name as team_name, players.id, players.name, players.teamId
FROM teams
LEFT JOIN players
ON teams.id = players.zoneId
WHERE teamId = 3 
```

然后您可以使用以下内容获取团队名称和团队ID：

```
$row["team_name"]
$row["team_id"] 
```

如果是我，我也会为玩家字段（例如 player_id 等）使用别名，以使代码尽可能清晰。清晰的代码 == 更好的可维护性。

# python - 如何在 Django 项目中设置 APScheduler？

> ID：11654353
> 
> 赞同：13
> 
> 时间：2012-07-25T16:26:27.923
> 
> 标签：python, django

具体来说，如何

*   在 Django 项目中设置[APScheduler](http://pythonhosted.org/APScheduler/)
*   开始跑步
*   写给 Django ORM

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-04-10T15:18:13.830

好吧，我会去的。假设您已经安装了 apscheduler（或将其放在 Python 路径中）[APS 的基本文档](http://pythonhosted.org/APScheduler/)列出了以下用于启动作业的代码：

```
from apscheduler.scheduler import Scheduler

sched = Scheduler()

@sched.interval_schedule(hours=3)
def some_job():
    print "Decorated job"

sched.configure(options_from_ini_file)
sched.start() 
```

我怀疑你遇到的问题是如何在 Django 中触发它的启动。您有多种选择，主要包括“将其放在将运行的地方”。例如，将其添加到`models.py`文件的底部，或者添加到文件中，`urls.py`每次 Django 重启时都会处理一次，然后继续在后台运行。然后可以从函数中正常执行数据库访问 - 只需正常导入模型以进行查询。

但是，请考虑如果您这样做，您将需要在您想要更改调度的任何时候终止并重新启动您的服务器。我也不确定这将如何处理多个线程（你会有> 1个计时器吗？）

你真的可能想考虑使用像[Celery](http://www.celeryproject.org/)（通过[django-celery](http://docs.celeryproject.org/en/latest/django/)）这样的东西，它可以让你获得所有这些，加上一个单独的调度守护进程，可以更好地控制调度。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-12T12:40:48.357

要使用这个 apscheduler，您可以使用下面的代码进行设置，唯一可能遇到困难的部分是使用 jobstore `sqlalchemy`，但由于您已经有一个 django ORM，它也可以工作。

```
 from apscheduler.schedulers.background import BackgroundScheduler

   scheduler = BackgroundScheduler()
   scheduler.start()

  def myjob():
     print('hello')

  scheduler.add_job(myjob, 'cron', hour=0)
  scheduler.add_job(
     myjob,
     'date',
     id=id_value,
     jobstore="default",
     run_date=scheduler_date,
     replace_existing=True
  ) 
```

我建议使用：[django-apscheduler](https://github.com/jarekwg/django-apscheduler)，它已经与带有 DjangoORM 的 jobstore 集成，并且还提供了一个 Web 界面来管理作业

对于 django-apscheduler，可以使用下面的代码

```
import time

from apscheduler.schedulers.background import BackgroundScheduler
from django_apscheduler.jobstores import DjangoJobStore, register_events, 
register_job

scheduler = BackgroundScheduler()
scheduler.add_jobstore(DjangoJobStore(), "default")

@register_job(scheduler, "interval", seconds=1)
def test_job():
    time.sleep(4)
    print("I'm a test job!")
    # raise ValueError("Olala!")

register_events(scheduler)

scheduler.start()
print("Scheduler started!") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-13T12:42:20.230

试试下面的代码。

`project name`：`crawling_server`

```
django-admin startproject crawling_server
cd crawling_server 
```

`app name`：`stock_crawling`

```
python manage.py startapp stock_crawling 
```

`purpose`: 每秒打印 'hello world'

## 1.安装包

```
pip install -r requirements.txt 
```

```
APScheduler==3.8.1
asgiref==3.4.1
backports.zoneinfo==0.2.1
beautifulsoup4==4.10.0
certifi==2021.10.8
Django==3.2.10
django-apscheduler==0.6.0
pytz==2021.3
pytz-deprecation-shim==0.1.0.post0
six==1.16.0
soupsieve==2.3.1
sqlparse==0.4.2
typing_extensions==4.0.1
tzdata==2021.5
tzlocal==4.1 
```

## 2.

在下面添加代码`settings.py`

```
INSTALLED_APPS = [
    ... 
    'stock_crawling',
    'django_apscheduler',
]

APSCHEDULER_DATETIME_FORMAT = "N j, Y, f:s a"  # Default

SCHEDULER_DEFAULT = True 
```

## 3.

在下面添加代码`views.py`

```
import datetime

def send_hello():
    time = datetime.datetime.now()
    print('hello world:[{}]'.format(time)) 
```

## 4

在项目目录中生成`operator.py`（见下面的目录树）

```
./
├── crawling_server <- **project dir** 
│   ├── asgi.py
│   ├── operator.py <- **generate this script** 
│   ├── settings.py
│   ├── urls.py
│   └── wsgi.py
├── db.sqlite3
├── manage.py
├── requirements.txt
└── stock_crawling 
    ├── admin.py
    ├── apps.py
    ├── migrations
    ├── models.py
    ├── tests.py
    └── views.py 
```

在下面添加代码`operator.py`

```
from apscheduler.schedulers.background import BackgroundScheduler
from django_apscheduler.jobstores import register_events, DjangoJobStore
from stock_crawling.views import send_hello

def start():
    scheduler = BackgroundScheduler()
    scheduler.add_jobstore(DjangoJobStore(), 'djangojobstore')
    register_events(scheduler)

    @scheduler.scheduled_job('interval', seconds=1, name='auto_hello')
    def auto_hello():
        send_hello()

    scheduler.start() 
```

[间隔](https://apscheduler.readthedocs.io/en/3.x/modules/triggers/interval.html) 或cron[用作](https://apscheduler.readthedocs.io/en/3.x/modules/triggers/cron.html)调度程序触发器。有关详细信息，请参阅下面的链接。

示例**间隔**触发器

```
@scheduler.scheduled_job('interval', seconds=1, name='auto_hello') 
```

示例**cron**触发器

```
@scheduler.scheduled_job('cron', hour=1, name='auto_hello') 
```

## 5.

`app.py`在项目目录中添加以下代码

```
from django.apps import AppConfig
from django.conf import settings

class StockCrawlingConfig(AppConfig):
    default_auto_field = 'django.db.models.BigAutoField'
    name = 'stock_crawling'

    def ready(self):
        if settings.SCHEDULER_DEFAULT:
            from crawling_server import operator
            operator.start() 
```

## 6.运行服务器

```
python manage.py runserver --noreload 
```

# 7\. 结果

```
hello world:[2021-12-13 12:34:33.982562]
Job '259a33f9664248bea607aa9ba0cdd587' no longer exists! Skipping logging of job execution...
Job '259a33f9664248bea607aa9ba0cdd587' no longer exists! Skipping logging of job execution...
hello world:[2021-12-13 12:34:34.982743]
Job '259a33f9664248bea607aa9ba0cdd587' no longer exists! Skipping logging of job execution...
Job '259a33f9664248bea607aa9ba0cdd587' no longer exists! Skipping logging of job execution...
hello world:[2021-12-13 12:34:35.986722] 
```

# facebook - 错误 191 facebook api 仅在某些域中

> ID：11654355
> 
> 赞同：0
> 
> 时间：2012-07-25T16:26:35.063
> 
> 标签：facebook, zend-framework

我正在尝试使用 jsdk facebook 登录。我尝试在我的本地主机中使用一个简单的应用程序（**URL：localhost/facebook/main.php**），它可以在 facebook 中写入相同的地址。

但是我使用zend 的真实应用程序有这个域：**http://gamaroff/home**（也在本地主机中））并且不起作用.....我知道是因为地址，但我不知道如何解决它。 ..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:31:47.807

您需要`gamaroff`为您的 Facebook 应用程序添加到站点域。

转到[https://developers.facebook.com/apps/](https://developers.facebook.com/apps/)并编辑您的应用程序以添加`gamaroff`为您的应用程序的附加域。

# c# - 如何使用 File.Copy C# 复制粘贴

> ID：11654357
> 
> 赞同：-1
> 
> 时间：2012-07-25T16:26:37.463
> 
> 标签：c#, visual-studio-2010

```
private void buttonSaveXML_Click(object sender, EventArgs e)
    {
        SaveFileDialog saveFile = new SaveFileDialog();
        saveFile.Filter = "XML Files|*.xml";
        saveFile.Title = "Save a Xml File";
        saveFile.InitialDirectory = @"C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\fxo\NewVersion";
        textBoxTargetFolder.Text = @"C:\Program Files (x86)\EdisonFactory\NetOffice";
        saveFile.ShowDialog();
        if (saveFile.FileName != "")
        {
            FileStream fs = (FileStream)saveFile.OpenFile();
            dsVersions.WriteXml(fs);
        }
        string sourceFileFolder = @"C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\fxo\NewVersion";
        string destinationFileFolder = @"C:\Program Files\Apache Software Foundation\Tomcat 7.0\webapps\fxo\NewVersion";
        bool overwrite = true;
        File.Copy(sourceFileFolder, destinationFileFolder);
        {
            overwrite = true;
        } 
```

我做了这么多，但我不知道我错过了什么。有什么帮助吗？该按钮保存 XML，但它还需要从所选文件中获取文件并将它们复制/粘贴到 xml 文件保存的位置。`File.Copy(sourceFileFolder, destinationFileFolder);`我需要复制的方式也有一个例外，即从一个文本框中获取路径并将其从路径粘贴到另一个文本框中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:36:31.667

您需要将各个文件名传递给 File.Copy()，而不仅仅是目录。这似乎是一个重复的问题。请参阅此处以获取答案：

[在 C# 中复制目录的全部内容的最佳方法](https://stackoverflow.com/questions/58744/best-way-to-copy-the-entire-contents-of-a-directory-in-c-sharp)

# javascript - 使用 javascript 链接样式

> ID：11654358
> 
> 赞同：0
> 
> 时间：2012-07-25T16:26:48.747
> 
> 标签：javascript, jquery

我有这个隐藏\显示链接的代码取决于cBoxoverlay的状态。但是当我单击关闭此项目（`display:none`），然后再次单击以显示它（`display:block`）时，我的链接（`#close-news`）仍然没有显示。

```
jQuery(document).click(function () {
  if (jQuery("#cBoxOverlay").css("display", "none")) {
    jQuery("#close-news").css("display", "none");
  } else if (jQuery("#cBoxOverlay").css("display", "block")) {
    jQuery("#close-news").css("display", "block"); 
```

我在哪里犯错了？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:34:49.350

试试这个 - 不需要 if 语句。您可以将其设置`#close-news`为任何`#cBoxOverLay`内容

```
$(document).click(function () {        
    $("#close-news").css("display", $("#cBoxOverlay").css('display'));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:33:00.793

Try this, based on @Raminson's answer:

```
$(document).click(function () {
  if ($("#cBoxOverlay").is(':hidden')) {
    $("#close-news").css("display", "none");
  } else{
    $("#close-news").css("display", "block"); 
```

May be give a try on this one, too:

```
$(document).click(function(){
$('#close-news').css('display', function(){return $('#cBoxOverlay').css('display');});
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:33:29.773

Use is(":visible") to check if the element is visible, and then either show or hide...

```
jQuery(document).click(function () {
    if (jQuery("#cBoxOverlay").is(":visible")) {
        jQuery("#close-news").hide();
    } else {
        jQuery("#close-news").show();
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:29:31.567

你可以试试：

```
if ($("#cBoxOverlay").css("display") == "none") {
  // ...
} 
```

但是你可以使用`is`方法：

```
if ( $("#cBoxOverlay").is(':hidden')) {
       // ...
} 
```

* * *

```
 $(document).click(function(){
   if ($("#cBoxOverlay").is(":hidden")) { // if #cBoxOverlay is hidden
       $("#close-news").hide() // hide the #close-news
    } else if ($("#cBoxOverlay").is(":visible")) { // if #cBoxOverlay is visible
       $("#close-news").show() // // show the #close-news
    }
 }) 
```

您可以删除第二个条件并使用`else`，因为当元素不隐藏时它是可见的，当然。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T16:30:37.923

使用类，做一个更清洁的工作。

如果您不想使用类，请尝试使用 jQuery 的切换，它基本上完全符合您的目标：[http ://api.jquery.com/toggle/](http://api.jquery.com/toggle/)

# apache-flex - Adobe Flex 表单失去焦点，因此默认按钮不起作用

> ID：11654360
> 
> 赞同：0
> 
> 时间：2012-07-25T16:26:55.830
> 
> 标签：apache-flex, focus

我有一个如下所示的表格：

```
<mx:HBox width="100%" horizontalAlign="center" verticalAlign="middle">
        <mx:Panel horizontalAlign="center"
                  title="{resourceManager.getString('Resources','views.login.title')}"
                  verticalAlign="middle">
            <mx:Form id="loginForm" defaultButton="{loginButton}">
                <mx:FormItem label="{resourceManager.getString('Resources','views.login.ip')}">
                    <mx:Label id="url" text="{url}"/>
                </mx:FormItem>
                <mx:FormItem label="{resourceManager.getString('Resources','views.login.username')}"
                             required="true">
                    <mx:TextInput id="username"/>
                </mx:FormItem>
                <mx:FormItem label="{resourceManager.getString('Resources','views.login.password')}"
                             required="true">
                    <mx:TextInput id="password" displayAsPassword="true"/>
                </mx:FormItem>
            </mx:Form>
            <mx:FormItem  direction="horizontal" width="100%" horizontalAlign="right" paddingBottom="2" paddingRight="2">
                <mx:Button id="loginButton"
                           label="{resourceManager.getString('Resources','views.login.loginBtn')}"/>
            </mx:FormItem>
        </mx:Panel>
    </mx:HBox> 
```

我有时（并非总是）经历的行为是当我从用户名切换到密码然后尝试点击“Enter”时，不会调用 Botton 的点击回调。如果我点击标签（id 是“url”）然后进入任何文本框，“Enter”键就可以了。我假设表单以某种方式不断失去焦点。我将不胜感激有关解决此问题的任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T21:22:40.987

我最近遇到了同样的问题，你找到根本原因了吗？我发现一种解决方法是`defaultButton`在`creationComplete`处理程序中设置表单而不是在`mxml`标签上。我在 Flex4.1 中看到了这个问题，但在 Flex 3.6 中没有看到。我还没有尝试过 flex 4.6。

# android - Android 在这张图片上绘制一张图片（动态）

> ID：11654362
> 
> 赞同：1
> 
> 时间：2012-07-25T16:27:05.393
> 
> 标签：android, dynamic, view, imageview, repaint

我有带有 ImageView 的 RelativeLayout。

我想点击图片并在顶部添加相同的图片。它必须是动态的，不调用 onCreate 方法。它是红色圆圈（透明 10% - *.png）

像这样：

![http://i.stack.imgur.com/jGOhn.png](../Images/7868984b165c1f21a173125bb7262b9f.png)

如何最好地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:39:27.810

每次只增加原图的alpha值。

```
Bitmap bitmap = BitmapFactory.decodeResource(getResources(),R.drawable.my_picture);       
Paint paint = new Paint();
paint.setAlpha(CURRENT_VALUE);
canvas.drawBitmap(botmap, 0, 0, paint); 
```

或直接使用 ImageView

```
ImageView myImageView = new ImageView(this);
myImageView.setAlpha(xxx); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:32:41.053

How many times do you need to do this? There are a couple of ways depending upon your needs. First, if you only need to do it once. Put the image on top of the first image in your layout but set its visibility to invisible. Then when you click on the image, change the visibility to visible.

The second way if you need to do it repeatedly is to place the image view in a separate layout, use in the primary layout for the fist image then load the imageview using a layoutinflater in your code.

After the rest of your info, I moved my comment up here: Just increase the alpha value of the image.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:50:59.057

```
public class Test extends Activity {

RelativeLayout relativeLayout;

 ImageView imageView1;

@Override
protected void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    super.onCreate(savedInstanceState);

    setContentView(R.layout.text);

    relativeLayout=(RelativeLayout)findViewById(R.id.relativeLayout);

    imageView=(ImageView)findViewById(R.id.imageView);

    imageView.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {
            // TODO Auto-generated method stub

            imageView1=new ImageView(Test.this);

            imageView1.setLayoutParams(imageView.getLayoutParams());

            //imageView1=imageView;

            imageView.setOnClickListener(new OnClickListener() {

                @Override
                public void onClick(View v) {
                    // TODO Auto-generated method stub

                }
            });

            imageView1.setBackgroundResource(R.drawable.arrow1);
            relativeLayout.addView(imageView1);
            Toast.makeText(Test.this, "NEW IMAGE", 1).show();
            Toast.makeText(Test.this, "OLD IMAGE", 1).show();

            imageView.setVisibility(View.GONE);

            imageView=null;

        }
    } 
    ); 
```

XML 布局：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/imageView"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_centerVertical="true"
        android:background="@drawable/aboutus_h" />

</RelativeLayout> 
```

这将帮助您完成工作。

# firefox - UTF-8 字符编码在 Firefox 中不起作用

> ID：11654371
> 
> 赞同：0
> 
> 时间：2012-07-25T16:27:50.853
> 
> 标签：firefox, utf-8, character-encoding, meta-tags, response-headers

> **可能重复：**
> [Firefox 中的 UTF-8 问题 - 响应标头覆盖元标记？](https://stackoverflow.com/questions/11593568/utf-8-issue-in-firefox-response-header-overriding-meta-tag)

我有一个 jPlayer 播放列表，可以在除 Firefox 之外的所有浏览器中正常工作。

问题在于非标准字符，即带有重音符号或亚洲字符的字符。我已经设置了一个演示播放列表，您可以[在这里](http://monthlymixup.com/mixups/july_2012/demo.html)看到。

当我以 UTF-8 格式输入字符（播放列表中的第 1 轨）时，它们适用于除 Firefox 之外的所有浏览器，当我以 ISO Latin 1 （播放列表中的第 2 轨）输入它们时，它们适用于 Firefox，但没有其他浏览器.

因此，例如在 Firefox 中`å¤§å°æ¸æ¿.mp3`有效，而在 Firefox`大地書房.mp3`中无效。

当我`大地書房.mp3`在 Firebug 控制台中使用时，我看到以下错误：

“网络错误：404 未找到 - [http://monthlymixup.com/mixups/july_2012/media/simon/03%20??.mp3](http://monthlymixup.com/mixups/july_2012/media/simon/03%20????.mp3) ”

所以，由于某种原因`大地書房.mp3`变成了 %20????。当我检查页面时，音频文件的链接显示为`大地書房.mp3`好像。

演示页面上有一个 UTF-8 的元标记，即`<meta charset=utf-8 />`

我的理解是，如果 FF 中没有设置默认编码，Firefox 会用响应头覆盖它。但是，我已将 UTF-8 设置为默认编码器，并通过转到工具/页面信息检查页面是否使用 UTF-8（我在 Mac 上，我相信这是检查编码的方法页）。

所以，我不知道发生了什么，很高兴得到一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:54:23.963

这似乎是 jQuery 或其他使用的软件中的编码问题。条目 2 的格式很奇怪：我看到源代码为 UTF-8

```
mp3:"media/nick/Guessi-GuÃ©rÃ©-Guessi (Pop Bariba).mp3" 
```

这意味着字母“é”已在 UTF-8 中表示为两个八位字节，然后这些八位字节被解释为好像它们是 ISO-8859-1 编码的，并且生成的字符已被 UTF-8 编码。据推测，该软件通过执行相反的双重解码来处理混乱。在任何情况下，它都不适用于

```
mp3:"media/simon/03 大地書房.mp3" 
```

这只是 UTF-8 编码的。

它让我很困惑它是如何在任何浏览器上工作的，但大概代码是依赖于浏览器的。

如果可能，应更改软件以处理 UTF-8 并转发它。所有现代浏览器，包括 Firefox，都可以正确处理它。

不过，作为一种快速解决方法，您可以尝试使用百分比编码形式（参见例如[在线百分比编码器](http://www.motobit.com/util/url-encoder.asp)）：

```
mp3: "media/simon/03%20%E5%A4%A7%E5%9C%B0%E6%9B%B8%E6%88%BF.mp3" 
```

但这只是猜测；软件可能会对此进行处理，对“%”符号进行百分比编码。

# sql-server - 将项目部署到目录数据库时 SSIS 2012 出现部署错误

> ID：11654372
> 
> 赞同：11
> 
> 时间：2012-07-25T16:27:58.797
> 
> 标签：sql-server, ssis, sql-server-2012

我之前在将 SSIS 项目部署到我们的 SSIS 目录数据库时遇到了一个相当奇怪的错误：

> “项目或操作记录不存在，或者您没有被授予查看它们的适当权限。”

现在，我是服务器上的管理员，以前部署到它时从来没有遇到过任何问题。之后我又试了一次，效果很好。我检查以确保没有其他软件包同时运行。

我确实[在 MSDN 上找到了这篇最近的帖子](http://social.msdn.microsoft.com/Forums/en/sqlintegrationservices/thread/af06ccd2-e246-41ca-a6d0-f6367e78b7a6)，它有同样的错误，但目前还没有解释。

有谁知道这个错误的原因可能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-22T14:28:52.787

尝试打开解决方案“以管理员身份运行”它可以提供帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-20T14:06:13.467

也许您的项目在部署时不存在但已创建，因此下次部署时您没有收到错误，因为它实际上通过了该验证。仔细检查部署信息、部署目标的名称和路径，并确认它们存在。

# java - 为什么按钮有动作监听器而 LWUIT 中没有命令？

> ID：11654374
> 
> 赞同：5
> 
> 时间：2012-07-25T16:28:05.433
> 
> 标签：java, mobile, java-me, lwuit, actionlistener

是否有任何理由在 LWUIT 中，Button 可以拥有自己的 ActionListener（通过 button.addActionListener）而 Command 没有？

拥有特定命令的侦听器的唯一方法是将 ActionListener 添加到表单并检查事件来自哪个命令的侦听器，如下所示？

```
 public void startApp() {
    Display.init(this);
    f = new Form("Mixed Record");
    exit = new Command("Exit");
    start = new Command("Start");
    Button button = new Button("Button");

    f.addCommand(exit);
    f.addCommand(start);
    f.addCommand(delete);
    f.addComponent(button);

    f.addCommandListener(new ActionListener() {

        public void actionPerformed(ActionEvent ae) {
            if (ae.getCommand().equals(exit)) {
                //Do Exit command code
            } else if (ae.getCommand().equals(start)) {
                //Do Start command code
            }
        }
    });

    button.addActionListener(new ActionListener() {

        public void actionPerformed(ActionEvent ae) {
            //Do button code
        }
    });

    f.show();
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T20:16:21.527

好吧，我不能确切地告诉你写 LWUIT 的人为什么会做出这个决定，但有几个原因可以说明它的合理性。

当一个表单包含多个命令时，它们被分组在一个菜单中。每次用户展开然后折叠菜单时，最多执行一个命令。因此，从概念上讲，命令之间的联系比按钮更紧密，特别是因为将按钮子类从一个窗体重用到另一个窗体的情况并不少见。

也可能有人担心 LWUIT 表单的 API 看起来很像 MIDP 规范中的 LCDUI 表单。

我也喜欢您的代码显示了该决定的一个积极后果：

您的代码中已经有 2 个未命名的内部类（ActionListener 子类）。如果每个 Command 都有自己的 ActionListener，您可能会编写 3 个未命名的内部类。开发人员经常这样做，尽管当您花更多时间查看包含多个未命名内部类的代码的堆栈跟踪时，您会意识到在每个命名类中拥有多个内部类是不好的做法。

# php - 如何在 drupal 7.14 中放置可见性块的 php 条件

> ID：11654377
> 
> 赞同：2
> 
> 时间：2012-07-25T16:28:11.260
> 
> 标签：php, drupal-7

我目前正在使用 drupal 7.14，但我找不到将 php 代码放置在可见性块条件的位置。

所以在 drupal 6.x 中。我可以通过使用**显示以下 PHP 代码是否**在块配置上返回 TRUE（PHP 模式，仅限专家）选项来做到这一点。

有人分享这个吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T17:07:18.020

转到模块并启用核心模块`PHP Filter`以插入 PHP 代码。
然后转到一个块，在垂直选项卡上`page`，您将看到插入 PHP 代码的选项。
***- 请***注意，需要以这种方式使用 PHP 代码的用户必须拥有必要的权限。

# sql - 将两个 SQL 查询与每个中的不同状态列组合在一起

> ID：11654379
> 
> 赞同：1
> 
> 时间：2012-07-25T16:28:12.723
> 
> 标签：sql, ms-access

我正在使用 VBA 在 Access 中生成 SQL 查询。我有两个 SQL 查询，它们返回两个项目列表，其中状态列显示为必需或可选：

```
"SELECT *, 'Required' as status FROM tblMain WHERE " & where_1
"SELECT *, 'Optional' as status FROM tblMain WHERE " & where_2 
```

*where_1* 和 *where_2* 是我在 VBA 中构建的字符串变量——尽管它们是什么并不重要。

我想做的是有一个组合列表，如果一个项目显示在两个列表中，我希望该项目只显示一次，状态为“必需”（“必需”胜过“可选”）。我从联合查询开始，但我不确定如何消除具有“可选”状态的重复行。

```
SELECT * FROM
((SELECT *, 'Required' as status FROM tblMain WHERE where_1)
UNION
(SELECT *, 'Optional' as status FROM tblMain WHERE where_2)) 
```

我在想可以使用 DISTINCT 或可能使用 FIRST，但不幸的是，我无法确定语法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:31:35.770

我建议您从第二个语句中删除在第一个语句中选择的 ID。

```
SELECT *, 'Required' as status FROM tblMain WHERE where_1
UNION
SELECT *, 'Optional' as status FROM tblMain WHERE where_2
AND ID Not IN (SELECT ID FROM tblMain WHERE where_1) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:31:26.013

你可以使用`MAX`.

```
SELECT *, MAX(status) FROM
((SELECT *, 'Required' as status FROM tblMain WHERE where_1)
UNION
(SELECT *, 'Optional' as status FROM tblMain WHERE where_2))
GROUP BY all_other_columns 
```

请注意，您必须用实际列替换“all_other_comuns”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T18:06:07.850

由于所有数据都来自单个表，最好的选择可能是将逻辑从第二个查询移动到`status`列本身：

```
SELECT *, iif(condition1,'Required','Optional') as status 
FROM tblMain 
```

这样一来，每一行`tblMain`只检索一次。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T18:07:43.577

您可以在没有联合的情况下执行此操作：

```
SELECT *,
       (case when where_1 then 'Required'
             when where_2 then 'Optional'
        end) as status
FROM tblMain
WHERE (where_1) or (where_2) 
```

唉，不过，您在 ACCESS 中没有 case 语句，因此您使用 iif() 代替：

```
SELECT *,
       iif(where_1, 'Required', 'Optional') as status
FROM tblMain
WHERE (where_1) or (where_2) 
```

# c++ - 在类构造函数中将此指针传递给 CreateThread 在线程过程中表现得很奇怪

> ID：11654380
> 
> 赞同：3
> 
> 时间：2012-07-25T16:28:13.223
> 
> 标签：c++, windows, multithreading, constructor, createthread

在我的一个类的构造函数中，我将 Windows 函数`CreateThread`称为最后一个操作。创建线程以立即执行，我将我的类的 this 指针作为`lpParameter`.

在线程过程中，我将传递回的参数转换为我的类的指针并命名它`pThis`。

我可以看到它`pThis`指向与我调用时传递的指针**相同的内存位置**。但是，如果我查看它们访问的成员变量，它们都有错误的值。`this``CreateThread``pThis->...`

我希望`this->member_variable`this 指针所属的类中 used 的值与我在编写`pThis->member_variable`线程过程时得到的值相同。

如果我调用`CreateThread`另一个成员函数（**而不是**构造函数），一切都会正常运行。

`CreateThread`因此问题是：是否禁止从 C++ 类的构造函数中调用 Windows 函数？如果是，问题是什么？

澄清：

1）我可以确认该对象始终存在。只有当整个程序结束时，对象才会超出范围。正如我已经说过的：`CreateThread`从其他一些成员函数调用确实有效。

2) 更正了“有线”错字，应该是“奇怪”，抱歉。

一些代码：

我尝试发布代码片段，将事情减少到最低限度，同时保持“故障”部分。

```
class CTimerW32 : public CTimer
{
    public:
        CTimerW32();
        ~CTimerW32();

    private:
        static void CALLBACK TimerCallback(LPVOID lpParam, BOOLEAN bReason);
        static DWORD WINAPI WaitCompletition(LPVOID lpParam);

    private:
        HANDLE m_hCompletitionEvent;
        HANDLE m_hCompletitionThread;
        bool m_bStartDeferred;
}; 
```

您可以放心地忽略基类`CTimer`，因为它只是一个抽象基类，可以在不同平台上构建。

```
CTimerW32::CTimerW32()
{
    m_bStartDeferred= false;
    m_hCompletitionEvent= CreateEvent(NULL, FALSE, FALSE, NULL);
    m_hCompletitionThread= CreateThread(NULL, 0, WaitCompletition, this, 0, NULL);
} 
```

在这里我可以看到`m_hCompletitionEvent`在调用`CreateEvent`.

```
DWORD WINAPI CTimerW32::WaitCompletition(LPVOID lpParam)
{
    CTimerW32* pThis;
    DWORD dwRet;

    pThis= (CTimerW32*)(lpParam);

    while (true) {
        // just wait for the completition event to be signaled
        dwRet= WaitForSingleObject(pThis->m_hCompletitionEvent, INFINITE);

        // ...
        if (pThis->m_bStartDeferred) {
            // ...
        }
    } 
```

调用`WaitForSingleObject`. 如前所述，类对象的 this 指针`CTimerW32`（现在`pThis`）在线程创建期间仍然具有与 this 指针相同的值。然而，其中的句柄`pThis->m_hCompletitionEvent`似乎是随机数据。它不是`CreateEvent`在构造函数中调用后观察到的值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:36:18.960

在构造函数中创建线程应该不是问题。此外，在运行构造函数中的任何代码以创建线程之前，您的对象应该由初始化列表完全初始化，因此初始化可能不是问题。

您正在观察的对象很可能超出范围，并且在您在新线程中观察它之前调用了它的析构函数。**尝试使用new**动态创建对象，看看是否仍然会发生这种情况，我敢打赌它不会，因为当对象超出范围时不会被破坏。

显然，您应该将指向该对象的指针保持在更高的范围内，以便最终也可以将其删除:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-20T02:36:02.127

[在Application Verifier](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=20028)的帮助下，您可能会很幸运地调试此问题。如果您为您的程序打开“基本”选项，它将启用 PageHeap，当内存被释放时会立即出错。如果您正在堆栈分配计时器变量，那么您的运气就不太好，但是如果在您注意到损坏时，应该可以在调试器中看到创建计时器的线程仍然在函数中声明了 CTimerW32 函数。

最后，对于这个用例，[Threadpool Timer API](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682466%28v=vs.85%29.aspx)可能比创建自己的专用线程更容易工作，并且资源消耗更少。

# windows - 使用任务计划程序通过自动屏幕捕获获取空白（黑色）屏幕截图

> ID：11654382
> 
> 赞同：2
> 
> 时间：2012-07-25T16:28:16.760
> 
> 标签：windows, batch-file, screenshot, screen-capture

我正在尝试解决一个软件错误，在该错误中，我们认为应用程序可能不会在每次调用时启动。为了测试这一点，我创建了一系列计划任务来启动应用程序，截取屏幕截图，然后关闭应用程序。这些任务都是通过 .bat 文件运行的。

除屏幕截图外，一切正常。当作为计划任务运行时，屏幕截图中的 .jpg 始终显示一个黑框。如果我正常执行 .bat 文件，屏幕截图看起来不错。

我正在使用 nircmd 发送屏幕捕获命令并将其保存到文件夹中。我正在使用的命令如下：

```
nircmd.exe savescreenshot "C:\File Path\"~$currdate.MMddyyyy$-~$currtime.HHmmss$.jpg 
```

我正在使用 Windows 7。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T19:00:35.660

创建的任务可能正在其自己的登录会话中运行，即使它以同一用户身份运行。

使您的计划任务以当前登录的用户身份运行。

Keith Brown 写了一个[古老但仍然有效的关于登录会话 SID 的详细说明](http://www.microsoft.com/msj/0599/security/security0599.aspx)。相关部分在中间，在“http://www.microsoft.com/msj/0599/security/security0599.aspx”下

您还可以使用 EnumWinStaGui 探索访问[权限](http://www.ikriv.com/en/prog/tools/EnumWinstaGui/)。

# ruby - 我如何找出为什么 mongo 映射器模型保存需要这么长时间？

> ID：11654387
> 
> 赞同：0
> 
> 时间：2012-07-25T16:28:32.753
> 
> 标签：ruby, sinatra, mongomapper

有什么方法可以分析或挖掘 mongo 映射器模型以了解为什么需要这么长时间才能保存？

如果有什么不同，我会在 Sinatra 中使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-29T21:14:23.827

您可以使用 Ruby 分析器，例如 ruby​​-prof gem (http://ruby-prof.rubyforge.org/)。这将向您展示哪种方法会减慢您的代码。

# drupal - Drupal Commerce USPS 模块：如果存在产品选项，则禁用运输服务

> ID：11654394
> 
> 赞同：1
> 
> 时间：2012-07-25T16:29:05.030
> 
> 标签：drupal, drupal-7, drupal-modules, usps, drupal-commerce

如果购物车中的任何产品设置了某个自定义产品选项（复选框），我需要禁用除一项 USPS 运输服务（包裹运输）之外的所有服务。

我非常擅长使用 Wordpress，但我是 Drupal 的新手，无法找到一种方法来完成这项工作。

我一直在尝试的是为每个我不想提供的费率设置数据比较条件规则（优先运输等）。但是，我似乎无法深入到购物车中的产品以检查产品字段值，因为我只有 site: 和 commerce-order: 可用的根选择器。

我正在使用最新版本的 Drupal 和 Commerce 以及 USPS 运输模块。

感谢您的任何帮助或指导！

# objective-c - 可达性 2.2 与 3.0 (Tonymillion)

> ID：11654396
> 
> 赞同：0
> 
> 时间：2012-07-25T16:29:14.647
> 
> 标签：objective-c, ios, reachability

我有自己的静态库，其中包括用于检查 Internet 连接的可达性。

我在我的静态库[http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html中使用 Reachability 2.2 版本](http://developer.apple.com/library/ios/#samplecode/Reachability/Introduction/Intro.html)

其他开发人员将我的静态库添加到他的（第 3 方项目）中，该库已经具有其他 [可达性](https://github.com/tonymillion/Reachability)（Pod 规范中的标签 3.0）

他通过 Cocoa Pods 安装了它。见[规格](https://github.com/CocoaPods/Specs/blob/master/Reachability/3.0.0/Reachability.podspec)。

**如您所见，这是 pod 中的最后一个版本。**

好的，项目构建没有错误。

但是我们得到了错误：

```
+[Reachability reachabilityWithHostName:]: unrecognized selector sent to class 0x2c77fc 
```

我花了很多时间来找出问题所在。

所以 Reachability 2.2 有声明：

```
+ (Reachability*) reachabilityWithHostName: (NSString*) hostName; 
```

但是，Reachability 3.0 有以下声明：

```
+(Reachability*)reachabilityWithHostname:(NSString*)hostname; 
```

不一样吗？！编译成功！看看“HostName”......是的，小“n”。当我们检查静态库中的主机可达性时，我们会得到无法识别的选择器。

我的问题是 -**避免这个问题的最佳方法是什么？**我是否应该强迫其他想要构建我的静态库的开发人员使用 Apple 的 Reachability 或其他东西？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-10-28T22:43:01.880

我知道这已经晚了，但我也面临着一个问题，因为我相信其他任何试图构建可再分发库的人。

不幸的是，没有“最好的方法”来避免这个问题，但是有办法做到这一点，这取决于你的用例。

一种技术含量低、维护成本高且工作量大的方法是重命名您使用的所有 pod 中的所有类。通过给所有类一个唯一的前缀，您*几乎*可以保证集成静态库的“客户”不会使用相同的名称，特别是在您的情况下，如果他们使用 pod，那么它们将不会具有相同的类名，避免冲突。

其他方法将涉及编译后类名修改，这将更易于维护，但需要更深入的技术知识来了解如何对目标文件和链接器映射进行此类操作。对不起，我还没有产品化！

希望我没有忽略一个更简单和优雅的解决方案，但这就是我所在的地方。

# c# - 如何删除实体框架代码优先数据库中的相关对象？

> ID：11654398
> 
> 赞同：4
> 
> 时间：2012-07-25T16:29:23.610
> 
> 标签：c#, entity-framework, code-first

DBContext 类是

```
public class VGDB : DbContext
    {        
        public DbSet<Planet> Planets { get; set; }
    } 
```

模型看起来像：

```
public class Planet
    {
        [Key]
        public int Id { get; set; }
        public string Name { get; set; }

        ...

        public List<Building> Constructions { get; set; } 
    }

public class Building
    {
        [Key]
        public int Id { get; set; }
        public decimal Lvl { get; set; }
        public string Type { get; set; }
    } 
```

存储库类：

```
public class VGDBRepository
    {
        private readonly VGDB _vgdb;
        ...
        public void RemovePlanets()
        {
            foreach (Planet planet in _vgdb.Planets)
            {
                _vgdb.Planets.Remove(planet);
            }
            _vgdb.SaveChanges();
        }
        ...
    } 
```

实体框架使用两个表创建数据库：`Planets`和`Buildings`，按`Planet_Id`字段相关。当我调用`RemovePlanets()`我的`VGDBRepository`类的方法时，它会从行星表中删除行星记录，并将`Planet_Id`建筑物表中与已删除行星相关的所有建筑物的字段设置为 null 但不删除它们，因此我在数据库中有冗余记录。我使用`code-first`策略来创建数据库。如何强制实体框架删除此类相关数据？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T16:35:24.990

您需要级联删除。

看看这个： [Stackoverflow 示例级联删除](https://stackoverflow.com/questions/5520418/entity-framework-code-first-delete-with-cascade)

还有这个： [Msdn Code First with Enable Cascade Deletes](http://msdn.microsoft.com/en-us/library/hh295843%28v=vs.103%29.aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-08-15T08:37:11.633

我遇到了完全相同的问题，我最近想出了如何解决它，所以我想我只是补充一下 Dima 提供的答案。

上面的 Planet 和 Building 代码看起来与我设置相关对象的方式非常相似；建立这样的关系对我来说很有意义。此外，这些表似乎通过 FK 引用正确生成回父表。像您一样，当我删除父记录（在您的情况下为行星）时，子记录（在您的情况下为建筑物）仍然存在，但 FK 字段已删除父 ID，因此它只有一个空值。但是，这些对象已从内存集合中删除，因此事情变得不同步。让我真正感到困惑的是，Entity Framework Code First 应该在默认情况下像这样级联删除，我不明白为什么我的删除没有级联。

经过一番挖掘，我发现我必须在子类中设置一个外键关联，以便实体框架正确地进行级联删除。因此，您需要将代码更改为如下所示：

```
 public class Planet
{
    [Key]
    public int Id { get; set; }
    public string Name { get; set; }

    ...

    public List<Building> Constructions { get; set; } 
}

public class Building
{
    [Key]
    public int Id { get; set; }
    public decimal Lvl { get; set; }
    public string Type { get; set; }
    //Add these two properties to create the Foreign Key Association
    public int planetID { get; set; }
    public Planet planet { get; set; }
} 
```

一旦我添加了这两个属性并在我的数据库上进行了自动迁移，删除就像我预期的那样级联。我仍然有点不清楚为什么需要这样做，但这是一个单独的帖子的主题......我只是想我会分享让这对我有用的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-08-29T13:16:01.050

急切的加载可能会对您有所帮助。否则，启用延迟加载。

```
 foreach (Planet planet in _vgdb.Planets)
        {
            _vgdb.Planets.Include(p=>p.Constructions).Remove(planet);
        } 
```

# ruby-on-rails - 尝试在 Mac OS X 上运行 obtvse 时出现 Psych::SyntaxError

> ID：11654400
> 
> 赞同：1
> 
> 时间：2012-07-25T16:29:25.720
> 
> 标签：ruby-on-rails, ruby, gem, bundle

我究竟做错了什么？bundle install 运行良好，ruby 为 1.9.3p194（2012-04-20 修订版 35410）[x86_64-darwin12.0.0]。已经尝试用 syck 替换 psych ，但它会引发完全相同的错误。

```
rMBP:obtvse Tobias$ rails s
=> Booting Thin
=> Rails 3.2.0 application starting in development on http://0.0.0.0:3000
=> Call with -d to detach
=> Ctrl-C to shutdown server
Exiting
/Users/Tobias/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in `parse': 
(<unknown>): found character that cannot start any token while scanning for the next
token  at line 7 column 22 (Psych::SyntaxError)
from /Users/Tobias/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:203:in
`parse_stream'
from /Users/Tobias/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:151:in `parse'
from /Users/Tobias/.rbenv/versions/1.9.3-p194/lib/ruby/1.9.1/psych.rb:127:in `load'
from /Users/Tobias/Dropbox/obtvse/config/initializers/config.rb:1:in `<top (required)>'
from /Users/Tobias/.rbenv/versions/1.9.3-p194/lib/ruby/gems/1.9.1/gems/activesupport-
(...) 
```

# iphone - Xcode 数据库使用混乱

> ID：11654401
> 
> 赞同：1
> 
> 时间：2012-07-25T16:29:30.550
> 
> 标签：iphone, objective-c, ios, database

我是 iPhone 应用程序开发的新手，对存储数据有疑问。我花了很长时间学习核心数据，但仍然对持久存储的概念感到困惑。

我的理解是，核心数据只是管理从外部数据库下载的数据的一种方式。但是鉴于核心数据由 SQLite 支持，这是否意味着在运行时内存中存在 SQLite db？如果是这样，这是否意味着当我使用核心数据时，如果我在开始时下载大量数据集会更有效？但是对于需要不断更新数据的 twitter 或 Facebook 等应用程序来说，在这些情况下直接使用 $NSURLConnection$ 就足够了吗？如果使用核心数据，额外的开销（即数据对象）是否会对如此频繁的更新请求产生任何负担？

我还想了解一些为 iPhone 应用程序设置在线数据库的常用方法？通常是带有将数据转换为 JSON 的自制 Python 包装器的 MySQL 服务器吗？任何标准服务器提供商都会提供整个软件包？还是开源代码？

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:43:03.707

我将通过并尝试解决您的每个问题，如果我错过了一个，请告诉我！

首先，Core Data 也可以用来存储在你的应用程序中生成的信息，没有什么能阻止你以一种或另一种方式使用它。

我理解它的工作方式是，无论您的应用程序是否正在运行，文件或 Core Data 使用的其他存储机制都存在。在我看来，对于一个用户不得不等待一个大型数据库被下载并加载到本地数据库中而不能与你的应用程序交互并不是最好的方法，人们对 UI 的反应是消极的。当用户第一次运行您的应用程序时，您可能需要获取更大的数据集，但如果其中任何一个是通用的并且可以预加载是理想的，其余的应该在用户尝试下载时下载访问它。

Facebook 和 Twitter 应用程序的工作方式正如您所了解的那样，即建立了连接并从适当的站点提取信息，据我所知，它们存储的唯一内容是个人资料信息。我会犹豫是否使用 Core Data 来存储人们的信息，因为最终是的，由于必须连续几个月存储人们的新闻提要或消息，会产生大量开销。

至于建立在线数据库是我不熟悉的东西，所以希望其他人可以提供一些见解，或者如果我发现我认为可能有用的东西，我会在这里为你发帖。这部分实际上可能值得单独提出一个问题。

如果您需要我详细说明任何事情，请告诉我！

# javascript - 图表打印后在网页上没有响应

> ID：11654404
> 
> 赞同：0
> 
> 时间：2012-07-25T16:29:43.677
> 
> 标签：javascript, highcharts

[这是对我之前的问题](https://stackoverflow.com/questions/11634153/how-to-add-a-print-button-to-a-web-page)的扩展。我已经成功地向我的 php 网页添加了一个按钮，该按钮通过一次打印页面中的所有图形来正常工作。我已经完成了以下方式

```
function printdiv(printpage)
{
var headstr = '<html><head><title>Graphs</title></head>'+'<link rel="stylesheet" type="text/css" href="../css/template.css" />'+'<body><br/><br/><br/>';
var footstr = "</body>";
var newstr = document.all.item(printpage).innerHTML;
var oldstr = document.body.innerHTML;
document.body.innerHTML = headstr+newstr+footstr;
window.print();
document.body.innerHTML = oldstr;
return false;
die();
}

<input name="b_print" type="button" class="ipt"   onClick="printdiv('graphs');" value="Graphs"> 
```

我现在遇到的一个问题是，当我单击打印按钮时，会弹出预览，一旦打印完成，该页面中的所有高图都将变为非活动状态（例如，当我将光标移到图表上并尝试做一些它不做的事情时响应，直到我刷新页面）。任何线索这里发生了什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:42:21.337

由于您更改了 innerHTML，所有事件侦听器（在这种情况下用于处理与图表的交互）已同时被删除。

你可以尝试生成一个弹出窗口来放置你的`headstr+newstr+footstr`，或者使用更优雅的方法，比如 CSS 媒体选择器，来防止这个问题。

# arrays - 如何使用来自两个较小数组的位置定义二维数组？

> ID：11654406
> 
> 赞同：0
> 
> 时间：2012-07-25T16:29:55.610
> 
> 标签：arrays

基本上，我已经定义了一个数组 Tp，它有 150 个位置，增量为 0.01。我还以相同的 0.01 增量定义了一个具有 600 个位置的数组 Dp。我正在尝试编写一个大数组 TpDp ，它将 Tp 和 Dp 数组值的每个组合放入它的两列中，以便 Tp 在第一列中，而 Dp 在第二列中。我不确定如何定义 TpDp[][] 位置以使它们相等，例如（并且在语法上不正确）`int TpDp[0][0] = new int [Tp[0]][Dp[0]]`，.

我可能在这方面有各种错误，但到目前为止，我的设置已经定义了 Tp 和 Dp（A = 150，B = 600，这些分别是 Tp 和 Dp 中的位置数）：

```
int [][] TpDp = new int [A*B][A*B]; //declaring new 2-dimensional array TpDp, size needed for combos 

int i; //iteration counter for Tp

int j; //iteration counter for Dp

for (i=0; i<=A; i++)
{ //i counting through all positions in Tp until exhausts A column options
    for (j=0; j<=B; j++)
    { //j counting through all positions in Dp until exhausts B column options
         TpDp[i][j] = Tp[i], Dp[j]; //This is where I'm not sure how do define TpDp[i][j]
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:33:33.283

The representation you have now is best.

First of all, you would need to roll your own data representation to fit the values into an array. Second of all, the array would be enormous. Third of all, the enormous array wouldn't do anything more than the 2 seperate arrays you already have, so it would be all cost and no benefit.

From a lookup standpoint: Either way, you would need to do two lookups. Currently you do one lookup from one array and another from a second array. The other way, you'd need to do one lookup in one dimension, then another in the second dimension.

From a memory standpoint: Your quantities are 32 bit values. You store 150 + 600 of them, which totals 3000 bytes. The other way, you would need 150 * 600 values 64 bits wide (to store both numbers), which is 720000 bytes (about 0.4% efficient compared to the current method).

From a time standpoint: both lookups would take the same amount of time.

From a data standpoint: the second way would have a huge amount of redundant data, and the first way stores each necessary value once.

# c# - 如何根据其属性更改自定义控件的背景颜色

> ID：11654409
> 
> 赞同：3
> 
> 时间：2012-07-25T16:30:32.377
> 
> 标签：c#, wpf, xaml, custom-controls

我有一个简单的自定义控件，可以向用户显示一条消息（类似于浏览器的信息栏）。

我添加了一个指示错误消息的布尔依赖属性。如果设置了标志，则控件的背景颜色应为红色，否则为黄色。

这是控件的样式（在 Themes\Generic.xaml 中）：

```
<Style TargetType="{x:Type local:InfoBar}">
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type local:InfoBar}">
                <ControlTemplate.Triggers>
                    <Trigger Property="IsError" Value="True" >
                             <Setter Property="Background" Value="LightPink" />
                    </Trigger>
                    <Trigger Property="IsError" Value="False" >
                             <Setter Property="Background" Value="LightYellow" />
                    </Trigger>                  
                </ControlTemplate.Triggers>

                <Grid Margin="4,0,4,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="auto" />
                    </Grid.ColumnDefinitions>
                    <TextBlock Text="{TemplateBinding Message}" Padding="5" FontWeight="Normal" TextWrapping="Wrap" Grid.Column="0"/>
                    <Button x:Name="PART_CloseButton" Grid.Column="1" VerticalAlignment="Top"  >
                        <Button.Template>
                            <ControlTemplate>
                                <Border HorizontalAlignment="Center" VerticalAlignment="Center" BorderBrush="Transparent">
                                    <Image Height="16" Width="16" Source="/QOffice.Common.Controls;component/Images/icons/Close.png"  />
                                </Border>
                            </ControlTemplate>
                        </Button.Template>
                    </Button>
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style> 
```

这是控件本身：

```
[TemplatePart(Name = PART_CloseButton, Type = typeof(ButtonBase))]
public class InfoBar : Control
{

    private const string PART_CloseButton = "PART_CloseButton";

    static InfoBar()
    {
        DefaultStyleKeyProperty.OverrideMetadata(typeof(InfoBar), new FrameworkPropertyMetadata(typeof(InfoBar)));

    }

    #region CloseButton

    private ButtonBase _closeButton;
    /// <summary>
    /// Gets or sets the CloseButton template part.
    /// </summary>
    private ButtonBase CloseButton
    {
        get
        {
            return _closeButton;
        }
        set
        {
            if (_closeButton != null)
            {
                _closeButton.Click -= OnButtonClick;
            }

            _closeButton = value;

            if (_closeButton != null)
            {
                _closeButton.Click += OnButtonClick;
            }
        }
    }

    private void OnButtonClick(object sender, RoutedEventArgs e)
    {
        this.Visibility = System.Windows.Visibility.Collapsed;
    }

    #endregion 

    public override void OnApplyTemplate()
    {
        CloseButton = GetTemplateChild(PART_CloseButton) as ButtonBase;

    }

    #region DependencyProperty Message of InfoBar

    public string Message
    {
        get { return (string)GetValue(MessageProperty); }
        set { SetValue(MessageProperty, value); }
    }

    public static readonly DependencyProperty MessageProperty =
        DependencyProperty.Register("Message", typeof(string), typeof(InfoBar),
                new UIPropertyMetadata());

    #endregion

    #region DependencyProperty IsError of InfoBar

    public bool IsError
    {
        get { return (bool)GetValue(IsErrorProperty); }
        set { SetValue(IsErrorProperty, value); }
    }

    public static readonly DependencyProperty IsErrorProperty =
        DependencyProperty.Register("IsError", typeof(bool), typeof(InfoBar),
                new UIPropertyMetadata());

    #endregion

} 
```

如您所见，我已经定义了一个属性 IsError 和一个触发器来设置控件的背景。

但背景总是透明的。除此之外，如果控制功能正常。

怎么了？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:55:16.583

即使我手动添加背景颜色，您的自定义控件似乎也没有正确设置背景颜色。我不确定这是为什么，希望有人能详细说明。我确实通过使用以下方式更改样式中网格的颜色来解决您的问题：

```
<Grid.Style>
    <Style TargetType="{x:Type Grid}">
        <Style.Triggers>
            <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:InfoBar}}, Path=IsError}" Value="True">
                <Setter Property="Background" Value="LightPink" />
            </DataTrigger>
            <DataTrigger Binding="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type local:InfoBar}}, Path=IsError}" Value="False">
                <Setter Property="Background" Value="LightYellow" />
            </DataTrigger>
        </Style.Triggers>
    </Style>
</Grid.Style> 
```

这会根据 InfoBar 控件中的 IsError 值触发网格的背景颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T18:04:28.753

你给你`Control`的 a`Background`但没有孩子正在使用它。两种可能的解决方案：

1.  `TemplateBinding`

    ```
    <Grid Margin="4,0,4,0" Background="{TemplateBinding Background}"> 
    ```

2.  `DataTrigger`和`TargetName`

    ```
    <ControlTemplate TargetType="{x:Type local:InfoBar}">
        <Grid Name="grid" Margin="4,0,4,0">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*" />
                <ColumnDefinition Width="auto" />
            </Grid.ColumnDefinitions>
            ...
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="IsError" Value="True" >
                <Setter TargetName="grid" Property="Background" Value="LightPink" />
            </Trigger>
            <Trigger Property="IsError" Value="False" >
                <Setter TargetName="grid" Property="Background" Value="LightYellow" />
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate> 
    ```

    *在此解决方案中，您必须更改顺序：声明`ControlTemplate.Triggers`后`Grid`。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:57:47.380

试试这个（因为 IsError 是 InfoBar 中的 DP，而不是 ControlTemplate 的属性）

```
<DataTrigger Property="{Binding IsError, RelativeSource={RelativeSource
                                         Mode=TemplatedParent}" Value="True">
      <Setter Property="Background" Value="LightPink" />
</DataTrigger>
<DataTrigger Property="{Binding IsError, RelativeSource={RelativeSource
                                      Mode=TemplatedParent}" Value="False">
      <Setter Property="Background" Value="LightYellow" />
</DataTrigger> 
```

# php - 如何创建一个可以使用 curl 发布我的参数的函数

> ID：11654410
> 
> 赞同：0
> 
> 时间：2012-07-25T16:30:33.020
> 
> 标签：php, json, curl

我为我的网站开发了一个 API。API 100% 正确工作。但是我将它设计为从这种 POST 参数中捕获和执行函数`$_POST['functionName'];` `$_POST['parameter'];`现在，在请求页面中我想将它们发送为`$_POST`，我设法处理了它。但我的问题是，**如何创建一个函数，可以**使用`curl`. **这是我向我的API**发送请求的代码。

```
$url = 'http://localhost/myapi/api.php';
$postfields['functionName'] = "myFunction";
$postfields['parameter'] = "1";

$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_TIMEOUT, 100);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_POSTFIELDS, $postfields);
$data = curl_exec($ch);
$results = json_decode($data, true);
curl_close($ch); 
```

# hibernate - 具有两组独立限制的单条件查询

> ID：11654411
> 
> 赞同：0
> 
> 时间：2012-07-25T16:30:33.847
> 
> 标签：hibernate

我想知道您是否可以创建一个单一的条件查询，然后以某种方式创建两组不同的限制，并使用两组完全不同的结果，而不必发出第二个查询？

# php - phpMailer 不向外部域发送电子邮件

> ID：11654418
> 
> 赞同：1
> 
> 时间：2012-07-25T16:31:11.673
> 
> 标签：php, phpmailer

我可以向主机域上的电子邮件地址发送电子邮件，因此向 me@domain.com 发送电子邮件可以工作，其中邮件主机是 domain.com，但如果我将其发送到 me@gmail.com，它就不会出现通过，并且我没有从 phpMailer 收到任何错误，在调试的情况下，它表明一切都已完成。这是我的 phpMailer 设置：

```
require_once("class.phpmailer.php");                    

$mail = new PHPMailer();
$mail->IsSMTP(); // set mailer to use SMTP
$mail->SMTPDebug = 2;
$mail->Host = "mail.mydomain.co.uk"; // specify main and backup server                  
$mail->SMTPAuth = true; // turn on SMTP authentication                  
$mail->Username = "sendmail@mydomain.co.uk"; // SMTP username                   
$mail->Password = "password"; // SMTP password                  
$mail->From = "info@mydomain.com"; //do NOT fake header.                    
$mail->FromName = "Me";                 
$mail->AddAddress("you@gmail.com"); // Email on which you want to send mail                                         
$mail->Subject = "Just a Test";                 
$mail->Body = "Hello. I am testing <b>PHP Mailer.</b>";

if(!$mail->Send()){

    echo $mail->ErrorInfo;

}else{

    echo "<p>Thank you, we will be in touch shortly</p>";

} 
```

到底是怎么回事？就邮寄者而言，它已发送，因为我回来了

```
SMTP -> FROM SERVER:250 Requested mail action okay, completed 
SMTP -> FROM SERVER:250 Requested mail action okay, completed 
SMTP -> FROM SERVER:354 Start mail input; end with . 
SMTP -> FROM SERVER:250 Requested mail action okay, completed 
```

# database - 如何在我的数据库中实现 Twitter 转发操作

> ID：11654420
> 
> 赞同：8
> 
> 时间：2012-07-25T16:31:13.737
> 
> 标签：database, database-design, relational-database

我正在实现类似于 Twitter 的 Web 应用程序。我需要实现“转发”操作，**一条推文可以被一个人转发多次**。

我有一个基本的“推文”表，其中包含以下列：

> **推文：** tweet_id | 推文文本 | tweet_date_created | tweet_user_id

（其中`tweet_id`是推文的主键，`tweet_text`包含推文文本，`tweet_date_created`是创建推文时的日期时间，`tweet_user_id`是表的外键`users`并标识创建推文的用户）

现在我想知道我应该如何在我的数据库中实现转发操作。

## 选项1

我是否应该创建新的连接表，如下所示：

> **转推： tweet_id** | 用户 ID | 转推日期转推

（哪里`tweet_id`是表的外键`tweets`，`user_id`是表的外键`users`并标识已转发推文的用户，`retweet_date_retweeted`是指定转发完成时间的日期时间。）

**优点：**不会有空列，当用户进程重新发送时，`retweets`将在表中创建新行。

**缺点：**查询过程会比较困难，它需要连接两个表，并以某种方式按两个日期对推文进行排序（当推文不转发时，按 tweet_date_created 排序，当推文被转发时，按 retweet_date_retweeted 排序）。

## 选项 2

或者我应该在`tweets`表中实现它`parent_id`，它看起来像这样：

> **推文：** tweet_id | 推文文本 | tweet_date_created | tweet_user_id | parent_id

（所有列保持不变，并且`parent_id`是同一个表的外键`tweets`。创建推文时，`parent_id`保持为空。当推文被转发时，`parent_id`包含原始推文 ID，`tweet_user_id`包含处理转发操作的用户，`tweet_date_created`包含转发时的 DateTime完成，并且`tweet_text`保持空白 -**因为我们不会让用户在转发时更改原始推文**。）

**优点：**查询过程更加优雅，因为我不必连接两个表。

**缺点：**每次转发推文时都会有空单元格。因此，如果我的数据库中有 1 000 条推文，并且每条推文都被转发 5 次，那么我的`tweets`表中将有 5 000 行。

* * *

哪种方式最有效？有空单元格更好还是让查询过程更干净？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T17:17:14.073

IMO 选项#1 会更好。加入推文和转推表的查询一点也不复杂，可以通过左连接或内连接来完成，具体取决于您是要显示所有推文还是只显示被转推的推文。并且连接查询应该是高性能的，因为表很窄，被连接的列是整数，并且由于 FK 约束，它们每个都有索引。

另一个建议是不要用 tweet 或 retweet 标记所有列，这些可以从存储数据的表中推断出来，例如：

```
tweet
    id
    user_id
    text
    created_at

retweet
    tweet_id
    user_id
    created_at 
```

样本加入：

```
# Return all tweets which have been retweeted
SELECT
    count(*),
    t.id
FROM
    tweet AS t
INNER JOIN retweet AS rt ON rt.tweet_id = t.id
GROUP BY
    t.id

# Return tweet and possible retweet data for a specific tweet
SELECT
    t.id
FROM
    tweet AS t
LEFT OUTER JOIN retweet AS rt ON rt.tweet_id = t.id
WHERE
    t.id = :tweetId 
```

-- 根据请求更新 --

以下只是说明性的，代表我为什么选择选项＃1，没有外键也没有任何索引，您必须自己添加这些。但结果应该表明连接不会太痛苦。

```
CREATE TABLE `tweet` (
    `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `user_id` int(10) unsigned NOT NULL,
    `value` varchar(255) NOT NULL,
    `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=8 DEFAULT CHARSET=utf8

CREATE TABLE `retweet` (
    `id` int(10) unsigned NOT NULL AUTO_INCREMENT,
    `tweet_id` int(10) unsigned NOT NULL,
    `user_id` int(10) unsigned NOT NULL,
    `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
    PRIMARY KEY (`id`)
) ENGINE=MyISAM AUTO_INCREMENT=3 DEFAULT CHARSET=utf8;

# Sample Rows

mysql> select * from tweet;
+----+---------+----------------+---------------------+
| id | user_id | value          | created_at          |
+----+---------+----------------+---------------------+
|  1 |       1 | User1 | Tweet1 | 2012-07-27 00:04:30 |
|  2 |       1 | User1 | Tweet2 | 2012-07-27 00:04:35 |
|  3 |       2 | User2 | Tweet1 | 2012-07-27 00:04:47 |
|  4 |       3 | User3 | Tweet1 | 2012-07-27 00:04:58 |
|  5 |       1 | User1 | Tweet3 | 2012-07-27 00:06:47 |
|  6 |       1 | User1 | Tweet4 | 2012-07-27 00:06:50 |
|  7 |       1 | User1 | Tweet5 | 2012-07-27 00:06:54 |
+----+---------+----------------+---------------------+

mysql> select * from retweet;
+----+----------+---------+---------------------+
| id | tweet_id | user_id | created_at          |
+----+----------+---------+---------------------+
|  1 |        4 |       1 | 2012-07-27 00:06:37 |
|  2 |        3 |       1 | 2012-07-27 00:07:11 |
+----+----------+---------+---------------------+

# Query to pull all tweets for user_id = 1, including retweets and order from newest to oldest

select * from (
    select t.* from tweet as t where user_id = 1
    union
    select t.* from tweet as t where t.id in (select tweet_id from retweet where user_id = 1))
a order by created_at desc;

mysql> select * from (select t.* from tweet as t where user_id = 1 union select t.* from tweet as t where t.id in (select tweet_id from retweet where user_id = 1)) a order by created_at desc;
+----+---------+----------------+---------------------+
| id | user_id | value          | created_at          |
+----+---------+----------------+---------------------+
|  7 |       1 | User1 | Tweet5 | 2012-07-27 00:06:54 |
|  6 |       1 | User1 | Tweet4 | 2012-07-27 00:06:50 |
|  5 |       1 | User1 | Tweet3 | 2012-07-27 00:06:47 |
|  4 |       3 | User3 | Tweet1 | 2012-07-27 00:04:58 |
|  3 |       2 | User2 | Tweet1 | 2012-07-27 00:04:47 |
|  2 |       1 | User1 | Tweet2 | 2012-07-27 00:04:35 |
|  1 |       1 | User1 | Tweet1 | 2012-07-27 00:04:30 |
+----+---------+----------------+---------------------+ 
```

请注意，在最后一组结果中，我们还能够包含转推并在 #3 转推之前显示 #4 的转推。

**- 更新 -**

您可以通过稍微更改查询来完成您的要求：

```
select * from (
    select t.id, t.value, t.created_at from tweet as t where user_id = 1
    union
    select t.id, t.value, rt.created_at from tweet as t inner join retweet as rt on rt.tweet_id = t.id where rt.user_id = 1)
a order by created_at desc;

mysql> select * from (select t.id, t.value, t.created_at from tweet as t where user_id = 1 union select t.id, t.value, rt.created_at from tweet as t inner join retweet as rt on rt.tweet_id = t.id where rt.user_id = 1) a order by created_at desc;
+----+----------------+---------------------+
| id | value          | created_at          |
+----+----------------+---------------------+
|  3 | User2 | Tweet1 | 2012-07-27 00:07:11 |
|  7 | User1 | Tweet5 | 2012-07-27 00:06:54 |
|  6 | User1 | Tweet4 | 2012-07-27 00:06:50 |
|  5 | User1 | Tweet3 | 2012-07-27 00:06:47 |
|  4 | User3 | Tweet1 | 2012-07-27 00:06:37 |
|  2 | User1 | Tweet2 | 2012-07-27 00:04:35 |
|  1 | User1 | Tweet1 | 2012-07-27 00:04:30 |
+----+----------------+---------------------+ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-29T23:49:24.370

我会选择选项 2，稍作修改。`parent_id`如果不是转推，则推文表中的列应指向自身。然后，查询将非常容易：

```
SELECT tm.Id, tm.UserId, tc.Text, tm.Created, 
    CASE WHEN tm.Id <> tc .Id THEN tm.UserId ELSE NULL END AS OriginalAsker
FROM tweet tm
LEFT JOIN tweet tc ON tm.ParentId = tc.Id
ORDER BY tm.Created DESC 
```

（`tc`是父表 - 有内容的表。它有推文的文本、原始海报的 ID 等）

引入如果不转发则指向自身的规则的原因是，很容易向原始推文添加更多连接。您只需加入一个表格，`tc`而不关心它是否转发。

不仅查询很简单，而且它的性能也比选项 1**好得多**，因为排序只使用一个可以索引的物理列完成。

唯一的缺点是数据库会大一点。

# c# - 检测导航窗口返回事件

> ID：11654421
> 
> 赞同：1
> 
> 时间：2012-07-25T16:31:15.407
> 
> 标签：c#, wpf, navigationwindow

如何确定何时按下导航窗口后退按钮并将该事件捕获到额外的东西。我正在考虑管理页面状态。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:41:03.083

将处理程序添加到`NavigationWindow.Navigating`或`NavigationService.Navigating`。在您的处理程序中：

```
void NavigationService_Navigating(object sender, NavigatingCancelEventArgs e)
{
    if (e.NavigationMode == NavigationMode.Back) {
        e.Cancel = true;

        // TODO: whatever state management you're going to do
    }
} 
```

Ps 您需要注册导航服务。在我的代码中，它不适用于页面构造函数，因为导航服务仍然为空。因此，我将 Loaded="page_Loaded" 添加到 XAML 页面标记并将其分配在那里：

```
bool _navigationServiceAssigned = false;
private void page_Loaded(object sender, RoutedEventArgs e)
{
    if (_navigationServiceAssigned == false)
    {
        NavigationService.Navigating += NavigationService_Navigating;
        _navigationServiceAssigned = true;
    }
} 
```

[`NavigatingCancelEventArgs`](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigatingcanceleventargs)包含有关管理页面状态所需的导航请求的所有信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:36:26.337

`NavigationService`如果您想控制导航过程，提供了许多您可以订阅的事件：

*   导航，当框架即将导航时。将 Cancel 设置为 true 以停止。
*   导航，当导航完成但在呈现之前
*   NavigationFailed，当出现问题时
*   NavigationProgress，当正在下载远程导航调用的块时。
*   NavigationStopped，当调用 StopLoading 方法或在下载过程中发出新的 Navigate 请求时
*   LoadCompleted，当页面被渲染时

# junit - JMockit 模拟超类中的受保护方法，并且仍然在真实子类中测试方法

> ID：11654422
> 
> 赞同：0
> 
> 时间：2012-07-25T16:31:21.583
> 
> 标签：junit, mocking, superclass, jmockit

我仍在学习 JMockit，需要帮助来理解它。

我正在测试一个使用超类方法的类。我的测试在尝试使用超类方法时得到一个空指针，因为其中的代码使用 struts 动作上下文来获取会话并从会话中拉出一个对象。

我想绕过受保护方法中的struts会话内容的方法。

```
public class MyExtendingClass extends MySuperClass{ 
  public void methodIamTesting(){///} 
}

public abstract class MySuperClass{
  //I want to mock this method
  protected Object myProtectedSuperClassMethod(){
// struts action context code that returns an object//}
} 
```

测试代码

```
@Test
public void testRunsAndDoesntPass() {
Mockit.setUpMock(MySuperClass.class, new MySuperClass(){       
  public Object myProtectedSuperClassMethod() {
      return object;
  }
}); 

// real class method invocation happens
assertEquals(expected, actual); 
```

}

我不断得到 NullPointers，就像我没有模拟一样不知道接下来要尝试什么。我读过的所有文档和代码示例都说只需在 setUpMock 中将超类方法声明为 public，它应该可以工作。

我不能嘲笑整个班级，因为那是我正在测试的班级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-01-08T04:28:57.807

你完全屏蔽了父类的实现`@Mocked final MySuperClass base`

```
abstract class MySuperClass{
    protected Object myProtectedSuperClassMethod(){
}

class MyExtendingClass extends MySuperClass{ 
    public void methodIamTesting(){///} 
}

@Test
public void testRunsAndDoesntPass(@Mocked final MySuperClass base ) {
    //you could mask out all the base class implementation like this
    new Expectations(){{
        invoke(base, "myProtectedSuperClassMethod");
    }};

    // real class method invocation happens
    // ...
    assertEquals(expected, actual);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:04:34.593

我发现我需要创建 MockClass 然后使用 setupmock 正确引用它。

我真的爱上了 JMockit。

```
@MockClass(realClass = MyExtendingClass.class)
public static class MockSuperClass {
  final Object object = new Object();

  @Mock
  public Object myProtectedSuperClassMethod() {
      return object;
 }}
@Test
public void testRunsAndNowWillPass() {

Mockit.setUpMock(MySuperClass.class, new MockSuperClass(){
public Object myProtectedSuperClassMethod() {
  return object;
}});
// real class method invocation happens where i set expected and actual
assertEquals(expected, actual);
} 
```

# c - x86 程序集小写未处理异常

> ID：11654423
> 
> 赞同：0
> 
> 时间：2012-07-25T16:31:25.110
> 
> 标签：c, x86, access-violation, inline-assembly

> **可能重复：**
> [x86 转换为小写程序集](https://stackoverflow.com/questions/11656464/x86-convert-to-lower-case-assembly)

该程序是将二维字符数组转换为小写 Quickie 编辑：我正在使用 Visual Studio 2010

```
int b_search (char list[100][20], int count, char* token)
{
__asm
{
    mov eax, 0          ; zero out the result
mov esi, list       ; move the list pointer to ESI
mov ebx, count      ; move the count into EBX
mov edi, token      ; move the token to search for into EDI 
MOV ecx, 0

LOWERCASE_TOKEN:            ;lowercase the token
OR [edi], 20h
INC ecx
CMP [edi+ecx],0
JNZ LOWERCASE_TOKEN
MOV ecx, 0 
```

在我的 OR 指令中，我试图将包含要标记的地址的寄存器更改为全部小写，我不断收到未处理的异常......访问冲突，并且没有括号，任何内容都不会小写。稍后在我的代码中

```
LOWERCASE_ARRAY:        ;for(edi = 0, edi<ebx; edi++), loops through each name
CMP ecx, ebx
JGE COMPARE
INC ecx             ;ecx++
MOV edx, 0;         ;edx = 0

LOWERCASE_STRING:       ;while next char != 0, loop through each byte to convert to lower case
OR [esi+edx],20h    ;change to lower case
INC edx
CMP [esi+edx],0     ;if [esi+edx] not zero, loop again
JNZ LOWERCASE_STRING
JMP LOWERCASE_ARRAY ;jump back to start case change of next name 
```

并且`OR`那里的指令似乎工作得很好，所以我不知道为什么第一个不起作用。另外，我正在尝试转换几个字符串。

在我完成一个字符串后，任何想法我将如何进入下一个字符串（如`list[1][x]`,`list[2][x]`等...）我尝试添加 20 ，`[esi+20*ecx+edi]`但这不起作用。我可以就如何进行获得建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:44:03.477

一种可能：

如果过程的参数`b_search`存储为寄存器（寄存器调用约定），那么您`list`在第一行 asm 中覆盖指针，因为 eax 指向`list`数组：

```
mov eax, 0          ; zero out the result 
```

因为：

```
mov esi, list       ; move the list pointer to ESI 
```

应转换为：

```
mov esi, eax 
```

**尝试将第一行和第二行交换为：**

```
mov esi, list       ; move the list pointer to ESI
mov eax, 0          ; zero out the result 
```

# javascript - 如何在翻转期间暂停 JavaScript 执行？

> ID：11654426
> 
> 赞同：0
> 
> 时间：2012-07-25T16:31:32.283
> 
> 标签：javascript, debugging, webkit

我正在寻找一种方法来捕获在翻转时呈现的对象的 HTML。一个例子是：

1.  将鼠标悬停在对象上以获取弹出窗口
2.  按按钮或键暂停js（防止鼠标移出触发）
3.  右键单击并检查元素以获取 HTML

有谁知道这样做的方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:41:47.007

对于您的主要问题，有两种方法可以暂停 Javascript 线程的执行：

1.  在调试器中命中断点
2.  将一个插入`alert()`到 javascript 线程中，当它触发时，它将暂停该 javascript 线程的执行，直到解除警报对话框。

您还没有描述您正在运行的环境以及您可以或不能对主机页面进行哪些类型的修改，以便我们更具体地建议。

要以不同的方式解决问题，要捕获一些动态插入的 HTML，还有其他策略。例如，您可以使用自己的 javascript（如小书签）将事件处理程序附加到鼠标悬停。然后，您可以设置一个计时器，当动态生成的 HTML 似乎存在时进行监视并获取它的副本。请记住，javascript 是单线程的，因此您自己的计时器只会在其他 javascript 线程等待用户输入时运行，但如果一般模型是它在鼠标悬停时弹出一些东西然后等待其他鼠标事件，那么这可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:38:17.307

是的，`<object onmouseover="functionPopup();" onmouseout="functionWrap();">`

然后放置您的 onkeyup-event 以检测按钮/键。

诀窍是将functionWrap留在对象上！！！！并用更新的指令覆盖这个函数 functionWrap() （由对象的 onmouseout 引用）（这工作得很好跨浏览器 - 甚至是旧的 - 因为它使用传统的事件模型 :P ）。

快乐调整！

# php - 使用 INSERT INTO On Duplicate Key UPDATE 进行表单输入

> ID：11654428
> 
> 赞同：0
> 
> 时间：2012-07-25T16:31:33.720
> 
> 标签：php, mysql, on-duplicate-key

你如何使用`INSERT INTO On Duplicate Key UPDATE`表单输入？我在网上找到的所有示例都带有计数器或预定值。

我已经能够使用标准`UPDATE`和`SET`方法让我的代码工作（感谢一些非常有帮助的成员），但我的表格确实需要使用`INSERT INTO On Duplicate Key UPDATE`.

`'user_id'`是所有表中的唯一主键，并且是除帐户表之外的所有表中的外键。

```
<?php
session_start();  
require_once('config.php'); 
require_once('open_db.php');     

$setlist='';
foreach ($_POST as $key=>$value) {
  $setlist.=$key .'=\''.$value.'\',';
}

$setlist=substr($setlist, 0, -1);
$user_id=$_SESSION['SESS_USER_ID'];  
$sql='UPDATE style_test SET '.$setlist.' WHERE user_id='.$user_id;

if (!mysql_query($sql,$con)) {
  die('Error: ' . mysql_error());
}         
?> 
```

我之前用来自动插入每个字段的代码是：

```
$fieldlist=$vallist='';
foreach ($_POST as $key => $value) {
  $fieldlist.=$key.',';
  $vallist.='\''.urlencode($value).'\',';
}
$fieldlist=substr($fieldlist, 0, -1);
$vallist=substr($vallist, 0, -1);

$user_id=$_SESSION['SESS_USER_ID'];
$fieldlist.=', user_id';
$vallist.=','.$user_id;

$qry='INSERT INTO style_test1 ('.$fieldlist.') VALUES ('.$vallist.')'; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:32:28.870

语法高亮显示您的问题在哪里：

```
$sql='UPDATE style_test SET ;.$setlist.' WHERE user_id='.$user_id;
                            ^
                            Here 
```

这需要是一个单引号：

```
$sql='UPDATE style_test SET '.$setlist.' WHERE user_id='.$user_id; 
```

您还应该注意，这些`mysql_*`功能已被弃用，您不应该使用它们。此外，您的原始代码对 SQL 注入是开放的。

对于重复键更新，您将其添加到 SQL 查询中，然后是`column = value`您要更新的所有字段：

```
$sql='INSERT INTO style_test SET ' . $setlist.' WHERE user_id = ' . $user_id. ' ON DUPLICATE KEY UPDATE ' . $setlist; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:47:05.640

确保您正在转义表单输入。现在你对 SQL 注入持开放态度。至少使用 mysql_real_escape_string 或使用 is_numeric 来确保数值是数字而不是 SQL。您拥有的代码非常危险，因为它会获取用户键入的任何内容并将您的数据库暴露给它。

# ruby-on-rails - 订阅电子邮件列表按钮

> ID：11654429
> 
> 赞同：1
> 
> 时间：2012-07-25T16:31:34.700
> 
> 标签：ruby-on-rails

我想制作一个按钮，将用户表上的订阅列从 0 更改为 1，反之亦然，但我从未尝试在新页面或编辑页面之外更改数据库。我该怎么做呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:32:05.373

我会建议

链接是：<%= button_to 'subscribe', :confirm => 'Are you sure?', :method => :put, :remote => true %>

在用户模型上定义一个名为 subscribe 的方法

在用户控制器中定义一个新操作，例如

```
def subscribe
  @user=Content.find(params[:id])
  if @user.update_attributes(:subscribe => true)
    flash[:success] = "User subscribed"
    ajax_redirect_to user_path(@user)
  else
    #render partial with error message or something
  end
end 
```

# dynamics-crm-2011 - 隐藏 CRM 表单左侧导航项

> ID：11654431
> 
> 赞同：3
> 
> 时间：2012-07-25T16:31:41.353
> 
> 标签：dynamics-crm-2011

我将我的帐户实体链接到一个名为检查的自定义实体，我只希望为某种类型的帐户创建这些检查。因此，当它不是那种类型时，我希望隐藏该实体的左侧导航。我见过一些代码说只要你有项目的 navID 就会把它隐藏起来。

我已经使用我认为可能是 ID 的东西隐藏它，但它没有用，所以我想知道是否有人知道如何获得这个 ID，或者是否有其他方法可以做到这一点？

我用来隐藏导航的代码如下：

```
var navitem = Xrm.Page.ui.navigation.items.get("nav_ts_inspection"); 

    if (navitem != null)  
    {           
        navitem.setVisible(false);
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:06:04.307

*   加载表格
*   按 F12 显示 IE 开发者工具栏

您可以在此处`CTRL+F`搜索要隐藏的项目的显示名称。这将为您提供`a`生成的链接。此元素的 Id 是您需要用来显示/隐藏链接的内容。

例如，您可以在我正在处理的安装的帐户屏幕上看到搜索“子帐户”的结果。可以看到 Id 并且是“navSubAct”

![在此处输入图像描述](../Images/9f1a75a295e5b3148b78382d80e1aa45.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-21T06:50:02.513

不支持通过遍历 DOM 和手动隐藏区域进行更改。

幸运的是，如果您使用的是 CRM 2011，您可以转到设置 > 自定义或打开解决方案。

选择实体 > 表单。在表单编辑器窗口中，打开实体的**表单属性**。

转到**显示**选项卡并取消选中“*显示导航项*”复选框。

最后不要忘记发布您的更改。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-19T13:24:56.187

使用关系名称在导航中隐藏文件夹，如下所示：

如果您有具有关系名称的文件夹：`ts_inspection`

将此用于 ID：`navts_inspection`

所以在其他方面与上面相同，但在`nav`和之间丢失了额外的下划线（_） `ts`。

```
var navitem = Xrm.Page.ui.navigation.items.get("navts_inspection"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-28T12:27:11.687

如果您想从 FORM 中隐藏特定的导航部分，则从该部分中删除所有链接并发布它。该部分将不再可见。

如果您只想从表单中删除导航窗格，请转到表单的“显示”选项卡并标记为“不显示”，然后发布它。

# mysql - 在 MySQL 中将文本列转换为整数

> ID：11654433
> 
> 赞同：2
> 
> 时间：2012-07-25T16:31:54.037
> 
> 标签：mysql

我正在尝试创建一个清理表，用整数替换 varchar(50) 字段。原始字段偶尔有我想转换为 0 或空值的文本值。我可以在 select 语句中执行此操作，但在尝试创建表时会出错。

下面是一个使用字符串的最小示例：

```
/* This works */
DROP TABLE IF EXISTS mytest;
CREATE TABLE mytest
AS
   SELECT convert("123", unsigned) AS mynum;

/* This works, returning a row of 0 */
SELECT convert("TEST", unsigned) AS mynum;

/* But this fails, with:  Truncated incorrect INTEGER value: 'TEST'*/
DROP TABLE IF EXISTS mytest;
CREATE TABLE mytest
AS
   SELECT convert("TEST", unsigned) AS mynum;` 
```

以上有什么问题，有没有更好的方法来完成我想要的？谢谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:34:57.797

我没有解释为什么会发生该错误，但我找到了使用子查询的解决方法：

```
DROP TABLE IF EXISTS mytest;
CREATE TABLE mytest
AS
    SELECT mynum
    FROM (SELECT convert("TEST"), unsigned) AS mynum) t; 
```

演示：[http ://www.sqlfiddle.com/#!2/4909a/1](http://www.sqlfiddle.com/#!2/4909a/1)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:45:08.870

我会为它使用一个 case 语句，并切换到使用 CAST 而不是转换，这样你会得到失败而不是隐式转换。

```
CREATE TABLE mytest(myVarchar varchar(10));
INSERT mytest VALUES ('123'),('TEST');

SELECT CASE
    WHEN  myVarchar REGEXP '^[0-9]+$' THEN CAST(myVarchar,unsigned)
    ELSE 0
END As mynum
FROM mytest; 
```

我没有方便的 mysql 实例来测试它，所以希望我没有弄错任何语法错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:38:19.113

您可以更新数据然后更改表，而不是转换：

```
UPDATE mytest SET mynum=mynum + 0;
ALTER TABLE mytest CHANGE COLUMN mynum mynum INT UNSIGNED; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:46:38.223

看起来您正在通过 create 中的 select 语句隐式定义列名。这可能假设“TEST”字符串是数据类型。查看您收到的错误消息会有所帮助，但我的假设是将列明确定义为：

```
CREATE TABLE mytest(mynum int); 
```

然后

```
Insert into mytest(mynum)
select convert("TEST",unsigned) as mynum; 
```

这也是为什么子查询的答案可能有效的原因，当它到达外部查询时，它被隐式定义为 int。

# powershell - 我可以使 PowerShell $error 对象在脚本和交互模式下的行为一致吗？

> ID：11654435
> 
> 赞同：4
> 
> 时间：2012-07-25T16:32:01.177
> 
> 标签：powershell, exception-handling, powershell-ise

我正在编写一个`$error`用于检测和响应错误的 PowerShell 脚本。我的问题是，`$error`根据我运行脚本的方式，我会得到不同的对象行为。如果我以交互方式运行它（特别是从 PowerShell ISE），则会将错误添加到集合中，但如果我从命令行运行相同的脚本，则会发生相同的错误，但不会添加到集合中。

这是脚本（简化以说明问题）：

```
# export_exception_test.ps1

# show me how many errors before we start
"Count = " + $error.Count

try {
    # treat non-terminating errors as terminating errors.
    $ErrorActionPreference = "Stop"
    # echo the setting to output
    $ErrorActionPreference

    # use sqlcmd to save the output of stored procedures to text files.
    # The first and third call will fail because the output folder does not exist.
    # The second call will succeed.
    'first call to sqlcmd'
    sqlcmd -S myserver\myinstance -E -s `"`t`" -Q "EXEC mydatabase.dbo.FI_Codes" -b -o "B:\Exports_new\FI_Codes.txt"
    'second call to sqlcmd'
    sqlcmd -S myserver\myinstance -E -s `"`t`" -Q "EXEC mydatabase.dbo.FI_Codes" -b -o "B:\Exports_newt\FI_Codes.txt"
    'third call to sqlcmd'
    sqlcmd -S myserver\myinstance -E -s `"`t`" -Q "EXEC mydatabase.dbo.FI_Codes" -b -o "B:\Exports_new\FI_Codes.txt"
    # and a whole bunch more of these...

    # The error count should be two more than when we started.
    "Count = " + $error.Count
    # And this should be the most recent error message
    "Message = " + $error[0].Message

}
catch [Exception]
{
    'exception was caught!!!'
    "Count in catch clause = " + $error.Count
    $_.Exception.Message
    # the ultimate goal is to return a non-successful return code when the exports fail
    exit 1
}
finally {
    # set this back to what it was
    $ErrorActionPreference = "Continue"

    # primitive trace output
    'finally.'
} 
```

当我从 PowerShell ISE 运行它时，它的行为符合预期。SQLCMD 引发一个非终止错误，该错误被捕获和处理。这是输出：

```
PS U:\> C:\Users\etmatt\Documents\PowerShellScripts\export_exception_test.ps1
Count = 0
Stop
first call to sqlcmd
exception was caught!!!
Count in catch clause = 1
Sqlcmd: Error: Error occurred while opening or operating on file B:\Exports_new\FI_Codes.txt (Reason: The system cannot find the path specified).
finally. 
```

但是当我从命令行运行它时，就像我要设置一个计划任务一样，没有任何内容被添加到`$error`，并且没有引发异常。这是输出：

```
C:\Users\etmatt>powershell.exe -file "C:\Users\etmatt\Documents\PowerShellScripts\export_exception_test.ps1"
Count = 0
Stop
first call to sqlcmd
Sqlcmd: Error: Error occurred while opening or operating on file B:\Exports_new\FI_Codes.txt (Reason: The system cannot find the path specified).
second call to sqlcmd
third call to sqlcmd
Sqlcmd: Error: Error occurred while opening or operating on file B:\Exports_new\FI_Codes.txt (Reason: The system cannot find the path specified).
Count = 0
Message =
finally.

C:\Users\etmatt> 
```

如果我从 powershell 命令行而不是 cmd.exe（这是有道理的）运行脚本文件，我也会得到相同的结果。例如：

```
PS C:\> ."C:\Users\etmatt\Documents\PowerShellScripts\export_exception_test.ps1" 
```

我怀疑这与执行上下文有关，或者可能与我仍然不太了解的解析器模式有关，甚至可能与我的个人资料有关（尽管到目前为止，我一直在同一台 PC 上运行同一帐户下的所有内容） . 我在网上看到了很多使用这种基本方法的示例`try/catch`with `$ErrorActionPreference = "Stop"`，所以看起来我应该能够完成这项工作。

所以我的问题本质上是：我可以让这个脚本像我认为的那样工作吗？如果不是，我有什么误解？我如何捕捉到这些类型的错误？如果有帮助，我不需要对此进行超级详细的异常处理，我只需要知道什么时候出现问题，以便我的任务监视器可以提醒我。powershell.exe 的非零返回码就足够了。

我正在研究使用`$?`, 和`$LASTEXITCODE`，但我打赌`$?`会遇到与 , 相同的问题`$error`，并且两者都只适用于执行的最后一条语句，这不太理想，因为我的真实脚本比这个例子长得多。

**编辑：**
好的，我已经了解到 Windows 可执行文件（例如 sqlcmd）永远不会向`$error`集合中添加任何内容，即使它们返回非零退出代码。`$error`如果我理解正确，仅由 cmdlet 使用。`$LASTEXITCODE`尽管我也可以使用，但我的脚本通过重复使用来工作`$?`，因为它可以识别 Windows 可执行退出代码，并且对于非零值设置为 false。

总而言之，从命令行运行脚本时的行为是正确的、预期的行为。不过，我仍然不知道为什么我从 PowerShell ISE 得到不同的结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-01T18:13:50.873

对我来说，我正在调用批处理命令，`cmd /C <command>`并且我遇到了类似的问题。对于非零返回代码`$?`设置正确但没有`$error`对象（powershell 怎么知道？所以这没关系）并且代码在 ISE 和命令行执行中的行为相似。

我的问题是，在这种情况下，`$ErrorActionPreference = "Stop"`它不会抛出异常。可能是因为它没有`$error`对象可以抛出。所以现在我需要`$?`在每次调用其他不整洁的脚本或程序后检查。他们应该为这种情况提出很好的解决方案（可能通过抛出内置异常说调用外部脚本/程序失败）

# iphone - how to get the values from the XML

> ID：11654442
> 
> 赞同：1
> 
> 时间：2012-07-25T16:32:34.807
> 
> 标签：iphone, ios, delegates, xml-parsing, nsxmlparser

I wants use google weather api in my project. [here](http://www.google.com/ig/api?weather=nabha) I am struggling from long time. to get the current temperature. city, humidity,day of week etc

I successfully hit the url. but I not know exact what i do in foundCharacter method to fetch the value.

Thanks

```
- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname       namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict{
    if ([elementname isEqualToString:@"weather"]) 
    {
            currentTweet = [Tweet alloc];
    }
}

 - (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName{
    if ([elementname isEqualToString:@"city"]) 
     {

     }
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:14:26.367

请检查代码：

```
- (void) parser:(NSXMLParser *)parser didStartElement:(NSString *)elementname       namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName attributes:(NSDictionary *)attributeDict
{
    if ([elementname isEqualToString:@"weather"]) 
    {
            currentTweet = [Tweet alloc];
    }
    else if ([elementname isEqualToString:@"city"]) 
    {
          currentTweet.city = [attributeDict valueForKey:@"city"]
    }
}

- (void) parser:(NSXMLParser *)parser didEndElement:(NSString *)elementname namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
 {
    if ([elementname isEqualToString:@"weather"]) 
     {
           NSLog("Current City: %@",currentTweet.city);
     }
 } 
```

对于这种类型的 xml，您不想使用`parser:foundCharacters:`

引用 NSXMLPareser 参考指南中有关`foundCharacters`方法的内容：

> 由解析器对象发送，以向其委托提供表示当前元素的全部或部分字符的字符串。
> 
> 解析器对象可以向委托发送几个 parser:foundCharacters: 消息来报告元素的字符。因为字符串可能只是当前元素的全部字符内容的一部分，所以您应该将它附加到当前的字符累积中，直到元素发生变化。

有关更多详细信息：[NSXML 解析器参考](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSXMLParser_Class/Reference/Reference.html)， [解析器的工作](http://homepages.ius.edu/rwisman/C490/html/nsxmlparser.htm)，[`foundCharacters`使用](http://4arrowsmedia.com/blog/2010/06/17/iphone-xml-parsing/)

# cakephp - 如何进行本地化 - CakePHP

> ID：11654443
> 
> 赞同：0
> 
> 时间：2012-07-25T16:32:37.540
> 
> 标签：cakephp, localization, locale

我希望能够使用本地化功能测试我的 cakephp 网页。

我使用翻译函数 __() 并且还使用日期和时间函数：`toLocaleString()`

我想知道如何以简单的方式测试翻译和本地化。

我知道这`toLocaleString()`将以本地格式输出日期和时间。

我尝试在控制器的 beforeFilter() 中使用以下代码：

```
$this->Session->write('Config.langauge', 'ger');
Configure::write('Config.language', 'fre'); 
```

上面两行代码没有用。这也不起作用：

```
setlocale(LC_ALL, 'de', 'ge'); 
```

我正在使用 Ubuntu 10.04。我还安装了西班牙语、法语和德语语言包。

在 cakephp 调试工具包中，显示语言发生了变化，但日期和时间字符串完全没有变化。我不确定我做错了什么。

至于测试，一旦设置了语言环境，日期和时间应该可以工作，但是对于翻译功能，我该如何测试呢？我查看了 cakephp 文档，但它说要使用 i18n 控制台命令。我尝试运行命令来提取 pot 文件，并选择了我的源和输出目录，但完成后目录中没有显示任何内容。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T04:12:58.533

请参阅以下网址

[http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html](http://book.cakephp.org/2.0/en/core-libraries/internationalization-and-localization.html)

或者试试这个：

```
//Internationalizing Your Application

<h2><?php echo __('Posts'); ?></h2>

The default domain is ‘default’, therefore your locale folder would look something like this:

/app/Locale/eng/LC_MESSAGES/default.po (English)
/app/Locale/fre/LC_MESSAGES/default.po (French)
/app/Locale/por/LC_MESSAGES/default.po (Portuguese)

<?php
// App Controller Code.
public function beforeFilter() {
    $locale = Configure::read('Config.language');
    if ($locale && file_exists(VIEWS . $locale . DS . $this->viewPath)) {
        // e.g. use /app/View/fre/Pages/tos.ctp instead of /app/View/Pages/tos.ctp
        $this->viewPath = $locale . DS . $this->viewPath;
    }
}

or:

<?php
// View code
echo $this->element(Configure::read('Config.language') . '/tos');

//Localization in CakePHP

<?php
Configure::write('Config.language', 'fre');
?>

<?php
$this->Session->write('Config.language', 'fre');
?>

<?php
class AppController extends Controller {
    public function beforeFilter() {
        Configure::write('Config.language', $this->Session->read('Config.language'));
    }
}
?>

///Translating model validation errors

<?php
class User extends AppModel {

    public $validationDomain = 'validation';

    public $validate = array(
        'username' => array(
                'length' => array(
                'rule' => array('between', 2, 10),
                'message' => 'Username should be between %d and %d characters'
            )
        )
    )
}
?>

//Which will do the following internal call:

<?php
__d('validation', 'Username should be between %d and %d characters', array(2, 10)); 
```

# spring - Track User login and logout with sessiontracking using Spring

> ID：11654444
> 
> 赞同：0
> 
> 时间：2012-07-25T16:32:38.157
> 
> 标签：spring, session, spring-mvc, spring-security, sessionid

I'm using Spring MVC and have to implement session tracking through programatically.

When user logged in, check some info related to credentials and get the rememberedParameter(SessionId) from Oracle coherence and send it back to User, further requests from the same user should accompany by rememberedParameter so that session will be remembered for 30 mins..After 30 mins user has to be logged out and redirected to login page.

Above is my scenario, I could implement it manually through java program but is there any framework which will do it for me?

Will Spring Security will cover this scenario?

Pls advice me..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T19:04:19.183

使用 Oauth 框架..真的很好...

# android - Disabling anti-aliasing/dithering/other image enhancements on background drawables / 9-patch pngs

> ID：11654448
> 
> 赞同：0
> 
> 时间：2012-07-25T16:32:54.157
> 
> 标签：android, android-layout

I am having trouble removing anti-aliasing on a 9-patch png and a normal drawable that is tiled to make a background. I am using the 9-patch as a background for my `EditText` controls and the tiled drawable is used as a background for an `ImageView` to create the 'divider'.

Here is some enlarged versions of my 9 patch png (it's hard to show white graphics so I filled in the transparent areas in blue):

![9 patch](../Images/a96eca9d797b11817a31e8ceebc2b542.png)

And my tiled background image along with the xml that defines the tiled pattern:

![tile](../Images/83bbb3d2ccee227261e3b87339b101a1.png)

```
<?xml version="1.0" encoding="utf-8"?>
<bitmap xmlns:android="http://schemas.android.com/apk/res/android"
    android:src="@drawable/border_diagonal_lines"
    android:tileMode="repeat"
    /> 
```

Here is the whole thing put together:

![app screenshot](../Images/722f9625fdfea38b041576a57f10b3d2.png)

The screenshot on the left is what I currently get and the screenshot on the right is what I want it to look like. What could I do to achieve the desired effect?

I also would like the imageview with the tiled background to always be 3 pixels tall regardless of screen resolution but using 'pixels' as units is generally a bad idea. Is there a way round this?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:46:21.163

它不是对您的图形进行抗锯齿，它可能是在缩放它们（当然，这也可能执行抗锯齿，但这不是原因）。您是否将它们放在正确的密度特定文件夹中？（例如`drawable-hdpi`,`drawable-xhdpi`等）如果您*这样*做，还要确保您没有`android:anyDensity="true"`在清单中使用该标签。

> 我还希望具有平铺背景的图像视图始终为 3 像素高，无论屏幕分辨率如何，但使用“像素”作为单位通常是个坏主意。有办法解决这个问题吗？

在一般情况下不鼓励这样做，当系统应该处理多个密度的缩放时（使用 DP 代替），但如果您特别需要 3 个像素高的东西，那么指定像素高度并没有什么“坏处”。

# javascript - Jquery get form field value

> ID：11654449
> 
> 赞同：79
> 
> 时间：2012-07-25T16:32:56.027
> 
> 标签：javascript, jquery

I am using a jquery template to dynamically generate multiple elements on the same page. Each element looks like this

```
<div id ="DynamicValueAssignedHere">
    <div class="something">Hello world</div>
    <div class="formdiv">
        <form name="inpForm">
            <input type="text" name="FirstName" />
            <input type="submit" value="Submit" />
        </form>
    </div>
</div> 
```

I would like to use Jquery to process the form on submit. I would also like to revert the form values to their previous values if something should go wrong. My question is How can I get the value of input box using Jquery? For example, I can get the value of the div with class "something" by doing

```
var something = $(#DynamicValueAssignedHere).children(".something").html(); 
```

In a similar fashion, I want to be able to retrieve the value of the textbox. Right now, I tried

```
var text = $(#DynamicValueAssignedHere).children(".formdiv").findnext('input[name="FirstName"]').val(); 
```

but it doesn't seem to be working

* * *

## 回答 #1

> 赞同：152
> 
> 时间：2012-07-25T16:36:31.967

你必须使用`value attribute`才能获得它的价值

```
<input type="text" name="FirstName" value="First Name" /> 
```

尝试 -

```
var text = $('#DynamicValueAssignedHere').find('input[name="FirstName"]').val(); 
```

* * *

## 回答 #2

> 赞同：56
> 
> 时间：2012-07-25T16:36:04.357

它可以比你正在做的简单得多。

HTML：

```
<input id="myField" type="text" name="email"/> 
```

JavaScript：

```
// getting the value
var email = $("#myField").val();

// setting the value
$("#myField").val( "new value here" ); 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2015-11-16T14:42:09.557

另一种方法，无需搜索字段 html：

```
var $form = $('#' + DynamicValueAssignedHere).find('form');
var formData = $form.serializeArray();
var myFieldName = 'FirstName';
var myFieldFilter = function (field) {
  return field.name == myFieldName;
}
var value = formData.filter(myFieldFilter)[0].value; 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-08-12T11:45:09.813

```
$("form").submit(function(event) {

      var firstfield_value  = event.currentTarget[0].value;

      var secondfield_value = event.currentTarget[1].value; 

      alert(firstfield_value);
      alert(secondfield_value);
      event.preventDefault(); 
     });
```

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<form action="" method="post" >
<input type="text" name="field1" value="value1">
<input type="text" name="field2" value="value2">
</form>
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-07-25T16:38:50.950

如果你知道输入的 id，你只需要使用这个：

```
var value = $("#inputID").val(); 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-07-25T16:40:03.777

```
var textValue = $("input[type=text]").val() 
```

这将获得所有文本框的所有值。您可以使用 children、firstchild 等方法进行磨练。例如通过 form $('form[name=form1] input[type=text]') 更容易使用 ID 来定位元素，但如果它是纯动态的，您可以获得所有输入值然后使用 JS 循环。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-31T09:14:19.270

您可以通过以下方式获取任何输入字段值 `$('input[fieldAttribute=value]').val()`

这是一个例子

```
displayValue = () => {

  // you can get the value by name attribute like this

  console.log('value of firstname : ' + $('input[name=firstName]').val());

  // if there is the id as lastname

  console.log('value of lastname by id : ' + $('#lastName').val());

  // get value of carType from placeholder  
  console.log('value of carType from placeholder ' + $('input[placeholder=carType]').val());

}
```

```
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<div class="formdiv">
    <form name="inpForm">
        <input type="text" name="firstName" placeholder='first name'/>
        <input type="text" name="lastName" id='lastName' placeholder='last name'/>

        <input type="text" placeholder="carType" />
        <input type="button" value="display value" onclick='displayValue()'/>

    </form>
</div>
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-01-25T07:22:43.680

您可以尝试以下几行：

```
$("#DynamicValueAssignedHere .formdiv form").contents().find("input[name='FirstName']").prevObject[1].value 
```

# java - How to restart JVM when it runs out of memory by using JMX monitoring?

> ID：11654450
> 
> 赞同：8
> 
> 时间：2012-07-25T16:32:57.357
> 
> 标签：java, jmx

I want to create a nagios watchdog for JVM that looks when the JVM runs out of memory and restarts it.

Currently I was able to setup the JVM be allow JMX but I don't know how to detect OutOfMemory condition and restart it.

```
 /check_jmx -U service:jmx:rmi:///jndi/rmi://127.0.0.1:1100/jmxrmi -O "java.lang:type=Memory" -A "HeapMemoryUsage" -K used -I HeapMemoryUsage -J used -vvvv
 JMX OK HeapMemoryUsage.used=957414288{committed=2415984640;init=2147483648;max=2863333376;used=957414288} 
```

[https://github.com/tcurdt/nagios-check-jmx](https://github.com/tcurdt/nagios-check-jmx)

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T18:42:36.457

如果您使用的是 Java 1.4.2 或更高版本，则此选项允许您在第一个 OutOfMemory 异常发生时执行用户定义的命令：[-XX:OnOutOfMemoryError="<cmd args>;<cmd args>"](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)

那应该给你一些不错的选择。例如，您可以启动对 nagios 的被动检查，告诉它服务器正在重新启动，然后启动一个 shell 脚本来停止/启动错误的 JVM。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:17:06.663

我认为您将无法使用 JMX 检测到内存不足的情况。如果 JVM 真的到了生命的尽头，那么当您尝试连接时，JMX 连接很可能会自己抛出 OOM 异常。

我们检测*高*内存条件而不是 OOM。当我们系统的可用内存在一定时间内低于某个水位线时，我们会发出警报。我们也有线程运行以转储每个服务的度量文件。由于线程已经分配，​​它可以在 JVM 用完后可靠地转储系统内存信息。

我们记录：

```
// free memory
Runtime.getRuntime().freeMemory()
// current heap usage
Runtime.getRuntime().totalMemory() - Runtime.getRuntime().freeMemory() 
```

# java - java String - String index out of range , charAt

> ID：11654455
> 
> 赞同：0
> 
> 时间：2012-07-25T16:33:11.660
> 
> 标签：java, string, numbers, char, range

I try to make a program which it can find palindromic number (it has to be pruduct of two 3-digits number and I hope that it contain 6 digit but it is not important). Here is my code:

```
public class palindromicNumber {
    public static void getPalindromicNumber() {
        boolean podminka = false;
        int test;
        String s;
        for (int a = 999; podminka == false && a > 100; a--) {
            for (int b = 999; podminka == false && b > 100; b--) {
                test = a * b;
                s = Integer.toString(test);
                int c = 0;
                int d = s.length();
                while (c != d && podminka == false) {

                    if (s.charAt(c) == s.charAt(d)) { // I think that problem is here but I can't see what
                        System.out.println(s);
                        podminka = true;
                    }
                    c++;
                    d--;
                }
            }
        }
    }
} 
```

and if I want to compile it :

```
Exception in thread "main" java.lang.StringIndexOutOfBoundsException: String index out of range: 6
at java.lang.String.charAt(String.java:695)
at faktorizace.palindromicNumber.getPalindromicNumber(palindromicNumber.java:24)
at faktorizace.Faktorizace.main(Faktorizace.java:19) 
```

Java Result: 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:37:27.797

这里有两个问题：

*   正如其他答案所提到的，您从错误的上限开始
*   如果`c`以奇数`d`开始并以偶数开始，则`c`永远*不会*等于`d`。你需要使用

    ```
    while (c < d && !podminka) // Prefer !x to x == false 
    ```

此外，明智地使用`break`and`return`将避免您必须拥有`podminka`。

另外，你有一个关注点分离问题*。*您的方法目前做了三件事：

*   以特定方式迭代数字
*   检查它们是否是回文的
*   打印它找到的第一个

你应该把它们分开。例如：

```
public void printFirstPalindrome() {
    long palindrome = findFirstPalindrome();
    System.out.println(palindrome);
}

public long findFirstPalindrome() {
    // Looping here, calling isPalindrome
}

public boolean isPalindrome(long value) {
    // Just checking here
} 
```

我怀疑`findFirstPalindrome`通常也会采用一些参数。此时，您将拥有更容易编写和测试的方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:35:34.587

字符串索引来自`[0..length - 1]`

更改`int d = s.length();`为`int d = s.length() - 1;`

**更新**：顺便说一句，您正在设置`podminka`何时`true`

`s.charAt(c) == s.charAt(d)`

`s = 100101`例如，如果您将在 while 循环的第一次迭代中终止所有循环，因为第一个字符和最后一个字符相同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:36:21.853

`int d = s.length();`

字符串字符数组只会从 0 - length-1 开始。

`s.charAt(d)`在第一次迭代时总是会越界。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:37:42.360

看一下JDK源代码：

```
public char charAt(int index) {
    if ((index < 0) || (index >= count)) {
        throw new StringIndexOutOfBoundsException(index);
    }
    return value[index + offset];
} 
```

您可以看到当 index 小于零或超过字符串长度时会引发此异常。现在使用调试器，调试你的代码，看看你为什么把这个错误的参数值传递给`charAt()`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T16:37:46.597

```
 public class palindromicNumber {
           public static void getPalindromicNumber(){
              boolean podminka = false;
               int test;
               String s;
            for(int a = 999;podminka == false && a>100; a-- ){
              for(int b = 999;podminka == false && b>100; b-- ){
                test = a*b;
                s = Integer.toString(test); 
                int c = 0;
                int d = s.length();
                while(c!=d && podminka == false){                          

                  if(s.charAt(c)==s.charAt(d - 1)){  
                    System.out.println(s);
                      podminka = true;                                
                }
                      c++;
                       d--;
                 }
                  } 
```

}

尝试这个！字符串计数从 0 开始！

# css - GWT 样式单元格表标题

> ID：11654460
> 
> 赞同：2
> 
> 时间：2012-07-25T16:33:37.743
> 
> 标签：css, gwt, header, styling, celltable

我正在添加一个具有颜色的列，默认样式的边距太宽。我添加了一个样式来解决这个问题。这有效，直到我指定一个标题（我不想要任何标题文本，但为了防止列排序混乱，显然我必须指定，所以它的“”）。

发生的情况是标题导致整个列再次太宽。但是，如何更改此标头的样式？不过，我真的不想更改所有标题。

```
colorColumn.setCellStyleNames("SkinnyColumn");
table.addColumn(colorColumn, ""); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-26T09:00:11.720

GWT 2.4.0 似乎不可能做到这一点。

然而，对于 2.5，`Header`有一个新的[`getHeaderStyleNames`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/Header.html#getHeaderStyleNames%28%29)∕ [`setHeaderStyleNames`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/cellview/client/Header.html#setHeaderStyleNames%28java.lang.String%29)。

如果这还不够，您可以完全控制通过`CellTableBuilder`,`HeaderBuilder`和生成的内容`FooterBuilder`。

# php - Protecting PHP files from being called by other websites

> ID：11654461
> 
> 赞同：2
> 
> 时间：2012-07-25T16:33:38.820
> 
> 标签：php, data-protection

I have a website which fetches data from some PHP files to display it on the website. However, to protect my data to be used by other people, I wish to protect my PHP file being called by crawlers, bot etc to gather data.

I have prevented it by checking referral URL , but that can be easily by-passed. So, is there any other way to protect my data . I wish that only my website can call to those files.

Thanks !!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:39:15.517

在 php 文件顶部添加[基本 HTTP 身份验证：](http://php.net/manual/en/features.http-auth.php)

```
if ( !isset($_SERVER['PHP_AUTH_USER']) || 
      !isset($_SERVER['PHP_AUTH_PW']) ||
      !($_SERVER['PHP_AUTH_USER'] == 'user' && $_SERVER['PHP_AUTH_PW'] == 'pw'))) {
    header('WWW-Authenticate: Basic realm="Mirkwood"');
    header('HTTP/1.0 401 Unauthorized');
    die();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:39:37.063

如果您有 Apache Web 服务器并在站点的根目录中创建一个 .htaccess 文件（没有后缀的点 htaccess）。

尝试使用以下语法来阻止对特定文件类型的访问：

```
<FilesMatch "\.(htaccess|htpasswd|ini|php)$">
 Order Allow,Deny
 Deny from all
</FilesMatch> 
```

* * *

另一种方法是在所有非索引 php 文件中，您可以包含以下内容：

在 index.php 中，添加如下访问值：

```
$access = 'my_value'; 
```

在每个其他文件中，在 php 回显单个字节之前包含此检查：

```
if(empty($access)) {
    header("location:index.php"); 
    die();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:51:50.823

> 我有一个网站，它从一些 PHP 文件中获取数据以将其显示在网站上。

将包含数据的文件移到文档根目录之外。假设 PHP 文件只是被 docroot 中的另一个访问。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-27T03:18:30.853

正如 DaveRandom 所建议的，我最终使用了基于 cookie 的身份验证技术来避免其他网站调用 PHP。

服务器首先为每个有效客户端设置一个访问代码。在我的 PHP 文件的开头检查此访问代码。

Cookie 设置的最大时间限制为 5 小时，并且 cookie 在窗口关闭时被销毁。这对我来说很好。

请指出这部分是否有任何故障！

# java - Opening, Editing, and Saving a .CSV inside a Java program

> ID：11654466
> 
> 赞同：0
> 
> 时间：2012-07-25T16:34:03.850
> 
> 标签：java, windows, netbeans, jfilechooser

I'm supposed to create a program that displays an editable CSV in a spreadsheet format, then pulls and appends information from an LDAP source into said spreadsheet and saves it. As it is a lot to handle right off the bat, I'm taking it in small chunks at a time.

Not even going to bother with the LDAP bits yet, I just want to get the Load > Edit > Save bits to work for now.

I figure that if I play around with opening, displaying, and saving .TXT files first I can easily transfer what I learn to later when I implement the .CSV portion. However, I am having difficulties making the Save portion work right (read: at all), and I got a bit of help from reading other posts on here, so I figured I'd ask.

Note: the Oracle Java tute for JFileChooser doesn't cover saving except to barely touch on how to start implementing it, not how it actually functions.

a link to my code: [http://pastebin.com/tWnYrwgM](http://pastebin.com/tWnYrwgM)

The code I need the most help with currently:

```
private void SaveActionPerformed(java.awt.event.ActionEvent evt) {                                    
//TODO
} 
```

I don't have anything in there currently because I never actually got anything to work when I Built, Ran, or Debugged the project when I did have code there.

I guess what I am trying to say is that I am having trouble writing to file.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:42:43.840

好的，这将是您需要做的示例实现。请注意，虽然这适用于基本情况，但还不够。使用已建立的 CSV 库会做得更好，这仅用于教育目的。

```
JTable myTable; 
public void actionPerformed(ActionEvent e) {
    try {
        TableModel model = myTable.getModel(); // the table model contains all the data. Read its JavaDoc API it is enlightend when you work with JTables and you can do lots of neat stuff with it.
        JFileChooser fc = new JFileChooser();
        if(fc.showSaveDialog(this) == JFileChooser.APPROVE_OPTION) { // no save when the user canceled.
            File target = fc.getSelectedFile();
            FileWriter fWri = new FileWriter(target); // this will create the file, but not any parent directories that might not exist. If there are parent directories that don't exist, this line will throw a FileNotFoundException.
            for(int ii = 0; ii < model.getRowCount(); ii++) {
                StringBuilder lineValue = new StringBuilder();
                for(int jj = 0; ii < model.getColumnCount(); jj++) {
                    lineValue.append(model.getValueAt(ii, jj));
                    lineValue.append(",");
                }
                lineValue.substring(0, lineValue.length() -1); // cut away the last ,
                fWri.write(lineValue + "\r\n"); // the RFC suggests CRLF, but don't be surprised when you get a CSV from somewhere that has only LF or something. Its because of lines like this that you want a library handle it for you.
            }
            fWri.flush();// in fact, this and the next line should go to a 'finally' block. Read about correct and clean file writing to learn more.
            fWri.close();
        }
    } catch (IOException ioex) {
         // file not found, cant be written to, etc. You handle it here.
    }
} 
```

# jquery - JQuery 选项卡未正确显示

> ID：11654471
> 
> 赞同：1
> 
> 时间：2012-07-25T16:34:21.130
> 
> 标签：jquery, jquery-ui

我尝试了以下方法来创建 Jquery 选项卡：

```
 <div id="tabs">
    <ul>
      <li><a href="#tabs-1">First</a></li>
      <li><a href="#tabs-2">Second</a></li>
      <li><a href="#tabs-3">Third</a></li>
    </ul>
    <div id="tabs-1">
      <p>Tab 1 content</p>
    </div>
    <div id="tabs-2">
      <p>Tab 2 content</p>
    </div>
    <div id="tabs-3">
     <p>Tab 3 content</p>
    </div>
    </div>  

    <script type="text/javascript" language="javascript">
    $(document).ready(function () {

        $("#tabs").tabs();

    });
    </script> 
```

我展示的是以下内容：

```
First
Second
Third 
```

选项卡 1 内容

选项卡 2 内容

选项卡 3 内容

我是否缺少必要的 jquery 库？我应该使用哪一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:36:53.187

你是否包含了 jQuery UI css 和 js 文件？您可以像这样从 CDN 添加它。

```
<link rel="stylesheet" href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/themes/base/jquery-ui.css" type="text/css" media="all" /> 
<script src="http://ajax.aspnetcdn.com/ajax/jQuery/jquery-1.7.2.min.js" type="text/javascript"></script>
<script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:38:09.880

**您需要包含 jQuery UI css 文件。**

应用`tabs()`将设置类，例如：`ui-tabs-hide`

但是如果没有 jQuery UI CSS 文件，您的浏览器将不知道隐藏这个元素。

使用谷歌浏览器，检查元素，你会看到添加到元素中的类。我提供了一个 jsfiddle 作为示例：

[http://jsfiddle.net/TjNAw/](http://jsfiddle.net/TjNAw/)

您可以从这里的主题滚轮下载和自定义您的 jQuery UI CSS 文件：

[http://jqueryui.com/themeroller/](http://jqueryui.com/themeroller/)

# java - Remove or disable the "X" close button shown on a RAP/RCP EditorPart

> ID：11654473
> 
> 赞同：2
> 
> 时间：2012-07-25T16:34:32.207
> 
> 标签：java, eclipse-rcp, workbench, eclipse-rap

Im working on a RAP application that shows both ViewParts and EditorParts. Im trying to find a way to prevent "All" Editor parts from closing. Is there a way to either remove or disable the "X" close button shown on a Editor part?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-10-11T02:58:42.817

您可以这样做（我所写的内容大致相同：[http](http://wiki.eclipse.org/RCP_Custom_Look_and_Feel) ://wiki.eclipse.org/RCP_Custom_Look_and_Feel ）：在您的 ApplicationWorkbenchWindowAdvisor 类中，您可以注册自己的 PresentationFacory，例如：

```
 public void preWindowOpen() {    
    WorkbenchAdapterBuilder.registerAdapters();    
    IWorkbenchWindowConfigurer configurer = getWindowConfigurer();        
    configurer.setPresentationFactory(new UnCloseableEditorPresentationFactory());    
  } 
```

UnCloseableEditorPresentationFactory 类扩展了 WorkbenchPresentationFactory，您可以简单地覆盖该方法

```
public StackPresentation creatEditorPresentation(Composite parent,IStackPresentationSite site)

as followings :
  DefaultTabFolder folder = new UnCloseableEditorFolder(parent, 
       editorTabPosition | SWT.BORDER,    
       site.supportsState(IStackPresentationSite.STATE_MINIMIZED),          
       site.supportsState(IStackPresentationSite.STATE_MAXIMIZED));
 // other code int this method is the same as the parent class

 then is the class UnCloseableFolder

 import org.eclipse.swt.SWT;  
 import org.eclipse.swt.widgets.Composite;  
 import org.eclipse.ui.internal.presentations.defaultpresentation.DefaultTabFolder;    
 import org.eclipse.ui.internal.presentations.util.AbstractTabItem;  
 public class UnCloseableEditorFolder extends DefaultTabFolder {   
     public UnCloseableEditorFolder(Composite parent, int flags,     
         boolean allowMin, boolean allowMax) {     
         super(parent, flags, allowMin, allowMax);   
     }  

  @SuppressWarnings("restriction")   
  public AbstractTabItem add(int index, int flags)   {     
      return super.add(index, flags ^ SWT.CLOSE);   
  }
 } 
```

然后你可以删除EditorPart中的“X”按钮。它在我的机器上工作~~

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-24T23:40:18.643

这可以通过实现表示层来实现 - 请参阅[http://wiki.eclipse.org/RCP_Custom_Look_and_Feel](http://wiki.eclipse.org/RCP_Custom_Look_and_Feel)和[http://e-rcp.blogspot.ca/2007/09/prevent-that-rcp-editor-is-closed。 .html](http://e-rcp.blogspot.ca/2007/09/prevent-that-rcp-editor-is-closed.html) _

# ruby-on-rails - ruby on rails if email exist return success

> ID：11654474
> 
> 赞同：0
> 
> 时间：2012-07-25T16:34:37.150
> 
> 标签：ruby-on-rails, email, unique, exists

controller function

```
def request_invite

        if !request.xhr?
                render_404
                return
        end

        @invitation = Invite.new(params[:invite])

        if @invitation.save
            @return = { :error => false, :response => "Thank you" }
        else
                error_message = '<div class="error_message">' + @invitation.errors.full_messages.map {|error| "<p>#{error}</p>"}.join + "</div>"
            @return = { :error => true, :response => error_message } 
        end

        render :json => ActiveSupport::JSON.encode( @return )

end 
```

model

```
class Invite < ActiveRecord::Base

    validates :email, :presence => true, :uniqueness => true

    validates_format_of :email, :with => /^([^@\s]+)@((?:[-a-z0-9]+\.)+[a-z]{2,})$/i

end 
```

this will either save to the db and show a success msg or throw an error if exist...

i want to show the success msg even if the email already exist in the database so it wont show that the email has already been added

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:49:36.597

您可以通过使用[exists?](http://guides.rubyonrails.org/active_record_querying.html#existence-of-objects) . 它可能看起来像这样

```
email_exists = Invite.where(:email => params[:invite][:email]).exists?

# Create the new invitation if email not already used
if email_exists || Invite.new(params[:invite]).save
  @return = { :error => false, :response => "Thank you" }
else
  # error
  ...
end 
```

或者您可以使用 a`rescue`来捕获 ActiveRecord 异常

# vb.net - Using Outlook Redemption with VB

> ID：11654475
> 
> 赞同：0
> 
> 时间：2012-07-25T16:34:38.103
> 
> 标签：vb.net, outlook-redemption, pst

Ok so here is what I am trying to do: I need to access a bunch of PSTs on my computer, cycle through each email and make a modification to a text tag in the email then finish up with the same PST + modifications. I have found out that I need to use Outlook Redemption with Visual Basic (2010) but I have never used either. Any help would be greatly appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-30T15:32:30.713

1.  创建一个 RDOSession 对象。
2.  调用 RDOSession.LogonPstStore。
3.  枚举 PSTStore.IPMRootFolder 下的 RDOFolders 集合。
4.  如果需要，递归枚举每个文件夹的 RDOFolders 集合。
5.  检查 RDPFolder.DefaultMessageClass 以确保它包含您要查找的项目类型。
6.  枚举文件夹中的项目。

# node.js - 是否可以使用 node.js 和 noSQL 数据库进行事务处理？

> ID：11654480
> 
> 赞同：5
> 
> 时间：2012-07-25T16:34:49.757
> 
> 标签：node.js, transactions, nosql

**我不是在谈论*真钱*交易**

我正在做的项目是一个玩家互相交换东西的游戏。这基本上是一个交易过程，玩家 A 给玩家 B 10 块钱以换取 30 头奶牛，你明白了。

但由于它是交互式的，而且同时有很多玩家，在一个类似聊天室的环境中，所有交易都是随机的，我想知道是否有可能做这样的事情，`node.js`但我发现了问题。

我来自数据库背景，处理事务及其性质`rollback`是`commit`维护数据库健康状态所必需的。但是，如果我们谈论的是`node.js`plus `mongoDB`（或任何其他 noSQL DB），那肯定是一种完全不同的心态，但我只是不明白它如何处理交易，因为只有两方应该参与而不诉诸某种形式的锁定，但肯定不是这样`node`。

我还没有找到任何东西，但这并不让我感到惊讶，因为`node.js`它太新了。

**更新**我知道交易的机制——特别是银行风格的交易，但这不是一回事。我可能没有说清楚，但问题是玩家 B 正在向买家社区出售东西。

这意味着尽管玩家 A 在客户端发起了购买指令，但也有可能大约在同一时间，玩家 CD 或 E 也点击购买同一头牛。

现在在正常事务中，预计至少第一个获得记录级表锁的人至少会阻止其他方在该时间点继续进行。

然而，节点的使用性质，特别是它的速度、并发处理和用于显示实时更新数据库意味着我可以很容易地想象最慢的人（我们说的是毫秒）获胜。

例如，玩家 A 与玩家 C 在同一时间发起购买。玩家 A 交易完成，Groats 支付给玩家 B，并且在数据库中将奶牛分配给玩家 A。一毫秒后，奶牛被分配给玩家 C。

我希望这能更好地解释这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:41:02.280

这与 Node.JS 无关。Node.JS 只连接到数据库，事务由数据库本身完成（除非您想在 Node.JS 中手动实现事务，这可能有点困难 - 但对于任何用任何语言编写的 Web 服务器都是一样的）。

您可以轻松地将（例如）MySQL 与支持事务的 Node.JS 一起使用。所以你要问的问题是：我可以用 MongoDB 做交易吗？答案是：不，是的。

不，因为 MongoDB 不支持开箱即用的事务。

是的，因为您可以使用一些技巧来模拟交易。例如见[这篇文章](http://cookbook.mongodb.org/patterns/perform-two-phase-commits/)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-08-07T22:31:30.687

要使用文档数据库进行银行式事务，通常使用事务日志模式。在这种模式中，您会将每个*事务*编写为它自己的文档。您不维护与每个帐户余额相对应的文档。相反，您在查询时卷起交易文档，以提供当前余额。

这是一个适用于 Couchbase 地图缩减的示例：http: [//guide.couchdb.org/draft/recipes.html](http://guide.couchdb.org/draft/recipes.html)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T18:04:30.750

我正在为 node.js 开发一个名为[Waterline](https://github.com/mikermcneil/waterline)的 oss 应用程序级事务数据库。

我们从全面的 CRUD 静音开始，但很快意识到这非常困难。最好把它留给数据库。但有时你不想——因为你希望能够切换数据库并保持你的代码不可知。因此，我们简化为下一个最简单的部分——命名事务。

所以，没有内置的回滚支持（你现在仍然需要自己做），但至少 Waterline 可以防止你的并发访问。

在您的示例中（假设您在 express/connect/ [Sails](http://sailsjs.com)中），它可能看起来像：

```
function buyCow (req,res) {
   Cow.find(req.param('cowId'),function (err,cow) {
      if (err) return req.send(500,err);

      Cow.transaction('buy_cow',function (err, unlock) {
         if (err) { 
            // Notice how I unlock before each exit point?  REALLY important.
            // (would love to hear thoughts on an easier way to do this)
            unlock(); 
            return res.send(500,err); 
         }

         User.find(req.session.userId,function (err,user) {
            // If there's not enough cash, send an error
            if (user.money - cow.price < 0) { 
               unlock();
               return res.send(500,'Not enough cash!');
            }

            // Update the user's bank account
            User.update(user.id,{
               money: user.money - cow.price
            }, function (err,user) {
               if (err) { unlock(); return res.send(500,err); }

               Cow.update(cow.id, {owner: user.id}, function (err, cow) {
                  if (err) { unlock(); return res.send(500,err); }

                  // Success!
                  unlock();
                  res.json({success: true});
               });

            });
         });
      });

   });
} 
```

希望有帮助。我欢迎您的反馈（也许还有提交？）

# iphone - 核心数据是否保存来自不同线程的更改？

> ID：11654484
> 
> 赞同：3
> 
> 时间：2012-07-25T16:35:06.693
> 
> 标签：iphone, ios, objective-c, core-data, grand-central-dispatch

我想在主线程上更改核心数据对象，然后保存在后台线程中。后台线程保存是否包括主线程更改？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:41:00.113

您可以以多线程方式使用 Core Data，但您应该遵循[Apple 推荐的方法](http://developer.apple.com/library/ios/#documentation/cocoa/conceptual/coredata/Articles/cdConcurrency.html#//apple_ref/doc/uid/TP40003385-SW1)之一：

> Core Data 并发编程的推荐模式是线程限制：每个线程必须有自己的完全私有的托管对象上下文。
> 
> 采用该模式有两种可能的方式：
> 
> 为每个线程创建一个单独的托管对象上下文并共享一个持久存储协调器。这是通常推荐的方法。
> 
> 为每个线程创建一个单独的托管对象上下文和持久存储协调器。这种方法以更大的复杂性（特别是如果您需要在不同的上下文之间传达更改）和增加的内存使用量为代价提供更大的并发性。

特别：

> 使用线程限制，您不应在线程之间传递托管对象或托管对象上下文。要跨线程边界从一个上下文“传递”另一个托管对象，您可以：
> 
> 传递其对象 ID (objectID) 并在接收托管对象上下文中使用 objectWithID: 或 existingObjectWithID:error:。必须保存相应的托管对象——您不能将新插入的托管对象的 ID 传递给另一个上下文。
> 
> 在接收上下文上执行 fetch。这些在接收上下文中创建托管对象的本地版本。

由此，您无法在线程中创建托管对象（具有自己的上下文）然后将它们保存在另一个线程中。

所以，为了完成你想要的，你需要在线程之间共享一个托管对象上下文或一个持久存储协调器。在这种情况下，您应该正确使用锁定技术来防止您的商店进入不一致的状态：

> 如果您在线程之间共享托管对象上下文或持久存储协调器，则必须确保任何方法调用都是从线程安全范围进行的。对于锁定，您应该在托管对象上下文和持久存储协调器上使用 NSLocking 方法，而不是实现自己的互斥锁。这些方法有助于向框架提供有关应用程序意图的上下文信息——也就是说，除了提供互斥体之外，它们还有助于确定操作集群的范围。

如果您有机会修改应用程序的设计，以便您不需要为核心数据对象进行锁定和同步，我不建议您走这条路。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:54:22.087

请参考以下网址，

1）[核心数据和线程，没有头痛](http://www.cimgf.com/2011/05/04/core-data-and-threads-without-the-headache/)：

2)[与核心数据的并发性](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/CoreData/Concurrency.html)：

3）[多上下文CoreData](http://www.cocoanetics.com/2012/07/multi-context-coredata/)：

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T19:07:34.857

您要求的内容适合嵌套上下文。您创建一个私有队列上下文，并将其直接附加到持久存储协调器。很简单。拿你当前的代码，而不是这个......

```
managedObjectContext = [[NSManagedObjectContext alloc] init]; 
```

用这个代替它...

```
workerManagedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSPrivateQueueConcurrencyType]; 
```

现在，您已经用一个新的 MOC 替换了传统的限制 MOC，该 MOC 将使用自己的并发队列运行。

要从主线程中获取可以使用的上下文，您需要创建另一个托管对象上下文，并使其成为您刚刚创建的上下文的子...

```
managedObjectContext = [[NSManagedObjectContext alloc] initWithConcurrencyType:NSMainQueueConcurrencyType];
managedObjectContext.parent = workerManagedObjectContext; 
```

这意味着您可以像以前一样使用 managedObjectContext。然而，现在，它不是直接进入商店，而是通过中间上下文。父上下文将在其自己的后台线程中执行工作。

因此，您可以根据需要对 managedObjectContext 进行所有更改。当需要保存时，您可以执行以下操作...

```
static void saveManagedObjectContext(NSManagedObjectContext *moc, void(^completionBlock)(NSError *error)) {
    [moc performBlock:^{
        NSError *error = nil;
        if (moc.hasChanges && [moc save:&error] && moc.parentContext) {
            saveManagedObjectContext(moc.parentContext, completionBlock);
        } else {
            completionBlock(error);
        }
    }];
} 
```

**编辑**

如果您想普遍使用它，您可以轻松地将其添加到 NSManagedObjectContext 上的类别中，然后只需调用...

```
[managedObjectContext saveWithCompletionBlock:^(NSError *error){
    if (error) {
        // Handle the error
        return;
    }
    // Handle success...
}]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-26T11:44:32.770

Apple 建议为单独的线程使用单独的上下文。一旦你调用了 save ，它的上下文状态就会被保存到实际的数据库中。如果您需要将主线程更改反映在后台线程中，请将后台线程上下文与主线程上下文合并并调用保存。

# cocoa - 您如何访问 OSX 上的所有 CalDAV 日历/活动？

> ID：11654489
> 
> 赞同：4
> 
> 时间：2012-07-25T16:35:25.170
> 
> 标签：cocoa, eventkit, calendar-store

我想访问用户可以在 OS X 上的 iCal 中看到的所有日历。我知道 EventKit 和 CalendarStore。然而，这两个框架似乎都省略了 CalDAV 委托日历（在 iCal 中可见）。其他人也注意到了这一点：

[http://openradar.appspot.com/7077307](http://openradar.appspot.com/7077307)

[Google 代表日历框架 / EventKit](https://stackoverflow.com/questions/10936115/google-delegates-on-calendar-framework-eventkit)

因此，如果 EventKit 和 CalendarStore 不这样做，如何进行呢？

# iphone - 通过 UIColor 上的类别覆盖 +[groupTableViewBackgroundColor]

> ID：11654492
> 
> 赞同：0
> 
> 时间：2012-07-25T16:35:45.450
> 
> 标签：iphone, overriding

如何使用 a 覆盖`category`？所以如果我有：

```
#import "UIColor+backColor.h"
@implementation UIColor (backColor)
@end 
```

我要添加什么来覆盖`+[UIColor groupTableViewBackgroundColor]`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:39:41.633

只需重新实现它：

```
+ (UIColor *)groupTableViewBackgroundColor {
    return mySpecialColor;
} 
```

当你这样做时，它将被覆盖。

编辑：这似乎没有工作（尽管它应该这样做！），所以这是一个非常简单的方法，用于更改方法的返回值：

```
#import <objc/runtime.h>
#import <objc/message.h>

UIColor *modified(Class __self, SEL __cmd)
{
    return someOtherColor;
}

Class clazz = [UIColor class];
static IMP original;
Method m = class_getClassMethod(clazz, @selector(groupTableViewBackgroundColor));
original = method_setImplementation(m, (IMP)modified); 
```

这一切都应该在初始化期间尽早完成。

# java - session.save 不返回持久化对象，只返回标识符

> ID：11654500
> 
> 赞同：2
> 
> 时间：2012-07-25T16:36:20.843
> 
> 标签：java, hibernate

我想做这个 ：

```
@Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class)
    public MyObject create(ObjectBasicDTO dto) {
    MyObject myObject = new MyObject (dto);
    return sessionFactory.getCurrentSession().save(object);
    } 
```

但我必须这样做：

```
@Transactional(propagation = Propagation.REQUIRED, rollbackFor = Exception.class)
    public MyObject create(ObjectBasicDTO dto) {
    MyObject myObject = new MyObject (dto);
    Long id = sessionFactory.getCurrentSession().save(object);
    return sessionFactory.getCurrentSession().get(MyObject.class, id);
    } 
```

那正确吗 ？那似乎很蹩脚。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:47:37.670

你可以这样做`return myObject`。Hibernate 将标识符与作为参数给定的对象相关联`save`。

# cuda - cudaGetDeviceProperties 是否返回损坏的信息？

> ID：11654502
> 
> 赞同：2
> 
> 时间：2012-07-25T16:36:22.220
> 
> 标签：cuda

我的程序使用 CUDA 基数排序类。从 CUDA 4.0 更新到 4.2 后，类辅助初始化函数正在崩溃，并显示消息“围绕变量 'devprop' 的堆栈已损坏”。我已经隔离了注释一些函数代码的问题，发现 cudaGetDeviceProperties 正在破坏 devprop。我只是不知道为什么会发生这种情况以及如何解决问题。我的设置是 CUDA 4.2，开发驱动程序 301.32，Nsight 2.2，Windows 7 64 位，为 Win32 编译。以下代码段具有崩溃的 initDeviceParameters() 辅助函数：

```
namespace nvRadixSort
{
#include "radixsort.h"
#include "cudpp/cudpp.h"
#include <stdio.h>
#include <assert.h>

bool bManualCoalesce = false;
bool bUsePersistentCTAs = false;

void initDeviceParameters(bool keysOnly)
{
    int deviceID = -1;
    if(cudaSuccess == cudaGetDevice(&deviceID))
    {
        cudaDeviceProp devprop;
        cudaGetDeviceProperties(&devprop, deviceID);

        int smVersion = devprop.major * 10 + devprop.minor;

        // sm_12 and later devices don't need help with coalesce in reorderData kernel
        bManualCoalesce = (smVersion < 12);
        bUsePersistentCTAs = (smVersion < 20);

        if(bUsePersistentCTAs)
        {
            //Irrelevant. My setup is 2.1
        }
    }
}
} 
```

这是相关的类代码：

```
#include <cuda_runtime_api.h>
#include "cudpp/cudpp.h"

namespace nvRadixSort
{

class RadixSort
{
    public:

    RadixSort(unsigned int maxElements, bool keysOnly = false)
        : mScanPlan(0),
          mNumElements(0),
          mTempKeys(0),
          mTempValues(0),
          mCounters(0),
          mCountersSum(0),
          mBlockOffsets(0)
    {
        // Allocate temporary storage
        initialize(maxElements, keysOnly);
    }
    protected: // data

    CUDPPHandle   mCudppContext;
    CUDPPHandle   mScanPlan;        // CUDPP plan handle for prefix sum

    unsigned int  mNumElements;     // Number of elements of temp storage allocated
    unsigned int *mTempKeys;        // Intermediate storage for keys
    unsigned int *mTempValues;      // Intermediate storage for values
    unsigned int *mCounters;        // Counter for each radix
    unsigned int *mCountersSum;     // Prefix sum of radix counters
    unsigned int *mBlockOffsets;    // Global offsets of each radix in each block

    protected: // methods

    void initialize(unsigned int numElements, bool keysOnly)
    {
        // initialize parameters based on present CUDA device
        initDeviceParameters(keysOnly);

        // Allocate temporary storage
        mNumElements = numElements;

        unsigned int numBlocks = ((numElements % (CTA_SIZE * 4)) == 0) ?
                                 (numElements / (CTA_SIZE * 4)) : (numElements / (CTA_SIZE * 4) + 1);
        unsigned int numBlocks2 = ((numElements % (CTA_SIZE * 2)) == 0) ?
                                  (numElements / (CTA_SIZE * 2)) : (numElements / (CTA_SIZE * 2) + 1);

        // Initialize scan
        cudppCreate(&mCudppContext);

        CUDPPConfiguration scanConfig;
        scanConfig.algorithm = CUDPP_SCAN;
        scanConfig.datatype  = CUDPP_UINT;
        scanConfig.op        = CUDPP_ADD;
        scanConfig.options   = CUDPP_OPTION_EXCLUSIVE | CUDPP_OPTION_FORWARD;
        cudppPlan(mCudppContext , &mScanPlan, scanConfig, 16 * numBlocks2, 1, 0);

        cudaMalloc((void **)&mTempKeys,     numElements * sizeof(unsigned int));
        if(!keysOnly)
            cudaMalloc((void **)&mTempValues,   numElements * sizeof(unsigned int));
        cudaMalloc((void **)&mCounters,     WARP_SIZE_ * numBlocks * sizeof(unsigned int));
        cudaMalloc((void **)&mCountersSum,  WARP_SIZE_ * numBlocks * sizeof(unsigned int));
        cudaMalloc((void **)&mBlockOffsets, WARP_SIZE_ * numBlocks * sizeof(unsigned int));

        checkCudaError("RadixSort::initialize()");
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:05:24.010

解决了这个问题。即使有可用的 CUDA 4.2 版本，我的 Visual Studio 项目仍然使用 CUDA 4.0 构建规则和工具。只需更改项目文件以使用新文件，就可以了。

# javascript - jQuery Quick Flip 切换回来

> ID：11654503
> 
> 赞同：1
> 
> 时间：2012-07-25T16:36:21.987
> 
> 标签：javascript, jquery, jquery-plugins, hover, flip

我正在使用 jQuery 插件 Quick Flip，但我的一个页面有两个问题。

首先，我希望它在鼠标悬停时翻转，我已经能够做到这一点，但我也希望它在你不悬停时恢复到原来的状态。在 jQuery 的论坛上，其他人也在问同样的问题，创建者说这是可能的，但不会提供代码。我尝试了不同的方法，甚至使用 setTimeout 来强制它回来，但我每次都在破坏代码，所以我显然做得不对。

其次，如果面板包含链接，当您再次悬停时，它有时根本不会翻转。我的例子没有显示这一点。知道为什么会这样吗？

这是我的例子： http: [//kimkellermedia.com/test3/test2.html](http://kimkellermedia.com/test3/test2.html)

现在的js是：

```
jQuery(function($){
$('.quickFlip').quickFlip();

for ( var i = 0; i < $.quickFlip.wrappers.length; i++ ) {
    var thisOne = $.quickFlip.wrappers[i];

    $( thisOne.wrapper ).hover( function(ev) {
        var $target = $(ev.target);

        if ( !$target.hasClass('quickFlip') ) $target = $target.parent();

        $target.quickFlipper();

    }, function() {});
}
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:47:21.183

如果您使用的是 QuickFlip v2.1.1，那么您可以访问`quickFlipper`它为您提供所需的功能。

在[此博客](http://jonraasch.com/blog/quickflip-2-jquery-plugin)中，Jon Raasch 指出，您可以使用以下代码在悬停事件上发生翻转：

> 使用 $.quickFlipper() 可以在您选择的函数中调用翻转。假设我们要在悬停时触发翻转效果：

```
$('.quickflip-wrapper').hover( function(ev) {
    $(ev.target).quickFlipper();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-26T05:52:34.990

菲利克斯用他的评论回答了我的问题：

[http://jsfiddle.net/Ae9Lx/](http://jsfiddle.net/Ae9Lx/)

# google-maps-api-3 - 谷歌地图多边形编辑 - 在 mouseup 上获取 latlng 位置

> ID：11654507
> 
> 赞同：5
> 
> 时间：2012-07-25T16:36:29.773
> 
> 标签：google-maps-api-3

我正在尝试编写一个简单的捕捉功能来在 Google Maps v3.9 中编辑多边形

我在地图上有几个多边形，可以一次编辑一个。当一个可编辑的，我还添加一个监听器，当一个顶点被拖动时触发。

由于没有拖动事件`google.maps.Polygon`，我添加了一个`mousedown`侦听器，它检查顶点是否在光标下方，如果是，则添加一个`mouseup`侦听器。此`mouseup`侦听器中的代码检查所有其他多边形的顶点，如果找到接近匹配，则更新拖动顶点。

这很好用，除了一个问题。使用侦听器返回的`latLng`属性执行检查。该属性指向顶点*在*被拖动之前的位置，我找不到在新位置引用顶点的方法。`PolyMouseEvent``mouseup`

 *```
dragListener = google.maps.event.addListener( poly1, "mousedown", function( dragData ) {

    // if dragging a vertex
    if ( dragData.vertex != null ) {

        // perform snap on mouseup
        snapListener = google.maps.event.addListener( poly1, "mouseup", function( mouseData ) {
            var editingVertex = mouseData.vertex;
            var draggedLatLng = mouseData.latLng;

            // code here to compare draggedLatLng with latLng of editingVertex
            // and perform snap, which seems to work fine as is...
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-01-24T16:52:20.280

多边形是路径的集合，路径是LatLng[对象的](https://developers.google.com/maps/documentation/javascript/reference#LatLng)[MVCArrays](https://developers.google.com/maps/documentation/javascript/reference#MVCArray)，因此我们可以在多边形中的每个路径上监听事件，它会告诉我们何时移动了一个点。`set_at`

```
poly1.getPaths().forEach(function(path, index){
  google.maps.event.addListener(path, 'set_at', function(index, oldLatLng){
    var newLatLng = path.getAt(index);
    // Now you have both the old and new position
  });
}); 
```

如果您知道您的多边形永远不会超过一条路径（内环），那么您可以这样做：

```
google.maps.event.addListener(poly1.getPath(), 'set_at', function(index, oldLatLng){
  var newLatLng = path.getAt(index);
}); 
```

尽管我推荐第一个，因为您永远不知道具有多条路径的多边形何时会以某种方式潜入。*

# c# - 以编程方式配置多个 NIC

> ID：11654513
> 
> 赞同：0
> 
> 时间：2012-07-25T16:36:52.877
> 
> 标签：c#, .net, networking

我是一名工科学生，正在做一个基于自主视觉的多个 Ar 无人机（简单的四旋翼无人机）导航项目。

我在我的 PC 中连接了两个 WiFi 卡。两款 Ar Drones 都有自己的 WiFi 服务器。我将两个 NIC 中的每一个都同时连接到它们（AR 无人机）。两架无人机都使用 UDP 端口传输视频流。

我的问题是这样的：

1.  我可以同时接收两个视频流吗？

2.  如果是，那么如何配置我的 C# 应用程序以接收这两个视频流并显示它们？

我已经可以从一架无人机接收视频流。如何重新配置​​该代码以接收两个视频流？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:44:07.467

你需要两个socket，并且你希望[`bind()`](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.bind.aspx)每个socket都有对应网络接口的地址。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:51:36.597

您不需要 2 个 WiFi 卡。

基本上，您的客户端应用程序需要创建 2 个套接字。每个都可以监听不同的端口（例如：5000 和 5001）。然后，您必须将此信息传达给您的无人机。可能是通过使用 TCP 将您的客户端应用程序连接到您的无人机并发送每个无人机的配置。第一架无人机将接收端口 5000，第二架无人机将接收端口 5001。

然后，无人机必须将数据以 UDP 传输到您的客户端机器的 IP 地址和配置中的指定端口。

**编辑：** 我检查了库，我看到了一个用于发送 UDP 数据的 UdpWorker 类。调用此类的构造函数时，必须提供远程 IP 地址（客户端应用程序的地址）和端口号。

假设您的客户端的 IP 为 192.168.1.1，那么 Drone#1 将使用 remoteIpAddress=192.168.1.1 和 port=5000 初始化一个 UdpWorker 对象。对于 Drone#2，将使用 remoteIpAddress=192.168.1.1 和 port=5001 初始化 UdpWorker 对象。

您的客户端应用程序将从不同的套接字接收两个流，因为两个套接字都绑定到不同的端口，因此很容易区分哪个是哪个。在您的 C# 应用程序中，您可以实例化 2 个 System.Net.Sockets.UdpClient 类型的对象。第一个初始化为端口号 5000，第二个初始化为端口号 5001。

# r - R 包 - 它们是否包含制造它们的公司徽标并且仍然在 CRAN 包存储库中？

> ID：11654515
> 
> 赞同：0
> 
> 时间：2012-07-25T16:36:53.510
> 
> 标签：r

R 包 - 它们是否包含制造它们的公司徽标并且仍在 CRAN 包存储库中？我会考虑由该包中的函数生成的每个情节上的徽标吗？

版本：我不擅长解释许可证，但 CRAN 存储库政策：

[http://cran.r-project.org/web/packages/policies.html](http://cran.r-project.org/web/packages/policies.html)

但它在这个话题上并没有给出太多。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:54:05.403

根据此处找到的文档[http://cran.r-project.org/web/packages/policies.html](http://cran.r-project.org/web/packages/policies.html) 最重要的是引用所有 IP 的来源，并且文件大小不超过 5mb。我不明白他们为什么不允许这样做。

# node.js - 如何在 node.js 服务器中运行静态 html 文件

> ID：11654518
> 
> 赞同：1
> 
> 时间：2012-07-25T16:37:06.783
> 
> 标签：node.js, static

我是 node.js 的新手，我学习过 node.js 和 express 框架

我基本知道如何运行服务器、设置路由器和渲染 html 模板，但是所有教程都告诉渲染 html`res.send()`或`render`如何查看静态文件？比如静态 sample.html：

就像`http://127.0.0.1:8000/static.html`

我的文件树像：

```
root
|
|---server.js
|---static
    |---static.html 
```

如何通过设置路由器查看静态文件？或者使用一些中间件（最好使用express框架）？

**更新：** 我试过这个：

```
 var express = require('express');
    var app = express.createServer();
    app.get('/', function(req, res){
        res.send('Hello World');
    });
    app.configure(function () {
        app.use(express.static(__dirname + '/static'));
    })

    app.listen(8000); 
```

但它仍然无法工作：告诉我：`Cannot GET /static/client.html`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:39:20.657

您可以使用[静态中间件](http://www.senchalabs.org/connect/static.html)执行此操作：

```
app.use(express.static(__dirname + '/static')); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:38:48.933

您的文件`client.html`是按照更新中指定的名称命名还是`static.html`按照您在文件树中显示的名称命名？

因此，请尝试：

```
http://localhost:8000/client.html 
```

或者...

```
http://localhost:8000/static.html 
```

注意缺少“/static”目录。

另外，把你的`app.configure`行放在你的`app.get`.

# ruby-on-rails - 将 10,000 个本地文件放入生产 Rails 应用程序的最佳方法（通过载波到 s3）

> ID：11654520
> 
> 赞同：0
> 
> 时间：2012-07-25T16:37:31.323
> 
> 标签：ruby-on-rails, amazon-s3, carrierwave

因此，我需要大量的 PDF 文件才能进入生产 Rails 应用程序（pdf 文件将通过载波存储在 s3 上）。prod 上已经有 PDF，carrierwave 将模型 id 放在 s3 路径中，所以我需要同步模型创建和 s3 上传。我还有关于需要存储在模型中的 pdf 的其他元数据。

我正在考虑的选项：

1.  将公共 api 公开给模型创建（启动载波上传）。编写脚本并使用 curl 将文件（和元数据）发布到此 api。

2.  将 prod db 同步到我的开发盒，使用元数据构建模型，存储模型的 id 并使用它直接上传到 s3。

3.  任何其他想法将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:39:37.497

您可能想查看 S3FS。这将允许您将 S3 存储桶挂载/卸载到本地文件系统，从而可以非常轻松地使用典型的 OS 文件命令来操作其内容。

但是，我想说的是，尝试在生产环境中使用 S3 挂载进行频繁的读/写操作可能会非常慢。我主要使用 S3 挂载，然后将更改同步到本地连接的存储，以便在应用程序中使用它。

# java - 获取一个 BroadcastReceiver 来延长它的 Activity

> ID：11654526
> 
> 赞同：0
> 
> 时间：2012-07-25T16:37:58.123
> 
> 标签：java, android, broadcastreceiver

我在一个 Android 应用程序上工作，应该在通知栏中简单地发布一些关于电池的信息。我像所有教程建议的那样开始了这个项目：

*   我创建了一个广播接收器。它处理 UI 的东西。
*   然后我创建了一个 IntentFilter，它只过滤 ACTION_BATTERY_CHANGED 意图
*   然后我简单地用我的主 Activity 的 registerReceiver() 方法注册了 IntentFilter 和 BroadcastReceiver 实例。

它工作得非常好，直到 Activity（注册这两个）停止。通过停止我的意思是，我按下手机上的后退按钮，我假设 onStop() 或/和 onDestroy() 方法被调用。

我的问题是，我怎样才能让 BroadcastReceiver 在 Activity 完成后运行，并且只有在我“强制关闭”应用程序时才停止接收？

**更新：**

好的，从我认为以前的答案来看，我需要做的是从清单文件而不是从 Activity 启动我的 BroadcastReciever。这是我试图做的，但它根本没有开始接收：

```
<receiver android:name="com.battery.indicator.BatteryReciever" android:enabled="true" >
    <intent-filter>
        <action android:name="android.intent.action.BATTERY_CHANGED" ></action>
    </intent-filter> 
</receiver> 
```

name 属性是我的 Reciever 类的整个包路径。动作名称是 Eclipse 的智能感知发现的。所有这些都在`<application></application>`xml 的一部分中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:39:40.330

创建服务并在清单中注册您的接收器。即使您的应用当前已关闭，Android 也会唤醒并呼叫您的接收器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:51:58.920

如果您在 Manifest（而不是代码）中声明您的 BroadcastReceiver 并让如果接收启动完成，它将始终处于活动状态。

像这样在你的清单文件中：

```
 <receiver android:name=".BootReceiver">  
         <intent-filter>  
             <action android:name="android.intent.action.BOOT_COMPLETED" />  
         </intent-filter>  
    </receiver> 
```

注意：您需要此权限才能执行此操作：

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"/> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T19:34:59.030

我不确定这是否有帮助，但这是我设置清单的方式。

```
<manifest xmlns:android="http://schemas.android.com./apk/res/android"
          package="com.namespace"
          versionCode, etc>

   //List permissions you use, looks like there is one for battery stats
   <uses-permission android:name="android.permission.BATTERY_STATS" />

   <application>
     <receiver android:name=".broadcast_recievers.BatteryReciever">
       <action android:name="android.intent.action.BATTERY_CHANGED" />
     </receiver>
   </application>
</manifest> 
```

我要说明的主要区别是您在清单标记中声明项目命名空间/包，然后在接收器名称中声明类的路径。在我的示例中，我将在 com.namespace.broadcast_recievers 中有一个名为 BatteryReciever 的类。

您必须进行研究以确定是否需要包含许可。这个[SO](https://stackoverflow.com/questions/8225926/android-permission-battery-stats-usage) post 建议你不要。

# c# - 将多个转换应用于 UI 元素

> ID：11654528
> 
> 赞同：0
> 
> 时间：2012-07-25T16:37:59.817
> 
> 标签：c#, silverlight, windows-phone-7, xaml

我是 WP7 / Silverlight / C# 编程的新手，我目前正在整理一个简单的放大应用程序来掌握一些事情。为了提供“放大”和“缩小”功能，我成功​​地在包含视频源的 UIElement 上使用了 ScaleTransform。

随着我进一步开发应用程序，我意识到我想适应应用程序使用过程中的方向变化，并确保视频源做出相应响应（应用程序固定为横向模式，但用户可能希望“将手机翻转过来”） ' 由于某些原因）。为了解决这个问题，我创建并应用了一个 RotateTransform 并链接到 OrientationChanged 事件。

所有这些都可以正常工作，但是当我在更改方向后尝试缩放（使用 ScaleTransform）时，视频源会缩放，但会将源翻转回“默认”方向，因此会上下颠倒。

鉴于此，我认为我需要在放大时应用这两种变换，所以我创建了一个 TransformGroup 并向其中添加了 ScaleTransform 和 RotateTransform。但是，缩放功能不适用于此功能，并且似乎没有应用任何变换。

尝试应用 TransformGroup 时是否有其他人遇到过问题？

我在下面包含了放大和方向代码的片段以供参考 - 如果我做的事情很长，请提前道歉，但请记住我仍在学习。

任何帮助，将不胜感激。在此先感谢，克雷格。

```
UIElement videocontainer;
RotateTransform rotatetransform = new RotateTransform();

void MainPage_OrientationChanged(object sender, OrientationChangedEventArgs e)
        {
            switch (Orientation)
            {
                case PageOrientation.LandscapeLeft:
                    rotatetransform.Angle = 0;
                    break;
                default:
                    rotatetransform.Angle = 180;
                    break;
            }
            rotatetransform.CenterX = 320;
            rotatetransform.CenterY = 240;
            videocontainer.RenderTransform = rotatetransform;

private void ZoomIn_Click(object sender, EventArgs e)
        {
            if (zoom < 7)
            {
                switch (Orientation)
                {
                    case PageOrientation.LandscapeLeft:
                        ScaleTransform myscaletransform1 = new ScaleTransform();
                        myscaletransform1.ScaleX = myscaletransform1.ScaleX * 1.25;
                        myscaletransform1.ScaleY = myscaletransform1.ScaleY * 1.25;
                        myscaletransform1.CenterX = 320;
                        myscaletransform1.CenterY = 240;
                        TransformGroup zoomintranformgroup1 = new TransformGroup();
                        zoomintranformgroup1.Children.Add(myscaletransform1);
                        zoomintranformgroup1.Children.Add(rotatetransform);
                        videocontainer.RenderTransform = zoomintransformgroup1;
                        zoom++;
                        break;
                    default:
                        ScaleTransform myscaletransform2 = new ScaleTransform();
                        myscaletransform2.ScaleX = myscaletransform2.ScaleX * 1.25;
                        myscaletransform2.ScaleY = myscaletransform2.ScaleY * 1.25;
                        myscaletransform2.CenterX = 320;
                        myscaletransform2.CenterY = 240;
                        TransformGroup zoomintranformgroup2 = new TransformGroup();
                        zoomintranformgroup2.Children.Add(myscaletransform2);
                        zoomintranformgroup2.Children.Add(rotatetransform);
                        videocontainer.RenderTransform = zoomintransformgroup2;
                        zoom++;
                        break;
                }

            }
            else
            {
                return;
            }
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:45:19.340

You can use the `CompositeTransform` class. This class combines all your used transformations and makes things easier.

# python - Python：如果找不到文件，请尝试寻找不同的文件名

> ID：11654534
> 
> 赞同：4
> 
> 时间：2012-07-25T16:38:18.993
> 
> 标签：python, file

**问题：**

我有查找文件并打开它的代码。默认情况下，它会查找以`#######`（每个 # 为数字）开头的文件。

问题有时是文件名`##-#####`，有时是`#####`.

如果找不到文件，我想要一种方法尝试寻找可以写入文件的其他两种方法。

找不到文件时会发生 IOError 异常。我在想的是有一个 except 声明说：

```
except File2:
    Look for ##### in  myfindFileFunction()
    if file is still not found run except File3
except File3:
    Look for ##-#### in myfindFileFuction()
except:
    print "File not found" 
```

我不确定如何设置自定义异常以这种方式工作，和/或是否有更 Pythonic 的方式来完全做到这一点......

设置一个模式或三个可能的文件名并迭代思想直到找到文件会更好吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T16:41:40.197

使用 try/except 确实是一种非常 Pythonic（且快速）的做事方式。

您不仅要权衡它是否是 Pythonic，还要权衡该方法在可读性方面的影响。6 个月后再看代码，你还会很快看懂代码吗？别人会吗？

我通常会确保处理这类事情的稍微复杂的 try/except 子句得到很好的注释。除此之外......这是一种完全合理的方式。

此外，为了让您在性能方面放心，这是在两种方法之间做出决定时的一个常见问题，请看这里：[Python if vs try-except](https://stackoverflow.com/questions/3929837/python-if-vs-try-except)并且您会看到 Python 中的 try/except 结构很快......真的很快。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T16:43:45.743

不需要自定义异常

```
import errno

try:
    open('somefile')
except IOError as e:
    if e.errno == errno.ENOENT:
        open('someotherfilename')
    else:
        raise e 
```

（这是在 *nix 上-我不确定您是否使用 Windows）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:17:14.493

定义自己的异常很容易——只需创建一个从 Exception 派生的类。doco 很清楚。

但是，似乎没有必要为每种文件类型创建单独的异常或任何异常。您可以执行以下操作：

```
文件 = ('#######', "##-#####', '#####')

fh = 无
对于文件中的 f：
    尝试：
        fh = 打开（f）
        休息
    除了 IOError 为 e：
        如果 e.errno 在 (errno.ENOENT,) 中：
            经过
        别的：
            增加

如果不是 fh：
    ## 三个尝试都失败了

```

使用`if`around`e.errno`可以让您决定哪些 IO 错误意味着继续下一个文件，哪些是您想了解的错误。文件不存在 ( `errno.ENOENT`) 表示尝试下一个文件。但其他类似“打开的文件太多”（`errno.ENFILE`）可能需要不同的响应。

# php - 如何在子文件夹中设置 CodeIgniter htaccess？

> ID：11654541
> 
> 赞同：1
> 
> 时间：2012-07-25T16:38:46.233
> 
> 标签：php, apache, .htaccess, codeigniter, mod-rewrite

我在我的服务器上通过以下 URL 设置了 CodeIgniter 应用程序：

```
http://subdomain.domainame.com/something1/something2/ 
```

（我以 something1 和 something 2 为例）

现在，我可以在使用上述 URL 时完美地访问应用程序，并且可以在末尾添加 /index.php/controller/action 等。

我试图在托管应用程序的同一目录中设置一个 .htaccess 文件，但它似乎不起作用。

.htaccess 文件包含以下内容：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ something1/something2/index.php?/$1 [L] 
```

这给了我一个 500 内部服务器错误。

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T16:40:22.707

我想我可能已经解决了这个问题。

改变：

```
RewriteRule ^(.*)$ something1/something2/index.php?/$1 [L] 
```

到：

```
RewriteRule ^(.*)$ /something1/something2/index.php?/$1 [L] 
```

我不再收到内部服务器错误。

为了帮助遇到此问题的任何人，这是我的完整 .htaccess 文件：

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ /something1/something2/index.php?/$1 [L] 
```

# iphone - UIKeyboardTypeDecimalPad 检测它是否有逗号“，”或点“。”

> ID：11654546
> 
> 赞同：2
> 
> 时间：2012-07-25T16:39:12.813
> 
> 标签：iphone, ios, xcode, uikeyboard

如何检查 UIKeyboardTypeDecimalPad 是否有点/逗号？我需要这个来检查输入了多少个点/逗号，这样我就可以将它们限制为只有 1 个。当我知道 UIKeyboardTypeDecimalPad 有逗号时，我知道该怎么做。

```
-(BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string {

NSCharacterSet *cs;
NSString *filtered;

NSString *newString = [textField.text stringByReplacingCharactersInRange:range withString:string];

if ([textField.text rangeOfString:@","].location == NSNotFound) {

    cs = [[NSCharacterSet characterSetWithCharactersInString:NUMBERSPERIOD] invertedSet];
    filtered = [[string componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@""];
    return [string isEqualToString:filtered];
 }

else {

    cs = [[NSCharacterSet characterSetWithCharactersInString:NUMBERS] invertedSet];
    filtered = [[string componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@""];     

    NSUInteger count = 0, length = [newString length];
    NSRange range = NSMakeRange(0, length); 
    while(range.location != NSNotFound)
    {
        range = [newString rangeOfString: @"," options:0 range:range];
        if(range.location != NSNotFound)
        {
            range = NSMakeRange(range.location + range.length, length - (range.location + range.length));
            count++; 
        }
    }        

    if (count < 2) {

        NSArray *sep = [newString componentsSeparatedByString:@","];
        if([sep count]>=2)
        {
            NSString *sepStr=[NSString stringWithFormat:@"%@",[sep objectAtIndex:1]];
            return !([sepStr length]>2);
        }

        return YES;

    }

    return NO;

}
} 
```

有没有简单的方法来检查键盘是否有“，”或“。”？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T19:55:14.627

我怀疑该键上的字符受当前语言环境的约束。我说我怀疑是因为我没有测试过这个。如果这是正确的，则以下内容应允许您确定是否存在逗号或句点/小数点：

```
NSString *symbol = [[NSLocale currentLocale] objectForKey:NSLocaleDecimalSeparator]; 
```

# c - 为什么变量在程序的一部分中打印正确，而在另一部分中打印不正确

> ID：11654549
> 
> 赞同：-1
> 
> 时间：2012-07-25T16:39:15.463
> 
> 标签：c

我的程序有什么错误？这是代码：

```
/*
 * courseProject.c
 *
 * It is a simple database for record shop
 * to track its iventory of CDs
 *
 * by Mahmoud Emam, 2012.
 */
#include<stdio.h>

main()
{
      /*
       * CDs infrormations
       */
      char title[31], artist[31];
      short int numberOfTracks;  /* short to save memory */
      int albumOrSingle;         /* Boolean to check 1 for Album and 0 for Single */
      float price;

      printf("Hello, Welcome to Record Shop!\n\n");
      /*
       * Asking for CD details
       */
      printf("Enter CD details\n\n");
      printf("CD's Title: ");
      scanf("%[^\n]", title);
      fflush(stdin);

      printf("CD's Artist: ");
      scanf("%[^\n]", artist);

      printf("Number of tracks: ");
      scanf("%d", &numberOfTracks);

      printf("Please press \"1\" for album, \"0\" for single: ");
      scanf("%d", &albumOrSingle);

      printf("CD's Price: ");
      scanf("%f", &price);

      /*
       * Output CD details
       */
      printf("\nCD details:\n");
      printf("=============\n\n");

      printf("CD's Title: <%s>\n", title);
      printf("CD's Artist: <%s>\n", artist);
      printf("Number of tracks: <%d>\n", numberOfTracks);

      if (albumOrSingle)
         printf("This is <Album>\n");
      else
         printf("This is <Single CD>\n");

      printf("Its price = <%.2f>\n", price);
      printf("=============\n\n");

      /* Exit from program */
      printf("Press any key to exit\n");

      fflush(stdin);
      getchar();
} 
```

这是一个简单的程序，它从用户那里读取 CD 信息并在屏幕上再次输出详细信息。但是，该`artist`变量始终为空。为什么？

我是`printf("%s", artist);`在从用户那里读取它之后制作的，它可以正常工作，但是在程序结束时它不起作用。变量始终为空。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:01:12.583

变量`numberOfTracks`是 a `short int`，但您正在使用`scanf`'s`%d`说明符读取它，该说明符读取`int`. 这会导致未定义的行为 - 在这种情况下，它可能会覆盖其他变量，例如`artist`.

要么使用说明`%hd`符（读取 a `short int`），要么将变量更改为 a `int`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:05:16.827

好吧， numberOfTracks 很短，你正在做一个 scanf("%d", &numberOfTracks) 会产生有趣的结果。

此外，main 是 int main()，您应该返回一个值。此代码的可能结果是您的程序将以随机值终止，该随机值恰好与用户的按键密切相关。

# android - 为 Android 上的 HTML 聊天程序保持键盘打开？

> ID：11654550
> 
> 赞同：2
> 
> 时间：2012-07-25T16:39:17.227
> 
> 标签：android, html, chrome-for-android

我正在构建一个 HTML5 聊天程序，它在页面底部有一个输入字段和提交按钮。

在 Android 版 Chrome 上，当用户点击该字段时，软键盘向上滑动，用户可以输入消息。然而，一旦用户点击“Go”，键盘就会消失，然后他们必须再次单击该字段才能启动键盘。这很烦人。

有没有办法强制软键盘保持打开状态？

如果有帮助，我将使用 jQuery 绑定到`submit`表单的事件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-16T15:36:56.607

我对此的解决方案是将输入更改为文本区域并将其设置为看起来就像输入元素一样。这样，当用户按下回车键时，键盘保持打开状态。它至少适用于我的 chrome for android。

# ios - 带有 UITableViewCell 和 userInteractionEnabled 的奇怪 iOS 错误

> ID：11654551
> 
> 赞同：9
> 
> 时间：2012-07-25T16:39:19.940
> 
> 标签：ios, uitableview

我刚刚注意到 iOS 上的 UITableViewCell 类和 userInteractionEnabled 属性有些奇怪。

看来，如果在将文本分配给单元格标签*之前*将 userInteractionEnabled 设置为 NO ，则文本将显示为灰色。*但是，在设置文本后将*userInteractionEnabled 设置为 NO会使文本颜色变为黑色（请参见下面的示例代码片段）。

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (!cell)
       cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier];

    // swap these two lines around, and the text color does not change to grey!
    cell.userInteractionEnabled = (indexPath.row % 2) == 0;
    cell.textLabel.text = @"Hello";

    return cell;
} 
```

这真的很烦人，因为这意味着在重复使用单元格的情况下我最终会出现不同的行为。上面的示例演示了这一点 - 表格的第一页显示了带有灰色/黑色文本的交替行。进一步向下滚动，以便重复使用单元格，您可以看到出现问题。

我只是想知道我是否做错了什么，或者这是一个 iOS 错误？我在 iPad 3 上的 iOS 5.1 下看到了问题。任何见解都非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-31T19:38:59.820

我想我为这个问题找到了一个更方便的解决方法（我认为这是一个错误）：

像这样手动设置`enabled`属性：`textLabel``detailTextLabel`

```
cell.userInteractionEnabled = (indexPath.row % 2) == 0;
cell.textLabel.enabled = cell.isUserInteractionEnabled;
cell.detailTextLabel.enabled = cell.isUserInteractionEnabled; 
```

这让我得到了答案： [https ://stackoverflow.com/a/13327632/921573](https://stackoverflow.com/a/13327632/921573)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-10T18:02:47.523

我发现如果我把它放在`cell.textLabel.textColor = [UIColor blackColor];`前面`cell.userInteractionEnabled = NO;`，它似乎可以解决问题。这就是它在 iOS 6.0.1 上的工作方式

```
cell.textLabel.textColor = [UIColor blackColor];
cell.userInteractionEnabled = NO; 
```

# javascript - createTextNode 对 HTML 注入和 XSS 是否完全安全？

> ID：11654555
> 
> 赞同：15
> 
> 时间：2012-07-25T16:39:27.413
> 
> 标签：javascript, html, security, web, xss

我正在开发一个单页网络应用程序。我通过直接创建 DOM 节点来进行渲染。特别是，所有用户提供的数据都通过创建文本节点添加到页面`document.createTextNode("user data")`。

这种方法是否避免了 HTML 注入、跨站点脚本 (XSS) 以及用户可能做的所有其他邪恶事情的任何可能性？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-07-25T16:42:44.823

它创建了一个纯文本节点，所以是的，就它而言。

通过使用不安全的方法从输入的任何通道获取数据，可能会产生 XSS 问题`createTextNode`。

例如以下将是**不安全**的：

```
document.createTextNode('<?php echo $_GET['xss']; ?>'); 
```

……但危险来自 PHP `echo`，而不是 JavaScript `createTextNode`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-09-27T11:22:50.440

是的，它是 XSS 安全的，就像使用`someElement.innerText = "..."`.

^(（同级答案通过包含易受 XSS 攻击的 PHP 代码段增加了混乱。）)

# javascript - 为什么执行这个 javascript 会有延迟？

> ID：11654556
> 
> 赞同：0
> 
> 时间：2012-07-25T16:39:33.460
> 
> 标签：javascript

我想运行一个 - 接受我们的条款弹出框 - 在页面可以看到之前必须接受它。我想我在这里找到了答案：[https ://stackoverflow.com/questions/6588167/how-do-i-make-a-popup-appear-immediately-before-the-rest-of-the-page-loads](https://stackoverflow.com/questions/6588167/how-do-i-make-a-popup-appear-immediately-before-the-rest-of-the-page-loads)

但是我对自己做错了什么以及为什么我的方法有时间滞后感到茫然。

我上传了[http://jsfiddle.net/ZqVuj/2/](http://jsfiddle.net/ZqVuj/2/)作为示例 - 如果单击运行，您可以看到 lorem 弹出一会儿然后黑色。为什么在页面的其余部分加载之前模式不起作用？

有人在此页面的代码上构建了页面 Im on the code： [http ://www.queness.com/post/77/simple-jquery-modal-window-tutorial](http://www.queness.com/post/77/simple-jquery-modal-window-tutorial)

我取出淡入淡出，并将 $(document).ready(function() 更改为 $(function()

然而，在模式启动之前，文本仍然会加载片刻。我做错了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:44:06.663

而不是`$(function() {...})`，使用`(function() { ... })();`并将其放在`<body>`. 这样，它会在页面内容显示之前立即运行。

但请记住，任何对浏览器有基本了解的人都可以删除弹出窗口并显示内容。您应该使用更可靠的方法来保护您的内容。

# c# - 如何将字节数组转换为字符串

> ID：11654562
> 
> 赞同：790
> 
> 时间：2012-07-25T16:39:42.900
> 
> 标签：c#, arrays, binaryreader

我创建了一个包含两个字符串的字节数组。如何将字节数组转换为字符串？

```
var binWriter = new BinaryWriter(new MemoryStream());
binWriter.Write("value1");
binWriter.Write("value2");
binWriter.Seek(0, SeekOrigin.Begin);

byte[] result = reader.ReadBytes((int)binWriter.BaseStream.Length); 
```

我想转换`result`为字符串。我可以使用`BinaryReader`，但我不能使用`BinaryReader`（不支持）。

* * *

## 回答 #1

> 赞同：1279
> 
> 时间：2012-07-25T16:41:52.210

根据您希望使用的编码：

```
var str = System.Text.Encoding.Default.GetString(result); 
```

* * *

## 回答 #2

> 赞同：353
> 
> 时间：2012-07-25T16:55:50.353

假设您使用的是 UTF-8 编码：

```
string convert = "This is the string to be converted";

// From string to byte array
byte[] buffer = System.Text.Encoding.UTF8.GetBytes(convert);

// From byte array to string
string s = System.Text.Encoding.UTF8.GetString(buffer, 0, buffer.Length); 
```

* * *

## 回答 #3

> 赞同：28
> 
> 时间：2012-12-15T20:36:50.700

[您可以使用BlockCopy](http://msdn.microsoft.com/en-us/library/system.buffer.blockcopy%28v=vs.110%29.aspx)无需处理编码即可做到这一点：

```
char[] chars = new char[bytes.Length / sizeof(char)];
System.Buffer.BlockCopy(bytes, 0, chars, 0, bytes.Length);
string str = new string(chars); 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-05-22T12:31:51.933

要将 byte[] 转换为 string[]，只需使用以下行。

```
byte[] fileData; // Some byte array
//Convert byte[] to string[]
var table = (Encoding.Default.GetString(
                 fileData, 
                 0, 
                 fileData.Length - 1)).Split(new string[] { "\r\n", "\r", "\n" },
                                             StringSplitOptions.None); 
```

# php - 单撇号解析问题 ASP CLASSIC

> ID：11654563
> 
> 赞同：0
> 
> 时间：2012-07-25T16:39:47.840
> 
> 标签：php, string, excel, asp-classic

我让用户将数据从 excel 文件上传到我的服务器，经过解析，然后显示在我的网站上。我有一个问题，如果用户在 excel 文件中有一个撇号，它将切断它之后的所有内容。这是因为 sql（用于抓取 excel 数据）和 asp 经典代码（用于显示动态 html 数据）都将其解释为字段分隔符。我使用 php 处理 excel 文件并用我想要的任何字符替换撇号。我试图使用转义版本的撇号无济于事“\'”、“''”、“\'\'”、“'”。这是因为即使他们解决了 sql 正确抓取数据的问题，ASP 代码仍会在显示之前继续截断字符。我最终使用了“**”

```
formString= formString & "<tr>" & _"<td align='left'><input name='FirstName' type='text' size='9' maxlength='12' value='"&replace(someUglyString,"**","&#39;")&"'></td>" 
```

有没有人遇到过这个？有任何想法吗？

php按要求：

```
for ($i = 1; $i <= $objPHPExcel->getActiveSheet()->getHighestRow(); $i++) {
$cell = $objPHPExcel->getActiveSheet()->getCellByColumnAndRow('A', $i);
$cell->setValue(str_replace("'","**",$cell->getValue()));
$objPHPExcel->getActiveSheet()->setCellValueByColumnAndRow('A',$i,$cell->getValue()); 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-18T17:00:09.560

&apos 做到了。我真的很惊讶我在任何地方都找不到这个。

# java - 如何通过 FTP 下载文本文件并将内容读入字符串

> ID：11654566
> 
> 赞同：0
> 
> 时间：2012-07-25T16:40:12.473
> 
> 标签：java, android, ftp, apache-commons, apache-commons-net

这是从上一个问题（可能有点不清楚）中重新措辞的。

我想通过 FTP 从远程服务器下载文本文件，将文本文件的内容读入字符串，然后丢弃该文件。我不需要实际保存文件。

我正在使用 Apache Commons 库，所以我有：

```
import org.apache.commons.net.ftp.FTPClient; 
```

谁能帮忙，而不是简单地将我重定向到一个有很多可能答案的页面？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:55:11.217

不会为您完成这项工作，但是一旦您建立了连接，您就可以调用retrieveFile 并将其传递给OutputStream。你可以google一下，找到剩下的……

```
 FTPClient ftp = new FTPClient();
 ...
 ByteArrayOutputStream myVar = new ByteArrayOutputStream();
 ftp.retrieveFile("remoteFileName.txt", myVar); 
```

[字节数组输出流](https://docs.oracle.com/javase/7/docs/api/java/io/ByteArrayOutputStream.html)

[检索文件](https://commons.apache.org/proper/commons-net/apidocs/org/apache/commons/net/ftp/FTPClient.html#retrieveFile(java.lang.String,%20java.io.OutputStream))

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:04:51.790

通常我会留下评论询问'[你试过什么？](http://whathaveyoutried.com)'。但现在我感觉更慷慨了:-)

干得好：

```
private void ftpDownload() {
    FTPClient ftp = null;
    try {
        ftp = new FTPClient();
        ftp.connect(mServer);

        try {
            int reply = ftp.getReplyCode();
            if (!FTPReply.isPositiveCompletion(reply)) {
                throw new Exception("Connect failed: " + ftp.getReplyString());
            }
            if (!ftp.login(mUser, mPassword)) {
                throw new Exception("Login failed: " + ftp.getReplyString());
            }
            try {
                ftp.enterLocalPassiveMode();
                if (!ftp.setFileType(FTP.BINARY_FILE_TYPE)) {
                    Log.e(TAG, "Setting binary file type failed.");
                }
                transferFile(ftp);
            } catch(Exception e) {
                handleThrowable(e);
            } finally {
                if (!ftp.logout()) {
                    Log.e(TAG, "Logout failed.");
                }
            }
        } catch(Exception e) {
            handleThrowable(e);
        } finally {
            ftp.disconnect();
        }
    } catch(Exception e) {
        handleThrowable(e);
    }
}

private void transferFile(FTPClient ftp) throws Exception {
    long fileSize = getFileSize(ftp, mFilePath);
    InputStream is = retrieveFileStream(ftp, mFilePath);
    downloadFile(is, buffer, fileSize);
    is.close();

    if (!ftp.completePendingCommand()) {
        throw new Exception("Pending command failed: " + ftp.getReplyString());
    }
}

private InputStream retrieveFileStream(FTPClient ftp, String filePath)
throws Exception {
    InputStream is = ftp.retrieveFileStream(filePath);
    int reply = ftp.getReplyCode();
    if (is == null
            || (!FTPReply.isPositivePreliminary(reply)
                    && !FTPReply.isPositiveCompletion(reply))) {
        throw new Exception(ftp.getReplyString());
    }
    return is;
}

private byte[] downloadFile(InputStream is, long fileSize)
throws Exception {
    byte[] buffer = new byte[fileSize];
    if (is.read(buffer, 0, buffer.length)) == -1) {
        return null;
    }
    return buffer; // <-- Here is your file's contents !!!
}

private long getFileSize(FTPClient ftp, String filePath) throws Exception {
    long fileSize = 0;
    FTPFile[] files = ftp.listFiles(filePath);
    if (files.length == 1 && files[0].isFile()) {
        fileSize = files[0].getSize();
    }
    Log.i(TAG, "File size = " + fileSize);
    return fileSize;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-11-15T09:51:12.893

您可以跳过下载到本地文件系统部分并执行以下操作：

```
 FTPClient ftpClient = new FTPClient();
    try {
       ftpClient.connect(server, port);
       ftpClient.login(user, pass);
       ftpClient.enterLocalPassiveMode();
       ftpClient.setFileType(FTP.BINARY_FILE_TYPE);

       InputStream inputStream = ftpClient.retrieveFileStream("/folder/file.dat");
       BufferedReader reader = new BufferedReader(new InputStreamReader(inputStream, "Cp1252"));

       while(reader.ready()) {
           System.out.println(reader.readLine()); // Or whatever
       }
       inputStream.close();

    } catch (IOException ex) {
         ex.printStackTrace();
    } finally {
         try {
             if (ftpClient.isConnected()) {
                 ftpClient.logout();
                 ftpClient.disconnect();
             }
         } catch (IOException ex) {
               ex.printStackTrace();
         }
    } 
```

# c - 依赖 SDL 的应用程序的 Makefile 编译严重失败

> ID：11654567
> 
> 赞同：1
> 
> 时间：2012-07-25T16:40:13.617
> 
> 标签：c, gcc, makefile, mingw, sdl

这是生成文件：

**生成文件.win**

```
CC=gcc
CFLAGS=-Wall -ID:\dev\include -LD:\dev\lib -LD:\dev\bin
LIBS=-l mingw32 -l SDLmain -l SDL
TARGET=-mwindows
EXECUTABLE=main.exe

all:
    $(CC) $(CFLAGS) $(LIBS) $(TARGET) main.c -o $(EXECUTABLE)

clean:
    rm *o 
```

（libSDL 和 libSDLmain 位于 D:\dev\lib 中。SDL.dll 位于 D:\dev\bin 中。）

这是代码

```
#include <SDL/SDL.h>

int main(int argc, char* argv[])
{
    if (SDL_Init(SDL_INIT_EVERYTHING) < 0)
        printf("Could not initialize!");

    SDL_Surface* screen = SDL_SetVideoMode(640, 480, 16, SDL_HWSURFACE|SDL_DOUBLEBUF);
    if (!screen) printf("Could not load video!");

    int done = 0;
    SDL_Event event;

    while(!done)
    {
        while(SDL_PollEvent(&event))
        {
            if (event.type == SDL_QUIT)
                done = 1;
        }

        SDL_Flip(screen);
    }

    SDL_FreeSurface(screen);
    printf("Exited cleanly");

    return 0;
} 
```

我用这个命令构建它：

```
mingw32-make -f makefile.win 
```

并且 mingw32-make 将 makefile 转换为：

```
gcc -Wall -ID:\dev\include -LD:\dev\lib -LD:\dev\bin -l mingw32 -l SDLmain -l SD
L -mwindows main.c -o main.exe 
```

没关系。

但后来我得到了所有这些迷人的错误：

```
main.c:(.text+0x42): undefined reference to `SDL_SetVideoMode'
main.c:(.text+0x7c): undefined reference to `SDL_PollEvent'
main.c:(.text+0x8b): undefined reference to `SDL_Flip'
main.c:(.text+0x9c): undefined reference to `SDL_FreeSurface'
collect2: ld returned 1 exit status
mingw32-make: *** [all] Error 1 
```

所以，因为我正在与 mingw32、SDL 和 SDLmain 链接。我正在将目录添加到 SDL 标头中。为什么我会收到错误消息？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:53:03.760

您应该将库标志放在最后：

```
gcc -o main.exe main.c -lSDL -lSDLmain -lmingw32 
```

# url - 使用 lat/long 访问 NOAA 站点时出错

> ID：11654571
> 
> 赞同：0
> 
> 时间：2012-07-25T16:40:26.540
> 
> 标签：url

我正在尝试按纬度和经度检索天气数据。我已经查看了 NOAA 网站上的 API，并且我相信我正在按照指示创建我的 URL。但是，每次我尝试按纬度/经度查看时都会出错。我可以根据邮政编码检索，但我需要使用纬度/经度，因为我也需要数据的外国位置。

这是我要访问的 URL： [http ://www.ncdc.noaa.gov/cdo-services/services/datasets/GHCND/locationsearch?latitude=35.59528&longitude=-82.55667token=XuynqsXFIGjQEXIshdoyFizBgrdZdwXO](http://www.ncdc.noaa.gov/cdo-services/services/datasets/GHCND/locationsearch?latitude=35.59528&longitude=-82.55667token=XuynqsXFIGjQEXIshdoyFizBgrdZdwXO)

这是他们网站上的 API，特定于 lat/long 搜索： [http ://www.ncdc.noaa.gov/cdo-web/webservices/cdows_locationsearch](http://www.ncdc.noaa.gov/cdo-web/webservices/cdows_locationsearch)

我得到这个错误：

```
<cdoError>
<name>Internal Error</name>
<message>CDO Web Services error</message>
</cdoError> 
```

有人有建议吗？我是否错误地创建了 URL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:47:40.323

你错过了一个`&`before `token`：

[http://www.ncdc.noaa.gov/cdo-services/services/datasets/GHCND/locationsearch?latitude=35.59528&longitude=-82.55667&token=XuynqsXFIGjQEXIshdoyFizBgrdZdwXO](http://www.ncdc.noaa.gov/cdo-services/services/datasets/GHCND/locationsearch?latitude=35.59528&longitude=-82.55667&token=XuynqsXFIGjQEXIshdoyFizBgrdZdwXO)

# sql - SQL Server 元数据表和列描述

> ID：11654576
> 
> 赞同：1
> 
> 时间：2012-07-25T16:40:53.153
> 
> 标签：sql, sql-server, system-tables

> **可能重复：**
> [SQL Server：提取表元数据（描述、字段及其数据类型）](https://stackoverflow.com/questions/887370/sql-server-extract-table-meta-data-description-fields-and-their-data-types)

我只是想问一下是否有办法以编程方式从 SQL Server 2008 中检索表和列描述？这些是您在使用 UI 时可以输入的描述。

如果是这样，有没有办法以编程方式更新它们？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:37:55.500

如果要检索使用 MSSMS 的 UI 设置的“描述”，则需要查询 sys.extended_properties。

首先`select * from sys.extended_properties`阅读 value 列中的一些记录以了解我的意思（您会在那里找到以前设置的描述）。稍后您将需要与 sysobjects 进行一些连接（我猜），以便知道哪个描述属于哪个表，然后您就可以开始了。如果您感到困惑，请在 google 中搜索更多信息 =)

另外，试试这个：

```
select * from sys.extended_properties
inner join sysobjects on sys.extended_properties.major_id = sysobjects.id 
```

'value' 列和第二个 'name' 列（属于 sysobjects）是您要查找的内容。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:22:35.803

要获取描述数据，您需要摆弄 sysobjects/syscolumns

```
SELECT          u.name + '.' + t.name AS [table],
            td.value AS [table_desc],
                c.name AS [column],
                cd.value AS [column_desc]
FROM            sysobjects t
INNER JOIN  sysusers u
    ON          u.uid = t.uid
LEFT OUTER JOIN sys.extended_properties td
    ON          td.major_id = t.id
    AND         td.minor_id = 0
    AND         td.name = 'MS_Description'
INNER JOIN  syscolumns c
    ON          c.id = t.id
LEFT OUTER JOIN sys.extended_properties cd
    ON          cd.major_id = c.id
    AND         cd.minor_id = c.colid
    AND         cd.name = 'MS_Description'
WHERE t.type = 'u'
ORDER BY    t.name, c.colorder 
```

一些信息可以在

```
select * from INFORMATION_SCHEMA.TABLES
select * from INFORMATION_SCHEMA.COLUMNS 
```

# html - 填充html属性之间的空格以简化块模式下的编辑

> ID：11654582
> 
> 赞同：3
> 
> 时间：2012-07-25T16:41:05.250
> 
> 标签：html, vim

我想定期填充 html 属性之间的空间，以简化块模式下的编辑。

例子：

```
<p><input type="a" name="a" value="foo a"></p>
<p><input type="ab" name="ab" value="ab bar"></p>
<p><input type="abc" name="abc" value="baz abc"></p> 
```

在可视块模式下选择三个输入并做一些魔术。

输出：

```
<p><input type="a"   name="a"   value="foo a"  ></p>
<p><input type="ab"  name="ab"  value="ab bar" ></p>
<p><input type="abc" name="abc" value="baz abc"></p> 
```

（最好不要填写值之间的空格。）

我怎么做？

*编辑：*返回（编辑后）也很好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-26T07:30:56.960

您可以使用[Align 插件](http://www.vim.org/scripts/script.php?script_id=294)执行此操作：

```
:AlignCtrl mIp1P0=l
:Align \i\+= 
```

或用它建立一个映射：

```
map <unique> <SID>WS    <Plug>AlignMapsWrapperStart
nmap <unique> <SID>WE   <Plug>AlignMapsWrapperEnd
map <silent> <script> <Leader>aa <SID>WS:AlignCtrl mIp1P0=l<CR><CR>:'a,'zAlign \i\+\s*=<CR><SID>WE 
```

还有一个 Align 的替代方法，称为 Tabularize。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:33:43.207

您可以为此使用外部工具，我使用 astyle 进行 C/C++ 编码，为了使其自动化，我在 ~/.vimrc 文件中插入了以下内容：

```
if filereadable("/usr/bin/astyle")
    silent! %!astyle
endif 
```

如果符合您的需求，您可以搜索[Tidy 。](http://sourceforge.net/projects/tidy/)

观察者：使用 :%! 您将所有代码传递给外部工具“！，对于特定的选择'<，'>！应该使用。

现在您可以将快捷方式映射到此命令。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:46:33.063

您在块模式下进行什么样的编辑？可能有一种更简单的编辑方法。

这是一个例子：

删除类型=“*”：

*   逐行视觉选择块（即V}）
*   类型：规范 WdW

解释：

*   当您通过可视选择键入 : 时，您应该会在命令行中看到 :'<,'>。这意味着仅对选择执行以下命令
*   :norm 表示以普通模式解释以下字符
*   W 跳转到下一个 Word 的开头
*   dW 删除直到下一个 Word 的开头

我确实必须按照您描述的方式对齐单词，以针对特定情况下优先考虑可读性（通常不赞成）。我最终做了一个快速破解来完成工作。在您的情况下，它看起来像：

*   （选择块）
*   :'<,'>s///g
*   （进入“输入”后的第一个空格）
*   （注意右下角的列号（10））
*   gv（重新选择块）
*   :norm 10ldw (删除
*   （转到“abc”之后的第一个空格（因为这是该列的最长值））
*   （注意列号（21））
*   : 标准 21ldw

... 等等

如果您只想删除一列，您可以将 1 个空格转换为多个，块选择包含每侧一些空格的列，删除并将多个空格转换回一个。

正如我之前所说，这种方法非常脆弱，只有在空格仅用于分隔列时才有可能。除了在块上使用 :norm 之外，您还可以考虑制作宏或尝试使用查找和替换来完成您的编辑任务

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:47:30.093

如果属性之间只有一个空格，您可以这样做：

```
 :s/"\s/"\t/g 
```

[你可以在这里](http://www.catonmat.net/blog/ed-unix-text-editor-cheat-sheet/)看到更多。

# c++ - 在 OpenCV 中保存和加载浮点值

> ID：11654585
> 
> 赞同：1
> 
> 时间：2012-07-25T16:41:14.657
> 
> 标签：c++, opencv

我正在对图像应用过滤器，这会导致过滤器响应不在 [0 255] 范围内。我将它们存储在 IPL_DEPTH_64F 类型的 CvMat 中。我试图用以下方法保存它：

```
FileStorage fs(outFile, FileStorage::WRITE);
fs.open(outFile, FileStorage::WRITE);       
fs << "filter" << filter_mat;    
fs.release(); 
```

不幸的是，这会导致文件的值在 0-255 之间。显然这不能正确加载！所以问题是：如何保存这样的矩阵？以及如何用 OpenCV 再次加载它？似乎几乎没有任何可用的文档！

提前致谢

干杯，迈克尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T06:54:33.803

好的，我发现了错误！我使用**IPL_DEPTH_64F**类型创建了矩阵。当我将其更改为**CV_64FC1**时，它起作用了。感谢马丁的帮助:)

# mysql - 如何计算转发次数并相应地更新数据库？

> ID：11654587
> 
> 赞同：1
> 
> 时间：2012-07-25T16:41:27.867
> 
> 标签：mysql

考虑下表：

```
tweets                                retweets
----------------------------------    --------------------
id  id_str             retweet_cnt    id id_str
----------------------------------    --------------------
1   46604457684901888                 1  46604457684901888
2   46556513103388672                 2  46604457684901888
3   46294368197427200                 3  46604457684901888
                                      4  46556513103388672
                                      5  46556513103388672 
```

我想`UPDATE` `tweets.retweet_cnt`通过计算每个（varchar）`id_str`它在`retweets`. 有人可以帮我查询这个吗？重要提示：in 可能`id_str` **不会**出现在中`retweets`（如`46294368197427200`示例中的情况）。`0`在这种情况下，应返回零 ( )。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:47:16.643

您可以使用`UPDATE`on tweets 并加入每个 id 的转发计数：

```
update tweets t
left join (select id_str, count(id) as id_count
           from retweets r group by id_str) r
  on r.id_str = t.id_str
set t.retweet_cnt = coalesce(r.id_count, 0); 
```

演示：[http ://www.sqlfiddle.com/#!2/38e98/1](http://www.sqlfiddle.com/#!2/38e98/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:44:07.500

```
SELECT t.id_str, COUNT(r.id)
FROM tweets t
  LEFT JOIN retweets r
  ON t.id_str = r.id_str
GROUP BY t.id_str 
```

# objective-c - 将目录的内容复制到 Documents 目录

> ID：11654589
> 
> 赞同：0
> 
> 时间：2012-07-25T16:41:35.460
> 
> 标签：objective-c, ios, file, for-loop, nsdocumentdirectory

我有一个问题，我需要将 Documents 子目录的内容移动到 Documents Directory 的“根目录”。为此，我想将子目录的所有内容复制到 Documents 目录，然后删除我的子目录。

```
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *documentinbox = [documentsDirectory stringByAppendingPathComponent:@"inbox"] 
```

这就是我获取 Documents 目录的路径以及名为 inbox 的子目录的路径的方式。

```
 NSArray *inboxContents = [[NSFileManager defaultManager] contentsOfDirectoryAtPath:documentinbox error:nil];
NSFileManager *fileManager = [NSFileManager defaultManager]; 
```

然后我创建一个包含子文件夹中所有文档的数组，并初始化文件管理器。

现在我必须实现 for 循环，为每个文档将文档从子目录复制到 Documents 目录。

```
for(int i=0;i<[inboxContents count];i++){
  //here there is the problem, I don't know how to copy each file 
```

我想使用moveItemAtPath方法，但是不知道如何获取每个文件的路径。

希望您能理解我的问题，感谢您的帮助 Nicco

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:56:20.153

您可以`moveItemAtPath:toPath:error:`如下使用。

```
NSString *documentsDirectory = [paths objectAtIndex:0];
NSString *documentinbox = [documentsDirectory stringByAppendingPathComponent:@"inbox"];

//Initialize fileManager first
NSFileManager *fileManager = [NSFileManager defaultManager];

//You should always check for errors
NSError *error;
NSArray *inboxContents = [fileManager contentsOfDirectoryAtPath:documentinbox error:&error];
//TODO: error handling if inboxContents is nil

for(NSString *source in inboxContents)
{
    //Create the path for the destination by appending the file name
    NSString *dest = [documentsDirectory stringByAppendingPathComponent:
                      [source lastPathComponent]];

    if(![fileManager moveItemAtPath:source
                            toPath:dest
                             error:&error])
    {
        //TODO: Handle error
        NSLog(@"Error: %@", error);
    }
} 
```

# git - 如何找到两个 git 遥控器之间的差异

> ID：11654591
> 
> 赞同：1
> 
> 时间：2012-07-25T16:41:41.477
> 
> 标签：git, git-svn

在我的 svn repo 的本地副本（使用 git-svn 创建）中，我有多个遥控器代表我们项目的一系列版本：遥控器/标签/release1 遥控器/标签/release2 等。如何使用 git 向我展示更改了版本和/或 releaseN 和 releaseN-1 之间的差异？

我试过`git diff remotes/tags/releaseN-1 remotes/tags/releaseN` and `git log remotes/tags/releaseN-1 remotes/tags/releaseN`，但是这两个都只是给我“未知的修订或路径不在工作树中”的错误消息。

# javascript - 必填字段验证器禁用 fileuplad asp.net

> ID：11654592
> 
> 赞同：0
> 
> 时间：2012-07-25T16:41:41.797
> 
> 标签：javascript, asp.net, validation

我正在`asp.net`使用`C#`. 该页面由 组成`text-boxes`，`file-uploader`可以选择多个文件，这是通过 完成的`jQuery`，还需要字段验证器和提交按钮。

问题是当我在一个或多个文本框为空时单击按钮时，验证器会收到错误，该字段为空，但文件上传被禁用。所以我想用javascript创建我自己的必填字段验证器。

有人知道如何解决这个问题吗？

# ember.js - ember.js 扩展和创建有什么区别？

> ID：11654593
> 
> 赞同：27
> 
> 时间：2012-07-25T16:41:44.580
> 
> 标签：ember.js

`ember.js`对象方法`extend`和对象有什么区别`create`？

TLDR：您将在[Ember 指南中找到答案：类和实例](http://emberjs.com/guides/object-model/classes-and-instances/)。

有时我在示例中看到一个，有时另一个。`Em.Application.extend({})`特别是和有什么区别`Em.Application.create({})`？

如果我这样声明我的应用程序，这意味着什么？

```
Ember.Application.create({
    MyController : Ember.ArrayController.extend({

    }),
}); 
```

如何访问 MyController 的实例？我需要以某种方式创建它吗？我需要将一些数据推入其中。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-07-25T17:00:05.190

死的简单答案是`extend`定义一个新的 JS 类，它继承自您要扩展的类，但不创建该类的实例。`create`创建类的一个实例。

`Em.Application`是一种特殊情况，因为您正在创建命名空间，而不是对象实例。我不知道你什么时候想要`extend` `Em.Application`。

```
应用程序 = Em.Application.create(); // 我有一个新的 Em.Application 命名空间
App.A = Em.Object.extend(); // 我定义了一个新类 App.A，
                            // 继承自 Em.Object
var a = App.A.create(); // a 现在包含 App.A 的一个实例。

```

我建议您也阅读“[命名约定](http://www.emberist.com/2012/04/09/naming-conventions.html)”。

ETA：和“[了解 Ember 对象](http://www.cerebris.com/blog/2012/03/06/understanding-ember-object/)”，正如 zaplitny 的评论中所建议的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-04T14:47:23.443

据我所知，用外行的话来说，当你想定义一个新的对象想法时，你会**扩展，它的属性永远不会改变（重新打开除外），并且存在于这个对象的所有版本中。**

当您想使用特定的个体（实例）对象时**创建。**换句话说，具有将被操作或其他特定实例更改的属性的东西。

通常你只需要创建对象之间的关系，你不需要谈论特定的个体对象，而是对象的想法。因此，您无需在每次**扩展时都****创建**.

 **希望我理解正确。**

# android - 可以通过 Android 日历阻止会议

> ID：11654603
> 
> 赞同：0
> 
> 时间：2012-07-25T16:42:17.777
> 
> 标签：android, android-calendar

如何通过 Android 日历阻止会议并将结果保存在数据库中？我是初学者，有人可以分享他们的知识吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T18:24:35.957

要在数据库中存储数据，请浏览此[http://www.vogella.com/articles/AndroidSQLite/article.html](http://www.vogella.com/articles/AndroidSQLite/article.html)。要获取日期和时间，您可以通过以下方式实现。

```
 Calendar calender = Calendar.getInstance();

    SimpleDateFormat dateFoamat = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
    String dateandTime = dateFoamat.format(calender.getTime());
    Toast.makeText(this, dateandTime , Toast.LENGTH_SHORT).show(); 
```

dateandTime 字符串将显示您当前的日期和时间。

# google-maps - Google 地图中的自定义形状叠加层

> ID：11654605
> 
> 赞同：0
> 
> 时间：2012-07-25T16:42:21.580
> 
> 标签：google-maps

目标：我试图在谷歌地图的叠加层中追踪纽约市自治市镇。

问题：我找不到合适的形状。如果我去谷歌地图搜索布朗克斯，我会得到布朗克斯的一个很好的轮廓。我的问题是谷歌文档中的形状似乎都不适合我想要做的事情。最佳匹配看起来像一个多边形，但由于所有的锯齿状，它不适用于所有边界。我正在尝试使用叠加层，因为我需要它们是可点击的

[https://maps.google.com/maps?q=manhattan&ie=UTF-8&hq=&hnear=0x89c2588f046ee661:0xa0b3281fcecc08c,Manhattan,+New+York,+NY&gl=us&ei=thEQUISLBO610AG4qYDYCA&ved=0CKkBELYD](https://maps.google.com/maps?q=manhattan&ie=UTF-8&hq=&hnear=0x89c2588f046ee661:0xa0b3281fcecc08c,Manhattan,+New+York,+NY&gl=us&ei=thEQUISLBO610AG4qYDYCA&ved=0CKkBELYD)

对比

[http://jsfiddle.net/xHKB7/5/](http://jsfiddle.net/xHKB7/5/)

我不需要单独追踪每个岛屿，因为我所做的并不那么精确 - 但如果你看皇后，我看不出我如何合理地使用多边形来捕捉这个形状

[https://maps.google.com/maps?q=manhattan&ie=UTF-8&hq=&hnear=0x89c2588f046ee661:0xa0b3281fcecc08c,Manhattan,+New+York,+NY&gl=us&ei=thEQUISLBO610AG4qYDYCA&ved=0CKkBELYD](https://maps.google.com/maps?q=manhattan&ie=UTF-8&hq=&hnear=0x89c2588f046ee661:0xa0b3281fcecc08c,Manhattan,+New+York,+NY&gl=us&ei=thEQUISLBO610AG4qYDYCA&ved=0CKkBELYD)

我尝试从中心开始，然后追踪边界，因为我发现这可以从各个方面给我最好的细节，但它显然留下了这条丑陋的线条。

[http://jsfiddle.net/xHKB7/6/](http://jsfiddle.net/xHKB7/6/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:50:17.180

FusionTables 包含一些可能对您有用的数据：

[布朗克斯 - 来自纽约州各县](https://www.google.com/fusiontables/DataSource?snapid=S595151csEn)

[里士满市（史泰登岛） - 来自纽约州各县](https://www.google.com/fusiontables/DataSource?snapid=S595158Z_90)

[（从这个页面）](http://support.google.com/fusiontables/bin/answer.py?hl=en&answer=1182141)

不知道这是否比你画的更好。

# c# - 如何使用 DataContext.ExecuteCommand 并获取执行的存储过程返回值？

> ID：11654610
> 
> 赞同：5
> 
> 时间：2012-07-25T16:42:50.377
> 
> 标签：c#, asp.net-mvc-3, sql-server-2008, stored-procedures, return-value

在ac#项目中，我调用了一个存储过程如下：

```
System.Data.Linq.DataContext dataContext = MembershipContext.GetContext(connectionString);
int returnValue = dataContext.ExecuteCommand("EXEC usp_SomeProcedure {0}, {1}, {2}", param1, param2, param3); 
```

但是，ExecuteCommand 返回受影响的行数，而不是我的存储过程返回值。获得此值的最简单方法是什么。我需要这个，因为 SP 在成功时返回 0，如果发生错误则返回正 int 值。

目前，存储过程使用 RETURN 输出其返回值。但是，我可以将其更改为 SELECT，或者如果需要，我也可以使用输出参数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T16:56:46.673

我相信您需要将 CommandType 设置为 CommandType.StoredProcedure 才能从存储的过程中获取返回值。请参阅此处接受的答案：[Getting return value from stored procedure in ADO.NET](https://stackoverflow.com/questions/3309213/getting-return-value-from-stored-procedure-in-ado-net)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:03:08.070

`DataContext`如果您不需要 Linq2Sql 映射功能，请勿用于调用 SP。只需`SqlCommand`用作[down.with.the.bass 节目](https://stackoverflow.com/a/11654837/1105881)。

# android - Android 和可配置的应用程序，可重用的活动

> ID：11654614
> 
> 赞同：0
> 
> 时间：2012-07-25T16:43:37.240
> 
> 标签：android, android-activity, dependency-injection, configurable

我正在做一个项目，在那个阶段必须为不同的客户定制。应用程序由一些业务逻辑和 15 个不同的 UI 活动组成。让我们假设活动 A 开始 B，B 开始活动 C。A 知道 B，B 知道 C。我希望能够交换活动 B（使用不同的布局，有点不同的逻辑来处理用户交互），但是离开A和C完好无损。实现这一目标的最佳方法是什么？我将为不同的客户提供越来越多的不同活动（服务于类似目的），因此解决方案需要处理许多不同的配置。

我计划根据配置将自定义活动拆分到不同的库并使用 DI 容器（RoboGuice 2.0）注入它们，但看起来我仍然需要将所有活动放在 manifest.xaml 中，这需要双重工作（编辑清单+ 配置 DI 容器）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T11:03:41.380

> A知道B，B知道C。

在这种情况下，这听起来不太明智。

> 我希望能够交换活动 B（使用不同的布局，处理用户交互的逻辑有点不同），但保持 A 和 C 不变。

然后将 A、C 和所有其他常用代码放入 Android 库项目中。将 B 和其他特定于客户的代码放在依赖于库的特定于客户的项目中。有一些方法让 A（在库中）确定如何最好地启动 B（为客户）。例如，您可以让所有特定于客户的项目都使用相同的广告 B `<intent-filter>`（使用一个很好的特定于应用程序且其他晦涩的操作字符串），并且 A 可以简单地使用`Intent`将匹配该过滤器的`startActivity()`. 然后 A 在一般意义上了解 B（“这是 B 操作”），而不知道 B 实现，这将是客户特定的。

> 我计划将自定义活动拆分到不同的库并使用 DI 容器（RoboGuice 2.0）注入它们

这听起来像是用别克拍苍蝇，但也许你与 DI 有着悠久的历史。

> 但看起来我仍然需要将所有活动放在 manifest.xaml 中，这需要双重工作（编辑清单 + 配置 DI 容器）

然后放下 DI 容器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:50:41.840

也许，您可以将项目置于版本控制之下，而不是在您的代码中做任何事情，并且对于您的某些文件，您可以为不同的客户拥有不同的分支。

# c# - 节流 Rx.Observable 不跳过值

> ID：11654615
> 
> 赞同：17
> 
> 时间：2012-07-25T16:43:38.000
> 
> 标签：c#, .net, system.reactive

`Throttle`如果其他人跟随得太快，方法会跳过可观察序列中的值。但我需要一种方法来延迟它们。也就是说，我需要**设置项目之间的最小延迟，而不跳过任何**.

实际示例：有一个 Web 服务接受请求的速度不超过每秒一次；有一个用户可以添加请求，单个或批量。如果没有 Rx，我将创建一个列表和一个计时器。当用户添加请求时，我会将它们添加到列表中。在计时器事件中，我会检查列表是否为空。如果不是，我将发送请求并删除相应的项目。有锁和所有这些东西。现在，使用 Rx，我可以`Subject`在用户添加请求时创建、添加项目。但我需要一种方法来确保 Web 服务不会因应用延迟而被淹没。

我是 Rx 的新手，所以也许我遗漏了一些明显的东西。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T02:28:07.827

有一种相当简单的方法可以使用`EventLoopScheduler`.

我从一个 observable 开始，它将每 0 到 3 秒随机产生一次值。

```
var rnd = new Random();

var xs =
    Observable
        .Generate(
            0,
            x => x < 20,
            x => x + 1,
            x => x,
            x => TimeSpan.FromSeconds(rnd.NextDouble() * 3.0)); 
```

现在，要立即生成此输出值，除非最后一个值在一秒钟内，否则我这样做了：

```
var ys =
    Observable.Create<int>(o =>
    {
        var els = new EventLoopScheduler();
        return xs
            .ObserveOn(els)
            .Do(x => els.Schedule(() => Thread.Sleep(1000)))
            .Subscribe(o);
    }); 
```

这有效地观察了源上的源`EventLoopScheduler`，然后在每次之后将其休眠 1 秒钟，`OnNext`以便它只能`OnNext`在唤醒后开始下一个。

我测试了它是否可以与以下代码一起使用：

```
ys
    .Timestamp()
    .Select(x => x.Timestamp.Second + (double)x.Timestamp.Millisecond/1000.0)
    .Subscribe(x => Console.WriteLine(x)); 
```

我希望这有帮助。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-07-26T10:51:04.613

一个简单的扩展方法怎么样：

```
public static IObservable<T> StepInterval<T>(this IObservable<T> source, TimeSpan minDelay)
{
    return source.Select(x => 
        Observable.Empty<T>()
            .Delay(minDelay)
            .StartWith(x)
    ).Concat();
} 
```

用法：

```
var bufferedSource = source.StepInterval(TimeSpan.FromSeconds(1)); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-06-18T20:51:20.830

我想建议一种使用方法`Observable.Zip`：

```
// Incoming requests
var requests = new[] {1, 2, 3, 4, 5}.ToObservable();

// defines the frequency of the incoming requests
// This is the way to emulate flood of incoming requests.
// Which, by the way, uses the same approach that will be used in the solution
var requestsTimer = Observable.Interval(TimeSpan.FromSeconds(0.1)); 
var incomingRequests = Observable.Zip(requests, requestsTimer, (number, time) => {return number;});
incomingRequests.Subscribe((number) =>
{
    Console.WriteLine($"Request received: {number}");
});

// This the minimum interval at which we want to process the incoming requests
var processingTimeInterval = Observable.Interval(TimeSpan.FromSeconds(1));

// Zipping incoming requests with the interval
var requestsToProcess = Observable.Zip(incomingRequests, processingTimeInterval, (data, time) => {return data;});

requestsToProcess.Subscribe((number) =>
{
    Console.WriteLine($"Request processed: {number}");
}); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-10-07T17:53:54.387

我正在玩这个，发现 .Zip （如前所述）是最简单的方法：

```
var stream = "ThisFastObservable".ToObservable();
var slowStream = 
    stream.Zip(
        Observable.Interval(TimeSpan.FromSeconds(1)), //Time delay 
        (x, y) => x); // We just care about the original stream value (x), not the interval ticks (y)

slowStream.TimeInterval().Subscribe(x => Console.WriteLine($"{x.Value} arrived after {x.Interval}")); 
```

输出：

```
T arrived after 00:00:01.0393840
h arrived after 00:00:00.9787150
i arrived after 00:00:01.0080400
s arrived after 00:00:00.9963000
F arrived after 00:00:01.0002530
a arrived after 00:00:01.0003770
s arrived after 00:00:00.9963710
t arrived after 00:00:01.0026450
O arrived after 00:00:00.9995360
b arrived after 00:00:01.0014620
s arrived after 00:00:00.9993100
e arrived after 00:00:00.9972710
r arrived after 00:00:01.0001240
v arrived after 00:00:01.0016600
a arrived after 00:00:00.9981140
b arrived after 00:00:01.0033980
l arrived after 00:00:00.9992570
e arrived after 00:00:01.0003520 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-07-25T16:50:26.053

使用可观察计时器从阻塞队列中获取数据怎么样？下面的代码未经测试，但应该让您了解我的意思......

```
//assuming somewhere there is 
BlockingCollection<MyWebServiceRequestData> workQueue = ...

Observable
  .Timer(new TimeSpan(0,0,1), new EventLoopScheduler())
  .Do(i => myWebService.Send(workQueue.Take()));

// Then just add items to the queue using workQueue.Add(...) 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-05-01T19:08:00.013

```
.Buffer(TimeSpan.FromSeconds(0.2)).Where(i => i.Any())
.Subscribe(buffer => 
{
     foreach(var item in buffer) Console.WriteLine(item)
}); 
```

# jquery - 重置列宽？

> ID：11654620
> 
> 赞同：0
> 
> 时间：2012-07-25T16:43:47.643
> 
> 标签：jquery, jquery-masonry

是否可以重置砌体布局的 columnWidth？我正在使用媒体查询，所以想动态更新宽度。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-12T12:41:17.570

是的，这是可能的。在此处查看[如何操作](http://masonry.desandro.com/demos/fluid.html)。

# android - Android SO 文件安全

> ID：11654621
> 
> 赞同：0
> 
> 时间：2012-07-25T16:43:52.687
> 
> 标签：android, encryption, shared-libraries

是否可以检测到隐藏在 Android **SO 文件中的加密字符串和算法？**目前正在研究 Android 安全最佳实践。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T03:20:39.560

当然。毕竟它只是隐藏的。加密数据比具有某种结构的常规库代码更随机。有一些工具可以检测到这一点（有些甚至是为了记忆）。真正的问题是解密密钥是否位于同一个二进制文件中。如果是这样，那么有足够决心的人将能够找到它。最好的办法是尝试在运行时通过组合它的零碎部分来生成它，但这也不是万无一失的。

# java - 如何使用 Java Robot 输入非小键盘数字？

> ID：11654628
> 
> 赞同：1
> 
> 时间：2012-07-25T16:44:13.880
> 
> 标签：java, keyboard, numbers, keyevent, awtrobot

我正在运行一个 Java 机器人类，我需要输入键盘键 0-9（实际数字），而不是小键盘数字。出于某种原因，我正在使用的 java 小程序（我没有编写）不接受来自小键盘的 0-9 键，只接受标准键盘上方的 0-9 行。但是，Java 机器人类似乎只有一个 VK_NUMPAD# KeyEvent。起初，我尝试了 VK_1 事件，但结果与数字无关（而是前 0-9 个 ASCII 字符）。有什么办法可以得到第一行的数字吗？我使用的机器人除此之外工作正常，并且会愉快地输入“VK_P”和“VK_UP”等键。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-10T19:06:56.363

[这](http://docs.oracle.com/javase/7/docs/api/constant-values.html#java.awt.event.KeyEvent.VK_NUMPAD0)应该是关键代码的最终链接。使用 时`e.getKeyCode()`，我们看到 VK_NUMPAD 的代码分别为 96-105 用于数字 0-9。仅当 num_lock 打开时才会出现这种情况，因为如果它关闭，您将获得其他代码。

您对 VK_1 的尝试应该是正确的。那就是代码 49，它对应于顶行上的 1 已被推送。我用我拥有的小程序尝试了这个。我卡在一个 KeyListener 中，并验证这是正确的。48-57 对应于第一行的 0-9，在我给出的链接中列为 VK_0 ... VK_9。必须有某种覆盖（如 num_lock 键覆盖数字键盘）正在重新映射它，因为正如我所说 VK_1 是键盘顶部 1 字符的正确答案。

# javascript - 使用 javascript SDK 获取 Facebook Like 列表

> ID：11654629
> 
> 赞同：0
> 
> 时间：2012-07-25T16:44:14.850
> 
> 标签：javascript, list, sdk, facebook-like

有没有办法获得登录用户使用 Facebook javascript SDK 所做的所有“喜欢”？

或者

如果以前从未喜欢过，有没有办法显示喜欢的按钮？（使其不再与众不同）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:53:46.173

我认为您想要的是听到 GraphAPI：

[https://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

你也可以在那里阅读： [https ://developers.facebook.com/docs/reference/plugins/like/](https://developers.facebook.com/docs/reference/plugins/like/)

# mysql - 将 Wordpress post_meta 表变成更易于使用的视图

> ID：11654632
> 
> 赞同：2
> 
> 时间：2012-07-25T16:44:28.173
> 
> 标签：mysql, wordpress

我正在使用 Wordpress 并尝试创建一个视图，以便更轻松地查看和分析我的度假村数据。度假村数据存储在 Wordpress 的 post_meta 表中，并在称为“度假村”的自定义帖子类型中引用。以下查询为我提供了要解析的结果集：

```
SELECT a.id, a.post_type, a.post_title, b.post_id, b.meta_key, b.meta_value
FROM alpinezone_postmeta b
INNER JOIN alpinezone_posts a ON a.id = b.post_id
WHERE a.post_type = "resorts" 
```

我想要对这个结果集做的是让我定义的集合中的每个唯一元键成为一列，然后每一行应该是一个唯一的 b.post_id（或 a.id），它对应于单个度假村的记录。

所以最终我最终得到：

```
post_title |   phone_num      | state         |
resort1    |   800-200-1111   | Vermont       |
resort2    |   800-200-2222   | New Hampshire |
resort 3   |   800-200-2323   | Maine         | 
```

基本上......我在 MySQL 方面不是那么好，所以试图找出处理这个问题的最佳方法。我确实有一个我想要放入列中的所有 meta_key 的列表，其中有 36 个捕获了一系列信息。

**编辑：更多细节。**

*当前结构*- 也显示它来自哪个表

```
*alpinezone_posts   alpinezone_postmeta alpinezone_postmeta*
post_title          meta_key            meta_value
----------------------------------------------------------------
sugarloaf           snow_phone          888-234-2222
sugarloaf           vertical_feet       2300
sugarloaf           site_url            sugarloaf.com
wachusett           snow_phone          888-111-2222
wachusett           vertical_feet       1000
wachusett           site_url            wachusett.com 
```

这两个表在表 alpinezone_postmeta 的 post_id 和表 alpinezone_posts 的 id 上连接。

只需要表 alpinezone_posts 中的 post_type 为 = "resorts" 的结果

*我希望它在新视图中的外观*

```
post_title  snow_phone      vertical_feet   site_url
-------------------------------------------------------
sugarloaf   888-234-2222    2300            sugarloaf.com
wachusett   888-111-2222    1000            wachusett.com 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-26T22:02:32.273

您要使用的是带有“GROUP BY”的交叉表或数据透视表，如下例所示：[http ://en.wikibooks.org/wiki/MySQL/Pivot_table](http://en.wikibooks.org/wiki/MySQL/Pivot_table)

您需要使用除 SUM() 之外的其他字符串...例如 MAX()： http://forums.mysql.com/read.php?20,75357,75367#msg- [75367](http://forums.mysql.com/read.php?20,75357,75367#msg-75367)

```
 SELECT p.post_title AS post_title,
         MAX(IF(m.meta_key='phone_num',m.meta_value,0)) AS phone_num,
         MAX(IF(m.meta_key='state',m.meta_value,0)) AS state
    FROM alpinezone_postmeta m
    INNER JOIN alpinezone_posts p ON m.post_id = p.id
    WHERE p.post_type = 'resorts'
    GROUP BY m.post_id` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T21:07:39.430

我知道您对每个度假村都有一个帖子，每个帖子或多或少都有一套完整的元数据。如果这是正确的，那么您可以通过以下方式构建一个查询来生成您所描述的表。它不是很优雅，但它可以在不使用其他编程语言或 Excel 的情况下工作（Excel 可能能够从 post_meta 表的导出中得到你想要的东西，但我的 Excel-fu 还不够好......）

```
SELECT posts.title,
    m1.meta_value as <your meta key 1>,
    m2.meta_value as <your meta key 2>,
    m3.meta_value as <your meta key 3>,
    ...
FROM alpinezone_posts
    LEFT OUTER JOIN alpinezone_postmeta AS m1 ON alpinezone_posts.id = m1.post_id,
    LEFT OUTER JOIN alpinezone_postmeta AS m2 ON alpinezone_posts.id = m2.post_id,
    LEFT OUTER JOIN alpinezone_postmeta AS m3 ON alpinezone_posts.id = m3.post_id,
    ...
WHERE 
    m1.meta_key = <your meta key 1>
    AND m2.meta_key = <your meta key 2>
    AND m3.meta_key = <your meta key 3>
    ... 
```

使用`LEFT OUTER JOIN`而不是`INNER JOIN`确保您获得每个度假村的结果行，即使您没有每个 meta_key 的值。

如果您可以使用 PHP 并且 HTML 表格对您有帮助，您还可以循环所有帖子并使用[get_post_custom()](https://codex.wordpress.org/Function_Reference/get_post_custom)函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2022-01-25T22:18:32.630

这是我编写的一个存储过程，它采用给定的帖子类型并透视所有相关的 postmeta 数据。您不需要知道元键，它会为您解决所有问题。

这不是最快的查询，我们仅将它用于迁移和深入研究数据，但它可以完成工作。

请注意，这会临时重置 concat 函数的最大长度，以便您可以构建大型 SQL 语句：

```
CREATE PROCEDURE `wp_posts_pivot`(IN post_type_filter varchar(50))
BEGIN

/* allow longer concat */
declare max_len_original INT default 0;
set max_len_original = @@group_concat_max_len;
set @@group_concat_max_len=100000;

SET @sql = NULL;
SELECT 
    GROUP_CONCAT(DISTINCT CONCAT('MAX(IF(pm.meta_key = ''',
                meta_key,
                ''', pm.meta_value, NULL)) AS `',
                meta_key,
                '`'))
INTO @sql FROM
    wp_posts p
        INNER JOIN
    wp_postmeta AS pm ON p.id = pm.post_id
WHERE
    p.post_type = post_type_filter;

SET @sql = CONCAT('SELECT p.id
                    , p.post_title
                    , ', @sql, ' 
                   FROM wp_posts p
                   LEFT JOIN wp_postmeta AS pm 
                    ON p.id = pm.post_id
                    where p.post_type=\'',post_type_filter,'\'
                   GROUP BY p.id, p.post_title');

/* reset the default concat */
set @@group_concat_max_len= max_len_original;

/*
select @sql;
*/

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt;

END 
```

然后，您可以通过一个简单的调用来调用它，例如这个，它将为每个“页面”帖子类型选择一行以及所有元值：

```
call wp_posts_pivot('page'); 
```

# drupal - 密码保护单个页面，并且不向用户显示任何管理菜单

> ID：11654634
> 
> 赞同：0
> 
> 时间：2012-07-25T16:44:43.090
> 
> 标签：drupal, drupal-6, password-protection

我已经尝试过“受保护的节点”模块，但它转到 404 而不是它应该提供的密码提示页面。

还尝试了“简单访问”模块，在获得它来控制访问之后，意识到它仍然向用户显示“编辑”菜单，并且似乎没有办法为他们关闭它。

感谢任何能提供帮助的人。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-08T18:31:04.547

我以前使用过“节点访问”模块。但是对于我最近必须处理的一个站点，我需要一些允许我在单个页面上限制匿名用户访问的东西。只有收到密码的访问者才能访问。安装节点访问模块并创建特定角色似乎对于这个有限的要求来说有点过头了，我选择了“[受保护的页面](https://drupal.org/project/protected_pages)”模块，它允许为某个路径设置密码。（仅限 d7）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T20:13:18.973

使用[NodeAccess](http://drupal.org/project/nodeaccess)模块根据角色限制该页面。

> 具有“授予节点权限”权限的用户将在节点页面上有一个授予选项卡，允许他们按用户或角色授予对该节点的访问权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T12:20:44.463

对管理员的访问通常通过用户权限控制，以限制对特定页面的访问，这可以通过[Panels](http://drupal.org/project/panels)来实现。

# android - Android HTML输入字段更正/完成很糟糕

> ID：11654643
> 
> 赞同：1
> 
> 时间：2012-07-25T16:45:26.617
> 
> 标签：android, html, chrome-for-android

在现代（ICS、Jelly bean）Android 设备上试试这个：

1.  打开消息应用程序并给某人输入一个句子。键盘活泼，完成效果很好，单词完成后添加空格。

2.  `www.google.com`在浏览器或 Android 版 Chrome 中打开，然后在搜索字段中输入相同的句子。糟透了。完成很糟糕，更正不起作用（它*建议*更正但从不自动选择它们），并且不会在单词之后插入空格。

这是怎么回事？有什么方法可以改进我的 HTML 页面上的完成更正，也许是通过向`<input>`元素添加一些隐藏属性？

# silverlight - Silverlight EventHandler DependencyProperty 绑定

> ID：11654645
> 
> 赞同：1
> 
> 时间：2012-07-25T16:45:41.780
> 
> 标签：silverlight, xaml, binding, event-handling, dependency-properties

我有一个 UserControl，我试图将事件处理程序从父控件连接到。我想尽可能少地编写代码并且遇到了一些问题。这是我的设置：

在我后面的 NewUserControl 代码中：

```
 public RoutedEventHandler PrintClickHandler { get; set; }
 public DependencyProperty PrintClickHandlerProperty = 
     DependencyProperty.Register("PrintClickHandler", typeof(RoutedEventHandler), 
                                 typeof(NewUserControl), new PropertyMetadata(null)); 
```

在 MyParentControl 我有：

```
 public RoutedEventHandler PrintClickHandler
 {
    get { return btnPrintCall_Click; }
 }
 private void btnPrintCall_Click(object sender, RoutedEventArgs e)
 {
    // some code
 } 
```

最后在 MyParentControls xaml 我有 NewUserControl.PrintClickHandler 的绑定：

```
<NewUserControl PrintClickHandler="{Binding Path=PrintClickHandler, 
    RelativeSource={RelativeSource AncestorType=local:MyParentControl, AncestorLevel=1}}" /> 
```

现在在调试器中，我可以实现所有 getter 和 setter，这是在调用它们时命中断点的经典方法。我看到 MyParentControl.PrintClickHandler 的 getter 被击中，但 NewUserControl.PrintClickHandler 的 setter 从未被击中。我在输出中也没有与此绑定相关的错误或警告。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:20:19.250

我从来没有尝试过这样的事件，但看起来你的依赖属性可能设置不正确，试试：

```
public RoutedEventHandler PrintClickHandler
{
    get { return (RoutedEventHandler)GetValue(PrintClickHandlerProperty); }
    set { SetValue(PrintClickHandlerProperty, value); }
}

public static DependencyProperty PrintClickHandlerProperty = DependencyProperty.Register(
    "PrintClickHandler", 
    typeof(RoutedEventHandler), 
    typeof(NewUserControl), 
    new PropertyMetadata(null)); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-08-02T15:18:19.140

这个问题是错误的。当我处理一个事件时，使用依赖属性是不合适的。我可以简单地在我的代码中添加一个公共事件属性，可以在 xaml 中将其设置为适当的事件处理程序方法。

# c# - 导入 Excel 不起作用

> ID：11654649
> 
> 赞同：0
> 
> 时间：2012-07-25T16:45:49.877
> 
> 标签：c#, .net, excel, office-interop, visual-studio-lightswitch

**我正在使用[Office 集成包](http://officeintegration.codeplex.com/documentation?FocusElement=Comment)**

正确遵循说明后，我仍然无法让 Excel 导入工作

我的**Visual Studio Lightswitch 2011 应用程序**配置为托管在 IIS 服务器上并使用**Easy Shell**（因此它是 MS 提供的默认 Shell）。

到目前为止，我尝试过调用

```
OfficeIntegration.Excel.Import(
   this.States, 
    @"C:\Users\Mr_Mia_Gie\My Documents\ExcelSheet.xls", 
    "Sheet1", 
   "A1:C3"); 
```

在`_Execute event`一个按钮上（该按钮不在 Shell 命令栏上）

我得到的例外是**“对象变量或未设置块变量”。**

任何解决方案或建议将不胜感激

干杯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T02:39:36.970

我同意 Nevyn 的观点（我会投票赞成他的答案，但它作为*编辑*嵌入在问题中，所以我不能）。

正如 Nevyn 所指出的，在特定的代码行中实际上只有三个对象会导致*空异常*：

*   *OfficeIntegration*对象_
*   *OfficeIntegration.Excel*对象_
*   或者，*this.States*集合（虽然不太可能）

正如还为您指出的那样，这些对象之一很可能没有正确初始化。您需要通过在该行上放置一个断点并检查它们在该点的实际值来检查这三个对象的值。

您还可以在代码中放置一个保护子句（就在该行上方）：

***if (OfficeIntegration == null) || (OfficeIntegration.Excel == null) 返回；***

它不一定会“修复”问题，但会阻止空异常的发生（但这不应该是*Execute*方法中的问题）。但是，**当**您引用一个值可能为空的对象时，放置一个保护子句是一种很好的编程习惯。

如果做不到这一点，我们任何人都可以给您的唯一其他建议是在图库页面的问题部分中发布问题，您从那里下载了扩展程序。扩展的作者应该能够帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:59:21.697

这是一个网络应用程序，如果是，我认为它不支持它。它需要扩展。我为你挖了一篇文章，试试看：

[http://blogs.msdn.com/b/lightswitch/archive/2011/04/13/how-to-import-data-from-excel.aspx](http://blogs.msdn.com/b/lightswitch/archive/2011/04/13/how-to-import-data-from-excel.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-28T20:22:25.563

Office 集成包适用于 Visual Studio LightSwitch windows 应用程序，并且适用于托管在 IIS 上的应用程序，因此以下代码会引发异常

```
OfficeIntegration.Excel.Import(
   this.States, 
    @"C:\Users\Mr_Mia_Gie\My Documents\ExcelSheet.xls", 
    "Sheet1", 
   "A1:C3"); 
```

该链接显示该扩展不支持 LS WebBrowser 应用程序[http://officeintegration.codeplex.com/discussions/374585](http://officeintegration.codeplex.com/discussions/374585)

此外，扩展从 Excel 导入数据确实适用于在 webbrowser 中运行的 IIS 托管 LS 应用程序

# jquery - JQuery UI - 尝试打开手风琴部分，其中手风琴位于单独的选项卡中

> ID：11654651
> 
> 赞同：1
> 
> 时间：2012-07-25T16:45:57.623
> 
> 标签：jquery, user-interface, tabs, accordion

我是 JQuery 的新手，我在尝试让一个函数工作时遇到问题，我在页面上的一个选项卡内有一个指向 JQuery UI 手风琴内的锚点的链接。我在 2 个选项卡（@ 选项卡中的 1 个）中有单独的手风琴 (2)。我拼凑了一些可行的代码，但又不可行。这是我所拥有的：

```
 <script type="text/javascript">
  $(function(){

  // Accordion
  $('#accordion2, #accordion3').accordion({ header: "h3",navigation: true,collapsible: true });

  // Tabs
            $('#tabs').tabs();

            // Tabs                                                                                                              
    var $tabs = $("#tabs").tabs();

    // Handle clicks for on-page accordion section links                                                                                  
   $("a.openTab").click(function(e) {
        var thisName = "";
        var $tabParent = null;
        var tabIndex = 0;
                    var $accordionParent = null;
        var accordionIndex = 0;

        // Prevent default click behavior                                                                            
        e.preventDefault();

        // Get the named anchor from the clicked link's href                                                         
        thisName = $(this).attr("href").split("#")[1];

        // Find the tab parent. Tabs should all have class "tab".                                                    
        $tabParent = $("a[name='" + thisName + "']").closest(".tab");

                    // Find the accordion parent. Accordion should all have class "accTable".                                                    
        $accordionParent = $("a[name='" + thisName + "']").closest(".accTable");

        // Get the index of this tab                                                                                 
        tabIndex = $(".tab").index($tabParent);

                    // Get the index of this accordion                                                                                 
        accordionIndex = $(".accTable").index($accordionParent);
                    // alert(accordionIndex);

        // Open the appropriate tab                                                                                  
        $tabs.tabs("select", tabIndex);

                    // Open the appropriate accordion section
                                            $('.accordionTabs').accordion( "option", "active", accordionIndex );

                    // Scroll down to selected opened accordion                             
              $('html, body').animate({
                            scrollTop:$("a[name='" + thisName + "']").offset().top
                        }, 2000);
    });

        });
    </script>
</head>

<body>

<DIV id=wrapper>

    <BR><BR>
        <a class="openTab" href="#tab1">Target anchor in tab 1</a><BR>
    <a class="openTab" href="#tab2">Target anchor in tab 2</a><BR>
  <a class="openTab" href="#tab3">Target anchor in tab 3</a><BR>
        <a class="openTab" href="#ServicesSkill">Services anchor within tab 2</a><BR>
        <a class="openTab" href="#SolutionsSkill">Solution anchor within tab 2</a><BR>
        <a class="openTab" href="#EducationSkill">Education anchor within tab 3</a><BR>
        <a class="openTab" href="#CustomerSkill">Customer anchor within tab 3</a><BR>
    <BR><BR><BR>

    <!-- Tabs -->
    <div id="tabs">
        <ul>
            <li><a href="#tabs-1">First</a></li>
            <li><a href="#tabs-2">Second</a></li>
            <li><a href="#tabs-3">Third</a></li>
        </ul>

        <div id="tabs-1" class="tab">
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor 
        incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud 
        exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat.</p>
        <a name="tab1">This is a named anchor in tab 1.</a>
        </div>

        <div id="tabs-2" class="tab">
        <p>Phasellus mattis tincidunt nibh. Cras orci urna, blandit id, pretium vel, aliquet 
        ornare, felis. Maecenas scelerisque sem non nisl. Fusce sed lorem in enim dictum bibendum.</p>
   <a name="tab2">This is a named anchor in tab 2.</a>

            <div id="accordion2" class="accordionTabs">
                <div>
                    <h3><a href="#">First</a></h3>
                    <div class="accTable">Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</div>
                </div>
                <div>
                    <h3><a href="#">Services</a></h3>
                    <div class="accTable">
                    <a name="ServicesSkill"></a>
                    Phasellus mattis tincidunt nibh.</div>
                </div>
                <div>
                    <h3><a href="#">Solutions</a></h3>
                    <div class="accTable">
                    <a name="SolutionsSkill"></a>
                    Nam dui erat, auctor a, dignissim quis.</div>
                </div>
            </div>          

        </div>

        <div id="tabs-3" class="tab">
            <div id="accordion3" class="accordionTabs">
                <div>
                    <h3><a href="#">Second</a></h3>
                    <div class="accTable">Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet. Lorem ipsum dolor sit amet.</div>
                </div>
                <div>
                    <h3><a href="#">Education</a></h3>
                    <div class="accTable">
                    <a name="EducationSkill"></a>
                    Phasellus mattis tincidunt nibh.</div>
                </div>
                <div>
                    <h3><a href="#">Customer</a></h3>
                    <div class="accTable">
                    <a name="CustomerSkill"></a>
                    Nam dui erat, auctor a, dignissim quis.</div>
                </div>
            </div>

        <P>Nam dui erat, auctor a, dignissim quis, sollicitudin eu, felis. Pellentesque
        nisi urna, interdum eget, sagittis et, consequat vestibulum, lacus. Mauris porttitor 
        ullamcorper augue.</P>
  <a name="tab3">This is a named anchor in tab 3.</a>
        </div>
    </div> 
```

它将打开我在第一个选项卡中的第一个手风琴中的锚，但是当尝试打开指向我在第二个选项卡中的第二个手风琴中的任何锚的链接时它会变得不稳定。我修改了在此处其他地方找到的“openTab”函数，并添加了代码以尝试让它打开具有锚点的手风琴部分。我似乎无法弄清楚我有什么错误，它会在第一个手风琴中打开部分，但是当试图在第二个选项卡的第二个手风琴中打开一个部分时它出错了。它似乎正确地找到了手风琴部分的索引以及手风琴所在的选项卡索引。它要么不会打开该部分，要么有时会选择它并且不会打开该部分中的内容。尝试使用该功能打开 2nd 手风琴部分后，该部分将不会' 甚至在手动单击手风琴标题时打开。这一直让我疯狂地试图找出问题所在。有人对我做错了什么有任何想法吗？（对不起，如果编码没有缩进。这是我第一次在这里发帖）谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-03T19:52:02.820

当您查找要打开的手风琴面板的索引时，您正在搜索页面上的所有手风琴面板，而不仅仅是当前手风琴中的面板。这就是为什么您的索引适用于第一个选项卡，但不适用于第二个选项卡。该数字与第一个选项卡中的手风琴面板数量不同。

改变

```
// Get the index of this accordion                                                                                 
accordionIndex = $(".accTable").index($accordionParent); 
```

至

```
// Get the index of this accordion panel within this tab                                                                             
accordionIndex = $accordionParent.closest('.accordionTabs').find('.accTable').index($accordionParent); 
```

附加评论：

1.  您的手风琴面板周围有不必要的 div 级别
2.  在尝试设置活动的手风琴面板之前，您没有检查以确保您单击了手风琴中包含的锚点
3.  您应该只更改当前手风琴的活动手风琴面板，而不是全部。

看看这个：http: [//jsfiddle.net/3p5QG/](http://jsfiddle.net/3p5QG/)

# package - 如何从服务器中删除 NuGet 包？

> ID：11654652
> 
> 赞同：21
> 
> 时间：2012-07-25T16:46:01.653
> 
> 标签：package, nuget

我已经向 nuget 添加了新包（我不是在谈论将包的引用添加到项目中）。我已将新包添加到服务器，以便其他人可以在他们的项目中使用/使用该包。

说包名是 Parser1.0.0.0.nupkg

问题是我忘记添加一个依赖项。现在我想编辑或删除并再次添加正确的。但我不想更改它的版本号。

有谁知道该怎么做？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-07-25T17:24:13.707

不支持永久删除包，但您可以控制它们的列出方式。（假设您在谈论 nuget.org）。

登录后，删除包页面上有其他信息。例如[https://nuget.org/packages/Parser/1.0.0.0/Delete](https://nuget.org/packages/Parser/1.0.0.0/Delete)。

从删除包页面引用nuget的解释：

“为什么我不能删除我的包？我们的策略是只永久删除真正需要它的 NuGet 包，例如包含密码、恶意/有害代码等的包。此策略与其他包采用的策略非常相似Ruby Gems 等管理人员。

取消列出包将删除包在 NuGet 中的可用状态。由于三个主要原因，该软件包仍可作为依赖项下载。

其他包可能依赖于该包。这些包可能不一定在这个库中。确保使用 NuGet 而不提交包（包还原）的人不会被破坏。有助于确保重要的社区拥有的软件包不会被大量删除。”

我建议在添加依赖项后取消列出以前的包并将版本提升到 1.0.0.1。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2014-02-21T11:37:18.077

Assuming you administer a private [NuGetGallery](https://github.com/NuGet/NuGetGallery) server and have access to the MSSQL Server database, you can remove the package by removing the gallery's knowledge of its existence.

You should probably never use this, but in the interests of science, here's how you would disregard the good reasons not to (note that this will delete **all** versions of a package called 'MyNastyPackage'):

```
DECLARE @PackageRegistrationKey int
SELECT @PackageRegistrationKey = [Key]
 FROM PackageRegistrations
 WHERE Id = 'MyNastyPackage'

BEGIN TRANSACTION
DELETE pf
 FROM [NuGetGallery].[dbo].[PackageFrameworks] pf
 JOIN Packages p ON pf.Package_Key = p.[Key]
 WHERE PackageRegistrationKey = @PackageRegistrationKey
DELETE pa
 FROM [NuGetGallery].[dbo].[PackageAuthors] pa
 JOIN Packages p ON pa.PackageKey = p.[Key]
 WHERE PackageRegistrationKey = @PackageRegistrationKey
DELETE gs
 FROM [NuGetGallery].[dbo].[GallerySettings] gs
 JOIN [PackageStatistics] ps ON gs.DownloadStatsLastAggregatedId = ps.[Key]
 JOIN Packages p ON ps.PackageKey = p.[Key]
 WHERE PackageRegistrationKey = @PackageRegistrationKey
DELETE ps
 FROM [NuGetGallery].[dbo].[PackageStatistics] ps
 JOIN Packages p ON ps.PackageKey = p.[Key]
 WHERE PackageRegistrationKey = @PackageRegistrationKey
DELETE pd
 FROM [NuGetGallery].[dbo].[PackageDependencies] pd
 JOIN Packages p ON pd.PackageKey = p.[Key]
 WHERE PackageRegistrationKey = @PackageRegistrationKey
DELETE
 FROM [NuGetGallery].[dbo].[Packages]
 WHERE PackageRegistrationKey = @PackageRegistrationKey
DELETE por
 FROM PackageOwnerRequests por
 JOIN PackageRegistrations pr ON pr.[Key] = por.PackageRegistrationKey
 WHERE pr.[Key] = @PackageRegistrationKey
DELETE pro
 FROM PackageRegistrationOwners pro
 JOIN PackageRegistrations pr ON pr.[Key] = pro.PackageRegistrationKey
 WHERE pr.[Key] = @PackageRegistrationKey
DELETE FROM PackageRegistrations
 WHERE [Key] = @PackageRegistrationKey
COMMIT TRANSACTION 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2017-12-08T16:04:49.537

私有 NuGet 服务器是可能的。使用 NuGet 删除命令。

`nuget delete MyPackage 1.0`

更新：这仍然没有解决 OP 的问题，因为它不允许您重用版本号，因为它仍然被服务器锁定。没有永久删除特定版本包的安全方法。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2020-02-09T12:48:01.173

然后，当您成功发布它时，您会收到来自 NuGet 的电子邮件。

留意这封电子邮件，因为他们在那里写道：

```
If this was not intended, please "contact support". 
```

如果您单击“联系支持”，这将链接到您在 NuGet 中的包管理，您可以在其中给出要删除它的原因，然后给出删除它的操作。

就这样！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-11-12T19:40:35.920

如果您在包的子菜单（左侧）中单击*删除包，您将被重定向到另一个页面，告诉您以下内容：*

> 如果您需要永久删除软件包，请单击联系支持链接，我们会为您处理

对我来说，这完全没问题，我联系了支持人员，要求删除我的包，因为我不小心将它上传到了高效的 NuGet 服务器而不是暂存环境。

但是，我始终建议先使用[staging.nuget.com](https://staging.nuget.org/)测试您的包。然后，您可以在 Visual Studio 中将暂存环境添加为包存储库以进行测试。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-10-05T21:53:34.257

好吧，在您的特定情况下，如果您有权访问 nuget 服务器，则可以通过手动编辑 .nuspec 文件来添加依赖项。打开 nuget 服务器的数据目录（存储其 .nupkg 文件的位置），找到包并使用 NugetPackageExplorer 工具或手动编辑元数据（.nupkg 文件是一个 zip 存档，打开它并编辑 YourPackageName.nuspec 文件以添加依赖）。它看起来类似于：

```
<dependencies>
  <dependency id="RouteMagic" version="1.1.0" />
  <dependency id="RouteDebugger" version="1.0.0" />
</dependencies> 
```

# c# - 将大多数非字母数字字符替换为一个值，其余为另一个

> ID：11654653
> 
> 赞同：0
> 
> 时间：2012-07-25T16:46:06.127
> 
> 标签：c#, regex

我需要用破折号替换字符串中的所有非字母数字字符，或者在单引号和下划线的情况下，什么都没有。关于如何在 C# 中使用正则表达式类执行此操作的建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:56:12.417

```
var result = System.Text.RegularExpressions.Regex.Replace(input, @"[^a-zA-Z0-9]", m =>(m.Value == "'" || m.Value == "_") ? "" : "-"); 
```

# powershell - Powershell 的好目录跳线？

> ID：11654657
> 
> 赞同：6
> 
> 时间：2012-07-25T16:46:12.540
> 
> 标签：powershell, command-line

我刚刚听说[bash 的（几乎不可能用谷歌搜索）z 目录跳线](https://github.com/rupa/z/)

有谁知道powershell等价物，或者任何甚至接近功能的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-09-19T17:00:42.760

对于 PowerShell，有[Jump-Location](https://github.com/tkellogg/Jump-Location)和[Z](https://github.com/vincpa/z)。您可能还想查看[Go](https://github.com/cameronharp/Go-Shell)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-07-25T16:59:26.390

我写过[`cdposh`](https://github.com/manojlds/cdposh)，[`poshmarks`](https://github.com/manojlds/poshmarks)可能对你有用。

`cdposh`允许您指定环境变量`cdpath`并让您直接切换到 cdpath 上的目录（很像可执行文件的路径）

`poshmarks`让您添加书签并快速转到目录。

我会看看我是否可以`z`为 Powershell实现

**更新**`z`： Powershell的一个非常早期的实现-[`posz`](https://github.com/manojlds/posz)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T22:21:50.830

[PowerShell 社区扩展](http://pscx.codeplex.com)有一个嵌套模块，它将覆盖您的CD 函数，然后为您提供您导航到的目录的历史列表。To 可以在此列表中前后移动或跳转到特定条目，例如：

```
6# cd

     # Directory Stack:
   --- ----------------
     0 C:\Users\hillr
     1 C:\Temp
     2 C:\Windows
->   3 C:\Windows\System32

7# cd -
C:\Windows
8# cd +
C:\Windows\System32
9# cd -1
C:\Temp 
```

它不像基于频率的目录跳线那么花哨，但它非常方便。

# sql - 取消规范化表格

> ID：11654661
> 
> 赞同：-1
> 
> 时间：2012-07-25T16:46:31.297
> 
> 标签：sql, sql-server, tsql

我有一个规范化表（表 a）和一个非规范化表（表 b），如下所示：

![在此处输入图像描述](../Images/35ea8fbbf476d4b49cdbe6746640767b.png)

基本上，对于表 a 中相同学生 ID 的每一行，我想读取所有具有相同 studentId 的父母并将数据放入表 B 中的一行。

因此，如果我在表 A 中有 3 行，那么表 B 中将有一行，其中填写了 4 个父字段中的 3 个。对此 SQl 查询的任何帮助将不胜感激。

表 A 中的数据样本

```
parentID studentID parentName
1         1         test
2         1          test1 
```

我想要的结果在表 B

```
studentID parent1 parent2
1         test    test1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:57:47.000

这是一个可以生成您正在寻找的平面结果的查询。您是否有理由不能只将其作为视图而不是永久地重构您的数据？

```
with RankedNormalizedFamily as (
  select
    ROW_NUMBER() over (PARTITION by studentid ORDER BY parentid) as rank
    ,parentID
    ,studentID
    ,parentName
  from
    NormalizedFamily
)
select
  studentID
  ,max(case when rank = 1 then parentName end) as parentName1
  ,max(case when rank = 2 then parentName end) as parentName2
  ,max(case when rank = 3 then parentName end) as parentName3
  ,max(case when rank = 4 then parentName end) as parentName4
from
  RankedNormalizedFamily f
group by
  studentID 
```

演示：[http ://www.sqlfiddle.com/#!3/91843/9](http://www.sqlfiddle.com/#!3/91843/9)

要将这些数据推送到`FlatFamily`您将使用`INSERT...SELECT`：

```
insert into FlatFamily
select
  studentID
  ... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:00:44.490

因此，在不知道您使用的数据库版本的情况下，我将只为您提供基础知识和*可能*在您的系统中工作的示例查询。

基本上，您正在考虑创建一个“透视查询”，但为了对您的查询执行此操作，您需要使用分析函数来指定从表 A 返回的每一行的行号：

```
select studentID,
       parentID
        row_number() over (partition by studentID order by studentID) as parentNum
FROM NormalizedFamily
order by studentID 
```

然后使用您想要将数据透视查询放在一起的结果：

```
select studentID, 
MAX(case when parentNum = 1 then parentID else null),
MAX(case when parentNum = 2 then parentID else null)
MAX(case when parentNum = 3 then parentID else null)
MAX(case when parentNum = 4 then parentID else null)
from (select studentID,
           parentID
            row_number() over (partition by studentID order by studentID) as parentNum
    FROM NormalizedFamily
    order by studentID) 
```

您可能必须清理语法以使用数据库，但这是它的一般要点。

# actionscript-3 - Flex 移动列表不会垂直滚动

> ID：11654662
> 
> 赞同：1
> 
> 时间：2012-07-25T16:46:36.733
> 
> 标签：actionscript-3, apache-flex, mobile

在 flex 4.6 移动项目中，我有一个带有自定义 itemRenderer 的列表组件。我的问题是列表不会垂直滚动。你能告诉我我做错了什么吗？这是代码：

```
<s:List left="0" right="0" top="0" dataProvider="{DataModel.instance.listaRestaurante}" 
itemRenderer="itemRenderers.restauranteRender" width="320" horizontalScrollPolicy="off"      verticalScrollPolicy="on">
<s:layout>
<s:VerticalLayout gap="10" requestedRowCount="-1" useVirtualLayout="true" />        
</s:layout>
</s:List> 
```

谢谢

通过将 button="0" 放在列表中解决

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:23:07.510

> 通过将 button="0" 放在列表中解决

你知道为什么这解决了这个问题吗？我猜不是，所以这里是：

最初，您没有为列表指定高度。因此，列表将无限扩展，直到它容纳所有对象。

当您分配一个高度时（设置 bottom=0 实际上是同一件事，只是分配一个相对高度），列表被限制为该高度。任何溢出的对象都会导致显示滚动条。

# java - 绕轴旋转椭圆

> ID：11654664
> 
> 赞同：1
> 
> 时间：2012-07-25T16:46:42.010
> 
> 标签：java, c, angle, ellipse

如果我制作一个以矩形为界的椭圆。我怎样才能旋转它？就像我有 rx,ry,cx,cy,topleft x,toplefy, bottomrightx,bottomrighty

用了公式

angle=taninverse(ry/rx) 我不断添加角度=angle + taninverse(ry/rx)

角度太小看不出差别。请提供另一个公式来计算给定参数的角度

看看有界矩形框的椭圆 [http://svg-edit.googlecode.com/svn/branches/2.5.1/editor/svg-editor.html](http://svg-edit.googlecode.com/svn/branches/2.5.1/editor/svg-editor.html)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:55:02.587

您是否尝试过旋转更大的角度来看看会发生什么？rx 和 ry 的值会改变吗？

如果没有，您可能应该计算 'atan(ry/rx)' 并将结果存储在一个变量中，如下所示：

```
double delta = Math.atan(ry / rx); 
```

然后当你旋转

```
angle += delta; // or angle = angle + delta --- these are equivalent 
```

或者，您可能希望简单地保留一个值，而不是从 ry 和 rx 计算角度，例如

```
double delta = Math.PI / 6; 
```

这只是给出了旋转的角度，无需计算。优点是您可以简单地将此`delta`变量设置为您希望的任何值，无论大小。如上所述，您可以`angle`按此`delta`值递增。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-07-25T16:58:58.420

Android中有一些动画类。android.animation 包从 API 11 开始可用，并提供动画对象属性的能力。android.view.animation 可从 API 1 获得，并提供用于调整大小、移动和旋转的动画。两者都提供 XML 属性，因此您也可以在 XML 中设置动画。要检查的主要类是 android.view.animation.Animation 和 android.animation.Animator。

# zeromq - ZeroMQ Majordomo 模式

> ID：11654667
> 
> 赞同：3
> 
> 时间：2012-07-25T16:47:00.827
> 
> 标签：zeromq

在 Majordomo 模式中，worker 中的一段代码如下所示

```
mdwrk session ("tcp://localhost:5555", sourceStr.c_str(), verbose);

zmsg *reply = 0;
while (1) {
    zmsg *request = session.recv (reply);
    if (request == 0) {
        break;              //  Worker was interrupted
    }

    //reply = request;        //  Echo is complex... :-)
    reply = new zmsg(sourceStr.c_str());
} 
```

对我的工作人员来说，客户的请求是要发送到交易所的订单。我试图弄清楚，在我将订单发送到交易所后，我收到了一条消息，例如插入、待处理、新建等，我可以将 FIX 响应的内容填充到 zmsg *reply 中。

FIX 消息异步返回，所以我不能说

回复 = FIXResponse；

这是如何解决的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T21:31:53.027

我认为 Majordomo 协议是用来处理同步请求的，在这里并不合适。

刚刚遇到您的其他问题之一，并看到您有多个来源可以得到这些回复。您可以将它们全部推入一个稳定的 PULL 插座吗？（然后在适当的情况下重新发布。如果数量很少，您甚至可以摆脱长期订阅者的可靠性。）

# android - 果冻豆混淆 LogCat

> ID：11654668
> 
> 赞同：2
> 
> 时间：2012-07-25T16:47:11.290
> 
> 标签：android, logcat, android-4.2-jelly-bean

我最近刚刚将手机的固件更新为 Jelly Bean。在 Eclipse 中查看 LogCat 时，我注意到我收到了奇怪的反馈。

奇怪的反馈是：

*   时间不详
*   pid 未知
*   标签未知（非常烦人，因为我的过滤器不起作用！）
*   消息全部为绿色（非常烦人，因为
    在日志中很难找到错误）

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:51:47.313

您是否尝试过更新您的[应用程序开发工具 (ADT)](http://developer.android.com/tools/sdk/eclipse-adt.html)和[软件开发工具包 (SDK)](http://developer.android.com/sdk/index.html)管理器？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:57:17.687

看看这个问题。或多或少是同一个问题：

[为什么 LogCat 将所有项目显示为警告（橙色）？](https://stackoverflow.com/questions/11494257/why-is-logcat-showing-all-items-as-warnings-orange)

我认为该解决方案与您过时的 SDK 有关。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T14:47:36.433

也许有人不喜欢新的跳跃 logcat 并使用旧的已弃用。它不再是选择。Old 无法正确解析来自果冻豆的日志文件。

但是有好消息，新的 logcat 不再跳了 :)

# python - Python Minidom - 如何遍历属性，并获取它们的名称和值

> ID：11654669
> 
> 赞同：9
> 
> 时间：2012-07-25T16:47:10.470
> 
> 标签：python, python-3.x, minidom

我想遍历 dom 节点的所有属性并获取名称和值

我尝试过这样的事情（文档对此不是很冗长，所以我猜了一点）：

```
for attr in element.attributes:
    attrName = attr.name
    attrValue = attr.value 
```

1.  for 循环甚至没有开始
2.  让循环工作后，如何获取属性的名称和值？

循环错误：

```
for attr in element.attributes:
  File "C:\Python32\lib\xml\dom\minidom.py", line 553, in __getitem__
    return self._attrs[attname_or_tuple]
 KeyError: 0 
```

我是Python新手，请温柔

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-14T15:52:53.530

有一种简单有效的（和pythonic？）方法可以轻松完成

```
#since items() is a tUple list, you can go as follows :
for attrName, attrValue in element.attributes.items():
    #do whatever you'd like
    print "attribute %s = %s" % (attrName, attrValue) 
```

如果您要实现的是将那些不方便的属性转移`NamedNodeMap`到更有用的字典中，您可以按照以下步骤进行

```
#remember items() is a tUple list :
myDict = dict(element.attributes.items()) 
```

请参阅[http://docs.python.org/2/library/stdtypes.html#mapping-types-dict](http://docs.python.org/2/library/stdtypes.html#mapping-types-dict) 和更准确的示例：

```
d = dict([('two', 2), ('one', 1), ('three', 3)]) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T20:36:32.557

好的，在查看了[这个（有点小）文档](http://epydoc.sourceforge.net/stdlib/xml.dom.minidom.NamedNodeMap-class.html)之后，我猜想下面的解决方案会成功

```
#attr is a touple apparently, and items() is a list
for attr in element.attributes.items():
    attrName = attr[0] 
    attrValue = attr[1] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:09:54.370

attributes 返回 a `NamedNodeMap`，它的行为很像字典，但实际上不是字典。尝试循环`iteritems()`代替`attributes`。（请记住，循环遍历常规 dict 无论如何都会遍历键，因此您的代码在任何情况下都不会按预期工作。）

# java - 数组和数组列表之间的存储机制？

> ID：11654671
> 
> 赞同：1
> 
> 时间：2012-07-25T16:47:17.657
> 
> 标签：java, collections

在java中，如果我们在数组和数组列表中存储4个元素，在内存中的低级别是否相同，或者为了存储元素有什么不同？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:49:04.860

它会有所不同。ArrayList 是数组的包装器，带有几个其他辅助函数。ArrayList 的内存占用会稍大一些，并且会根据需要自行调整大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T16:49:38.900

它不同，`ArrayList` 内部管理自己的存储阵列，也有自己的属性

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:57:17.517

数组与列表完全不同，即使列表恰好是 ArrayList 并且内部也仅使用数组。

对于数组，只存在数组（在本次讨论中，我将忽略元素将占用的内存）。因此，堆中有*一个*对象，即数组本身。

对于 ArrayList，存在 ArrayList 实例，并且该实例内部*有*一个数组。所以堆上有*两个*对象。此外，虽然您可以精确控制您创建的数组的大小，但 ArrayList 保存的数组可以具有 >= 元素数 <= Integer.MAX_VALUE 的任何大小。

巧合的是，ArrayList 内部直接使用元素索引作为数组索引，因此元素的顺序与普通数组中的顺序相同。但这是一个实现细节，您通常不关心 List 如何在内部组织其数据（毕竟 List 的目的是抽象出杂乱的细节）。

# html - 全尺寸窗口内的灵活和固定 div 行

> ID：11654674
> 
> 赞同：0
> 
> 时间：2012-07-25T16:47:22.570
> 
> 标签：html, css

我正在编写一个应该利用整个屏幕的移动/桌面聊天应用程序。如果需要，黄色显示的底部`<div>`可以是固定高度。

目前它绝对定位在窗口的底部。

我的问题：无论我是否使用填充、边距、边框等，青色的顶部`<div>`都不适合窗口的其余部分。目前它*似乎*允许内容换行，但这只是因为底部覆盖滚动条。

![聊天应用](../Images/72ae0fe381e7d7aa9080b3f6fb9840c0.png)

到目前为止，我唯一的解决方案是使用 final`<div>`或`<br>`填充可滚动 div 的末尾，但这不会使 div 更小，或者使滚动条正确对齐。

[到目前为止，这是我在 Fiddle 中的源代码](http://jsfiddle.net/FEuQy/2/)。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:03:03.127

你可以编辑你的 CSS 并设置带有聊天文本的 DIV 类，如 .break-word，然后在 CSS 中用自动换行声明它：

```
.break-word {
    word-wrap: break-word;
} 
```

不确定滚动条的覆盖。您应该发布您的代码以供其他人查看，并且可能能够从中挑选出一些东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:52:16.727

此样式代码基本上总结了我为弥补我的问题所做的工作。（而不是，比如说，使用 HTML 表格。）这可能不是最好的解决方案。

```
#topPart {
    position: absolute;
    width: 100%;
    top: 0;
    bottom: 40px; /* or however high the bottom is */
}

#bottomPart {
    position: absolute;
    width: 100%;
    bottom: 0;
    height: 40px; /* same as above */
} 
```

# javascript - Jquery将图像插入HTML表格

> ID：11654675
> 
> 赞同：2
> 
> 时间：2012-07-25T16:47:22.013
> 
> 标签：javascript, jquery

我想使用 jQuery 在 HTML 表格的某一行之后插入图像。我尝试使用 appendTo 函数，但它不起作用。我猜我的 jQuery 选择器有问题。任何人都可以更正我的代码吗？

谢谢！

HTML 代码：

```
<div class="articles">
<table align="center">
<tr><th><label for="id_chemical_name">Chemical name:</label></th><td><textarea id="id_chemical_name" rows="2" cols="17" name="chemical_name">Spinosad</textarea></td></tr>
<tr><th><label for="id_T">Number of time intervals:</label></th><td><input type="text" name="T" value="10" id="id_T" /></td></tr>

<!--I would like to insert an image after the row 'Number of time intervals'-->

<tr><th><label for="id_a">Logistic model parameter (&#945;):</label></th><td><input type="text" name="a" value="0.746" id="id_a" /></td></tr>
</table></div> 
```

jQuery代码：

```
<script type="text/javascript" src=" ../stylesheets/jquery-1.7.2.js"></script> 
<script>
    $(document).ready(function(){ 
    $('<img src = "https://www.google.com/images/srpr/logo3w.png" />').appendTo('#id_T');
})
</script> 
```

这是该问题的[演示](http://jsfiddle.net/sLcNc/1/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:00:10.917

如果不将图像包含在 tr 和 td/th 元素中，则无法将图像直接插入到表格中。我认为这就是你想要做的：

```
$('<tr><th colspan="2"><img src = "https://www.google.com/images/srpr/logo3w.png" /></th></tr>').insertAfter($("#id_T").parent("td").parent("tr")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:58:33.800

任何表格的内容都应该在 td 或 th 标记内，该标记应该在有效的 tr 标记中。再次检查您的选择器位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:49:42.557

具有 ID 的元素`id_T`是一个`<input>`- 特别是一个文本框 - 它不能有子元素（当然也不是子图像）。

您可能想尝试`insertBefore`或`insertAfter`代替，或者您可以使用类似的东西：

```
$('#id_T').closest('td').appendTo... 
```

从输入向上移动 DOM 并找到包含`<td>`.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:50:27.767

`#id_T`是文本输入，您不能将图像附加到它。

为什么不能手动输入图像？特别是因为您不能只在这样的表结构中间转储图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T16:51:39.773

将图像添加到 id_T 所在的同一 TD。执行此操作

```
$('<img src = "https://www.google.com/images/srpr/logo3w.png" />').appendTo($('#id_T').parent()); 
```

# java - 使用 Facebook 应用访问令牌（URL 中的管道字符）

> ID：11654677
> 
> 赞同：1
> 
> 时间：2012-07-25T16:47:34.633
> 
> 标签：java, facebook, facebook-graph-api, oauth-2.0, playframework-2.0

我完全被这个难住了。我为我的应用注册了以下 Facebook 应用访问令牌：

|

然后我尝试获取以下 URL：（下面的假令牌）

```
 https://graph.facebook.com/<user-id>/likes?access_token=<number>|<hash>
 String accessToken = "258443224256787|dsK3fffe7g-rejponkVlfwef3GenVng6Y";

 WS.url("https://graph.facebook.com/" + socialUser.id.id + "/likes?access_token="+accessToken)

 accessToken = "258443224256787" + URLEncoder.encode("|") + "dsK3ks7g-dsK3fffe7g-rejponkVlfwef3GenVng6Y"; 
```

我收到以下错误消息：

```
{"error":{"message":"An access token is required to request this 
resource.","type":"OAuthException","code":104}} 
```

但是，当我在 Graph API 资源管理器工具中使用它时，我没有收到任何错误！我认为问题可能是我不知道如何在我的 URL 中使用管道符号（尝试谷歌搜索数小时但没有成功 - 尝试 URLEncoder.encodre 无济于事）。

请帮忙！:-)

（我正在使用 Java Play！2）

**编辑**我应该说，当我调试我的链接时，由于 URLEncoder，我得到：“%7C”而不是管道。

**编辑 2**当我将 URL 直接发布到浏览器中时，它也可以工作。

**编辑 3**添加 URLEncoder-code

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T18:08:26.707

事实证明 WS.url() 不接受我的查询参数，除非我使用 url().setQueryParameters() 解决了这个问题。:-)

# ruby - 查找所有命名空间中的所有模型

> ID：11654678
> 
> 赞同：0
> 
> 时间：2012-07-25T16:47:35.110
> 
> 标签：ruby, ruby-on-rails-3, ruby-1.9

我想在*所有*命名空间中找到所有模型。

我考虑过的想法：

*   `Object.constants`不是一个好的起点，因为它找不到我的命名空间模块。所以[这个答案](https://stackoverflow.com/a/9853016/109618)对我不起作用。

*   [ObjectSpace](http://www.ruby-doc.org/core-1.9.3/ObjectSpace.html)是一种可能，但除非必要，否则我宁愿不使用它，因为它在 Ruby 实现中的可移植性似乎较差。（另请参阅：[ObjectSpace 在 JRuby 中默认禁用](http://kenai.com/projects/jruby/pages/PerformanceTuning#Disabling_ObjectSpace)。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:47:35.110

`Object.constants` *只*显示**加载的**常量。所以我需要先这样做：

```
目录["#{Rails.root}/app/models/**/*.rb"].each { |path| 需要路径}

```

# c# - 传递变量时的 C# 构造函数设计可能是两种类型之一

> ID：11654679
> 
> 赞同：2
> 
> 时间：2012-07-25T16:47:36.463
> 
> 标签：c#, class, constructor

我的类的构造函数有三个变量传递给它：

```
public MyClass(int Id, String Name, DateTime StartDate) 
```

但是，`StartDate`可能会作为 a`String`或作为`DateTime`对象传递给变量。

我应该创建两个不同的构造函数，一个指定`DateTime`for `StartDate`，一个指定 as`String`吗？或者，我应该创建类型`Dynamic`并在运行时确定它是什么然后处理它？我问是因为我的班级有五个日期，如果我要为每种不同的组合编写构造函数，那将是太多的代码。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T16:54:38.240

您应该使调用者的类型更强，而不是[“字符串”类型](http://www.codinghorror.com/blog/2012/07/new-programming-jargon.html)。

创建一个需要 5 个日期的构造函数，并强制调用者做正确的事情。这似乎比 25 个必须做正确事情的构造函数要理智得多。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:50:40.800

定义调用默认构造函数的构造函数的重载：

```
class MyClass
{
    public MyClass(int id, string name, DateTime startDate)
    {
    }

    public MyClass(int id, string name, string startDate)
        : this(id, name, DateTime.Parse(startDate))
    {
    }
} 
```

我只会创建一个接受所有作为 DateTime 对象的构造函数和一个接受所有作为字符串的重载。我会忽略任何其他组合。事实上，我只会接受 DateTime。

接受动态类型会导致界面不佳。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T16:54:14.647

将字符串转换为 DateTime 对象可能会有风险。并非所有字符串都可以准确转换。例如，考虑这些日期：

*   02-03-2012 - 这个日期是英式日期，即 3 月 2 日，还是美式日期，即 2 月 3 日？
*   1 月 3 日 - 哪一年？
*   1/30/15 - 这是指 1915 年或 2015 年的 1 月 30 日吗？

在您确定字符串是否可以在整个应用程序中可靠地合法转换为 DateTimes 之前，您需要知道您有哪些类型的转换风险。 `DateTime.TryParse`是一个很棒的功能，但它不能解决所有潜在的问题。

我建议您在构造函数中坚持使用强类型数据 - 例如 DateTime 对象：

```
public MyClass(int id, string name, DateTime StartDate) 
```

然后，将字符串的解析移到靠近获得这些字符串的位置。例如，如果您的字符串是从源数据文件加载的，您可以在文件的加载代码中解析这些字符串并在错误时抛出异常。再举一个例子，如果字符串是由用户输入的，那么当用户直接输入错误的日期时，您可以抛出异常。

# hash - 验证 bcrypt 哈希？

> ID：11654684
> 
> 赞同：0
> 
> 时间：2012-07-25T16:47:45.703
> 
> 标签：hash, bcrypt, verify

在这个问题中：

[有人可以解释 BCrypt 如何验证哈希吗？](https://stackoverflow.com/questions/5393803/can-someone-explain-how-bcrypt-verifies-a-hash)

伊恩博伊德在他的回答结尾写道：

*有了这些知识，您现在可以`correctbatteryhorsestapler`根据保存的哈希验证密码：$2a$12$mACnM5lzNigHMaf7O1py1OLCBgGL4tYUF0N/4rS9CwDsI7ytwL4D6*

我正在使用以下 Perl 程序来尝试验证此哈希：

```
use Crypt::Eksblowfish::Bcrypt qw(bcrypt);
my $password = "correctbatteryhorsestapler";
my $hash = '$2a$12$mACnM5lzNigHMaf7O1py1OLCBgGL4tYUF0N/4rS9CwDsI7ytwL4D6';

print "Verifying password $password<br>with hash $hash<BR><BR>";

my $new_hash = bcrypt($password,$hash);

print "<pre>Original hash: " . $hash . "<br>" . "New hash:      " . $new_hash . "</pre><br>";

if ($hash ne $new_hash) {
    print "No match.";
} 
```

我的程序的输出如下：

```
Verifying password correctbatteryhorsestapler
with hash $2a$12$mACnM5lzNigHMaf7O1py1OLCBgGL4tYUF0N/4rS9CwDsI7ytwL4D6

Original hash: $2a$12$mACnM5lzNigHMaf7O1py1OLCBgGL4tYUF0N/4rS9CwDsI7ytwL4D6
New hash:      $2a$12$mACnM5lzNigHMaf7O1py1O3vlf6.BA8k8x3IoJ.Tq3IB/2e7g61Km

No match. 
```

我想知道，根据上面的信息，任何人都可以告诉我我的 Perl 脚本做错了什么（为什么它不能正确验证密码）？如果我使用我的系统生成的哈希，我会得到一个匹配：

```
Verifying password correctbatteryhorsestapler
with hash $2a$12$mACnM5lzNigHMaf7O1py1O3vlf6.BA8k8x3IoJ.Tq3IB/2e7g61Km

Original hash: $2a$12$mACnM5lzNigHMaf7O1py1O3vlf6.BA8k8x3IoJ.Tq3IB/2e7g61Km
New hash:      $2a$12$mACnM5lzNigHMaf7O1py1O3vlf6.BA8k8x3IoJ.Tq3IB/2e7g61Km 
```

我在两个不同的系统上得到了相同的结果（一个运行 eksblowfish 0.009 的 CentOS 和另一个运行 eksblowfish 0.007 的 Win7 64 位，都运行 Perl 5.8.8）。

我边做边学，所以我希望了解为什么这对我不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T16:00:28.073

答案是我的错。我在问题中给了你错误的哈希值`correctbatteryhorsestapler`。

我选择了一个真正的哈希；但不想泄露密码，我将其更改为对[XKCD](http://xkcd.com/936/)的引用。

我应该花额外的时间来生成一个实际的哈希值`correctbatteryhorsestapler`：

```
$2a$12$mACnM5lzNigHMaf7O1py1O3vlf6.BA8k8x3IoJ.Tq3IB/2e7g61Km 
```

混乱是我的错。在最初的问题中，我的意思是*现在你已经准备好进入这个世界了*，它并不意味着是一个实际的测试向量。

* * *

您可能想查看一些实际[已知的测试向量](https://bitbucket.org/vadim/bcrypt.net/src/464c41416dc9/BCrypt.Net.Test/TestBCrypt.cs)：

```
('',                                   '$2a$06$DCq7YPn5Rq63x1Lad4cll.',    '$2a$06$DCq7YPn5Rq63x1Lad4cll.TV4S6ytwfsfvkgY8jIucDrjc8deX1s.'),
('',                                   '$2a$08$HqWuK6/Ng6sg9gQzbLrgb.',    '$2a$08$HqWuK6/Ng6sg9gQzbLrgb.Tl.ZHfXLhvt/SgVyWhQqgqcZ7ZuUtye'),
('',                                   '$2a$10$k1wbIrmNyFAPwPVPSVa/ze',    '$2a$10$k1wbIrmNyFAPwPVPSVa/zecw2BCEnBwVS2GbrmgzxFUOqW9dk4TCW'),
('',                                   '$2a$12$k42ZFHFWqBp3vWli.nIn8u',    '$2a$12$k42ZFHFWqBp3vWli.nIn8uYyIkbvYRvodzbfbK18SSsY.CsIQPlxO'),
('a',                                  '$2a$06$m0CrhHm10qJ3lXRY.5zDGO',    '$2a$06$m0CrhHm10qJ3lXRY.5zDGO3rS2KdeeWLuGmsfGlMfOxih58VYVfxe'),
('a',                                  '$2a$08$cfcvVd2aQ8CMvoMpP2EBfe',    '$2a$08$cfcvVd2aQ8CMvoMpP2EBfeodLEkkFJ9umNEfPD18.hUF62qqlC/V.'),
('a',                                  '$2a$10$k87L/MF28Q673VKh8/cPi.',    '$2a$10$k87L/MF28Q673VKh8/cPi.SUl7MU/rWuSiIDDFayrKk/1tBsSQu4u'),
('a',                                  '$2a$12$8NJH3LsPrANStV6XtBakCe',    '$2a$12$8NJH3LsPrANStV6XtBakCez0cKHXVxmvxIlcz785vxAIZrihHZpeS'),
('abc',                                '$2a$06$If6bvum7DFjUnE9p2uDeDu',    '$2a$06$If6bvum7DFjUnE9p2uDeDu0YHzrHM6tf.iqN8.yx.jNN1ILEf7h0i'),
('abc',                                '$2a$08$Ro0CUfOqk6cXEKf3dyaM7O',    '$2a$08$Ro0CUfOqk6cXEKf3dyaM7OhSCvnwM9s4wIX9JeLapehKK5YdLxKcm'),
('abc',                                '$2a$10$WvvTPHKwdBJ3uk0Z37EMR.',    '$2a$10$WvvTPHKwdBJ3uk0Z37EMR.hLA2W6N9AEBhEgrAOljy2Ae5MtaSIUi'),
('abc',                                '$2a$12$EXRkfkdmXn2gzds2SSitu.',    '$2a$12$EXRkfkdmXn2gzds2SSitu.MW9.gAVqa9eLS1//RYtYCmB1eLHg.9q'),
('abcdefghijklmnopqrstuvwxyz',         '$2a$06$.rCVZVOThsIa97pEDOxvGu',    '$2a$06$.rCVZVOThsIa97pEDOxvGuRRgzG64bvtJ0938xuqzv18d3ZpQhstC'),
('abcdefghijklmnopqrstuvwxyz',         '$2a$08$aTsUwsyowQuzRrDqFflhge',    '$2a$08$aTsUwsyowQuzRrDqFflhgekJ8d9/7Z3GV3UcgvzQW3J5zMyrTvlz.'),
('abcdefghijklmnopqrstuvwxyz',         '$2a$10$fVH8e28OQRj9tqiDXs1e1u',    '$2a$10$fVH8e28OQRj9tqiDXs1e1uxpsjN0c7II7YPKXua2NAKYvM6iQk7dq'),
('abcdefghijklmnopqrstuvwxyz',         '$2a$12$D4G5f18o7aMMfwasBL7Gpu',    '$2a$12$D4G5f18o7aMMfwasBL7GpuQWuP3pkrZrOAnqP.bmezbMng.QwJ/pG'),
('~!@#$%^&*()      ~!@#$%^&*()PNBFRD', '$2a$06$fPIsBO8qRqkjj273rfaOI.',    '$2a$06$fPIsBO8qRqkjj273rfaOI.HtSV9jLDpTbZn782DC6/t7qT67P6FfO'),
('~!@#$%^&*()      ~!@#$%^&*()PNBFRD', '$2a$08$Eq2r4G/76Wv39MzSX262hu',    '$2a$08$Eq2r4G/76Wv39MzSX262huzPz612MZiYHVUJe/OcOql2jo4.9UxTW'),
('~!@#$%^&*()      ~!@#$%^&*()PNBFRD', '$2a$10$LgfYWkbzEvQ4JakH7rOvHe',    '$2a$10$LgfYWkbzEvQ4JakH7rOvHe0y8pHKF9OaFgwUZ2q7W2FFZmZzJYlfS'),
('~!@#$%^&*()      ~!@#$%^&*()PNBFRD', '$2a$12$WApznUOJfkEGSmYRfnkrPO',    '$2a$12$WApznUOJfkEGSmYRfnkrPOr466oFDCaj4b6HY3EXGvfxm43seyhgC') 
```

还有一些测试可以确保它不会在 Unicode 字符上失败。当给定 UTF-8 时，某处的实现中存在一个错误：

*   密码：*希腊小写字母 Pi (U+03C0)，八次重复***`ππππππππ`**

 *一个*实际*的哈希是：

```
$2a$10$.TtQJ4Jr6isd4Hp.mVfZeuh6Gws4rOQ/vdBczhDx.19NFK0Y84Dle 
```*

# .net - 我正在寻找一些帮助来优化将数据表写入/读取文件的 ac# 应用程序的一部分

> ID：11654689
> 
> 赞同：0
> 
> 时间：2012-07-25T16:48:10.790
> 
> 标签：.net, optimization, serialization, datatable, c#-2.0

任何建议将不胜感激，我仍在学习 c#，所以如果我错过了一些明显的东西，我深表歉意。我正在使用 VS2010，应用程序使用 net 2.0

我希望尽可能加快这两个过程。第一个过程是从服务器读取数据表，然后将它们存储为缓存文件。每个缓存文件都有多个数据表。第二部分是从缓存文件中检索这些数据表并将它们存储在数据集中。

最初，该过程将数据表存储为 XML 文件，而这需要很长时间才能创建缓存文件和检索它们。运行应用程序时。这些表的大小可以从 10MB 到 400MB 不等。

我对其进行了设置，以便它在我的本地机器上构建和读取缓存文件。

我尝试使用二进制序列化，这很有帮助。它将表格缩小到 XML 文件大小的 1/6 左右，并且还加快了速度，但我希望看看是否有更快的东西。我一直在寻找一段时间，但我找不到其他任何东西。我检查了 protobuf-net，这看起来是一种加快序列化速度的绝妙方法，但从我发现数据表的情况来看，它似乎不能很好地使用它。

这里有一些数字..

```
Time to build Cache files:
XML-about 2 hours, 
Binary -  about 1 hour

Test Case for reading from Cache file:
XML - 3m 40s, 
Binary - 2m 20s 
```

我知道这是很多数据，不能指望很多，但是还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:57:50.250

优化的第一条规则是衡量时间花在哪里。时间在序列化代码中可能是一个很好的猜测，但没有什么比一个好的分析器会话可以确定的了......

话虽如此，您在更改序列化机制时看到的性能提升确实表明至少有一部分时间花在了序列化本身上。

XML 序列化器对于大文件来说非常慢。BinaryFormatter 更好，但仍不完全是速度恶魔。

协议缓冲区比 BinaryFormatter 快 6 倍左右，并且存储数据更紧凑。

[http://theburningmonk.com/2011/08/performance-test-binaryformatter-vs-protobuf-net/](http://theburningmonk.com/2011/08/performance-test-binaryformatter-vs-protobuf-net/)

![在此处输入图像描述](../Images/a1ec40f12e69668b3b4e606679cbfdea.png)

[Marc Gravell](https://stackoverflow.com/users/23354/marc-gravell)（来自 Stack Overflow）在 .NET 中编写了协议缓冲区的实现

[http://code.google.com/p/protobuf-net/](http://code.google.com/p/protobuf-net/)

您可以使用 NuGet 获取此信息。

（[Jon Skeet](https://stackoverflow.com/users/22656/jon-skeet) [也做了](http://code.google.com/p/protobuf-csharp-port/)，但我更喜欢 Marc 的实现）。

还有

> 用于将 ADO.NET 数据表和数据读取器序列化为高效、可移植的二进制格式的库。使用 Marc Gravell 的 Google Protocol Buffers 库 protobuf-net。

[https://nuget.org/packages/protobuf-net-data/2.0.5.480](https://nuget.org/packages/protobuf-net-data/2.0.5.480)

（也可以通过 NuGet 获得）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:57:05.533

对我来说，解决此类问题的第一步是破解[dotTrace](http://www.jetbrains.com/profiler/)或[ANTS](http://www.red-gate.com/products/dotnet-development/ants-performance-profiler/)之类的软件，这些软件非常擅长分析直到单个方法调用所需的时间。你也可以识别你的压力点，如果一个方法被调用 1000 万次，那么减少几毫秒就可以节省大量资金。

我还建议[查看](http://connectsql.blogspot.com/2011/03/sql-server-execution-plan-major-points.html)SQL 中的执行计划，以确定是否可以以任何方式对其进行优化，并且谷歌上有大量文章。

另一种选择是使用[C# 秒表](http://msdn.microsoft.com/en-us/library/system.diagnostics.stopwatch%28v=vs.80%29.aspx)，用它包装代码块可能有助于识别瓶颈。

# ruby-on-rails - 懒惰的高图表：无法显示饼图

> ID：11654690
> 
> 赞同：1
> 
> 时间：2012-07-25T16:48:22.923
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, lazy-high-charts

按照[此处](https://github.com/michelson/lazy_high_charts/wiki/Pie-Chart)的说明（并更正代码示例中的标签问题），我正在尝试在我的应用程序中实现饼图。我加载了初始页面，但饼图未加载到部分（我将其放入 html.erb 文件）。现在很多东西都是硬编码的，所以例如图表类型等还没有被传递回控制器。

有人可以帮忙指出我哪里出错了吗？

控制器：

```
 def dynamic_chart
    @chart_types = ChartType.all
    @user_visible_models = ["Asset","Asset Manufacturer","Asset Model", "Map","Campus","Tag","Room", "Room Monitor"]
    @date_ranges = ["Day", "Week", "Month"]
  end

  def gen_chart
    @rooms = Array.new
    Room.all.each do |room|
      @rooms << [room.name, room.asset_count]
    end

    @chart = LazyHighCharts::HighChart.new('pie') do |f|
      f.chart({:defaultSeriesType=>"pie" , :margin=> [50, 200, 60, 170]} )
      series = {
          :type=> 'pie',
          :name=> 'Asset by Rooms',
          :data=> @rooms
      }
      f.series(series)
      f.options[:title][:text] = "THA PIE"
      f.legend(:layout=> 'vertical',:style=> {:left=> 'auto', :bottom=> 'auto',:right=> '50px',:top=> '100px'})
      f.plot_options(:pie=>{
          :allowPointSelect=>true,
          :cursor=>"pointer" ,
          :dataLabels=>{
              :enabled=>true,
              :color=>"white",
              :style=>{
                  :font=>"13px Trebuchet MS, Verdana, sans-serif"
              }
          }
      })
    end 
```

dynamic_chart.html.erb

```
<%  javascript 'dynamic_chart'  %>

<div id="graph_controls">
  <%= form_tag('activate_reports/dynamic_chart', :class => "well form-inline") do %>
    <%= text_field_tag(:name, nil, :class => "input-small", :placeholder => "Report Name") %>
    <%= collection_select(:activate_report, :chart_type_id, @chart_types, :id, :name, :prompt => "Select chart") %>
    <%= label_tag :x_axis, "X:", :class => "control-label" %>
    <%= select :x_axis, nil, @user_visible_models, :prompt => true %>
    <%= label_tag :y_axis, "Y:", :class => "control-label" %>
    <%= select :y_axis, nil, @user_visible_models, :prompt => true %>
    <%= select :date_range, nil, @date_ranges, :prompt => "Select a day" %>
    <%= link_to("Chart!", "#", :remote => true, :class => "btn", :onclick => 'gen_chart()') %>
  <% end %>

</div>

<div id="chart_area"></div> 
```

_gen_chart.html.erb 部分：

```
<%= high_chart("chart_area", @chart) %> 
```

gen_chart js函数用于启动新图表

```
function gen_chart(){
    jQuery.ajax({
        url: "/activate_reports/gen_chart",
        type: "GET",
        data: {},
        dataType: "html"
    });
} 
```

# xml - 使用 xsl 模板参数作为选择中的节点（即元素的值）

> ID：11654692
> 
> 赞同：3
> 
> 时间：2012-07-25T16:48:29.537
> 
> 标签：xml, xslt, xpath, xslt-1.0

假设您有一个 xml 文件：

```
<dictionary>
    <row>
        <table>log</table>
        <entity>Log</entity>
    </row>

    <row>
        <table>mail_macros</table>
        <entity>MailMacro</entity>
    </row>
</dictionary> 
```

并且您想编写一个通用模板来从行中获取一个元素：

```
<xsl:template name="row">
    <xsl:param name="pElement" />
    <xsl:value-of select="./dictionary/row/$pElement />
</xsl:template> 
```

因此，当我调用模板并将 pElement 设置为字符串“表”时，它会返回表值等。

是否可以在 xslt 1.0 中编写这样的表达式？因为这个不行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:53:46.463

XPATH 表达式不是这样工作的。你需要 ....

```
 <xsl:value-of select="./dictionary/row/*[local-name()=$pElement] /> 
```

## 警告

假设您没有使用命名空间。如果不是，请告诉我们。

# iphone - 非法配置 - 静态表格视图仅在嵌入 UITableViewController 时有效

> ID：11654693
> 
> 赞同：4
> 
> 时间：2012-07-25T16:48:44.790
> 
> 标签：iphone, objective-c, ios5, storyboard

我使用包含单个分组表视图的故事板创建了一个场景。此表的单元格是静态的（这是一个配置视图）。我从情节提要编辑器中创建了所有表格单元格视图被分配了一个从 UITableViewController 继承的自定义视图控制器。如果出于测试目的将其设置为“初始视图控制器”，应用程序将崩溃。错误是：

**非法配置 - 静态表格视图仅在嵌入 UITableViewController 时有效**

在这个视图的视图控制器中，我已经实现了 tableView:numberOfRowsInSection 和 numberOfSectionsInTableView

有人可以告诉我如何使静态表格视图与故事板一起使用吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:29:18.067

默认情况下，当 Xcode 创建 UITableViewController 的子类时，它会添加 UITableView 数据源委托方法。由于静态 TableView 确实需要数据源，因此需要删除这些数据源。

所以解决方案是删除这些委托方法：

```
#pragma mark - Table view data source

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath 
```

# php - 在 Symfony 2 中将控制器操作结果传递给重定向操作

> ID：11654696
> 
> 赞同：0
> 
> 时间：2012-07-25T16:48:50.890
> 
> 标签：php, symfony, form-submit

我有一个 Symfony 控制器操作，它生成一组 PDF 文件，然后显示生成的 PDF 的链接。问题是，我想避免用户重新加载页面并因此重新生成 PDF，所以使用 $this->redirect(...) 似乎是有意义的......除非我将如何传递结果指向新重定向操作的 PDF 链接数组？

如果这是一个重复的问题，请原谅我。我试着浏览了一下，但没有找到相应的问题。感谢您对此的任何帮助或想法。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T00:56:36.667

你可以试试这个：

```
$this->redirect($this->generateUrl('page', array('arrayLinks' => $arrayLinks))); 
```

检查 Symfony2 API：[http ://api.symfony.com/2.0/Symfony/Bundle/FrameworkBundle/Controller/Controller.html](http://api.symfony.com/2.0/Symfony/Bundle/FrameworkBundle/Controller/Controller.html)

# ios - TableView 不调用 GetHeightForRow

> ID：11654700
> 
> 赞同：1
> 
> 时间：2012-07-25T16:48:56.937
> 
> 标签：ios, uitableview, xamarin.ios

我有一个继承自`UITableViewSource`并覆盖 GetHeightForRow 的类：

```
public override float GetHeightForRow(UITableView tableView, NSIndexPath indexPath) 
```

但是，在某个时间点，操作系统停止调用此方法，因此我所有的单元格现在都具有相同的高度。表格和表格源的其余部分工作正常。这很奇怪，我已经尝试了各种各样的东西，但它只是没有调用该方法。表源的其他覆盖方法正常调用。

是否有某种设置可以`UITableView`停止呼叫`GetHeightForRow`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:55:37.447

您可以同时设置 a `Delegate`(or `WeakDelegate`) of type`UITableViewDelegate`和`Source`(of type `UITableViewSource`) property 吗？

它们都暴露了`GetHeightForRow`，如果两者都用在同一个`UITableView`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-08-25T01:51:25.363

在 ViewWillAppear 方法中添加以下行。这行得通。

```
 TableView.Source = new ItemsSource (); 
```

# xcode - OSX 10.8、Xcode 4.4 Make 和 gcc 从环境中消失

> ID：11654702
> 
> 赞同：8
> 
> 时间：2012-07-25T16:49:03.853
> 
> 标签：xcode, gcc, makefile, osx-mountain-lion

我刚刚升级到 Mountain Lion OSX 10.8，然后我愚蠢地升级到了 Xcode 4.4。

然而，在这次升级之后，“make”消失了，像 gcc -v 这样的东西也不起作用。

这是一件大事，因为我正在写我的博士学位，并且我依靠 make 来编译我的 LaTeX 文档......

下载“命令行工具”

[http://adcdownload.apple.com/Developer_Tools/xcode_4.4_gm_seed/cltools10_8gmseed6938077a.dmg](http://adcdownload.apple.com/Developer_Tools/xcode_4.4_gm_seed/cltools10_8gmseed6938077a.dmg)

显然不允许用于非付费开发帐户。

这是怎样的愚蠢？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-07-25T16:52:53.573

它们并没有消失，它们只是被重新定位到 Xcode 的应用程序包中。这实际上更好，因为它允许并排安装不同的 XCode/SDK 版本。

您可以在以下位置找到它们：/Applications/Xcode.app/Contents/Developer/usr/bin

另请查看 xcode-select 工具以允许您选择当前活动的工具链路径。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T18:40:00.797

我今天早上做了和你一样的事情。为了解决这个问题，我刚刚在 ~/.bash_profile 中添加了以下内容：

```
export PATH=$PATH:/Applications/Xcode.app/Contents/Developer/usr/bin 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T18:34:59.253

有趣的是，

Xcode 4.4 中的“下载”界面似乎指向以下位置，用于下载“命令行工具”：

[http://adcdownload.apple.com/Developer_Tools/xcode_4.4_gm_seed/cltools10_8gmseed6938077a.dmg](http://adcdownload.apple.com/Developer_Tools/xcode_4.4_gm_seed/cltools10_8gmseed6938077a.dmg)

从那个 URL 中的“gm”引用来看，我认为这是一个错误。如果没有付费开发帐户，您将无法下载此...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-14T17:28:35.630

我发出了 export PATH 命令，然后尝试编译 hello.c，但编译失败，因为它没有找到文件 stdio.h。所以，我更改了include语句以指定完整路径/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/stdio.h，然后编译失败，因为它没有找到 3 个其他 .h 文件。

```
export PATH=$PATH:/Applications/Xcode.app/Contents/Developer/usr/bin
cat hello.c
#include <stdio.h>
int main()
{
 printf("Hello World \n");
}
gcc hello.c -o hello
hello.c:1:19: error: stdio.h: No such file or directory
hello.c: In function ‘main’:
hello.c:4: warning: incompatible implicit declaration of built-in function ‘printf’
gcc hello.c -o hello
In file included from hello.c:2:
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/stdio.h:64:23: error: sys/cdefs.h: No such file or directory
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/stdio.h:65:26: error: Availability.h: No such file or directory
/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.8.sdk/usr/include/stdio.h:67:20: error: _types.h: No such file or directory 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-19T22:45:28.577

旧线程，但我只是在 Xcode 4.6 中自己寻找这个：

1.  安装 Xcode
2.  转到首选项->下载->组件，“命令行工具”旁边会有一个“安装”按钮

# android - Android 单元测试以测试是否在 onCreate() 中调用了 setContentView()

> ID：11654710
> 
> 赞同：1
> 
> 时间：2012-07-25T16:49:17.933
> 
> 标签：android, android-activity, android-view, android-testing

已经搜索了一段时间，但找不到答案。假设我有这样的 onCreate 方法活动：

```
private ListView mListView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main_view);
    mListView = (ListView) findViewById(R.id.list_view);
} 
```

我有一个扩展 ActivityInstrumentationTestCase2 的测试类。在测试中的活动上调用 onCreate(null) 后，如何测试是否调用了 setContentView 并将其设置为正确的资源？

```
private someActivity mActivity;
protected void setUp() throws Exception {
  super.setUp();
  mActivity = getActivity();
}

public void testOnCreate() {
  assertNull(mActivity.findViewById(R.id.list_view));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-20T18:00:10.963

我们采用了一种稍微不同的方法，我们曾经在布局的根元素中添加一个 id，并在 robolectric 单元测试中断言，如下所示

例如，考虑以下布局 xml（注意 id **android:id="@+id/test_layout_root"**）：

```
<?xml version="1.0" encoding="utf-8"?>
<TableLayout xmlns:android="http://schemas.android.com/apk/res/android"
         android:id="@+id/test_layout_root"
         android:layout_height="match_parent"
         android:layout_width="wrap_content"
         ...
         ...
</TableLayout> 
```

robolectric 单元测试代码：

```
assertEquals(R.id.test_layout_root, shadowOf(testActivity).getContentView().getId()); 
```

您可以在我的博客
[http://ckarthik17-tech.blogspot.in/2013/04/robolectric-testing-setcontentview.html获得更多详细信息](http://ckarthik17-tech.blogspot.in/2013/04/robolectric-testing-setcontentview.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:21:17.387

以下代码应使用以下代码返回视图集`setContentView()`：

```
View getContentView() {
    ViewGroup view = (ViewGroup) getWindow().getDecorView();
    view.getChildAt(0);
} 
```

**编辑：**

或者，如果布局中的顶级视图设置了 ID，您可以检查`findViewById(rootId)`测试代码中是否返回非 null。

# r - 在 R 统计中从 XML 文件创建数据集

> ID：11654711
> 
> 赞同：0
> 
> 时间：2012-07-25T16:49:23.277
> 
> 标签：r, xml-parsing

我正在尝试下载期刊文章记录的 XML 文件并创建一个数据集以在 R 中进一步审讯。我对 XML 完全陌生，并且在 R 中非常新手。我使用来自 2 个来源的代码拼凑了一些代码： [GoogleScholarXScraper](https://github.com/tonybreyal/Blog-Reference-Functions/blob/master/R/googleScholarXScraper/googleScholarXScraper.R) 和 [从 pubMed 中提取记录](http://rpsychologist.com/an-r-script-to-automatically-look-at-pubmed-citation-counts-by-year-of-publication/)

```
library(RCurl)
library(XML)
library(stringr)

#Search terms
SearchString<-"cancer+small+cell+non+lung+survival+plastic"
mySearch<-str_c("http://eutils.ncbi.nlm.nih.gov/entrez/eutils/esearch.fcgi?db=pubmed&term=",SearchString,"&usehistory=y",sep="",collapse=NULL)

#Seach
pub.esearch<-getURL(mySearch)

#Extract QueryKey and WebEnv
pub.esearch<-xmlTreeParse(pub.esearch,asText=TRUE)
key<-as.numeric(xmlValue(pub.esearch[["doc"]][["eSearchResult"]][["QueryKey"]]))
env<-xmlValue(pub.esearch[["doc"]][["eSearchResult"]][["WebEnv"]])

#Fetch Records
myFetch<-str_c("http://eutils.ncbi.nlm.nih.gov/entrez/eutils/efetch.fcgi?db=pubmed&WebEnv=",env,"&retmode=xml&query_key=",key)
pub.efetch<-getURL(myFetch)
myxml<-xmlTreeParse(pub.efetch,asText=TRUE,useInternalNodes=TRUE)

#Create dataset of article characteristics #This doesn't work
pub.data<-NULL
pub.data<-data.frame(
  journal <- xpathSApply(myxml,"//PubmedArticle/MedlineCitation/MedlineJournalInfo/MedlineTA", xmlValue),
  abstract<- xpathSApply(myxml,"//PubmedArticle/MedlineCitation/Article/Abstract/AbstractText",xmlValue),
  affiliation<-xpathSApply(myxml,"//PubmedArticle/MedlineCitation/Article/Affiliation", xmlValue),
  year<-xpathSApply(myxml,"//PubmedArticle/MedlineCitation/Article/Journal/JournalIssue/PubDate/Year", xmlValue)
  ,stringsAsFactors=FALSE) 
```

我似乎遇到的主要问题是我返回的 XML 文件的结构不完全统一。例如，一些引用具有这样的节点结构：

```
- <Abstract>
<AbstractText>The Wilms' tumor gene... </AbstractText> 
```

虽然有些有标签并且是这样的

```
- <Abstract>
<AbstractText Label="BACKGROUND &#38; AIMS" NlmCategory="OBJECTIVE">Some background text.</AbstractText>
<AbstractText Label="METHODS" NlmCategory="METHODS"> Some text on methods.</AbstractText> 
```

当我提取“AbstactText”时，我希望能取回 24 行数据（今天运行此组合搜索时有 24 条记录），但 xpathSApply 将“AbstactText”中的所有标签作为我的数据框的单个元素返回。有没有办法在这个实例中折叠 XML 结构/忽略标签？当在路径末尾找不到任何内容时，有没有办法让 xpathSApply 返回“NA”？我知道 xmlToDataFrame，这听起来应该符合要求，但每当我尝试使用它时，它似乎并没有给我任何明智的选择。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:58:51.357

但是，我不确定您想要哪个：

```
xpathSApply(myxml,"//*/AbstractText[@Label]") 
```

将获得带有标签的节点（保留所有属性等）。

```
xpathSApply(myxml,"//*/AbstractText[not(@Label)]",xmlValue) 
```

将获得没有标签的节点。

编辑：

```
test<-xpathApply(myxml,"//*/Abstract",xmlValue)

> length(test)
[1] 24 
```

可能会给你你想要的

编辑：

用 NA 填充从属关系、年份等

```
dumfun<-function(x,xstr){
res<-xpathSApply(x,xstr,xmlValue)
if(length(res)==0){
out<-NA
}else{
out<-res
}
out
}

xpathSApply(myxml,"//*/Article",dumfun,xstr='./Affiliation')
xpathSApply(myxml,"//*/Article",dumfun,xstr='./Journal/JournalIssue/PubDate/Year') 
```

# mongodb - mongodb：如何表达“模式”？

> ID：11654719
> 
> 赞同：1
> 
> 时间：2012-07-25T16:49:41.240
> 
> 标签：mongodb

一旦许多团队使用同一个 mongodb 数据库，就需要某种方式来表达每个文档可能包含的内容。否则，文档将最终包含每个团队添加的“email”、“mail”、“email_addr”字段。为了跨团队沟通，最好的方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:52:41.870

显然，最好的方式是团队最满意的方式。它可以是 UML、白板绘图、XML 映射、模型代码文件，甚至可能是俳句 :)

我个人更喜欢使用 ODM（mongoid）。它鼓励您指定模型类中的所有字段。然后你只需要看一眼就可以理解架构。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:53:01.140

您可以做的是首先在所有团队成员导入到他们的项目中的一组公共资源中创建您的对象。如果您更改架构设计，您将更新 Commons 项目并且所有团队成员都导入最新。

考虑到 Mongo 的无模式设计，它更多的是关于流程和项目管理，而不是关于技术。我们发现有用的一件事是首先设计您的测试，最近，SoapUI 和 LoadUI 已经成为出色的工具。一旦定义了测试，它就可以为您存根返回并生成可以分发给团队的 HTML 文档。

查看： http: [//www.soapui.org/REST-Testing/working-with-rest-services.html](http://www.soapui.org/REST-Testing/working-with-rest-services.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:06:10.757

当您创建集合时，只需向其中添加一些第一个“引用”对象，该对象将具有该集合的对象可能拥有的所有字段/子对象并将其用作“模式”。您甚至可以编写验证器来检查新对象是否符合此引用对象。

# jquery - jquery asp.net应用结构

> ID：11654722
> 
> 赞同：0
> 
> 时间：2012-07-25T16:49:54.020
> 
> 标签：jquery, asp.net, url, directory, structure

我正在计划一个大型 Web 应用程序并希望将应用程序组织到文件夹中：/Products /Orders /Staff /Utils

该应用程序很可能最终有一百个或更多页面，我不希望所有这些页面都在根文件夹中。

但是，我在 jQuery UI 库中看到很多 css 将引用图像文件夹。

是否有构建此应用程序的最佳方法，以便如果从子文件夹甚至子文件夹加载页面，javascript css 链接仍然可以工作？或者我必须潜入并使用 PHP 或 ASP.NET 重写 jQuery UI 库，以便它产生对图像的正确引用？

我知道我可以搜索并用 url(/images/xyx.png) 替换 url(images/xyx.png) 但我发现当我从我的网站运行我的应用程序时它不起作用。

这是因为网站是 www.myhomepage/sales/xzy.apsx 而在开发时 URL 是 localhost:1234/xyz.aspx 所以我遇到了绝对 url 引用的问题。我可以通过使用 runat=server 标记来解决这个问题，但是如果我能提供帮助，我也不想通过 jquery-ui 库来做这一切。

感谢您的任何想法。

# c# - 添加新项目后如何填充组合框

> ID：11654723
> 
> 赞同：0
> 
> 时间：2012-07-25T16:49:57.923
> 
> 标签：c#, winforms

我正在开发一个 SSIS 控制流任务。在我的 UI 上，我有一个组合框，它显示可用用户变量的列表以及添加新变量的能力。我能够成功添加变量，但即使在我重新填充数据源后，我也无法在组合框中看到它。在 SelectionChangeCommitted 事件中，我正在保存组合框选择。如果用户选择添加新的 SSIS 用户变量，则会提示他们使用此方法。变量被保存，然后我重新填充组合框的数据源。虽然我的新变量没有显示在下拉列表中。我应该在不同的事件中重新填充组合框吗？

我在下面使用的代码示例。

```
 private List<string> FillVariablesList()
    {
        List<string> Variables = new List<string>();
        Variables.Add("");
        Variables.Add(New_Variable);
        foreach (Variable v in this.theTaskHost.Variables)
        {
            if (!v.SystemVariable && v.DataType == TypeCode.String)
                Variables.Add(v.Name);
        }

        return Variables;
    }

 combobox.datasource = FillVariablesList(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:11:05.403

尝试像这样使用共享的 ObservableCollection。

```
... 
class A
{
    private ObservableCollection<string> variables = new ObservableCollection<string>();

    ...
    private void FillVariablesList() 
    {
        variables.Clear();
        variables.Add(""); 
        variables.Add(New_Variable); 

        foreach (Variable v in this.theTaskHost.Variables) 
        { 
            if (!v.SystemVariable && v.DataType == TypeCode.String) 
                variables.Add(v.Name); 
        }

        this.comboBox.DataSource = null;
        this.comboBox.DataSource = variables;
    }
} 
```

而且您甚至可以设置 FillVariables 方法，以便它只是添加新的而不是清除它并重新填充 - 我只是不知道您的其余代码的结构。

# android - 如何在后台测试时强制销毁应用程序

> ID：11654724
> 
> 赞同：6
> 
> 时间：2012-07-25T16:50:02.213
> 
> 标签：android

我在应用程序在后台被销毁后出现问题。虽然我有一些修复，但我希望能够立即测试它们。

如果我将应用程序设置为后台并从应用程序的系统设置中执行“强制停止”，那么当我恢复应用程序时，这似乎不会重现问题。

现在，我必须让应用程序后台运行，并等待近 12 个小时才能再次尝试。

我如何告诉 android 销毁应用程序，以便我可以测试我的修复而无需等待。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T17:05:50.210

在新版本的 Android 中，“设置”>“开发者选项”中有一个名为“不保留活动”的选项，一旦用户离开，它就会销毁每个活动。不确定这是否会强制停止，但值得一看。

# java - 如何通过在 Mac 上分配更多 RAM 的终端运行 .jar

> ID：11654725
> 
> 赞同：4
> 
> 时间：2012-07-25T16:50:04.077
> 
> 标签：java, macos, terminal

我想从“bat”文件在我的 Mac 上运行 .jar 程序，或者不知道它在 Mac 上是什么。

为什么我不想这样做是因为我想为 .jar 分配更多的 RAM。

任何人都可以帮助如何做到这一点？:)

我只想单击一个文件，它会打开自动分配更多 RAM 的 .jar 文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-25T16:54:28.143

您需要某种[shell 脚本](https://supportweb.cs.bham.ac.uk/documentation/tutorials/docsystem/build/tutorials/unixscripting/unixscripting.html)。它看起来类似于

```
#!/bin/sh
java -Xmx256m -jar /path/to/jarfile.jar 
```

该`-XMx`设置决定了 JVM 将分配给您的 Java 程序的最大 RAM 量。

请参阅[此处](http://hints.macworld.com/article.php?story=20030728055235121)了解如何从 Mac Finder 中双击它。

# android - 模拟器上的Android拖放问题

> ID：11654729
> 
> 赞同：2
> 
> 时间：2012-07-25T16:50:16.240
> 
> 标签：android, android-emulator, drag-and-drop

我编写了工作代码以在 Android 中实现拖放，并在设备（SAMSUNG Galaxy Note）上对项目进行了全面测试，一切正常。但是，如果我在模拟器上运行项目，则会出现一个主要问题：拖动工作正常，但拖放功能不起作用：一旦我拖动视图，如果我拖放到具有 onDragListener 的视图上，什么都不会发生（如如果视图没有 onDragListener）。每次尝试拖放时，我还可以在 LogCat（在 Eclipse IDE 中）中看到以下内容：

> (Tag:) ViewRootImpl , (Text:) Reporting drop 结果：false。

模拟器不支持拖放吗？我可以以某种方式启用它吗？

我正在使用 Android 4.0.3 (API 15)。

# css - 如何使用CSS删除文本下方的下划线

> ID：11654733
> 
> 赞同：0
> 
> 时间：2012-07-25T16:50:27.603
> 
> 标签：css

下面是我的代码，其中我使用了 text-decoration:none ；但它现在可以工作了，它下面仍然有一条蓝线。 [http://jsfiddle.net/NW8Nw/1/](http://jsfiddle.net/NW8Nw/1/)

//CSS

```
.thumbnail:hover{z-index: 50;text-decoration: none;position:relative;}
.thumbnail span{  position: absolute;background:#000;padding: 5px;left: -1000px;
 border: 0px solid #ddd;visibility: hidden;color: #fff;width:388px;height:190px;text-  decoration: none;}
.thumbnail:hover span{ text-align:left;visibility: visible;top: 0;left: 110px;text-  decoration:none;
top:-120px;-webkit-box-shadow: 0 8px 6px -6px #aaa; -moz-box-shadow: 0 8px 6px -6px   #aaa;box-shadow: 0 8px 6px -6px #aaa;}
.hoverbold{    text-decoration:none;
font-family:verdana;font-size:11px;color:#B09F6E;text-shadow:0px 0px 1px #B09F6E;}​ 
```

//HTML

```
 <div  class="thumbnail" style="position:relative;">
        <a href="<?php echo SITE; ?>">
<img src=""  style="border:6px solid #ddd;" height="110" width="140">
<div style="position:absolute;border:0;left:120px;top:90px;">
<img src="http://url.com/play.png" border="0"/>
<span>
<div style="padding-left:20px;">
<b style=" text-decoration:none;">Simply beautiful.</b>
</div>
<div style="padding:20px 0px 0px 20px;">
<b CLASS="hoverbold">EDITOR REVIEW :</b>
</div>
</span>​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:55:11.453

那是你`text-shadow`的问题

```
.hoverbold {
  text-decoration: none;
  font-family: verdana;
  font-size: 11px;
  color: #B09F6E;
  text-shadow: 0px 0px 1px #B09F6E; /* Remove This */
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T16:53:58.313

链接与 CSS 中的文本是分开的，因此您必须专门设置链接到文本装饰：无。

例如：

```
A:link {text-decoration: none}
A:visited {text-decoration: none}
A:active {text-decoration: none} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:53:59.247

你没有关闭你的 a 标签。此外，您需要应用 text-decoration:none; 到 a 标签，因为这就是导致下划线的原因。

# windows-7 - 为什么在 Windows 7 上的 users/public/public 文档中创建了重复文件夹？

> ID：11654735
> 
> 赞同：0
> 
> 时间：2012-07-25T16:50:35.627
> 
> 标签：windows-7

java 应用程序正在使用 %PUBLIC% 环境变量来获取“c:\users\public”的路径。然后它附加“公共文档”并尝试从文件夹中读取文件并失败（它之前成功读取和写入文件）。该应用程序不显示任何数据，当它尝试写入“c:\users\public\public 文档”文件夹时，会使用新版本的内容创建一个重复的“c:\users\public\public 文档”文件夹。您仍然可以使用 Windows 资源管理器访问原始内容并在那里查看所有内容，但现在有两个“公共文档”文件夹。

以前它可以毫无问题地读取和写入公共文档文件夹。系统上的每个帐户都会发生这种情况，但在安装了该软件的所有其他 PC 上仍然可以正常工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T16:58:31.133

Windows 资源管理器没有说明的是，真正的文件夹实际上并不称为“Public Documents”，而是实际上称为“Documents”。“Public Documents”只是一个显示名称，但就 NTFS 而言，您可以同时拥有“Documents”和“Public Documents”文件夹而不会产生不良影响。

用于`%PUBLIC%\Documents`指代您要查找的实际文件夹。

# java - 如何在 Lucene 3.4.0 中创建二元/三元索引？

> ID：11654737
> 
> 赞同：3
> 
> 时间：2012-07-25T16:50:38.060
> 
> 标签：java, lucene, tokenize

我是 Lucene 的新手，我非常感谢一个关于如何在索引中包含二元组和三元组标记的示例。

我正在使用以下代码，并对其进行了修改，以便能够计算术语频率和权重，但我也需要对二元组和三元组进行此操作。我看不到标记化部分！我在网上搜索，一些建议的类在 Lucene 3.4.0 中不存在，因为它们已被弃用。

请问有什么建议吗？

谢谢，萌

编辑： - - - - - - - - - - - - - - - -

现在我按照 mbonaci 的建议使用 NGramTokenFilter。这是我标记文本以获取 uni、bi 和 trigrams 的代码的一部分。但它是在字符而不是单词级别上完成的。

代替： `[H][e][l][l][o][HE][EL]`等。

我在找：`[Hello][World][Hello World]`

```
 int min =1;
        int max =3;
        WhitespaceAnalyzer analyzer = new WhitespaceAnalyzer(Version.LUCENE_34);
        String text ="hello my world";
        TokenStream tokenStream = analyzer.tokenStream("Data", new StringReader(text));

        NGramTokenFilter myfilter = new NGramTokenFilter(tokenStream,min,max);
        OffsetAttribute offsetAttribute2 = myfilter.addAttribute(OffsetAttribute.class);
        CharTermAttribute charTermAttribute2 = myfilter.addAttribute(CharTermAttribute.class)
        while (myfilter.incrementToken()) {
            int startOffset = offsetAttribute2.startOffset();
            int endOffset = offsetAttribute2.endOffset();
            String term = charTermAttribute2.toString();
            System.out.println(term);
        }; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T06:43:27.947

你需要看看[带状疱疹](http://lucidworks.com/blog/2010/12/17/whats-a-shingle-in-lucene-parlance/)。那篇文章展示了如何做到这一点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:35:25.657

看看[org.apache.lucene.analysis.ngram.NGramTokenFilter](http://lucene.apache.org/core/4_0_0-ALPHA/analyzers-common/org/apache/lucene/analysis/ngram/NGramTokenFilter.html)。

[这](http://svn.apache.org/viewvc/lucene/dev/tags/lucene_solr_3_6_0/lucene/contrib/analyzers/common/src/java/org/apache/lucene/analysis/ngram/NGramTokenFilter.java?revision=1324900&view=markup)是来源。

# c# - 是否可以在 MVC3 (C#) 中为 `[Display(Name="Something")]` 数据注释使用变量

> ID：11654740
> 
> 赞同：4
> 
> 时间：2012-07-25T16:50:41.323
> 
> 标签：c#, asp.net-mvc-3, data-annotations, resx

不知道为什么，但是 MVC3 中的数据注释坚持使用常量值，对于错误消息和显示名称之类的东西我无法理解。我喜欢这些注释，它们非常易于使用且功能强大，但是如果您需要支持多种语言怎么办？

想象一下我有以下模型：

```
public class Person
{
    public string First_Name { get; set; }
} 
```

如果我不更改任何内容并使用 MVC3 将为我构建的 CRUD 视图，我会在显示“First_Name”的文本字段旁边获得一个标签，因此我添加数据注释以更改显示名称，如下所示：

```
public class Person
{
    [Display(Name="First name")]
    public string First_Name { get; set; }
} 
```

哪个工作得很好。但我想根据用户语言提供不同的显示名称，使用我之前创建的函数`GetDisplayName(string ToGet, string Language)`，它只返回我感兴趣的字符串，但如果我将数据注释更改为：

```
public class Person
{
    [Display(Name=GetDisplayName("First_Name", "English"))]
    public string First_Name { get; set; }
} 
```

然后我得到一个编译器错误，告诉我注释需要一个常量值，为什么？？？？

有谁知道一种方法来完成我想要做的事情？谢谢

**更新**

好的，似乎最好的方法是`.resx`根据下面的几个答案和其他帖子中的答案使用资源文件。在大多数情况下效果很好。

有谁知道我如何请求具有变量名的资源？这次不是在数据属性的上下文中，而只是在控制器和视图中。

基本上目前我正在获取资源，`@Resources.SomeKey`但我希望能够在动态生成的字符串的函数中使用`@Resources["SomeOtherKey"]`它`SomeOtherKey`。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T17:54:53.937

如果您在资源文件中有已翻译的属性名称，则支持开箱即用......无需扩展框架。

只需使用：

```
[Display(Name = "Resource_Key", ResourceType = typeof(DataFieldLabels))]
public string myProperty { get; set; } 
```

其中“Resource_Key”是资源文件中的键......而“DataFieldLabels”是基本资源文件的名称。

**编辑：**

为了动态访问资源文件，您可以执行以下操作：

```
ResourceSet resset = ResourceManager.GetResourceSet(culture, true, false);
var translated = resset.GetString("myToken") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:10:20.393

您只能分配常量。

您可以进行扩展并在那里分配 keyValues，然后扩展从其他地方获取，例如数据库或资源文件或 Web 服务或其他任何地方。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:07:10.880

DataAnnotations 参数值需要常量，即实际字符串。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T16:56:20.730

您可能想查看[Hanselman](http://www.hanselman.com/blog/GlobalizationInternationalizationAndLocalizationInASPNETMVC3JavaScriptAndJQueryPart1.aspx)关于国际化的帖子。也许它可以帮助

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-21T11:29:08.580

```
[Display(Name = "strResourceString", ResourceType = typeof(Resourcefile.strResourceString))] 
```

# objective-c - 两个 NSDate 之间的月数和天数

> ID：11654741
> 
> 赞同：2
> 
> 时间：2012-07-25T16:50:43.750
> 
> 标签：objective-c, ios, nsdate

我想计算两个 NSDate 之间的月数和天数。我有正确计算的天数，但如何将其转换为月数和剩余天数？

这是我用来计算总天数的方法，它工作正常。

```
- (NSInteger) numberOfDaysUntil {
    NSDate *fromDate;
    NSDate *toDate;

    NSCalendar *calendar = [NSCalendar currentCalendar];

    [calendar rangeOfUnit:NSDayCalendarUnit startDate:&fromDate interval:NULL forDate:[self dateOnly:[NSDate date]]];
    [calendar rangeOfUnit:NSDayCalendarUnit startDate:&toDate interval:NULL forDate:[self dateOnly:self]];

    NSDateComponents *difference = [calendar components:NSDayCalendarUnit fromDate:fromDate toDate:toDate options:0];
    return [difference day];
} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-07-25T17:54:08.357

正如[Hot Licks](https://stackoverflow.com/users/581994/hot-licks)正确所说，在大多数日历中，您无法将天数转换为月/天。

但是，如果您同意 Apple 的实现，该`NSCalendar`方法可以进行此计算。`components:fromDate:toDate:options:`从文档中：

> 如果没有要求足够小的单位来保持差异的完整精度，则结果是有损的。一些操作可能是不明确的，并且计算的行为是特定于日历的，但通常较大的组件将在较小的组件之前计算；例如，在公历中，结果可能是 1 个月零 5 天，而不是 0 个月零 35 天。

文档中的讨论甚至包括针对您的问题的示例代码：

```
NSDate *startDate = ...;
NSDate *endDate = ...;
unsigned int unitFlags = NSMonthCalendarUnit | NSDayCalendarUnit;
NSDateComponents *comps = [gregorian components:unitFlags fromDate:startDate  toDate:endDate  options:0];
int months = [comps month];
int days = [comps day]; 
```

# java - Web应用上下文和服务上下文之间的双向依赖

> ID：11654742
> 
> 赞同：1
> 
> 时间：2012-07-25T16:50:44.600
> 
> 标签：java, spring, jakarta-ee

我有 2 个弹簧上下文：“webapplication”上下文和“核心”上下文。上下文“核心”在服务器启动时初始化，并附加到保存上下文的 Singleton 类。“webapplication”上下文在 web 应用程序启动时被初始化。

我想将一个上下文中的 bean 的 bean 依赖项注入到另一个上下文中（双向访问）。Web 应用程序 bean 将是“会话”范围的 bean。

我正在测试这个概念证明：webapp bean -->（取决于）核心 bean -->（取决于另一个）webapp bean。

在 webapplication 上下文初始化时，我可以将“core”bean 注入“webapplication”bean（一个访问单例的 BeanFactory 执行魔术），但不知道如何做相反的事情；因为保存 WebApplicationContext 的 Spring ThreadLocal 尚未初始化。

问题是。这是我试图做的可能吗？如果答案是“是”，你会怎么做？

提前致谢。

编辑：

我意识到我做错了什么。事实是我试图在错误的时间向服务层注入对会话 bean 的依赖；也就是说，在我没有当前用户会话的网络初始化时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:27:45.107

这在我看来是一个架构问题，而不是技术问题（当然也不是 Spring）问题。您在*核心*上下文和*Web*上下文之间的分离非常好。前者处理业务流程，而后者负责表示，可能是一些 API。

*从web*（表示、访问）到*核心*的依赖是可以理解和需要的——毕竟你是在业务例程上构建一个接口。这就是[spring-mvc](/questions/tagged/spring-mvc "显示标记为“spring-mvc”的问题")默认的工作方式，为核心上下文创建单独的子 (web) 应用程序上下文。

我几乎无法想象反向依赖的用例。为什么你的业务逻辑依赖于 web 层？如果您尝试将应用程序迁移到另一种表示技术（桌面、移动）怎么办？你能证明这种反向依赖的原因吗？*会话 bean*是什么意思？

双向依赖，以及持有类加载器对应用程序上下文的广泛引用的静态单例应该表明设计有问题。

# c# - Visual Studio 自定义语言服务

> ID：11654744
> 
> 赞同：3
> 
> 时间：2012-07-25T16:50:52.073
> 
> 标签：c#, visual-studio, languageservice, mpf

我正在尝试使用 MPF 在 VSPackage 中实现语言服务，但它并没有像我理解的那样工作。

我已经有几个实现，例如`ParseSource`使用`ParseRequest`. 但是，当它发现错误时，它会将其添加到`AuthoringSink.AddError`. 这方面的文档意味着它将它添加到我的错误列表中；它没有。

我也有一个简单`MySource`的类，一个`Source`. 我用一个重写的`LanguageService.CreateSource`方法返回这个新类。的文档`OnCommand`说它在“输入命令时”被触发。然而，事实并非如此。

显然有一些中间步骤我没有正确完成。我已经说得够多了，所以我很乐意应要求提供任何其他详细信息。

任何澄清都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-27T19:49:44.400

`AuthoringSink.AddError`如果是，则仅将错误添加到错误列表`ParseRequest.Reason`中`ParseReason.Check`。当您的`ParseSource`函数在解析任何其他时尝试添加错误时`ParseReason`，什么都不会发生。

您的语言服务可能永远不会`ParseSource`使用 this调用`ParseReason`。据我所知，获得of的[唯一方法](https://stackoverflow.com/questions/22055112/issues-proferring-language-service)（除了手动调用或您自己之外）是为[您的服务提供一个 idle timer](http://msdn.microsoft.com/en-us/library/bb166498.aspx)。`ParseReason``Check``BeginParse``ParseSource`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-08-30T21:47:28.133

对于 AuthoringSink 错误列表问题，我在我的语言服务中使用此行为。在 ParseSource 中，ParseRequest 类有一个 AuthoringSink。如果您想在解析器的行为之外工作，也可以创建一个新的 ErrorListProvider。这是一些示例代码：

```
error_list = new ErrorListProvider(this.Site);
    error_list.ProviderName = "MyLanguageService Errors";
    error_list.ProviderGuid = new Guid(this.errorlistGUIDstring.);
}

ErrorTask task = new ErrorTask();
task.Document = filename;
task.CanDelete = true;
task.Category = TaskCategory.CodeSense;
task.Column = column;
task.Line = line;
task.Text = message;
task.ErrorCategory = TaskErrorCategory.Error;
task.Navigate += NavigateToParseError;
error_list.Tasks.Add(task); 
```

我希望这可以帮到你。

OnCommand 应该在每次有命令时触发，在您的 MySource 类中，您可以执行以下操作（从工作代码中提取）：

```
public override void OnCommand(IVsTextView textView, VsCommands2K command, char ch)
{
    if (textView == null || this.LanguageService == null 
        || !this.LanguageService.Preferences.EnableCodeSense)
        return;

    if (command == Microsoft.VisualStudio.VSConstants.VSStd2KCmdID.TYPECHAR)
    {
        if (char.IsLetterOrDigit(ch))
        {
            //do something cool
        }
    }

    base.OnCommand(textView, command, ch);
} 
```

如果这不起作用，请在设置 LanguageService 包时仔细检查 ProvideLanguageService 属性中的 CodeSense = true。LanguageService 中的很多很酷的事情都需要正确打开这些属性。有些甚至免费提供很酷的行为！

另一件需要注意的事情是，根据我的经验，着色器等某些行为在蜂巢中无法正常工作。我不认为这些给我带来了麻烦，但我在几年前实现了这些，所以我主要只是回顾旧代码。

# coding-style - 隐藏空白最佳实践

> ID：11654747
> 
> 赞同：4
> 
> 时间：2012-07-25T16:51:08.147
> 
> 标签：coding-style, whitespace

我认为大多数人都同意尾随空格不是好的做法。许多编辑器会为您显示或自动将其删除。

考虑这个 Python 函数作为一个简单的例子：

![空白示例截图](../Images/f79e1554912caf0b358b683ef353a7e5.png)

第 11 行和第 13 行的多余空格是错误的。我想知道的是第 10 行。不改变缩进的控制块内的空白行是否应该有前导空格？

我使用的大多数编辑器都会将光标保持在前一行的缩进级别，因此制作一个没有前导空格的空行需要一些额外的格式。最佳做法是什么？第 10 行是否应该有前导空格？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T17:01:40.710

在代码执行方面，它绝对是零差异；我在 python 中看到的最多的做法是带有空格的做法，但我认为没有人可以真正合理地说一个在客观上比另一个更好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-14T10:31:21.080

我将尝试根据您的 Python 示例回答您的问题，并引用他们的样式指南。

来自[PEP-8](http://www.python.org/dev/peps/pep-0008/#whitespace-in-expressions-and-statements)：

> 类中的方法定义由一个空行分隔。

来自[维基百科（空白行）](http://en.wikipedia.org/wiki/Line_%28text_file%29)：

> 空行通常是指包含零个字符的行（不包括任何行尾字符）；尽管它也可以引用任何不包含任何可见字符（仅由空格组成）的行。

如果您相信 Wikipedia 的定义，您可能会问为什么首选零字符。

一方面它更简单，即使在您的编辑器中打开了自动缩进，您也只是无缘无故地用额外的字节填充文件。

其次，零字符空行的正则表达式也更简单，'^$'通常与'^\s*$'之类的东西相比。

正如其他答案所指出的那样，放入空格在执行方面没有任何区别。没有充分的理由这样做，我想说最好的做法是将它排除在外并保持简单。你能想象一个零字符行的处理方式与带有一些空格的行不同的情况吗？我讨厌用那种语言编程。放入空格对我来说似乎是巴洛克式的。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-09T10:27:55.607

正如@PinkElephantsOnParade 所写，执行没有区别。因此，这完全是个人审美偏好的问题。

我自己将我的编辑器设置为显示尾随空格，因为我认为尾随空格是一个坏主意。因此，您的第 10 行将被突出显示并一直盯着我的脸。没有人想要那样，所以我认为第 10 行不应该包含空格。（巧合的是，我的编辑器 emacs 是如何自动处理这个问题的。）

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T02:23:10.070

每个人都有自己的看法，但看待它的一种方式是：代码风格是关于人类可读性的。因此，如果尾随空格将行的长度延伸到某个预先存在的（自我强加的）限制（例如 80 个字符限制），则它只是一个问题。

另一方面，如果您始终在编辑器中显示空白，这对您很重要，我个人会将其保留在那里，因为（至少对某些人来说）有空白会更有效；如果您决定在某个时候在该行添加代码，则不必添加额外的空格。

# java - JSP - 下拉列表中的日期对象

> ID：11654749
> 
> 赞同：0
> 
> 时间：2012-07-25T16:51:24.147
> 
> 标签：java, class, jsp, object

所以我目前有一个registration.html 页面，在下拉列表中包含两个日期。

```
 <td>Preferred Date:</td>
    <td><select name="datePreferred">
            <option value="dateOne">08/18/2012</option>
            <option value="dateTwo">08/25/2012</option>
    </select>
    </td> 
```

对于我的 JSP 页面，我有以下内容

```
 <%
    String dPreferred = request.getParameter("datePreferred");
    SimpleDateFormat dateFormat = new SimpleDateFormat("mm/dd/yyyy");
    Date dateObj = dateFormat.parse(dPreferred);
    %> 
```

但是我似乎得到“找不到符号 - 符号：类日期 - 位置：类 SimplifiedJSPServlet

我要做的是创建并存储一个日期对象，该对象可以写入文本文件并显示在验证页面上。

任何想法将不胜感激:)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:53:44.243

您是否在 JSP 中导入了日期？：

```
<%@ page import="java.util.Date" %> 
```

# php - csv 和 Jquery 数据表上的 PHP

> ID：11654753
> 
> 赞同：0
> 
> 时间：2012-07-25T16:51:32.667
> 
> 标签：php, jquery, csv, datatable

我为一个问题苦苦挣扎了一天，但想不出如何处理以下问题：我有一个解析的 CSV 文件，我在 Jquery 数据表中呈现该文件。每行都附加了一个复选框。如果选择并提交了行，则应删除 CSV 文件中的选定行。我的问题是如何为 CSV 行提供一个唯一的 ID，即使删除了一行或添加了其他行。应该使用 PHP 管理还是使用 Jquery 会有更好的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T16:57:42.090

我会将 csv 转储到具有 auto_increment 主键的临时数据库表中。然后数据库负责维护状态。您的 jQuery 数据表将有一个隐藏列来保存主键，该主键充当每行的唯一标识符。

# php - 如何在 Android 应用中存储和发送 cookie 标头？

> ID：11654755
> 
> 赞同：0
> 
> 时间：2012-07-25T16:51:38.700
> 
> 标签：php, android, cookies

我有一个 Android 应用程序可以检查我控制的 URL。但是，我似乎无法在设备上/从设备上设置/拉出 cookie。这在我的桌面上很好用，但在手机本身上却不行。

服务器端代码是

```
<?php 

if(!$_COOKIE['test']) {
$newid=rand(1000,9999999);
echo base64_encode("$newid"); 
mysql_query("INSERT INTO `users` SET `id`='".$newid."', `channel`='0', `activation_date`=now(), `last_view`=now()");
setcookie('test', $newid, mktime (0, 0, 0, 12, 31, 3015)); 
} else {

echo base64_encode($_COOKIE['test']); 

}

?> 
```

# ruby-on-rails - Rails - 从javascript事件发出ajax请求并加载部分

> ID：11654758
> 
> 赞同：0
> 
> 时间：2012-07-25T16:51:42.430
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

这是怎么回事？

我正在使用带有 ruby​​ 1.9.2p290 的 rails 3.2.3。

我有一个模型 Purchase 有很多 purchase_payments：

```
class Purchase < ActiveRecord::Base
  has_many :purchase_payments, :class_name => 'PurchasePayment', :dependent => :destroy
  accepts_nested_attributes_for :purchase_payments

  def Purchase.build_payments(count)
    #Creat #count payments with some logic for each of them
  end
end 
```

在我的表格中，我有 number_field：

```
<td>
  <%= f.number_field :payments_count, :min => 0 %>
</td> 
```

现在，我希望根据付款次数显示 purchase_payment 字段。为此，我有一个特定的 div：

```
<div id="purchase_payments_space"> </div> 
```

到目前为止，我发现的每一个资源都谈到了由帮助标签生成的 ajax，比如 link_to ... ， :remote => true，但是使用这个标签，用户必须点击链接才能调用远程函数。在我的应用程序的其他部分，我使用 jquery ajax 请求，我正在尝试使用这样的方式将请求发送到我的控制器：

```
function load_payments() {
  $.ajax({
    type: "POST",
    url: "/purchases/build_payments/" + document.getElementById("purchase_payments_count").value,
  });
}

$(document).ready(function() {
  $("#purchase_payments_count").change(load_payments);
} 
```

在我的控制器中，在我的类声明和以下方法之后，我有 respond_to :js：

```
def build_payments
  pc = params[:payments_count].to_i
  @purchase = Purchase.new

  @purchase_payments = Purchase.build_payments pc

  respond_to do |format|
    format.js
  end
end 
```

这样我的 app/views/purchases/buid_payments.js.erb 运行正常。问题是，我正在构建一个应该包含在我的表单中的付款集合，并且以我目前正在做的方式做事看起来不像 rails 会这样做。这样我将不得不在 js.erb 文件中编写很多代码，但我仍然无法弄清楚如何让 create 方法从参数构建完整的购买（我不知道如何从的JavaScript）。

我查看了几种不同的方法，但没有一个提供从 javascript 事件发出 ajax 请求的集成解决方案，并让视图为我的嵌套属性创建嵌套字段（它是我必须记住的 purchase_payment 的集合）。

我看到了[http://railscasts.com/episodes/196-nested-model-form-part-1](http://railscasts.com/episodes/196-nested-model-form-part-1)和[http://railscasts.com/episodes/197-nested-model-form-part-2](http://railscasts.com/episodes/197-nested-model-form-part-2)但这些都建立在上面像 link_to 和 link_to_function 这样的辅助方法。

谁能指出我该如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:23:45.007

```
$.ajax({
    url: "purchases/build_payments",
    type: 'POST',
    data: $('#purchase_payments_count').val(),
    dataType: 'html',
    headers: {
      'X-CSRF-Token': '<%= form_authenticity_token.to_s %>'
    }
}); 
```

然后

```
def build_payments
  pc = params[:payments_count].to_i
  @purchase = Purchase.new

  @purchase_payments = Purchase.build_payments pc

  respond_to do |f|
    f.js {}
  end
end 
```

这将运行 buid_payments.js.erb 可以填充\重新创建您的表

如果看不到，我帮不了你。

# php - 允许外部服务器使用 php 访问没有 dns 的服务器

> ID：11654762
> 
> 赞同：0
> 
> 时间：2012-07-25T16:51:53.437
> 
> 标签：php, dns

我的开发服务器是外部的“dev.site.com”

我们的数据库位于外部 IP 地址上，但没有 DNS 记录。DNS 已使用主机文件在本地设置。

例如：database.site.com 55.444.33.21

由于我的外部开发服务器无法独立解析database.site.com或55.444.33.21，也无法将本地DNS记录添加到服务器，如何才能正常访问呢？

我可以利用 PHP 中的某些方法来创建动态 DNS 吗？

我无法更改任何设置方式，但我可以完全控制 PHP 代码库。本质上，我正在寻找一种在我的脚本中说 55.444.33.21 = database.site.com 的方法，所以每当我在代码中调用 database.site.com 时它都可以工作。

**编辑** 我无法仅使用 ip 访问它，也无法将其添加到服务器上的本地主机文件中。我的目标是找到解决这些问题的方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T16:58:11.680

不要在代码中调用“database.site.com”。

相反，在代码中的*一个地方*定义一个常量，并在代码的其余部分使用该常量：

```
define("DATABASE_SERVER", "database.site.com"); 
```

或者

```
const DATABASE_SERVER = "database.site.com"; 
```

然后在整个代码中，您将使用该常量而不是实际值。因此，当您需要将代码移动到另一个环境时，您可以通过更改常量的值来为该环境配置它：

```
define("DATABASE_SERVER", "55.444.33.21"); 
```

或者

```
const DATABASE_SERVER = "55.444.33.21"; 
```

通常，您希望在代码中尽可能少地使用实际动态值。这为您的所有代码提供了多种更改理由。值应该被抽象在常量或变量或某种符号后面，这样，如果值改变，只有一段代码有理由改变。其余的继续发挥作用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:55:14.690

快速破解，但你可以`define("database.site.com", "55.444.33.21");`

# networking - 从 UDP 数据包中获取 IP 地址和端口

> ID：11654770
> 
> 赞同：6
> 
> 时间：2012-07-25T16:52:26.800
> 
> 标签：networking, udp, ip, port, netcat

我有一个使用 netcat 的服务器设置：

```
nc -l 4444 -u 
```

还有一个客户：

```
nc 127.0.0.1 4444 -u 
```

我使用 localhost 因为它们都在我的计算机上，但是如果客户端移动到另一台计算机，netcat 有没有办法告诉我客户端的 IP 地址和端口号？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:56:26.003

使用`-v`or`-vv`进行详细日志记录，这将告诉您客户端 IP 和端口。

# sql - 查询前预取行数 - 性能

> ID：11654773
> 
> 赞同：0
> 
> 时间：2012-07-25T16:52:46.223
> 
> 标签：sql

我最近根据我的经验回答了这个问题：

[在进行实际搜索之前计算行数](https://stackoverflow.com/questions/11642975/counting-rows-before-proceeding-to-actual-searching/11643053#11643053)

但我对我给出的答案并不是 100% 满意。

`COUNT`问题基本上是这样的：在决定运行带回实际行的查询之前，我可以通过运行特定查询来提高性能吗？

我的直觉是：您只会节省与检索数据相关的 I/O 和连线时间，而不是计数，因为要计算数据，您需要实际找到行。可能的例外是查询是索引的简单函数。

那么我的问题是：这总是正确的吗？还有哪些例外情况？从纯粹的性能角度来看，在什么情况下需要`COUNT`在运行完整查询之前执行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T18:01:20.520

首先，您的问题的答案高度依赖于数据库。

我想不出在查询之前执行 COUNT() 会缩短查询和 count() 的总时间的情况。

通常，进行计数会将表和索引预加载到页面缓存中。假设数据适合内存，这将使后续查询运行得更快（尽管如果您有快速 I/O 并且数据库执行预读页面读取，则速度不会快很多）。但是，您只是将时间范围转移到 COUNT()，而不是减少总时间。

要缩短总时间（包括 COUNT() 的运行时间）需要更改执行计划。以下是理论上可能发生的两种方式：

1.  数据库可以在读入表时更新统计信息，而这些统计信息又会更改主查询的查询计划。
2.  数据库可以根据表/索引是否已经在页面缓存中来更改执行计划。

虽然理论上是可能的，但我不知道有任何数据库可以做到这些。

您可以想象可以存储中间结果，但这会违反 SQL 数据库的动态特性。也就是说，更新/插入可能发生在 COUNT() 和查询之间的表上。数据库引擎无法保持完整性并保持这样的中间结果。

相对于加快后续查询，执行 COUNT() 有缺点。COUNT() 的查询计划可能与主查询的查询计划完全不同。您的索引示例就是一种情况。另一种情况是在列式数据库中，不需要读取数据的不同垂直分区。

还有一种情况是查询，例如：

```
select t.*, r.val
from table t left outer join
     ref r
     on t.refID = r.refID 
```

refID 是 ref 表上的唯一索引。由于没有重复，并且使用了 t 中的所有记录，因此可以消除此连接。但是，此查询显然需要连接。再一次，SQL 优化器是否识别并处理这种情况完全取决于数据库的编写者。但是，理论上可以针对 COUNT() 优化连接。

# android - 来自光标加载器的 ListFragment 无法在方向更改时显示任何内容

> ID：11654774
> 
> 赞同：1
> 
> 时间：2012-07-25T16:52:46.317
> 
> 标签：android, android-listfragment, android-cursorloader, commonsware-cwac

我正在开发一个使用 ActionBarSherlock 和[ViewPagerIndicator](https://github.com/JakeWharton/Android-ViewPagerIndicator/)构建的 Android 应用程序，minSDK 为 8（Android 2.2），targetSDK 为 16（Android 4.1），使用 Android 兼容库。我有一个应用程序的消息传递部分，其中消息存储在 SQLite 数据库中，并且我正在使用 CommonsWare 的[cwac-loaderex](https://github.com/commonsguy/cwac-loaderex)将游标加载器与 SQLite 数据库一起使用。当活动加载时，一切正常并显示消息，但是当我旋转设备时，它只显示一个带有加载循环的 ListFragment。

打开 LoaderManager.enableDebugLogging(true) 现有的加载器在我旋转时被重用，我还尝试了 onDestroy 中的 getSupportLoaderManager().destroyLoader(ID) 并且正在创建新的加载器，但我仍然有相同的结果，带有加载圈的 ListFragment . 在打开消息传递活动之前，我已经在两个方向上进行了测试，它们都工作正常，这只是当我在消息传递活动可见时旋转时出现的问题。我还尝试以纵向进入消息传递活动，单击一条消息将我带到另一个活动而不破坏消息传递活动，更改为横向，然后按回消息传递活动，一切都显示正常。

我无法弄清楚为什么在轮换后没有显示消息。我会非常感谢任何想法或帮助。我在下面包含了我的消息传递活动。

```
import android.content.Intent;
import android.database.Cursor;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.support.v4.app.FragmentManager;
import android.support.v4.app.FragmentPagerAdapter;
import android.support.v4.app.ListFragment;
import android.support.v4.app.LoaderManager;
import android.support.v4.content.Loader;
import android.support.v4.view.ViewPager;
import android.support.v4.widget.SimpleCursorAdapter;

import com.actionbarsherlock.app.SherlockFragmentActivity;
import com.actionbarsherlock.view.Menu;
import com.actionbarsherlock.view.MenuItem;
import com.commonsware.cwac.loaderex.acl.SQLiteCursorLoader;
import com.viewpagerindicator.TitlePageIndicator;

import com.lukekorth.DB.DatabaseHelper;
import com.lukekorth.Helpers.MessageFragment;

public class MyMessagesActivity extends SherlockFragmentActivity implements
LoaderManager.LoaderCallbacks<Cursor> {

        private FragmentAdapter mFragmentAdapter;
    private ViewPager mPager;
    private DatabaseHelper mDB;
    private SimpleCursorAdapter mInboxCursorAdapter;
    private SimpleCursorAdapter mArchiveCursorAdapter;

    private MessageFragment[] content = new MessageFragment[2];

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.messages);

        getSupportActionBar().setHomeButtonEnabled(true);
        getSherlock().getActionBar().setDisplayHomeAsUpEnabled(true);

        mDB = new DatabaseHelper(this);

        content[0] = new MessageFragment();
        content[1] = new MessageFragment();

        /////////--------------------///////
        LoaderManager.enableDebugLogging(true);

        mInboxCursorAdapter = new SimpleCursorAdapter(this, R.layout.message_item, null, new String[] { DatabaseHelper.senderName,
                DatabaseHelper.lastUpdate, DatabaseHelper.subject, DatabaseHelper.lastSnippet }, new int[] { R.id.name, R.id.date,
                R.id.subject, R.id.snippet });

        mArchiveCursorAdapter = new SimpleCursorAdapter(this, R.layout.message_item, null, new String[] { DatabaseHelper.senderName,
                DatabaseHelper.lastUpdate, DatabaseHelper.subject, DatabaseHelper.lastSnippet }, new int[] { R.id.name, R.id.date,
                R.id.subject, R.id.snippet });

        content[0].setListAdapter(mInboxCursorAdapter);
        content[1].setListAdapter(mArchiveCursorAdapter);

        getSupportLoaderManager().initLoader(0, null, this);
        getSupportLoaderManager().initLoader(1, null, this);
        ///////////////------------------////////////

        mFragmentAdapter = new FragmentAdapter(getSupportFragmentManager());
        mFragmentAdapter.updateContent(content);

        mPager = (ViewPager) findViewById(R.id.pager);
        mPager.setAdapter(mFragmentAdapter);

        TitlePageIndicator indicator = (TitlePageIndicator) findViewById(R.id.indicator);
        indicator.setViewPager(mPager);
    }

    @Override
    public void onDestroy() {
        super.onDestroy();

        getSupportLoaderManager().destroyLoader(0);
        getSupportLoaderManager().destroyLoader(1);

        mDB.close();
    }

    @Override
    public Loader<Cursor> onCreateLoader(int folder, Bundle arg1) {
        String query = "select " + DatabaseHelper.threads + "." + DatabaseHelper.threadKey + "," + DatabaseHelper.subject +
                "," + DatabaseHelper.archive + "," + DatabaseHelper.otherUser + "," + DatabaseHelper.lastUpdate + "," +
                DatabaseHelper.lastSnippet + "," + DatabaseHelper.senderPicture + "," + DatabaseHelper.senderName + " from " +
                DatabaseHelper.threads + " left join " + DatabaseHelper.senders + " on " + DatabaseHelper.threads + "." +
                DatabaseHelper.otherUser + " = " + DatabaseHelper.senders + "." + DatabaseHelper.senderKey + " where " +
                DatabaseHelper.archive;

        if(folder == 0)
            query += " = 0 order by ";
        else
            query += " = 1 order by ";

        query += DatabaseHelper.lastUpdate + " desc";

        return new SQLiteCursorLoader(this, mDB, query, null);
    }

    @Override
    public void onLoadFinished(Loader<Cursor> loader, Cursor cursor) {
        if(loader.getId() == 0)
            mInboxCursorAdapter.swapCursor(cursor);
        else
            mArchiveCursorAdapter.swapCursor(cursor);
    }

    @Override
    public void onLoaderReset(Loader<Cursor> loader) {
        if(loader.getId() == 0)
            mInboxCursorAdapter.swapCursor(null);
        else
            mArchiveCursorAdapter.swapCursor(null);
    }
}

class FragmentAdapter extends FragmentPagerAdapter {
    protected static final String[] TITLE = new String[] { "Inbox", "Archive", };

    private ListFragment[] mContent;

    private int mCount = TITLE.length;

    public FragmentAdapter(FragmentManager fm) {
        super(fm);
    }

    public void updateContent(MessageFragment[] content){
        mContent = content;
    }

    @Override
    public Fragment getItem(int position) {
        return mContent[position % mContent.length];
    }

    @Override
    public int getCount() {
        return mCount;
    }

    @Override
    public CharSequence getPageTitle(int position) {
        return FragmentAdapter.TITLE[position % TITLE.length];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-31T14:47:28.597

事实证明，ViewPager 和片段标签有些奇怪。我的解决方案是在事务中添加片段，`onSaveInstanceState()`然后在`onCreate()`（第二段代码）中添加片段，以使用 ViewPager 中生成的标签按标签获取片段。[我能够从这个问题](https://stackoverflow.com/questions/7379165/update-data-in-listfragment-as-part-of-viewpager)中找出使用的标签方案。希望这可以为某人节省几天的工作。

```
@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    FragmentManager fm = getSupportFragmentManager();
    FragmentTransaction ft = fm.beginTransaction();

    ft.add(content[0], content[0].getTag());
    ft.add(content[1], content[1].getTag());

    ft.commit();
}

    FragmentManager fm = getSupportFragmentManager();

    content[0] = (MessageFragment) fm.findFragmentByTag("android:switcher:"+ R.id.pager + ":0");
    content[1] = (MessageFragment) fm.findFragmentByTag("android:switcher:"+ R.id.pager + ":1");

    if(content[0] == null || content[1] == null){
        content[0] = new MessageFragment();
        content[1] = new MessageFragment();

        content[0].setListAdapter(mInboxCursorAdapter);
        content[1].setListAdapter(mArchiveCursorAdapter);
    } 
```

# c# - C# for 在 foreach 中继续

> ID：11654777
> 
> 赞同：3
> 
> 时间：2012-07-25T16:52:54.180
> 
> 标签：c#, for-loop, foreach, continue

> **可能重复：**
> [继续并在扩展范围内中断](https://stackoverflow.com/questions/4992810/continue-and-break-with-an-extended-scope)

我有一个问题。我不知道如何在 foreach 中为“for”调用 c​​ontinue。

代码：

```
for(int i = 0; i < ...; i++)
{
  foreach(´´ .. in ´´)
  {
    if(,,.Value == null)
      // A!
  }
} 
```

我需要替换“A！” 代码继续“for”！不是foreach。我使用了基本的继续，但它仅适用于 foreach。

解决了：

```
for(int i = 0; i < ...; i++)
{
  bool Ab = false;

  foreach(´´ .. in ´´)
  {
    if(,,.Value == null)
      Ab = true;
  }

  if(Ab)
    continue;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:57:24.447

如果你需要停止内循环，并继续外循环，你只需要在内循环中的一个break语句

```
for(int i = 0; i < ...; i++)
{   
    foreach(var thing in something)   
    {     
        if(thing.Value == null)       
        {
            break; 
        } 
    } 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T16:57:26.833

如果那是您的实际代码结构，您可以`break`从`foreach`并且`for`将立即继续到下一次迭代，因为当前一次已经结束。

但是，如果您在`for`循环完成后的迭代中有更多代码`foreach`，那么您可能会遇到一种*罕见*的情况，即（母亲，保护孩子的耳朵）您*可能*希望使用 a`goto`跳到当前的末尾`for`迭代。

不过，更简洁的方法是塑造内部循环，使其出现在外部循环的末尾，这样`break`内部循环中的 a`continue`就是外部循环的 a。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T16:56:52.883

你不能只是`break`内`foreach`循环吗？

```
for (int i = 0; i < blah; i++) {
  foreach (var item in collection) {
    if (ShouldContinue(item)) {
      break;
    }
    // other stuff
  }
  // don't put things here
} 
```

如果您需要我放置`don't put things here`的代码，如果您将内部循环包装在一个函数中，它可能会更清晰：

```
bool ProcessOrContinue(IEnumerable collection) {
  foreach (var item in collection) {
    if (ShouldContinue(item)) {
      return true;
    }
    // other stuff
  }
  return false;
}

for (int i = 0; i < blah; i++) {
  if (ProcessOrContinue(collection)) continue;
  // more things
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:02:04.410

`Continue`是一个花哨的goto。你可以在这里使用递归。

# unit-testing - 动态加载的测试脚本会打乱测试执行顺序

> ID：11654783
> 
> 赞同：0
> 
> 时间：2012-07-25T16:53:05.913
> 
> 标签：unit-testing, qunit

我正在运行一组使用模块级别`setup`和`teardown`方法的 QUnit 测试。我注意到，当调用它们时，在我的测试中使用`start()`和`stop()`内部似乎会中断，这会导致问题，因为在我的设置中可用的某些项目对某些运行的测试不可用。

*编辑*：我注意到这仅在我以编程方式加载测试脚本时发生（我正在使用脚本加载器：[LABjs](http://labjs.com/)）。我已经相应地修改了这个问题的主题和内容。我正在加载这样的测试：

```
$LAB.script('/static/tests.js') 
```

仍然不确定为什么会发生这种情况。

这是我的测试模块的示例：

```
module('Class Foo', {
  setup: function() {
    console.log('setup called');
  },
  teardown: function() {
    console.log('teardown called');
  }
});

test('Test1', function() {
  stop();
  console.log('test1');
  ok(true);
  start();
});

test('Test2', function() {
  stop();
  console.log('test2');
  ok(true);
  start();
});

test('Test3', function() {
  stop();
  console.log('test3');
  ok(true);
  start();
}); 
```

这会产生控制台输出（注意 setup 被调用了两次，然后不再）：

```
setup called
test1
teardown called
(2)setup called
test3
teardown called
test2
teardown called 
```

删除启动/停止，或修改我的测试文件以不以编程方式加载（即：使用传统标签）：

```
test('Test3', function() {
  console.log('test3');
  ok(true);
}); 
```

产生更预期的执行顺序：

```
setup called
test1
teardown called
setup called
test2
teardown called
setup called
test3
teardown called 
```

我是否误解了这应该如何运作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T05:28:58.437

看起来 QUnit 喜欢在启动时加载您的测试脚本。此操作是可配置的，因此我发现以下设置可以推迟 QUnit 启动，直到所有测试脚本都可用：

```
QUnit.config.autostart = false;
$LAB.script('/static/tests.js').wait(function() {
  QUnit.start();
}); 
```

我仍然不确定*为什么*会发生这种情况，所以有兴趣看到这方面的任何答案（或者当我弄清楚时我会更新这个！）但这个解决方案现在让我受益匪浅。

# vba - 更改.Caption时VBA用户窗体运行两次

> ID：11654788
> 
> 赞同：1
> 
> 时间：2012-07-25T16:53:37.797
> 
> 标签：vba, caption, userform, solidworks

我正在从 SolidWorks 运行 VBA 宏。该表单兼作两种类型文档的输入。在`UserForm.Initialize`子例程中，我`Caption`根据打开的文档类型更改用户窗体的名称。每当我这样做时，程序都会重新运行`UserForm.Initialize`，当它全部完成后，它会从它离开的地方继续，有效地运行两次。

有谁知道解决这种奇怪行为的方法？我尝试将命令放入它自己的 Sub 但结果是一样的。*`FormName`*`.Caption`

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T17:53:33.957

我无法复制这个问题，我不知道 SolidWorks 是什么，所以这可能与它有关。也许您可以发布一个虚构的示例，显示 Initialize 被调用了两次。

我的猜测是它与自动实例化变量有关。当您使用 UserForm1 时，您正在实例化一个名为 UserForm1 的对象变量，它指向一个也称为 UserForm1 的对象。这类似于在 Dim 语句中使用 New 关键字。您从未定义过 UserForm1（变量），但 VBA 定义了，并且在您第一次使用它时，它会自动实例化。

在用户表单类模块中工作时，您应该尝试使用 Me 关键字（用户表单是与其他对象一样的类，只是它们具有用户界面元素）。在初始化事件中，说

```
Me.Caption = "blah" 
```

代替

```
UserForm1.Caption = "blah" 
```

可能（只是我无法证明的一个理论）在您更改 Caption 属性时，设置为“我指向一个真实实例”的标志并未设置，并且通过使用自动实例化变量 UserForm1，您正在强制另一个实例化。

更好的是，不要使用自动实例化变量，尽管它们很方便（也不要在 Dim 语句中使用 New 关键字）。您可以控制何时创建和销毁变量，这是最佳实践。标准模块中的类似内容

```
Sub uftst()

    Dim uf As UserForm1

    Set uf = New UserForm1 'you control instantiation here

    'Now you can change properties before you show it
    uf.Caption = "blech"
    uf.Show

    Set uf = Nothing 'overkill, but you control destruction here

End Sub 
```

请注意，如果 ShowModal 属性设置为 False，则代码将继续执行，因此在无模式运行时不要破坏该变量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T03:37:20.793

正如 Dick 建议的那样，您应该能够通过确保使用 me.caption 而不是 Userform1.caption 来阻止该行为。

这是一种可以为好奇的人复制问题的方法：

创建一个用户表单 (Userform1) 确保将 ShowModal 设置为 false，否则您将无法看到。

在模块中添加以下内容：

```
Option Explicit
Sub ShowUserForm()
    Dim uf As UserForm1
    Set uf = New UserForm1
End Sub 
```

在 UserForm1 中列出以下代码：

```
Option Explicit
Private Sub UserForm_Initialize()
    UserForm1.Caption = "I'm UserForm1!" 'This will call the Initialize method of Userform1 not Me.
    Me.Caption = "I'm Me!" 
    Me.Show
End Sub 
```

运行 ShowUserForm。您现在有两个具有不同标题的用户窗体。

顺便说一句，如果您有一个像我显示的 Initialize 方法，添加`Set uf = Nothing`到 ShowUserForm 子实际上无法关闭任一表单。

# java - 以原子方式将第一个元素添加到 ConcurrentLinkedQueue

> ID：11654794
> 
> 赞同：3
> 
> 时间：2012-07-25T16:53:52.853
> 
> 标签：java, multithreading, concurrency, lock-free

我想以原子[无锁方式使用](http://en.wikipedia.org/wiki/Non-blocking_algorithm)[ConcurrentLinkedQueue](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html)：

几个并发线程将事件推送到队列中，其他一些线程将处理它们。队列未绑定，我不希望任何线程等待或被锁定。然而，阅读部分可能会注意到队列变空了。在无锁实现中，读取线程不能阻塞，而只会结束其任务并继续执行其他任务（即作为 ExecutorService）。因此，将第一个新事件推入空队列的写入者必须意识到它并应该重新启动读取器（即通过向 ExecutorService 提交新的 Runnable）来处理队列。提交第二个或第三个事件的任何其他线程都不会关心，因为它们可能会假设某些读者已经准备/提交。

不幸的是，ConcurrentLinkedQueue 的[add()](http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentLinkedQueue.html#add%28E%29)方法总是返回 true。在添加事件之前或之后询问队列是否 isEmpty() 将无济于事，因为它不是原子的。我应该使用一些额外的 AtomicInteger 来监控队列大小（）还是有一些更智能的解决方案？

迪特。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:22:01.213

我不太明白你为什么不`ExecutorService`直接使用它。它在`BlockingQueue`内部使用 a 并处理所有信令本身。

```
// open ended thread pool
ExecutorService threadPool = Executors.newFixedThreadPool(1);
for (Job job : jobsToDo) {
    threadPool.submit(new MyJobProcessor(job));
} 
```

除非您有充分的理由，否则我不会自己重写相同的逻辑。

如果您试图以某种方式使用休眠线程，我强烈建议您不要打扰。线程相对便宜，因此分配一个线程来处理您的排队任务很好。重复使用线程是不必要的，对我来说似乎是过早的优化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-26T02:45:38.987

使用 of`AtomicInteger`来解决提交争用比锁定或`synchronized`阻塞更有效。

*   这是[一个如何使用 Java 实现的示例](https://github.com/functionaljava/functionaljava/blob/master/core/src/main/java/fj/control/parallel/Actor.java)。

*   与 ConcurrentLinkedQueue 相比[，多生产者/单写者队列](https://github.com/plokhotnyuk/actors/blob/master/src/main/scala/com/github/plokhotnyuk/actors/MPSCQueue.scala)也有更有效的结构。

*   [将其用于演员实现的示例](https://github.com/plokhotnyuk/actors/blob/master/src/main/scala/com/github/plokhotnyuk/actors/ThreadBasedActor.scala)。

*   [另一个例子](https://github.com/plokhotnyuk/actors/blob/master/src/main/scala/com/github/plokhotnyuk/actors/Actor2.scala)。

# sql - 使用 ssis 将表和部分表从一个数据库移动到另一个数据库

> ID：11654798
> 
> 赞同：1
> 
> 时间：2012-07-25T16:54:05.753
> 
> 标签：sql, sql-server, database, ssis

我目前正在使用一个设计不良且管道缓慢的数据库，所以我决定复制数据库的一小部分（15 个表），并且只带入其中一些表，例如我只想带上具有特定属性的行ID。但这不是一次性的，我需要将添加到旧数据库中的所有内容每小时添加到新数据库中。我的研究把我带到了 SSIS，它可能有办法做到这一点，但我没有找到明确的例子来说明它是如何完成的，如果实际上它是可能的。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:12:01.513

对的，这是可能的 。您可以通过 sql 代理安排您的 ssis 包按小时运行。

对于一个表，你可以将一个数据流任务拖到控制流上。在DFT内部，你需要放置一个oledb源组件，查找，数据转换（如果源表和目标表的类型不同）和Oledb目标。

`oledb Source component`：创建一个字符串类型的变量，并在表达式中编写您的 sql 查询以根据 ID 获取数据。现在在源组件中使用此变量。

`Lookup`：您需要选择您的源表，并从源表和目标表中组合主键列。它的作用类似于内部连接查询。组合两个表中的主键后，从源中选择您需要的列。

`Oledb destination`：只需选择您的目标表并映射来自的列`Lookup no matched output`。如果您需要更新源中的值，然后使用`Lookup matched output`并将其连接到执行 SQL 任务并编写更新查询。

请通过[SSIS 包的](http://decipherinfosys.wordpress.com/2008/09/17/scheduling-ssis-packages-with-sql-server-agent/)[链接](http://www.julian-kuiters.id.au/article.php/ssis-lookup-with-range)和[SO Scheduling](https://stackoverflow.com/questions/1155804/ssis-performing-a-lookup-on-another-table-to-get-related-column)

# c# - 在控制台应用程序中创建 Visual Studio 宏

> ID：11654811
> 
> 赞同：0
> 
> 时间：2012-07-25T16:55:03.810
> 
> 标签：c#, envdte, visual-studio-macros

我想在 C# 中创建 Visual Studio 宏。我现在要做的是在类库中创建宏，然后从 vba 执行它们。问题是我无法调试宏，因为我无法从 vba 进入 dll。

无论如何，我想在控制台应用程序中创建用于调试目的的宏。一旦我知道它有效，我将把它放在 dll 上。

到目前为止，这是我的代码：

```
class Program
{        
    static void Main( string[] args )
    {            
        EnvDTE80.DTE2 MyDte;
        MyDte = (EnvDTE80.DTE2)System.Runtime.InteropServices.Marshal.GetActiveObject( "VisualStudio.DTE.10.0" );
        Console.WriteLine( "The Edition is " + MyDte.Edition );

        Console.ReadLine( );

        Console.Write( MyDte.ActiveDocument.Selection.Text );

        Console.Read( );                                                                           
    }

} 
```

注意我添加了 Visual Studio 宏使用的引用：

![在此处输入图像描述](../Images/879c1bf3ed535b97bc6157ffe16d7c7d.png)

* * *

## 编辑

也许我得到了一个异常，因为我正在尝试修改我当前正在调试的文档。如果我能设法获得视觉工作室文档的第二个实例（未调试的文档）的 dte，我也许能够解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:07:19.053

您是否看过这篇 SO 文章：[一个简单的 C# DLL - 如何从 Excel、Access、VBA、VB6 调用它？](https://stackoverflow.com/questions/1170794/a-simple-c-sharp-dll-how-do-i-call-it-from-excel-access-vba-vb6)

这两个答案，尤其是第二个，似乎在很大程度上解决了在 C# 中调用/测试 vba 脚本的问题。通过扩展，您可以引用 dll 并在控制台应用程序中使用消息框或类似方式来打印错误消息/结果等。

~乔尔

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-29T21:26:15.803

[这个答案](https://stackoverflow.com/a/11713078/637142)应该使您能够在任何类型的应用程序中以任何编程语言创建 Visual Studio 宏。我正在使用链接上的 ide 类在 wpf 应用程序中创建一个：

[https://stackoverflow.com/a/11713078/637142](https://stackoverflow.com/a/11713078/637142)

# c# - 从 MVVM 和 Caliburn.Micro 中的代码打开 UserControl

> ID：11654818
> 
> 赞同：0
> 
> 时间：2012-07-25T16:55:17.410
> 
> 标签：c#, wpf, events, mvvm, caliburn.micro

好的，所以我将微软拖放应用程序嵌入到 WPF 应用程序中。拖放功能在 ViewModel 中很难实现，所以我在后面的代码中有它。但是现在我需要从后面的代码中打开一个 UserControl 弹出窗口。我的尝试是从后面的代码中调用 ViewModel 中的一个方法来尝试发布一个新的窗口事件。不幸的是，由于未分配的 IEventAggregator，我得到了一个空引用。由于我使用的是 Caliburn.Micro，因此进入 ViewModel 是当务之急，我想让事件发布。

总而言之，我如何从后面的代码中发布 ViewModel 中的事件（而不在 IEventAggregator 上获得空引用）？

代码背后：

```
public partial class SomeView : System.Windows.Controls.UserControl
{
    IEventAggregator events;
    _model = new SomeViewModel();
 ....

    private void ShapeDoubleClick(object sender, AxMicrosoft.Office.Interop.VisOcx.EVisOcx_MouseUpEvent e)
    {
        if (App.VisioControl.Document.Application.ActiveWindow.Selection.Count > 0)
        {
            _model.PublishEvent(events);
        }
    } 
```

一些视图模型：

```
 public void PublishEvent(IEventAggregator events)
    {
        events.Publish(new NewWindowEvent("SomeOtherViewModel"));
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T14:54:34.130

我必须将 EventAggregator 放入后面的代码中并将其传递给 ViewModel 以启动 NewWindow 事件。我最终在 CM 中使用了 IoC 调用。

IEventAggregator 即 = IoC.Get<IEventAggregator>();

# .net - Tic Tac Toe Visual basic 未正确比较按钮文本

> ID：11654820
> 
> 赞同：1
> 
> 时间：2012-07-25T16:55:19.780
> 
> 标签：.net, vb.net

我正在尝试用 9 个按钮编写一个简单的井字游戏。当我单击任何按钮时，我会看到一个带有 WIN 对话框的消息框。尽管此消息框仅在出现 WIN CASE 时才显示。问题在于它没有正确比较 Button.Text 值。

最初 All 按钮的 TEXT 属性为空。单击时，我将他们的 TEXT 设置为“x”或“0”，视情况而定。这假设可以正常工作，但无法弄清楚为什么它没有将新分配的`clicked`按钮文本与其他按钮的文本进行比较。

这是我的代码

```
Public Class Form1
Dim count As Int32 = 0
Private Sub Form1_Load(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles MyBase.Load

End Sub
Sub checkwin()
    If Button1.Text = Button2.Text And Button2.Text = Button3.Text Then

        MessageBox.Show(Button1.Text & "wins")
        Call reset()

    ElseIf Button4.Text = Button5.Text And Button5.Text = Button6.Text Then
        MessageBox.Show(Button4.Text & "wins")
        Call reset()

    ElseIf Button7.Text = Button8.Text And Button8.Text = Button9.Text Then
        MessageBox.Show(Button7.Text & "wins")
        Call reset()
    ElseIf Button1.Text = Button4.Text And Button4.Text = Button7.Text Then
        MessageBox.Show(Button1.Text & "wins")
        Call reset()

    ElseIf Button2.Text = Button5.Text And Button5.Text = Button8.Text Then
        MessageBox.Show(Button2.Text & "wins")
        Call reset()
    ElseIf Button3.Text = Button6.Text And Button6.Text = Button9.Text Then
        MessageBox.Show(Button3.Text & "wins")
        Call reset()
    ElseIf Button1.Text = Button5.Text And Button5.Text = Button9.Text Then
        MessageBox.Show(Button1.Text & "wins")
        Call reset()

    ElseIf Button3.Text = Button5.Text And Button5.Text = Button7.Text Then
        MessageBox.Show(Button3.Text & "wins")
        Call reset()
    End If

End Sub

Sub reset()
   For Each b as Button  in Controls

        b.Text = " "
        b.Enabled = True

    Next

End Sub
Private Sub Button1_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles Button1.Click, Button2.Click, Button3.Click, Button4.Click, Button5.Click, Button6.Click, Button7.Click, Button8.Click, Button9.Click
    If sender Is Button1 Then
        count = count + 1
        If count Mod 2 = 0 Then
            Button1.Text = "0"

        Else
            Button1.Text = "x"
        End If

        Button1.Enabled = False
        Call checkwin()
    End If

    If sender Is Button2 Then
        count = count + 1
        If count Mod 2 = 0 Then
            Button2.Text = "0"
        Else
            Button2.Text = "x"
        End If

        Button2.Enabled = False
        Call checkwin()
    End If

    If sender Is Button3 Then
        count = count + 1
        If count Mod 2 = 0 Then
            Button3.Text = "0"
        Else
            Button3.Text = "x"
        End If

        Button3.Enabled = False
        Call checkwin()

    End If
    If sender Is Button4 Then
        count = count + 1
        If count Mod 2 = 0 Then
            Button4.Text = "0"

        Else
            Button4.Text = "x"
        End If

        Button4.Enabled = False
        Call checkwin()
    End If
    If sender Is Button5 Then
        count = count + 1
        If count Mod 2 = 0 Then
            Button5.Text = "0"

        Else
            Button5.Text = "x"
        End If

        Button5.Enabled = False
        Call checkwin()
    End If

    If sender Is Button6 Then
        count = count + 1
        If count Mod 2 = 0 Then
            Button6.Text = "0"

        Else
            Button6.Text = "x"
        End If

        Button6.Enabled = False
        Call checkwin()
    End If

    If sender Is Button7 Then
        count = count + 1
        If count Mod 2 = 0 Then
            Button7.Text = "0"

        Else
            Button7.Text = "x"
        End If

        Button7.Enabled = False
        Call checkwin()
    End If

    If sender Is Button8 Then
        count = count + 1
        If count Mod 2 = 0 Then
            Button8.Text = "0"

        Else
            Button8.Text = "x"
        End If

        Button8.Enabled = False
        Call checkwin()
    End If

    If sender Is Button9 Then
        count = count + 1
        If count Mod 2 = 0 Then
            Button9.Text = "0"

        Else
            Button9.Text = "x"
        End If

        Button9.Enabled = False
        Call checkwin()
    End If

End Sub
End Class 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:41:52.357

您没有消除`checkWin`子`If`语句中未使用的按钮。您还应该使用短路比较来避免不必要的处理。所以，第一个`If`语句看起来像这样：

```
If Not Button1.Enabled AndAlso Not Button2.Enabled AndAlso Not Button3.Enabled AndAlso _
            (Button1.Text = Button2.Text) AndAlso (Button2.Text = Button3.Text) Then
    ...
ElseIf Not Button4.Enabled ... 'etc. 
```

哦，`If`您的按钮单击事件中的所有这些块都是不必要的。只需使用 sender 对象，如下所示：

```
Private Sub Button1_Click(sender As System.Object, e As System.EventArgs) _
    Handles Button1.Click, Button2.Click, Button3.Click, Button4.Click, Button5.Click,
            Button6.Click, Button7.Click, Button8.Click, Button9.Click
    sender.Text = If(clickCount Mod 2 = 0, "X", "O")
    sender.Enabled = False
    clickCount += 1
    CheckWin()
End Sub 
```

**编辑**（在评论中要求）
为了避免 CheckWin 子中的重复比较代码，您可以将工作外包给一个函数。这样比较代码只写一次，因此更不容易出错并且更容易阅读。我会做这样的事情：

```
Private Sub CheckWin()
    If LineWins(Button1, Button2, Button3) OrElse _
       LineWins(Button4, Button5, Button6) OrElse _
       LineWins(Button7, Button8, Button9) OrElse _
       LineWins(Button1, Button4, Button7) OrElse _
       LineWins(Button2, Button5, Button8) OrElse _
       LineWins(Button3, Button6, Button9) OrElse _
       LineWins(Button1, Button5, Button9) OrElse _
       LineWins(Button3, Button5, Button7) Then ResetGame()
End Sub

Private Function LineWins(b1 As Button, b2 As Button, b3 As Button) As Boolean
    LineWins = CBool(Not b1.Enabled AndAlso Not b2.Enabled AndAlso Not b3.Enabled _
                 AndAlso (b1.Text = b2.Text) AndAlso (b2.Text = b3.Text))
    If LineWins Then MessageBox.Show(b1.Text & " wins")
End Function 
```

顺便说一句，您可能会注意到我已将“reset”重命名为“ResetGame”——我建议您这样做，因为[`Reset`](http://msdn.microsoft.com/en-us/library/microsoft.visualbasic.filesystem.reset.aspx)它已分配给 .NET`FileSystem`方法。

# entity-framework - “无法创建类型的常量值 .. 仅支持原始类型 ..'' 在 EF 查询中？

> ID：11654822
> 
> 赞同：3
> 
> 时间：2012-07-25T16:55:27.757
> 
> 标签：entity-framework

我有一个解决这个问题的方法，但是如果有人能解释为什么会发生这种情况以及我将如何为我的解决方法不可行的大型数据集设计它，我将不胜感激。

完整的错误是：无法创建类型为“THPT_Razor.Models.WinType”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）。

我正在使用 EF v4.0。

注释行是有问题的代码，解决方法是“For循环”

先感谢您。

```
List<WinType> _atype = db.WinTypes.Where(wt => wt.IsWin == false).ToList();
List<WinType> _wtype = db.WinTypes.Where(wt => wt.IsWin == true).ToList();
string test = _wtype.Where(wt => wt.Value ==0).Select(wt => wt.Description).SingleOrDefault();
List<WinCheckDetails> wcd = db.Wins.Include("UserProfiles").Where(w => w.venueLogId == logid).Select(w => new WinCheckDetails
{
    //awarddesc = w.atypeid.HasValue ? _atype.Where( wt=> wt.Value == w.atypeid).Select(wt => wt.Description).SingleOrDefault():string.Empty,
    //windesc = _wtype.Where(wt => wt.Value == w.typeid).Select(wt => wt.Description).Single(),
    atypeid = w.atypeid,
    typeid = w.typeid,
    WinId = w.WinId,
    other = w.other,
    posterid = w.posterid,
    confirmed = w.confirmed,
    posttime = w.posttime,
    game = w.game,
    playerid = w.UserProfile.PlayerID,
    firstname = w.UserProfile.FirstName,
    lastname = w.UserProfile.LastName,
    fullname = w.UserProfile.FirstName + " " + w.UserProfile.LastName
}).OrderBy(o => o.game).ToList();
foreach (WinCheckDetails wc in wcd)
{
    wc.awarddesc = _atype.Where(wt => wt.Value == wc.atypeid).Select(wt => wt.Description).SingleOrDefault();
    wc.windesc = _wtype.Where(wt => wt.Value == wc.typeid).Select(wt => wt.Description).SingleOrDefault();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:38:01.177

`_atype`并且是*内存*`_wtype`中的列表，因为您正在应用查询。对于数据库查询，它们是*常*量值的集合，因为要在数据库中执行查询，它们必须作为它们在内存中的值传输到数据库服务器。EF 不支持将此类常量值或值集合从内存传输到数据库*，除非*它们是原始类型的值（例如）。这就是你得到异常的原因。`WinType` *`ToList()`**`int`***

 ***您是否尝试使用`_atype`and`_wtype`代替`IQueryable`列表：

```
IQueryable<WinType> _atype = db.WinTypes.Where(wt => !wt.IsWin);
IQueryable<WinType> _wtype = db.WinTypes.Where(wt => wt.IsWin);

List<WinCheckDetails> wcd = db.Wins
    .Where(w => w.venueLogId == logid)
    .Select(w => new WinCheckDetails
    {
        awarddesc = w.atypeid.HasValue
            ? _atype.Where(wt=> wt.Value == w.atypeid)
                    .Select(wt => wt.Description).FirstOrDefault()
            : string.Empty,
        windesc = _wtype.Where(wt => wt.Value == w.typeid)
                        .Select(wt => wt.Description).FirstOrDefault(),

        // ... (unchanged)
    }).OrderBy(o => o.game).ToList(); 
```

我已经删除了 ，`Include`因为当您使用 执行投影时它无论如何都会被忽略`Select`。我也替换了`SingleOrDefault`and `Single`，`FirstOrDefault`因为投影中不支持两者（也不支持`First`），仅`FirstOrDefault`支持。

我不确定这是否可行。但它应该删除你的异常（但也许你会得到另一个......）。***

# jquery - 如何连接为老虎机游戏添加数字 html 输入值的事件

> ID：11654823
> 
> 赞同：1
> 
> 时间：2012-07-25T16:55:30.480
> 
> 标签：jquery

我正在尝试制作老虎机，而且我是编程新手，所以这对人们来说可能很容易解决。

当我尝试这个

```
var money = document.getElementsByName('money')[0].value;
var bet = document.getElementsByName('bet$')[0].value;

var winnings = Number(bet) + Number(money);
$('#money').val(winnings); 
```

它只让我赌输入的值是 10

我想将当前赌注添加到当前资金中，然后我希望在资金输入框中显示总和。

这是我的 HTML：

```
<div id="betbox">
  <button id="bet">Bet</button>
  <input type="number" id="bet$" name="bet$" value="10" />
</div>

<div id="moneybox">
  <input type="text" id="money" name="money" value="100" />
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:03:56.203

```
var current = $("#money"),
    bet = $("#bet$");

var updatedTotal = Number(current.val()) + Number(bet.val());
current.val(updatedTotal); 
```

关于选择器、事件、dom 操作等的文档都可以在这里找到。

[http://jquery.com/](http://jquery.com/)

为了更进一步，你可以这样写：

```
<div id="betbox">
     <button id="bet">Bet</button>
     <input type="number" id="bet$" name="bet$" value="10" />
</div>

<div id="moneybox">
     <input type="text" id="money" name="money" value="100" />
</div> 
```

然后您的脚本元素将如下所示：

```
<script type="text/javascript">
     $(function(){
          $("#bet").on("click",function(){
               var current = $("#money"),
                   bet = $("#bet$");

              var updatedTotal = Number(current.val()) + Number(bet.val());
              current.val(updatedTotal);

              FetchNextBet();
          });
     });

     function FetchNextBet()
     {
          var newBet = window.prompt("You win, please enter a new bet!");
          if(Number(newBet) > updatedTotal)
          {
                alert("You cannot bet more money than you have!");
                FetchNextBet();
          }
          else
          {
                bet.val(newBet);
          }
     }
</script> 
```

# ios - 如何在 iOS 上扭曲图像？

> ID：11654824
> 
> 赞同：1
> 
> 时间：2012-07-25T16:55:43.980
> 
> 标签：ios, uiimageview, uiimage

iOS中有没有办法像下一张图片一样扭曲中间的图像层？

原来的：

![原始图像](../Images/008ed9daa445b8f546825fe8990fd280.png)

扭曲：

![扭曲的图像](../Images/7a666603c332f7206d44066f7c6f80be.png)

# apache-commons-httpclient - httpclient.execute 错误：java.lang.reflect.InvocationTargetException

> ID：11654834
> 
> 赞同：1
> 
> 时间：2012-07-25T16:56:37.703
> 
> 标签：apache-commons-httpclient, sup

我正在做一个 SUP MBO 项目。我正在尝试使用结果集过滤器来自定义我的 MBO。在那个类中，我需要 http 获取一些东西并根据反馈自定义 MBO 行。我使用 SUP2.1.2 的 MobileSDK 并尝试预览结果集。我启用了调试，可以看到控制台的输出。

更改后的结果集过滤器代码片段如下所示：

@覆盖

公共 ResultSet 过滤器（ResultSet in，Map arg1）

```
 throws Exception {
DefaultHttpClient httpclient = new DefaultHttpClient();
HttpGet httpGet = new HttpGet("www.google.com");
HttpResponse response1 = httpclient.execute(httpGet);
httpGet.releaseConnection();
return in; 
```

}

每次调用 httpclient.execute(httpGet) 时，都会抛出一个异常，如下所示：

00:06:42 [ERROR] [ExecuteSection]：执行错误

java.lang.reflect.InvocationTargetException

```
at org.eclipse.jface.operation.ModalContext.run(ModalContext.java:421)
at org.eclipse.jface.dialogs.ProgressMonitorDialog.run(ProgressMonitorDialog.java:507)
at com.sybase.uep.tooling.ui.dialogs.preview.ExecuteSection.execute(ExecuteSection.java:227)
... 
```

原因：java.lang.VerifyError：无法从最终类继承

```
at java.lang.ClassLoader.defineClass1(Native Method)

at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
...
at com.sybase.uep.tooling.ui.dialogs.preview.ExecuteSection$4.run(ExecuteSection.java:207)
at org.eclipse.jface.operation.ModalContext$ModalContextThread.run(ModalContext.java:121) 
```

我尝试了不同的 httpclient jar 版本（包括 3.0.1、4.2），但总是失败。

有没有人有任何提示？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T04:40:55.037

[从这里](http://java.ittoolbox.com/groups/technical-functional/javaee-l/how-to-resolve-the-error-javalangreflectinvocationtargetexception-1698885)得到解决方案

* * *

你好，

通常，当 java 编译器在 2 个不同的包中发现 2 个具有相同名称的不同类时，会发生“java.lang.reflect.InvocationTargetException”。当您一次导入两个类并且尝试创建该类的对象时，它会抛出“java.lang.reflect.InvocationTargetException”异常。

解决方案是，当您创建类的对象时，还要使用包名和类名，以便编译器知道它必须使用哪个类。

# d3.js - 如何在 d3.svg.axis 中定义最大刻度数

> ID：11654836
> 
> 赞同：31
> 
> 时间：2012-07-25T16:56:40.930
> 
> 标签：d3.js

我的问题是我的标签`d3.svg.axis`有时会重叠。因此，我想将刻度和标签的最大数量减少到一定数量。

我似乎无法在[API 文档](https://github.com/mbostock/d3/wiki/SVG-Axes)中找到解决方案。

我不能使用`axis.tickValues()`，因为范围是动态的，可以从几个小时到几年。

我尝试过使用`axis.ticks(9)`，但似乎没有效果。您可以查看[bl.ocks.org/3181719](http://bl.ocks.org/3181719)上的示例。

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2012-07-26T03:03:18.687

这两个中的一个应该为你做。只需指定`axis.ticks(10)`以指定刻度线的数量或`axis.tickValues([1,2,4])`指定应出现的实际刻度线。

由于您使用的是日期，因此您需要执行以下操作：

```
 .ticks(d3.time.weeks, 2) 
```

[您可以在https://github.com/mbostock/d3/wiki/Time-Intervals](https://github.com/mbostock/d3/wiki/Time-Intervals)阅读有关时间间隔的更多信息。[您可以在http://bl.ocks.org/1962173](http://bl.ocks.org/1962173)上看到一个关于我如何执行此操作的示例，以根据显示的时间长度更新刻度。

```
if ((maxExtent - minExtent) > 1468800000) {
    x1DateAxis.ticks(d3.time.mondays, 1).tickFormat(d3.time.format('%a %d'))
    x1MonthAxis.ticks(d3.time.mondays, 1).tickFormat(d3.time.format('%b - Week %W'))        
}
else if ((maxExtent - minExtent) > 172800000) {
    x1DateAxis.ticks(d3.time.days, 1).tickFormat(d3.time.format('%a %d'))
    x1MonthAxis.ticks(d3.time.mondays, 1).tickFormat(d3.time.format('%b - Week %W'))
}
else {
    x1DateAxis.ticks(d3.time.hours, 4).tickFormat(d3.time.format('%I %p'))
    x1MonthAxis.ticks(d3.time.days, 1).tickFormat(d3.time.format('%b %e'))
} 
```

# java - 找不到方法的符号错误

> ID：11654840
> 
> 赞同：1
> 
> 时间：2012-07-25T16:56:50.790
> 
> 标签：java, file, passwords

我的代码有问题。我需要从 txtfile 读取数据。用户将输入他的用户名和密码，系统将检查存储在文本文件中的信息进行验证，一旦成功，他将登录。但我有一个错误，我不知道如何继续。

```
public class existingCustomers {

    String username, password;

    public existingCustomers() {
        Scanner input = new Scanner(System.in);

        System.out.println("Welcome to Kreg Hotel booking System");
        System.out.println("Please login.");
        System.out.println("==============================================");
        System.out.println("Username: ");
        username = input.nextLine();
        System.out.println("Password: ");
        password = input.nextLine();
        new userPassOk(username, password);
    }

    private boolean userPassOk(String user, String pass) throws FileNotFoundException {
        Scanner s = new Scanner(new File("customerinfo.txt"));
        username = user;
        password = pass;
        while (s.hasNextLine()) {
            String[] userPass = s.nextLine().split(":");
            if (userPass[0].equals(user) && userPass[1].equals(pass))
                return true;
        }
        return false;
    }
} 
```

我的错误是

```
C:\Users\MegaStore\Desktop\java testing\existingCustomers.java:18: error: cannot find symbol
        new userPassOk(username,password);
            ^
  symbol:   class userPassOk
  location: class existingCustomers
1 error 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T16:59:28.173

`userPassOk`不是[类](http://docs.oracle.com/javase/tutorial/java/javaOO/index.html)，是[方法](http://docs.oracle.com/javase/tutorial/java/javaOO/methods.html)；所以你不应该通过使用来调用它`new`。

由于它返回 a `boolean`，因此您需要在条件中使用它，如下所示：

```
if(userPassOk(username, password))
{
  // My logic here!
} else {
  // No entry for you!
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:00:48.097

编译错误告诉你问题出在哪里，就在第 18 行。

你有`new userPassOk`

`userPassOk`不是一个类，它是一个方法。删除新的，它会编译。

它不会**工作**，但它会编译......

# php - SQL Join 语句收集用户的朋友和用户的消息

> ID：11654843
> 
> 赞同：2
> 
> 时间：2012-07-25T16:57:01.733
> 
> 标签：php, mysql, sql, pdo

我有 3 个表：消息、用户和朋友。

```
Messages: msg_id, uid_fk, message, alert, created, uploads, owner
Users: uid, first_name, last_name
Friends: friend_one, friend_one 
```

当一个用户与另一个用户成为朋友时，我以以下方式记录他们的 uid：friend_one:172friend_two:58 | friend_one: 58 friend_two: 172 我下面的代码完美运行，并通过选择所有用户的消息更新。我的问题是我不仅需要选择用户自己的所有消息，还需要选择他或她的所有朋友消息。

上面提到的以下内容仅选择用户的状态更新，我一直在努力选择用户的状态更新以及他或她的朋友。

```
$query = $db->prepare("SELECT M.msg_id, M.uid_fk, M.message, M.alert, 
M.created, M.uploads , M.owner , U.uid , U.first_name , U.last_name FROM 
messages M, users U  WHERE M.uid_fk=U.uid and M.uid_fk= :uid_fk limit 10");
$query->execute(array(':uid_fk' => $uid)); 
```

（$uid 是登录用户的会话 ID）

还有我选择朋友的代码以防万一：

```
$friends_sql = $db->prepare("SELECT a.first_name, a.uid, a.last_name FROM users 
a, friends b WHERE a.uid = b.friend_two AND b.friend_one = :friend_one ORDER BY 
b.friend_id DESC LIMIT 8");
$friends_sql->execute(array(':friend_one' => $uid)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:16:36.150

以下应返回用户和用户朋友的最近 10 条消息。

```
SELECT 
    M.msg_id, 
    M.uid_fk, 
    M.message, 
    M.alert, 
    M.created, 
    M.uploads, 
    M.owner, 
    U.uid, 
    U.first_name, 
    U.last_name 
FROM 
    users u 
    JOIN messages m ON m.uid_fk = u.uid
WHERE
    u.uid = :uid
    OR u.uid IN (
        SELECT f.friend_two
        FROM friends f
        WHERE f.friend_one = :uid
    )
ORDER BY m.created DESC
LIMIT 10 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:07:52.750

用于选择状态更新的 SQL 查询会查找用户 ID 是给定的单个值（即用户的用户 ID 的值）的所有更新。

相反，要求它在用户 ID 列表中查找所有更新：

```
$query = $db->prepare("SELECT M.msg_id, M.uid_fk, M.message, M.alert, 
M.created, M.uploads , M.owner , U.uid , U.first_name , U.last_name FROM 
messages M, users U  WHERE M.uid_fk=U.uid and (M.uid_fk IN ( 
    SELECT friend_two FROM friends WHERE friend_one = :uid_fk
) OR M.uid_fk = :uid_fk ) limit 10");
$query->execute(array(':uid_fk' => $uid)); 
```

或者...

```
$query = $db->prepare("SELECT M.msg_id, M.uid_fk, M.message, M.alert, 
M.created, M.uploads , M.owner , U.uid , U.first_name , U.last_name FROM 
messages M, users U  WHERE M.uid_fk=U.uid and M.uid_fk IN ( 
    (SELECT :uid_fk) UNION 
    (SELECT friend_two FROM friends WHERE friend_one = :uid_fk)
) limit 10");
$query->execute(array(':uid_fk' => $uid)); 
```

# ios - 更改 UITableView.Frame 时出错

> ID：11654854
> 
> 赞同：0
> 
> 时间：2012-07-25T16:57:37.607
> 
> 标签：ios, ios4

我有一个`UITableView`在屏幕最初加载并位于`(0,44)`. 执行操作后，表格会重新加载，并且需要将框架调整为全屏`(0,0)`。

当我跑

```
self.table.frame = CGRectMake(0, 0, self.table.frame.size.width, self.table.frame.size.height + 44); 
```

我收到此错误： `'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 4 beyond bounds for empty array'`

我还注意到，如果我硬编码高度值 fo`358`或更低，代码将运行，但如果它`359`或更高，我会得到相同的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:12:16.953

错误消息表明您超出了数组的范围，因此请检查您的 UITableViewDataSource 和 UITableViewDelegate 方法的每个部分，了解您访问数组的位置，看看它们是否会导致问题。使用断点和 NSLog() 查看崩溃发生的位置。

如果我是你，我会先看`tableView:cellForRowAtIndexPath:`. 我会在那里某处有一条线从数组中拉出一个项目，而无需先检查数组是否有那么多项目。当您的表格位于较小的框架中时，它显示的行数较少，因此您还没有超出界限。然后，当您增加框架时，表格将尝试显示比数组中的元素更多的行，从而导致崩溃。

# javascript - 如何在javascript中执行html标签

> ID：11654860
> 
> 赞同：-1
> 
> 时间：2012-07-25T16:57:50.627
> 
> 标签：javascript

我的数据库通过在尖括号内插入命令来调用某些函数。即<#SUBMIT title="Request Report"> 将创建一个按钮，将表单（标准）数据提交给引擎进行报告。

在单击该按钮之前，我想检查一些日期条件，因此我在文档中插入了一个图像链接，该链接调用了我的 javascript 代码。如果满足所有条件，我希望它运行/单击上面的按钮。这是我的代码，在 <#submit> 部分之前一切正常。任何建议将不胜感激。

```
function checkdate() {

    var currentTime = new Date();
    var startdate = document.forms[0].datescopestart.value;
    var startdate2 = startdate.split("/");
    var startdate3 = new Date(startdate2[2], startdate2[1] - 1, startdate2[0]);
    var totaldays = ((currentTime - startdate3) / 86400000);

    if (totaldays > 100) {

        alert("You can only choose a start date within the last 100 days")
    } else if (startdate == "") {
        alert("You cannot leave the start date blank")
    } else {
        ("<#SUBMIT>")
    }
} 
```

***编辑*** 呈现的 <#Submit> 按钮背后的源代码是：

```
<input type=button value="Request Report" class=button onclick="showhide('reportbutton');selectAll(document.forms[0].customfieldexp);selectAll(document.forms[0].user);document.forms[0].submit()"> 
```

我不确定如何将其合并到 javascript 中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:12:06.320

您希望执行响应按钮的 click() 事件而执行的相同代码。所以你需要编写这样的代码（它是重复的并且有点脆弱，但是你使用的框架并没有给你太多的回旋余地）：

```
if (totaldays > 100) {
    alert("You can only choose a start date within the last 100 days");
} else if (startdate == "") {
    alert("You cannot leave the start date blank");
} else {
    showhide('reportbutton');
    selectAll(document.forms[0].customfieldexp);
    selectAll(document.forms[0].user);
    document.forms[0].submit();
} 
```

我不知道 showhide() 和 selectAll() 做了什么，因此您可能想探索代码以了解它们如何成为提交的一部分，正如您的框架所建立的那样。

样式说明：JavaScript 解释器会自动在行尾提供一个以语句结尾的分号，但依赖它并不是一个好习惯。明确编码您的半成品。

# mono - 无效的 IL 代码 IL_0038：MonoTouch 中的 newobj

> ID：11654865
> 
> 赞同：3
> 
> 时间：2012-07-25T16:58:15.893
> 
> 标签：mono, xamarin.ios, interop, il

在 MonoTouch 下，以下代码行编译，但生成 InvalidProgramException：

```
var bytes = new byte[,]{}; 
```

**System.InvalidProgramException**
`Invalid IL code in Foo: IL_0038: newobj 0x0a000012`

但是，以下操作在运行时不会失败：

```
var bytes = new byte[,]{{}}; 
```

我可以使用第二个表达式。但是，第一个有什么问题吗？如果是这样，它不应该编译失败吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-07-25T18:12:52.453

这看起来像是 MonoTouch 中 C# 编译器中的一个错误，它错误地编译了表达式。

如果我尝试使用较新的 C# 编译器（来自 Mono 2.12），则表达式会正确编译并且生成的程序可以工作。

目前的计划是 MonoTouch 在今年秋天晚些时候开始使用 Mono 2.12，如果它对你来说是一个障碍，你可以[打开一个错误报告](http://bugzilla.xamarin.com)，看看修复是否可以使它成为 MonoTouch 的早期版本。

# c# - Java Web 服务使用 .Net

> ID：11654867
> 
> 赞同：3
> 
> 时间：2012-07-25T16:58:27.577
> 
> 标签：c#, java, asp.net, web-services

**我通过右键单击并添加服务引用将 java Web 服务消耗到我的 asp.net 项目中。**

`public static salim.HakedisServiceClient ws = new salim.HakedisServiceClient("HakedisServiceImplPort"); ws.ClientCredentials.UserName.UserName = "****"; ws.ClientCredentials.UserName.Password = "****"; var lstCities = ws.getCities();`

但它有一个例外：

System.ServiceModel.FaultException :{"Fault occurred while processing."} 服务器堆栈跟踪：在 System.ServiceModel.Channels.ServiceChannel.HandleReply(ProxyOperationRuntime operation, ProxyRpc& rpc) at System.ServiceModel.Channels.ServiceChannel.Call(String action,布尔单程，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出，TimeSpan 超时）在 System.ServiceModel.Channels.ServiceChannel.Call（字符串操作，布尔单程，ProxyOperationRuntime 操作，Object[] 输入，Object[] 输出）在System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation) at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)

在 [0] 处重新抛出异常：在 System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData& msgData, Int32 type) 处的 System.Runtime.Remoting.Proxies.RealProxy.HandleReturnMessage(IMessage reqMsg, IMessage retMsg) 处。 getCities（getCities 请求）在 c:\Windows\Microsoft.NET\Framework\Temporary ASP.NET Files\website1\bdbbd757\4abd3cb7\App_WebReferences.mggi9qhe 中的 salim.HakedisServiceClient.salim.HakedisService.getCities（getCities 请求） .0.cs：第 1392 行，位于 c:\Windows\Microsoft.NET\Framework\v2.0.50727\Temporary ASP.NET Files\website1\bdbbd757\4abd3cb7\App_WebReferences.mggi9qhe.0.cs 中的 salim.HakedisServiceClient.getCities() :c:\Users\htsapp\Documents\Visual Studio 2008\WebSites\WebSite1\Default.aspx.cs 中 _Default.Page_Load(Object sender, EventArgs e) 的第 1398 行：System.Web 的第 80 行。Util.CalliHelper.EventArgFunctionCaller(IntPtr fp, Object o, Object t, EventArgs e) at System.Web.Util.CalliEventHandlerDelegateProxy.Callback(Object sender, EventArgs e) at System.Web.UI.Control.OnLoad(EventArgs e) at System.Web.UI.Control.LoadRecursive() 在 System.Web.UI.Page.ProcessRequestMain（布尔 includeStagesBeforeAsyncPoint，布尔 includeStagesAfterAsyncPoint）

**和这样的网络服务：**

```
<wsdl:definitions name="Hakedis"    targetNamespace="http://hakedis.eventhandler.archibus.com/">
<wsdl:types></wsdl:types>
<wsdl:message name="getFloors"></wsdl:message>
<wsdl:message name="getRooms"></wsdl:message>
<wsdl:message name="getBuildingPropertiesResponse"></wsdl:message>
<wsdl:message name="getBuildingProperties"></wsdl:message>
<wsdl:message name="getBuildingTypes"></wsdl:message>
<wsdl:message name="getBuildingTypesResponse"></wsdl:message>
<wsdl:message name="getFloorsResponse"></wsdl:message>
<wsdl:message name="getRoomsResponse"></wsdl:message>
<wsdl:message name="getCities"></wsdl:message>
<wsdl:message name="getCitiesResponse"></wsdl:message>
<wsdl:message name="getBuildingsResponse"></wsdl:message>
<wsdl:message name="getBuildings"></wsdl:message>
<wsdl:portType name="HakedisService"></wsdl:portType>
<wsdl:binding name="HakedisSoapBinding" type="tns:HakedisService"></wsdl:binding>      <wsdl:service name="Hakedis"></wsdl:service></wsdl:definitions> 
```

有人有建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-27T12:12:21.067

尝试如下设置您的连接：

```
 HakedisServiceClient client = null;
            ChannelEndpointElement endpoint = null;

            ClientSection clientSection = ConfigurationManager.GetSection("system.serviceModel/client") as ClientSection;              
            ChannelEndpointElementCollection endpointCollection = clientSection.ElementInformation.Properties[string.Empty].Value as ChannelEndpointElementCollection;
            foreach (ChannelEndpointElement endpointElement in endpointCollection)
            {
                if (endpointElement.Name == "BasicHttpBinding_HakedisService") //BasicHttpBinding_HakedisService from your  config file client endpoint  entries
                {
                    endpoint = endpointElement;
                }
            }

            if (endpoint != null)
            {

                BasicHttpBinding binding = new BasicHttpBinding(endpoint.Name);

                binding.SendTimeout = TimeSpan.FromMinutes(1); //Set all this as appropriate
                binding.OpenTimeout = TimeSpan.FromMinutes(1);
                binding.CloseTimeout = TimeSpan.FromMinutes(1);
                binding.ReceiveTimeout = TimeSpan.FromMinutes(10);
                binding.AllowCookies = false;
                binding.BypassProxyOnLocal = false;
                binding.HostNameComparisonMode = HostNameComparisonMode.StrongWildcard;
                binding.MessageEncoding = WSMessageEncoding.Text;
                binding.TextEncoding = System.Text.Encoding.UTF8;
                binding.TransferMode = TransferMode.Buffered;
                binding.UseDefaultWebProxy = true;
                binding.MaxBufferSize = 100000; //as large as needed
                binding.MaxReceivedMessageSize = 100000; //as large as needed
                binding.TextEncoding = Encoding.UTF8;

                System.ServiceModel.EndpointAddress address = new System.ServiceModel.EndpointAddress(endpoint.Address.AbsoluteUri);
                SSLAccessPolicy.AllowSSLConnection();
                client = new HakedisServiceClient(binding, address);

                SSLAccessPolicy.AllowSSLConnection(); // only if ssl enabled
                client.Open(); // Now open the client socket. 
```

希望它有所帮助（您可以首先调试）。

# joomla - 创建组件时如何正确添加任务/操作

> ID：11654870
> 
> 赞同：0
> 
> 时间：2012-07-25T16:58:33.053
> 
> 标签：joomla, joomla2.5, joomla-component

我正在为 Joomla 2.5 的后端做我的第一个组件。第一部分没问题，我用通用控制器创建了一个组件，现在我在表格中显示所有元素

为此，我按照本[教程](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_07)进行操作，但现在我想添加编辑、新建和删除等操作。我遵循了本[教程](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5_-_Part_09)，但是当我单击编辑时，例如。我去一个白页。我的名字组件是`Busqueda`，我的表是`restaurantes`。

这是编辑动作模型/restaurante.php 的模型

```
class BusquedaModelRestaurante extends JModelAdmin{

    public function getTable($type= 'Restaurantes', $prefix='RestaurantesTable', $config=array()){
            return JTable::getInstance($type, $prefix, $config);
    }

    public function getForm($data = array(), $loadData = true){
        $form = $this->loadForm('com_busqueda.restaurante', 'restaurante', array('control' => 'jform', 'load_data' => $loadData));
        if (empty($form)) {
            return false;
        }
        return $form;
    }

    protected function loadFormData(){
        $data= JFactory::getApplication()->getUserState('com_busqueda.edit.restaurante.data', array());
        if(empty($data)){
            $data=$this->getItem();
        }
        return $data;
    }
} 
```

这是我的模型/表单/form.xml

```
<?xml version="1.0" encoding="utf-8"?>
<form>
    <fieldset>
        <field
            name="id"
            type="hidden"
        />
        <field name="nombre" type="text" class="inputbox"
            size="40" label="nombre"
            description="Nombre" />

        <field name="direccion" type="text" class="inputbox"
            size="40" label="direccion"
            description="Direccion" />

        ...

    </fieldset>
</form> 
```

在控制器/我有 restaurantes.php 和 restaurante.php。最后一个没有任何功能。最后在views/restaurante，我有view.html 和views/restaurante/tmpl/edit.php。

观点是：

```
class BusquedaViewRestaurante extends JView
{
    public function display($tpl = null)
    {
        $form = $this->get('Form');
        $item = $this->get('Item');

        // Check for errors.
        if (count($errors = $this->get('Errors'))) {
            JError::raiseError(500, implode("\n", $errors));
            return false;
        }

        $this->form =$form;
        $this->item =$item;

        $this->addToolbar();
        parent::display($tpl);
    }

    /**
     * Add the page title and toolbar.
     *
     * @since   1.6
     */
    protected function addToolbar()
    {
        $input =JFactory::getApplication()->input;
        $input->set('hidemainmenu', true);
        $isNew = ($this->item->id == 0);
        JToolBarHelper::title($isNew ? JText::_('NEW')
                                     : JText::_('EDIT'));
        JToolBarHelper::save('busqueda.save');
        JToolBarHelper::cancel('busqueda.cancel', $isNew ? 'JTOOLBAR_CANCEL'
                                                         : 'JTOOLBAR_CLOSE');               
    }
} 
```

在edit.php中

```
<form action="<?php echo JRoute::_('index.php?option=com_busqueda&layout=edit&id='.(int) $this->item->id); ?>" method="post" name="adminForm" id="restaurante-form" class="form-validate">
    <fieldset class="adminform">
        <legend><?php echo JText::_('DETALLES'); ?></legend>
        <ul class="adminformlist">
            <li><?php echo $this->form->getLabel('nombre'); ?>
            <?php echo $this->form->getInput('nombre'); ?></li>

            <li><?php echo $this->form->getLabel('direccion'); ?>
            <?php echo $this->form->getInput('direccion'); ?></li>

....

        </ul>
    </fieldset>
    <div>
        <input type="hidden" name="task" value="" />
        <?php echo JHtml::_('form.token'); ?>
    </div>  

</form> 
```

这与教程中出现的相同，但是当我单击编辑时，我会看到一个白页。

任何想法。我忘记做某事了。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-27T09:59:31.877

要查看可能出了什么问题，您需要在 php.ini 中启用 php 错误日志记录。当 php-xml 包过期时，我遇到了这个问题。在 php.ini 中，您可能需要添加/取消注释这些行

# 显示 PHP 错误

php_value error_reporting 6143 上的 php_flag display_errors

# 启用 PHP 错误记录

php_value error_log /Some_path/PHP_errors.log 上的 php_flag log_errors

# html - Accordion 无法从 jsp 脚本获取内部内容 (HTML)

> ID：11654872
> 
> 赞同：1
> 
> 时间：2012-07-25T16:58:33.760
> 
> 标签：html, ajax, jquery, accordion

当我单击按钮时，我正在编写获取手风琴内容的代码。使用 ajax 调用从服务器接收手风琴的内部内容。这些内容显示在对话框中。

现在的问题是内容（原本应该是手风琴内容）可以在对话框中看到为简单的 html 而不是手风琴（带有按钮）。如果我只是在 html 文件中使用相同的内容（将从服务器接收到的内容粘贴到“”中，它们工作正常，我可以在对话框中看到手风琴。

怎么了？是否与手风琴内容需要事先提供有关。任何人都可以提出解决此问题的方法。（手风琴的内容每次都会改变，这就是从服务器接收它们的原因）

Javascript函数是：

```
<script>
     $(document).ready(function() {
    $("#accordion").accordion({
    autoHeight: false
});
     </script>

<script language="javascript"> 

    function Faulttest() 
    {

    var xmlhttp;
    if (window.XMLHttpRequest)
    {xmlhttp=new XMLHttpRequest();}
    else
    {xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
    xmlhttp.onreadystatechange=function()
    {
    if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    Here we get the contents which should be inside the accordion which we receive from the server

> **document.getElementById("accordion").innerHTML=xmlhttp.responseText;**

    }
    }
    xmlhttp.open("GET","http://****/Anomalies/index.jsp",true);
    xmlhttp.send();
} 
```

页面的html内容是：

```
<body style="font-size:62.5%;"  >
        <div id="page">         
        <div id="header"><h1>header</h1></div>          
        <div id="body" >
            <h1>content top </h1>                       
        <div id="dia">
        <div id="dialog" title="Detailed FeedBack"><div id="accordion">

        // CODE SHOULD GO HERE

        </div>
            </div>
                </div>
   <button type="button" onclick="Faulttest();">Click Me!</button>  
  </body> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:11:13.650

在不确切知道手风琴脚本如何工作的情况下，我假设这是因为脚本假定`#accordion`初始化时的内容是脚本需要使用的内容。

如果您的实现可能，请将空`div`s 放入`#accordion`（或手风琴脚本为子节点指定的任何内容）中，然后动态填充它们。

否则，等待在`#accordion`节点上初始化手风琴，直到 AJAX 调用返回之后。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T20:13:21.170

实际上我们只需要销毁并重新创建手风琴。这可以通过以下方式完成：

```
$('#accordion').append(xmlhttp.responseText).accordion('destroy').accordion(); 
```

# c# - 获取正在执行的文件目录

> ID：11654874
> 
> 赞同：0
> 
> 时间：2012-07-25T16:58:40.120
> 
> 标签：c#

c# 中是否有一个命令可以接收当前正在运行的 aspx.cs 文件的目录？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:03:47.963

您可以使用[Directory.GetCurrentDirectory](http://msdn.microsoft.com/en-us/library/system.io.directory.getcurrentdirectory.aspx)方法

它获取应用程序的当前工作目录。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-25T17:05:16.887

```
var dir = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:00:50.497

尝试`Assembly.GetExecutingAssembly().Location`

# javascript - 在全屏 iOS Web 应用程序中部分禁用滚动反弹

> ID：11654875
> 
> 赞同：1
> 
> 时间：2012-07-25T16:58:52.583
> 
> 标签：javascript, html, css, mobile-safari

任何人都可以帮助解决以下问题吗？

我有一个简单的全屏 Web 应用程序（针对 iOS 和移动 safari），它包含一个标题和一个可滚动列表。

我已申请：

```
overflow: scroll;
-webkit-overflow-scrolling: touch; 
```

到可滚动元素，我应用了以下javascript：

```
document.addEventListener("touchmove", function (e) {
    e.preventDefault();
}, false);

var theWrapper = document.getElementById("wrapper");
theWrapper.ontouchmove = function(e){
  console.log(e);
  e.stopPropagation();
  e.stopImmediatePropagation();
    // e.preventDefault();
}; 
```

以防止发生滚动反弹。

这部分成功是因为如果您尝试从标题滚动，赠品网络应用程序反弹不会发生，但是如果您将列表滚动到其末端（即，在列表顶部时 scrollUp 或在底部时 scrollDown列表的）似乎滚动的东西冒了出来，整个应用程序滚动反弹。

我在 JS Bin 上做了一个演示，这样你就可以自己体验这种行为（对不起，仅限 iPhone/iPad - 它可以在桌面浏览器上正常工作*）：

[http://jsbin.com/opetom/4/](http://jsbin.com/opetom/4/)

将演示添加到您的 iPhone 主屏幕以获得最佳效果。

非常感谢您提供的任何帮助。这真的很令人沮丧，我相信这一定是一个普遍的问题。

*实际上，刚刚更新到 Mountain Lion 和最新的 Safari，行为与现在的移动 Safari 相同。如果您使用“触摸板上的两根手指滚动”，则相同。如果您在列表处于末端时尝试滚动，它会“反弹”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-02T16:16:15.657

我手头没有任何具有足够好的 webkit 的触摸设备，但是您是否尝试过添加“e.cancelBubble = true;”？

或者可以使用捕获和气泡阶段事件侦听器以及使用 stopPropagation 的组合来玩。

# java - 用其他方式破解单例

> ID：11654876
> 
> 赞同：2
> 
> 时间：2012-07-25T16:58:54.083
> 
> 标签：java

我正在研究单例，我开发了一个非常基本的单例类..

```
public class SingletonObject {
    private static SingletonObject ref;
    private SingletonObject () //private constructor
    { }

    public  static synchronized   SingletonObject getSingletonObject()
    {
        if (ref == null)
            ref = new SingletonObject();
                return ref;
        }

    public Object clone() throws CloneNotSupportedException
    {throw new CloneNotSupportedException ();
    }   
} 
```

现在下面是我破解单例的一种方法..

```
public class CrackingSingleton {

     public static void main(String[] args) throws ClassNotFoundException,
       IllegalArgumentException, SecurityException,
       InstantiationException, IllegalAccessException,
       InvocationTargetException {

        //First statement retrieves the Constructor object for private constructor of SimpleSingleton class.
        Constructor pvtConstructor = Class.forName("CrackingSingleton.SingletonObject").getDeclaredConstructors()[0];
        //Since the constructor retrieved is a private one, we need to set its accessibility to true.
        pvtConstructor.setAccessible(true);
        //Last statement invokes the private constructor and create a new instance of SimpleSingleton class.
         SingletonObject  notSingleton1 = ( SingletonObject) pvtConstructor.newInstance(null);
         System.out.println(notSingleton1.hashCode());
         System.out.println("notSingleton1 --->"+notSingleton1.toString());
         SingletonObject  notSingleton2 = ( SingletonObject) pvtConstructor.newInstance(null);
         System.out.println("notSingleton2 --->"+notSingleton2.hashCode());
         System.out.println(notSingleton2.toString());
    }
} 
```

请告知其他可以破解单例的方法..!!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T17:08:19.537

我能想到的三种方法是：

## 序列化

如果您的单例类是可序列化的，那么您可以序列化它的一个实例，然后将其反序列化并获取该类的第二个对象。

[您可以通过实现readResolve](http://docs.oracle.com/javase/7/docs/technotes/guides/serialization/examples/symbol/index3.html)方法来避免这种情况。

```
public class Singleton implements Serializable {
   private static final Singleton INSTANCE = new Singleton();

   public static Singleton getInstance(){
       return INSTANCE;
   }

   public Object readResolve() throws ObjectStreamException {
        return INSTANCE; //ensure singleton is returned upon deserialization.
   }
} 
```

## 类加载

同一个类可以由两个不同的类加载器加载，因此，您可以通过简单地`getInstance`在由两个不同的类加载器加载的类中调用其方法来创建单例类的两个实例。这种方法可以工作*，而不必诉诸于违反私有构造函数*。

```
ClassLoader cl1 = new URLClassLoader(new URL[]{"singleton.jar"}, null);
ClassLoader cl2 = new URLClassLoader(new URL[]{"singleton.jar"}, null);
Class<?> singClass1 = cl1.loadClass("hacking.Singleton");
Class<?> singClass2 = cl2.loadClass("hacking.Singleton");
//...
Method getInstance1 = singClass1.getDeclaredMethod("getInstance", ...);
Method getInstance2 = singClass2.getDeclaredMethod("getInstance", ...);
//...
Object singleton1 = getInstance1.invoke(null);
Object singleton2 = getInstance2.invoke(null); 
```

## 反射

正如您已经指出的那样，通过反射您可以创建该类的两个实例。我认为前面的例子只是相同方法的一种变体。但我相信您可以使用`SecurityManager`.

```
System.setSecurityManager(new SecurityManager()); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:05:11.410

如果您有两个类加载器，您将能够从*每个*类加载器创建一个单例。

文档[“什么时候是单例而不是单例”](http://java.sun.com/developer/technicalArticles/Programming/singletons/)也值得一读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:19:57.937

我的回答是：

为什么这有关系？

如果您正在尝试设计安全、不可破解的代码，那么单例不是解决方案。它旨在强制普通开发人员使用它的系统实例。所有这些绕过它的方法都需要大量额外的工作，而人们不会仅仅为了使用该类的不同实例而做这些工作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-02-01T06:10:26.550

在某些情况下，Singleton 的行为并不像。

1.如果Singleton Classes被Garbage Collection销毁，则重新加载。
2.多个虚拟机中的多个单
例 3.不同类加载器同时加载多个单例。
4经过序列化和反序列化的Singleton对象的副本

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-07-25T17:03:18.043

通过反射，设置`ref = null`. 通过将其重新分配为`null`，懒惰地构造单例的逻辑将在下一次调用 时再次触发`getSingletonObject`。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-07-25T17:08:47.693

您可以使用字节码工程库将单例构造函数公开。

此外，在一些较旧的 Java 版本中（这曾经在 1.3 中工作），您可以简单地创建一个具有相同名称的类，使用公共构造函数并针对该类进行编译。在运行时，这允许您创建真实类的实例（此漏洞已在以后的 JRE 版本中的字节码验证中修复）。

# jquery - jQuery ASP.NET 通过 CheckBox 标签的 innerHTML 在 CheckBoxList 中找到特定的 CheckBox

> ID：11654881
> 
> 赞同：3
> 
> 时间：2012-07-25T16:59:13.893
> 
> 标签：jquery, asp.net

我有一个 ASP.NET CheckBoxList：

```
<asp:CheckBoxList ID="CheckBoxList1" runat="server" Width="10%">
    <asp:ListItem Selected="True" Value="1">White</asp:ListItem>
    <asp:ListItem Selected="False" Value="2">Black</asp:ListItem>
    <asp:ListItem Value="3">Red</asp:ListItem>
    <asp:ListItem Value="4">Green</asp:ListItem>
    <asp:ListItem Value="5">Blue</asp:ListItem>
</asp:CheckBoxList> 
```

我需要修改/删除 CheckBoxList 中特定 CheckBox 的特定标签：

以下代码适用于 CheckBox 值，但不适用于 CheckBox 标签。

```
var CheckBoxListInputValue = 3; //value may be dynamic
var CheckBoxListInputInnerHTML = "Red"; //value may be dynamic
$("#CheckBoxList1 label[innerHTML =" + CheckBoxListInputInnerHTML + "]").remove(); //Not working
$("#CheckBoxList1 :input[value = " + CheckBoxListInputValue + "]").remove(); //Working 
```

顺便说一句，我不想​​使用任何 for 循环。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T19:03:40.737

asp.net 从您的复选框列表中生成一个表，为了删除一个选项，您必须实际删除一个 TR。以下代码删除示例中的 Red 选项，然后您可以使用动态值更改 Red

```
 $('#CheckBoxList1 label').each(function () {
        if ($(this).text() == 'Red') {
            $(this).closest('tr').remove();
            return false;
        }
    }); 
```

[在这里测试](http://jsfiddle.net/wDWst/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:09:31.940

你可以使用`:contains`选择器：

```
$("#CheckBoxList1 label:contains(" + CheckBoxListInputInnerHTML + ")").remove(); 
```

[请注意，`:input`选择器已*弃用*，您可以`input`改用。]

# c# - 显示帖子我控制台窗口，并在另一个程序中捕获相同的消息

> ID：11654882
> 
> 赞同：1
> 
> 时间：2012-07-25T16:59:13.743
> 
> 标签：c#

我正在尝试在另一个程序（案例 2）中捕获进程（案例 1）的信息输出。

我目前的代码是：

```
ProcessStartInfo si = new ProcessStartInfo();
si.FileName = caminhoExecutavel;
si.UseShellExecute = false;
si.RedirectStandardOutput = true;
si.CreateNoWindow = false;

//executo o processo
processo = System.Diagnostics.Process.Start(si);

// Configurações do processo.
processo.OutputDataReceived += new DataReceivedEventHandler(processo_OutputDataReceived);
processo.EnableRaisingEvents = true;
processo.BeginOutputReadLine(); 
```

我想像往常一样显示控制台消息，**并**在另一个应用程序中捕获这些相同的消息。目前我只能允许输出正常显示**或**重定向它并在我的其他应用程序中访问它。

# java - 在android ScrollView中禁用“投掷”？

> ID：11654883
> 
> 赞同：3
> 
> 时间：2012-07-25T16:59:14.550
> 
> 标签：java, android, scrollview

当您`ScrollView`在 android 中使用时，您可以通过`ScrollView`向上或向下滑动来快速滚动，但我不希望启用此功能。

有没有办法禁用投掷？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T17:36:19.960

您需要覆盖该`onFling()`方法。覆盖`onFling()`并让它返回false。

这是一个[示例](https://stackoverflow.com/questions/4817770/android-listview-with-onitemclicklistener-and-gesturedetector/)，可以帮助您创建 GestureDetector 并覆盖`onFling()`.

* * *

对于您的`onFling()`方法，您将需要以下内容：

```
@Override
public boolean onFling(MotionEvent e1, MotionEvent e2, float velocityX, float velocityY)
{
    return false;
} 
```

# c# - 将模型添加到视图.net MVC 4

> ID：11654884
> 
> 赞同：0
> 
> 时间：2012-07-25T16:59:16.390
> 
> 标签：c#, asp.net-mvc-3, razor

是否可以在同一个视图中使用两个模型（我的视图是我的模型的强类型，我需要在同一个视图中修改另一个模型）。有没有办法做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:03:30.740

使用`ViewModel`具有属性的 a 来表示您的另一个`models`并将其对象传递给`View`.

```
public class CustomerViewModel
{
  public int ID { set;get;}
  public string Name { set;get;}
  public Address Address {set;get;}
  public IList<Order> Orders {set;get;}

  public CustomerViewModel()
  {
     if(Address==null)
         Address=new Address();

     if(Orders ==null)
         Orders =new List<Order>();
  }
}

public class Address 
{
  public string AddressLine1 { set;get;} 
  //Other properties 
}

public class Order
{
  public int OrderID{ set;get;} 
  public int ItemID { set;get;}
  //Other properties 
} 
```

现在在你的 Action 方法中

```
public ActionResult GetCustomer(int id)
{
   CustomerViewModel objVM=repositary.GetCustomerFromId(id);
   objVm.Address=repositary.GetCustomerAddress(id);
   objVm.Orders=repositary.GetOrdersForCustomer(id);
   return View(objVM);
} 
```

您的视图将输入到`CustomerViewModel`

```
@model CustomerViewModel
@using(Html.BeginForm())
{
  <h2>@Model.Name</h2>
  <p>@Model.Address.AddressLine1</p>
  @foreach(var order in Model.Orders)
  {
    <p>@order.OrderID.ToString()</p>
  }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:01:23.533

创建一个模型，将这两个模型结合起来。这很常见：

```
 public class CombinedModel
    {

        public ModelA MyFirstModel { get; set; }
        public ModelB MyOtherModel { get; set; }

    } 
```

# c# - 加载 javascript 和速度问题

> ID：11654891
> 
> 赞同：1
> 
> 时间：2012-07-25T16:59:31.530
> 
> 标签：c#, javascript, jquery

我的代码中有 -

```
string CurrMonth = "Jan";
int rowId = 1;
string MIMO = "";
double JanMITotal = 0.0;
double JanMOTotal = 0.0;
//continued all the way to December

foreach (DataRow dr in dtMIMODetails.Rows) { //dtDetail has about 50 rows
  HtmlTableRow rowDetails = new HtmlTableRow();
  MIMO = dtMIMODetails["MIMO".ToString();
  {
    CurrMonth = "Jan";
    HtmlTableCell cell = new HtmlTableCell();
    cell.Style.Add(HtmlTextWriterStyle.BackgroundColor, "#FFFF99");
    cell.Style.Add(HtmlTextWriterStyle.TextAlign, "center");

    TextBox tb = new TextBox();
    tb.Style.Add(HtmlTextWriterStyle.BackgroundColor, "#FFFF99");
    tb.Style.Add(HtmlTextWriterStyle.TextAlign, "center");
    tb.Style.Add(HtmlTextWriterStyle.FontSize, "small");
    tb.Style.Add(HtmlTextWriterStyle.Width, "40px");
    tb.Style.Add(HtmlTextWriterStyle.Display, "None");
    tb.ID = "tb" + CurrMonth + "_" + MIMO + "_" + "_" + rowID;
    tb.Text = drMIMODetails[CurrMonth].ToString();

    HtmlAnchor htmlanchor = new HtmlAnchor();
    htmlanchor.ID = "ha" + CurrMonth + "_" + MIMO + "_" + rowID;
    htmlanchor.HRef = "#" + htmlanchor.ID;
    htmlanchor.Title = "Click to change value"; //tooltip
    htmlanchor.InnerText = drMIMODetails[CurrMonth].ToString();
    htmlanchor.Attributes.Add("onclick", "handleTextBox('" + CurrMonth + "', '" + MIMO  + "', '" + rowID + "', 'Show')");

    tb.Attributes.Add("onkeyup", "updateMIMOTotals('" + CurrMonth + "', '" + MIMO  + "', '" +  recordID + "','" + rowID + "')");
    tb.Attributes.Add("onblur", "handleTextBox('" + CurrMonth + "', '" + MIMO  + "', '" + rowID + "', 'Hide')");

    FilteredTextBoxExtender ftbe = new FilteredTextBoxExtender();
    ftbe.ID = "ftbe" + CurrMonth + "_" + MIMO + "_" + rowID;
    ftbe.TargetControlID = tb.ID;
    ftbe.FilterType = FilterTypes.Custom | FilterTypes.Numbers;
    ftbe.ValidChars = ".";

    cell.Controls.Add(tb);
    cell.Controls.Add(ftbe);
    cell.Controls.Add(htmlanchor);
    rowDetails.Cells.Add(cell);

    if (MIMO == MOVEINS) {
        JanMITotal = JanMITotal + Convert.ToDouble(drMIMODetails[CurrMonth]);
    }
    else if (MIMO == MOVEOUTS) {
        JanMOTotal = JanMOTotal + Convert.ToDouble(drMIMODetails[CurrMonth]);
    }
  }

  rowId++;
} 
```

重复 12 个月。

此表单上还有其他值，当更改时会导致此循环再次运行，这很好。我需要使用其他值更改导致的结果重新加载值。

但是在进行其他更改并重新加载页面大约 4-5 次之后，我得到了可怕的“停止运行脚本？” 错误。

有没有更好的办法？我确实有一个我使用的 javascript 文件，并且对 jQuery 有点熟悉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:03:22.910

停止运行脚本表示我怀疑存在无限循环。如果您需要这方面的帮助，您应该发布您正在运行的客户端代码 (javascript)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:58:43.923

它发生在您与单元格关联的事件之一上：onkeyup、onblur 或 onclick。

# mysql - 我被困在 MySQL 存储过程中

> ID：11654897
> 
> 赞同：-1
> 
> 时间：2012-07-25T17:00:13.113
> 
> 标签：mysql

我必须一次替换不正确的多个数据，所以我使用了 preg_replace 但我被卡住了，因为它只替换样式拼写错误。有多种不同的不正确样式，我想用一种标准样式替换它们，所以我使用了光标。但它给了我一个语法错误。

我已附上我的查询。

```
CREATE PROCEDURE addcorrect()
BEGIN
DECLARE ADDRESS char(90);
DECLARE badaddress CURSOR FOR 
    SELECT 
           supplementtal_address_1
FROM aditi_po
    WHERE ((
    UPPER( street_name ) LIKE '%P%BOX%'
    OR UPPER( supplementtal_address_1 ) LIKE 'P%BOX%'
    )
    AND id NOT IN (
    SELECT id
    FROM aditi_po
    WHERE (street_name LIKE '%PO %Box%'
        or supplementtal_address_1 LIKE '%PO %Box%')
    ));

  OPEN badaddress

  read_loop: LOOP
    FETCH badaddress INTO ADDRESS;

    IF done THEN
      LEAVE read_loop;
    END IF;
    if ADDRESS LIKE '%P.O. Box%' THEN 
        print ADDRESS = PREG_REPLACE('/(.*?)(P.O. Box)/' , '$1PO Box' ,ADDRESS)
    ELSE ADDRESS LIKE '%P.O. Box%' THEN print ADDRESS = PREG_REPLACE('/(.*?)(P.O. Box)/' , '$1PO Box' ,ADDRESS)
       END IF;
  END LOOP;

  CLOSE badaddress;
END; 
```

MySQL 说：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 3 行的 '' 附近使用正确的语法

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-26T15:17:17.210

这个片段看起来很糟糕：

```
ELSE ADDRESS LIKE '%P.O. Box%' THEN 
    print ADDRESS = PREG_REPLACE('/(.*?)(P.O. Box)/' , '$1PO Box' ,ADDRESS) 
```

我相信你想要：

```
ELSEIF ADDRESS LIKE '%P.O. Box%' THEN 
    print ADDRESS = PREG_REPLACE('/(.*?)(P.O. Box)/', '$1PO Box', ADDRESS) 
```

# iphone - iPhone 提示更新

> ID：11654898
> 
> 赞同：0
> 
> 时间：2012-07-25T17:00:23.410
> 
> 标签：iphone, padrino

我目前正在为 iPhone 应用程序开发一个 API，它适用于该应用程序的第 2 版。（API 是在 Padrino 中开发的）

所以我仍然有版本 1 iPhone 应用程序的旧 API。

我想做的是提示 iPhone 应用程序用户（如果可能）下载最新版本的应用程序，iPhone 用户将无法再访问 iPhone 应用程序版本 1。

任何投入将不胜感激。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:10:02.623

不可能，至少对于 AppStore 应用程序而言。但是：如果有可用更新，几乎每个用户都会更新他的应用程序（他们会通过设备上的 AppStore 或通过 iTunes 通知他们），并且在他们升级应用程序后，他们将无法访问旧版本（除非他们有专门保存了旧版本的 .ipa 文件，这也是不太可能的）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:21:38.103

提示必须是您在应用程序 v1 中编程的内容。您可以在应用程序启动时“触发”该方法或其他东西。

尽可能关闭 v1 的旧 Web 服务，并强烈建议“禁用”/破坏 v1 应用程序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:30:20.217

这不是*不可能*的，而不应该是标准做法。对您来说最简单的事情是检查 Web 服务，甚至可能是包含最新版本信息的远程文件，然后向用户显示一条消息，表明有更新的版本可用。

我建议使用推送通知服务，当您有更新时，向用户发送消息*（好吧，无论如何决定接受来自您的应用程序的推送通知的用户）*。

此外，**不允许访问版本 1**也不是您应该做的事情。在这种情况下，您可以提示用户他们应该更新到最新版本，而不是限制对应用程序的访问。

# c# - 当点击离开时仍然触发上下文菜单

> ID：11654904
> 
> 赞同：0
> 
> 时间：2012-07-25T17:00:51.850
> 
> 标签：c#, winforms, datagridview, contextmenu

C# Winform 项目

我有一个带有 contextMenu 的 dataGridView。简单地说，一切都按我的意愿工作，除了上下文菜单选择触发，即使我不想要它（当我点击离开时）。例如，我右键单击我的 dataGridView 我看到了我的选择。如果我选择它，它会触发 MouseClick 事件并执行我想要的操作。但是如果我点击它，它仍然会触发 MouseClick 事件。

我在 OnMouseUp 事件中以几种不同的方式进行了尝试，但同样的情况正在发生。您会在下面的代码中注意到一些额外的“如果”，这基本上是我尝试了一些事情来让 MouseClick 不必要地触发（尽管最后我相信它只是在做多余的工作）。

在下面的代码中，请注意以下内容： MessageBox.Show("这里出了点问题！");

代码：

```
private void dgvMyDataGridView_MouseClick(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {
        currentMouseOverCol = dgvMyDataGridView.HitTest(e.X, e.Y).ColumnIndex;
        currentMouseOverRow = dgvMyDataGridView.HitTest(e.X, e.Y).RowIndex;

        ContextMenu m = new ContextMenu();
        if (currentMouseOverRow >= 0 && currentMouseOverCol == 1)
        {
            dgvMyDataGridView.CurrentRow.Cells[0].Value.ToString())));
            m.MenuItems.Add(new MenuItem(string.Format("Do something with this row")));
        }

        m.Show(dgvMyDataGridView, new Point(e.X, e.Y));
    }

    DataGridView.HitTestInfo hitTestInfo;
    hitTestInfo = dgvMyDataGridView.HitTest(e.X, e.Y);

    if (hitTestInfo.Type == DataGridViewHitTestType.Cell && hitTestInfo.ColumnIndex == 1 && currentMouseOverRow >= 0 && currentMouseOverCol == 1)
    {
        MessageBox.Show("something goes wrong here!");
        // Code to open a new form page - this all works.
    }
} 
```

当我点击离开时，我错过了什么告诉我的应用程序不触发？

谢谢，

〜克里斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T19:09:04.667

发生的情况是，一旦 ContextMenu 关闭，您的方法将继续处理。要修复您的解决方案，您只需要`return`在调用`Show`ContextMenu 之后进行。

简单修复：

```
m.Show(dgvMyDataGridView, new Point(e.X, e.Y));
return; 
```

问题是事件处理程序的执行仍在继续，只是在上下文菜单关闭时等待`m.Show`“结束”，类似于其`Form.ShowDialog`行为`MessageBox.Show`方式。

**更新：**从评论看来，DataGridView.MouseClick 试图处理用户单击 ContextMenu 的项目。在这种情况下，您需要对代码进行较大的更改，如下所示：

```
private void dgvMyDataGridView_MouseClick(object sender, MouseEventArgs e)
{
    if (e.Button == MouseButtons.Right)
    {
        var hitTestInfo = dgvMyDataGridView.HitTest(e.X, e.Y);

        if ((hitTestInfo.Type == DataGridViewHitTestType.Cell) &&
            (hitTestInfo.ColumnIndex == 1) &&
            (hitTestInfo.RowIndex >= 0))
        {
            string currentCell = dgvMyDataGridView.Rows[hitTestInfo.RowIndex].Cells[hitTestInfo.ColumnIndex].Value.ToString();
            ContextMenu m = new ContextMenu();
            dgvMyDataGridView.CurrentRow.Cells[0].Value.ToString();
            m.MenuItems.Add(new MenuItem("Click Me!", new EventHandler((itemSender, itemEvent) =>
            {
                var result = MessageBox.Show("You've clicked " + currentCell + ". Open next form?", "Continue?", MessageBoxButtons.YesNo);
                if (result == System.Windows.Forms.DialogResult.Yes)
                {
                    // Code to open a new form page.
                }
            })));
            m.Show(dgvMyDataGridView, new Point(e.X, e.Y));
        }
    }
} 
```

关键是将 EventHandler 添加到 ContextMenu 的 MenuItem 中。希望有帮助！

# c# - 如何创建包含面板的动态网格

> ID：11654906
> 
> 赞同：1
> 
> 时间：2012-07-25T17:00:58.623
> 
> 标签：c#, .net, wpf

我需要动态创建一个具有 3 列的 WPF 网格，行数将取决于我需要的面板数量。第一个面板将在网格位置 0,0 下一个在 0,1 -> 0,2 -> 1,0 -> 1,1 等。所以如果我需要 20 个面板，网格将有 3 个列和 7 行. 网格应该填满整个窗口

每个面板都应该有一个标题和一个进度条。我想我会将面板作为单独的用户控件

我从 WPF 开始，所以任何帮助都会很棒

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:24:48.040

据我所知，您必须在代码隐藏中执行此操作。

您只需将所需的单元格除以 3 并四舍五入。

从网格派生控件。为单元格编号创建自定义附加属性。然后覆盖 MeasureOverride，并通过四舍五入的行数设置网格行定义。然后在每个项目上设置 grid.row 和 grid.column 以对应于您从控件中读取的单元格编号。

然后调用默认的grid.measureoverride。

```
public class ArrangeGrid : Grid
{
    public ArrangeGrid()
    {
        ColumnDefinitions.Add(new ColumnDefinition());
        ColumnDefinitions.Add(new ColumnDefinition());
        ColumnDefinitions.Add(new ColumnDefinition());
    }
    public static DependencyProperty GridCellProperty = DependencyProperty.RegisterAttached("GridCell", typeof(int), typeof(ArrangeGrid));

    public static void SetGridCell(UIElement element, int value)
    {
        element.SetValue(ArrangeGrid.GridCellProperty, value);
    }

    [AttachedPropertyBrowsableForChildren]
    public static int GetGridCell(UIElement element)
    {
        return (int)element.GetValue(ArrangeGrid.GridCellProperty);
    }

    protected override Size MeasureOverride(Size constraint)
    {
        RowDefinitions.Clear();

        int rowCount = this.Children.Count / 3;
        if (this.Children.Count % 3 != 0)
        {
            rowCount += 1;
        }

        while (RowDefinitions.Count < rowCount)
        {
            RowDefinitions.Add(new RowDefinition());
        }

        foreach (var child in this.Children)
        {

            int gridCell = ArrangeGrid.GetGridCell((UIElement)child);
            int gridRow = gridCell / 3;
            int gridCol = gridCell % 3;

            ((UIElement)child).SetValue(Grid.RowProperty, gridRow);
            ((UIElement)child).SetValue(Grid.ColumnProperty, gridCol);

        }

        return base.MeasureOverride(constraint);
    }
} 
```

显然，您可以在没有 GridCell 属性的情况下执行此操作。如果您跳过网格单元格，那里会有一些错误，但您应该能够调整此代码以适应您的使用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T18:52:12.980

以下示例显示了如何创建行数和列数并将对象（在本例中为标签）放入每个单元格。看看你是否可以从那里推断出来。

```
public partial class MainWindow : Window
{
    Grid grid1;
    public MainWindow()
    {
        InitializeComponent();

        int cellCount = 14;
        int numCols = 3;
        int numRows = (cellCount + 1) / numCols;
        grid1 = new Grid();

        this.AddChild(grid1);

        for(int i=0; i<numCols; ++i)
            this.grid1.ColumnDefinitions.Add(new ColumnDefinition());
        for (int i = 0; i < numRows; ++i)
            this.grid1.RowDefinitions.Add(new RowDefinition());

        foreach (var g in this.grid1.RowDefinitions)
        {
            g.Height = new GridLength(100);
        }

        foreach (var g in grid1.ColumnDefinitions)
        {
            g.Width = new GridLength(100);
        }

        for(int i=0; i<cellCount; ++i)
        {
            int idx = grid1.Children.Add(new Label());
            Label x = grid1.Children[idx] as Label;

            x.Content = "Cell " + i;
            x.SetValue(Grid.RowProperty, i/numCols);
            x.SetValue(Grid.ColumnProperty, i % numCols);
        }
    }
} 
```

此示例以几乎完全为空的 XAML 开始。它只有 Window 元素。

# javascript - 奇怪的提交按钮行为 HTML

> ID：11654907
> 
> 赞同：-1
> 
> 时间：2012-07-25T17:01:07.670
> 
> 标签：javascript, html

我制作了一个移动网络应用程序，其中包含一个带有提交按钮的基本表单。我的问题是提交按钮在移动设备（移动 safari）上不起作用。单击按钮时，没有任何反应。但是，它在所有浏览器的计算机上都可以正常工作。下面是包含提交按钮的表单。任何想法为什么会发生这种情况。

表格代码：

```
<form method="get" name="myForm">
    <ul class="roundbox">
        <li><input type="text" placeholder="To:" class="addr" name="addr" id="addr" autocapitalize="off" autocorrect="off" autocomplete="off" /></li>
        <li>
            <textarea rows="10" cols="30" style="overflow::hidden" placeholder="Message" name="body" id="body" size="220" autocapitalize="off" autocorrect="off" autocomplete="off"> </textarea>
        </li>
        <li>
            <input type="submit" class="submit" value="Send">
            <input type="reset" class="reset" value="Clear"/>
            <input type="hidden" value="O" type="text" name="dir" id="dir" />
        </li>
    </ul>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:02:59.493

您`onclick`的按钮上有一些不必要的处理程序，并且会干扰按钮的默认行为。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T19:35:57.833

我找到了解决方案，问题出在 JQTouch 上。您需要添加

```
 formSelector: false,
    useFastTouch: false, 
```

到您的 $.jQTouch 对象并将 class="form" 添加到您的表单中。这是关于这个问题的对话[http://code.google.com/p/jqtouch/issues/detail?id=125](http://code.google.com/p/jqtouch/issues/detail?id=125)

# visual-web-developer-2010 - 如何判断 .aspx 页面是否依赖于 VWD Studio 2010 项目中的 .dll？

> ID：11654913
> 
> 赞同：0
> 
> 时间：2012-07-25T17:01:38.577
> 
> 标签：visual-web-developer-2010

我在一个项目中有一堆 .aspx 页面和一个 .dll 页面，我想将 .aspx 页面移动到我们网站目录结构中的适当位置，以便更轻松地编辑和更新 HTML。

但我怀疑其中一些 .aspx 页面依赖于 .dll

我在这些文件的内容中搜索了“.dll”，但没有得到任何命中（但我确实得到了命中，因此搜索正在查找文件的内容）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:03:31.057

在 .vb 文件的标题中，它会说 IMPORTS

一种配置方法是右键单击 MS VWD 2010 编辑器中的项目并选择添加引用。就我而言，dll 在项目中，所以我转到项目选项卡并选择了 Dll 项目。

# android - Android 自动同步和后台

> ID：11654920
> 
> 赞同：0
> 
> 时间：2012-07-25T17:02:16.000
> 
> 标签：android

如何以编程方式获取状态，即背景和自动同步在 android 中是打开还是关闭？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:13:12.063

使用以下方法检查系统设置的状态：

1.  [自动同步](http://developer.android.com/reference/android/content/ContentResolver.html#getMasterSyncAutomatically%28%29)

2.  [后台数据](http://developer.android.com/reference/android/net/ConnectivityManager.html#getBackgroundDataSetting%28%29)

# zend-framework - Zend 框架控制器文件（Apple 图标）

> ID：11654924
> 
> 赞同：1
> 
> 时间：2012-07-25T17:02:32.473
> 
> 标签：zend-framework, header

关于在 zend 框架的控制器文件中包含一些头信息的问题。我想包括苹果图标。从这里开始：http: [//gigaom.com/apple/how-to-create-ios-device-home-screen-icons-for-web-sites/](http://gigaom.com/apple/how-to-create-ios-device-home-screen-icons-for-web-sites/)

但是，当我查看该页面的实际来源时，“尺寸”块没有出现。我假设 rel 和 href 已经是 zend 框架的本机了。如何让“尺寸”显示出来？

```
$this->view->headLink(array('rel' => 'apple-touch-icon', 'href' => '/images/icons/apple-touch-icon.png'));
    $this->view->headLink(array('rel' => 'apple-touch-icon', 'sizes' => '72x72', 'href' => '/images/icons/apple-touch-icon-72x72.png'));
    $this->view->headLink(array('rel' => 'apple-touch-icon', 'sizes' => '114x114', 'href' => '/images/icons/apple-touch-icon-114x114.png')); 
```

这是在标题中查看页面源时实际显示的内容。

```
<link href="/images/icons/apple-touch-icon.png" rel="apple-touch-icon" />
<link href="/images/icons/apple-touch-icon-72x72.png" rel="apple-touch-icon" />
<link href="/images/icons/apple-touch-icon-114x114.png" rel="apple-touch-icon" /> 
```

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T17:41:09.977

您`sizes`和任何其他不支持开箱即用的属性`headLink()`应该放在一个`extras`数组中，如下所示：

```
$this->view->headLink(array('rel' => 'apple-touch-icon', 
    'href' => '/images/icons/apple-touch-icon.png'));

$this->view->headLink(array('rel' => 'apple-touch-icon', 
    'href' => '/images/icons/apple-touch-icon-72x72.png', 
    'extras' => array('sizes' => '72x72')));

$this->view->headLink(array('rel' => 'apple-touch-icon', 
    'href' => '/images/icons/apple-touch-icon-114x114.png', 
    'extras' => array('sizes' => '114x114'))); 
```

（为清楚起见，换行。）

# html - 从缓存渲染 CSS 时，IE7 回退到 IE6 标准模式

> ID：11654928
> 
> 赞同：7
> 
> 时间：2012-07-25T17:03:04.957
> 
> 标签：html, css, caching, internet-explorer-7, internet-explorer-6

我有这个问题，我似乎无法找到解决方案......

我有一个页面在初始加载时使用本机 IE7（不是来自 IE9/IE8 的模拟页面）呈现良好，但在从浏览器缓存提供的后续请求中回退到 IE6 标准模式。IE7 知道如何处理多个 CSS 类，如“div.class1.class2”，而 IE6 标准模式不知道 - 因此我的页面在每次访问时都会中断，但第一次访问。

以下是如何重现它：

*   打开IE7（真正的，IE9/IE8的IE7 Emulated Mode**不行！**）
*   去hhttp://beta.upcload.com/widget/popup?garmentId=workaholicfashion-5276777&sid=
*   在初次访问时，一切都应该看起来不错（例如蓝色按钮，就像在 Chrome 或 FF 中一样）
*   **现在重新加载**页面，几个 CSS 规则中断，因为浏览器回退到 IE6 标准模式（不是 Quirks 模式，我检查了一个！document.compatMode 仍然是“CSS1Compat”）
*   清除缓存并重新加载，一切又看起来不错
*   随心所欲地重复

因此，当所有文件都从 Amazon 服务器获得时，IE7 似乎可以很好地呈现它们，包括包含多个类的 CSS 规则。（例如“div.class1.class2”）当您尝试使用完全相同的代码重新加载完全相同的页面时，它会以某种方式切换到 IE6 标准模式（不是 Quirks 模式），它不理解链接的 CSS 类并破坏了几个设计，例如按钮。我尝试添加几个不同的 Doctype / Meta 标头，但它们都没有区别，目前该页面是 XHTML Strict 有效并且具有 X-UA-Compatible IE=edge 标头，但从缓存加载时仍然无法正确呈现。我能弄清的标头的唯一区别是未修改请求的缺少 Content-Type 标头，但这应该不是问题，对吧？

哦，最重要的是，当我在本地开发服务器上用 IE7 打开这个完全相同的页面时，它呈现得很好，即使在重新加载之后！：/

**更新**

好的，所以我终于能够在开发服务器上重现它了。唯一不同的是“max-age”标头，导致浏览器不在本地缓存任何内容。当我增加缓存时间时，IE7 开始缓存这些文件，一旦它们从缓存中加载，这再次导致设计中断。因此，从缓存而不是服务器提供文件一定是一个问题。

**更新 2**

我将其缩小到 CSS 文件。看起来，IE7 要么在它来自缓存（即没有 Content-Type 标头）时以 IE6 模式呈现它，要么在它从服务器加载时以 IE7 模式呈现它。(Content-Type: text/css) 有谁知道为什么会这样？也许是一些格式错误的 CSS 规则？作为一种解决方法，我现在向样式表添加一个随机参数以防止缓存，这会阻止 IE7 切换到 IE6 模式，但即使在从样式表中删除所有错误和警告之后，问题仍然存在。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-26T02:38:09.523

不久前，我在支持旧版 IE6 应用程序时遇到了完全相反的行为。

无论如何，你使用 xhtml 1.0 strict doctype，这是一个重要的开始！

首先：通常的清单：

*   （生成）（X）HTML文件/数据在没有BOM的情况下发送/保存，DTD之前没有一个字节？
*   您是否检查过发送文件的服务器发送了哪些设置？
*   文档内容类型是“text/html”还是 XML（“application/xhtml+xml”或“application/xml”）（在标记源 = 元标记和/或由服务器发送的 = 标头）？
*   页面是否从 Microsoft 黑名单上的域提供（或与之通信）（不允许使用 IE 回退模式）？
*   您是否检查了 lan/intRAnet 和 wan/internet 之间 IE 安全设​​置的差异（因为您提到了不同的行为）？
*   是否有可能通过它连接互联网的代理（可能会重写一些东西？）

现在准备好这些数据并访问我所见过的关于[**浏览器模式切换**](http://hsivonen.iki.fi/doctype/)[的绝对最佳来源，事实上，每一本自尊的网络开发书籍](http://hsivonen.iki.fi/doctype/)***都应该*在第一章中介绍这一点。所有这些好处都在一个清晰的页面上，至少可以说是“启发性的”。
人们应该知道浏览器模式切换有两个部分，并了解何时可以期待什么样的行为。
在同一页面上，您还可以找到一个[IE 模式切换流程图](http://hsivonen.iki.fi/doctype/#ie8modes)，它可以深入了解 IE 遵循的 EXTENSIVE 迷宫以确定其最终呈现/浏览器模式。**

 **真的希望这会有所帮助！

**更新：**
没有 IE6（标准/怪癖）模式（在较新版本的 IE 中）。请参阅[官方微软文档](http://msdn.microsoft.com/en-us/library/cc288325%28v=vs.85%29.aspx)（以及此报价的[更新链接）！](http://msdn.microsoft.com/en-us/library/jj676916%28v=vs.85%29.aspx)让我什至引用它：

> Windows Internet Explorer 7 提供了旨在更全面地支持行业标准的新功能，例如对通用选择器的支持。因为该指令只支持两种设置（怪癖模式和标准模式），IE7 标准模式取代了 Internet Explorer 6 标准模式。

这是他们的 doctype-switch 检查器的代码（同一页面上的源代码）：

```
engine = null;
if (window.navigator.appName == "Microsoft Internet Explorer")
{
   // This is an IE browser. What mode is the engine in?
   if (document.documentMode) // IE8 or later
      engine = document.documentMode;
   else // IE 5-7
   {
      engine = 5; // Assume quirks mode unless proven otherwise
      if (document.compatMode)
      {
         if (document.compatMode == "CSS1Compat")
            engine = 7; // standards mode
      }
      // There is no test for IE6 standards mode because that mode  
      // was replaced by IE7 standards mode; there is no emulation.
   }
   // the engine variable now contains the document compatibility mode.
} 
```

现在阅读上面微软代码中的注释！！！！

**关于您的第二次更新：**
关于缓存的好发现！所以css现在是问题所在。既然你现在开始了解为什么遗留 IE6 应用程序需要 IE6（IE6 如此难以杀死的原因），也许你应该看看[条件注释](http://msdn.microsoft.com/en-us/library/ms537512%28v=vs.85%29.aspx)。自从：

*   它们不是黑客（但正如 SDC 在评论中指出的那样，[微软将它们](http://msdn.microsoft.com/en-us/library/ie/hh801214%28v=vs.85%29.aspx)从 IE10 中删除）
*   没有 javascript 浏览器嗅探（甚至不需要启用脚本，因此始终有效），
*   它可以专门针对（一系列）版本的 IE Exclusively。

在它们中，您可以包含指向特定于 IE 的 css 的链接（保持文档小、精简和整洁）...**

# java - 从 xml 文件下载文件

> ID：11654934
> 
> 赞同：0
> 
> 时间：2012-07-25T17:03:38.513
> 
> 标签：java, xml, download

我将指向 mp3 音乐文件地址的 URL 插入到 xml 文件中，但我不知道之后如何下载该文件。

这是我的代码：

```
 String xml = parser.getXmlFromUrl(URL); // getting XML from URL
    Document doc = parser.getDomElement(xml); // getting DOM element

    NodeList nl = doc.getElementsByTagName(KEY_SONG);
    // looping through all song nodes <song>
    for (int i = 0; i < nl.getLength(); i++) {
        // creating new HashMap
        HashMap<String, String> map = new HashMap<String, String>();
        Element e = (Element) nl.item(i);
        // adding each child node to HashMap key => value
        map.put(KEY_DURATION, parser.getValue(e, KEY_DURATION));
        map.put(KEY_THUMB_URL, parser.getValue(e, KEY_THUMB_URL));
        map.put(KEY_URL, parser.getValue(e, KEY_URL));
        // adding HashList to ArrayList
        songsList.add(map);
    }

    list=(ListView)findViewById(R.id.list);

    // Getting adapter by passing xml data ArrayList
    adapter=new LazyAdapter(this, songsList);        
    list.setAdapter(adapter);

    // Click event for single list row
    list.setOnItemClickListener(new OnItemClickListener() {

        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

        }
    }); 
```

代码应该是什么`onItemClick`？

从 xml 获取链接并从此方法下载的代码是什么？

```
String url = "url you want to download";
DownloadManager.Request request = new DownloadManager.Request(Uri.parse(url));
request.setDescription("Some descrition");
request.setTitle("Some title"); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:05:55.780

在`onItemClick`您放置您希望在单击项目时发生的操作。

# actionscript-3 - 将 ActionScript 日期从 UTC 转换为从纪元开始的毫秒数的本地时间

> ID：11654938
> 
> 赞同：2
> 
> 时间：2012-07-25T17:04:05.747
> 
> 标签：actionscript-3

[这是对我之前的问题](https://stackoverflow.com/questions/11632421/creating-actionscript-date-object-from-mysql-utc-timestamp-string)的跟进。在我获取当前时间的解决方案中，我需要添加/减去偏移量：

```
var createDate:Date = new Date();
var offset:Number = createDate.getTimezoneOffset() * 60 * 1000; 
createDate.time = parseInt("1343174921") * 1000 - offset; // subtracting offset 
```

为了得到正确的时间，我不得不减去偏移量（纯猜测）。我怎么知道减去或增加偏移量？[getTimezoneOffset](http://help.adobe.com/en_US/FlashPlatform/reference/actionscript/3/Date.html#timezoneOffset)的文档说：

> 此值是您需要添加到计算机本地时间以等于 UTC 的分钟数。如果您的计算机时间设置为晚于 UTC，则该值将为负数。

有没有一种简单的方法可以确定计算机的时间是否设置得晚于/早于 UTC，以便我知道是否需要添加或减去偏移量？

**更新**我检查了数据库，我正在存储一个创建的条目`7/25/2012 at 8pm`（`1343282417`我正在使用[UTC_TIMESTAMP()](http://dev.mysql.com/doc/refman/5.1/en/date-and-time-functions.html#function_utc-timestamp)来存储日期）。当我将它插入 Unix 时间戳转换器时，我得到`Thu, 26 Jul 2012 06:00:17 GMT`. 所以我很困惑为什么 MySql 的 UTC_TIMESTAMP （假设返回当前的 UTC 日期和时间）给了我一个不同的日期。我在本地工作，MySQL db、php 和 Flash 代码都在单台机器上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:18:10.837

你的问题几乎就是你的答案，不是吗？

> 此值是您需要添加到计算机本地时间以等于 UTC 的分钟数。如果您的计算机时间设置为晚于 UTC，则该值将为负数。

这意味着您需要始终添加`getTimezoneOffset`到本地日期以获取 UTC 日期

所以，

```
var now:Date=new Date();

var utcOffset=now.getTimezoneOffset() * 60 * 1000;

var utcNow:Date=new Date(now.valueOf() + utcOffset); 
```

您现在拥有 UTC 时间`utcNow`。

**注意：** `utcNow`只是 utc 时间的错误表示（它是用户时区中的当前 UTC 时间。也就是说，a`toString()`将附加用户的原始时区。要获取 UNIX 时间戳，请使用`utcNow.valueOf()`

有内置的 API 函数`getUTCDate`, `getUTCFullYear`, `getUTCHours`, `getUTCMinutes`, `getUTCMilliseconds`, `getUTCMonth`，`getUTCSeconds`您可以在原始 ( `now`) Date 对象上调用这些函数来仅获取这些值。

# perl - Perl：Win32::OLE 和 Microsoft Outlook - 有效地遍历电子邮件附件

> ID：11654941
> 
> 赞同：5
> 
> 时间：2012-07-25T17:04:17.060
> 
> 标签：perl, email, automation, ole, attachment

我是实习生，对此很陌生...

我的老板每周一都会收到一封带有两个附件的电子邮件，他必须将其转换成 wiki 代码并将其放在我们的内部网站上。由于要传输的信息量很大，该过程每周一大约需要 20 分钟。我被要求简化这个过程。

我有代码可以解析文件并将其分解为组件，并且我有代码可以从他的收件箱中获取所有附件。

我面临的问题是我的脚本从最旧的电子邮件开始。这不是一个大问题，但它会导致脚本运行的时间比需要的长得多。

```
#!/usr/bin/perl
use Cwd;
use Win32::OLE qw(in with);
use Win32::OLE::Const 'Microsoft Outlook';
use Win32::OLE::Variant;

my $OL = Win32::OLE->GetActiveObject('Outlook.Application') || Win32::OLE->new('Outlook.Application', 'Quit');
my $NameSpace = $OL->GetNameSpace("MAPI");
my $Folder = $NameSpace->GetDefaultFolder(olFolderInbox);
my $dir = cwd . "\\";
$dir =~ s/\//\\/g;
my $atch1, $file1, $atch2, $file2;

print ref($Folder->{Items}) . "\n";

foreach my $msg (in $Folder->{Items}){
    #print $msg->{CreationTime} . "\n";
    foreach my $atch (in $msg->{Attachments}){
        if($atch->{FileName} =~ m/.xls$/i){
            if($atch->{FileName} =~ /Name of attachment1/i){
                $atch1 = $atch;
                $file1 = $dir . "file1.xls";
            }
            if($atch->{FileName} =~ /Name of attachment2/i){
                $atch2 = $atch;
                $file2 = $dir . "file2.xls";
            }
       }
   }
}

if($atch1 && $atch2){
    print $file1 . "\n" . $file2 . "\n";
    $atch1->SaveAsFile($file1);
    $atch2->SaveAsFile($file2);
} 
```

现在设置的方式，因为它从最旧到最新，旨在查找文件，然后如果找到较新的文件则替换它们（尽管我删除了该功能）。实际上，我可以找到最新的并停下来。

我不知道如何反转 $Folder->{Items}。我什至不明白它是什么。当我执行 ref($Folder->{Items} 时，它说它是一个 Win32::OLE，这对我没有多大帮助，因为 Win32::OLE 的文档似乎只是表明它可以是任意数量的东西。

有什么想法可以让我先收到较新的电子邮件吗？（反转 $Folder->{Items}？Foreach 以外的东西？将 $folder->{Items} 转储到另一个可以反转的对象中？只需跳过数千封电子邮件，直到日期在过去 2 周内？（我不虽然不喜欢那个））

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T20:28:33.450

您`in`从包中导入了子例程 `Win32::OLE`。这可能是一些可怕的“语法糖”。并*深有体会*。`Win32::OLE`我想它会从object返回某种列表`$Folder`。所以试试这个：

```
foreach my $msg (reverse $Folder->{items}->in) 
```

或者

```
foreach my $msg (reverse in($Folder->{items})) 
```

`use strict`另外，请务必`use warnings`在每个脚本中确保高质量的代码。如果您可以确定将使用现代 perl，您还可以`use v5.10`享受该`say`功能 - 它的行为类似于`print`，但会自动在您的输出中添加换行符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:09:11.283

尝试这样的事情

```
foreach my $msg (reverse @{$Folder->{items}}) 
```

不要在 perl 中使用“in”

# android - 如果资源不是很多，则重新创建 Activity

> ID：11654942
> 
> 赞同：0
> 
> 时间：2012-07-25T17:04:18.763
> 
> 标签：android

我有两个活动 A 和 B。如果我从活动 A 启动活动 B，那么活动 A 在后台。有一次，如果我转到活动 A，它正在重新创建。方法 onCreate() 中的活动 A 包含从网络下载数据的代码。对于这种情况，现有的最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:17:03.840

正如 Cody Caughlan 所说，最好在后台获取数据并将其写入数据库。

如果您不想多次创建活动，可以使用`android:launchMode="singleTask"`and `android:configChanges="keyboardHidden|orientation|screenSize"`in`AndroidManifest.xml`来避免重新创建活动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:07:14.483

将您的下载数据例程移至`AsyncTask`在后台获取数据的程序。然后将其写入外部存储或 sqlite 等。您的活动`onCreate`应该只是从存储中查询/加载数据。

# java - “不要捕获通用异常！” 但是如何解开它们呢？

> ID：11654943
> 
> 赞同：4
> 
> 时间：2012-07-25T17:04:27.683
> 
> 标签：java, exception, error-handling, static-analysis

大多数静态代码分析工具建议不要捕获通用（特别是未经检查的）异常，如 RuntimeExceptions 和 Errors。

除非此异常屏障在顶层可能是合理的，否则通常不会在较低级别。不幸的是，在重写/修复已经存在的代码时，这可能很难实现，因为潜在的错误和 RuntimeExceptions 的潜在可能性可能过高。此外，深入研究较低的代码级别以获得一些足够合理的异常概念以捕获而不是通用捕获，这主要是一项非常耗时且复杂的任务。

您是否知道将此类通用（未经检查的）异常分解为更具体的异常的任何工具或最佳实践？

说我们有这样的东西：

```
try
{
    somethingReallyComplex();
}
catch (RuntimeException | Error ex)
{
    Logger.error(this, ex.getClass().getName() + " while doing something really complex", ex)
} 
```

try 块可以包含一个非常复杂的代码问题，其中包含各种不同的 RuntimeExceptions 和 Errors，这些**都是有意义**的捕获。但是，我怎样才能最有效地分析此代码以将 RuntimeException 分解为 NullPointerException、ArrayIndexOutOfBoundException ......无论是什么合理的？

是否有任何工具可以分析此类代码并就其中最常见的 RuntimeExceptions 等提供建议？

你如何着手解决这个问题？

主观或客观的“阈值”在哪里说：“不，我只是将其保留为 RuntimeException 并添加抑制注释？”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T17:10:06.543

捕捉一般异常最重要的是*你**在哪里*捕捉它们，而不是. 如果你在一个中心位置执行此操作，即所谓的*异常屏障*，它位于调用堆栈的较高位置，那么这正是你应该做的。如果您在代码中间（或多或少任意点）这样做，那将是一个不好的做法。

 *** * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:18:58.700

举证责任不应该由您承担，而应由希望您更改代码的工具承担。任何合理的静态分析工具都会给出特定警告背后的基本原理，使您能够评估在特定情况下忽略该警告的影响。（大多数警告的存在是因为它们标记的代码*通常*是有问题的，而不是因为它*总是*如此。）

在某些情况下捕获 Exception 是正确的做法，因为您的恢复逻辑非常笼统，不需要区分异常，例如，如果您实现以下内容：“如果出现问题，请重试两次。如果仍然没有工作，记录异常，通知用户，然后继续”。这实际上取决于您的异常处理程序的作用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:08:51.723

虽然不建议我通常捕获一般异常，但毕竟我要做的唯一事情就是写入日志并继续前进。

如果您必须根据发生的问题执行不同的清理任务，那么在尝试之后有 6 个或任何 catch 块可能会很有用。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:23:20.083

在我看来，代码的每一部分都应该捕获它知道如何处理的异常，并且它抛出的所有已检查异常都应该具有与这段代码相关的含义。一个基本机制是将所有处理的异常包装到此方法抛出的已检查异常的类型中。此规则的例外 (huhu) 是 RuntimeExceptions，主要是您不应尝试捕获的错误（请参阅[错误 javadoc](http://docs.oracle.com/javase/6/docs/api/java/lang/Error.html)）。

所以对我来说，你的 try{} 块中的每个方法都应该抛出带有与方法相关的语义的检查异常。并且递归地你在所有这些方法上做同样的事情，但我看不出有任何工具足够聪明来为你做这件事。**

# jsf - RichFaces 4.2.2Final 不尊重 Tomcat 7 设置的 javax.servlet.context.tempdir 的值

> ID：11654946
> 
> 赞同：0
> 
> 时间：2012-07-25T17:04:35.047
> 
> 标签：jsf, tomcat, servlets, richfaces

我在Tomcat文件的节点`<Parameter name="javax.servlet.context.tempdir" value="${catalina.base}/my_temp" override="false"/>`内部提供了一个。`<Context>``context.xml`

由于此日志消息，我知道在服务器启动时可以看到它：

```
信息：使用参数创建 LRUMap 缓存实例：{javax.servlet.context.tempdir=D:\{omitted}\tmp0\my_temp, org.richfaces.resourceMapping.enabled=true, javax.faces.PROJECT_STAGE=Development, javax.faces .SKIP_COMMENTS=true}
```

`FileUploadFacesContextFactory.getTempFilesDirectory()`但是，当在 RichFaces方法中单步执行代码时，对`servletContext.getAttribute("javax.servlet.context.tempdir")`（其中`servletContext`是 的实例`org.apache.catalina.core.ApplicationContextFacade`）的调用会给出值`D:\{omitted}\tmp0\work\Catalina\localhost\_`。

我的印象是（来自[Tomcat Docs on context parameters](http://tomcat.apache.org/tomcat-7.0-doc/config/context.html#Context_Parameters)）设置`override="false"`应该阻止任何应用程序为此参数提供替代值。

这是预期的行为吗？我的配置错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T18:14:00.860

你误解了什么`<Parameter>`：它设置了一个 ServletContext“init-param”，就像`<context-param><param-name>javax.servlet.context.tempdir</param-name>...</context-param>`在你的`WEB-INF/web.xml`.

RichFaces 正在查看一个正式的 Context 属性，这是不同的。如果您希望您的 web 应用程序在启动时将 init-param 复制到上下文属性，您将需要创建一个`ServletContextListener`在您的 web 应用程序启动时执行类似于以下代码的代码：

```
servletContext.setAttribute("javax.servlet.context.tempdir",
                            servletContext.getInitParam("javax.servlet.context.tempdir")); 
```

请注意，更改 的值`tmpdir`可能不是一个好主意：它可能会干扰容器管理资源的能力。

# r - 使用 reshape 强制转换、连接和减少数据

> ID：11654949
> 
> 赞同：0
> 
> 时间：2012-07-25T17:04:42.403
> 
> 标签：r, reshape

我有一个看起来像的数据框

```
MAP  name       series    ID
1.0  aspartame  baseline  902349
1.0  aspartame  baseline  82749
1.0  aspartame  baseline  928542
1.0  aspartame  next      928542
0.8  aspartame  next      82749
0.8  aspartame  next      902349 
```

我想加入这个关于 ID 的数据，并计算 MAP 分数中基线和下一个之间的差异。所以这应该给

```
diff name       ID
0.2  aspartame  902349
0.2  aspartame  82749
0.0  aspartame  928542 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:29:07.250

根据 OP 的要求：使用`reshape`（或更确切地说`reshape2`）的解决方案。

```
d <- read.table(text = "
MAP  name       series    ID
1.0  aspartame  baseline  902349
1.0  aspartame  baseline  82749
1.0  aspartame  baseline  928542
1.0  aspartame  next      928542
0.8  aspartame  next      82749
0.8  aspartame  next      902349", header = TRUE)

require(reshape2)

dcast(data = d, formula = ID  + name~ ., value.var = "MAP", 
      fun.aggregate = function(x) (x[1] - x[2])) 
```

给

```
 ID      name  NA
1  82749 aspartame 0.2
2 902349 aspartame 0.2
3 928542 aspartame 0.0 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:21:16.200

这是基本 R 中的一种方式（假设您`data.frame`的名称为`df`）：

```
aggregate(list(MAP = df$MAP), 
          by=list(ID = df$ID, name = df$name), 
          function(x) x[1] - x[2])
#       ID      name MAP
# 1  82749 aspartame 0.2
# 2 902349 aspartame 0.2
# 3 928542 aspartame 0.0 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:22:25.450

你可以使用 plyr：

```
library(plyr)
ddply(your_data, c("ID", "name"), 
      function(df){subset(df, series == "baseline", select = "MAP")-  
        subset(df, series == "next", select = "MAP")}) 
```

# java - 不能在匿名类中使用导入的类

> ID：11654951
> 
> 赞同：0
> 
> 时间：2012-07-25T17:04:51.587
> 
> 标签：java, swing, user-interface, import, anonymous-class

我正在从 Python 切换到 Java，但我的项目有点困难。我正在用 Swing 为我教的一些密码编写一个 GUI。我的项目中有两个包 - cryptolib 和 cryptogui。Cryptolib 包含所有不同的密码作为类，cryptogui 是我的 GUI。

我所有的密码都是我定义的密码类的子类。目前，我在使用以下课程时遇到了困难。

```
package cryptolib;
public class SubstitutionCipher extends Cipher{
... implementation here ...
} 
```

在我的 GUI 类中，我定义了一个菜单项以使用匿名类切换到替换密码。

```
package cryptogui;
import cryptolib.*;
public class CryptoSwing extends JFrame {
    private Cipher cipher;
    public CryptoSwing() {
        JMenuItem mntmSubstitution = new JMenuItem("Substitution");
        mntmSubstitution.addActionListener(new ActionListener() {
            public void actionPerformed(ActionEvent arg0) {
                cipher = SubstitutionCipher(txtSubKeyword.getText());
             }
        });
 } 
```

我遇到的问题是，虽然“私人密码密码”；有效，ActionListener 中的 SubstitutionCipher 代码给了我错误

```
The method SubstitutionCipher(String) is undefined for the type new ActionListener(){} 
```

我从 Swing 导入的类（例如 java.awt.CardLayout）运行良好。我知道这可能是我错过的一些基本问题，但我已经搜索过，似乎找不到问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:06:09.647

```
cipher = SubstitutionCipher(txtSubKeyword.getText()); 
```

应该是

```
cipher = new SubstitutionCipher(txtSubKeyword.getText()); 
```

注意`new`关键字。

# vbscript - VBScript 环境变量 %COMPUTERNAME%

> ID：11654952
> 
> 赞同：3
> 
> 时间：2012-07-25T17:04:58.337
> 
> 标签：vbscript, environment-variables

我正在寻找有关环境变量 %COMPUTERNAME% 的帮助。它在我的脚本中作为以本地主机名命名文件的一种方式工作。在另一点上，我正在使用脚本在网络上的不同目录中构建一个文件夹（到映射驱动器），我需要将该文件夹命名为原始计算机的本地主机名。这可能没有意义，但我将在下面提供一个示例：

```
Comp1 = BobPC
Comp2 = JakePC 
```

我正在 BobPC 上制作一个 zip 文件，然后将其复制到 JakePC，但我需要将此文件复制到... C:\CopiedFiles\BobPc 之类的目录中，因为此脚本将在许多计算机上运行，​​并且每个其中需要一个文件夹，文件所在的位置以它来自的计算机命名。

我希望这是有道理的。

现在我可以让它构建一个文件夹就好了，但它显然将其命名为“JakePC”的名称，因为我正在使用环境变量来获取本地主机名。

我的问题基本上是如何告诉它以原始计算机命名文件夹？

如果您有任何问题，请告诉我，我将非常乐意解释，因为我知道我可能没有多大意义。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-07-27T13:25:18.423

如果您从源 PC 运行脚本，您可以使用以下命令

```
dim oFso, oShell, oShellEnv, computerName, target, source
const overwrite = true
set oFso      = CreateObject("Scripting.FileSystemObject")
set oShell    = WScript.CreateObject("WScript.Shell")
set oShellEnv = oShell.Environment("Process")
computerName  = oShellEnv("ComputerName")
source =  "c:\test\yourZip.zip"
target = "\\JakePC\copiedFiles\" & computerName & ".zip"
'copiedFiles needs to be a share with write permission for the user who runs the script
oFso.CopyFile source, target, overwrite
'do check on errors and the cleanup of your objects 
```

如果你从 targetpc 运行它，你应该使用远程脚本，但这并不聪明，因为你必须知道你需要运行它的 pc 的名称，所以不需要环境变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-12-07T15:17:10.243

我找到了 2 个片段来获取主机名。在 windows 7 sp1 和 windows server 2012 中都可以正常运行：

```
'
' How to get the hostname
' 
' References
'
' Method1: http://www.robvanderwoude.com/vbstech_network_names_hostname.php
' method2: https://msdn.microsoft.com/en-us/library/s6wt333f(v=vs.84).aspx

WScript.Echo "Method 1 "

Set wshShell = WScript.CreateObject( "WScript.Shell" )
strRegValue = "HKLM\SYSTEM\CurrentControlSet\Services\Tcpip\Parameters\Hostname"
strHostName = wshShell.RegRead( strRegValue )
WScript.Echo "Host Name: " & strHostName

WScript.Echo "Method 2  (include other network values)"

Set WshNetwork = WScript.CreateObject("WScript.Network")
WScript.Echo "Domain = " & WshNetwork.UserDomain
WScript.Echo "Computer Name = " & WshNetwork.ComputerName
WScript.Echo "User Name = " & WshNetwork.UserName 
```

不同之处在于`WshNetwork.ComputerName`方法以大写形式检索主机名。

# mysql - MYSQL 数据库选择问题

> ID：11654956
> 
> 赞同：0
> 
> 时间：2012-07-25T17:05:12.097
> 
> 标签：mysql, sql, database, select

我尝试做这样的事情：

```
Select column_name*other_column_name as sqr 
From table 
Where sqr<25 
Order by(sqr) 
```

column_name 和 column_name 是我存储 int 值的数据库的列。

我发现

标准 SQL 不允许您在 WHERE 子句中引用列别名。施加此限制是因为在执行 WHERE 代码时，可能尚未确定列值。例如，以下查询是非法的。

有没有人知道如何礼貌地打通，请不要这样说：

```
Select column_name*other_column_name as sqr 
From table 
Where column_name*other_column_name<25 
Order by (column_name*other_column_name); 
```

因为在这个例子中我简化了方程，但在我的项目中方程真的很长

谢谢对不起我的英语

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-25T17:10:18.400

您可以将查询包装在子查询中，然后可以使用别名：

```
SELECT *
FROM
(
    Select column_name*other_column_name as sqr
    from table 
) X
where x.sqr < 25 
order by x.sqr; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:33:42.287

这行得通吗？

```
SELECT (n1 * n2) as `sqr` FROM temptable HAVING `sqr` < 25 ORDER BY `sqr` 
```

# html - CSS多重浮动：左问题

> ID：11654959
> 
> 赞同：2
> 
> 时间：2012-07-25T17:05:20.807
> 
> 标签：html, css, css-float

我正在使用 CSS 并尝试使用 div 和 css 来格式化输入表单。我非常确定我使用错误的 CSS 规则，并且我试图弄清楚我在做什么是错误的。此图像以不同颜色显示 div 块。这些不同的颜色块中的每一个都是具有唯一 ID 的 div：

[彩色块 http://www.ws7m.net/filechute/2012-07-25_10-53-13.png](http://www.ws7m.net/filechute/2012-07-25_10-53-13.png)

我要做的是将“国家”块塞到“邮件代码”块的右侧。在上图中，State 有 float:left，mail code 有 float left。如果我将 float left 添加到包含国家/地区的 div 中，则所有三个都跳出紫色块（圆形边框）：

[跳 http://www.ws7m.net/filechute/2012-07-25_10-54-44.png](http://www.ws7m.net/filechute/2012-07-25_10-54-44.png)

一个块中“float:lefts”的数量是否有限制？这里有相当多的 CSS，因为我一直试图在这个表单上获取东西以按照我想要的方式对齐。我会专门为这个紫色区域发布东西。

这是大的紫色封闭块：

```
#applyMailInfoBlock
{
background: #D9A4DE;
margin-top: 15px;   
} 
```

这是“项目邮寄地址”下的圆形边框

```
#applyMailInfo
{
    padding: 5px 5px 5px 5px;
    margin-top: 2px;
    border: 1px solid black;
    border-radius: 8px;
} 
```

接下来的两个是街道线。我将它们分成 div 以便我可以提供一些间距。

```
#applyProjectaddress1
{
    background: #F2AAC7;    
    margin-top: 5px;
    width: 80%;
} 

#applyProjectaddress2
{
    background: #C97B9A;    
    margin-top: 5px;
    width: 80%;
} 
```

城市拥有自己的街区：

```
#applyProjectcity
{
    background: #9C4B6B;    
    width: 80%;
} 
```

好的，这里是鞭打开始的地方。起初，我将 State、Mail code 和 Country 作为它们自己的带宽度的小 div。我尝试在每个上使用 float left，它确实像上面的图片。所以我尝试的最后一件事是将它们包含在一个更大的名为 applyProjectStateZipCountry 的 div 中。这个想法是，也许在一个更大的 div 中可以让每个浮动都按照我的意愿工作。好吧，它没有帮助。

```
#applyProjectStateZipCountry
{
    background: #E3E2AA;
    width: 90%;
}

#applyProjectstate
{
    float: left;
    background: #A4DEA8;    
    width: 40%;
}

#applyProjectmailcode
{
    float: left;
    background: #EDABED;    
    width: 20%;
}

#applyProjectcountry
{
    float: left;
    background: #B8E3AA;    
    width: 20%;
} 
```

所以问题是当我添加最后的“float：left;”时 在 applyProjectcountry 中，它会导致 State、mailcode 和 country 跳出紫色 div。

我究竟做错了什么？这些 div 中的 div 和浮动左侧是否有一些限制？我一直在四处寻找，但必须浮动教程似乎面向图像周围的浮动文本。

任何帮助将非常感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-07-25T17:08:36.790

你需要像这样清除浮动：

```
<div style="clear: both;"></div> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:54:09.060

另一种选择是为围绕浮动的 div 添加溢出样式。这将使 div 扩展到必要的大小。

```
#applyProjectStateZipCountry {
    background: #E3E2AA;
    overflow: hidden;
    width: 90%;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-25T17:08:12.267

你可能没有清理你的浮动。

```
<div>
 <div class="left"></div>
<div class="left"></div>
<div class="clear"></div>
</div>

styles:

.clear{
 clear:both;
}

.left{
 float:left;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-07-25T17:12:04.420

您需要在#applyProjectcountry 之后重置浮动设置。所以把它放在最后一个带有浮动的元素之后：

```
<div style="clear:both;"></div> 
```

# javascript - 在数据库中存储“静态”内容

> ID：11654960
> 
> 赞同：1
> 
> 时间：2012-07-25T17:05:30.880
> 
> 标签：javascript, html, web-applications

我的问题是关于什么被认为是 Web 开发中的最佳实践。我一直专注于 web 应用程序，尤其是 javascript web 应用程序，所以我的一般做法是加载 html，使用 ajax 从数据库中提取我需要的数据，然后动态构建视图。所以很自然地，我习惯于将我的页面内容存储在数据库中。

这对于博客文章或我想要显示的电话号码和电子邮件地址等少量数据非常有用，但是通常静态内容呢？假设一个营销首页显示有关后端 Web 应用程序的内容？将这一切都保留在一个页面上（即使它对搜索引擎不友好）并使用 javascript 转换来显示数据会很好，但这需要构建一堆 div 并隐藏那些不在视图中的 div，或者拉根据需要从数据库中获取数据。混合内容类型怎么样，比如常见问题列表，然后是单独的一般数据段落等。

这种事情通常是如何完成的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:29:16.843

AJAX 是一个奇妙的东西，但我认为它不应该这样使用。我不能以权威的身份发言，但我发现最好将您的内容存储在单独的页面上。

重要的*是*，如果您决定走 Ajax 路线，请始终使页面实际上可以在历史记录中添加书签/导航。

即我转到[http://www.example.com/webapp/](http://www.example.com/webapp/)，单击 about，它会带我到[http://www.example.com/webapp/#about](http://www.example.com/webapp/#about)。

重新[访问 http://www.example.com/webapp/#about](http://www.example.com/webapp/#about)应该让我回到原来的位置。

有比一个被花哨的过渡冲昏头脑以至于忘记了最终用户的基本需求的网站更令人气愤。

# asp.net - .NET 接口签名

> ID：11654962
> 
> 赞同：4
> 
> 时间：2012-07-25T17:05:34.033
> 
> 标签：asp.net, vb.net

是否有理由必须在接口中指定变量名。例如，看下面的代码：

```
 Public Class Class1
        Public Function Test(ByVal j As Integer)

        End Function End Class

    Public Interface int1
        Function Test(ByVal i As Integer)
      End Interface 
```

类中的整数命名为 j，但在接口中命名为 i。为什么界面不是这样：

```
Public Interface int1
            Function Test(Integer)
          End Interface 
```

我意识到这是一个基本问题。我只是觉得很好奇。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:35:40.833

至少，在 2.0 中，如果覆盖与接口签名不匹配，那么您在技术上并没有实现它[http://msdn.microsoft.com/en-us/library/ms182251(v=vs.80 ).aspx](http://msdn.microsoft.com/en-us/library/ms182251(v=vs.80).aspx)

我现在不确定。至于为什么？我不知道。你来自另一种语言吗？如果我没记错的话，其他语言头文件只需要签名中的类型而不需要名称。

为什么[我们必须命名接口方法参数？](https://stackoverflow.com/questions/8614182/why-do-we-have-to-name-interface-method-parameters)- 这解释了您可能遇到的其他几个原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:26:20.927

一个原因是如果你有

```
Public Interface int1
Function Test(Integer,Integer)           
End Interface 
```

当从 int1 变量调用 Test 时，你怎么知道哪个整数是什么......

基本上编译器本身并不关心参数名称，但我们几乎总是这样做。

评论后。

假设您有两个 int1 实现

Imp1.Test(A,B) 和 Imp2.Test(B,A)

你已经完成了

```
Dim myInt1 as Int1

...

...

myInt1.Test( 
```

现在你被塞满了不是吗？你必须测试 myInt1 看看是 imp1 还是 imp2，所以这个接口完全是浪费时间......

# jqplot - jqplot如何突出显示一个点

> ID：11654965
> 
> 赞同：1
> 
> 时间：2012-07-25T17:05:39.227
> 
> 标签：jqplot

我有一组已经绘制的 jqplot 图，我想在所有这些图中同时响应其中任何一个图中的鼠标移动。因此，当用户在绘图中移动一个数据点时，该集合中包含该数据点的所有绘图也应在其各自的绘图中突出显示该点。并且当鼠标移开时，也一起取消高亮。

是否有现有的方法来进行这种集体鼠标突出显示？

或者，有没有办法通过用户坐标驱动绘图中的点标记？然后我可以想象一个情节集合，并响应 mousemove 事件以维护每个成员情节的状态并驱动突出显示/取消突出显示。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-26T07:25:34.493

所以我创建了一个鼠标管理器类，并让荧光笔驱动一个适当初始化的鼠标管理器实例对象，而不是做它过去在事件中所做的事情。鼠标管理器依次遍历文档中所有已注册的 jqplot 对象，在其中找到功能上等效的相邻点，并使用正确的相邻信息驱动它们各自的荧光笔来执行它过去在鼠标事件上所做的事情。

是的，这是一个 hack，但现在可以完成工作 :) 我希望我可以将它作为一个插件，但它必须拥有一个荧光笔；而且我不知道足够的javascript或jquery来做那种把戏。所以现在我有一些经过调整的插件和很多关于可维护性的担忧。一定会欣赏对这种 javascripting 艺术的良好参考。

# php - 查询时不排除软删除行

> ID：11654966
> 
> 赞同：0
> 
> 时间：2012-07-25T17:05:44.420
> 
> 标签：php, sql

我在让我的查询排除我的“软删除”列时遇到问题 我已将我的代码附在下面关于让它工作的任何提示？它显示具有`deleted`= 1 的行，我只需要它来显示 0

```
$query=mysql_real_escape_string($_GET['query']);

$query_for_result=mysql_query("SELECT * FROM Assets WHERE 
`Badge` like '%".$query."%' or 
`Status` like '%".$query."%' or 
`First Name` like '%".$query."%' or 
`Last Name` like '%".$query."%' or 
`Service Tag` like '%".$query."%' or 
`Asset Tag` like '%".$query."%' and
`deleted` = '0' ")or die(mysql_error());

if(mysql_num_rows($query_for_result1)==0){

}

while($data_fetch=mysql_fetch_array($query_for_result))
{

echo '<h3>';    
echo "<a href=\"modify.php?id=" . $data_fetch['id'] . "\">" . $data_fetch['First Name']  . ' ' . $data_fetch['Last Name'] . "</a>";
echo '<br/><b>Badge:</b> '. $data_fetch['Badge'];
echo '<br/> <b>Service Tag:</b> '. $data_fetch['Service Tag'];
echo ' <b>Asset Tag:</b> '. $data_fetch['Asset Tag'];
echo '<br/> <b>Status:</b> '. $data_fetch['Status'];
echo '<br/><b>Employee Status: </b>';
    if( $data_fetch['Employee Status'] == 'Active' ){
echo '<font color="#32CD32">' . $data_fetch['Employee Status'] . '</font>';
    }
elseif( $data_fetch['Employee Status'] == 'Terminated' ){
echo '<font color="red">' . $data_fetch['Employee Status'] . '</font>';}
echo '<br/> <b>Last Modified:</b> '. $data_fetch['Last Modified'];
echo "<span> </span>";
echo '</h3>';
echo '<br/><p>' ; 

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:10:15.593

所有条件句都在同一范围内。这意味着，只要您遇到第一个为真的条件，整个 where 子句就为真。您需要将 OR 子句放在括号中。

```
WHERE 
(
`Badge` like '%".$query."%' or 
`Status` like '%".$query."%' or 
`First Name` like '%".$query."%' or 
`Last Name` like '%".$query."%' or 
`Service Tag` like '%".$query."%' or 
`Asset Tag` like '%".$query."%'
)
and `deleted` = '0' 
```

# groovy - 如何让 Apache httpcomponents 使用 log4j？

> ID：11654967
> 
> 赞同：0
> 
> 时间：2012-07-25T17:05:44.233
> 
> 标签：groovy, log4j, apache-httpcomponents

我的 log4j.properties 文件如下所示：

```
# Root logger option
log4j.rootLogger=DEBUG, file

# Direct log messages to a log file
log4j.appender.file=org.apache.log4j.RollingFileAppender
log4j.appender.file.File=/home/user/logs/myapp.log
log4j.appender.file.MaxFileSize=10MB
log4j.appender.file.MaxBackupIndex=1
log4j.appender.file.layout=org.apache.log4j.PatternLayout
log4j.appender.file.layout.ConversionPattern=%5p [%c] %m%n

log4j.logger.org.apache.http=DEBUG 
```

文件 myapp.log 已创建，我的 http 请求正在执行，但日志文件仍然为空，我不知道为什么。

编辑：在使用 HttpClient 的类中，我能够在那里记录消息。所以它让我觉得 log4j.logger.org.apache.http 行是错误的，即使[http://hc.apache.org/](http://hc.apache.org/)上的文档告诉你这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T21:00:25.683

我在我的 Grails 应用程序中遇到了类似的问题，它要求我以特定的顺序声明我的配置。我必须按特定顺序声明我的调试过滤器、附加程序和根记录器。我在下面包含了我的配置供您参考。我希望这可以帮助你。

```
def logLayoutPattern = new PatternLayout("%d [%t] %-5p %c %x - %m%n")

debug 'grails.app.controllers.com.sagebauer'
debug 'grails.app.services.com.sagebauer'

error 'org.codehaus.groovy.grails.web.servlet', // controllers
        'org.codehaus.groovy.grails.web.pages', // GSP
        'org.codehaus.groovy.grails.web.sitemesh', // layouts
        'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
        'org.codehaus.groovy.grails.web.mapping', // URL mapping
        'org.codehaus.groovy.grails.commons', // core / classloading
        'org.codehaus.groovy.grails.plugins', // plugins
        'org.codehaus.groovy.grails.orm.hibernate', // hibernate integration
        'org.springframework',
        'org.hibernate',
        'net.sf.ehcache.hibernate'
appenders {
    appender new ConsoleAppender(name: "console",
            threshold: log4jConsoleLogLevel,
            layout: logLayoutPattern
    )
}

root {
    error 'console'
    additivity = true
} 
```

# javascript - javascript参数传递

> ID：11654971
> 
> 赞同：0
> 
> 时间：2012-07-25T17:06:03.900
> 
> 标签：javascript

我有一个带有值的 javascript 函数。该值从下拉列表中开始。我无法将值传递给函数，并且想知道我做错了什么。任何帮助，将不胜感激。

JS函数

```
Puma.selectEvent = function(year) {

        var year = year;
        select the event
} 
```

下拉列表更改事件。sYear、sMonth 和 sSeason 是下拉列表名称。“彪马”并不重要。

```
onChange=Puma.selectEvent(sYear.value); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:17:17.537

您似乎误解了事件连接的工作方式。让我们从这条线开始

```
onChange=Puma.selectEvent(sYear.value); 
```

您可能认为这是将 Puma.selectEvent 处理程序绑定到 onChange 事件……但您错了。如果你想这样做，你会写：

```
onChange=Puma.selectEvent; 
```

IE。您将 onChange 设置为“selectEvent”函数本身。您所做的是将 onChange 设置为调用 selectEvent的*输出；*换句话说， selectEvent 返回的内容。

其次，让我们看一下这一行：

```
Puma.selectEvent = function(year) { 
```

您可能认为这会导致您将年份（来自选择）传递给您的函数，但您错了。所有事件处理程序都会传递一个*事件*对象（通常称为“e”）。现在，该事件具有可用于获取选择值的属性（如 target 和 currentTarget），但您需要执行类似`e.target.value`的操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-25T17:37:09.367

您发布的代码存在一些问题：

```
Puma.selectEvent = function (year) {
    // year is a parameter, you should not overwrite it
    var year = year; // get rid of this line
    select the event
}

// this line is EXECUTING Puma.selectEvent(sYear.value)
// and assigning it's return value to the onchange property
onChange=Puma.selectEvent(sYear.value); 
```

您可能想要这样做：

```
onChange = function () {
    return Puma.selectEvent(sYear.value);
}; 
```

# javascript - 在 webworker 中获取 XSLTProcessor 的实例？

> ID：11654972
> 
> 赞同：2
> 
> 时间：2012-07-25T17:06:08.090
> 
> 标签：javascript, xslt, web-worker

我已经用 XSLT 成功地转换了 XML 文档，我正在从 JavaScript 启动这个过程。由于 XML 输入相当大，我的计划是在 webworker 中启动 XSLT 转换。

我在这一行得到的错误 `var processor = new XSLTProcessor();` 是

```
`Chrome--> Uncaught ReferenceError: XSLTProcessor is not defined 
'Firefox--> XSLTProcessor is not defined` 
```

正如我之前提到的那样，它是有效的。有没有人建议如何在 webworker 中获取 XSLTProcessor 的实例？我知道网络工作者可以访问的内容非常有限。

谢谢 ！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T20:37:06.060

对不起，兄弟，你不能。在您的情况下，WebWorkers 无法访问与 DOM 或窗口对象相关的任何内容。由于这不是线程安全的，因此浏览器禁止这样做。只有可序列化的对象才能传递给工作人员，此外，您不能序列化本机对象。

对于类似的问题，请参阅[此处](https://stackoverflow.com/questions/10945672/web-workers-and-accessing-object-attached-to-the-window-object)或[此处](https://stackoverflow.com/questions/6179159/accessing-localstorage-from-a-webworker)。

# javascript - 动画 css 开关

> ID：11654975
> 
> 赞同：0
> 
> 时间：2012-07-25T17:06:13.800
> 
> 标签：javascript, css, animation

有没有办法为这个功能设置动画？因此，当它在 css 之间“扩展”切换时，它会缓慢/中等/快速地执行此操作。

```
 function changeCssClass(objDivID)
    {
        if(document.getElementById(objDivID).className=='normalSize')
        {
            document.getElementById(objDivID).className = 'expandedSize';
        }
        else
        {
            document.getElementById(objDivID).className = 'normalSize';
        }
    } 
```

CSS代码：

```
.normalSize { width:640px; height:360px; }

.expandedSize { width:1000px; height:480px; } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-05T23:09:05.263

这只是使用 CSS 转换很容易做到的事情。使用其他任何东西都会很遗憾。开始：

```
 function changeCssClass() {
        if (document.getElementById('objDivID').className == 'normalSize') {
            document.getElementById('objDivID').className = 'expandedSize';
        } else {
            document.getElementById('objDivID').className = 'normalSize';
        }
    }

    document.getElementById('objDivID').onclick = function(){
        changeCssClass();
    } 
```

和CSS：

```
#objDivID {
  -webkit-transition: all 0.2s ease;
  -moz-transition: all 0.2s ease;
  -ms-transition: all 0.2s ease;
  -o-transition: all 0.2s ease;
  transition: all 0.2s ease;
} 
```

[http://jsfiddle.net/U8yZ6/](http://jsfiddle.net/U8yZ6/)

它由 onclick 触发，但您可以使用任何类型的触发器。

# jquery - 如何搜索与“动态”名称匹配的所有元素

> ID：11654976
> 
> 赞同：0
> 
> 时间：2012-07-25T17:06:16.433
> 
> 标签：jquery

```
 $(".gl").hover(function() {
    $('select[name="' + $(this).attr('name') + '"]').removeClass("gl").addClass("glHover");//Occurs when hovering over
    }, function(){  
        //Occurs when hover is done
    $('select[name="' + $(this).attr('name') + '"]').removeClass("glHover").addClass("gl");
    }); 
```

这是我的代码，基本上当有人将鼠标悬停在任何 gl 类上时，它需要找到名称与它自己的名称匹配的所有元素，但这对我不起作用，而且我对 jquery 还很陌生，所以我不是确定如何解决这个问题

编辑了上面的代码，现在它仍然无法正常工作，这就是为什么我的 html 看起来像（大约）：

```
<table><tr>
<td class='gl' name='07/25'></td>
</td></table> 
```

**更新**

```
$('td.gl').hover(function() {
$('select[name="'+ $(this).data('name') +'"]').toggleClass('gl glHover');
}); 
```

和

```
<td class='gl' data-name='07/18'></td> 
```

还是行不通

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:10:12.737

尝试：

```
$(".gl").hover(function() 
    $('select[name="' + $(this).attr('name') + '"]').removeClass("gl").addClass("glHover"); 
}, function(){
    $('select[name="' + $(this).attr('name') + '"]').removeClass("glHover").addClass("gl"); 
}); 
```

您的元素声明无效，因为您缺少`+`for 连接，在这种情况下用于替换元素的 name 属性，并且您的引号不正确。我切换到单引号，因为您对 name 属性使用双引号并且语法无效。

**更新：**您似乎想选择名称与悬停元素名称相对应的任何元素类型。目前使用`select[...]`查找`select`元素。我建议您使用具有`class`对应值的属性`name`将您的元素链接在一起，然后您可以使用`class`表示该`name`属性的 a 引用这些元素。

在这种情况下，请尝试以下操作：

```
$(".gl").hover(function() 
    $('.' + this.name).removeClass("gl").addClass("glHover"); 
}, function(){
    $('.' + this.name).removeClass("glHover").addClass("gl"); 
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:10:18.507

```
 $("select[name='"+$(this).attr('name')+"']") 
```

应该管用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-25T17:19:20.920

您的代码有字符串连接错误，`+`最后错过了 a ，您可以使用 获取名称`this.name`，这比`$(this).attr('name')`.

```
$(".gl").hover(function() {
    $("select[name="+ this.name + "]").removeClass("gl").addClass("glHover");   
}, function(){
    $("select[name="+ this.name + "]").removeClass("glHover").addClass("gl");
}); 
```

**或者**

```
$(".gl").hover(function() {
    $("select[name="+ this.name + "]").removeClass("gl").addClass("glHover"); 
}); 
```

## `name`不是 的有效属性`td`。

而不是像下面这样`name`使用：`data-name`

```
<table>
    <tr>
        <td class='gl' data-name='07/25'>07/25</td>
        <td class='gl' data-name='07/25'>07/25</td>
    </tr>
</table> 
```

并更改 jQuery 代码：

```
$('td.gl').hover(function() {
    $('select[name="'+ $(this).data('name') +'"]').toggleClass('gl glHover');
}); 
```

# c++ - 难以使用样式表对 QTreeView 进行样式设置

> ID：11654977
> 
> 赞同：4
> 
> 时间：2012-07-25T17:06:27.780
> 
> 标签：c++, css, qt, stylesheet, qtstylesheets

我正在尝试使 QTreeView 中的父项更高，具有更大的字体，右侧的自定义展开/折叠图标并带有下划线。到目前为止，这是我的样式表：

```
QTreeView::item:has-children
{
    font: bold 24px;
    height: 20px;
    border-bottom: 2px groove lightgray;
}
QTreeView::branch:closed:has-children
{
    border-bottom: 2px groove lightgray;
    image: url(:/images/collapsed.png);
}
QTreeView::branch:open:has-children
{
    border-bottom: 2px groove lightgray;
    image: url(:/images/expanded.png);
} 
```

一些样式正在起作用。分支和项目上的下划线仅在项目有我想要的孩子时出现。图标已更改，这也很好。但是，“高度”和“字体”没有得到尊重，所有项目都具有相同的高度和字体。QTreeView::item:has-children 似乎是有效的，因为边界底部受到尊重。如果我为简单的“QTreeView::item”设置“高度”，所有项目都会获得该高度，但“字体”仍然不起作用。任何人都可以帮助我这里的语法吗？

树视图在设计器中设置了以下属性：

```
frameShape: NoFrame
frameShadow: Plain
editTriggers: NoEditTriggers
selectionMode: NoSelection
animated: true
headerHidden: true 
```

其余属性为默认值

# event-handling - Android NDK 操纵杆事件

> ID：11654978
> 
> 赞同：2
> 
> 时间：2012-07-25T17:06:35.483
> 
> 标签：event-handling, android-ndk, joystick

有谁知道如何从 Android NDK 捕获操纵杆事件？

NDK 不包含任何让我从 AMotionEvent 中提取轴信息的 API。（AXIS_X 和 AXIS_Y 映射到指针 (x,y) 对，但我需要的不止这些。）有 Java API 可以做到这一点……但是当我使用 NDK 时，事件不会传递给 Java -land，所以我从来没有收到过它们。

而且我还没有找到将 NDK AMotionEvent 转换为 Java MotionEvent 的任何方法，以便我可以通过 JNI 将其传递给 Java 并以这种方式提取信息。

我绝对必须为我的应用程序获取操纵杆信息，但到目前为止，无论多么邪恶，我都找不到这样做的方法。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T21:04:39.437

Nvidia Tegra 的人员通过使用未记录的函数调用设法做到了这一点。他们在 libandroid.so 上执行 dlopen 和 dlsym 以查找 AMotionEvent_getAxisValue()

```
void* lib = dlopen("libandroid.so",0);
...
s_AMotionEvent_getAxisValue = (float(*)(const AInputEvent*,int32_t axis, size_t pointer_index))
        dlsym(lib,"AMotionEvent_getAxisValue"); 
```

[有关更多信息，您应该参考Tegra Android 开发包](https://developer.nvidia.com/tegra-android-development-pack)中的 nvidias android 示例

# php - 将 XML SOAP 响应插入数据库

> ID：11654979
> 
> 赞同：0
> 
> 时间：2012-07-25T17:06:44.360
> 
> 标签：php, xml, soap, simplexml

我已经花了几个小时试图为此找到一个内置函数，但我没有得到任何结果。

有人对如何将 XML SOAP 请求中的整个数据响应解析到数据库中有一些经验吗？

我正在寻找的是一个内置的 PHP 函数来做到这一点，有没有一个函数可以做到这一点？还是我需要自己做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T18:09:42.047

虽然我不明白为什么有人真的想做这样的事情，但你可以通过[扩展`SoapClient`class](https://stackoverflow.com/questions/8086769/how-to-capture-outgoing-soapclient-request)来做到这一点。现在，您所要做的就是获取响应提供的 XML 字符串，然后用它做任何您想做的事情。

PS：如果你设置了`'trace' => TRUE`标志，你可以直接调用`$client->__getLastRequest()`，正如[这里](https://stackoverflow.com/a/1626572/1174378)所解释的，而不必扩展 SoapClient 类。

# java - 如何设置gridlayout jpanel的大小

> ID：11654983
> 
> 赞同：1
> 
> 时间：2012-07-25T17:07:02.583
> 
> 标签：java, swing, layout, grid-layout

我正在尝试设置 gridlayout jpanel 的大小。这是代码：

```
JFrame myFrame = new JFrame();    
    myFrame.setLayout(new FlowLayout());  
    myFrame.setLocation(400, 100);
    myFrame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE); 
    JLabel jlMins = new JLabel("Number of minutes for tutoring session (should be a positive decimal number):  0.0");
    JLabel jlEarnings = new JLabel("Earnings in dollars and cents received (should be positive decimal number):  0.0");
    jtfMins = new JTextField(20); 
    jtfEarnings = new JTextField(20);
    JPanel jpMins = new JPanel(new BorderLayout());
    JPanel jpEarnings = new JPanel(new BorderLayout());
    jpMins.setPreferredSize(new Dimension(300,50));
    jpEarnings.setPreferredSize(new Dimension(300,50));
    jpMins.add(jlMins,BorderLayout.NORTH);
    jpMins.add(jtfMins,BorderLayout.CENTER);
    jpEarnings.add(jlEarnings,BorderLayout.NORTH);
    jpEarnings.add(jtfEarnings,BorderLayout.CENTER);
    JButton jbQuit = new JButton("Quit");
    JButton jbEnter = new JButton("Enter");
    JButton jbReport = new JButton("Run Report");
    jbQuit.setActionCommand("quit");
    jbEnter.setActionCommand("enter");
    jbReport.setActionCommand("report");
    jbQuit.addActionListener(this);
    jbEnter.addActionListener(this);
    jbReport.addActionListener(this);
    JPanel jpButtons = new JPanel(new GridLayout(4,1,0,20)); 
    jpButtons.setSize(new Dimension(50,150));
    jpButtons.add(jbEnter);  
    jpButtons.add(jbReport);
    jpButtons.add(jbQuit); 
    JPanel jpNorth = new JPanel(new BorderLayout());
    jpNorth.add(jpMins,BorderLayout.NORTH); 
    jpNorth.add(jpEarnings,BorderLayout.CENTER);
    jpNorth.add(jpButtons,BorderLayout.SOUTH);
    jtaReports = new JTextArea();
    jtaReports.setColumns(40);
    jtaReports.setRows(10);
    jtaReports.setLineWrap(true);
    JScrollPane jspReports = new JScrollPane(jtaReports);
    jspReports.setVerticalScrollBarPolicy(JScrollPane.VERTICAL_SCROLLBAR_ALWAYS);
    JPanel jpSouth = new JPanel();
    jpSouth.setPreferredSize(new Dimension(350,200)); 
    jpSouth.add(jspReports); 
    JPanel jpMain = new JPanel(new BorderLayout()); 
    jpMain.add(jpNorth,BorderLayout.NORTH);
    jpMain.add(jpSouth,BorderLayout.SOUTH);
    jpMain.setPreferredSize(new Dimension(500,500));
    myFrame.setContentPane(jpMain);  
    myFrame.pack();
    myFrame.setVisible(true); 
```

面板名称是 jpButtons。在上面的代码中，我主要谈论的是这一部分：

```
 JButton jbQuit = new JButton("Quit");
JButton jbEnter = new JButton("Enter");
JButton jbReport = new JButton("Run Report");
jbQuit.setActionCommand("quit");
jbEnter.setActionCommand("enter");
jbReport.setActionCommand("report");
jbQuit.addActionListener(this);
jbEnter.addActionListener(this);
jbReport.addActionListener(this);
JPanel jpButtons = new JPanel(new GridLayout(4,1,0,20)); 
jpButtons.setSize(new Dimension(50,150));
jpButtons.add(jbEnter);  
jpButtons.add(jbReport);
jpButtons.add(jbQuit); 
```

setSize 和 setPreferredSize 究竟是如何工作的，或者如何让它们在 jpanel、组件等上正常工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-25T17:22:49.240

缩放和定位由布局管理器处理；让它完成它的工作。

# java - ejb 编译失败

> ID：11654984
> 
> 赞同：0
> 
> 时间：2012-07-25T17:07:04.810
> 
> 标签：java, eclipse, ejb, weblogic-10.x, jdk1.5

我正在努力解决这个问题。它以前对我有用，突然当我对接口和实现类进行一些更改以及尝试构建时，我收到以下错误。我尝试卸载 weblogic，jdk，一切。但我仍然有这个问题。请帮帮我..我正在使用 weblogic10.0 ， jdk1.5.0_22 ， jre105.0_22 ， Eclipse indigo

```
Buildfile: C:\CeNAnalyticalPhase1\CeNStorageService\build.xml
clean:
   [delete] Deleting directory C:\CeNAnalyticalPhase1\CeNStorageService\ant.build
   [delete] Deleting directory C:\CeNAnalyticalPhase1\CeNStorageService\dist
   [delete] Deleting directory C:\CeNAnalyticalPhase1\CeNStorageService\testreport
prepare:
    [mkdir] Created dir: C:\CeNAnalyticalPhase1\CeNStorageService\ant.build
    [mkdir] Created dir: C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes
    [mkdir] Created dir: C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\testclasses
    [mkdir] Created dir: C:\CeNAnalyticalPhase1\CeNStorageService\dist
    [mkdir] Created dir: C:\CeNAnalyticalPhase1\CeNStorageService\testreport
    [mkdir] Created dir: C:\CeNAnalyticalPhase1\CeNStorageService\testreport\html
    [mkdir] Created dir: C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes\META-INF
     [copy] Copying 3 files to C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes\META-INF
compile:
    [javac] C:\CeNAnalyticalPhase1\CeNStorageService\build.xml:194: warning: 'includeantruntime' was not set, defaulting to build.sysclasspath=last; set to false for repeatable builds
    [javac] Compiling 179 source files to C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes
    [javac] C:\CeNAnalyticalPhase1\CeNStorageService\src\com\pfizer\pgrd\chemistry\enotebook\storage\tests\TestCreateParallelNotebook.java:74: warning: [deprecation] createParallelExperiment(java.lang.String,java.lang.String) in com.pfizer.pgrd.chemistry.enotebook.storage.delegate.StorageDelegate has been deprecated
    [javac]               NotebookPageModel pageModel = storageObj.createParallelExperiment(spid, "27071975");
    [javac]                                                                   ^
    [javac] C:\CeNAnalyticalPhase1\CeNStorageService\src\com\pfizer\pgrd\chemistry\enotebook\storage\tests\TestCreateParallelNotebook.java:144: warning: [deprecation] createParallelExperiment(java.lang.String,java.lang.String) in com.pfizer.pgrd.chemistry.enotebook.storage.delegate.StorageDelegate has been deprecated
    [javac]       NotebookPageModel pageModel = storageObj.createParallelExperiment(spid, nbK );
    [javac]                                                   ^
    [javac] C:\CeNAnalyticalPhase1\CeNStorageService\src\com\pfizer\pgrd\chemistry\enotebook\storage\tests\TestNotebookInsertDAO.java:238: warning: [deprecation] putBytes(long,byte[]) in oracle.sql.BLOB has been deprecated
    [javac]             tempBlob.putBytes(1, bytes);
    [javac]                                 ^
    [javac] C:\CeNAnalyticalPhase1\CeNStorageService\src\com\pfizer\pgrd\chemistry\enotebook\storage\tests\loadtests\CreateExperimentTest.java:41: warning: [deprecation] createParallelExperiment(java.lang.String,java.lang.String) in com.pfizer.pgrd.chemistry.enotebook.storage.delegate.StorageDelegate has been deprecated
    [javac]                     NotebookPageModel page = ssi.createParallelExperiment(spid,notebook);
    [javac]                                                                     ^
    [javac] Note: Some input files use unchecked or unsafe operations.
    [javac] Note: Recompile with -Xlint:unchecked for details.
    [javac] 4 warnings
compile-ejb:
   [wlappc] C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes\com\pfizer\pgrd\chemistry\enotebook\storage\ejb\StorageRemote_ptetod_LocalHomeImpl.java:73: warning: non-varargs call of varargs method with inexact argument type for last parameter;
   [wlappc] cast to java.lang.Class for a varargs call
   [wlappc] cast to java.lang.Class[] for a non-varargs call and to suppress this warning
   [wlappc]     "ejbCreate", null);
   [wlappc]                  ^
   [wlappc] C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes\com\pfizer\pgrd\chemistry\enotebook\storage\ejb\StorageRemote_ptetod_LocalHomeImpl.java:77: warning: non-varargs call of varargs method with inexact argument type for last parameter;
   [wlappc] cast to java.lang.Class for a varargs call
   [wlappc] cast to java.lang.Class[] for a non-varargs call and to suppress this warning
   [wlappc]         "ejbPostCreate", null); 
   [wlappc]                          ^
   [wlappc] C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes\com\pfizer\pgrd\chemistry\enotebook\storage\ejb\StorageRemote_ptetod_Impl.java:11: com.pfizer.pgrd.chemistry.enotebook.storage.ejb.StorageRemote_ptetod_Impl is not abstract and does not override abstract method getSubmittedBatchAttachments(java.util.List) in com.pfizer.pgrd.chemistry.enotebook.storage.ejb.StorageRemote_ptetod_Intf
   [wlappc] public final class StorageRemote_ptetod_Impl
   [wlappc]              ^
   [wlappc] C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes\com\pfizer\pgrd\chemistry\enotebook\storage\ejb\StorageRemote_ptetod_HomeImpl.java:132: warning: non-varargs call of varargs method with inexact argument type for last parameter;
   [wlappc] cast to java.lang.Class for a varargs call
   [wlappc] cast to java.lang.Class[] for a non-varargs call and to suppress this warning
   [wlappc]     "ejbCreate", null);
   [wlappc]                  ^
   [wlappc] C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes\com\pfizer\pgrd\chemistry\enotebook\storage\ejb\StorageRemote_ptetod_HomeImpl.java:136: warning: non-varargs call of varargs method with inexact argument type for last parameter;
   [wlappc] cast to java.lang.Class for a varargs call
   [wlappc] cast to java.lang.Class[] for a non-varargs call and to suppress this warning
   [wlappc]         "ejbPostCreate", null); 
   [wlappc]                          ^
   [wlappc] Note: Some input files use unchecked or unsafe operations.
   [wlappc] Note: Recompile with -Xlint:unchecked for details.
   [wlappc] 1 error
   [wlappc] 4 warnings

BUILD FAILED
C:\CeNAnalyticalPhase1\CeNStorageService\build.xml:214: weblogic.utils.compiler.ToolFailureException: [J2EE:160119]Appc is unable to process the file 'C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes'. The following error occurred:

Compiler failed executable.exec

    at weblogic.ejb20.ejbc.EJBCompiler.doCompile(EJBCompiler.java:274)
    at weblogic.ejb20.ejbc.EJBCompiler.compileEJB(EJBCompiler.java:476)
    at weblogic.ejb20.ejbc.EJBCompiler.compileEJB(EJBCompiler.java:387)
    at weblogic.appc.compileEJB(appc.java:802)
    at weblogic.appc.compileEJB(appc.java:776)
    at weblogic.appc.compileInput(appc.java:463)
    at weblogic.appc.runBody(appc.java:184)
    at weblogic.utils.compiler.Tool.run(Tool.java:192)
    at weblogic.utils.compiler.Tool.run(Tool.java:147)
    at weblogic.appc.main(appc.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at weblogic.ant.taskdefs.j2ee.CompilerTask.invokeMain(CompilerTask.java:278)
    at weblogic.ant.taskdefs.j2ee.Appc.privateExecute(Appc.java:200)
    at weblogic.ant.taskdefs.j2ee.Appc.execute(Appc.java:124)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:424)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:138)

java.io.IOException: Compiler failed executable.exec
    at weblogic.utils.compiler.CompilerInvoker.compileMaybeExit(CompilerInvoker.java:469)
    at weblogic.utils.compiler.CompilerInvoker.compile(CompilerInvoker.java:328)
    at weblogic.utils.compiler.CompilerInvoker.compile(CompilerInvoker.java:336)
    at weblogic.ejb20.ejbc.EJBCompiler.doCompile(EJBCompiler.java:270)
    at weblogic.ejb20.ejbc.EJBCompiler.compileEJB(EJBCompiler.java:476)
    at weblogic.ejb20.ejbc.EJBCompiler.compileEJB(EJBCompiler.java:387)
    at weblogic.appc.compileEJB(appc.java:802)
    at weblogic.appc.compileEJB(appc.java:776)
    at weblogic.appc.compileInput(appc.java:463)
    at weblogic.appc.runBody(appc.java:184)
    at weblogic.utils.compiler.Tool.run(Tool.java:192)
    at weblogic.utils.compiler.Tool.run(Tool.java:147)
    at weblogic.appc.main(appc.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at weblogic.ant.taskdefs.j2ee.CompilerTask.invokeMain(CompilerTask.java:278)
    at weblogic.ant.taskdefs.j2ee.Appc.privateExecute(Appc.java:200)
    at weblogic.ant.taskdefs.j2ee.Appc.execute(Appc.java:124)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:424)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:138)

--------------- nested within: ------------------
weblogic.utils.compiler.ToolFailureException: [J2EE:160121]Errors encountered while compiling module 'C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes':

Compiler failed executable.exec
 - with nested exception:
[
Compiler failed executable.exec
]
    at weblogic.appc.compileEJB(appc.java:781)
    at weblogic.appc.compileInput(appc.java:463)
    at weblogic.appc.runBody(appc.java:184)
    at weblogic.utils.compiler.Tool.run(Tool.java:192)
    at weblogic.utils.compiler.Tool.run(Tool.java:147)
    at weblogic.appc.main(appc.java:1030)
    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at weblogic.ant.taskdefs.j2ee.CompilerTask.invokeMain(CompilerTask.java:278)
    at weblogic.ant.taskdefs.j2ee.Appc.privateExecute(Appc.java:200)
    at weblogic.ant.taskdefs.j2ee.Appc.execute(Appc.java:124)
    at org.apache.tools.ant.UnknownElement.execute(UnknownElement.java:291)
    at sun.reflect.GeneratedMethodAccessor4.invoke(Unknown Source)
    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
    at java.lang.reflect.Method.invoke(Method.java:585)
    at org.apache.tools.ant.dispatch.DispatchUtils.execute(DispatchUtils.java:106)
    at org.apache.tools.ant.Task.perform(Task.java:348)
    at org.apache.tools.ant.Target.execute(Target.java:390)
    at org.apache.tools.ant.Target.performTasks(Target.java:411)
    at org.apache.tools.ant.Project.executeSortedTargets(Project.java:1399)
    at org.apache.tools.ant.Project.executeTarget(Project.java:1368)
    at org.apache.tools.ant.helper.DefaultExecutor.executeTargets(DefaultExecutor.java:41)
    at org.eclipse.ant.internal.launching.remote.EclipseDefaultExecutor.executeTargets(EclipseDefaultExecutor.java:32)
    at org.apache.tools.ant.Project.executeTargets(Project.java:1251)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.run(InternalAntRunner.java:424)
    at org.eclipse.ant.internal.launching.remote.InternalAntRunner.main(InternalAntRunner.java:138)
 - with nested exception:
[weblogic.utils.compiler.ToolFailureException: [J2EE:160121]Errors encountered while compiling module 'C:\CeNAnalyticalPhase1\CeNStorageService\ant.build\classes':

Compiler failed executable.exec
 - with nested exception:
[
Compiler failed executable.exec
]] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:47:09.883

堆栈跟踪非常清楚：不会`StorageRemote_ptetod_Impl`覆盖`getSubmittedBatchAttachments(java.util.List)`.`StorageRemote_ptetod_Intf`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-27T11:40:56.307

感谢您的回复。我解决了这个问题。问题是我们不能在 ejb 接口中使用 List 作为参数。它应该作为数组传递。当我更改为数组时，构建成功。这是我的学习点。

# python - SMTPHandler 中的颜色编码回溯和发送 HTML

> ID：11654985
> 
> 赞同：0
> 
> 时间：2012-07-25T17:07:08.023
> 
> 标签：python, email, logging, html-email, color-coding

我一直想让我的异常电子邮件更易于阅读/导航，我认为如果我可以对输出进行颜色编码，特别是回溯和一些 JSON 打印，它会让我的生活更轻松。

所以这个问题是双重的：

1.  如何设置我的格式化程序`SMTPHandler`以便它吐出 HTML，并将`SMTPHandler`电子邮件作为 HTML 而不仅仅是纯文本发送？

2.  您是否知道任何可以轻松获取回溯和/或 JSON 并将输出颜色编码为 HTML 的库？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:13:30.637

该解决方案扩展了标准 logging.SMTPHandler 并使用`pygments`库来创建彩色 html 版本的回溯。它不是很优雅，因为它必须使用 formatter 私有属性：`_fmt`来构造额外的日志信息，但它可以工作（您可以使用 pygments 或直接在 html 变量中自定义样式）：

```
from email.mime.multipart import MIMEMultipart
from email.mime.text import MIMEText
from email.utils import formatdate
import logging
from logging.handlers import SMTPHandler
from pygments import highlight
from pygments.formatters import HtmlFormatter
from pygments.lexers import PythonTracebackLexer
import smtplib

class ColorfulSMTPHandler(SMTPHandler):

    def emit(self, record):
        try:
            port = self.mailport
            if not port:
                port = smtplib.SMTP_PORT
            smtp = smtplib.SMTP(self.mailhost, port)
            msg = MIMEMultipart('alternative')
            msg['Subject'] = self.getSubject(record)
            msg['From'] = self.fromaddr
            msg['To'] = ",".join(self.toaddrs)
            msg['Date'] = formatdate()

            text = self.format(record)
            msg.attach(MIMEText(text, 'plain'))
            if record.exc_text:
                html_formatter = HtmlFormatter(noclasses=True)
                tb = highlight(record.exc_text, PythonTracebackLexer(), html_formatter)

                info = (self.formatter or logging._defaultFormatter)._fmt % record.__dict__
                info = '<p style="white-space: pre-wrap; word-wrap: break-word;">%s</p>' % info

                html = ('<html><head></head><body>%s%s</body></html>')% (info, tb)
                msg.attach(MIMEText(html, 'html'))
            if self.username:
                if self.secure is not None:
                    smtp.ehlo()
                    smtp.starttls(*self.secure)
                    smtp.ehlo()
                smtp.login(self.username, self.password)
            smtp.sendmail(self.fromaddr, self.toaddrs, msg.as_string())
            smtp.quit()
        except (KeyboardInterrupt, SystemExit):
            raise
        except:
            self.handleError(record) 
```

**编辑**：您还可以使用我的大正义分支中的日志记录处理程序：[https ://github.com/paluh/great-justice-with-logging/blob/master/great_justice/logging.py#L85](https://github.com/paluh/great-justice-with-logging/blob/master/great_justice/logging.py#L85)

它会生成非常好的、信息丰富的回溯——在电子邮件和终端处理程序中使用相同的格式：

![在此处输入图像描述](../Images/b8b04541ac251d26934aefdab2427e97.png)

# java - Java 库路径问题

> ID：11654986
> 
> 赞同：1
> 
> 时间：2012-07-25T17:07:08.557
> 
> 标签：java, classpath, shared-libraries, static-libraries

我在 /data/subv/Mem 中有以下 JNI 共享库，我已将 LD_LIBRARY_PATH 设置为：

```
 LD_LIBRARY_PATH=/data/subv/Mem 
```

其中包含两个文件：bmemBridgelib.so 和 memBridgelib.so，使用以下命令生成：

```
 gcc -I"/usr/lib/jvm/java-6-sun/include" -I"/usr/lib/jvm/java-6-sun/include/linux" -o 
  libmemBridgelib.so -shared -Wl,-soname,libmemBridge.so JniBridge.c -static -lc -fPIC 
```

我在我的 Java 程序中加载库以使用 JNI，如下所示

```
static {
    System.loadLibrary("memBridgelib");
} 
```

但得到以下错误：

```
 Caused by: java.lang.UnsatisfiedLinkError: no memBridgelib in java.library.path 
```

当我打印库路径时，我可以确认 mem 文件夹不在其中：

```
 /usr/lib/jvm/java-6-openjdk/jre/lib/amd64/server:/usr/lib/jvm/java-6-openjdk/jre/lib/amd64:/usr/lib/jvm/java-6-openjdk/jre/../lib/amd64:/usr/java/packages/lib/amd64:/usr/lib/jni:/lib:/usr/lib 
```

有任何想法吗？通过设置 LD_LIBRARY_PATH 似乎可以解决所有其他相关问题

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:14:04.433

```
java -Djava.library.path=/data/ncrooks/subv/stream-paas/Mem[:<other_lib_paths>] ... 
```

[更多细节](http://kalblogs.blogspot.com/2009/01/java.html)。

# 2d - 对象的 2D 物理引擎碰撞响应旋转

> ID：11654990
> 
> 赞同：7
> 
> 时间：2012-07-25T17:07:30.813
> 
> 标签：2d, game-engine

我正在编写自己的基本物理引擎，但现在遇到了一个我无法解决的问题。可能是因为我不知道如何用谷歌搜索这个问题。

所以这是我的问题。我希望这张图片可以解释它：

[碰撞响应](http://i.stack.imgur.com/AFaDx.png)

我有两个对象。灰色的是固定不动的，绿色的是从上面掉下来的。绿色物体具有三个向量：力、加速度和速度。它与固定的灰色物体发生碰撞。

真正的问题是如何在绿色物体掉落时获得旋转？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-07-25T17:32:04.800

听起来您可能不了解刚体动力学背后的基础物理学。我这么说只是因为你在谈论这类问题时没有提到任何常用的术语。您需要将方向和角速度的概念（位置和线速度的旋转模拟）引入系统中的每个动态体，并计算各种中间量，如惯性矩、角加速度和扭矩。

也许最好的介绍性参考是[Chris Hecker](http://chrishecker.com/Rigid_body_dynamics)为 Game Developer Magazine 撰写的系列文章。假设您已经解决了非旋转动力学（第 1 部分中介绍）和碰撞检测（本系列未介绍），您应该从第 2 部分开始并继续第 3 部分。它们将为您提供坚实的物理学基础和实现旋转碰撞响应所需的数学。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2015-06-25T13:58:31.203

当对象发生碰撞时，您按如下所述执行一次。

让我们称绿色矩形为“a”，另一个为“b”。

## 1.

首先你需要矩形“旋转质量”，惯性质量。

ai = 4/3 * 宽度 * 高度 * (宽度^2 + 高度^2) * a.密度

## 2.

然后你需要从矩形的质心（所有角的平均位置）指向接触位置（矩形碰撞的地方）的向量，我们称之为“r”。

## 3.

然后你需要找到碰撞法线。该法线是从 b 施加到 a 的脉冲的方向。法线是长度为 1 个单位的向量。在您的示例中，法线可能会向上。让我们将法线向量称为“n”。

## 4.

现在你需要 a 上接触点的速度。如果 a 不旋转，则公式为：

vp = a.vel

如果 a 正在旋转，则公式为：

vp = a.vel + cross(a.r_vel, r)

a.r_vel 是以弧度给出的 a 的旋转速度，正方向为逆时针方向。

cross() 表示叉积，函数为：

交叉 (v,i) = [-i * vy , i * vx]

扩展公式为：

vp = av + [-r * a.r_vel.y , r * a.r_vel.x]

## 5.

现在您需要计算对象是否相互移动。将 vp 投影到 n 上。

vp_p = 点（vp，n）

点 (v1, v2) = v1.x * v2.x + v1.y * v2.y

vp_p 是一个标量（一个值，而不是一个向量）。

如果 vp_p 为负，则对象正在相互靠近，如果 > 0，则它们正在分开。

## 6.

现在你需要计算阻止a移动到b的冲动，冲动是：

j = -vp_p / ( 1/a.mass + cross(r,n)^2 / ai )

两个向量之间的叉积是：

交叉（v1，v2）= v1.x * v2.y - v1.y * v2.x

它返回一个标量。

将冲量与法线相乘得到冲量向量：

jn = j * n

## 7.

现在您需要将脉冲应用于：

a.new_vel = a.old_vel + jn / a.mass；

a.new_r_vel = a.old_r_vel + cross(r,jn) / ai;

如果您希望碰撞完全有弹性，则必须将冲量乘以 2。让我们将此乘数称为“e”。e 需要介于 1 和 2 之间。1 表示没有能量守恒，2 表示所有能量都守恒。

## 示例代码：

```
var vp = a.vel + cross(a.r_vel, r);
var vp_p = dot(vp,n); // negative val = moving towards each other
if (vp_p >= 0) { // do they move apart?
    return false;
}

// normal impulse
var j = - e * vp_p / (
            1/a.mass + cross(r,n)^2 / a.i
        );
var jn = j * n;
//
a.vel = a.vel + jn / a.mass;
a.r_vel = a.r_vel + cross(r,jn) / a.i; 
```

如果 b 不是静态的，算法会略有不同：

ar = 从 a 的质心指向接触位置的向量

```
var vp = a.vel + cross(a.r_vel, a.r) - b.vel - cross(b.r_vel, b.r);
var vp_p = dot(vp,n); // negative val = moving towards each other
if (vp_p >= 0) { // do they move apart?
    return false;
}

// normal impulse
var j = - e * vp_p / (
            1/a.mass + cross(a.r,n)^2 / a.i +
            1/b.mass + cross(b.r,n)^2 / b.i
        );
var jn = j * n;
//
a.vel = a.vel + jp / a.mass;
a.r_vel = a.r_vel + cross(a.r,jn) / a.i;
b.vel = b.vel - jp / b.mass;
b.r_vel = b.r_vel - cross(b.r,jn) / b.i; 
```

公式如何工作/来源：

[http://www.myphysicslab.com/collision.html#resting_contact](http://www.myphysicslab.com/collision.html#resting_contact)

# visual-studio-2010 - VS2010合并32位和64位解决方案

> ID：11654991
> 
> 赞同：0
> 
> 时间：2012-07-25T17:07:33.457
> 
> 标签：visual-studio-2010, 32bit-64bit

我有 2 种不同的视觉工作室解决方案。一个是 32 位解决方案，另一个是 64 位解决方案。有什么办法可以将这两个合并为一个解决方案吗？我可以合并 .vcxproj 文件之类的吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:13:09.453

只需对项目文件进行 diffmerge 即可。它们是纯 xml 文件。那应该行得通。

# scala - Scala Play 传递变量以查看不起作用

> ID：11654992
> 
> 赞同：4
> 
> 时间：2012-07-25T17:07:36.853
> 
> 标签：scala, playframework

此代码工作正常：

在控制器中：

```
Ok(views.html.payment(message,test,x_card_num,x_exp_date,exp_year,exp_month,x_card_code,x_first_name,x_last_name,x_address,x_city,x_state,x_zip,save_account,product_array,x_amount,products_json,auth_net_customer_profile_id,auth_net_payment_profile_id,customer_id)) 
```

在视图中：

```
@(message: String, test: String, x_card_num: String, x_exp_date: String,exp_year: String, exp_month: String, x_card_code: String, x_first_name: String, x_last_name: String, x_address: String, x_city: String, x_state: String, x_zip: String, save_account: String, product_array: Map[String,Map[String,Any]], x_amount: String, products_json: String, auth_net_customer_profile_id: String,auth_net_payment_profile_id: String,customer_id: String) 
```

但是当我尝试向控制器添加一个变量并像这样查看时：

```
Ok(views.html.payment(message,test,x_card_num,x_exp_date,exp_year,exp_month,x_card_code,x_first_name,x_last_name,x_address,x_city,x_state,x_zip,save_account,product_array,x_amount,products_json,auth_net_customer_profile_id,auth_net_payment_profile_id,customer_id,saved_payments_xml))

@(message: String, test: String, x_card_num: String, x_exp_date: String,exp_year: String, exp_month: String, x_card_code: String, x_first_name: String, x_last_name: String, x_address: String, x_city: String, x_state: String, x_zip: String, save_account: String, product_array: Map[String,Map[String,Any]], x_amount: String, products_json: String, auth_net_customer_profile_id: String,auth_net_payment_profile_id: String,customer_id: String, saved_payments_xml: String) 
```

它给了我这个错误：

```
missing parameter type 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-07-25T17:37:23.737

您可以传递给[模板](https://github.com/playframework/Play20/blob/master/framework/src/templates/src/main/scala/ScalaTemplates.scala)的参数数量是有限制的。当您添加另一个参数时，您已经超过了它。

这是一个未记录且相当随意的限制，这是从模板生成代码的工作方式的结果。可以说这是一个错误，但我不会修复它，因为没有人需要这么多参数，并且拥有这么多参数会使代码的可读性大大降低。

您最好的解决方案是重构，例如通过创建一些案例类来表示模型中的 Card 和 Address，然后将它们传入。

# javascript - jQuery，从类触发事件

> ID：11654993
> 
> 赞同：1
> 
> 时间：2012-07-25T17:07:38.753
> 
> 标签：javascript, jquery, events

请看下面的代码和小提琴。

***代码***

```
$("#enable").click(function(e) {
    if (!$("#enable").data('isOn')) {
        $("#holder").find('.clickable').each(function(d) {
            $(this).css('border', '1px solid red');
            $(this).addClass('clickEnabled');
        });
        $("#enable").data('isOn', true);
    } else {
        $("#holder").find('.clickable').each(function(d) {
            $(this).css('border', '');
            $(this).removeClass('clickEnabled');
        });
        $("#enable").data('isOn', false);

    }

});

$(".clickEnabled").click(function(e) {
    alert('clicked');
}); 
```

***小提琴：http:*** [//jsfiddle.net/qAuwt/](http://jsfiddle.net/qAuwt/)

我基本上是在按下按钮时尝试在元素上切换“clickEnabled”类。切换正在工作，因为边框正在更改，但是 clickEnabled 类没有响应单击事件

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:11:30.767

`.clickEnabled`设置事件处理程序时没有元素。但是，您仍然可以捕获 click 事件：

```
$(document).on("click", ".clickEnabled", function(){
    alert("Hello, world!");
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-07-25T17:15:30.830

改变：

```
$(".clickEnabled").click(function (e) {
    alert('clicked');   
}); 
```

至：

```
$(".clickable").click(function (e) {
    if ( $(this).hasClass("clickEnabled") )
    {
        alert('clicked');   
    }
}); 
```

正如@araxanas 提到的，`.clickEnabled`加载时不存在。所以我将选择器切换到`.clickable`，这样做。但是，您只想在它们启用时处理点击。这就是我添加条件的原因。仅当单击的元素具有`clickEnabled`类时才会发出警报。

此外，将 css 从 javascript 中移出可能会有所帮助，这样您就可以直观地看到该类是否存在，请参阅我更新的[fiddle](http://jsfiddle.net/qAuwt/7/)。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-07-25T17:17:43.060

问题是当页面加载时，click 事件处理程序绑定到任何元素（因为没有类为“clickEnabled”的元素）。

解决方法是将 .click() 方法更改为 .live() 方法：

```
$(".clickEnabled").live('click', function (e) {
    alert('clicked');
}); 
```

# c - 代码如何执行和 gcc

> ID：11654994
> 
> 赞同：0
> 
> 时间：2012-07-25T17:07:41.113
> 
> 标签：c, gcc, assembly, compiler-construction, compilation

我对编译很感兴趣，我有一个关于 gcc 的问题。

我知道从要编译的代码生成一棵树，然后生成 ASM 代码，我需要对这一点进行一些解释。

**将 ASM 代码添加到文件中并稍后执行，还是使用asm**函数将 ASM 代码直接加载到内存中？我正在开发一个小型编译器，但我不知道如何执行生成的树，也没有找到任何相关文档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T17:55:55.240

GCC 的前端解析不同语言（C、C++、Fortran、ObjectiveC、Java 等）的源文件。然后代码（AST）被翻译成内部表示，[RTL（寄存器传输语言）](http://en.wikipedia.org/wiki/Register_transfer_language)。这是一个接近组装的表示。

然后将此 RTL 代码转换为目标机器的程序集并写入 .o（对象）文件。

然后，链接器将生成的 .o 文件组合到可执行文件中。

C/C++ 中的 GCC 也支持“内联”程序集片段。

工作流程是

```
Source file -> 
 AST  ->
  RTL representation  ->
   machine codes (with _optional_ text output of the ASM code) ->
    Executable (produced by linker) 
```

对于解释器，您可以直接解释 AST 或为虚拟机生成您自己的操作码，因为这样的解释器（虚拟机）会比 AST 解释器更简单。

如果您想了解所有详细信息，您应该查看[LCC（以及 Chris Fraser 和 David Hanson 的一本书）](https://sites.google.com/site/lccretargetablecompiler/)。随附的书中提供了真实架构代码生成的所有细节。

要了解生成的代码可以做什么，您应该阅读[John Levine 的 Linkers and Loaders](http://www.iecc.com/linker/)一书。

最后，为了避免询问有关脚本/解释器的一切，请参阅[Alex Varanese 的 Game Scripting Mastery](http://books.google.ru/books/about/Game_scripting_mastery.html?id=q5jdl_LLreMC&redir_esc=y)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-07-25T17:13:18.923

一个相当模糊的问题，我不认为我完全理解你的确切问题是什么，但无论如何你都是一个答案：程序集没有放在可执行文件中。汇编被写入中间汇编文件，汇编器从中生成真正的二进制机器代码（称为目标文件），然后链接器将它们（连同所需的库）合并到最终的可执行文件中。当应用程序运行时，可执行文件由操作系统直接加载到 RAM 中，并由处理器本地执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-07-26T19:33:21.573

源代码如何转化为可执行代码？我们向编译器提供源代码，它为我们提供可执行代码。但这不是单步操作。这遵循一些预定义的步骤将源代码转换为可执行代码。

**从源代码转换为可执行代码所遵循的步骤**

**1.预处理器** 它是编译器非常有用的部分，因为它在翻译成机器代码之前做了很多工作。它是一个文本处理器，执行以下文本编辑操作

它删除了源代码中编写的源代码中的注释行，以提高可读性/易于理解。它将头文件的内容添加到源代码中。头文件总是包含函数原型和声明。（头文件从不包含任何可执行代码）预处理器的一个非常重要的属性是条件编译。可扩展设计非常需要它。此属性还消除了编译器的不必要负担。宏被此预处理器替换。

此阶段的最终输出称为纯 C 代码。

**2.Translator** 这部分编译器负责将纯C代码转换为汇编语言代码。C 语言代码到汇编语言代码的逐步映射在这里完成。这部分使用函数和声明的原型来翻译 C 代码。这个阶段的输出称为汇编代码。

**3.Assembler** 它从汇编语言代码生成目标代码。它将汇编语言代码转换为机器语言代码（即0和1格式）。它不是直接运行的，因为我们借助操作系统在处理器中执行我们的代码。这个阶段的输出称为目标代码。

**4.Linker** 它给出了将在我们的机器上运行的最终可执行代码。此阶段的输出称为可执行代码。这是目标代码和支持文件的组合。支持文件可以是用户定义的函数定义、预定义的库函数定义...等。

# java - 不要下载文件完成

> ID：11654995
> 
> 赞同：0
> 
> 时间：2012-07-25T17:07:48.817
> 
> 标签：java, file, sockets, download

我尝试使用套接字而不是 url 下载文件。使用以下代码，文件未完全下载，当我尝试打开文件时，它显示所选文件无法打开的消息...可以删除此错误通过使用 url.openconnection() 方法，但需要通过套接字完成....需要建议。

```
public class Check {

private String addres;

public void FileDownload(String urladd) {
    try {
        this.addres=urladd;

        String address;
        URL url_of_file=new URL(addres);
        String hostaddress=url_of_file.getHost();
        Socket mysocket=new Socket(hostaddress, 80);
        System.out.println("Socket opened to " + hostaddress + "\n");
        String file=url_of_file.getFile();
        System.out.println(" file = "+file);

        OutputStream os = mysocket.getOutputStream();

        os.write(("GET " + file + " HTTP/1.0\r\n").getBytes("UTF-8"));
        os.write(("HOST: " + hostaddress + "\r\n").getBytes("UTF-8"));
        os.write(("\r\n").getBytes("UTF-8"));
        os.flush();

       String url = "C:\\Users\\Desktop\\file_downloaded.jpg";
       File f=new File(url);
       f.createNewFile();

        OutputStream ops = new FileOutputStream(f);

        byte data = 0;
        InputStream in=mysocket.getInputStream();

        data = (byte) in.read();
        while (data != -1) {
            ops.write(data);
            data = (byte) in.read();
        }
        ops.flush();
        ops.close();
        mysocket.close(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-25T17:11:51.267

如果你检查你的输出文件，我怀疑你会发现它除了文件数据之外还包含一个 HTTP 响应头（因为你说的是​​ HTTP 协议）。

# c# - 将有害消息移动到处理队列

> ID：11654997
> 
> 赞同：4
> 
> 时间：2012-07-25T17:08:04.797
> 
> 标签：c#, .net, wcf, msmq, message-queue

我正在尝试向系统支持网站添加功能，该网站会将消息从毒物队列移回处理队列。这是我到目前为止所尝试的：

```
// path = "FormatName:DIRECT=OS:machine-name\private$\queue-name";

var poisonQueue = new MessageQueue(path + ";poison");
var processingQueue = new MessageQueue(path);

foreach(var message in poisonQueue.GetAllMessages())
{
    processingQueue.Send(message);
}

var poisonCount = poisonQueue.GetAllMessages().Count();
var processingCount = processingQueue.GetAllMessage().Count(); 
```

不幸的是，`Send()`似乎什么也没做。调试器将计数显示为：

```
poisonCount: 6
processingCount: 0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-07-25T19:27:39.710

您应该将有害消息移动到**重试队列**，然后将再次处理消息

请在这里查看更多详细信息

*   [MSMQ 和中毒消息](http://blogs.msdn.com/b/drnick/archive/2007/02/12/msmq-and-poison-messages.aspx)
*   [处理有毒信息](http://msdn.microsoft.com/en-us/library/ms703179%28VS.85%29.aspx)

# titanium - appcelerator Titan 能否为 Kindle 电子阅读器构建应用程序

> ID：11654998
> 
> 赞同：0
> 
> 时间：2012-07-25T17:08:04.560
> 
> 标签：titanium, appcelerator, titanium-mobile, appcelerator-mobile

Appcelerator钛可以用来开发kindle电子阅读器（非火）应用吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-07-25T17:20:25.263

Titanium Mobile 仅支持 Android、iOS、Mobile Web (HTML5) 和 BlackBerry（测试版）SDK。

Kindle 电子阅读器使用不基于 Android 的 Kindle Development Kit (KDK)。