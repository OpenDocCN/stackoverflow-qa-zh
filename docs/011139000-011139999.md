# StackOverflow 问答 11139000-11139999

# excel - 如何在 Lua 中读取和解析 excel 文件？

> ID：11139003
> 
> 赞同：2
> 
> 时间：2012-06-21T13:14:19.490
> 
> 标签：excel, parsing, lua, coronasdk, xls

我想读取一个 xls 文件然后解析它。我怎么能用Lua做到这一点？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:20:18.687

这不是重复的，因为他实际上只是想从 excel 文件中读取并解析数据——而不是操作 excel 对象。

每当我不得不这样做时，我都会使用 ADO 使用[luasql](https://keplerproject.github.io/luasql/)。在最基本的层面上，如果您知道查询的每一行中将有多少个字段，您将使用这样的东西来打开数据库连接并从中读取 excel 数据。

```
function rows(connection, sql_stmt)
    local cursor = assert(connection:execute(sql_stmt))
    return function() 
        return cursor:fetch()
    end
end

local fpath = "path/to/file.xlxs"
local constr = "Provider=Microsoft.ACE.OLEDB.12.0;"..
               "Data Source=\""..fpath.."\";".. 
               "Extended Properties=\"Excel 12.0 Xml;HDR=YES\"";

local env = assert(luasql.ado())
local con = assert(env:connect(constr))

-- the name of the worksheet needs to be surrounded by brackets, and end
-- with a '$' sign.
local query = "SELECT * FROM \[name_of_worksheet$\]"

-- you can do this if you know how many fields you get back specifically.
for field1, field2, field3, ... in rows(con, query) do      
    -- handle any parsing of data from a row, here.
end

con:close()
env:close() 
```

如果您不知道要返回多少字段，则可以执行以下操作：

```
local fpath = "path/to/file.xlxs"
local constr = "Provider=Microsoft.ACE.OLEDB.12.0;"..
               "Data Source=\""..fpath.."\";"..
               "Extended Properties=\"Excel 12.0 Xml;HDR=YES\"";

local env = assert(luasql.ado())
local con = assert(env:connect(constr))

-- the name of the worksheet needs to be surrounded by brackets, and end
-- with a '$' sign.
local query = "SELECT * FROM \[name_of_worksheet$\]"

-- if you didn't know how many fields you might get back per row, i 
-- believe you can do this to iterate over each row...
local cursor = con:execute(query)
local t = {}
local results = cursor:fetch(t)

while results ~= nil do
    for k,v in pairs(results) do
        -- check each field in the row here
    end
    results = con:fetch(t)
end

cursor:close()
con:close()
env:close() 
```

完成后请确保关闭游标/连接/环境。此外，您还需要验证上面的连接字符串是否适用于您的 excel 版本。确定所需连接字符串的最简单方法是访问[www.connectionstrings.com](http://www.connectionstrings.com)并浏览正确的连接字符串。

# java - Java 应用程序关闭但 dist 进程仍在运行

> ID：11139006
> 
> 赞同：-6
> 
> 时间：2012-06-21T13:14:31.770
> 
> 标签：java, swing, process

我在netbeans 7上创建了一个java应用程序。现在通过使用netbeans我创建了应用程序的jar文件。当我点击它时应用程序开始运行。但是如果我关闭应用程序处理的应用程序被杀死，但dist子进程仍然是尽管所有窗口都关闭了，但仍在运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:18:19.597

您可能打开了一个变量（FileReader，...），请记住您需要关闭它们 close()

如果它是一个 gui 应用程序调用 JFrame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

# vba - 用于 VBA 代码的 HTML Tidy？

> ID：11139009
> 
> 赞同：3
> 
> 时间：2012-06-21T13:14:39.770
> 
> 标签：vba, excel

是否有一种等效的方法可以实现[HTML Tidy](http://tidy.sourceforge.net/)对 VBA 代码的 HTML 代码所做的事情？我刚刚继承了 Excel VBA 的老鼠窝，我希望在深入研究之前让它更容易阅读。我不介意是否必须先导出它；我已经在使用[VBA Code Cleaner](http://www.appspro.com/Utilities/CodeCleaner.htm)来使这个东西与 Git 很好地配合使用。有什么建议么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T15:13:04.440

有一个实用程序可以（尝试）清理代码：[Smart Indenter v3.5](http://oaltd.co.uk/Indenter/Default.htm)

经过测试，我可以确认它在 Office 2007 和 Office 2010 中工作 - 当您右键单击代码时，它会出现在上下文菜单中

# javascript - 多个固定元素仅在其包装 div 内

> ID：11139012
> 
> 赞同：0
> 
> 时间：2012-06-21T13:15:06.307
> 
> 标签：javascript, jquery, html, jquery-plugins, scroll

我一直在尝试只在它的包装 div 内制作一个固定元素，但即使我已经尝试了我在这里找到的所有示例，也无法让它工作。

我的网站[可以在这里看到](http://www.kassett.no/kassett2/projects.html)。（不适用于 800 像素以下的屏幕）

我需要项目侧边栏保持固定，直到围绕它的包装结束并开始新的部分。[这是我尝试实现的目标的说明](http://i.stack.imgur.com/5gSnr.jpg)

我一直在使用 ScrollToFixed - 插件并尝试了我在 stackoverflow 上找到的大多数示例。我的基本结构如下所示：

```
<section class="projects" id="nobelbopel">
    <div class="description" id="#nobelbopel-desc"></div>
    <div class="projectimages"></div>
</section>

<section class="projects" id="ujevnt">
    <div class="description" id"#ujevnt-desc"></div>
    <div class="projectimages"></div>
</section> 
```

我希望 .description 停止在浏览器顶部的顶部，但不要超出它的包装 div (.projects)。包装 div (.projects) 的高度也不同，我认为这是我的主要问题..

我试过使用这段代码，但它只能部分工作：

```
$('#nobelbopel-desc').scrollToFixed( { 
marginTop: 154, 
limit: $('#ujevnt').offset().top 
- $('#nobelbopel-desc').height() - 154 } );

$('#ujevnt-desc').scrollToFixed( { 
marginTop: 154, 
limit: $('#bygdalarm').offset().top 
- $('#ujevnt-desc').height() } ); 
```

和这个：

```
$('#nobelbopel-desc').scrollToFixed({
marginTop: 154,
limit: $('#ujevnt').offset().top - 154
}); 
```

正如您从代码中看到的那样，我希望它距离顶部 154 像素）但我需要一个代码，无论包装 div 的高度是 100 还是 1000 像素，并且最好基于基本类结构而不是特定 div，因为它是现在。

# android - android CamcorderProfile.hasProfile NoSuchMethodError

> ID：11139013
> 
> 赞同：1
> 
> 时间：2012-06-21T13:15:14.793
> 
> 标签：android, android-camera

尝试使用 CamcorderProfile.hasProfile(xyz) 时出现运行时 NoSuchMethodError。在我的应用程序清单中指定了正确的 API

```
<uses-sdk android:minSdkVersion="8" android:targetSdkVersion="8" /> 
```

这是我想使用的块

```
CamcorderProfile cf = CamcorderProfile.get(CamcorderProfile.QUALITY_LOW);
if (CamcorderProfile.hasProfile(CamcorderProfile.QUALITY_480P)) {
   cf = CamcorderProfile.get(CamcorderProfile.QUALITY_480P);
} else if (CamcorderProfile.hasProfile(CamcorderProfile.QUALITY_CIF)) {
    cf = CamcorderProfile.get(CamcorderProfile.QUALITY_CIF);
} else if (CamcorderProfile.hasProfile(CamcorderProfile.QUALITY_QVGA)) {
   cf = CamcorderProfile.get(CamcorderProfile.QUALITY_QVGA);
} 
```

编写/构建时，我在 Eclipse 中没有任何错误，即使代码完成也可以正常工作。 **编辑**此时我在一些设备（Galaxy、Incredible 和 Desire）上运行代码。

堆栈跟踪错误是

```
E/AndroidRuntime(12499): FATAL EXCEPTION: main
E/AndroidRuntime(12499): java.lang.NoSuchMethodError: Android.media.CamcorderProfile.hasProfile 
```

任何提示为什么会发生这种情况？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-21T15:25:06.183

I think Bruno was right, it seems like it was a problem of API level.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:10:35.603

你在使用 AVD 吗？您将媒体和相机所需的支持放在 AVD 中吗？

尝试在真实设备中测试您的应用程序。

# c# - Silverlight GUI 中的 C# 代码验证

> ID：11139018
> 
> 赞同：2
> 
> 时间：2012-06-21T13:15:29.380
> 
> 标签：c#, silverlight, user-interface, user-controls

我正在为学生制作一个 Silverlight 应用程序，我正在寻找一个关键组件。在应用程序中，学生应该能够在文本框中添加 C# 代码（一个类）。我想做的是：验证代码是有效的 C#，并且理想情况下还确保它正确实现给定的接口。有没有可以帮助我解决这个问题的控件？

克里斯

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:20:16.383

基于[CodecomProvider](http://msdn.microsoft.com/EN-US/library/system.codedom.compiler.codedomprovider%28v=vs.80%29.aspx)的示例代码：

```
private void button1_Click(object sender, System.EventArgs e)
{
    CodeDomProvider codeProvider = CodeDomProvider.CreateProvider("CSharp");
    string Output = "Out.exe";
    Button ButtonObject = (Button)sender;

    textBox2.Text = "";
    System.CodeDom.Compiler.CompilerParameters parameters = new CompilerParameters();
    //Make sure we generate an EXE, not a DLL
    parameters.GenerateExecutable = true;
    parameters.OutputAssembly = Output;
    CompilerResults results = codeProvider.CompileAssemblyFromSource(parameters, textBox1.Text);

    if (results.Errors.Count > 0)
    {
        textBox2.ForeColor = Color.Red;
        foreach (CompilerError CompErr in results.Errors)
        {
            textBox2.Text = textBox2.Text +
                        "Line number " + CompErr.Line +
                        ", Error Number: " + CompErr.ErrorNumber +
                        ", '" + CompErr.ErrorText + ";" +
                        Environment.NewLine + Environment.NewLine;
        }
    }
    else
    {
        //Successful Compile
        textBox2.ForeColor = Color.Blue;
        textBox2.Text = "Success!";
        //If we clicked run then launch our EXE
        if (ButtonObject.Text == "Run") Process.Start(Output);
    }
}
Add the beginning of the file, add these using statements:
using System.CodeDom.Compiler;
using System.Diagnostics; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-08-22T08:51:25.980

总结并回答我自己的问题（感谢 Luke Woodward）：这是不可能的，因为 System.CodeDom.Compiler 命名空间在 Silverlight 框架中几乎是空的 :-(

# jquery-mobile - jquery 移动页面转换似乎正在停止 $(document).ready 从触发

> ID：11139019
> 
> 赞同：1
> 
> 时间：2012-06-21T13:15:31.263
> 
> 标签：jquery-mobile

我正在构建我的第一个 jquery 移动网站并遇到了问题。当只是做一个从一个页面到另一个页面的直接超链接时，页面转换效果似乎正在停止

```
$(document).ready(function(){
    alert("hello");
}); 
```

从射击。如果我直接刷新页面或链接到页面，事件就会触发。

我尝试从超链接中删除数据转换，甚至尝试过

```
<a data-role="button" data-transition="none" href="/otherpage/">link</a> 
```

但仍然有同样的问题。安迪的想法好吗？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:20:31.143

这是设计使然，因为 jQuery Mobile 在后台加载页面，然后在转换之前将它们合并到当前文档中。这意味着原始页面不会重新加载，因此`document`不会`ready`再次变为。

因此，[关于事件的文档](http://jquerymobile.com/test/docs/api/events.html)突出显示（强调来自原文）：

> **重要提示：使用`$(document).bind('pageinit')`，而不是`$(document).ready()`**

因此，你应该写：

```
$(document).bind("pageinit", function() {
    alert("hello");
}); 
```

# java - Eclipse RCP - 如何将 Eclipse RCP 首选项页面导出到数据库？

> ID：11139024
> 
> 赞同：0
> 
> 时间：2012-06-21T13:15:37.213
> 
> 标签：java, database, export, eclipse-rcp

以编程方式将 eclipse/java 首选项导出到数据库的最佳方法是什么？属性应该如何导出，通过哪个接口？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:22:37.460

不幸的是，我认为不存在这样的功能。

[您可以按照本教程](http://www.vogella.com/articles/EclipsePreferences/article.html)阅读属性

拥有所需的属性后，您可以将它们保存在任何地方。

您还可以使用 exportWizard 扩展点来注册您的自定义导出向导 (org.eclipse.ui.IExportWizard)

你可以看看 PreferencesExportWizard 类和 WizardPreferencesExportPage1 类

# javascript - facebook评论：如果评论很多，则不显示输入

> ID：11139029
> 
> 赞同：2
> 
> 时间：2012-06-21T13:16:04.683
> 
> 标签：javascript, facebook-comments

我的网站上有 Facebook 评论。我注意到当有10条或以上的评论时，插件默认不显示评论输入框（就像评论很少时一样）。如果用户想发表评论，他必须点击顶部的“添加评论”链接。

我想知道，有没有办法让插件无论如何都显示评论输入？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:53:50.050

您将需要使用评论框中的设置来保持作曲家的显示。

有关启用管理员/版主设置的信息[https://developers.facebook.com/docs/reference/plugins/comments/](https://developers.facebook.com/docs/reference/plugins/comments/)

![在此处输入图像描述](../Images/bd8903b9fd6b86174980fcde74aedeed.png)

# php - 如何“分解”我的 PDO 查询返回的数组？

> ID：11139031
> 
> 赞同：0
> 
> 时间：2012-06-21T13:16:07.167
> 
> 标签：php, arrays, pdo

所以当我开始很好地掌握 MySQL 时，我发现我应该学习 PDO。这是我到目前为止的（未完成的）代码。在担心添加更多密码安全性之前，我想让它工作。当我运行脚本时，打印的消息是“Array”。如何分解并检索数组中的数据？

```
try {
$db = new PDO($dbhost, $dbuser, $dbpassword);
$statement = $db->prepare("select * from users where email = :name");
$statement->execute(array(':name' => $username));
$result = $statement->fetch();
echo $result;}

catch(PDOException $e) {echo $e->getMessage();} 
```

对不起，如果这是一个愚蠢的问题；我已经搜索了一段时间，但找不到任何与我正在做的事情相匹配的好例子，而且我从例子中学到的东西比冗长的、冗长的描述（如 PHP 手册）更好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:23:29.767

您可能想先查看您的 PHP 基础，这些页面似乎最合适：

[http://php.net/manual/en/language.types.array.php](http://php.net/manual/en/language.types.array.php)

然后，您可以再次查看 Fetch 和 FetchAll 的代码：

[http://php.net/manual/en/pdostatement.fetch.php](http://php.net/manual/en/pdostatement.fetch.php)

请注意，当从任何提供者接收数据时，数组是事实上的标准，如果它是 pdo、mysql、mysqli、pgsql，这就是为什么我建议您先查看 ARRAY 类型，很好地掌握它，然后再阅读 PDO 的东西。 ..

# facebook - 如何检查用户是否共享网站（Facebook）？可能吗？

> ID：11139035
> 
> 赞同：7
> 
> 时间：2012-06-21T13:16:20.533
> 
> 标签：facebook, facebook-graph-api

我目前正在写一个网站，我需要一些关于 facebook 集成的帮助。我需要一个函数（PHP 或 JS，两者都会有所帮助）来检查给定用户是否共享了我的网站，但我不知道如何编写。你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T13:22:21.853

首先，您必须在标签之后立即加载 Facebook SDK：

```
<div id="fb-root"></div>
  <script>
  window.fbAsyncInit = function() {
    FB.init({
      appId                : "YOUR APP ID",
      status               : true, // check login status
      cookie               : true, // enable cookies to allow the server to access the session
      xfbml                : false,  // parse XFBML
      perms                : 'read_stream',
      access_token         : "USER ACCESS TOkEN",
      frictionlessRequests : true
    });
  };

  // Load the SDK Asynchronously
  (function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/pt_BR/all.js";
    fjs.parentNode.insertBefore(js, fjs);
  }(document, 'script', 'facebook-jssdk'));

</script> 
```

然后你可以使用回调函数来做你想做的事：

```
<script type="text/javascript">
    function shareOnFacebook() {
    FB.ui(
      {
        method        : 'feed',
        display       : 'iframe',
        name          : 'name',
        link          : 'http://www.linktoshare.com',
        picture       : 'http://www.linktoshare.com/images/imagethumbnail.png',
        caption       : 'txt caption',
        description   : 'txt description',
        access_token  : 'user access token'
      },
      function(response) {
        if (response && response.post_id) {

          // HERE YOU CAN DO WHAT YOU NEED
          alert('OK! User has published on Facebook.');

        } else {
          //alert('Post was not published.');
        }
      }
    );
  }
</script> 
```

然后你应该像这样使用它：

```
<a href="#" onclick="shareOnFacebook();">Share on facebook</a> 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T13:22:35.973

使用[JavaScript SDK`FB.ui()`和`feed`对话框，](https://developers.facebook.com/docs/reference/dialogs/feed/)您可以提示您的用户在 Facebook 上共享 URL。此对话框提供了一个回调函数，以便您判断帖子是否成功。
[从上面的链接中提取的代码示例...]

```
 var obj = {
    method: 'feed',
    link: 'https://developers.facebook.com/docs/reference/dialogs/',
    picture: 'http://fbrell.com/f8.jpg',
    name: 'Facebook Dialogs',
    caption: 'Reference Documentation',
    description: 'Using Dialogs to interact with users.'
};

function callback(response) {
    document.getElementById('msg').innerHTML = "Post ID: " + response['post_id'];
}

FB.ui(obj, callback); 
```

这是完成您需要的最简单的方法。但是，它不允许您测试是否有人在您的`feed`对话之外共享了您网站的 URL。

* * *

`read_stream`可以通过使用权限来完成不需要对话回调的更复杂的替代方案。获得该权限后，您可以扫描用户过去的帖子，看看他是否*曾经*在他的墙上分享过您的网站...

请记住，如果用户在别人的墙上或页面上共享您的网站，这将不起作用...

# asp.net-mvc-3 - MVC3 使用 Linq to XML 返回 XML 文件

> ID：11139036
> 
> 赞同：1
> 
> 时间：2012-06-21T13:16:21.120
> 
> 标签：asp.net-mvc-3, linq-to-xml

我正在尝试从 C# 列表生成 XML 文档。xml 文档必须遵守第三方 XML Schema。

我看过 XSD2CODE 工具，但没有得到任何结果。

有人可以帮助我如何使用 LINQ to xml 生成 XML 文件并使用 MVC3 返回 XML 文件。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T13:19:10.157

LINQ to XML 用于查询 XML，而不是生成。如果要生成 XML 文件，还有其他技术：

*   [XmlWriter](http://msdn.microsoft.com/en-us/library/system.xml.xmlwriter.aspx)
*   [XDocument](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)
*   [使用 XML 序列化器（例如XmlSerializer](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlserializer.aspx)）将现有类的实例序列化为 XML

但无论您选择采用哪种 XML 生成技术，我都建议您编写一个自定义操作结果来执行此工作，而不是使用 XML 生成管道污染您的控制器，这绝对不是它的责任。

让我们举一个使用第三种方法 ( `XmlSerializer`) 的示例。

假设您已经定义了一个要转换为 XML 的视图模型：

```
public class MyViewModel
{
    public string Foo { get; set; }
    public string Bar { get; set; }
} 
```

现在我们可以编写一个自定义操作结果来执行此转换：

```
public class XmlResult : ActionResult
{
    public XmlResult(object data)
    {
        if (data == null)
        {
            throw new ArgumentNullException("data");
        }
        Data = data;
    }
    public object Data { get; private set; }

    public override void ExecuteResult(ControllerContext context)
    {
        var response = context.HttpContext.Response;
        response.ContentType = "text/xml";
        var serializer = new XmlSerializer(Data.GetType());
        serializer.Serialize(response.OutputStream, Data);
    }
} 
```

控制器动作将非常标准：

```
public ActionResult Index()
{
    var model = new MyViewModel
    {
        Foo = "foo",
        Bar = "bar"
    };
    return new XmlResult(model);
} 
```

您可能还想检查 ASP.NET MVC 4 Web API，它使这些场景变得非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:22:30.347

如果您创建一个 XDocument，请将您的 XElements 添加到其中，然后在文档上调用 Save() 方法，它应该为您创建文件

[展示如何从 XDocument 创建文件的博客文章](http://blogs.msdn.com/b/wriju/archive/2008/02/28/linq-to-xml-creating-complete-xml-document.aspx)

根据[XDocument MSDN](http://msdn.microsoft.com/en-us/library/system.xml.linq.xdocument.aspx)，您可以将其保存到流中或直接保存到文件中。如果您想将其作为操作返回，您可以查看此处[如何在 MVC 中将 XML 字符串作为操作结果返回](https://stackoverflow.com/questions/878695/how-to-return-an-xml-string-as-an-action-result-in-mvc)

# c++ - Visual Studio 2010，C++，无法打开包含文件：'base.h'

> ID：11139037
> 
> 赞同：0
> 
> 时间：2012-06-21T13:16:22.813
> 
> 标签：c++, visual-studio, mfc, include

我正在尝试在 Visual Studio 2010 中构建一个项目。但我收到以下错误：

> 致命错误 C1083：无法打开包含文件：'base.h'：没有这样的文件或目录

这是 (stdafx.h) 生成错误的代码的一部分：

```
// from Base project

include "base.h"

include "basic.h"

include "logfile.h" 
```

该项目似乎使用“MFC Microsoft Office Fluent User Interface（“Fluent UI”）”。除了 Visual Studio 之外，我是否必须安装其他任何东西才能使用它？缺少的东西会产生错误吗？

我对 C++ 和 Visual Studio 很陌生。

**编辑：**

问题是我找不到文件：//来自基本项目 #include "base.h" #include "basic.h" #include "logfile.h" 而且我真的不知道它们的用途。我猜有些`MFC`东西？而且它们不在我磁盘上的任何位置。

我使用的是 Windows 7，我不知道该项目是在哪个操作系统上开发的。比如说它是在WinXP上开发的吗？在这种情况下，我是否需要安装适用于 WinXP 的 SDK？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:19:57.823

1.  确保 base.h 在工作目录中可用
2.  右键单击 base.h（来自代码编辑器）并单击上下文菜单中的打开文档（第一个菜单项）
3.  在项目根文件夹中搜索该文件，然后确保该文件的路径在附加的包含目录中可用。`Project property page --> Select C/C++`，右侧网格上的第一个条目。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:21:27.080

Fluency UI 是 MSVC++[功能包](http://msdn.microsoft.com/en-us/library/bb982354.aspx)的一部分，您必须将其安装在 Visual Studio 之上（您可以按照给定页面中的链接下载它）。

特别是错误是由于编译器找不到文件*base.h*，这可能是因为它是上述功能包的一部分（因此它当前丢失）或（如果文件*确实*存在于您的计算机）因为您的包含路径（编译器为查找包含文件而参考的路径）设置不正确

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-23T07:57:21.530

问题是项目中缺少文件。谢谢您的帮助。

# python - 如何使用值对字典进行排序并且还能够访问键

> ID：11139038
> 
> 赞同：2
> 
> 时间：2012-06-21T13:16:24.603
> 
> 标签：python, python-3.x, dictionary

```
dic = {'Tea': 35, 'Coffee': 35, 'Chocolate': 10} 
```

我想按值按降序对这个字典进行排序，但是我怎样才能访问键呢？

示例代码：

```
for x in sorted(dic.values()):
    print(key, dic[key]) 
```

我还希望在值相等时按字母顺序对输出进行排序。

预期输出：

```
Coffee 35
Tea 35
Chocolate 10 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-06-21T13:18:40.780

您想要的是提供元组[的`dict.items()`方法](http://docs.python.org/py3k/library/stdtypes.html?highlight=dict#dict.items)`(key, value)`。

要按值排序，然后使用一种`key`方法，在这种情况下，an[`operator.itemgetter()`](http://docs.python.org/library/operator.html#operator.itemgetter)从元组中获取第二个值进行排序，然后设置`reverse`属性以按您想要的顺序获取它们。

```
>>> from operator import itemgetter
>>> dic={'Tea': 35, 'Coffee': 35, 'Chocolate': 10}
>>> for key, value in sorted(dic.items(), key=itemgetter(1), reverse=True):
...     print(key, value)
... 
Tea 35
Coffee 35
Chocolate 10 
```

编辑：如果你想按键排序作为二级排序，我们可以简单地传递一个值的元组，Python 将排序第一个值，然后是第二个，等等......唯一的问题是使用反向将意味着我们得到他们以错误的顺序。作为一种技巧，我们只需使用负数版本的值进行排序，而无需反向：

```
>>> for key, value in sorted(dic.items(), key=lambda x: (-x[1], x[0])):
...     print(key, value)
... 
Coffee 35
Tea 35
Chocolate 10 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-06-21T13:18:13.073

一种选择：

```
for key in sorted(dic, key=dic.get, reverse=True):
    print(key,dic[key]) 
```

这对字典的键进行排序，但`dic.get`用作键功能，从而有效地按值排序。您的示例输出表明您要按降序排序，所以我包括了`reverse=True`.

**编辑**：如果您的字典值实际上是计数，您可以考虑使用 a`collections.Counter`而不是字典。该类有一个`most_common()`按所需顺序返回项目的方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:29:15.000

其他建议的答案`dict.items()`部分正确。但是由于您想在排序过程中包含密钥（如果我理解您是正确的），您想要反转项目（本质上是一个 tuple `(key, value)`）。所以使用

```
data={'Tea': 35, 'Coffee': 35, 'Chocolate': 10}
for item in sorted(dic.items(), key=lambda it: (-it[1], it[0])):
    print item 
```

该`key`参数给出了一个用于对项目进行排序的函数。它将项目转换为一个键，然后真正用于排序。

在您的情况下，您需要混合降序/升序排序，以便首先将此处给出的项目变成

```
(-35, 'Coffee')
(-35, 'Tea')
(-10, 'Chocolate') 
```

并按该顺序打印。（替换过程只是为了排序而发生的，实际返回的项目是原始项目。）

# algorithm - 遍历地图的更好方法

> ID：11139041
> 
> 赞同：2
> 
> 时间：2012-06-21T13:16:32.920
> 
> 标签：algorithm, clojure, jvm, analytics

我正在做一些数据分析聚合，这是我的数据结构：

```
{
12300 {
   views {
       page-1 {
          link-2  40
          link-6  9
       }
       page-7 {
          link-3  9
          link-11 8
       }
   }
   buttons {
       page-1 {
          link-22 2
       }
   }
}
34000      ....
} 
```

其中 12300、34000 是时间值。

我想要做的是遍历该数据结构并将条目插入数据库，如下所示：

```
insert into views (page, link, hits, time) values (page-1, link-2, 40, 12300)
insert into views (page, link, hits, time) values (page-1, link-6, 9, 12300) 
```

什么是一种惯用的编码方式？我是否使数据结构复杂化？你有什么更好的方法来收集数据吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T19:11:40.223

假设你有一个来自 clojure.java.jdbc 的 jdbc 连接，这应该接近你想要的。

```
(jdbc/do-prepared "INSERT INTO views (page, link, hits, time) VALUES (?, ?, ?, ?)"
                  (for [[time data] m
                        [data-type page-data] data
                        [page links] page-data
                        [link hits] links]
                    [page link hits time]))
;; why aren't we using data-type, eg buttons? 
```

## 编辑澄清的问题

```
(let [m '{12300 {views {page-1 {link-2  40
                                link-6  9}
                        page-7 {link-3  9
                                link-11 8}}
                 buttons {page-1 {link-22 2}}}
          34000 {views {page-2 {link-2 5}}}}]
  (doseq [[table rows] (group-by :table (for [[time table] m
                                              [table-name page-data] table
                                              [page links] page-data
                                              [link hits] links]
                                          {:table table-name, :row [page link hits time]}))]
    (jdbc/do-prepared (format "INSERT INTO %s (page, link, hits, time) VALUES (?, ?, ?, ?)" table)
                      (map :row rows)))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T14:14:21.193

简单的解决方案：利用您正在使用地图的事实，并使用获取、关联功能来查看/更改数据。有关示例，请参见这些：

[http://clojuredocs.org/clojure_core/clojure.core/get-in](http://clojuredocs.org/clojure_core/clojure.core/get-in) http://clojuredocs.org/clojure_core/clojure.core/assoc-in

高级解决方案：使用功能性拉链。这允许您以功能方式遍历和更改树状结构。

这里有一个例子： [http ://en.wikibooks.org/wiki/Clojure_Programming/Examples/API_Examples/Advanced_Data_Structures#zipper](http://en.wikibooks.org/wiki/Clojure_Programming/Examples/API_Examples/Advanced_Data_Structures#zipper)

如果你有特殊的数据结构，而不是地图的地图，你可以通过简单地实现 3 个必需的方法来自己创建一个拉链。之后，所有 zipper 函数也将适用于您的数据结构。

# php - Sql表只导入第一列

> ID：11139045
> 
> 赞同：0
> 
> 时间：2012-06-21T13:16:42.383
> 
> 标签：php, sql, csv, insert, fgetcsv

我想将 csv 文件上传到 sql 表中。这是我的代码：

```
<?php

include "connection.php"; //Connect to Database

$deleterecords = "TRUNCATE TABLE axioma_ordini"; //empty the table of its current records
mysql_query($deleterecords);

//Upload File
if (isset($_POST['submit'])) {
    if (is_uploaded_file($_FILES['filename']['tmp_name'])) {
        echo "<h1>" . "File ". $_FILES['filename']['name'] ." uploaded successfully." . "</h1>";
        echo "<h2>Displaying contents:</h2>";
        readfile($_FILES['filename']['tmp_name']);
    }

    //Import uploaded file to Database
    $handle = fopen($_FILES['filename']['tmp_name'], "r");

    while (($data = fgetcsv($handle, 1000, ",")) !== FALSE) {
        $import="INSERT into axioma_ordini(`id`, `Famiglia`, `Cod Cliente`, `Ragione Sociale`, Articolo, Descrizione, Tipo, `Valore Euro`, Valuta, `Valore in Valuta`, Cambio, `Mese Competenza`, Anno, `Cir Medio`, Giorni, Satellite, `Satellite per Risorsa`, NumeroDocumento, `Data Doc`, `Nome Nave`, `Modem S/N`, `Burst Fwd`, `Burst Rtn`, Condivisione, `Cir Fwd`, `Cir Rtn`, `Cir Tot`, Business, Tecnologia,`Data Scadenza Ordine`, Network, Transponder, Nazione) values('','$data[0]','$data[1]','$data[2]','$data[3]','$data[4]','$data[5]','$data[6]','$data[7]','$data[8]','$data[9]','$data[10]','$data[11]','$data[12]','$data[13]','$data[14]','$data[15]','$data[16]','$data[17]','$data[18]','$data[19]','$data[20]','$data[21]','$data[22]','$data[23]','$data[24]','$data[25]','$data[26]','$data[27]','$data[28]','$data[29]','$data[30]','$data[31]')";

        mysql_query($import) or die(mysql_error());
    }

    fclose($handle);

    print "Import done";

    //view upload form
}else {

    print "Upload new csv by browsing to file and clicking on Upload<br />\n";

    print "<form enctype='multipart/form-data' action='upload.php' method='post'>";

    print "File name to import:<br />\n";

    print "<input size='50' type='file' name='filename'><br />\n";

    print "<input type='submit' name='submit' value='Upload'></form>";

}

?> 
```

它成功导入，但只有第一列：Famiglia（并且 id 有效）。其余的没有价值或 0 价值。我要导入的文件有数据。此外，在 varchar 5 的 famiglia 中，它从下一列中获取第一个数字。因此，它不是 biz，而是 biz;8（8 是下一列的第一个数字）。

有谁知道问题可能出在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:59:04.207

我找到了问题所在。这是一个错误的分隔符： ，而不是 ;

($data = fgetcsv($handle, 1000, ",")

本来应该

($data = fgetcsv($handle, 1000, ";")

也许这可以帮助某人...

# javascript - OOP javascript 试图访问一个方法

> ID：11139046
> 
> 赞同：1
> 
> 时间：2012-06-21T13:16:45.230
> 
> 标签：javascript, oop, methods

我已经编写了 ETF 类。这是在 javascript 中编写 OOP 的尝试。

该类称为ETF。方法是getData和draw。我正在尝试从方法“getData”访问方法“draw”

```
function ETF(){
    //global variable

}
//class methods => getData (from xml file), draw(draws the bar )
ETF.prototype ={
    getData: function(is_load, DateDiff){

        $.getJSON(
            "server/ETF.server.php",{
                mycase: 1
            },
            function(data){
                lng_pr  = data.longs_prec;
                sh_pr   = data.shorts_prec;
                ETF.draw(lng_pr, sh_pr); // <== how to access the draw method?
        });

    },//end getData
    //draw the 
    draw: function(lng_pr, sh_pr){
         //draw code..
        } 
```

试过'this.draw'但没有..

任何人？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:58:52.323

您需要将“this”分配给一个变量，以便您可以在 $.getJSON 中访问它。如果您尝试使用 this.draw(lng_pr, sh_pr) 调用该方法，“this”将指的是 $.getJSON 的上下文，而不是您当前的 ETF 对象。

以下是你的做法：

```
function ETF(){
    //global variable

}
//class methods => getData (from xml file), draw(draws the bar )
ETF.prototype ={
    getData: function(is_load, DateDiff){
        var obj = this;  //assign current ETF object to a variable

        $.getJSON(
            "server/ETF.server.php",{
                mycase: 1
            },
            function(data){
                lng_pr  = data.longs_prec;
                sh_pr   = data.shorts_prec;
                obj.draw(lng_pr, sh_pr);  //will call your draw method below
        });

    },//end getData
    //draw the 
    draw: function(lng_pr, sh_pr){
         //draw code..
    } 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T14:17:26.430

你为什么不这样写“类”：？

```
function ETF() {
    var that = this,
        /* holds the public methods / properties */
        thisObject = {};

    thisObject.getData = function(is_load, DateDiff){

        $.getJSON(
            "server/ETF.server.php",{
                mycase: 1
            },
            function(data){
                lng_pr  = data.longs_prec;
                sh_pr   = data.shorts_prec;
                thisObject.draw(lng_pr, sh_pr); // <== how to access the draw method?
        });

    };// end getData

    thisObject.draw = function(lng_pr, sh_pr){
         //draw code..
    };

    return thisObject;
}

var etfObject = new ETF(); 
```

# php - 无法上传大于 3 mb 的文件

> ID：11139048
> 
> 赞同：0
> 
> 时间：2012-06-21T13:16:55.310
> 
> 标签：php, file, file-upload

我正在尝试使用 php 上传文件。我可以上传最大 3 mb 的.zip 文件。但不能上传> 3mb的文件。提交html表单需要很多时间。我已经使用以下代码检查了上传和内存详细信息。

```
$max_upload = (int)(ini_get('upload_max_filesize'));
$max_post = (int)(ini_get('post_max_size'));
$memory_limit = (int)(ini_get('memory_limit'));
$upload_mb = min($max_upload, $max_post, $memory_limit); 
```

它给出的输出为

```
max_upload=10
memory_limit=64
upload_mb=10 
```

请帮我找出解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:24:29.647

它也可以是网络服务器，请参阅 Apache 的 LimitRequestBody 或 nginx 的 client_max_body_size

另一个原因是代理（透明代理？）。您可以通过要求其他人尝试上传文件来进行测试

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:34:44.047

因为它需要很多时间可能是你超过了 30 秒超时

您可以通过添加来更改它

喜欢

```
 set_time_limit(60); 
```

来自 [http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)

并运行此代码

```
 <?php
     phpinfo();  ?> 
```

运行该文件以获取您的系统设置（搜索 upload_max_filesize 等）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T23:04:14.037

我对之前的 PHP 大文件上传问题给出了相同的答案，但答案仍然适用：

对于大文件，如果您不想处理配置服务器设置（特别是如果您在共享主机或其他无法让您完全控制服务器的主机上），一种可能的解决方案是将上传到第三方服务。

例如，您可以让表单直接发布到 Amazon S3 ( [http://s3.amazonaws.com/doc/s3-example-code/post/post_sample.html](http://s3.amazonaws.com/doc/s3-example-code/post/post_sample.html) ) 或使用[Filepicker.io 之类的服务](https://Filepicker.io)

全面披露：我在 Filepicker.io 工作，但想帮助那些处理大文件上传问题的人

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:19:19.143

您是否检查过脚本的超时时间？默认情况下是 30 秒...也许这就是限制...

# sql - XML 路径中的 SQL Top 1 ('')

> ID：11139049
> 
> 赞同：0
> 
> 时间：2012-06-21T13:16:56.003
> 
> 标签：sql, sql-server

以下代码：

```
 select(

    select m.Code + '   ' + cast(m.Completed as varchar(max)) + '   '+ cast(ol.Billed as varchar(max)) + '  ' + cast(m.Delete as varchar (max)) 
    from matterdetails as m
    full join officeledger as ol on ol.id=m.id
    order by ol.Billed desc 

    for xml path('')) 
```

返回结果

```
 Code       Completed     Billed        Deleted
    --------   -----------   -----------   -----------
    HK168/03   Mar 30 2012   Aug 17 2011   Mar 30 2012
    HK168/03   Mar 30 2012   Feb 24 2011   Mar 30 2012
    HK168/03   Mar 30 2012   Dec 23 2010   Mar 30 2012
    FT080/03   Apr  4 2012   Mar 29 2012   Apr  4 2012
    FT080/03   Apr  4 2012   Feb  9 2012   Apr  4 2012
    FT080/03   Apr  4 2012   Oct 20 2011   Apr  4 2012

    etc. 
```

而我需要结果

```
 Code       Completed     Billed        Deleted
    --------   -----------   -----------   -----------
    HK168/03   Mar 30 2012   Aug 17 2011   Mar 30 2012
    FT080/03   Apr  4 2012   Mar 29 2012   Apr  4 2012

    etc. 
```

我知道我必须在`select top 1`某处插入以限制`ol.Billed`结果，但我不确定在哪里。任何建议都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:27:46.293

试试这个：它将加入每个 ID 的最大账单日期

```
 select(
    select m.Code + '   ' + cast(m.Completed as varchar(max)) + '   '+ cast(ol.Billed as varchar(max)) + '  ' + cast(m.Delete as varchar (max)) 
    matterdetails as m
    full join (select id, Max(billed) as 'Billed' from officeledger) as ol on ol.id=m.id
        order by ol.Billed desc 
for xml path('')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:29:04.817

你可以替换：

```
full join officeledger as ol on ol.id=m.id 
```

和：

```
full join (select id,MIN(Billed) as Billed from officeledger group by id) as ol = ol.id = m.id 
```

也应该有一种方法可以做到这一点`ROW_NUMBER()`，但除非你需要它，否则我不会写它。

# c# - DirectorySearcher - 当用户密码即将到期时返回什么异常？

> ID：11139050
> 
> 赞同：2
> 
> 时间：2012-06-21T13:16:57.337
> 
> 标签：c#, directorysearcher

我有一个应用程序使用以下代码：

```
 private SearchResult DirectorySearch(string userName, string password, string property)
    {
         DirectoryEntry dEntry = new DirectoryEntry(ConfigurationManager.AppSettings["LDAPServer"].ToString(), FilterOutDomain(userName.Trim()), password);
         DirectorySearcher search = new DirectorySearcher(dEntry);

         search.PropertiesToLoad.Add(property);
         search.Filter = "sAMAccountName=" FilterOutDomain(userName);

         SearchResult result = search.FindOne();
         return result;
    } 
```

并且这个方法调用是在一个 try catch 中（这个 catch 是用于当用户认证失败的时候）。但是，我注意到当用户密码到期（即在 7 天内）时，身份验证失败。很难对此进行测试，所以有谁知道究竟返回了什么异常，所以我可以捕捉到这个并仍然允许登录？

谢谢！

# css - 将消息和提交按钮对齐到其他输入字段的右侧

> ID：11139055
> 
> 赞同：0
> 
> 时间：2012-06-21T13:17:15.383
> 
> 标签：css, input, css-float

[现场直播。](http://www.frshstudio.com/contact/)

我在设计联系表格时遇到了一个小问题。我希望消息字段和提交按钮位于所有其他输入字段的右侧，沿顶部对齐。当我使用`clear:both`and`float:right`时，消息和提交按钮会移动，但是它们远低于所有其他字段。我该如何解决？

```
.contact_name {
    font-family: fanwood-webfont;
    margin-left: 60px;
    padding-bottom: 10px;
}

.contact_email {
    font-family: fanwood-webfont;
    margin-left: 60px;
    padding-bottom: 10px;
}

.contact_subject {
    font-family: fanwood-webfont;
    margin-left: 60px;
}

.contact_message {
    clear: both;
    float: right;
    font-family: fanwood-webfont;
}

.contact_button {
    clear: both;
    float: right;
} 
```

&

```
<p class=contact_name>Name (required)<br />
[text* your-name]</p>

<p class=contact_email>Email (required)<br />
[email* your-email]</p>

<p class=contact_subject>Subject<br />
[text* your-subject]</p>

<p class=contact_message>Message<br />
[textarea* your-message]</p>

<p>[submit class:contact_button "Send"]</p> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:21:03.647

我建议您创建两个`<div>`元素， one`left floated`和 second `right`。 你基本上

需要财产。`float`

**基本示例：**

```
​#left {
   width: 150px;
   height: 100px;
   background-color: #eeeeee;
   float: left;
}

​#right {
   width: 150px;
   height: 100px;
   background-color: #eeeeee;
   float: right;
}​ 
```

工作[示例](http://jsfiddle.net/gGWZG/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:25:21.350

像这样写：

**HTML**

```
<p class=contact_message>Message<br />
[textarea* your-message]</p>

<p>[submit class:contact_button "Send"]</p>

<p class=contact_name>Name (required)<br />
[text* your-name]</p>

<p class=contact_email>Email (required)<br />
[email* your-email]</p>

<p class=contact_subject>Subject<br />
[text* your-subject]</p> 
```

**CSS**

```
.contact_message,
.contact_message + p{
   float: right;
}

.contact_name,
.contact_email,
.contact_subject {
   float: left;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:20:06.213

您必须将浮动元素放在静态元素之前，以以相同的起始长度显示它们:)

所以在你的情况下，就像这样：

```
<p class=contact_message>Message<br />
[textarea* your-message]</p>

<p>[submit class:contact_button "Send"]</p>

<p class=contact_name>Name (required)<br />
[text* your-name]</p>

<p class=contact_email>Email (required)<br />
[email* your-email]</p>

<p class=contact_subject>Subject<br />
[text* your-subject]</p> 
```

# mysql - MySQL 使用条件连接表

> ID：11139056
> 
> 赞同：1
> 
> 时间：2012-06-21T13:17:17.937
> 
> 标签：mysql

我的 SQL 无法做到这一点，但我很确定这对于 SQL 大师来说很容易——我宁愿找出正确的查询，而不是将逻辑放入 PHP 脚本中......

所以：我有 2 张桌子，其中一张包含有关俱乐部、特定比赛以及俱乐部为那场比赛输入了多少支球队的信息。第二个表将条目分成“部门”

IE

```
mysql> describe Entries;
+----------+---------+------+-----+---------+-------+
| Field    | Type    | Null | Key | Default | Extra |
+----------+---------+------+-----+---------+-------+
| ClubId   | int(11) | NO   | PRI | NULL    |       |
| MatchId  | int(11) | NO   | PRI | NULL    |       |
| NumTeams | int(11) | NO   |     | NULL    |       |
+----------+---------+------+-----+---------+-------+
mysql> describe Divisions;
+----------+---------+------+-----+---------+-------+
| Field    | Type    | Null | Key | Default | Extra |
+----------+---------+------+-----+---------+-------+
| MatchId  | int(11) | NO   | MUL | NULL    |       |
| ClubId   | int(11) | NO   | MUL | NULL    |       |
| Team     | int(11) | NO   |     | NULL    |       |
| Division | int(11) | NO   |     | NULL    |       |
+----------+---------+------+-----+---------+-------+ 
```

样本数据：

```
Entries:
1, 1, 1 (Club1, Match1, 1 team)
1, 3, 2 (Club1, Match3, 2 teams)

Divisions:
1, 1, 1, 1 (Club1, Match1, Team1 is in division 1)
1, 1, 2, 2 (Club1, Match1, Team2 is in division 2)
1, 2, 1, 1 (Club1, Match2, Team1 is in division 1)
1, 2, 2, 2 (Club1, Match2, Team2 is in division 2)
1, 3, 1, 1 (Club1, Match3, Team1 is in division 1)
1, 3, 2, 2 (Club1, Match3, Team2 is in division 2) 
```

要求的结果：

```
1, 1, 1 (Club 1, Match1, Team1)
1, 3, 1 (Club1, Match3, Team1)
1, 3, 2 (Club1, Match3, Team2)

- so not all the rows in Divisions are in the result.
  e.g, club1, match1, team2 isn't here because there
  is only one entry in match 1. 
```

现在 Entries.NumTeams 可以随着俱乐部进入或移除球队而上下波动。当一个新团队进入时，它会被放在第 1 级（所以它总是在一个分区中）。当球队被删除时，他们在分区表中的条目不会被删除（分区是手动设置的，所以如果有人决定俱乐部 X 的第 2 队属于第 2 区，即使俱乐部 X 尚未进入第 2 区，您也希望保留该信息团队）。

因此，要打印一个部门中的所有团队，我需要以下内容：

```
SELECT * FROM Divisions WHERE Divisions.Team <= Entries.NumTeams
    (for the Entries row with the matching match and club) 
```

我试过这个：

```
SELECT Divisions.* from Entries LEFT JOIN Divisions ON 
    Divisions.MatchId = Entries.MatchId AND Divisions.ClubId = Entries.ClubId 
    WHERE Divisions.Team <= Entries.NumTeams 
```

但我最终得到了重复的行。我可能可以通过使用 SELECT DISTINCT 来摆脱它们，但这让我认为我的查询一开始就被破坏了。我还交换了左右哪个表，但仍然有重复。

明天将尝试提供的答案。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:25:29.510

使用`DISTINCT`会删除重复的行，您的查询似乎没问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:20:48.863

在 mysql 中使用 distinct

```
SELECT distinct Divisions.* from Entries LEFT JOIN Divisions ON 
    Divisions.MatchId = Entries.MatchId AND Divisions.ClubId = Entries.ClubId 
    WHERE Divisions.Team <= Entries.NumTeams 
```

# c# - 在主 BTreeDatabase 上使用具有 DuplicatesPolicy.SORTED 的 SecondaryBTreeDatabase

> ID：11139063
> 
> 赞同：1
> 
> 时间：2012-06-21T13:17:43.647
> 
> 标签：c#, .net, berkeley-db

我对 Berkeley DB for .NET 3.5（确切地说是 5.0.21 版）有疑问。

`primaryKeyDuplicatesPolicy = DuplicatesPolicy.NONE`这是我的设置在主数据库上使用时效果很好：

```
var btcfg = new BTreeDatabaseConfig
                {
                        Duplicates = primaryKeyDuplicatesPolicy,
                        Creation = CreatePolicy.IF_NEEDED,
                        FreeThreaded = false,
                        ErrorPrefix = "bdbIndex",
                        ReadUncommitted = false,
                        UseMVCC = false,
                        CacheSize = new CacheInfo(cacheSize, 0, 1),
                };
var primaryDb = BTreeDatabase.Open(additionalPath + "primary.db", btcfg);
var secondaryDb = SecondaryBTreeDatabase.Open(additionalPath + "secondary.db",
                  new SecondaryBTreeDatabaseConfig(PrimaryDb, GetSecondaryDbKey)
                      {
                          AutoCommit = btcfg.AutoCommit,
                          Creation = CreatePolicy.IF_NEEDED,
                          FreeThreaded = btcfg.FreeThreaded,
                          ErrorPrefix = btcfg.ErrorPrefix,
                          ReadUncommitted = btcfg.ReadUncommitted,
                          UseMVCC = btcfg.UseMVCC,
                          Env = env,
                          Duplicates = DuplicatesPolicy.NONE
                      }); 
```

现在，一旦我更改`primaryKeyDuplicatesPolicy`为任何其他值，一切都会`SecondaryBTreeDatabase.Open()`以 exception中断`BerkeleyDB.DatabaseException : Invalid argument`。

那么，是否有可能在主数据库中有重复的辅助数据库？（据我了解，手册说是的，这是可能的）。

其次，我做错了什么，我应该怎么做才能使这件事起作用？

PS：我试过初始化环境，但这没有帮助。此外，目前将逻辑拆分为两个主数据库会很痛苦。

# jquery - Google Feed Loader API 忽略 XML 属性

> ID：11139065
> 
> 赞同：2
> 
> 时间：2012-06-21T13:17:49.373
> 
> 标签：jquery, xml, json, rss, google-feed-api

转换为 JSON 时，Google 的提要加载器似乎忽略了属性。我正在使用 jQuery 通过 AJAX 获取提要。可以在此处查看实际的 RSS XML 提要，并且可以在[此处查看](http://pastebin.com/raw.php?i=ALevCVux)[来自](http://pastebin.com/raw.php?i=MLzQYb8M)AJAX 调用的响应。

我需要访问标签的`url`属性`<enclosure>`，但都没有出现在响应中。

作为参考，我使用的代码是：

```
function getFeed(url) {
    url = 'http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&num=10&callback=?&q=' 
            + encodeURIComponent(url);
    $.ajax({
        type: 'GET',
        url: url,
        dataType: 'jsonp',
        cache: false,
        success: function(d) { alert(JSON.stringify(d); },
        error: function(s,x) { alert(x); }
    }); 
} 
```

我不知道如何获取 XML 响应，因为更改`dataType : 'xml'`会导致 HTTP 错误。JSON 更可取。

有任何想法吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-28T12:45:27.513

JSON 响应中不包含“enclosure”标签，因此您有两个选项可以设置输出参数：

您需要将输出设置为“XML”：[https ://developers.google.com/feed/v1/jsondevguide#json_args](https://developers.google.com/feed/v1/jsondevguide#json_args)

```
url = 'http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=xml&num=10&callback=?&q='+ encodeURIComponent(url); 
```

或者使用混合格式：[https ://developers.google.com/feed/v1/devguide#resultMixed](https://developers.google.com/feed/v1/devguide#resultMixed)

```
url = 'http://ajax.googleapis.com/ajax/services/feed/load?v=1.0&output=json_xml&num=10&callback=?&q='+ encodeURIComponent(url); 
```

您将获得 JSON 以及带有所有标签的新 xmlString 属性（包括“enclosure”属性）

```
alert(d.responseData.xmlString); 
```

在这两种情况下，您都需要解析 XML 字符串并导航到所需的信息

希望这可以帮助

# jquery - 在 Fancybox 选项中访问“this”

> ID：11139067
> 
> 赞同：2
> 
> 时间：2012-06-21T13:18:08.613
> 
> 标签：jquery, fancybox, fancybox-2

我有一个打开 Fancybox 框的链接，如下所示：

```
<a class="fancybox" rel="gallery" href="<?php echo $image_src; ?>" data-id="<?php echo $post->ID; ?>"> 
```

该链接的`data`属性填充了`id`如上所示。我想让数据属性在 Fancybox 辅助函数中可用。我尝试`$(this.element).data('id')`在下面的代码中使用：

```
helpers: {
    title: {
        type: 'over'
    },
    buttons: {
        position: 'bottom',
        tpl: '<div id="fancybox-buttons"><ul> \
                                            <li class="button"><a class="test-btn" data-id="' + $(this.element).data('id') + '" href="#"></a></li> \
                                        </ul></div>'
    }
} 
```

但是它不起作用。获取数据属性总是`undefined`在辅助函数中返回。我如何让这个工作。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-07-08T18:56:24.837

@meagar 提出了一个很好的解决方案，通常适用于大多数人。但是，由于用于调用 Fancybox 的链接是通过 Ajax 请求加载到页面上的，因此他的解决方案对我不起作用。我通过声明一个全局变量然后将 的值传递`$(this.element).data('id')`给 Fancybox`afterLoad`回调中的全局变量来解决它。

```
afterLoad : function() {
    my_global_var = $(this.element).data('id');
} 
```

然后我简单地使用了辅助选项中的全局变量。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T14:56:08.513

`$(this.element).data('id')`在您绑定回调时正在评估。`this`将是您打电话时所处的任何环境`$.fancybox`。

如果您将 Fancybox 绑定到锚标记，则您已经选择了该锚标记。像这样的东西应该工作：

```
$('a.fancybox').each(funcion () {
  var $a = $(this);
  $a.fancybox({ tpl: "..." + $a.data('id') + "..." });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-07-08T10:19:28.877

用php之类的不是更容易吗？

```
buttons : { 
 position: 'bottom',
 tpl: '...<a class="test-btn" data-id="<?php echo $post->ID; ?>" href="#"></a>...'
} 
```

问题是您不能`$(this.element)`在*回调*函数之外使用......您正试图在模板中使用它。

# scala - Scala-文件读取期间集合文件中的IndexOutOfBoundsException

> ID：11139070
> 
> 赞同：0
> 
> 时间：2012-06-21T13:18:17.453
> 
> 标签：scala, exception, io

我一直在尝试在 Scala 中编写一些代码来读取文件并将其分成几行，以便将单词添加到树结构中。我对此采取了几种不同的方法，但都遇到了相同的错误：

```
java.lang.IndexOutOfBoundsException: -1
at scala.collection.immutable.Vector.checkRangeConvert(Vector.scala:140)
at scala.collection.immutable.Vector.apply(Vector.scala:130)
at WordTree.addWord(Main.scala:27)
at bot$$anonfun$main$2.apply(bot.scala:12)
at bot$$anonfun$main$2.apply(bot.scala:10)
at scala.collection.Iterator$class.foreach(Iterator.scala:772)
at scala.collection.Iterator$$anon$22.foreach(Iterator.scala:451)
at bot$.main(bot.scala:10)
at bot.main(bot.scala)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
at java.lang.reflect.Method.invoke(Method.java:597)
at scala.tools.nsc.util.ScalaClassLoader$$anonfun$run$1.apply(ScalaClassLoader.scala:78)
at scala.tools.nsc.util.ScalaClassLoader$class.asContext(ScalaClassLoader.scala:24)
at scala.tools.nsc.util.ScalaClassLoader$URLClassLoader.asContext(ScalaClassLoader.scala:88)
at scala.tools.nsc.util.ScalaClassLoader$class.run(ScalaClassLoader.scala:78)
at scala.tools.nsc.util.ScalaClassLoader$URLClassLoader.run(ScalaClassLoader.scala:101)
at scala.tools.nsc.ObjectRunner$.run(ObjectRunner.scala:33)
at scala.tools.nsc.ObjectRunner$.runAndCatch(ObjectRunner.scala:40)
at scala.tools.nsc.MainGenericRunner.runTarget$1(MainGenericRunner.scala:56)
at scala.tools.nsc.MainGenericRunner.process(MainGenericRunner.scala:80)
at scala.tools.nsc.MainGenericRunner$.main(MainGenericRunner.scala:89)
at scala.tools.nsc.MainGenericRunner.main(MainGenericRunner.scala) 
```

我试过了：

```
val wordtree = new WordTree
val wordlist = Source.fromFile("/usr/share/dict/words").getLines

for { line <- wordlist
      if (line.length > 1)
} wordtree.addWord(line)

// As well as
val wordtree = new WordTree
Source.fromFile("/usr/share/dict/words").mkString("").split("\n").foreach(
  wordtree.addWord(_)) 
```

以及使用每个元素中存在的元素的许多变体。这是集合库的错误还是我的代码有严重问题，在这里？我在 OS X 上使用 Scala 2.9.2。

编辑：这是 WordTree 和 Node.js 的代码。

```
class Node(val letter: Char, var endsWord: Boolean, var connections: List[Node] = List()) {
    def getLink(letter: Char): Node = {
        for (connection <- connections) {
            if (connection.letter == letter)
                return connection
        }
        null.asInstanceOf[Node]
    }

    def addLink(letter: Char, endsWord: Boolean) = 
        connections = (new Node(letter, endsWord)) :: connections

    def printable: String = 
        "(" + letter.toString() + "->" + connections.map(_.printable).mkString(", ") + ")"
}

class WordTree() {
    val alphabet = "abcdefghijklmnopqrstuvwxyz"
    var base = alphabet.map(c => new Node(c.asInstanceOf[Char], false))

    def addWord(word: String, n: Node = null): Node = {
        var node = n
        var link = n

        if (word.length == 0) return null.asInstanceOf[Node]
        if (n == null) node = base(alphabet.indexOf(word(0)))
        if (word.length == 1) {
            node.endsWord = true
            return node
        }
        link = node.getLink(word(1).asInstanceOf[Char])
        if (link != null) 
            return addWord(word.slice(1, word.length), link)
        node.addLink(word(1).asInstanceOf[Char], false)
        link = node.getLink(word(1).asInstanceOf[Char])
        addWord(word.slice(1, word.length), link)
    }

    def findWord(word: String, n: Node = null): Node = {
        var node = n
        var link = n

        if (n == null) node = base(alphabet.indexOf(word(0)))
        if (word.length == 1) 
            return if (node.endsWord) node else null.asInstanceOf[Node]
        link = node.getLink(word(1).asInstanceOf[Char])
        if (link != null) return findWord(word.slice(1, word.length), link)
        return null.asInstanceOf[Node]
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T19:13:15.190

`alphabet`给定字典中的单词，该变量不完整。字典文件包含以大写字母开头的单词。当您搜索`indexOf("A")`它时，它将返回 -1，因为`alphabet`.

You can resolve this by either adding uppercase letters to `alphabet`, or using .toLowerCase before passing the word into `addWord`.

# mysql - SQL：为具有多个 id 的项目创建唯一 id

> ID：11139072
> 
> 赞同：1
> 
> 时间：2012-06-21T13:18:19.793
> 
> 标签：mysql, sql, sqlite

我一直在思考这个问题，但找不到解决方案（可能很简单。）

我有一个包含两列的表，显示哪些 ID 已连接，即属于同一个人。

在此示例中，只有三个人，但其中一个人具有三个唯一 ID。

```
PID      | EPID
---------+--------
10004835 | 10004835
10015375 | 10015375
10015375 | 10019859
10019859 | 10015375
10019859 | 10019859
10019859 | 10000000
10000000 | 10019859
10020104 | 10020104 
```

我想要做的只是在此表中添加一列，为每个唯一的个体提供唯一的代码。这就像

```
PID      | EPID     | NPID
---------+----------+-----
10004835 | 10004835 | 1
10015375 | 10015375 | 2
10015375 | 10019859 | 2
10019859 | 10015375 | 2
10019859 | 10019859 | 2
10019859 | 10000000 | 2
10000000 | 10019859 | 2
10020104 | 10020104 | 3 
```

附言。我正在使用 sqlite3，所以请不要在答案中递归。

编辑：除非我能找到适用于 SQLITE3 的解决方案，否则我将不得不使用 MYSQL。在那种情况下，有人知道包含递归的解决方案吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:27:33.913

如果您对任何连接的 ID 链的长度有上限，则可以多次自加入表并获得所有 id 中的最小（或最大）：

```
select pid, epid,
  min(t1.epid,
      coalesce(t2.epid, t1.epid),
      coalesce(t3.epid, t1.epid),
      coalesce(t4.epid, t1.epid),
      coalesce(t5.epid, t1.epid)) npid
from table t1
join table t2 on t1.epid = t2.pid and t2.epid not in (t1.epid)
join table t3 on t2.epid = t3.pid and t3.epid not in (t1.epid, t2.epid)
join table t4 on t3.epid = t4.pid and t4.epid not in (t1.epid, t2.epid, t3.epid)
join table t5 on t4.epid = t5.pid and t5.epid not in (t1.epid, t2.epid, t3.epid, t4.epid)
group by pid, epid 
```

# debugging - 在 Visual Studio 2012 上调试着色器，找不到符号

> ID：11139078
> 
> 赞同：7
> 
> 时间：2012-06-21T13:18:46.307
> 
> 标签：debugging, direct3d, visual-studio-2012, sharpdx

我不知道你们中是否有很多人尝试过 Visual Studio 2012 新的出色功能来调试基于 Direct3D 的应用程序。

我成功捕获了我的应用程序的一帧，然后我想调试顶点着色器的执行： ![在此处输入图像描述](../Images/2cbb6b4a17840d1344a71b3343958025.png)

我单击绿色三角形来调试给定的顶点，但我收到“未找到符号”消息，阻止我对其进行调试。

有人知道如何让 Visual Studio 找到符号吗？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-01T16:28:12.543

您需要使用调试信息编译着色器。为了可靠地调试，您可能还希望禁用优化。根据您编译着色器的方式，这将是以下两种方式之一：

**D3DCompile / D3DCompileFromFile：**将`D3DCOMPILE_DEBUG`和`D3DCOMPILE_SKIP_OPTIMIZATION`标志传递给 D3DCompile。请注意，根据 D3D 版本以及您是否使用 D3DX，这些标志可能具有不同的前缀。

**fxc.exe**：编译标志具有开关等效项。对于`D3DCOMPILE_DEBUG`，传递`/Zi`给 fxc。为`D3DCOMPILE_SKIP_OPTIMIZATION`，通过`/Od`。

Visual Studio 2012 非常聪明地根据嵌入的调试信息查找着色器的源，但如果它无法做到这一点，它会提示您指向适当的文件。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T11:35:14.323

来自[msdn](http://msdn.microsoft.com/en-us/library/hh873197.aspx)：

> 无法同时调试应用程序及其着色器代码。但是，您可以在它们之间交替

您可能正在调试应用程序并尝试同时调试着色器。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-07-30T10:36:38.570

使用 SlimDX 时，您可以传递`ShaderFlags`给着色器编译器。传递`ShaderFlags.Debug`会导致包含调试符号。

```
var bytecode = ShaderBytecode.CompileFromFile("shader.fx", "VShader", "vs_4_0", ShaderFlags.Debug, EffectFlags.None) 
```

希望它在本机 Direct3D 中是类似的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-02-07T02:06:57.393

我能够在 VS2012 中调试着色器。

我使用了这个命令行：

```
fxc /TTargetProfile /EShaderMainFunctionName /Od /Zi /FdMyShader.pdb MyShaderFile 
```

在代码中，我使用了：

```
D3DX11CompileFromFile(filename, NULL, NULL, "ShaderMainFunctionName, "TargetProfile", D3D10_SHADER_DEBUG | D3D10_SHADER_SKIP_OPTIMIZATION, ...); 
```

TargetProfile 类似于`vs_5_0`or `ps_5_0`。

我很确定它可以与 D3DCompile 一起使用。

当我忘记放置`D3D10_SHADER_DEBUG | D3D10_SHADER_SKIP_OPTIMIZATION`时，我尝试手动加载 pdb 文件，它说符号不匹配。

当我做对时，Pixel History 视图中的 Pixel Shader 是一个蓝色链接。当我点击它时，它会自动加载正确的文件，我可以开始调试它。

我找不到生成 pdb 文件的 /Fd 的代码内等效项，这就是我必须通过命令行的原因。

# android - 显示全屏视频查看和更改方向时出现问题

> ID：11139081
> 
> 赞同：1
> 
> 时间：2012-06-21T13:18:57.287
> 
> 标签：android, fullscreen, android-4.0-ice-cream-sandwich, android-videoview, orientation-changes

我有一个显示全屏 videoView 的活动（但保持纵横比）。它在 Android 2.3.7 上运行良好，但我在 Android 4 上遇到了一些奇怪的问题（可能是 3，我还没有检查）：

1.  出于某种原因，如果我将主题设置为全屏，没有标题栏（或操作栏），我会在 videoView 下方看到蓝色（或白色？）渐变，如下所示：

    ![全屏出现奇怪的渐变](../Images/3ab668a5208ccc6e1b5202336a06cad4.png)

    相关布局在这里：

    编辑：在 android 3 上，它不会发生。

2.  当我将方向从纵向更改为横向时，它会从头开始重新加载整个视频。在 Android 2.3.7 上，它没有任何延迟地继续，好像什么都没有改变。

相关的清单部分在这里：

```
<activity android:name=".activities.player_activity.PlayerActivity" android:configChanges="keyboardHidden|orientation"
    android:theme="@android:style/Theme.Holo.NoActionBar.Fullscreen" android:screenOrientation="sensor"/> 
```

请注意，在 Android 3 上，旋转平板电脑不会做任何事情，因此不会改变方向。

我应该如何处理这些问题？API 演示似乎没有更新以处理这些情况。

我的项目在：nexus one (android 2.3.7)、xoom (android 3)、galaxy S3 (android 4) 上进行了测试。

* * *

为了修复数字 1，我只是更改了没有任何背景的主题。奇怪的是它在设备上是这样的。想知道在其他 Android 4 设备上是否也是这样。为了创建主题，我在“res/values/”文件夹中创建了一个文件“theme.xml”，并在那里写道：

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
  <style name="Theme.FullScreenNobarsNoBackground" parent="@android:style/Theme.Holo.NoActionBar.Fullscreen">
    <item name="android:windowBackground">@null</item>
  </style>
</resources> 
```

当然，我还更新了清单以使用新主题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:59:53.210

当您更改设备方向时，Dalvik 会终止该活动并创建另一个活动，并且垃圾收集器会清理所有旧的东西。

我建议您强制应用程序保持水平模式，您可以更改**活动**中的跟随属性：

```
<activity android:screenOrientation="landscape" /> 
```

如果您想要活动更改方向，则必须处理更改。您可以阅读本文档[如何处理运行时更改](http://developer.android.com/guide/topics/resources/runtime-changes.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:01:57.127

恐怕我在这张图片上看不到你所说的渐变。但如果它在整个屏幕上，那么这可能是 Holo 主题的标准背景，您可以使用自定义主题将其删除。

至于轮换重启，您可以将当前时间保存在 onConfigurationChanged(..) 中，然后使用 VideoView.seekTo(..) 在代码的适当部分将其恢复到正确的时间。但是，我不知道为什么这会在 ICS 中发生，因为您没有破坏 Activity。

# html - 关于windows xp OS中Microsoft Yahei字体宽度的Bug

> ID：11139085
> 
> 赞同：0
> 
> 时间：2012-06-21T13:19:09.193
> 
> 标签：html, css, fonts, windows-xp

首先，我显示代码：

`<!--html-->`

`<span class="text">中文</span>`

`<!--css-->`

`.text {float:left; font:400 14px/1.5 "Microsoft Yahei"}`

一般来说，元素的视觉宽度`span` 应该是28px，

但是我发现`span`在我朋友的电脑中元素的视觉宽度被更改为 30px ，在所有浏览器中，视觉宽度是 30px 。

有没有人发现这个问题？如何解决？

感谢您的关注。

# list - 如何使用惯用的Scala替换（填充）来自另一个列表的选项列表中的无条目？

> ID：11139087
> 
> 赞同：5
> 
> 时间：2012-06-21T13:19:11.870
> 
> 标签：list, scala, idioms

我在随机位置有一个`List[Option[MyClass]]`with `None`，我需要从 a 再次“填充”该列表，以`List[MyClass]`保持顺序。

以下是示例列表和预期结果：

```
val listA = List(Some(3),None,Some(5),None,None)
val listB = List(7,8,9)
val expectedList = List(Some(3), Some(7), Some(5), Some(8), Some(9)) 
```

那么，如何使用惯用的 Scala 来处理该列表？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-06-21T13:45:32.697

```
def fillL[T](a:List[Option[T]], b:List[T]) = {
    val iterB = b.iterator
    a.map(_.orElse(Some(iterB.next)))
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T16:12:45.887

迭代器解决方案可以说是惯用的 Scala，并且绝对简洁且易于理解，但它不是*功能性*的——任何时候调用`next`迭代器时，你都会牢牢地陷入副作用的境地。

更实用的方法是使用折叠：

```
def fillGaps[A](gappy: List[Option[A]], filler: List[A]) =
  gappy.foldLeft((List.empty[Option[A]], filler)) {
    case ((current, fs), Some(item)) => (current :+ Some(item), fs)
    case ((current, f :: fs), None) => (current :+ Some(f), fs)
    case ((current, Nil), None) => (current :+ None, Nil)
  }._1 
```

在这里，我们遍历 gappy 列表，同时维护另外两个列表：一个用于我们已处理的项目，另一个用于剩余的填充元素。

这种解决方案不一定比另一种更好——Scala 旨在允许您以这种方式混合函数式和命令式结构——但它确实具有潜在的优势。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T21:02:41.960

我只是以直截了当的方式编写它，匹配列表的头部并适当地处理每种情况：

```
def fill[A](l1: List[Option[A]], l2: List[A]) = (l1, l2) match {
  case (Nil, _) => Nil
  case (_, Nil) => l1
  case (Some(x) :: xs, _) => Some(x) :: fill(xs, l2)
  case (None :: xs, y :: ys) => Some(y) :: fill(xs, ys)
} 
```

大概一旦你用完了东西来填充它，你就把剩下的`None`s 留在里面。

# c# - BlockingCollection 在添加项目时会阻塞吗？如果是这样，为什么？

> ID：11139089
> 
> 赞同：3
> 
> 时间：2012-06-21T13:19:14.293
> 
> 标签：c#, .net, multithreading, task-parallel-library

我们使用 Parallel.foreach 来使用阻塞集合中的项目。我知道默认情况下，分区会在完成后发生。我想更多地了解这可能如何影响 BlockingCollection 上的锁/阻塞。是否存在在线程消耗时可能会阻止对阻塞集合的添加操作的情况？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:25:20.120

它可以（请参阅[如何：从 BlockingCollection 中单独添加和获取项目](http://msdn.microsoft.com/en-us/library/dd997306.aspx)）

> 第一个示例显示如何添加和获取项目，以便在集合暂时为空（获取时）或达到最大容量（添加时）或指定的超时期限已过时，操作将阻塞。请注意，仅在使用构造函数中指定的最大容量创建 BlockingCollection 时才启用最大容量阻塞。

因此，如果集合处于最大容量，它将阻止添加。

如果您在 foreach 循环中使用项目，则在此期间添加项目不会阻塞，但您需要注意以下几点：

1.  无法保证项目的枚举顺序与生产者线程添加它们的顺序相同。
2.  重要的是要理解这种枚举（foreach）表示集合在精确时间点的快照。如果在您执行循环时其他线程同时添加或删除项目，则循环可能不代表集合的实际状态。

# c - 当您将 12ab 之类的内容输入到 scanf("%d",&argu) 时会发生什么？

> ID：11139092
> 
> 赞同：5
> 
> 时间：2012-06-21T13:19:21.293
> 
> 标签：c, scanf

当我想检查我输入的是数字时，我遇到了这个问题。`scanf`如果我成功输入数字，该函数将返回 1。所以这是我写的：

```
int argu;
while(scanf("%d",&argu)!=1){
    printf("Please input a number!\n");
} 
```

但是当我输入类似`abcd`的东西时，循环会永远持续下去并且不会停止提示。

我在网上查了一下，发现它与缓存有关，我需要清理它以便`scanf`获取新数据。所以我尝试`fflush`了，但没有奏效。

然后我看到了这个：

```
int argu,j;
while(scanf("%d",&argu)!=1){
    printf("Please input a number!\n");
    while((j=getchar())!='\n' && j != '\n');
} 
```

然后，当我输入“abcd”之类的内容时，它运行良好，并提示我输入。但是当我输入像'12ab'这样的东西时，它就不能再工作了。

那么有没有一种方法可以检查输入`scanf("%d", &argu)`实际上是一个数字，如果不是，则提示输入另一个输入？

**编辑**：

我看到了答案并通过使用解决了我的问题`while(*eptr != '\n')`。

请注意，该`fgets`函数实际上将 '\n' 读入数组而`gets`没有。所以要小心。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:21:34.057

最好阅读整行，使用`fgets()`，然后检查它，而不是尝试从输入流中“即时”解析。

这样更容易忽略无效输入。

使用`fgets()`然后只是`strtol()`转换为数字，这样可以很容易地查看数字后面是否有尾随数据。

例如：

```
char line[128];

while(fgets(line, sizeof line, stdin) != NULL)
{
   char *eptr = NULL;
   long v = strtol(line, &eptr, 10);
   if(eptr == NULL || !isspace(*eptr))
   {
     printf("Invalid input: %s", line);
     continue;
   }
   /* Put desired processing code here. */
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T14:29:02.443

> 但是当我向它输入诸如 abcd 之类的东西时，循环将永远持续下去，并且不会停止提示。

那是因为如果`scanf`遇到与转换说明符不匹配的字符，它会将其留在输入流中。基本上，发生的事情是从输入流中`scanf`读取字符`a`，确定它不是`%d`转换说明符的有效匹配项，然后将其推回输入流。下一次通过循环它做同样的事情。然后再次。然后再次。然后再次。

`fflush`不是一个好的解决方案，因为它没有被定义为在输入流上工作。

对于输入`"12ab"`，`scanf`将读取和转换`"12"`，留`"ab"`在输入流中。

最好的解决方案是将所有输入读取为文本，然后使用`strtol`（对于整数值）和`strtod`（对于实数值）转换为数字类型。例如：

```
char input[SIZE]; // assume SIZE is big enough for whatever input we get
int value;

if (fgets(input, sizeof input, stdin) != NULL)
{
  char *chk;
  int tmp = (int) strtol(input, &chk, 10);
  if (isspace(*chk) || *chk == 0)
    value = tmp;
  else
    printf("%s is not a valid integer string\n", input);
} 
```

`chk`指向输入流中第一个不是十进制数字的字符。如果此字符不是空格或 0 终止符，则输入字符串不是有效整数。这将检测和拒绝输入，`"12ab"`如 和`"abcd"`。

`scanf`如果您知道您的输入总是会正确形成并且表现良好，那么这是一个很好的解决方案。如果您的输入有可能*表现*不佳，请`fgets`根据需要使用和转换。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:24:21.733

我会建议将输入作为字符串并检查其中的非数字字符。如果输入有效，则将字符串转换为 int by `sscanf(str,"%d",&i);`，否则显示错误。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:57:55.633

只需`scanf("%*[^\n]\n")`在循环内调用，它就会丢弃“缓存”。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-24T08:26:50.763

`scanf("%*[^\n]\n")`在循环内调用。这应该足以丢弃与缓存相关的任何内容。

# php - 登录后获取https的html

> ID：11139094
> 
> 赞同：0
> 
> 时间：2012-06-21T13:19:31.883
> 
> 标签：php, curl, https

我想获取页面的html。经过一番谷歌搜索后，我发现以下代码不起作用。

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
curl_setopt($ch, CURLOPT_USERPWD, "$username:$passwd");
curl_setopt($ch, CURLOPT_HTTPAUTH, CURLAUTH_BASIC);
$output = curl_exec($ch);
$info = curl_getinfo($ch);
curl_close($ch);
echo $output; 
```

编辑：然后是这样的：

```
$ch = curl_init();
curl_setopt($ch, CURLOPT_URL, '');
curl_setopt($ch, CURLOPT_POSTFIELDS,'username='.urlencode($username).'&passwd='.urlencode($passwd));
curl_setopt($ch, CURLOPT_POST, 1);
curl_setopt($ch, CURLOPT_HEADER, 0);
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);
curl_setopt($ch, CURLOPT_COOKIEJAR, "/tmp/my_cookies.txt");
curl_setopt($ch, CURLOPT_COOKIEFILE, "/tmp/my_cookies.txt");
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
    curl_setopt( $ch, CURLOPT_SSL_VERIFYPEER, false ); 
curl_setopt($ch, CURLOPT_USERAGENT, "Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.8.1.3) Gecko/20070309 Firefox/2.0.0.3");
curl_setopt($ch, CURLOPT_REFERER, "");
$output = curl_exec($ch);
    echo $output 
```

这只是显示目标页面，它不登录，也不返回html代码。

编辑2：现在尝试使用 $data = array('username' => $username, 'passwd' => $passwd); 和 curl_setopt($ch, CURLOPT_POSTFIELDS,$data); 这显示与上面相同 + 一个错误：请求实体太大

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:22:48.303

该页面不使用 HTTP 基本身份验证。

您需要发出一个 HTTP 请求以匹配提交表单将发送的内容，然后您需要处理响应（这可能涉及存储 cookie）。

# javascript - JavaScript 在 div 中隐藏第二个 p 标签

> ID：11139096
> 
> 赞同：-3
> 
> 时间：2012-06-21T13:19:32.703
> 
> 标签：javascript, css, hide

您好，我正在使用一些 javascript 来隐藏 div 中的第二个 p 标签。如果您还可以包含 onload（或其他）位，那就太好了。谢谢。

我试过这个：

```
$(document).ready(function(){ .CategoryDescription document.ElementById(".CategoryDescription p:second-child").style.visibility = "hidden"; }); }); 
```

和

```
$('.CategoryDescription>div>p>p').first().css(styles go here) 
```

但似乎都不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:29:07.800

在 jQuery 中

```
$(document).ready(function() {
    $(".CategoryDescription p:eq(1)").hide();
}); 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:27:07.160

```
p:nth-of-type(2){
    display:none;
} 
```

不是java-script，但你可以在javascript中获得非常相似的效果。

**编辑：**或者在旧浏览器中工作，如果使用`<!DOCTYPE>`，`div>p:first-child+p`

[例子](http://jsfiddle.net/Kyomu/PDSMe/)

# wpf - WPF 和 MVVM - 动态更改主题

> ID：11139103
> 
> 赞同：2
> 
> 时间：2012-06-21T13:19:49.467
> 
> 标签：wpf, mvvm

我正在使用 MVVM 开发一个 WPF 项目，并且我正在尝试实现一个动态更改主题的功能。主题信息位于单独的 xaml 文件中（即 Theme1.xaml、Theme2.xaml）。由于各种原因，我想在 ViewModel 类中而不是在 View.xaml 的代码隐藏文件中进行实际的主题更改。

我尝试了几个想法，但没有任何工作：

*   我尝试将 View 的 ResourceDictionary 绑定到 ViewModel 中的变量，但被告知无法在 ResourceDictionary 类型的 Source 属性上设置绑定

*   我的 ViewModel 类中没有任何类型的 View 对象可以调用“UpdateTheme”方法

关于如何从 ViewModel 类更改 View 类中的 MergedDictionary 引用的任何想法？

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:45:48.357

我之前在这里处理过同样的问题，我在我的情况下所做的可能是它可以帮助你。

将所有主题文件（theme1.xaml、theme2.xaml...）复制到 exe 路径下的 Themes 文件夹中。并尝试使用下面的示例代码。使用绑定

C＃：

```
private void ChangeTheme(FileInfo _SelectTheme)
{
    App.Current.Resources.Clear();
    App.Current.Resources.Source = new Uri(_SelectTheme.FullName, UriKind.Absolute);
}
private ObservableCollection<FileInfo> _files;
public ObservableCollection<FileInfo> Files
{
    get { return _files; }
    set { _files = value; OnChanged("Files"); }
}
public MainWindow()
{
    this.InitializeComponent();

    Dispatcher.BeginInvoke(DispatcherPriority.Background, new Action(() =>
    {
        var localthemes = new System.IO.DirectoryInfo("Themes").GetFiles();
        if (Files == null)
            Files = new ObservableCollection<FileInfo>();
        foreach (var item in localthemes)
        {
            Files.Add(item);
        }
        SelectedTheme = Files[0];
    }));

    this.DataContext = this;
}

public event PropertyChangedEventHandler PropertyChanged;
public void OnChanged(string name)
{
    if (PropertyChanged != null)
        PropertyChanged(this, new PropertyChangedEventArgs(name));
} 
```

XAML：

```
<Window x:Class="WPFTheme.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        x:Name="Window"
        Title="MainWindow"
        Width="640"
        Height="480">

    <Grid x:Name="LayoutRoot" Background="{DynamicResource DisabledForegroundBrush}">
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="0.285*" />
            <ColumnDefinition Width="0.365*" />
            <ColumnDefinition Width="0.35*" />
        </Grid.ColumnDefinitions>
        <Grid.RowDefinitions>
            <RowDefinition Height="0.132*" />
            <RowDefinition Height="0.162*" />
            <RowDefinition Height="0.403*" />
            <RowDefinition Height="0.168*" />
            <RowDefinition Height="0.135*" />
        </Grid.RowDefinitions>
        <Button Width="57"
                Margin="15,13,0,10.872"
                HorizontalAlignment="Left"
                Content="Enabled" />
        <Button Width="72"
                Margin="0,14,17.12,10.872"
                HorizontalAlignment="Right"
                Content="Disabled"
                IsEnabled="False" />
        <TextBlock Grid.Column="1"
                   Width="69"
                   Margin="11.88,15,0,27.872"
                   HorizontalAlignment="Left"
                   Text="TextBlock"
                   TextWrapping="Wrap" />
        <TextBox Grid.Column="1"
                 Width="64"
                 Height="21"
                 Margin="9.88,0,0,4.872"
                 HorizontalAlignment="Left"
                 VerticalAlignment="Bottom"
                 Text="TextBox"
                 TextWrapping="Wrap" />
        <TextBox Grid.Column="1"
                 Height="21"
                 Margin="88.88,0,35.8,3.872"
                 VerticalAlignment="Bottom"
                 IsEnabled="False"
                 Text="TextBox Disabled"
                 TextWrapping="Wrap" />
        <CheckBox Grid.Row="1"
                  Width="71"
                  Height="14"
                  Margin="11,7.128,0,0"
                  HorizontalAlignment="Left"
                  VerticalAlignment="Top"
                  Content="CheckBox" />
        <CheckBox Grid.Row="1"
                  Width="71"
                  Height="14"
                  Margin="0,8.128,15.12,0"
                  HorizontalAlignment="Right"
                  VerticalAlignment="Top"
                  Content="Disabled"
                  IsEnabled="False" />
        <ComboBox Grid.Column="2"
                  Width="94"
                  Margin="8.2,18,0,11.872"
                  HorizontalAlignment="Left"
                  ItemsSource="{Binding Files}"
                  SelectedItem="{Binding SelectedTheme,
                                         Mode=TwoWay,
                                         UpdateSourceTrigger=PropertyChanged}" />
        <ComboBox Grid.Column="2"
                  Width="94"
                  Margin="0,17,14,12.872"
                  HorizontalAlignment="Right"
                  IsEnabled="False"
                  ItemsSource="{Binding Files}" />
        <DataGrid Grid.Row="2"
                  Grid.Column="1"
                  Margin="8.88,6.876,7.8,62.862"
                  AutoGenerateColumns="True"
                  ItemsSource="{Binding Files}" />
        <DatePicker Grid.Row="2"
                    Height="23"
                    Margin="10,0,15,147"
                    VerticalAlignment="Bottom" />
        <GroupBox Grid.Row="2"
                  Grid.Column="2"
                  Margin="6.2,2.876,6,5.862"
                  Header="GroupBox">
            <ScrollViewer Margin="6,0.723,1,1" ScrollViewer.HorizontalScrollBarVisibility="Visible">
                <ListBox Width="161"
                         Height="108"
                         ItemsSource="{Binding Files}" />
            </ScrollViewer>
        </GroupBox>
        <ListView Grid.Row="2"
                  Grid.Column="1"
                  Height="59"
                  Margin="12.88,0,5.8,-4.138"
                  VerticalAlignment="Bottom"
                  ItemsSource="{Binding Files}">
            <ListView.View>
                <GridView>
                    <GridViewColumn Header="File Name">
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding Name}" />
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
                </GridView>
            </ListView.View>
        </ListView>
        <ProgressBar x:Name="progressBar"
                     Grid.Row="1"
                     Grid.Column="1"
                     Height="20"
                     Margin="5.88,6.128,61.8,0"
                     VerticalAlignment="Top"
                     Value="50" />
        <RadioButton Grid.Row="1"
                     Width="64"
                     Margin="11,25.128,0,29.124"
                     HorizontalAlignment="Left"
                     Content="RadioButton" />
        <RadioButton Grid.Row="1"
                     Width="51"
                     Margin="0,25.128,33.12,29.124"
                     HorizontalAlignment="Right"
                     Content="RadioButton"
                     IsEnabled="False" />
        <Slider Grid.Row="1"
                Grid.Column="1"
                Margin="11.88,34.128,38.8,15.124"
                AutoToolTipPlacement="BottomRight"
                Maximum="{Binding Maximum,
                                  ElementName=progressBar}"
                Minimum="{Binding Minimum,
                                  ElementName=progressBar}"
                Value="{Binding Value,
                                ElementName=progressBar}" />
        <TabControl Grid.Row="1"
                    Grid.Column="2"
                    Margin="7.2,9.128,9,0.124">
            <TabItem Header="TabItem">
                <Grid Background="#FFE5E5E5" />
            </TabItem>
            <TabItem Header="TabItem">
                <Grid Background="#FFE5E5E5" />
            </TabItem>
        </TabControl>
        <TreeView Grid.Row="3"
                  Margin="8,5.138,12.12,1.79"
                  ItemsSource="{Binding Files}" />
        <ToolBar Grid.Row="4"
                 Grid.ColumnSpan="2"
                 Margin="10,9.21,104.8,17">
            <Button />
            <CheckBox />
            <ComboBoxItem />
            <MenuItem />
            <Separator />
            <TabItem />
        </ToolBar>
    </Grid>
</Window> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:25:50.477

我像这样在我的应用程序启动时处理主题切换。

```
Application.Current.Resources.MergedDictionaries.Clear();
Application.Current.Resources.MergedDictionaries.Add(Themes.Where(p => p.Value.ThemeName == "MyTheme").SingleOrDefault().Value.Theme); 
```

我首先清除`Dictionaries`以删除任何预设`Theme`。我这样做是因为我在编辑器中使用默认主题，然后`run-time`根据用户配置在切换期间。

我重新启动应用程序以加载新主题，但是当您保存状态等时，您`ViewModel`应该能够重新加载，`UI`而无需完全重新启动应用程序。然而，这不是我的项目的要求，所以我从来没有走那么远。

您可能只是从 . 中传递您的主题名称`View`，然后使用您的`ViewModel`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:25:29.503

您的问题是您试图直接从您的 ViewModel 更改视图，这是不允许的。您需要提出一个基于属性绑定的更被动的解决方案。

我的方法是在主视图的代码隐藏中使用一小段代码来切换合并字典中的资源文件，并且它执行此操作的方式可以通过绑定到的 ViewModel 中的属性值来确定。MVVM 中允许使用少量代码隐藏来支持以视图为中心的行为。

# jquery - 响应式站点需要条件 jquery

> ID：11139112
> 
> 赞同：0
> 
> 时间：2012-06-21T13:20:19.190
> 
> 标签：jquery, conditional

新的但热衷于 jquery 的用户在这里，请温柔:)

我正在使用奇妙的[caroufredsel](http://caroufredsel.frebsite.nl/)（响应式 jquery carousel），并且最初设置了它，所以我对滚动功能很满意。

它正在显示吉他列表。目前只有 3 个，但我希望将来可以添加更多。

我正在构建一个响应式站点，在较小的屏幕尺寸上只有 2 个，然后一次可以看到 1 个吉他。问题是您从全角浏览器开始，当您调整到较小的屏幕时，jquery 不会重新触发以考虑到这一点。因此，您需要以较小的尺寸刷新屏幕以使滑块控件出现。

同样，如果您从小屏幕开始，当放大它时，即使它们在功能上无用，控件也会保留在屏幕上，因为所有项目都在显示。

因此，我只希望控件在必要时可见（即，如果轮播的所有内容一次都可见，则不可见），并让它们在不刷新的情况下响应当前屏幕尺寸进行调整。

我相信这可以通过破坏轮播并在调整屏幕大小时重新启动它来实现，但我无法让它工作。

该网站在以下地址在线：http: [//www.wirebirdguitars.com/staging/guitars.html](http://www.wirebirdguitars.com/staging/guitars.html)

任何帮助/建议将不胜感激。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:27:35.367

将此添加到您的 JS 中。

```
function doSomething() {

    $('#guitars-gallery').trigger('destroy');

    $("#guitars-gallery").carouFredSel({
    auto: false,
    circular: false,
    prev: '#prev',
    next: '#next',
    responsive : true,
    height : 'auto',
    items : { width : 400, visible : { min : 1, max : 3 } } });

};

var resizeTimer;

$(window).resize(function() {
    clearTimeout(resizeTimer);
    resizeTimer = setTimeout(doSomething, 100);
}); 
```

受到[这个问题](https://stackoverflow.com/questions/599288/cross-browser-window-resize-event-javascript-jquery)的启发。

# android - 如何使用 android 支持包

> ID：11139117
> 
> 赞同：2
> 
> 时间：2012-06-21T13:20:32.917
> 
> 标签：android

使用此页面[http://developer.android.com/sdk/compatibility-library.html](http://developer.android.com/sdk/compatibility-library.html)，我已经安装了 Android 支持包，在我的项目中添加了一个 libs 文件夹，将 JAR 文件移动到我的 libs 目录中，然后单击“添加到构建路径'但我仍然收到错误：

```
com.android.layoutlib.bridge.MockView cannot be cast to android.view.ViewGroup
Exception details are logged in Window > Show View > Error Log
The following classes could not be found:
- GridLayout (Fix Build Path, Edit XML) 
```

这是我的 XML 文件...

```
<?xml version="1.0" encoding="UTF-8"?>
<GridLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:columnCount="2"
    android:rowCount="13" >

    <TextView
        android:layout_gravity="fill_horizontal"
        android:text="SN : " />

    <TextView
        android:id="@+id/snTextView"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:layout_gravity="fill_horizontal"
        android:text="Ver : " />

    <TextView
        android:id="@+id/verTextView"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:layout_gravity="fill_horizontal"
        android:text="Type : " />

    <TextView
        android:id="@+id/typeTextView"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:layout_gravity="fill_horizontal"
        android:text="OD : " />

    <TextView
        android:id="@+id/odTextView"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:text="Closing Mode"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:id="@+id/closingModeTextView"
        android:layout_gravity="fill_horizontal" />

    <TextView
        android:text="CT : "
        android:layout_gravity="fill_horizontal" />

</GridLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:23:31.860

`GridLayout`仅在最新版本的兼容包中可用。除非您的设置为或更高，否则您将无法`GridLayout`用于您的项目。`minSdkVersion``7`

# php - 字母表中的颜色字母

> ID：11139121
> 
> 赞同：0
> 
> 时间：2012-06-21T13:20:43.850
> 
> 标签：php, if-statement

我下面的代码计算票号并根据它们的字母将它们存储到数组中。例如票以字母开头，X121211 将存储在 $X 中。如果数组不为空，则显示它们。我希望能够突出显示字母。例如，在颜色中突出显示以 x 开头的票，而在另一个中突出显示字母的其余部分。是否有动态的方法来做到这一点，因为这可能每周都会改变。我希望这是有道理的。

```
$returned = array();
$returned["A"] = array();
$returned["B"] = array();
$returned["C"] = array();
$returned["D"] = array();
$returned["E"] = array();
$returned["F"] = array();
$returned["G"] = array();
$returned["H"] = array();
$returned["I"] = array();
$returned["J"] = array();
$returned["K"] = array();
$returned["L"] = array();
$returned["M"] = array();
$returned["N"] = array();
$returned["O"] = array();
$returned["P"] = array();
$returned["Q"] = array();
$returned["R"] = array();
$returned["S"] = array();
$returned["T"] = array();
$returned["U"] = array();
$returned["V"] = array();
$returned["W"] = array();
$returned["X"] = array();
$returned["Y"] = array();
$returned["Z"] = array();

   foreach($skin as $x) {
   //    $content .= "<tr>
    //       <td>" . $x[0] . "</td>
    //        <td>" . $x[1] . "</td>
    //    </tr>";
       $bundletotal += $x[1];
    }
    $bundle += $bundletotal;

    foreach($skin as $x) {
     if (strpos($x[0], "A") !== FALSE) { 
        $returned["A"][] = $x;
    }
 if (strpos($x[0], "B") !== FALSE) { 
        $returned["B"][] = $x;
    }
     if (strpos($x[0], "C") !== FALSE) { 
        $returned["C"][] = $x;
    }
     if (strpos($x[0], "D") !== FALSE) { 
        $returned["D"][] = $x;
    }
     if (strpos($x[0], "E") !== FALSE) { 
        $returned["E"][] = $x;
    }
     if (strpos($x[0], "F") !== FALSE) { 
        $returned["F"][] = $x;
    }
     if (strpos($x[0], "G") !== FALSE) { 
        $returned["G"][] = $x;
    }
     if (strpos($x[0], "H") !== FALSE) { 
        $returned["H"][] = $x;
    }
     if (strpos($x[0], "I") !== FALSE) { 
        $returned["I"][] = $x;
    }
     if (strpos($x[0], "J") !== FALSE) { 
        $returned["J"][] = $x;
    }
     if (strpos($x[0], "K") !== FALSE) { 
        $returned["K"][] = $x;
    }
     if (strpos($x[0], "L") !== FALSE) { 
        $returned["L"][] = $x;
    }
     if (strpos($x[0], "M") !== FALSE) { 
        $returned["M"][] = $x;
    }
     if (strpos($x[0], "N") !== FALSE) { 
        $returned["N"][] = $x;
    }
     if (strpos($x[0], "O") !== FALSE) { 
        $returned["O"][] = $x;
    }
     if (strpos($x[0], "Q") !== FALSE) { 
        $returned["Q"][] = $x;
    }
     if (strpos($x[0], "R") !== FALSE) { 
        $returned["R"][] = $x;
    }
     if (strpos($x[0], "S") !== FALSE) { 
        $returned["S"][] = $x;
    }
     if (strpos($x[0], "T") !== FALSE) { 
        $returned["T"][] = $x;
    }
     if (strpos($x[0], "U") !== FALSE) { 
        $returned["U"][] = $x;
    }
     if (strpos($x[0], "V") !== FALSE) { 
        $returned["V"][] = $x;
    }
     if (strpos($x[0], "W") !== FALSE) { 
        $returned["W"][] = $x;
    }
     if (strpos($x[0], "X") !== FALSE) { 
        $returned["X"][] = $x;
    }
     if (strpos($x[0], "Y") !== FALSE) { 
        $returned["Y"][] = $x;
    }
     if (strpos($x[0], "Z") !== FALSE) { 
        $returned["Z"][] = $x;
    }

    }   

$A = count(array_unique($returned["A"], SORT_REGULAR));
$B = count(array_unique($returned["B"], SORT_REGULAR));
$C = count(array_unique($returned["C"], SORT_REGULAR));
$D = count(array_unique($returned["D"], SORT_REGULAR));
$E = count(array_unique($returned["E"], SORT_REGULAR));
$F = count(array_unique($returned["F"], SORT_REGULAR));
$G = count(array_unique($returned["G"], SORT_REGULAR));
$H = count(array_unique($returned["H"], SORT_REGULAR));
$I = count(array_unique($returned["I"], SORT_REGULAR));
$J = count(array_unique($returned["J"], SORT_REGULAR));
$K = count(array_unique($returned["K"], SORT_REGULAR));
$L = count(array_unique($returned["L"], SORT_REGULAR));
$M = count(array_unique($returned["M"], SORT_REGULAR));
$N = count(array_unique($returned["N"], SORT_REGULAR));
$O = count(array_unique($returned["O"], SORT_REGULAR));
$P = count(array_unique($returned["P"], SORT_REGULAR));
$Q = count(array_unique($returned["Q"], SORT_REGULAR));
$R = count(array_unique($returned["R"], SORT_REGULAR));  
$S = count(array_unique($returned["S"], SORT_REGULAR));
$T = count(array_unique($returned["T"], SORT_REGULAR));
$U = count(array_unique($returned["U"], SORT_REGULAR));
$V = count(array_unique($returned["V"], SORT_REGULAR));
$W = count(array_unique($returned["W"], SORT_REGULAR));
$X = count(array_unique($returned["X"], SORT_REGULAR));
$Y = count(array_unique($returned["Y"], SORT_REGULAR));
$Z = count(array_unique($returned["Z"], SORT_REGULAR));

     $content .= "
            <table border='5'>
             <td width='50%' valign='top'>
            <p><b>Monday</b></p> <p>";  

    $total = 0; 

     if ($A>0) { 
        $content .= " A: $A "; 
        $total+= $A;

    }

     if ($B>0) { 
        $content .= " B: $B "; 
        $total+= $B;
    }

     if ($C>0) { 
        $content .= " C: $C ";
        $total+= $C;

    }

     if ($D>0) { 
        $content .= " D: $D ";
        $total+= $D;

    }

     if ($E>0) { 
        $content .= " E: $E "; 
        $total+= $E;
    }

     if ($F>0) { 
        $content .= " F: $F "; 
        $total+= $F;

    }

     if ($G>0) { 
        $content .= " G: $G "; 
        $total+= $G;

    }

     if ($H>0) { 
        $content .= " H: $H "; 
        $total+= $H;

    }

     if ($I>0) { 
        $content .= " I: $I "; 
        $total+= $I;

    }

     if ($J>0) { 
        $content .= " J: $J "; 
        $total+= $J;

    }

     if ($K>0) { 
        $content .= " K: $K "; 
        $total+= $K;

    }

     if ($M>0) { 
        $content .= " M: $M "; 
        $total+= $M;

    }

     if ($N>0) { 
        $content .= " N: $N "; 
        $total+= $N;

    }

     if ($O>0) { 
        $content .= " O: $O "; 
        $total+= $O;

    }

     if ($P>0) { 
        $content .= " P: $P "; 
        $total+= $P;

    }

     if ($Q>0) { 
        $content .= " Q: $Q "; 
        $total+= $Q;

    }

     if ($R>0) { 
        $content .= " R: $R "; 
        $total+= $R;
    }

     if ($S>0) { 
        $content .= " S: $S "; 
        $total+= $S;

    }

     if ($T>0) { 
        $content .= " T: $T "; 
        $total+= $T;

    }

     if ($U>0) { 
        $content .= " U: $U "; 
        $total+= $U;

    }

     if ($V>0) { 
        $content .= " V: $V "; 
        $total+= $V;

    }

     if ($W>0) { 
        $content .= " W: $W "; 
        $total+= $W;

    }

     if ($X>0) { 
        $content .= " X: $X "; 
        $total+= $X;

    }

     if ($Y>0) { 
        $content .= " Y: $Y "; 
        $total+= $Y;

    }

     if ($Z>0) { 
        $content .= " Z: $Z "; 
        $total+= $Z;

    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:58:17.577

下面的代码将做与上面完全相同的事情：

```
$returned = Array();
foreach(array_unique($skin) as $x) {
    $returned[$x[0]] += 1;
}
$total = array_sum($returned);
$content = "";
foreach($returned as $k=>$v) {
    $content .= " ".$k.": ".$v." ";
} 
```

它比您的代码简单得多。

如果这不能满足您的要求，请准确说明您想要什么。

# c - 共享 libaray : 为什么在一个二进制文件中有多个版本的 GLIBC_

> ID：11139122
> 
> 赞同：1
> 
> 时间：2012-06-21T13:20:44.160
> 
> 标签：c, linux, gcc, linker

上下文：我目前正在调试一个问题，即在一台机器上生成的二进制文件（与 lpthread 一样）在另一台机器上尝试时会导致与 pthread 相关的错误。

libtest.so 是一个共享库，它似乎包含多个版本的 GLIBC_ 。这是预期的吗？它是怎么发生的？它是使用“-shared -lpthread -fPIC -soname=xxxx”选项链接的。

```
$objdump -T libtest.so | grep GLIBC_

... 
00000000      DF *UND*  0000008d  GLIBC_2.1   popen
...
00000000      DF *UND*  0000002c  GLIBC_2.0   syslog
00000000      DF *UND*  00000020  GLIBC_2.0   pthread_exit
00000000      DF *UND*  0000009f  GLIBC_2.0   __xstat
00000000      DF *UND*  000000bb  GLIBC_2.3.2 pthread_cond_signal
00000000      DF *UND*  000000c9  GLIBC_2.0   vsprintf
... 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:34:48.157

每个符号都有自己的历史。

当一个符号没有被修改（签名、行为）时，它保持默认版本，例如。GLIBC_2.0。修改的符号归属于当时库的当前版本，例如在 GLIBC_2.1 中修改了 popen() 行为，在 GLIBC_2.3.2 中修改了 pthread_cond_signal()。

您的程序与每个符号的最新版本链接。版本被记录下来，如果您针对较新的 GLIBC 运行程序，您的程序将不会使用较新的符号版本，而是在链接时可用的版本：这确保在运行时具有预期的行为：不足为奇。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:25:34.850

那是因为这些方法存在于不同的 .so 中。glibc 是 .so 的集合。我相信`pthread_exit`是在`libpthread.so`并且popen是在`libc.so`

# java - 输入2个变量（“缓冲阅读器”的用户输入）要传递给一个类？

> ID：11139127
> 
> 赞同：2
> 
> 时间：2012-06-21T13:20:55.927
> 
> 标签：java, class, bufferedreader

我是 Java 语言的初学者，我使用“文本键盘”。我的简单程序有问题。我的任务是输入 2 个值并完全显示“总和”、“差”、“积”和“商”。（简单吧？）其中，下面是应该做算术工作的类。正如我编译的那样，其中是“正确的”。

```
public class mathclass
{

    int x;
    int y;
    int total;

    void add ()
    {
        total = x+y;
    }

    void sub ()
    {
        total = x-y;
    }

    void multi ()
    {
        total = x*y;
    }

    void div ()
    {
        total = x/y;
    }

} 
```

这里是主程序，应该是程序的输入和输出。我的问题是我无法将 2 个变量（num1 和 num2）传递给“mathclass”，我研究了如何将 2 个变量传递给另一个类。但我没有什么相同的。我确实使用了一些变量，例如将“私有或公共”放在变量上。我的老师说要使用 BufferedReader 进行输入。我很难让这个程序正确。（对不起，如果我错了英语（如果我错了。））

```
import java.io.*;
public class mathmain
{

    static BufferedReader br = new BufferedReader(new InputStreamReader(System.in));

    public static void main(String[]args)throws IOException
    {

        mathclass math1 = new mathclass();

        System.out.print("Enter 1st Number :");
        num1 = Integer.parseInt(br.readLine());
        System.out.println(" ");

        System.out.print("Enter 2nd Number :");
        num2 = Integer.parseInt(br.readLine());
        System.out.println(" ");

        System.out.println(" ");
        System.out.println(" ");
        System.out.println(" ");

        math1.add();
        {
            System.out.print("Sum : ");
            System.out.println(math1.total);
        }
        System.out.println(" ");
        math1.sub();
        {
            System.out.print("Difference : ");
            System.out.println(math1.total);
        }
        System.out.println(" ");

        math1.multi();
        {
            System.out.print("Product : ");
            System.out.println(math1.total);
        }
        System.out.println(" ");
        math1.div();
        {
            System.out.print("Quotient : ");
            System.out.println(math1.total);
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:24:19.443

真的不清楚你想在这里做什么。（例如，为什么不`add`采用两个参数？）

也许你喜欢这样的事情：

```
// Set up arguments
math1.x = num1;
math1.y = num2;

// Perform the add.
math1.add();
// {                <-- brace completely useless.

// Print the result
System.out.print("Sum : ");
System.out.println(math1.total);
// }                <-- brace completely useless. 
```

但是，我鼓励您**使用返回值**并**使用参数**：

```
class MathClass {

    public int add(int a, int b) {
        return a + b;
    }

    ...
} 
```

然后使用类

```
int sum = math1.add(num1, num2);

System.out.println("Sum: " + sum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:26:48.183

你应该看看如何用 Java 编写代码，因为你走错了路。

您要么创建一个构造函数来初始化 x & y，要么将它们放在方法 add(x,y) 中，这将导致您将方法设为静态并从类中删除 x & y 的引用。应该作为函数返回的总数也是如此。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:33:40.627

试试这个，

**对 mathmain 类使用两个参数构造函数...**

```
public mathmain(int x, int y){

this.x = x;
this.y = y;

} 
```

请使用大写字母作为类名的第一个字母（例如：MathMain），

是的，使用 Camel Case 在 java 中编写类、变量、方法等名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:34:12.993

既然你是开始，我不会指出设计缺陷。您的问题来自您如何使用读取值。您将值读入 num1 和 num2，但从未在 mathclass 对象中设置它们：
`math1.x = num1;`
`math1.y = num2;`
根据 aioobe 所说，您应该查看 java 设计规则以帮助您创建健壮、有用的类。我还鼓励您**封装**您的类并尽可能使用**参数**和**返回值。**

祝您学习 java 好运，希望对您有所帮助！

# javascript - 如何获得最接近 SPAN 的值？

> ID：11139128
> 
> 赞同：1
> 
> 时间：2012-06-21T13:20:56.080
> 
> 标签：javascript, jquery, localization

我已经创建了一个注册表单，现在我正在尝试对字段进行空验证。所有字段都位于一个表内，例如：

```
<table border="0" cellspacing="5" width="100%">
        <tr>
            <td width="50%" valign="top">
                <span id="ctl00_PageBody_lblFname">Prénom</span>
                <strong><font color="#FF0000">*</font></strong><br />
                <input name="ctl00$PageBody$txtFname" type="text" id="ctl00_PageBody_txtFname" rel="First Name" />

                <br />

                <span id="ctl00_PageBody_lblLname">Nom</span>
                <strong><font color="#FF0000">*</font></strong><br />
                <input name="ctl00$PageBody$txtLname" type="text" id="ctl00_PageBody_txtLname" rel="Last Name" />
             </td>
         </tr>
</table> 
```

现在使用 jquery，我正在尝试创建一个通用函数，它遍历所有文本框，如果它们为空，它会显示一条消息，提及字段名称：

```
 var Msg = "Please provide values for :";
        var nullFieldTracked = 'false';

        $('input[type="text"], select').each(function () {
            if (this.value == '' && this.hasAttribute("rel")) {
                nullFieldTracked = 'true';
                Msg += '\n - ' + $(this).attr('rel');
            }
        });
        if (nullFieldTracked == 'true') {
            alert(Msg);
            return false;
        } 
```

代码就像魅力一样，我在文本框中添加了一个“rel”属性以读取字段名称，但是

现在需求发生了变化，我需要以多种语言启动这个网站，因此它将从资源文件中读取属性，并且 asp.net 不会为“rel”标签创建元资源，所以我在想从最近的跨度读取字段名称，但无法跟踪。

请帮助使用 Jquery。

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:23:11.937

从最近的跨度中检索值

```
$(this).prevAll("span").first().text() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:34:04.550

不确定是否可以在 .net 的文本字段中添加数据属性

如果是，您可以将跨度的 id 存储在`data`将具有的输入属性中。每个文本字段都应将跨度 id 保存在他的数据属性中，例如

```
 <input name="ctl00$PageBody$txtFname" type="text" id="ctl00_PageBody_txtFname" rel="First Name" data-error-span = '#span1'/> 
```

现在在你的 JS 中

```
$('input[type="text"], select').each(function () {
        if (this.value == '' && this.hasAttribute("rel")) {
            nullFieldTracked = 'true';
            Msg += '\n - ' + $($(this).data('error-span')).val();
        }
    }); 
```

另一种选择可能是将错误存储在数据属性中，然后 JS 将是

```
Msg += '\n - ' +  $(this).data('error-message'); 
```

这看起来也可读

真棒Rails :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-22T04:36:22.033

使用 .closest() 这会给出最近的选择器元素。

# php - 用php插入函数名

> ID：11139131
> 
> 赞同：0
> 
> 时间：2012-06-21T13:21:03.473
> 
> 标签：php

我正在尝试做一个简单的任务，在“onmouseover”下插入第二个函数名，但语法可能有问题。

```
echo '<div onmouseover="changeText(); <?php if($title==""){echo changeViz();}; ?> ">'; 
```

我可能需要转义一些引号并添加一些引号，但我无法找出正确的解决方案。谢谢

什么都没有。让我给你完整的代码......：

```
echo '<div class="frame" onmouseover="changeText(\''.$text[$i].'\'); <?php if($title[$i]==""){echo changeViz();}; ?>">'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:24:49.170

您嵌套`<?php ?>`在现有的 php 代码中，这是一个语法错误。相反，在 javascript 函数中连接`changeViz()`为带引号的字符串。

此版本使用[三元运算符](http://us3.php.net/manual/en/language.operators.comparison.php)来复制`if()`您原来的语句。

```
echo '<div onmouseover="changeText(); ' . ($title == '' ? 'changeViz();' : '') .  '">'; 
```

这里的三元运算将连接`changeViz();`到`echo`字符串 if `$title == ""`，否则只是连接到一个空字符串。

### 看到完整代码后更新：

您在第一部分中正确转义了引号。

```
echo '<div class="frame" onmouseover="changeText(\'' . $text[$i] . '\'); ' . ($title == '' ? 'changeViz();' : '') .  '">'; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:29:20.287

如果您不尝试在一行中完成所有操作，则可以使您的代码更具可读性：

```
$onmouseover_action = "changeText(); ";
if($title==""){
    $onmouseover_action .= "changeViz(); ";
}
echo '<div onmouseover="'.$onmouseover_action.'">'; 
```

它使您的代码更易于维护，并且您无需对其进行注释，因为它可以更好地描述自己。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-08-16T10:08:08.613

尝试这个：

```
echo '<div class="frame" onmouseover="changeText(\''.$text[$i].'\'); '. ($title[$i]=="")?'changeViz();':'').'">'; 
```

# objective-c - 拆分视图控制器主端的格式化按钮

> ID：11139132
> 
> 赞同：0
> 
> 时间：2012-06-21T13:21:03.490
> 
> 标签：objective-c, xcode, cocoa, storyboard, uisplitviewcontroller

我正在创建一个拆分视图控制器，似乎我无法更改主视图中按钮的颜色（默认情况下它们是白色的）。我宁愿不创建自己的自定义按钮，所以我想知道是否有办法以编程方式执行此操作？我们试图设置 UIColor 的背景，但它改变了按钮后面的背景颜色。这是它的样子：

![按钮](../Images/349ef8ffe84056dfe4e7e1172ec967f1.png)

# arm - STM32F103中的ADC可以采样到3Msps吗？

> ID：11139134
> 
> 赞同：2
> 
> 时间：2012-06-21T13:21:22.870
> 
> 标签：arm, microcontroller, cortex-m3, stm32, data-acquisition

我是 stm32 微控制器的新手。我在 STM32F103 数据表中读到它有 3 个 ADC 转换器，每个转换器能够执行高达 1Msps。是否可以利用这 3 个转换器对高达 3 Msps 的 1 个通道进行采样？我猜如果我按顺序开始每个转换器的转换，一个转换器与另一个转换器之间的时间差为 0.333us，这是可能的。所以我每 1us 持续时间从 3 个转换器获得 3 个转换结果。

可行吗？请指教。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-02T03:51:52.717

STM32F4 具有原生三交错模式，每个通道也可以工作在 2.4 MSPS。也不需要外部短接 3 个引脚，只需 ADC1-ADC3 设置为一个通道。所以速度可以是 7.2-8.4 MSPS（STM32F4Discovery 程序包中有一个例子）

# wix - wix - 网站的快捷方式图标

> ID：11139139
> 
> 赞同：7
> 
> 时间：2012-06-21T13:21:34.073
> 
> 标签：wix, shortcut, favicon

我是wix的新手。需要创建本地网站的快捷方式。

它工作正常并创建了快捷方式，但它没有在开始菜单和桌面上显示任何图标...该网站有 favicon 文件，当我打开该网站时，我可以完美地看到它 - 我只是在捷径。我试图用谷歌搜索，但没有找到 util:InternetShortcut 的好答案。

我的代码是：

```
<DirectoryRef Id="ApplicationProgramsFolder">
  <Component Id="ApplicationShortcutBBBApp" Guid="---">
    <util:InternetShortcut Id="ApplicationStartMenuShortcutBBBApp"
                    Name="BBB"
                    Target="http://localhost/BBB"/>
    <util:InternetShortcut Id="ApplicationDesktopShortcutBBBApp"
                    Name="BBB"
                    Directory="DesktopFolder"
                    Target="http://localhost/BBB"/>
    <RegistryValue Root="HKCU" Key="Software\Microsoft\BBB" Name="installed" Type="integer" Value="1" KeyPath="yes"/>
  </Component>
</DirectoryRef> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2015-05-22T07:26:44.347

这个问题有一个更简单的解决方案。您可以使用普通快捷方式并使用技巧将目标设置为 url，而不是使用 InternetShortcut。

```
<SetProperty Id="URL" Value="http://yourpage.com" Sequence="execute"  Before="CreateShortcuts" />

<Shortcut Directory="DesktopFolder" Id="WebShortcut" Name="Your Page" Description="Your Page Description" Target="[URL]" Icon="IconDesktop">
    <Icon Id="IconDesktop" SourceFile="images\icon.ico" />
</Shortcut> 
```

“SetProperty”可以放置在您的产品标签中的某个位置。应放置“快捷方式”而不是“InternetShortcut”。将属性 [URL] 作为目标很重要。作为一个属性，它可以是一个 url。直接写的不行。热/蜡烛/光中可能有警告，可以忽略。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T17:42:54.847

InternetShortcut 不支持像普通快捷方式那样指定图标。有一个[开放的功能请求](https://sourceforge.net/tracker/?func=detail&aid=3299406&group_id=105970&atid=642717)。从技术上讲，Windows 中的 IUniformResourceLocator 快捷方式不支持图标，但 IShellLink 快捷方式支持。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-16T15:31:58.853

回答这个问题有点晚了，但只需要做同样的事情。我采用的方法是使用 iniFile 元素写出一个 url 文件。

这种方法有两个兴趣点：

1.  由于快捷方式位于桌面上，而图标文件位于文件系统的其他位置，因此我需要创建单独的组件来部署图标文件。
2.  如果 MSI 在 UAC 开启的情况下以普通用户身份运行，则不会为快捷方式设置图标。在安装之前禁用 UAC 后，图标设置正确。

    ```
    <Fragment>
    <DirectoryRef Id="DesktopFolder">
        <Component Id="ProductInternetShortcut" Guid="{YOUR_GUID_HERE}" >
            <IniFile Id="url_name"
                Action="addLine"
                Directory="DesktopFolder"
                Section="InternetShortcut"
                Name="ProductInternetShortcut.url"
                Key="URL"
                Value="https://my.url.com/" />

            <IniFile Id="url_target"
                Action="addLine"
                Directory="DesktopFolder"
                Section="InternetShortcut"
                Name="ProductInternetShortcut.url"
                Key="Target"
                Value="https://my.url.com/" />

            <IniFile Id="url_idlist"
                Action="createLine"
                Directory="DesktopFolder"
                Section="InternetShortcut"
                Name="ProductInternetShortcut.url"
                Key="IDList"
                Value=" " />

            <IniFile Id="url_HotKey"
                Action="addLine"
                Directory="DesktopFolder"
                Section="InternetShortcut"
                Name="ProductInternetShortcut.url"
                Key="HotKey"
                Value="0" />

            <IniFile Id="url_icon"
                Action="addLine"
                Directory="DesktopFolder"
                Section="InternetShortcut"
                Name="ProductInternetShortcut.url"
                Key="IconFile"
                Value="PATH_TO_ICON_FILE_ON_WORKSTATION" />

            <IniFile Id="url_iconIndex"
                Action="addLine"
                Directory="DesktopFolder"
                Section="InternetShortcut"
                Name="ProductInternetShortcut.url"
                Key="IconIndex"
                Value="0" />

            <RegistryValue Root="HKCU" Key="Software\COMPANY\PRODUCT" Name="installed" Type="integer" Value="1" KeyPath="yes" />
        </Component>
    </DirectoryRef>
    <DirectoryRef Id="ProductFolder">
        <Component Id="ShortcutIcons" Guid="{YOUR_GUID_HERE}">
            <File Id="filProductIcons" KeyPath="yes" Source="PATH_TO_ICON_FILE_ON_DEVELOPER_MACHINE" />
        </Component>
    </DirectoryRef>
    </Fragment> 
    ```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-03-10T16:22:12.087

[在 Wix 中，您可以通过InternetShortcut Element (Util Extension)](https://wixtoolset.org/documentation/manual/v3/xsd/util/internetshortcut.html)创建带有图标的InternetShortcut 。

下面是一个来自我正在开发的应用程序的示例，该应用程序通过元素添加到带有图标的网站的链接`<InternetShorcut>`，并将该链接放置在桌面和开始菜单上。

请注意，您可能必须将“util”前缀放在元素名称前面，尽管我不必这样做：`<util:InternetShortcut>`.

```
<Directory Id="ProgramMenuFolder" Name="ProgramMenuFolder">
    <Directory Id="ProgramMenuFolder.MyApplicationName" Name="MyApplicationName">
        <Component Id="Component.Uninstall" Guid="215c7bec-7967-43e6-8f01-72c27fbb2a98">
            <CreateFolder/>
            <RemoveFolder Id="ProgramMenuFolder.MyApplicationName" On="uninstall"/>
            <RegistryKey Root="HKCU" Key="Software\MyCompany\MyApplicationName">
                <RegistryValue Value="0" Type="string" KeyPath="yes"/>
            </RegistryKey>
        </Component>
        <Component Id="InternetShortcut" Guid="215c7bec-7967-43e6-8f01-72c22e505f09">
            <InternetShortcut 
                IconFile="[INSTALLDIR]\icon.ico" 
                IconIndex="0" 
                Name="Admin Page" 
                Id="InternetShortcut" 
                Target="http://localhost:4444" 
                Type="link" 
                xmlns="http://schemas.microsoft.com/wix/UtilExtension"/>
            <CreateFolder/>
            <RegistryKey Root="HKCU" Key="Software\MyCompany\MyApplicationName">
                <RegistryValue Value="0" Type="string" KeyPath="yes"/>
            </RegistryKey>
        </Component>
    </Directory>
</Directory>
<Directory Id="DesktopFolder" Name="DesktopFolder">
    <Component Id="InternetShortcut.1" Guid="B27DF351-6EDA-4BEF-A3AC-F12313260203">
        <InternetShortcut
            IconFile="[INSTALLDIR]\icon.ico" 
            IconIndex="0" 
            Name="Admin Page" 
            Id="InternetShortcut.1" 
            Target="http://localhost:4444" 
            Type="link" 
            xmlns="http://schemas.microsoft.com/wix/UtilExtension"/>
        <CreateFolder/>
        <RegistryKey Root="HKCU" Key="Software\MyCompany\MyApplicationName">
            <RegistryValue Value="0" Type="string" KeyPath="yes"/>
        </RegistryKey>
    </Component>
</Directory>
<Feature Id="Complete" Title="Complete" Absent="allow" Level="1">
    <ComponentRef Id="InternetShortcut"/>
    <ComponentRef Id="InternetShortcut.1"/>
</Feature> 
```

另请参阅[如何：创建网页的快捷方式](https://wixtoolset.org/documentation/manual/v3/howtos/files_and_registry/create_internet_shortcut.html)

# mono - Mono.CSharp：评估数学表达式

> ID：11139141
> 
> 赞同：2
> 
> 时间：2012-06-21T13:21:48.583
> 
> 标签：mono

我正在尝试 Mono.CSharp 的评估器。为什么这个简单的脚本有效：

`int i=2,j=3; (i*j);`

而这给出了一个错误：

`int i=2,j=3; i*j;`

说“（1,2）：错误CS0246：找不到类型或命名空间名称'i'。您是否缺少使用指令或程序集引用？”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:52:21.547

Mono.CSharp 求值器遵循 C# 标准语法规则。在您的第二个示例中，您实际上是根据 C# 语法声明局部变量。

可以将其重写为更易于人类解析

```
int i = 2, j = 3;
i* j; 
```

编译器将第二行解析为另一个变量声明，并在将指针“*”应用于它之前尝试将“i”解析为一种类型。

# riak - 脚本：/riak-1.1.2/rel/riak/erts-5.8.5/bin/nodetool

> ID：11139149
> 
> 赞同：1
> 
> 时间：2012-06-21T13:22:29.090
> 
> 标签：riak

尝试运行 riak 命令时，我不断收到此错误。

该目录中不存在 nodetool 文件。当我从 5.8.4 复制 nodetool 文件时，我开始收到此错误：

{"init 终止于 do_boot",{'cannot get bootfile','start_clean.boot'}}

**编辑**

我在这里遵循了这个很好的建议：http: [//onerlang.blogspot.co.uk/2009/10/fighting-with-riak.html](http://onerlang.blogspot.co.uk/2009/10/fighting-with-riak.html)。现在，当我运行 riak start 时，我得到：崩溃转储被写入：erl_crash.dump init terminating in do_boot ()

崩溃转储被写入：erl_crash.dump init terminating in do_boot () Error reading /abc/def/otp_src_R14B03/riak-1.1.2/dev/dev1/etc/app.config {"init terminating in do_boot",{'cannot获取引导文件','start_clean.boot'}}

**编辑 2** 我似乎遇到了这个问题[http://lists.basho.com/pipermail/riak-users_lists.basho.com/2011-November/006436.html](http://lists.basho.com/pipermail/riak-users_lists.basho.com/2011-November/006436.html)。

每当我从源代码构建（同一台机器上的多个节点需要）时，riak 都会尝试使用 erts-5.8.5，而 riak 需要（？） erts-5.8.4。

我是否可以告诉不要使用 5.8.5 并使用 5.8.4 可能吗？

# silverlight-4.0 - Prism4：从 xaml CreateFromXaml 创建目录无法编译

> ID：11139166
> 
> 赞同：1
> 
> 时间：2012-06-21T13:23:19.077
> 
> 标签：silverlight-4.0, unity-container, prism-4

我正在使用 Silverlight 4 和 Prism 4 进行开发。

我也使用 Unity 作为我的注入容器。

我正在尝试从 xaml 创建模块目录，但我收到此错误“ **IModuleCatalog 不包含 CreateFromXaml** ... 的定义”。

我的代码片段是：

```
using System.Windows.Input;
using System.Windows.Media;
using System.Windows.Media.Animation;
using System.Windows.Shapes;
using Microsoft.Practices.Prism.UnityExtensions;
using Microsoft.Practices.ServiceLocation;
using Microsoft.Practices.Prism.Modularity;
using Microsoft.Practices.Prism.MefExtensions;

namespace MyModularityProject {
    public class MyBootStrapper : UnityBootstrapper {
        protected override DependencyObject CreateShell() {
            return ServiceLocator.Current.GetInstance<Shell>();
        }

        protected override void InitializeShell() {
            base.InitializeShell();
            Application.Current.RootVisual = (UIElement)Shell;
        }

        protected override IModuleCatalog CreateModuleCatalog() {
            // This is the isntruction that doesn't compile
            return ModuleCatalog.CreateFromXaml(new 
                Uri("/MyProject.Silverlight;component/ModulesCatalog.xaml",
                    UriKind.Relative));
        }
    }
} 
```

我在这里能错过什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-06T16:20:36.990

需要将完整路径添加到 ModuleCatalog 类型的原因是 UnityBootstrapper 继承的 Bootstrapper 基类中有一个 ModuleCatalog 属性。如果您不限定名称，则实际上是在返回 IModuleCatalog 的属性上调用访问器。接口定义不包含该函数。

# bash - 如何根据列过滤管道数据？

> ID：11139172
> 
> 赞同：1
> 
> 时间：2012-06-21T13:23:35.040
> 
> 标签：bash, unix, grep, pipeline

我写了以下管道：

```
for i in `ls c*.txt | sort -V`; do echo $i; grep -v '#' ${i%???}_c_new.txt | grep -v 'seq-name' | cut -f 6 | grep -o '[0-9]*' | awk '{s+=$1} END {print s}'; done 
```

现在，我想只取那些与第 13 列中的某些 grep 匹配的行的第 6 列（cut -f 6 和更高版本的代码）。

这些：

```
cut -f 13 | grep -o '^A$' 
```

因此，我查看第 13 列，如果 grep 匹配，则使用这一行并编写其余代码 - 计算第 6 列中数字的总和。

请问，我怎么能做这样的事情？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:30:12.767

制作一个 grep 命令，它将采用未切割的行并按第 13 个字段过滤，例如

```
 grep -E '(\S+\s+){12}A\s' 
```

然后通过管道将其传递给`cut -f 6`等等。

# xml - 如何在 XML 数据中选择特定的标记值

> ID：11139176
> 
> 赞同：0
> 
> 时间：2012-06-21T13:23:43.977
> 
> 标签：xml, c#-4.0

在我的应用程序中，我需要使用提供的 xml 文件在我的本地计算机上创建一个文件夹结构，如 "* *C:\Laptop1\folder\" 、 "C:\Laptop2\folder* "。*现在 XML 文件具有我所追求的文件名。

我的xml代码：

```
<?xml version="1.0" encoding="utf-8" ?>
<Proj>
<MachineIP>
<Machine>
<Name>Laptop 1</Name>
<Path>C:\ZipFiles\Laptop1\folder\</Path>
</Machine>
<Machine>
<Name>Laptop 2</Name>
<Path>C:\ZipFiles\Laptop2\folder\</Path>
</Machine>
<Machine>
<Name>Laptop 3</Name>
<Path>C:\ZipFiles\Laptop2\folder\</Path>
</Machine>
<Machine>
<Name>Laptop 4</Name>
<Path>C:\ZipFiles\Laptop2\folder\</Path>
</Machine>
<Machine>
<Name>Laptop 5</Name>
<Path>C:\ZipFiles\Laptop2\folder\</Path>
</Machine>
<Machine>
<Name>Laptop 6</Name>
<Path>C:\ZipFiles\Laptop2\folder\</Path>
</Machine>
</MachineIP>
</Proj> 
```

我感兴趣的只是知道如何获取机器/**名称**/到目前为止我不知道如何选择特定标签。任何人都知道如何选择机器标签中的每个名称。我有一个 300mb 的文件要过滤掉。

我的方法是获取 Machine 标签中的每个 Name 并将其存储在一个字符串中，然后使用该字符串创建结构。但是我卡住了请帮助...

到目前为止我的源代码：

```
//doc created
XmlDocument doc = new XmlDocument();

//loading file:
filePath = System.IO.Directory.GetCurrentDirectory();
filePath = System.IO.Path.Combine(filePath + "\\", "MyConfig.xml");
try
{
     doc.Load(filePath);
}
catch (Exception ex)
{
    MessageBox.Show("Config File Missing: " + ex.Message, "Config File Error",
    MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
    Application.Exit();
}

//fetch data:
String[] MachineName = XMLData("PROJ/MachineIP/Machine", "Name");
String[] MachinePath = XMLData("PROJ/MachineIP/Machine", "Path");

//function XMLData():

string[] temp;
XmlNodeList nodeList = doc.SelectNodes(MainNode);
int i = 0;
temp = new string[nodeList.Count];
foreach (XmlNode node in nodeList)
{
     temp.SetValue(node.SelectSingleNode(SubNode).InnerText, i);
     i++;
}
return temp; 
```

谢谢， HRG

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:27:59.357

如果你有足够的内存一次性加载整个文件，我会使用 LINQ to XML：

```
var document = XDocument.Load("file.xml");
var names = document.Root
                    .Element("MachineIP")
                    .Elements("Machine")
                    .Elements("Name")
                    .Select(x => (string) x)
                    .ToList(); 
```

如果您*没有*足够的内存，则需要使用`XmlReader`流式传输输入 - 尽管您可以`XElement`从每个`Machine`元素创建一个来处理它。（网上有很多关于如何做到这一点的页面，包括[这个](http://msdn.microsoft.com/en-us/library/bb387035.aspx)。代码不是我要写的，但总体思路就在那里。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T09:09:37.030

我能够将它们读入 2 个数组......这是我下面的代码......

```
//doc created
XmlDocument doc = new XmlDocument();
//loading file:
filePath = System.IO.Directory.GetCurrentDirectory();
filePath = System.IO.Path.Combine(filePath + "\\", "MyConfig.xml");
try
{
     doc.Load(filePath);
}
catch (Exception ex)
{
    MessageBox.Show("Config File Missing: " + ex.Message, "Config File Error",
    MessageBoxButtons.OK, MessageBoxIcon.Exclamation);
    Application.Exit();
}

//fetch data:
String[] MachineName = XMLData("PROJ/MachineIP/Machine", "Name");
String[] MachinePath = XMLData("PROJ/MachineIP/Machine", "Path"); 
```

# c - 涉及 fork() 的 C 程序的输出解释

> ID：11139178
> 
> 赞同：4
> 
> 时间：2012-06-21T13:23:47.353
> 
> 标签：c, fork

运行这个程序正在打印“forked!” 7次。有人可以解释如何“分叉”！正在打印 7 次？

```
#include<stdio.h>
#include<unistd.h>

int main(){

  fork() && fork() || fork() && fork();

  printf("forked!\n");

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:42:37.880

这里使用了几个概念，第一个是知道`fork`在某些情况下会做什么以及它会返回什么。很快，当它被调用时，它会创建调用者的重复进程，并在子进程中返回`0`（对于逻辑表达式），对于父进程返回`false`非零值（对于逻辑表达式）。`true`实际上，如果发生错误，它可能会返回一个负（非零）值，但这里我们假设它总是成功。

第二个概念是逻辑表达式的短路计算，例如`&&`and `||`，具体来说，`0 && fork()`不会调用，*因为*`fork()`如果第一个操作数是`false`（零），则不需要计算第二个操作数。同样，`1 || fork()`也不会调用`fork()`。

另请注意，在子进程中，表达式的计算在与父进程相同的点继续进行。

另外，请注意，由于优先级，表达式按以下顺序计算：

```
(fork() && fork()) || (fork() && fork()) 
```

这些观察结果应该会引导您找到正确的答案。

考虑简化的例子`fork() && fork()`

```
 fork()        
  /     \
false   true && fork()
                /   \
             false  true 
```

所以这里我们创建了三个进程，其中两个`false`作为结果返回，一个返回`true`。然后因为`||`我们让所有进程返回`false`尝试再次运行相同的语句，所以我们有`2 * 3 + 1 = 7`答案。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T13:39:38.270

与我在评论中所说的不同，这与缓冲无关。进程分叉。父母执行第二次分叉，而孩子短路第二次并执行第三次。第一个孙子将第一个评估`&&`为假并执行第三个分叉。这会产生 2 个进程，其中一个会评估第 4 个分叉。同时（或之前，或之后......有一个竞争条件！），另一个孩子在评估`||`. 总共有 7 个进程最终运行。画一棵树。

为了简化计算，请考虑：

```
int f( void )
{
  int k; 
  k = fork();
  printf( "%d\n", (int) getpid());
  fflush( stdout );
  return k;
}

int main( void ) { f() && f() || f() && f(); return 0; } 
```

# linux-kernel - 驱动程序 - copy_to/from_user() 中的“原子调度”，但不持有任何锁

> ID：11139181
> 
> 赞同：1
> 
> 时间：2012-06-21T13:23:57.250
> 
> 标签：linux-kernel

快速背景：我正在为我们的硬件压缩引擎开发驱动程序。一个驱动程序处理 PCI 交互，每秒处理数千个 32K 数据包。那个司机工作很踏实。现在我正在开发一个字符驱动程序，这看起来很不错，我的测试应用程序正在运行数百个线程而没有问题 - 有一段时间了。然后在 30 分钟或几个小时后，我在 read() 或 write() 中得到了这个“原子调度”BUG - 在 copy_to_user() 或 copy_from_user() 中。如果我持有任何自旋锁，我会知道如何解决这个问题。但我不是。我也不是在中断上下文中。这是来自操作系统的标准 read() 或 write() 路径。

我什至在调用 copy_*_user() 之前检查了 preempt_count()，它每次都显示为零，但是 BUG 说 preempt_count() 在到达 copy_user_generic_string() 时为 0x00000102 或 0x00000100。我知道 0x100 是软中断计数 << 8。但我不确定这是怎么发生的。

我非常仔细地检查了 PCI 驱动程序中的中断和 tasklet 代码。tasklet 确实使用了自旋锁，但代码路径在锁定和解锁之间没有分支点。正如我所说，PCI 驱动程序已经稳定工作了几个月，为我们开发的另一个内核模块提供压缩服务。

这发生在 3.2 内核下的两台不同的机器上：

Linux driver2 3.2.0-23-generic #36-Ubuntu SMP Tue Apr 10 20:39:51 UTC 2012 x86_64 x86_64 x86_64 GNU/Linux

和一个启用了许多调试功能的内核：

Linux drvdev1 3.2.14-altiordbg #1 SMP Fri Apr 27 16:53:48 EDT 2012 x86_64 x86_64 x86_64 GNU/Linux

我打算在 2.6.3 的机器上尝试这个？今天的内核。

这是错误转储。'flex' 是我的多线程测试应用程序。

```
Jun 20 17:18:21 drvdev1 kernel: [  617.223048] BUG: scheduling while atomic: flex/11476/0x00000102
Jun 20 17:18:21 drvdev1 kernel: [  617.223144] no locks held by flex/11476.
Jun 20 17:18:21 drvdev1 kernel: [  617.223147] Modules linked in: altra_gzip(O) altra_pci(O) altraflex(O) snd_hda_codec_hdmi ppdev sp5100_tco psmouse serio_raw k10temp edac_core edac_mce_amd snd_hda_codec_via i2c_piix4 joydev snd_hda_intel radeon snd_hda_codec snd_hwdep snd_pcm ttm drm_kms_helper drm snd_timer snd soundcore i2c_algo_bit snd_page_alloc shpchp parport_pc asus_atk0110 mac_hid wmi lp parport firewire_ohci firewire_core crc_itu_t pata_atiixp r8169 hid_ezkey usbhid hid
Jun 20 17:18:21 drvdev1 kernel: [  617.223200] CPU 0 
Jun 20 17:18:21 drvdev1 kernel: [  617.223202] Modules linked in: altra_gzip(O) altra_pci(O) altraflex(O) snd_hda_codec_hdmi ppdev sp5100_tco psmouse serio_raw k10temp edac_core edac_mce_amd snd_hda_codec_via i2c_piix4 joydev snd_hda_intel radeon snd_hda_codec snd_hwdep snd_pcm ttm drm_kms_helper drm snd_timer snd soundcore i2c_algo_bit snd_page_alloc shpchp parport_pc asus_atk0110 mac_hid wmi lp parport firewire_ohci firewire_core crc_itu_t pata_atiixp r8169 hid_ezkey usbhid hid
Jun 20 17:18:21 drvdev1 kernel: [  617.223243] 
Jun 20 17:18:21 drvdev1 kernel: [  617.223247] Pid: 11476, comm: flex Tainted: G           O 3.2.14-altiordbg #1 System manufacturer System Product Name/M4A785TD-V EVO
Jun 20 17:18:21 drvdev1 kernel: [  617.223256] RIP: 0010:[<ffffffff813397bd>]  [<ffffffff813397bd>] copy_user_generic_string+0x2d/0x40
Jun 20 17:18:21 drvdev1 kernel: [  617.223269] RSP: 0018:ffff8801d1ecde20  EFLAGS: 00000246
Jun 20 17:18:21 drvdev1 kernel: [  617.223272] RAX: ffff8801d1ecc000 RBX: 0000000000000246 RCX: 0000000000000fa9
Jun 20 17:18:21 drvdev1 kernel: [  617.223275] RDX: 0000000000000000 RSI: 00007ffa86fd12c8 RDI: ffff8801e7f802b8
Jun 20 17:18:21 drvdev1 kernel: [  617.223280] RBP: ffff8801d1ecde88 R08: 0000000000000001 R09: 0000000000000000
Jun 20 17:18:21 drvdev1 kernel: [  617.223283] R10: 0000000000000000 R11: 0000000000000001 R12: 0000000000000000
Jun 20 17:18:21 drvdev1 kernel: [  617.223287] R13: 0000000000000246 R14: ffff8801da980000 R15: ffffffff8114b01c
Jun 20 17:18:21 drvdev1 kernel: [  617.223290] FS:  00007ffa7a797700(0000) GS:ffff880216e00000(0000) knlGS:0000000000000000
Jun 20 17:18:21 drvdev1 kernel: [  617.223297] CS:  0010 DS: 0000 ES: 0000 CR0: 0000000080050033
Jun 20 17:18:21 drvdev1 kernel: [  617.223300] CR2: 0000000000aea000 CR3: 00000001d1da7000 CR4: 00000000000006f0
Jun 20 17:18:21 drvdev1 kernel: [  617.223305] DR0: 0000000000000000 DR1: 0000000000000000 DR2: 0000000000000000
Jun 20 17:18:21 drvdev1 kernel: [  617.223310] DR3: 0000000000000000 DR6: 00000000ffff0ff0 DR7: 0000000000000400
Jun 20 17:18:21 drvdev1 kernel: [  617.223314] Process flex (pid: 11476, threadinfo ffff8801d1ecc000, task ffff8801da980000)
Jun 20 17:18:21 drvdev1 kernel: [  617.223318] Stack:
Jun 20 17:18:21 drvdev1 kernel: [  617.223348]  ffffffffa02bace8 ffff8801d1ecde48 ffffffff81096da8 ffff8801d1ecde48
Jun 20 17:18:21 drvdev1 kernel: [  617.223355]  ffffffff810a424d ffff8801e7f80000 00007ffa86fd1010 ffffffff81c2bc80
Jun 20 17:18:21 drvdev1 kernel: [  617.223362]  ffff8801dae60000 000000000000ffff ffff8801dae600f0 ffff8801d3a17c80
Jun 20 17:18:21 drvdev1 kernel: [  617.223368] Call Trace:
Jun 20 17:18:21 drvdev1 kernel: [  617.223407]  [<ffffffffa02bace8>] ? accumulate_from+0x98/0x1f0 [altra_gzip]
Jun 20 17:18:21 drvdev1 kernel: [  617.223414]  [<ffffffff81096da8>] ? sched_clock_cpu+0xa8/0x110
Jun 20 17:18:21 drvdev1 kernel: [  617.223420]  [<ffffffff810a424d>] ? trace_hardirqs_off+0xd/0x10
Jun 20 17:18:21 drvdev1 kernel: [  617.223425]  [<ffffffffa02bbec1>] _write+0xf1/0x3e0 [altra_gzip]
Jun 20 17:18:21 drvdev1 kernel: [  617.223432]  [<ffffffff812bb95c>] ? security_file_permission+0x2c/0xb0
Jun 20 17:18:21 drvdev1 kernel: [  617.223437]  [<ffffffff8118c006>] vfs_write+0xb6/0x180
Jun 20 17:18:21 drvdev1 kernel: [  617.223441]  [<ffffffff8118c32d>] sys_write+0x4d/0x90
Jun 20 17:18:21 drvdev1 kernel: [  617.223448]  [<ffffffff8168b482>] system_call_fastpath+0x16/0x1b
Jun 20 17:18:21 drvdev1 kernel: [  617.223452] Code: 74 30 83 fa 08 72 27 89 f9 83 e1 07 74 15 83 e9 08 f7 d9 29 ca 8a 06 88 07 48 ff c6 48 ff c7 ff c9 75 f2 89 d1 c1 e9 03 83 e2 07 <f3> 48 a5 89 d1 f3 a4 31 c0 c3 66 0f 1f 84 00 00 00 00 00 21 d2 
Jun 20 17:18:21 drvdev1 kernel: [  617.223979] Call Trace:
Jun 20 17:18:21 drvdev1 kernel: [  617.223983]  [<ffffffffa02bace8>] ? accumulate_from+0x98/0x1f0 [altra_gzip]
Jun 20 17:18:21 drvdev1 kernel: [  617.223989]  [<ffffffff81096da8>] ? sched_clock_cpu+0xa8/0x110
Jun 20 17:18:21 drvdev1 kernel: [  617.223994]  [<ffffffff810a424d>] ? trace_hardirqs_off+0xd/0x10
Jun 20 17:18:21 drvdev1 kernel: [  617.223999]  [<ffffffffa02bbec1>] _write+0xf1/0x3e0 [altra_gzip]
Jun 20 17:18:21 drvdev1 kernel: [  617.224043]  [<ffffffff812bb95c>] ? security_file_permission+0x2c/0xb0
Jun 20 17:18:21 drvdev1 kernel: [  617.224051]  [<ffffffff8118c006>] vfs_write+0xb6/0x180
Jun 20 17:18:21 drvdev1 kernel: [  617.224058]  [<ffffffff8118c32d>] sys_write+0x4d/0x90
Jun 20 17:18:21 drvdev1 kernel: [  617.224065]  [<ffffffff8168b482>] system_call_fastpath+0x16/0x1b 
```

# php - 在 Codeigniter 中隐藏默认控制器名称

> ID：11139182
> 
> 赞同：0
> 
> 时间：2012-06-21T13:24:00.987
> 
> 标签：php, codeigniter, routing

当我的网站第一次打开时，它直接进入这个地址：[http ://www.website.com/tr/main](http://www.website.com/tr/main)

但我希望我的链接是这样的：[http](http://www.website.com/) ://www.website.com/ 我无法删除“tr/main”链接。我怎么解决这个问题？

**php代码：**

```
$route['default_controller'] = "main";
$route['404_override'] = '';
$route['(tr|en)/(.+)$'] = '$2';
$route['(tr|en)$'] = $route['default_controller']; 
```

**访问代码：**

```
RewriteEngine On

# Put your installation directory here:
# If your URL is www.example.com/, use /
# If your URL is www.example.com/site_folder/, use /site_folder/

RewriteBase /

# Do not enable rewriting for files or directories that exist
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# For reuests that are not actual files or directories,
# Rewrite to index.php/URL
RewriteRule ^(.*)$ index.php/$1 [PT,L] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:34:29.230

在您的 routes.php 文件中编写以下代码：-

```
$route['default_controller'] = "main";
$route['404_override'] = ''; 
```

然后在你的“主”控制器中，即在 main.php 中使用

```
function index() 
{
    // write all your code inside this function    
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:17:56.680

在你的 config.php 文件中写下这段代码：-

```
$config['base_url']='http://Your Path/';
$config['index_page'] = '';
$config['uri_protocol'] = 'AUTO';
$config['subclass_prefix'] = 'Base'; 
```

在你的 routes.php 文件中写下这段代码：-

```
$route['default_controller'] = "home";
$route['404_override'] = ''; 
```

# java - ApplicationContext 始终为空

> ID：11139184
> 
> 赞同：4
> 
> 时间：2012-06-21T13:24:14.107
> 
> 标签：java, unit-testing, servlets, spring-3, applicationcontext

我正在开发一个 Spring 3 Web 服务应用程序，我正在尝试从我的 servlett.xml 文件中加载 ApplicationContext 以用于一个简单的测试用例，但它不起作用。

ApplicationContext 始终为空。

这是我的测试代码：

```
@RunWith(SpringJUnit4ClassRunner.class)
    @ContextConfiguration(locations = { "file:war/WEB-INF/FreedomSpring-servlett.xml" })
    public class UserControllerTest {

        private UserController controller;

        @Inject
        private ApplicationContext applicationContext;

        private String jsonUser = "{ \"username\":\"jonneymendoza\",\"emailAddress\":\"jon@google.com\", \"password\":\"12345678\",\"firstName\":\"jono\", \"surname\":\"richy\", \"country\":\"united kingdom\",\"bio\":\"Bio stuff goes here about the user. where he comes from etc etc. all is well. lets go go go\" }";

        @Before
        public void setup() {
            controller = new UserController();

            assertNotNull(applicationContext);

        }

        @Test
        public void testLogin() {
            fail("Not yet implemented");
        }

        @Test
        public void testCreateNewAccount() {

            ResponseEntity<String> response = controller
                    .createNewAccount(new HttpEntity<String>(jsonUser));
            assertEquals(HttpStatus.CREATED, response.getStatusCode());

        }

        @Test
        public void testGetUserProfile() {
            fail("Not yet implemented");
        }

    } 
```

由于 applicationContext 为空，因此设置失败。我想基本上在这个测试用例上加载我的 bean 并在这里使用它们，但是在我的控制器类中自动装配 UserService 类对象，如下所示。

```
@Controller
public class UserController {
    @Autowired
    private UserService userService; 
```

定义我的服务 bean 的 xml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:mvc="http://www.springframework.org/schema/mvc"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans 
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/mvc 
        http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd">

    <!-- Define services here-->

    <bean id="userService" class="com.jr.freedom.user.UserService"></bean>

</beans> 
```

下面的服务：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:context="http://www.springframework.org/schema/context"
    xsi:schemaLocation="
        http://www.springframework.org/schema/beans      
        http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
        http://www.springframework.org/schema/context
        http://www.springframework.org/schema/context/spring-context-3.1.xsd">

    <import resource="mvc-config.xml" />

    <import resource="service-config.xml" />

    <import resource="datasource-config.xml" />

    <bean id="propertyConfigurer"
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
        <property name="locations">
            <list>
                <value>database.properties</value>
            </list>
        </property>
    </bean>

    <bean
        class="org.springframework.web.servlet.mvc.annotation.DefaultAnnotationHandlerMapping" />

    <!-- Resolves views selected for rendering by @Controllers to .jsp resources 
        in the /WEB-INF/views directory -->
    <bean id="viewResolver"
        class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="prefix" value="/WEB-INF/views/" />
        <property name="suffix" value=".jsp" />
    </bean>

    <bean
        class="org.springframework.web.servlet.mvc.annotation.AnnotationMethodHandlerAdapter" />

    <context:component-scan base-package="com.jr.freedom.controllers"></context:component-scan>

</beans> 
```

我错过了什么？

编辑：我 npw 在控制台输出中收到此错误

> java.lang.NoSuchMethodError: org.junit.runner.notification.RunNotifier.testAborted(Lorg/junit/runner/Description;Ljava/lang/Throwable;)V 在 org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner .java:146) 在 org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:61) 在 org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:54) 在 org.junit.internal .runners.ClassRoadie.runUnprotected(ClassRoadie.java:34) 在 org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:44) 在 org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:52 ) 在 org.eclipse.jdt.internal.junit.runner.TestExecution 的 org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)。在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.runTests(RemoteTestRunner.java:467) 运行(TestExecution.java:38) java:683) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390) 在 org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)

**另一个编辑：**改用 junit 4.4 修复了上述 junit 错误。现在我们回到关于 ApplicationContext 的原始问题。

这是我运行测试时的错误堆栈跟踪：

```
log4j:WARN No appenders could be found for logger (org.springframework.test.context.junit4.SpringJUnit4ClassRunner).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info.
java.lang.NoClassDefFoundError: javax/servlet/ServletException
    at java.lang.ClassLoader.defineClass1(Native Method)
    at java.lang.ClassLoader.defineClassCond(ClassLoader.java:631)
    at java.lang.ClassLoader.defineClass(ClassLoader.java:615)
    at java.security.SecureClassLoader.defineClass(SecureClassLoader.java:141)
    at java.net.URLClassLoader.defineClass(URLClassLoader.java:283)
    at java.net.URLClassLoader.access$000(URLClassLoader.java:58)
    at java.net.URLClassLoader$1.run(URLClassLoader.java:197)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    at java.lang.Class.getDeclaredMethods0(Native Method)
    at java.lang.Class.privateGetDeclaredMethods(Class.java:2427)
    at java.lang.Class.getDeclaredMethods(Class.java:1791)
    at org.springframework.core.type.StandardAnnotationMetadata.hasAnnotatedMethods(StandardAnnotationMetadata.java:136)
    at org.springframework.context.annotation.ConfigurationClassUtils.isLiteConfigurationCandidate(ConfigurationClassUtils.java:105)
    at org.springframework.context.annotation.ConfigurationClassUtils.checkConfigurationClassCandidate(ConfigurationClassUtils.java:86)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:216)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:178)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:617)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:446)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:96)
    at org.springframework.test.context.support.AbstractGenericContextLoader.loadContext(AbstractGenericContextLoader.java:44)
    at org.springframework.test.context.TestContext.buildApplicationContext(TestContext.java:198)
    at org.springframework.test.context.TestContext.getApplicationContext(TestContext.java:233)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:126)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:85)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:231)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.createTest(SpringJUnit4ClassRunner.java:95)
    at org.springframework.test.context.junit4.SpringJUnit4ClassRunner.invokeTestMethod(SpringJUnit4ClassRunner.java:139)
    at org.junit.internal.runners.JUnit4ClassRunner.runMethods(JUnit4ClassRunner.java:51)
    at org.junit.internal.runners.JUnit4ClassRunner$1.run(JUnit4ClassRunner.java:44)
    at org.junit.internal.runners.ClassRoadie.runUnprotected(ClassRoadie.java:27)
    at org.junit.internal.runners.ClassRoadie.runProtected(ClassRoadie.java:37)
    at org.junit.internal.runners.JUnit4ClassRunner.run(JUnit4ClassRunner.java:42)
    at org.eclipse.jdt.internal.junit4.runner.JUnit4TestReference.run(JUnit4TestReference.java:50)
    at org.eclipse.jdt.internal.junit.runner.TestExecution.run(TestExecution.java:38)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:467)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.runTests(RemoteTestRunner.java:683)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.run(RemoteTestRunner.java:390)
    at org.eclipse.jdt.internal.junit.runner.RemoteTestRunner.main(RemoteTestRunner.java:197)
Caused by: java.lang.ClassNotFoundException: javax.servlet.ServletException
    at java.net.URLClassLoader$1.run(URLClassLoader.java:202)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.net.URLClassLoader.findClass(URLClassLoader.java:190)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:306)
    at sun.misc.Launcher$AppClassLoader.loadClass(Launcher.java:301)
    at java.lang.ClassLoader.loadClass(ClassLoader.java:247)
    ... 42 more 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:43:00.293

不是一个真正的答案，但希望它能帮助您解决问题（它对我有用）。像这样添加`@RunWith(SpringJUnit4ClassRunner.class)`到您的课程中：

```
@RunWith(SpringJUnit4ClassRunner.class)
@ContextConfiguration(locations = {"file:///c:/project/target/META-INF/spring/applicationContext.xml"})
public class SpringContextTest {
   ...
} 
```

这至少会给你记录，所以更容易看到发生了什么。要么是不正确的文件路径，要么是上下文定义中的问题，例如无效的 bean 定义。

注意：不要介意我的示例中的绝对路径，这是实验的一部分 - 它应该真正依赖于`classpath:`位置。

**更新：**更新的堆栈跟踪表明您在运行测试时在类路径上没有 Java Servlets API (java.lang.NoClassDefFoundError: javax/servlet/ServletException)。确保在类路径中包含 jar `servlet-api-2.5.jar`（或类似的）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:41:47.617

似乎`@RunWith(SpringJUnit4ClassRunner.class)`注释丢失了，或者只是复制和粘贴时出错？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T12:00:59.187

我也在这个问题上苦苦挣扎了 3-4 个小时..但最后当我将下面的代码添加到我的测试类时....

```
@RunWith(SpringJUnit4ClassRunner.class)  
@ContextConfiguration(locations = { "file:///D:/PRMS_Workspace/PRMS/WebContent/WEB-INF/dispatcher-servlet.xml" }) 
```

它成功了。

# javascript - 冰岛语在 javascript 警告框中搞砸了

> ID：11139190
> 
> 赞同：2
> 
> 时间：2012-06-21T13:24:27.360
> 
> 标签：javascript, character-encoding, alert

我有一个警告框，我想显示一些冰岛语文本，但没有显示

```
<script>
function check() {
alert("Þú verður að vera skráð/ur inn til þess að senda skilaboð");
}
</script> 
```

它正在显示警报框，但文本混乱​​:(

**ÃžÃº verÃ°ur aÃ° vera skrÃ¡Ã°/ur inn til Ã¾ess aÃ° senda skilaboÃ°**

请提供任何帮助:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:32:29.993

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:37:08.277

Let's do it in html5 manner :)

```
<!doctype html>
<html>
   <head>
       <meta charset = "utf-8" />
   </head> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:34:50.687

encoding hazards my best guesses: check if...

1.  the js-file is stored properly encoded (UTF8) on your server
2.  the server delivers the JS file with proper encoding header ([HTTP/1.1 about encoding](http://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.11))
3.  ... @Diodeus is right

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T14:33:47.977

What you see displayed by the alert is UTF-8 encoded text misinterpreted as windows-1252 encoded. (Windows-1252 is a Microsoft extension to ISO-8859-1.)

If your pages are ISO-8859-1 encoded, as they apparently are, then this applies to the `script` element content too. There is something odd going if the code you posted does not work. Are you sure the element is really inside a normal page of yours where Icelandic characters work OK? You should **not** try this fix the situation with a shot in the dark like changing encodings without knowing what is going on.

I’m just making a guess: the `alert()` invocation is really in an external .js file, which is UTF-8 encoded but treated by browsers as windows-1252 encoded. Then there are two alternative fixes: 1) open that file in an editor and save it as windows-1252 or ISO-8859-1 encoded; or 2) modify server settings to declared UTF-8 for .js files or (less reliably) add `charset=utf-8` attribute to the `script` element.

Alternatively, if the `alert()` invocation is really inside a `script` element in an HTML file, then perhaps this file is really UTF-8 encoded but you don’t observe other problems because the content of the file does not otherwise contain Icelandic characters. In this case, it is best to open the HTML file in your authoring program and change its encoding to windows-1252 or ISO-8859-1.

# javascript - 带有 XML 的简单网页游戏高分系统

> ID：11139193
> 
> 赞同：0
> 
> 时间：2012-06-21T13:24:33.073
> 
> 标签：javascript, xml, ajax

我是网络游戏开发的新手，我正在尝试为比赛制作网络画布游戏。

我已经完成了大部分代码，但我遇到了游戏要求的高分系统问题。

我可以访问可以托管我的游戏的服务器，但它不支持 SQL。
我正在考虑只使用 XML 和 ajax 来管理高分。

这可能吗？这是我可以研究的任何参考吗？

到目前为止，我还没有找到直接使用 ajax 修改 XML 文件的方法。

我知道 php 能够修改 XML 文件，但我也不确定服务器是否能够支持它。

是否所有 php 服务器都支持以相同方式处理 XML 文件？

（我知道 php 4 和 php 5 之间有区别）

任何有关如何在 JavaScript 中修改 XML 文件的详细教程将不胜感激。

谢谢。

此外，组织者还提供了这份文件，它应该有助于高分系统：

* * *

1 创建一个文本或 XML 文件来存储前 10 个分数

为了能够在线存储您的游戏高分，您需要一个网络服务器和一个在线数据库。因此，创建一个类似于数据库的空文本文件。

确定识别/分隔每个分数的分隔符。（分隔符可以是“，”或换行符等）

2 高分记录

为了能够在您的文本文件中建立这个高分列表，您首先必须在玩家完成游戏后收集玩家的分数。

使用收集的分数，您的系统将需要访问文本文件的内容。

如果收集的分数高于文本文件中的 10 个分数，则将收集的分数写入文本文件中。否则，丢弃收集的分数。

如果收集分数已写入文本文件，游戏将重新排列所有前 10 名的分数。并且先前记录在文本文件中的最后一个分数将被删除。

注意事项

为避免黑客攻击，应正确处理输入参数

您可能希望在发送分数中添加一些验证，因此有人无法通过手动发送轻松操纵分数。

# javascript - 在大型系统中附加事件处理程序的最佳实践

> ID：11139194
> 
> 赞同：2
> 
> 时间：2012-06-21T13:24:34.837
> 
> 标签：javascript, performance, events, closures

我开始在 javascript 上构建更大的东西，我想知道编码风格和性能。现在我试图弄清楚在这种情况下附加事件处理程序的最佳方法是什么：我有 Item() 构造的对象，文档中有 div ，每个对象一个，具有对应的 id。我想从每个 div 的事件处理程序访问其项目对象表示。这些项目将被大量操作、创建、删除等，它们的 div 也是如此。您可以在[此处](https://github.com/spelufo/schematizer.js/blob/master/Schematizer.js)查看代码（非常感谢任何一般编码风格的反馈）。

我可以这样做：

1.  通过直接将我的所有事件处理程序放在 Item 构造函数中，这样他们就可以访问正在构造的对象（var that = this）。我不认为在这里有所有这些代码是个好主意，但我可能想多了。

2.  将处理程序存储在单独的 handlerCollection 对象中，并使用辅助函数 getItemFromDOM(div) 访问项目对象，该函数读取 div id 并在存储文档中所有项目的数组中搜索相应的项目。

3.  在代码中的某个地方有一个函数 registerItemEvents(item) 在 Item 构造函数中调用并用于为处理程序生成项目的闭包，该处理程序将存在于其中。

我猜最优雅的是第三个，但我可能高估了整洁，拒绝了第一个。还有没有机会，使用第三个，如果我开始删除项目，关闭它们会阻止内存被释放，最终减慢整个事情的速度？我可以通过在删除项目之前简单地释放事件处理程序来解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-10T08:18:13.163

如果可能的话，我认为你应该考虑使用代表。据我所知，添加和删除事件处理程序会增加不必要的开销。

无论您选择如何实现（jquery、yui、其他、自定义），这篇来自 Yahoo! 的帖子 有一些很好的信息

[http://www.yuiblog.com/blog/2009/11/13/event-delegation-3/](http://www.yuiblog.com/blog/2009/11/13/event-delegation-3/)

# sql - 如何使用破折号 (-) 作为标准值

> ID：11139195
> 
> 赞同：2
> 
> 时间：2012-06-21T13:24:37.973
> 
> 标签：sql, database, ms-access

我不知道这在 MS Access 中是否可行，但我想要做的是检测破折号 (-) 并在 SQL 语句和或逗号中使用 Between。

前任。我有一个名为“Books”的表，其中包含以下字段：BookID、Title、Subject。

现在我如何查询允许用户在文本框中输入值的 Books 表，例如：

```
1 or 1-5 or 1,3,4. 
```

如果值为 1，则 sql 语句应为：

```
SELECT * FROM Books WHERE BookID = 1 
```

如果值为 1-5 那么 sql 语句应该是：

```
SELECT * FROM Books WHERE BookID BETWEEN 1 And 5 
```

如果值为 1,3,4 那么 sql 语句应该是：

```
SELECT * FROM Books WHERE BookID IN (1,3,4) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:59:35.577

从我已经拥有的东西上剪下来；

```
s = "SELECT * FROM Books WHERE BookID" & parseSarg("11,22,33") 
```

使用;

```
Public Function parseSarg(str As String) As String
    Dim re As Object: Set re = CreateObject("vbscript.regexp")
    re.Global = True
    Select Case True
        '//is number
        Case reTest(re, "^\d+$", str):          parseSarg = " = " & str
        '//is number-number
        Case reTest(re, "^\d+-\d+$", str):      parseSarg = " BETWEEN " & Replace$(str, "-", " AND ")
        '//is number,number[,number]
        Case reTest(re, "^\d+(?:,\d+)*$", str): parseSarg = " IN (" & str & ")"
        '//is >number
        Case reTest(re, "^>\s*\d+$", str):      parseSarg = " >" & Mid$(str, 2)
        Case Else
            parseSarg = " = 0 AND 1=0"
    End Select
End Function

Function reTest(re As Object, pattern As String, value As String) As Boolean
    re.pattern = pattern
    reTest = re.Test(value)
End Function 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:56:33.980

```
SELECT Books.Title FROM Books WHERE Books.BookID > 1 AND Books.BookID < 5; 
```

# asp.net - 表单发布数据到 ASHX 隐藏字段

> ID：11139197
> 
> 赞同：3
> 
> 时间：2012-06-21T13:24:47.267
> 
> 标签：asp.net, ashx

我有下一个表格和一些 ashx

```
 <form action="FileUpload.ashx" method="POST" enctype="multipart/form-data" id="frmUpload">
        <input id="fileupload" type="file" name="files[]" />
        <input id="viewId" type="hidden" />
        <input id="moduleId" type="hidden" />
        <button id="btnUpload" type="submit">Upload</button>
    </form> 
```

我可以在 *ProcessRequest(HttpContext context)* context.Request.Files 中获取文件 - 文件包含文件信息，但 context.Request.Form["viewId"] 为空。我应该怎么做才能获得隐藏字段值？

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:28:32.120

您还需要添加`name="viewid"`。该`name`属性在您发布时使用，而不是`id`

另请阅读： HTML 输入 - “用于表单元素以提交信息”行中的[名称与 id](https://stackoverflow.com/questions/7470268/html-input-name-vs-id)

# php - 我发现无法与我的网站建立 facebook 集成

> ID：11139200
> 
> 赞同：-3
> 
> 时间：2012-06-21T13:24:53.067
> 
> 标签：php, facebook, codeigniter

我尝试了很多方式..我使用了 php-sdk 和许多其他方式...但我无法将我的网站与 facebook 连接...实际上..我正在使用 codeigniter 做我的项目。任何人都可以建议我连接到 facebook 登录并使用 codeigniter 共享。

```
<?php
            include "libs/facebook.php";
            $facebook = new Facebook(array(
                'appId' => '376406812408828',
                'sec`enter code here`ret' => 'ca1eb65bde82a4009c31b4a5adb047b5',
                'cookie' => true
            ));
            print_r($facebook);
            $session = $facebook->getUser();
            echo $session;
            $me=null;
            if($session)
            {
                try
                {

                    $me = $facebook->api('/me');
                    echo $me;
                     $facebook->api('/me/feed','post',array('message' => 'Hello World!'));
                }
                catch(FacebookApiException $e)
                {
                    echo $e->getMessage();
                }
            }
            if($me)
            {
                $logoutUrl = $facebook ->getLogoutUrl();
                echo "<a href=".$logoutUrl.">Logout</a>";
            }
            else
            {

                $loginUrl = $facebook ->getLoginUrl(array(        
                    'req_perms' => 'publish_stream,read_friendlists'
                ));
                echo "<a href=".$loginUrl.">Login</a>";
            }
        ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:35:16.277

**Danny Tran 为 CodeIgniter 提供了[一个简单易用的 Facebook 库](https://github.com/dannybtran/CI_Facebook)。**

> **CI_Facebook**是一个`Facebook Library for CodeIgniter`.
> 
> 只需将所有文件复制/合并到相应的位置并设置 config/facebook.php。
> 
> 为每个函数/类编写了单元测试。您将需要 PHPUnit 来执行它们。
> 
> 访问 Facebook 对象很容易，因为钩子会自动加载它。
> 
> ```
> e.g. $user_data = $this->facebook->fb->api_client->fql_query("select name from user where uid = TARGETUSERID"); 
> ```

链接到**Github**上的库：**[https ://github.com/dannybtran/CI_Facebook](https://github.com/dannybtran/CI_Facebook)**

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:36:58.443

几周后我不得不这样做，之后我想出了这个。我需要它来进行 ajax 登录，但它主要适合每个人的需要。

这是第一步，它会提示 facebook 登录（如果您尚未登录），然后重定向到您之前设置的 uri。

```
$this->load->library('facebook_handler');
$this->facebook_handler->loginBegin($this->config->item('endpointfacebook')); 
```

**库文件夹中的 Facebook_handler**

```
<?php if (!defined('BASEPATH')) exit('No direct script access allowed'); 

class Facebook_handler extends ML_index
{

        var $scope = "email, user_about_me, user_birthday, user_hometown, user_website,read_stream, publish_stream, read_friendlists";

    function __construct()
    {   parent::__construct();

        $this->CI =& get_instance();
        $this->CI->config->load('mlogin_config'); //Config where I have the keys

        if ( ! $this->CI->config->item('facebook_api_key') || ! $this->CI->config->item('facebook_api_key_secret') )
        {
            throw new Exception( "Your application id and secret are required in order to connect to {$this->providerId}.", 4 );
        }
        include_once(APPPATH.'libraries/Facebook/base_facebook.php'); //Place where I've situated the facebook libraries
        include_once(APPPATH.'libraries/Facebook/facebook.php');

        $this->fb = new Facebook( ARRAY( 'appId' => $this->CI->config->item('facebook_api_key'),'cookie'=>true, 'secret' => $this->CI->config->item('facebook_api_key_secret') ) ); 
        $this->user = $this->fb->getUser();

    } 
     /*The login process starts here, endpoint is the redirect_url for facebook*/
    function loginBegin($endpoint) 
    {
        $scope=$this->CI->config->item('facebook_scope');
        if( isset( $scope ) && ! empty( $scope ) )
        {
            $this->scope = $scope;
        }
        $this->logout();
        $url = $this->fb->getLoginUrl( array( 'domain'=>base_url(),'scope' => $this->scope, 'redirect_uri' => $endpoint,'display' => 'popup' ) );

        redirect($url); 
    }

    /*Function to get user data*/
    function getUser(){
        if ($this->user) {
          try {
            // Proceed knowing you have a logged in user who's authenticated.
            $user_profile = $this->fb->api('/me');
            return $user_profile;
          } catch (FacebookApiException $e) {
            error_log($e);
            return false;
            }
        }else{
            $this->output->set_output('no logueado');
        }
    }

    /*Facebook logout, it destroys facebook sessions. I dont really use this*/
    function logout(){
        $this->fb->destroySession();
    }   
}

?> 
```

**重定向到的函数**

```
function closewindowfacebook(){
           $this->load->library('facebook_handler');
           $userprofile=$this->facebook_handler->getUser();

            if ($userprofile!=false){
               $fb_uid = $this->facebook_handler->fb->getUser();
               $fb_email=$userprofile['email'];
               $fb_name=$userprofile['name'];

                /*My function to connect to the website, that you'd do it yourself*/
               //$this->auth->try_fb_login($fb_uid,$fb_email,$fb_name);

                 /*I use this to close the popup window*/
                             die('<script type="text/javascript">
                    window.opener.everythingready();
                    window.close();
                </script>');

            }  else{
                echo 'error ';
            }

    } 
```

询问您是否还有其他问题

# android - 根据android webview中点击的链接更新URL

> ID：11139204
> 
> 赞同：0
> 
> 时间：2012-06-21T13:25:18.190
> 
> 标签：android, webview

当我在文本框中键入 url 并单击 Go 按钮时，webview 会加载所需的页面，但是当我单击 webview 内的任何链接时，作为文本框的地址栏没有更新为确切的 url？我该怎么做呢？

我在谷歌上尝试各种不同的方法没有得到解决方案 - 可能关键词是错误的。:( - 这方面的帮助会很棒。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:43:06.937

您需要重写 onPageFinished 方法

```
 @Override
public void onPageFinished(WebView view, String url) {

    urlEditText.setText(url, TextView.BufferType.NORMAL);

    super.onPageFinished(view, url);
} 
```

# python - 从一页模板生成多个 OpenOffice 页面

> ID：11139207
> 
> 赞同：2
> 
> 时间：2012-06-21T13:25:22.880
> 
> 标签：python, libreoffice

我有一个单页 OpenOffice 文档，它是一个[POD](http://appyframework.org/pod.html)模板。基本上，我使用此模板将模板中的标签替换为呈现文档中自动生成的数据。

这是它的工作原理：

```
# loads the POD OpenOffice template engine
from appy.pod.renderer import Renderer as OORenderer

# defines data for template tags
ctx = {'template_tag': 'my_data'}

# renders the template in my_model.odt using defined data
r = OORenderer('my_model.odt', ctx, 'rendered_file.pdf')

# saves into the specified PDF file
r.run() 
```

我想生成几个这样的页面，并将它们合并到一个 PDF 文件中。

有没有办法使用 POD 做到这一点？

或者我可以以编程方式将生成的 PDF 文件合并到一个文件中吗？

谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-27T09:51:43.207

> > 并将它们合并为一个 PDF 文件。

试试[pyPDF](http://pybrary.net/pyPdf/)。

一个作为 PDF 工具包构建的纯 Python 库。它能够：

*   提取文档信息（标题，作者，...），
*   逐页拆分文档，
*   逐页合并文档，
*   裁剪页面，
*   将多个页面合并为一个页面，
*   加密和解密 PDF 文件。

# php - PHP 的 cURL 突然无法获取 IP 地址，file_get_contents 是不是很好的替代品？

> ID：11139215
> 
> 赞同：3
> 
> 时间：2012-06-21T13:25:33.863
> 
> 标签：php, dns

我们网站上有一个页面，它使用 cURL 从远程域获取 XML 数据。几天前它随机开始失败（可能有 1/3 的请求失败）。在使用我们的主机和远程站点的操作员进行调试后，我们发现 curl 错误是“名称查找超时”，表明 DNS 问题。我们`CURLOPT_CONNECTTIMEOUT`设置为 5。当我将其更改为 30 时，它每次都有效。

但这是一个实时页面，我不能让访问者在等待响应时等待 30 秒。另外，增加的超时并没有回答为什么这首先开始失败的问题。该系统已在多年前就位，5 秒超时始终没问题。

此外，我发现如果我执行 a `dns_get_record()`，它每次都能正常工作，并且我很快就能获得一个有效的 IP 地址。所以我修改了脚本，首先做一个`dns_get_record()`，然后我 cURL 到它返回的 IP，它绕过了 cURL 末端的名称查找。它工作正常，但很愚蠢。

所以第一个问题，是否有人对 cURL 可能失败的方式或原因有任何建议。我们的主机和远程站点的主机都同意它是某处的 DNS 服务器，但都没有同意谁的 DNS 服务器负责，因为两者都说他们自己的服务器很好，我们的主机说他们可以毫无问题地 ping 远程域。

第二个问题，是+ cURL`file_get_contents()`的充分替代品吗？`dns_get_record()`或者我应该坚持使用`dns_get_record()`+ cURL 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-22T02:10:16.233

在引擎盖下，两者都`curl_exec`执行`file_get_contents`几乎相同的操作；他们都习惯于`libresolv`：

1.  连接到名称服务器
2.  发出一个 dns 请求
3.  处理 dns 响应

要进一步调试，您可以使用[`curl_getinfo()`](http://www.php.net/manual/en/function.curl-getinfo.php)获取有关您的请求的详细统计信息；您可以使用它来了解每个部分使用了多长时间：

*   CURLINFO_NAMELOOKUP_TIME
*   CURLINFO_CONNECT_TIME
*   CURLINFO_PRETRANSFER_TIME
*   ...

# regex - 如何在 Perl 中使用正则表达式解析多行 HTML

> ID：11139220
> 
> 赞同：1
> 
> 时间：2012-06-21T13:25:51.280
> 
> 标签：regex, perl, multiline

我正在尝试使用 perl 解析出多行字符串，但我只得到匹配的数量。这是我正在解析的示例：

```
<div id="content-ZAJ9E" class="content">
        Wow, I love the new top bar, so much easier to navigate now :) Anywho, got a few other fixes I am working on as well. :) I hope you all like the new look.
</div> 
```

我正在尝试使用以下代码将内容存储在字符串中：

```
@a = ($html =~ m/class="content">.*<\/div>/gs);
print "array A, size: ",  @a+0,  ", elements: ";
print join (" ", @a);
print "\n"; 
```

但它返回的不仅仅是div中的文本。有人可以指出我的正则表达式中的错误吗？

玛丽莎

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T14:06:52.727

使用强大的 HTML 解析器：

```
use strictures;
use Web::Query qw();
my $w = Web::Query->new_from_html(<<'HTML');
<div id="content-ZAJ9E" class="content">
        Wow, I love the new top bar, so much easier to navigate now :) Anywho, got a few other fixes I am working on as well. :) I hope you all like the new look.
</div>
HTML
$w->find('div.content')->text 
```

表达式返回`Wow, I love the new top bar, so much easier to navigate now :) Anywho, got a few other fixes I am working on as well. :) I hope you all like the new look.`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T14:13:46.477

使用旨在解析 HTML 的东西，例如[HTML::TreeBuilder::XPath](http://search.cpan.org/perldoc/HTML::TreeBuilder::XPath)：

```
#!/usr/bin/env perl

use strict; use warnings;
use 5.014;
use HTML::TreeBuilder::XPath;
use YAML;

my $doc =<<EO_HTML;
<div id="content-ZAJ9E" class="content">
<!-- begin <div> -->
        Wow, I love the new top bar, so much easier to navigate now :)
        Anywho, got a few other fixes I am working on as well. :)
        I hope you all like the new look.
<!-- end </div> -->
<span class="extra">Here I am</span>
</div>
EO_HTML

use HTML::TreeBuilder::XPath;
my $tree= HTML::TreeBuilder::XPath->new;
$tree->store_comments(1);
$tree->parse($doc);

print Dump [ $tree->findvalues('//div[@class="content"]') ];
print Dump [ $tree->findvalues('//*[@class="extra"]') ];
print Dump [ $tree->findvalues('//comment()') ]; 
```

请注意不依赖自制正则表达式模式来处理输入的各种变化所提供的能力。

输出：

```
---
- '  Wow, I love the new top bar, so much easier to navigate now :) Anywho, got a few other fixes I am working on as well. :) I hope you all like the new look. Here I am '
---
- Here I am
---
- ' begin <div> '
- ' end </div> ' 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T13:32:00.730

你只是匹配字符串，你没有解析出任何东西。如果你想在中间的文本`div`，你应该说：

```
$html =~ m/class="content">(.*)<\/div>/gs;
my $text = $1;
print $text; 
```

您的匹配项将存储在`$1`变量中。如果有多个这样的实例，则`div[class=content]`需要这样的循环：

```
use strict; use warnings;
use Data::Dumper;

my $html = qq~<div id="content-ZAJ9E" class="content">
        Wow, I love the new top bar.
</div>
<div id="content-ZAJ9E" class="content">
        I still love it.
</div>
<div id="content-ZAJ9E" class="content">
        I cant get enough!
</div>
~;

my @matches;
# *? makes it non-greedy so it will only match to the first </div>
while ($html =~ m/class="content">(.*?)<\/div>/gs){ 
  my $group = $1;     
  $group =~ s/^\s+//; # strip whitespace at the beginning
  $group =~ s/\s+$//; # and the end

  push @matches, $group;
}
print Dumper \@matches; 
```

我建议你看看[`perlre`](http://perldoc.perl.org/perlre.html)and [`perlretut`](http://perldoc.perl.org/perlretut.html)。

* * *

一些注意事项：

*   **总是** [`use strict`](http://perldoc.perl.org/strict.html)和[`use warnings`](http://perldoc.perl.org/warnings.html)！
*   试试[`Data::Dumper`](http://search.cpan.org/perldoc/Data::Dumper)吧，调试你的变量很棒。
*   使用正则表达式进行 HTML 解析并不是最好的主意。如果您要进行大量解析，请考虑 CPAN 提供的模块之一，例如[HTML::Parser](http://search.cpan.org/perldoc/HTML::Parser)、[HTML::TreeBuilder::XPath](http://search.cpan.org/perldoc/HTML::TreeBuilder::XPath)或[HTML::TokeParser::Simple](http://search.cpan.org/perldoc/HTML::TokeParser::Simple)或[Mojo::DOM](http://search.cpan.org/perldoc/Mojo::DOM)，或[搜索为此](https://stackoverflow.com/search?q=perl%20html%20parsing)

# php - 如何从 1 中获取数据库中未使用的数字

> ID：11139225
> 
> 赞同：0
> 
> 时间：2012-06-21T13:26:09.077
> 
> 标签：php, mysql

嗨，我的问题是如何获取特定数据库行中未使用的第一个数字。该数字必须介于 1 和 9999 之间，并且必须与该特定数据库行中的所有数字进行比较，因此如果我的数据库行中的数据以 5 开头，我将无法获得第一个未使用的数字 ...in在这种情况下是数字 1。然后当我创建带有数字 1 的数据时。我需要获取的下一个数字是 2 并且...我正在使用它来创建配置文件，该数字是配置文件编号，以及新的配置文件必须有数据库中第一个未使用的数字。怎么做。我不知道从哪里开始。那么，如果有人能让我走上解决这个问题的正确道路吗？谢谢。

编辑

但是，我不需要用户能够自己选择这个数字的自动增量，首先，必须通过将第一个数字放在文本表单中向用户建议。如果用户选择数据库中已经存在的号码，我的程序会让用户知道他正在尝试选择已经存在的号码。因此，如果您了解我的话……我知道 mysql 的基础知识。当用户删除一个配置文件然后删除的号码不能再使用时，问题就出现了。为此，我需要功能首先释放未使用的号码。

新编辑

我会尝试澄清一些细节......首先这是人力资源程序，用户创建工人的档案......当用户创建新的dosie hee需要选择这个工人的dosie编号，现在我需要建议用户使用新剂量的第一个未使用的号码......剂量号码不是剂量的“ID”。剂量必须由用户手动选择，否则他可以让第一个免费号码给新剂量...我认为这会清除一些事情

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:31:02.733

您可能正在谈论表行的自动增量主键。只需插入数据，无需指定此“数字”，数据库将自动将其设置为正确的（下一个空闲）值。

不要重用主键（例如，您有 1、2、3、4、5，但随后删除了 3 - 如果您重用 3，您将不会知道 3 是实际删除的其他记录）。

顺便说一句，这是非常基本的数据库知识。阅读一些关于 MySQL 或任何其他 SQL 关系数据库的介绍教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:35:50.300

您正在尝试使用错误的数据库。

也许你可以看看这个：[Finding the next available id in MySQL](https://stackoverflow.com/questions/1405393/finding-the-next-available-id-in-mysql)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:48:54.543

首先创建一个值为 1 到 9999 的表。然后，运行一次此查询：

```
delete from table where id IN (select id from profiles) 
```

这样，您将获得不在配置文件表中的 ID。第一个可以显示给用户。保存记录时，请确保从该表中删除该 ID。

如果我对你的理解正确，这就是你要找的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T14:05:23.297

如果您仅限于使用值 1 到 9999，我可能会按如下方式设置过程：

1.  添加另一个具有两列的表 (id_tracker)。
2.  填充`id_tracker`id 的 1 到 9999，默认 is_used 为 0。
3.  根据 的内容更新`id_tracker.is_used`为 1 `your table`。
4.  添加删除、插入触发器以`your table`根据需要进行更新`id_tracker`。
5.  并选择空ID如下`SELECT id FROM id_tracker WHERE is_used = 0 ORDER BY id LIMIT 1`

下面是一些帮助您入门的 SQL：

```
create table id_tracker
(id int not null, is_used tinyint default 0, primary key (id));

delimiter |

CREATE TRIGGER your_table_delete_trigger BEFORE DELETE ON your_table
  FOR EACH ROW
  BEGIN
      UPDATE id_tracker SET is_used = 0 WHERE id = OLD.your_table_id;
  END;
|

CREATE TRIGGER your_table_insert_trigger AFTER INSERT ON your_table
  FOR EACH ROW
  BEGIN
      UPDATE id_tracker SET is_used = 1 WHERE id = NEW.your_table_id;
  END;
|

delimiter ; 
```

** 注意：以上内容适用于 MySQL

# c# - 从 app.config 获取 ConnectionString

> ID：11139226
> 
> 赞同：14
> 
> 时间：2012-06-21T13:26:16.723
> 
> 标签：c#

我很确定这段代码中有一些快速而简单的错误，但不知何故，我在过去的 2 个小时里一直在处理这个问题，但无法解决。

`App.config`：

```
<configuration>
  <connectionStrings>
    <add name="BO"
        connectionString="Data Source=MyServer;Initial Catalog=BO;User ID=WebUser;Password=MyPasswd"
        providerName="System.Data.SqlClient" />
  </connectionStrings>
</configuration> 
```

`Class.cs`：

```
string connectionString = getNewConnection();
using (SqlConnection conn = new SqlConnection(connectionString)) { code } 
```

方法。

```
public static string getNewConnection()
{
   return ConfigurationManager.ConnectionStrings["BO"].ConnectionString;
 } 
```

错误：

> 你调用的对象是空的

在线上 ：

```
return ConfigurationManager.ConnectionStrings["BO"].ConnectionString; 
```

编辑：

![错误图片，西班牙语句子的意思是：对象引用未设置为对象的实例](../Images/9ca80684308c4fc739eaba95376788e5.png)

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T13:28:09.413

它应该是：

```
ConfigurationManager.ConnectionStrings["BO"].ConnectionString; 
```

**编辑：**

如果您还没有相应的库，您也将需要相应的库，如以下答案中所述，我认为它的 System.Configuration

**所以你应该有完整的：**

```
public static string getNewConnection()
{
    return ConfigurationManager.ConnectionStrings["BO"].ConnectionString;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:29:45.570

在 Class 中使用这些代码：

```
class Connection
    {
        public static string con
        {
            get
            {
                return System.Configuration.ConfigurationManager.ConnectionStrings["sql"].ConnectionString;
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:28:50.860

您是否使用了 WebConfigurationManager？

```
string MyConnectionString = System.Web.Configuration.WebConfigurationManager.ConnectionStrings["BO"].ConnectionString; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-22T10:29:09.223

添加对 System.Configuration.dll 的引用，您应该可以使用 System.Configuration.ConfigurationManager。

# c# - 在 UpdatePanel 内单击按钮会丢失 TextBox 值

> ID：11139228
> 
> 赞同：0
> 
> 时间：2012-06-21T13:26:23.350
> 
> 标签：c#, asp.net, updatepanel, webforms

我在嵌套的 UpdatePanel 中有一个按钮。除非我给它选项，否则该按钮不会导致它的单击事件在服务器端发生，`UseSubmitBehavior="False"`但是当我这样做时，它会丢失相同的嵌套 UpdatePanel 内的 TextBox 值。一切都在屏幕上正确显示，但我无法调用该函数并获取 TextBox 文本。

例子：

```
<UpdatePanel>
    <MultiView>
        <UpdatePanel>
            <MultiView>
                <TextBox>
                <Button> 
```

# android - 尝试使用 ADB 调试应用程序时，Logcat 显示“权限被拒绝”错误

> ID：11139234
> 
> 赞同：3
> 
> 时间：2012-06-21T09:36:08.113
> 
> 标签：android, adb

我在办公室使用**Reliance 3G TAB**。它有一个`USB debugging`选项，但它不允许我们调试应用程序。`logcat`显示一条消息，内容为`permission denied`。如何调试我的应用程序？还有其他选择吗？

# c - 位移的奇怪行为

> ID：11139239
> 
> 赞同：2
> 
> 时间：2012-06-21T13:26:49.987
> 
> 标签：c, bit-manipulation

为什么两个**printf**语句输出不同的值？

```
int main()
{
    int n=10;

    printf("%d\n",(n&0xAAAAAAAA)>>1 + n&0x55555555  ); //prints 0

    printf("%d\n", n&0x55555555 + (n&0xAAAAAAAA)>>1 ); //prints 10

    return 0;
} 
```

[http://ideone.com/B33YB](http://ideone.com/B33YB)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T13:31:31.730

因为[运算符优先级](http://en.wikipedia.org/wiki/Operators_in_C_and_C%2B%2B#Operator_precedence)。

`+`早于 执行`>>`。

当你改变

`(n&0xAAAAAAAA)>>1 + n&0x55555555)`

到

`n&0x55555555 + (n&0xAAAAAAAA)>>1)`

您实际上是在更改执行操作的顺序。

`(n&0xAAAAAAAA)>>1 + n&0x55555555`可以重写为`(n&0xAAAAAAAA)>>(1 + n&0x55555555)`与`((n&0xAAAAAAAA)>>1) + n&0x55555555`（第二行的状态）不同

`+`和运算符也是如此`&`。

因此，要使输出它们的输出相似，您需要额外的括号：

```
int main()
{
    int n=10;

    printf("%d\n",((n&0xAAAAAAAA)>>1) + (n&0x55555555) ); // prints 5
    printf("%d\n",(n&0x55555555) + ((n&0xAAAAAAAA)>>1) ); // prints 5

    return 0;
} 
```

见[http://ideone.com/d3mHT](http://ideone.com/d3mHT)

# c# - C# 反射：如果...否则？

> ID：11139241
> 
> 赞同：13
> 
> 时间：2012-06-21T13:26:53.117
> 
> 标签：c#, reflection, reflection.emit, system.reflection, memory-address

我目前面临运营商的新问题。使用以下代码，我想制作与`if ... else`在 C# 中使用 pair 时相同的输出。

```
var method = new DynamicMethod("dummy", null, Type.EmptyTypes);
var g = method.GetILGenerator();

g.Emit(OpCodes.Ldstr, "string");
g.Emit(OpCodes.Ldstr, "string");
g.Emit(OpCodes.Call, typeof(String).GetMethod("op_Equality", new Type[]{typeof(string), typeof(string)}));
g.Emit(OpCodes.Ldc_I4, 0);
g.Emit(OpCodes.Ceq);
g.Emit(OpCodes.Brtrue_S, );

var action = (Action)method.CreateDelegate(typeof(Action));
action();

Console.Read(); 
```

我的问题是：

1.  如何获取指令的地址以将其作为分支操作码的参数传递？
2.  `BR`和`BR_S`、`Brtrue`和`Brtrue_S`、`Brfalse`和`Brfalse_S`类似的指令之间有什么区别吗？

谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T13:38:37.307

1.  您可以使用[`DefineLabel`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.ilgenerator.definelabel)和 [`MarkLabel`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.ilgenerator.marklabel%28v=vs.100%29.aspx)方法的组合来确定分支的目标位置。为此，请声明您需要的标签 - 类似于 `equal`and `notequal`。然后，您可以在 IL 中标记应该存在标签的位置。完成此操作后，您可以将分支指令的目标设置为此标签。

    ```
    // Define labels
    Label equal = g.DefineLabel();
    Label notEqual = g.DefineLabel();
    Label endOfMethod = g.DefineLabel();
    // your logic here
    g.Emit(OpCodes.Brtrue_S, equal);
    g.MarkLabel(equal);
    // some code if they are equal
    g.MarkLabel(notEqual);
    // some code if they are not equal
    g.MarkLabel(endOfMethod); // this marks the return point
    g.Emit(OpCodes.Ret); 
    ```

2.  `Br`、`Brtrue`和`Brfalse`和它们的对应物之间的区别在于`_S` 跳跃的长度。`_S`表示缩写形式；目标指令是距下一条指令的 1 字节带符号偏移量。在标准（非短）形式中，目标由 4 字节偏移量表示。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-21T13:38:39.597

[`ILGenerator.ILOffset`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.ilgenerator.iloffset)为您提供 IL 流中的当前偏移量，如果这是您想要的。正如 goric 建议的那样，您也可以使用[`DefineLabel`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.ilgenerator.definelabel.aspx)and 。[`MarkLabel`](http://msdn.microsoft.com/en-us/library/system.reflection.emit.ilgenerator.marklabel)

`brtrue.s`和之间的唯一区别`brtrue`是. 使用 4 字节偏移量并使用 1 字节偏移量。这同样适用于and (and / )。 `brtrue.s``brtrue``brtrue``brtrue.s``brfalse``brfalse.s``br``br.s`

这些不是 IL 指令的唯一短版本，还有其他短指令，例如`ldc.i4.0`-`ldc.i4.8`用于加载整数。这些主要用于生成较小的二进制文件，但我认为其他方面没有太大区别。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T13:39:51.093

这对我来说是新的，但是通过一些搜索显然你可以通过调用获得地址

```
Label targetInstruction = g.DefineLabel(); 
```

事先在某个时间点（例如在你的第一个`Emit`？），然后

```
g.MarkLabel(targetInstruction); 
```

*就在*发出要分支*到*的行之前。然后这`Label`是您的`Br____`操作码的参数。

[Br](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.brfalse.aspx)、[Brtrue](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.brtrue.aspx)和[Brfalse](http://msdn.microsoft.com/en-us/library/system.reflection.emit.opcodes.brfalse.aspx)之间的区别在于Br 总是分支，而另外两个从堆栈中弹出一个值，并且仅在分别为 true 或 false 时才分支。（所以是的，有很大的不同！） _S 表示“短格式”，但我不确定这是什么意思。

# python - 为什么这个 MessageDialog 冻结？

> ID：11139243
> 
> 赞同：1
> 
> 时间：2012-06-21T13:27:07.873
> 
> 标签：python, wxpython

A `wx.MessageDialog`在显示时冻结了我的整个 UI，只有鼠标指针移动，我的屏幕上没有任何内容是可点击的。我必须从终端终止该进程。

这发生在所有对话框，如颜色选择器或是/否。但不适用于文件选择器。

线程的详细信息：恰好有一个`CallLater`发生在**另一个**帧中。

这是有问题的部分和有问题的行：

```
def append_data_point(self, data):
c, l, r = data
if not self._spectrum_data.data_present:
    print "hey no data"
    dlg = wx.MessageDialog(
    parent  = self, 
    message = "data not loaded, create a new data",
    caption = "no data loaded" ,
    style   = wx.OK)
    print "created dialog"
    dlg.ShowModal()
    print "showed modal" #THIS NEVER RUNS
    dlg.Destroy() 
```

上面的函数恰好绑定到某个按钮：

```
 self.btn_open_file.Bind(wx.EVT_BUTTON, self.open_file) 
```

* * *

选择一个文件（当然是从操作系统界面）有效：

```
def open_file(self, event):
    dlg = wx.FileDialog(
        parent   = self, 
        message  = "select a spectrum file", 
        wildcard = "*.spectrum", 
        style    = wx.OPEN)
    if dlg.ShowModal() == wx.ID_OK: #PERDECTLY OK
        chosen_file = dlg.GetFilename()
        chosen_dir  = dlg.GetDirectory()
        filepath    = os.path.join(chosen_dir, chosen_file) 
```

# c# - 为我的类源创建一个 UIViewController，如何？

> ID：11139246
> 
> 赞同：0
> 
> 时间：2012-06-21T13:27:18.760
> 
> 标签：c#, iphone, uiviewcontroller, xamarin.ios, uitableview

我有这个类来创建日期源。如何`UIViewController`使用此类创建一个？

```
public partial class JogosSource : UITableViewSource {

    List<TableItem> tableItems; 
    string cellIdentifier = "TableCell";

    public JogosSource (List<TableItem> items)
    {
    }

    public override int RowsInSection (UITableView tableview, int section)
    {
    }

    public override void RowSelected (UITableView tableView, NSIndexPath indexPath)
    {
    }

    public override UITableViewCell GetCell (UITableView tableView, MonoTouch.Foundation.NSIndexPath indexPath)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:40:13.373

我不太确定我是否理解你的问题。

`UITableViewSource`是一个类，它组合`UITableViewDelegate`成`UITableViewDataSource`一个方便的类，包含两者的方法。

因此，如果您想使用该类，`JogoSource`在您的情况下，如 MT 文档中所写，您需要

> 将此对象的实例分配给 UITableView.Source 属性。

要创建`UITableView`元素，您可以遵循三种不同的方式：

*   子类an `UITableViewController`（这个类有一个自己的表视图）

*   `UIViewController`使用自己的 XIB子类 a ，在主视图中拖动表格并将其与插座链接

*   子类a `UIViewController`（带有自己的XIB，这是可选的），通过代码创建表

`Source`可以在`ViewDidLoad`方法中为您的表视图实例设置。例如，您可以确定插座设置正确。

```
this.YourTable = new JogoSource(yourItems); 
```

*简单的建议*

通常，当您处理一个`UITableViewSource`类时，您还可以在其构造函数中注入“控制”该源的控制器。例如，这在您处理`UINavigationController`.

所以，我会改变`JogoSource`as

```
public JogosSource (UIViewController injectedController, List<TableItem> items)
{
    // _controller is a private var of type UIViewController
    _controller = injectedController;
} 
```

例如，如果您的控制器插入到 a 中`UINavigationController`，并且您需要在选择一行时显示一些详细信息，则通过`_controller`访问父级（的实例`UINavigationController`）。

PS 还有其他创建表格的可能性，但我列出了主要的。此外，检查代码，因为我是手写的。

希望有帮助。

# sql - 将更新的记录输出到 FOR XML 语句中

> ID：11139249
> 
> 赞同：1
> 
> 时间：2012-06-21T13:27:31.647
> 
> 标签：sql, xml, sql-server-2008, tsql, xpath

是否可以更新表并在 FOR XML 语句中返回更新后的值？
考虑下表的客户：

```
Customers  
Id     FirstNam     LastNam  
 1      John          Doe  
 2      James        Smith
 3      Martin       Jones 
```

我想将 ID 为 2 的客户的 FirstNam 更新为 David，并将结果作为 XML 返回。
我试过使用：

```
UPDATE Customers  
SET FirstNam = 'David'
WHERE Id = 2
OUTPUT inserted.FirstNam
FOR XML PATH('') 
```

当然，这是行不通的。我究竟做错了什么？一如既往，非常感谢任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:42:08.980

我们不能直接将更新后的值插入 XML。
如果要保存更新数据的 XML，则需要分两步进行：

第 1 步：使用表变量并将更新的数据插入该表变量（作为简单过程）

```
DECLARE @Updated AS TABLE(columns..)

UPDATE Customers  
SET FirstNam = 'New_Name'
OUTPUT INSERTED.FirstNam @Updated
WHERE Id = 2 
```

第2步：

从表变量@Updated 生成 XML 为：

```
SELECT *
FROM @Updated
FOR XML PATH(''), ROOT('Cust') 
```

并将其保存到您想要的位置。

# logging - ASP.NET MVC 4 Web Api：诊断功能

> ID：11139256
> 
> 赞同：5
> 
> 时间：2012-06-21T13:27:58.727
> 
> 标签：logging, asp.net-mvc-4, asp.net-web-api, diagnostics

我正在寻找在 ASP.NET MVC 4 Web Api 中启用登录/跟踪的功能。在 WCF 中，您可以激活日志记录和 WCF 写入它正在执行的操作。然后，我可以打开转储并搜索错误。

我不想跟踪我的 web api，而是记录框架正在执行的操作。如果我使用消息处理程序跟踪/记录 Web api，如果在我的实施之前发生错误，我将得不到任何信息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T17:39:02.343

见[http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api](http://www.asp.net/web-api/overview/testing-and-debugging/tracing-in-aspnet-web-api)

如果您提供 ITraceWriter 实现（可以像调用 System.Diagnostics.Trace 一样简单），Web API 框架将跟踪它所做的事情。

*   麦克风

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T13:42:45.963

我推荐两件事。

**1）**为了获得有关抛出异常的完整详细信息，我将错误策略设置为始终。这应该从您的代码中返回更详细的异常消息。

```
 GlobalConfiguration.Configuration.IncludeErrorDetailPolicy = IncludeErrorDetailPolicy.Always; 
```

我认为这仅适用于 RC。

**2）**然后我还建议连接一个消息处理程序，您可以使用它来额外的请求/响应信息。消息处理程序将在新请求进入时和最终响应返回之前运行。网上有很多这样的例子。WebAPIContrib 在它的[GitHub](https://github.com/WebApiContrib/WebAPIContrib/)存储库中有一个，你可以看看作为一个[例子](https://github.com/WebApiContrib/WebAPIContrib/blob/master/src/WebApiContrib/MessageHandlers/LoggingHandler.cs)

**3）**如果您想监控其他服务器事件，您可能需要考虑使用[asp.net 健康监控](http://www.asp.net/web-forms/tutorials/deployment/deploying-web-site-projects/logging-error-details-with-asp-net-health-monitoring-cs)，当然只要您托管在 asp.net 中。它将允许您进行各种审计并监控服务器错误。

# swing - 如何使 BoxLayout 垂直但子项顶部对齐？

> ID：11139258
> 
> 赞同：2
> 
> 时间：2012-06-21T13:28:04.797
> 
> 标签：swing

我正在尝试获得一个垂直的、顶部对齐的布局来工作。这就是我所拥有的：

```
JPanel pane = new JPanel();
pane.setLayout(new BoxLayout(pane, BoxLayout.Y_AXIS));

MyImagePanel panelImage = new MyImagePanel();
panelImage.setSize(400, 400);

pane.add(new JComboBox());
pane.add(panelImage);
pane.add(new JButton("1"));
pane.add(new JButton("2"));
pane.add(new JButton("3"));

JFrame frame = new JFrame("Title");
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
frame.setSize(800, 600);
frame.add(pane);
frame.pack();
frame.setVisible(true); 
```

所有控件都出现了，但看起来在运行时在它们的顶部和底部之间应用了填充，因此它们有点垂直居中。这就是我想要的：

```
-----------------------------------------------------
| ComboBox |                                        |
------------                                        |
|          |                                        |
| Image    |                                        |
|          |                                        |
------------                                        |
| Button 1 | Any additional space fills the right   |
------------                                        |
| Button 2 |                                        |
------------                                        |
| Button 3 |                                        |
------------                                        |
|                                                   |
|  Any additional space fills the bottom            |
|                                                   |
----------------------------------------------------- 
```

如何让 BoxLayout 做到这一点？

谢谢

- - - - - - - - - - - - - 更新 - - - - - - - - - - - - -

能够使用这个：

```
Box vertical = Box.createVerticalBox();
frame.add(vertical, BorderLayout.NORTH);
vertical.add(new JComboBox());
vertical.add(new JButton("1"));  
... 
```

得到我想要的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:11:54.223

更合适的 LayoutManager 是 GridBagLayout，但还有其他选项：

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.Graphics;
import java.awt.GridBagConstraints;
import java.awt.GridBagLayout;

import javax.swing.JButton;
import javax.swing.JComboBox;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.SwingUtilities;

public class Test3 {

    protected static void initUI() {
        JPanel pane = new JPanel(new GridBagLayout());
        GridBagConstraints gbc = new GridBagConstraints();
        gbc.anchor = GridBagConstraints.NORTHWEST;
        gbc.fill = GridBagConstraints.NONE;
        gbc.weightx = 0.0;
        gbc.weighty = 0.0;
        gbc.gridwidth = GridBagConstraints.REMAINDER;
        JPanel panelImage = new JPanel() {
            @Override
            protected void paintComponent(Graphics g) {
                super.paintComponent(g);
                g.setColor(Color.RED);
                g.fillRect(0, 0, 400, 400);
            }
        };
        panelImage.setPreferredSize(new Dimension(400, 400));

        pane.add(new JComboBox(), gbc);
        pane.add(panelImage, gbc);
        pane.add(new JButton("1"), gbc);
        pane.add(new JButton("2"), gbc);
        // We give all the extra horizontal and vertical space to the last component
        gbc.weightx = 1.0;
        gbc.weighty = 1.0;
        pane.add(new JButton("3"), gbc);

        JFrame frame = new JFrame("Title");
        frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
        frame.add(pane);
        frame.pack();
        frame.setVisible(true);

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                initUI();
            }
        });
    }
} 
```

# android - 服务中的加速度计

> ID：11139263
> 
> 赞同：0
> 
> 时间：2012-06-21T13:28:21.980
> 
> 标签：android, android-service

我正在尝试使用加速度计`Service`（无限期地在后台运行）为我的研究小组获取加速度计数据。

`public class AccService extends Service implements SensorEventListener`

我的问题是，当我注册传感器时，我应该通过带有处理程序参数（另一个线程）的 registerListener 还是应该在没有处理程序的情况下运行？

`registerListener(SensorEventListener listener, Sensor sensor, int rate, Handler handler)`

`registerListener(SensorEventListener listener, Sensor sensor, int rate)`.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-16T17:17:01.253

我认为不`Service`应该实施`SensorEventListener`。您应该`Thread`在 a中创建一个新的`Service`（因为它默认在 UI 线程中运行），a 还有另一个仅为传感器数据收集而设计的类。请记住，屏幕关闭后***不会收集加速度数据。***最简单的方法是添加一个`WakeLock`.

# facebook - ref=ts on facebook app url 导致 app not found 错误

> ID：11139265
> 
> 赞同：1
> 
> 时间：2012-06-21T13:28:22.600
> 
> 标签：facebook, facebook-android-sdk

我创建了一个 facebook 应用程序，它在 [https://apps.facebook.com/icoloringstar/上运行顺利](https://apps.facebook.com/icoloringstar/)

但问题是：当我在 facebook 中搜索我的应用名称“icoloring star”时，它会链接到 url 上的应用： [https ://apps.facebook.com/icoloringstar/?fb_source=search&](https://apps.facebook.com/icoloringstar/?fb_source=search&) **ref=ts**

然后脸书说：

*应用程序“iColoring Star”不可用 由于第三方开发商的问题，应用程序“iColoring Star”暂时不可用。我们正在调查情况，对给您带来的不便深表歉意。*

我们发现 url 部分 "ref=ts" 导致上述问题，但真的不知道为什么？

**你能解释一下为什么以及如何解决这个问题吗？** 非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:39:14.667

`ref`当请求路径中提供参数时，听起来您的代码失败了。访问您的应用程序时，我能够使用 ref 参数中的任意值来重现它

*   检查您的服务器日志，看看您是否在请求进入时向 facebook 返回 500 错误
*   查看是否有任何代码可以解析`ref`参数并检查它没有抛出异常
*   确保您的应用设置中的回调 URL 也未指定`ref`参数，否则您的应用可能会收到两个值和/或完全失败

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:38:00.743

这意味着“热门搜索”。用户在搜索顶部输入查询。

有一些 ref 参数.. ref=bookmarks 例如。我不知道完整的清单。

你把你的应用放在 Facebook 应用中心了吗？

# c# - Telerik 网格日期列日期减一天

> ID：11139269
> 
> 赞同：0
> 
> 时间：2012-06-21T13:28:39.373
> 
> 标签：c#, asp.net-mvc-3, datetime, telerik-grid

我有一个 Telerik 网格，其中有一列显示用户的 DateOfBirth。下面是我的 Telerik Grid 专栏的部分代码：

```
columns.Bound(c => c.DOB).Title("DateofBirth").Format("{0:MM/dd/yyyy}"); 
```

因为我必须在 UI 上显示日期部分，所以我`.Date`从模型返回，如下所示：

```
public DateTime? DOB
    {
        get
        {
            if (DateOfBirth > DateTime.MinValue)
                return DateOfBirth.Date;
            else
                return null;
        }
    } 
```

其中 DateOfBirth 是我从具有日期和时间格式的数据库中获取的日期。问题是我在某些情况下会提前一天看到日期，但并非总是如此。这可能是什么原因？

例如，如果从 DB 返回的日期是，`06/21/2012 12:00:00 PM`那么我将其作为`06/20/2012`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:21:37.650

它可能与特定于文化的日期时间有关。您是否使用不同的文化。例如，我遇到了数据库是通用时间的情况，我必须解析日期以获取我的特定文化。

几个小时的更改最终将日期更改为不同的一天。

这是示例用法：http: [//msdn.microsoft.com/en-us/library/ey1cdcx8](http://msdn.microsoft.com/en-us/library/ey1cdcx8)

代码示例：

```
DateTime date = DateTime.Parse(dbvalue, null, System.Globalization.DateTimeStyles.AdjustToUniversal); 
```

或 System.Globalization.DateTimeStyles.AssumeLocal 到本地。

# c# - MVC 3 直接调用Controller方法还要调用ActionFilterAttribute？

> ID：11139273
> 
> 赞同：0
> 
> 时间：2012-06-21T13:28:46.980
> 
> 标签：c#, asp.net-mvc-3

当您直接调用控制器方法时，您将如何调用 ActionFilterAttribute？想象一下：

```
public class ApiController : Controller {

    public ActionResult CallSomething() {
         return IsCalled();
    }

    [MyAction]
    public ActionResult IsCalled() {
         return View();
    }
} 
```

因此请求进入`/Api/CallSomething`，CallSomething() 方法在内部调用另一个方法（在本例中为 IsCalled()），但是当调用该方法时，ActionFilterAttribute 被调用并运行。

目前 ActionFilterAttribute 只有在它是原始请求的一部分时才会被调用，这是有道理的，因为它是整个 MVC 生命周期的一部分，我所做的只是直接调用一个方法，我需要做一个 RedirectToAction如果我想让它被 MVC 解雇。RedirectToAction 会更改 URL，因此这不适合我的目的。

我已经查看了 System.Web.Mvc 代码，但看不到它是如何或何时被调用的。我认为如果它可以做到，那么我也可以使用反射。在这种情况下，视图不相关，因为我重写了 ExecuteResult() 以将我自己的内容写入 http 响应。

无论如何，我已经让自己接受了这可能是不可能的，但我只是认为这值得一试。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:31:50.837

没有实际正确的方法可以实现这一目标。所以不要试图这样做。控制器操作不应像您的示例中那样称呼自己。在这种情况下使用重定向。或者，如果您不希望重定向，请让客户端将请求直接发送到第二个操作。

哦，如果您在想要重用的那些控制器操作之间有一些共同的功能，只需将此功能外部化到其他层。在 ASP.NET MVC 3 中提供通用功能的方法有很多种，具体取决于具体场景。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:58:28.390

做你所说的最简单的方法就是把你想要作为过滤器和临时执行的功能分解出来。强制过滤器在不应该执行的地方执行是没有意义的。但是想要调用过滤器的某些部分可能是有意义的。最简单的方法是使用普通的旧静态方法：

```
public class ApiController : Controller {

    public ActionResult CallSomething() {
         MyActionFilter.CommonStaticMethodThatIsAlsoUsedInTheNormalFilter();
         return IsCalled();
    }

    [MyActionFilter]
    public ActionResult IsCalled() {
         return View();
    }
} 
```

您应该更具体地了解您要实现的目标，框架的其他功能可能更适合。

# windows-7 - 批处理行未正确显示

> ID：11139274
> 
> 赞同：0
> 
> 时间：2012-06-21T13:28:51.213
> 
> 标签：windows-7, batch-file, cmd

试图在我的批处理文件中添加一些行╔═╬。我遇到的问题是它们没有在 CMD 中正确显示。

我正在使用 Windows 7 专业版。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:39:08.637

更改您的代码页，也许？在您的 bat 文件中，发出[chcp 437](http://en.wikipedia.org/wiki/Code_page_437)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-11T07:25:37.923

我必须使用 CHCP 65001 才能让角色正常工作。

# iphone - 如何在 iPhone 的 UIWebView 上打开 .xlsx 文件？

> ID：11139284
> 
> 赞同：0
> 
> 时间：2012-06-21T13:29:34.607
> 
> 标签：iphone, objective-c, uiwebview, xlsx

是否可以在 .xlsx 上打开文件`UIWebView`。我无法在 .xlsx 上打开 .xlsx 文件`UIWebView`。打开 .xlsx 文件时，我收到以下错误消息。

> 无法读取文档。读取文档时发生错误。

当我打开 .xls、.doc、.txt 和 .pdf 等剩余文件类型时，我没有遇到任何问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-03-30T12:12:30.877

您可以打开 .xlsx

```
[webView loadData:urlData MIMEType:@"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet" textEncodingName:@"utf-8" baseURL:nil]; 
```

迅速

```
webView.load(urlData, mimeType: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", textEncodingName: "utf-8", baseURL: nil) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-01-31T06:00:40.120

解决此问题的一种方法是通过将内容嵌入到 html 中来使用 html 的强大功能。

```
func loadDataContent(data:Data,mimeType:String) {
    let htmlContent = "<iframe width=\"100%\" height=\"100%\" src=\"data:\(mimeType);base64,\(data.base64EncodedString())\"></iframe>"
    webBrowser?.loadHTMLString(htmlContent, baseURL: nil)
} 
```

-

对于 Microsoft Excel 文件，您可以执行以下操作：

.xlsx 扩展名：

```
loadDataContent(data: data, mimeType: "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet") 
```

.xls 扩展名：

```
loadDataContent(data: data, mimeType: "application/vnd.ms-excel") 
```

参考其他 mime 类型： [https ://fileext.com/faq/office_mime_types.html](https://filext.com/faq/office_mime_types.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:38:51.773

.xlsx 无法在 UIWebView 中打开，您可以使用 .xls - 它可以正常工作。

# c# - 在复选框检查时更新更新面板（具有客户端事件并且在其他更新面板中）

> ID：11139286
> 
> 赞同：1
> 
> 时间：2012-06-21T13:29:40.350
> 
> 标签：c#, asp.net

我在 asp.net 应用程序中工作。我有一个复选框和三个文本框`updatepanel`。我有另一个更新面板。我正在使用 Jquery 隐藏显示文本框。我想在第一个 updatepanel 的复选框选中/取消选中（已经有客户端事件）时更新第二个 updatepanel 内容我该怎么做？

我不想使用`__doPostBack('__Page', 'MyCustomArgument');`，因为它会回发整个页面。

请建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:35:02.420

我可能误解了您的要求，但您始终可以强制第二个更新面板从后面的代码中刷新

```
SecondPanelId.Update(); 
```

我当然可以错过一些东西

要从 javscript 强制更新，我会尝试

```
function forceAJAXPostback()
{
    var prm = Sys.WebForms.PageRequestManager.getInstance(); 
    prm._doPostBack('btnIntheUpdatePanel','');
} 
```

我知道您说没有`_doPostBack`- 但因为您在更新面板中指定按钮，它应该执行您需要的部分回发。如果没有按钮，则放一个按钮并用 css 隐藏它，即`display:none`

这是对该技术的一个[很好的解释](http://encosia.com/easily-refresh-an-updatepanel-using-javascript/)。

您还需要确保在 updatepanel 标记中将该按钮指定为异步触发器

```
<asp:UpdatePanel> 
<!-- rest of panel -->
<Triggers>         
<asp:AsyncPostBackTrigger ControlID="btnIntheUpdatePanel" EventName="Click" />         
</Triggers> 
</asp:UpdatePanel> 
```

# html - 具有黑色背景的 Rally 标准报告图表

> ID：11139287
> 
> 赞同：1
> 
> 时间：2012-06-21T13:29:41.610
> 
> 标签：html, rally

我一直在使用[标准报告](http://developer.rallydev.com/help/standard-reports)来显示迭代燃尽和发布燃尽。API 使用 javascript 将它生成的图像插入到页面中。

我想把这些放在我办公室的仪表板监视器上，但它当前的颜色主题有黑色背景。

我想要黑色背景的图表。我看到了许多选项：

*   获取 API 以生成图表（可能是未记录的功能）
*   做一些基于 HTML 的颜色替换
*   获取基础数据并构建我自己的图表

以上任何一种可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:49:05.560

现在图表是服务器生成的图像，所以据我所知，没有办法传入控制背景颜色的参数或在加载后更改它。

不过很快，我们将添加基于新 Analytics 2.0 api 的新图表功能。这些将是客户端呈现的并且非常可配置，并且应该能够执行您所描述的操作。

与此同时，您应该能够通过 WSAPI 获取支持这些图表的数据。

# plugins - Sublime Text SFTP插件中文件夹和子文件夹的忽略正则表达式

> ID：11139288
> 
> 赞同：13
> 
> 时间：2012-06-21T13:29:45.683
> 
> 标签：plugins, ftp, sublimetext2, sublimetext3

我在为 Sublime Text 的[Sublime SFTP](https://wbond.net/sublime_packages/sftp)插件`ignore_regex`中使用该选项时遇到了一些麻烦。我对正则表达式不是很好，虽然我想这应该很容易

我的文件夹结构非常简单：

```
main_folder  
│
├─── css  
│    │    some other files
│    │    in the \css folder,
│    │    etc..
│    │    
│    └─── sass  
│          │    some other files
│          │    in the \sass folder,
│          │    etc..
│          │    
│          └─── sass_subfolders 
│                   some other files 
│                   in \sass_subfolders,
│                   etc..  
├─── other_folders  
│
etc... 
```

我希望`\sass`文件夹中的所有内容以及文件夹本身都被 sftp 忽略以进行上传/同步。

我也尝试过 sublime 论坛上这篇[文章](http://www.sublimetext.com/forum/viewtopic.php?f=5&t=3416&start=90)中建议的配置，指定排除 .scss 文件，但它会在保存时继续上传/同步等等..

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-21T14:32:25.120

要让 sublime sftp 忽略整个目录，请将其添加到您的 ignore_regexes 设置中，如下所示：

“/文件夹名称/”

我用它来忽略生成我的博客但不需要在远程服务器本身上的 octopress。我也忽略了服务器上保存生成的博客的目录，但它不在我的本地计算机上的同一个地方。

[插件的常见问题页面上](http://wbond.net/sublime_packages/sftp/faq#Ignore)有此提示和更多提示。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-09-28T18:18:04.207

应用接受的答案，将要忽略的文件夹添加`ignore_regexes`到`sftp-config.json`. 但是您还需要知道`ignore_regexes`第一个[wbond ref](http://wbond.net/sublime_packages/sftp/settings#setting-ignore_regexes)的默认设置。例如，如果要添加“/folder_name/”文件夹，最终数组将如下所示： `"ignore_regexes": ["\\.sublime-(project|workspace)", "sftp-config(-alt\\d?)?\\.json", "sftp-settings\\.json", "/venv/", "\\.svn", "\\.hg", "\\.git", "\\.bzr", "_darcs", "CVS", "\\.DS_Store", "Thumbs\\.db", "desktop\\.ini", "/folder_name/"],`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-21T08:59:05.557

只是用它从同步设置中删除了一些文件夹（这些是服务器上我不想要的文件夹，我只想要根级别的文件。）

"ignore_regexes": [ "\.sublime-(project|workspace)", "sftp-config(-alt\d?)?\.json", "sftp-settings\.json", "/venv/", " \.svn/"、"\.hg/"、"\.git/"、"\.bzr"、"_darcs"、"CVS"、"\.DS_Store"、"Thumbs\.db"、"桌面\ .ini","/MySQL/","/_admin/","/admin/" ],

这是我的设置，我忽略的文件夹是： MySQL _admin admin

非常有用的设置，它为我节省了下载 100 MB 的数据！

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-22T22:36:10.427

似乎您应该可以添加：

```
"ignore_regex": "(css/sass/|ignore/this/too)" 
```

# xml - 更改源文件 (.wxs) 以获得自定义安装

> ID：11139290
> 
> 赞同：0
> 
> 时间：2012-06-21T13:29:54.153
> 
> 标签：xml, wix, wix3.5

我在对话框上有一个单选按钮（我创建了自己的对话框），（我以管理员身份运行）

```
-All Admins 
```

我当前的工作：一旦我选择了这个单选按钮（所有管理员），点击下一步，系统必须检查管理员权限/以管理员身份登录。

如果是，它应该为所有管理员安装，如果不是，它应该生成一个错误对话框。

我现在知道如何生成对话框（一开始也很混乱）。

还有我为管理员安装的当前 msi，但我无法为用户安装，请告诉我如何更正。

请尽早提供帮助，因为我不知道如何进行。

谢谢

埃迪

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T16:12:17.690

问题不清楚。你的实际问题是什么？

WiX 生成 Windows Installer 包，Windows Installer 只有两种模式：

*   *对于所有用户*，或
*   *对于当前用户*。

不能为*所有*管理员安装任何应用程序。如果创建了另一个管理员帐户怎么办？如果为受限用户帐户授予管理员权限怎么办？如果您考虑域用户，情况会变得更加棘手。

因此，在您的情况下， All Admins 对应于*all users*。如果应用程序应该仅由管理员运行，则应用程序有责任向（常规）用户显示错误消息并退出。在 Vista+ 中，它还必须具有请求管理员权限的适当清单，以便它与 UAC 兼容。

阅读[单包创作](http://msdn.microsoft.com/en-us/library/dd408068.aspx)文章，了解有关如何创建可以在*每台机器*或*每用户*模式下安装的包的更多信息。**此功能在Windows Installer 5.0**中可用，即从**Windows 7**和**Windows Server 2008 R2**开始。

# c# - C# Excel 百分比转换为小数

> ID：11139292
> 
> 赞同：5
> 
> 时间：2012-06-21T13:30:01.420
> 
> 标签：c#, excel, formatting

我正在从 Excel 工作表中读取数据。一些数据是百分比值，这些值会自动转换为小数 -- 即 90% --> 0.90。我似乎找不到任何办法来防止这种情况发生。另外，不是Excel工作表字符串上的所有数据吗？那么为什么会发生数字格式化呢？

任何建议表示赞赏。

问候。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:33:32.677

百分比是 Excel 中的一种格式化工件。实际数字始终是小数（`0.9`在您的情况下）。百分比只是在工作表上*显示*您的数字的一种方式。

如果您知道一列代表百分比，则应将其乘以`100`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:33:32.923

检查 Excel 工作表 - 如果单元格的格式设置为，`Percentage`则数据仅显示为，例如：`90.0%`，但存储为`0.9`。

如果您在导入数字之前检查单元格格式，那么您可以处理所需的任何转换。

假设您使用的是 Interop.Excel ：

该`Range.NumberFormat`属性返回的格式字符串与您`Format Cells`在 Excel 对话框中使用的格式字符串相同。 `Percentage`只是一种类型的格式字符串的快捷方式，其中类型`0.00%`中的`decimal places`选定`Percentage`项只是更改格式字符串中小数点后零的数量。

![在此处输入图像描述](../Images/cefa8eef0aeb9a5c09acca164818a24e.png)

[MSDN - Range.NumberFormat](http://msdn.microsoft.com/en-us/library/microsoft.office.interop.excel.range.numberformat%28v=office.11%29.aspx)

**编辑**

如何查找一系列单元格的格式的示例：

```
Worksheet wks = new Worksheet();
String nfmt = (string)((Range)wks.Cells[1,1]).NumberFormat; 
```

Where`nfmt`将包含一个格式字符串，您可以检查该字符串`%`以确定单元格（或范围）是否已格式化为以百分比形式显示分数。请注意，`nfmt`如果`NULL`范围跨越具有不同格式字符串的单元格！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-24T12:01:23.987

```
ws.Cells[1, 1].NumberFormatLocal = XlConditionValueTypes.xlConditionValuePercent;
ws.Cells[1, 1].NumberFormat = "0,00%"; 
```

# cplex - 在 MathProg 中设置解中的初始值

> ID：11139297
> 
> 赞同：0
> 
> 时间：2012-06-21T13:30:14.013
> 
> 标签：cplex, ampl, glpk, mathprog

我正在使用 MathProg 语言和 GLPK 来解决 MIP 问题。如果我有一个“好的”启发式整数解决方案，有没有办法在 MathProg 语言中设置初始解决方案（并由 GLPK 解决）？这是 CPLEX 中的一个很棒的功能，可以大大加快求解 MIP 的速度。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T16:53:37.333

The usual way to provide initial values to the variables (initial solution) in AMPL is to use the `:=` operator:

```
var answer integer := 42; 
```

Since MathProg is a subset of AMPL this might work in MathProg as well. Alternatively, if your problem is not too big you can use a student version of AMPL available [here](http://www.ampl.com/DOWNLOADS/index.html) for free.

# ms-access - 在不使用实际表名的情况下以拆分形式引用活动表

> ID：11139302
> 
> 赞同：0
> 
> 时间：2012-06-21T13:30:41.773
> 
> 标签：ms-access, vba

我正在编写一个 Access 数据库。我有许多相同的表格。这些用于编辑我的主要联系人表中不同字段的查找列表。

例如，有一个公司字段和一个国家字段。为每个可编辑列表打开的表单与每个中的重复 vba 代码相同，因为我无法弄清楚如何从活动表单中引用活动表。

我目前用于清除表中所有是/否框的代码是：

```
Private Sub cmdClearTicks_Click()

    Dim db As Database
   ' Dim sel  As Control

    Set db = CurrentDb
    ' Clear all ticks of selected records
    db.Execute "UPDATE ContactCompany " _
        & "SET Selected = null "

    ' Update Selected Field
   Me.Requery

End Sub 
```

`ContactCompany`是表的名称。我希望能够在全局范围内设置这个子，但无法确定我应该用什么替换`ContactCompany`来引用当前打开的表格中的表格。我已经尝试过`Me.RecordSource`哪个不起作用。

我非常感谢我认为这是一个非常容易解决的问题！

肖恩在下面发布了一个很好的修复。我现在也很难包括一个过滤器并在全球范围内定义它。

```
Sub SelectFiltered(RS As String)

Dim strFilter As String
Dim strSQl As String

If InStr(RS, "FROM") Then
    RS = Mid(RS, InStr(RS, "FROM") + 5)
    If InStr(RS, " ") Then RS = Left(RS, InStr(RS, " ") - 1)
End If

strFilter = Me.Filter

If Me.FilterOn = False Then

'Select Case MsgBox("No search or filter applied.", vbCritical + vbOKOnly, "Warning")
'End Select

strSQl = "UPDATE " & RS & " " & _
"SET Selected = 1 "

Else

strSQl = "UPDATE " & RS & " " & _
"SET Selected = 1 " & _
"WHERE " & strFilter

End If

DoCmd.SetWarnings False
DoCmd.RunSQL strSQl
DoCmd.SetWarnings True

End Sub 
```

Me.filter 在全局 sub 中不起作用。肖恩 - 我相信你会在几秒钟内得到答案。再次感谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:27:38.283

你很接近使用`Me.Recordsource`

`db.Execute "UPDATE " & Me.Recordsource & " SET Selected = null "`
或者，如果您希望它作为全局函数，请传递`Me.Recordsource`给它

```
Sub ClearTicks(RS as string,StrFilter as string)

    Dim db As Database
    Set db = CurrentDb

    If InStr(RS, "FROM") Then 
        RS = Mid(RS, InStr(RS, "FROM") + 5)
        If InStr(RS, " ") Then RS = Left(RS, InStr(RS, " ") - 1)
    End If

    ' Clear all ticks of selected records
    db.Execute "UPDATE " & RS & " SET Selected = null "

    If StrFilter="" then 'no filter
    Else 'filter
    End If
End Sub 
```

你的调用函数是：

```
Private Sub cmdClearTicks_Click()
    ClearTicks Me.Recordsource,Me.Filter
    Me.Refresh
End Sub 
```

如果您想要一个更容易扩展的可重用函数方法，则使用`Me.Name`作为参数（例如`MySub Me.Name`）调用子/函数，然后在您的可重用函数中：

```
sub MySub(FrmName as string)
Forms(FrmName).Filter
Forms(FrmName).Recordsource
Forms(FrmName).AnyOtherParamater 
```

# animation - Internet Explorer 8 中的动画 svg

> ID：11139305
> 
> 赞同：0
> 
> 时间：2012-06-21T13:30:58.310
> 
> 标签：animation, svg

大家好，我需要为 svg 制作动画。它也可以在 chrome、firefox 和 safari 中完美运行，但自然不能在 Internet Explorer 上运行。这是我的代码

```
 <g>
        <path fill="none" d="M254.587,356.68
             c0-31.728,25.72-57.448,57.448-57.448c31.728,0,57.448,25.721,57.448,57.448c0,31.728-25.721,57.448-57.448,57.448
            C280.307,414.128,254.587,388.408,254.587,356.68">
            <animate id="cerchio" attributeName="stroke-dashoffset" from="0" to="0" dur="3s"
                begin="startAnimation1.click+1.0s"
                fill="freeze" keySplines="0 0 0 0" calcMode="linear"/>
        </path>
    </g> 
```

我尝试使用[svgweb](http://code.google.com/p/svgweb/)，但它似乎不适用于**stroke-dashoffset**属性名。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:34:47.343

IE9 支持 SVG。对 IE8 及以下版本使用[**VML**](http://www.w3.org/TR/NOTE-VML)。

要检查您的浏览器是否支持 SVG 或 VML，请查看**[此](https://stackoverflow.com/a/654516/653211)**答案。

# c# - Oracle 多个会话

> ID：11139308
> 
> 赞同：0
> 
> 时间：2012-06-21T13:31:03.763
> 
> 标签：c#, oracle11g

我使用 c# 语言创建了服务，它工作正常，但数据库会话存在问题。登录时应创建一次会话，并应保持相同的会话，直到应用程序未关闭或服务未停止。但在我的情况下，在登录时创建了一个会话，但在整个过程中没有维护相同的会话，正在创建新的会话，这不应该发生。它应该在登录时创建一个会话，并且应该使用同一个会话，直到应用程序没有关闭。它为同一数据库连接创建新会话而不使用已创建的会话的原因可能是什么。事件我已经关闭并仔细处理了数据库连接对象。我不希望创建会话。尽快回复，因为它减慢了服务器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:36:33.947

为什么会有这样的限制？

自从它的网站; 在这种情况下，每个请求都由一个线程提供服务，您可能希望将连接设为单例，但最佳做法是：完成工作后关闭连接。并且汇集也会有帮助。

一个想法：如果启用连接池并将 max poolsize 设置为 1 会怎样。我附近没有任何 Oracle Db。但我想值得一试。

看看这个 SO 问题：

[将连接存储在静态类 (ASP.NET)](https://stackoverflow.com/questions/2383551/storing-connection-in-a-static-class-asp-net)

[在 ASP.NET 网站中使用单例进行连接是个好主意](https://stackoverflow.com/questions/1557592/is-using-a-singleton-for-the-connection-a-good-idea-in-asp-net-website)

[同时在多个方法之间共享单个数据库连接](https://stackoverflow.com/questions/2222131/sharing-single-database-connection-between-several-methods-simultaneously)

# java - Apache无需下载即可获取文件日期

> ID：11139312
> 
> 赞同：0
> 
> 时间：2012-06-21T13:31:27.890
> 
> 标签：java, apache, http, ctime

我目前正在写一些更新投票的东西。我尽量避免为此编写一个简单的 REST 接口（我们使用了很多 REST，但我仍然不确定这里是否有必要。为什么要为已经存在的功能编写接口？）

我的想法是打开一个 HttpUrlConnection 并检查文件的最后修改日期的标题。Apache 显然以 UTC 格式发送“最后修改”日期。检查标题后，我将关闭连接而不实际检索正文。我只担心这可能会在 Apache 日志中带来错误，这会很不方便。我只是想征求你的意见。你认为这可能行得通吗？更好的想法？

（我需要系统代理支持，所以我唯一的选择似乎是 HttpUrlConnection。）

问候， 史蒂夫

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:35:11.743

如果您查看 HTTP 协议，您会发现它有一个`HEAD`请求，可以满足您的需要。Java 运行时中 HTTP 请求的默认设置是`GET`，并且要更改它并不容易。

查看[HttpClient](https://hc.apache.org/httpclient-3.x/)以了解允许您发送任何类型的请求的框架。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:35:21.900

你几乎是对的，但你的任务比你解释的更简单。有一个名为 HEAD 的特殊 HTTP 方法。您只需创建检索数据所需的相同请求，但使用 HEAD 而不是 GET

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:35:26.780

这听起来很像，`HEAD`HTTP 中的方法是干什么用的。

引用自[维基百科](http://en.wikipedia.org/wiki/HEAD_%28HTTP%29#Request_methods)：

> **HEAD** 请求与对应于 GET 请求的响应相同的响应，但没有响应主体。这对于检索写入响应标头中的元信息很有用，而无需传输整个内容。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T13:36:20.840

尝试只发送一个 http HEAD 请求。见这里：[http ://blog.mostof.it/what-is-a-http-head-request-good-for-some-uses/](http://blog.mostof.it/what-is-a-http-head-request-good-for-some-uses/)

[http://www.grumet.net/weblog/archives/http-head-example.html](http://www.grumet.net/weblog/archives/http-head-example.html)

# r - R2HTML 无法打开连接

> ID：11139315
> 
> 赞同：1
> 
> 时间：2012-06-21T13:31:38.850
> 
> 标签：r

我正在生成一个重复的 HTML 报告，显示用 R 计算的表格和图形。我正在使用 R2HTML 包中的函数，嵌入在 for 循环中。我在我的机器上没有管理员权限。在计算的某个时刻，我有时会收到以下错误：

> 文件错误（文件，ifelse（追加，“a”，“w”））：无法打开连接另外：警告消息：在文件（文件，ifelse（追加，“a”，“w”））：不能打开文件“P:/My Documents/R/test.html”：权限被拒绝

这不会在每次运行时发生，也不会在代码中的同一点发生。当我尝试运行以下简单代码时，我会遇到同样的错误：

```
require( R2HTML)

.HTML.file = file.path( 'P:/My Documents/R' , 'test.html' )  
# To set the access path to the HTML file  that will be created

cat(paste("<html><head><title>", 'test.html', "</title></head>", sep = ""), file = .HTML.file , append = FALSE ) 
# To create and initiate the HTML file

for( i in 1:100 )
{
    HTML('Test')
}
# To write the same line to the HTML file repeteadly 
```

大多数时候这个循环可以毫无问题地运行，但有时它会产生上述错误（有时在循环开始，有时在结束）。有人知道这是什么原因吗？我在 Windows xp pro 机器上使用 R-2.15.0。如果有人可以帮助我解决这个问题，我将非常感激。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-28T10:08:24.247

正如 Andrie 在评论中所建议的那样，解决方案是在字符串对象中捕获 R2HTML 函数的输出，并在循环后仅使用一次对 HTML 函数的调用来创建 HTML 文件。

# asp.net - 如何在 linq 中加入两个表？使用 WCF 数据服务

> ID：11139326
> 
> 赞同：1
> 
> 时间：2012-06-21T13:32:14.210
> 
> 标签：asp.net, linq, entity-framework, wcf-data-services

我想在我的一个 linq 查询中加入两个表。我写了一个代码，但它给了我一个如下所示的错误

```
The method 'Join' is not supported. 
```

我试过这段代码：

```
var query = (from ls in this.testEntities.abc
                     join itm in this.testEntities.edf on ls.ID equals itm.ID
                     where itm.val == param
                     select new
                     {
                       ls.Name,
                       ls.Contact
                     }).ToList(); 
```

我错过了什么吗？如果有人对此有任何想法，请帮助我...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T21:36:09.873

WCF 数据服务能够基于实体数据模型直接扩展相关对象。（如果您对 EDM 不太了解，请不要担心；这对答案并不是特别重要。）由于 WCF 数据服务已经知道，例如，产品有一个类别，我可以启动LinqPad，[给它这个 URL](http://services.odata.org/%28S%28readwrite%29%29/OData/OData.svc)，然后发出如下查询：

```
Products.Expand("Category").Take(2) 
```

结果是两个产品，每个产品都有一个类别类型的属性。

抱歉，我不太确定在其他 LINQ 语法中转换为什么。

HTH，马克

# ssis - 如何从我的目标表中删除额外的记录，同时从 sql 数据库中提取数据？

> ID：11139329
> 
> 赞同：0
> 
> 时间：2012-06-21T13:32:17.040
> 
> 标签：ssis

我必须将数据从 SQL 数据库表中提取到我的 DB2 表中。如果记录已经存在 UPDATE，对于新记录 INSERT，对于目标表中的额外记录 DELETE 那些额外的记录。目标表看起来与源表完全相同。对于 INSERT/UPDATE 我很好，如何从 dest 表中删除？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:34:37.563

如果您想要的只是源表的副本......然后避免复杂性并首先完全删除目标 - 那么一切都只是一个插入。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:38:45.313

DB2 有一个 MERGE 命令。这允许您编写单个 SQL 语句来根据您定义的条件执行 INSERT、UPDATE 和 DELETE。这是一种非常干净的方法。

因此，您要做的是将“执行 SQL 任务”元素添加到您的 SSIS 包中，并将 DB2 合并语句添加到任务中。

请参阅此链接（底部是示例） - [http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc% 2Fr0010873.htm](http://publib.boulder.ibm.com/infocenter/db2luw/v9/index.jsp?topic=%2Fcom.ibm.db2.udb.admin.doc%2Fdoc%2Fr0010873.htm)

# python - Python加入一个整数列表

> ID：11139330
> 
> 赞同：27
> 
> 时间：2012-06-21T13:32:17.360
> 
> 标签：python

我正在尝试从以下位置获取数字列表：

```
numbers= 1,2 
```

到：

```
'1','2' 
```

我试过`",".join(str(n) for n in numbers)`了，但它不会给出目标格式。

* * *

## 回答 #1

> 赞同：80
> 
> 时间：2012-06-21T13:34:34.153

那个怎么样？

```
>>> numbers=1,2
>>> numbers
(1, 2)
>>> map(str, numbers)
['1', '2']
>>> ",".join(map(str, numbers))
'1,2' 
```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2012-06-21T13:34:40.910

```
>>> numbers = 1,2
>>> print ",".join("'{0}'".format(n) for n in numbers)
'1','2' 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2012-06-21T13:34:32.033

用这个：

```
>>> numbers = [1, 2]
>>> ",".join(repr(str(n)) for n in numbers)
'1','2' 
```

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2012-06-21T13:35:35.793

你的回答给出了什么？

```
>>> print ",".join(str(n) for n in numbers) 
1,2 
```

如果你真的想要`'1','2'`那么做

```
>>> print ",".join("'%d'" % n for n in numbers)
'1','2' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-24T06:03:14.723

对我来说，最简单的方法是......假设你有数字列表：

```
nums = [1,2,3,4,5] 
```

然后，您只需通过像这样迭代它们将它们转换为单行中的字符串列表：

```
str_nums = [str(x) for x in nums] 
```

现在您有了字符串列表，您可以将它们用作列表或将它们加入字符串：

```
",".join(str_nums) 
```

简单的 ：-）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-01-28T20:43:42.753

这是一个小技巧。虽然不是*那么*老套，但它不太可能被比特腐烂，因为 JSON 是如此普遍。

```
import json
numbers = [1,2,3]
json.dumps(numbers, separators=(",",":"))[1:-1]
'1,2,3' 
```

如果你对一些空格没问题，你可以把它缩短到

```
import json
numbers = [1,2,3]
json.dumps(numbers)[1:-1]
'1, 2, 3' 
```

# java - 在Java中对数字求和

> ID：11139334
> 
> 赞同：1
> 
> 时间：2012-06-21T13:32:51.267
> 
> 标签：java

我有一堆数字。这些数字的每个数字都连接 n 次，然后求和。我必须编写函数，如果总和等于数字则返回 1，否则返回 0。

```
public static int checkConcatenatedSum(int n, int catlen) {
        char[] charArray = String.valueOf(n).toCharArray();
        int[] test = new int[charArray.length];
        String[] digit = new String[charArray.length];
        int sum = 0;
        for (int j = 0; j < charArray.length; j++){
            for(int i = 0; i < catlen; i++){
                digit[j] += charArray[j];
            }
            test[j] = Integer.parseInt(digit[j]);
            sum += test[j];
        }
        if(sum == n){
            return 1;
        }
        else return 1;
    } 
```

`digit[j]`每次都以*null*开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:35:19.210

当你初始化一个新的对象数组（String[] strs = ...）时，数组中的所有元素都将被初始化为null，但你可以遍历数组并将它们全部设置为某个值（如“”）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:36:17.390

当您创建一个数组（`String`在这种情况下）时，它的元素`null`首先是。

您需要初始化元素：

```
String[] digit = new String[charArray.length];
for (int i = 0; i < digit.length) {
  digit[i] = new String();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:40:01.837

```
for (int j = 0; j < charArray.length; j++){
    digit[j] = new String();
    for(int i = 0; i < catlen; i++){
        digit[j] += charArray[j];
    }
    test[j] = Integer.parseInt(digit[j]);
    sum += test[j];
} 
```

其他答案是正确的，但只是对现有循环的快速添加，无需创建新循环即可实现它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T14:11:33.270

另一种方法是测试 array[?] 是否为*“null”，*避免为垃圾收集器创建临时对象字符串

```
for (int j = 0; j < charArray.length; j++){
    for(int i = 0; i < catlen; i++){
       digit[i] = digit[i] == null ? charArray[j] :  digit[i] + charArray[j];
    }
    test[j] = Integer.parseInt(digit[j]);
    sum += test[j];
} 
```

**编辑** 您的第二次退货是错误的（0 次尝试）；

# ssl - 在启用 SSL 的情况下启动 Tomcat 6 时出错

> ID：11139336
> 
> 赞同：2
> 
> 时间：2012-06-21T13:32:55.823
> 
> 标签：ssl, protocols, tomcat6, http-1.1

我最近从 Godaddy 获得了 ssl 证书。我正确创建了密钥库并将以下内容放入我的 server.xml：

```
 <Connector port="8443" protocol="org.apache.coyote.Http11Protocol" SSLEnabled="true"
               maxThreads="200" scheme="https" secure="true" keystoreFile="C:\SSLCerts\mykeystore.keystore" keystorePass="password"
               clientAuth="false" sslProtocol="TLS" /> 
```

我最初有 protocol="HTTP/1.1" 但我收到一条错误消息，指出 keystoreFile 和 keystorePass 没有匹配的值。这导致了端口 8443 上的绑定错误。我运行 netstat 并确保 8443 上没有运行任何东西；做了一些谷歌搜索，发现可以解决该问题以更改上面的协议。

添加该更改后，我收到以下错误：

```
SEVERE: Failed to start connector [Connector[org.apache.coyote.Http11Protocol-84
43]]
LifecycleException:  service.getName(): "Catalina";  Protocol handler start fail
ed: java.lang.NullPointerException
        at org.apache.catalina.connector.Connector.start(Connector.java:1102)
        at org.apache.catalina.core.StandardService.start(StandardService.java:5
40)
        at org.apache.catalina.core.StandardServer.start(StandardServer.java:754
)
        at org.apache.catalina.startup.Catalina.start(Catalina.java:595)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.
java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAcces
sorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.catalina.startup.Bootstrap.start(Bootstrap.java:289)
        at org.apache.catalina.startup.Bootstrap.main(Bootstrap.java:414)
Jun 21, 2012 1:23:57 PM org.apache.coyote.ajp.AjpAprProtocol start 
```

有谁知道需要做什么才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T22:16:44.493

`protocol="org.apache.coyote.Http11Protocol"`不是有效的协议。你想要`protocol="org.apache.coyote.http11.Http11Protocol"`。请注意您缺少的额外 http11 包。

这可能会让您回到密钥库的问题。

# wordpress - wordpress onclick AJAX 加载具有特定自定义字段的特定帖子类型

> ID：11139339
> 
> 赞同：0
> 
> 时间：2012-06-21T13:33:04.210
> 
> 标签：wordpress, custom-post-type

这是我在为大量问题寻求帮助后在 stackoverflow 上的第一篇文章 - 到目前为止谢谢。

我正在 Wordpress 3.0.4 中构建一个 wordpress 主题。

有一个导航：首页 | 喜剧 | 科幻 | 行动 | 艺术馆

我已经设置了一些自定义帖子类型，例如“评论”。

分类学 = 电影

slugs = 喜剧、科幻、动作、艺术

我还添加了在每个帖子中激活自定义字段“功能”的可能性。

在前端起始页上显示来自自定义帖子类型“评论”的所有帖子。

现在有一个“特色”按钮 - 当看到访问者点击该按钮时，只会显示带有自定义字段“特色”的帖子。

内容应使用 AJAX 加载。

我知道如何使用 AJAX 从 wordpress 中的另一个页面加载内容。

例如：我正在使用：

```
 <script type="text/javascript">
    $(document).ready(function(){
    $.ajaxSetup({cache:false});
    $("#featured a").click(function(){

        var post_id = $(this).attr("rel")
        $(".wrapper").html("loading...");
        $(".wrapper").load(jQuery(this).attr("href") + " .wrapper")
        return false;
    });
});
</script> 
```

因此，当有人单击“精选”按钮时，ajax 会从另一个页面加载 .wrapper 部分：

```
<?php 
 query_posts( array( 
    'post_type' => 'reviews',
    'taxonomy'  => 'films',

    'meta_key' => 'featured', 
    'meta_value' => 'yes', 
    'posts_per_page' => 10 
  )); 
?> 
```

所以查询是一种“假过滤”。但这仅适用于一种蛞蝓/类别，例如“艺术馆”，而不是动态的。

当访问者转到特定页面时，例如“arthouse” - 只有自定义帖子类型电影的帖子才会显示为“arthouse”。

使用此查询：

```
<?php query_posts('films=arthouse'); ?> 
```

现在的问题：我怎样才能让wordpress理解，“onclick”特色按钮只有“特色”=“是”的帖子才会显示在“艺术馆”内？

我可以使用一些js过滤器吗？获取处理程序？或者什么是正确的方法？

我真的很感激一些帮助！

谢谢你！

广告

* * *

但是，我怎样才能通过点击来完成某些事情呢？

有没有办法让 jquery 处理 php 查询？

我知道如何在这篇文章中查询具有多个分类的帖子：[https ://wordpress.stackexchange.com/questions/7107/how-to-filter-custom-posts-by-tags-and-custom-fields](https://wordpress.stackexchange.com/questions/7107/how-to-filter-custom-posts-by-tags-and-custom-fields)

但我怎么能用 ajax 做到这一点 - 没有 pagereload？以某种方式像这样：

[http://www.wpthemetoolset.com/filterable/#all](http://www.wpthemetoolset.com/filterable/#all)

非常感谢您！！！

广告

# javascript - Backbone.js 同步覆盖并保存成功/错误回调

> ID：11139340
> 
> 赞同：0
> 
> 时间：2012-06-21T13:33:05.573
> 
> 标签：javascript, jquery, backbone.js

我正在覆盖`Backbone.sync`模型，以便在满足某些条件时可以将调用发送到适当的 URL。如何像我一样触发成功或错误回调`.save`？向我的模型添加`save`方法不起作用，因为它似乎对新 URL 犹豫不决。

下面的代码示例（咖啡脚本）：

```
 sync: (method, model, options) ->
    if options.changes.approval is true
      options.url = @approvalUrl()
    else if options.changes.decline is true
      options.url = @declineUrl()
    else
      return false
    Backbone.sync method, model, options 
```

成功后，我想触发以下触发器，通常我可以使用`success: (model, response)`，但无法在这里工作

```
jQuery(".user-line-item-summary").trigger "approveSucceeded", [@get("id"), msg, false] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T23:59:05.397

我认为您想在骨干模型本身上触发。看一眼：

[http://backbonejs.org/#trigger](http://backbonejs.org/#Events-trigger)

# scala - 使用 SBT 管理自定义客户端构建

> ID：11139341
> 
> 赞同：2
> 
> 时间：2012-06-21T13:33:11.687
> 
> 标签：scala, sbt, custom-build

我们有一个可通过模块扩展的应用程序。（多项目）SBT 构建生成易于部署的分发工件。

客户端的一些自定义部署确实需要特定模块作为构建的一部分（换句话说，一组额外的依赖项）。我想知道创建此类自定义构建的最佳方法是什么 - 换句话说，是否有办法扩展主构建并仅添加这些依赖项？

现在我正在考虑以下方法：

*   将主要应用程序打包（作为 ZIP）并发布
*   在自定义构建中，获取 ZIP 文件，解压缩它，神奇地添加额外的 JAR 依赖项，然后再次压缩工件（“神奇地”，因为我不知道如何访问构建中指定的所有 JAR 依赖项）

但也许有更优雅的方式吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-08-03T17:42:44.300

我认为在依赖它的主要项目旁边声明一个新的子项目会更容易。

```
lazy val extra: Project = Project("extra", file("extra")) dependsOn(mainProject) settings(Seq(...)) 
```

然后在该包上，您可以声明额外的依赖项。当你打包这个额外的项目时，一切都应该自动进入包中。

# batch-file - 使用批处理提取引号之间的字符串

> ID：11139345
> 
> 赞同：1
> 
> 时间：2012-06-21T13:33:18.070
> 
> 标签：batch-file

我有“input.txt”，我想搜索一个字符串并在引号之间提取一个字符串，我的 input.txt 只有 2 行：

```
name=' james carter'  nationality = ' usa '  age=32
name='fabio    rossi'  nationality = ' italia - milano '  age=19 
```

我希望批处理从引号中提取名称（带空格）并将它们放入变量中（在这种情况下只需要两个变量）。例如我想设置两个变量：

```
name= james carter
name=fabio    rossi 
```

所以我可以批量使用这些变量来做一些未来的操作。

附言。如有必要，可以使用 sed

**编辑**

这似乎是不可能的，所以我想知道是否可以只使用保留引号的字符串，就像这样

```
name1=' james carter'
name2='fabio    rossi' 
```

所以现在的问题是，采取什么开始`name='`和结束`'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:53:46.923

你可以试试这个：

```
@echo off
setlocal enabledelayedexpansion
set "INPUT_FILE=input.txt"
set "SED_CMD=sed "s/name='\(.[^^']*\)'.*/\1/""
set i=0
for /f "usebackq tokens=*" %%a in (`findstr "name=" %INPUT_FILE%`) do (
    set /a i+=1
    for /f "usebackq tokens=*" %%v in (`echo %%a ^| %SED_CMD%`) do (
        echo %%v
    )
) 
```

然后，您将使用所需的值枚举变量 ( `name1`, `name2`) 等。
请注意，这适用于具有指定形式（*ie* `name='something' blah blah`）的任何行。

**编辑**：修改代码以丢弃不包含字符串的行`name=`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T16:57:52.390

如果感兴趣的每一行的格式始终相同，以 开头`name='`，那么本机批处理解决方案很简单：

```
@echo off
setlocal
set input="test.txt"
for /f "tokens=1,3 delims=:'" %%A in (
  'findstr /b /c:"name='" %input% ^| findstr /n "^"'
) do set "name%%A=%%B" 
```

此解决方案假定名称值从不包含该`:`字符。

# c++ - 谷歌测试返回值

> ID：11139349
> 
> 赞同：0
> 
> 时间：2012-06-21T13:33:37.927
> 
> 标签：c++, googletest, googlemock

我正在使用 Google Test 和 Google Mock 框架进行项目的单元测试。我有各种单元测试项目，并希望自动化我的构建以便运行所有这些项目。

我期望单元测试可执行文件在成功时返回 0，在任何测试失败时返回 1（或任何其他值），但是当所有测试通过时我得到 1。我收到了一些 GMOCK 警告，但找不到任何有关影响返回值的警告的文档。

我尝试运行测试过滤以仅运行一个测试用例，其中没有触发 GMOCK 警告并且仍然获得 1 作为返回值。

我有几个 DISABLED 测试用例，所以我将它们注释掉。仍然得到 1 作为返回值。

根据`RUN_ALL_TESTS`宏的文档和代码注释，返回值应为 0。

我想不出其他任何导致返回值 1 的东西。我错过了什么吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T14:49:10.743

如果您查看`RUN_ALL_TESTS()`gtest.h 中的宏定义，则清楚地表明在没有失败时返回 0：

```
// Use this macro in main() to run all tests.  It returns 0 if all
// tests are successful, or 1 otherwise.
//
// RUN_ALL_TESTS() should be invoked after the command line has been
// parsed by InitGoogleTest().

#define RUN_ALL_TESTS()\
  (::testing::UnitTest::GetInstance()->Run()) 
```

显然，即使是警告（来自 gmock）也可能导致返回值 1。尝试如果您摆脱 gmock 警告会发生什么（例如，使用诸如 NiceMock<> 之类的东西来包装您的模拟类实例）。

# sql - SQL查询从具有Null值的表中找出最大数

> ID：11139354
> 
> 赞同：0
> 
> 时间：2012-06-21T13:33:57.430
> 
> 标签：sql, sql-server

我怎样才能解决这个要求。请帮忙。

客户表 - **CT**

```
ClientID      Balance  
123             10
123             20  
123             30
123             40  
124             50
124             60  
124             Null 
```

我想从 CT 表中找到我们的最大值（余额）。
条件 - > 如果没有空值，那么我必须找出 max(Balance) 否则它应该是 Null。请参阅下面的结果，这是我所期待的。

```
ClientID     Balance  
123           40  
124           Null 
```

我正在编写如下查询。但是有没有更动态的方法呢？

```
Select ClientID,  
       CASE WHEN MIN(Balance) = NULL THEN  
                 NULL  
             ELSE  
                 MAX(Balance) END AS 'MaxBalance'  
From CT  
Group by clientID 
```

请告诉我，还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:42:52.973

尝试这个：

```
Select ClientID,
       (CASE WHEN count(balance) < count(*)
             THEN NULL 
             ELSE MAX(Balance)
        END) AS MaxBalance
From CT
Group by clientID 
```

或者，更麻烦一点，但也许更清楚：

```
Select ClientID,
       (CASE WHEN sum(case when balance is null then 1 else 0 end) > 0
             THEN NULL 
             ELSE MAX(Balance)
        END) AS MaxBalance
From CT
Group by clientID 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:46:51.953

怎么样：

```
SELECT clientid
    , balance
FROM 
    ( 

        SELECT clientid
            , balance
            , row_number()
                over(   partition by clientid
                    order by CASE WHEN balance IS NULL THEN 0 ELSE 1 END
                        , balance DESC
                ) r
        FROM ct
    ) n 
WHERE r = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T14:05:28.353

我不确定 [Balance] 是什么数据类型，但如果它是 int，您可以执行以下操作：

```
Select ClientID, NULLIF(MAX(ISNULL(Balance,2147483647)),2147483647)
From CT 
GROUP BY ClientID 
```

如果 [Balance] 不是 int，只需替换`2147483647`为该数据类型的最大值即可。

当然，危险是如果您*确实*有一个余额为 2147483647 的客户。在这种情况下，他们的最大余额将显示为空。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:57:19.057

这有效，但不是很优雅：

```
SELECT SUB.ClientID, CASE (SELECT COUNT(ClientID) 
                           FROM MyTable MT 
                           WHERE Balance IS NULL 
                           AND MT.ClientID = SUB.ClientID)
                    WHEN 0 THEN (SELECT MAX(Balance) 
                                 FROM MyTable MT 
                                 WHERE MT.ClientID = SUB.ClientID)
                    ELSE NULL END AS Balance
FROM (SELECT ClientID 
      FROM [MyTable] 
      GROUP BY ClientID) SUB 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T13:49:30.440

这将适用于 SQL 2005+

```
; WITH a AS (       
SELECT DISTINCT ClientID
FROM CT 
WHERE Balance IS NULL   )     

SELECT t.ClientID, MAX(t.Balance) "MaxBalance"
FROM CT t
    LEFT JOIN a ON t.CLientID = a.ClientID
WHERE a.ClientID IS NULL
GROUP BY t.CLientID
UNION ALL
SELECT a.ClientID, NULL
FROM a 
```

# python - Pyramid：如何创建使用自定义调度程序？

> ID：11139358
> 
> 赞同：0
> 
> 时间：2012-06-21T13:34:09.270
> 
> 标签：python, python-2.7, pyramid

除了将发送到视图的根 url 请求之外，我还想要一个调度程序，我将根据我的自定义调度程序规则将所有请求路由到我将选择的不同视图。

如何创建调度程序？我一遍又一遍地阅读文档，但我无法弄清楚。

我想解析 url 的 *remainder，然后相应地发送请求。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:47:35.030

Pyramid 会将请求分派到通过`add_view`或注册的视图`view_config`。如果您想再次将其分派给您自己的代码，请记住，从 Pyramid 的角度来看，将使用在原始视图上定义的渲染器/权限......所以不要使用这些。该请求有效地进入您的 Pyramid 视图，然后您有自己的迷你框架将从那里处理它。

我建议考虑如何在 Pyramid 视图的上下文中调度事物，例如，该`pyramid_rpc`包根据 RPC 请求正文中的内容（不仅仅是 URL）做了一些很酷的事情来调度视图。[请参阅add_jsonrpc_method](https://github.com/Pylons/pyramid_rpc/blob/master/pyramid_rpc/jsonrpc.py#L216)中的自定义谓词以了解我在说什么。

无论如何，假设您仍然想做自己的事情，您所要做的就是在 Pyramid 中为您想要的任何模式注册一个视图。

```
config.add_route('my_framework', '/foo/{the_rest:.*}')

@view_config(route_name='my_framework')
def my_framework_view(request):
    url = request.matchdict['the_rest']
    # do your frameworky stuff here
    if url == 'foo/bar':
        return some_other_view(request)
    return HTTPNotFound() 
```

无论如何，应该清楚的是，这是一个框架之上的框架，并且在很多情况下可能是代码异味。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T22:09:38.590

这实际上取决于结构或您的 URL 和您的“自定义调度程序规则”，但在许多情况下，您可以使用 URL 遍历而不是 URL 调度来实现您想要的。由于 URL 遍历使用`__getitem__`父资源的方法，您可以在其中编写普通的 Python 代码，它可以让您更灵活。

示例：假设您有以下 URL：

```
/food/banana
/food/potato
/food/tomato
/food/apple 
```

你想对水果和蔬菜有不同的看法。你可以这样做：

```
class FoodResource(object):
    def __getitem__(self, name):
        if name in ["banana", "apple"]:
            return FruitResource(self, name)
        if name in ["potato", "tomato"]:
            return VegetableResource(self, name) 
```

`FruitResource`然后您可以为and注册视图`VegetableResource`：

```
@view_config(context=FruitResource):
def view_fruit(context, request):
    ...

@view_config(context=VegetableResource):
def view_vegetable(context, request):
    ... 
```

您可以为水果和蔬菜注册不同的视图集，因此`/foor/banana/make_jam`和`/food/apple/make_jam`将是仅用于水果的有效 URL，对于您将拥有的蔬菜，例如`/food/potato/make_soup`：

```
@view_config(context=FruitResource, name="make_jam"):
def view_fruit_make_jam(context, request):
    ...

@view_config(context=VegetableResource, name="make_soup"):
def view_vegetable_make_soup(context, request):
    ... 
```

然后你的`FruitResource`and`VegetableResource`可以有他们自己的`__getitem__`方法，所以你可以有可能不同的“子项”集 -`/food/banana/skin`等等`/food/banana/flesh`，他们自己的视图分配给他们 - `/food/banana/skin/peel`, `/food/banana/flesh/eat`, where`peel`和`eat`are views 注册为 imaginary `FruitSkinResource`and `FruitFleshResource`。

而且您可以对水果和蔬菜拥有自定义权限，因此访问`/food/apple/make_jam`可能需要一个权限和`/food/potato/make_soup`另一个权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:57:27.573

我认为您可以使用金字塔的事件系统[文档](http://docs.pylonsproject.org/projects/pyramid/en/1.2-branch/narr/events.html#configuring-an-event-listener-imperatively)，这看起来像 hack，但我认为这是最简单的方法。

# c++ - 为什么函数 GetOutlineTextMetrics() 为不存在的字体名称返回 0？

> ID：11139359
> 
> 赞同：0
> 
> 时间：2012-06-21T13:34:13.130
> 
> 标签：c++, winapi, fonts

我想知道 Windows 使用哪个“FamilyName”来创建具有未知名称“Blah”的字体。

如下所示，字体是正常创建的（WM_PAINT 用它来打印函数的返回值`GetOutlineTextMetric()`。

```
#include <windows.h>
#include <iostream>

LRESULT CALLBACK WndProc(HWND, UINT, UINT, LONG);

int APIENTRY WinMain (HINSTANCE hInstance, HINSTANCE hPrevInstance, LPSTR pszCmdLine, int nCmdShow)
{
    WNDCLASSEX  wndclassx;

    wndclassx.cbSize        = sizeof(WNDCLASSEX);
    wndclassx.style         = CS_HREDRAW | CS_VREDRAW;
    wndclassx.lpfnWndProc   = WndProc;
    wndclassx.cbClsExtra    = 0;
    wndclassx.cbWndExtra    = 0;
    wndclassx.hInstance     = hInstance;
    wndclassx.hIcon         = nullptr;
    wndclassx.hCursor       = LoadCursor(nullptr, IDC_ARROW);
    wndclassx.hbrBackground = (HBRUSH)(COLOR_WINDOW + 1);
    wndclassx.lpszMenuName  = nullptr;
    wndclassx.lpszClassName = L"WndProc";
    wndclassx.hIconSm       = nullptr;

    if( !RegisterClassEx(&wndclassx) ) return 0;

    HWND hWnd = CreateWindow(L"WndProc", nullptr, WS_OVERLAPPEDWINDOW | WS_VSCROLL | WS_HSCROLL, CW_USEDEFAULT,
                             CW_USEDEFAULT, CW_USEDEFAULT, CW_USEDEFAULT, nullptr, nullptr, hInstance, nullptr);

    ShowWindow(hWnd, SW_NORMAL);
    UpdateWindow(hWnd);

    MSG msg;
    while( GetMessage(&msg, nullptr, 0, 0) )
    {
        TranslateMessage(&msg);
        DispatchMessage(&msg);
    }

    //  Retorna msg.wParam

    return (int)msg.wParam;
}

LRESULT CALLBACK WndProc (HWND hwnd, UINT message, UINT wParam, LONG lParam)
{
    static HFONT s_hFont;
    static int s_int = -1;
    static TEXTMETRIC s_tm;

    switch ( message )
    {
        case WM_CREATE:
        {
            HDC hDC;
            if( !(hDC = CreateIC(L"Display", nullptr, nullptr, nullptr)) ) return -1;

            LOGFONT lf;
            memset(&lf, 0, sizeof(LOGFONT));

            wcscpy_s(lf.lfFaceName, LF_FACESIZE, L"Blah");

            if( !(s_hFont = CreateFontIndirect(&lf)) )
            {
                DeleteDC(hDC);
                return -1;
            }

            s_hFont = (HFONT)SelectObject(hDC, s_hFont);
            GetTextMetrics(hDC, &s_tm);

            //   Call GetOutlineTextMetrics() with a null buffer address, to get the size of the buffer.
            s_int = GetOutlineTextMetrics(hDC, 0, nullptr);

            s_hFont = (HFONT)SelectObject(hDC, s_hFont);
            DeleteDC(hDC);
        }
        break;

        case WM_PAINT:
        {
            PAINTSTRUCT ps;
            BeginPaint(hwnd, &ps);
            s_hFont = (HFONT)SelectObject(ps.hdc, s_hFont);

            TextOut(ps.hdc, 20, 20, L"Value returned by GetOutlineTextMetrics() function", 50);

            wchar_t buffer[4];
            swprintf(buffer, 4, L"%3d", s_int);
            TextOut(ps.hdc, 20 + 55 * s_tm.tmAveCharWidth, 20, buffer, 3);
            EndPaint(hwnd, &ps);
        }
        break;

        case WM_DESTROY:
        DeleteObject(s_hFont);
        PostQuitMessage(0);
        break;

        default:
        return DefWindowProc(hwnd, message, wParam, lParam);
    }
    return 0;
} 
```

输出

![在此处输入图像描述](../Images/2d14a4f61c2f0f9aec1f87a6443d2a1d.png)

**编辑：我更正的代码中有一个错误。而不是`SelectObject(hDC, s_hFont)`in `WM_CREATE`，我应该有`s_hFont = (HFONT)SelectObject(hDC, s_hFont)`。虽然没有改变输出。但是最终的结果是一样的，就是函数GetOutlineTextMetrics()继续返回0。**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:04:18.320

我的水晶球表明选择到 DC 中的字体不是 TrueType 字体。

某些版本的 MSDN 说您可以调用`GetLastError`以找出功能失败的原因，但其他（稍后？）版本的 MSDN 已删除该语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:03:47.080

GetOutlineTextMetrics() 只能用于 TrueType 字体。问题是，你没有要一个。字体映射器没有理由用 TrueType 字体替换您的请求。

通过坚持映射器始终返回 TT 字体来解决您的问题：

```
 wcscpy_s(lf.lfFaceName, LF_FACESIZE, L"Blah");
        lf.lfOutPrecision = OUT_TT_ONLY_PRECIS; 
```

# c++ - 自动类型转换函数调用 C++

> ID：11139370
> 
> 赞同：0
> 
> 时间：2012-06-21T13:34:37.937
> 
> 标签：c++

有没有办法自动转换为某种类型：

```
class A
{ public:
  int f();
  float g();
};
r(int x){}
t(float x){}

...

r(A) //automagically call r(A.f())
t(A) //automagically call t(A,t()) 
```

有点像在打印 Java 对象时调用 toString 。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:36:02.953

**是的，您**可以为`A`.

```
class A
{ 
public:
  int f();
  float g();

  operator int() { return f(); }
  operator float() { return g(); }
}; 
```

但是你然后在一个实例上调用`r`and ：`t`

```
A a;
r(a);
t(a); 
```

这是完整的代码：http: [//ideone.com/Pfa4v](http://ideone.com/Pfa4v)

# web-applications - JSP/Servlet 中的屏幕大小

> ID：11139375
> 
> 赞同：2
> 
> 时间：2012-06-21T13:34:46.643
> 
> 标签：web-applications, servlets, mobile, screen-size

有没有办法在 Web 应用程序中获取客户端屏幕大小？我需要编写一个 Web 应用程序`JSP/Servlets`，供不同类型的客户端（我的意思是手机、iPad、笔记本电脑等）使用。我从这里阅读了更多链接，例如：

*   [在 Web 应用程序中检测设备类型](https://stackoverflow.com/questions/8515161/detecting-device-type-in-a-web-application)
*   [如何检查用户代理是 ipad 还是 iphone？](https://stackoverflow.com/questions/5155479/how-do-i-check-if-the-useragent-is-an-ipad-or-iphone)
*   [自动检测移动浏览器（通过用户代理？）](https://stackoverflow.com/questions/1005153/auto-detect-mobile-browser-via-user-agent)

但考虑到没有检测设备类型的标准方法，我开始考虑是否不是更好的解决方案来决定根据屏幕尺寸提供的页面。

所以，我的**问题**：有没有办法检测屏幕尺寸`JSP/Servlets`？

注意我还阅读了有关`CSS3`功能 - 媒体查询的信息，但我认为我需要其他东西，只要我需要手机外壳中的页面中的内容较少。我也认为根据屏幕尺寸做出决定是一个更容易的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T08:38:37.753

我想我找到了我的问题的答案。看看[这个](http://blogs.developerforce.com/developer-relations/2012/05/cross-device-html5-apps-using-visualforce.html)网络帖子，尤其是*带有屏幕尺寸和/或设备功能的客户端设备检测*段落。

# javascript - 计算数量 里面的元素

> ID：11139380
> 
> 赞同：0
> 
> 时间：2012-06-21T13:34:56.103
> 
> 标签：javascript, jquery, html

我需要知道每个中有多少`<div>`元素`<li>`。所以是这样的：

```
<ul>
   <li>
      <div> Some image 1 </div>
      <div> Some image 2 </div>
      <div> Some image 3 </div>
   </li>
   <li>
      <div> Some image 4 </div>
      <div> Some image 5 </div>
   </li>
   <li>
      <div> Some image 6 </div>
      <div> Some image 7 </div>
      <div> Some image 8 </div>
      <div> Some image 9 </div>
   </li>
</ul> 
```

函数的输出：

```
First <li> has 3 <div>
Second <li> has 2 <div>
Third <li> has 4 <div> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:36:08.117

```
var lengths = $('li').map(function(){
    return $(this).find('div').length;
}).get(); 
```

[**现场演示**](http://jsfiddle.net/TcmNH/)

**评论：**

```
// Make an array when the input for every iteration is a <li>
$('li').map(

// Every element in the array is the amount <div>s inside the current <li>
    return $(this).find('div').length;

// Produce the arry.
.get(); 
```

**如果您想轻松**制作类似于您想要的东西：

```
$('li').each(function() {
    var length = $(this).find('div').length;
    $('<div> ' + length + ' li has ' + length + 'divs </div>').appendTo('#output');
});​ 
```

[**现场演示**](http://jsfiddle.net/TcmNH/1/)

输出：

```
3 li has 3divs
2 li has 2divs
4 li has 4divs 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:36:20.353

`<li>`给定一个代表您的,的 jQuery 对象`item`，您可以通过执行以下操作找出`<div>`它包含的 s 数量：

```
item.find('div').length 
```

但是如果你想要一个具有*精确*输出的函数，你需要一个数字→英文库。或者，如果您将拥有三个，请获取您的`<ul>`身份`list`并执行以下操作：

```
var items = list.find('li');

'First <li> has ' + items.eq(0).find('div').length + ' <div>';
'Second <li> has ' + items.eq(1).find('div').length + ' <div>';
'Third <li> has ' + items.eq(2).find('div').length + ' <div>'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:37:07.130

```
$('li').each(function() {
    console.log($('div', this).length);
});​ 
```

**[jsFiddle 示例](http://jsfiddle.net/j08691/ZuSu8/)**。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T13:37:42.457

```
$('li').each(function(i){
    console.log('<li> ' + i + ' has ' + $(this).children('div').length + 'divs');
}); 
```

# c++ - regex_search 抛出 std::regex_error

> ID：11139382
> 
> 赞同：4
> 
> 时间：2012-06-21T13:35:00.337
> 
> 标签：c++, regex, gcc, c++11

```
std::cmatch res;
std::string str = "<h2>I'm a piece of text</h2>";
std::regex rx("<h(.)>([^<]+)");
std::regex_search(str.c_str(), res, rx);
std::cout << res[1] << ". " << res[2] << "\n"; 
```

这段简单的代码应该可以工作吗？对？显然它没有：

```
terminate called after throwing an instance of 'std::regex_error'
  what():  regex_error
Aborted 
```

编译器（gcc 4.7.0）错误还是我遗漏了什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:53:55.920

正则表达式中的括号似乎导致了问题。有关更多详细信息和可能的解决方法，请参阅[此 SO 线程](https://stackoverflow.com/questions/8060025/is-this-c11-regex-error-me-or-the-compiler)。

另外（来自同一个线程），gcc 版本 4.6.1 仅部分支持`std::regex`，我不知道它是否已在 4.7.0 版本中修复

# java - 可以批处理sql查询吗？

> ID：11139385
> 
> 赞同：2
> 
> 时间：2012-06-21T13:35:06.337
> 
> 标签：java, mysql, sql

我是一个新手 MySQL 用户，所以真的可以在这里使用一些建议。我继承了一个程序，该程序当前处理由大约 100,000 条记录组成的文本文件。每一行都是它自己的记录并得到处理。像这样的文件可以在大约一分钟内完成，因为没有什么需要做的，主要是字符串比较。

无论如何，现在必须将一些 SQL 查询添加到流程中，而不会太慢。从本质上讲，这 100,000 行中的每一行现在都可能需要创建一个 SQL 选择语句来查询数据库并查看是否可以访问更多数据。我拼凑了一个粗略的开始，处理时间从一分钟到大约一个小时。绝对不能接受。我的问题是，有没有办法加快速度？（我确定有）

我只打开一个连接对象，但我看不到任何方法可以为每条记录进行单独的 SQL 查询。有没有办法批量选择语句？任何建议都会非常有帮助，谢谢。

**更新**

对不起，我应该更明确一点。这适用于 SQL 选择语句。我知道如何进行批量插入，这没问题。我不明白批量选择语句是否可行或如何加快它们的速度。

另外，有人提到了索引，但我对索引一无所知。有人可以提供一些关于他们的信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:36:32.980

通过为通常出现在子句中的列`SELECT`创建[索引](http://www.w3schools.com/sql/sql_create_index.asp)来加快速度。`WHERE`

[通过将它们全部包装在一个事务](http://dev.mysql.com/doc/refman/5.0/en/commit.html)中来加速批量插入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:39:06.047

这可能是 PRE INSERT TRIGGER 代码的一个很好的用途。- 换句话说，让数据库在出现传入行时完成工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:39:51.413

如果您正在执行选择语句，则可以使用**in**关键字。

[http://www.w3schools.com/sql/sql_in.asp](http://www.w3schools.com/sql/sql_in.asp)

**SQL IN 语法**

```
SELECT column_name(s)
FROM table_name
WHERE column_name IN (value1,value2,...) 
```

# macos - Mac OS X：直接从文件/URL 打印？

> ID：11139386
> 
> 赞同：3
> 
> 时间：2012-06-21T13:35:08.707
> 
> 标签：macos, cocoa, printing

我想编写一个可以从 URL 打印页面的小实用程序，该 URL 将提供标准文件（如 pdf 或 jpg 图片），我只想从我的可可应用程序中打印它而不显示任何对话框，那可能吗？除了告诉我用文件构建视图然后打印该视图之外，我在文档中找不到任何关于此的内容，但这真的有必要吗？

任何帮助表示赞赏。

谢谢，菲利普

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T18:50:18.670

您无需显示`NSView`即可打印。
只需以`NSView`编程方式创建并将其传递给`NSPrintOperation`.

示例代码：

```
// Get Print Info
NSPrintInfo *printInfo = [NSPrintInfo sharedPrintInfo];

// Printing Text
NSRect textRect = NSMakeRect(0,0,100,50);
NSTextView *theTextView = [[NSTextView alloc] initWithFrame:textRect];
[theTextView setString: @"Hello World"];
NSPrintOperation *textPrint = [NSPrintOperation printOperationWithView:theTextView printInfo:printInfo];
[textPrint setCanSpawnSeparateThread:YES];
[textPrint runOperation];

// Printing Picture
NSImage *pic =  [[NSImage alloc] initWithContentsOfFile: @"/Users/Anne/Desktop/Sample.png"];
NSRect picRect = NSRectFromCGRect(CGRectMake(0, 0, pic.size.width, pic.size.height));
NSImageView *imageView = [[NSImageView alloc] initWithFrame:picRect];
[imageView setImage:pic];
NSPrintOperation * picPrint = [NSPrintOperation printOperationWithView:imageView printInfo:printInfo];
[picPrint setCanSpawnSeparateThread:YES];
[picPrint runOperation]; 
```

对于 PDF 文档使用`PDFView`（添加 Quartz 框架）。

您也可以考虑使用`WebView`（添加 WebKit 框架）。
WebView 支持多种格式并使格式化变得轻而易举 (HTML)。

# adobe-indesign - 如何使用 ExtendScript 将 InDesign 文档中的所有文本变为黑色？

> ID：11139387
> 
> 赞同：1
> 
> 时间：2012-06-21T13:35:10.353
> 
> 标签：adobe-indesign, extendscript

这是我的尝试：

```
function makeAllTextBlack() {
  var document = app.activeDocument,
    textFrames = document.textFrames,
    nbTextFrames = textFrames.length,
    swatch = document.swatches.item("C=100 M=100 Y=100 K=100"),
    i;
  for (i = 0; i < nbTextFrames; i +=1) {
      textFrames[i].fillColor = swatch;
  }
}

makeAllTextBlack(); 
```

在 ExtendScript Toolkit 中运行此脚本时，它抱怨为`fillColor`属性定义的值不正确，说它需要一个 Swatch 或一个字符串，但什么也没收到。我的样本有问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:48:41.313

您以这种方式获得的样本是无效的，即使您尝试通过名称（itemByName）获取它也不要问我为什么，但最好使用 Color 对象。例如，您可以这样做来创建颜色：

```
var color = document.colors.itemByName("myblack");
if(color==null){
    color = document.colors.add();
    color.name = "myblack";
    color.colorValue = [100,100,100,100];
} 
```

然后将其直接应用到 f​​illColor 属性。

（一句话， textFrames.fillColor 不会改变文本颜色，但 TextFrame 背景......我想你想迭代每个 TextFrame 上的文本并改变它们的填充颜色。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:59:47.567

使用颜色对象似乎可以解决问题：

```
function makeAllTextBlack() {
        var doc, blackColor;
        if( !app.documents.length ){ return; }

        doc = app.activeDocument;
        blackColor = doc.colors.itemByName ( "fullBlack" );
        if ( !blackColor.isValid )
        { 
            blackColor = doc.colors.add( {colorSpace:ColorSpace.CMYK, model:ColorModel.PROCESS, colorValue:[100,100,100,100], name:"fullBlack"} );
        }
        try
        {
            doc.stories.everyItem().fillColor = blackColor;
            alert("done");
        }
        catch(e)
        {
            alert(e+" "+e.line);
        }
    }

    makeAllTextBlack(); 
```

希望能帮助到你，

洛伊克

# c# - DataGridViewComboBoxColumn 值成员不断恢复为（无）[VS2010]

> ID：11139394
> 
> 赞同：0
> 
> 时间：2012-06-21T13:35:25.277
> 
> 标签：c#, vb.net, datagridviewcombobox, valuemember

我正在尝试从 VS2010 中的设计器在 DataGridView 的 ComboBox 列上设置 ValueMember 属性。

每次我设置值时，在离开单元格的那一刻，它都会恢复为（无）。

DisplayMember 属性也会发生同样的事情。

谷歌了一下，一无所获:(

![在此处输入图像描述](../Images/19650cc70c2875a36bb9615f8007a245.png)

# iphone - 如何将 html 标签应用于 Uilabel 文本

> ID：11139399
> 
> 赞同：0
> 
> 时间：2012-06-21T13:35:31.897
> 
> 标签：iphone

我正在开发一个应用程序。在那个 iam 中使用 uilabels。我的问题是我需要将 html 效果应用于该标签数据。例如，我需要将锚标记添加到该文本。然后我需要使用锚标记那个文本。所以请告诉我如何使用那个文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:39:47.520

[`UILabel`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UILabel_Class/Reference/UILabel.html)只支持纯文本。我猜你最好的床是使用[`UIWebView`](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)或直接去[`CoreText`](https://developer.apple.com/library/iOS/#documentation/StringsTextFonts/Conceptual/CoreText_Programming/Introduction/Introduction.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:02:15.727

阅读下面的评论后，您的意思是[这样](http://blog.stormyprods.com/2009/10/simple-scrolling-uilabel-for-iphone.html)的吗？您绝对不需要使用 UIWebView 来获得选取框效果。你在网上搜索过吗？使用 UILabel 可以很容易地实现许多稍微不同的效果示例。

# scalability - 使用 ZeroMQ Binary Star 与 Zookeeper 实现高可用性的优缺点是什么？

> ID：11139400
> 
> 赞同：6
> 
> 时间：2012-06-21T13:35:35.610
> 
> 标签：scalability, zeromq, high-availability, apache-zookeeper

[高可用性对-二进制-星形模式](http://zguide.zeromq.org/page:all#High-Availability-Pair-Binary-Star-Pattern)

希望在我的系统中添加高可用性主/主功能，目前正在考虑 ZeroMQ Binary Star 与 ZooKeeper。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-07-03T06:01:40.817

BStar 模式只是无数可能的模式之一，而不是“0MQ”模式。您很可能会使用运行在 0MQ 上的 Tom Cocagne 的 Paxos 实现：[https](https://github.com/cocagne/zpax) ://github.com/cocagne/zpax和[https://github.com/cocagne/paxos](https://github.com/cocagne/paxos)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-22T19:34:56.997

ZMQ 对脑裂问题的处理（两台服务器认为自己是主服务器，而一台服务器看不到另一台服务器）是有限的，并且需要共享网络连接（即使根据您提供的链接），而 ZooKeepr 的处理能力是一流的（您可以查看[他的 Stackoverflow Q&A](https://stackoverflow.com/questions/1106984/avoiding-split-brain-votes-and-quorum)以讨论 splitbrain）。ZooKeeper 也被Hadoop、HBase、Solr 等[许多主要产品采用。(l](https://cwiki.apache.org/confluence/display/ZOOKEEPER/PoweredBy)

# macos - riak os x 安装

> ID：11139407
> 
> 赞同：4
> 
> 时间：2012-06-21T13:35:52.000
> 
> 标签：macos, installation, riak

我正在尝试让 4 节点 riak 设置在我的 os x lion 机器上运行。

我安装了 riak 使用

```
$ brew install riak 
```

我正在使用可用的在线文档 - [http://wiki.basho.com/Building-a-Development-Environment.html](http://wiki.basho.com/Building-a-Development-Environment.html)

我被困在这一步——“使用钢筋启动四个节点。”

安装 riak 后，我还必须安装 rebar 吗？安装riak后我直接试了

```
$ make devrel 
```

命令，它给出了以下错误

```
make: *** No rule to make target `devrel'.  Stop. 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-29T10:12:13.137

使用 brew 安装 Riak 不会让您能够运行 4 个节点。如果您要构建开发设置，您应该从源代码构建。

我写了一个[教程](http://buffered.io/posts/webmachine-erlydtl-and-riak-part-1/)（作为[博客系列](http://buffered.io/series/web-development-with-erlang/)的一部分），展示了如何在安装 Erlang 后运行开发集群。我尚未更新它以反映 v1.1.4 中的更改，但在大多数情况下，这应该可以帮助您入门。

祝你好运。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:28:30.827

为了希望帮助其他人，比如今天的我，我发布了这个。通过运行确保正确安装了 Erlang

```
$ erl
#if ok, quit with 'q()'
1> q() 
```

我以为它已安装，但事实并非如此，而且我得到了完全没有信息的错误消息。它应该说“老兄，你需要先安装erlang”。

# actionscript-3 - AS3 数组到对象

> ID：11139409
> 
> 赞同：0
> 
> 时间：2012-06-21T13:35:58.103
> 
> 标签：actionscript-3, flash

我有这个数组`var ar:Array = [234*256,558*698,256*784...];` ，我想将它转换为第一个元素（* 之前）进入的 2 个数组

```
var ar_x:Array; 
```

第二个元素（在*之后）进入其他数组

```
var ar_y:Array; 
```

怎么做？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T05:47:14.333

我懂了！

代码如下所示：

```
var def_poss:Array = [def_pos[i][1],def_pos[i][2],def_pos[i][3],def_pos[i] [4],def_pos[i][5],def_pos[i][6],def_pos[i][7],def_pos[i][8],def_pos[i][9],def_pos[i][10],def_pos[i][11]];
}
for (var m:int=0;m<def_poss.length;m++)
{
    var temp_def:Array = def_poss.toString().split("*");
}
for (var n:int=0;n<temp_def.length;n++)
{
    var parts:Array = temp_def.toString().split(",");
    def_x.push(parts[0]);
    def_y.push(parts[1]);
    def_x.push(parts[2]);
    def_y.push(parts[3]);
    def_x.push(parts[4]);
    def_y.push(parts[5]);
    def_x.push(parts[6]);
    def_y.push(parts[7]);
    def_x.push(parts[8]);
    def_y.push(parts[9]);
    def_x.push(parts[10]);

} 
```

首先我必须`split ("*")`得到奇怪的数组`["255","255,586".....]`，然后遍历该数组，`split(",")`然后将部分推送到单独的数组

感谢帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:40:57.333

如果您在编译时知道这些值，只需将它们放在两个单独的数组中。

你不能在运行时将它们分开，因为当你像这样放置它们时：

```
 var ar:Array = [234*256,558*698,256*784]; 
```

乘法将被计算并存储在数组中，您将在运行时拥有：

```
 var ar:Array = [59904,389484,200704]; 
```

另一方面，如果值来自外部源作为字符串“234*256”，您可以将其从 * 符号中拆分出来，并将这两个部分存储在单独的数组中。

```
 var multiply:String = "234*256";
 var parts:Array = multiply.split("*");
 ar_x.push(parts[0]);
 ar_y.push(parts[1]); 
```

# python - Django：如何将非数据库对象添加到查询结果中

> ID：11139410
> 
> 赞同：0
> 
> 时间：2012-06-21T13:36:00.087
> 
> 标签：python, django

让我们考虑一下我有一群人拥有一些衬衫的情况：

```
class Person(models.Model):
    name = models.CharField()

class Shirt(models.Model):
    description = models.CharField()
    owner = models.ForeignKey(Person) 
```

我穿着他们的一件衬衫给他们拍照：

```
class Photo(models.Model):
    person = models.ForeignKey(Person)
    shirt = models.ForeignKey(Shirt) 
```

在模板中，我使用类似的东西

```
{{ the_photo.shirt.description }} 
```

和

```
{% for shirt in the_person.shirt_set.all %}
    {{ shirt.description }}
{% endfor %} 
```

我也有表格让我从模特的库存中挑选一件衬衫来拍照。

现在，一个转折！我也可以不穿衬衫给他们拍照！所以我想在他们可能拥有的任何衬衫之外`the_person.shirt_set`包含一个`description='topless'`条目。我宁愿不`'topless'`为每个人存储额外的衬衫，也不希望必须修改每个表单和列表来添加此选项。

我有一个创建`Topless`类的想法：

```
class Topless(Shirt):
    def __init__(self, *args, **kwargs):
        super(Topless, self).__init__(*args, **kwargs)
        self.description = 'Topless' 
```

并将其添加到列表中：

```
class Person(models.Model):
    name = models.CharField()
    def shirts(self):
        l = list(Shirt.objects.filter(owner=self))
        l.insert(0, Topless())
        return l 
```

（当然还有从模板切换`the_person.shirt_set`到`the_person.shirts`），但是`the_photo.shirt`由于 id 为 None （或 0），它变得越来越难看，而且看起来它需要一堆丑陋的黑客来适应它。

但也许我做错了？有任何想法吗？最优雅和最pythonic的方法是什么？

# javascript - 使用 z-index 在父 Div 级别上的元素上方显示子 Div

> ID：11139411
> 
> 赞同：1
> 
> 时间：2012-06-21T13:36:00.603
> 
> 标签：javascript, jquery, css, html

我想在父 div 的同一级别上的 div 上方显示一个子 div（即在父容器内）。我可以使用 jQuery 和 CSS 来操作 z-index。在下面的示例中，我希望日历位于 gridRight 上方，但是 z-index 为 1000，gridRight 为 2，它仍然没有显示在其上方。用户可以拖动日历。我该怎么做才能让日历显示在 gridRight 上方？

- 元素具有属性位置：绝对

这是基本的 JSFiddle [http://jsfiddle.net/LTRyd/1/](http://jsfiddle.net/LTRyd/1/)

*   我希望能够将红色方块移动到绿色方块上方，而黑色方块仍将显示在绿色方块下方。

    ```
    <div id="mainContainer" class="mainContainer">
         <div id="grid1" class="grid"> <!--Has to have Z-Index of 1-->
              <div id="Calendar" class="item"></div> <!--Z-Index of 1000-->
    </div>            
    </div>
    <div id="gridLeft" class="gridLeft"></div> <!--Has to have Z-Index of 2-->
    <div id="gridRight" class="gridRight"></div> <!--Has to have Z-Index of 2--> 
    ```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:42:32.183

Z-Index only takes effect on positioned elements.

You will have to alter your CSS to position the elements you want z-indexed:

```
#Calendar
{
  position: relative;
  z-index: 20;
}

#grid2
{
  position: relative;
  z-index: 10;
} 
```

**edit:**

"Within a stacking context, child elements are stacked according to the same rules previously explained. Importantly, the z-index values of its child stacking contexts only have meaning in this parent. Stacking contexts are treated atomically as a single unit in the parent stacking context."

[The stacking context - MDN](https://developer.mozilla.org/en/CSS/Understanding_z-index/The_stacking_context)

Essentially, stacking is resolved within the parent element. All stacking occurs within the parent, and then that parent's stacking order is in the context of its other siblings, regardless of the stacking order of the children within it.

So while `Calendar` will have a z-index of 1000, that z-index will only apply against the stacking of other children of `grid1`

# java - Java 中的 Visual C++ BinaryReader

> ID：11139414
> 
> 赞同：-1
> 
> 时间：2012-06-21T13:36:04.723
> 
> 标签：java, visual-c++, binarystream

java中是否有任何方法可以实现与Visual C++中的[BinaryReader()](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)相同的功能

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:39:28.573

那将是[DataInputStream](http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html)

......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:41:32.943

```
public interface DataInput 
```

> DataInput 接口提供从二进制流中读取字节并从中重建任何 Java 原始类型的数据。
> 
> 所有已知的实现类：DataInputStream、ImageInputStreamImpl、ImageOutputStreamImpl、ObjectInputStream、RandomAccessFile

此外，您正在寻找 Java 中的类，而不是方法（因为 BinaryReader 是类而不是 C++ 中的函数）

[JavaDocs](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/DataInput.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-01T14:28:18.050

我需要这个并写了一个等效的类。

[https://gist.github.com/vangorra/9470810](https://gist.github.com/vangorra/9470810)

它本质上是 .Net 的 BinaryReader 在 java 中的实现。它没有实现所有方法，但为任何需要走这条路的人提供了一个良好的开端。

这个类可以做什么的例子：

```
BinaryReaderDotNet reader = new BinaryReaderDotNet(new FileInputStream(new File("blah.bin")));
reader.readInt32(); // returns int
reader.readUInt32(); // returns long
reader.readInt16(); // returns int (first bits are zeroed)
reader.readUInt16(); // returns int (first bits are zeroed)
reader.readString(); // returns a string.
reader.readBoolean(); // returns a boolean
reader.readSingle(); // returns a float 
```

# visual-studio - 是否有任何扩展点来操作 Visual Studio 导航栏？

> ID：11139417
> 
> 赞同：2
> 
> 时间：2012-06-21T13:36:15.593
> 
> 标签：visual-studio, vsix, visual-studio-extensions

这是目标：通过扩展删除某些编辑器中的导航栏（不是所有的，因为在选项中是可能的）。

所以这是我要删除的东西： ![导航栏](../Images/e6d5a1d5647513735fdddfc646974770.png)

我检查了很多方法，最有希望的是`IWpfTextViewMargin`在加载后访问它：

```
IWpfTextViewHost TextViewHost;
IWpfTextViewMargin ContainerMargin;

public DummyMargin(IWpfTextViewHost textViewHost, 
                   IWpfTextViewMargin containerMargin)
{
    this.TextViewHost = textViewHost;
    this.ContainerMargin = containerMargin;
    Loaded += DummyMargin_Loaded;

}

void DummyMargin_Loaded(object sender, System.Windows.RoutedEventArgs e)
{
    // ContainerMargin is loaded here
} 
```

然后在可视化树中向上遍历找到导航栏并将其隐藏在那里：

![虚拟树](../Images/2537a69a408dea4f040718fcf92bc9f5.png)

但这是一个非常肮脏和不可靠的解决方案。你知道更好的吗？特别是如果有一个扩展点（如其中之一：[编辑器扩展点](http://msdn.microsoft.com/en-us/library/dd885244.aspx)）来操作它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T16:25:01.117

因此，语言服务用来操作下拉栏内容的 API 是`IVsDropdownBarManager`. 如果您在适当的时间调用 RemoveDropdownBar 并且下拉栏将被删除，那么您不必使用 WPF 可视化树。

这种方法存在一些问题：

1.  “适当的时间”没有明确定义，每个语言服务可能会在不同的时间初始化它的下拉栏。大多数语言服务将在其 .AddAdorments 阶段执行此操作`IVsCodeWindow`，但这不是您可以挂钩的。

2.  您需要获取给定窗口的 IVsCodeWindow，这本身很棘手且不一定可靠。我会向你指出 Jared Parson 的 VsVim 代码，它展示了如何做到这一点。如果你查看[这个文件](https://github.com/jaredpar/VsVim/blob/3b7fd4712385a2abf00ba01c6c44639211b3af9c/VsVimShared/Extensions.cs)，你可以得到一个 IVsTextView，然后调用它`GetWindowFrame`来获取`IVsWindowFrame`它。一旦你有了*那个*，然后打电话`GetCodeWindow`去拿`IVsCodeWindow`。然后将其投射到`IVsDropdownBarManager`并开始玩耍。

3.  这仍然*非常*棘手，因为您在语言服务背后做着它可能无法预料的事情。如果您对它们这样做，如果各种语言服务会崩溃，我不会感到惊讶。

也就是说，如果你的目标是为自己做一个简单的扩展，因为你不喜欢导航栏或想尝试其他东西，你应该能够让它工作。但这肯定不是一种受支持/很好的方式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T16:14:44.447

您可以从 Visual Studio 的选项菜单中按语言禁用/隐藏语言栏：

选项 > 文本编辑器 >*语言/所有语言*> 选中/取消选中“导航栏”。

# c# - 我们如何检查一个数组是否包含 # 中另一个数组的一个或多个元素？

> ID：11139419
> 
> 赞同：13
> 
> 时间：2012-06-21T13:36:19.770
> 
> 标签：c#, .net

我有一个字符串数组：例如：

```
string [] names ={"P","A","B","G","F","K","R"} 
```

我有另一个数组：

```
string [] subnames={"P","G","O"} 
```

我们如何检查名称数组是否包含子名称数组的任何元素。

在上面的示例中，名称中有“P”和“G”。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-06-21T13:40:27.117

这是一个 Linq 解决方案，应该可以满足您的需求：

```
names.Any(x => subnames.Contains(x)) 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2012-06-21T13:39:16.613

最简单的方法是使用[Enumerable.Intersect](http://msdn.microsoft.com/en-us/library/bb460136.aspx)方法。然后我们对结果使用[Any](http://msdn.microsoft.com/en-us/library/bb337697)方法

```
bool containsValues = names.Intersect(subnames).Any(); 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-06-21T13:42:45.150

这也可以：

```
bool result = names.Any(subnames.Contains); 
```

**编辑**

这段代码可能看起来不完整，但它确实有效（方法组方法）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-06-21T13:39:28.987

你可以使用一些 Linq 然后使用`Intersect`

```
var commonNames = names.Intersect(subnames); 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-06-21T13:46:35.110

检查是否有：

```
bool anyInBoth = names.Intersect(subnames).Any(); 
```

要同时获得两者：

```
IEnumerable<string> inBoth = names.Intersect(subnames); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T13:41:18.893

Linq 是我认为最简单的：

```
from n1 in names
join n2 in subnames on n1 equals n2
select n1; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-06-22T22:23:27.520

```
bool DiziIcindeDiziVarMi(string[] parent, string[] child)
{
     int say = 0;
     for (var i = 0; i < child.Length; i++)
        for (var j = 0; j < parent.Length; j++)
           if (child[i] == parent[j])
                say++;

        return say == child.Length;

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-06-01T08:53:36.823

另一种方式：我分享如何检查一个（几个）单词部分和所有

```
string[] subnames = { "P", "G", "O" };

bool all = subnames.All(s => names.Contains(s));
bool anyInBoth = subnames.All(s => names.Contains(s)); 
```

# c++ - 多线程向量

> ID：11139422
> 
> 赞同：4
> 
> 时间：2012-06-21T13:36:23.747
> 
> 标签：c++, multithreading, vector

我正在使用 C++ 开发一个项目，该项目使用自行创建的地图来存储数据——从这个意义上说，地图更像是一张“地理”地图，所以是一张图像。有不同的线程读取和写入它。地图的数据存储在整数向量的标准向量中。它的大小不会改变，只是通过getter和setter函数改变某些像素的内容。

我的问题如下：有时一切正常，但更多时候我得到损坏的图像，因为像素的值改变符号或变得与它们应该的完全不同。这可能是对像素的线程读/写访问的问题，如果是这样，我应该使用什么来代替标准向量？我尝试使用互斥锁来确保只有一个线程读取或写入向量，但是这些读/写操作经常发生，如果我在每次操作时锁定向量，应用程序就会变得太慢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T13:39:43.610

您将需要某种锁定。为防止这种情况严重影响您的性能，您应该尝试使锁的范围尽可能小。例如，您可以锁定单独的行向量，以便不同行上的写入不会相互干扰。哪种解决方案最适合您取决于您​​的访问模式和平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:52:34.760

当你做多线程时，尽量隔离线程的范围。

考虑并举例。想象一下，你有一堵墙，你想让它涂上黑白条纹。为了加快工作速度，您决定雇用两名员工。

现在，您可以通过两种方式分配此工作。1\. 将黑色条纹分配给一名工人，将白色条纹分配给另一名工人。2\. 将墙分成两个分区，左侧分区分配给一名工人，右侧部分分配给第二名工人

现在哪一个可能会产生更好的性能？

在一般情况下，第二种情况更好，因为工人的工作区域被很好地分开，一个人不需要等待另一个人来完成他的工作。当然第一种方法没有错，但是，有可能一个工人正在某个地方绘画，而第二个工人也可能到达同一个地方，并且必须等待第一个工人完成。现在想象一下如果你有 10 名工人每人只涂一种特定的颜色会发生什么。

多线程编程类似。如果您可以以更好的方式对问题数据进行分区，则可以使线程有效地工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T16:23:25.783

1.  使用轻量级锁。那是在 Windows 上使用“CriticalSection”。或者编写您自己的用户空间锁，例如在 TinyThread (http://tinythreadpp.bitsnbites.eu/) 中。这些是用 ASM 编写的，实际锁定和解锁的开销几乎为零。

2.  一旦你确定锁本身很快，如果事情仍然运行缓慢，那是因为你有锁争用。例如，多个线程都需要锁定相同的资源。在您的用例中，请考虑类似“读/写”互斥锁。这是一个具有读互斥锁和写互斥锁的类。互斥体上的“readLock”方法仅锁定几个周期以增加互斥体上的引用计数。“readUnlock”确实会减少引用计数。"writeLock" 锁定读取互斥体，并设置一个标志以防止读取器锁定读取互斥体。然后锁定写互斥体并执行写操作。因此，您可以保证一次只能发生一次写入操作，并且在写入期间不会发生读取。但允许同时读取。

# debugging - 检测和可视化内存传输和访问的工具

> ID：11139428
> 
> 赞同：0
> 
> 时间：2012-06-21T13:36:38.517
> 
> 标签：debugging, profiling, memory-profiling

我有一段 C 代码计算稀疏矩阵的 LU 分解的问题。在那里，我编写了一些具有各种优化的不同例程。根据矩阵中非零元素的结构，一些实现变得非常快，但对于下一个示例矩阵，它变得太慢了。现在我需要一个工具来分析应用程序并向我显示代码在哪里等待来自内存的新数据和/或如何使用缓存。我已经尝试过 valgrind(cachegrind/callgrind) 但是开销太大并且不同实现的运行时之间的比例完全改变了。

是否有任何其他开源工具（Linux、BSD）来分析内存流量和类似问题？他们不应该使用内核模块。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:39:21.887

你可以试试 Memory Profiler

# iphone - 执行此类动画时是否有animationDidStopSelector？

> ID：11139432
> 
> 赞同：0
> 
> 时间：2012-06-21T13:37:05.503
> 
> 标签：iphone, objective-c, ios, animation

我有一个`UIimageView`显示为静态图像的图像。当图像被触摸时，它会在其中触发 16 个图像的动画`UIImageView`。动画完成后，我想将图像设置为`UIImageView`新图像。我不知道如何按照我目前拥有我的代码的方式执行此操作。谁能告诉我该怎么做？我曾尝试使用`NSTimer`（设置为动画持续时间）来调用另一种方法，但这并没有真正起作用。这是我的代码。我会很感激任何帮助。

```
- (void) hdFallingAnim {
    NSString *fileName; 
    NSMutableArray *imageArray = [[NSMutableArray alloc] init];
    for(int i = 1; i < 17; i++) {
        fileName = [NSString stringWithFormat:@"FallingReg/HD_Falling_REG%d.png", i];
        [imageArray addObject:[UIImage imageNamed:fileName]];
    }
    hdFalling.userInteractionEnabled = YES;
    hdFalling.animationImages = imageArray;
    hdFalling.animationDuration = 2;
    hdFalling.animationRepeatCount = 1;
    hdFalling.contentMode = UIViewContentModeCenter;
    [self.view addSubview:hdFalling];
    [hdFalling startAnimating];

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:48:25.933

没有官方方法可以用这些类型的动画检测到这一点。您可以在后台线程中进行轮询，如下所示：

```
dispatch_queue_t queue = dispatch_queue_create("waste.of.resources.but.it.works", 0);
    dispatch_async(queue, ^{
        while( [hdFalling isAnimating]) {
            //Waiting....
        }

        //Finished
        hdFalling.animationImages = nil;
        hdFalling.image = //Your image
    });
    dispatch_release(queue); 
```

# java - 将谷歌网络搜索解析为 xml/json

> ID：11139438
> 
> 赞同：-2
> 
> 时间：2012-06-21T13:37:15.033
> 
> 标签：java, android, xml, json, parsing

我需要接收可编辑的格式（xml 或 json 或其他）谷歌搜索的结果（类似于在 google.com 搜索中返回的结果）。

有人像我一样健康吗？谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:40:39.637

Google 不再提供以编程方式从其常规搜索引擎获取结果的服务。您可以使用 Google 自定义搜索 API，尽管这与他们的通用搜索引擎不同，因为它仅用于索引您的网站。

虽然可以解析来自 google 搜索引擎的 HTML 结果，但这违反了他们的服务条款，并可能导致您的 IP 地址被禁止搜索。

# c# - 如何在开发环境中将浅色主题设置为默认？

> ID：11139440
> 
> 赞同：2
> 
> 时间：2012-06-21T13:37:21.173
> 
> 标签：c#, visual-studio-2010, windows-phone-7, windows-phone

可以在 Visual Studio for Windows Phone 的开发过程中设置浅色主题。我现在只能使用深色主题。请协助。

![在此处输入图像描述](../Images/d70564692326c26f0692339dcdb3a32f.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:32:19.813

目前无法更改 Visual Studio 中的设计器以使用浅色主题，但是如果您在 Expression Blend 中打开您的项目（项目|在 Expression Blend 中打开...），则会有一个设备选项卡，您可以将其从深色更改为设计师点亮并更改强调色。

参考：

> [http://msdn.microsoft.com/en-us/library/ff979330(v=Expression.40).aspx](http://msdn.microsoft.com/en-us/library/ff979330(v=Expression.40).aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:31:30.617

似乎没有办法做到这一点。

但希望您可以在 Expression Blend 中实现相同的目标。在 Blend 中打开您的 XAML，然后在设备面板中：在主题部分中，您可以通过单击 Preview Dark Theme 或 Preview Light Theme 来预览应用程序页面的背景主题。

# c# - 是否有使用 POST 而不是 GET 的 MVC 寻呼机？

> ID：11139443
> 
> 赞同：16
> 
> 时间：2012-06-21T13:37:23.560
> 
> 标签：c#, asp.net-mvc, pagination

这是我的问题。我有一个`SearchViewModel`具有大量搜索条件的值，这些值根本不适合 URL。我目前正在使用`Troy Goode's Html.PagedListPager`，但它旨在用于`Url.Action()`发送 URL 中的参数。这是一个例子。我不认为客户端过滤是一种选择，因为我会有很多记录。

```
 @Html.PagedListPager(
        (IPagedList)@Model.SearchResults,
        page => Url.Action("Results", 
            new {
                YearBuiltFrom = Model.YearBuiltFrom,
            }
                ))
} 
```

如果您只有一个或两个简单参数，这是一个很好的解决方案。

### 搜索视图模型

```
 public class SearchViewModel
    {

        public int? page { get; set; }
        public int? size { get; set; }

        [IgnoreDataMember]
        public IPagedList<Property> SearchResults { get; set; }

        public string[] Locations { get; set; }

        [IgnoreDataMember]
        public MultiSelectList LocationOptions { get; set; }

        public string[] ZipCodes { get; set; }

        [IgnoreDataMember]
        public MultiSelectList ZipCodeOptions { get; set; }

        [Display(Name="Year Built")]
        public int? YearBuiltFrom  { get; set; }

        [Display(Name = "Year Built")]
        public int? YearBuiltTo { get; set; }
        public int? SqftFrom { get; set; }
        public int? SqftTo { get; set; }
        public string Bedrooms { get; set; }
        public string Bathrooms { get; set; }
        [DataType(DataType.Date)]
        public DateTime? SalesFrom { get; set; }
        [DataType(DataType.Date)]
        public DateTime? SalesTo { get; set; }
        public int? SaleAmountFrom { get; set; }
        public int? SaleAmountTo { get; set; }
        public int? LandAreaFrom { get; set; }
        public int? LandAreaTo { get; set; }

        public string[] Waterfront { get; set; }

        [IgnoreDataMember]
        public MultiSelectList WaterfrontOptions { get; set; }

        //TODO: Implement LandAreaType as a search parameter
        //public string LandAreaType { get; set; }
        public Boolean? IsVacant { get; set; }

        public string[] PropertyFeatures { get; set; }

        [IgnoreDataMember]
        public MultiSelectList PropertyFeatureOptions { get; set; }

    } 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-06-21T13:44:38.040

我不熟悉这样的控件。我认为最简单的方法是使用 javascript 来劫持对寻呼机锚点的点击，并通过取消将由锚点引起的默认重定向来动态构建 POST 请求。要构建此 POST 请求，您可以将当前页面值动态设置为搜索表单的隐藏字段并触发此表单的提交，以便它再次执行搜索但页面参数已更改。

举个例子：

```
<!-- Search form containing all the search criteria fields including the current page number
@using (Html.BeginForm(null, null, FormMethod.Post, new { id = "searchForm" }))
{
    @Html.EditorFor(x => x.SearchCriteria)
    <button type="submit">Search</button>
}

<!-- Here will be displayed the results
<div id="results">
    @Html.DisplayFor(x => x.SearchResults)
</div> 
```

现在我们可以订阅寻呼机上的点击事件：

```
$(function() {
    $('#results a').click(function() {
        // get the url of the page link
        var url = this.href;

        var page = ... extract the page parameter from the page link

        // update a hidden field inside the search form with this value
        $('#page').val(page);

        // trigger the search
        $('#searchForm').submit();

        // stop the link from navigating to the url it is pointing to
        return false;
    });
}); 
```

# jquery - 如何在移动Web应用程序中使用asp.net制作手机的通话功能

> ID：11139446
> 
> 赞同：2
> 
> 时间：2012-06-21T13:37:34.637
> 
> 标签：jquery, asp.net, jquery-mobile, call

我正在asp.net 中开发一个移动Web 应用程序。

我在菜单中有一个“呼叫支持”按钮，我的要求是，如果有人点击它，它应该调用手机的呼叫功能。

我想知道我该怎么做。如果您有任何想法，请与我分享。我需要帮助！！

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:41:51.073

Would this work. Using a tel protocol in the link i.e.

```
<a href="tel://012345" >Call support</a> 
```

# matlab - 查找两列矩阵中的元素数

> ID：11139447
> 
> 赞同：0
> 
> 时间：2012-06-21T13:37:35.743
> 
> 标签：matlab, matrix

我有一个矩阵

```
 1        2
    1        3
    1        4
    2        1
    2        4
    3        1 
```

我需要得到的矩阵只包含

```
 1        3 (number of elements that related to element 1 (2,3,4))
    2        2 (number of elements that related to element 2 (1,4))
    3        1 (number of elements that related to element 3 (1)) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:44:58.987

最简单的方法是使用`accumarray`：

```
 accumarray(A(:,1),A(:,2),[],@numel); 
```

取自 Matlab 帮助：

> accumarray 对数据集中的元素进行分组，并对每个组应用一个函数。A = accumarray(subs,val) 通过使用 subs 的元素作为索引来累积向量 val 的元素来创建数组 A。subs 中元素的位置决定了它为累积向量选择的 vals 值；subs 中元素的值决定了累积向量在输出中的位置。

在我们的例子中，我们需要对所有元素进行分组并计算它们的数量。`numel`计数。

* * *

顺便说一句，您根本不需要数据的第二列：

```
 accumarray(A(:,1),zeros(size(A(:,1))),[],@numel) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:09:41.417

这是使用数组索引和唯一生成计数的另一种方法：

```
%demo array
a=[1 1 1 2 2 3]';
%get unique elements
b=unique(a);
%count and put into matrix
result=[b sum((a(:,ones(1,length(b))))'==b(:,ones(1,length(a))),2)];

result =

     1     3
     2     2
     3     1 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-23T07:44:55.180

您可以使用统计工具箱中的制表功能：

```
>> tabulate(A(:,1))
  Value    Count   Percent
      1        3     50.00%
      2        2     33.33%
      3        1     16.67% 
```

使用 HISTC 的另一种解决方案：

```
vals = unique(A(:,1));
counts = histc(A(:,1), vals); 
```

结果矩阵：

```
>> result = [vals counts]
result =
    1     3
    2     2
    3     1 
```

这与 ACCUMARRAY/TABULATE 不同，它不假定元素从 开始`1`。要理解我的意思，请修改`A`为：`A(:,1) = A(:,1)+10;`在运行每个解决方案之前。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:42:55.757

用于`find(a(:,1)==1)`查找第一列值为 1 的行号

# performance - 根据不同条件分配评级的加速循环

> ID：11139448
> 
> 赞同：0
> 
> 时间：2012-06-21T13:37:36.170
> 
> 标签：performance, r, loops

我希望加快一个循环，该循环根据不同的条件为行分配评级。根据不同的条件分配六个不同的等级（0 到 5）。我尝试使用带有每个条件的 if 语句的 for 循环来执行此操作，但是要经过数百万行，这确实是没有选择的。我什至不知道花了多长时间才完成。在我手动停止它之前，它已经运行了几个小时。

规则是：

```
Rating 0: if df$Bounce >= 75 and df$time<10 and df$view<1
Rating 1: if df$Bounce >= 75 or df$Assist<1
Rating 2: if df$Bounce < 75 and df$Assist<2
Rating 3: if df$Bounce < 75 and df$Assist<3
Rating 4: if df$Bounce < 75 and df$Assist<=4
Rating 5: if df$Bounce < 75 and df$Assist>=5 
```

我的脚本中有更多这些“慢”语句，所以这个问题的答案将加快很多进程！

一个小的示例数据集

```
tc <- textConnection('
belongID   uniqID   Bounce     Assist   time   view    
   1           101     90       10       7       0      
   1           102     75        0       8      10
   2           103     10       30       4       2
   2           104     50        3       1      10
   2           105     74        2       5       4
   3           106      5        1       2       8  ')

df <- read.table(tc,header=TRUE) 
```

结果应生成具有新列 Rating 和根据规则的评级的相同数据集：

```
belongID   uniqID   Bounce     Assist   time   view     Rating    
   1           101     90       10       7       0       0
   1           102     75        0       8      10       1
   2           103     10       30       4       2       5
   2           104     50        3       1      10       4
   2           105     74        2       5       4       3
   3           106      5        1       2       8       2 
```

编辑：更改等级 1 条件！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:04:59.450

这是函数中的一个简单算法，可以满足您的要求。由于这仅包含三个规则，因此应该非常快。`Assist`（但是，我做了一个始终是整数的隐含假设。）

```
rating <- function(Bounce, Assist, time, view){
  x <- pmin(5, Assist + 1)
  x[Bounce >= 75 & time<10 & view<1] <- 0
  x[Bounce >= 75 & Assist < 1] <- 1
  x
}

within(df, rating <- rating(Bounce, Assist, time, view))

  belongID uniqID Bounce Assist time view rating
1        1    101     90     10    7    0      0
2        1    102     75      0    8   10      1
3        2    103     10     30    4    2      5
4        2    104     50      3    1   10      4
5        2    105     74      2    5    4      3
6        3    106      5      1    2    8      2 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:53:44.447

不要使用循环：

```
df$rating <- 999

df[df$Bounce >= 75 & df$time < 10 & df$view<1, "rating"] <- 0
df[df$Bounce >= 75 & df$Assist < 1 & df$rating == 999, "rating"] <- 1
df[df$Bounce < 75 & df$Assist < 2 & df$rating == 999, "rating"] <- 2
df[df$Bounce < 75 & df$Assist < 3  & df$rating == 999, "rating"] <- 3
df[df$Bounce < 75 & df$Assist <= 4  & df$rating == 999, "rating"] <- 4
df[df$Bounce < 75 & df$Assist >= 5 & df$rating == 999, "rating"] <- 5 
```

检查是必需的`rating == 999`，因为您的规则不是互斥的。如果他们应该是，那么您的逻辑就有错误。否则，这可确保没有规则覆盖较早的规则。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:55:09.253

尝试

```
dumfun<-function(w,x,y,z){
if(w>=75&&x<10&&y<1){return(0)}
if(w>=75&&z<1){return(1)}
if(w<75&&z<2){return(2)}
if(w<75&&z<3){return(3)}
if(w<75&&z<5){return(4)}
if(w<75&&z>5){return(5)}
}

df$Rating<-mapply(dumfun,df$Bounce,df$time,df$view,df$Assist) 
```

# iphone - 未调用 SA_OAuthTwitterEngineDelegate 方法？

> ID：11139452
> 
> 赞同：0
> 
> 时间：2012-06-21T13:37:50.400
> 
> 标签：iphone, twitter-oauth, mgtwitterengine

我正在将 twitter 集成到我的应用程序中。我成功打开推特页面，但 SA_OAuthTwitterEngine 委托方法未调用，下面是我的代码。

在推特按钮上单击

```
-(void)twitterLogin
{
    [self twitterLogout];
    if(!_engine)
    {
        _engine=[[[SA_OAuthTwitterEngine alloc] initOAuthWithDelegate: self]autorelease];
        _engine.consumerKey=NSLocalizedString(@"consumerKey", nil);
        _engine.consumerSecret=NSLocalizedString(@"consumerSecret", nil);
    }

    UIViewController *controller=[SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:_engine delegate:self];
    if (controller)
    {
        [self presentModalViewController:controller animated:YES];
    }
 }

-(void)twitterLogout
{    
    NSHTTPCookieStorage* cookies = [NSHTTPCookieStorage sharedHTTPCookieStorage];
    for (NSHTTPCookie* cookie in [[NSHTTPCookieStorage sharedHTTPCookieStorage] cookies]) {
        [cookies deleteCookie:cookie];
    }
    [_engine clearAccessToken];
    [_engine release];
    _engine=nil;
} 
```

此方法完美运行，但未调用以下方法

```
- (void) storeCachedTwitterOAuthData: (NSString *) data forUsername: (NSString *) username 
{
    NSUserDefaults *defaults = [NSUserDefaults standardUserDefaults];

    [defaults setObject: data forKey: @"authData"];
    [defaults synchronize];
    NSLog(@"%@",username);

} 
```

先感谢您。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-06-21T13:48:46.430

做这样的事情

```
`if(!_engine){  
        _engine = [[SA_OAuthTwitterEngine alloc] initOAuthWithDelegate:self];  
        _engine.consumerKey    = kOAuthConsumerKey;  
        _engine.consumerSecret = kOAuthConsumerSecret;  
    }   
    if(![_engine isAuthorized]){  
        UIViewController *controller = [SA_OAuthTwitterController controllerToEnterCredentialsWithTwitterEngine:_engine delegate:self];  

    if (controller){  
        [parent presentModalViewController: controller animated: YES];

        //hasTWLoggedInBefore=YES;
    }  
}  else{

    NSLog(@"IT IS ALRADY LOGIN");
    // Inform the delegate that Login is successful
    if ( [delegate respondsToSelector:@selector(TWloginStatus:)] ) 
    {
        // calling delegate method. For this method to function, the delegate should be implemented in the calling class.
        [delegate TWloginStatus:YES];               
        return;
    }       }` to load the twitter. 
```

# android - 为 zxing 条码扫描器添加样式（Android）

> ID：11139454
> 
> 赞同：0
> 
> 时间：2012-06-21T13:37:54.667
> 
> 标签：android, cordova, themes, zxing, phonegap-plugins

我正在使用 phoneGap 构建一个 Android 应用程序，并且我已经成功添加了使用 zxine 作为扫描仪的[BarcodeScanner 插件。](https://github.com/phonegap/phonegap-plugins/tree/master/Android/BarcodeScanner)我应该注意到这是我的第一个 Android 应用程序，所以我仍然习惯于开发环境。

我想设置“扫描”屏幕的样式，使其看起来更像我的应用程序。例如，更改背景颜色、不透明度、添加图像等。有谁知道从哪里开始。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-03T14:57:33.013

查看插件文件后，我发现了一些值（viewfinder_frame、viewfinder_laser、viewfinder_mask）。位于 /res/values/colors.xml

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-06-21T13:51:42.187

您需要修改插件的 LibraryProject 部分，使其在视觉上看起来像您想要的那样。

# android - 禁用自动关闭应用程序 Android

> ID：11139456
> 
> 赞同：1
> 
> 时间：2012-06-21T13:38:05.877
> 
> 标签：android, memory

当 Android（2.3 版）的应用程序内存太少时。当我打开浏览器并打开四张有 30-40MB 可用内存的卡时，我在具有 140 MB 可用内存的设备上进行了测试。我的应用程序是 10 MB，但如果你开始使用另一个 Android 本身它关闭。是否可以强制 Android 从不关闭应用程序？这太烦人了，以至于我在这个应用程序和会话变量（ApplicationState）返回后开始发生奇怪的事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:49:53.687

只有通过修改 android 系统本身（即重建或至少生根）才能完全防止这种情况发生。即便如此，在内存压力的某个点上，阻止您的应用程序被杀死会转化为崩溃用户在前台尝试执行的任何操作，甚至是整个设备。

正如其他人已经建议的那样，您最好根据活动生命周期正确处理被杀死的可能性。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:44:31.740

简单的答案是“这是不可能的”。您可以尝试使用前台服务[，这里是一个示例](http://developer.android.com/resources/samples/ApiDemos/src/com/example/android/apis/app/ForegroundService.html)，但即便如此，您也不能保证您的应用程序不会被杀死。如果 android 确实需要内存来存储更重要的应用程序，例如电话。

与其尝试做您所描述的事情，我建议您实际上仔细查看[Activity 生命周期](http://developer.android.com/reference/android/app/Activity.html)并实施适当的回调来保存和恢复您的会话/状态。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:42:00.417

No it isn't possible. The best you can do is use a foreground service, but even that doesn't guarantee your app won't be killed.

It sounds though like you might really want to just store the state of the app so that when you restart it's in the same state the user left it in. If you properly store and restore the application state you shouldn't get strange things happening.

Do you understand the Activity lifecycle? If not, I suggest you read up on it.

# java - 如果写入/关闭被对等方关闭的 java.net.Socket 会发生什么？

> ID：11139457
> 
> 赞同：1
> 
> 时间：2012-06-21T13:38:13.817
> 
> 标签：java, windows, sockets, network-programming

假设我有一个 的实例，它是两个对等方（进程）`java.net.Socket`之间连接的端点：我的进程和远程进程。`Windows`远程进程退出并关闭了它的连接。现在我正在尝试`write`和`close`我的套接字。

我希望`write`and`close`调用（或其中一个）失败并引发异常（就像`SIGPIPE`Unix 套接字 API 中的信号一样），但它们成功了。

`java.net.Socket`在这种情况下，预期的行为是什么？它与 Unix 套接字 API 行为有什么不同？它在 Windows 和 Linux 中的工作方式相同吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:47:27.207

好吧，情况与管道有点不同，因为操作系统不一定知道另一端已经关闭了连接。所以......理论上......对套接字的许多写入可能会起作用。但是，如果远程机器仍在网络上，那么编写器最终应该会得到一个异常。很有可能它会被扔进插座`flush`或`close`.

FWIW，a 的行为`java.net.Socket`很大程度上取决于操作系统协议栈的工作方式。

# c# - 如何阻止用户浏览 WebBrowser 控件中的某些网站？

> ID：11139459
> 
> 赞同：3
> 
> 时间：2012-06-21T13:38:23.710
> 
> 标签：c#, winforms, webbrowser-control

我在允许用户搜索维基百科的应用程序中嵌入了一个简单的网络浏览器，并且我试图阻止用户浏览维基百科以外的其他网站（例如，通过单击引用的外部链接）。现在，我正在使用这个简单的代码：

```
this.textBoxAddress.Text = this.webBrowser.Url.ToString();
if (this.webBrowser.Url.Host != "en.wikipedia.org")
{
    this.webBrowser.Visible = false;
    this.labelErrorMessage.Visible = true;
}
else
{
    this.webBrowser.Visible = true;
    this.labelErrorMessage.Visible = false;
} 
```

此代码有效，但页面在运行时已加载。如果我将此代码放入`_Navigating`事件中以尝试在页面加载*之前*`Url`抢先停止用户，它会失败，因为 Web 浏览器控件直到页面加载后才会更新属性。

我不喜欢这段代码的原因是页面在被调用时已经加载，所以页面中的任何错误（例如，显示弹出窗口的脚本错误）都会显示，即使网页没有显示。

我读过资料说不使用 WebBrowser 控件，出于各种原因，但在这种情况下，安全性不是主要问题。我也不需要担心最终用户会做什么，因为这个应用程序是一个内部应用程序，实际上只有一个用户，他不会绕过安全性。

禁用 IE 设置中的所有其他页面也不是解决方案，因为该用户使用 IE 进行其他浏览，并且该组织的 Intranet 站点也在 IE 上运行（并且这些地址更改，因此简单地允许所有这些将很难预料）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T13:47:40.647

订阅`WebBrowser.Navigating`活动。检查`WebBrowserNavigatingEventArgs.Url`属性并设置`WebBrowserNavigatingEventArgs.Cancel=true`它是否不是维基百科。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:51:56.597

希望这可能会有所帮助[http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigatingcanceleventargs](http://msdn.microsoft.com/en-us/library/system.windows.navigation.navigatingcanceleventargs)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-06-21T13:53:08.427

我想这可能对你有用。使用 WebBrowser.Document 属性查找链接并循环访问链接并禁用所需链接的导航。 [http://programsolution.blogspot.com/2008/01/how-disable-link-navigation-in.html](http://programsolution.blogspot.com/2008/01/how-disable-link-navigation-in.html)

# java - 命令行命令的执行时间

> ID：11139460
> 
> 赞同：-1
> 
> 时间：2012-06-21T13:38:23.923
> 
> 标签：java, linux, debian

我正在尝试比较已安装在我的 Debian Linux 服务器中的两个工具的执行时间。现在，我必须给出两个命令行命令来执行这两个工具。

例如说，

```
cat file1 file2 file3 > file4 
```

和

```
cat file4 file5 file6 > file7 
```

现在，我想找到第一个和第二个命令的执行时间。

谁能帮助我，如何找到这两个命令的执行时间？编程基础（比如在 Java 中）也是可以接受的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:40:53.300

使用`time`命令

```
time cat file1 file2 file3 > file4 
```

`time`会将其输出写入`stderr`，因此重定向不会受到伤害。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:40:37.127

您是否尝试过 Linux[时间](http://linux.about.com/library/cmd/blcmdl1_time.htm)命令？

从`man`页面：

> time 命令使用给定的参数运行指定的程序命令。当命令完成时，时间会向标准输出写入一条消息，提供有关此程序运行的计时统计信息。

请注意，shell 通常也有一个内置的时间命令，所以这可能会引起混淆。如果您想要命令而不是内置命令（可能功能更齐全），那么最简单的方法是通过完整路径指定它。

```
$ /usr/bin/time -o timing_info {my command} 
```

（例如）

# ruby-on-rails - Subject.create() 在 RoR 中不起作用

> ID：11139461
> 
> 赞同：0
> 
> 时间：2012-06-21T13:38:25.963
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试使用 Rails 控制台来创建模型的对象实例。

可以使用手动方法创建实例并将其保存到数据库，如下所示：

```
1.9.3p125 :003 > subject = Subject.new
 => #<Subject id: nil, name: nil, position: nil, visible: false, created_at: nil, updated_at: nil> 
1.9.3p125 :004 > subject.name = "First Name"
 => "First Name" 
1.9.3p125 :005 > subject.position = 1
 => 1 
1.9.3p125 :006 > subject.visible = 'true'
 => "true" 
1.9.3p125 :007 > subject.save
(0.2ms)  BEGIN
SQL (0.6ms)  INSERT INTO `subjects` (`created_at`, `name`, `position`, `updated_at`, `visible`) VALUES ('2012-06-21 13:28:35', 'First Name', 1, '2012-06-21 13:28:35', 1)
(20.4ms)  COMMIT
 => true 
1.9.3p125 :008 > subject.id
 => 1 
1.9.3p125 :009 > subject.new_record?
 => false 
```

我对 RoR 完全陌生，所以我不知道从哪里开始解决这个错误：

```
1.9.3p125 :010 > subject = Subject.create(:name => "Second name", :position => 2)
ActiveModel::MassAssignmentSecurity::Error: Can't mass-assign protected attributes: name, position from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security/sanitizer.rb:48:in `process_removed_attributes'
from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security/sanitizer.rb:20:in `debug_protected_attribute_removal'
from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security/sanitizer.rb:12:in `sanitize'
from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/activemodel-3.2.3/lib/active_model/mass_assignment_security.rb:230:in `sanitize_for_mass_assignment'
from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/attribute_assignment.rb:75:in `assign_attributes'
from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/base.rb:498:in `initialize'
from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/persistence.rb:44:in `new'
from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/activerecord-3.2.3/lib/active_record/persistence.rb:44:in `create'
from (irb):10
from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands/console.rb:47:in `start'
from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands/console.rb:8:in `start'
from /Users/Nick/.rvm/gems/ruby-1.9.3-p125/gems/railties-3.2.3/lib/rails/commands.rb:41:in `<top (required)>'
from script/rails:6:in `require'
from script/rails:6:in `<main>' 
```

这是我的主题模型：

```
class Subject < ActiveRecord::Base
  attr_accessible :title, :body, :name, :position
end 
```

谢谢！

到目前为止我尝试过的事情：

1.  退出和重新进入轨道 c.
2.  输入“重新加载！” 进入轨道 c
3.  重新打开终端

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:47:24.810

您需要添加

```
attr_accessible :name, :position 
```

到您的`Subject`模型，以便您可以一步创建它。它是安全的东西。你可以在这里阅读：

[http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible](http://api.rubyonrails.org/classes/ActiveModel/MassAssignmentSecurity/ClassMethods.html#method-i-attr_accessible)

高频，..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T14:33:57.813

我遇到了同样的问题，解决方案是这样做

`subject=Subject.create(name: 'Second name', position: 2)`

这对我来说可以

# jquery - 如何在不再次触发 select_) 节点的情况下刷新 jstree

> ID：11139482
> 
> 赞同：3
> 
> 时间：2012-06-21T13:39:48.630
> 
> 标签：jquery, jstree

我正在使用带有 ajax 调用的 jstree 插件。在某个时候，我打电话给

```
$("#tree").jstree("refresh"); 
```

为了检索通过 ajax 调用创建的新节点。这很好用，除了 select_node.jstree 在刷新时被触发。有没有办法防止 select_node 在树刷新时被触发？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T15:04:05.343

我最终在刷新之前使用将标志设置为 true，并且在 select_node 事件触发器中，仅在标志设置为 false 时执行逻辑，否则将其设置回 false 并且什么也不做：

```
refresh = true;
$("#tree").jstree("refresh");

[...]

$("#tree").jstree({...}).bind("select_node.jstree", function (e, data) {
    if (refresh) {
        refresh = false;
    } else {
       // do my thing
    }
 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-06T13:53:33.303

或者您可以在刷新后取消选择所有节点

```
refresh=true;
$("#tree").jstree("refresh");
$("#tree").jstree("deselect_all"); 
```

这应该工作！

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-06-10T17:37:44.187

在刷新树之前取消选择节点会起作用。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-02-11T09:40:51.273

bool 的问题是，如果当前选择的节点有子节点，每个子节点都会触发 select_node.jstree。

相反，刷新函数中有[两个参数](http://www.jstree.com/api/#/?q=refres&f=refresh())。第二个可以是 bool 或函数，它接收带有 core.selected 数组和所有可见节点的状态对象。如果清空数组并返回状态，则根本不会触发 select_node.jstree。

```
 var tree = $('#mytree').jstree(true); 

        tree.refresh(false, function (state) {
            //console.dir(state);
            state.core.selected = [];
            return state;
        }); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-04T14:43:39.440

如果您使用的是 UI 插件，则 refresh() 函数“启用在刷新之前保存选择状态并在之后恢复它”。因此，如果当前选中的节点（刷新前）是待刷新节点的子节点，刷新后会通过触发 reselect() 函数恢复其状态。刷新功能锁定如下：

```
refresh : function (obj) {
            var _this = this;
            this.save_opened();
            if(!obj) { obj = -1; }
            obj = this._get_node(obj);
            if(!obj) { obj = -1; }
            if(obj !== -1) { obj.children("UL").remove(); }
            else { this.get_container_ul().empty(); }
            this.load_node(obj, function () { 
                _this.__callback({ "obj" : obj}); 
                _this.reload_nodes(); //this will trigger the reselect() function
            }); 
```

我有同样的问题，我评论了那行（_this.reload_nodes（））。不要认为这是一个最佳解决方案，但解决了我的问题。

# gps - 为诺基亚设备构建 GPS 跟踪器

> ID：11139489
> 
> 赞同：1
> 
> 时间：2012-06-21T13:39:54.787
> 
> 标签：gps, nokia

我需要为诺基亚设备构建一个非常简单的应用程序，

没有 ui 的应用程序 - 或者没有什么大不了的 - 当用户打开应用程序时，

应用程序开始通过 http 连接发送坐标，应用程序必须在后台工作，我的问题是：

对于这个简单的应用程序，QT 最好的开发工具包是什么？！原生塞班？！跨平台（html，js）？！

谢谢 ，

# c# - 触摸事件未触发 C# WPF

> ID：11139494
> 
> 赞同：4
> 
> 时间：2012-06-21T13:40:08.263
> 
> 标签：c#, wpf, touch, multi-touch

我创建了一个订阅 WPF 触摸事件的程序。在过去的几个月里，一切都按预期工作，但昨天没有一个触摸事件会触发。我尝试创建一个新的简单程序来测试触摸事件，但它的工作原理相同，所有触摸输入都作为鼠标事件发送，即使光标从鼠标箭头变为触摸十字准线。

我多次重新启动计算机并重新安装了驱动程序，但它似乎没有改变任何东西。我尝试使用具有不同驱动器的不同品牌的触摸屏，这些驱动器也可以正常工作，并且遇到了完全相同的问题。使用触摸屏的内置测试工具，我可以看到触摸和多点触控按预期工作，并且查看系统属性的笔和触摸部分确认计算机正在识别触摸屏。

编辑：我继续测试显示器，似乎多点触控在其他 Windows 程序（如绘画）中工作。触摸似乎仅在我的应用程序中不起作用。

有没有其他人经历过这种情况或知道如何重新启用触摸事件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-06T08:38:12.697

这听起来不像是驱动程序问题。可能是在您发布[TouchCapture](http://msdn.microsoft.com/en-us/library/system.windows.contentelement.releasetouchcapture.aspx)的某个着陆事件中。你需要检查你的代码。搜索`.ReleaseTouchCapture(e.TouchDevice);`并检查您是否在正确的地方使用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2020-04-09T11:09:23.843

回答这个具体问题有点晚了，但由于我遇到了类似的问题，我花了一段时间才找到解决方案，这就是我想出的。在 WPF 中，按钮上的单击事件会禁用触摸输入。一个简单的解决方法是这个新类：

```
public class TouchButton : Button
{
    public TouchButton()
    {
        TouchDown += TouchButton_TouchDown;
    }

    private void TouchButton_TouchDown(object sender, System.Windows.Input.TouchEventArgs e)
    {
        RaiseEvent(new RoutedEventArgs(ClickEvent));
    }
} 
```

如果您将 Xaml 中的按钮更改为 TouchButtons，则单击将由 touch(down) 自动触发。它非常简单，可以轻松适应各种情况。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-07T13:23:52.787

不知何故，将 Window 转换为 UserControl 并在 WinForms Window 中托管解决了问题，并且触摸事件像以前一样触发。

# java - 春季批量写入固定格式文件

> ID：11139496
> 
> 赞同：2
> 
> 时间：2012-06-21T13:40:18.687
> 
> 标签：java, string, spring, spring-batch

我有一个项目编写器，如下所示：

```
<beans:property name="lineAggregator">
<beans:bean class="org.springframework.batch.item.file.transform.FormatterLineAggregator">
        <beans:property name="fieldExtractor">
                <beans:bean class="org.springframework.batch.item.file.transform.BeanWrapperFieldExtractor">
                 <beans:property name="names" value="column1, column2, column3, column4 " /> 
                </beans:bean>
            </beans:property>

            <beans:property name="format" value="%-8s%-12s%-11s%-16s" /> 
        </beans:bean>
    </beans:property> 
```

很明显，我将 4 列写入固定格式文件，列长分别为 8、12、11 和 16。

但是，假设第 1 列字符串是 14 个字符而不是 8 个字符，那么输出文件会通过将整行向前推来盲目地容纳所有 14 个字符。

```
THIS IS A TEST

Expecting: 
THIS IS COL2STARTS

Getting: 
THIS IS A TESTCOL2STARTS 
```

如何避免这种情况？

剩下的字符不应该被截断，只写前 8 个字符吗？

我是否需要在我的代码中进行验证以严格按照列的预期仅传递 8 个字符？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:25:00.923

您必须设置精度和宽度。试试这个格式化字符串：

```
<beans:property name="format" value="%-8.8s%-12.12s%-11.11s%-16.16s" /> 
```

**请参阅：[FormatterLineAggregator](http://static.springsource.org/spring-batch/apidocs/org/springframework/batch/item/file/transform/FormatterLineAggregator.html)，[Formatter](http://docs.oracle.com/javase/6/docs/api/java/util/Formatter.html)**

# android - Android - 如何识别应用程序是否以 root 模式安装？

> ID：11139497
> 
> 赞同：0
> 
> 时间：2012-06-21T13:40:20.933
> 
> 标签：android, root

我可以获取设备上安装的应用程序列表（PackageInfo/ApplicationInfo），但想知道每个应用程序是默认安装还是由电话公司安装（在巴西，公司安装了一些未经 root 权限我们无法删除的应用程序） . 我正在考虑确定应用程序是否处于 root 模式，但我不知道该怎么做。有人会帮助我吗？

* * *

我想要这样的东西：

```
PackageManager pm = context.getPackageManager();
List<PackageInfo> packagesInfo = pm.getInstalledPackages(PackageManager.GET_META_DATA);
for (PackageInfo packageInfo : packagesInfo) {
    if (isPackageRooted(packageInfo) { // this method I need!!!!!
        // Do stuff
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:53:35.593

如果您想在手机上安装应用程序列表，请执行以下操作

您可能比查看 Android 源代码做得更糟。您可以在线浏览它，从这里开始：

[android.git.kernel.org Git](http://android.googlesource.com/)

虽然如果您希望能够搜索和检查交叉引用，您可能希望下载所有代码，并在 Eclipse 中查看。

这是设置应用程序中 ManageApplications 类的链接。它应该是一个很好的起点，因为它必须列出所有的应用程序。您可能想查看一个名为 getInstalledApps() 的方法。

android.git.kernel.org Git -[平台/包/应用程序/Settings.git/blob - src/com/android/settings/ManageApplications.java](http://android.googlesource.com/?p=platform/packages/apps/Settings.git;a=blob;f=src/com/android/settings/ManageApplications.java;h=dfff8c92fdb738c6d84a387d24d40d98706b867d;hb=HEAD)

在上面的课程中，您可以区分根应用程序和用户应用程序。

如果你想从 Rooted Android 手机中删除默认应用程序链接在[这里..](http://androidadvices.com/remove-default-applications-rooted-android-phones/)

希望这对你有帮助..

# sql - 将 XCODE 开发连接到 SQL Azure 数据库需要什么？

> ID：11139500
> 
> 赞同：0
> 
> 时间：2012-06-21T13:40:29.143
> 
> 标签：sql, ios, xcode, azure, odbc

我有一个现有的 SQL Azure 数据库，其前端范围从 .NET 到 MS-Access 2010。对于 Access 用户，我只需要一个 sqlncli 驱动程序加上 Access 运行时、一个开放的防火墙和一个标准的 ODBC 连接字符串。我现在正在开发一个额外的基于 iPhone 的组件，并且需要合适的框架/api 来建立连接。我可以使用什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:50:04.637

我建议不要让您的 iPhone 客户端直接连接到 SQL Azure。这意味着您需要为所有这些客户端打开 SQL Azure 防火墙，并且还需要每个设备上的 SQL Azure 凭据。

而且您只是不想让移动应用程序依赖于数据库。您希望灵活，允许您在不影响客户端应用程序的情况下更改数据库。在受控环境中，这“可能”是可以接受的，但对于移动应用程序，您不能指望立即在所有设备上完成更新。

这就是为什么我建议在你的 iPhone 应用程序和你的后端（SQL Azure 或其他）之间创建一个 API。[使用ASP.NET Web API](http://www.asp.net/web-api)很容易做到这一点，这有两个优点：

*   例如，您的 iPhone 应用程序将使用 JSON 连接到您的 API。这里没什么特别的，这是 iOS 应用程序的标准。
*   您的 ASP.NET Web API 应用程序可以简单地使用 Entity Framework 或 SqlConnection/SqlCommand 连接到 SQL Azure。又是相当标准的东西，不需要特殊的技巧。

而且由于您在双方都使用标准实现，因此您将能够在互联网上找到大量文档。

这些链接可以帮助您入门：

*   [使用 ASP.NET MVC 4 Beta 和 ASP.NET Web API 制作 JSON Web API](http://www.hanselman.com/blog/OneASPNETMakingJSONWebAPIsWithASPNETMVC4BetaAndASPNETWebAPI.aspx)
*   [使用 RestKit 开发 RESTful iOS 应用程序](http://mobile.tutsplus.com/tutorials/iphone/restkit_ios-sdk/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:50:49.480

您需要创建一个服务（`WCF`最好是服务）并与之通信。你不能直接连接到`SQL Server`，即使你可以，那也是一个非常糟糕的主意，而且完全不安全。

# javascript - 根据 div 中的背景颜色更改文本颜色

> ID：11139501
> 
> 赞同：3
> 
> 时间：2012-06-21T13:40:29.957
> 
> 标签：javascript, css

我有一个 div 并且必须在上面放置一些文本。div的背景是动态生成的。所以我想根据背景来决定文本颜色。

到目前为止，我已经尝试过了。

```
function invert(color){
   return (color.replace('#','0x')) > (0xffffff/2) ? 'black' : 'white'
} 
```

使用这个我得到黑色的红色。`invert('#ff0000') => black`（虽然白色配红色更好看）

这种方法可以吗？或者有没有其他更好的方法..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:13:27.270

这是我在 jsfiddle 中使用 jQuery 提出的快速解决方案

另请注意，如果您使用此方法，背景颜色的值可以是从 rgb(50, 205, 50) 到石灰到 #32CD32 的任何值，它仍然可以工作。

对于您的 html：

```
<div id="test" style="background-color: #000000;">Can you see this text?</div>​ 
```

和javascript：

```
$(document).ready(function(){
    var color = $('#test').css('background-color');
    var startIndex = color.indexOf('(') + 1;
    var lastIndex = color.indexOf(')');

    var values = color.substr(startIndex, lastIndex - startIndex).split(',');

    var r = 0;
    var g = 0;
    var b = 0;

    $(values).each(function(i) {
        if (i == 0) {
            r = 255 - values[i];
        }
        if (i == 1) {
            g = 255 - values[i];
        }
        if (i == 2) {
            b = 255 - values[i];
        }
    });

    $('#test').css('color', 'rgb(' + r + ',' + g + ',' + b + ')');
});​ 
```

编辑：非 jquery 方式（不适用于石灰、蓝色、红色等颜色名称）

```
function invert(color) {
    var startIndex = color.indexOf('(') + 1;
    var lastIndex = color.indexOf(')');

    var values = color.substr(startIndex, lastIndex - startIndex).split(',');

    var r = 0;
    var g = 0;
    var b = 0;

    for(i= 0; i < values.length; i++) {
        if (i == 0) {
            r = 255 - values[i];
        }
        if (i == 1) {
            g = 255 - values[i];
        }
        if (i == 2) {
            b = 255 - values[i];
        }
    }
    return 'rgb(' + r + ',' + g + ',' + b + ')';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:13:38.310

使用此问题的最高投票答案底部概述的方法 -[如果已知背景颜色，如何找到好看的字体颜色？](https://stackoverflow.com/questions/301869/how-to-find-good-looking-font-color-if-background-color-is-known)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-03T02:21:00.750

这适用于每种颜色。

```
var luminance = {r: 0.2126, g: 0.7152, b:0.0722};
var color = '#ffaa11'; // your color
var r = parseInt(color.substring(1,3), 16);
var g = parseInt(color.substring(3,5), 16);
var b = parseInt(color.substring(5), 16);
var rgb = [r / 255, g / 255, b / 255];
for (var i = rgb.length; i--; )
    rgb[i] =
        rgb[i] <= 0.03928 ?
            rgb[i] / 12.92 :
            Math.pow(((rgb[i] + 0.055) / 1.055), 2.4);
var thresh = ((luminance.r * rgb[0]) +
              (luminance.g * rgb[1]) +
              (luminance.b * rgb[2]));
// now if thresh > 0.22 set text color to #222
// else set it to #ccc
// you now have readable text on every hex background. 
```

# mysql - mysql选择行然后复制行并更新值

> ID：11139504
> 
> 赞同：0
> 
> 时间：2012-06-21T13:40:37.190
> 
> 标签：mysql, select, insert

是否有一种 mysql 语法可以从表中执行选择值，然后将这些值复制到同一个表中，但更新副本的几列？

表（`ticket`s），`id`是主键，auto_increment：

```
id | name | start_date | end_date | value | active 
```

*   `name`从给定几个值（如、`start_date`和）的`end_date`工单中选择一行`value`
*   复制与语句匹配的行，但将值更新为`x`
*   插入带有更新的副本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:04:54.943

这将插入与 SELECT..WHERE 语句中的条件匹配的任何行的副本，新行的主键 ID 根据您的规范自动生成。

```
INSERT INTO `tickets`(`name`, `start_date`, `end_date`, `value`, `active`)    
SELECT `name`, `start_date`, `end_date`, `value`+[value_modifier], `active`
FROM `tickets`
WHERE `name`       = '[name value]' AND
      `start_date` = [start_date]   AND  -- assuming date is timestamp otherwise wrap in '
      `end_date`   = [end_date]     AND
      `value`      = [some_value]        -- assuming value is number 
```

如果只是需要更新 - 但不是复制 - 符合某些条件的行，那么显然您只需使用 UPDATE 语句

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:40:23.210

不太清楚你在做什么，这可能会有所帮助吗？

```
INSERT INTO tickets SELECT t.startdate,t.endate, 'x' value FROM tickets t WHERE t.start_date = ? AND t.end_date = ? AND t.name = ? AND t.value = ? 
```

# javascript - 我可以在单独的线程中运行 UIWebView 吗？

> ID：11139509
> 
> 赞同：3
> 
> 时间：2012-06-21T13:40:43.043
> 
> 标签：javascript, ios, multithreading, uiwebview

我有一个运行 JavaScript 应用程序的 web 视图，有时它会在主线程执行更繁重的工作（如 xhr 调用和初始化视频播放器）时冻结/挂起。是否可以在单独的线程中运行 UIWebView 以避免 Web 视图被阻止？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:58:55.223

`UIWebView`可以调用`UIKit`主线程中的哪个。将其放在单独的线程中可能会导致崩溃。你不能在后台线程上创建视图，那是 UI 的东西。正如保罗在评论中所说，你最好的选择是将任何其他捆绑主线程的东西移到它自己的队列中。

# ruby-on-rails - 使用 ENV var 仅指定数据库名称

> ID：11139510
> 
> 赞同：0
> 
> 时间：2012-06-21T13:40:47.563
> 
> 标签：ruby-on-rails, ruby, apache, passenger

我知道我可以为每个虚拟主机定义 DATABASE_URL 并覆盖应用程序的 config/database.yaml 文件。但我不想在每个虚拟主机的文件中复制主机、密码等。所以我的计划是在一般的 httpd.conf 文件中指定主机名、用户名、密码配置一次，然后为每个虚拟主机配置数据库名称。

而不是为每个虚拟主机使用它

```
SetEnv DATABASE_URL mysql://username:password@host/database 
```

我想为 http.conf 做这个

```
SetEnv DATABASE_URL mysql://username:password@host 
```

这对于每个虚拟主机

```
SetEnv DATABASE_NAME APP-SPECIFIC-DB-NAME 
```

我怎样才能实现这种 DRY 配置？无需修改任何应用程序的代码。

# php - 无法在 Magento 1.6.2 中更新产品的库存项目数量

> ID：11139516
> 
> 赞同：5
> 
> 时间：2012-06-21T13:40:57.967
> 
> 标签：php, magento, magento-1.6

我正在尝试从脚本中更新 Magento 中产品的库存数量。

我加载产品，设置库存数量并保存 - 但数量保持不变。

```
// get stock data
$stockData = $product->getStockItem();
printf(PHP_EOL.'Stock: qty=%d, instock=%s, man_stock=%s, use_cfg_man_stock=%s'.PHP_EOL,
    $stockData->getData('qty'),
    $stockData->getData('is_in_stock'),
    $stockData->getData('manage_stock'),
    $stockData->getData('use_config_manage_stock')
);
// prints out qty=0, instock=, man_stock=, use_cfg_man_stock=

// $stockQty = 1
$product->stockItem->setData('qty', $stockQty);
$product->stockItem->setData('is_in_stock', $stockQty>0 ? 1 : 0);
$product->stockItem->setData('manage_stock', 1);
$product->stockItem->setData('use_config_manage_stock', 0);

$product->save();                           
$product->load();                           
$stockData = $product->getStockItem();
printf('New Stock: qty=%d, instock=%s, man_stock=%s, use_cfg_man_stock=%s'.PHP_EOL,
    $stockData->getData('qty'),
    $stockData->getData('is_in_stock'),
    $stockData->getData('manage_stock'),
    $stockData->getData('use_config_manage_stock')
);
// prints out qty=0, instock=, man_stock=, use_cfg_man_stock= 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-06-21T14:47:27.103

您所缺少的只是保存`$stockItem`. 您无需创建新`stock_item`产品，也无需保存产品。

```
if (!($stockItem = $product->getStockItem())) {
    $stockItem = Mage::getModel('cataloginventory/stock_item');
    $stockItem->assignProduct($product)
              ->setData('stock_id', 1)
              ->setData('store_id', 1);
}
$stockItem->setData('qty', $stockQty)
          ->setData('is_in_stock', $stockQty > 0 ? 1 : 0)
          ->setData('manage_stock', 1)
          ->setData('use_config_manage_stock', 0)
          ->save(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:57:15.453

我自己解决了：

```
// get stock data
$stockData = $product->getStockItem();
printf(PHP_EOL.'Stock: qty=%d, instock=%s, man_stock=%s, use_cfg_man_stock=%s'.PHP_EOL,
    $stockData->getData('qty'),
    $stockData->getData('is_in_stock'),
    $stockData->getData('manage_stock'),
    $stockData->getData('use_config_manage_stock')
);
// prints out qty=0, instock=, man_stock=, use_cfg_man_stock=

// $stockQty = 1
$stockItem = Mage::getModel('cataloginventory/stock_item');
$stockItem->assignProduct($product);
$stockItem->setData('is_in_stock', 1);
$stockItem->setData('stock_id', 1);
$stockItem->setData('store_id', 1);
$stockItem->setData('manage_stock', 0);
$stockItem->setData('use_config_manage_stock', 0);
$stockItem->setData('min_sale_qty', 0);
$stockItem->setData('use_config_min_sale_qty', 0);
$stockItem->setData('max_sale_qty', 1000);
$stockItem->setData('use_config_max_sale_qty', 0);
$stockItem->setData('qty', $stockQty);
$stockItem->save();

$product->save();                           
$product->load();                           
$stockData = $product->getStockItem();
printf('New Stock: qty=%d, instock=%s, man_stock=%s, use_cfg_man_stock=%s'.PHP_EOL,
    $stockData->getData('qty'),
    $stockData->getData('is_in_stock'),
    $stockData->getData('manage_stock'),
    $stockData->getData('use_config_manage_stock')
);
// prints out qty=1, instock=1, man_stock=0, use_cfg_man_stock=0 
```

通过创建一个新的 StockItem，并将其分配给产品。希望这对其他人有帮助。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-01T05:08:48.787

要显示产品的库存数量 -

```
 <?php echo $stock = Mage::getModel('cataloginventory/stock_item')->loadByProduct($_product); ?> 
```

如果你想显示个人数据使用这个 -

```
<?php echo $stock->getQty(); ?> // Will display stock quantity
<?php echo $stock->getMinQty(); ?> // Will display minimum quantity
<?php echo $stock->getMinSaleQty(); ?> //will display minimum salable quantity 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-01-05T12:22:36.967

就我而言，我以编程方式导入的产品遇到了同样的问题。我刚刚意识到我忘了在数组中添加*stock_data* ......

```
'name' => $productName,
'stock_data' => array(
                        'use_config_manage_stock' => 0,
                        'manage_stock' => 0,
                        'qty' => 0,
                        'stock_id' => 1,
                        'min_qty' => 0,
                    ) 
```

如果没有库存数据信息，Magento 在将产品添加到购物车时会生成异常（在 \Mage_CatalogInventory_Model_Stock_Item）。

有了这个节点，它就可以工作了。=)

# gcc - SCons：保存/重定向 gcc 文本输出（警告）

> ID：11139519
> 
> 赞同：6
> 
> 时间：2012-06-21T13:41:09.217
> 
> 标签：gcc, scons, io-redirection

我正在使用[SCons](http://www.scons.org)在工作中构建一个项目，并且我正在尝试解析来自 GCC 的文本输出，以便为每个目标生成所有编译器警告的摘要报告，因为我们的构建脚本很长，并且有一个大量文本输出到控制台。

我已经在 Google 和这个网站上搜索了很长一段时间，但我找不到 SCons 内置的方法来完成这项工作。[我已经尝试按照这个示例](http://scons.org/wiki/BuildLog)将整个 stdout 和 stderr 流重定向到一个文件，但只捕获 SCons 本身的输出，而不是它调用的任何工具的输出。

我的下一个想法是找到 SCons 编译参数以发送到 GCC 的位置，并将重定向添加到参数字符串的末尾。阅读文档后，似乎构造变量`CCCOM`并`CXXCOM`包含用于编译的命令行。但是，当我将以下几行添加到我的 SConstruct 时，SCons 正在执行的命令行中没有任何变化。

```
baseEnv['CCCOM'] += " 2> gcc-c-output.txt"
baseEnv['CXXCOM'] += " 2> gcc-cxx-output.txt" 
```

起作用的一件事是在整个 SCons 命令上重定向 stderr 流：

```
scons 2> stderr.txt 
```

但是，我想避免这种情况，并尽可能将所有内容包含在 SCons 中。输出也不一定必须转到文件。只要我可以访问它以在构建结束时解析并保存到文件中，它就可以保存在任何地方。

我已经搜索了这么久，也没有找到任何东西，所以我不知道还有什么可以尝试的。我必须相信我不是第一个想要做这样的事情的人。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T21:42:41.510

当我弄清楚我做错了什么时，我将在这里回答我自己的问题。`CCCOM`和变量是要修改的`CXXCOM`正确变量，但问题是我正在创建共享库对象，因此没有使用这些变量。我应该修改的是`SHCCCOM`和`SHCXXCOM`。

以下代码完成了重定向 GCC 警告输出的工作（警告和错误仅写入 stderr）：

```
baseEnv['SHCCCOM'] += " 2> gcc-c-output.txt"
baseEnv['SHCXXCOM'] += " 2> gcc-cxx-output.txt" 
```

希望这个答案能帮助其他人，因为我在搜索时找不到关于这个主题的太多信息。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-07-18T18:44:06.837

为了完全控制，您可以覆盖`env['SPAWN']`构造变量。然后，您将提供一个 Python 方法，该方法将负责执行由参数提供给它的命令行。通常，您会采用此参数并生成一个子进程（使用某种形式的`subprocess.Popen`）。这将对 default 进行直通替换`env['SPAWN']`。

但是现在，您可以完全控制`subprocess.Popen`调用。您可以自由重定向`STDOUT`，`STDERR`或两者都重定向到任何缓冲区/文件。您还可以在将其打印到控制台和/或将其保存到文件之前对该输出进行后期处理。例如，我用它来为黄色警告和红色错误着色。

有关如何覆盖的示例代码`env['SPAWN']`，请查看SCons Wiki 上的[此页面。](http://scons.org/wiki/BuildLog "这一页")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:51:36.663

代替`CCCOM`and`CXXCOM`构造变量，您是否尝试过使用`CC`and`CXX`变量？[这是](http://www.scons.org/doc/production/HTML/scons-user/a4916.html)SCons 构造变量的完整列表，以防万一。

您甚至可以考虑在您的系统上设置`CC`和设置内部执行重定向的脚本。`CXX`

编辑：我忘了提到`CCCOM`and`CXXCOM`变量是用于实际编译源文件的命令，包括所有 CFlags 等。我很惊讶你能够设置它们，因为我认为它们是只读变量。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-07-29T10:14:51.100

使用如下；

`baseEnv['CCCOM'][0] += " 2> gcc-c-output.txt"`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-07-29T18:09:31.130

怎么样：

```
baseEnv['SHCCCOM'] += " 2> ${SOURCE}gcc-c-output.txt"
baseEnv['SHCXXCOM'] += " 2> ${SOURCE}gcc-cxx-output.txt" 
```

这应该为每个源文件提供一个单独的文件..

# c# - 在后台加载一个窗口，直到告诉它显示

> ID：11139520
> 
> 赞同：2
> 
> 时间：2012-06-21T13:41:09.683
> 
> 标签：c#, winforms, multithreading

我正在维护一个较旧的 winforms 应用程序，由于数据库查询、数据网格自定义和加载大量数据，第一个窗口需要 3-5 秒才能加载。

我应该为此添加一个前屏幕，用户可以在此旧窗口和尚未实现的新功能之间进行选择。

因此，除了重构一些数据库查询和其他旧代码之外，我还想通过执行以下操作来改进此窗口的加载时间：

1.  用户进入前屏
2.  慢速加载窗口开始加载，就像现在一样，但在另一个线程中隐藏并在后台，而前屏幕窗口处于活动状态。如果在用户实际单击按钮打开窗口之前窗口已完全加载，那么它仍然应该是隐藏的。
3.  如果用户单击按钮打开窗口，它将立即显示，因为它已经加载并准备就绪。

这就是我所拥有的：

```
private void startBackgroundLoading()
{
var myThread = new Thread(openSlowLoadingWindow);
myThread.SetApartmentState(ApartmentState.STA);
myThread.Start();
}

private void openSlowLoadingWindow()
{
System.Windowns.Forms.Application.Run(new SlowWindow());
} 
```

我正在使用 Application.Run() 因为上面说明的两个窗口（前屏和慢速加载）位于不同的项目中。

显然，上面的代码将启动新线程并在加载完成后向我显示窗口，但如上所述，我想告诉它何时实际显示自己。

我尝试了几种方法来在后台运行新线程、隐藏窗口和其他各种东西。

我对编程比较陌生，所以如果我从完全错误的角度进行攻击，请告诉我如何改进。

我绑定到 .net 4.0，所以新的 async/await 东西不是一个选项。

最好的问候， 埃里克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:47:05.710

您是否尝试过在并行线程中创建（但不运行）慢速加载窗口，然后在需要时简单地显示该窗口？

这将在数​​据库调用和显示窗口的缓慢方面位于窗口的构造函数中的情况下起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T08:26:49.247

您可以尝试将此事件处理程序添加到慢速表单：

```
 private void SlowWindow_Shown(object sender, EventArgs e)
    {
        Hide();
    } 
```

并添加此方法以从正面屏幕调用：

```
 public void ShowCrossThread()
    {
        this.Invoke(new Action(() => { Show(); }));
    } 
```

然后在前面的屏幕中，您需要执行以下操作：

```
 SlowForm _slowForm;

    private void openSlowLoadingWindow()
    {
        _slowForm = new SlowForm();
        System.Windows.Forms.Application.Run(_slowForm);
    }

    private void btnSlowForm_Click(object sender, EventArgs e)
    {
        _slowForm.ShowFromThread();
        Hide();
    } 
```

# html - 如何阻止 FLEX 缓存？

> ID：11139521
> 
> 赞同：0
> 
> 时间：2012-06-21T13:41:13.617
> 
> 标签：html, apache-flex, caching, adobe

我正在使用我自己没有设计的 flex 应用程序，事实上我真的不太了解 flex 的工作原理。我想禁用所有缓存，因为自从我们更改为新的付款方式后，它会导致很多问题。

我知道禁用缓存并不理想，但目前只需要这样做。我为此找到了服务器端解决方案，但我的实现似乎不起作用。

我尝试在标题中设置它，这是我的 index.html 的一段代码

```
<head>
<meta http-equiv="Cache-Control" content="no-cache"/>
<meta http-equiv="expires" content="0"/>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
........... 
```

也许在这件事上有经验的人愿意帮忙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:59:30.233

Flex 应用程序实际上只是一个 Flash 文件，它是一个带有`.swf`扩展名的文件。就像网页中的任何其他资产一样，您只需更改文件名即可使其重新加载。您可以做的最好的事情是在该文件名中**包含一个内部版本号**。

假设在调用文件的那一刻`MyApp.swf`，您可以将其重命名为`MyApp-2.0.swf`并在发布新版本时更改内部版本号。
另一种选择是将内部版本号作为 URL 参数传递，如下所示：`MyApp.swf?v=2.0`，但根据我的经验，这不太可靠。

也不要忘记服务器可能会缓存整个页面。如果是这种情况，`MyApp.swf`即使您更改了名称，它也会继续加载 old 。如何防止这种情况，取决于服务器端语言。

# java - 创建同一类的不同实例，哪种设计模式？

> ID：11139524
> 
> 赞同：2
> 
> 时间：2012-06-21T13:41:21.303
> 
> 标签：java, design-patterns

我有一个自定义对象`ExportType`：

```
public class ExportType{

    protected String name;      
    protected FetchingStrategy fetchStg;
    protected ExportStrategy exportStg;

    public ExportType(String name, FetchingStrategy fetch, ExportStrategy export) {
            this.name = name;
        this.fetchStg = fetch;
        this.exportStg = export;
    }

    // ...
} 
```

在我的应用程序中，我必须创建一个具有不同`FetchingStrategy`和`ExportStrategy`. 将来可以通过实现新的`FetchingStrategy`and来创建新的导出类型`ExportStrategy`，因此我想将我的应用程序设计为尽可能灵活。

是否有我应该应用的设计模式来获得我需要的东西？`TypeFactory`为每个特定实例创建不同`ExportType`的方法是正确的方法吗？

**更新**

我试图总结我的问题：我正在开发一个用于从数据库导出数据的 Web 应用程序。我有几种方法可以从 DB( `ExportType`s) 中提取数据，这些类型是通过 和 的不同组合获得`FetchingStrategy`的`ExportStrategy`。现在我需要创建这些“组合”的列表，以便在必要时调用它们。我可以创建如下常量：

```
public static final ExportType TYPE_1 = new ExportType(..., ...); 
```

但我想以某种方式实现它，以便将来可以添加新的组合/类型。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:45:12.807

最好的设计模式是使用为所有东西返回接口的工厂。然后你可以抽象出所有的实现，让你可以灵活地扩展和改变你的系统。

Spring 依赖注入是一个非常好的解决方案

你最大的问题可能在数据库级别，这更难抽象

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:47:03.153

您可以使用 AbstractFactory： [http ://en.wikipedia.org/wiki/Abstract_factory_pattern](http://en.wikipedia.org/wiki/Abstract_factory_pattern)

有关您计划使用这些方式的更多详细信息可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:01:15.490

为了尽可能灵活，不要使用具体类。使用界面。

我建议 Spring IoC 在 ExportType 中注入不同的 FetchingStrategy 和 ExportStrategy 实现。

```
public class SomeExportType implements IExportType{

    protected String name;
    @Autowired(@Qualifier="SomeFetchingStrategy")      
    protected IFetchingStrategy fetchStg;
    @Autowired(@Qualifier="SomeExportStrategy")      
    protected IExportStrategy exportStg;

    // ...
}

public interface IExportType {
     public void doSomething();  //
}

public interface IFetchingStrategy {
   public void fetch();
}

public class SomeFetchingStrategy implements IFetchingStrategy {

    public void fetch() {
        //implement this strategy
    }

} 
```

# jquery - jQuery .load() - 通过加载内容中的链接将外部页面的内容加载到同一页面中

> ID：11139527
> 
> 赞同：2
> 
> 时间：2012-06-21T13:41:33.403
> 
> 标签：jquery

我正在使用`.load()`.

在我的`index.html`我有这个代码：

```
$(document).ready(function(){
   $("#conteudo_mostrar").load("inicial.html");
}); 
```

和

```
<div id="conteudo_mostrar"></div> 
```

所以，在我的`inicial.html`我有另一个链接`contact.html`，当有人单击该链接（内部的联系链接`inicial.html`）时，我需要替换`inicial.html`以包含在页面上`contact.html`的同一 div中`#conteudo_mostrar``index.html`

怎么做？？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:47:35.223

您可以使用`.get()`并假设您有以下链接`contact.html`：

```
<a href="contact.html" id="lnkContact">Contact</a> 
```

然后：

```
$(document).ready(function() {
    $.get('inicial.html', function(data) {
        $('#conteudo_mostrar').html(data);
    });

    $('#lnkContact').live('click', function(e) {
        e.preventDefault();
        $.get((this).attr('href'), function(data) {
            $('#conteudo_mostrar').html(data);
        });
    });
}); 
```

如果您要添加更多链接，您只需对每个`id`. 如果您有另一个链接，让我们说`gallery.html`：

```
<a href="gallery.html" id="lnkGallery">Gallery</a> 
```

您只需要将它附加到您的代码中，就像 中的一样`lnkContact`，只需将其更改为`lnkGallery`：

```
$('#lnkGallery').live('click', function(e) {
    e.preventDefault();
    $.get((this).attr('href'), function(data) {
        $('#conteudo_mostrar').html(data);
    });
}); 
```

您的整个代码现在将是：

```
$(document).ready(function() {
    $.get('inicial.html', function(data) {
        $('#conteudo_mostrar').html(data);
    });

    $('#lnkContact').live('click', function(e) {
        e.preventDefault();
        $.get((this).attr('href'), function(data) {
            $('#conteudo_mostrar').html(data);
        });
    });

    $('#lnkGallery').live('click', function(e) {
        e.preventDefault();
        $.get((this).attr('href'), function(data) {
            $('#conteudo_mostrar').html(data);
        });
    });
}); 
```

对于所有其他链接，您只需要进行相同的更改。前提是你有一个`id`属性来区分每个链接。

**普雷斯顿的一种更有效的方法**

按类别标记每个链接`link`：

```
<a href="contact.html" class="link">Contact</a>
<a href="gallery.html" class="link">Gallery</a> 
```

然后：

```
$(document).ready(function() {
    $.get('inicial.html', function(data) {
        $('#conteudo_mostrar').html(data);
    });

    $('.link').live('click', function(e) {
        e.preventDefault();
        $.get((this).attr('href'), function(data) {
            $('#conteudo_mostrar').html(data);
        });
    });
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:48:19.503

基于问题澄清的修订：

这很简单。您只需要使用[live](http://api.jquery.com/live/)链接类/ID。这会将链接绑定到页面上可能尚不存在的元素。然后，在绑定点击事件中，像这样加载 content.html：

```
$(document).ready(function(){
    // Load the initial content
    $("#conteudo_mostrar").load("inicial.html");
    $("#contact_link").live("click", function() {
        $("#conteudo_mostrar").load("contact.html");
    }
}); 
```

# shell - 找不到套接字传输“ssl”，CakePHP 从 shell 发送电子邮件

> ID：11139528
> 
> 赞同：5
> 
> 时间：2012-06-21T13:41:37.240
> 
> 标签：shell, cakephp, cron, openssl, wamp

我正在尝试使用 CakePHP shell 从 cron 发送电子邮件，但我收到以下错误“无法找到套接字传输“ssl” - 您在配置 PHP 时是否忘记启用它？：0”。

问题仅在本地服务器上，我使用的是 WAMP 服务器并且 php_openssl 扩展已正确打开。当我检查是否从控制器加载扩展时，一切似乎都很好，但是当我调试 shell 操作时，似乎没有加载扩展。此外，当我尝试从控制器发送电子邮件时，电子邮件已成功发送。我正在使用 gmail 凭据，因此是 ssl 要求。

谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-23T11:09:38.917

找到解决方案，您似乎必须取消注释可在 (wamp 的路径)\bin\php(您的 php 版本)\php.ini 中找到 openssl 扩展名的行，因为有 2 个 php.ini 文件，仅启用它在 (wamp 的路径)\bin\apache(apache 版本)\bin\php.ini 是不够的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-14T11:06:13.597

您需要设置 php 和 apache

> ```
> Check ssl_module in the Apache modules.
> Check php_openssl in the PHP extensions. 
> ```

# php - 无法用有效的中文写入文件

> ID：11139529
> 
> 赞同：0
> 
> 时间：2012-06-21T13:41:49.680
> 
> 标签：php, unicode, utf-8

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:39:12.617

Simple: Notepad, Wordpad and Word are all Microsoft products which ~~notoriously suck with encodings~~ expect UTF-8 encoded files to begin with a [BOM](http://en.wikipedia.org/wiki/Byte_order_mark). If you don't include the BOM, they do not recognize the encoding correctly and misinterpret the file.

It is not typically recommended to add a BOM to UTF-8 encoded files, only the Microsoft universe seems to require/prefer it. You need to decide which is worse: possibly introduce problems by including a BOM or having to somehow manually open the file in Word/Note(-pad) with the right encoding.

A BOM in PHP is simply this:

```
$bom = "\xEF\xBB\xBF"; 
```

Prepend it to your file.

# networking - How to invoke "map a network drive"?

> ID：11139531
> 
> 赞同：0
> 
> 时间：2012-06-21T13:41:52.813
> 
> 标签：networking, vbscript

I'm using a script which is calling (via sh.run) "net use". On the first computer, net is allowed to be run by my user. On the second one, net is an unauthorized command (restricted by a domain policy).

Could I simply copy/rename/move the net.exe in order to execute it, even if it is not allowed? If not, is there a way to invoke the "GUI style" connector?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T15:05:22.117

如何连接`H:`到的示例`\\myserver\users`

```
Dim objNetwork
Set objNetwork = WScript.CreateObject("WScript.Network")
strLocalDrive = "H:"
strRemoteShare = "\\myserver\users"
objNetwork.MapNetworkDrive strLocalDrive, strRemoteShare, False 
```

# android - How to get Bitmap byte count in API level 11?

> ID：11139536
> 
> 赞同：3
> 
> 时间：2012-06-21T13:42:15.023
> 
> 标签：android

There is a useful method `bitmap.getByteCount()` since API level 12\. But how to get same value in API 11?

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T13:46:32.460

正如 dmon 所提到的，根据[这个问题](https://stackoverflow.com/questions/6428193/where-the-heck-is-bitmap-getbytecount) `bitmap.getByteCount()`的评论，这只是一个方便的方法，它返回`bitmap.getRowBytes() * bitmap.getHeight()`. 因此，您可以改用自定义方法：

```
public static long getSizeInBytes(Bitmap bitmap) {
    return bitmap.getRowBytes() * bitmap.getHeight();
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2015-07-29T07:46:20.957

最好只使用支持库：

```
int bitmapByteCount=BitmapCompat.getAllocationByteCount(bitmap) 
```

或者，如果您想自己做：

```
public static int getBitmapByteCount(Bitmap bitmap) {
    if (VERSION.SDK_INT < VERSION_CODES.HONEYCOMB_MR1)
        return bitmap.getRowBytes() * bitmap.getHeight();
    if (VERSION.SDK_INT < VERSION_CODES.KITKAT)
        return bitmap.getByteCount();
    return bitmap.getAllocationByteCount();
} 
```

# visual-studio - Could not find required file 'setup.bin'

> ID：11139538
> 
> 赞同：31
> 
> 时间：2012-06-21T13:42:22.177
> 
> 标签：visual-studio, .net-4.0

I'm unable to build a Setup Project in VS2010, for a Windows Service project. It fails with this error:

> Could not find required file 'setup.bin' in 'C:\MyProject\Engine'.

My environment is *Windows 7 Professional x64* with *Visual Studio 2010 Version 10.0.40219.1 SP1Rel*

I've downloaded [Microsoft Windows SDK for Windows 7 and .NET Framework 4](http://www.microsoft.com/en-us/download/details.aspx?id=8279), repaired, then rebooted, then installed the unchecked components except Visual C++ compiler, then installed [KB2519277](http://support.microsoft.com/kb/2519277).

These are the existing registry entries:

```
HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\GenericBootstrapper\3.5
    Path = c:\Program Files (x86)\Microsoft SDKs\Windows\v6.0A\Bootstrapper\

HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\GenericBootstrapper\4.0
    Path = c:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\ 
```

These are the existing files:

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v6.0A\Bootstrapper\Engine\setup.bin

C:\Program Files (x86)\Microsoft SDKs\Windows\v7.0A\Bootstrapper\Engine\setup.bin 
```

An existing workaround is to copy the Engine directory to the project directory, however this has to be done every time you make a new project.

How can this be fixed properly?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2012-06-28T13:52:33.517

使用 Process Monitor，我发现，在尝试访问路径之前，使用 DLL 来检索此路径。以下内容可能是合法的，但我还是想分享我的发现。

DLL 位于，`C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Build.Tasks.v4.0.dll`使用的类是`Microsoft.Build.Tasks.Deployment.Bootstrapper.BootstrapperBuilder`. 使用您最喜欢的反汇编工具，您会发现最终在检索路径时进行了三次尝试。

1.  HKLM\Software\Microsoft\GenericBootstrapper\11.0\Path
2.  HKLM\Software\Wow6432Node\Microsoft\GenericBootstrapper\11.0\Path
3.  环境.当前目录

我不确定为什么它说*11.0*，据我所知，VS 2012 之前没有安装在这台机器上。

因此 SDK 安装程序中存在错误或 DLL 中存在错误。无论哪种方式，创建*11.0*注册表项并添加值都可以解决此问题。注意：必须重新启动 Visual Studio，因为在尝试检索路径后，它会被缓存。

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Microsoft\GenericBootstrapper\11.0]
"Path"="C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\Bootstrapper\\" 
```

```
Windows Registry Editor Version 5.00

[HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\GenericBootstrapper\11.0]
"Path"="C:\\Program Files (x86)\\Microsoft SDKs\\Windows\\v7.0A\\Bootstrapper\\" 
```

* * *

## 回答 #2

> 赞同：19
> 
> 时间：2015-08-27T14:21:11.003

在进入兔子洞之前，请确认您需要引导程序。如果不这样做，则可以通过执行以下操作之一将其关闭。这也将解决错误。

**GUI方式：**

1.  右键单击项目
2.  点击`Properties`
3.  单击`Publish`左侧的选项卡
4.  点击`Prerequisites...`按钮
5.  取消选中`Create setup program to install prerequisite components`

[![项目属性](../Images/4de0126db01c1e73068c890eed1f9227.png)](https://i.stack.imgur.com/IN0WF.png)

这个答案来自这篇[文章](https://social.msdn.microsoft.com/Forums/vstudio/en-US/7672078f-f2bd-4142-b8a9-740c2a8a5ae7/clickonce-bootstrapper-files-without-installing-visual-studio?forum=msbuild)。

**手动编辑`csproj`文件方式：**

1.  添加`<BootstrapperEnabled>false</BootstrapperEnabled>`到第一个`<PropertyGroup>`元素的底部

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2015-07-24T13:06:38.127

这个解决方案对我有用（VS 2013）： http: [//www.codewrecks.com/blog/index.php/2014/05/31/error-msb3147-could-not-find-required-file-setup-bin-在/](http://www.codewrecks.com/blog/index.php/2014/05/31/error-msb3147-could-not-find-required-file-setup-bin-in/)

将 msbuild.exe 的 PATH 更改为：`C:\Program Files (x86)\MsBuild\12.0\Bin\msbuild.EXE`

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2016-08-18T10:01:43.193

我在 TFS 构建时遇到了同样的问题。

您可以通过在定义构建的 MSBuild 参数中设置 Visual Studio 版本来解决该问题：

```
/property:VisualStudioVersion=12.0; 
```

[![构建定义中的 MSBuild 参数](../Images/ad71be9f289e300514c81892e4819908.png)](https://i.stack.imgur.com/yca8c.png)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2017-11-09T00:08:07.407

这是一个多步骤的解决方案。

首先确保您已安装 .Net SDK。

然后确保存在以下注册表项： `HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\GenericBootstrapper\11.0`

它必须包含一个“路径”条目，其值指向引导程序的位置： `C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\`

以下 powershell 脚本为您执行此操作：

```
$registryPath = "Registry::HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\GenericBootstrapper\11.0"
$registryValue = "C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\" 
function CreateRegistryValues {

    if(-not (Test-Path $registryPath ) )
    {
        Push-Location
        Set-Location -Path Registry::HKEY_LOCAL_MACHINE\Software\Wow6432Node\Microsoft\GenericBootstrapper
        # First add the registry item
        New-Item -Name '11.0' -Value $registryValue
        #Then add a property on it for 'Path' and the folder in bootstrapper that contains the 'Engine' folder 
        New-ItemProperty `
            -Path  $registryPath `
            -Name 'Path' `
            -PropertyType String `
            -Value $registryValue
        Pop-Location
    }else{
        Write-Warning "You already have the registry key ($registryPath) set. `r`n No action was taken `r`n "
    }
} 
```

最后，您必须将包含在 Visual Studio 工具中的“Engine”文件夹的内容复制到注册表值中列出的位置：

```
C:\Program Files (x86)\Microsoft SDKs\Windows\v8.0A\Bootstrapper\" 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-10-17T16:56:30.090

我的问题解决方案：无法发布，因为找不到 setup.bin

在 vs2008 中使用 PUBLISH 向导时，由于找不到 setup.bin，无法发布应用程序。

* * *

简短的回答是：

将文件夹粘贴`engine`到 vs2008 IDE 中的错误消息中指示的位置。

该`engine`文件夹可以在文件夹中找到`Microsoft SDKs`。

* * *

长答案是：

就我而言，vs2008 正在寻找 setup.bin 中的`C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\engine\`.

此位置在 vs2008 IDE 中的错误中指示。

该`engine`文件夹在上述位置不存在，因为该`engine`文件夹不存在。

该`engine`文件夹实际上位于`C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bootstrapper\Engine`.

`engine`通过在注册表中搜索 setup.bin 找到此文件夹位置

我`engine`从文件夹中复制了文件`Microsoft SDKs`夹并将其粘贴到`Microsoft Visual Studio 9.0`文件夹中。

此文件夹副本解决了问题并允许我发布应用程序。

以下是我采取的具体步骤：

1.  在注册表中搜索 setup.bin

2.  在注册表中找到 setup.bin 时，检查密钥并记下 setup.bin 的文件夹位置（在我的情况下是`C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bootstrapper\Engine`）

3.  在 VS2008 IDE 中，查看 ERROR 窗口并记下 setup.bin 错误的文件夹位置（在我的情况下是`C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\engine\`）

4.  vs2008 IDE 期望 setup.bin 位于`C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\engine\`，但此`engine`文件夹不存在

5.  从复制`engine`文件夹`C:\Program Files\Microsoft SDKs\Windows\v6.0A\Bootstrapper\Engine`，然后将此文件夹粘贴到 IDE 文件夹中`C:\Program Files\Microsoft Visual Studio 9.0\Common7\IDE\`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-20T02:53:59.507

我一直在努力解决这个问题。

解决方案非常简单。您必须在 Visual Studio 或 Visual Studio 构建工具中安装“clickonce 构建工具”。它是一个小组件，通常不会自动选择。

# sql-server - 将excel复制并粘贴到sql server表

> ID：11139539
> 
> 赞同：0
> 
> 时间：2012-06-21T13:42:23.953
> 
> 标签：sql-server, sql-server-2008, excel

使用 Excel 2010 和 SQL Server 2008 R2。

我使用导入和导出数据（32 位）向导将数据从 Excel 电子表格复制到 SQL Server。为什么我得到一个错误？

顺便说一句，复制和粘贴不适用于 excel 2010。它将所有数据粘贴到一个字段中。并且导入和导出向导 64 位也不起作用。它在数据源下拉菜单中根本没有 excel 选项。

谢谢。

![错误](../Images/a45b31389c118ecc699a6da3d90ea8a5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:46:43.317

您正在尝试导入 xlsx 文件（Jet Oledb 驱动程序不支持的最新版本），因此请根据您的操作系统 32/64 位下载适当的版本。这些驱动程序是 Microsoft 的免费软件。

[在您的计算机上下载 Excel 2007 驱动程序](http://www.microsoft.com/en-us/download/details.aspx?id=13255)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:03:06.060

如果您无法成功安装 Jet 引擎的驱动程序，您可以使用具有非常相似功能的 CSV（平面文本文件导入）。

# javascript - 我什至无法让 $().text 正常工作。而是输出大量代码

> ID：11139541
> 
> 赞同：5
> 
> 时间：2012-06-21T13:42:25.663
> 
> 标签：javascript, jquery, jquery-selectors

我已经设置了一个测试，所以我可以开始在 cakePHP 环境中使用 jQuery，但我什至在开始之前就遇到了问题。

我也有 twitter 引导程序，但是当我遇到这个问题时，我关闭了一切以确保不是那样。不是。

我正在 Chrome 和 Waterfox 中对此进行测试。

当我尝试时，`$('#test').html('Hello');`我什么也没得到。因此，我尝试使用以下方法发出警报：

```
$(document).ready(function() {

    $('#test').click(function() {
        alert($('#test').text);
    });
}); 
```

和

```
<span id="test">test span</span> 
```

这给了我结果：

> `function (a){return f.access(this,function(a){return a===b?f.text(this):this.empty().append((this[0]&&this[0].ownerDocument||c).createTextNode(a))},null,a,arguments.length)}`

有人可以告诉我这到底是什么，为什么我没有得到“测试跨度”。谢谢 ：）

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-06-21T13:43:37.917

'text' 是一个函数，您要输出的代码

像任何函数一样调用它

```
alert($('#test').text()); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T13:45:33.480

[`jQuery.text()`](http://api.jquery.com/text/)是一个函数，而不是一个属性。以下是你如何使用它：

```
var a = $('#test').text(); // getter
$('#test').text(a);        // setter 
```

注意：`jQuery.html()`如果您打算注入 HTML 片段，请考虑使用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:43:56.413

text 是一个函数，应该有括号

`.text()`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T13:44:01.723

`text()`是一个 jQuery 方法；这意味着它需要`text()`：

```
alert($('#test').text()); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T13:44:12.020

[`.text()`](http://api.jquery.com/text/)只会给出文本。前任，

```
alert($('#test').text()); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T13:46:45.630

要将一些文本分配给块，您需要使用：

```
$('#test').text("Hello"); 
```

请记住，这不适用于表单输入或脚本。它仅适用于实际的文本元素。要进行输入，请使用：

```
$('#test').val("Hello"); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-06-21T13:46:55.467

您需要添加括号来调用'text' 函数，例如'text()'。否则，根据标准 JavaScript 行为，函数本身的代码内容将被输出。

如果您想快速查看函数是如何组合在一起的，这将非常方便。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-06-21T14:00:30.947

你得到这个是因为如果`alert`函数的参数是，`an object`那么它会使用`.toString()`方法（[Doc](https://developer.mozilla.org/en/DOM/window.alert)）转换为字符串`object`，并且在这种情况下，你将传递一个`function object`警报函数。

引用自 MDN

> window.alert（消息）；
> 
> message 是要在警报对话框中显示的文本字符串，或者**是转换为字符串并显示的对象。**

您可以通过将以下代码粘贴到终端中来检查

```
alert($.fn.text.toString()) 
```

您将获得与现在相同的输出。

因为当`.toString()`被调用到一个函数对象时，它的定义被返回。您需要通过附加`()`函数名称来像其他任何函数一样调用该函数。

所以就像所有其他人已经说过你必须这样称呼它`alert($('#test').text());`

# html - CSS - 右侧填充中的背景图像

> ID：11139545
> 
> 赞同：1
> 
> 时间：2012-06-21T13:42:39.953
> 
> 标签：html, css

我有一个`a`右填充为 20 像素的标签。我怎样才能把这个图像的正确部分作为背景放在填充内？

![在此处输入图像描述](../Images/73c485ae3aae9fc2953abb048550ef74.png)

现在的 CSS 规则：

```
.mali_oglas_kontrola a {padding-right: 20px }
.mali_oglas_kontrola a:first-of-type {background: url('../img/resursi/mgl_kontrola.png') no-repeat -17px 0;background-position: right top}
.mali_oglas_kontrola a:first-of-type:hover {background: url('../img/resursi/mgl_kontrola.png') no-repeat -17px -20px; background-position: right} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:48:37.003

你不能..

在您的标签内插入另一个元素，该元素`a`将包含该图标..

```
<a href="...">whatever <i></i></a> 
```

并使用

```
.mali_oglas_kontrola a i{
    display:inline-block;
    width:..;/*exact width of icon*/
    height:..;/*exact height of icon*/
    background: url('../img/resursi/mgl_kontrola.png') no-repeat right top;
}
.mali_oglas_kontrola a:hover i{
    background-position: right -20px;
} 
```

# objective-c - 解析Webservice数据iOS

> ID：11139551
> 
> 赞同：2
> 
> 时间：2012-06-21T13:42:53.357
> 
> 标签：objective-c, ios, xml, web-services, nsxmlparser

大家下午好，

我已经从网络服务下载了数据，我希望解析这些数据以便我可以使用它，但是我在解析返回的值时遇到了问题，下面是获取代码，任何帮助之间的任何其他内容将不胜感激

```
 -(IBAction)runNewImport:(id)sender{

recordResults = FALSE;

soapMessage = [NSString stringWithFormat:

               @"<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n"

               "<s:Envelope \n"

               "xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\" \n"
               "xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" \n" 
               "xmlns:SOAP-ENC=\"http://schemas.xmlsoap.org/soap/encoding/\" \n"
               "s:encodingStyle=\"http://schemas.xmlsoap.org/soap/encoding/\" \n"
               "xmlns:s=\"http://schemas.xmlsoap.org/soap/envelope/\"> \n"       

               "<s:Body> \n"

               "<[FUNCTION] xmlns=\"http://tempuri.org/\"/>\n"

               "</s:Body> \n"
               "</s:Envelope>"];

[[NSURLCache sharedURLCache] removeAllCachedResponses];
NSURL *url = [NSURL URLWithString:@"http://[PATH]"];      
NSMutableURLRequest *theRequest = [NSMutableURLRequest requestWithURL:url];             
NSString *msgLength = [NSString stringWithFormat:@"%d", [soapMessage length]];          
[theRequest addValue: @"text/xml; charset=utf-8" forHTTPHeaderField:@"Content-Type"];       
[theRequest addValue: @"[FUNCTION]" forHTTPHeaderField:@"SOAPAction"];
[theRequest addValue: msgLength forHTTPHeaderField:@"Content-Length"];
[theRequest setHTTPMethod:@"POST"];     
[theRequest setHTTPBody: [soapMessage dataUsingEncoding:NSUTF8StringEncoding]];
NSURLConnection *theConnection = [[NSURLConnection alloc] initWithRequest:theRequest delegate:self];

if(theConnection) {
    webData = [NSMutableData data];
    NSLog(@"%@",webData);
}
else {
    NSLog(@"theConnection is NULL");
}       

}

-(void)connectionDidFinishLoading:(NSURLConnection *)connection
{
NSLog(@"DONE. Received Bytes: %d", [webData length]);
NSString *theXML = [[NSString alloc] initWithBytes: [webData mutableBytes] length:[webData length] encoding:NSUTF8StringEncoding];
NSLog(@"THIS IS THE DATA : %@",theXML);

xmlParser = [[NSXMLParser alloc] initWithData: webData];
[xmlParser setDelegate:self];
[xmlParser setShouldResolveExternalEntities: YES];
[xmlParser parse];

}

-(void)parser:(NSXMLParser *)parser didStartElement:(NSString *)
 elementName namespaceURI:(NSString *) 
 namespaceURI qualifiedName:(NSString *)qName
  attributes: (NSDictionary *)attributeDict
{
if( [elementName isEqualToString:@"CODE"])
{
    soapResults = [[NSMutableString alloc] init];
    NSLog(@"%@",soapResults);
    recordResults = TRUE;
}
}

-(void)parser:(NSXMLParser *)parser didEndElement:(NSString *)
 elementName namespaceURI:(NSString *)namespaceURI 
  qualifiedName:(NSString *)qName

{
if( [elementName isEqualToString:@"CODE"])
{
    recordResults = FALSE;
    soapResults = nil;
    }
} 
```

感谢您再次浏览，欢迎所有帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T14:12:02.217

您似乎误解了 NSXMLParser 的工作方式。我敦促你好好看看这个来自 Apple [XML parsing的文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/XMLParsing/Articles/HandlingElements.html#//apple_ref/doc/uid/20002265-BCIJFGJI)

```
-(void)parser:didStartElement:namespaceURI:qualifiedName:attributes: 
```

当解析器找到像 一样的开始 XML 标记时调用此方法，因此它还没有任何数据。在这里，您只需为要保存的任何内容分配内存

```
- (void)parser:foundCharacters: 
```

当标签内有数据时调用，`parser:didStartElement:namespaceURI:qualifiedName:attributes:`这是您首先存储该数据的位置，以便您以后可以在下一个方法中将其保存在您想要的对象上：

```
-(void)parser:didEndElement:namespaceURI:qualifiedName 
```

当解析器遇到结束标记 () 时调用。现在您拥有了保存在变量中的数据，`parser:foundCharacters:`是时候将其保存在对象中了。

**编辑：**好的，让我们尝试通过在这些方法中添加代码示例来分解它：

假设您有一个如下所示的 XML；

```
<person>
    <lastName>Doe</lastName>
    <firstName>John</firstName>
    <address>
        <street>100 Main Street</street>
        <city>Somewhere</city>
    </address>
</person> 
```

自然地，你会想要一个`Person`类，其属性为*lastName*、*firstName*和*addressDictionary*，其中包含*street*和*city*。要保留所有`Person`s，您需要*personArray*。

现在我们有了结构，这里是解析部分。请注意，为了更好地理解，我将分别编写每个*If*块。

.h 文件

```
@property (nonatomic, retain) Person *currentPerson;
@property (nonatomic, retain) NSMutableString *currentElement;
@property (nonatomic, retain) NSMutableDictionary *addressDic; //to be saved to person.addressDictionary when finished
@property (nonatomic, retain) NSMutableArray *personArray; 
```

.m 文件

```
- (void)parserDidStartDocument:(NSXMLParser *)parser 
{
    personArray = [[NSMutableArray alloc] init];
}

- (void) parser: (NSXMLParser *) parser didStartElement: (NSString *) elementName
 namespaceURI: (NSString *) namespaceURI qualifiedName: (NSString *) qName attributes: (NSDictionary *) attributeDict
{
    if ([elementName isEqualToString:@"Person"])
    {
    currentPerson = [[Person alloc] init]; //
    return;
    }
    if ([elementName isEqualToString:@"lastName"])
    {
        currentElement = [[NSMutableString alloc] init];
        return;
    }
    if ([elementName isEqualToString:@"firstName"])
    {
        currentElement = [[NSMutableString alloc] init];
        return;
    }
    if ([elementName isEqualToString:@"address"])
    {
        adressDic = [[NSMutableDictionary alloc] init];
        return;
    }
    if ([elementName isEqualToString:@"street"])
    {
        currentElement = [[NSMutableString alloc] init];
        return;
    }
    if ([elementName isEqualToString:@"city"])
    {
        currentElement = [[NSMutableString alloc] init];
        return;
    }
}

- (void)parser:(NSXMLParser *)parser foundCharacters:(NSString *)string
{
    [currentElement appendString:string];
}

- (void)parser:(NSXMLParser *)parser didEndElement:(NSString *)elementName namespaceURI:(NSString *)namespaceURI qualifiedName:(NSString *)qName
{
    if ([elementName isEqualToString:@"Person"])
    {
    [personArray addObject:currentPerson];
    [currentPerson release];
    return;
    }
    if ([elementName isEqualToString:@"lastName"])
    {
        currentPerson.lastName = currentElement;
        [currentElement release]; currentElement = nil;
        return;
    }
    if ([elementName isEqualToString:@"firstName"])
    {
        currentPerson.firstName = currentElement;
        [currentElement release]; currentElement = nil;
        return;
    }
    if ([elementName isEqualToString:@"address"])
    {
        currentPerson.addressDictionary = addresDic;
        [addressDic release];
        return;
    }
    if ([elementName isEqualToString:@"street"])
    {
        [addressDic setObject:currentElement forKey:@"street"];
        [currentElement release]; currentElement = nil;
        return;
    }
    if ([elementName isEqualToString:@"city"])
    {
        [addressDic setObject:currentElement forKey:@"city"];
        [currentElement release]; currentElement = nil;
        return;
    }
} 
```

当这一切都完成后，`parserDidEndDocument:`被调用。现在你`Person`的数组中已经有了所有的 s，对它们做任何你喜欢的事情

```
- (void)parserDidEndDocument:(NSXMLParser *)parser
{
     for (Person *person in personArray)
     {
          NSLog(@"Person name:%@", person.firstName);
          NSLog(@"Person lastname:%@", person.lastName);
     }
} 
```

# java - 在 Java 桌面应用程序中创建本地存储目录

> ID：11139552
> 
> 赞同：6
> 
> 时间：2012-06-21T13:42:54.150
> 
> 标签：java, desktop-application

我正在构建一个 Java 桌面应用程序，需要存储一些本地数据（首选项和历史记录）。为此，我想在适当的位置创建一个新文件夹，例如Windows 中的*AppData\myapp和 Linux 中的**~/.myapp*（以及 Mac 上预期的任何位置）。

什么是好的，跨平台的方式来做到这一点？

* * *

我在这个网站上看到了几个关于这个问题的问题，但是：

*   提问者想要查找 Windows 的*应用程序数据*（不是跨平台的）
*   解决方案是创建一个文件夹`user.home`（Linux 风格，而不是跨平台）这是我目前所做的，但我正在寻找改进。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T13:50:34.277

您始终可以使用[Java Preferences API](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/prefs/Preferences.html)，它将为每个用户存储信息，而您不必担心实现。不同的实现可用于不同的平台，但对您（客户端）隐藏。

另一种方法是使用[Apache Commons Configuration](http://commons.apache.org/configuration/userguide/user_guide.html) API，它更复杂，但提供了更多功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T15:09:41.143

```
import java.io.File;

public class AppPathFolder {

    public static void main(String[] args) {
        String path = null;
        String osName = System.getProperty("os.name").toLowerCase();
        if (osName.indexOf("windows")>-1) {
            path = System.getenv("APPDATA");
        } else if (osName.indexOf("mac")>-1) {
            // get the env. variable for Mac..
            path = System.getenv("?");
            // etc. for Linux, Unix, Solaris..
        } else { //anything else
            path = System.getProperty("user.home");
        }
        File rootOfPath = new File(path);
        // create a sub-directory based on package name of main class..
        // perhaps prefixed with with java/appdata
        System.out.println(rootOfPath);
    }
} 
```

当然，对于少量数据还有其他选择：

*   应用。受信任或没有安全管理器的可能会使用[`Preferences`](http://docs.oracle.com/javase/7/docs/api/java/util/prefs/Preferences.html)API
*   一个桌面应用程序。使用[Java Web Start 启动](https://stackoverflow.com/tags/java-web-start/info)可以访问 JNLP API，该 API`PersistenceService`甚至可用于沙盒应用程序。
*   小程序可以存储 cookie。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:53:01.980

将应用程序文件夹存储到用户主目录中怎么样？您可以通过 System.getProperty("user.home") 获取它，请参阅[http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html](http://docs.oracle.com/javase/tutorial/essential/environment/sysprop.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:47:24.623

使用`user.home`系统属性。像这样：

```
String userHomePath = System.getProperty("user.home");
File myAwesomeFolder = new File(useHomePath, "myAweSomeApp");
myAwesomeFolder.mkdirs(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-06-21T13:51:26.850

尚未确认 Linux，但您也可以进入 Windows 注册表。

无论哪种方式，

```
String path = System.getProperty("user.home")+ "\\AppLication Data"+"\\xyzFolder"; 
```

这适用于 Windows 7，因为 %appData% 显示了上面遗留的路径。

# javascript - JavaScript 适用于 IE，但不适用于 Firefox

> ID：11139554
> 
> 赞同：2
> 
> 时间：2012-06-21T13:42:57.697
> 
> 标签：javascript, .net, firefox, visibility

在我的 .NET 项目中，我在 HTML 页面中使用了一个 Button，它带来了隐藏的`<div>`. `<div>`其中包含插入公司的表单。

HTML：

```
<div class="top-div-where-is-my-ADD-button">
    <h2>
        Search:
        <input type="text" id="search" />
        <div id="divADD" onclick="AddCompany()">
            <span>Add Company</span></div>
    </h2>
</div>

    <div id="hide" style="visibility: hidden; height: 0px; padding-bottom: 10px;">
    <table id="CompanyDetails" class="company" style="width: 100%; text-align: center;">
.........
</div> 
```

JavaScript：

```
function AddCompany() {
    HideCompany();
    $(hide).css({ visibility: "visible", height: "auto" });
    var a = document.getElementById("divbuttonSaveCompany");
    a.onclick = InsertCompany; 
}

function InsertCompany() {
    var a = document.getElementById("Name").value;
    var b = document.getElementById("Address").value;
    var c = document.getElementById("Country").value;
    var d = document.getElementById("Phone").value;
    var e = document.getElementById("Fax").value;
    var f = document.getElementById("Email").value;
    var gg = document.getElementById("Contact");
    var g = gg.options[gg.selectedIndex].value;
    $.ajax({
        url: '@Url.Action("AddCompany", "Company")',
        data: { nameCompany: a, address: b, country: c, phone: d, fax: e, email: f , contact: g},
        dataType: "html",
        type: "POST",
        error: function () {
            alert("error");
        },
        success: function (data) {
            alert("Company was successfully added! ");
            $("#all").html(data);
        }
    });
}
function HideCompany() {
    $(hide).css({ visibility: "hidden", height: "0" });
    $("#Name").val("");
    $("#Address").val("");
    $("#Country").val("");
    $("#Phone").val("");
    $("#Fax").val("");
    $("#Email").val("");
} 
```

所以基本上在 IE 中，当我按下 AddCompany 按钮时，隐藏的会`<div>`出现，但在 FF 中不会。

有谁知道我需要做什么来解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:50:23.617

问题是这样的：

```
$(hide) 
```

这在 IE 中有效，因为 IE 从每个具有“id”的元素中创建了一个全局变量。Firefox 不会那样做。

将所有引用更改`$(hide)`为`$('#hide')`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:46:46.993

使用[jQuery`hide`函数](http://api.jquery.com/hide/)隐藏元素，并[使用`show`函数](http://api.jquery.com/show/)显示它。

将高度设置为 0 是非标准的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:50:07.057

您是否尝试过使用*display*属性而不是*visibility*？

当使用*visibility*元素即使不显示也会占用空间，使用*display*元素不占用空间，因此您无需担心*height*。

此外，您似乎正在使用 jQuery，您能否使用 div 来调整您的 div 的可见性

> $(隐藏).show();
> 
> $(隐藏).hide();

或者干脆

> $(隐藏).toggle();

这些是使用 css *display*属性的 jQuery 快捷方式[（参见 doc）](http://api.jquery.com/toggle/)

# c - fwrite 在 C 中将错误的字符写入文件

> ID：11139557
> 
> 赞同：-4
> 
> 时间：2012-06-21T13:43:13.363
> 
> 标签：c, file, fwrite, turbo-c

我一直在尝试一种简单的加密算法，它实际上是用来加密 2 个单词的，我尝试在 image.jpg 文件中使用*abcabc*，然后加密的数据应该作为密钥*AB的**aboabo*出来（请注意它的大写）。

 *```
#include<stdio.h>
#include<conio.h>
#include<string.h>
#include<math.h>
struct array
{
    unsigned char str[4];
};
int n1,n2,b,sum=0,trans[6];
struct array leftarr[16],rightarr[16],temparr[16],temparr1[16],matrixleft[4][4],matrixright[4][4];
void copier(int arrspec)
{
    int i,j;
    if(arrspec==0)
    {
        for(i=0;i<16;i++)
        temparr[i]=leftarr[i];
        //strcpy(temparr[i].str,leftarr[i].str);
    }
    else if(arrspec==1)
    {
        for(i=0;i<16;i++)
        temparr1[i]=rightarr[i];
        //strcpy(temparr[i].str,rightarr[i].str);
    }
}
void calculator(char key[16])
{
    int keylength,i,num1=0,num2=0,sumtemp;
    char temp[20];
    keylength=strlen(key);
    printf("%s is the key and its length is %d",key,keylength);
    b=18-keylength;
    printf("\n%d is the base value",b);
    for(i=0;i<keylength;i++)
    {
        sum+=((int)key[i])*(pow(b,i+1));
    }
    printf("\n%d is the sum",sum);
    itoa(sum,temp,10);
    sumtemp=sum;
    for(i=strlen(temp);i>=0;i--)
    {
        num1+=(sumtemp%10)*i;
        sumtemp=sumtemp/10;
    }
    printf("\n%d is the num1",num1);
    n1=sum%num1;
    while(n1>64)
    n1-=64;
    if(n1==0)
    n1=num1;
    printf("\n%d is the n1",n1);

    sumtemp=sum;
    for(i=1;i<=strlen(temp);i++)
    {
        num2+=(sumtemp%10)*i;
        sumtemp=sumtemp/10;
    }
    printf("\n%d is the num2",num2);
    n2=sum%num2;
    while(n2>64)
    n2-=64;
    if(n2==0)
    n2=num2;
    printf("\n%d is the n2",n2);

}
void leftshift(int arrspec)
{
    if(arrspec==0)
    {
        copier(0);
        leftarr[0]=temparr[2];
        leftarr[1]=temparr[11];
        leftarr[2]=temparr[3];
        leftarr[3]=temparr[12];
        leftarr[4]=temparr[0];
        leftarr[5]=temparr[9];
        leftarr[6]=temparr[1];
        leftarr[7]=temparr[10];
        leftarr[8]=temparr[6];
        leftarr[9]=temparr[15];
        leftarr[10]=temparr[7];
        leftarr[11]=temparr[8];
        leftarr[12]=temparr[4];
        leftarr[13]=temparr[13];
        leftarr[14]=temparr[5];
        leftarr[15]=temparr[14];
    }
    else if(arrspec==1)
    {
        copier(1);
        rightarr[0]=temparr1[2];
        rightarr[1]=temparr1[11];
        rightarr[2]=temparr1[3];
        rightarr[3]=temparr1[12];
        rightarr[4]=temparr1[0];
        rightarr[5]=temparr1[9];
        rightarr[6]=temparr1[1];
        rightarr[7]=temparr1[10];
        rightarr[8]=temparr1[6];
        rightarr[9]=temparr1[15];
        rightarr[10]=temparr1[7];
        rightarr[11]=temparr1[8];
        rightarr[12]=temparr1[4];
        rightarr[13]=temparr1[13];
        rightarr[14]=temparr1[5];
        rightarr[15]=temparr1[14];
    }
}
void downshift(int arrspec)
{
    if(arrspec==0)
    {
        copier(0);
        leftarr[0]=temparr[15];
        leftarr[1]=temparr[6];
        leftarr[2]=temparr[14];
        leftarr[3]=temparr[7];
        leftarr[4]=temparr[0];
        leftarr[5]=temparr[8];
        leftarr[6]=temparr[1];
        leftarr[7]=temparr[9];
        leftarr[8]=temparr[2];
        leftarr[9]=temparr[10];
        leftarr[10]=temparr[3];
        leftarr[11]=temparr[11];
        leftarr[12]=temparr[4];
        leftarr[13]=temparr[12];
        leftarr[14]=temparr[5];
        leftarr[15]=temparr[13];
    }
    else if(arrspec==1)
    {
        copier(1);
        rightarr[0]=temparr1[15];
        rightarr[1]=temparr1[6];
        rightarr[2]=temparr1[14];
        rightarr[3]=temparr1[7];
        rightarr[4]=temparr1[0];
        rightarr[5]=temparr1[8];
        rightarr[6]=temparr1[1];
        rightarr[7]=temparr1[9];
        rightarr[8]=temparr1[2];
        rightarr[9]=temparr1[10];
        rightarr[10]=temparr1[3];
        rightarr[11]=temparr1[11];
        rightarr[12]=temparr1[4];
        rightarr[13]=temparr1[12];
        rightarr[14]=temparr1[5];
        rightarr[15]=temparr1[13];
    }
}
void rightshift(int arrspec)
{
    if(arrspec==0)
    {
        copier(0);
        leftarr[0]=temparr[15];
        leftarr[1]=temparr[0];
        leftarr[2]=temparr[8];
        leftarr[3]=temparr[1];
        leftarr[4]=temparr[9];
        leftarr[5]=temparr[2];
        leftarr[6]=temparr[10];
        leftarr[7]=temparr[3];
        leftarr[8]=temparr[11];
        leftarr[9]=temparr[4];
        leftarr[10]=temparr[12];
        leftarr[11]=temparr[5];
        leftarr[12]=temparr[13];
        leftarr[13]=temparr[6];
        leftarr[14]=temparr[14];
        leftarr[15]=temparr[7];
    }
    else if(arrspec==1)
    {
        copier(1);
        rightarr[0]=temparr1[15];
        rightarr[1]=temparr1[0];
        rightarr[2]=temparr1[8];
        rightarr[3]=temparr1[1];
        rightarr[4]=temparr1[9];
        rightarr[5]=temparr1[2];
        rightarr[6]=temparr1[10];
        rightarr[7]=temparr1[3];
        rightarr[8]=temparr1[11];
        rightarr[9]=temparr1[4];
        rightarr[10]=temparr1[12];
        rightarr[11]=temparr1[5];
        rightarr[12]=temparr1[13];
        rightarr[13]=temparr1[6];
        rightarr[14]=temparr1[14];
        rightarr[15]=temparr1[7];
    }
}
void upshift(int arrspec)
{
    if(arrspec==0)
    {
        copier(0);
        leftarr[0]=temparr[8];
        leftarr[1]=temparr[0];
        leftarr[2]=temparr[9];
        leftarr[3]=temparr[1];
        leftarr[4]=temparr[14];
        leftarr[5]=temparr[6];
        leftarr[6]=temparr[15];
        leftarr[7]=temparr[7];
        leftarr[8]=temparr[12];
        leftarr[9]=temparr[4];
        leftarr[10]=temparr[13];
        leftarr[11]=temparr[5];
        leftarr[12]=temparr[3];
        leftarr[13]=temparr[10];
        leftarr[14]=temparr[2];
        leftarr[15]=temparr[11];
    }
    else if(arrspec==1)
    {
        copier(1);
        rightarr[0]=temparr1[8];
        rightarr[1]=temparr1[0];
        rightarr[2]=temparr1[9];
        rightarr[3]=temparr1[1];
        rightarr[4]=temparr1[14];
        rightarr[5]=temparr1[6];
        rightarr[6]=temparr1[15];
        rightarr[7]=temparr1[7];
        rightarr[8]=temparr1[12];
        rightarr[9]=temparr1[4];
        rightarr[10]=temparr1[13];
        rightarr[11]=temparr1[5];
        rightarr[12]=temparr1[3];
        rightarr[13]=temparr1[10];
        rightarr[14]=temparr1[2];
        rightarr[15]=temparr1[11];
    }
}
void cycle(int arrspec)
{
    int i,j;
    if(arrspec==0)
    {
        copier(0);
        leftarr[0]=temparr[4];
        leftarr[1]=temparr[0];
        leftarr[2]=temparr[1];
        leftarr[3]=temparr[2];
        leftarr[4]=temparr[8];
        leftarr[5]=temparr[6];
        leftarr[6]=temparr[10];
        leftarr[7]=temparr[3];
        leftarr[8]=temparr[12];
        leftarr[9]=temparr[5];
        leftarr[10]=temparr[9];
        leftarr[11]=temparr[7];
        leftarr[12]=temparr[13];
        leftarr[13]=temparr[14];
        leftarr[14]=temparr[15];
        leftarr[15]=temparr[11];
    }
    else if(arrspec==1)
    {
        copier(1);
        rightarr[0]=temparr1[4];
        rightarr[1]=temparr1[0];
        rightarr[2]=temparr1[1];
        rightarr[3]=temparr1[2];
        rightarr[4]=temparr1[8];
        rightarr[5]=temparr1[6];
        rightarr[6]=temparr1[10];
        rightarr[7]=temparr1[3];
        rightarr[8]=temparr1[12];
        rightarr[9]=temparr1[5];
        rightarr[10]=temparr1[9];
        rightarr[11]=temparr1[7];
        rightarr[12]=temparr1[13];
        rightarr[13]=temparr1[14];
        rightarr[14]=temparr1[15];
        rightarr[15]=temparr1[11];
    }
}

void generate(int l1,int l2,int l3,int posinarr,int arrspec)
{
    int i,j;
    l3=l3-posinarr;
    if(arrspec==0)
    {
    for(i=0;i<16;i++)
    {
        leftarr[i].str[0]=(unsigned char)l1;
        leftarr[i].str[1]=(unsigned char)l2;
        leftarr[i].str[2]=(unsigned char)(l3+i);
        leftarr[i].str[3]='\0';
        //sprintf(leftarr[i],"%c%c%c",l1,l2,l3+i);
    }
    }
    else if(arrspec==1)
    {
    for(i=0;i<16;i++)
    {
        rightarr[i].str[0]=(unsigned char)l1;
        rightarr[i].str[1]=(unsigned char)l2;
        rightarr[i].str[2]=(unsigned char)(l3+i);
        rightarr[i].str[3]='\0';
    }
    }
/*printf("start of print\n");
for(i=0;i<16;i++)
{
for(j=0;j<3;j++)
printf("%c",leftarr[i].str[j]);
printf("\n");
}
printf("end of print\n");

getch();*/
}
void randomize()
{
    int i,c,j;
    for(i=0;i<n1;i++)
    {
        c=i%5;
        switch(c)
        {
            case 0:cycle(0);cycle(1);break;
            case 1:upshift(0);upshift(1);break;
            case 2:rightshift(0);rightshift(1);break;
            case 3:downshift(0);downshift(1);break;
            case 4:leftshift(0);leftshift(1);break;
            default:printf("this should not be running");
        }
    }
}
void matrix()
{
    int i,j,k=0;
    for(i=0;i<4;i++)
    for(j=0;j<4;j++)
    {
        strcpy(matrixleft[i][j].str,leftarr[k].str);
        strcpy(matrixright[i][j].str,rightarr[k].str);
        k++;
    }
}
void encrypt(int data[6],FILE *fptemp)
{
    unsigned long int leftindex,rightindex,leftarray,leftpos,rightarray,rightpos;
    int leftarrx,leftarry,rightarrx,rightarry;
    int i,dump,j,templeftpos,temprightpos;
    unsigned char zzz,yyy[4],yyy1[4];
    printf("\ndata set is %d %d %d %d %d %d\n",data[0],data[1],data[2],data[3],data[4],data[5]);
    leftindex=(pow(256,2)*(int)data[0])+(pow(256,1)*(int)data[1])+(pow(256,0)*(int)data[2]);
    printf("leftindex is %lu",leftindex);
    rightindex=(pow(256,2)*(int)data[3])+(pow(256,1)*(int)data[4])+(pow(256,0)*(int)data[5]);
    printf("rightindex is %lu",rightindex);
    leftarray=leftindex/16;
    leftpos=leftindex%16;
    printf("\n%lu is in array(%lu) at position %lu",leftindex,leftarray,leftpos);
    rightarray=rightindex/16;
    rightpos=rightindex%16;
    printf("\n%lu is in array(%lu) at position %lu",rightindex,rightarray,rightpos);
    generate((int)data[0],(int)data[1],(int)data[2],leftpos,0);
    generate((int)data[3],(int)data[4],(int)data[5],rightpos,1);
    randomize();
    matrix();
    /*code to find the substitute*/
    /*
    leftarrx=leftpos/4;
    leftarry=leftpos%4;
    rightarrx=rightpos/4;
    rightarry=rightpos%4;
    if(leftarrx==rightarrx&&leftarry==rightarry)
    {
        printf("this is an impossible situation, program terminated\n");
        exit(0);
        getch();
    }
    else if(leftarrx==rightarrx&&leftarry!=rightarry)
    {
        if(leftarry!=0&&leftarry
    }
     */
    leftpos--;
    rightpos--;
    if(leftpos==-1)
    leftpos=15;
    if(rightpos==-1)
    rightpos=15;
    templeftpos=(int)leftpos;
    temprightpos=(int)rightpos;
    printf("%lu %lu %d %d",leftpos,rightpos,templeftpos,temprightpos);
    printf("%s %s",leftarr[templeftpos].str,rightarr[temprightpos].str);
    strcpy(yyy,leftarr[templeftpos].str);
    for(i=0;i<3;i++)
    {
    sprintf(&zzz,"%c",yyy[i]);
    fwrite(&zzz,sizeof(zzz),1,fptemp);
    }
    strcpy(yyy1,rightarr[temprightpos].str);
    for(i=0;i<3;i++)
    {
    sprintf(&zzz,"%c",yyy1[i]);
    fwrite(&zzz,sizeof(zzz),1,fptemp);
    }
/*  for(i=0;i<3;i++)
    {
        dump=(int)leftarr[leftpos].str[i];
        fwrite(&(char)dump,sizeof(char),1,fptemp);
    }
    for(i=0;i<3;i++)
    {
        dump=(int)rightarr[rightpos].str[i];
        fwrite(&(char)dump,sizeof(char),1,fptemp);
    }*/
//  fwrite(&leftarr[leftpos],sizeof(char[3]),1,fptemp);
  //    fwrite(&rightarr[rightpos],sizeof(char[3]),1,fptemp);
    /*end of substitute finding*/
       //fwrite(&temp,sizeof(temp),readcount,fptemp);

//  getch();
}
void main()
{
    FILE *fp,*fp1;
    int i,j=0,flag;
    unsigned char temp;
    char keytext[16],zzz;
    short int a;
    size_t readcount;
    clrscr();
    printf("input the key text(max 16 characters):");
    scanf("%s",&keytext);
    calculator(keytext);
    fp=fopen("image.jpg","rb");
    fp1=fopen("image1.jpg","wb");
    //trans[0]=256;trans[1]=256;trans[2]=256;trans[3]=256;trans[4]=256;trans[5]=256;
    while(!feof(fp))
    {
        readcount=fread(&temp,sizeof(temp),1,fp);
        flag=1;
        if(!readcount)break;
        trans[j]=(int)temp;
        j++;
        if(j==6)
        {
        encrypt(trans,fp1);
        j=0;
        flag=0;
        trans[0]=256;trans[1]=256;trans[2]=256;trans[3]=256;trans[4]=256;trans[5]=256;
        }
/*      a=temp;
        a+=n2;
        temp=a;*/
//      fwrite(&temp,sizeof(temp),readcount,fp1);
//      printf("%c-%d-%c-%d\n",a,a,temp,temp);
    }
    if(flag==1)
    {
        for(i=0;i<6;i++)
        {
            if((int)trans[i]<256)
            {
                sprintf(&zzz,"%c",trans[i]);
                fwrite(&zzz,sizeof(zzz),1,fp1);
            }
        }
    }
    fclose(fp);
    fclose(fp1);
    getch();
} 
```

到目前为止，我尝试在堆栈溢出和其他在线页面上找到许多基于 fwrite 的问题，但没有得到相关的解决方案，我仍然困惑为什么 fwrite在 image1.jpg中写*aboabg而不是**aboabo*作为密钥*AB*

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:50:55.430

这个：

```
sprintf(&zzz,"%c",trans[i]);
fwrite(&zzz,sizeof(zzz),1,fp1); 
```

错误且损坏，并导致缓冲区溢出，因为`sprintf()`将终止它正在创建的字符串。

您应该`fwrite()`直接使用角色调用：

```
fwrite(trans + i, 1, 1, fp1); 
```

此外，您当然应该检查 的*返回值*，`fwrite()`I/O 可能会失败！

无意冒犯，但是在密码代码中发现这种错误让我相信你要么不是一个非常有经验的程序员，要么不是一个非常有经验的 C 程序员。两者都有足够的理由认真质疑编写密码学代码的想法。*

# sql - 如何找到导致 BatchUpdateException 的值？

> ID：11139559
> 
> 赞同：1
> 
> 时间：2012-06-21T13:43:15.430
> 
> 标签：sql, oracle, exception, batch-updates

我正在使用 Spring JDBCTemplate 在 Oracle 10g 数据库中执行几千行的批处理更新（插入）。为了测试我的错误处理，我确保我得到一个关于最大长度的异常。

我得到以下（预期的）异常：

> 引起：org.springframework.jdbc.UncategorizedSQLException: PreparedStatementCallback; SQL [INSERT INTO同事（col_id，col_code，col_description，pers_id）VALUES（？，？，？，？）]的未分类SQLException；SQL状态[72000]；错误代码 [12899]；ORA-12899: 列 "MYSCHEMA"."COLLEAGUES"."COL_DESCRIPTION" 的值太大（实际值：57，最大值：40）；
> 
> 嵌套异常是 java.sql.BatchUpdateException: ORA-12899: value too large for column "MYSCHEMA"."COLLEAGUES"."COL_DESCRIPTION"（实际：57，最大值：40）

我的问题是，导致此异常的 col_description 的值是什么？如您所见，查询不显示实际值，而仅显示 ? 的准备好的声明。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:59:00.313

如果您从 db dable 获取数据，请尝试从源表中选择无效数据列

```
select * from COLLEAGUES_source_column 
where length(COL_DESCRIPTION_source_column) > 40 
```

# php - 根据从数据库加载的数据（PHP）更改组合框中的 selectedIndex

> ID：11139561
> 
> 赞同：0
> 
> 时间：2012-06-21T13:43:30.067
> 
> 标签：php, database, drop-down-menu, selectedindex

我有一个员工数据库和一个使用 PHP 生成的下拉列表，然后使用 javascript 我尝试将每个员工的正确类型的血液放入数据库中。

我有一个员工数据库和一个使用 PHP 生成的下拉列表，然后使用 javascript 我尝试将每个员工的正确类型的血液放入数据库中。

首先我检索了数据：

```
$rsEmployee = employee::getEmployees();
        while($row = mysql_fetch_assoc($rsEmployee))
        {
    echo "
    <select id='slcBloodType' name='slcBloodType' onload='chooseItem(this, '$row['slcBloodType']')'>
    <option value='A+'> A+ </option>
    <option value='A-'> A- </option>
    <option value='B+'> B+ </option>
    <option value='B-'> B- </option>
    <option value='AB+'> AB+ </option>
    <option value='AB-'> AB- </option>
    <option value='O+'> O+ </option>
    <option value='O-'> O- </option>
    </select>";
} 
```

javascript函数：

```
function elegirOption(list, value){
                array = ["A+", "A-", "B+", "B-", "AB+", "AB-", "O+", "O-"];

                index = -1;
                for(var i = 0; i < array.length; i++){
                    if(value == array[i]){
                        index = i;
                        break;
                    }
                }
                if(index != -1){
                               this.selectedIndex = index;
                            }
            } 
```

但不起作用，似乎我无法将 php 变量作为参数传递给 javascript 函数......

还有其他下拉列表我想这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:51:10.957

为什么不这样做：

```
$blood_types = array("A+", "A-", ...);
echo '<select>';

while(....) {

  foreach($blood_types as $blood_type) {
    echo '<option';
    if($blood_type == $row['slcBloodType'])
       echo 'selected="selected"';
    echo '>'.$blood_type.'</option>';
  }
} 
```

您不必指定 value 属性，因为它与文本相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:54:20.707

首先，您的代码有几个问题，例如重复的 ID，这很糟糕。Gere 是我的做法，这是对您的代码的大规模清理，但应该使其非常接近您所拥有的：

**在页面的开头**

最好将数据加载到内存中，然后稍后在输出中重用它。不，除非你有 100 万行，否则内存应该不是问题......

```
<?php
//Read my data i need to work with
$rsEmployee = employee::getEmployee();
$employees = array();
while($row = mysql_fetch_assoc($rsEmployee)){
    $employees[] = $row;
} 
```

**在页眉的下方**

现在，我们将创建初始化代码……您需要 JQUERY 来完成这项工作。这是一种很好的与浏览器无关的工作方式，可以为您省去很多麻烦。

```
?><script>
    $(function(){ <?php
        foreach($employees as $employee){ ?>
        $('#slcBloodType<?php echo $employee['id']; ?>').val('<?php echo $employee['slcBloodType']; ?>');
        <?php } ?>
    });
</script><?php 
```

**在页面的 HTML 部分进一步向下**

好的，此时，现在您输出 HTML 并确保您的 id 是唯一的：

```
<?php foreach($employees as $employee){ ?>
<select id="slcBloodType<?php echo $employee['id']; ?>" name="slcBloodType[<?php echo $employee['id']; ?>]">
    <option value='A+'> A+ </option>
    <option value='A-'> A- </option>
    <option value='B+'> B+ </option>
    <option value='B-'> B- </option>
    <option value='AB+'> AB+ </option>
    <option value='AB-'> AB- </option>
    <option value='O+'> O+ </option>
    <option value='O-'> O- </option>
</select>
<?php } ?> 
```

祝你好运应用这种更好的编码技术，如果你现在开始这样编码，它将为你省去很多麻烦！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:51:58.667

> 但不起作用，似乎我无法将 php 变量作为参数传递给 javascript 函数......

这是因为您**不能直接**将 PHP 变量传递给 javascript。

您的选择是：

1.  在 PHP 中设置 cookie，javascript 以后可以读取
2.  让 PHP 回显 javascript 代码，并在其间打印出 PHP 变量。例如：

    <脚本语言=“javascript”类型=“文本/javascript”>

    var 级别 =“< ?php echo $levels ?>” ;

    </脚本>

# button - 在 xhtml 中禁用输入键

> ID：11139563
> 
> 赞同：1
> 
> 时间：2012-06-21T13:43:35.600
> 
> 标签：button, xhtml, enter

我有一个网页，每当您在文本字段中时，如果您按 Enter 键，它将点击一个非常不受欢迎的按钮。我知道有很多这样的帖子，但解决方案对我不起作用。我正在使用 xhtml，只是想知道如何阻止输入按钮执行此操作，甚至让它单击其他按钮。感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:46:37.993

您可以在页面上使用 javascript 来停止输入按钮事件。

```
<script type="text/javascript">
function stopRKey(evt) {
  var evt = (evt) ? evt : ((event) ? event : null);
  var node = (evt.target) ? evt.target : ((evt.srcElement) ? evt.srcElement : null);
  if ((evt.keyCode == 13) && (node.type=="text"))  {return false;}
}

document.onkeypress = stopRKey;
</script> 
```

# css - 用户注册表单：表格 VS 布局列表

> ID：11139567
> 
> 赞同：0
> 
> 时间：2012-06-21T13:43:52.443
> 
> 标签：css, forms, tablelayout

我必须做一个用户注册表单（有两列的经典布局，左边的标签，右边的字段）。标签可以用英语或法语显示（因此可以有不同的标签长度​​）。

在 HTML 级别，我应该这样做：

```
<form ...>
<ul>
<li>
  <label ...>...</label>
  <input ... />
</li>
</ul>
</form> 
```

或者

```
<form ...>
<table>
<tr>
  <td><label ...>...</label></td>
  <td><input ... /></td>
</tr>
</table>
</form> 
```

?

在这种情况下，我个人会选择**表格**布局，因为我发现使用起来更容易（标签和字段之间的垂直对齐），并且它可以很容易地适应不同的标签长度​​。

然而，几年以来，表格通常可以替换为 div/列表，以避免表格过度用于布局目的。我可以理解（并且更喜欢具有图层而不是一堆嵌套表格单元格的良好总体布局组织），但这也适用于用户注册表单吗？

你的优点/缺点是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:22:19.083

我最终会读到像“ **tables vs divs** ”这样的火焰战争。

我将使用**table**因为我想要一个简单、兼容、可维护的解决方案，提供良好的国际化支持（可变长度标签 => 可变左列宽度）。

这并不是说我会为布局中的所有内容使用表格，但在这个特定的注册表单案例中，是的。

看：

*   [<table> 布局是邪恶的，对吧？](https://stackoverflow.com/questions/890850/table-for-layouts-is-evil-right)
*   [是否应该不惜一切代价避免在 HTML 中使用表格？](https://stackoverflow.com/questions/82391/should-tables-be-avoided-in-html-at-any-cost#82571)
*   [http://iamelgringo.blogspot.fr/2009/02/tables-vs-css-css-trolls-begone.html](http://iamelgringo.blogspot.fr/2009/02/tables-vs-css-css-trolls-begone.html)
*   [http://www.flownet.com/ron/css-rant.html](http://www.flownet.com/ron/css-rant.html)
*   [http://thinkvitamin.com/design/tables-the-next-evolution-in-css-layout/](http://thinkvitamin.com/design/tables-the-next-evolution-in-css-layout/)

加上我评论中的两个链接，让自己了解何时与使用表格相关。

# puppet - Puppet -- 绑定挂载

> ID：11139569
> 
> 赞同：14
> 
> 时间：2012-06-21T13:44:00.017
> 
> 标签：puppet

我有一个由 500 个 linux 机器组成的集群，现在需要使用带有绑定选项的挂载资源（参见 man 8 mount）来支持 chroot 监狱。安装点需要在引导后强制执行和维护。我不确定如何用 puppet 来描述这种状态。是这样吗？

```
mount { "/gpfs20/home":
  ensure  => mounted,
  name    => "/chroot/centos5/home",
  fstype  => "none",
  options => "(rw,bind)",
} 
```

TIA——查尔斯

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-06-22T17:07:10.270

为了记录，它是这样完成的：

```
mount { '/chroot/centos5/home': 
  ensure  => mounted, 
  device  => '/gpfs20/home', 
  fstype  => 'none', 
  options => 'rw,bind', 
} 
```

~查尔斯~

# spring - Spring-Controller 及其实例变量的范围

> ID：11139571
> 
> 赞同：46
> 
> 时间：2012-06-21T13:44:08.643
> 
> 标签：spring, spring-mvc

Spring-MVC 单例中的所有控制器是否都在不同的会话和请求之间共享？

如果是这样，我假设一个类变量像

```
public String name; 
```

所有请求和会话都相同吗？所以如果用户 X 发出请求`name`并被设置为*Paul*，用户 Z 也有 Paul 作为属性？

就我而言，我不希望这种行为，但想知道是否有更简单或更清洁的 OOP 方式来拥有会话/请求变量然后`session.getAttribute()`/`request.getAttribute()`

* * *

## 回答 #1

> 赞同：71
> 
> 时间：2012-06-21T14:12:29.823

回答你的第一个问题：是的，Spring MVC 控制器默认是单例的。对象字段将永远对所有请求和所有会话共享和可见。

但是，如果没有任何同步，您可能会遇到各种并发问题（竞争条件、可见性）。因此，您的字段应该有`volatile`（`private`顺便说一下）修饰符以避免可见性问题。

回到您的主要问题：在 Spring 中，您可以使用*request-*（请参阅[*4.5.4.2 请求范围*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-scopes-session)）和*会话范围*（请参阅：[*4.5.4.3 会话范围*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-scopes-session)）bean。您可以将它们注入控制器和任何其他 bean（甚至是单例！），但 Spring 确保每个请求/会话都有一个独立的实例。

将请求和会话范围的 bean 注入单例时唯一要记住的是将它们包装在范围代理中（示例取自[*4.5.4.5 范围 bean 作为依赖项*](http://static.springsource.org/spring/docs/current/spring-framework-reference/html/beans.html#beans-factory-scopes-other-injection)）：

```
<!-- an HTTP Session-scoped bean exposed as a proxy -->
<bean id="userPreferences" class="com.foo.UserPreferences" scope="session">

    <!-- instructs the container to proxy the surrounding bean -->
    <aop:scoped-proxy/>
</bean> 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2015-06-25T04:00:41.330

是的，Spring-MVC 中的控制器是单例的。在多个请求之间，您的类变量会被共享，并可能导致歧义。您可以`@Scope("request")`在控制器上方使用注释来避免这种歧义。

# asp-classic - 使用 ASP 将记录插入 db2 表并返回结果

> ID：11139575
> 
> 赞同：0
> 
> 时间：2012-06-21T13:44:23.750
> 
> 标签：asp-classic, db2

我正在尝试将记录插入 db2 表并使用 response.write 获得结果。我的响应是 Insert OK，但记录没有插入到我的表中。这是我使用的代码：

```
<%
dim connection
dim sSQL, sConnString

sSQL="INSERT INTO db.tablename (LOGON,CREATION_DATE,CREATOR) VALUES ('logonTest','2012-    06-20-12.00.00.000000','blabla')" 

sConnString="data source=blabla;user id=jhonsonjack;password=mypassword"

Set connection = Server.CreateObject("ADODB.Connection")

connection.Open(sConnString)

On Error Resume Next

connection.execute(sSQL)
if Err.number<>0 or connection.Errors.Count <> 0 Then
response.write "Insert Failed"
else
response.write "Insert OK"
end if
On Error Goto 0

Connection.Close
Set Connection = Nothing
%> 
```

知道其中有什么问题吗？

作为更新，我的插入现在几乎可以正常工作了。我说差不多了，因为我尝试在我的表中插入 4 条记录，但是这段代码只处理两个第一个“插入”，我不明白为什么。

```
<%
dim connection
dim sSQL
dim sConnString

sSQL="INSERT INTO XXXXX.XXXXX(LOGON,CREATION_DATE,CREATOR,ACCOUNT_TYPE,TO_DISABLE,APPLICATION_NAME,ACCOUNT_MODEL,DESCRIPTION,OWNER,FAC_SECURITY,CUPID,REG_FORM,CFIRM_DATE,TO_DELETE,DOCLINK) VALUES ('XXXXX','XXXXX','XXXXX','XXXXX','0','XXXXX','4','XXXXX','XXXXX','XXXXX','XXXXX','0','XXXXX','','XXXXX');INSERT INTO XXXXX.XXXXX (LOGON,CREATION_DATE,CREATOR,ACCOUNT_TYPE,TO_DISABLE,APPLICATION_NAME,ACCOUNT_MODEL,DESCRIPTION,OWNER,FAC_SECURITY,CUPID,REG_FORM,CFIRM_DATE,TO_DELETE,DOCLINK) VALUES ('XXXXX','XXXXX','XXXXX','XXXXX','0','XXXXX','4','XXXXX','XXXXX','XXXXX','XXXXX','0','XXXXX','','XXXXX');INSERT INTO XXXXX.XXXXX (LOGON,CREATION_DATE,CREATOR,ACCOUNT_TYPE,TO_DISABLE,APPLICATION_NAME,ACCOUNT_MODEL,DESCRIPTION,OWNER,FAC_SECURITY,CUPID,REG_FORM,CFIRM_DATE,TO_DELETE,DOCLINK) VALUES ('XXXXX','XXXXX','XXXXX','XXXXX','0','XXXXX','4','XXXXX','XXXXX','XXXXX','XXXXX','0','XXXXX','','XXXXX');INSERT INTO XXXXX.XXXXX (LOGON,CREATION_DATE,CREATOR,ACCOUNT_TYPE,TO_DISABLE,APPLICATION_NAME,ACCOUNT_MODEL,DESCRIPTION,OWNER,FAC_SECURITY,CUPID,REG_FORM,CFIRM_DATE,TO_DELETE,DOCLINK) VALUES ('XXXXX','XXXXX','XXXXX','XXXXX','0','XXXXX','4','XXXXX','XXXXX','XXXXX','XXXXX','0','XXXXX','','XXXXX');"

sConnString="data source=XXXXX;user id=XXXXX;password=XXXXXXXXXX"

Set connection = Server.CreateObject("ADODB.Connection")

connection.Open(sConnString)

set rs = connection.execute(sSQL)
if Err.number<>0 or connection.Errors.Count <> 0 Then
response.write "Insert Failed"
else
response.write "Insert OK" %><br><% response.write sSQL
end if
Connection.Close
%> 
```

知道那里有什么问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T16:31:12.147

您可以使用以下查询检查是否有任何数据插入到表中：

```
SELECT * FROM FINALE TABLE
(INSERT INTO...) 
```

# windows - Windows 上的 UberSVN：一次备份所有存储库并恢复它们

> ID：11139578
> 
> 赞同：1
> 
> 时间：2012-06-21T13:44:41.530
> 
> 标签：windows, svn, backup, restore, ubersvn

我是 Windows 上 SVN 和 UberSVN 的新手。我正在使用 UberSVN 12.04 免费版（不使用任何 uberapp。）

我想知道是否有任何方法可以一次备份所有存储库？我知道我可以为每个`Repo`.

有什么方法可以让我立即进行备份并恢复它，并且它也可以与 Uberportal 配合使用。（显示在存储库选项卡中）

一些细节将不胜感激，因为我不熟悉 SVN 及其配置。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T09:42:02.350

如果你想在 svn 备份选项之外削减你的 repo，你可以复制整个目录。

目前还没有办法一次将多个 repo 添加到 uberSVN，您需要单独执行这些操作。

这是不时讨论过的东西，但如果这是您认为重要的功能，我建议通过[此处](http://suggest.ubersvn.com/)的建议区域提出它，然后其他用户可以看到它并发表评论等，我们可以评估需求。

# 3d - 面向爱好者开发者的跨平台 3D 游戏引擎？

> ID：11139580
> 
> 赞同：0
> 
> 时间：2012-06-21T13:44:54.103
> 
> 标签：3d, cross-platform, game-engine

我正在尝试寻找一个引擎来为 Windows、Android 和 iOS 制作一个非常简单的 3D 游戏。那里有很多这样的东西（Unity、ShiVa、SIO2 等），但它们似乎都针对有预算的开发公司。因此，从个人爱好者开发者的角度来看，它们都是非常昂贵的。它们还有很多我不需要的功能。

我想知道是否有更基本的产品，价格在 100 美元以下，并且不需要订阅。我真的只需要原始的形状、简单的纹理和基本的照明。所以我不需要一堆功能，但我确实想要一个完美的开发体验和可靠的支持。具有编译为本地二进制文件的高级语言的东西是理想的，但不是必需的。

有没有人有什么建议？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-24T13:51:06.853

我对新的游戏引擎印象深刻：[http](http://www.gameplay3d.org/) ://www.gameplay3d.org/ 。它在[Apache 2.0 许可](http://www.apache.org/licenses/LICENSE-2.0.html)下开源，并且正在积极开发中。它支持 OSX、Win、iOS、Android 和 BB10（新的黑莓平台）。

我发现它非常适合我制作的快速原型 BB10 应用程序[[youtube]](http://www.youtube.com/watch?v=jof8zJ0isjI)。它是一个轻薄的、轻量级的，并且为它处于相对早期的开发阶段而编写得非常好。它具有您需要的所有基本内容，例如矢量类、网格、顶点缓冲区和场景图系统。材质、着色器和纹理支持是我最喜欢的部分——启动和运行速度超快，并且使用游戏材质文件轻松定义/加载所有这三个部分。它还包括一个不错的 UI 系统，包括一种简单但富有表现力的 UI 标记语言。开发人员对错误报告非常敏感。

缺点是它还不是超级成熟，但对于业余爱好者来说绝对足够坚固。Vector/Math 库还没有得到很好的优化，尽管有几个 NEON 矢量优化。它还对我不太喜欢的大多数资源使用引用计数。但总的来说，我认为它非常棒。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-24T16:08:20.287

Unity3D 有两个版本：“完全免费”和“非常昂贵”。免费版本将满足您的所有需求，甚至更多。付费版本适用于像我这样的开发公司，但即使我们也只有几台许可计算机。我们中的大多数人几乎完全在免费版本中构建我们的应用程序，直到最后我们需要为 Apple Store 等编译特殊功能。我发现 Unity 非常直观，并且您可以轻松地将您的项目变成可播放的 .exe 非常棒 - 只需单击一下。他们有一个相当不错的脚本参考，以及一个名为 Unify 的 wiki。在语言部门，我会推荐 C#，但 JavaScript/UnityScript 会做同样的事情。这是一个偏好问题。不管你选择什么，祝你好运！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-10T15:02:46.733

没有提到的两个图形引擎是[Ogre](http://www.ogre3d.org)和[IrrlIcht](http://irrlicht.sourceforge.net)。游戏引擎[GameKit](https://code.google.com/p/gamekit)有一个适用于这两个 3d 引擎的适配器套件。

[您可以在Gamekit“相关作品”wiki 页面](https://code.google.com/p/gamekit/wiki/Related_Work)和[Wikipedia“游戏引擎列表”页面](https://en.wikipedia.org/wiki/List_of_game_engines)上找到许多其他引擎，查看“目标平台”列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T13:47:49.833

如果你对 Javascript 和 web 图形感兴趣，[Three.js](https://github.com/mrdoob/three.js/)是一个很好的轻量级跨平台 3D 库。它也是开源的，所以没有订阅/付款/等。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-04T07:00:59.170

Irrlicht 3d Engine 完全开源且免费

Proton 3d Engine 内核使用 Irrlicht 和 Bullet Physics，也是完全开源的

基于 Win32 Macox Linux Android Ios 构建

试试这个 [https://github.com/fatalfeel/proton_sdk_source](https://github.com/fatalfeel/proton_sdk_source)

和 svn://rtsoft.com/rtsvn/proton

和 svn://svn.code.sf.net/p/irrlicht/code/branches/ogl-es

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-30T22:45:05.640

[Axiom 3D 渲染引擎](http://axiom3d.net)支持许多平台和各种 GFX API，包括 Windows Phone 7、Windows、iPhone、Android、Linux 和 Mac OSX，使用 OpenGL、OpenGL ES、DirectX 和 XNA 。你需要 Xamarin 提供的 MonoTouch 和/或 Mono For Android 许可证才能编写和部署到 iOS 和 Android。

# asp.net-mvc-3 - MEF 的导出/导入问题

> ID：11139582
> 
> 赞同：0
> 
> 时间：2012-06-21T13:45:02.240
> 
> 标签：asp.net-mvc-3, mef

我正在使用 MVC3 和 MEF 创建一个 Web 应用程序。我正在尝试使用 IDNumber 将我的 HostModel 导出到插件，然后让插件重定向到使用该 IDNumber 的链接。我的模型没有正确导出，然后我的视图也没有从插件控制器读取模型（我通过创建一个测试模型对象并将其传递给视图来测试它）。我很确定我与我在插件中导出到视图的方式有些混淆。我使用的是 .aspx 文件而不是 .vbhtml，因为 VS2010 没有给我选项。当我尝试将 .vbhtml 文件拖到项目中时，它无法正常工作。

这是我的主机控制器：

```
<Export(GetType(HostModel))>
<PartCreationPolicy(CreationPolicy.NonShared)>
Public Class HostController
    Inherits System.Web.Mvc.Controller

    Private m_objHost As HostModel

    Private m_IDNUmber As String
    Property IDNumber() As String
        Get
            Return m_IDNUmber
        End Get
        Set(value As String)
            m_IDNUmber = value
        End Set
    End Property

    Function Index() As ActionResult
        ViewData("Message") = "Welcome to ASP.NET MVC!"
        If m_objHost Is Nothing Then
            m_objHost = New HostModel
        End If
        Return View(m_objHost)
    End Function

    '<HttpPost()>
    Function ChangeCUNumber(model As HostModel, strIDNumber As String) As ActionResult
        ' m_IDNUmber = strIDNumber
        model.IDNumber = strIDNumber
        Return View("Index", model)
    End Function

    <HttpPost()>
    Function GoToMini(model As HostModel) As ActionResult
        m_CUNUmber = model.CUNumber
        Dim hostContollerObj As New HomeController
        hostContollerObj.CUNumber = model.IDNumber

        m_objHost = model
        Return Redirect("http://localhost:3727/miniView")
    End Function
End Class 
```

这是我的主机模型：

```
Public Class HostModel
Implements IHost

Private Shared m_instance As HostModel
Private m_IDNumber As String

Public Sub New()
End Sub

Shared ReadOnly Property instance() As HostModel
    Get
        If m_instance Is Nothing Then
            m_instance = New HostModel
        End If
        Return m_instance
    End Get
End Property

Public Property IDNumber As String Implements CUCMCV_Interfaces.IHost.IDNumber
    Get
        Return m_IDNumber
    End Get
    Set(value As String)
        m_IDNumber = value
    End Set
End Property 
```

这是我的插件控制器：

```
<Export(GetType(IPlugin))> _
<ExportMetadata("PluginName", "miniView")> _
<PartCreationPolicy(CreationPolicy.NonShared)> _
Public Class miniViewController
    Inherits System.Web.Mvc.Controller
    Implements IPlugin

    <Import(GetType(HostModel))>
    Private m_objHost As HostModel

    Public Function Index() As ActionResult
        Dim renderedView As ViewResult = View("~/Plugin/miniView.dll/miniView.Index.aspx", m_objHost)

        Return renderedView
    End Function 
```

这是我的插件视图（Index.aspx）

```
Public Class Index
    Inherits Mvc.ViewPage

    Protected Sub Page_Load(ByVal sender As Object, ByVal e As System.EventArgs) Handles Me.Load

        Dim p As ImportData = New ImportData()
        Dim strMINILink As String = "http://inside/mini?ContractNumber="
        Dim strCUNumber As String = p.instance.IDNumber
        Dim strMINIURL As String = strMINILink & strIDNumber
        Response.Redirect(strMINIURL)

    End Sub

End Class

Public Class ImportData

    <Import(GetType(HostModel))>
    Property instance As HostModel

    Public Sub New()
        Dim catalog As AggregateCatalog = New AggregateCatalog()

        catalog.Catalogs.Add(New DirectoryCatalog("C:\Documents and Settings\gbv0860\My Documents\cucmConsolidatedView\CUCMCV\cucmConsolidatedView\cucmConsolidatedView\bin"))
        Dim _container As CompositionContainer = New CompositionContainer(catalog)

        Try
            _container.ComposeParts(Me)

        Catch ex As Exception
            Console.WriteLine(ex.ToString)
        End Try

    End Sub
End Class 
```

**任何帮助将非常感激！如果您需要我澄清任何事情，请告诉我！谢谢！**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:47:40.250

您已经`<Export(GetType(HostModel))>`上了`HostController`实际上不是`HostModel`. 这不是一个有效的出口。

ASP.NET MVC 将按控制器的确切类型请求控制器，因此您应该`HostController`只使用`<Export>`.

`<Export(GetType(HostModel))>`可能属于类`HostModel`。而不是实现你自己的单例，你应该用`<PartCreationPolicy(CreationPolicy.Shared)>`.

然后就是你有一个 import on `ImportData`，但是那个类也没有被导出，你只是用一个`new`语句自己创建它。因此，MEF 永远不会看到这些实例，也不会对导入做任何事情。

最后，请注意 ASP.NET MVC 不会自动使用 MEF 创建对象。您需要注册一个包含 MEF 容器[的依赖解析器来进行设置。](http://bradwilson.typepad.com/blog/2010/10/service-location-pt5-idependencyresolver.html)MEF2 中似乎有[APS.NET MVC 的组合提供程序。](http://mef.codeplex.com/releases/view/76703)

# java - 来自 Android 设备的 REST Web 服务调用

> ID：11139586
> 
> 赞同：1
> 
> 时间：2012-06-21T13:45:19.893
> 
> 标签：java, android, web-services, rest, network-programming

我制作了一个 android 应用程序，它连接到我的台式计算机上的本地 Web 服务，在一个带有路由器的网络中。

在 AVD 中，我设法调用了 Web 服务，但是在我的 android 设备上部署应用程序时遇到了问题（连接超时）。电话已连接到同一网络，但通话无法正常工作。

有没有一种简单的方法可以从设备调用 Web 服务？有什么方法可以做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:52:00.340

确保您尝试访问的网址是可访问的。例如，您的计算机可能位于不允许从网络外部访问的防火墙后面。您可以将手机连接到计算机所在网络上的无线接入点。

或者，您可以将 Web 服务放在可通过 Web 访问的服务器上。

# c# - 以相同的方式在javascript和C#中加密字符串以获得相同的结果

> ID：11139587
> 
> 赞同：0
> 
> 时间：2012-06-21T13:45:21.473
> 
> 标签：c#, javascript, encryption, web

我正在开发一个网络应用程序，我需要在 javascript 中加密字符串以与来自服务器（.net C#）的加密字符串进行比较。

我需要这样做，将客户端中的加密字符串与 javascript 进行比较。

如何以相同的方式加密客户端和服务器中的字符串并获得相同的加密字符串？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:49:20.200

首先，由于客户端 Javascript 需要访问加密功能，但可能不需要解密功能（否则为什么要加密？），您需要使用非对称加密算法。类似 RSA 的东西。或者，您可以使用加密哈希，这是一种单向函数。如果您向我们提供有关您要实现的目标的一些上下文可能会有所帮助，但从目前的描述来看，我建议您寻找哈希算法的实现，例如 JavaScript 中的 SHA-2 系列之一 - System.Cryptography 命名空间C# 已经有了这些。

如果您正在实施某种安全客户端，请注意。例如，如果您尝试将密码哈希与服务器上的内容进行比较，并且在客户端进行比较，则恶意用户可以简单地附加调试器并绕过您的逻辑......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:58:32.240

我会使用 Ajax 并从服务器端使用 RSA encrpytion，这样您就可以为两者使用相同的代码。

但是，如果你想要真正的 javascript RSA 加密，你可以使用这个库：
[Cryptico.js](http://cryptico.wwwtyro.net/)

对于服务器端 C# 代码，您可以查看此站点：
[C# RSA Example](http://codeindex.blogspot.co.il/2011/11/encryptingdecrypting-data-with-rsa.html)

# jsf - JSF 2.0：如何设置验证错误的顺序

> ID：11139588
> 
> 赞同：2
> 
> 时间：2012-06-21T13:45:28.837
> 
> 标签：jsf, hibernate-validator

我将 Jsf 2 与 Hibernate Validator 一起使用。它工作正常，但我不知道如何设置生成错误的顺序。

例如：

我的托管 Bean

```
public class UserPresentation {

@NotNull(message = "EmailNullError")
@Email(message="EmailNotValidError")
String email;

@NotNull(message="passwordNullError")
String password;
//getter,setter...
} 
```

在前端，passwordNullError 出现在生成的 ul-Tag 中的 emailNullerror 之前。我该如何改变呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:59:29.717

`for`您可以使用该属性将消息标签绑定到您的输入。验证消息将出现在相应输入的正后方。

```
<h:inputText value="#{myBean.email}" id="email" />
<h:message for="email" />           
<h:inputSecret value="#{myBean.password}" id="password" />
<h:message for="password" /> 
```

# plone - 3.3 -> 4.1 迁移失败，破坏 RAMCache AttributeError: 'RAMCache' object has no attribute '_cacheId'

> ID：11139597
> 
> 赞同：1
> 
> 时间：2012-06-21T13:45:45.210
> 
> 标签：plone

在 3.3 -> 4.1 迁移之后，我在结果页面上出现异常

```
 File "/fast/buildout-cache/eggs/plone.app.viewletmanager-2.0.2-py2.6.egg/plone/app/viewletmanager/manager.py", line 85, in render
        return u'\n'.join([viewlet.render() for viewlet in self.viewlets])
      File "/fast/buildout-cache/eggs/plone.memoize-1.1.1-py2.6.egg/plone/memoize/volatile.py", line 281, in replacement
        cached_value = cache.get(key, _marker)
      File "/fast/buildout-cache/eggs/plone.memoize-1.1.1-py2.6.egg/plone/memoize/ram.py", line 124, in get
        return self.__getitem__(key)
      File "/fast/buildout-cache/eggs/plone.memoize-1.1.1-py2.6.egg/plone/memoize/ram.py", line 166, in __getitem__
        MARKER)
      File "/fast/buildout-cache/eggs/zope.ramcache-1.0-py2.6.egg/zope/ramcache/ram.py", line 107, in query
        s = self._getStorage()
      File "/fast/buildout-cache/eggs/zope.ramcache-1.0-py2.6.egg/zope/ramcache/ram.py", line 122, in _getStorage
        cacheId = self._cacheId
    AttributeError: 'RAMCache' object has no attribute '_cacheId' 
```

看起来 RAMCache 对象处于无效状态。

同样在此之前在日志中看到：

```
 2012-06-21 16:42:54 INFO plone.app.upgrade Ran upgrade step: Miscellaneous
  2012-06-21 16:42:54 INFO plone.app.upgrade End of upgrade path, migration has finished
  2012-06-21 16:42:54 INFO plone.app.upgrade Your Plone instance is now up-to-date.
  2012-06-21 16:43:02 ERROR txn.4553572352 Error in tpc_abort() on manager <Connection at 10be48490>
  Traceback (most recent call last):
    File "/fast/buildout-cache/eggs/transaction-1.1.1-py2.6.egg/transaction/_transaction.py", line 484, in _cleanup
      rm.tpc_abort(self)
    File "/fast/buildout-cache/eggs/ZODB3-3.10.5-py2.6-macosx-10.7-x86_64.egg/ZODB/Connection.py", line 730, in tpc_abort
      self._storage.tpc_abort(transaction)
    File "/fast/buildout-cache/eggs/ZODB3-3.10.5-py2.6-macosx-10.7-x86_64.egg/ZEO/ClientStorage.py", line 1157, in tpc_abort
      self._server.tpc_abort(id(txn))
    File "/fast/buildout-cache/eggs/ZODB3-3.10.5-py2.6-macosx-10.7-x86_64.egg/ZEO/ServerStub.py", line 255, in tpc_abort
      self.rpc.call('tpc_abort', id)
    File "/fast/buildout-cache/eggs/ZODB3-3.10.5-py2.6-macosx-10.7-x86_64.egg/ZEO/zrpc/connection.py", line 768, in call
      raise inst # error raised by server
  OSError: [Errno 2] No such file or directory: '/fast/xxx-2012/var/blobstorage/0x00/0x00/0x00/0x00/0x00/0x07/0xdc/0x55/0x00FWigqp.tmp-'
  2012-06-21 16:43:03 ERROR Zope.SiteErrorLog 1340286183.10.000607291180815 http://localhost:9666/xxx/@@plone-upgrade
  Traceback (innermost last):
    Module ZPublisher.Publish, line 134, in publish
    Module Zope2.App.startup, line 301, in commit
    Module transaction._manager, line 89, in commit
    Module transaction._transaction, line 329, in commit
    Module transaction._transaction, line 446, in _commitResources
    Module ZODB.Connection, line 781, in tpc_vote
    Module ZEO.ClientStorage, line 1098, in tpc_vote
    Module ZEO.ClientStorage, line 929, in _check_serials
  IOError: [Errno 2] No such file or directory: '/fast/xxx-2012/var/blobstorage/0x00/0x00/0x00/0x00/0x00/0x07/0xdd/0xca/0x009kWNYQ.tmp-' 
```

*   为什么会发生这种情况？

*   任何指针如何重新初始化 RAMCache 对象？

RAMCache 首次由使用@memoize deorator 的 FaviconViewlet 引用，它会导致此错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T20:28:18.077

好吧，根据回溯，您的迁移显然没有成功完成。因此，我将专注于找出它失败的原因，而不是解决诸如 RAMCache 损坏之类的问题，这可能是迁移未运行的结果。

回溯表明它在尝试*中止*事务时中断了......因此您可能需要进行一些调试以确定导致它*尝试*中止的原因，因为您粘贴的日志中没有说明。

# php - 如何使用 facebook 的图形 api 添加具有可点击位置的事件？

> ID：11139599
> 
> 赞同：0
> 
> 时间：2012-06-21T13:45:52.267
> 
> 标签：php, facebook-graph-api, facebook-php-sdk, facebook-page

根据标题，我可以获得文本表示，但是如果我们添加一个存在于 fb 上的事件位置（有一个页面），有没有办法让它可点击？

我正在使用 php-sdk。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:43:16.503

我们也一直在努力解决这种行为 - 即使地址完整且正确的位置也不会显示位置图。我们发现我们可以编辑事件并保存事件（无需任何更改），然后地图将显示。这似乎与何时计算（或未计算）纬度\经度有关。

# php - 不同的形式，相同的对话框

> ID：11139602
> 
> 赞同：2
> 
> 时间：2012-06-21T13:46:00.117
> 
> 标签：php, javascript, ajax

我有一个两难境地，我想解决它的最好方法是求助于社区。我有一个添加按钮，它为您提供选项列表。根据您选择的选项，它应该显示一个对话框和一个表单。

最好的方法是什么？

1.  让所有表单都已经编码和交付并激活正确的表单（**这可能意味着我必须重复很多代码，这不是一种优化的做事方式**）
2.  通过 Ajax 加载表单（**如果不需要从服务器获取表单的费用，这可能是一个好方法**）
3.  在Javascript中动态创建它？（**最好的？**）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:10:10.907

如果您的大多数问题都相同，那么第一个肯定不是一个选择。

选项 2 和 3 都有其加/减点。

*   **AJAX 获取表单**

    这样，您可以避免在代码页上出现集群，您可以向用户隐藏某些选项，直到他们选择特定选项（根据情况，这可能是好是坏）。

    可能需要更多时间从另一台服务器获取数据，但客户端处理更少，服务器端处理更多。

*   **动态Javascript**

    与上面完全相反，所有的表单生成规则都必须是 JS 的形式，因此可以在源代码中使用。可以集群一点，而不是隐藏。

    客户端比服务器端更多的数据处理。

如果由我决定，我会做 AJAX 一个，只是因为它看起来更干净，但根据您的限制/容忍度，您也可以选择 3 个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:14:17.317

第二个选项与第一个相同；要获取正确的表格，您必须已经有表格。

第三个选项很好，但它对编辑不太友好。您将在 3 周和 BOM 后查看您的代码！

我可以向您推荐 AJAX 之一，即使您编写了那么多代码。[但是要注意这个](https://stackoverflow.com/questions/11043693/jquery-ajax-cutting-off-response-in-ie/11099137#11099137)

# css - 使用 CSS 定位 SVG

> ID：11139604
> 
> 赞同：3
> 
> 时间：2012-06-21T13:46:09.697
> 
> 标签：css, svg, css-selectors

有没有办法让我用 CSS 来定位 SVG？它们在 IE8 向下看起来像破碎的图像，我想使用modernizr 隐藏它们，例如我希望像......

```
.no-svg object[type=svg] {
  display:none;
} 
```

[按照http://www.alistapart.com/articles/using-svg-for-flexible-scalable-and-fun-backgrounds-part-ii](http://www.alistapart.com/articles/using-svg-for-flexible-scalable-and-fun-backgrounds-part-ii)中的建议，我正在使用它来将 SVG 嵌入到我的页面中

```
<object type="image/svg+xml" 
  width="100" height="100" style="float:right" 
  data="http://blog.codedread.com/clipart/apple.svgz">
<span/></object> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:03:38.890

标记中的`type`属性是`image/svg+xml`. 您的属性选择器会`object[type=svg]`查找*完全*`type`为 的属性，因此您的对象将不匹配。 *`svg`*

 *您应该在标记中指定完整的 MIME 类型（您需要在此处使用引号，否则它将不起作用；有关详细信息，请参阅[此规范](http://www.w3.org/TR/CSS21/syndata.html#characters)）：

```
.no-svg object[type="image/svg+xml"] {
  display:none;
} 
```

或者，如果您愿意，可以使用子字符串属性选择器，但我更喜欢上面的：

```
.no-svg object[type*=svg] {
  display:none;
} 
```*

# ruby-on-rails - 在 Controller 中调用模型方法

> ID：11139605
> 
> 赞同：41
> 
> 时间：2012-06-21T13:46:17.887
> 
> 标签：ruby-on-rails, methods, model, controller, instantiation

我在这里遇到了一些困难，我无法成功调用属于*控制器中*`ProjectPage` *模型*的方法。`ProjectPage`

 *我的`ProjectPage`控制器中有：

```
def index
  @searches = Project.published.financed     
  @project_pages = form_search(params)
end 
```

在我的`ProjectPage` *模型*中：

```
def form_search(searches)
  searches = searches.where('amount > ?', params[:price_min]) if check_params(params[:price_min])
  @project_pages = ProjectPage.where(:project_id => searches.pluck(:'projects.id'))
end 
```

但是，我无法成功调用该`form_search` *方法*。

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2012-06-21T14:15:08.480

要完成davidb的回答，您做错的两件事是：

1）当模型函数仅在模型本身中定义时，您正在从控制器调用模型的函数。所以你确实需要打电话

```
Project.form_search 
```

并定义函数

```
def self.form_search 
```

2）您正在从模型中调用参数。在 MVC 架构中，模型对请求一无所知，因此这里没有定义 params。相反，您需要将变量传递给您的函数，就像您已经在做的那样......

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2012-06-21T13:55:32.167

三件事：

1.）当你想创建一个不限于类对象的类范围方法时，你需要像这样定义它

```
def self.method_name
  ..
end 
```

并不是

```
def method_name
  ...
end 
```

2.) 这可以使用`scope`这些`lambda`非常好的功能来完成。像这样在模型中添加：

```
scope :form_search, lambda{|q| where("amount > ?", q) } 
```

将使您能够致电

```
Project.form_search(params[:price_min]) 
```

第二步是为`ProjectPage`模型添加一个范围，这样所有东西都在它所属的地方！

3.) 当您在 Controller 中调用 Class 方法时，您需要像这样指定模型：

```
Class.class_method 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-06-21T13:54:17.273

在模型中这样声明

```
def self.form_search(searches)
  searches = searches.where('amount > ?', params[:price_min]) if check_params(params[:price_min])
  @project_pages = ProjectPage.where(:project_id => searches.pluck(:'projects.id'))
end 
```

并从控制器调用

```
@project_pages = ProjectPage.form_search(params) 
```*

# git - gforge 替换 git

> ID：11139623
> 
> 赞同：0
> 
> 时间：2012-06-21T13:47:08.833
> 
> 标签：git, gforge

我们一直在为 cvs/svn 使用 gforge 服务器。现在我们正在转向 git。你能推荐一个 git 的服务器，它可以代替 gforge。我的服务器机器是红帽的，所以安装 Gitorious 并不简单。我们不想要 github。

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:49:59.207

[Gitolite](http://sitaramc.github.com/gitolite/)是内部服务 git 存储库的标准，但它不会取代 GForge；但是后者[有一个 git 插件](http://gforgegroup.wordpress.com/2010/04/15/git-support-in-gforge/)，用于连接你的 git repos。

拥有 GForge 功能的替代方法是[Redmine](http://www.redmine.org/)或[ChiliProject](https://www.chiliproject.org/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-25T20:25:40.273

GForge 开箱即用地支持 Git。不过，根本不需要更改任何内容，您可能希望升级到 6.x。

——托尼

# ruby-on-rails - 如何在单核 378mb VPS 上运行 nginx 来提高多个 rails 应用程序的性能？

> ID：11139627
> 
> 赞同：0
> 
> 时间：2012-06-21T13:47:27.167
> 
> 标签：ruby-on-rails, nginx, vps

我有一个 VPS，它托管（当前）5 个不同的 rails 应用程序，它们都具有不同的域。为了让它们工作，我在我的 nginx 配置文件中为每个应用添加了一个 server {} 侦听器。我将其他所有内容都保留为默认值，例如只有一个 nginx 工作进程。同时，我还为其中一个应用程序配备了 2 个 Rails 工作人员。

现在，它按原样工作，但性能很低，尤其是速度。我怎样才能通过遵守我的限制让我的应用程序更快？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:31:23.870

nginx“worker_processes”应该设置为您可以使用的内核数。你提到你把它设置为1。你有更多的核心吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T19:43:19.637

你的问题是你深入交换。您在切换应用程序时遇到的缓慢是系统将请求的应用程序从交换加载到物理内存中。

为了解决这个问题，你可以观察谁在占用内存（也使用'top'），然后解决这个问题。您可能会找到一些需要调整的东西，但也很有可能您会发现在没有重大架构更改的情况下您已接近可能的物理极限。

如果您的时间很宝贵，那么您最好的做法是升级到至少有 1GB 内存的实例，因为您已经使用了差不多这么多内存。

# php - PHP PDO UPDATE 表不工作

> ID：11139629
> 
> 赞同：0
> 
> 时间：2012-06-21T13:47:27.907
> 
> 标签：php, mysql, pdo

我正在使用 PHP PDO 在表中插入和更新值。插入工作正常。但是当我尝试更新时，什么也没有发生。我没有错误，没有例外。

代码是

```
 $sql="UPDATE customers SET Name=:name,Company=:company,Address=:address,City=:city,State=:state,Country=:country,MainP=:phonem,CellP=:phonec,Email=:email,Action=:action WHERE CompanyID=:cid"; 
```

其余的：

```
 $stmt = $dbh->prepare($sql);
                 $stmt->bindParam(":name",$name);
                $stmt->bindParam(":company",$company);
                $stmt->bindParam(":cid",$customer_id);
                $stmt->bindParam(":address",$address);
                $stmt->bindParam(":city",$city);
                $stmt->bindParam(":state",$state);
                $stmt->bindParam(":country",$country);
                $stmt->bindParam(":phonem",$main_num);
                $stmt->bindParam(":phonec",$cell_num);
                $stmt->bindParam(":email",$email);
            $stmt->bindParam(":action",$action);
            $stmt->execute();
           echo $stmt->rowCount(); 
```

那么，我做错了什么吗？

编辑：忘了提到我的行数为 0。我试过不带引号。它仍然不起作用

编辑：刚刚发现 customer_id 从另一个函数返回为 0。谢谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:51:09.233

去掉引号，field = :field

```
$sql="UPDATE customers SET Name = :name, Company = :company, Address  = :address, City = :city, State= :state, Country = :country, MainP = :phonem, CellP = :phonec, Email = :email, Action = :action WHERE Name = :name"; 
```

另外，Action 可能受到保护，您可能需要将其包装在 ``

最后，您将名称设置为与 where 子句相同的值，这很糟糕，请使用主键。

两个原因，第一，它永远不会更新您希望的行，第二，如果其他人有该名称，您将更新他们行的其他值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:51:22.373

我不相信您需要 PDO 变量周围的单引号（示例 - ：名称，：公司等）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T13:51:40.423

查询失败，因为您正在按`:name`值更新，这实际上是您尝试设置的新值。因此，没有找到要更新的行。要解决这个问题，您需要更改 where 子句并使用`:old_name`.

另外，如果可用，我建议使用 Primary Keys 和 numbers 而不是 field `name`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:58:47.597

可能没有查询可以更新的数据，当在查询中使用像 name 这样的字符串时，尝试给出 like & % 以确保安全（如果在插入时不小心，可能会有空格）

例子

```
WHERE Name like '%name%"; 
```

# android - 有一种方法可以在 webview 中显示视频而不是调用 VideoView？

> ID：11139634
> 
> 赞同：1
> 
> 时间：2012-06-21T13:47:58.757
> 
> 标签：android, html, android-webview

我正在尝试加载带有视频标签的 HTML5 网页，并且我想在 webview 中显示此视频。我尝试过的所有示例都调用 VideoView 来显示它。有一种方法可以做到这一点，而无需调用 VideoView 并将其显示在 WebView 中？我使用的是安卓 2.3.4

# css - 使用绝对和相对位置配置动态侧边栏

> ID：11139639
> 
> 赞同：0
> 
> 时间：2012-06-21T13:48:20.950
> 
> 标签：css, css-position

我对使用绝对和相对定位有点困惑。基本上我有一个侧边栏，其中大约有 4 个 div。

我希望 div 3 在每个页面上始终位于同一位置，因为偶尔会缺少 div 1 或 div 2，这反过来又会拉动 div 3。

我尝试添加位置：相对于侧边栏，和位置：绝对到 div 3。这将它放在侧边栏的正确位置，但它使 div 3 与其他 div 重叠。

我在这里错过了什么？

* * *

任何困惑的人的布局：

```
 <div id='sidebar'>
        <div id='div1'></div>
        <div id='div2'></div>
        <div id='div3'></div>
        <div id='div4'></div>
 </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:53:23.363

这就是绝对定位应该如何工作的——绝对定位的元素从内容流中移除，并且不占用空间——所以它不能将元素向下推。

您将需要使用某种占位符，或者使用边距想出一些东西。我不确定你的元素需要如何放置，但是，如果`div3`总是必须`400px`从顶部放置，你为什么不这样做：

```
<div id='sidebar'>
    <div style="height:400px">
        <div id='div1'></div>
        <div id='div2'></div>
    </div>
    <div id='div3'></div>
    <div id='div4'></div>
</div> 
```

这样，你可以随意隐藏`div1`，`div2`完全不需要使用绝对定位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T13:58:04.243

我只是尝试使用可见性样式隐藏#div1,2,4，但它没有移动任何其他 div

看看这里：http: [//jsfiddle.net/hq6LM/10/](http://jsfiddle.net/hq6LM/10/)

这样做的原因是，如果您使用可见性设置样式，它仍然保留它的块属性，并且 div 不会向上移动，因为它们仍然在那里只是不可见的。

希望这可以帮助。

# css - 在 iPad 上的网站中加载图像的最大高度是多少

> ID：11139640
> 
> 赞同：0
> 
> 时间：2012-06-21T13:48:21.723
> 
> 标签：css, image, ipad

> **可能重复：**
> [Mobile Safari 中的最大图像宽度？在 panos 上进行不必要的缩减](https://stackoverflow.com/questions/3720316/max-image-width-in-mobile-safari-getting-unwanted-downscaling-on-panos)

在 iPad 的网站中加载图像的最大高度是多少。我加载了一个高度超过 7500 像素的图像（精灵），但它没有显示在 iPad 浏览器上。当我降低高度时，它开始显示。

仅供参考，精灵是小图标的集合，我使用指南针生成它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:01:45.500

本文讨论了 iPad 上的2 兆像素限制**错误。**这与最大高度无关 - 它与最大像素数有关。

[http://duncandavidson.com/blog/2012/03/webkit_retina_bug](http://duncandavidson.com/blog/2012/03/webkit_retina_bug)

解决方案：使用渐进式 jpeg。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:02:56.573

这是所有移动 Safari 浏览器的一个怪癖：图像大小不得超过 1024x1024x3 像素，与比例无关。defusion.org 说它不能超过 2,000,001 像素。

换个角度看：高度为 7500 像素的精灵可能不会比 2000000/7500 = 266 像素宽。fotr 没有在 ipad/iphone 上按比例缩小

这里有一些更多的细节： http: [//www.defusion.org.uk/archives/2010/02/19/shrinking-large-background-image-bug-in-iphone-safari/](http://www.defusion.org.uk/archives/2010/02/19/shrinking-large-background-image-bug-in-iphone-safari/)

及其背后的故事： [http ://www.teknocat.org/blog/web-development/show/6/mobile-safari-background-image-scaling-quirk](http://www.teknocat.org/blog/web-development/show/6/mobile-safari-background-image-scaling-quirk)

# c# - Screenreader (NVDA) 仅读取 WPF Window-Title

> ID：11139641
> 
> 赞同：1
> 
> 时间：2012-06-21T13:48:22.100
> 
> 标签：c#, wpf, screen-readers, nvda

我正在尝试让屏幕阅读器（我正在使用 NVDA 进行测试）读出重点控件的 AutomationProperties.Name 和 AutomationProperties.Helptext。

然而，当我关注应用程序时，它所做的只是说“主窗口”。

```
<Window x:Class="AutomationPropertiesTest.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="394" Width="307"       
    >

<Grid>
    <Label Content="Summand" Height="28" HorizontalAlignment="Left" Margin="12,8,0,0" Name="label1" VerticalAlignment="Top" />
    <Label Content="Summand" Height="28" HorizontalAlignment="Left" Margin="12,43,0,0" Name="label2" VerticalAlignment="Top" />
    <Label Content="Summe" Height="28" HorizontalAlignment="Left" Margin="12,125,0,0" Name="label3" VerticalAlignment="Top" />
    <Rectangle Height="2" HorizontalAlignment="Left" Margin="0,80,0,0" Name="rectangle1" Stroke="Black" VerticalAlignment="Top" Width="336" />

    <Button x:Name="btnBerechnen" Content="Berechnen" AutomationProperties.AutomationId="MainWindow_Button_Berechnen" AutomationProperties.IsRequiredForForm="True" AutomationProperties.Name="Summe Berechnen" AutomationProperties.HelpText="Mit diesem Knopf starten Sie die Berechnung" Height="23" HorizontalAlignment="Left" Margin="12,88,0,0" VerticalAlignment="Top" Width="261" />

    <TextBox x:Uid="summand 1" AutomationProperties.AutomationId="MainWindow_TextBox_Summand1" AutomationProperties.IsRequiredForForm="True" AutomationProperties.Name="Summand 1" AutomationProperties.HelpText="Bitte geben Sie den ersten Summanden ein" Height="23" HorizontalAlignment="Left" Margin="82,10,0,0" Name="textBox1" VerticalAlignment="Top" Width="120" />
    <TextBox AutomationProperties.AutomationId="MainWindow_TextBox_Summand2" AutomationProperties.IsRequiredForForm="True" AutomationProperties.Name="Summand 2" AutomationProperties.HelpText="Bitte geben Sie den zweiten Summanden ein" Height="23" HorizontalAlignment="Left" Margin="82,43,0,0" Name="textBox2" VerticalAlignment="Top" Width="120" />
    <TextBox AutomationProperties.AutomationId="MainWindow_TextBox_Summe" AutomationProperties.IsRequiredForForm="False" AutomationProperties.Name="Summe" AutomationProperties.HelpText="Hier steht das Ergebnis" Height="26" HorizontalAlignment="Left" Margin="82,125,0,0" Name="textBox3" VerticalAlignment="Top" Width="120" />
</Grid> 
```

有想法该怎么解决这个吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:41:17.617

自己找到了答案...仅当我从 Visual Studio 中运行程序（调试）时才会发生这种情况。当我启动 .exe 本身时，它工作正常。

# ios - MPMoviePlayerViewController 和自动状态栏显示隐藏

> ID：11139642
> 
> 赞同：4
> 
> 时间：2012-06-21T13:48:23.250
> 
> 标签：ios, xcode, mpmovieplayercontroller, show-hide, statusbar

有几篇关于 MPMoviePlayerViewController 和状态栏显示隐藏行为的帖子。他们似乎都没有回答我的问题。大多数其他类似的帖子都存在这个问题：如何防止 MPMoviePlayerViewController 自动隐藏状态栏。我的问题是相反的。我已经实现了一个 MPMoviePlayerViewController 及其所有的 GUI 和逻辑。现在我需要从一个视频跳到一系列视频（网址）。对于每个视频，我需要确定是否要显示控件。我注意到，一旦我隐藏它们

```
self.moviePlayer.controlStyle = MPMovieControlStyleNone; 
```

即使我将它们显示回来，状态栏根据控件自动隐藏的良好效果也不再起作用。我可以设置状态栏是否隐藏，但我似乎无法让状态栏“自动隐藏”重新开始工作。当然，我想避免仅仅为此更改视图控制器导航。有什么建议么？

# java - WAR/JAR/EAR 中的 MANIFEST.MF 有什么用？

> ID：11139643
> 
> 赞同：23
> 
> 时间：2012-06-21T13:48:35.473
> 
> 标签：java, manifest.mf

我知道 MANIFEST 文件在移动应用程序中的使用，但不知道在 Java 应用程序中的使用。

我的猜测是，它仅用于保留 BUILD 信息。我对么？？

这是强制性的吗？如果不是，那么我们可以从中获得哪些主要好处？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-21T13:51:01.103

`manifest.mf`携带神器的属性。最著名的类之一是例如`jar`在没有指定其他类时用于启动 jar 文件的主类。句法：

```
Main-Class: classname 
```

其他用途是，例如，包密封和包版本控制。查看有关它的 java 教程：http: [//docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html](http://docs.oracle.com/javase/tutorial/deployment/jar/manifestindex.html)

jar 中的清单通常包含的信息比例如少得多`AndroidManifest.xml`。它非常轻巧，不**包含**任何构建或打包信息。

这是因为java没有好的模块系统。因此，一个 jar 不是一个可能需要大量配置信息的模块（比如它所依赖的模块列表）。相反，一个 jar 只是一堆带有一些配置信息的类。希望这将由*项目拼图*（[http://openjdk.java.net/projects/jigsaw/](http://openjdk.java.net/projects/jigsaw/)）解决。

# java - Java - 使用泛型参数调用存储过程

> ID：11139647
> 
> 赞同：2
> 
> 时间：2012-06-21T13:48:49.133
> 
> 标签：java, sql, oracle, generics

我想调用一个存储过程（Oracle）。由于我的过程调用是动态的，因此我需要动态管理过程参数。问题是我想避免使用`instanceof`关键字，因为它不适用于主要类型。有没有更简洁的方法来调用这样的程序？

```
 public void executeProcedure(StoredProcedure proc) {        
        LinkedList<ProcedureParameter<?>> parameters = proc.getParameters();

        CallableStatement statement = connection.prepareCall("{ call MY_PACKAGE.MY_PROCEDURE( ?, ?, ? ) }");

        for (int i = 0; i < parameters.size(); i++) {
            Object paramValue = parameters.get(i).getValue();

            // Beginning of smelly code

            if (paramValue instanceof String) {
                statement.setString(i + 1, (String) paramValue);
            }
            else if (paramValue instanceof ...) {
                ...
            }
            else {
                ...
            }

            // End of smelly code
        }

        statement.execute();            
    } 
```

```
 public class ProcedureParameter<E> {
        private String name;
        private E value;

        public ProcedureParameter(String name) {
            this.name = name;
        }

        public ProcedureParameter(String name, E value) {
            this.name = name;
            this.value = value;
        }

        // Getters and setters
    } 
```

谢谢你的任何想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:20:56.010

我认为它可以帮助您在没有 instanceof 的情况下实现所需的功能：[http ://en.wikipedia.org/wiki/Visitor_pattern](http://en.wikipedia.org/wiki/Visitor_pattern)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:46:30.323

您可以使用反射，尽管这不是一个好习惯，因为它速度较慢，并且会阻止编译器检查以确保方法调用正确。您可以将每个类映射到其对应的`CallableStatement`方法。例如`String`将映射到“setString”。

```
List<ProcedureParameter<?>> parameters = proc.getParameters();
CallableStatement statement = connection.prepareCall("{ call MY_PACKAGE.MY_PROCEDURE( ?, ?, ? ) }");

Map<Class<?>, String> methods = new HashMap<Class<?>, String>();
methods.put(String.class, "setString");
//...

for (int i = 0; i < parameters.size(); i++) {
  Object paramValue = parameters.get(i).getValue();
  Class<?> paramValueClass = paramValue.getClass();
  String stmtMethod = methods.get(paramValueClass);
  if (stmtMethod != null){
    Method method = statement.getClass().getMethod(stmtMethod, int.class, paramValueClass);
    method.invoke(statement, i+1, paramValue);
  } else {
    //error
  }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-06-21T15:24:25.450

我将实施另一种解决方案，这可能不是最好的解决方案，但在我看来，虽然不臭。

作为`StoredProcedure`一个接口，每个存储过程都实现了这个接口。因此，每个实现都将包含一个返回`call ...`语句的方法，因为开发人员知道他实现的过程所需的参数类型。

# java - 从 CMD 为 Eclipse 访问 sqlite 表

> ID：11139649
> 
> 赞同：0
> 
> 时间：2012-06-21T13:48:50.757
> 
> 标签：java, android, eclipse, cmd

DDMS 仅在 Eclipse 中查看数据库。我想从 CMD 查看表格内容。我达到了 sqlite3 /data/data//databases/PhoneBook

DESC 命令无法访问..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T14:16:10.467

adb 不是文件夹，它是一个工具 - 位于

```
<sdk>/platform-tools 
```

要连接到模拟器上的 sqlite3，您必须首先启动一个 shell

```
adb -s emulator-5554 shell 
```

然后，使用 sqlite3 命令连接到您的数据库

```
sqlite3 /data/data/<package_name>/databases/<database> 
```

此时您可以使用 .help 获得进一步帮助

希望这可以帮助 ：）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-23T11:27:18.960

查看[sqlite](http://www.sqlite.org/sqlite.html)`.tables`帮助中的命令获取数据库中的表列表

如果您正在寻找列信息

```
pragma table_info(TABLE_NAME) 
```

当然要获取表格的内容

```
select * from TABLE_NAME 
```

我真的不知道你在问什么……所以有 3 个常用的 sqlite 命令来获取关于你的数据库/表的信息，假设你已经按照@JayJ 的回答连接到数据库。

# apache - Apache Shiro EhCache 初始化异常：另一个未命名的 CacheManager 已存在于同一 VM 中

> ID：11139653
> 
> 赞同：5
> 
> 时间：2012-06-21T13:48:59.607
> 
> 标签：apache, ehcache, shiro

我正在尝试将 EhCache 配置为在启用了 Apache Shiro 的 Web 服务中处理授权缓存。目前我收到以下异常：

> org.apache.shiro.cache.CacheException: net.sf.ehcache.CacheException: 另一个未命名的 CacheManager 已经存在于同一个 VM 中。请为配置中的每个 CacheManager 提供唯一名称或执行以下操作之一：

1.  使用 CacheManager.create() 静态工厂方法之一来重用具有相同名称的相同 CacheManager 或在必要时创建一个
2.  在创建具有相同名称的新缓存管理器之前关闭早期的缓存管理器。

我的 shiro.ini 看起来像：

```
[main]   
...    
cacheManager = org.apache.shiro.cache.ehcache.EhCacheManager 
cacheManager.cacheManagerConfigFile = classpath:ehcache.xml  
securityManager.cacheManager = $cacheManager 
```

从这个 StackOverflow 帖子看来，使用 Spring 的人已经通过强制 CacheManager 成为单例解决了这个问题：[另一个未命名的 CacheManager 已经存在于同一个 VM (ehCache 2.5)](https://stackoverflow.com/questions/10013288/another-unnamed-cachemanager-already-exists-in-the-same-vm-ehcache-2-5)中。

是否有人知道不使用 Spring 初始化的变通办法（我在 dropwizard 框架中工作并且不需要引入 Spring）？是否有某种方式从 shiro.ini 强制执行单例配置？

先感谢您！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-07T14:05:29.347

创建一个扩展 EhCacheManager 的自定义类，并在构造函数中设置你的 cacheManager。这 (net.sf.ehcache.CacheManager.create()) 允许您重用已经存在的缓存管理器。

```
package lekkie.omotayo

public class MyShiroCacheManager extends EhCacheManager
{

    public CacheManager()
    {
        setCacheManager(net.sf.ehcache.CacheManager.create());
    }
} 
```

然后你可以这样做：

```
cacheManager = lekkie.omotayo.MyShiroCacheManager
cacheManager.cacheManagerConfigFile = classpath:ehcache.xml
securityManager.cacheManager = $cacheManager 
```

# unix - 删除给定字符后的第一个字符

> ID：11139657
> 
> 赞同：2
> 
> 时间：2012-06-21T13:49:22.097
> 
> 标签：unix, sed

在这种情况下，字符是“ `^`”。

例如以下格式，包含 3 列。

从：

```
1 cccc cccc
2 cta^<t cta^<tcc
3 ccc cccc^*
4 ^]a^*c^*c ^]a^*c^*c 
```

到：

```
1 cccc cccc
2 ctat ctatcc
3 ccc cccc
4 acc acc 
```

我很确定这可以通过 sed 实现。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:52:20.993

为了匹配您的演示输入/输出，它应该只是`s/\^.//g`. 为了匹配描述，您需要`s/\^./\^/g`（即，您已将其描述为删除以下字符，但显示同时删除了插入符号和以下字符）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:51:23.810

你的意思是`sed 's/\^.//g'`？这将删除`^`和以下字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:07:58.963

这是一个`awk`解决方案（只是作为另一个 Unix 工具替代品提供，您已经有了`sed`解决方案）

```
awk '/^/{gsub(/\^./,"", $0)};1' data.txt 
```

给

```
1 cccc cccc
2 ctat ctatcc
3 ccc cccc
4 acc acc 
```

# java - Java 使用没有命名空间的 XSD 验证 XML

> ID：11139659
> 
> 赞同：3
> 
> 时间：2012-06-21T13:49:24.527
> 
> 标签：java, xml, validation, jboss, xsd

我正在尝试验证以下 XML

```
<query>
 <colors logic="AND">
  <color main="BLUE" tone="DARK" operator="=" />
 </colors>
</query> 
```

使用以下 XSD

```
<?xml version="1.0" encoding="UTF-8"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <xsd:complexType name="color">
     <xsd:attribute name="main" type="xsd:string" use="required"/>
     <xsd:attribute name="tone" type="xsd:string" use="required"/>
     <xsd:attribute name="operator" type="xsd:string"/>
 </xsd:complexType>
 <xsd:complexType name="colors">
     <xsd:sequence>
         <xsd:element name="color" type="color" maxOccurs="unbounded">   </xsd:element>
     </xsd:sequence>
     <xsd:attribute name="logic" type="xsd:string" use="required"/>
 </xsd:complexType>
 <xsd:complexType name="query">
     <xsd:sequence>
         <xsd:element name="colors" type="colors" maxOccurs="2"></xsd:element>
     </xsd:sequence>
 </xsd:complexType>
 <xsd:element name="query" type="query"></xsd:element>
</xsd:schema> 
```

所以...我想验证没有任何命名空间的 XML。我无法更改 XML，因为它是由另一个应用程序生成的，我只想在服务器端保证客户端正在发送正确的请求。

当我尝试针对 XSD 验证 XML 时，我收到以下异常消息：

```
cvc-elt.1: Cannot find the declaration of element 'query' 
```

我已经搜索并找到了这样的解决方案[，](https://stackoverflow.com/questions/2991091/java-xsd-validation-of-xml-without-namespace)[但](http://www.ibm.com/developerworks/xml/library/x-javaxmlvalidapi/index.html)没有成功

***解决方案（感谢@Traroth 为我指明了正确的方向）---***

这是我验证它的方式：

我有这个功能：

```
public static Document buildValidRequest(String content, Schema xsd) throws SAXParseException, SAXException, IOException, ParserConfigurationException {

    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();

    factory.setValidating(false);
    factory.setNamespaceAware(true);

    factory.setSchema(xsd);

    XMLSimpleErrorHandler errorHandler = new XMLSimpleErrorHandler();

    DocumentBuilder builder = factory.newDocumentBuilder();
    builder.setErrorHandler(errorHandler);

    StringReader reader = new StringReader(content);

    Document validXML = builder.parse(new InputSource(reader));

    if (errorHandler.getException() != null) {
        throw errorHandler.getException();
    }

    return validXML;

} 
```

这个类来处理错误：

```
public class XMLSimpleErrorHandler implements ErrorHandler {

private SAXParseException exception;

@Override
public void warning(SAXParseException e) {
    this.exception = e;
}

@Override
public void error(SAXParseException e) {
    this.exception = e;
}

@Override
public void fatalError(SAXParseException e) {
    this.exception = e;
}

public SAXParseException getException() {
    return exception;
}
} 
```

而这种获取模式的方法：

```
private static Schema getSchema(String xsdPath) throws SAXException, IOException {
    InputStream resourceAsStream = null;
    try {
        ServiceManager.getInstance().getLoggerManager().debug(RESTInitServlet.LOGCONTEXT, TAG, "Retrieving schema: "+xsdPath);
        resourceAsStream = getInstance().getClass().getResourceAsStream(xsdPath);
        SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);
        Source schemaSource = new StreamSource(resourceAsStream);
        Schema schema = schemaFactory.newSchema(schemaSource);
        return schema;
    } finally {
        if (resourceAsStream != null) {
            resourceAsStream.close();
        }
    }

} 
```

**没关系**：最奇怪的是：适用于在 Windows 7 上运行的 Tomcat 6；不能在 Linux 上运行的 jboss 中工作......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T13:55:19.227

你应该在这里找到你的答案：[http ://www.edankert.com/validate.html#Validate_using_external_Schema](http://www.edankert.com/validate.html#Validate_using_external_Schema)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T20:25:20.003

这可能是一个长镜头，但我记得当我们使用 JBoss 5.0 或 .1 时，我们在使用的**xerces**实现中发现了一个严重的错误。请检查版本是否存在错误或尝试更新版本的 xerces 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T15:21:40.643

您的实例文档和架构文档看起来不错；您调用验证的方式有问题。

# java - 从 java 中的 csv 文件读取时，斯洛伐克语字符变得混乱

> ID：11139662
> 
> 赞同：5
> 
> 时间：2012-06-21T13:49:32.563
> 
> 标签：java, unicode, inputstream

我正在尝试通过包含一些斯洛伐克语字符的 InputStream 读取逗号分隔的文件，因此我在 InputStream 参数中传递了正确的字符编码。但是角色仍然变得一团糟。

```
InputStreamReader stream = new InputStreamReader(inputStreamToExcel,"ISO-8859-2"); 
```

例如 dd890èš 变成 dd890č 最后两个斯洛伐克字符搞砸了。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:55:55.413

这是因为您的编码。您正在使用“ISO-8859-2”编码创建 InputStreamReader。

尝试使用“UTF-8”。还要检查文件的编码是什么。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:06:09.700

您可以使用 Notepad++ (Encoding->Character Set) 或其他编辑器来确定文件的编码方式。您的代码没有任何问题。你只需要找到正确的编码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-25T17:52:56.767

org.apache.commons.lang.StringEscapeUtils escapeHtml(value) 解决了这个问题。通过 escapeHTML，我能够看到准确的 html 实体代码，这有助于我分析应用程序读取了正确的字符。但是当它被分配给 String 时，它以某种方式被转换为错误的格式。但是，当将 unescapedHtml 字符串传递给浏览器时，它会被浏览器正确显示，因为浏览器可以正确理解 HTML 实体代码。

参考资料：[http ://www.w3schools.com/tags/ref_ascii.asp](http://www.w3schools.com/tags/ref_ascii.asp) [http://www.alanwood.net/demos/ansi.html](http://www.alanwood.net/demos/ansi.html)

这是我的分析。如果有人有什么要补充的，请补充。

# http-post - ASP.NET MVC 4 Web Api：带有未知或未指定 Content-Type 的 POST

> ID：11139665
> 
> 赞同：2
> 
> 时间：2012-06-21T13:49:42.687
> 
> 标签：http-post, asp.net-mvc-4, content-type

我的 web api 返回错误代码**500**，如果客户端 POST 的某些数据并且未指定内容类型。

错误信息

> 没有 MediaTypeFormatter 可用于从媒体类型为“未定义”的内容中读取“文档”类型的对象。

显示服务器找不到格式化程序。

但在这种情况下：“客户端没有设置内容类型或未知内容类型”，客户端对错误负责 - 而不是服务器。**Web api 应该返回类似4XX**的东西，而不是错误代码 500 。

我的问题是：如何配置 web api 它将返回状态码 400。

另一个例子是： 内容协商时：如果客户端发送他接受 XML，但服务器不能发送 XML 而是 JSON，那么服务器无论如何都会发送 JSON。在这种情况下，web api 应该返回状态码：406 Not Acceptable。

# html - 显示链接边界外的按钮图像

> ID：11139672
> 
> 赞同：0
> 
> 时间：2012-06-21T13:50:11.947
> 
> 标签：html, css

我可以创建按钮，使用在悬停和活动时更改的背景图像，并让活动状态显示超出锚点边界的图像吗？这是我的精灵：

[https://dl.dropbox.com/u/7737304/menu-sprite1.png](https://dl.dropbox.com/u/7737304/menu-sprite1.png)

精灵的上半部分是“悬停”，下半部分是“活动”。我在实心栏下方没有任何东西是可点击的链接，我不想设置宽度，因为菜单文本将设置在顶部并延伸到图像的左右边缘之外。

我试图将背景图像分配给父 li 标签，它适用于“悬停”，但我不能让它适用于“活动”。

有任何想法吗？

CSS

```
.navigation li:hover{
background: transparent url(../images/menu-sprite.png) center -86px no-repeat;
}
.navigation a{
color: #e8e8e8;
font-weight: bold;
text-transform: uppercase;
padding:0.5em 0.8em;
}
.navigation a:hover{
color: #fff;
}
.navigation a.active {
color: #fff;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:14:54.327

你的意思[是这样的](http://jsfiddle.net/n6dEH/)吗？

锚点在活动时会“扩展”，但不会改变流程，因为它使用负边距使其实际上与以前的大小相同。

所以：添加要扩展锚点的填充量，然后添加与负边距相同的量。（您确实需要锚是一个`block`或`inline-block`元素，否则它不能使用边距）

使用此方法不需要 JavaScript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:15:08.930

这就是我想出的：[DEMO](http://jsfiddle.net/GHTph/)

它只是将背景图像放在`<li>`. 不确定这是否正是您正在寻找的东西。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:20:27.897

这很难解释！我所做的是使`a`标签可点击，扩展`li`了标签，`::after`我可以在其中应用必要的样式以使其更改，但不能点击。

就像我说的，很难解释，但这里有一个演示：http: [//jsfiddle.net/cchana/SgH5C/](http://jsfiddle.net/cchana/SgH5C/)

这里有一些可以帮助你的 CSS：

```
.navigation li::after {
    background: transparent url('https://dl.dropbox.com/u/7737304/menu-sprite1.png') center -49px no-repeat;
    bottom: 0px;
    content: '';
    display: block;
    height: 31px;
    position: absolute;
    width: 100%;
}
.navigation li:hover::after {
    background: transparent url('https://dl.dropbox.com/u/7737304/menu-sprite1.png') center -130px no-repeat;
} 
```

# java - 在 Windows 中使用 JNI 加载库时出错

> ID：11139673
> 
> 赞同：1
> 
> 时间：2012-06-21T13:50:12.403
> 
> 标签：java, java-native-interface

我们在软件代码中结合了 Java 和 C++。因此，我们使用 JNI 从 JAVA 调用 C++ 库 baiscally .dll 和 .so。在 solaris 上这工作正常。我们能够加载 .so 并从 Java 方法调用 C++ 函数，但在 Windows 上，我们得到 r6034 windows 错误，即不支持的加载库的方式。

任何人都可以在这里帮助我吗？

我已经创建了 java.exe.manifest 并将其添加到 %JAVA_HOME%/bin。

谢谢尼拉吉·拉蒂

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:23:29.047

您的 dll 需要清单，而不是 java.exe

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T06:13:16.710

这是 java.exe.manifest 文件

```
<?xml version='1.0' encoding='UTF-8' standalone='yes'?>
<assembly xmlns='urn:schemas-microsoft-com:asm.v1' manifestVersion='1.0'>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type='win32' name='Microsoft.VC80.CRT' version='8.0.50608.0' processorArchitecture='amd64' publicKeyToken='1fc8b3b9a1e18e3b' />
    </dependentAssembly>
  </dependency>
  <dependency>
    <dependentAssembly>
      <assemblyIdentity type='win32' name='Microsoft.VC80.CRT' version='8.0.50727.4053' processorArchitecture='amd64' publicKeyToken='1fc8b3b9a1e18e3b' />
    </dependentAssembly>
  </dependency>
</assembly> 
```

其他代码大约有 50 多个文件，但已编译。C++ 代码在没有 JNI 的情况下运行良好，甚至 Java 类也被编译。仅当 Java 尝试加载 dll 时才会出现问题。

# c# - 如何阻止方法递归调用自己？

> ID：11139674
> 
> 赞同：1
> 
> 时间：2012-06-21T13:50:13.887
> 
> 标签：c#, visual-studio, recursion, listbox

我有两张表，`employees`在`project`中`listbox2`，我展示了所有的`employees`和`listbox1`所有的`projects`，现在显然一名员工可以参与许多项目，而一个项目可能有很多员工。所以我有这个`EmployeeProject`映射存在的多对多关系。我想要的是，如果用户单击第一个列表框中的项目名称，则该项目中的所有员工都应在列表框2 中选择。此外，当用户单击 listbox2 中的项目时，（员工）应在 listbox1 中选择该员工所属的所有项目

**但是，**如果我在此过程中使用 ListBox.SelectedIndexChanged 事件，并在 listbox2 中选择一个值，那么它将触发 listbox2 的 SelectedIndexChagned，这将通过选择当前员工所属的 listbox1 中的所有项目开始工作，但又一次，只要 listbox1 中的一个项目被选中，它就会触发它的 SelectedIndexChanged 事件，并且它会像这样永远持续下去。那么这有什么解决办法呢？到目前为止，我已经做到了这一点..

```
 private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
        {
            // Load the list of employees
            cmd.CommandText =
                "SELECT EmpName FROM Employee WHERE EmpID IN(SELECT EmpID FROM EmployeeProject WHERE ProjectID =(SELECT ProjectID FROM Project WHERE ProjectName = '" +
                listBox1.SelectedItem.ToString() + "')) ORDER BY EmpId";
            var rdr = cmd.ExecuteReader();
            listBox2.Items.Clear();
            // right now, I am doing this to escape this recursive loop, but thats not what I want
            while (rdr.Read())
            {
                listBox2.Items.Add(rdr.GetString(0));
            }
            rdr.Close();

            this.AutoScroll = true;
        }

        private void listBox2_SelectedIndexChanged(object sender, EventArgs e)
        {
            // Load the list of projects

            cmd.CommandText =
               "SELECT ProjectName FROM Projects WHERE ProjectID IN(SELECT ProjectID FROM EmployeeProject WHERE EmpId=(SELECT EmpId FROM Employee WHERE EmpName= '" +
                listBox2.SelectedItem.ToString() + "')) ORDER BY ProjectID";
            var rdr = cmd.ExecuteReader();
            listBox1.Items.Clear();
            // again, I don't want to clear, but select all those employee in listbox1 that are involved in this selected project, but can't do it because it would cause infinite recursion of these
            while (rdr.Read())
            {
            listBox2.Items.Add(rdr.GetString(0));
            }
            rdr.Close();

            this.AutoScroll = true;
        } 
```

所以？我应该怎么做才能达到我想要达到的目的？我将如何避免这种递归？我知道这种方式也适用于我刚刚展示的内容，但我不想清理并再次出现（这可能会使简单的用户感到困惑）。我希望对于每个选择，在其他列表框中选择与该选择相对应的值（当然不会导致递归！）。我该怎么做？

*编辑*我不知道如何以编程方式在列表框中选择多个项目，所以如果你能说出来，那就太好了！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T13:58:43.387

有一种设计模式叫做 Balking，我认为它适用于此。

[http://en.wikipedia.org/wiki/Balking_pattern](http://en.wikipedia.org/wiki/Balking_pattern)

想法是引入一个辅助状态变量来控制操作：

```
 private bool doesProcessing { get; set; }

  private void listBox1_SelectedIndexChanging( ... )
  {
     // signal the beginning of processing
     if ( doesProcessing ) 
        return;
     else
        doesProcessing = true; 

     try
     {
        // your logic goes here
     }
     finally
     {
        // signal the end of processing
        doesProcessing = false;
     }
  } 
```

和 listBox2 一样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T13:55:32.560

当您在另一个控件中时，您可以在进行任何修改之前移除附​​加到其中一个控件的事件。然后在最后重新连接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T13:57:48.300

当您更改一个列表框的选定项目时，您可以暂时禁用另一个列表框的事件。例如：

```
// Store the event handlers in private member variables.
private System.EventHandler selectedEmployeeChanged = new System.EventHandler(this.lbEmployees_SelectedIndexChanged); 

private void lbProjects_SelectedIndexChanged(object sender, EventArgs e)
{
    try
    {
        // Remove your event so that updating lbEmployees doesn't cause
        // lbEmployees_SelectedIndexChanged to get fired.
        lbEmployees.SelectedIndexChanged -= selectedEmployeeChanged;

        // other event handler logic
    }
    finally
    {
        // Ensure that the handler on lbEmployees is re-added,
        // even if an exception was encountered.
        lbEmployees.SelectedIndexChanged += selectedEmployeeChanged;
    }
} 
```

**注意：**我已将您的 listBoxes（和相关事件）重命名为更具可读性。根据您的描述，`listBox1`is now`lbEmployees`和`listBox2`is now `lbProjects`。

至于以编程方式选择多个项目，如果您知道每个项目的索引，则可以使用[ListBox.SetSelected 方法](http://msdn.microsoft.com/en-us/library/system.windows.forms.listbox.setselected)。例如：

```
listBox1.SetSelected(1, true);
listBox1.SetSelected(3, true); 
```

导致 listBox1 选择 1 和 3 处的项目。

在您的情况下，我建议仅使用查询来获取要选择的值（不清除列表框，然后只添加应该选择的值）。以下是我对如何重写您的处理程序之一的建议：

```
// Store the event handlers in private member variables.
private System.EventHandler selectedEmployeeChanged = new System.EventHandler(this.lbEmployees_SelectedIndexChanged); 

private void lbProjects_SelectedIndexChanged(object sender, EventArgs e)
{
    // Declare this outside of try so that we can close it in finally
    DbDataReader reader = null;
    try
    {
        // Remove your event so that updating lbEmployees doesn't cause
        // lbEmployees_SelectedIndexChanged to get fired.
        lbEmployees.SelectedIndexChanged -= selectedEmployeeChanged;
        // Deselect all items in lbEmployees
        lbEmployees.ClearSelected();

        cmd.CommandText = "SELECT ProjectName FROM Projects WHERE ProjectID IN(SELECT ProjectID FROM EmployeeProject WHERE EmpId=(SELECT EmpId FROM Employee WHERE EmpName= '@EmpName')) ORDER BY ProjectID";
        cmd.Parameters.AddWithValue("@EmpName", lbProjects.SelectedItem.ToString());
        reader = cmd.ExecuteReader();

        // For each row returned, find the index of the matching value
        // in lbEmployees and select it.
        while (rdr.Read())
        {
            int index = lbEmployees.FindStringExact(rdr.GetString(0));
            if(index != ListBox.NoMatches)
            {
                lbEmployees.SetSelected(index, true);
            }
        }

        this.AutoScroll = true;
    }
    finally
    {
        // Ensure that the reader gets closed, even if an exception ocurred
        if(reader != null)
        {
            reader.Close();
        }
        // Ensure that the handler on lbEmployees is re-added,
        // even if an exception was encountered.
        lbEmployees.SelectedIndexChanged += selectedEmployeeChanged;
    }
} 
```

作为旁注，您可能需要考虑在查询字符串中使用 JOIN 运算符，而不是多个嵌套的 SELECTS。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T13:59:40.040

OP 代码的逻辑（如果按 OP 预期工作）包含问题。
假设您用所有可能的值填充这两个列表。
然后，当用户单击一个项目时，第二个列表被清空并仅填充链接到另一个列表的项目。但是在两个列表之间单击可能会从另一个列表中永久删除一个或多个项目。最好保留两个列表并尝试突出显示相应项目的行

例如（假设 ListBox.SelectionMode = SelectionMode.MultiSimple 或 MultiExtended）

```
private void listBox1_SelectedIndexChanged(object sender, EventArgs e)
{
........
try
{
   ......
   // Remove the event handler, do your selection, No event on the listbox2 will be fired....
   listBox2.SelectedIndexChanged -= new System.EventHandler(this.listBox2_SelectedIndexChanged);

   // Do not remove the items , instead clear previous selection
   listBox2.ClearSelected(); 

   while (rdr.Read()) 
   { 
       int index = listBox2.FindString(rdr.GetString(0), -1);
       if(index != -1) listBox2.SetSelected(index, true)); 
   } 
   ....
}
finally
{
    // before exit, reapply the event handler 
    listBox2.SelectedIndexChanged += new System.EventHandler(this.listBox2_SelectedIndexChanged);
}
} 
```

当然，您需要确保重新应用事件，因此使用 try/finally 块 当您将 listBox1 填充到 listBox2.SelectedIndexChanged 事件中时，相同的方法将有效地停止为 listBox1 触发事件，

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T14:05:15.007

拥有一个 eventMask 整数变量并使用下面的模式来保护您的事件。

对于这种情况，使用另一个答案中建议的布尔值就足够了。但是，我更喜欢使用整数而不是 bool ：它可以正确处理嵌套和堆叠的事件调用。

例如，当我必须处理树视图和列表视图中的选择/取消选择事件时，它特别有用。

```
int eventMask = 0;

void items_PropertyChanged(object sender, PropertyChangedEventArgs e) // for example...
{
    if (eventMask > 0)
        return;

    try
    {
        eventMask++;

        // processing
        // it happens some other events can be called. Including this one.
    }
    finally 
    {
        // put this in finally, so there is no lock risk
        eventMask--;
    }
} 
```

# c# - 如何在 XNA 中绘制 TriangleStrip / 填充它？

> ID：11139675
> 
> 赞同：1
> 
> 时间：2012-06-21T13:50:16.753
> 
> 标签：c#, xna, geometry, 2d

我试图绕开我的头：

[http://msdn.microsoft.com/en-us/library/bb196409.aspx](http://msdn.microsoft.com/en-us/library/bb196409.aspx)

参考资料不多。它很短，很模糊，没有什么可以学习的。

我想创建一个采用 Triangle = (A class of 3 Vectors) 列表的方法，然后渲染它，然后能够用颜色或纹理填充它。

有人可以解释上述方法吗？因为我正在尝试的根本不起作用。我试过添加一个三角形。以下是我的理解，有错误的地方请指正。

创建“一个三角形”时的方法：

```
GraphicsDevice.DrawUserIndexedPrimitives<VertexPositionColor>
(
    PrimitiveType.TriangleStrip,
    "array of 3 VertexPositionColor?",
    0,
    (3? 9?),
    "I have no clue what to put here and why I should put it here?",
    "What do I put here?",
    "If 1 triangle, value should be = 1? 1 Triangle = 1 Primitive"
); 
```

我需要什么才能完成这项工作？根据我传递给我的方法的三角形的数量，我是否渲染以及哪些值会根据有多少三角形而改变？

...如果成功（希望有时）我该如何填写？

请不要有模糊的简短答案，因为参考资料做得非常好。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T14:46:44.973

在我们开始之前，先澄清一下您的思维方式。在 XNA 中 - 您绘制线框（轮廓）三角形、填充三角形或带纹理的三角形。没有任何“现在绘制”和“稍后填充”的内容。您只能在帧缓冲区中已有的内容之上绘制其他内容。

[这里](http://en.wikipedia.org/wiki/Triangle_mesh#Index_array)还有一些关于什么是索引网格的背景。这是馈入 DrawUserIndexedPrimitives 的数据（由顶点集的索引组成的顶点和三角形）。

鉴于此，以下是绘图调用的工作方式

```
 _effect.Texture = texture; // This sets the texture up so the 
    // shaders associated with this effect can access it

    // The color in each vertex is modulated with the texture color 
    // and linearly interpolated across vertices
    _effect.VertexColorEnabled = true;

    foreach (var pass in _effect.CurrentTechnique.Passes)
    {
        pass.Apply(); // This sets up the shaders and their state

        // TriangleList means that the indices are understood to be 
        // multiples of 3, where the 3 vertices pointed to are comprise
        // one triangle
        _device.DrawUserIndexedPrimitives(PrimitiveType.TriangleList,

        // The vertices. Note that there can be any number of vertices in here.
        // What's important is the indices array (and the vertexOffset, primitivecount, vertexCount) that determine
        // how many of the provided vertices will actually matter for this draw call
                                                      _vertices, 
        // The offset to the first vertex that the index 0 in the index array will refer to
        // This is used to render a "part" of a bigger set of vertices, perhaps shared across
        // different objects
                                                      0,
        // The number of vertices to pick starting from vertexOffset. If the index array 
        // tried to index a vertex out of this range then the draw call will fail.
                                                      _vertices.Count,
        // The indices (count = multiple of 3) that comprise separate triangle (because we said TriangleList - 
        // the rules are different depending on the primitive type)
                                                      _indices, 
        // Again, an offset inside the indices array so a part of a larger index array can be used
                                                      0,
        // Number of indices. This HAS to be a multiple of 3 because we said we're rendering
        // a list of triangles (TrangleList).
                                                      kvp.Value.Indices.Count / 3);
    } 
```

我希望这很清楚。如果您对每个参数和/或概念有任何具体问题，请告诉我，我可以编辑这篇文章以澄清这些观点。

希望这可以帮助！

# ios - iOS youtube 播放器和 AIR

> ID：11139679
> 
> 赞同：3
> 
> 时间：2012-06-21T13:50:45.567
> 
> 标签：ios, apache-flex, youtube-api

我正在开发播放来自 youtube 的视频的应用程序。在android上它运行良好，但我对iOS有问题。我知道 iOS 不支持 flash 等，那么还有其他选择如何在 iOS 上运行的 adobe air 应用程序中播放 youtube 视频吗？

tnx

# android - ListView 实现 android 中的 TextView 重叠，带有 2 个文本视图

> ID：11139685
> 
> 赞同：0
> 
> 时间：2012-06-21T13:50:59.553
> 
> 标签：android, listview

我正在用 2 个 textviews 实现 listview ，并作为参考使用[Basic Layout and Formatting](http://android.vexedlogic.com/2011/04/09/android-lists-listactivity-and-listview-iii-%E2%80%93-basic-layout-and-formatting/)

我使用长文本而不是短的股票名称，所以当我使用长文本时，它与第二个重叠。

那么如何正确处理，使 2 个文本视图不会相互重叠。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:55:16.443

为避免重叠，您可以将第二个文本视图设置为右对齐（android:layout_toRightOf）。

例如：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent">
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:id="@+id/ticker_symbol"
        android:layout_alignParentLeft="true" />
    <TextView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:id="@+id/ticker_price"
        android:layout_toRightOf="@id/ticker_symbol"
        android:layout_alignParentRight="true"  />
</RelativeLayout> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:05:49.910

您可以使用以下代码来解决您的问题：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
        android:orientation="horizontal"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:weightSum="1">
    <TextView
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:id="@+id/ticker_symbol"

         android:text="sdasd sadas"
         android:layout_weight=".5"/>
    <TextView
        android:layout_width="0dp"
        android:layout_height="fill_parent"
        android:id="@+id/ticker_price"
         android:text="dfsd"
         android:layout_weight=".5"
         android:gravity="right" />
</LinearLayout> 
```

输出：

![代码输出](../Images/01988976c933f92b953ea46c8f3258b9.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:07:25.640

我猜你的意思是由于文本长度很长，它会进入下一行或下一个 TextView

因此，我建议您使用 textView 属性 android:ellipsized="end" 并使用 android:single_line="true" 代替，您可以直接指定 maxline=1 我不确定名称拼写是否正确，因此请在输入时检查

```
<TextView
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:id="@+id/ticker_symbol"
        android:ellipsezed="end"
        android:singe_line="true"  
        android:layout_alignParentLeft="true" /> 
```

希望这个解释对你有用，让我知道..

# ruby-on-rails - 扩展“仓库”应用程序以包含购物车中的全部商品

> ID：11139690
> 
> 赞同：1
> 
> 时间：2012-06-21T13:51:09.827
> 
> 标签：ruby-on-rails, depot

我正在通过“使用 Rails 进行敏捷 Web 开发”一书创建 depot 应用程序。我想更改它的功能，以便购物车不再出现在侧栏中，而是得到一个声明，其中包含“当前在您的购物车中的 (x) 个项目”。

我有这个代码：

line_items 控制器（购物车中的物品）：

```
def create
@cart = current_cart
product = Product.find(params[:product_id])
@line_item = @cart.add_product(product.id)

respond_to do |format|
  if @line_item.save
    format.html { redirect_to store_url }
    format.js { @current_item = @line_item }
    format.json { render json: @line_item,
      status: :created, location: @line_item }
  else
    format.html { render action: "new" }
    format.json { render json: @line_item.errors,
      status: :unprocessable_entity }
  end
 end
end 
```

和推车控制器：

```
def show
begin
  @cart = Cart.find(params[:id])
rescue ActiveRecord::RecordNotFound
  logger.error "Attempt to access invalid cart #{params[:id]}"
  redirect_to store_url, notice: 'Invalid cart'
else
  respond_to do |format|
    format.html # show.html.erb
    format.json { render json: @cart }
  end
 end
end 
```

如何从应用程序布局视图中引用购物车，以便将“（x）项”更改为购物车中的当前项目数？我已经尝试过`@total_cart.line_items`以及我能想到的所有其他变化。

编辑：我在购物车模型中有代码`current_item.quantity`- 我将如何在应用程序布局视图中引用它，因为这是我想要的值？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-03T18:43:29.177

我会在您的购物车中添加一个名为 item_count 的方法，该方法将累加购物车中的商品数量。

```
def item_count
  line_items.inject{|sum, line_item| sum + line_items.quantity
end 
```

然后在您的应用程序布局视图中，您可以简单地引用@cart.item_count。

# php - 获取-> Symfony2 中的请求

> ID：11139692
> 
> 赞同：4
> 
> 时间：2012-06-21T13:51:10.703
> 
> 标签：php, post, symfony

我有一个非常简单的问题，如何从 get->Request() 获取 POST 值；

```
public function emptytrashAction(){
    $request = $this->getRequest();
    $portfolio_id = $_POST["test"];
} 
```

我不想使用`$_POST`变量，我提交的表单只包含这个隐藏字段测试。形式是，

```
 <form name="empt_trash" action="{{ path('MunichInnovationGroupPatentBundle_portfolio_emptytrash') }}" method="post" >
    <input type="hidden" name="test" value={{ selected_portfolio.id }}>
    <input class="button3 tooltip" name = "submit" type="submit" value="Empty"></a>
 </form> 
```

如何在不使用的情况下获取隐藏字段的值`$_POST`？

**编辑**

如果一个方法同时使用 GET 和 POST 请求，对于 Post 请求，我会像这样签入我的代码

```
 if ($request->getMethod() == 'POST') 
```

但这不是 symfony2 方式，那么检查 POST 请求的正确方法是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T14:00:31.177

很简单：

```
$request  = $this->getRequest();
$postData = $request->request->get('test'); 
```

**注意**：此解决方案仅适用于 Symfony <2.4 版本。对于 2.4[已弃用](https://github.com/symfony/symfony/commit/2e07338c5c58184318812f3852766a961b973df9)并在 3.0 中删除。

获取请求的新代码应该是：

```
$request = $this->container->get('request_stack')->getCurrentRequest();
$postData = $request->request->get('test'); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-08-22T09:08:15.750

$this->getRequest() 是自 symfony 2.4 以来不推荐使用的方法，它将在 3.0 版本中删除，因此获取当前请求的最佳方法是通过以下代码：

```
//src/Symfony/Bundle/FrameworkBundle/Controller/Controller.php
...

/*
 * ...
 * @deprecated Deprecated since version 2.4, to be removed in 3.0\. Ask
 *             Symfony to inject the Request object into your controller
 *             method instead by type hinting it in the method's signature.
 */
public function getRequest()
{
    return $this->container->get('request_stack')->getCurrentRequest();
} 
```

由以下演变引入，

[[FrameworkBundle] 使用新的 request_stack 服务来获取基础 Controller 类中的 Request 对象。](https://github.com/symfony/symfony/commit/2e07338c5c58184318812f3852766a961b973df9)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-10-08T07:53:18.253

您不应该使用`getRequest()`已弃用的方法，将请求注入您的控制器总是一个好主意。像这样定义你的动作：

```
public function emptytrashAction(Request $request){
    $portfolio_id = $request->request->get('test');
} 
```

切勿在不安全的操作中使用 POST 或 GET 之类的 GLOBALS。

在这里您可以找到更多详细信息：[http ://symfony.com/blog/new-in-symfony-2-4-the-request-stack](http://symfony.com/blog/new-in-symfony-2-4-the-request-stack)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T14:00:24.533

试试这个 `$this->getRequest()->request->get($path)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-10-01T22:03:26.000

如 Symfony2 博客中所述，您应该直接使用 Request 对象作为控制器中方法的参数。

对于服务，您可以通过 __construct 方法注入对象并将其存储在内部属性中。

[http://symfony.com/blog/new-in-symfony-2-4-the-request-stack](http://symfony.com/blog/new-in-symfony-2-4-the-request-stack)

确定您的请求方法是否已发布

```
if ($request->isMethod('post')) {...} 
```

# c# - 如何在 WindowsPhone 中的 AudioPlaybackAgent 之间设置/获取全局变量

> ID：11139695
> 
> 赞同：0
> 
> 时间：2012-06-21T13:51:22.867
> 
> 标签：c#, windows-phone-7, background-audio

我正在尝试使用`AudioPlaybackAgent`Microsoft 在他们的[示例](http://msdn.microsoft.com/en-us/library/ff431744%28v=vs.92%29.aspx)中显示的小半径在示例中，我们有一个音频列表：

```
private static List<AudioTrack> _playList = new List<AudioTrack>
{
    new AudioTrack(new Uri("http://000.000.000.000/radio1.mp3", UriKind.Absolute),
    "Radio 1", null, null, null, null, EnabledPlayerControls.Pause),

    new AudioTrack(new Uri("http://000.000.000.000/radio2.mp3", UriKind.Absolute), 
    "Radio 2", null, null, null, null, EnabledPlayerControls.Pause)
}; 
```

在这里我会播放曲目：

```
private void PlayTrack(BackgroundAudioPlayer player)
{
    player.Track = _playList[VARIABLE];
} 
```

在“变量”上，我想放置一个根据我在主项目中打开的页面而变化的变量。我该怎么做？我在没有退出的情况下尝试了很多东西。谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T10:37:21.693

最终答案：如果您不需要在后台使用音频，您可以简单地使用媒体元素，但如果您想使用它，您不能使用公共变量在后台代理和主项目之间进行交互，您必须使用音频播放器的标记属性以存储和获取数据，如果这不起作用，您可以尝试 IsolatedStorge - Mutex。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:24:53.950

如果要根据用户正在查看的页面播放音乐，则应使用 MediaElement 控件而不是音频代理。您可以将 MediaElement 的来源设置为您想要的任何内容。你可以这样做是 XAML 或代码

```
<MediaElement x:Name="MyMediaElement" Source="{Binding YourProperty}"/>

MyMediaElement.Source = new Uri(model.YourProperty);
MyMediaElement.Volume = 1;
MyMediaElement.Play(); 
```

您还可以从应用程序中设置 BackgroundAudioPlayer 的轨道

```
var track = new AudioTrack(
        new Uri(AudioUri),
        "Some song",   // can be an empty string if no song title
        "Some artist", // can be an empty string if no artist name
        null, // album
        null, // album art
        );

BackgroundAudioPlayer.Instance.Track = track;
BackgroundAudioPlayer.Instance.Play(); 
```

# sql - SQL 转换函数返回错误 241

> ID：11139705
> 
> 赞同：2
> 
> 时间：2012-06-21T13:51:56.400
> 
> 标签：sql, sql-server

我的数据库中有一个 varchar 类型的列，其值采用以下格式 Day Mon dd hh:mm:ss EDT YYYY。我需要将其转换为日期时间。

在运行查询`select CONVERT(datetime, colname, 100)`系统返回错误代码 241。

请帮忙

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:02:40.553

您可以为此使用[CAST 或 CONVERT](http://msdn.microsoft.com/en-us/library/ms187928.aspx)：

```
declare @date varchar(50)
set @date = 'Sat May 05 12:38:00 EDT 2012'

select cast(substring(@date, 5, 6) + ' ' + right(@date, 4) + ' ' + substring(@date, 12, 8) as datetime) 
```

或者

```
select cast(substring(@date, 5, 7) + right(@date, 4) + substring(@date, 11, 9) as datetime) 
```

或者

```
select convert(datetime, substring(@date, 5, 7) + right(@date, 4)  + substring(@date, 11, 9)) 
```

结果：

```
2012-05-05 12:38:00.000 
```

# ruby - 从 xml 名称值转换为简单的哈希

> ID：11139709
> 
> 赞同：10
> 
> 时间：2012-06-21T13:52:03.983
> 
> 标签：ruby, xml, yaml, rexml

我不知道这是什么名字，这使我的搜索变得复杂。

我的数据文件*OX.session.xml*是（旧的？）形式

```
<?xml version="1.0" encoding="utf-8"?>
<CAppLogin xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns="http://oxbranch.optionsxpress.com">
  <SessionID>FE5E27A056944FBFBEF047F2B99E0BF6</SessionID>
  <AccountNum>8228-5500</AccountNum>
  <AccountID>967454</AccountID>
</CAppLogin> 
```

那个 XML 数据格式到底叫什么？

无论如何，我想要的只是在我的 Ruby 代码中得到一个哈希，如下所示：

```
CAppLogin = { :SessionID => "FE5E27A056944FBFBEF047F2B99E0BF6", :AccountNum => "8228-5500", etc. }   # Doesn't have to be called CAppLogin as in the file, may be fixed 
```

什么可能是最短、最内置的 Ruby 方法来自动化该哈希读取，以一种我可以更新 SessionID 值并将其轻松存储回文件以供以后程序运行的方式？

我玩过 YAML、REXML，但不想打印我的（坏的）示例试验。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-06-21T14:20:11.630

您可以在 Ruby 中使用一些库来执行此操作。

Ruby 工具箱对其中一些有很好的覆盖：

[https://www.ruby-toolbox.com/categories/xml_mapping](https://www.ruby-toolbox.com/categories/xml_mapping)

我使用 XMLSimple，只需要 gem 然后使用 xml_in 加载到您的 xml 文件中：

```
require 'xmlsimple'
hash = XmlSimple.xml_in('session.xml') 
```

如果您在 Rails 环境中，则可以使用 Active Support：

```
require 'active_support' 
session = Hash.from_xml('session.xml') 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-06-21T14:18:21.500

使用[Nokogiri](http://nokogiri.org/)解析带有命名空间的 XML：

```
require 'nokogiri'

dom = Nokogiri::XML(File.read('OX.session.xml'))

node = dom.xpath('ox:CAppLogin',
                 'ox' => "http://oxbranch.optionsxpress.com").first

hash = node.element_children.each_with_object(Hash.new) do |e, h|
  h[e.name.to_sym] = e.content
end

puts hash.inspect
# {:SessionID=>"FE5E27A056944FBFBEF047F2B99E0BF6",
#  :AccountNum=>"8228-5500", :AccountID=>"967454"} 
```

如果您*知道*CAppLogin 是根元素，您可以简化一下：

```
require 'nokogiri'

dom = Nokogiri::XML(File.read('OX.session.xml'))

hash = dom.root.element_children.each_with_object(Hash.new) do |e, h|
  h[e.name.to_sym] = e.content
end

puts hash.inspect
# {:SessionID=>"FE5E27A056944FBFBEF047F2B99E0BF6",
#  :AccountNum=>"8228-5500", :AccountID=>"967454"} 
```

# android - 无法导入google io源代码2011

> ID：11139712
> 
> 赞同：0
> 
> 时间：2012-06-21T13:52:19.330
> 
> 标签：android

我是 android 开发新手。我正在尝试下载并运行 HoneyComb 的 iosched 2011 源代码。而且，我查看了大多数论坛，但无法理解该怎么做。所以，如果你们中的任何人都可以提供一步一步的过程来在本地下载和运行 Eclipse，我会非常感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:58:07.020

如果您尝试将代码导入 Eclipse，请尝试以下链接： [http ://code.google.com/p/iosched/issues/detail?id=18](http://code.google.com/p/iosched/issues/detail?id=18)

> 下载 Eclipse
> 
> 下载并安装 Mercurial 插件 (http://www.javaforge.com/project/HGE)
> 
> 下载并安装 Android SDK
> 
> Eclipse：导入 -> Mercurial -> 使用现有 Mercurial 存储库克隆 ->（您的本地 Mercurial 存储库）
> 
> Eclipse：“禁用”项目->自动构建
> 
> Eclipse：新建 -> Android 项目 -> 从现有源中“检查”项目 -> 浏览 -> '本地存储库' iosched ~> android -> 完成
> 
> “项目名称实际上是 HomeActivity” - 可以在项目创建期间更改
> 
> Eclipse：项目右键-> 构建项目
> 
> “大量错误”
> 
> Eclipse：项目右键-> Android 工具-> 添加兼容性库
> 
> “将在控制台窗口上看到一些事情”（需要互联网连接）
> 
> Eclipse：项目右键-> 构建项目
> 
> “可能有 6 个错误” - 由于 Google Analytics 库未包含在构建路径中而导致的错误
> 
> [从http://code.google.com/mobile/analytics/download.html](http://code.google.com/mobile/analytics/download.html)下载 Google Analytics SDK
> 
> Eclipse：通过包含 libGoogleAnalytics.jar 配置构建路径
> 
> Eclipse：项目右键-> 构建项目
> 
> 运行 iosched ......

# c - 我需要一个像素完美的三角形填充算法来避免锯齿伪影

> ID：11139724
> 
> 赞同：12
> 
> 时间：2012-06-21T13:52:45.203
> 
> 标签：c, graphics, drawing, drawing2d

我正在帮助某人使用用户界面代码来可视化数学图像分析。在此过程中，我们会将 2D 形状的一部分分割成三角形，并在 UI 上填充其中一些三角形。

我们正在寻找一种填充算法，它保证如果两个三角形共享一条边（特别是，如果三角形的任何两个顶点相同），那么无论绘制顺序和锯齿如何，线上都不会出现空白、未绘制的像素两者之间。（如果某些像素被绘制两次也没关系。）在任意缩放下结果应该看起来不错。一些三角形在某些地方可能是非常薄的条子，低至 1 像素宽。

理想情况下，它也应该是一个相当有效的填充算法！

抗锯齿不会用于三角形渲染，因为最终图像需要 1 位深度。

上下文是一个图像识别应用程序，因此所有顶点坐标都将精确到一个像素。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-06-21T19:50:07.663

鉴于要求，看起来有一个简单的解决方案。

首先，栅格化三角形边缘。您可以为此使用 Bresenham 的线条绘制算法（如下面的代码所示）或任何可行的方法。然后填写中间的区域。这适用于任意薄的三角形。

为了确保无论三角形的绘制顺序和提供给三角形绘制代码的顶点的顺序如何都没有间隙，您希望在共享边的三角形中以相同的方式光栅化共享边。*相同的方式*意味着每次都使用相同的像素。

为了保证每次你从相同的顶点坐标对获得相同的像素，你基本上想要建立一个固定的顺序，也就是说，建立一个规则，总是从给定的两个顶点中选择相同的一个顶点，而不管顺序如何他们被给予。

执行此顺序的一种简单方法是将您的线（三角形边）视为二维向量，如果它指向负 y 方向或平行于 x 轴并指向负 x 方向，则翻转其方向. 是时候来点 ASCII 艺术了！:)

```
 3   2   1
       \  |  /
        \ | /
         \|/
4 --------+--------- 0
         /|\
        / | \
       /  |  \
      5   6   7

        4 -> 0
        5 -> 1
        6 -> 2
        7 -> 3 
```

看，这里的线段，比如说，1 和线段 5 真的是同一种东西，唯一的区别是从原点的端点到另一个端点的方向。因此，我们通过将段 4 到 7 转换为段 0 到 3 来将这些情况减少一半，并消除方向模糊。IOW，我们选择向增加 y 的方向前进，或者，如果边缘上的 y 相同，则向增加 x 的方向前进。

这是您可以在代码中执行此操作的方法：

```
#include <stddef.h>
#include <limits.h>
#include <stdlib.h>
#include <stdio.h>
#include <string.h>
#include <time.h>

#define SCREEN_HEIGHT 22
#define SCREEN_WIDTH  78

// Simulated frame buffer
char Screen[SCREEN_HEIGHT][SCREEN_WIDTH];

void SetPixel(long x, long y, char color)
{
  if ((x < 0) || (x >= SCREEN_WIDTH) ||
      (y < 0) || (y >= SCREEN_HEIGHT))
  {
    return;
  }

  if (Screen[y][x] == ' ')
    Screen[y][x] = color;
  else
    Screen[y][x] = '*';
}

void Visualize(void)
{
  long x, y;

  for (y = 0; y < SCREEN_HEIGHT; y++)
  {
    for (x = 0; x < SCREEN_WIDTH; x++)
    {
      printf("%c", Screen[y][x]);
    }

    printf("\n");
  }
}

typedef struct
{
  long x, y;
  unsigned char color;
} Point2D;

// min X and max X for every horizontal line within the triangle
long ContourX[SCREEN_HEIGHT][2];

#define ABS(x) ((x >= 0) ? x : -x)

// Scans a side of a triangle setting min X and max X in ContourX[][]
// (using the Bresenham's line drawing algorithm).
void ScanLine(long x1, long y1, long x2, long y2)
{
  long sx, sy, dx1, dy1, dx2, dy2, x, y, m, n, k, cnt;

  sx = x2 - x1;
  sy = y2 - y1;

/*
      3   2   1
       \  |  /
        \ | /
         \|/
4 --------+--------- 0
         /|\
        / | \
       /  |  \
      5   6   7

        4 -> 0
        5 -> 1
        6 -> 2
        7 -> 3
*/
  if (sy < 0 || sy == 0 && sx < 0)
  {
    k = x1; x1 = x2; x2 = k;
    k = y1; y1 = y2; y2 = k;
    sx = -sx;
    sy = -sy;
  }

  if (sx > 0) dx1 = 1;
  else if (sx < 0) dx1 = -1;
  else dx1 = 0;

  if (sy > 0) dy1 = 1;
  else if (sy < 0) dy1 = -1;
  else dy1 = 0;

  m = ABS(sx);
  n = ABS(sy);
  dx2 = dx1;
  dy2 = 0;

  if (m < n)
  {
    m = ABS(sy);
    n = ABS(sx);
    dx2 = 0;
    dy2 = dy1;
  }

  x = x1; y = y1;
  cnt = m + 1;
  k = n / 2;

  while (cnt--)
  {
    if ((y >= 0) && (y < SCREEN_HEIGHT))
    {
      if (x < ContourX[y][0]) ContourX[y][0] = x;
      if (x > ContourX[y][1]) ContourX[y][1] = x;
    }

    k += n;
    if (k < m)
    {
      x += dx2;
      y += dy2;
    }
    else
    {
      k -= m;
      x += dx1;
      y += dy1;
    }
  }
}

void DrawTriangle(Point2D p0, Point2D p1, Point2D p2)
{
  long y;

  for (y = 0; y < SCREEN_HEIGHT; y++)
  {
    ContourX[y][0] = LONG_MAX; // min X
    ContourX[y][1] = LONG_MIN; // max X
  }

  ScanLine(p0.x, p0.y, p1.x, p1.y);
  ScanLine(p1.x, p1.y, p2.x, p2.y);
  ScanLine(p2.x, p2.y, p0.x, p0.y);

  for (y = 0; y < SCREEN_HEIGHT; y++)
  {
    if (ContourX[y][1] >= ContourX[y][0])
    {
      long x = ContourX[y][0];
      long len = 1 + ContourX[y][1] - ContourX[y][0];

      // Can draw a horizontal line instead of individual pixels here
      while (len--)
      {
        SetPixel(x++, y, p0.color);
      }
    }
  }
}

int main(void)
{
  Point2D p0, p1, p2, p3;

  // clear the screen
  memset(Screen, ' ', sizeof(Screen));

  // generate random triangle coordinates

  srand((unsigned)time(NULL));

  // p0 - p1 is going to be the shared edge,
  // make sure the triangles don't intersect
  for (;;)
  {
    p0.x = rand() % SCREEN_WIDTH;
    p0.y = rand() % SCREEN_HEIGHT;

    p1.x = rand() % SCREEN_WIDTH;
    p1.y = rand() % SCREEN_HEIGHT;

    p2.x = rand() % SCREEN_WIDTH;
    p2.y = rand() % SCREEN_HEIGHT;

    p3.x = rand() % SCREEN_WIDTH;
    p3.y = rand() % SCREEN_HEIGHT;

    {
      long vsx = p0.x - p1.x;
      long vsy = p0.y - p1.y;
      long v1x = p0.x - p2.x;
      long v1y = p0.y - p2.y;
      long v2x = p0.x - p3.x;
      long v2y = p0.y - p3.y;
      long z1 = vsx * v1y - v1x * vsy;
      long z2 = vsx * v2y - v2x * vsy;
      // break if p2 and p3 are on the opposite sides of p0-p1
      if (z1 * z2 < 0) break;
    }
  }

  printf("%ld:%ld %ld:%ld %ld:%ld %ld:%ld\n\n",
         p0.x, p0.y,
         p1.x, p1.y,
         p2.x, p2.y,
         p3.x, p3.y);

  // draw the triangles

  p0.color = '-';
  DrawTriangle(p0, p3, p1);
  p1.color = '+';
  DrawTriangle(p1, p2, p0);

  Visualize();

  return 0;
} 
```

样本输出：

```
30:10 5:16 16:6 59:17

                +++
               ++++++++
              ++++++++++++
             +++++++++++++++++
            +++++++++++++++****---
          +++++++++++++****-----------
         ++++++++++****-------------------
        ++++++*****----------------------------
       +++****-------------------------------------
      ****---------------------------------------------
     *-----------------------------------------------------
                                                           - 
```

传奇：

*   “+” - 三角形 1 的像素
*   “-” - 三角形 2 的像素
*   “*” - 三角形 1 和 2 之间共享的边缘像素

请注意，即使没有未填充的间隙（像素），其像素（在共享边缘上）被覆盖的三角形（因为在其上绘制的另一个三角形）如果太薄，可能会显示为不相交或形状不规则. 例子：

```
2:20 12:8 59:15 4:17

            *++++++
           *+++++++++++++
          *+++++++++++++++++++++
         -*++++++++++++++++++++++++++++
        -*++++++++++++++++++++++++++++++++++++
        *+++++++++++++++++++++++++++++++++++++++++++
       *+++++++++++++++++++++++++++++++++++++++++++++++++++
      *+++++++++++++++++++++++++++++++++++++++++++++++++++++
     *+++++++++++++++++++++++++++++++++++++++++++
    -*+++++++++++++++++++++++++++++++
   -*+++++++++++++++++++++
   *++++++++++
  * 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T16:57:51.920

您对相邻三角形的关注是有效的。如果两个三角形共享一条边，您要确保沿该边的每个像素都“属于”一个三角形或另一个。如果其中一个像素不属于任何一个三角形，则您有一个间隙。如果它属于两个三角形，则您有过度绘制（效率低下），并且颜色可能取决于三角形的渲染顺序（这可能不是确定性的）。

由于您没有使用抗锯齿，这实际上并不太难。与其说是您需要的智能算法，不如说是仔细实施。

栅格化三角形的典型方法是计算从上到下作为三角形一部分的水平线段。您可以通过跟踪当前的左右边缘来做到这一点，并且基本上对每个扫描线的每个边缘进行 x 截距计算。它也可以通过两个 Bresenhem 风格的线条绘制算法一起运行来完成。`y`实际上，光栅化相当于对一个函数的多次调用，该函数在某个扫描线上从某个左坐标`x0`到某个右坐标绘制水平线段`x1`。

```
void DrawHLine(int y, int x0, int x1); 
```

通常所做的是确保光栅化器以一致的方式舍入 x 截距，以便一致地计算 x 坐标，无论它们是一个三角形的右边缘的一部分还是相邻三角形的左边缘的一部分. 这保证了共享边上的每个像素都属于*两个*三角形。

我们通过调整解决双重所有权问题`DrawHLine`，使其填充像素从`x0`inclusive 到`x1` *Exclusive*。所以共享边上的所有双重拥有的像素都被定义为属于共享边右侧的三角形。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-11-16T14:04:03.143

我意识到不鼓励仅链接的答案，但我已经在我的博客上[写过](https://mcejp.github.io/2020/11/06/bresenham.html)这个确切的问题。Fabian Giesen[还在](https://fgiesen.wordpress.com/2013/02/08/triangle-rasterization-in-practice/)他的优秀系列“*优化软件遮挡剔除*”中对其进行了讨论。

The gist of it is that you should select a *fill rule*, which determines how to break the tie for pixels shared between two faces. One such fill rule is specified and well-documented for Microsoft's Direct3D API. It can be implemented using an algorithm similar to Bresenham's line algorithm, but a bit of extra care must be given to the rounding and edge cases.

Even the accepted answer here does not handle negative-x slopes in a consistent way, although since your output is just 1-bit and you don't need to interpolate any attributes, it will probably not matter much.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-06-21T16:10:51.193

这不是最有效的，但您可以遍历包含三角形的正方形并测试每个像素是否在三角形内。

伪代码：

```
for(x : minX -> maxX)
    for(y : minY -> maxY)
        if(triangle.contains(x,y))
            drawPixel(x,y); 
```

其中 minX 是三个顶点之间的最小 X 坐标，maxX、minY 和 maxY 也是如此。

对于更快的算法，您可以先进行一些快速而肮脏的填充（例如 slashmais Flood 填充），然后对边缘周围的像素执行此操作。

[此处](http://mathworld.wolfram.com/TriangleInterior.html)描述了三角点测试。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-06-21T17:02:57.620

这是一个经过充分研究的问题。了解 bresenham 画线算法。

[http://en.wikipedia.org/wiki/Bresenham's_line_algorithm](http://en.wikipedia.org/wiki/Bresenham%27s_line_algorithm)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-03-05T14:37:04.513

我的答案满足假设。阿德里安麦卡锡在他的回答中所说的是真的。我的算法基于类似的想法，并且是有效的。即使在我看来，不考虑像素的覆盖也是不公平的。但是，我不表示 N-1 像素的水平线，否则三角形，如果它是“碎片”，它将不会被表示。

例如：假设我们有两个相邻的三角形：

```
ABC [A (27.15) -B (32.15) -C (37.15)];
DEF [A (29.15) -B (32.15) -C (35.15)]; 
```

表示将重叠，但结果应该是以下类型的水平段：

```
++-------------------------++ 
```

所以仅仅排除最后一个像素以避免覆盖是不够的。

要表示一个实心三角形，以便可以使用创建的函数来表示实心多边形（例如：四边形），因为它们总是可以划分为三角形，所以必须能够排除边的表示，否则，可能会发生三角形的一侧被相邻三角形的一侧覆盖（显示透明多边形的问题）。我向您建议的这是`C`我的算法的实现，用于表示任何类型的三角形。我建议您尝试一下，因为它速度快，虽然相当复杂且高效。这是我的`Bresenham`算法变体。代表水平线段的例程的实现，我把它留给你（我已经替换了对`Put`(Shadow)的调用`HorizLine ()`，对于水平线段的表示，附上`Line ()`说明，因为我的实现`DrawHLine()`不能插入到本帖中；但是在这里我`Line()`只使用指令来绘制水平线段）。

这个函数最初是为使用我自己的格式（称为 OBP）在 RAM 中的缓冲区提供的，它与 RASTER 格式的不同之处仅在于两个原因：扫描线与 16 字节对齐。在数据之前有一个 16 字节的标头（每个像素为 8 位）；此标头包含前 2 个字中图像的大小（在汇编实现中，您可以选择，因此是否充分利用 CPU 寄存器，而不是 RAM 中的变量，因为 32 位寄存器可以包含两个维度并且，在中等规模的图像上，一个点的几何位置也可以包含在一个 32 位寄存器中）。这里唯一需要做的就是重写对`Line()`函数，由于要指定三角形一侧的颜色，它可能与其他边不同，透明或不存在，需要修改对象的属性，而不是直接将颜色作为参数传递到`line()`函数，虽然曾经可以调用`SetColor()`函数，这里只是指示性的。

她是标题（`triangle.h`）：

```
#define R_OBP_Al 16 /* 16 Byte alignment; it must always be 2^N */
#define DimOBP_H 16 /* 16 Byte of OBP HEADER; it must always be >=4 */

#define True 1 /* Boolean value for true condition */
#define False 0 /* Boolean value for false condition */

typedef char TShadowTable[256]; /* Array for shadows */
typedef TShadowTable *T_Shadow_Table_Ptr; /* Pointer to an array for shadows */

typedef struct {short int X;
                short int Y;} T_Coord_XY;
typedef struct {unsigned short int X;
                unsigned short int Y;} T_Pos_Coord_XY;
typedef struct {unsigned short int DimX;
                unsigned short int DimY;} T_Dim_XY;
typedef struct {T_Pos_Coord_XY XY; /* Coordinates of the clipping-region */
                T_Dim_XY Dim_XY; /* Dimensions of the clipping-region */ } T_Clipp_Rect;

typedef T_Clipp_Rect *T_Clipp_Rect_Ptr; /* Pointer to clipping-region's type */

typedef struct {T_Coord_XY XY; /* Coordinates of the rectangle */
                T_Dim_XY Dim_XY; /* Dimensions of the rectangle */ } T_Rect;

typedef T_Rect *T_Rect_Ptr; /* Pointer to a rectangle */

typedef char Boolean; /* Boolean type */

void Triangle_Wind(short int X1,
                   short int Y1,
                   short int X2,
                   short int Y2,
                   short int X3,
                   short int Y3,
                   short int FillColor,
                   short int BrdColAB,
                   short int BrdColBC,
                   short int BrdColCA
                /* , T_Shadow_Table_Ptr ShadowTable,
                   void *OBPVBuff
                   T_Clipp_Rect_Ptr Clipp */); 
```

以下是函数和示例 ( `triangle.c`)：

```
#include <graphics.h>
#include <conio.h>
#include <string.h>
#include <stdio.h>
#include "triangle.h"

static int *DefColors[16]=
             {0FF000000H, /* Black */
              0FF7F0000H, /* Blue */
              0FF007F00H, /* Green */
              0FF7F7F00H, /* Cyan */
              0FF00007FH, /* Red */
              0FF7F007FH, /* Magenta */
              0FF007F7FH, /* Brown */
              0FF7F7F7FH, /* LightGray */
              0FF3F3F3FH, /* DarkGray */
              0FFFF0000H, /* LightBlue */
              0FF00FF00H, /* LightGreen */
              0FFFFFF00H, /* LightCyan */
              0FF0000FFH, /* LightRed */
              0FFFF00FFH, /* LightMagenta */
              0FF00FFFFH, /* Yellow */
              0FFFFFFFFH  /* White */ };

int main(void)
{
 /* int gd = DETECT;
    int gm;

    initgraph(&gd, &gm, "C:\\TC\\BGI"); */

 Triangle_Wind(80,80,320,200,160,300,
               4,1,2,7);

 getch();
 /* closegraph(); */
 return 0;
}
/* Here it is the body of the triangle routine: */

void Triangle_Wind(short int X1,
                   short int Y1,
                   short int X2,
                   short int Y2,
                   short int X3,
                   short int Y3,
                   short int FillColor,
                   short int BrdColAB,
                   short int BrdColBC,
                   short int BrdColCA
                /* , T_Shadow_Table_Ptr ShadowTable,
                   void *OBPVBuff
                   T_Clipp_Rect_Ptr Clipp */)

{short int A=0;
 short int B=1;
 short int C=2; /* Identificat. vertici triangoli per ordinam. colori */

 short int C1=BrdColAB;
 short int C2=BrdColBC;
 short int C3=BrdColCA; /* Var. temp. per i colori */

 short int XT; /* X1-XT è il segmento orizzontale da disegnare */

 short int OY2; /* Valore iniziale coord. Y 2° vertice del triangolo */

 short int B1L;
 short int B1H; /* Coord. X 1° e ultimo punto 1° bordo (segm. orizz.) */
 short int B2L;
 short int B2H; /* Coord. X 1° e ultimo punto  2° bordo (segm. orizz.) */

 short int D0; /* Dimensione 1° bordo (segm. orizz.) */
 short int D1; /* Dimensione parte centrale segm. orizz. */
 short int D2; /* Dimensione 2° bordo (segm. orizz.) */

 short int Tmp; /* Variabile temporanea x scambio di 2 variabili */

 short int Col1; /* Colore 1° bordo segm. orizz. */
 short int Col2; /* Colore 2° bordo segm. orizz. */

 short int CntX1; /* Contat. per coord. X 1° punto segm. orizz. (Bresenham) */
 short int IncX1; /* Increm. contat. per coord. X 1° punto segm. or. (Bresenham) */
 short int CntY1; /* Contat. per coord. Y 1° punto segm. orizz. (Bresenham) */
 short int Lim1; /* Limite per contat. coord. X e Y 1° punto segm. or. (Bresenham) */
 short int DirX1; /* Increm. coord. X 1° punto segm. orizz. */
 short int IncY1; /* Increm. contat. per coord. Y 1° punto segm. or. (Bresenham) */
 short int FX1; /* Valore iniziale coord. X1 segm. orizz. X1-XT */

 short int CntXT; /* Contat. per coord. X 2° punto segm. orizz. (Bresenham) */
 short int IncXT; /* Increm. contat. per coord. X 2° punto segm. or. (Bresenham) */
 short int CntYT; /* Contat. per coord. Y 2° punto segm. orizz. (Bresenham) */
 short int LimT; /* Limite per contat. coord. X e Y 2° punto segm. or. (Bresenham) */
 short int DirXT; /* Increm. coord. X 2° punto segm. orizz. */
 short int IncYT; /* Increm. contat. per coord. Y 2° punto segm. or. (Bresenham) */
 short int FXT; /* Valore iniziale coord. XT segm. orizz. X1-XT */

 T_Rect Segm; /* Record per la rappresentazione di un segm. orizz. */

 Boolean F1; /* 1° cond. iniz. (eccezione), rappresentaz. triang. */
 Boolean F24; /* 2° cond. iniz. (eccezione), rappresentaz. triang. */
 Boolean Overflow=False; /* FALSE: Calcola segm. orizz.; TRUE: Ha finito */
 Boolean Internal; /* Variabile temp.; salva il val. iniz. di Overflow */
 Boolean Finished=True; /* FALSE: 2° semi-triang.; TRUE: 1° semi-triang.} */

 /* Ordina i vertici in base alla coordinata Y */

 if (Y1>Y2)
  {Tmp=X1;
   X1=X2;
   X2=Tmp;
   Tmp=Y1;
   Y1=Y2;
   Y2=Tmp;
   Tmp=A;
   A=B;
   B=Tmp;}

 if (Y2>Y3)
  {Tmp=X2;
   X2=X3;
   X3=Tmp;
   Tmp=Y2;
   Y2=Y3;
   Y3=Tmp;
   Tmp=B;
   B=C;
   C=Tmp;}

 if (Y1>Y2)
  {Tmp=X1;
   X1=X2;
   X2=Tmp;
   Tmp=Y1;
   Y1=Y2;
   Y2=Tmp;
   Tmp=A;
   A=B;
   B=Tmp;}

 /* Calcola il colore effettivo dei lati A-B, B-C e C-A del triangolo */

 switch (27*A+9*B+C)
  {case 19:{BrdColAB=C3;
            BrdColCA=C1;
            break;}
   case 29:{BrdColBC=C3;
            BrdColCA=C2;
            break;}
   case 45:{BrdColAB=C2;
            BrdColBC=C3;
            BrdColCA=C1;
            break;}
   case 55:{BrdColAB=C3;
            BrdColBC=C1;
            BrdColCA=C2;
            break;}
   case 63:{BrdColAB=C2;
            BrdColBC=C1;
            break;
           }}

 /* Calc. incr. e limiti, inizial. i cont. lato A-C (Bresenham) */

 DirXT=-1;
 IncXT=X1-X3;
 if (X1<X3)
  {DirXT=1;
   IncXT=-IncXT;}
 IncXT+=1;
 CntXT=IncXT>>1;

 IncYT=Y3-Y1+1;
 CntYT=IncYT>>1;

 LimT=IncXT;
 if (IncXT<IncYT)
  LimT=IncYT;

 /* Imposta i valori iniziali delle var. locali */

 XT=X1;
 OY2=Y2;

 F1=(Y1>=Y2) || (Y2!=Y3);
 F24=((Y1!=Y2) || (Y2>=Y3)) &&
     ((Y1>=Y2) || (Y2>=Y3));

 /* Disegna il primo vertice del triangolo */

 if ((X1=X2) && (X2=X3) &&
     (Y1=Y2) && (Y2=Y3))
  {/* Segm->XY->X=X1;
      Segm->XY->Y=Y1;
      Segm->Dim_XY->DimX=1; */

   Col1=BrdColAB;
   if (Col1<0)
    Col1=BrdColCA;
   if (Col1<0)
    Col1=FillColor;
   if (Col1>=0)
    {setcolor(DefColors[Col1]);
     line(X1,Y1,X1,Y1);}

   /* if (Col1<256)
       PutHorizLine(&Segm,OBPVBuff,Col1,Clipp)
      else
       PutShadowHorizLine(&Segm,OBPVBuff,ShadowTable,Clipp); */}

 /* Disegna il triangolo */

 do

 {/* Calc. incr. e limiti, inizial. i cont. lato A-B (Bresenham) */

  DirX1=-1;
  IncX1=X1-X2;
  if (X1<X2)
   {DirX1=1;
    IncX1=-IncX1;}
  IncX1+=1;
  CntX1=IncX1>>1;

  IncY1=Y2-Y1+1;
  CntY1=IncY1>>1;

  Lim1=IncX1;
  if (IncX1<IncY1)
   Lim1=IncY1;

  FX1=X1;
  FXT=XT;

  /* Rappresenta un semi-triangolo */

  while ((X1!=X2) || (Y1!=Y2))
   {

    /* Calcola i 4 estremi del segmento orizzontale da disegnare */

    do
    {Internal=Overflow;

     if (Overflow)
      {CntY1-=Lim1;
       CntYT-=LimT;

       Y1+=1;}

     Overflow=True;

     Tmp=CntY1+IncY1;

     if (Tmp<Lim1)
      {CntY1=Tmp;
       CntX1+=IncX1;

       if (CntX1>=Lim1)
        {CntX1-=Lim1;
         X1+=DirX1;}

       Overflow=False;}

     Tmp=CntYT+IncYT;

     if (Tmp<LimT)
      {CntYT=Tmp;
       CntXT+=IncXT;

       if (CntXT>=LimT)
        {CntXT-=LimT;
         XT+=DirXT;}

       Overflow=False;}

     if (Internal)
      {FX1=X1;
       FXT=XT;}

    } while (!Overflow);

    /* Ordina (ord. ascend.) i 4 estremi del segmento orizzontale */

    B1L=FX1;
    B1H=X1;

    if (B1L>B1H)
     {Tmp=B1L;
      B1L=B1H;
      B1H=Tmp;}

    B2L=FXT;
    B2H=XT;

    if (B2L>B2H)
     {Tmp=B2L;
      B2L=B2H;
      B2H=Tmp;}

    Col1=BrdColAB;
    Col2=BrdColCA;

    if ((B2L<B1L) || (B2H<B1H))
     {Tmp=B1L;
      B1L=B2L;
      B2L=Tmp;
      Tmp=B1H;
      B1H=B2H;
      B2H=Tmp;
      Tmp=Col1;
      Col1=Col2;
      Col2=Tmp;}

    /* Calcola la posizione e la dimensione dei 2 bordi del segm. orizz. */

      D1=B1H-B1L+1;
      D0=B2L-B1H-1;
      D2=B2H-B2L+1;

    /* Ove possibile, unisce bordi con parte centrale del segm. orizz. */

      if (D0>0)
       {if (FillColor==Col2) /* Parte0 unita a parte2, parte0 esistente */
         {D0+=D2;
          D2=0;}

        if (Col1==FillColor) /* Parte0 unita a parte1, parte0 esistente */
         {B1H=B1L-1;
          D0+=D1;
          D1=0;}}
      else
       {D0=0;

        if (Col1==Col2) /* Parte1 unita a parte2, parte0 inesistente */
         {D1=B2H-B1L+1;
          D2=0;}}

    /* Rappresenta il primo bordo del segm. orizz. */

    /* Segm->XY->Y=Y1;

       Segm->XY->X=B1L;
       Segm->Dim_XY->DimX=D1; */

    if ((Col1>=0) && (D1>0))
    {setcolor(DefColors[Col1]);
     line(B1L,Y1,B1L+D1-1,Y1);}

    /* if (Col1<256)
        PutHorizLine(&Segm,OBPVBuff,Col1,Clipp)
       else
        PutShadowHorizLine(&Segm,OBPVBuff,ShadowTable,Clipp); */

    /* Rappresenta la parte centrale del segm. orizz. */

    if (((Y1!=OY2) ||
         (!Finished || F1) && (Finished || F24)) && (D0>0))
     {

      /* Segm->XY->X=B1H+1;
         Segm->Dim_XY->DimX=D0; */

      if ((FillColor>=0) && (D0!=0))
      {setcolor(DefColors[FillColor]);
       line(B1H+1,Y1,B1H+D0,Y1);}

      /* if (FillColor<256)
          PutHorizLine(&Segm,OBPVBuff,FillColor,Clipp)
         else
          PutShadowHorizLine(&Segm,OBPVBuff,ShadowTable,Clipp); */
     }

    /* Rappresenta il secondo bordo del segm. orizz. */

    /* Segm->XY->X=B2L;
       Segm->Dim_XY->DimX=D2; */

    if ((Col2>=0) && (D2>0))
    {setcolor(DefColors[Col2]);
     line(B2L,Y1,B2L+D2-1,Y1);}

    /* if (Col2<256)
        PutHorizLine(&Segm,OBPVBuff,Col2,Clipp)
       else
        PutShadowHorizLine(&Segm,OBPVBuff,ShadowTable,Clipp); */

   }

  X2=X3;
  Y2=Y3;

  BrdColAB=BrdColBC;

  Finished=!Finished;

 } while (!Finished);

} 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-06-21T14:06:57.447

您正在寻找的是一种`floodfill`算法。

[这是一个](http://www.mufocus.com/source-code/1287/flood-fill-algorithm-c/computer-graphics-and-virtual-reality-systems)。

[另一个链接](http://www.codeproject.com/Articles/6017/QuickFill-An-efficient-flood-fill-algorithm)。

您可以谷歌“洪水填充算法”了解更多信息。

[编辑]

也许[这个网站](http://cgg-journal.com/2008-2/06/index.html)[Shader-Based Wireframe Drawing] 可以提供更多的想法。

# asp.net-mvc-3 - Uploadify 初始化的额外请求

> ID：11139725
> 
> 赞同：0
> 
> 时间：2012-06-21T13:52:57.350
> 
> 标签：asp.net-mvc-3, uploadify

我将uploadify 与MVC 3 一起使用。加载页面时，我对页面操作有额外的请求-页面上的uploadify 单元如此之多。
如何告诉uploadify不要那样做？:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-08-03T19:04:49.770

我在自己构建的 Ruby Sinatra 应用程序中看到了同样的情况。深入研究了一下，发现 swfUpload 在错误的 url 处寻找按钮图像。通过将 swfUpload button_image_url 属性初始化为 Uploadify settings.buttonImage 属性，我让它正常工作：

```
var swfUploadSettings = {
    assume_success_timeout   : settings.successTimeout,
    button_placeholder_id    : settings.id,
    button_width             : settings.width,
    button_height            : settings.height,
    button_image_url  : settings.buttonImage,
    button_text              : null,
    .... 
```

另请参阅 Uploadify 论坛中的此评论： [http ://www.uploadify.com/forum/#/discussion/comment/16999](http://www.uploadify.com/forum/#/discussion/comment/16999)

# linq - Distinct 适用于 IQueryable 但不适用于 List ?? 为什么？

> ID：11139733
> 
> 赞同：0
> 
> 时间：2012-06-21T13:53:19.927
> 
> 标签：linq, distinct

![在此处输入图像描述](../Images/e613bcf42959d2def99942bb262a6659.png)

第一个表是视图，第二个是我想要的结果

下面的查询工作正常

```
List<BTWStudents> students = (from V in db.vwStudentCoursesSD
        where classIds.Contains(V.Class.Value)
        select new BTWStudents
                    {
                    StudentId = V.StudentId
                    Amount= V.PaymentMethod == "Cashier Check" ? V.Amount: "0.00"
                    }).Distinct().ToList(); 
```

但我将其更改为 List 以添加字符串格式（见下文）

```
List<BTWStudents> students = (from V in db.vwStudentCoursesSD
        where classIds.Contains(V.Class.Value)
        select new {V}).ToList().Select(x => new BTWStudents
                    {
                    StudentId = V.StudentId
                    Amount= V.PaymentMethod == "Cashier Check" ? String.Format("{0:c}",V.Amount): "0.00"
                    }).Distinct().ToList(); 
```

通过第二个查询，我得到了这个

![在此处输入图像描述](../Images/a7a605b3037394ea36410eac4ed38e36.png)

为什么 distinct 在第二个查询中不起作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:59:39.453

试试这个（将您的 distinct 移至第一个查询并纠正您的错误 if/then/else）：

```
List<BTWStudents> students = (from V in db.vwStudentCoursesSD
    where classIds.Contains(V.Class.Value)
    select new {V}).Distinct().ToList().Select(x => new BTWStudents
                {
                classId = V.Class.HasValue ? V.Class.Value : 0,
                studentName = V.StudentName,          
                paymentAmount = V.PaymentMethod == "Cashier Check" ? String.Format("{0:c}",x.V.AmountOwed): "0.00"
                }).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T17:15:44.867

使用对象时（在您的情况下是包装的匿名类型，因为您使用的是 Select new {V} 而不仅仅是 Select V），Distinct 在进行比较时调用 object.Equals 。在内部，这会检查对象的哈希码。您会发现在这种情况下，即使字段包含相同的值，两个对象的哈希码也不同。要解决此问题，您需要覆盖对象类型上的 Equals 或将自定义 IEqualityComparer 实现传递给 Distinct 重载。您应该能够在线搜索“Distinct IEqualityComparer”找到许多示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T17:45:06.080

如果您通过 StudentID，您可以`Distinct`一起使用`Group`

```
var studentsGroupedByPayment =
    (from V in db.vwStudentCoursesSD
    where classIds.Contains(V.Class.Value)
    group V by V.StudentId into groupedV
    select new
    {
        StudentID = groupedV.Key,
        Amount = string.Format("{0:C}",
                      groupedV.First().PaymentMethod == "Cashier Check" ?
                      groupedV.First().Amount : 0.0)
    }
    ).ToList(); 
```

# php - 根据给定的百分比在两个项目之间进行选择

> ID：11139737
> 
> 赞同：4
> 
> 时间：2012-06-21T13:53:35.110
> 
> 标签：php, arrays, random, percentage

我需要根据 40/60% 的比率在数组中显示两个项目之一。因此，有 40% 的时间显示项目一，而有 60% 的时间显示项目二。

我现在有以下代码，它将在两者之间随机选择，但需要一种方法来添加百分比权重。

```
$items = array("item1","item2");
$result = array_rand($items, 1);

echo $items[$result]; 
```

任何帮助，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T13:58:13.177

像这样的东西应该可以解决问题

```
$result = $items[ rand(1, 100) > 40 ? 1 : 0 ]; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T13:58:03.357

```
$val = rand(1,100);
if($val <= 40)
  return $items[0]; 
else 
  return $items[1]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T13:58:06.513

只需使用普通`rand`方法：

```
if (rand(1,10) <= 4) {
    $result = $items[0];
} else {
    $result = $items[1];
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-06-21T13:58:44.370

```
if(rand(0, 100) <= 40) {
    # Item one
} else {
    # Item two
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T14:01:47.427

关于什么 ？

```
$rand = mt_rand(1, 10);
echo (($rand > 4) ? 'item2' : 'item1'); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T13:59:02.537

```
$index = rand(1,10) <= 4 ? 0 : 1;
echo $items[$index]; 
```

# google-maps-api-3 - KML 中带有自定义图标的点突然不显示在 KMLLayer 中（但 Linestrings 显示）

> ID：11139739
> 
> 赞同：0
> 
> 时间：2012-06-21T13:53:37.137
> 
> 标签：google-maps-api-3, kml, google-maps-markers

这段代码在不久前运行良好。KML 和 Javascript 肯定没有改变，所以我想我在 KML 中有一些问题，这是 Google 更新现在不喜欢的。

我有一个 Google Maps API 实现，它只是将 KML 文件加载到地图上的 KMLLayer 中。现在，我得到了显示的线串，但没有显示点。

这是来自 KML 的相关片段。

```
 <Style id="start">
        <IconStyle>
            <scale>0.0</scale>
            <heading>0.0</heading>
            <Icon>
                <href>http://d1b3rm3ifop01h.cloudfront.net/mapicons/start-race-2.png</href>
                <refreshInterval>0.0</refreshInterval>
                <viewRefreshTime>0.0</viewRefreshTime>
                <viewBoundScale>0.0</viewBoundScale>
            </Icon>
        </IconStyle>
    </Style>

    ...

    <Placemark>
        <name>Baden Powell Horseshoe Bay Trailhead</name>
        <description>Elevation: 54.9 m (180.2 ft)&lt;br /&gt;Very small carpark only accessible travelling north.&lt;br /&gt;&lt;a href=&quot;http://www.trailhunger.com/junction/820&quot;&gt;Junction Information&lt;/a&gt;</description>
        <styleUrl>#start</styleUrl>
        <Point>
            <coordinates>-123.2749314141,49.3669179082,54.93</coordinates>
        </Point>
    </Placemark> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-23T14:43:11.850

问题是 scale 元素设置为 0.0，而 Google 最近更改了他们的 Google Maps KML 解析器以支持 scale 元素。将其设置为 1.0 会使图标出现。

0.0 是`de.micromata.opengis.kml`我正在使用的库的默认值。

下一个问题是图标出现在错误的位置。这是因为我需要指定热点元素。

这个答案由 geocodezip@gmail.com 在我提出的[Google Maps API 问题上提供。](http://code.google.com/p/gmaps-api-issues/issues/detail?id=4226)

# android - 在android的SQLiteDatabase中查找第n行

> ID：11139740
> 
> 赞同：1
> 
> 时间：2012-06-21T13:53:42.670
> 
> 标签：android, sqlite

我如何`nth`从 android 中的 SQLiteDatabase 中找到 ROW，我想要这样的东西这`SELECT * FROM Student WHERE rownum = 2;`不是`rownum`我的数据库**中表**的一部分看起来像

**--------**
号码
**--------**
123
456
789

所以在这里我想获取行`456`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:09:03.170

```
Cursor c=db.rawQuery("SELECT * FROM Student", null);
                c.moveToFirst();
                index=c.getColumnIndex("rownum");
                x=Integer.parseInt(c.getString(index));
                while(index!=-1) 
                {
                    if(x==456)//or n
                    {

                        //do something

                    }
                    else{

                        c.moveToNext();
                        index=c.getColumnIndex("rownum");
                        x=Integer.parseInt(c.getString(index));

                    }
                } 
```

编辑：

```
Cursor c=db.rawQuery("SELECT * FROM Student", null);
c.moveToPosition(2); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:03:06.497

您可以尝试将 add`LIMIT 1`和添加`OFFSET <n>`到您可以执行的语句中

```
Cursor c = db.rawQuery(SELECT_QUERY, null); 
```

# c - setjmp/longjmp 失败

> ID：11139744
> 
> 赞同：0
> 
> 时间：2012-06-21T13:54:03.400
> 
> 标签：c, setjmp

一段代码在这里

```
jmp_buf mark;
int Sub_Func()  
{  
    int be_modify, jmpret;    
    be_modify = 0;    
    jmpret = setjmp( mark );  
    if( jmpret == 0 )  
    {  
        // sth else here 
    }  
    else  
    {  
        // error handle 
        switch (jmpret)  
        {  
            case 1:  
                printf( "Error 1\n");  
                break;  
            case 2:  
                printf( "Error 2\n");  
                break;  
            case 3:  
                printf( "Error 3\n");  
                break;  
            default :  
                printf( "Unknown Error");  
                break;  
        }  
        printf("after switch\n");        
    }     
    return jmpret;  
}  

void main( void )  
{  
    Sub_Func();   
    // the longjmp after setjmp
    longjmp(mark, 1);  
} 
```

结果是： 切换 分段故障 后出现
错误1

我知道可能 longjmp 跳回前一个堆栈的原因。但我不确定细节，“标记”中存储了什么样的值，谁能解释一下？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T13:57:11.437

`setjmp()` 并`longjmp()`通过记录堆栈帧位置来工作。如果您`Sub_Func()`在调用之前记录了堆栈帧但从函数返回`longjmp()`，则堆栈帧不再有效。 意味着在与（子函数正常）`longjmp()`相同的函数中调用。`setjmp()`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T13:59:03.440

您正试图 longjmp 回到更深层次的功能。您只能 longjmp 回到较浅的函数。

因此，如果 A 调用`setjmp`，然后调用 B，则 B 可以`longjmp`返回 A。

但是如果A调用b，B调用`setjmp`，B返回A，A**不能** `longjmp`返回B。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T14:15:42.747

您通过违反以下 (7.13.2.1) 调用了未定义的行为：

> longjmp 函数使用相应的 jmp_buf 参数恢复由最近调用 setjmp 宏在程序的同一调用中保存的环境。如果没有这样的调用，或者如果包含 setjmp 宏调用的函数在此期间终止了执行 217)，或者如果 setjmp 宏的调用在具有可变修改类型的标识符的范围内并且执行已经离开在此范围内，行为未定义。
> 
> 217) 例如，通过执行 return 语句或因为另一个 longjmp 调用已导致转移到嵌套调用集中较早的函数中的 setjmp 调用。

简而言之，`longjmp`不能用于跳转到`setjmp`函数中已经返回的点。

# jquery - JQuery Accordion Button - 消除页面刷新时的闪烁

> ID：11139747
> 
> 赞同：0
> 
> 时间：2012-06-21T13:54:09.383
> 
> 标签：jquery

我有一个简单的 JQuery Accordion 菜单，在我的 'accordionButton' div 中有部分名称，在我的 'accordionContent' div 中有导航链接。每个导航链接都会`?page_id=n`在 URL 中附加一个新链接。

问题是，当用户单击我菜单中的新链接时，整个手风琴内容部分会向上滑动，然后再向下滑动。在部分之间切换（单击手风琴按钮）不会导致这种情况发生。

我该如何解决？代码在这里：

```
 $(document).ready(function() {
         $('div.accordionButton.selected').next().show();

         //ACCORDION BUTTON ACTION  
         $('div.accordionButton').click(function() {

         $('div.accordionContent').slideUp('normal');   
         $(this).next().slideDown('normal');
         $('div.accordionButton').removeClass('selected');
         $(this).addClass('selected');  
         });
     }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T15:03:28.277

我用更扎实的方式做了一个手风琴，不会破坏网址。你应该试试这个**[演示](http://jsfiddle.net/5QY4g/5/)**

# python - 如何将 unicoded dict 转换为字符串

> ID：11139751
> 
> 赞同：2
> 
> 时间：2012-06-21T13:54:18.753
> 
> 标签：python, type-conversion

我的问题如下。我们有 dict，它的所有键和值都是 unicode，例如：

```
ab = {
    u'a': u'A',
    u'b': u'B',
    u'c': u'C',
} 
```

我想将其转换为字符串。显然，当我这样做时：

```
str(ab) 
```

我将收到：

```
"{u'a': u'A', u'c': u'C', u'b': u'B'}" 
```

如果我做：

```
unicode(ab) 
```

我将收到：

```
u"{u'a': u'A', u'c': u'C', u'b': u'B'}" 
```

我的预期结果是：

```
"{'a': 'A', 'c': 'C', 'b': 'B'}" 
```

目前我发现，如果我执行 json.dumps，它会正确地将其转换为字符串，而在每个键和值之前没有额外的 'u'，但它也会将 True 更改为 true 和其他 javascript 方言差异。

有什么不同于在我的数据结构上递归迭代的解决方法？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-06-21T13:56:06.443

不，您需要手动将每个项目转换为字符串，然后将 dict 字符串化，并注意除非 Unicode 数据恰好都是 ASCII，否则您可能会遇到问题。做出这样的假设，您可以使用 dict 理解使其更快更简洁：

```
print({str(key): str(value) for key, value in ab.items()})
{'a': 'A', 'c': 'C', 'b': 'B'} 
```

如果您使用的是 2.7.3 之前的 Python 版本，但没有字典推导：

```
dict((str(key), str(value)) for key, value in ab.items()) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:37:03.317

如果您使用的是 python 2.x：

```
dict( map(str, item) for item in ab.iteritems() ) 
```

# php - 这些正则表达式模式不同吗？

> ID：11139753
> 
> 赞同：8
> 
> 时间：2012-06-21T13:54:23.967
> 
> 标签：php, regex, preg-match

我一直在工作的网站不会使用 PHP (preg_match) 正则表达式模式匹配数据，这种模式似乎在我测试过的其他任何地方都可以使用。该模式是：

```
<channel.*?>(.*?)</channel> 
```

它与具有频道标签的 RSS 提要相匹配。

现在我正在处理的服务器只有在将其更改为时才会产生正确的结果：

```
<channel.*?>(.*)?</channel> 
```

我的正则表达式不是世界上最好的，所以我想知道是否有人可以告诉我这两种模式之间是否有任何显着差异。

小提示：我意识到使用 SimpleXML 等可能会更好，但是这个正则表达式来自以前的应用程序，由于各种原因，我不允许更改它。

提前感谢您的任何见解。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T14:00:02.077

该语句`(.*)`说“选择是零个或多个字符”并且尾随`?`使其成为可选匹配。相比之下，`(.*?)`使用的是“懒惰星”（`*?`），它首先尝试完全跳过匹配。检查[此](http://www.regular-expressions.info/repeat.html)以获取更多信息。

要了解普通（贪婪）星和惰性星之间的区别，请查看 PHP 中的以下示例，并注意贪婪星与给出的模式进行最大匹配，而惰性星“放弃”一旦满足匹配模式：

```
$inputs = array( 'axb' , 'axxxb' , 'axbxb' , 'axbxxxb' );

// GREEDY STAR (NORMAL)
foreach( $inputs as $input )
{
  preg_match( '/a.*b/' , $input , $greedy );
  $greedy_matches[] = $greedy[0];
}

print "<pre>";
print_r( $greedy_matches );
print "</pre>";
/* 
Array
(
    [0] => axb
    [1] => axxxb
    [2] => axbxb
    [3] => axbxxxb
)
*/

// LAZY STAR
foreach( $inputs as $input )
{
  preg_match( '/a.*?b/' , $input , $lazy );
  $lazy_matches[] = $lazy[0];
}

print "<pre>";
print_r( $lazy_matches );
print "</pre>";
/* 
Array
(
    [0] => axb
    [1] => axxxb
    [2] => axb
    [3] => axb
)
*/ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T14:01:42.357

我的猜测是，您实际上并不希望操作员本身变得懒惰。惰性运算符通常会尝试尽可能少地匹配，这在处理大量可能不规则的数据时很可能会产生意想不到的结果。通过将问号放在贪婪组的末尾，您可以向贪婪组添加可选匹配，而不是使组非贪婪（惰性）。如果您想详细了解贪婪和懒惰之间的区别，请查看：[http](http://www.regular-expressions.info/possessive.html) ://www.regular-expressions.info/possessive.html 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:10:03.777

请提供您尝试匹配的文本示例。

```
'<channel.*' will match anything starting with <channel

'?>' will match a single character followed by > (so '1>', '2>', 'b>' etc) 
```

如果您想匹配之间的所有内容，只需使用模式

```
'#<channel>(.*)</channel>#' 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-06-21T14:00:19.930

~~在正则表达式中， * 表示 0 次或更多次 - 无需添加 ? 在它之后。~~

编辑：正如我现在从评论中了解到的那样，贪婪有所作为。一个小测试用例：

```
var_dump(preg_replace('/<channel.*?>(.*?).*<\/channel>/', '$1', '<channel>asd</channel>'));
var_dump(preg_replace('/<channel.*?>(.*)?.*<\/channel>/', '$1', '<channel>asd</channel>')); 
```

输出

```
string(0) ""
string(3) "asd" 
```

如您所见，我正在使用`(.*?).*`and `(.*)?.*`，因此贪婪会有所作为。但是，由于它不一样，在给定的示例中，我看不出它是如何产生影响的。

# python - 使用熊猫如何获得组中最后两行的平均值

> ID：11139757
> 
> 赞同：2
> 
> 时间：2012-06-21T13:54:52.140
> 
> 标签：python, pandas

下面提到的代码似乎有效。在排序组上调用`tail`函数能够给我一个组的最后 n 行。这是一个组的尾部函数的记录行为吗？熊猫文档没有提到它，我担心在下一个版本中这种行为可能会改变。还有其他方法可以执行以下操作。对于大型数据集，使用该`apply`函数似乎非常慢。0.7.3 中使用的 pandas 版本

```
df1=pds.DataFrame({'A' : ['CU','CU','CU','CU','CU','AU','AU','AU','AU','AU'],'B':[1,2,3,4,5,1,2,3,4,5]}).sort(['A']).reset_index().drop(['index'],axis=1)
df2=df1.groupby(['A'])
df3=df2.tail(2).groupby(['A'])
df3.mean() 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:58:07.910

该文档[确实提到了 head/tail](http://pandas.sourceforge.net/basics.html#head-and-tail)。

对于您的代码，请使用`pivot_table`：

```
a = pds.DataFrame({'A' : ['CU','CU','CU','CU','CU','AU','AU','AU','AU','AU'],
                   'B':[1,2,3,4,5,1,2,3,4,5]}).sort(['A'])

a.pivot_table(rows='A', values='B', aggfunc=lambda x: x.tail(2).mean()) 
```

返回

```
AU    4.5
CU    4.5 
```

# java - 是否可以通过 testng.xml 在 TestNG 中设置注释？

> ID：11139759
> 
> 赞同：0
> 
> 时间：2012-06-21T13:55:07.053
> 
> 标签：java, testng, dataprovider

我正在使用出色的 TestNG-Framework 进行测试。我的问题是是否可以在 testng.xml-configuration 文件中为 @Test-annotation 设置注释？我不想像这样硬编码@Test-annotation

```
@Test(dataProvider = "dataFileProvider", dataProviderClass = TestDataProvider.class) 
```

我想在 testng.xml 中配置它

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:17:25.880

我对这个案子有两个想法：

解决方法 1：[StaticProvider](http://testng.org/doc/documentation-main.html#parameters-dataproviders)

如果需要，您可以轻松更改静态提供程序

解决方法 2：[注释转换器](http://testng.org/doc/documentation-main.html#annotationtransformers)

从未尝试过，但即使必须手动获取 XML 数据也应该可以工作

期待 Beust 先生的回答... ;)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-22T02:19:54.117

简短的回答是：不，您不能从`testng.xml`.

正如 Frank 所解释的，您可以使用 Annotation Transformer 修改现有的注释。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-01T18:29:04.343

有时，您只是真的想做某事而您做不到，例如访问私有变量以修复内存泄漏。弄清楚如何做这样的事情，尽管你不能很有趣。如果您真的想这样做，我可能会建议您尝试使用 TestNG 对象并在运行加载 testng.xml 文件之前运行您的套件。

就个人而言，我喜欢使用“mvn test”，不幸的是，添加 pom.xml 代码以从 testng xml 文件运行将需要您提供 testng.xml 文件，因此“mvn test”将不起作用。始终确保 95% 的程序员使用的东西有效，然后允许覆盖。

因此，我可能建议您自己扩展 testng.xml 文件并编写一些代码来读取 testng.xml 文件并使用注释转换器类配置注释。

以下是一些帮助您入门的代码：

```
public class TestNGSuite {
public static void main(String[] args) {
    System.out.println("main start");
    try {
        new TestNGSuite(new Class[]{ Demo.class });
    } catch (Exception e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    }
    System.out.println("main finish");
}

public TestNGSuite(Class[] classes) throws Exception {
    // Create Suite List
    List<XmlSuite> suites = new ArrayList<XmlSuite>();

    // Add Suite to Suite List
    XmlSuite suite = new XmlSuite();
    suites.add(suite);
    suite.setName("MyTestSuite");

    // Add Test to Suite
    XmlTest test = new XmlTest(suite);
    test.setName("MyTest");

    // Add Class List to Test
    List<XmlClass> xmlClasses = new ArrayList<XmlClass>();
    test.setXmlClasses(xmlClasses);

    // Add Class to Class List
    for(Class clazz: classes) {
        XmlClass xmlClass = new XmlClass(clazz);
        xmlClasses.add(xmlClass);
    }

    // Run TestNG
    TestNG testNG = new TestNG();
    testNG.setXmlSuites(suites);
    testNG.addListener(new TestNGAnnotationTransformer(methodName));
    testNG.addListener(new TestNGSuiteConsoleLogger());
    testNG.run();

    if(testNG.hasFailure()) { // Throw an exception to make mvn goal fail
        throw new Exception("Failed Tests");
    }
}

public static class TestNGSuiteConsoleLogger extends TestListenerAdapter{
      @Override
      public void onTestFailure(ITestResult tr) {
        Console.log(TestNGSuiteConsoleLogger.class, "FAILURE:"+tr.getMethod());
        tr.getThrowable().printStackTrace();
      }
}

public static class TestNGAnnotationTransformer implements IAnnotationTransformer{
      String methodToRun;
      public TestNGAnnotationTransformer(String methodName) {
              methodToRun = methodName;
      }
    public void transform(ITestAnnotation annotation, Class arg1,
            Constructor arg2, Method testMethod) {
            if (methodToRun.equals(testMethod.getName())) {
            annotation.setEnabled(true);
            }
      }
}
} 
```

如果要运行 Demo.class，请确保那里有一个带有 TestNG 注释“@Test”的方法。

# ruby-on-rails - Heroku 和 Github 登录问题，（Heroku.account = 工作，没有这样的帐户：工作）

> ID：11139762
> 
> 赞同：0
> 
> 时间：2012-06-21T13:55:10.673
> 
> 标签：ruby-on-rails, heroku, github

我在推送和登录 Heroku 时遇到问题。尝试登录时，它会呈现错误；

> **没有这样的帐户：工作**

因此，查看我的 github 配置列表，我看到它指出；

> **heroku.account=工作**

我找不到改变这些的正确方法；如何将这两个恢复为默认设置或个人帐户？

我设法通过首先删除 git config --edit 文件中的 heroku 帐户来对此进行排序，然后能够去 heroku accounts:add personal --auto 然后使用 heroku accounts:default personal 将其设置为默认值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T15:07:59.470

这来自 Heroku Accounts 插件 (https://github.com/ddollar/heroku-accounts)，它允许您切换帐户。重新安装后，您可能需要执行`heroku accounts:add work`并输入您的工作凭据，它应该开始工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-03-31T20:24:21.777

尝试删除现有的帐户凭据`rm -rf ~/.heroku/plugins/heroku-accounts`，然后键入`heroku login`输入您的凭据.. 现在好了。

# excel - 通过 vbscript 转置 Excel

> ID：11139767
> 
> 赞同：3
> 
> 时间：2012-06-21T13:55:23.620
> 
> 标签：excel, vbscript, transpose

我有一个从其他程序导出的 Excel 电子表格。

它具有根据少数业务条件着色的行。

现在我必须将整个 Excel 表连同颜色和格式一起转置。

请注意，我必须仅使用 Vbscript 来执行此操作。

这是我到目前为止编写的代码，但它在没有格式的情况下转置：

```
 sub transpose
 On Error Resume Next
 Set objExcel = CreateObject("Excel.Application")
 objExcel.Visible = False
 objExcel.Workbooks.Add()
 set table = ActiveDocument.GetSheetObject( "CH01" )
 CellRect = ActiveDocument.GetApplication().GetEmptyRect()
 CellRect.Top = 0
 CellRect.Left = 0
 CellRect.Width = table.GetColumnCount
 CellRect.Height = table.GetRowCount
 set CellMatrix = table.GetCells( CellRect )
 for RowIter=CellRect.Top to CellRect.Width-1
   for ColIter=CellRect.Left to CellRect.Height-1
     ObjExcel.Cells(RowIter+1, ColIter+1).Value = CellMatrix(ColIter)(RowIter).Text
    'msgbox(CellMatrix(ColIter)(RowIter).Text)
   next
 next
 objExcel.ActiveWorkbook.SaveAs("C:\Documents and    Settings\prasanna\Desktop\test3.xls")
 objExcel.Application.Workbooks.Open("C:\Documents and           Settings\prasanna\Desktop\test3.xls")
 objExcel.Application.Visible = True
 objExcel = Nothing
 end sub 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T20:46:39.983

呼..，这花费了一些时间和试验，这里是 Office 2012 的工作解决方案

```
const xlPasteValuesAndNumberFormats = 12 'doesn't work with Excel 2010 ?
const xlFormats =-4122
Set objExcel = CreateObject("Excel.Application")
objExcel.Visible = True
objExcel.DisplayAlerts = false 
```

如果您已经有了目标 xls，则可以跳过这些行

```
Set wbkDest = objExcel.Workbooks.Add
wbkDest.saveAs "c:\test2.xls"
wbkDest.close 
```

继续这里

```
Set objWorkbook1= objExcel.Workbooks.Open("C:\test1.xls")
Set objWorkbook2= objExcel.Workbooks.Open("C:\test2.xls")
objWorkbook1.Worksheets("Sheet1").UsedRange.Copy
'we have to do the paste twice, once for the values, once for the formats
objWorkbook2.Worksheets("Sheet1").Range("A1").PasteSpecial xlPasteValuesAndNumberFormats
objWorkbook2.Worksheets("Sheet1").Range("A1").PasteSpecial xlFormats
objWorkbook1.save
objWorkbook2.save
objWorkbook1.close
objWorkbook2.close
set objExcel=nothing 
```

# php - Magento Grid：使用 addColumn 操作的更好方法？

> ID：11139772
> 
> 赞同：3
> 
> 时间：2012-06-21T13:55:36.507
> 
> 标签：php, magento, adminhtml

此函数设置 Magento Grid 以显示具有相应“删除”操作的文件名列表。

问题是删除操作从不传递参数“文件名”。（请参阅[http://www.premasolutions.com/content/magento-manage-category-product-grid-edit-link](http://www.premasolutions.com/content/magento-manage-category-product-grid-edit-link)）我有 TESTDUMP 进行验证，但它永远不会在下一页上打印。

'params' 是 'addColumn->actions->url' 的合法操作吗？

更新：为控制器添加了构造和准备集合。也许是因为我使用的 Collection 类型？

### Rogue_Googlemerchant_Block_Adminhtml_Exporter_Grid 类

```
Rogue_Googlemerchant_Block_Adminhtml_Exporter_Grid extends Mage_Adminhtml_Block_Widget_Grid
{

public function __construct()
{
    parent::__construct();
    $this->setId('googlemerchantGrid');
    // This is the primary key of the database
    $this->setDefaultSort('filename');
    $this->setDefaultDir('ASC');
    $this->setSaveParametersInSession(true);
}

protected function _prepareCollection()
{
    $basePath = Mage::getBaseDir('base');
    $feedPath = $basePath . '/opt/googlemerchant/';
    $errPath = $basePath . '/var/log/googlemerchant/';
    $flocal = new Varien_Io_File();
    $flocal->open(array('path' => $feedPath));
    $dataCollection = new Varien_Data_Collection();

    foreach ($flocal->ls() as $item) {
        $dataObject = new Varien_Object();
        $dataObject->addData(
            array(
                'filename'     => $item['text'],
                'size'         => $item['size'] / 1000 . ' kb',
                'date_modified'=> $item['mod_date']
            )
        );
        $dataCollection->addItem($dataObject);
    }

    $this->setCollection($dataCollection);

    return parent::_prepareCollection();
}

    protected function _prepareColumns()
    {
        $this->addColumn('filename', array(
          'header'    => Mage::helper('googlemerchant')->__('File'),
          'align'     =>'left',
          'index'     => 'filename',
          'width'     => '200px',
        ));

        $this->addColumn('action', array(
            'header'  => Mage::helper('googlemerchant')->__('Action'),
            'width'   => '50px',
            'type'    => 'action',
    //      'getter'  => 'getId',
            'actions' => array(
                array(
                    'caption' => Mage::helper('googlemerchant')->__('Delete'),
                    'url'     =>
                        array(
                            'base'   => '*/*/delete',
                            'params' => array('filename' => 'TESTDUMP')
                        ),
                    'field'   => 'filename'
                )
            ),
            'filter'    => false,
            'sortable'  => false,
    //       'index'     => 'filename',
    //       'is_system' => true,
    ));
    }

} 
```

### Rogue_Googlemerchant_Adminhtml_ExporterController 类

```
class Rogue_Googlemerchant_Adminhtml_ExporterController extends Mage_Adminhtml_Controller_Action
{

    public function deleteAction()
    {
        $filename = $this->getRequest()->getParam('filename');
        $basePath = Mage::getBaseDir('base');
        $feedPath = $basePath . '/opt/googlemerchant/';
        $errPath = $basePath . '/var/log/googlemerchant/';
        $flocal = new Varien_Io_File();
        $flocal->open(array('path' => $feedPath));
d($filename);
        if ($filename) {
            try{
                $flocal->rm($filename);
                Mage::getSingleton('adminhtml/session')->addSuccess(Mage::helper('googlemerchant')->__('The file has been deleted.'));
                $this->_redirect('*/*/');
            }
            catch (Mage_Core_Exception $e) {
                $this->log($e);
                Mage::getSingleton('adminhtml/session')->addError($e->getMessage());
                $this->_redirect('*/*/index');
                return;
            }
        }
die('here');
        Mage::getSingleton('adminhtml/session')->addError(Mage::helper('adminhtml')->__('Unable to find the file to delete.'));
        $this->_redirect('*/*/');
    }
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-22T09:10:13.357

操作列的`getter`用于集合项以检索参数的参数值`field`。

我不确定你为什么要指定硬编码的文件名或者这是否应该工作，但如果你添加列配置

```
'getter'  => 'getFilename' 
```

并`params`从它应该起作用的操作中删除。

# java - 线程池中线程之间的通信

> ID：11139773
> 
> 赞同：0
> 
> 时间：2012-06-21T13:55:37.530
> 
> 标签：java, multithreading, hashmap, threadpool

假设我有一个线程池并且每个线程都运行以下方法：

```
void runMe(HashMap myHash){
   ...
   myHash.remove(keyToBeRemoved);
   ...
} 
```

我的问题是；`myHash`开始时所有线程不应该相同吗？因为我的第二个线程没有密钥`keyToBeRemoved`。我想知道为什么。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T13:59:17.147

所有线程的`myHash` *引用*可能相同，但是当第一个线程执行时

```
myHash.remove(keyToBeRemoved); 
```

那么*哈希映射*（所有引用都引用）将不再具有该映射。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:01:01.450

HashMap hm => 取决于您的程序。如果您使用它在线程之间共享，它将被每个线程同时修改并且您提供并发性。

keyToBeRemoved => 同上

# java - 在模拟器上捕获 Android 视频

> ID：11139774
> 
> 赞同：0
> 
> 时间：2012-06-21T13:55:43.370
> 
> 标签：java, android, eclipse

我正在尝试在 android(2.3.3) 上开发相机应用程序。使用 eclipse 和 android 模拟器（所以没有设备）。我的应用程序有两个功能：拍照和捕捉视频。一键切换模式。第一个工作正常，但视频有问题。

第一个错误是：“setOutputFormat 在无效状态下调用：4”。在尝试设置 MediaRecorder 的输出格式时。如果我忽略这一点（将其设为注释行），那么我会收到“媒体服务器死机，相机服务器死机”错误（错误 100）

我是一个新的 android 开发人员，所以我只是在使用本教程：http: [//developer.android.com/guide/topics/media/camera.html](http://developer.android.com/guide/topics/media/camera.html)

这些错误的原因可能是我试图在没有设备的情况下进行测试吗？

这是清单许可：

```
<uses-sdk android:minSdkVersion="10" />

<uses-permission android:name="android.permission.CAMERA" />
<uses-feature android:name="android.hardware.camera" />
<uses-feature android:name="android.hardware.camera" android:required="false" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.RECORD_AUDIO" />
<uses-permission android:name="android.permission.RECORD_VIDEO"/> 
```

这是发生这些错误的代码：

```
private boolean prepareVideoRecorder() {

    mMediaRecorder = new MediaRecorder();
    mMediaRecorder.reset();

    // Unlock and set camera to MediaRecorder
    mCamera.unlock();
    mMediaRecorder.setCamera(mCamera);

   // Set sources
    mMediaRecorder.setAudioSource(MediaRecorder.AudioSource.DEFAULT);
    mMediaRecorder.setVideoSource(MediaRecorder.VideoSource.CAMERA);

    // Set output format and encoding
    mMediaRecorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    mMediaRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
    mMediaRecorder.setVideoEncoder(MediaRecorder.VideoEncoder.DEFAULT);

    // Set a CamcorderProfile (requires API Level 8 or higher)
    mMediaRecorder.setProfile(CamcorderProfile.get(CamcorderProfile.QUALITY_HIGH));

    // Set output file
    mMediaRecorder.setOutputFile(getOutputMediaFile(MEDIA_TYPE_VIDEO).toString());

    // Set the preview output
    mMediaRecorder.setPreviewDisplay(mPreview.getmHolder().getSurface());

    //  Prepare configured MediaRecorder
    try {
        mMediaRecorder.prepare();
    } catch (IllegalStateException e) {
        Log.d(TAG, "IllegalStateException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    } catch (IOException e) {
        Log.d(TAG, "IOException preparing MediaRecorder: " + e.getMessage());
        releaseMediaRecorder();
        return false;
    }
    return true;
}

private void videoRecording() {
    if (isRecording) {
        // stop recording and release camera
        mMediaRecorder.stop();  // stop the recording
        releaseMediaRecorder(); // release the MediaRecorder object
        mCamera.lock();         // take camera access back from MediaRecorder

        // inform the user that recording has stopped
        captureButton.setText(R.string.capture);
        isRecording = false;
    } else {
        // initialize video camera
        if (prepareVideoRecorder()) {
            // Camera is available and unlocked, MediaRecorder is prepared,
            // now you can start recording
            mMediaRecorder.start();

            captureButton.setText(R.string.stop);
            isRecording = true;
        } else {
            // prepare didn't work, release the camera
            releaseMediaRecorder();
        }
    }
} 
```

这是 logcat 输出：

```
06-21 16:27:24.034: E/MediaRecorder(329): setOutputFormat called in an invalid state: 4
06-21 16:27:24.034: D/AndroidRuntime(329): Shutting down VM
06-21 16:27:24.054: W/dalvikvm(329): threadid=1: thread exiting with uncaught exception     (group=0x40015560)
06-21 16:27:24.054: E/AndroidRuntime(329): FATAL EXCEPTION: main
06-21 16:27:24.054: E/AndroidRuntime(329): java.lang.IllegalStateException
06-21 16:27:24.054: E/AndroidRuntime(329):  at android.media.MediaRecorder.setOutputFormat(Native Method)
06-21 16:27:24.054: E/AndroidRuntime(329):  at android.media.MediaRecorder.setProfile(MediaRecorder.java:286)
06-21 16:27:24.054: E/AndroidRuntime(329):  at com.bor.Fotograf.AndroidFotoActivity.prepareVideoRecorder(AndroidFotoActivity.java:221)
06-21 16:27:24.054: E/AndroidRuntime(329):  at com.bor.Fotograf.AndroidFotoActivity.videoRecording(AndroidFotoActivity.java:257)
06-21 16:27:24.054: E/AndroidRuntime(329):  at com.bor.Fotograf.AndroidFotoActivity.access$9(AndroidFotoActivity.java:245)
06-21 16:27:24.054: E/AndroidRuntime(329):  at com.bor.Fotograf.AndroidFotoActivity$6.onClick(AndroidFotoActivity.java:107)
06-21 16:27:24.054: E/AndroidRuntime(329):  at android.view.View.performClick(View.java:2485)
06-21 16:27:24.054: E/AndroidRuntime(329):  at android.view.View$PerformClick.run(View.java:9080)
06-21 16:27:24.054: E/AndroidRuntime(329):  at android.os.Handler.handleCallback(Handler.java:587)
06-21 16:27:24.054: E/AndroidRuntime(329):  at android.os.Handler.dispatchMessage(Handler.java:92)
06-21 16:27:24.054: E/AndroidRuntime(329):  at android.os.Looper.loop(Looper.java:123)
06-21 16:27:24.054: E/AndroidRuntime(329):  at android.app.ActivityThread.main(ActivityThread.java:3683)
06-21 16:27:24.054: E/AndroidRuntime(329):  at java.lang.reflect.Method.invokeNative(Native Method)
06-21 16:27:24.054: E/AndroidRuntime(329):  at java.lang.reflect.Method.invoke(Method.java:507)
06-21 16:27:24.054: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
06-21 16:27:24.054: E/AndroidRuntime(329):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
06-21 16:27:24.054: E/AndroidRuntime(329):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T13:57:26.513

正如你所说，你需要一个设备来测试视频和麦克风功能，srry！

也许您可以尝试使用虚拟机并尝试安装它。

在这里你可以找到如何安装虚拟机；）

[http://osxdaily.com/2012/02/23/android-4-ics-virtualbox/](http://osxdaily.com/2012/02/23/android-4-ics-virtualbox/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-04T20:52:59.057

没有android.permission.RECORD_VIDEO的权限！！！

您可能可以在这里找到答案[setOutputFormat called in an invalid state: 4 (where and why)](https://stackoverflow.com/questions/21632769/setoutputformat-called-in-an-invalid-state-4-where-and-why/21709635)

# gwt - EclipseLink 找不到我的实体“IllegalArgumentException”

> ID：11139775
> 
> 赞同：1
> 
> 时间：2012-06-21T13:55:47.083
> 
> 标签：gwt, maven, intellij-idea, eclipselink, guice

我正在尝试使用 IntelliJ IDEA、Maven、Google Guice、GWT、EclipseLink 和 JPA 2.0 进行简单的持久性测试。

我的persistence.xml：

```
<persistence-unit name="guiceTest" transaction-type="RESOURCE_LOCAL">
    <provider>org.eclipse.persistence.jpa.PersistenceProvider</provider>
    <class>utfpr.edu.br.server.model.Contato</class>
    <properties>
        <property name="javax.persistence.jdbc.url"
                  value="jdbc:postgresql://127.0.0.1:5432/gwt"/>
        <property name="javax.persistence.jdbc.password" value="postgres"/>
        <property name="javax.persistence.jdbc.driver" value="org.postgresql.Driver"/>
        <property name="javax.persistence.jdbc.user" value="postgres"/>
        <property name="eclipselink.ddl-generation" value="create-tables"/>
        <property name="eclipselink.logging.level" value="INFO"/>
    </properties>
</persistence-unit> 
```

例外：

```
[EL Warning]: 2012-06-21 10:18:32.846--The collection of metamodel types is empty. Model classes may not have been found during entity search for Java SE and some Java EE container managed persistence units.  Please verify that your entity classes are referenced in persistence.xml using either <class> elements or a global <exclude-unlisted-classes>false</exclude-unlisted-classes> element

java.lang.IllegalArgumentException: Object: Contato{dataNascimento=Thu Jun 21 10:18:31 BRT 2012, id=null, nome='abcd', sobrenome='adsada', numero='12313123', email='lololol@gmail.com'} is not a known entity type. 
```

测试类：

```
Injector i = PersistenceTestModule.getInjector();
private ContatoDao dao = i.getInstance(ContatoDao.class);
@Test
public void testSave() throws Exception {
  Contato cont = new Contato("abcd","adsada","12313123","lollollo@gmail.com",new Date());
  dao.save(cont);
  assertNotNull(cont.getId());
} 
```

我的 persistence.xml 已更正放置在资源/META-INF 中。

我在这里读到这是一个 eclipselink 错误：[https ://bugs.eclipse.org/bugs/show_bug.cgi?id=338837](https://bugs.eclipse.org/bugs/show_bug.cgi?id=338837)

他们说：

> 解决方案：解决这个问题有两种方法。
> 
> 1) 我们根本没有指定实体，也没有指定 false - 结果是一个完全空的元模型
> 
> 2) 我们通过属性仅指定部分实体 - 结果是当我们尝试使用缺少的 EntityType 类时抛出的选择性 IllegalArgumentException 错误 - 可能在 Criteria API 查询中”。

我已经尝试了这两种解决方案，但仍然出现此错误。

请有人帮助我！

# reporting-services - 用户数据源凭据不符合运行此报表的要求或运行报表时出现共享数据集错误

> ID：11139777
> 
> 赞同：20
> 
> 时间：2012-06-21T13:55:55.787
> 
> 标签：reporting-services

尝试运行报告时出现以下错误：

> 当前操作无法完成。用户数据源凭据不满足运行此报表或共享数据集的要求。用户数据源凭据未存储在报表服务器数据库中，或者用户数据源配置为不需要凭据但未指定无人参与执行帐户。(rsInvalidDataSourceCredentialSetting)

顺便说一句，我使用 SQL Server 2008 Reporting Services 从 VS2010 运行它。

我该如何解决这个问题？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-21T15:01:08.793

是的，我见过这个。您可以设置[凭据和连接信息](http://msdn.microsoft.com/en-us/library/ms160330.aspx)，以便模拟无人参与的用户帐户运行报告。[本文](http://msdn.microsoft.com/en-us/library/ms156302.aspx)介绍了如何设置这种类型的报表运行。如果您想在动态连接字符串中使用凭据（例如，当您需要通过参数插入凭据时），此设置特别有用。

如果您不想使用无人参与的用户帐户运行，则应查看报告中定义的数据源和连接字符串。也许可以使用数据源的设置和不同配置来创建不同的设置。上面的链接应该是一些文档的开始。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2020-01-09T02:53:36.133

就我而言，这是因为一些部署参数。

1.  通过右键单击解决方案资源管理器中的项目名称并选择属性，转到项目属性。
2.  在 Configuration Properties > General 中，将 Deployment 部分中的 OverwriteDatasets 和 OverwriteDataSources 更改为**True**两个参数。
3.  单击确定。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-12-19T23:19:22.880

就我而言，用本地（从远程位置获取并存储在本地表中）数据连接替换链接服务器连接会有所帮助。我们还检查了所有子报告/链接报告，它工作正常。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-14T23:21:53.217

今天发生在我身上，这是因为我在报告中使用了错误的数据源。所以我在报告管理器中手动更改了数据源，它工作了。我想另一种选择是使用正确的数据源重新部署您的报告。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-12-29T15:06:29.437

这是来自微软：[这里](https://www.microsoft.com/technet/support/ee/transform.aspx?ProdName=SQL%20Server%20Reporting%20Services&ProdVer=8.00&EvtID=rsInvalidDataSourceCredentialSetting&EvtSrc=Microsoft.ReportingServices.Diagnostics.ErrorStrings.resources)

**用户操作** 更改当前报告的设置，使其可以在无人参与的情况下运行，然后再次尝试创建订阅或其他计划操作。使用以下步骤将报告配置为无人值守运行：

**1) 转到要自动化的报告的数据源属性页面。**

**2) 对于 Connect Using 选项，选择安全存储在报表服务器中的凭据。**

**3) 在用户名和密码中，键入可用于访问数据库的凭据。如果您使用 SQL Server 作为数据源，则用户名必须对登录服务器和访问包含报表数据的数据库都有效。**

**4) 如果用户名和密码是 Windows 帐户的凭据，请选择用作 Windows 凭据。如果凭据用于 SQL Server 用户登录，请不要选中此复选框。**

无论身份验证类型如何，都不要选中在与数据源建立连接后模拟经过身份验证的用户复选框。此选项不能用于无人值守运行的报告。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-09-05T02:04:15.723

今天发生在我身上。我正在使用 Visual Studio 2019 为 SQL Server 2014 创建报告。

我的一份报告有一个嵌入式数据源，但它未配置/未正确配置。[（您可以在“数据源”下的“报告数据”窗格](https://social.msdn.microsoft.com/Forums/sqlserver/en-US/ab53b7f2-2747-41c3-8849-c948fc7793cc/report-data-pane-missing?forum=sqlreportingservices)中查看嵌入的数据源）。

[![显示嵌入式数据源文件夹位置的屏幕截图](../Images/1242be4d0fe0366e9583606096d07b9a.png)](https://i.stack.imgur.com/TTlTN.png)

但是，实际上并未使用嵌入式数据源。我之前为调试创建了嵌入式数据源，但忘记了它。

删除未使用的嵌入式数据源后，错误消失了。

# javascript - 如何为变量创建“for循环”以在特定div上运行“if”语句

> ID：11139778
> 
> 赞同：-1
> 
> 时间：2012-06-21T13:56:02.607
> 
> 标签：javascript, if-statement, for-loop

我需要创建一段脚本，查看页面上的各种产品，使用“过去”和“现在”价格计算折扣百分比，然后显示该产品的图像，代表折扣百分比。

到目前为止，我可以遍历所有产品并运行百分比脚本以显示图像，但所有产品上都显示相同的图像，而不是不同百分比的不同图像。有谁知道我如何使每个产品的百分比脚本运行而不重复？

这是一些虚拟的 HTML：

```
<div id="prods">
<div id="discountWasPrice" style="display:none;">50</div>
<div id="discountSellPrice" style="display:none;">25</div>
<div id="discount50"></div>
</div>

<div id="prods">
<div id="discountWasPrice" style="display:none;">75</div>
<div id="discountSellPrice" style="display:none;">25</div>
<div id="discount50"></div>
</div>

<div id="prods">
<div id="discountWasPrice" style="display:none;">10</div>
<div id="discountSellPrice" style="display:none;">8</div>
<div id="discount50"></div>
</div> 
```

这是到目前为止的javascript：

```
<script type="text/javascript">
var discount = $("div#discount50");
var prods = $("div#prods");
var discountLen = $("div#prods").length;
for(var i = 0; i < discountLen; i++){
var x = $('#discountWasPrice').text();
var f = $('#discountSellPrice').text();
var g = 1-(f/x);
percent= (g * 100).toFixed(2);
if ((percent > 4.00) && (percent < 10.00)) {
    discount[i].innerHTML+="<a href=\"\"><img src=\"5percent.png\"></a>";}
if ((percent > 9.00) && (percent < 15.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"10percent.png\"></a>";}
if ((percent > 14.00) && (percent < 20.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"15percent.png\"></a>";}
if ((percent > 19.00) && (percent < 25.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"20percent.png\"></a>";}
if ((percent > 24.00) && (percent < 30.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"25percent.png\"></a>";}
if ((percent > 29.00) && (percent < 35.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"30percent.png\"></a>";}
if ((percent > 34.00) && (percent < 40.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"35percent.png\"></a>";}
if ((percent > 39.00) && (percent < 45.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"40percent.png\"></a>";}
if ((percent > 44.00) && (percent < 50.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"45percent.png\"></a>";}
if ((percent > 49.00) && (percent < 60.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"50percent.png\"></a>";}
if ((percent > 59.00) && (percent < 70.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"60percent.png\"></a>";}
if ((percent > 69.00) && (percent < 75.00)) {
discount[i].innerHTML+="<a href=\"\"><img src=\"70percent.png\"></a>";}
if (percent > 74.00) {
discount[i].innerHTML+="<a href=\"\"><img src=\"70percentplus.png\"></a>";}
}
</script> 
```

任何帮助深表感谢，

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:03:50.137

将每个 div 的“id”移动到“class”，然后让一些 jquery 魔法在所有 div 上循环......

# powershell - 使用 powershell 修改 web.config 以具有 smtp 部分

> ID：11139782
> 
> 赞同：1
> 
> 时间：2012-06-21T13:56:06.907
> 
> 标签：powershell, web-config, smtp

我正在尝试使用 powershell 修改 web.config 以添加 smtp 部分。我看到了这篇文章：http: [//ybbest.wordpress.com/2012/02/28/how-to-add-configuration-settings-using-spwebconfigmodification-and-powershell-script/#comment-1070](http://ybbest.wordpress.com/2012/02/28/how-to-add-configuration-settings-using-spwebconfigmodification-and-powershell-script/#comment-1070) 其中添加了一些 appsettings 定义smtp 部分。但我想知道这些线是否：

```
<add key="businessSupportEmailAddress" value="contosointergenfax@gmail.com" />
<add key="copyMoveTempFolder" value="C:\Program Files\Common Files\Microsoft Shared\Web Server Extensions\14\LOGS\SharePointProducts" />
<add key="faxEmailAddress" value="contosointergenfax@gmail.com" />
<add key="fromEmailAccount" value="contosoAdmin" />
<add key="fromEmailAddress" value="contosointergenfax@gmail.com" />
<add key="smtpServerName" value="build.contoso.local" />
<add key="smtpServerPort" value="25" /> 
```

与此相同：

```
<system.net>
<mailSettings>
<smtp deliveryMethod="Network" from="testuser@domail.com">
<network defaultCredentials="true" host="localhost" port="25" userName="kaushal" password="testPassword"/>
</smtp>
</mailSettings>
</system.net> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-07-16T23:25:19.913

没有。

第一个块表示将由配置管理器加载到默认哈希中的键值对（appSettings，请参阅[http://odetocode.com/Articles/345.aspx](http://odetocode.com/Articles/345.aspx)）。

另一个是用于邮件的 .NET 系统配置，主要用于 ASP webapps：http: [//msdn.microsoft.com/en-US/library/w355a94k.aspx](http://msdn.microsoft.com/en-US/library/w355a94k.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-07-16T23:52:24.853

感谢您访问我的[博客](http://ybbest.wordpress.com)，我的解决方案特定于我们正在处理的 SharePoint 项目。最后，我们实际上最终将配置设置放入列表中，因为我们也需要 SharePoint 计时器作业来访问配置设置。

如果你的解决方案是 asp.net application ，你应该使用后者。

# jquery - JQuery 和 ASP.NET：在单击时调用 preventDefault() 但返回 true 时不返回正常操作

> ID：11139783
> 
> 赞同：1
> 
> 时间：2012-06-21T13:56:07.770
> 
> 标签：jquery, asp.net

我有一个 JQuery/ASP 问题，希望有人可以帮助我。

场景：ASP.net 应用程序已经构建和部署，但是为了让所有客户端保持在相同的版本（更容易更新），我注入了很多 JQuery 来为这个客户端定制 ASP 应用程序以避免重新编译代码并让它们成为“一次性”版本。

这是我正在尝试做的事情：

在表单上添加验证。目前，我正在抓取“提交”按钮的单击事件，并执行 if 语句并检查字段中的空值。IE：

```
$("input[id*=btnVisualSubmit]").click(function(event) {     
    if ($("#field").val() == "")
        event.preventDefault();
        alert("field is empty.  ");
}); 
```

它是一组 if/else 语句，用于检查每个字段中的空字符串。现在.. 我想要发生的是.. 如果这些 if 语句都没有发生，那么正常的 ASP 按钮将按原样运行并执行所有后面的代码。只要用户在第一次尝试时输入所有必填字段，这就可以正常工作。但是一旦我点击 event.preventDefault()，它就永远不会在用户输入所有必填字段后提交表单。

我已经尝试了一切，从将 event.preventDefault() 更改为“return false”到添加最后一个“else”语句，该语句只返回“true”，但除非用户在第一次尝试时正确输入所有有效数据，否则不会调用提交按钮.

任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:14:17.327

我在提交时使用了表单。请参阅下面的代码

```
<body>
    <form id="one"   action="JqueryEvent.html">
        <input type="text" id="abc" />
        <input type="submit" />

    </form>
    <script type="text/javascript">
        $("#one").on("submit", function () {
            if (jQuery("#abc").val() == "") {
                alert("clicked");
                return false;
            }

        });
    </script>
</body> 
```

# c++ - 使用 /clr 在 Visual Studio 2010 中提升

> ID：11139784
> 
> 赞同：2
> 
> 时间：2012-06-21T13:56:19.597
> 
> 标签：c++, visual-studio-2010, boost, clr

我创建了一系列类，希望将它们合并到 Visual Studio 2010 的 Windows 窗体应用程序中。这些类使用 Boost，特别是 boost::thread。

启用公共语言运行时支持后，我收到以下错误消息：

```
1>c:\program files (x86)\boost\boost_1_47\boost\thread\win32\thread_primitives.hpp(314): error C2472: 'boost::detail::win32::interlocked_bit_test_and_set' cannot be generated in managed code: 'Found an intrinsic not supported in managed code'; compile with /clr to generate a mixed image

1>c:\program files (x86)\boost\boost_1_47\boost\thread\win32\basic_timed_mutex.hpp(160): error C2472: 'boost::detail::basic_timed_mutex::unlock' cannot be generated in managed code: 'Found an intrinsic not supported in managed code'; compile with /clr to generate a mixed image 
```

我明白消息在说什么，但我不知道如何解决它。在项目属性中禁用公共语言运行时支持会产生大量其他错误，因此：如何将 /clr 合并到我正在使用的 Boost 库中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:01:27.713

Boost.thread 使用了一些线程本地存储调用，如果您直接将它们与 CLR 代码链接起来，这些调用将不起作用。在 VS2008 中，链接会成功，但您会在启动时崩溃——我怀疑这是 VS2010 风格的相同问题的症状。解决方法是将 boost.thread 构建为 DLL 而不是静态链接它，也许它会以这种方式为你链接......

# cmake - 使用 CMake 的参考文件

> ID：11139785
> 
> 赞同：1
> 
> 时间：2012-06-21T13:56:21.997
> 
> 标签：cmake

有没有链接特定文件的方法，以便我可以在我的代码中引用它们？我正在开发一个项目，我正在从我的代码中读取视频文件，我想像这样引用它：

```
const char* videopath = "myvideo.avi" 
```

CMake 通常在新创建的目录中构建，因此我不知道相对路径。当前的解决方法是将视频文件引用为绝对路径，例如：

```
videopath = "/home/NewProggie/Video/myvideo.avi" 
```

我想知道是否有更好的方法，使用 CMake？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T19:51:30.787

检查[`CONFIGURE_FILE`](http://cmake.org/cmake/help/v2.8.8/cmake.html#command%3aconfigure_file)！

在`CMakeLists.txt`：

```
INCLUDE_DIRECTORIES(
  ${CMAKE_CURRENT_SOURCE_DIR}
  ${CMAKE_CURRENT_BINARY_DIR}
)
SET(MY_AVI_PATH "${CMAKE_CURRENT_SOURCE_DIR}/movies/foo.avi")
CONFIGURE_FILE(${CMAKE_CURRENT_SOURCE_DIR}/avi.h.in ${CMAKE_CURRENT_BINARY_DIR}/avi.h @ONLY) 
```

在`avi.h.in`：

```
#pragma once
#define MY_AVI_PATH L"@MY_AVI_PATH@" 
```

结果`avi.h`：

```
#pragma once
#define MY_AVI_PATH L"c:\foo\dir\movies\file.avi" 
```

# eclipse - Mylyn 任务焦点用户界面

> ID：11139787
> 
> 赞同：10
> 
> 时间：2012-06-21T13:56:30.127
> 
> 标签：eclipse, mylyn

如果您使用**Mylyn**任务焦点 UI，包资源管理器会显示

```
sourceFolder/package/fileName/classTypeName/methodName 
```

对于活动任务上下文中的任何类。是否可以删除`classTypeName`并`methodName`仅显示直到其文件名的所有实体？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-06-22T09:10:53.543

我通常不需要 Java 文件中的结构，所以我只是在 Package Explorer 中完全禁用它。要做到这一点：

*   转到查看菜单（小三角形）
*   选择“过滤器”
*   检查“Java 成员”

不幸的是，这在 Project Explorer 中不起作用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T14:42:09.150

您可以取消选中“窗口 -> 首选项 -> Mylyn -> 上下文 -> 聚焦时自动展开树视图”，这可能会有所帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-13T18:44:21.473

在 Eclipse PDT 上，我使用了 Navigator View 而不是 PHP Explorer View：

*   窗口 -> 显示视图 -> 导航器

这样只显示文件名。之后，我添加了过滤器以从视图中排除文件，例如 .* 资源。

# javascript - 使用包含空格的字符串值向下拉列表添加选项导致语法错误

> ID：11139790
> 
> 赞同：1
> 
> 时间：2012-06-21T13:56:34.830
> 
> 标签：javascript, jquery

我目前有一系列链接，可以打开包含下拉菜单和输入文本框的菜单，以向下拉菜单添加新选项：

![在此处输入图像描述](../Images/8bc0e002b581c9453cd4a9b972878fc8.png)

如果我保存一个不包含空格的值（“hello”），一切正常，但如果一个值包含空格（“hello 2”），我会收到一个异常，提示“未捕获的错误：语法错误，无法识别的表达式：[value=你好 2]'

这些是我迄今为止尝试过的两种方法都没有成功：

```
$('.addSetSelect').append('<option value="' + setName + '">' + setName + '</option>'); 
```

和

```
$('.addSetSelect').append(new Option(setName, setName)); 
```

我想知道将选项元素添加到可以包含带空格的值属性的选择框的最佳方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T14:06:47.087

您可能只是遇到了字符串连接问题。这是更愚蠢的证明：

```
$('.addSelect').append($('<option></option>').val(setName).text(setName)); 
```

# sql - 如何在VB的SQL命令中使用参数“@”

> ID：11139791
> 
> 赞同：12
> 
> 时间：2012-06-21T13:56:38.390
> 
> 标签：sql, vb.net, parameters

我有这段代码可以从 VB 中的文本框中的数据更新我的 SQL 数据库。我需要使用参数，以防文本包含一个tic标记，'，或一个引号，“等。这是我所拥有的：

```
dbConn = New SqlConnection("server=.\SQLEXPRESS;Integrated Security=SSPI; database=FATP")
    dbConn.Open()

    MyCommand = New SqlCommand("UPDATE SeansMessage SET Message = '" & TicBoxText.Text & _
                                            "'WHERE Number = 1", dbConn)

    MyDataReader = MyCommand.ExecuteReader()
    MyDataReader.Close()
    dbConn.Close() 
```

这是我从网上看到的设置参数的蹩脚尝试，我不太了解。

```
dbConn = New SqlConnection("server=.\SQLEXPRESS;Integrated Security=SSPI; database=FATP")
    dbConn.Open()

    MyCommand = New SqlCommand("UPDATE SeansMessage SET Message = @'" & TicBoxText.Text & _
                                            "'WHERE Number = 1", dbConn)

    MyDataReader = MyCommand.ExecuteReader()
    MyDataReader.Close()
    dbConn.Close() 
```

你怎么做到这一点？因为如果在我运行代码时文本框中有一个 ' 标记，它就会崩溃。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2012-06-21T14:03:57.463

您在避免[Bobby Tables](http://xkcd.com/327/)的正确道路上，但您对`@`参数的理解是不完整的。

命名参数的行为类似于编程语言中的*变量*：首先，在 SQL 命令中使用它们，然后在 VB.NET 或 C# 程序中提供它们的值，如下所示：

```
MyCommand = New SqlCommand("UPDATE SeansMessage SET Message = @TicBoxText WHERE Number = 1", dbConn)
MyCommand.Parameters.AddWithValue("@TicBoxText", TicBoxText.Text) 
```

注意你的命令文本是如何变得独立的：它不再依赖于文本框中的文本值，所以用户不能通过插入他们自己的命令来破坏你的 SQL。`@TicBoxText`成为代表命令文本中值的变量的名称；调用`AddWithValue`提供值。之后，您`ExecuteReader`就可以开始了。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-06-21T14:07:55.417

这里有很多改进：

```
Using dbConn As New SqlConnection("server=.\SQLEXPRESS;Integrated Security=SSPI; database=FATP"), _
      MyCommand As SqlCommand("UPDATE SeansMessage SET Message = @Message WHERE Number = 1", dbConn)

    'Make sure to use your exact DbType (ie: VarChar vs NVarChar) and size
    MyCommand.Parameters.Add("@Message", SqlDbType.VarChar).Value = TicBoxText.Text

    dbConn.Open()
    MyCommand.ExecuteNonQuery() ' don't open a data reader: just use ExecuteNonQuery
End Using 'Using block will close the connection for you 
```

# powershell - Active Directory 新 ADObjects

> ID：11139792
> 
> 赞同：0
> 
> 时间：2012-06-21T13:56:47.663
> 
> 标签：powershell, active-directory, powershell-2.0, exchange-server

我正在构建一个 Powershell 脚本来管理通讯组和联系人。

![在此处输入图像描述](../Images/ce6fde7c0d4b949214b0e2e67ab23b5f.png)

但是当我创建一个新的通讯组时

```
function GroupAddGroup([string] $GroupName)
{
    $newGroup = New-DistributionGroup $GroupName;
    return $newGroup.Name
} 
```

我必须等待 5 到 60 秒才能访问该组（添加成员等）。

问题是：我为什么要等待？解决它的最佳方法是什么（也许有一次需要 65 秒或 300 秒......）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-23T20:16:35.873

问题可能是由于复制延迟。例如，它正在等待新创建的组复制到另一个域控制器或全局编录。请注意，通用组在复制到全局目录之前无法修改。

我自己没有尝试过，但我认为要解决问题，最简单的方法是更改​​流程中的对象创建顺序。您应该先创建联系人对象，然后再创建通讯组，而不是先创建通讯组，然后再创建联系人。在您创建通讯组时，您指定`-Members`并传入新创建的联系人对象。

如果`New-DistributionGroup`抱怨它也找不到新创建的联系人对象，那么您可以尝试的下一件事是`-DomainController`在执行`New-MailContact`and时指定要使用的域控制器`New-DistributionGroup`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-26T12:35:46.017

到目前为止，我发现了一些工作正常的东西：

```
function DistributionGroupExists([string] $Identity)
{
    $timer = [diagnostics.stopwatch]::startnew()
    while ($timer.elapsed.totalseconds -lt 30){

    if (Get-DistributionGroup $Identity){
        break
    }
    else 
    {
    start-sleep -seconds 5
    }
    }

    $timer.stop()
    if (!(Get-ADObject $Identity)){Write-host "Warning: Mailbox creation failed for $user after $($timer.elapsed.totalseconds) seconds."}
    else {write-host "Mailbox creation successful for $user in $($timer.elapsed.totalseconds) seconds"}

} 
```

# javascript - 链接的按钮按住功能

> ID：11139793
> 
> 赞同：0
> 
> 时间：2012-06-21T13:56:49.790
> 
> 标签：javascript, html

我需要帮助：我正在尝试制作一个 javascript（到目前为止运气不佳）。

我用php生成的页面上有按钮，它们应该如下工作：

如果我单击按钮的时间少于任何几秒钟，则链接将打开，就像按钮具有：onClick="self.location='url'"。否则，按钮被按住的时间超过链接应该在新选项卡中打开的任何秒数，就像按钮有：onclick="window.open('url');"

如果它也适用于链接，那就太好了。

这可能很容易做到，但我根本没有 js 知识，而且我被其他我真正知道如何做的东西淹没了，这就是我寻求你帮助的原因。我已经错过了最后期限。:(

我的目标是制作一个 php 函数来创建按钮：比如：createbutton($name,$link,$class,$delay, ... ); 不过别担心，我能做到。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:17:12.723

这里有一个例子

```
var counter= 0;
doCount=function(){
setTimeout(function(){
counter++;
},1000);
}
doFunc=function(){
if(counter>2){ 
//do something if delay is greater than 2 second
}
else{
//do something if delay is less than 2 second
}
}

document.getElementById('myBtn').mousedown = doCount;
document.getElementById('myBtn').mouseup = doFunc; 
```

试试这个代码

# javascript - 黑莓的 Socket.IO 支持

> ID：11139794
> 
> 赞同：1
> 
> 时间：2012-06-21T13:56:54.487
> 
> 标签：javascript, blackberry, socket.io

[Socket.IO](http://socket.io/)是否支持 BlackBerry OS 6 或更高版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-25T11:47:51.950

可以在 BB 6 和 BB 7 模拟器上工作，尽管我上次查看时该网站没有[提到黑莓。](http://socket.io/#browser-support)

BB 5 和 BB 4.7 不起作用，至少在我依赖 jQuery 1.7.2 的演示应用程序中不起作用。

# c# - 如何在 ASP.Net MVC3 C#4 中延迟控制器操作结果

> ID：11139796
> 
> 赞同：1
> 
> 时间：2012-06-21T13:57:00.233
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, c#-4.0, asp.net-ajax

我正在使用 MVC3、Razor、C# 4、jQuery 开发 Web 应用程序。

在一个屏幕（页面）内，我对控制器操作进行 AJAX 调用以获取一些屏幕更新。使用 Javascripts setTimeout() 我进行轮询。

为了在服务器没有屏幕更新的情况下优化此轮询，我喜欢延迟 HTTP 响应并稍等片刻，直到我 a) 获得屏幕更新或 b) 遇到一些超时（例如 10 秒左右）。

我试图做这样的事情

```
[OutputCache(Duration = 0)]
[AcceptVerbs(HttpVerbs.Get)]
public ActionResult CheckForUpdates()
{
    var startTime = DateTime.Now;
    while (_haveUpdates || DateTime.Now > startTime.AddSeconds(10   ))
    {
        Thread.Sleep(3);
    }

    return _haveUpdate ? Json(new {updates = ... }, JsonRequestBehavior.AllowGet) : null;
} 
```

在视图中，我像这样使用 Javascript / jQuery：

```
<script>
$(function () {
    scheduleNextCheck();
});

function scheduleNextCheck() {
    setTimeout(function() {
        $.ajax({
            url: "@Url.Action("CheckForUpdates")",
            dataType: 'json',
            data: null,
            timeout: 10000,
            cache: false,
            success: function(data) {
                if (data != null && data.updates != null ) {
                    // Apply Updates
                } else {
                    scheduleNextCheck();
                }
            },
            error: function() {
                scheduleNextCheck();
            }
        });
    }, 2000);
} 
```

使用此代码时，IIS7 工作进程将完全挂起/冻结，因此只有杀死工作进程才能解锁整个 IIS7 服务器。所以 Thread.Sleep() 似乎不是一个好主意。至少不是我的应用程序环境。

有人用 ASP.Net MVC 做过这样的事情吗？或者有任何想法吗？

谢谢，马克

**==== 更新：====**

发现问题之一：while 条件错误。它应该是这样的：

```
 while (noUdates && DateTime.Now < startTime.AddSeconds(10)) 
```

现在的问题是其他 AJAX 请求在此睡眠延迟循环运行时被取消。

**关于 SignalR：**必须仔细研究，但问题是这需要额外的服务器和客户端库，我必须获得批准，所以我希望有一个“简单”的小型解决方案，影响更小，培训需求更少. 但是 SignalR 仍然是下一个版本中替代轮询东西的一个选项 - 但需要首先获得一些关于这些东西的培训和经验。

**==== 更新 2：====**

我正在寻找一种无需额外库/框架即可工作的解决方案，因此我可以将其应用于几乎完成的 Web 应用程序而不会产生巨大影响。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T14:01:57.127

您可以查看专为此类情况设计的[SignalR 。](http://www.hanselman.com/blog/AsynchronousScalableWebApplicationsWithRealtimePersistentLongrunningConnectionsWithSignalR.aspx)与其让客户端通过多个 HTTP 请求轮询服务器，不如由服务器在更新可用时通知客户端。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:27:00.923

我也在用我的网站研究 SignalR，我正在阅读这篇非常好的文章：[http](http://www.dotnetcurry.com/ShowArticle.aspx?ID=780) ://www.dotnetcurry.com/ShowArticle.aspx?ID=780 。

据我了解，唯一真正的限制是浏览器版本，但 SignalR 会降级以适应旧版本。

这里也有一些信息：[http ://www.entechsolutions.com/browser-alerts-with-asp-net-4-5-and-signalr](http://www.entechsolutions.com/browser-alerts-with-asp-net-4-5-and-signalr)

# android - 我快到了...PhoneGap Android 连接到 WCF 服务

> ID：11139799
> 
> 赞同：1
> 
> 时间：2012-06-21T13:57:15.750
> 
> 标签：android, wcf, jquery, cordova, jsonp

首先，我要感谢 stackoverflow 上的所有专家，通过阅读提出的问题并查看示例代码并阅读我能够得到的答案。再一次感谢你！

我一直在花费数小时寻找解决方案，我已经阅读了很多关于这个问题的帖子。似乎这是很多其他人正在/一直在努力解决的问题。如果有人可以帮助解决这个令人沮丧的问题，我将非常感谢任何更多的建议或提示。

我所有的开发都是在我的本地机器上完成的。（Win 7，Visual Studio 11beta）

WCF 服务在其自己的端口或 IIS 7.5 (.Net Framework 4.0) 上托管在 IIS Express 中

仅具有 Html5/jQuery 的第二个 Web 应用程序托管在不同端口上的 IIS Express 中。

在我的本地机器上也使用带有 Android SDK 17 的 Eclipse 3.7.2。它似乎所有的软件都运行正常。Android Emulator 正在运行，Phonegap/Cordova 库已安装等。我正在使用带有 Cordova 1.6.0 的 Android 4.0.3

我正在寻求帮助以找出为什么我的 phonegap 模拟器 ajax 调用不会通过我的 WCF REST 服务。我现在没有实际的 android 设备来测试程序，因此我必须使用模拟器。

更多细节：

我有一个在.Net 中开发的 WCF REST 服务，以 JSON 和 JSON-P 接收和发送。

我已经在另一个端口上使用第二个 Web 应用程序对此进行了测试，以确保允许跨域调用。

我还使用了 Firefox 的 RESTclient 插件，并且可以使用它成功地进行 JSON 和 JSON-P 调用。[ [http://restclient.net/](http://restclient.net/) ] 所以我确信 WCF 服务正在正常工作。不应该有任何跨域问题。

当我使用我知道在 Visual Studio 中工作的 jQuery 获取 Html 文件时，将其复制到 phonegap 应用程序中，我尝试对我的 WCF 服务器进行基本调用，但我无法连接到服务器。

根据android文档，我已将URL从[http://localhost:50425/LoginService.svc/GetData]更改为[http://10.0.2.2:50425/LoginService.svc/GetData]：[http://developer .android.com/guide/developing/devices/emulator.html#networkaddresses]

我使用以下设置创建了一个允许所有白名单：

[访问来源=“*”]

在 cordova.xml 文件中。请参阅：[http://professionalaspnet.com/archive/2012/05/15/Whitelisting-Domains-in-Cordova-_2800_PhoneGap_2900_-Android.aspx]

根据 [http://docs.phonegap.com/en/1.8.1/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android] 在 AndroidManifest.xml 文件中设置了正确的权限

当我发起呼叫时，我使用 $.ajaxSetup 错误函数来捕获网络错误等，并显示警告错误消息。使用 console.log() 确保它通过这个函数没有错误。

当调用实际发生时，我收到“错误请求 - 主机名无效。HTTP 400。请求主机名无效。”

如果调用成功，我会在 Visual Studio 中使用断点来确定调用是否已完成并查看请求是否通过。

如果我可以访问“外部”主机，还有其他方法可以从模拟器进行测试吗？在这种情况下，要确保模拟器实际上可以找到服务？是否有任何工具或其他配置设置需要完成？

我什至删除了我的模拟器并创建了一个新模拟器，但它仍然无法连接到 WCF 服务。

我真的很想这样做，想构建一个完整的 phonegap 应用程序，但如果我无法调用 Web 服务，则无法继续。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-22T12:20:47.780

PhoneGap 实际上只是 html/css/js 网页的包装器，带有一个用于访问手机特定功能的 js 库，可以编译为多个原生移动平台应用程序。

所以这真的不是PhoneGap问题......

您说您正在使用 JQuery 查询您的 Web 服务，如果您可以在普通浏览器窗口中打开触发请求的 html 文件，并且一切正常。问题不在于代码，而在于您正在使用的模拟器，可能是一些未配置的 idk。

好的，如果仍然失败，您很可能指向错误/没有 IIS 实例。如果您有两个 IIS 实例在端口 80 上运行，那么它的行为会如何，但我认为这不会很好，我的猜测是其中一个会覆盖另一个。

因此，如果您在 IIS 1 上托管您的 Web 服务，但 IIS 2 覆盖 IIS 1，那么您将永远无法访问该 Web 服务，并得到您得到的错误。

因此，当您更改为指向另一个 IIS 实例时，它又开始工作了。

# playframework - Play 框架中的安全模块：编译错误：类型检查已定义

> ID：11139803
> 
> 赞同：1
> 
> 时间：2012-06-21T13:57:26.287
> 
> 标签：playframework

我有一个自己的安全类，派生自游戏框架的安全模块。不幸的是，我在编译项目时遇到了这个错误：

编译错误 无法编译文件 {module:secure}/app/controllers/Check.java。引发的错误是：类型检查已定义

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-08-08T15:11:55.217

当我从 application.conf 中删除这一行时，我能够修复此错误：

```
module.secure=${play.path}/modules/secure 
```

# mysql - 加载数据文件并在重复密钥更新时

> ID：11139808
> 
> 赞同：5
> 
> 时间：2012-06-21T13:57:31.147
> 
> 标签：mysql

使用 LOAD DATA INFILE 时，有没有办法获得常规 INSERT 语句的 ON DUPLICATE KEY UPDATE 提供的相同功能？

我想要做的是：对于我文件的每一行，如果该行不存在，则插入一个新行，否则更新所选字段。

我的表有 5 列：A、B、C、D 和 E。A 是主键。有时，我必须插入包含所有值的新行，但有时我只需要更新 B 和 C，例如。但是，关键是我想将所有 INSERT 或 UPDATE 重新组合在同一个文件中。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:16:42.463

如果要插入/更新某些字段，则应将数据加载到附加表中，然后使用 INSERT、UPDATE 或 INSERT...SELECT+ON DUPLICATE KEY UPDATE 语句复制/修改数据；否则其他字段将设置为 NULL。

在这种情况下，LOAD DATA INFILE 中的 REPLACE 选项对您没有帮助。

* * *

此外，您可以使用dbForge Studio for MySQL（免费快递版）中的[数据导入](http://www.devart.com/dbforge/mysql/studio/data-export-import.html)工具（CSV 格式），只需选择追加/更新导入模式并在数据导入向导中指定字段映射。

# sql - 将任何字符串转换为整数

> ID：11139809
> 
> 赞同：1
> 
> 时间：2012-06-21T13:57:32.240
> 
> 标签：sql, oracle, hash, oracle11gr2

简单地说，我希望能够将任何字符串转换为整数，最好能够限制整数的大小并确保结果始终相同。换句话说，Oracle 是否支持一个散列函数，它返回一个数值并且该值可以有最大值吗？

如果需要，为了提供一些上下文，我有两个表，它们具有以下简化格式：

```
  表 1 表 2

  编号 | 序列号 ID | 序列号
  -------- -------------
  1 | 1 1 | 2QD44561
  1 | 2 1 | 6HH00244
  2 | 1 2 | 5DH08133
  3 | 1 3 | 7RD03098
  4 | 2 4 | 8BF02466

```

该列`sequence_number`在`number(3)`表1和`varchar2(11)`表2中；它是两个表中主键的一部分。

数据由外部提供，无法更改；我相信在表 1 中它是由一个简单的序列创建的，但在表 2 中是有意义的。数据是虚构的，但具有代表性。

*有人*承诺我们会输出一个`number(3)`字段。虽然这对于第一个表中的列来说很好，但它会导致第二个表出现问题。

我希望能够转换`sequence_number`为整数（容易），小于 1000（更难）*，并且*如果可能的话是恒定的（似乎不可能）。这意味着我`'2QD44561'`想*永远*回来`586`。如果两个字符串返回相同的数字，这并不重要。

只需转换为我可以使用的整数`utl_raw.cast_to_number()`：

```
select utl_raw.cast_to_number((utl_raw.cast_to_raw('2QD44561'))) from dual;

UTL_RAW.CAST_TO_NUMBER((UTL_RAW.CAST_TO_RAW('2QD44561')))
---------------------------------------------------------
                                               -2.033E+25 
```

但正如你所见，这不少于 1000

我也一直在玩`dbms_crypto`，`utl_encode`看看我是否能想出一些东西，但我没有设法得到一个小整数。有办法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T14:16:47.587

怎么样[`ora_hash`](http://docs.oracle.com/cd/E11882_01/server.112/e17118/functions124.htm)？

```
select ora_hash(sequence_number, 999) from table_2; 
```

...将产生最多 3 位数字。你也可以用`id`我猜想它，但不确定它会增加多少价值，而且我不确定你是否想要这样。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:05:14.483

您正在谈论使用哈希函数。有很多解决方案 - sha1 很常见。

但仅供参考，当您说“限制整数的大小”时，请理解您会将无限的字符串或数字集映射到有限的值集。因此，虽然您的字符串在相同时总是会映射到相同的值，但它们不会是唯一映射到该值的字符串

# cakephp - 从表中删除多个选定项目

> ID：11139832
> 
> 赞同：3
> 
> 时间：2012-06-21T13:58:34.853
> 
> 标签：cakephp, checkbox, controller

在我的表中，我有一列，每行都有一个复选框。我希望能够删除所有选定的项目。我从这个网站上找到了代码，并为我自己的东西修改了它。 [关联](http://nuts-and-bolts-of-cakephp.com/2008/05/05/multiple-checkboxes/)

我遵循网站的复选框命名约定，如下所示：

```
<td>  <?php echo $this->Form->checkbox('LocalClocks.id.['.$LocalClock['LocalClock']['id'].']', array('value' => $LocalClock['LocalClock']['id'])); ?></td> 
```

这是我的控制器中 deleteSelected() 函数的代码：

```
 public function deleteSelected()
    {
        foreach($this->data['LocalClocks'] as $key => $value)
        {
            if($value != 0)
            {
                $this->LocalClock->del($value);
            }
        }
        $this->redirect($this->referer());
    } 
```

这是实际删除按钮的代码（以防万一需要）：

```
<?php echo $this->Form->postLink('Delete Selected', array('action' => 'deleteSelected'), array('confirm' => 'Are you sure?')); ?> 
```

有几件事我认为可能是问题：

1.  该代码是为旧版本的蛋糕编写的，我认为该网站说 1.3，但我不知道在现有代码中更新/更正什么以使其工作。
2.  删除按钮与 cakephp 网站上博客教程中的删除按钮相同。我所做的唯一更改是删除要删除的项目的 id，因为我不是删除单个项目而是删除多个项目。

任何帮助都会很棒。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T14:08:17.757

您的复选框输入应该是这样的

```
echo $this->Form->checkbox('LocalClocks.'.$LocalClock['LocalClock']['id'], array(
  'value' => $LocalClock['LocalClock']['id'],
  'hiddenField' => false
)); 
```

这将创建一个如下所示的数据数组

```
array(
  'LocalClocks' => array(
    1 => 1,
    42 => 1
  )
); 
```

并且会从数据数组中省略任何未选中的，因为我们没有使用隐藏字段。最后，只需对您的操作进行一些更改

```
public function deleteSelected()
{
    foreach($this->request->data['LocalClocks'] as $key => $value)
    {
       $this->LocalClock->delete($key);
    }
    $this->redirect($this->referer());
} 
```

我更喜欢使用`Model::delete()`to，`Model::deleteAll()`因为它运行回调，而`deleteAll`没有。

最后，您的链接实际上是一个提交按钮。这会将数据发布到控制器。

```
echo $this->Form->end('Submit'); 
```

如果要使用 ajax，请改用[JsHelper](http://api20.cakephp.org/class/js-helper#method-JsHelpersubmit)提交。下面创建了一个 Ajax 提交，它`#mytable`使用操作的结果更新 dom 元素（在本例中是您重定向到的引用者）。

```
echo $this->Js->submit('Submit', array(
  'update' => '#mytable'
));
echo $this->Form->end(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-09T12:59:10.743

一旦你得到你的复选框列表；而不是使用 foreach 循环来一一删除你的 id 试试这个：

```
$this->Model->deleteAll(array('Model.column' => array($keys))); 
```

# entity-framework - 实体框架代码优先和 CA2227“集合属性应该是只读的”

> ID：11139836
> 
> 赞同：12
> 
> 时间：2012-06-21T13:58:41.557
> 
> 标签：entity-framework, ef-code-first, code-analysis

Entity Framework Code First 中的一对多或多对多关系如下所示：-

```
public class Foo
{
  public int Id { get; set; }
  public virtual ICollection<Bar> Bars { get; set; }
} 
```

这违反了代码分析规则 2227“集合属性应该是只读的”。

使 setter 受保护无济于事，并将其设为私有：-

```
public class Foo
{
  public int Id { get; set; }
  public virtual ICollection<Bar> Bars { get; private set; }
} 
```

那么当然违反 CA1811 “Foo.Bars.set(ICollection<Bar>) 似乎没有上游公共或受保护的调用者”。

我宁愿不要在全球范围内关闭该规则，因为它存在的防止情况相当重要，但每次我想声明关系时在本地抑制它似乎是关闭的。有没有办法声明不违反 CA2227 的关系？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-03-24T20:23:08.817

将您的代码更改为以下内容：

```
public class Foo {
    public Foo() {
        Bars = new Collection<Bar>();
    }

    public int Id { get; set; }
    public virtual ICollection<Bar> Bars { get; private set; }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T14:05:04.000

将所有代码优先实体放在它们自己的程序集中，并排除该程序集的规则。

# caching - 在 Glassfish 上复制 ehcache

> ID：11139840
> 
> 赞同：1
> 
> 时间：2012-06-21T13:58:46.617
> 
> 标签：caching, glassfish, ehcache, hazelcast

恐怕我有一些关于 ehcache 的非常基本的问题。我想在没有任何重要基础设施的集群 Glassfish 上使用缓存机制。据我所知，使用带有 ehcache 的分布式缓存意味着我必须使用 terracotta 服务器阵列，不是吗？

我在缓存方面没有那么丰富的经验，所以我可以在集群 glassfish 上使用 ehcache，我只需将一些 JAR 放入 Glassfish 的类路径或将 WAR 或其他东西部署到 Glassfish 上，就是这样？我是否必须使用外部缓存服务器？

ehcache 中的复制缓存不需要兵马俑服务器阵列，是吗？

我想在商店中存储一个 Java Map 对象，该对象将经常更改。据我所知，在这种情况下，复制缓存不是最佳选择。Hazelcast 分布式缓存需要任何外部缓存服务器吗？非常感谢您提前提供的帮助！祝您有愉快的一天，专家们！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-22T07:09:47.587

如果您正在运行 Java，Hazelcast 不需要任何外部服务器。基本上将 hazelcast.jar 添加到您的类路径中。并从您的应用程序中创建一个 Hazelcast 实例：

```
HazelcastInstance hazelcast = Hazelcast.newHazelcastInstance(new Config()); 
```

然后得到一个分布式地图：

```
Map map = hazelcast.getMap("myMap"); 
```

而已。在此示例中，我提供了使用多播来发现节点的默认配置。您可以更新和更改任何参数。

有关更多信息，请参阅[快速入门教程](http://hazelcast.com/docs/2.1/manual/single_html/#GettingStarted)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-22T12:40:18.650

Ehcache 中的复制功能不需要任何服务器。您只需将 Ehcache jar 添加到您的 Web 应用程序并配置 Ehcache 以复制到所有集群节点。您可以选择是否使用多播自动发现所有 GlassFish 节点，或者您可以手动告诉 Ehcache 在哪里可以找到其他节点。您可以在此处找到 Ehcache 复制配置说明：http: [//ehcache.org/documentation/replication/rmi-replicated-caching#configuring-the-peer-provider](http://ehcache.org/documentation/replication/rmi-replicated-caching#configuring-the-peer-provider)

Hazelcast 的工作原理类似。有关文档，请参见此处：http: [//hazelcast.org/docs/3.0/manual/html/ch12s02.html](http://hazelcast.org/docs/3.0/manual/html/ch12s02.html)

# mysql - MySQL 仅在特定 IP 地址上阻止对除几个数据库之外的所有数据库的访问

> ID：11139844
> 
> 赞同：0
> 
> 时间：2012-06-21T13:58:55.757
> 
> 标签：mysql

所以，几天前，我们的 MySQL 主实例开始阻止我访问除几个数据库之外的所有数据库，但只有在从特定 IP 地址连接时。从任何其他 IP 地址连接时，我可以连接并查看所有数据库，并且在连接到从属实例时，我可以连接并查看所有数据库。无论如何，凭据都是相同的。我从来没有见过这样的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:06:08.860

要访问所有数据库，您需要以特权用户身份运行这些命令（例如在机器本身上）：

```
grant all privileges on *.* to YOUR_USER_ID@REMOTE_IP_ADDRESS_YOU_WANT_TO_BE_ALLOWED;
flush privileges; 
```

要获取 YOUR_USER_ID@REMOTE_IP_ADDRESS_YOU_WANT_TO_BE_ALLOWED，请运行 select user(); 命令。这将让您知道您是如何访问数据库的，您可以相应地授予权限

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:01:19.080

我认为你想要开始探索这个问题是：

[http://dev.mysql.com/doc/refman/5.0/en/show-grants.html](http://dev.mysql.com/doc/refman/5.0/en/show-grants.html)

```
show grants for 'user'@'host'; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-22T14:52:46.113

尝试运行此脚本

全部授予*。*to user@'%' IDENTIFIED BY 'password';

它将允许您从任何 IP 地址和任何机器访问并访问所有数据库。

祝你好运 ：）

# facebook - 在我的应用设置中看不到“增强的身份验证对话框”设置

> ID：11139852
> 
> 赞同：3
> 
> 时间：2012-06-21T13:59:25.597
> 
> 标签：facebook, dialog, facebook-apps, facebook-authentication

我似乎找不到像[文档建议](http://developers.facebook.com/docs/opengraph/authentication/)的选项“增强的身份验证对话框” ，它根本没有在“高级”下列出我需要在我的应用程序设置中配置任何其他内容才能获得此选项吗？

![在此处输入图像描述](../Images/0cb36c8f7d1334e6fc655b33f46d92eb.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:05:45.187

它会自动打开，如此[处](https://developers.facebook.com/blog/post/633/)所述：

> 2012 年 2 月 1 日，所有应用都将启用改进的对话框，但那些尚未完全配置其对话框的应用可以在 2 月 15 日之前禁用开发者应用中的设置，届时将为所有应用启用该设置。

# javascript - 用 jQuery 找到 IE7 问题？

> ID：11139873
> 
> 赞同：1
> 
> 时间：2012-06-21T14:00:09.890
> 
> 标签：javascript, jquery, internet-explorer-7

在我开始使用 IE9.js 文件之前，以下代码在 IE7 中运行良好。IE9.js 文件向我添加的已经存在的类添加了一个附加类“ie7_class82”。下面的代码在 IE7 中停止工作。当存在多个类时，是否存在无法使用 jQuery 找到匹配类的已知问题？

--------------HTML代码骨架-------------

```
<table cellspacing="0" cellpadding="0" bgcolor="#FFF" width="100%">
    <thead>
        ---table rows here---- 
    </thead>
    <tbody>
    <tr>
    <td>
<table cellspacing="0" border="0" width="100%" style="float:left">
    <thead>
      <tr style="text-align:left;">
        <td style="font-size:14px;font-weight:bold;text-align:left;padding:10px 5px">
                <span><label class="quarterly">Quarterly</label></span>
                <span style="padding:5px">|</span>
                <span><label class="monthly">Monthly</label></span>
                 <span style="padding:5px">|</span>
                <span><label class="daily">Daily</label></span>
        </td>
      </tr>
    </thead>
    <tbody>

     ---table rows here----     
      </tbody>
      </table>
      </td>
     </tr> 
     <tr>
    <td>
    <table cellspacing="0" border="0" width="100%" style="float:left" class="quarterly">
    ---table rows here---
    </table>
    </td>
    </tr>
    <tr>
    <td>
    <table cellspacing="0" border="0" width="100%" style="float:left" class="monthly">
    ---table rows here---
    </table>
    </td>
    </tr>
    <td>
    <table cellspacing="0" border="0" width="100%" style="float:left" class="daily">
    ---table rows here---
    </table>
    </td>
    </tr>
    </tbody>
    </table>
    </td>
    </tr>
    </table> 
```

----------jQuery代码-------------

```
 $('table thead span label').click(function() {               
        $(this).parents('table').parents('table').find('table').hide();
        $(this).closest('table').find('tbody tr').hide();           
        $(this).closest('table').show();
        $(this).closest('table').find('tbody tr.' + this.className).show();
        $(this).parents('table').parents('table').find('table.' + this.className).show();
    });​ 
```

注意：不幸的是，IE7 中没有错误（在 FF 和 Chrome 中运行良好）。它应该隐藏所有表并仅显示与标签标签中存在的类名匹配的表。IE7 隐藏所有表，但无法显示与该类匹配的表。

更新的代码（在 IE7 中工作，感谢 SO）：

```
$('table thead span label').click(function() {  
                        var classSelector = $.trim($(this).attr('class')).split(/\s+/g).join(',');  
                        $('label:not('+classSelector+')').css('color','#00425f');       
                        $(this).css('color','#d6c9b9');                     
                        $(this).parents('table').parents('table').find('table').hide();                     
                        $(this).closest('table').find('tbody tr').hide();                       
                        $(this).closest('table').show();
                        $(this).closest('table').find('tbody tr.' + classSelector).show();
                        $(this).parents('table').parents('table').find('table.'+ classSelector).show();
            }); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:18:13.370

`this.className`返回实际`class`属性，在 ie7 的情况下，由于 ie9.js 文件，该属性包含多个类。
这意味着像您使用的选择器：

```
'table.' + this.className 
```

将被翻译成：

```
'table.yourClassName ie7_class82' 
```

这不是有效的 jquery（或 css）选择器。

我建议你`this.className`用类似的东西替换：

```
var classSelector = $.trim($(this).attr('class')).split(/\s+/g).join('.'); 
```

意思就是 ：

```
'table.' + classSelector 
```

将被翻译成：

```
'table.yourClassName.ie7_class82.some-other-classes-if-any' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:18:01.103

就像提到的一条评论一样，如果有多个类，`'tbody tr.' + this.className`将生成一个无效的选择器。`this`

这有点令人困惑，为什么你试图获得一个类等于你点击的标签的行。或许可以看看 jQuery 的 DOM 导航方法。特别是父母和父母：

[http://api.jquery.com/parent/](http://api.jquery.com/parent/)

[http://api.jquery.com/parents/](http://api.jquery.com/parents/)

如果您绝对必须做您想做的事情，那么解决方法是将空格替换为`this.className`. 所以你可以修改你的代码来做到这一点：

```
'tbody tr.' + this.className.replace(/ /g,'.') 
```

# android - Android：检查应用程序何时安装成功

> ID：11139874
> 
> 赞同：2
> 
> 时间：2012-06-21T14:00:11.333
> 
> 标签：android, installation

如何检查android中的应用程序是否已成功安装？除了有没有办法

```
private boolean isInstalled(String pack) {
    PackageManager pm = getPackageManager();
    boolean app_installed = false;
    try {
        pm.getPackageInfo(pack, PackageManager.GET_ACTIVITIES);
        app_installed = true;
    } catch (PackageManager.NameNotFoundException e) {
        app_installed = false;
    }
    return app_installed;
} 
```

# javascript - 总结一个 javascript 字符串数组

> ID：11139881
> 
> 赞同：1
> 
> 时间：2012-06-21T14:00:33.383
> 
> 标签：javascript, html, unobtrusive-javascript

我在 javascript 中声明了一个可变长度的字符串数组，其中包含 Dungeons and Dragons 类名。下面是一个例子：

```
var class_names = new Array("Wizard", "Wizard", "Wizard", "Sorcerer", 
    "Sorcerer", "Ultimate Magus"); 
```

在我的 HTML 中，我使用 javascript`window.onload`函数从 javascript 文件中设置各种变量，以构建在本地显示的页面内容。

对于名称之类的东西，这很容易：

```
document.getElementById('charname').innerHTML = name[0]; 
```

但是对于班级信息，我不想只是抽出一大串班级名称，我希望它浓缩下来。使用上面的示例“class_names”，我想得到一个如下所示的字符串：

“巫师 3，巫师 2，终极魔术师 1”

即每个类名后面的数字应该是在数组中找到的重复次数。

任何人都知道如何即时实现这一点，所以当我更改 javascript 文件以向 class_names 添加更多类数据时，它会正确显示在我的 HTML 页面上吗？

提前感谢我在这个宠物项目上获得的任何帮助（即为我的竞选活动中的每个角色创建一个 HTML 页面，可以打印为一个角色表......这比手动为每个角色编写一个页面要好得多，或者手写在香草纸上）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:05:30.113

这很容易，只需遍历数组并计算重复次数。

```
var l = class_names.length, i, tmp = {}, ret = [];
for( i=0; i<l; i++) {
    if( !tmp[class_names[i]]) tmp[class_names[i]] = 0;
    tmp[class_names[i]]++;
}
for( i in tmp) {
    if( tmp.hasOwnProperty(i)) {
        ret.push(i+" "+tmp[i]);
    }
}
// output is ret.join(", "); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:14:39.833

我认为有很多方法可以解决您的问题...

可能性 A：

1.  如果您不知道这些类是否以正确的顺序出现，请先尝试对您的 Array 进行排序，以确保它们被正确分组。
2.  遍历数组并计算重复次数，即如果 lastElement === class_names[i] 则增加您的计数器，并将最后一个类名的结果附加到结果字符串，否则将计数器设置回 1。

可能性 B：将您的数组直接存储为 ["Wizard", 3, "Sorcerer", 2, ...] - 这是可能的，因为 JS 不要求数组在每个位置包含相同类型的元素。

可能性 C：使用不同的结构，例如使用对象：var class_names = [{name: "Wizard", level: 3}, {name: "Sorcerer", level: 2}, ...]

# c# - 我想要一个带有上一个和下一个按钮的 asp.net 选项卡控件

> ID：11139883
> 
> 赞同：0
> 
> 时间：2012-06-21T14:00:39.867
> 
> 标签：c#, jquery, asp.net

我想要一个标签控件，它有 4 个标签。在第一个选项卡的内容中，将有一个名为“下一步”的按钮。单击“下一步”，它应该转到第二个选项卡或切换到第二个选项卡。类似地，第二个选项卡将具有“上一个”和“下一个”按钮，它们将分别切换到第一个和第三个选项卡。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:07:07.240

正如 Esen 在评论中建议的那样，您可以考虑查看向导控件：[演练：ASP.Net 中的向导控件](http://weblogs.asp.net/sreejukg/archive/2012/01/21/walkthrough-wizard-control-in-asp-net.aspx)

如果您向用户提供类似向导的体验，我不建议使用选项卡控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:02:35.467

这是你在 [http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/Tabs/Tabs.aspx之后的样子吗](http://www.asp.net/ajaxlibrary/AjaxControlToolkitSampleSite/Tabs/Tabs.aspx)

# python - Python：列表理解语句中的语法错误

> ID：11139884
> 
> 赞同：-1
> 
> 时间：2012-06-21T14:00:41.310
> 
> 标签：python

```
missing_buckets = [x in timebuckets if ((x not in found_tenors) and (x == '1y' or x[-1] != 'y'))] 
```

我得到错误：

```
missing_buckets = [x in timebuckets if ((x not in found_tenors) and (x == '1y' or x[-1] != 'y'))]
                                                                                                ^
SyntaxError: invalid syntax 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-06-21T14:02:09.107

```
missing_buckets = [x for x in timebuckets if ((x not in found_tenors) and (x == '1y' or  x[-1] != 'y'))]
                   ^^^^^ 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-06-21T14:04:19.213

你忘记了“for x in”：

`missing_buckets = [x for x in timebuckets if ((x not in found_tenors) and (x == '1y' or x[-1] != 'y'))]`

# c - 使用 C 减少使用 R 中的结构的参数数量

> ID：11139907
> 
> 赞同：2
> 
> 时间：2012-06-21T14:02:06.593
> 
> 标签：c, r

我想创建某种结构来减少从 R 文件调用的参数数量。

在我的 R 文件（example.R）中，我有类似的内容：

```
 ret <- .Call("example", 

        ## data
    as.double  (t(x)),
    as.integer (nr), 
    as.integer(ncol(x)),
    as.double  (y),
    as.integer (nclass),
    as.integer (cross),
        .....
) 
```

然后我的接口 C 文件看起来像：

```
SEXP example(SEXP x, SEXP rows, SEXP cols, 
      SEXP y, SEXP nclass, SEXP cross, SEXP sp_rows)
{
  PROTECT( x      = AS_NUMERIC( x      ) );
  PROTECT( y      = AS_NUMERIC( y      ) );

  PROTECT( cross  = AS_INTEGER( cross  ) );
  PROTECT( rows   = AS_INTEGER( rows   ) );
  PROTECT( cols   = AS_INTEGER( cols   ) );
  PROTECT( nclass = AS_INTEGER( nclass ) );
  PROTECT( sp_rows  = AS_INTEGER( sp_rows  ) );

  x_matrix = NUMERIC_POINTER(x);
  y_vector = NUMERIC_POINTER(y);

  int num_rows = INTEGER_VALUE(rows);
  ..... 
```

这个想法是在 .R 文件中创建某种结构，以便我可以读取 .C 文件中的参数。因为需要的参数数量可能会增加，所以代码的人类可读性会急剧下降。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:09:55.297

这是[RcppExamples](http://cran.r-project.org/package=RcppExamples)包中的一个示例：

```
RcppExport SEXP newRcppParamsExample(SEXP params) {

    try {                                       // or use BEGIN_RCPP macro

        Rcpp::List rparam(params);              // Get parameters in params.
        std::string method   = Rcpp::as<std::string>(rparam["method"]);
        double tolerance     = Rcpp::as<double>(rparam["tolerance"]);
        int    maxIter       = Rcpp::as<int>(rparam["maxIter"]);
        Rcpp::Date startDate = Rcpp::Date(Rcpp::as<int>(rparam["startDate"])); 

        Rprintf("\nIn C++, seeing the following value\n");
        Rprintf("Method argument    : %s\n", method.c_str());
        Rprintf("Tolerance argument : %f\n", tolerance);
        Rprintf("MaxIter argument   : %d\n", maxIter);
        Rprintf("Start date argument: %04d-%02d-%02d\n",
                startDate.getYear(), startDate.getMonth(), startDate.getDay());

        return Rcpp::List::create(Rcpp::Named("method", method),
                                  Rcpp::Named("tolerance", tolerance),
                                  Rcpp::Named("maxIter", maxIter),
                                  Rcpp::Named("startDate", startDate),
                                  Rcpp::Named("params", params));  

    } catch( std::exception &ex ) {             // or use END_RCPP macro
        forward_exception_to_r( ex );
    } catch(...) {
        ::Rf_error( "c++ exception (unknown reason)" );
    }
    return R_NilValue; // -Wall
} 
```

这是来自 R 的匹配调用：

```
RcppParamsExample <- function(params,
                              api=c("classic", "new")) {

    api <- match.arg(api)               # match to classic or new
    fun <- paste(api, "RcppParamsExample", sep="")

    ## Check that params is properly set.
    if (missing(params)) {
        cat("\nIn R, setting default argument for params\n")
        params <- list(method='BFGS',
                       tolerance=1.0e-8,
                       maxIter=1000,
                       startDate=as.Date('2006-7-15'))
    }

    ## Make the call...
    val <- .Call(fun,
                 params,
                 PACKAGE="RcppExamples")

    val
} 
```

# java - 棋盘游戏 AI 中的对象池化

> ID：11139910
> 
> 赞同：-2
> 
> 时间：2012-06-21T14:02:10.280
> 
> 标签：java, algorithm, artificial-intelligence, object-pooling

我被要求创建一个棋盘游戏 AI（该游戏与跳棋非常相似）。到目前为止，我用一个位板完成了 NegaScout 的基本实现，并且在 5 秒内，我可以达到 10 个半层深度。游戏的类别在于 EXPTIME-complete。换句话说，整个宇宙中的运动几乎比原子还多。NegaScout 帮助我减少了这个数字，但我仍然需要处理大量可能的动作。

我的板已经是静态的，具有执行/撤消功能。但是对于每个新的板配置，我都需要生成所有允许的移动，即使我的课程很简单，它也会花费很多时间：

```
public class Move
{
    private final byte startIndex;
    private final byte endIndex;
    private byte endPawn;
    public Move(final byte start,final byte end){startIndex = start; endIndex = end;}
    public final void setEndPawn(byte pawn){endPawn = pawn;}
    //OTHER FUNCTIONS.. (ONLY FOR DISPLAY/DEBUG)
} 
```

所以我有两个问题。

FIRST = 对象池（在移动中）会提高我的性能吗？

Second = if(FIRST) then 你能告诉我如何实现它吗？（链接和小代码示例将非常感激！！）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:20:12.667

> 对象池（在移动中）会提高我的性能吗？

对象池通常用于*尝试** 以提高性能。它是否*真的*能成功提高性能完全是另一回事。

如果你在一个拥有大量内存和一个不错的垃圾收集器的平台上运行，那么丢弃一个对象并创建一个新对象通常会比尝试回收更快。这实际上取决于初始化对象的成本。

如果您的平台速度较慢或内存有限，则等式可能会倾向于对象池。但是，缺点是内存池会使您的代码更加复杂。此外，您需要防止池成为一种内存泄漏。

总而言之，我建议不要实施内存池，直到你得到一些硬分析数据表明它可能会有所帮助。

参考：

*   [对象池设计模式](http://en.wikipedia.org/wiki/Object_pool_pattern)

# c# - C# if else 异常

> ID：11139912
> 
> 赞同：5
> 
> 时间：2012-06-21T14:02:14.687
> 
> 标签：c#, reflection, reflection.emit, il, system.reflection

我正在尝试通过 System.Reflection 和 System.Reflection.Emit 使 if-else 在 IL 中工作。这是我目前拥有的代码：

```
Label inequality = new System.Reflection.Emit.Label();
Label equality = new System.Reflection.Emit.Label();
Label end = new System.Reflection.Emit.Label();
var method = new DynamicMethod("dummy", null, Type.EmptyTypes);
var g = method.GetILGenerator();
g.Emit(OpCodes.Ldstr, "string");
g.Emit(OpCodes.Ldstr, "string");
g.Emit(OpCodes.Call, typeof(String).GetMethod("op_Equality", new Type[]{typeof(string), typeof(string)}));
g.Emit(OpCodes.Ldc_I4, 0);
g.Emit(OpCodes.Ceq);
g.Emit(OpCodes.Brtrue_S, inequality);
g.MarkLabel(inequality); //HERE it throws exception
g.Emit(OpCodes.Ldstr, "Specified strings are different.");
g.Emit(OpCodes.Call, typeof(Console).GetMethod("WriteLine", new Type[]{typeof(string)}));
g.Emit(OpCodes.Br_S, end);
g.Emit(OpCodes.Brfalse_S, equality);
g.MarkLabel(equality);
g.Emit(OpCodes.Ldstr, "Specified strings are same.");
g.Emit(OpCodes.Call, typeof(Console).GetMethod("WriteLine", new Type[] { typeof(string) }));
g.Emit(OpCodes.Br_S, end);
g.MarkLabel(end);
g.Emit(OpCodes.Ret);

var action = (Action)method.CreateDelegate(typeof(Action));
action();

Console.Read(); 
```

现在，在我标记标签的地方，它抛出了这个异常：

你调用的对象是空的。

![我的例外。](../Images/173617b37cbe9b662adf60d5384a4254.png)

但我认为这是愚蠢的，因为该标签与新的 Label 对象相关联。有谁知道我该如何解决这个问题？谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-06-21T14:04:47.120

你不需要`Label whatever = g.DefineLabel();`在你定义之后定义你的标签`g`吗？

# ajax - Ajax.ActionLink(...) 带复选框

> ID：11139920
> 
> 赞同：2
> 
> 时间：2012-06-21T14:03:03.990
> 
> 标签：ajax, asp.net-mvc-3

```
Ajax.ActionLink("Link name",....) 
```

可以用复选框代替“链接名称”吗？

如果是这样怎么办？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:18:34.090

是的，当然这是可能的。您可以使用标准复选框：

```
@Html.CheckBoxFor(
    x => x.Foo, 
    new { 
        data_url = Url.Action("SomeAction", "SomeController"), 
        id = "mycheckbox" 
    }
) 
```

然后在您单独的 javascript 文件中使用 jQuery 订阅此复选框的更改事件并不显眼地对其进行 AJAXify：

```
$(function() {
    $('#mycheckbox').change(function() {
        var data = {};
        data[$(this).attr('name')] = $(this).is(':checked');

        $.ajax({
            url: $(this).data('url'),
            type: 'POST',
            data: data,
            success: function(result) {
                // TODO: do something with the result    
            }
        });
    });
}); 
```

# php - 显示列名和值

> ID：11139931
> 
> 赞同：1
> 
> 时间：2012-06-21T14:03:49.810
> 
> 标签：php, mysql

我想在 PHP 页面中显示列名和值。

```
while($get_info = mysql_fetch_row($orderdetails))
{
    foreach ($get_info as $field)
    {
        echo "<td>" . $field . "</td>";
    }

    echo '</tr>';
} 
```

这仅获取值。我如何也显示列名？

列名是`order_id`, `productid`, `product_discount`, `amount`, `customerid`, `order_date`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T14:05:19.857

```
while($get_info=mysql_fetch_array($orderdetails))
{
    foreach ($get_info as $key => $val)
        {
            echo "<td>" .$key. ': ' . $val . "</td>";
        }
            echo '</tr>';
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-06-21T14:05:29.060

您只是缺少 foreach 中的密钥：

```
while($get_info=mysql_fetch_assoc($orderdetails))
{
    foreach ($get_info as $field => $value)
    {
        echo "<td>" .$field.': '.$value."</td>";
    }
    echo '</tr>';
} 
```

您可能需要查看您的 foreach php 文档以获取更多信息：

[http://php.net/manual/en/control-structures.foreach.php](http://php.net/manual/en/control-structures.foreach.php)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-06-21T14:06:09.653

如果您希望每个字段都包含列名，请将其更改为`mysql_fetch_array`并执行以下操作：

```
foreach($get_info as $key => $value) {
    echo "<td>$key: $value</td>";
} 
```

如果您希望列名位于表格的顶部，您可以检查第一行（如果您确定表格不会为空）：

```
$first = true;

while($get_info = mysql_fetch_assoc($orderdetails)) {
    echo '<tr>';

    if($first) {
        $first = false;

        foreach(array_keys($get_info) as $columnName) {
            echo '<th>' . $columnName . '</th>';
        }

        echo '</tr><tr>';
    }

    foreach($get_info as $field) {
        echo '<td>' . $field . '</td>';
    }

    echo '</tr>';
} 
```

如果您*不确定*该表是否至少包含一个元素，我会使用第二个`DESCRIBE`查询。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-06-21T14:07:42.863

```
 while ($get_info=mysql_fetch_assoc($orderdetails))
    {
        foreach ($get_info as $columnName => $field)
            {
                echo "<td>$columnName: $field</td>";
            }
                echo '</tr>';
    } 
```

请注意，我正在使用 mysql_fetch_assoc() 来获取以列名作为键的行。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T14:13:00.440

```
<?php
 while($get_info=mysql_fetch_array($orderdetails))
 {
    foreach ($get_info as $key => $val)
    {
        echo "column is " .$key. 'and value is  ' . $val ;
    }
        echo '</br>';
  }

     ?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-06-21T14:22:00.053

很多人都在使用 key => val 演示，但是您的代码将起作用，只是您的 $field 现在是一个键，因此您需要告诉它要查看的列。

回声时就走

```
echo "<td>" . $field->column . "</td>"; 
```

那应该行得通。

# matrix - 计算矩阵乘积AXA'的有效方法？

> ID：11139933
> 
> 赞同：7
> 
> 时间：2012-06-21T14:03:50.353
> 
> 标签：matrix, matrix-multiplication, blas

我目前正在使用 BLAS 函数 DSYMM 进行计算`Y = AX`，然后使用 DGEMM计算`YA'`，但我想知道是否有更有效的方法来计算矩阵乘积 AXA ^T，其中 A 是任意`n×n`矩阵，X 是对称`n×n`矩阵？

# android - 如何解决 JSON 异常？

> ID：11139938
> 
> 赞同：0
> 
> 时间：2012-06-21T14:04:23.843
> 
> 标签：android, json

使用 JSON 时出现以下异常。

```
06-21 18:59:43.418: W/System.err(682): org.json.JSONException: Value null at PunchTime of type org.json.JSONObject$1 cannot be converted to JSONObject
06-21 18:59:43.428: W/System.err(682):  at org.json.JSON.typeMismatch(JSON.java:96)
06-21 18:59:43.428: W/System.err(682):  at org.json.JSONObject.getJSONObject(JSONObject.java:573)
06-21 18:59:43.428: W/System.err(682):  at com.android.epay.TestClass1.getEmployeeList(TestClass1.java:281)
06-21 18:59:43.428: W/System.err(682):  at com.android.epay.TestClass1$GroupPunch_task.doInBackground(TestClass1.java:214)
06-21 18:59:43.438: W/System.err(682):  at com.android.epay.TestClass1$GroupPunch_task.doInBackground(TestClass1.java:1)
06-21 18:59:43.438: W/System.err(682):  at android.os.AsyncTask$2.call(AsyncTask.java:185)
06-21 18:59:43.438: W/System.err(682):  at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
06-21 18:59:43.438: W/System.err(682):  at java.util.concurrent.FutureTask.run(FutureTask.java:137)
06-21 18:59:43.438: W/System.err(682):  at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1068)
06-21 18:59:43.448: W/System.err(682):  at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:561)
06-21 18:59:43.448: W/System.err(682):  at java.lang.Thread.run(Thread.java:1096) 
```

我的代码是..

```
j_obj = new JSONObject(responseBody);
JSONArray sites = j_obj.getJSONArray("details");
String date_new = null;
for (int i = 0; i < sites.length(); i++) {
    JSONObject list_obj = sites.getJSONObject(i);
    JSONObject type = list_obj.getJSONObject("****");
    JSONObject time = type.getJSONObject("@@@@@");
    String name = list_obj.getString("#####");
    String id = list_obj.getString("id");
    String _no = list_obj.getString("num");
    String type = type.getString("type");

    if (punchtime == null || punchtime.equals("")) {
        date_new = "Null Values";

    } else {

        year = time.getString("Year");
        month = time.getString("Month");
        day = time.getString("Day");
        hours = time.getString("Hours");
        minutes = time.getString("Minutes");
        seconds = time.getString("Seconds");
        millisec = time.getString("Milliseconds");
        date_new = month + "-" + day + "-" + year + " " + hours + ":" + minutes + ":" + seconds + ":" + millisec;
        System.out.println("New Date " + date_new);
    }

    _arrayList.add(id);
    arryList.add(name);
    _arrayList.add(_no);
    punchType_arrayList.add(type);
    punchTime_arrayList.add(date_new);

}

System.out.println("----------------------------------------");

} finally {
    httpclient.getConnectionManager().shutdown();
}
} 
```

为什么我收到此错误？我用了if else，还是有同样的问题。我搜索了很多网站，但我没有得到答案。请帮忙 ...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:15:18.073

这里有几件事：

```
 if (punchtime == null || punchtime.equals("")) {
    date_new = "Null Values";
    punchtime.getString(date_new);
 } 
```

如果这个 if 语句的第一个条件得到满足，你认为这里会发生什么？它将为空。对 null 对象调用方法会给您一个 NullPointerException。

其次，您可以发布您要解析的 JSON 字符串吗？JSON 字符串中可能存在错误。

# sql - 使用 Java 和 Jersey API 的 REST Web 服务：无法从数据库读取数据

> ID：11139940
> 
> 赞同：1
> 
> 时间：2012-06-21T14:04:27.230
> 
> 标签：sql, eclipse, rest, jersey

我正在使用 Java 和 Jersey API 创建一个 REST Web 服务。基本的 REST 服务工作正常，但是当我添加数据库连接时，它给了我一个找不到类的异常和一个 SQL 异常 - 找不到驱动程序。我在 Eclipse 构建路径中包含了 ojdbc6.jar 文件。如果我创建一个 Java 应用程序，则使用相同的代码运行良好。我在下面添加了我的代码。有人可以提出一些建议吗？编辑：我将 jar 文件包含在 WEB-INF lib 目录中。但是当我尝试执行代码时，出现以下错误：HTTP Status 405 - Method Not Allowed

```
public class Note {

    private int noteId;
    private String content;
    private Date createdDate;

    public Note() {}

    public Note(int noteId, String content, Date createdDate) {
        this.noteId = noteId;
        this.content = content;
        this.createdDate = createdDate;
    }

    public int getNoteId() {
        return noteId;
    }

    public void setNoteId(int noteId) {
        this.noteId = noteId;
    }

    public String getContent() {
        return content;
    }

    public void setContent(String content) {
        this.content = content;
    }

    public Date getCreatedDate() {
        return createdDate;
    }

    public void setCreatedDate(Date createdDate) {
        this.createdDate = createdDate;
    }
    @Override
    public String toString() {
        return "Note [content=" + content + ", createdDate=" + createdDate
                + ", noteId=" + noteId + "]";
    }
}

public class NoteDAO {

    DatabaseAccess data;
    Connection connection;

    public NoteDAO()
    {
        try {
            data = new DatabaseAccess();
            connect();
        } catch (SQLException e) {
            e.printStackTrace();
        }
    }

    private void connect() throws SQLException
    {
        try
        {
            data.connect();
            connection = data.connection;
        }
        catch (SQLException e)
        {
            e.printStackTrace();
        }
    }

    public Note getNoteById(int id) 
    {
        PreparedStatement prepStmt = null;
        try {
            String cSQL = "SELECT * FROM NOTE WHERE NOTEID = 12 ";
            prepStmt = connection.prepareStatement(cSQL);
            prepStmt.setInt(1, id); 
            ResultSet result = prepStmt.executeQuery();
            Note note = new Note();
            while (result.next())
            {
                note.setNoteId(result.getInt(1));
                note.setContent(result.getString(2));
                note.setCreatedDate( (Date) new java.util.Date(result.getDate(3).getTime()));
            }
            return note;
        } catch (SQLException e) {
            e.printStackTrace();
            prepStmt = null;
            return null;
        }
    }

}
@Path("/notes")
public class Notes {

    @Context
    UriInfo uriInfo;
    @Context
    Request request;

    NoteDAO dao = new NoteDAO();

    @Path("{note}")
    @GET
    @Produces(MediaType.APPLICATION_XML)
    public Note getNote(
            @PathParam("note") String idStr) {
        int id = Integer.parseInt(idStr);

        Note note = dao.getNoteById(id);
        if(note==null)
            throw new RuntimeException("Get: Note with " + id +  " not found");
        return note;
    }

public class DatabaseAccess {

    Connection connection = null;

    public void connect() throws SQLException
    {
        String DRIVER = "oracle.jdbc.driver.OracleDriver";
        String URL = "jdbc:oracle:thin:@xx.xxx.xx.xxx:1521:XXXX";
        String UserName = "username";
        String Password = "password";
        try
        {
            Class.forName(DRIVER);
        }
        catch (ClassNotFoundException e)
        {
            e.printStackTrace();
        }
        try
        {
            connection = DriverManager.getConnection(URL,UserName,Password);
        }
        catch (SQLException e)
        {
            e.printStackTrace();
        }
    }
    public void disconnect() throws SQLException
    {
        connection.close();
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T14:17:41.800

如果您使用由应用程序服务器管理的数据源，则需要将`ojdbc6.jar`库放在`lib`应用程序服务器的文件夹中。

例如，在 JBoss 上，它将是`$JBOSS_HOME/server/default/lib`.

这是必需的，因为在这种情况下，数据源是在服务器启动时构建的，并且独立于您的应用程序，这意味着服务器不能使用您的应用程序 JAR。

但是，如果您自己汇集连接，则需要确保连接`ojdbc6.jar`位于`lib`应用程序`WAR`存档的文件夹中。

# c++ - 析构函数在应用程序退出时重新运行

> ID：11139941
> 
> 赞同：-2
> 
> 时间：2012-06-21T14:04:27.190
> 
> 标签：c++, destructor

我有这一课：说“ `InterClass`”。此类声明`MainClass`为：

在`MainClass.h`：

```
public:
    InterClass *m_pInterClass; 
```

在 MainClass 的构造函数中：

```
m_pInterClass = new InterClass(this); 
```

我想在InterClass中使用MainClass的一些功能，所以传入`this`构造函数。我将它分配给一个全局指针并在课堂上的任何地方使用它。

一切正常，`main()`直到结束。

我的代码的最后几行是：

```
delete MainClass;
OutputDebugString("Exiting Application");
return 0; 
```

我的应用程序在“”处崩溃，`return 0`我将 OutputDebugString() 放在代码中的任何地方。我缩小范围是：在DebugView-我可以看到“InterClass”的析构函数被执行，然后“退出应用程序”，然后再次执行“InterClass”的析构函数。我很困惑为什么 InterClass 的析构函数被执行两次？那要在`return 0;`

由于此应用程序的性质，我无法在此应用程序中放置断点。

PS 我是一名嵌入式 C 程序员，对 C++ 完全陌生（被迫在 PC 应用程序上工作：（）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-06-21T14:13:46.700

显然，这有不遵守**[三法则的](https://stackoverflow.com/questions/4172722/what-is-the-rule-of-three)**味道。
您的类***Copy 构造函数***和***Copy 赋值运算符***应该对动态分配的成员指针进行深层复制。如果没有，那么你一定会看到你得到的行为。

无论哪种方式，您都应该避免使用原始指针成员。您最好将其包装在**智能指针**中。

# computer-science - 是否有一个项目欧拉等价物强调计算机科学而不是数学？

> ID：11139946
> 
> 赞同：4
> 
> 时间：2012-06-21T14:04:54.437
> 
> 标签：computer-science

我已经做了几天 Euler 项目，我不得不承认它很有趣。但是，如果有一些东西更专注于计算机科学而不是数学，那就太好了。这样的事情对于练习算法和数据结构会很有趣，例如在准备编码面试时。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T14:19:23.740

您可能会喜欢[Programming Praxis](http://programmingpraxis.com)，它提供了一系列每周更新的练习曲，供精明的程序员进行教育和享受。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-06-21T14:12:52.833

我在另一个 SO 问题上遇到了这个问题 - [http://www.scs.stanford.edu/10wi-cs140/pintos/pintos.html](http://www.scs.stanford.edu/10wi-cs140/pintos/pintos.html)

它基本上会带您了解这个简化的操作系统，涉及操作系统的关键组件，它们是如何在 Pintos 中实现的，以及如何修改和自定义它们。这是学习系统内部编程的好方法，基本上是免费的 300 级“操作系统”大学课程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-12T20:15:51.723

我很惊讶没有人回答这个问题，但是......

[http://uva.onlinejudge.org/](http://uva.onlinejudge.org/)

您提交代码，它会告诉您是否成功解决了他们输入的问题。跟踪您的成功、失败、提交、排名……类似于 Project Euler。

遗憾的是（在我看来）它接受提交的语言的数量/类型有些有限（C、C++、Java、Pascal）。尽管如此，项目的数量和组织都非常好，你真的可以在一些概念上得到推动。

# c# - 使用 Rhino Mock 模拟文件调用

> ID：11139949
> 
> 赞同：0
> 
> 时间：2012-06-21T14:05:00.257
> 
> 标签：c#, .net, rhino-mocks

是否可以使用 rhino 模拟示例模拟文件调用：

```
 private ServerConnection LoadConnectionDetailsFromDisk(string flowProcess)
  {
       var appPath = System.Web.Hosting.HostingEnvironment.ApplicationPhysicalPath;
       var bodyFile = Path.Combine(appPath, @"XML\ServerConnections.xml");

        if (File.Exists(bodyFile))
        {
            //more logic
  } 
```

因此，我试图模拟 File.Exists 方法，使其返回 true，因此无论文件是否存在，我都能够测试逻辑的下一个分支。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:24:23.447

这是您的原始片段：

```
private ServerConnection LoadConnectionDetailsFromDisk(string flowProcess)
{
   var appPath = System.Web.Hosting.HostingEnvironment.ApplicationPhysicalPath;
   var bodyFile = Path.Combine(appPath, @"XML\ServerConnections.xml");

    if (File.Exists(bodyFile))
    {
        //more logic
    }
} 
```

cadrell 基本上没有使用 System.IO 库（无法模拟），而是说要添加一个抽象层，您可以对其进行模拟：

```
private ServerConnection LoadConnectionDetailsFromDisk(string flowProcess)
{
   var appPath = System.Web.Hosting.HostingEnvironment.ApplicationPhysicalPath;
   var bodyFile = Path.Combine(appPath, @"XML\ServerConnections.xml");

    if (FileExists(bodyFile))
    {
        //more logic
    }
}

public bool FileExists(bodyFile) { return File.Exists(bodyFile) } 
```

现在，在您的测试中，您可以定义一个使用大部分现有代码的 PartialMock（允许您对其进行测试），但允许您仅覆盖 FileExists 方法：

```
var myPartialMock = mockRepo.PartialMock(typeof(MyObject));

myPartialMock.Expect(m=>m.FileExists("")).IgnoreArguments().Return(true);

myPartialMock.LoadConnectionDetailsFromDisk("myProcess"); 
```

现在，从 if 语句内部调用总是返回 true。

其他需要考虑的事情；我看到一个基于文件存在的 if 块。您没有指定代码，但我敢打赌，除了您（因为您可以更改代码）之外的任何人，该代码都会打开或操作我们现在知道存在的文件。因此，整个方法与您可以和不能进行单元测试的边界擦肩而过。您可以考虑重构此方法以从另一个函数获取 Stream（允许您模拟该函数并使用测试数据注入 MemoryStream），但在某些时候您将刮擦“沙箱”的边缘，只需要相信 .NET 团队完成了他们的工作，并且对 File.Exists、File.Open 等的调用按预期工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:01:39.937

使用接口将其抽象出来。

```
public Interface IFileChecker
    {
       bool FileExists(string path)
    } 
```

然后使用该接口创建您的模拟对象。

```
IFileChecker fileChecker = mocks.Stub<IFileChecker>();

using (mocks.Record())
            {
                fileChecker.Stub(i => i.FileExists(Arg<string>.Is.Any)).Return(true);
            } 
```

# actionscript-3 - AS3 - 我应该将所有对象添加到舞台上，还是只添加屏幕上的对象？

> ID：11139954
> 
> 赞同：1
> 
> 时间：2012-06-21T14:05:16.037
> 
> 标签：actionscript-3, optimization, air, stage, displayobject

在 actionscript3（cs5.5 或 flashdevelop）中，管理离屏显示对象的最佳实践是什么？

**选项 A**：加载关卡时，将所有对象放在舞台上（即使是在屏幕外的方式）

或者

**选项 B**：跟踪哪些对象应该出现在屏幕上，当它们应该出现时将它们添加到屏幕上，并在它们不应该出现时将它们移除。

* * *

*选项 A*肯定更容易管理，但实际上这两个选项的性能更高？在某些情况下更好吗？（即，瓦片地图可能会受益于管理屏幕上的哪些瓦片（尤其是对于巨大的地图），但也许 Flash 会在幕后处理所有这些？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:50:29.597

Option B is going to be a lot faster, most of the time. But for tile maps and similar, I would recommend avoiding the scene-graph and use manual bitmapdata-blitting instead.

# html - CSS 在悬停时缩小

> ID：11139957
> 
> 赞同：3
> 
> 时间：2012-06-21T14:05:22.287
> 
> 标签：html, css, menu, hover

我正在使用`<ul>`/`<li>`和 CSS 制作菜单。

这是我到目前为止所拥有的：[https ://jsfiddle.net/gANfS/6/](https://jsfiddle.net/gANfS/6/)

问题是，如果您将鼠标悬停在 5 像素边距内的顶部边缘上，它会开始变得疯狂并在悬停和未悬停状态之间来回移动，因为块的大小会增大和缩小。我怎样才能解决这个问题？当我缩小 li 时，我不想缩小悬停区域。那会解决它，但我不知道如何把它拉下来。想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:25:37.333

这是一个黑客工作......但它会工作

代替`magin-top:5px;`

做`border-top:5px solid black;`

如果您希望背景颜色不同，只需确保将边框颜色设置为相同颜色即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T14:12:29.777

将您的内容包装`li`到一个 div 中，然后将您的收缩应用到该 div （`.sel div:hover`而不是`li:hover`），这应该可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:12:39.163

原因是鼠标悬停时，按钮向下移动并设置一个`margin-top 5px`. 然后，如果鼠标位于该顶部边缘，则按钮不再具有“悬停”状态并缩回。当它返回时，它切换到鼠标悬停状态，旅程再次开始。

您可以使用`padding-top:5px`代替`margin-top`并在整个容器上设置 HOVER 效果。与边距相反，填充是元素内部的空间。这样，当鼠标在上边缘上时，它仍然会被认为是在元素上，它不会再闪烁了。

# php - 无法将upload_tmp_dir 设置为非PHP 驱动器上的目录？

> ID：11139967
> 
> 赞同：3
> 
> 时间：2012-06-21T14:05:37.687
> 
> 标签：php, file-upload, wamp

PHP专家，我已经在这个问题上工作了大约一天半，我很茫然。如果我是对的，我在 PHP 中发现了一个可以说是巨大的疏忽......接受失败。甚至有人向 PHP 提交了一个错误，最终由于缺乏活动而被关闭。

我在 WAMP 堆栈中运行带有 Apache 的 PHP 5.3。

我正在做一个简单的文件上传（然后从 tmp 位置移动），出于安全和速度的原因，我希望初始上传临时目录（upload_tmp_dir）位于文件将结束的不同磁盘上移动后，恰好是网络共享。Z：\温度。通常，它与 PHP 驻留在同一个磁盘上，但这意味着我必须上传一个可能很大的文件，然后等待它复制到另一个磁盘.. 而不是仅仅将它作为临时文件上传到另一个磁盘，并且执行快速移动。

例子：

```
//upload_tmp_dir = Z:\Temp (set in php.ini)
$targetpath = Z:\Data\pdfs (final destination)
move_uploaded_file($_FILES['uploadedfile']['tmp_name'], $targetpath); 
```

理论上，这应该将文件临时上传到 Z:\Temp，然后一旦完成且没有错误，将其移动到其最终目的地 Z:\Data\pdfs\filename.pdf。

我已经确认，只要upload_tmp_dir 位于PHP 所在的同一驱动器上，文件上传和移动就可以正常工作。即C:\MyTemp，但如果我遍历到不同的驱动器（如Z:\Temp）将无法正常工作。我在 php.ini 中为 upload_tmp_dir 指定的值将被忽略，如果我尝试遍历到不同的驱动器/分区，文件将存储在 C:\Windows\Temp 中。似乎没有什么区别，它是一个映射的驱动器。权限都设置正确，共享和安全都允许所有人（chmod 777 等效）。

我在多个位置读到“PHP”，特别是 move_uploaded_file()“遍历驱动器有问题”。这显然是出于安全原因，我认为，但它似乎不能在任何地方被覆盖。但是，随着越来越多的服务器使用虚拟化和空间有限的 SSD，我不明白这怎么可能。如果一个站点同时运行有数百名用户上传文件的站点，那么临时文件（可能很大）必须驻留在 PHP 所在的 C:\ 上有何意义？你们有没有人处理过这个问题或有任何提示？

我一直假设这是一个权限问题，因此我研究了可能会限制访问的其他 PHP 和 Apache 设置，但即使在 open_base_dir 中设置所有路径似乎也无济于事。

我发现一些帖子概述了相同或相似的问题：

[http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/PHP_Databases/Q_21190386.html](http://www.experts-exchange.com/Web_Development/Web_Languages-Standards/PHP/PHP_Databases/Q_21190386.html)

[https://serverfault.com/questions/128017/php-ignores-upload-tmp-dir](https://serverfault.com/questions/128017/php-ignores-upload-tmp-dir)

[https://bugs.php.net/bug.php?id=44420](https://bugs.php.net/bug.php?id=44420)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:19:50.950

这家伙说：

映射驱动器是用户特定的，网络服务器，因此 php，以不同的用户名运行

[http://forums.phpfreaks.com/index.php?topic=175349.0](http://forums.phpfreaks.com/index.php?topic=175349.0)

# ios - 如何将 24 小时字符串时间转换为 12 小时时间字符串格式

> ID：11139973
> 
> 赞同：12
> 
> 时间：2012-06-21T14:05:52.347
> 
> 标签：ios, nsdate, nsdateformatter

我有时间在 NSString 中，例如“15:15”

我想将此 NSString 时间转换为 12 小时 NSString（即“3:15 PM”）。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2012-06-21T14:10:27.180

用于`NSDateFormatter`将字符串转换为`NSDate`. 然后再次使用 dateformatter 将其更改`NSDate`为字符串。

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
dateFormatter.dateFormat = @"HH:mm";
NSDate *date = [dateFormatter dateFromString:@"15:15"];

dateFormatter.dateFormat = @"hh:mm a";
NSString *pmamDateString = [dateFormatter stringFromDate:date]; 
```

代码可能包含一些错误，无需编译或测试即可编写。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-06-24T07:01:51.503

@Python

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
NSLocale *locale = [[NSLocale alloc] initWithLocaleIdentifier:@"en_US_POSIX"];
[dateFormatter setLocale:locale];
[dateFormatter setDateFormat:@"hh:mm"]; 
```

希望这可以帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-06-21T14:10:25.993

看看这个 SO 问题：[NSDateFormatter dateFromString and iPhone in 24 Hour Format Confusion](https://stackoverflow.com/questions/2173965/nsdateformatter-datefromstring-and-iphone-in-24-hour-format-confusion)

您应该能够使用`NSDateFormatter`来格式化您想要的时间样式，然后将字符串读入格式化程序并以您想要的格式将其拉回。

# html - 使用 :before 悬停内联菜单

> ID：11139974
> 
> 赞同：0
> 
> 时间：2012-06-21T14:05:54.530
> 
> 标签：html, css

我正在尝试为我的所有内联菜单制作默认悬停效果，但悬停效果并未覆盖整个“li a”元素。我在下面放了代码来说明问题。 [http://jsfiddle.net/yWqK4/](http://jsfiddle.net/yWqK4/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:11:51.553

您正在将`<a>`标签修改为`block`显示并执行所有其他类型的不必要的事情。

您唯一需要做的就是更改元素的背景颜色。将用于悬停效果的 CSS 替换为：

```
.Menu li a:hover {
    background-color: rgba(0,0,0,0.3);
} 
```

它按预期工作。见[http://jsfiddle.net/muNFY/](http://jsfiddle.net/muNFY/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-06-21T14:12:33.637

您无需使用`:before`即可获得理想的结果。固定游览风格在这里[http://jsfiddle.net/yWqK4/2/](http://jsfiddle.net/yWqK4/2/)

# objective-c - 什么时候通过 iOS/Objective-C 中的代码操作屏幕控件是安全的

> ID：11139981
> 
> 赞同：1
> 
> 时间：2012-06-21T14:06:16.393
> 
> 标签：objective-c, ios

我有一个关于 iOS（或者更准确地说是 Objective-C）和属性的问题。我有一个带有 UISegmentedControl 的 UIView，默认情况下它有 3 个段。我有一条接受参数的消息，并且基于此参数，我可能想删除其中一个段。在 UIView AI 中这样做：

```
MyViewController *myview = [[[MyViewController alloc] initWithNibName:@"MyViewController" nib:nil] autorelease];
[[self navigationController] pushViewController:myview animate:YES];
[myview showItem:item]; 
```

在 UIView B 中，这发生在 showItem 中：

```
-(void) showItem:(Item*)item{
    if (item.removeSegment){
        [segmentControl removeSegmentAtIndex:0 animate:NO];
    }
} 
```

我注意到只有在我将它推送到导航控制器后调用 showItem 时才会删除该段。当我交换这两行时，我首先调用 showItem 然后推送视图， UISegmentedControl 仍然有三个段而不是两个段。

这只是感觉不对，如果有人没有按正确的顺序调用两条消息，我的代码就会中断，这似乎是一种不好的做法。有一个更好的方法吗？我一直在寻找某种我可以使用的属性生命周期，我对 ActionScript 3 非常熟悉，但我一直无法找到关于该主题的任何内容。

（顺便说一句：在 AS3 中我会创建一个属性，在设置器中我不操作任何屏幕控件，而是调用 InvalideProperties。一旦创建了整个对象和子控件，我的重写方法 CommitProperties 将被调用。在 CommitProperties 我检查如果我的属性值发生了变化，这就是我要删除该段的地方。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-06-21T14:14:57.793

执行此类操作的一种常见方法是在其中创建一个`Item *item`属性`MyViewController`并设置它`myview`的创建时间。因此，您的代码变为：

```
MyViewController *myview = [[[MyViewController alloc] initWithNibName:@"MyViewController" nib:nil] autorelease];
myview.item = item;
[[self navigationController] pushViewController:myview animate:YES]; 
```

`MyViewController`然后将在其方法中使用该属性`viewWillAppear:`来配置其自己的段控件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-06-21T15:24:41.997

我认为由于视图的延迟加载，myview->segmentControl 在引用 myview.view 之前不存在。

```
-(void) showItem:(Item*)item{
    [self view]; // NO OP TO FORCE LOAD!!
    if (item.removeSegment){
        [segmentControl removeSegmentAtIndex:0 animate:NO];
    }
} 
```

应该为你工作。希望这可以帮助！

# ios - iOS 采样器支持的示例/文件扩展名

> ID：11139983
> 
> 赞同：0
> 
> 时间：2012-06-21T14:06:19.353
> 
> 标签：ios, core-audio, sample

我正在编写一个 iOS 应用程序，它可以播放 MIDI 并使用 AUSampler 和 AUGraph 类输出其内容。我确定它支持像 Soundfont (.sf2) 这样的文件，但这个似乎已经过时了。

**问题：此框架是否支持任何其他文件或示例类型？**

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T17:04:22.127

AUSampler 还支持[DLS 格式](http://en.wikipedia.org/wiki/DLS_format)(.dls) 和[AUpreset 格式](http://developer.apple.com/library/mac/#technotes/tn2283/_index.html#//apple_ref/doc/uid/DTS40011217)(.aupreset)

# android - R.java 消失了

> ID：11139987
> 
> 赞同：5
> 
> 时间：2012-06-21T14:06:39.180
> 
> 标签：android, r.java-file

我最近下载了 Android 支持包，并一直在使用它来尝试让我在 SDK 10 上运行的应用程序使用 GridLayout。

无论如何，我清理了我的项目几次，处理我的 XML 文件中的这个错误，然后当我回到 /src 中的类时，对 R.* 的每一次引用都是一个错误。

我以前也遇到过这种情况，但它通常会自行修复，现在还没有。有谁知道该怎么做？

R.java 文件不再在我的 /gen 文件夹中。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-06-21T14:09:55.810

当您导入另一个项目时有时会发生这种情况首先我建议您构建它，它会自动创建。

如果它不起作用，请尝试从现有源创建新项目并指定下载的项目。它对我有用

希望这对你有用，让我知道..

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-06-21T14:10:27.660

有时，如果您的 XML 文件中有错误，R.java 将无法构建。浏览您的 XML 文件以确保一切正常（错字、忘记关闭括号等）。当您修复它时，它应该再次构建自己。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-06-21T14:19:27.523

你也可以试试`Adnroid Tools>Fix Project`。这可能会帮助您创建`gen/R.java`文件

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-06-21T16:04:13.473

请按照以下步骤操作：

在 Eclipse 中，=> 右键单击​​项目 > Android 工具 > 修复项目

通过这种方式，您可以修复许多有助于在 gen/R.java 文件中生成 R.java 的常见问题。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-06-21T14:17:13.330

发生这种情况可能有多种原因。以下我发现发生在我身上，我已经包括了我为解决这些问题而采取的步骤。

1.  第一步是尝试清理项目（我相信来自项目菜单选项）
2.  检查您的 XML 文件没有错误。有时，从 Project exlporer 窗口中 XML 文件名旁边的红色“x”可以明显看出这一点，有时则不然。如果不明显，请检查“错误”窗口（在“Windows”菜单选项中
3.  失败了，我发现通过禁用自动构建选项，向任意源文件添加一些任意注释，保存源文件，清理项目，删除注释然后重新选择自动构建也可以工作。

为某些 Eclipse 功能的大致位置道歉，但我目前不在 Eclipse 前检查。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-27T14:17:21.633

当您在**res**文件夹中**出现错误时，就会发生这种情况。**首先修复错误，然后执行：

 **### 项目 --> 清理 --> 好的

瞧！**

# linux - 分析非常长时间运行的任务

> ID：11139991
> 
> 赞同：3
> 
> 时间：2012-06-21T14:06:57.040
> 
> 标签：linux, optimization, profiling

您如何分析一个运行时间很长的脚本，它会产生许多其他进程？

我们有一项工作需要很长时间才能运行——11 小时或更长时间，有时甚至超过 17 小时——所以它在 Amazon EC2 实例上运行。

（它正在做袖扣 DNA 比对之类的。）

这项工作正在执行许多进程、脚本和实用程序等。

我们如何对其进行分析并确定工作的哪些组成部分花费的时间最长？

每个进程每秒的简单 CPU 利用率可能就足够了。我们怎样才能得到它？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-06-21T14:44:41.347

您的问题有很多解决方案：

*   [munin](http://munin-monitoring.org/)是一个很棒的监控工具，它可以扫描系统中的几乎所有东西并制作漂亮的图表:)。它非常易于安装和使用。

*   [atop](http://www.atoptool.nl/)可能是一个简单的解决方案，它可以定期扫描 CPU、内存、磁盘，您可以将所有这些信息存储到文件中（`-W`选项），然后您必须分析这些文件以检测瓶颈。

*   [sar](http://linux.die.net/man/1/sar)，它可以扫描系统上的所有内容，但更难解释（例如，您必须使用[RRDtool](http://oss.oetiker.ch/rrdtool/)自己制作图表）

# asp.net-mvc - .net MVC Master Detail View 与相关记录

> ID：11139993
> 
> 赞同：0
> 
> 时间：2012-06-21T14:07:06.347
> 
> 标签：asp.net-mvc, razor

我正在寻找一个主细节视图。

我有两张表 tbFamily 和 tbFamilyMember。

我目前能够查看家庭详细信息并列出相关的家庭成员，但是，我想根据他们的角色来分隔家庭成员。即我想显示父母/监护人列表，然后显示按出生日期排序的孩子列表。

我的模型如下：

```
public class tbFamily
{
    public int tbFamilyID { get; set; }
    public string Surname { get; set; }
    public string Address1 { get; set; }
    public string Address2 { get; set; }
    public string Address3 { get; set; }
    public string Town { get; set; }
    public string County { get; set; }
    public string Postcode { get; set; }
    public string Country { get; set; }
    public string Telephone { get; set; }
    public string Mobile { get; set; }
    public string Email { get; set; }

    public virtual ICollection<tbFamilyMember> tbFamilyMember { get; set; }
    public virtual ICollection<tbFamilyData> tbFamilyData { get; set; }
}

public class tbFamilyMember
{
    public int tbFamilyMemberID { get; set; }
    public int tbFamilyID { get; set; }
    public int Role { get; set; }
    public string Firstname { get; set; }
    public string Surname { get; set; }
    public char Gender { get; set; }

    [DisplayFormat(DataFormatString = "{0:d}", ApplyFormatInEditMode = true)]
    public DateTime DateOfBirth { get; set; }

    public virtual tbFamily tbFamily { get; set; }
} 
```

我的控制器目前看起来如下：

```
 public ActionResult Details(int id = 0)
    {
        tbFamily tbfamily = db.tbFamily.Find(id);
        if (tbfamily == null)
        {
            return HttpNotFound();
        }
        return View(tbfamily);
    } 
```

其关联的视图

```
@Html.DisplayFor(model => model.Surname)
@Html.DisplayFor(model => model.Address1)
@Html.DisplayFor(model => model.Address2)
@Html.DisplayFor(model => model.Address3)
@Html.DisplayFor(model => model.Town)
@Html.DisplayFor(model => model.County)
@Html.DisplayFor(model => model.Postcode)
@Html.DisplayFor(model => model.Country)
@Html.DisplayFor(model => model.Telephone)
@Html.DisplayFor(model => model.Mobile)
@Html.DisplayFor(model => model.Email)

@foreach (var item in Model.tbFamilyMember)
{
    @Html.DisplayFor(modelItem => item.Firstname)
    @Html.DisplayFor(modelItem => item.Surname)
    @Html.DisplayFor(modelItem => item.Role)
} 
```

获取孩子：

```
public ActionResult GetChildren(int id)
{
    var tbFamilyData = from f in db.tbFamilyMember
                       where f.tbFamilyID.Equals(id)
                       where f.Role.Equals(3)
                       select f;
        return View(tbFamilyData);
} 
```

其关联视图：

```
@foreach (var item in Model.tbFamilyData)
{
    @Html.DisplayFor(modelItem => item.tbFamilyMember.Firstname)
    @Html.DisplayFor(modelItem => item.tbFamilyMember.Surname)
    @Html.DisplayFor(modelItem => item.tbFamilyMember.Role)
} 
```

只是不知道如何让两者一起工作！

我创建了一个单独的模型 tbFamilyData

```
public class tbFamilyData
{
    public virtual tbFamily tbFamily { get; set; }
    public virtual tbFamilyMember tbFamilyMember { get; set; }
} 
```

我现在收到错误 tbFamilyData has no key defined。

希望有人可以提供帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-06-21T17:15:47.547

我会建议以下两种选择之一：

1）创建更好地代表您的视图的视图模型，并将它们填充到控制器中（我的首选解决方案）。

```
public class FamilyViewModel 
{
    public string Surname { get; set; }
    ... // other props

    public ICollection<FamilyMemberViewModel> Parents { get; set; }
    public ICollection<FamilyMemberViewModel> Children { get; set; }
} 
```

2) 在视图中使用 Linq 方法过滤要显示的数据

```
<h1>Parents</h1>
@foreach (var item in Model.tbFamilyMember.Where(x => x.Role == Roles.Parent))
{
    ...
}

<h1>Children</h1>
@foreach (var item in Model.tbFamilyMember.Where(x => x.Role == Roles.Child)
                                          .OrderBy(x => x.DateOfBirth))
{
    ...
} 
```

# ruby-on-rails - 从另一个表计算用户

> ID：11139996
> 
> 赞同：1
> 
> 时间：2012-06-21T14:07:19.097
> 
> 标签：ruby-on-rails, activerecord, count

我正在尝试计算分配给他们的具有特定 team_id 的用户数量。目前我们有一个用户表和一个团队表，我们的用户表有一个`belongs_to`我们的团队表，而团队表与用户是多对多的关系。

我的 teams_helper 中有以下代码

```
def number_of_players(team)
  User.count("team_id", :conditions => team_id= :team)
end 
```

我认为这是这样的：

```
%td= number_of_players(team.id) 
```

我遇到的问题是计数不正确。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-06-21T14:21:39.203

那个怎么样？

```
# if team is an integer
def number_of_players(team)
  User.where(:team_id => team).count
end 
```

或者

```
# if team is an instance of Team and `has_many :users`
def number_of_players(team)
  team.users.count
end 
```